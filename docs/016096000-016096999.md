# StackOverflow 问答 16096000-16096999

# sql - 确定表的行中哪些列发生了变化

> ID：16096000
> 
> 赞同：4
> 
> 时间：2013-04-19T01:56:48.453
> 
> 标签：sql, sql-server, tsql

我有一个 SQL Server 表，其中包含与各种 s 相关`Measurement`的几个不同s 的增量s：`Attribute``Object`

```
MeasurementID  ObjectID    Attribute1  Attribute2  Attribute3
100            1           'blue'      111         'large'
101            1           'blue'      114         'large'
102            1           'red'       114         'large'
103            1           'red'       117         'large'
104            1           'cyan'      118         'large'
105            2           'blue'      450         'huge'
106            3           'blue'      450         'huge'
107            3           'red'       450         'huge' 
```

我的目标是找到一个有效的查询，给定一个特定的`ObjectID`告诉我哪些属性更改以及何时更改。例如，假设`ObjectID=1`. `Attribute1`在`MeasurementID=102`(from `'blue'`to `'red'`) 发生变化，对于`Attribute2`at`MeasurementID=101`和`MeasurementID=103`以及`Attribute3`在任何时候 ( `NULL`) 也是如此。从概念上讲，我正在寻找满足这个伪代码定义的东西：

```
CREATE FUNCTION GetMeasurementChanges (ObjectID int, AttributeName varchar)
RETURNS @returnMeasurementIDs TABLE
  (MeasurementID int) -- rows of MeasurementIDs 
```

我可以想出一种缓慢的方法，通过逐个选择临时表`Object`，`Object`然后遍历行，测试每个行`Attribute`，但我怀疑这会表现得很糟糕。

任何人有一个技巧或类似的问题，他们可以指出我吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:11:34.183

尝试这个

```
if (@attributeName = 'Attribute1')
begin
  insert into @returnMeasurementIDs
  select measurementid from (
  select measurementid,
  rank() over (partition by objectId, attribute1 order by measurementid) rnk,
  row_number() over (order by measurementid) rn
  from table where objectid = @ObjectID
  ) v where rnk = 1 and rn <> 1
end
else if (@attributeName = 'Attribute2')
begin
  insert into @returnMeasurementIDs
  select measurementid from (
  select measurementid,
  rank() over (partition by objectId, attribute2 order by measurementid) rnk,
  row_number() over (order by measurementid) rn
  from table where objectid = @ObjectID
  ) v where rnk = 1 and rn <> 1
end
else if (@attributeName = 'Attribute3')
begin
  insert into @returnMeasurementIDs
  select measurementid from (
  select measurementid,
  rank() over (partition by objectId, attribute3 order by measurementid) rnk,
  row_number() over (order by measurementid) rn
  from table where objectid = @ObjectID
  ) v where rnk = 1 and rn <> 1
end 
```

[SQL 演示](http://sqlfiddle.com/#!3/811ec/6)

[Rank](http://msdn.microsoft.com/en-us/library/ms189798.aspx) - 用于按 objectid 和属性对每个组进行排名，当属性更改时它将返回 1。

[Row_Number](http://msdn.microsoft.com/en-us/library/ms186734.aspx)用于对所有行进行排名并忽略所有更改的测量 ID 列表中的第一行，以便返回第 102、104 行等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:11:54.790

```
CREATE FUNCTION dbo.GetMeasurementChanges -- always use schema prefix
(
  @ObjectID INT, @AttributeName VARCHAR(32)
)
RETURNS TABLE -- use an inline table-valued function when possible
WITH SCHEMABINDING
AS
  RETURN 
  (
    WITH x AS 
    (
      SELECT ObjectID, MeasurementID, Attribute1, Attribute2, Attribute3, 
        rn = ROW_NUMBER() OVER (ORDER BY MeasurementID)
      FROM dbo.MyTable -- update this of course
      WHERE ObjectID = @ObjectID
    ), y AS 
    (
      SELECT MeasurementID,
        r1 = CASE @AttributeName WHEN 'Attribute1' THEN ROW_NUMBER() 
             OVER (PARTITION BY Attribute1 ORDER BY MeasurementID) END,
        r2 = CASE @AttributeName WHEN 'Attribute2' THEN ROW_NUMBER() 
             OVER (PARTITION BY Attribute2 ORDER BY MeasurementID) END,
        r3 = CASE @AttributeName WHEN 'Attribute3' THEN ROW_NUMBER() 
             OVER (PARTITION BY Attribute3 ORDER BY MeasurementID) END
      FROM x
    )
    SELECT MeasurementID FROM y WHERE 1 IN (r1, r2, r3)
      AND NOT EXISTS 
      (
        SELECT 1 FROM x WHERE x.rn = 1 
        AND MeasurementID = y.MeasurementID
      )
  );
GO 
```

替代：

```
CREATE FUNCTION dbo.GetMeasurementChanges -- always use schema prefix
(
  @ObjectID INT, 
  @AttributeName VARCHAR(32)
)
RETURNS TABLE -- use an inline table-valued function when possible
WITH SCHEMABINDING
AS
  RETURN 
  (
    WITH x AS 
    (
      SELECT ObjectID, MeasurementID, Attribute1, Attribute2, Attribute3, 
        rn = ROW_NUMBER() OVER (ORDER BY MeasurementID)
      FROM dbo.MyTable WHERE ObjectID = @ObjectID
    ),
    y AS 
    (
      SELECT MeasurementID, r = ROW_NUMBER() OVER (
            PARTITION BY CASE @AttributeName 
          WHEN 'Attribute1' THEN Attribute1
          WHEN 'Attribute2' THEN CONVERT(VARCHAR(32), Attribute2)
          WHEN 'Attribute3' THEN Attribute3 END 
        ORDER BY MeasurementID)
      FROM x
    )
    SELECT MeasurementID FROM y WHERE r = 1
      AND NOT EXISTS 
      (
        SELECT 1 FROM x WHERE x.rn = 1 
        AND MeasurementID = y.MeasurementID
      )
  );
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:17:25.117

尝试这个

```
SELECT  CASE WHEN a.Attribute1 = b.Attribute1 THEN 1 END AS Attribute1,
    CASE WHEN a.Attribute2 = b.Attribute2 THEN 1 END AS Attribute2,
    CASE WHEN a.Attribute3 = b.Attribute3 THEN 1 END AS Attribute3
FROM    Measurements a
    INNER JOIN Measurements b
    ON (b.MeasurementID = (SELECT MAX(MeasurementID) FROM Measurements c WHERE    c.MeasurementID < a.MeasurementID AND c.ObjectID = a.ObjectID)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:36:59.943

将选项与 TOP 1 + [CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符一起使用

```
CREATE FUNCTION dbo.getMeasurementChanges(@ObjectID int, @AttributeName nvarchar(10))
RETURNS TABLE
WITH SCHEMABINDING
AS
RETURN
 (
  SELECT o.MeasurementID
  FROM dbo.test90 t 
    CROSS APPLY (
                 SELECT TOP 1 MeasurementID, ObjectID,
                   CASE @AttributeName WHEN 'Attribute1' THEN t.Attribute1
                                       WHEN 'Attribute2' THEN CAST(t.Attribute2 AS nvarchar(10))
                                       WHEN 'Attribute3' THEN t.Attribute3 END AS t1Attributes,
                   CASE @AttributeName WHEN 'Attribute1' THEN t2.Attribute1
                                       WHEN 'Attribute2' THEN CAST(t2.Attribute2 AS nvarchar(10))
                                       WHEN 'Attribute3' THEN t2.Attribute3 END AS t2Attributes
                 FROM dbo.test90 t2
                 WHERE t2.ObjectID = @ObjectID AND t.MeasurementID < t2.MeasurementID                                      
                 ORDER BY MeasurementID ASC
                 ) o
WHERE t.ObjectID = @ObjectID AND t1Attributes != t2Attributes) 
```

为了提高性能，请使用以下索引：

```
CREATE INDEX x ON dbo.test90(ObjectID) INCLUDE(MeasurementID, Attribute1, Attribute2, Attribute3)
CREATE INDEX x2 ON dbo.test90(MeasurementID) INCLUDE(ObjectID, Attribute1, Attribute2, Attribute3) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/bc688/1)上的演示[](http://sqlfiddle.com/#!3/bc688/1)

# android - 不会对硬件征税的android自定义主页按钮

> ID：16096005
> 
> 赞同：0
> 
> 时间：2013-04-19T01:57:08.580
> 
> 标签：android, android-intent, android-actionbar, android-navigation

我正在开发一个安卓应用程序。我希望我的应用程序有一个主页按钮。所以我决定为此使用一个可点击的 ImageView，我将它放在标题栏中。每当用户单击主图像时，应用程序将导航到主屏幕：我通过让图像调度启动 HomeActivity 的意图来实现。

我担心的是整个方法感觉像是糟糕的设计（我可能错了）。基本上所有的活动都遵循 HomeActivity。而且由于我通常不调用`finish()`我的活动（以便允许后退按钮导航），我最终会陷入循环吗？例如，假设用户从 HomeActivity 转到 FooActivity，然后转到 BarActivity，然后单击主页图像，从而转到 HomeActivity。我知道我可以依靠 android 在需要时回收内存。但我不希望我的应用程序对系统征税这么多。

那么android设计师通常如何设计`home`图标/按钮以避免这种循环问题呢？或者 android 是否知道我正在返回 HomeActivity，因此可能会完成我刚刚经历的其他活动的先前实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:06:28.847

为此[使用导航的应用程序图标](http://developer.android.com/guide/topics/ui/actionbar.html#Home)

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# python - Python“不支持的操作数类型”

> ID：16096006
> 
> 赞同：0
> 
> 时间：2013-04-19T01:57:18.293
> 
> 标签：python, math, python-3.x

我正在用 Python 编写我的第一个程序，但出现错误：

```
 "TypeError: unsupported operand type (s) for /: 'str' and 'str' 
```

这就是我正在做的事情：

```
import sys
import math
import scipy.stats import norm

S_t = sys.argv[1];
K = sys.argv[2];
r = sys.argv[3];
T = sys.argv[4];
sigma_0 = sys.argv[5];

d1 = (math.log(S_t/K) + (r - pow(sigma_0, 2)/2)*T)/(simga_0*math.sqrt(T));
x = norm.cdf(d1); 
```

我不确定我的错误在哪里。另外，`x = norm.cdf(d1)`计算累积范数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T01:58:57.393

问题在于`S_t`and`K`是字符串，因为命令行参数是字符串。

如果要将它们转换为其他类型，则必须告诉 Python 如何/转换什么。例如：

```
S_t = float(sys.argv[1])
K = float(sys.argv[2])
r = float(sys.argv[3])
T = float(sys.argv[4]) 
```

* * *

同时，值得学习自己调试。当你在这样的长行中遇到错误，并且你无法判断它的哪一部分是错误的，那就把它分解。如果你有这个：

```
d1 = (math.log(S_t/K) + (r - pow(sigma_0, 2)/2)*T)/(simga_0*math.sqrt(T)) 
```

试着把它分解成

```
d1a = math.log(S_t/K)
d1b = (r - pow(sigma_0, 2)/2)*T)/(simga_0*math.sqrt(T))
d1 = d1a + d1b 
```

现在，看看错误是否在`d1a`或中`d1b`。既然是 in `d1a`，就再分解一下：

```
d1a1 = S_t/k
d1a = math.log(d1a1) 
```

现在你可以看到它在`d1a1`. 这更容易弄清楚 - 如果您仍然无法弄清楚，您可以在此处发布一个更简短的问题：

```
import sys

S_t = sys.argv[1]
K = sys.argv[2]

d1a1 = S_t/k 
```

# c - libwebsocket：如何为 cookie 字段构建 lextable

> ID：16096007
> 
> 赞同：0
> 
> 时间：2013-04-19T01:57:19.840
> 
> 标签：c, websocket

我通过 libwebsocket 编写 websocket 服务器。我需要 Cookie 字段来验证用户。有一个名为 lextable[] 的数组用于解析 http header 。我不知道如何为 Cookie 文件修改 lextable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T14:07:12.560

好的，转到您的 libwebsockets 目录中的“lib”目录。找到“minilex.c”文件，用你喜欢的文本编辑器打开它。在文件的开头，您将看到“set”字符串数组。您只需要在末尾添加“Cookie：”行。下一步是使用命令编译程序“minilex.c” `gcc minilex.c -o minilex`。编译完成后，运行二进制文件，您将看到一个由二维数组组成的控制台，其中包含字母的十六进制代码及其位置。将其复制并粘贴到“parsers.c”文件中。

# cassandra - 在使用 Datastax API（使用新的二进制协议）时在 Cassandra 中创建列族或表

> ID：16096009
> 
> 赞同：7
> 
> 时间：2013-04-19T01:57:27.410
> 
> 标签：cassandra, command-line-interface, cql, cql3

我已经开始使用 Cassandra 数据库。我打算使用[Datastax API](https://github.com/datastax/java-driver)来更新/读取 cassandra 数据库。我对这个 Datastax API（它使用新的二进制协议）完全陌生，我也找不到很多文档，其中有一些适当的例子。

当我使用 Netflix 客户端（Astyanax 客户端）使用 Cassandra CLI 时，我创建了这样的列族 -

```
create column family profile
with key_validation_class = 'UTF8Type'
and comparator = 'UTF8Type'
and default_validation_class = 'UTF8Type'
and column_metadata = [
  {column_name : crd, validation_class : 'DateType'}
  {column_name : lmd, validation_class : 'DateType'}
  {column_name : account, validation_class : 'UTF8Type'}
  {column_name : advertising, validation_class : 'UTF8Type'}
  {column_name : behavior, validation_class : 'UTF8Type'}
  {column_name : info, validation_class : 'UTF8Type'}
  ]; 
```

现在我尝试使用 Datastax API 做同样的事情。因此，要开始使用 Datastax API，我是否需要以上述不同的方式创建列族？或者，每当我尝试使用 Datastax API 将数据插入 Cassandra 数据库时，上面的列系列都可以正常工作。

如果上述列族不起作用，那么-

首先，我创建了如下所示的 KEYSPACE -

`CREATE KEYSPACE USERS WITH strategy_class = 'SimpleStrategy' AND strategy_options:replication_factor = '1';`

现在我很困惑如何创建表？我不确定哪种方法是正确的？

我应该这样创作吗？

`CREATE TABLE profile ( id varchar, account varchar, advertising varchar, behavior varchar, info varchar, PRIMARY KEY (id) );`

还是我应该这样创作？

`CREATE COLUMN FAMILY profile ( id varchar, account varchar, advertising varchar, behavior varchar, info varchar, PRIMARY KEY (id) );`

以及如何添加-

```
crd as DateType
lmd as DateType 
```

在使用 Datastax API 时在上面的表或列族中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T07:03:48.517

无论您使用关键字**TABLE**还是**COLUMNFAMILY**，两者都是相同的（同义词）。我猜想关键字**TABLE**是在 CQL3 中引入的。所以你可以在你的陈述中使用任何一个。

第二个问题，添加DateType，你应该使用时间戳。

```
CREATE COLUMNFAMILY sample (rowkey text, ts timestamp, PRIMARY KEY(rowkey));

INSERT INTO sample (rowkey, ts ) VALUES ( '1','1366354711797');
// ts value is basically the System.currentTimeMillis(), I mean a long value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T16:11:35.527

在 cassandra 中，键空间或数据库是相同的，就像明智的列族和表一样。

Cassandra在语法上更像Mysql，并且支持hql（类似于sql）

cassandra 中的表可以这样创建：

```
CREATE TABLE users (
user_name varchar,
password varchar,
gender varchar,
session_token varchar,
state varchar,
birth_year bigint,
PRIMARY KEY (user_name)); 
```

更多信息：[Cassandra 教程](http://www.techburps.com/articles/create-a-cassandra-table/14/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T07:46:51.950

@neel4soft - 有了 Cassandra，事情就简单地发展了。因此，为了让人们更轻松，正在稳步进行重命名过程，以使从 SQL 到 CQL 的过渡对新手来说更容易。然而，CQL 不应该被认为是 SQL 的亲戚，而应该被认为是它母亲身边的第三个堂兄，换句话说，不是近亲。因此，将其与 MySQL 进行比较是对其功能的不恰当印象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-26T09:50:04.153

使用 cassandra-cli 和 cqlsh 创建表/列族时几乎没有区别。

其中之一是，如果我们使用 cassandra-cli 创建表，它将创建紧凑的存储格式，无法进一步更改。

在 cqlsh 中，它不会以这种格式创建，除非我们在创建表/列族时特别提及。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-15T09:53:58.497

列族是有序列的集合，它是行的容器，它存储在 Cassandra 键空间中，我们可以在键空间中创建**多个列族。**

列族也称为 RDBMS 表，但**列族不等于表。**

每个列族都存储在**磁盘上的单独文件中**。每行都有一个唯一的键，称为行键。Cassandra 还具有超级列族的概念，它允许通过保存一组不同的列来进行嵌套访问。

在 Column Family 中，我们可以设置数据的默认排序，我们可以制作压缩表，我们可以使用紧凑存储，我们可以设置**数据的过期时间。**

# php - 单选按钮上的自动递增名称属性

> ID：16096011
> 
> 赞同：3
> 
> 时间：2013-04-19T01:58:05.710
> 
> 标签：php, forms

我有一个包含一组单选按钮的表单，我正在使用 php.ini 将选中按钮的值发送到另一个页面。该表单可以选择添加另一组相同的单选按钮，因此如果我使用以下方法提供名称属性：

```
<div>
    <input type="radio" name="food[]" value="apple" /> Apple
    <input type="radio" name="food[]" value="orange" /> Orange
</div> 
```

并添加上面的克隆，

```
$_POST['food']; 
```

这将为我提供每个输入的值，总共为 4。我正在尝试使用括号递增方法，但仍保留返回已检查单选按钮值的功能。

所以我的问题是，有没有办法使用方括号对 name 属性进行自动递增，但是在将值发送到 php 时，请确保每个 div 单选按钮分组只返回一个被选中的值？如果这个问题太模糊，请告诉我，这是我在这里的第一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:41:10.867

我可能不明白你的问题。您不能自动增加名称，因为您使用单选按钮。通过在第一页选择苹果并在第二页选择橙色，您将失去您的第一个选择（苹果）。您可以使用复选框而不是单选按钮来做到这一点：

第 1 页：

```
<form method="post" action="page2.php">
<div>
    <input type="checkbox" name="numberofapples" value="1" /> Apple
    <input type="checkbox" name="numberoforanges" value="1" /> Orange
</div>
<input type="submit" value="go">
</form> 
```

第2页：

```
<form method="post" action="result.php">
<div>
    <?if($_POST['numberofapples']){?><input type="hidden" name="numberofapples" value="1" /> <?}?>
    <input type="checkbox" name="numberofapples" value="<?=($_POST['numberofapples'])?2:1?>" /> Apple
    <?if($_POST['numberoforanges']){?><input type="hidden" name="numberoforanges" value="1" /> <?}?>
    <input type="checkbox" name="numberoforanges" value="<?=($_POST['numberoforanges'])?2:1?>" /> Orange
</div>
<input type="submit" value="go">
</form> 
```

结果页面：

```
Apples: <?=($_POST['numberofapples'])?$_POST['numberofapples']:0?>
Oranges: <?=($_POST['numberoforanges'])?$_POST['numberoforanges']:0?> 
```

但是，您为什么不在发布第二页后进行计数呢？（将第 1 页的帖子值作为隐藏字段添加到第 2 页的表单中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:56:26.897

If you want to use several div groups with the same input names, I would create them like this:

```
<div>
    <input type="radio" name="food[0][]" value="apple" /> Apple
    <input type="radio" name="food[0][]" value="orange" /> Orange
</div>
<div>
    <input type="radio" name="food[1][]" value="apple" /> Apple
    <input type="radio" name="food[1][]" value="orange" /> Orange
</div>
<div>
    <input type="radio" name="food[2][]" value="apple" /> Apple
    <input type="radio" name="food[2][]" value="orange" /> Orange
</div> 
```

So, in your PHP, you will have each group in separated keys. For example

```
print_r( $_POST['food'] ); 
```

Should return something like this:

```
array(
  [0] => array(
    [0] => 'apple'
  ),
  [1] => array(
    [0] => 'orange'
  ), 
  [2] => array(
    [0] => 'apple',
    [1] => 'orange'
  )
) 
```

)

# javascript - 10个人在1-20之间选择相同数字的JS概率

> ID：16096017
> 
> 赞同：1
> 
> 时间：2013-04-19T01:58:26.657
> 
> 标签：javascript

我对javascript很陌生，所以请放轻松:)

我试图找出 10 个人选择相同随机数 (1 - 20) 的概率。

当我运行代码时，它每次都会返回相同的答案。在比较数字时，我认为第三个 for 循环有问题。一些帮助将不胜感激，我已经坚持了 3 天了:(

```
var counter = 0;

//Determine probability (percentage) 
for (var i = 1; i <=100; i++) {

    //Create array with 10 elements and assign each element with random integer (1 - 20)                
    for (var j = 1; j <= 10; j++) {
        var rndNum = [j];
        rndNum = Math.random();
        rndNum = Math.floor(rndNum * 20) + 1;   
    }   

    //Increment counter if match is found
    for (var p1 = 1; p1 <= 9; p1++) {               
        for (var p2 = p1 + 1; p2 <= 10; p2++) {
            if (rndNum[p1] == rndNum[p2]) {
                counter++;
            }
        }               
    }               
}

document.write("The probability of a match is: " + counter + "%"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:01:12.170

您制作随机数“数组”的代码是问题的一部分。`rndNum`只有一个值（它是一个只有一个项目的数组，每次都覆盖它）。您需要[`array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)将值添加到数组中。

你想要更像这样的东西：

```
 var rndNum = [];
    for (var j = 1; j <= 10; j++) {
        rndNum.push(Math.floor(Math.random()* 20) + 1);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:02:50.117

你想知道二十个人选择同一个随机数的概率吗？

```
alert("The probability of a match is: " + (Math.pow(.1, 20)*100)+ "%"); 
```

或者您想知道二十个人中的任何两个选择相同数字的概率？

```
alert("The probability of a match is: " + (Math.pow(.9, 20)*100)+ "%"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T03:19:26.207

你的 for 循环也应该从 0 开始，而不是一个（数组中的第一个元素是`array[0]`：

```
for (var p1 = 0; p1 <= 8; p1++) {               
        for (var p2 = p1 + 1; p2 <= 9; p2++) {
            if (rndNum[p1] == rndNum[p2]) {
                counter++;
            }
        }               
} 
```

您还需要将结果除以 10，因为您有 1,000 个测试（如果您要检查两个是否匹配）。如果您想查看它们是否都匹配，则需要以下内容：

```
var ordered = rndNum.sort();
if(ordered[0] == ordered[9])
    counter2++; 
```

[这](http://jsfiddle.net/EmCuw/1/)是组合数组声明和匹配检查器的小提琴。

# visual-studio - 如何用VB制作手机？

> ID：16096018
> 
> 赞同：-4
> 
> 时间：2013-04-19T01:58:37.430
> 
> 标签：visual-studio

我正在尝试制作电话。它应该有 14 个按钮（0-9、*、#、“拨号”、“结束”）和一个标签（答案）。如果你点击的都是号码，那么当你点击拨号时，标签应该会显示这个消息“DIALING...”。如果有*或#，则点击拨号时会弹出“请输入号码”的信息。

我走到这一步了。

```
 Private Sub btn0_Click(sender As System.Object, e As System.EventArgs) Handles btn0.Click
    Const int0 As Integer = 0
    lblinput.Text &= int0
End Sub

Private Sub btn1_Click(sender As Object, e As System.EventArgs) Handles btn1.Click
    Const int1 As Integer = 1
    lblinput.Text &= int1
End Sub

Private Sub btn2_Click(sender As Object, e As System.EventArgs) Handles btn2.Click
    Const int2 As Integer = 2
    lblinput.Text &= int2
End Sub

Private Sub btn3_Click(sender As Object, e As System.EventArgs) Handles btn3.Click
    Const int3 As Integer = 3
    lblinput.Text &= int3
End Sub

Private Sub btn4_Click(sender As Object, e As System.EventArgs) Handles btn4.Click
    Const int4 As Integer = 4
    lblinput.Text &= int4
End Sub

Private Sub btn5_Click(sender As Object, e As System.EventArgs) Handles btn5.Click
    Const int5 As Integer = 5
    lblinput.Text &= int5
End Sub

Private Sub btn6_Click(sender As Object, e As System.EventArgs) Handles btn6.Click
    Const int6 As Integer = 6
    lblinput.Text &= int6
End Sub

Private Sub btn7_Click(sender As Object, e As System.EventArgs) Handles btn7.Click
    Const int7 As Integer = 7
    lblinput.Text &= int7
End Sub

Private Sub btn8_Click(sender As Object, e As System.EventArgs) Handles btn8.Click
    Const int8 As Integer = 8
    lblinput.Text &= int8
End Sub

Private Sub btn9_Click(sender As Object, e As System.EventArgs) Handles btn9.Click
    Const int9 As Integer = 9
    lblinput.Text &= int9
End Sub

Private Sub btn10_Click(sender As Object, e As System.EventArgs) Handles btn10.Click
    Dim str10 As String = btn10.Text
    lblinput.Text &= str10
End Sub

Private Sub btn11_Click(sender As System.Object, e As System.EventArgs) Handles btn11.Click
    Dim str11 As String = btn11.Text
    lblinput.Text &= str11

End Sub

Private Sub btnEnd_Click(sender As System.Object, e As System.EventArgs) Handles btnEnd.Click
    Me.Close()
End Sub
Private Sub btnDial_Click(sender As Object, e As System.EventArgs) Handles btnDial.Click

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:22:41.090

**线索**

要测试输入是否为所有数字，您可以使用正则表达式：

```
 Regex.IsMatch(lblinput.Text, "^[0-9]+$") 
```

要测试它是否包含某些内容，您可以使用字符串的 Contain 方法：

```
 myString.Contains("#") 
```

# android - 带有图像视图和文本的自定义图像适配器

> ID：16096019
> 
> 赞同：0
> 
> 时间：2013-04-19T01:58:44.727
> 
> 标签：android

如何将图像添加到带有图像本身和文本的网格视图中。我尝试制作自定义图像适配器，但由于某些原因导致 imgView.setLayoutParams(new GridView.LayoutParams(85, 85)) 崩溃；

新问题如何从图像适配器中添加和删除...我需要的行为就像一张带有 a 的图片，我添加了带有文本 ab 的相同图片，所以应该有 2 张图片，然后我可以删除带有 a 的一张。 .

```
import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class AlbumAdapter extends BaseAdapter {

    private Context mContext;
    private ArrayList albNames;

    public AlbumAdapter(Context c, ArrayList albNames) {

        mContext = c;
        this.albNames = albNames;
    }

    public int getCount() {

        return mThumbIds.length;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {

        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
/*  public View getView(int position, View convertView, ViewGroup parent) {

        ImageView imageView;

        if (convertView == null) { // if it's not recycled, initialize some attributes

            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(10, 10, 10, 3);
        } 

        else {

            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    */

    public View getView(int position, View convertView, ViewGroup parent) {

        View view;

        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.album_image, null);
        } 

        else {

            view = convertView;
        }

        ImageView imgView = (ImageView) view.findViewById(R.id.icon_image);
        imgView.setLayoutParams(new LinearLayout.LayoutParams(50, 50));
        imgView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imgView.setPadding(10, 10, 10, 3);
        TextView albNameView = (TextView) view.findViewById(R.id.icon_text);

        if (albNames.size() > 0) {

            for (int i = 0; i < albNames.size(); i++) {

                imgView.setBackgroundResource(R.drawable.folder);           
                albNameView.setText((String)albNames.get(i));

            }

        }

        return view;
    }

    // references to our images
    public Integer[] mThumbIds = { R.drawable.folder};

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:01:53.747

尝试

```
imgView.setLayoutParams(new LinearLayout.LayoutParams(85, 85)); 
```

**编辑**

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class AlbumAdapter extends BaseAdapter {

    private Context mContext;

    public AlbumAdapter(Context c) {

        mContext = c;
    }

    public int getCount() {

        return mThumbIds.length;
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {

        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
/*  public View getView(int position, View convertView, ViewGroup parent) {

        ImageView imageView;

        if (convertView == null) { // if it's not recycled, initialize some attributes

            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(10, 10, 10, 3);
        } 

        else {

            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    */

    public View getView(int position, View convertView, ViewGroup parent) {

        View view;

        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.album_image, null);
        } 

        else {

            view = convertView;
        }

        ImageView imgView = (ImageView) view.findViewById(R.id.icon_image);
        imgView.setLayoutParams(new LinearLayout.LayoutParams(85, 85));
        imgView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imgView.setBackgroundResource(R.drawable.a);

        TextView albNameView = (TextView) view.findViewById(R.id.icon_text);
        albNameView.setText("as");

        return view;
    }

    // references to our images
    public Integer[] mThumbIds = { R.drawable.a };

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:12:40.273

'imgView' 是从 R.layout.album_image 膨胀的 ConvertView 的子级，它只不过是一个 LinearLayout。因此，在设置布局参数时，它需要是父 ViewGroup 类型。所以 LinearLayout.LayoutParams 工作正常。

假设您想设置“ConvertView”的大小，那么在这种情况下，它需要是 GridView.LayoutParams，因为“ConvertView”被添加到 GridView 的父级。

希望你明白了..!!

# iphone - 自动布局 UIScrollView 以适应内容，包括子视图和分组表

> ID：16096021
> 
> 赞同：4
> 
> 时间：2013-04-19T01:59:00.557
> 
> 标签：iphone, autolayout

我正在尝试提供有关分组为部分的对象的信息。它可能很长，所以每个部分都使用一个视图在视觉上分隔区域，并且都在滚动视图中。

第一个子视图有一个文本字段，它会调整大小以适应文本，其父视图也会调整大小以适应文本字段。

第二个子视图有一个分组表来显示数据。我希望表格中的所有数据都出现，并且不应该有表格滚动。

第三个子视图有更多信息，但它的内容是用于本演示的空视图。在真正的应用程序中，我可以添加任意数量的自定义子视图。

我发现第一个子视图适当地调整了大小，但我找不到布局约束的组合，这将使第二个子视图大小适合表格并将第三个视图向下移动。

当子视图的内容可能会调整大小时，我需要做什么才能使滚动视图适合其内容？表格视图正在填充父视图中的可用空间，但父视图未扩展以适应。我注意到第三个视图对超级视图有顶部空间限制，而不仅仅是它上面的视图。这在下面的屏幕截图中可见

![布局和模拟器](https://i.stack.imgur.com/3l709.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T04:19:36.693

我找到了一个与大多数解决方案一样的解决方案，回想起来似乎很明显。

我认为我的问题是内部 tableview 没有固定高度，并且由于它也是一个滚动视图，因此试图适应分配的任何内容，而不是扩展以适应内部内容。我能够通过在 IB 中添加一个固定的高度约束并将其连接到我的视图控制器中的插座来解决我的问题。然后在控制器中：

```
-(void) viewWillLayoutSubviews{
    [self.tableView layoutIfNeeded];
    self.tableViewHeightConstraint.constant = self.tableView.contentSize.height;
} 
```

德普。总之，表格视图需要一个高度，所以我设置了一个。

这是一个屏幕截图，请注意右侧的固定高度约束： ![正确滚动视图](https://i.stack.imgur.com/97VEt.png)

# java - Android 网络和线程

> ID：16096023
> 
> 赞同：0
> 
> 时间：2013-04-19T01:59:13.093
> 
> 标签：java, android, multithreading

我有一个只包含各种数据库查询的静态函数的类。由于它们都与网络相关，我需要在另一个线程中执行该代码。我正在尝试找到实现这一点的最佳方法。

```
public class MyClass {

    public static void someFunction() {
        ...
    }

    public static void anotherFunction() {
        ...
    }

} 
```

我正在考虑这样做：

```
public class MyClass {

    public static void someFunction() {
        new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                ...
            }
        }
    }

    public static void anotherFunction() {
        new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                ...
            }
        }
    }

} 
```

或者当我调用这些函数时创建一个新线程：

```
new AsyncTask<Void, Void, Void>() {
    @Override
    protected Void doInBackground(Void... params) {
        MyClass.someFunction();
    }
}

new AsyncTask<Void, Void, Void>() {
    @Override
    protected Void doInBackground(Void... params) {
        MyClass.anotherFunction();
    }
} 
```

最后，我想知道是否有一种方法可以运行与主线程并行的单个线程，该线程将专门处理这些函数调用。主线程将调用这些函数，而另一个线程将运行它们。

有没有人对实现这一点的最佳方法有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:14:10.177

阅读有关`ExecutorService`. `ExecutorService`允许您根据需要管理线程。如果您希望您的线程按顺序生成，您可以简单地使用`ExecutorService ex = Executors.newSingleThreadExecutor()`并随后将所有线程添加到这个单个 executorService。

`ex.submit(runnableInstance)`

但是，我也遇到了您面临的完全相同的问题。我还使用线程从数据库中查询。但是，它使我的代码看起来很乱。如果涉及简单操作，我建议您在主线程中使用查询。它几乎不会给应用程序的响应带来任何延迟。这样，您的代码将非常易于管理。

**编辑 ：**

很久以前，我还阅读了有关`CursorLoader`允许您在后台运行查询并可以通过实现来使用的类`LoaderManager.LoaderCallbacks<Cursor>`。这样，您不必编写丑陋的代码来在后台执行每个查询。但是，要使用它，您需要将数据库包装在 `ContentProvider`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:08:39.983

标准 Java 并发实用程序最适合这种情况。

例如：

```
private static final ExecutorService exe = Executors.newSingleThreadExecutor();
...
exe.execute(new Runnable() {
    public void run() {
        ...
        someFunction();
        ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:31:09.940

我相信对您来说最简单的解决方案是使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)

从安卓文档中提取

```
All requests are handled on a single worker thread -- they may take as long as necessary (and will not block the application's main loop), but only one request will be processed at a time. 
```

你只需要处理[onHandleIntent](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent%28android.content.Intent%29)

它为您做了很多工作，并且由于它是服务的子类，您可以直接或以其他方式（Intent..etc）绑定到服务以获取数据。

# jquery - 在外部单击时关闭 Jquery 列表菜单

> ID：16096024
> 
> 赞同：0
> 
> 时间：2013-04-19T01:59:18.040
> 
> 标签：jquery, jquery-plugins, drop-down-menu, onclick

我在 Codrops 找到了一个很棒的 jquery 插件，用于设置下拉列表的样式。该插件有效并且看起来很棒。我能够在没有任何重大问题的情况下实施它。

我只有一个问题，当我在菜单外单击时找不到关闭菜单的方法。换句话说，我希望在页面中的任何其他位置关闭菜单选项（不仅是在我单击菜单本身时）。我在这里找到了类似的主题，但我无法将其应用于我的需求。我真的很感激我能得到的任何帮助。

插件链接： http: [//tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/](http://tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:15:50.300

试试下面的代码，

```
$(document).mousedown(function(){
if($('.cd-dropdown.cd-active').length){ $('.cd-dropdown span').trigger('click');
}else{} }); 
```

# url - 覆盖在页面上的直接 URL

> ID：16096025
> 
> 赞同：0
> 
> 时间：2013-04-19T01:59:28.747
> 
> 标签：url, overlay

我的页面上有一个叠加层，我想为用户提供一个链接/URL，该链接/ URL 将他们直接引导到页面，并加载了叠加层。有可能做到吗？我怎么做？

这是我的代码：

```
$(function() {

  $('#overlay_job').click(function() {

    document.getElementById('iframe_job').src = "http://targeturl-for-my-overlay-content";

    $('#overlay_bg2').fadeIn('fast',function(){
      $('#overlay_box').fadeIn('fast');
    });
  });

  $('#boxclose').click(function() {
    $('#overlay_box').fadeOut('fast',function() {
      $('#overlay_bg2').fadeOut('fast');
    });
  });

  var overlay_bg2 = $("#overlay_box");
  //var top = $(window).scrollTop() - (overlay_bg2.outerHeight() / 2);
  var top=0;
  var left = -(overlay_bg2.outerWidth() / 2);

  overlay_bg2.css({ 'margin-top': top,'margin-left': left });

  if(getUrlVars()["openJobOverLay"] == "Y") {
         $('#overlay_job').trigger('click');
  }
});

function getUrlVars() {
  var vars = {};
  var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
              function(m,key,value) {
                vars[key] = value;
              });
  return vars;
} 
```

=========== 在页面上，用户可以单击此链接以获取显示的叠加层：

```
<a id="overlay_job" class="underline" href="javascript:void(0);%20opener.jobframe.location.reload();">
See job openings
</a>
<img src="link_arrow.gif" class="linkarrow">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:08:19.063

使用 CSS: 隐藏覆盖`display: none;`。给覆盖元素一个`id`，然后`id`像这样添加到 URL 中`http://www.yourpage.com#id`。然后使用[jQuery](http://jquery.com/)做这样的事情：

```
$(document).ready(function(){
  if(window.location.hash) $('#' + window.location.hash).show();
}); 
```

**编辑：**

在您的特定情况下，将此行添加为`$(document.ready();`.

```
$(function() {

  // All of your code inside this function...

  if(window.location.hash) $('#' + window.location.hash).click();

});

function getUrlVars() { 

// Some more of your code... 
```

# linux - shell 脚本中的 tcpdump 没有捕获任何内容

> ID：16096027
> 
> 赞同：4
> 
> 时间：2013-04-19T02:00:07.950
> 
> 标签：linux, tcpdump

我想启动一个 TCP 程序并捕获相关的数据包，我的 shell 脚本`cap.sh`如下：

```
 sudo tcpdump -i eth0 -w mypcap &
    sleep 3
    ./tcp_receiver
    sleep 2
    x=`ps -ef|grep "tcpdump"|grep -v "grep"|awk '{print $2}'`
    sudo kill -9 $x 
```

我跑`cap.sh`

```
 sudo ./cap.sh 
```

所以实际上在这个shell中，我可以在`sudo`没有密码的情况下运行，主机只是远程机器（PLanetlab节点）上的一个虚拟切片，虽然我可以看到它的进程`tcpdump`没有`ps -ef` 捕获任何东西我看到文件在完成`mypcap`后是0字节`cap.sh`

潜在的原因是什么？以及如何使 shell 脚本中的 tcpdump 捕获数据包？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:11:09.977

不要使用`kill -9`. 这样做不仅几乎总是错误的，而且可能会导致问题出现在这里，因为缓冲的数据被丢弃而不是写入磁盘。使用普通的旧杀戮，或`kill -2`.

另一种选择是添加在`-U`每个数据包后刷新输出缓冲区的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:26:17.730

一个潜在的原因：虚拟化环境中不存在 eth0。

# dart - 如何在使用 Dart 构建的 chrome 打包应用中实现复制和粘贴？

> ID：16096034
> 
> 赞同：2
> 
> 时间：2013-04-19T02:01:26.047
> 
> 标签：dart

这是我走了多远：

添加了清单文件的权限：

```
"permissions": ["clipboardRead", "clipboardWrite"] 
```

我阅读了有关 chrome.experiment.clipboard 的信息，但这似乎已被删除，取而代之的是 document.execCommand('copy')。

我写了这个程序来尝试一下：

```
main() {
  var copy = new ButtonElement()..text = 'copy';
  var paste = new ButtonElement()..text = 'paste';
  var textarea = new TextAreaElement()..text = 'foo';
  document.body.nodes.addAll([copy, paste, textarea]);      
  copy.onClick.listen((event) => document.execCommand('copy', null, null));
  paste.onClick.listen((event) => document.execCommand('paste', null, null));
} 
```

理想情况下，对于我的应用程序，我想编写一个名为 getClipboardText() 和 setClipboardText(String) 的函数。但首先，我试图让这个基本示例正常工作。

关于下一步尝试什么的任何想法？

编辑：更新了下面 amouravski 指出的错误。谢谢 ;）

已修复 - 感谢 Keith：

```
class Clipboard {
  static String get text {
    var active = document.activeElement;
    var hidden = new TextAreaElement();
    document.body.append(hidden);
    hidden.focus();
    document.execCommand('paste', null, '');    
    active.focus();
    hidden.remove();
    return hidden.value;
  }

  static set text(String s) {
    var active = document.activeElement;
    var hidden = new TextAreaElement();
    hidden.value = s;
    document.body.append(hidden);    
    hidden.select();
    document.execCommand('copy', null, '');
    active.focus();
    hidden.remove();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:52:50.780

你离得不远...
为了从 textarea 复制用户选择，执行复制命令时需要聚焦 textarea 元素。在您的代码段中，当您单击复制按钮时，焦点会转移。同样，在执行粘贴命令时，需要聚焦目标文本区域。

```
import 'dart:html';

main() {
  var copy = new ButtonElement()..text = 'copy';
  var paste = new ButtonElement()..text = 'paste';
  var textarea = new TextAreaElement()..text = 'foo';
  var resultTextarea = new TextAreaElement();
  var label = new ParagraphElement()..text = 'paste here too...';
  document.body.nodes.addAll([copy, paste, textarea, resultTextarea, label]);

  // Copy Handler
  void copyText(Event e) {
    //Check whether anything is selected, otherwise select all text.
    if (textarea.selectionStart != null &&
        textarea.selectionStart != textarea.selectionEnd) {
      textarea.focus();
    } else {
      textarea.select();
    }

    document.execCommand('copy', null, "");
  }

  // Paste handler
  void pasteText(Event e) {
    resultTextarea.select(); // Select all text in result text area.
                             // Note: replaces all text. Use focus
                             // to paste at cursor position.
    document.execCommand('paste', null, "");
  }

  // Register button handlers for copy and paste.
  copy.onClick.listen(copyText);
  paste.onClick.listen(pasteText);

  // You can also register a Paste event listener to capture copied text
  // directly from the clipboard.
  document.on['paste'].listen((e) {
    var item = e.clipboardData.items.item(e.clipboardData.items.length-1);

    if(item.type == 'text/plain') {
      item.getAsString().then((clip) => label.text = clip);
    }
  });
} 
```

几点注意事项：

1.  对 document.execCommand 方法签名的更改并不完全正确。看来，至少在 Dartium 中，最后一个参数需要是一个字符串。
2.  您可以通过注册粘贴事件侦听器直接从剪贴板获取粘贴的文本（参见代码片段的底部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:50:48.863

错误消息不是很具有描述性，但您需要做的是提供`document.execCommand`3 个参数，如下所示：

```
... 
  copy.onClick.listen((event) => document.execCommand('copy', null, null));
  paste.onClick.listen((event) => document.execCommand('paste', null, null));
... 
```

另见：[http ://api.dartlang.org/docs/releases/latest/dart_html/Document.html#execCommand](http://api.dartlang.org/docs/releases/latest/dart_html/Document.html#execCommand)

# php - 数值字段的验证函数

> ID：16096038
> 
> 赞同：0
> 
> 时间：2013-04-19T02:01:59.237
> 
> 标签：php

我正在完成这个网站并进行最后几个验证。如何使名称字段的验证只接受字母而不接受数字。以及如何验证邮政编码字段是否包含 5 位数字。以下是我到目前为止所拥有的。

```
//First Name
function check_fname($fname){
if($fname==''){
    return 'Please Enter your First Name.';
}}

//Zip Code
function check_zip($zip){
if(! is_numeric($zip)){
    return 'Please Enter your Zip.';
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:04:49.080

常用表达：

```
if (preg_match('/^[a-z]+$/i', $fname)) ... // At least one letter

if (preg_match('/^\d{5}$/', $zip)) ... // 5 digits 
```

对于名称，根据您的人口统计，您可能希望允许使用外来字符，我推荐这个更宽容的解决方案：

```
if (strlen($fname) > 0 && ! preg_match('/\d/', $fname)) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:48:49.230

对于任何 Unicode（国际）字母

```
if (preg_match('/^\pL+$/u', $fname)) ... 
```

# objective-c - 与 setTitleTextAttributes 一起使用时导致崩溃的 NSDictionary 文字

> ID：16096041
> 
> 赞同：1
> 
> 时间：2013-04-19T02:02:17.303
> 
> 标签：objective-c, literals

我正在将我的 xcode 项目转换为现代目标 c。在我的 AppDelegate 中，以前，我有以下代码：

```
- (void)customizeAppearance
{
    [[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:barButtonFont, UITextAttributeFont, nil] forState:UIControlStateNormal];
} 
```

接下来，使用 @{keys : value} 创建 NSDictionary 的文字方式，我将其更改为：

```
[[UIBarButtonItem appearance] setTitleTextAttributes:@{UITextAttributeFont: barButtonFont} forState:UIControlStateNormal]; 
```

这一更改使我的系统崩溃。错误输出为：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: 尝试从对象 [0] 插入 nil 对象”

有谁知道为什么以及我能做些什么来解决它？

我可以忽略它，但后来它会咬我，因为我会忘记。我确实想将我的整个项目更改为现代目标 c，并且将来不必记住为什么一个代码不是“现代”的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:31:45.627

问题是`barButtonFont`，`nil`（可能是因为您没有可用的名为*Helvetica CE*的字体）。这个问题只有在你转向文字语法时才会暴露出来，因为“在容器中键和值都不能有值 nil。如果编译器可以在编译时证明键或值是 nil，那么将发出警告。否则，将发生运行时错误。”

这里有更多细节：http: [//clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:47:47.803

要设置属性，您需要为两种状态都设置它。

试试这段代码：

```
 NSDictionary* textAttributes = [NSDictionary dictionaryWithObject: [UIFont fontWithName:@"Helvetica" size:45.0] forKey: UITextAttributeFont];

[[UIBarButtonItem appearance] setTitleTextAttributes: textAttributes
                                            forState: UIControlStateDisabled];

[[UIBarButtonItem appearance] setTitleTextAttributes: textAttributes
                                            forState: UIControlStateNormal]; 
```

在 Appdelegate 中实现

有关更多详细信息，您也可以参考此答案。

[UIBarButtonItem 外观 setTitleTextAttributes 不影响 UIControlStateDisabled 状态](https://stackoverflow.com/questions/11718243/uibarbuttonitem-appearance-settitletextattributes-does-not-affects-uicontrolstat)

# php - PHP 错误：“语法错误，意外的 T_STRING，期待 ')'

> ID：16096042
> 
> 赞同：-6
> 
> 时间：2013-04-19T02:02:27.910
> 
> 标签：php, syntax

在以下代码中：

```
if(OS == "XP"){
    if header('Location: XP.html');
exit();
} 
```

它说错误在第 3 行（这是“if header”行），但我只是没有看到它。这真的是语法错误，还是其他原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:04:29.620

是否`OS`在某处定义了常量？如果没有，试试这个：

尝试这个：

```
if( $OS == "XP" )
{
    header( 'Location: XP.html' );
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:14:37.180

您已发表`if`声明。所以很自然地，PHP 看起来完成了这个声明。因此，为什么您会收到错误说明预期的右括号。

删除您的 if 语句，您的代码应如下所示：

```
if(OS == "XP"){
    header('Location: XP.html');
exit();
} 
```

PHP 错误报告并不是世界上最好的工具。它会提醒您注意崎岖的地方，但由您自己决定应该和不应该在那条线上/附近寻找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:05:00.687

`if`应该总是跟在一个`(`

删除第`if`2 行。我认为没有必要

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T02:07:45.447

我想`if`第二行不应该在那里。

```
if(OS == "XP"){
    header('Location: XP.html');
    exit();
} 
```

# entity-framework - 安装 SQL Server 2012 后是否可以卸载/删除 SQL Server 2008/2008r2？

> ID：16096044
> 
> 赞同：1
> 
> 时间：2013-04-19T02:03:04.710
> 
> 标签：entity-framework, visual-studio-2012, sql-server-express, localdb

我刚刚安装完 SQL Server 2012，我想利用 Localdb。我选择不升级我的 SQL Server 2008 R2 并将 2012 安装为新实例。不幸的是，我后来意识到实体框架在可用时默认为 sqlexpress，即使在 web.config 连接字符串中指定了 Localdb。

我尝试停止 sqlexpress 的服务，但是在尝试从 Visual Studio 运行站点时会引发异常。

关于如何解决这个问题的任何建议？

# java - 创建前缀表示法表达式

> ID：16096045
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:03:17.613
> 
> 标签：java

我正在尝试将表达式更改为前缀表示法。我能够弄清楚后缀表示法，我想知道在创建我的前缀类时是否可以利用我的后缀类的基本模板。我想要一个类似... (6 * ( 24 + 81)) 的表达式并输出：* 6 + 24 81。这是否可能不跟踪级别？...意思是我需要一个当我的循环进入表达式的括号部分时跟踪变量？我只是很难想象结构是如何工作的。

这是我的后缀代码：

```
 static Stack operatorStack = new Stack();
String ConvertToPostfix(String exp) {
    exp = "("+exp+")";
    int i;
    char token;
    String output = "";

    for (i = 0; i < exp.length(); i++) {
        token = exp.charAt(i);
        if (Character.isLetterOrDigit(token) == true)
            output += token;
        else if (token == '(')
            operatorStack.push(token);
        else if (token == ')') {
            char topChar;
            while ((topChar = peekAtTop()) != '(') {
                output += topChar;
                popAtTop();
            }

        operatorStack.pop();
        } 
        else {
            while (priority(token) <= priority(peekAtTop())) {
                output += peekAtTop();
                popAtTop();
            }
            operatorStack.push(token);
        }
}
    return output;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:15:23.707

本质上，[表达式是树结构](http://en.wikipedia.org/wiki/Binary_expression_tree)。

这是一个随机的例子： ![3 * ((7 + 1) / 4 + (17 - 5)](https://i.stack.imgur.com/cyd8e.png)

要更改线性表示（即作为字符串的表达式），您只需更改遍历树的方式。上面链接的维基百科文章包含所有三个示例。

你需要做的是：

*   学习如何[用 Java 表示树](https://stackoverflow.com/questions/3522454/java-tree-data-structure)（总是很方便）；
*   将您的表达式解析成一棵树（相当简单），`StringTokenizer`是您的朋友；
*   将三个遍历过程翻译成Java；
*   调用您的教授要求的任何程序。（顺便说一句，多听教授的话不会有什么坏处。）

希望这可以帮助！

# python - 如何指定 cx_Oracle 存储函数 RECORD 返回类型？

> ID：16096046
> 
> 赞同：2
> 
> 时间：2013-04-19T02:03:28.073
> 
> 标签：python, oracle, cx-oracle, stored-functions

```
 CREATE OR REPLACE my_package as 
       TYPE x_type IS RECORD { a_val number,
                               b_val varchar2(20),
                               c_val boolean }; 
       FUNCTION my_func ( d number )
               RETURN x_type; 
```

* * *

在 cx Oracle 代码中指定 x_type 的正确方法应该是什么？

```
curs.callfunc('my_func', x_type, [1]) 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:00:08.593

我已经尝试了很多，但仍然找不到如何使用类型记录。据我所知，类型记录仅在 pl/sql 中支持，所以是否可以在 sql 中调用它是一个问题。我建议您可以使用游标代替记录。作为您的参考：

```
create or replace function FN_RETURN_CURS(X NUMBER) return SYS_REFCURSOR is
  C SYS_REFCURSOR;
begin
  OPEN C FOR
    SELECT X, 'A', 1 FROM DUAL;
  return(C);
end FN_RETURN_CURS; 
```

在蟒蛇

```
db=cx_Oracle.connect(...)

>>> cursor=db.cursor()
>>> r=cursor.callfunc('fn_return_curs',cx_Oracle.CURSOR,[5])
>>> r.fetchone()
(5, 'A', 1)
>>> 
```

^_^

# angularjs - angular.js 的复杂切换行为

> ID：16096047
> 
> 赞同：0
> 
> 时间：2013-04-19T02:03:29.227
> 
> 标签：angularjs

**情况：**

我使用 angular.js 作为前端（新手），使用 symfony2 (php) 作为后端。我查询用户和组的列表。所以html可能看起来像这样。

```
<ul class="user-list">
    <li ng-repeat="user in users">
        <a ng:click="select(user)">
              {{user.first_name}} {{user.last_name}}
        </a>
    </li>
</ul>

<div class="user-was-selected" ng-show="selectedUser != null">
    <ul class="dropdown-menu">
        <li ng-repeat="group in groups"><a>{{ group.name }}</a></li>
    </ul>
</div> 
```

当从列表中选择用户时，将显示另一个视图，其中显示一个包含组的下拉列表。这是所有可用的组。所以列表查询不依赖于用户。

但是，用户可以是组的成员。所以我需要在 li 元素上设置一个类，比如“in-group”。

在 symfony2 中这很容易，因为它的模板引擎“twig”有类似 user.hasGroup 的方法来检查用户是否在组中。我可以在树枝模板中做到这一点。

**我的问题**是，我是否必须为此进行休息 api 调用？这意味着我必须为每个用户的每个组进行一次休息 api 组检查。这有任何意义吗？或者您是否看到了另一种解决方案？

除此之外，从下拉列表中单击组将从单击的组中删除/添加（切换）用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:21:25.973

你会添加`ng-class`到你的`li`

```
<ul class="user-list">
    <li ng-repeat="user in users">
        <a ng:click="select(user)">
              {{user.first_name}} {{user.last_name}}
        </a>
    </li>
</ul>

<div class="user-was-selected" ng-show="selectedUser != null">
    <ul class="dropdown-menu">
        <li ng-class="{in-group: selectedUser.inGroup}" ng-repeat="group in groups"><a>{{ group.name }}</a></li>
    </ul>
</div> 
```

您可以像这样将该`inGroup`方法添加到您的`User`资源中（假设您有一个工厂）：

```
angular.module('myApp').factory('User', ['$resource', function($resource) {
  var User = $resource(...);

  ...

  User.prototype.inGroup = function(group) {
    //determine if user is in group
    //'this' (selectedUser) and 'group' are at your disposal
    //return true if there's a match
  };

  ...

  return User;
}]); 
```

# php - 如何正确发送 POST 数据？

> ID：16096050
> 
> 赞同：0
> 
> 时间：2013-04-19T02:04:05.153
> 
> 标签：php, javascript, html, ajax

我正在尝试使用 AJAX 来改进我的登录系统以在不刷新页面的情况下运行。我对ajax很陌生。我发现的教程都使用 GET。我不想使用get。这是我的代码：

login.php（我从中删除了 CSS 代码）

```
<html>
<script type="text/javascript" src = "login/loginJS.js"></script>
    <body>
    <center>
        <div class="rounded">
        <form method='POST' action = "processLogin.php">
            Username:<input type="text" class = "input1" name = "username"/><br>
            Password:<input type="password" class = "input1" name = "password"/><br>
            Remember Me?<input type="checkbox" name = "remember"/?><br>
            <?php
            session_start();
            echo'<p id="errorField" class="error"></p>';
            ?>
            <input type="submit" value = "Login" class = "button" onclick='process()'/>
            <b><p>New User? <a href="register.php">Register</a></p></b>
        </form>
        </div>
    </center>
    </body>
</html> 
```

loginJS.js

```
xmlHttp = createXmlHttpRequestObject();

function createXmlHttpRequestObject()
{
    var xmlHttp;

    if (window.ActiveXObject){
        try{
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }catch(e){
        xmlHttp = false;
        }
    }else{
        try{
            xmlHttp = new XMLHttpRequest();
        }catch(e){
            xmlHttp = false;
        }
    }

    if(!xmlHttp){
        alert("The XML Http Request Failed");
    }else{
        return xmlHttp;
    }
}

function process(){
    if (xmlHttp.readyState == 4 || xmlHttp.readyState == 0){
        login = encodeURIComponent(document.getElementById("loginField").value);
        xmlHttp.open("POST", "login/processLogin.php",true);
        xmlHttp.onreadystatechange = handleServerResponse;
        xmlHttp.send();
    }else{
        setTimeout('process()',1000);
    }
}

function handleServerResponse(){
    if(xmlHttp.readyState == 4){
        if(xmlHttp.status == 200){
            xmlResponse = xmlHttp.responseXML;
            xmlDocumentElement = xmlResponse.documentElement;
            message = xmlDocumentElement.firstChild.data;
            document.getElementById("errorField").innerHTML = message;
        }
    }
} 
```

进程登录.php

```
 <?php
    session_start();
    header('Content-Type: text/xml');
    echo '<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>';
    echo "<response>";
        $username = $_POST['username'];
        $password = $_POST['password'];
        if ($username == '' or $password == '')
        {
            echo 'The username/password fields may not be blank.';
        }else{
            echo 'This is a test';
        }
    echo "</response>";
?> 
```

所以我的问题是，我应该怎么做才能把输入文本和密码字段中的变量作为一个 post 变量，然后用 javascript 发送它。我只需要发送用户名和密码字段。要查看网站， [http:](http://rukiryo.bugs3.com) //rukiryo.bugs3.com 网站是这样的。当我使用我的页面刷新方法时，登录按钮有效，但我无法弄清楚使其适用于非刷新的最后步骤。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:33:41.737

那么在上面的代码中，您似乎没有使用 AJAX 请求发送登录参数。此外，您忘记显式设置为 Content-type 标头，这在执行 POST 请求时是必需的。

```
 xmlHttp.open("POST", "login/processLogin.php",true);
    xmlHttp.onreadystatechange = handleServerResponse;
    xmlHttp.send();  // <--This is your problem 
```

您发布没有参数的空白发送

这是添加参数的方法

```
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");  
xmlhttp.send("username=carl&password=XYZ"); 
```

显然，您必须对这些参数进行 url 编码，因此请使用它（这样 +、* 等内容就不会出现在 URL 中并毁了您的生活）

```
var params= "username="+encodeURIComponent("carl")+"&password="+encodeURIComponent("XYZ");
xmlhttp.send(params); 
```

哦，在 PHP 端，你应该运行[urldecode](http://php.net/manual/en/function.urldecode.php)来取回你的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:31:37.380

好的，这是冗长的，简单的 ol' vanilla JavaScript 方法。我将假设您需要对 < IE6 的支持，因此首先要做的是检查浏览器支持哪个 xhr 对象。

```
function createXHR() {
    if (typeof XMLHttpRequest !== "undefined") {
        return new XMLHttpRequest();
    } else {
        var versions = ["MSXML2.XmlHttp.6.0", "MSXML2.XmlHttp.3.0"];

        for (var i = 0, len = versions.length; i < len; i++) {
            try {
                var xhr = new ActiveXObject(versions[i]);
                return xhr;
            } catch (e) {
                // do nothing
            }
        }
    }
    return null;
} 
```

接下来是将 onsubmit 事件处理程序附加到表单。这就是 jQuery 在处理非 DOM 兼容浏览器方面的优势所在。尽量不要冗长，这里有一个简短的方法来说明这一点。

```
var form = document.form[0];

function addEventListener(el, evt, fn) {
    if (typeof addEventListener === "function") {
        el.addEventListener(evt, fn, false);
    } else {
        e.attachEvent("on" + evt, fn);
    }
} 
```

然后添加 onclick 事件处理程序并传入您要在提交时调用的函数：

```
addEventListener(form, 'click', process); 
```

在深入研究流程函数之前，我将创建一个序列化表单字段的函数。这是我使用的一个：

```
function serialize(form) {
var parts = [],
    field = null,
    i,
    len,
    j,
    optLen,
    option,
    optValue;

for (i = 0, len = form.elements.length; i < len, i++) {
    field = form.elements[i];

    switch(field.type) {
        case "select-one":
        case "select-multiple":

            if (field.name.length) {
                for ( j = 0, optLen = field.options.length; j < optLen; j++) {
                    option = field.options[j];
                    if (option.selected) {
                        optValue = "";
                        if (option.hasAttribute) { //DOM compliant browsers
                            optValue = (option.hasAttribute("value") ? 
                                option.value : option.text);
                        } else {
                            optValue = (option.attributes["value"].specified ? 
                                option.value : option.text);
                        }
                        parts.push(encodeURIComponent(field.name) + "=" + encodeURIComponent(optValue));
                    }
                }
            }
            break;

        case undefined: //fieldset 
        case "file":    //file input
        case "submit":  //submit button
        case "reset":   //reset button
        case "button":  //custon button
            break;

        case "radio":    //radio button
        case "checkbox": //checkbox
            if (!field.name) {
                break;
            }
            /* falls through */

        default: 
            //don't include form fields without names
            if (field.name.length) {
                parts.push(encodeURIComponent(field.name) + "=" + encodeURIComponent(field.value));
            }
    }
}
return parts.join("&");
} 
```

现在在 process 函数中，我们可以做这样的事情：

```
process(e) {
    var data = serialize(form);
    handlePostRequest(data, handleResponse); //initiates ajax request and passes in callback function
    e.preventDefault(); //prevents default behavior of loading new page with results;
} 
```

好的..哇。我们快完成了。

这是处理 ajax 调用的函数：

```
function handlePostRequest(data, callback) {
    var xhr = createXHR(),
        data = data;

    xhr.open("POST", "login/processLogin.php");
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
            var status = xhr.status;
            if ((status >= 200 && status < 300)) || status === 304) {
                 callback(xhr.responseXML);
            } else {
              alert("An error occurred");
            }
        }
    };
    xhr.send(data);
} 
```

然后最后一个也是最后一个部分将是回调函数。

```
function handleResponse(response) {
    var xmlResponse = response,
        xmlDocumentElement = xmlResponse.documentElement,
        message = xmlDocumentElement.firstChild.data;

    document.getElementById("errorField").innerHTML = message;
} 
```

它可能看起来势不可挡，但它是大多数发布请求所遵循的模式。老实说，这就是 jQuery 的魅力所在。但是，看看它是如何使用纯 JavaScript 完成的，总是一种很好的教育体验。我确定我可能错过了一些东西，所以如果有任何问题，请告诉我！我要去睡觉！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T02:13:09.487

我建议你使用 jQuery，它的代码更少，更容易这里有一个链接：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T02:14:33.443

我建议您使用 jQuery，而不是手动创建 XmlHttpRequest 对象，因为它设法解决了浏览器之间的一些兼容性问题，并使整个事情变得更简单。

使用 jQuery，您将能够使用以下方式执行请求：

```
$.post({
    url: "http://example.com/....",
    data: {"username": "your_user_here", "password": "your_password_here"},
    success: function(){
        alert('Success!');
    }
}); 
```

无论如何，那里有很多选项，而且这个主题很长，不适合 SO 答案，所以我建议您在这里查看 jQuery Ajax 文档：http: [//api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

特别是这个：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

## 更新

~~这里唯一的问题是 php 通常希望以表单编码格式接收数据，但是这样您的脚本将获得 json 数据..（因此，预计*不能*使用`$_POST`）与其他语言（python、nodejs、.. ） 这不是问题; 我不知道如何用 php 处理这个问题，但我非常有信心有办法做到这一点。当然，您可以回退到发送表单编码的数据，但 JSON 是当今这些事情的事实上的标准。~~

抱歉，我记错了，但是 jQuery 的默认行为是对 POST 数据进行 urlencode，因此在`$_POST`使用上面的代码执行请求时，您可以从 读取值。

# jquery - Jquery waypoints-在页面加载到锚标记时触发

> ID：16096052
> 
> 赞同：1
> 
> 时间：2013-04-19T02:04:08.103
> 
> 标签：jquery, triggers, anchor, jquery-waypoints

我一直在玩[航点](http://imakewebthings.com/jquery-waypoints/)，它对于长滚动页面非常方便。导航元素会随着用户进入页面而做出响应，不同的选项会在标题中突出显示，等等。

问题是似乎没有一种方法可以为那些通过`#anchored`链接在页面中途登陆的人重现体验。我找不到文档来根据滚动位置触发和评估侦听器。

那存在吗？还有另一种方法可以将航点与锚定链接集成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:09:52.433

Waypoints 默认使用锚点跳转。我有一个干扰的 Bootstrap 类冲突。FWIW 我发现我附加的航点在 DOM 中越高，就越容易预测它的行为方式。

# python - Django：ImportError：没有名为 pocdebug_toolbar 的模块

> ID：16096060
> 
> 赞同：1
> 
> 时间：2013-04-19T02:05:09.450
> 
> 标签：python, django, django-debug-toolbar

从 uWSGI 启动 Django 时出现此错误，但不知道出了什么问题：

```
...
File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/trans_real.py", line 160, in _fetch
    app = import_module(appname)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
ImportError: No module named pocdebug_toolbar 
```

蟒蛇2.7.3；Django==1.4.3；Ubuntu 12.04.2 LTS

```
Here is the full traceback:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 221, in handle_uncaught_exception
    return debug.technical_500_response(request, *exc_info)  File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 66, in technical_500_response
    html = reporter.get_traceback_html()  File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 287, in get_traceback_html
    return t.render(c)
  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 140, in render
    return self._render(context)
  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 134, in _render
    return self.nodelist.render(context)
  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)
  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)
  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 84, in render
    output = self.filter_expression.resolve(context)
  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 599, in resolve
    new_obj = func(obj, *arg_vals)
  File "/usr/local/lib/python2.7/dist-packages/django/template/defaultfilters.py", line 718, in date
    return format(value, arg)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/dateformat.py", line 310, in format
    return df.format(format_string)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/dateformat.py", line 33, in format
    pieces.append(force_unicode(getattr(self, piece)()))
  File "/usr/local/lib/python2.7/dist-packages/django/utils/dateformat.py", line 214, in r
    return self.format('D, j M Y H:i:s O')
  File "/usr/local/lib/python2.7/dist-packages/django/utils/dateformat.py", line 33, in format
    pieces.append(force_unicode(getattr(self, piece)()))
  File "/usr/local/lib/python2.7/dist-packages/django/utils/encoding.py", line 71, in force_unicode
    s = unicode(s)  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 121, in __unicode_cast
    return func(*self.__args, **self.__kw)  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/__init__.py", line 86, in ugettext
    return _trans.ugettext(message)  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/trans_real.py", line 278, in ugettext
    return do_translate(message, 'ugettext')  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/trans_real.py", line 268, in do_translate
    _default = translation(settings.LANGUAGE_CODE)  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/trans_real.py", line 183, in translation
    default_translation = _fetch(settings.LANGUAGE_CODE)  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/trans_real.py", line 160, in _fetch
    app = import_module(appname)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
ImportError: No module named pocdebug_toolbar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:52:45.900

解决了。我忘记了`settings.py` `INSTALLED_APPS`元组中我的应用程序之间的逗号，所以它将两个字符串“poc”和“debug_toolbar”连接成“pocdebug_toolbar”。

> ```
> INSTALLED_APPS = (
>    ...
>    'poc'  # <== missing comma here
>    'debug_toolbar'
>    ) 
> ```

# parsing - 扫描令牌时跟踪位置使解析器复杂化

> ID：16096063
> 
> 赞同：10
> 
> 时间：2013-04-19T02:05:13.520
> 
> 标签：parsing, haskell

我正在编写一个两遍解析器，我首先将文本扫描到标记中（使用`Alex`），然后解析这些标记（使用`Parsec`）。在我尝试将位置信息添加到令牌之前，一切都很好，这样我就可以写出一个好的错误消息。

最初我有：

```
data Token = TAtom | TString String | TInt Integer | TFloat [...] 
```

似乎我可以`Position`向每个构造函数添加一个元素，也可以`Token`创建一个新类型，例如`data TokenWithPosition = T Token Position`.

我已经开始走后一条道路，但现在我遇到了一个问题，即`TokenWithPosition`当我想在 Parsec 中描述一个标记时必须创建一个带有假位置的，或者我`TokenWithPosition`每次想要进行比较时都必须打开它。简而言之，我的干净语法被忽略位置信息所需的代码所淹没。

所以我的问题是：有没有一种干净的方法来跟踪位置信息，而不会使第二遍中的解析器复杂化？这似乎有一个标准的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:46:06.977

您需要使用`Text.Parsec.Prim`（例如`tokenPrim`）中的函数来实现您自己的“原始解析器”。

那些原始解析器将使用位置信息更新 Parsec 的内部状态，并返回`Token`没有位置的 pure。

# ruby-on-rails - Rails 复杂的数据库关系

> ID：16096067
> 
> 赞同：0
> 
> 时间：2013-04-19T02:05:52.237
> 
> 标签：ruby-on-rails, ruby, database-design

我正在研究一个由学校、学生和文章组成的项目。当我开始开发我的文章控制器时，我意识到必须有更好的方法来实现我的目标，但我只是没有经验来解决这个问题。基本上我想做的是让我的用户注册到某所学校。然后一旦用户登录，他应该能够看到他学校的所有文章和分类。这是我的设置，任何建议将不胜感激：

学校.rb：

```
class School < ActiveRecord::Base
  has_many :users
  has_many :articles, :through => :users
  attr_accessible :name
end 
```

用户.rb：

```
class User < ActiveRecord::Base
  belongs_to :school
  has_many :articles
  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation, :remember_me, :provider, :uid, :school_id
end 
```

类别.rb：

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :articles
  accepts_nested_attributes_for :articles
end 
```

文章.rb：

```
class Article < ActiveRecord::Base
  attr_accessible :body
  belongs_to :category
  belongs_to :user
end 
```

这似乎是一个很好的设置来实现我的目标？先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:20:46.047

`accepts_nested_attributes_for :articles`感觉像是一个错误。除此之外，假设用户正在创建文章，这对我来说看起来不错。

我认为用户的文章需要考虑几个问题。如果用户...

*   删除他/她的帐户
*   转学
*   完全毕业学校

也许出于这些原因，学校应该直接发布文章，而不是通过用户。但取决于您希望它如何工作。

* * *

您可能还想重新考虑与类别和文章的一对多关系。通常更容易使用在作品和类别之间具有多对多关系的标签系统。

想象一下，如果这篇文章是关于风力发电用于货运的回归。它可能属于国际商务和技术类别。

* * *

为您希望类如何工作编写一些测试，并让它指导您的设计细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:42:50.440

虽然一切看起来都不错，但我建议将文章直接链接到学校和用户。所以你最终会得到类似的东西：

```
# school.rb
has_many :users
has_many :articles

# user.rb:
belongs_to :school
has_many :articles

# category.rb:
has_many :articles

# article.rb:
belongs_to :category
belongs_to :user
belongs_to :school 
```

从建模的角度来看，将文章直接链接到学校更有意义。目前，您的结构表明一篇文章属于其用户当前所属的学校；虽然这通常可行，但从长远来看，这是一个额外的脆弱点，您最终可能会为此付出代价。

鉴于听起来主要活动之一是让用户浏览他们学校的文章，这也会使您的应用程序加载这些文章的过程变得复杂。使用您当前的结构，它将采取以下步骤：

1.  查找当前用户的学校。
2.  找到属于该学校的每个用户。
3.  查找每个用户撰写的每篇文章。

将文章直接链接到学校将省去第二步，这将使您的性能免费提高，尤其是在您获得大量用户和文章的情况下。

# twig - 使用替换时可以忽略大小写吗？

> ID：16096073
> 
> 赞同：0
> 
> 时间：2013-04-19T02:06:22.070
> 
> 标签：twig

很不言自明。例如，我希望两者都`test`被`Test`替换：

```
{{ var|replace({"test": 'replaced'}, ignore) }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:15:23.150

`replace`过滤器被[定义为 的包装器`strtr`](https://github.com/fabpot/Twig/blob/master/lib/Twig/Extension/Core.php#L132)，因此没有内置的方法可以做到这一点。

[延长树枝](http://twig.sensiolabs.org/doc/advanced.html)很容易！只需创建一个名为`ireplace`（或您认为合适的其他名称）的新过滤器，该过滤器在后台使用 str_ireplace。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:43:05.970

我认为这个功能是用来替换关键字的，而不是做搜索和替换

# c - 有没有更好的方法在 gcc 中生成 guid

> ID：16096078
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:06:50.817
> 
> 标签：c, linux, gcc, libc, bsd

我需要在 C 中生成 guid，如何在 libc中生成 guid（ [http://en.wikipedia.org/wiki/Globally_unique_identifier ）。](http://en.wikipedia.org/wiki/Globally_unique_identifier)我需要随机生成 guid。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:21:24.887

续：参考： http: [//linux.die.net/man/3/uuid_generate](http://linux.die.net/man/3/uuid_generate)

uuid_generate_time_safe - 创建一个新的唯一 UUID 值

```
#include <uuid/uuid.h>
void uuid_generate(uuid_t out);void uuid_generate_random(uuid_t out);void
uuid_generate_time(uuid_t out);int uuid_generate_time_safe(uuid_t out);
Description 
```

uuid_generate 函数创建一个新的通用唯一标识符 (UUID)。uuid 将基于来自 /dev/urandom（如果可用）的高质量随机性生成。如果不可用，则 uuid_generate 将使用替代算法，该算法使用当前时间、本地以太网 MAC 地址（如果可用）和使用伪随机生成器生成的随机数据。uuid_generate_random 函数强制使用全随机 UUID 格式，即使高质量的随机数生成器（即 /dev/urandom）不可用，在这种情况下将替换一个伪随机生成器。请注意，使用伪随机生成器可能会损害以这种方式生成的 UUID 的唯一性。

# android - 获取移动连接的经过时间

> ID：16096083
> 
> 赞同：0
> 
> 时间：2013-04-19T02:07:30.913
> 
> 标签：android, telephony

如何以编程方式获取自激活移动数据连接以来经过的时间？

我试图做这样的事情：

```
 phone = PhoneFactory.getDefaultPhone();
    List<DataConnection> dcs = phone.getCurrentDataConnectionList();

    for (DataConnection dc : dcs) {
        if (dc.isActive()) {
            timeElapsed = (System.currentTimeMillis() - dc.getConnectionTime())/1000;
        }
    } 
```

但是这些方法在 SDK 中是不可见的，所以我尝试了反射：

```
 try {
        Class mPhoneFactory = Class.forName("com.android.internal.telephony.PhoneFactory");
        Method mMakeDefaultPhone = mPhoneFactory.getMethod("makeDefaultPhone", new Class[] {Context.class});
        mMakeDefaultPhone.invoke(null, this);   

        Method mGetDefaultPhone = mPhoneFactory.getMethod("getDefaultPhone", null);
        Object mPhone = mGetDefaultPhone.invoke(null);

        Method mGetCurrentDataConnectionList = 
            mPhone.getClass().getMethod("getCurrentDataConnectionList", null);
        List<Object> dcs = (List)mGetCurrentDataConnectionList.invoke(mPhone, null);

        Method mGetConnectionTime = 
            dcs.get(0).getClass().getMethod("getConnectionTime", null);
        long getConnectionTime = (Long)mGetConnectionTime.invoke(dcs.get(0), null);         

    } catch(Exception e) {
        e.printStackTrace();
    } 
```

列表“dcs”包含应该存在的 GSMDataConnection，但信息不正确，它总是说 GSM 连接处于非活动状态，这不是真的。

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:23:23.693

将 Java 时钟接口与[Connectivity Manager](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)一起使用，并减去连接的开始时间和结束时间之间的差。

# asp.net - 使用 ContentPlaceHolder 停止滚动到母版页的顶部？

> ID：16096086
> 
> 赞同：1
> 
> 时间：2013-04-19T02:07:51.667
> 
> 标签：asp.net, scroll, master

我已经为此拉头发2天了，但没有成功。

正如您在主题中所读到的，当用户单击我的 GridView 中的链接时，我只是试图阻止网页滚动到页面顶部。但是 GridView 位于母版页上设置的 ContentPlaceHolder 内。

我已经通过谷歌查看了所有可能的解决方案，甚至是一个新的程序集，旨在在运行时构建 jscript 代码，但都失败了。

这是我的母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Attendance.master.cs" Inherits="Attendance_Attendance" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Attendance</title>
    <style type="text/css">
    .timetablecell {
        cursor: pointer;
    }
    .timetablecell:hover {
        background-color: Orange;
    }
    .smalltext {
        font-size: 8pt;
    }
    .classsize {
        font-size: 8pt; display: block;
    }
    .nowrap {
        white-space: nowrap;
    }
    img {
        border: 0;
    }
    </style>
    <asp:ContentPlaceHolder ID="ContentPlaceHolderHead" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
     <form id="form1" runat="server">
        <asp:ScriptManager ID="SMan" runat="server" EnablePageMethods="True">
        </asp:ScriptManager>
        <asp:Panel ID="HeaderPanel" runat="server">
        <table width="100%">
            <tr valign="middle">
                <td style="width: 25%; " valign="middle" align="left" >
                    <img src="../images/blahblah.jpg" alt="Tec-NQ" />
                </td>
                <td valign="middle" align="center" style="width: 50%">
                <asp:Image ID="Image3" runat="server" ImageUrl="~/images/blahblah2.jpg" /><br />
                <asp:Label ID="Label1" runat="server" Font-Bold="True" Font-Names="Times New Roman"
                        Font-Size="1.2em">BLAHBLAHBLAH</asp:Label>
                </td>
                <td style="width:25%" align="right">
                    <img src="../images/BLAHBLAH3.jpg" alt="BLAHBLAH" />
                </td>
            </tr>
        </table>
        </asp:Panel>
        <table width="100%">
            <tr>
                <td valign="top" style="width:15%">
                    <asp:Panel ID="MenuPanel" runat="server">
                    <table>
                      <tr>
                        <td>
                          <h5 style="white-space:nowrap;">Attendance Menu</h5>
                        </td>
                      </tr>
                      <tr>
                        <td>
                                <asp:Menu ID="Attendance" ItemWrap="true" Font-Size="10pt" StaticMenuStyle-VerticalPadding="4"
                                    runat="server" StaticMenuItemStyle-VerticalPadding="1">
                                    <Items>
                                        <asp:MenuItem NavigateUrl="~/Attendance/ClassAttendance.aspx" Text="Class Attendance"
                                            Value="Class Attendance"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/Classes.aspx" Text="Classes"
                                            Value="Classes"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/Timetable.aspx" Text="Timetable"
                                            Value="Timetable"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/Roster.aspx" Text="Roster"
                                            Value="Roster"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/ApprovedAbsences.aspx" Text="Approved Absences"
                                            Value="Approved Absences"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Main Menu" Value="Main Menu"></asp:MenuItem>
                                    </Items>
                                    <StaticMenuStyle VerticalPadding="4px" />
                                </asp:Menu>
                                <asp:Menu ID="AttendanceReports" ItemWrap="true" Font-Size="10pt" StaticMenuStyle-VerticalPadding="4"
                                    runat="server" StaticMenuItemStyle-VerticalPadding="1">
                                    <Items>
                                        <asp:MenuItem Text="<h5 style='margin-top:10px;margin-bottom:10px'>Reports</h5>" Selectable="false"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/ClassRoles.aspx" Text="Class Logins"
                                            Value="Class Logins"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/StudentsHereToday.aspx" Text="Students Here Today"
                                            Value="Students Here Today"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/StudentAbsences.aspx" Text="Student Absences"
                                            Value="Student Absences"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/StudentKPI.aspx" Text="Student KPI"
                                            Value="Student KPI"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/AttendanceDetailed.aspx" Text="Attendance Detailed"
                                            Value="Attendance Detailed"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/StudentAttendance.aspx" Text="Attendance Summary"
                                            Value="Attendance Summary"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/AttendanceNotMarked.aspx" Text="Attendance Not Marked"
                                            Value="Attendance Not Marked"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/AttendanceFullTime.aspx" Text="Attendance Full Time"
                                            Value="Attendance Full Time"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/rptsAttendance/default.aspx" Text="Old Attendance Reports"
                                            Value="Old Attendance Reports"></asp:MenuItem>
                                        <asp:MenuItem NavigateUrl="~/Attendance/StaffTimetable.aspx" Text="Staff Timetable"
                                            Value="Staff Timetable"></asp:MenuItem>
                                    </Items>
                                    <StaticMenuStyle VerticalPadding="4px" />
                                </asp:Menu>
                        </td>
                      </tr>
                      <tr>
                        <td>
                            <asp:ImageButton ID="HelpImageButton" runat="server" ImageUrl="/images/helpsm.jpg" AlternateText="HELP" CausesValidation="false" OnClick="Help_Click" />
                            <!--a href="/Help/Attendance/ClassAttendance.aspx" target="_blank"><img src="/images/helpsm.jpg" alt="HELP" border="0"/></a-->
                        </td>
                      </tr>
                    </table>
                    </asp:Panel>
                </td>
                <td valign="top">
                    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                    </asp:ContentPlaceHolder>
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

这是我的 GridView 的上述页面之一......

```
 <%@ Page Language="C#" MasterPageFile="~/Attendance/Attendance.master"
    AutoEventWireup="true" CodeFile="ClassAttendance.aspx.cs"
    Inherits="Attendance_ClassAttendance" 
    Title="Class Attendance" Culture="en-AU"%>

    <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

...
...
...

    <asp:GridView ID="gvStudents" runat="server" AutoGenerateColumns="false" AllowSorting="true" CellPadding="2" ShowFooter="true" DataKeyNames="AttendanceID" 
        OnRowDataBound="GridView_RowDataBound" OnDataBound="GridView_DataBound" EnableSortingAndPagingCallbacks="False">
...
...
    </asp:GridView>
</asp:Content>

...
... 
```

如上所述，我尝试了几种解决方案...

[如何使用母版页保持滚动位置？](https://stackoverflow.com/questions/992887/how-to-persist-scroll-position-using-master-page) [ASP 页面在 UpdatePanel 更新上滚动到顶部](https://stackoverflow.com/questions/11161652/asp-page-scrolls-to-top-on-updatepanel-update) [http://www.dotnetspark.com/links/41291-how-to-prevent-master-page-postback-when.aspx](http://www.dotnetspark.com/links/41291-how-to-prevent-master-page-postback-when.aspx) [http://www.4guysfromrolla.com/articles/111704 -1.aspx](http://www.4guysfromrolla.com/articles/111704-1.aspx)

最后一个链接看起来最有希望，但我认为它是为具有简单形式的非母版页网站编写的。

我还尝试了通常的解决方案来放置 SmartNavigation 标签和......

`Page.MaintainScrollPositionOnPostBack = true;`

以上都没有奏效。

我怀疑这是因为我使用的是 ContentPlaceHolder？也许我应该`<div></div>`在它周围放置一个？我试过了，但也没有工作。

谢谢你的支持。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:55:20.207

您可以尝试在内容占位符内添加 div 标签，然后设置属性 overflow=scroll。它可能会起作用。

```
 <div style:"overflow=scroll">
 <!--Your code-->
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T05:12:36.623

删除`href="#"`并使用精美的 CSS*欺骗*ASP.net 页面，使其看起来像一个*蓝色链接*，鼠标也在变化。有用。

# windows-phone-8 - 是否可以启动主题设置或省电模式设置页面？

> ID：16096087
> 
> 赞同：0
> 
> 时间：2013-04-19T02:08:01.947
> 
> 标签：windows-phone-8

正如主题所说，有没有办法在我的应用程序中启动主题设置页面或省电模式设置？我在 MSDN 中找不到这些用于启动内置应用程序的 URI 方案。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937(v=vs.105).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:20:15.787

不幸的是没有。

这些设置页面没有 URI 方案。您提供的链接列出了所有可用的链接。

# visual-studio-2012 - 使用 Visual Studio 2012 Express for Web 将 LESS 文件保存为 CSS

> ID：16096092
> 
> 赞同：8
> 
> 时间：2013-04-19T02:08:29.420
> 
> 标签：visual-studio-2012, less

微软最近发布了[Web Tools 2012.2](http://www.asp.net/vnext/overview/latest/aspnet-and-web-tools-20122-release-notes-rtw)。发行说明声明它支持

> LESS 编辑和编译器支持使用 LESS 构建动态 CSS。

但是当我保存 LESS 文件时，它不会像使用[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)那样输出相应的 CSS 文件。我如何让它做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T21:13:08.977

问题是 Visual Studio 的免费版本不支持 LESS 处理器。但是 Web Matrix 中有一个很好的免费 LESS 处理器（也是免费的）。不是一个很好的解决方案，但它有效。

# ssh - 使用 awk 解析 ssh 命令的输出

> ID：16096093
> 
> 赞同：1
> 
> 时间：2013-04-19T02:08:39.683
> 
> 标签：ssh, awk, grep, cut, gerrit

我有一个`ssh`提供以下输出的命令，我希望`ssh`修改命令，以便如果有，则并排输出`url`，第二个更改没有..我有下面的预期输出..可以这样做使用or或?`jirano``jirano``jirano``awk``grep``cut`

```
ssh -p 29418 review-android.company.com gerrit query --current-patch-set \
  --commit-message 'platform/vendor/qcom-opensource/data/code branch:bj_5.2 label:Verified=-1' 
```

输出

```
更改 I739c56305aed3da40132253cf66bce4d315f73
  项目：平台/供应商/qcom-opensource/data/code
  分支：bj_5.2
  编号：I739c56305aed3da40132253cf66bce4d315f73
  网址：https://review-android.company.com/12345
  commitMessage：数据：测试

         这是一个实验
         司机。由于此文件中的任何定义实际上都不是
         今天使用，删除文件和所有对它的引用。

         吉良野：470101
  创建于：2013-04-18 13:17:05 PDT
  最后更新时间：2013-04-18 17:21:54 PDT
 更改 I739c56305aed3da401a5323cf66bce4d315f73
  项目：平台/供应商/qcom-opensource/data/code
  分支：bj_5.2
  编号：I739c56305aed3da401a532253cf66bce4d315f73
  网址：https://review-android.company.com/67899
  提交消息：test1

         这是一个测试
         不要实验
         今天使用，

  创建于：2013-04-18 13:17:05 PDT
  最后更新时间：2013-04-18 17:21:54 PDT

```

预期产出

```
https://review-android.company.com/12345 470101
https://review-android.company.com/67899

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:39:08.550

```
$ awk '/url|jirano/{print $2}' foo.txt | sed 'N; y/\n/ /' 
```

结果

```
https://review-android.company.com/12345 470101
https://review-android.company.com/67899 
```

# javascript - 使用 Facebook Javascript API 发送消息

> ID：16096101
> 
> 赞同：5
> 
> 时间：2013-04-19T02:09:36.503
> 
> 标签：javascript, facebook

我已经在我的页面 html 中包含了这个：

```
<div id="fb-root"></div>
<script type="text/javascript" language="javascript">
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

而且`facebook-like box`我的页面中已经有了，但是我现在需要做一种使用 Facebook Javascript API 将消息发送到电子邮件的方法。这种配置是否足以调用“发送消息”？

我有一个自定义 HTML 表单，当我单击发送时，我喜欢它代表我的 Facebook 页面发送消息。我在 Facebook 上有我的页面。

*   我需要在没有任何服务器端组件的情况下发送消息（纯 Javascript）
*   我有一个现有的 Facebook 页面（我将使用它来发送消息）
*   我有一个自定义表单，用于输入消息。
*   该消息将发送到某个特定的电子邮件地址
*   我可以使用 Facebook 发送到任何电子邮件，所以我认为这会起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:49:25.340

我将分别回答您的问题：

*   我需要在没有任何服务器端组件的情况下发送消息（纯 Javascript）

**如果它可以是给 facebook 用户的简单消息，您必须使用 FB.ui 发送对话框：[https](https://developers.facebook.com/docs/reference/dialogs/send/) ://developers.facebook.com/docs/reference/dialogs/send/ 这几乎是唯一的方法你，你可以尝试在弹出窗口中输入一个电子邮件地址。根据文档，它应该可以工作。**

*   我有一个自定义表单，用于输入消息。

**这就是发送对话框不再起作用的地方。您无法预填充 message 参数，您想要的只有 Facebook 的 PHP SDK 才能实现。但话又说回来：如果 Facebook 已经在该对话框中提供了所有内容，为什么还要自己编写文本字段？**

如果没有那个对话框，没有像 PHP 这样的服务器端语言，就无法在后台发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:56:08.650

使用这个：这里是[Facebook 发送消息的来源](https://developers.facebook.com/docs/reference/dialogs/send/)

```
<html xmlns:fb="https://www.facebook.com/2008/fbml">
  <body>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <div id="fb-root"></div>
    <script>
      // assume we are already logged in
      FB.init({appId: '123050457758183', xfbml: true, cookie: true});

      FB.ui({
          method: 'send',
          name: 'People Argue Just to Win',
          link: 'http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html',
          });
     </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T20:26:34.447

Adding to the above answers. You might want to make a function.

```
<div class="facebook-invite">
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <div id="fb-root">
        <a href="#" onclick="FBInvite()">Invite Facebook Friends</a>
    </div>
    <script>

      FB.init({appId: 'XXXXXXXX', xfbml: true, cookie: true});
        function FBInvite(){

      FB.ui({
          method: 'send',
          name: 'Join This website it is cool',
          link: 'rishabhjainiitbhu.ac.in',
          });
         }
     </script>
</div> 
```

This will make a link, clickin on which the dialog box will pop up.

# grails - 在 Grails 中，如何应用来自 3rd 方数据源的 inList 约束？

> ID：16096107
> 
> 赞同：0
> 
> 时间：2013-04-19T02:10:51.117
> 
> 标签：grails

假设我有以下模型：

```
class Product {
    String name
    String price
    String currency

    static constraints = {
        currency inList: ['USD', 'EUR']
} 
```

现在我们有一个新要求，必须从服务中提取`inList`约束：`currency`

```
class CurrencyService {
    def getAvailableCurrencies = {
        ...
    }
} 
```

我该如何进行这项工作？我试过了：

```
class Product {
    def currencyService
    ...

    static constraints = {
        currency inList: currencyService.getAvailableCurrencies()
    }
} 
```

但我无法在上下文中访问`currencyService`实例。`static constraints`我也尝试过使用`static currencyService`，但这同样不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:26:35.820

正如上面提到的 dmahapatro，您可以使用使用您的服务的[自定义验证器：](http://grails.org/doc/2.2.1/ref/Constraints/validator.html)

```
static constraints = {
    currency validator: { value, obj ->
        if (!(value in obj.currencyService.getAvailableCurrencies())) 
            return ['invalid.currency']
    }
} 
```

# c++ - 将 ifstream 作为参数传递给类构造函数

> ID：16096109
> 
> 赞同：0
> 
> 时间：2013-04-19T02:11:08.160
> 
> 标签：c++, ifstream

我试图通过：ifstream infile;

在我的main()中，给了一个名为“FIFO”的类的构造函数：FIFO(infile)；

在 FIFO (FIFO.h) 的头文件中，我有：

```
FIFO (std::ifstream);
std::ifstream infile; 
```

在 FIFO.cc 中，我有：

```
FIFO::FIFO (std::ifstream & INFILE)
{
         infile = INFILE;
} 
```

我一直喜欢（还有更多，我只是粘贴其中一个）：

在 /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/localefwd.h:43 包含的文件中，来自/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/string:45，来自FIFO.cc:7：/usr /lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/ios_base.h：在成员函数'std::basic_ios > & std::basic_ios >::operator=(const std::basic_ios >&)': /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../ include/c++/4.4.7/bits/ios_base.h:793: 错误: 'std::ios_base& std::ios_base::operator=(const std::ios_base&)' 是私有的 /usr/lib/gcc/x86_64- redhat-linux/4.4.7/../../../../include/c++/4.4.7/iosfwd:47：错误：在此上下文中

我不确定是否使用参考作品传递 ifstream，或者这是我的代码问题。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T02:12:30.493

在您的构造函数声明中，您使用的`std::ifstream`是值而不是引用。代替

```
FIFO (std::ifstream); 
```

它应该是

```
FIFO (std::ifstream&); 
```

并且您正在按值而不是按引用存储成员变量“infile”。

```
std::ifstream infile; 
```

应该

```
std::ifstream& infile; 
```

由于您现在正在存储对 ifstream 的引用，因此您需要在*初始化程序列表*中对其进行初始化，而不是在构造函数中对其进行分配。

```
FIFO::FIFO (std::ifstream & INFILE)
    : infile(INFILE)
{
} 
```

这是因为 的复制构造函数`std::ifstream`是私有的（或在 C++11 中被删除）。通过按值存储成员变量，您试图复制`std::ifstream`传递给构造函数的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:14:00.957

您的原型声明和实现的签名不匹配。改变

```
FIFO (std::ifstream); 
```

至

```
FIFO (std::ifstream &); 
```

# webdav - 在 Windows 资源管理器中打开 WebDav 文件夹在后续尝试中失败

> ID：16096110
> 
> 赞同：1
> 
> 时间：2013-04-19T02:11:08.337
> 
> 标签：webdav, ithit-webdav-server

我有一个使用 ITHit WebDav.Net 类构建的 WebDav 服务器。

我在发布模式下使用 IIS 7（不是内置的开发 Web 服务器）在 VS 2010 中运行该项目。

当项目启动时，它会启动 IE，并显示一个包含“使用 Windows 资源管理器浏览”按钮的页面。JavaScript 代码使用这个跨度：

```
<span id="oViewFolder" style="behavior:url(#default#httpFolder)"></span> 
```

通过调用 oViewFolder.navigate(webDavFolderUrl) 打开 Windows 资源管理器，其中 webDavFolderUrl 是：

```
http://localhost:80/WebDavApp/ 
```

我已经使用 Windows Explorer Map Network Drive -> Connect to a Web site that you can use ... 等来映射 webdav 文件夹。

我遇到的问题是该按钮在开始时工作正常，它会启动一个 Windows 资源管理器窗口，但是，如果我离开该 IE 页面并转到另一个应用程序，当我移回 IE 页面时，该按钮将停止工作，即它不再打开 Windows 资源管理器（我之前关闭了它），并且显示了一条自定义错误消息（该消息没有用，因为导航函数返回 FAILED 而不是 OK）。如果我重新启动 WebDav 服务器，它会再次工作，但并非总是如此，有时我必须重新启动 IIS 才能使按钮再次工作。WebDav 服务器虽然工作。

有没有人经历过这种行为？有什么办法摆脱它吗？

我正在使用 Windows 7 64 位、带有所有最新更新的 SP1 和 IE 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:42:01.957

我为这个问题创建了一个错误。

您可以使用下一个解决方法：

```
Type in Windows Explorer
\\localhost@80\davwwwroot\WebDavApp\ 
```

如果使用默认端口 80，则“@port”段是可选的。

如果您的服务器地址不变，您可以创建快捷方式。

# winapi - ConvertStringSecurityDescriptorToSecurityDescriptor() 仅在 Windows 2000 上返回 ERROR_INVALID_SID

> ID：16096117
> 
> 赞同：0
> 
> 时间：2013-04-19T02:11:50.760
> 
> 标签：winapi, advapi32

我遇到了一个问题，我们的代码调用 ConvertStringSecurityDescriptorToSecurityDescriptor() [http://msdn.microsoft.com/en-us/library/windows/desktop/aa376401%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376401%28v=vs.85%29.aspx)，（奇怪的是 MSDN 说它仅从 Windows XP 开始可用，但我发现的所有其他内容都说它是在 Windows 2000 中引入的），返回 ERROR_INVALID_SID

其中#define ERROR_INVALID_SID 1337L

仅在 Windows 2000 上。无论操作系统如何，我们都使用相同的 SecurityDescriptorString，所以我不确定为什么它在 XP、Windows 7 等上运行良好。这个让我很难过。

# iphone - 由于 CLErrorDomain.h 中的错误，构建失败

> ID：16096121
> 
> 赞同：0
> 
> 时间：2013-04-19T02:12:36.000
> 
> 标签：iphone, ios, xcode, mkmapview

我已经能够在 XCode 中毫无问题地构建我的 iOS 应用程序，直到突然发生这种情况。在构建时，我在 CLErrorDomain.h- 中收到 2 个错误

```
Redefinition of 'NSString' as different kind of symbol
Expected ';' after top level declarator 
```

CLErrorDomain.h 是框架的一部分，我无法编辑或更改它。这是重新定义 NSString 的代码行-

```
extern NSString *const kCLErrorDomain; 
```

我重新启动了 XCode，清理了我的项目，但无论我是为模拟器还是设备构建，它仍然在构建时给我同样的错误。

我应该寻找什么信息来弄清楚如何解决这个问题？

**更新**

我重置为旧的提交，并一直在重建我所做的。在我添加此代码之前一直很好。这里是什么让 CLErrorDomain 给出错误？

```
mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0,0,self.view.frame.size.width,200)];
mapView.delegate = self;
[mapView showsUserLocation];
HotspotAnnotation *annotation = [[HotspotAnnotation alloc] initWitHotspot:_hotspot];
[mapView addAnnotation:annotation];

CLLocationCoordinate2D zoomLocation = _hotspot.coordinates.coordinate;
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 20000, 20000);
[mapView setRegion:viewRegion]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:54:27.013

我想通了-定义枚举后我忘记了分号。

如果这出现在其他人身上，请先查看代码以确保它是有效的。

# java - 在小程序上显示旋转的风扇

> ID：16096125
> 
> 赞同：2
> 
> 时间：2013-04-19T02:12:49.917
> 
> 标签：java, multithreading, swing, animation, paintcomponent

作为我的编程任务的一部分，我必须在小程序中显示一个旋转的风扇。

这是我的代码（显示风扇的类）：

```
import javax.swing.*;
import java.awt.*;

public class Fan extends JPanel
{
    private int angle1 = -15;
    private int angle2 = 75;
    private int angle3 = 165;
    private int angle4 = 255;

    public Fan()
    {
        this.setSize(600, 400);
        Runnable spinner = new SpinFan();

        Thread thread1 = new Thread(spinner);
        thread1.start();
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        g.drawOval(200, 150, 150, 150);
        g.fillArc(210, 160, 130, 130, angle1, 30);
        g.fillArc(210, 160, 130, 130, angle2, 30);
        g.fillArc(210, 160, 130, 130, angle3, 30);
        g.fillArc(210, 160, 130, 130, angle4, 30);
    }
}

class SpinFan implements Runnable
{
    @Override
    public void run() 
    {
        try
        {
            while(true)
            {
                angle1 = (angle1 + 1) % 360;
                angle2 = (angle2 + 1) % 360;
                angle3 = (angle3 + 1) % 360;
                angle4 = (angle4 + 1) % 360;

                System.out.println(angle1 + " " + angle2 + " " + angle3 + " " + angle4);

                repaint();

                Thread.sleep(10);
            }
        }
        catch(InterruptedException ex)
        {
            System.out.println("Problem while putting thread to sleep.");
        }
    }
} 
```

进一步处理的类（现在只有 Fan 的实例）：

```
import java.awt.*;
import javax.swing.*;

public class FanControl extends JPanel
{
    public FanControl()
    {
        add(new Fan());
    }
} 
```

最后，这是 Applet 类：

```
import java.awt.*;
import javax.swing.*;

public class FanApplet extends JApplet
{   
    public FanApplet()
    {
        add(new FanControl());
    }
} 
```

现在我一直在尝试各种各样的东西，所以请不要介意额外注释掉的代码。`Fan.jav`a 类工作正常（如果我将它作为应用程序运行，将它放在框架中，我可以看到风扇在旋转）。但我就是无法让风扇在 Applet 中旋转。但是，如果我从 Fan.java 类向 Applet添加类似**JButton的东西，它就可以工作。**

我错过了什么？`paintComponent()`使用线程和小程序或我似乎不知道的小程序时是否有一些并发症。

当我将代码作为应用程序运行时，它工作正常。我可以看到旋转的风扇。这是代码：

```
import javax.swing.*;
import java.awt.*;

public class Fan extends JPanel
{
private int angle1 = -15;
private int angle2 = 75;
private int angle3 = 165;
private int angle4 = 255;

public Fan()
{
    Runnable spinner = new SpinFan();

    Thread thread1 = new Thread(spinner);
    thread1.start();
}

public static void main(String[] args)
{   
    JFrame frame = new JFrame();
    frame.add(new Fan());
    frame.setSize(600, 400);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}

@Override
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);

    g.drawOval(200, 150, 150, 150);
    g.fillArc(210, 160, 130, 130, angle1, 30);
    g.fillArc(210, 160, 130, 130, angle2, 30);
    g.fillArc(210, 160, 130, 130, angle3, 30);
    g.fillArc(210, 160, 130, 130, angle4, 30);

}

class SpinFan implements Runnable
{
    @Override
    public void run() 
    {
        try
        {
            while(true)
            {
                angle1 = (angle1 - 1) % 360;
                angle2 = (angle2 - 1) % 360;
                angle3 = (angle3 - 1) % 360;
                angle4 = (angle4 - 1) % 360;

                System.out.println(angle1 + " " + angle2 + " " + angle3 + " " + angle4);

                repaint();

                Thread.sleep(10);
            }
        }

        catch(InterruptedException ex)
        {
            System.out.println("Problem while putting thread to sleep.");
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:01:21.820

```
while(true) .. repaint(); .. Thread.sleep(10); 
```

这是完全错误的动画方式。

不要阻塞 EDT（事件调度线程）——当这种情况发生时，GUI 将“冻结”。而不是调用实现重复任务`Thread.sleep(n)`的 Swing或长时间运行的任务。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)[`Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)`SwingWorker`

以下源代码使用`Thread`定义的代码，但将 GUI 更新放回 EDT。

但这里真正的问题是动画组件被添加到大小为 0x0 的小程序中。通过将父容器的布局更改为`BorderLayout`，我们可以拉伸它以适应可用空间。

例如

```
import java.awt.*;
import javax.swing.*;

public class FanApplet extends JApplet
{
    private int angle1 = -15;
    private int angle2 = 75;
    private int angle3 = 165;
    private int angle4 = 255;

    public FanApplet()
    {
        add(new FanControl());
    }

    class FanControl extends JPanel
    {
        public FanControl()
        {
            // by setting a BorderLayout and adding a component to the CENTER
            // (default if no constraint specified) the child component will
            // be stretched to fill the available space.
            setLayout(new BorderLayout());
            add(new Fan());
        }
    }

    class Fan extends JPanel
    {
        public Fan()
        {
            //this.setSize(600, 400);
            Runnable spinner = new SpinFan();

            Thread thread1 = new Thread(spinner);
            thread1.start();
        }

        @Override
        protected void paintComponent(Graphics g)
        {
            super.paintComponent(g);

            g.drawOval(200, 150, 150, 150);
            g.fillArc(210, 160, 130, 130, angle1, 30);
            g.fillArc(210, 160, 130, 130, angle2, 30);
            g.fillArc(210, 160, 130, 130, angle3, 30);
            g.fillArc(210, 160, 130, 130, angle4, 30);
        }
    }

    class SpinFan implements Runnable
    {
        @Override
        public void run()
        {
            try
            {
                while(true)
                {
                    angle1 = (angle1 + 1) % 360;
                    angle2 = (angle2 + 1) % 360;
                    angle3 = (angle3 + 1) % 360;
                    angle4 = (angle4 + 1) % 360;

                    System.out.println(angle1 + " " + angle2 + " " + angle3 + " " + angle4);

                    // This ensures that repaint() is called on the EDT.
                    Runnable r = new Runnable() {
                        public void run() {
                            repaint();
                        }
                    };
                    SwingUtilities.invokeLater(r);

                    Thread.sleep(10);
                }
            }
            catch(InterruptedException ex)
            {
                System.out.println("Problem while putting thread to sleep.");
            }
        }
    }
} 
```

# regex - Perl Regex：如何完全匹配一个字符

> ID：16096127
> 
> 赞同：0
> 
> 时间：2013-04-19T02:12:59.370
> 
> 标签：regex, perl

总的来说，我是正则表达式的新手，在准备秋季学期的 Perl 课程时，我想早点弄湿自己的脚。我仍然围绕着它们，做一些非常基本的事情来了解匹配和替换是如何工作的。所以我写了一个简单的脚本来检查员工的身份证号码是否有效。我提出的简单要求是：

1.  必须从 9 开始
2.  整数中只能有一个零

如果条件超过一个零，我终生无法弄清楚如何使条件失败。我的代码如下所示：

```
$s;
print("Please enter your id number: ");
$s = <STDIN>;

if(($s =~ /^9/) && ($s =~ /0{1}/))
{
    print("ID is valid\n");
}
else
{
    print("ID not valid\n");
} 
```

条件的第二部分 ($s =~ /0{1}/) 我正在阅读为“仅匹配一个零”，但如果数字包含多个零，只要它们不是，它就不起作用重复（例如：90401 返回有效，其中 90091 无效）。我知道这已经成为可能，但我尝试了很多没有解决方案的组合。朝着正确方向的任何一点都是最有帮助的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:42:54.790

最有效的代码是拒绝最有可能发生的坏情况（包含非数字）的代码，然后是 perl 快速检查的情况（从 9 开始），然后是最后的情况（不超过 1 个零）。

```
if ($s =~ m/[^0-9]/ || $s =~ m/^[^9]/ || ($s =~ s/0/0/g) > 1) {
print "Invalid\n";
} 
```

如果 ID 有效，一个快速的单个正则表达式是正确的，但它仍然比我在无效输入上的第一个解决方案慢，并且在有效输入上没有更快：

```
m/^9[1-9]*(0[1-9]*)?$/ 
```

这是一个正则表达式的速度，我认为可以在一个操作中完成这项工作。使用 ?: 非捕获组似乎会更快，而且应该，但在 perl 的实际实现中，它会慢约 15%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T02:20:38.670

这个正则表达式应该这样做：

```
/^9[1-9]*0?[1-9]*$/ 
```

从 9 开始，1-9 的任意数字，可能是 0，然后是 1-9 的任意数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T02:35:17.673

默认情况下，匹配运算符 m//（或简称为 //）扫描字符串以查找模式的第一个匹配项，然后退出。

> 我正在阅读，“只匹配一个零”

它实际上是“匹配一个 0 一次”。

因此，匹配操作符将扫描字符串“900009”，并在字符串中的位置 1 处恰好一次找到匹配 0 的匹配项，然后退出。匹配运算符还将在字符串中的位置 1 处找到 0 恰好 2 次的匹配，以及 0 恰好 3 次的匹配，以及 0 恰好 4 次的匹配。

> 如果条件超过一个零，我一生都无法弄清楚如何使条件失败。<

如何在字符串中找到 0 的所有匹配项，如果大于 1，则拒绝该字符串？

```
use strict;   
use warnings;   
use 5.012;  

my @strings = (
    "90909",
    "909",
    "999",
);

for my $str (@strings) {
    my @matches = $str =~ /0/g;
    say scalar @matches;
}

--output:--
2
1
0 
```

实际上有一种奇特的方法可以在一行中获取计数：

```
my $count = () = $str =~ /0/g; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T02:28:57.257

```
if ($s =~ /^9[1-9]*0?[1-9]*$/) 
```

或者你可以`@{[$n =~ /0/g]}`用来数“0”。

```
if (($s =~ /^9[0-9]+$/) && (@{[$s =~ /0/g]} <= 1)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T03:34:18.760

接受的答案实际上有很多冗余。而且它不仅计算*全*零，而且还花费了不必要的时间来替换它们！？

以下没有那么多冗余，一旦找到两个零就会停止：

```
/^9[0-9]*\z/ && /^[^0]*+(?:0[^0]*+)?+\z/
   or die; 
```

# php - 将下拉值传递给会话而不刷新页面

> ID：16096128
> 
> 赞同：2
> 
> 时间：2013-04-19T02:12:59.767
> 
> 标签：php, javascript, jquery, ajax, session-variables

我需要将选择值传递给会话**而不刷新页面**。我认为可以使用 onchange 事件。

实际上，我可以将选择值放入文本字​​段。

**HTML**

选择：

```
<select id="dropdown1" class="select" tabindex="2" onchange="run(this)">
    <option>Select</option>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
</select> 
```

文本框：

```
<input type="text" id="car" name="car" id="car" value="<?=$_POST[car]?>" disabled /> 
```

**JavaScript**

```
function run(sel) {
    var i = sel.selectedIndex;
    if (i != -1) {
        document.getElementById("car").value = sel.options[i].text;
    }
} 
```

**问题**

从下拉列表中选择值时如何在变量上设置值？

```
$_SESSION['car'] = DROPDOWN VALUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:27:57.783

如果你可以使用 jQuery，这将起作用：

```
function run(sel) {

    var i = sel.selectedIndex;
    if (i != -1) {
        document.getElementById("car").value = sel.options[i].text;

        $.ajax({
            type: "POST",
            url: "urPHPPage.php",
            data: { car: sel.options[i].text}
        }).done(function( msg ) {});
    }
} 
```

在你的 PHP 文件中

```
if(isset($_POST["car"])){
   $_SESSION['car'] = $_POST["car"]; //offcourse you will have to do some sanitization here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:24:56.493

由于您的会话是服务器端事件，而您的`onchange`事件是客户端事件，因此您需要`AJAX`在不刷新页面的情况下更改下拉选项。

您将需要在`onchange`事件上运行 JavaScript 函数。

在该功能中，您需要使用`AJAX`才能连接到浏览器/数据库并保存`session['car']`

希望能帮助到你。

# zend-framework2 - 可捕获的致命错误： Zend\Form\View\Helper\FormLabel 类的对象

> ID：16096134
> 
> 赞同：0
> 
> 时间：2013-04-19T02:13:30.900
> 
> 标签：zend-framework2, zend-form, php

> 可捕获的致命错误：Zend\Form\View\Helper\FormLabel 类的对象无法在第 2 行的 (...)\module\Application\view\application\produtos\form.phtml 中转换为字符串

表单.phtml

```
<?php echo $this->form()->openTag($form);?>
<?php echo $this->formLabel($form->get('nome_produto'));?>
<?php echo $this->formElement($form->get('nome_produto'));?>
<?php echo $this->formErrors($form->get('nome_produto'));?>
<?php echo $this->form()->closeTag($form);?> 
```

产品控制器.php

```
public function novoAction()
{
    $form = new ProdutoForm();

    $view = new ViewModel(array(
            'form' => $form
    ));
    $view->setTemplate('application/produtos/form.phtml');
    return $view;
} 
```

产品表单.php

```
 <?php

namespace Application\Form;

use Zend\Form\Form;
use Zend\Form\Element\Text;

class ProdutoForm extends Form
{
public function __construct($name = null) {
    parent::__construct('produto');

    $nome = new Text('nome_produto');
    $nome->setLabel('Nome: ')
         ->setAttributes(array(
            'class' => 'input-mediun'
         ));
    $this->add($nome); 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:23:40.380

是的，那些表单视图助手应该有更好的错误检测。我猜`$form->get('nome_produto')`是回来了`null`。结果，`FormLabel`视图助手只是简单地返回自己，因为它没有实际渲染的内容。然后该`echo`命令尝试将视图助手转换为字符串。

仔细检查元素名称并确保您从表单中获取正确的项目。

# mysql - Ruby SSH MySQL Sequel（或 DataMapper）使用 Net::SSH gem 远程连接密钥

> ID：16096138
> 
> 赞同：0
> 
> 时间：2013-04-19T02:14:03.520
> 
> 标签：mysql, ruby, authentication, ssh, gem

如何使用 Ruby [Net::SSH](https://github.com/net-ssh/net-ssh)或[Net::SSH::Gateway](https://github.com/net-ssh/net-ssh-gateway) gems 和密钥（而不是密码）身份验证远程（从基于云的应用程序）连接到基于 VPS 的 MySQL 数据库？

然后使用 Sequel 或 DataMapper 连接到数据库。我假设在我设法使 SSH 连接正常工作后，我只需设置一个到 'sql_user@localhost:3306/database' 的 Sequel/DM 连接。

我确实在这里找到了几个类似的问题，但它们都使用密码身份验证，而不是密钥，并且只演示了执行原始命令来查询数据库。

更新：我似乎无法让这个（Net::SSH with key manager）工作。

UPDATE2：好的，当我从具有存储在用户本地 .ssh 文件夹中的授权密钥的计算机登录时，我已经设法获得授权，具有以下内容（端口是我在 VPS 上的自定义 SQL 端口）：

```
 sql_gate = Net::SSH::Gateway.new('192.xxx.xxx.xx','sqluser', port: 26000) 
```

但是，我将无法`.ssh`在应用程序的 VM 中创建文件夹，因此我需要以某种方式传递路径和文件名（我将为指定用户的 SQL 访问创建一个公钥）作为一个选项......但是没有无法弄清楚如何。

更新：现在只需要弄清楚 DataMapper 的访问权限。当前正在测试的代码（`remote_user_sql`是我的 Ubuntu 用户，是具有特权`sql_user`的 MySQL 数据库用户）：`localhost/127.0.0.1`

```
require 'net/ssh/gateway'
require 'data_mapper'
require 'dm-mysql-adapter'

class User
  include DataMapp......
  .
  .
end

ssh_gate = Net::SSH::Gateway.new('192.n.n.n','remote_user_sql', {port: 25000, keys: ["sql_rsa"], keys_only: true})

port = ssh_gate.open('localhost',3306,3307)
  child = fork do
    DataMapper.setup(:default, {
      adapter: 'mysql',
      database: 'sql_test',
      username: 'sql_user',
      password: 'passwd',
      host: 'localhost',
      port: port})
    DataMapper.auto_upgrade!
    exit
  end
  puts "child: #{child}"
  Process.wait

ssh_gate.close(port) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T02:50:59.583

我的解决方案，分为两部分：

好吧，我已经想出了如何使用指定的密钥文件制作 Net::SSH::Gateway gem，然后通过 ssh 通过 22 以外的端口连接到 VPS：

**第 1 部分：Net::SSH::Gateway 密钥认证**

首先，您必须生成要使用的密钥文件，将其复制`.pub`到删除服务器并将其附加到`~/.ssh/authorized_keys`文件 ( `cat sql_rsa.pub >> authorized_keys`)，然后确保`user_sql`（我在 VPS 上创建的仅用于此目的的用户）已添加到`AllowUsers`中列出`sshd_config`。记下用于 ssh 的端口（本例中为 25000）并使用以下代码建立连接：

```
ssh_gate = Net::SSH::Gateway.new('192.n.n.n','user_sql', {port: 25000, keys: ["sql_rsa"], keys_only: true}) 
```

这将读取与`sql_rsa`脚本文件相同目录中的密钥文件，然后在端口 25000 上为 'user_sql'@'192.nnn' 创建一个新的 ssh 网关。

我可以通过以下方式在删除 VPS 上成功执行原始 shell 命令：

```
ssh_gate.exec("ls -la") 
```

关闭：

```
ssh_gate.shutdown! 
```

不幸的是，我在使用 DataMapper（do-mysql-adapter）来使用网关时仍然遇到问题。如果我弄清楚那部分，我会更新这个答案，但至少问题的前半部分已经解决。

这些是 DataMapper::Logger 报告的错误：

何时`127.0.0.1`使用：

```
Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (code: 2002, sql state: HY000, query: , uri: ) 
```

何时`localhost`使用：

```
Access denied for user 'user_sql'@'localhost' (using password: YES) (code: 1045, sql state: 28000, query: , uri: ) 
```

使用 VPS`hostname`时：

```
Unknown MySQL server host 'hostname' (25) (code: 2005, sql state: HY000, query: , uri: ) 
```

更新（尚未成功）：到目前为止，我可以访问远程 MySQL 数据库的唯一方法是使用 Net::SSH::Gateway 建立网关，然后使用该`.ssh`方法打开一个新的 Net::SSH 连接。网关，像这样：

```
ssh_gate.ssh('192.n.n.n','user_sql',{port: 25000, keys: ["sql_rsa"], keys_only: true}) do |ssh|
    ssh.exec("mysql -u sql_user -p'passwd' -h localhost -P 3306 -e 'SELECT DATABASE();'")
end 
```

也就是说，我只能使用mysql命令行执行SQL命令。我无法弄清楚如何让 Sequel 或 DataMapper 使用网关进行连接。

**第 2 部分：通过 Net::SSH::Gateway 连接 DataMapper/Sequel/mysql2**

确保您的 MySQL 服务器绑定到 127.0.0.1 中`/etc/mysql/my.cnf`，设置您的连接 - DataMapper 示例：

```
DataMapper.setup(:default, {
  adapter: 'mysql',
  database: 'DATABASE',
  username: 'username',
  password: 'passwd',
  host: '127.0.0.1',
  port: 3307}) # local port being forwarded via Net::SSH:Gateway 
```

如果需要，后跟任何`class`表定义。请注意，DataMapper 在执行、或 查询`DataMapper.finalize`之前实际上并没有连接到远程 MySQL 服务器，因此还不需要创建转发端口。`auto_upgrade!``auto_migrate!`

然后新建一个 Net::SSH::Gateway，然后每当需要 DataMapper/Sequel 访问远程数据库时，只需为进程打开一个端口，如下所示：

```
port = ssh_gate.open('127.0.0.1',3306,3307)
  child = fork do
    DataMapper.auto_upgrade! # DM call that accesses MySQL server
    exit
  end
  Process.wait
ssh_gate.close(port) 
```

您可能希望将 Net::SSH::Gateway/.open 代码放在一个`begin..ensure..end`块中，`ensure`以关闭端口和关闭网关。

我必须使用`fork`and`Process.wait`来建立连接，没有它，方法就会挂起。

# ruby - 如何在我的 rhtml 文件中要求另一个 .rb 文件？

> ID：16096139
> 
> 赞同：1
> 
> 时间：2013-04-19T02:14:06.943
> 
> 标签：ruby, erb

在我的 rhtml 文件中，我想在同一目录中需要另一个 ruby​​ 文件。所以我尝试了：

```
<% require_relative 'another.rb' %> 
```

但我的日志中出现了这个错误：

```
(erb):2:in `require_relative': cannot infer basepath (LoadError) 
```

然后我尝试使用：

```
<% require './another.rb' %> 
```

它给出了错误消息：

```
/usr/local/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- ./views/another.rb (LoadError) 
```

然后我尝试通过执行以下操作查看基本路径是什么：

```
puts File.absolute_path(__FILE__) 
```

它返回：

```
(erb) 
```

我怎样才能要求另一个文件使用`relative path`？我不想使用绝对路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:59:19.650

从错误中可以看出，当前路径为`views`( `app/views`)。如果您想要的文件在您的应用程序`lib`目录中，您可以执行以下操作：

```
<% require_relative '../../lib/another' %> 
```

你不需要`.rb`。

不过，这是一个相当糟糕的主意。你不应该要求内部观点的东西。如果您尝试访问某种与视图相关的功能，您可以在控制器中要求它；视图可以访问所有控制器操作。走这条路，最好将功能包装在控制器方法中。

您还可以将功能放入助手中；这就是助手的用途。请参阅`app/helpers/application_helper.rb`一个好的起点，或针对视图制定一个特定的起点。请参阅[查看帮助程序文档](http://guides.rubyonrails.org/getting_started.html#view-helpers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:01:30.637

一个很不健康的方法是加'.'。到加载路径

```
$LOAD_PATH << '.' 
```

那么你可以使用

```
<% require './another.rb' %> 
```

我认为最常见的方式是

```
require File.join(File.dirname(__FILE__), 'path', 'to', '..', 'file') 
```

如果你认为你只使用一个常量和一个相对路径，我相信说这个路径是相对的是正确的。

# python - 为什么 NumPy 不在 Ubuntu 12.10 64 位上的空闲 3.30 中导入

> ID：16096143
> 
> 赞同：0
> 
> 时间：2013-04-19T02:14:29.240
> 
> 标签：python, linux, numpy, python-idle, ubuntu-12.10

我通过在 linux shell 中运行以下命令来安装 NumPy：

```
sudo apt-get install python-numpy 
```

在 Idle for python 3.30 中，当我导入 numpy 时，它输出以下内容：

```
 Python 3.3.0 (default, Sep 29 2012, 17:14:58) 
[GCC 4.7.2] on linux
Type "copyright", "credits" or "license()" for more information.
>>> import numpy
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import numpy
  File "/usr/lib/python3/dist-packages/numpy/__init__.py", line 137, in <module>
    from . import add_newdocs
  File "/usr/lib/python3/dist-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/usr/lib/python3/dist-packages/numpy/lib/__init__.py", line 4, in <module>
    from .type_check import *
  File "/usr/lib/python3/dist-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/usr/lib/python3/dist-packages/numpy/core/__init__.py", line 5, in <module>
    from . import multiarray
ImportError: cannot import name multiarray
>>> 
```

我还安装了 SciPy、matplotlib 和 mayavi2。当我导入它们时，它们也会出错。

为什么会发生这种情况。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:11:11.443

在我的 ubuntu 12.10 上。我使用*pip*安装软件包。我使用 Python3.2。

```
sudo apt-get install python3-pip
sudo pip-3.2 install numpy 
```

我已经尝试过了并成功安装了*numpy*。

# c# - 在 C# 中打印一个看起来像 word 文档的带有文本的表单

> ID：16096145
> 
> 赞同：-2
> 
> 时间：2013-04-19T02:14:37.173
> 
> 标签：c#, printing

我正在尝试创建一个可以像普通 Word 文档一样打印的合同（文档）。我有一个表格，它是我的“输入表格”），我可以在其中输入客户姓名、金额、合同日期等详细信息。然后将这些信息保存在 ms 访问中。我有另一种形式（我称之为“合同文件”）。它里面有标签，标签包含我在“输入表”中输入的信息。我分配了一个标签来获取我在输入表单的文本框中输入的值。

```
 contractdoc.contract_date_label.Text = contract_date_tb.Text;
    contractdoc.deposit_label.Text = deposit_tb.Text;
    contractdoc.customer_name_label.Text = customer_name_tb.Text; 
```

我还添加了标签并键入了文档正文的其余部分，并将它们放置在“合同文档表格”中，看起来就像一份实际的合同。但我不知道如何像文件一样打印它。我用过：

```
 printForm1.Print(); 
```

但发生的情况是，它要求我以 xls 格式保存，并且只有一个消息框，上面写着：“正在打印文档的第 1 页”，并带有一个取消按钮。

我希望你能帮忙。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:47:47.553

我从名称`printForm1`推测您正在使用[`PrintForm`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.printform.aspx)作为 Visual Basic PowerPack 的一部分提供的类。

在这种情况下，您需要确保[`PrintAction`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.printform.printaction.aspx)正确设置了该属性。要打印到物理打印机，您需要将其设置为`PrintAction.PrintToPrinter`. 根据配置为系统默认值的打印机，您可能还需要设置该[`PrinterSettings`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.printing.printform.printersettings.aspx)属性。然后，当您调用该[`Print`](http://msdn.microsoft.com/en-us/library/bb918024.aspx)方法时，它将打印到正确的打印机。

它可能会提示您以 XLS 格式保存文件，因为您的系统默认打印机是生成 XLS 文件的虚拟打印机。

# php - 如何删除连续字符并避免某些字符串

> ID：16096149
> 
> 赞同：1
> 
> 时间：2013-04-19T02:14:57.243
> 
> 标签：php, regex, preg-replace

嗨，我想知道如何删除 url 中的所有重复字符，但保持 http:// 和查询字符串完好无损。

示例网址：

```
https://domain.com:800///some/here..jpg 
```

目前有这段代码可以删除重复的字符：

```
preg_replace('/([^a-zA-Z0-9-_\s])\\1+/', '$1', urldecode($url)) 
```

并决定：

```
https:/domain.com:800/some/here.jpg <-- removed the / from https:// 
```

我怎样才能允许只替换路径并保持其余部分完好无损？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:45:50.920

我不擅长正则表达式，所以我可以在不修改代码的情况下为您提供替代解决方案：

```
$url = "https://domain.com:800///some/here..jpg";
$url_without_https = substr($url, 8); //assuming its always https://
$urlModified = preg_replace('/([^a-zA-Z0-9-_\s])\\1+/', '$1', urldecode($url_without_http));
$url = "http://" . $urlModified; 
```

# solr - SOLR中Occur.SHOULD和Occur.MUST的区别

> ID：16096152
> 
> 赞同：0
> 
> 时间：2013-04-19T02:15:31.993
> 
> 标签：solr

在 org.apache.lucene.search.BooleanQuery 的 add 方法中，我没有区分 Occur.SHOULD 和 Occur.MUST。谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:49:14.340

`BooleanClause.Occur.Must`代表一个`Mandatory`子句。应满足该条款才能返回结果。基本上`AND`。

`BooleanClause.Occur.SHOULD`代表`optional`子句，行为类似于`OR`

对于 Solr ，在调试查询说明`BooleanClause.Occur.Must`中标有，而没有与之关联的符号。`+``BooleanClause.Occur.SHOULD`

# mysql - DBGrid - 如何将相邻两行中的列值之间的差异显示为另一列？

> ID：16096158
> 
> 赞同：0
> 
> 时间：2013-04-19T02:16:34.520
> 
> 标签：mysql, delphi, tdbgrid, geographic-distance

假设我每分钟左右记录一次汽车的纬度和经度，每次都在表格中添加一行。

我想要一个有 4 列的数据库网格

1.  纬度
2.  经度
3.  自上次测量以来的距离
4.  当前街道地址，如果知道的话

第 4 点，我可以尝试从 Google 地图中检索，但我得到一个文本或空白，所以让我们忽略它。

我如何获得#3？我应该在我的应用程序或 MySql 中计算它（使用存储过程还是只是一个复杂的 SELECT）？

无论哪个答案，有人可以提供一些示例代码或示例链接吗？Google 今天不是我的朋友 :-(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:10:18.333

你可以这样做：

*   在您的查询中计算它，并将其显示在计算列中（例如在您显示的位置显示行总计时`ITEM_PRICE, QUANTITY, ITEM_PRICE * QUANTITY AS LINE_COST`。

*   在应用程序中计算它，使用计算字段（双击 TTable 组件打开字段编辑器，添加字段，将类型设置为 ftCalculated，并在 OnCalcEvent 中为该计算字段编写代码。

第一个选择通常更可取，因为 DB 通常在对数据集执行此类操作时比您的代码按行执行操作更有效。（集合操作显然比行操作更有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:48:37.477

Ken 的回答是尽其所能，因为解决问题的最困难任务是在 SQL 中同时从两行获取数据。如果您使用的是 Oracle 或 SQL Server，则可以使用分析/窗口 LAG 功能。使用 MySQL，您必须自己做。这里有 2 篇关于如何在 MySQL 中模拟 LAG 的文章

[http://www.onlamp.com/pub/a/mysql/2007/03/29/emulating-analytic-aka-ranking-functions-with-mysql.html?page=1](http://www.onlamp.com/pub/a/mysql/2007/03/29/emulating-analytic-aka-ranking-functions-with-mysql.html?page=1)

[http://explainextended.com/2009/03/12/analytic-functions-optimizing-lag-lead-first_value-last_value/](http://explainextended.com/2009/03/12/analytic-functions-optimizing-lag-lead-first_value-last_value/)

另外还有关于如何从前一行获取数据的 StackOverflow 问题。

[如何在 MySQL 中滞后列？](https://stackoverflow.com/questions/5483319/how-do-i-lag-columns-in-mysql)

[在sql中计算delta（当前行和上一行的差）](https://stackoverflow.com/questions/5078987/calculate-deltadifference-of-current-and-previous-row-in-sql)

我不能对其中任何一个提供任何意见，因为我很少使用 MySQL。

# c# - 从列表中查找缺失的 ID 在数据表中

> ID：16096160
> 
> 赞同：1
> 
> 时间：2013-04-19T02:17:18.393
> 
> 标签：c#, .net, linq, linq-to-sql

我有一个 List 和一个 DataTable，其中包含一个与列表中的 ID 匹配的列。我需要识别列表中所有不在 DataTable 中的 ID。我尝试获取一个 IEnumberable DataRow 并将其加入列表，但我无法识别丢失的数据行。

这是我的代码和我尝试过的...

```
List<int> JobIdList = (from i in EntryItems select i.JobID.Value).ToList<int>();
IEnumerable<DataRow> rowInfo = JobBLL.JobsExist(JobIdList).AsEnumerable();

var MissingList = (from rec in rowInfo
                    join id in JobIdList
                    on rec.Field<int>("JobID") equals id
                    into grouping
                    from id in grouping.DefaultIfEmpty()
                    select new { id }).ToList();

if (MissingList.Count > 0) { // Show message and exit } 
```

问题是这会返回找到的数据表中的项目。假设我的列表中有 1、2 和 3，但我的数据表只有 1 和 3。我想在 MissingList 中有 2。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:29:20.643

```
var jobIdList = new HashSet<int>(from i in EntryItems select i.JobID.Value);
var rows = JobBLL.JobsExist(jobIdList).AsEnumerable();

var foundIds = (from x in rows select x.Field<int>("JobID")).ToList();
var missingIds = jobIdList.Except(foundIds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T09:23:31.797

您需要将以下代码行添加到您的代码中。

```
var missingIds = JobIdList.Except(MissingList); 
```

# c - 如何将 for 循环的索引作为 pthread_create 的参数传递

> ID：16096161
> 
> 赞同：6
> 
> 时间：2013-04-19T02:17:22.227
> 
> 标签：c, multithreading, pthreads

我正在使用 for 循环创建多个线程并将索引 i 作为参数传递，如下所示：

```
pthread_t p[count];
for (int i = 0; i < count; i++){
    pthread_create(&p[i], NULL, &somefunc, (void*)&i);
} 
```

然后我尝试检索 i 的值：

```
void *somefunc (void* ptr){
    int id = *(int*)ptr;
} 
```

但是，我注意到有时，线程中的 id 会有重叠的值，我怀疑这是由于在线程能够检索值之前更新 for 循环的索引（因为我传入了指针，而不是值本身）。有没有人有任何建议可以在不减慢 for 循环的情况下克服这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:23:35.427

发生这种情况是因为一旦您将指针传递给您，`i`您现在就有多个线程使用相同的值。这会导致数据竞争，因为第一个线程正在修改`i`，而您的第二个线程希望它永远不会改变。您始终可以分配一个临时 int 并将其传递给线程函数。

```
pthread_create(&p[i], NULL, &somefunc, new int(i)); 
```

这将在动态存储（堆）中分配一个整数并使用`i`. 然后将指向新分配的整数的指针传递给线程函数。

然后在线程函数中，您可以像以前一样获取传递的值，然后删除 int 对象。

```
void *somefunc (void* ptr){
    int id = *(int*)ptr;
    delete (int*)ptr;
} 
```

[建议：[避免 C 风格的演员表。](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used/332086#332086)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T02:50:43.663

正如其他人所说，您将指针传递给另一个线程（父线程）正在修改的对象，并在没有任何同步的情况下访问它。这是一个错误。

至少有3个解决方案：

1.  为单个分配（通过`new`C++ 或C）空间，并让新线程负责释放它。这可能是最糟糕的解决方案，因为现在您有一个额外的失败案例要处理（分配失败），因此它会使您的代码复杂化和混乱。`malloc``int`

2.  来回转换整数`void *`。这肯定会在任何现实世界的 POSIX 系统上工作，但它并不能“保证”工作，也许更烦人的是，它可能会引发警告。您可以通过`uintptr_t`.

3.  不传递索引，而是传递地址：

    pthread_create(&p[i], NULL, &somefunc, &p[i]);

然后 start 函数可以通过减去来恢复索引（如果它需要它）`p`：

```
int id = (pthread_t *)ptr - p; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T02:28:05.320

你让这有点太复杂了：

```
for (int i = 0; i < count; i++){
    pthread_create(&p[i], NULL, &somefunc, (void*)&i); 
```

您只想传递值，而不是指向它的指针，所以 pass `(void*)i`。照原样，您正在向每个线程传递一个`i`有问题的指针：

*   `i`当线程尝试从其地址读取时，可能已经离开了作用域——其他变量可能会在那里，或者内存可能会闲置而未使用，而谁知道其中还剩下什么
*   循环中的下一次迭代无论如何都会覆盖该值，这意味着所有线程在取消引用指针时可能会看到值“count”，如果它没有像上面那样被破坏，除了极少数情况下启动线程在循环期间被挂起，允许它产生的线程读取一些较早的`i`值

所以：

```
for (int i = 0; i < count; i++){
    pthread_create(&p[i], NULL, &somefunc, (void*)i);

...
void *somefunc (void* id_cast_to_voidptr){
    int id = (int)id_cast_to_voidptr;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T08:37:28.297

我认为最好的答案是在开始时声明一个 args 数组，其大小与您打算创建的线程数量相同。

这样，这些值永远不会被覆盖或处于竞争状态。

```
int args[count];

for (int i = 0; i < count; i++){
     args[i]=i;
     pthread_create(&p[i], NULL, &somefunc, (void*)args[i]);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-01-24T01:24:42.420

您可以在 main 函数的开头声明一个任务 id 数组。每当您创建线程时，您都可以发送该数组的索引以防止参数被覆盖。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define NUM_THREADS 8

void *PrintHello(void *threadid)
{
   long taskid;
   sleep(1);
   taskid = (long) threadid;
   printf("Hello from thread %ld\n", taskid);
   pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
   pthread_t threads[NUM_THREADS];
   long taskids[NUM_THREADS];
   int rc;

   for(long t=0;t<NUM_THREADS;t++) {
      printf("Creating thread %ld\n", t);
      taskids[t] = t;
      rc = pthread_create(&threads[t], NULL, PrintHello, (void *) taskids[t]);

      if (rc) {
         printf("ERROR; return code from pthread_create() is %d\n", rc);
         exit(-1);
         }
   }

   pthread_exit(NULL);
} 
```

# c# - Linq XML 复杂选择（3 级）

> ID：16096162
> 
> 赞同：0
> 
> 时间：2013-04-19T02:17:23.700
> 
> 标签：c#, xml, linq

我需要`ConnectionString`从.`MAINDB``ServerConfig`

```
<?xml version="1.0" encoding="utf-8" ?>
<ServerConfig>
  <config section="MAINDB">
    <parameter type="ConnectionString">"CONNSTRING"</parameter>
    <parameter type="ConnectionString1">"CONNSTRING1"</parameter>
    <parameter type="ConnectionString2">"CONNSTRING2"</parameter>
    <parameter type="ConnectionString3">"CONNSTRING3"</parameter>
  </config>
  <config section="OTHERDB">
    <parameter type="ConnectionString">"CONNSTRING"</parameter>
    <parameter type="ConnectionString1">"CONNSTRING1"</parameter>
    <parameter type="ConnectionString2">"CONNSTRING2"</parameter>
    <parameter type="ConnectionString3">"CONNSTRING3"</parameter>
  </config>
  <config section="OTHERPARAM">
    <parameter type="OtherString">"OTHERSTRING"</parameter>
  </config>
</ServerConfig> 
```

我用 Linq 尝试了几种方法，但都没有成功。

我的最后一次尝试：

```
var parameters =
    from el in xdoc.Elements(GivenSystem)
    where (from add in el.Elements("config")
          where (string)add.Attribute("section") == ConfigSection
          select add).Any()
    select el;

foreach (var t in parameters)
{
    Console.WriteLine(t.Value.ToString() + " - ");
} 
```

从所有部分中选择所有参数。

我该如何编写这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:06:01.277

在这里使用 xpath 的情况要干净得多。LINQ to XML 查询可能会有点冗长。

```
const string configSection = "MAINDB";
const string parameterType = "ConnectionString";

// using xpath //
var xpath = String.Format(
    "/ServerConfig/config[@section='{0}']/parameter[@type='{1}']",
    configSection, parameterType
);
var query1 = (string)doc.XPathSelectElement(xpath);

// using LINQ //
var query2 =
    (from config in doc.Elements("ServerConfig").Elements("config")
    where (string)config.Attribute("section") == configSection
    from parameter in config.Elements("parameter")
    where (string)parameter.Attribute("type") == parameterType
    select (string)parameter).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:04:27.910

```
var connectionString = (from c in xdoc.Root.Elements("config")
                        where (string) c.Attribute("section") == "MAINDB"
                        from p in c.Elements("parameter")
                        where (string) p.Attribute("type") == "ConnectionString"
                        select (string) p).FirstOrDefault(); 
```

`connectionString`将包含您的价值，或者将`null`在未找到时包含您的价值。

# python - Sympy Solve() 给出不正确的答案

> ID：16096164
> 
> 赞同：4
> 
> 时间：2013-04-19T02:17:47.960
> 
> 标签：python, math, sympy, symbolic-math

我正在使用 sympy 来处理一些数学模型，但我发现出于某种原因 sympy.solve() 给了我错误的答案。

```
import sympy as sm
p, WAA, WAa, Waa = sm.symbols( 'p, WAA, WAa, Waa' )

num = p**2*WAA + p*(1-p)*WAa
denom = p**2*WAA + 2*p*(1-p)*WAa + (1-p)**2*Waa

dipMod = sm.Eq( num / denom , p )
eq = sm.solve(dipMod, p)
print eq 
```

结果应为 0、1 和 (WAa - Waa)/(2WAa - WAA - Waa)。我通过在 MATLAB 中求解来检查我的公式，它给出了正确的答案。

有趣的是， sympy 正确地求解了一个更简单的方程：

```
hapMod = sm.Eq(  WAA*p / (WAA*p + Waa*(1-p)), p )
print sm.solve(hapMod, p) 
```

它给出了 0 和 1 的解决方案。我做错了什么还是解决中有错误？如果可能的话，我想坚持使用 Python，而不是切换到 MATLAB。

**更新：**

我又遇到了这个问题：

```
p, WA, Wa = sm.symbols('p, WA, Wa')

hapMod = sm.Eq( p*WA / (p*WA + (1-p)*Wa) , p )
hapModEq = sm.solve( hapMod, p ) 
```

给出正确答案。但是代替WA和Wa

```
hapMod2 = hapMod.subs( [(WA, 1+a*(1-p)), (Wa, 1+B*p)], simultaneous=True  )
hapMod3 = sm.simplify(hapMod2)
print hapMod3
hapMod3Eq = sm.solve(hapMod3, p) 
```

再次给出不正确的答案。MATLAB 给出的正确答案是 0, 1, a/(B + a)。我发现如果我从分母中取出多项式并求解

```
test = sm.Eq( p*(a*p - a - 1)/(B*p - B*p + a*p - a*p - 1), p )
print sm.solve(test, p) 
```

它工作得很好。是否有多项式分母会引发 sympy？

**更新更新**

在弄乱它之后，我发现 sympy*给出*了正确的答案，但把它们留在了一个奇怪的扩展形式中，比如

```
(B + 2*a)/(2*(B+a)) + sqrt(B**2)/(-2*B - 2*a). 
```

这简化为正确的 a/(B+a)，但 sympy 在呈现平衡时或在明确要求单独简化此方程时都不会简化它。所以这似乎更像是一个简化而不是解决的问题。毕竟它可以正确解决。sympy 会留下类似的东西似乎很奇怪

```
sqrt(B**2) or sqrt( (WAA - WAa)**2) 
```

无需将它们简化为 B 或 (WAA - WAa)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:51:44.350

If you want to simplify `sqrt(x**2)` to `x`, you need to set `x` to be positive, as this is not true otherwise. This is done by setting `x = Symbol("x", positive=True)`.

# javascript - ruby 中的列表或数组

> ID：16096165
> 
> 赞同：0
> 
> 时间：2013-04-19T02:17:50.010
> 
> 标签：javascript, ruby-on-rails, arrays, list

我正在寻找一种将 ruby​​ 实例用作数组或列表的方法，可以在 javascript 的“for/in”语句中使用。
在控制器中，我有：

```
@enum_Expected = Source.all 
```

如何在我的视图中使用 @enum_Expected 作为可以在 javascirpt 中使用的数组或列表，例如：

```
for (var source in WantToList){
  do something with each @enum_Expected's element
} 
```

谢谢

在“mchail”问题中完成后。
让我们看看我的结果：
我使用了：

```
@enum_Expected = Source.all.to_json(only: [:latitude, :latitude]) 
```

当我调试时，它的值是：
"[{\"latitude\":10.7779,\"longitude\":106.656},{\"latitude\":10.785,\"longitude\":106.663},{\"latitude \":10.7709,\"经度\":106.673}]"

当我尝试类似的事情时：

```
 for(var locat in enum_expected){document.write("Trying ")} 
```

结果是：
试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试试试 试试 试试 试试 试试 试试 试试 试试 试试 试试 试试
周四，“尝试”单词的数量等于**locat.length**，即 137。
这不是我预期的结果。如果“尝试”单词的数量只有三个，即**Source**中的记录数，那就更好了。
**任何意见？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:22:47.290

在您的控制器中，`Source.all`像这样转换为 json：

```
@enum_Expected = Source.all.to_json 
```

如果您只想通过某些属性，您可以这样做：

```
@enum_Expected = Source.all.to_json(only: [:attr1, :attr2]) 
```

然后您可以将您的 json 直接打印到视图中（显示 erb 格式）：

```
var enumExpected = <%= @enum_Expected %>; 
```

然后按照您的预期`enumExpected`在您的循环中使用。`for`

### 更新

生成的 json 看起来很棒。它会生成一个数组，因此您需要对数组进行稍微不同的迭代。像这样：

```
for (var lolcatIndex = 0; lolcatIndex < enum_expected.length; lolcatIndex++) {
    var lolcat = enum_expected[lolcatIndex];
    console.log(lolcat);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:22:56.100

您可以分配`@enum_Expected`为变量中的哈希数组。

```
<script>
  var enumExpected = <%= @enum_Expected.map(&:attributes).to_json %>
</script> 
```

`enumExpected`应该是每个属性的数组`@enum_Expected`

# java - 编写接口时如何避免重复代码？

> ID：16096167
> 
> 赞同：1
> 
> 时间：2013-04-19T02:18:29.143
> 
> 标签：java, inheritance, interface

我想编写一个折线类，它需要直线和圆弧类的功能。我知道折线*有*直线和圆弧，因此我应该使用接口而不是扩展（我知道你不能扩展两个类）。问题是我还需要为直线和圆弧类编写代码，如果可能的话，我想避免在折线类中复制这些代码。

有没有办法做到这一点？

这是来自 line 类的代码片段。折线类还需要有 getMidPoint()、containsPoint(x,y) 等。我还没有编写圆弧的代码，但它具有类似的功能 getMidPoint()、 containsPoint(x,y)。

```
public Line (double x1,double y1, double x2,double y2){
    super (x1,y1,x2,y2);
}
public ACSPoint getMidPoint(){
    ACSPoint p = new ACSPoint();
    p.x((this.start.x()+this.end.x())/2);
    p.y((this.start.y()+this.end.y())/2);
    return p;
}
@Override
public boolean containsPoint(double x, double y){
    boolean containsPoint = super.containsPoint(x, y);
    if (containsPoint){
        if (x<this.start.x()||x>this.end.x()){
            return false;
        }
    }
    return containsPoint;
}
@Override
public boolean containsPoint(ACSPoint p){
    return this.containsPoint(p.x(), p.y());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:26:49.193

由于 Java 不支持从多个类继承，因此您可以使用[Object Composition](http://en.wikipedia.org/wiki/Object_composition)。

然后，`PolyLine`班级将

*   实现 Line 和 Arc 接口
*   由 Line 和 Arc 实现组成。
*   将对 line 和 arc 接口中的方法的调用委托给相应的对象。

这样做的缺点是您的 PolyLine 与 Line 或 Arc 接口的一种实现相关联。您可以通过在施工期间设置它们来防止这种情况。在典型的 DI 环境中，实现将被注入或定位，而不是硬连接它们。

*   行：接口和实现：

    ```
    // Interface: Line.java
    public interface Line
    {
        void lineMethod();
    }

    // Implementation: DefaultLine.java
    public class DefaultLine implements Line
    {
        public void lineMethod()
        {

        }
    } 
    ```

*   Arc：接口和实现

    ```
    // Interface: Arc.java
    public interface Arc
    {
        void arcMethod();
    }

    // Implementation: DefaultArc.java
    public class DefaultArc implements Arc
    {
        public void arcMethod()
        {

        }
    } 
    ```

*   PolyLine：接口和实现，其中 Line 和 Arc 硬连线的实现：

    ```
    public interface PolyLine extends Line, Arc
    {

    }

    public class DefaultPolyLine implements PolyLine
    {
        private Line line;
        private Arc arc;

        public DefaultPolyLine()
        {
            line = new DefaultLine();
            arc = new DefaultArc();
        }

        public void lineMethod()
        {
            line.lineMethod();
        }

        public void arcMethod()
        {
            arc.arcMethod();
        }
    } 
    ```

*   在构造期间设置 Line 和 Arc 实现的 PolyLine 实现：

    ```
    public class DefaultPolyLine implements PolyLine
    {
        private Line line;
        private Arc arc;

        public DefaultPolyLine(Line line, Arc arc)
        {
            this.line = line;
            this.arc = arc;
        }

        public void lineMethod()
        {
            line.lineMethod();
        }

        public void arcMethod()
        {
            arc.arcMethod();
        }
    } 
    ```

的最后一个实现`PolyLine`允许客户端设置任何 Line 实现而不是始终使用该`DefaultLine`实现，这同样适用于 Arc。

# ios - iOS确定如何打开文件

> ID：16096168
> 
> 赞同：0
> 
> 时间：2013-04-19T02:18:32.210
> 
> 标签：ios, objective-c, file

我正在开发一个应用程序，人们可以在其中下载文件，并且下载和保存它们没有问题。问题是，下载某些文件时，它们没有文件扩展名（`http://test.com/test`，而不是`http://test.com/test.zip`），我无法确定它们是什么类型的文件。我试过使用`NSHTTPURLResponse`'`suggestedFilename`属性，但仍然没有在文件上添加扩展名。所以我的问题是，我怎么知道没有扩展名的文件是什么类型的文件？我也尝试过[获取文件的 mime 类型](https://stackoverflow.com/a/1401918/1702077)，但没有奏效。

# c - 为什么进程之间没有切换

> ID：16096170
> 
> 赞同：1
> 
> 时间：2013-04-19T02:18:35.100
> 
> 标签：c, linux, gcc, process, fork

我有以下程序

```
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>
main()
{
    pid_t pid, ppid;
    printf("Hello World1\n");
    pid=fork();
    if(pid==0)
    {

        printf("I am the child\n");
        printf("The PID of child is %d\n",getpid());
        printf("The PID of parent of child is %d\n",getppid());
    }
    else
    {
        while(1)
        {
        printf("I am the parent\n");
        printf("The PID of parent is %d\n",getpid());
        printf("The PID of parent of parent is %d\n",getppid());        

        }
    }
} 
```

这个程序的输出是父进程永远运行而不切换到子进程。在这种情况下，为什么没有切换到子进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:24:04.523

理想情况下，父进程应该等待子进程完成，这样子进程的入口才会被正确地收割。

```
waitpid(pid, 0, 0); 
```

看看孩子是否可以用你的无限循环运行。运行程序并`grep`为`child`：

```
./a.out | grep child 
```

# java - 输入字符串 Java 的 NumberFormatException

> ID：16096171
> 
> 赞同：0
> 
> 时间：2013-04-19T02:18:39.113
> 
> 标签：java, numberformatexception

我正在用 Java 编写约会程序，遇到一个错误，即

> 线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“”

对于以下几行：

```
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:470)
at java.lang.Integer.parseInt(Integer.java:499)
at AppointmentNew.main(AppointmentNew.java:24) 
```

该程序正在执行一次，但是一旦它第一次运行结束，它就会给我这些错误....例如，当我按如下方式运行程序时：我选择“1”进行新约会，然后我输入新约会的日期“mm/dd/yyyy”，然后添加约会描述，最后输入类型“Once, Daily, or Monthly”。**完成之后，它应该从“做出选择（1：新建，2：打印范围，3：全部打印，退出）：”**的第一行重新开始，但它却给了我上面描述的错误......

这是我的代码。

```
import java.util.*;

public class AppointmentNew 
{
public static void main (String[] args)
{
  ArrayList<String> list = new ArrayList<String>();
  Scanner stdin = new Scanner(System.in);
  String choice = "";
  int choiceNum = 0;
  String date = "";
  String descrip = "";
  int type = 0;
  String typeChose = "";

  System.out.println("Welcome to Appointment App!\n");
  System.out.println("\t============================\n");

  do
  {
     System.out.print("\tMake Choice ( 1: New, 2: Print Range, 3: Print All, quit): ");
     choice = stdin.nextLine();

     choiceNum = Integer.parseInt(choice);

     if (choiceNum == 1)
     {
        System.out.print("\n\n\tEnter New Appointment Date in mm/dd/yyyy format: ");
        date = stdin.nextLine();

        System.out.print("\n\n\tEnter New Appointment Description: ");
        descrip = stdin.nextLine();

        System.out.print("\n\n\tEnter Type (1 = Once, 2 = Daily, 3 = Monthly): ");
        type = stdin.nextInt();
        if (type == 1)
        {
          Once once = new Once(date, descrip);
           typeChose = "One-Time";
        }
        else if (type == 2)
        {
          Daily daily = new Daily(date, descrip);
           typeChose = "Daily";
        }
        else
        {
          Monthly monthly = new Monthly(date, descrip);
           typeChose = "Monthly";
        }
          String stringToAdd = "";
          stringToAdd = ("\n\n\tNew " + typeChose + " Appointment Added for " + date + "\n");
          list.add(stringToAdd);

        System.out.println(stringToAdd);
        System.out.println("\t============================\n");

     }

     if (choiceNum == 2)
     {
     System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
     String lowDate = stdin.nextLine();
     System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");
     String highDate = stdin.nextLine();

     for(int i = 0; i < list.size(); i++)
        {
         int dateSpot = list.get(i).indexOf(" ");
         if (list.get(i).compareTo(lowDate) <= 0 && list.get(i).compareTo(highDate) >= 0)
        {
           System.out.println(list.get(i));   
       }}
     }

     if (choiceNum == 3)
     {
       for(int i = 0; i < list.size(); i++)
       {
          System.out.println(list.get(i));     
       }
     }

  }while (choice != "quit");      
}
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:22:29.530

您需要在此语句之后添加对 nextLine() 的另一个调用：

```
type = stdin.nextInt();
// ED: stdin.nextLine(); 
```

这是因为，当您从 Scanner 获取一个 int 时，它不会消耗用户按 Enter 键时放在输入流中的 '\n' 字符。

因此，当再次调用 stdin.nextLine() 时，将返回 String "" （所有尚未处理到下一个 '\n' 字符），并且 Integer.parseInt 不知道如何处理它，所以你得到一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T12:56:15.807

用 if 语句包围代码以在尝试解析之前检查该值是否未退出。

# browser - 浏览器如何判断是下载还是显示

> ID：16096172
> 
> 赞同：3
> 
> 时间：2013-04-19T02:18:44.873
> 
> 标签：browser, http-headers

我有一个网络资源，它返回 json 内容`Content-Type:application/json`。通常内容直接显示在浏览器中，但有时不是，而是显示下载提示。

我知道有一个标题`Content-Disposition:inline/attachment`可以明确告诉浏览器是下载还是显示。但是如果我不指定这个标头，浏览器是如何决定的呢？它的策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:51:57.387

从 Mozilla 的[文件类型和下载操作](http://kb.mozillazine.org/File_types_and_download_actions)（强调我的）：

> 当您单击链接下载文件时，**MIME 类型决定了要采取的操作**。如果您看到“正在打开”对话框询问您是否要保存文件或使用指定的应用程序打开它，这通常意味着您的 Mozilla 应用程序**无法在内部处理 MIME 类型，没有安装和启用可以处理它的插件，您以前没有选择始终用于该类型文件的下载操作或帮助应用程序**。

浏览器预配置为处理图像等基本格式。插件（可能与浏览器捆绑在一起）添加了对各种常见文件类型（如 pdf）的处理。还可以有“帮助应用程序”，这意味着浏览器会自动下载文件并将其转发到应用程序（例如打开您的 torrent 客户端的 torrent 磁力链接）

其他一切，它会询问直到用户绑定默认操作（如果`Content-Type`是`application/octet-stream`，您不能设置默认操作）。其他浏览器的工作方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:38:00.747

`Content-Type`标题中指定了什么？如果浏览器不知道它是什么，它可能会默认`application/octet-stream`并提示下载。

[这是一个关于它的简短博客。](http://mattryall.net/blog/2008/03/default-content-type)

# svg - 如何将现有 SVG 元素作为节点使用 D3 强制布局

> ID：16096173
> 
> 赞同：3
> 
> 时间：2013-04-19T02:19:00.930
> 
> 标签：svg, d3.js, force-layout

我有一个 javascript 对象数组，其中每个对象都有 .ui 属性，该属性包含各种**现有的**SVG 形状/元素（内部包含其他元素的自包含“g”元素）。

我想将这些对象排列为 D3 中的力图布局。因此，我不想让 d3 创建圆圈（或其他任何东西），而是将我的 ui 对象之一分配给图形。

我为此创建了一个[简化的小提琴 << HERE >>](http://jsfiddle.net/guidoextras/ueMCa/6/)。预先存在且应成为图表一部分的对象是 3 个彩色矩形。在这个例子中，我没有做到这一点。d3 **append**命令仅可用于构造形状/元素，但不能附加已构造的形状/元素。我试图这样做，但它不能在 D3 中工作：

```
node.append( function(d) { d.ui.node(); }) ... 
```

...如前所述，这不起作用，因为 d3 不附加元素。

```
 var svgContainer = d3.select("#svgContainer");

// =============================================================    
// creates the SVG elements to be used ( 3 colored rectangles )
// =============================================================

var element0a = svgContainer.append("g").attr("transform","translate(100,100)");
var element0b = element0a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","red");

var element1a = svgContainer.append("g").attr("transform","translate(100,200)");
var element1b = element1a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","green");

var element2a = svgContainer.append("g").attr("transform","translate(100,300)");
var element2b = element2a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","blue");

// =============================================================
// fills up an object array that contains details plus the UI attribute
// =============================================================

var nodeArray = new Array();
nodeArray[0] = { id : "000", label : "label 000", ui : element0a };
nodeArray[1] = { id : "001", label : "label 001", ui : element1a };
nodeArray[2] = { id : "002", label : "label 002", ui : element2a };

// not interested in dealing with the edge/link right now, just empty
var linkArray = new Array();

// =============================================================
// D3 force layout stuff
// =============================================================

var force = self.force = d3.layout.force()
    .nodes(nodeArray)
    .links(linkArray)
    .gravity(.05)
    .distance(80)
    .charge(-100)
    .size([600, 600])
    .start();

var node = svgContainer.selectAll("g.node")
    .data(nodeArray)
    .enter().append("svg:g")
    .attr("class", "node")
    .call(force.drag);

// HERE (below) COMES THE ISSUE, where you see append("cicle") I want to append the nodeArray's ".ui" element. 

node.append("circle")          // <--- 
    .attr("class", "node")
    .attr("r",10)
    .attr("fill","orange")
    .call(force.drag);

force.on("tick", function() {
      node.attr("transform", function(d) {return "translate(" + d.x + "," + d.y + ")";});
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:49:21.887

根据[Lars Kotfoff](https://stackoverflow.com/users/1172002/lars-kotthoff)的建议 ：

[在这里](http://jsfiddle.net/guidoextras/8hANT/1/)工作小提琴

如果要绘制的元素已经存在，只需跳过**enter()** D3 阶段并根据元素的共同特征（例如类名）使用 select() 或 selectAll()。

这就是元素的创建方式（添加了一个特定的类以允许隔离选择）：

```
var element0a = svgContainer.append("g").attr("class","node").attr("transform","translate(100,100)");
var element0b = element0a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","red"); 
```

这是替换 enter() 阶段的代码的一部分

```
var node = svgContainer.selectAll("g.node")
    .data(nodeArray)
    .call(force.drag); 
```

这是被删除的

```
var node = svgContainer.selectAll("g.node")
    .data(nodeArray)
    .enter().append("svg:g")
    .attr("class", "node")
    .call(force.drag);

// HERE (below) COMES THE ISSUE, where you see append("cicle") I want to append the nodeArray's ".ui" element. 

node.append("circle")          // <--- 
    .attr("class", "node")
    .attr("r",10)
    .attr("fill","orange")
    .call(force.drag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:38:44.480

问题是您将元素附加`svgContainer`到创建它们，因此它们已经附加到某些东西。

我建议的解决方法是将元素属性存储在 json 文件中，然后从 json 中读取配置。

可能会有更优雅的东西。

# php - CakePHP 未定义索引错误

> ID：16096176
> 
> 赞同：1
> 
> 时间：2013-04-19T02:20:01.137
> 
> 标签：php, cakephp

我正在尝试访问已登录用户的电子邮件地址，并且我可以在除一个之外的所有控制器中成功完成此操作。

这是我得到的错误

```
Notice (8): Undefined index: User [APP/View/Layouts/default.ctp, line 37] 
```

这是相应的代码行（请记住，这适用于我所有的其他控制器）。

```
<center><font color="black"><td><?php echo $user['User']['email']; ?></td></text></center> 
```

这是 DemosController

```
<?php
// app/Controller/DemosController.php
class DemosController extends AppController {

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add','logout');

        $user = $this->Demo->read(null, $this->Auth->user('id'));  //this throws the error
        //$user = $this->Demo->User->read(null, $this->Auth->user('id'));  //Fatal error: Call to a member function read() on a non-object in
        $this->set('user', $user);

    }

    //display the knockout table
    public function index($article = null) {

    }

} 
```

我不需要此控制器的数据库中的表。它只是为了演示目的显示一个表格。我可以让它引用用户吗？

```
class Demo extends AppModel {
    public $name = 'User';         
} 
```

为什么我可以在除此之外的所有控制器中访问它？模型/表格情况是否导致错误？如果是这样，有没有办法禁用表的使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:38:12.123

你在这里有几个问题：

首先，当不使用表格时，将模型的`$useTable`属性设置为 false。其次，没有表，没有数据库调用将起作用（无论如何只需将示例数据插入表中，谁知道它是否是演示？）

仍然值得一提的`$this->Model->read()`是用于更新记录。将行更改为以下内容将允许 set 调用正常运行：

```
$this->Demo->find('first', array(
     'conditions' => array(
          'Demo.field' => $this->Auth->user('id')
 ))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:37:42.397

## 通过 AuthComponent 获取登录用户的属性

您**不必**通过“viewVar”将当前登录用户的信息传递给视图。要在控制器之外访问当前登录用户的属性，请使用`AuthComponent`

在您的视图或布局中，输出如下信息；

```
<p>The current users email is: <?php echo AuthComponent::user('email') ?></p>
<p>The current users id is: <?php echo AuthComponent::user('id') ?></p>
<p>And all properties of the user are:</p>
<pre><?php print_r(AuthComponent::user());?></pre> 
```

请参阅：[**访问已登录的用户**](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)

您可以从;中**删除**这些行`beforeFilter()`

```
$user = $this->Demo->read(null, $this->Auth->user('id'));  //this throws the error
//$user = $this->Demo->User->read(null, $this->Auth->user('id'));  //Fatal error: Call to a member function read() on a non-object in
$this->set('user', $user); 
```

# javascript - 如何有效地随机化所有相同浮点数的相对较小的数组以保留总和？

> ID：16096178
> 
> 赞同：3
> 
> 时间：2013-04-19T02:20:26.483
> 
> 标签：javascript, math

如何有效地随机化所有相同浮点数的相对较小的数组以保留总和？

例如：

我有一个相等的浮点数组：

```
[ 0.1, 0.1, 0.1, 0.1, 0.1 ] // sum === 0.5 
```

我想像这样随机化它：

```
[ 0.1, 0.2, 0.0, 0.15, 0.05 ] // sum === 0.5 
```

初始数组始终具有相同的值，但它可以在不同的范围内：

```
[ 3.56, 3.56, 3.56, 3.56, 3.56 ] 
```

我不知道这些初始数组最终的实际大小，但我猜它们的长度将在 50 到 100 个之间。

（仅供参考：这些是音符持续时间，如果算法是音乐的，则加分）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T02:44:43.170

1) 计算 0 到 1 之间的 n 个随机浮点数

2）计算这n个数字的总和。

3）您必须将总和除以自身并将其与您想要获得的总和相乘（在下面的结果中）。因此，如果您将 1) 中生成的 n 个数字中的每一个除以 2) 中计算的总和，然后将结果乘以结果总和，那么您将在结果中获得所需的随机数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T02:37:30.810

不是音乐，但：

1) 计算数组中所有值的总和。

2) 在 0 和 sum 之间生成 N-1 个点，其中 N 是数组中的条目数。

3) 将这些 N-1 个点从小到大排序，然后在左边增加 0 并在右边求和。基本上，想象一下你拿了一根`sum`长度的棒子，把它切成 N-1 个点。

4）对于现在N+1个点中的每个元素（不包括第一个），计算它与前一个点的差值。这些差异的总和仍然是`sum`- 您可以通过想象切碎的酒吧碎片是差异来向自己证明这一点。如果你在 0.2 和 0.7 处切割长度为 1 的条，那么你增加得到 0,0.2,0.7,1.0 并且差异是 0.2、0.5、0.3，总和为 1。

5) 随机打乱 4) 的输出（如果你需要实现的话，Fisher-Yates 打乱）

* * *

如果你想让它变得音乐化，你可能想要“离散化”第 2 步，我的意思是：

a) 将数组的第一个元素除以 2（称为 D）（例如 0.1/2 = 0.05）

b) 总和除以 D（称为 Sd）（例如 0.5/0.05 = 10）

c) 创建从 0 到 Sd 的随机数作为整数，然后将它们乘以 D

d) 现在从原始算法中的 3 继续

这只会给你半分音符。如果你使用 4 而不是 2，你会得到半四分音符，依此类推

# c - 为什么使用#define DEF ((unsigned) -1) 而不是#define 0xFFFFFFFF

> ID：16096179
> 
> 赞同：0
> 
> 时间：2013-04-19T02:20:37.903
> 
> 标签：c, c-preprocessor, unsigned

在**C**语言中，为什么要使用下面这行来定义一个所有位都设置为 1 的常量？

```
#define EXTENDED_MEM_END    ((unsigned) -1) 
```

而不是使用以下内容？：

```
#define EXTENDED_MEM_END    0xFFFFFFFF 
```

或者只是这个？：

```
#define EXTENDED_MEM_END    -1 
```

**它是否与可移植性（即避免警告）、非常具体的代码和/或其他东西有关？**

我怀疑，由于**C**代码将**EXTENDED_MEM_END**标识符替换为`((unsigned) -1)`，它实际上是一种使用正确/预期值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:29:48.533

```
#define EXTENDED_MEM_END    0xFFFFFFFF 
```

如果整数不是 32 位，则不正确；

```
#define EXTENDED_MEM_END    -1 
```

不是未签名的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:28:23.123

在 32 位机器上，尝试定义 64 个 1 位会溢出，并给出警告——但在 64 位机器上，仅定义 32 个 1 位会给出错误值。

`((unsigned)-1)`*在所有*情况下都会产生正确的结果（标准要求）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:00:50.323

或者，使用`UINT_MAX`from `<limits.h>`。这将是便携式的。其他替代方案在不同的架构`((unsigned)-1)`上失败（在非二进制补码架构上失败（并不是说你在实践中会遇到这个问题））或`0xffffffff`（在 64 位架构`0xffffffffffffffff`上失败）或（在 32 位架构上失败）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T04:12:59.963

对于 32 位操作系统，-1 与 0xFFFFFFFF 相同，但对于 64 位操作系统，0xFFFFFFFF 被视为 0x00000000FFFFFFFF，因此它的值不是 -1，而是一个高正值。

# java - JWPlayer 6 的主要和备用（RMTP 和 HTML5）

> ID：16096180
> 
> 赞同：1
> 
> 时间：2013-04-19T02:20:38.600
> 
> 标签：java, amazon-s3, jwplayer

我目前正在使用 JWplayer 6，我认为 JWPlayer 5 和 6 之间存在配置“差异”。

有谁知道如何为 JWPlayer 6 设置主要和后备？

我已经这样设置了我的脚本：

```
out.println("<div id=\"myElement\">Loading the player...</div>");
out.println("<script type=\"text/javascript\">");
out.println("jwplayer(\"myElement\").setup({");
out.println("sources:[");
out.println("{'file': \"rtmp://s2y3u5i4t1fkbz.cloudfront.net:1935/cfx/st/mp4:XXXXX.mp4\"},");
out.println("{'file': \"http://dkgitv33rxgy.cloudfront.net/XXXXX.mp4\"},");
out.println("],");
out.println("width: \"720\",");
out.println("height: \"480\"");
out.println("});");
out.println("</script>"); 
```

当我转到我的 PC 浏览器并检查我的网站时，它无法显示。但是，如果我使用我的 iPhone，它会显示。如果我注释掉 http，我的浏览器可以显示视频，但不能显示我的 iphone。如果我注释掉 rtmp，我的 iPhone 可以显示视频。但我需要流支持作为我的主要支持。

以前有人遇到过这个问题吗？

谢谢

编辑：在宽度 720 之前和 ] 之后使用 'primary':'flash' （右方括号）。它适用于 PC 和手持设备的流和 HTML，WOOHOO！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T15:36:59.043

Try this it works on JwPlayer 6.3.

```
 jwplayer("<?php echo $this->id?>").setup({

                autostart: 'true' ,
                flashplayer: "<?php echo CHtml::asset($this->_path.'/jwplayer.flash.swf')?>",
                width:<?php echo $this->width?>,
                height:<?php echo $this->height?>,
                playlist: [{
                    sources: [
                    {
                       //Desktop: Use RTMP protocol and played by flash.
                        file: "<?php echo $this->rtmpPath;?>"
                    },
                    {
                        //Mobile: Use HLS protocol and played by HTML5
                        file: "<?php echo $this->hlsPath;?>",
                    }
                    ]
                }],
                primary:"flash",
            }); 
```

Reference: [Fallback to direct download](https://stackoverflow.com/questions/16889633/fallback-to-direct-download)

# python - Python - 字符串

> ID：16096183
> 
> 赞同：2
> 
> 时间：2013-04-19T02:20:50.970
> 
> 标签：python, string, mirror

每个数字都应替换为拼写出来的名称（零、一、二、三、四、五、六、七、八、九），但我一直在我的新文件中得到这个：

```
zero0000000001one111111112222222222333three3333334444four4444455555five5555666666six666 
```

这是我的程序：

```
def numbers(fileName):
    #open the inputed file ,prompt for the file 
    inFile= open(fileName,'r') #this will open the function for writing and reading 
    outFile=open('converted.txt', 'w')
    for line in inFile:
        wordList=line.split()
        for word in wordList:
            if  word == '0':
                outFile.write("zero")
            else:
                outFile.write(word) 

            if word =="1":
                outFile.write("one")
            #else:
                #outFile.write(word)

            if word in wordList == "2":
                outFile.write("two")
            #else:
                #outFile.write(word)

            if word == ("3"):
                outFile.write("three")
            #else:
                #outFile.write(word)

            if word == ("4"):
                outFile.write("four")
            #else:
                #outFile.write(word)

            if word == ("5"):
                outFile.write("five")
            #else:
                #outFile.write(word)

            if word == ("6"):
                outFile.write("six")
            #else:
                #outFile.write(word)

            if word == ("7"):
                outFile.write(word)
            #else:
                #outFile.write(word)

            if word == ("8"):
                outFile,write(word)
            #else:
                #outFile.write(word)

            if word == ("9"):
                outFile.write(word)
            #else:
                #outFile.write(word)
    outFile.write(" ")
    outFile.write("\n")
    outFile.close()
    inFile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:26:58.710

这是你的问题

```
 for word in wordList:
        if  word == '0':
            outFile.write("zero")
        else:
            outFile.write(word) 
```

对于每个不是 '0' 的单词，你会输出 'else' 部分中的单词。因此，例如每个 1 都会`1`因为不存在而打印出来`0`，即使它后来打印出来`one`。

我将此问题称为“早期默认”问题，即您在第一次检查失败时执行默认操作。为了不遭受“早期默认”问题，请尽可能延迟执行默认操作。在这种情况下，您需要一个大的 if... else if 链，其中包含特殊单词（== "0" 到 =="9"）的所有可能结果，然后 else if 链的最后一个 else 将是写字的默认动作。

就像是

```
 if word == "0":
            outFile.write("zero")
        elif word == "1":
            outFile.write("one")
        elif word == "2":
            outFile.write("two")
...
        else:
            outFile.write(word) 
```

然而，一个更 Pythonic 的公式是使用一个列表：

```
numberWords = ["zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"] 
```

然后在 for 循环中执行此操作：

```
try:
    outFile.write(numberWords[int(word)]) # attempt to convert word to an int, then look in the list for its word
except ValueError: # if word was not a string version of an int
    outFile.write(word) 
```

这使您无需编写 huuuuuuuge if/elif/else 链，并且也更易于维护（例如，您可以一次对所有 numberWords 进行操作，例如将它们设为大写，或从文件中加载它们，或者。 ..)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T02:33:17.460

```
digit_names = {'1': 'one',
               '2': 'two',
               ...
               '9': 'ten'}

mystring = open('in.txt', 'r').read()
for d, n in digit_names.iteritems():
    mystring = mystring.replace(d, n)

open('converted.txt', 'w').write(mystring) 
```

这就是你需要的一切。对于 python3，使用 digit_names.items()，而不是 digit_names.iteritems()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T03:28:35.533

无需使用字典，因为可以通过 int(word) 访问名称列表

```
def numbers(fileName):
    #open the inputed file ,prompt for the file 
    inFile= open(fileName,'r') #this will open the function for writing and reading 
    outFile=open('converted.txt', 'w')
    for line in inFile:
        wordList=line.split()
        names = ['zero', 'one', 'two', 'three', 'four',
                 'five', 'six', 'seven', 'eight', 'nine']
        [outFile.write(names[int(word)]) for word in wordList]
    outFile.write(" ")
    outFile.write("\n")
    outFile.close()
    inFile.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T02:29:02.523

您的 if/else 块非常混乱。你应该去掉所有的`else`语句，并`elif`在第一个之后使用`if`，如下所示：

```
 for word in wordList:
        if  word == '0':
            outFile.write("zero")
        elif word =="1":
            outFile.write("one")
        elif word == "2": # note that what you had here was very bad: if word in wordList == "2":
            outFile.write("two")
        elif word == "3":
            outFile.write("three")
        elif word == "4":
            outFile.write("four")
        elif word == "5":
            outFile.write("five")
        elif word == "6":
            outFile.write("six")
        elif word == "7":
            outFile.write("seven")
        elif word == "8":
            outFile,write("eight")
        elif word == "9":
            outFile.write("nine")
        else:
            # If you want to leave any other character unchanged, then you say:
            outFile.write(word) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T02:29:06.870

将您的个别 if/else 语句更改为一个 if/elif/else 语句

```
if word == '1':
     outFile.write("one")
 elif word == '2':
      outFile.write("two")
 elif word == '3':
      outFile.write("three")
 else:
      outFile.write("four") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T02:32:58.343

如果您希望所有数字都拼出名称，那么您为什么使用

```
if word == "7":
    outFile.write(word) 
```

7,8,9？我认为那是错误

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T02:52:04.807

我将从用于将数字映射到其名称的字典开始，然后定义一个函数来获取数字的字符串表示形式并返回使用此映射扩展的字符串。

为了让它更灵活一点，我有一个标志（宽容）来过滤输出中的任何非数字，或者保留它们，另一个允许调用者提供他们自己的自定义分隔符。

```
 #!/usr/bin/python

    digit_names = {
        '0': 'zero',
        '1': 'one',
        '2': 'two',
        '3': 'three',
        '4': 'four',
        '5': 'five',
        '6': 'six',
        '7': 'seven',
        '8': 'eight',
        '9': 'nine'
        }

    def digit2name(num, tolerant=True, separator=''):
        '''Replace a number (string of digits) with an expansion into the
           mapping of each digit to its name.
        '''
        return separator.join([digit_names.get(x,(x,'')[tolerant]) for x in num])

        '''
        results = list()
        num = str(num)
        for digit in num:
            if tolerant:
                default=digit
            else:
                default=''
            results.append(digit_names.get(digit,digit))
        return separator.join(results)
        '''

    if __name__ == '__main__':
        import sys
        for each in sys.argv[1:]:
            print digit2name(each),
            print digit2name(each, False, '.')
            print 
```

我已经使用列表理解作为单行程序以及更易读和更明确的循环（我更喜欢）来完成此操作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-19T02:40:42.220

1.  首先构建一个字典来存储数字映射到它的名字

    ```
    digit_name = {
             '1': 'one',
             '2': 'two',
             '3': 'three',
             ...
             } 
    ```

2.  然后在写入文件时格式化

    ```
    for word in wordList:
        outFile.write(digit_name.get(word, word)) 
    ```

或者将输出存储在列表中，然后写入文件一次。

```
new_word_list = [digit_name.get(word, word) for word in wordlist] 
```

# java - 3个图像之间的Java切换

> ID：16096184
> 
> 赞同：0
> 
> 时间：2013-04-19T02:20:57.593
> 
> 标签：java, android

如果我想根据位置切换图像，我应该怎么做。

我有一个 for 循环，从 0 到任何数字，其想法是图像将根据值切换，

例如。

```
 on position 0, it should display image 'A'
    on position 1, it should display image 'B'
    on position 2, it should display image 'C'
    on position 3, it should display image 'A' again
    on position 4, it should display image 'B' again 
```

依此类推，总是在这 3 个图像之间按顺序切换

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:44:27.957

假设您的图像位于 drawble 文件夹中，您将把它们放在您活动的一些视图中。

```
int imagesRid = {R.id.imageA, R.id.imageB, R.id.imageC}
for(int i=0;i<anyNo;i++)
{
     view.setBrackground(context.getResources().getDrawable(imagesRid[i%imagesRid.lenght]))    

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:24:42.753

```
int count=1;
for(int i=0;i<anyNo;i++)
{
    switch(count)
     {
           case 1:
               //display A
                break; 
           case 2:
              //display B
               break; 

           case 3:
              //display C
              break; 

    }
      count++;

     if(count>3)
     count=1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:39:30.393

使用模块算术。为了更好地理解，您可以查看循环队列是如何实现的

```
0%3=0
1%3=1
2%3=2
3%3=0
4%3=1
5%3=5
6%3=0 
```

所以你可以看到模块 3 的数字在 0-2 的范围内，模块 4 的数字在 0-3 的范围内

# r - 如何使用 R 以编程方式提取/解压缩 .7z (7-zip) 文件

> ID：16096192
> 
> 赞同：34
> 
> 时间：2013-04-19T02:22:35.397
> 
> 标签：r, zip, unzip, 7zip, rar

我正在尝试自动提取一些用 7-zip 压缩的文件。我需要自动化这个过程，因为a）我想解锁多年的数据，b）我想与其他人分享我的代码并防止他们手动重复这个过程。

我的计算机上同时安装了 WinRAR 和 7-zip，我可以使用任何一个程序轻松地单独打开这些文件。

我环顾了`unzip` `untar`and`unz`命令，但我不相信它们中的任何一个都可以满足我的需求。

我对压缩一无所知，但如果它有什么不同的话：这些文件中的每一个都只包含*一个*文件，而且它*只是一个文本文件*。

我非常喜欢不需要用户安装其他软件（如 WinRAR 或 7-Zip）并使用 执行命令的解决方案`shell`，尽管我承认仅使用 R 和 CRAN 包可能无法完成此任务。我实际上相信`shell.exec`在这些带有附加参数的文件上运行可能会在安装了 WinRAR 的计算机上运行，​​但同样，如果可能的话，我想避免这种安装。:)

运行下面的代码将加载我要提取的文件——其中的 .7z 文件`files.data`是需要解锁的文件。

```
# create a temporary file and temporary directory, download the file, extract the file to the temporary directory
tf <- tempfile() ; td <- tempdir()
file.path <- "ftp://ftp.ibge.gov.br/Orcamentos_Familiares/Pesquisa_de_Orcamentos_Familiares_2008_2009/Microdados/Dados.zip"
download.file( file.path , tf , mode = "wb" )
files.data <- unzip( tf , exdir = td )

# how do i unzip ANY of these .7z files?
files.data 
```

谢谢！！！:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-05-15T20:58:00.883

这可以通过[`archive`包](https://github.com/jimhester/archive)来完成。

```
library(archive)
tf <- tempfile() ; td <- tempdir()
file.path <- "ftp://ftp.ibge.gov.br/Orcamentos_Familiares/Pesquisa_de_Orcamentos_Familiares_2008_2009/Microdados/Dados.zip"
download.file( file.path , tf , mode = "wb" )
archive(tf) 
```

见[https://github.com/jimhester/archive](https://github.com/jimhester/archive)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-19T06:39:49.563

如果`7z`路径中有可执行文件，则可以简单地使用`system`命令

`system('7z e -o <output_dir> <archive_name>')`

# ibm-mq - 我应该什么时候重置我的 MQ 通道？

> ID：16096199
> 
> 赞同：2
> 
> 时间：2013-04-19T02:23:12.310
> 
> 标签：ibm-mq, mq

我一直在研究通道状态的变幻莫测，它们如何到达这些状态以及如何使它们停止或启动。我现在已经有了相当扎实的理解，但是一位同事提出了频道重置的话题。

当我无法解释发生了什么时，我偶尔会这样做，但现在我对事情有了更好的理解，我不确定他在停止麻烦频道时“始终重置”的建议是否正确。

在线搜索信息，很明显，在重新创建通道时，很明显需要重置，但在这种情况下，如果东西刚刚中断——无论是队列管理器意外删除还是网络中断或类似的东西——重置是个好主意一般来说，还是我应该只在看到序列错误时才打扰，或者当我知道它应该启动时它拒绝启动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:35:44.840

仅供参考，如果您从通道的发送端重置，则可以将序列号设置为 1。接收端也将返回 1。QED :-)

如果您从通道的接收方重置，则必须使用发送方期望的序列号。

这些数字在双方的队列管理器错误日志中。

如果通道处于 RETRY 状态，它将在下一次重试时尝试使用新的序列号。如果您在发件人通道上使用默认重试属性，这可能需要 20 分钟。一种简单的解决方法是停止通道，然后立即重新启动它。

HTH，G.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T02:36:12.727

通道出现序列错误有几个原因：

1.  本地和远程 MCA 在批次上不同步。通常远程 MCA 提交了批处理，而本地 MCA 没有提交。如果您*知道*远程端交付了批次，`RESOLVE ACTION(COMMIT)`则在通道上发出 a ，否则发出`RESOLVE ACTION(COMMIT)`. 解决后，发出`RESET`。
2.  该通道指向一个新的 QMgr。也许在 DNS、电路或防火墙 NAT 的故障转移之后，现在将同名的不同 QMgr 附加到通道。这些应该是众所周知的，因为故障转移（希望）不会在没有一些警报的情况下发生。
3.  通道同步队列的内容有误。有时 QMgr 可能会导致这种情况，但这些问题在最近的版本中得到了解决（据我所知）。有时人们不小心弄乱了同步队列，通常是在频道尝试使用它时用锁浏览它。这有点难以解决，可能需要清除同步队列，但请先咨询 IBM 支持。

当通道由于故障转移等已知异常而不同步时，请继续并重置它。否则，建议您找出它不同步的原因。您可能会重置它只是为了让它启动并运行，但希望在您保存`<QMGR>/errors/AMQERR*.LOG`文件和任何 FDC 之前不要这样做，以便您可以诊断原因。

# java - 使用 Datastax API（使用新的二进制协议）Upsert/Read into/Read into/from Cassandra database

> ID：16096207
> 
> 赞同：0
> 
> 时间：2013-04-19T02:23:45.857
> 
> 标签：java, cassandra, cql, cql3, datastax-java-driver

我已经开始使用`Cassandra database`. 我打算使用[Datastax API](https://github.com/datastax/java-driver)进入`upsert/read`/从`Cassandra database`. 我对此完全陌生`Datastax API`（它使用新的二进制协议），我也找不到很多文档，其中有一些适当的例子。

```
create column family profile
    with key_validation_class = 'UTF8Type'
    and comparator = 'UTF8Type'
    and default_validation_class = 'UTF8Type'
    and column_metadata = [
      {column_name : crd, validation_class : 'DateType'}
      {column_name : lmd, validation_class : 'DateType'}
      {column_name : account, validation_class : 'UTF8Type'}
      {column_name : advertising, validation_class : 'UTF8Type'}
      {column_name : behavior, validation_class : 'UTF8Type'}
      {column_name : info, validation_class : 'UTF8Type'}
      ]; 
```

现在下面是`Singleton class`我为连接到 Cassandra 数据库而创建的，`Datastax API`它使用新的二进制协议-

```
public class CassandraDatastaxConnection {

    private static CassandraDatastaxConnection _instance;
    protected static Cluster cluster;
    protected static Session session;

    public static synchronized CassandraDatastaxConnection getInstance() {
        if (_instance == null) {
            _instance = new CassandraDatastaxConnection();
        }
        return _instance;
    }

    /**
     * Creating Cassandra connection using Datastax API
     *
     */
    private CassandraDatastaxConnection() {

        try{
            cluster = Cluster.builder().addContactPoint("localhost").build();
            session = cluster.connect("my_keyspace");           
        } catch (NoHostAvailableException e) {
            throw new RuntimeException(e);
        }
    }

    public static Cluster getCluster() {
        return cluster;
    }

    public static Session getSession() {
        return session;
    }
} 
```

**第一个问题**- 让我知道在`singleton class`使用使用新二进制协议的 Datastax API 连接到 Cassandra 数据库时是否遗漏了上述任何内容。

**第二个问题**-现在我正在尝试`upsert and read data`进入/退出 Cassandra 数据库-

这些是我在 DAO 中使用的方法，它们将使用上面的 Singleton 类-

```
public Map<String, String> getColumnNames(final String userId, final Collection<String> columnNames) {

    //I am not sure what I am supposed to do here?
    //Given a userId, I need to retrieve those columnNames from the Cassandra database
    //And then put it in the map with column name and its value and then finally return the map

    Map<String, String> attributes = new ConcurrentHashMap<String, String>();

    for(String col : columnNames ) {
        attributes.put(col, colValue);
    }

    return attributes;
}

/**
 * Performs an upsert of the specified attributes for the specified id.
 */
public void upsertAttributes(final String userId, final Map<String, String> columnNameAndValue) {

    //I am not sure what I am supposed to do here to upsert the data in Cassandra database.
    //Given a userId, I need to upsert the columns values into Cassandra database.
    //columnNameAndValue is the map which will have column name as the key and corresponding column value as the value.

} 
```

谁能帮我这个？我对这个使用新二进制协议的 Datastax API 完全陌生，所以在这方面有很多问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:34:37.487

在您的 cassandra.yaml 文件中查找标签**start_native_transport**，默认情况下禁用它，启用它。

使用 Datastax Java 驱动程序与 jdbc 驱动程序非常相似。

**插入代码**

```
 String query = "insert into test(key,col1,col2) values('1','value1','value2')";
 session.execute(query); 
```

**读卡桑德拉**

```
 String query="select * from test;";
 ResultSet result = session.execute(query);
 for (Row rows: result){
     System.out.println(rows.getString("key"));
 } 
```

# mysql - 协助处理复杂的 MySQL SQL 查询

> ID：16096210
> 
> 赞同：0
> 
> 时间：2013-04-19T02:24:19.700
> 
> 标签：mysql, sql

我希望这是寻求帮助的适当论坛。我有一个 SQL 查询 (MySQL)，它没有在日期范围内（两个日期之间）返回正确的记录。我很高兴回答与查询有关的问题，但是如果有人可以提出建议或更正 SQL 查询，那将是一个很好的学习练习。谢谢你。

```
$raw_query = sprintf("SELECT
swtickets.ticketid AS `Ticket ID`,
swtickettimetracks.tickettimetrackid AS `Track ID`,
swtickets.ticketmaskid AS `TicketMASK`,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Member Company'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid DESC
    LIMIT 1
) AS MemberCompany,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Member Name'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid DESC
    LIMIT 1
) AS MemberName,
(
    SELECT
        swcustomfieldvalues.fieldvalue
    FROM
        swcustomfieldvalues,
        swcustomfields
    WHERE
        swcustomfieldvalues.customfieldid = swcustomfields.customfieldid
    AND swtickets.ticketid = swcustomfieldvalues.typeid
    AND swcustomfields.title = 'Chargeable'
    AND 
        swcustomfieldvalues.fieldvalue = '40'
    ORDER BY
        swcustomfieldvalues.customfieldvalueid ASC
    LIMIT 1
) AS `Chg`,
swtickets.`subject` AS `Subject`,
swtickets.departmenttitle AS Category,
FROM_UNIXTIME(
    swtickettimetracks.workdateline
) AS `workDateline`,
FROM_UNIXTIME(
    swtickettimetracks.dateline
) AS `dateline`,
swtickettimetracks.timespent AS `Time Spent`,
swtickets.timeworked AS `Time Worked`
    FROM
swtickets
    INNER JOIN swusers ON swtickets.userid = swusers.userid
    INNER JOIN swuserorganizations ON swuserorganizations.userorganizationid = swusers.userorganizationid
    INNER JOIN swtickettimetracks ON swtickettimetracks.ticketid = swtickets.ticketid
    WHERE
    swuserorganizations.organizationname = '%s'
    AND (
    swtickets.ticketstatustitle = 'Closed'
OR swtickets.ticketstatustitle = 'Completed'
    )

    AND FROM_UNIXTIME(`workDateline`) >= '%s' AND FROM_UNIXTIME(`workDateline`) <= '%s'

    ORDER BY `Ticket ID`,`Track ID`",
        $userOrganization,
        $startDate,
        $endDate
    ); 
```

正如我所提到的，查询有效 - 但是它不会在两个日期之间正确返回记录。

但是，如果我对数据库运行这个简单的查询：

```
SELECT swtickettimetracks.tickettimetrackid, 
swtickettimetracks.ticketid, 
swtickettimetracks.dateline, 
swtickettimetracks.timespent, 
swtickettimetracks.timebillable,
    FROM_UNIXTIME(swtickettimetracks.workdateline)

    FROM swtickettimetracks

    WHERE FROM_UNIXTIME(swtickettimetracks.workdateline) >= '2013-04-16' AND FROM_UNIXTIME(swtickettimetracks.workdateline) <= '2013-04-18' 
```

我得到了正确的日期范围返回。帮助？谢谢你的期待。爱德华。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:52:51.657

除非你想得太多，否则一切都在你不同的查询 WHERE 子句中......

您返回错误结果的复杂查询有

```
 (join conditions between other tables)
  AND swuserorganizations.organizationname = '%s'
  AND ( swtickets.ticketstatustitle = 'Closed'
     OR swtickets.ticketstatustitle = 'Completed' )
  AND FROM_UNIXTIME(`workDateline`) >= '%s' 
  AND FROM_UNIXTIME(`workDateline`) <= '%s' 
```

您的其他查询有

```
FROM swtickettimetracks
WHERE FROM_UNIXTIME(swtickettimetracks.workdateline) >= '2013-04-16' 
  AND FROM_UNIXTIME(swtickettimetracks.workdateline) <= '2013-04-18' 
```

所以我会考虑一些事情。第一个哪里有

FROM_UNIXTIME >= '%s' 和 FROM_UNIXTIME <= '%s'

您确定 '%s' 值的格式正确以匹配 '2013-04-16' 和 '2013-04-18' 格式示例吗？

但更重要的是，您的第一个查询使用相同的日期范围（如果正确），但也只获取特定组织名称和（已关闭或已完成）记录的那些。那么，如果第二个查询返回 100 条记录，但主查询只返回 70 条，那么其他 30 条是不是已关闭/已完成，或者是不同的组织？此外，如果连接表没有匹配的 ID，则会阻止返回具有无效 ID 的那些。确认这一点的唯一方法是在这些表上更改为 LEFT-JOIN 语法并查看结果。

# python - 烧瓶中的自定义装饰器不起作用？

> ID：16096211
> 
> 赞同：6
> 
> 时间：2013-04-19T02:24:22.617
> 
> 标签：python, flask, decorator

我有以下代码：

```
import datetime
from flask.app import Flask

app = Flask(__name__)
app.config.from_object(__name__)
app.debug = True

def track_time_spent(name):
  def decorator(f):
    def wrapped(*args, **kwargs):
      start = datetime.datetime.now()
      ret = f(*args, **kwargs)
      delta = datetime.datetime.now() - start
      print name, "took", delta.total_seconds(), "seconds"
      return ret
    return wrapped
  return decorator

@app.route('/foo')
@track_time_spent('foo')
def foo():
  print "foo"
  return "foo"

@app.route('/bar')
@track_time_spent('bar')
def bar():
  print "bar"
  return "bar" 
```

我无法让 foo 返回“foo”：

```
$ curl localhost:8888/foo
bar

(flask window) 
bar
bar took 8.2e-05 seconds
127.0.0.1 - - [18/Apr/2013 19:21:31] "GET /foo HTTP/1.1" 200 -

$ curl localhost:8888/bar
bar

(flask window)
bar
bar took 3.5e-05 seconds
127.0.0.1 - - [18/Apr/2013 19:21:35] "GET /bar HTTP/1.1" 200 - 
```

这是怎么回事？为什么我的装饰器不起作用？

**编辑**

我不认为你们似乎能够看到问题所在。

当我有`@app.route`before`@track_time_spent`时，**两种**方法都返回 bar。这里的错误是调用 localhost:8888/foo 会导致`bar`http 响应和 print 函数。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T02:42:00.097

当您切换装饰器的顺序时，其他答案似乎丢失了“bar”作为来自“/foo”的响应。您必须`@wraps`在此处使用，除非您手动更新`__name__`、`__module__`等。Flask 使用您的方法有点像单例，并且将您的装饰器视为`wrapped()`方法，而不是您实际包装的方法。因此，您的路线将继续被最后一种使用装饰器的方法覆盖。

```
import datetime
from functools import wraps

from flask.app import Flask

app = Flask(__name__)
app.config.from_object(__name__)
app.debug = True

def track_time_spent(name):
    def decorator(f):
        @wraps(f)
        def wrapped(*args, **kwargs):
            start = datetime.datetime.now()
            ret = f(*args, **kwargs)
            delta = datetime.datetime.now() - start
            print name, "took", delta.total_seconds(), "seconds"
            return ret
        return wrapped
    return decorator

@app.route('/foo')
@track_time_spent('foo')
def foo():
    print "foo"
    return "foo"

@app.route('/bar')
@track_time_spent('bar')
def bar():
    print "bar"
    return "bar"

app.run(host='0.0.0.0', port=8888) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T02:36:27.373

Flask 的`route`函数是一个注册函数，因为您调用它是因为它的副作用 - 它会为端点注册您的视图函数。但是，您只注册了视图函数，而不是*装饰*视图函数。只需切换装饰器的顺序即可注册“时间跟踪”功能。

此外，您可以使用@app.before_request 和@app.teardown_request-registered 函数来更可靠地跟踪时间（考虑渲染模板所花费的时间等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:28:50.770

你为什么说你的装饰器不工作？

在您的第二个示例中，装饰器正在运行，这样一个简单的函数将在 0.035 毫秒内执行是现实的（3.5e-05 是一种表示法，表示 3.5 乘以 10 的 -5 次方）。

* * *

作为参考，您需要颠倒两个装饰器的顺序的原因是因为`app.route`注册了它正在传递的函数。

因此，您需要将装饰函数传递给它，因此需要传递顺序。

# c# - 如何在 Windows 上使用 Xamarin Studio 开发 iOS 应用程序？

> ID：16096218
> 
> 赞同：21
> 
> 时间：2013-04-19T02:25:30.390
> 
> 标签：c#, ios, xamarin, xamarin.ios, xamarin-studio

我正在评估不包括 VS 集成的 Xamarin Studio 独立许可证 - 如果我错了，请纠正我。但是我想知道是否可以使用 Xamarin Studio 进行 iOS 开发？我对 Xamarin Evolve 上宣布的 iOS 设计器的新功能非常感兴趣，理想情况下它也应该可以在 Windows 上实现。

如果答案是肯定的，怎么做？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T22:51:04.410

目前无法在 Windows 上使用 Xamarin Studio 为 iOS 进行开发。

如果要使用 Windows，可以使用 Visual Studio。

如果要使用 Xamarin Studio，可以在 Mac 上进行。

请注意，[即使您使用的是 Visual Studio](http://docs.xamarin.com/guides/ios/getting_started/installation/windows) ，您也总是需要 Mac 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-20T22:24:18.443

虽然没有具体回答这个问题，但应该注意的是，可以使用连接的 Mac 作为构建主机在**Visual Studios中为 iOS 进行开发。**这台连接的 Mac 可以通过网络连接，甚至可以是从您的 Windows 机器上运行的**虚拟机。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T04:12:52.017

我们只能在 Mac OS 中使用 xamarin studio。如果你想在 Windows 中使用 xamarin，你需要从 xamarin.com 下载 xamarin 插件到 Visual Studio。此外，您必须需要 Mac Os 在 Windows 上虚拟运行以进行调试和查看输出。用户界面设计应该只在 Mac OS Xcode SDK 上执行。所以只有我们需要 Windows 上的 Mac OS 虚拟机。在具有 .xib 文件（即 Xcode Interface builder）的 Visual Studio IOS 项目文件中，在该文件中，我们只需要在 Mac OS 上使用 xcode 设计用户界面配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-11T18:25:04.150

您可以使用***Mac build Host***，但您也需要***联网的 mac***进行开发和调试。

或者您可以使用***[Xamarin Live Player](https://arstechnica.com/information-technology/2017/05/xamarin-live-player-almost-takes-the-mac-out-of-ios-development/)***，您可以使用它在 Windows 中完全***调试、开发和部署***应用程序，无需任何 Apple 系统的帮助，但要签署应用程序并将其发布到应用商店，您将需要 Apple 系统

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T12:45:08.620

目前**无法**在 Windows 上运行 Apple iOS 模拟器。

请参阅在***Xamarin 开发人员文档***[中在 Windows 上安装 Xamarin.iOS 的](https://developer.xamarin.com/guides/ios/getting_started/installation/windows/)url 上给出的官方文档，其中说：-

 ***Xamarion.iOS for Visual Studio 目前无法完成一些任务，例如 Windows 上没有 iOS 模拟器 – iOS 模拟器在 Mac OS X 上运行，因此在模拟器上测试时需要切换到 Mac 的屏幕**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-27T07:03:16.180

您可以在 Windows**`iOS`**中从**Visual Studio**编写整个应用程序。

当涉及到应用程序的执行时，你必须有 MAC 机器。**您可以通过Mac build Host**将您的 MAC 连接到网络上的 windows ，以便在 windows 中运行、调试您的应用程序。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-03-25T07:21:17.677

[http://docs.xamarin.com/guides/ios/getting_started/introduction_to_xamarin_ios_for_visual_studio/](http://docs.xamarin.com/guides/ios/getting_started/introduction_to_xamarin_ios_for_visual_studio/)说

> Xamarin iOS for Visual Studio 允许在 Windows 计算机上编写和测试 iOS 应用程序，并使用联网的 Mac 提供构建和部署服务。

所以我认为你可以进行开发和测试（调试？）但不能构建或部署。CMIIW。*

# c - 初始化 Valgrind 错误

> ID：16096219
> 
> 赞同：0
> 
> 时间：2013-04-19T02:25:30.437
> 
> 标签：c, data-structures, hash, initialization, valgrind

该函数是哈希表的一部分。我正在传递一个要搜索的哈希列表和一个键。

```
int HashSearch (Hash_list h, char* key)
{
    struct ent *x = (struct ent *)malloc(10*sizeof(struct ent));
    for (x = h->table[hash(key, h->size)]; x!=0; x=x->next) {
        if (strcmp(x->pos, key)==0) {
            return x->num;
        }
    }
    return -1;
} 
```

不幸的是，当我尝试运行它时，valgrind 不断给我错误

```
==1741== Conditional jump or move depends on uninitialised value(s)
==1741==    at 0x4018DE: HashSearch (Hash.c:81)
==1741==    by 0x400FA7: function (Nine13.c:181)
==1741==    by 0x4009D8: main (Nine13.c:54)
==1741== 
==1743== Conditional jump or move depends on uninitialised value(s)
==1743==    at 0x4018DE: HashSearch (Hash.c:81)
==1743==    by 0x400FA7: function (Nine13.c:181)
==1743==    by 0x4009D8: main (Nine13.c:54)
==1743== 
```

（第 81 行是以“for”开头的代码行）。

我觉得我已经初始化了`struct ent`传入的哈希列表和哈希列表。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:19:27.443

基于[this other question](https://stackoverflow.com/questions/16098577/c-how-to-check-if-a-structure-is-initialized)，问题似乎确实是并非所有条目`h->table`都已初始化。请注意，虽然使用`calloc`or `memset`on`table`很有可能解决问题，但从技术上讲，它是不可移植的。虽然`0`保证评估等于空指针，但不保证位模式都是`0`s。此外，正如在另一个线程和我上面的评论中指出的那样，对于复杂的数据类型，您通常需要一些其他“空”值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:13:56.200

从您对我们评论的回复来看，您的问题似乎在函数之外，并且函数中使用的项目之一未正确初始化。除此之外，您确实有内存泄漏，在这段代码中：

```
struct ent *x = (struct ent *)malloc(10*sizeof(struct ent));
           ^^
  for (x = h->table[hash(key, h->size)]; x!=0; x=x->next) {
       ^^^^^ 
```

您正在分配内存`x`，然后立即`x`在`for`循环中重新分配，可能这就是您要执行的操作：

```
struct ent *x ;
  for (x = h->table[hash(key, h->size)]; x!=0; x=x->next) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:04:28.573

用于`memset()`清除内存或使用该功能`calloc()`代替`malloc()`。

# ios - 下面提到的 NSStrings 分配的保留计数是多少

> ID：16096220
> 
> 赞同：0
> 
> 时间：2013-04-19T02:26:06.597
> 
> 标签：ios, objective-c, nsstring, release

在这里，我以十种不同的方式分配`NSString`变量，我想知道所有变量的保留计数。

```
@interface SomeClass : NSObject 
{ 
   NSString *str1; 
   NSString *str2;
} 
@property (nonatomic, retain) NSString* str1;
@property (nonatomic, copy) NSString * str2; 

 - str1 =@"hello";

 - self.str1 = @"hello";

 - str1 = [[NSString alloc]init];

 - self.str4 = [[NSString alloc]init];

 - str1 = [[[NSString alloc]init]autorelease];

 - self.str1 = [[[NSString alloc]init]autorelease];

 - str1 = [[NSString alloc]initWithString:@"hello"];

 - self.str1 = [[NSString alloc]initWithString:@"hello"];

 - str1 = [[[NSString alloc]initWithString:@"hello"]autorelease];

 - self.str1 = [[[NSString alloc]initWithString:@"hello"]autorelease]; 
```

`NSString`上面提到的分配的保留计数是多少？我怎么知道它们的保留计数对于所有这些保留计数都不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:50:30.917

虽然这看起来像是一项家庭作业，但您可以调用`retainCount`每个字符串以获得实际值的近似值。您绝对不应该将此方法用于生产应用程序中的任何逻辑（请参阅[http://whentouseretaincount.com](http://whentouseretaincount.com)）！该文档指出：

> **特别注意事项**
> 
> 这种方法在调试内存管理问题时没有任何价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T02:50:43.800

我假设它们是在一些 SomeClass 方法中访问的。变体：

```
// replace str1 with str2(copy), retain count will remain the same
str1 = @"hello";
self.str1 = @"hello"
str1 = [[NSString alloc]initWithString:@"hello"];
self.str1 = [[NSString alloc]initWithString:@"hello"];
str1 = [[[NSString alloc]initWithString:@"hello"]autorelease];
self.str1 = [[[NSString alloc]initWithString:@"hello"]autorelease]; 
```

在这里你会得到一个巨大的值，比如 UINT_MAX，编译器会优化你的代码（你传递文字值，NSString 是不可变的）并且这些对象将是不可释放的。

```
self.str1 = [[NSString alloc] initWithFormat:@"a string %d", 5]; // with autorelease or not - the same 
```

在这里，您最终会得到释放计数 = 2，分配字符串 +1，分配保留属性 +1 = 2。

```
self.str2 = [[NSString alloc] initWithFormat:@"a string %d", 5]; // with autorelease or not - the same 
```

在这里，您最终会得到一个发布计数 = 1，分配字符串 +1，分配一个副本属性，从而创建一个已创建字符串 = 1 的副本。

在所有其他情况下，您最终会得到释放计数 = 1，自动释放不会增加保留计数，它只是在池耗尽时将其减 1。

只记得：

1.  不要依赖retainCount，
2.  当你通过 alloc、new、copy、mutable 拷贝创建对象时——释放它是你的责任。如果您使用 [NSString string] 之类的对象创建对象，它将被自动释放。
3.  保留属性保留对象，复制属性复制对象，属性通常通过点表示法（self.property 等）使用（还有 set%Property% 和 %property% 方法合成，所以 self.property = ... （通常）与 [self setProperty:...] 相同）
4.  是时候转移到 ARC 了。因此，如果可以的话，您应该这样做。

# python - Python 守护进程关闭问题的调试技术

> ID：16096223
> 
> 赞同：1
> 
> 时间：2013-04-19T02:26:25.620
> 
> 标签：python, multithreading, daemon

我正在用 Python 线程（包括守护进程）做一些棘手的事情。

我在一些测试中遇到间歇性错误：

```
Exception in thread myconsumerthread (most likely raised during interpreter shutdown): 
```

请注意，没有提供堆栈跟踪/异常详细信息。

仔细检查我自己的代码并没有帮助，但我对调试的下一步有点茫然。**我可以使用哪些调试技术来了解更多关于关闭期间哪些异常可能会降低运行时的信息？**

印刷精美：

*   Windows、CPython、2.7.2 - 在 Ubuntu 上不可复制。
*   这个问题大约有 3% 的时间发生 - 如此可重现，只是不可靠。
*   myconsumerthread 中的代码有一个包罗万象的异常处理程序，它尝试将异常名称写入`sys.stderr`. （可能`sys`已经关闭？）
*   我*怀疑*这个问题与快速关闭守护线程有关；在他们完全初始化之前。[这](http://bugs.python.org/issue14623)方面的东西，但我几乎没有证据——当然不足以指向 Python 错误。
*   哈，我发现了一种新症状，标志着我陷入精神错乱的转折点！
    *   如果我`import time`在我的*测试工具*（不是实时代码）中，并且**从不使用它**，频率会下降到大约 0.5%。
    *   如果我`import turtle`在我的测试工具中（我发誓，我的代码中没有海龟图形；我选择了这个作为我能快速找到的最不相关的库）异常开始在不同的线程中被捕获，它发生在*大约三分之一*的运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:46:58.607

我曾多次遇到同样的错误。我正在尝试查找/生成一个显示确切消息的示例。

在那之前，如果我没有记错的话，这些都是我关注的领域。

*   寻找在守护线程之外移除或关闭的端口、文件、队列等。
*   仔细检查守护线程中的阻塞调用。IE a `Queue.get(block=True)`, `pyserial.read()`- 超时=无

在深入挖掘之后，我看到出现与 Queue 相关的相同类型的错误，[请参见此处的评论](https://stackoverflow.com/a/5723933/157744)。

我觉得奇怪的是它没有显示回溯。您可能会尝试注释掉 catch-all except 并让 Python 将其发送到 std.error。希望那时你将能够看到你正在死去的东西。

**更新**
我知道我以前见过这个问题......下面你会找到一个产生该错误的例子（实际上有很多）。请注意，也没有其他回溯消息...为了完整起见，在您看到错误消息后，取消注释这些`queue.get`行并注释掉`time.sleep`s。错误应该消失。 **再次重新运行后，错误不再出现...这与您在零星故障率中看到的一致...您可能需要运行几次才能看到错误。**

如果阻塞 IO，我通常使用`time.sleep(x)`限制线程，例如`get()`并且`read()`不提供超时方法**或**没有阻塞调用要使用（例如用户界面刷新）。

`time.sleep()`话虽如此，我相信在等待呼叫时线程被关闭是有问题的。我相信这个调用是每次都让我感到困惑的原因，但我不知道是什么在`sleep`方法内部导致了它。据我所知，还有其他阻塞调用会显示相同的行为。

```
import time
import Queue
from threading import Thread

SLAVE_CNT = 50
OWNER_CNT = 10
MASTER_CNT = 2

class ThreadHungry(object):
    def __init__(self):
        self.rx_queue = Queue.Queue()

    def start(self):
        print "Adding Masters..."
        for x in range(MASTER_CNT):
            self.owners = []
            print "Starting slave owners..."
            for y in range(OWNER_CNT):
                owner = Thread(target=self.__owner_action)
                owner.daemon = True
                owner.start()
                self.owners.append(owner)

    def __owner_action(self):
        self.slaves = []
        print "\tStarting slaves..."
        for x in range(SLAVE_CNT):
            slave = Thread(target=self.__slave_action)
            slave.daemon = True
            slave.start()
            self.slaves.append(slave)

        while(1):
            time.sleep(1)
            #self.rx_queue.get(block=True)

    def __slave_action(self):
        while(1):
            time.sleep(1)
            #self.rx_queue.get(block=True)

if __name__ == "__main__":
    c = ThreadHungry()
    c.start()

    # Stop the threads abruptly after 5 seconds
    time.sleep(5) 
```

# c# - Ninject 可以使用匿名委托（func）作为 ConstructorArgument 吗？

> ID：16096229
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:26:51.383
> 
> 标签：c#, ninject, func, constructor-injection

我有一个存储库抽象类，它封装了几乎所有的 CRUD 功能：

```
public abstract class DataRepository<T> : IRepository<T>
    where T : class
{
    public DataContext Context { get; private set; }
    public TransactionScope Transaction { get; private set; }

    /// <summary>
    /// A <see cref="bool"/> function that compares the keys for fetching a single item, for example: 
    /// return item1.Id == item2.Id (as an anonymous delegate).
    /// </summary>
    public Func<T, T, bool> KeyCompare { get; private set; }

    /// <summary>
    /// Creates a new data repository.
    /// </summary>
    /// <param name="context"></param>
    /// <param name="scope"></param>
    /// <param name="keyCompare">
    /// A <see cref="bool"/> function that compares the keys for fetching a single item, for example: 
    /// return item1.Id == item2.Id (as an anonymous delegate).
    /// </param>
    public DataRepository(DataContext context, TransactionScope scope, Func<T, T, bool> keyCompare)
    {
        Context = context;
        Transaction = scope;
        KeyCompare = keyCompare;
    }

    public virtual T Item(T item)
    {
        return Items().SingleOrDefault(e => KeyCompare(e, item));
    }

    public virtual IEnumerable<T> Items()
    {
        return DataTable.AsEnumerable();
    }

    protected virtual Table<T> DataTable { get { return Context.GetTable<T>(); } }

    /// <summary>
    /// A method that updates the non-key fields of an existing entity with those of specified <see cref="item"/>.
    /// Called by the <see cref="Save"/> method.
    /// </summary>
    /// <param name="existing">The existing record to update.</param>
    /// <param name="item">A <see cref="T"/> object containing the values to update <see cref="existing"/> object with.</param>
    /// <returns></returns>
    protected abstract void UpdateExisting(T existing, T item);

    /// <summary>
    /// A method that updates an existing item or creates a new one, as needed.
    /// </summary>
    /// <param name="item">The entity containing the values to be saved.</param>
    public virtual void Save(T item)
    {
        var existing = Item(item);
        if (existing != null)
        {
            UpdateExisting(existing, item);
        }
        else
        {
            DataTable.InsertOnSubmit(item);
        }

        Context.SubmitChanges();
    }

    /// <summary>
    /// A method that saves all specified items (creates new, updates existing).
    /// </summary>
    /// <param name="items">The entities to be saved.</param>
    public virtual void Save(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            Save(item);
        }
    }

    /// <summary>
    /// A method that deletes specified item.
    /// </summary>
    /// <param name="item"></param>
    public virtual void Delete(T item)
    {
        var existing = Item(item);
        if (existing != null)
        {
            DataTable.DeleteOnSubmit(existing);
        }

        Context.SubmitChanges();
    }

    public virtual void Delete(IEnumerable<T> items)
    {
        var selection = Items().Where(e => items.Any(item => KeyCompare(e, item)));
        DataTable.DeleteAllOnSubmit(selection);

        Context.SubmitChanges();
    }
} 
```

该`KeyCompare`属性在派生类中像这样使用，以便基类知道如何隔离存储库中的单个项目（并非所有“实体”都具有“Id”属性，并且某些键跨越多个列 - 此解决方案试图解决该特定点）：

```
 public AuthInfoRepository(DataContext context, TransactionScope scope)
        : base(context, scope, (item1, item2) => { return item1.Id == item2.Id;})
    { } 
```

该`KeyCompare`属性实际上是允许派生类仅实现该`UpdateExisting`方法的基石，如下所示：

```
 protected override void UpdateExisting(AuthInfo existing, AuthInfo item)
    {
        existing.AuthId = item.AuthId;
        existing.ActiveDirectoryGroup = item.ActiveDirectoryGroup;
    } 
```

其余的（实际的 CRUD）全部由基类处理。有了这个抽象存储库，我已经在几分钟甚至几秒钟内实现了具体的存储库，只编写了特定于每个实现的代码。干我渴了。

`DataRepository<T>`处理 SQL Server，所以我需要另一个模拟实现，我已经调用它`ListRepository<T>`并且做几乎完全相同的事情（除了`Context`和`Transaction`属性都 return `null`）。我认为构造函数的签名就是我需要在这里发布的全部内容：

```
public ListRepository(IEnumerable<T> items, Func<T, T, bool> keyCompare) 
```

所以现在我已经准备好进行测试了，我想使用 Ninject 作为我的 IoC 容器。我的问题是我似乎无法弄清楚如何将匿名委托作为`ConstructorArgument`：

```
Bind<IRepository<AuthInfo>>().To<ListRepository<AuthInfo>>()
                             .WithConstructorArgument("items", _mockAuthInfo)
                             .WithConstructorArgument("keyCompare", ??????); 
```

我正在尝试做的事情是可行的，还是过于复杂？我不会问它是否是好/干净的代码，但欢迎在这里提出建设性意见：

[https://codereview.stackexchange.com/questions/25250/code-review-for-an-abstract-repository-implementation](https://codereview.stackexchange.com/questions/25250/code-review-for-an-abstract-repository-implementation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:36:33.730

啊。我讨厌这种情况发生（即在发布后几分钟找到答案）

我所需要的只是一个明确的演员表：

`.WithConstructorArgument("keyCompare", (Func<AuthInfo, AuthInfo, bool>)((item1, item2) => item1.Id == item2.Id));`

# php - 用于 POS 打印机的 php 中的页面剪切命令

> ID：16096233
> 
> 赞同：0
> 
> 时间：2013-04-19T02:27:15.607
> 
> 标签：php, javascript

我正在做一个项目，我需要使用 POS 打印机来生成收据。客户要求在打印完成后自动裁切纸张的新请求。因此，如果他需要一次打印 10 个收据，它会裁切 10 次并产生一些影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:47:06.143

我不得不在这里做一些假设。

*   POS 打印机连接到客户端计算机，而不是 PHP 服务器。

*   这是一个支持基于 Windows 的 POS 终端的内部应用程序。

话虽如此，有几个可用的串行/COM 端口插件。我们目前在工作中使用 ActiveX 插件，但我不会提出任何建议——我对替代方案了解不够。这需要由客户端计算机安装/批准。

找到您的打印机的品牌/型号，并找到切割纸张的控制代码。它们应该列在手册的背面。您需要编写 PHP 脚本以将正确的数据/控制代码输出到插件以发送到打印机。

只是为了记录，我不是这个解决方案的粉丝。

# javascript - 直接从 javascript 设置 JSF 列表框

> ID：16096234
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:27:18.373
> 
> 标签：javascript, jsf

我想通过在 javascript 代码中设置它们来直接设置在 jsf 块中定义的列表框元素，但是 document.getElementById() 返回 null ？

JSF 代码：

```
<h:panelGroup id="dtEffectiveDate">
                                <h:outputText value="EffectiveDates:" style="margin-left: 250px;width:76px;"/>
                                    <h:selectManyListbox id="effectiveDateListbox" style="margin-left: 15px; width:76px;" size="2">
                                        <c:selectItems id="effectiveDateSelectItems" value="#{manualDataEntryRegText.effectiveDates}"/>
                                    </h:selectManyListbox>
                                </h:panelGroup> 
```

JavaScript 代码：

```
CalendarPopup.handleSelectForMultipleDates = function(type, args, obj, inputEl)
    {
    alert("MultiSelect");
    var arrDates = CalendarPopup.effectiveDateCalendar.getSelectedDates();
    var length = arrDates.length;
    var i=0;
    var tokenizedDates = "";

    var txtDate = document.getElementById("pageForm:effectiveDateListbox");
    alert(txtDate); // returns null
    for (i = 0; i!= length; i++) 
    {
        var date = arrDates[i];
        var displayMonth = date.getMonth() + 1;
        var displayYear = date.getFullYear();
        var displayDate = date.getDate();
        tokenizedDates = displayMonth.toString(10) + "/" + displayDate.toString(10) + "/" + displayYear.toString(10);
        effectiveDateListbox.options[i].value = tokenizedDates;
        i++;
    } 

    } 
```

编辑：我能够获取列表框但无法设置它：如何设置列表框？

```
var listBox = document.getElementById('pageForm:effectiveDateListbox');
        for (i = 0; i!= length; i++) 
        {
            var date = arrDates[i];
            var displayMonth = date.getMonth() + 1;
            var displayYear = date.getFullYear();
            var displayDate = date.getDate();
            tokenizedDates = displayMonth.toString(10) + "/" + displayDate.toString(10) + "/" + displayYear.toString(10);
            listBox.options[i].value = tokenizedDates;
            i++;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:45:06.043

这不应该返回`null`：

```
<select id="pageForm:effectiveDateListbox" name="pageForm:effectiveDateListbox" multiple="multiple" size="0"></select>

document.getElementById('pageForm:effectiveDateListbox'); 
```

如果是，则可能是`select`在您的 javascript 运行时该元素不存在。为了防止这种情况，您可以尝试：

```
window.onload = function(){
    // do stuff here
}; 
```

# vb6 - 在每个子程序中调用后期绑定子程序

> ID：16096236
> 
> 赞同：0
> 
> 时间：2013-04-19T02:27:41.813
> 
> 标签：vb6, late-binding

首先，我只想声明我需要使用 LateBinding，因为我的程序在不同机器上运行，具有不同版本的 excel。

我在一个模块中声明了一个 Public Sub，可以调用它来为 excel 应用程序创建对象。

```
'Declare Public Excel Variable to Call from one place and easy manipulation
Public xlApp As Object
Public wb As Object
Public wb2 As Object
Public ws As Object
Public ws2 As Object

Public Sub InitializeExcel()
    'Create the Excel Objects
    Set xlApp = CreateObject("Excel.Application")
End Sub 
```

然后在我创建的每个使用 excel 应用程序的子例程中，我调用**InitializeExcel**并在每一端执行以下操作：

```
On Error Resume Next
xlApp.Quit
Set xlApp = Nothing
Set wb = Nothing
Set wb2 = Nothing
Set ws = Nothing
Set ws2 = Nothing 
```

我现在的问题是：

> 我是否需要在每个需要 Excel 应用程序的子例程上调用**InitializeExcel**，或者我可以在应用程序启动时调用它一次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:50:42.583

我已经测试了一些东西并得到了这些结果：

`InitializeExcel`每次都需要调用，因为在提到的每个子例程结束时都会将作为Excel 应用程序对象的**xlapp设置为****Nothing**

如果我在每个子例程中删除`Set xlApp = Nothing`，那么我可以“重新使用”`xlApp`作为 Excel 应用程序对象。然而，这会导致 Excel 应用程序一直在后台运行，并且每次我打开一个新工作簿时，都会运行另一个 Excel 应用程序实例。

所以我想，最好的方法是我调用的初始设置，`InitializeExcel`然后将所有内容设置`Nothing`为调用过程的每个例程。

# python - Python 2.2 中的设置函数

> ID：16096249
> 
> 赞同：1
> 
> 时间：2013-04-19T02:29:12.687
> 
> 标签：python

我对 Python 2.2 中的设置有疑问。目前我只是在两个列表之间进行比较，如下所示：

```
temp3 = set(list1) - set(list2) 
```

但它一直提示我集合没有定义。我使用 2.7 创建程序。可悲的是，更新软件不是一种选择。有没有我可以使用的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:34:45.107

`set`您可以尝试提供缺失功能的第三方模块。例如，[demset](https://pypi.python.org/pypi/demset)。

使用此模块的最简单方法是将其保存在与您正在编写的程序相同的目录中并导入所需的内容，如下所示：

```
from demset import set 
```

[文档](http://deron.meranda.us/python/demset/pydoc)和[主页](http://deron.meranda.us/python/demset/)提到了一种在可用时使用 Python 内置`set`(and `frozenset`) 的方法，并且仅在`demset`内置不可用时使用模块中的版本：

```
try:
    type(frozenset)
except NameError:
    from demset import set, frozenset 
```

除了这些导入之外，您的程序可以保持完全相同。

请注意，我提到将`demset`模块与您的程序保持在同一目录中，只是因为这不需要任何安装，而且如果您被困在 Python 2.2 上，听起来可能不允许您安装任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:57:14.073

除非您正在做大量的事情，否则您可能只需为此编写自己的函数，如下所示。

```
tmp3=[]
for i in list1:
  if i not in list2 and i not in tmp3:
    tmp3.append(i) 
```

# dbus - BlueZ 5.4 DBus API ConnectProfile GATT 服务 UUID

> ID：16096254
> 
> 赞同：5
> 
> 时间：2013-04-19T02:29:33.753
> 
> 标签：dbus, bluetooth-lowenergy, bluez

如何使用带有 BlueZ 的 DBus API 连接到 GATT 服务？

我使用 BlueZ DBUS API 来发现设备、连接和发现 GATT 服务 UUID。

但是，当我尝试为 GATT 服务 UUID 之一连接配置文件时，出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:31:03.287

从 BlueZ 邮件列表中得到答案：

> “到目前为止，BlueZ 5.x 中没有 GATT D-Bus API。在 BlueZ 5.x 中访问 GATT 配置文件的唯一方法是使用现有配置文件特定的 D-Bus API（温度计、心率、接近度、骑行速度、 HID over GATT）或使用 C API（就像 gatttool 一样）。” ( [http://marc.info/?l=linux-bluetooth&m=136656873604635&w=2](http://marc.info/?l=linux-bluetooth&m=136656873604635&w=2) ")

BlueZ 5.4 不支持此功能

# ios - iOS 操作 - 如何从 UIAction 获取标准 UIButton 的事件数据？

> ID：16096256
> 
> 赞同：1
> 
> 时间：2013-04-19T02:30:06.270
> 
> 标签：ios, uibutton, uievent

对于 UIButton，touchDragInside 上有没有办法告诉手势的方向？（上下左右）

```
- (IBAction)buttonTouchedUpInside:(UIButton *)sender forEvent:(UIEvent *)event {
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:20:51.433

您应该对按钮进行子类化并覆盖 beginTrackingWithTouch:withEvent:、continueTrackingWithTouch:withEvent: 和 endTrackingWithTouch:withEvent:。我在下面的代码中输入的日志应该可以帮助您开始您想做的事情。

```
 - (BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
   NSLog(@"%@",NSStringFromCGPoint([[event.allTouches anyObject] locationInView:self]));
    return YES;
}

- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    NSLog(@"%@",NSStringFromCGPoint([[event.allTouches anyObject] locationInView:self]));
    return YES;
}

-(void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    NSLog(@"%@",NSStringFromCGPoint([[event.allTouches anyObject] locationInView:self]));
} 
```

如果你只对整体方向感兴趣，你可以只看 beginTracking 数和 endTracking 数，而忽略 continueTracking 方法。

# c# - 计算richtextbox中相同单词的数量

> ID：16096258
> 
> 赞同：1
> 
> 时间：2013-04-19T02:30:15.213
> 
> 标签：c#, user-interface, richtextbox

我想计算富文本框中的单词。首先，我在 textbox1 中输入一个单词（用于搜索），然后按“count”按钮，textbox2 将显示一个数字，表示在 Richtextbox 中有多少相同的单词。这是我的代码，但它不起作用，textbox2 总是显示 0。谢谢你的帮助。

```
 private void button2_Click(object sender, EventArgs e)
   {
     string a=richTextBox1.Text;
     string b=textBox1.Text;

     for (int i = 0; i < a.Length; i++)
     {

        int n=0;

        if (a.Equals(b))
        {

          n++;

        }

        textBox2.Text = n.ToString();

     }

  } 
```

![在此处输入图像描述](https://i.stack.imgur.com/0wXVE.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:35:17.173

您需要将单个单词与 b 进行比较，而不是整个句子。您可以使用以下代码作为参考：

```
string[] data = richTextBox1.Text.Split(' ');
for(int i=0;i<data.Length;i++)
{
   if(data[i]==textBox1.Text)
      n++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:12:54.647

试试这个：

```
string data = richTextBox1.Text;
var target  = textBox1.Text;
var count = data.Select((c, i) => data.Substring(i))
                .Count(sub => sub.ToUpper()
                .StartsWith(target));

textBox2.Text = count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T08:18:12.440

像这样显示richtextbox的字数会更容易一些：

```
Dim wordcount As Integer
Dim a As String() = RichTextBox1.Text.Split(" ")
wordcount = a.Length 
```

您可以使用“wordcount”来计算字数。例如：

```
Label1.Text = "Word Count: " & wordcount 
```

# windows-7 - pyserial echo 本身和 Python 3.3 和 Windows 7 64bit 下的响应缓慢

> ID：16096260
> 
> 赞同：3
> 
> 时间：2013-04-19T02:30:40.393
> 
> 标签：windows-7, serial-port, pyserial, python-3.3

我在 Windows 7 64-bit 上的 Python 3.3 下使用 pyserial。我想建立一个很小的终端，例如putty，pietty。

我遇到了 3 个主要问题，**（1）当我通过 serial.write() 发送命令时，它会自己回复我（再次 ECHO）（2）当我想从 serial.read() 打印一些东西时，它变成非常慢 。（我知道 stdout.flush 每次都是根本原因，但我不想在缓冲区中缓存任何东西）

(3) 我使用 cygwin 下的 miniterm.py ，并使用 windows 版本的 Python 3.3 （我使用符号链接来实现它。）** 例如：别名 p3='/cygdrive/c/Python33/python.exe' 。和“p3 miniterm.py -p COM4 -u 38400”来运行 miniterm ，但它似乎无法接受我的输入。但是，在 windows 本机命令终端下，它工作正常，但无法正确显示 ANSI 颜色（无论如何都可以处理它）

这是我的现场演示视频 [http://www.youtube.com/watch?v=n6eZQnFgh2I&feature=youtu.be](http://www.youtube.com/watch?v=n6eZQnFgh2I&feature=youtu.be)

和我的代码

```
def main():
    try:
        global read_thr,write_thr
        beep()
        port_num='COM5'
        baudrate=38400
        init_serial_port(port_num,baudrate)
        read_thr =Thread(target=read_comport)
        read_thr.start()
        write_thr =Thread(target=write_comport)
        write_thr.start()
        flush_thr =Thread(target=read_comport)

def get_key_from_user():
    c = os.read(sys.stdin.fileno(),1)
    return c

def write_comport():
    global  ser,    cmd, log_file, isRead
    print("enter Q to quit")
    while True:                
            cmd = input(">>:")

            if cmd=='Q':
                exit_prog()
            else:                
                ser.write(cmd)
                ser.flush()

        pass

def read_comport():
    global ser, cmd, log_file
    cnt =0
    while True:
        element=''
        data=character(ser.read(1))
        sys.stderr.write(data)
        sys.stderr.flush()

        continue
    pass 
```

# javascript - 这个简单的 Javascript 日历在 IE 9/10 中不起作用

> ID：16096264
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:31:02.790
> 
> 标签：javascript, internet-explorer, cross-browser

我在我创建的网站中使用简单的 javascript 日历。此页面有插件的现场演示：

[http://www.electricprism.com/aeron/calendar/](http://www.electricprism.com/aeron/calendar/)

我正在使用第二个。

这在 Chrome、Firefox 和 Opera 中运行良好，但在 Internet Explorer 9/10 中不起作用，除非我启用兼容模式（这会破坏我的布局）。

在 IE 中，日历按钮根本不出现。

我怎样才能让它在 IE9/10 中工作？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:30:06.790

问题似乎与加载在该站点上的 mootools 版本有关，它正在使用`1.2.1`但查看 mootools 似乎当前版本是`1.4.5`. 我注意到的下一件事是在 IE9 中有一个 JavaScript 错误：

> SCRIPT5022：DOM 异常：INVALID_CHARACTER_ERR (5) mootools.js，第 15 行字符 20608

由此看来，使用的缩小是否有问题。

我已经使用 mootools `1.4.5`（使用[Fiddler2 AutoResponder](http://fiddler2.com/)）对同一站点进行了测试，并且 JavaScript 错误消失了，并且该按钮出现在日历工作中。

所以如果你升级到 mootools`1.4.5`应该没问题。

# java - FTP或任何其他方式？我只需要指南

> ID：16096268
> 
> 赞同：0
> 
> 时间：2013-04-19T02:31:37.140
> 
> 标签：java, ftp, ftp-client

实际上我现在只有 FTP 的基本技能，现在我面临着`.log`从远程站点获取文件的问题。我可以访问它，并检查文件是否存在，但不知道如何检索它。

1.  我可以`apache FileUtils`用来设置`source`和`destination`吗？如果可以，我可以将目的地设置为另一个远程站点吗？（比如放ip地址）

2.  或者我可以使用文件`input`和`output`流？同样，我可以在输出流中应用 IP 地址吗？

或其他任何对我的建议？感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:35:25.227

您可以使用的 Java FTP 库：[JavaWorld FTP 库文章](http://www.javaworld.com/javaworld/jw-04-2003/jw-0404-ftp.html?page=1)

# java - 在 Java 中链接数组

> ID：16096273
> 
> 赞同：1
> 
> 时间：2013-04-19T02:32:23.090
> 
> 标签：java, arrays

我是 Java 新手，我正在处理数组。我有两个数组，并希望将它们链接起来，以便第二个数组中的元素与第一个数组中的元素相对应。这样，我可以在第一个数组中搜索一个元素并在第二个数组中显示相应的值。

```
short[] Years = {2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012};

String[] Months = {"January", "February", "June", "January", "March", "June", "July", "August", "September", "March", "November", "March", "June"}; 
```

我正在尝试链接它，例如，当我搜索 March 时，它会显示`2004, 2009, 2011`

```
List<String> results = new ArrayList<String>();
for (String s : months)
{
    if(s.equals(term))
    {
        results.add(s);
    }
}
if (results.size() > 0)
{
    System.out.println("The month " + term + "appears " + results.size() + " times");
}
else
{
    System.out.println("Your search for " + term + " did not return any results");
} 
```

我有这个代码来显示一个月出现了多少次，我只需要它打印出这之后的几年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:39:40.417

那是一个“关联数组”或“地图”。这是一个 Java 示例。

```
Map<String, String> userEmails = new HashMap<String, String>();
userEmails.put("Tony", "tony@metal.com");
userEmails.put("Ozzy", "ozzy@metal.com"); 
```

让我们找到 Ozzy 并打印他的电子邮件地址：

```
System.out.println(userEmails.get("Ozzy")); 
```

[地图](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)是界面。它有“put”和“get”操作。 [HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)是“Map”的一种流行实现，其中映射键（用户名）具有唯一的哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:40:06.493

看看我的代码，我解释了我所做的所有事情。

```
import java.util.Scanner;

public class GetPrice {
    public static void main(String args[]) {

        // You can add any number of elements in both the arrays. The lengths 
        // should, of course, be the same for both the arrays.

        String items[] = { "pizza", "cheesebread", "stromboli" };
        double prices[] = { 1.1, 2.2, 3.3 };

        // What we need to do is, once the user inputs the item, we need to
        // search the string and find the index. As the prices are in the
        // corresponding indices on the other array, we can just use the index
        // number to get the price from the other array. So we just use the same
        // index but on a different array.

        System.out.println("Choose from the following, to get the price: ");
        for (int index = 0; index < items.length; index++)
            System.out.println(items[index]);

        System.out.println("\nEnter the item: ");
        Scanner input = new Scanner(System.in);
        String inputItem = input.next();

        for (int index = 0; index < items.length; index++) {
            if (items[index].equals(inputItem.toLowerCa… {
                System.out.println("Price for '" + items[index] + "' is: " + prices[index]);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:53:20.800

尝试

```
short[] Years = { 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008,
        2009, 2010, 2011, 2012 };
String[] Months = { "January", "February", "June", "January", "March",
        "June", "July", "August", "September", "March", "November",
        "March", "June" };

String term = "March";
List<Short> indexes = new ArrayList<Short>();
for (int i = 0; i < Months.length; i++) {
    String string = Months[i];
    if (term.equals(string)) {
        indexes.add(Years[i]);
    }

}

for (Short short1 : indexes) {
    System.out.print(short1);
} 
```

更新：

```
 Scanner keyboard = new Scanner(System.in);

    short[] Years = { 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008,
            2009, 2010, 2011, 2012 };
    String[] Months = { "January", "February", "June", "January", "March",
            "June", "July", "August", "September", "March", "November",
            "March", "June" };

    String term = keyboard.next();

    List<String> results = new ArrayList<String>();
    for (String s : Months) {
        if (s.equals(term)) {
            results.add(s);
        }
    }
    if (results.size() > 0) {
        System.out.println("The month " + term + "appears "
                + results.size() + " times");
    } else {
        System.out.println("Your search for " + term
                + " did not return any results");
    }

    List<Short> indexes = new ArrayList<Short>();
    for (int i = 0; i < Months.length; i++) {
        String string = Months[i];
        if (term.equals(string)) {
            indexes.add(Years[i]);
        }

    }

    for (Short short1 : indexes) {
        System.out.print(short1);
    }
} 
```

它给了我以下输入输出`March`

```
The month Marchappears 3 times
200420092011 
```

# c++ - 如何从值中“找到”数组的一行？

> ID：16096277
> 
> 赞同：-3
> 
> 时间：2013-04-19T02:32:48.897
> 
> 标签：c++

我不确定我会怎么做。我有一个数组，每行有几个值。例如，有一个“name”值、一个“id”值和一些其他值。我正在阅读另一个文本文件，它有一个数字，然后我想“找到”数组并对其进行编辑。我不确定我的解释是否正确，但比如说，新的文本文件说。

```
 2000 -1.6 
```

然后我想找到 ID 值为 ' 的“数组” `2000'`。假设`Array[3]`（使用 Array 作为我的数组的示例名称）的 ID 值为`2000`. 我如何让程序“知道”`Array[3]`具有相同的价值？我想让它查找与文本文件中的行具有相同 ID 的行。

此外，有没有一种方法可以将其读取`'-1.6'`为 的整数`1.6`，但作为负数而无需特别指出？如果我的解释很奇怪，我很抱歉，但我想不出任何其他方式来表达它。

编辑：这是我现在拥有的代码。这只是程序中的一个问题，我不确定如何解决。函数“getdata2”是我要这样做的地方。我希望该函数读取每行有两个值的文本文件（我知道该怎么做）；一个 4 位数字（ID）和一个像“-1.6”这样的数值。我想找到 ID 与 A/B/C.txt 文件中的 ID 匹配的数组行，并使用 A/B/C.txt 文件中的数值编辑其“权重”值。所以我想做的一个例子就是这个。我执行我的程序。第三行的 ID 值为“2000”，权重值为“52”。从 peeps.txt（函数 getdata 中使用的第一个文本文件）中读取所有行后，我将执行函数 getdata2，该函数将从 A/B/C.txt 读取数据。如果该文件中的第一行文本为“2000 -1.6”，我希望它“找到”数组中 ID 值为 2000 的部分（在本例中为 Person[3]），然后修改其权重值减去 1.6，将其更改为 50.4。但是，我不确定如何“找到”它。

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
using namespace std;
struct person
{
string firstname;
int id;
double height;
double weight;
double bmi;
double change;
};
void getdata (person *array, person *ptr);
void printData (person *array, person *ptr);
void calculateBMI (person *array, person*ptr);
void getdata2 (person *array, person *ptr);
int main()
{
person array[13];
 person *ptr;
ptr = &array[0];
getdata(array, ptr);
calculateBMI(array, ptr);
printData(array, ptr);

}

void getdata (person *array, person *ptr)
{

ifstream inData;
inData.open("peeps.txt");
while(!inData.eof())
{
    for(ptr = &array[0]; ptr < &array[13];ptr++)
{
inData >> ptr->firstname >> ptr->id
>> ptr->height >> ptr->weight;

}
}
}
void printData (person *array, person *ptr)
{
cout << "Name" << "     ID" << "     Height"
<< "     Weight   " << "BMI" << endl;
for(ptr = &array[0]; ptr < &array[13];ptr++)
{
cout << ptr->firstname << "   "<< ptr->id
<< "   "<< ptr->height << "       "<< ptr->weight <<
"      "<< ptr->bmi << endl;
}
}
void calculateBMI (person *array, person*ptr)
{
for(ptr = &array[0]; ptr < &array[13];ptr++)
{
    ptr-> bmi = 703*(ptr->weight/((ptr->height)*(ptr->height)));
}
}
void getdata2 (person *array, person *ptr)
{
ifstream inData;
string filename;
int size;
cout << "Select from file 'A', 'B', or 'C'" << endl;
cin >> filename;
if (filename == "a" || filename == "A")
{
    inData.open("A.txt");
    cout << "Opening A.txt..." << endl;
    size = 17;
}
if (filename == "b" || filename == "B")
{
    inData.open("B.txt");
    cout << "Opening B.txt..." << endl;
    size = 9;
}
if (filename == "c" || filename == "C")
{
    inData.open("C.txt");
    cout << "Opening C.txt..." << endl;
    size = 12;
}
else
{
cout << "You have entered an incorrect filename." << endl;
}
while (size > 0)
{

    size--;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:03:20.943

如果与仿函数（在本例中为 isTarget）配对，std::find_if 会做你想做的事。

```
#include <iostream>
#include <algorithm>

struct X { int id; int val; };

class isTarget {
public:
    isTarget(int target): target_(target) {}
    bool operator() (X &item) { return item.id == target_; }
private:
    int target_;
};

int main()
{
    X x[] = { {1000, 1}, {2000, 2}, {3000, 3}, {4000, 4} };
    X* ele = std::find_if(x, x+4, isTarget(3000));  // this does the work
    std::cout << ele->val;

    return 0;
} 
```

# jquery - capybara-webkit 无法模拟点击（非链接/按钮）元素

> ID：16096278
> 
> 赞同：6
> 
> 时间：2013-04-19T02:32:51.687
> 
> 标签：jquery, ruby-on-rails, rspec, capybara, poltergeist

在 rspec 功能场景中，我有：

```
scenario 'shows things', js: true do

    page.find('#my_div').trigger(:click) 
```

这似乎不会触发该元素的 click 事件上的 jQuery 处理程序。在调试器中，此调用返回一个空字符串“”。

capybara-webkit 是否应该能够使用触发更新 dom 的 ajax 请求的 jQuery 处理程序来模拟鼠标事件？如果是这样，对这种情况有什么建议吗？我从 selenium-webdriver 切换，因为不支持 capybara #trigger 方法。

并且尝试直接触发jQuery事件会抛出错误：

```
page.execute_script "$('#masthead .fclass').trigger('click')" 
```

给

```
Capybara::Webkit::InvalidResponseError:
       Javascript failed to execute 
```

我的 gemfile 有

```
group :test do
  gem 'capybara'
  gem "database_cleaner", "~> 0.9.1"
  gem 'capybara-webkit', git: 'git://github.com/thoughtbot/capybara-webkit.git'
  gem 'launchy'
end 
```

我正在使用'edge' capybara-webkit，因为我遇到了一个带有xpath错误的错误（v2.04？）。

尽管我尝试在 spec/spec_helper.rb 中添加机架异常，但我无法获取 javascript 错误的日志：

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
require 'rack/utils'
Capybara.app = Rack::ShowExceptions.new(MyApp::Application)

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  #...

  Capybara.javascript_driver = :webkit

  config.before (scope = :suite) do
    %x[bundle exec rake assets:precompile]
  end

  config.use_transactional_fixtures = false

  config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.before(:each) do
    DatabaseCleaner.clean
  end

  config.infer_base_class_for_anonymous_controllers = false
end 
```

**更新：** 我将 capybara-webkit 替换为

```
gem 'poltergeist' 
```

在 spec/spec_helper.rb 中：

```
 require 'capybara/poltergeist'
    ...
    Capybara.register_driver :poltergeist do |app|
      Capybara::Poltergeist::Driver.new(app, { debug: true })
    end
    Capybara.javascript_driver = :poltergeist
    Capybara.current_driver = :poltergeist 
```

我从页面（“#my_id”）.trigger（'click'）的控制台中收到这些错误消息：

```
...
{"name"=>"click", "args"=>[3, 2]}
poltergeist [1366370900594] state default -> mouse_event
poltergeist [1366370900596] state mouse_event -> loading
Not allowed to load local resource: file:///home/me/rails/my_app/public/assets_test/application.css
...
Not allowed to load local resource: file:///home/me/rails/my_app/public/assets_test/application.js 
```

我试图对 poltergeist gem 权限进行 chmod，但结果相同。

并尝试运行 page.execute_script(%Q($("my_id").trigger('click'))) 给出 jQuery 未定义类型错误：

```
 ReferenceError: Can't find variable: $
           at phantomjs://webpage.evaluate():1
           at phantomjs://webpage.evaluate():1
           at phantomjs://webpage.evaluate():1
           at phantomjs://webpage.evaluate():1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T22:41:33.327

我遇到的问题和解决方案：

1) selenium-webdriver 或 capybara-webkit 不支持 Capybara trigger() 方法。

*   解决方案：直接从 javascript 触发 jquery 事件：`page.execute_script(%Q($("#...`虽然这不如它可以在用户不可见的元素上触发事件有用。

2）`save_and_open_page`不使用资产管道，因此如果您有隐藏的可点击元素，则相当无用。poltergeist 驱动程序具有 save_screenshot，它可以工作，但它不如拥有加载资产的真实浏览器页面有用

*   解决方案：在测试中预编译资产，尽管我无法让 jQuery 加载任何驱动程序（$ 未定义）并且 poltergiest/phantomjs 不允许访问本地编译文件（将命令行选项传递给驱动程序没有效果）

*   更好的解决方案：使用未发布的 Capybara 2.1+ `gem 'capybara', git: 'git://github.com/jnicklas/capybara.git'`，添加`Capybara.asset_host = "http://localhost:3000"`到 spec_helper.rb 并让开发服务器运行

3) capybara-webkit `Error undefined method find_xpath for #<Capybara::Webkit::Driver`使用时`Capybara.javascript_driver = :webkit`

*   解决方案：使用master分支 `gem 'capybara-webkit', git: 'git://github.com/thoughtbot/capybara-webkit.git'`

我最后的设置是 Poltergeist（支持触发方法）+ Capybara beta，资产来自开发服务器（未预编译），因此 save_and_open_page 有效。

# c#-4.0 - 如何增加数字并输出到标签

> ID：16096283
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:33:43.393
> 
> 标签：c#-4.0

程序应该计算输入的正确单词的数量（duh），并在 60 秒后将该值打印到一个小标签上。

可以？不，它计数到 1，然后拒绝增加。

但是（这是有趣的部分）当我在带有断点的调试模式下运行它时，一切正常。

我只能认为这是某种变量封装错误（这仍然没有意义）。

这是一个小片段：

```
 private void checkWord()
    {
        if (txtInput.Text.ToLower() == lblQuery.Text.ToLower())
        {
            score++;
        }
    } 
```

这是整个来源，因为为什么不...

编程项目.zip

[http://tinyurl.com/c4af2nd](http://tinyurl.com/c4af2nd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:54:12.047

我相信您的比较字符串中会出现空格。试试这个，看看它是否有效。

```
private void checkWord()
{
    if (txtInput.Text.ToLower().Trim() == lblQuery.Text.ToLower())
    {
        score++;
    }
} 
```

# java - 简单上下文中的 Java 异常

> ID：16096287
> 
> 赞同：0
> 
> 时间：2013-04-19T02:34:21.653
> 
> 标签：java

我在线程的 run() 方法中遇到了一个非常奇怪的异常。

```
public class project extends JApplet implements KeyListener, MouseListener, MouseMotionListener, ActionListener, Runnable {
  private boolean gameStarted;
  public void init() {
    gameStarted = true;
    new Thread(this).start();
  }
  public void run() {
     while (true) {
        if (gameStarted)
           System.out.print("OK");
     }  
  }
} 
```

变量 gameStarted 为真，但系统不会打印任何结果。这是一个更大的类的一部分，它是我正在开发的游戏的基类。然而，这让我完全被难住了，我不明白为什么这不起作用。如果我放入 if 语句而不是 gameStarted `true`，它确实打印出来了。

另请注意，如果我将 run() 方法更改为以下内容，它会完全按照预期工作，因为 gameStarted 为真：

```
public void run() {
     while (true) {
        System.out.print(gameStarted);
        if (gameStarted)
           System.out.print("OK");
     }  
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:52:32.327

我认为问题在于您的线程没有看到主线程对变量“gameStarted”（竞争条件）所做的更新。如果您将变量 gameStarted 设置为“volatile”，它会有所不同吗？我认为让它变得易变可以确保你的线程会看到最新的值，在这种情况下是由主线程设置的“真”。

# ip-geolocation - 我在哪里可以获得地理位置数据？

> ID：16096290
> 
> 赞同：0
> 
> 时间：2013-04-19T02:34:33.813
> 
> 标签：ip-geolocation

我想从那里 IP 定位人们。我知道有 API 在线服务。

我想知道是否有任何方法可以自己计算这些数据（换句话说，有没有办法手动将 192.168.0.1 映射到（比如说）纽约）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:45:17.497

MaxMind 的免费[G​​eoLite 数据库](http://dev.maxmind.com/geoip/geolite)可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:45:24.993

首先，*“计算”*不是正确的词。没有什么可计算的，它是简单的 IP 到位置的映射。首先，您必须将 IP 块映射到 ISP。然后获取 ISP 的位置。手动。这是一项艰巨的任务，您需要不断更新列表，尤其是在 IPv6 快速增长的情况下。

我认为没有理由自己做这项工作。有 API，使用它们。[Maxmind](http://www.maxmind.com/en/home)在提供国家、地区、ISP 名称等准确信息方面做得很好。

# php - 如何使用 PHP 将 sqlite 转换为 mysql

> ID：16096295
> 
> 赞同：1
> 
> 时间：2013-04-19T02:35:08.943
> 
> 标签：php, mysql, sqlite

我已将 sqlite 数据库转换为 mysql。

那么我需要将 sqlite+php 代码转换为 mysql+php 代码。您是否有任何包含将 sqlite 转换为 mysql 的方法的文档。

谢谢..

***这是我的代码***

```
<?php

try {
  //open the database
  $db = new PDO('sqlite:cars.sqlite'); //will create the file in current directory. Current directory must be writable

  //create the database if does not exist
  $db->exec("CREATE TABLE IF NOT EXISTS cars (id INTEGER PRIMARY KEY, manufacturer TEXT, year INTEGER, price INTEGER)");

  //select all data from the table
  $select = $db->prepare('SELECT * FROM cars ORDER BY id ASC LIMIT 100');
  $select->execute();

  $out = array(
    'cars' => $select->fetchAll(PDO::FETCH_ASSOC)
  );
  echo json_encode($out);

  // close the database connection
  $db = NULL;
}
catch (PDOException $e) {
  print 'Exception : ' . $e->getMessage();
}
?> 
```

***mysql表：汽车***

```
CREATE TABLE IF NOT EXISTS `cars` (
  `id` int(11) NOT NULL DEFAULT '0',
  `manufacturer` text,
  `year` int(11) DEFAULT '0',
  `price` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T02:37:30.710

当您使用 PDO 时，只需创建 Mysql PDO 对象，更改此部分：

```
$db = new PDO('sqlite:cars.sqlite'); 
```

类似于：

```
$dsn = 'mysql:dbname=yourdbname;host=127.0.0.1';
$user = 'yourdbuser';
$password = 'yourdbpass';
$dbh = new PDO($dsn, $user, $password); 
```

你就完成了。您不需要更改任何其他内容。

PDO 是可移植的连接对象，它可以与多个不同的数据库一起使用。有关 PDO 的更多信息：http: [//php.net/manual/en/pdo.construct.php](http://php.net/manual/en/pdo.construct.php)

# javascript - 除了给定字符串之外，匹配任何内容的 JavaScript 模式是什么？

> ID：16096299
> 
> 赞同：4
> 
> 时间：2013-04-19T02:35:19.677
> 
> 标签：javascript, regex, match

我需要确保给定的字符串不是“选择一个值”。就是这样，除了这个确切的字符串之外，其他任何东西都应该与模式匹配。

我一直在环顾四周，并在[http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)上尝试了许多组合，但似乎没有任何效果。

我不能否定测试，模式需要完成这一切，因为我将把它提供给表单验证框架。如果选择包含这个文本，我会返回一个错误，等等。所以模式必须匹配其他任何东西，除了这个确切的字符串，

我尝试了很多东西，

```
(?!Select an account)
!(Select an account)
!(^(Select an account)$) 
```

等等......显然我不明白其中一些机制是如何工作的。我得到“开始于”和“结束于”，但我似乎没有找到一个简单的否定运算符。

出于某种原因，我到处寻找正则表达式解释我没有得到这个简单的用例，也许它并不常见。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T03:02:16.587

我相信这是在问类似的问题：

[正则表达式和否定整个字符组](https://stackoverflow.com/questions/977251/regular-expressions-and-negating-a-whole-character-group)

在你的情况下，你可以使用类似的东西

```
 ^(?!Select a value).*$ 
```

这将匹配不以“选择一个值”开头的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T02:44:22.667

与其考虑否定的正则表达式，不如做一个肯定的表达式并否定条件：

```
if (! /^Select an account$/.test(mystring)) {
  // String is not "Select an account"
} 
```

但是无论如何您都不需要正则表达式：

```
if (mystring != 'Select an account') {
  // String is not "Select an account"
} 
```

或者，如果您想要“包含”：

```
if (mystring.indexOf('Select an account') == -1) {
  // String does not contain "Select an account"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:49:40.793

我可能没有正确理解这一点。这不行吗？

```
if (string != "Select a value") {
    //code here
} 
```

我不知道你为什么需要正则表达式来做到这一点，这就是为什么我担心我可能不理解你的问题是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T21:34:53.370

如果您在 HTML5 表单验证中处理正则表达式并且输入的模式属性比一个确切的字符串更复杂，则另一种解决方案如下（javascript）：

```
function findAllNotPattern(inputField) {
    var allBut1 = inputField.getAttribute("pattern")
    var allBut2 = allBut1.slice(0, 1) + "^" + allBut1.slice(1)
    var allButRe = new RegExp(allBut2, "g")
    return allButRe
} 
```

如果你想在纯 javascript 中运行它，你可以使用：

```
findAllNotPattern(document.getElementById("inputFieldId")) 
```

# svn - TortoiseSVN：为什么我不能将外部（项目）添加到我的工作副本的根目录？

> ID：16096303
> 
> 赞同：3
> 
> 时间：2013-04-19T02:35:44.837
> 
> 标签：svn, tortoisesvn, svn-externals

**快速总结：**

我是 SVN 新手，需要一些外部帮助。我正在尝试向本地工作副本的根目录添加一个单独的项目，但 TortoiseSVN 只允许我将 externals 属性设置为子文件夹。

**细节：**

我在 stackoverflow 上找到了一[组脚本](https://stackoverflow.com/questions/187506/how-do-you-use-version-control-with-access-development)，可用于我所有的 MS Access 项目。我已将它放在我的 SVN 存储库中自己的文件夹（项目）中，我想在我的每个 MS Access 项目中引用它。据推测，添加 svn:externals 属性将是实现此目的的最佳方法，但除非我将“本地路径”设置为子文件夹，否则我似乎无法保存该属性。

我要添加的属性的屏幕截图： [https ://picasaweb.google.com/lh/photo/b9xwLnfqaRjllQwxhO4gT9MTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/b9xwLnfqaRjllQwxhO4gT9MTjNZETYmyPJy0liipFm0?feat=directlink)

（备案：我打算使用 ^/AccessDecomposer/trunk 而不是图片中显示的 URL）

我试过了 。和 ./ 以及其他一些东西，但是当我尝试保存该属性时，我收到一条错误消息`Invalid svn:externals property on 'C:\Development\Access\BeneStr'`（这是我的工作副本），因为`target '' is an absolute path or involves '..'`（它不是！）

错误消息： [https ://picasaweb.google.com/lh/photo/-gwfPnzGrID3DKCHo3KkvtMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/-gwfPnzGrID3DKCHo3KkvtMTjNZETYmyPJy0liipFm0?feat=directlink)

只允许 2 个链接。稍后我会看看是否可以添加带有我的回购截图的评论。

有什么建议么？难道我做错了什么？这是不允许的吗？我是否误解了外部的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T20:40:35.820

我不是 svn 的专家，但我今天问如何做同样的事情，我被告知不支持在根目录中进行外部克隆。希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T22:20:16.977

它与它是根文件夹无关。根据[文档](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)，必须将外部文件夹导入到不存在的子文件夹中。如果要将文件加载到现有文件夹中，则必须自己导入文件。由于您想在同一个仓库中执行此操作，因此这是您的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T20:10:08.247

我通过反复试验（以及很多誓言）了解到，**您不能在本地副本的根目录上设置您的*外部***属性（尽管实际上没有什么可以阻止您这样做，甚至我们大多数人使用的 Tortoise GUI 客户端也不行） .

相反，将它放在一个*子文件夹*上，它指向*更深*的方式，以在该子文件夹中创建一个子文件夹。我知道这很糟糕，我不知道有什么好的理由，但事实就是这样。

```
LOCAL_WORKING_COPY [nope, don't place an external prop here]
|
+- subfolder [yes, place it here, and point to 'sub_subfolder']
   |
   +- sub_subfolder [not already existing] 
```

# css - 下拉菜单上的 CSS 伪选择器

> ID：16096315
> 
> 赞同：3
> 
> 时间：2013-04-19T02:36:57.483
> 
> 标签：css, html, css-transitions, pseudo-element

我正在使用 CSS :before 伪选择器在下拉列表中的第一项上方创建一个块。我一直无法让使用伪选择器创建的这个块与它上面的 <li> 宽度相同。

例如，当您将鼠标悬停在“关于”上时，出现在其下方的伪块应该与包含“关于”一词的块的宽度相同，其他 3 个块以此类推。

这是我到目前为止所得到的一个小提琴：http: [//jsfiddle.net/jh67P/](http://jsfiddle.net/jh67P/)

这是我的 HTML：

```
<nav>
    <ul class="main">
        <li><a href="#">About</a>
            <ul class="secondary">
                <li><a href="#">Learn About Us</a></li>
                <li><a href="#">Nice things to know</a></li>
            </ul>        
        </li>
        <li><a href="#">Products</a>
            <ul class="secondary">
                <li><a href="#">Product One</a></li>
                <li><a href="#">Product Two</a></li>
            </ul>        
        </li>
        <li><a href="#">Features</a>
            <ul class="secondary">
                <li><a href="#">Something Nice</a></li>
                <li><a href="#">Another nice thing</a></li>
            </ul>        
        </li>
    </ul>
</nav> 
```

这是CSS：

```
nav .main {
    font-size: 1em;
    margin: 0;
    padding: 0;
    list-style: none;
}

.main > li {
    display: block;
    position: relative;
    float: left;
}

.main > li a {
    display: block;
    text-decoration: none;
    color:#FFF;
    border-top: 1px solid #ffffff;
    padding: 5px 15px 5px 15px;
    background: #1e7c9a;
    margin-left: 1px;
    white-space: nowrap;
}

.main > li a:hover {
    background: #3b3b3b;
    color:#FFF;
}

.secondary {
    display:none;
    list-style: none;
    margin: 0;
    padding: 0;
}

.main li:hover .secondary {
    display: block;
    position: absolute;
}

.main li:hover ul li {
    float: none;
    font-size: 1em;
}

.main > li:hover a { background: #3b3b3b; }

.main > li:hover li a:hover {
    background: #1e7c9a;
}

.main  li:hover ul:before {
    content:'';
    display:block;
    width:100%;
    height:10px;
    border-bottom:10px solid #1e7c9a;
    border-right: 10px solid transparent; 
} 
```

编辑：使用绝对定位我能够达到效果。这是更新的 CSS。

```
nav .main {
    font-size: 1em;
    margin: 0;
    padding: 0;
    list-style: none;
}

.main > li {
    display: block;
    position: relative;
    float: left;
}

.main > li a {
    display: block;
    text-decoration: none;
    color:#FFF;
    border-top: 1px solid #ffffff;
    padding: 5px 15px 5px 15px;
    background: #1e7c9a;
    margin-left: 1px;
    white-space: nowrap;
}

.main > li a:hover {
    background: #3b3b3b;
    color:#FFF;
}

.secondary {
    display:none;
    list-style: none;
    margin: 0;
    padding: 0;
}

.main li:hover .secondary {
    display: block;
    position: absolute;
    top:40px;
}

.main li:hover ul li {
    float: none;
    font-size: 1em;
}

.main > li:hover a { background: #3b3b3b; }
.main > li:hover li a:hover {
     background: #1e7c9a;
}

.main > li:hover:after {
    content:'';
    display:block;
    width:100%;
    height:10px;
    border-bottom:10px solid #1e7c9a;
    border-right: 10px solid transparent; 
    position:absolute;
    top:20px;
    margin-left:1px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:48:25.467

怎么改：

```
.main  li:hover ul:before { 
```

至：

```
.main > li:hover > a:after { 
```

这就是你所追求的吗？

[jsFiddle](http://jsfiddle.net/jh67P/6/)

# jqgrid - 使用 clientArray 进行 jqgrid 内联保存会引发错误

> ID：16096317
> 
> 赞同：1
> 
> 时间：2013-04-19T02:37:17.173
> 
> 标签：jqgrid, save, inline, local

我是新手，`jqGrid`并且已经创建了一个简单的网格，其中包含`editurl`设置为的本地数据`clientArray`。我正在使用内联导航。我可以编辑一行，当我按下保存按钮时，行会更新。到目前为止，一切都很好。

当我按下添加行按钮时，将插入一个新的空行。当我在那里输入一些数据并单击保存按钮时，我收到错误消息：

`Uncaught TypeError: Cannot read property 'extraparam' of undefined jquery.jqGrid.min.js:398`

该文档仅说明`saveRow`应如何调用该方法。但是，显然内联导航器会自动调用它。这是完美的。但是我想我仍然需要正确设置一些参数，这样它就不会抛出错误并保存新添加的行。

希望一些`jqGrid`大师有一个好的提示。谢谢。

```
function createTable(data,colNames,colModel,caption ){
...

$(table).jqGrid({   data:data,
                        datatype: "local", 
                        height: 'auto', 
                        colNames:colNames,
                        pager:'#'+pagerid,
                        colModel:colModel, 
                        viewrecords: true, 
                        caption:caption,
                        editurl:'clientArray',
                        });

   var nav = $(table).jqGrid('navGrid','#'+pagerid,{edit:false,add:false,del:false});
   $(table).jqGrid('inlineNav','#'+pagerid);
   $(table).jqGrid('gridResize',{minWidth:350,maxWidth:800,minHeight:80, maxHeight:350});
   $('#gbox_'+tableid).draggable();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:44:05.970

你是对的，这是`inlineNav`方法中的错误。[线条](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js#L547-L549)

```
if(!o.addParams.addRowParams.extraparam) {
    o.addParams.addRowParams.extraparam = {};
} 
```

使用`o.addParams.addRowParams.extraparam`，但参数的默认值`addParams`（见[这里](https://github.com/tonytomov/jqGrid/blob/master/js/grid.inlinedit.js#L458)）定义为`addParams : {}`而不是`addParams : {addRowParams: {}}`。所以表达式`o.addParams.addRowParams`是相等的`undefined`，与产生空引用异常`o.addParams.addRowParams.extraparam`的相同。`undefined.extraparam`

我[将相应的错误报告](http://www.trirand.com/blog/?page_id=393/bugs/wrong-definition-of-default-values-of-addparams/#p28684)发布到 trirand，该问题将在 jqGrid 的下一个版本中修复。

作为一种解决方法，您可以替换该行

```
$(table).jqGrid('inlineNav','#'+pagerid); 
```

用线

```
$(table).jqGrid('inlineNav','#'+pagerid, {addParams: {addRowParams: {}}}); 
```

您的代码的一些常见附加说明：

*   我强烈建议您*始终*使用`gridview: true`可以提高代码性能而没有任何缺点的选项
*   `autoencode: true`我建议您默认使用选项。默认情况下，jqGrid 将网格的输入数据解释为必须格式化的 HTML 片段。因此，如果您尝试显示数据`a < b`，可能会遇到问题，因为`<`它是 HTML 中的特殊字符。如果您使用`autoencode: true`选项，输入数据将被解释为*文本*而不是 HTML 片段。
*   如果您始终为和属性`index`分配相同的值，我建议您从模型中删除属性。`index``name`
*   我建议您为`id`输入数据的每个项目提供具有唯一值的属性。您应该了解 jqGrid*总是*为网格的每一行分配`id`属性。该值在页面上的所有 HTML 元素中必须是唯一的。如果您从服务器获取数据并且数据`id`在数据库中具有本机唯一性，则建议使用该值作为`id`属性值。如果您不指定任何`id`属性 jqGrid 分配值 1、2、3、... 作为行的 id 值（rowids）。如果您在页面上使用多个 jqGrids 并且不提供唯一`id`值，您将有 id 重复，这是 HTML 错误。
*   我建议你使用`idPrefix`jqGrid 的选项。如果您在页面上有两个网格并且您没有为数据项填充（并且不需要）任何`id`数据项，那么您在两个网格中都有 id 重复项（id="1"、id="2" 等）。如果您要`idPrefix: "g1_"`为一个网格定义`idPrefix: "g2_"`另一个网格，则第一个网格的 rowid 将是第一个网格中的 id="g1_1"、id="g1_2" 等，而第一个网格中的 id="g2_1"、id="g2_2"第二个网格。即使您`id`从服务器填写，然后您在一个表中提供唯一的 id，但是来自两个数据库表的 id 可以具有相同的 id。因此，为每个网格使用不同的选项将以非常简单的方式`idPrefix`解决重复问题。`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T18:19:51.390

我遇到了同样的问题，但我的 jqgrid 标记完全不同（也许是新版本？）

我可以使用内联来编辑和保存一行，但添加一行不会保存。我不确定问题是什么。

```
<?php
ini_set("display_errors","1");
require_once 'jq-config.php';
// include the jqGrid Class
require_once ABSPATH."php/jqAutocomplete.php";
require_once ABSPATH."php/jqCalendar.php";
require_once ABSPATH."php/jqGrid.php";
// include the driver class
require_once ABSPATH."php/jqGridPdo.php";
// Connection to the server
$conn = new PDO(DB_DSN,DB_USER,DB_PASSWORD);
// Tell the db that we use utf-8
$conn->query("SET NAMES utf8");
// Create the jqGrid instance
$grid = new jqGridRender($conn);
// Write the SQL Query
$grid->SelectCommand = 'SELECT Serial, Type, Customer, Date, Notes FROM rmas';

$resize = <<<RESIZE
jQuery(window).resize(function(){
    gridId = "grid";

    gridParentWidth = $('#gbox_' + gridId).parent().width();
    $('#' + gridId).jqGrid('setGridWidth',gridParentWidth);
})
RESIZE;
$grid->setJSCode( $resize);

// set the ouput format to json
$grid->dataType = 'json';
$grid->table ="rmas";
$grid->setPrimaryKeyId("Serial");
// Let the grid create the model
$grid->setColModel();
// Set the url from where we obtain the data
$grid->setUrl('rmaform.php');
$grid->cacheCount = true;
//$grid->toolbarfilter = true;
$grid->setGridOptions(array(
    "caption"=>"RMAs",
    "rowNum"=>50,
    "sortname"=>"Serial",
    "hoverrows"=>true,
    "rowList"=>array(50,100,200),
    "height"=>600,
    "autowidth"=>true,
    "shrinkToFit"=>false
));

$grid->callGridMethod('#grid', 'bindKeys');
// Change some property of the field(s)
$grid->setColProperty("Serial", array("align"=>"center","width"=>40));
$grid->setColProperty("Type", array("align"=>"center","width"=>40));
$grid->setColProperty("Customer", array("align"=>"center","width"=>65));
$grid->setColProperty("Date", array("align"=>"center","width"=>40));
$grid->setColProperty("Notes", array("align"=>"left","width"=>500));
// navigator first should be enabled
$grid->navigator = true;
$grid->setNavOptions('navigator', array("add"=>false,"edit"=>false,"excel"=>true));
// and just enable the inline
$grid->inlineNav = true;
$buttonoptions = array("#pager", array(
        "caption"=>"Enable Cells", 
        "onClickButton"=>"js:function(){ jQuery('#grid').jqGrid('setGridParam',{cellEdit: true});}", "title"=> "Enable Excel like editing"
   )
);
$grid->callGridMethod("#grid", "navButtonAdd", $buttonoptions);
$buttonoptions = array("#pager", array(
        "caption"=>"Disable Cells", 
        "onClickButton"=>"js:function(){ jQuery('#grid').jqGrid('setGridParam',{cellEdit: false});}" , "title"=> "Disable Excel like editing"
   )
);
$grid->callGridMethod("#grid", "navButtonAdd", $buttonoptions);
$grid->renderGrid('#grid','#pager',true, null, null, true,true);
$conn = null;
?> 
```

# android - 在android中单击下一个按钮时如何删除单选按钮？

> ID：16096319
> 
> 赞同：0
> 
> 时间：2013-04-19T02:37:23.907
> 
> 标签：android

我正在开发 android 中的测验应用程序。我需要使用单选按钮显示问题及其选项。单击下一个按钮时，将显示下一个问题并显示其选项。我能够显示问题和选项，但我遇到了一个问题。

第一次第一个问题及其选项显示正常。单击下一个按钮时，将显示下一个问题，但对于选项，将显示第一个问题选项和带有单选按钮的第二个问题选项。再次单击下一个按钮时，第三个问题也会显示第一个、第二个选项。单击下一个按钮时，如何删除上一个问题的单选按钮。

我的代码：

主要的.xml

```
 <ScrollView
        android:id="@+id/scrl"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/widgetnotes"
        android:layout_margin="6dp"
        android:background="#FFFFFF"
        android:scrollbars="none" >

        <RelativeLayout
            android:id="@+id/rel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/tv_question"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#000000" />

            <LinearLayout
                android:id="@+id/chklnlayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/tv_question"
                android:orientation="vertical" >
            </LinearLayout>
        </RelativeLayout>
    </ScrollView>

Page.java
{
 ------

//first question----
optionslayout = (LinearLayout) findViewById(R.id.chklnlayout);

                tv.setText(question);
                tv.setTextColor(Color.parseColor("#000000"));

                RadioGroup radiogroup = (RadioGroup) new RadioGroup(Page.this);

                optionslayout.addView(radiogroup);

                for (int k = 0; k < arr.length; k++) {
                    RadioButton newRadioButton = new RadioButton(Page.this);

                    newRadioButton.setText(arr2.get(k));
                    newRadioButton.setTextColor(Color.parseColor("#000000"));

                    radiogroup.addView(newRadioButton);

                }

//next click--

public void next(View v)
{
   if (i < array.length - 1) {
    i++;

optionslayout = (LinearLayout) findViewById(R.id.chklnlayout);

            tv.setText(question);
            tv.setTextColor(Color.parseColor("#000000"));

            RadioGroup radiogroup = (RadioGroup) new RadioGroup(Page.this);

            optionslayout.addView(radiogroup);

            for (int p = 0; p < nextarr.length; p++) {
                RadioButton newRadioButton = new RadioButton(Page.this);

                newRadioButton.setText(arr6.get(p));
                newRadioButton.setTextColor(Color.parseColor("#000000"));

                radiogroup.addView(newRadioButton);

            }

}

} 
```

我尝试`optionslayout.removeAllViews();`进行下一个单击操作，但是当我保持它不显示下一个问题的选项时。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:09:09.303

试试这个：

将无线电组设置为，

```
radioGroup.clearCheck(); 
```

和单选按钮为：

```
.setChecked(false); 
```

# list - 用有限的程序实现列表（lisp）

> ID：16096320
> 
> 赞同：2
> 
> 时间：2013-04-19T02:37:30.450
> 
> 标签：list, lisp, clisp, cons

我目前正在制作一个基本地址簿的 clisp 任务。然而，这个任务的警告是我只能使用 cons、car、cdr、cond、if、eq、assoc 和 setf 来完成任务......

我很早就决定简单地实现我自己的列表并附加程序来简化流程，但这并不是特别好。坦率地说，我不知道如何仅使用上述过程生成非点列表。

这是我正在尝试做的事情：

```
(defun create-entry (name email phone-number address)
  (list (cons 'name name)
        (cons 'email email)
        (cons 'phone-number phone-number)
        (cons 'address address))) 
```

显然我不能在这里使用列表，到目前为止，我唯一的解决方案是使用姓名和电子邮件，使用电话号码和使用地址，这并不是我想要的。

TL;DR 有没有办法只使用 cons、car、cdr、cond、if、eq、assoc 和 setf 来实现列表过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:48:36.697

列表只是一堆 cons 单元格，将一个单元格链接到下一个单元格，并`nil`作为最后一个 cdr。因此，您可以`create-entry`像这样实现您的功能：

```
(defun create-entry (name email phone-number address)
  (cons (cons 'name name)
    (cons (cons 'email email)
      (cons (cons 'phone-number phone-number)
        (cons (cons 'address address)
          nil))))) 
```

或者，您可以像这样实现您自己的`list`函数版本：

```
(defun your-own-list (&rest l) l)

(defun create-entry (name email phone-number address)
  (your-own-list 
    (cons 'name name)
    (cons 'email email)
    (cons 'phone-number phone-number)
    (cons 'address address))) 
```

但这感觉与任务的精神背道而驰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:02:11.720

已经检查过，但你知道，最终你会这样做：

```
(defun create-entry (name email phone-number address)
  `((name  . ,name)
    (email . ,email)
    (phone-number . ,phone-number)
    (address . ,address))) 
```

它`quasiquote`使用方便的语法来创建结构化列表。

# cosm - COSM MQTT 订阅未获得最新更新值

> ID：16096323
> 
> 赞同：0
> 
> 时间：2013-04-19T02:37:48.540
> 
> 标签：cosm

我希望 mosquitto_sub 应该得到从 mosquitto_pub 发送的最新值。

但似乎不是真的，订阅总是在最新更新之前获得价值。

这是我的测试步骤：

我先启动 mosquitto_sub：

mosquitto_sub：得到值 5（最后一个众所周知，没关系）

然后使用 mosquitto_pub 发送值并检查 mosquitto_sub 端：

mosquitto_pub：发送值 1

mosquitto_sub: 仍然有值 5

mosquitto_pub：发送值 2

mosquitto_sub：得到值 1

mosquitto_pub：发送值 3

mosquitto_sub：得到值 2

mosquitto_pub：发送值 4

mosquitto_sub：得到值 3

以下是重现此问题的命令：（请记住将 YOUR_API_KEY/YOUR_FEED_ID/YOUR_DATASTREAM 更改为您的设置）

订阅方：

```
$ mosquitto_sub -h api.cosm.com -t YOUR_API_KEY/v2/feeds/YOUR_FEED_ID/datastreams/YOUR_DATASTREAM.csv 
```

发布方：

```
$ for i in 0 1 2 3 4 5 6 7 8 9 10; do mosquitto_pub -h api.cosm.com -t YOUR_API_KEY/v2/feeds/YOUR_FEED_ID/datastreams/YOUR_DATASTREAM.csv -m "$i"; sleep 1; done 
```

显然订阅端没有显示 10 0 1 2 3 4 5 6 7 8 9 10。

以下是我在测试中得到的：

```
2013-05-09T00:40:20.009034Z,10
2013-05-09T00:40:20.009034Z,10
2013-05-09T00:47:52.062114Z,1
2013-05-09T00:47:54.325130Z,2
2013-05-09T00:47:54.325130Z,2
2013-05-09T00:47:58.398895Z,4
2013-05-09T00:47:58.398895Z,4
2013-05-09T00:48:02.680777Z,6
2013-05-09T00:48:04.721811Z,7
2013-05-09T00:48:06.813412Z,8
2013-05-09T00:48:06.813412Z,8
2013-05-09T00:48:11.278083Z,10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:15:11.183

这可能最好通过邮寄 Cosm 支持来处理，因为听起来这可能是他们最后的某种问题（可能在不应该缓存的时候缓存了一些东西）

# c# - 如何通过 Javascript 检查 CheckBoxList 的值

> ID：16096328
> 
> 赞同：1
> 
> 时间：2013-04-19T02:38:02.040
> 
> 标签：c#, javascript, asp.net, webforms, checkboxlist

```
--------------------------------------------
Phone number  : ________________________
Email Address : ________________________
You prefer to receive the notification by:
[ ] SMS [ ] Email 
-------------------------------------------- 
```

这是我在 .aspx 页面中的内容（我无法发布图片）、两个文本框和两个复选框。这些复选框是数据绑定复选框，其中“SMS”和“Email”是当前数据库中的两个可用值。

```
 ckBxPreferredMethod.DataSource = dt;
        ckBxPreferredMethod.DataTextField = "Text";
        ckBxPreferredMethod.DataValueField = "Value";
        ckBxPreferredMethod.DataBind(); 
```

我现在要做的是，使用**customvalidator**和 JavaScript（客户端验证），我想确保当且仅当用户选中 SMS 和 Email 复选框时，他们必须填写他们的电话号码和电子邮件地址。如果他们未选中 SMS，则“电话号码”是一个可选字段。

我更擅长 C#，就像我使用 JavaScript 一样，所以我使用以下方法在服务器端完成了这项工作，没有问题：

```
 protected void ckBxPreferredMethod_ServerValidate(object sender, ServerValidateEventArgs e)
    {
        if(ckBxPreferredMethod.SelectedValue == "1" && String.IsNullOrEmpty(txtHPNo.Text.Trim()))
        {
            e.IsValid = false; 
            CVemailAndSMS.ErrorMessage = "You need to enter your phone number if you want to receive by SMS"; 
        }

        if(ckBxPreferredMethod.SelectedValue == "2" && String.IsNullOrEmpty(txtEmail.Text.Trim())) 
        {
            e.IsValid = false; 
            CVemailAndSMS.ErrorMessage = "You need to enter your email if you want to receive by email"; 
        }
    } 
```

上述方法工作正常。但由于我的程序进一步复杂化，我将不得不移动这个客户端。所以 JavaScript 是必需的。

如果这涉及静态复选框，我不会有问题。但是对于数据绑定的复选框列表，我只是迷失了如何检查所选复选框的值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:56:04.743

您需要添加更多信息才能获得体面的答案。

尝试一下，我认为您想开始研究使用 JavaScript的**条件验证。**

@SEE：[http ://www.users.muohio.edu/klumbca/examples/conditional-validation-example.html?hearabout=Newspaper+Ad&hearabout_other=](http://www.users.muohio.edu/klumbca/examples/conditional-validation-example.html?hearabout=Newspaper+Ad&hearabout_other=)

请注意，如果您标记了“其他”，您只需要输入文本吗？

不保证使用的插件，但它应该为您指明正确的方向。

# java - 基于选择 JOptionPane 重启 java 游戏

> ID：16096329
> 
> 赞同：0
> 
> 时间：2013-04-19T02:38:05.520
> 
> 标签：java, swing, main

我有一个简单的游戏，其中有一个 JOptionPane 弹出窗口，可以选择是或否。

因此，如果用户点击“否”，那么游戏当然会关闭，但是如果用户点击“是”，我希望游戏重新开始。

我通过以下方式使它起作用：（只需再次调用 main() 方法。main.Main.main(null);

问题 ：

它正在开始游戏的另一个实例，但前一个实例也在那里。

如何在启动新实例之前关闭前一个实例？或者还有什么其他方法可以解决这个问题？

这是带有 JOptionPane 的类代码

```
 public void popupWinMessage(String message)
{
     //default icon, custom title
    int n = JOptionPane.showConfirmDialog(
        null,
        message,
        "",
        JOptionPane.YES_NO_OPTION);

    if(n == JOptionPane.YES_OPTION){
        JOptionPane.showMessageDialog(null, "Alright, here we go again");
        main.Main.main(null);
    }
    else {
        JOptionPane.showMessageDialog(null, "Thanks for playing the battleships game");
        System.exit(0);
    } 
```

这是我更新的主要方法（我仍然对发生的事情感到困惑）：

```
package main;

imports

public class Main {

public Controller theController = new Controller(new Game(), new Frame());
/**
 * @param args
 */
public static void main(String[] args) 
{
    newGame();
}

public static void newGame()
{
    theController.;
} 
```

}

我整个游戏的目录是这样的

[http://i.imgur.com/7iKJQwu.png](http://i.imgur.com/7iKJQwu.png)

JOption 窗格所在的方法在视图的 Frame 类中。

```
public Controller(final Game newGame, final Frame newView) 
{
    this.game = newGame;

    this.view = newView;
    this.view.setVisible(true);

    //Gets the board arrays into these local variables here for us to use
    playerBoard = newGame.DisplayPlayerBoard();
    computerBoard = newGame.DisplayCompBoard();

    colourGrids();

    this.view.addGridActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent ae) 
        {
            Object o = ae.getSource();
            if(o instanceof JButton) 
            {
                JButton btn = (JButton) o;

                int xValue = (Integer) btn.getClientProperty("row");
                int yValue =  (Integer) btn.getClientProperty("column");

                int tempShipType = computerBoard[xValue][yValue];

                newGame.tryHitComputer(xValue, yValue);

                btn.setEnabled(false);

                if(tempShipType != -1)
                {
                   if(newGame.checkShipStatus(tempShipType) == true)
                      {
                         System.out.println(shipDowns[tempShipType]);
                         newView.popupMessage(shipDowns[tempShipType]);
                      }
                }

                //Code here for the computer to try hit your ships

                newGame.tryHitPlayer();

                colourGrids();

                System.out.println(newGame.isGameWon());

                if (newGame.isGameWon() == true)
                {
                    System.out.println("Game has been won, do something to stop it at some point");
                    newView.popupWinMessage("Game has been won\nDo you wish to play again?");
                }
                if (newGame.isGameLost() == true)
                {
                    System.out.println("Game has been lost, the silly AI has beaten you\nDo you wish to play again?");
                    newView.popupWinMessage("Game has been lost, the silly AI has beaten you\nDo you wish to play again?");
                }

            }
            else 
            {
                System.out.println("The listener was not attached to a JButton as expected - " + o.getClass());
            }
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:43:20.193

不要再次调用 main 方法。有一个 start() 方法来启动你的游戏并让对话框在答案为“是”时调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:43:23.460

一种选择是向您的类添加一个`restartGame()`方法。`Controller`由于您`popupWinMessage()`从`Controller`构造函数调用，您可以修改它以获取一个`Controller`对象并将`this`引用传递给它。然后`popupWinMessage()`方法可以简单地调用`restartGame()`传递给它的实例上的方法。

# scala - 玩！找不到参数化简器的隐式值

> ID：16096330
> 
> 赞同：1
> 
> 时间：2013-04-19T02:38:09.087
> 
> 标签：scala, playframework, playframework-2.1

我正在跟随Play！[http://mandubian.com/2013/01/13/JSON-Coast-to-Coast/](http://mandubian.com/2013/01/13/JSON-Coast-to-Coast/)上的 2.1 海岸到海岸教程，但即使是最琐碎的示例也无法正常工作。

当我编译我的项目时，我得到一个错误：

> 找不到参数化简器的隐式值：play.api.libs.functional.Reducer[play.api.libs.json.JsString,B]

我的控制器代码如下：

```
package controllers

import play.api._
import play.api.mvc._

import play.api.libs.json._
import play.api.libs.json.Reads._
import play.api.libs.functional.syntax._

object MyController extends Controller{

  val validate = (
    (__ \ 'title).json.pick[JsString] and
    (__ \ 'desc).json.pick[JsString]
  ).reduce

  def test() = Action { implicit request =>
    Ok("test")
  }
} 
```

为了让这个工作，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:50:40.173

这里的语法不太正确。'pick' 返回一个 JsValue（Play! 等效于有效的 Json 类型，包括字符串、数组等）。

要验证多个 json 字段，您需要使用“pickBranch”，它返回一个 JsObject（基本上相当于 Map[String, JsValue]）。我猜reduce是几个JsObjects的合并操作。

实际上，我还没有找到“pick”的好用例。'\' 语法似乎可以用更少的代码和混乱来完成等效的工作。

# php - 你能让 Mink 跟随从 https 到 http 的重定向并保持会话吗？

> ID：16096338
> 
> 赞同：1
> 
> 时间：2013-04-19T02:38:55.503
> 
> 标签：php, symfony, acceptance-testing, mink, goutte

我正在尝试使用 codeception 和 PhpBrowser（它使用 Mink 和 Goutte 驱动程序）测试我的 ajax 脚本。

我的 ajax 脚本需要经过身份验证的会话才能执行，并且会话是通过我的登录页面创建的。

我在获取 PhpBrowser/Link 会话时遇到问题，在登录后仍然存在。

我创建了一个 PhpBrowser Helper 函数来覆盖 _initialize，这样我就可以让 https 在我的测试服务器上使用自签名证书，如下所示：

```
public function _initialize()
{
    $client = new \Behat\Mink\Driver\Goutte\Client();
    $driver = new \Behat\Mink\Driver\GoutteDriver($client);

    $curl_config = array_merge($this->curl_defaults, $this->config['curl']);
    array_walk($curl_config, function($a, &$b) { $b = "curl.$b"; });
    $curl_config['ssl.certificate_authority']=false;
    $client->setClient(new \Guzzle\Http\Client('', $curl_config));
    $client->followRedirects(true);
    $this->session = new \Behat\Mink\Session($driver);
    \Codeception\Util\Mink::_initialize();
} 
```

现在，当我运行验收测试时，登录似乎正常工作，并且重定向基于 apache access_logs 发生，但 PHPSESSID cookie 不会持续存在，因此登录后我的所有访问请求都是未经授权的。

我尝试通过比较

```
$I->getCurrentUrl()
$I->getResponseHeaders() 
```

重定向之前和之后。

currentUrl() 返回值永远不会到达重定向目标，尽管 apache access_logs 另有说明。

getResponseHeaders() 在表单提交后返回一个 PHP_SESSID cookie，但对于之后的所有请求，它并不存在。

任何想法/猜测为什么在登录期间创建的会话在重定向后没有持续存在？

我是否需要对 Mink 会话进行任何特殊配置以使它们遵循重定向，还是我做错了什么？

在此先感谢您的帮助！

-埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:54:15.787

我终于弄清楚了这个问题。

我必须在覆盖的 _initialize 函数中明确设置要为 /Guzzle/Http/Client 对象保存的 cookie。

```
public function _initialize()
{
    $client = new \Behat\Mink\Driver\Goutte\Client();
    $driver = new \Behat\Mink\Driver\GoutteDriver($client);
    $cookiePlugin = new \Guzzle\Plugin\Cookie\CookiePlugin(new \Guzzle\Plugin\Cookie\CookieJar\ArrayCookieJar());

    $curl_config = array_merge($this->curl_defaults, $this->config['curl']);
    array_walk($curl_config, function($a, &$b) { $b = "curl.$b"; });
    $curl_config['ssl.certificate_authority']=false;
    $guzzle_client = new \Guzzle\Http\Client('', $curl_config);
    $guzzle_client->addSubscriber($cookiePlugin);

    $client->setClient($guzzle_client);
    $client->followRedirects(true);
    $this->session = new \Behat\Mink\Session($driver);
    \Codeception\Util\Mink::_initialize();
} 
```

# java - JSP 递归导入

> ID：16096343
> 
> 赞同：0
> 
> 时间：2013-04-19T02:39:43.263
> 
> 标签：java, jsp, include, jspinclude

我有一个主 JSP 文件，我想将一组递归匹配文件从我的 Web 应用程序导入（它们是 mustache 模板）。

我想做这样的事情：

```
<jsp:include page="**/*.mustache"/> 
```

或者

```
<%@ include file="**/*.mustache" %> 
```

有没有办法通过 JSTL 标签等来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:53:35.183

您可以使用类似于上述导入语句的 JSTL，就像在 JSP 中一样`<c:import>`。`<c:param>`该`<c:import>`标记提供操作的所有功能，但也允许包含绝对 URL。

我们还可以包含那些不属于当前 Web 应用程序但位于 Web 应用程序之外的内容或文件。所以，jstl`<c:import>`比`<jsp:include>`.

通过以下语法

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
   <c:import url = "yourPage.jsp">
<c:param name = "anyParameter" value = "<h1>Here is your value</h1>"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:56:41.407

我用一些 hacky scriptlet 解决了这个问题：

```
<%
String path = pageContext.getServletContext().getRealPath("/");
Collection<String> paths = new ArrayList<String>();
for (File file : FileUtils.listFiles(new File(path), new String[] { "ext" }, true)) {
    //Make the path relative
    paths.add(file.getAbsolutePath().substring(path.length()));
}
%>
<c:forEach items="<%=paths%>" var="path">
    <jsp:include page="../${path}"/>
</c:forEach> 
```

# php - PHP Mailer --- 回复：--- Return-path --- SetFrom

> ID：16096348
> 
> 赞同：3
> 
> 时间：2013-04-19T02:40:31.763
> 
> 标签：php, email, phpmailer

我正在通过 PHP Mailer 发送邮件。[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)

我希望能够将 From 设置为一封电子邮件，将 REPLY-TO 设置为另一封电子邮件，并将 RETURN-PATH 设置为另一封电子邮件。

主要是.. 我希望退回的电子邮件发送到类似 BOUNCEDemails@bademail.com 我希望 RETURN PATH 可以做到这一点。

如果收到电子邮件的用户我不希望他们从 BOUNCEDemails 等中看到它，我想给他们一个选项来回复真实的电子邮件地址。

我需要将退回的电子邮件转到单独的电子邮件，因为我不希望回复收到许多不良电子邮件。ETC..

**这是我所拥有的： 不起作用**

```
$mail->AddAddress('ed@RealEmail.org', 'John Doe');
$mail->AddReplyTo('replytoMe@email.com', 'Reply to email');
$mail->SetFrom('mailbox@email.com', 'From Name and Email');
$mail->AddCustomHeader('Return-path: BOUNCEDemails@bademail.com'); 
```

上面的代码回复 SetFrom 并将所有退回邮件发送给 SetFrom。任何想法如何将两者分开？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T07:55:48.070

设置它的正确方法（截至 2013 年 7 月）是使用：

```
$mail->ReturnPath='bounce_here@domain.com'; 
```

phpmailer 源包含以下内容，这是相当不言自明的：

```
if ($this->ReturnPath) {
  $result .= $this->HeaderLine('Return-Path', '<'.trim($this->ReturnPath).'>');
} elseif ($this->Sender == '') {
  $result .= $this->HeaderLine('Return-Path', '<'.trim($this->From).'>');
} else {
  $result .= $this->HeaderLine('Return-Path', '<'.trim($this->Sender).'>');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T09:50:09.137

您可以使用

```
$mail->AddReplyTo('name@yourdomain.com', 'First Last'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T13:57:37.470

```
$mail->AddReplyTo('replytoMe@email.com', 'Reply to email');
$mail->AddAddress('ed@RealEmail.org', 'John Doe'); 
```

注意顺序！AddReplyTo 必须在 AddAddress 之前！！！

# windows-phone-7 - Windows Phone 在一次通话中按顺序发送多个 Web 请求

> ID：16096350
> 
> 赞同：0
> 
> 时间：2013-04-19T02:41:14.530
> 
> 标签：windows-phone-7, httpwebrequest, windows-phone-8

最近，我在 Windows Phone 上做一个项目。在这个项目中，要验证用户，我需要检查 3 个 web API，逻辑如下： 步骤 1：访问 web api 1 以获取令牌 步骤 2：访问 web api 2 以获取用户名/密码第 1 步中检索到的令牌 第 3 步：访问 Web API 3 以验证第 2 步中的用户名/密码

你可以看到我们需要按顺序访问这 3 个 API。众所周知，window phone现在是异步访问网络，这给这些API访问的有序性带来了很大的挑战，也使得源代码难以维护。

我也考虑了下面的同步源代码，但是我发现访问网络有一些问题，会抛出很多异常。比如抛出异常时，我尝试使用异步web请求访问同一个URL，就OK了。我现在很努力。而且我必须引入线程来调用它以避免阻塞UI线程。

内部静态类 HttpWebRequestExtensions { public const int DefaultRequestTimeout = 60000;

```
 public static bool IsHttpExceptionFound = false;

    public static WebResponse GetResponse(this WebRequest request, int nTimeOut = DefaultRequestTimeout)
    {
        var dataReady = new AutoResetEvent(false);
        HttpWebResponse response = null;

        var callback = new AsyncCallback(delegate(IAsyncResult asynchronousResult)
        {
            try
            {
                response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
                dataReady.Set();
            }
            catch(Exception e)
            {
                IsHttpExceptionFound = true;

            }
        });

        request.BeginGetResponse(callback, request);
        if (dataReady.WaitOne(nTimeOut))
        {
            return response;
        }

        return null;
    }

    public static WebResponse PostRequest(this HttpWebRequest request, String postData, int nTimeOut = DefaultRequestTimeout)
    {
        var dataReady = new AutoResetEvent(false);
        HttpWebResponse response = null;
        var callback = new AsyncCallback(delegate(IAsyncResult asynchronousResult)
        {
            Stream postStream = request.EndGetRequestStream(asynchronousResult);    //End the operation.
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);                    //Convert the string into a byte array.
            postStream.Write(byteArray, 0, postData.Length);                        //Write to the request stream.
            postStream.Close();
            dataReady.Set();
        });
        request.BeginGetRequestStream(callback, request);
        if (dataReady.WaitOne(nTimeOut))
        {
            response = (HttpWebResponse)request.GetResponse(nTimeOut);
            if (IsHttpExceptionFound)
            {
                throw new HttpResponseException("Failed to get http response");
            } 
            return response;
        }
        return null;  
    }

} 
```

关于使用异步 Web 请求来解决我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:13:25.133

这里有一个使用异步 Web 服务以链式方式调用 WP7 上的 Microsoft Translator 服务的示例

也许它会给你一些指示？ [http://blogs.msdn.com/b/translation/p/wp7translate.aspx](http://blogs.msdn.com/b/translation/p/wp7translate.aspx)

# graphics - Intel HD Family 是否符合 BB 10 Alpha Simulator 的最低图形要求

> ID：16096352
> 
> 赞同：0
> 
> 时间：2013-04-19T02:41:26.657
> 
> 标签：graphics, blackberry-simulator, blackberry-10

我正在尝试运行 BB10 Simulator 来移植我的网络应用程序。模拟器运行正常，直到我在模拟器上启动任何应用程序，然后应用程序崩溃并且永远不会加载。模拟器运行的事实让我觉得我符合最低要求。

但是看了我的显卡之后，我不确定我是否这样做。因此，该应用程序在 sim 上崩溃。英特尔高清系列显卡是否符合最低图形要求`NVIDIA GeForce 8800 GT or higher or an ATI Radeon HD 2600 or higher`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:29:24.113

BB10 模拟器并没有真正使用 GPU 加速，我已经在 MacMini (i5 HD3000) 和联想笔记本电脑 (i3 HD3000) 上成功使用了它。

模拟器运行真正的操作系统，因此与 Ripple 不同，如果你做了一些被禁止的事情（在你不应该写的地方写，访问你没有请求的资源——PIM、BBM ID、互联网），那么 QNX 内核就会杀死你。（仔细检查 bar-descriptor.xml）

我从未使用过 webworks，但安装 Native SDK 可能是个好主意：Momentics（C++/Cascades IDE）可能会令人恐惧，但有一个“QNX 设备”透视图可以打开浏览器到 {simulator |real phone} 文件系统和访问日志。您将获得更多详细信息来解释您的应用程序被终止的原因。

# matlab - 如何用一个简单的 for 循环来实现它

> ID：16096353
> 
> 赞同：0
> 
> 时间：2013-04-19T02:41:28.077
> 
> 标签：matlab, for-loop

问题如下：（这是我的第一个 Matlab 代码）所以，我有一个速度修复，例如

```
Mach=0.2 
```

为此，我有在计算中进一步使用的系数，例如

```
CL0=0.3956+0.0101*Mach+0.0657*Mach^2+0.1438*Mach^3;
CLa=5.7814+0.1402*Mach+0.959*Mach^2+2.008*Mach^3; etc. 
```

这些我稍后在计算矩阵 A 的特征多项式的根时使用。然后我取根来计算以下内容：

```
delta_SP=real(s(1));
omega_SP=imag(s(1));
omegan_SP=sqrt(delta_SP^2+omega_SP^2);
zeta_SP=-delta_SP/sqrt(delta_SP^2+omega_SP^2); 
```

问题是当我想对几个`Mach`数字执行此操作时，范围

```
Mach=0.2:0.1:0.8 
```

你能帮我做一个for循环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:51:55.303

请尝试如下

```
i = 1;
CL0 = 0;
CLa = 0;
for Mach = 0.2:0.1:0.8
    CL0(i) = 0.3956+0.0101*Mach+0.0657*Mach^2+0.1438*Mach^3;
    CLa(i) = 5.7814+0.1402*Mach+0.959*Mach^2+2.008*Mach^3;
    % and do all other calculations right over here according to your
    % problem
    i = i + 1;
end 
```

希望这可以帮助 。. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:44:38.450

`mach`因此，在您的问题中，您与, `CL0`and `CLa`to`s`等无关`delta`...但是要生成所有 CLa dna CL0 值，您实际上甚至不需要循环：

```
Mach=0.2:0.1:0.8;
CL0=0.3956+0.0101*Mach+0.0657*Mach.^2+0.1438*Mach.^3;
CLa=5.7814+0.1402*Mach+0.959*Mach.^2+2.008*Mach.^3; 
```

请注意，我使用`.^`的不是 just `^`，点表示对矩阵的每个元素执行幂运算符，而不是对整个矩阵执行幂运算符。

我无法评论您代码的其他行，因为我看不到它们是如何连接的？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T02:45:27.677

不应在标题中使用“不知道如何”一词，这会使人们远离您的帖子。

# windows - 如何记录文件夹中文件的名称？

> ID：16096356
> 
> 赞同：0
> 
> 时间：2013-04-19T02:41:48.753
> 
> 标签：windows, perl

例如我有：
文件目录：C:\Users\Desktop\program
目录中的文件：奶酪（文件夹），蔬菜（txt 文件），肉（doc 文件）
我如何记录文件和文件夹的名称目录？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:49:49.510

另一种方法是使用[glob](http://perldoc.perl.org/functions/glob.html)：

```
my @files = <*>; 
```

这将为您提供当前目录中的所有文件。

如果您只想查找某些文件，此方法很方便：

```
my @jpegs = <*.jpg>; 
```

如果这不是您想要的目录，请[切换到当前目录](http://perldoc.perl.org/functions/chdir.html)或包含路径：

```
my @files = </foo/bar*>; 
```

请注意，即使在 Windows 上执行此操作，您也应该[使用正斜杠。](http://perldoc.perl.org/File/Glob.html#NOTES)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:49:03.497

尝试以下操作：

```
opendir FOLDER, $folder or die "Cant open folder $folder: $!";
my @file= readdir FOLDER;
closedir FOLDER; 
```

# jquery - Flowplayer 显示覆盖错误

> ID：16096358
> 
> 赞同：0
> 
> 时间：2013-04-19T02:42:02.530
> 
> 标签：jquery, flowplayer

我正在尝试使用流播放器单击锚标记以加载覆盖视频播放器。它给了我一个类型错误，即覆盖不是一个函数。我尝试了所有可能的版本，但问题仍然存在。我的html代码如下

```
<a href="videos/myvideo.webm" title="my video" class="video" rel="video0"><img id="clip0" src="images/icons/playClip.png"/></a>
<a href="videos/myvideo1.webm" title="my video1" class="video1" rel="video1"><img id="clip1" src="images/icons/playClip.png"/></a>

        <div id="overlay">
            <a class="close"></a>
            <div id="player">&nbsp;</div>
        </div> <!-- this is my div to where i want a modal window type video popup --> 
```

我的javascript如下

```
$(function () {
var player = flowplayer("player", "js/flowplayer-3.2.16.swf"); 

$("a[rel]").overlay({
    mask: {
    color: '#000',
    opacity: 0.2
    },
    onLoad: function () {
    player.play(this.getTrigger().attr("href"));
    },
    onClose: function () {
    player.unload();
    }
}); 
```

});

任何人都可以帮助解决问题吗？

```
TypeError: $(...).overlay is not a function
onClose: function () { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T01:00:41.780

使用构造函数语法：

```
$f("a[rel]", "js/flowplayer-3.2.16.swf", {
    // invoked when player loads (not a clip specific event)
    onLoad: function () {
        player.play(this.getTrigger().attr("href"));
    },

    onClose: function() {
        player.unload();
    }
}); 
```

或者 jQuery 语法：

```
 $("a[rel]").flowplayer("js/flowplayer-3.2.16.swf", 
    {
    // invoked when player loads (not a clip specific event)
    onLoad: function () {
        player.play(this.getTrigger().attr("href"));
        },

    onClose: function() {
        player.unload();
        } 
  }) 
```

**参考**

*   [FlowPlayer：Flash JavaScript API](http://flash.flowplayer.org/documentation/api/flowplayer.html)

# ios - SQLite 在 sqlite3DbMallocRaw 中崩溃

> ID：16096359
> 
> 赞同：5
> 
> 时间：2013-04-19T02:42:08.247
> 
> 标签：ios, database, sqlite

我们在面向 iOS 的数据库框架中经常看到这个崩溃报告。

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Subtype: KERN_INVALID_ADDRESS at 0x0000001a
Triggered by Thread:  3

Thread 3 name:
Thread 3 Crashed:
0   libsqlite3.dylib                0x3a1fb150 sqlite3DbMallocRaw + 60 (sqlite3.c:19398)
1   libsqlite3.dylib                0x3a1cf950 yy_reduce + 19164 (sqlite3.c:19499)
2   libsqlite3.dylib                0x3a1cadbc sqlite3Parser + 252 (sqlite3.c:116602)
3   libsqlite3.dylib                0x3a1ca558 sqlite3RunParser + 260 (sqlite3.c:117427)
4   libsqlite3.dylib                0x3a1c9f18 sqlite3Prepare + 400 (sqlite3.c:99613)
5   libsqlite3.dylib                0x3a1c9c68 sqlite3LockAndPrepare + 140 (sqlite3.c:99705)
6   libsqlite3.dylib                0x3a204746 sqlite3_prepare_v2 + 26 (sqlite3.c:99784) 
```

它总是在准备中崩溃。我们的准备代码没什么特别的。

```
- (DBStatement *)_prepareStatement:(NSString *)sql error:(NSError **)error
{
    if (sql == nil) {
        return nil;
    }

    const char *sqlCStr = [sql UTF8String];
    sqlite3_stmt *stmt;
    int result = sqlite3_prepare_v2(_db, sqlCStr, -1, &stmt, NULL);
    if (result == SQLITE_OK) {
        // create statement object
    }

    // ...

    return statement;
} 
```

有没有人见过这个？是什么导致了这次崩溃？在尝试执行准备之前，我们正在检查 SQL 字符串是否为 nil，所以我认为这不是我们代码中的 NULL 指针取消引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T13:29:01.667

我也有同样的错误。

我注意到当多个`INSERT`/`SELECT`语句一个接一个地触发时会发生这种情况。

`@synchronized`我通过在 sqlite 代码周围添加块来修复它。

```
@synchronized (self){
  // sqlite code
} 
```

# css - 如何以编程方式更改 Spark WindowedApplication 状态栏外观？

> ID：16096361
> 
> 赞同：0
> 
> 时间：2013-04-19T02:42:16.077
> 
> 标签：css, apache-flex, statusbar, skin

目前我正在使用[这篇文章](http://jdls-flexism.blogspot.com.au/2011/07/flex-40-status-bar-skinning.html)中的想法来皮肤我的 s:WindowedApplication，所以在我的组件声明中我有`skinClass="StatusBarSkin1"`. 同样在我的预初始化函数中，我有一个方法可以使用标签将正确的文本放在状态栏上，效果很好。

当我尝试`skinClass`在我的 CSS 中设置 时出现问题，因此我可以在 和 之间进行`StatusBarSkin1`更改`StatusBarSkin2`。所以我正在做类似的事情：

```
Style1.css
----------

.mainWindow
{
     skinClass: ClassReference("StatusBarSkin1");
}

Style2.css
----------

.mainWindow
{
     skinClass: ClassReference("StatusBarSkin2");
} 
```

如果我这样做，主题加载正常，但状态栏的文本不会显示；如果我在 WindowedApplication 本身中设置主题，那么当我使用方法更改 CSS 文件时，我无法更改状态栏上的皮肤。

有没有比我现在做的更好的方法来实现这个？

**编辑**：

状态栏对象只是一个`HGroup`带有一些标签和内容的对象。

状态栏皮肤由以下代码给出：

```
<s:Group id="statusBar"
     width="100%"
     minHeight="20">

<!-- status bar fill -->
    <s:Rect left="0"
            right="0"
            top="0"
            bottom="0">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry color="0x575757" />
                    <s:GradientEntry color="0x373737" />
                </s:LinearGradient>
            </s:fill>
    </s:Rect>

<!-- status bar highlight -->
    <s:Rect left="1"
            right="1"
            top="1"
            bottom="0">
            <s:stroke>
                <s:LinearGradientStroke rotation="90"
                                        weight="1">
                    <s:GradientEntry color="0x575757" />
                    <s:GradientEntry color="0x373737" />
                </s:LinearGradientStroke>
             </s:stroke>
    </s:Rect>

<!-- status text -->
<!--- @copy spark.components.WindowedApplication#statusText -->
    <s:Label id="statusText" />

    <s:Group id="statusBarSkin" />

</s:Group> 
```

然后我的 preinit 函数是

```
private function InitStatusBar():void
{
    statusGroup = new StatusBar();
    (statusBar as Group).addElement(statusGroup);
} 
```

# c# - 在调用者处需要“out”和“ref”关键字是否有技术原因？

> ID：16096364
> 
> 赞同：6
> 
> 时间：2013-04-19T02:42:46.473
> 
> 标签：c#

使用`ref`or`out`参数调用方法时，必须在调用方法时指定适当的关键字。从样式和代码质量的角度来看，我理解这一点（例如，[这里](https://stackoverflow.com/a/1393958/1118660)解释过），但我很好奇在调用者中指定关键字是否还有技术需求。

例如：

```
static void Main()
{
    int y = 0;
    Increment(ref y); // Is there any technical reason to include ref here?
}

static void Increment(ref int x)
{
    x++;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T02:47:35.747

我能想到的唯一技术原因是重载解决方案：你可以

```
static void Increment(ref int x) 
```

并且

```
static void Increment(int x) 
```

[这是允许的](http://ideone.com/uo45p2)；如果没有`ref`调用，编译器将无法区分它们。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T02:47:48.333

如果您要问是否可以设计该语言以使呼叫站点不需要这些语言，答案是肯定的。没有特别的原因他们不能被排除在外。编译器从元数据中获得了它需要的所有信息，因此它可以进行适当的转换。

也就是说，这样做会使这两个重载变得不可能：

```
public void DoSomething(int x);
public void DoSomething(ref int x); 
```

编译器将无法消除歧义。

尽管`ref`and`out`可以是可选的，但在这种情况下，这些重载是允许的。并且编译器可以采用默认值（即非参考），或者发出歧义错误并让您指定您真正想要的那个。

综上所述，我*喜欢*在通话现场指定`ref`和`out`。它告诉我该参数可能会被修改。在 Pascal 工作多年，其中`var`参数的传递方式与值参数的传递方式相同（调用站点的语法相同），我更喜欢 C# 在这方面的特殊性。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-19T03:13:26.320

需要修饰符的另一个原因是将参数更改为a`ref`或*破坏性更改*。如果/可以被推断出来，那么针对新签名进行编译的客户端将不会检测到恶意程序员将参数从按值更改为按引用。如果客户端调用了该方法`out`*`ref``out`*

 *```
public int Increment(int x)
{
    return x + 1;
} 
```

通过使用

```
int result = Increment(x); 
```

假设一个邪恶的开发人员决定更改实现，改为更改通过引用传递的值，如果增量导致溢出，则返回*错误代码：*

```
public int Increment(ref int x)
{
    x = x + 1;
    if(x == int.MinValue)  // overflow
        return -1;
    else 
        return 0;
} 
```

然后针对签名构建的客户端*将不会收到编译错误*，但它几乎肯定会破坏调用应用程序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T03:35:43.110

编译器在构建 IL 时需要知道它正在解释的方法参数。原因之一是重载，例如：

```
public void (ref int x) {}
public void (int x)     {} 
```

另一个原因是`out`显式允许您使用 pass-by-value 参数使用方法外的解释值。`ref`将提供指向参数的指针，从而将方法中的任何新值指向相同的内存位置*

# hadoop - Cascalog first-n - 无法加入谓词

> ID：16096371
> 
> 赞同：1
> 
> 时间：2013-04-19T02:43:28.110
> 
> 标签：hadoop, clojure, cascading, cascalog

我正在从[cascalog 项目](https://github.com/nathanmarz/cascalog)的克隆中的 lein repl 中完成[以下示例](http://nathanmarz.github.io/cascalog/cascalog.ops.html#var-first-n)。我跑过：

```
(def src [[1] [3] [2]])

(def queryx (<- [?x ?y] (src ?x) (inc ?x :> ?y)))

(?<- (stdout) [?x ?y] 
(queryx ?x ?y))
-- works

(?- (stdout) queryx) ;; produces (([1 2] [2 3] [3 4]))
-- works

(?- (stdout) (first-n queryx 1 :sort ["?x"] :reverse true))
--works 
```

但是当我尝试这个时：

```
(?<- (stdout) [?x ?y] (first-n queryx 1 :sort ["?x"] :reverse true)) 
```

我明白了

```
IllegalArgumentException Unable to join predicates together  jackknife.core/throw-illegal (core.clj:100) 
```

这似乎是一个查询创建与执行的事情。是否可以创建执行此查询的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:09:28.530

根据文档，`first-n`返回一个查询，一个查询对象也可以作为数据源。

如果你这样做，以你自己的例子：

```
(?<- (stdout) [?x ?y] (queryx ?x ?y)) 
```

您将 ?x 和 ?y 绑定到查询的输出，因此它可以工作。

在错误代码中，没有绑定 ?x 和 ?y ，这就是异常的原因。只需添加绑定即可。

```
(?<- (stdout) [?x ?y] ((first-n queryx 1 :sort ["?x"] :reverse true) ?x ?y)) 
```

请记住，内部定义的 ?x 和 ?y`queryx`仅适用于该查询，并且它们不会自动用于您使用该 queryx 作为数据源的任何地方，因此您需要如上所示显式绑定它们。

# google-analytics - Google Analytics - 两个帐户的出站链接跟踪

> ID：16096373
> 
> 赞同：1
> 
> 时间：2013-04-19T02:43:43.287
> 
> 标签：google-analytics, event-tracking

我成功地跟踪了我网站上的页面以向两个 Google Analytics 帐户报告，但是，我无法获得出站链接跟踪来跟踪 Google Analytics 帐户中的事件（它也没有跟踪）。为什么记录出站链接功能不起作用的任何想法？下面是我的代码：

```
<script type="text/javascript">

  var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-1xxxxxx-x']); 
_gaq.push(['_setDomainName', 'mysite.com']); 
_gaq.push(['_setAllowLinker', true]); 
_gaq.push(['_trackPageview']); 

_gaq.push(['b._setAccount', 'UA-2xxxxxx-x']);
_gaq.push(['b._setDomainName', 'mysite.com']);
_gaq.push(['b._setAllowLinker', true]);
_gaq.push(['b._trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

function recordOutboundLink(link, category, action) { 
try { 
var onePageTracker = _gat._getTracker("UA-1xxxxxx-x"); 
var twoPageTracker = _gat._getTracker("UA-2xxxxxx-x");
onePageTracker._trackEvent(category, action); 
twoPageTracker._trackEvent(category, action);
setTimeout('document.location = "' + link.href + '"', 100) 
} catch (err) { } 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:15:30.717

看起来您正在使用基于 Google 旧的出站链接跟踪示例的代码，该示例有一些错误。

尝试以下，它使用`_gaq.push`代替：

```
function recordOutboundLink(link, category, action) { 
  try{
    _gaq.push(['_trackEvent', category,  action]);
    _gaq.push(['b._trackEvent', category,  action]);
  } catch(ignore){};
  setTimeout(function(){document.location.href = link.href;}, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:15:46.663

您可以将其浓缩一点......因为有人认为您不需要重新定义跟踪对象，尤其是因为您正在命名它们（您只命名了一个，b）。

对于实际的事件跟踪，您使用与 pageview 相同的 _gaq.push（见下文）。

此外，不是 100% 确定，但是如果您尝试将 2 个跟踪器设置为相同的域名，则可能会发生冲突......我似乎记得在那种情况下遇到跨多个子域的跟踪问题，并且必须使用前缀 1 设置点。

```
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['a._setAccount', 'UA-1xxxxxx-x'],
              ['a._setDomainName', 'mysite.com'],
              ['a._setAllowLinker', true],
              ['a._trackPageview'],
              ['b._setAccount', 'UA-2xxxxxx-x'],
              ['b._setDomainName', '.mysite.com'],
              ['b._setAllowLinker', true],
              ['b._trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    function recordOutboundLink(link, category, action) { 
        try { 
            _gaq.push(['a._trackEvent', category, action, link],
                      ['b._trackEvent', category, action, link]); 
            setTimeout('document.location = "' + link.href + '"', 100); 
        } catch (err) { } 
    } 
</script> 
```

# jquery - Jquery同位素库将选择移动到第一个位置？

> ID：16096374
> 
> 赞同：4
> 
> 时间：2013-04-19T02:43:45.163
> 
> 标签：jquery, jquery-isotope

我在我的网站上使用 jquery isotope，并且我有一个页面，其中有一些链接，当单击一个链接时，它会重新排列同位素项目，因此单击的链接的关联 div 会重新排列到第一个位置。我可以找到这方面的任何例子，所以我正在帮助有人可以帮助解决这个问题。

谢谢 C

编辑：

这是我到目前为止所拥有的：[jsfiddle](http://jsfiddle.net/CfwnL/2/)

```
$('.button').click(function(){
  var sortName = $('#container .active');
  $('#container').isotope({ sortBy : sortName });
}); 
```

我已经用我正在尝试做的事情评论了 JS 窗格。我认为这甚至不接近，但我正在尝试。我想我走错了路。也许我应该改用 data-something="" 。

如果您有更好的想法，请告诉我。

另外，我需要让它们保持在原来的位置（显然除了选定的位置）。所以如果`6`被选中它将是`6123457`或者如果`3`被选中它将是`3124567`。上一个选定的项目将移回其原始位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:15:48.107

我叉了你的[小提琴](http://jsfiddle.net/QJABf/)。检查一下，看看它是否符合您的期望。基本上我所做的就是放弃对这些项目进行排序的概念，因为如果我没看错你的意图，你只需要把一个放在另一个`div`前面。当你重新排列时，我不确定其他项目会发生什么，所以我把它们放在最后一个位置。

编辑：我想我误读了这个问题或者那天没有足够的咖啡。我已经更新了小提琴以更好地匹配您[所描述](http://jsfiddle.net/QJABf/3/)的内容。

# c# - 我不应该调用 HostingEnvironment.UnregisterObject 吗？

> ID：16096378
> 
> 赞同：4
> 
> 时间：2013-04-19T02:44:05.650
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asynchronous

在我的 ASP.Net MVC 3 应用程序中尝试通过 smtp 实现异步电子邮件时，我遇到了[SO SmtpClient.SendAsync 阻塞了我的 ASP.NET MVC 请求](https://stackoverflow.com/questions/6935427/smtpclient-sendasync-blocking-my-asp-net-mvc-request)线程。在那里我找到了 Phil Haack 的文章：[在 ASP.NET 中实现重复后台任务的危险，](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)它提供了一种避免 AppDomain 关闭时后台线程崩溃的方法。

文章说要调用`HostingEnvironment.RegisterObject(this);`构造函数，并且`HostingEnvironment.UnregisterObject(this);`只有在调用[IRegisteredObject.Stop 方法](http://msdn.microsoft.com/en-us/library/system.web.hosting.iregisteredobject.stop.aspx)时才调用。

在一般情况下，当请求永久到达并且对象实现的范围`IRegisteredObject`是请求时，这种方法不是在每个请求中注册对象（利用电子邮件功能）并且不会取消注册吗？

可以吗？或者我也应该在异步操作完成后取消注册？

PS：正如 Damian Edwards 在链接的 SO 问题中所建议的那样，我`ThreadPool.QueueUserWorkItem`用来发送超出请求范围的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T22:48:13.797

我不确定你的意思是什么`requests arrive permanently`，`scope of the object ... is request`等等。

`Request Scope`, `permanent`, 和`ThreadPool.QueueUserWorkItem`; 这些话放在一起根本没有意义。一种用途`ThreadPool.QueueUserWorkItem`是使请求不会永远持续下去。正如 Damian Edwards 建议的那样，当您的请求立即返回时，这项耗时的工作在后台完成。

我曾经`IRegisterObject`根据收到的请求发送大量电子邮件。但是，就我而言，我使用了一个`EmailSender`实现`IRegisterObject`. 在这种情况下，它在构造函数中注册一次，在`Stop()`.

所以，简而言之，请使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern "单例模式")。

# xml - xslt 用带属性的 p 标记替换 p 标记

> ID：16096379
> 
> 赞同：1
> 
> 时间：2013-04-19T02:44:07.447
> 
> 标签：xml, xpath, xslt-1.0

我有一个带有许多 p 标签的 xml 文件——

输入 -

```
 <p>
              <inline-img class="full">
                <web-main-photo>
                  <photo src="http://yahoo.com/test.jpg"/>
                </web-main-photo>
                <data>
                  <br/>
                  <caption>
                    <p> (Nick Wass/Associated Press)</p>
                  </caption>
                </data>
              </inline-img>
            </p>
            <p>this is content </p>
            <p>After missing the past three games with an injured left
leg, Martin Erat will return to the <a href="/blog/">Capitals</a>'
lineup Saturday night at Verizon Center against the Tampa Bay
Lightning.</p>
            <p>Erat, 31, suffered the injury on April 6 at Florida
when Panthers defenseman Erik Gudbranson delivered a late hit from
behind that sent the veteran winger awkwardly into the boards. He
avoided significant harm, though, and after five consecutive days of
skating Erat said he's prepared to get back to game action.</p>
        <p>
              <inline-img class="full">
                <web-main-photo>
                  <photo src="http://yahoo.com/test.jpg"/>
                </web-main-photo>
                <data>
                  <br/>
                  <caption>
                    <p> (Nick Wass/Associated Press)</p>
                  </caption>
                </data>
              </inline-img>
            </p>
            <p>"Feeling good. Feels better every day, I'm pretty much
ready to go," Erat said, adding that while he would have much rather
been playing games with his new team the time to take part in practice
and watch the system work from above should help him make a smooth
transition.</p> 
```

输入到此结束

我希望替换内联 img 类上方的所有 p 标签，它看起来像

```
 <p channel="y.com">
          <inline-img class="full">
                <web-main-photo>
                  <photo src="http://yahoo.com/test.jpg"/>
                </web-main-photo>
                <data>
                  <br/>
                  <caption>
                    <p> (Nick Wass/Associated Press)</p>
                  </caption>
                </data>
              </inline-img>
            </p> 
```

我不想替换任何其他正常的 p 标签。所以，在这个特定的示例中，查找和替换将发生在两个地方。我使用了这个代码，但它不起作用。请告知。谢谢。

使用 xslt 1.0 的 XSLT 代码

```
 <?xml version="1.0"?>
        <xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
            <xsl:template match="/">
            <component>

                    <p>
                        <xsl:call-template name="replace-text">
                                <xsl:with-param name="text"
select="/item/content" />
                                <xsl:with-param name="replace"
select="'&lt;p&gt;&lt;inline-img class='" />
                                <xsl:with-param name="by"
select="'&lt;p channel="y.com"&gt;&lt;inline-img class='" />
                        </xsl:call-template>
                    </p>

            </component>
        </xsl:template>

        <xsl:template name="replace-text">
           <xsl:param name="text"/>
           <xsl:param name="replace" />
           <xsl:param name="by" />

           <xsl:choose>
           <xsl:when test="contains($text, $replace)">
              <xsl:value-of select="substring-before($text, $replace)"/>
              <xsl:value-of select="$by" disable-output-escaping="yes"/>
              <xsl:call-template name="replace-text">
                 <xsl:with-param name="text"
select="substring-after($text, $replace)"/>
                 <xsl:with-param name="replace" select="$replace" />
                 <xsl:with-param name="by" select="$by" />
              </xsl:call-template>
           </xsl:when>
           <xsl:otherwise>
              <xsl:value-of select="$text"/>
           </xsl:otherwise>
           </xsl:choose>
        </xsl:template>
        </xsl:stylesheet>

    Thanks so much for your help.I really appreciate it. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:24:09.070

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="p[*[1][self::inline-img]]">
  <p channel="y.com">
   <xsl:apply-templates/>
  </p>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（将提供的 XML 片段包装到单个顶部元素中 - 将其制成格式良好的 XML 文档）：

```
<t>
            <p>
                  <inline-img class="full">
                    <web-main-photo>
                      <photo src="http://yahoo.com/test.jpg"/>
                    </web-main-photo>
                    <data>
                      <br/>
                      <caption>
                        <p> (Nick Wass/Associated Press)</p>
                      </caption>
                    </data>
                  </inline-img>
                </p>
                <p>this is content </p>
                <p>After missing the past three games with an injured left
    leg, Martin Erat will return to the <a href="/blog/">Capitals</a>'
    lineup Saturday night at Verizon Center against the Tampa Bay
    Lightning.</p>
                <p>Erat, 31, suffered the injury on April 6 at Florida
    when Panthers defenseman Erik Gudbranson delivered a late hit from
    behind that sent the veteran winger awkwardly into the boards. He
    avoided significant harm, though, and after five consecutive days of
    skating Erat said he's prepared to get back to game action.</p>
            <p>
                  <inline-img class="full">
                    <web-main-photo>
                      <photo src="http://yahoo.com/test.jpg"/>
                    </web-main-photo>
                    <data>
                      <br/>
                      <caption>
                        <p> (Nick Wass/Associated Press)</p>
                      </caption>
                    </data>
                  </inline-img>
                </p>
                <p>"Feeling good. Feels better every day, I'm pretty much
    ready to go," Erat said, adding that while he would have much rather
    been playing games with his new team the time to take part in practice
    and watch the system work from above should help him make a smooth
    transition.</p>
</t> 
```

**产生想要的正确结果：**

```
<t>
   <p channel="y.com">
      <inline-img class="full">
         <web-main-photo>
            <photo src="http://yahoo.com/test.jpg"/>
         </web-main-photo>
         <data>
            <br/>
            <caption>
               <p> (Nick Wass/Associated Press)</p>
            </caption>
         </data>
      </inline-img>
   </p>
   <p>this is content </p>
   <p>After missing the past three games with an injured left
    leg, Martin Erat will return to the <a href="/blog/">Capitals</a>'
    lineup Saturday night at Verizon Center against the Tampa Bay
    Lightning.</p>
   <p>Erat, 31, suffered the injury on April 6 at Florida
    when Panthers defenseman Erik Gudbranson delivered a late hit from
    behind that sent the veteran winger awkwardly into the boards. He
    avoided significant harm, though, and after five consecutive days of
    skating Erat said he's prepared to get back to game action.</p>
   <p channel="y.com">
      <inline-img class="full">
         <web-main-photo>
            <photo src="http://yahoo.com/test.jpg"/>
         </web-main-photo>
         <data>
            <br/>
            <caption>
               <p> (Nick Wass/Associated Press)</p>
            </caption>
         </data>
      </inline-img>
   </p>
   <p>"Feeling good. Feels better every day, I'm pretty much
    ready to go," Erat said, adding that while he would have much rather
    been playing games with his new team the time to take part in practice
    and watch the system work from above should help him make a smooth
    transition.</p>
</t> 
```

# .net - 无法访问日期选择器和隐藏字段的 GetElementById（.Net WebBrowser 控件）

> ID：16096380
> 
> 赞同：1
> 
> 时间：2013-04-19T02:44:10.760
> 
> 标签：.net, browser, controls, getelementbyid

我正在做一个网络抓取工具，它将根据给定的开始和结束日期自动从站点中提取数据。这些日期实际上是一个选择器（但不确定它是 Js 选择器还是其他东西）。更改这些日期后，我已应用更改按钮，单击此按钮后，将加载网格。

![datepicker 控件][1] 我正在使用带有 C# 的 .net windows 应用程序。在表单中，我有网络浏览器控制。我正在通过 HtmlElement 类对象检索站点数据。有了这个，我可以使用 setattribute 选项以编程方式更改开始和结束日期文本框。但是当我在更改日期后聚焦时，它会显示当前日期（选择器中没有反映）。下面附上我的代码：

```
HtmlElement startdate = webBrowser1.Document.GetElementById("ctl00_txtStartDate_dateInput_text"); 

if (startdate != null)
{
startdate.SetAttribute("Value", DateTime.Today.AddDays(-1).ToString("M/dd/yyyy"));

}
![Selecting a date][2] 
```

当我查看源页面时，有一个隐藏的输入标签，如果我手动更改日期，它实际上会得到反映。我什至更改了隐藏输入标签的值。但没有运气。下面附上了在源页面中找到的隐藏输入标签：

```
 <input type="hidden" name="ctl00_txtStartDate_calendar_SD" id="ctl00_txtStartDate_calendar_SD" value="[[2013,3,19]]">
<input type="hidden" name="ctl00_txtStartDate_calendar_AD" id="ctl00_txtStartDate_calendar_AD" value="[[1980,1,1],[2099,12,30],[2013,3,1]]">
But actual date textbox control source tag is this:
<input type="text" value="3/12/2013" id="ctl00_txtStartDate_dateInput_text" name="ctl00_txtStartDate_dateInput_text" class="riTextBox riEnabled" style="width:65px;" maxlength="524288"> 
```

注意：如果我更改该选择器中的日期，即使这个实际输入值也不会反映任何变化。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T18:45:00.820

当您单击表单上的按钮时，使用浏览器的调试器查看 HTTP 请求中实际发送的内容。这会给你一个提示你做错了什么。

请参阅此处的步骤 2、3、4：http: [//brannockdevice.blogspot.com/2008/11/using-wget-for-screen-scraping-html.html](http://brannockdevice.blogspot.com/2008/11/using-wget-for-screen-scraping-html.html)

# iis-7 - 使用 Inno Setup 安装 IIS

> ID：16096383
> 
> 赞同：2
> 
> 时间：2013-04-19T02:44:28.233
> 
> 标签：iis-7, inno-setup

我似乎无法弄清楚如何使用 Inno Setup（如下）运行此代码。我正在尝试安装 IIS7+。如果我直接在 cmd 提示符下运行它，它运行良好，但由于开头的“开始”部分，我对如何从 Inno Setup 运行它有点困惑。我可以运行我需要的任何其他 exe，但 pkgmgr.exe 并不能很好地运行。

```
start /w pkgmgr /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI 
```

**更新 1**

我尝试了这段代码并得到以下错误：

```
[Run]
Filename: "{sys}\pkgmgr.exe"; Parameters: "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"; Description: "Install IIS"; 
```

`Operation failed with 0x8007000B An attempt was made to load a program with an incorrect format.`

如果我在 cmd 提示符下运行原始`start /w pkgmgr...`行，它会完美安装。（我有一个带有干净快照的虚拟机，每次运行测试之前我都会还原到该快照）

**更新 2**
包括错误的 Inno Setup 日志记录

```
...
2013-04-19 09:21:04.813   Filename: C:\Windows\system32\pkgmgr.exe
2013-04-19 09:21:04.813   Parameters: /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI
2013-04-19 09:21:07.372   Process exit code: 11
2013-04-19 09:21:07.372   Need to restart Windows? No
2013-04-19 09:21:08.464   Deinitializing Setup.
2013-04-19 09:21:08.479   Log closed. 
```

**更新 3**
我添加了 mirtheil 建议的代码（带有一些小的语法调整），我越来越接近了！

```
Filename: "pkgmgr"; Parameters: "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"; Description: "Install IIS"; Flags: 64bit; Check: IsWin64;
Filename: "pkgmgr"; Parameters: "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"; Description: "Install IIS"; Flags: 32bit; Check: not IsWin64; 
```

我仍然得到一个错误。弹出的消息框说`Operation failed with 0x80070057 The parameter is incorrect.` 日志显示`Process exit code: 87`。是否有地方显示每个进程退出代码的含义？

包括错误的 Inno Setup 日志记录：

```
...
2013-04-19 10:03:50.686   -- Run entry --
2013-04-19 10:03:50.686   Run as: Current user
2013-04-19 10:03:50.686   Type: Exec
2013-04-19 10:03:50.686   Filename: pkgmgr
2013-04-19 10:03:50.686   Parameters: /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI
2013-04-19 10:04:13.135   Process exit code: 87
2013-04-19 10:04:13.135   Need to restart Windows? No
2013-04-19 10:04:14.211   Deinitializing Setup.
2013-04-19 10:04:14.227   Log closed. 
```

**更新 4**

我删除了`/l:log.etw`参数并解决了我的问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:22:35.203

您将使用 [Run] 部分并使其类似于：

```
[Run]
Filename: "pkgmgr""; Parameters: "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"; Description: "Install IIS"; Flag: 64bit; Check: IsWin64;
Filename: "pkgmgr""; Parameters: "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"; Description: "Install IIS"; Flag: 32bit; Check: not IsWin64; 
```

由于在 Run 行上没有`nowait`标志，InnoSetup 将等待 IIS 安装。添加`32bit`/`64bit`标志会导致 InnoSetup 使用正确的应用程序并防止“格式不正确”类型错误。该`Check`参数确保程序仅在正确的操作系统上运行。

我没有尝试过，但它应该可以工作。

# afnetworking - 如何让 AFHTTP 请求等待操作

> ID：16096386
> 
> 赞同：1
> 
> 时间：2013-04-19T02:45:01.717
> 
> 标签：afnetworking

此时我有一个方法调用使用 AFHTTPRequestOperation 从 Web 下载数据，如下所示：

```
- (void)downloadDataForRegisteredObjects:(BOOL)useUpdatedAtDate {
    NSLog(@"downloadDataForRegisteredObjects");
    NSMutableArray *operations = [NSMutableArray array];

    for (NSString *className in self.registeredClassesToSync) {
        NSDate *mostRecentUpdatedDate = nil;
        if (useUpdatedAtDate) {
            mostRecentUpdatedDate = [self mostRecentUpdatedAtDateForEntityWithName:className]; 
        }
        NSMutableURLRequest *request = [[SDAFParseAPIClient sharedClient] GETRequestForAllRecordsOfClass:className updatedAfterDate:mostRecentUpdatedDate];

        AFHTTPRequestOperation *operation = [[SDAFParseAPIClient sharedClient] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
            if ([responseObject isKindOfClass:[NSDictionary class]]) {
                // Write JSON files to disk
                [self writeJSONResponse:responseObject toDiskForClassWithName:className];
            }
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Request for class %@ failed with error: %@", className, error);
            [[NSNotificationCenter defaultCenter]
             postNotificationName:kSDSyncEngineSyncINCompleteNotificationName
             object:nil];

        }];

        [operations addObject:operation];
    }

    [[SDAFParseAPIClient sharedClient] enqueueBatchOfHTTPRequestOperations:operations progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {

    } completionBlock:^(NSArray *operations) {
        // Process JSON into CD
        if (useUpdatedAtDate) { 
            [self processJSONDataRecordsIntoCoreData]; 
        }

    }];
} 
```

据我了解，我们创建了一个 NSURLMutableRequest，将其传递给带有成功和失败块的 AFHTTPRequestOperation。

成功块说，如果成功，则测试是否字典，如果是，则将其写入磁盘。失败块说，记录错误并发布通知。

该方法在我的应用程序中被连续调用两次，一个接一个。第一次它返回一个空的 responseObject，但第二次它返回一个完整的 responseObject。

为什么会这样？

# javascript - 触摸屏特定样式表/命令

> ID：16096388
> 
> 赞同：0
> 
> 时间：2013-04-19T02:45:17.123
> 
> 标签：javascript, jquery, html, touchscreen

有没有办法检测用户是否在触摸屏设备上？我想根据这一事实更改一些 HTML/jquery（更具体地说，[jquery capSlide](http://tympanus.net/codrops/2009/11/23/jcapslide-a-jquery-image-caption-plugin/)可以在触摸屏设备上显示标题，同时将其隐藏在桌面上）。完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:50:37.427

这条单线应该足够了。

```
var is_touch_device = 'ontouchstart' in document.documentElement; 
```

取自这里的 Stack Overflow 答案：[https ://stackoverflow.com/a/6447935/1585455](https://stackoverflow.com/a/6447935/1585455)

你的条件应该是这样的：

```
if(is_touch_device) { /* your code */ } 
```

# r - 是否可以创建引用类来记录调用

> ID：16096398
> 
> 赞同：5
> 
> 时间：2013-04-19T02:45:54.133
> 
> 标签：r, reference-class

我有一个关于参考类的问题。我的问题是在我正在开发[rCharts](http://ramnathv.github.io/rCharts)的 R 包的上下文中。它使用参考类从 R 创建交互式绘图。

创建情节涉及一系列调用。这是一个示例，首先创建散点图，然后添加线图。

```
p1 <- rPlot(mpg ~ cyl, data = mtcars, type = 'point')
p1$layer(copy_layer = T, type = 'line') 
```

现在，由于引用类就像一个闭包，我想知道是否可以记录所做的调用。这个想法是，如果我可以记录调用的顺序，那么我可以自动插入用于创建可视化的源代码以及 html。

我试图看看我是否可以使用`sys.function`or `match.call`，但没有得到任何地方。如果有人能指出我如何解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T18:15:47.137

正如@hadley 所说：

```
calls <<- c(calls, list(match.call())) 
```

很高兴这看起来奏效了。让我们关闭它。:)

# amazon-ec2 - 自动读取 fabric 或 deploy 中的 requirements.txt

> ID：16096400
> 
> 赞同：0
> 
> 时间：2013-04-19T02:45:58.860
> 
> 标签：amazon-ec2, flask, pip, fabric, distribute

我有一个烧瓶应用程序，我正在尝试自动部署到 EC2。

没什么大不了的，但是在 Fabric 或 Distribute 中是否有一个设置可以直接为 setup.py 读取 requirements.txt 文件，所以我不必在 setup(install_requires=[]) 列表中拼写所有内容，而不是为我的 requirements.txt 编写文件阅读器？如果没有，人们是否有关于自动部署和 pip 的建议或建议？

我正在从[这里](http://flask.pocoo.org/docs/patterns/fabric/)和[这里](http://flask.pocoo.org/docs/patterns/distribute/#distribute-deployment)进行审查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:57:15.867

> 没什么大不了的，但是在 Fabric 或 Distribute 中是否有一个设置可以直接为 setup.py 读取 requirements.txt 文件，所以我不必在 setup(install_requires=[]) 列表中拼写所有内容，而不是为我的 requirements.txt 编写文件阅读器？

您可能仍想查看 frb 对重复问题的回答[How can I reference requirements.txt for the install_requires kwarg in setuptools.setup?](https://stackoverflow.com/a/14399775/45773) *，它为编写文件阅读器*提供了直接的两行解决方案。

如果您真的想避免这种情况，您也可以将 common 添加`pip install -r requirements.txt`到您的`fabfile.py`中，例如：

```
# ...
# create a place where we can unzip the tarball, then enter
# that directory and unzip it
run('mkdir /tmp/yourapplication')
with cd('/tmp/yourapplication'):
    run('tar xzf /tmp/yourapplication.tar.gz')
    # now install the requirements with our virtual environment's
    # pip installer
    run('/var/www/yourapplication/env/scripts/pip install -r requirements.txt')
    # now setup the package with our virtual environment's
    # python interpreter
    run('/var/www/yourapplication/env/bin/python setup.py install') 
```

# c++ - 存储通用模板类的 C++ 类（带集合）...编译问题

> ID：16096402
> 
> 赞同：0
> 
> 时间：2013-04-19T02:46:25.853
> 
> 标签：c++, templates, generics, compare, set

所以我对 C++ 编程还是很陌生，对模板还是很陌生。我正在尝试制作一个包含一些通用数据和一个双精度数据的基本模板类（如果你愿意的话是一个节点）。然后我想让另一个类包含一组前面提到的模板类。

我在使用小于运算符时遇到问题，因为它将服务器作为我的比较器。

节点&树.h

```
#ifndef _POINTNODE_H_
#define _POINTNODE_

#include <set>

template<typename T>
class PointNode {

 public:

  PointNode(double p){ m_point = p;}
  ~PointNode();

  bool operator < (const &PointNode<T> p1) const;

 private:

   const double m_point;
   T *m_data;

};

template <typename T>
class PointTree {

 public:

  PointTree();
  ~PointTree();

 private:

  std::set<PointNode<T> > tree;

};

#endif 
```

节点&树.cpp

```
#inlcude "Node&Tree.h"
#include <set>

template<typename T>
bool PointNode<T>:: operator < (const &PointNode<T> p1) const{
   return m_point < p1.m_point;
} 
```

我收到以下错误

```
Node&Tree.cpp:5:39: error: ISO C++ forbids declaration of ‘parameter’ with no type [-   fpermissive]
Node&Tree.cpp:5:39: error: expected ‘,’ or ‘...’
Node&Tree.cpp:5:6: error: prototype for ‘bool PointNode<T>::operator<(const int&)   const’ does not match any in class ‘PointNode<T>’
Node&Tree.h:15:8: error: candidate is: bool PointNode<T>::operator<(const int&)" 
```

这在很大程度上没有实现，但我只是想至少编译基础知识......以及代码上的任何指针，或者如果你认为我要解决这一切都错了，请告诉我！

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:53:46.957

```
bool PointNode<T>:: operator < (const &PointNode<T> p1) const 
```

应该：

```
 bool PointNode<T>:: operator < (const PointNode<T>& p1) const 
```

你把参考`&`放在错误的位置，所以你有那个`forbids declaration of parameter error`. 另一个地方也有同样的错误。

```
bool operator < (const &PointNode<T> p1) const; 
```

应该

```
bool operator < (const PointNode<T>& p1) const; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:58:05.313

将 PointNode 对象作为参考

```
bool operator < (const PointNode<T>& p1) const; 
```

及其定义

```
template<typename T>
bool PointNode<T>:: operator < (const PointNode<T>& p1) const{
   return m_point < p1.m_point;
} 
```

这将解决问题。

# java - HashSet 编译错误

> ID：16096412
> 
> 赞同：3
> 
> 时间：2013-04-19T02:48:05.833
> 
> 标签：java, compiler-errors, hashset

我唯一想做的就是将一个数组 (temp_X) 放入一个 HashSet，但我得到了 HashSet 的错误：没有为 HashSet(List) 找到合适的构造函数

```
 public PSResidualReduction(int Xdisc[][], double[][] pat_cand, int k) {

        for (int i = 0; i < Xdisc.length; i++) {
            int[] temp_X;
            temp_X = new int[Xdisc[0].length];
            for (int s = 0; s < Xdisc[0].length; s++) {
                temp_X[s] = Xdisc[i][s];
            }
            HashSet<Integer> temp_XList = new HashSet<Integer>(Arrays.asList(temp_X));
        }

    } 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T02:50:10.080

[Arrays#asList](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)接受类型数组，这意味着使用的所有元素都必须是`Object`类型而不是基元。

改用`Integer`数组：

```
Integer[] temp_X; 
```

这将允许`Arrays#asList`用于对抗包装类：

```
HashSet<Integer> temp_XList = new HashSet<Integer>(Arrays.asList(temp_X)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:54:14.927

in `Arrays.asList(temp_X);` `temp_X`必须是 Object 数组，而不是原始类型数组。并且`HashSet<T>`不支持原始类型。您必须将 temp_X 中的每个 int 转换为`Integer`并一一添加到 temp_xList

# android - Android:: 突出显示未选中的按钮

> ID：16096413
> 
> 赞同：0
> 
> 时间：2013-04-19T02:48:17.350
> 
> 标签：android

我正在做一个游戏项目。

我的屏幕上有 4 个按钮。用户必须选择 4 个中的一个。如果用户选择正确的一个，则可以正常工作。但是如果用户选择了不正确的答案，即使用户没有点击它，我也想突出显示正确的答案。

我明天有演示文稿。任何人都可以向我指出一些示例源或在这里解释它，我该如何完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:13:08.030

您可以在单击其他按钮时设置正确的按钮背景颜色或图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:15:20.607

每当用户点击不正确的按钮时，只需调用：

```
correctButton.setPressed(true) 
```

这将根据您的要求突出显示正确的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:26:57.140

你可以做一件事..

1.  调用`Button.requestFocus()`方法来获取焦点。
2.  为您的 Button 的背景创建一个自定义选择器。那里

    `< item android:state_focused="true" android:drawable="@color/your_color" />`

# python - BOOLEAN 的 cx Oracle 数据类型是什么？

> ID：16096414
> 
> 赞同：0
> 
> 时间：2013-04-19T02:48:17.753
> 
> 标签：python, plsql, cx-oracle

从[http://cx-oracle.sourceforge.net/html/module.html](http://cx-oracle.sourceforge.net/html/module.html)，我无法找到布尔的 cx Oracle 数据类型。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:05:21.760

在 Oracle 数据库本身中没有这样的数据类型，尽管在 PL/SQL 中编码时有可用的 BOOLEAN 类型。当我需要数据库表中的 Yes/No 字段时，我使用 CHAR(1) 字段，该字段限制为“Y”或“N”；同样，如果我真的需要 True/False 值，我将使用 CHAR(1) 约束来保存“T”或“F”。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:52:22.163

Boolean 没有数据类型。但是，您可以使用 int(True) 或 int(False) 来执行相同的操作。

# session - 处理带有子应用程序的 web.py 会话？

> ID：16096427
> 
> 赞同：0
> 
> 时间：2013-04-19T02:49:26.790
> 
> 标签：session, web.py, subapplication

我已阅读[http://webpy.org/cookbook/sessions_with_subapp](http://webpy.org/cookbook/sessions_with_subapp)。当我只有一个应用程序时，会话工作正常，但是当我创建一个子应用程序时，我遇到了错误 ~ ，详细信息如下：

**main.py**：_

```
import web
from sub import subapp
web.config.debug = False

urls = ("/sub",subapp,"/", "count",)

app = web.application(urls, globals())

db = web.database(dbn='sqlite', db='./session.db')
store = web.session.DBStore(db, 'sessions')
session = web.session.Session(app, store, initializer={'count': 0})

def session_hook():
    web.ctx.session = session

app.add_processor(web.loadhook(session_hook))

class count:
    def GET(self):
        session.count += 1
        return str(session.count)

if __name__ == "__main__":
    app.run() 
```

**subapp.py**：_

```
import web

urls = ("/", "count",)

subapp = web.application(urls, globals())

session = web.ctx.session

class count:
    def GET(self):
        session.count += 1
        return str(session.count) 
```

尝试运行时出错：

```
Traceback (most recent call last):
  File "main.py", line 2, in <module>
    from sub import subapp
  File "/tmp/session/sub.py", line 9, in <module>
    session = web.ctx.session
AttributeError: 'ThreadedDict' object has no attribute 'session' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:45:06.633

您不能简单地分配`session = web.ctx.session`，因为此行仅在应用程序初始化期间执行，但`ctx`属性只能在请求时访问。您可以`from web import ctx`然后在所有子应用程序中使用`ctx.session`而不是。`session`

***subapp.py***示例：

```
import web
from web import ctx

urls = (
    "/", "count",
)

subapp = web.application(urls, globals())

class count:
    def GET(self):
        ctx.session.count += 1
        return str(ctx.session.count) 
```

# asp.net - UpdatePanel 中的 ListView 不刷新

> ID：16096434
> 
> 赞同：1
> 
> 时间：2013-04-19T02:50:18.153
> 
> 标签：asp.net, updatepanel

我有一个在 UpdatePanel 内的 ListView，UpdateMode = Conditional。这是一个非常大的列表视图，有很多模板，所以我不显示细节。

```
<asp:UpdatePanel ID="updListView" runat="server" UpdateMode="Conditional">
   <ContentTemplate>
       <asp:ListView ID="lstvScanPreview" runat="server" OnItemDataBound="lstvScanPreview_ItemDataBound">
       ...
   </ContentTemplate>
</asp:UpdatePanel> 
```

我在更新面板之外还有一个单选按钮列表，其 OnSelectedIndexChanged 为

```
protected void rgbShowIssues_SelectedIndexChanged(object sender, EventArgs e)
{
   if (rgbShowIssues.SelectedIndex == 0)
       lstvScanPreview.DataSource = previewData.Data.Where(S => S.IssueType != ScanIssues.None);
   else
       lstvScanPreview.DataSource = previewData.Data;

   updListView.Update();
} 
```

此方法内设置的断点确实会被命中，但列表视图不会刷新。其他控件也有调用 updListView.Update() 的代码隐藏事件，这些确实有效。如果我在单击 rgbShowIssues 单选按钮列表后触发了这些其他事件之一，那么当更新确实发生时，我可以看到如果 UpdatePanel 在预期时刷新，我会看到预期的更改。

任何想法为什么这不起作用？谢谢。

# javascript - 来自本地 url 的 jquery getJSON

> ID：16096437
> 
> 赞同：0
> 
> 时间：2013-04-19T02:50:34.410
> 
> 标签：javascript, jquery, openlayers

大家好，我使用 openlayer 开发 web 地图。

我使用geojson，我的代码来自： [https ://scraperwiki.com/views/openlayers_geojson_example/edit/](https://scraperwiki.com/views/openlayers_geojson_example/edit/)

这是代码：

```
<script type="text/javascript"> 

// Start position for the map (hardcoded here for simplicity)
var lat=50.90685
var lon=-1.4029
var zoom=12

var map; //complex object of type OpenLayers.Map 

//Initialise the 'map' object
$(function() {
  $.getJSON("http://mapit.mysociety.org/area/66016.geojson",
    "callback=?",
    function(data, textStatus, jqXHR) {
      map = new OpenLayers.Map('map', {
        layers: [
            new OpenLayers.Layer.OSM.Mapnik("Mapnik"),
        ],
        controls: [
          new OpenLayers.Control.Navigation(),
          new OpenLayers.Control.PanZoomBar(),
          new OpenLayers.Control.LayerSwitcher(),
          new OpenLayers.Control.Attribution()],
        maxResolution: 'auto',
      });

      var lonLat = new OpenLayers.LonLat(lon, lat)
        .transform(
          new OpenLayers.Projection("EPSG:4326"),
          map.getProjectionObject()
        );

      map.setCenter(lonLat, zoom);

      var vector_layer = new OpenLayers.Layer.Vector("GeoJSON");

      var geojson_format = new OpenLayers.Format.GeoJSON();

      var geometry = geojson_format.parseGeometry(data);
      geometry.transform(
          new OpenLayers.Projection("EPSG:4326"),
          map.getProjectionObject()
      );

      var feature = new OpenLayers.Feature.Vector(geometry);

      vector_layer.addFeatures([feature]);

      map.addLayer(vector_layer);
    })
});
</script> 
```

在 ：

```
$.getJSON("http://mapit.mysociety.org/area/66016.geojson",
        "callback=?", 
```

当我从 iis localhost 调用时它可以工作我尝试像这样更改：

```
$.getJSON("assets/json/66016.geojson",
        "callback=?", 
```

但它没有用，:(

请帮助我为什么以及如何使这项工作。

这是错误的：

HTTP 错误 404.0 - 未找到 localhost --- >/assets/json/66016.geojson?callback=jQuery152048599341535009444_1366340277133&_=1366340277237

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:52:23.647

试试这个

```
$.getJSON("/assets/json/66016.geojson",
        "callback=?", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:06:45.283

对不起，伙计们，我终于得到了答案，这就是解决方案：

```
$.getJSON("assets/json/66016.geojson",
        "callback=?", 
```

只需擦除“回调=？”，

```
$.getJSON("/assets/json/66016.geojson", 
```

# c# - 使用 DotNetOpenAuth 将一个站点连接到另一个站点

> ID：16096442
> 
> 赞同：3
> 
> 时间：2013-04-19T02:50:44.910
> 
> 标签：c#, oauth-2.0, dotnetopenauth

我想使用 DotNetOpenAuth 从一个具有 DotNetOpenAuth 的站点连接到另一个具有 DotNetOpenAuth 的站点，以便他们可以使用彼此的 api。目标是必须授权一次，从那时起他们可以在彼此之间做事。它们必须是两个不同的站点，都是 C# 城堡项目。老实说，其中大约有 5 个需要相互交谈并使用彼此的 api，所以我只想存储一次连接，而不用担心它们断开连接。我设置了数据库来存储我相信的会话和令牌，但事实证明，DotNetOpenAuth 的文档没有那么有用。 *（在撰写[DotNetOpenAuth api 文档的](http://docs.dotnetopenauth.net/master/)网站时已关闭）*我不清楚这个[web.config](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Configuration)设置是我需要做的所有事情，这对我来说似乎很奇怪，或者如果有一些示例可以逐步说明我所询问的内容。

它的核心问题很简单，你如何设置一个站点来授权另一个站点并且只存储一次。我的想法是我不知道这些微站点最终会有多少，只是他们必须建立双向授权连接，然后使用彼此的api。

我所需要的只是一个为 Web 应用程序设置的提供程序和一个为 Web 应用程序设置的客户端的详细示例。我敢肯定他们不会出现在同一个例子中，但我很难找到任何一步一步明确的东西。少数令人费解的示例是 MVC 示例，它们无助于轻松了解其核心。

最终目标是（站点 A）与（站点 B）和（站点 C）有连接，其中（站点 C）与（站点 A）和（站点 D）有连接，这意味着（站点 A），（站点 B ),(Site C),(Site D) 既是提供者又是客户端，我们通常会将令牌存储在数据库中的会话中（从客户端的角度来看）。不需要更多的例子来说明如何清楚地制作提供者以及如何制作客户端，因为其余部分在存储时会很明显。

**更新** 我一直在尝试整合[这个例子](http://hoonzis.blogspot.com/2011/08/using-dotnetopenauth-to-create-oauth.html)，因为它是我能找到的最好的一个。问题在于，它更像是一个应用程序的提供者，而不是一个包含提供者和消费者的网站。该示例的问题在于它并没有真正与文件对齐​​。它轻而易举地解决了关键部分的想法。

## 可视化概念

![在此处输入图像描述](https://i.stack.imgur.com/pt57C.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:24:30.380

您可以将其用作[AuthorisationServer](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/samples/OAuthAuthorizationServer/Code/OAuth2AuthorizationServer.cs)实现的基础，并在所有 API 解决方案中共享该库。

您提到的集中式解决方案可能是一个不错的计划，具体取决于您希望如何构建各种 API 实现的整体架构。真的很难在这方面提出任何建议，因为这实际上取决于您希望它们如何结合在一起。

如果您采用集中式方法，则必须为每个 API 提供一个密钥和一个秘密，并在数据库的 ClientAuthorisation 表中为每个 API 创建一个条目。我的授权表现在看起来像这样：

```
CREATE TABLE [dbo].[ApiClientAuthorizations](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [CreatedUtc] [datetime] NOT NULL,
    [ApiClientId] [bigint] NOT NULL,
    [UserProfileId] [bigint] NOT NULL,
    [Scope] [nvarchar](max) NULL,
    [Expires] [datetime] NULL, 
```

这里的关键字段是定义任何客户端访问级别的范围。据我所知，如果您真的想开始让其他系统使用您的实现来使用您的系统作为他们的身份存储来保护他们自己的服务，那么您只需要实现一个提供程序，我真的认为您不需要这样做为了满足您对此的要求。

我发现让大量示例实际工作非常耗时，但示例中的代码确实非常好，值得仔细研究以更好地了解引擎盖下的实际情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T12:56:58.643

您实际上并不需要成为提供者来实现这一点。我将对授权服务器进行通用实现，并在数据库中为您希望在每台服务器上与之通信的每个站点手动设置授权。

使用 SSL 证书进行加密，您最好使用发送 OAuth2.0 令牌来授权 API 调用。

# c# - 如何使用 Outlook 的高级查找查找 1 年或更早的所有邮件项目？

> ID：16096453
> 
> 赞同：1
> 
> 时间：2013-04-19T02:52:31.870
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

我正在以编程方式创建一个新的资源管理器窗口来查找 1 年或更早的所有项目。

```
Outlook.Folder folder = (Outlook.Folder)Globals.ThisAddIn.Application.Session.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
Outlook.Explorer newExplorer = Globals.ThisAddIn.Application.Explorers.Add(folder, Microsoft.Office.Interop.Outlook.OlFolderDisplayMode.olFolderDisplayNoNavigation);
DateTime expirationDate = DateTime.Now;
string searchSyntax = String.Format("urn:schemas:httpmail:datereceived < '{0}'", expirationDate);

newExplorer.Search(searchSyntax, Outlook.OlSearchScope.olSearchScopeAllFolders);
newExplorer.Display(); 
```

上面的代码不起作用，因为搜索无法识别`urn:schemas:httpmail:datereceived < '4/18/2013 10:48:11 PM'`为有效搜索。但是，它确实将“received:this year”或“received:last year”识别为搜索结果。

![在此处输入图像描述](https://i.stack.imgur.com/dqFCi.jpg)

***我需要使用什么字符串来获取一年前或更长时间收到的所有物品？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:22:06.283

[http://msdn.microsoft.com/en-us/library/office/cc513841(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/cc513841%28v=office.12%29.aspx)

<

> received:<11/1/06 查找 11/1/06 之前收到的项目。

收到：<4/18/13

# asp.net - asp mvc 2 项目中的配置错误。MvcContrib，版本=2.0.96.0

> ID：16096456
> 
> 赞同：1
> 
> 时间：2013-04-19T02:52:58.127
> 
> 标签：asp.net, visual-studio-2008, asp.net-mvc-2, mvccontrib

**无法加载文件或程序集“MvcContrib，Version=2.0.96.0”或其依赖项之一。**

我在由其他人创建的项目中收到此错误，我正在我的计算机上对其进行调试。

我想我知道问题出在哪里，我需要解决，`MvcContrib, Version=2.0.96.0`但我正在努力，`visual studio 2008`并且上面没有包库安装程序。

这该怎么做 ？？

这就是消息的出现方式。

解析器错误消息：无法加载文件或程序集“MvcContrib，版本 = 2.0.96.0”或其依赖项之一。该系统找不到指定的文件。

```
Line 46:   <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral,        PublicKeyToken=B77A5C561934E089"/>
Line 47:    <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
Line 48:         <add assembly="MvcContrib, Version=2.0.96.0"/>
Line 49:            </assemblies>
Line 50:        </compilation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:11:33.133

在此处下载表格：[MVC 2 - 2.0.96.0](http://mvccontrib.codeplex.com/releases)并在您的应用程序中引用 dll。

# c# - LoadControl，WebMethod中的用户控件

> ID：16096458
> 
> 赞同：6
> 
> 时间：2013-04-19T02:53:00.450
> 
> 标签：c#, asp.net, user-controls, webmethod

我正在尝试通过以下方式发送电子邮件`WebMethod` 以下是我通常在常规回发中使用的代码

```
[WebMethod]
public static void SendEmail(string name, string phone, string emailaddress, string interest, string comments)
{
    var control = LoadControl("~/Shared/Controls/EmailTemplate_PartnerWithUs.ascx");

    StringBuilder sb = new StringBuilder();
    StringWriter sw = new StringWriter(sb);
    Html32TextWriter htw = new Html32TextWriter(sw);

    control.RenderControl(htw);

    sb.Replace("%name%", name);
    sb.Replace("%phone%", phone);
    sb.Replace("%emailaddress%", emailaddress);
    sb.Replace("%interest%", interest);
    sb.Replace("%comments%", comments);
    EmailUtility.SendEmailMessage(SettingsManager.GetContactRecipientEmails(), "CoyleHomeBuyers.com Partner Form", sb.ToString());
} 
```

我得到的错误是：

```
An object reference is required for the non-static field, method, or property 'System.Web.UI.TemplateControl.LoadControl(string)' 
```

有没有办法在 WebMethod 中加载这个控件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T03:06:46.127

```
UserControl uc= new UserControl();
Control control = uc.LoadControl("~/Shared/Controls/EmailTemplate_PartnerWithUs.ascx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:06:08.620

您需要将其转换为控件类型。

例如：

```
Email_PartnerWithUs control = (Email_PartnerWithUs)LoadControl("~/Shared/Controls/EmailTemplate_PartnerWithUs.ascx"); 
```

见这里： http: [//msdn.microsoft.com/en-us/library/system.web.ui.templatecontrol.loadcontrol (v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.templatecontrol.loadcontrol(v=VS.71).aspx)

# ruby-on-rails - Ruby on Rails - 路由错误（未初始化的常量 UsersController）

> ID：16096462
> 
> 赞同：0
> 
> 时间：2013-04-19T02:53:22.903
> 
> 标签：ruby-on-rails, twitter-follow

我正在为我的第一个应用程序构建一个关注系统，基于 Michael Hartl 的第 11 章教程 ( [http://ruby.railstutorial.org/chapters/following-users#top](http://ruby.railstutorial.org/chapters/following-users#top) )。在用户页面上，它显示 # of follower 和 # of following。但是，当我将鼠标悬停在关注者的链接上或关注用户配置文件时，它会被定向到链接到 localhost:3000/users/1/followers 或 localhost:3000/users/1/following。这是对的。但是我单击任一链接，我得到下面列出的以下错误。感谢您的帮助！

> 路由错误
> 未初始化常量用户控制器

路线.rb

```
get "user/show"

devise_for :users
match 'users/:id' => 'user#show', as: :user

resources :users do
  member do
    get :following, :followers
  end
end 
```

用户控制器.rb

```
def following
  @title = "Following"
  @user = User.find(params[:id])
  @users = @user.followed_users.paginate(page: params[:page])
  render 'show_follow'
end

def followers
  @title = "Followers"
  @user = User.find(params[:id])
  @users = @user.followers.paginate(page: params[:page])
  render 'show_follow'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:59:40.383

将文件名从更改`user_controller.rb`为`users_controller.rb`

如果您遇到错误`ActionView::MissingTemplate in Users#following Missing partial users/user`，那么这正是您应该查看的地方，`views/users/_user.html.erb`- 您有这个文件吗？你有没有正确命名它？

# javascript - 如何用 Javascript 将页面中的每个 gif 图像替换为另一个图像

> ID：16096465
> 
> 赞同：0
> 
> 时间：2013-04-19T02:53:41.667
> 
> 标签：javascript, gif

我想知道如何将页面中的每个 .gif 图像替换为我已经拥有的图像 url。我已经看过很多解决方案，但没有一个可以帮助我。

编辑：删除了旧代码，因为它引起了一些混乱

那么有人知道该怎么做吗？JS pure 会更好，因为我无法让 jQuery 与 Tampermonkey 一起正常工作。

编辑 2：设法让另一种代码工作，但它不会替换图像 url，只是添加到它。

```
 var theImages = document.getElementsByTagName('img');

    for(i=0; i<theImages.length; i++) {
        if(theImages[i].src.indexOf('.gif') != -1) {
        theImages[i].src = ('imageurl.jpg')}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:58:23.953

看看这条线`var image_png_src = image_png_src.replace(".gif", "image.jpg");`。`image_png_src`尚未定义，但您尝试调用替换属性。您可能想要使用的任何方式`image_gif_src`。

```
var image_png_src = image_gif_src.replace(".gif", "image.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:58:58.387

假设您的图像具有相同的名称，并且您只想更改扩展名，那么您的代码几乎是正确的，您只是犯了一个小错误。这是正确的版本：

```
var images = document.getElementsByTagName("img");

for (var i = 0; i < images.length; i++) {
    var image_gif_src = images[i].src;
    var image_png_src = image_gif_src.replace(".gif", ".jpg");
    images[i].src = image_png_src;
} 
```

注意`image_png_src.replace`for 循环的第二行是如何被替换为`image_gif_src.replace`? 您试图对错误的变量进行替换。另外，我`"image.jpg"`在您的原始示例中进行了更改，只是`".jpg"`因为我假设您只是想更改扩展名，而不是将“图像”一词附加到您要更改的任何图像的末尾。

如果您想将每个 gif 更改为其他图像，而不仅仅是更改扩展，则此代码将执行此操作：

```
images[i].src = image_png_src;

for (var i = 0; i < images.length; i++) {
        if( images[i].src.indexOf(".gif") > -1){
             images[i].src = "New Image.jpg";
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:26:11.157

jQuery方法

```
$("img").each(function(){
$(this).attr('src',$(this).attr('src').replace(".gif", ".jpg"));
}); 
```

仅供参考，要在 Xmonkey 中使用 jquery 或其他 js 库，只需添加

`// @require http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js` 在`==UserScript==`标题中。如果发生冲突，打开`jQuery.noConflict();`可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T03:22:09.437

所以我使用以下脚本让它工作：

```
var theImages = document.getElementsByTagName('img');

for(i=0; i<theImages.length; i++) {
    if(theImages[i].src.indexOf('.gif') != -1) {
    theImages[i].src = ('imageurl.jpg')}
} 
```

感谢所有帮助过的人。

# javascript - 如何从javascript中的字符串中提取数字数组

> ID：16096467
> 
> 赞同：2
> 
> 时间：2013-04-19T02:53:48.657
> 
> 标签：javascript, regex, arrays

使用 javascript，我需要从这个字符串中提取数字：

```
[stuff ids="7,80"] 
```

并且字符串可以包含一到五组数字，用逗号分隔（每组有 1 个或多个数字）需要提取到数组中。

我试过了：

```
var input = '[stuff ids="7,80"]';
var matches = input.match(/ids="(\d*),(\d*)"/); 
```

这会给我一个包含 7 和 80 的数组（我认为），但是我该如何进一步处理，以便如果有两个以上（或少于两个），它将返回所有数字？

此外，这甚至是解决此问题的最佳方法吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T02:55:25.203

```
var numbers = '[stuff ids="7,80"]'.match(/\d+/g); 
```

`\d+`匹配任何连续的数字（即数字）并且`g`修饰符告诉匹配所有

PS：如果您需要匹配负数：

```
var numbers = '[stuff ids="-7,80"]'.match(/-?\d+/g); 
```

# prediction - 为 Smatr 包编写 predict() 函数

> ID：16096474
> 
> 赞同：0
> 
> 时间：2013-04-19T02:08:46.200
> 
> 标签：prediction

如何为 Smatr 包（特别是 sma 命令）编写 predict() 函数？

# python-3.x - 使用 while 循环 Python 创建形状

> ID：16096479
> 
> 赞同：0
> 
> 时间：2013-04-19T02:55:35.303
> 
> 标签：python-3.x, while-loop, shape

我想做的是使用while循环从星号中创建一个正方形，下面的代码将打印填充的正方形，但我想要它做的是打印未填充的正方形

```
a='square'
b='unfilled'
c=4
num=0
asterix='*'
while a=='square' and b=='unfilled' and int(num)<int(c):
    num+=1
    print(asterix*int(c)) 
```

代码的作用：

```
****
****
****
**** 
```

我想要代码做什么：

```
****
*  *
*  *
**** 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:08:22.430

```
 n = 4
    s = "*"
    for i in range(0,n,1):
        if i == 0 or i == n-1:
            print(s*n)
        else:
            print(s+(" "*(n-2))+s) 
```

这应该做你想做的事。您不必将所有内容都正确转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T04:59:18.917

我知道这个问题很久以前就已经回答过了，但我也正在经历一些我之前的课堂练习，并尝试使用我在此过程中学到的一些新东西。

这让我想起了很多我的练习，我最终回答了类似于上面的答案。从那时起，我发现了一种使用生成器编写此代码的好方法：

```
n = 4
table = ("*  *" if i not in [0, n] else '****' for i in range(n+1))
for row in table: print(row) 
```

您可能也想概括这一点，以便它适用于可变大小，`n`.

# java - Java中随机生成的数组中的重复项

> ID：16096480
> 
> 赞同：-1
> 
> 时间：2013-04-19T02:55:38.677
> 
> 标签：java, arrays

我在cs 2010班。以前从未从事过编码或类似工作。我有一个很好的老师，但他的口音很浓，很难听懂。他最近给了我们一个项目，要在几天内完成。我在完成项目的最后一部分时遇到了问题。

该项目要求您生成 0-9999 之间的 10,000 个随机数，并将它们排列在 10,000 个数字的数组中，而不重复任何一个。如您所见，这基本上是要求您让数组按照从小到大的顺序将数字 0-9999 放入一个数组中。我的问题是不重复的数字。我已经在代码上工作了 4 个多小时，试图弄清楚如何使它不重复并且没有运气。我在网上搜索了至少一个小时，所有其他提示或解决方案都没有帮助。这是我到目前为止的代码，有人可以帮我吗？

```
 package array.sorter.project;

import java.util.Arrays;
import java.util.Random;

public class Sorting {
public static void main(String args[]){
int[] randomNumbers = new int[10000];

Random rand = new Random();{
for (int i = 1; i < randomNumbers.length; i++) {
  int n = rand.nextInt(10000);
  randomNumbers[i] = n;}

  for (int i = 0; i < randomNumbers.length; i++) {
      int smallestNo = randomNumbers[i];
      int posWithSmallest = i;
      for (int j = i+1; j < randomNumbers.length; j++) {
        int val = randomNumbers[j];
        if (val < smallestNo) {
          smallestNo = val;
          posWithSmallest = j;
        }
      }
      int tmp = randomNumbers[i];
      randomNumbers[i] = smallestNo;
      randomNumbers[posWithSmallest] = tmp;
}
Arrays.sort(randomNumbers);

for (int i = 0; i < randomNumbers.length; i++) {
      System.out.println("Position " + i + " : " + randomNumbers[i]);
    }

    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:01:25.233

不是从 0 到 9999 随机生成 10000 个数字，而是按升序生成 0...9999并对数组进行[洗牌。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_.22inside-out.22_algorithm)确保你的洗牌是公正的，例如有 n! 它可以完成的方式（如果您不确定，请使用 n = 3 进行桌面检查以查看它是否无偏见）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T03:03:50.530

您无法在 0-9999 范围内生成 10000个没有重复的*随机*整数，那时只有 10000 个，所以您需要全部。

你可以做的是*重新排列*，[洗牌](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)。

所以：

```
 import java.util.Collections;
  import java.util.Arrays;

  ...
  int[] ten_thousand = new int[10000];
  for (int i=0; i < 10000; i+=1) ten_thousand[i] = i;
  return Collections.shuffle(Arrays.asList(ten_thousand)); 
```

了解你的武器:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:14:23.013

如果您不想使用随机播放

```
private static int[] generateRandom(int count) {
    int[] randomNumbers = new int[count];

    Set<Integer> checker = new HashSet<Integer>();

    Random rand = new Random();
    for (int i = 0; i < count;) {
        int nextInt = rand.nextInt(count);
        if (!checker.contains(nextInt)) {
            randomNumbers[i++] = nextInt;
            checker.add(nextInt);
        }
    }

    return randomNumbers;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T03:19:53.363

*受《 Programming Pearls, 2nd Edition*》一书的启发，我写了一个 O(n) 算法来解决这个问题。代码如下，我稍后会解释：

```
 /**
 * randomly select k numbers in [0,n),and sort them in random order.(k<=n)
 */
public static int[] getRandomArray(int n, int k) {
    if (k > n) {
        k = n;
    }
    int[] rets = new int[k]; // store the random ordered number
    int[] array = new int[n];// original array that array[i] is i
    for (int i = 0; i < n; i++)
        array[i] = i;
    Random random = new Random();
    for (int j = 0; j < k; j++) {
        // generate a random number between [j,n) as index
        int index = j + random.nextInt(n - j);
        // swap array[j] and array[index]，so array[0..j] are all non-repeat
        // random number
        int temp = array[index];
        array[index] = array[j];
        array[j] = temp;
        // store it in rets
        rets[j] = temp;
    }
    return rets;
} 
```

解释：

```
to generate non-repeating 10,000 random numbers between 0-9999 
```

可以考虑***将数字 0-9999 随机排列***。 1、第 k 个数字存放在 中`array`，其中 x 位于 x 位置。

2、对于数字j，从[j,n)中随机选择一个索引，即索引，

3，将j的位置从j交换到索引，（eq将索引处的数字交换到位置j）

4，循环j从0到k，

# google-chrome - “http://*/*”、“https://*/*”和“是什么意思？ " 意味着在 Chrome 扩展程序的权限范围内

> ID：16096482
> 
> 赞同：56
> 
> 时间：2013-04-19T02:56:18.687
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试了解 Google chrome 扩展的工作原理。我正在研究`manifest.json`我遇到权限的文件`"http://*/*"`，`"https://*/*"`并且`"<all_urls>"`

谁能解释这些权限是什么意思？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-04-19T03:05:04.267

*   `"<all_urls>"``http:`: 匹配任何以允许的方案（ 、`https:`、`file:`或）开头的 URL `ftp:`。
*   `"http://*/*"`: 匹配任何使用该`http:`方案的 URL。
*   `"https://*/*"`: 匹配任何使用该`https:`方案的 URL。
*   `"*://*/*"`: 匹配任何使用`https:`or`http:`方案的 URL。

如果您的 Chrome 扩展程序想要与页面上运行的代码进行交互，则需要这些权限。

[匹配模式文档](https://developer.chrome.com/extensions/match_patterns)

# .net - 使用 PInvoke 在 .NET 中进行 WinUSB 异步调用

> ID：16096487
> 
> 赞同：2
> 
> 时间：2013-04-19T02:57:01.183
> 
> 标签：.net, callback, pinvoke, winusb

我用 USB 编程了一个微控制器，并使用 WinUSB 将它连接到 PC。我能够在 c++ 和 VB.NET 中使用 pinvoke 与同步（阻塞，重叠 = NULL）调用与我的 uC 通信。我刚刚在 c++ 中进行了异步调用，但我不知道如何在 .NET 中对其进行编码，还有另一个我不确定的问题：

问题 1：在 c++ 中，我最初尝试使用 IO Completion Callback Objects 进行异步调用，但是当我调用 WinUSB 读取它时返回一个错误，即异步 IO 已在文件句柄（HANDLE hDevice）上进行，CreateThreadpoolIo 不会使用 WinUSB 句柄（ PWINUSB_INTERFACE_HANDLE hWinUsbHandle)。我的猜测是 WinUSB 将此文件句柄用于 IO，所以我不能。我最终使用等待回调对象让它工作。它现在正在工作，我只想澄清我所做的是正确的用法。

我有点困惑的部分是 CreateThreadpoolWait 调用。起初我认为这是像 MSDN 中的其他示例一样创建一个线程池，但是我认为现在它只是一个在默认线程池上运行的对象。此外，objConext 是用于将调用与其回调同步的变量，即回调中的 PVOID Context 指向 objConext。

这是c代码片段：

```
// Receive data asynchronously
void BeginReceiveData(UCHAR bytPipeId, UCHAR *bytData, ULONG intLength, PTP_WAIT_CALLBACK cbCallback)
{
    // Create the event
    HANDLE hEventCallback = CreateEvent(NULL, FALSE, FALSE, NULL);

    // Check for an error
    if (!hEventCallback)
    {
        // Set the error
        printf(strError, "Error creating callback event: %d.", GetLastError());
    }

    // Create the thread pool wait object
    tpWait = CreateThreadpoolWait(cbCallback, &objConext, NULL);

    // Check for an error
    if (!tpWait)
    {
        // Set the error
        printf(strError, "Error creating thread pool: %d.", GetLastError());
    }

    // Place the wait object in the thread pool
    SetThreadpoolWait(tpWait, hEventCallback, NULL);

    // Clear the callback
    ZeroMemory(&oCallback, sizeof(oCallback));

    // Set the event
    oCallback.hEvent = hEventCallback;

    // Read
    BOOL bResult = WinUsb_ReadPipe(*hWinUsbHandle, bytPipeId, bytData, intLength, NULL, &oCallback);

    // Check for an error
    if (!bResult)
    {
        if (GetLastError() != ERROR_IO_PENDING)
        {
            // Set the error
            printf(strError, "Error reading pipe: %d.", GetLastError());
        }
    }
}

// Receive data callback
void CALLBACK UsbCallback(PTP_CALLBACK_INSTANCE Instance, PVOID Context, PTP_WAIT Wait, TP_WAIT_RESULT WaitResult)
{
} 
```

问题2：如何将上述转换为.NET？到目前为止，这是我的猜测：

```
 Dim wait As New WaitCallback(AddressOf UsbCallback)

    ' Create the event
    Dim eEventCallback As New AutoResetEvent(False)

    ThreadPool.QueueUserWorkItem(wait, Nothing)

    Dim oCallback As New Overlapped(0, 0, eEventCallback.SafeWaitHandle.DangerousGetHandle, Nothing)

    'Dim oCallback As New NativeOverlapped

    oCallback.EventHandleIntPtr = eEventCallback.SafeWaitHandle.DangerousGetHandle

    ' Read
    Dim bResult As Boolean = WinUsb_ReadPipe(hWinUsbHandle, bytPipeId, bytData, intLength, intLength, oCallback.EventHandleIntPtr)

<DllImport("winusb.dll", SetLastError:=True, CharSet:=CharSet.Auto)>
        Public Function WinUsb_ReadPipe(InterfaceHandle As IntPtr, PipeID As Byte, Buffer() As Byte, BufferLength As UInteger, ByRef LengthTransferred As UInteger, Overlapped As IntPtr) As Boolean
        End Function 
```

**编辑：我打算发布作为答案，但我没有足够的街头信誉**

好吧，我有办法将代码转换为 .NET。我设法将所有 API 函数转换为 PInvoke，然后替换了 .NET 中内置的那些，除了一对。代码可以工作，但必须注意变量的声明位置，因为 GC 会在进行回调之前清理它们。此外，必须仔细分配和销毁上下文。例如，如果没有分配正确大小的内存，则可能会清理上下文结构中的数组，这很容易理解。

由于这些原因，将句柄引用保留在 USB 中每个管道的对象中并重用它们可能更有益，因为在前一个管道完成之前无法对同一个管道进行多次调用。如果这样做了，那么您可以对上下文执行相同的操作，并避免为上下文分配和销毁内存。例如，可以在回调中的等待指针上使用字典：

```
Dim dicHandlesAndContext As Dictionary(Of IntPtr, HandlesAndContext) 
```

虽然我还没有真正找到问题 1 的答案：无论这是否是“正确”的做法，但它似乎表现得相当不错。以下是主要代码片段：

```
' Receive data asynchronously
    Private Sub BeginReceiveData(bytPipeId As Byte, bytData() As Byte, intLength As UInteger)
        ' Allocate memory for the callback
        ptrContext = Marshal.AllocHGlobal(Marshal.SizeOf(GetType(TestContext)))

        ' Copy the structure to memory
        Marshal.StructureToPtr(objConext, ptrContext, True)

        ' Create the callback
        cbCallback = New UsbCallbackDelegate(AddressOf UsbCallback)

        ' Create the event
        Dim areEvent As New AutoResetEvent(False)

        ' Set the event
        hEventCallback = areEvent.SafeWaitHandle.DangerousGetHandle

        ' Create the thread pool wait object
        tpWait = CreateThreadpoolWait(Marshal.GetFunctionPointerForDelegate(cbCallback), ptrContext, IntPtr.Zero)

        ' Place the wait object in the thread pool
        SetThreadpoolWait(tpWait, hEventCallback, IntPtr.Zero)

        ' Set the event
        oCallback.EventHandle = hEventCallback

        ' Read
        Dim bResult As Boolean = WinUsb_ReadPipe(hWinUsbHandle, bytPipeId, bytData, intLength, intLength, oCallback)

        If Not bResult Then
            If Not Marshal.GetLastWin32Error = 997 Then
                ' Get the error
                Dim intError As Integer = Marshal.GetLastWin32Error

                Throw New Win32Exception(intError, "Error getting device information.")
            End If
        End If
    End Sub

    ' Delegate for USB callbacks
    Private Delegate Sub UsbCallbackDelegate(Instance As IntPtr, Context As IntPtr, Wait As IntPtr, WaitResult As UInteger)

    ' Callback
    Private Sub UsbCallback(Instance As IntPtr, Context As IntPtr, Wait As IntPtr, WaitResult As UInteger)
        ' Number of bytes transferred
        Dim intTransferred As UInteger

        ' Get the number of bytes transferred
        WinUsb_GetOverlappedResult(hWinUsbHandle, oCallback, intTransferred, False)

        ' Get the context from memory
        Dim objConext As TestContext = Marshal.PtrToStructure(Context, GetType(TestContext))

        ' Free the memory
        Marshal.FreeHGlobal(Context)

        ' Do some work on the data

End Sub 
```

主要 API DLL 导入

```
<DllImport("winusb.dll", SetLastError:=True, CharSet:=CharSet.Auto)>
        Public Function WinUsb_GetOverlappedResult(InterfaceHandle As IntPtr, ByRef lpOverlapped As Threading.NativeOverlapped, ByRef lpNumberOfBytesTransferred As UInteger, bWait As Boolean) As IntPtr
        End Function

        <DllImport("kernel32.dll", SetLastError:=True, CharSet:=CharSet.Auto)>
        Public Function CreateThreadpoolWait(pfnwa As IntPtr, pv As IntPtr, pcbe As IntPtr) As IntPtr
        End Function

        <DllImport("kernel32.dll", SetLastError:=True, CharSet:=CharSet.Auto)>
        Public Function SetThreadpoolWait(pwa As IntPtr, h As IntPtr, pftTimeout As IntPtr) As IntPtr
        End Function

        <DllImport("kernel32.dll", SetLastError:=True, CharSet:=CharSet.Auto)>
        Public Function CloseThreadpoolWait(pwa As IntPtr) As IntPtr
        End Function 
```

我通过连续接收数据并同时运行GC来测试这些功能的GC保护，如果收集到东西，程序会崩溃。

```
' Receive data asynchronously on endpoint 1
    BeginReceiveData(129, bytData, 8)

    While True
    ' Garbage collection
        GC.Collect()
        GC.WaitForFullGCComplete()
    End While

    ' Callback
    Private Sub UsbCallback(Instance As IntPtr, Context As IntPtr, Wait As IntPtr, WaitResult As UInteger)
        ' ...
        ' Once data is received, receive more
        BeginReceiveData(129, bytData, 8)
        '...
    End Sub 
```

警告：这里没有很多清理代码，请查看 MSDN 中的 c 代码以了解如何正确执行此操作。我认为面向对象的方法可能最好让句柄保持活动状态并实现 IDIsposable 以在完成后进行清理。

有人对开源 DLL 感兴趣吗？:P

# python-3.x - 如何在kazoo中使用zookeeper watch来阻止程序

> ID：16096489
> 
> 赞同：1
> 
> 时间：2013-04-19T02:57:14.110
> 
> 标签：python-3.x, apache-zookeeper, watch, kazoo

我阅读了[kazoo](https://kazoo.readthedocs.org/en/latest/basic_usage.html#watchers)的文档。然后我在网站上运行了代码示例，每次运行时都会调用watch的func，我想阻止程序直到删除一个节点的子节点，我该怎么做？

当前代码：

```
#!/usr/bin/env python3

from kazoo.client import KazooClient

zk = KazooClient(hosts='127.0.0.1:2181')
zk.start()

@zk.ChildrenWatch("/distribute-lock")
def watch_children(children):
    print("Children are now: %s" % children)
children = zk.exists("/distribute-lock/childnode-325", watch=watch_children)
print(children)   
zk.stop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:28:57.857

您可以使用`threading.Lock`来实现此要求；它阻塞程序，直到有 /distribute-lock delete 或 add 的子节点。

代码：

```
#!/usr/bin/env python3

from kazoo.client import KazooClient
from threading import Lock

zkl = Lock()
def my_func(event):
    if event.type == 'CHILD':
        zkl.release()

zk = KazooClient(hosts='127.0.0.1:2181')
zk.start()
zkl.acquire()
children = zk.get_children("/distribute-lock", watch=my_func)
zkl.acquire()
zk.stop() 
```

# android - 堆栈条形图 achartengine 的图表值未正确显示

> ID：16096490
> 
> 赞同：1
> 
> 时间：2013-04-19T02:57:20.420
> 
> 标签：android, achartengine

我正在使用 Achartengine 库创建堆叠条形图。值未正确显示。我想在条形顶部显示像 {20,20,20} 这样的图表值并对齐到中心。

这是我的代码

```
 dataset.addSeries(JumlahSeries);
    dataset.addSeries(JumlahSeries1);
    dataset.addSeries(FirstSeries);
    final XYSeriesRenderer FirstRenderer = new XYSeriesRenderer();
    Log.d("Error Here","29");
    FirstRenderer.setColor(Color.BLUE);
    FirstRenderer.setFillPoints(false);
    FirstRenderer.setLineWidth(5);  
    FirstRenderer.setChartValuesTextSize(15);
    FirstRenderer.setDisplayChartValues(false);

            // Creating XYSeriesRenderer to customize expenseSeries
    Log.d("Error Here","30");
    final XYSeriesRenderer SecondRenderer = new XYSeriesRenderer();
    SecondRenderer.setColor(Color.RED);
    SecondRenderer.setFillPoints(false);
    SecondRenderer.setLineWidth(5);
    SecondRenderer.setDisplayChartValues(false);
    SecondRenderer.setChartValuesTextSize(15);
    Log.d("Error Here","31");
    final XYSeriesRenderer ThirdRenderer = new XYSeriesRenderer();
    ThirdRenderer.setFillPoints(false);
    ThirdRenderer.setColor(Color.GREEN);
    ThirdRenderer.setLineWidth(5);
    ThirdRenderer.setDisplayChartValues(false);
    ThirdRenderer.setChartValuesTextSize(15);
    // Creating a XYMultipleSeriesRenderer to customize the whole chart
    final XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
    //zoomIn = new Zoom((GraphicalView) mChart, true, multiRenderer.getZoomRate());
    //multiRenderer.setChartTitle("\n"+"\n"+ title);
    multiRenderer.setChartTitleTextSize(20);
    //multiRenderer.setXTitle("\n"+"\n"+"\n"+"\n"+"\n"+"\n"+"\n"+"\n"+"Laporan Pada :"+ DateToDisplay);
    multiRenderer.setShowGridX(false);
    multiRenderer.setShowLegend(true);
    multiRenderer.setShowLabels(true);     
    multiRenderer.setAxisTitleTextSize(15);
    multiRenderer.setMargins(new int[] { 70,70,25,25});
    multiRenderer.setYTitle("Bilangan\n\n"+"\n"+"\n"+"\n");
    multiRenderer.setZoomButtonsVisible(true);
    multiRenderer.setBarSpacing(spacing);
    multiRenderer.setYAxisMax(max);
    multiRenderer.setYLabelsColor(0, Color.BLACK);
    multiRenderer.setXLabelsColor(Color.BLACK);
    multiRenderer.setXLabels(0);     
    multiRenderer.setPanEnabled(true, false);
    double Xmax = 2;
    if(StacktotalX.getTotal().size()<5){
        Log.d("Error Here","32");
        Xmax=StacktotalX.getTotal().size()*1.3;
    }
    multiRenderer.setXAxisMax(Xmax) ;
    multiRenderer.setXAxisMin(-1) ;
    multiRenderer.setLabelsTextSize(13);
    multiRenderer.setZoomEnabled(true,false);
    multiRenderer.setClickEnabled(true);
    for (int i = 0; i < StacktotalX.getTotal().size(); i++) 
    { 
        Log.d("Error Here","33");
        multiRenderer.addXTextLabel(i,StacktotalX.getTotal().get(i).toString());
        Log.d("texl",StacktotalX.getTotal().get(i).toString());
    }
    multiRenderer.addSeriesRenderer(ThirdRenderer);
    multiRenderer.addSeriesRenderer(SecondRenderer);
    multiRenderer.addSeriesRenderer(FirstRenderer);
    Log.d("Error Here","34");
    mChart = ChartFactory.getBarChartView(getBaseContext(), dataset, multiRenderer, Pattern);
    multiRenderer.setApplyBackgroundColor(true);
    multiRenderer.setBackgroundColor(Color.TRANSPARENT);
    multiRenderer.setMarginsColor(Color.TRANSPARENT);
    multiRenderer.setLabelsColor(Color.BLACK);
    mChart.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            SeriesSelection seriesSelection = mChart.getCurrentSeriesAndPoint();
            if (seriesSelection != null) {
                int seriesIndex = seriesSelection.getSeriesIndex();
                String selectedSeries="Bilangan";
                Log.d("seriesIndex",String.valueOf(seriesIndex));
                // String yobject = [(int)seriesSelection.getXValue()-1];
                // Getting the clicked Month
                //String month = x[(int)seriesSelection.getXValue()-1];
                // Getting the y value
                int amount = (int) seriesSelection.getValue();
                Log.d("amout",String.valueOf(amount));
                Toast.makeText(
                        getBaseContext(),
                        selectedSeries + " in " + " : " + amount ,
                        Toast.LENGTH_SHORT).show();
            }
        }
    });
    // Start Activity*/
    chartContainer.addView(mChart);
    new Thread(new Runnable() { 
        public void run() { 
            long time = 0;
            time = 9000/max;
            Log.d("Error Here","35");
            if(time>1.5){
                time = (long) 1.5;
            }if(time<0.5){
                time = (long) 0.5;
            }
            int animation = 1;
            Log.d("Error Here","36");
            while(true){
                boolean stop = true;
                for(int k=0; k< StacktotalX.getTotal().size();k++){ 
                    //                              for(int k=0;k<jum1.size();k++)
                    //                              {
                    //                                  JumlahSeries.add(k,jum1.get(tims));
                    //                                  tims++;
                    //                              }
                    if(animation<= jum3.get(k)){
                        Log.d("Error Here","37");
                        FirstSeries.add(k,animation);
                        stop=false;
                    }
                    if(animation<= jum.get(k)){
                        Log.d("Error Here","38");
                        JumlahSeries1.add(k,animation);
                        stop=false;
                    }
                    if(animation<= jum1.get(k)){
                        Log.d("Error Here","39");
                        JumlahSeries.add(k,animation);
                        stop=false;
                    }
                }
                try { 
                    Log.d("Error Here","40");
                    Thread.sleep(time); 
                    Log.d("Error Here","4");
                    mChart.repaint();
                }catch (InterruptedException e) { 
                    e.printStackTrace(); 
                } 
                animation++; 
                if(stop){
                    FirstSeries.clear();
                    JumlahSeries1.clear();
                    JumlahSeries.clear();
                    for(int y=0;y<StacktotalX.getTotal().size();y++)
                    {
                        FirstSeries.add(y,jum3.get(y));
                        JumlahSeries1.add(y, jum.get(y));
                        JumlahSeries.add(y, jum1.get(y));
                    }
                    FirstRenderer.setChartValuesSpacing(10);
                    FirstRenderer.setChartValuesTextAlign(Align.LEFT);
                    FirstRenderer.setDisplayChartValues(true);
                    FirstRenderer.getChartValuesTextAlign();
                    SecondRenderer.setChartValuesSpacing(10);
                    SecondRenderer.setChartValuesTextAlign(Align.CENTER);
                    SecondRenderer.setDisplayChartValues(true);
                    SecondRenderer.getChartValuesTextAlign();
                    ThirdRenderer.setChartValuesSpacing(10);
                    ThirdRenderer.setChartValuesTextAlign(Align.RIGHT);
                    ThirdRenderer.setDisplayChartValues(true);
                    ThirdRenderer.getChartValuesTextAlign();
                    mChart.repaint();
                    break;
                }
            }         
        }
    }).start();* 
```

这是我现在显示的图像：-![图片](https://i.stack.imgur.com/HoL6Y.png)

# windows-phone-7 - 列表框索引返回负值

> ID：16096491
> 
> 赞同：0
> 
> 时间：2013-04-19T02:57:23.273
> 
> 标签：windows-phone-7, mvvm, listbox, listboxitem, selectedindex

我正在使用 MVVM 光模式创建一个 Windows Phone 应用程序。我的列表框有问题，因为它总是为选定的索引返回负值 (-1)。有谁知道如何解决它？

这是我在视图模型中的代码，我错过了什么吗？谢谢！

```
 public void OnViewListSelectedItem(SelectionChangedEventArgs e)
    {

        ListBox lb = new ListBox();

        if (e.AddedItems.Count == 1)
        {
            if (lb.SelectedIndex == 0)
            {
                _navigationService.NavigateTo(new Uri(ViewModelLocator.ByVendorUrl, UriKind.Relative));
            }

            if (lb.SelectedIndex == 1)
                {
                    _navigationService.NavigateTo(new Uri(ViewModelLocator.ByVendorUrl, UriKind.Relative));
                }
            if (lb.SelectedIndex == 2)
                {
                    _navigationService.NavigateTo(new Uri(ViewModelLocator.ByCombinationUrl, UriKind.Relative));
                }
            }
    } 
```

XAML 代码在这里

```
 <ListBox x:Name="lbviewlist">
                <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <Command:EventToCommand Command="{Binding ViewListCommand}" PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <ListBox.Items>
                    <ListBoxItem Content="By Product" FontSize="35" Margin="10,12,12,0"/>
                    <ListBoxItem Content="By Vendor" FontSize="35" Margin="10,12,12,0"/>
                    <ListBoxItem Content="By Best Combination" FontSize="35" Margin="10,12,12,0"/>
                    </ListBox.Items>
                </ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:01:47.443

您正在代码中创建一个新的 ListBox()（称为 lb）。您不填充它，因此它将为空并且始终具有 -1 的 SelectedIndex

然后检查'e'的'Source'属性并将其转换为ListBox

```
ListBox myList = (ListBox) e.Source; 
```

然后您可以访问 myList 上的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:40:52.997

根据我的研究，列表框的 SelectedIndex 属性不可绑定，当您对 SelectedIndex 属性使用 get 访问器时，它始终返回 -1。尝试对 SelectedIndex 属性使用 set 访问器会引发 NotSupportedException。-- [MSDN List selectedporterty](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.bulletedlist.selectedindex%28v=vs.85%29.aspx)

我还更新了我的代码，因为我的第一个代码是错误的，它创建了新的列表框并导致为空/空。此外 selectionchanged 事件作为事件使用也没有问题。

```
 public void method (SelectionChangedEventArgs e)
    {

        {                
            if (e.AddedItems.Count == 1)
            {
                var listBoxItem = (ListBoxItem)e.AddedItems[0];
                string _string1 = "Test";
                if ((string)listBoxItem.Content == _string1)
                {
                    navigationService.NavigateTo(new Uri(ViewModelLocator.page1, UriKind.Relative));
                }
            }
         }
} 
```

而已。希望能帮助到你！:)

# matlab - If 和 For 语句

> ID：16096496
> 
> 赞同：0
> 
> 时间：2013-04-19T02:58:45.183
> 
> 标签：matlab

`for`是否可以在不使用 Matlab 中的循环和`if`语句的情况下将元素与前一个元素进行比较？

例如：

```
 X = [1 1 1 1 1 1 1 2 2 2 2 2 2 2 2] 
     for n = 1:length(X)
         if (X(n) ~= X(n-1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:03:47.610

如果它们是数字，是的：

```
diff(X)==0 
```

将为您提供与前一个元素相等的所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:03:56.340

`find(diff(X)~=0)`将返回您正在寻找的元素的索引（可能偏移一）。

# ruby - 数组的 Ruby 哈希，检索值

> ID：16096501
> 
> 赞同：0
> 
> 时间：2013-04-19T02:59:21.700
> 
> 标签：ruby, arrays, hash

我一直在互联网上，似乎无法找出如何访问散列中的数组。有很多迭代和扁平化的方法，但没有简单的访问。

```
hash = Hash.new()
data1 = "foo"
data2 = "bar"
hash["foobar"] = {data1, data2} 
```

这一切都有效，现在**我如何在哈希中*单独***访问 data1 和 data2 ？

我在想 puts`hash["foobar"][0]`应该输出`foo`，但它会返回`nil`。

注意：散列中的每个数组都将有 2 个元素。

我知道答案是一个简单的 1 班轮，我似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:15:33.740

正如我对这个问题的评论，数组文字是方括号`[ ]`，而不是花括号`{ }`。将最后一行更改为：

```
hash["foobar"] = [data1, data2] 
```

（你得到 nil~~大概是~~因为散列文字没有`0`键。[这里](http://codepad.org/2MRtoP3H)的测试表明它`,`显然可以作为`=>`(*shudder*) 发挥作用，所以你的 iteral 相当于`{data1 => data2}`。）

# ibatis - 在 WebSphere Application Server、log4j 中启用 MyBatis SQL 日志

> ID：16096502
> 
> 赞同：4
> 
> 时间：2013-04-19T02:59:28.200
> 
> 标签：ibatis, mybatis

我们正在使用 mybatis 3，我想查看 SQL 日志但找不到如何启用它。我在我的应用程序中使用 log4j。我遵循了这个 mybatis 文档 - [http://mybatis.github.io/mybatis-3/logging.html](http://mybatis.github.io/mybatis-3/logging.html)，但是当我运行应用程序时，我得到了以下异常。我是不是错过了什么，

> 原因：org.apache.ibatis.builder.BuilderException：解析 SQL 映射器配置时出错。原因：org.apache.ibatis.builder.BuilderException：设置 logImpl 未知。确保拼写正确（区分大小写）。

在mybatis的配置文件中已经给出了这个设置配置下

```
<settings>
 <setting name="logImpl" value="LOG4J"/>
</settings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T09:53:06.237

我的情况是一样的：我使用的是 mybatis 3.1，并且收到了同样的错误。似乎`logImpl`在更高版本（3.2）中添加了属性。实验我发现，mybatis 试图使用 slf4j 进行日志记录，而我想使用 log4j。

*对我来说，解决方法是添加对***slf4j-log4j**桥库的依赖（我正在使用：log4j 1.2.17，slf4j-log4j12 1.7.5）。所以，解决方法不是为mybatis设置logger，而是为默认的日志接口（slf4j-api）设置另一个实现。

# ruby - 查找两个单词之间的相邻单词列表

> ID：16096503
> 
> 赞同：14
> 
> 时间：2013-04-19T02:59:43.687
> 
> 标签：ruby, algorithm, data-structures

我正在为实践进行编程挑战，并且无法找到用于实现解决方案的良好数据结构/算法。

**背景：**

如果您可以通过添加、删除或更改单个字母将一个单词变为另一个单词，则称两个单词为“相邻”。

“单词列表”是连续单词相邻的唯一单词的有序列表。

**问题：**

编写一个程序，将两个单词作为输入，遍历字典并在它们之间创建一个单词列表。

**例子：**

```
hate  → love:     hate, have, hove, love
dogs  → wolves:   dogs, does, doles, soles, solves, wolves
man   → woman:    man, ran, roan, roman, woman
flour → flower:   flour, lour, dour, doer, dower, lower, flower 
```

我不太确定如何解决这个问题，我的第一次尝试涉及创建第一个单词的排列，然后尝试替换其中的字母。我的第二个想法可能是[后缀树之类的东西](http://en.wikipedia.org/wiki/Suffix_tree)

任何关于至少解决问题的想法或想法都会受到赞赏。请记住，这不是家庭作业，而是我自己正在解决的编程挑战。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:57:29.900

这个谜题首先由查尔斯·道奇森提出，他以笔名刘易斯·卡罗尔写了《*爱丽丝梦游仙境》。*

基本思想是创建一个图结构，其中节点是字典中的单词，边连接相隔一个字母的单词，然后在图中进行广度优先搜索，从第一个单词开始，直到找到第二个字。

[我在我的博客上](http://programmingpraxis.com/2009/03/20/dodgsons-doublets/)讨论了这个问题，并给出了一个实现，其中包括一个用于识别“相邻”单词的巧妙算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T04:56:37.403

我不知道这是否是您正在寻找的解决方案类型，但一个活跃的研究领域是构建“编辑距离 1”字典以快速查找相邻单词（使用您的说法）以获取搜索词建议、数据输入校正和生物信息学（例如发现染色体中的相似性）。参见例如[这篇研究论文](http://zola.di.unipi.it/rossano/wp-content/papercite-data/pdf/cpm12.pdf)。如果没有为整个字典编制索引，至少这可能会建议您使用一种搜索启发式方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T08:54:22.030

我自己做了这个并用它来创建一个（不是很好的）Windows 游戏。

我使用了其他人推荐的将其实现为图形的方法，其中每个节点都是一个单词，如果它们在一个字母上不同，它们就会连接起来。这意味着您可以使用众所周知的图论结果来查找单词之间的路径（例如简单的递归，其中知道距离 1 的单词可以让您找到距离 2 的单词）。

棘手的部分是建立图表。坏消息是它是 O(n^2)。好消息是它不必实时完成——而不是您的程序从文件中读取字典单词，而是读取您之前烘焙的数据结构。

关键的见解是顺序无关紧要，事实上它会妨碍。您需要构建另一种形式来保存去除订单信息并允许更轻松地比较单词的单词。您可以在 O(n) 中执行此操作。你有很多选择；我会展示两个。

1.  对于我退出的单词谜题，我经常使用我称之为字谜字典的编码。一个词由另一个具有相同字母但按字母顺序排列的词表示。所以“汽车”变成了“汽车”。列表和狭缝都变成“ilsst”。这是比原始单词更好的比较结构，但存在更好的比较（但是，对于其他单词谜题，它是一个非常有用的结构）。

2.  字母计数。一个包含 26 个值的数组，显示该字母在单词中的频率。所以对于“汽车”，它从 1,0,1,0,0 开始......因为有一个“a”和一个“c”。保存非零条目的外部列表（单词中出现哪些字母），因此您最多只需要检查 5 或 6 个值而不是 26 个。通过确保最多两个来快速比较以这种形式保存的两个单词非常简单计数不同。这是我会使用的。

所以，我就是这样做的。

我写了一个程序来实现上面的数据结构。

它有一个名为 WordNode 的类。这包含原始单词；一个字母不同的所有其他 WordNode 的列表；一个由 26 个整数组成的数组，给出每个字母的频率，字母计数数组中的非零值列表。

初始化程序填充字母频率数组和相应的非零值列表。它将连接的 WordNode 列表设置为零。

在为每个单词创建了 WordNode 类的实例后，我运行了一个比较方法，该方法检查频率计数是否在不超过两个位置不同。这通常比单词中的字母要少一些；还不错。如果它们恰好在两个地方不同，它们相差一个字母，我将该 WordNode 添加到仅一个字母不同的 WordNode 列表中。

这意味着我们现在有了一个字母不同的所有单词的图表。

您可以导出整个数据结构或去掉字母频率和其他不需要的东西并保存（我使用序列化 XML。如果你这样做，请确保检查它是否处理 WordNodes 列表作为参考和不是嵌入的对象）。

然后你的实际游戏只需要读取这个数据结构（而不​​是字典），它可以通过直接查找找到一个字母不同的单词，基本上是零时间。

可惜我的游戏很垃圾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T03:43:00.377

最简单的（递归）算法是我能想到的（嗯，我现在唯一能想到的）是

*   初始化一个空的黑名单
*   从您的字典中取出对当前单词有效的所有单词
*   删除黑名单中的
*   检查你是否能找到目标词。
    *   如果不是，请对您在上一步中找到的所有单词重复该算法
    *   如果是，你找到了。返回递归打印您找到的路径中的所有单词。

也许有更多时间的人可以为此添加 ruby​​ 代码？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T09:00:27.030

尝试这个

```
x = 'hate'
puts x = x.next until x == 'love' 
```

如果您将它与字典查找结合使用，您将获得该字典中所有有效单词的列表。

# ruby-on-rails - Rails 资产缓存——无法设置 max-age

> ID：16096505
> 
> 赞同：7
> 
> 时间：2013-04-19T02:59:49.447
> 
> 标签：ruby-on-rails, caching, heroku, asset-pipeline

我无法让 rails 为我的任何 CSS 或 JS 资产设置 max-age 值。我们正在运行 rails 3.1，但我们升级了，所以我很可能错过了一些明显的配置。在这一点上，我已经将我能找到的大部分配置从 true 翻转到 false 并再次返回，但没有运气。

这是我当前的环境/production.rb

```
Ventura::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Configure static asset server for tests with Cache-Control for performance
  config.serve_static_assets = false
  config.static_cache_control = "public, max-age=3600"

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to Rails.root.join("public/assets")
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files                                                                                                                                                                                                                                                                                                          
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Use a different logger for distributed setups
  # config.logger = SyslogLogger.new

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Default mailer URL
  config.action_mailer.default_url_options = { :host => 'http://ventura-production.herokuapp.com/'}

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify
end 
```

这是在我的 application.rb

```
# Enable the asset pipeline
config.assets.enabled = true

# Version of your assets, change this if you want to expire all your assets
config.assets.version = '1.0'

# Don't load resources when precompiling
config.assets.initialize_on_precompile = false 
```

我认为我正确地包括了资产。这是一个例子：`<%= javascript_include_tag "client/jquery", "client/jquery-ui-1_8_18", "client/bootstrap_min", "client/jquery-select-menu", "client/jquery_tablesorter", "client/jquery_tablesorter_pager", "client/application" %>`

以及对任何给定页面的请求的部分跟踪：

```
cache: [GET /assets/client/jquery-ui-1_8_18-d903da4c219079ca31f0ea1b23f89afc.css] fresh
cache: [GET /assets/client/bootstrap-2186f501bbd967564f2793c1c30aebc8.css] fresh
cache: [GET /assets/client/rg-5f04e577cfffd5dbcb8a1735ad211bd9.css] fresh
cache: [GET /assets/client/custom_charts-63eaad73c206c7ce6616c7f718be783f.css] fresh
cache: [GET /assets/client/bootstrap_min-afbee53fdd364c866cbd15abd6473012.js] fresh
cache: [GET /assets/client/jquery-select-menu-f2a3776430c5b4ead15173d0247f3f11.js] fresh
cache: [GET /assets/client/jquery_tablesorter-7fc613e34c891c852e2932f59bf91368.js] fresh
cache: [GET /assets/client/jquery_tablesorter_pager-141a886e7f35eb9f662b865516b23eca.js] fresh
cache: [GET /assets/client/jquery-689ca6a49fcbd1c3777b13d1abcc1316.js] fresh
cache: [GET /assets/client/application-6a61f272dd6a1ff7b5587435e67cd1bf.js] fresh 
```

我应该能够在每次页面加载时避免所有这些问题。（是的，我不应该在本地托管大多数 jquery 的东西，在我的待办事项列表中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T17:15:23.460

从[Rails 配置指南](http://guides.rubyonrails.org/configuring.html#rails-general-configuration)（重点是我的）：

> `config.serve_static_assets`将 Rails 本身配置为提供静态资源。默认为 true，但在生产环境中被关闭，因为用于运行应用程序的服务器软件（例如 Nginx 或 Apache）应该提供静态资产。与默认设置不同，在运行（绝对不推荐！）或使用 WEBrick 在生产模式下测试您的应用程序时将其设置为 true。**否则，您将无法使用页面缓存，并且对公共目录下定期存在的文件的请求无论如何都会影响您的 Rails 应用程序。**

`config.serve_static_assets = true`如果你还没有，我会尝试设置。

**更新**：[Heroku 开发中心](https://devcenter.heroku.com/articles/rack-cache-memcached-rails31#serve-static-assets)也建议这样做：

> 为了让您的应用程序能够正确服务、无效和刷新静态资产，必须在 config/environments/production.rb 中更新几个配置设置。允许 Rails 使用该`serve_static_assets`设置服务资产。

# python - OpenERP 7 如何进行空检查？

> ID：16096506
> 
> 赞同：0
> 
> 时间：2013-04-19T02:59:52.833
> 
> 标签：python, xml, openerp

下面显示了我的源代码片段。我需要检查两个函数是否返回空值。？

1.当我使用新数据库时， **bpl_worker**将清空，然后返回 getitem 错误。我添加了**coalesce**关键字，但结果相同（函数 1）

2.当我使用新数据库时， **bpl.company.define**表将为空并且它也返回错误。如何在该类型函数中检查 null。？（功能二）

我尝试使用以下代码。但结果相同

```
if no_define_object_no[0].current_no : 
```

请就此向我提出建议。当我使用新数据库时，我必须面对这个问题

```
def _max_reg_no(self, cr, uid, context=None):
    cr.execute("""
    select coalesce(register_no, 'W00001') as reg_no
    from bpl_worker
    where id in (select max(id) from bpl_worker)
    """)
    if cr:
        res = cr.fetchone()[0]
        emp_no = str(res)
        emp_int = emp_no[1:6]
        emp_no_int = int(emp_int)
        result = 'W' + (str(emp_no_int + 1).zfill(4))
        return result

def on_change_division(self, cr, uid, ids, division_id, context=None):
    if division_id:
        division_object = self.pool.get('bpl.division.n.registration')
        division_browse = division_object.browse(cr, uid, division_id, context=context)
        result_division_id = division_browse.id
        search_condition = [
                          ('department_id', '=', result_division_id)
                          ]
        no_define_object = self.pool.get('bpl.company.define')
        no_define_id = no_define_object.search(cr, uid, search_condition, context=context)
        no_define_object_no = no_define_object.browse(cr, uid, no_define_id, context=context)
        return {'value': {'emp_no': no_define_object_no[0].current_no }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:11:27.047

试试这个代码：

```
emp_no = no_define_object_no and no_define_object_no[0].current_no or False
return {'value': {'emp_no':  emp_no}} 
```

# html - 413 Request Entity Too Large 发送图像数据时

> ID：16096507
> 
> 赞同：2
> 
> 时间：2013-04-19T03:00:14.023
> 
> 标签：html, perl, apache, nginx

我网站的一部分使用该方法从 HTML5 画布中获取图像

```
 .toDataURL() 
```

然后使用 AJAX 将原始数据作为 POST 消息的一部分发送到我的服务器。在服务器端，我有一个需要长数据字符串的 cgi 脚本。我一直收到此错误：

```
 413 (Request Entity Too Large) 
```

我正在使用 perl CGI 库，但我没有

```
 $CGI::POST_MAX 
```

设置，或

```
 $CGI::DISABLE_UPLOADS 
```

放。这是由于服务器中设置的限制吗？我正在使用 apache 和 nginx 作为代理服务器。我担心我无法解决这个问题，因为我正在编写要安装在 bluehost 服务器上的站点。基本上我有两个问题： 1\. 有没有办法使用 html5 画布方法来创建对服务器的文件上传类型的发布请求？2\. 有什么方法可以解决这个 413 错误而不涉及弄乱 Apache/Nginx（或其他一些服务器）配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T08:35:19.723

如果您在尝试上传时遇到 413 Request Entity Too Large 错误，您需要增加`nginx.conf`或任何其他配置文件的大小限制。`client_max_body_size xxM`在 server 部分添加`xx`，您希望允许的大小（以兆字节为单位）在哪里。

```
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        client_max_body_size 20M;
        listen       80;
        server_name  localhost;

        # Main location
        location / {
            proxy_pass         http://127.0.0.1:8000/;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:36:45.850

此错误是由 URL 过长引起的。

虽然对 URL 的长度没有官方限制，但实际上浏览器和服务器有限制。

[浏览器的最大安全长度约为 2000 个字符](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers)。这是旧版本 Internet Explorer 的限制。我认为最新版本的 IE 允许大约 4000，但 Chrome 限制在大约 2000，[即使 Google 生成的 URL 比这更长](https://softwareengineering.stackexchange.com/a/193769/82096)。

[服务器的最大长度因服务器而异](https://stackoverflow.com/questions/1289585/what-is-apaches-maximum-url-length)。

因此，如果您的数据超出此范围，您可能需要想出另一种发送方式，而不是将其转换为 URL 字符串。

# java - 控制台不让我的小程序因为文件而运行

> ID：16096508
> 
> 赞同：1
> 
> 时间：2013-04-19T03:00:19.097
> 
> 标签：java, file, exception, applet, accesscontrolexception

我正在一个小程序中工作。它与 Eclipse 完美配合，但是当我尝试从控制台运行时，它给了我这个堆栈跟踪：

```
C:\Course Technology\src>appletviewer TestJAlienHunt.html

Path for file entered D:\Course Technology\AssignmentFinal\scoreFile.txt java.security.AccessControlException: access denied ("java.io.FilePermission" "D:\Course Technology\AssignmentFinal\scoreFile.txt" "read")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:888)
    at sun.nio.fs.WindowsPath.checkRead(WindowsPath.java:792)
    at sun.nio.fs.WindowsFileSystemProvider.checkAccess(WindowsFileSystemProvider.java:360)
    at java.nio.file.Files.exists(Files.java:2311)
    at ReadFile.fileExists(ReadFile.java:47)
    at JAlienHunt.readScore(JAlienHunt.java:187)
    at JAlienHunt.init(JAlienHunt.java:73)
    at sun.applet.AppletPanel.run(AppletPanel.java:434)
    at java.lang.Thread.run(Thread.java:722) 
```

该文件具有读写权限，为什么我得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:01:26.530

小程序需要经过您的数字签名并得到最终用户的信任，然后才能访问*用户计算机上的本地文件系统。*

我突出显示*用户的计算机*，因为那是任何`File`等同的地方。没有获得`File`指向服务器的选项。如果这是只读的并且服务器托管资源，请通过`URL`.

# ruby-on-rails - 如何使 ID 成为 Rails 中的随机 8 位字母数字？

> ID：16096511
> 
> 赞同：2
> 
> 时间：2013-04-19T03:00:57.787
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我在模型中使用的东西

这是通过 API 发布到另一个 3rd 方网站的 URL

后模型 (post.rb)

```
"#{content.truncate(200)}...more http://domain.com/post/#{id.to_s}" 
```

“id”是指帖子id。如何将其转换为随机的 8 位字母数字？

现在，它被显示为人们可以改变的东西`http://domain.com/post/902`

我想`http://domain.com/post/9sd98asj`

我知道我可能需要使用类似的东西，`SecureRandom.urlsafe_base64(8)`但是我可以在哪里以及如何设置它？

这就是我在 routes.rb 中的内容

```
match '/post/:id', :to => 'posts#show', via: :get, as: :post 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T03:16:48.010

您只需要添加一个属性到`post`. 属性名称是`permalink`。

尝试运行：

```
rails g migration add_permalink_to_posts permalink:string
rake db:migrate 
```

您有两个[Active Record 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)可供选择：`before_save`或`before_create`（查看两者之间的区别）。此示例使用`before_save`回调。

***注意：对于 Rails 3.x***

```
class Post < ActiveRecord::Base
  attr_accessible :content, :permalink
  before_save :make_it_permalink

 def make_it_permalink
   # this can create a permalink using a random 8-digit alphanumeric
   self.permalink = SecureRandom.urlsafe_base64(8)
 end

end 
```

[urlsafe_base64](http://apidock.com/ruby/SecureRandom/urlsafe_base64/class)

在你的`routes.rb`文件中：

```
match "/post/:permalink" => 'posts#show', :as => "show_post" 
```

在`posts_controller.rb`：

```
def index
 @posts = Post.all
end

def show
  @post = Post.find_by_permalink(params[:permalink])
end 
```

最后，以下是意见（`index.html.erb`）：

```
<% @posts.each do |post| %>
<p><%= truncate(post.content, :length => 300).html_safe %>
   <br/><br/>
   <%= link_to "Read More...", show_post_path(post.permalink) %></p>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T03:17:53.927

“[将 Rails 中的主键更改为字符串](https://stackoverflow.com/questions/750413/altering-the-primary-key-in-rails-to-be-a-string)”与您的问题有关。

我会：

*   在表上保留默认 ID
*   不定义资源路由，用 match 编写需要的路由（如`match '/post/:code'`）
*   开`controller#show`，使用`Post.find_by_code(params[:code])`。

# javascript - jQuery：如何让我的倒计时自动重启？

> ID：16096512
> 
> 赞同：2
> 
> 时间：2013-04-19T03:00:58.903
> 
> 标签：javascript, jquery

我有一个从 60 分钟开始的 jQuery 倒计时，当它结束时 - 它会显示一个警报“结束！”。

我希望计时器不会显示此警报，而是重新启动到 60 分钟。这是我的代码：

```
<script type="text/javascript">

    $(function(){
        $('#counter_2').countdown({
          image: 'img/digits.png',
          startTime: '60:00',
          timerEnd: function(){ alert('end!'); },
          format: 'hh:ss'
        });
    });

</script> 
```

我不知道自己在做什么，对 js/jquery 几乎一无所知。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:17:58.450

尝试

```
function doTImeStuff() {
    $('#counter_2').countdown({
        image : 'img/digits.png',
        startTime : '60:00',
        timerEnd : function() {
            setTimeout(doTImeStuff)
        },
        format : 'hh:ss'
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:07:21.583

```
var params = {
          image: 'img/digits.png',
          startTime: '60:00',
          format: 'hh:ss'
        };

function start(){
  $('#counter_2').countdown(params);
}

setInterval(start,60000) 
```

# asp.net - 在 asp.net(vb) 中编辑数据表变量中的值

> ID：16096513
> 
> 赞同：0
> 
> 时间：2013-04-19T03:01:18.483
> 
> 标签：asp.net, vb.net, ado.net, datatable

我有一个包含数据表的变量，如果值为 0，我有条件，我想将其更改为“否”字符串。

这是我的原始代码

```
dt = BrowseServiceTypeMaster(ServiceTypeName)
lvServiceType.DataSource = dt

For i As Integer = 0 To dt.Rows.Count - 1
    If dt(i)("exception").ToString = "0" Then
        dt(i)("exception") = "No"
    End If
Next 
```

这就是我将其更改为：

```
For i As Integer = 0 To dt.Rows.Count - 1
    If dt(i)("exception").ToString = "0" Then
        dt(i)("exception").Fill = "No"
    End If
Next 
```

它仍然给我一个错误，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:20:19.643

如果您只想有条件地更改 DataTable 中行中字段的值，请使用以下内容：

```
For Each row As DataRow In dt.Rows
    If row("exception") = "0" Then
        row("exception") = "No"
    End If
Next 
```

* * *

**编辑**

恐怕你想做的事情是不可能的。您在评论中显示的异常说明了原因：

> 输入字符串的格式不正确。无法存储在异常列中。预期类型是 Int64。

此异常告诉您您正在尝试将 String 值存储在设置为接受`Int64`(Long) 的 DataTable 列中。你不能那样做。

您可以使用许多控件，它们提供可自定义的模板，允许您在运行时根据绑定到该控件元素的值指定要向用户显示的文本。

例如，如果您将 DataTable 绑定到 ListView，您会将“异常”列绑定到[ItemTemplate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemtemplate.aspx)，并使用这样的代码在记录值为 0 时显示“否”，并在所有其他情况下显示字段值：

```
<%#IIf(Eval("exception") = 0, "No", Eval("exception").ToString())%> 
```

# php - 使用 cURL 和 dom 用 php 抓取数据

> ID：16096518
> 
> 赞同：2
> 
> 时间：2013-04-19T03:01:31.750
> 
> 标签：php, domdocument, getelementsbytagname

嗨，我正在使用 cURL 从网站获取数据，我需要获取多个项目，但无法通过标签名称或 ID 获取。我已经设法整理了一些代码，这些代码将使用类名获取一个项目，方法是通过一个循环传递它，然后通过另一个循环传递它以从元素中获取文本。

我在这里有一些问题，首先是我可以看到必须有一种更方便的方法来做到这一点。第二个我需要获取多个元素并堆叠在一起，即标题、描述、标签和一个 url 链接。

```
# Create a DOM parser object and load HTML
$dom    = new DOMDocument();
$result = $dom->loadHTML($html);

$finder = new DomXPath($dom);
$nodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '),     'classname')]");

$tmp_dom = new DOMDocument(); 
foreach ($nodes as $node) 
{
    $tmp_dom->appendChild($tmp_dom->importNode($node,true));
}

$innerHTML = trim($tmp_dom->saveHTML()); 

$buffdom = new DOMDocument();
$buffdom->loadHTML($innerHTML);

# Iterate over all the <a> tags
foreach ($buffdom->getElementsByTagName('a') as $link) 
{
    # Show the <a href>
    echo $link->nodeValue, "<br />", PHP_EOL;
} 
```

我只想坚持使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:41:33.497

我想知道您的问题是否在行：

```
$nodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '),     'classname')]"); 
```

就目前而言，这实际上是查找属于名为“classname”的类的节点——其中“classname”不是变量，而是实际名称。看起来您可能从某个地方复制了一个示例 - 或者您是否按字面意思命名了您的课程？

我想您正在查看的数据可能不在此类节点中。如果您可以发布一小段您尝试解析的实际 HTML，那么应该可以更好地指导您找到解决方案。

作为一个例子，我只是做了以下完整的代码（基于你的，但是添加代码以打开`stackoverflow.com`主页，并更改`'classname'`为`'question'`，因为名称中似乎有很多类`question`，所以我想我应该得到一个好收成。没有让我失望。

```
<?php
// create curl resource
        $ch = curl_init();

        // set url
        curl_setopt($ch, CURLOPT_URL, "http://stackoverflow.com");

        //return the transfer as a string
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        // $output contains the output string
        $output = curl_exec($ch);

        // close curl resource to free up system resources
        curl_close($ch);      
//print_r($output);

$dom = new DOMDocument();
@$dom->loadHTML($output);

$finder = new DomXPath($dom);
$nodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '), 'question')]");
print_r($nodes);

$tmp_dom = new DOMDocument(); 
foreach ($nodes as $node) 
    {
    $tmp_dom->appendChild($tmp_dom->importNode($node,true));
    }
  $innerHTML.=trim($tmp_dom->saveHTML()); 

  $buffdom = new DOMDocument();
  @$buffdom->loadHTML($innerHTML);
    # Iterate over all the <a> tags
    foreach($buffdom->getElementsByTagName('a') as $link) {
        # Show the <a href>
        echo $link->nodeValue, PHP_EOL;
    echo "<br />";
    }
?> 
```

导致很多很多行的输出。试试看 - 该页面位于[http://www.floris.us/SO/scraper.php](http://www.floris.us/SO/scraper.php)

（或将上面的代码粘贴到您自己的页面中）。你非常非常接近！

注意 - 这不会产生您想要的所有输出 - 您需要包含节点的其他属性，而不仅仅是打印`nodeValue`, 来获取所有内容。但我认为您可以从这里获取它（同样，如果没有您的 HTML 的实际样本，其他人不可能比这更进一步帮助您......）

# c# - 使用 InternalsVisibleTo 进行单元测试不适用于使用动态参数的内部方法

> ID：16096521
> 
> 赞同：1
> 
> 时间：2013-04-19T03:02:02.130
> 
> 标签：c#, silverlight, c#-4.0, silverlight-5.0, internalsvisibleto

我正在尝试使用[InternalsVisibleTo](http://msdn.microsoft.com/en-AU/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)来允许我从单独的测试程序集中测试实用程序/辅助方法。[当我尝试使用动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)参数调用[内部](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)方法时，我收到错误“ **RuntimeBinderException 未处理...由于其保护级别而无法访问。** ”

 **我相信我正确使用了[InternalsVisibleTo](http://msdn.microsoft.com/en-AU/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性，因为我能够测试其他不使用[动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)参数的内部方法。以下代码说明了只有**TestInternalMethodWithDynamic**测试失败的场景，如下所示。我已经使用实例方法而不是静态方法重复了测试，这没有任何区别。

.NET 技术是 Silverlight 5，我使用[Silverlight 单元测试框架](http://silverlight.codeplex.com/)来执行测试。由于项目的 Excel 自动化要求，我需要使用动态参数。

**编辑**：我已经使用 .NET 4 类库程序集测试了相同的调用，并且它是成功的，因此问题似乎特定于**Silverlight**。

![Silverlight 单元测试结果](https://i.stack.imgur.com/wHUi1.png)

示例实用程序类...

```
public class Utility
{
    internal static int InternalMethodWithDynamic(dynamic parameter) {
        return (int)parameter;
    }

    internal static int InternalMethodWithInteger(int parameter) {
        return parameter;
    }

    public static int PublicMethodWithDynamic(dynamic parmater) {
        return (int)parmater;
    }

    public static int PublicMethodWithInteger(int parmater) {
        return parmater;
    }
} 
```

还有测试课...

```
[TestClass]
public class UtilityTest
{
    [TestMethod]
    public void TestInternalMethodWithDynamic() {
        dynamic parameter = 10;
        Assert.AreEqual(10, Utility.InternalMethodWithDynamic(parameter));
    }

    [TestMethod]
    public void TestPublicMethodWithInteger() {
        int parameter = 10;
        Assert.AreEqual(10, Utility.PublicMethodWithInteger(parameter));
    }

    [TestMethod]
    public void TestPublicMethodWithDynamic() {
        dynamic parameter = 10;
        Assert.AreEqual(10, Utility.PublicMethodWithDynamic(parameter));
    }

    [TestMethod]
    public void TestInternalMethodWithInteger() {
        int parameter = 10;
        Assert.AreEqual(10, Utility.InternalMethodWithInteger(parameter));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:04:00.290

**解决方法：**

[这并不理想，但您可以作弊，但仍然可以通过将参数作为动态](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)以外的参数传递（例如[.NET Integral Types](http://msdn.microsoft.com/en-us/library/exx3b86w.aspx)之一）来测试方法的底层逻辑。我不能说我理解动态类型和隐式类型转换足以解释到底发生了什么，但这似乎以某种方式绕过了访问修饰符检查。至少我不需要公开该方法。下面修改后的测试现在通过了。

我认为这对于我的方案来说是一个可以接受的解决方法，但在其他情况下可能存在与类型转换相关的一些极端情况。

```
[TestClass]
public class UtilityTest
{
    [TestMethod]
    public void TestInternalMethodWithDynamic() {
        int parameter = 10;
        Assert.AreEqual(10, Utility.InternalMethodWithDynamic(parameter));
    }
} 
```**

# emacs - 如何防止 emacs-org 模式代码块的评估结果表

> ID：16096524
> 
> 赞同：1
> 
> 时间：2013-04-19T03:02:22.470
> 
> 标签：emacs, org-mode

我使用 org-mode 如下：

```
#+BEGIN_SRC sh                                                                                                                                               
ulimit -a                                                                                                                                                    
#+END_SRC 
```

当我运行**Cc Cc**时，代码被评估，**结果**部分被格式化为 org-mode 的表：

```
#+BEGIN_SRC sh                                                                                                                                               
ulimit -a                                                                                                                                                    
#+END_SRC                                                                                                                                                    

#+RESULTS:
| core       | file     | size      | (blocks,  | -c)       |         0 |
| data       | seg      | size      | (kbytes,  | -d)       | unlimited |
| scheduling | priority | (-e)      | 0         |           |           |
| file       | size     | (blocks,  | -f)       | unlimited |           |
| pending    | signals  | (-i)      | 16448     |           |           |
| max        | locked   | memory    | (kbytes,  | -l)       |        32 |
| max        | memory   | size      | (kbytes,  | -m)       | unlimited |
| open       | files    | (-n)      | 65534     |           |           |
| pipe       | size     | (512      | bytes,    | -p)       |         8 |
| POSIX      | message  | queues    | (bytes,   | -q)       |    819200 |
| real-time  | priority | (-r)      | 0         |           |           |
| stack      | size     | (kbytes,  | -s)       | 10240     |           |
| cpu        | time     | (seconds, | -t)       | unlimited |           |
| max        | user     | processes | (-u)      | 16448     |           |
| virtual    | memory   | (kbytes,  | -v)       | unlimited |           |
| file       | locks    | (-x)      | unlimited |           |           | 
```

这不是我想要的，我希望结果可以保持原始格式。那么如何防止 org 自动格式化结果呢？

很感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T08:38:51.963

添加`:results output raw`应该做到这一点。

# r - 在 R 中通配数据框或其他对象

> ID：16096526
> 
> 赞同：3
> 
> 时间：2013-04-19T03:02:25.510
> 
> 标签：r, object, glob

这应该是一个简单的，我希望。我有几个数据框加载到工作区，标记为 df01 到 df100，并非所有数字都表示。我想在所有数据集中绘制特定列，例如在箱形图中。如何使用通配符引用以 df 开头的所有对象，即：

```
boxplot(df00$col1, df02$col1, df04$col1)

 = 

boxplot(df*$col1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:27:32.813

惯用的方法是使用列表，或使用单独的环境。

`ls`您可以使用和创建此列表`pattern`

```
df.names <- ls(pattern = '^df')
# note 
# ls(pattern ='^df[[:digit:]]{2,}')
# may be safer if there are objects starting with df you don't want

df.list <- mget(df.names)
# note if you are using a version of R prior to R 3.0.0
# you will need `envir = parent.frame()`
# mget(ls(pattern = 'df'), envir = parent.frame()) 

# use `lapply` to extract the relevant columns

df.col1 <- lapply(df.list, '[[', 'col1')

# call boxplot   

boxplot(df.col1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T03:26:00.057

尝试这个：

```
nums      <- sprintf("%02d", 0:100)
dfs.names <- Filter(exists, paste0("df", nums))
dfs.obj   <- lapply(dfs.names, get)
dfs.col1  <- lapply(dfs.obj, `[[`, "col1")

do.call(boxplot, dfs.col1) 
```

# r - 相关分析所需的最小样本是多少（R中的线性模型）

> ID：16096527
> 
> 赞同：-3
> 
> 时间：2013-04-19T03:02:46.597
> 
> 标签：r, statistics

我正在尝试使用 R 的线性模型进行相关性分析

> lm()

我想知道它的合理最低样本是多少？有什么规则可以确定吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T04:33:33.963

根据经验，~~20、30、1000 个样本~~ [作为经验法则，您应该警惕经验法则](https://stats.stackexchange.com/a/56477/7744)。也许排除“少即是多，当然样本量除外”（Cohen & Cohen, 1983: 169-171）。

您可以在[https://stats.stackexchange.com/](https://stats.stackexchange.com/)上提出您的问题，但他们可能会为您提供可能不是您正在寻找的整数的答案。例如：

*   [20号是不是很神奇？](https://stats.stackexchange.com/questions/56465/is-the-number-20-magic)
*   [是否有参考建议使用 30 作为足够大的样本量？](https://stats.stackexchange.com/questions/2541/is-there-a-reference-that-suggest-using-30-as-a-large-enough-sample-size)
*   [多元回归最小样本量的经验法则](https://stats.stackexchange.com/questions/10079/rules-of-thumb-for-minimum-sample-size-for-multiple-regression)
*   [对于整体分析和亚组分析，相关分析的合理样本量是多少？](https://stats.stackexchange.com/questions/15842/what-is-a-reasonable-sample-size-for-correlation-analysis-for-both-overall-and-s)
*   [30 个样品。标准、建议还是迷信？](http://statswithcats.wordpress.com/2010/07/11/30-samples-standard-suggestion-or-superstition/)
*   等等

如果您在此处编辑您的问题以包含一个类似于您的实际用例的[**可重现示例**](https://stackoverflow.com/q/5963269/1036500)，然后请求帮助对相关错误度量的编码计算进行编码，您将获得更有用的回复。您可以`pwr`在编辑问题之前探索该软件包（参见此处的示例： http: [//www.statmethods.net/stats/power.html](http://www.statmethods.net/stats/power.html)）。

做一些谷歌搜索以找到您认为对您有用的错误度量的名称。你可以从这些开始：

Lenth, RV (2001), Some Practical Guidelines for Effective Sample Size Determination, The American Statistician, 55, 187-193。

Wheeler, RE (1974), '便携式电源', Technometrics, 16, 193–201。

Cohen, J. & Cohen, P. (1983)。行为科学应用多元回归/相关分析（第 2 版）。（新泽西州希尔斯代尔：Erlbaum）

# python - 我如何在 django admin change_list 模板中获取对象

> ID：16096528
> 
> 赞同：4
> 
> 时间：2013-04-19T03:03:01.287
> 
> 标签：python, django

我想覆盖 django admin change_list 页面，但我无法找到如何获取实际对象，以便我可以访问类似的属性`object.name`

在模板中，他们有这个代码

`<tr >{% for item in result %}{{ item }}{% endfor %}</tr>`

我可以使用的实际对象在哪里

编辑：

看起来`result`是行，项目是列。我想要类似的东西`result.pk`

如果结果，这会产生列表

[https://github.com/django/django/blob/master/django/contrib/admin/templatetags/admin_list.py#L175](https://github.com/django/django/blob/master/django/contrib/admin/templatetags/admin_list.py#L175)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T04:11:29.737

馈送到的上下文`change_list.html`包括`cl`对应于`contrib.admin.views.main.ChangeList`对象的条目，该对象是包含结果列表的对象。

您可以像这样直接访问结果列表：

```
{% for object in cl.result_list %}
{{ object.field }}
{% endfor %} 
```

`change_list_results.html`更改列表结果通过使用`result_list`模板标签呈现为模板的一部分。渲染模板时，模板还存在上下文变量`change_list_results.html`。`cl`

`result`当 Django 模板在您的示例中迭代时，`result`是一个`ResultList`包含预渲染 html 的对象，正在渲染的底层对象不可用。

要在此级别覆盖模板，您可能需要实现自己的`result_list`类型模板标记，该标记可以返回结果列表，其中基础对象作为属性附加到每个结果。

简而言之，您可能需要：

*   `result_list`根据 Django 的实现创建您自己的模板标签。与其将`results`上下文作为`ResultList`预呈现的 html 列表返回，不如让它返回`results`包含能够呈现为 html 的对象，以及每个项目都附有原始基础对象以供以后在模板中使用。
*   覆盖`change_list.html`模板以使用您的新标签而不是 Django 的`result_list`模板标签。
*   覆盖`change_list_results.html`模板以利用模板标签中可用的额外信息，例如每个底层对象的存在。

正如您可能已经收集到的那样，管理应用程序通过层非常紧密地集成在一起。更改其操作并非易事，需要在源的多个部分进行更改和覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-01T12:47:46.110

您还可以使用“change_list_template”覆盖您用于管理员的模板，然后扩展 change_list 模板。喜欢

```
class NoiseFilter200Admin(admin.ModelAdmin):
    change_list_template = 'currencies/nf200_change_list.html'
    list_filter = ['sectors',]
    search_fields = ['name']
    #list_filter = ( MarketCapFilter )

    def market_cap_value(self, obj):
      return obj.market_cap_value > 1000000000

    def changelist_view(self, request, extra_context=None):
        response = super().changelist_view(
            request,
            extra_context=extra_context,
        )
        try:
            qs = response.context_data['cl'].queryset
        except (AttributeError, KeyError):
            return response

        metrics = {
            'total_volume': Sum('volume'),
            'total_mcap': Sum('market_cap'),
        }
        response.context_data['nf_200_list'] = list(
            qs
            .values('rank','ticker','name','priceUSD','market_cap','volume','change_24h')
           # .annotate(**metrics)
            .order_by('-market_cap')[:200]
        )

        response.context_data['nf_200_totals'] = dict(
            qs.aggregate(**metrics)
        )

        return response 
```

然后在你的模板中你像这样遍历结果，你会看到你想要的

```
{% extends "admin/change_list.html" %}
{% load humanize %}
{% load math_tags %}

{% block content_title %}
    <h1> Noise Filter 200 </h1>
{% endblock %}
{% block result_list %}
<style>
.results table {
    counter-reset: rowNumber;
}

.results tbody tr{
    counter-increment: rowNumber;
}

.results tbody td.rank::before {
    content: counter(rowNumber);;
}
</style>
    <div style="margin: 10px 0;">Total MCap today: {{ nf_200_totals.total_mcap | intword }}, Total volume today: {{ nf_200_totals.total_volume | intword }} </div>
<div class="results">
    <table>
    <thead>
      <tr>
        <th>
          <div class="text">
            Rank
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">Name</a>
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">Ticker</a>
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">PriceUSD</a>
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">Market cap</a>
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">Volume</a>
          </div>
        </th>
        <th>
          <div class="text">
            <a href="#">Change 24</a>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      {% for row in nf_200_list %}
      <tr class="{% cycle 'row1' 'row2' %}">
        <td class="rank">  </td>
        <td> {{ row.name }} </td>
        <td> {{ row.ticker }} </td>
        <td> $ {{ row.priceUSD|to_string }} </td>
        <td> {{ row.market_cap | intword }} </td>
        <td> {{ row.volume | intword }} </td>
        <td> {{ row.change_24h | percent}} </td>
      </tr>
      {% endfor %}
    </tbody>

  </table>
</div>
{% endblock %}
{% block pagination %}{% endblock %} 
```

缺点是你可以在这里使用一些你得到的功能（比如排序）。

# google-app-engine - Google App Engine (Python 2.7) Helloworld 无法通过 GAE Launcher 在浏览器中打开

> ID：16096540
> 
> 赞同：1
> 
> 时间：2013-04-19T03:04:27.370
> 
> 标签：google-app-engine

我正在尝试运行 Google App Engine Python 2.7 Hello World 程序并通过 Google App Engine Launcher 在浏览器中查看它。我完全按照安装和程序说明进行操作。我将说明中的代码复制并粘贴到 helloworld.py 文件和 app.yam1 中，并验证它们是相同的。我在启动器上点击运行，它运行没有错误，尽管我没有看到已经完成的迹象。我从日志中得到以下信息：

***使用以下标志运行 dev_appserver： --skip_sdk_update_check=yes --port=8080 --admin_port=8000 Python 命令：/opt/local/bin/python2.7

当我尝试通过 GAE 启动器在浏览器中打开时，“浏览”图标显示为灰色，并且无法打开浏览器。按照教程的建议，我尝试在 Firefox 和 Chrome 中打开 localhost:8080 ，但我无法连接两者的错误。

如何在浏览器中查看 Hello World？

# c++ - 如何找出我的 C++ 程序使用的 DLL 是什么？

> ID：16096542
> 
> 赞同：3
> 
> 时间：2013-04-19T03:04:58.583
> 
> 标签：c++, dll, sdl, release

即使我在发布模式下构建 exe，当我尝试在另一台 PC 上执行该程序时，我也会收到 DLL not found 错误。所以我需要找出我的程序需要哪些 dll 并用 exe 复制它们。但我似乎无法弄清楚如何找到我的程序使用的 dll。

```
#include "SDL.h"
#include "SDL_image.h"
#include "SDL_ttf.h"
#include "SDL_mixer.h"
#include <string>
#include "head.h"
#include <cstdlib>
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
#include <windows.h> 
```

我很确定它需要什么 dll 是基于包含的，所以它们就在这里。我知道 SDL 库使用了哪些库，但我不知道其他库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T03:07:50.740

[Dependency Walker](http://www.dependencywalker.com/)可能会有所帮助。看看下面的应用程序屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/KQZHg.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T03:08:30.650

用于`dumpbin`打印可执行文件或 DLL 所需的所有动态库：

```
dumpbin /dependents myprog.exe 
```

通常你可以`dumpbin.exe`在目录中找到`"C:\Program Files (x86)\Microsoft Visual Studio XXX\VC\bin"`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T03:07:36.233

在运行 exe 之前，您可以使用[依赖遍历器](http://www.dependencywalker.com/)查看所有依赖是否可用：

# c++ - 优化 CUDA 内核

> ID：16096549
> 
> 赞同：0
> 
> 时间：2013-04-19T03:05:28.707
> 
> 标签：c++, optimization, memory-management, cuda, nvidia

下面的CUDA内核如何进一步优化？还是已经针对其目的进行了优化？

我在想也许我可以`__constant__`在主机代码中使用内存来设置随机数的数组。这可能吗？我知道它是只读内存，所以我很困惑是否可以使用常量内存而不是`__global__`内存。

```
 /*
 * CUDA kernel that will execute 100 threads in parallel
 * and will populate these parallel arrays with 100 random numbers
 * array size = 100.
*/

__global__ void initializeArrays(float* posx, float* posy,float* rayon, float* veloc,
                                float* opacity ,float* angle, unsigned char* color, int height,
                                int width, curandState* state, size_t pitch){

    int idx =  blockIdx.x * blockDim.x + threadIdx.x;
    curandState localState = state[idx];

    posx[idx] = (float)(curand_normal(&localState)*width);
    posy[idx] = (float)(curand_normal(&localState)*height);
    rayon[idx] = (float)(10 + curand_normal(&localState)*50);
    angle[idx] = (float)(curand_normal(&localState)*360);
    veloc[idx] = (float)(curand_uniform(&localState)*20 - 10);
    color[idx*pitch] = (unsigned char)(curand_normal(&localState)*255);
    color[(idx*pitch)+1] = (unsigned char)(curand_normal(&localState)*255);
    color[(idx*pitch)+2] = (unsigned char)(curand_normal(&localState)*255);
    opacity[idx] = (float)(0.3f + 1.5f *curand_normal(&localState));

    __syncthreads();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:31:32.503

我将尝试使 2D 线程阻塞并使每个线程只执行一个操作。考虑这样的内核：

```
__global__ void initializeArrays(float* posx, float* posy,float* rayon, float* veloc,
                            float* opacity ,float* angle, unsigned char* color, int height,
                            int width, curandState* state, size_t pitch){

int idx =  blockIdx.x * blockDim.x + threadIdx.x;
int idy = threadIdx.y;
curandState localState = state[idy][idx];

    switch(idy)
    {
        case 0:
            posx[idx] = (float)(curand_normal(&localState)*width);
            break;
        case 1:
            posy[idx] = (float)(curand_normal(&localState)*height);
            break;
        case 2:
            rayon[idx] = (float)(10 + curand_normal(&localState)*50);
            break;
        case 3:
            angle[idx] = (float)(curand_normal(&localState)*360);
            break;
        case 4:
            veloc[idx] = (float)(curand_uniform(&localState)*20 - 10);
            break;
        case 5:
            color[idx*pitch] = (unsigned char)(curand_normal(&localState)*255);
            break;
        case 6:
            color[(idx*pitch)+1] = (unsigned char)(curand_normal(&localState)*255);
            break;
        case 7:
            color[(idx*pitch)+2] = (unsigned char)(curand_normal(&localState)*255);
            break;
        case 8:
            opacity[idx] = (float)(0.3f + 1.5f *curand_normal(&localState));
            break;
        default:
            break;
    }

    __syncthreads();
} 
```

这实际上可能会给你一些加速。

# knockout.js - Knockout.JS 映射到 observable 与 observableArray

> ID：16096550
> 
> 赞同：1
> 
> 时间：2013-04-19T03:05:44.753
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, ko.observablearray

当我带回一个数组（使用'foreach'绑定）时，我无法弄清楚为什么我的 ko.mapping 工作正常，但是当它是一个对象时（使用'with'绑定）它不起作用一点也不。我没有得到任何错误，但我也没有得到任何结果：

```
function EventViewModel() {
    var self = this;
    self.events = ko.observableArray([]);
    self.singleEvent = ko.observable({});

    self.getEvents = function () {
        self.events.removeAll();
        $.ajax("/api/Event/", {
            contentType: "application/json",
            success: function (allData) {
                ko.mapping.fromJS(allData, null, self.events);
            }
        });
    }    
    self.getSingleEvent = function () {
        self.events.removeAll();
        $.ajax("/api/Event/?guid=435a666b-7913-417f-a474-dfb33d74c2ec", {
            contentType: "application/json",
            success: function (allData) {
                ko.mapping.fromJS(allData, null, self.singleEvent);
            }
        });
    }

    self.getEvents();
    self.getSingleEvent();
};
window.vm = new EventViewModel();
ko.applyBindings(vm); 
```

我可以将 getSingleEvent() 的结果推入一个数组并再次使用“foreach”，如下所示：

```
ko.mapping.fromJS([allData], null, self.singleEvent); 
```

并使 singleEvent 成为 observableArray，这确实有效，但对我来说似乎是个骗子。

getEvents() 中的 JSON 如下所示：

```
[{"EventId":4,"Year":2013,"StartDate":"2013-08-28T00:00:00","EndDate":"2013-09-02T00:00:00","EventGuid":"435a666b-7913-417f-a474-dfb33d74c2ec"},{"EventId":5,"Year":2013,"StartDate":"2013-06-07T00:00:00","EndDate":"2013-06-09T00:00:00","EventGuid":"615014ba-15cd-4371-8d43-04d66eb558a2"}] 
```

来自 getSingleEvent() 的 JSON 如下所示：

```
{"EventId":4,"Year":2013,"StartDate":"2013-08-28T00:00:00","EndDate":"2013-09-02T00:00:00","EventGuid":"435a666b-7913-417f-a474-dfb33d74c2ec"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:37:08.557

我很确定 ko.mapping 不会使对象可观察。相反，它使对象的每个属性都是可观察的。另一方面，没有什么能阻止你`self.singleEvent(allData)`设置 observable。

# delphi - IBO 和 Firebird 通过 Params 保存到 Blob 字段

> ID：16096552
> 
> 赞同：0
> 
> 时间：2013-04-19T03:05:46.030
> 
> 标签：delphi, firebird

我想通过参数将 TImage 中的图片保存到 blob 字段。我已经在网上搜索，但我无法得到它。

我尝试：params[1].LoadFromFile(PicPath)。它有效，但我只想从 TImage 流式传输。我应该从 IBO 源修改吗？

```
procedure TIB_ColumnBlob.LoadFromFile( const AFileName: string );
var
  tmpStream: TStream;
begin
  tmpStream := TFileStream.Create( AFileName, fmOpenRead );
  try
    LoadFromStream( tmpStream );
  finally
    tmpStream.Free;
  end;
end; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:50:28.043

“我在网上搜索过，但我找不到。” - 我不知道该说什么 - [http://www.ibobjects.com/ibocontributed.html](http://www.ibobjects.com/ibocontributed.html) -> [http://source.ibobjects.com/contributed/IBO_JPEGdemo.zip](http://source.ibobjects.com/contributed/IBO_JPEGdemo.zip)和下面的项目描述：

> 一个使用 IBO 和基于 TDBImage 的组件 TDBJPGImage 的小型演示项目，展示了如何将图像存储为 JPG 或 BMP blob 并进行动态转换和一些其他有趣的选项。包括使用 Firebird 1.5 gbak、所有者 SYSDBA 的示例数据库 gbak'ed。

# php - 将用户数据发布到数据库

> ID：16096553
> 
> 赞同：0
> 
> 时间：2013-04-19T03:05:46.350
> 
> 标签：php

我在将表单发布到数据库时遇到问题。第一部分是从一个表中检查 CustomerID 的查询，这部分工作正常。下一部分是将值发布到不同的表中。表格上一切正常，但没有发布到“订单”表，也没有返回任何错误。我错过了什么？

```
<?php
    //Insert Into database
    $mysqli = @ new mysqli('127.0.0.1','root',null,'storefront');

    if (mysqli_connect_error())
    {
    echo 'Error: Could not connect to database. Please try again later.';
    exit;
    }

    $mysqli->select_db("storefront")
        or die("<p>Unable to select the database.</p>"
        ."<p>Error code ". mysqli_errno($mysqli)
        .": " . mysqli_error($mysqli)) . "</p>";

    $customerid = isset($_POST['customerid']);
    $custid = $_POST['customerid'];

    if($customerid)
    {
        $result = $mysqli->query("SELECT * FROM customer WHERE customerID = '$custid'");
        $row = $result->fetch_row();

        if (!$row)
        {
            echo "Customer Number not found.".mysql_error();
            exit;
        }
    }
    else
    {

        $tableName = "orders";
        $nullstr = "NULL";

        $SQLstring = "INSERT INTO $tableName VALUES
                ('".$nullstr."','".$customerid."', '".$blue."','".$green."','".$red."')";
        $result = $mysqli->query($SQLstring);   

        if ($result)
        {
            echo $mysqli->affected_rows ."  $tableName database.<br />";

            $mysqli->close();
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:14:39.647

这一行：

```
$SQLstring = "INSERT INTO $tableName VALUES
            ('".$nullstr."','".$customerid."', '".$blue."','".$green."','".$red."')"; 
```

应该是这样的

```
$SQLstring = "INSERT INTO $tableName VALUES
            ('".$nullstr."','".$custid."', '".$blue."','".$green."','".$red."')"; 
```

您的插入在 ELSE 中被调用`if($customerid)`- 看起来您打算将其作为第一个查询的 else：

```
 if($customerid)
    {
        $result = $mysqli->query("SELECT * FROM customer WHERE customerID = '$custid'");
        $row = $result->fetch_row();

        if (!$row)
        {
            echo "Customer Number not found.".mysql_error();
            exit;
        }      
        else
        {
            $tableName = "orders";
            $nullstr = "NULL";

            $SQLstring = "INSERT INTO $tableName VALUES
                ('".$nullstr."','".$custid."', '".$blue."','".$green."','".$red."')";
            $result = $mysqli->query($SQLstring);   

            if ($result)
            {
                echo $mysqli->affected_rows ."  $tableName database.<br />";

                $mysqli->close();
            }
        }
    } 
```

$blue、$green 和 $red 没有在任何地方定义，但这并不相关。

也许我只是错过了你在这里意图的想法。如果是这样，请告诉我，我将再次审查并更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:16:21.293

尝试更换

`$customerid`至`$custid`

从

```
('".$nullstr."','".$customerid."', '".$blue."','".$green."','".$red."')"; 
```

至

```
('".$nullstr."','".$custid."', '".$blue."','".$green."','".$red."')"; 
```

# django - 最小化 Django 查询集的数量以创建 json.dumps

> ID：16096554
> 
> 赞同：0
> 
> 时间：2013-04-19T03:05:53.770
> 
> 标签：django, json, django-queryset

首先，感谢您的时间和帮助:)

我在下面创建了模型，并且有一段时间一直在愉快地使用场景 1（场景也在下面）进行编码。

现在我开始使用图表，需要以场景 2 的形式访问数据。场景 2 有效——附加值是我有时间在等待结果的同时制作三明治。我知道这是由于我四次访问数据库这一事实造成的，所以我可能创建了代码历史上效率最低的一段代码，但我未能使其正常工作。

我非常感谢您帮助理解如何在不违反 Django 所代表的每一个原则的情况下达到预期的结果。

再次感谢你！

```
Model:

    class People_stats(models.Model):
    people_stats = models.CharField(max_length=50, primary_key=True)        
    con_basmat = models.IntegerField(null=True, max_length=6) 
    con_cgoods = models.IntegerField(null=True, max_length=6) 
    con_cserv = models.IntegerField(null=True, max_length=6)                 

   SCENARIO 1 - when iterating in template 

     Views:

        people = ['Name', 'Benchmark1', 'Benchmark2', 'Benchmark3']
        people_names = [form.cleaned_data[p] for p in people]            

        profiles =  [People_stats.objects.filter(name__in=people_names)] 

     Template: 

        {% for p in profiles %}
          {%for d in p %}              
            <ul>
              <li>{{d.con_basmat}}</li>
              <li>{{d.con_cgoods}}</li>
              <li>{{d.con_cserv}}</li>                        
            </ul> 
          {%endfor%} 
        {% endfor %}       

    #Scenario 2 - when I need to access model fields and create a json.dump  

      Views:

        N = form.cleaned_data['Name']
        B1 = form.cleaned_data['Benchmark1']
        B2 = form.cleaned_data['Benchmark2']
        B3 = form.cleaned_data['Benchmark3']

        dir_prof1 =  People_stats.objects.filter(name__exact=N)
        dir_prof2 =  People_stats.objects.filter(name__exact=B1)
        dir_prof3 =  People_stats.objects.filter(name__exact=B2)
        dir_prof4 =  People_stats.objects.filter(name__exact=B3)

        for d in dir_prof1:               
          con_ind1 = ['Basic Materials', d.con_basmat],['Consumer Goods', d.con_cgoods],['Consumer Services',d.con_cserv]

        for d in dir_prof2:               
          con_ind2 = ['Basic Materials', d.con_basmat],['Consumer Goods', d.con_cgoods],['Consumer Services',d.con_cserv]

        for d in dir_prof3:               
          con_ind3 = ['Basic Materials', d.con_basmat],['Consumer Goods', d.con_cgoods],['Consumer Services',d.con_cserv]

        for d in dir_prof4:               
          con_ind4 = ['Basic Materials', d.con_basmat],['Consumer Goods', d.con_cgoods],['Consumer Services',d.con_cserv]

        con_ind_dmp1 = json.dumps(con_ind1, cls=DjangoJSONEncoder)

        con_ind_dmp2 = json.dumps(con_ind2, cls=DjangoJSONEncoder)

        con_ind_dmp3 = json.dumps(con_ind3, cls=DjangoJSONEncoder)

        con_ind_dmp4 = json.dumps(con_ind4, cls=DjangoJSONEncoder)

      Template: 
         I don't think we need to make it that far to realize that this is not the way to go :( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:28:26.167

尝试这个

对于 dir_prof1 中的 d：
con_ind1 = {'基本材料'：d.con_basmat，'消费品'：d.con_cgoods，'消费者服务'：d.con_cserv}

对于 dir_prof2 中的 d：
con_ind2 = {'基本材料'：d.con_basmat，'消费品'：d.con_cgoods，'消费者服务'，d.con_cserv}

对于 dir_prof3 中的 d：
con_ind3 = {'基本材料'：d.con_basmat，'消费品'：d.con_cgoods，'消费者服务'：d.con_cserv}

对于 dir_prof4 中的 d：
con_ind4 = {'基本材料'：d.con_basmat，'消费品'：d.con_cgoods，'消费者服务'：d.con_cserv}

con_ind_dmp1 = json.dumps(con_ind1)

con_ind_dmp2 = json.dumps(con_ind2)

con_ind_dmp3 = json.dumps(con_ind3)

con_ind_dmp4 = json.dumps(con_ind4)

# android - 为什么 USB 鼠标在禁用 USB 主机的 Android 平板电脑上工作？

> ID：16096556
> 
> 赞同：0
> 
> 时间：2013-04-19T03:05:59.290
> 
> 标签：android, usb

我开发了一个连接到 USB 读卡器的 android 应用程序。我已经测试了该应用程序，在三星 Tab 10.1（旧版本）中运行没有任何问题。

然后我购买了一个 7 英寸的 MSI 平板电脑 E71 并部署了相同的应用程序并连接到相同的 USB 读卡器，但 MSI 平板电脑无法检测到 USB 读卡器。我四处搜索，对这个问题有一些想法（[这里](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)和[这里](https://stackoverflow.com/questions/12110555/how-to-detect-usb-device-in-android-tablet-which-acts-as-usb-host)）

我已经使用 adb 检查了 MSI 平板电脑，在其中找不到“ **android.hardware.usb.host.xml ”。**然后我检查三星 Tab 10.1，我可以看到“android.hardware.usb.host.xml”文件在那里。所以我可以得出结论，MSI 平板电脑 USB 主机模式已禁用（如果我错了或缺少其他检查，请纠正我）。但我将 USB 鼠标连接到 MSI 平板电脑，它可以工作。

所以我的问题是：

*   由于 USB 主机模式被禁用，USB 鼠标如何在 MSI 平板电脑上工作？
*   我可以说如果我将“android.hardware.usb.host.xml”放入MSI平板电脑（通过root），它将能够检测到我的usb读卡器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T11:33:48.227

我认为您可以尝试一下，但是根据我的经验，我没有找到任何负责鼠标工作的文件。如果您告诉的 XML 文件是一个 USB 主机，也适用于鼠标，那么我认为读卡器不会有任何问题可以通过 MSI 选项卡读取

# sql - 提高 SQL 查询的性能 (DB2)

> ID：16096558
> 
> 赞同：0
> 
> 时间：2013-04-19T03:06:13.487
> 
> 标签：sql, performance, indexing, db2

我需要获取符合特定条件的记录的文件名，但我意识到执行时查询非常慢。我已经加了index，但是还是很慢，怎么提高性能？？？我正在使用 DB2。请帮忙，谢谢。

**表（文件）（数据量 - 约 100000）**

*   FILE_ID
*   姓名
*   类别

索引（类别，FILE_ID）

**表（记录）（数据量 - 约 50000000）**

*   RECORD_ID
*   数据
*   CREATE_DATE
*   类型
*   FILE_ID

索引（创建日期，类型，文件 ID）

```
SELECT NAME 
FROM FILE
WHERE CATEGORY = ? AND 
      FILE_ID IN (SELECT FILE_ID FROM RECORD WHERE CREATE_DATE = ? AND TYPE = ? ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:33:31.263

加入应该可以解决您的问题。

有时您还需要重新组织 (REORG) 表和索引以提高慢查询的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:34:17.263

您可能会发现将“表文件”放入带有 where 子句的临时表会加快速度......

例如...

创建一个临时表，然后插入表文件“Where Cateogry =？”中的所有记录 然后将该表加入记录

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:18:02.143

加入表格。

```
select f.name
from f join record r on f.file_id = r.file_id
where f.category = ? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T03:18:53.150

尝试使用`INNER JOIN`语法：

```
select file.name
    from file inner join record using(file_id)
where file.category_id=? and record.create_date=? and record.type=? 
```

记录表的索引（file_id，create_date，type）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T03:43:08.413

这不会给你重复的结果

```
SELECT NAME 
FROM FILE F
JOIN (
    SELECT FILE_ID FROM RECORD WHERE CREATE_DATE = ? AND TYPE = ? 
    GROUP BY FILE_ID
) Q ON F.FILE_ID = Q.FILE_ID
WHERE CATEGORY = ? 
```

# nlp - 带有未格式化单词的阿拉伯语 WordNet

> ID：16096559
> 
> 赞同：1
> 
> 时间：2013-04-19T03:06:21.923
> 
> 标签：nlp, arabic, wordnet

是否有必要将输入到 WordNet 的单词格式化为“التُّفَّاحْ”并且不能指望“التفاح”......是否有任何图书馆或服务采用未格式化的阿拉伯语单词返回所有可能的同义词列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T08:06:02.510

从`التُّفَّاحْ`到`التفاح`，您只是想删除变音符号，那么您需要一个词法规范化工具。尝试[Tashaphyne](http://sourceforge.net/projects/tashaphyne/)，下载并安装，然后使用`normalize`模块[http://pythonhosted.org/Tashaphyne/Tashaphyne.normalize-module.html](http://pythonhosted.org/Tashaphyne/Tashaphyne.normalize-module.html)：

```
from Tashaphyne import *

text = 'التُّفَّاحْ'
print normalize_hamza(text)
print normalize_lamalef(text)
print normalize_searchtext(text) 
```

# forms - CakePHP 单选按钮和输入字段

> ID：16096560
> 
> 赞同：0
> 
> 时间：2013-04-19T03:06:22.507
> 
> 标签：forms, cakephp

我希望在 CakePHP 中创建一个相当复杂的表单，其中向用户显示具有输入框而不是标签的单选按钮，基本上输出以下内容：

```
<input type="radio" val="1" /><input type="text"  />
<br />
<input type="radio" val="2" /><input type="text"  />
<br />
<input type="radio" val="3" /><input type="text"  />
<br />
<input type="radio" val="4" /><input type="text"  /> 
```

我想使用 FormHelper，因为我正在使用 SecurityComponent，如果您使用非 Cake 表单，它就会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:29:00.630

**TLDR：**

FormHelper 无法做到这一点。

**更多详情：**

我敢肯定，无论您在做什么，都有很多方法可以做——但答案归结为上面的 TLDR。因此，只需确保您手动（而不是 FormHelper）创建您不想提交的字段，然后在提交之前删除它们，您应该会很好。两者之间的任何链接都可以使用 javascript 轻松完成。

# java - 在 Java 中动态读取邮件

> ID：16096562
> 
> 赞同：0
> 
> 时间：2013-04-19T03:06:42.893
> 
> 标签：java, email, refresh, jakarta-mail

我有一个线程每 10 秒循环检查一次我的收件箱。我在循环*之前*创建了我的邮件会话并存储并连接到存储：

```
store.connect()
while (running) {
    Thread.sleep(emailReceiveInterval);
    inbox = store.getFolder("INBOX");
    inbox.open(Folder.READ_WRITE);
    Message[] emails = inbox.getMessages();
    [...]
    inbox.close(true);
} 
```

**问题在于线程运行时没有收到新电子邮件。**

因此，我尝试在循环中连接并关闭商店：

```
while (running) {
    try {
        Thread.sleep(emailReceiveInterval);
        store.connect();
        inbox = store.getFolder("INBOX");
        inbox.open(Folder.READ_WRITE);
        Message[] emails = inbox.getMessages();
        [...]
    finally {
        inbox.close(true);  // Exception handling not posted
        store.close();      // Exception handling not posted
    }
} 
```

*第一个循环很好，所有电子邮件都正确接收，但现在我在第二个store.connect()*收到 NullPointerException ：

```
java.lang.NullPointerException: null
    at org.apache.geronimo.javamail.store.pop3.POP3Store.protocolConnect(POP3Store.java:164) ~[geronimo-javamail_1.4_mail-1.8.2.jar:1.8.2]
    at javax.mail.Service.connect(Service.java:251) ~[geronimo-javamail_1.4_mail-1.8.2.jar:1.8.2]
    at javax.mail.Service.connect(Service.java:91) ~[geronimo-javamail_1.4_mail-1.8.2.jar:1.8.2]
    at javax.mail.Service.connect(Service.java:76) ~[geronimo-javamail_1.4_mail-1.8.2.jar:1.8.2]
    at com.company.MyClass$ReceivingThread.run(MyClass.java:161) ~[target-eclipse/:na] 
```

**我该怎么做才能在每个循环中刷新收件箱？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:59:28.790

好吧，我自己想通了。问题是我还必须每次**在**循环中从会话中检索存储：

```
url = new URLName(mailProtocol, incomingHost, 995, "", incomingUserName,     incomingUserName);
session.getStore(url) 
```

# actionscript-3 - 在 AS3 中将塔添加到我的塔防游戏时遇到问题

> ID：16096566
> 
> 赞同：1
> 
> 时间：2013-04-19T03:06:59.130
> 
> 标签：actionscript-3, actionscript

在我解释我所拥有的细节之前，我只想让你知道我是一个非常缺乏经验的程序员，我感谢任何人的帮助。

到目前为止，我所做的是制作了一系列单元格，占据了整个电路板，除了路径所在的位置。所有单元格都被添加到 Simulator 类中。我的单元格类只包含几个不同的事件侦听器，当我滚动它们时可以更改单元格的颜色。我一直在尝试在我的单元格类中添加一个 addTurret 函数，如下所示：

```
private function addTurret(e: MouseEvent): void
{
  var turret: Turret = new Turret();
  addChild(turret);
  turret.x = this.x;
  turret.y = this.y;
} 
```

这是在单元类的构造函数中：

```
this.addEventListener(MouseEvent.CLICK, addTurret); 
```

Turret 类现在只是做了一个简单的红色圆圈。当我单击单元格时，炮塔只是出现在随机位置（我不知道为什么），我希望它们出现在我单击的单元格的顶部。

感谢任何有解决方案的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:28:28.523

您正在将炮塔添加到单元格中，我假设它是添加到板上的 DisplayObject。当您将炮塔添加为单元格的子项时，它的 x,y 位置现在相对于单元格的 x,y 位置。

因此，将炮塔的 x,y 位置设置为单元的 x,y 位置可能是问题所在。没有必要，因为您的炮塔应该在您单元格的 0,0 位置。

所以只需修改你的 addTurret 函数：

```
private function addTurret(e: MouseEvent): void
{
  var turret: Turret = new Turret();
  addChild(turret);
} 
```

# java - 获取文件并拆分为两个 LinkedLists 以确定第二个列表是否具有第一个列表中的数字

> ID：16096567
> 
> 赞同：0
> 
> 时间：2013-04-19T03:06:59.777
> 
> 标签：java, nullpointerexception, linked-list

我应该获取一个在单行中包含整数的文件并将其扫描到一个列表中。然后我要把这个列表分成两个链表。最后，我需要说明第二个列表中的数字是否在第一个列表中。

我理解（至少我认为我理解）第二部分。而且我觉得我了解如何解决整个问题，因为我找不到逻辑中的缺陷，但命令似乎不起作用。

```
import java.util.*;
import java.io.*;

public class FindKeys {

private static LinkedList<Integer> foo;
private static LinkedList<Integer> list1;
private static LinkedList<Integer> list2;
private static TreeMap<Integer, Boolean> list3;
private static int firstValue;
private static int numberA;
private static int numberB;

public FindKeys() {
}

public void main(String [] args) {
    foo = new LinkedList<Integer>();
    read(foo);
    listA(foo);
    listB(foo);
    discover(list1);
    print(list3);
}

private void read(LinkedList<Integer> foo){
    Scanner scan;
    int number;
    try{
        scan = new Scanner( new FileReader("Stuff.txt"));
    }
    catch(FileNotFoundException e){
        System.err.println("FileNotFoundException: " + e.getMessage());
        return;
    }
    catch(ArrayIndexOutOfBoundsException f){
        System.err.println("ArrayIndexOutOfBoundsException: " + f.getMessage());
        return;
    }

    while(scan.hasNextInt()){
        number = scan.nextInt();
        foo.add(number);
    }
}

private void listA(LinkedList<Integer> foo){

    firstValue = foo.getFirst();

    for( int i = 1; i<firstValue; i++){
        System.out.println(foo.get(i));

        int temp = foo.get(i);
  //This is where the issue is.

        list1.set(i,temp);
    }
}

private void listB(LinkedList<Integer> foo){

    firstValue = foo.getFirst();

    for( int i = firstValue; i<foo.size(); i++){
        numberB = foo.get(i);
        list2.add(numberB);
    }
}

private void discover(LinkedList<Integer> list1){
    for(int i=0; i<list1.size(); i++){           
        if(list2.contains(list1.get(i))){
            boolean a = true;
            list3.put(list1.get(i),a);
            return;

        }
        boolean b = false;
        list3.put(list1.get(i),b);
    }
}

private void print(TreeMap<Integer, Boolean> list3){
    for(int numberA : list1){
        System.out.printf("%3i   %b" , numberA, list3);
    }
}
} 
```

当我尝试将第一个列表中的数字添加到第二个列表中时，问题就出现了。问题似乎是LinkedList list1的大小为0。我认为这是我的一个简单误解，我不明白如何更改列表的大小或如何每次添加一个我添加了一个新元素，但我在谷歌的前 20 页和这个网站上都找不到这个。话虽如此，我还要假设这里的某个人与搜索之神有这种神奇的联系，可能会为我指明正确的方向，或者只是告诉我为什么我不能添加到列表中。它只是告诉我有一个问题，因为：

```
java.lang.NullPointerException
at FindKeys.listA(FindKeys.java:58)
at FindKeys.main(FindKeys.java:21)
java.lang.NullPointerException
at FindKeys.listA(FindKeys.java:58)
at FindKeys.main(FindKeys.java:21) 
```

坦率地说，我不知道那是什么意思，当我查到它时，我变得更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:34:12.847

初始化数据结构

```
private static LinkedList<Integer> list1 = new LinkedList<Integer>();
private static LinkedList<Integer> list2 = new LinkedList<Integer>();
private static TreeMap<Integer, Boolean> list3 = new TreeMap<Integer, Boolean>(); 
```

和`main`方法

```
public static void main(String [] args) {
    FindKeys fk = new FindKeys();
    foo = new LinkedList<Integer>();
    fk.read(foo);
    fk.listA(foo);
    fk.listB(foo);
    fk.discover(list1);
    fk.print(list3);
} 
```

# jquery - 从 JSON 类型的 Action 返回时出现奇怪的 DateTime 格式

> ID：16096568
> 
> 赞同：2
> 
> 时间：2013-04-19T03:07:02.583
> 
> 标签：jquery, asp.net-mvc

我的行动：

```
 public ActionResult Foo()
    {
        var date = DateTime.Now;
        return Json(date);
    } 
```

并在我使用帖子访问操作的视图中：

```
 $.post("../../Foo",function(data){
             alert(data);
   }) 
```

如此奇怪的日期时间调整为这种格式：

```
"/Date(1366340594875)/" 
```

谁能告诉我为什么？我想要日期时间它是什么样的“2013-1-1”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:15:31.677

这就是默认情况下 json 日期的格式。您可能想看看[如何格式化 Microsoft JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)

# .net - 如何在 .Net 中加快打印代码的速度

> ID：16096569
> 
> 赞同：0
> 
> 时间：2013-04-19T03:07:14.397
> 
> 标签：.net, optimization, printing

我已经成功构建了一个 .NET 程序来使用 PrintDocument 组件打印客户端语句。打印作业由纯文本和双色调（黑白）TIFF 图像组成，但我遇到的问题是它太慢了。我不能成为第一个遇到这种情况的人。有没有办法提高 .Net printdocument 组件的性能，或者我应该放弃这种方法来使用另一种方法（或者是我唯一真正的选择，专门用于打印的 3rd 方库）。

我正在尝试为我们目前向供应商支付巨额资金的程序编写替代品（这只是供应商为我们做的事情之一）。他们的程序只需要 2 分半钟就可以打印 7000 页语句（他们的输出是 PCL 5）。我使用 .Net PrintDocument 组件的程序需要一个多小时才能完成相同的工作。

有没有可以与 .net 一起使用的好的开源或付费 PCL 或打印库？

# php - 虽然循环不会显示第一行

> ID：16096576
> 
> 赞同：-1
> 
> 时间：2013-04-19T03:07:50.187
> 
> 标签：php, mysql, while-loop, option

我遇到了一个简单的问题。我用谷歌搜索并发现了很多资源，但在我看来没有任何用处。

在这里，我运行了一个查询并将其作为选择菜单输出。但是值的第一行没有显示出来。

```
<?php
$query = mysql_query("SELECT * FROM `subcategory` ORDER BY `Category_id`");             
while($row = mysql_fetch_array($query)){
$subcategory_title = $row['Subcategory_name'];
$subcategory_id = $row['Subcategory_id'];
$subcategory_id = $subcategory_id*10;

$selectMenu .= "<option value='$subcategory_id'>$subcategory_title</option>";
}
?> 
```

并且输出在

```
<select name='' class=''>
<option disabled='disabled'>Choose a Topic</option>
<?php echo $selectMenu; ?>
</select> 
```

我回显`$subcategory_title`and `$subcategory_id`，这里第一行值显示是否在列表菜单中。另一个脚本中的相同代码可以正常工作。我不明白。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:30:44.063

代码链接： http: [//pastebin.com/iGqitNe7](http://pastebin.com/iGqitNe7)

尝试这个...

```
<?php

 $qidInfo = "<tr>
                <td width='20%'>Exam Topic:</td>
                <td width='80%'><label>
                <select class='exam_name' name='exam_name' id='exam_name'>
                <option disabled='disabled'>Choose a Topic</option>".$selectMenu."
            </select>...rest of the string...";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:40:55.860

为什么不像`RIGHT`PDO 那样做呢？: (可能有一些未经测试的语法错误)

```
$sql = "SELECT * FROM `subcategory` ORDER BY `Category_id`";
$query = $pdo->prepare($sql);
$query->execute();

if($query) {
   $row = $query->fetchAll(PDO::FETCH_ASSOC);
   $selectmenu = "";
   foreach ($row as $value) {
        $selectMenu .= "<option value=<?php echo $value['subcategory_id']*10 ?>><?php echo $value['subcategory_title'] ?></option>";

    }
} 
```

这是未经测试的代码，但我认为这应该可行。祝你好运，顺便说一句你可能有任何顾虑。

有关设置 PDO 的帮助，请参阅[此答案。](https://stackoverflow.com/questions/16072212/learning-select-from-where-prepared-statements/16072437#16072437)你问自己为什么要使用 PDO？正如上面评论中所说的那样，对于新代码，应该不惜一切代价避免使用 Mysql_ 函数，因为它们被 PHP 社区看不起，并且从 php 5.5 开始将被删除。

[在此处](http://php.net/manual/en/book.pdo.php)阅读有关 PHP PDO的更多信息

# node.js - 如何使用 Express/Nodejs 缓存单个资源

> ID：16096578
> 
> 赞同：3
> 
> 时间：2013-04-19T03:08:19.407
> 
> 标签：node.js, caching, express, http-headers

我提供的背景图像相当大，我希望将其永久缓存。我想我应该发送一个最大年龄为无穷大的缓存头。我怎样才能以干净和正确的方式做到这一点。我正在使用 express（开箱即用）并且没有任何缓存模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:18:12.280

您可以设置一个可以匹配静态背景图像路径的中间件处理程序，然后设置缓存控制标头。这将为您的图像设置缓存控制标头，但不会为其他静态资源设置。

```
app.configure(function(){
  app.use(function(req, res, next) {
    var matchUrl = '/background.jpg';
    if(req.url.substring(0, matchUrl.length) === matchUrl) {
      res.setHeader("Cache-Control", "max-age=31556926");
    }
    return next();
  });
  app.use(express.static(path.join(application_root, "StaticPages")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

顺序很重要。您的中间件函数需要在`express.static`处理程序之前对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:09:31.187

我认为更好的方法是缩小图像，然后使用像 Diet JPEG (OS X) 这样的程序来最小化文件大小。

# ruby - 如何在 haml img src 中显示 erb 代码？

> ID：16096580
> 
> 赞同：2
> 
> 时间：2013-04-19T03:08:23.727
> 
> 标签：ruby, haml, erb, middleman

```
<% data.programs.client_name.each_with_index do |c, i| %>
   %article     
      .content 
         %header 
            .logo-wrap
               %img.client-logo{:src => "<%= data.programs.logo_url[i] %>", :alt => ""}/ 
        %div 
               %a{:href => ""} Program Title
               %p <%= c %>
        %p Some text description 
         %img.progam-photo{:src => "some_img_url", :alt => ""}/
<% end %> 
```

我正在使用 Middleman 本地数据功能，所以这里的数据是从 yaml 文件中获取的。我只是不知道如何在 . 上输出 <%= data.programs.logo_url[i] %> " `img.client-logo src`。所以这个过程正在循环。

如果我将 %img.client-logo{:src => "<%= data.programs.logo_url[i] %>", :alt => ""}/ 替换为正常的 img 标签，我可以正确输出源代码。

这有效：

```
<% data.programs.client_name.each_with_index do |c, i| %>       
%article        
        .content 
        %header 
        .logo-wrap                  
            <img class="client-logo" src="<%= data.programs.logo_url[i] %>" />      
    %div 
        %a{:href => ""} Program Title
        %p <%= c %>
    %p <%= data.programs.program_description[i] %>
    <img class="program-photo" src="<%= data.programs.img_url[i] %>" />     
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:12:01.027

```
%img.client-logo{:src => data.programs.logo_url[i], :alt => ""}/ 
```

可能的警告：

*   data.programs.client_name 是一个数组？
*   您的代码是否正确识别？
*   如果您将`%img`标签替换为`= data.programs.logo_url[i]`您有链接？

haml 标签没有任何问题。这证明了这一点：

```
[fotanus@thing ~]$ cat a.haml 
- a = []
- a << 'image/path'
%img{:src => a[0]}

[fotanus@thing ~]$ haml a.haml 
<img src='image/path' /> 
```

# javascript - 如何跳过或忽略 javascript/jquery 中的错误？

> ID：16096581
> 
> 赞同：24
> 
> 时间：2013-04-19T03:08:28.480
> 
> 标签：javascript, jquery

我想像这样调用 3 个 javascript (jquery) 文件：

```
<script type="text/javascript" src="js/file1.js"></script>
<script type="text/javascript" src="js/file2.js"></script>
<script type="text/javascript" src="js/file3.js"></script> 
```

file2.js**有**脚本或函数出错，例如调用的函数不存在。由于file2.js中的错误是**file3.js**中的脚本将不会执行的**后果。**

是否有办法在**file3.js**中编写脚本仍然执行？可以绕过或忽略**file2.js**上的错误吗？

谢谢你。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-19T03:12:36.017

您可以在出现错误的代码周围使用 try catch 块

```
try{

//code that causes an error

}catch(e){

functionToHandleError(e);
}
//continue from here 
```

但是，只有当错误是外部库的已知条件/不可避免的问题或仅发生在错误的用户输入时，您才应该这样做。您不应该使用它来让程序不惜一切代价继续运行。

避免错误的一些方法

*   在调用它们之前检查函数是否存在
*   在引用其属性之前检查对象是否存在
*   如果涉及用户输入，请验证输入以检查它是否是预期的类型/范围/等
*   如果这是一个加载顺序问题，请考虑重新排序您的脚本，或者如果这是一个使用诸如 requireJS 之类的依赖管理系统的大型应用程序
*   如果对象在异步请求之后未定义，请记住代码不会等待异步请求，并且直到之后才会定义。处理提供值的代码应该在回调函数中或使用延迟/承诺来完成。
*   如果您正在引用 dom 元素，请考虑从加载 DOM 时运行的函数（例如 jQuery 的 document.ready 或本机 window.onload）中启动 JS 代码。
*   如果 javascript 变量在没有`var`关键字的情况下声明，或者附加到全局对象，则可以在声明之外的地方修改它们。Javascript 也没有块作用域。确保您知道变量被修改的所有位置，并尽可能限制变量的范围。尤其要避免使用过多的全局变量来保存状态，因为如果没有许多 null/类型检查，可能很难知道当前状态。

处理错误的一些方法

*   如果它是一个预期的问题（IE 如果输入可能为空并且需要不同的处理），最好事先使用 if 语句进行检查。如果您不想这样做，您可以使用 try/catch 来强制转换输入、请求新输入或根据给定的输入采取适当的行动。

*   如果这是一个意外问题（IE 你不知道发生了什么），catch 块可能是在开发过程中输出诊断信息的好地方。IE，不要只是抓住它，让它默默地失败，输出一条消息让你或其他开发者知道它失败的地方，然后使用你喜欢的浏览器的 web 开发者工具检查当时的值，弄清楚发生了什么，并为该案例添加处理以修复它。

什么不能做

*   放入try/catch，然后让程序继续运行。如果没有必要运行未正确运行的代码，请删除它。如果有必要并且无法正常工作，请修复它。

*   使用 try catches 作为您的输入验证（IE 如果函数为 null，它将引发异常，我会捕获它，然后我知道该函数为 null）。只要有可能，检查任何预期的错误。当行为异常时，Try/catchs 应该处理“异常”，并且您需要使用替代代码路径或提醒用户出现问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-16T17:57:29.837

当您没有时间调试时，请尝试以下操作：

```
function stoperror() {
   return true;
} 
```

叫它：

```
window.onerror = stoperror; 
```

功能非常简单：创建一个始终返回 true 的函数，然后每当发生错误时，调用此函数（返回 true 并抑制错误）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T03:12:58.213

将导致错误的调用包装在 try...catch 块中：

```
try {
   callNonExistentMethod();
}
catch (e) {
   //Handle the error if you wish.
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-23T13:16:17.077

您可以通过使用此功能将自己从“功能未定义”中解救出来

```
//Simple function that will tell if the function is defined or not
function is_function(func) {
    return typeof window[func] !== 'undefined' && $.isFunction(window[func]);
}

//usage

if (is_function("myFunction") {
    alert("myFunction defined");
} else {
    alert("myFunction not defined");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T03:13:50.517

`!= null`您可以使用 try 和 catch 语句。并使用条件检查 null

```
try{

}catch(e){

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T03:13:01.437

我建议在假设它们存在之前在对象（包括函数）周围添加适当的空检查，这样代码就会优雅地失败。

这里有一些想法： [Javascript 检查函数是否存在](https://stackoverflow.com/questions/1042138/javascript-check-if-function-exists)

# c++ - 在什么情况下用于实例化模板的参数不可用？

> ID：16096583
> 
> 赞同：1
> 
> 时间：2013-04-19T03:08:53.153
> 
> 标签：c++, templates, traits

在这篇文章[Traits：一种新的有用的模板技术](http://www.cantrip.org/traits.html)中，traits 首次在 C++ 中介绍了traits，作者强调了以下几点：

```
template <class numT>
class matrix {
public:
  typedef numT num_type;
  typedef float_traits<num_type> traits_type;
  inline num_type epsilon() { return traits_type::epsilon(); }
  ...
}; 
```

请注意，在迄今为止的所有示例中，每个模板都提供`typedef`了其参数的 public s，以及依赖于它们的任何东西。**这绝非偶然：在多种情况下，用于实例化模板的参数不可用，只有`typedef`在模板声明中以 s 形式提供时才能检索。**道德：总是提供这些`typedefs`。

但让我感到困惑的是，没有任何情况表明`typedef`需要使用 。谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:39:38.093

假设您有一个接受以下通用容器的函数模板`T`：

```
template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   // Do something
} 
```

在此方法中，您想要获取容器中某物的迭代器。但是你不知道迭代器的类型；你只得到了容器的类型，而不是迭代器：

```
template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   /* ??? */ it = input.begin();
} 
```

假设为了论证您可以解决该问题，并且您想取消对迭代器的引用。要存储结果，您需要知道是什么`T`；但这又会导致同样的问题：

```
template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   /* ??? */ it = input.begin();
   /* ??? */ firstElement = *it;
} 
```

我们不知道`T`，容器中包含的类型是什么；我们在这个函数模板中只有容器本身的类型。为了获得容器内的类型，我们需要容器来帮助我们一点，告诉我们它包含的类型是什么。容器类通过`typedef`s 做到这一点。对于标准容器，这将`iterator`用于迭代器类型和`value_type`包含的值类型：

```
template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   // Container provides its iterator type via a typedef.
   typename ContainerT::iterator it = input.begin();

   // Container provides its contained type via a typedef.
   typename ContainerT::value_type firstElement = *it;
} 
```

即使在 C++11 中，您也可以使用以下方法解决上述示例`auto`：

```
template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   // Make the compiler figure it out:
   auto it = input.begin();
   auto firstElement = *it;
} 
```

有时您仍然希望能够为其他目的获取实际类型：

```
// Failure to compile: http://ideone.com/vxJ2IU
// Successful compile: http://ideone.com/b5fU3S
#include <vector>
#include <list>
#include <deque>
#include <type_traits>
#include <iostream>

template <typename ContainerT>
void DoThings(ContainerT const& input)
{
   // DoThings only accepts integral containers:
   static_assert(
      std::is_integral<typename ContainerT::value_type>::value,
      "DoThings requires that the contained type be integral");
   // Make the compiler figure it out:
   auto it = input.begin();
   auto firstElement = *it;
   std::cout << firstElement;
}

int main()
{
    std::vector<int> abc;
    abc.push_back(42);

    std::list<long> def;
    def.push_back(1729);

    std::deque<short> queue;
    queue.push_back(1234);

    DoThings(abc);
    DoThings(def);
    DoThings(queue);

    // Does not compile due to static assert:
    std::vector<double> doubles;
    doubles.push_back(3.14);
    DoThings(doubles);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:17:11.657

一个简单的例子：

* * *

假设您想编写一个通用的***sum***函数，将***`STL container`***. 这可以*`vector`*是*`list`*或*`set`*。并且内容可能是*`int`*'s、*`float`*'s 或*`string`*'s（*对于字符串 sum 将是串联*）（为了简单起见）。

如果容器包含*`int`*'s 那么总和将是*`int`*。如果它包含*`floats`*，那么总和将不是一个点，*`int`*而是一个*`floating`*点。因为*`strings`*它应该是一个*`string`*. 其他一切都是一样的（*函数内部的操作。*）

* * *

写这个的一种方法是

```
template<typename T>
T sum(const vector<T>& t) {
   T total = T();
   // iterate and sum.
   return total;
} 
```

但问题是现在您需要为每种容器类型（*`set`*, *`list`*,..）编写此函数。所以它并不是那么通用。

* * *

为了更通用，您需要编写类似这样的内容

```
template<typename T>
?? sum(const T& t) {
   ?? total;
   // iterate and sum.
   return ??
} 
```

但是在这里返回什么？您将如何知道容器中包含的内容。这就是**`typedefs`**进来的地方。**幸运的 STL 容器有几个 typedef，可以让您了解它们的作用和能力**。对于我们的案例，他们将包含的类型定义为***`value_type`***（*我相信您`C::iterator`在某些时候使用过它也是 typedef*）。

* * *

现在我们的小和函数可以写成

```
template<typename T>
typename
T::value_type sum(const T& t) {
   typedef typename T::value_type v_type;;
   v_type total = v_type();
   // iterate and sum.
   return total;
} 
```

* * *

通常，使用*`typdefs`*. 例如，如果您正在设计一个*`C`*具有两种模板类型的模板类，*`T`*并且*`V`*

```
template<typename T, typename V>
class C {
    typedef T t_type;
    typedef V v_type;
    //
    //
} 
```

这对于使用*`C`*. 他们可以很容易地找到类型*`T`*和类型*`V`*的对象*`c`*是否*`C`*被键入。

# c# - 如何使用 C#（或 VB）安装 IIS7？

> ID：16096585
> 
> 赞同：1
> 
> 时间：2013-04-19T03:09:00.390
> 
> 标签：c#, iis-7

我正在尝试以编程方式安装 IIS7+。如果我直接在 cmd 提示符下运行它，它运行良好。

```
start /w pkgmgr /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI 
```

由于开头的“开始”部分，我对如何运行 ServiceProcess.Process 类有点困惑。我可以运行我需要的任何其他 exe，但 pkgmgr.exe 并不能很好地运行。

```
Using proc As New Process()
    proc.StartInfo.FileName = "c:\windows\system32\pkgmgr.exe"
    proc.StartInfo.Arguments = "/l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI"
    proc.Start()
    proc.WaitForExit()
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:16:15.267

我发现这个值得信赖的链接[Using Unattended Setup to Install IIS 7.0](http://www.iis.net/learn/install/installing-iis-7/using-unattended-setup-to-install-iis)

第 1 步：PKGMGR.EXE 概述

Windows Vista/Windows Server 2008 中的可选功能是使用名为 Pkgmgr 的新命令工具安装的。使用 pkgmgr.exe 的命令行语法是：

```
Start /w pkgmgr.exe /iu:update1;update2… 
```

**Pkgmgr.exe 命令**

/iu:{更新名称}; 这指定要按更新名称安装的更新，并采用分号分隔的要安装的更新名称。

/uu:{更新名称}; 这指定要卸载的更新，并采用分号分隔的要从系统卸载的可选更新列表。必须至少指定一个更新名称

/n:{unattend XML} 这指定了无人参与 XML 文件的文件名。

有关 XML 文件的更多详细信息，请参阅 MSDN 文章。

* * *

例如：

*要仅安装 IIS 7.0 默认功能，请将以下 unattend.xml 文本复制到记事本中。*

```
<?xml version="1.0" ?> 
<unattend xmlns="urn:schemas-microsoft-com:unattend"  
    xmlns:wcm="http://schemas.microsoft.com/WMIConfig/2002/State">
<servicing> 
   <!-- Install a selectable update in a package that is in the Windows Foundation namespace --> 
   <package action="configure"> 
      <ssemblyIdentity 
         name="Microsoft-Windows-Foundation-Package"
         version="6.0.5308.6"
         language="neutral"
         processorArchitecture="x86"
         publicKeyToken="31bf3856ad364e35"
         versionScope="nonSxS"
      />
    <selection name="IIS-WebServerRole" state="true"/> 
    <selection name="WAS-WindowsActivationService" state="true"/> 
    <selection name="WAS-ProcessModel" state="true"/> 
    <selection name="WAS-NetFxEnvironment" state="true"/> 
    <selection name="WAS-ConfigurationAPI" state="true"/> 
  </package> 
</servicing> 
</unattend> 
```

# eclipse - 使用 Leiningen，我如何安装文档？

> ID：16096586
> 
> 赞同：1
> 
> 时间：2013-04-19T03:09:05.393
> 
> 标签：eclipse, clojure, leiningen, counterclockwise

我在 github [(seesaw)](https://github.com/daveray/seesaw)上创建了一个库并运行了“lein install”，这使它在我的本地 maven 存储库中作为依赖项可用。但是当我将它作为依赖项包含在我的另一个项目中时，我的 IDE（eclipse 的逆时针方向）找不到文档。我认为这与我安装依赖项的方式有关，而不是我在自己的项目中导入它的方式，因为通常当我依赖依赖项时，我可以看到文档。

我认为等效的 Maven 命令是“站点”。但是当我输入“lein help”时，我看不到任何与文档相关的内容。

# bash - 如何下载文件，只有在某些文件不存在时才处理它们？

> ID：16096587
> 
> 赞同：0
> 
> 时间：2013-04-19T03:09:07.723
> 
> 标签：bash, file, wget, polling, exists

_why 回来了，当然还会在他的网络服务器上留下假脱机消息。我想定期轮询他的网站，检查新的线轴，如果它们不存在，请将它们转换为 PDF。

我使用[https://github.com/bsandrow/_why-spool](https://github.com/bsandrow/_why-spool)关闭了投票和转换过程。我修改了抓取脚本中的一个块，如下所示：

```
echo "Downloading PCL files..."
spool_urls | while read spool_entry; do
    file="$(spool_file "$spool_entry")"
    echo "  $file"

    if [ ! -f "/home/max/_why-spool/build/$file.pdf" ]
    then
        echo "/home/max/_why-spool/build/$file.pdf does not exist" >> /home/max/why_log.txt
        wget -q -O "src/$file" "$spool_entry"
    fi
done 
```

这应该检查`$file`.pdf 是否存在。即使它确实存在，也会`if`失败，并且无论如何都会下载假脱机。我怎样才能解决这个问题？

编辑：看。结果`ls`——</p>

```
max build $ ls /home/max/_why-spool/build/
ACCOUNTS.pdf  BURN.pdf        FAREWELL.pdf  FLIPPED.pdf  HELLOYES.pdf  JUXT.pdf    OUTRAGE.pdf  REALITY.pdf  SACRED.pdf    STINKS.pdf  WHATSUPDOC.pdf
AMANDA.pdf    CORRUPTION.pdf  FIGHTS.pdf    FRIGHTS.pdf  IMPERSON.pdf  LEAPS.pdf   PIRATEO.pdf  RECEIPT.pdf  SEAWATER.pdf  TORN.pdf    YOUGETIT.pdf
BIBLICAL.pdf  EYES.pdf        FIRELESS.pdf  GAIMAN.pdf   ITISUS.pdf    LOOKUP.pdf  READING.pdf  REVERSE.pdf  SENSORED.pdf  TRIALS.pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:11:04.760

我无法复制这个。我删除了一些文件来测试它，并`if`在它应该通过时通过。也许您可以尝试其中的一种

*   使用双括号`[[`
*   将感叹号移到括号前
*   利用`-a`
*   利用`-e`
*   利用`$HOME`

```
$ ls /home/Steven/_why-spool/build/
ACCOUNTS.pdf GINGERBREAD.pdf PROFESSORS.pdf SACRED.pdf STINKS.pdf
小丑.pdf HO.pdf 收据.pdf 海水.pdf

$刮
正在下载 PCL 文件...
  臭气熏天
  盖曼
/home/Steven/_why-spool/build/GAIMAN.pdf 不存在
  账户
  收据
  海水
  你好
/home/Steven/_why-spool/build/HELLOYES.pdf 不存在
  神圣
  小丑
  空白的
/home/Steven/_why-spool/build/BLANK.pdf 不存在
  何
  姜饼
  教授

```

# c++ - Jenkins CI 是否具有嵌入式的特殊功能？

> ID：16096590
> 
> 赞同：1
> 
> 时间：2013-04-19T03:09:43.220
> 
> 标签：c++, jenkins, embedded, continuous-integration

我被要求使用[Jenkins CI](http://jenkins-ci.org/)进行嵌入，并且具有合理的重要性。我已经探索了我们可以定期指定的自动构建，然后我们可以做的其他事情是

1.  开发和自动化测试分离
2.  自动化测试
3.  发布测试结果报告
4.  从 SCM 获取数据。

但我无法在 Jenkins 中找到任何特别的嵌入式功能。请帮助探讨它是否对嵌入式项目具有特定的重要性？由于我是 Jenkins 的初学者，如果我在某处错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:58:45.713

Jenkins 是用于设置持续集成的通用工具。询问嵌入式有什么特别之处就像询问用于将螺丝钉入木头的螺丝刀有什么特别之处。

使用 CI 的原因有很多。关于 CI的[Wikipedia 文章](http://en.wikipedia.org/wiki/Continuous_integration)可能是一个不错的起点。

那么，为什么要特别关注 Jenkins CI？有很多工具可以自动化 CI。就个人而言，Jenkins 最适合我们一直在从事的项目。它得到很好的支持，几乎所有东西都有丰富的插件，是多平台的，并且可以免费获得，这些都是说服我们在嵌入式产品中使用它进行软件开发的部分原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T11:20:17.600

您可以使用**Jenkins**来自动化您的嵌入式环境。

例子：

1.  从 SCM 签出您的源代码 - 使用 git 插件

2.  使用您的（构建）从属构建源并将您的二进制文件提交到您的 SCM

3.  将您的二进制文件签入您的（测试）从站并进行测试。

**您可以使用Multijob 插件**控制和自动化上述步骤

# java - 将 droppable 和 ajax 行为添加到 outputPanel JSF

> ID：16096595
> 
> 赞同：1
> 
> 时间：2013-04-19T03:10:23.973
> 
> 标签：java, jsf, primefaces

我正在创建一个板，我可以在其中放置对象并希望动态地进行操作。

我想要的是这样的：

```
<p:outputPanel id="ASlot1" styleClass="slot">  
    <p:droppable tolerance="fit" activeStyleClass="slotActive" scope="PC1" datasource="availableComputers">  
        <p:ajax listener="#{sampleUI.onDrop}" update="selectedComputers" />  
    </p:droppable>  
</p:outputPanel> 
```

支持豆：

```
HtmlPanelGroup panel;
OutputPanel table [][] = new OutputPanel[x][y];
Panel p = new Panel();

for (int i = 0; i < x; i++) {
    for (int j = 0; j < y; j++) {
        table[i][j] = new OutputPanel();
        table[i][j].setId(tableConcat+i+j);
        table[i][j].setStyle(" background:#444444; width:100px; height:100px; display:block; boarder-style: solid;");
        grid.getChildren().add(table[i][j]);
    }
}

panel.getChildren().add(grid);

p.setId("pnel");
panel.getChildren().add(p);

RequestContext requestContext = RequestContext.getCurrentInstance();
requestContext.update("panelForm"); 
```

JSF 页面：

```
<h:form id="panelForm">
    <h:panelGroup id="panelIt" binding="#{pane.panel}"/>
</h:form> 
```

我将在我的支持 bean 中添加什么？

编辑：

所以我添加了这个

```
 Droppable d = new Droppable();

 d.setScope("PCName");
 d.setDatasource("availableComputers");
 d.setActiveStyleClass("slotActive");
 d.setOnDrop("handleDrop");
 d.setTolerance("fit"); 
```

然后把每一个放在动态创建的输出面板中

```
d.getChildren().add(table[i][j]); 
```

它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:09:16.667

首先，您需要拖动某物。为了能够放下它，所以我将按照[展示示例进行操作：](http://www.primefaces.org/showcase/ui/droppableBarca.jsf)

```
<p:panel header="Squad">  
            <p:dataGrid id="availablePlayers" value="#{barcelona.players}" var="player" columns="4">  
                <p:column>  
                    <p:graphicImage id="player" value="/images/barca/#{player.photo}" styleClass="playerImage"/>  

                    <p:draggable for="player" revert="true" scope="#{player.position}" stack=".playerImage"/>  
                </p:column>  
            </p:dataGrid>  
        </p:panel> 
```

在这里，它有一个`dataGrid`完整的播放器模式类（pojo），`p:draggable`并使这些图像可拖动。当您实现`p:droppable`并`p:ajax`在其中实现时，可以通过以下方式调用支持 bean 方法并获取丢弃的玩家 id：

```
<p:ajax listener="#{barcelona.onDrop}" update="selectedPlayers growl" /> 
```

所有你需要实现的`onDrop`方法：

```
public void onDrop(DragDropEvent event) {  
    Player player = (Player) event.getData();  
    selectedPlayers.add(player);  
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(player.getName() + " added", "Position:" + event.getDropId()));  
} 
```

在这里，它获取我们已删除的特定播放器并添加`FacesMessage`将显示在咆哮声中的特定播放器。你可以做任何你想做的事情，让那个特定的玩家去数据库并保存它等等。

如果您想获得多个输出面板的可放置技能，您应该通过以下方式通知客户端：

```
RequestContext.getCurrentInstance().addCallbackParam("x", x);
RequestContext.getCurrentInstance().addCallbackParam("y", y); 
```

然后用某物。类似于下面的 js 函数在构建输出面板时调用它：

```
function gainDroppable() {
    var x = '#{sampleUI.x}';
    var y = '#{sampleUI.x}';
    for (int i = 0; i < x; i++) {
        for (int j = 0; j < y; j++) {
        $(element) = $(document.getElementById('table:'+x+'outputPanel'+'y');
        element.append('<p:droppable tolerance=&quot;fit&quot; activeStyleClass=&quot;slotActive&quot; scope=&quot;PC1&quot; datasource=&quot;availableComputers&quot;>  
        <p:ajax listener=&quot;#{sampleUI.onDrop}&quot; update=&quot;selectedComputers&quot; />  
    </p:droppable> ');
        }
    }
} 
```

您肯定应该更改有关上层功能的一些事情，因为我不知道您的确切客户端代码是什么，因此客户端 ID 生成应该与`document.getElementById`.

但这是你应该遵循的方式。实际上在服务器端生成输出面板可能是有害的，并且将来会出现很多问题，所以我建议摆脱 Java 上的客户端代码并尝试通过 javascript 实现类似的代码。

# datagrid - WPF - 在代码中获取静态列值

> ID：16096596
> 
> 赞同：1
> 
> 时间：2013-04-19T03:10:32.433
> 
> 标签：datagrid, static

我想在数据网格中显示编辑和删除链接，如果任何用户点击这些链接我想执行一些操作，所以我将超链接列与数据库的 ID 字段绑定，以下是代码示例

```
<DataGridHyperlinkColumn Binding="{Binding Path=ID}" Header="Junk2"></DataGridHyperlinkColumn> 
```

问题：

1.  它在超链接列中显示 ID 值，我想显示静态文本“编辑”。
2.  如果任何用户单击编辑列上的任何编辑超链接，我想获取绑定字段的 ID，以便我可以执行数据库操作。

你能告诉我如何执行上述两项任务吗？

# javascript - 为行中选定的 Href 设置文本框的值

> ID：16096599
> 
> 赞同：0
> 
> 时间：2013-04-19T03:11:03.433
> 
> 标签：javascript, jquery, html, spring-mvc

我有一个生成多行记录的循环。每行都有一个href标签和一个输入框，我想仅为该行中的每个输入项设置“路径”的值，使其具有相同的值。下面是代码：

```
<c:forEach items="${crime.victims}" var="victim" >
<div class="names">
<form:input path="${pvalue}" id="victims" value="${victim.socialSecurityNumber}" />
<a class="crimeNames" href="${victim.socialSecurityNumber}">${victim.name}</a>
</div>
</c:forEach> 
```

# iphone - 公共头文件路径、安装目录、搜索头文件路径和其他噩梦

> ID：16096601
> 
> 赞同：0
> 
> 时间：2013-04-19T03:11:22.847
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我有一个由 2 个库（libraryA 和 libraryB）和一个包组成的项目。每一个都像一个项目一样创建，并通过拖动它们导入到主项目中。

仅仅拖动它们不足以让 Xcode 找到所有头文件来编译整个项目，所以我不得不使用硬路径来破解路径，但这很糟糕，因为路径可以改变，我将无法再次编译这个项目。我想使用[这些](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)宏来访问文件，但是在测试了几乎所有这些之后，我无法让它工作。

我必须使编译工作的解决方案如下。

我已经调整了每个库，将它们的公共标头保存在里面

```
/Users/rubberduck/Library/Developer/Xcode/DerivedData/MyProject-dnaimaovsccuvieahmvgttwjnabc/Build/Products/Debug-iphoneos/ 
```

使用目标名称，因此在编译后它们会将其公共标头放在

```
/Users/rubberduck/Library/Developer/Xcode/DerivedData/MyProject-dnaimaovsccuvieahmvgttwjnabc/Build/Products/Debug-iphoneos/libraryA 
```

和

```
/Users/rubberduck/Library/Developer/Xcode/DerivedData/MyProject-dnaimaovsccuvieahmvgttwjnabc/Build/Products/Debug-iphoneos/libraryB 
```

现在的问题是 libraryB 需要 libraryA 的头文件来编译。如果这些是兄弟目录，我应该在 libraryB 的标题搜索路径中放置什么以指向 libraryA。

注意：我需要一个不是硬编码的路径，而是使用我提到的那些宏之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:31:24.237

Apple 似乎已经脱离了公共标头路径，因为静态库的首选机制包括，可能是由于这些类型的复杂性。如果您创建一个新的静态库项目，它将改为具有“复制文件”构建阶段，其中头文件`"Products Directory"`与 subpath一起复制`"include/${PRODUCT_NAME}"`。

当您导入标头时，`#import "header1.h"`您将使用`#import <MyProduct/header1.h>`. 我相信在编译之前需要构建这些库，但如果它们包含在您的“将二进制文件与库链接”阶段中，这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:17:30.740

你可以试试，

添加 Xcode 可以用来动态查找 Lib 的“Source Tree”变量。 **在 Xcode 首选项 > “位置”按钮 > “源树”选项卡 > 创建一个新的源树变量。** 对于 Lib，创建**LIB_SRC**并让它指向**/path_to_lib/lib/src/** 注意：Xcode 不允许路径包含任何空格！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T18:00:49.330

这显然是一个 Xcode 错误或限制。

我对此的唯一解决方案是在同一个工作区中多次导入项目使用的子项目。

例如：假设我有一个由主项目和 libraryB 使用的 libraryA。我为使 Xcode 编译所做的只是在同一个工作区中导入 libraryA 两次，一次用于 libraryB，一次用于主项目，并且一切编译正常。

Xcode 4 被 Apple 设计得很糟糕，从界面到引擎，现在我明白为什么这么多人讨厌它了（62% 的网站民意调查）。

# performance - MATLAB 中的 ifdef 类行为

> ID：16096603
> 
> 赞同：0
> 
> 时间：2013-04-19T03:11:31.053
> 
> 标签：performance, matlab

`.m`有没有办法在 MATLAB 中在编译时解析一次的文件中创建代码片段？

例如，假设您有一段代码是模态的，将被执行多次，但它总是使用相同的模式。但是，为了便于移植和阅读代码，我更喜欢在同一个文件中包含所有不同的模式。有点像

```
if mode==1
  % code of mode 1
elseif mode==2
  % code of mode 2
elseif mode==3
  % code of mode 3
end 
```

但是，如果这个文件被执行一千次，我必须执行这个有条件的一千次。但是对于每次运行，我都会设置模式并且不会更改它。

因此，我在想如果 MATLAB 在类似 C 的行中有一些东西`#ifdef`，我可以去掉所有其他不会在执行中使用的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:43:17.237

因为 Matlab 使用即时编译器，所以您提出的建议可能会导致意想不到的结果，即一段代码被编译为一种“模式”，然后留在内存中。下次你运行它时（如果你没有关闭 matlab 并且没有明确地“忘记”这个函数），你仍然会在这个模式下使用它——即使你打算改变它。我不认为它可以做到，这是一件好事......

如果您需要速度，有比删除`switch`语句更好的方法来实现它 - 这将是我首选的替代方法（再次，如果没有别的，为了可读性）。

```
switch (mode)
  case 1:
    % code of mode 1
  case 2:
    % code of mode 2
  case 3: 
    % code of mode 3
  otherwise:
    % always trap the unexpected input!!!
end 
```

最后 - 您当然可以创建一个`mex`使用正确选项有条件地编译的文件。这实际上可以让你完全按照你的要求去做，而且它还有一个额外的优势，那就是比原生 Matlab 代码快得多。您可以使用开关将#define 传递给`mex`命令（请参阅[http://www.mathworks.com/help/matlab/ref/mex.html](http://www.mathworks.com/help/matlab/ref/mex.html)） - 示例`-D`

```
mex -DmyMode=2 
```

网上有大量关于创建 mex 文件的资料。我想你能找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T08:09:31.603

我认为您可以使用[策略模式优雅地解决您的问题](https://en.wikipedia.org/wiki/Strategy_pattern)

考虑在你的代码中设置一个函数句柄——如果你是面向对象的，甚至可以制作策略对象。

# xml - 基于元素 ID 合并 XML 文件的子节点

> ID：16096607
> 
> 赞同：0
> 
> 时间：2013-04-19T03:12:02.807
> 
> 标签：xml, xslt, merge

我正在尝试根据元素 ID 合并 XML 文件的子节点。例如，我有以下 XML：

```
<category:category.fixedChildProducts>
    <category:product repositoryId="PROD-001">
        <category:product.id>PROD-001</category:product.id>
        <category:product.childSKUs>
            <category:footwear-sku repositoryId="SKU-001">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-002">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
        </category:product.childSKUs>
    </category:product>
    <category:product repositoryId="PROD-001">
        <category:product.id>PROD-001</category:product.id>
        <category:product.childSKUs>
            <category:footwear-sku repositoryId="SKU-003">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-004">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
        </category:product.childSKUs>
    </category:product>     
</category:category.fixedChildProducts> 
```

我需要将其转换为：

```
<category:category.fixedChildProducts>
    <category:product repositoryId="PROD-001">
        <category:product.id>PROD-001</category:product.id>
        <category:product.childSKUs>
            <category:footwear-sku repositoryId="SKU-001">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-002">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-003">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-004">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>                
        </category:product.childSKUs>
    </category:product> 
</category:category.fixedChildProducts> 
```

本质上，我需要遍历产品的`repositoryId`属性并将所有`childSKUs`具有相同产品的属性组合在一起`repositoryId`。每个产品节点都应该有一个唯一的`repositoryId`. 请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:00:57.490

这是一个使用 XSL 键的 XSLT 1.0 兼容解决方案：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:category="my:category">

  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Collect <category:product> elements into a key -->
  <xsl:key name="kProduct" match="category:product" use="@repositoryId"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!--
  Match the first <category:product> element with a certain @repositoryId
  attribute value in the key.

  See http://www.jenitennison.com/xslt/grouping/muenchian.html
  -->
  <xsl:template
    match="category:product[generate-id() = 
                             generate-id(key('kProduct', @repositoryId)[1])]">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Drop duplicate <category:product> elements -->
  <xsl:template match="category:product"/>

  <xsl:template match="category:product.childSKUs">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>

      <!--
      Apply the <category:footwear-sku> descendants of elements in the
      'kProduct' key other than the first one, which are already applied
      in the template above
      -->
      <xsl:apply-templates
        select="key('kProduct', ../@repositoryId)
                  [position() &gt; 1]/*/category:footwear-sku"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

### 输入

```
<category:category.fixedChildProducts xmlns:category="my:category">
    <category:product repositoryId="PROD-001">
        <category:product.id>PROD-001</category:product.id>
        <category:product.childSKUs>
            <category:footwear-sku repositoryId="SKU-001">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-002">
                <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
        </category:product.childSKUs>
    </category:product>
    <category:product repositoryId="PROD-001">
        <category:product.id>PROD-001</category:product.id>
        <category:product.childSKUs>
            <category:footwear-sku repositoryId="SKU-003">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
            <category:footwear-sku repositoryId="SKU-004">
                <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
                <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
            </category:footwear-sku>
        </category:product.childSKUs>
    </category:product>
</category:category.fixedChildProducts> 
```

### 输出

```
<?xml version="1.0" encoding="utf-8"?>
<category:category.fixedChildProducts xmlns:category="my:category">
  <category:product repositoryId="PROD-001">
    <category:product.id>PROD-001</category:product.id>
    <category:product.childSKUs>
      <category:footwear-sku repositoryId="SKU-001">
        <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
        <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
      </category:footwear-sku>
      <category:footwear-sku repositoryId="SKU-002">
        <category:footwear-sku.colorDefault>Black</category:footwear-sku.colorDefault>
        <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
      </category:footwear-sku>
      <category:footwear-sku repositoryId="SKU-003">
        <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
        <category:footwear-sku.sizeDefault>Large</category:footwear-sku.sizeDefault>
      </category:footwear-sku>
      <category:footwear-sku repositoryId="SKU-004">
        <category:footwear-sku.colorDefault>Red</category:footwear-sku.colorDefault>
        <category:footwear-sku.sizeDefault>Small</category:footwear-sku.sizeDefault>
      </category:footwear-sku>
    </category:product.childSKUs>
  </category:product>
</category:category.fixedChildProducts> 
```

# c - 多生产者多消费者线程问题

> ID：16096609
> 
> 赞同：5
> 
> 时间：2013-04-19T03:12:17.823
> 
> 标签：c, synchronization, pthreads, producer-consumer

我有一个程序，我试图在其中实现多生产者、多消费者设置。当我有一个消费者和多个生产者时，我的代码似乎运行良好，但引入多个消费者线程似乎会引发一些奇怪的问题。

这是我现在拥有的：

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>

#define MAX 10

typedef struct travs {
    int id;
    int numBags;
    int arrTime;
    struct travs *next;
} travs;

travs *queue;
//travs *servicing[MAX];

int produced; // The total # of produced in the queue

pthread_mutex_t queue_lock;
//pthread_mutex_t staff_lock;
pthread_cond_t ct, cs;

int CheckIn(){
    sleep(1);
    if(produced != 0) return 1;
    else return 0;
}

void *producerThread(void *args){
    travs *traveler = (travs *)args;
    // Acquire the mutex
    pthread_mutex_lock(&queue_lock);
    produced++;
//  pthread_cond_signal(&cs);
    pthread_cond_wait(&ct, &queue_lock);
    printf("Producer %d is now checked in at time %d.\n", queue->id, (1+queue-    >arrTime));
    queue = queue->next;
    pthread_mutex_unlock(&queue_lock);

    return; 
}       

int Producer(int id, int numBags, int arrTime){

    int ret;
    pthread_t ttid;
    travs *traveler = malloc(sizeof(travs));
    traveler->id = id;
    traveler->numBags = numBags;
    traveler->arrTime = arrTime;
    sleep(arrTime); 
    pthread_mutex_lock(&queue_lock);
    if(queue != NULL) {
        travs *check_in = malloc(sizeof(travs));
        check_in = queue;
        while(check_in->next != NULL){
            check_in = check_in->next;
        }
        check_in->next = traveler;
    }
    else { queue = traveler; }
    pthread_mutex_unlock(&queue_lock);
    // Create a new traveler thread
    ret = pthread_create(&ttid, NULL, producerThread, (void *)traveler);

    // Check if thread creation was successful
    if(ret == 0) {
        printf("Producer %d has entered the check-in line at time %d; s/he is at     position %d and has %d bags.\n", id, arrTime, produced, numBags);
        pthread_cond_signal(&cs);
        return 0;
    }
    else return -1;

}

void *consumerThread(void *arg){

    int i = 0; // travelers serviced
    char *name = (char *)arg;
    while(1) { // run iteratively

        // If 20 producers have been served, the consumer's work is done.
        if(i == 20) {
            printf("Consumer %s's service has completed!\n", name);
                pthread_exit(NULL);
            }
        // Sleep for 10s if 5 travelers have been checked in
        if (((i+1) % 5) == 0) {
                // Wake up sleeping travelers
                printf("Consumer %s is taking a break.\n", name);
                sleep(2);
                printf("Consumer %s's break is over.\n", name);
        }

        if(CheckIn()) {
            pthread_mutex_lock(&queue_lock);
            int j = 1;
                    pthread_cond_wait(&cs, &queue_lock);
                    printf("Producer %d presents ticket to consumer     %s.\n", queue->id, name);
                    printf("Consumer %s gives boarding pass to producer     %d.\n", name, queue->id);
                    while(j <= queue->numBags){
                        printf("Consumer %s checks in bag %d for     producer %d; baggage tag is _X_.\n", name, j, queue->id);
                        j++;
                }
            // Signal producer being serviced that their check in is complete.
            i++;
            pthread_mutex_unlock(&queue_lock);
            produced--;
            pthread_cond_signal(&ct);
        }
    sleep(3);
    }
}

int Consumer(char *Name) {

    sleep(5);
    int ret;
    pthread_t stid;
    // Create a staff thread

    ret = pthread_create(&stid, NULL, consumerThread, (void *)Name);
    // Acquire the lock
    if(ret == 0) { 
        printf("Producer %s's service has begun!\n", Name);
        return 0;
    }
    else    return -1;
}

int main() {
    int ret = 0;
    char *staff_name = malloc(sizeof(char));
    int staff_check = 0;
    int trav_check = 0;
    int id;
    int bagnum;
    int travtime;
    FILE *consumer_fp;
    FILE *producer_fp;
    queue = malloc(sizeof(travs));
    queue = NULL;
    /*while(ret < 10){
        servicing[ret] = malloc(sizeof(travs));
        servicing[ret] = NULL;
    }*/

    // Initilize mutexes
    pthread_mutex_init(&queue_lock, NULL);
    //pthread_mutex_init(&staff_lock, NULL);

    // Initialize condition variables
    pthread_cond_init(&ct, NULL);
    pthread_cond_init(&cs, NULL);

    // Open the file so we can start reading from it

    consumer_fp = fopen("staff.txt", "r");
    producer_fp = fopen("travelers.txt", "r");

    staff_check = fscanf(consumer_fp, "%s", staff_name);
    trav_check = fscanf(producer_fp, "%d %d %d", &id, &bagnum, &travtime);
    while(1){   

        K:
        while(staff_check == 1) {
            Consumer(staff_name);
            staff_check = fscanf(consumer_fp, "%s", staff_name);
            goto L;
        }
        L:
        while(trav_check == 3) { 
            Producer(id, bagnum, travtime);
            trav_check = fscanf(producer_fp, "%d %d %d", &id, &bagnum,     &travtime);
            goto K;
        }

    pthread_exit(NULL);
    }

} 
```

在这种情况下，每个生产者线程在返回之前只存在很短的时间，并且除了向全局队列中添加一个新元素和一些适当定时的输出行之外，它本身并不进行真正的计算。

但是，当我介绍多个生产者时，只有最后一个生产者线程会做任何事情。

据我推测，我需要以下内容：

i) 等待签入的生产者和当前正在签入的生产者的单独队列（上面注释为 travs *servicing[MAX]）

ii) 用于消费者的单独互斥锁。

但是，我不确定如何实现这一点。这是我的想法：

1.  CheckIn() 生产者线程并将 *queue 复制到 *servicing[i] （在消费者线程中）。

2.  设置 queue = queue->next（在生产者线程中）。

但是，我如何保证当我复制 *queue 时它不会已经前进了一步？我可以用与线程当前持有的锁不同的锁向等待线程发出信号吗？而且，更重要的是，我将如何让不同的消费者线程处理不同的旅行者线程？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:34:10.203

正如我所提到的，这是一个内存泄漏：

```
travs *traveler = malloc(sizeof(travs));
traveler = (travs *)args; 
```

我不打算详细介绍“内存泄漏有什么不好？”。如果你想得到那个答案，就问谷歌这个问题。您可能的意思是：`travs *traveler = args;`.

* * *

```
if(queue != NULL) {
    travs *check_in = malloc(sizeof(travs));
    check_in = queue;
    while(check_in->next != NULL){
        check_in = check_in->next;
    }
    check_in->next = traveler;
}
else { queue = traveler; } 
```

抛开内存泄漏不谈，为什么之前在其他函数中对队列互斥量进行了保护，而在这段代码中*根本*没有对互斥量进行保护？似乎您错过了互斥锁的要点。你的代码竞赛，在这里。

也许`pthread_rwlock_t`s 会更适合这种代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T06:14:43.213

使用一个队列。

编写两个函数，一个将现有项目添加到队列中，一个从队列中删除一个项目。不要在这些函数中使用任何锁定。在单线程应用程序中测试它们。

然后为这两个添加和删除函数编写两个包装器。这些包装器应该将额外的互斥锁作为参数。在调用添加或删除函数之前将这个互斥锁锁定在包装器中，然后解锁互斥锁。

编写生产者线程函数，创建一个新项目并调用 add-item-wrapper。编写调用 remove-item-wrapper 的消费者线程函数并销毁已删除的项目。

设置`main()`声明和初始化互斥锁的函数，然后使用`pthread_create()`. 将互斥锁作为参数传递给线程函数。

# php - 如何将变量分配给数组键值

> ID：16096610
> 
> 赞同：0
> 
> 时间：2013-04-19T03:12:26.620
> 
> 标签：php, arrays, arraylist

我有一个代码，其中数组正确输出结果，但我想为输出的每个键值分配变量。JSON 中也没有变量。all 包含没有描述的值。

```
<?php
    $trainNumbers = array(12550,12445);

    $json      = file_get_contents('advcg.json');
    $trainData = json_decode($json, true);
    foreach ($trainData[0] as $train) {

        $trainNumber = $train[0][0];
        if (in_array($trainNumber, $trainNumbers)) {

            foreach ($train[0] as $dataField) {
                echo "{$dataField}\n";          
            }
            echo "\n";

        }
    }
?> 
```

结果就像

```
16032
JAMMU TAWI - CHENNAI CENT Andaman Exp
2013-04-16
TMC
14.606674
79.997721
TALAMANCHI
34
14.564311
79.994888
NLR
NELLORE
24
1

11078
JAMMU TAWI - PUNE Jhelum Express
2013-04-17
BSL
21.0469912
75.7883817
BHUSAVAL JN
158
21.0222615
75.6729054
JL
JALGAON JN
147
17 
```

如何将变量（描述）分配给第一个，第二个，第三个，第四个，....键值第一个键值是列车号，列车名称，纬度，长......这样。这样它就可以被迭代数组对象中的每个集合

所需的输出（如描述）应位于值旁边

```
train_no-16032
train_name- JAMMU TAWI - CHENNAI CENT Andaman Exp
dep_date - 2013-04-16
dep_station- TMC
dep_log - 14.606674
dep_lat - 79.997721
arr_station- TALAMANCHI
delay_time- 34
new_lat- 14.564311
new_long- 79.994888
new_station- NLR
new_station_name- NELLORE
time_delay- 24
station_left- 1 
```

对此的任何想法都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:28:03.593

如果字段总是按相同的顺序排列，这样的事情就可以解决问题：

首先，创建一个包含字段列表的数组：

```
$fields = array('train_no', 'train_name', 'dep_date' ... ); 
```

然后在处理每个项目时，引用该数组中的相关字段：

```
foreach ($train[0] as $i => $dataField) {
    echo $fields[$i]." - {$dataField}\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:28:37.447

我的想法是制作一个标签数组

```
$lab=('train_no','train_name');//etc ... 
```

然后在 foreach() 循环内有一个计数器来分配它们

# java - 在实例化时定义 Arraylist 的大小有什么好处吗

> ID：16096611
> 
> 赞同：3
> 
> 时间：2013-04-19T03:12:32.150
> 
> 标签：java, arrays, collections, arraylist

在实例化时定义 Arraylist 的大小有什么好处吗？

如果有错误或与可能的其他问题重复，请纠正我。我搜索但找不到我要找的东西。

定义Arraylist的初始容量是否有好处？我猜它默认为 10。

在调整 Arraylist 的大小时，如果我们在实例化时声明会有所帮助。还有如何潜在地克服内部调整 Arraylist 大小的开销。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T03:20:10.200

ArrayList 在内部使用数组，因此当 ArrayList 需要额外容量时，它必须在内部创建一个新数组并将元素复制到新数组中。

您可以通过预先估计或找到 ArrayList 的确切大小来克服调整 ArrayList 大小的开销。或者，您可以确保 ArrayList 永远不会超过指定的大小，方法是处理您的业务逻辑，然后在 ArrayList 达到其最大所需大小时删除元素。最后，您可以使用内部不使用数组的不同数据结构来完全避免增长问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T03:13:57.937

如果您知道所需的容量，则预先提供它可以提高性能。否则，当您添加元素时，列表实现可能需要将内部数组复制到更大的数组中——可能会重复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T03:43:20.253

为 can 指定初始容量，`ArrayList`如果使用得当，将提高性能。如果使用不当，可能会损害性能。

`ArrayList`例如，如果您在循环中创建新实例*并且*知道如何计算实际的最终大小或合理的起始大小，则值得这样做。

但通常它要么不值得，甚至有害：

*   如果您“防御性地”分配太多，内存使用和初始化成本可能会超过使用默认大小调整大小的成本。
*   如果代码演变并且理想列表大小发生变化，但您忘记调整自定义初始容量，那么优化可能会变得悲观。
*   您花在像这样的微优化上的时间通常最好花在其他事情上。
*   每个附加元素的平均成本是恒定的：因为大小加倍，列表中的每个元素*平均*只移动一次（调整大小之前）或两次（调整大小之后）。通常处理放入列表的对象的成本要高出很多倍，因此调整大小的整体影响是无关紧要的。

* * *

对于可索引数组是一个不错的选择的用途，`ArrayList`它基本上是最好的。

`LinkedList`特别是在某些情况下可能*看起来*更好，但事实并非如此！它具有更大的内存开销（每个列表项的额外分配！），因此即使在它被认为是高效的情况下，平均性能也更差，甚至在 Java 中也不能保证 LinkedList 在末尾插入 O(1)，因为 GC 可能会启动在分配。它仅适用于非常特殊的情况，例如一些并发算法。

有时可以进行一种优化：如果您有`ArrayList`盒装原始类型（如`ArrayList<Integer>`），请考虑使用原始类型数组（如`int[]`）。这实际上并没有解决调整大小的问题，但它避免了盒装实例的开销。但这仅适用于原始类型，例如`Strings`.

`List`如果您可以忍受一些可以利用的额外限制，您也可以创建自定义。例如，如果您愿意增加访问时间（从直接索引访问到一个额外的查找）并且只需要在末尾插入或删除，您可以创建一个在普通数组`List`内部的自定义实现。`ArrayList`因此，当您插入并填充内部数组时，您会创建一个新数组并插入其中，而不是重新分配旧数组。但是由于两级结构的开销，这很少是整体改进，更现实地是使用 a 的替代方案`LinkedList`（同样，很少是正确的选择）。

所以一般来说，如果`ArrayList`调整大小是问题，最好的解决方法*是*让计算机变得更强大；）。另一种解决方案是改进整体算法，或者总体上提高性能（因为整体性能很重要，而不是一些小细节的孤立性能）。

* * *

有趣的是，这实际上与计算的“旧时代”有所不同。对于交互式应用程序，您希望某些操作在某个现实世界的时间限制内发生，因此用户体验不会受到影响。对于速度较慢的计算机，如果列表大小非常小，数组列表调整大小将过于耗时。

但是 CPU 和内存性能比典型的列表项计数提高得更快，所以像一次性调整一百万个元素列表的大小是没有问题的：当内存访问速度以每秒千兆字节为单位时，它仅移动 4/8 兆字节。

此外，多线程变得越来越普遍，非交互式线程的最坏情况响应时间并不重要，它更多的是关于整体吞吐量，只要 UI 线程保持敏捷。因此，如果您要处理这样的大数据，通常最好将数据处理移到其他地方（另一个线程，一个真实数据库），而不是尝试在 UI 线程中优化列表操作。

# xml - 如何在 XSD 中定义递归类型？

> ID：16096612
> 
> 赞同：0
> 
> 时间：2013-04-19T03:12:34.293
> 
> 标签：xml, validation, xsd

我现在正在与 XSD 战斗，这是一种胜利。我试图定义一个类型如下：

```
 <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.abc.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema">  
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Condition1" minOccurs="1" maxOccurs="1">
              <xs:complexType>
                <xs:sequence>
                  <xs:element type="xs:string" name="Operator" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="xs:string" name="SourceTableValue" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="xs:string" name="ValueToCompareTo" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="logicalOperator" name ="AND" minOccurs="0" maxOccurs="unbounded"/>
                  <xs:element type="logicalOperator" name ="OR" minOccurs="0" maxOccurs="unbounded"/>
                  <xs:element type="logicalOperator" name ="NOT" minOccurs="0" maxOccurs="unbounded"/>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
            <xs:element name="Condition2" minOccurs="0" maxOccurs="1">
              <xs:complexType>
                <xs:sequence>
                  <xs:element type="xs:string" name="Operator" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="xs:string" name="SourceTableValue" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="xs:string" name="ValueToCompareTo" minOccurs="1" maxOccurs="1"/>
                  <xs:element type="logicalOperator" name ="AND" minOccurs="0" maxOccurs="unbounded"/>
                  <xs:element type="logicalOperator" name ="OR" minOccurs="0" maxOccurs="unbounded"/>
                  <xs:element type="logicalOperator" name ="NOT" />
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
.... 
```

但是，这给了我一个错误，Visual Studio 下划线 **xs:element type="logicalOperator"**并说“命名空间 '' 不能在此架构中引用”。然后，当我稍后在模式中尝试引用类型“logicalOperator”时，我收到错误“未声明类型逻辑运算符”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:09:06.257

您的架构过于混乱，无法进行精确诊断；假设 XML 命名空间声明只是您所显示的，那么只需添加`xmlns="http://www.abc.com/"`到您的**<xs:schema>**元素，您应该能够引用您在同一架构文件或不同架构文件中定义的内容使用不带前缀的名称的相同目标命名空间。

这个片段：

```
<xs:element type="logicalOperator" .../> 
```

正在尝试查找`logicalOperator`没有命名空间的类型 - 有时打印为`{}logicalOperator`

通过添加如上所示的 xmlns，则相同变为`{http://www.abc.com/}logicalOperator`

说句公道话，XSD 不是唯一一个在这里与你抗衡的人。[XML 命名空间](http://www.w3.org/TR/REC-xml-names/):)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:47:22.570

好的，我得到它的工作。谢谢佩特鲁。

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.abc.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:abc="http://www.abc.com/">  
   <xs:complexType  name="logicalOperator">
      <xs:sequence>
        <xs:element name="Condition1" minOccurs="1" maxOccurs="1">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="Operator" minOccurs="1" maxOccurs="1"/>
              <xs:element type="xs:string" name="SourceTableValue" minOccurs="1" maxOccurs="1"/>
              <xs:element type="xs:string" name="ValueToCompareTo" minOccurs="1" maxOccurs="1"/>
              <xs:element type="abc:logicalOperator" name ="AND" minOccurs="0" maxOccurs="unbounded"/>
              <xs:element type="abc:logicalOperator" name ="OR" minOccurs="0" maxOccurs="unbounded"/>
              <xs:element type="abc:logicalOperator" name ="NOT" minOccurs="0" maxOccurs="unbounded"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Condition2" minOccurs="0" maxOccurs="1">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="Operator" minOccurs="1" maxOccurs="1"/>
              <xs:element type="xs:string" name="SourceTableValue" minOccurs="1" maxOccurs="1"/>
              <xs:element type="xs:string" name="ValueToCompareTo" minOccurs="1" maxOccurs="1"/>
              <xs:element type="abc:logicalOperator" name ="AND" minOccurs="0" maxOccurs="unbounded"/>
              <xs:element type="abc:logicalOperator" name ="OR" minOccurs="0" maxOccurs="unbounded"/>
              <xs:element type="abc:logicalOperator" name ="NOT" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType> 
```

# gwt - 无法将 servlet 示例 GWT 应用程序部署到 Apache Tomcat 7

> ID：16096617
> 
> 赞同：0
> 
> 时间：2013-04-19T03:12:58.683
> 
> 标签：gwt, tomcat, servlets, tomcat7, gwt-rpc

原始的，不太详细的问题在这里找到：[无法弄清楚为什么我不能将 GWT 应用程序部署到 Apache Tomcat 7 上](https://stackoverflow.com/questions/16074224/cannot-figure-out-why-i-cannot-deploy-gwt-application-onto-apache-tomcat-7)。在我写这篇文章的时候，我决定再试一次，这次它成功了，但是，示例应用程序中的 servlet 似乎没有工作。单击按钮时显示“远程过程调用失败”。这是我采取的步骤列表。

以下是我尝试将示例应用程序部署到 Apache Tomcat 7 的操作列表。

**设置环境**

1.  在虚拟机上安装 Ubuntu 12.04
2.  更新系统
3.  从这里的教程安装 Apache Tomcat 7 [https://www.digitalocean.com/community/articles/how-to-install-apache-tomcat-on-ubuntu-12-04](https://www.digitalocean.com/community/articles/how-to-install-apache-tomcat-on-ubuntu-12-04)。
4.  启动它并转到 localhost:8080 以查看它是否正常工作。

**获取示例项目**

1.  已安装 GWT。
2.  使用 Eclipse 向导，创建一个名为“SampleApp”的新项目
3.  在开发模式下运行一次以确保其正常工作。
4.  编译模块。它完成了整个工作 - 编译 6 个排列等。
5.  编译成 .war 文件，如下所示[http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/)（文件称为SampleApp.war)

**部署**

1.  将 SampleApp.war 复制到 Apache Tomcat 的 webapps 文件夹中
2.  .war 会自行解压缩，我现在可以在 localhost:8080/SampleApp/SampleApp.html 上访问我的应用程序。

但是，现在我的问题是服务器端代码似乎不起作用。

**localhost_access_log 的内容**

> 127.0.0.1 - - [18/Apr/2013:21:03:43 -0700] “GET /SampleApp/SampleApp.html HTTP/1.1”304 - 127.0.0.1 - - [18/Apr/2013:21:03: 43 -0700] “GET /SampleApp/SampleApp.css HTTP/1.1”304 - 127.0.0.1 - - [18/Apr/2013:21:03:43 -0700] “GET /SampleApp/sampleapp/sampleapp.nocache.js HTTP/1.1" 304 - 127.0.0.1 - - [18/Apr/2013:21:03:43 -0700] "GET /SampleApp/sampleapp/gwt/clean/clean.css HTTP/1.1" 304 - 127.0.0.1 - - [18/Apr/2013:21:03:43 -0700] “GET /SampleApp/sampleapp/gwt/clean/images/hborder.png HTTP/1.1”304 - 127.0.0.1 - - [2013 年 4 月 18 日： 21:03:44 -0700] "POST /SampleApp/sampleapp/greet HTTP/1.1" 500 2773 127.0.0.1 - - [18/Apr/2013:21:03:44 -0700] "GET /SampleApp/sampleapp/gwt /clean/images/circles.png HTTP/1.1" 304 - 127.0.0.1 - - [18/Apr/2013:21:03:44 -0700]"获取 /SampleApp/sampleapp/gwt/clean/images/vborder.png HTTP/1.1" 304 -

**localhost.2013-04-18的内容**

> 2013 年 4 月 18 日晚上 8:02:05 org.apache.catalina.core.ApplicationContext 日志信息：ContextListener：contextInitialized() 2013 年 4 月 18 日晚上 8:02:05 org.apache.catalina.core.ApplicationContext 日志信息：SessionListener : contextInitialized() Apr 18, 2013 8:02:05 PM org.apache.catalina.core.ApplicationContext 日志信息： ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler .TldLocationsCache@dc0435') 2013 年 4 月 18 日晚上 8:02:16 org.apache.catalina.core.ApplicationContext 日志信息：ContextListener: contextInitialized() 2013 年 4 月 18 日晚上 8:02:16 org.apache.catalina.core .ApplicationContext 日志信息：SessionListener：contextInitialized() Apr 18, 2013 8:02:16 PM org.apache.catalina.core.ApplicationContext 日志信息：ContextListener:attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@113e9fd') Apr 18, 2013 8:02:16 PM org.apache.catalina.core.ApplicationContext log INFO: SessionListener: contextDestroyed() Apr 18, 2013 8: 02:16 PM org.apache.catalina.core.ApplicationContext 日志信息：ContextListener：contextDestroyed() 2013 年 4 月 18 日 8:29:48 PM org.apache.catalina.core.ApplicationContext 日志信息：SessionListener：contextDestroyed() Apr 18 , 2013 年 8:29:48 PM org.apache.catalina.core.ApplicationContext 日志信息： ContextListener: contextDestroyed() 2013 年 4 月 18 日 8:30:00 PM org.apache.catalina.core.ApplicationContext 日志信息： ContextListener: contextInitialized () 2013 年 4 月 18 日晚上 8:30:00 org.apache.catalina.core.ApplicationContext 日志信息：SessionListener: contextInitialized() 2013 年 4 月 18 日晚上 8:30:00 org.apache.catalina.core。ApplicationContext 日志信息：ContextListener：attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@180cb01') 2013 年 4 月 18 日晚上 9:03:36 org.apache.catalina。 core.ApplicationContext 日志信息：SessionListener：contextDestroyed() 2013 年 4 月 18 日 9:03:36 PM org.apache.catalina.core.ApplicationContext 日志信息：ContextListener: contextDestroyed() 2013 年 4 月 18 日 9:03:41 PM apache.catalina.core.ApplicationContext 日志信息：ContextListener：contextInitialized() 2013 年 4 月 18 日晚上 9:03:41 org.apache.catalina.core.ApplicationContext 日志信息：SessionListener：contextInitialized() 2013 年 4 月 18 日 9:03：下午 41 点 org.apache.catalina.core.ApplicationContext 日志信息：ContextListener：attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.编译器.TldLocationsCache@18600d6')

**问候服务.java**

```
package com.sample.client;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

/**
 * The client side stub for the RPC service.
 */
@RemoteServiceRelativePath("greet")
public interface GreetingService extends RemoteService {
    String greetServer(String name) throws IllegalArgumentException;
} 
```

**/WEB-INF/web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

  <!-- Servlets -->
  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>com.sample.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/sampleapp/greet</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>SampleApp.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

通过eclipse生成项目后，我已经更改了注释。

由于我仍在试图弄清楚这一点，它可能与 Java 1.6 和 1.7 SDK 以及 tomcat 与它们交互的方式有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:51:41.580

问题`path`。

```
@RemoteServiceRelativePath("sampleapp/greet");

or 

@RemoteServiceRelativePath("../greet"); 
```

请参阅@chris 将[GWT 部署到 Tomcat（servlet 未运行）](https://stackoverflow.com/questions/6538731/deploy-gwt-to-tomcat-servlet-not-running)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:02:30.797

尝试使用 GWT-compile 编译示例应用程序，并将项目的 war 目录的内容复制到 tomcat/webapps/sample。之后在 url 检查你的应用

```
http://localhost:8080/example 
```

# java - PCSC 在 linux 上不返回任何内容，读卡器已连接

> ID：16096619
> 
> 赞同：2
> 
> 时间：2013-04-19T03:13:04.073
> 
> 标签：java, linux, pcsc

我正在尝试这个，用 PCSC 框架读取卡。但它根本不返回任何东西。

```
import java.util.List;
import javax.smartcardio.*;

public class Blog {
 public static void main(String[] args) {
  try {
   // Display the list of terminals
   TerminalFactory factory = TerminalFactory.getDefault();
   List<CardTerminal> terminals = factory.terminals().list();
   System.out.println("Terminals: " + terminals);

   // Use the first terminal
   CardTerminal terminal = terminals.get(0);

   // Connect wit hthe card
   Card card = terminal.connect("*");
   System.out.println("card: " + card);
   CardChannel channel = card.getBasicChannel();

   // Send Select Applet command
   byte[] aid = {(byte)0xA0, 0x00, 0x00, 0x00, 0x62, 0x03, 0x01, 0x0C, 0x06, 0x01};
   ResponseAPDU answer = channel.transmit(new CommandAPDU(0x00, 0xA4, 0x04, 0x00, aid));
   System.out.println("answer: " + answer.toString());

   // Send test command
   answer = channel.transmit(new CommandAPDU(0x00, 0x00, 0x00, 0x00));
   System.out.println("answer: " + answer.toString());
   byte r[] = answer.getData();
   for (int i=0; i<r.length; i++)
    System.out.print((char)r[i]);
   System.out.println();

   // Disconnect the card
   card.disconnect(false);
  } catch(Exception e) {
   System.out.println("Ouch: " + e.toString());
  }
 }
} 
```

输出：

```
run-single:
Terminals: []
Ouch: java.lang.IndexOutOfBoundsException: Index: 0
BUILD SUCCESSFUL (total time: 4 seconds) 
```

通过使用其他工具，它可以工作，但无法弄清楚为什么 Java 代码没有显示？

```
root@sun-M14xR2:/var/tmp# ps -e | grep pcsc
16399 ?        00:00:00 pcscd
root@sun-M14xR2:/var/tmp# service pcscd status
 * pcscd is running
root@sun-M14xR2:/var/tmp# service pcscd restart
 * Restarting PCSC Lite resource manager pcscd                                                                                                                   [ OK ] 
root@sun-M14xR2:/var/tmp# lsusb
Bus 003 Device 032: ID 076b:3021 OmniKey AG CardMan 3121
root@sun-M14xR2:/var/tmp# opensc-tool -l
# Detected readers (pcsc)
Nr.  Card  Features  Name
0    No              Generic CCID Reader 00 00

root@sun-M14xR2:/var/tmp# pcsc_scan 
PC/SC device scanner
V 1.4.20 (c) 2001-2011, Ludovic Rousseau <ludovic.rousseau@free.fr>
Compiled with PC/SC lite version: 1.8.3
Using reader plug'n play mechanism
Scanning present readers...
0: Generic CCID Reader 00 00

Fri Apr 19 05:30:22 2013
Reader 0: Generic CCID Reader 00 00
  Card state: Card removed, 

Fri Apr 19 05:30:59 2013
Reader 0: Generic CCID Reader 00 00
  Card state: Card inserted, Unresponsive card, 

Fri Apr 19 05:31:04 2013
Reader 0: Generic CCID Reader 00 00
  Card state: Card removed, 

Fri Apr 19 05:33:31 2013
Reader 0: Generic CCID Reader 00 00
  Card state: Card inserted, 
  ATR: 3B 98 13 40 0A A5 03 01 01 01 AD 13 11

ATR: 3B 98 13 40 0A A5 03 01 01 01 AD 13 11
+ TS = 3B --> Direct Convention
+ T0 = 98, Y(1): 1001, K: 8 (historical bytes)
  TA(1) = 13 --> Fi=372, Di=4, 93 cycles/ETU
    43010 bits/s at 4 MHz, fMax for Fi = 5 MHz => 53763 bits/s
  TD(1) = 40 --> Y(i+1) = 0100, Protocol T = 0 
-----
  TC(2) = 0A --> Work waiting time: 960 x 10 x (Fi/F)
+ Historical bytes: A5 03 01 01 01 AD 13 11
  Category indicator byte: A5 (proprietary format)

Possibly identified card (using /usr/share/pcsc/smartcard_list.txt):
3B 98 13 40 0A A5 03 01 01 01 AD 13 11
    Belgium Electronic ID card 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-02T06:55:11.223

我在这里找到了另一种解决方法

[从 Linux 64 位访问 javax.smartcardio](https://stackoverflow.com/questions/12376257/accessing-javax-smartcardio-from-linux-64-bits)

> 我想我找到了解决方法，因为我遇到了类似的问题。在来自 ubuntu 的错误报告中，它说 javax.smartcardio 库在错误的目录中搜索 PC/SC 库。
> 
> 因此，使用以下设置运行我的应用程序对我有用
> 
> -Dsun.security.smartcardio.library=/usr/lib/x86_64-linux-gnu/libpcsclite.so

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:00:24.103

这是因为Linux中的驱动程序问题。请为此硬件安装正确的驱动程序：[https ://www.hidglobal.com/drivers/14919](https://www.hidglobal.com/drivers/14919)

然后我在终端中至少得到了代码反馈。

# django - Django 1.5 - CreateView 不创建/保存新模型

> ID：16096623
> 
> 赞同：0
> 
> 时间：2013-04-19T03:13:33.183
> 
> 标签：django, django-views

我正试图围绕 CBV。在这里，我使用 CreateView 为我的模板提供一个用于创建新模型的表单（通过 POST）。当我为表单提供有效数据时，它会提交并返回到同一页面，就好像表单有错误一样，但事实并非如此。HTTP POST 后页面刷新时不会显示错误。我知道验证有效，因为我已经测试了未在适当的表单字段中提供某些数据的场景，并且有与之关联的错误消息。我检查了数据库，没有插入任何记录。我的数据库配置正确。我有应用程序的其他部分从中读取。该数据库还通过 South 应用了所有当前迁移。

我希望有人能对 CBV 的简单基本设置有所了解。

提前致谢。

**模型.py**

```
class Guide(models.Model):
    DIFFICULTY_OPTIONS = (
        (u'1', u'Easy'),
        (u'2', u'So so'),
        (u'3', u'Moderate'),
        (u'4', u'Challenging'),
        (u'5', u'Very challenging'),
    )
    title = models.CharField(max_length=100, db_index=True)
    slug = models.SlugField(max_length=100)
    description = models.CharField(max_length=500)
    user = models.ForeignKey(User)    
    difficulty = models.CharField(max_length=1, choices=DIFFICULTY_OPTIONS, default=u'1', null=True, blank=True)
    created = models.DateTimeField(default=datetime.datetime.now(), editable=False)
    modified = models.DateTimeField(default=datetime.datetime.now())
    publish = models.BooleanField(default=False)
    delete = models.BooleanField(default=False) 
```

**表格.py**

```
class NewGuideForm(forms.ModelForm):
    title = forms.CharField(widget=forms.widgets.TextInput(attrs={'placeholder': 'Title',
                                                              'class': 'input-block-level'}))
    description = forms.CharField(widget=forms.Textarea(attrs={'placeholder': 'Description',
                                                           'rows': 8,
                                                           'class': 'input-block-level'}))

    class Meta:
        model = Guide
        exclude = ('user', 'slug', 'created', 'modified', 'publish', 'delete', 'modified',) 
```

**视图.py**

```
class NewGuideView(CreateView):

    model = Guide
    form_class = NewGuideForm
    template_name = "guides/guide_new.html"
    success_url = "/" # Just to keep things simple, redirect to root.

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(NewGuideView, self).dispatch(*args, **kwargs)

    def form_valid(self, form):
        try:
            Guide.objects.get(title=form.title)
        except ObjectDoesNotExist:
            return super(NewGuideView, self).form_valid(form)
        return super(NewGuideView, self).form_invalid(form) 
```

**网址.py**

```
url(r'^guides/new/$', guide.NewGuideView.as_view(), name='guide-new'), 
```

**指南/guide_new.html**

```
...
<form method="post">{% csrf_token %}
    {{ form.non_field_errors }}
    <p>First, let's start by entering a title.</p>
    <p>{{ form.title.errors }}</p>
    <p>{{ form.title }}</p>
    <p>Now, provide a short summary of the problem you will be solving.</p>
    <p>{{ form.description.errors }}</p>
    <p>{{ form.description }}</p>
    <p>On a scale of 1 to 5, 5 being the most difficult, how hard is this?</p>
    <p>{{ form.difficulty.errors }}</p>
    <p>{{ form.difficulty }}</p>
    <button type="submit" class="btn-password btn btn-send">Submit</button>
</form>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:18:29.570

我认为您应该将`title`字段称为`form.cleaned_data['title']`而不是`form.title`. 提交的有效字段值在`form.cleaned_data`dict 中。

因此，将您的代码更改为

```
def form_valid(self, form):
    try:
        Guide.objects.get(title=form.cleaned_data['title'])
    except ObjectDoesNotExist:
        return super(NewGuideView, self).form_valid(form)
    return super(NewGuideView, self).form_invalid(form) 
```

评估`form.title`将导致`AttributeError`您的方法中未处理的内容。

# python - 通过整数索引选择一行熊猫系列/数据框

> ID：16096627
> 
> 赞同：518
> 
> 时间：2013-04-19T03:14:00.170
> 
> 标签：python, pandas, dataframe, indexing

我很好奇为什么`df[2]`不支持，而`df.ix[2]`两者`df[2:3]`都可以工作。

```
In [26]: df.ix[2]
Out[26]: 
A    1.027680
B    1.514210
C   -1.466963
D   -0.162339
Name: 2000-01-03 00:00:00

In [27]: df[2:3]
Out[27]: 
                  A        B         C         D
2000-01-03  1.02768  1.51421 -1.466963 -0.162339 
```

我希望以与 Python 索引约定一致`df[2]`的方式工作。`df[2:3]`是否有不支持按单个整数索引行的设计原因？

* * *

## 回答 #1

> 赞同：720
> 
> 时间：2013-04-19T12:20:25.803

呼应@HYRY，请参阅 0.11 中的新文档

[http://pandas.pydata.org/pandas-docs/stable/indexing.html](http://pandas.pydata.org/pandas-docs/stable/indexing.html)

这里我们有新的操作符，`.iloc`明确支持整数索引，`.loc`明确支持标签索引

例如想象这种情况

```
In [1]: df = pd.DataFrame(np.random.rand(5,2),index=range(0,10,2),columns=list('AB'))

In [2]: df
Out[2]: 
          A         B
0  1.068932 -0.794307
2 -0.470056  1.192211
4 -0.284561  0.756029
6  1.037563 -0.267820
8 -0.538478 -0.800654

In [5]: df.iloc[[2]]
Out[5]: 
          A         B
4 -0.284561  0.756029

In [6]: df.loc[[2]]
Out[6]: 
          A         B
2 -0.470056  1.192211 
```

`[]`仅对行进行切片（按标签位置）

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2017-10-24T21:37:07.590

### DataFrame 索引运算符的主要目的`[]`是选择列。

当索引运算符传递一个字符串或整数时，它会尝试查找具有该特定名称的列并将其作为系列返回。

因此，在上面的问题中：`df[2]`搜索与整数值匹配的列名`2`。此列不存在，并且`KeyError`引发了 a。

* * *

### 使用切片表示法时，DataFrame 索引运算符完全改变了选择行的行为

奇怪的是，当给定一个切片时，DataFrame 索引运算符会选择行，并且可以通过整数位置或索引标签来选择行。

```
df[2:3] 
```

这将从整数位置 2 到 3 的行开始切片，不包括最后一个元素。所以，只有一行。下面每第三行选择从整数位置 6 开始到但不包括 20 的行。

```
df[6:20:3] 
```

如果您的 DataFrame 索引中有字符串，您也可以使用由字符串标签组成的切片。有关更多详细信息，请参阅[.iloc 与 .loc 上的此解决方案](https://stackoverflow.com/questions/31593201/pandas-iloc-vs-ix-vs-loc-explanation/46915810#46915810)。

我几乎从不将这种切片符号与索引运算符一起使用，因为它不明确且几乎从未使用过。按行切片时，坚持使用`.loc/.iloc`.

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-04-19T07:33:32.307

您可以将 DataFrame 视为 Series 的字典。`df[key]`尝试选择列索引`key`并返回一个 Series 对象。

但是，在 [] 内部切片会切片行，因为这是一种非常常见的操作。

您可以阅读文档以了解详细信息：

[http://pandas.pydata.org/pandas-docs/stable/indexing.html#basics](http://pandas.pydata.org/pandas-docs/stable/indexing.html#basics)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-05-23T06:53:06.950

要对 pandas 表进行基于索引的访问，还可以考虑*使用 numpy.as_array*选项将表转换为 Numpy 数组：

```
np_df = df.as_matrix() 
```

进而

```
np_df[i] 
```

会工作。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-19T10:47:25.670

你可以看看[源代码](https://github.com/pydata/pandas/blob/master/pandas/core/frame.py#L1890)。

`DataFrame`有一个私有函数`_slice()`来对 进行切片`DataFrame`，它允许参数`axis`确定要切片的轴。`__getitem__()`for调用时`DataFrame`不设置轴。`_slice()`因此`_slice()`默认将其切片为轴 0。

您可以进行一个简单的实验，这可能会对您有所帮助：

```
print df._slice(slice(0, 2))
print df._slice(slice(0, 2), 0)
print df._slice(slice(0, 2), 1) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-03-19T08:15:05.600

您可以像这样遍历数据框。

```
for ad in range(1,dataframe_c.size):
    print(dataframe_c.values[ad]) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-24T00:40:58.897

我通常会`.loc/.iloc`按照 Ted 的建议去做，但也可以通过转置 DataFrame 来选择一行。留在上面的例子中，`df.T[2]`给你第 2 行`df`。

# sql - 制作名称序列

> ID：16096631
> 
> 赞同：0
> 
> 时间：2013-04-19T03:14:26.270
> 
> 标签：sql, oracle, sequence

我有这样的桌子

```
file_nbr    name_seq    Person_name

10  1   James Linson

10  1   Ronn Dave

10  1   Michael Meyer

12  1   Pamela  J. Mayberry  

12  1   Randall M. Bachtel 

12  1   Cleary E. Mahaffey 

12  1   D. Scott Rowley

12  1   Stephen  L. Phelps 

12  1   Mark A. Bennet

12  1   Richard  P. Lewis 
```

我想更改name_seq，所以结果如下：

```
10  1   James Linson

10  2   Ronn Dave

10  3   Michael Meyer

12  1   Pamela  J. Mayberry  

12  2   Randall M. Bachtel 

12  3   Cleary E. Mahaffey 

12  4   D. Scott Rowley

12  5   Stephen  L. Phelps 

12  6   Mark A. Bennet

12  7   Richard  P. Lewis 
```

什么是最好的 SQL 查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:17:40.153

```
WITH records
AS
(
    SELECT  "file_nbr",
            ROW_NUMBER() OVER(PARTITION BY "file_nbr" ORDER BY "file_nbr") "name_seq",
            "Person_name"
    FROM    TableName
)
SELECT  "file_nbr", "name_seq", "Person_name"
FROM    records 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/d7dd1/1)

# dart - 如何在使用 Dart 的 chrome 打包应用程序中打开文件选择器

> ID：16096635
> 
> 赞同：4
> 
> 时间：2013-04-19T03:14:41.987
> 
> 标签：dart, google-chrome-app, dart-js-interop

似乎没有任何飞镖包，所以我使用的是 Javascript 互操作。这是我到目前为止所得到的：

```
 js.scoped(() {
    done(entry) {
      print('ok');
    }
    js.context.doneCallback = new js.Callback.once(done);
    js.context.chrome.fileSystem.chooseEntry(null, js.context.doneCallback);
  }); 
```

它失败了：

> 未捕获的错误：调用表单 fileSystem.chooseEntry(object, object) 与定义 fileSystem.chooseEntry(可选对象选项，函数回调)不匹配

所以似乎回调被拒绝，因为它是错误的类型。

有任何想法吗？

[chrome.fileSystem docs](http://developer.chrome.com/apps/fileSystem.html) 编辑：将可选参数改回 null（我也尝试了 Damien 在下面的建议）。

编辑：此代码现在可以使用 - 感谢 Damien！

```
 js.scoped(() {
    done(entry) { print('ok'); }
    js.context.chrome.fileSystem.chooseEntry(null, new js.Callback.once(done));
  }); 
```

Edit2：[更新](https://gist.github.com/xxgreg/5428315)了打开文件选择器并从中读取路径的代码。但是我不确定如何通过 js_interop 使用 javascript FileReader 对象。

Edit3：请参阅Dart 邮件列表上的[讨论。](https://groups.google.com/a/dartlang.org/d/msg/misc/D5hb02teYCU/ZbFLwqnESvYJ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T06:24:28.133

> 但是我不确定如何通过 js_interop 使用 javascript FileReader 对象。

我已经为此实施了一个非常hacky的解决方案，这里有一个与您类似的示例：

[https://gist.github.com/rmsmith/5878583](https://gist.github.com/rmsmith/5878583)

我解决这个问题的方法是实现`dart:html`. 我会抛出`UnimplementedError`许多方法，直到我需要它们为止。

您的要点中的问题是您正在`readAsText(blob, label)`使用自己`FileEntry`类型的实例进行调用，但您需要传递 a `Blob`or `File`。由于`FileReader`在 js 中，你实际上需要一个 js.Proxy 到`Blob`or `File`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:03:35.130

我猜 {} 不会创建 chooseEntry 期望的地图，您需要使用 js.map，如下所示：

```
chrome.fileSystem.chooseEntry(js.map({'type': 'openWritableFile'}),
  js.context.doneCallback); 
```

但是，我一直无法通过这种方法获取磁盘上的真实文件路径（我可以获取文件内容，但路径是在虚拟文件系统中）。

编辑：我实际上使用一个函数作为第二个参数，就像这样：

```
chrome.fileSystem.chooseEntry(js.map({'type': 'openWritableFile'}),
    new js.Callback.once((var fileEntry) {
  print('fullPath: ' + fileEntry.fullPath);
})); 
```

# jquery - JQuery droppable 在克隆时丢失

> ID：16096638
> 
> 赞同：1
> 
> 时间：2013-04-19T03:15:25.287
> 
> 标签：jquery, jquery-ui

我正在开发一个应用程序，该应用程序需要我克隆一个可放置的 JQuery 对象。

删除了不必要的代码的快速演示是：

```
var $droppable = $("#droppable");
$droppable.droppable({
    accept : "#draggable",
    hoverClass : "thickBorder",
    drop : function () {
        alert("thanks");
    }
});

var $cloned = $droppable.clone(true); 
```

[http://jsfiddle.net/tGg9Y/](http://jsfiddle.net/tGg9Y/)

* * *

我使用了 .clone(true)，其他事件处理程序（如 click）继续工作，但 droppable 丢失了。

我什至尝试使用以下方法直接重置 droppable：

```
$cloned.droppable($droppable.droppable('option')); 
```

有谁知道如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:28:56.930

如果您不执行 的深层复制`element`，并且在其上重新应用可放置插件，它应该可以工作。

```
var $cloned = $droppable.clone(false); 
```

我认为复制一个应用了插件的元素不是很安全，除非你 100% 确定插件的设计和编码方式可以支持使用同一个插件实例的多个 DOM 元素。

我创建了一个[jsFiddle](http://jsfiddle.net/yYwya/1/)来证明它可能是一个问题的一个原因，但可能还有很多其他原因。

HTML

```
<div id="initial">Initial</div> 
```

JS

```
function SomePlugin(el) {
    var $el = this.$el = $(el);

    $el.mouseenter(function () {
            //works for this handler because we did not use a closure variable
            $(this).css({ backgroundColor: 'red'});
        })
        .mouseleave(function () {
            //won't work for this one because because we are referencing $el
            //wich will always point to the other element
            $el.css({ backgroundColor: 'white'});
        });
}

//instanciate plugin
var $initial = $('#initial'), $clone;
new SomePlugin($initial);

$clone = $initial.clone(true).html('clone').attr('id', 'clone').appendTo(document.body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:37:53.990

只需将您的代码更改为此，[FIDDLE](http://jsfiddle.net/rajesh007/tGg9Y/3/)

```
 var $cloned = $droppable.clone(false); 
```

# ip - 多播mac地址是什么意思？

> ID：16096643
> 
> 赞同：1
> 
> 时间：2013-04-19T03:16:20.257
> 
> 标签：ip, ipv6, ethernet, ipv4, tcp-ip

启动 Linux 服务器时，会发送一些多播数据包。目标mac地址是`33:33:00:00:00:02`。我想知道多播地址是否众所周知？它有什么特殊含义吗？有知名的多播mac地址列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:29:14.603

IP多播地址到MAC多播地址的映射是多对一的，所以从技术上讲，MAC地址可以对应很多不同的IP地址。但是，在这种情况下，所讨论的 IP 地址几乎可以肯定是`ff01::2`，这是所有路由器的多播地址。主机可能正在发送路由器请求消息。

以 开头的多播 MAC 地址`33:33:`都由 IPv6 使用，但您不会在 OUI 注册表中找到它们，因为 IETF 没有正式向 IEEE 注册该前缀（这意味着要注册的单独 OUI 值太多）。

# visual-studio-2012 - 部署 minifiter 驱动程序使用发生错误

> ID：16096645
> 
> 赞同：1
> 
> 时间：2013-04-19T03:16:30.637
> 
> 标签：visual-studio-2012, driver, minifilter

我正在编写我的第一个微过滤器驱动程序。我的环境是：主机操作系统：Win7（64 位）客户操作系统：Win Server 2008 R2 VMWare:8.0.2 VS 2012 和 WDK8.0

[首先，我根据http://msdn.microsoft.com/en-us/library/windows/hardware/hh439665(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439665(v=vs.85).aspx)编写了一个 Kmdf 演示。它运行正确。然后我使用 VS2012 创建了一个微过滤器驱动程序，并构建它。但我未能部署。minifilter驱动程序和KMDF驱动程序在**Package Properties->Driver Install**中有不同的设置还是我没有正确安装我的vs2012和wdk8？

错误对话框显示：驱动程序测试在解决方案中部署驱动程序时发生错误：索引超出了数组的范围。

# java - Android DefaultHttpClient POST 方法无法设置内容长度，出现 Http 错误 411

> ID：16096648
> 
> 赞同：3
> 
> 时间：2013-04-19T03:17:30.673
> 
> 标签：java, android, post, httpclient, http-status-code-411

我在 Android 4.2 上遇到了 HttpPost 问题。我正在尝试调用托管在 .NET WebAPI 服务中的身份验证服务。

该服务要求以 POST 方法发出请求，并提供多个自定义请求标头。请求的主体将 Json 值发送到服务。

这是我撰写请求的方式；

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://api.fekke.com/api/account/login");
httppost.addHeader(HTTP.TARGET_HOST, "api.fekke.com");
httppost.addHeader("Accept", "application/json");
httppost.addHeader("Fekke-AccessKey", "some-access-key");
httppost.addHeader("Date", dateString);
httppost.addHeader("Fekke-Signature", "some-encoded-value");
httppost.addHeader("Content-Type", "application/json; charset=utf-8");

String jsonmessage = "{\"Username\": \"myusername\", \"Password\": \"mypassword987\"}";
httppost.setEntity(new StringEntity(jsonmessage, HTTP.UTF_8));

HttpResponse response = httpclient.execute(httppost); 
```

我试图用“Content-Length”标头来调用它，它会抛出一个异常，指出请求中已经存在标头。

我也尝试过使用 HttpURLConnection 对象来调用它，Google 建议从现在开始使用它，但这也遇到了同样的问题。

我已经能够毫无问题地从 iOS 和 .NET 发出这个请求调用，所以我知道这不是服务。

### 更新#1

我通过服务的本地版本运行了以下示例，并且当我在其中一个 http 标头中传递散列值时，我能够隔离错误。我正在使用 JWT 安全令牌，它使用 HMAC SHA-256 散列算法来设置服务使用的值。这个散列值会导致请求的执行崩溃。

### 更新#2

我终于能够解决问题。该问题是由 Base64 encodeToString 方法向值添加不可见字符引起的。它迫使标题损坏。我使用的是默认设置 0 或 Base64.DEFAULT。我将值更改为 Base64.NO_WRAP，它解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:39:39.223

如果您使用正确的方法，则不必担心在帖子上设置“内容长度”标题。使用 Post，您通常会使用一些重载版本的 'SetEntity($Type-stream/string/encodedArray...)'

查看此[来源](http://svn.apache.org/viewvc/httpcomponents/oac.hc3x/trunk/src/java/org/apache/commons/httpclient/methods/EntityEnclosingMethod.java?view=markup)（搜索长度）以查看 API 如何在帖子中为您处理长度的示例。

您应该评估将用于 http 的库并找到显示诸如“setEntity”之类的方法的 POST 示例来设置帖子的正文。这样，您将不会收到与内容长度相关的错误。看[例子](https://stackoverflow.com/questions/6028981/using-httpclient-and-httppost-in-android-with-post-parameters)

示例代码“HttpConnection”类 - 使用我评论中的链接......

对于 JSON 或位图：

```
try {                       
    HttpResponse response = null;
    switch (method) {
    case GET:
        HttpGet httpGet = new HttpGet(url);             
        response = httpClient.execute(httpGet);
        break;
    //Note on NIO - using a FileChannel and  mappedByteBuffer may be NO Faster
    // than using std httpcore  http.entity.FileEntity
    case POST:
        //TODO bmp to stream to bytearray for data entity
        HttpPost httpPost = new HttpPost(url); //urlends "audio OR "pic" 
        if (  !url.contains("class") ){                 
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            //can alter belo for smaller uploads to parse .JPG , 40,strm
            bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);               
            httpPost.setEntity(new ByteArrayEntity(stream.toByteArray()));

        }else if(data != null && (url.contains("class"))){
            //bug data is blank
            httpPost.setEntity(new StringEntity(data));
            Log.d(TAG, "DATA in POST run-setup " +data);
        }

        response = httpClient.execute(httpPost);
        break;
    case PUT:
        HttpPut httpPut = new HttpPut(url);
        httpPut.setEntity(new StringEntity(data));
        response = httpClient.execute(httpPut);
        break;
    case DELETE:
        response = httpClient.execute(new HttpDelete(url));
        break;
    case BITMAP:
        response = httpClient.execute(new HttpGet(url));
        processBitmapEntity(response.getEntity());
        break;
    }
    if (method < BITMAP)
        processEntity(response.getEntity());
} catch (Exception e) {
    handler.sendMessage(Message.obtain(handler,
            HttpConnection.DID_ERROR, e));
} 
```

对于 Post 中的 XML 正文：

```
try {
    HttpResponse response = null;
    switch (method) {

    case POST:
        HttpPost httpPost = new HttpPost(url);
        if (data != null){
            System.out.println(" post data not null ");
            httpPost.setEntity(new StringEntity(data));
        }
        if (entry != null){
            ContentProducer cp = new ContentProducer() {
                public void writeTo(OutputStream outstream) throws IOException {

                     ExtensionProfile ep = new ExtensionProfile();
                     ep.addDeclarations(entry);
                     XmlWriter xmlWriter = new XmlWriter(new OutputStreamWriter(outstream, "UTF-8"));
                     entry.generate(xmlWriter, ep);
                     xmlWriter.flush();
                }
            };
            httpPost.setEntity(new EntityTemplate(cp));
        }
        httpPost.addHeader("GData-Version", "2");
        httpPost.addHeader("X-HTTP-Method-Override", "PATCH");
        httpPost.addHeader("If-Match", "*");
        httpPost.addHeader("Content-Type", "application/xml");
        response = httpClient.execute(httpPost);

        break;
    }
    if (method < BITMAP)
        processEntity(response.getEntity());
} catch (Exception e) {
    handler.sendMessage(Message.obtain(handler,
            HttpConnection.DID_ERROR, e));
} 
```

# java - Java SimpleCaptcha：如何使字符之间的空间更大一点

> ID：16096649
> 
> 赞同：1
> 
> 时间：2013-04-19T03:17:31.370
> 
> 标签：java, captcha, simplecaptcha

我正在 为 Web 应用程序使用名为[SimpleCaptcha的 Java 验证码解决方案。](http://simplecaptcha.sourceforge.net/custom_images.html)

我想让字符之间的空间更大一点。我怎样才能做到这一点？

# excel - 将单元格值添加到整数 (Excel-VBA)

> ID：16096650
> 
> 赞同：0
> 
> 时间：2013-04-19T03:17:33.643
> 
> 标签：excel, vba

凭借多年的编程经验（不过是 VBA 初学者）、在线参考资料和搜索引擎，我仍然对无法使其正常工作感到非常沮丧。

我至少花了两个小时尝试 CInt、.Range、With/End With、.Value、Cells 等我可能想到的每一种组合，但它只是在“sum = sum + ... “ 线：

```
Public Sub Fill_InnerData()

    Dim GNumber As Range
    Set GNumber = Range("GenerateNumber")

    Dim Data As Range
    Set Data = Range("DATA_INNER")

    For r = 1 To Data.Rows.Count

        For c = 1 To Data.Columns.Count

            If Data.Cells(r, c) = "" Then

                If c > r Then

                    Data.Cells(r, c) = 0

                Else
                    Dim x As Integer
                    x = r - c + 1

                    Dim y As Integer
                    y = 2

                    Dim sum As Integer
                    sum = 1

                    For i = 1 To c
                        sum = sum + CInt(Worksheets("Data").Range(Cells(x, y)).Value)
                        y = y + 1
                    Next

                End If

            End If

        Next
    Next

End Sub 
```

“失败”是指收到此错误：

> 运行时错误“1004”：
> 
> 应用程序定义或对象定义的错误

在我尝试过的每个组合中，我都在提到的行中收到了该错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:13:34.957

这里的想法是你的语法指的是范围。剪掉一点就足够了，这样做：

```
Sum = Sum + CInt(Worksheets("Data").Cells(x, y).Value) 
```

根据我的经验，如果只提供一个参数，则范围需要括号内的地址字符串。或者，如果您同时提供起点和终点范围点，则可以放置单元格。这两个简单的行具有正确的语法：

```
Range(Cells(1,1), Cells(2,2)).Select
Range(Cells(1,1).Address).Select 
```

这是无效的：

```
Range(Cells(1,1)).Select    'error 1004 here 
```

# sql - 使用 DELETE 逻辑 NOT IN 嵌套查询的最快性能

> ID：16096651
> 
> 赞同：4
> 
> 时间：2013-04-19T03:17:37.493
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-delete

我正在尝试为这个 DELETE（和 SELECT）查询获得最快的性能。有没有更好的方法来删除记录，因为这需要 10 多分钟才能运行？我想它必须进行自己的排序和合并，直到它可以找到记录。

```
SELECT COUNT([VISIT_ID])
FROM [dbo].[I2B2_SRC_VISITS]
WHERE [PATIENT_ID] NOT IN (
    SELECT [PATIENT_ID] FROM [dbo].[I2B2_SRC_PATIENT]
)

DELETE FROM [dbo].[I2B2_SRC_VISITS]
WHERE [PATIENT_ID] NOT IN (
    SELECT [PATIENT_ID] FROM [dbo].[I2B2_SRC_PATIENT]
) 
```

**编辑：**我不能像使用 SELECT 那样将 DELETE 放在该查询前面。但这是 DELETE 语句的最终结果。

```
DELETE FROM [dbo].[I2B2_SRC_VISITS]
WHERE [VISIT_ID] IN
(
    SELECT a.[VISIT_ID]
    FROM    [dbo].[I2B2_SRC_VISITS] a
            LEFT JOIN [dbo].[I2B2_SRC_PATIENT] b
                ON a.[PATIENT_ID] = b.[PATIENT_ID]
    WHERE b.[PATIENT_ID]  IS NULL
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:19:24.927

怎么样做`JOIN`呢？

```
DELETE  a
FROM    [dbo].[I2B2_SRC_VISITS] a
        LEFT JOIN [dbo].[I2B2_SRC_PATIENT] b
            ON a.[PATIENT_ID] = b.[PATIENT_ID]
WHERE   b.[PATIENT_ID] IS NULL 
```

确保`[PATIENT_ID]`两个表中的列都有键定义，这使得它更快。

* * *

正确的。`NOT EXIST`是更好的一个。

```
DELETE  a 
FROM    [dbo].[I2B2_SRC_VISITS] a 
WHERE   NOT EXISTS
        ( 
            SELECT  1 
            FROM    [dbo].[I2B2_SRC_PATIENT] b
            WHERE   a.[PATIENT_ID] = b.[PATIENT_ID] 
        ) 
```

# objective-c - Objective-c 表达式解释

> ID：16096652
> 
> 赞同：0
> 
> 时间：2013-04-19T03:17:39.600
> 
> 标签：objective-c

这些线是什么意思？

```
 for(ContactInfo *item in fullContactsArray) {
        if(item->contactId || item->listId)
            [contactsArray addObject:item];
    } 
```

特别是，我想知道是什么`->`意思。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:22:30.667

当使用指向基于结构的数据类型的指针时，特殊的解引用语法允许您在一个步骤中引用指针并访问结构中的特定字段。为此，我们使用 -> 运算符，如下所示：

```
struct box * p = ...; 
p->width = 20; 
```

第二行演示的 -> 操作符取消引用指针 p 然后访问结构中的宽度字段。在跟随指针读取或更改它指向的值时，有时比较两个指针以检查它们是否指向相同的值也很有帮助。

[Objective-C 中的指针](http://www.drdobbs.com/mobile/pointers-in-objective-c/225700236)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T03:31:35.363

运算符的`->`工作方式与 C 或 C++`item->contactId`中的相同...与 . 相同`(*item).contactId`。（本例中的点是成员访问运算符，而不是属性访问运算符。）

*   循环是通过 Objective-C 容器快速迭代的`for`一个例子。它只是检查数组中的`fullContactsArray`每个对象，依次将每个对象分配给循环变量`item`。

*   `item`是指向类型对象的指针`ContactInfo`，并且每次通过循环它都指向不同的对象。该`if`语句使用`->`运算符检查`contactId`和`listId`实例变量的值。

*   如果这些变量中的任何一个不为零，则`item`指向的对象将添加到`contactsArray`.

在 Objective-C 代码中看到它有点不寻常`->`，尤其是现在，因为属性和属性访问器通常比直接实例变量访问更受欢迎。

# mysql - 限制从内部连接返回的行数

> ID：16096659
> 
> 赞同：0
> 
> 时间：2013-04-19T03:18:35.577
> 
> 标签：mysql, greatest-n-per-group

我有 2 个表格，车辆的描述和 lat/long 的 itorical 表格，因为它们移动。两个表都有一个 Id 键（PK 和 FK）。

我的 SELECT 看起来像这样

```
SELECT vehicles.id,          vehicles.description, vehicles.type, 
       positions.time_stamp, positions.latitude,   positions.longitude

       FROM         vehicles
       INNER JOIN   positions 
       ON           vehicles.id=positions.id 
```

我想订购和限制它，以便它只显示为每辆车报告的最新 poisiotn 的连接值。

我怎样才能做到这一点？谢谢

* * *

[更新] 我创建了[这个 SqlFiddle 演示](http://sqlfiddle.com/#!2/2e994/6)，它没有给出想要的结果。

我想我需要一些类似的东西

```
 ORDER BY     positions.time_stamp DESC
   LIMIT SELECT COUNT(*) FROM vehicles 
```

如果只有那是有效的语法：-/

* * *

[进一步更新]对于那些关心thingsg执行顺序的人：

1.  不会从`positions`表中删除，只有插入
2.  每辆车每隔几分钟插入一次
3.  我可以忍受奇怪的异常光点，我预计这将是非常罕见的
4.  车辆的细节不太可能发生变化，我所做的只是添加新位置

这会让事情变得更容易吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T03:55:50.657

如果`(id, time_stamp)`是唯一的，即同一辆车没有两行和相同的时间戳，您可以使用内联视图（mysql 将其称为派生表）来获取每辆车的最新时间戳。然后，您可以将该派生表连接到位置表，以获取其他列，如下所示：

```
SELECT v.id
     , v.description
     , v.type
     , p.time_stamp
     , p.latitude
     , p.longitude
  FROM ( SELECT MAX(l.time_stamp) AS max_time_stamp
              , l.id
           FROM positions l
          GROUP BY l.id
       ) m
 JOIN positions p
    ON p.id = m.id
   AND p.time_stamp = m.max_time_stamp
  JOIN vehicles v
    ON v.id = p.id 
```

您可以仅在内联视图中运行该查询（`m`在上面的查询中分配了别名，以验证这是否返回了每辆车的最新时间戳。

如果您希望结果按特定顺序排列，您可以添加 ORDER BY。（此查询有可能为车辆返回多行，如果同一车辆的两（或更多）行出现最新的 time_stamp 值。如果车辆没有重复 time_stamp 值，则不会发生这种情况。）

适当的索引将加快派生表的创建，并加快连接操作回到位置表：

```
 CREATE INDEX positions_IX1 ON positions (id,time_stamp) 
```

（在其他关系型数据库如 Oracle 和 SQL Server 中，我们可以使用“分析函数”，但 MySQL 尚不支持这些类型的函数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:53:57.893

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/2e994/9)**

```
SELECT v.id
     , v.description
     , v.type
     , p.time_stamp
     , p.latitude
     , p.longitude
  FROM positions p
  JOIN vehicles v ON v.id = p.id
WHERE p.time_stamp = (SELECT MAX(l.time_stamp)
                      FROM positions l
                      WHERE l.id = p.id) 
```

结果：

```
| ID | DESCRIPTION | TYPE |                   TIME_STAMP | LATITUDE | LONGITUDE |
---------------------------------------------------------------------------------
|  1 |     Trabant |  car | April, 19 2013 13:43:12+0000 | 26.77994 | 402.46261 |
|  2 |    Bus # 42 |  bus | April, 19 2013 13:43:12+0000 | 32.77994 |  48.46261 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:34:19.603

```
SELECT v.id, v.description, v.type, p.time_stamp, p.latitude, p.longitude
FROM vehicles v
INNER JOIN positions p ON v.id = p.id
GROUP BY v.id
ORDER BY p.time_stamp DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T03:40:28.647

```
SELECT v.id, v.description, v.type,
       cur_pos.time_stamp, cur_pos.latitude, cur_pos.longitude
FROM vehicles AS v,
(
    SELECT p.time_stamp, p.latitude, p.longitude
    FROM positions AS p
    WHERE p.id = v.id
    ORDER BY p.time_stamp DESC
    LIMIT 1
) AS cur_pos 
```

可能还有其他方法可以做到这一点；以下是一种尝试，但正如下面的评论中所指出的，它并没有按照原始海报的要求进行。我保留它仅供参考：

```
SELECT v.id, v.description, v.type,
       MAX(p.time_stamp), p.latitude, p.longitude
FROM vehicles AS v INNER JOIN positions AS p ON v.id = p.id
GROUP BY v.id, v.description, v.type, p.latitude, p.longitude 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:01:01.410

试试这个查询 -

```
SELECT
  v.id, v.description, v.type, t.id, t.time_stamp, t.latitude, t.longitude
FROM vehicles v
  JOIN (
    SELECT t1.*, COUNT(*) num FROM positions t1
      LEFT JOIN positions t2
        ON t2.id = t1.id AND t2.time_stamp >= t1.time_stamp
    GROUP BY
      t1.id, t1.time_stamp
    ) t
  ON v.id = t.id
WHERE
  num <= 2;

+----+-------------+------+----+---------------------+-----------+-----------+
| id | description | type | id | time_stamp          | latitude  | longitude |
+----+-------------+------+----+---------------------+-----------+-----------+
|  1 | Trabant     | car  |  1 | 2013-04-25 09:45:39 | 161.77994 | 102.46261 |
|  1 | Trabant     | car  |  1 | 2013-04-25 09:45:40 | 261.77994 | 402.46261 |
|  2 | Bus # 42    | bus  |  2 | 2013-04-25 09:45:39 | 221.77994 |  88.46261 |
|  2 | Bus # 42    | bus  |  2 | 2013-04-25 09:45:40 | 321.77994 |  48.46261 |
+----+-------------+------+----+---------------------+-----------+-----------+ 
```

更改`num`最后一行中的值以选择每组所需的输出记录数。给定的示例每组输出 2 条记录。

# c# - 改进我的代码：正则表达式解析逗号分隔的数字列表

> ID：16096660
> 
> 赞同：1
> 
> 时间：2013-04-19T03:18:35.960
> 
> 标签：c#, regex

LinqPad 中的这段代码在正则表达式中输出一串数字：

```
void Main()
{
    string a = "1, 2, 3, 4, 5, 6, 7";
    var myList = Regex.Match(a, @"^\s*((\d+)\s*,?\s*)+\s*$")
        .Groups[2].Captures.ToList();
    myList.Dump();
}

public static class EM
{
    public static List<string> ToList( this CaptureCollection value)
    {
        var result = new List<string>();
        foreach( var item in value)
        {
            result.Add( ((Capture) item).Value );
        }
    return result;
    }
} 
```

它有效，但我的主要关注点只是使用正则表达式仅将数字放入字符串数组中。是否有一些简短而甜蜜的事情可以完成同样的事情？

编辑：

我正在使用正则表达式，因为我需要解析如下内容：

```
string a = "deptid = 1, 2, 3, 4, 5, 6, 7";
var myList = Regex.Match(a, 
             @"^\s*(?<field>[A-Za-z0-9]+)\s*(?<op>==?)\s*((\d+)\s*,?\s*)+\s*$")
             .Groups[2].Captures.ToList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T03:26:22.593

而不是用正则表达式编写这段代码，你为什么不尝试使用`LINQ`？

试试这个：

```
List<string> yourList = a.Split(',').Select(sValue => sValue.Trim()).ToList(); 
```

但是如果你想坚持使用数组，那么使用这个：

```
var yourList = a.Split(',').Select(sValue => sValue.Trim()).ToArray(); 
```

# opengl - 在两个着色器之间频繁交换的 OpenGL 性能开销

> ID：16096661
> 
> 赞同：3
> 
> 时间：2013-04-19T03:18:36.627
> 
> 标签：opengl, optimization, glsl, shader

我有一种情况，我有两个特定的着色器：

第一个着色器从场景中的所有对象投射阴影并渲染到单个全屏 8 位阴影纹理。glsl 代码非常短。

第二个着色器对 g 缓冲区执行延迟光照计算，并渲染到单个全屏 32 位纹理缓冲区。它使用了几种全屏纹理（32 位位置、16 位法线、32 位漫反射、8 位镜面反射、8 位阴影）。glsl 代码也很冗长。

如您所见，对于每个灯光，这两个着色器必须随后执行。A 然后 B，A 然后 B，A 然后 B。这会导致大量交换。

我读过着色器交换具有一些相对较高的开销，但我不熟悉 GPU 如何处理仅两个着色器之间的交换。

这两个着色器程序是否会被有效地缓存到不应该成为问题的程度？

我应该组合这两个着色器并使用 glDrawBuffers() 直接输出吗？如果我将它们结合起来，从前一个 g-buffer 照明阶段加载的 5 个纹理将在下一个阴影投射阶段变得陈旧，这会导致任何性能开销吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:05:08.717

> 这两个着色器程序是否会被有效地缓存到不应该成为问题的程度？

问题不在于缓存，而是更改着色器会刷新 GPU 执行管道。管道和分支预测器需要几十个时钟周期才能适应新切换到的着色器。

> 我应该组合这两个着色器并使用 glDrawBuffers() 直接输出吗？

在延迟着色器设置中，您是否可以在没有太多问题的情况下做到这一点？*确实！*

# python - Google App Engine 1.7.6 远程 API 错误

> ID：16096662
> 
> 赞同：0
> 
> 时间：2013-04-19T03:18:36.867
> 
> 标签：python, google-app-engine, remoteapi

在 1.7.6 开发服务器更新之前，我能够使用 /_ah/remote_api 将测试数据上传到我的开发服务器，而无需输入用户名和密码（按两次返回）来完成身份验证过程。自更新以来，无论我输入什么内容，现在都不断要求输入用户名和密码 - 通常说错误的用户名或密码不正确。我目前的目标是 localhost:8080，

```
def auth_func():
  return (raw_input('Username:'), getpass.getpass('Password:'))

remote_api_stub.ConfigureRemoteApi(None, '/_ah/remote_api', auth_func,
                                   'localhost:8080') 
```

虽然有两个新的服务器，包括 API 服务器和管理服务器。有人遇到过这种情况么？如果是这样，你是如何解决的？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T18:55:04.730

显然感谢 Tim - 如果您使用新的 dev_appserver，那么您需要在本地开发服务器上指定电子邮件，例如查看用户名和单个字符作为密码，以便它接受并通过登录阶段。

# jquery - Dynatree/Fancytree 初始化和 Ajax 加载的完整事件？

> ID：16096663
> 
> 赞同：3
> 
> 时间：2013-04-19T03:18:38.343
> 
> 标签：jquery

我需要一种方法来检测树是否已加载，或者新节点的添加是否已以编程方式完成，或者 ajax 的加载是否已完成。到目前为止，我找不到任何回调/事件来执行此操作。

postProcess 事件似乎也没有帮助。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T18:59:29.387

只需将“完整”子句添加到您的 ajax 请求中。它看起来像这样：

```
$("#fileTree").fancytree({
        source : $.ajax({
            type : "GET",
            url : 'http://localhost:8080' + '/MyRoute',
            dataType : 'json',
            complete : function() {
                $("#fileTree").fancytree("getRootNode").sortChildren(null, true);
            }
}) 
```

这里有两个链接可能对您有所帮助： [jQuery AJAX - Do Stuff in Success 或 Complete callbacks？](https://stackoverflow.com/questions/12160482/jquery-ajax-do-stuff-in-success-or-complete-callbacks) [http://api.jquery.com/ajaxcomplete/](http://api.jquery.com/ajaxcomplete/)

# java - 读取文件和拆分信息

> ID：16096666
> 
> 赞同：0
> 
> 时间：2013-04-19T03:19:08.440
> 
> 标签：java, split, readfile

这是我的问题。

```
 (f)Define a method, public String toString(),  that returns a String consisting of the Student object’s admin number, name and average score.

    (h)Define another constructor with the method signature Student(String studentRecord),where studentRecord is of the format given below:   adminNo;name;day/month/year;test1;test2;test3 birthdate
       Example of a given string: 031234F;Michael Tan;01/08/1980;60;70;98

    (i)Break up studentRecord into its constituent elements and use them to initialise the class variables, adminNo, name, birthdate, test1, test2, test3.

    (i) Define a main() method to read a single record from the "student.txt" and **display the admin number, name and average score of the student.** 
```

这是我的代码：

```
 public class Student {

String adminNo;
String name;
GregorianCalendar birthDate;
int test1,test2,test3;

public Student(String adminNo,String name,String birthDate,int test1, int test2, int test3){
    this.adminNo = adminNo;
    this.name = name;
    this.birthDate = MyCalendar.convertDate(birthDate);
    this.test1 = test1;
    this.test2 = test2;
    this.test3 = test3;
}

public Student(String studentRecord){
    Scanner sc = new Scanner(studentRecord);
    sc.useDelimiter(";");
    adminNo = sc.next();
    name = sc.next();
    birthDate = MyCalendar.convertDate(birthDate.toString());
    test1 = sc.nextInt();
    test2 = sc.nextInt();
    test3 = sc.nextInt();
}

public int getAverage(){ 
    return (( test1 + test2 + test3 ) / 3 ) ;
}

public String toString(){
    return (adminNo + " " + name + " " + getAverage());
}

public static void main(String [] args){
    Student s = new Student ("121212A", "Tan Ah Bee", "12/12/92", 67, 72, 79);
    System.out.println(s);

    String fileName = "student.txt";
    try{
        FileReader fr = new FileReader(fileName);
        Scanner sc = new Scanner(fr);

        while(sc.hasNextLine()){
            System.out.println(sc.nextLine());
        }

        fr.close();
    }catch(FileNotFoundException exception){
        System.out.println("File " + fileName + " was not found");
    }catch(IOException exception){
        System.out.println(exception);
    }
} 
```

这是 info int 文本文件的格式：

```
 031234F;Michael Tan;01/08/1980;60;70;98 
```

我设法打印出来：

```
 121212A Tan Ah Bee 72
    031234F;Michael Tan;01/08/1980;60;70;98
    123456J;Abby;12/12/1994;67;78;89 
```

但这就是问题想要的：

```
 121212A Tan Ah Bee 72
    031234F Michael Tan 72
    123456J Abby 72 
```

我错过了什么吗？我只知道那是 toString() 方法，但我不知道如何将它放在 while 循环中。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:02:42.733

你有：

```
while(sc.hasNextLine()){
    System.out.println(sc.nextLine());
} 
```

你似乎需要：

```
 while(sc.hasNextLine()){
        Student stu = new Student(sc.nextLine());
        System.out.println(stu.toString());
    } 
```

上面的代码将为类调用**构造函数**`Student`，该构造函数将分割行并填充其字段。然后您的 toString() 方法将创建一个指定格式的输出字符串。

# c# - 要重新显示网页，网络浏览器需要重新发送信息

> ID：16096668
> 
> 赞同：2
> 
> 时间：2013-04-19T03:19:19.467
> 
> 标签：c#, javascript, jquery, asp.net

当我用户`Window.Location.reload(true)`时，我会收到每个请求的弹出消息。有没有人可以建议我如何解决这个问题？

> 要重新显示网页，网络浏览器需要重新发送信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:21:50.687

这是通过 HTTP POST 发送数据的结果（通常通过提交表单来完成）。您将需要停止使用 POST 或执行中间重定向以删除此消息。

# java - ListSelectionListener 和 CardLayout

> ID：16096672
> 
> 赞同：-1
> 
> 时间：2013-04-19T03:19:52.233
> 
> 标签：java, swing, awt, cardlayout, listselectionlistener

我正在创建一个从文件中读取数据的程序，并将其显示在具有 JList 和 JButtons 的 GUI 上。我正在尝试使用 CardLayout 编写它，以便在从 JList 中选择项目或单击 JButton 时（即下一个、上一个、第一个和最后一个）可以显示适当的 JPanel。我能够成功地从文件中读取数据并将数据显示到 GUI。我遇到了 2 个问题，我尝试在网上搜索答案，但似乎无法弄清楚： 1) 如何让 JPanel 使用 CardLayout 进行切换？2) 当用户单击 JList 中的项目时，如何让数据显示在 GUI 中的文本字段中？JList 确实出现并且我的 ListSelectionListener 正在工作，因为当我单击特定项目时，它将打印到控制台（作为测试）。

如果我注释掉除 1 之外的所有 JPanel，则它会正确显示，但是当我放置所有 JPanel 时，它不会切换。

到目前为止，我的 ListSelectionListener 有这个（作为内部类）：

```
public class CancerSelectionListener implements ListSelectionListener {

    @Override
    public void valueChanged(ListSelectionEvent e) {
       Integer selection = (Integer)(((JList) e.getSource()).getSelectedIndex());
       if(selection == 0) {
           System.out.println("blah"); // works
           // switch to the corresponding JPanel in CardLayout 
       }

    }   
}

String[] tester;
    String teste;

    listModel = new DefaultListModel();

    for(int i = 0; i < 36; i++) {

        tester = _controller.readCancer(i); // reads from the file, this part works!
        teste = tester[0];

        listModel.addElement(teste);

    }

    cancerList = new JList(listModel);
    cancerList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    cancerList.setSelectedIndex(-1);
    cancerList.setVisibleRowCount(5);

    cancerListScroller = new JScrollPane(cancerList);

    CardLayout myCardLayout;
    myCardLayout = new CardLayout();
    mainPanel2.setLayout(myCardLayout);

    myCardLayout.show(mainPanel2, "test");

    CancerPanels.aplPanel apl = new CancerPanels.aplPanel();
    CancerPanels.fcPanels fc = new CancerPanels.fcPanels();
    CancerPanels.vhlsPanels vhls = new CancerPanels.vhlsPanels();
    CancerPanels.pdgPanels pdg = new CancerPanels.pdgPanels();
    CancerPanels.cebpaPanels cebpa = new CancerPanels.cebpaPanels();

    mainPanel2.add(apl.aplReturn(), "test");
    mainPanel2.add(fc.fcReturn());
    mainPanel2.add(vhls.vhlsReturn());
    mainPanel2.add(pdg.pdgReturn());
    mainPanel2.add(cebpa.cebpaReturn()); 
    // I have 37 JPanels that are placed in the JPanel that uses CardLayout but I didn't post all    of them as it would take up lots of space 
```

每个 JPanel 的数据由 CancerPanels 类中的静态内部类填充（仅显示 1，因为每个都非常长！）

```
public class CancerPanels extends CancerGUI {

static JPanel cards;
static CancerController _cons = new CancerController();
static String[] cancerData;
static JScrollPane treatmentsScroller = new JScrollPane(txtTreatments,   JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
static JScrollPane causesScroller = new JScrollPane(txtCauses, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

static JScrollPane symptomsScroller = new JScrollPane(txtSymptoms, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

public static class aplPanel extends JPanel {

    public JPanel aplReturn() {
        treatmentsScroller.setViewportView(txtTreatments);
        txtTreatments.setEditable(false);
        causesScroller.setViewportView(txtCauses);
        txtCauses.setEditable(false);
        symptomsScroller.setViewportView(txtSymptoms);
        txtSymptoms.setEditable(false);
        cards = new JPanel(new GridLayout(6,1));
        cancerData = _cons.readCancer(0);
        resultName.setText(cancerData[0]);
        txtSymptoms.setText(cancerData[1]);
        txtCauses.setText(cancerData[2]);
        txtTreatments.setText(cancerData[3]);
        resultRate.setText(cancerData[4]);
        resultPrognosis.setText(cancerData[5]);
        cards.add(resultName);
        cards.add(symptomsScroller);
        cards.add(causesScroller);
        cards.add(treatmentsScroller);
        cards.add(resultRate);
        cards.add(resultPrognosis); 
        return cards;
    }
} 
```

编辑：

这是我最近的尝试。我可以滚动浏览 JList，但它没有正确显示正确的相应 JPanel（实际上它不显示任何内容，除非我单击最后一个按钮，我不知道为什么该按钮有效）。我成功地将 ItemListener 放置在 JComboBox 上，但最终，我希望 CardLayout 能够正常工作。我们的讲师为我们提供了示例代码供我们使用，但是当我尝试时，JPanels 不会切换（或者如果他们这样做了，它们会被隐藏，不知道为什么）。

我的每个听众都是整个 CancerGUI 类中的公共内部类。

```
public CancerGUI() {
    CancerPanels.aplPanel apl = new CancerPanels.aplPanel();
    CancerPanels.fcPanels fc = new CancerPanels.fcPanels();
    CancerPanels.vhlsPanels vhls = new CancerPanels.vhlsPanels();
    // more than 30 JPanels that I add to the JPanel that uses CardLayout, so I only posted 3
    // each of them uses the GridLayout

mainPanel2 = new JPanel(new CardLayout());

    mainPanel2.add(apl.aplReturn(), "1");
    mainPanel2.add(fc.fcReturn(), "2");
    mainPanel2.add(vhls.vhlsReturn(), "3");

CancerActionButtons _cab = new CancerActionButtons();

   btnNext = new JButton("Next");
    btnPrevious = new JButton("Previous");
    btnFirst = new JButton("First");
    btnLast = new JButton("Last");
    btnClear = new JButton("Clear");

   btnNext.addActionListener(_cab);
   btnPrevious.addActionListener(_cab);

    btnFirst.addActionListener(_cab);
    btnLast.addActionListener(_cab);

CancerItemListener _item = new CancerItemListener(); // this listener works!
    renalC.addItemListener(_item);
    skinC.addItemListener(_item);
    brainC.addItemListener(_item);
    bladderC.addItemListener(_item);
    ovarianC.addItemListener(_item);
    pancC.addItemListener(_item);
    breastC.addItemListener(_item);

String[] tester;
    String teste;

    listModel = new DefaultListModel();

    for(int i = 0; i < 36; i++) {

        tester = _controller.readCancer(i);
        teste = tester[0];

        listModel.addElement(teste);

    }

    cancerList = new JList(listModel);
    cancerList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    cancerList.setSelectedIndex(-1);
    cancerList.setVisibleRowCount(5);
    cancerListScroller = new JScrollPane(cancerList);
    ListSelection _list = new ListSelection();
    cancerList.addListSelectionListener(_list);

    JScrollPane treatmentsScroller = new JScrollPane(txtTreatments, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    treatmentsScroller.setViewportView(txtTreatments);
    JScrollPane causesScroller = new JScrollPane(txtCauses, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    causesScroller.setViewportView(txtCauses);
    JScrollPane symptomsScroller = new JScrollPane(txtSymptoms, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    symptomsScroller.setViewportView(txtSymptoms);

public class ListSelection implements ListSelectionListener {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        String selection = (String)(((JList)e.getSource()).getSelectedValue());
        ((CardLayout) mainPanel2.getLayout()).show(mainPanel2, selection);
        ((CardLayout) mainPanel2.getLayout()).show(mainPanel2, selection);
    }

}

public class CancerActionButtons implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        switch(e.getActionCommand()) {
            case "First":
                ((CardLayout) mainPanel2.getLayout()).first(mainPanel2);    
            cancerCount = 1;                                            
                break;
            case "Last":
                ((CardLayout) mainPanel2.getLayout()).last(mainPanel2);
            cancerCount = 11;
                break;
            case "Previous":
                ((CardLayout) mainPanel2.getLayout()).previous(mainPanel2);
            cancerCount--;
            cancerCount = cancerCount < 1 ? 11 : cancerCount;
                break;
            case "Next":
                ((CardLayout) mainPanel2.getLayout()).next(mainPanel2);
            cancerCount++;
            cancerCount = cancerCount > 11 ? 1 : cancerCount;      //
                break;
        }
        cancerList.setSelectedIndex(cancerCount-1);
    }

}

/**
 * Inner class that responds to any user interaction with a JComboBox for 
 * general types of cancers. 
 */

public class CancerItemListener implements ItemListener {

    @Override
    public void itemStateChanged(ItemEvent e) {
        JPanel showPanel = new JPanel();
        if(e.getStateChange() == ItemEvent.SELECTED) {
            String selection = (String) e.getItem();
            if(selection.equalsIgnoreCase("skin cancer")) {
                CancerPanels.skin skin = new CancerPanels.skin();
                showPanel = skin.skinReturn(); 
            } else if (selection.equalsIgnoreCase("bladder cancer")) {
                CancerPanels.bladder bladder = new CancerPanels.bladder();
                showPanel = bladder.bladderReturn();
            } else if (selection.equalsIgnoreCase("pancreatic cancer")) {
                CancerPanels.pancreatic pancreatic = new CancerPanels.pancreatic();
                showPanel = pancreatic.returnPancreatic();
            } else if (selection.equalsIgnoreCase("renal cancer")) {
                CancerPanels.renal renal = new CancerPanels.renal();
                showPanel = renal.returnRenal();
            } else if (selection.equalsIgnoreCase("ovarian cancer")) {
                CancerPanels.ovarian ovarian = new CancerPanels.ovarian();
                showPanel = ovarian.ovarianReturn();
            } else if (selection.equalsIgnoreCase("breast cancer")) {
                CancerPanels.breast breast = new CancerPanels.breast();
                showPanel = breast.returnBreast();
            } else if (selection.equalsIgnoreCase("brain cancer")) {
                CancerPanels.brain brain = new CancerPanels.brain();
                showPanel = brain.returnBrain();  
            } else if (selection.equalsIgnoreCase("von hippel-lindau syndrome")) {
                CancerPanels.vhlsPanels vhls = new CancerPanels.vhlsPanels();
                showPanel = vhls.vhlsReturn();
            }
            JOptionPane.showMessageDialog(null, showPanel);
        }
    }
} 
```

在添加到 CardLayout 之前制作 JPanel 的单独类：

```
public class CancerPanels extends CancerGUI {

static String name;
static JPanel cards;
static CancerController _cons = new CancerController();
static String[] cancerData;
static JScrollPane treatmentsScroller = new JScrollPane(txtTreatments, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
static JScrollPane causesScroller = new JScrollPane(txtCauses, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

static JScrollPane symptomsScroller = new JScrollPane(txtSymptoms, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

public static class aplPanel extends JPanel {

    public JPanel aplReturn() {
        treatmentsScroller.setViewportView(txtTreatments);
        txtTreatments.setEditable(false);
        causesScroller.setViewportView(txtCauses);
        txtCauses.setEditable(false);
        symptomsScroller.setViewportView(txtSymptoms);
        txtSymptoms.setEditable(false);
        cards = new JPanel(new GridLayout(6,1));
        cancerData = _cons.readCancer(0);
        resultName.setText(cancerData[0]);
        txtSymptoms.setText(cancerData[1]);
        txtCauses.setText(cancerData[2]);
        txtTreatments.setText(cancerData[3]);
        resultRate.setText(cancerData[4]);
        resultPrognosis.setText(cancerData[5]);
        cards.add(resultName);
        cards.add(symptomsScroller);
        cards.add(causesScroller);
        cards.add(treatmentsScroller);
        cards.add(resultRate);
        cards.add(resultPrognosis); 
        return cards;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T03:22:53.157

*   本质上，您要做的是改变一个类的状态。
*   Swing GUI 的实现方式与非 GUI 程序的实现方式没有什么不同：一个类调用另一个类的公共方法。
*   一个关键是进行布线以允许这种情况发生，这意味着一个类的引用需要对另一个类可用，以便可以在适当的引用上调用适当的方法。正如他们所说，魔鬼在细节中。
*   `"1) How do I get the JPanels to switch using CardLayout?"`-- 所以持有 CardLayout 的类可以有公共方法，`next()`，`previous()`，也许`show(SOME_STRING_CONSTANT)`还有其他一些`swapView(...)`方法。
*   `"2) How do I get the data to be displayed in the GUI in text fields when a user clicks an item from the JList?"`-- 这将涉及到侦听器的使用 -- 持有 JTextFields 的类将侦听来自持有 JList 的类的通知，并在收到通知时从列表显示类中获取必要的信息。PropertyChangeListener 在这里可以很好地工作。

例如，

```
public class CancerSelectionListener implements ListSelectionListener {
    private CardDisplayingView cardDisplayingView = null;

    public CancerSelectionListener(CardDisplayingView cardDisplayingView) {
       this.cardDisplayingView = cardDisplayingView;
    }

    @Override
    public void valueChanged(ListSelectionEvent e) {
       int selection = ((JList) e.getSource()).getSelectedIndex();
       if(selection == 0) {
           if (cardDisplayingView != null) {
             cardDisplayingView.swapView(...);
           }
       }

    }   
} 
```

# javascript - 页面加载时的 JavaScript 函数

> ID：16096675
> 
> 赞同：0
> 
> 时间：2013-04-19T03:20:11.553
> 
> 标签：javascript

我需要在页面加载时将 Div id“ **Div01** ”状态更改为“ **highlight ”类。**
请看下面的代码：

**HTML：**

```
<div id="div01"><a href="#" class="btn" onclick="roleActive(this);">user</a></div> 
```

**JS：**

```
var role; function roleActive(obj){ if (role)
role.className = 'btn';
obj.className = 'highlight';
role = obj;} 
```

CSS：

```
.btn{
display:block;
height:25px;
width:100px;
padding:5px 0px 0px 0px;
text-align:center;
font-size:16px;} 

.highlight{
cursor:default;
display:block;
height:25px;
width:100px;
padding:5px 0px 0px 0px;
text-align:center;
font-size:16px;
background-color:#FFF;
border-bottom:4px solid #F0AB00;
color:#000;
text-decoration:underline;}

a.btn:link{background-color:#000;color:#FFF;}
a.btn:visited{background-color:#000;color:#FFF;}
a.btn:hover,active{background-color:#FFF;color:#000;text-decoration:underline; border-bottom:4px solid #F0AB00;} 
```

请帮助我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:22:15.373

尝试

```
<script>
    window.onload = function(){
        roleActive(document.getElementById('div01').children[0]);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:22:33.720

尝试这个

```
window.onload = function(){
    document.getElementById('div01').className = 'highlight'
} 
```

或者

```
<script>
 document.getElementById('div01').className = 'highlight'
</script> 
```

或者

```
<script>
exampleCall();
function exampleCall()
{
 document.getElementById('div01').className = 'highlight'
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T03:22:59.503

```
document.addEventListener('DOMContentLoaded', function(){
    document.getElementById('div01').className = 'highlight';
}, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T03:24:39.617

对于 Javascript：

```
window.onload = function() {
        document.getElementById('div01').className = 'highlight';
} 
```

对于jQuery：

```
$(function() {
  $('#div01').addClass('highlight');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T03:48:10.397

您的 onclick 事件正在向函数发送“this”，但它是 的 onclick 事件，而不是 . 这是你想要的吗？

由于您没有使用 then 的固有点击功能，因此我建议您摆脱它。只需在 上单击事件，因此单击它将触发 roleActive() 并适当地应用类。

# java - 计算单词对Java

> ID：16096682
> 
> 赞同：1
> 
> 时间：2013-04-19T03:21:24.410
> 
> 标签：java, collections, count

我有这个编程作业，这是我们班上第一次用 Java 编写代码。我已经问过我的导师，但没有得到任何帮助。

程序需要计算文件中的单词对，并像这样显示它们：

```
abc:
   hec, 1 
```

这意味着文本文件中只有一次“abc”后跟“hec”。我必须在 java 中使用 Collections Framework。这是我到目前为止所拥有的。

```
 import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.ArrayList;

// By default, this code will get its input data from the Java standard input,
// java.lang.System.in. To allow input to come from a file instead, which can be
// useful when debugging your code, you can provide a file name as the first
// command line argument. When you do this, the input data will come from the
// named file instead. If the input file is in the project directory, you will
// not need to provide any path information.
//
// In BlueJ, specify the command line argument when you call main().
//
// In Eclipse, specify the command line argument in the project's "Run Configuration."

public class Assignment1
{
    // returns an InputStream that gets data from the named file
    private static InputStream getFileInputStream(String fileName)
    {
    InputStream inputStream;

    try {
        inputStream = new FileInputStream(new File(fileName));
    }
    catch (FileNotFoundException e) {       // no file with this name exists
        System.err.println(e.getMessage());
        inputStream = null;
    }
    return inputStream;
    }

    public static void main(String[] args)
    {
    // Create an input stream for reading the data.  The default is
    // System.in (which is the keyboard).  If there is an arg provided
    // on the command line then we'll use the file instead.

    InputStream in = System.in;
    if (args.length >= 1) {
        in = getFileInputStream(args[0]);

    }

    // Now that we know where the data is coming from we'll start processing.  
    // Notice that getFileInputStream could have generated an error and left "in"
    // as null.  We should check that here and avoid trying to process the stream
    // data if there was an error.

    if (in != null) {

        // Using a Scanner object to read one word at a time from the input stream.

        @SuppressWarnings("resource")
        Scanner sc = new Scanner(in);   
        String word;

        System.out.printf("CS261 - Assignment 1 - Matheus Konzen Iser%n%n");

        // Continue getting words until we reach the end of input 
        List<String> inputWords = new ArrayList<String>();
        Map<String, List<String>> result = new HashMap<String, List<String>>();

        while (sc.hasNext()) {  
        word = sc.next();       
        if (!word.equals("---")) {

            // do something with each word in the input
            // replace this line with your code (probably more than one line of code)

            inputWords.add(word);
        }

            for(int i = 0; i < inputWords.size() - 1; i++){

                // Create references to this word and next word:
                String thisWord = inputWords.get(i);
                String nextWord = inputWords.get(i+1);

                // If this word is not in the result Map yet,
                // then add it and create a new empy list for it.
                if(!result.containsKey(thisWord)){
                    result.put(thisWord, new ArrayList<String>());
                }

                // Add nextWord to the list of adjacent words to thisWord:
                result.get(thisWord).add(nextWord);
            }

            //OUTPUT
            for(Entry e : result.entrySet()){
                System.out.println(e.getKey() + ":");

                // Count the number of unique instances in the list:
                Map<String, Integer>count = new HashMap<String, Integer>();
                List<String>words = (List)e.getValue();
                for(String s : words){
                    if(!count.containsKey(s)){
                        count.put(s, 1);
                    }
                    else{
                        count.put(s, count.get(s) + 1);
                    }
                }

                // Print the occurances of following symbols:
                for(Entry f : count.entrySet()){
                    System.out.println("   " + f.getKey() + ", " + f.getValue());
                }
            }

        }
        System.out.printf("%nbye...%n");
    }
    }
} 
```

我现在遇到的问题是它在下面的循环中运行了太多次：

```
if (!word.equals("---")) {

    // do something with each word in the input
    // replace this line with your code (probably more than one line of code)

    inputWords.add(word);
} 
```

有没有人对此有任何想法或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:47:19.670

我觉得这部分令人困惑：

```
while (sc.hasNext()) {  
    word = sc.next();       
    if (!word.equals("---")) {
        // do something with each word in the input
        // replace this line with your code (probably more than one line of code)

        inputWords.add(word);
    }

    for(int i = 0; i < inputWords.size() - 1; i++){ 
```

我想你的意思可能更像是这样的：

```
// Add all words (other than "---") into inputWords
while (sc.hasNext()) {  
    word = sc.next();       
    if (!word.equals("---")) {
        inputWords.add(word);
    }
}

// Now iterate over inputWords and process each word one-by-one
for (int i = 0; i < inputWords.size(); i++) { 
```

看起来您正在尝试首先将所有单词读入`inputWords`然后处理它们，而您的代码在您添加的每个单词之后迭代列表。

另请注意，您在`for`循环中的条件过于保守，因此您会错过最后一句话。删除`- 1`将为您提供每个单词的索引。

# macos - 如何在 OSX 上使用 clang 线程清理程序？

> ID：16096683
> 
> 赞同：5
> 
> 时间：2013-04-19T03:21:28.920
> 
> 标签：macos, clang, thread-sanitizer

我正在尝试`--thread-sanitizer`在 OSX 上使用 clang 选项：

```
$ clang++ -fthread-sanitizer -fpic tsan1.cc
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.3.0
Thread model: posix
[...]
clang -cc1 version 4.2 based upon LLVM 3.2svn default target x86_64-apple-darwin12.3.0
[...]
Undefined symbols for architecture x86_64:
  "___tsan_func_entry", referenced from:
      threadfunc(void*) in tsan1-6f7gbr.o
[...]
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

看起来像一个链接错误。我应该链接一些额外的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T09:07:05.360

Darwin for C++ 尚不支持 ThreadSanitizer。这至少在半年内不太可能改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T12:25:21.893

它已被修复。根据[https://clang.llvm.org/docs/ThreadSanitizer.html](https://clang.llvm.org/docs/ThreadSanitizer.html)

> 以下操作系统支持 ThreadSanitizer：... Darwin arm64, x86_64, ...

我也只是使用它没有任何问题。

# memory - 如何解决导致内存泄漏的 log4j？

> ID：16096685
> 
> 赞同：1
> 
> 时间：2013-04-19T03:21:55.050
> 
> 标签：memory, memory-leaks, log4j, tomcat6, java-6

严重：Web 应用程序创建了一个 ThreadLocal，其键类型为 [org.apache.log4j.helpers.ThreadLocalMap]（值 [org.apache.log4j.helpers.ThreadLocalMap@3ac5b23e]），值类型为 [java.util.Hashtable ]（值 [{userhost=192.168.15.90, userid=127, username=ramzi.abdelsamad}]）但在 Web 应用程序停止时未能将其删除。为防止内存泄漏，已强制删除 ThreadLocal。

突然网络服务器停止，当我检查 catalina.out 中的日志时，这就是我发现的！在寻找问题后，它被告知可能是由 log4j 引起的内存泄漏？？

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:41:24.187

您是否在 Web 应用程序中使用 MDC？

不管怎样，发现了这个[log4J 内存泄漏](https://issues.apache.org/bugzilla/show_bug.cgi?id=50486)

这看起来你是对的！;-)

编辑：您使用的是什么版本的 log4j？发现 1.2.17 应该可以解决这个问题。

# dynamic - primefaces 手风琴，dynamic="true"，最后一个面板是空的？

> ID：16096692
> 
> 赞同：0
> 
> 时间：2013-04-19T03:22:41.727
> 
> 标签：dynamic, primefaces, accordion

我在 WebSphere Web 应用程序中有一个 Primefaces 3.4.2 手风琴。当它不是动态的时候效果很好，但是有很多内容，所以我想让它动态化。

当我设置 dynamic="true" 时，手风琴的最后一个面板是空的，没有内容，所有其他面板仍然正常工作。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:13:45.923

我已经从 3.4.2 升级到 3.5，现在它正在工作（我没有进行任何代码更改）。看起来它必须是 3.4.2 中的错误。

# salesforce - Copy header and detail using custom button

> ID：16096695
> 
> 赞同：1
> 
> 时间：2013-04-19T03:23:05.013
> 
> 标签：salesforce, apex-code

I have a custom object "Order" with detail object "Order Lines". I want to place a custom button on the Quote header called "Create Order" that when clicked will copy the Quote header and detail records and create a corresponding "Order" and "Order Lines" records.

Mimicing the same functionality that is standard when syncing a quote to an opportunity.

I'm wondering what is the best approach to do this? Should the custom button use the ajax toolkit and execute javascript using the onclick event?

Or, would a visualforce page with a controller be a better option for this?

Are there any examples that demonstrate this functionality?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:27:06.443

I'd go with a bit of Apex code. Faster than doing it purely with JavaScript toolkit plus let's face it, S-Controls are thing of the past. There's a chance that if your colleague will have to maintain it in future he'll know Apex but maybe not the JS toolkit.

Now - simple JS button + call to Apex exposed with `webservice` keyword or a visualforce page?. Only you can answer that. Would you like to display the "edit" page, let user change some values and save only afterwards? Are there some statuses on order or line item that have to be "reset" before you save the clone?

As for actual code - best type of clone will dynamically select all (so it'll work also in future when you add new fields). Sadly there's no `SELECT *` syntax in Apex, you need to use describe calls.

Something like this (untested! just to give you an idea)

```
List<Schema.SObjectField> orderFields = Schema.SObjectType.Order__c.fields.getMap().values();
List<Schema.SObjectField> itemFields = Schema.SObjectType.Order_Line__c.fields.getMap().values();

// You might also want to use simple fields.getMap().keyset(), that'll be set of strings
Id orderId = 'a01...';

String orderQuery = 'SELECT ' + String.join(orderFields, ', ') + ' FROM Order__c WHERE Id = :orderId';
Order__c oldOrder = Database.query(orderQuery);
Order__c newOrder = oldOrder.clone(false,true); //options do not retain ID; deep clone

insert newOrder;

String itemsQuery = 'SELECT ' + String.join(itemFields, ', ') + ' FROM Order_Line__c WHERE Order__c = :orderId';
List<Order_Line__c> oldLines = Database.query(itemsQuery);
List<Order_Line__c> newLines = oldLines.deepClone(false);
for(Order_Line__c newLine : newLines){
    newLine.Order__c = newOrder.Id;
}
insert newLines; 
```

Feel free to experiment with it (refactor to a helper method, work on generic sObjects instead of concrete Orders... after all if lookup change is the only thing to do - why not?). Also if you're sure orders will have < 200 lines you can try making the query in one go?

# java - 如何在单个打印语句中返回数组中的多个数字

> ID：16096696
> 
> 赞同：1
> 
> 时间：2013-04-19T03:23:06.627
> 
> 标签：java, arrays, loops

```
public class Main {
public static void main(String[] args) {
    java.util.ArrayList<StudentDataArray> info = new java.util.ArrayList<StudentDataArray>();
    int amountOfPeople = KeyboardInput.promptForInt("Enter how many people you plan to enter into the list.");
    for(int a=0;a<amountOfPeople;a++) {
        try {
        double[] grade = new double[5];
        grade[0]=KeyboardInput.promptForDouble("Enter the First grade");
        grade[1]=KeyboardInput.promptForDouble("Enter the Second grade");
        grade[2]=KeyboardInput.promptForDouble("Enter the Third grade");
        grade[3]=KeyboardInput.promptForDouble("Enter the Fourth grade");
        grade[4]=KeyboardInput.promptForDouble("Enter the Fifth grade");
            info.add(new StudentDataArray(KeyboardInput.promptForString("Enter the First Name"),KeyboardInput.promptForString("Enter the Last Name"),grade,KeyboardInput.promptForChar("Enter the Final Grade")));
        }catch(IllegalArgumentException e){
            System.out.println("Hello World :)");
        }
    }
    for(int b=0;b<amountOfPeople;b++) {
        System.out.printf("%-10s %-10s %-3f %-3s",info.get(b).getFN(),info.get(b).getLN(),info.get(b).getTS(),info.get(b).getFG());
    }
}
}

public class StudentDataArray {
private String firstName;
private String lastName;
private double[] testScore;
private char finalGrade;
public StudentDataArray(String FN, String LN, double[] TS, char FG) {
    firstName = FN;
    lastName = LN;
    testScore = TS;
    finalGrade = FG;
}
public void setFN(String FN) {firstName = FN;};
public void setLN(String LN) {lastName = LN;}
public void setTS(double[] TS) {testScore = TS;}
public void setFG(char FG) {finalGrade = FG;}
public String getFN() {return firstName;};
public String getLN() {return lastName;}
public String getTS() {
    for(int a=0;a<testScore.length;a++) {
        return testScore[a]+"   ";
    }
    return null;
}
public char getFG() {return finalGrade;}
} 
```

大家好，这是我的代码供大家查看。我想要做的是将多个双打返回到代码中的一个位置。它会是什么样子...

伊桑迈克尔 10 20 30 40 50 A

这都显示在一个语句中 [10 20 30 40 50]

由于我使用的是 double[] 我不知道该怎么做。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:29:27.713

您可以使用 for 语句将所有信息连接到一个变量中，然后打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:47:12.287

以下是你如何在一行中做到这一点：

```
String s = Arrays.toString(testScores).replaceAll("[\\[\\],]", ""); 
```

您可以在需要字符串的任何地方使用此表达式（即等号右边的所有内容）。

这样做的关键是使用 [ `Arrays.toString()][1]`，它产生一个类似 的字符串`"[10, 20, 30, 40, 50]"`，然后调用[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)以去除所有标点符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T03:55:32.287

很多答案，但没有一个使用 a `StringBuilder`，建议使用它而不是循环中的连接。它不会在每次迭代中创建新的 String 对象，因此在资源上要容易得多。像这样：

```
public String getTS() {
    StringBuilder sb = new StringBuilder();
    for(int a=0;a<testScore.length;a++) {
        sb.append(testScore[a]+" ");
    }
    return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T03:32:50.807

看来你需要这样的东西：

```
public String getTS() {
    returnString := "";
    for(int a=0;a<testScore.length;a++) {
        returnString += testScore[a]+"   ";
    }
    return returnString;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T03:33:11.200

```
public String getTS() {
yourString:= "";
for(int a=0;a<testScore.length;a++) {
        yourString+= testScore[a]+"   ";
    }
  return ts;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T03:34:02.507

我认为最简单的事情是转换`GetTS()`成这样的东西：

```
public String getTS() {
    String ts = "";
    for(int a=0;a<testScore.length;a++) {
        ts += testScore[a]+"   ";
    }
    return ts;
} 
```

请注意，您在 Main.java 中的格式字符串应更改为`"%-10s %-10s %-3s %-3s"`.

# javascript - 使用 jQuery 删除前导零

> ID：16096699
> 
> 赞同：2
> 
> 时间：2013-04-19T03:23:27.877
> 
> 标签：javascript, jquery

使用 jQuery，我将选择复制到 ul 中以用于移动应用程序。选择选项中的某些值具有前导 0。我在 li 元素中使用自定义属性来模仿选择选项中的值。

当我将值复制到 li:value 中时，它会丢失前导 0。我什至尝试将整个 li 创建为附加到外部 ul 的升字符串。

```
html:
<select id="seltest">
<option value="011111">good bye</option>
</select>
<div id="container"></div>

javascript:
$("#container").append("<ul id='thefilter'></ul>");

$("#seltest option").each(function () {
  var optval = $(this).val();
  var strvar = '<li value=\"' + String(optval) + '\">' + $(this).text() + '</li>';
  alert(strvar);
  $("#thefilter").append(strvar);
  var lastli = $("#thefilter li:last");
  alert(lastli[0].outerHTML);  // now the value has lost the leading 0
}); 
```

这是一个显示示例的小提琴：http: [//jsfiddle.net/richbuff/4RbH9/7/](http://jsfiddle.net/richbuff/4RbH9/7/)

有谁知道如何保留前导0？好像 jQuery 正在修改我的文本。

蒂亚！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T03:33:06.930

浏览器实际上是在执行规范。来自[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/HTML/Element/li)：

`The only allowed value for this attribute is a number, even if the list is displayed with Roman numerals or letters.`

在我几年的 Web 开发中，我从未`value`在列表项上使用过该属性。所以，你们中的一些人可能会发现这个额外的注意事项：

`This attribute was deprecated in HTML4, but reintroduced in HTML5.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:11:59.107

> 我在 li 元素中使用自定义属性

不，你不是。[LI 元素](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-li-element)有一个标准[*值*](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#attr-li-value)属性。

我认为这与 jQuery 没有任何关系（除了它会在 DOM 属性和 HTML 属性之间造成混淆）。在下面的：

```
<ol>
  <li value="06" onclick="alert(this.value)">Show value property
  <li value="06" onclick="alert(this.getAttribute('value'))">Show value attribute
</ol> 
```

IE 和 Firefox 都会返回`6`两个警报。唯一的区别是，在第一种情况下，值是数字类型，而在第二种情况下是字符串（因为[getAttribute](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-666EE0F9)返回一个字符串）。

如果要保留文字值，请在 LI 上使用*data-*属性。

# windows - 批处理文件：将文件复制到所有子文件夹

> ID：16096701
> 
> 赞同：1
> 
> 时间：2013-04-19T03:23:54.313
> 
> 标签：windows, loops, for-loop, batch-file, copy

我正在尝试将 3 个文件复制到文件夹 A1 的所有子文件夹中。我尝试了这样的事情：

```
for %%v in (A1/*.*) do (
    COPY command.bat A1\%%v
    COPY CUS.jar A1\%%v
    COPY input.txt A1\%%v
) 
```

但是，看起来这个 %%v 仅适用于文件而不是子目录... :-(

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:40:15.097

尝试这个：

```
for /d %%v in ("A1\*") do ( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:38:47.317

尝试这个：

```
for /f %%v in ('dir "path_to_A1" /AD /B /ON') do ( 
```

# jakarta-ee - 在 ubuntu 中为 glassfish 服务器设置 jdk 位置

> ID：16096706
> 
> 赞同：0
> 
> 时间：2013-04-19T03:24:09.180
> 
> 标签：jakarta-ee, ubuntu, glassfish, java-ee-6

从 Windows 命令提示符运行 glassfish 服务器时，我遇到了类似的错误

```
org.apache.jasper.JasperException: PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required 
```

`asenv.bat`我通过在 glassfish 服务器文件夹的 config 目录中的文件中添加一行来解决它

```
set AS_JAVA=C:\Program Files\Java\jdk1.7.0_17 
```

现在我在 Ubuntu 上遇到了同样的错误，我需要知道我需要放入`asenv.bat`文件的语法。

我的 JDK 位置是`\home\szlynas\jdk1.6.0_45`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:34:38.193

Bat 文件适用于 Windows 环境，在 Linux 中，您应该对*asenv.conf*文件进行修改。

# postgresql - MyBatis 查询在使用连接时不返回值

> ID：16096707
> 
> 赞同：1
> 
> 时间：2013-04-19T03:24:10.020
> 
> 标签：postgresql, mybatis

这可能是愚蠢的，但我一直无法找到它。我正在使用 MyBatis 3.2.2、PostgreSQL 9.2.2 和 XML 映射，尽管我在注释方面有相同的经验。我设置了一个返回对象列表的简单选择。此配置按预期工作：

```
<select id="getCasesBySite" parameterType="string" resultType="Case">
  select c.* from cases c
</select> 
```

并返回 Case 对象的列表。然而，这不返回任何内容：

```
<select id="getCasesBySite" parameterType="string" resultType="Case">
  select c.* from cases c join siteinfo s on c.siteid = s.id where s.key=#{site}
</select> 
```

我的映射器界面有这个：

```
List<Case> getCasesBySite(@Param("site") String site); 
```

使用连接的版本的调试日志记录是：

```
... ==>  Preparing: select c.* from cases c join siteinfo s on c.siteid = s.id where s.key=?
... ==> Parameters: sw(String) 
```

如果我复制上面的 SQL 并将其粘贴到我的 psql 命令行中（将 ? 替换为 'sw'），我会收到一个结果列表，所以看起来连接查询本身是可以的。

还有什么我应该做的吗？这让我发疯了。我记得在使用 PostgreSQL 时存在区分大小写的问题，但如果这是问题，我不知道如何解决它。

我可以包含更多信息。我只是不确定什么是相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T20:20:08.400

经过多次调试，问题似乎与事务和我们的测试框架有关。我们使用 Unitils 来处理刷新测试数据，我们发现设置这个属性后：

```
DatabaseModule.Transactional.value.default=disabled 
```

在`unitils.properties`文件中，测试都按预期运行。

# c - 根据用户输入和 C 中的模式填充矩阵

> ID：16096708
> 
> 赞同：0
> 
> 时间：2013-04-19T03:24:25.947
> 
> 标签：c, string, matrix, populate

我有一个程序要开发，但我在某个部分遇到了一些困难。我必须阅读一些`t`将要进行的测试（）。之后，我必须读取一些 ( `n`) 列和行来制作方阵² (nxn)。在矩阵实例化之后，程序必须从用户的输入中填充它。用户将键入`.`或。基于这种模式，我必须填充矩阵。用户将键入的每一行都必须包含字符（或） ，并且他将键入 n 次。这将填充矩阵（n 个字符乘 n 行）。你们能帮我一把吗？`b``w``n``.``b``w`

这是我的代码：

```
int main(void)
{
    //vars
    int n = 0, t = 1, x = -1, y = -1, teste = 1;
    int i,j;
    //Start
    scanf(" %d %*c",&t);//scans t
    while (t-- > 0) {
        scanf(" %d", &n);//scans n
        if(n>0 && n < 100){
            int table[n][n];//the matrix n x n
            for (i = 0; (i < n);++i) {//iterator to lines
                char l[n];
                scanf ("%s", l); //scans a line
                for (j = 0; j < n; ++j) {//iterator to colums
        //these ifs are to identfy the input
                   if (l[j] == 'b'){
                        table[i][j]=1;
                    }else if(l[j] == 'w'){
                        table[i][j]=2;
                        x=j;y=i;
                    }else{
                        table[i][j]=0;
                    }
                }
        }
    }
    return 0;
} 
```

我在 Java 中做了完全相同的事情并且它有效。我哪里失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:09:09.093

您的变量`l`不允许有足够的空间在字符串末尾存储空值。因此，您会溢出到其他一些变量中，这可能会影响各种事情。

您可能应该将该行读入一个更大的字符串，并确保它的长度正确。您还应该对每个读取操作进行错误检查；您还应该报告输入中的无效字符。

这段代码对我有用。请注意它回显数据的方式，以便可以查看出了什么问题。错误报告应该是标准错误；我一直很懒。

```
#include <stdio.h>
#include <string.h>

static void dump_board(FILE *fp, const char *tag, int n, int table[n][n])
{
    fprintf(fp, "%s: (%d x %d)\n", tag, n, n);
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n; j++)
        {
            if (table[i][j] == 0)
                putc('=', fp);
            else if (table[i][j] == 1)
                putc('B', fp);
            else if (table[i][j] == 2)
                putc('W', fp);
            else
                putc('?', fp);
        }
        putc('\n', fp);
    }
}

int main(void)
{
    int n = 0, t = 1, x = -1, y = -1;

    if (scanf(" %d %*c", &t) != 1)
    {
        printf("Failed to read t\n");
        return 1;
    }
    printf("%d data sets\n", t);

    while (t-- > 0)
    {
        if (scanf(" %d", &n) != 1)
        {
            printf("Failed to read n\n");
            return 1;
        }

        printf("Size of data set: %d x %d\n", n, n);
        int c;
        while ((c = getchar()) != EOF && c != '\n')
            ;

        if (n > 0 && n < 100)
        {
            int table[n][n];
            for (int i = 0; i < n; i++)
            {
                char line[4096];
                if (fgets(line, sizeof(line), stdin) == 0)
                    break;
                int len = strlen(line);
                if (line[len-1] != '\n')
                {
                    printf("Format error: line too long (%d bytes)\n", len);
                    return 1;
                }
                line[--len] = '\0';
                if (len != n)
                {
                    printf("Format error: line <<%s>> is not length %d\n", line, n);
                    return 1;
                }
                for (int j = 0; j < n; ++j)
                {
                    if (line[j] == 'b')
                        table[i][j] = 1;
                    else if (line[j] == 'w')
                    {
                        table[i][j] = 2;
                        x = j;
                        y = i;
                    }
                    else if (line[j] == '.')
                        table[i][j] = 0;
                    else
                    {
                        printf("Format error: invalid character %c\n", line[j]);
                        return 1;
                    }
                }
            }
            dump_board(stdout, "Input", n, table);
            printf("Last white piece at (%d,%d)\n", x, y);
        }
    }
    return 0;
} 
```

### 输入

```
2x
4
b..w
.bw.
.b.b
w.w.
8
b.w.b.w.
.w.b.w.b
bbwwbbww
b......w
ww....bb
bwb..wbw
bbbbwwww
........ 
```

### 输出

```
2 data sets
Size of data set: 4 x 4
Input: (4 x 4)
B==W
=BW=
=B=B
W=W=
Last white piece at (2,3)
Size of data set: 8 x 8
Input: (8 x 8)
B=W=B=W=
=W=B=W=B
BBWWBBWW
B======W
WW====BB
BWB==WBW
BBBBWWWW
========
Last white piece at (7,6) 
```

# java - 单元格内的 itext-rtf 表

> ID：16096713
> 
> 赞同：0
> 
> 时间：2013-04-19T03:25:48.450
> 
> 标签：java, itext, rtf

我正在使用 itext-rtf 2.1.7 生成一个 RTF 文档。

下面的**writeSectionHeaderTableInACell()**方法的参数**表**将有两列。

 **对于每一列，我需要插入一个新的内部表，其中也包含两列。这个内表将第一列左对齐，第二列右对齐。

但是，下面的代码会导致生成的 RTF 文档中的表损坏。两个内部表应该都在一行上，它们显示为每个内部表的一行。

任何人都知道为什么我们似乎无法在 RTF 文档的单元格中添加内部表吗？谢谢。

```
private static void writeSectionHeaderTableInACell(PdfPTable table) {
  PdfPTable sectionTable1 = new PdfPTable(2);
  Phrase phrase1 = new Phrase("? 1 ?", FontFactory.getFont("MS Mincho", 10, Font.NORMAL));
  Paragraph p1 = new Paragraph(phrase1);
  p1.setAlignment(Element.ALIGN_LEFT);
  PdfPCell cell1 = new PdfPCell(p1);
  sectionTable1.addCell(cell1);
  Phrase phrase2 = new Phrase("2 Chi", FontFactory.getFont("MS Mincho", 10, Font.NORMAL));
  Paragraph p2 = new Paragraph(phrase2);
  p2.setAlignment(Element.ALIGN_RIGHT);
  PdfPCell cell2 = new PdfPCell(p2);
  sectionTable1.addCell(cell2);
  table.addCell(new PdfPCell(sectionTable1));

  PdfPTable sectionTable2 = new PdfPTable(2);
  Phrase phrase3 = new Phrase("Section 1", FontFactory.getFont("Times New Roman", 10, Font.NORMAL));
  Paragraph p3 = new Paragraph(phrase3);
  p3.setAlignment(Element.ALIGN_LEFT);
  PdfPCell cell3 = new PdfPCell(p3);
  sectionTable2.addCell(cell3);
  Phrase phrase4 = new Phrase("2 Eng", FontFactory.getFont("Times New Roman", 10, Font.NORMAL));
  Paragraph p4 = new Paragraph(phrase4);
  p4.setAlignment(Element.ALIGN_RIGHT);
  PdfPCell cell4 = new PdfPCell(p4);
  sectionTable2.addCell(cell4);
  table.addCell(new PdfPCell(sectionTable2));
} 
```**

# asp.net-mvc-4 - MVC4 路由 @Html.ActionLink 和 @Html.RouteLink 产生错误的 url

> ID：16096716
> 
> 赞同：8
> 
> 时间：2013-04-19T03:26:12.357
> 
> 标签：asp.net-mvc-4, url, routes, url-routing

也许有人可以帮助我理解为什么`@Html.ActionLink`并 `@Html.RouteLink` 在某些情况下产生错误的链接。

我有这样声明的路线：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Catalog", // Route name
                "Catalog/{a}/{b}/{c}/{d}/{e}", // URL with parameters
                new { controller = "Catalog", action = "Index", a = UrlParameter.Optional, b = UrlParameter.Optional, c = UrlParameter.Optional, d = UrlParameter.Optional, e = UrlParameter.Optional } // Parameter defaults
            );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

我有我的参数控制器：

```
public ActionResult Index(string a, string b, string c, string d, string e)
        {
        //Do stuff;
        } 
```

我有这样声明的视图`@Html.RouteLink`和视图的案例列表：`@Html.ActionLink`

```
 @Html.ActionLink("ActionLink1","Index", new { a = "a" }, null)
    @Html.ActionLink("ActionLink2","Index", new { a = "a", b = "b" }, null)
    @Html.ActionLink("ActionLink3","Index", new { a = "a", b = "b", c = "c" }, null)
    @Html.ActionLink("ActionLink4","Index", new { a = "a", b = "b", c = "c", d = "d" }, null)
    @Html.ActionLink("ActionLink5","Index", new { a = "a", b = "b", c = "c", d = "d", e = "e" }, null)
    <br/>
    @Html.RouteLink("RouteLink1","Catalog", new { a = "a" })
    @Html.RouteLink("RouteLink2","Catalog", new { a = "a", b = "b" })
    @Html.RouteLink("RouteLink3","Catalog", new { a = "a", b = "b", c = "c" })
    @Html.RouteLink("RouteLink4","Catalog", new { a = "a", b = "b", c = "c", d = "d" })
    @Html.RouteLink("RouteLink5","Catalog", new { a = "a", b = "b", c = "c", d = "d", e = "e" 
}) 
```

## 结果

**当前网址** `http://localhost:2288/Catalog`

`ActionLink1`

*   **实际结果：** `http://localhost:2288/Catalog?a=a`
*   **预期结果：** `http://localhost:2288/Catalog/a`

`RouteLink1`

*   **实际结果：** `http://localhost:2288/Catalog`
*   **预期成绩：** `http://localhost:2288/Catalog/a`

* * *

**当前网址** `http://localhost:2288/Catalog/a`

`ActionLink1`

*   **实际结果：** `http://localhost:2288/Catalog?a=a`
*   **预期成绩：** `http://localhost:2288/Catalog/a`

* * *

**当前网址** `http://localhost:2288/Catalog/a/b`

`ActionLink1`

*   **实际结果：** `http://localhost:2288/Catalog/a/b`
*   **预期成绩：**`http://localhost:2288/Catalog/a`

`RouteLink1`

*   **实际结果：** `http://localhost:2288/Catalog/a/b`
*   **预期成绩：** `http://localhost:2288/Catalog/a`

* * *

**当前网址** `http://localhost:2288/Catalog/a/b/c`

`ActionLink1`

*   **实际结果：** `http://localhost:2288/Catalog/a/b/c`
*   **预期成绩：** `http://localhost:2288/Catalog/a`

`RouteLink1`

*   **实际结果：** `http://localhost:2288/Catalog/a/b/c`
*   **预期成绩：** `http://localhost:2288/Catalog/a`

`ActionLink2`

*   **实际结果：** `http://localhost:2288/Catalog/a/b/c`
*   **预期成绩：** `http://localhost:2288/Catalog/a/b`

`RouteLink2`

*   **实际结果：** `http://localhost:2288/Catalog/a/b/c`
*   **预期成绩：** `http://localhost:2288/Catalog/a/b`

等等...

* * *

**当前网址** `http://localhost:2288/Catalog/a/b/c/d`

ActionLink1、ActionLink2 和 ActionLink3 以及 RouteLink1、RouteLink2 和 RouteLink3 都生成错误的 url。

* * *

**当前网址** `http://localhost:2288/Catalog/a/b/c/d/e`

**所有**ActionLinks 和 RouteLinks（除了 ActionLink5 和 RouteLinks5）都产生了错误的 url。

* * *

我在这里放了一个示例项目：[http ://www.mediafire.com/?gdbatoafgd0kf4w](http://www.mediafire.com/?gdbatoafgd0kf4w)

可能有人可以弄清楚为什么会这样？

那个故事开始于几天前，当时我试图用 构建面包屑`MvcSiteMapProvider`，我得到了相同的链接`MvcSiteMapProvider Breadcrumbs`。在我的研究中，我发现`MvcSiteMapProvider`不会在其他地方引起问题。所以我创建了默认的 MVC4 项目，默认情况下它有这样奇怪的行为。

**更新**

看起来当您使用`@Html.ActionLink`和`@Html.RouteLink`基于当前 url 生成的帮助程序 url 时..但是当`Current url` `http://localhost:2288/Catalog`我得到时仍然不明白为什么：

`http://localhost:2288/Catalog?a=a`而不是`http://localhost:2288/Catalog/a`在`ActionLink`

而`http://localhost:2288/Catalog`不是`http://localhost:2288/Catalog/a`在`RouteLink`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T08:19:37.613

RouteLink 允许您显式指定路由名称。ActionLink 按照路由定义中出现的顺序评估路由。您的第一个路由声明无效，这也是 ActionLink 助手无法捕获它的原因。您的第一个路由定义无效的原因是因为您将`{a}`,`{b}`和route 参数设置为但只有 uri 路径的**LAST**参数（在您的示例中）可以是可选的。`{c}``{d}``UrlParameter.Optional`**`{e}`**

 **由于`RouteLink`helper 允许您明确说明要选择哪条路线，因此您可以将其用作解决方法。**

# php - 在表单上使用while循环提交更新数据库

> ID：16096721
> 
> 赞同：-1
> 
> 时间：2013-04-19T03:26:38.313
> 
> 标签：php, mysql

我正在尝试更新数据库中“已完成”的值，它是一个复选框，因此我想根据数据库中的更改将值更新为 1 或 0，我知道这不是最干净的方法，但是一旦我让它工作，我会清理它！

瑞安

```
<?php
include 'core/init.php';

if(isset($_POST['Submit']))
{
$task_name = $_POST['task_name'];
$completed = $_POST['completed'];

mysql_query("UPDATE `tasks` SET `completed` = '$completed' WHERE `task_name` = $task_name");

}

$deets = $_POST['deets'];
$deets = preg_replace('#[^0-9/]#i', '', $deets);

$tasks = '';
$query = mysql_query('SELECT task_name, task_description, completed FROM tasks WHERE "'.$deets.'" BETWEEN `start_date` AND  `end_date` ');
$num_rows = mysql_num_rows($query);
if($num_rows > 0) {
    $tasks .= '<div id="tasksControl"><button onMouseDown="overlay()">Close</button> <b> ' . $deets . '</b> <br /><br /></div>';

    while ($row = mysql_fetch_array($query)){
        $task_name = $row['task_name'] ;
        $task_description = $row['task_description'];
        $task_completed = $row['completed'];
        $tasks .= '<div id="tasksBody">
                    <form method="post">Completed? <input name="completed" type="checkbox" '.
                    ($task_completed == 1?'checked="checked"':'').
                    ' /><input type="submit" name="submit" value="Update"><br /><br />
                    <b>'.$task_name.'</b><br /><br />'.$task_description.'<hr><br />
                    <input type="hidden" value="$task_name" name="TaskName" /></form></div>';
        }
}
echo $tasks;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:37:51.677

假设已完成的列使用 0 表示未选中和 1 表示选中，您需要更改此行：

```
$completed = $_POST['completed']; 
```

如果未选中该复选框，则 $_POST['completed'] 将为空/空，因为 Web 浏览器不会提交它。

```
$completed = intval($_POST['completed']); 
```

using`intval()`将强制为 1 或 0。

编辑：

你也应该逃避`$task_name`：

```
$task_name = mysql_real_escape_string($_POST['task_name']); 
```

我们在 SQL 中引用：

```
 "UPDATE tasks SET completed = '$completed' WHERE task_name = '$task_name'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:02:38.383

尝试将您的更新查询更改为：

```
mysql_query("UPDATE `tasks` SET `completed` = $completed WHERE `task_name` = $task_name")or die(mysql_error()); 
```

删除变量的单引号 ( `'`) 。`$completed`

# javascript - 在 TypeScript 中为 javascript 文件声明方法：

> ID：16096723
> 
> 赞同：0
> 
> 时间：2013-04-19T03:26:43.187
> 
> 标签：javascript, typescript

我正在尝试导入屏蔽输入 jQuery 插件，并能够在我们的打字稿文件中查看智能感知。据我了解，我需要做的就是创建一个定义文件并使用我的打字稿文件引用所述定义文件。

现在，我只想要一个可以执行以下操作的方法：

```
$("#date").mask("99/99/9999"); 
```

因此，我创建了一个 maskedinput.d.ts 文件，如下所示：

```
declare interface maskedInput extends JQuery{
    mask(string) : void;
 }; 
```

然而，这似乎并没有奏效。在我的 ts 文件中，当我开始输入

```
$('#some-id'). 
```

对于方法掩码，我没有智能感知。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:58:16.637

改为执行此操作（接口打开）：

```
interface JQuery {
    mask(string): void;
} 
```

TypeScript 不会自动将`$('...')`表达式的类型更改为`maskedInput`仅仅因为有一些接口恰好是 extend `JQuery`。

# css - Drupal，CSS，表单提交按钮 - ajax 后样式丢失

> ID：16096725
> 
> 赞同：0
> 
> 时间：2013-04-19T03:27:01.830
> 
> 标签：css, forms, drupal

如何正确设置表单提交按钮的样式，特别是“添加到购物车”？

类是`.form-submit`，id 是`#edit-submit`。

当我使用 id 设置样式时`#edit-submit`，样式会持续到 ajax 更新表单。Submit 按钮看起来与 Drupal 的其余按钮相同。

如果我使用该类来设置样式，那么由于某种原因它只接受按钮的高度，而忽略其余的样式。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:42:20.643

可能是你在 CSS 中有一些冲突。这行得通吗？

```
!important; 
```

例子

```
.your_css_class
{
    height:500px !important;
} 
```

# android - 如何让按钮工作？

> ID：16096726
> 
> 赞同：-1
> 
> 时间：2013-04-19T03:27:02.517
> 
> 标签：android, button, fragment

此代码在我获得事件列表的范围内有效。选择一个并转到详细信息，我可以更新等，然后返回我的列表。第一项成为“添加”按钮，第二项成为“退出”功能。但我想要真正的按钮。

我添加了真实按钮，经过尝试，用于处理真实按钮的代码要么有错误，要么只是崩溃。我的最新是直接从这个站点复制的：

[如何在 Fragments 中使用 XML onClick 处理按钮点击](https://stackoverflow.com/questions/6091194/how-to-handle-button-clicks-using-the-xml-onclick-within-fragments/7969020#7969020)

查看双“****”之间的代码。我怎么了？

我在下面包含了xml；我怀疑问题就在那里。

EventListFragment.java

> ```
> public class EventListFragment extends ListFragment
>                                   implements OnClickListener,
>                                   LoaderCallbacks<Cursor>
>    {
>     private SimpleCursorAdapter mAdapter;
>     List strRecId = new ArrayList();
> 
>     private ListAdapter lstAdapter;
>     private Button btn_Add;
> 
>     List strRecord = new ArrayList(3);
>     List strFields = new ArrayList();
> 
>     @Override
>     public void onCreate(Bundle savedInstanceState)
>        {
>         super.onCreate(savedInstanceState);
>          // View myFragmentView = inflater.inflate(R.layout.event_list);
> 
> //-----------------------------------------------------;
> // ALSO LOOK FOR "INITRUN" BELOW AND COMMENT OUT STATEMENT;
> //   IN TWO PLACES;
> //-------------------------------------------------------; 
> //  BELOW READS FROM DATABASE AND DISPLAYS EVENTNAME;
> //  THEN ALLOWS UPDATE OF THEM ABD INSERT FROM EXISTING;        
> //      Log.d("EventLst","X onCrt: x01 START" ); 
> 
>         String[]  strItems =  new String[]  
>            { 
>             EventProvider.COLUMN_EVENTNAME
>            };
>         Log.d("EventLst","X onCrt: x01strI:" + strItems[0]);          
>         int[] iCnt = new int[]
>            {  
>             R.id.text1
>          };
>         mAdapter =  new SimpleCursorAdapter(getActivity(),R.layout.event_row,
>                     null, strItems, iCnt,  0);
>         Log.d("EventLst","X onCrt: x02 START" );
> 
>         setListAdapter(mAdapter);
>   getLoaderManager().initLoader(0, null, this);
> 
>   Log.d("EventLst","X onCrt: x03 START" );
> 
>        }  //----> backto public void onCreate
> 
> //
> //-------------------------------------------------------
> //      Log.d("EventLst","X onCrt: DONE" ); 
> //---------------------------------------------------------     
> 
>     @Override
>     public void onActivityCreated(Bundle savedInstanceState)
> //*      The activity (not fragment's) onCreate() method returns and calls
> //*       onActivityCreated() callback
>        { 
>   super.onActivityCreated(savedInstanceState);
>   Log.d("EventLst","S onActCrtd");
> //* The ListFragment supports showing a message when the list is empty.  Uses a
> //* value of R.string.loadingmsg - Add to strings.xml
>   setEmptyText(getResources().getString(R.string.loadingmsg));    
>   registerForContextMenu(getListView());
>   setHasOptionsMenu(true);
> 
>   Log.d("EventLst","X onActCrtd" );
>        } 
> 
>     //*---------------------------------------------------------------
>     //*      START EDIT ACTIVITY:    
>             //  user clicked in list, start edit view
>             // startActivity (...) starts edit activity, passing id = n
>             //      where "n" is (record key) id from list
>         @Override
>         public void onListItemClick(ListView l,View V, int position, long id)
>            {
>             super.onListItemClick(l, V, position,  id);
>             Log.d("EventLst","S onLsItmCk" + ";P:" + position + ";I:" + id);
>             long lgRecN = 0;
>     // id is the position in the list of activities,
>     //     we will use it to get the RowId of this record in DB  
>         if (id == 1)
>            {
>            android.os.Process.killProcess(android.os.Process.myPid());
>            }
>         if (id > 0)
>            {
>             String strRecN = (String) strRecId.get((int) id-1);    
>             lgRecN = Long.parseLong(strRecN); 
>            }
>         else
>            {
>             lgRecN = 0;
>            };
>         startActivity(new Intent(getActivity(), EventEditActivity.class)
>               .putExtra(EventProvider.COLUMN_ROWID, lgRecN) );
>         // Log.d("EventLst","X onLsItmCk" + ";I:" + id);       
>        }
> //****************************************************;        
> //****************************************************;    
> //  This was copied precisely from:
> 
> //      https://stackoverflow.com/questions/6091194/how-to-handle-button-clicks-using-
> //          the-xml-onclick-within-fragments/7969020#7969020
> //     then shangrd "StartButton" to  btn_Exit
> // I had errors     
> 
>     //@Override
>     public View onCreateView(LayoutInflater inflater, ViewGroup container,
>                Bundle savedInstanceState)
>        {
>         View v = inflater.inflate(R.layout.event_list, container, false);
>         Log.d("EventLst","S creatrView");
>         Button b = (Button) v.findViewById(R.id.btn_Add);
>         b.setOnClickListener(this);
>         Log.d("EventLst","S onLsItmCk" + v);
>         return v;
>        }
> 
>         @Override
>         public void onClick(View v)
>            {
>             Log.d("EventLst","S onclkBtn" + v);
>            }  
> //**************************************************;    
> //***************************************************;    
>     @Override
>     public void onViewCreated(View view, Bundle savedInstanceState)
>        {
>         super.onViewCreated(view, savedInstanceState);
>         Log.d("EventLst","S onVwCrt");
>       setEmptyText(getResources().getString(R.string.loadingmsg));
>         registerForContextMenu(getListView());
>       Log.d("EventLst","X onVwCrt");
>        } 
> ```

event_list.xml

> ```
> <RelativeLayout
> xmlns:android="http://schemas.android.com/apk/res/android"
> android:layout_width="fill_parent"
> android:layout_height="wrap_content"
> android:name="com.dummies.android.taskreminder.EventListFragment" >
>  <Button  android:id="@+id/btn_Add"
>     android:layout_width="50dp"
>     android:layout_height="30dp"   
>     android:textSize="12dp"
>     android:padding="1dip"
>     android:text="@string/add" />
>   <Button  android:id="@+id/btn_Exit"
>     android:layout_width="50dp"
>     android:layout_height="30dp"
>     android:textSize="12dp"
>     android:padding="1dip"
>     android:layout_marginLeft="5dp"
>     android:layout_toRightOf="@+id/btn_Add" 
>     android:text="@string/exit" />
>   <Button  android:id="@+id/btn_Other"
>     android:layout_width="50dp"
>     android:layout_height="30dp"
>     android:textSize="12dp"
>     android:padding="1dip"
>     android:layout_marginLeft="5dp"
>     android:layout_toRightOf="@+id/btn_Exit" 
>     android:text="@string/other" />
>  <fragment
>     android:name="com.dummies.android.taskreminder.EventListFragment"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:layout_below="@+id/btn_Add"  />
>  </RelativeLayout> 
> ```

event_row.xml

> ```
>  <TextView xmlns:android="http://schemas.android.com/apk/res/android"
>     android:id="@+id/text1"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent" 
>     android:textSize="12dp"
>     android:padding="2dip" /> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:59:02.787

我没有得到你真正想要的东西，但我认为你的按钮点击有问题？如果我是对的。您可以使用其中一种方式。

1-在您的布局中将这个简单的代码添加到您的按钮

```
android:onClick="MyButton" 
```

在你的课堂上添加

```
public void MyButton(View v) {
// you may want to perform your clicks here.
} 
```

2-您可以直接从您的班级使用

```
MyButtonId.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        // you may want to perform your clicks here.

        }
    }); 
```

# qt - Qtablewidget和Qtableview，哪个更适合做下载任务列表？

> ID：16096738
> 
> 赞同：2
> 
> 时间：2013-04-19T03:28:54.960
> 
> 标签：qt, pyqt, pyside

Qtablewidget 和 Qtableview，哪个更适合制作下载任务列表？

我想制作一个像这样的下载任务列表 [http://qt-project.org/doc/qt-4.8/images/widgetdelegate.png](http://qt-project.org/doc/qt-4.8/images/widgetdelegate.png)

1.  第一个问题是：Qtablewidget还是Qtableview，哪个更适合这个工作？

2.  第二个问题是：如何在下载任务列表中绘制进度条？PS如果选择 Qtablewidget ，我知道它有一个 QTableWidget.setCellWidget(row, column, widget)

方法，所以我们可以用它在那里设置QprogressBar。如果选择 Qtableview，我们可以像这里一样使用 Delegate

[http://qt-project.org/doc/qt-4.8/qabstractitemdelegate.html](http://qt-project.org/doc/qt-4.8/qabstractitemdelegate.html)

（也许 QStyleOptionProgressBarV2 会更适合当前的 Qt ）

同样的问题再次出现：哪种方式更合适？

谁能举个小例子？因为 Qt Torrent 示例对于像我这样的新手来说太复杂了。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:32:56.460

Up to me it's very interesting discussion topic. If you look carefully in the documentation you will see that QTableWidget is actually a QTableView with specialised table-oriented functions, default table model, support for widgets in cells out of the box etc. It still has everything which QTableView has if you need some low level customisation. So you really don't have to choose. If you think (and looking on screenshots examples I would agree with that) that QTableWidget can handle most of things you need (like progress bars etc) just take it and go ahead with setCellWidget(...). Since it's QTableView anyway you always have an option to substitute it with your own QTableView implementation with fancy delegates etc. I think in your scenario you you will use very limited amount of QTableWidget specialised functions, so that shouldn't be any problems at all.

Making it short, on your place I would go for QTableWidget.

# php - PHP - 说明我的 SSO 身份验证所需的步骤

> ID：16096742
> 
> 赞同：0
> 
> 时间：2013-04-19T03:29:21.280
> 
> 标签：php, mysql, single-sign-on

我在公司建立了很多内部应用程序。我的编程是在数据库/应用程序级别。我的大多数应用程序多年来一直使用相同的登录/身份验证类。但是，该公司希望一切都通过他们的 SSO 身份验证应用程序。他们向我发送了他们的 SSO 应用程序 URL、他们传递的字段名称、我的站点 actionURL 和我的 appKey。

我所有的应用程序都在同一个域上。我知道我可以将 cookie 设置为在整个域上工作并进行设置。现在我有点卡住了，因为我写了一些非常简单的测试代码。它将用户带到 SSO 服务器并进行身份验证并将其发送回我的 actionURL，这只是我域的根目录。

所以我试图请求一个位于我的代码后面的 URL，它表明我需要进行身份验证，将我传递给 SSO 应用程序，然后我被传递回我的 actionURL。我的 actionURL 需要什么才能让我浏览我的应用程序。

当前代码：

```
session_start();

if ($_POST && isset($_POST['digest']))       
{
    $digest = $_POST["digest"];
    // set the session variables ...

    $_SESSION['username'] = $_POST["firstname"]." ".$_POST["lastname"];
    $_SESSION['firstname'] = $_POST["firstname"];
    $_SESSION['lastname'] = $_POST["lastname"];
    $_SESSION['email'] = $_POST["email"];
    $_SESSION['uid'] = $_POST["uid"];

    // Needed for key
    $uid = $_POST["uid"];
    $time = $_POST["time"];

    // Read the property file with the key and URL  so this won't go into the main code ...
    // this sets $appKey and $safeurl

    require_once("safe_login_properties.php");

    $mykey = "".$uid.$time.$appKey;
    $mydigest = md5($mykey);

    if ($debugthis)    // enable this for some debugging
    {
        $fp = fopen("DebugInfo.txt", "a");
        fprintf($fp, "%s\n", date("H:i:s"));

        foreach($_POST as $p => $v)
        {
            fprintf($fp, "POST: %s: %s\n", $p, $v);
        }
        foreach($_SESSION as $p => $v)
        {
            fprintf($fp, "SESSION: %s: %s\n", $p, $v);
        }

        fprintf($fp, "mykey: %s (uid: %s, time %s, key %s)\n", $mykey, $uid, $time, $appKey);
        fprintf($fp, "posted digest: %s\n", $digest);
        fprintf($fp, "mydigest: %s\n", $mydigest);

        if ($digest == $mydigest)
            fprintf($fp, "Digest match\n");
        else
            fprintf($fp, "***** digest does not match\n");
        fclose($fp);
    }

    if ($digest != $mydigest)
    {
       die("Invalid login - expected digest does not match");
    }

}

if (!isset($_SESSION['username']) || empty($_SESSION['username']))
{
    // Read the property file with the key and URL  so this won't go into the main code ...
    // this sets $appKey and $safeurl
    require_once("safe_login.php");
    header("Location: ".$safeurl);
} 
```

附加信息 - 我所有的应用程序都是基于 mysql 和 php 的。所以我需要把我的mysql片段带进去。我需要一些东西，说是的，您已获得授权，您的用户名已被传递，现在我们将在 mysql 数据库中查找您并使用您相应的行进行权限/访问。那有意义吗？现在试着写那部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:28:51.940

在您的情况下，您的 MySQL 数据库中的用户和 SSO 服务器之间必须存在映射。一个简单的方法是电子邮件地址。更好的方法是 GUID - 全球唯一 ID。不管是什么，当 SSO 服务器调用您的 actionURL（在 SSO 术语中......您的回调 url）时，它应该传递一个唯一的 ID 来识别用户。

获得唯一 ID 后，使用该 ID 从 MySQL 数据库中检索用户。如果他存在，请登录他。

通常，SSO 服务器会创建一个您的应用程序可以看到的 cookie。这应该表明您的用户是否已登录（因此您不必继续返回服务器来验证用户身份）。

高温高压

# java - 如何删除链表中的节点？

> ID：16096745
> 
> 赞同：0
> 
> 时间：2013-04-19T03:30:02.143
> 
> 标签：java

删除节点时替换方法会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:44:19.223

以下逻辑应该起作用：

```
if (position.c > 0) {
    position.c--; 
    if (position.c == 0) {
        // delete entire node
        if (previous == null) {
            // delete head node
            head = position.next;
        } else {
            // delete a node with a predecessor
            previous.next = position.next;
        }
    }
} 
```

请注意，我已经`next`从您的代码中撤消了分配。`position`您所做的只是在（从那时起）使用循环引用终止列表`previous.next == position`。

顺便说一句，您不需要`if`这里的声明：

```
found = true;
if(found==true){
    . . .
} 
```

它可以是：

```
found = true;
. . . 
```

# css - 在一个 LESS 文件中定义变量

> ID：16096747
> 
> 赞同：7
> 
> 时间：2013-04-19T03:30:33.673
> 
> 标签：css, less

我刚刚开始使用 LESS 来简化我的 CSS 内容。我希望能够在一个文件中定义颜色，因此我可以有多种配色方案，只需更改引用的文件即可。

我试过这样的事情：

```
<link rel="stylesheet/less" href="/css/colours.less" />
<link rel="stylesheet/less" href="/css/styles.less" /> 
```

但我在文件中收到“变量未定义”错误`styles.less`。

我可以通过`import "/css/colours.less"`在开头使用来“修复”这个问题`styles.less`，但是我必须对每个 LESS 文件都这样做，这使得更改正在使用的文件变得更加困难。

有没有办法在一个文件中定义变量并在另一个文件中使用它们？`colours.less`或者有什么方法可以在其他文件的开头自动导入文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T03:36:39.490

您应该将您的`.less`文件编译成一个`.css`文件，并在每个页面上包含一次（即`styles.less`编译为`styles.css`）。这样浏览器就没有在每次页面加载时重新编译 CSS 的开销。也`.css`可以缓存文件。

而不是添加：

```
<link href="/css/colours.less" />
<link href="/css/styles.less" />
<link href="/css/forms.less" />
<link href="/css/widgets.less" />
...etc... 
```

它应该是：

```
<link href="/css/styles.css" /> 
```

你`styles.less`应该有：

```
@import 'colours';
@import 'forms';
@import 'widgets';
...etc... 
```

否则，如果您想`colours.less`在多个`.less`样式表中重用，则需要`@import`在每个样式表中使用它们。

* * *

`.less`出于开发目的，我建议使用仅包含变量声明和`@import`语句的单个主文件。这样就很容易找到添加了其他脚本的位置。LESS 使得添加或删除样式表以保持代码井井有条变得非常容易。

例如，`style.less`可能看起来像：

```
// import statements
@import 'core';
@import 'mixins';
@import 'lists';
@import 'buttons';

@import 'forms/form';
@import 'forms/search';
@import 'forms/contact-us';

@import 'modules/module';
@import 'modules/archive';
@import 'modules/events';

// variables
@image-path: '/assets/images/';

@font: Helvetica, Arial, sans-serif;

@black: #000;
@dark-grey: #333;
@grey: #888;
@light-grey: #CCC;
@white: #FFF;
@red: #F00; 
```

这种结构使添加新样式表变得容易，例如在添加新模块时：

```
...
@import 'modules/events';
@import 'modules/foo'; //add another module
... 
```

如果不再使用样式，它还可以很容易地删除样式。如果要删除模块，只需删除语句即可`foo`轻松删除所有`foo`样式。`@import 'modules/foo';`

# jquery - 用于 wordpress 的 Jquery 滑块，随机，带有特色幻灯片，可编辑

> ID：16096750
> 
> 赞同：0
> 
> 时间：2013-04-19T03:30:51.377
> 
> 标签：jquery, wordpress, content-management-system, slider

我一直在搜索具有以下选项的 WP jQuery 滑块：

1.  每次有人登陆页面时都会首先出现默认幻灯片。
2.  幻灯片的其余部分需要随机化。
3.  对于不了解 html/css/js 的用户，需要从管理部分 100% 可编辑。
4.  需要箭头导航+项目符号。

我还没有找到一个可以支持特色默认图像的图像，然后将其余图像随机化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:14:02.563

许多免费和商业插件都可以在网上使用。如果您对为您的网站选择一个出色的插件感到困惑，请检查以下插件：

**Smooth Slider**是一个 WordPress 插件，用于为博客上的精选帖子创建动态幻灯片。Smooth Slider 创建的幻灯片是基于 JavaScript 和文本的，这就是为什么博主和网站所有者将充分受益于搜索引擎优化，因为搜索引擎可以读取文本。链接：[http ://slidervilla.com/smooth-slider/](http://slidervilla.com/smooth-slider/)

**vSlider**是一个基于 jQuery 的 WordPress 图像滑块插件。它是最受欢迎的图像滑块插件之一，下载量超过 50,000。它可以用作标题滑块、类别滑块、帖子滑块、幻灯片或自定义图片库。链接： http: [//www.vibethemes.com/vslider-wordpress-plugin/](http://www.vibethemes.com/vslider-wordpress-plugin/)

**动态内容库：**为最新或精选内容帖子、类别、页面和自定义帖子类型帖子创建动态图像库。链接：[http ://wordpress.org/extend/plugins/dynamic-content-gallery-plugin/](http://wordpress.org/extend/plugins/dynamic-content-gallery-plugin/)

**WP Parallax Content Slider：**具有 CSS3 动画和视差效果的可自定义 JQuery 内容滑块。链接：[http ://wordpress.org/extend/plugins/wp-parallax-content-slider/](http://wordpress.org/extend/plugins/wp-parallax-content-slider/)

**Genesis 响应式滑块：**此插件允许您创建一个简单的响应式滑块，显示特色图像，以及每个帖子的标题和摘录。链接：[http ://wordpress.org/extend/plugins/genesis-responsive-slider/](http://wordpress.org/extend/plugins/genesis-responsive-slider/)

您还可以从[http://codecanyon.net/search?utf8=%E2%9C%93&term=wordpress+slider](http://codecanyon.net/search?utf8=%E2%9C%93&term=wordpress+slider)**购买一些很棒的插件**

也许它可以帮助你。谢谢。

# php - 如何正确地将 ZendFramework 添加到 php.ini 文件中？

> ID：16096752
> 
> 赞同：1
> 
> 时间：2013-04-19T03:31:12.020
> 
> 标签：php, zend-framework

ZendFramework 上传于`C:\phpincludes\ZendFramework`

我将 ZendFramework 库添加到 php.ini 文件中：

```
Windows: "\path1;\path2"
include_path = ".;c:\phpincludes\ZendFramework\library" 
```

然后我在 index.php 的顶部调用这些函数：

```
<?php
require_once('Zend/Mail.php'); 
require_once('Transport/Smtp.php'); 
?> 
```

我收到一条错误消息`require_once(Zend/Mail.php)`：无法打开流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:57:46.700

您的包含路径似乎是正确的。您确定您已经编辑了正确的**php.ini**文件并重新启动了您的 webserver / apache 服务（否则不会应用更改）？

您可以检查 PHP 中的包含路径，以确保使用以下方法正确加载它：

```
echo get_include_path(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:27:32.007

还要检查“.;c:\phpincludes\ZendFramework\library”目录是否具有正确的访问权限。

# python - Python 数组切片——如何实现二维数组切片？

> ID：16096753
> 
> 赞同：1
> 
> 时间：2013-04-19T03:31:24.613
> 
> 标签：python, arrays, slice

我想知道如何在 Python 中实现二维数组切片？

例如，

`arr`是自定义类二维数组的一个实例。

如果我想在这个对象上启用 2D 切片语法，如下所示：

```
arr[:,1:3] #retrieve the 1 and 2 column values of every row 
```

或者

```
arr[,:3] #retrieve the 1 and 2 column values of every row 
```

用法和语法就像 numpy.array。但是我们自己如何才能实现这种功能呢？

**PS：**

我的想法是：

对于第一种情况，该`[:,1:3]`部分就像两个切片的元组

但是，对于第二种情况`[,1:3]`，显得相当神秘。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T03:59:55.180

如果您想了解数组切片的规则，下图可能会有所帮助：

![在此处输入图像描述](https://i.stack.imgur.com/kT7u7.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-03T21:26:22.920

对于读取访问，您需要覆盖该`__getitem__`方法：

```
class ArrayLike(object):
    def __init__(self):
        pass
    def __getitem__(self, arg):
        (rows,cols) = arg # unpack, assumes that we always pass in 2-arguments
        # TODO: parse/interpret the rows/cols parameters,
        # for single indices, they will be integers, for slices, they'll be slice objects
        # here's a dummy implementation as a placeholder 
        return numpy.eye(10)[rows, cols] 
```

一个棘手的问题是`__getitem__`始终只使用一个参数（除了 self），当您将多个逗号分隔的项目放在方括号内时，您实际上提供了一个元组作为`__getitem__`调用的参数；因此需要在函数内部解包这个元组（并可选地验证元组的长度是否合适）。

现在给出`a = ArrayLike()`，你最终得到

*   `a[2,3]`意味着`rows=2`，`cols=3`
*   `a[:3,2]`意味着`rows=slice(None, 3, None)`，`cols=3`

等等; 您必须查看[有关切片对象的文档，](http://docs.python.org/2/library/functions.html#slice)以决定如何使用切片信息从类中提取您需要的数据。

为了使它更像一个 numpy 数组，您还需要覆盖`__setitem__`，以允许分配给元素/切片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T03:39:30.030

`obj[,:3]`不是有效的python，所以它会引发`SyntaxError`- 因此，您的源文件*中不能*有该语法。`numpy`（当您尝试在阵列上使用它时也会失败）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T05:54:04.397

如果它是您自己的课程并且您愿意传入一个字符串，那么这是一个 hack。

[如何覆盖 [] 运算符？](https://stackoverflow.com/questions/1957780/python-overloading-the-operator-getitem-method)

```
class Array(object):

    def __init__(self, m, n):
        """Create junk demo array."""
        self.m = m
        self.n = n
        row = list(range(self.n))
        self.array = map(lambda x:row, range(self.m))

    def __getitem__(self, index_string):
        """Implement slicing/indexing."""

        row_index, _, col_index = index_string.partition(",")

        if row_index == '' or row_index==":":
            row_start = 0
            row_stop = self.m
        elif ':' in row_index:
            row_start, _, row_stop = row_index.partition(":")
            try:
                row_start = int(row_start)
                row_stop = int(row_stop)
            except ValueError:
                print "Bad Data"
        else:
            try:
                row_start = int(row_index)
                row_stop = int(row_index) + 1
            except ValueError:
                print "Bad Data"

        if col_index == '' or col_index == ":":
            col_start = 0
            col_stop = self.n
        elif ':' in col_index:
            col_start, _, col_stop = col_index.partition(":")
            try:
                col_start = int(col_start)
                col_stop = int(col_stop)
            except ValueError:
                print "Bad Data"
        else:
            try:
                col_start = int(col_index)
                col_stop = int(col_index) + 1
            except ValueError:
                print "Bad Data"

        return map(lambda x: self.array[x][col_start:col_stop],
                       range(row_start, row_stop))

    def __str__(self):
        return str(self.array)

    def __repr__(self):
        return str(self.array)

array = Array(4, 5)
print array
out: [[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]

array[",1:3"]
out: [[1, 2], [1, 2], [1, 2], [1, 2]]

array[":,1:3"]
out: [[1, 2], [1, 2], [1, 2], [1, 2]] 
```

# python - 从列表中删除 None 值而不删除 0 值

> ID：16096754
> 
> 赞同：296
> 
> 时间：2013-04-19T03:31:27.597
> 
> 标签：python, list, filter, list-comprehension, nonetype

[这是我开始的来源。](http://docs.python.org/2/library/functions.html#filter)

我的列表

```
L = [0, 23, 234, 89, None, 0, 35, 9] 
```

当我运行这个：

```
L = filter(None, L) 
```

我得到这个结果

```
[23, 234, 89, 35, 9] 
```

但这不是我需要的，我真正需要的是：

```
[0, 23, 234, 89, 0, 35, 9] 
```

因为我正在计算数据的百分位数，而 0 有很大的不同。

如何在不删除 0 值的情况下从列表中删除 None 值？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2013-04-19T03:33:06.840

```
>>> L = [0, 23, 234, 89, None, 0, 35, 9]
>>> [x for x in L if x is not None]
[0, 23, 234, 89, 0, 35, 9] 
```

只是为了好玩，这里是你如何在`filter`不使用`lambda`, 的情况下适应这样做（我不推荐这个代码 - 它只是为了科学目的）

```
>>> from operator import is_not
>>> from functools import partial
>>> L = [0, 23, 234, 89, None, 0, 35, 9]
>>> filter(partial(is_not, None), L)
[0, 23, 234, 89, 0, 35, 9] 
```

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2013-04-19T04:16:12.357

列表[理解](https://docs.python.org/3/glossary.html#term-list-comprehension)可能是最干净的方式：

```
>>> L = [0, 23, 234, 89, None, 0, 35, 9
>>> [x for x in L if x is not None]
[0, 23, 234, 89, 0, 35, 9] 
```

还有一种[函数式编程](https://en.wikipedia.org/wiki/Functional_programming)方法，但涉及更多：

```
>>> from operator import is_not
>>> from functools import partial
>>> L = [0, 23, 234, 89, None, 0, 35, 9]
>>> list(filter(partial(is_not, None), L))
[0, 23, 234, 89, 0, 35, 9] 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-19T03:34:38.307

使用列表推导可以如下完成：

```
l = [i for i in my_list if i is not None] 
```

l 的值为：

```
[0, 23, 234, 89, 0, 35, 9] 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-10-25T07:52:33.830

@jamylak 的回答非常好，但是如果您不想导入几个模块只是为了完成这个简单的任务，请`lambda`就地编写自己的：

```
>>> L = [0, 23, 234, 89, None, 0, 35, 9]
>>> filter(lambda v: v is not None, L)
[0, 23, 234, 89, 0, 35, 9] 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-12-13T03:22:11.373

对于 Python 2.7（请参阅 Raymond 的回答，对于 Python 3 等效）：

想知道“不是无”在python（和其他OO语言）中是否如此普遍，以至于在我的Common.py（我用“from Common import *”导入每个模块）中，我包括了以下几行：

```
def exists(it):
    return (it is not None) 
```

然后要从列表中删除 None 元素，只需执行以下操作：

```
filter(exists, L) 
```

我发现这比相应的列表理解（Raymond 显示为他的 Python 2 版本）更容易阅读。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-06-08T20:35:30.007

**Iteration** vs **Space**，使用可能是一个问题。在不同的情况下，分析可能显示“更快”和/或“内存更少”密集。

```
# first
>>> L = [0, 23, 234, 89, None, 0, 35, 9, ...]
>>> [x for x in L if x is not None]
[0, 23, 234, 89, 0, 35, 9, ...]

# second
>>> L = [0, 23, 234, 89, None, 0, 35, 9]
>>> for i in range(L.count(None)): L.remove(None)
[0, 23, 234, 89, 0, 35, 9, ...] 
```

第**一种**方法（[@jamylak](https://stackoverflow.com/a/16096769/3003133)、[@Raymond Hettinger](https://stackoverflow.com/a/16097112/3003133)和[@Dipto](https://stackoverflow.com/a/16096783/3003133)也建议）在内存中创建一个重复列表，这对于包含少量`None`条目的大型列表可能会占用大量内存。

第二种方法遍历列表**一次**，然后每次都遍历一次，直到`None`到达 a。这可能会占用更少的内存，并且列表会随着时间的推移而变得更小。列表大小的减少可能会加快`None`前面的大量条目，但最坏的情况是如果`None`后面有很多条目。

第二种方法可能总是比第一种方法慢。这并不意味着它是一个无效的考虑。

并行化和就地技术是其他方法，但每种方法在 Python 中都有其自身的复杂性。了解数据和运行时用例以及分析程序是密集操作或大数据的起点。

*在常见情况下，选择任何一种方法都可能无关紧要。它变得更像是一种符号偏好。事实上，在那些不常见的情况下，`numpy`（例如，如果 L 是 numpy.array: `L = L[L != numpy.array(None)`( [from here](https://stackoverflow.com/a/25255015/3003133) )）或者`cython`可能是值得的替代方案，而不是尝试对 Python 优化进行微观管理。*

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-05-22T07:47:19.613

说列表如下

```
iterator = [None, 1, 2, 0, '', None, False, {}, (), []] 
```

这将只返回那些`bool(item) is True`

```
print filter(lambda item: item, iterator)
# [1, 2] 
```

这相当于

```
print [item for item in iterator if item] 
```

只过滤无：

```
print filter(lambda item: item is not None, iterator)
# [1, 2, 0, '', False, {}, (), []] 
```

相当于：

```
print [item for item in iterator if item is not None] 
```

获取所有评估为 False 的项目

```
print filter(lambda item: not item, iterator)
# Will print [None, '', 0, None, False, {}, (), []] 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-01T23:43:41.623

```
from operator import is_not
from functools import partial   

filter_null = partial(filter, partial(is_not, None))

# A test case
L = [1, None, 2, None, 3]
L = list(filter_null(L)) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-07-09T06:07:27.863

```
L = [0, 23, 234, 89, None, 0, 35, 9] 
result = list(filter(lambda x: x is not None, L)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-09-10T13:54:50.097

如果都是列表列表，您可以修改@Raymond先生的答案

`L = [ [None], [123], [None], [151] ] no_none_val = list(filter(None.__ne__, [x[0] for x in L] ) )` 但是对于 python 2

`no_none_val = [x[0] for x in L if x[0] is not None] """ Both returns [123, 151]"""`

<< list_indice[0] 用于 List 中的变量，如果变量不是 None >>

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-10-01T15:27:59.423

如果列表有 NoneType 和 pandas._libs.missing.NAType 对象，则使用：

```
[i for i in lst if pd.notnull(i)] 
```

# c++ - 持有队列的地图：使用 [] 与 .insert

> ID：16096756
> 
> 赞同：0
> 
> 时间：2013-04-19T03:31:29.813
> 
> 标签：c++, multithreading, insert, maps, queue

我正在使用 a `map<int, queue<string>>`，其中`int`是指消息的来源，而 是`queue`保存消息。一个线程将消息推入队列，另一个线程将它们推出队列。

这是一个客户端-服务器程序——当客户端发送消息时，消息被推入队列。

我目前正在使用（伪代码）

```
/*receive message in thread 1*/
map<int, queue<string>> test_map; 
int client_id = 2;
string msg = received_from_client(client_id);
testmap[client_id].push(msg);

/*process message in thread 2*/
string msg_to_process testmap[client_id].front();
test_map[client_id].pop();

if (testmap[client_id].empty())
{
    testmap.erase(client_id);
} 
```

我从这个[问题](https://stackoverflow.com/questions/326062/in-stl-maps-is-it-better-to-use-mapinsert-than)中知道，不同之处在于插入不会覆盖现有的密钥——当我将东西推入队列时这是否适用？使用插入是否更安全，或者我正在做的事情是否`[]`足够？

另外 - 虽然系统在任何时候都*应该*只有一条消息在队列中，但我正在通过使用`map<int, queue>`而不是使用`map<int,string>`.

**编辑**：我也有一个关于多线程的问题 - 当线程 1 尝试插入映射而线程 2 删除键时会发生什么，因为队列是空的（在它处理完消息之后）。这是对此的定量回答，是否使用`[]`或`insert()`帮助使其不再是线程安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:53:27.970

队列没有键或 [] 运算符，因此无法真正回答您的第一个问题。您通过推到后面插入队列。如果那里有元素，它将追随它们。如果有的话，您可以通过从前面弹出东西来读取队列。除此之外，您不会在任何地方阅读或写作。

至于地图，就像你说的，如果它不存在，插入将添加一个新的键值对。它不会覆盖现有的密钥。Find 将找到一个值，如果它已经存在，但如果它不存在则不会插入它。然后 [] 运算符同时执行这两项操作，还允许您更改现有元素。[这里](http://www.cplusplus.com/reference/map/map/operator%5b%5d/)的文档非常好。

需要注意的一件事是，使用地图的 [] 运算符从地图中读取也会使用该键将默认值类型元素插入到地图中，这可能不是您第一次看到它时所期望的。

```
std::map<int, int> myMap;
if(myMap[1] == 0) //[] create's a key-value pair <1,0>
   cout << "This will output";
if(myMap.size() == 1)
   cout << "This too"; 
```

至于线程安全方面，没有任何 STL 容器是基于标准的线程安全的。您需要在代码中添加适当的锁定，以防止您所询问的内容。如果 2 个线程同时尝试从队列中读取和写入，几乎肯定会导致错误。我会在谷歌上搜索关于编写线程安全程序的一般帮助，以了解如何做到这一点。

# ios - 在 iOS6 地图中重置区域中心时发生异常

> ID：16096757
> 
> 赞同：0
> 
> 时间：2013-04-19T03:31:31.910
> 
> 标签：ios, map, mapkit

我在重置地图的中心区域时遇到了这个异常：

```
'NSInvalidArgumentException', reason: 
'Invalid Region <center:+118.11638600, +24.50967900 span:+0.04486573, -0.09506065>' 
```

我设置区域使用以下方法：

```
MKCoordinateRegion adjustedRegion = MKCoordinateRegionMakeWithDistance(_location, _searchRadius, _searchRadius); 
```

`_location`，`searchRadius`正如我在 NSlog 中看到的那样，是`{118.116386 24.509679}, 5000`.

那么这个异常的原因是什么？有什么建议吗？提前致谢！

# jquery - JQuery追加方法不将html添加到页面

> ID：16096761
> 
> 赞同：1
> 
> 时间：2013-04-19T03:32:07.270
> 
> 标签：jquery, validation, model-view-controller, textarea, blur

我正在使用 Ajax/jQuery 加载视图。此视图包含一个包含 jquery 验证的表单。我的问题是如果我尝试提交无效表单，则不会显示错误消息。

该页面中有一个文本区域和一个提交按钮。如果文本区域为空，则触发验证事件并报告错误。文本区域以光标为焦点，但不显示错误消息。当我单击页面上的其他位置或页面外部时，才会显示错误消息。基本上错误消息显示在 textarea 的 onBlur 事件上，尽​​管我没有此 textarea 的任何模糊事件。

有人可以与此相关吗？

我的代码是这样的：

```
errorPosition = $("#frm").validate();

errorPosition.settings.errorPlacement = function (error, element)
{
   $("#errordiv").html(error);
} 
```

只有在 textarea 模糊后才会显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:09:31.800

您可能应该使用该`errorLabelContainer` [选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)而不是`errorPlacement`，并像这样调用它：

```
$("#frm").validate({
    errorLabelContainer:'#errordiv'
}); 
```

这将负责正确隐藏和显示您的错误。

# ruby-on-rails - Rolify的目的是什么？

> ID：16096763
> 
> 赞同：5
> 
> 时间：2013-04-19T03:32:23.157
> 
> 标签：ruby-on-rails, ruby, rolify

嗨，我正在使用 rolify 并且刚刚意识到我实际上并没有充分利用它的全部潜力。

目前我正在我的控制器中做一些事情，比如重新路由用户 if `current_user.has_role? :whatever_role`，并允许用户如果他们有任何其他角色......

有人在 stackoverflow 上问了一个关于 rolify 的问题，当我试图回答时，我意识到我做错了。

现在，这就是我的困惑开始的地方......在 ability.rb 里面我有：

```
user ||= User.new # guest user (not logged in)
if user.has_role? :consumer
  can :manage, Review
else
  can :read, Review
end 
```

现在假设我将消费者角色添加到用户：

```
x=User.last
x.add_role :consumer
# => #<Role id: 10, name: "consumer", resource_id: nil, resource_type: nil, created_at: "2013-04-18 23:00:46", updated_at: "2013-04-18 23:00:46"> 
```

对了，这样就创建了角色。我可以通过以下方式检查：

```
x.has_role? :consumer
=> true 
```

现在我希望这能够为评论提供管理能力......

```
x.has_role? :consumer, Review
=> true 
```

但不适用于其他型号...在这里我尝试产品

```
x.has_role? :consumer, Product
=> true 
```

此外，当我查看“资源角色查询”并尝试查询应用角色以进行评论时，我发现没有应用角色：

```
Review.first.applied_roles
=> [] 
```

有人可以向我解释一下 rolify。谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-19T03:35:07.260

我的回答，从[这个 reddit 帖子中装饰了这个问题：](http://www.reddit.com/r/rails/comments/1cn4ra/can_someone_please_explain_the_abilityrb_file/)

**身份验证**正在建立`User`他们声称的身份。

**授权**是建立一个`User`可以执行给定动作，无论是阅读还是写作，在他们建立了他们的身份之后。

*角色*只是跨用户的常见*授权*`User`模式：可以这样授权*，*也`User`可以这样*授权*。

您在这里缺少的成分是*Permissions*`Role` ：已建立的操作和某些控制器操作之间的关系。

`Roles``User`他们自己不承诺 a可以执行什么操作。请记住——*授权*就是关于行动的。`Roles`概括`User`你正在处理的类型。它们的存在是为了让您不必查询`User`每个`Permissions`. 他们宣称：这`User`是一个`Role`！他们当然必须`Permission`这样做！

有很多类型`Permission`。如果您希望获得足够的*授权* `Users`以能够编辑它们，您可以将它们存储在数据库中，`Roles`如果这些也应该是可配置的，您可以将它们存储在数据库中。或者，如果您`User's` `Roles`足够静态，您可以`Permissions`使用 Ruby 代码提前进行管理：

*   当我想要配置`Roles`and`Permissions`时，即对于您在合同完成时移交给某人的客户端应用程序，我使用自己的自定义模型实现 a`User :has_many Roles`和 a `Role :has_many Permissions`，然后在`before_filter :authorize`我的 中添加一个钩子`ApplicationController`，并在其上编写一个`authorize`方法知道如何克服这些期望，或者为那些坚持手动输入他们希望暴露`actions`给他们不应该访问的东西的东西的 URL 的人呈现 403 页面。

*   当我只想配置`Roles`时，我使用[Ryan Bates 的 CanCan gem](https://github.com/ryanb/cancan)。

*   当我想要预先确定`Roles`and`Permissions`时，我将[Rolify](https://github.com/EppO/rolify)与[Nathan Long 的 Authority](https://github.com/nathanl/authority)`Permissions`结合使用，通过 Authorizer 类获得非常灵活的基于类。

两者都`Roles`可以`Permissions`是基于类的或基于实例的，具体取决于您的用例。比如说，你可以用`rolify`你刚刚发现的能力，决定它`Users`只能`Role`在某些基于实例的情况下发挥作用。或者，考虑到他们试图*采取行动*`Roles`的对象是某种类型，他们`User`可能只能执行一个*行动。*

 *为了探索这些排列，假设一个博客应用程序，遵循公式

a `User`who is a/an `Role` `class/instance`can `action`a/an/all/any/that ( `class/instance`) `Permission`:

*   `Role`班级和`Permission`班级：

    A `User`who is an `Admin`can `delete`any `Post`。

*   `Role`类和`Permission`实例：

    A `User`who is an `Admin`can `edit`all`Posts that they approved to be published`

    `approved_by`如果发布的帖子有一个指向`User`id的字段，这会更容易。（在这种情况下使用[状态机](https://github.com/pluginaweek/state_machine) [gem 。](https://github.com/troessner/transitions)

*   `Role`实例和`Permission`类：

    一个`User`谁`an Author of a Post`可以`comment`在任何`Post`

    请注意，这种情况很少见，这就是我上面提到的没有宝石可以处理这种情况的原因，除了可能管理预定情况的能力，比如`Rolify`和`Authority`结合；或者，如果您必须将此决定传递给您的客户，您自己的定制解决方案。

*   `Role`实例和`Permission`实例：

    一个能做到的`User`人。`an Author of a Post``edit``Post`

TL;博士：

*   `Rolify`仅适用于角色：分组`Users`依据`Permission`：访问控制器操作。你还没有决定你将如何管理`Permissions`。

我希望这有助于您理解在*身份验证*和*授权*`Rolify`的宏伟方案中的地位！*

# actionscript-3 - 如何只为电影剪辑的第二帧提供功能？(AS3)

> ID：16096765
> 
> 赞同：0
> 
> 时间：2013-04-19T03:32:47.440
> 
> 标签：actionscript-3, function, navigation, movieclip

我想创建一个只允许影片剪辑的第二帧允许 SWF 导航的函数。“2button”是原始电影剪辑，而“unlock2”是“2button”第二帧上的不同电影剪辑

我试过了：

```
//test
    public function open(){
        2button.unlock2.addEventListener(MouseEvent.CLICK,clickjump2);
        function clickjump2(event:MouseEvent) {
            gotoAndStop("play2");
        }
    } 
```

对此的任何建议或改进将不胜感激：D！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:18:27.057

尝试这个：

```
function open():void
{
    2button.unlock2.addEventListener(MouseEvent.CLICK,clickjump2);
}

function clickjump2(event:MouseEvent):void
{
    //check if 2button is at frame 2
    if (2button.currentframe==2)
    {
        gotoAndStop("play2");
    }
} 
```

ps：正如 Versper 指出的，不要以数字开头的名字

# asp.net-mvc - ASP.NET MVC - 创建 SAAS 框架

> ID：16096768
> 
> 赞同：2
> 
> 时间：2013-04-19T03:33:06.770
> 
> 标签：asp.net-mvc, iis, saas

我目前有一个 ASP.NET MVC 2 Web 应用程序，并希望增强架构以支持 SAAS 模型。我计划最终构建一些 Web 应用程序，因此想相应地设计系统。

目标是当客户点击以下 URL ***clientxyz.domain.com***时，他们将看到所有订阅应用程序的图像。这本质上是一个带有一堆应用程序图标的网页。一旦客户端单击一个图标，它将导航到以下示例 url **clientxyz.domain.com/application_name**处的实际 Web 应用程序。

我们目前使用 GoDaddy 来托管我们的域，并计划使用基于云的 iLand 服务器来托管我们的应用程序。由于我们软件的性质，我们每年只计划几个新客户。

我有几个问题：

1.  是否可以使用 .Net api 以编程方式动态创建子域。我很确定 GoDaddy 不会让你这样做。那么是否有另一个提供商可以让我通过 C# 创建子域。这可能是错误的方法，甚至可能不需要物理创建客户端子域。相反，我可以使用 IIS/MVC 中的 url 重写来完成此操作？如果我使用重写，它必须满足上面提到的 url 要求。任何建议/链接/示例？

2.  我应该为每个租户/客户创建一个单独的 IIS 网站吗？或者我应该使用 URL 重写并且只拥有一个网站/应用程序池？看起来您可以以编程方式启动 IIS 网站（例如：[http ://www.eggheadcafe.com/tutorials/csharp/d4bba585-b517-4834-8476-ff05b085d86e/iis--create-app-pools-virtual-directories-and -web-sites-c-net.aspx](http://www.eggheadcafe.com/tutorials/csharp/d4bba585-b517-4834-8476-ff05b085d86e/iis--create-app-pools-virtual-directories-and-web-sites-c-net.aspx) )

3.  由于我们在 iLand 上使用虚拟服务器，因此我只需将 GoDaddy 指向 iLand 的名称服务器。

4.  如果可能的话，我想自动化整个新的客户端流程。为此，我必须创建数据库（可能每个租户有一个数据库），填充全局客户端/租户表，在新创建的数据库中创建管理员用户帐户和订阅详细信息，并根据方法创建子域。我错过了什么吗？

提前致谢。

# memory-management - Hyper-V 和虚拟化内存管理

> ID：16096772
> 
> 赞同：1
> 
> 时间：2013-04-19T03:33:53.243
> 
> 标签：memory-management, virtual-machine, hyper-v

管理程序和内存管理

我多年来一直使用虚拟机，从来没有真正遇到过任何问题。我主要使用了 VMWare 的免费单个 ESXi 主机，并且取得了成功。因为我从来没有遇到过任何我从未深入研究过的问题。然而，我一直非常谨慎地加载系统并获得大量备用资源。

我最近购买了一台新服务器，我们决定试一试 Hyper-V，看看效果如何。我们有一个相当小的团队，但使用大量服务器进行测试等。

我的问题与内存有关，以及我需要多少空闲或可用主机才能正常运行。

设置：戴尔服务器 24 核：48GB 内存

当我在 Windows 主机实例中运行 taskmgr 时，我看到以下内容：

物理内存：49139
缓存： 14933
可用：17743
空闲：2982

这些数字究竟意味着什么？免费和可用有什么区别？

我的服务器几乎没有使用任何 CPU 资源，并且运行着 10 台生产服务器，没有一个用户抱怨过服务的速度。

我是否能够运行另一台具有 2GB 内存的服务器，有效地留下 982MB 空闲空间？还是我开始稍微提高我的要求？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:11:15.827

您不应该将主机分区用于 Hyper-V 以外的任何东西（尽管您可以运行安全和基础架构软件，例如管理代理、备份代理和防火墙）。因此，该 2GB 建议假定您不会在父分区中运行任何额外的应用程序或服务器角色。

Hyper-V 不允许您将内存直接分配给主机分区。它基本上使用剩余的任何内存。因此，您必须记住不要分配 2GB 的主机服务器内存，以便它可用于父分区。

[资源](http://technet.microsoft.com/en-us/magazine/hh750394.aspx)

# javascript - 测试指令的模板函数，其中 attrs 在链接函数中定义

> ID：16096775
> 
> 赞同：0
> 
> 时间：2013-04-19T03:34:08.563
> 
> 标签：javascript, angularjs, angularjs-directive

您如何测试 angularjs 指令的模板函数的属性，其中属性同时具有链接函数中定义的函数和角度绑定值？这是指令。

```
var app = angular.module('mmApp', []);
app.directive('mmField', function(){

return {
    'restrict': 'E',
    'priority': 5,
    'replace': true,
    'scope': {
        'path': '@',
        'label': '@',
        'type': '@',
        'editable': '@'
    },
     //this is the template function and this is where labelText() does not evaluate at least not where I test it.
    'template': '<div class="mm-field">' +
        '<label for="{{inputId()}}" ng-show="labelText()">{{labelText()}}</label> ' +
        '</div>',

    'link': function (scope, element, attrs) {
        var query = null;
        //this is where the labelText() function is defined
        scope.labelText = function () {
            var labelAttrValue = (scope.label || attrs['withLabel'] || '');
            // cater for custom labels specified via the label or with-label attribute
            if (labelAttrValue && labelAttrValue.toLowerCase() !== 'true' && labelAttrValue.toLowerCase() !== 'false') {
                return (labelAttrValue || '') + ':';
            } else if (labelAttrValue.toLowerCase() !== 'false' && scope.field) {
                return (scope.field['name'] || 'FIELD_NAME_NOT_DEFINED') + ':';
            } else if (labelAttrValue.toLowerCase() == 'false') {
                return '';
            } else {
                return 'Loading...';
            }
        };
    }
]) 
```

这是指令在 html 页面上的位置。

```
<mm-field with-label editable="false" path="{{rootPath}}.name"></mm-field> 
```

我正在使用 mocha 和 chai 测试套件。这就是我想要测试它的方式。

```
describe('InputId', function () {
    it.only('should generate an ID', function () {
        var element = $($compile('<mm-field with-label="MONKEY" editable="false"                                                                             path="something.name"></mm-field>' +
            '</div>')($scope));
        $scope.$digest();

        expect(element.find('label').attr('ng-show')).to.equal('an evaluated value of  labelText()');
    });
}); 
```

# javascript - 具有多个用户的服务器发送事件

> ID：16096780
> 
> 赞同：3
> 
> 时间：2013-04-19T03:34:22.023
> 
> 标签：javascript, php, html, server-sent-events

我正在尝试使用新的服务器发送事件 API 编写一个聊天程序，但是，我一直无法弄清楚如何向不同的用户发送不同的事件。由于所有代码都发生在一个 PHP 文件中，我不确定仅向每个用户发送某些事件的最佳方式。您可以提供的任何帮助将不胜感激。（我正在使用 PHP 和 Javascript）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:59:33.850

假设以下是您的 sender.php 代码（一个 php 文件）

```
echo "event: ping\n";
$msg1="This is first user";
echo 'data: {"msg": "' . $msg1 . '"}';
echo "\n\n";

echo "event: notify\n";
$msg2="This is second user";
echo 'data: {"msg": "' . $msg2 . '"}';
echo "\n\n"; 
```

第一个用户的javascript代码如下

```
var evtSource = new EventSource("sender.php");
evtSource.addEventListener("ping", function(e) {
var obj = JSON.parse(e.data);
var r_msg = obj.msg; 
```

第二个用户的javascript代码如下

```
var evtSource = new EventSource("sender.php");
evtSource.addEventListener("notify", function(e) {
var obj = JSON.parse(e.data);
var r_msg = obj.msg; 
```

代码解释是

您可以为每个用户分配一个唯一的事件名称，然后从发件人那里您只需将数据发送到该特定用户的事件名称，无论您想要什么。在上面的代码中，第一个用户将只收到发送到 ping 事件的消息，与第二个用户相同，它将收到发送到通知事件的消息。在上面的代码中，事件名称和消息是静态的，但您可以根据您的要求将其设为动态。

希望这会帮助你。

# java - For 循环没有完全完成我的异步任务

> ID：16096781
> 
> 赞同：0
> 
> 时间：2013-04-19T03:34:35.370
> 
> 标签：java, android

我正在下载所有文件。我所做的是 for 循环，不幸的是我的 for 循环没有完成我的异步任务，它继续执行所有循环，无论它是否完成了正在下载的第一个文件。请帮忙。

这是我的 for 循环

```
for (int i = 0; i < id.length; i++) {
            Element e = (Element)nodes.item(i);
            id[i] = ""+CategoriesXMLfunctions.getValue(e, "id");
            name[i] = ""+CategoriesXMLfunctions.getValue(e, "name");
            image[i] = ""+CategoriesXMLfunctions.getValue(e, "image");
            simage[i] = ""+CategoriesXMLfunctions.getValue(e, "simage");
            download[i] = ""+CategoriesXMLfunctions.getValue(e, "download");
            author[i] = ""+CategoriesXMLfunctions.getValue(e, "author");
            genre[i] = ""+CategoriesXMLfunctions.getValue(e, "genre");
            size[i] = ""+CategoriesXMLfunctions.getValue(e, "size");
            price[i] = ""+CategoriesXMLfunctions.getValue(e, "price");
            mylist.add(map);    

        id_all = id[i];
        image_all = image[i];
        dload_all = download[i];
        size_all = size[i];
        name_all = name[i];
        String response = null;
        String resstring = null;
        ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("devid", "devid"));
        String devid=null;

        try {
                devid =  URLEncoder.encode(Global.getMac(), "UTF-8");
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        try {
            String nURL = "http://....url";
            response = CustomHttpClient.executeHttpPost(nURL, postParameters);
            resstring=response.toString();

            String credit = resstring;
            String priiice = price[i];

            float money = Float.parseFloat(credit);
            float pri = Float.parseFloat(priiice);

            if(pri>money){
               final AlertDialog.Builder alert = new AlertDialog.Builder(MainStore.this);
                alert.setMessage("Credits not enough.");
                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        dialog.cancel();
                    }

                });

                alert.show();
            }else{

                File sd = getDir("xml",MODE_PRIVATE);

                  File todel = new File(sd,id[i]+".xml");
                    todel.delete();
                   String filecreat= "/"+id[i]+".xml";
                   File newfil = new File(sd+ filecreat);
                       if(newfil.exists()){
                        todel.delete();
                       }
                   try{
                   if(!newfil.exists()){
                    newfil.createNewFile();
                }}catch(IOException e1){

                   }

                try{
                     FileWriter fileWritter = new FileWriter(newfil);
                                BufferedWriter bufferWritter = new BufferedWriter(fileWritter);
                                bufferWritter.write("<xml>");
                                bufferWritter.write("<books>");
                                bufferWritter.write("<id>"+id[i]+"</id>");
                                bufferWritter.write("<name>"+name[i]+"</name>");
                                bufferWritter.write("<download>"+download[i]+"</download>");
                                bufferWritter.write("<size>"+size[i]+"</size>");
                                bufferWritter.write("<author>"+author[i]+"</author>");
                                bufferWritter.write("<genre>"+genre[i]+"</genre>");
                                bufferWritter.write("<new>0</new>");
                                bufferWritter.write("</books>");
                                bufferWritter.write("</xml>");
                                bufferWritter.close();

                                Toast.makeText(getApplicationContext(), "Downloading...", Toast.LENGTH_LONG).show();    
                        }catch(IOException e1){
                            e1.printStackTrace();
                            Toast.makeText(getApplicationContext(), "error wrting xml "+e1.toString(), Toast.LENGTH_LONG).show();  

                        }   

                        downloadallStarted();
                        downloadallfiles();
                        //checkdownloadall();
                        //downloadallFinished();
            }

        }catch (Exception e1){
             Toast.makeText(getApplicationContext(), "Error in downloadall: " +e1.toString(), Toast.LENGTH_LONG).show();
        }

        } 
```

这是我的异步任务

```
private void startDownloadall() {
         String fileURL = dload_all;
         fileURL = fileURL.replace(" ", "%20");
        new DownloadFileAsync1().execute(fileURL);
        Toast.makeText(getApplicationContext(), "Downloading...start all", Toast.LENGTH_LONG).show();
    }
class DownloadFileAsync1 extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            //showDialog(DIALOG_DOWNLOAD_PROGRESS);
        }

        @Override
        protected String doInBackground(String... aurl) {

            try {
                String fileURL = dload_all;
                fileURL = fileURL.replace(" ", "%20");
                URL u = new URL(fileURL);
                HttpURLConnection c = (HttpURLConnection) u.openConnection();
                c.setRequestMethod("GET");
                c.setDoOutput(true);
                c.connect();

                String PATH = getDir("ebook", MODE_PRIVATE).toString();
                String ebookfile = "";
                //String filename = id[index];
                String filename = id_all;
                if(fileURL.endsWith("pdf"))
                  ebookfile = filename+".pdf";

                else
                  ebookfile = filename+".epub";  
                bookfile = ebookfile;
                Global.setBookfile(bookfile);
                File file = new File(PATH);
                file.mkdirs();
                File outputFile = new File(file, ebookfile);
                FileOutputStream fos = new FileOutputStream(outputFile);

                lenghtOfFilee = c.getContentLength();

                InputStream in = c.getInputStream();
                byte[] buffer = new byte[1024];
                int len1 = 0;
                long total = 0;

                while ((len1 = in.read(buffer)) > 0) {
                    total += len1; //total = total + len1
                    //publishProgress("" + (int)((total*100)/lenghtOfFilee));
                    fos.write(buffer, 0, len1);
                }
                fos.close();
            } catch (Exception e) {
               // Log.d("Downloader", e.getMessage());
            }

            return null;

        }

        protected void onProgressUpdate(String... progress) {
            // Log.d("ANDRO_ASYNC",progress[0]);
             //mProgressDialog.setProgress(Integer.parseInt(progress[0]));
        }

        @Override
        protected void onPostExecute(String unused) {
            Global.setBookfile(bookfile);
            Toast.makeText(getApplicationContext(), "Downloading..."+lenghtOfFilee, Toast.LENGTH_LONG).show();
            checkdownloadall();
            //dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:51:26.913

异步任务在后台线程上运行，因此您可以在非线程安全的函数 doInBackground() 中直接访问变量 dload_all。也许你可以试试：

```
private void startDownloadall() {
     //String fileURL = dload_all;
     //fileURL = fileURL.replace(" ", "%20");
    new DownloadFileAsync1().execute(dload_all, id_all);
    Toast.makeText(getApplicationContext(), "Downloading...start all", Toast.LENGTH_LONG).show();
}
class DownloadFileAsync1 extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {

        try {
            String fileURL = args[0];
            fileURL = fileURL.replace(" ", "%20");
            URL u = new URL(fileURL);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = getDir("ebook", MODE_PRIVATE).toString();
            String ebookfile = "";
            //String filename = id[index];
            String filename = args[1];
            if(fileURL.endsWith("pdf"))
              ebookfile = filename+".pdf";

            else
              ebookfile = filename+".epub";  
            bookfile = ebookfile;
            Global.setBookfile(bookfile);
            File file = new File(PATH);
            file.mkdirs();
            File outputFile = new File(file, ebookfile);
            FileOutputStream fos = new FileOutputStream(outputFile);

            lenghtOfFilee = c.getContentLength();

            InputStream in = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            long total = 0;

            while ((len1 = in.read(buffer)) > 0) {
                total += len1; //total = total + len1
                //publishProgress("" + (int)((total*100)/lenghtOfFilee));
                fos.write(buffer, 0, len1);
            }
            fos.close();
        } catch (Exception e) {
           // Log.d("Downloader", e.getMessage());
        }

        return null;

    }

    protected void onProgressUpdate(String... progress) {
        // Log.d("ANDRO_ASYNC",progress[0]);
         //mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        Global.setBookfile(bookfile);
        Toast.makeText(getApplicationContext(), "Downloading..."+lenghtOfFilee, Toast.LENGTH_LONG).show();
        checkdownloadall();
        //dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

} 
```

# java - 如何使用 TrueZip 压缩文件？

> ID：16096784
> 
> 赞同：0
> 
> 时间：2013-04-19T03:34:41.360
> 
> 标签：java, truezip

我有一个文件，比如说`C:\source.dat`. 我想把它压缩成一个 zip 文件`C:\folder\destination.zip`。

我找不到一个简单的例子，并且 Maven 项目提供的 HelloWorld 并不真正适用于我的情况，因为我不是在编写纯文本文件，所以希望有人能在这方面启发我。

作为参考，示例中提供的代码：

```
@Override
protected int work(String[] args) throws IOException {
    // By default, ZIP files use character set IBM437 to encode entry names
    // whereas JAR files use UTF-8.
    // This can be changed by configuring the respective archive driver,
    // see Javadoc for TApplication.setup().
    final Writer writer = new TFileWriter(
            new TFile("archive.zip/dir/HälloWörld.txt"));
    try {
        writer.write("Hello world!\n");
    } finally {
        writer.close();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:34:33.813

就这么简单：

```
new TFile("source.dat").cp(new TFile("destination.zip/source.dat")); 
```

有关更多信息，请参阅位于[http://truezip.java.net/apidocs/de/schlichtherle/truezip/file/TFile.html](http://truezip.java.net/apidocs/de/schlichtherle/truezip/file/TFile.html)的 TFile 类的 Javadoc 。

您可能还想尝试在[http://truezip.java.net/kick-start/index.html](http://truezip.java.net/kick-start/index.html)中介绍的 TrueZIP Archetype File* 。原型会生成许多示例程序，您应该探索这些示例程序以了解 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:38:31.547

这是一件直截了当的事情。

采用

1\. **ZipOutputStream——**这个java类这个类实现了一个输出流过滤器，用于以ZIP文件格式写入文件。包括对压缩和未压缩条目的支持。

**官方文档**

[http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)

2\. **ZipEntry——**这个类用来表示一个ZIP文件条目。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html)

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class ConverToZip {

    public static void main(String[] args) {
        // Take a buffer
        byte[] buffer = new byte[1024];

        try {

            // Create object of FileOutputStream

            FileOutputStream fos = new FileOutputStream("C:\\folder\\destination.zip.");

            // Get ZipOutstreamObject Object
            ZipOutputStream zos = new ZipOutputStream(fos);

            ZipEntry ze = new ZipEntry("source.dat");
            zos.putNextEntry(ze);
            FileInputStream in = new FileInputStream("C:\\source.dat");

            int len;
            while ((len = in .read(buffer)) > 0) {
                zos.write(buffer, 0, len);
            }

            in .close();
            zos.closeEntry();

            //remember close it
            zos.close();

            System.out.println("Done");

        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

# php - 用于从 Android 应用程序获取表单数据的 PHP 脚本

> ID：16096785
> 
> 赞同：0
> 
> 时间：2013-04-19T03:35:00.497
> 
> 标签：php, android, forms, post

我正在尝试在我的 Android 应用程序上构建一个基本表单，该表单接收用户的姓名、号码和电子邮件地址并将其发送到我的网站。我在服务器端有一个基本的 php 脚本，用于将这些详细信息存储到一个简单的 csv 文件中。将详细信息发送到服务器的 Android 代码：

```
private void sendCredentials(String name, String number, String emailID) {

//code to send to server should begin here.
        HttpClient hc = new DefaultHttpClient();
        HttpPost hp = new HttpPost("http://www.mywebsite.com/takeDetails.php");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("name", name));
            nameValuePairs.add(new BasicNameValuePair("number", number));
            nameValuePairs.add(new BasicNameValuePair("email", emailID));
            hp.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            // Execute HTTP Post Request
            HttpResponse response = hc.execute(hp);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
} 
```

在服务器端，php 脚本：

```
<?php

 $filename="userCredentials.txt";
 $name = $_POST['name'];
 $number = $_POST['number'];
 $email = $_POST['emailID'];
 $fp = fopen($filename, "a");
 $str = "new," . $name . "," . $number . "," $email . "n";
 fwrite($fp, $str);
 fclose($fp);
 $msg = "<h1> Your data has been saved. </h1>";
 echo $msg; ?> 
```

我的问题：
在我网站的文件管理器中，没有创建名为 userCredentials.txt 的文件。

我的问题：
1\. 为什么没有创建 userCredentials.txt？
2.我以前从未在PHP中做过任何工作，那么上面的代码片段是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:39:37.693

连接时，您忘记了变量`.`前的（点） 。`$email`它适当地引起了`PARSE_ERROR`. 所以跳过了脚本。

改变：

```
$str = "new," . $name . "," . $number . "," $email . "n"; 
```

至：

```
$str = "new," . $name . "," . $number . "," . $email . "n"; 
```

* * *

如果要`\n`在行尾添加换行符，`PHP_EOL`则应`"n"`在`$str`.

# visual-studio-2012 - Entity Framework 5 和 Amazon RDS -“底层提供商在打开时失败。”

> ID：16096786
> 
> 赞同：3
> 
> 时间：2013-04-19T03:35:00.673
> 
> 标签：visual-studio-2012, amazon-web-services, entity-framework-5, sql-server-2012, amazon-rds

我有一个 C#/Entity Framework Web 应用程序在本地 SQL 2012 db 上运行良好。我将数据库复制到一个新的 RDS 实例，并且可以通过 Visual Studio 和 SQL Server Management Studio 访问数据库。

我有一个单元测试，它对用户进行身份验证，然后尝试使用实体框架调用——dataContext.SaveChanges() 在表中插入一条记录。

我收到以下错误：

```
{"The underlying provider failed on Open."}
{"No such host is known"}
{"A network-related or instance-specific error occurred while establishing a connection to SQL Server. 
The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections.
(provider: TCP Provider, error: 0 - No such host is known.)"} 
```

我整天在网上寻找答案，到目前为止，我发现的任何建议都没有成功：

*   端口 1433 已打开，我可以通过 Telnet 访问入口点
*   我的 IP 地址包含在默认安全组的 CIDR/IP 范围内。
*   一旦我尝试在数据上下文上打开连接，就会发生错误。
*   db 服务器配置为接受远程连接。
*   db 服务器配置为使用混合身份验证（Windows 和 SQL Server）。

实体框架连接字符串

```
connectionString = "metadata=res://*/MyDb.csdl|res://*/MyDb.ssdl|res://*/MyDb.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=MyAwsEntryPoint;Initial Catalog=MyDb;User ID=MyUser;Password=MyPassword;Persist Security Info=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" 
```

标准数据库连接字符串

```
connectionString = "Data Source=MyAwsEntryPoint,1433;Initial Catalog=MyDb;User ID=MyUser;Password=MyPassword;Persist Security Info=True;Application Name=MyAppName;" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T03:19:04.220

问题出在连接字符串中。具体来说，我在那里有“应用程序名称”和“应用程序”属性。一旦我删除了这些，它就起作用了。

坏的：

```
<add name="MyDbEntities" connectionString="metadata=res://*/MyDb.csdl|res://*/MyDb.ssdl|res://*/MyDb.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=MyDbServer;Initial Catalog=MyDb;Persist Security Info=True;User ID=MyDb;Password=MyPassword;Application Name=MyDb.API.Models;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

好的：

```
<add name="MyDbEntities" connectionString="metadata=res://*/MyDb.csdl|res://*/MyDb.ssdl|res://*/MyDb.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=MyDbServer;Initial Catalog=MyDb;Persist Security Info=True;User ID=MyDb;Password=MyPassword;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

# objective-c - NSNumber stringValue 与 NSNumber 值不同

> ID：16096789
> 
> 赞同：2
> 
> 时间：2013-04-19T03:35:03.010
> 
> 标签：objective-c, nsnumber, nsnumberformatter

我在转换`NSNumber`为字符串和字符串到`NSNumber`.

这是一个示例问题：

```
NSString *stringValue = @"9.2";
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
NSLog(@"stringvalue:%@",[[formatter numberFromString: stringValue] stringValue]); 
```

输出将是：

```
stringvalue:9.199999999999999 
```

我需要检索原始值，在示例中应该是`9.2`. 相反，当原始字符串是时`9.4`，输出仍然是`9.4`. 你知道如何在`NSNumber`不做任何事情的情况下检索原始字符串值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T04:03:57.807

您发现浮点数并不总是能准确表示。有很多关于此类问题的帖子。

如果您需要返回原始字符串，则将原始字符串保留为您的数据，仅在需要执行计算时转换为数字。

你可能想调查一下`NSDecimalNumber`。这可能更适合您的需求。

```
NSString *numStr = @"9.2";
NSDecimalNumber *decNum = [NSDecimalNumber decimalNumberWithString:numStr];
NSString *newStr = [decNum stringValue];
NSLog(@"decNum = %@, newStr = %@", decNum, newStr); 
```

这给出`9.2`了两个值。

# javascript - 如何使用 JQuery 动态创建输入元素来实现 keyup 功能？

> ID：16096791
> 
> 赞同：4
> 
> 时间：2013-04-19T03:35:07.870
> 
> 标签：javascript, jquery

我无法弄清楚为什么以下代码不起作用。 [JSFIDDLE 链接](http://jsfiddle.net/JpwpM/1/)

```
$(document).ready(function () {
    addInput();
});

var limit = 30;
function addInput() {
    var numberOfRows = $("#shipping tr").size();
    var id = numberOfRows;
    if (numberOfRows == limit) {
        alert("You have reached the limit of adding " + limit + " inputs");
    } else {
        $('#shipping').append('<tr id="rate' + id + '"></tr>');
        $('tr#rate' + id).append('<td></td>');
        $('tr#rate' + id).append('<td><input type="text" name="rate" /></td>');
    }
    $('input[name=rate]').on('keyup', 'input', function () {
        alert('YAY');
        return false;
    });
} 
```

我正在尝试为我动态添加的输入分配一个 keyup 函数。

预期输出：耶！在弹出框内

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T03:41:08.940

将 keyup 事件处理程序附加到 shipping 表，事件将从`input[name="rate"]`to shipping 表冒泡：

```
$('#shipping').on('keyup', 'input[name="rate"]', function () {
    alert('YAY');
    return false;
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/JpwpM/6/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T03:36:42.370

您需要添加委托，`document`因为它已添加到`document`.

**例子**

```
$(document).on('keyup', 'input[name="rate"]', function () {
    alert('YAY ');
}); 
```

### **[`Working Demo`](http://jsfiddle.net/JpwpM/3/)**

# performance - LINQ with Group, Join and Where Easy in SQL 不在 LINQ 中？

> ID：16096792
> 
> 赞同：1
> 
> 时间：2013-04-19T03:35:29.570
> 
> 标签：performance, linq, entity-framework, linq-to-sql

我很难理解如何将 SQL 转换为 LINQ。我想做以下事情，但不知道如何让 Group By 工作

```
var query = from s in Supplier
            join o in Offers on s.Supp_ID equals o.Supp_ID
            join p in Product on o.Prod_ID equals p.Prod_ID
            where s.City == "Chicago"
            group s by s.City into Results
            select new { Name = Results.Name }; 
```

我只需要做一些简单的事情，比如显示这个简单查询的产品名称，group by 如何使用连接和 where？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:43:34.393

您还没有提供课程，所以我**假设**它们如下所示：

```
 public class Supplier
    {
        public int SupplierID { get; set; }

        public string SuppierName { get; set; }

        public string City { get; set; }
    }

    public class Product
    {
        public int ProductID { get; set; }

        public string ProductName { get; set; }
    }

    public class Offer
    {
        public int SupplierID { get; set; }

        public int ProductID { get; set; }
    } 
```

然后我添加了*测试*数据：

```
 List<Supplier> supplierList = new List<Supplier>()
                                 {
                                     new Supplier() { SupplierID = 1, SuppierName = "FirstCompany", City = "Chicago"},
                                     new Supplier() { SupplierID = 2, SuppierName = "SecondCompany", City = "Chicago"},
                                     new Supplier() { SupplierID = 3, SuppierName = "ThirdCompany", City = "Chicago"},
                                 };

    List<Product> productList = new List<Product>()
                                {
                                    new Product() { ProductID = 1, ProductName = "FirstProduct" },
                                    new Product() { ProductID = 2, ProductName = "SecondProduct" },
                                    new Product() { ProductID = 3, ProductName = "ThirdProduct" }
                                };

    List<Offer> offerList = new List<Offer>()
                             {
                                 new Offer() { SupplierID = 1, ProductID = 2},
                                 new Offer() { SupplierID = 2, ProductID = 1},
                                 new Offer() { SupplierID = 2, ProductID = 3}
                             }; 
```

如果您想显示提供了哪些产品的供应商的名称，那么您的 LINQ 查询应该是这样的：

```
 IEnumerable<string> result = from supplier in supplierList
                                 join offer in offerList on supplier.SupplierID equals offer.SupplierID
                                 join product in productList on offer.ProductID equals product.ProductID
                                 where supplier.City == "Chicago"
                                 group supplier by supplier.SuppierName into g
                                 select g.Key; 
```

您可以查看是否选择了正确的名称：

```
 foreach (string supplierName in result)
    {
        Console.WriteLine(supplierName);
    } 
```

它必须给出以下结果：

**第一公司**

**第二公司**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:55:43.123

你可以试试这个：

```
 var query = from s in Supplier
                    join o in Offers on s.Supp_ID equals o.Supp_ID
                    join p in Product on o.Prod_ID equals p.Prod_ID
                    where s.City == "Chicago"
                    group s 
                    by new {s.City, s.Name} //added this
                    into Results
                    select new { Name = Results.Key.Name }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:01:11.213

您将`s`（供应商）按分组`s.City`。这样做的结果是`IGrouping<City, Supplier>`. 即仅在分组后触手可及：对于每个城市，您都会获得一个`City`供应商（顺便说一句，这将乘以连接数）。`Supplier``IEnumerable<Supplier>`

由于您也有`where s.City == "Chicago"`按城市分组的条件是没有用的。只有一个城市。所以我认为你也可以这样做：

```
from s in Supplier
join o in Offers on s.Supp_ID equals o.Supp_ID
join p in Product on o.Prod_ID equals p.Prod_ID
where s.City == "Chicago"
select new { 
                City = s.City.Name, 
                Supplier = s.Name,
                Product = p.Name,
                ...
            }; 
```

# javascript - $(element).append() 和 element.insertAdjacentHTML 有什么区别

> ID：16096796
> 
> 赞同：4
> 
> 时间：2013-04-19T03:35:43.837
> 
> 标签：javascript, jquery, html, dom

哪些性能更​​好？

多姆

```
 element.insertAdjacentHTML('afterend', '<div id="two">two</div>'); 
```

jQuery

```
 $(element).append('<div id="two">two</div>') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T04:20:44.350

好吧，除非您的目标是早于`Chrome 1.0`, `Firefox 8.0`, `IE 4.0`, `Opera 7.0`, or `Safari 4.0`，否则使用 是安全的`insertAdjacentHTML`。jQuery*可以*解决浏览器之间可能发生的任何不一致，但它也需要一个完整的库来完成这一操作。如果您已经在使用 jQuery，请坚持使用 jQuery 方法。如果您不使用 jQuery，并且想知道仅针对这种方法开始使用它是否有益，那么请不要打扰。

就“更好”而言，就像我说的那样，两者都应该在浏览器之间保持一致/可靠，但`insertAdjacentHTML`它是一种直截了当且不需要额外代码（如 jQuery 使用）的本机 DOM 方法......意思是应该“更快”。

`.append()`接受多种类型的参数（HTML 字符串、DOM 元素、jQuery 对象，甚至是包含这些东西的数组/对象字面量）……在内部，`.append()`使用`Element.appendChild`. `insertAdjacentHTML`只接受 HTML 字符串。

基于此，它可能会或可能不会影响您的决定。

**参考：**

*   `element.insertAdjacentHTML()`- [https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)
*   `$.append()`- [http://api.jquery.com/append/](http://api.jquery.com/append/)

# javascript - 验证特定输入值

> ID：16096803
> 
> 赞同：0
> 
> 时间：2013-04-19T03:36:45.857
> 
> 标签：javascript, validation, webforms, conditional, conditional-statements

首先，感谢任何人对此的帮助。我有一个输入 ID #Mailer_Code。我想根据这个邮件代码值是否与用户的值匹配来提交一个特定的值，并根据这个值是否有效创建2个不同的ID。

笼统：

编号为 1234；如果 Mailer_Code 是 yourock，则 ContactID 是 DWID 如果 Mailer_Code 不是 yourock，则 ContactID 是 WWID

如果“yourock”是某种逗号分隔的列表，我将非常感激，因此 Mailer_Code 可以是任何指定的值。IE。#Mailer_Code = "yourock, or yourawesome, or supercool, etc." （不区分大小写）

此外，如果 #Mailer_Code 不是允许值列表，它只会返回“none”和 WW1234 的 #Mailer_Code。

到目前为止，我在这里：

```
if ( $('#Mailer_Code').val = "yourock" ) { 
contactSource = "DW";
mailer_true_false = "true";
}
else { 
contactSource = "WW";
mailer_true_false = "false"; 
$("#Mailer_Code").val('0');
} 
```

任何帮助深表感谢。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:15:21.163

以下内容应该可以帮助您入门。

请注意，我将它们添加到数组中，而不是逗号分隔的有效值列表。jQuery 有一个非常有用的数组函数`inArray`，它使检查值变得简单。

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
    <div>
        <span id="Mailer_Code">yourock</span>
        <span id="Id">1234</span>
    </div>
    <span id="ContactId"></span>

    <script type="text/javascript">
        var arr = [ "yourock", "youareawesome", "youarethebest" ];
        var inListPrefix = "DW";
        var outListPrefix = "WW";
        var mailerCode = $("#Mailer_Code").text();
        var pre = "";

        if (jQuery.inArray(mailerCode, arr) >= 0)
        {
            pre = inListPrefix;
        }
        else
        {
            pre = outListPrefix;
            $("#Mailer_Code").text("none");
        }

        $("#ContactId").text(pre + $("#Id").text());

    </script>
</body>
</html> 
```

# ruby - 带有 rand() 的数组在本地工作，但在 heroku 上不工作

> ID：16096804
> 
> 赞同：0
> 
> 时间：2013-04-19T03:36:57.447
> 
> 标签：ruby, heroku, sinatra

以下在本地工作：

```
require 'sinatra'

get '/rand' do
  ["one", "two", "three"][rand(0..2)]
end 
```

但是，在 heroku 上，我得到一个`Internal Server Error`.

有趣的是，这有效：

```
get '/rand' do
  ["one", "two", "three"][rand(2) - 1]
end 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:39:09.080

确保您在 heroku 和本地开发机器上使用相同版本的 ruby​​：

`ruby -v`在本地和 heroku 上运行：`heroku run 'ruby -v'`

然后，通过添加`ruby "1.9.3"`到您的 Gemfile 来设置 ruby​​ heroku 使用的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:33:02.320

原因是方法 rand 仅在（我相信） 1.9.3 之后才开始接受范围值。Heroku 使用 Ruby 1.9.1。您可以通过查看 heroku 日志来验证这一点。您只需要设计一种使用整数值而不是范围值的方法。

# jquery - 无限的ajax滚动非自动

> ID：16096806
> 
> 赞同：0
> 
> 时间：2013-04-19T03:37:22.873
> 
> 标签：jquery, infinite-scroll

我放了一个无限滚动插件ajax，但向下滚动时会自动工作。我想更改没有自动或“更多”的自动滚动。

以下是我与 masonry 一起使用的代码

```
jQuery.ias({
    container : &#39;#main&#39;,
    item: &#39;.post-outer&#39;,
    pagination: &#39;#blog-pager&#39;,
    next: &#39;#blog-pager-older-link a&#39;,
    loader: &#39;http://2.bp.blogspot.com/-XIF8-dkyzkQ/UXC35axRdfI/AAAAAAAAGg0/Q7xRk-yFLP4/s1600/loader.gif&#39;,
    onLoadItems: function(items) {
        var $newElems = jQuery(items).show().css({ opacity: 0 });
        $newElems.imagesLoaded(function(){
             $newElems.animate({ opacity: 1 });
             jQuery(&#39;#main&#39;).masonry( &#39;appended&#39;, $newElems, true );
        });
        return true
    }    

}); 
```

链接示例： [page-elements.blogspot.com](http://page-elements.blogspot.com/)

插件无限：[infinite-ajax-scroll](https://github.com/webcreate/infinite-ajax-scroll)

我应该添加什么代码来更改以使“更多”不自动？

如果我的语言不太清楚，我很抱歉，谢谢

我的问题完成了，我添加了“**触发器：'加载更多'** ”

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T17:32:42.707

我有同样的问题。但我解决了它。

首先，您必须从 ias plugin.around 第 85 行返回“this”对象；

```
// initialize
        return init(); 
```

然后，当您初始化 ias 插件时，将此变量保存在全局变量中。

```
infiniteScroller = $.ias({
                            container : '.jscroll',
                            item : '.column',
                            pagination : '#content .navigation-js',
                            next : '.next-posts a',
                            loader : '<img src="https://raw.github.com/webcreate/infinite-ajax-scroll/master/dist/images/loader.gif"/>',
                            triggerPageThreshold : 15,
                            history : false
                        }); 
```

然后在哪里检索新数据。数据加载到页面后执行此操作；

```
delete infiniteScroller;
                            infiniteScroller = $.ias({
                                container : '.jscroll',
                                item : '.column',
                                pagination : '#content .navigation-js',
                                next : '.next-posts a',
                                loader : '<img src="https://raw.github.com/webcreate/infinite-ajax-scroll/master/dist/images/loader.gif"/>',
                                triggerPageThreshold : 15,
                                history : false
                            }); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T12:51:55.780

将[triggerpagethreshold](https://github.com/webcreate/infinite-ajax-scroll#triggerpagethreshold)设置为 0 应该可以工作。

# php - 问题配置 APC

> ID：16096807
> 
> 赞同：1
> 
> 时间：2013-04-19T03:37:42.293
> 
> 标签：php, nginx, apc, ubuntu-server

我正在尝试配置 APC，但它似乎没有接受我的更改。我在 ubuntu 服务器 12.10 上使用 nginx 和 php-fpm。

我所有的更改都在这个文件中：/etc/php5/mods-available/apc.ini

```
extension=apc.so
apc.enabled=1
apc.shm_size=1G
apc.ttl=3600
apc.user_ttl=7200
apc.gc_ttl=3600
apc.max_file_size=1M
apc.stat=0 
```

是的，我重新启动了 nginx。当我检查 apc.php 时，我的更改没有显示......只是默认值。有什么线索吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:45:36.730

您应该重新启动 PHP-FPM。如果您在 init.d 中有它，请尝试：

$ 服务 php-fpm 重启

并检查您是否使用了正确的 ini 文件，方法是检查 phpinfo(); 的“加载的配置文件”和“解析的附加 .ini 文件”；输出;

# asp.net-mvc-4 - Azure：memebrship 和我的表可以共享相同的连接字符串吗？

> ID：16096810
> 
> 赞同：0
> 
> 时间：2013-04-19T03:38:05.727
> 
> 标签：asp.net-mvc-4, azure, entity-framework-migrations

我将成员表和我的表放在同一个数据库中，因此我只使用一个 1**连接字符串**和一个**DBContext**类。我使用 Ado.Net EF Code First 进行迁移。下面是我的**本地连接**。

```
<add name="DefaultConnection" 
     connectionString="Data Source=(LocalDb)\v11.0;
     Initial Catalog=MyDatabase;Integrated Security=True;" 
     providerName="System.Data.SqlClient" /> 
```

在我的本地机器上，thinks 运行良好，即我第一次尝试从数据库读取/写入数据时，代码首先创建数据库及其表。

但是，当我将应用程序上传到 Azure 网站时，只会创建成员资格表。我还需要手动运行**DDL**和**插入**语句来重新创建我的本地数据库。

有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:16:01.693

使用 aspnet_regsql.exe 创建的 microsoft 成员资格表与 Azure 不兼容。

您应该使用这篇[支持文章](http://support.microsoft.com/kb/2006191/)中的脚本。如果您想使用 CF 迁移，您必须在手动配置文件中提供 SQL 语句。这可以通过使用`Add-Migration ASPNETMembershipFiles`并添加适当的`Sql()`调用创建新的（空）迁移来实现。我们开始了这项工作，经过几个小时的工作，我们转向了另一个选项（见下文）。

另一种选择是手动运行支持文章中的脚本，并将这些表排除在 CF 迁移之外。

# algorithm - 将 (x,y) 转换为网格坐标

> ID：16096818
> 
> 赞同：0
> 
> 时间：2013-04-19T03:39:19.267
> 
> 标签：algorithm, geometry

假设我有一个从 x=0 到 x=1 和 y=0 到 y=1 的二维空间。此外，我有一个大小为 1/3 的矩形网格 (i,j)，从 (0,0) 开始，将空间细分为 9 个网格单元。如何将某些坐标 (x,y)，例如 (0.3, 0.6) 转换为网格坐标 (i,j)？

我认为它应该是网格单元大小和舍入的某种组合，但我找不到正确的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:40:07.597

如果我错了，请纠正我，你想找到离给定点最近的网格点。例如对于 (0.3,0.6) 你想要 (1/3,2/3)。我对吗？

如果这是您的问题，解决方案是 (ROUND(x*3)/3, ROUND(y*3)/3)。

更新：您正在寻找 (FLOOR(x*3)/3, FLOOR(y*3)/3)。

# python - CRC32 计算

> ID：16096825
> 
> 赞同：2
> 
> 时间：2013-04-19T03:39:35.737
> 
> 标签：python, crc, crc32

我正在尝试编写一些 python 代码来测试我在 micro 中的硬件 CRC 模块。python 代码将计算随机数据块的 crc 值，并将与从 micro 返回的相同随机数据块的 crc 值进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:00:02.243

Q1：这应该让你开始制作随机块：

```
def randblock(nbytes):
    x = random.randrange(256 ** nbytes)
    return binascii.unhexlify('%0*x' % (nbytes*2, x)) 
```

Q2：[zlib.crc32](http://docs.python.org/2.7/library/zlib.html#zlib.crc32)函数可以使用任何你想要的值作为种子——只需将该值作为第二个参数传递。默认种子为零。

Q3：是的，将数据传递给 crc32() 会生成一个合理的 CRC 值。

# ios - 从 AppDelegate 调用的 UIViewController 中的方法未使用现有对象

> ID：16096826
> 
> 赞同：0
> 
> 时间：2013-04-19T03:39:36.457
> 
> 标签：ios, objective-c, uiviewcontroller, appdelegate, bump

我一直在让自己发疯，试图弄清楚这一点，并且据我所知，我已经尝试了几乎所有事情。我希望有人能解决这个问题，让我解释一下我目前的设置。

我在我的 iOS 应用程序中使用 Bump-api。我在**AppDelegate中有该**[`configureBump`方法](https://github.com/bumptech/bump-api-ios)，该方法在应用程序的初始启动中被调用。所以应用程序从一开始就连接到 Bump 服务器。

 **接下来，我有一个 NavigationController，其中按此顺序堆叠了以下 UIViewController：

**ViewControllerA** -> **ViewControllerB** -> **ViewControllerC**

**VCA** *(ViewControllerA)*是启动应用程序时的第一个视图。在`ViewWillLoad`我有以下代码：

```
myAppDelegate = [[UIApplication sharedApplication] delegate];
[myAppDelegate vibrateBump:NO]; 
```

`vibrateBump`是我的**AppDelegate**中的一种方法，我用它来关闭和开启颠簸。在这种情况下，我希望在**VCA**上关闭它，因为我不想转移任何东西。

但是，在**VCB**中，我有与 相同的代码条`vibrateBump:YES`，这就是我希望 Bump 工作的地方。这一切都很好，别担心我会到达那里。

现在，在**AppDelegate**`configureBump`中的方法中，我设置为在碰撞时从**VCB调用方法。**这是事情变得奇怪的时候。**这是在VCB**中调用的方法的示例：

 ******```
@implementation VCB {
   FMDatabase * db;
}

- (void)viewDidLoad{
   //db is set up here...
}

-(void) otherMethodWithinVC{
   //Some action here...
}

-(void) myMethod:(NSArray*)myArray{
   [db open] //This does now work

   Do some stuff here.... //All this works

   [db close] //This does now work
   [self otherMethodWithinVC] //This does now work
} 
```

为什么`[db open]`不工作？好像还有另一个`myMethod`被调用的实例。当我在测试时对其进行更改并决定在`db`内部创建`myMethod`时，`db`开始工作。

这是我在方法中设置它的`configureBump`方式：

```
- (void) configureBump {
    VCB * vcb = [[VCB alloc] init];

    [[BumpClient sharedClient] setChannelConfirmedBlock:^(BumpChannelID channel) {
       //Some action here...
    }];

    [[BumpClient sharedClient] setDataReceivedBlock:^(BumpChannelID channel, NSData *data) {
        dataArray = [NSKeyedUnarchiver unarchiveObjectWithData:data];

        if([dataArray count]>0){
            if([vcb myMethod:dataArray];
        }
    }];

    //Some action here...

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:51:08.750

当您从 appdelegate 调用 mymethod 时，您正在创建一个不同的 VCB 控制器实例，但在

```
myAppDelegate = [[UIApplication sharedApplication] delegate]; 
```

您正在创建 appdelegate 的单个实例，就像单例一样********

# redis - redis命令错误：参数数量错误

> ID：16096830
> 
> 赞同：2
> 
> 时间：2013-04-19T03:39:46.443
> 
> 标签：redis, hiredis

使用hiredis 将命令传递给redis-server。我的代码：

```
redisContext* c = redisConnect("127.0.0.1", 6379);
char y[15]={"pointx"};
strcat(y," 2");

redisReply* reply= (redisReply*)redisCommand(c,"set %s",y);
printf("%s\n", reply->str); 
```

输出为“'set' 命令的参数数量错误”。但是，当我像这样更改代码时它会起作用：

```
redisContext* c = redisConnect("127.0.0.1", 6379);
char y[15]={"pointx"};
char x[5] = {"2"};
redisReply* reply= (redisReply*)redisCommand(c,"set %s %s",y,x);
printf("%s\n", reply->str); 
```

输出为“OK”。为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:42:35.847

Redis 服务器不解析使用 redisCommand 构建的命令。服务器只接受[Redis 协议](http://redis.io/topics/protocol)，带有已分隔的参数。

因此，解析发生在hiredis中，并且它仅适用于格式字符串，一步到位。出于性能原因，hiredis 避免了多次格式化传递（或递归实现），因此参数的扩展不是在解析*之前*完成，而是*在*解析过程中进行 - 与您的想法相反。

想象一下您的对象非常大（例如几 MB），您不希望在每次查询时都解析它们。这就是为什么hiredis只解析格式字符串而不解析参数的原因。

在您的第一个示例中，hiredis 使用唯一参数解析格式字符串，它仅使用一个参数构建消息，并且 redis 接收：

```
$ netcat -l -p 6379
*2
$3
set
$8
pointx 2 
```

这是一个格式错误的 set 命令（仅一个参数）。

# java - HashCode - 如果相等的对象发生在同一个桶中散列会发生什么？

> ID：16096838
> 
> 赞同：0
> 
> 时间：2013-04-19T03:40:46.437
> 
> 标签：java, hashcode, language-lawyer

我知道这已被问过很多次，但我找不到我的问题的确切答案。

在 Effective Java 的第 3 章中，有一个场景展示并解释了为什么哈希码应该与 equals 方法一起被覆盖。我得到了它的大部分内容，但其中有一部分我无法理解。

那里有一个给定的类，它覆盖了 equals 方法而不是 hashCode 方法。该对象被作为键放在地图中

```
Map<PhoneNumber, String> m = new HashMap<PhoneNumber, String>();
m.put(new PhoneNumber(707, 867, 5309), "Jenny"); 
```

我知道如果我们`get`使用另一个相等的对象（`m.get(new PhoneNumber(707, 867, 5309))`），它将返回 null 仅仅是因为它们的哈希码没有被覆盖以返回相等对象的相等值（因为它会因为不同的哈希码而在另一个桶中搜索对象）。

但是根据我的理解，在那种情况下，不能保证两个对象的哈希码总是会返回不同的。如果它们碰巧返回相同的哈希码怎么办？

我认为这在这部分解释

> 即使两个实例碰巧散列到同一个桶，get 方法几乎肯定会返回 null，因为 HashMap 有一个优化，可以缓存与每个条目关联的散列码，并且如果散列码不检查对象相等性，则不会打扰不匹配。

我只是没有得到缓存的东西。有人可以详细解释一下吗？

另外，我已经完成了我的家庭作业，并找到了一个相关的问题

[将与每个条目关联的哈希码缓存到其 get 方法的 HashMap 优化的影响](https://stackoverflow.com/questions/3785301/influence-of-hashmap-optimization-that-caches-the-hash-code-associated-with-each)

但是我对接受的答案并不满意，而且，回答者在评论中说

> 哈希码可以是任意整数，因此每个哈希码不能有自己的桶。因此，一些具有不同哈希码的对象最终会在同一个桶中。

我完全不同意。据我了解，不同的哈希码永远不会出现在同一个存储桶中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:54:38.627

看一下 java.util.HashMap 是如何通过 hashCode 计算一个键的桶号的：

```
/**
 * Returns index for hash code h.
 */
static int indexFor(int h, int length) {
    return h & (length-1);
} 
```

如果哈希表长度 = 16，那么 128 和 256 都将进入桶 #0。Hashtable 是一个条目数组：

```
 Entry<K,V>[] table
   ...
   class Entry<K,V> {
           K key;
           V value;
           Entry<K,V> next;
           int hash;
    ... 
```

条目可以形成一个链 ( `LinkedList`)。如果桶#0 ( `table[0]`) 为空( `null`) 则新条目将直接放在那里，否则HashMap 将找到链中的最后一个条目并设置最后一个条目的next = new entry。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:46:40.627

当说“即使两个实例碰巧散列到同一个桶”时，这并不意味着它们具有相同的散列码。甚至不同的哈希码也可以映射到同一个桶[阅读关于哈希]。

因此，即使密钥散列到同一个桶，也可能不会为相关元素调用 .equals （由于缓存优化）（因为甚至散列码都不匹配）。因此，即使相关元素位于同一个桶中，它也可能永远不会通过 .equals 进行比较，因此不会“找到”。

# objective-c - saveToURL forSaveOperation completionHandler 未执行

> ID：16096840
> 
> 赞同：2
> 
> 时间：2013-04-19T03:40:56.167
> 
> 标签：objective-c, core-data, ios6.1

我正在尝试在 UIManagedDocument 上调用方法 saveToURL forSaveOperation completionHandler 但是完成块没有执行。它在第一次尝试保存时在 (1) 处失败，在之后的尝试中在 (2) 处失败。我不确定这是否意味着它是第一次写入磁盘。但是，completionHandler 中的 NSLogs 根本不会被记录。

```
- (void)useDocument
{
    CoreDataSingleton *cds = [CoreDataSingleton getInstance];
    UIManagedDocument *document = cds.document;
    NSURL *url = document.fileURL;
    if (![[NSFileManager defaultManager] fileExistsAtPath:[url path]]) {
        NSLog(@"This is logged");
        [document saveToURL:url forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
              NSLog(@"This is never logged");
              if (success) {
                  self.managedObjectContext = document.managedObjectContext;
              } 
          }];
            // (1) Fails here on the first go
    } else if (document.documentState == UIDocumentStateClosed) {
        NSLog(@"This is logged");
        [document openWithCompletionHandler:^(BOOL success) {
            NSLog(@"This is never logged");
            if (success) {
                self.managedObjectContext = document.managedObjectContext;
            }
        }];
            // (2) Fails here on the second go
    } else {
        self.managedObjectContext = document.managedObjectContext;
    }
} 
```

实现这一点的类是 UIViewController，它是 UICollectionView 的数据源和委托。当我将 UIViewController 作为数据源取消挂钩时，completionHandler 成功并设置了 managedObjectContext。

有谁知道会是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T04:58:55.093

我有这个问题，它正在杀死我。尝试检查您的代码以构建 url。确保您获得的是 NSDocumentDirectory 的路径，而不是 NSDocumentationDirectory，正如在这篇[文章](https://stackoverflow.com/questions/12061965/core-data-failing-on-savetourl-on-uimanageddocument/12069201#12069201)中发现的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T11:20:42.857

未执行 SAVETOURL 的原因之一是在数据模型中：将属性/关系设置为可选。对我来说，经过整整一周的压力，它起作用了！！

# loops - VB 2010 Express - 猜谜游戏异常：“NullReferenceException 未处理”

> ID：16096850
> 
> 赞同：0
> 
> 时间：2013-04-19T03:42:34.237
> 
> 标签：loops, nullreferenceexception

在编写猜谜游戏时，我遇到了一个看似无法解决的大问题。我在线上遇到异常错误：

```
MessageLabel.Text = Message.ToString 
```

这是代码：

```
Option Strict On

Public Class ABabyGuess

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim randomGenerator As New Random
        Dim secretNumber As Integer
        Const NUMBER_MIN As Integer = 1
        Const NUMBER_MAX As Integer = 200
        Dim guessNumber As Integer
        Dim Won As Boolean = False
        Dim Message As String = ""
        Dim MAX_TRIES As Integer = 500
        Dim CurrentTrys As Integer
        secretNumber = randomGenerator.Next(NUMBER_MIN, NUMBER_MAX)
        Try
            Do While CurrentTrys <= MAX_TRIES And Not Won
                CurrentTrys = CurrentTrys + 1
                ABaby.ATryTableLabel.Text = ""
                guessNumber = Integer.Parse(GuessTextBox.Text)
                If guessNumber > secretNumber Then
                    Message = Message & guessNumber.ToString & "Too Big" & Environment.NewLine
                ElseIf guessNumber < secretNumber Then
                    Message = Message & guessNumber.ToString & "Too Small" & Environment.NewLine
                ElseIf guessNumber = secretNumber Then
                    Won = True
                End If
            Loop
        Catch ex As Exception
            If guessNumber > 100 Then
                MessageBox.Show("Please inut a number below 100.")
            ElseIf guessNumber = 0 Then
                MessageBox.Show("Please input a number above 0")
            End If
        End Try
            If Message.ToString IsNot Nothing Then
                ABaby.ATryLabel.Text = Message.ToString
            End If
        If Won = True Then
            MessageBox.Show("congratulations! You Won!", "congratulations", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        ElseIf Won = False And CurrentTrys = 7 Then
            MessageBox.Show("...You actually lost. I give up...", "...", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        End If
    End Sub
End Class 
```

错误在于`NullReferenceException was Unhandled`细节说：`{"Object variable or With block variable not set."}`老实说，我在互联网上找不到任何地方来解决这个问题。如果您想知道为什么我将表格命名为 ABaby，它是我的多难度项目中可用的最简单的难度级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:46:44.627

这是因为您没有初始化 MessageLabel 或 Message 或两者。

在调用或访问它们的方法/属性之前检查您的代码以查看它们是否已正确初始化。

# xcode - 添加视差滚动 cocos2d

> ID：16096851
> 
> 赞同：1
> 
> 时间：2013-04-19T03:42:49.453
> 
> 标签：xcode, cocos2d-iphone, parallax

目前我正在通过以下方法添加我的背景。我怎样才能修改背景，使其与瓷砖地图一起自动滚动。

```
- (void)setupParallax {

    NSString *backgroundName = [self.tilemap propertyNamed:@"BackgroundImage"];

    CCSprite *background = [CCSprite spriteWithFile:[AssetHelper     
                       getDeviceSpecificFileNameFor:[NSString stringWithFormat:@"background-%@.png",backgroundName]]];
    background.anchorPoint = ccp(0,0);
    background.position = CGPointMake(0, 0);

    [self addChild:background z:0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:36:05.613

您可以使用`CCParallaxNode`. 您的背景和地图将是 parallaxNode 的子节点，当您移动它时，它的子节点会自动相应移动。假设背景应该在您的地图后面，代码将如下所示。-

```
CCParallaxNode *voidNode = [CCParallaxNode node];    
[voidNode addChild:background z:10 parallaxRatio:ccp(0.8f, 0.8f) positionOffset:ccp(0, 0)];
[voidNode addChild:map z:20 parallaxRatio:ccp(1.0f, 1.0f) positionOffset:ccp(0, 0)];
[self addChild:voidNode]; 
```

`ParallaxRatio`将根据`ParallaxNode`运动设置每一层的速度：

*   `(1.0, 1.0)`表示地图将以与 x 和 y 之间的 voidNode 相同的速度移动。
*   `(0.8, 0.8)`意味着背景将比背景移动慢 80%`ParallaxNode`

# html - 自动完成是否仅关于“后退”和“前进”按钮及其历史记录，而不涉及历史记录、书签、重访或建议？

> ID：16096853
> 
> 赞同：2
> 
> 时间：2013-04-19T03:42:56.907
> 
> 标签：html

我在这里找到了 HTML`autocomplete`属性的规范：

> [http://www.w3.org/Submission/web-forms2/#the-autocomplete](http://www.w3.org/Submission/web-forms2/#the-autocomplete)

但它没有提到它何时应用。似乎当它是 时`on`，这意味着用户可以按下浏览器的后退和前进按钮，数据将保留在输入文本框中，或者如果用户使用后退和前进按钮区域选择历史项目。如果是`off`，则表示数据不应保留在输入框中。

这***不是***关于：

1.  历史窗口带回一个页面（点击历史项目后）
2.  任何带回页面的书签
3.  在浏览器中输入相同的 URL
4.  建议，例如当用户之前输入“macbook”时，现在用户输入“mac”，它会尝试在输入框内建议“macbook”（但突出显示“book”部分，以便用户可以继续输入，或者在输入文本框下方显示一个额外的弹出框，以获取建议列表。
5.  由于任何时候用户退出浏览器，对于所谓的“会话结束”，那么通过上面的（1）到（4），数据不可能跟随`autocomplete="on"`行为。

这是 的确切行为`autocomplete`吗？（任何指向更准确规范的指针都将受到赞赏）。

我制作了一个静态网页，并在本地使用 Apache 和 的 Macbook 上进行了尝试`localhost://try.html`，但可以在此处测试基本行为：

[http://jsfiddle.net/jzNTM/3/](http://jsfiddle.net/jzNTM/3/)
[http://jsfiddle.net/jzNTM/4/](http://jsfiddle.net/jzNTM/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T19:00:10.500

自动完成：浏览器是否应该记住给定字段的答案。（列表中的第 4 位） autocomplete="on" 是默认设置假设您有一个社会安全号码输入字段

```
<input name="ssn" placeholder="xxx-xx-xxxx" /> 
```

如果我输入 555-55-5555，浏览器会记住该答案
如果我（或其他任何人）稍后返回表单并开始在字段中输入“5”，浏览器将自动完成/自动建议“555 -55-5555"
对于像 SSN 这样敏感的东西，这可能是最不受欢迎的。（从公共计算机收集个人数据的好方法）

在输入（或表单）中添加 autocomplete="off" 将阻止浏览器记住输入的值

```
<input name="ssn" placeholder="xxx-xx-xxxx" autocomplete="off" /> 
```

# ios - 遍历数组，索引错误

> ID：16096856
> 
> 赞同：1
> 
> 时间：2013-04-19T03:43:01.847
> 
> 标签：ios, objective-c, uiscrollview, nsarray, nsrangeexception

我正在创建一个`UIScrollView`横向滚动的按钮和标签（与按钮一起使用），我正在以编程方式添加这些按钮和标签。

我有 44 个按钮和标签，所以我想通过一个数组来创建它们。

这就是我尝试这样做的方式（我是一个新手程序员，所以我知道事实上这是错误的做法。

请记住，`nameArray`为标签`picArray`保存字符串，为图片的文件名保存字符串。

无论如何，这是在我的`viewDidLoad:`：

```
for (int i = 0; i < 44; i++) {
    NSIndexPath *path = [nameArray objectAtIndex:i];
    [self makeLabelsAndButtons:path];
    //NSLog(@"index path is:%@", path);
} 
```

这个for循环引用的方法写在下面：

```
-(void)makeLabelsAndButtons:(NSIndexPath*)indexPath{
NSString *nameString = [nameArray objectAtIndex:indexPath];
NSString *picString = [picArray objectAtIndex:indexPath];

NSLog(@"name: %@, pic:%@", nameString, picString);

} 
```

该方法没有太多内容，`makeLabelsAndButtons`因为我试图在添加代码内容之前先了解这个概念。

这是我崩溃的错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 54564 beyond bounds [0 .. 43] 
```

我知道这意味着数组超出了范围，但我不知道为什么。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:52:28.103

如果 nameArray 保存标签的字符串，那么 path 不是 NSIndexPath，它是一个字符串。所以你将一个字符串传递给 objectAtIndex: 当然它需要一个整数而不是字符串。

即使它是 NSIndexPath，您的代码仍然是错误的，因为您希望将整数而不是索引路径传递给 objectAtIndex。

我认为您想要做的只是将 i 传递给您的 makeLabelsAndButtons 方法。

```
for (int i = 0; i < 44; i++) {
    [self makeLabelsAndButtons:i];
    //NSLog(@"index path is:%@", path);
}

-(void)makeLabelsAndButtons:(NSInteger)index{
    NSString *nameString = [nameArray objectAtIndex:index];
    NSString *picString = [picArray objectAtIndex:index];

    NSLog(@"name: %@, pic:%@", nameString, picString);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:12:30.290

试试这样...

要么这个...

```
for (int i = 0; i < [nameArray count]; i++) {
    NSIndexPath *path = [nameArray objectAtIndex:i];
    [self makeLabelsAndButtons:path];

} 
```

或者像这样...

```
for (NSIndexPath *path in nameArray) {
    [self makeLabelsAndButtons:path];

} 
```

# ruby-on-rails - 动态哈希 - Ruby on Rails

> ID：16096859
> 
> 赞同：0
> 
> 时间：2013-04-19T03:43:09.330
> 
> 标签：ruby-on-rails, ruby, arrays, hash

到目前为止的代码：

```
def queryConnect
    ...
    count = 0

    #clients is an array of hashes.
    #channels is an array of hashes.

    channel_array = []

    channels.each do |channel|
        begin
            if clients[count]["cid"].to_i == channel["cid"].to_i
                channel_array << { "cname" => channel["channel_name"].transform_escape, 
                                   "name"  => clients[count]["client_nickname"].transform_escape }
                count = count + 1
            else
                channel_array << { "cname" => channel["channel_name"].transform_escape }
            end
        rescue
            #transform_escape -> some elements are not type string.
        end
    end
    count = 0
    channel_array
end 
```

通道样本输入：`[{"channel_name" => "game1", "cid" => 1}, {"channel_name" => "game2", "cid" => 2}, {"channel_name" => "game3", "cid" => 3}]`

客户样本输入：`[{"client_nickname" => "greg", "cid" => 1}, {"client_nickname" => "bob", "cid" => 1}, {"client_nickname" => "george", "cid" => 3}]`

预期输出：`[{"cname" => "game1", "name" => ["greg", "bob"]}]`

问题：我正在尝试遍历所有通道，如果客户端的通道 id 和通道的通道 id (cid) 匹配，我想使用通道名称和客户端名称创建一个哈希，然后将其推送到`channel_array`.

我现在唯一遇到的问题是当通道中有多个客户端时...如何通过迭代客户端数组并仍然保持条件以查看通道 ID 是否匹配来动态添加键值对？

两天来我一直在用我的文本编辑器来解决这个问题，感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:24:54.327

```
channels = [{"channel_name" => "game1", "cid" => 1}, 
            {"channel_name" => "game2", "cid" => 2}, 
            {"channel_name" => "game3", "cid" => 3}]
clients = [{"client_nickname" => "greg", "cid" => 1}, 
           {"client_nickname" => "bob", "cid" => 1}, 
           {"client_nickname" => "george", "cid" => 3}]

channel_data = channels.inject({}){|m, c| m[c["cid"]] = c["channel_name"]; m}
=> {1 => "game1", 2 => "game2", 3 => "game3"}

client_data = clients.inject({}){ |m, c| 
  m[c["cid"]] ||= []
  m[c["cid"]] << c["client_nickname"]
  m
}
=> { 1 => ["greg", "bob"], 3 => ["george"] }

channel_data.map{|cid, cname| 
  {"cname" => cname, "name" => client_data[cid]} if client_data[cid]
}.compact
=> [{"cname" => "game1", "name" => ["greg", "bob"]}, {"cname" => "game3", "name" => ["george"]}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:53:54.537

终于想通了。

```
channel_array << { "cname" => channel["channel_name"], "name" => clients.inject([]){ |m, c| m << c["client_nickname"] if c["cid"] == channel["cid"]; m} } 
```

# javascript - 当表或 div 中的复选框数组时，.each() 内的 .index() 始终返回 0

> ID：16096860
> 
> 赞同：2
> 
> 时间：2013-04-19T03:43:14.503
> 
> 标签：javascript, jquery

请帮我解决这个问题。

我将获取驻留在 html 表中的选中**复选框**数组的索引号，但每次我提醒.each() 内的每个**复选框的索引时，它都会为每个循环返回 0。**

*但是如果我删除表格及其所有 tr 和 td （不理会两个复选框），此代码将起作用*

**我的jQuery代码：**

```
function notify() {

               $("input[type = 'checkbox']:checked").each(function(){
               alert($(this).index());  /*always return zero when the check[] inside a table or div */                
               });           
           }

function main() {

        $("input[type = 'button']").click(notify);
}

$(document).ready(main); 
```

**我的html代码：**

```
 <table>
   <tr><td>
    <input type='checkbox' name='check[]' />
   </td><td>
   <input type='checkbox' name='check[]' />
   </td> </tr>  
 </table>   
<input type='button' name='button' value='ok'/> 
```

[这是我在 jsfiddle 中的代码的链接](http://jsfiddle.net/cuNE6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:45:23.247

尝试这个

```
$("input:checkbox:checked").each(function(index,value){
          alert($(this).parents('td').index());  
  }); 
```

[http://jsfiddle.net/cuNE6/9/](http://jsfiddle.net/cuNE6/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:36:13.190

这可能是您正在寻找的。既然您将复选框包装在 td 中，为什么不找到 td 的索引

[[演示]](http://jsfiddle.net/xgS9P/)

```
function notify() {

    $("input[type = 'checkbox']:checked").each(function () {
        alert($(this).parents('td').index());
    });
} 
```

# uiview - Segue 与 Push 动画从右到左

> ID：16096864
> 
> 赞同：2
> 
> 时间：2013-04-19T03:43:21.440
> 
> 标签：uiview, uiviewcontroller, uistoryboardsegue, uiviewanimationtransition

我正在使用这种方法：

```
[UIView transitionWithView: duration: options: animations: completion:]; 
```

控制转场上的后退动画。精确使用此代码：

```
[UIView transitionWithView:self.view.superview
                  duration:2.0
                   options:UIViewAnimationOptionTransitionFlipFromRight
                animations:^{
                    [self dismissModalViewControllerAnimated:NO];
                }
                completion:nil]; 
```

那行得通，但我真正想要的不是翻转，而是推送。换句话说，我希望看到视图从右向左滑动，一个替换另一个。

不幸的是，没有 UIViewAnimationOptionTransitionPushFromRight。

因此我的问题是：我怎样才能得到我想要的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T21:47:44.533

如果您使用的是导航控制器，则可以执行以下操作：

```
- (void)perform
{
    UIViewController *source = (UIViewController*)[self sourceViewController];
    UIViewController *destination = (UIViewController*)[self destinationViewController];

    CATransition* transition = [CATransition animation];
    transition.duration = .25;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype = kCATransitionFromLeft;

    [source.navigationController.view.layer addAnimation:transition
                                                  forKey:kCATransition];

    [source.navigationController pushViewController:destination animated:NO];
} 
```

如果您不想使用 a `UINavigationController`，并且您希望源视图控制器消失而不是 using `presentViewController`，并且您不希望由 using 引起的淡出动画`kCATransitionPush`，那么以下解决方案将起作用。如果您的视图是透明的并且您不希望包含的背景设置动画，这也适用。

```
static UIImageView *screenShotOfView(UIView *view)
{
    // Create a snapshot for animation
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [view.layer renderInContext:context];
    UIImageView *screenShot = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
    UIGraphicsEndImageContext();
    return screenShot;
}

- (void)perform
{
    UIViewController *source = (UIViewController *) self.sourceViewController;
    UIViewController *destination = (UIViewController *) self.destinationViewController;

    // Swap the snapshot out for the source view controller
    UIWindow *window = source.view.window;
    UIImageView *screenShot = screenShotOfView(source.view);
    CGRect originalFrame = destination.view.frame;

    BOOL animsEnabled = [UIView areAnimationsEnabled];
    [UIView setAnimationsEnabled:NO];
    {
        window.rootViewController = destination;
        [window addSubview:screenShot];
        [source.view removeFromSuperview];
        CGRect frame = destination.view.frame;
        frame.origin.x += source.view.bounds.size.width;
        destination.view.frame = frame;
    }
    [UIView setAnimationsEnabled:animsEnabled];

    [UIView animateWithDuration:kAnimationDuration
                     animations:^{
                         destination.view.frame = originalFrame;
                         CGRect frame = screenShot.frame;
                         frame.origin.x -= screenShot.bounds.size.width;
                         screenShot.frame = frame;

                     }
                     completion:^(BOOL finished) {
                         [screenShot removeFromSuperview];
                     }];   
} 
```

# java - Java - 静态 Void 方法 - LinkedList - 按值传递

> ID：16096867
> 
> 赞同：0
> 
> 时间：2013-04-19T03:43:58.050
> 
> 标签：java, linked-list, pass-by-value

是否可以在 Java 中创建以下静态 void 方法？

```
public static void reverse(LinkedList<String> linkedlist)

{

//Code would go here...

} 
```

据我了解，由于 Java 是按值传递的，这是不可能的，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:55:30.507

Java 仅支持按值传递，但您发布的代码不会出错，因为它也是按值传递的。参考这些链接[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference), [Java 函数参数总是按值传递吗？](https://stackoverflow.com/questions/1110826/are-java-function-parameters-always-passed-by-value)，[不可变和按值传递](https://stackoverflow.com/questions/8257404/immutable-and-pass-by-value)，[http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:54:09.790

如果你在谈论 stock`java.util.LinkedList`类，那么当然可以编写这样的方法。事实上，已经有一个：`java.util.Collections.reverse(List<?> list)`适用于任何可修改的列表（包括`LinkedList`）。它反转列表的元素。

如果您谈论的是自定义`LinkedList`类，则取决于该类的实现方式。如果一个`LinkedList`对象只是带有数据的一系列链接节点，那么不，您无法反转列表，因为您无法更改第一个元素；这将需要更改`linkedList`参考。您可以在方法内部执行此操作，但不会影响调用代码中的实际参数。这就是按值传递的结果。

但是，`java.util.LinkedList`不是那样的结构。节点在`LinkedList`对象本身的内部。对象引用无需更改即可更改所有元素的顺序。

# java - 如何使用字符串作为参数来表示 Java 中的对象？

> ID：16096868
> 
> 赞同：2
> 
> 时间：2013-04-19T03:43:58.157
> 
> 标签：java, string, object

请原谅我缺乏知识和可能不恰当的术语，因为我是 Java 新手。到目前为止，这是我的代码的简化版本：

```
import javax.swing.ImageIcon;

public class Cards {
    static ImageIcon CA = new ImageIcon("classic-cards/1.png");
} 
```

同样在另一个类中，其中`playerCard[]`有一个数组`JLabels`：

```
String suit = "C";
String rank = "A";
playerCard[playerTurn].setIcon("Cards." + suit + rank); 
```

显然`setIcon`不使用字符串作为参数，因此这不起作用。我怎样才能让它工作？由于这是一副扑克牌，因此等级并不总是“C”和“A”，但我这样做是为了简化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:49:31.113

创建一个包含字符串和图标的地图。

```
// Create the Map
HashMap<String, Icon> map = new HashMap<String, Icon>();
...
// Add data to the Map
map.put("Cards.CA", CA);
...
//  Access the Map by your key
setIcon(map.get("Cards." + suit + rank)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:51:50.253

由于`JLabel`图标始终获取`Icon`对象，因此您可以在此处设置图标的名称，然后将其传递给您的 setIcon。没有重载方法。`JLable#setIcon(String)`它只有一种方法`JLable#setIcon(Icon)`。请试试这个

```
 Icon icon = new ImageIcon("Cards." + suit + rank);
     //here could be any resource path and name like "/foo/bar/baz.png"
    playerCard[playerTurn].setIcon(icon); 
```

# javascript - 如何按列值对二维数组进行排序？

> ID：16096872
> 
> 赞同：104
> 
> 时间：2013-04-19T03:44:35.063
> 
> 标签：javascript, arrays, sorting, multidimensional-array

任何人都可以帮我在 JavaScript 中对二维数组进行排序吗？

它将具有以下格式的数据：

```
[12, AAA]
[58, BBB]
[28, CCC]
[18, DDD] 
```

排序后应该是这样的：

```
[12, AAA]
[18, DDD]
[28, CCC]
[58, BBB] 
```

所以基本上，按第一列排序。

干杯

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-19T04:11:13.287

就是这么简单：

```
var a = [[12, 'AAA'], [58, 'BBB'], [28, 'CCC'],[18, 'DDD']];

a.sort(sortFunction);

function sortFunction(a, b) {
    if (a[0] === b[0]) {
        return 0;
    }
    else {
        return (a[0] < b[0]) ? -1 : 1;
    }
} 
```

我邀请您[阅读文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。

如果要按第二列排序，可以这样做：

```
a.sort(compareSecondColumn);

function compareSecondColumn(a, b) {
    if (a[1] === b[1]) {
        return 0;
    }
    else {
        return (a[1] < b[1]) ? -1 : 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-01-21T22:33:45.233

最好的方法是使用以下方法，因为第一列中可能存在重复值。

```
var arr = [[12, 'AAA'], [12, 'BBB'], [12, 'CCC'],[28, 'DDD'], [18, 'CCC'],[12, 'DDD'],[18, 'CCC'],[28, 'DDD'],[28, 'DDD'],[58, 'BBB'],[68, 'BBB'],[78, 'BBB']];

arr.sort(function(a,b) {
    return a[0]-b[0]
}); 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-04-19T03:47:58.147

尝试这个

```
//WITH FIRST COLUMN
arr = arr.sort(function(a,b) {
    return a[0] - b[0];
});

//WITH SECOND COLUMN
arr = arr.sort(function(a,b) {
    return a[1] - b[1];
}); 
```

注意：原始答案使用大于（>）而不是减号（-），这就是评论所指的不正确。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-05-18T14:48:02.753

使用箭头函数，并按第二个字符串字段排序

```
var a = [[12, 'CCC'], [58, 'AAA'], [57, 'DDD'], [28, 'CCC'],[18, 'BBB']];
a.sort((a, b) => a[1].localeCompare(b[1]));
console.log(a)
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-05-30T16:51:52.117

如果您像我一样，您不会希望每次更改排序依据的列时都更改每个索引。

```
function sortByColumn(a, colIndex){

    a.sort(sortFunction);

    function sortFunction(a, b) {
        if (a[colIndex] === b[colIndex]) {
            return 0;
        }
        else {
            return (a[colIndex] < b[colIndex]) ? -1 : 1;
        }
    }

    return a;
}

var sorted_a = sortByColumn(a, 2); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-21T13:53:15.620

在一行中：

```
var cars = [
  {type:"Volvo", year:2016},
  {type:"Saab", year:2001},
  {type:"BMW", year:2010}
]

function myFunction() {
  return cars.sort((a, b)=> a.year - b.year)
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-07-01T15:25:12.540

如果要根据第一列（包含数值）进行排序*，*请尝试以下操作：

```
arr.sort(function(a,b){
  return a[0]-b[0]
}) 
```

如果要根据第二列（包含*字符串*值）进行排序，请尝试以下操作：

```
arr.sort(function(a,b){
  return a[1].charCodeAt(0)-b[1].charCodeAt(0)
}) 
```

PS 对于第二种情况，您需要比较它们的 ASCII 值。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-02T20:32:25.103

没什么特别的，只是节省了从数组中返回某个索引处的值所需的成本。

```
function sortByCol(arr, colIndex){
    arr.sort(sortFunction)
    function sortFunction(a, b) {
        a = a[colIndex]
        b = b[colIndex]
        return (a === b) ? 0 : (a < b) ? -1 : 1
    }
}
// Usage
var a = [[12, 'AAA'], [58, 'BBB'], [28, 'CCC'],[18, 'DDD']]
sortByCol(a, 0)
console.log(JSON.stringify(a))
// "[[12,"AAA"],[18,"DDD"],[28,"CCC"],[58,"BBB"]]" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-04T17:43:43.677

站在 charles-clayton 和@vikas-gautam 的肩膀上，我添加了字符串测试，如果列具有 OP 中的字符串则需要该测试。

```
return isNaN(a-b) ? (a === b) ? 0 : (a < b) ? -1 : 1 : a-b  ; 
```

测试`isNaN(a-b)`确定字符串是否不能强制转换为数字。如果他们可以，那么`a-b`测试是有效的。

请注意，对混合类型的列进行排序总是会产生有趣的结果，因为严格相等测试`(a === b)`总是会返回 false。 [在此处查看 MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness)

这是带有 Logger 测试的完整脚本 - 使用 Google Apps 脚本。

```
function testSort(){

function sortByCol(arr, colIndex){
    arr.sort(sortFunction);
    function sortFunction(a, b) {
        a = a[colIndex];
        b = b[colIndex];
       return isNaN(a-b) ? (a === b) ? 0 : (a < b) ? -1 : 1 : a-b  ;  // test if text string - ie cannot be coerced to numbers.
       // Note that sorting a column of mixed types will always give an entertaining result as the strict equality test will always return false
       // see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness

       }
}
// Usage
var a = [ [12,'12', 'AAA'],
          [12,'11', 'AAB'],
          [58,'120', 'CCC'],
          [28,'08', 'BBB'],
          [18,'80', 'DDD'],
        ]
    var arr1 = a.map(function (i){return i;}).sort();  // use map to ensure tests are not corrupted by a sort in-place.

    Logger.log("Original unsorted:\n     " + JSON.stringify(a));
    Logger.log("Vanilla sort:\n     " + JSON.stringify(arr1));
    sortByCol(a, 0);
    Logger.log("By col 0:\n     " + JSON.stringify(a));
    sortByCol(a, 1);
    Logger.log("By col 1:\n     " + JSON.stringify(a));
    sortByCol(a, 2);
    Logger.log("By col 2:\n     " + JSON.stringify(a));

/* vanilla sort returns " [
                            [12,"11","AAB"],
                            [12,"12","AAA"],
                            [18,"80","DDD"],
                            [28,"08","BBB"],
                            [58,"120","CCC"]
                          ]
   if col 0 then returns "[
                            [12,'12',"AAA"],
                            [12,'11', 'AAB'],
                            [18,'80',"DDD"],
                            [28,'08',"BBB"],
                            [58,'120',"CCC"]
                          ]"
   if col 1 then returns "[
                            [28,'08',"BBB"],
                            [12,'11', 'AAB'],
                            [12,'12',"AAA"],
                            [18,'80',"DDD"],
                            [58,'120',"CCC"],

                          ]"
   if col 2 then returns "[
                            [12,'12',"AAA"],
                            [12,'11', 'AAB'],
                            [28,'08',"BBB"],
                            [58,'120',"CCC"],
                            [18,'80',"DDD"],
                          ]"
*/

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-05T21:22:19.170

由于我的用例涉及几十个列，我稍微扩展了@jahroy 的答案。（也刚刚意识到@charles-clayton 也有同样的想法。）
我传递了我想要排序的参数，并使用所需的索引重新定义了排序函数，以便进行比较。

```
var ID_COLUMN=0
var URL_COLUMN=1

findings.sort(compareByColumnIndex(URL_COLUMN))

function compareByColumnIndex(index) {
  return function(a,b){
    if (a[index] === b[index]) {
        return 0;
    }
    else {
        return (a[index] < b[index]) ? -1 : 1;
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-05T14:27:54.977

好主意 Sabir Ahmed，但只按第一个字符排序，三个：

```
array.sort((a, b) => (a[n].charCodeAt(0)*1000000 + a[n].charCodeAt(1)*1000 + a[n].charCodeAt(2)) - (b[n].charCodeAt(0)*1000000 + b[n].charCodeAt(1)*1000 + b[n].charCodeAt(2))); 
```

# python - 使用Python自动化数据清理，一些问题

> ID：16096874
> 
> 赞同：1
> 
> 时间：2013-04-19T03:45:17.007
> 
> 标签：python, code-cleanup

我必须处理约 16,000 行数据。每一行都是一个交易记录，有几个部分。例如：row= [ID, thing, widget]

我想做的很简单——对于每一行，将其与其余行一一进行比较。如果 A 行具有唯一 ID 和唯一小部件，我想将其写入输出文件。否则，我不需要它。（这个程序基本上为我自动清理数据。）这是我目前所拥有的：

```
try:
    infile=open(file1, 'r')
    for line in infile:
        line_wk=line.split(",")
        outfile=open(file2, 'r')
        for line in outfile:
            line_wk2=line.split(",")
            if line_wk[0]==line_wk2[0]:
                if line_wk[2]!=line_wk2[2]: #ID is not unique, but the widget is
                    to_write=','.join(line_wk) #queued to write later
            else:
                to_write=','.join(line_wk) #queued to write later
    if len(to_write)>0:
        outfile.close()
        outfile=open(file2, 'a')
        outfile.write(to_write)
        outfile.close()
        outfile=open(file2, 'r')
        infile.close()
        outfile.close()

except:
    print("Something went wrong.") 
```

在一个小型测试集上运行它，它会停留在“try”块内，否则只会写入所有内容，而不仅仅是具有唯一 ID 和小部件的那些。我认为有一种非常简单的方法可以做到这一点。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:07:02.493

您要做的是创建一个字典，其中键是元组，`(ID, widget)`值是`thing`. 字典键保证唯一。所以，你的代码看起来像这样。

```
uniques = {}
with open("yourfile.txt") as infile:
    for line in infile:
        ID, thing, widget = line.strip().split(',')
        uniques[(ID, widget)] = thing

with open("output.txt", "w") as outfile:
    for k, v in uniques.iteritems():
        outfile.write("%s,%s,%s\n" % (k[0], v, k[1])) 
```

如果保留其原始顺序很重要，那么您可以`OrderedDict`从[collections](http://docs.python.org/2/library/collections.html#collections.OrderedDict)包中使用

您还可以清理该`outfile.write`行的编写方式，但它应该按原样工作。

最后，由于您正在读取/写入 csv（逗号分隔值）格式，因此您可以使用[csv 模块](http://docs.python.org/2/library/csv.html)。

* * *

为了测试这一点，我写了一个脚本

```
import random
import string

IDS = range(1, 100)
widgets = ['ITEM_%s' % (i, ) for i in range(10)]
thing_chars = list(string.uppercase + string.lowercase)

def get_thing():
    return "".join(random.sample(thing_chars, 10))

with open("yourfile.txt", "w") as out:
    for i in xrange(0, 16000):
        ID = random.choice(IDS)
        widget = random.choice(widgets)
        thing = get_thing()
        out.write("%s,%s,%s\n" % (ID, thing, widget)) 
```

它似乎以正确的结果运行。

# javascript - 如何在 kineticjs 中创建 Undo-Redo？

> ID：16096875
> 
> 赞同：2
> 
> 时间：2013-04-19T03:45:22.510
> 
> 标签：javascript, html, kineticjs, undo-redo

有什么简单的方法可以在 Kineticjs中创建**撤消重做功能吗？**我在[https://github.com/ArthurClemens/Javascript-Undo-Manager](https://github.com/ArthurClemens/Javascript-Undo-Manager)中找到了 HTML 5 的撤消管理器，但我不知道如何放入 Kineticjs，请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T14:36:32.740

我能够根据[Chtiwi Malek 在 CodiCode 的帖子](http://www.codicode.com/art/undo_and_redo_to_the_html5_canvas.aspx)实现一个简单的解决方案。我还使用了这个[问题](https://stackoverflow.com/questions/13866660/create-a-rectangle-with-mousedown-event-in-kineticjs)中的一些代码作为示例来绘制矩形，因此感谢他们和 Chtiwi。

我的解决方案的唯一区别是我使用 toJSON() 将每个图层状态存储在一个数组中，而不是画布上的 toDataURL()。我认为 toJSON() 需要 toDataURL() 才能序列化在画布上存储每个动作所需的所有数据，但我不是 100% 对此，所以如果其他人知道请发表评论。

```
function makeHistory() {
    historyStep++;
    if (historyStep < history.length) {
        history.length = historyStep;
    }
    json = layer.toJSON();
    history.push(json);
} 
```

每次要保存步骤以撤消或重做时调用此函数。在我的例子中，我在每个 mouseup 事件上调用这个函数。

将这两个函数绑定到 Undo/Redo 事件。

```
function undoHistory() {
    if (historyStep > 0) {
        historyStep--;
        layer.destroy();
        layer = Kinetic.Node.create(history[historyStep], 'container')
        stage.add(layer);
    }
}

function redoHistory() {
    if (historyStep < history.length-1) {
        historyStep++;
        layer.destroy();
        layer = Kinetic.Node.create(history[historyStep], 'container')
        stage.add(layer);
    }
} 
```

这是[jsfiddle](http://jsfiddle.net/projeqht/zNRAB/)。不要忘记初始化数组和步进计数器。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T22:40:56.583

我不熟悉 KineticJS，但该方法应该类似于提供的演示（也使用画布）。

也许另一个例子有帮助。假设我有一个应用程序来创建/移动/删除代表音符的彩色形状。我有一种方法可以单击并突出显示选定的笔记。按键盘上的 Delete 会调用函数 onDeleteGroup：

```
onDeleteGroup: function(gridModel) {
    // collect all notes in an array
    // ...
    this._deleteGroup(notes);
    this.undoManager.register(
        this, this._createGroup, [notes], 'Undo delete',
        this, this._deleteGroup, [notes], 'Redo delete'
    );
} 
```

所有笔记都被删除，并且在 undo manager 中注册了 2 个方法：

1.  撤消功能（将创建删除撤消）
2.  重做功能（撤消/创建后将再次删除）

这两个功能都很简单：

```
_deleteGroup:function(notes) {
    // removes each note from the model
    // thereby removing them from the canvas
    // ...
}

_createGroup:function(notes) {
    // add each note to the model
    // thereby adding them to the canvas
    // ...
} 
```

如您所见，数据对象（笔记数组）被传递用于创建和删除。您可以对单个对象执行相同的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-25T20:17:28.717

我为功能编写了一个类： [http ://www.sebastianviereck.de/en/redo-undo-class-kinetic-js/](http://www.sebastianviereck.de/en/redo-undo-class-kinetic-js/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-09T10:31:22.753

要解决事件侦听器问题，请继续制作克隆

```
$scope.makeHistory=function() { 
  $scope.historyStep++;
  if ($scope.historyStep < $scope.history.length) {
      $scope.history.length = $scope.historyStep;
  } 
  var layerC = $scope.topLayer.clone(); 
  $scope.history.push(layerC);   
};

 $scope.undoObject = function(){  
  if($scope.historyStep > 0) {
    $scope.historyStep--;
    $scope.topLayer.destroy(); 
    if($scope.historyStep==0){
      $scope.topLayerAdd(2); // will put empty layer
    }
    else{
      var layer = $scope.history[$scope.historyStep-1].clone();
      $scope.topLayerAdd(1,layer);
    } 
    $scope.topLayer.draw();
  } 
};

$scope.redoObject = function(){  
  if($scope.historyStep <= $scope.history.length-1) {  
    $scope.historyStep++;
    $scope.topLayer.destroy();  
    var layer = $scope.history[$scope.historyStep-1].clone(); 
    if($scope.historyStep==0){
      $scope.topLayerAdd(2);   // will put empty layer
    }
    else{
      $scope.topLayerAdd(1,layer); 
    } 
    $scope.topLayer.draw();  
  } 
}; 
```

非常适合我。

# android - 如何强制不在 minSdkVersion 中的 api 方法编译错误

> ID：16096877
> 
> 赞同：3
> 
> 时间：2013-04-19T03:45:28.713
> 
> 标签：android

我一直在旧设备上遇到 NoSuchMethodException 崩溃，我想知道为什么 eclipse IDE 至少没有警告我使用旧设备上尚不支持的方法。我在我的 AndroidManifest.xml 中正确设置了 minSDKVersion 字段。如果我使用无法在 minSdkVersion 设备上运行的方法，是否会出现编译错误或至少是警告？

我的 AndroidManifest.xml 中有以下内容

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" >
</uses-sdk> 
```

我不想用旧设备测试这个巨大应用程序的每个屏幕和功能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:08:12.420

将 NewApi 和 InlineApi 的 Lint 检查设置为错误。

```
right click project --> Properties --> Android Lint Preferences. 
```

查找`NewApi`并将框`InlineApi`设置`Severity`为错误或致命。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:18:03.143

你可以使用棉绒。Android Lint 是 ADT 16（和 Tools 16）中引入的一个新工具，它可以扫描 Android 项目源中的潜在错误。它既可以作为命令行工具使用，也可以与 Eclipse 集成

如果您使用无法在 minSdkVersion 上运行的方法，则 lint 会大声说该方法无法使用。

[http://developer.android.com/tools/help/lint.html](http://developer.android.com/tools/help/lint.html)

与日食一起使用

[http://tools.android.com/recent/neweclipselintui](http://tools.android.com/recent/neweclipselintui)

提供的支票清单

[http://tools.android.com/tips/lint-checks](http://tools.android.com/tips/lint-checks)

编写自定义 lint 规则

[http://tools.android.com/tips/lint-custom-rules](http://tools.android.com/tips/lint-custom-rules)

## 使用MinSdk属性

摘要：检查是否定义了最小 SDK 和目标 SDK 属性

优先级：9 / 10 严重性：警告类别：正确性

清单应包含一个元素，该元素定义应用程序运行所需的最低 API 级别，以及目标版本（您测试过的版本的最高 API 级别。）

更多信息：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# visual-c++ - 在 Windows 中用 C 计算百分比

> ID：16096879
> 
> 赞同：2
> 
> 时间：2013-04-19T03:45:40.920
> 
> 标签：visual-c++, gcc, percentage

我有以下代码行来计算计数/总数的百分比。

在 Microsoft Visual C++ 2005 中

```
printf("Count = %lu (%.2lf%%)\n", count, (double)count/(double)total*100.0); 
```

在 gcc 中

```
printf("Count = %lu (%.2lf\%)\n", count, (double)count/(double)total*100.0); 
```

“count”和“total”都是无符号的 64 位整数。出于某种原因，我能够在 gcc 中获得正确的值，但在 Visual C++ 中总是获得 0.00%。

为什么我无法在 Windows 中获得正确的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:59:54.817

`%lu`打印一个未签名的`long int`. 在 Visual C++ 中，这是一个 32 位整数，而不是 64 位整数。您说“count”是一个 64 位整数，所以它不是“long int”。（您一定已经将它声明为`__int64 count;`or `long long int count;`，对吗？否则您将如何在 Visual C++ 2005 中声明一个 64 位整数变量？）

由于`printf`不知道您传递了哪些参数或它们有多大，它依赖于格式字符串来告诉它为每个参数从堆栈中拉出多少字节的数据。通过写作`%lu`，您告诉它为“count”删除 4 个字节（32 位）的数据，但是当您将 64 位整数变量“count”传递给`printf`. 剩下的 4 个字节仍在堆栈上。然后当`printf`去删除百分比的“double”的 8 个字节（64 位）时，它首先以“count”剩余的 4 个字节结束。由于 Intel x86 CPU 是 little-endian，因此这些字节几乎可以肯定是 00000000。

简短的回答：在 Visual C++ 中写入`%I64u`或`%llu`打印一个无符号的 64 位值。

# go - 你如何确定当前运行的可执行文件的完整路径？

> ID：16096885
> 
> 赞同：3
> 
> 时间：2013-04-19T03:46:44.367
> 
> 标签：go

我一直在osx上使用这个功能：

```
// Shortcut to get the path to the current executable                      
func ExecPath() string {                                                   
  var here = os.Args[0]                                                    
  if !strings.HasPrefix(here, "/") {                                       
    here, _ = exec.LookPath(os.Args[0])                                    
    if !strings.HasPrefix(here, "/") {                                     
      var wd, _ = os.Getwd()                                               
      here = path.Join(wd, here)                                           
    }                                                                      
  } 
  return here                                                              
} 
```

...但它非常混乱，它根本无法在 Windows 上运行，当然也不能在 Windows 上的 git-bash 中运行。

有没有办法做这个跨平台？

注意。具体来说， args[0] 取决于二进制文件的调用方式；在某些情况下，它只是二进制文件本身，例如。“app”或“app.exe”；所以你不能只使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:27:20.167

这是我认为在任何平台下都可以使用的传统方式。

```
import (
    "fmt"
    "os"
    "path/filepath"
)

// Shortcut to get the path to the current executable                      
func ExecPath() string {
    var here = os.Args[0]
    here, err := filepath.Abs(here)
    if err != nil {
        fmt.Printf("Weird path: %s\n", err)
    }
    return here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:15:28.027

我认为没有跨平台的方法可以做到这一点。

但是，在 OS X 上，有更好的方法。dyld 提供了一个函数`_NSGetExecutablePath()`，可以为您提供可执行文件的路径。你可以用 CGo 来调用它。

```
package main

// #import <mach-o/dyld.h>
import "C"

import (
    "fmt"
)

func NSGetExecutablePath() string {
    var buflen C.uint32_t = 1024
    buf := make([]C.char, buflen)

    ret := C._NSGetExecutablePath(&buf[0], &buflen)
    if ret == -1 {
        buf = make([]C.char, buflen)
        C._NSGetExecutablePath(&buf[0], &buflen)
    }
    return C.GoStringN(&buf[0], C.int(buflen))
}

func main() {
    fmt.Println(NSGetExecutablePath())
} 
```

# c# - 如何序列化对象并将其作为子对象附加到 xml？

> ID：16096891
> 
> 赞同：0
> 
> 时间：2013-04-19T03:46:59.673
> 
> 标签：c#, xml-serialization

我目前正在使用 XmlSerializer 类来序列化对象并存储它们。但是，我可以看到使用 Serializer 的唯一方法是将数据立即写入流。我想要做的是有一个包含所有执行序列化的文件。

那么有没有办法将一个对象序列化为一个 XmlNode，然后将该节点附加到 xml 文件的根节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:31:28.677

我做了一些研究，看来您的问题与[此](https://stackoverflow.com/questions/14473431/can-we-update-existing-xml-files-using-xmlserializer)有关。

XMLSerializer 不支持更改序列化数据。您可以做的是反序列化文件以获取数据，更新数据并将新数据序列化为覆盖旧文件的文件。试试看。

# javascript - Ruby，Watir，无法单击由 Java 脚本加载的框架中的按钮

> ID：16096892
> 
> 赞同：3
> 
> 时间：2013-04-19T03:47:06.807
> 
> 标签：javascript, ruby, watir, watir-webdriver

因为我的 B593 路由器有时会卡在它产生大约 50% 数据包丢失的状态，所以我正在尝试编写一个程序，让它在最后 100 次 ping 中有 30 次丢失时自动重启。

我无法单击实际的重新启动按钮本身，它似乎是由一些 Javascript 加载的，但 watir 无法看到该按钮。在谷歌上搜索了一下，似乎我需要提供我目前正在尝试做的这个按钮的路径 - 但到目前为止还没有运气。

如果有人能提供一些启发，那真的会让我和其他一些 B593 所有者感到高兴。

**当我在重启按钮上单击“复制 XPath”时，这就是谷歌检查员所说的。**

```
//*[@id="btnReboot"] 
```

**这是重新启动按钮在框架源代码中的外观。**

```
<button onclick="reboot()" id="btnReboot">
<script>document.write(gVarReboot);</script>Reboot
</button> 
```

**页面源代码**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>content</title>
<script language='javascript'>
var REFRESH_TIME = 60000;
var ssidIdx = 0;
var lanDevIndex = 0;
var dhcpOptRedio = 0;
var QoSCurInterface = '';
var DDNSProvider = '';
var ripIndex = "";
var previousPage = "";
var preAddDomain = "";
var editIndex = -1;
var editDomain = '';
var g_FWLevel = -1;
var g_LevelOptRedio = 0;
var g_oMenuTree = null;
var curUserType = "0";
var sptUserType = '0';
var sysUserType = '1';
var aplyLine = -1;
var Link = "/html/help/help_content.html#";
var x = parseInt(screen.width / 2);
var y = parseInt(screen.height / 2);
var g_url = '';
var g_firstmenu = 'Admin_0';
var g_secondmenu = 'Admin_0_0';
var g_thirdmenu = 'Admin_0_0_0';
var errStrStr = '';
var errIdCtrlStr = '';
var updateIncoming = 0;
var g_IsVpnCertsUploaded = 0;
var g_is_refresh = true;
var g_modifiedFlg = false;
var ipfiltertablelist = null;
var g_wlanBasicSetting = "1";
var g_expendUpgDiv = true;
var g_smsType='0';
var g_isFromPinPage = false;
function addTimer() {
setInterval("resetModifiedFlg();", REFRESH_TIME);
}
function resetModifiedFlg() {
try {
if (top.g_modifiedFlg) {
top.g_modifiedFlg = false;
top.frames["hiddenfrm"].location
.replace("/html/main/hidden.asp");
}
} catch (e) {
var forjslint = 0;
}
}
</script>
<script language="JavaScript">
</script>
<frameset rows='68,*,20' border='0' frameborder='no' framespacing='0'
onload="addTimer();">
<frameset cols='0,0,0,*' frameborder='0' border='0'>
<frame src='/html/main/refresh.asp' name='connfrm' id='connfrm'
frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0' noresize></frame>
<frame src='/html/main/hidden.asp' name='hiddenfrm'
id='hiddenfrm' frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0' noresize></frame>
<frame src='' name='helpfrm' id='helpfrm' frameborder='no'
border='0' scrolling='no' marginwidth='0'
marginheight='0' noresize></frame>
<frame src='/html/main/logo.asp' name='logofrm' id='logofrm'
frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0'></frame>
</frameset>
<frameset cols='200,*,0' frameborder='0' border='0'>
<frame src='/html/main/menu.asp' name='menufrm' id='listfrm'
frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0' noresize></frame>
<frame src='' name='contentfrm' id='contentfrm' frameborder='0'
border='0' scrolling='auto' marginwidth='0'
marginheight='16' noresize></frame>
<frame src='' name='uploadFrm' id='uploadFrm'
frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0' noresize></frame>
</frameset>
<frame src='/html/main/footer.html' name='footerfrm'
frameborder='no' border='0' scrolling='no'
marginwidth='0' marginheight='0' noresize></frame>
</frameset>
<noframes>
The information on the page makes use of frame technology. For best
results, use the new version of Browser.
</noframes>
</head>
</body>
</html> 
```

**框架源代码**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="/js/loadbyver.js?ver=V100R001C56SP052"></script>
<script type="text/javascript">
loadCss("/css/newcommon.css");
loadCss("/css/contentstyle.css");
loadCss("/lang/lang.css");
loadRes("/lang/reset.res");
loadJs("/js/util/base.js");
loadJs("/js/util.js");
loadJs("/js/tabinfo.js");
loadJs("/js/reset.js");
</script>
</head>
<body>
<div class="page_container"><div id="page_path" class="page_path">&nbsp;</div>
<table cellspacing=0 cellpadding=0 class="layout_table">
<tr>
<td class="layout_top_gap">
</td>
</tr>
<tr>
<td>
</td>
<td class="layout_center_td">
<table cellspacing=0 cellpadding=0 class="layout_title_table" id="layoutPageTitleId">
<tr>
<td class="layout_title_td">
<script type="text/javascript">
document.write(gVarReset);
</script>
</td>
</tr>
</table>
<table class="page_all_table" cellspacing="0" cellpadding="0">
<tr class="page_all_tr">
<td class="page_td_gap_left"></td>
<td class="page_all_content_td" id="page_all_content_td">
<table cellspacing=0 cellpadding=0 class="page_top_discription" id="pageTopDiscriptionId" >
<tr>
<td id="pageTopDiscriptionTdId" class="page_op_iscription_td">
<script type="text/javascript">
document.write(gVarPageComment);
</script>
</td>
</tr>
</table>
<div class="module_container">
<table cellspacing="0" cellpadding="0" class="module_header">
<tr>
<td id="id_rebootTitle">
<div class="module_header_title">
<div class="module_header_title_bg_left"></div>
<div class="module_header_title_text"><script>
document.write(gVarReboot);
</script></div>
<div class="module_header_title_bg_right"></div>
</div>
</td>
</tr>
</table>
<table id="id_rebootBody" cellspacing="0" cellpadding="0"
class="module_content" >
<tr>
<td style="border:none" align="left">
<div  style="margin-left:15px; margin-top : 15px;">
<script language="JavaScript" type="text/javascript">
document.write(gVarClickrebootb);
</script>
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" class="module_bottom">
<tr>
<td>
<div>
<button onclick="reboot()" id="btnReboot">
<script>document.write(gVarReboot);</script>
</button>
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" class="module_header">
<tr>
<td id="id_restoreTitle">
<div class="module_header_title">
<div class="module_header_title_bg_left"></div>
<div class="module_header_title_text">
<script>
document.write(gVarRestoreDefalut);
</script>
</div>
<div class="module_header_title_bg_right"></div>
</div>
</td>
</tr>
</table>
<table id="id_restoreBody" cellspacing="0" cellpadding="0"
class="module_content" >
<tr>
<td style="border:none" align="left">
<div  style="margin-left:15px; margin-top : 15px;">
<script language="JavaScript" type="text/javascript">
document.write(gVarClickRestoreD);
</script>
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" class="module_bottom">
<tr>
<td>
<div>
<button onclick="restoreDefalut()" id="btnResory">
<script>document.write(gVarRestoreDefalut);</script>
</button>
</div>
</td>
</tr>
</table>
</div>
<div>&nbsp;</div>
<div id="erroinfo"  style="width:100%; display:none"></div>
</td>
<td style="width:10px;"></td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" class="module_bottom">
<tr>
<td class="layout_left_corner">
</td>
<td>
&nbsp;
</td>
<td  class="layout_right_corner">
</td>
</tr>
</table>
</td>
<td class="layout_center_gap">
</td>
<td class="page_td_help_layout">
<div class="layout_help_top_div" id="id_layout_help_top_div"></div>
<div style=" padding:10px;">
<div id="page_all_help_td" ></div>
</div>
</td>
<td class="layout_right_gap">
</td>
</tr>
</table>
</div>
</body>
<script>
initPage();
__init();
</script>
</html> 
```

**我当前的代码**

```
require "watir-webdriver"

admin_password = 'stackoverflowcanhelp'

#spawn instance
browser = Watir::Browser.new :chrome

#open homepage
browser.goto "http://192.168.0.75"

#set Langauge to english
browser.select_list(:name => 'Language').select 'English'

#enter password
browser.text_field(:name => "Password").set admin_password

#login
browser.a(:id, "btnLogin").click

#go to reboot menue
browser.cookies.add 'FirstMenu', 'Admin_10', :path => "/"
browser.cookies.add 'SecondMenu', 'Admin_10_1', :path => "/"
browser.cookies.add 'ThirdMenu', 'Admin_10_1_0', :path => "/"

#refresh browser
browser.refresh

#reboot router
browser.button(:xpath, '//*[id="btnReboot"]').click #does not work
browser.alert.set "Click "
browser.alert.ok

#close browser
browser.close 
```

**错误信息**

```
gems/watir-webdriver-0.6.2/lib/watir-webdriver/elements/element.rb:490:in `assert_exists': unable to locate element, using {:xpath=>"//*[id=\"btnReboot\"]", :tag_name=>"button"} (Watir::Exception::UnknownObjectException)
    from /Users/stackoverflowfan/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/watir-webdriver-0.6.2/lib/watir-webdriver/elements/element.rb:118:in `click'
    from a.rb:29:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:55:59.877

我找到了另一种方法，但仍然对 xpath 方法感兴趣。:)

```
browser.frame(:id => "contentfrm").button(:id => "btnReboot").when_present.click 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:09:07.520

另一种方法是直接调用“rebo​​ot()”函数。

方法如下：

```
 require "watir"

   ie = Watir::IE.new()
   ie.goto("address")
   ie.execute_script("reboot()") 
```

这直接调用了所需的函数，这样就省去了在页面上定位疯狂的东西的麻烦。

祝你好运

# excel - 根据两个工作表中的匹配列值将单元格数据从一个工作表复制到另一个工作表

> ID：16096893
> 
> 赞同：0
> 
> 时间：2013-04-19T03:47:11.660
> 
> 标签：excel, vba

我在论坛中看到了类似的（几乎相同的问题）。这是选择的答案。

代码：

```
Sub fixThis()
    Dim i As Long, j As Long, col1 As Long, col2 As Long, lastrow1 As Long, lastrow2 As Long
    Dim sheetOne As String
    Dim sheetTwo As String

    col1 = 5
    col2 = 1
    sheetOne = "Names"
    sheetTwo = "Job"
    lastrow1 = Sheets(sheetOne).Cells(Sheets(sheetOne).Rows.Count, col1).End(xlUp).Row
    lastrow2 = Sheets(sheetTwo).Cells(Sheets(sheetTwo).Rows.Count, col2).End(xlUp).Row

    For i = 2 To lastrow1
        For j = 2 To lastrow2
            If Sheets(sheetOne).Cells(i, col1).Value = Sheets(sheetTwo).Cells(j, col2).Value Then
                Sheets(sheetOne).Cells(i, 6).Value = Sheets(sheetTwo).Cells(j, 2).Value
            End If
        Next j
    Next i
End Sub 
```

但我不知道如何把它变成我的案例的答案。

我有 2 张名称添加和删除的工作表。我想比较两张纸的第一列。如果两个工作表中的值都匹配，我想将状态列的值从工作表“添加”复制到工作表“删除”以获取匹配的值。

请帮我解决一下这个。

Ps：我是编码的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:09:16.137

不需要VBA。这可以使用 Vlookup 来实现。请参考下图。

![在此处输入图像描述](https://i.stack.imgur.com/CIRF9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:16:18.717

```
Sub fixThis()
    Dim i As Long, j As Long, colStatus As Long, lastrowAdd As Long, lastrowRemove As Long

    colStatus = 2 'your status column number
    lastrowAdd = Sheets("Add").Cells(Sheets("Add").Rows.Count, 1).End(xlUp).Row
    lastrowRemove = Sheets("Remove").Cells(Sheets("Remove").Rows.Count, 1).End(xlUp).Row

    For i = 1 To lastrowAdd 
        For j = 1 To lastrowRemove 
            If Sheets("Add").Cells(i, 1).Value = Sheets("Remove").Cells(j, 1).Value Then
                Sheets("Remove").Cells(j, colStatus).Value = Sheets("Add").Cells(i, colStatus).Value
            End If
        Next j
    Next i
End Sub 
```

# jsp - 如何从java类获取返回值到servlet？

> ID：16096902
> 
> 赞同：0
> 
> 时间：2013-04-19T03:49:10.033
> 
> 标签：jsp, servlets

嗨，我可以知道如何将返回值从普通的 java 类传递给 servlet，然后使用 jsp 显示它吗？我试过但只得到空值。

结果.java

```
package langID; 

public class Result {

public String Show()
{

    return "result";

}
} 
```

Formhandler.java (servlet)

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub

RequestDispatcher rd = request.getRequestDispatcher("comment.jsp");    
Result demo = new Result();
String s = demo.Show();
request.setAttribute("s", s);  
rd.forward(request, response);

} 
```

评论.jsp

```
<%String name = (String)request.getAttribute("s"); %>
                    <%= s%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:47:01.197

这是您必须编写的jsp：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>

<jsp:useBean id="s" scope="request" class="java.lang.String"></jsp:useBean>
<%=s %>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:50:38.173

这里需要使用 `<%= name%>` not`<%= s%>`

因为您的值现在可用 in `name`not in`s`

```
RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/comment.jsp?
 valpass=val");

 Result demo = new Result();
         String s = demo.Show();
          request.setAttribute("s", s);  
        dispatcher.forward(request, response); 
```

# rotation - 四元数旋转应该如何表现？

> ID：16096903
> 
> 赞同：1
> 
> 时间：2013-04-19T03:49:10.350
> 
> 标签：rotation, quaternions

在过去的几天里，我一直在慢慢地弄清楚四元数，并遇到了一个意想不到的问题。在最终让代码工作后，我发现我传递给我的旋转函数的数字没有产生与度数或弧度相关的旋转。

这是我的旋转功能

```
void solveRotation(Quaternion* q, float pitch, bool localx, float yaw, bool localy, float roll, bool localz)
{
    Quaternion temp;
    if(yaw !=0.f)
    { 
        if(localy==true)
        {
            //quaternionMultBA(q, yaw, 0.f, 1.f, 0.f);
            temp.w = q->w*yaw - q->y;
            temp.x = q->x*yaw + q->z;
            temp.y = q->y*yaw + q->w;
            temp.z = q->z*yaw - q->x;
        }
        else
        {
            //quaternionMultAB(q, yaw, 0.f, 1.f, 0.f);
            temp.w = q->w*yaw - q->y;
            temp.x = q->x*yaw - q->z;
            temp.y = q->w + q->y*yaw;
            temp.z = q->z*yaw + q->x;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }
    if(pitch != 0.f)
    {
        if(localx==true)
        {

            //quaternionMultBA(q, pitch, 1.f, 0.f, 0.f);
            temp.w = q->w*pitch - q->x;
            temp.x = q->x*pitch + q->w;
            temp.y = q->y*pitch - q->z;
            temp.z = q->z*pitch + q->y;
        }
        else
        {
            //quaternionMultAB(q, pitch, 1.f, 0.f, 0.f);
            temp.w = q->w*pitch - q->x;
            temp.x = q->w + q->x*pitch;
            temp.y = q->y*pitch + q->z;
            temp.z = q->z*pitch - q->y;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }
    if(roll != 0.f)
    {
        if(localz==true)
        {

            //quaternionMultBA(q, roll, 0.f, 0.f, 1.f);
            temp.w = q->w*roll - q->z;
            temp.x = q->x*roll - q->y;
            temp.y = q->y*roll + q->x;
            temp.z = q->z*roll + q->w;
        }
        else
        {
            //quaternionMultAB(q, roll, 0.f, 0.f, 1.f);
            temp.w = q->w*roll - q->z;
            temp.x = q->x*roll + q->y;
            temp.y = q->y*roll - q->x;
            temp.z = q->z*roll + q->w;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }

    normalize(q);
} 
```

上面的代码传递一个值，具体取决于在循环迭代期间按下了哪些键。起初我将值设置为 0.1 并预计旋转缓慢。相反，我看到每次迭代都有一个大转弯，在 60fps 时看起来非常奇怪。当我将传递的值更改为 1.0 时，我正在处理的立方体似乎做了完美的 90 度转弯（颜色移动但几何形状没有）

当我将传递量增加到 5 以上时，我开始看到我所期望的平滑旋转，并注意到随着我增加值它变慢了。我想了这么多，但它真的对我没有帮助，因为我不能用它来旋转特定的数量。我读过的任何四元数教程都没有提到这类问题，因为它们都提到了弧度。我不确定我是否犯了错误，或者我是否错过了额外的步骤，或者我是否搞砸了整个该死的事情。

提前感谢您的帮助，也可能响应缓慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T02:01:03.293

因此，我进行了更多搜索并修改了我的函数以包含我缺少的 sin 和 cos 函数。由于我在 GPwiki 上看到的代码示例，我认为我可以在没有触发的情况下进行旋转。无论如何，该功能现在已修复，如果有人想使用它 - 即使那里可能有更好的功能 - 这里是：

```
void solveRotation(Quaternion* q, float pitch, bool localx, float yaw, bool localy, float roll, bool localz)
{
    Quaternion temp;
    float s;
    float c;
    if(yaw !=0.f)
    { 
        yaw*=0.5f;
        s = sin(yaw);
        c = cos(yaw);
        if(localy==true)
        {
            temp.w = q->w*c - q->y*s;
            temp.x = q->x*c + q->z*s;
            temp.y = q->y*c + q->w*s;
            temp.z = q->z*c - q->x*s;
        }
        else
        {
            temp.w = q->w*c - q->y*s;
            temp.x = q->x*c - q->z*s;
            temp.y = q->y*c + q->w*s;
            temp.z = q->z*c + q->x*s;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }
    if(pitch != 0.f)
    {
        pitch*=0.5f;
        s = sin(pitch);
        c = cos(pitch);
        if(localx==true)
        {
            temp.w = q->w*c - q->x*s;
            temp.x = q->x*c + q->w*s;
            temp.y = q->y*c - q->z*s;
            temp.z = q->z*c + q->y*s;
        }
        else
        {
            temp.w = q->w*c - q->x*s;
            temp.x = q->x*c + q->w*s;
            temp.y = q->y*c + q->z*s;
            temp.z = q->z*c - q->y*s;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }
    if(roll != 0.f)
    {
        roll*=0.5f;
        s = sin(roll);
        c = cos(roll);
        if(localz==true)
        {
            temp.w = q->w*c - q->z*s;
            temp.x = q->x*c - q->y*s;
            temp.y = q->y*c + q->x*s;
            temp.z = q->z*c + q->w*s;
        }
        else
        {
            temp.w = q->w*c - q->z*s;
            temp.x = q->x*c + q->y*s;
            temp.y = q->y*c - q->x*s;
            temp.z = q->z*c + q->w*s;
        }
        q->w=temp.w;
        q->x=temp.x;
        q->y=temp.y;
        q->z=temp.z;
    }

    normalize(q);
} 
```

顺便说一句，感谢吉姆刘易斯

# optimization - 连续修改一组点——找到所有最近的邻居

> ID：16096905
> 
> 赞同：1
> 
> 时间：2013-04-19T03:49:26.443
> 
> 标签：optimization, tree, kdtree, voronoi

我有一组 3D 点。这些点会经历一系列微小的扰动（所有的点都会同时被扰动）。示例：如果我在一个框中有 100 个点，则在我的程序的每次迭代中，每个点都可以向上移动，但不超过框宽度的 0.2%。

每次扰动操作后，我想知道到每个点最近邻居的新距离。

这需要使用非常快的数据结构；我正在优化这个以提高速度。这是一个有点棘手的问题，因为我要同时修改所有点。近似 NN 算法不适用于这个问题。

我觉得答案介于 kd-trees 和 Voronoi tessellations 之间，但我不是数据结构方面的专家，所以我对该怎么做感到困惑。我确信这是一个非常困难的问题，需要大量研究才能达到*真正*的最佳解决方案，但即使是相当最佳的解决方案也对我有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T21:36:12.380

您可以尝试四键或怪物曲线。它减小了尺寸并填充了平面。Microsoft bing maps quadkey 是一个很好的学习起点。

# c - C 中 ={0} 的长版本是什么？

> ID：16096907
> 
> 赞同：3
> 
> 时间：2013-04-19T03:49:43.163
> 
> 标签：c

我被问到这个问题：

> `= { 0 }`是什么更长的代码的“捷径”？

因此，经过多次搜索和翻阅我的 C 书籍后，我知道它对聚合初始化所做的一切，但如果我想编写这段代码的更长版本怎么办。这是程序中的实际代码，以防万一

```
static char vid[25][100] = { 0 } ; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T04:33:36.327

长版本（你会很难变长）：

```
static const char vid[25][100] =
{
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'},
    {'\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'}
}; 
```

也就是说，decl 是静态的，因此一开始就放在零初始化内存中，所以这有点多余，但至少你知道它是什么样子的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T03:52:15.303

该标准没有定义如何进行归零，因此它是特定于实现的。在实践中，对于局部变量，编译器一般会生成一个`memset`// `RtlZeroMemory`etc。为了这。对于静态/全局变量，不需要代码，因为变量将被放入零初始化内存中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T03:53:49.200

它一次性将数组的所有元素初始化为 0。否则，您可以想象应变对所有元素单独进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T03:54:03.563

长版本是一个初始化数组所有成员的循环：

```
for (int i = 0; i < ARRAY_SIZE; ++i)
{
    myArray[i] = 0;
} 
```

编译器可能会生成对该函数的调用，该`memset`函数可能包含也可能不包含此幼稚循环的更优化版本。

但就像迪特里希指出的那样，在您在问题中显示的示例中，您正在声明一个`static`数组。这让事情变得有点复杂。未初始化的静态数据放置在可执行文件的一个特殊部分中，称为该`.bss`部分，并且 C 和 C++ 标准都要求将其默认初始化为零。如果显式初始化数据，链接器会将其放入`.data`可执行文件的部分。显式初始化为 0 有点特殊。智能链接器将省略显式初始化程序并将数据放在`.bss`节中。哑链接器仍可能将数据放在`.data`节中。所以最好*不要*用静态链接显式地对对象进行零初始化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-19T03:54:18.173

“大约”你正在做的“非常长”的版本是：

```
static char vid[25][100];
static firstTime = 1;

if(firstTime) {
  int ii, jj;

  for(ii = 0; i < 25; ii++) {
    for (jj = 0; jj < 100; jj++) {
      vid[ii][jj] = 0;
    }
  }
  firstTime = 0;
} 
```

这考虑到这应该只在第一次完成，因为变量被声明为`static`. 实际上，正如评论中所指出的，`static`关键字意味着初始化为零，并映射到称为`.bss`段的特殊区域。`main()`在被调用之前，程序加载器或其他一些机制将其设置为零。因此，运行的代码看起来不像上面的代码（内存块归零可以在大多数处理器上非常有效地完成，并且不涉及在多个维度上循环！）。

# 但：

`main`初始化是在调用函数之前发生的事情，而我的“近似等效”代码实际上是在执行期间运行的；所以，正如 Jens 所指出的，这并不是一回事。WhozCraig 实际上显示了`{0}`简写形式的显式启动；这是最好的答案。

# android - 异步任务和监听器

> ID：16096908
> 
> 赞同：3
> 
> 时间：2013-04-19T03:49:54.493
> 
> 标签：android, android-asynctask

我有一个应用程序可以进行大量 RESTful 服务调用。我在扩展 Asynctask 的类中执行调用。如果我必须取消异步任务，我也想取消服务调用。不幸的是，取消异步操作仍然允许 doInBackground 完成，并且一旦请求正在等待响应（这可能需要一点时间），我就无法调用 isCancelled() 。现在，在我的 doInBackground 方法中，我正在注册以在发出取消请求时从 UI 线程收到通知，因此我可以中止 HttpResponse 对象。这是一段示例代码。

到目前为止它一直有效，但我真的可以指望它，还是我只是走运？你能指望一个线程调用另一个线程中的方法吗？

```
public class AsyncTestActivity extends Activity {

private ArrayList<IStopRequestMonitor> monitors;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
}

public void stopActivity() {
    if (monitors == null || monitors.size() < 1) return;

    for (int i = 0; i < monitors.size(); i++) {
        monitors.get(i).stopRequest();
    }
}

public void addListener(IStopRequestMonitor listener) {
    if (monitors == null) monitors = new ArrayList<IStopRequestMonitor>();
    monitors.add(listener);
}

public void readWebpage(View view) {
    DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(new String[] { "http://www.mywebsite.com/feeds/rsstest.xml" });
}

private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        DefaultHttpClient client = new DefaultHttpClient();
        final HttpGet httpGet = new HttpGet(urls[0]);

        addListener(new IStopRequestMonitor() {

            public void stopRequest() {
                if (httpGet == null) return;
                httpGet.abort();
                cancel(true);
            }
        });

        try {
            HttpResponse execute = client.execute(httpGet);
            InputStream content = execute.getEntity().getContent();

            // handle inputstream
        } catch (Exception e) {
            e.printStackTrace();
        }
        return "";
    }

    @Override
    protected void onPostExecute(String result) {
        Log.d("Result:", result);
    }
}

interface IStopRequestMonitor {
    public void stopRequest();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:09:24.103

这里还有一场比赛。如果 stopActivity() 在后台线程调用 addListener() 之前运行，监听器将在稍后添加，并且永远不会被调用以中止 HttpGet。

如果您要从 UI 线程（或您创建 AsyncTask 的任何线程）调用 cancel()，您可以：

1.  在 AsyncTask 中创建一个“私有 HttpGet httpGet”字段。
2.  覆盖 onPreExecute() 并在那里初始化 httpGet。
3.  覆盖 onCancel() 并说 'if (httpGet != null) { httpGet.abort() }'
4.  在 doInBackground() 中，如果 isCancelled() 则立即返回，否则运行。

因为这会在 UI 线程上初始化 httpGet，所以 cancel() 调用将在 execute() 之前运行（因此 doInBackground 将看到 isCancelled() 返回 true），或者它将在 httpGet 存在之后运行，因此 HttpGet 将被中止。

除非您将其用于其他用途，否则您不需要侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T04:41:09.937

您可以定义 asynctask 类的全局对象，并在按钮单击或需要时使用 obj.cancle() 方法调用。

# php - PHP cURL RESTful 请求

> ID：16096919
> 
> 赞同：0
> 
> 时间：2013-04-19T03:51:50.397
> 
> 标签：php, rest, curl

我在 server.pad.com/authenticate （本地）有一个 RESTful 服务器，它接受一个参数并返回 JSON。所以在 Laravel 中`authenticate/(:any)`

我正在尝试从 ajax 请求中获取数据并将其发送到服务器并发回响应。这是我尝试过的...

```
<?php

  $json = json_decode($_POST['data'], true);
  $url = 'http://service.pad.com/authenticate';
  $curl = curl_init($url);
  $data = json_encode($json);

  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($curl, CURLOPT_POST, true);
  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);

  $response = curl_exec($curl);
  curl_close($curl);

  echo json_encode($response);
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:48:03.153

应该是`Content-Type: application/x-www-form-urlencoded`问题。
你`$data`在 JSON 中。您使用 CURLOPT_POSTFIELDS 设置值，但不是 var。
如我所见， $_POST['data'] 是 JSON 格式。如果服务器在 JSON 中
变得单一，请尝试以下操作：`data`

```
$url = 'http://service.pad.com/authenticate';
$curl = curl_init($url);
$postdata = array( 'data' => $_POST['data'] );

curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($postdata) );

$response = curl_exec($curl);
curl_close($curl);

echo json_encode($response); 
```

但是，如果服务器获取多个变量，而不是 JSON，请尝试以下操作：

```
$url = 'http://service.pad.com/authenticate';
$curl = curl_init($url);

curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, 
                   http_build_query( json_decode($_POST['data'], true) ) 
           );

$response = curl_exec($curl);
curl_close($curl);

echo json_encode($response); 
```

# asp.net-mvc - 使用asp.net mvc的离线和在线应用

> ID：16096920
> 
> 赞同：3
> 
> 时间：2013-04-19T03:51:52.723
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4

我的项目简史：2 个版本的应用程序，一个以 Windows 形式运行，另一个使用 asp.net 在 Web 中运行

当前任务：改造项目以使用 asp.net mvc 4 仅使用一个版本的代码库。在最终产品中，不会有更多的窗口形式；但只有asp.net mvc。这与较短的开发时间表有关。

关注：我关注的是离线用户。也许我可以使用 localhost 和 sql lite 离线托管 asp.net mvc4。离线用户点击check update时，就能得到最新版本的asp.net mvc 4 ？

还有其他更好的可行解决方案吗？我更喜欢适合 vb.net 的架构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:18:30.133

你看看SPA。这类项目本质上可以在线和离线模式下工作。需要考虑的一件事是离线模式应该处理的数据量（大多数 SPA 使用本地存储进行离线使用，这有点小）通过查看这个站点，您会发现很多关于 SPA 的资源。 [http://www.johnpapa.net/spa/](http://www.johnpapa.net/spa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:10:55.000

在 localhost 中使用 Sqlite 部署 MVC 应用程序在维护方面将是一个相当大的挑战。也许您可以开发可以在客户端系统上本地运行的 HTML + jQuery 解决方案，并利用客户端缓存来保存临时数据。它还可以通过 ajax 调用与实时应用程序交互。

# c# - Google Drive 异步上传方法

> ID：16096922
> 
> 赞同：0
> 
> 时间：2013-04-19T03:51:58.553
> 
> 标签：c#, .net, google-drive-api, google-api-dotnet-client

我有一个使用 Google Drive 来管理文件的 winforms 应用程序。我的文件上传方法相当简单：

```
 public static File UploadFile(string sourcefile, string description, string mimeType, int attempt)
    {
        try
        {
            string title = Path.GetFileName(sourcefile);
            var file = new File {Title = title, Description = description, MimeType = mimeType};
            byte[] bytearray = System.IO.File.ReadAllBytes(sourcefile);
            var stream = new MemoryStream(bytearray);
            FilesResource.InsertMediaUpload request = DriveService.Files.Insert(file, stream, "text/html");
            request.Convert = false;
            request.Upload();
            File result = request.ResponseBody;
            return result;
        }
        catch (Exception e)
        {
            if(attempt<10)
            {
                return UploadFile(sourcefile, description, mimeType, attempt + 1);
            }
            else
            {
                throw e;
            }
        }
    } 
```

这可行，但在使用 Google Drive 之前，我使用了 FTP 解决方案，它允许异步上传操作。我想在文件上传时包含一个进度条，但我不知道是否有办法异步调用 InserMediaUpload。这种能力存在吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T17:38:39.233

我们今天早些时候刚刚[发布了 1.4.0-beta 版本](http://www.blogger.com/blogger.g?blogID=1718242403135885061#editor/target=post;postID=4947832968685634533;onPublishedMenu=overview;onClosedMenu=overview;postNum=0;src=postname)。1.4.0-beta 有很多很棒的功能，包括 UploadAsync，它可以选择获取取消令牌。还请查看我们的新[媒体 wiki 页面](https://code.google.com/p/google-api-dotnet-client/wiki/Media)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:17:20.377

我们仍然不支持 UpdateAsync 方法，但如果您需要更新进度条，您可以使用 ProgressChanged 事件。请记住，默认的 ChunkSize 是 10MB，因此如果您想在较短的时间后获得更新，您应该相应地更改 ChunkSize。请注意，在库的下一个版本中，我们还将支持服务器错误 (5xx)

更新（2015 年 6 月）：我们确实在2 年前增加了对[UploadAsync的支持。](https://github.com/google/google-api-dotnet-client/blob/master/Src/GoogleApis/Apis/%5BMedia%5D/Upload/ResumableUpload.cs#L369)使用[ExponentialBackoffPolicy](https://github.com/google/google-api-dotnet-client/blob/master/Src/GoogleApis/Apis/Services/BaseClientService.cs#L164)也支持服务器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T04:53:23.137

我知道已经晚了..但是添加进度条相当简单。

以下是上传的工作代码：

```
 public static File uploadFile(DriveService _service, string _uploadFile, string _parent, string _descrp = "Uploaded with .NET!")
 {
    if (System.IO.File.Exists(_uploadFile))
    {
       File body = new File();
       body.Title = System.IO.Path.GetFileName(_uploadFile);
       body.Description = _descrp;
       body.MimeType = GetMimeType(_uploadFile);
       body.Parents = new List<ParentReference>() { new ParentReference() { Id = _parent } };

       byte[] byteArray = System.IO.File.ReadAllBytes(_uploadFile);
       System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);
       try
       {
           FilesResource.InsertMediaUpload request = _service.Files.Insert(body, stream, GetMimeType(_uploadFile));
           request.ProgressChanged += UploadProgessEvent;
           request.ChunkSize = FilesResource.InsertMediaUpload.MinimumChunkSize; // Minimum ChunkSize allowed by Google is 256*1024 bytes. ie 256KB. 
           request.Upload();
           return request.ResponseBody;
       }
       catch(Exception e)
       {
           MessageBox.Show(e.Message,"Error Occured");
       }
   }
   else
   {
       MessageBox.Show("The file does not exist.","404");
   }
} 
```

和

```
private void UploadProgessEvent(Google.Apis.Upload.IUploadProgress obj)
{
    label1.Text = ((obj.ByteSent*100)/TotalSize).ToString() + "%";

    // update your ProgressBar here
} 
```

# python - Python：当我有一个 if 语句和一个分配给 3 个整数的打印，并且我输入更高的一个时，它会同时给出正确的打印

> ID：16096924
> 
> 赞同：3
> 
> 时间：2013-04-19T03:52:27.007
> 
> 标签：python, python-3.x

对不起，如果我只是愚蠢，但我是 python 新手。当我执行此操作并输入一个大于 7 的数字时，它会给出 5、6 和 7 的答案，并打印 > 7。它告诉我，“我希望它越过边界变成真棒”，然后是“太棒了”。PS我正在使用Python 3

```
print ('What is your name?')
LeName = input ()
print (' How are you, ' + LeName + '?')
print ('On a scale of one to ten, what would you rate your day so far?')
mood = int (input())
if mood <4:
    print ('That\'s horrible, I hope it gets better.')
if mood == '5' '6' or '7':
    print('Hope it crosses the border into awesome! :)')
if mood > 7:
    print('That\'s awesome!')
print () 
```

发布后大约 1/2 小时，我考虑了一下，然后将 if mood == '5' '6' of '7' 更改为 if mood >= and mood < 8。但我仍然很好奇为什么会发生这种情况。谢谢你的回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T03:55:20.273

这个说法：

```
if mood == '5' '6' or '7': 
```

被解析为：

```
if (mood == '56') or '7': 
```

这实际上只是`if '7'`或者`if True`因为*类型*是而类型`mood`是。`int``'56'``str`

发生的事情是 python 正在应用自动字符串连接`'5' '6'`将其转换为`'56'`. 它不等于，`mood`因为and和类型永远不会比较相等。所以，你有. but是一个类似于 true 的值，因此该块将始终执行。您可能想要的更像是：`mood``int``int``str``if False or '7'``'7'`

```
if mood < 4:
   ...
elif 5 <= mood <= 7:
   ...
else:
   ... 
```

我使用[运算符链接](http://docs.python.org/3.3/reference/expressions.html#not-in)来做我认为你正在尝试的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:59:39.300

使用元组很容易：

```
if mood in (5, 6, 7): 
```

# css - CSS不拉伸背景100％

> ID：16096926
> 
> 赞同：0
> 
> 时间：2013-04-19T03:52:29.057
> 
> 标签：css

出于某种原因，我无法将左栏的背景拉伸到 100% 的高度。

这是我的 CSS 中的 2 个类：

```
#page {
    min-height: 100%;
}

#content {
    margin: 0px auto;
    width: 100%;
    min-height:100%;
    overflow:auto;
    padding-bottom: 65px;           
}

#leftmain {
    background:url(images/leftmain.gif);
    background-size:15% 100%;
    border:1px solid #c3c2c2;
    width:15%;
    height:100% !important;
    float:left;
}

#leftmain .cssmenu {
    width:100%;
    min-height:100%;
}

#leftmain .cssmenu ul, li {
    list-style: none;
    margin: 0;
    padding: 0;
}

#leftmain .cssmenu ul {
    width:100%;
    position: relative;
    z-index: 597;
}

#leftmain .cssmenu ul li {
    min-height: 1px;
    width:100%;
    line-height: 1em;
    vertical-align: middle; 
} 
```

html:

```
<div id="page">
    <div id="content>    
        <div id="leftmain>
            <div class="cssmenu">
            </div>
        </div>
        <div id="rightmain">    
        </div>    
    </div>    
</div> 
```

如果我将`min-height`on更改`.cssmenu`为固定`height`，可以说它`500px`显示背景。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:01:32.667

尝试这个

```
#leftmain { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

参考：[http ://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:14:47.077

你`#leftmain`实际上从来没有达到 100% 的高度。这就是为什么设置一个固定的`min-height`作品。`#leftmain`在您的情况下，如果所有父母本身都`height`具有`100%`. `min-height`在这种情况下是不够的。

你需要`height: 100%`像[这个小提琴](http://jsfiddle.net/Kbgg5/1/)一样设置：

```
html,
body,
#page,
#content {
    height: 100%;
} 
```

# c# - 按顺序将数组分配给类成员

> ID：16096927
> 
> 赞同：1
> 
> 时间：2013-04-19T03:52:30.397
> 
> 标签：c#

我有以下课程

```
public class MyClass
{
  public string a {get;set;}
  public string b {get;set;}
  public string c {get;set;}
  public string d {get;set;}
  public string e {get;set;}
  ...
  ...
  public string z {get;set;}
} 
```

和下面的字符串数组

```
string[] input; 
```

我无法事先知道数组的大小。我拥有的唯一信息是它的长度在 1 到 26 之间，并且所有项目都井井有条。我需要做的是将数组项分配给类成员，如下所示。

```
var myvar = new MyClass();

if(input.length >= 1)
   myvar.a = input[0];
if(input.length >= 2)
   myvar.b = input[1];
...
if(input >=26)
   myvar.z = input[25]; 
```

有没有比我的方法更优雅的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T03:57:52.263

我会把它包装在一个方法中

```
public string GetVal(int index){
  if(input.Length > index)
  {
    return input[index];
  }
  return null;
} 

public string a
{
  get{return GetVal(0);}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T04:05:08.627

我不知道这是否会有所帮助，我也不知道我是否会认为这是“优雅的”，但是您可以像这样通过反射做一些棘手的事情：

```
var myVar = new MyClass();
var properties = typeof(MyClass).GetProperties().OrderBy(x => x.Name).ToArray();
for (var i = 0; i < input.Length; ++i)
{
  properties[i].SetValue(myVar, input[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:26:11.527

一种强大的方法可能是使用自定义属性来装饰您的属性，该属性指示它们对应于数组中的哪个索引（尽管这似乎比其他建议更有效）。然后，您可以使用反射通过检查属性将数组映射到属性。

```
public class MyClass {
    [ArrayIndex(1)]
    public string a {get; set;}

    [ArrayIndex(2)]
    public string b {get; set;}

    public void ProcessData(IEnumerable<string> input) {
        // loop through input and use reflection to find the property corresponding to the index
    }
} 
```

# java - javax.jdo.JDOException：预提交期间出现意外错误

> ID：16096928
> 
> 赞同：1
> 
> 时间：2013-04-19T03:53:07.027
> 
> 标签：java, google-app-engine, jdo

今天我在我的数据模型中引入了一些新字段并将其推送到网上，我开始看到这个异常。发生这种情况时，有人知道吗？

```
org.datanucleus.ObjectManagerImpl preCommit: java.lang.NullPointerException
E 2013-04-18 12:45:09.321
X.servlet.util.GAELogger logError: javax.jdo.JDOException: Unexpected error during precommit
    at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:566)
    at org.datanucleus.api.jdo.JDOTransaction.commit(JDOTransaction.java:163)
    at X.db.dao.migrator.UserDataMigrator.migrate(UserDataMigrator.java:57)
    at X.db.dao.user.UserDataDAO.getUserDataByKey(UserDataDAO.java:84)
    at X.db.dao.user.UserDataDAO.getUserByEmailId(UserDataDAO.java:114)
    at X.servlet.authenticate.Signin.doPost(Signin.java:65)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at X.filter.GuestFilter.doFilter(GuestFilter.java:39)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.DatastoreCapabilityFilter.doFilter(DatastoreCapabilityFilter.java:44)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.FileFilter.doFilter(FileFilter.java:55)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:722)
NestedThrowablesStackTrace:
java.lang.NullPointerException
    at com.google.appengine.datanucleus.scostore.FKListStore.getIndexPropertyName(FKListStore.java:965)
    at com.google.appengine.datanucleus.scostore.FKListStore.getFilterPredicates(FKListStore.java:940)
    at com.google.appengine.datanucleus.scostore.FKListStore.listIterator(FKListStore.java:383)
    at com.google.appengine.datanucleus.scostore.FKListStore.listIterator(FKListStore.java:349)
    at com.google.appengine.datanucleus.scostore.FKListStore.iterator(FKListStore.java:342)
    at org.datanucleus.store.types.sco.backed.List.loadFromStore(List.java:304)
    at org.datanucleus.store.types.sco.backed.List.load(List.java:277)
    at org.datanucleus.state.JDOStateManager.loadUnloadedFields(JDOStateManager.java:1299)
    at org.datanucleus.state.JDOStateManager.runReachability(JDOStateManager.java:2266)
    at org.datanucleus.store.fieldmanager.ReachabilityFieldManager.processPersistable(ReachabilityFieldManager.java:69)
    at org.datanucleus.store.fieldmanager.ReachabilityFieldManager.storeObjectField(ReachabilityFieldManager.java:120)
    at org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1447)
    at X.db.model.user.UserDTO.jdoProvideField(UserDTO.java)
    at X.db.model.user.UserDTO.jdoProvideFields(UserDTO.java)
    at org.datanucleus.state.AbstractStateManager.provideFields(AbstractStateManager.java:1515)
    at org.datanucleus.state.JDOStateManager.runReachability(JDOStateManager.java:2281)
    at org.datanucleus.ObjectManagerImpl.performReachabilityAtCommit(ObjectManagerImpl.java:4324)
    at org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:4149)
    at org.datanucleus.ObjectManagerImpl.transactionPreCommit(ObjectManagerImpl.java:428)
    at org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:398)
    at org.datanucleus.TransactionImpl.commit(TransactionImpl.java:287)
    at org.datanucleus.api.jdo.JDOTransaction.commit(JDOTransaction.java:96)
    at X.db.dao.migrator.UserDataMigrator.migrate(UserDataMigrator.java:57)
    at X.db.dao.user.UserDataDAO.getUserDataByKey(UserDataDAO.java:84)
    at X.db.dao.user.UserDataDAO.getUserByEmailId(UserDataDAO.java:114)
    at X.servlet.authenticate.Signin.doPost(Signin.java:65)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at X.filter.GuestFilter.doFilter(GuestFilter.java:39)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.DatastoreCapabilityFilter.doFilter(DatastoreCapabilityFilter.java:44)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.FileFilter.doFilter(FileFilter.java:55)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:722)

E 2013-04-18 12:45:10.453
X.servlet.util.GAELogger logError: java.lang.NullPointerException
    at com.google.appengine.datanucleus.scostore.FKListStore.getIndexPropertyName(FKListStore.java:965)
    at com.google.appengine.datanucleus.scostore.FKListStore.getFilterPredicates(FKListStore.java:940)
    at com.google.appengine.datanucleus.scostore.FKListStore.listIterator(FKListStore.java:383)
    at com.google.appengine.datanucleus.scostore.FKListStore.listIterator(FKListStore.java:349)
    at com.google.appengine.datanucleus.scostore.FKListStore.iterator(FKListStore.java:342)
    at org.datanucleus.store.types.sco.backed.List.loadFromStore(List.java:304)
    at org.datanucleus.store.types.sco.backed.List.writeReplace(List.java:1181)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteReplace(ObjectStreamClass.java:1049)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1148)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1545)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:455)
    at X.db.model.user.PersonProfileDTO.writeObject(PersonProfileDTO.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1191)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:363)
    at java.util.ArrayList.writeObject(ArrayList.java:710)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1191)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1545)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:455)
    at X.db.model.user.UserDTO.writeObject(UserDTO.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1497)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1433)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1191)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:363)
    at com.google.appengine.api.memcache.MemcacheSerialization.serialize(MemcacheSerialization.java:248)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.serializeValue(AsyncMemcacheServiceImpl.java:276)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.doPut(AsyncMemcacheServiceImpl.java:413)
    at com.google.appengine.api.memcache.AsyncMemcacheServiceImpl.put(AsyncMemcacheServiceImpl.java:465)
    at com.google.appengine.api.memcache.MemcacheServiceImpl.put(MemcacheServiceImpl.java:69)
    at com.google.appengine.api.memcache.jsr107cache.GCache.put(Unknown Source)
    at X.db.cache.CacheService.putUser(CacheService.java:92)
    at X.db.dao.user.UserDataDAO.getUserDataByKey(UserDataDAO.java:90)
    at X.db.dao.user.UserDataDAO.getUserByEmailId(UserDataDAO.java:114)
    at X.servlet.authenticate.Signin.doPost(Signin.java:65)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at X.filter.GuestFilter.doFilter(GuestFilter.java:39)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.DatastoreCapabilityFilter.doFilter(DatastoreCapabilityFilter.java:44)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at X.filter.FileFilter.doFilter(FileFilter.java:55)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:722) 
```

概述我所做的事情：我有一个 A 类

我在其中

```
@Persistent
@Element(dependent = "true")
@Order(extensions = @Extension(vendorName = "datanucleus", key = "list-ordering", value = "index ASC"))
private List<B> profiles; 
```

现在在 B 我添加了：

```
@Persistent
@Element(dependent = "true")
private List<C> customSections; 
```

C内部有：

```
@Persistent
@Element(dependent = "true")
@Order(extensions = @Extension(vendorName = "datanucleus", key = "list-ordering", value = "index ASC"))
private List<D> entries; 
```

D 有：

```
@Persistent
private Integer index; 
```

B还有：

```
@Persistent
@Element(dependent = "true")
@Order(extensions = @Extension(vendorName = "datanucleus", key = "list-ordering", value = "index ASC"))
private List<E> configurations; 
```

对 E 我补充说：

```
@Persistent
@Element(dependent = "true")
@Order(extensions = @Extension(vendorName = "datanucleus", key = "list-ordering", value = "index ASC"))
private List<F> sections; 
```

F 内部有：

```
@Persistent
private Integer index; 
```

我有一个列表字段，我现在设置为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:48:10.723

好的，所以我发现问题在于 customSections 上没有索引。所以它应该是：

```
@Persistent
@Element(dependent = "true")
@Order(extensions = @Extension(vendorName = "datanucleus", key = "list-ordering", value = "index ASC"))
private List<C> customSections; 
```

希望这可以帮助某人:)

[第 968 行的代码](https://code.google.com/p/datanucleus-appengine/source/browse/trunk/src/com/google/appengine/datanucleus/scostore/FKListStore.java?r=986)似乎是相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T00:31:09.387

我们在升级 Google App Engine Java 项目的版本时遇到了同样的问题。由于没有索引，旧数据将无法正确加载。创建索引后，一切都开始工作。

# java - Apache HTTP 客户端 - 仅下载 HTML

> ID：16096930
> 
> 赞同：0
> 
> 时间：2013-04-19T03:53:16.213
> 
> 标签：java, android, apache, http

我在我的 android 应用程序中实现了一个 Apache Http 客户端，我只需要下载页面的实际 HTML，而不是图像、脚本或 css。有什么办法可以关闭这些吗？像这样的东西。。

```
client = new DefaultHttpClient();
client.setCssEnabled(false);
client.setJs(false);
client.setImages(false); 
```

我知道这些方法不存在，但您可能会理解我想要实现的目标。

谢谢你的帮助！

# umbraco - Umbraco 数据类型创建错误

> ID：16096933
> 
> 赞同：1
> 
> 时间：2013-04-19T03:54:03.187
> 
> 标签：umbraco

在 Umbraco 中为数据类型创建用户控件时出现错误？显示的错误是

> [InvalidCastException：无法将“ASP.usercontrols_xmas_shopshortdesc_ascx”类型的对象转换为“umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor”类型。]

有人知道这是什么错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:00:30.180

您的用户控件需要实现“umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor”。

有关更多详细信息，请参阅[使用 UMBRACO 用户控制包装器创建自定义数据类型](http://www.nibble.be/?p=24)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T11:23:25.573

下载 UComponent 插件并将其上传到包中。在那里，您可以在此插件的帮助下创建自己的自定义数据类型。

# javascript - Node.js 从 Crypto Buffer 保护随机浮点数

> ID：16096944
> 
> 赞同：0
> 
> 时间：2013-04-19T03:55:46.063
> 
> 标签：javascript, node.js, random, binary, buffer

[当然，不是出于任何实际目的，但我尝试使用 Node 的加密](http://nodejs.org/api/crypto.html)模块生成一个安全的随机浮点数。本质上，如下：

```
var crypto = require('crypto');
var buf = crypto.randomBytes(4);
var float = buf.readFloatBE(); 
```

就以下测试而言，这在平均 0.40% 的情况下不起作用。我没有得到浮点数，而是得到`NaN`.

```
var colors = require('colors');
var crypto = require('crypto');

var buf = new Buffer(4);
var fails = 0, tries = 100000;
var failures = [];

for (var i = 0; i < tries; i++) {
    var num = crypto.randomBytes(4).readFloatBE(0);
    try {
        buf.writeFloatBE(num, 0);
    } catch (e) {
        fails++;
        failures.push(buf.readUInt32BE(0).toString(2));
    }
}

var percent = 100 * fails / tries;
if (fails)
    percent = (percent.toFixed(2) + "%").red;
else
    percent = '0.00%'.blue.bold;
console.log('Test ' + 'complete'.green.bold + ', ' + percent + ": " + fails + " / " + tries);
fails && console.log('Failed'.red + ' values:', failures.join(', ')); 
```

我猜这是由于 IEEE 单精度浮点数规范，但我不熟悉浮点数是如何存储为二进制的。

为什么会发生这种情况，确切地说，除了简单地生成浮点数直到我得到一个有效数字之外，我该如何规避这个问题？

**编辑**：查看过滤后的二进制数据时，它们似乎都遵循相同的模式：前 8 位都已设置。其他一切都是随机的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:48:40.027

从当前版本的 node 可以明显看出，[缓冲区库](https://github.com/joyent/node/blob/f044a6f3faa057925813e7ab95a806a6edd0728d/src/node_buffer.cc#L906)的源代码在第 906 行指定，`noAssert`还检查提供的 Number 是否不是`NaN`，因此只需指定`noAssert`允许将`Infinity`、`NaN`和写入`-Infinity`缓冲区。

# .net - 如何获取传递给 Web 服务的对象的序列化 XML？

> ID：16096947
> 
> 赞同：1
> 
> 时间：2013-04-19T03:56:19.727
> 
> 标签：.net, xml, vb.net, web-services, serialization

我有一个使用 Web 服务的 VB.NET (2008) 控制台应用程序。一切正常——我已经使用 WSDL.exe 来导入 Web 服务的定义并创建适当的类，我可以与这些类交互以用数据填充它们，并且对 Web 服务的调用成功并且数据被传递.

但是，在成功传输数据后，我想将此事件记录到我的 Oracle 数据库中的一个表中——包括传输的 XML（以便稍后查看，以防对特定数据有疑问通过等）。如何获取通过这些对象的自动序列化（通过 .NET 内部管道）创建的 XML？

我可以自己序列化对象并获得数据的*近似*表示，例如：

```
Dim oStringBuilder As New StringBuilder
Dim oStringWriter As New StringWriter(oStringBuilder)
Dim oXmlTextWriter As New XmlTextWriter(oStringWriter)

'-- (oData, for the purposes of this example, is an instance of the main data class explosed in the code generated by WSDL.exe)
Dim oXmlSerializer as New System.Xml.Serialization.XmlSerializer(oData.GetType)

'-- Serialize the data to a StringBuilder
oXmlTextWriter.Formatting = Formatting.Indented
oXmlSerializer.Serialize(oXmlTextWriter, oData)

'-- Display serialized XML (in practice this would be an insert to a table, etc.)
MessageBox.Show(oStringBuilder.ToString) 
```

...但是，这实际上与实际传递给 Web 服务的内容不同（最值得注意的是，一些元素名称不同，并且它不包含相同的标头信息和根元素）。有些类具有 Serialization.XmlTypeAttribute 定义等，我假设 .NET 框架正在使用这些类来处理真正的 SOAP 管道。如何获取传递给 Web 服务的*实际XML？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:09:08.890

如果您别无选择，只能使用传统的 ASMX 技术（WSDL.EXE，“添加 Web 引用”），那么您应该使用[SoapExtension](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension.aspx)来记录您的服务请求和响应。

# javascript - Dojo 轻量级 (3.8kb) AMD 加载程序在哪里？

> ID：16096950
> 
> 赞同：1
> 
> 时间：2013-04-19T03:57:26.560
> 
> 标签：javascript, dojo

根据 Dojo 功能列表，有非常小的 4K 大小的加载器。

如果我使用标准

```
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"></script> 
```

然后下载的*dojo.js*长度为*41 869 字节*（在 about Page 对话框中注明）。

我找不到任何使用这个小加载器的例子，每个人似乎都包括*dojo.js*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:18:37.700

小型 AMD 加载程序需要由最终开发人员从 dojotoolkit 源构建。Dojo 1.9 beta 包含构建所需的配置文件，但仍不提供最小化的 dojo.js。

# c#-4.0 - 邮政编码大小测试 C#

> ID：16096953
> 
> 赞同：0
> 
> 时间：2013-04-19T03:57:54.533
> 
> 标签：c#-4.0, street-address, maskedtextbox

我有一小段代码一直在尝试开始工作，但没有。所以我来找专家了。我正在尝试测试邮政编码条目并将其限制为 5 位数。我的第一个问题是附加代码。它似乎没有正确计算长度。另外，我怎样才能限制用户，所以如果他们尝试输入第 6 个字符，它将不会显示或被接受？

```
private void textBoxZip_TextChanged(object sender, EventArgs e)
    {
        String userInputString;
        int length,
            max = 5;

        userInputString = textBoxZip.Text;
        numberTest(userInputString);

        length = userInputString.Length;
        if (length > max)
        {
            labelErrorMessage.Text = "Maximum length 5 numbers";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:09:46.177

如果您在 WinForms 应用程序中，您可以通过设置 MaxLength 属性来限制文本框的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:12:13.713

我认为使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)将是一个简单的解决方案。这将允许您轻松地仅接受指定格式的特定字符数。

MaskedTextBox 是 Visual Studio 控件工具栏中的标准 .NET 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:07:58.037

您应该查看事件`KeyDown`和`KeyPress`. 请参阅[MSDN Control.KeyPress 事件中的示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress%28v=vs.100%29.aspx)

# php - 如何通过保留所有旧数据来集成糖 CRM

> ID：16096958
> 
> 赞同：0
> 
> 时间：2013-04-19T03:59:10.150
> 
> 标签：php, wordpress, sugarcrm, orchardcms-1.6

我有一个旧的糖 CRM，我想将它升级到最新版本，我的意思是集成它并保留所有旧数据我该怎么办？我很高兴收到大家的来信！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:18:03.830

这取决于您当前版本的年龄。

常用方式：

1.  在不同的地方安装新版本。
2.  将所有数据从旧版本导出到 CSV。
3.  将所有数据导入新版本，导入管理器会要求您匹配字段，如果它们之间存在差异。
4.  检查新版本是否有效，将访问权限授予您的客户并关闭旧站点。

在进行导出/导入时，您需要关闭旧版本进行维护，以避免客户插入新数据。

# haskell - 键入强制执行的“严格/命令”子集/Haskell 版本

> ID：16096963
> 
> 赞同：5
> 
> 时间：2013-04-19T03:59:40.270
> 
> 标签：haskell, lazy-evaluation, strictness

我非常喜欢 Haskell，但我担心 Haskell 的主要问题之一是难以推理空间使用情况。基本上，thunk 和递归的可能性似乎会造成一些棘手的情况，其中似乎必须通过添加正确的严格性来非常小心，以免程序在特定输入上耗尽内存。

我喜欢 C/C++ 的一点是，我可以很快确定程序空间使用的上限，尤其是在避免递归的情况下。变量一目了然。

我想知道是否有一种方法可以创建 Haskell 的类型安全“命令式”子集，它没有 thunk，并且是严格的。

我了解[Data.STRef](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-STRef.html)提供可变单元格，但据我了解，这些单元格本身仍然是惰性的，并且可以包含 thunk。我正在考虑强制此类单元格中的数据严格，但我不确定如何以类型系统强制执行的方式执行此操作。

我在想类似“Strict Monad”的东西，但也许这不是这样做的正确形式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T04:42:36.813

我相当肯定在 Haskell 中实现这一点几乎是不可能的，它默认假设是惰性的。例如，标准库中的某些函数在严格的语言中是无用的，因为如果您请求它们的全部输出，它们实际上保证不会终止。因此，如果您有 Haskell 的“严格子集”，则很难与任何其他 Haskell 代码进行互操作，并且无论如何您都会有效地使用另一种语言进行编程。

另外，我认为您通过考虑单子来寻找错误的地方。`Data.STRef`确实与避免重击和懒惰无关。实际上，您想要的（严格性）与命令式无关，您不需要可变性或单子来获得它。有些编程语言和 Haskell 一样纯粹，但到处都是严格的。例如，我使用过的一个是[Mercury](http://www.mercurylang.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:32:14.180

我想了一堆。其他人也是如此：

*   [邮件列表线程](http://haskell.1045720.n5.nabble.com/More-speed-please-td3182083.html)
*   [GHC 门票](http://hackage.haskell.org/trac/ghc/ticket/1349)
*   [另一个邮件列表线程](http://comments.gmane.org/gmane.comp.lang.haskell.cafe/85976)

现在我自己的猜测。

在上述讨论中，大多数情况下的基本思想是，您可以`!`在*任何*类型上加上 a 以获得该类型的严格、明确评估的 WHNF 版本。所以`Int`可能是一个重击，而`!Int`绝对不是一个。这为类型检查器提出了有趣的问题。`!Int ~ Int`持有吗？如果不是——这两者是完全独立的、不兼容的类型——那么使用它们将是非常痛苦的。另一方面，如果它*确实*成立，则没有什么可以阻止在预期 an 的`Int`地方传递未评估的`!Int`- 毕竟，它们是相同的类型。理想情况下，您想要的是能够提供一个`!Int`where 和`Int`是预期的，但反之则不然。这听起来像一个子类型关系：`!a <: a`,`!a`是 的子类型`a`,`a`被评估和未评估的值（thunk）占据，而`!a`只有被评估的值。GHC 的类型系统没有子类型，可能也没有，因为类型系统的其他部分不能很好地与之交互。这是一个高度受限的特定子类型实例：程序员不能声明任意子类型关系，而是存在一个单一的、硬编码的关系：`forall a. !a <: a`. 我不知道这是否使它更合理地实施。

假设可以做到。你会得到更多的问题。如果您确实尝试提供预期的`Int`位置怎么办？`!Int`类型错误？理想情况下，我认为不会，而是编译器会插入代码来评估它，然后继续。好的。如何在预期的`[Int]`地方提供，或者在一般情况下？编译器怎么可能知道如何遍历任何给定的结构来找到它包含的那些点，评估那些，并且只评估那些？那会*是*类型错误吗？让我们说它是。程序员如何手动进行转换——从? 也许通过映射一个函数？但这是荒谬的。Haskell 非常懒惰。如果你把它应用到一个论点，`[!Int]``f a``f !a``a`*`f !a``f a``eval :: a -> !a``eval x`，然后在需要它的值之前，它将是一个 thunk。所以`eval x`不可能有 type `!a`。返回类型位置中的严格性注释没有任何意义。那么: `data Wrap a = Wrap { unwrap :: a }`, `eval' :: a -> Wrap !a`, 语义`Wrap !a`可能是一个 thunk，但是编译器会插入代码，这样当你评估它时，`!a`内部肯定也会被评估？实际上，这里有一个更简单的表述：( `data Wrap' a = Wrap' { unwrap' :: !a }`) `eval' = Wrap'`。这是现有的合法 Haskell，被我们新的严格类型所包含。这很好，我猜。但是一旦你尝试使用它，你就会再次遇到问题。你将如何从`f a`到`f !a`，再一次 - `fmap unwrap . fmap Wrap`？但`unwrap`有完全相同的问题`eval`. 所以这一切似乎都不是那么微不足道。那么看似无害的反向案例呢：`f !a`在`f a`预期的地方供应？那样有用吗？（换句话说，`f !a <: f a`？）这取决于如何`a`在`f`. 编译器必须了解协变、逆变和不变类型参数的位置——子类型化带来的另一件事。*

 *这是我想透的。这似乎比看起来更难。

还有一件有趣的事。您可能听说过也可能没有听说过未提升类型的概念：没有底部居住的类型。这就是，据我所知，与此相同。保证被评估为 WHNF 的类型；保证不是底部的类型。没有区别，对吧？GHC 实际上已经有一堆未提升的类型作为基元（`Int#`等），但它们是连线的（你不能添加新的）并且除了未提升之外还没有装箱，所以它们有不同的类型（`#`而不是`*`) 并且不能与普通类型混合。而`!a`将是一种未提升但盒装的类型`*`. 未提升的类型是我在类型理论上下文中多次提到的东西，所以也许有一些研究以更一般的方式实现它们。我还没看呢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T08:37:46.657

您可能有兴趣阅读[BangPatterns 语言扩展](http://hackage.haskell.org/trac/haskell-prime/wiki/BangPatterns)和Unboxed [types/operations](http://www.haskell.org/ghc/docs/6.12.3/html/users_guide/primitives.html)。但是你也应该知道任何函数总是具有盒装类型的含义。这是优化的责任，通过根据“bangs”和其他内容编译代码到函数中来消除任何 ref-kind 值。*

# php - WooCommerce - 在单个产品页面上用可变价格替换价格

> ID：16096965
> 
> 赞同：5
> 
> 时间：2013-04-19T03:59:42.393
> 
> 标签：php, wordpress, woocommerce, variations

我正在使用 WooCommerce。在产品单一页面上，它在标题和简短描述之后正确显示价格。但是，如果产品具有可变定价，它会再次显示更新的可变定价，但它位于数量字段的正上方。

我想做的是在选择变体后将标题和简短描述下的价格部分简单地更新为实际的变体价格。

它如何错误显示的示例：http: [//blessedbling.com/new/shop/my-beloved-bracelet/](http://blessedbling.com/new/shop/my-beloved-bracelet/)

有什么建议么？

# hadoop - Cloudera 管理器在 ubuntu 12.0.4LTS 上安装失败

> ID：16096969
> 
> 赞同：1
> 
> 时间：2013-04-19T03:59:56.387
> 
> 标签：hadoop, bigdata, cloudera

我尝试在 ubuntu 上安装最新的 cloudera 管理器，当我在伪分布式模式下安装 cluser 时出现以下错误，有人可以告诉我该怎么做我已经尝试过以下操作 a) 禁用 iptables b) 将我的 etc 主机更改为有以下条目 127.0.0.1 localhost 127.0.0.1 localhost.localdomain localhost

安装失败。无法从代理接收心跳。

```
Ensure that the host's hostname is configured properly.
Ensure that port 7182 is accessible on the Cloudera Manager server (check firewall rules).
Ensure that ports 9000 and 9001 are free on the host being added.
Check agent logs in /var/log/cloudera-scm-agent/ on the host being added (some of the logs can be found in the installation details). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:28:42.883

您还应该在 Cloudera Manager 和主机上声明主机名信息。

例如：

在 Cloudera 管理器中：

```
10.1.3.11   hadoop-host1.localdomain hadoop-host1
10.1.3.12   hadoop-host2.localdomain hadoop-host2
... 
```

在每个主机中：

```
10.1.3.10   cloudera-manager.localdomain cloudera-manager 
```

简单地说，我为 CM 和所有主机使用了相同的主机名列表。

# javascript - 对于 IOS Phonegap 应用程序，是否可以包含应用程序本地以外的 javascript 文件

> ID：16096972
> 
> 赞同：0
> 
> 时间：2013-04-19T04:00:05.083
> 
> 标签：javascript, ios, cordova, performance-testing

我正在使用 Phonegap，为 IOS 开发。该文档说明了不允许将新代码上传到应用程序的内容。Apple 是否允许我们执行以下操作：

```
 <script src='http://www.myurlserver.com/dir/dir/myfiles.js'></script> 
```

也可以从我的服务器上热链接图像吗？

我只是想确保我的应用不会被拒绝。这将允许我推送新的 javascript 代码，例如错误修复和新内容，而无需等待 7 天的苹果审核流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:23:02.890

您确实可以从您的服务器热链接图像。苹果对此没有任何问题。你可以继续做！

# ios - 用户的 Facebook 状态到 tableview

> ID：16096974
> 
> 赞同：0
> 
> 时间：2013-04-19T04:00:27.760
> 
> 标签：ios, xcode, facebook, uitableview

我是 Facebook 应用程序开发的新手，已经做了一些研究，但似乎找不到我想要的东西。这就是我想要做的。

我正在尝试创建一个应用程序，其中一部分将 facebook 用户的过去状态显示到从最新到最旧的 tableview 中。并且在应用程序内部能够将他们最喜欢的状态保存到收藏夹页面。 - 我对如何保存最喜欢的状态有一个很好的想法，但是我遇到的问题是将状态从 facebook 获取到应用程序。

如果有人能指出我正确的方向或帮助我，将不胜感激！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:09:58.537

```
 try the following code ..... provide a limit

     NSString * pRequestString2 = [NSString stringWithFormat:@"me/statuses?limit=100%@",[FBSession activeSession].accessToken];

    [[FBRequest requestForGraphPath:pRequestString2] startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

            NSLog(@"%@",result);

        }];

                                 or

try this ....

 NSString * pRequestString1 = [NSString stringWithFormat:@"me/feed?%@",[FBSession activeSession].accessToken];

[[FBRequest requestForGraphPath:pRequestString2] startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        NSLog(@"%@",result);

    }];

make sure you have proper permissions ..... 
```

# php - Codeigniter 会话变量不起作用

> ID：16096977
> 
> 赞同：0
> 
> 时间：2013-04-19T04:00:49.453
> 
> 标签：php, codeigniter, session

我正在使用 codeigniter 框架，我在会话中遇到了一些问题。

在我的登录表单中，我要求输入用户名和密码，然后如果提供的凭据有效，那么我将它们放入会话变量中。

```
$user_session_data = array(
'username' => $this->input->post('username'),
'is_logged_in' => 1
);
$this->session->set_userdata($user_session_data); 
```

之前一切正常。但是今天我在某些页面中添加了代码以将一些错误消息设置为会话。

```
$error_array[]="There Is An Error When Inserting Data In To The Database";
$this->session->set_userdata(array('upload_errors' => $error_array)); 
```

完成后。我可以登录到管理区域。但我不能做任何事情，它总是要求我再次登录。我认为第二个代码覆盖了记录会话数据。

任何想法来解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:28:28.243

请使用此代码在 codeigniter 中设置会话

```
$this->session->set_userdata('user_session', $user_session_data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T04:28:16.827

您正在调用`$this->session->set_userdata()`它两次，这将删除所有旧数据并设置一次新数据。

因此，如果您将其用于错误，则可以使用以下代码

如果您想显示错误 codeigniter 会话库具有执行此操作的功能

```
$this->session->set_flashdata('item', 'value'); 
```

使用上面的代码设置值并使用

```
$this->session->flashdata('item'); 
```

**参考：** [http ://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

# c++ - break/continue/return 是否应该被异常中断？

> ID：16096978
> 
> 赞同：9
> 
> 时间：2013-04-19T04:01:03.183
> 
> 标签：c++, language-lawyer

在学习我的语言时，我遇到了一个有趣的流程控制场景。如果在处理`break`语句时抛出异常会发生什么。GCC 似乎认为中断流程丢失了，但标准似乎对应该发生的事情保持沉默。

例如，下面的程序实际上应该做什么？

```
#include <iostream>
using namespace std;

struct maybe_fail {
    bool fail;
    ~maybe_fail() {
        if( fail )
            throw 1;
    }
};

int main() {
    for( int i=0; i < 6; ++i ) {
        cout << "Loop: " << i << endl;

        try {
            maybe_fail mf;
            mf.fail = i % 2;
            if( i == 3 )
                break;

        } catch( int ) {
            cout << "Caught" << endl;
        }
    }
    return 0;
} 
```

请注意， a`return`也将被阻止， a 也将被阻止`continue`（在 catch 之后添加输出以查看）。试图`goto`在街区外的尝试也会被抓住。

什么是正确的流程？该标准似乎没有解决这个问题：关于跳转语句的第 6.6 节没有提及，关于异常处理的第 15 节也没有提及。我确实理解析构函数中的异常形式非常糟糕，但是如果您将 BOOST_SCOPE_EXIT 之类的东西用于 defer 语句，则此行为可能变得非常重要。

*也许有趣的是，Java 和 Python 中也发生了相同的流程，因此至少在命令式语言中似乎存在一些一致性。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:10:14.803

这在 15.1 抛出异常中有所介绍：

> 2 当抛出异常时，控制权转移到最近的具有匹配类型的处理程序（15.3）；“最近的”是指 try 关键字后面的复合语句或 ctor-initializer 最近由控制线程进入但尚未退出的处理程序。

一旦控制转移到异常处理程序，它就会从那里继续。没有机制可以“记住”代码在 a 中间，`break`然后在处理异常后以某种方式恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:22:58.407

鉴于标准中的具体措辞，我要说它是模棱两可的。文本不足以确定这些情况的预期流程。由于编译器的编写方式，我们现在拥有的约定很可能只是偶然的。

请参阅我的博客主题[如何捕获“返回”语句](http://mortoray.com/2013/05/09/how-to-catch-a-return-statement/)。

# c - 读取在 C 中具有特定结构的文件

> ID：16096980
> 
> 赞同：0
> 
> 时间：2013-04-19T04:01:10.890
> 
> 标签：c, fgets

我有一个格式如下的文件：

```
*Elset, elset = _121:0_125:0
1,
4,
6,
8,
*Elset, elset = _122:0
5,
7,
2, 
```

在这个文件中，“121:0”、“125:0”和“122:0”是每一层的名称，后面的数据集属于这一层。我需要做的是为每一层存储这些数据集。如果同时有两层，则表示后续数据集同时属于这两层。问题是我不知道有多少“Elset, elset = ...”以及每一层有多少数据。有人可以给个提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:24:40.997

```
*Elset, elset = _121:0_125:0
1、

```

你可以这样做：

```
char line[whatever_max];
int target[2000]; // track data set number to populate
int target_pos = 0;
while (fgets(line, whatever_max, fd))
{
    int lhs, rhs, total_chars_used, chars_used;
    if (sscanf(line, "*Elset, elset = _%d:%d%n", &lhs, &rhs, &total_chars_used) == 2)
    {
        // somehow, record lhs:rhs as a target data set being loaded...
        target_pos = 0;
        target[target_pos++] = lhs;
        target[target_pos++] = rhs;

        while (sscanf(line + total_chars_used, "_%d:%d%n",
                      &lhs, %rhs, &chars_used) == 2)
        {
            target[target_pos++] = lhs;
            target[target_pos++] = rhs;
            total_chars_used += chars_used;
        }
    }
    else if (sscanf(line, "%d,", &data) == 1)
         // add data to all current targets...
    else
        assert(!"unparsable line");
} 
```

确切的细节取决于您的数据集存储结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:35:33.983

```
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>

typedef int Type;

#define INT 1
#define STR 2

typedef struct vector {
    Type type;
    size_t size;
    size_t capacity;
    void *array;
} Vector;

Vector *vec_make(Type type);
void vec_push(Vector* v, ...);
size_t vec_size(Vector *v);
void* vec_getArray(Vector *v);
void vec_drop(Vector *v);

typedef struct elset {
    Vector* layer;
    Vector* data;
} Elset;

#define RECORD_MAX 10

int main(void){
    Elset elset[RECORD_MAX];
    int input_count=-1;
    FILE *fp;
    char buff[1024];

    fp=fopen("data.txt", "r");
    while(fgets(buff, sizeof(buff), fp)){
        if(*buff == '*'){
            char *p;

            input_count += 1;//countup
            elset[input_count].layer = vec_make(STR);
            elset[input_count].data =vec_make(INT);
            for(p=strchr(buff, '_');p=strtok(p, "_\n");p=NULL){
                vec_push(elset[input_count].layer, strdup(p));
            }
        } else {
            vec_push(elset[input_count].data, atoi(buff));
        }
    }
    input_count += 1;
    fclose(fp);

    {   //check print
        int i, j, layerSize, dataSize;
        int *datas;
        char **layers;

        for(i=0;i<input_count;++i){
            layerSize=vec_size(elset[i].layer);
            layers=(char**)vec_getArray(elset[i].layer);
            for(j=0;j<layerSize;++j)
                printf("%s ", layers[j]);
            printf("\n");

            dataSize=vec_size(elset[i].data);
            datas=(int*)vec_getArray(elset[i].data);
            for(j=0;j<dataSize;++j)
                printf("%d ", datas[j]);
            printf("\n\n");
        }
        //deallocation
        for(i=0;i<input_count;++i){
            layerSize=vec_size(elset[i].layer);
            layers=(char**)vec_getArray(elset[i].layer);
            for(j=0;j<layerSize;++j)
                free(layers[j]);
            vec_drop(elset[i].layer);
            vec_drop(elset[i].data);
        }
    }
    return 0;
}

#define TypeSize(t) ((t == 1)? sizeof(int):sizeof(char*))

Vector *vec_make(Type type){
    Vector *v;
    v = (Vector*)malloc(sizeof(Vector));
    v->type = type;
    v->size = 0;
    v->capacity=4;
    v->array=realloc(NULL, TypeSize(type)*(v->capacity += 4));
    return v;
}

void vec_push(Vector* v, ...){
    va_list ap;

    va_start(ap, v);
    switch(v->type){
    case INT:
        ((int*)v->array)[v->size] = va_arg(ap, int);
        break;
    case STR:
        ((char**)v->array)[v->size] = va_arg(ap, char*);
        break;
    }
    va_end(ap);

    if(++v->size == v->capacity)
        v->array=realloc(v->array, TypeSize(v->type)*(v->capacity += 16));
}

size_t vec_size(Vector *v){
    return v->size;
}

void* vec_getArray(Vector *v){
    return v->array;
}

void vec_drop(Vector *v){
    free(v->array);
    free(v);
} 
```

# php - 在 PHP SQL 服务器中将连接字符串转换为 UTF-16 时出错

> ID：16096982
> 
> 赞同：0
> 
> 时间：2013-04-18T15:56:07.597
> 
> 标签：php, unicode, sql-server-2008-r2

我将 PHP 5.2.9 和 Micorsoft SQL Server 2008 R2 与 Apache 一起使用，并且有这样的 PHP 代码行

```
<?php
$serverName = "xxx-xxxxxxxxxxx\xxx"
$connection = array("数据库"=>"示例");
$conn = sqlsrv_connect($serverName, $connection);

如果（$conn）
{
     echo "连接建立。";
}
别的
{
     echo "无法建立连接。";
         打印_r（$连接）；
     死（print_r（sqlsrv_errors（），真））；
}
?>

```

但它显示如下错误：

> `Connection could not be established.
> 
> Array ( [Database] => example )
> 
> Array ( [0] => Array ( [0] => IMSSP [SQLSTATE] => IMSSP [1] => -47 [code] => -47 [2] => An error occurred translating the connection string to UTF-16: No mapping for the Unicode character exists in the target multi-byte code page. [message] => An error occurred translating the connection string to UTF-16: No mapping for the Unicode character exists in the target multi-byte code page. ) )`

对我的问题有什么建议吗？

# wordpress - redirectMatch 在“http://”中丢失 1 个斜杠

> ID：16096983
> 
> 赞同：0
> 
> 时间：2013-04-19T04:01:50.877
> 
> 标签：wordpress, apache, .htaccess, redirect, timthumb

我正在使用 redirectMatch 删除拇指链接中的 TimThumb 查询字符串 - Facebook API 不允许查询字符串。

我在用着：

```
redirectMatch 301 ^/thumb/(.*)$ http://mydomain.com/thumbs/timthumb.php?$1 
```

Apache 将我从以下位置重定向：

```
http://fotofly.lv/thumb/src=http://farm9.staticflickr.com/8250/8591752640_54300394_n.jpg&h=160&q=60&f=.jpg 
```

至

```
http://fotofly.lv/thumbs/timthumb.php?src=http:/farm9.staticflickr.com/8250/8591752640_54300394ae_n.jpg&h=160&q=60&f=.jpg 
```

http:// 中缺少 /

尝试重写链接，没有成功。我怎样才能让那个斜线回到原来的位置？

# php - php获取最新日期

> ID：16096985
> 
> 赞同：2
> 
> 时间：2013-04-19T04:02:10.580
> 
> 标签：php, date, compare

我正在使用 php，我有一个字符串格式的日期列表。我想获得最新的，并让函数返回它..我似乎无法让它工作..也许有人可以帮助我..

```
<?php
    $list_of_dates = array("04/17/1999 05:15 AM - CST", "04/17/2000 05:18 AM - CST", "04/17/2000 05:19 AM - CST");

    function getLatestDate($in){
        $ret = ""; 
        foreach($in as &$date){
         $cnt = strtotime($date);
         if(strtotime($ret) > $cnt){
            $ret = $date;
         }
        }

        return $ret;
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T04:05:50.707

你的情况似乎颠倒了：

```
if(strtotime($ret) > $cnt){
        $ret = $date;
     } 
```

应该：

```
if ($ret === '' || strtotime($ret) < $cnt){
        $ret = $date;
     } 
```

如果`$ret`它的值低于（旧）于`$cnt`. 在第一次迭代`$ret`中将是空字符串，所以你总是想覆盖它；当然，`strtotime('')`可能总是比其他任何东西都低，但这是区分的好形式。

# javascript - Mustache.js 使用当前每个作为索引

> ID：16096986
> 
> 赞同：0
> 
> 时间：2013-04-19T04:02:23.550
> 
> 标签：javascript, backbone.js, mustache

我目前正在像这样迭代模板中的一组项目（为简单起见更改了名称）：

```
{{#myArray}}
  <tr>
    <td>{{name}}</td>
    <td>{{type_id}}</td>
    <td>{{anotherArray[type_id].name}}</td>
  </tr>
{{/myArray}} 
```

其中`anotherArray`type_id 作为其键和值的名称属性。

我已经测试并且 type_id 确实打印了它的值，当我在 chrome javascript 控制台中查找我的数组时，它可以找到数组索引（和 name 属性）就好了。

`each`我应该如何在 Mustache.js中正确查找带有当前循环变量的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:52:50.010

Mustache 是故意简单的，因此您可以在模板中做的很少。如果除了简单的迭代 ( `{{#ary}}`) 和插值 ( `{{val}}`) 之外，您还需要其他任何东西，那么您必须在模板看到之前在 JavaScript 中预处理数据：

```
var data = [ ];
for(var i = 0; i < myArray.length; ++i)
    data.push({
        name: myArray[i].name,
        type_id: myArray[i].type_id,
        other_name: anotherArray[myArray[i].type_id]].name
    }); 
```

然后你会喂给`data`这样的模板：

```
{{#data}}
  <tr>
    <td>{{name}}</td>
    <td>{{type_id}}</td>
    <td>{{other_name}}</td>
  </tr>
{{/data}} 
```

# java - 如何在 java 中创建可用于整个应用程序实例的 java.awt.Font 对象？

> ID：16096992
> 
> 赞同：0
> 
> 时间：2013-04-19T04:03:47.900
> 
> 标签：java, swing, fonts, awt, uimanager

我需要`java.awt.Font`为我的项目创建一个对象，并且它需要可用于整个应用程序。我无法将字体安装到系统中，需要有关在运行时创建字体对象的任何帮助。我的 JDK 是 1.7.0_17，我的代码如下。

```
try {
    Font f = Font.createFont(Font.TRUETYPE_FONT, new File("DL-Paras...ttf"));
    jLabel1.setFont(f);
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

可以像整个应用程序实例中的系统属性一样调用对象吗？提前致谢。

编辑：谢谢大家，我得到了答案。

# java - WebDriver > 在同级框架之间切换

> ID：16096993
> 
> 赞同：0
> 
> 时间：2013-04-19T04:03:50.037
> 
> 标签：java, webdriver

我有以下带框架的 HTML

```
<frameset border="0" cols="*,0">
  <frame scrolling="auto" src="/cgi-bin/haipage/page.html?tpl=ntrc/index" name="smgleft">
    <html>
      <head>
    <frameset frameborder="0" border="0" rows="20%,*" cols="100%">
      <frame scrolling="no" marginheight="0" marginwidth="0" src="/cgi-bin/haipage/page.html?tpl=Administration/b" name="head">
      <frame scrolling="auto" marginhei![enter image description here][1]ght="0" marginwidth="0" src="/cgi-bin/haipage/page.html" name="main">
          </html>
          </frame>
        </frameset>
    </html>
  </frame>
</frameset> 
```

当我登陆页面时，我正在使用

```
 wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt("head")); 
```

因为我想访问“head”框架下的一些元素

现在我想切换 frame = main，所以我正在使用

```
 driver.switchTo().defaultContent();
 driver.switchTo().frame("main"); 
```

但我收到错误消息“无法找到框架”。我相信对 driver.switchTo().defaultContent() 的调用会到达顶部，然后再下降到您想要的框架。

此外，当我在切换到 defaultContent() 后尝试查找帧时，我在日志中只看到一帧 = 'smgleft'

```
 List<WebElement> frameset = driver.findElements(By.tagName("frame"));  
   if(frameset.size()>0) {  
            for (WebElement framename : frameset)
                logger.info("frameid: " + framename.getAttribute("name"));               
            } 
```

我在这里错过了什么吗？如何在同级框架之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:22:19.217

据我所知，没有所谓的“在兄弟框架之间切换”这样的东西。你所做的理论上应该是正确的（除非你想`main`从默认内容进入，你需要先切换到`smgleft`）

那你试过了吗

```
driver.switchTo().defaultContent();
driver.switchTo().frame("smgleft");
// maybe some debugging here see if you can find frame "main" now
driver.switchTo().frame("main"); 
```

# java - 存储在 LinkedList 中的对象 s 无法在 JAX-WS RPC 调用中存活？

> ID：16096996
> 
> 赞同：1
> 
> 时间：2013-04-19T04:04:12.913
> 
> 标签：java, xml, jax-ws, xml-rpc

在开发使用 JAX-WS RPC 样式 XML 的服务器/客户端应用程序期间，我发现每当我`LinkedList<T>`在 JAX-WS 上使用 a 作为参数或返回类型时，say 的内容`LinkedList<T>`都会消失。

我写了一个示例程序来演示这个问题。在这个应用程序中，创建了一个新的服务器“Vegeta”，客户端“Nappa”可以向它提问。每个都是 a 的句子`LinkedList<Word>`通过 JAX-WS RPC 在它们之间传递。这些`LinkedList<Word>`物品总是空着到达另一边。

**有谁知道为什么会这样？**

如果有帮助，我的演示代码如下。任何和所有的答案将不胜感激。

*Interface IServer 是 Nappa 用来与 Vegeta 对话的接口：*

```
package com.stuffvegetasays;
import java.util.LinkedList;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

@WebService
@SOAPBinding(style = Style.RPC)
public interface IServer 
{
    @WebMethod abstract LinkedList<Word> answer(LinkedList<Word> question);
} 
```

*Vegeta 类实现了 IServer（并因此充当服务器）将自身传递给 Nappa，以便 Nappa 可以使用 RPC 访问它的方法*

```
package com.stuffvegetasays;
import java.util.LinkedList;
import javax.jws.WebService;
import javax.xml.ws.Endpoint;

@WebService(endpointInterface = "com.stuffvegetasays.IServer")
public class Vegeta implements IServer
{   
    public static void main(String[] args) 
    {
        Vegeta vegeta = new Vegeta();

        System.out.println("Starting Server");
        String serverAddress = "http://0.0.0.0:9000/Vegeta";
        Endpoint serverEnd = Endpoint.create(vegeta);
        serverEnd.publish(serverAddress);
        System.out.println("Server Published!");
    }

    @Override
    public LinkedList<Word> answer(LinkedList<Word> question) 
    {
        System.out.println(question);
        LinkedList<Word> answer = new LinkedList<Word>();
        answer.add(new Word("\n\n"));
        answer.add(new Word("It's "));
        answer.add(new Word("over "));
        answer.add(new Word("NINE "));
        answer.add(new Word("THOUSAND!!!"));
        return answer;
    }
} 
```

*Nappa 类充当客户端，调用 Vegeta 的 URL。*

```
package com.stuffvegetasays;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.LinkedList;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

public class Nappa
{
    // Do an RPC style call to the published server "Vegeta".
    public static void main(String[] args) {
    URL serverURL;
        try 
        {
        serverURL = new URL("http://localhost:9000/Vegeta/");
        QName appServerQName = new QName("http://stuffvegetasays.com/", "VegetaService");

        Service service = Service.create(serverURL, appServerQName);

        IServer vegeta = service.getPort(IServer.class);

        LinkedList<Word> question = new LinkedList<Word>();
        question.add(new Word("Vegeta! "));
        question.add(new Word("What "));
        question.add(new Word("does "));
        question.add(new Word("the "));
        question.add(new Word("scouter "));
        question.add(new Word("say "));
        question.add(new Word("about "));
        question.add(new Word("his "));
        question.add(new Word("power "));
        question.add(new Word("level?"));

        System.out.println(question);
        LinkedList<Word> quote = vegeta.answer(question);
        System.out.println(quote);
        } 
        catch (MalformedURLException e) 
        {
            System.err.println(e.getMessage());
            e.printStackTrace();
        }
    }
} 
```

*Word 类只是一个带有修改的 toString() 方法的字符串的容器。*

```
package com.stuffvegetasays;

public class Word
{
    String value;

    public Word(String value)
    {
        this.value = value;
    }

    public String toString()
    {
        return value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:58:24.017

> 避免直接返回集合。与其返回 a `List<X>`，不如返回一个包含 a 的 JavaBean `List<X>`。无论如何，这将使您对编组进行更详细的控制。

[*使用 JAX-WS 和 JAXB 生成 Web 服务*](http://shrubbery.mynetgear.net/c/display/W/Producing+a+Web+Service+with+JAX-WS+and+JAXB)

也可以看看：

*   [jax-ws webservice 中的泛型类会发生什么？](https://stackoverflow.com/a/298914/870248)

# java - 让 GWT 和 Dart 一起工作？有什么好处？

> ID：16096998
> 
> 赞同：4
> 
> 时间：2013-04-19T04:04:20.327
> 
> 标签：java, gwt, dart

我最近发现了 Dart 和 GWT 集成，（顺便说一句，我是 GWT 开发人员）虽然我没有时间观看视频，但我对学习如何使用我的 GWT 应用程序进行测试很感兴趣；现在我正在研究如何让 Dart 首先在我的 GWT 客户端代码上工作。

**问题：**

*   在做 Dart + GWT 时，应用程序的哪些部分可以一起工作？
*   在客户端，GWT 和 Dart 可以一起工作，因为两者都编译为 Javascript？而关于这部分，Dart Browser 端对 Restful 接口的访问在代码维护方面是否更好？
*   Dart 服务器端（字节码）是否可以在 JVM 中运行？或者那会很慢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:29:08.243

[Shannon Behrens 的这个视频和博客文章](http://news.dartlang.org/2013/02/dart-with-google-web-toolkit.html)（我猜是你在问题中提到的那个）讨论了使用 GWT 和 Dart。

1.  视频中涵盖了以下主题，它回答了您问题的第一点。

    *   使用 GWT 和 Dart 管理同一页面的不同部分
    *   使用 Dart 从 Java servlet 中检索 JSON
    *   使用 window.postMessage 和 JSNI 在 GWT 和 Dart 之间传递消息
    *   使用 JavaScript、JSNI 和 Dart 的 js 包实现 GWT 和 Dart 之间的同步互操作
    *   使用 CustomEvent 对象和 Elemental 在 GWT 和 Dart 之间传递消息
2.  关于第二个问题，Dart 使用与 JavaScript 相同的底层 AJAX APIS，例如 JavaScripts`XMLHttpRequest`在`HttpRequest`Dart 中。使用它，您可以从 RESTful API 获取/发布等。

3.  第三个问题“Dart 服务器端（字节码）是否可以在 JVM 中运行”：Dart 没有字节码。服务器端的 Dart 就像 node.js（服务器端 javascript）、python、ruby 等......而不是像 Java 那样被编译成字节码的形式。有一个早期的实验来获取 Dart 代码并使其在 JVM 上运行，但这更像是一个早期的概念证明，而不是任何实际使用的东西（参考：[https](https://code.google.com/p/jdart/) ://code.google.com/p/jdart/ ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:12:29.673

1.  GWT 在未来几年不能被 Dart 取代。Dart 仍在 MileStone 4 中。[此处](http://www.igvita.com/2012/01/05/google-web-toolkit-gwt-closure-nacl-dart-js/)总结了 Google 的 Web wrt GWT、DART、Closure 等方法。

2.  与 GWT wrt to JSON 相比，我没有看到 Dart 的任何好处。它可以争论，但永远不会在任何一方解决。

3.  Dart 可能已经支持 GAE - [http://news.dartlang.org/2013/03/irrduino-sprinkler-system-built-using.html](http://news.dartlang.org/2013/03/irrduino-sprinkler-system-built-using.html)

**注意：** 我只用 Dart 编写了几个 hello world 程序。截至今天，Dart 处于 Milestone 4 版本中

1.  Dart 仅在自定义 Chrome（Dartium 浏览器）中运行。Firefox，IE 可能永远不会原生支持它并且目前对它怀有敌意！！！！Dart 编译为 Javascript（Dart2JS 编译器）的方式与 GWT 将 java 编译为 javascript 的方式相同。这使其能够提供与 IE、Firefox 的兼容性。

2.  除非 Dart 得到 FireFox 的支持或 10 倍或 100 倍的性能 wrt javascript，否则它不太可能在其他浏览器中获得牵引力。目前在 dartium 浏览器中本地运行时，它的性能大约是 javascript 的 2 倍或 3 倍。