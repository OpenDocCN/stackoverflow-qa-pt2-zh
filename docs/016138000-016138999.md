# StackOverflow 问答 16138000-16138999

# android - 在 Android 中将收到的 SMS 作为 TOAST 处理

> ID：16138004
> 
> 赞同：0
> 
> 时间：2013-04-22T01:14:28.077
> 
> 标签：android, sms, broadcastreceiver, toast

我需要你的帮助，就像你以前一样。我的应用程序的一部分是关于在 android 中发送和接收 SMS。我做了很多研究，特别是过去在这个论坛上发帖。但我没有得到我正在寻找的答案。我能够在接收安卓手机上发送和接收短信。重要的是我想处理收到的短信以将其显示为 TOAST。它只会发送到带有通知但没有 TOAST 的收件箱。同时，我在我的 broadcastReceiver 类中接收我的拨出电话号码，我想知道将 SMS 处理为 TOAST 的规范。请帮我！

这是我作为 TOAST 进行 SMS 处理的接收器类。它真的不是我的：

```
import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.os.Bundle;
    import android.telephony.SmsMessage;

    public class Receiver extends BroadcastReceiver
    {

      @Override
      public void onReceive(Context context, Intent intent)
      {
        Bundle bundle = intent.getExtras();

        String recMsgString = "";
        String fromAddress = "";

        SmsMessage recMsg = null;
        byte[] data = null;

        if (bundle != null)
        {
          //---retrieve the SMS message received---
          Object[] pdus = (Object[]) bundle.get("pdus");
          for (int i = 0; i < pdus.length; i++)
          {
            recMsg = SmsMessage.createFromPdu((byte[]) pdus[i]);

            try
            {
              data = recMsg.getUserData();
            }
            catch (Exception e)
            {

            }
            if (data != null)
            {
              for (int index = 0; index < data.length; ++index)
              {
                recMsgString += Character.toString((char) data[index]);
              }
            }

            fromAddress = recMsg.getOriginatingAddress();
          }
        }

        Intent result = new Intent(context, ReceiveActivity.class);
        result.putExtra(SMSReceive.MESSAGE, "Received SMS from " + fromAddress + ": " + recMsgString);
        result.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(result);
      }
    }

    ReceiverActivity.java

           public class ReceiverActivity extends Activity
            {

              @Override
              protected void onCreate(Bundle savedInstanceState)
              {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                Intent intent = getIntent();

                String message = intent.getStringExtra(MESSAGE);
                Log.i("This is the message", message);

                if (message != null)
                {
                    Toast.makeText(getApplicationContext(),message, Toast.LENGTH_LONG).show();
                }
              }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:21:41.493

试试这样：

```
 /*
    Intent result = new Intent(context, ReceiveActivity.class);
    result.putExtra(SMSReceive.MESSAGE, "Received SMS from " + fromAddress + ": " + recMsgString);
    result.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(result);
    */
    Toast.makeText(context, recMsgString, Toast.LENGTH_SHORT).show(); 
```

# tcl - 声明 tcl 列表时如何使用变量的值

> ID：16138007
> 
> 赞同：1
> 
> 时间：2013-04-22T01:14:59.490
> 
> 标签：tcl

是否可以在 tcl 列表声明中使用变量？我有以下简单的例子：

```
set grape_color "green"

set produce_list {\
   { PRODUCE COLOR             REGION  }\
   { APPLE   "red"             TX }\
   { GRAPE   $grape_color      CA }\
}

puts $produce_list 
```

代码的输出是这样的：

```
{ PRODUCE COLOR             REGION  } 
{ APPLE   "red"             TX }
{ GRAPE   $grape_color      CA } 
```

但我想要“绿色”而不是`$grape_color`在列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:59:42.467

一种方法是使用`list`命令。

```
set grape_color green
set produce_list [list \
    [list PRODUCE COLOR        REGION] \
    [list APPLE   red          TX] \
    [list GRAPE   $grape_color CA]] 
```

另一种方法是使用`subst`命令。

```
set grape_color green
set produce_list {
    { PRODUCE COLOR        REGION }
    { APPLE   red          TX }
    { GRAPE   $grape_color CA }
}
set produce_list [subst -nobackslashes -nocommands $produce_list] 
```

# java - 对代理的输入/输出流感到困惑

> ID：16138009
> 
> 赞同：1
> 
> 时间：2013-04-22T01:15:19.773
> 
> 标签：java, proxy, stream

尝试用 Java 编写一个非常简单的、简单的线程 HTTP 代理服务器，我取得了很好的进展：

1.  客户端连接到服务器，对客户端进行输入和输出流

2.  从 GET 请求中提取目标 URL

3.  与目标 Web 服务器建立连接，并建立输入流

现在我明白我需要发送来自服务器输入流的数据并将其转发到客户端输出流，但是如何准确地做到这一点让我无法理解。我在输入和输出流方面的经验的扩展一直是发送单个字符串，而且我对这些流的工作原理还不太清楚。

我应该将输入流中的所有数据读取到文件中，然后写入输出流吗？有没有更优雅的解决方案？

这是我的代码：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Proxy {

/////////////////////////////////////
public static void go(){

int incomingport = 50000;
ServerSocket myproxysocket = null;

try{
myproxysocket = new ServerSocket(incomingport);
while(true){
System.out.println("HTTP Java Proxy Server");
System.out.println();
System.out.println("Listening on port 50000...Press CTRL+C to exit");
System.out.println();
Socket client = myproxysocket.accept();
Thread t = new Thread(new ClientHandler(client));
t.start();
}//end while
}//end try

catch(Exception E){
E.printStackTrace();    
}
}//end method go()

///////////////////////////////////
public static void main(String args[]) {

Proxy myserver =  new Proxy();
myserver.go();

}//end main
}//end class proxy

/////////////////////////////////////////////////////////////////////////////////////
class ClientHandler implements Runnable{

private final DataInputStream clientin;
private final DataOutputStream clientout;
private final Socket clientSocket;

//constructor----------------
public ClientHandler(Socket incomingSocket) throws IOException{

clientSocket = incomingSocket; 
clientin = new DataInputStream(incomingSocket.getInputStream());
clientout = new DataOutputStream(incomingSocket.getOutputStream());

}//--------------------------

////////////////////
public void run(){
try{

//Get URL from client
String getrequestline = clientin.readLine();
String targetURL = null;
String clientIP = null;
StringTokenizer st = new StringTokenizer(getrequestline);
st.nextToken();
targetURL = st.nextToken();
clientIP = clientSocket.getRemoteSocketAddress().toString();
System.out.println();
System.out.println("IP: " + clientIP);
System.out.println("Requested URL: " + targetURL);
System.out.println();

//connect to target URL
URL url = new URL(targetURL);
URLConnection targetconnection = url.openConnection();
targetconnection.setDoInput(true);
targetconnection.setDoOutput(false);

InputStream is = targetconnection.getInputStream();

//How do I read in from is and write out to clientout?

//clientout.write(???????)

}//try
catch(Exception E){
 E.printStackTrace();
}//catch
finally{
try{clientSocket.close();}
catch(Exception ee){}
}//finally
}//end run----------

}//end CLASS-------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:45:53.287

有一个非常整洁的实用程序类

```
org.apache.commons.io.IOUtils 
```

这来自 commons-io 包。如果可以，请使用它。否则，一个简单的方法（不使用任何 NIO 的东西）将是这样的：

```
public static void copy(InputStream is, OutputStream os) throws IOException {
    byte[] buff = new byte[1024*1024];
    int a = 0;
    while((a = is.read(buff)) > -1) {

        // a is the number of bytes ACTUALLY read, so 
        // when we write, that's the number of bytes to write
        os.write(buff,0,a);
    }
    os.flush();
} 
```

而且，像往常一样，不要忘记冲洗。

# python - 继承麻烦。- Python

> ID：16138010
> 
> 赞同：5
> 
> 时间：2013-04-22T01:15:34.723
> 
> 标签：python, inheritance

有人在这个网站上遇到了同样的问题，但答案与我遇到的问题无关。
继承 - 方法调用

考虑以下类定义。

```
class C1(object):
    def f(self):
        return 2*self.g()

    def g(self):
        return 2

class C2(C1):
    def f(self):
        return 3*self.g()

class C3(C1):
    def g(self):
        return 5

class C4(C3):
    def f(self):
        return 7*self.g()

obj1 = C1()
obj2 = C2()
obj3 = C3()
obj4 = C4() 
```

对于这个问题，您要考虑在调用方法时调用了哪些方法`f`。因此，例如，当`obj1.f()`被调用时，调用的`f`方法`C1`会调用 的`g`方法`C1`。这可以表示为表单的“呼叫列表”

```
['C1.f', 'C1.g'] 
```

编写三个赋值语句，分别将“调用列表”赋给`obj2.f()`变量`obj2_calls`，将“调用列表”赋给`obj3.f()`变量，将“调用列表”`obj3_calls`赋给`obj4.f()`变量`obj4_calls`。

我理解第一个作业没有问题，`obj2_calls = ['C2.f', 'C1.g']`
但我正在绞尽脑汁想弄清楚下一个作业。我想既然没有`C3.f`那个列表，`['C1.f']`但不幸的是它不是。

澄清一下，这是作业

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:35:17.367

This has to do with the method resolution order (MRO) of your class. (see [here](https://stackoverflow.com/questions/1848474/method-resolution-order-mro-in-new-style-python-classes) for some useful info)

As you stated correctly, there is no `C3.f` function, so python looks up the `f` method on the first base-class in the MRO that has `f` defined. In this case, that is (`C1`). Now, that method (`C1.f`) calls `self.g()`. In this case `self` **is an instance of `C3`**, so of course, `self.g` calls `C3.g` since that is the highest `g` function in the MRO. If you wanted to guarantee that you get `C1.g`, you'd need to do it explicitly:

```
class C1(object):
    def f(self):
        return 2*C1.g(self)
    def g(self):
        return 5 
```

which also makes a nice lead-in to talking about double-underscore name mangling. Since that is a separate topic though, maybe it's best to only leave a [link to some useful documentation](http://docs.python.org/2/tutorial/classes.html#tut-private).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:34:01.383

obj3_calls 是`['C1.f', 'C3.g']`. 正如您所指出`C3.f`的，该类中没有，但是此方法是从`C1`. 这又会调用`self.g`，并且由于`C3.g` **已**定义，它会覆盖从 继承的方法`C1`。

# php - 用 PHP Mcrypt 加密和用 MySQL aes_decrypt 解密？

> ID：16138012
> 
> 赞同：2
> 
> 时间：2013-04-22T01:15:55.327
> 
> 标签：php, mysql, encryption, aes, rijndael

是否可以使用 PHP 加密数据`mcrypt`并使用 MySQL 在数据库中解密`AES_DECRYPT`？目前，我在 PHP 上使用`RIJNDAEL_128`for 。`mcrypt`我还确保数据库中的加密字段具有 data type `blob`。然而，`AES_DECRYPT`使用正确的密钥仍然返回`NULL`。关于如何让它工作的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:57:38.500

[我在这里](http://forums.devnetwork.net/viewtopic.php?f=34&t=97082)找到了一些很好的帮助

**请注意，这适用于纯文本中最多 65519 个字符的加密文本。**（如果没有 UTF-8 编码可能会更多）

要加密的 PHP 代码：

```
// MySQL uses 16 bytes key for 128 encryption/decryption
$key = "ABCDEF0123456789";

$plaintext = "This string was AES-128 / EBC / ZeroBytePadding encrypted.";
// Optionally UTF-8 encode
$plaintext_utf8 = utf8_encode($plaintext);
// Find out what's your padding
$pad_len = 16 - (strlen($plaintext_utf8) % 16);
// Padd your text
$plaintext_utf8 = str_pad($plaintext_utf8, (16 * (floor(strlen($plaintext_utf8) / 16) + 1)), chr($pad_len));

// Encryption
mt_srand();
$td = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_ECB, '');
mcrypt_generic_init($td, $key, false);
// Generates a warning about empty IV but it's Ok
$ciphertext = mcrypt_generic($td, $plaintext_utf8);
mcrypt_generic_deinit($td);
$ciphertext = mysql_real_escape_string($ciphertext);

// Store in MySQL
$mysqli = new mysqli("localhost", "test", "test", "test");
$mysqli->set_charset("utf8");
$mysqli->query("insert into test(content) value ('$ciphertext')");
$mysqli->close(); 
```

要搜索的 SQL 查询`string was`：

```
SELECT CAST(AES_DECRYPT(content,'ABCDEF0123456789') AS CHAR) AS content
FROM test
WHERE CAST(AES_DECRYPT(content,'ABCDEF0123456789') AS CHAR) like '%string was%'; 
```

输出是：

```
This string was AES-128 / EBC / ZeroBytePadding encrypted. 
```

注意：MySQL 表由以下人员创建：

```
create table test (
id int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
content blob ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:28:14.203

如果您`RIJNDAEL_128`在 PHP 端使用 mcrypt 进行加密，那么我建议您在 PHP 端进行解密。不久前，当涉及到我的一个申请的学生证号码时，我遇到了同样的问题。我选择反对让数据库进行任何类型的加密/解密。我强烈建议将其留给一个系统（在本例中为 mcrypt）。原因是现在您可以减少可能出错的“移动”部件，从而更轻松地进行维护并更轻松地记录[审计跟踪](http://en.wikipedia.org/wiki/Audit_trail)。您的数据库应该用于存储数据（不足为奇），因此只需确保数据库中的长度适合您所存储的内容。

希望这能回答你的问题/以某种方式帮助你，因为这就是我会这样做/实际上正在这样做。

现在，如果您需要查看一些有关其工作原理的代码，请询问。根据我的理解，虽然我认为您知道如何进行加密/解密，但您只是在询问数据库是否应该解密信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T15:45:55.723

如果您希望您的解决方案可扩展到许多用户，那么在搜索期间解密数据库中的数据似乎是个问题。

我建议您查找旧宝石“绽放过滤器”。它通常用于拼写检查器，但也可用于加速数据库中的搜索。 [https://en.wikipedia.org/wiki/Bloom_filter](https://en.wikipedia.org/wiki/Bloom_filter)

布隆过滤器是位掩码。您需要创建一系列不同的散列函数，这些函数生成与布隆过滤器大小相同的散列，但每个散列函数只设置一个随机位。

然后，您通过这些散列函数运行一个单词（字符串）并将这些位添加到您的过滤器中。现在过滤器“知道”你的话。

过滤器是紧凑的，因为单词可以在过滤器中相互重叠。

要检查一个单词是否在过滤器中，您只需在其上运行散列函数并检查是否所有位都使用二进制 AND 操作在过滤器中设置。MySQL 支持二进制操作。

**您永远不能从过滤器中删除一个单词，**因为这些位可以是多个单词的一部分。

**文本永远无法**从布隆过滤器中恢复。

布隆过滤器**永远不会给出假阴性**，但它**可以给出假阳性**。如果您得到误报，那么您的过滤器与您的数据集（存储在过滤器中的单词）相比太小，或者您的散列函数不够好。需要多少个散列函数取决于数据的大小，尝试 5-20。

提示！您还可以向您的布隆过滤器添加成对的单词或三组单词。

# python - 检查一个列表中的任何元素是否在另一个列表中

> ID：16138015
> 
> 赞同：35
> 
> 时间：2013-04-22T01:16:26.513
> 
> 标签：python, list

我正在尝试比较两个列表，如果第一个列表中的任何值在第二个列表中，则只需打印一条消息。

```
def listCompare():
  list1 = [1, 2, 3, 4, 5]
  list2 = [5, 6, 7, 8, 9]
  if list1 in list2:
    print("Number was found")
  else:
    print("Number not in list") 
```

在此示例中，我希望`if`评估为，`True`因为 5 在两个列表中。这不起作用，我不确定比较这两个列表的最简单方法。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-22T01:26:01.047

你可以通过多种方式解决这个问题。一个很容易理解的方法是只使用一个循环。

```
def comp(list1, list2):
    for val in list1:
        if val in list2:
            return True
    return False 
```

一种更紧凑的方法是使用[`map`](https://docs.python.org/2/library/functions.html#map)and [`reduce`](https://docs.python.org/2/library/functions.html#reduce)：

```
reduce(lambda v1,v2: v1 or v2, map(lambda v: v in list2, list1)) 
```

更好的是，`reduce`可以替换为[`any`](https://docs.python.org/2/library/functions.html#any)：

```
any(map(lambda v: v in list2, list1)) 
```

您还可以使用集合：

```
len(set(list1).intersection(list2)) > 0 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-22T01:29:39.147

有不同的方法。如果您只想检查一个列表是否包含另一个列表中的任何元素，您可以这样做..

```
not set(list1).isdisjoint(list2) 
```

我相信 using`isdisjoint`比`intersection`Python 2.6 及更高版本更好。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-12T07:25:54.900

有一个内置函数来比较列表：

以下是 cmp() 方法的语法 -</p>

```
cmp(list1, list2)

#!/usr/bin/python

list1, list2 = [123, 'xyz'], [123, 'xyz']

print cmp(list1,list2) 
```

当我们运行上面的程序时，它会产生以下结果 -</p>

```
0 
```

如果结果是平局，则意味着返回 0

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-22T02:05:10.510

您的原始方法可以与列表理解一起使用：

```
def listCompare():
  list1 = [1, 2, 3, 4, 5]
  list2 = [5, 6, 7, 8, 9]
  if [item for item in list1 if item in list2]:
    print("Number was found")
  else:
    print("Number not in list") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-16T14:18:20.997

您可以将列表更改为集合，然后使用 & 函数比较两个集合。例如：

```
list1 = [1, 2, 3, 4, 5]
list2 = [5, 6, 7, 8, 9]

if set(list1) & set(list2):
    print "Number was found"
else:
    print "Number not in list" 
```

“&”运算符给出了两个集合之间的交点。如果有交叉点，则返回一个包含交叉点的集合。如果没有相交点，则将返回一个空集。

当您在 Python 中使用“if”运算符评估空集/列表/字典/元组时，将返回布尔值 False。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-01T13:32:05.940

我在我的一个项目中编写了以下代码。它基本上比较列表中的每个单独元素。如果它适合您的要求，请随意使用它。

```
def reachedGoal(a,b):
    if(len(a)!=len(b)):
        raise ValueError("Wrong lists provided")

    for val1 in range(0,len(a)):
        temp1=a[val1]
        temp2=b[val1]
        for val2 in range(0,len(b)):
            if(temp1[val2]!=temp2[val2]):
                return False
    return True 
```

# javascript - 路径“d”属性的 SVG 错误

> ID：16138016
> 
> 赞同：0
> 
> 时间：2013-04-22T01:16:29.203
> 
> 标签：javascript, svg

我正在尝试使用 JavaScript 动态创建路径，但该`d`属性不断给出`Uncaught SyntaxError: Unexpected token ILLEGAL.`

```
var location = document.createElementNS(svgns,"path");
    location.setAttributeNS("fill-rule","evenodd");
    location.setAttributeNS("fill","#ffffff");
    location.setAttributeNS("clip-rule","evenodd");
    location.setAttributeNS(null,"d","M57.295,27.757c-11.896,0-21.539,9.643-21.539,21.539S57.295,86.5,57.295,86.5
    s21.539-25.309,21.539-37.205S69.19,27.757,57.295,27.757z M57.295,60.039c-6.373,0-11.539-5.166-11.539-11.539
    s5.166-11.539,11.539-11.539S68.833,42.127,68.833,48.5S63.667,60.039,57.295,60.039z");

    locationBTn.appendChild(locationStroke0);
    locationBTn.appendChild(location);

    document.getElementsByTagName('svg')[0].appendChild(locationBTn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:03:49.003

像这里一样指定路径数据时要小心。换行会引起麻烦。

作为一个简化的例子：

```
location.setAttributeNS(null,"d","M5.5,
27.2,
c11.89,
0-21.5,9.6"); 
```

不一样

```
location.setAttributeNS(null,"d","M5.5,27.2,c11.89,0-21.5,9.6"); 
```

* * *

你有几个选择：

**A）把它放在一行上：**

```
location.setAttributeNS(null,"d","M57.295,27.757c-11.896,0-21.539,9.64321.539,21.539S57.295,86.5,57.295,86.5s21.539-25.309,21.539-37.205S69.19,27.757,57.295,27.757z M57.295,60.039c-6.373,0-11.539-5.166-11.539-11.539s5.166-11.539,11.539-11.539S68.833,42.127,68.833,48.5S63.667,60.039,57.295,60.039z"); 
```

*（可能难以阅读和使用）*

**B) 使用多个字符串和 + 运算符：**

```
location.setAttributeNS(null,"d","M57.295,27.757"+
"c-11.896,0-21.539,9.64321.539,21.539S57.295,86.5,57.295,86.5s21.539-25.309,21.539-37.205S69.19,27.757,57.295,27.757z "+
"M57.295,60.039"+
"c-6.373,0-11.539-5.166-11.539-11.539s5.166-11.539,11.539-11.539S68.833,42.127,68.833,48.5S63.667,60.039,57.295,60.039z"); 
```

*（也许是最常见的解决方案）*

或者

**C) 使用 \ 转义返回字符并得到一个多行字符串：**

```
location.setAttributeNS(null,"d","M57.295,27.757c-11.896,0\
-21.539,9.64321.539,21.539S57.295,86.5,57.295,86.5s21.539-25.309,\
21.539-37.205S69.19,27.757,57.295,27.757z M57.295,60.039c-6.373,\
0-11.539-5.166-11.539-11.539s5.166-11.539,11.539\
-11.539S68.833,42.127,68.833,48.5S63.667,60.039,57.295,60.039z"); 
```

*（一个奇怪但有效的解决方案）*

* * *

有关 SVG 的“d”字符串中可以使用哪些字符的详细信息，请查看[http://www.w3.org/TR/SVG/paths.html#PathDataBNF](http://www.w3.org/TR/SVG/paths.html#PathDataBNF)

* * *

*PS - 确保`locationStroke0);`不是错字`locationStroke);`！*

# jsp - jsp调用另一个jsp

> ID：16138019
> 
> 赞同：0
> 
> 时间：2013-04-22T01:17:01.163
> 
> 标签：jsp, liferay

现在，我正在开发简单的 JSP portlet（不使用 struts）。我有 jsp 视图和第二个 jsp view_detail.jsp。在jsp视图中我写了这个：

```
<TD> <a href="<portlet:renderURL ><portlet:param name="view" value="/view_detail.jsp"/></portlet:renderURL>"><%=rs.getInt(1)%></a>
</TD> 
```

但它不起作用。请你帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:22:49.960

如果我对您的理解正确，您应该为此使用 API。

尝试以下步骤：

在 view.jsp 的开头，您需要包含 taglib：

```
<%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %>
<portlet:defineObjects /> 
```

然后你要插入网址的地方，把

```
<portlet:renderURL><portlet:param name="view" value="/view_detail.jsp" /></portlet:renderURL> 
```

所以决赛`<a href>`看起来像：

```
<a href="<portlet:renderURL><portlet:param name="view" value="/view_detail.jsp" /></portlet:renderURL>" target="_blank">Other JSP</A> 
```

链接无法按照您的方式完成，因为 other_jsp.jsp 页面显示在另一个页面中，因此您必须链接到门户页面，然后门户页面会在 portlet 中显示您的 jsp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:29:54.737

```
you should follow the below code and also check in portlet.xml
<init-param>
            <name>view-template</name>
            <value>/jsp/a.jsp</value>
        </init-param>   
 <body> 
      <portlet:renderURL var="other"> 
      <portlet:param name="jspPage" value="/jsp/b.jsp"/> 
      </portlet:renderURL> 
      <a href="<%=other%>">other</a> 
    </body>
    Example
    a.jsp

    <%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
    <%@ taglib uri="http://alloy.liferay.com/tld/aui" prefix="aui"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
      <portlet:renderURL var="other">
      <portlet:param name="jspPage" value="/jsp/b.jsp"/>
      </portlet:renderURL>
      <a href="<%=other%>">other</a>
    </body>
    </html>

    b.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
    hi karthik
    </body>
    </html> 
```

# html - 如何在没有页眉和页脚重叠的情况下在 div 中加载页面？

> ID：16138020
> 
> 赞同：0
> 
> 时间：2013-04-22T01:17:01.997
> 
> 标签：html, css, wordpress

我正在定制wordpress。在我的主文档中，我有页眉和页脚的代码，然后是中间的 div 来显示内容。我希望能够显示来自主要内容 div 中单击的导航链接的内容。如果有更好的解决方案，请告诉我。我遇到的问题是防止页眉和页脚与内容重叠。我认为这种方式是加载页面的非标准方式。如何在保持页眉和页脚到位且不与内容重叠的情况下加载其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:16:48.033

您可以通过增加特定的 z-index 值来解决此问题。增加该特定的 z-index 值将使页眉、页脚同时可见或使页眉和页脚重叠（通过进一步增加 z-index 值）。

# android - 使用 Authorize 从 Android 上传到 ASP.NET

> ID：16138022
> 
> 赞同：1
> 
> 时间：2013-04-22T01:17:47.077
> 
> 标签：android, asp.net-mvc, upload

我正在将图像从我的**android 设备**上传到我的**ASP.NET MVC Web 应用程序**，但我似乎无法让该`[Authorize]`功能正常工作。

我在我的**android 设备**上的**WebView**中访问我的**ASP.NET MVC Web 应用程序**并且工作正常。当我使用[此方法](https://stackoverflow.com/questions/7632737/android-send-a-image-and-save-url/)上传图像时，忘记了用户登录，并且上传没有足够的权限来工作。当我从上传控制器中删除时，上传从 android 可以正常工作。****`[Authorize]``[Authorize]`****

 ****上面链接的方法是否有任何原因会导致帐户信息被遗忘？也许是因为它是在 android 上的不同线程上完成的？

`[Authorize]`从 android 上传到 ASP.NET MVC Web 服务时，该方法是否可以工作？****

# intuit-partner-platform - 不支持 V3 的 CreditCardPayment？

> ID：16138023
> 
> 赞同：0
> 
> 时间：2013-04-22T01:17:49.457
> 
> 标签：intuit-partner-platform

向 IPP Api 的 V3 发送信用卡付款（有关详细信息，请参阅请求）时，我收到以下错误：

```
<Message>Feature Not Supported Error</Message>
<Detail>Feature Not Supported Error : CreditCardPayment</Detail> 
```

令人沮丧的是，我在之前的一篇文章[销售收据流程信用卡支付 QBO V2](https://stackoverflow.com/questions/16067969/sales-receipt-process-credit-card-payment-qbo-v2)中被特别告知 V2 不支持 CreditCardPayment，但 API 的 V3 支持。当我模拟对 V2 Payment API 的相同请求时，我收到预期的无效 CC 响应，这似乎表明可以使用 V2 Payment API 处理 CreditCards。任何帮助将不胜感激。

```
REQUEST ::
 <Payment>
      <CustomerRef>1027</CustomerRef>
<Line>
    <<LineNum>1</LineNum>
    <Amount>1.64</Amount>
</Line>
<PaymentMethodRef>13</PaymentMethodRef>
<PaymentType>CreditCard</PaymentType>
<CreditCardPayment>
    <CreditCardChargeInfo>
        <Number>1234567890123456</Number>
        <Type>MasterCard</Type>
        <NameOnAcct>Fake User</NameOnAcct>
        <BillAddrStreet>111 Fake St SE</BillAddrStreet>
        <CCTxnMode>CardPresent</CCTxnMode>
        <CCTxnType>Charge</CCTxnType>
        <CcExpirMn>01</CcExpirMn>
        <CcExpirYr>14</CcExpirYr>
        <ZipCode>11155</ZipCode>
        <Cvv>123</Cvv>
    </CreditCardChargeInfo>
</CreditCardPayment>
<ProcessPayment>true</ProcessPayment> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:59:18.810

Intuit 合作伙伴平台 v3 API 仍处于测试阶段，因此尚未支持所有内容。

~~如果您查看 Intuit 最近的博客文章：~~

 ~~*   [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/V3](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/V3)~~ 

~~您将在视频下方看到 PDF 格式的路线图链接。路线图表明付款将在*7 月*发布的 v3 数据服务中得到支持。~~

**更新**：查看 Intuit 的文档以了解支持的内容和不支持的内容：

*   [Intuit 的 v3 文档](https://developer.intuit.com/docs/0025_quickbooksapi/0050_data_services)

因此，它将*在*v3 数据服务中可用，*只是尚不可用*。快来了！

# html - 绕过跨域问题

> ID：16138026
> 
> 赞同：0
> 
> 时间：2013-04-22T01:18:08.107
> 
> 标签：html, jquery, jquery-mobile

我使用 Html、css 和 Jquery Mobile 框架创建了一个 ios 应用程序，并将其连接到 SOAP xml Web 服务。由于我的网络服务在另一台电脑上，我有跨域问题，但已经将应用程序连接到肥皂网络服务，但由于跨域问题而没有得到返回（xml 格式）。

我的问题是，有什么办法可以绕过这个问题吗？允许得到回报？或如何将 XML 返回转换为 Json 以使其可接受并在 Html 中使用 jquery Ajax 获取返回。感谢那些会帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:22:47.023

一种解决方案可能是在您的网络 PC 上安装一个代理，该代理可以访问 SOAP，然后透明地传输它。然后您的应用程序认为它来自同一台服务器，并且您不再有跨域问题。

* * *

编辑：（我会发表评论，但格式不一样）

这正是重点，您仍然使用`$.ajax`但您将请求发送到您的 Web 服务器，服务器传输请求，获取响应并将响应传输回客户端：

```
 request                         request
client ----------->        proxy       ----------> web service
(HTML) <----------- (your web server)  <---------- (anywhere)
         response                        response 
```

**重要提示**：注意 Web 服务识别客户端的方式，因为它会看到来自同一 IP（您的 Web 服务器）的请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:29:45.930

[这](http://benalman.com/projects/php-simple-proxy/)是允许您返回 XML 的简单 PHP 代理的一个很好的示例。

关键是它必须在您的服务器上完成，或者通过[YQL](http://developer.yahoo.com/yql/)等服务完成。没有秘密松鼠方式可以让您在客户端执行此操作。

* * *

例如，您的 AJAX 调用变为：

```
$.ajax({
    url: 'php/ba-simple-proxy.php?url=http://remote.server/service.name',
    type: 'GET',
    dataType: "json",
    beforeSend: function(jqXHR, settings) {
        //Show a loading image here
    },
    success: function(json) {
        //process data here
    },
    error: function(jqXHR, textStatus, errorThrown) {
        //Show an error message here
    }
}); 
```

# xcode - 为已经在苹果商店中的应用购买了一个 xcode 项目。我是否需要更改 Bundle Identifier 并为其创建一个新的 App Id？

> ID：16138031
> 
> 赞同：0
> 
> 时间：2013-04-22T01:19:12.423
> 
> 标签：xcode, app-store

XCode 编程和 Apple 商店上传协议的新手。像标题所述，我是否需要更改捆绑标识符并为我从原始开发人员那里购买的应用程序创建一个新的 AppId，该开发人员已经在 Apple Store 中获得了批准（因为我打算“稍微修改一下代码” “并在苹果商店以我自己​​公司的名义销售更新后的应用程序）？

我想我可以这样做，也许会被拒绝，但如果可能的话，我想避免这种情况，并首先以正确的方式去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:10:34.450

是的，要在您的帐户下发布应用程序，您需要在您的帐户下创建一个新的应用程序 ID 和一个新的分发配置文件。

# sql - SQL查询技能表

> ID：16138034
> 
> 赞同：2
> 
> 时间：2013-04-22T01:19:25.617
> 
> 标签：sql, postgresql, postgresql-8.4

我需要从 PostgreSQL 表中查询预定义的技能等级集。考虑以下包含用户 1、2 和 3 的演示表，每个用户都有不同的技能和技能等级：

```
╔════════╦═══════════╦═══════╗
║ userId ║  skillId  ║ votes ║
╠════════╬═══════════╬═══════╣
║      1 ║ marketing ║    50 ║
║      2 ║ hacking   ║    51 ║
║      1 ║ business  ║    59 ║
║      2 ║ business  ║     8 ║
║      1 ║ hacking   ║    32 ║
║      3 ║ talking   ║    67 ║
║      3 ║ business  ║    34 ║
║      3 ║ marketing ║    24 ║
╚════════╩═══════════╩═══════╝ 
```

现在我想根据加权业务+黑客对它们进行排名：

```
SELECT * FROM
  (SELECT
    b."userId",
    MAX(CASE WHEN b."skillId"='business' THEN b.votes ELSE 0 END) AS "businessVotes",
    MAX(CASE WHEN h."skillId"='hacking' THEN h.votes ELSE 0 END) AS "hackingVotes"
    FROM "Skill" b, "Skill" h
    WHERE b."userId"=h."userId"
    AND (
      (b."skillId"='business' AND h."skillId"='hacking') OR
      (b."skillId"=h."skillId" AND (b."skillId"='business' OR b."skillId"='hacking'))
    )
    GROUP BY b."userId") AS query
  ORDER BY "businessVotes"*0.2+"hackingVotes"*0.8 DESC 
```

正如预期的那样，我得到以下结果：

```
╔════════╦═══════════════╦══════════════╗
║ userId ║ businessVotes ║ hackingVotes ║
╠════════╬═══════════════╬══════════════╣
║      2 ║             8 ║           51 ║
║      1 ║            59 ║           32 ║
║      3 ║            34 ║            0 ║
╚════════╩═══════════════╩══════════════╝ 
```

但在我看来，这个查询需要 PostgreSQL 做比必要更多的计算，因为复杂地处理用户没有黑客但有商业技能的情况或反之亦然。如果没有这种情况（即需要商业和黑客技能才能进入排名），查询可能会容易得多：

```
SELECT *
  FROM "Skill" t1, "Skill" t2
  WHERE t1."userId"=t2."userId"
  AND (t1."skillId"='business'
  AND t2."skillId"='hacking')
  ORDER BY t1."votes"*0.2 + t2."votes"*0.8 DESC; 
```

是因为我的推理错误，不利的表结构还是仅仅因为它就是这样并且没有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:23:22.790

您可以使用聚合查询来执行此操作：

```
select s.userId,
       sum((case when s.skillId = 'business' then votes else 0 end)*0.2 +
           (case when s.skillId = 'hacking' then votes else 0 end)*0.8
          ) as weightedpoints
from skill s
group by userId
order by weightedpoints desc 
```

# macos - Git找不到跟踪文件中的更改

> ID：16138035
> 
> 赞同：0
> 
> 时间：2013-04-22T01:19:30.963
> 
> 标签：macos, git

我有一个非常奇怪的问题：git 突然无法检测到我已经修改了文件。我可以进入存储库的文件夹，更改跟踪的文件，然后`git status`说：

```
# On branch master
nothing to commit (working directory clean) 
```

这特别奇怪，因为它是逐渐生效的。首先 git-gui 不再能够注意到文件更改，但命令行继续工作。然后我重新启动了机器，现在 gui 和命令行都无法发现更改的文件。

我最好的猜测是我的 PATH 有问题。这将解释重新启动机器会使情况变得更糟，以及命令行如何能够继续运行更长时间（它是在 PATH 正确时启动的）。同事有时会使用我的机器，所以他们可能安装了一些修改路径的东西。

如果它是相关的，这是我的路径：

```
echo $PATH
/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin
:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin
:/usr/local/git/bin 
```

有问题的机器是mac mini。请注意，xcode 仍然可以检测到更改并执行提交。但这只会让我到目前为止，直到我需要一些命令行特定的功能。

我不确定如何进行。我如何诊断出了什么问题？如果问题是 PATH，那么我应该重新排序/删除/添加什么？其次，我如何首先弄清楚是什么破坏了事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:40:42.040

原来我的同事对存储库做了另一个克隆。当我在 xcode 中修改它们时，我以为我正在修改原始仓库中的文件，但实际上我是在克隆的仓库中修改它们。

git status 暂时在命令行中工作，因为该命令行实例由我的同事留下并指向正确的目录。终端只显示当前目录的名称，我不知道它嵌套在错误的目录中。git-gui 'break first' 因为我的同事没有使用 git-gui，所以没有将它指向克隆。

所以，这只是我们的一个愚蠢的错误。git 工作正常。

# javascript - Javascript中函数完成后变量删除

> ID：16138037
> 
> 赞同：1
> 
> 时间：2013-04-22T01:19:43.527
> 
> 标签：javascript, variables

HTML 元素：

```
<div style="text-align:center;";">
    <input style="align:center;" type="button" value="Roll" onClick='roll()';>
</div> 
```

JavaScript 片段：

```
function roll(){
    document.getElementById('test5').innerHTML=roll;
    var roll;
    document.getElementById('test').innerHTML=roll;
    if (!(roll == 1 || roll == 2 || roll == 3)){
        document.getElementById('test1').innerHTML='inLoop';
        roll = 1;
    }
    //irrelavent code

    var dice1=dice[0];
    var dice2=dice[1];
    var dice3=dice[2];
    var dice4=dice[3];
    var dice5=dice[4];
    if (roll>=3){
        score(dice1, dice2, dice3, dice4, dice5);
    }
    roll = storeRoll(roll);
    document.getElementById('test4').innerHTML=roll;
};

function storeRoll(roll){
    ++roll
    document.getElementById('test2').innerHTML='inFunction';
    document.getElementById('test3').innerHTML=roll;
    return roll;
}; 
```

我正在尝试使它，如果`roll`尚未定义，它将设置为`1`并在函数的末尾添加`1`到`roll`. 一旦有`3`滚动，它就会调用该`score`函数。在我的反复试验中，似乎`roll`每次我重新启动函数时变量都会被重置。我在用户单击 HTML 输入按钮时多次执行该功能，因此循环将不起作用。每次单击按钮时，`roll`变量都会重置。我想知道我的代码中是否有一些东西正在重置变量`roll`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:12:34.570

Your `roll` variable is scoped to the function `roll()`. Each time the function is called, the variable is recreated. If you need to retain the value of roll, you need to scope it as global to the function. Suggested reading: [What is the scope of variables in JavaScript?](https://stackoverflow.com/questions/500431/javascript-variable-scope?rq=1)

There are many ways you can achieve this. All solutions except the simplest will require you to learn how Javascript works.

```
var timesRolled = 0;

function roll() {
    timesRolled++;
    document.getElementById('test3').innerHTML = timesRolled;

    var dice1=dice[0];
    var dice2=dice[1];
    var dice3=dice[2];
    var dice4=dice[3];
    var dice5=dice[4];

    if (timesRolled >= 3) {
        score(dice1, dice2, dice3, dice4, dice5);
    }
}

function score(){
    // presumably here you will reset the timesRolled to 0, so that another game may be played
} 
```

I recommend you learn more about Javascript if you intend to program in it seriously.

[https://developer.mozilla.org/en/learn/javascript](https://developer.mozilla.org/en/learn/javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:27:34.727

Another problem is that your function's name roll is the same as the variable's name, roll.

I suggest doing this: using the "self" object as a prefix to the roll variable. Doing this for situations like yours is better than global variables which cause problems and errors if multiple scripts are loaded (even two versions of the same script). Also, the "self" object is better than the "top" or "window" object (etc.) because there is one "self" object for each frame in the case of multiple documents in an application.

```
function roll(){
    document.getElementById('test5').innerHTML=self.roll;

/* your variable declaration still leaves "roll" undefined, but just makes it a local variable; so you really don't need this second statement here */
    document.getElementById('test').innerHTML=self.roll;

    if (!(self.roll == 1 || self.roll == 2 || self.roll == 3)){
        document.getElementById('test1').innerHTML='inLoop';
/* this is when self.roll first gets initialized */
        self.roll = 1;
    } 
```

your function continues as before, but all references to the variable roll should be changed to self.roll.

# svn - SmartSVN 在实际未更改时显示要修改的文件的本地状态？

> ID：16138038
> 
> 赞同：2
> 
> 时间：2013-04-22T01:19:50.793
> 
> 标签：svn, smartsvn

我替换了我的工作副本中的几千个文件，其中大部分应该是相同的 - 但是，即使对于明显未更改的文本文件，所有替换文件的本地状态也会被修改（当我显示更改时它甚至显示提示说文件相等，您是否仍要显示更改）。有没有办法修复文件的本地状态？有数千个，因此单独查看它们是不切实际的。

# php - PHP - 我可以从特定键转移数组吗？

> ID：16138039
> 
> 赞同：3
> 
> 时间：2013-04-22T01:19:54.513
> 
> 标签：php, arrays

我在 PHP 中的数组遇到了一些问题。

我有以下数组：

```
Array
(
    [0] => banana
    [1] => apple
    [2] => raspberry
    [3] => kiwi
    [4] => cherry
    [5] => nuts
) 
```

但我想踢出'kiwi'并将所有其他键向上移动，以获得以下...

```
Array
(
    [0] => banana
    [1] => apple
    [2] => raspberry
    [3] => cherry
    [4] => nuts
) 
```

我相信这里有人知道如何完成它，php 的转变只需要第一个键而不是特定的东西。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T01:23:45.277

这[`array_splice`](http://php.net/array-splice/)对你有用。如果您愿意，它甚至可以让您在其中插入新条目。

对于这种特定情况，您使用：

```
array_splice($array, 3, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T01:25:58.800

AFAIK，没有任何内置功能可以做到这一点，但你可以创建一个。您要做的是，删除特定元素，然后重新计算键。

```
function a_shift($index, $array) {
     unset($array[$index));
     return array_values($array);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T01:31:40.657

```
$array = array("banana", "apple", "raspberry", "kiwi", "cherry", "nuts");
$key = array_search('kiwi', $array);
unset($array[$key]);
$array = array_values($array);
print_r($array);

Output:
Array ( [0] => banana [1] => apple [2] => raspberry [3] => cherry [4] => nuts ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T14:52:29.480

我用它从一个数组中删除键并复制到另一个：

```
$keys = [1, 3];
foreach ($keys as $index => $key) {
    if ($index != 0) {
        $key -= $index;
    }
    $newArr[] = array_splice($oldArr, $key, 1)[0];
}
return $newArr; 
```

# python - 如何在 PyQt 中将 QPointf 转换为 QPoint

> ID：16138040
> 
> 赞同：3
> 
> 时间：2013-04-22T01:19:55.110
> 
> 标签：python, qt, pyqt

我想知道如何将 QPointf 位置转换为 PyQt 中的 QPoint 位置，因为我需要使用项目的位置来设置鼠标位置。我一直在尝试这个，但没有任何反应：

```
xq=node.pos().x()
yq= node.pos().y()
x=int(xq)
y=int(yq)
QtGui.QCursor.setPos(x,y) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T01:44:44.607

在解释器中尝试这些命令：

```
from PyQt4 import QtGui, QtCore
point = QtCore.QPointF(100.2, 144.23)
QtGui.QCursor.pos(), QtGui.QCursor.setPos(point.toPoint()), QtGui.QCursor.pos()
# (PyQt4.QtCore.QPoint(1335, 691), None, PyQt4.QtCore.QPoint(100, 144)) 
```

但真正的问题可能是您使用项目坐标，您必须将其映射到全局坐标。

看到[这个答案](https://stackoverflow.com/a/15808971/521590)。基本上，他通过以下方式映射坐标：

> 项目 -> 场景 -> 视图 -> 全局

# asp.net - 如何从我的 WebMatrix 项目中删除文件夹？

> ID：16138043
> 
> 赞同：1
> 
> 时间：2013-04-22T01:20:02.373
> 
> 标签：asp.net, webmatrix

WebMatrix 中项目的默认设置包含一个“帐户”文件夹，其中包含许多文件，例如 Login.cshtml、Logout.cshtml、Register.cshtml 等。

我不需要/想要我当前正在构建的站点的登录功能。因此，我在各个页面中删除了对此类的引用，但是当我尝试删除文件夹本身时，屏幕闪烁但似乎没有任何反应。

那么如何摆脱这个不需要的“包袱”呢？StarterSite.sdf 也是如此 - 试图删除它只会导致“屏幕闪烁”，但该文件仍然以无形的方式固定在适当的位置。

## 更新

注意：我将尽快奖励这个问题 50 分。如果我在此之前得到答案，我将在回答后奖励赏金。

我可以在 Visual Studio 中打开项目并删除内容就好了……这真的是预期的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:27:36.630

你所说的不应该出现在 WebMatrix 中。您始终可以使用 Windows 资源管理器浏览到您的站点的位置（默认位置是`My Documents/My Web Sites`），但是 WebMatrix 的界面应该允许您很好地删除文件夹和文件（我从来没有遇到过任何问题）。

您的解决方案可能只是卸载/重新安装 WebMatrix（不要忘记从上述位置备份您的站点！）。我个人不知道你还能如何处理这个问题。

如果您不想重新安装，只需浏览到“我的文档”文件夹，然后浏览到“我的网站”文件夹并将其删除。完成此操作后，返回 WebMatrix 并在左侧窗格（显示您的站点目录树的位置）中选择最上面的文件夹（它将以您的站点名称命名），然后点击`f5`以刷新视图。让我知道这两种方法是否对您有帮助:)

# apache - 每个 Mahout 集群中的向量

> ID：16138045
> 
> 赞同：0
> 
> 时间：2013-04-22T01:20:09.920
> 
> 标签：apache, hadoop, cluster-analysis, mahout

我是 Apache Mahout 新手。我试图了解我的哪些命名向量属于哪个集群。互联网上的很多资源都是关于文本文档并使用命令 clusterdump。但是，我的数据集非常庞大，运行该命令总是会导致 Java Out Of Memory 异常。此外，我认为使用 clusterdump 不会回答我的问题。

我想知道是否有可能只了解哪些命名向量属于使用目录的哪些集群`clusteredPoints`，`clusters-[0-9]+`以及`clusters-*-final`

如果有帮助的话，到目前为止，我已经根据他们的听歌习惯形成了用户群。为此，我最初使用 NamedVectors 创建了一个序列文件，其中 NamedVector 的名称是 userId，而 Vector 本身是一个双精度数组，其中包含用户收听的歌曲标签的权重（示例如下）。

```
 AR2TSU61187FB5C4F0 0.5 0.2 0.7 0.0 0.0 0.1 0.0 0.0 ...
    ...
    ...
    ... 
```

然后我成功地运行了 k-means。我在 clusteredPoints 目录中有输出（大约 88 个文件，名称如 part-m-00088）和我认为包含质心的目录簇。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:05:30.677

我认为你需要对 clusterdump 做一些研究，试试 mahout clusterdump --help try this

```
mahout clusterdump -i clusters-*-final/part-r-00000 -o output -p clusteredPoints/part-m-00000 
```

并尝试此[链接](https://cwiki.apache.org/MAHOUT/cluster-dumper.html)以获得进一步的解释。

您也可以尝试添加选项 -of CSV，您将看到如下显示：

*   id_cluster1,vec1,vec2..vecl
*   id_cluster2,vec1,vec2..vecl
*   ...

# css - 面包屑代码修复长文本

> ID：16138046
> 
> 赞同：0
> 
> 时间：2013-04-22T01:20:11.310
> 
> 标签：css

当我在面包屑中输入长文本时，它们会中断..有什么想法吗？

随意小提琴：http: [//jsfiddle.net/neodjandre/pbEpG/](http://jsfiddle.net/neodjandre/pbEpG/)

```
.breadsmall ul{margin:0px;}
.breadsmall ul li{display:inline-block;height:20px;line-height:20px;width:100px;text-indent:10px;text-align:center;position:relative;margin:5px 1px 0 0;}
.breadsmall ul li:before{content:" ";height:0;width:0;position:absolute;left:-2px;z-index:0;border-color:transparent transparent transparent #fff;border-style:solid;border-width:10px 0 10px 10px;}
.breadsmall ul li:first-child:before{border-color:transparent;}
.breadsmall ul li a:after{content:" ";height:0;width:0;position:absolute;right:-10px;z-index:10;border-color:transparent transparent transparent #e8e8e8;border-style:solid;border-width:10px 0 10px 10px;}
.breadsmall ul li a{display:block;background: #e8e8e8;font-family:Century Gothic, sans-serif;font-size:1em;color:#666666}
.breadsmall ul li a:hover{background:#1f1f1f;color:#eaeaea;}
.breadsmall ul li a:hover:after{border-color:transparent transparent transparent #1f1f1f;}
.breadsmall ul li.active a{background:#1f1f1f;z-index:100;color:#eaeaea;}
.breadsmall ul li.active a:after{border-left-color:#1f1f1f;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:23:15.057

使用`min-width: 100px;`代替. `width: 100px;`_`<li>`

```
.breadsmall ul li {
    min-width: 100px;   
} 
```

看起来像这样：http: [//jsfiddle.net/MRSallee/pbEpG/1/](http://jsfiddle.net/MRSallee/pbEpG/1/)

那场比赛你想要什么？

# c# - 如果 y 值中的 x 是等价的

> ID：16138048
> 
> 赞同：3
> 
> 时间：2013-04-22T01:20:14.840
> 
> 标签：c#, java, math, if-statement, conditional

如果我有 5 个整数（a、b、c、d、e），我可以检查其中***至少***3 个是否相等的最短方法是什么。

前任。

```
a==1
b==1
c==2
d==3
e==4
//returns false

ex.
a==1
b==1
c==1
d==3
e==4
//returns true 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T01:28:52.697

这应该适用于所有情况：

```
bool match = array.GroupBy(n => n).Any(g => g.Count() >= 3); 
```

# php - Laravel 4 测试；'phpunit' 无法识别？

> ID：16138050
> 
> 赞同：28
> 
> 时间：2013-04-22T01:20:47.970
> 
> 标签：php, phpunit, laravel

[http://four.laravel.com/docs/testing](http://four.laravel.com/docs/testing)说“安装新的 Laravel 应用程序后，只需`phpunit`在命令行上运行即可运行测试。”

`phpunit`无法识别，我也尝试`php artisian test`过`php artisan phpunit`

是`phpunit`在某个奇怪的文件夹中，还是 Laravel 实际上不包含它？我不想安装它，如果是的话有两个。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-22T02:12:24.687

## 用作曲家安装

使用 PHPUnit 启动和运行的一种简单方法（无需安装 Pear 并弄乱您想要使用它的每个系统）是将它包含在您的 composer.json 文件中，例如

```
"phpunit/phpunit": "4.0.*", 
```

然后在做之后`composer update`你就可以像这样从命令行运行 PHPUnit：

```
vendor/bin/phpunit 
```

由于 phpunit 将被安装到 vendor/bin 文件夹中。

这只会将 PHPUnit 安装到这个项目，而不是你的整个系统。因此，当您希望它消失时，您只需从 composer.json 文件中删除该行，运行 composer update 和 poof，而不是跟踪。

## 仅为开发环境安装

如果您只想在开发期间使用它，请在“require-dev”部分中添加 composer 行。这样，只有当您选择通过以下方式安装开发依赖项时才会安装它：

```
php composer.phar install --dev 
```

或者

```
php composer.phar update 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-28T08:23:21.047

如果您是窗口用户并且遇到此问题，请执行以下操作：

你需要告诉 Window 在哪里可以找到 PHPUnit 命令，你可以首先验证这个文件是否存在于你的 Laravel 项目的 /vendor/bin 下

![在此处输入图像描述](https://i.stack.imgur.com/LRwOO.png)

最后，您需要`/vendor/bin`在窗口 PATH 变量中附加完整路径，

为此： 1\. 右键单击​​“计算机”，然后单击属性

![在此处输入图像描述](https://i.stack.imgur.com/qR3xY.png)

2.  在第二个窗口点击`Advanced system settings`

![在此处输入图像描述](https://i.stack.imgur.com/WWDGx.png)

3.  在下一个窗口中`Advanced`单击`Environmental Variables`

![在此处输入图像描述](https://i.stack.imgur.com/ocj9o.png)

4.  在下一个窗口中双击，`PATH`然后通过附加设置 PATH 变量

`laravel-project/vendor/bin;`最后的通知的完整路径`;`。

注意：PATH 中可能已经存在其他变量，因此请确保不要通过在最后附加自己的变量来覆盖它们

5.  最后点击`Ok`所有对话框

![在此处输入图像描述](https://i.stack.imgur.com/PJTjY.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:11:28.180

使用 phpunit 最简单的方法是将[phpunit.phar](http://pear.phpunit.de/get/phpunit.phar)放在应用程序的根目录中，然后使用**php phpunit.phar**运行它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-18T04:21:27.923

如果您遇到“phpunit 需要 ext-dom”，那是因为未安装 php-xml。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-22T01:24:08.370

您需要安装 phpunit，最好的方法是使用 pear。

```
pear channel-discover pear.phpunit.de
pear install phpunit/PHPUnit 
```

如果您没有安装 pear，请检查[有关](http://pear.php.net/manual/en/installation.getting.php)pear 安装的内容。

# tapestry - 在 afterrender 中添加的 Mixin 脚本未针对 xhr 请求触发

> ID：16138055
> 
> 赞同：0
> 
> 时间：2013-04-22T01:21:19.407
> 
> 标签：tapestry

熟悉mixin生命周期的人可以告诉我：

（使用挂毯 5.3.6）

我有一个从'afterRender'触发一些javascript的mixin。我在“afterRender”中执行此操作，因为我需要初始化该字段的 clientId。

如果它附加到的字段在第一次呈现页面时呈现，它会很好用，但是如果它作为区域更新/xhr 请求的一部分呈现，则脚本永远不会发送到客户端。

我已经为 JavaScriptCallback 设置了断点，虽然它已成功添加到 ajaxResponseRenderer，但它从未被调用过。

谢谢你的建议！

代码例如：

```
public class MyMixin
{
    ...

    void afterRender()
    {
        addScript("MyMixin.create('%s', '%s');", field.getClientId(), myVariable);
    }

    private void addScript(final String format, final Object... args)
    {
        if (!request.isXHR())
        {
            jsSupport.addScript(InitializationPriority.NORMAL, format, args);
            return;
        }

        ajaxResponseRenderer.addCallback(new JavaScriptCallback()
        {
            @Override
            public void run(JavaScriptSupport javascriptSupport)
            {
                javascriptSupport.addScript(InitializationPriority.NORMAL, format, args);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:07:50.897

您需要`jsSupport`在两种情况下使用相同的对象：`request.isXHR()`== {true or false}。

JavaScriptSupport 已在 中注册`AjaxResponseRenderer`，请参阅`AjaxResponseRendererImpl`。

所以你的代码看起来像

```
void afterRender() {

    jsSupport.addScript("MyMixin.create('%s', '%s');", field.getClientId(), myVariable);
} 
```

# c - 解释 c 指针参数

> ID：16138057
> 
> 赞同：2
> 
> 时间：2013-04-22T01:21:36.477
> 
> 标签：c, pointers, syntax

您好，我正在学习 C 并且正在学习一个教程，我已经阅读了有关指针基础知识的内容。

```
main(int argc, char *argv[]) 
```

我真的不明白如何解释`char *argv[]`。

我是把它读作 CharPointer 指向 argv 数组，还是指向由 char 组成的 chararray 的指针？

[更新]

我可能错了，但是我认为我很困惑，因为我熟悉：

Char* argv[] // 指向 char 数组的指针 Char argv[]* // 在指针中设置值

但是我从未见过 char *argv[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:52:37.153

您从内到外阅读 C 声明，记住主要运算符`.`、`->`和`[]`比一元运算符（如`*`. 所以你从最深的嵌套开始，向左或向右，由内而外，优先选择向左或向右。

```
char *argv[]; // argv is an array of pointer to char
int (*f)();   // f is a pointer to a function returning int 
```

这是我刚刚制作的一个完整示例，您可以运行：

```
int main(void);

// g is an array of pointer-to-function with no parameters returning int
int (*g[])(void) = {
  main,
  main
};

// f is an array of pointer-to-array of pointer-to-function returning int
int (*(*f[2])[2])(void) = {
  &g,
  &g,
};

int main(void) {
  return *f[0][0] == main;
}

$ ./a.out
$ echo $?
# => 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:28:15.153

由于您定义它的方式，您应该将其读为指向 char 数组的 char 指针，但不要忘记任何类型的指针（char、int、void、float 等）之间没有区别，它们都是地址变量（有些有点儿） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:29:48.810

```
char *argv[] 
```

`argv`是变量/参数名称，它不是 a `type`，所以`CharPointer points to argv array`不是正确的理解方式。可以说一些`pointer to int array or double array`since `int`or `double`are types。

`char* argv[]` 实际上是一个数组`char*`（读取指向的指针数组`char`），基本上是一个 C 字符串数组。

# spring-mvc - Spring 3 MVC——HTTP 500 错误，NoClassDefFoundException

> ID：16138058
> 
> 赞同：0
> 
> 时间：2013-04-22T01:21:47.837
> 
> 标签：spring-mvc, noclassdeffounderror

当我在控制台中启动 Spring 3.2 MVC 应用程序并出现以下错误时，我收到 HTTP 500 错误。我正在使用 Tomcat 7.0.29。

```
SEVERE: Servlet.service() for servlet [ghs1986] in context with path [/ghs1986] threw exception [java.lang.NoClassDefFoundError: org/apache/tomcat/util/scan/JarFactory] with root cause
java.lang.ClassNotFoundException: org.apache.tomcat.util.scan.JarFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.apache.jasper.compiler.TldLocationsCache.tldScanJar(TldLocationsCache.java:413)
    at org.apache.jasper.compiler.TldLocationsCache.access$100(TldLocationsCache.java:78)
    at org.apache.jasper.compiler.TldLocationsCache$TldJarScannerCallback.scan(TldLocationsCache.java:240)
    at org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:234)
    at org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:159)
    at org.apache.jasper.compiler.TldLocationsCache.init(TldLocationsCache.java:224)
    at org.apache.jasper.compiler.TldLocationsCache.getLocation(TldLocationsCache.java:184)
    at org.apache.jasper.JspCompilationContext.getTldLocation(JspCompilationContext.java:607)
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:409)
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:475)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1427)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:138)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1265)
    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1016)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:965)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:781)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我在 ghs1986-servlet.xml 中有这个映射

```
<mvc:view-controller path="/" view-name="home" /> 
```

我的控制器中也有这个映射。

```
@RequestMapping(value = {"/", "home"})
public String home() {
    return "home";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:14:05.753

通过将 tomcat-util.jar 添加到我的类路径和 WEB-INF/lib 解决了问题。tomcat-util.jar 包含 org.apache.tomcat.util.scan.JarFactory。

# css - Wordpress 表单输入 css 在 Firefox 和 Chrome 中显示不同

> ID：16138059
> 
> 赞同：0
> 
> 时间：2013-04-22T01:21:56.773
> 
> 标签：css, wordpress

我正在尝试编写一个电子邮件选择加入框，我已经安装了一个主题并且正在使用 Wordpress。该框在 Firefox 中看起来应该如此，但在 Chrome 中显示不正确，包括文本字段中没有填充，文本字段中的字体颜色不同，2px-ish 填充不应位于蓝色提交按钮的上方和下方。

包括`!important`没有效果。

该网站是[http://shannonconfairphotography.com](http://shannonconfairphotography.com)，该框位于页面顶部，在 Firefox 中显示效果很好。通常我看不出 Chrome 和 Firefox 之间有什么区别，只有 IE，所以我很难过。

盒子代码是：

```
<div style="background-color:#efefef; padding:0; margin:0; -webkit-box-sizing:content-box !important; -moz-box-sizing:content-box !important; box-sizing:content-box !important;">
<span style="font-family: 'Rouge Script', cursive; font-size:30px; line-height:16px; color:#8e8e8e; margin-right:15px; padding-left:15px;"> 5 easy ways to save money on your wedding...</span>
 <form style="display:inline; margin:0px; padding:0px; height:100%;" action="https://madmimi.com/signups/" method="post" target="_blank"> 
    <input style="display:inline; margin:0px; font-family: 'Rouge Script', cursive; font-size:28px; line-height:22px; height:40px; border:none; color:#acacac; background-color:#fff; width:200px; padding-left:10px; margin-right:5px;" id="signup_first_name" name="signup[first_name]" type="text" placeholder="first name">
    <input style="display:inline; margin:0px; font-family: 'Rouge Script', cursive; font-size:28px; line-height:22px; height:40px; border:none; color:#acacac; background-color:#fff; width:200px; padding-left:10px; margin-right:11px;" name="signup[email]" type="text" placeholder="email"> 
    <input style="background-image:none; border: none; background-color:#023972; color:#fff; font-family: 'Rouge Script', cursive; font-size:28px; padding:10px;" value="get it!" type="submit" class="submit"> 
  </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:17:04.840

从样式中删除`line-height: 22px;`线条`<input>`似乎可以更正文本的位置。

尝试使用`::-webkit-input-placeholder { color: [your color]; }`更改 Chrome 中输入占位符文本的颜色。

# android - SQL/Ruby On Rails 项目

> ID：16138065
> 
> 赞同：0
> 
> 时间：2013-04-22T01:22:31.417
> 
> 标签：android, sql, ruby-on-rails

对于一个学校项目，我们要创建一个 android 应用程序，其中包含一些传感器并使用数据源的服务器，所以我决定制作一个地理缓存克隆，但用于我当地的大学。

大学建议使用 Axis2，但我决定使用 Ruby on Rails 作为服务器部分。我从来没有学过Ruby on Rails，所以我一直在网上阅读教程和指南，所以我还是个新手！

目前我有一个用户模型设置，与项目关联。用户模型具有名称和电子邮件字段。虽然这些项目具有位置、名称和关键字。

我希望服务器能够做的是，当用户创建一个新项目并上传其坐标时，随机生成一个关键字并返回给用户，无论如何可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:46:13.600

要创建关键字，您可以`before_create`在模型中使用回调`Item`：

```
class Item < ActiveRcord::Base
  before_create :generate_keyword

  private

  def generate_keyword
    random_string = SecureRandom.hex(13)
    # returns a random string like => "ec8688e16cbbb4cf4b857f865f"
    self.keyword = random_string
  end
end 
```

这是如何工作的：

`before_create``Item`在创建新对象之前自动运行，其他方法包括`after_create`,`before_save`等`after_save`。`save`回调在每次保存对象时运行，因此不仅在创建时运行，而且在更新时运行。

所以我命名了`before_create`方法`generate_keyword`。然后它将查找该名称的方法并运行它。第一行创建一个随机字符串，第二行将其分配给新`Item`对象的`keyword`属性。您需要确保您的`items`表格有一个`keywork`列才能正常工作。

`keyword`在创建对象之前分配（第一次保存），因此您无需在方法结束时保存对象。

# c++ - 我在哪个时区初始化 QDateTime？

> ID：16138068
> 
> 赞同：1
> 
> 时间：2013-04-22T01:22:47.417
> 
> 标签：c++, qt, qt5

无论时区如何，我都需要我的 Qt 应用程序在同一时刻在所有国际计算机上运行任务。应用程序以 UTC 从 Web 下载所需的日期 + 时间。我必须用什么时区初始化 QDateTime？世界标准时间？还是取决于当地时区？

例如：

假设所需的日期+时间是：2013 年 4 月 22 日 14:00 UTC

我将如何为一台配置了 EST 的计算机和另一台配置了 PST 的计算机初始化它？

会做：

```
QDateTime test(QDate(2013, 22, 4), QTime(14, 0, 0)); 
```

意味着所有国际计算机将同时运行该任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:41:10.440

The [QDateTime constructor](http://qt-project.org/doc/qt-5.0/qtcore/qdatetime.html#QDateTime-3) you are using takes a `Qt::TimeSpec` parameter, you can choose `Qt::UTC` instead of the default which is to use the local time. Then all the computers would run at the same time.

But if you're downloading the time from a service, it's presumably being transferred in ISO-8601 format. Then it's probably much easier to do it like this:

```
QDateTime test = QDateTime::fromString(dateAsAString, Qt::ISODate); 
```

If the time service isn't returning the time in ISO-8601, then it is a bug in the service.

# android - 来自 Google 地方信息的 JSON

> ID：16138071
> 
> 赞同：0
> 
> 时间：2013-04-22T01:23:04.390
> 
> 标签：android, json, google-places-api, google-places

在这里，我想使用 Google Places API 获取特定地点的类型，但我显然在如何从 JSON 格式中获取所需的“类型”值方面存在巨大问题。

这是我试图做的

```
 JSONObject predictions = new JSONObject(sb.toString()); 
             JSONArray ja = new JSONArray(predictions.getString("results"));
            JSONArray types = ( (JSONObject)ja.get(0)).getJSONArray("types");
             for (int i = 0; i < types.length(); i++) {
                JSONObject jo = (JSONObject) ja.get(i);
               //here I stop  
            } 
```

这是 JSON 响应

```
"results" : [
      {
         "formatted_address" : "529 Kent Street, Sydney NSW, Australia",
         "geometry" : {
            "location" : {
               "lat" : -33.8750460,
               "lng" : 151.2052720
            }
         },
         "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
         "id" : "827f1ac561d72ec25897df088199315f7cbbc8ed",
         "name" : "Tetsuya's",
         "rating" : 4.30,
         "reference" : "CnRmAAAAmmm3dlSVT3E7rIvwQ0lHBA4sayvxWEc4nZaXSSjRtfKRGoYnfr3d5AvQGk4e0u3oOErXsIJwtd3Wck1Onyw6pCzr8swW4E7dZ6wP4dV6AsXPvodwdVyqHgyGE_K8DqSp5McW_nFcci_-1jXb5Phv-RIQTzv5BjIGS0ufgTslfC6dqBoU7tw8NKUDHg28bPJlL0vGVWVgbTg",
         "types" : [ "restaurant", "food", "establishment" ]
      }, 
```

所以你能帮我找出解决这个问题的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:56:19.927

```
 String testData = "{\"results\" : [ "
            + "{\"formatted_address\" : \"529 Kent Street, Sydney NSW, Australia\", "
            + "\"geometry\" : {"
            + "\"location\" : {"
            + "\"lat\" : -33.8750460,"
            + "\"lng\" : 151.2052720}"
            + "},"
            + "\"icon\" : \"http://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\","
            + "\"id\" : \"827f1ac561d72ec25897df088199315f7cbbc8ed\", "
            + "\"name\" : \"Tetsuya's\","
            + "\"rating\" : 4.30,"
            + "\"reference\" : \"CnRmAAAAmmm3dlSVT3E7rIvwQ0lHBA4sayvxWEc4nZaXSSjRtfKRGoYnfr3d5AvQGk4e0u3oOErXsIJwtd3Wck1Onyw6pCzr8swW4E7dZ6wP4dV6AsXPvodwdVyqHgyGE_K8DqSp5McW_nFcci_-1jXb5Phv-RIQTzv5BjIGS0ufgTslfC6dqBoU7tw8NKUDHg28bPJlL0vGVWVgbTg\", "
            + "\"types\" : [ \"restaurant\", \"food\", \"establishment\" ] "
            + "}] }";
    JSONObject predictions;
    try {
        predictions = new JSONObject(testData);
        JSONArray ja = (JSONArray) predictions.get("results");
        JSONArray types = (JSONArray) ((JSONObject) ja.get(0)).get("types");
        String result = types.toString();
        result = result.substring(1, result.length() - 1);
        String[] allTypes = result.split(",");
        for(int i = 0; i < allTypes.length;i++) {
            String type = allTypes[i];
            //save your type
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:18:48.050

```
//Supposing that you get the complete response as one JSONObject called 'res' as follows:

JSONObject res = new JSONObject();
try {
    res = new JSONObject(stringBuilder.toString()); // stringBuilder is string which you append everthing when you are reading the stream
} catch (JSONException e) {
    e.printStackTrace();
} 
```

您可以从生成的“res”JSON 对象中提取与“types”对应的值，如下所示：

```
JSONObject type;
String type_string;
try {
    type = ret.getJSONArray("results").getJSONObject(0);
    type_string = type.getString("types");
    Log.d("test", "formattted address:" + location_string);

} catch (JSONException e1) {
    e1.printStackTrace();

} 
```

在'type_string'中，你应该有在'types'前面的值字符串，例如：

> [“餐厅”、“食物”、“机构”]

然后，您可以使用 .Split() 函数使用“，”作为分隔符来拆分字符串。就像是 ：

```
String[] str_array = type_string.split(",");
String stringa = str_array[0]; 
String stringb = str_array[1];
String stringC = str_array[2]; 
```

上面的 str_array 将存储类型字符串。

PS：我没有运行这个代码。我只是想告诉你如何解决你的问题。您可能需要调整一些东西以适应您现有的代码。希望能帮助到你。

# pthreads - pthread_mutex 更新速度不够快，因此一个线程“占用”了锁。

> ID：16138072
> 
> 赞同：0
> 
> 时间：2013-04-22T01:23:11.010
> 
> 标签：pthreads, mutex, shared

我有一个 c++ 程序，我在其中创建多个线程并让它们访问共享数组。

每次我想要一个线程访问数组时，我都会调用

```
pthread_mutex_lock(&mutex); 
```

访问数组，然后调用

```
pthread_mutex_unlock(&mutex); 
```

所有线程不断循环，直到它们访问数组一定次数。因此，他们不只是访问数组一次，而是多次访问它。

现在，当我按原样执行程序时，无论哪个线程首先获得互斥锁（通常是创建的第一个线程），都会执行直到它完成，然后才允许另一个线程访问数组。

如果我在后面添加一个简单的 sleep()

```
pthread_mutex_unlock(&mutex); 
```

然后线程将交替访问数组（这是我想要的）。我宁愿不必使用 sleep() 来完成此操作。

据我所知，我相信这是正在发生的事情：

```
Thread A locks the mutex and begins accessing the array
Thread B tries to lock the mutex but finds its locked, therefore it waits
Thread A finishes with the array and unlocks the mutex
Thread A loops and relocks the mutex before Thread B realizes that Thread A unlocked the matrix 
```

因此，线程 A 继续访问数组，直到它被访问 n 次，然后完成并且线程 B 访问数组 n 次

无论如何让线程等待（等待互斥锁解锁）更快地更新并在解锁后立即获取锁？
我希望上面的输出更像是：

```
Thread A locks the mutex and begins accessing the array
Thread B tries to lock the mutex but finds its locked, therefore it waits
Thread A finishes with the array and unlocks the mutex
Thread B sees the mutex is unlocked and locks it
Thread A loops and tries to lock the mutex, but finds its locked, therefore it waits
... etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:11:23.633

`sleep()`您可以查看/ ，而不是查看`pthread_yield()`/ `sched_yield()`，这将导致线程 A 在释放互斥锁后立即让出 CPU，然后再次获取互斥锁。互斥锁不排队，也不保证公平。

或者，使用条件变量向其他线程发出信号。

# android - 我的 AsyncTask 有什么问题？似乎没有正确执行

> ID：16138082
> 
> 赞同：2
> 
> 时间：2013-04-22T01:24:47.170
> 
> 标签：android, android-asynctask

我正在尝试运行 AsyncTask 以从 REST API 返回结果，但我编写的代码似乎没有运行。当我通过应用程序运行到应该运行 AsyncTask 的位置时，什么都没有显示。没有错误，数据永远不会显示。此外，当我输入 created some `log.i`s 来显示返回的数据时，LogCat 窗口中没有显示任何内容。

以下是相关代码：

```
public class PlaceActivity extends FragmentActivity {

public static final String EXTRA_URL = "url";
public static final String GEO = "geo";
public static final LatLng LOCATION = new LatLng(53.551, 9.993);

private GoogleMap mMap;
protected Factual factual = new Factual("xyz", "xyz"); //new Factual code
private TextView resultText = null; //new Factual code

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_place);
    setupActionBar();
    Bundle extras = getIntent().getExtras();

    if (extras != null) {
        String name = extras.getString(EXTRA_URL);
        String geo = extras.getString(GEO);
        Log.i("geo", geo); //currently from_user
        Log.i("name", name); //currently text
        TextView venueLocation = (TextView) findViewById(R.id.vLocation); //was detailsText
        //view.setText(name + " " + geo);
        TextView venName = (TextView) findViewById(R.id.vName);
        venueLocation.setText(geo);
        venName.setText(name);
        setUpMapIfNeeded();
        factualQuery(); //new Factual code
    }
}

private void setUpMapIfNeeded() {
    //Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        if (mMap != null) {
            //do things to the map
            mMap.addMarker(new MarkerOptions().position(LOCATION).title(EXTRA_URL));
            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(LOCATION,15));
            mMap.getUiSettings().setZoomControlsEnabled(false);
        }
    }
}

public void factualQuery() {
    resultText = (TextView) findViewById(R.id.resultText);
    FactualRetrievalTask task = new FactualRetrievalTask();

    double latitude = 34.06018; //set programmatically
    double longitude = -118.41835; //set programmatically
    int meters = 500; //have a default and then set programmatically if needed?
    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    String locationProvider = LocationManager.GPS_PROVIDER;
    Location location = locationManager.getLastKnownLocation(locationProvider);
    if (location != null) {
        latitude = location.getLatitude();
        longitude = location.getLongitude();
    }

    Query query = new Query()
    .within(new Circle(latitude, longitude, meters))
    .field("cuisine").equal("Italian")
    .sortAsc("$distance")
    .only("name", "address", "tel");

    task.execute(query);
}

public class FactualRetrievalTask extends AsyncTask<Query, Integer, List<ReadResponse>> {

    @Override
    protected List<ReadResponse> doInBackground(Query... params) {
        List<ReadResponse> results = Lists.newArrayList(); 
        for (Query q : params) {
            results.add(factual.fetch("restaurants-us", q));
        }
        return results;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
    }

    @Override
    protected void onPostExecute(List<ReadResponse> responses) {
        StringBuffer sb = new StringBuffer();
        for (ReadResponse response : responses) {
            for (Map<String, Object> restaurant : response.getData()) {
            String name = (String) restaurant.get("name");
            Log.i("name", name);
            String address = (String) restaurant.get("address");
            Log.i("address", address);
            String phone = (String) restaurant.get("tel");
            Log.i("tel", phone);
            Number distance = (Number) restaurant.get("$distance");
            sb.append(distance + " meters away: "+name+" @ " +address + ", call "+phone);
            sb.append(System.getProperty("line.separator"));
            }  
        }
        resultText.setText(sb.toString());
    }
} 
```

}

`log.i`in`onPostExecute()`似乎没有显示任何内容，这让我相信它没有被执行。奇怪的是，这段代码以前在不同的项目中运行，没有任何问题。

我当时认为这可能是与依赖关系有关的问题（因为这是围绕此代码的问题），但正如我所说，我没有收到任何错误。依赖关系仍然是一个问题吗？有什么看起来很奇怪吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:56:57.637

原来这是依赖关系的问题。我尝试了以前不起作用的旧项目，突然之间它开始起作用了。我将我当前的项目与另一个项目的依赖项相匹配，从而解决了这个问题。我最初犹豫是否这样做，因为我在以前的项目及其依赖项中遇到了构建错误，但我删除了导致该错误的原因，现在我认为我很好。

但是，有人可以向我解释为什么依赖项可以解决问题，但我不会收到错误消息告诉我缺少某些方法/变量（即 NullPointer、NoSuchMethod 等）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:43:52.520

你在模拟器中测试吗？如果是，则模拟器默认不会为您提供位置，您必须为其提供坐标，然后它将提供给您的应用程序。请参阅[http://developer.android.com/tools/devices/emulator.html#geo](http://developer.android.com/tools/devices/emulator.html#geo) 您可以尝试在设备上运行它，看看它是否运行您的网络获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:49:08.563

首先，在 doInBackground() 中添加一些 Log.d 以检查 aynctask 是否被网络阻塞。之前还有其他 aynctask 在运行吗？AsyncTask 默认只使用单线程，因此会被其他 AsyncTask 阻塞。

# asp.net - Asp.NET MVC4 - “这些都去哪儿了？”

> ID：16138086
> 
> 赞同：1
> 
> 时间：2013-04-22T01:25:21.897
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-controller

我正在尝试制作一个 C# ASP.NET MVC4 站点。我真的不确定我的控制器文件是如何布置的。这是文件的外观：

```
namespace{
    *Some Classes that'll be used by the controllers
    *Controller
    *ActionResult Index(parameter)
    *IndexViewModel
    *Some functions (methods in asp.net?) that make database calls and bundle up
     the content to be sent to the view
} 
```

似乎“某些类”和“某些功能”在这里不合适，但我不确定将它们放在哪里。有什么建议吗？让我知道它是否有助于粘贴整个文件！我认为上面会更容易。

编辑：谢谢你们的洞察力！所以我可以确定这一点，这里是类（你已经指出应该放在他们自己的cs文件中）：

```
public class contentObject
{
    //The HTML is the content that'll be rendered on the page.
    public string theHTML { get; set; }
    //The title is the content's title.
    public string theTitle { get; set; }
}
public class utilityItem
{
    //the menu is the user-specific menu that'll be constructed
    public string menu { get; set; }
    //notes is the information about the user/company that might assist the
    //tech support people
    public string notes { get; set; }
    //notice is company-specific text that allows us to communicate with the clients.
    public string notice { get; set; }
    //companyName is the company name that'll be displayed
    public string companyName { get; set; }
}
public class listItem
{
    /* listItem is a single entry in the menu will be used to construct the entire menu, 
    which eventually gets bundled into utilityItem.*/
    public int theID { get; set; }
    public string theTitle { get; set; }
} 
```

函数如下所示：

```
 public contentObject buildContent(int TopicID, int userID, HelpSiteEntities1 db)
    {
        var queryX = (from H in db.HelpTopics
                      where H.ID == TopicID
                      select new contentObject() { theHTML = H.HTML, theTitle = H.TITLE }).ToArray();
        return queryX[0];
    }
    public utilityItem buildUtility(int userID, HelpSiteEntities1 db)
    {
        var menu = "";
        var queryMenuItems = (from H in db.HelpTopics
                              join P in db.HelpTopicMaps
                              on H.ID equals P.TopicID
                              where P.UserID == userID
                              select new { theID = P.TopicID, theTitle = H.TITLE }).ToList();
        var queryVisitorInfo = (from U in db.Users
                                where U.ID == userID
                                select new { notes = U.SpecificNotes, notice = U.Notice, companyName=U.CompanyName }).ToList();
        int ittrvar = 0;
        foreach (var item in queryMenuItems)
        {
            menu += "<li><a href='/HelpTopic/Index?TopicID=" + queryMenuItems[ittrvar].theID + "'>" + queryMenuItems[ittrvar].theTitle + "</a></li>";
            ittrvar++;
        }
        var utility = new utilityItem { menu = menu, notes = queryVisitorInfo[0].notes, notice = queryVisitorInfo[0].notice, companyName=queryVisitorInfo[0].companyName };
        return utility;
    }
} 
```

所以现在如果我能得到一些关于这些应该去哪里的反馈，我会很感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:50:25.547

我不完全确定你在寻找什么。看起来你正在黑暗中寻找一些指导，所以我会从那里开始。

MVC.NET 有一些非常有用的约定，您可以通过查看一些类似 Microsoft 的教程来快速学习[它们](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)。[关于最佳实践](http://www.codeguru.com/csharp/.net/net_asp/mvc/top-10-asp.net-mvc-best-practices.htm)也有很多意见。

最基本的出发点是定义控制器、视图和模型（按照惯例，它们都位于同名文件夹中）。默认的 MVC 模板将具有 HomeController 和关联的视图。Scott Gu 有几篇关于 MVC2 的好帖子仍然有效，比如这个关于[routing](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)的帖子。

无论您决定设置 MVC，请记住您的业务逻辑位于不同的层，因此您的控制器将在其他地方调用业务代码，这将在另一层调用数据库访问代码。

# three.js - Three.js Raycaster 不与自定义网格相交

> ID：16138088
> 
> 赞同：4
> 
> 时间：2013-04-22T01:25:40.247
> 
> 标签：three.js

我通过创建带有顶点的几何体，然后构建面来构建自定义网格（八角棱柱）。我现在正在尝试添加鼠标悬停交互，但是 Raycaster 没有从该网格返回任何交集。

我认为这是网格的问题，因为其他几何图形在场景中的交叉点上正确返回。

一个完整的例子可以在这里看到：http: [//jsfiddle.net/mattheath/3qxzS/](http://jsfiddle.net/mattheath/3qxzS/)

```
var x, y, z, width, height, opacity;

 // Container object
 var octagon = new THREE.Object3D();

 // Adjust registration point to bottom of object
 y = y + height / 2;

 // Default opacity to non-transparent
 opacity = opacity || 1;

 // Calculate distance from edge of a cube the octagonal side starts
 var cornerRadius = ((width - (width / (1 + Math.sqrt(2)))) / 2) * 0.85;

 // Boundaries
 var xMin = x - width / 2;
 var xMax = x + width / 2;
 var zMin = z - width / 2;
 var zMax = z + width / 2;
 var yMin = y;
 var yMax = y + height;

 // Calculate vertices

 var vertices = [];

 vertices.push( new THREE.Vector3(xMax - cornerRadius, yMin, zMin) );
 vertices.push( new THREE.Vector3(xMin + cornerRadius, yMin, zMin) );
 vertices.push( new THREE.Vector3(xMin, yMin, zMin + cornerRadius) );
 vertices.push( new THREE.Vector3(xMin, yMin, zMax - cornerRadius) );
 vertices.push( new THREE.Vector3(xMin + cornerRadius, yMin, zMax) );
 vertices.push( new THREE.Vector3(xMax - cornerRadius, yMin, zMax) );
 vertices.push( new THREE.Vector3(xMax, yMin, zMax - cornerRadius) );
 vertices.push( new THREE.Vector3(xMax, yMin, zMin + cornerRadius) );

 vertices.push( new THREE.Vector3(xMax - cornerRadius, yMax, zMin) );
 vertices.push( new THREE.Vector3(xMin + cornerRadius, yMax, zMin) );
 vertices.push( new THREE.Vector3(xMin, yMax, zMin + cornerRadius) );
 vertices.push( new THREE.Vector3(xMin, yMax, zMax - cornerRadius) );
 vertices.push( new THREE.Vector3(xMin + cornerRadius, yMax, zMax) );
 vertices.push( new THREE.Vector3(xMax - cornerRadius, yMax, zMax) );
 vertices.push( new THREE.Vector3(xMax, yMax, zMax - cornerRadius) );
 vertices.push( new THREE.Vector3(xMax, yMax, zMin + cornerRadius) );

 // Start building Geometry
 var geometry = new THREE.Geometry();

 // Push in all the vertices
 geometry.vertices.push(vertices[0]);
 geometry.vertices.push(vertices[1]);
 geometry.vertices.push(vertices[2]);
 geometry.vertices.push(vertices[3]);
 geometry.vertices.push(vertices[4]);
 geometry.vertices.push(vertices[5]);
 geometry.vertices.push(vertices[6]);
 geometry.vertices.push(vertices[7]);

 geometry.vertices.push(vertices[8]);
 geometry.vertices.push(vertices[9]);
 geometry.vertices.push(vertices[10]);
 geometry.vertices.push(vertices[11]);
 geometry.vertices.push(vertices[12]);
 geometry.vertices.push(vertices[13]);
 geometry.vertices.push(vertices[14]);
 geometry.vertices.push(vertices[15]);

 // Add faces, top and bottom need 3 polygons

 // Bottom face
 geometry.faces.push(new THREE.Face4(0, 1, 2, 3));
 geometry.faces.push(new THREE.Face4(0, 3, 4, 7));
 geometry.faces.push(new THREE.Face4(4, 5, 6, 7));

 // Top face
 geometry.faces.push(new THREE.Face4(8, 9, 10, 11));
 geometry.faces.push(new THREE.Face4(8, 11, 12, 15));
 geometry.faces.push(new THREE.Face4(12, 13, 14, 15));

 // And each side
 geometry.faces.push(new THREE.Face4(0, 1, 9, 8));
 geometry.faces.push(new THREE.Face4(1, 2, 10, 9));
 geometry.faces.push(new THREE.Face4(2, 3, 11, 10));
 geometry.faces.push(new THREE.Face4(3, 4, 12, 11));
 geometry.faces.push(new THREE.Face4(4, 5, 13, 12));
 geometry.faces.push(new THREE.Face4(5, 6, 14, 13));
 geometry.faces.push(new THREE.Face4(6, 7, 15, 14));
 geometry.faces.push(new THREE.Face4(7, 0, 8, 15));

 var octagonMaterial = new THREE.MeshBasicMaterial( { color: 0xE6E6E6, side: THREE.DoubleSide, opacity: opacity, transparent: true } );
 var mesh = new THREE.Mesh(geometry, octagonMaterial);
 mesh.name = "octagon";
 octagon.add( mesh );

// The mesh is then added to the scene 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T01:59:49.010

Raycaster.intersectObjects() 需要面法线。

对于自定义几何图形，您可以像这样计算它们：

```
geometry.computeFaceNormals(); 
```

三.js r.58

# python - 在 Cython 中生成随机数的正确方法？

> ID：16138090
> 
> 赞同：21
> 
> 时间：2013-04-22T01:25:44.067
> 
> 标签：python, random, numpy, cython

`[0,1]`在 Cython中生成随机随机数的最有效和最便携的方法是什么？一种方法是使用`INT_MAX`和`rand()`来自 C 库：

```
from libc.stdlib cimport rand
cdef extern from "limits.h":
    int INT_MAX
cdef float randnum = rand() / float(INT_MAX) 
```

这样使用`INT_MAX`可以吗？我注意到它与您从 Python 的 max int 获得的常量完全不同：

```
import sys
print INT_MAX
print sys.maxint 
```

产量：

```
2147483647  (C max int)
9223372036854775807  (python max int) 
```

哪个是正确的“标准化”数字`rand()`？ **另外编辑**`rand()`，如果使用从 libc调用的 C 方法，如何设置随机种子（例如根据当前时间播种） ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T02:21:59.190

C 标准说`rand`返回一个`int`在 0 到 RAND_MAX 范围内的值，因此将它除以 RAND_MAX（从`stdlib.h`）是对其进行规范化的正确方法。在实践中，RAND_MAX 几乎总是等于 MAX_INT，但不要依赖于此。

因为`rand`自 C89 以来一直是 ISO C 的一部分，所以保证在任何地方都可用，但不保证其随机数的质量。但是，如果可移植性是您主要关心的问题，那么这是您的最佳选择，除非您愿意使用 Python 的`random`模块。

Python[`sys.maxint`](http://docs.python.org/2/library/sys.html#sys.maxint)完全是一个不同的概念。它只是 Python 可以用*自己的*int 类型表示的最大正数；较大的必须是多头。Python 的 int 和 long 与 C 没有特别的关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-23T18:32:30.047

我不确定 drand 是否是新增功能，但它似乎完全符合您的要求，同时避免了代价高昂的分割。

```
cdef extern from "stdlib.h":
    double drand48()
    void srand48(long int seedval)

cdef extern from "time.h":
    long int time(int)

# srand48(time(0))
srand48(100)
# TODO: this is a seed to reproduce bugs, put to line of code above for
# production
drand48() #This gives a float in range [0,1) 
```

我在研究您的划分方法是否产生足够的随机性时遇到了[这个想法。](https://xor0110.wordpress.com/2010/09/24/how-to-generate-floating-point-random-numbers-efficiently/)我找到的来源很好地说明了在我的情况下，我将随机数与两位数的小数进行比较，所以我真的只需要 3 个小数点的精度。所以 INT_MAX 绰绰有余。但是，drand48 似乎节省了除法成本，因此可能值得使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T02:17:03.653

'c' stdlib rand() 返回一个介于 0 和 RAND_MAX 之间的数字，通常为 32767。

有什么理由不使用 python random() 吗？

[生成 0 到 9 之间的随机整数](https://stackoverflow.com/questions/3996904/python-generate-random-integers-between-0-and-9)

# javascript - 我怎样才能搬到 我有这个代码： <a name="point1"> < /a> // at the very beginning <a href="link.php#point1"> Link1 < /a> // at the very end 当您单击 L 问问题 问问题 2013-04-22T01:25:47.920 771 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有这个代码： <a name="point1"> < /a> // at the very beginning <a href="link.php#point1"> Link1 < /a> // at the very end 当您单击 Link1 时，浏览器快速移动到点 1 我可以让浏览器缓慢移动吗？ AFAIK，没有任何内置功能可以做到这一点，但你可以创建一个。您要做的是，删除特定元素，然后重新计算键。 function a_shift($index, $array) { unset($array[$index)); return array_values($array); } javascriptjqueryhtml 4 1 回答 1 This answer is useful 2 这很容易通过 jQuery 的动画来实现：scrollTophttp : //css-tricks.com/snippets/jquery/smooth-scrolling/htmlbody 这是该页面上评论的摘录： $('a[href*=#]:not([href=#])').click(function() { if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') || location.hostname == this.hostname) { var target = $(this.hash); target = target.length ? target : $('[name=' + this.hash.slice(1) +']'); if (target.length) { $('html,body').animate({ scrollTop: target.offset().top }, 1000); return false; } } }); 于 2013-04-22T01:30:13.557 回答 Related 1 javascript - How can I programmatically set the width of a column in Slickgrid? 1 mysql - MySQL ODBC with Microsoft Excel 2007 Crash 2 c++ - 使用 recv() 接收部分数据，这可能吗？ 4 gwt - What is the proper way to use gwt-bootstrap modal with gwt-platform? 1 c# - 将 URL 重新映射到 MVC 应用程序 2 forms - 提交帖子时出现404；直接调用时发现 2 git - 将非标准布局svn导入git 1 java - 当我尝试从文件中读取某些字节时，为什么会出现索引越界？ 3 php - How to get server time and update every second? 2 eclipse - Eclipse 3.7 中缺少 Apache Tomcat Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16138091
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, html

我有这个代码：

```
<a name="point1"> < /a>   //  at the very beginning   

<a href="link.php#point1"> Link1 < /a>     //    at the very end 
```

当您单击 Link1 时，浏览器快速移动到点 1
我可以让浏览器缓慢移动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:30:13.557

这很容易通过 jQuery 的动画来实现：`scrollTop`http : [//css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)`html``body`

这是该页面上[评论](http://css-tricks.com/snippets/jquery/smooth-scrolling/#comment-197181)的摘录：

```
$('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
        || location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
           if (target.length) {
             $('html,body').animate({
                 scrollTop: target.offset().top
            }, 1000);
            return false;
        }
    }
}); 
```

# scala - 如何在不溢出堆栈的情况下将 IO 与 Scalaz7 Iteratees 一起使用？

> ID：16138096
> 
> 赞同：11
> 
> 时间：2013-04-22T01:26:49.107
> 
> 标签：scala, scalaz, iterate, scalaz7

考虑这段代码（取自[此处](https://stackoverflow.com/questions/13422756/handling-exceptions-in-an-iteratee-library-without-an-error-state)并修改为使用字节而不是字符行）。

```
import java.io.{ File, InputStream, BufferedInputStream, FileInputStream }
import scalaz._, Scalaz._, effect._, iteratee.{ Iteratee => I, _ }
import std.list._

object IterateeIOExample {
  type ErrorOr[+A] = EitherT[IO, Throwable, A]

  def openStream(f: File) = IO(new BufferedInputStream(new FileInputStream(f)))
  def readByte(s: InputStream) = IO(Some(s.read()).filter(_ != -1))
  def closeStream(s: InputStream) = IO(s.close())

  def tryIO[A, B](action: IO[B]) = I.iterateeT[A, ErrorOr, B] {
    EitherT(action.catchLeft).map(r => I.sdone(r, I.emptyInput))
  }

  def enumBuffered(r: => BufferedInputStream) = new EnumeratorT[Int, ErrorOr] {
    lazy val reader = r
    def apply[A] = (s: StepT[Int, ErrorOr, A]) => s.mapCont(k =>
      tryIO(readByte(reader)) flatMap {
        case None => s.pointI
        case Some(byte) => k(I.elInput(byte)) >>== apply[A]
      })
  }

  def enumFile(f: File) = new EnumeratorT[Int, ErrorOr] {
    def apply[A] = (s: StepT[Int, ErrorOr, A]) =>
      tryIO(openStream(f)).flatMap(stream => I.iterateeT[Int, ErrorOr, A](
        EitherT(
          enumBuffered(stream).apply(s).value.run.ensuring(closeStream(stream)))))
  }

  def main(args: Array[String]) {
    val action = (
      I.consume[Int, ErrorOr, List] &=
      enumFile(new File(args(0)))).run.run
    println(action.unsafePerformIO())
  }
} 
```

在一个大小合适的文件 (8kb) 上运行此代码会产生 StackOverflowException。一些搜索发现可以通过使用 Trampoline monad 而不是 IO 来避免异常，但这似乎不是一个很好的解决方案 - 牺牲功能纯度来让程序完全完成。解决这个问题的明显方法是使用 IO 或 Trampoline 作为 Monad Transformer 来包装另一个，但我找不到它们中任何一个的 Transformer 版本的实现，而且我还不足以成为一个函数式编程大师知道如何编写我自己的（了解更多关于 FP 是这个项目的目的之一，但我怀疑创建新的 monad 转换器目前有点超出我的水平）。我想我可以围绕创建、运行和返回我的迭代的结果来包装一个大的 IO 操作，

大概有些 monad 不能转换为 monad 转换器，所以我想知道是否可以在不丢弃 IO 或溢出堆栈的情况下处理大文件，如果可以，如何？

额外的问题：我想不出任何方法让迭代者在处理时发出信号，表示它在处理时遇到了错误，除了让它返回 Either，这使得组合它们变得不那么容易。上面的代码展示了如何使用 EitherT 来处理枚举器中的错误，但是这对迭代器是如何工作的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:52:29.563

在您的代码的不同位置创建异常并打印它们的堆栈长度后，我觉得*您的*代码没有溢出。一切似乎都以恒定的堆栈大小运行。于是我找了其他地方。最终我复制了实现`consume`并添加了一些堆栈深度打印，并确认它在那里溢出。

所以这溢出了：

```
(I.consume[Int, Id, List] &= EnumeratorT.enumStream(Stream.fill(10000)(1))).run 
```

*但是*，我后来发现这不是：

```
(I.putStrTo[Int](System.out) &= EnumeratorT.enumStream(Stream.fill(10000)(1)))
  .run.unsafePerformIO() 
```

`putStrTo`使用`foldM`并且以某种方式不会导致溢出。所以我想知道是否`consume`可以在`foldM`. 我只是从消耗中复制了一些东西并进行了调整，直到编译完成：

```
def consume1[E, F[_]:Monad, A[_]:PlusEmpty:Applicative]: IterateeT[E, F, A[E]] = {
  I.foldM[E, F, A[E]](PlusEmpty[A].empty){ (acc: A[E], e: E) =>
    (Applicative[A].point(e) <+> acc).point[F]
  }
} 
```

它奏效了！打印一长串整数。

# php - 来自 Wordpress Div 的推文

> ID：16138097
> 
> 赞同：0
> 
> 时间：2013-04-22T01:27:02.760
> 
> 标签：php, wordpress

我正在尝试从由 Wordpress 中的“Quotes Collection”插件/小部件创建的 div 中提取文本，以允许用户将其发布。

我想自动填充文本，所以我必须抓住它。

文本所在位置的代码：

```
 <div class="quote">
        <div id="quotescollection_randomquote-0" class="quotescollection_randomquote">
          <p><q>QUOTE TEXT HERE!</q> </p>
        </div>
    </div> 
```

我正在尝试将引用文本从此处取出并放入预先填充的推文中。我是 PHP 的真正新手，它是如何集成的 - 我认为可能的解决方案是使用 jquery 和 .text() 然后尝试将其附加到 twitter href 中？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:32:03.743

在开始编码之前，您应该了解[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)和[XPath](http://en.wikipedia.org/wiki/Xpath)。

* * *

在 PHP 中，您将使用[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)and来完成[`DOMXPath`](http://www.php.net/manual/en/class.domxpath.php)。这里有一个例子：

```
$html = <<<EOF
<div class="quote">
  <div id="quotescollection_randomquote-0" class="quotescollection_randomquote">
    <p><q>QUOTE TEXT HERE!</q> </p>
  </div>
</div>
EOF;

// create a document object from your html string
$doc = new DOMDocument();
$doc->loadHTML($html);

// create a xpath selector for the document
$selector = new DOMXPath($doc);

// use xpath query to access the text of <q> node
$quote = $selector
  ->query('//div[@class="quote"]/div/p/q/text()')
  ->item(0)
  ->nodeValue;

// output
echo $quote; // Output: QUOTE TEXT HERE! 
```

# php - mysqli_connect 获取 root （用户）而不是我的用户名

> ID：16138098
> 
> 赞同：-1
> 
> 时间：2013-04-22T01:27:28.187
> 
> 标签：php, mysqli, database-connection

```
Success... Localhost via UNIX socket 
Warning: mysql_query() [function.mysql-query]: Access denied for user 'root'@'localhost' (using password: NO) 
```

`'root'@'localhost' (using password: NO)`当我尝试使用我的用户名和密码连接时，谁能告诉我为什么会出现上述情况。

我的代码或我使用的服务器是否存在无法识别我的用户名和密码的问题？

我实际上是从我访问过的众多网站之一的回复中复制了这段代码。

```
<?php

/* Set Variables */

$host="localhost";
$db="beebot_memdb";
$username="beebot_weber";
$pass="xxxxxxxxxx";

/* Attempt to connect */

$mysqli=mysqli_connect($host,$username,$pass,$db);

if (mysqli_connect_error())
{
    die('Connect Error (' . mysqli_connect_errno() . ') ' . mysqli_connect_error());
}
else
{
    echo 'Success... ' . $mysqli->host_info . "\n";
    $mysqli->close();
}

?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T01:29:22.130

> 使用密码：否

表示您尝试在不提供密码的情况下进行身份验证。

# sql - SQL Server 在更新或插入时触发

> ID：16138101
> 
> 赞同：0
> 
> 时间：2013-04-22T01:27:40.753
> 
> 标签：sql, sql-server-2008, triggers

这是我的桌子：

报告表：

```
ReportID    Status
1           'out'
2           null 
```

日志表

```
LogID       Status      ReportID
1           'out'       1 
```

当我在日志表中插入一条新记录时，我想要一个触发器来更新相应的状态字段。示例：插入到日志 (LogID=2, Status='out', ReportID=2) 我想为 Status 的匹配 ReportID(2) 字段更新报告表，以便它们匹配。

输出最终会是这样；报告表：

```
ReportID    Status
1           'out'
2           'out'     //changed from null to out by the Log trigger 
```

日志表

```
LogID       Status      ReportID
1           'out'       1
2           'out'       2 
```

这里的问题是，当第一个表有新插入或更新现有记录时，如何创建触发器来更新第二个表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:46:13.707

我想你可能正在寻找这样的东西：

```
create trigger updatereport on log 
after insert, update
as
update r
set status = i.status
from report r 
  inner join inserted i on r.reportid = i.reportid; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/7c3c6/1)

# c - 释放树中动态分配的内存

> ID：16138102
> 
> 赞同：2
> 
> 时间：2013-04-22T01:27:46.460
> 
> 标签：c, memory, gcc, malloc, free

我正在尝试释放我用 malloc 分配的内存，但 free 给出了错误：

```
 malloc: *** error for object 0x100100800: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap 
```

我有一棵带节点的树

```
struct node {
  struct state *s;
  struct node *child;
  struct node *sibling;
}; 
```

我正在尝试使用此功能释放除一个孩子及其死者以外的所有节点：

```
struct node * free_children (struct node *head, struct node *keep_c) {
  struct stack_node *stack_head = init_stack();
  struct node *popped;
  push(stack_head, head);
  // to avoid checking if = keep_c for each level, do top level first
  for (struct node * s = head->child; s != 0; s = s->sibling) {
    if (s != keep_c) push(stack_head, s);
  }
  while (!stack_is_empty(stack_head)) {
    popped = pop(stack_head);
    if (popped->child != 0) push(stack_head, popped->child);
    if (popped->sibling != 0) push(stack_head, popped->sibling);
    free(popped->s);
  }
  return keep_c;
} 
```

我无法弄清楚发生了什么，因为所有节点都是用 malloc 创建的，节点指向的所有状态也是如此。

编辑：这是分配内存的代码：

```
void push (struct stack_node *head, struct node *k) {
  struct stack_node * x = (struct stack_node *)
    malloc(sizeof(struct stack_node));
  x->key = k;
  x->next = head->next;
  head->next = x;
  return;
}

struct stack_node * init_stack () {
  struct stack_node * head = (struct stack_node *)
    malloc(sizeof(struct stack_node));
  head->next = 0;
  return head;
}

struct node * build_game_tree (int p1, int p2) {
  struct node *head = init_game_tree();
  struct state *state = (struct state *) malloc(sizeof(struct state));
  state->player = 0;
  state->s[0] = p1; state->s[1] = p2;
  head->s = state;
  struct stack_node *stack_head = init_stack();
  struct stack_node *upper_stack_head = init_stack();
  struct node *popped;
  bool possible_moves[9];
  push(stack_head, head);
  while(!stack_is_empty(stack_head)) {
    popped = pop(stack_head);
    if (!endgame(popped->s->s[0], popped->s->s[1])) {
      push_possible_moves(stack_head, popped);
      push(upper_stack_head, popped);
    }
    else {
      popped->child = 0;
      popped->s->score =
        score(popped->s->s[0], popped->s->s[1]);
    }
  }
  ...
  return head;
} 
```

编辑：

```
struct state {
  unsigned int s[2];
  double score;
  unsigned int player;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:30:43.397

在`free_children()`中，您尝试多次释放相同的内存。循环从第`for`一个孩子开始，遍历所有孩子的兄弟姐妹，将它们放入堆栈。while 循环还遍历每个孩子的兄弟姐妹，也将它们放入堆栈。每当一个节点出现在堆栈上时，您最终都会尝试`free()`它。

您需要重新考虑`free_children()`. 从递归实现开始可能更容易，如果有迫切需要，可以选择稍后将其转换为迭代实现。

# node.js - 重置猫鼬模型缓存

> ID：16138103
> 
> 赞同：5
> 
> 时间：2013-04-22T01:27:51.250
> 
> 标签：node.js, mongoose, mocha.js

我正在尝试让 mocha 的`--watch`选项起作用。它工作正常，直到我不得不对猫鼬模型做任何事情。据我了解，显然 Mongoose 保留了某种缓存，并且我得到的错误已被[跟踪和关闭](https://github.com/LearnBoost/mongoose/issues/1251)。问题是，我对这整个事情有点陌生，需要一些指导，如何以及在哪里放置我需要的东西才能让它工作。所以，我尝试过的：

*   [在`mongoose.model`](https://github.com/LearnBoost/mongoose/issues/1251#issuecomment-13631313). 有效，但显然违背了`--watch`.
*   在我的 Mongoose 套件的“之后”块中与 Mongo 断开连接（使用`mongoose.disconnect`）。
*   `--watch`每次都放弃并运行新的测试。

在这三个中，显然是在第三个作品中，我真的很想使用我的构建工具的所有功能。所以，这就是我所拥有的。我哪里错了？

### 模型/user.js

```
var mongoose = require('mongoose'),
    register = require('./_register');

var userSchema = mongoose.Schema({
    email: String,
    password: String
});

userSchema.methods.setPassword = function(password) {
    this.password = password;
};

module.exports = mongoose.model('User', userSchema); 
```

### 测试/models.user.js

```
var User = require('../models/user');

describe('User', function() {

    describe('#setPassword()', function() {
        it('should set the password', function() {
            var user = new User();
            user.setPassword('test');
            user.password.should.not.equal('');
        });
        it('should not be in plaintext');
    });

    describe('#verifyPassword()', function() {
        it('should return true for a valid password');
        it('should return false for an invalid password');
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-19T07:32:03.407

我在 afterEach() 块中运行它取得了一些成功：

```
delete mongoose.models.YourModel;
delete mongoose.modelSchemas.YourModel; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T12:15:11.843

为了补充boneskull，这是我使用的ES6代码，包括连接打开/关闭来测试`User`mangoose模型：

```
import mongoose from 'mongoose'
import User from '/models/user'

describe('User model', () => {
  beforeEach((done) => {
    mongoose.connect('mongodb://localhost/somedatabase-test', done)
  })
  afterEach((done) => {
    delete mongoose.models.User
    delete mongoose.modelSchemas.User
    mongoose.connection.close(done)
  })
  ...
}) 
```

# dart - 如何在单元测试中访问 Dart 类

> ID：16138105
> 
> 赞同：2
> 
> 时间：2013-04-22T01:28:04.000
> 
> 标签：dart

使用 Dart Milestone 4 版本 21658

我是飞镖的新手。我创建了一个类。我想对它进行单元测试。类和单元测试都在使用 Dart 编辑器创建的同一个 Dart 项目中。我不知道如何让单元测试看到我的课。我怎样才能做到这一点？

**项目名称：** DartExp

**目录结构：**

```
src/foo.dart
test/foo_test.dart 
```

**文件内容：**

--- foo.dart 开始 ----

```
//library foo;

class Foo
{
  String bar;
} 
```

--- foo.dart 结束 ----

--- foo.dart 开始 ----

```
import 'package:unittest/unittest.dart';

import 'package:DartExp/foo.dart';
import 'DartExp/foo.dart';
import 'foo.dart';
import 'src/foo.dart';
import 'package:src/foo.dart';

main() {

  test('test Foo', () {

     Foo foo;

     //expect(1,1);
   });
} 
```

--- foo.dart 结束 ----

**我尝试过的事情：**

在 Dart 编辑器中，在文件 foo_test.dart 中，我所有导入 foo.dart 的尝试都被标记为错误，因为“...不是有效的 uri”。编辑还说 Foo 类是未定义的。删除所有 foo.dart 导入语句也不起作用。将 foo.dart 放入库中也不起作用。

Dart 导入语句的文档似乎没有为这种常见用例提供任何示例。

那么，如何将一个类导入到 Dart 中的单元测试中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:34:20.600

Dart 使用[Pub 包管理器](http://pub.dartlang.org/doc/)进行依赖管理，并具有特定的建议包布局，您可以[在 Pub 网站上](http://pub.dartlang.org/doc/package-layout.html)阅读。

试试这个并运行`pub install`.

**目录结构：**

```
pubspec.yaml
lib/foo.dart
test/foo_test.dart 
```

**发布规范.yaml**

```
name: my_package
description: description
dev_dependencies:
   unittest: any 
```

**lib/foo.dart：**

```
library foo;

class Foo {
} 
```

**测试/foo_test.dart：**

```
import 'package:unittest/unittest.dart';
import 'package:foo/foo.dart';

main() {
  test('test Foo', () {
     Foo foo;
   });
} 
```

URL 是从Pub 创建`package:`的目录中解析的。`packages`为了更好地理解这一点，请在`packages`运行后查看目录的内容`pub install`。

所以这：

```
import 'package:[package-name]/[file].dart'; 
```

导入位于名为 的包中的库，并在此包的文件夹中名为的文件中`[package-name]`找到该库。（*注意*：一个包可以有多个库。）`lib``[file].dart`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T00:10:27.763

这些路径中的任何一个都使类 Foo 在 Dart 单元测试中可访问。src/foo.dart 不需要库。但即使是这样，两个导入路径仍然有效。

```
import '../src/foo.dart';
import 'package:../src/foo.dart'; 
```

顺便说一句，截至 2013 年 4 月 28 日，[http://pub.dartlang.org/doc/package-layout.html] 没有顶级**src**目录（所以我猜，我的班级在非标准目录）。*

# javascript - 我如何循环遍历一组对象？

> ID：16138110
> 
> 赞同：1
> 
> 时间：2013-04-22T01:28:34.050
> 
> 标签：javascript

如何循环遍历对象数组？

```
users = new Array()
users.push({id: "5", name: "solomom"});
users.push({id: "3", name: "jonathan"});
for(u in users){
    alert(u.name);
} 
```

这提醒我未定义，我做错了吗？我真的是 javascript 的大新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:31:34.810

将其更改为：

```
alert(users[u].name); 
```

会让它提醒预期值，因为[for in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环遍历对象的键，但是您不应该使用`for in`循环遍历 Javascript 中的数组。

而是使用常规的 for 循环：

```
for(var i = 0; i < users.length; i++){
    alert(users[i].name);
} 
```

您还应该养成使用`console.log`调试而不是`alert`. 当您需要时，它将使调试变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:35:30.117

You're thinking of [`for...of`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)

Syntax

```
for (variable of object)
  statement 
```

Parameters

*   `variable` - On each iteration a value of a different property is assigned to variable.
*   `object` - Object whose enumerable properties are iterated.

This isn't supported in most modern browsers.

* * *

You'd probably want to use `Array.[forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)` for what you're trying to accomplish.

```
users.forEach(function(u) {
    alert(u.name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:31:25.757

您应该使用常规 for 循环来遍历数组。循环迭代对象的`for-in`可枚举属性。JavaScript 中的数组在技术上是一个对象，这就是问题所在。

```
for (var i = 0; i < users.length; ++i)
{
    alert( users[i].name );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T01:31:44.277

`for..in`循环将每个键*分配*给`u`，而不是每个值。你需要做类似的事情
`alert(users[u].name)`

话虽如此，永远不要`for..in`在数组上使用（除非它是稀疏的）。相反，请执行以下操作：

```
for( i=0, l=users.length; i<l; i++) {
    alert(users[i].name);
} 
```

# java - 以非扩展形式获取类参数

> ID：16138111
> 
> 赞同：0
> 
> 时间：2013-04-22T01:28:46.640
> 
> 标签：java, class, function, extends

我有一个功能，说：

```
 public void doWhatever(ExtendedClass class) {} 
```

哪个类参数是一个类，比如说：

```
 public class SomeClass extends ExtendedClass {} 
```

如何在我要求“ExtendedClass”的函数中获得“SomeClass”名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:33:09.637

我不知道你为什么要这样做，但是：

```
String className = class.getClass().getSimpleName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:30:36.760

`SomeClass`您可以使用运算符检查它是否是一个实例`instanceof`：

```
public void doWhatever(ExtendedClass cls) {
    if (cls instanceof SomeClass) {
        //do stuff
        SomeClass sCls = (SomeClass)cls; // you can cast it to SomeClass
                                         // once you know that it is one
    }
} 
```

# google-chrome - 为什么 CSS 动画在 Chrome 中运行流畅，但在 Firefox 中却不行？

> ID：16138114
> 
> 赞同：1
> 
> 时间：2013-04-22T01:28:59.670
> 
> 标签：google-chrome, css, firefox

为什么 CSS 动画在 Chrome 中运行流畅，但在 Firefox 中却不行？

网址：[http ://carloshermoso.com/works/rwd/](http://carloshermoso.com/works/rwd/)

```
#mainContent h2 { -moz-animation-duration:3s; -moz-animation-name:slideIn; -webkit-animation-duration:3s; -webkit-animation-name:slideIn; text-transform:uppercase; }
@-moz-keyframes slideIn
{
from { margin-bottom:100%; width:300%; }
to { margin-top:0%; width:100%; }
}
@-webkit-keyframes slideIn
{
from { margin-bottom:100%; width:300%; }
to { margin-top:0%; width:100%; }
} 
```

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:50:09.227

可能只是因为chrome和firefox的渲染引擎不同。如果您想了解如何提高 css 转换速度，可以查看此[内容。](http://blog.teamtreehouse.com/increase-your-sites-performance-with-hardware-accelerated-css)此外，您的代码无法在 Opera 或 Internet Explorer 中运行，因为您没有包含`animation`Opera 和 IE 10 使用的正常（无前缀）属性。请注意，IE 9 及以下版本根本不支持 CSS 动画。更多信息请点击[此处](http://caniuse.com/css-animation)。

# ruby-on-rails - 在新控制器中使用 spree_application 布局

> ID：16138117
> 
> 赞同：1
> 
> 时间：2013-04-22T01:29:22.087
> 
> 标签：ruby-on-rails, ruby, spree

我正在尝试在我刚刚添加到我的 spree 应用程序中的控制器中使用 spree_application 布局

```
class ShotsController < Spree::BaseController

  layout 'spree_application'

  def index
    @shots = Shot.all
  end

  def show
    @shot=Shot.find(params[:id])
  end   

end 
```

但是当我试图去shots_path我有一个错误：

```
NoMethodError in Shots#index

Showing /Users/me/.rvm/gems/ruby-1.9.3-p327/gems/spree_core-    1.3.2/app/views/spree/shared/_nav_bar.html.erb where line #14 raised:

undefined method `current_order' for #< ShotsController:0x007f9c6b746e40> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:58:38.693

如果您希望您的控制器成为 Spree 核心的一部分，请尝试将其文件移入`app/controllers/spree/`并重写如下：

```
module Spree
  class ShotsController < ApplicationController
    layout 'spree_application'

    def index
      @shots = Shot.all
    end

    def show
      @shot=Shot.find(params[:id])
    end   
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:34:41.417

好的，只需弄清楚如何：

在 application_controller.rb 文件中包含 Spree::Core::ControllerHelpers::Order

# jquery - Jquery Mobile 'data-role="page"' 概念 - Jqplot

> ID：16138119
> 
> 赞同：0
> 
> 时间：2013-04-22T01:29:24.563
> 
> 标签：jquery, graph, charts, jqplot

我正在使用用户输入填充图表。并在值更改时刷新它。它在同一页面中工作，尽管当我尝试将图表放在另一个数据角色页面中时，它不起作用。更改页面时是否需要考虑更多事项？我不确定我是否清楚..这是我的代码：

```
 <div data-role="page" id="charttest">      
      <input id="userchart">
     <input id="userchart2">
     <input type="button" id="savechart" value="Save"/>
      <a href="#chartresult" data-role="button" data-icon="">Chart Restult</a>
  </div>
 <div data-role="page" id="chartresult">
      <div id="chartdiv" style="width:30%;"></div>            
</div> 
```

和

```
$(document).ready(function(){
$('#savechart').click(function(){
num = $('#userchart');
num2 = $('#userchart2');
tochart = num.val();
tochart2 = num2.val();
chartingg();
});
function chartingg(){
     $.jqplot.config.enablePlugins = true;

    var s1 = [tochart, tochart2];
    var ticks = ['Teste', 'Teste 2'];   

    var plot = $.jqplot('chartdiv', [s1], {

     seriesDefaults: {renderer:$.jqplot.BarRenderer},
     axes:{xaxis:{renderer:$.jqplot.CategoryAxisRenderer,
      ticks:ticks
       }

      }
     });

     plot.data = [s1];
                plot.replot({resetAxes:true});

    }

}); 
```

如果将chartdiv 更改为#charttest，它可以工作...为什么不能跨页工作？

# javascript - 它可能是错误的数据类型吗？

> ID：16138125
> 
> 赞同：-1
> 
> 时间：2013-04-22T01:30:26.190
> 
> 标签：javascript, jquery, string-length

以下是字符串的存在方式：

```
presidentsname = ((lista[number]).split("|")).slice(0,1);
document.diagnostic.window1.value=presidentsname+"    " +presidentsname.length; 
```

对于奥朗德，名称显示正确，但长度结果为 1

如何修改presidentsname.length以获得8？

还是错误必须在其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:34:04.187

`presidentsname`在这种情况下是一个包​​含一个元素的数组

你可以在两者之间划一条线：

```
presidentsname = presidentsname[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:47:42.353

是的，您得到的是数组的长度，而不是字符串的长度。

# charts - 如何在.net 图表中向箱形图添加极值？

> ID：16138130
> 
> 赞同：2
> 
> 时间：2013-04-22T01:30:53.933
> 
> 标签：charts

我使用 .net Charting 生成箱线图。我能够画出方框和中线。我什至让胡须工作。

我使用以下方法生成`ElementCollection`：

```
ElementCollection GetElements(IDictionary<int, IList<double>> series)
{
    ElementCollection elements = new ElementCollection();

    foreach (int visitnr in series.Keys)
    {
        double perc25 = GetPercentile3(0.25, series[visitnr]);
        double perc50 = GetPercentile3(0.50, series[visitnr]);
        double perc75 = GetPercentile3(0.75, series[visitnr]);

        Element e = new Element();
        e.Name = visitnr.ToString();
        e.YValue = perc75;
        e.YValueStart = perc25;

        // median
        SubValue sv = SubValue.FromValue(perc50);
        sv.Line.Width = 2;
        sv.Line.Length = 21;
        sv.Type = SubValueType.Line;
        e.SubValues.Add(sv);

        // whiskers
        double maxWhiskerOffset = (perc75 - perc25) * 1.5;
        if (perc25 - maxWhiskerOffset < series[visitnr][0])
            e.ErrorLowValue = series[visitnr][0];
        else
            e.ErrorLowValue = perc25 - maxWhiskerOffset;
        if (perc75 + maxWhiskerOffset > series[visitnr][series[visitnr].Count - 1])
            e.ErrorHighValue = series[visitnr][series[visitnr].Count - 1];
        else
            e.ErrorHighValue = perc75 + maxWhiskerOffset;

        elements.Add(e);
    }

    return elements;
} 
```

我不知道的是：如何添加极端值？我需要显示不在 wiskers 区域内的值。线或点，不管用什么。我试图通过其他元素来做到这一点，但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:38:08.587

您需要添加子值并赋予它们某种类型：

```
SubValue ev = SubValue.FromValue(v);
ev.Type = SubValueType.Marker;

e.SubValues.Add(ev); 
```

# python - 在特殊出现的字符处拆分字符串

> ID：16138136
> 
> 赞同：-1
> 
> 时间：2013-04-22T01:31:37.843
> 
> 标签：python, regex

我有一个充满这样的字符串的数据文件：

```
1682|Scream of Stone (Schrei aus Stein) (1991)|08-Mar-1996 
```

我已经解析了字符串并在 处拆分`"|"`并将其转储到列表中，所以我有：

```
['1682', 'Scream of Stone (Schrei aus Stein) (1991)', '08-Mar-1996'] 
```

我需要做的是在围绕年份的括号中的位置 1 处进一步拆分列表。如果电影的标题没有括号，我可以轻松做到，但这里不是这样。

如果下一个字符不是数字，我该如何写一些跳过括号拆分的内容？我想结束：

```
['1682', 'Scream of Stone (Schrei aus Stein)', '1991', '08-Mar-1996'] 
```

一些帮助会很棒！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:39:22.560

This looks like a job for *regular expressions!*

```
import re

data = ['1682', 'Scream of Stone (Schrei aus Stein) (1991)', '08-Mar-1996']

def handleYear(matchobj):
    data.insert(2, matchobj.group(1))
    return ''

data[1] = re.sub(r'\s*\((\d+)\)$', handleYear, data[1]) 
```

This removes any string of the form `(dddd)` from the end of `data[1]` and inserts it into the next position in `data`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:39:44.647

You can use regex split:

```
import re
title="1682|Scream of Stone (Schrei aus Stein) (1991)|08-Mar-1996"
print re.split('\((\d+)\)', title.split("|")[1]) 
```

The `re.split` splits on regular expressions, i.e., uses regexes as delimiters. If there is a capture in the split expression, the delimiter is also kept in the split result rather than discarded.

The split expression `\((\d+)\)` first matches literal parentheses `\( ... \)`. and within them matches only digits `\d+`. But we also capture the digits to keep them, hence `\((\d+)\)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:39:04.020

You can use python [re module](http://docs.python.org/2/library/re.html).

```
>>> import re
>>> s = 'Scream of Stone (Schrei aus Stein) (1991)'
>>> re.findall('\([0-9]+\)', s)
['(1991)']
>>> re.findall('\((\d+)\)', s)
['1991']
>>> 
```

Once you have the year parsed out. you can insert it in whichever index you want to in the list.

# php - 带有 css 浮动的 DOMPDF

> ID：16138140
> 
> 赞同：16
> 
> 时间：2013-04-22T01:31:47.480
> 
> 标签：php, html, dompdf

我不知道为什么，但是 html 页面显示得很好，但是 dompdf 没有使用浮点数。

代码是 2300 + 行，所以在这里发布很长....但它都是内联 css。

```
<div style="float:left;"> </div> 
```

我已经尝试将css包装在样式标签中并内联，但没有运气。

这是html页面

[http://www.ems-complete.com/ccems/ccems_reports/daily_vehicle_check_sheet.php?id=5](http://www.ems-complete.com/ccems/ccems_reports/daily_vehicle_check_sheet.php?id=5)

这是 dompdf 链接

[http://www.ems-complete.com/ccems/ccems_reports/form_daily_vehicle_check.php?id=5](http://www.ems-complete.com/ccems/ccems_reports/form_daily_vehicle_check.php?id=5)

我不知道为什么，但 html 页面显示得很好，但 dompdf 没有使用浮点数......

代码是 2300 + 行长，所以在这里发布很长....但它都是内联 css...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T14:59:49.747

在 0.6.0 代码库中引入了浮点支持，但默认情况下禁用它，因为它仍在开发中。确保您已通过将 DOMPDF_ENABLE_CSS_FLOAT 设置为 true 来启用它。

从 0.7.0 版开始，浮动支持默认启用。

话虽如此，由于该功能仍在开发中，因此您不会获得想要的结果。跨越多个页面的浮动当前无法按预期工作，因为在呈现非浮动内容之前会发生分页符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-12-22T07:08:12.853

伙计们使用**display: inline-block;** 而不是浮动。我在我的项目中使用旧版本的 dompdf。我在 dompdf_config.custom.inc 文件中启用 DOMPDF_ENABLE_CSS_FLOAT true 。但是浮动结果是重叠和扭曲的。内联块是比每次都使用左浮动新的更好的方法。访问以下 w3school 链接以获取更多信息。[CSS 布局 - 内联块](http://www.w3schools.com/css/css_inline-block.asp)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-17T06:14:28.540

使用 def("DOMPDF_ENABLE_CSS_FLOAT", true); 在 dompdf_config.inc.php 中

它适用于您的 CSS 浮动

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-21T14:46:14.753

你需要使用[https://github.com/barryvdh/laravel-dompdf](https://github.com/barryvdh/laravel-dompdf) 是**Laravel 5**的插件`dompdf`。

 **并更改配置：

供应商/barrryvdh/laravel-dompdf/config/dompdf.php

```
def("DOMPDF_ENABLE_CSS_FLOAT", true); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-07T09:14:32.170

`<div style="position: absolute; left: 6px;"></div>`在我的情况下使用

```
def("DOMPDF_ENABLE_CSS_FLOAT", true); 
```

不管用**

# javascript - 我可以使用 jquery contentWindow 调用命名空间函数吗？

> ID：16138142
> 
> 赞同：1
> 
> 时间：2013-04-22T01:32:14.573
> 
> 标签：javascript, jquery, iframe

我正在使用一些遗留代码，并且正在寻找一种安全的方法来处理以下情况：

我有一个显示产品选择页面的 iframe。我需要向这个 iframe 传递带有查询字符串的回调函数的名称。

在 iframe 中，我从查询字符串中获取回调名称并像这样执行它：

```
$("iframe#content:first", window.top.document)[0].contentWindow[callbackName](); 
```

但这仅在回调是全局公开的函数时才有效。那很蹩脚。此回调应该存在于嵌套对象中。

有什么方法可以指定回调，例如：

```
'myNamespace.nestedNamespace.myCallbackFunction' 
```

并从 contentWindow 对象中执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:41:08.037

在这种情况下，如果我理解正确，下面的内容应该可以解决问题：

```
// Your callback "path".
var callbackPath = 'myNamespace.nestedNamespace.myCallbackFunction';
if (callbackPath != '') {
    // We will need to walk our way to the actual callback.
    var parts = callbackPath.split('.');
    var callback = $("iframe#content:first", window.top.document)[0].contentWindow;

    for (var i = 0; i < parts.length; ++i) {
        callback = callback[ parts[i] ];

        // Was unable to find callback, bail!
        if (!callback)
            break;
    }

    if (typeof callback === 'function')
        callback();
} 
```

# javascript - jQuery Switchclass 不断切换回来

> ID：16138145
> 
> 赞同：0
> 
> 时间：2013-04-22T01:32:36.373
> 
> 标签：javascript, jquery

我想要做的是在点击时制作一个按钮，转到[此页面](http://www.minecraftserverland.com/testview.php)上工艺表的左上角。然后，如果再次单击该元素，它将返回。我正在使用的特定 jQuery 是：

```
$("#sword").click(function () {
    if ( $("#sword").hasClass("s1") ) {
        $('#sword.s1').switchClass( "s1", "sd1", 1000, "linear" );
    } else if (  $("#sword").hasClass("sd1") ) {
        $('#sword').switchClass( "sd1", "s1", 1000, "linear" );
        $('#bukkit').switchClass( "s1", "sd2", 1000, "linear" );
        $('#grass').switchClass( "s1", "sd3", 1000, "linear" );
    }
}); 
```

`sd1`在下方，`s1`是上方的插槽。正如您目前所看到的，它会反弹，然后立即反弹回落。我曾尝试在单击时将弹回设置为一个单独的功能`.s1`，但是当我单击它时不会发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:39:21.100

尝试重新排序您`switchClass`的 id 类别`sword`更改为`sd2`后更改`sd1`为`s1`

```
$("#sword").click(function () {

    if ( $("#sword").hasClass("s1") ) {
        $('#sword.s1').switchClass( "s1", "sd1", 1000, "linear" );
    } else if (  $("#sword").hasClass("sd1") ) {
        $('#bukkit').switchClass( "s1", "sd2", 1000, "linear" );
        $('#grass').switchClass( "s1", "sd3", 1000, "linear" );
        $('#sword').switchClass( "sd1", "s1", 1000, "linear" );
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:34:04.927

刚刚在您链接到的页面上检查了您的代码。您已将两个单击处理程序绑定到`#sword`. 你只展示了第一个。您的代码如下

```
$("#sword").click(function () { // handler 1
    if ( $("#sword").hasClass("s1") ) {
        $('#sword.s1').switchClass("s1", "sd1", 1000, "linear");
    } else if ($("#sword").hasClass("sd1")) {
        $('#sword').switchClass( "sd1", "s1", 1000, "linear" );
        $('#bukkit').switchClass( "s1", "sd2", 1000, "linear" );
        $('#grass').switchClass( "s1", "sd3", 1000, "linear" );
    }
});

// a few lines later    

$("#sword").click(function() { // handler 2
    $('#sword').switchClass( "s1", "sd1", 1000, "linear" );
    $('#bukkit').switchClass( "s1", "sd2", 1000, "linear" );
    $('#grass').switchClass( "s1", "sd3", 1000, "linear" );
}); 
```

单击剑首先执行处理程序 1，然后执行处理程序 2。从代码中可以清楚地看出，处理程序 1 将其向上移动，处理程序 2 将其向下移动。

如果您解释为什么要编写第二个处理程序，我可能会提供更多帮助。

# json - spring rest @requestbody 获取子对象

> ID：16138151
> 
> 赞同：2
> 
> 时间：2013-04-22T01:33:41.373
> 
> 标签：json, spring, rest

我有一个问题：会有三个子类 Student,Teacher,Parent。

```
public class Person implements Serializable{

private String name;

private String address;} 
```

学生：

```
public class Student extends Person {

private String cardNo; 
```

}

弹簧休息：

```
@RequestMapping(method = RequestMethod.POST, value = "/create")
@ResponseBody
public CemeteryRestResponse<Boolean> create(
        @RequestBody Person person) throws Exception {.....} 
```

我想使用 one rest 方法来创建这三个角色。但在客户 post Student as JSON 中，它会引发 Exception ：

```
org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "cardNo" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:56:20.387

Jackson 库支持[多态类型处理](http://wiki.fasterxml.com/JacksonPolymorphicDeserialization)，这就是您所追求的。您应该寻找的特定注释是[`@JsonTypeInfo`](http://jackson.codehaus.org/1.9.0/javadoc/org/codehaus/jackson/annotate/JsonTypeInfo.html)注释，您应该将其应用于基类（`Person`类）。

此功能是在 1.5 版中添加的。

# c# - 在 silverlight 中访问 JSON 数组并将其加载到 .net string[] 中

> ID：16138152
> 
> 赞同：0
> 
> 时间：2013-04-22T01:33:55.257
> 
> 标签：c#, json, silverlight

如果我有一个简单的 JSON 对象，它写在脚本标签下的 html 文档空间中（如下所示），我如何轻松地将它加载到 Silverlight 中？我需要将下面两个数组中的每一个加载到 .NET 中它们自己的 String[] 中，并且对于它加载的 Player 对象中的哪些数组不需要是动态的，它总是只是这两个。

谢谢！！！

```
Player = {
    Names: ["name 1","name 2","name 3"],
    Files: ["file 1","file 2","file 3"]
} 
```

在伪代码中：

```
String[] Names = Page.Javascript.Player.Names;
String[] Files = Page.Javascript.Player.Files; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:17:57.120

试试这个正则表达式：

```
Player[^;,N]+Names ?: ?(\[[^\]]*\])[^F]+Files ?: ?(\[[^\]]*\]) 
```

这个正则表达式将匹配上面的字符串。结果组 1 和 2 将包含带有 Names 和 Files 字符串的 json 数组。还要检查这个[小提琴](http://fiddle.re/4vnh6)。

下一步就是将这两个组放到一个 json 解析器或另一个正则表达式中，然后你就有了你的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:12:27.427

如果你有更多的 Json 解析，你可以使用 .Net Json helpers in`System.Json dll`

```
var jsonObj = (JsonObject)JsonArray.Parse("{ Names: ['name 1','name 2','name 3'],  Files: ['file 1','file 2','file 3']}");
// You need to cast JsonValue in string
string[] names = (jsonObj["Names"] as JsonArray).Select(j => (string)j).ToArray();
string[] files = (jsonObj["Files"] as JsonArray).Select(j => (string)j).ToArray(); 
```

您可以使用`DataContractJsonSerializer`在对象中转换 Json...

查看更多[http://msdn.microsoft.com/fr-fr/library/cc197957(v=vs.95).aspx](http://msdn.microsoft.com/fr-fr/library/cc197957(v=vs.95).aspx)

# android - 在google maps api v2 android中显示一辆移动的公共汽车

> ID：16138154
> 
> 赞同：4
> 
> 时间：2013-04-22T01:34:01.237
> 
> 标签：android, google-maps, overlay, google-maps-android-api-2, google-maps-api-2

我正在尝试在 android 应用程序中的 google maps api v2 中显示移动巴士的位置。我可以使用标记和折线标记停靠点并绘制路线。现在，我试图让图像（公共汽车/标记）沿着地图中的路线移动。我正在使用 GroundOverlay 来实现这一点，但我无法使用 GroundOverlay 重新绘制运动图像/标记。

我面临的问题是，当我在 OnCreate 函数中绘制地图时，地图、标记、路线和移动标记的所有位置仅在 oncreate 函数结束时显示一次。我想我走错了方向。有没有办法只重绘移动标记？是否可以在地图顶部查看并使用投影在视图上绘制？（这在 V2 中是否可行？如果是，我们是否有一些在线演示或示例可用？）

# linker - 在 Linux 上使用 GNU makefile 链接 protobuf 库

> ID：16138159
> 
> 赞同：2
> 
> 时间：2013-04-22T01:34:28.210
> 
> 标签：linker, protocol-buffers, linker-errors, gnu-make

我知道 protobuf 库必须使用 GNU makefile 标志`-lprotobuf -lpthread`或可能链接`-l:libprotobuf.so -lpthread`；但是，当我看到以下输出`make`时：`-Wl,--verbose`

```
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libprotobuf.a failed
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libprotobuf.a failed
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/libprotobuf.a failed
attempt to open /lib/../lib64/libprotobuf.a failed
attempt to open /usr/lib/../lib64/libprotobuf.a failed
attempt to open /usr/x86_64-redhat-linux/lib64/libprotobuf.a failed
attempt to open /usr/local/lib64/libprotobuf.a failed
attempt to open /lib64/libprotobuf.a failed
attempt to open /usr/lib64/libprotobuf.a failed
attempt to open /usr/x86_64-redhat-linux/lib/libprotobuf.a failed
attempt to open /usr/lib64/libprotobuf.a failed
attempt to open /usr/local/lib/libprotobuf.a failed
attempt to open /lib/libprotobuf.a failed
attempt to open /usr/lib/libprotobuf.a failed
/usr/bin/ld: cannot find -lprotobuf
collect2: ld returned 1 exit status
make: *** [playfun] Error 1 
```

而是使用`-l:libprotobuf.so -lpthread`：

```
/usr/bin/ld: cannot find -l:libprotobuf.so
collect2: ld returned 1 exit status
make: *** [playfun] Error 1 
```

我知道我已经安装了 Google protobuf 库：

```
$ locate libprotobuf
/usr/lib/libprotobuf.so
/usr/lib/libprotobuf.so.6
/usr/lib/libprotobuf.so.6.0.0
/usr/lib64/libprotobuf.so
/usr/lib64/libprotobuf.so.6
/usr/lib64/libprotobuf.so.6.0.0 
```

[有问题的代码是http://tom7misc.svn.sourceforge.net/viewvc/tom7misc/trunk/tasbot/](http://tom7misc.svn.sourceforge.net/viewvc/tom7misc/trunk/tasbot/)上的“tasbot”（learnfun/playfun）项目；这是我尝试为我的构建（CentOS 5.8）定制的生成文件，并缩减为 SSCCE：

```
# Makefile made by tom7.
default: playfun learnfun
# tasbot
# emu_test

all: playfun tasbot emu_test objective_test learnfun weighted-objectives_test

CXXFLAGS=-Wall -Wno-deprecated -Wno-sign-compare -I/usr/local/include -fno-strict-aliasing

CXX=g++
CC=gcc
SDLARCH=x64

PROTOC=protoc
PROTO_HEADERS=marionet.pb.h
PROTO_OBJECTS=marionet.pb.o

# If you don't have SDL, you can leave these out, and maybe it still works.
#CCNETWORKING= -DMARIONET=1 -I SDL/include -I SDL_net
CCNETWORKING= -I /usr/include/SDL
#LINKSDL=  -mno-cygwin -lm -luser32 -lgdi32 -lwinmm -ldxguid
LINKSDL=  -lSDL
#LINKNETWORKING= $(LINKSDL) -lwsock32 -liphlpapi
#LINKNETWORKING= $(LINKSDL) -lprotobuf -lpthread
LINKNETWORKING= $(LINKSDL) -l:libprotobuf.so -lpthread
SDLOPATH=SDL/build
NETWORKINGOBJECTS= netutil.o $(PROTO_OBJECTS)

# PROFILE=-pg
PROFILE=

OPT=-O2

INCLUDES=-I "../cc-lib" -I "../cc-lib/city"
CPPFLAGS= $(CCNETWORKING) -DPSS_STYLE=1 -DDUMMY_UI -DHAVE_ASPRINTF -Wno-write-strings -m64 $(OPT) -DHAVE_ALLOCA -DNOWINSTUFF $(INCLUDES) $(PROFILE) $(FLTO)

CCLIBOBJECTS=../cc-lib/util.o ../cc-lib/arcfour.o ../cc-lib/base/stringprintf.o ../cc-lib/city/city.o ../cc-lib/textsvg.o

MAPPEROBJECTS=fceu/mappers/24and26.o fceu/mappers/51.o fceu/mappers/69.o fceu/mappers/77.o fceu/mappers/40.o fceu/mappers/6.o fceu/mappers/71.o fceu/mappers/79.o fceu/mappers/41.o fceu/mappers/61.o fceu/mappers/72.o fceu/mappers/80.o fceu/mappers/42.o fceu/mappers/62.o fceu/mappers/73.o fceu/mappers/85.o fceu/mappers/46.o fceu/mappers/65.o fceu/mappers/75.o fceu/mappers/emu2413.o fceu/mappers/50.o fceu/mappers/67.o fceu/mappers/76.o fceu/mappers/mmc2and4.o

# utils/unzip.o removed -- needs lz
UTILSOBJECTS=fceu/utils/ConvertUTF.o fceu/utils/general.o fceu/utils/memory.o fceu/utils/crc32.o fceu/utils/guid.o fceu/utils/endian.o fceu/utils/md5.o fceu/utils/xstring.o fceu/utils/unzip.o

# main binary
# PALETTESOBJECTS=palettes/conv.o

BOARDSOBJECTS=fceu/boards/01-222.o fceu/boards/32.o fceu/boards/gs-2013.o fceu/boards/103.o fceu/boards/33.o fceu/boards/h2288.o fceu/boards/106.o fceu/boards/34.o fceu/boards/karaoke.o fceu/boards/108.o fceu/boards/3d-block.o fceu/boards/kof97.o fceu/boards/112.o fceu/boards/411120-c.o fceu/boards/konami-qtai.o fceu/boards/116.o fceu/boards/43.o fceu/boards/ks7012.o fceu/boards/117.o fceu/boards/57.o fceu/boards/ks7013.o fceu/boards/120.o fceu/boards/603-5052.o fceu/boards/ks7017.o fceu/boards/121.o fceu/boards/68.o fceu/boards/ks7030.o fceu/boards/12in1.o fceu/boards/8157.o fceu/boards/ks7031.o fceu/boards/15.o fceu/boards/82.o fceu/boards/ks7032.o fceu/boards/151.o fceu/boards/8237.o fceu/boards/ks7037.o fceu/boards/156.o fceu/boards/830118C.o fceu/boards/ks7057.o fceu/boards/164.o fceu/boards/88.o fceu/boards/le05.o fceu/boards/168.o fceu/boards/90.o fceu/boards/lh32.o fceu/boards/17.o fceu/boards/91.o fceu/boards/lh53.o fceu/boards/170.o fceu/boards/95.o fceu/boards/malee.o fceu/boards/175.o fceu/boards/96.o fceu/boards/mmc1.o fceu/boards/176.o fceu/boards/99.o fceu/boards/mmc3.o fceu/boards/177.o fceu/boards/__dummy_mapper.o fceu/boards/mmc5.o fceu/boards/178.o fceu/boards/a9711.o fceu/boards/n-c22m.o fceu/boards/179.o fceu/boards/a9746.o fceu/boards/n106.o fceu/boards/18.o fceu/boards/ac-08.o fceu/boards/n625092.o fceu/boards/183.o fceu/boards/addrlatch.o fceu/boards/novel.o fceu/boards/185.o fceu/boards/ax5705.o fceu/boards/onebus.o fceu/boards/186.o fceu/boards/bandai.o fceu/boards/pec-586.o fceu/boards/187.o fceu/boards/bb.o fceu/boards/sa-9602b.o fceu/boards/189.o fceu/boards/bmc13in1jy110.o fceu/boards/sachen.o fceu/boards/193.o fceu/boards/bmc42in1r.o fceu/boards/sc-127.o fceu/boards/199.o fceu/boards/bmc64in1nr.o fceu/boards/sheroes.o fceu/boards/208.o fceu/boards/bmc70in1.o fceu/boards/sl1632.o fceu/boards/222.o fceu/boards/bonza.o fceu/boards/smb2j.o fceu/boards/225.o fceu/boards/bs-5.o fceu/boards/subor.o fceu/boards/228.o fceu/boards/cityfighter.o fceu/boards/super24.o fceu/boards/230.o fceu/boards/dance2000.o fceu/boards/supervision.o fceu/boards/232.o fceu/boards/datalatch.o fceu/boards/t-227-1.o fceu/boards/234.o fceu/boards/deirom.o fceu/boards/t-262.o fceu/boards/235.o fceu/boards/dream.o fceu/boards/tengen.o fceu/boards/244.o fceu/boards/edu2000.o fceu/boards/tf-1201.o fceu/boards/246.o fceu/boards/famicombox.o fceu/boards/transformer.o fceu/boards/252.o fceu/boards/fk23c.o fceu/boards/vrc2and4.o fceu/boards/253.o fceu/boards/ghostbusters63in1.o fceu/boards/vrc7.o fceu/boards/28.o fceu/boards/gs-2004.o fceu/boards/yoko.o

INPUTOBJECTS=fceu/input/arkanoid.o fceu/input/ftrainer.o fceu/input/oekakids.o fceu/input/suborkb.o fceu/input/bworld.o fceu/input/hypershot.o fceu/input/powerpad.o fceu/input/toprider.o fceu/input/cursor.o fceu/input/mahjong.o fceu/input/quiz.o fceu/input/zapper.o fceu/input/fkb.o fceu/input/mouse.o fceu/input/shadow.o

FCEUOBJECTS=fceu/asm.o fceu/cart.o fceu/cheat.o fceu/conddebug.o fceu/config.o fceu/debug.o fceu/drawing.o fceu/emufile.o fceu/fceu.o fceu/fds.o fceu/file.o fceu/filter.o fceu/ines.o fceu/input.o fceu/movie.o fceu/netplay.o fceu/nsf.o fceu/oldmovie.o fceu/palette.o fceu/ppu.o fceu/sound.o fceu/state.o fceu/unif.o fceu/video.o fceu/vsuni.o fceu/wave.o fceu/x6502.o

# fceu/drivers/common/config.o fceu/drivers/common/configSys.o
DRIVERS_COMMON_OBJECTS=fceu/drivers/common/args.o fceu/drivers/common/nes_ntsc.o fceu/drivers/common/cheat.o fceu/drivers/common/scale2x.o  fceu/drivers/common/scale3x.o fceu/drivers/common/scalebit.o fceu/drivers/common/hq2x.o fceu/drivers/common/vidblit.o fceu/drivers/common/hq3x.o
EMUOBJECTS=$(FCEUOBJECTS) $(MAPPEROBJECTS) $(UTILSOBJECTS) $(PALLETESOBJECTS) $(BOARDSOBJECTS) $(INPUTOBJECTS) $(DRIVERS_COMMON_OBJECTS)

#included in all tests, etc.
BASEOBJECTS=$(CCLIBOBJECTS) $(NETWORKINGOBJECTS) $(PROTOBUFOBJECTS)

TASBOT_OBJECTS=headless-driver.o config.o simplefm2.o emulator.o basis-util.o objective.o weighted-objectives.o motifs.o util.o

OBJECTS=$(BASEOBJECTS) $(EMUOBJECTS) $(TASBOT_OBJECTS)

%.pb.cc: %.proto
        $(PROTOC) $< --cpp_out=.

%.pb.h: %.proto
        $(PROTOC) $< --cpp_out=.

# without static, can't find lz or lstdcxx maybe?
#LFLAGS =  -m64 -Wl,--subsystem,console $(LINKNETWORKING) -lz $(OPT) $(FLTO) $(PROFILE) -static
LFLAGS =  -m64 -Wl,--verbose $(LINKNETWORKING) -lz $(OPT) $(FLTO) $(PROFILE) -static
# -Wl,--subsystem,console
# -static -fwhole-program
# -static

learnfun : $(OBJECTS) learnfun.o
        $(CXX) $^ -o $@ $(LFLAGS)

# XXX never implemented this.
showfun : $(OBJECTS) showfun.o
        $(CXX) $^ -o $@ $(LFLAGS)

tasbot : $(OBJECTS) tasbot.o
        $(CXX) $^ -o $@ $(LFLAGS)

playfun : $(OBJECTS) playfun.o
        $(CXX) $^ -o $@ $(LFLAGS)

emu_test : $(OBJECTS) emu_test.o
        $(CXX) $^ -o $@ $(LFLAGS)

objective_test : $(BASEOBJECTS) objective.o objective_test.o
        $(CXX) $^ -o $@ $(LFLAGS)
weighted-objectives_test : $(BASEOBJECTS) weighted-objectives.o weighted-objectives_test.o util.o
        $(CXX) $^ -o $@ $(LFLAGS)

test : emu_test objective_test weighted-objectives_test
        time ./emu_test
        time ./objective_test
        time ./weighted-objectives_test

clean :
        rm -f learnfun playfun showfun *_test *.o $(EMUOBJECTS) $(CCLIBOBJECTS) gmon.out

veryclean : clean cleantas

cleantas :
        rm -f prog*.fm2 deepest.fm2 heuristicest.fm2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:46:28.983

首先，我不知道你为什么在`-l:libprotobuf.so`这里：

```
LINKNETWORKING= $(LINKSDL) -l:libprotobuf.so -lpthread 
```

不应该是这样`-lprotobuf`吗？

其次，您已将`-static`标志添加到链接行，这意味着您的应用程序将尝试静态链接。这就是它寻找`libprotobuf.a`静态库的原因。但是，正如您在文件列表中显示的那样，您没有安装 protobuf 库的静态版本，只有共享库。

# c++ - 什么时候为结构保留内存空间？

> ID：16138161
> 
> 赞同：4
> 
> 时间：2013-04-22T01:34:47.307
> 
> 标签：c++, memory, struct

是否在声明以下结构或创建该结构的对象时保留了内存空间？

```
struct student
{
    int marks;
    float average;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:43:56.183

当您声明`struct`您所做的方式时，没有为该结构分配内存。但是，您可以立即声明`struct` *并*定义该类型的变量，如下所示：

```
struct student
{
    int marks;
    float average;
} var_name; // Reserves the memory in the global/static space 
```

您还可以在自动空间（局部变量）或动态空间中定义变量`new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:43:32.397

通常应该是在您创建定义时。由于您可以声明结构的实例而不定义它（可能在标头中使用 extern），因此除非定义实例，否则不会为实例使用空格。

但是，如果对象实际上没有被使用，编译器可以选择从程序中去除对象。有时编译器可能会过于热心并剥离根本没有引用但实际上执行重要操作的对象，例如某种注册。

# java - ical4j 异常日历必须至少包含一个组件

> ID：16138162
> 
> 赞同：0
> 
> 时间：2013-04-22T01:34:48.117
> 
> 标签：java, jakarta-mail, icalendar, ical4j

我正在尝试使用 ical4j 创建和保存 ics

当我运行以下代码时，我得到一个日历必须包含至少一个组件..如何将组件附加到我的日历，或将一个事件附加到我的日历...

线程“main”net.fortuna.ical4j.model.ValidationException 中的异常：日历必须包含至少一个组件

```
 Calendar calendar = new Calendar();
    calendar.getProperties().add(new ProdId("-//Tyler Eans//iCal4j 1.0//EN"));
    calendar.getProperties().add(Version.VERSION_2_0);
    calendar.getProperties().add(CalScale.GREGORIAN);

    java.util.Calendar cal = java.util.Calendar.getInstance();
    cal.set(java.util.Calendar.MONTH, java.util.Calendar.DECEMBER);
    cal.set(java.util.Calendar.DAY_OF_MONTH, 25);

    VEvent christmas = new VEvent(new Date(cal.getTime()), "Christmas Day");
    // initialise as an all-day event..
    christmas.getProperties().getProperty(Property.DTSTART).getParameters().add(Value.DATE);

    FileOutputStream fout = new FileOutputStream("mycalendar.ics");

    CalendarOutputter outputter = new CalendarOutputter();
    outputter.output(calendar, fout); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T13:54:20.487

只需在输出前添加这一行：

```
calendar.getComponents().add(christmas); 
```

# android - 在android中选择数据存储类型

> ID：16138166
> 
> 赞同：0
> 
> 时间：2013-04-22T01:35:03.413
> 
> 标签：android, database

我正在创建一个安卓应用程序。我在选择正确的数据存储选项时遇到问题。

所有数据都是预制的，很小的，不会经常编辑和加载。

数据将是结构化的，这就是为什么一开始我想到了 sqlite 数据库（一张表，只有大约 20 条记录）。但是存储在单个字段中的文本大小的限制是 255 个字符，我可能会有大约 500 个字符的字段。

对我来说最好的存储选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:09:39.930

你从哪里得到 500 个字符的限制？[SQLite 文档](https://www.sqlite.org/limits.html)说 1,000,000,000 字节。

虽然，您确实应该考虑构建您的数据，以便不需要巨大的字段。

通常，当我有一些静态应用程序数据时，我会在我的资源中将其打包为 XML 或 JSON，并在运行时将其解析为对象。如果你经常阅读它，你可以缓存它。

# javascript - How to make sure a user performs an action in an iframe

> ID：16138175
> 
> 赞同：0
> 
> 时间：2013-04-22T01:36:42.627
> 
> 标签：javascript, url, iframe, task

I have an iframe where a user has to perform a task and when the task is completed it will show another iframe where the user will perform a task and after that is completed a button will show

So I need to know how to - Check the current url of an iframe then - When the users url = example.com hide the iframe and show another then - When the user completes the task stated above a button will show

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:58:00.230

只要您在 iframe 中引用的所有 url 都在同一个域中，您就可以这样做：

```
document.getElementById("id_of_iframe").contentWindow.location.href 
```

但是，如果它们引用不同的域，您将遇到安全/跨域问题。

# css - 这是将绝对定位元素水平居中的有效方法吗？

> ID：16138181
> 
> 赞同：3
> 
> 时间：2013-04-22T01:37:19.640
> 
> 标签：css, positioning, css-position, centering

我想要一种可重用的方法来将绝对定位的固定宽度元素水平居中在它们的容器中，并且我想要可重用的代码（例如，没有负像素边距）。

我偶然发现了一个完美的组合：

[http://jsfiddle.net/aaronadams/Mquha/](http://jsfiddle.net/aaronadams/Mquha/)

```
<div class="outer center">
    <div class="inner center"></div>
</div> 
```

```
.outer {
    position: absolute;
    width: 400px; height: 400px;
    background: #999;
}

.inner {
    position: absolute;
    width: 200px; height: 400px;
    background: #666;
}

.center {
    left: 0; right: 0;
    margin-left: auto; margin-right: auto;
} 
```

它很干净，它（相对）容易理解，它似乎可以在 IE 8+、Chrome、Firefox、Safari 中运行……但它也似乎是一个巨大的、肮脏的、不好的定位黑客，可能会在接缝处分崩离析随时。

我找不到任何文档来表明这种定位行为是正确还是不正确。它是哪一个？适合生产，还是完全不可靠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:00:19.947

鉴于您的两个容器`.outer`和`.inner`绝对定位的约束，那么您所做的不仅是正确的，而且在未指定父容器的宽度时也是唯一的方法。

您的解决方案完全按照 CSS 2.1 规范工作，它很健壮。

作为参考，您需要查看：

[http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width)

它指定如何计算绝对定位元素的宽度。

在您的 jsFiddle 示例中，您需要意识到两个的包含块`<div>`是视口或根元素。您还没有通过指定`top`or`bottom`属性来说明垂直放置。此外，由于绝对定位的元素是不流动的，因此它们的固有高度不会影响计算包含块的高度，并且在某些应用程序中，这是一个使这种方法在不进行修改的情况下无法使用的因素。

此外，如果您将示例代码包装在相对定位的 wrapper`<div>`中，并且应用了固定宽度，则子元素仍将正确居中，如此演示所示：http: [//jsfiddle.net/audetwebdesign/aNS5j /](http://jsfiddle.net/audetwebdesign/aNS5j/)（请记住，您可能需要在包装元素中留出足够的高度。）

但是，正如前面在评论中指出的那样，如果包含块的宽度（我的演示中的视口或包装元素）小于您的子元素的宽度（在您的示例中为 400px），那么居中将不会更长的工作时间，**但**根据 CSS 规范，这仍然是正确的行为。

您的问题涉及 CSS 视觉格式化模型如何工作的一个基本但重要的基础。

**在旁边**

如果不对`.inner`元素使用绝对定位，您仍然可以获得相同的效果，在这种情况下，`margin: 0 auto`就足够了。在稍微简洁的 CSS 声明中节省成本。

**关于负边距**

尽管负边距确实有效并且在大多数现代浏览器中始终如一地实现，但 CSS 2.1 规范并没有说明应该如何实现负边距。理论上，负边距可能会在某些仍符合 CSS 规范的用户代理中失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:44:11.733

我一直发现，一旦你进入`position:absolute;`游泳池，你就放弃了一个优雅的解决方案。遗憾的是，在很多情况下，绝对定位是解决问题的唯一方法。

据我所知，行业标准使用负边距，正如您所提到的：http: [//jsfiddle.net/Mquha/3/](http://jsfiddle.net/Mquha/3/)

再一次，这感觉很脏，而且：不可重复使用。

我研究了你建议的方法，你的方法似乎是一个相当现代的发现，我有点惊讶它甚至可以工作。无论如何，它比负边距方法容易得多，并且似乎被所有主要浏览器支持，就像你说的那样。我正在采用您将来提出的方法，仍然不完美，但至少它比使用负边距不那么脏。我只能建议您在使用绝对定位时也这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T02:52:47.377

这是我最好的选择

将你的 CSS 更改为

```
#outer {
    position: absolute;
    width: 400px; height: 400px;
    background: #999;
}

#inner {
    position: absolute;
    width: 200px; height: 400px;
    background: #666;
}

.center {
    margin-left: auto; margin-right: auto;
} 
```

和你的 html 到

```
<div id="outer center" class="center">
    <div id="inner center" class="center"></div>
</div> 
```

# css - image in div bigger than window size, hide vertical scroll bars?

> ID：16138186
> 
> 赞同：1
> 
> 时间：2013-04-22T01:38:01.227
> 
> 标签：css, scrollbar

I have a mouse move functionality to scroll a 3544 x 4092 image in a div, filling the whole screen.

I got rid of horisontal bars using:

```
body {
    overflow-x: hidden;
} 
```

But nothing else works thus far for the vertical bars. Any ideas would be helpful.

This is the CSS for the div containing the image (its parent is the body):

```
#zoompage{
    cursor: pointer;
    position: absolute;
    width: 120%;  
    z-index: 300;
    left: -10%;
    top: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:40:30.153

Typically, you can prevent vertical scroll bars with `overflow: hidden;` or `overflow-y: hidden;`.

# asp.net - 创建操作中的 ASP.Net MVC 4 空属性覆盖默认 SQL 值

> ID：16138189
> 
> 赞同：1
> 
> 时间：2013-04-22T01:38:16.400
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有一个 Model `League`，对应的 SQL Server 表有一个`DateCreated`使用默认 SQL 值的列`getdate()`。

当我添加一个 new`League`时，该`DateCreated`列会写入一个`null`值，我猜这是 EF 覆盖 SQL`getdate()`函数的结果。有没有办法让 EF 在添加新行时忽略此列？这是我的创建操作：

```
 [HttpPost]
    public ActionResult Create(LeagueCreateViewModel lcv)
    {
        League league = new League();
        league.Title = lcv.Title;
        league.SiteId = lcv.SiteId;

        if (ModelState.IsValid)
        {
            db.Leagues.Add(league);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.SiteId = new SelectList(db.Sites, "Id", "Title", league.SiteId);
        return View(lcv);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:03:54.790

如果您使用的是 EF 4.1，那么它不受支持，您必须明确说明它 - 在代码中注意这一点。你要做的是为你的对象创建一个部分类，并在你的对象的构造函数中执行“默认”。

```
public partial class League {
    public League() {
        DateCreated = DateTime.Now; 
        // or DateTime.UtcNow, depends on your logic
    }
} 
```

# php - Provide default values for html form, with option to change values before $_POST

> ID：16138191
> 
> 赞同：0
> 
> 时间：2013-04-22T01:39:17.130
> 
> 标签：php, html

I am currently creating an html form on a web page, and i was wondering if there was a way to add default values to the text boxes, but the user could also just delete the default text and enter in new text if he needed to???

What i currently have is this...

```
<html>
  <body>
    <form method="post">
      Suspend: <input type="text" name="sus"><br />
      Device Name: <input type="text" name="dev"><br />
      IP: <input type="text" name="ip"><br />
      Dependency: <input type="text" value="none" name="depend"><br />
      Email: <input type="email" value="abc@123.com" name="email">
      <input type="submit" value="submit" name="submit">
    </form>
    </body>
    </html>
 <?php
  if(isset($_POST['sumbit']))
 {
   $sus=$_POST['sus'];
   $dev=$_POST['dev'];
   $ip=$_POST['ip'];
   $depend=$_POST['depend'];
   $email=$_POST['email'];

    if(isset($sus) && isset($dev) && isset($ip) && isset($depend) && isset($email)
     {
       $update=mysqli_query($con, "UPDATE table SET Suspend=$sus, Device=$dev, IP=$ip,   Dependence=$depend, Email=$email WHERE id=$id");
      }
 } 
```

With the email and dependency fields, they will be the default values 95% of the time, but not all the time, and my boss wants default values supplied for them, but also wants them to be able to change them... I then perform mysql queries with these $_POST results to update the database... right now, even if you change the text in the field in the form, it still enters in the default values in the database.. i need it to where if they do not change the default value, then the default value will be added to the database... any help would be greatly appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:41:38.973

您可以像这样在 php 中获取值

```
$value = $_POST['email']; 
```

如果您在输入框中输入了一些内容，您将获得默认值的值。

如果您使用**html5**，则需要使用**占位符 attr**，然后在此处查看：

[http://davidwalsh.name/html5-placeholder](http://davidwalsh.name/html5-placeholder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:44:57.777

HTML 5 具有 INPUT 标记的新占位符属性，但是当您在字段中键入时，该值会消失。INPUT 标签也有 value 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:46:00.407

试着看看这个：[占位符](http://davidwalsh.name/html5-placeholder)

占位符是显示在输入中的默认文本。但是，如果用户没有插入任何占位符值，则在提交表单时不会将其包含到帖子中。仍然会`value=""`被认可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:06:03.197

由于占位符 attr 仍然是相当新的并且不支持较旧的浏览器，因此这里有一个后备，可用于提供与占位符 attr 相同的功能。

```
if (!("placeholder" in document.createElement("input"))) {
    var inputs = document.querySelectorAll("input[placeholder]"),
        input,
        dateDefault;

    for (var i = 0, len = inputs.length; i < len; i++) {
         input = inputs[i];
         input.value = input.getAttribute("placeholder");

         input.addEventListener("focus", function() {
             dateDefault = this.getAttribute("placeholder");
             (this.value === dateDefault) && (this.value === "");
         }, false);
         input.addEventListener("blur", function() {
             (this.value === "") && (this.value === dateDefault);
         }, false);
    }
} 
```

如果占位符 attr 不可用，它会使用您为占位符 attr 设置的值并将其分配给该值。然后使用一些js你可以检测输入字段是否为空或仍然具有原始值，或者用户是否输入。您可以轻松地将其调整为 jQuery 或使用 addEventListener、attachEvent 或任何您需要的方式来支持您需要的浏览器。希望这可以帮助！

# android - view SQLite Databases in android listview?

> ID：16138194
> 
> 赞同：2
> 
> 时间：2013-04-22T01:39:44.713
> 
> 标签：android, database, sqlite, android-listview

I am sure there is an easy solution to this one but I figured I would check with all the folks here first.

I am working on a database creation and management application for android where the user creates and manages data along the line of what PHPMyAdmin does for regular computers.

I have the section where the user creates a database and can insert tables with the appropriate styled data into the system.

The next priority is selecting which DB to enter and modify its contents. Is there a way to display the available databases, along with its table contents, in the form of a list-view for the user to enter and edit the desired data??

I know that this is a rather dull question, but this is basically the last piece of the puzzle for me to fit into this app before it is operational in a raw format. If you need any further information, or any code to examine, I will be happy to provide.

Thanks again for everyone's assistance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:53:26.250

这是一个关于 SQLite 数据库和显示内容的好教程`ListView`： [http ://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial)

它并没有过多地编辑，但很容易看出他将值放入数据库的哪个位置。

YouTube 上的 thenewboston 是一个很好的 Android 教程资源，他浏览了`SQLite`数据库： [http ://www.youtube.com/watch?v=gEg9OdufXmM](http://www.youtube.com/watch?v=gEg9OdufXmM)

如果您已经有点知道自己在做什么，那么它非常全面且缓慢，如果您只想跳到这里，他会在这里插入数据/编辑数据库： [http ://www.youtube.com/watch?v= S3Z4e7KgNdU](http://www.youtube.com/watch?v=S3Z4e7KgNdU)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-27T02:49:12.653

我知道下面可以优化，但现在只需创建这样的方法来自动完成。方法...

1.  在一秒钟内创建一个随机名称的空数据库，
2.  保存新数据库的位置 - **getDatabasePath**，
3.  快速删除空数据库，
4.  从保存的路径中删除文件名以获取目录路径 olny，
5.  列出数据库路径中的所有文件，不包括“-journal”文件。

它是这样的：

```
ArrayList<String> arr_list_of_db_files = getDBFILES();

pivate ArrayList<String> getDBFILES() 
  {
   ArrayList<String> arr = new ArrayList<String>;
   String db_path, rand_name, str_tmp;

   //ad.1-2\. random file name for db   
   rand_name = new Random().nextInt((4000000-2000+1)+2000).toString()+".db";
   db_path = openOrCreateDatabase(rand_name, MODE_PRIVATE, null).getPath();

   //ad.3.
   deleteDatabase(rand_name);

   //ad.4.
   db_path = db_path.replace("/" + rand_name, "");

   //ad.5.
   File [] files = new File(db_path).listFiles();
   if (files == null) { return null; }

   //so now we get the filenames one by one
   for (int i = 0; i < files.length; i++)
       { 
          str_tmp = files[i].getName();
          if (!str_tmp.endsWith("-journal"))
             {  arr.add(str_tmp); }
       }
   return arr;
  } 
```

顺便说一句，我无法测试代码，但我希望它很好，你们中的一些人会觉得它有用。

***编辑：我已经优化了上面的代码。***

# c - why the data segment (ds) is 0 ? event the other legal variable(integer) is there

> ID：16138198
> 
> 赞同：0
> 
> 时间：2013-04-22T01:40:29.503
> 
> 标签：c, linux, null

I wrote the following C program.

```
int main() {
  int i = 3;
  char *q = "hello";
  char *p = NULL;
  return 0;
} 
```

When I compile and debug it with gdb, I get the following reg information..

```
gcc main.c -g
gdb a.out

info reg:
cs  0x33   51
ss  0x2b   43
ds  0x0    0 
```

My question is if `ds` is 0, how integer `i` and `char* q` are getting their physical address?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:53:13.947

这取决于编译器。数据段是程序虚拟地址空间的一部分，其中包含由程序员初始化的全局变量和静态变量。默认初始化为零的全局和静态分配的数据保存在称为进程的 BSS 区域。堆是动态内存（由 malloc()、calloc()、realloc() 和 new – C++ 获得）的来源。. 堆栈段是分配本地（自动）变量的地方。所以 i , p 和 q 存储在堆栈段中。代码段包含已编译的程序。RO（只读）段包含常量字符串，如“Hello”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:50:21.620

这里 i 和 q 是主函数堆栈的一部分。编译后，它们归结为堆栈上的地址。因此，它们不会成为数据段的一部分。

# javascript - 如何在 Javascript 中将 CSS 选择器转换为 XPath？

> ID：16138200
> 
> 赞同：1
> 
> 时间：2013-04-22T01:40:36.203
> 
> 标签：javascript, node.js, xpath, css-selectors

我正在寻找`Nokogiri::CSS.xpath_for()`.

我找到了 css2xpath，但是 Nokogiri 的结果确实有效，而 css2xpath 返回的选择器无效。

我正在寻找的结果将是这样的：

`["//div[@id = 'my_div']//*[position() = 1 and self::table]//*[position() = 1 and self::tbody]//*[position() = 2 and self::tr]//*[position() = 1 and self::td]//*[position() = 1 and self::table]//*[position() = 1 and self::tbody]//*[position() = 2 and self::tr]//*[position() = 2 and self::td]"]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T00:50:25.727

我肯定会推荐使用库将 CSS 转换为 XPath。

例如，尝试[**css-to-xpath**](https://github.com/featurist/css-to-xpath)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T08:08:15.113

您可以尝试[convert-cssxpath](https://www.npmjs.com/package/convert-cssxpath)。这个 npm 包还支持交互式控制台，并尽可能简化 XPath 表达式。

# c# - MVC4 模型验证然后使用 JQuery 将 JSON 帖子提交到外部 URI

> ID：16138202
> 
> 赞同：2
> 
> 时间：2013-04-22T01:40:44.413
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, visual-studio-2012

我需要提交一个简单的表单并验证模型。如果模型有效，我想序列化该模型并使用自定义标头通过 POST 将其发送到外部（https）Web 服务。最后，我将处理从请求中得到的响应并显示适当的消息。

我正在完美地验证来自控制器的模型并序列化对象，但似乎无法找到一种方法来创建对外部 URI 的 JSON 发布请求。有没有办法使用 JQuery.ajax 或 $.post 来做到这一点。也许我错过了一个关键的 ajax 参数来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:09:01.427

因此，根据对问题的澄清，您可以这样做：

定义将验证对象的控制器方法

```
public ActionResult TestMethod() {
    // do server-side validation
    return Json(aValidObject);
} 
```

你向你的控制器做一个 ajax 发布，这样你就可以验证你的模型，然后返回一个 json 结果。

```
$.ajax({
    url: '@Url.Action("TestMethod")',
    data: some_data,
    type: "post",        
    success: function (result) {
        // result is a valid json object
        doExternalPost(result);
    }
}); 
```

添加自定义标题并进行外部发布

```
function doExternalPost(o) {
    $.ajax({
        url: 'http://some_external_url',
        data: o,        
        dataType: 'json',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('custom_header', 'some_value');
        },
        success: function() {
            // post is sucessful 
        },
        error: function (xhr, errorType, exception) {
            var errorMessage = exception || xhr.statusText || xhr.responseText;
            alert('An error has occured: ' + errorMessage);
        },
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:45:51.033

尝试这个

```
var data = {jsonDataObjectHere};

var request = $.ajax({
    url : 'externalUrl.com/something.whatever',
    type : 'POST',
    data : data // see above
});

request.success(function(response){
    // the response is the stuff from the server
}); 
```

我困了，请原谅错别字

祝你好运

编辑：为了澄清一点，使用 MVC 你真的不需要序列化 ​​json 对象，mvc 会按原样接受它。

# javascript - Simple javascript execution for Chrome Extension

> ID：16138203
> 
> 赞同：0
> 
> 时间：2013-04-22T01:40:45.000
> 
> 标签：javascript, google-chrome-extension

I'm trying to borrow the JavaScript from [http://readable.tastefulwords.com/](http://readable.tastefulwords.com/).

Instead of making it a bookmarklet, I wanted to turn the script into an extension. I DO NOT know a lot of Java, only enough to execute certain things. I figure it'll be easy, just borrow a tutorial Chrome extension template and put the script in somewhere.

Well, about 3 hours of researching and testing, I'm stuck. I can get other simple scripts to run EXCEPT the one from that site.

I have done some searching around and I even used the script design from this one post (last answer on that post): [Run javascript with click on popup.html icon in Chrome extension](https://stackoverflow.com/questions/13193549/run-javascript-with-click-on-popup-html-icon-in-chrome-extension)

I managed to set up the prompt.js, and the code looks like this:

```
function promptBox()
  {
    _readableOptions=
    {
      'text_font':'quote(Palatino Linotype), Palatino, quote(Book Antigua), Georgia, serif','text_font_monospace':'quote(Courier New), Courier, monospace','text_font_header':'quote(Times New Roman), Times, serif','text_size':'18px','text_line_height':'1.5','box_width':'30em','color_text':'#282828','color_background':'#F5F5F5','color_links':'#0000FF','text_align':'normal','base':'blueprint','custom_css':''
    };
    if(document.getElementsByTagName('body').length>0);
    else
    {
      return;
    }    
    if(window.$readable)
    {
      if(window.$readable.bookmarkletTimer)
        {
          return;
        }
    }
    else
    {
      window.$readable={};
    }
    window.$readable.bookmarkletTimer=true;
    window.$readable.options=_readableOptions;
    if(window.$readable.bookmarkletClicked)
    {
      window.$readable.bookmarkletClicked();
      return;
    }
    _readableScript=document.createElement('script');
    _readableScript.setAttribute
      (
        'src','http://readable-static.tastefulwords.com/target.js?rand='+encodeURIComponent(Math.random())
      );
      document.getElementsByTagName('body')[0].appendChild(_readableScript);
   }

chrome.extension.onClicked.addListener(promptBox()); 
```

I just need that last script to work and I am sure it can make the article I want to read "readable".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:29:36.623

请注意，您的 if (document...) 语句保证什么都不做，这意味着 promptBox() 函数的其余部分是死代码。

```
if (something)
  ;
else {
  return;
} 
```

# c++ - 为什么有时函数不运行？

> ID：16138204
> 
> 赞同：2
> 
> 时间：2013-04-22T01:40:45.003
> 
> 标签：c++, function

一些代码：

```
Menu.Handle_MouseOvers(MousePosition); //Runs function below

void Handle_MouseOvers(Vector2<int> &MousePositions) ///Runs function below
{
    if (MenuButtons.size() > 0)
    MenuButtons[0].CheckContains(MousePositions);
}

void CheckContains(Vector2<int> &MousePositions)
{
    if (ButtonShape.GetShape() == "Rect" && ButtonShape.GetRect().Contains(MousePositions)) ///This doesn't run sometimes
    {
        MouseOver = true;
        std::cout << "MouseOver is true" << std::endl;
    }
    else{
        std::cout << "mouseOver is false" << std::endl;
        MouseOver = false;
    }
} 
```

出于某种原因，ButtonShape.GetRect().Contains(MousePositions) 只运行了大约 80% 的时间。我在函数中放置了一些 couts，当它失败时，它根本不运行该函数。我不知道为什么它大部分时间都可以工作，哈哈。有没有人有任何想法？任何帮助将不胜感激。

将此添加为编辑；

```
bool Contains(Vector2<int> &MousePosition)
{
    std::cout << MousePosition.x << " " << MousePosition.y << std::endl;
    if (MousePosition.x >= x && MousePosition.x <= x + Width && MousePosition.y >= y && MousePosition.y <= y + Height)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:44:41.257

一个原因可能是因为这是一个逻辑/布尔表达式：

```
ButtonShape.GetShape() == "Rect" && ButtonShape.GetRect().Contains(MousePositions) 
```

这样`&&`工作：

*   如果左侧的表达式为假，则它的计算结果为假而不计算右侧的表达式
*   如果左侧表达式的计算结果为真，则仅计算第二个表达式
    *   现在，如果右侧表达式的计算结果为假，则结果为假
    *   否则，最终结果为真。

* * *

如果您在删除后进行测试，请`GetShape`确保每次`Shape`都设置为。`Rect`

* * *

如果该功能每次都没有运行，那么可能是您`MousePositions`每次都没有正确设置。根据您的函数代码，这将显示为函数未运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:51:09.943

如果 ButtonShape.GetShape() != "Rect"，那么第二个表达式（包含对 ButtonShape.GetRect().Contains(MousePositions) 的调用）将不会被调用，因为它不需要满足整个表达式 -这称为“短路”。

# r - 使用 `gpplot2` 复制 `sciplot` 使用多个因子变量

> ID：16138206
> 
> 赞同：2
> 
> 时间：2013-04-22T01:40:51.000
> 
> 标签：r

我非常喜欢使用`sciplot`实验数据，因为我不必手动计算误差线。过去，我用它对两个因子变量进行分组，例如：

```
plot1<-bargraph.CI(
  df$factor1,   #categorical factor for the x-axis
  df$y,         #numerical DV for the y-axis
  df$factor2    #grouping factor
) 
```

但是，我现在需要对三个因子变量进行分组。文档表明这`sciplot`是不可能的`sciplot.`

所以，现在到了必要的时间来问......我到底该怎么做`ggplot2`？具体来说，是否有一种简洁的方法来生成包含超过 3 个因子变量的误差线图？我在网上四处寻找，在寻找一个优雅的解决方案时总是不满意。

下面的示例数据：

```
factor1          factor2             factor3     y
More expensive   Least important     Blue        1
Less expensive   Most important      Blue        0
Same cost        Least important     Red         1
More expensive   Least important     Red         0
Less expensive   Most important      Red         1
Same cost        Least important     Blue        1
More expensive   Least important     Red         1
Less expensive   Least important     Blue        0
Same cost        Most important      Red         1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:17:20.097

`sciplot`您可以通过两次调用来复制（在一定程度上）`stat_summary`。

您可以将两个因子水平合并为`interaction`（使用`interaction`）或使用分面。

我将使用`ToothGrowth`基于 R 的 datasets 包中附带的。

```
# add third factor
ToothGrowth$F3 <- letters[1:2]
# coerce dose to a factor
ToothGrowth$dose <- factor(ToothGrowth$dose, levels = c(0.5,1,2))

# interaction on the x axis
 ggplot(ToothGrowth, aes(y = len, x = interaction(supp, F3))) + 
  stat_summary(fun.y = 'mean', fun.ymin = function(x) 0, geom = 'bar', 
    aes(fill =dose), position = 'dodge') +
  stat_summary(fun.ymin = function(x) mean(x) - sd(x), 
    fun.ymax = function(x) mean(x) + sd(x),  position ='dodge', 
    geom = 'errorbar', aes(group = dose)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/BbwgM.png)

```
# facetting on the third factor
ggplot(ToothGrowth, aes(y = len, x = supp )) + 
  stat_summary(fun.y = 'mean', fun.ymin = function(x) 0, geom = 'bar', 
   aes(fill =dose), position = 'dodge') +
  stat_summary(fun.ymin = function(x) mean(x) - sd(x), 
               fun.ymax = function(x) mean(x) + sd(x), position ='dodge', 
               geom = 'errorbar', aes(group = dose))+
  facet_wrap(~F3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/YAwFS.png)

```
ggplot(ToothGrowth, aes(y = len, x = supp)) + 
  stat_summary(fun.y = 'mean', fun.ymin = function(x) 0, 
               geom = 'bar', aes(fill =interaction(dose, F3)), 
               position = 'dodge') +
  stat_summary(fun.ymin = function(x) mean(x) - sd(x), 
               fun.ymax = function(x) mean(x) + sd(x), 
               position ='dodge', geom = 'errorbar', 
               aes(fill =interaction(dose, F3))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/PVT6N.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-23T15:14:49.597

实际上这在 sciplot 中*是可能的。*下面是两个解决方案，第一个是通过将分组因子指定为列表，第二个是从 ggplot 复制分面解决方案。

```
library(sciplot)

## add third factor as in above example
ToothGrowth$F3 <- letters[1:2]

## Adding group as a list
bargraph.CI(response=len, x.factor=supp, group=list(dose, F3),
            data=ToothGrowth, legend=TRUE, x.leg=14, xlim=c(0,19),
            err.width=0.025) 
```

![输出](https://i.stack.imgur.com/ni6Np.png)

```
## Using "panels"
par(mfrow=c(1,2), xpd=NA)
bargraph.CI(response=len, x.factor=supp, group=dose, data=ToothGrowth,
            subset=F3=="a", xlab="a", cex.lab=1.25,
            legend=TRUE, x.leg=7.5, err.width=.025)
bargraph.CI(response=len, x.factor=supp, group=dose, data=ToothGrowth,
            subset=F3=="b", xlab="b", cex.lab=1.25, err.width=.025) 
```

![输出](https://i.stack.imgur.com/r0ZyS.png)

# jsf - 带有命令按钮的数据表与来自字符串的动态按钮

> ID：16138210
> 
> 赞同：0
> 
> 时间：2013-04-22T01:41:28.687
> 
> 标签：jsf, button, dynamic, hyperlink, datatable

我正在创建一个按钮或链接，以便在有人搜索产品后将产品添加到购物车。这是我们的 ProdcutsController.java 类中的那个部分：

```
public String getResponse() {
    String resultStr = "";
    resultStr += theModel.getProductID() + "<br/>"
            + theModel.getUserID() + "<br/>"
            + theModel.getTitle() + "<br/>"
            + theModel.getProductType() + "<br/>"
            + theModel.getProductDesc() + "<br/>"
            + theModel.getRating() + "<br/>"
            + theModel.getPictureURL() + "<br/>"
            + theModel.getPrice() + "<br/>";

    response = resultStr;
    return response;
}

public String searchProduct() {
    ProductsDAO aProductDAO = new ProductsDAOImpl();    // Creating a new object each time.
    ArrayList products = aProductDAO.searchProduct(theModel); 

    response = "";

    for (int i=0; i < products.size(); i++) {
        theModel = (ProductsBean)products.get(i);
        response += getResponse();
    }
    theModel.setSearchResult(response);

    return "searchResults.xhtml"; // navigate to "searchResults.xhtml"
} 
```

现在它显示的和看起来一样糟糕。我对 JSF 很陌生（在我们的课程中使用 2.1 版）并且之前在类似的课程中使用过 ASP.NET。我最初的想法是在响应 += getResponse() 之后添加调用我们方法的 commandButton 的 JSF 代码，这违反了[BalusC 的评论中的](https://stackoverflow.com/a/2120183/2305667)规则 #2 , 产品控制器中的 addToCart()。它在相应搜索结果旁边显示按钮，但不运行 #{cartController.addToCart()} 方法。

我查看了数据表，例如[BalusC 对“JSF 数据表中的 JSF 命令按钮”的评论](https://stackoverflow.com/a/3951281/2305667)。基本上这归结为两个问题：

*   我们是否应该尝试使用数据表来显示我们的数据并在列中使用“添加到购物车”按钮？我能否将其绑定到该特定产品 ID 的 addToCart() 方法？我问“应该”是因为我们是 JSF 的新手，这可能超出了我们的想象。
*   我的第一个解决方案可行吗？我们可以从一个字符串中动态地创建可行的 JSF 表单按钮吗？
*   有什么比我们尝试的更简单的吗？

任何帮助是极大的赞赏。我们目前使用的是 JSF 2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:22:52.957

我们能够在我提供的链接中查看上面 BalusC 的评论来实现数据表。一旦我们进行了一些试验/错误，它就可以完美而简单地工作。

# iphone - 自定义委托为空 iOS

> ID：16138215
> 
> 赞同：2
> 
> 时间：2013-04-22T01:42:04.677
> 
> 标签：iphone, ios, delegates

我知道这应该是一件很容易解决的事情，但我看不出出了什么问题。可能是额外的一对会有所帮助。这是我想要做的。

1.  在我的表格视图控制器中，导航控制器上有一个 (+) 按钮来添加新项目。
2.  我有一个模态segue，将它带到下一个视图控制器。用户填写表格并点击保存表格视图控制器重新加载新添加的记录。

为此，我使用委托实现了协议。

**MyFormViewController.h**

```
protocol MyCustomDelegate <NSObject>

@required

- (void)addNewRecord:(myFormViewController *)formViewController itemToAdd:(Item *)item;

@end

@property (nonatomic,weak) id<MyCustomDelegate> delegate; 
```

**MyFormViewController.m**

```
@synthesize delegate;

- (IBAction)addItem:(id)sender {
    Item *item = [[Item alloc]init];

    item.name = itemName.text;
    item.desc = itemDescription.text;

    // I am having problem here, self.delegate is being null even though, it's being set in    prepareForSegue.
    if ([self.delegate respondsToSelector:@selector(addNewRecord:)]) {

        [self.delegate addNewRecord:self itemToAdd:item];
    }
    else{

        // delegate is getting set to null for some reason.
        NSLog(@"Delegate method not getting called...%@",delegate);
    }
} 
```

在**MyTableViewController.h**

@interface MyTableViewController : UITableViewController

**MyTableViewController.m**

```
-(void)addItem:(myFormViewController *)formViewController itemToAdd:(Item *)item{

    if(item)
    {
        MyClass *_itemClass = [[MyClass alloc]initWithPath:@"items/"];

        [_itemClass addItemForUser:item];
    }

    [formViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

在我的**prepareForSegue** 方法中，我将 tableviewcontroller 设置为委托。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

   if ([segue.identifier isEqualToString:@"addItemSegue"]){

    myFormViewController *_showaddTopic = [[myFormViewController alloc]init];

    _showaddTopic.delegate = self;
} 
```

毕竟，我在 myFormViewController 中的委托被设置为“null”。我不确定为什么它不起作用。这是非常基本的东西，但让我很难过。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:44:44.183

```
myFormViewController *_showaddTopic = [[myFormViewController alloc]init];
_showaddTopic.delegate = self; 
```

有你的问题。您正在*创建*一个*新*的MyFormViewController。但那是错误的 MyFormViewController；您想使用*已经*是 segue 的目标控制器的那个。所以你设置了错误的对象的委托。

（PS 请注意我使用大写字母来开始一个类的名称？总是这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T03:26:41.287

也许 _showaddTopic.delegate = self; 不能在这里写，然后立即分配这个对象

# javascript - MVC 控制器中的 ExtJS specialKey 事件

> ID：16138216
> 
> 赞同：1
> 
> 时间：2013-04-22T01:42:19.023
> 
> 标签：javascript, extjs

我有一个非常标准的登录表单，结构如下：

```
Window { id: idLogin,  
    Form {
      User Text Field 
      Password Text Field  
      Remember Me Check Box 
    }   
    Login Button 
} 
```

* * *

然后，我这样写我的控制器：

```
Ext.define('My.controller.Login', {
    extend: 'Ext.app.Controller',
    //working   
    init: function(application) {
        this.control({
            "#idLogin button":   {click: this.onButton},
            "#idLogin form > *": {specialKey: this.onKey}
        });
    },
    //working
    onButton: function(button, e, eOpts) {
        //...
    },
    //not working
    onKey: function (field, el) {
        if (el.getKey() == Ext.EventObject.ENTER) //...
    }
}); 
```

* * *

和功能正在运行`init`。`onButton`但是，我的 specialKey`onKey`函数似乎与视图没有关联。我试过`"#idLogin form > *"`, `"#idLogin form > textfield"`，或者只是`"#idLogin form"`没有工作，我不知道为什么。请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T06:41:02.747

我认为这些事件区分大小写，它`specialkey`使用小写的 K [http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.form.field.Base-event-specialkey](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.form.field.Base-event-specialkey)。顺便说一句，你想要每个表单字段吗？因为您可以像这样使您的侦听器：`#idLogin form [isFormField]`获取表单中的所有表单字段。

# java - @param 究竟是如何工作的 - Java

> ID：16138217
> 
> 赞同：32
> 
> 时间：2013-04-22T01:42:19.600
> 
> 标签：java, param

注释是如何`@param`工作的？

如果我有这样的事情：

```
/* 
*@param testNumber;
*/

int testNumber = 5;
if (testNumber < 6) {
   //Something
} 
```

这将如何`@param`影响 testNumber？它甚至会影响 testNumber 吗？

谢谢。如果我用错了，请告诉我。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-22T01:51:55.610

`@param`是**javadoc**用来生成文档的特殊格式注释。它用于表示方法可以接收的参数（或多个参数）的描述。还有`@return`和`@see`分别用来描述返回值和相关信息：

[http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format)

除其他外，还有：

```
/**
 * Returns an Image object that can then be painted on the screen. 
 * The url argument must specify an absolute {@link URL}. The name
 * argument is a specifier that is relative to the url argument. 
 * <p>
 * This method always returns immediately, whether or not the 
 * image exists. When this applet attempts to draw the image on
 * the screen, the data will be loaded. The graphics primitives 
 * that draw the image will incrementally paint on the screen. 
 *
 * @param  url  an absolute URL giving the base location of the image
 * @param  name the location of the image, relative to the url argument
 * @return      the image at the specified URL
 * @see         Image
 */
 public Image getImage(URL url, String name) { 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-22T01:45:03.873

`@param`不会影响号码。它只是用于制作 javadocs。

有关 javadoc 的更多信息： [http ://www.oracle.com/technetwork/java/javase/documentation/index-137868.html](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-10T08:43:35.327

`@param`不会影响 testNumber。它是一个`Javadoc`注释 - 即用于生成文档。您可以`Javadoc`在类、字段、方法、构造函数或接口（例如 , ）之前立即添加`@param`注释`@return`。一般以' **@** '开头，必须是第一个就行。

使用的优点`@param`是：- 通过创建包含属性和一些自定义 Javadoc 标记的简单 Java 类，您可以让这些类作为代码生成的简单元数据描述。

```
 /* 
       *@param testNumber
       *@return integer
    */
    public int main testNumberIsValid(int testNumber){

       if (testNumber < 6) {
          //Something
        }
     } 
```

每当在您的代码中重用 testNumberIsValid 方法时，IDE 都会向您显示该方法接受的参数和该方法的返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T17:47:59.587

它基本上是一个评论。众所周知，从事同一个项目的许多人必须了解代码更改。我们在程序中对参数做一些注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-14T17:37:19.153

您可能会错过 @author 并且在 @param 内部您需要解释该参数的用途、使用方法等。

# ruby - 使用 instance_exec 并将方法转换为 Proc

> ID：16138221
> 
> 赞同：1
> 
> 时间：2013-04-22T01:43:23.483
> 
> 标签：ruby, metaprogramming, ruby-1.8, ruby-1.8.7

我可以获取一段代码，`instance_exec`然后得到正确的结果。我想从另一个对象中取出一个方法，并在我的范围内调用其中一个方法。当我从不同的对象中获取一个方法时，将它变成一个过程，然后`instance_exec`它，我没有得到预期的结果。代码如下。

```
class Test1
    def ohai(arg)
        "magic is #{@magic} and arg is #{arg}"
    end
end

class Test2
    def initialize
        @magic = "MAGICAL!"
    end

    def scope_checking
        @magic
    end

    def do_it
        ohai = Test1.new.method(:ohai)
        self.instance_exec("foobar", &ohai)
    end
end

describe "Test2 and scopes" do
    before do
        @t2 = Test2.new
    end

    it "has MAGICAL! in @magic" do
        @t2.scope_checking.should == "MAGICAL!"
    end

    # This one fails :(
    it "works like I expect converting a method to a proc" do
        val = @t2.do_it
        val.should == "magic is MAGICAL! and arg is foobar"
    end

    it "should work like I expect" do
        val = @t2.instance_exec do
            "#{@magic}"
        end

        val.should == "MAGICAL!"
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:45:57.260

似乎，在 Ruby 中，使用定义的方法`def some_method`永久绑定到定义它们的类。

因此，当您调用`.to_proc`它们时，它们会保留其原始实现的绑定，并且您无法重新绑定它们。好吧，您可以，但仅限于与第一个对象相同类型的对象。有可能我可以对继承做一些花哨的事情，但我不这么认为。

解决方案变成而不是使用方法，我只是将实际`Proc`的 s 放入变量中然后使用它们，因为它们直到执行时才被绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:44:56.563

不确定这是一个多么好的想法，但这通过了您的测试：

```
class Test1
  def ohai(arg, binding)
    eval('"magic is #{@magic} "', binding).to_s + "and arg is #{arg}"
  end
end

class Test2
  def initialize
    @magic = "MAGICAL!"
  end

  def scope_checking
    @magic
  end

  def get_binding
    return binding()
  end

  def do_it
    self.instance_exec(get_binding) {|binding| Test1.new.ohai("foobar", binding) }
  end
end 
```

# c# - 如何从 Gtk Scale / Range 小部件中获取值？

> ID：16138226
> 
> 赞同：0
> 
> 时间：2013-04-22T01:43:54.330
> 
> 标签：c#, monodevelop, gtk#

我正在使用 monodevelop stetic gui 创建者制作我的第一个 C# 项目。我有几个按钮、一个 TextView 对象和一些垂直和水平缩放小部件。这些都是 Gtk（或 Gtk#，或 Gtk+？？）小部件，不确定是哪个。而且我真的无法理解文档 - 甚至不确定我应该阅读哪些文档。

我想从 Scale 小部件中获取一个值，它是 Gtk.Range 的一个子类，它处理任何涉及滚动的事情。

我还想更好地了解 Gtk 是什么以及有关该主题的任何良好知识来源。到目前为止，我所能做的就是复制[这些教程](http://monodevelop.com/Documentation/Building_a_simple_application_using_the_Stetic_GUI_Designer)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:18:17.510

Gtk# 是围绕 GTK+ 2.x 的 C# 包装器（GTK+ 3.x 端口正在进行中）。是的，加号“+”是名称的一部分，即使您会发现 GTK+ 在大多数情况下被引用为 GTK 或 gtk。最好的文档可以在 Gtk 网站上找到：

[http://www.gtk.org/documentation.php](http://www.gtk.org/documentation.php)

Gtk# 将大部分函数转换为 CamelCase 方法（去掉 gtk_xxx_ 前缀，因为方法已经隐含了一个类）；属性的设置器和获取器以及事件的信号。在最初的纯粹恐怖片刻之后没有任何作用是很容易的。

例如，让我们检查如何从`Gtk.Range`. 我们从 Gtk+ 2 文档开始`GtkRange`：

[https://developer.gnome.org/gtk2/stable/GtkRange.html#gtk-range-get-value](https://developer.gnome.org/gtk2/stable/GtkRange.html#gtk-range-get-value)

`gtk_range_get_value`似乎是最好的候选者，它是一个将`GtkRange`“对象”作为第一个参数的 getter 函数（这是一个指向纯 C 中的结构的指针，但无论如何我们都称它为对象，因为这是我们在 Gtk# 中得到的）。Gtk# 通常将此作为实例属性获取器，所以让我们尝试一下

```
Gtk.Range yourRange = /* your code to get or create the range */;
COnsole.WriteLine(yourRange.Value); 
```

它有效。:D

# python - 在 Python 中使用 try-except-else 是一个好习惯吗？

> ID：16138232
> 
> 赞同：519
> 
> 时间：2013-04-22T01:44:52.343
> 
> 标签：python, exception, exception-handling, try-catch

在 Python 中，我不时会看到以下内容：

```
try:
   try_this(whatever)
except SomeException as exception:
   #Handle exception
else:
   return something 
```

**try-except-else 存在的原因是什么？**

我不喜欢那种编程，因为它使用异常来执行流控制。但是，如果它包含在语言中，那肯定是有充分理由的，不是吗？

**我的理解是异常不是错误**，它们应该只用于异常情况（例如我尝试将文件写入磁盘并且没有更多空间，或者我没有权限），而不是用于流控制。

通常我将异常处理为：

```
something = some_default_value
try:
    something = try_this(whatever)
except SomeException as exception:
    #Handle exception
finally:
    return something 
```

或者如果发生异常我真的不想返回任何东西，那么：

```
try:
    something = try_this(whatever)
    return something
except SomeException as exception:
    #Handle exception 
```

* * *

## 回答 #1

> 赞同：788
> 
> 时间：2013-04-22T03:13:38.423

> “我不知道是不是因为无知，但我不喜欢那种编程，因为它使用异常来进行流控制。”

在 Python 世界中，使用异常进行流控制是常见且正常的。

甚至 Python 核心开发人员也使用异常来进行流控制，并且这种风格在语言中很重要（即迭代器协议使用[*StopIteration*](http://docs.python.org/2.7/library/exceptions.html#exceptions.StopIteration)来表示循环终止）。

此外，try-except 样式用于防止某些[“look-before-you-leap”](http://docs.python.org/2.7/glossary.html#term-lbyl)结构中固有的竞争条件。例如，测试[*os.path.exists*](http://docs.python.org/2.7/library/os.path.html#os.path.exists)会导致信息在您使用时可能已经过时。同样，[*Queue.full*](http://docs.python.org/2.7/library/queue.html#Queue.Queue.full)返回可能是陈旧的信息。在这些情况下，[try-except-else 样式](http://docs.python.org/2.7/glossary.html#term-eafp)将生成更可靠的代码。

> “我的理解是异常不是错误，它们应该只用于异常情况”

在其他一些语言中，该规则反映了他们的文化规范，正如他们的图书馆所反映的那样。“规则”也部分基于这些语言的性能考虑。

Python 文化规范有些不同。在许多情况下，您*必须*对控制流使用异常。此外，在 Python 中使用异常不会像在某些编译语言中那样减慢周围代码和调用代码的速度（即[CPython](http://en.wikipedia.org/wiki/CPython)已经在每一步都实现了用于异常检查的代码，无论您是否实际使用异常）。

换句话说，您对“例外是为例外”的理解是在其他一些语言中有意义的规则，但对于 Python 则不然。

> “但是，如果它包含在语言本身中，那肯定是有充分理由的，不是吗？”

除了有助于避免竞争条件外，异常对于将错误处理拉到循环外也非常有用。这是解释语言中的必要优化，这些语言不倾向于具有自动[循环不变的代码运动](http://en.wikipedia.org/wiki/Loop-invariant_code_motion)。

此外，在处理问题的能力与问题出现的地方相去甚远的常见情况下，异常可以大大简化代码。例如，通常有顶级用户界面代码调用业务逻辑代码，而这些代码又调用低级例程。低级例程中出现的情况（例如数据库访问中唯一键的重复记录）只能在顶级代码中处理（例如要求用户提供与现有键不冲突的新键）。对这种控制流使用异常允许中级例程完全忽略该问题，并与流控制的这方面很好地分离。

这里有一篇[很好的关于异常的必要性的博客文章](http://uberpython.wordpress.com/2012/09/23/why-im-not-leaving-python-for-go/)。

另外，请参阅此堆栈溢出答案：[异常是否真的是异常错误？](https://stackoverflow.com/questions/180937/are-exceptions-really-for-exceptional-errors)

> “try-except-else 存在的原因是什么？”

else 子句本身很有趣。它在没有例外但在 finally 子句之前运行。这是它的主要目的。

如果没有 else 子句，在最终确定之前运行附加代码的唯一选择就是将代码添加到 try 子句的笨拙做法。这很笨拙，因为它有可能在代码中引发不打算由 try 块保护的异常。

在最终确定之前运行额外的未受保护代码的用例并不经常出现。因此，不要期望在已发布的代码中看到很多示例。这有点罕见。

else 子句的另一个用例是执行在未发生异常时必须发生的操作，而在处理异常时不会发生的操作。例如：

```
recip = float('Inf')
try:
    recip = 1 / f(x)
except ZeroDivisionError:
    logging.info('Infinite result')
else:
    logging.info('Finite result') 
```

另一个例子发生在单元测试运行器中：

```
try:
    tests_run += 1
    run_testcase(case)
except Exception:
    tests_failed += 1
    logging.exception('Failing test case: %r', case)
    print('F', end='')
else:
    logging.info('Successful test case: %r', case)
    print('.', end='') 
```

最后，在 try 块中最常见的 else 子句用于美化（将异常结果和非异常结果对齐在同一缩进级别）。这种使用始终是可选的，并不是绝对必要的。

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2015-07-25T13:30:17.183

> ## try-except-else 存在的原因是什么？

`try`块允许您处理预期的错误。该`except`块应该只捕获您准备处理的异常。如果您处理意外错误，您的代码可能会做错事并隐藏错误。

`else`如果没有错误，将执行一个子句，并且通过不在`try`块中执行该代码，您可以避免捕获意外错误。同样，捕获意外错误可以隐藏错误。

### 例子

例如：

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle(the_exception)
else:
    return something 
```

“try, except”套件有两个可选子句，`else`和`finally`. 所以实际上是`try-except-else-finally`。

`else`仅当块没有异常时才会评估`try`。它允许我们简化下面更复杂的代码：

```
no_error = None
try:
    try_this(whatever)
    no_error = True
except SomeException as the_exception:
    handle(the_exception)
if no_error:
    return something 
```

因此，如果我们将 an`else`与替代方案（可能会产生错误）进行比较，我们会发现它减少了代码行数，并且我们可以拥有一个更具可读性、可维护性和更少错误的代码库。

### `finally`

`finally`无论如何都会执行，即使正在使用 return 语句评估另一行。

## 用伪代码分解

它可能有助于将其分解，以尽可能最小的形式展示所有功能，并附上注释。假设这个语法正确（但除非名称已定义，否则不可运行）伪代码在函数中。

例如：

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle_SomeException(the_exception)
    # Handle a instance of SomeException or a subclass of it.
except Exception as the_exception:
    generic_handle(the_exception)
    # Handle any other exception that inherits from Exception
    # - doesn't include GeneratorExit, KeyboardInterrupt, SystemExit
    # Avoid bare `except:`
else: # there was no exception whatsoever
    return something()
    # if no exception, the "something()" gets evaluated,
    # but the return will not be executed due to the return in the
    # finally block below.
finally:
    # this block will execute no matter what, even if no exception,
    # after "something" is eval'd but before that value is returned
    # but even if there is an exception.
    # a return here will hijack the return functionality. e.g.:
    return True # hijacks the return in the else clause above 
```

确实，我们*可以*将块中的代码包含在`else`块中`try`，如果没有异常，它将运行在哪里，但是如果该代码本身引发了我们正在捕获的那种异常怎么办？将它留在`try`块中会隐藏该错误。

我们希望尽量减少`try`块中的代码行数以避免捕获我们没有预料到的异常，原则是如果我们的代码失败，我们希望它大声失败。这是一个[最佳实践](http://www.faqs.org/docs/artu/ch01s06.html)。

> ## 我的理解是异常不是错误

在 Python 中，大多数异常都是错误。

我们可以使用 pydoc 查看异常层次结构。例如，在 Python 2 中：

```
$ python -m pydoc exceptions 
```

或 Python 3：

```
$ python -m pydoc builtins 
```

会给我们层次结构。我们可以看到大多数类型`Exception`都是错误，尽管 Python 将其中一些用于结束`for`循环 ( `StopIteration`) 之类的事情。这是 Python 3 的层次结构：

```
BaseException
    Exception
        ArithmeticError
            FloatingPointError
            OverflowError
            ZeroDivisionError
        AssertionError
        AttributeError
        BufferError
        EOFError
        ImportError
            ModuleNotFoundError
        LookupError
            IndexError
            KeyError
        MemoryError
        NameError
            UnboundLocalError
        OSError
            BlockingIOError
            ChildProcessError
            ConnectionError
                BrokenPipeError
                ConnectionAbortedError
                ConnectionRefusedError
                ConnectionResetError
            FileExistsError
            FileNotFoundError
            InterruptedError
            IsADirectoryError
            NotADirectoryError
            PermissionError
            ProcessLookupError
            TimeoutError
        ReferenceError
        RuntimeError
            NotImplementedError
            RecursionError
        StopAsyncIteration
        StopIteration
        SyntaxError
            IndentationError
                TabError
        SystemError
        TypeError
        ValueError
            UnicodeError
                UnicodeDecodeError
                UnicodeEncodeError
                UnicodeTranslateError
        Warning
            BytesWarning
            DeprecationWarning
            FutureWarning
            ImportWarning
            PendingDeprecationWarning
            ResourceWarning
            RuntimeWarning
            SyntaxWarning
            UnicodeWarning
            UserWarning
    GeneratorExit
    KeyboardInterrupt
    SystemExit 
```

一位评论者问道：

> 假设您有一个 ping 外部 API 的方法，并且您想在 API 包装器之外的类中处理异常，您是否只需从 except 子句下的方法中返回 e，其中 e 是异常对象？

不，您不返回异常，只需用裸露的方式重新引发它`raise`以保留堆栈跟踪。

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle(the_exception)
    raise 
```

或者，在 Python 3 中，您可以引发新异常并使用异常链保留回溯：

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle(the_exception)
    raise DifferentException from the_exception 
```

我在[这里详细说明我的答案](https://stackoverflow.com/questions/2052390/manually-raising-throwing-an-exception-in-python)。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-04-22T01:47:55.260

Python 不赞成只在异常情况下使用异常的想法，实际上成语是[“请求宽恕，而不是许可”](http://docs.python.org/2/glossary.html#term-eafp)。这意味着使用异常作为流程控制的常规部分是完全可以接受的，实际上是值得鼓励的。

这通常是一件好事，因为以这种方式工作有助于避免一些问题（作为一个明显的例子，经常避免竞争条件），并且它往往使代码更具可读性。

想象一下，您有一个需要处理的用户输入，但有一个已经处理的默认值。该`try: ... except: ... else: ...`结构使得代码非常易读：

```
try:
   raw_value = int(input())
except ValueError:
   value = some_processed_value
else: # no error occured
   value = process_value(raw_value) 
```

比较它在其他语言中的工作方式：

```
raw_value = input()
if valid_number(raw_value):
    value = process_value(int(raw_value))
else:
    value = some_processed_value 
```

注意优点。无需检查值是否有效并单独解析，它们只完成一次。代码也遵循更合乎逻辑的进展，主要代码路径首先，然后是“如果它不起作用，请执行此操作”。

这个例子自然有点做作，但它表明这种结构是有案例的。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-08-25T05:04:02.983

请参阅以下示例，该示例说明了有关 try-except-else-finally 的所有内容：

```
for i in range(3):
    try:
        y = 1 / i
    except ZeroDivisionError:
        print(f"\ti = {i}")
        print("\tError report: ZeroDivisionError")
    else:
        print(f"\ti = {i}")
        print(f"\tNo error report and y equals {y}")
    finally:
        print("Try block is run.") 
```

实施它并通过：

```
 i = 0
    Error report: ZeroDivisionError
Try block is run.
    i = 1
    No error report and y equals 1.0
Try block is run.
    i = 2
    No error report and y equals 0.5
Try block is run. 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-02-03T16:54:25.177

> **在 python 中使用 try-except-else 是一个好习惯吗？**

答案是它依赖于上下文。如果你这样做：

```
d = dict()
try:
    item = d['item']
except KeyError:
    item = 'default' 
```

它表明你对 Python 不是很了解。此功能封装在`dict.get`方法中：

```
item = d.get('item', 'default') 
```

`try`/块是一种视觉上`except`更加混乱和冗长的编写方式，可以使用原子方法在一行中有效地执行。在其他情况下，这是正确的。

然而，这并不意味着我们应该避免所有的异常处理。在某些情况下，最好避免竞争条件。不要检查文件是否存在，只需尝试打开它，然后捕获相应的 IOError。为了简单和可读性，尝试将其封装或将其分解为适当的。

阅读《[Python 之禅》](https://www.python.org/dev/peps/pep-0020/)，了解其中存在紧张的原则，并警惕过于依赖其中任何一种陈述的教条。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-22T02:31:17.210

你应该小心使用 finally 块，因为它与在 try 中使用 else 块不同，除了。无论 try except 的结果如何，都会运行 finally 块。

```
In [10]: dict_ = {"a": 1}

In [11]: try:
   ....:     dict_["b"]
   ....: except KeyError:
   ....:     pass
   ....: finally:
   ....:     print "something"
   ....:     
something 
```

正如每个人都注意到的那样，使用 else 块会使您的代码更具可读性，并且仅在未引发异常时运行

```
In [14]: try:
             dict_["b"]
         except KeyError:
             pass
         else:
             print "something"
   ....: 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-10-15T09:53:38.660

只是因为没有其他人发表过这个观点，我会说

> 避免使用`else`条款，`try/excepts` *因为它们对大多数人来说都不熟悉*

与关键字`try`, `except`, and不同`finally`，从句的含义`else`不是不言而喻的；它的可读性较差。因为它不经常使用，它会导致阅读您的代码的人想要仔细检查文档以确保他们了解正在发生的事情。

（我写这个答案正是因为我`try/except/else`在我的代码库中找到了一个，它引起了一个 wtf 时刻并迫使我做一些谷歌搜索）。

所以，无论我在哪里看到像 OP 示例这样的代码：

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle(the_exception)
else:
    # do some more processing in non-exception case
    return something 
```

我宁愿重构为

```
try:
    try_this(whatever)
except SomeException as the_exception:
    handle(the_exception)
    return  # <1>
# do some more processing in non-exception case  <2>
return something 
```

*   <1> 显式返回，清楚地表明，在异常情况下，我们完成了工作

*   <2> 作为一个很好的次要副作用，曾经在`else`块中的代码被减少了一层。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-01-13T23:40:49.893

每当你看到这个：

```
try:
    y = 1 / x
except ZeroDivisionError:
    pass
else:
    return y 
```

甚至这样：

```
try:
    return 1 / x
except ZeroDivisionError:
    return None 
```

考虑一下：

```
import contextlib
with contextlib.suppress(ZeroDivisionError):
    return 1 / x 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-24T03:22:27.423

这是我关于如何理解 Python 中的 try-except-else-finally 块的简单片段：

```
def div(a, b):
    try:
        a/b
    except ZeroDivisionError:
        print("Zero Division Error detected")
    else:
        print("No Zero Division Error")
    finally:
        print("Finally the division of %d/%d is done" % (a, b)) 
```

让我们试试 div 1/1：

```
div(1, 1)
No Zero Division Error
Finally the division of 1/1 is done 
```

让我们试试 div 1/0

```
div(1, 0)
Zero Division Error detected
Finally the division of 1/0 is done 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-25T02:25:57.473

我试图以稍微不同的角度回答这个问题。

OP的问题有两部分，我也添加了第三部分。

1.  try-except-else 存在的原因是什么？
2.  try-except-else 模式或一般的 Python 是否鼓励使用异常进行流控制？
3.  无论如何，何时使用异常？

### 问题一：try-except-else存在的原因是什么？

可以从战术的角度来回答。存在当然是有理由的`try...except...`。这里唯一新增的是`else...`子句，它的用处归结为它的独特性：

*   只有当块中没有发生异常时，它才会运行一个额外的代码`try...`块。

*   它在块外运行那个额外的代码块`try...`（这意味着在块内发生的任何潜在异常`else...`都不会被捕获）。

*   它在最终确定之前运行那个额外的代码块`final...`。

    ```
     db = open(...)
      try:
          db.insert(something)
      except Exception:
          db.rollback()
          logging.exception('Failing: %s, db is ROLLED BACK', something)
      else:
          db.commit()
          logging.info(
              'Successful: %d',  # <-- For the sake of demonstration,
                                 # there is a typo %d here to trigger an exception.
                                 # If you move this section into the try... block,
                                 # the flow would unnecessarily go to the rollback path.
              something)
      finally:
          db.close() 
    ```

    在上面的示例中，您不能将成功的日志行移到`finally...`块后面。`try...`由于块内可能存在异常，您也不能将其完全移动到块内`else...`。

### 问题 2：Python 是否鼓励使用异常进行流控制？

我没有找到任何官方书面文件来支持这种说法。（对于不同意的读者：请留下您找到的证据链接的评论。）我发现的唯一模糊相关的段落是这个[EAFP 术语](https://docs.python.org/2/glossary.html#term-eafp)：

> EAFP
> 
> 请求宽恕比请求许可更容易。这种常见的 Python 编码风格假设存在有效的键或属性，如果假设被证明是错误的，则捕获异常。这种干净快速的风格的特点是存在许多 try 和 except 语句。该技术与许多其他语言（如 C）常见的 LBYL 风格形成鲜明对比。

该段仅描述了这一点，而不是这样做：

```
def make_some_noise(speaker):
    if hasattr(speaker, "quack"):
        speaker.quack() 
```

我们更喜欢这个：

```
def make_some_noise(speaker):
    try:
        speaker.quack()
    except AttributeError:
        logger.warning("This speaker is not a duck")

make_some_noise(DonaldDuck())  # This would work
make_some_noise(DonaldTrump())  # This would trigger exception 
```

或者甚至可能省略尝试...除了：

```
def make_some_noise(duck):
    duck.quack() 
```

因此，EAFP 鼓励鸭式打字。但它不鼓励使用异常*进行流控制*。

### 问题 3：在什么情况下你应该设计你的程序来*发出*异常？

*关于使用*异常作为控制流是否是反模式的讨论尚无定论。因为，一旦为给定函数做出设计决策，它的使用模式也将被确定，然后调用者别无选择，只能以这种方式使用它。

因此，让我们回到基础，看看函数何时可以通过返回值或通过发出异常来更好地产生结果。

返回值和异常有什么区别？

1.  它们的“爆炸半径”不同。返回值只对直接调用者可用；异常可以无限地自动转发，直到被捕获。

2.  它们的分布模式不同。根据定义，返回值是一段数据（即使您可以返回复合数据类型，例如字典或容器对象，但从技术上讲，它仍然是一个值）。相反，异常机制允许通过它们各自的专用通道返回多个值（一次一个）。在这里，每个`except FooError: ...`and`except BarError: ...`块都被视为自己的专用通道。

因此，每个不同的场景都可以使用一种适合的机制。

*   所有正常情况最好通过返回值返回，因为调用者很可能需要立即使用该返回值。返回值方法还允许以函数式编程风格嵌套调用者层。异常机制的长爆炸半径和多个通道在这里没有帮助。例如，如果任何命名的函数将`get_something(...)`其快乐路径结果作为异常产生，那将是不直观的。（这并不是一个人为的例子。有[一种做法](https://softwareengineering.stackexchange.com/questions/351110/are-exceptions-for-flow-control-best-practice-in-python)可以实现`BinaryTree.Search(value)`使用异常在深度递归的中间将值发送回。）

*   如果调用者可能忘记处理返回值中的错误标记，那么使用异常的特征 #2 将调用者从隐藏的错误中拯救出来可能是个好主意。一个典型的非示例是`position = find_string(haystack, needle)`，不幸的是它的返回值`-1`or`null`会导致调用者中的错误。

*   如果错误标记会与结果命名空间中的正常值发生冲突，则几乎可以肯定会使用异常，因为您必须使用不同的通道来传达该错误。

*   如果正常通道（即返回值）已在快乐路径中使用，并且快乐路径没有复杂的流控制，则您别无选择，只能使用异常进行流控制。人们一直在谈论 Python 如何使用`StopIteration`异常来终止迭代，并用它来证明“使用异常进行流控制”的合理性。但是恕我直言，这只是在特定情况下的实际选择，它并没有概括和美化“使用异常进行流量控制”。

在这一点上，如果你已经对你的函数是只产生返回值还是引发异常做出了正确的决定`get_stock_price()`，或者如果该函数是由现有库提供的，因此它的行为早已被决定，那么你没有太多选择写它的调用者`calculate_market_trend()`。是否使用`get_stock_price()`' 异常来控制您的流程`calculate_market_trend()`只是您的业务逻辑是否需要您这样做的问题。如果是，就去做；否则，让异常冒泡到更高的级别（这利用了异常的特征#1“长爆炸半径”）。

特别是，如果您正在实现一个中间层库`Foo`，并且您碰巧依赖于较低级别的库`Bar`，您可能希望隐藏您的实现细节，通过捕获所有`Bar.ThisError`, `Bar.ThatError`, ... 并将它们映射到`Foo.GenericError`. 在这种情况下，长爆炸半径实际上对我们不利，因此您可能希望“仅当库 Bar 通过返回值返回其错误时”。但是话又说回来，这个决定早就做出了`Bar`，所以你可以忍受它。

总而言之，我认为是否*使用*异常作为控制流是一个有争议的问题。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2015-03-20T16:03:11.920

哦，你是对的。 **Python 中 try/except 之后的 else 是丑陋的**。它导致另一个不需要的流控制对象：

```
try:
    x = blah()
except:
    print "failed at blah()"
else:
    print "just succeeded with blah" 
```

一个完全明确的等价物是：

```
try:
    x = blah()
    print "just succeeded with blah"
except:
    print "failed at blah()" 
```

这比 else 子句要清楚得多。try/except 之后的 else 并不经常写，所以需要一点时间来弄清楚它的含义是什么。

**仅仅因为你可以做一件事，并不意味着你应该做一件事。**

许多功能已添加到语言中，因为有人认为它可能会派上用场。麻烦的是，功能越多，事情就越不清晰和明显，因为人们通常不使用那些花里胡哨的东西。

这里只有我的 5 美分。我必须跟在后面，清理很多大学一年级开发人员编写的代码，他们认为自己很聪明，想以某种超级紧凑、超级高效的方式编写代码，而这只会让事情变得一团糟稍后尝试阅读/修改。我每天投票支持可读性，周日投票两次。

# wordpress - Wordpress - 创建 author.php，但仅适用于自定义帖子类型

> ID：16138236
> 
> 赞同：4
> 
> 时间：2013-04-22T01:45:34.223
> 
> 标签：wordpress, custom-post-type

我想创建一个类似于`author.php`wordpress 的新页面，但只列出了一个特定的自定义帖子类型。拥有两个页面很重要：`author.php`对于常规帖子，而这个新页面`author-custom-post.php`仅适用于自定义帖子类型。

用法是第一个将列出博客文章，另一个将列出作者的科学出版物，每个在自己的页面中。

而且，当然，它应该有一个链接`author-custom-post.php`，我可以在作者简历中使用。

我只能设法找到同时列出这两件事的页面，但没有关于在不同页面中列出的内容。

提前致谢！

# c++ - 什么时候 uint8_t ≠ unsigned char？

> ID：16138237
> 
> 赞同：65
> 
> 时间：2013-04-22T01:45:42.160
> 
> 标签：c++, c, types, unsigned-char, uint8t

根据 C 和 C++ `CHAR_BIT >= 8`，.
但是无论何时`CHAR_BIT > 8`，`uint8_t`甚至都不能表示为 8 位。
它必须更大，因为它`CHAR_BIT`是系统上任何数据类型的最小位数。

什么样的系统可以`uint8_t`合法地定义为除 之外的类型`unsigned char`？

（如果 C 和 C++ 的答案不同，那么我想两者都知道。）

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-22T02:17:49.963

如果存在，则`uint8_t`必须始终具有与 相同的宽度`unsigned char`。但是，它不必是同一类型；它可能是一个不同的扩展整数类型。它也不必具有与 ; 相同的表示形式`unsigned char`。例如，可以以相反的顺序解释这些位。这是一个愚蠢的例子，但它更有意义`int8_t`，其中`signed char`可能是一个补码或符号大小，而`int8_t`需要是二进制补码。

即使在“正常”系统上也使用非 char 扩展整数类型的另一个“优势”`uint8_t`是 C 的别名规则。字符类型可以给任何东西起别名，这可以防止编译器对同时使用字符指针和指向其他类型的指针的函数进行大量优化，除非该`restrict`关键字应用得很好。但是，即使`uint8_t`具有与 完全相同的大小和表示形式`unsigned char`，如果实现使其成为不同的非字符类型，则别名规则将不适用于它，并且编译器可以假设类型`uint8_t`和的对象`int`，例如，可以从不别名。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-22T01:54:21.283

> 什么样的系统可以`uint8_t`合法地定义为除 之外的类型`unsigned char`？

总之，`uint8_t`只能在`CHAR_BIT`8 的系统上合法定义。它是一个可寻址单元，具有正好 8 个值位且没有填充位。

具体来说，`CHAR_BIT`定义了最小可寻址单元的宽度，并且`uint8_t`不能有填充位；只有当最小的可寻址单元正好是 8 位宽时，它才能存在。提供`CHAR_BIT`8，`uint8_t`可以由任何没有填充位的 8 位无符号整数类型的类型定义来定义。

* * *

以下是 C11 标准草案 (n1570.pdf) 所说的：

> **5.2.4.2.1 整数类型**的大小 1 下面给出的值应替换为适用于#if 预处理指令的常量表达式。...它们的实现定义值的大小（绝对值）应等于或大于所示的值，具有相同的符号。
> 
> ```
> -- number of bits for smallest object that is not a bit-field (byte)
>    CHAR_BIT                                            8 
> ```

因此，最小的对象必须恰好包含 CHAR_BIT 位。

* * *

> **6.5.3.4 sizeof 和 _Alignof 运算符**
> 
> ...
> 
> 4 当 sizeof 应用于类型为 char、unsigned char 或 signed char（或其限定版本）的操作数时，结果为 1。 ...

因此，这些是（一些）最小的可寻址单元。显然`int8_t`并且`uint8_t`也可以被认为是最小的可寻址单元，前提是它们存在。

> **7.20.1.1 精确宽度整数类型**
> 
> 1 typedef 名称 intN_t 指定宽度为 N、无填充位和二进制补码表示的有符号整数类型。因此， int8_t 表示这种宽度正好为 8 位的有符号整数类型。
> 
> 2 typedef 名称 uintN_t 指定宽度为 N 且无填充位的无符号整数类型。因此，uint24_t 表示这种无符号整数类型，其宽度正好为 24 位。
> 
> 3**这些类型是可选的。**但是，如果实现提供了宽度为 8、16、32 或 64 位的整数类型，没有填充位，并且（对于有符号类型）具有二进制补码表示，则它应定义相应的 typedef 名称。

我强调“**这些类型是可选**的”。我希望这可以帮到你 ：）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-24T22:30:29.423

到目前为止没有人提到过的一种可能性：如果`CHAR_BIT==8`and unqualified`char`是无符号的，它在某些 ABI 中，那么`uint8_t`它可能是 typedef`char`而不是`unsigned char`. 这至少在它影响重载选择（及其邪恶的孪生兄弟，名称修改）方面很重要，即，如果您要同时拥有两者`foo(char)`并`foo(unsigned char)`在范围内，那么在这样的系统上使用`foo`类型参数调用`uint8_t`会更受欢迎。`foo(char)`

# twitter-bootstrap - Twitter 和 Zurb 基金会在同一个网站上，他们会冲突吗？

> ID：16138244
> 
> 赞同：0
> 
> 时间：2013-04-22T01:46:07.437
> 
> 标签：twitter-bootstrap, web, frameworks, zurb-foundation

我是一名初创网页设计师，我正在熟悉框架。我想知道我可以在网页中同时使用 Twitter Bootstrap 和 Zurb Foundation 吗？他们会不会互相冲突并造成问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:37:54.413

如果不编辑任何 CSS，您将在同一网页上同时使用 Bootstrap 和 Foundation 时发生冲突。两个框架都有 CSS 的默认约定（正文、标题等），这会发生冲突。

如果您想快速对网站进行线框设计，我建议您使用其中一个。如果您觉得好像错过了某个特定功能，那么您可以将该功能移植到您选择的框架上。

# c - C 编程 2 个管道

> ID：16138250
> 
> 赞同：1
> 
> 时间：2013-04-22T01:46:55.720
> 
> 标签：c, operating-system, pipe, execvp, dup2

我想在我的程序中设置 2 个管道。我有 1 个管道工作正常，但我不知道在哪里放置第二个管道。

我的设置的伪代码如下所示，

这是带花括号的，对此感到抱歉

```
//the first pipe:   
pipe(pipe1) 

//the second pipe:  
pipe(pipe2) 

pid = fork()

if(pid == 0) {

  dup2(pipe1[1], 1)
  close(pipe1[0])
  execvp(beforepipe)
  }  

if(pid > 0) { //everything below is in here

  pid2 = fork()

  if(pid2 == 0){

    //pipe1
    dup2(pipe1[0],0)
    dup2(out,1)
    close(pipe1[1])
    execvp(afterpipe)

    //pipe2 does not work might need to be placed in different area
    dup2(pipe1[1],1)
    close(pipe1[0])
    execvp(beforepipe1)
    }

  if(pid2 > 0){
    close(pipe[0])
    close(pipe[1])
    wait() //this is an infinite for loop

    pid3 = fork()

    if(pid3 == 0){
      dup2(pipe2[0],0)
      dup2(out,1)
      close(pipe2[1])
      execvp(afterpipe2)
      }

    if(pid3 > 0) {
      close(pipe2[0])
      close(pipe2[1])
      wait()
      }
    } 
```

第二个管道的位置错误或代码完全错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:55:35.387

```
execvp(afterpipe)
//pipe2 does not work might need to be placed in different area
dup2(pipe1[1],1)
close(pipe1[0])
execvp(beforepipe1) 
```

我认为 execvp() 没有返回。所以 execvp() 下面的代码是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:46:48.827

您的主要问题是您没有关闭足够多的文件描述符。给定`input1`当前目录中包含您的字符串“ `eschew obfuscation\`”的文件，此代码适用于我（但请注意必须关闭多少文件描述符！）。

*   经验法则：如果管道是标准输入或输出的`dup2()`d 或`dup()`d，则关闭两个文件管道文件描述符。

示例代码（带有调试跟踪）：

```
#include <unistd.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

/* command pipeline: cat input1 | tr a-z A-Z | tr \\ q */

int main(void)
{
    int pipe1[2];
    int pipe2[2];
    pid_t pid1;
    char *cmd1[] = { "cat", "input1",        0 };
    char *cmd2[] = { "tr",  "a-z",    "A-Z", 0 };
    char *cmd3[] = { "tr",  "\\",     "q",   0 };

    if (pipe(pipe1) != 0 || pipe(pipe2) != 0)
    {
        perror("pipe failed");
        return 1;
    }

    pid1 = fork();

    if (pid1 < 0)
    {
        perror("fork 1 failed");
        return 1;
    }

    if (pid1 == 0)
    {
        /* Child 1 - cat */
        dup2(pipe1[1], 1);
        close(pipe1[0]);
        close(pipe1[1]);
        close(pipe2[0]);
        close(pipe2[1]);
        execvp(cmd1[0], cmd1);
        perror("failed to execute cmd1");
        return 1;
    }

    printf("pid 1 = %d\n", pid1);
    fflush(stdout);

    pid_t pid2 = fork();
    if (pid2 < 0)
    {
        perror("fork 2 failed");
        return 1;
    }

    if (pid2 == 0)
    {
        /* Child 2 - tr a-z A-Z */
        dup2(pipe1[0], 0);
        dup2(pipe2[1], 1);
        close(pipe1[0]);
        close(pipe1[1]);
        close(pipe2[0]);
        close(pipe2[1]);
        execvp(cmd2[0], cmd2);
        perror("failed to execute cmd2");
        return 1;
    }

    printf("pid 2 = %d\n", pid2);
    fflush(stdout);

    pid_t pid3 = fork();
    if (pid3 < 0)
    {
        perror("fork 3 failed");
        return 1;
    }

    if (pid3 == 0)
    {
        /* Child 3 - tr \\ q */
        dup2(pipe2[0], 0);
        close(pipe1[0]);
        close(pipe1[1]);
        close(pipe2[0]);
        close(pipe2[1]);
        execvp(cmd3[0], cmd3);
        perror("failed to execute cmd3");
        return 1;
    }

    printf("pid 3 = %d\n", pid3);
    fflush(stdout);

    /* Parent - wait for the kids to all die */
    close(pipe1[0]);
    close(pipe1[1]);
    close(pipe2[0]);
    close(pipe2[1]);

    pid_t corpse;
    int   status;
    while ((corpse = wait(&status)) > 0)
        printf("Child %d died status 0x%.4X\n", corpse, status);

    return 0;
} 
```

# c# - 首先在实体框架数据库中使用传递值更新数据库

> ID：16138257
> 
> 赞同：0
> 
> 时间：2013-04-22T01:47:58.807
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我在 Db 中有注册模型，控制器中的以下 post 方法对数据库进行了更新。但是我也想更新登录数据模型

```
[HttpPost]
        public ActionResult Register(StudentDetail details)
        {
                if (DbAccess.LoginDetails.FirstOrDefault(student => student.Username == details.Username) == null)
                {
                    DbAccess.StudentDetails.Add(details);
                    **//here i also want to update login table with added details in database**
                    DbAccess.SaveChanges();

                    return RedirectToAction("HomePage");
                }
                   return View();

        } 
```

下面是实体框架db首先创建的模型

```
public StudentDetail()
        {

            this.UserFriends = new HashSet<UserFriend>();
        }

        public string StudentName { get; set; }
        public string UnivName { get; set; }
        public string City { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public string EmailId { get; set; }

        public virtual ICollection<UserFriend> UserFriends { get; set; }
    }

public partial class LoginDetail
    {
        public string Username { get; set; }
        public string Password { get; set; }
    } 
```

你们能否建议我在该帖子方法中使用用户名和密码来更新 LoginDetail 表。

谢谢，

迈克尔德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:22:29.100

要更新和现有`LoginDetail`记录：

```
var loginDetail = DbAccess.LoginDetails.Single(x => x.Username == details.Username);
loginDetail.Username = details.Username;
loginDetail.Password = details.Password;
DbAccess.Entry(loginDetail).State = EntityState.Modified;
DbAccess.SaveChanges(); 
```

添加新`LoginDetail`记录：

```
var loginDetail = new LoginDetail{
Username = details.Username,
Password = details.Password
};
DbAccess.LoginDetails.Add(loginDetail);
DbAccess.SaveChanges(); 
```

# ruby-on-rails - Rails 在模型中按 def 顺序发布

> ID：16138258
> 
> 赞同：0
> 
> 时间：2013-04-22T01:48:05.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想根据它的总票数来排序帖子。这就是我在 Post 模型中的内容：

```
class Post < ActiveRecord::Base
  attr_accessible :title, :url
  validates :title, presence: true
  validates :url, presence: true
  has_many :votes

  def vote_number
    votes.where(direction: "up").count - votes.where(direction: "down").count
  end
end 
```

这就是我在 Post Controller 中尝试做的事情：

```
def index
  @posts = Post.last(10).order('vote_number')
end 
```

尽管如此，我还是从索引中得到了这个错误：

```
undefined method `order' for #<Array:0x3787158> 
```

Stack Overflow 中的其他问题通过在 Post Controller 中进行计算解决了这个问题，但我不能这样做，因为投票是数组而不是整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:47:10.993

找到了解决它的方法。我没有使用 order，而是使用了 sort_by。

而不是在 Post 控制器中使用它：

```
def index
  @posts = Post.last(10).order('vote_number')
end 
```

我使用了 sort_by：

```
def index
  @posts = Post.all.sort_by{|post|-post.vote_number}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:02:41.893

您应该尝试计数器缓存。您可以从以下链接中了解更多信息 -

[如何使用 ActiveRecord 按作者的书数对作者进行排序？](https://stackoverflow.com/questions/958558/how-to-sort-authors-by-their-book-count-with-activerecord)

[http://hiteshrawal.blogspot.com/2011/12/rails-counter-cache.html](http://hiteshrawal.blogspot.com/2011/12/rails-counter-cache.html)

[http://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

计数器缓存仅在 rails 内有效。如果您从外部应用程序更新，您可能需要做一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:04:59.880

`first`，`last`并`all`执行查询。始终在这三个之前插入顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T07:01:47.683

```
class Post < ActiveRecord::Base
  attr_accessible :title, :url
  attr_reader :vote_difference # getter
  attr_writer :vote_difference # setter
  validates :title, presence: true
  validates :url, presence: true
  has_many :votes
end

class Vote < ActiveRecord::Base
  belongs_to :post, :counter_cache => true

  #more class methods here      

  def after_save
    self.update_counter_cache
  end

  def after_destroy
    self.update_counter_cache
  end

  def update_counter_cache
    post.vote_difference = post.comments.where(direction: 'up').count - post.comments.where(direction: 'down').count
    post.save
  end
end 
```

现在您可以在查询时按 vote_difference 排序。例如 -

```
posts = Post.order(:vote_difference, :desc) 
```

我没有检查我的代码的正确性是的。如果您发现任何问题，请告诉我。我相信它可以适应使其工作。

如果您按照此模式使用 counter_cache，您可能会运行迁移以添加 vote_difference 列，并运行另一个迁移以更新先前创建的帖子的 vote_difference 列。

# html - 如何用 HTML 修改翻转图像效果？

> ID：16138259
> 
> 赞同：0
> 
> 时间：2013-04-22T01:48:06.353
> 
> 标签：html

我有一个带有“访问”按钮的图像，它是用 HTML 代码映射的图像，它具有翻转效果，因此当您将鼠标放在“访问”链接上时，它会显示访问按钮的发光版本。

但是现在代码不正确，翻转效果将原始图像替换为发光版本图像，我只是希望发光版本在以下 html 代码中的相同坐标处覆盖​​原始版本：`coords="52,63,145,100"`

我不希望它替换整个图像。我希望发光版本保持其正常大小。这是到目前为止的代码：

```
<div style="text-align:center; width:200px; margin-left:auto; margin-right:auto;">
<img id="Image-Maps_3201304212133558" src="http://www.image-maps.com/uploaded_files/3201304212133558_example78.png" usemap="#Image-Maps_3201304212133558" border="0" width="200" height="200" alt="" />
<map id="_Image-Maps_3201304212133558" name="Image-Maps_3201304212133558">
<area shape="rect" coords="52,63,145,100" href="yahoo.com" alt="visit!" title="visit!" onMouseOver="if(document.images) document.getElementById('Image-Maps_3201304212133558').src= 'http://s15.postimg.org/a71gazzzr/visit_glow.pngmage-maps.com/';" onMouseOut="if(document.images) document.getElementById('Image-Maps_3201304212133558').src= 'http://www.image-maps.com/uploaded_files/3201304212133558_example78.png';"  />
<area shape="rect" coords="198,198,200,200" href="http://www.image-maps.com/index.php?aff=mapped_users_3201304212133558" alt="Image Map" title="Image Map" />
</map>

</div> 
```

[这是一个现场演示。](http://cssdesk.com/gj9WS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:58:00.107

您实际上是在替换标签中的图像，因此除非您将基本图像加载到单独的元素中，否则您将无法同时显示两张图片。

一种选择是更改 : 添加`background-image: url(http://www.image-maps.com/uploaded_files/3201304212133558_example78.png);`到样式属性。（并且，为了整洁，您可以用透明 png 替换标签中的基本图像）。

但是，出于多种原因，这不是正确的方法。图片损害 SEO，加载速度较慢，某些浏览器存在 png 透明度问题，谷歌翻译不会翻译它们，等等等等。

此外，您可以在 css 中完成所有这些操作：http: [//jsfiddle.net/as2003/AbVTK/](http://jsfiddle.net/as2003/AbVTK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:01:15.103

您可以通过删除此代码并使用 CSS 创建按钮和发光悬停效果来实现您想要的。

您当前代码的问题在于，这种翻转效果的方法，即通过映射替换图像，可以说非常繁琐且过时。

网络确实涵盖了有关 CSS 甚至 HTML 的资源，我建议您研究一下。

特别是对于您的查询，请查看：[http ://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/](http://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:01:40.113

我将在这里尽我所能说服你重新考虑你在做什么。我知道你想回答你的问题，但事实是，我认为没有办法做到这一点。问题是原始图像是一回事，翻转按钮是另一回事。当这是标准时，您必须将原始按钮和翻转按钮创建为完全相同的大小和 dpi 才能使其正常工作并看起来正确。如果你想在图像中间有一些东西，你必须切掉你想要改变的部分，并使用 css 和 div 或（上帝禁止）一个表格，以使其工作。

在 2013 年，您可以使用 CSS3 完成您想做的所有事情，而根本不需要图像。

该站点将为您制作它们，并在您完成后将代码提供给您。 [http://css-tricks.com/examples/ButtonMaker/](http://css-tricks.com/examples/ButtonMaker/)

这个使用了图​​片，以防您想要一些比文本可以提供的更特别的东西，

[http://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/](http://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/)

祝你好运

**编辑：**我困了，所以当我告诉你你原来的东西有什么问题时，我认为我做得不好。原始图像是一个巨大的东西，中间有一个边框和一个小按钮。悬停按钮只是一个小按钮。您认为您可以使用悬停效果将中间的小按钮替换为覆盖图像。使用 javascript 可能会实现这一点，但我不确定您是否可以使用悬停效果来做到这一点。如果这是可能的，它不是一个好方法。

# ios - 从 UIbutton 读取数字

> ID：16138263
> 
> 赞同：0
> 
> 时间：2013-04-22T01:48:48.767
> 
> 标签：ios, objective-c, xcode, uibutton

我是 Objective-c 和 Xcode 的新手。我试图从某些按钮中获取大量数字，但我得到的只是一个数字。我为此使用按钮标签。

例如：如果我想添加两个数字 2+3，效果很好。但是当我想添加 230+32 时，它没有。

界面 ：

```
- (IBAction)getnumber:(id)sender;
@property (strong, nonatomic) IBOutlet UILabel *Result;
int number; 
```

实现部分：

```
-(IBAction)getnumber:(id)sender {
    number = [sender tag]; 
    Result.text = [NSString stringWithFormat:@"%i", number]; 
} 
```

如果我点击了多个按钮，有什么方法可以从按钮的标签中获取大量数字？

先感谢您 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:34:28.610

您的问题来自您如何定义变量。如果我理解您的设置正确，您有类似计算器界面的东西，并且您只是将按钮的标签设置为单个数字，如 1、2、3，... 以指示要显示的下一个数字？

在这种情况下，您的行将`number = [sender tag]`为该按钮的编号设置一个全局变量（还记得您的 CS 教授告诉您永远不要使用全局变量吗？这是原因！）因为`number`当您设置结果字符串时，您只是用此按钮的标签覆盖了下一行，`number`只保存最后按下按钮的值。相反，你应该做这样的事情。

```
@interface MyClass : UIViewController
@property (nonatomic, strong) IBOutlet UITextView * resultLabel;
- (IBAction)getNumber:(id)sender;
@end 
```

和

```
- (IBAction)getNumber:(id)sender;
{
   self.resultLabel.text = [NSString stringWithFormat:@"%@%d", self.resultLabel.text, [sender tag]];
} 
```

这样，每次`getNumber:`调用时，它都会获取标签当前显示的任何文本并附加此按钮的值。附带说明一下，Objective-C 属性名称以小写字母开头是惯例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:00:08.513

我认为您必须将变量类型附加到`number`. 它应该是 -

```
- (IBAction)getnumber:(id)sender 
{
    NSInteger number = [sender tag]; 
    Result.text      = [NSString stringWithFormat:@"%i", number]; 
} 
```

我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:57:18.563

你需要改变你的逻辑。

数字 = 0;

如果单击带有数字的按钮

number = number * 10 + button.tag;

别的

如果按下操作（不是 =）

存储号码和运算符

if = 运算符被点击

对存储的号码和最近输入的号码进行操作。

# nginx - Nginx proxy_pass 到 Minecraft 服务器

> ID：16138264
> 
> 赞同：8
> 
> 时间：2013-04-22T01:48:49.183
> 
> 标签：nginx, minecraft

我正在尝试在同一台机器上的两个不同端口上运行两个 Minecraft 服务器。我想根据子域引用它们：

```
one.example.com -> <minecraft>:25500
two.example.com -> <minecraft>:25501 
```

我以前用过 nginx 做类似的事情，但它不适用于 Minecraft。它以 http 状态 400 响应。这是我日志中的示例：

```
192.168.0.1 - - [21/Apr/2013:17:25:40 -0700] "\x02<\x00\x0E\x00t\x00h\x00e\x00s\x00a\x00n\x00d\x00y\x00m\x00a\x00n\x001\x002\x003\x00\x1C\x00t\x00e\x00s\x00t\x00.\x00r\x00y\x00a\x00n\x00s\x00a\x00n\x00d\x00y\x00.\x00i\x00s\x00-\x00a\x00-\x00g\x00e\x00e\x00k\x00.\x00c\x00o\x00m\x00\x00c\xDD" 400 173 "-" "-" 
```

这是我的 nginx 配置：

```
upstream mine1 {
  server 127.0.0.1:25500;
}
upstream mine2 {
  server 127.0.0.1:25501;
}

server {
  listen 25565;
  server_name one.example.com;

  access_log /var/log/nginx/one.access;
  error_log /var/log/nginx/one.error;

  location / {
    proxy_pass http://mine1;
  }
}
server {
  listen 25565;
  server_name two.example.com;

  access_log /var/log/nginx/two.access;
  error_log /var/log/nginx/two.error;

  location / {
    proxy_pass http://mine2;
  }
} 
```

如果我没看错，nginx 会以 400 响应。我的猜测是 Minecraft 客户端没有发送有效的 HTTP 标头，而 Nginx 正在抛出请求。但我完全不知所措。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-03T16:31:44.543

在您的 DNS 记录中尝试此操作

## 一个记录

```
Name     one.example.com
Value    <server_ip>
TTL  86400

Name     two.example.com
Value    <server_ip>
TTL  86400 
```

* * *

## 服务记录

```
Name     _minecraft._tcp.one.example.com
Port     25500
Value    one.example.com

Name     _minecraft._tcp.two.example.com
Port     25501
Value    two.example.com 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T06:36:44.283

正如 Dag Nabbit 所说，Minecraft 服务器不使用 http。您通常会通过 NAT 执行此操作。代理服务器需要知道协议，因为顾名思义，它代表客户端行事。Nginx 知道各种协议，不仅仅是 http，Minecraft 不是其中之一。但是，您可以为此协议编写代理模块并使用现有的 nginx 基础设施。由于我不熟悉该协议，因此我无法评论这比 NAT 有任何优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T23:43:08.753

未来读者需要注意的一件事，是的，nginx 确实将连接作为“代理”传递给任何服务器：端口列表，该列表是通过 socks 代理连接样式中的上游定义定义的。当 nginx 本身正在侦听 HTTP 通信时，这不起作用。这仅仅是因为 nginx 被默认设计为一个死的简单静态 http 服务器。

任何类型的 TCP/UDP 连接的反向代理在较低的 OSI 级别（即第 3 层或第 2 层而不是 nginx 正在运行的第 6/7 层）都具有更高的可扩展性。这就是源和目标 NAT 发挥作用的地方，最好由边缘设备的防火墙或路由策略指令处理。

DNS-RR 不是最好的解决方案，虽然是较低级别的 OSI 分层，但只有在最终应用程序（第 7 层 OSI）理解该方法时才可行。Minecraft（或几乎任何游戏服务器）在最后一次检查中没有将此内置到游戏的网络代码中。

现在我确实研究了这一点，我的世界本身有一些解决方案应该进一步研究：

*   转运插件
*   蹦极绳索

请务必阅读所有文档，因为这些文档的配置和安装非常复杂。支持仅使用 NAT-ed 网络拓扑的建议。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-03-22T21:08:08.397

我尝试使用 SRV 设置我的多个 minecraft 实例，但这也不起作用 nslookup 我的 srv 记录显示：

C:\Users\Administrator>nslookup -type=SRV _minecraft._tcp.xxx.net 服务器：mijnmodem.kpn 地址：192.168.1.1

非权威答案：

1.  _minecraft._tcp.xxx.net SRV服务位置：

    ```
     priority       = 5
      weight         = 5
      port           = 25565
      svr hostname   = camelot.xxx.net 
    ```

2.  _minecraft._tcp.xxx.net SRV服务位置：

    ```
     priority       = 5
      weight         = 5
      port           = 25566
      svr hostname   = cityworld.xxx.net 
    ```

在我的路由器（中兴 H369）上，端口 25565 和 25566 直接转发（TCP 和 UDP）到实例运行的 IP。访问 url（在 Minecraft 中）给出 io.netty.channel.Abstart$AnnotatedConnectException

任何建议如何进一步调查？

# c# - Windows Phone 8 中的简单 HTTP POST

> ID：16138275
> 
> 赞同：2
> 
> 时间：2013-04-22T01:50:15.787
> 
> 标签：c#, windows-phone-8, http-post

我有一个字符串需要在 Windows Phone 8 中发布。它看起来像这样：

```
https://www.scoreoid.com/api/getPlayers?api_key=[apiKey]&game_id=[gameID]&response=xml&username=[username]&password=[password] 
```

这个字符串只是返回另一个字符串（它被格式化为我稍后在我的代码中解析的 XML）。

我还没有找到一个简单的解决方案，比如在 Windows 8 中。

**编辑：**在 rciovati 和[HttpClient](http://nuget.org/packages/Microsoft.Net.Http)库的帮助下找到了我的问题的解决方案。

这是我的简单代码：

```
 var httpClient = new HttpClient();
        return await httpClient.GetStringAsync(uri + "?" + post_data); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T06:55:05.373

使用新的[Http 客户端库](http://nuget.org/packages/Microsoft.Net.Http)非常简单：

```
var values = new List<KeyValuePair<string, string>>
                    {
                        new KeyValuePair<string, string>("api_key", "12345"),
                        new KeyValuePair<string, string>("game_id", "123456")
                    };

var httpClient = new HttpClient(new HttpClientHandler());
HttpResponseMessage response = await httpClient.PostAsync(url, new FormUrlEncodedContent(values));
response.EnsureSuccessStatusCode();
var responseString = await response.Content.ReadAsStringAsync(); 
```

[您可以在此处](http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone.aspx)找到有关此库的其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:56:11.873

[这是Andy Wigley](http://social.msdn.microsoft.com/profile/andy%20wigley/)关于如何在 Windows Phone 8 上进行 Http 网络的一篇非常有用的博客文章。他所说的 WinPhoneExtensions 包装库基本上模拟了您可以在 Win8 中进行的网络编程的异步/等待模型。

[http://blogs.msdn.com/b/andy_wigley/archive/2013/02/07/async-and-await-for-http-networking-on-windows-phone.aspx](http://blogs.msdn.com/b/andy_wigley/archive/2013/02/07/async-and-await-for-http-networking-on-windows-phone.aspx)

# python - 如何从 POST 方法重定向到 web.py 中的另一个处理程序

> ID：16138276
> 
> 赞同：1
> 
> 时间：2013-04-22T01:50:20.237
> 
> 标签：python, redirect, http-post, web.py, string-substitution

该项目是一个简单的网络爬虫和搜索引擎。“索引”处理程序具有用于输入要搜索的域和要查找的术语的表单。我希望 POST 方法重定向到“LuckySearch”处理程序，该处理程序搜索正则表达式术语。

我试过使用 web.redirect() 和 web.seeother()，但似乎这些函数不支持字符串替换。我还能如何解决这个问题？

```
class Index(object):
    def GET(self):
        form = searchform()
        return render.formtest(form)

    def POST(self):
        form = searchform()
        if not form.validates():
            return render.formtest(form)
        else:
            word = form['word'].get_value()
            print "You are searching %s for the word %s" % (form['site'].get_value(), word)
            raise web.redirect('/%s') % word

class LuckySearch(object):
    def GET(self, query):
        query = str(query)
        lucky = lucky_search(corpus, query)
        ordered = str(pretty_ordered_search(corpus, query))
        if not lucky:
            return "I couldn't find that word anywhere! Try google.com instead."
        else:
            return "The best page is: " + lucky + "\n" + "but you might also try:" + "\n" + ordered

class About(object):
    def GET(self):
        return "This is my first search engine! It only runs on my local machine, though."

if __name__ == "__main__":
    corpus = crawl_web('http://en.wikipedia.org/wiki/Trinity_Sunday', 'http://en.wikipedia.org/wiki/Trinity_Sunday')
    app = web.application(('/', 'Index', '/about', 'About', '/(.*)', 'LuckySearch'), globals())
    app.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:22:21.617

以下行

```
raise web.redirect('/%s') % word 
```

应该改为

```
raise web.seeother('/%s' % word) 
```

1.  您必须`%`在字符串上使用，而不是`web.redirect`结果。
2.  我认为`web.seeother`应该使用而不是`web.redirect`，因为后者返回`301 Moved Permanently`重定向，我认为您不需要在这里永久重定向。

# shell - 将 Bash shell 脚本转换为批处理文件

> ID：16138278
> 
> 赞同：2
> 
> 时间：2013-04-22T01:50:28.680
> 
> 标签：shell, batch-file

我正在尝试将 shell 脚本逐行和逐个命令地转换为批处理文件。但是，我似乎无法绕过以下线路。任何帮助表示赞赏。

```
OPTS="%OPTS -Dlog4j.configuration=file:.\log4j.properties" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:04:52.880

我不知道 linux shell，但我认为等效的是：

```
Set "OPTS=-Dlog4j.configuration=.\log4j.properties" 
```

然后你可以加载存储的...Options¿？像一个论点：

```
Start Application.exe %OPTS% 
```

**“.\”**表示脚本的当前目录，请确保**“file:.\”**在 linux OS 中的含义相同。

# ios - 自定义 UIBarButtonItem 后退按钮

> ID：16138280
> 
> 赞同：2
> 
> 时间：2013-04-22T01:50:44.417
> 
> 标签：ios, objective-c

我需要自定义 UIBarButtonItem 后退按钮，使其显示为一个简单的箭头图标（如 Facebook、Twitter 等）。我是否需要创建一个自定义 UIBarButtonItem 并将其手动添加到导航栏，或者有没有办法通过外观 API 来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:54:03.923

你必须自己制作并添加它

你可以这样做（这是使用图像的自定义按钮）

```
UIImage* image3 = [UIImage imageNamed:@"favorites.png"];
    CGRect frameimg = CGRectMake(0, 0, image3.size.width, image3.size.height);

    UIButton *someButton2 = [[UIButton alloc] initWithFrame:frameimg];
    [someButton2 setBackgroundImage:image3 forState:UIControlStateNormal];
    [someButton2 addTarget:self action:@selector(loadFavorites)
          forControlEvents:UIControlEventTouchUpInside];
    [someButton2 setShowsTouchWhenHighlighted:YES];

    UIBarButtonItem *favoritesButton =[[UIBarButtonItem alloc] initWithCustomView:someButton2];

    self.navigationItem.rightBarButtonItems =[NSArray arrayWithObjects:favoritesButton, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:59:38.313

好的，事实证明您实际上不能`backBarButtonItem`与`UIBarButtonItem`使用自定义视图创建的一起使用。我能提供的最好的方法是您可以创建一个带有图像和空白背景图像的模板，尽管它感觉有点像 spacer.gif。我拼凑了一个简单的例子来说明我对视图控制器排序的意思。

[http://cl.ly/36091p0l0120](http://cl.ly/36091p0l0120)

# jquery - 悬停时显示子元素，不悬停时隐藏

> ID：16138282
> 
> 赞同：1
> 
> 时间：2013-04-22T01:50:59.430
> 
> 标签：jquery, html

我有多个`span`具有相同`prod_desc`类的元素，默认情况下它们是隐藏的。现在我在悬停时显示，但是问题是它们都显示了！

我只想显示当前我悬停的元素。我想我需要使用它，但我不知道如何使用。

父元素：

```
 <div id="results" style="width: 600px;"></div> 
```

使用 AJAX 将这些元素呈现到结果 id 元素中。

```
<div class="prod" style="position: relative;width: 265px;border: 1px solid black;float: left;margin-right: 20px;margin-bottom: 5px;">
<img src="'.$_product->getImageUrl().'"/>
<span class="prod_desc" style="position: absolute;display:none;">Hello I am descripton span block
</span>        
</div> 
```

jQuery：

```
jQuery("div#results").hover(function(){
    jQuery("span.prod_desc").show();
},function(){
    jQuery("span.prod_desc").hide();
}); 
```

我也试过这个，但没有奏效：

```
jQuery("div#results").hover(function () {
    jQuery(this).find("span.prod_desc").show();
}, function(){
    jQuery(this).find("span.prod_desc").hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:07:52.597

> 我只想显示当前我悬停的元素。

然后只需将悬停功能附加到您想要的元素。

```
jQuery("span.prod_desc").hover(function(){
    jQuery(this).show();
     },function(){
   jQuery(this).hide();
 }); 
```

**但**

> 默认情况下它们是隐藏的。

你如何悬停它们？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:10:13.837

只需使用 CSS。我相信问题可能是元素如何放置在页面上以及 jQuery 事件如何工作。用 CSS 规则试试这个，看看它是如何工作的。

```
#results .prod_desc {
  display: none;
}

#results:hover .prod_desc {
  display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:58:27.010

如果这些是动态添加的，试试这个

```
jQuery(document).on('hover', '#results', function () {
    jQuery("span.prod_desc").show();
}, function(){
    jQuery("span.prod_desc").hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T17:08:56.823

这解决了我的问题

```
jQuery(document).ajaxComplete(function(){
if(jQuery('.prod').length != 0) {
    jQuery(".prod").hover(function(){
    jQuery(this).find(".prod_title").hide();
    jQuery(this).find(".prod_desc").fadeIn();
},function(){        
jQuery(this).find(".prod_desc").fadeOut(); 

jQuery(this).find(".prod_title_wrap").show();
jQuery(this).find(".prod_title").show();
}); 
```

}

我在 ajax 调用返回之前进行了检查。所以使用它我正在等待它完成，然后实施进一步的检查。感谢大家对它的调查。

# web-services - Sitecore：从 asmx 网络服务访问上下文

> ID：16138285
> 
> 赞同：0
> 
> 时间：2013-04-22T01:51:20.913
> 
> 标签：web-services, asmx, sitecore

如题所述。我正在尝试从独立的 .asmx Web 服务访问我的 Sitecore 上下文。想知道是否有正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:35:30.207

Sitecore 上下文应该在经典的 ASMX Web 服务中可用，但是，因为对服务的请求可能不会触发默认的 Sitecore 管道，所以最好按如下方式设置站点上下文：

```
[WebMethod(EnableSession = true)]
public string MyServiceMethod()
{
    using (new SiteContextSwitcher(SiteContextFactory.GetSiteContext("website")))
    {
        // Here you can access Sitecore.Context
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:35:05.970

Sitecore 非常贪婪地处理所有命中应用程序的 URL 请求。解决此问题的简单方法是[将 URL 添加到 IgnoreUrlPrefixes 设置](http://briancaos.wordpress.com/2010/11/10/using-ajax-scriptmanager-under-sitecore/)。但是，这会拒绝您访问某些 Sitecore 上下文值，例如站点和数据库，Sitecore 仍然可以根据主机名解析这些值。

如果 URL 似乎是您的 asmx 服务，我建议向`httpRequestBegin`管道添加一个处理器，该处理器会在正确的时刻（就在之前）中止管道。`ExecuteRequest`可以在[此处](https://github.com/leethomascook/SitecoreMVC/blob/master/Aqueduct.MVC.Sitecore/SystemWebRoutingResolver.cs)找到为 MVC 请求执行此操作的示例。对于您的 asmx 服务，您可能需要直接检查 URL 字符串。使用处理器类上的属性配置该 URL 的奖励积分（参见[Sitecore 配置工厂](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/02/The-Sitecore-ASPNET-CMS-Configuration-Factory.aspx)）。

# assembly - 为什么这两个 mips 指令会导致管道中的数据危害？

> ID：16138287
> 
> 赞同：0
> 
> 时间：2013-04-22T01:51:22.710
> 
> 标签：assembly, mips, pipeline

我正在学习 mips 中的管道，并被告知这两条指令：

```
jal addr;
store $ra;store the value of $ra into memory 
```

会导致数据危害，但我不明白为什么。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:37:30.000

MIPS 分支延迟槽中的指令总是在分支执行之前完全执行。所以`store $ra`指令将存储在指令更新**之前**`$ra`存在的值。换句话说，这个序列：**`jal``$ra`**

 **```
 li  $ra, 0x1234
 L: jal addr
    nop
    store $ra, mem    # mem <- L + 8 
```

将与此序列不同的值存储到内存中：

```
 li  $ra, 0x1234
    jal addr
    store $ra, mem    # mem <- 0x1234 
```

这不是 MIPS 架构中未定义的序列，因此结果是可预测的。

MIPS 汇编器通常会在设置了unless`nop`之后插入 a 。`jal``noreorder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:13:33.980

我不知道是什么`store`，但 MIPS 上的所有正常分支和跳转指令都与紧随其后的指令一起执行。在大多数琐碎的情况下，您可能会认为分支/跳转是最后执行的，而其他指令是第一个执行的。

但是，如果成对的指令在内部几乎作为一条不可分割的指令而不是两条独立的指令执行，我不会感到惊讶。

这里的潜在问题是`jal`存储在`$ra`后面指令的地址中`store`。如果`store`或任何指令使用`$ra`，则在两次访问之间可能存在竞争条件、数据危险（无论您如何称呼），`$ra`最终结果可能无法确定，也可能不是人们可能天真的期望的那样。**

# javascript - jQuery blockUI 插件在 ASP.NET 提交验证器 Chrome/IE9 中不起作用

> ID：16138289
> 
> 赞同：0
> 
> 时间：2013-04-22T01:51:37.280
> 
> 标签：javascript, jquery, asp.net, blockui

我在 asp.net CustomValidator 中使用 jquery ajax 来查询服务器。因为这可能需要一些时间，所以我尝试使用 BlockUI 通过消息来阻止 UI。

但是它在 Chome 和 IE9 中不起作用。在 ajax 调用完成之前不会阻塞显示，然后立即清除。我已将淡入设置设置为 0。它在 Firefox 中确实有效，如果我在阻止显示的行上放置一个断点然后单步执行，它在 Chrome 中也有效。

现在，当附加到按钮的单击事件时，相同的代码可以正常工作。所以我猜这个问题与提交事件内部或提交事件调用的 asp.net 验证链内部有关。尽管它在单步执行代码时起作用的事实可能意味着潜伏在某个地方的计时器。

然而，知道这并没有让我解决这个问题 - 所以如果有人能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:10:56.957

好的，问题实际上是使用同步 ajax 调用，我发现它会停止任何浏览器活动，包括显示更新！我通常不会使用同步 ajax 调用，但在这种情况下，因为它在验证器中需要阻止表单提交。

*该线程讨论了可用于解决实际*问题的各种选项:)

[如何在没有 async = false 的情况下执行 jQuery 阻止 AJAX 调用？](https://stackoverflow.com/questions/11062803/how-do-i-do-a-jquery-blocking-ajax-call-without-async-false)

进一步注意，在提交过程中尝试通过 ajax 调用服务端验证实际上是一种有缺陷的设计，除非准备构建必要的状态机来取消提交过程然后阻塞 UI 直到 ajax 返回然后继续提交过程或不是。

# java - 如何在执行代码之前等待计时器停止？

> ID：16138300
> 
> 赞同：2
> 
> 时间：2013-04-22T01:53:07.083
> 
> 标签：java, swing, timer, awt

我有一个 Timer 用于扩展 JPanel 动画的类中，ActionListener 监听它并使 actionPerformed 运行，它会在需要时重新绘制并停止计时器。但是启动计时器的方法 animatePanel 在计时器运行时继续执行，这是我不想要的。我希望它等到计时器停止返回。

Timer 在类的构造函数中初始化，如下所示：

```
timer = new Timer(5, taskPerformer); 
```

这就是它的作用。我有一个叫做 animatePanel() 的东西：

```
 private ActionListener taskPerformer = new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        ...
        if (some conditions){
            ...
            timer.stop();
            ...
            return;
        }

        ...
    }
};

private void animatePanel() {
    ...
    timer.start();
    System.out.println("Timer stopped."); //always executes before the timer has stopped :(
    //then returns and lets the rest of my program run while the timer is still going, which is BAD
} 
```

计时器工作正常，除了在某些情况下， animatePanel() 会过早返回并让我的程序的其余部分运行，从而导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:05:09.927

您不能在 Event Dispatching Thread 的上下文中执行此操作，这样做会使您的应用程序挂起！

计时器必须在单独的`Thread`. 然后，您可以利用线程监控 API。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class WaitForTimer {

    public static void main(String[] args) {
        new WaitForTimer();
    }

    public WaitForTimer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class TestPane extends JPanel {

        protected static final Object WAIT_FOR = new Object();
        private Timer timer;
        private int tickCount = 0;
        private JLabel ticks;
        private JButton start;

        public TestPane() {
            timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    tickCount++;
                    if (tickCount > 10) {
                        tickCount = 0;
                        timer.stop();
                        synchronized (WAIT_FOR) {
                            WAIT_FOR.notifyAll();
                        }
                        start.setEnabled(true);
                    }
                    ticks.setText(String.valueOf(tickCount));
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);

            ticks = new JLabel("...");
            start = new JButton("Start");

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            add(ticks, gbc);
            add(start, gbc);

            start.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    start.setEnabled(false);
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            System.out.println("Starting timer...");
                            timer.start();
                            synchronized (WAIT_FOR) {
                                try {
                                    WAIT_FOR.wait();
                                } catch (InterruptedException ex) {
                                }
                            }
                            System.out.println("Timer finished...");
                        }
                    }).start();
                }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }
} 
```

# php - 将会话变量传递给 javascript

> ID：16138301
> 
> 赞同：3
> 
> 时间：2013-04-22T01:53:11.980
> 
> 标签：php, javascript, jquery

我正在尝试将会话变量传递给 javascript，但没有成功。搜索stackoverflow我发现了这个讨论： [Passing Session variables to javascript](https://stackoverflow.com/questions/7363432/passing-session-variables-to-javascript)

在我的 custom.js 中，我有标题

```
<?php session_start(); ?>

.. /// js code

strActionPage = CurrentPath + "upload_file.php?ation=store&session_user_id=<?php echo $_SESSION['session_user_id']; ?>   "; //the ActionPage's file path 
```

但我无法从 upload_file.php 页面获取会话变量

我哪里错了？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:02:29.353

等等，您在 JavaScript 文件上使用 PHP（这就是您的 OP 所说的）？不会工作。您将不得不将它作为参数传递给 JavaScript 函数，如下所示：

```
<?php
session_start();

// HTML and stuff

<script type="text/javascript" src="custom.js"></script>
<script type="text/javascript">
passSession("<? echo $_SESSION['session_user_id']; ?>");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:22:05.350

我可能会这样做。

```
 <script type="text/javascript">

    var user_id=<?php echo $_SESSION['session_user_id']; ?>;

    strActionPage = CurrentPath + "upload_file.php?action=store&session_user_id="+user_id;  

    </script> 
```

还有一个可能的错误。您正在使用 "ation" 。那应该是“行动”吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:00:46.030

在不了解您的特定错误的情况下很难说，但我确实注意到您发布的代码中似乎有错字：

```
strActionPage = CurrentPath + "upload_file.php?ation=store&session_user_id=<?php echo $_SESSION['session_user_id']; ?>   "; //the ActionPage's file path 
```

你有`ation-store`——你的意思是写`action=store`吗？

# c# - 如何检测 telnet 客户端何时不正确地关闭 tcp 服务器？

> ID：16138302
> 
> 赞同：1
> 
> 时间：2013-04-22T01:53:12.577
> 
> 标签：c#, tcplistener

我正在尝试创建一个小型 IRC 服务器来学习一些新的编程概念（以及我永远不会使用的其他概念）。第一步是让一个基本的客户端通过 TCP 连接以向服务器发送明文命令。

要收听连接，我有以下代码：

```
public NetworkClient(Server server, TcpClient socket, int id)
{
    _socket = socket;
    _id = id;
    _server = server;
}

private async void ListenForClients()
{
    int numClients = 0;
    while (IsRunning)
    {
        var tcpClient = await _listener.AcceptTcpClientAsync();
        var netClient = new NetworkClient(this, tcpClient, numClients);
        netClient.Start();
        Console.WriteLine("Client Connected");

        numClients++;
    }
} 
```

然后在我的`NetworkClient`课堂上，我的`Start()`方法如下所示：

```
public async void Start()
{
    using (var reader = new StreamReader(_socket.GetStream()))
    {
        while (_server.IsRunning)
        {
            var line = await reader.ReadLineAsync();
            Console.WriteLine("Client {0} wrote: {1}", _id, line);
        }
    }
} 
```

这在连接 telnet 客户端时效果很好，但是一旦我关闭我的 telnet 客户端就会`reader.ReadLineAsync();`不断返回`null`。我会添加一个检查以查看是否，`line == null`但我不确定这是检测客户端是否已断开连接的正确方法。

更糟糕的`_socket.Connected`是，当空值被`reader.ReadLineAsync()`.

检测 tcp 客户端何时断开连接的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:09:15.293

当连接正常关闭时，对 TCP/IP 套接字的读取将返回 0 字节。[这种情况导致`ReadLineAsync`回归`null`。](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readlineasync.aspx)所以，是的，您应该检查`null`并将其视为优雅的套接字闭包。

套接字也可以通过其他方式关闭；如果套接字被异常关闭，任何套接字操作都可能引发异常。如果异常发生在协议的可接受部分（其中关闭不被视为错误），那么您应该将该异常视为也是一个优雅的关闭。

哦，而且`TcpClient.Connected`(like `Socket.Connected`) 实际上没用；[它只告诉您套接字是否*已*连接，而不是它是否*已*连接](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.connected.aspx)。只是假装该财产不存在。

最后，有几点注意事项：

*   避免`async void`。如果您的方法 return `Task`，那么您有一个“句柄”来查看它们何时完成（以及它们是否引发异常）。我[最近的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)解释了为什么`async void`不推荐。
*   最好定期通过连接发送数据以确定它是否仍然可行。我编写了一个[TCP/IP .NET 套接字常见问题解答](http://blog.stephencleary.com/2009/04/tcpip-net-sockets-faq.html)，其中[更详细地介绍了这一点](http://blog.stephencleary.com/2009/05/detection-of-half-open-dropped.html)。

# c++ - c++ 二维数组 unique_ptr 对象？

> ID：16138303
> 
> 赞同：1
> 
> 时间：2013-04-22T01:53:16.137
> 
> 标签：c++, arrays, pointers

我正在尝试创建一个简单的二维数组或 SFML 的 Sprite 对象的向量。我尝试了许多不同的方法，但最终总是出错或只是一个空向量。

我努力了

```
// first x
for ( int c = 0; c < w ; ++c)
{
    vector<unique_ptr<sf::Sprite>> col;
    map.push_back(std::move(col));

    // then y
    for ( int r = 0; r < h ; ++r) {
        map[c].push_back(unique_ptr<sf::Sprite>(new sf::Sprite()));
    }
} 
```

和

```
unique_ptr<sf::Sprite[0][0]> map;
...
map.reset(unique_ptr<sf::Sprite[0][0]>(new sf::Sprite[w][h])); 
```

总的来说，我只是没有成功制作二维智能指针对象数组，并且想知道是否有人可以提供帮助。对不起，如果我没有包含足够的细节，这是我第一篇堆栈溢出的帖子，所以请温柔:)

编辑：让我对此提供更多细节，对不起。所以我在一个基本上是单例的工厂类型类中制作这个二维数组。所以我需要这个二维数组在它被创建并离开堆栈等之后持续存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:04:35.327

您将声明`map`为指向多维数组的指针并尝试将类型的对象`std::vector<>`插入其中。相反，您可以使用向量（在这种情况下为向量）并消除数组的分配并在过程中简化它。

```
#include <memory>
#include <vector>

namespace sf { class Sprite {}; }

int main()
{
    const int w = 5;
    const int h = 5;

    // vector of vectors of Sprites is what you're looking for
    std::vector<std::vector<std::unique_ptr<sf::Sprite>>>   map;

    // first x
    for ( int c = 0; c < w ; ++c)
    {
        // No need to access via index of c. Just append to the column vector itself.
        std::vector<std::unique_ptr<sf::Sprite>> col;

        // then y
        for ( int r = 0; r < h ; ++r)
        {
             col.push_back(std::unique_ptr<sf::Sprite>(new sf::Sprite()));
        }

        // Now add the column vector.
        map.push_back(std::move(col));
    }

    return 0;
} 
```

# python - 文件名的 Python 问题

> ID：16138305
> 
> 赞同：4
> 
> 时间：2013-04-22T01:53:42.663
> 
> 标签：python, unicode, directory

我想找到一个使用 os.listdir() 函数（或任何其他方法）访问目录并返回该目录中的所有文件名但将非 ASCII 字符转换为其 unicode 格式的函数。例如，如果我有文件`Hello WorlЪ.py`，我希望函数返回`Hello Worl\u042a.py`或等效的东西。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:01:36.280

如果传递`os.listdir`unicode 路径，则`os.listdir`返回 unicode：

```
os.listdir(u'.') 
```

从[文档](http://docs.python.org/2/library/os.html#os.listdir)：

> 在 2.3 版更改: 在 Windows NT/2k/XP 和 Unix 上，如果 path 是一个 Unicode 对象，结果将是一个 Unicode 对象列表。无法解码的文件名仍将作为字符串对象返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T02:07:55.937

`str.encode("unicode_escape")`将以您描述的方式对字符串进行编码。

```
>>> print(u"Hello WorlЪ.py".encode("unicode_escape"))
Hello Worl\u042a.py 
```

# ruby-on-rails - 如何在谷歌地图静态 api 上获取多个坐标？

> ID：16138310
> 
> 赞同：0
> 
> 时间：2013-04-22T01:54:47.537
> 
> 标签：ruby-on-rails, loops, google-static-maps

我正在从 google 地方 API 中提取信息，我希望能够显示我在一张地图上绘制的所有坐标，而不是在一个页面上有多个地图（如下所示）。有没有人有什么建议？

先感谢您！

```
<%@c.each do |p|%>
<ul>
    <li><%= image_tag("http://maps.googleapis.com/maps/api/staticmap?center=#{p.lat},#{p.lng}&zoom=15&size=600x300&maptype=roadmap
    &markers=color:blue%7Clabel:S%7C#{p.lat},#{p.lng}&sensor=true")%></li>
    <li><%=p.name%></li>
    <li><%=p.rating%></li>
    <li><%p.lat%></li>
    <li><%p.lng%></li>
</ul>   
<%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:46:00.913

如果我理解正确，您基本上需要多个`ul`标签相互对齐。

本质上，您需要为 ul 元素提供固定宽度并应用浮动。在这里，我假设您希望并排放置三张地图。

**它的CSS代码是：**

```
* {
    box-sizing:border-box;
    -moz-box-sizing:border-box;
}
ul {
    list-style: none;
    width: 30%;
    float: left;
    margin: 0;
    padding:1.5%;
}
ul img {
    max-width:100%;
} 
```

**或者如果您更喜欢 SCSS：**

```
* {
    box-sizing:border-box;
    -moz-box-sizing:border-box;
}
ul {
    list-style: none;
    width: 30%;
    float: left;
    margin: 0;
    padding:1.5%;
    li {
        img {
            max-width:100%;
        }
    }
} 
```

如果您想看看它的外观，请查看[http://jsfiddle.net/dheer/Ltxzj/2/](http://jsfiddle.net/dheer/Ltxzj/2/)

注意：如果您将其添加到您的 Rails 应用程序中，您可能需要为 ul 标签分配一个新类，因为当前代码的样式可能会影响其他设计元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:47:48.137

Martin Bean 在此线程中有一个答案： [如何在 Google Maps 中显示多个位置？](https://stackoverflow.com/questions/8264117/how-to-show-multiple-location-in-google-map) 它使用谷歌地图 javascript api。如该示例所示，您应该只从您的坐标中将标记添加到地图中（在这种情况下，他会使用您应该从模型中加载的一堆坐标）。

# java - 如何在不使用任何其他库的情况下在 java 中计算百分位数

> ID：16138314
> 
> 赞同：-1
> 
> 时间：2013-04-22T01:55:25.250
> 
> 标签：java, concurrenthashmap, percentile

我正在尝试根据`95th Percentile`我在下面填充的数据集进行计算`ConcurrentHashMap`。

**我很想知道在 95% 的时间内有多少电话回了**

我的地图看起来像这样，它总是在键上按升序排序 - 其中

```
key - means number of milliseconds
value - means number of calls that took that much milliseconds 
```

以下是我的地图数据-

```
Milliseconds    Number

0               1702
1               15036
2               14262
3               13190
4               9137
5               5635
6               3742
7               2628
8               1899
9               1298
10              963
11              727
12              503
13              415
14              311
15              235
16              204
17              140
18              109
19              83
20              72 
```

例如，从上述数据集中，它意味着

> 1702 个呼叫在 0 毫秒内返回
> 
> 15036 个电话在 1 毫秒内返回

现在我可以通过将上述数据集插入到`Excel sheet`. 但我正在考虑计算 Java 代码中的百分位数。

我知道算法看起来像这样-

> 对 map 中的所有值求和，计算总和的 95%，按升序迭代 map 键，保持值的运行总和，当 sum 等于或超过先前计算的总和的 95% 时，键应该是第 95 个我猜是百分位。

下面是具有上述数据集的地图。

```
Map<Long, Long> histogram = new ConcurrentHashMap<Long, Long> 
```

我不确定我的算法是否也正确。我只是想找出在 95% 的时间内有多少电话回了。

以下是我到目前为止基于上述算法得到的代码。

```
private static void logPercentileInfo() {

    double total = 0;
    for (Map.Entry<Long, Long> entry : CassandraTimer.histogram.entrySet()) {
        long value = entry.getKey() * entry.getValue();
        total += value;
    }

    double sum = 0.95*total;

    double totalSum = 0;
    for (Map.Entry<Long, Long> entry : CassandraTimer.histogram.entrySet()) {
        totalSum += entry.getValue();

        if(totalSum >= sum) {
        System.out.println(entry.getKey());//this is the 95th percentile I guess
        }
    }
} 
```

如果我从上述数据集中计算第 95 个百分位数是否正确，请告诉我。如果也有任何改进，请告诉我。

**更新代码：-**

下面是我更新的代码，它解决了键的升序问题

```
/**
 * A simple method to log 95th percentile information
 */
private static void logPercentileInfo() {

    double total = 0;
    for (Map.Entry<Long, Long> entry : CassandraTimer.histogram.entrySet()) {
        long value = entry.getKey() * entry.getValue();
        total += value;
    }

    double sum = 0.95*total;

    double totalSum = 0;

    SortedSet<Long> keys = new TreeSet<Long>(CassandraTimer.histogram.keySet());
    for (long key : keys) {

        totalSum += CassandraTimer.histogram.get(key);

        if(totalSum >= sum) {
           //this is the 95th percentile I guess
            System.out.println(key);
        }
    }

} 
```

谁能看一下，让我知道我是否正确计算了百分位数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:05:37.943

迭代 a`ConcurrentHashMap`不会按顺序返回键。您首先需要创建一个排序的键列表，然后在从`histogram`后一个循环中提取值时对其进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:08:55.863

根据我对您问题的评论：

> 由于您使用的是哈希映射，因此您的密钥不会按排序顺序存储。即，如果您在循环中打印出 entry.getKey()，您将看到键不按顺序排列。所以这是你的主要问题。TeeMap 或 ConcurrentSkipListMap 将保持其键顺序

改变`Map<Long, Long> histogram = new ConcurrentHashMap<Long, Long>`

至

`Map<Long, Long> histogram = new ConcurrentSkipListMap<Long, Long>()`

会给你一张地图，它会按排序顺序返回你的钥匙。

您的代码中的另一个问题是当您计算您所做的总和时：

`total += entry.getKey() * entry.getValue(); // total += key*value`

当你第二次计算总和时，你正在做：

`totalSum += CassandraTimer.histogram.get(key); // totalSum += value`

我认为您想计算观察总数，然后将其乘以 0.95。这将为您提供低于 95% 的观察次数。

`L = .95 * total_observations`

然后迭代你的地图，总结观察的数量。一旦观察总数超过`L`，则相应的键是第 95 个百分位数的值。

```
private static void logPercentileInfo() {
    double total = 0;
    for (Map.Entry<Long, Long> entry : CassandraTimer.histogram.entrySet()) {
        long value = entry.getValue();
        total += value;
    }

    double sum = 0.95*total;
    double totalSum = 0;

    SortedSet<Long> keys = new TreeSet<Long>(CassandraTimer.histogram.keySet());
    for (long key : keys) {

        totalSum += CassandraTimer.histogram.get(key);

        if(totalSum >= sum) {
           System.out.println(key);
           break;
        }
    }
} 
```

# image - 与 MATLAB 中的神经网络混淆

> ID：16138318
> 
> 赞同：0
> 
> 时间：2013-04-22T01:55:50.917
> 
> 标签：image, matlab, neural-network

我正在使用神经网络进行字符识别（以及后来的指纹识别）。我对事件的顺序感到困惑。我正在用 26 个字母训练网络。稍后我将增加它以包括 26 个干净的字母和 26 个嘈杂的字母。如果我想识别一个字母说“A”，那么正确的方法是什么？这就是我现在正在做的事情。

1）用26x100矩阵训练网络；每行包含一个来自 bmp (10x10) 分割的字母。2）但是，对于测试目标，我将输入矩阵用于“A”。在第一行之后我有 25 行零，因此我的输入矩阵与我的目标矩阵大小相同。3) 我运行 perform(net, testTargets,outputs) ，其中输出是使用 26x100 矩阵训练的网络的输出。testTargets 是“A”的矩阵。

不过这似乎不对。训练应该与识别任何角色分开吗？我想要发生的事情如下。

1）为我选择的图像文件训练网络（在将图像处理成逻辑数组之后）。

2）使用这个训练有素的网络来识别不同图像文件中的字母。

因此，训练网络识别 A 到 Z。然后选择一张图像，运行网络以查看从选择的图像中识别出哪些字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:15:30.323

好的，所以这里的问题似乎更像是“我如何使用神经网络”我可以在这里概述基本程序以试图巩固你的想法，但就实际实施而言，你'是你自己的。我个人认为专有语言 (MATLAB) 令人厌恶，但我始终欣赏知识分子的热情。

神经网络的基本概念是，您有一系列层中的节点，这些节点具有连接它们的权重（取决于您想要做什么，您可以将每个节点连接到上面和下面的层，或者连接每个节点，或者之间的任何地方。）。每个节点都有一个“功函数”或一个概率函数，表示给定节点或神经元将评估为“on”或 1 的机会。

一般工作流程从您拥有的任何顶层神经元/节点开始，将它们初始化为您的数据值（在您的情况下，您可能会将这些中的每一个作为图像中的像素值开始，标准化为二进制将最简单）。然后将这些节点中的每一个乘以权重并向下馈送到您的第二层，这将被视为“隐藏层”，具体取决于将与工作函数来确定隐藏层的状态。

最后一点有点理论，很难理解，所以这里有一个例子。想象你的第一行有三个节点`([1,0,1])`，连接这三个节点到第二层第一个节点的权重类似于`([0.5, 2.0, 0.6])`. 如果你正在做一个算术和，这意味着你的“隐藏层”中第一个节点的权重将是

`1*0.5 + 0*2.0 + 1*0.6 = 1.1`

如果您使用逻辑函数作为工作函数（一个非常常见的选择，尽管 tanh 也很常见），这将使该节点评估为 1 的机会约为 75%。

您可能希望最后一层有 26 个节点，每个字母一个，但您可以添加更多隐藏层来改进您的模型。您会假设您的模型预测的字母将是具有最大权重标题的最终节点。

在你启动并运行它之后，你想要训练它，因为你可能只是随机播种你的权重，这是有道理的。对此有很多不同的方法，但我一般会概述反向传播，这是训练神经网络的一种非常常见的方法。这个想法本质上是，因为您知道应该识别图像的哪个字符，您将结果与模型实际预测的结果进行比较。如果您的模型准确地预测了您没问题的角色，您可以让模型保持原样，因为它有效。如果您预测了一个不正确的字符，您希望通过您的神经网络返回并增加从您输入的像素节点到应该被预测的字符的结束节点的权重。

希望对您有所帮助，如果您还有其他问题，请告诉我。

# ruby-on-rails - Ruby on Rails 应用程序的 Heroku 错误日志

> ID：16138320
> 
> 赞同：1
> 
> 时间：2013-04-22T01:56:14.430
> 
> 标签：ruby-on-rails, postgresql, heroku, heroku-toolbelt

Noob Ruby on Rails Developer 在这里，所以请原谅我的无知。所以我试图让这个应用程序部署在 Heroku 上。

目前我的heroku日志中的最后四行是：

```
2013-04-22T01:50:19.459579+00:00 heroku[api]: Starting process with command `bundle exec     rake db:migrate` by nevin.watkins@gmail.com
2013-04-22T01:50:22.560589+00:00 heroku[run.6823]: Starting process with command `bundle exec rake db:migrate`
2013-04-22T01:50:22.560405+00:00 heroku[run.6823]: Awaiting client
2013-04-22T01:50:22.837077+00:00 heroku[run.6823]: State changed from starting to up
2013-04-22T01:50:38.906768+00:00 heroku[run.6823]: Process exited with status 0
2013-04-22T01:50:38.918254+00:00 heroku[run.6823]: State changed from up to complete
2013-04-22T01:50:43.330599+00:00 heroku[router]: at=error code=H10 desc="App crashed"     method=GET path=/ host=eagerfans.com fwd="74.199.107.176" dyno= connect= service= status=503     bytes=
2013-04-22T01:50:43.340764+00:00 heroku[nginx]: 74.199.107.176 - - [22/Apr/2013:01:50:43     +0000] "GET / HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3)     AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31" eagerfans.com
2013-04-22T01:50:43.482962+00:00 heroku[nginx]: 74.199.107.176 - - [22/Apr/2013:01:50:43     +0000] "GET /favicon.ico HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3)     AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31" eagerfans.com
2013-04-22T01:50:43.479123+00:00 heroku[router]: at=error code=H10 desc="App crashed"     method=GET path=/favicon.ico host=eagerfans.com fwd="74.199.107.176" dyno= connect= service=     status=503 bytes= 
```

再次，如果我完全搞砸了，我很抱歉。我认为很明显我在此过程中错过了一些事情。

如果你可以请告诉我这将是伟大的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:32:47.923

使用它会帮助你。希望它对你有用。

[http://benji.so/2012/11/27/a-guide-to-enki-heroku-deployment](http://benji.so/2012/11/27/a-guide-to-enki-heroku-deployment)

# javascript - 使用“返回”/JavaScript 推迟后 JavaScript 消失

> ID：16138329
> 
> 赞同：2
> 
> 时间：2013-04-22T01:58:11.533
> 
> 标签：javascript, ajax

我一直在研究一些 JavaScript，到目前为止，最令人沮丧的事情之一是，如果使用 Back、Forward 或 Hard Refresh，我的 JavaScript 似乎拒绝加载。考虑到我的网站是建立在通过 MySQL 数据库连接重复生成的静态 HTML 页面上，我不得不手动添加一个版主菜单，但它似乎有时只是拒绝出现？

```
if (getCookie('opt23') !== '1') {
    var ajaxtwo = new XMLHttpRequest();
    var wrap = '';
    if (document.getElementById("firstpage") !== null) {
        wrap = document.getElementById("firstpage");
    } else {
        wrap = document.getElementById("firstpageinside");
    }
    var main = document.createElement("div");
    main.setAttribute("id","modmenu");
    wrap.appendChild(main);
    ajaxtwo.onreadystatechange = function() {
        var reports = (ajaxtwo.responseText === '0' ? 'flagblue.png' : 'flag.png');
        reportcount.innerHTML = '<img src=' + ku_cgipath + '/css/images/mods/' + reports + ' style="height:15px;' +
                                'width:15px;" />' + ajaxtwo.responseText;
    };
    ajaxtwo.open("GET",ku_cgipath + "/manage_page.php?action=reports&count",true);
    ajaxtwo.send();
    var threadid = document.getElementsByName("replythread");

    // taking the initiative of togglePassword, this makes things less needlessly lengthy.
    main.innerHTML =
        '<h2>Quick Mod</h2>' +
        '<input type="hidden" name="threadid" value="' + threadid[0].value +'" />' +
        '<label for="modaction">Action </label><select id="action" name="modaction">' +
            '<option value="">&lt;none&gt;</option>' +
            '<option value="delpost">Delete posts</option>' +
            '<option value="rebuildone">Rebuild board</option>' +
            '<option value="bans">View Bans</option>' +
            '<option value="appeals">View Appeals</option>' +
            '<option value="stickypost">Sticky Thread</option>' +
            '<option value="unstickypost">Unsticky Thread</option>' +
            '<option value=lockpost>Lock Thread</option>' +
            '<option value="unlockpost">Unlock Thread</option>' +
            '<option value="bump">Instant Bump</option>' +
            '<option value="viewthread">Switch to Moderator View</option>' +
        '</select>' +
        '<input type="submit" name="submit" value="Submit">' +
        '<a href="' + ku_cgipath + '/manage_page.php?action=reports" target="_blank">' +
        '<span id="reportcount"></span></a> ';
    } 
```

我的第二个问题是在我用来尝试使这些 HTML 页面动态运行的另一个 JavaScript 中。我正在使用 AJAX 与 PHP 脚本进行交互，但是，当它返回页面时（基本上是获取下一页并用 CSS 将它绑在第一个页面旁边，创建一个“双视图”），我的 JavaScript 没有得到应用，例如时间设置或生成的链接。如何处理？我不能使用`window.onload`，因为它只能使用一次 - 它正在另一个 JavaScript 中使用。我只是以某种方式修改 PHP 文件的结果吗？我正在使用正则表达式来抓取下一页，所以我实际上无法修改 PHP 中的结果...可以吗？

愿意向大多数解决方案让步，包括重写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:21:06.837

# 回答第一个问题

这是浏览器的 Back-Forward 缓存导致的一个 JavaScript 小“*问题”！*我已经回答了一个[类似的问题](https://stackoverflow.com/a/15850567/238722)，但为了完整起见，这里是解决方案：

Firefox 和 iOS Safari 是唯一*已知*存在此问题的（在撰写本文时）。解决方案是挂钩`window.unload`事件，以及重新加载页面的特定条件`window.onpageshow`！

* * *

## **火狐修复**

jQuery：

```
$(window).unload(function () { $(window).unbind('unload'); }); 
```

JavaScript：

```
function UnloadHandler() { window.removeEventListener('unload', UnloadHandler, false); }
window.addEventListener('unload', UnloadHandler, false); 
```

## **iOS Safari 修复**

jQuery：

```
$(window).bind('pageshow', function(event) {
    if (event.originalEvent.persisted) {
        window.location.reload() 
    }
}); 
```

JavaScript：

```
window.addEventListener('pageshow', function (event) {
    if (event.persisted) {
        window.location.reload() 
    }
}, false); 
```

* * *

# 回答第二个问题

您实际上*可以*`onload`使用多个脚本/多个函数挂钩事件。而不是使用覆盖形式的挂钩到一个事件，例如`ajaxtwo.onreadystatechange`- 你应该[“添加”一个事件监听](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)器。

简单的例子是：

```
ajaxtwo.addEventListener('readystatechange', function () {
    alert("hi! I'm done!");
}, false); 
```

至于将“为您执行此操作”并向后兼容某些旧版本 Internet Explorer 的辅助函数；你可以使用这个简单的功能：

```
function AttachEventListener(element, event, handler) {
    if (element.addEventListener) {
        element.addEventListener(event, handler, false);
    } else if (element.attachEvent) {
        element.attachEvent('on' + event, handler);
    } else {
        alert('Invalid element specified for AttachEventListener');
    }
} 
```

用法：

```
AttachEventListener(ajaxtwo, 'readystatechange', function () {
    alert("hi! I'm using an awesome helper function!");
}); 
```

# php - 使用 HTML5 上传单个特定文件

> ID：16138336
> 
> 赞同：0
> 
> 时间：2013-04-22T01:59:31.643
> 
> 标签：php, javascript, html, xmlhttprequest, fileapi

我需要使用 HTML5 组件“FileAPI”和“XMLHttpRequest”将单个特定文件（例如“C:\test.jpeg”）上传到 Web 服务器。可能吗？

我见过所有类型的示例，包括拖放选项，但我需要的还不止这些。我只需要调用 JavaScript 函数，我将需要上传的文件的路径发送到服务器上的特定文件夹。

**重要提示：我不能使用输入标签。它必须是动态的**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:05:17.173

即使使用 HTML5 的文件系统 API，您也无法从浏览器任意访问文件系统。这已在 Stackoverflow 上的许多其他线程中讨论过。看看最近的一个线程，例如：[关于 HTML5 FileSystemAPI 的一些问题](https://stackoverflow.com/questions/16087077/some-questions-about-html5-filesystemapi)。

# c++ - IplImage在openCV c ++中打开图像

> ID：16138339
> 
> 赞同：1
> 
> 时间：2013-04-22T01:59:53.443
> 
> 标签：c++, opencv, loadimage

我在文件夹中保存为 1.jpg、2.jpg 和 3.jpg 的图像（位于 C:/images/result/template/）

我正在尝试按如下方式加载所有图像：

```
string link="C:/images/result/template/";
int i=1;
while (i<4)
{
link=link+i+".jpg";
IplImage* templat  = cvLoadImage(link, 1);
IplImage* templat2 = cvCreateImage(cvSize(templat->width, templat->height), 
IPL_DEPTH_8U, 1);
i++
} 
```

但是我收到错误。

错误 C2678：二进制“+”：未找到采用“std::string”类型的左侧操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:58:11.187

`sprintf`您可以使用或加载一系列图像`std::stringstream`

这是您可以使用的方法`sprintf`：

```
char link[512];

int i=1;

while (i<4)
{
  sprintf(link,"C:/images/result/template/%d.jpg",i);
  IplImage* templat  = cvLoadImage(link, 1);
  IplImage* templat2 = cvCreateImage(cvSize(templat->width, templat->height),IPL_DEPTH_8U, 1);
  i++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:52:43.987

试试这个。。

```
string link="C://images//result//template//";  //Please put '//' instead of '/'
int i=1;
while (i<4)
{
link=link+i+".jpg";
IplImage* templat  = cvLoadImage(link.c_str(), 1); // instead of string, use char*
IplImage* templat2 = cvCreateImage(cvSize(templat->width, templat->height),IPL_DEPTH_8U,1);
i++; //put semi-colon
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:12:40.630

> 链接=链接+i+“.jpg”；

不做你认为它做的事 - 事实上我很惊讶它编译。

附言。您需要检查 cvLoadImage() 的返回以检查它是否实际加载了任何内容。
pps。你应该使用 cv::imread()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:34:13.813

检查路径，因为当路径不正确时：`link = null`

# c++ - g++ 找不到我的头文件

> ID：16138340
> 
> 赞同：3
> 
> 时间：2013-04-22T01:59:58.447
> 
> 标签：c++, compilation, g++, header-files

我正在尝试编译文件*q1.cpp*但我不断收到编译错误：

```
q1.cpp:2:28: fatal error: SavingsAccount.h: No such file or directory
compilation terminated. 
```

头文件和头文件的实现都在与*q1.cpp*完全相同的目录中。

文件如下：

*q1.cpp*：

```
#include <iostream>
#include <SavingsAccount.h>
using namespace std;

int main() {
    SavingsAccount s1(2000.00);
    SavingsAccount s2(3000.00);
} 
```

*SavingsAccount.cpp*：

```
#include <iostream>
#include <SavingsAccount.h>
using namespace std;

//constrauctor
SavingsAccount::SavingsAccount(double initialBalance) {
     savingsBalance = initialBalance;
}
SavingsAccount::calculateMonthlyInterest() {
     return savingsBalance*annualInterestRate/12
}
SavingsAccount::modifyInterestRate(double new_rate) {
     annualInterestRate = new_rate;
} 
```

*储蓄账户.h*：

```
class SavingsAccount {
    public:
        double annualInterestRate;
        SavingsAccount(double);
        double calculateMonthlyInterest();
        double modifyInterestRate(double);
    private:
        double savingsBalance;
}; 
```

我想重申所有文件都在同一个目录中。我正在尝试在 Windows 命令提示符下使用此行进行编译：

```
 C:\MinGW\bin\g++ q1.cpp -o q1 
```

对此问题的任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:01:28.583

```
 #include <SavingsAccount.h> 
```

应该

```
#include "SavingsAccount.h" 
```

因为`SavingsAccount.h`是你定义的头文件，你不应该要求编译器通过使用它来搜索系统头文件`<>`。

同时，当你编译它时，你应该编译两个 cpp 文件：`SavingsAccount.cpp`和`q1.cpp`.

```
 g++ SavingsAccount.cpp q1.cpp -o q1 
```

顺便说一句：你错过了`;`这里：

```
SavingsAccount::calculateMonthlyInterest() {
    return savingsBalance*annualInterestRate/12;
                                    //^^; cannot miss it
} 
```

# java - 有没有办法在沙箱中部署 java web start 应用程序而不会发出可怕的警告？

> ID：16138342
> 
> 赞同：1
> 
> 时间：2013-04-22T02:00:23.997
> 
> 标签：java, security, jnlp, java-web-start

我的 java webstart 在沙箱中运行，它不访问本地文件、任意网络文件、录音机、摄像头，它只需要有限的功能，例如计算、鼠标事件等。但是，当用户单击 jnlp 文件时，一个弹出窗口询问用户是否想在没有签名的情况下运行此应用程序，并说存在风险。

我想如果我的 java web start 是在沙盒中，不需要提醒用户有风险吗？我的 jnlp 文件没有标签，所以我没有要求所有权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:40:27.257

即使是在受限环境中签名的应用程序也可以利用漏洞；警告不应被推翻。相反，请采用安全性[*和代码签名*](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/development.html#security)中讨论的安全功能。尤其是，

*   不要请求不必要的权限。

*   签署你的 JAR；即使是自签名证书也可以检测到篡改。

# android - 将 ASP.NET 变量/帐户信息发送到 Android 设备

> ID：16138344
> 
> 赞同：2
> 
> 时间：2013-04-22T02:00:27.713
> 
> 标签：android, asp.net

我正在使用 Android 设备显示 ASP.NET MVC Web 应用程序，我想知道是否可以将帐户信息发送到 android 设备？

我的主要目标是使用用户帐户登录详细信息在 android 上设置特定的保存路径。如果我能够将用户登录用户名发送到 android 设备，这将是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:18:34.410

我发布了一个广泛处理这个主题的链接（一篇写得很好的文章）[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-阿普](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)。[注意：此解决方案利用了 Android 平台的 KSOAP 库 jar。]

基本上，您希望其中一种 Web 服务方法返回登录用户，该方法可以由 Android 的本机 java 类调用。

# c# - 请安排任务协助

> ID：16138345
> 
> 赞同：1
> 
> 时间：2013-04-22T02:00:35.247
> 
> 标签：c#, scheduled-tasks

我正在尝试创建一个计划任务（使用计划任务包装器）每 3 小时触发一次。我每天都安装了任务，但即使在阅读了文档之后，也无法让它每隔几个小时运行一次。也不太确定LogonType。谁能让我知道我哪里出错了？

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (TaskService ts = new TaskService())
        {
            var androback = ts.GetTask("Andro_Inc_Backup");
            bool taskExists = androback != null;
            if (taskExists)
            {
                MessageBox.Show("Andromeda incremental backup task already installed");
            }
            else
            {
                TaskDefinition td = ts.NewTask();
                td.RegistrationInfo.Description = "Incremental Backup";
                td.Principal.LogonType = TaskLogonType.ServiceAccount;
                td.Triggers.Add(new DailyTrigger { DaysInterval = 1 });
                td.Actions.Add(new ExecAction("C:\\Rameses\\Program\\Inc_Cloud_Backup.exe", null));
                const string taskname = "Inc_Backup";
                ts.RootFolder.RegisterTaskDefinition(taskname, td);
                MessageBox.Show("Incremental Backup Task Installed");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:03:12.557

我相信您正在寻找**dailyTrigger.Repetition.Interval**属性。

```
DateTime datetime = DateTime.Today;
DateTime startDateTime = new DateTime(datetime.Year, datetime.Month, datetime.Day, 0, 0, 0);
DailyTrigger dailyTrigger = new DailyTrigger { StartBoundary = startDateTime, Enabled = true, DaysInterval = 1 };
dailyTrigger.Repetition.Interval = TimeSpan.FromHours(23);
dailyTrigger.Repetition.Interval = TimeSpan.FromHours(3);
td.Triggers.Add(dailyTrigger); 
```

您可以使用[codeplex](http://taskscheduler.codeplex.com/documentation)上的每周触发器示例作为参考，它添加了一个触发器，从明天开始，将在周一和周六每隔一周触发一次，并在接下来的 11 小时内每 10 分钟重复一次

其他示例在[此处](http://taskscheduler.codeplex.com/wikipage?title=Examples&referringTitle=Documentation)。

# php - 试图理解 php 中的 ReflectionClass

> ID：16138346
> 
> 赞同：0
> 
> 时间：2013-04-22T02:00:39.350
> 
> 标签：php

```
<?php
interface NSerializable
{
// ...
}
class Object
{
// test...
}
/**
* A counter class test
*/
class Counter extends Object implements NSerializable
{
const START = 0;
private static $c = Counter::START;
/**
* Invoke counter test
*
* @access public
* @return int
*/
public function count()
{
return self::$c++;
}
}
// Create an instance of the ReflectionClass class
$class = new ReflectionClass('Counter');
// Print out basic information
printf(
"===> The %s%s%s %s '%s' [extends %s]\n" .
" declared in %s\n" .
" lines %d to %d\n" .
" having the modifiers %d [%s]\n",
$class->isInternal() ? 'internal' : 'user-defined',
$class->isAbstract() ? ' abstract' : '',
$class->isFinal() ? ' final' : '',
$class->isInterface() ? 'interface' : 'class',
$class->getName(),
var_export($class->getParentClass(), 1),
$class->getFileName(),
$class->getStartLine(),
$class->getEndline(),
$class->getModifiers(),
implode(' ', Reflection::getModifierNames(
$class->getModifiers()))
);
// Print documentation comment
printf("---> Documentation:\n %s\n",
var_export($class->getDocComment(), 1));
// Print which interfaces are implemented by this class
printf("---> Implements:\n %s\n",
var_export($class->getInterfaces(), 1));
// Print class constants
printf("---> Constants: %s\n",
var_export($class->getConstants(), 1));
// Print class properties
printf("---> Properties: %s\n",
var_export($class->getProperties(), 1));
// Print class methods
printf("---> Methods: %s\n",
var_export($class->getMethods(), 1));
// If this class is instantiable, create an instance
if ($class->isInstantiable())
{
$counter = $class->newInstance();
echo '---> $counter is instance? ';
echo $class->isInstance($counter) ? 'yes' : 'no';
echo "\n---> new Object() is instance? ";
echo $class->isInstance(new Object()) ? 'yes' : 'no';
}
?> 
```

问题：

1.  `var_export($class->getParentClass(), 1)`, 输出为: ===> 用户自定义类 'Counter' [extends ReflectionClass::__set_state(array( 'name' => 'Object', ))]... `var_export($class->getParentClass())`, 输出为: ReflectionClass::__set_state(array ( 'name' => 'Object', ))===> 用户定义的类 'Counter' [extends ]... 为什么？

2.  `$class->getParentClass()`，输出为： ReflectionClass::__set_state(array( 'name' => 'Object', )) 这是什么意思：'__set_state'？

3.  `getModifiers()`，`getModifierNames()`这两个函数究竟是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:11:01.237

答案 1\. 和 2.：

[`$class->getParentClass()`](http://www.php.net/manual/en/class.reflectionclass.php)实际上是类型的对象而`ReflectionClass`不是字符串。

代替：

```
var_export($class->getParentClass()) 
```

经过：

```
$class->getParentClass()->getName() 
```

* * *

3\. 没有方法`ReflectionClass::getModifierNames()`。我不知道你从哪里得到这些信息，但如果你需要它，你必须自己写。这是一个扩展`ReflectionClass`和添加方法的示例：

```
class MyReflectionClass extends ReflectionClass 
{

    /**
     * Returns the modifiers in human readable format
     */
    public function getModifierNames() {
        $m = $this->getModifiers();
        $names = array();
        if($m & self::IS_EXPLICIT_ABSTRACT === self::IS_EXPLICIT_ABSTRACT
        || $m & self::IS_IMPLICIT_ABSTRACT === self::IS_IMPLICIT_ABSTRACT) {
            $names []= 'abstract';
        }
        if($m & self::IS_FINAL === self::IS_FINAL) {
            $names []= 'final';
        }

        return implode(' ', $names);
    }

} 
```

利用：

```
abstract class Counter extends Object 
  implements NSerializable
{ // ... 
```

或者

```
final class Counter extends Object 
  implements NSerializable
{ // ... 
```

和

```
$class = new MyReflectionClass('Counter'); 
```

测试它

# r - 矩阵乘法循环

> ID：16138349
> 
> 赞同：1
> 
> 时间：2013-04-22T02:00:56.013
> 
> 标签：r, loops, vector, matrix, multiplication

我有这个矩阵：

```
 V1         V2         V3        V4         V5         V6         V7 V8
[1,] 0.8399983 0.01558029 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000  0
[2,] 0.0000000 0.89022017 0.02570281 0.0000000 0.00000000 0.00000000 0.00000000  0
[3,] 0.0000000 0.00000000 0.87910624 0.0242963 0.00000000 0.00000000 0.00000000  0
[4,] 0.0000000 0.00000000 0.00000000 0.0000000 0.03428571 0.00000000 0.00000000  0
[5,] 0.0000000 0.00000000 0.00000000 0.0000000 0.00000000 0.02988506 0.00000000  0
[6,] 0.0000000 0.00000000 0.00000000 0.0000000 0.00000000 0.73438228 0.01666667  0
[7,] 0.0000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000  0
[8,] 0.0000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000  0 
```

这个向量：

```
 [,1]
[1,]  908
[2,]  516
[3,]  269
[4,]   85
[5,]   32
[6,]   13
[7,]    2
[8,]    3 
```

而且我正在尝试提出一个循环，该循环将继续将结果（新向量）乘以相同的矩阵（这是人口矩阵模型的一个简单示例）。我需要第一次乘法的所有结果，直到第 100 次，所以我可以将它们放入图表中。有任何想法吗？

```
> dput(mat)
structure(c(0.8399983, 0, 0, 0, 0, 0, 0, 0, 0.01558029, 0.89022017, 
0, 0, 0, 0, 0, 0, 0, 0.02570281, 0.87910624, 0, 0, 0, 0, 0, 0, 
0, 0.0242963, 0, 0, 0, 0, 0, 0, 0, 0, 0.03428571, 0, 0, 0, 0, 
0, 0, 0, 0, 0.02988506, 0.73438228, 0, 0, 0, 0, 0, 0, 0, 0.01666667, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0), .Dim = c(8L, 8L), .Dimnames = list(
    c("[1,]", "[2,]", "[3,]", "[4,]", "[5,]", "[6,]", "[7,]", 
    "[8,]"), c("V1", "V2", "V3", "V4", "V5", "V6", "V7", "V8"
    )))
> dput(vec)
structure(c(908L, 516L, 269L, 85L, 32L, 13L, 2L, 3L), .Dim = c(8L, 
1L), .Dimnames = list(c("[1,]", "[2,]", "[3,]", "[4,]", "[5,]", 
"[6,]", "[7,]", "[8,]"), "X..1.")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:11:20.743

这应该返回一个向量列表：

```
Reduce(f=function(v, x) mat %*% v, x=1:100, init=vec, accumulate=TRUE) 
```

注意列表的第一个元素是原始向量，后面有100个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T02:35:21.237

一些数学在这里会有所帮助，你想计算

```
p_1 =  M \times p
p_2 =  M  \times p_1 = M \times M  \times p = M^2 \times p
....
p_n = M^n \times p 
```

计算矩阵的幂是标准矩阵代数（矩阵的特征值/对角化）

`expm`包有`%^%`操作员来做这个

```
 library(expm)

 # a function to calculate 
 # the population at time n for transition matrix M and initial population p

pop <- function(n, M, p){
     (M%^%n) %*% p
   }

# use sapply to get the populations (each column is a time point

sapply(1:100, pop, M = M, p = p) 
```

# matlab - 在matlab中向量化外部产品的总和

> ID：16138350
> 
> 赞同：0
> 
> 时间：2013-04-22T02:00:58.373
> 
> 标签：matlab, optimization, vectorization

任何想法如何矢量化此代码？结果 S 应该是 3x3。

```
%PNorm is n x 3
S = zeros(3,3,n);
%TODO vectorize
for i = 1:n
    S(:,:,i) = Pnorm(i,:)'*Pnorm(i,:);
end
S = sum(S, 3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:42:00.140

有什么理由不做：

```
S = Pnorm' * Pnorm; 
```

唔？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:40:25.067

对于显式计算，您可以将循环换成`bsxfun`：

```
S = bsxfun( @times, permute( Pnorm, [2 3 1]), permute( Pnorm, [3 2 1] ) );
S = sum( S, 3 ); 
```

但是，对于有效的计算，请参阅[EitanT](https://stackoverflow.com/a/16140161/1714410)的答案。

# ruby-on-rails - ActiveRecord::RecordNotFound - 没有 ID 就找不到

> ID：16138353
> 
> 赞同：1
> 
> 时间：2013-04-22T02:01:06.590
> 
> 标签：ruby-on-rails

我正在开发一个允许用户评论单个“作品”的应用程序（想想博客文章）。模型中的关联如下：

```
class User < ActiveRecord::Base
  has_many :works  
  has_many :comments

class Work < ActiveRecord::Base
  belongs_to :user
  has_many :comments

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
  belongs_to :work 
```

Works 展示页面上有一个表单，允许用户发表评论：

```
<%= form_for(@comment) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Post a comment!" %>
  </div>
  <%= f.submit "Post", class: "btn btn-small btn-primary" %>
<% end %> 
```

Works 控制器如下。请注意，我在这里添加了构建评论功能，以便 Works 页面上的表单起作用：

```
class WorksController < ApplicationController
   #before_filter :current_user,   only: [:edit, :update]

  def index
    @works = Work.all
    @comment = @work.comments.build(params[:comment])
    @comment.user = current_user

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @works }
end
end
def create
    @work = current_user.works.create(params[:work])
    redirect_to current_user
  end

def edit
    @work = current_user.works.find(params[:id])
end

def new
  @work = current_user.works.new
end

def destroy
  @work = current_user.works.find(params[:id]).destroy
  flash[:success] = "Work deleted"
  redirect_to current_user
end

 def update
    @work = current_user.works.find(params[:id])
    if @work.update_attributes(params[:work])
      flash[:success] = "Profile updated"
      redirect_to @work
    else
      render 'edit'
    end
  end

  def show 
  @work = Work.find(params[:id])
  @comment = @work.comments.build
  @comment.user = current_user
  @activities = PublicActivity::Activity.order("created_at DESC").where(trackable_type: "Work", trackable_id: @work).all
  @comments = @work.comments.order("created_at DESC").where(work_id: @work ).all 
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @work }
    end
  end
end 
```

最后，这里是 Comments 控制器：

```
class CommentsController < ApplicationController

  before_filter :authenticate_user!

  def index
    @comments = Comment.all
  end

  def show
    @comment = Comment.find(params[:id])
    @activities = PublicActivity::Activity.order("created_at DESC").where(trackable_type: "Comment", trackable_id: @comment).all
   respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @comment }
  end

  def update
     @comment = current_user.comments.find(params[:id])
    if @comment.update_attributes(params[:comment])
      flash[:success] = "Comment updated"
      redirect_to @comment
    end
  end

  def create
    @work = Work.find(params[:id])
    @comment = @work.comments.build(params[:comment])
    @comment.user = current_user
    if @comment.save
      #flash[:success] = "Post created!"
      redirect_to @work
    else
      render 'home#index'
    end
  end
  end
end 
```

当我尝试使用作品展示视图页面上的评论表单提交评论时，我收到以下错误：

在 CommentsController#create 中的 Activerecord::RecordNotFound

没有身份证找不到工作

为什么应用程序无法找到该作品以便将评论与其关联？

**编辑1：** 感谢下面的答案，我编辑了评论表：

```
<%= form_for(@work, @comment) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Post feedback or contribute content
    to this work!" %>
  </div>
  <%= f.submit "Post", class: "btn btn-small btn-primary" %>
<% end %> 
```

更改表单并添加嵌套路由后，我仍然遇到相同的错误。

我编辑了路由文件以包含工作评论的嵌套：

```
 authenticated :user do
    root :to => 'activities#index'
  end
  root :to => "home#index"
  devise_for :users
  resources :users do
    member do
      get :following, :followers, :posts, :comments
    end
  end
  resources :works do
    resources :comments
  end
  resources :relationships, only: [:create, :destroy]
  resources :posts
  resources :activities
  resources :comments 
```

Rake 路由为 Comments#create 显示以下内容： POST /comments(.:format)

POST URL（出现错误的地方）是 appURL/works/1/comments

似乎不对。我需要改变什么？非常感谢您到目前为止的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:06:11.947

您的表单需要`form_for([@work, @comment])`让 Rails 知道要构建一个类似`/works/123/comments`. 现在它只会发布到`/comments`.

检查您`rake routes`以查看您的 CommentsController#create 操作的路线。您可能还需要调整控制器以读取`params[:work_id]`而不是`params[:id]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:07:33.457

默认情况下，视图助手`form_for(@comment)`将发布到“/comments”。您可以指定包含工作记录的 url（[请参阅指南](http://guides.rubyonrails.org/form_helpers.html)） 。`:id`典型的方法是使用`form_for([@work, @comment])`，Rails 会为您执行此操作，只要您已将带有注释的路由设置为嵌套的工作资源。

# c++ - html5 视频无法与 awesomium 一起播放

> ID：16138359
> 
> 赞同：0
> 
> 时间：2013-04-22T02:01:45.580
> 
> 标签：c++, visual-studio-2010, html, html5-video, awesomium

我无法让 Awesomium 1.7.0 播放 html5 视频（webm 格式），即使示例项目随 SDK (sample_gdi) 一起提供。示例页面：[http ://www.webmfiles.org/demo-files/](http://www.webmfiles.org/demo-files/)

看起来视频帧已**正确加载**，但播放器**卡在第一帧**。虽然如果我手动移动进度条，我可以浏览视频帧......

我尝试使用 webViewType 窗口和屏幕外，并启用了 enable_gpu_acceleration 和 enable_web_gl，但每次都没有成功......

我的规格：VS2010，Windows 7

有任何想法吗？谢谢！！

示例项目“Sample_gdi”中的代码由 Awesomium 1.7.0 安装程序自动安装，位于*C:\Users[user]\Documents\Visual Studio 2010\Projects\Awesomium\1.7.0.5\BuildSamples\BuildSamples.sln 中*：

主.cc

```
#include "../common/application.h"
#include "../common/view.h"
#include <Awesomium/WebCore.h>
#include <Awesomium/STLHelpers.h>
#ifdef _WIN32
#include <Windows.h>
#endif

using namespace Awesomium;

class GDISample : public Application::Listener {
  Application* app_;
  View* view_;
 public:
  GDISample() 
    : app_(Application::Create()),
      view_(0) {
    app_->set_listener(this);
  }

  virtual ~GDISample() {
    if (view_)
      app_->DestroyView(view_);
    if (app_)
      delete app_;
  }

  void Run() {
    app_->Run();
  }

  // Inherited from Application::Listener
  virtual void OnLoaded() {
    view_ = View::Create(800, 600);
    view_->web_view()->LoadURL(WebURL(WSLit("http://www.google.com")));
  }

  // Inherited from Application::Listener
  virtual void OnUpdate() {
  }

  // Inherited from Application::Listener
  virtual void OnShutdown() {
  }
};

int APIENTRY wWinMain(HINSTANCE hInstance, HINSTANCE, wchar_t*, 
  int nCmdShow) {

  GDISample sample;
  sample.Run();

  return 0;
} 
```

application_win.cc

```
#include "application.h"
#include "view.h"
#include <Awesomium/WebCore.h>
#include <Awesomium/STLHelpers.h>
#include <string>

using namespace Awesomium;

class ApplicationWin : public Application {
  bool is_running_;
 public:
  ApplicationWin() {
    is_running_ = true;
    listener_ = NULL;
    web_core_ = NULL;
  }

  virtual ~ApplicationWin() {
    if (listener())
      listener()->OnShutdown();

    if (web_core_)
      web_core_->Shutdown();
  }

  virtual void Run() {
    Load();

    // Main message loop:
    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0) && is_running_) {
      web_core_->Update();
      TranslateMessage(&msg);
      DispatchMessage(&msg);
      if (listener())
        listener()->OnUpdate();
    }
  }

  virtual void Quit() {
    is_running_ = false;
  }

  virtual void Load() {
      WebConfig config;
     web_core_ = WebCore::Initialize(config);

    if (listener())
      listener()->OnLoaded();
  }

  virtual View* CreateView(int width, int height) {
    return View::Create(width, height);
  }

  virtual void DestroyView(View* view) {
    delete view;
  }

  virtual void ShowMessage(const char* message) {
    std::wstring message_str(message, message + strlen(message));
    MessageBox(0, message_str.c_str(), message_str.c_str(), NULL);
  }
};

Application* Application::Create() {
  return new ApplicationWin();
} 
```

view_win.cc

```
#include "view.h"
#include <Awesomium/WebCore.h>
#include <Awesomium/STLHelpers.h>
#include <vector>

class ViewWin;

static bool g_is_initialized = false;
static std::vector<ViewWin*> g_active_views_;
const wchar_t szWindowClass[] = L"ViewWinClass";
const wchar_t szTitle[] = L"Application";
LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);

using namespace Awesomium;

class ViewWin : public View,
                public WebViewListener::View {
public:
  ViewWin(int width, int height) {
    PlatformInit();
    WebPreferences webPref;
    WebSession *session =  WebCore::instance()->CreateWebSession(ToWebString(""),webPref);
    web_view_ = WebCore::instance()->CreateWebView(width,
                                           height,
                                           session,
                                           Awesomium::kWebViewType_Window);

    web_view_->set_view_listener(this);

    // Create our WinAPI Window
    HINSTANCE hInstance = GetModuleHandle(0);
    hwnd_ = CreateWindow(szWindowClass,
              szTitle,
              WS_OVERLAPPEDWINDOW,
              CW_USEDEFAULT,
              CW_USEDEFAULT,
              width + 20,
              height + 40, 
              NULL,
              NULL,
              hInstance,
              NULL);

    if (!hwnd_)
      exit(-1);

    web_view_->set_parent_window(hwnd_);

    ShowWindow(hwnd_, SW_SHOWNORMAL);
    UpdateWindow(hwnd_);

    SetTimer (hwnd_, 0, 15, NULL );

    g_active_views_.push_back(this);
  }

  virtual ~ViewWin() {
    for (std::vector<ViewWin*>::iterator i = g_active_views_.begin();
        i != g_active_views_.end(); i++) {
      if (*i == this) {
        g_active_views_.erase(i);
        break;
      }
    }

    web_view_->Destroy();
  }

  HWND hwnd() { return hwnd_; }

  static void PlatformInit() {
    if (g_is_initialized)
      return;

    WNDCLASSEX wc;

    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = GetModuleHandle(0);
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = szWindowClass;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc)) {
      exit(-1);
    }

    g_is_initialized = true;
  }

  static ViewWin* GetFromHandle(HWND handle) {
    for (std::vector<ViewWin*>::iterator i = g_active_views_.begin();
        i != g_active_views_.end(); i++) {
      if ((*i)->hwnd() == handle) {
        return *i;
      }
    }

    return NULL;
  }

  // Following methods are inherited from WebViewListener::View

  virtual void OnChangeTitle(Awesomium::WebView* caller,
                             const Awesomium::WebString& title) {
    std::string title_utf8(ToString(title));
    std::wstring title_wide(title_utf8.begin(), title_utf8.end());

    SetWindowText(hwnd_, title_wide.c_str());
  }

  virtual void OnChangeAddressBar(Awesomium::WebView* caller,
    const Awesomium::WebURL& url) { }

  virtual void OnChangeTooltip(Awesomium::WebView* caller,
    const Awesomium::WebString& tooltip) { }

  virtual void OnChangeTargetURL(Awesomium::WebView* caller,
    const Awesomium::WebURL& url) { }

  virtual void OnChangeCursor(Awesomium::WebView* caller,
    Awesomium::Cursor cursor) { }

  virtual void OnChangeFocus(Awesomium::WebView* caller,
    Awesomium::FocusedElementType focused_type) { }

  virtual void OnShowCreatedWebView(Awesomium::WebView* caller,
                                    Awesomium::WebView* new_view,
                                    const Awesomium::WebURL& opener_url,
                                    const Awesomium::WebURL& target_url,
                                    const Awesomium::Rect& initial_pos,
                                    bool is_popup) { }

    virtual void OnAddConsoleMessage(Awesomium::WebView* caller,
                                   const Awesomium::WebString& message,
                                   int line_number,
                                   const Awesomium::WebString& source) { }

 protected:
  HWND hwnd_;
};

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
  ViewWin* view = ViewWin::GetFromHandle(hWnd);

  switch (message) {
  case WM_COMMAND:
    return DefWindowProc(hWnd, message, wParam, lParam);
    break;
  case WM_TIMER:
    break;
  case WM_SIZE:
    view->web_view()->Resize(LOWORD(lParam), HIWORD(lParam));
    break;
  case WM_DESTROY:
    PostQuitMessage(0);
    break;
  case WM_QUIT:
    break;
  default:
    return DefWindowProc(hWnd, message, wParam, lParam);
  }
  return 0;
}

View* View::Create(int width, int height) {
  return new ViewWin(width, height);
} 
```

../common/application.h

```
#ifndef COMMON_APPLICATION_H_
#define COMMON_APPLICATION_H_

class View;

namespace Awesomium {
class WebCore;
}

// Common class that sets up an application, creates the WebCore, handles
// the Run loop, and abstracts platform-specific details.
class Application {
 public:
  // Listener interface to be used to handle various application events.
  class Listener {
   public:
    virtual ~Listener() {}

    // Event is fired when app (and WebCore) have been loaded.
    virtual void OnLoaded() = 0;

    // Event is fired for each iteration of the Run loop.
    virtual void OnUpdate() = 0;

    // Event is fired when the app is shutting down.
    virtual void OnShutdown() = 0;
  };

  virtual ~Application() {}

  // Platform-specific factory constructor
  static Application* Create();

  // Begin the Run loop.
  virtual void Run() = 0;

  // Ends the Run loop.
  virtual void Quit() = 0;

  // Create a platform-specific, windowed View
  virtual View* CreateView(int width, int height) = 0;

  // Destroy a View
  virtual void DestroyView(View* view) = 0;

  // Show a modal message box
  virtual void ShowMessage(const char* message) = 0;

  // Get the WebCore
  virtual Awesomium::WebCore* web_core() { return web_core_; }

  // Get the Listener.
  Listener* listener() { return listener_; }

  // Set the Listener for various app events.
  void set_listener(Listener* listener) { listener_ = listener; }

 protected:
  Application() { }

  virtual void Load() = 0;

  Listener* listener_;
  Awesomium::WebCore* web_core_;
};

#endif  // COMMON_APPLICATION_H_ 
```

../common/view.h

```
#ifndef COMMON_VIEW_H_
#define COMMON_VIEW_H_

namespace Awesomium {
class WebView;
}

// Common class that implements a windowed WebView, handles all input/display,
// and abstracts away all the platform-specific details.
class View {
 public:
  virtual ~View() {}

  // Platform-specific constructor
  static View* Create(int width, int height);

  // Get the associated WebView
  Awesomium::WebView* web_view() { return web_view_; }

 protected:
  View() { }

  Awesomium::WebView* web_view_;
};

#endif  // COMMON_VIEW_H_ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T19:04:16.907

我在这个问题上花了一天时间，对我来说它最终是一个音频连接问题。我不得不使用 HDMI 电缆或将扬声器插入计算机。一旦我这样做了，视频就没有冻结。我的问题是由于使用 DVI 电缆而没有将任何东西插入我的音频输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:42:26.247

看起来我在其他计算机上部署时无法重现该错误。我的电脑上应该有什么东西坏了，阻止 awesomium 正确播放 html5 视频......

# java - Java 兼容的 JVM 语言

> ID：16138360
> 
> 赞同：-4
> 
> 时间：2013-04-22T02:01:48.227
> 
> 标签：java, jvm

是否存在与 Java 完全兼容的基于 JVM 的语言？

为什么这样的语言有用：

1.  有一个现有项目包含许多用 Java 编写的代码，一个团队希望以最小的努力切换到一种新语言。无需翻译。
2.  一个团队逐渐开始使用新语言的新特性。一些程序员用旧的 Java 风格编写。其他人完全使用该语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:23:24.173

你有很多不错的选择，我将列出我认为领先的 4 个选择（就技术成熟度、社区规模和一般实用性而言）：

*   **Clojure**：一个 JVM Lisp，强调动态性和函数式编程。一个巨大的范式转变，但如果你掌握它，它会非常强大/富有成效。
*   **Scala**：类似于具有功能特性和强大静态类型系统的 Java++。可能是最先进的新 JVM 语言。
*   **JRuby**：用于 JVM 的 Ruby。如果您的开发人员有 Ruby 经验或者您需要将 Ruby 代码移植到 JVM，那就太好了。
*   **Groovy**：与 Java 非常相似，但作为一种动态脚本语言。可能是这里列出的四种语言中最容易学习的，因为它在语法上与 Java 非常相似。

所有这些都与 Java “完全兼容”，因为它们可以在同一个 JVM 上运行并充分利用 Java 库/现有代码库。

通过用新语言编写新模块来随时间迁移您的团队是完全可行的。确实，最好从小处着手。只要确保你有渴望学习和支持管理的开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:08:57.863

Groovy 可能是您最好的选择。大多数（但不是全部）Java 代码都是有效的 Groovy 代码。

# java - 游戏的无限背景

> ID：16138363
> 
> 赞同：3
> 
> 时间：2013-04-22T02:02:46.443
> 
> 标签：java, swing, background, jpanel, graphics2d

我正在开发一个 Java 项目来模拟直升机在框架中的飞行。直升机使用箭头键在屏幕上移动。我希望直升机能够无限移动，即当直升机到达画面边缘时，背景应该向相反的方向移动，以产生无尽地形的效果。

这是我到目前为止的代码：

```
import java.awt.Graphics;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class MainFrame extends JFrame
{
    private static int FRAME_WIDTH = 800;
    private static int FRAME_HEIGHT = 500;

    public MainFrame()
    {
        add(new AnotherBackground(FRAME_WIDTH, FRAME_HEIGHT));
        setTitle("Helicopter Background Test");
        setSize(FRAME_WIDTH,FRAME_HEIGHT);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args)
    {
        new MainFrame();
    }
}

class AnotherBackground extends JPanel
{
private BufferedImage heliImage = null;
private BufferedImage backImage = null;

private int heliX = 0;
private int heliY = 0;

private int backX = 0;
private int backY = 0;

private int frameWidth = 0;
private int frameHeight = 0;

private int backWidth = 0;
private int backHeight = 0;

public AnotherBackground(int fWidth, int fHeight)
{
    frameWidth = fWidth;
    frameHeight = fHeight;

    this.setFocusable(true);
    this.addKeyListener(new HeliListener());

    try
    {
        heliImage = ImageIO.read(new URL("http://imageshack.us/a/img7/2133/helicopter2f.png"));
        // 2.7 Meg Crap that is a humungous image!  Substitute dummy.
        backImage = new BufferedImage(1918,1200,BufferedImage.TYPE_INT_RGB);
    }

    catch(IOException ex)
    {
        System.out.println("Problem durinng loading heli image");
    }

    backWidth = backImage.getWidth();
    backHeight = backImage.getHeight();

    HeliPainter l = new HeliPainter();
    new Thread(l).start();
}

@Override
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);

    g.drawImage(backImage, backX, backY, null);
    g.drawImage(heliImage, heliX, heliY, null);

}

class HeliListener extends KeyAdapter
{
    @Override
    public void keyPressed(KeyEvent e)
    {
        System.out.println(heliX + " " + heliY + " " + backX + " " + backY);

        if (e.getKeyCode() == KeyEvent.VK_LEFT)
        {
            if(heliX > 0)
            {
                heliX -= 5;
            }

            else
            {
                backX += 5;
            }
        }

        else if (e.getKeyCode() == KeyEvent.VK_RIGHT)
        {
            if(heliX < frameWidth)
            {
                heliX += 5;
            }

            else
            {
                backX -= 5;
            }
        }

        else if (e.getKeyCode() == KeyEvent.VK_UP)
        {
            if(heliY > 0)
            {
                heliY -= 5;
            }

            else
            {
                backY += 5;
            }
        }

        else if (e.getKeyCode() == KeyEvent.VK_DOWN)
        {
            if(heliY < frameHeight)
            {
                heliY += 5;
            }

            else
            {
                backY -= 5;
            }
        }
    }
}

class HeliPainter implements Runnable
{
    @Override
    public void run()
    {
        try
        {
            while(true)
            {
                SwingUtilities.invokeLater(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        repaint();
                    }
                });

                Thread.sleep(1);
            }
        }

        catch(InterruptedException ex)
        {
            System.out.println("Problem putting thread to sleep");
        }
    }
}
} 
```

现在代码中有两个图像。一个是小型直升机，另一个是大型（2.7 兆）背景。他们在这里：

*   [背景](http://imageshack.us/a/img195/2244/testvsz.jpg)
*   [直升机 http://imageshack.us/a/img7/2133/helicopter2f.png](http://imageshack.us/a/img7/2133/helicopter2f.png)

如何连续显示BG？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T05:48:46.483

看看这个以更可预测的方式运行的源，还包括对斩波器图像（[*动画*](https://i.stack.imgur.com/ireEU.gif)[）的一个很好的](https://i.stack.imgur.com/ireEU.gif)[调整](https://i.stack.imgur.com/ireEU.gif)*。;)*

 *![带 BG 的滚动车辆](https://i.stack.imgur.com/jkTeH.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class MainFrame
{
    public MainFrame()
    {
        JFrame f = new JFrame("Helicopter Background Test");
        f.add(new AnotherBackground());
        //setTitle("Helicopter Background Test");  Redundant..
        // Set a preferred size for the content area and pack() the frame instead!
        // setSize(FRAME_WIDTH,FRAME_HEIGHT);
        // setLocationRelativeTo(null); Better to..
        f.setLocationByPlatform(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.pack(); // Size the GUI - VERY MPORTANT!
        f.setVisible(true);
    }

    public static void main(String[] args)
    {
        new MainFrame();
    }
}

class AnotherBackground extends JPanel
{
    private static int PREFERRED_WIDTH = 400;
    private static int PREFERRED_HEIGHT = 200;

    private BufferedImage heliImage = null;
    private BufferedImage heliLeftImage = null;
    private BufferedImage heliRightImage = null;
    private BufferedImage backImage = null; //getFlippedImage(

    private int heliX = 0;
    private int heliY = 0;

    private int backX = 0;
    private int backY = 0;

    private int frameWidth = 0;
    private int frameHeight = 0;

    private int backWidth = 0;
    private int backHeight = 0;

    public AnotherBackground()
    {
        frameWidth = PREFERRED_WIDTH;
        frameHeight = PREFERRED_HEIGHT;

        this.setFocusable(true);
        this.addKeyListener(new HeliListener());

        try
        {
            heliLeftImage = ImageIO.read(
                new URL("http://imageshack.us/a/img7/2133/helicopter2f.png"));
            heliRightImage = getFlippedImage(heliLeftImage);
            heliImage = heliLeftImage;
            // 2.7 Meg Crap that is an humungous image!  Substitute dummy.
            backImage = getTileImage(250);
            //ImageIO.read(
            //  new URL("http://i.stack.imgur.com/T5uTa.png"));

            backWidth = backImage.getWidth();
            backHeight = backImage.getHeight();

            //HeliPainter l = new HeliPainter();  //  see mention of repaint()
            //new Thread(l).start();
        } catch(IOException ex) {
            // THERE IS NO POINT CONTINUING AFTER THIS POINT!
            // unless it is to pop an option pane error message..
            System.err.println("Problem during loading heli image");
            ex.printStackTrace();
        }

    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(PREFERRED_WIDTH, PREFERRED_HEIGHT);
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        int normalizeX = (heliRealX-heliX)%backImage.getWidth();
        int normalizeY = (heliRealY-heliY)%backImage.getHeight();
        int timesRepeatX = (getWidth()/backImage.getWidth())+2;
        int timesRepeatY = (getHeight()/backImage.getHeight())+2;

        for (int xx=-1; xx<timesRepeatX; xx++) {
            for (int yy=-1; yy<timesRepeatY; yy++) {
                g.drawImage(
                    backImage,
                    (xx*backImage.getWidth())-normalizeX,
                    (yy*backImage.getHeight())-normalizeY,
                    this);  // A JPanel IS AN ImageObserver!
                g.drawImage(heliImage, heliX, heliY, this);
            }
        }
        g.setColor(Color.BLACK);
    }

    private int heliRealX = 0;
    private int heliRealY = 0;

    class HeliListener extends KeyAdapter
    {
        @Override
        public void keyPressed(KeyEvent e)
        {
            int pad = 5;
            if (e.getKeyCode() == KeyEvent.VK_LEFT)
            {
                if(heliX > 0)
                {
                    heliX -= 5;
                }
                else
                {
                    backX += 5;
                }
                heliRealX-=5;
                heliImage = heliLeftImage;
            }
            else if (e.getKeyCode() == KeyEvent.VK_RIGHT)
            {
                // correct for image size + padding
                if(heliX+heliImage.getWidth()+pad < getWidth())
                {
                    heliX += 5;
                }
                else
                {
                    backX -= 5;
                }
                heliRealX+=5;
                heliImage = heliRightImage;
            }

            else if (e.getKeyCode() == KeyEvent.VK_UP)
            {
                if(heliY > 0)
                {
                    heliY -= 5;
                }
                else
                {
                    backY += 5;
                }
                heliRealY-=5;
            }

            else if (e.getKeyCode() == KeyEvent.VK_DOWN)
            {
                // correct for image size + padding
                if(heliY+heliImage.getHeight()+pad < getHeight())
                {
                    heliY += 5;
                }
                else
                {
                    backY -= 5;
                }
                heliRealY+=5;
            }
            repaint(); // Replaces need for threads for this simple demo!
        }
    }

    public BufferedImage getFlippedImage(BufferedImage original) {
        BufferedImage bi = new BufferedImage(
            original.getWidth(),
            original.getHeight(),
            BufferedImage.TYPE_INT_ARGB);
        Graphics2D g = bi.createGraphics();

        AffineTransform at = AffineTransform.getTranslateInstance(bi.getWidth(),1d);
        at.concatenate(AffineTransform.getScaleInstance(-1d,1d));
        g.setTransform(at);
        g.drawImage(original,0,0,this);

        g.dispose();
        return bi;
    }

    public BufferedImage getTileImage(int s) {
        BufferedImage bi = new BufferedImage(s,s,BufferedImage.TYPE_INT_ARGB);
        Graphics2D g = bi.createGraphics();

        GradientPaint gp1 = new GradientPaint(
            (float)0,(float)s/4, Color.YELLOW,
            (float)s/4,0f, Color.GREEN,
            true);
        g.setPaint(gp1);
        g.fillRect(0,0,s,s);

        int trans = 165;
        GradientPaint gp2 = new GradientPaint(
            (float)s/2,(float)s/2, new Color(255,0,0,trans),
            0f,(float)s/2, new Color(255,255,255,trans),
            true);
        g.setPaint(gp2);
        g.fillRect(0,0,s,s);

        g.dispose();
        return bi;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T02:55:05.963

这是一个非常简单的例子（你只能在一个方向上移动）。基本思想是有一种`prepareView`方法负责根据可用的可视区域生成世界视图。如果视图试图查看地图之外的区域，则地图的标题会弥补它。

![在此处输入图像描述](https://i.stack.imgur.com/Wt1XC.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class InfiniteBackground {

    public static void main(String[] args) {
        new InfiniteBackground();
    }

    public InfiniteBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class TestPane extends JPanel {

        protected static final int DELTA = 5;
        private BufferedImage terrian;
        private BufferedImage heli;
        private Point pov;
        private Point heliPoint;
        private BufferedImage view;

        public TestPane() {
            pov = new Point();
            heliPoint = new Point();
            try {
                terrian = ImageIO.read(getClass().getResource("/terrain_map.jpg"));
                heli = ImageIO.read(getClass().getResource("/helicopter2f.png"));

                pov.x = terrian.getWidth() - getPreferredSize().width;
                pov.y = ((terrian.getHeight() - getPreferredSize().height) / 2);

                heliPoint.x = getPreferredSize().width / 2;
                heliPoint.y = getPreferredSize().height / 2;

                prepareView();

                InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
                ActionMap am = getActionMap();

                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "goLeft");
                am.put("goLeft", new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        heliPoint.x -= DELTA;
                        if (heliPoint.x - (heli.getWidth() / 2) < 0) {
                            heliPoint.x = (heli.getWidth() / 2);
                            prepareView();
                            pov.x -= DELTA;
                        }
                        repaint();
                    }
                });

            } catch (IOException ex) {
                ex.printStackTrace();
            }

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 200);
        }

        protected void prepareView() {
            if (getWidth() > 0 && getHeight() > 0) {
                view = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
                Graphics2D g2d = view.createGraphics();
                if (pov.x < 0) {
                    pov.x = terrian.getWidth();
                }
                g2d.drawImage(terrian, -pov.x, -pov.y, this);
                if (pov.x + getWidth() > terrian.getWidth()) {
                    g2d.drawImage(terrian, -pov.x + terrian.getWidth(), -pov.y, this);
                }
                g2d.dispose();
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (terrian != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                if (view == null) {
                    prepareView();
                }
                g2d.drawImage(view, 0, 0, this);
                g2d.drawImage(heli, heliPoint.x - (heli.getWidth() / 2), heliPoint.y - (heli.getHeight() / 2), this);
                g2d.dispose();
            }
        }
    }
} 
```*

# windows-phone-8 - wp8长按windows键时如何处理事件

> ID：16138369
> 
> 赞同：1
> 
> 时间：2013-04-22T02:03:36.307
> 
> 标签：windows-phone-8

我使用纯 cpp。

长按windows键会出现语音助手，但d3d线程不会暂停。因为我的应用程序是一个游戏，我想在出现语音助手时暂停游戏，我没有找到它的 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:53:33.683

我在 Win8 Official demo 上找到了代码，它适用于 Wp8。

**伪代码**：

```
CoreApplicationView->Activated += OnActivated;

void OnActivated(CoreApplicationView^ applicationView, IActivatedEventArgs^ args)
{
    CoreWindow::GetForCurrentThread()->Activated += OnWindowActivationChanged;
}

void OnWindowActivationChanged
(Windows::UI::Core::CoreWindow^,Windows::UI::Core::WindowActivatedEventArgs^ args)
{
    CoreWindowActivationState newState = args->WindowActivationState;
    if (newState == CoreWindowActivationState::Deactivated)
    {
        DEACTIVATE code
    }
    else if (newState == CoreWindowActivationState::CodeActivated
    || newState == CoreWindowActivationState::PointerActivated)
    {
        ACTIVATE code
    }
} 
```

# ios - UIKit pushViewController:animated: 上的调用会导致最终的堆栈溢出（或其他异常）吗？

> ID：16138371
> 
> 赞同：0
> 
> 时间：2013-04-22T02:03:40.187
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uikit, stack-overflow

UIKit pushViewController 上的调用会导致最终的堆栈溢出（或其他异常）吗？我的应用程序现在使用`pushViewController:animated:`跨屏幕导航，例如：

```
[[self navigationController] pushViewController:iLovePoniesScreen animated:YES]; 
```

这最终会在来回浏览屏幕时造成溢出吗？这是 UIKit 中推荐的屏幕导航方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:38:52.710

这是推荐的方法之一。除非您要推动 100 个控制器，否则您不应该遇到任何麻烦。当您返回（弹出）时，您离开的视图控制器将被释放，如果您再次前进，则会创建一个新的视图控制器，因此不会构建视图控制器。

# ruby-on-rails - 路由包含多个连续斜杠的参数

> ID：16138375
> 
> 赞同：3
> 
> 时间：2013-04-22T02:03:49.660
> 
> 标签：ruby-on-rails, url, routing, escaping, glob

注意：来自[Rails 路由的建议，其参数包含斜杠（/）](https://stackoverflow.com/questions/4273205/rails-routing-with-a-parameter-that-includes-slash)

似乎对我不起作用...

我的路线看起来像：

```
get '/r/*code_or_url' => 'pixels#visit', :as => :visit, :format => false, :constraints => {:url => /.*/}, :escape => false 
```

但如果我去

```
http://localhost:3000/r/http://www.google.com 
```

我懂了：

没有路线匹配 [GET] "/www.google.com"

我的网址栏在

```
http://localhost:3000/www.google.com 
```

我的 pixel_controller.rb 看起来像

```
def visit
  @code_or_url = params[:code_or_url]
  redirect_to @code_or_url
end 
```

日志中的参数是

```
Parameters: {"escape"=>false, "code_or_url"=>"http:/www.google.com"} 
```

* * *

到目前为止，我发现做我喜欢的事情的唯一方法是：

```
request.original_fullpath[3..-1] 
```

其他一切都扼杀了最初的要求

# java - 使用 ecplise 在 UML 中逆向工程代码

> ID：16138377
> 
> 赞同：0
> 
> 时间：2013-04-22T02:03:58.277
> 
> 标签：java, eclipse

如何使用 eclipse 生成 UML 类图。市场上是否有任何插件可以让我生成类图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:07:32.200

你是在谈论你没有源代码的编译类吗？

你试过阿波罗吗？

[http://www.gentleware.com/apollo.html](http://www.gentleware.com/apollo.html)

# java - 如何读文件、倒序、倒序写

> ID：16138380
> 
> 赞同：3
> 
> 时间：2013-04-22T02:04:38.550
> 
> 标签：java, file-io, indexoutofboundsexception

就像我做的一个类似的项目一样，这个项目是从一个txt文件中读取字符，颠倒字符串的顺序并将其重写到另一个txt文件中。但它不断输出我的“出了点问题”的例外情况。谁能帮我解决问题所在？

```
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;

public class ReverseFile
{
    public static void main(String[] args) throws IOException
       {
          try{
          String source = args[0];
          String target = args[1];

          File sourceFile=new File(source);

          Scanner content=new Scanner(sourceFile);
          PrintWriter pwriter =new PrintWriter(target);

          while(content.hasNextLine())
          {
             String s=content.nextLine();
             StringBuffer buffer = new StringBuffer(s);
             buffer=buffer.reverse();
             String rs=buffer.toString();
             pwriter.println(rs);
          }
          content.close();    
          pwriter.close();
          System.out.println("File is copied successful!");
          }

          catch(Exception e){
              System.out.println("Something went wrong");
          }
       }
} 
```

所以这里是来自堆栈跟踪的信息：

```
java.lang.ArrayIndexOutOfBoundsException: 0
    at ReverseFile.main(ReverseFile.java:36) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:31:11.027

我不太确定您的环境，以及文本可能有多长。我也不太确定你为什么需要扫描仪？

无论如何，这是我对这个问题的看法，希望这对你有帮助:)

```
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.io.RandomAccessFile;
import java.io.Reader;

public class Reverse {

    public static void main(String[] args) {

        FileInputStream fis = null;
        RandomAccessFile raf = null;

        // by default, let's use utf-8
        String characterEncoding = "utf-8";

        // but if you pass an optional 3rd parameter, we use that
        if(args.length==3) {
            characterEncoding = args[2];
        }

        try{

            // input file
            File in = new File(args[0]);
            fis = new FileInputStream(in);

            // a reader, because it respects character encoding etc
            Reader r = new InputStreamReader(fis,characterEncoding);

            // an outputfile 
            File out = new File(args[1]);

            // and a random access file of the same size as the input, so we can write in reverse order 
            raf = new RandomAccessFile(out, "rw");
            raf.setLength(in.length());

            // a buffer for the chars we want to read 
            char[] buff = new char[1];

            // keep track of the current position (we're going backwards, so we start at the end)
            long position = in.length(); 

            // Reader.read will return -1 when it reached the end.
            while((r.read(buff))>-1) {

                // turn the character into bytes according to the character encoding
                Character c = buff[0];
                String s = c+"";
                byte[] bBuff = s.getBytes(characterEncoding);

                // go to the proper position in the random access file
                position = position-bBuff.length;
                raf.seek(position);

                // write one or more bytes for the character
                raf.write(bBuff);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // clean up
            try {
                fis.close();
            } catch (Exception e2) {
            }
            try {
                raf.close();
            } catch (Exception e2) {
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T02:20:11.737

您需要在运行程序时在命令行上指定文件名（源和目标）。

```
java ReverseFile source.txt target.txt 
```

在您的程序中，您尝试从命令行读取文件名

```
String source = args[0];
String target = args[1]; 
```

因此，如果您没有在那里指定这些名称，请`java`尝试访问`args`索引 0 和 1 处为空的数组，然后您会得到`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T11:12:08.780

这是您的问题的无错误解决方案，您使用“扫描仪”而不导入“util”包。我们开始：-----------

```
 import java.io.*;
    import java.util.*;

        public class ReverseFile
         {
         public static void main(String[] args) throws IOException
          {
      try{
      File sourceFile=new File(args[0]);
      Scanner content=new Scanner(sourceFile);
      PrintWriter pwriter =new PrintWriter(args[1]);

      while(content.hasNextLine())
      {
         String s=content.nextLine();
         StringBuffer buffer = new StringBuffer(s);
         buffer=buffer.reverse();
         String rs=buffer.toString();
         pwriter.println(rs);
      }
      content.close();    
      pwriter.close();
      System.out.println("File is copied successful!");
      }

      catch(Exception e){
          System.out.println("Something went wrong");
      }
   }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-12T21:03:32.750

只是想到了一个简单的方法。

```
public class ReadFileReverse {

public int[] readByte(File _file) throws IOException {
    FileInputStream source = new FileInputStream(_file);
    int currentByte = source.available();
    int readCount = 0;

    int byteContainer[] = new int[currentByte];
    while(readCount < currentByte){
        byteContainer[readCount] = source.read();
        readCount++;
    }
    source.close();
    return byteContainer;
}

public void printReverse(int[] fileContent){
    for(int byt=fileContent.length -1; byt >= 0 ; byt--){
        System.out.print((char) fileContent[byt]);
    }
}

public static void main(String[] args) throws IOException {
    File fileToRead = new File("/README.txt");

    ReadFileReverse demo = new ReadFileReverse ();
    int[] readBytes = demo.readByte(fileToRead);

    demo.printReverse(readBytes);
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-25T10:09:07.147

这里我们在字符串变量中读取一个文件，然后制作一个 String Builder 对象来高效地执行反向操作，然后打印

```
package com;

import java.io.FileReader;

public class Main {
	public static void main(String[] args) {

		try {
			FileReader fr = new FileReader("D:\\newfile.txt");
			String str = "";
			int ch;
            //reading characters in to string variable
			while ((ch = fr.read()) != -1) {
				str += Character.toString((char) ch);
			}
			System.out.println("Original String : " + str);
            //converting string variable to String Builder object
			StringBuilder sb = new StringBuilder(str);
            //reversing the string and printing
			System.out.println("Reverse order : " + sb.reverse());
			fr.close();
		} catch (Exception e) {
			System.out.println("error");
		}
	}
}
```

输出：[![在此处输入图像描述](https://i.stack.imgur.com/0k6QZ.png)](https://i.stack.imgur.com/0k6QZ.png)

# php - 动态创建的复选框计算，未正确显示

> ID：16138381
> 
> 赞同：2
> 
> 时间：2013-04-22T02:04:56.733
> 
> 标签：php, javascript, codeigniter

我有一个 javascript 函数，它通过 drop_down 的选择创建 Checkbox。当我单击添加按钮时，系统将创建带有值的复选框。

```
function addElement() 
    {

      var e= document.getElementById('top-addon');
      var tops = e.options[e.selectedIndex].text;
      var tops_value=e.options[e.selectedIndex].value;

     // alert(tops_value);

      var ni = document.getElementById('myDiv');

      num += 1;
      //var newdiv = document.createElement('div');

      var countedName = num;

     // newdiv.setAttribute('id',Name);

        var x = document.createElement("input");
        x.type = "checkbox";
        x.name = "toppings[]";
        x.setAttribute('id',countedName);
        x.checked = true;
        x.value = tops_value;   
        //var inner_text = tops + '<a href=\'#\' onclick=\'removeElement('+countedName+')\'> [x] </a>';
        //var text= document.createTextNode(inner_text);
        x.innerHTML=tops;

        ni.appendChild(x);
        //ni.appendChild(inner_text);
    } 
```

我做了一些截图来解释我目前的问题。请查看我的截图以获得更清晰的图片。

![在此处输入图像描述](https://i.stack.imgur.com/7S4KZ.png)

就像这样，对于像冰淇淋这样的项目，客户可以添加许多浇头，例如坚果、果冻等。

然后我有另一个问题。创建的复选框没有显示。我只能看到方形框

请在下面查看我的第二张附加图片。对我来说似乎没问题。但我看不到任何描述文字。 ![在此处输入图像描述](https://i.stack.imgur.com/pb3Xo.png)

我想要实现的是

1.  显示选择
2.  计算项目，它们将生成检查值。我已经实现了删除生成的浇头的代码。所以我想计算生成项目的总价值，它们应该是可变的。

例子。如果删除生成的项目。总浇头应该减少。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:41.160

对于您的第一个问题：为了显示复选框的文本，您应该将复选框放在标签内。这是为您修改的代码

```
function addElement() 
{

    var e= document.getElementById('top-addon');
    var tops = e.options[e.selectedIndex].text;
    var tops_value=e.options[e.selectedIndex].value;

    // alert(tops_value);

    var ni = document.getElementById('myDiv');

    num += 1;
    //var newdiv = document.createElement('div');

    var countedName = num;

    // newdiv.setAttribute('id',Name);

    var x = document.createElement("input");
    x.type = "checkbox";
    x.name = "toppings[]";
    x.setAttribute('id',countedName);
    x.checked = true;
    x.value = tops_value;   
    //x.innerHTML=tops; We don't need to set text to checkbox.

    /* These lines are added */
    var label = document.createElement("label");

    label.appendChild(x);

    var span = document.createElement("span");
    span.innerText = tops;

    label.appendChild(span);

    /* End of added lines */

    // Beware that we are adding label to div, instead of checkbox.
    ni.appendChild(label);
} 
```

对于您的第二个问题：要计算购物车的总数，您需要定义一个实现这种伪代码的函数（假设为 calculateTotal）：

```
function calculateTotal
begin
        get all checkboxes under myDiv
        for each selected check box
        begin
                get check box id
                get substring of id, after comma (",")
                add substring (price) to total
        end
end 
```

每当用户单击添加项目按钮、删除项目按钮和复选框的 onChange 事件触发时，都应触发此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:22:41.650

我想这个答案应该解决您的复选框文本问题：[https ://stackoverflow.com/a/10143276/1492792](https://stackoverflow.com/a/10143276/1492792)

# javascript - 弄清楚这个正则表达式字符串替换的作用

> ID：16138384
> 
> 赞同：2
> 
> 时间：2013-04-22T02:05:13.500
> 
> 标签：javascript, regex, replace

使用此代码...

```
var url = 'http://www.example.com/this/example/:id?q=help';
url = url.replace(/\\:/g, ':').replace(/\/?#$/, '').replace(/\/*$/, ''); 
```

每个替换应该做什么？

我意识到它可能对给定的字符串没有任何影响，但从理论上讲，它应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:08:48.550

只需遵循链：

1.  替换所有出现的`\:`by `:`。

2.  删除尾随片段哈希，包括其前面的可选斜杠。

3.  删除任何尾部斜杠。

# c# - MessageBox.Show 到变量

> ID：16138387
> 
> 赞同：0
> 
> 时间：2013-04-22T02:05:31.897
> 
> 标签：c#, variables, foreach, messagebox

我有一个 for each 循环，如下所示：

```
foreach (PCparts parts in items)
{
    MessageBox.Show(parts.PartName);
} 
```

循环按以下顺序返回 4 个值：MOBO、GFX、CPU 和 RAM

现在我的问题是，有没有一种方法可以将一个特定的值存储到一个变量中，或者甚至只是将它显示在标签等其他地方？例如，将 GFX 存储到以后可以使用的变量中。

如果您还没有注意到，我将自己归类为新手，所以请不要太苛刻。我在尝试学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:16:37.243

由于您已`items`定义为`List<PCParts>`，因此您可以随时访问列表中的对象，只要`items`在范围内即可。

因此，例如，如果您有一个标签（`lblName`为了示例而调用它），那么您可以这样做：

```
lblName.Text = items[1].PartName; 
```

`items[1]`列表中的第二个`PCParts`（GFX）在哪里。

从本质上讲，只要您拥有列表，您就已经存储了数据并且可以检索它。如果您正在寻找一个特定的项目，您将需要知道您正在寻找的项目。例如，在你的 for each 循环上构建：

```
for each (PCpart part in items)
{

    if (part.PartName == "GFX")
    {
        lblName.Text = part.PartName;
    }
} 
```

您还可以使用类似的逻辑将选定的值存储在变量中以供进一步使用：

```
string selectedPartName = items[1].PartName; 
```

如果不知道更多关于您正在尝试做什么，很难给出更明确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:21:40.530

为了给 Tim 一个不同但同样有用的答案，如果它是 a而不是 a ，`PCParts`将更适合这种操作。您可以使用类似的表达式访问与键对应的值。[`Dictionary`](http://msdn.microsoft.com/en-AU/library/xfhwa508.aspx)`List``"GFX"``items["GFX"]`

# c# - 在运行 Mono 的 C# 应用程序中更改当前 Linux 用户？

> ID：16138389
> 
> 赞同：7
> 
> 时间：2013-04-22T02:05:45.257
> 
> 标签：c#, linux, mono

我正在为 Linux 系统开发一个库（CLI 程序集）。我想为图书馆的用户提供一种切换当前有效用户和组的方法。主要原因是提供访问控制（某些操作只允许特定用户），其次是允许以特定用户身份修改文件系统。

我已经确定了两种可能的方法：

**1\. 以 root 身份启动 Mono 并 P/invoke libc 例程，如 seteuid 等**

通过设置 /usr/bin/mono 的 s 位然后从我的库中设置有效用户（即在 Mono 运行时启动之后）实现了这一点，导致 Mono 在终止时崩溃：

```
ERROR:handles.c:1940:_wapi_handle_update_refs: assertion failed: (thr_ret == 0)

Native stacktrace:

mono2 [0x8bb6c]
  /lib/libc.so.6(__default_rt_sa_restorer_v2+0) [0x4020a5a0]
  /lib/libc.so.6(gsignal+0x40) [0x4020920c] 
```

从逻辑上讲，我理解更改 Mono 的有效用户可能会出现问题，因为它正在管理许多资源，并且这样做可能会导致问题。

**2\. 在本机守护进程中处理身份验证，并且不更改 Mono 有效用户**

我不确定是否有任何现成的解决方案，但从概念上讲，我正在考虑以 root 身份运行一个守护进程，该库将与之通信（例如通过 POSIX 消息队列）以执行身份验证. 守护进程以 root 身份运行，以便能够读取 /etc/shadow。Mono 的有效用户不会改变，但我的库将跟踪进程作为哪个“等效用户”运行。不幸的是，这种方法不允许库以不同的用户身份访问文件系统。

**问题**

我是否坚持第二个选项，或者有什么方法可以真正改变 Mono 进程的有效用户？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T10:23:20.440

以下适用于我的盒子:)

**编辑＃1：**这应该以root身份执行。（摘自：http: [//msdn.microsoft.com/en-us/library/w070t6ka.aspx](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)）

```
using System;
using System.Security.Permissions;
using System.Security.Principal;

public class ImpersonationDemo
{
// Test harness. 
// If you incorporate this code into a DLL, be sure to demand FullTrust.
[PermissionSetAttribute(SecurityAction.Demand, Name = "FullTrust")]
public static void Main (string[] args)
{
    try {
        // Check the identity.
        Console.WriteLine ("Before impersonation: " + WindowsIdentity.GetCurrent ().Name);

        // Impersonate a user
        using (WindowsIdentity newId = new WindowsIdentity("Your user name"))
        using (WindowsImpersonationContext impersonatedUser = newId.Impersonate())
        {
            // Check the identity.
            Console.WriteLine ("After impersonation: " + WindowsIdentity.GetCurrent ().Name);
        }

        // Releasing the context object stops the impersonation 
        // Check the identity.
        Console.WriteLine ("After closing the context: " + WindowsIdentity.GetCurrent ().Name);
    } catch (Exception ex) {
        Console.WriteLine ("Exception occurred. " + ex.Message);
    }
}
} 
```

# javascript - 为 node.js v.0.8 配置文件丢失

> ID：16138390
> 
> 赞同：6
> 
> 时间：2013-04-22T02:06:00.687
> 
> 标签：javascript, linux, node.js, compilation, installation

`wget`我刚刚从[http://nodejs.org/dist/v0.8.11/node-v0.8.11-linux-x86.tar.gz](http://nodejs.org/dist/v0.8.11/node-v0.8.11-linux-x86.tar.gz)获取节点

我跑了`sudo tar -zxf node-v0.8.11-linux-x86.tar.gz`，然后`cd`进入了`node-v0.8.11-linux-x86`。但是`Configure`文件不存在，所以当我运行时`./configure`出现`no such file or directory`错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T02:22:26.673

您已经下载了一个二进制存档。有了它，你应该会在子目录中找到`node`、`npm`和`node-waf`已经预编译的。`bin`

如果要从源代码构建，则需要下载：

[http://nodejs.org/dist/v0.8.11/node-v0.8.11.tar.gz](http://nodejs.org/dist/v0.8.11/node-v0.8.11.tar.gz)

# php - 无循环按键对多维数组的值求和

> ID：16138395
> 
> 赞同：42
> 
> 时间：2013-04-22T02:07:19.317
> 
> 标签：php, mysql, arrays, multidimensional-array

我有这个：

```
Array (
    [0] => Array ( [f_count] => 1 [uid] => 105 ) 
    [1] => Array ( [f_count] => 0 [uid] => 106 ) 
    [2] => Array ( [f_count] => 2 [uid] => 107 ) 
    [3] => Array ( [f_count] => 0 [uid] => 108 ) 
    [4] => Array ( [f_count] => 1 [uid] => 109 ) 
    [5] => Array ( [f_count] => 0 [uid] => 110 ) 
    [6] => Array ( [f_count] => 3 [uid] => 111 )
) 
```

我需要的是：`7`“，这是`f_count`列的总和。

我已经尝试了几个小时来解决这个问题。我认为[`array_sum()`](http://php.net/manual/en/function.array-sum.php)会起作用，但不适用于多维数组。因此，我尝试弄清楚如何通过或拼接或其他任何方式隔离`f_count`s ，但每个解决方案似乎都涉及一个循环。我已经弄乱了,和其他人无济于事。我还没有找到适用于多维数组的函数。`unset()``foreach``array_map``array_walk`

我正在运行 PHP 5.4。

`foreach`有人可以告诉我如何在没有循环的情况下对该列求和吗？

如果有帮助，`f_count`值将永远不会高于`100`，并且`uid`值将始终大于`100`。

* * *

或者，如果有一种方法可以以不同的方式运行我的查询以使数组不是多维的，那显然也可以。

```
$query = "SELECT f_count, uid FROM users WHERE gid=:gid";
...
$array = $stmt->fetchAll(); 
```

我正在使用 PDO。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-06-25T15:12:01.373

`array_column`在 php 5.5+ 中，您可以`array_sum`像这样使用：

```
 $value = array_sum(array_column($arr,'f_count')); 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-04-22T02:11:41.907

您需要将其与[`array_map()`](http://php.net/array_map)首先选择`f_count`列：

```
array_sum(array_map(function($item) { 
    return $item['f_count']; 
}, $arr)); 
```

当然，在内部，这执行了一个双循环；只是您在代码中看不到它。你可以[`array_reduce()`](http://php.net/array_reduce)用来摆脱一个循环：

```
array_reduce($arr, function(&$res, $item) {
    return $res + $item['f_count'];
}, 0); 
```

但是，如果速度是唯一的兴趣，`foreach`仍然是最快的：

```
$sum = 0;
foreach ($arr as $item) {
    $sum += $item['f_count'];
} 
```

这要归功于您使用的变量的“局部性”，即没有用于计算最终总和的函数调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-10T10:30:39.900

对于这些类型的情况，foreach 循环是最好的选择，但是如果您必须在一个页面上多次执行此操作，那么您应该将 foreach 循环放在一个函数中，以便您的代码保持干净

```
function sum_index($arr, $col_name){
    $sum = 0;
    foreach ($arr as $item) {
        $sum += $item[$col_name];
    }
    return $sum;
} 
```

**编辑**

经过大量搜索后，我发现`array_column`php 5.5 + 中存在该函数，可以将单列的所有值作为数组获取。

对于具有较低版本的用户，如果您还想要所有值的总和，您可以使用以下函数并使用数组 sum 调用它。

```
//to get all values of single column from multidimensional array, this function exist in php 5.5 or greater.
if(!function_exists("array_column"))
{
    function array_column($array,$column_name)
    {
        return array_map(function($element) use($column_name){return $element[$column_name];}, $array);
    }
} 
```

如果要获取单列的所有值，请像这样调用上面的函数：

```
$newArray = array_column($array,$column_name); 
```

如果您想要单列的所有值的总和，请使用以下代码：

```
$newArraySum = array_sum(array_column($array,$column_name)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-16T19:17:31.620

> 或者，如果有一种方法可以以不同的方式运行我的查询以使数组不是多维的，那显然也可以。
> 
> ```
> $query = "SELECT f_count, uid FROM users WHERE gid=:gid"; 
> ... 
> $array = $stmt->fetchAll(); 
> ```
> 
> 我正在使用 PDO。

是的，还有另一种方法可以以不同的方式运行您的查询。您可以使用聚合函数直接在查询[`SUM`](https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html#function_sum)中获取所有的总和。`f_count`您可以将其与`$stmt->fetchColumn()`获取第一行的第一列（这将是总和）的值（这将是唯一的行，因为我们使用了聚合函数）。

这是一个如何执行此操作的示例：

```
$query = "SELECT SUM(f_count) FROM users WHERE gid=:gid";
$stmt = $pdo->prepare($query);
$stmt->execute(array(':gid' => 'yoursearchvalue'));
$sum = $stmt->fetchColumn(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-29T04:51:59.390

由于您将 PHP 5.4 与 PDO 一起使用，因此可能还有另一种方法（在 PHP 5.1+ 中可用）：

*   使用带有的PDO`fetchAll()`函数，使用 0 索引的列号作为.`PDO::FETCH_COLUMN``fetch_style``fetch_argument`

根据您的示例，它可能是：

```
$query = "SELECT f_count, uid FROM users WHERE gid=:gid";
...
$array_fcount = $stmt->fetchAll(PDO::FETCH_COLUMN, 0); 
```

现在使用该`array_sum`函数对数组的值求和：

```
$fcount_sum = array_sum($array_fcount); 
```

[您还可以在http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)查阅 PHP 文档

希望这会有所帮助，并且性能可能比循环更好！正如其他答案中已经提到的，在 PHP 5.5 及以后的版本中，您`array_column()`可以`$array_fcount`直接从另一个数组中获取。

# batch-file - 批量更改目录到新目录

> ID：16138403
> 
> 赞同：0
> 
> 时间：2013-04-22T02:08:07.590
> 
> 标签：batch-file, directory, copy, mkdir

我有一个批处理脚本，可以创建一个带有时间和日期戳的新目录；

```
mkdir "C:\Program Files (x86)\CraftBukkit\World Backup\CraftBukkit World - %date:/=.% - %time::=.%" 
```

然后我想让脚本将三个文件夹复制到该目录中。我可以很容易地用 xcopy 复制它们，我只是不知道如何提取我刚刚创建的新目录以显示 xcopy 将三个文件夹放在哪里。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:59:32.333

您可以首先将目录名称存储在一个变量中，使用该变量创建一个目录，然后再次将该变量用于 xcopy。

# javascript - Isotope Metafizzy：如何检查元素是否已被初始化为同位素容器？

> ID：16138404
> 
> 赞同：4
> 
> 时间：2013-04-22T02:08:08.193
> 
> 标签：javascript, jquery, jquery-isotope

插件：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)

我希望能够检查一个元素是否已经被初始化为同位素容器。EG 如果元素没有，以下代码将导致错误消息：

```
 $(".div-class").isotope('destroy') 
```

产量：

```
 cannot call methods on isotope prior to initialization; attempted to call method 'destroy' 
```

我希望能够写出类似的东西：

```
 if ($(".div-class").isotope('already-initialized')) {
     // some other code
 } 
```

我在同位素文档上找不到这样的方法。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-07-03T12:02:53.490

该类别不再由同位素添加。我是这样解决的：

```
if($(".div-class").data('isotope')) {

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T02:40:44.063

因为我注意到这个插件会给`isotope`容器添加一个类，你可以试试这个代码：

```
if ($(".div-class").hasClass('isotope')) {
 // some other code
} 
```

# python - 用 Python 制作扫雷器，我需要帮助更改图块

> ID：16138413
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:09:17.163
> 
> 标签：python, debugging, minesweeper

我正在尝试在 Python 中重新创建扫雷器，并且当我尝试在 IDLE 中运行代码时，我现在的问题是，当用户输入他们的坐标时，我如何才能将位置从“X”变为“-”，即一块空白的瓷砖。此外，我不介意如何改进我的代码的任何提示。谢谢！

```
import random

Field = [
LA=["X","X","X","X","X","X","X"],
LB=["X","X","X","X","X","X","X"],
LC=["X","X","X","X","X","X","X"],
LD=["X","X","X","X","X","X","X"],
LE=["X","X","X","X","X","X","X"],
LF=["X","X","X","X","X","X","X"],
LG=["X","X","X","X","X","X","X"]
]

print (Feild)
print("Select row starting from top = 1 and column from left = 0")
numa = random.randint(1,7)
numb = random.randint(0,6)
MINE = "O"

row=9
column = 9
one = "1"
blank = "-"

while row != numa and column != numb:
    print (Field)
    print("Enter a row")
    row = raw_input('Please select a row from rows 1 - 7: ')
    column = raw_input('Please enter a column from columns 1 - 7: ')
    columA = int(column) + 1
    columB = int(column) - 1
    rowA = row + 1
    rowB = row - 1
    if rowA == numa and column  == numb:
        if row == 1:
            del LA[column]
            LA.insert(column, one)
        if row == 2:
            del LB[column]
            LB.insert(column, one)     
        if row == 3:
            del LC[column]
            LC.insert(column, one)   
        if row == 4:
            del LD[column]
            LD.insert(column, one) 
        if row == 5:
            del LE[column]
            LE.insert(column, one)         
        if row == 6:
            del LF[column]
            LF.insert(column, one)  
        if row == 7:
            del LG[column]
            LG.insert(column, one)
    elif rowB == numa and column  == numb:
        if row == 1:
            del LA[column]
            LA.insert(column, one)
        if row == 2:
            del LB[column]
            LB.insert(column, one)     
        if row == 3:
            del LC[column]
            LC.insert(column, one)   
        if row == 4:
            del LD[column]
            LD.insert(column, one) 
        if row == 5:
            del LE[column]
            LE.insert(column, one)         
        if row == 6:
            del LF[column]
            LF.insert(column, one)  
        if row == 7:
            del LG[column]
            LG.insert(column, one)       
    elif row == numa and columA  == numb: 
        if row == 1:
            del LA[column]
            LA.insert(column, one)
        if row == 2:
            del LB[column]
            LB.insert(column, one)     
        if row == 3:
            del LC[column]
            LC.insert(column, one)   
        if row == 4:
            del LD[column]
            LD.insert(column, one) 
        if row == 5:
            del LE[column]
            LE.insert(column, one)         
        if row == 6:
            del LF[column]
            LF.insert(column, one)  
        if row == 7:
            del LG[column]
            LG.insert(column, one)
    elif row  == numa and columB == numb:
        if row == 1:
            del LA[column]
            LA.insert(column, one)
        if row == 2:
            del LB[column]
            LB.insert(column, one)     
        if row == 3:
            del LC[column]
            LC.insert(column, one)   
        if row == 4:
            del LD[column]
            LD.insert(column, one) 
        if row == 5:
            del LE[column]
            LE.insert(column, one)         
        if row == 6:
            del LF[column]
            LF.insert(column, one)  
        if row == 7:
            del LG[column]
            LG.insert(column, one)        
    else:
        if row == 1:
            del LA[column]
            LA.insert(column, blank)
        if row == 2:
            del LB[column]
            LB.insert(column, blank)     
        if row == 3:
            del LC[column]
            LC.insert(column, blank)   
        if row == 4:
            del LD[column]
            LD.insert(column, blank) 
        if row == 5:
            del LE[column]
            LE.insert(column, blank)         
        if row == 6:
            del LF[column]
            LF.insert(column, blank)  
        if row == 7:
            del LG[column]
            LG.insert(column, blank) 

if row == 1:
    del LA[column]
    LA.insert(column, MINE)
if row == 2:
    del LB[column]
    LB.insert(column, MINE)     
if row == 3:
    del LC[column]
    LC.insert(column, MINE)   
if row == 4:
    del LD[column]
    LD.insert(column, MINE) 
if row == 5:
    del LE[column]
    LE.insert(column, MINE)         
if row == 6:
    del LF[column]
    LF.insert(column, MINE)  
if row == 7:
    del LG[column]
    LG.insert(column, MINE)
print (Field)
print("Game over") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:24:26.367

你得到一个错误的说法`TypeError: cannot concatinate 'str' and 'int' objects`吗？

您需要修复这些行

```
rowA = row + 1
rowB = row - 1 
```

`row`你忘了投到`int`.

实际上，查看您的代码，我认为您应该`int`在输入时进行转换。

```
row = int(raw_input()) 
```

# html - CSS导航栏不跨越

> ID：16138414
> 
> 赞同：1
> 
> 时间：2013-04-22T02:09:31.037
> 
> 标签：html, css

如何让我的导航栏跨越我的网页？我把它设置为850px。容器 div 设置为 850px。

这是链接和代码： http: [//matthewtbrown.com/jeffandcricketquilt/index2.html](http://matthewtbrown.com/jeffandcricketquilt/index2.html)

```
nav {
width:850px;
}
nav li {
                font-family: 'bitterregular';
                font-size:16px;
            }
    nav ul {
                background: #000; /* Old browsers */
                list-style: none;
                position: relative;
                display: inline-table;
            }
    nav ul:after {
                content: ""; clear: both; display: block;
            }
    nav ul ul {
                display: none;
            }

    nav ul li:hover > ul {
                display: block;
            }
    nav ul li {
                float: left;
                color:#fff;
            }

    nav ul li:hover a {
                color:#FFF;
            }
    nav ul li a {
                display: block;
                padding: 10px 40px;
                color:#FFF;
                text-decoration: none;
            }
    nav ul ul {
                background: #FFF;
                border-radius: 0px; 
                padding: 0;
                position: absolute; 
                top: 100%;
            }
    nav ul ul li {
                float: none; 
                border-top: 1px solid #444;
                border-bottom: 1px solid #444;
                border-color:#FFF;                  
                position: relative;
                background-color:#000;
                font-size:12px;
            }
    nav ul ul li a {
                padding: 8px 40px;
                color:#FFF;             }   
    nav ul ul li a:hover {
                background-color:#000;
                color:#999;
                                }
    nav ul  li a:hover {
                background-color:#000;
                color:#999;
                                }
    nav ul ul ul {
                position: absolute; left: 100%; top:0;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:18:48.153

您`nav`是 850 像素，但您的黑色背景 ( `ul`) 不是。

解决方法：`nav`改为设置黑色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:14:30.413

如果你想要它 100% 的容器宽度，只需将宽度分配`ul`为`100%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:20:07.523

`<ul>`不会自动填充 850 像素容器的宽度`<div>`。将`<ul>`宽度设置为 100% 即可。

```
ul {
    width: 100%;
} 
```

# objective-c - 滚动时 NSScrollview 项目无法正确显示

> ID：16138415
> 
> 赞同：1
> 
> 时间：2013-04-22T02:09:35.693
> 
> 标签：objective-c, macos

我目前正在使用 NSScrollView ，当我滚动其中的按钮时，它会重新显示在它下面。我怎样才能解决这个问题。

这是问题的显示：![在此处输入图像描述](https://i.stack.imgur.com/JBcIm.png)

```
int x = 00; //position x
    int y = 00; //pssition y

    int width = 100;
    int height = 40;

    NSButton* a = [[NSButton alloc] initWithFrame:NSMakeRect(x, y, width, height)];
    a.title = @"Scene";
    //[a setButtonType:<#(NSButtonType)#>]; //Set what type button You want
    [a setBezelStyle:NSSquareLineCapStyle]; //Set what style You want

    [self.box addSubview:a]; 
```

现在，我知道按钮可以正确显示，看起来当我滚动时，它正在重绘。我根本不希望显示第一个下方的底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:53:49.847

我可能在这方面还差得很远，但它可以与我从教程中获得的一行代码一起使用。一场乒乓球比赛。这样球在移动时会在屏幕上重新绘制。该行是：

```
[NSTimer scheduledTimerWithTimeInterval:0.01 
                                 target:self 
                               selector:@selector(gameLoop) 
                               userInfo:nil 
                                repeats:YES]; 
```

希望这有帮助！如果不是希望它给了你更多的想法？

# java - 将文本文件插入二维数组

> ID：16138423
> 
> 赞同：1
> 
> 时间：2013-04-22T02:10:34.787
> 
> 标签：java, file-io, arraylist, multidimensional-array

我想读取一个文本文件并将其插入二维双数组。我有这段代码，但第一个问题是它不读取最后一列，第二个问题是它只返回我的文本文件的第一行。例如，如果文本文件是

```
1.1,2.1,3.1
2.1,1.1,4.1
1.3,3.2,5.1 
```

它返回：

```
{1.1 2.1} 
```

我应该如何解决它？

```
BufferedReader match_dataset = new BufferedReader(new FileReader("test.txt"));
Scanner src = new Scanner(match_dataset);
ArrayList<Double> lines = new ArrayList<Double>();
src.useDelimiter(",");

while (src.hasNextDouble()) {
    lines.add(src.nextDouble());
}
Double[] temp_match = new Double[lines.size()];
lines.toArray(temp_match); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:17:45.973

双数组的语法错误。应该是双后的两个括号 [][]

# css - 使用modernizer，我怎样才能为css3动画提供回退，回退到flash？

> ID：16138424
> 
> 赞同：0
> 
> 时间：2013-04-22T02:10:59.707
> 
> 标签：css, html, modernizr

我是modernizer的新手，如果不支持css动画并显示flash副本，我不明白如何隐藏我的css动画。我明白我用

```
if (Modernizer.cssanimation) 
```

但不明白 if 语句中需要什么代码结构。

非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T02:38:03.043

您不需要在 JavaScript 中执行此操作。您可以使用您的 CSS 代码。Modernizr 将 css 类添加到`<html/>`标签中以显示是否支持某个功能。在动画的情况下，它是`cssanimations`. 在modernizr 完成他的工作之后，Firefox 20 中的 HTML 标签看起来像

```
<html class=" js no-flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"> 
```

假设你有一个容器，里面有一个 flash 对象：

```
<div id="container">
    <div id="flash">Here is the Flash animation</div><!-- <object .../> -->
    <div id="css">Here is the CSS animation</div>
</div> 
```

然后，您可以使用默认样式为不支持 CSS 动画的浏览器显示 Flash 电影

```
#css {
    display: none;
} 
```

并使用类覆盖样式以显示css动画`cssanimations`：

```
.cssanimations #flash {
    display: none;
}
.cssanimations #css {
    display: initial;
} 
```

[请参阅此演示](http://jsfiddle.net/JdpN5/)并使用 IE8 或更低版本以及 Chrome 等兼容浏览器对其进行测试。IE 显示“这是 Flash 动画”，而 Chrome 显示“这是 CSS 动画”。

当然，这仅在启用 JavaScript 时才有效。使用禁用的 JavaScript，即使在现代浏览器中，您也会看到 Flash 动画。

# ruby-on-rails - Backbone-on-rails/jasmine-rails - 主干未定义

> ID：16138427
> 
> 赞同：1
> 
> 时间：2013-04-22T02:11:22.403
> 
> 标签：ruby-on-rails, ruby, backbone.js, jasmine

我正在尝试使用 jasmine-rails gem 为我的backbonejs 应用程序（使用backbone-on-rails gem）设置测试。

我有以下内容`jasmine.yml`：

```
src_files:
 - "**/*.{js,coffee}"

stylesheets:

helpers:
  - "helpers/**/*.{js,coffee}"

spec_files:
  - "**/*[Ss]pec.{js,coffee}"

src_dir: "app/assets"

spec_dir: spec/javascripts

asset_paths:
 - "vendor/assets/javascripts 
```

运行规范，我在我的 Javascript 控制台中收到以下错误：

**未捕获的 ReferenceError：未定义主干**

它似乎无法加载主干本身......

有什么建议么？

# php - 插入具有相同唯一 ID 的多行

> ID：16138432
> 
> 赞同：2
> 
> 时间：2013-04-22T02:12:06.033
> 
> 标签：php, mysql

我正在使用一个查询插入多行，显然，ID 列会自动递增每一行。我想创建另一个 ID 列，并使查询期间插入的所有行的 ID 保持不变。因此，如果我在一次查询中插入 10 行，我希望所有 10 行的 id 为“1”。如何才能做到这一点？谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T02:20:05.773

如果我正确理解了您的问题，您想`ID`为特定的一组`INSERT`语句提供一个。

假设你有这个模式

```
CREATE TABLE TableName
(
    RecordID INT AUTO_INCREMENT PRIMARY KEY,
    OtherColumn VARCHAR(25) NOT NULL,
    GroupID INT NOT NULL
) 
```

为此，您可以有两个语句：

1.) 获取最后一个`GroupID`并将其增加`1`.

```
SELECT COALESCE(MAX(GroupID), 0) + 1 AS newGroupID FROM TableName 
```

2.) 执行后，将值存储在变量中。将此变量用于所有插入语句，

```
$groupID = row['newGroupID'];
$insert1 = "INSERT INTO TableName(OtherColumn, GroupID) VALUES ('a', $groupID)";
$insert2 = "INSERT INTO TableName(OtherColumn, GroupID) VALUES ('b', $groupID)";
$insert3 = "INSERT INTO TableName(OtherColumn, GroupID) VALUES ('c', $groupID)"; 
```

**更新 1**

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/285e1/1)

# java - 如何从 php 套接字客户端每次在 java 服务器套接字中读取一个字符串

> ID：16138433
> 
> 赞同：0
> 
> 时间：2013-04-22T02:12:20.540
> 
> 标签：java, php, sockets

我正在尝试从 java 服务器套接字中的 php 客户端套接字读取字符串。我在 php 套接字客户端中写了两个字符串

```
$this->socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)
socket_connect($this->socket, $this->host, $this->port)
$text = 'SGSA:PRINT:RECIBO';
socket_write($this->socket, $text,  strlen($text));
$text = 'Mensagem para imprimir';
socket_write($this->socket, $text,  strlen($text)); 
```

但是，当我像下面这样在 java 中阅读它时

```
Socket clientSocket = server.accept();
InputStream in = clientSocket.getInputStream();
String msg;
try {
   msg =  IOUtils.toString( in );
} finally {
   IOUtils.closeQuietly(in);
} 
```

它一次读取两个字符串。

```
run-single:
SGSA:PRINT:RECIBOMensagem para imprimir 
```

如何每次读取一个字符串？

# javascript - jquery背景色效果

> ID：16138434
> 
> 赞同：0
> 
> 时间：2013-04-22T02:12:20.750
> 
> 标签：javascript, jquery, css

我正在尝试创建一个从左到右改变背景颜色的效果。

我创建了这个：http: [//jsfiddle.net/kT95d/58/](http://jsfiddle.net/kT95d/58/)

```
 <style>
#div1{
height:200px;
width:200px;
background-color:green;
float:left;
}

#back {
width:0px;
height:200px;
background-color:Gray;
display: block;
} 
```

```
<script>
    $('#div1').mouseover(function (){
    $('#back').animate({width: '200px'}, 1000);
});
</script>
<div id="div1">
<div id="back">
That was amazing!
</div>
</div> 
```

但是，我想要水平的文本以及你如何看到，这是垂直的，效果后变为水平的。我不知道这是否是最好的方法。可以帮我？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:28:07.510

干得好。我相信这就是你想要的：

[http://jsfiddle.net/WVWKE/](http://jsfiddle.net/WVWKE/)

变化在这里：

```
<div id="div1">
    <div style="position:absolute">That was amazing!</div>
    <div id="back">
    </div>
</div> 
```

之前的问题是文本在您的零宽度 div 内，因此它会分成多行以尝试适应。然后，当您将宽度设置为 200 时，文本有空间再次扩展。

在这里，我们将文本从动画背景 div 中移出到父 div 中，然后我们将`position:absolute`其从流中取出，这样它就不会占用空间。您当然可以将该内联样式移动到您的 CSS 中，并且可能应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:29:00.077

```
<style>
    #div1{
        margin-top: -200px;
        height:200px;
        width:200px;
        background-color:green;
    }

    #back {
        width:0px;
        height:200px;
        background-color:Gray;
        display: block;
    }
</style>
<script>
    $('#div1').mouseover(function (){
        $('#back').animate({width: '200px'}, 1000);
    });    
</script>
<div id="text">
    That was amazing!
</div>
<div id="div1">
    <div id="back">
        &nbsp;
    </div>
</div> 
```

# algorithm - 使用 MST 为 TSP 找到最有效的上限

> ID：16138442
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:14:29.580
> 
> 标签：algorithm, graph, tree, minimum-spanning-tree, traveling-salesman

我很好奇什么最有效的方法是使用 MST 找到 TSP 的最佳（或接近最佳）上限。我正在尝试优化我的算法以提高速度，但是在找到 MST 后，我在算法上计算“好”边界时遇到了麻烦。我知道一个基本界限是`2 x MST length`，但这似乎不是我们能做的最好的。任何参考或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:59:40.510

您可能应该将 MST 转换为游览，这将在线性时间内为您提供小于 2 * MST 长度的界限。MST 还有一个扩展，称为 Christofide 算法，可能也值得研究。

建议查看[TSP heuristics](http://en.wikipedia.org/wiki/Traveling_salesman_problem#Heuristic_and_approximation_algorithms)的 Wikipedia 页面。

# android - 如何设置 WebView 组件中显示的大小？

> ID：16138444
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:14:35.603
> 
> 标签：android

在PC浏览器上，显示效果很好。但是在Andriod webview中打开，显示变得非常小。如何设置 WebView 组件中显示的大小？

手机显示：

![在此处输入图像描述](https://i.stack.imgur.com/4ByO0.jpg)

电脑显示器：

![在此处输入图像描述](https://i.stack.imgur.com/9YUld.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:12:35.577

我认为问题不在于android，而在于Web。我认为您可以将其添加到您的网络 html 中：

```
<head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0,
          maximum-scale=1.0, user-scalable=no">
</head> 
```

# java - nullpointerexception错误删除节点

> ID：16138447
> 
> 赞同：0
> 
> 时间：2013-04-22T02:15:00.410
> 
> 标签：java, linked-list, nodes

我被困在这条路上，它真的开始让我感到沮丧。我认为除了这一种方法外，我的一切工作正常。

当我从我的 LL 中删除一个节点时，我在下一次尝试时得到一个空指针异常，我不知道是什么。

```
public void timeSlice(int cpuTime){
    for(Node curr=head; curr.getNext()!=head; curr=curr.getNext()){
        curr.time=curr.time-cpuTime;
        System.out.print("<" + curr.pid + ", " + curr.time +">" + " ");
        //if the time remaining <= 0 then remove the node
        if(curr.time<=0){
            System.out.println("\nProcess " + curr.pid + " has finished, and is now being terminated");
            remove(curr);
        }
    }
}//end timeSlice 
```

它发生在删除并重新启动该方法之后。我认为这是因为我刚刚删除了 curr，但我不是 100% 确定。

```
public void remove(Node node){
    if(size == 0){
        return; 
    }
    else if(size == 1){
        removeFirst();
    }
    else{
        Node curr;
        for(curr=head; curr.getNext()!=node; curr=curr.getNext()){
        ;
        }
        curr.setNext(curr.getNext().getNext());
        node.setNext(null);
    }
        size --;
}//end remove 
```

现在当前的测试是它将删除倒数第二个节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:22:32.500

这可能是因为 head == null 而发生的。下次发布错误堆栈跟踪，您将有更高的机会获得更准确的答案。

如果 head 为 null，则将 curr 设置为 null，然后在 null 上调用“getNext()”方法，这将导致 nullPointerException。至少，这是我最好的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:37:23.003

一旦`remove()`被调用`timeSlice()`，`curr`变量 in`timeSlice()`将指向被移除的节点并`curr.getNext()`返回`null`which cause `NullPointerException`。

正如@Catherine 建议的那样，您应该保留对前一个节点的引用，并在列表的头部使用一个虚拟节点来使其使用更清晰。（对不起，我没有足够的代表来投票。）

```
// head.getNext() == head
Node head = new Node();

public void timeSlice(int cpuTime) {
    Node prev = head; // A dummy at head.
    Node curr = prev.getNext();
    for ( ; curr != head; prev = curr, curr = curr.getNext()) {
        // ...
        if (/* remove? */) {
            removeNext(prev);
            curr = prev;
        }
    }
}

public void removeNext(Node node) {
    node.setNext(node.getNext().getNext());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:38:03.947

在你打电话后`remove`，`curr`' `curr`s`getNext()`会回来的`null`。然后你进入循环的下一次迭代，`null`值为`curr`.

`null`即使您修复了该问题，您也应该进行检查。如果您的节点为空，为什么要进入循环？

# c# - C#异常读取注册表：空引用异常

> ID：16138448
> 
> 赞同：1
> 
> 时间：2013-04-22T02:15:14.120
> 
> 标签：c#, registry, nullreferenceexception

我正在尝试开发一种方法来读取机器上安装的程序。

```
public void refreshProgramsFromWindows () {
            string SoftwareKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Installer\\UserData\\S-1-5-18\\Products";
            RegistryKey rk = default(RegistryKey);
            rk = Registry.LocalMachine.OpenSubKey(SoftwareKey);
            //string skname = null;
            string sname = string.Empty;

            // New list from scratch
            this.installedSoftwareList = new List<software>();

            // Object software info
            software aSoftware = new software();

            foreach (string skname in rk.GetSubKeyNames())
            {

                // Reset software info
                aSoftware.reset();

                try
                {
                    // Name of the programm
                    sname = Registry.LocalMachine.OpenSubKey(SoftwareKey).OpenSubKey(skname).OpenSubKey("InstallProperties").GetValue("DisplayName").ToString();
                    aSoftware.name = sname;

                    // Write program to the list
                    installedSoftwareList.Add(aSoftware);
                }
                catch (Exception ex)
                {

                }
            } 
```

Net Framework 是 4.5，我超过了 Windows 7/8。当我调试这段代码时，var rk 为空，它在 foreach 中抛出了一个空引用异常。应用清单设置为需要管理员权限，因此注册表是可读的。问题是什么？

提前谢谢你。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:35:49.790

64位注册表问题：

添加（处理 64 位注册表）：

```
public static RegistryKey GetRegistryKey()
        {
            return GetRegistryKey(null);
        }

        public static RegistryKey GetRegistryKey(string keyPath)
        {
            RegistryKey localMachineRegistry
                = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine,
                                          Environment.Is64BitOperatingSystem
                                              ? RegistryView.Registry64
                                              : RegistryView.Registry32);

            return string.IsNullOrEmpty(keyPath)
                ? localMachineRegistry
                : localMachineRegistry.OpenSubKey(keyPath);
        }

        public static object GetRegistryValue(string keyPath, string keyName)
        {
            RegistryKey registry = GetRegistryKey(keyPath);
            return registry.GetValue(keyName);
        } 
```

并改变：

```
rk = Registry.LocalMachine.OpenSubKey(SoftwareKey); 
```

至

```
rk = GetRegistryKey(SoftwareKey); 
```

现在它可以工作了。

# asp.net - 列表框上的 MVC 模型状态验证失败

> ID：16138450
> 
> 赞同：2
> 
> 时间：2013-04-22T02:15:39.623
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我有一个简单的模型，它使用多选列表框来处理多对多 EF 关系。

在我的`Create`行动中，我得到了错误

> 从类型“System.String”到类型“MyProject.Models.Location”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。

我有 2 个模型，一个文章和一个位置：

文章.cs

```
namespace MyProject.Models
{
    public class Article
    {
        public Article()
        {
            Locations = new List<Location>();
        }

        [Key]
        public int ArticleID { get; set; }

        [Required(ErrorMessage = "Article Title is required.")]
        [MaxLength(200, ErrorMessage = "Article Title cannot be longer than 200 characters.")]
        public string Title { get; set; }

        public virtual ICollection<Location> Locations { get; set; }
    } 
```

位置.cs：

```
namespace MyProject.Models
{
    public class Location
    {
        [Key]
        public int LocationID { get; set; }

        [Required(ErrorMessage = "Location Name is required.")]
        [MaxLength(100, ErrorMessage = "Location Name cannot be longer than 100 characters.")]
        public string Name { get; set; }

        public virtual ICollection<Article> Articles { get; set; }
    }
} 
```

我有一个视图模型：

```
namespace MyProject.ViewModels
{
    public class ArticleFormViewModel
    {
        public Article article { get; set; }
        public virtual List<Location> Locations { get; set; }

        public ArticleFormViewModel(Article _article, List<Location> _locations)
        {
            article = _article;
            Locations = _locations;
        }
    }
} 
```

创建.cshtml：

```
@model MyProject.ViewModels.ArticleFormViewModel
<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Article</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.article.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.article.Title)
            @Html.ValidationMessageFor(model => model.article.Title)
        </div>
        <h3>Locations</h3>
        @Html.ListBoxFor(m=>m.article.Locations,new MultiSelectList(Model.Locations,"LocationID","Name"))
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

最后我的控制器动作：

```
// GET: /Article/Create

public ActionResult Create()
{

    var article = new Article();
    var AllLocations = from l in db.Locations
                      select l;

    ArticleFormViewModel viewModel = new ArticleFormViewModel(article, AllLocations.ToList());

    return View(viewModel);

}

//
// POST: /Article/Create

[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Create(Article article)
{
    var errors = ModelState.Values.SelectMany(v => v.Errors);

    if (ModelState.IsValid)
    {
        var locations = Request.Form["article.Locations"];
        if (locations != null)
        {
            var locationIDs = locations.Split(',');
            foreach (var locationID in locationIDs)
            {
                int id = int.Parse(locationID);
                Location location = db.Locations.Where(l => l.LocationID == id).First();
                article.Locations.Add(location);
            }
        }

        db.Articles.Add(article);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    var AllLocations = from l in db.Locations
                       select l;
    ArticleFormViewModel viewModel = new ArticleFormViewModel(article, AllLocations.ToList());
    return View(viewModel);

} 
```

这一切都工作得很好，我的位置列表框被正确填充：

![在此处输入图像描述](https://i.stack.imgur.com/4VH02.png)

如果我没有选择位置，那么我的模型会正确保存。如果我选择一个或多个位置，则我的 Model.IsValid 检查失败并出现异常

> 从类型“System.String”到类型“MyProject.Models.Location”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。

但是，如果我删除 ModelState.IsValid 检查，那么尽管出现错误，但我的值都已正确保存到数据库中——只是我失去了对模型标题等内容的验证。

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:46:56.830

除非您创建一个类型转换器，否则您不能直接将列表框的结果直接绑定到这样的复杂对象。原因在于 MVC 只能处理发布的 HTTP 值，在本例中是包含所选 ID 的字符串数组。这些字符串不会直接映射到您的 Locations 对象（即数字 1 不能直接转换为 ID 为 1 的 Locations 对象）。

您最好的选择是在您的视图模型中包含一个位置 ID 列表，类型为 string 或 int 以接受发布的值，然后在您的 post 方法中创建 Location 对象并用正确的 ID 填充它们。

仅供参考，您的代码工作的原因是因为您绕过模型绑定并直接进入 Request.Form 集合。您会注意到绑定的 Article 对象将没有任何 Location 对象。

编辑：

即使没有这个问题，我什至看不到您的代码将如何工作。您的 ArticleFormViewModel 没有无参数构造函数，因此模型绑定将失败（除非您有自定义模型绑定器）。

无论如何，您想要做的是（注意，如果您希望在呈现视图时选择它们，则必须填充 SelectedLocationID）：

```
public class ArticleFormViewModel
{
    ...
    List<int> SelectedLocationIDs { get; set; }
    ...
} 
```

然后，在您看来，您有：

```
@Html.ListBoxFor(m=>m.SelectedLocationIDs, 
    new MultiSelectList(Model.Locations,"LocationID","Name")) 
```

在您的 Post 方法中，不是调用 Request.Form 的代码，而是如下所示：

```
foreach(var locationID in article.SelectedLocationIDs) {
    ... // look up your locations and add them to the model
} 
```

# vb.net - VB.NET 数据集函数

> ID：16138454
> 
> 赞同：0
> 
> 时间：2013-04-22T02:16:49.310
> 
> 标签：vb.net, dataset

我正在尝试查看是否有更好的方法来使用返回 DataSet 的函数来填充组合框，或者更简洁的代码、更快的方法等。

功能：

```
 Public Function FillDataSet(ByVal dataSet As DataSet, ByVal queryString As String) As DataSet
      Using connection As New SqlConnection("Data Source=SQL;Initial Catalog=database; User ID=user;Password=password;")
         Using adapter As New SqlDataAdapter() With {.SelectCommand = New SqlCommand(queryString, connection)}
            adapter.Fill(DataSet)
         End Using
         Return DataSet
      End Using
    End Function 
```

调用子：

```
 Private Sub fillComboBox()
      comboBox.Items.Clear()
      Dim myDataSet As New DataSet
      myDataSet = FillDataSet(myDataSet , "SELECT rows FROM table")
      If myDataSet .Tables(0).Rows.Count > 0 Then
        For Each row As DataRow In myDataSet .Tables(0).Rows
          comboBox.Items.Add(row(0))
        Next row
        comboBox.SelectedIndex = 0
      Else
        MsgBox("Empty table.", MsgBoxStyle.OkOnly, "Empty Table...")
      End If
      myDataSet .Dispose()
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:30:12.670

将 for each 循环替换为`comboBox.DataSource = myDataSet.Tables(0)`然后分配要显示的列与其列名`comboBox.DisplayMember = "ColumnName"`和值成员以捕获其`SelectedValue`

```
comboBox.DataSource = myDataSet.Tables(0)
comboBox.DisplayMember = "ColumnName"
comboBox.ValueMember = "ColumnName" 
```

# ubuntu - pymssql 无法在 ubuntu 12 上检索数据

> ID：16138455
> 
> 赞同：0
> 
> 时间：2013-04-22T02:16:49.983
> 
> 标签：ubuntu, pymssql

pymssql 模块无法在 Ubuntu 12.04 上检索结果，我该怎么办？

Ubuntu 11.10（GNU/Linux 3.0.0-30-generic-pae i686）：

```
tim@lbtim:~$ python
Python 2.7.2+ (default, Jul 20 2012, 22:12:53)
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pymssql
>>> conn = pymssql.connect(host='10.156.70.7')
>>> curr = conn.cursor()
>>> curr.execute("select name from sysobjects where type='u'")
>>> for tbname, in curr:
...     print tbname
...
spt_fallback_db
spt_fallback_dev
spt_fallback_usg
spt_monitor
spt_values
MSreplication_options
bo_aux_callmeet_registed
>>> curr.close()
>>> conn.close()
>>> exit()
tim@lbtim:~$ 
```

Ubuntu 12.04 LTS（GNU/Linux 3.2.0-23-generic-pae i686）：

```
tim@lbtim:~$ python
Python 2.7.3+ (default, Apr 20 2012, 22:44:07)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pymssql
>>> conn = pymssql.connect(host='10.156.70.7')
>>> curr = conn.cursor()
>>> curr.execute("select name from sysobjects where type='u'")
>>> for tbname, in curr:
...     print tbname
...
>>> curr.close()
>>> conn.close()
>>> exit()
tim@lbtim:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T13:24:05.380

我也同意，但似乎是 ubuntu 12.04 中 FreeTDS 和 pymssql 的兼容性问题。

看这里。 [https://bugs.launchpad.net/ubuntu/+source/pymssql/+bug/918896](https://bugs.launchpad.net/ubuntu/+source/pymssql/+bug/918896)

# matlab - 在 Matlab 中，如何交换现有绘图的水平轴和垂直轴

> ID：16138467
> 
> 赞同：10
> 
> 时间：2013-04-22T02:17:36.940
> 
> 标签：matlab, plot, axes

假设我有向量 x 和 y，我知道我可以做`plot(x,y)`或`plot(y,x)`实现我想要的。但是，我的问题具体是：如果我已经在图中创建了一个图`plot(x,y)`，我如何以编程方式交换水平轴和垂直轴，以便有效地说`plot(y,x)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T06:57:25.060

有趣的问题+1。下面的例子展示了如何交换当前图形的轴`x`和轴：`y`

```
X = (1:100)'; %# Create x axis data
Y = randn(100, 1); %# Create y axis data
plot(X, Y); %# Plot the data
view(-90, 90) %# Swap the axes
set(gca, 'ydir', 'reverse'); %# Reverse the y-axis (Optional step) 
```

[此外，此处](http://www.mathworks.com.au/matlabcentral/newsreader/view_thread/265851)还有指向 Matlab Central 的相关链接。

# actionscript-3 - Flashbuilder 4，桌面空气应用程序 - 嵌入和播放声音

> ID：16138474
> 
> 赞同：0
> 
> 时间：2013-04-22T02:18:40.443
> 
> 标签：actionscript-3, flash, apache-flex, audio, flash-builder

我是 Flashbuilder 的新手，我需要学习如何 1.) 嵌入声音文件 (mp3) 和 2.) 能够播放所述文件。

我用谷歌查了一下，所有的例子似乎都是针对 AS3 的，我尝试按如下方式对其进行调整，但无法播放（或者我应该说我什么都听不见？）

bgmusic 在 src 级别导入

测试.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import flash.media.Sound;

            [Embed(source="bgmusic.mp3")]
            public var mySound:Class;

            protected function button1_clickHandler(event:MouseEvent):void
            {

                var s:Sound = new mySound() as Sound;
                s.play();

            }

        ]]>
    </fx:Script>
    <s:Button label="Test" click="button1_clickHandler(event)" />
</s:WindowedApplication> 
```

# android - Android - 如何使用嵌套的 ListViews

> ID：16138477
> 
> 赞同：0
> 
> 时间：2013-04-22T02:19:06.883
> 
> 标签：android, xml, api, listview, nested

这是我在这个网站上的第一个问题，我也是 Android 新手。我正在使用在线 API 创建应用程序。我正在使用 XML 中的这个 API 并将响应解析为 ListViews。我已经到了一个地步，我想从一个活动中的 ListView 中选择一个项目，并将该信息与另一个包含所选项目更多信息的 ListView 一起发送到下一个活动。例如，一个活动有一个乐队列表。单击乐队名称将显示乐队名称和下一个活动的巡演日期列表。根据我的 API，需要乐队的 ID 号才能访问乐队巡演信息，我试图将 ID 号作为搜索参数传递，但无法使其正常工作。我确实设法在 androidhive.info 上找到了一个不错的教程，但似乎无法应用这些技术。

```
 ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String displayName = ((TextView) view.findViewById(R.id.tvDisplayName)).getText().toString();
                String onTourUntil = ((TextView) view.findViewById(R.id.tvOnTourUntil)).getText().toString();
                String identification = ((TextView) view.findViewById(R.id.tvId)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleArtistActivity.class);
                in.putExtra(KEY_DISPLAY_NAME, displayName);
                in.putExtra(KEY_ID, identification);
                in.putExtra(KEY_ON_TOUR_UNTIL, onTourUntil);

                new AsyncDownload().execute(identification);

                startActivity(in);
            }
        }); 
```

}

```
private class AsyncDownload extends AsyncTask<String, String, String> {

    ProgressDialog pDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ArtistsSearchActivity.this);
        pDialog.setMessage("Please Wait...");

        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... params) {

        Log.v(TAG, "query is" +  params[0]);
        String result = new ArtistCalendarHelper().getXml(params[0]);
        return result;
    } 
```

我的 AsyncDownload 类在我的 onClickListener 中被调用。该类调用包含 URL 和 API 密钥的帮助程序。

```
public class ArtistCalendarHelper {
    private static final String TAG = "ArtistCalendarHelper";
    private static final String SONGKICK_URL = "http://api.songkick.com/api/3.0/artists/";
    private static final String API_KEY = "yIekMi1hQzcFheKc";

public String getXml(String identification) {

    HttpClient httpclient = new DefaultHttpClient();

    String getParameters = "";
    try {
        getParameters = URLEncoder.encode(identification, "UTF-8") 
                + "/calendar.xml?apikey=" + URLEncoder.encode(API_KEY, "UTF-8");
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    String url = SONGKICK_URL + getParameters;
    // Prepare a request object
    HttpGet httpget = new HttpGet(url);

    // Execute the request
    HttpResponse response; 
```

这些方法用于在初始搜索中获取乐队名称。怎么能改变它来使用从 ListView 中检索到的参数来搜索旅游信息？这与从 EditText 字段中获取搜索查询有什么不同？我不认为会有很大的不同。我试图包含受影响的代码。我不确定我应该提供多少代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:15:13.837

你可以试试这个：步骤 1\. Intent in = new Intent(getApplicationContext(), SingleArtistActivity.class); in.putExtra(KEY_DISPLAY_NAME, displayName); in.putExtra(KEY_ID, 标识); in.putExtra(KEY_ON_TOUR_UNTIL, onTourUntil);

```
 // new AsyncDownload().execute(identification); dont start the net request here

            startActivity(in); 
```

步骤 2\. 在第二个 Activity 的 on create() 方法中添加请求 url 方法 public class SingleArtistActivity{

```
 onCrete(){
        ...
      new AsyncDownload().execute(identification); 
```

在SingleArtistActivity中，实例一个空的Adapter，调用方法：listView.setAdapter(adapter)，然后视图会显示，但listview是空的，没有数据显示，但是url请求在后台工作。}

step 3：当AsyncTask返回数据时，将数据放入List数据中；然后调用adapter.notifyDataSetChanged()，listview会重新加载apapter，数据会显示在listview中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:23:07.613

我认为这里有一个错误：

```
 // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleArtistActivity.class);
            in.putExtra(KEY_DISPLAY_NAME, displayName);
            in.putExtra(KEY_ID, identification);
            in.putExtra(KEY_ON_TOUR_UNTIL, onTourUntil);

            new AsyncDownload().execute(identification);

            startActivity(in); 
```

我猜你想用 AsyncDownload 加载数据，然后在 SingleArtistActivity.class 中显示它们。所以你应该把这些代码放在 SingleArtistActivity.java 中。

您应该在 SingleArtistActivity.java 的 onCreate() 或 onResume() 中调用 new AsyncDownload().execute(identification); 并在 AsyncDownload 类的 onPostExecute 中设置适配器。像这些：

```
@Override
protected void onPostExecute() {
    if(pDialog != null && pDialog.showing()) {
         pDialog.dismiss();
    } 
    YourAdapter adapter = new Adapter(yourdata);
    setListAdapter(adapter);
} 
```

# xcode - 使用自定义构建 Shell 脚本加密 Cocoa 资源

> ID：16138479
> 
> 赞同：0
> 
> 时间：2013-04-22T02:19:47.467
> 
> 标签：xcode, macos, cocoa, sh

我正在使用以下脚本（[Source](http://aptogo.co.uk/2010/07/protecting-resources/)）加密我的 Cocoa 应用程序中的一些资源：

```
DIRNAME=EncryptedResources
ENC_KEY="abcdefghijklmnopqrstuvwxyz123456"

INDIR=$PROJECT_DIR/$DIRNAME
OUTDIR=$TARGET_BUILD_DIR/$CONTENTS_FOLDER_PATH/$DIRNAME

if [ ! -d "$OUTDIR" ]; then
  mkdir -p "$OUTDIR"
fi

for file in "$INDIR"/*
do
  echo "Encrypting $file"
  "$PROJECT_DIR/crypt" -e -k $ENC_KEY -i "$file" -o "$OUTDIR/`basename "$file"`"
done 
```

但是，该脚本不处理 EncryptedResources 目录中的子目录。我有几个嵌套的子目录，那么修改 shell 脚本以处理子目录并正确输出这些文件的最简单方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:59:52.200

您需要使用`find`命令而不是`for`循环。

```
find $INDIR -exec "$PROJECT_DIR/crypt" 
    -e -k $ENC_KEY -i {} -o "$OUTDIR/`basename {}`" \; # all on one line 
```

可能是您需要做的一个很好的近似值，但`find`很难使用，而且我正在记忆中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T08:23:41.277

仅供参考，我使用了以下内容：

```
DIRNAME=ENCRYPTEDCONTENT
ENC_KEY="INSERT ENCRYPTION KEY HERE"

INDIR=$PROJECT_DIR/$DIRNAME
OUTDIR=$TARGET_BUILD_DIR/$CONTENTS_FOLDER_PATH/Resources/$DIRNAME

if [ ! -d "$OUTDIR" ]; then
mkdir -p "$OUTDIR"
fi

while IFS= read -r -d $'\0' dir;
do
DIRECTORY=`echo $dir | sed -e "s,$INDIR,$OUTDIR,g"`
mkdir -p "$DIRECTORY"
done < <(find "$INDIR" -type d -print0)

while IFS= read -r -d $'\0' file;
do
OUTFILE=`echo $file | sed -e "s,$INDIR,$OUTDIR,g"`
if [ ! -d "$file" ]; then
echo "Encrypting $file"
"$PROJECT_DIR/crypt" -e -k $ENC_KEY -i "$file" -o "$OUTFILE"
fi
done < <(find "$INDIR" -type f -print0) 
```

# ruby-on-rails - 用户是否可以临时将文件上传到heroku？

> ID：16138490
> 
> 赞同：0
> 
> 时间：2013-04-22T02:21:10.457
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, amazon, uploading

我想上传每月的 .xls 表格供我的客户下载。我注意到 heroku 不允许写入文件。我不想使用回形针或 S3，因为数据有点敏感（我希望即将到来的数据覆盖旧数据）。

回形针\S3 是我唯一的选择还是有办法让heroku 存储一些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:03:49.563

是的，有可能。在此处阅读详细信息 devcenter.heroku.com/articles/dynos#ephemeral-filesystem。请注意，每次部署或切换测功机时，您都会丢失文件。也许您应该研究其他托管选项。

# java - 如何让我的聊天程序在聊天进行时向下滚动？

> ID：16138492
> 
> 赞同：1
> 
> 时间：2013-04-22T02:21:29.373
> 
> 标签：java, swing, user-interface, chat

我正在制作一个简单的聊天 GUI。我遇到了一个问题，我的程序没有随着聊天的进行而向下滚动。我也不确定如何在程序中添加滚动条/窗格，而不会通过将我的主要文本区域放入面板并破坏界面外观来搞砸一切。如何调整主聊天框，而不会通过将其`chatBox`放入 JPanel 来搞砸并使其看起来很丑陋。我将在下面发布我的所有代码。

MainGUI类：

```
package coltGUI;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.ScrollPaneConstants;
import javax.swing.UIManager;

public class MainGUI implements ActionListener {

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }

        MainGUI gui = new MainGUI();
        gui.display();
    }

    JButton sendMessage;
    JTextField messageBox;
    JTextArea chatBox;

    public void display() {

        JFrame frame = new JFrame("Colt Chat");
        JPanel southPanel = new JPanel();

        frame.getContentPane().add(BorderLayout.SOUTH, southPanel);
        southPanel.setBackground(Color.BLUE);
        southPanel.setLayout(new GridBagLayout());

        messageBox = new JTextField(30);
        sendMessage = new JButton("Send Message");
        chatBox = new JTextArea();
        chatBox.setEditable(false);
        frame.getContentPane().add(BorderLayout.CENTER, chatBox);

        chatBox.setLineWrap(true);

        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.WEST;
        GridBagConstraints right = new GridBagConstraints();
        right.anchor = GridBagConstraints.EAST;
        right.weightx = 2.0;

        southPanel.add(messageBox, left);
        southPanel.add(sendMessage, right);

        sendMessage.addActionListener(this);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(470, 300);
    }

    public void actionPerformed(ActionEvent event) {
        if (messageBox.getText().length() < 1) {
            // do nothing 
        } else {
            chatBox.append(messageBox.getText() + "\n");
            messageBox.setText("");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:27:45.397

只需将文本区域添加到 JScrollPane，然后将滚动窗格添加到框架。不需要面板。

```
//frame.getContentPane().add(BorderLayout.CENTER, chatBox);
frame.add(new JScrollPane(chatBox), BorderLayout.CENTER); 
```

请注意，约束应指定为 add(...) 方法的第二个参数，而不是第一个参数。

此外，从 JDK5 开始，您不需要使用 getContentPane()，frame.add(..) 方法将为您完成此操作。

如果您想要自动滚动，您可以查看[Text Area Scrolling](http://tips4java.wordpress.com/2008/10/22/text-area-scrolling/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:28:37.573

首先，您需要`chatBox`像`JScrollPane`这样包装：

```
frame.add(new JScrollPane(chatBox), BorderLayout.CENTER); 
```

其次，将消息附加到`chatBox`您需要强制它滚动到末尾，这可以通过以下方式完成：

```
chatBox.setCaretPosition(chatBox.getDocument().getLength()); 
```

# visualization - 基于网络的图表设计器

> ID：16138500
> 
> 赞同：0
> 
> 时间：2013-04-22T02:22:29.660
> 
> 标签：visualization

编辑：我注意到有 40 次观看，但没有回复。我要求太多了吗？有没有人对我正在寻找的部分内容有任何想法或观点？

我正在为我的公司寻找满足以下规范的软件库（开源或商业）。先说一点背景。

我的公司提供基于云的软件，除其他外，该软件允许用户创建临时数据库表，类似于 SharePoint 列表，并在其中存储任何类型的数据。假设，为了论证，可以通过常规 SQL 查询，针对表或视图来访问数据。

我们希望让我们的用户能够通过创建自己的图表来可视化存储在这些临时表中的数据。我们的最终用户将没有任何技术能力，并且不需要任何编码来实现这一点。

我们的软件在后端使用 java。客户通过浏览器访问软件，通常不需要插件或附加组件。

这是我正在寻找的：

*   一个库，可以创建非常广泛的图表（饼图、条形图等），而不仅仅是 1 或 2 种，以及这些图表的相当复杂的版本。
*   图表是在后端（在 java 中）还是在前端（使用 javascript）创建并不重要。
*   最终用户应该能够使用向导来设计图表。这不仅包括图表的类型和各种图表选项（标签、颜色等），还包括将使用哪些数据字段来构建图表的每个部分。例如，最终用户可能会选择一个饼图，然后选择一个特定的数据源（例如，Store Sales），然后他们可以从数据源中选择将用作饼图维度（切片）和饼图的列测量（每个切片的大小）。这并不一定要求库可以访问数据源，因为数据源中的字段和每个字段的数据类型都可以发送到库（无论是在 java 还是 javascript 中）。
*   最后，假设数据存储为常规表或可以作为 SQL 视图访问，一旦选择了字段并定义了各种聚合来创建图表，库应该编写查询所需的实际 SQL 代码基础数据。不能期望最终用户自己编写 SQL 代码。

我相信有一些 SharePoint 加载项会编写必要的查询以从 SharePoint 列表中提取数据以创建图表。类似的东西，但不是基于 SharePoint。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:48:55.347

标记，

我会尽我所能回答这个问题（披露：我是[FusionCharts](http://www.fusioncharts.com)的联合创始人兼首席执行官——我们在那里制作 JavaScript 图表组件）。

我将我的答案分为两部分：

1.  如何为您的 Web 应用程序找到图表组件？
2.  如何为最终用户构建 UI 以修改这些库创建的图表？

可以通过三种方式将图表功能添加到您的 Web 应用程序。

**使用服务器端图表库**

首先是使用特定于平台的图表库，这些图表库通过其 API 在服务器上接受数据，创建图像来表示图表，然后流式传输这些图像。此类组件的示例有 Telerik (.NET, 付费)、Infragistics (.NET, 付费)、ComponentArt (.NET, 付费)、ChartFX (Java, .NET, 付费)、Steema (.NET, 付费)、pChart (PHP ，免费），jPGraph，还有一大堆。

使用此类组件的优点是：

*   成熟的库提供种类繁多的图表类型
*   由于图表是作为图像生成的，因此它们可以*在任何地方*使用，包括移动设备
*   再次借助呈现为图像的图表，外观和感觉始终保持不变
*   如果在整个应用程序中每个用户只提供一个或两个图表，则与客户端库相比使用更少的带宽，客户端库的大小可能在 50-500KB 之间，但之后会被缓存

缺点是：

*   将图表生成为图像时，服务器端会使用大量资源。对于具有许多并发用户的应用程序更是如此
*   图表提供的交互性和动画非常有限，因为您只能使用图像做很多事情
*   它们是特定于技术的。因此，如果您使用 ASP.NET 库，如果/当您迁移到 Java 时，您将不得不切换到不同的库，因此外观、感觉和功能集会有所不同。

**使用托管图表 API**

第二种选择是使用托管图表库，这些图表库通过查询字符串/REST API 接收数据并将图表图像返回给您的应用程序。例如旧的 Google Charting API。

这样做的好处是：

*   您不需要托管图表库，因此所有维护和升级问题都由它们管理
*   当您更改技术堆栈时，图表仍由相同的服务提供，因此外观和感觉相同

缺点：

*   此类服务不提供多种图表类型
*   机密数据需要通过服务器外部的 HTTP 传输到此类提供商
*   可以通过查询字符串发送的数据量的限制
*   同样，图表不能是交互式的，因为它们是图像

**使用 JavaScript、CSS、Flash、Silverlight 或 Java 小程序的客户端图表**

第三个也是最后一个选项是使用以 JavaScript/HTML5、Pure CSS、Flash、Java 小程序或 Microsoft Silverlight 编写的客户端图表库。考虑到 iOS 设备不支持专有插件这一事实，基于 Flash、Java 和 Silverlight 的插件无法在 iPad 和 iPhone 上运行。所以你可以放心地忽略它们。纯 CSS 组件非常轻量级，可用于非常基本的可视化。

这最终将我们带到了基于 JavaScript/HTML5 的图表组件。有一大堆 JavaScript 图表库，包括免费和付费的。我在下面列出了其中一些：

付费：FusionCharts Suite XT (JavaScript)、HighCharts、amcharts、AnyChart、Jqplot、ZingCharts、Wijmo、TeeChart、Sencha Touch Charts、RGpraph、Kendo UI DataViz、JSCharts、Arcadia Charts、jQChart、EJSChart、emprisejs、techoctave

免费：FusionCharts Free (Flash)、Google Chart Tools、Yahoo UI components、Flot、Milkchart、Moochart、protovis、graphael、elycharts、smootiecharts、dhtmlxchart、grafico、canvasjs、dygraphs、thejit、awesomechartjs、jchartFX。更多基于 d3.js 的免费数据可视化组件：xcharts、nvd3、rickshaw、cubism.js、Dc.js、xkcd、graphene

现在，考虑到可用组件的数量，在缩小图表组件范围时需要问自己的问题应该包括：

*   您现在和将来需要哪些图表类型？如果您需要非常基本的图表，如柱形图、饼图等，这些库中的大多数都适合您。但是，如果您甚至需要像 Pareto 或 Funnel 这样的稍微高级的图表，大多数组件都不提供此类图表。
*   让图表在最大数量的设备和 IE6 等旧版浏览器上呈现对您来说有多重要？许多开源库仅使用 SVG 进行渲染，因此不支持 IE6、7、8（世界上 6% 的人仍在使用）。
*   您可以在演示期间使用您的产品部分实现数据可视化作为 USP 吗？如果是，图表组件的外观对您来说有多重要？
*   您是否希望花费大量时间来调整基本功能的图表？例如，许多开源库在编写附加代码时启用工具提示，或者如果您在图表上的数据点超过 25 个，则需要您注意 x 轴标签重叠。或者，您是否希望这些功能开箱即用，以便您可以专注于您的应用程序和业务逻辑？
*   能够自定义图表的每个功能（包括化妆品）对您来说有多重要？例如，您是否需要能够以 3D 形式呈现图表、自定义数字的格式、控制渐变等？
*   您是否想要一个包含详尽文档和真实业务演示的组件，以便您可以轻松上手，或者您是否可以通过最少的文档和可能需要大量时间的实验来学习？
*   当某些事情没有按预期工作时，获得个性化支持对您来说是否重要，或者您是否可以在公共论坛上发帖并且没有 SLA 来回复/修复？

希望这些信息能帮助您为您的 Web 应用程序选择图表组件，让我解决第二个问题：是否有一个组件附带客户端向导供最终用户设计图表？

对于客户端图表库，简短的回答是否定的。因为，它将客户端库与特定的服务器端技术联系起来以实现数据持久性，其次，没有多少用户需要它。

一些服务器端库（Dundas 曾经有此功能）确实提供此功能，但并非图表的所有功能都可以在客户端自定义。

话虽如此，许多开发人员已经创建了此类向导供非技术用户使用。例如，在 FusionCharts，我们为 SharePoint 创建了名为 Collabion（请参阅 www.collabion.com）的向导，以及名为 oomfo (www.oomfo.com) 的 PowerPoint。虽然这些不是开源的，但如果您发现它们相关，我们很乐意分享这些代码。

另一种选择是使用内置图表组件并为最终用户提供向导的开源 BI 组件（如 Pentaho、JasperSoft 等）。但是，它们可能需要每个用户大量的服务器资源，并且安装和维护需要花费时间。

希望我已经能够回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T18:40:28.157

这听起来像是一个“构建与购买”的问题。我很想知道您是否研究过 Tableau、qlikview、jDashboard 或 LogiAnalytics 等综合商业智能工具？

当然，购买预先构建的解决方案会受到限制——您的供应商可以与您合作吗？或者允许您构建最少的附加组件来解决它们？这可能会实现您的应用程序的许多目标，但具有更高的前期许可成本。

购买可视化库或下载开源库将提供构建您所描述的应用程序所需的众多材料之一。这将具有较低的许可成本，但需要围绕它构建您的其余要求。

您需要做出的决定是您是否有处理多个库和处理自定义编码所需的耐心和能力，或者您是否愿意为满足大多数但不一定满足所有要求的完整解决方案付费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:57:50.277

从我的角度来看，您的要求似乎是双重的。我会分享我的观点，但我不确定它是否会对你有所帮助。

1.  您需要一个本质上多样化、易于配置、对用户极端修改具有鲁棒性并且即使在最坏的情况下也看起来不错的图表组件。（我在这里假设了很多项目，因为很明显用户会创建图表，因此它可能非常牵强。）

2.  可视化编辑器（最好是向导样式），可用于从现有数据源创建和配置此类图表的各个方面。

3.  由于您的应用程序用于创建和存储自定义数据源（据我所知），因此使用 BI 工具作为叠加层意义不大，因为数据的性质太灵活而无法符合任何源标准。

如果我的基本分析是正确的，那么以下是我在各自基础上的建议：

1.  对于如此全面的需求，您将需要专门用于可视化的图表解决方案，并且是一个满足您图表需求的可视化组件。

    我看到的唯一满足您要求的组件是 [FusionCharts](http://www.fusioncharts.com/)。原因是 FusionCharts 旨在迎合企业客户的需求，在输入上具有高容错性，但看起来很吸引人。（我可以用例子详细说明，或者您可以查找网站 [http://www.fusioncharts.com/。](http://www.fusioncharts.com/.)）

2.  可悲的是，没有这样的组件与如此强大的可视化前端天生配对。这主要是因为大多数图表解决方案提供商都迎合了用例涉及图表生成的消费者。

    您确实有[Dundas Chart Builder](http://support2.dundas.com/Default.aspx?article=1193) - 恕我直言，它不是基于 Web 的和 [jsCharts 图表编辑器](http://www.jscharts.com/template)- 其可视化前端不如您的需求全面，我不确定他们是否出售编辑器。

    话虽如此，FusionCharts 的另一款产品名为[Collabion](http://www.collabion.com/)。该产品使用 FusionCharts 来呈现图表并连接 SharePoint 数据源。有趣的部分是它拥有的可视化图表构建器。它允许您完全自定义 FusionCharts 的外观和功能以及数据源的配置。访问[http://www.collabion.com/](http://www.collabion.com/)，您可以查看屏幕截图。

    Collabion 主要用于部署在 Microsoft 堆栈 (SharePoint) 上，但您的要求是 Java。恕我直言，如果您达到该长度，您可以运行 SharePoint 实例并传达该过程。（只是大声思考。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T04:31:02.463

的确，FusionchartXT 符合您的要求，但您也需要一个基于 Web 的 FusionchartXT 编辑器。它必须允许您的客户选择性地配置他们的图表属性、化妆品、日期集和趋势线，就像这样：[http](http://www.crossui.com/FCEditor/) ://www.crossui.com/FCEditor/ 。

# javascript - 在 JQuery/Backbone 中，如何覆盖每个 AJAX 请求以添加附加参数？

> ID：16138503
> 
> 赞同：1
> 
> 时间：2013-04-22T02:22:45.760
> 
> 标签：javascript, jquery, url, backbone.js

```
$.post('/js/register', data, function(){

});

$.get('/js/home', data, function(){
    //render the template here
}); 
```

我在我的 Backbone 应用程序中使用这些。它从服务器获取数据，然后呈现模板。

我想在全局级别上覆盖这些，这样当我进行这些调用时，“数据”将当前的 window.location（url）作为属性。

对于每个 ajax 调用，我想附加用户当前所在的当前 url。

PS - 我正在使用 Backbone 推送状态 - 这有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:33:47.343

我认为这个答案应该可以帮助你[https://stackoverflow.com/a/6998085/1846192](https://stackoverflow.com/a/6998085/1846192)

在你的情况下：

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) {
  options.data = $.param($.extend(originalOptions.data, { url: window.location.href }));
}); 
```

# xcode4.5 - xcode 4.5.2 不支持 ios6.1.3

> ID：16138507
> 
> 赞同：0
> 
> 时间：2013-04-22T02:23:29.110
> 
> 标签：xcode4.5, ios6.1

我的ipad2已经升级到ios6.1.3，然后Xcode无法识别这个设备。将 xcode 更新到 4.5.2 时，此问题仍然存在。那么我该如何解决这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:25:50.517

那是因为 Xcode 4.5.2 也已经过时了。试试[这个](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)Xcode 4.6.2 的链接

# caching - LRU用于文件系统缓存？

> ID：16138508
> 
> 赞同：0
> 
> 时间：2013-04-22T02:23:50.097
> 
> 标签：caching, file-io, lru

我了解到，由于计算开销，真正的 LRU 没有在虚拟内存系统中实现。那么，为什么 LRU 算法在文件缓存中是可行的呢？

我认为原因可能是 inode 中的时间字段。那是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T02:54:49.460

这是关于速度的。

虚拟内存状态位必须在纳秒内更新，因此需要硬件支持，而 LRU 的状态信息在硬件中实现的成本很高。例如，时钟算法被设计为用较便宜的硬件支持来逼近 LRU。

文件系统操作是毫秒级的。CPU 可以在很短的时间内在软件中执行 LRU。从 CPU 的角度来看，毫秒是如此“慢”（19 万条指令），以至于仅防止少量缓存未命中就会产生巨大的回报。

# javascript - javascript jQuery 变量范围

> ID：16138510
> 
> 赞同：2
> 
> 时间：2013-04-22T02:23:58.210
> 
> 标签：javascript, jquery, scope

提前致谢。我正在为我和我的合作伙伴一起运行的一项名为 Laughter Yoga Dublin 的服务创建一个网站。我遇到了一个让我陷入困境的问题。下面看起来有很多代码，但我的问题主要（我认为）与第一行和最后几行有关。

如您所见，前五行是变量声明。这些行后面是一个处理这些变量的 jQuery 函数开头（$.getJSON*等...）。*该函数在下面给出的最后几行代码之前结束。

我的问题是：代码末尾的行（console.log*等*......）怎么会显示变量的值不受前面函数的影响？我是第一个承认我是这个编程东西的婴儿，但我认为既然我已经在函数外部声明了变量，它们的值可以在函数内部进行更改。我错了吗？我发现它有点难以理解，而我自己（有限）的经验似乎与下面这段代码的效果相矛盾。

我愿意研究和学习，但我真的很感激即使是在这个问题上朝着正确的方向轻推。

再次感谢爱尔兰都柏林的 Niall。

```
 var events = []
    var theBitImInterestedIn
    var prettyDate;
    var nextEventString;
    var JSONurl = 'https://www.google.com/calendar/feeds/avmknaehgjre8qjqhbi22fn8mo%40group.calendar.google.com/public/basic?alt=json&orderby=starttime&max-results=20&singleevents=true&sortorder=ascending&futureevents=true';     
    $.getJSON(JSONurl ,function(data){
    theBitImInterestedIn = data.feed.entry;
    $.each(theBitImInterestedIn, function(key, val){
        var event = {};
        var Content = val.content.$t;
        var weekDayNumber, weekDay = '', Days=['Mon','Tue','Wed','Thu', 'Fri', 'Sat', 'Sun'];
        var monthNumber, monthOfTheEvent = '', Months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        var venue = theBitImInterestedIn[0].content.$t
        venueBegin = venue.indexOf('Where');
        venueMod = venue.substring(venueBegin);
        venueEnd = venue.indexOf('<br') -2;
        venue = venueMod.substring(7, venueEnd);
        $.each(Days, function(key, val){
        if (Content.match(Days[key])){
            weekDay = val;
            weekDayNumber = key + 1;
        }
        })
        $.each(Months, function(key, val){
        if (Content.match(Months[key])){
            monthOfTheEvent = val;
            monthNumber = key + 1;
        }
        })
        var actualDay = Content.match(/\d+/)[0];
        var year = Content.match(/\d+/g)[1];
        event.Title = 'Laughter Yoga';
        var tempDate = monthNumber  + '/' + actualDay + '/' + year;
        var prettyDate = weekDay + ' ' + actualDay + ' ' + monthOfTheEvent + ' ' + year;
        event.Venue = venue;
        event.PrettyDate = prettyDate;
        event.Date = new Date(tempDate);
        events.push(event);
    })
    nextEventString = 'Next class: ' + events[0].PrettyDate + ' at ' + events[0].Venue;
    //$('p').html(nextClassString).appendTo('#next-class');
    });
console.log(events);     //these result in an empty [] and undefined 
console.log(theBitImInterestedIn)
console.log(prettyDate)
console.log(nextEventString) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:39:24.277

如前所述，getJSON 是异步的。为了让 console.log 对更改的变量做任何事情，您需要在异步调用之后在函数中调用它们。

```
var events = []
var theBitImInterestedIn
var prettyDate;
var nextEventString;

function callJSON() {
  var JSONurl = 'https://www.google.com/calendar/feeds/avmknaehgjre8qjqhbi22fn8mo%40group.calendar.google.com/public/basic?alt=json&orderby=starttime&max-results=20&singleevents=true&sortorder=ascending&futureevents=true';     
  $.getJSON(JSONurl ,function(data){

      ...

      ///////////////////////////////////////////////////////////////
      // call to show console log
      ///////////////////////////////////////////////////////////////
      logConsole()

  });

}

function logConsole() {
  console.log(events);     //these result in an empty [] and undefined 
  console.log(theBitImInterestedIn)
  console.log(prettyDate)
  console.log(nextEventString)
} 
```

# c# - 在列表框中使用虚拟化时扩展器自动折叠

> ID：16138511
> 
> 赞同：1
> 
> 时间：2013-04-22T02:24:02.677
> 
> 标签：c#, wpf, virtualization

我有一个列表框控件，并且在所有项目中都有一个扩展器控件，以便用户可以展开每个项目。但是当我展开几个项目并滚动它时。有时扩展器会自动折叠。

```
 <ListBox x:Name="listbox" ItemsSource="{Binding Persons}" Background="LightBlue"
            ItemTemplate="{StaticResource PersonDataTemplate}"
            ItemContainerStyle="{StaticResource ListBoxItemStyle}" 
            VirtualizingPanel.IsVirtualizing="True"
            VirtualizingPanel.IsVirtualizingWhenGrouping="True" 
            HorizontalContentAlignment="Stretch">
        <ListBox.GroupStyle>
            <GroupStyle HeaderTemplate="{StaticResource GroupHeaderTemplate}" />
        </ListBox.GroupStyle>

    </ListBox> 
```

并且资源有

```
 <DataTemplate x:Key="PersonDataTemplate" DataType="{x:Type local:Person}">
        <Grid>
            <Expander >
                <Expander.Header>
                    <TextBlock Text="{Binding Name}"/>
                </Expander.Header>
                <!--This will take time to be instancied-->
                <!--<local:TimeConsumingControl />-->
                <!--Rest of the data template-->
                <Border Margin="4" BorderBrush="Black" BorderThickness="1" MinHeight="40" CornerRadius="3" Padding="3">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <!--<RowDefinition />-->
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Name : " Grid.Row="0" FontWeight="Bold" HorizontalAlignment="Right" />
                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Name}" />
                        <TextBlock Text=" - Age : " Grid.Column="2" Grid.Row="0" FontWeight="Bold"
                                HorizontalAlignment="Right" />
                        <TextBlock Grid.Column="3" Grid.Row="0" Text="{Binding Age}" />
                    </Grid>
                </Border>
            </Expander>
        </Grid>
    </DataTemplate> 
```

如何防止物品倒塌。我仍然想使用虚拟化。

# ruby-on-rails - 将 RoR 中的变量从 html 传递到模型

> ID：16138514
> 
> 赞同：1
> 
> 时间：2013-04-22T02:24:29.553
> 
> 标签：ruby-on-rails, ruby

我是使用 Ruby on Rails 进行开发的新手，我一直致力于一个小项目，我一直在致力于更好地理解 RoR。我正在尝试制作一个小型天气网站，但我无法通过控制器将用户输入发送到模型，并让该模型使用发送回正确的信息，以便我可以解析它，而不是什么。到目前为止，我还无法将用户参数发送到控制器，以便它发出正确的请求。这是我的以下代码：

每小时.html.erb：

```
 <%= form_tag('/show') do %>
        <%= label_tag(:location, "Enter in your city name:") %>
        <%= text_field_tag(:location) %>
    <br />
    <%= submit_tag "Check It Out!", class: 'btn btn-primary' %>
 <% end %> 
```

hourly_lookup_controller.rb：

```
class HourlyLookupController < ApplicationController

    def show
        @hourly_lookup = HourlyLookup.new(params[:location])
    end
end 
```

hourly_lookup.rb：

```
class HourlyLookup

    def fetch_weather
        HTTParty.get("http://api.wunderground.com/api/api-key/hourly/q/CA/#{:location}.xml")
    end

    def initialize
      weather_hash = fetch_weather
      assign_values(weather_hash)
    end

    def assign_values(weather_hash)

       more code....

    end
end 
```

对于一些好的示例或教程的任何帮助或指导将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:32:15.730

如果您想将变量发送到 HourlyLookup，您需要这样做：

```
class HourlyLookupController < ApplicationController

  def show
    @hourly_lookup = HourlyLookup.new(params[:location])
    @hourly_lookup.fetch_weather
  end
end

class HourlyLookup

  attr_reader :location

  def initialize(location)
    @location = location
   end

  def fetch_weather
    response = HTTParty.get("http://api.wunderground.com/api/cdb75d07a23ad227/hourly/q/CA/#{location}.xml")
    parse_response(response)
  end

  def parse_response(response)
    #parse the things
  end
end 
```

# javascript - 初学者javascript中非常相似的术语之间的逻辑差异

> ID：16138518
> 
> 赞同：4
> 
> 时间：2013-04-22T02:25:11.410
> 
> 标签：javascript, logic

这两个术语有什么区别：

```
 if(counter % 4 != 0) 
 if(counter % 4 == !0) 
```

我看不出任何逻辑差异，但我的电脑确实如此（我 100% 确定我的电脑比我更合乎逻辑）。

所有洞察力都表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:30:15.930

JavaScript 中的`!`(not) 运算符执行类型强制 - 它尝试将值转换为布尔值（真或假）。JavaScript 中的 0 是*falsy*，所以 !0 是 false 的反义词，即 true。

所以你的第一个`if`保持不变：

```
if(counter % 4 != 0) 
```

但第二个实际上是

```
 if(counter % 4 == true) 
```

这绝对不一样。

编辑：

JavaScript 在使用非严格的`!=`and`==`运算符（相对于严格的`!==`and `===`）时也会进行类型强制，所以在这种情况下，如果`counter % 4`变为 1，它将评估为`true`因为`1`是一个真值。

这是 JavaScript 中的虚假值列表：[http ://www.sitepoint.com/javascript-truthy-falsy/](http://www.sitepoint.com/javascript-truthy-falsy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:37:42.327

如果您尝试将代码作为文本*阅读，可能会更有意义：*

*   是`counter % 4`一样的`not 0`吗？

`not 0`, 或`!0`,`true`在 Javascript 中给出，所以它是：

*   是`counter % 4`一样的`true`吗？

语句的结果取决于 的值`counter`。请参阅 Google Chrome 的 Javascript 控制台进行说明：

![在此处输入图像描述](https://i.stack.imgur.com/tMRvo.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-22T02:28:03.013

!0 是 1 所以你的条件看起来像这样：

```
if(counter % 4 != 0)   
if(counter % 4 == 1) 
```

# wordpress - WP Super Cache 缓存损坏

> ID：16138520
> 
> 赞同：5
> 
> 时间：2013-04-22T02:25:33.917
> 
> 标签：wordpress

我有一个模棱两可的错误。错误中的路径是正确的：

> 警告！WP Super Cache 缓存坏了！脚本 advanced-cache.php 无法加载 wp-cache-phase1.php。
> 
> 请编辑 /wp-content/advanced-cache.php 并确保 /wp-content/plugins/wp-super-cache/wp-cache-phase1.php 的路径正确。

需要修复什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T02:25:33.917

问题是直到插件加载后才定义常量。如果“require_once(ABSPATH .'wp-settings.php');”行可能会出现此错误 存在于 wp-config.php 中。WPCACHEHOME 可能在此行之后定义，但需要在其上方定义：

```
define( 'WPCACHEHOME', '<site root>/wp-content/plugins/wp-super-cache/' ); //Added by WP-Cache Manager
require_once(ABSPATH . 'wp-settings.php'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T19:49:52.247

[http://wangweiqiang.net/warning-wp-super-cache-caching-broken-the-script-advanced-cache-php-could-not-load-wp-cache-phase1-php/](http://wangweiqiang.net/warning-wp-super-cache-caching-broken-the-script-advanced-cache-php-could-not-load-wp-cache-phase1-php/)

这对我来说就像一个魅力......！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-14T19:47:44.240

这是一个权限问题，你应该检查错误通知中提到的路径是否有 777 权限，但是，我对这个问题的建议是不要使用这个插件，我把它安装在我的一些网站上，几乎所有其中它导致了我网站上不同元素的错误。我并不是说使用这个插件肯定会导致问题，但是这个插件被认为是有问题的，而且在我看来它并不能证明自己是合理的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-08-28T11:10:21.927

请在您的 wp-config.php 文件中使用它

```
define('WPCACHEHOME', dirname(__FILE__) . '/wp-content/plugins/wp-super-cache/'); 
```

前

```
/** Absolute path to the WordPress directory. */
if ( !defined('ABSPATH') )
define('ABSPATH', dirname(__FILE__) . '/'); 
```

# c++ - 如何在c ++中访问类中的私有数组

> ID：16138522
> 
> 赞同：2
> 
> 时间：2013-04-22T02:25:47.127
> 
> 标签：c++, arrays, class

```
Struct S
{int a,b,c};

class A{
    S myArray[MAX]
    void fillArrayFromFile();
};

class B{
    void printStyle1();
    void printStyle2();
    void printSTyle3();
};

class C{
    void printStyle4();
    void printStyle5();
    void printSTyle6();
}; 
```

所以考虑到那一点假冒的代码......

我希望 B 类和 C 类能够从 A 类的数组中读取信息，而不能更改数据。

访问器函数将非常麻烦，因为我必须为每种不同的输出格式编写一个函数，或者创建一个临时结构来保存数据并将其传递给调用类，以便它可以。这似乎不是最好的解决方案。

朋友功能可以访问类的成员，但不能访问我需要访问的实例（除非我误解了朋友功能......）

使数组公开将允许我希望访问/操作数据的两个类以外的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:34:16.533

如果您想让客户端能够检查数组的内容，您可以使用`A`.

```
class A
{
    S myArray[MAX]
    void fillArrayFromFile();
public:
    const S* getArrayPointer() const { return &myArray; }
}; 
```

这与允许他们直接只读访问具有相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:40:51.477

向 A 添加一个访问函数，该函数返回一个 const 指针或对数组的引用，或者对 S 中的指定元素。

```
const S* getArray() const { return myArray; }
const S& getElement(size_t ele) const { return myArray[ele]; } 
```

# ruby - 意外结束 kend ruby piglatin 程序

> ID：16138526
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:26:37.047
> 
> 标签：ruby

我需要编写一个将普通语音转换为猪拉丁语的程序。我写

```
def translate(*string)
  word = []
  word_string = []
  s = []
  i = 0
  a = nil

  #enters input from user into individual arrays spots
  #removes spaces
  string[0].scan(/\w+/).each { |x| word << x }

  #goes through each word and does operation
  while i < word.count
     word[i].scan(/./) { |x| word_string << x }

     #checks if starts with vowel
     if word_string[0].include?("aeiou" || "AEIOU")
       word_string = word_string << "ay"
       s[i] << word_string.join('')

     #checks if starts with Qu or qu  
     elsif word_string[0] + word_string[1] == "qu" || word_string[0] + word_string[1] == "Qu"
       word_string.delete_at(0) && word_string.delete_at(1)
       word_string << "quay"
       s[i] = word_string.join('')

     #checks if starts with 3 consonants   
     unless (word_string[0] + word_string[1] + word_string[2]).include?("aeiou") 
       a = word_string[0] + word_string[1] + word_string[2]
       word_string.delete_at(0) && word_string.delete_at(1) && word_string.delete_at(2)
       word_string << (a + "ay")
       s[i] = word_string.join('')
       a = nil

    #checks if starts with 2 consonants   
    unless (word_string[0] + word_string[1]).include?("aeiou")
       a = word_string[0] + word_string[1]
       word_string.delete_at(0) && word_string.delete_at(1)
       word_string << (a + "ay")
       s[i] = word_string.join('')
       a = nil

   #check if starts with 1 consonants
   else
      a = word_string[0]
      word_string.delete_at(0)
      word_string << (a + "ay")
      s[i] = word_string.join('')
      a = nil
   end

  i += 1

  end
s.join(" ")
end 
```

它返回给我一个错误说

```
pig_latin.rb:58: syntax error, unexpected $end, expecting kEND 
```

我查看了错误，这意味着我在某个地方错过了一个结尾，或者我有一个太多，但我找不到它。我有一个 def 结束，一个 while 结束和一个 if 结束，所以问题不存在。我认为它可能在最初的几个链接中的某个地方，我在其中编写了扫描文件以对文本进行排序，但它似乎也不在那里。我需要另一双眼睛看看，我找不到。另外，如果有更好的方法来写这个，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:03:45.890

这更像是代码应该看起来的样子，如果它是用更多的 Ruby 方式编写的：

```
def translate(string)

  pig_latin = []

  words = string.split(/\W+/)

  words.each do |word|

    case word
    when /^[aeiou]/i
      pig_latin << (word + "ay")

    when /^qu/i
      word << word[0,2] << 'ay'
      pig_latin << word[2 .. -1]

    when /^[^aeiou]{3}/i
      word << word[0,3] << 'ay'
      pig_latin << word[3..-1]

    when /^[^aeiou]{2}/i
      word << word[0, 2] << 'ay'
      pig_latin << word[2 .. -1]

    else
      word << word[0] << 'ay'
      pig_latin << word[1 .. -1]
    end

  end
  pig_latin.join(' ')
end

puts translate('the rain in spain stays mainly on the plain')
=> ethay ainray inay ainspay aysstay ainlymay onay ethay ainplay 
```

我会以不同的方式检查辅音。

它的工作原理留给读者去弄清楚。如果这是一项家庭作业，请花时间弄清楚它是如何工作的，因为知道它的作用很重要。抄袭别人的作品……嗯，现在网上有，大家都可以搜索找到，不要抄袭。

# android - “FragmentTabHost 无法解析为类型”

> ID：16138529
> 
> 赞同：1
> 
> 时间：2013-04-22T02:26:58.660
> 
> 标签：android, android-library

刚刚开始在 android 上构建应用程序。我从这个站点添加了 ADT 插件`https://dl-ssl.google.com/android/eclipse/` 然后我做了 File->new->other->Android->Android Sample Project->Support13Demos[Android Support Library] 认为这是一些演示，所以我可以学到一些东西，但它在其中一个文件中显示“FragmentTabHost 无法解析为一种类型”，我还有 2 个错误，我通过下载 2 个 jars android-support-v4.jar 和 android-support-v13.jar 解决了这些错误。但是这个错误似乎没有发生我认为这些需要一个罐子我发现很难得到它。任何关于这方面的建议都会有所帮助。当我正在尝试Android时，请告诉我是否假设/尝试了错误谢谢

# amazon-web-services - 用户数据脚本未从 S3 存储桶下载文件？

> ID：16138533
> 
> 赞同：0
> 
> 时间：2013-04-22T02:27:24.130
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, file-transfer

我有 s3cmd 和 EC2 api 预配置的 AMI。在使用用户数据创建新实例以从 S3 存储桶下载文件时，我面临以下一些问题。

在用户数据中，我有代码
- 在新实例上创建新目录。
- 从 AWS S3 存储桶下载文件。

脚本是

```
#! /bin/bash
cd /home 
mkdir pravin
s3cmd get s3://bucket/usr.sh >> temp.log 
```

但在上面的脚本中，`mkdir pravin`创建名为 pravin 的新目录，但`s3cmd get s3://bucket/usr.sh`不从 AWS S3 存储桶下载文件。

它也创建`temp.log`但它是空的。

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-03T04:05:24.560

另一种解决方案是使用`IAM`分配了角色的实例和`aws-cli`，这需要您已`Python`安装。所有这一切都可以通过在`user-data`您的实例的字段中插入以下内容来完成：

```
#!/bin/bash

apt-get update
apt-get -y install python-pip
apt-get -y install awscli

mkdir pravin
aws s3 cp s3://bucket/usr.sh temp.log --region {YOUR_BUCKET_REGION} 
```

**注意：以上仅适用于 Ubuntu。**

然后对于您的实例`IAM`角色，您将附加如下策略：

```
{
   "Version":"2012-10-17",
   "Statement":[{
         "Effect":"Allow",
         "Action":"s3:*",
         "Resource":"arn:aws:s3:::YourBucketName/*"
      }
   ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:21:42.083

我怀疑运行用户数据脚本的用户缺少`.s3cfg`文件。在运行此脚本时，您可能需要找到一种方法来指示文件的位置。

# java - 旧程序中的四元数旋转

> ID：16138537
> 
> 赞同：1
> 
> 时间：2013-04-22T02:27:33.973
> 
> 标签：java, quaternions

我需要有人帮助我。大约 10 年前，我编写了使 3d 字母 T 旋转的 Delphi 代码。最近我用java重写了那个程序，但我不知道数学是如何工作的。如果有人熟悉四元数旋转，请您解释一下程序中的数学是如何工作的。p 数组包含字母 T 每一侧的所有端点。其中一些相互重复只是为了可以在 for 循环中绘制字母 T。我只需要知道什么是常数'a'，为什么我两次调用方法'qm'，以及它的作用。

提前感谢您提供任何可能的帮助。

```
package quaternion;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class FourPoint{
    public double x, y, z, w;

}

class RotationPanel extends JPanel{
    private FourPoint[] p, pdraw;
    private int i, j;
    private FourPoint o,neo,m,h;
    final double a = Math.sqrt(1/(0.25+1+1.0/9));
    static int count= 0;
    public RotationPanel(){
        o = new FourPoint();
        neo = new FourPoint();
        m = new FourPoint();
        h = new FourPoint();
        p = new FourPoint[33];
        pdraw = new FourPoint[33];
        for (int i = 0; i < 33; i++){
            p[i] = new FourPoint();
            pdraw[i] = new FourPoint();
        }
        p[0].x = 0;
        p[0].y = 0;
        p[0].z = -40;
        p[0].w = 0;

        p[1].x = 0;
        p[1].y = 0;
        p[1].z = 0;
        p[1].w = 0;

        p[2].x = -100;
        p[2].y = 0;
        p[2].z = 0;
        p[2].w = 0;

        p[3].x = -100;
        p[3].y = 0;
        p[3].z = -40;
        p[3].w = 0;

        p[4].x = 0;
        p[4].y = 0;
        p[4].z = -40;
        p[4].w = 0;

        p[5].x = 0;
        p[5].y = 20;
        p[5].z = -40;
        p[5].w = 0;

        p[6].x = 0;
        p[6].y = 20;
        p[6].z = 0;
        p[6].w = 0;

        p[7].x = 0;
        p[7].y = 0;
        p[7].z = 0;
        p[7].w = 0;

        p[8].x = 0;
        p[8].y = 20;
        p[8].z = 0;
        p[8].w = 0;

        p[9].x = -40;
        p[9].y = 20;
        p[9].z = 0;
        p[9].w = 0;

        p[10].x = -40;
        p[10].y = 20;
        p[10].z = -40;
        p[10].w = 0;

        p[11].x = 0;
        p[11].y = 20;
        p[11].z = -40;
        p[11].w = 0;

        p[12].x = -40;
        p[12].y = 20;
        p[12].z = -40;
        p[12].w = 0;

        p[13].x = -40;
        p[13].y = 120;
        p[13].z = -40;
        p[13].w = 0;

        p[14].x = -60;
        p[14].y = 120;
        p[14].z = -40;
        p[14].w = 0;

        p[15].x = -60;
        p[15].y = 120;
        p[15].z = 0;
        p[15].w = 0;

        p[16].x = -40;
        p[16].y = 120;
        p[16].z = 0;
        p[16].w = 0;

        p[17].x = -40;
        p[17].y = 120;
        p[17].z = -40;
        p[17].w = 0;

        p[18].x = -40;
        p[18].y = 120;
        p[18].z = 0;
        p[18].w = 0;

        p[19].x = -40;
        p[19].y = 20;
        p[19].z = 0;
        p[19].w = 0;

        p[20].x = -40;
        p[20].y = 120;
        p[20].z = 0;
        p[20].w = 0;

        p[21].x = -60;
        p[21].y = 120;
        p[21].z = 0;
        p[21].w = 0;

        p[22].x = -60;
        p[22].y = 20;
        p[22].z = 0;
        p[22].w = 0;

        p[23].x = -100;
        p[23].y = 20;
        p[23].z = 0;
        p[23].w = 0;

        p[24].x = -100;
        p[24].y = 0;
        p[24].z = 0;
        p[24].w = 0;

        p[25].x = -100;
        p[25].y = 20;
        p[25].z = 0;
        p[25].w = 0;

        p[26].x = -100;
        p[26].y = 20;
        p[26].z = -40;
        p[26].w = 0;

        p[27].x = -100;
        p[27].y = 0;
        p[27].z = -40;
        p[27].w = 0;

        p[28].x = -100;
        p[28].y = 20;
        p[28].z = -40;
        p[28].w = 0;

        p[29].x = -60;
        p[29].y = 20;
        p[29].z = -40;
        p[29].w = 0;

        p[30].x = -60;
        p[30].y = 120;
        p[30].z = -40;
        p[30].w = 0;

        p[31].x = -60;
        p[31].y = 20;
        p[31].z = -40;
        p[31].w = 0;

        p[32].x = -60;
        p[32].y = 20;
        p[32].z = 0;
        p[32].w = 0;
        for(int i = 0; i < 32; i++){
            pdraw[i].x = p[i].x;
            pdraw[i].y = p[i].y;
            pdraw[i].z = p[i].z;
            pdraw[i].w = p[i].w;

        }

    }

    private FourPoint qm(FourPoint q, FourPoint p){
        FourPoint l = new FourPoint();
        l.x = q.w*p.x-q.z*p.y+q.y*p.z+q.x*p.w;
        l.y = q.z*p.x+q.w*p.y-q.x*p.z+q.y*p.w;
        l.z =-q.y*p.x+q.x*p.y+q.w*p.z+q.z*p.w;
        l.w =-q.x*p.x-q.y*p.y-q.z*p.z+q.w*p.w;
        return l;
    }
    public void rotate(){

        for(int j = 0; j <= 180; j++){
            o.x =(a*0.5)*Math.sin(Math.PI*j/180);
            neo.x =-o.x;
            o.y =-(a)*Math.sin(Math.PI*j/180);
            neo.y =-o.y;
            o.z =(a/3)*Math.sin(Math.PI*j/180);
            neo.z =-o.z;
            o.w =Math.cos(Math.PI*j/180);
            neo.w =o.w;
            for(int i = 0; i < 33; i++){
                m = qm(o, p[i]);
                h = qm(m, neo);
                pdraw[i].x = (int)Math.round(h.x) + 240;
                pdraw[i].y = (int)Math.round(h.y) + 120;
            }

            //The problem is here
            //When I'm trying to add delay, it does not 
            //repaint the canvas
            //Timer timer = new Timer(10000, new TimerListener());
            try{
                Thread.currentThread().sleep(20);
            }
            catch(InterruptedException e){

            }
            Graphics g = this.getGraphics();
            this.paintComponent(g);

            //repaint();

        }

    }

    protected void paintComponent(Graphics g){
        super.paintComponent(g);

        g.drawLine(240,120, 180, 240);

        for(int i = 0; i < 32; i++){
            //System.out.println((count++) + " " + pdraw[i].x + " " + pdraw[i].y + " " + pdraw[i+1].x + " " + pdraw[i+1].y);
            g.drawLine((int)pdraw[i].x, (int)pdraw[i].y, (int)pdraw[i+1].x, (int)pdraw[i+1].y);
        }

    }
}

class TimerListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            //repaint();
        }
    }
public class Quaternion {
    private static RotationPanel rp;
    public static void main(String[] args) {
        JFrame jfMainFrame = new JFrame();
        jfMainFrame.setSize(400, 400);
        jfMainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jfMainFrame.setLayout(new BorderLayout());
        JButton jb = new JButton("Rotate");
        jfMainFrame.add(jb, BorderLayout.SOUTH);
        jfMainFrame.setLocationRelativeTo(null);
        jfMainFrame.setVisible(true);
        rp = new RotationPanel();
        jfMainFrame.add(rp, BorderLayout.CENTER);
        jb.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                rp.rotate();
            }
        });
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:39:12.823

### 旋转背后的数学

您在定义点和旋转时使用[四元数。](http://en.wikipedia.org/wiki/Quaternion)四元数**q** = *a* + *bi* + *cj* + *dk*在您的代码中将表示为：

```
q.x = b;
q.y = c;
q.z = d;
q.w = a; 
```

您的数组`p`由代表空间点的四元数组成。坐标（*x*，*y*，*z*）写为*xi* + *yj* + *zk*，或在您的代码中为：

```
p[i].x = x;
p[i].y = y;
p[i].z = z;
p[i].w = 0; 
```

向量 (1/2, -1, 1/3) 定义了[旋转轴](http://en.wikipedia.org/wiki/Rotation)。我们称之为***v***。选择常数*a*使得*a* ***v***是单位向量。即它的长度为1。

`o`是代表旋转的四元数。如果*θ*是旋转角度，单位向量*a* ***v***定义旋转轴，则：

> **o** = cos( *θ* /2) + *a* ( ***v*** [*x*] *i* + ***v*** [*y*] *j* + ***v*** [*z*] *k* ) sin( *θ* /2)
>    = cos( *θ* /2) + *a* (1/2 *i* - 1 *j* + 1/3 *k* ) sin( *θ* /2)

在您的代码中，它是这样编写的：

```
o.x =(a*0.5)*Math.sin(Math.PI*j/180);
o.y =-(a)*Math.sin(Math.PI*j/180);
o.z =(a/3)*Math.sin(Math.PI*j/180);
o.w =Math.cos(Math.PI*j/180); 
```

其中 j = 90/ *π* · *θ*。

令**p**为表示要旋转的点的四元数，令**o***为**o**的[四元数共轭](http://en.wikipedia.org/wiki/Quaternion#Conjugation.2C_the_norm.2C_and_reciprocal)。（即如果**o** = *a* + *bi* + *cj* + *dk*，则**o*** = *a* - *bi* - *cj* - *dk*）。

 *********然后由下式得到的四元数**h**，定义了旋转点：

> **h** = **opo***。. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . (1)

这里，**qp**是任意两个四元数**q**和**p的**[Hamilton 积](http://en.wikipedia.org/wiki/Quaternion#Hamilton_product)。

 ****在您的代码中，`neo`（否定 O）？是的四元数共轭`o`，和你的方法`qm(q, p)`（四元数乘法）？`q`返回和的 Hamilton 积`p`。

以下代码等价于上面的等式（1）：

```
m = qm(o, p[i]);
h = qm(m, neo); 
```

[在此处](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)阅读有关四元数旋转的更多信息。

### 对代码的建议更改

*   T 开头没有显示的原因是您忘记`pdraw`在构造函数中移动 (240,120)。您可以将`for`构造函数末尾的 -loop 替换为：

```
 for(int i = 0; i < 33; i++){ //i < 33, instead of i < 32
        pdraw[i].x = p[i].x + 240; //Shift along x-axis by 240
        pdraw[i].y = p[i].y + 120; //Shift along y-axis by 120
        //pdraw[i].z and pdraw[i].w aren't used
    } 
```

*   Swing 组件只能在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上调用。您可以通过编辑您的`main`方法来实现这一点：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater() {
        @Override
        public void run() {
            createAndShowGUI();
        }
    }
}
private void createAndShowGUI() {
    //Put the old content of your main method here instead.
} 
```

*   为避免在动画期间使程序无响应，您应该在单独的线程上进行计时。[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)是一个很好的选择。

一个可能的解决方案：

```
//In your RotationPanel class
private final Timer timer = new Timer(20, new TimerListener());
public void rotate(){
    timer.start();
}
private void setFrame(int j) {
    //Copied from old rotate method
    o.x =(a*0.5)*Math.sin(Math.PI*j/180);
    ... //13 more lines
}
private class TimerListener implements ActionListener{
    private int frame = 0;

    public void actionPerformed(ActionEvent e){
        RotationPanel.this.setFrame(++frame);
        RotationPanel.this.repaint();
        if(frame == 180) {
            frame = 0;
            timer.stop();
        }
    }
} 
```

* * *

如果有任何不清楚的地方或您有任何其他问题，请随时发表评论。*************

# android - Android Fragment 在同一活动的片段之间传递信息

> ID：16138540
> 
> 赞同：2
> 
> 时间：2013-04-22T02:27:52.477
> 
> 标签：android, android-fragments

我是片段的新手，在理解某些概念时遇到了一些麻烦。目前，我正在处理两个片段，第一个是页面的用户界面，第二个是自定义列表视图。两个片段将同时显示在另一个之上。首先，用户可以选择日期，然后在数据库调用中使用该日期来获取该日期的列表项。

我首先要弄清楚的是，如何在两个打开的片段之间传递日期，并在第一个片段的日期发生更改时更新第二个片段。我希望我的问题很清楚。如果不是，我可以澄清一下。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:39:56.647

我不确定其他好的选择，但您绝对可以执行以下操作。

假设您有一个名为 A 的活动，它包含片段 b 和 c。您需要将数据从 b 发送到 c。

由于 b 和 c 都是活动 A 的子项，因此它们可以访问 A 的方法。A 也可以访问子片段 b 和 c。因此，要将信息从 b 传递给 c，请在 A 中创建一个方法，该方法会将信息传递给 c 并从 b 调用它。

更具体地说，有关此主题的更多信息，您可以查看[官方文档](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)。

因此片段可以访问 Activity 实例`getActivity()`并轻松调用方法

```
getActivity().passInfoToC(data); 
```

同样，您的活动可以通过使用 findFragmentById() 或 findFragmentByTag() 从 FragmentManager 获取对 Fragment 的引用来调用片段中的方法。例如：

```
ExampleFragment fragment = (ExampleFragment)getFragmentManager().findFragmentById(R.id.example_fragment);
fragment.setData(data); 
```

然后访问一个方法来传递数据。

# tsql - 多本书籍，只显示不可用的_SQL

> ID：16138542
> 
> 赞同：2
> 
> 时间：2013-04-22T02:28:04.947
> 
> 标签：tsql, sql-server-2012

好的，所以我有一个图书馆风格的数据库，我想获取所有已售罄的书籍的名称。如果所有副本都已出租，则该书被视为已售罄。到目前为止我的查询是：

```
SELECT Book.Title, Physical_book.book_available AS Available
FROM Book
JOIN Physical_book ON Book.book_id = Physical_Book.book_id
WHERE Physical_book.book_available = 'n'; 
```

我的 Physical_Media 表具有 book_available 属性，它告诉您该书是否可用 N 或 Y。在此表中，如果有多个副本，则重复书籍。意思是，如果这本书是，`Title One`那么我为`Title One` All 有三个二，并且 Book_ID 相同`2`。在这三本书中，有两本标有`n`，另一本标有`y`。从技术上讲，我想要的是，这个查询只提取那些所有书籍都售罄的人。由于它返回的结果`Title ONe`显然不能正常工作。有任何想法吗？

表格示例

```
/* Physical_Book Table */
INSERT INTO Physical_Book (Physical_ID, Book_ID, Book_available)
VALUES (1,1,'y');
INSERT INTO Physical_Book (Physical_ID, Book_ID, Book_available)
VALUES (2,1,'n');
INSERT INTO Physical_Book (Physical_ID, Book_ID, Book_available)
VALUES (3,1,'n');

/*Book Table*/
INSERT INTO Book (Book_ID, author_id, genre_id, title, copyright)
VALUES (1, Tammy, Horror, Book One, 1999) 
```

使用 JW 查询

```
SELECT Book.Title, Physical_book.book_available AS Available
FROM Book
JOIN Physical_book ON Book.book_id = Physical_Book.book_id
Group BY Book.title, Physical_book.book_available
HAVING COUNT (*) = COUNT (CASE WHEN book_available = 'n' THEN 1 END); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:43:05.720

```
SELECT  ID, title
FROM    Physical_Book
GROUP   BY ID, title
HAVING  COUNT(*) = COUNT(CASE WHEN book_available = 'n' THEN 1 END) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/48f7d/1)

假设你有这些记录，

```
╔════╦═══════════╦════════════════╗
║ ID ║   TITLE   ║ BOOK_AVAILABLE ║
╠════╬═══════════╬════════════════╣
║  1 ║ Title One ║ y              ║
║  1 ║ Title One ║ n              ║
║  1 ║ Title One ║ n              ║
║  2 ║ Title Two ║ n              ║
║  2 ║ Title Two ║ n              ║
╚════╩═══════════╩════════════════╝ 
```

查询的预期输出是

```
╔════╦═══════════╗
║ ID ║   TITLE   ║
╠════╬═══════════╣
║  2 ║ Title Two ║
╚════╩═══════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:42:27.527

像这样的东西应该工作。

```
select title
from book
where not exists
(select title
from book
where available = 'Y'
) 
```

# c++ - 从 QNetworkAccessManager 获取空字符串

> ID：16138544
> 
> 赞同：1
> 
> 时间：2013-04-22T02:28:12.743
> 
> 标签：c++, qt, qt5

这是我正在使用的代码：

```
QNetworkAccessManager *manager = new QNetworkAccessManager(this);
connect(manager, SIGNAL(finished(QNetworkReply*)),
            this, SLOT(replyFinished(QNetworkReply*)));

manager->get(QNetworkRequest(QUrl("https://dl-web.dropbox.com/get/patcher/wait.txt?w=AACu6t8OAIyonlf6zpLX4VQquumCR5I5Tvukdg_e8gXGxg"))); 
```

这是我的插槽：

```
void MainWindow::replyFinished(QNetworkReply* reply)
{
    qDebug () << reply->readAll();
} 
```

我得到“”作为输出。有什么理由吗？

我正在尝试从此[链接](https://dl-web.dropbox.com/get/patcher/wait.txt?w=AACu6t8OAIyonlf6zpLX4VQquumCR5I5Tvukdg_e8gXGxg)获取文本输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:03:08.527

看起来这是一个经过身份验证的网址。您必须通过处理`authenticationRequired`由`QNetworkAccessmanager`. 更多[信息在这里](http://qt-project.org/doc/qt-5.0/qtnetwork/qnetworkaccessmanager.html#authenticationRequired)。

# umbraco - 你会如何为 Umbraco 添加一个用于 ASPX url 的 httphandler？

> ID：16138552
> 
> 赞同：1
> 
> 时间：2013-04-22T02:29:38.063
> 
> 标签：umbraco, httphandler

使用 Umbraco 4.11.1，我正在尝试实现一个自定义 httphandler 并且没有乐趣让它工作。我在处理程序工作的同一台计算机上拥有完美运行的独立网站，但是当我将它移到 Umbraco 时，没有骰子。因此，我认为 Umbraco 中的某些东西正在干扰 httphandler。配置如下所示：

在 Umbraco web.config 部分中添加到 httpHandlers：<add verb="*" path="ChartHost.aspx" validate="false" type="MyCompany.Web.ChartHost"/>

添加到 appSettings：<add key="umbracoReservedUrls" value="~/config/splashes/booting.aspx,~/install/default.aspx,~/config/splashes/noNodes.aspx,~/VSEnterpriseHelper.axd,~/ ChartHost.aspx" />

结果是asp默认的404 not found页面（至少不是umbraco生成的版本，所以进步了一点）。我认为这有点不同，因为它正在映射一个 ASPX 扩展，我认为 Umbraco 正在尝试用 ASPX 重写 URL。我还为 ASHX 扩展添加了一些工作正常的映射 - 只是不是 ASPX 映射。任何有关如何解决此问题的建议将不胜感激。

两天前我还在umbraco论坛上问过这个问题（还没有答案），以防你遇到它： http: [//our.umbraco.org/forum/developers/api-questions/8754-How-to-register-自定义 HttpHandler](http://our.umbraco.org/forum/developers/api-questions/8754-How-to-register-custom-HttpHandler)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:54:38.930

从[HttpHandler 在 IIS 7 中不起作用](https://stackoverflow.com/questions/1465859/httphandler-not-working-in-iis-7)：

> IIS7 的 HttpHandler 注册与以前版本的 IIS 不同。`<system.webServer><handlers>`具体来说，您在名为not in 的 web.config 部分中注册处理程序`<httpHandlers>`。
> 
> 有关示例，请参见此[问题。](https://stackoverflow.com/questions/1272971/custom-http-handlers-iis7-and-asp-net/1273021#1273021)

# jsp - 看不懂jsp语法

> ID：16138553
> 
> 赞同：0
> 
> 时间：2013-04-22T02:29:38.560
> 
> 标签：jsp

```
<%@page language="java" contentType="text/html"%>
 <%@ page import="MyClasses.*"%>
 <html><head><title>Switch the log ON</title></head><body>
 <%
 **MyLog log = (MyLog)application.getAttribute("logFile");**
 if (log == null) {
 try {
 log = new MyLog( 
```

我是 Java 和 Jsp 的新手。我从一个医生那里得到了以上几行。我无法理解粗体字。有人可以告诉我它是什么样的类型转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:33:11.057

获取 logFile 对象 (MyLog) 并将其分配给 log，如果该对象为空，则继续实例化一个新对象。我首先阅读了面向对象编程的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:09:55.193

**1）** JSP有很多隐含对象，其中1个是**应用**对象。

**2)** JSP 的**应用程序**对象 = servlet 的**ServletContext**对象（**getServletConfig().getServletContext()**）。

**3)**这些对象用于访问*web.xml*配置信息。每个 Web 应用程序只有**一个** *ServletContext*或*应用程序对象。*

**您的代码解释：**

`application.getAttribute("logFile")`试图在上下文中找到一些关联**键**字符串（变量）为*logFile*的对象/值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:43:44.713

*这是惰性初始化*设计模式的示例之一。您的示例可以用以下 getter 表示：

```
private String var;
public String getVar() {
    if(var == null) {
        var = "I was initialized lazily in a getter";
        return var;
    } else {
        return var;
    }
} 
```

如您所见，**仅在第一次访问时才**`var`初始化：如果不需要，则根本不会创建它。使用这种模式，您可以避免预先创建太多对象，并且仅在需要时才创建它们。当对象很重并且其中许多不经常使用时，这种方法可能会显着提高应用程序在负载下的性能。

 **也就是说，您最好找到不提倡在 JSP 中使用 scriptlet 的书籍/资源，因为这被认为是一种糟糕的编程实践。**

# php - 用于显示目录列表结果的 php 脚本

> ID：16138569
> 
> 赞同：1
> 
> 时间：2013-04-22T02:32:24.877
> 
> 标签：php, directory

我正在制作附属目录，但找不到要使用的脚本。我在这里到处搜索，谷歌，必应，雅虎答案都没有正确的结果。我正在寻找一个脚本来显示这样的结果，并按结果的字母顺序 [http://www.jamaffiliates.com/directory/Business/Finance/](http://www.jamaffiliates.com/directory/Business/Finance/) [http://www.associateprograms.com/directory/books-and-艺术/剪贴画/](http://www.associateprograms.com/directory/books-and-art/clipart/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:02:38.240

如上所述，您需要提供有关此问题和未来问题的更多详细信息，才能真正利用 Stack Overflow。值得花时间投资自己的问题！

也就是说，我假设您有一个数组或数据库表，其中存储了附属信息。假设你有一个这样的数组：

```
$affiliates = array(
    1 = array(
        'id' => 1,
        'name' => 'Affiliate 1',
        'info' => 'This is a good affiliate!'
    ),
    2 = array(
        'id' => 2,
        'name' => 'Affiliate 2',
        'info' => 'This is also a really good affiliate!'
    )
); 
```

然后你可以像这样循环这个数组：

`foreach($affiliates as $affiliate_id => $affiliate_detail) { ... }`

在该代码块中，您可以执行类似`echo "<p>" . $affiliate_detail['info'] . "</p>";`.

如果要按字母顺序排序，理想的方法是实现一个数据库表，如 MySQL 表，它支持使用简单查询（如`select * from affiliates order by name`. 几乎没有可扩展性的方法是直接在上面提供的数组中使用附属名称，而不仅仅是 ID。这样，您可以使用 PHP 函数`ksort($affiliates)`，就像魔术一样，您的数组将按字母顺序排序。实际上，它会查看数组键（在本例中为附属名称），并按字母顺序对数组重新排序。要获得相反的效果，只需使用`krsort($affiliates)`;

# php - 试图理解 php 中的 getModifiers()

> ID：16138570
> 
> 赞同：0
> 
> 时间：2013-04-22T02:32:42.000
> 
> 标签：php

```
<?php
class Testing
{
    final public static function foo()
    {
        return;
    }
    public function bar()
    {
        return;
    }
}

$foo = new ReflectionMethod('Testing', 'foo');

echo "Modifiers for method foo():\n";
echo $foo->getModifiers() . "\n";
echo implode(' ', Reflection::getModifierNames($foo->getModifiers())) . "\n";

$bar = new ReflectionMethod('Testing', 'bar');

echo "Modifiers for method bar():\n";
echo $bar->getModifiers() . "\n";
echo implode(' ', Reflection::getModifierNames($bar->getModifiers()));
?> 
```

以上代码取自`ReflectionMethod::getModifiers()`php 手册中的 Example #1 示例：http: [//php.net/manual/en/reflectionmethod.getmodifiers.php](http://php.net/manual/en/reflectionmethod.getmodifiers.php)

问题：代码：`$foo->getModifiers()`，输出是261，这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:34:49.557

它是一个位域，由[这些常量](http://www.php.net/manual/en/class.reflectionmethod.php#reflectionmethod.constants.modifiers)的按位或组成。

[`Reflection::getModifierNames`](http://www.php.net/manual/en/reflection.getmodifiernames.php)使它更容易理解：

```
php> =Reflection::getModifierNames(261)
array(
  0 => "final",
  1 => "public",
  2 => "static",
) 
```

# ember.js - 使用特定 ID 属性渲染 Ember.Checkbox

> ID：16138571
> 
> 赞同：1
> 
> 时间：2013-04-22T02:32:50.767
> 
> 标签：ember.js, handlebars.js

在 Ember 中，将 ID 属性显式设置为动态的正确方法是`Ember.View`什么？如果可能的话，我想避免`Ember.View`仅仅为了这个功能而扩展。使用下面的示例，我尝试将“id”和“elementId”都设置`{{id}}`为无济于事。

```
<script type="text/x-handlebars" id='_task'>
  <label class='for-checkbox' for="task-{{unbound id}}"></label>
  {{view Ember.Checkbox checkedBinding="complete" elementId="task-{{id}}"}}
  {{description}}
</script>

<script type="text/x-handlebars" id="index">
  <ul class='tasks'>
    {{#each tasks}}
      {{partial "task"}}
    {{/each}}
  </ul>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:56:18.887

如果您正在编写类似的东西，`{{... {{...}} ...}}`那么您可能做错了什么。

```
<label class="for-checkbox" {{bindAttr for="name"}}></label>
{{view Ember.Checkbox checkedBinding="complete" nameBinding="name"}} 
```

名称是任务的计算属性，应该可以解决问题。

# java - 如何添加基于 60 分钟间隔的罚款？

> ID：16138572
> 
> 赞同：-2
> 
> 时间：2013-04-22T02:33:10.313
> 
> 标签：java

我有一个计算机科学课程的程序，如果停放的汽车超过 60 分钟，我必须为停放的汽车开票。类方法作为一个参数，然后应该给第一个小时的基本罚款，再加上每多停一个小时的 10 美元`ParkingTicket`。假设我总共停了 150 分钟，那么我的车票将是 35 美元（第一小时 25 美元，第二小时 10 美元，其余 30 分钟不罚款）。`calculateFine()``minutes`

我想到的是`if(minutes%60)`用来检查分钟是否可以被 60 整除，但是我不知道如何让程序检查它可以被整除多少次，减去前 60 分钟。现在我想起来了，这意味着如果`minutes`它不能被 60 整除，那就是假的，这意味着它根本不会执行..

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:40:51.527

只需从分钟计算小时数。如果小时数 > 0，那么罚款只是一个简单的计算。

```
final int BASE_FINE = 25;
final int HOURLY_FINE = 10;

int fine = 0;
int hours = minutes / 60;

if (hours > 0)
    fine = BASE_FINE + (HOURLY_FINE * (hours - 1));

return fine; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:37:25.953

当然，在适当的变量声明之后试试这个：

```
fine = 0;
if (minutes > 60) /* did you mean more than 60 like you said, or >= 60? */
{
fine = 25;
minutes -= 60;
fine += 10*Math.floor(minutes/60);
} 
```

这是一种更清晰的分解方法：

```
fine = 0;
hours = Math.floor(minutes/60); /* automatically ignores extra minutes */
if (hours >= 1) {
fine += 25; /* charge $25 fine for the first hour */
}
if (hours >= 2) {
fine += 10*(hours-1); /* charge $10 fine per hour for subsequent hours */
} 
```

你绝对不应该使用循环。通过向您的程序轻松提交大整数，这会使您的程序遭受 DOS 攻击。切勿将循环用于简单的数学问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:41:38.977

你有没有覆盖循环？如果是这样，请考虑使用 while 循环，如下所示：

```
while(minutesParked >= 60) {
    fine += 10;
    minutesParked -= 60;
} 
```

如果 minutesParked 大于或等于 60 分钟，我们将在罚款中增加 10 美元并从 minutesParked 中减去我们刚刚计算的 60 分钟。此循环继续执行，直到 minutesParked 中剩余的时间少于 60 分钟，根据您的帖子，没有任何处罚。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T02:36:44.757

一个简单的方法是从总分钟数中减去最初的 60，然后将 25 添加到运行总和中，然后执行一个 while 循环，从总分钟数中减去 60，直到它小于 0，同时更新运行良好的总和。

# git - git-svn dcommit 因“未知原因禁止 URL 访问”而失败

> ID：16138575
> 
> 赞同：2
> 
> 时间：2013-04-22T02:33:23.947
> 
> 标签：git, svn, git-svn

当我输入 git svn dcommit 时，我得到了这个

```
Committing to https://some.server.com/proj1/v3 ...
URL access forbidden for unknown reason: access to '/proj1/!svn/bc/579/v3/path/to/a.php' forbidden at /usr/lib/git-core/git-svn line 922 
```

我已经验证`git svn rebase`了作品，这表明我的帐户是正确的。有没有关于 git-svn 如何工作的建议或任何文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-15T17:55:50.303

我通过移动（删除）位于`~/.subversion/auth/svn.simple/<file>`（在 Linux 上）的身份验证文件来解决此问题。

然后我`git svn dcommit`再次运行，在提示时输入我的密码，现在它正在工作。

# regex - 从 shell 脚本中的唯一文件生成不同的文件名

> ID：16138578
> 
> 赞同：0
> 
> 时间：2013-04-22T02:34:01.157
> 
> 标签：regex, perl, bash, shell, variables

我需要执行我的 evaluateParameters.pl Perl 程序，为此，我想创建一个 shell 脚本。

```
#!/bin/bash

COVARIANCE=~/Desktop/ncRNA/CovarianceModels/rRNAs_cov/bitscores.rRNA.dat         # First input FILE
BASEPATH='/Desktop/ncRNA/Data/Inputs/rRNAs/60/'

TRUEFILES=~/$BASEPATH/Infernal/*.table                  # Second input File   
CONTROLFILES=~/$BASEPATH/RandomControl/Infernal/*.table # third input file
INPUTFILES=~/$BASEPATH/*.fasta                          # fourth input file   
for i in $COVARIANCE
do
    NAME1=`basename $i`
    for t in $TRUEFILES
    do
        # i.e : 1dvex4_rRNA_cin.out.db.location.fasta.RF00001.cm.tab.table
        NAME=`basename $t`
        echo "Calculating the parameters to $NAME"

        # I need modify $NAME to convert in: 1dvex4_rRNA.cin.out.db.location.fasta
        FILER=$(echo $NAME | sed s/(.*\.fasta)\.(.*\.tab\.table)/\1/g)

        # I need modify $NAME to convert in: 
        # 1dvex4_rRNA.cin.out.db.location.fasta.mutant.fasta.RF00001.cm.tab.table
        FILEM=$(echo $NAME | sed s/(.*\.fasta\.)(.*\.tab\.table)/\1\.mutate\.fasta\2/g)
        perl evaluateParameters.pl $i ~/$BASEPATH/Infernal/$NAME ~/$BASEPATH/RandomControl/Infernal/$FILEM ~/$BASEPATH/$FILER
        echo "END!"
    done
done 
```

最后一个代码向我发送以下警告：

```
Calculating the parameters to                                 10dvex1_rRNA_ce.out.db.location.fasta.RF00001.cm.tab.table.false.table.false.table.true.table.true.table.true.table .false.table
./obtainParameters.sh: command substitution: line 31: syntax error near unexpected token `('
./obtainParameters.sh: command substitution: line 31: `echo $NAME | sed s/(.*\.fasta)\.(.*\.tab\.table)/\1/g'
./obtainParameters.sh: command substitution: line 32: syntax error near unexpected token `('
./obtainParameters.sh: command substitution: line 32: `echo $NAME | sed s/(.*\.fasta\.)(.*\.tab\.table)/\1\.mutate\.fasta\2/g' 
```

一些想法？我猜错误在 $NAME 的正则表达式中，但我无法获得正确的正则表达式结果。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:22:10.033

有几件事让我感到震惊：

1）您的 do 和 done 语句不匹配（您有一个额外的“完成”）。

2）在你的 sed 表达式周围加上单引号；括号被 bash 解释为子进程。

具有语法突出显示的优秀编程文本编辑器对此有很大帮助。

# ios - ios：当我尝试滚动时 UIPickerView lldb 错误

> ID：16138584
> 
> 赞同：1
> 
> 时间：2013-04-22T02:34:41.270
> 
> 标签：ios, uipickerview, lldb

我有一个视图需要等到从 Web 服务检索到数据然后更新 UI 选择器视图。如果用户滚动选择器视图，我正在等待响应，应用程序崩溃并且我收到 lldb 错误。有什么理由吗？

这是我的代码：

```
@interface LocavoreRetroSecondViewController ()

@end

@implementation LocavoreRetroSecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"I Ate Local", @"I Ate Local");
        self.tabBarItem.image = [UIImage imageNamed:@"newfood"];
        _dataController = [[InSeasonProductDataController alloc] init];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return [_dataController countOfList];
}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    Product *product = [_dataController objectInListAtIndex:row];
    return product.name;
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    //do something
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)dealloc{
    [_dataController release];
    [super dealloc];
} 
```

我收到此错误：

*** -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableViewRowData.m:1630 (lldb) 中的断言失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:59:29.977

将代码更改为：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

if ([_dataController countOfList]>0) {
    return [_dataController countOfList];
}else{
     return 1;
}

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
if ([_dataController countOfList]>0) {
Product *product = [_dataController objectInListAtIndex:row];
return product.name;
}else{
    return @"";
}
} 
```

# c++ - C ++ - 用户输入后如何循环？

> ID：16138585
> 
> 赞同：2
> 
> 时间：2013-04-22T02:34:46.460
> 
> 标签：c++, loops, if-statement, cin, iomanip

在我之前的问题中，我得到了这个答案，因此如果用户在国家名称中输入超过 5 个字符，它将输出错误。

```
#include <iostream>
#include <iomanip>

int main()
{
    using namespace std;

    const int maxchar = 5;
    string nationname;

    cout << "What is the name of your nation?" << endl;

    cin >> nationname;

    if (nationname.size() > maxchar)
    {
       cout << "The input is too long." << endl;
       return 1;
    }
} 
```

我想要它，以便它在输出错误后循环回到“cout <<什么是名字......”。

谢谢！

有人在评论中回答了我之前的问题，但我没有让它工作/我不知道如何或将它放在我的代码中的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:56:28.630

至少对我来说，到目前为止你得到的回复看起来有点笨拙。IMO，这需要很少使用、被忽视的 do/while 循环：

```
bool show_error() { 
    return std::cout << "The input is too long.\n";
}

int main() { 
    static const int maxchar = 5;
    std::string nationname;

    do { 
        std::cout << "What is the name of your nation?\n";
    } while (std::cin >> nationname && nationname.size() > maxchar && show_error());
} 
```

至于为什么我认为这更好：首先，除非这样做完全不合理，否则将循环的条件写为循环条件要好得多，而不是在循环内的某个地方`while (1)`紧跟一个条件`break`。其次，如果你总是希望一个循环至少执行一次，那么`do`/`while`循环是最适合的。一个`while`当有合理的机会循环根本不会执行时（当/如果条件为假时），应该使用循环。最后，虽然它可以说是一个相当小的点，但这也测试了每个输入和输出操作的结果，如果其中一个失败，则退出循环。如果不这样做，错误的输入会导致无限循环，尝试读取失败，但将数据留在输入流中，因此下一次迭代将再次失败（无需等待用户输入更多数据）。

顺便说一句：我建议不要使用`std::endl`这么多（或可能根本不使用）。养成`\n`在只需要换行符时使用的习惯，以及`std::flush`何时/是否要刷新流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:37:27.773

```
while(1){
    cin >> nationname;
    if (nationname.size() <= maxchar)
        break;
    else{
       cout << "The input is too long." << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:47:38.937

```
const int maxchar = 5;
string nationname;

while(!(nationname.size()>0 && nationname.size()<maxchar)){
nationname="";
    cout << "The input has to be smaller than "<<maxchar<<" characters and has"
         <<" to contain at least 1 character."
    cin >> nationname;
}
//nationname is as supposed to be 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T02:38:14.280

在您的函数中添加一个while循环以在错误时继续输入。

```
int main()
    {
        using namespace std;

const int maxchar = 5;
string nationname;

while(1)
{
    cout << "What is the name of your nation?" << endl;

    cin >> nationname;

    if (nationname.size() > maxchar)
    {
         cout << "The input is too long." << endl;
    }
    else
    {
         break;
    }
}
return 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T02:38:38.410

当输入字符串的长度太长时，您基本上需要一个循环来不断要求用户输入新的答案。

尝试以下操作（按照您的原始逻辑）：

```
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    const int maxchar = 5;
    string nationname;
    while (true)
    { 
       cout << "What is the name of your nation?" << endl;
       cin >> nationname;
       if (nationname.size() > maxchar)
       {
         cout << "The input is too long." << endl;
         continue;
       }
       else
       {
          cout << "input nation is: " << nationname <<endl;
          break;
       }
   }
   return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-03T21:01:13.093

```
#include "stdafx.h"
#include <iostream>
#include <string>

int main()
{
    //declare a string variable called
nationName

    std::string nationName;

    std::cout << " Please enter youre   
Nation name,\n Names must be no   
longer than 20 characters in 
length\n and must not contain any 
numbers. . ." "\n""\n";

    //Get input from user
    getline(std::cin, nationName);

    //validate the length of the name   
variable, if it is greater than 20   
characters display an error
    while (name.length() >= 20)
    {
        std::cout << " sorry you have  
entered incorect data\n Please try  
again . . . ""\n""\n";

        getline(std::cin, name);
    }
    //if the name is entered correctly
loop exists and displays
    std::cout <<  nationName <<  
std::endl;
    return 0;

} 
```

# vba - VBA - Excel：在不同的列中拆分字符串

> ID：16138589
> 
> 赞同：3
> 
> 时间：2013-04-22T02:35:27.067
> 
> 标签：vba, excel, split

我希望我的 excel 文件的用户在单元格“B2”中输入一个句子，然后有一个 Sub 来解析不同列中的句子（从 D2 到 Dn）。因此，例如，如果您在 B2 中键入“aaa bbb ccc ddd”，结果应该是：
D2 : aaa
D3 : bbb
D4 : ccc
D5 : ddd

我找到了如何使用 split 函数用 VBA 拆分句子，但是我很难填充 D 列，因为我不知道如何定义最后一行 (Dn)。这是我到目前为止使用的：

```
Sub splitAddress()
Dim strAddress As String

strAddress = Range("B2").Value
Range("D2:D9").Value = WorksheetFunction.Transpose(Split(strAddress, " "))

End Sub 
```

我想修改“D2：D9”，因为 D9 并不总是该列的最后一行。如何写它应该根据我的 B2 单元格中的单词数从 D2 填充到 Dn？提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:58:24.053

可能有更优雅的方法可以做到这一点，但是如果将地址拆分为一个数组，则可以使用获取数组中的元素数，`Ubound`并使用它`.Resize`来增加范围内的行数：

```
Sub splitAddress()
  Dim strAddress As String
  Dim strAddressParts() As String
  Dim numParts As Integer

  strAddress = Range("B2").Value

  strAddressParts = Split(strAddress, " ")
  numParts = UBound(strAddressParts) + 1

  Range("D2").Resize(numParts).Value = WorksheetFunction.Transpose(strAddressParts)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:59:37.637

像下面这样的循环会为你做这件事：

```
Sub splitAddress()

Dim i As Integer, x As Integer
Dim c As Range

i = 0
x = 1

Set c = Range("A5")

i = InStr(c.Value, " ")

c.Offset(0, x).Value = Left(c.Value, i - 1)
x = x + 1
i = InStr(i, c.Value, " ")

Do Until InStr(i + 1, c.Value, " ") = 0

    c.Offset(0, x).Value = Mid(c.Value, i + 1, InStr(i + 1, c.Value, " ") - i)
    i = InStr(i + 1, c.Value, " ")
    x = x + 1
Loop

End Sub 
```

# javascript - 在用户点击提交后提供反馈

> ID：16138591
> 
> 赞同：1
> 
> 时间：2013-04-22T02:35:31.267
> 
> 标签：javascript, html

用户点击提交后，我怎样才能得到一个弹出框或简单的“谢谢”字样？最简单的方法：

```
<div id="suggestion">
    <div class="control-group">
        <div class="controls">
            <input type="submit" value="Send" class="btn btn-info" /> 
```

这是PHP：

```
<?php
    // Email of sender
    $videogamename = $_POST['namevideogame']; 

    // From (Sender Name)
    $artistname = $_POST['nameofartist'];

    $header = "from: Game AMV";

    // Message
    $message = "Name of Video Game: ".$videogamename."\r\n\nName of Artist/Song: ".$artistname."\r\n\nLink: ".$_POST['link'];

    // Enter your email address
    $to ='something@gmail.com';

    $send_contact = mail($to, 'New Song Suggestion from gameamv.com', $message, $header);

    // Check, if message sent to your email 
    // display message "We've recived your information"
    if($send_contact){
        header("location: http://gameamv.com/");
    } else {
        echo "Error. The form was not submitted. Please try again.";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:38:45.927

简单——给你的`<form>`元素一个可识别的`id`价值。

然后，您将按如下方式挂钩`onsubmit`事件：

```
document.getElementById('myThankfulForm').addEventListener('submit', function () {
    alert("Thankful Form is Thanking you!");
}, false); 
```

这是一个演示[jsFiddle](http://jsfiddle.net/RV47J/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:40:12.237

如果您希望它在发送电子邮件后（页面重新加载后）弹出，我会在您重定向到登录页面之前将一条消息放入 Session 值中。然后在登陆页面上，检查是否设置了 Session 值，如果登陆页面回显一些 Javascript 来提醒消息，则将 Session 值设置为 null。

当然，我假设这是一个应用程序。

# sql-server - SQL Server 协助创建外键关系

> ID：16138596
> 
> 赞同：0
> 
> 时间：2013-04-22T02:35:51.310
> 
> 标签：sql-server, foreign-keys, foreign-key-relationship

我正在为一个类的项目创建一个数据库，我们展示了如何通过单击关系按钮并将新关系添加到表中来创建外键关系（使用 SQL Server 2012），但由于某种原因我无法更改外键表（就像我们在课堂上所做的那样）。

我试图包括一个屏幕截图，但我还不能这样做。无论如何，我可以准确地表达我的意思？？？？？？

MY 表以 Category、Costume、Customer、Payment 和 Rental 开头，所有这些都是每个表的 ID (int)。（类别是第一和主要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:06:35.413

我不知道如何在 GUI 中执行此操作，但您可以通过 DDL 非常简单地创建外键：

```
alter table dbo.ChildTable add
   constraint [FK_Child_Parent] foreign key (col1, col2)
      references dbo.ParentTable (col1, col2) 
```

# php - PHP/Regex 如何获取这个字符串的值？

> ID：16138606
> 
> 赞同：-4
> 
> 时间：2013-04-22T02:37:52.800
> 
> 标签：php, regex

您好，我很确定我可以找到可以解决此问题的人..

我希望从此字符串中获取值“2013 年 4 月 21 日”：

```
$string = "Issue Date: Sunday April 21, 2013 / week 10/2003week 11/2003week 12/2003week 13.." 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:42:49.490

[`preg_match()`](http://www.php.net/manual/en/function.preg-match.php)与以下正则表达式一起使用`/^Issue Date: [A-z]+ (.*) \//`：

```
// prepare string and pattern
$string = 'Issue Date: Sunday April 21, 2013 / week 10/2003week 11/2003week 12/2003week 13..';
$pattern = '/^Issue Date: [A-z]+ (.*) \//';

// exec regex and check for results
if(!preg_match($pattern, $string, $matches)) {
    die('the pattern was not found');
}

// output the results:
$date = $matches[1];
echo $date; // output: 'April 21, 2013' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:47:09.357

不需要正则表达式：

```
$string = 'Issue Date: Sunday April 21, 2013 / week 10/2003week 11/2003week 12/2003week 13..';
$array = explode(' ',$string);
$date = $array[3] . ' ' . $array[4] . ' ' . $array[5];
echo $date; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T02:41:53.207

如果您正在寻找首先出现的内容（在“发行日期：”之后），那么这将起作用：

`Issue Date: (.*) /`

# linux-kernel - 动态生成proc文件？

> ID：16138614
> 
> 赞同：2
> 
> 时间：2013-04-22T02:38:39.860
> 
> 标签：linux-kernel, kernel-module

我正在制作一个 linux 内核模块，我想知道是否有一种方法可以动态生成 proc 文件并以合理的方式使用它们。

我用 a 创建一个结构`list_head`并从那里开始没有问题，但我的最终问题是我希望用不同的变量执行完全相同的函数。也就是说，我只想让一个`write_proc`最终为每个文件写入内核内存中的不同缓冲区（以及`read_proc`从同一个文件中读取的）。

我对此有困难的原因是用于从 proc 文件读取/写入的函数原型似乎不允许这种行为：

```
int read_proc(char *buf, char **start, off_t offset, int count,
              int *eof, void *data) {

int write_proc(struct file *file, const char *buf,
               unsigned long count, void *data) { 
```

现在，我可以静态地创建一堆函数并确保分配足够多的函数，但我想知道是否有更优雅的解决方案。

这是我希望它在用户空间中如何显示的示例（我没有代码 MWE，因为我什至不知道从哪里开始）：

```
$ echo "file1" > /proc/mydir/create
$ echo "file2" > /proc/mydir/create
$ ls /proc/mydir
  create  file1  file2
$ echo "1" > /proc/mydir/file1
$ echo "5" > /proc/mydir/file2
$ cat /proc/mydir/file*
  1
  5 
```

我刚刚离开了深渊吗？

我正在寻找非常通用的兼容性（2.6.33+）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:30:57.797

> 我的最终问题是我希望使用不同的变量执行完全相同的函数。

我假设您已经能够创建 /proc 文件。正如[Ilya](https://stackoverflow.com/a/16148142/912144)所说，`create_proc_entry`做这项工作（即使有更好的选择）。

> 我遇到困难的原因是用于从 proc 文件读取/写入的函数原型似乎不允许这种行为

Well actually it does. If you look at the prototype of either function:

```
int read_proc(char *buf, char **start, off_t offset, int count,
              int *eof, void *data);
                        ^^^^^^^^^^

int write_proc(struct file *file, const char *buf,
               unsigned long count, void *data);
                                    ^^^^^^^^^^ 
```

You will see a parameter called `data` which is a generic `void *`. Using this parameter, you can make the same function work with different variables.

Now `create_proc_entry` is not the best function for this. In fact, there is a replacement for it¹, which also matches a better naming scheme for /proc functions. Looking at [the source code itself](https://github.com/torvalds/linux/blob/master/fs/proc/generic.c#L708), you can see the signature of `create_proc_data` and how it works. Using this function, you can provide the pointer to the working area of the /proc file. This pointer will be passed to both your read and write functions.

This is very similar to how `pthread` work for example, and many other libraries that take function pointers as callbacks.

* * *

¹ If I'm not mistaken, `create_proc_entry` is deprecated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:18:24.807

看来您正在寻找`create_proc_entry`功能。它可以在运行时创建一个 proc 条目。例如，请参阅此处的[详细信息。](http://lxr.free-electrons.com/source/fs/proc/generic.c#L695)

# ruby-on-rails - 耙中止！不允许操作 - Carrierwave 删除验证失败的 tmp 文件

> ID：16138617
> 
> 赞同：1
> 
> 时间：2013-04-22T02:39:15.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, carrierwave

我正在使用 Carrierwave、s3 和雾来上传视频。我添加了一个 file_size_validator 文件，以便视频不能大于 5mb。

我对 Carrierwave 工作原理的理解（如果不正确，请告知）。Carrierwave 将文件的副本保存到 tmp 文件夹，然后对其执行验证，如果通过，文件将上传到 S3，下面的代码会从本地文件系统中删除 tmp 文件：

video_uploader.rb

```
before :store, :remember_cache_id
  after :store, :delete_tmp_dir

  def cache_dir
    Rails.root.join('public/uploads/tmp/videos') 
  end

    # store! nil's the cache_id after it finishes so we need to remember it for deletion
  def remember_cache_id(new_file)
    @cache_id_was = cache_id
  end

  def delete_tmp_dir(new_file)
    # make sure we don't delete other things accidentally by checking the name pattern
    if @cache_id_was.present? && @cache_id_was =~ /\A[\d]{8}\-[\d]{4}\-[\d]+\-[\d]{4}\z/
      FileUtils.rm_rf(File.join(root, cache_dir, @cache_id_was))
    end
  end 
```

如果文件未通过验证，则不会调用 before_store 和 after_store 回调，并且 tmp 文件保留在 tmp 文件夹中并且不会被删除。

![在此处输入图像描述](https://i.stack.imgur.com/9UpdU.png)

所以我们必须自己处理删除这些文件（再次请告知是否有一种通用的方法来做到这一点）。我创建了一个 cron rake 任务，删除与视频相关的屏幕截图，效果很好，然后使用类似的格式删除这些临时文件和文件夹。尝试运行任务时出现以下错误：

视频.rake

```
task :delete_tmp_files do
  FileUtils.rm Dir.glob("#{Rails.root}/public/uploads/tmp/screenshots/*")
end

task :carrierwave_tmp do 
  CarrierWave.clean_cached_files!
end

task :delete_unsaved_videos do
  FileUtils.rm Dir.glob("#{Rails.root}/public/uploads/tmp/videos/*")
end

rake delete_unsaved_videos
rake aborted!
Operation not permitted - /user/me/projects/teebox_network/public/uploads/tmp/videos/20130421-1853-8808-1646 
```

使用 sudo 运行 rake（仅用于调试）会抛出此问题。

```
sudo bundle exec rake delete_unsaved_videos
Could not find rake-10.0.4 in any of the sources
Run `bundle install` to install missing gems. 
```

运行 bundle install 没有任何效果。

有谁知道为什么会这样？尝试删除这些文件夹是权限错误吗？有没有更好的方法来处理验证失败的 tmp 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:23:48.500

使用 rm_rf 而不是 rm 克服了权限错误并成功删除了文件夹。

`FileUtils.rm_rf Dir.glob("#{Rails.root}/public/uploads/tmp/videos/*")`

# latex - 如何在 knitr RSweave 文件的标题中手动添加换行符？

> ID：16138625
> 
> 赞同：4
> 
> 时间：2013-04-22T02:40:40.667
> 
> 标签：latex, knitr, sweave

这是我所拥有的：

```
\documentclass{article}

\begin{document}

\title{This is the document title}

\maketitle

\end{document} 
```

我想要这样的东西：

```
\documentclass{article}

\begin{document}

\title{This is 
the document title}

\maketitle

\end{document} 
```

**如何在文档标题中手动添加换行符？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:29:34.047

只需添加一个换行符：

```
\documentclass{article}

\begin{document}

\title{This is\\ 
the document title}

\maketitle

\end{document} 
```

# python-3.x - 使用 virtualenvwrapper 安装自定义 python 版本

> ID：16138628
> 
> 赞同：0
> 
> 时间：2013-04-22T02:40:49.903
> 
> 标签：python-3.x, virtualenv

我`ubuntu lucid`是通过编译源代码`python2.6.`安装的。我`python3.3.1`想使用 virtualenvwrapper 来组织它。

我已经安装了 virtualenvwrapper 并设置`WORKON_HOME`为`/home/me/.virtualenvs`。我需要创建一个名为 envpy331 的环境，它有 python 3.3.1。当我尝试运行时

`mkvirtualenv envpy331`

它使用 python2.6 创建一个环境。如何指定所需的 python 版本（即 python 3.3.1）？

# php - 如何交替 foreach 语句 PHP

> ID：16138632
> 
> 赞同：0
> 
> 时间：2013-04-22T02:40:54.787
> 
> 标签：php, foreach

在回显第一个 foreach 语句的一个结果后，将回显第二个 foreach 语句的一个结果，我如何交替使用这些 foreach 语句？这是两个 foreach 语句。

```
 foreach($anchors as $a) {
    $text = $a->nodeValue;
    $href = $a->getAttribute('href');
$i++;

if ($i > 16) {
    if (strpos($text, "by owner") === false) {
     if (strpos($text, "map") === false) {

          echo "<a href =' ".$href." '>".$text."</a><br/>";

     }
    }
  }

  }

foreach($span as $s) {
echo "<br>".$s->nodeValue."<br>" ;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:02:44.163

从字面上看，您不能“合并”两个 foreach 语句，但您可以使用 each() 函数作为解决方法。把它放在第一个周期的某个地方：

```
list(,$s) = each($span);
echo "<br>".$s->nodeValue."<br>" ; 
```

# ember.js - Ember Data：“didLoad”事件何时触发？

> ID：16138636
> 
> 赞同：1
> 
> 时间：2013-04-22T02:41:29.590
> 
> 标签：ember.js, ember-data

[Ember Data 的文档讨论了模型实例生命周期中的不同事件](http://emberjs.com/guides/models/model-lifecycle/)。
我希望`didUpdate`每当模型实例的任何属性发生更改时都会触发该事件。但是我的实验没有显示这种行为。

这是一个 JS Bin 示例： http: [//jsbin.com/uziwam/9/edit](http://jsbin.com/uziwam/9/edit)
在该示例中，您可以看到我在“ren”模型实例上注册了处理程序：我为and事件注册了处理程序（`console.log(..)`消息） 。`didLoad``didUpdate`

启动代码时，会触发“ren's”`didLoad`事件，这是预期的行为。然后，当使用 GUI 编辑“ren's”属性时，不会触发任何`didUpdate`事件。这是（至少对我而言）意想不到的行为。

我该怎么做才能让`didUpdate`事件触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:17:47.630

当记录被有效保存时触发该`didUpdate`事件，这意味着您必须提交它，并且您的适配器已确认提交。

要提交记录的更改，可以使用 record.get('transaction').commit()。

见[http://jsbin.com/uziwam/11/edit](http://jsbin.com/uziwam/11/edit)

如果您想在属性更改时提交事务，您可以在其上放置一个观察者。

```
App.User = DS.Model.extend({
  firstName: DS.attr("string"),
  lastName: DS.attr("string"),

  firstNameDidChange: function(){
    this.get('transaction').commit();
  }
}); 
```

如果您想针对每个记录的属性进行概括，您应该能够执行以下操作：

```
App.User = DS.Model.extend({
  firstName: DS.attr("string"),
  lastName: DS.attr("string"),

  init: function(){
    this._super();
    this.eachAttribute(function(attributeName){
      this.addObserver(attributeName, this, this.commitRecord); 
    }, this);
  }

  commitRecord: function(){
    this.get('transaction').commit();
  }
}); 
```

[http://jsbin.com/uziwam/14/edit](http://jsbin.com/uziwam/14/edit)

# html - 是否可以将背景 RGB 与 URL 结合起来？

> ID：16138638
> 
> 赞同：2
> 
> 时间：2013-04-22T02:41:40.240
> 
> 标签：html, css

这可能吗？我的代码是：

```
.w-categories li:hover{
  background: rgba(0, 0, 0, 0.1);
  -moz-border-radius: 6px;
  -webkit-border-radius: 6px;
  border-radius: 6px;        
} 
```

但是当我将鼠标悬停在 上时`li`，它会删除侧面背景。

没有悬停

![http://screencloud.net/v/x1XU](https://i.stack.imgur.com/8A4en.png)

悬停时

![http://screencloud.net/v/fmzr](https://i.stack.imgur.com/AzTIs.png)

背景图片：`background: url(../images/w_icon_tag.png) no-repeat 5px 10px;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T02:46:30.077

尝试使用`background-color: rgba(...);`而不是`background: rgba(...);`.

似乎在这里工作：http: [//jsfiddle.net/MRSallee/D97n9/](http://jsfiddle.net/MRSallee/D97n9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:46:44.930

是的，可以组合。`[See Ref](https://developer.mozilla.org/en-US/docs/CSS/background)`

看看这个`[Demo](http://jsfiddle.net/23JNw/)`

```
background:url(../images/w_icon_tag.png) no-repeat 5px 10px rgba(0, 0, 0, 0.1); 
```

# php - 无法以电子邮件形式使用 PHP 处理多项选择

> ID：16138640
> 
> 赞同：0
> 
> 时间：2013-04-22T02:41:49.773
> 
> 标签：php, html, forms, post, sendmail

无法让我的表单从多选选项（在下面的编码中命名为“国家”）发送数据。我已经在这里查看了一些答案，但我真的不是 PHP 天才，无法弄清楚它如何以及为什么不适合我。当我测试它时会发生什么是表单发送最后选择的选项，就是这样。

我的 HTML 代码如下：

```
<form class="well" action="contact-send.php" method="post">
            <input type="text" class="span4" name="name" placeholder="Your name" /><br />
            <input type="text" class="span4" name="email" placeholder="Your email address" /><br />
            <select class="span4" multiple="multiple" name="country[]" size="5" style="padding:4px;">
            <option value="Thailand">Thailand</option>
            <option value="Cambodia">Cambodia</option>
            <option value="Laos">Laos</option>
            <option value="Vietnam">Vietnam</option>
            <option value="India">India</option>
            <option value="Japan">Japan</option>
            <option value="Philippines">Philippines</option>
            <option value="Bhutan">Bhutan</option>
            <option value="Singapore">Singapore</option>
            <option value="Borneo">Borneo</option>
            <option value="Myanmar">Myanmar</option>
            <option value="Malaysia">Malaysia</option>
            <option value="China">China</option>
            <option value="Nepal">Nepal</option>
            <option value="Sri Lanka">Sri Lanka</option>
            <option value="North Korea">North Korea</option>
            </select>
            <input type="date" class="span4" name="departure" placeholder="Departure date" /><br />
            <input type="text" class="span4" name="days" placeholder="Number of days" /><br />
            <input type="text" class="span4" name="travelers" placeholder="Number of travelers" /><br />
             <button class="btn btn-primary" type="submit" name="submit" value="Submit">Submit</button>
        </form> 
```

我的PHP代码如下：

```
<?php

if (isset($_POST['submit'])) {
$msg = 'Name: ' .$_POST['name'] ."\n"
.'Email: ' .$_POST['email'] ."\n"
.'Countries: ' .$_POST['country'] ."\n"
.'Departure Date: ' .$_POST['departure'] ."\n"
.'Number of Days: ' .$_POST['days'] ."\n"
.'Number of Travelers: ' .$_POST['travelers'] ."\n";

mail ('me@myemailaddress.com', 'Landing Page Enquiry', $msg);

 header ('location: send-success.php');

} else {
header('location: send-failed.php');
exit(0);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:03:43.013

您将表单元素命名为：

```
name="country[]" 
```

所以 $_POST['country'] 是一个数组。如果您想要数组的所有元素，即所有选择，请执行以下操作：

```
if (isset($_POST['submit'])) {
    $countries =  implode(' ', $_POST['country']);
} 
```

# php - 需要 shell_exec 命令在执行前等待

> ID：16138645
> 
> 赞同：1
> 
> 时间：2013-04-22T02:42:43.530
> 
> 标签：php, shell, imagemagick, shell-exec

我目前遇到了一个在我想要它之前运行的 shell 命令的问题。例如，我有 6 个命令我都想连续运行，前 5 个运行良好，但是一旦我到达最后一个，它依赖于前一个产生的输出，它就不会运行. 换句话说，有没有办法让我的最后一个命令不运行，直到第五个命令完全完成？这是针对这种情况的代码片段的快速浏览。

```
 /*Renders user image*/
        //$command_1 = 'cd ./***/; povray +I'.$newname.' +O'.$newname_t.' +D '.$_POST['AA'].' +H75 +W100';
        $command_2 = 'cd ./***/; povray +I'.$newname.' +O'.$newname_i.' +D '.$_POST['AA'].' '.$_POST['resolution'];

        /*Command to copy the .pov, .ini, and .inc files from User_Files to the correct animation directory before frame renders can be done*/
        $command_cp_pov = 'cp ***'.$newname.' ***'.$location;
        $command_cp_ini = 'cp ***'.$newname_j.' ***'.$location;
        $command_cp_inc = 'cp *** ***'.$location;

        /*Render the frames for the animation*/
        $command_3 = 'cd ***'.$location.'; povray +I '.$newname_j.' +A +H384 +W512'.'> /dev/null 2>/dev/null &';

        /*Testing purposes*/
        //echo $command_3."\n";

        /*Throw together the animation using the .png files in the directory*/
        $command_4 = 'cd ***'.$location.'; convert -delay 0 -loop 0 *.png animation.gif'.'> /dev/null 2>/dev/null &';

        /*Testing purposes*/
        //echo $command_4;

        $shellOutput = shell_exec($command_2);
        $shellOutput = shell_exec($command_cp_pov);
        $shellOutput = shell_exec($command_cp_ini);
        $shellOutput = shell_exec($command_cp_inc);
        $shellOutput = shell_exec($command_3);
        // I want this command to run once the previous one is completely finished
        $shellOutput = shell_exec($command_4); 
```

第 5 个 shell_exec 命令正在运行一个 .ini 文件，使用 povray 创建 50 帧场景，这样我就可以使用 ImageMagick 将所有这些帧组合成一个 gif。但它目前无法正常工作，因为我需要一种方法来以某种方式延迟 command_4 的执行，直到 command_3 完全完成（渲染所有 50 帧）。

如果有人想知道所有星号（'*'）是什么，那只是我在服务器中显示我的实际位置时感到不舒服。对不起，如果这让任何人感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T11:13:38.767

您可以使用 PHP 的[Process API](http://www.php.net/manual/en/ref.exec.php)实现此结果。

如果您查看[proc_close](http://www.php.net/manual/en/function.proc-close.php)函数，您会看到它清楚地表明：

> proc_close() 等待进程终止，并返回其退出代码。

[proc_open 手册页](http://www.php.net/manual/en/function.proc-open.php)上有一个很好的例子。[在执行期间，您可以通过调用proc_get_status](http://www.php.net/manual/en/function.proc-get-status.php)获取状态更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:48:47.480

如果您改用 exec 并测试返回变量是否成功，然后运行 ​​lastone 会有什么区别

```
 /*Throw together the animation using the .png files in the directory*/

    /* can you change command to remain in the browser, 
       and report the results rather than writing to dev/null? */
    $command_3 = 'cd ***'.$location.'; povray +I '.$newname_j.' +A +H384 +W512'.'2>&1';

    exec($command_3,$shellOutput,$return_value);
    // I want this command to run once the previous one is completely finished
    if ($return_value === 0){
         $command_4 = 'cd ***'.$location.'; convert -delay 0 -loop 0 *.png animation.gif'.' 2>&1';

         exec($command_4,$shellOutput,$return_value);
         if ($return_value !== 0){
                $failed_result = "An error on 4 ($return) occured.<br>";
                foreach($shellOutput as $v)
                     echo "shelloutput: $v<br>";
         }
    } else {
         $failed_result = "An error on 3 ($return) occured.<br>";
         foreach($shellOutput as $v)
                   echo "shelloutput: $v<br>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T10:57:27.023

我不明白您使用的 shell 的语法。但是，如果这有帮助，我从来没有遇到过 bash 如此不耐烦以至于在 povray 大量完成之前的渲染之前启动一个命令的问题。我使用了这样的语法：

> 重击
> 
> 对于我在 fracpos04*.pov 中；做povray $i +fn +w1280 +h960 +kff225 +a0.3; 完毕

# django - South 尝试迁移 django.contrib.auth

> ID：16138647
> 
> 赞同：2
> 
> 时间：2013-04-22T02:42:54.700
> 
> 标签：django, django-south

在 django 1.5 上，South 一直在尝试迁移 django.contrib.auth，这显然不起作用。我的项目中没有迁移文件夹，并且数据库是新的 - 任何地方都没有行。运行syncdb后，我得到

```
Synced:
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > haystack
 > captcha
 > compressor
 > south
 > ajaxuploader
 > users

Not synced (use migrations):
 - django.contrib.auth 
```

任何人都知道为什么南试图迁移 django.contrib.auth 的任何线索？这很奇怪。

# ios - 如何从 UIMenuController 中删除默认菜单项？

> ID：16138650
> 
> 赞同：4
> 
> 时间：2013-04-22T02:43:12.067
> 
> 标签：ios, uimenucontroller

我在 中创建了一个菜单`UITableViewCell`，它`UIMenuController`只有两个项目。但是当我运行它时，这个菜单显示了很多项目，似乎是 ios 默认菜单项，如屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/RyE94.jpg)

如何删除这些项目并只显示我定义的项目？谢谢。

这是我的代码：

```
- (id)initWithComment:(DSComment *)comment
{
    self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"comment"];

    UILabel *contentLabel=[[UILabel alloc] initWithFrame:CGRectMake(10, 45, 300, 0)];
    contentLabel.text=comment.message;

    [self.contentView addSubview:contentLabel];
    回归自我；
}

- (BOOL) canBecomeFirstResponder {
    返回是；
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [自己成为FirstResponder]；
    UIMenuController *menu = [UIMenuController sharedMenuController];
    UIMenuItem *like = [[UIMenuItem alloc] initWithTitle:@"Like" action:@selector(like:)];
    UIMenuItem *reply = [[UIMenuItem alloc] initWithTitle:@"Replay" action:@selector(reply:)];

    [菜单 setMenuItems:[NSArray arrayWithObjects:like, reply, nil]];

    [菜单 setTargetRect:CGRectMake(0, 0, 0.0f, 0.0f) inView:self];
    [菜单 setMenuVisible:YES 动画:YES];
}

```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T03:01:02.363

您需要覆盖[`canPerformAction:withSender:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/canPerformAction:withSender:)并返回`NO`您不想要的操作。

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(_myCustomActionSelector:)) return YES;
    return NO;
} 
```

# arrays - 按值对散列的散列进行排序

> ID：16138652
> 
> 赞同：2
> 
> 时间：2013-04-22T02:43:45.620
> 
> 标签：arrays, perl, hash-of-hashes

我有以下数据结构

```
my %HoH = {
      'foo1' => {
                        'bam' => 1,
                        'zip' => 0,
                      },
      'foo2' => {
                         'bam' => 0,
                         'zip' => 1,
                         'boo' => 1
                       }
    }; 
```

我想按存储在“zip”中的值从大到小对 KEY1（foo1 或 foo2）进行排序。

这就是我的做法。

```
use strict; use warnings;
use Data::Dumper;
my @sorted;
foreach my $KEY1 (keys %HoH) {
    # sort KEY1 by the value 'zip' maps to in descending order
    @sorted = sort {$HoH{$KEY1}{'zip'}{$b} <=> 
        $HoH{$KEY1}{'zip'}{$a}} keys %HoH;
}

print Dumper(\@sorted); 
```

我收到了一个奇怪的警告：在 test.pl 第 6 行中找到了预期大小相同的列表的参考。也`print Dumper(\@sorted);`正在打印

```
$VAR1 = [
      'HASH(0x1b542a8)'
    ]; 
```

什么时候应该打印

```
$VAR1 = [
      ['foo2', 'foo1']
    ]; 
```

因为`foo2`有 1`zip`并且`foo1`有 0 `zip`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T02:53:57.893

*   `%HoH`被声明为哈希，但被定义为哈希引用。使用括号`(...)`代替大括号`{...}`。
*   您无需遍历哈希即可对其进行排序。排序会解决这个问题。
*   如果你`sort {...} keys %HoH`，那么特殊变量`$a`和`$b`代表`%HoH`它执行排序时的键。
*   `$a`并且`$b`是相反的顺序，因为您的预期结果是按降序排列的。（更新：哦，我刚注意到你一开始就有这个。）
*   嵌套散列中的`zip`值为`$HoH{$KEY}{'zip'}`，这是您应该排序的值。

    ```
    use strict;
    use warnings;
    use Data::Dumper;

    my %HoH = (
          'foo1' => {
                            'bam' => 1,
                            'zip' => 0,
                          },
          'foo2' => {
                             'bam' => 0,
                             'zip' => 1,
                             'boo' => 1
                           }
        );

    my @sorted = sort {$HoH{$b}{'zip'} <=> $HoH{$a}{'zip'}} keys %HoH;
    print Dumper \@sorted; 
    ```

请注意，此代码的结果将为您提供一个数组：

```
$VAR1 = [
      'foo2',
      'foo1'
]; 
```

...不是嵌套数组：

```
$VAR1 = [
     ['foo2', 'foo1']
]; 
```

# javascript - AngularJS 为与父控制器中的操作相关的按钮创建指令并传入键/值对数组

> ID：16138658
> 
> 赞同：2
> 
> 时间：2013-04-22T02:44:52.373
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

我正在尝试在 AngularJS 中创建一个指令小部件，并且我想传入一个名称数组，动作 k/v 对来表示将触发父控制器上的动作的按钮。

到目前为止我已经尝试过：

```
<div data-collapse-widget data-title="Templates" data-widget-themis="false" data-color="grey" data-buttons="[new:'test']"> 
```

^我的指令在 HTML 中的开头

我的 javascript (coffeescript)

```
Module.directive 'collapseWidget', () ->
      directive =
        restrict:   'A'
        transclude: true
        template:   viewCollapseWidget
        scope:
          title:        '@title'
          widgetThemis: '@widgetThemis'
          color:        '@color'
          buttons:      '&buttons'

        replace: true
        compile: (element, attrs, transclusionFunc) ->
          (scope, iterStartElement, attrs) ->

            scope.collapsed = false
            scope.toggle = () ->
              scope.collapsed = !scope.collapsed

            origElem   = transclusionFunc scope
            content    = origElem.text()
            scope.orig = content
            #scope.obj = my_custom_parsing(content)
            scope.obj  = content 
```

但显然这不起作用。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:53:54.330

我从帖子中看不到 viewCollapseWidget 是什么，但基本思想是在“父”控制器中设置模型以包含您在您的

```
<div data-collapse-widget> 
```

因此，您可以简单地将模型值传递给指令，然后让按钮稍后执行传递的函数。此方法还允许隔离指令范围，而不是试图弄脏父范围。我发布了以下内容的**[JsFiddle](http://jsfiddle.net/Riffic/MXtQ6/)**：

插入指令后，您的视图可能看起来像这样：

```
<div ng-controller="ParentCtrl">
   <div collapse-widget 
        title="Show / Collapse" 
        buttons="model.buttons"></div>
</div> 
```

控制器逻辑和指令可能如下所示：

```
angular.module('main', [])
.controller("ParentCtrl", ['$scope', function( $scope ){

    $scope.doSomething = function(){
        alert('do something called from parent');
    }
    $scope.doSomethingElse = function(){
        alert('do something else called from parent ');
    }

    $scope.model ={
        buttons: {
           'Test Button':     $scope.doSomething, 
           'Another Button':  $scope.doSomethingElse
        }
    }
}])

.directive("collapseWidget", function factory() {
   return {
     template: '<div ng-init="collapsed=true">'+
                 '<h2 ng-click="collapsed= {true: false, false: true}[collapsed]">{{title}}</h2>'+
                 '<button ng-hide="collapsed" '+
                        'ng-repeat="(name, fn) in buttons" ng-click="fn()">{{name}}</button>'+
               '</div>',
    replace: true,
    restrict: 'A',
    scope: {
      title: "@",
      buttons: "="
    },
    link: function postLink( scope, element, attrs ) {
      //do something else here
    }
  };
}); 
```

# asp.net - 本地主机上的 Gravatar 默认图像缓存问题

> ID：16138662
> 
> 赞同：2
> 
> 时间：2013-04-22T02:45:39.803
> 
> 标签：asp.net, html, caching, browser-cache, gravatar

我对 gravatar 有一个非常奇怪的问题。

我有一个公开的默认图像`example.com/image.jpg`

很久以前（一个多星期前）我在公共网站上更改了这张图片。

从那时起，在`localhost`我开发网站时，我仍然看到旧的默认图像，但是当我在远程域上发布网站时，默认图像显示为正确的图像，即新图像。

我已经多次清除浏览器缓存并在所有主要浏览器上进行了尝试。

任何人都知道为什么会这样？

这就是我创建网址的方式

```
 string defaultImg = HttpContext.Current.Server.UrlEncode("http://example.com/image.jpg");
 string URL = string.Format("http://www.gravatar.com/avatar/{0}?r=pg&s={1}&d={2}",hash,size,defaultImg); 
```

然后请求头像

```
private bool makeAvatarRequest(string URL)
{
    try
    {
        WebRequest request = WebRequest.Create(URL);
        using (WebResponse response = request.GetResponse())
        {
            using (Stream responseStream = response.GetResponseStream())
            {
                displayImage(responseStream);
                return true;
            }
        }
    }
    catch (WebException ex)
    {
        return false;
    }
} 
```

并显示图像

```
private void displayImage(Stream stream)
    {
        HttpContext.Current.Response.ContentType = "image/png";
        System.Drawing.Image img = System.Drawing.Image.FromStream(stream);
        MemoryStream temp = new MemoryStream();
        img.Save(temp, ImageFormat.Png);
        byte[] buffer = temp.GetBuffer();
        HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length);

        img.Dispose();
        temp.Dispose();
    } 
```

# python - 如何在 Python 中读取 Progress 数据库文件 .b1

> ID：16138671
> 
> 赞同：1
> 
> 时间：2013-04-22T02:46:57.053
> 
> 标签：python, progress-db

我需要从遗留数据库系统中导出信息。该数据库是“进度”数据库，信息存储在扩展名为 .b1 的文件中

将所有数据库表导出到文本文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:29:30.780

.b1 文件是进度数据库的一部分，但实际上不是数据库本身。它包含“前图像”数据。它用于跟踪事务，以便数据库可以在错误/回滚等情况下撤消。该文件中的数据实际上对您没有帮助。

您想要的是数据库文件。通常命名为 .db、.d1、.d2、d3 等。

但是读取这些（二进制）文件将非常棘手。我什至不确定它们是如何构建的。使用 Progress 内置工具将所有数据转储为文本文件会容易得多。这些文本文件可以很容易地被 Python 中的一些简单程序读取。如果您在系统上安装了数据库，您将找到一个目录，其中包含为数据库提供服务的程序等。在那里您还将找到一些实用程序。

根据操作系统和进度的版本，它可能看起来有点不同。您可能希望进入 Data Administration 实用程序并进入 Admin => Dump Data and Definitions。

![进度数据管理屏幕截图](https://i.stack.imgur.com/Y9cQe.png)

如果您查看数据定义（模式）的结果文件 .df 和数据本身的 .d 文件，您应该能够弄清楚它的格式。关系根本不存储在数据库中。在 Progress 环境中，它们基本上只存在于访问数据库的应用程序中。

您还可以选择各种格式的导出数据（“文本”可能是最有趣的）。

如果您可以通过编程方式访问 Progress 环境，那么编写一个导出单个表的小程序可能会更容易。这将为“table1”创建一个以分号分隔的文件：

```
OUTPUT TO C:\temp\table1.txt.
FOR EACH table1 NO-LOCK:
  EXPORT DELIMITER ";" table1.
END.
OUTPUT CLOSE. 
```

# html - 如何让视频 iframe 出现在 Internet Explorer 的模式弹出窗口下方？

> ID：16138675
> 
> 赞同：0
> 
> 时间：2013-04-22T02:47:13.700
> 
> 标签：html, iframe, modal-dialog

客户的网站在同一页面上有一个 youtube 视频 iframe 和一个模态弹出窗口。

```
<iframe src="http://www.youtube.com/embed/xxx"></iframe> 
```

*（我已经排除了不相关的数据，例如宽度、高度和边框规格）。*

除 Internet Explorer 外，所有浏览器都运行良好；这里iframe 在打开时**出现在模态窗口的顶部。**

如何停止这种行为并**强制 iframe**像页面内容的其余部分一样出现在模式下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:47:13.700

youtube 视频的 URL 中需要包含以下内容：

**?rel=0&wmode=透明**

在上下文中：

```
<iframe src="http://www.youtube.com/embed/xxx?rel=0&amp;wmode=transparent"></iframe> 
```

# javascript - 以点开头的线是什么意思？

> ID：16138678
> 
> 赞同：4
> 
> 时间：2013-04-22T02:47:29.357
> 
> 标签：javascript

我正在阅读[Crafty 教程](http://craftyjs.com/tutorial/bananabomber/create-a-game)，遇到了一个我找不到文档的代码片段。搜索标点符号太难了。

有问题的第 11 行和第 12 行遵循该行并以and`Crafty.e`开头。这些属性属于什么对象？`.text``.css`

```
//the loading screen that will display while our assets load
Crafty.scene("loading", function () {
    //load takes an array of assets and a callback when complete
    Crafty.load(["sprite.png"], function () {
        Crafty.scene("main"); //when everything is loaded, run the main scene
    });

    //black background with some loading text
    Crafty.background("#000");
    Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 })
            .text("Loading")
            .css({ "text-align": "center" });
});

//automatically play the loading scene
Crafty.scene("loading"); 
```

这将在规范中的什么位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T02:50:34.943

以 a 开头的行`.`只是*在前一个*函数/行的对象上调用的函数/属性。

* * *

在您的具体情况下，

```
Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 })
      .text("Loading")
      .css({ "text-align": "center" }); 
```

`.text("Loading")`只是对结果的函数调用`Crafty.e(...)`。

类似地，`.css({ "text-align": "center" })`只是对前一行的结果的函数调用`.text("Loading")`。

因为它在同一条线路中，所以`.attr(...)`呼叫是不可见的，但它与其他线路中的其他呼叫完全相同。

* * *

在*扩展*方面，上面的示例与执行此操作相同：

```
var eResult = Crafty.e("2D, DOM, Text");
var attrResult = eResult.attr({ w: 100, h: 20, x: 150, y: 120 });
var textResult = attrResult.text("Loading");
var cssResult = textResult.css({ "text-align": "center" }); 
```

* * *

正如其他人所说，这只是一种*链接*对同一对象的调用的方法 - 但是，请注意（！）这在所有编程语言中并不总是可行的。jQuery 和许多其他 JavaScript 框架/库都采用这种方法来使开发更容易/更顺畅，因此它在 JavaScript 开发中很普遍。

特别是在 JavaScript 中，**真正的**语句终止是`;`（分号）。这意味着*单个*语句可以跨越多行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T02:49:31.973

这段代码的作者可能只是想让它更具可读性。行首`.`的 只是延续上一行。

所以这...

```
Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 })
            .text("Loading")
            .css({ "text-align": "center" }); 
```

...与将所有内容集中在一行中相同：

```
Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 }).text("Loading").css({ "text-align": "center" }); 
```

行尾的分号终止语句。

但是，通过按照作者的方式编写它，更容易看出您正在从`attr`函数中获取结果并将其输入到`text`函数中，然后这些结果最终输入到`css`函数中。嗯...无论如何**我更容易阅读。**可读性可能是非常主观的。

这称为函数链接，并在[此博客文章](http://css.dzone.com/news/javascript-chaining-your-metho)中通过一些示例进行了描述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T02:57:35.550

只是添加到这些先前的答案 - 您的具体问题是“这在 API 中的什么位置？” 如果您查看 API 中的方法签名，您将看到这些方法中的每一个都返回对“this”的引用。例如：

```
public this .attr(String property, * value) 
```

因此，您可以将调用“链接”在一起（正如其他评论者所建议的那样），因为正在返回对象引用。例如

```
Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 }).text("Loading").css({ "text-align": "center" }); 
```

是相同的

```
var myEntity = Crafty.e("2D, DOM, Text");
myEntity.attr({ w: 100, h: 20, x: 150, y: 120 });
myEntity.text("Loading");
myEntity.css({ "text-align": "center" }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T02:48:57.627

这只是上一行的延续。在一行中，它是：

```
Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 }).text("Loading").css({ "text-align": "center" }); 
```

它被称为“Chaining”，前面的函数调用返回一个包含函数的接口（通常是一个对象）。无需中间存储它们或逐个调用它们，您只需“链接”下一个调用，因为上一次调用与它返回的一样好。

```
Crafty.e("2D, DOM, Text")
      .attr({ w: 100, h: 20, x: 150, y: 120 })
      .text("Loading") 
      .css({ "text-align": "center" });

//synonymous to

var eReturn = Crafty.e("2D, DOM, Text");
var aReturn = eReturn.attr({ w: 100, h: 20, x: 150, y: 120 });
var tReturn = aReturn.text("Loading");

tReturn.css({ "text-align": "center" }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T02:50:30.793

它们基本上是前几行的延续。所以第 11 行和第 12 行本质上是一样的： Crafty.e("2D, DOM, Text").attr({ w: 100, h: 20, x: 150, y: 120 }).text("Loading" ).css({ "text-align": "center" });

text 方法被应用于 .atr 函数的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T02:52:10.293

这些不是新的代码行，它们是“Crafty.e”的延续

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T02:49:16.690

它基本上是链接方法。[在这里](http://onwebdev.blogspot.com/2011/04/javascript-method-chaining.html)阅读更多

它只是作为一个新行列出来更清楚，但你基本上只是一个接一个地调用这些方法。

# ruby-on-rails - 为什么 Date.strptime 省略时间？

> ID：16138681
> 
> 赞同：0
> 
> 时间：2013-04-22T02:47:42.637
> 
> 标签：ruby-on-rails, ruby

我运行了以下命令：

```
Date.strptime('04/16/2013 06:00 PM', '%m/%d/%Y %I:%M %p') 
```

我正在尝试获取提供的字符串的 DateTime 对象。

相反，我得到：

```
 => #<Date: 2013-04-16 ((2456399j,0s,0n),+0s,2299161j)> 
```

似乎 Ruby 忽略了时间，这就是它在我的 Rails 应用程序中保存到数据库的方式，除了它添加了 5AM 作为默认时间。

我如何让它也解析时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:56:08.630

如果您对实际时间感兴趣，请尝试使用时间而不是日期。

所以：

```
Time.strptime('04/16/2013 06:00 PM', '%m/%d/%Y %I:%M %p') 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:53:25.883

```
DateTime.strptime('04/16/2013 06:00 PM', '%m/%d/%Y %I:%M %p') 
```

# asp.net - 实时服务器上的 ASP.NET 服务和 AJAX XMLHttpRequest 错误 400

> ID：16138683
> 
> 赞同：0
> 
> 时间：2013-04-22T02:47:54.823
> 
> 标签：asp.net, ajax, json

我正在研究 asp.net AJAX 服务，其中一种方法是“更新数据库”。

当我在本地 IIS 上测试网站时没有出现问题。但是当我上传到公共 IIS 时，XMLHttpRequest 总是返回 400 错误。

谁能帮我解释一下为什么会出现这个问题？我应该怎么做才能解决它？如果我的问题不够清楚，请告诉我。

这是我调用服务的代码预览，

```
var objFaq = {
        config : {
             isPostBack : false,
             async:false,
             cache:false,
             type :'POST',
             contentType:"application/json; charset=utf-8",
             data:'{}',
             dataType :'json',
             method:'',
             url:'',
             categoryList:"",
             ajaxCallMode:0,
             arr:[],
             arrModule:[]  ,
             baseURL: 'http://www.mywebsite.com/Service/FaqService.asmx/'
            },

        ajaxCallProduct: function(config) {
           $.ajax({
                    type: objFaq.config.type,
                    contentType: objFaq.config.contentType,
                    cache: objFaq.config.cache,
                    async: objFaq.config.async,
                    url: objFaq.config.url,
                    data: objFaq.config.data,
                    dataType: objFaq.config.dataType,
                    success: objFaq.ajaxSuccess,
                    error: objFaq.ajaxFailure                            
                  });
        },

        likeQuestion:function(id)
        {
            try
            {
                this.config.method="Like";
                this.config.url=objFaq.config.baseURL + this.config.method;
                this.config.data = JSON2.stringify({id:id});
                this.config.ajaxCallMode=1;
                this.ajaxCallProduct(this.config);
            }
            catch(e)
            {
                alert(e.message);
            }
        },

        dislikeQuestion:function(id)
        {
            try
            {
                this.config.method="Dislike";
                this.config.url=objFaq.config.baseURL + this.config.method;
                this.config.data = JSON2.stringify({id:id});
                this.config.ajaxCallMode=1;
                this.ajaxCallProduct(this.config);
            }
            catch(e)
            {
                alert(e.message);
            }
        },

        ajaxSuccess: function(data) { 
            switch (objFaq.config.ajaxCallMode) {
              case 0:
              break;    
              case 1:  
              //alert('sukes');
              break;
            }
        },
        ajaxFailure: function(xhr, status, errorThrown) {                
            switch(xhr.status)
            {
                case 400:
                    alert('400' + xhr.responseText);
                    break;
                default:
                    alert(xhr.status);
                    break;
                break;
            }
        }
    }; 
```

# mongodb - 在 mapreduce 之后查询以将结果输出到集合中

> ID：16138687
> 
> 赞同：0
> 
> 时间：2013-04-22T02:48:18.003
> 
> 标签：mongodb, mapreduce

我在 Mongodb 有 mapreduce 工作

```
function Map() {
key = {WebsiteCode: this.WebsiteCode, CategoryAlias: this.CategoryAlias, ArticleId: this.ArticleId,
CreatedOn: new Date(this.CreatedOn.getFullYear(),this.CreatedOn.getMonth(),this.CreatedOn.getDate())
};
        val={TotalView:this.TotalView };
        emit(key, val);
}

function Reduce(key, values) {
    var result = {TotalView:0 };
    values.forEach(function(value){               
        result.TotalView += value.TotalView;
    });
return result;
} 
```

我将输出放入集合`TrackingTotal`中，但是，我只想选择`TotalView > 1000`在将该结果插入此集合之前具有的文档。

我的解决方案是内联输出，我在插入之前选择符合上述条件的文档。

但我想通过一个命令运行 mapreduce 中的查询来输出这个集合的方向。功能怎么样`Finalize()`？对不起，我是 Mongodb 的新手。

# multithreading - GPU与CPU？GPU中用于程序计算加速的内核/线程数？

> ID：16138688
> 
> 赞同：6
> 
> 时间：2013-04-22T02:48:39.763
> 
> 标签：multithreading, performance, parallel-processing, gpgpu, multicore

为了进行并行计算，我需要一些帮助来理解 GPU 上的内核与 CPU 中的内核的概念。

当谈到 CPU 中的内核时，它似乎很简单。我有一个超级密集的“for”循环，迭代四次。我的 Intel i5 2.26GHz CPU 中有四个内核。我给每个核心一个循环。四个循环中的每一个都相互独立。繁荣 - 我现在创建了四个线程和 100% 的 CPU 使用率（而不是只有一个核心的 25% 的 CPU 使用率）。我的“for”循环现在的运行速度几乎是我不并行化它时的四倍。顺便说一句，对于“for”循环，我使用的是 Microsoft Visual Studio 2012 上可用的自动并行化，如以下在线示例所示：( [http://msdn.microsoft.com/en-us/library/hh872235\. .aspx](http://msdn.microsoft.com/en-us/library/hh872235.aspx)）。

相比之下，我什至不知道我的笔记本电脑 GPU（Intel Graphics Media Accelerator HD，或 Intel HD Graphics，具有 1696MB 共享内存）中可用于并行计算的内核数量。我什至不知道将 GPU 与 CPU 进行比较的有效方法。当我在显卡描述旁边看到“12@500MHz”时，我想知道这是否意味着显卡有 12 个用于并行化的内核，可以像 CPU 中的 4 个内核一样工作，除了 GPU 内核运行在 500MHz [慢] 而不是 2.26GHz [快速]？是否有与 Windows 任务管理器中的 CPU 使用率相当的 GPU 使用率？我是一个尝试在 Visual Studio 2012 中使用 C++ 库的新手，如果这有什么不同的话。当我编写实际的 GPU 软件时，并行化代码如下所示：( [http://msdn.microsoft。](http://msdn.microsoft.com/en-us/library/hh265137.aspx)）。

那么，请您填补我知识中的一些空白或错误​​，或者帮助我比较两者吗？我不需要一个超级复杂的答案，比如“你无法将 CPU 核心与 GPU 核心进行比较，因为空白”或“GPU 核心并不是真正的核心，就像 CPU 核心一样”。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T11:06:35.427

首先，只有当您在代码中请求它们时，操作系统才会启动更多内核。尝试使用 OpenMP 或 Win32 线程在 i5 上实现并行性。

其次，CPU 时钟不仅仅是 GPU 时钟。如果 GPU 的时钟与 CPU 相同，则可以将其用作炉灶做饭。GPU中的核心不仅仅是CPU。线程和核心之间是有区别的。

第三，我建议您阅读 CPU 和 GPU 的规格和参考手册。另外，不要忘记 PCI-e。它是并行编程实现的瓶颈。

希望这能澄清你的疑惑。还有什么问题，欢迎提问。

# shell - 如何在ubuntu中将指定的文件名复制到指定的目录名

> ID：16138692
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:49:11.727
> 
> 标签：shell, unix, ubuntu, command-line

我有一些文件，文件的名称如

*   CAB01_backup
*   CAB02_backup
*   CAB03_backup
*   ...
*   CAB120_backup

此文件位于目录名称“文件”（/home/files/）中

并且在同一路径下除了“files”目录之外还有其他目录，其他目录的名称如文件名（CU-CAB01，CU-CAB02，..，CU-CAB120）。

如何使用 linux 命令或 shell 脚本将文件复制/移动到相同的目录名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:58:17.203

我*认为*这是您正在寻找的东西：

```
cd /home/files
for f in CAB*_backup; do mkdir "CU_${f/_backup}" && mv "$f" "CU_${f/_backup}"; done 
```

唯一可能令人困惑的部分是`${f/_backup}`语法。只是用空字符串替换`"_backup"`变量中的字符串。`$f`

# r - rbind 多个数据集

> ID：16138693
> 
> 赞同：42
> 
> 时间：2013-04-22T02:49:12.690
> 
> 标签：r

我有 3 个数据集要合并在一起。我已将列重命名为相同的：

```
names(DF1) <- c("A", "B", "C")
names(DF2) <- c("A", "B", "C")
names(DF3) <- c("A", "B", "C") 
```

他们每个人都有不同数量的观察（分别为 34、54、23）

但是，当我尝试使用 rbind 函数时，它会返回错误：

```
total <- rbind(DF1, DF2, DF3) 
```

> match.names(clabs, names(xi)) 中的错误：名称与以前的名称不匹配

从其他已回答的问题来看，由于列名称不同，应该会出现错误，但我已经检查并重新检查了它们是否已重命名为相同的。

我想最终得到一个包含列标题的 111 个观察值的总数据集。我是 R 的初学者，很多其他问题的答案都让我难以理解。谁能用外行的方式回答这个问题？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-22T06:01:03.773

你可以`do.call`像这样使用：

```
do.call("rbind", list(DF1, DF2, DF3)) 
```

请注意，第二个参数`do.call`是一个列表。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-10-22T12:12:39.023

tidyverse方法是从**dplyr**包中**使用：**`bind_rows()`

 **```
bind_rows(DF1, DF2, DF3) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-01-18T14:09:46.077

为了提高性能，请尝试`rbindlist`从`data.table`包中获取，例如。

```
rbindlist(list(DF1,DF2,DF3)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-22T04:04:29.007

这可能会帮助您：

可以`rbind.fill`从`plyr`包中使用（即使列名不同也可以使用）

这是`optmatch`包中数据集的示例`R`

```
library(optmatch)
 library(plyr)
data(nuclearplants)
x<-nuclearplants
data1<-as.data.frame(x$cost)
data1<-data1[1:20,]
data1<-as.data.frame(data1)
data2<-as.data.frame(x$date)
rbind.fill(data1,data2)

data1    x$date
1  460.05     NA
2  452.99     NA
3  443.22     NA
4  652.32     NA
5  642.23     NA
6  345.39     NA
7  272.37     NA
8  317.21     NA
9  457.12     NA
10 690.19     NA
11 350.63     NA
12 402.59     NA
13 412.18     NA
14 495.58     NA
15 394.36     NA
16 423.32     NA
17 712.27     NA
18 289.66     NA
19 881.24     NA
20 490.88     NA
21     NA  68.58
22     NA  67.33
23     NA  67.33
24     NA  68.00
25     NA  68.00
26     NA  67.92
27     NA  68.17
28     NA  68.42
29     NA  68.42
30     NA  68.33
31     NA  68.58
32     NA  68.75
33     NA  68.42
34     NA  68.92
35     NA  68.92
36     NA  68.42
37     NA  69.50
38     NA  68.42
39     NA  69.17
40     NA  68.92
41     NA  68.75
42     NA  70.92
43     NA  69.67
44     NA  70.08
45     NA  70.42
46     NA  71.08
47     NA  67.25
48     NA  67.17
49     NA  67.83
50     NA  67.83
51     NA  67.25
52     NA  67.83 
```**

# language-agnostic - 如何使用 C++ 绘制 HSV 值

> ID：16138706
> 
> 赞同：-1
> 
> 时间：2013-04-22T02:50:27.763
> 
> 标签：language-agnostic, mfc, rgb, hsv

我对这些东西很陌生，我已经在 C++ 中实现了一个代码来从 RGB 值中查找 HSV 值。

```
R = 255;
G = 0;
B = 0; 
```

为此，我得到了`HSV`as 的值：

```
H = 0;
S = 1;
V = 1; 
```

不，我正在这里`V= 255V`，`S = 255S`而`H = H/2`。我得到了正确的`hsv`值，但我不知道如何在 24 位图图像中绘制它们。我已经搜索了互联网，但可以找到机器人。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:11:41.590

大多数图像格式（包括位图）以 RGB 格式（或 BGR 格式，取决于[字节序](http://en.wikipedia.org/wiki/Endianness)）存储值。对于 24 位位图，红色使用 8 位，绿色使用 8 位，蓝色使用 8 位，因此如果要以这种格式存储图像，则必须使用 RGB（或在保存之前转换为 RGB）以使图像正确着色。

现在，如果您不关心图像的显示方式，而只想将 H、S 和 V 分量存储在图像的 R、G 和 B 通道中，您可以轻松地做到这一点（只需将通道放大到所需的范围）。因此，对于 24 位位图，每个通道 8 位意味着通道的值介于 0 和 255 之间。假设 H、S 和 V 在 0 到 1 的范围内，您可以将每个通道乘以 255 以将它们置于该范围内.

下面是分别存储在图像的 R、G 和 B 通道中的 Stack Overflow 徽标的 H、S 和 V 值。

![RGB 通道中的 HSV 示例](https://i.imgur.com/D6cv6GM.png)

# security - 如何使用给定的证书验证 X509Certificate 链

> ID：16138709
> 
> 赞同：0
> 
> 时间：2013-04-22T02:50:33.737
> 
> 标签：security

我有用户提供的受信任证书（可能是自签名的）。我想使用该证书来验证 https 服务器证书链。

我发现有这样的代码示例： [Validate X.509 certificate against CA in Java](https://stackoverflow.com/questions/6629473/validate-x-509-certificate-agains-concrete-ca-java) ，仅验证最后一个证书 certs[0] 是否由给定证书签名。

以下链接使用 CertPathValidator 验证证书。 [Java X509 证书解析和验证](https://stackoverflow.com/questions/10043376/java-x509-certificate-parsing-and-validating)

我应该遵循哪个例子？我想如果证书链中的任何证书由给定证书签名，则验证通过，对吗？

# jquery - jQuery Mobile 按钮网格

> ID：16138712
> 
> 赞同：0
> 
> 时间：2013-04-22T02:50:58.040
> 
> 标签：jquery, jquery-mobile

我对 JQuery Mobile 很陌生，我正在尝试创建一个 2 列 3 行的按钮网格作为我的主屏幕。当我使用 div class="ui-grid-b" 时，我得到了我希望的外观，但我无法让网格项充当动画效果很好的按钮。

如果我用按钮替换网格中的块，它看起来很丑。

关于如何创建漂亮的按钮网格有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:25:45.023

这对您不起作用（[演示](http://jsfiddle.net/AQxxp/2/)）？

```
<div class="ui-grid-b">
    <div class="ui-block-a">
        <div class="ui-bar ui-bar-e">
            <button type="submit" data-theme="a">Button A</button>
        </div>
    </div>
    <div class="ui-block-b">
        <div class="ui-bar ui-bar-e">
            <button type="submit" data-theme="b">Button B</button>
        </div>
    </div>
    <div class="ui-block-c">
        <div class="ui-bar ui-bar-e">
            <button type="submit" data-theme="c">Button C</button>
        </div>
    </div>
</div>
<div class="ui-grid-d my-grid">
    <div class="ui-block-a">
        <button data-icon="home" data-iconpos="notext" data-inline="true">Button</button>
    </div>
    <div class="ui-block-b">
        <button data-icon="arrow-l" data-iconpos="notext" data-inline="true">Button</button>
    </div>
    <div class="ui-block-c">
        <button data-icon="grid" data-iconpos="notext" data-inline="true">Button</button>
    </div>
    <div class="ui-block-d">
        <button data-icon="arrow-r" data-iconpos="notext" data-inline="true">Button</button>
    </div>
    <div class="ui-block-e">
        <button data-icon="gear" data-iconpos="notext" data-inline="true">Button</button>
    </div>
</div> 
```

文档中也有一[整页](http://view.jquerymobile.com/1.3.1/demos/widgets/grids/grid-buttons.php)专门用于说明这一点。

# javascript - 所有 AJAX 请求都完成了吗？

> ID：16138714
> 
> 赞同：1
> 
> 时间：2013-04-22T02:51:52.667
> 
> 标签：javascript, ajax, multithreading, asynchronous

我在一个网站上工作，在我的代码中的某个时刻，我进行了一些 AJAX 调用：
`PART(I)`

```
 for (var i = 0; i < arr.length; i++){
        var id = arr[i].id;
        makeXHRRequest(id);
  } 
```

`makeXHRRequest()`函数是这样 的：

`PART(II)`

```
function makeXHRRequest(id){
var jsonArg = ["id", id];
var jsonString = JsonBuilder(jsonArg);
var requestUrl = getUrl();

$.ajax({
      url: requestUrl,
      type: "POST",
      contentType: 'application/json',
      data: jsonString,
      datatype: "json",
      processdata: false,
      success: function (result, status) {
        console.log(result);
        // TODO check if result is valid
        if(result == null || result == ""){
         //...
        }else{
            for(var i = 0; i < parent.arr.length; i++){
                for(var j = 0; j < count; j++){
                   // !!!!! make another ajax call !!!!!!!!
                    makeAnotherXHRRequest(id);
                }
                }
            }
        }
      },
      error: function (xhr, ajaxOptions, thrownError) {
          console.log("in get groupUsers fail");
      }
}); 
```

}

请注意，这些是嵌套的 AJAX 调用 ->`part(I)`上面进行的每个 ajax 调用都会在`part(II)`. 所以我的问题是，如果程序要在所有数据准备好后执行某些任务，程序如何知道所有请求何时完成`part(I)`以及所有请求何时`part(II)`完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T03:02:57.570

jQuery 中的[Ajax 方法返回](http://api.jquery.com/jQuery.ajax/)[Deferred objects](http://api.jquery.com/category/deferred-object/)，又名*promises* ，如果它们完成与否，您可以*收听它们。*在您的情况下，我们可以将它们收集到一个数组中。然后[`$.when`](http://api.jquery.com/jQuery.when/)，如果它们都已解决，我们会使用它们来监听*Promise*。

```
var promises = [];

function makeXHRRequest(id){
  ...
  //we return the ajax promise
  return $.ajax(..
  ...
}

for (var i = 0; i < arr.length; i++){
  ...
  //we store the promise
  promises.push(makeXHRRequest(id));
}

$.when
 .apply(null,promises) //listen to all the promises
 .done(function(){

   /*code here executes when all ajax promises resolves*/

 }); 
```

# regex - 正则表达式识别包含空格的单词

> ID：16138715
> 
> 赞同：0
> 
> 时间：2013-04-22T02:51:59.550
> 
> 标签：regex

我需要识别文本中的字符串并将其替换为空字符串。问题是，它并不总是作为一个词本身存在。每个字母或一组字母之间会有空格字符。例如：

对于“体面”这个词，我可能会面临以下价值观。得体，得体，得体。

有没有办法使用“体面”字作为任何正则表达式的输入来识别这些字符串？我对正则表达式很陌生。请帮忙！！

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:56:59.890

如果你使用

'体面的 ？'

它将匹配带有额外空格的单词

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:59:36.670

表达式`"D\s*e\s*c\s*e\s*n\s*t"`会做到这一点。每个字母后跟零个或多个空格。实际上`\s`是“空白字符”。如果您只想要文字空格，则可以替换`\s*`为`*`（空格后跟星号）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T03:04:05.783

```
\bD\s*e\s*c\s*e\s*n\s*t\s* 
```

所以你匹配`D ec ent, De ce nt, De ce n t, decent Decent`

但不是`blade centimeter`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:01:25.080

首先是一些代码：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class WordsWithSpaces {

    public static void main(String[] args) {
        String test = "Descent D escent De s  cent desce nd";
        String word = "descent";
        String pattern = "";
        for(int i=0; i<word.length();i++) {
            pattern = pattern+word.charAt(i)+"\\s*";
        }
        System.err.println("pattern is: "+pattern);
        Pattern p = Pattern.compile(pattern,Pattern.CASE_INSENSITIVE);
        Matcher m = p.matcher(test);
        while(m.find()) {
            String found = test.substring(m.start(),m.end());
            System.err.println(found+" matches");
        }

    }

} 
```

现在解释一下：\s 是空白字符类。这包括空格和制表符以及（可能）换行符。在这段代码中，我获取我要查找的单词的每个字符，并附加“\s”，其中“*”表示出现 0 次或 mor 次。

另外，为了避免区分大小写，我在模式上设置了 CASE_INSENSITIVE 标志。

字符类在您选择的编程语言中可能没有相同的名称，但应该有一个用于空格的名称。检查您的文档。

# coldfusion - 提交表单时出现 JWildCardHandler 内部 500 错误

> ID：16138717
> 
> 赞同：0
> 
> 时间：2013-04-22T02:52:44.450
> 
> 标签：coldfusion, iis-7.5

我们在冷融合站点上遇到了这个无情的 500 错误。我们使用的是 Coldfusion 9.0.1，只有当我们提交表单以更新数据库表时，才会收到此错误。只有一页导致它，但日志中没有任何内容表明发生了什么。

我打开了这个站点的详细错误，我看到错误是由错误代码 0x00000000 的 JWildCardHandler 引起的。

我已经检查了所有内容的权限。即使在正在使用的 Access DB 上。

我在另一台服务器上尝试了相同的代码和数据库，我完全没有收到错误。我尝试确保两台服务器上的 IIS 和 CF 的配置完全相同，但仍然出现错误。

有任何想法吗？似乎没有理由抛出这个错误。

这是导致错误的表单处理页面。真的不多，只是一些基本的查询：

```
<cfquery datasource="#Datasource#" name="UpdateTheTable">
    UPDATE Our_table SET 
    #Est# = #PreserveSingleQuotes(EstValue)#,
    Username = '#CurrentUser.Username#',
    DateCurrent = NOW()
    WHERE Attribute1=#CurrentUser.Attribute1ID# AND Attribute2=#Attribute2ID#;
</cfquery> 
```

这是我们的堆栈跟踪：

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type='text/xsl' href='freb.xsl'?>
<!-- saved from url=(0014)about:internet -->
<failedRequest url="http://oursite.domain.com:80/subdir/index.cfm"
               siteId="8"
               appPoolId="subdir"
               processId="13528"
               verb="POST"
               remoteUserName=""
               userName=""
               tokenUserName="NT AUTHORITY\IUSR"
               authenticationType="anonymous"
               activityId="{00000000-0000-0000-7E06-0080000000E2}"
               failureReason="STATUS_CODE"
               statusCode="500"
               triggerStatusCode="500"
               timeTaken="202"
               xmlns:freb="http://schemas.microsoft.com/win/2006/06/iis/freb"
               >
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>1</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.490Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
  <Data Name="SiteId">8</Data>
  <Data Name="AppPoolId">subdir</Data>
  <Data Name="ConnId">1610614393</Data>
  <Data Name="RawConnId">0</Data>
  <Data Name="RequestURL">http://oursite.domain.com:80/subdir/index.cfm</Data>
  <Data Name="RequestVerb">POST</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>GENERAL_REQUEST_START</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{D42CF7EF-DE92-473E-8B6C-621EA663113A}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>12</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.490Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>GENERAL_ISAPI_HANDLER</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{D42CF7EF-DE92-473E-8B6C-621EA663113A}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>1</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.599Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>ISAPI_START</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{2E94E6C7-EDA0-4B73-9010-2529EDCE1C27}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="ISAPI Extension" Guid="{A1C2040E-8840-4C31-BA11-9871031A19EA}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>1</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.599Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
  <Data Name="DllName">C:\ColdFusion9\runtime\lib\wsconfig\1\jrun_iis6_wildcard.dll</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>CALL_ISAPI_EXTENSION</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{ACADE3B2-B7D7-4339-956C-811B4EDB1B24}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="ISAPI Extension" Guid="{A1C2040E-8840-4C31-BA11-9871031A19EA}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>2</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.614Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>ISAPI_EXTENSION_DONE</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{ACADE3B2-B7D7-4339-956C-811B4EDB1B24}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>2</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.614Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>ISAPI_END</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{2E94E6C7-EDA0-4B73-9010-2529EDCE1C27}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>33</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.614Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
  <Data Name="HttpStatus">500</Data>
  <Data Name="HttpSubStatus">0</Data>
  <Data Name="FileNameOrURL">500.htm</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>GENERAL_SEND_CUSTOM_ERROR</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{D42CF7EF-DE92-473E-8B6C-621EA663113A}</EventGuid>
 </ExtendedTracingInfo>
</Event>
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
 <System>
  <Provider Name="WWW Server" Guid="{3A2A4E84-4C21-4981-AE10-3FDA0D9B0F83}"/>
  <EventID>0</EventID>
  <Version>1</Version>
  <Level>0</Level>
  <Opcode>2</Opcode>
  <Keywords>0x0</Keywords>
  <TimeCreated SystemTime="2013-04-22T13:36:17.692Z"/>
  <Correlation ActivityID="{00000000-0000-0000-7E06-0080000000E2}"/>
  <Execution ProcessID="13528" ThreadID="13628"/>
  <Computer>Server1</Computer>
 </System>
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-7E06-0080000000E2}</Data>
  <Data Name="BytesSent">6428</Data>
  <Data Name="BytesReceived">4864</Data>
  <Data Name="HttpStatus">500</Data>
  <Data Name="HttpSubStatus">0</Data>
 </EventData>
 <RenderingInfo Culture="en-US">
  <Opcode>GENERAL_REQUEST_END</Opcode>
 </RenderingInfo>
 <ExtendedTracingInfo xmlns="http://schemas.microsoft.com/win/2004/08/events/trace">
  <EventGuid>{D42CF7EF-DE92-473E-8B6C-621EA663113A}</EventGuid>
 </ExtendedTracingInfo>
</Event>
</failedRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T19:20:13.077

我最近遇到了同样的问题，同样的错误，同样的 0x00000000 错误代码，甚至在单个表单上出现（其他表单工作正常）也是如此。问题归结为 CF 的 neo-runtime.xml 中的“postParametersLimit”设置。表单数据超出限制，导致 CF 拒绝请求，并在 JWildCardHandler 处理程序处显示错误。我只是在 neo-runtime 中增加了 postParametersLimit（使用记事本，只需在 xml 文件中对该参数名称进行文本搜索。您会看到它的值。更改。保存。）并重新启动 CF 服务。一切都很好。我在负载平衡的 64 位 Win2008 R2 服务器上运行 64 位 CF9.0.2。祝你好运。

# ios - 使用 librtmp 编译 ffmpeg

> ID：16138718
> 
> 赞同：0
> 
> 时间：2013-04-22T02:52:45.767
> 
> 标签：ios, ffmpeg, openssl, rtmp

在为 OSX 编译 ffmpeg 时，我可以简单地使用：

```
./configure --enable-librtmp --enable-gpl 
```

命令并获得可以使用 rtmp 流进行 I/O 的构建。

如果我尝试使用以下方法为 iOS 编译：

```
./configure \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--disable-ffserver \
--disable-mmx \
--enable-gpl \
--enable-shared \
--enable-librtmp \
--enable-avresample \
--enable-cross-compile \
--enable-pic \
--sysroot="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs /iPhoneOS6.1.sdk" \
--target-os=darwin \
--cc="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2" \
--extra-cflags="-arch armv7s -mfpu=neon -miphoneos-version-min=6.1" \
--extra-ldflags="-arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -miphoneos-version-min=6.1" \
--arch=arm \
--cpu=cortex-a9 \
--prefix=compiled/armv7s 
```

它错误地说`ERROR: librtmp cannot be found`。具体来说：

```
 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -miphoneos-version-min=6.1 --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -Wl,-dynamic,-search_paths_first -I/usr/local/include -L/usr/local/lib -o /var/folders/4m/8hcrycqx777_ksz6d32nrn_m0000gp/T//ffconf.b2zp97z8 /var/folders/4m/8hcrycqx777_ksz6d32nrn_m0000gp/T//ffconf.VhdlpSe1.o -lrtmp -lz -lssl -lcrypto -lm -lbz2 -lz
ld: warning: ld: warning: ignoring file /usr/local/lib/librtmp.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (armv7s): /usr/local/lib/librtmp.dylibignoring file /usr/local/lib/libz.a, file was built for archive which is not the architecture being linked (armv7s): /usr/local/lib/libz.a

Undefined symbols for architecture armv7s:
  "_RTMP_Socket", referenced from:
      _check_RTMP_Socket in ffconf.VhdlpSe1.o
     (maybe you meant: _check_RTMP_Socket)
ld: symbol(s) not found for architecture armv7s
collect2: ld returned 1 exit status
ERROR: librtmp not found 
```

我已经`openssl`使用`ios-openssl`在 github 上找到并`librtmp`通过`rtmpdump`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:19:25.900

我最终编译`librtmp`并`openssl`使用`ios-librtmp`and `ios-openssl`，安装`rtmpdump`并`openssl`使用`brew`, `export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig`，然后更改`/usr/local/lib/pkgconfig`for `libcrypto.pc`、`libssl.pc`、`openssl.pc`和中的文件，`librtmp.pc`以指向 iOS i386、armv7 和 armv7s 编译库。

# assembly - Windows 7 上的 FS 寄存器访问冲突

> ID：16138720
> 
> 赞同：0
> 
> 时间：2013-04-22T02:53:07.270
> 
> 标签：assembly, windows-7, crash, windows-xp, access-violation

崩溃指令（其中任何一个都会导致访问冲突）：

```
LODS BYTE PTR FS:[ESI]
LODS WORD PTR FS:[ESI]
LODS DWORD PTR FS:[ESI] 
```

我正在尝试为尝试移植 Windows 95 游戏的客户端修复崩溃，但由于没有可用的源代码，我目前正在汇编中进行调试。该应用程序在 Windows 7 上频繁且随机地崩溃，但在 Windows XP 上运行良好。调试它表示访问冲突，并且在尝试访问 FS 寄存器时发生。

我在 XP 和 Windows 7 上都进行了调试和比较，发现访问冲突发生是因为使用 ESI 访问 FS 寄存器时，在 Windows 7 上地址总是超出范围。我还尝试在汇编代码中添加 SEH 异常处理程序但即使在读取 FS:[0] 时也会发生访问冲突（那里的数据显示为未知）：

```
普沙德
推 004DE918
MOV EAX,DWORD PTR FS:[0]
推EAX
```

应用程序是否会导致寄存器损坏，但仅在 Windows 7 上而不是 XP 上发生这种情况的可能原因是什么？Windows 7上53的不同FS寄存器选择器与此有关吗？有什么建议或解决方案让我尝试吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:06:01.940

Windows 使用 FS 寄存器快速访问 TIB（线程信息块），也称为 TEB（线程环境块）。FS 将覆盖 TIB 数据结构的段的选择器存储在内存中。我希望这个段的大小非常小，并且由于对任何超出 TEB 大小的地址的访问都将导致一般错误异常。事实上，TEB 数据结构布局和存储在 FS 中的 TEB 地址是没有文档记录的，并且可以由 Microsoft 从版本到版本进行更改。也许 TEB 的大小在 Windows 7 中减小了。

无论如何，为了更有效地讨论这个问题，请提供 FS 和 ESI 在崩溃时刻的值。

# python - Python 按钮和厚框属性

> ID：16138724
> 
> 赞同：0
> 
> 时间：2013-04-22T02:53:28.463
> 
> 标签：python, qt, pyqt

我可以了解以下内容：

我在我的程序中使用从 Qt 导入和转换（到 py）的文件。在我的第一个窗口中，我创建了一个按钮：我想：单击此按钮后，我将进入我的第二个窗口（也使用 QT 创建）。

这个主窗口也有 2 个厚盒。车1车2

第二个窗口作为一组 2 个组合框。

如果我加厚 car1 我希望每个组合框允许我只选择 (speed1,weight1,fuel1) 如果我加厚 car2 我希望每个组合框只允许我选择 (speed2,weight2,fuel2) 如果我加厚 car1&car2 我希望每个允许我选择的组合框 (speed1,weight1,fuel1,speed2,weight2,fuel2)

我可以有一个好的建议或代码示例吗？

提前致谢，

06

我刚开始使用python：

```
#10----------------------------------------------
from PyQt4 import QtCore, QtGui
import sys
from os.path import expanduser
import os
import shlex

#import Converted Python UI File
from W0 import Ui_MainWindow

class Main(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)

    #30-----------------------------------------------------------
    # Connect the pushbutton i am unable to get any action from the button
    pushbutton = QtGui.QPushButton('Popup Button')

    def main():
    app = QtGui.QApplication(sys.argv)
    window = Main()
    window.show()
    sys.exit(app.exec_())

    main() 
```

# mysql - 将数据插入表时Python中的mysql.connector.ProgrammingError

> ID：16138730
> 
> 赞同：0
> 
> 时间：2013-04-22T02:54:22.490
> 
> 标签：mysql, sql, python-2.7, mysql-connector, sql-insert

我正在编写一个脚本来逐行读取文件中的数据并将每一行插入 MySQL 数据库。我使用 mysql.connector 来做到这一点。这是一段脚本。

```
def insert_query(data):
    return ("INSERT INTO " + tblname + " (`log`) " + "VALUES " + "(" + "'" + data + "'" + ")")
with open('data.txt', 'r') as f:
    lines = f.readlines()

for line in lines:
    add_line = insert_query(line)
    cursor.execute(add_line)
    cursor.commit() 
```

文件 data.txt 的大小为 5Mbyte，但它有大约 10000 行。tblname 有 2 个字段：ID - INT (11) (auto-increment) , log - TEXT 当我运行这个脚本时，它添加到数据库中大约 100 行并崩溃。它报告一个错误：

> mysql.connector.errors.ProgrammingError: 1064 (42000): 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册中的 ')'

MySQL 版本：5.5.27 这个问题怎么解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T09:44:12.043

您的插入语句不正确：函数中未定义“tblname”，因此出现语法错误。但是，如何解决它存在更大的问题：如果日志中的一行包含引号和括号怎么办？

以下代码显示了如何从文件中读取数据并逐行插入：

```
stmt = "INSERT INTO {table} (c1) VALUES (%s)".format(table=table_name) 

with open('data.txt', 'r') as fp:
    for line in fp:
        data = (line.strip(),)
        cur.execute(stmt, (line.strip(),))
cnx.commit() 
```

或者使用 executemany()，这样会更快：

```
with open('data.txt', 'r') as fp:
    cur.executemany(stmt, [(line.strip(),) for line in fp])
cnx.commit() 
```

# javascript - 从 Node.js 提供静态文件

> ID：16138732
> 
> 赞同：0
> 
> 时间：2013-04-22T02:54:46.717
> 
> 标签：javascript, node.js, express

我正在尝试从`Node.js`我遇到的唯一问题中提供静态文件，如果我继续进入子路径，如下所示：

```
localhost:3000/foo/bar/baz/quux 
```

然后我必须加强相同的次数，如下所示：

```
../../../../public/javascripts/whatever.js 
```

如您所见，这真的很烦人，有没有办法让 Express v3 只知道这样我就可以做`/public/javascripts/whatever.js`而不必加强？提前致谢

这是我当前的 Express 静态中间件

```
app.use("/public", express.static(__dirname + '/public')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:33:30.740

如果您从根目录（即`src='/some/path/to/file.js'`）引用您的静态文件，则 url 应该无关紧要。

## 使用静态路由的示例网站

### 目录结构

```
/public
    /css/style.css
    /js/site.js
/vendor/thoughtbrain/js/awesome-town.js
/views/view.html
/app.js 
```

### 视图.html

```
 <!DOCTYPE html>
<html>
  <head>
    <!-- These files are served statically from the '/public' directory... -->
    <link href="/css/style.css" rel="stylesheet" >
    <script src="/js/site.js"></script>
    <!-- ... while this is "mounted" in virtual '/public' -->
    <script src="/public/js/awesome-town.js"></script>
  </head>
<body><p>Express</p></body>
</html> 
```

### 应用程序.js

```
var express = require('express'),
    http = require('http'),
    path = require('path'),
    app = express();

// Remember: The order of the middleware matters!

// Everything in public will be accessible from '/'
app.use(express.static(path.join(__dirname, 'public')));

// Everything in 'vendor/thoughtbrain' will be "mounted" in '/public'
app.use('/public', express.static(path.join(__dirname, 'vendor/thoughtbrain')));

app.use(express.static(path.join(__dirname, 'views')));

app.all('*', function(req, res){
  res.sendfile('views/view.html')
});

http.createServer(app).listen(3000); 
```

随着这个应用程序的运行，

`http://localhost:3000`

和

`http://localhost:3000/foo/bar/baz/quux`

都服务**view.html**和所有引用的资产解析。

Express Framework 有一节介绍[静态中间件](http://expressjs.com/api.html#app.use)的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:07:24.247

有了这种`static()`配置，Express 至少已经能够找到`/public/javascripts/whatever.js`.

但是，它确实取决于您的`public`文件夹是否与脚本位于同一目录中（由于`__dirname`在指定路径时使用了 ）。

如果是，则 URL 前缀`/public`应映射到`./public`(with `.`being `__dirname`) 的文件系统前缀，以便：

```
A URL of `/public/javascripts/whatever.js`
Maps to `./public/javascripts/whatever.js` 
```

# ios - 隐藏 MasterView - UISplitViewController 与 UITabController 和 UITableView

> ID：16138736
> 
> 赞同：1
> 
> 时间：2013-04-22T02:55:15.867
> 
> 标签：ios, ipad, uisplitviewcontroller

我有一个拆分视图控制器，其中包含一个选项卡控制器，该控制器在其每个选项卡项中都包含一个表视图 - 全部位于“主端”。表格视图提供了用户可以从中选择的项目列表，以控制“详细信息侧”上显示的内容。

我试图在用户做出选择后将主表视图移出屏幕 - 而不是用户需要点击屏幕来关闭主表视图。

我正在使用下面的代码。正如代码注释所示，它会留下一个半透明的“阴影”来代替主侧表视图。我还需要做什么才能将主边桌视图完全移出屏幕。

```
- (void)hideSidebarNavPanel
{
    /*  This almost works - in that it moves the table view off the screen but leaves a "shadow" in its place. 
        This occurs whether we modify the frame for the tabBarView or the masterTableView or the masterView - or for all 3.
        It seems that there is something else sitting below both of these that also needs to have its frame modified.
        The question is what?
     */

    UIView *masterView = self.view;
    CGRect masterViewFrame = masterView.frame;
    masterViewFrame.origin.x -= masterViewFrame.size.width;

    NSArray *controllers = self.splitViewController.viewControllers;
    UITabBarController *tabBarController = [controllers objectAtIndex:0];

    UIView *tabBarView = tabBarController.view;
    CGRect tabBarFrame = tabBarView.frame;
    tabBarFrame.origin.x -= tabBarFrame.size.width;

//    UIViewController *masterNavigationController = [tabBarController.viewControllers objectAtIndex:0];
//    UIView *masterTableView = masterNavigationController.view;
//    CGRect masterTableViewFrame = masterTableView.frame;
//    masterTableViewFrame.origin.x -= masterTableViewFrame.size.width;       

    [UIView beginAnimations:@"showView" context:NULL];
    masterView.frame = masterViewFrame;
    tabBarView.frame = tabBarFrame;
    //masterTableView.frame = masterTableViewFrame;
    [UIView commitAnimations];
} 
```

# ruby-on-rails - Rake - 添加到默认任务

> ID：16138737
> 
> 赞同：4
> 
> 时间：2013-04-22T02:55:36.747
> 
> 标签：ruby-on-rails, ruby, rake, rake-task

我正在使用第三方 gem，它使我能够使用 rake 命令执行一些测试：

```
rake jasminerice:run 
```

是否可以将该任务作为默认 rake 任务的一部分？（即，当我运行时，`rake`将 rake`jasminerice:run`添加到我的其余测试中）。这是 CI 集成所必需的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T05:11:18.317

在 Rake 中，任务可以有依赖关系。通常，您可以这样做：

```
task :hello do
  puts "hello"
end

task :default => :hello 
```

对于您的具体问题，您应该可以这样做：

```
task :default => "jasminerice:run" 
```

# java - 在java中使图像沿一条线移动

> ID：16138740
> 
> 赞同：0
> 
> 时间：2013-04-22T02:56:04.743
> 
> 标签：java, line, paintcomponent, 2d-games

我试图制作一个简单的程序，在其中单击并显示图像并沿着从起点到单击点的线移动。我似乎无法让图像沿着这条线移动，因为我遇到了斜坡问题。此外，我似乎无法让图片以动画方式移动和方向。有什么建议吗？
（我排除了我拥有的 mousemotionlistener 代码）

```
 public class Screen extends JPanel implements Runnable {

      public Thread thread = new Thread(this); //this is needed for a game loop  (i               think)
      public static JLabel statusbar; //displays a status bar showing what mouse       movements are taking place

      private Image cat;  //image of the cat

      public int xCoord; //get the coordinates of the mouse pressed
      public int yCoord;

      public double xCoord2; //get the coordinates as the mouse is released
      public double yCoord2;

      public int yCoordMove;
      public int xCoordMove;

      public double slope;

       public Screen(Frame frame) {
        thread.start();
        loadPic(); //calls the loadPic method above
     Handlerclass handler = new Handlerclass(); //creates a new class to use the mouse   motion listener
     System.out.println("this mouse thing works!");
     addMouseListener(handler);
     addMouseMotionListener(handler);
     statusbar = new JLabel("default");
        add(statusbar);
}
public void run(){ //this is the game run loop
    System.out.println("this is running");
        try{
        Thread.sleep(5); //sleeps the run loop after 5000 game seconds
    } catch(Exception e) {}
}
public void loadPic(){ //loads the picture
    cat = new ImageIcon("C:\\Users\\Camtronius\\Documents\\NetBeansProjects\\Moving Block Proj\\src\\MovingBlock\\catIcon1.png").getImage(); //gets the image
    System.out.println("Image Loaded!");
}
@Override public void paintComponent(Graphics g){
    super.paintComponent(g); //paints the component, the picture, on top

    g.drawImage(cat, xCoord, yCoord, this); //draws the image and at a specific location
    g.drawString("sup tho!", 250, 250); //draws the text to the screen

    g.setColor(Color.black); //sets color to red
    g.drawLine(xCoord, yCoord, xCoordMove, yCoordMove); //draws the clicked line

}
public void picMove(){
    double numerator = yCoord2 - yCoord;
    double denominator = xCoord2 - xCoord;

        if(denominator == 0) {
            denominator =.0001;
        }
    slope = (numerator/denominator);
    System.out.printf("the slope is: %.2f \n\n   ",slope);    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-29T14:42:28.217

```
 double a=Math.atan2(numerator, denominator);

    double rate=100;   //rate at which block will move
    xCoord=(int) (xCoord + rate* Math.cos(a));
    yCoord=(int) (yCoord + rate* Math.sin(a)); 
```

结果：

[![在此处输入图像描述](https://i.stack.imgur.com/PeCeJ.jpg)](https://i.stack.imgur.com/PeCeJ.jpg)

# c++ - 是否可以在不使用 boost 的情况下在 C++11 中编写这样的代码？

> ID：16138741
> 
> 赞同：0
> 
> 时间：2013-04-22T02:56:07.197
> 
> 标签：c++, boost, c++11, lambda

不久前，我偶然发现了以下代码行：

```
 return accumulate(s, s + size, char(), (_1 ^ _2)); 
```

它使用了 boost 标头，但我一直认为它非常非常优雅（注意 lambda 没有命名输入参数，所以它非常短。:) 请注意，我知道 C++11 有 lambda 函数，这是不是关于 lambdas，而是关于这个漂亮的简短语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:12:21.640

使用硬编码类型...

```
return accumulate(s, s+size, char(), [](char l, char r){ return l ^ r; }); 
```

当允许[泛型 lambda](http://isocpp.org/blog/2013/04/trip-report-iso-c-spring-2013-meeting)时 (C++14)...

```
return accumulate(s, s+size, char(), [](auto l, auto r){ return l ^ r; }); 
```

目前，[std::bit_xor](http://en.cppreference.com/w/cpp/utility/functional/bit_xor) ...

```
return accumulate(s, s+size, char(), bit_xor<char>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T08:43:47.517

没有 Boost 的唯一方法是重新发明创建它的 Boost 组件。如果没有 Boost 组件的实现，你怎么可能拥有 Boost 组件的语法？

语言解决方案是 lambda，如果您不喜欢它们，那么是时候使用 Boost 或窃取其中的特定部分了。

# android - 是否可以使用phonegap打开果冻豆风格的对话框窗口？

> ID：16138743
> 
> 赞同：0
> 
> 时间：2013-04-22T02:56:08.797
> 
> 标签：android, cordova, dialog, android-4.2-jelly-bean

拜托，我想知道如何创建一个这样的窗口，但要写一些东西或带有 phonegap 的加载指示器：

[http://img805.imageshack.us/img805/8799/datepickerdialog411.png](http://img805.imageshack.us/img805/8799/datepickerdialog411.png)

我正在使用cordova 2.5，我找到了一些插件，但它没有用，而且phonegap的警报又丑又黑。

我发现的插件： - [https://github.com/phonegap/phonegap-plugins/tree/master/Android/WaitingDialog](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WaitingDialog) - https://gist.github.com/ChrisMcKee/1336815

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:44:19.903

您可以使用`JavaScript`或通过开发`PhoneGap`插件来自定义警报。

1.  使用`JavaScript` 类似这样的东西：[简单模型](http://simplemodal.plasm.it/#examples)或[Shadobox](http://www.shadowbox-js.com/)

2.  使用`PhoneGap`插件 使用[PhoneGap 开发指南](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_android_index.md.html)开发您自己的警报对话框插件并调用它。在这里，您可以将`Jelly Bean Style`其用于自定义警报对话框。

谢谢。

# python - 从日期时间中提取时间并确定时间（不是日期）是否在范围内？

> ID：16138744
> 
> 赞同：32
> 
> 时间：2013-04-22T02:56:15.657
> 
> 标签：python, datetime, python-2.6

问题是我希望它忽略日期而只考虑时间。这是我所拥有的：

```
import time
from time import mktime
from datetime import datetime

def getTimeCat(Datetime):
    # extract time categories
    str_time = datetime.strptime(Datetime, "%m/%j/%y %H:%M")
    ts = datetime.fromtimestamp(mktime(str_time))

    # --> Morning = 0400-1000
    mornStart = datetime.time(4, 0, 1)
    mornEnd = datetime.time(10, 0, 0)

    # --> Midday = 1000-1600
    midStart = datetime.time(10, 0, 1)
    midEnd = datetime.time(16, 0, 0)

    # --> Evening = 1600-2200
    eveStart = datetime.time(16, 0, 1)
    eveEnd = datetime.time(22, 0, 0)

    # --> Late Night = 2200-0400
    lateStart = datetime.time(22, 0, 1)
    lateEnd = datetime.time(4, 0, 0)

    if time_in_range(mornStart, mornEnd, ts):
      timecat = 0 #morning
    elif time_in_range(midStart, midEnd, ts):
      timecat = 1 #midday
    elif time_in_range(eveStart, eveEnd, ts):
      timecat = 2 #evening
    elif time_in_range(lateStart, lateEnd, ts):
      timecat = 3 #late night

    return timecat 
```

照原样，我收到此错误：

```
TypeError: argument must be 9-item sequence, not datetime.datetime 
```

当我将相关行更改为：

```
str_time = time.strptime(Datetime, "%m/%j/%y %H:%M") 
```

我收到此错误：

```
TypeError: descriptor 'time' requires a 'datetime.datetime' object but received a 'int' 
```

我知道我正在使用两个不同的库或诸如此类的东西，但是我不确定如何在它们之间进行转换或仅使用一个来完成我想做的事情。我只是希望它忽略日期，只检查时间是否在指定范围内。Python 2.6 是必须的，因为我在代码的其他地方使用了一个库。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-22T03:43:32.473

这一行：

```
str_time = datetime.strptime(Datetime, "%m/%j/%y %H:%M") 
```

[根据文档](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)返回一个`datetime`对象。

您可以通过在解释器中以交互方式运行以下命令来自行测试：

```
>>> import datetime
>>> datetime.datetime.strptime('12/31/13 00:12', "%m/%j/%y %H:%M")
datetime.datetime(2013, 1, 31, 0, 12)
>>> 
```

然后可以使用该`.time()`方法访问返回的日期时间的时间部分。

```
>>> datetime.datetime.strptime('12/31/13 00:12', "%m/%j/%y %H:%M").time()
datetime.time(0, 12)
>>> 
```

然后`datetime.time()`可以在您的时间比较中使用结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-01-02T05:57:48.537

使用它只会给你时间。

```
from datetime import datetime

now = datetime.now()
current_time = now.strftime("%H:%M:%S")
print("Current Time =", current_time) 
```

# r - 如何在R中绘制带有边框的图例？

> ID：16138748
> 
> 赞同：1
> 
> 时间：2013-04-22T02:56:41.963
> 
> 标签：r, plot, legend

我正在使用 R 绘制图表及其图例，但在绘制带边框的图例时发现了一些问题。

```
plot.new()
legend(x=0, y=.15, c("Some Text"), cex=1, pt.cex =1.4, col=c("green"), 
       bty="n", fill="green", pch=c(15, 15, 15, 17), border="black") 
```

![在此处输入图像描述](https://i.stack.imgur.com/5cLuT.png)

边框没有完全包围绿色框。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T20:50:52.520

和`legend()`之间的调用存在冲突。如果我放弃后者，我会得到我认为你正在寻找的东西： `fill="green"``pch=c(15, 15, 15, 17)`

```
plot.new()
legend(x=0,y=.15, c("Some Text"), cex=1,pt.cex =1.4,col=c("green"), 
       bty="n",fill="green", border="black") 
```

![在此处输入图像描述](https://i.stack.imgur.com/anspt.png)

# ruby-on-rails - Redis 环境变量

> ID：16138750
> 
> 赞同：6
> 
> 时间：2013-04-22T02:56:52.467
> 
> 标签：ruby-on-rails, redis, sidekiq

我有一个使用 Gmail 发送电子邮件通知的 Rails 应用程序（目前仅处于开发模式）。我用这样的环境变量设置用户名和密码

```
GMAIL_USERNAME='me@gmail.com' GMAIL_PASSWORD='mygreatpassword' rails s 
```

一切正常。但是，在我添加 sidekiq/redis 以将电子邮件作为后台作业发送后，当它尝试发送电子邮件时出现身份验证错误。

```
2013-04-24T19:26:45Z 887 TID-ovdxl6qxs WARN: {"retry"=>true, "queue"=>"default", "timeout"=>30, "class"=>"Sidekiq::Extensions::DelayedMailer", "args"=>["---\n- !ruby/class 'Notifier'\n- :answer_updated\n- - !ruby/object:Answer\n    attributes:\n      id: 32\n      content: Billy\n      accepted: \n      user_id: 37\n      question_id: 38\n      created_at: 2013-04-24 19:26:44.948753000 Z\n      updated_at: 2013-04-24 19:26:44.948753000 Z\n  - !ruby/object:User\n    attributes:\n      id: 35\n      email: emailaddress@gmail.com\n      encrypted_password: $2a$10$5XLIJ6F1KNPOjbTUX3fqROE0oDHgf/WnSGE4OhCm7g.pzN1bzLS0q\n      reset_password_token: \n      reset_password_sent_at: \n      remember_created_at: 2013-04-19 19:28:52.926838000 Z\n      sign_in_count: 9\n      current_sign_in_at: 2013-04-24 19:17:31.694245000 Z\n      last_sign_in_at: 2013-04-22 18:24:29.946303000 Z\n      current_sign_in_ip: 127.0.0.1\n      last_sign_in_ip: 127.0.0.1\n      created_at: 2013-04-18 19:28:09.569895000 Z\n      updated_at: 2013-04-24 19:17:31.695692000 Z\n      name: emailaddress@gmail.com\n      lawyer: \n      student: \n"], "jid"=>"4c9cb74b27080c4df581715c", "error_message"=>"530-5.5.1 Authentication Required. Learn more at\n", "error_class"=>"Net::SMTPAuthenticationError", "failed_at"=>2013-04-24 19:26:45 UTC, "retry_count"=>0}
2013-04-24T19:26:45Z 887 TID-ovdxl6qxs WARN: 530-5.5.1 Authentication Required. Learn more at 
```

添加 sidekiq 后，我以相同的方式启动 rails 服务器，在“rails s”命令之前使用 GMAIL_USERNAME 和 GMAIL_PASSWORD 环境变量。我也是这样启动redis的

```
redis-server /usr/local/etc/redis.conf 
```

和sidekiq这样

```
bundle exec sidekiq 
```

然后，添加redis后，我使用sidekiq的'delay'方法而不是'deliver'来发送消息。但是，如上所述，我收到了身份验证错误消息。

```
 def after_create(answer)
      answer.question.watchers.each do |user|
      Notifier.delay.answer_updated(answer, user)
      # Notifier.answer_updated(answer, user).deliver  
    end 
```

更新：

这些是我的配置操作邮件设置

```
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "localhost:3000",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["GMAIL_USERNAME"],
  password: ENV["GMAIL_PASSWORD"]
} 
```

这是它在“了解更多”之后所说的

```
2013-04-25T00:11:30Z 6904 TID-owuofcbno WARN: /Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/net/smtp.rb:948:in `check_response'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/net/smtp.rb:917:in `getok'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/net/smtp.rb:832:in `mailfrom'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/net/smtp.rb:659:in `send_message'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/net/smtp.rb:520:in `start'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionmailer-3.2.12/lib/action_mailer/base.rb:415:in `block in deliver_mail'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionmailer-3.2.12/lib/action_mailer/base.rb:413:in `deliver_mail'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/extensions/action_mailer.rb:23:in `perform'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:49:in `block (3 levels) in process'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:109:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:109:in `block in invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/timeout.rb:11:in `block in call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/timeout.rb:10:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/active_record.rb:6:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/retry_jobs.rb:50:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/logging.rb:22:in `with_context'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:111:in `block in invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:114:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/middleware/chain.rb:114:in `invoke'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:48:in `block (2 levels) in process'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:87:in `stats'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/sidekiq-2.10.1/lib/sidekiq/processor.rb:47:in `block in process'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `public_send'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in `dispatch'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/future.rb:18:in `block in initialize'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in `call'
/Users/me/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in `block in create' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-27T08:57:37.777

Sidekiq 启动了它自己的 rails 环境，并且缺少用于配置 ActionMailer 的环境变量，这就是为什么在使用 sidekiq 时会出现异常，但在 rails 服务器进程本身内发送时不会出现异常。

基本上你只需要使用与服务器相同的变量来启动sidekiq worker：

```
GMAIL_USERNAME='me@gmail.com' GMAIL_PASSWORD='mygreatpwd' bundle exec sidekiq 
```

尽管这可能会使工作正常，但请考虑使用像[工头](https://github.com/ddollar/foreman)这样的东西来处理这个问题（尤其是在开发中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T02:35:28.277

我的猜测是，您在控制台中设置的环境变量仅应用于您的 Web 服务器的进程（由 启动`rails s`）。因此，当 sidekiq 查看邮件配置时，它会从`ENV["GMAIL_USERNAME"]`and中返回 nil `ENV["GMAIL_PASSWORD"]`。您需要将这些环境变量放在 sidekiq 进程可以访问它们的地方。

我将在下面列出一些选项（#2 看起来最简单），但是已经有一些资源已经更详细地解释了这一点*（并且归功于他们编译这些选项）*。查看：

*   [http://railsapps.github.io/rails-environment-variables.html](http://railsapps.github.io/rails-environment-variables.html)
*   [https://devcenter.heroku.com/articles/config-vars#local-setup](https://devcenter.heroku.com/articles/config-vars#local-setup)
    *   如果您在 heroku 上部署并想在本地进行测试
    *   只记得`.env`放入`.gitignore`

## 选项

### 在 bash 中设置环境变量

我不推荐这种方法，但想把它作为下面两个选项的对立面。

```
export GMAIL_USERNAME="myemail@gmail.com" 
```

`~/.bashrc`在你的 bash 控制台中运行它会在 ENV中创建一个可访问的值。

但是，此解决方案不是特定于应用程序的（它在您机器上的任何地方都可用），并且它与您的应用程序相距甚远，您可能会发现难以调试问题或忘记删除/更改此私人信息。

### 费加罗宝石

figaro [gem](https://github.com/laserlemon/figaro)为您提供了一个`.gitignore`d YAML 文件，您可以在其中放置敏感的配置信息。

它还提供了将这些配置变量上传到 heroku 的帮助程序，同时仍将配置排除在您的 git 存储库之外。

### 从 yml 配置文件中读取

这几乎就是 Figaro gem 正在做的事情，但值得理解。

```
# 1\. create a config file
touch config/gmail_config.yml
# 2\. add the new file to .gitignore
# 3\. add code to application.rb to load yml file
config.before_configuration do
  env_file = File.join(Rails.root, 'config', 'local_env.yml')
  YAML.load(File.open(env_file)).each do |key, value|
    ENV[key.to_s] = value
  end if File.exists?(env_file)
end 
```

如果文件退出（即您在本地机器上），它将加载文件并设置变量。如果文件不存在，它将不会加载文件，您需要在生产环境中设置变量。

# git - 永远不要从远程存储库中删除分支是个好主意吗？

> ID：16138754
> 
> 赞同：0
> 
> 时间：2013-04-22T02:57:13.783
> 
> 标签：git, github

我们使用 Gitflow 进行所有开发，但我们从未为功能分支设置上游，并且当我们执行完成命令时，Gitflow 会删除我们的本地分支。我们只有三个人，通常我们在上游的开发分支上工作，以跟踪我们在远程存储库上的开发分支。

### 2 问题？

1.  我们是否应该在远程存储库中提供所有功能分支？
2.  永远不要从远程存储库中删除分支是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:36:48.247

我很想知道小组对此的看法，但我认为我永远不想丢失数据。我仍然发现自己在挖掘 10 年前的 SVN 提交，看看我的头在哪里，并找到我忘记的一些想法，我想用我的新的、更强大的程序员大脑再次将它们带入生活。此外，如果我们的产品非常有名，我想记录一下它的创作过程，以供后代使用。提交本身存储起来非常便宜，而且这个空间只会越来越便宜。

也就是说，如果您的分支被重新合并，删除它们只是删除指针；合并提交将永远保留提交。默认情况下，合并提交具有合并回来的分支的名称，因此您仍然可以弄清楚现在无名的分支最初被称为什么。这对我来说似乎是两全其美。我不是压缩提交的忠实粉丝，尽管我愿意解释为什么我应该这样做。

# java - 如何从arraylist中获取索引值

> ID：16138755
> 
> 赞同：0
> 
> 时间：2013-04-22T02:57:24.263
> 
> 标签：java, android, arraylist

我想用`x= value`and制作折线图，`y=index`但是当我想从 arraylist 获取索引时出现错误，你能告诉我如何获取它吗？

这是我的代码：

```
 for (int i = 0; i < listData.size(); i++) {
        mCurrentSeries.add(
    **what must i put?**,listData.get(i).getInuNilai()//this is value  
                );
    } 
```

添加参考：`double[] xy = mChartView.toRealPoint(0);`

谁能告诉我如何解决它..？谢谢你

# ruby - Ruby on Rails/Rack 1.4.5 从调用方法返回/无法将字符串转换为数组

> ID：16138759
> 
> 赞同：0
> 
> 时间：2013-04-22T02:57:45.547
> 
> 标签：ruby, ruby-on-rails-3, rack

我正在关注 Rob Conery 在他的 Tekpub/Rails 3 教程视频中。我认为视频版本 (1.1) 中的 Rack 版本和我机器上的版本 (1.4.5) 之间发生了一些变化。我不知道如何弄清楚我需要做些什么不同的事情。

在下面的代码中，我有一个字符串变量`out`，并试图将一个字符串变量（`MyApp.Call`方法返回的数组的第三个元素）连接到它上面。

```
class EnvironmentOutput

  def initialize(app)
    @app = app
  end

  def call(env)
    out = ""

    unless(@app.nil?)
      response = @app.call(env)[2]

      # The Problem is HERE (Can't Convert Array to String):
      out+=response
    end

    env.keys.each {|key| out+="<li>#{key}=#{env[key]}"}
    ["200", {"Content-Type" => "text/html"}, [out]]
  end

end

class MyApp
  def call(env)
    ["200", {"Content-Type" => "text/html"}, ["<h1>Hello There</h1>"]]    
  end
end

use EnvironmentOutput
run MyApp.new 
```

但我得到了错误：

```
"Can't Convert Array to String" at `out+=response` 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:04:04.510

您正在尝试将字符串添加到数组中。第三个元素

```
["200", {"Content-Type" => "text/html"}, ["<h1>Hello There</h1>"]] is ["<h1>Hello There</h1>"] 
```

是一个数组。

您可以将该数组更改为带有连接的字符串：

```
response = @app.call(env)[2].join 
```

# ruby-on-rails - 在页面末尾而不是中间调用时，Rails 部分工作

> ID：16138762
> 
> 赞同：0
> 
> 时间：2013-04-22T02:58:07.757
> 
> 标签：ruby-on-rails, render, partial

我有以下代码部分：

```
<%= link_to 'Edit', edit_computer_path(@computer) %> |
<%= link_to 'Back', computers_path %>

<div>
  <h2>New config</h2>
  <%= render "kernel_configs/computerkernelconfig", :locals => { :computer => @computer } %>
</div>

<div>
  <h2>Submitted Configs</h2>
  <table>
    <tr>
      <th>Rating</th>
      <th>Title</th>
      <th>Contributor</th>
      <th>Features</th>
      <th>Config file</th>
      <th></th>
    </tr>

    <%= render @computer.kernel_configs %>

  </table>
</div> 
```

抱怨没有路线：

> ActionController::RoutingError (没有路由匹配 {:action=>"edit", :controller=>"kernel_configs", :id=>#}):
> app/views/kernel_configs/_kernel_config.html.erb:13:in `_app_views_kernel_configs__kernel_config_html_erb___3252059691242213705_26424640' app/views/computers/show.html.erb:34:in` _app_views_computers_show_html_erb___4341746115390966607_23819760'
> app/controllers/computers_controller.rb:18:in `show'

如果我在第二个之后移动第一个渲染，则页面渲染良好而没有错误。所以我很确定有一条路线，实际上可能是其中之一：

```
 edit_kernel_config GET    /kernel_configs/:id/edit(.:format)   kernel_configs#edit
 edit_computer_kernel_config GET    /computers/:computer_id/kernel_configs/:id/edit(.:format)    kernel_configs#edit 
```

作为参考，部分在这里：

```
<%= form_for( [@computer,@computer.kernel_configs.build], :multipart => true ) do |form| %>

  <div class="field">
    <%= form.label :title %>
    <%= form.text_field :title %>
  </div>

  <div class="field">
    <%= form.label :contributed_by %>
    <%= form.text_field :contributed_by %>
  </div>

  <div class="field">
    <%= form.label :features %><br />
    <%= form.text_area :features %>
  </div>

  <div class="field">
    <%= form.label "Upload File" %><br />
    <%= form.file_field :kernelconfig %>
  </div>

  <div class="field">
    <%= form.submit %>
  </div>

<% end %> 
```

_kernel_congif 部分：

```
<tr>

  <td><%= kernel_config.rating %></td>

  <td><%= kernel_config.title %></td>

  <td><%= kernel_config.contributed_by %></td>

  <td><%= kernel_config.features %></td>

  <td><%= truncate kernel_config.kernelconfig %></td>

  <td><%= link_to 'Edit', edit_kernel_config_path(kernel_config) %></td>

</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:30:39.913

正在发生的事情是，由于您在列表之前有表单，因此您正在调用`@computer.kernel_configs.build`它将新的空记录添加到`@computer.kernel_configs`.

您的部分可能会崩溃，因为您正试图显示这个新的空记录。

这就是为什么当您将表单部分移动到集合部分下方时，它工作得很好。

编辑：

正如预期的那样，您正在尝试创建指向空对象的链接。

错误发生在以下行：

```
# _kernel_config.html.erb
<td><%= link_to 'Edit', edit_kernel_config_path(kernel_config) %></td> 
```

`edit_kernel_config_path`找不到空的路径`kernel_config`。

# java - 如何防止注册活动中的重复输入

> ID：16138764
> 
> 赞同：1
> 
> 时间：2013-04-22T02:58:20.503
> 
> 标签：java, android

我希望当用户在我的应用程序中注册用户名时，如果该用户名已经被使用，他/她会得到一个祝酒词“用户名已经被使用”。

我已经在我的数据库中包含了 UNIQUE 约束，它工作正常，但在活动本身中，我想让用户知道他们尝试注册的用户名已经存在。

```
 package com.fullfrontalgames.numberfighter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Register extends Activity {
    EditText UsernameReg, PasswordReg, PasswordConfirm, EmailReg;

    Button Register;

    DBAdapter db;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // get Instance of Database Adapter
        final DBAdapter db = new DBAdapter(this);
        db.open();

        // Get reference of views.
        UsernameReg = (EditText)findViewById(R.id.UsernameReg);
        PasswordReg = (EditText)findViewById(R.id.PasswordReg);
        EmailReg = (EditText)findViewById(R.id.EmailReg);
        PasswordConfirm = (EditText)findViewById(R.id.PasswordConfirm);

        Register = (Button)findViewById(R.id.Register);
        Register.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String Username = UsernameReg.getText().toString();
                String Password = PasswordReg.getText().toString();
                String PassConfirm = PasswordConfirm.getText().toString();
                String Email = EmailReg.getText().toString();
                String TakenUsername = db.getData();

                // Check if any of the field are vacant.
                if (Username.equals("") || Password.equals("") || PassConfirm.equals("")) {
                    Toast.makeText(getApplicationContext(), "Field Vacant", Toast.LENGTH_LONG)
                            .show();
                    return;
                }
                // Check if both passwords matches
                if (!Password.equals(PassConfirm)) {
                    Toast.makeText(getApplicationContext(), "Password does not match",
                            Toast.LENGTH_LONG).show();
                    return;
                }
                if (Username.equals(TakenUsername))

                {
                    Toast.makeText(getApplicationContext(), "Username Already Taken",
                            Toast.LENGTH_LONG).show();
                    return;
                } else {
                    // Save data in database
                    db.insertPlayer(Username, Password, Email);
                    Toast.makeText(getApplicationContext(), "Account Successfully Created ",
                            Toast.LENGTH_LONG).show();
                    startActivity(new Intent("com.fullfrontalgames.numberfighter.Login"));
                }
            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:32:09.560

代替

```
if (Username.equals(TakenUsername))

            {
                Toast.makeText(getApplicationContext(), "Username Already Taken",
                        Toast.LENGTH_LONG).show();
                return;
            } else {
                // Save data in database
                db.insertPlayer(Username, Password, Email);
                Toast.makeText(getApplicationContext(), "Account Successfully Created ",
                        Toast.LENGTH_LONG).show();
                startActivity(new Intent("com.fullfrontalgames.numberfighter.Login"));
            } 
```

你可以这样做

```
long id = db.insertPlayer(Username, Password, Email);
if (id == -1)
{
    Toast.makeText(getApplicationContext(), "Username Already Taken",
                        Toast.LENGTH_LONG).show();
} 
```

在哪里

```
public long insertPlayer(String Username, String Password, String Email)
{
    ContentValues values = new ContentValues();
    values.put("USERNAME", Username);
    values.put("PASSWORD", Password);
    values.put("EMAIL", Email);

    return db.insertWithOnConflict(Table name, null, values, SQLiteDatabase.CONFLICT_IGNORE);  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:18:14.823

如果用户名存在，请检查您的数据库表。您可以执行以下操作

```
Cursor c = db.query(TABLE_NAME, new String[] { USERNAME},
        USERNAME+ " ='" + userName + "'", null, null, null, null);
        if(c.getCount > 0)
               username taken;; 
```

# jquery - 为什么灯箱 jQuery 插件对我不起作用？

> ID：16138766
> 
> 赞同：2
> 
> 时间：2013-04-22T02:58:40.353
> 
> 标签：jquery, html, jquery-ui, jquery-plugins, lightbox

按照此处的说明进行操作：http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)和“Murach 的 JavaScript 和 jQuery”一书中（第 320 和 321 页），我正在尝试将灯箱功能添加到我的网站。

我将 lightbox.css（和 screen.css，可能还需要思考）添加到我的 Content 文件夹，以及 lightbox.js 和 jquery.smooth-scroll.min.js（因为它包含在 lightbox 下载中，并且我想像灯箱需要它）到我的脚本文件夹。

我还在我的图像文件夹中添加了灯箱下载中包含的以下图像：close.png、loading.gif、next.png 和 prev.png。

我有这个 html 和 jQuery 代码（此时这是整个 Default.cshtml）：

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "el Garrapata - Spoon!!!";
}

<div id="tabs">
    <ul>
    <li><a href="#tabs-1">Spring</a></li>
    <li><a href="#tabs-2">Summer</a></li>
    <li><a href="#tabs-3">Fall</a></li>
    <li><a href="#tabs-4">Winter</a></li>
    </ul>
    <div id="tabs-1">
        <a href="Images/Fullsize/Landscapes/Spring_2013 04 06_2293.jpg" rel="lightbox" ><img src="Images/Thumbnails/Landscapes/Spring_2013 04 06_2293_th.jpg" width="300" height="200"></a>
    </div>

    <div id="tabs-2">
    </div>

    <div id="tabs-3">
    </div>

    <div id="tabs-4">
    </div>

</div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#tabs").tabs();
        });
    </script> 
```

...但它不起作用：虽然该缩略图显示在“Spring”选项卡中，但单击它只会导致屏幕大部分变暗 - 它变得“变灰”到几乎不透明的程度。

灯箱下载还包括 jquery-1.7.2.min.js 和 jquery-ui-1.8.18.custom.min.js

我在 _SiteLayout.cshtml 中引用了较新的版本：

```
<script src="~/Scripts/jquery-2.0.0.min.js"></script>
<script src="~/Scripts/jquery-ui-1.9.2.min.js"></script> 
```

这可能是问题吗？如果我想使用灯箱，我是否会“卡住”使用旧版本的 jQuery 和 jQueryUI？

顺便说一句，我试图在灯箱的内部论坛上发布这个，但无法登录，无论是使用 Fakebook 还是谷歌（尽管我（在前者的情况下不情愿地）都有两个账户；我也尝试过 OpenID jazz，但它似乎期待一个网址......？？？）

## 更新

注意：我将尽快将这个问题奖励 100 分。如果我在此之前得到答案，我将在回答后奖励赏金。

## 更新 2

我已经切换到fancyBox，但是当点击“缩略图”时，大（href）图像仍然紧贴页面的左侧，而不是中心。以下是所有 Razor、HTML 和 jQuery（为简洁起见，省略了一些图像代码）：

从 _SiteLayout.cshtml 中选择：

```
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen" />
<script src="~/Scripts/jquery-2.0.0.min.js"></script>
<!-- May want to replace the above before deploying with use of a CDN:
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
OR: <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
..and similar for jquery-ui -->
<script src="~/Scripts/jquery-ui-1.9.2.min.js"></script>
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script> 
```

来自 Default.cshtml：

```
@{
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Garrapata";
}

<div id="tabs">
    <ul>
    <li><a href="#tabs-1">Spring</a></li>
    <li><a href="#tabs-2">Summer</a></li>
    <li><a href="#tabs-3">Fall</a></li>
    <li><a href="#tabs-4">Winter</a></li>
    </ul>
    <div id="tabs-1">
        <a class="fancybox" rel="group" href="Images/Fullsize/Landscapes/Spring_2013 04 06_2293.jpg"><img src="Images/Thumbnails/Landscapes/Spring_2013 04 06_2293_th.jpg" width="294" height="196" alt="" /></a>
        <a class="fancybox" rel="group" href="Images/Fullsize/Landscapes/Spring_2013 04 06_2295.jpg"><img src="Images/Thumbnails/Landscapes/Spring_2013 04 06_2295_th.jpg" width="294" height="196" alt="" /></a>
    </div>

    <div id="tabs-2">
    </div>

    <div id="tabs-3">
    </div>

    <div id="tabs-4">
    </div>

</div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#tabs").tabs();
            $(".fancybox").fancybox({
                openEffect  : 'elastic',
                closeEffect : 'elastic'
            });
        });
    </script> 
```

另外，我在 NE 角没有看到“关闭”按钮 - 可能是因为占据了所有“顶部”空间的大图像没有留出空间让它可见。

## 更新 3

现在我看到我在 _SiteLayout.cshtml 中引用的 .css 和 .js 文件应该在 /fancybox/source

似乎不是我现在拥有的，即：

```
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script> 
```

...*应该*起作用的是：

```
<link rel="stylesheet" href="~/Content/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="~/Scripts/jquery.fancybox.js"></script> 
```

...因为我已将这些文件复制到这些位置。

它*真的*必须是你提到的那种特殊的（而且，在我看来，相当奇特）的方式吗？

由于它似乎基于我所得到的根本找不到css和js，我很惊讶它甚至可以像它一样工作......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T02:38:58.363

您尝试实现的灯箱仅适用于 jQuery **jquery-1.7.2**或更低版本，并且您不需要`jquery-ui-1.9.2.min.js`灯箱即可工作。

要使此版本的灯箱正常工作，您 需要`lightbox.css`和.`jquery-1.7.2.js``lightbox.js`

下面显示的是一个示例代码，类似于您使用 Lightbox 的示例代码。（将此代码粘贴到文本编辑器中，将其保存为 HTML 页面并使用 Web 浏览器打开它）

```
<html>
<head>
    <!-- 
         **** Things you need to do****
         1\. SPECIFY LIGHTBOX CSS FILE
         2\. SPECIFY JQUERY JS (jquery-1.7.2) FILE
         3\. SPECIFY LIGHTBOX JS FILE 
    -->

    <link rel="stylesheet" href="http://lokeshdhakar.com/projects/lightbox2/css/lightbox.css" type="text/css" media="screen" /> 
    <script src="http://lokeshdhakar.com/projects/lightbox2/js/jquery-1.7.2.min.js"></script> 
    <script src="http://lokeshdhakar.com/projects/lightbox2/js/lightbox.js"></script> 
</head>
<body>
<div id="tabs">
    <ul>
    <li><a href="#tabs-1">Spring</a></li>
    <li><a href="#tabs-2">Summer</a></li>
    <li><a href="#tabs-3">Fall</a></li>
    <li><a href="#tabs-4">Winter</a></li>
    </ul>
    <div id="tabs-1">
        <a href="http://pages.swcp.com/~jamii/OtherCats/coco.jpg" rel="lightbox" >
            <img src="http://pages.swcp.com/~jamii/OtherCats/coco.jpg" width="300" height="200">
        </a>
    </div>
</div>
</body>
</html> 
```

您可以使用 fancybox 代替 lightbox，它适用于最新的 jQuery 版本。Fancybox 的最新版本是**[Fancybox 2](http://fancyapps.com/fancybox/)**，您可以从这个站点下载它 - [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

**实现 Fancybox 2 的代码**

```
<html>
<head>
    <!-- Add jquery library -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css" media="screen" />

    <script>
        $(document).ready(function(){
            $(".fancybox").fancybox({
                openEffect  : 'elastic',
                closeEffect : 'elastic'
            });
        });
    </script>
</head>
<body>
<div id="tabs">
    <ul>
    <li><a href="#tabs-1">Spring</a></li>
    <li><a href="#tabs-2">Summer</a></li>
    <li><a href="#tabs-3">Fall</a></li>
    <li><a href="#tabs-4">Winter</a></li>
    </ul>
    <div id="tabs-1">
        <a class="fancybox" href="http://pages.swcp.com/~jamii/OtherCats/coco.jpg" rel="lightbox" > <!--Add class "fancybox"-->
            <img src="http://pages.swcp.com/~jamii/OtherCats/coco.jpg" width="300" height="200">
        </a>
    </div>
</div>
</body>
</html> 
```

**更新#1**

您需要源文件夹中的所有文件来实现 fancybox（helpers 文件夹是可选的）。您需要将fancybox css、js 和图像保存在一个位置。您可以做的是将`source`文件夹复制到您的 Web 应用程序目录中并将其重命名为`fancybox`. 然后你可以从你的html页面调用css文件，js文件。例如：

```
<link rel="stylesheet" href="../fancybox/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="../fancybox/jquery.fancybox.pack.js"></script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/IwOH3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T12:29:40.130

有时，当您在灯箱之前包含其他 .js 库时，它也不起作用。把它放在jquery之后。

# xml - 从变量 SSIS 中读取 XML

> ID：16138767
> 
> 赞同：0
> 
> 时间：2013-04-22T02:58:55.040
> 
> 标签：xml, ssis, readxml

我正在使用脚本任务来读取 xml 文件并使用以下代码将其重写为新的 xml 文件：

```
 DataSet data = new DataSet();
 data.ReadXml("C:\\xml.xml");
 data.Tables["Table"].WriteXml("C:\\newxml.xml"); 
```

现在它工作正常我的问题是我怎样才能改变它以从变量而不是文件读取的方式？假设我的变量是 User::XmlData。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:49:20.523

```
 DataSet data = new DataSet();
        string myVar = Dts.Variables["XMLData"].Value.ToString();
        StringReader sr = new StringReader(myVar);
        data.ReadXml(sr);
        data.Tables["Table"].WriteXml("C:\\newxml.xml"); 
```

# asp.net - 使用 CompareValidator 验证日期

> ID：16138771
> 
> 赞同：0
> 
> 时间：2013-04-22T02:59:37.497
> 
> 标签：asp.net

我正在使用带有日历扩展器的文本框来输入出生日期。我正在验证日期是今天或更早。我有以下代码：

```
<asp:TextBox ID="txtDateOfBirth" runat="server" </asp:TextBox><ajaxToolkit:CalendarExtender ID="txtDateOfBirth_CalendarExtender" runat="server" Enabled="True" TargetControlID="txtDateOfBirth" Format="MM/dd/yyyy" </ajaxToolkit:CalendarExtender>

<asp:CompareValidator ID="cvDateOfBirth" runat="server" ControlToValidate="txtDateOfBirth" ErrorMessage="Must be today or older" Display="Dynamic" Operator="LessThanEqual"></asp:CompareValidator> 
```

我的 Page_Load 中有以下内容

```
cvDateOfBirth.ValueToCompare = DateTime.Today.ToString("MM/dd/yyyy"); 
```

在 CompareValidator 中，我将类型设置为字符串。如果我将其设置为 Date 我会收到错误

> 'cvDateOfBirth' 的 ValueToCompare 属性的值 '04/21/2013' 不能转换为类型 'Date'。

我将日期格式化为 MM/dd/yyyy，因为如果我不将日期格式化为首先使用 MM（并将其保留为默认值），则插入日期和月份时会颠倒或超出范围异常（如果月份）大于 12 (SQL 2008 R2)。如果我将类型保留为字符串，则验证工作正常，但仅适用于今年。如果我选择像 2012 年 12 月 31 日（2012 年 12 月 31 日）这样的日期，则验证失败。谁能指出我做错了什么。另外，我阅读了一些帖子，他们说必须将比较验证器的类型设置为日期，但我收到了上面提到的错误。另外，当我将它与文本框中的字符串进行比较时，为什么将其设置为日期而不是字符串。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:52:23.793

首先你必须做（分配与今天日期比较日期）：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            cvDateOfBirth.ValueToCompare = DateTime.Today.Date.ToString("dd/MM/yyyy");
        }
    } 
```

然后 2 方法来获得你想要的结果::

**第一种方式：**

```
<asp:TextBox ID="txtDateOfBirth" runat="server"></asp:TextBox><ajaxtoolkit:CalendarExtender
            ID="txtDateOfBirth_CalendarExtender" runat="server" Enabled="True" TargetControlID="txtDateOfBirth"
            Format="dd/MM/yyyy">
        </ajaxtoolkit:CalendarExtender>
        <asp:CompareValidator ID="cvDateOfBirth" runat="server" ControlToValidate="txtDateOfBirth" SetFocusOnError="true"
            Type="Date" Operator="LessThanEqual" ErrorMessage="Incorrect Date"
            ForeColor="Red"></asp:CompareValidator> 
```

然后在 .cs 文件后面的代码中获取选定的日期`MM-dd-yyy`以保存在数据库中：

```
protected void OnSave_Click(object sender, EventArgs e)
{
    DateTime selcetdDate=Convert.ToDateTime(txtDateOfBirth.Text);
    string date = selcetdDate.ToString("MM/dd/yyyy");
} 
```

**其他实现方式：**

```
<script type="text/javascript">
    function getDOB() {
        var selected = document.getElementById('lbl_date').value;
        var txtDateOfBirth = document.getElementById('txtDateOfBirth');
        if (selected != "") {
            var st = selected.split('/');
            txtDateOfBirth.value = st[1] + '/' + st[0] + '/' + st[2];
        }
        else
            txtDateOfBirth.value = "";
    }
</script>

 <asp:TextBox ID="txtDateOfBirth" runat="server"></asp:TextBox>
        <asp:TextBox ID="lbl_date" runat="server" Text="" style="display:none;" onchange="getDOB()"></asp:TextBox>
        <ajaxtoolkit:CalendarExtender
            ID="txtDateOfBirth_CalendarExtender" runat="server" Enabled="True" TargetControlID="lbl_date" PopupButtonID="txtDateOfBirth"
            Format="dd/MM/yyyy">
        </ajaxtoolkit:CalendarExtender>
        <asp:CompareValidator ID="cvDateOfBirth" runat="server" ControlToValidate="lbl_date" SetFocusOnError="true"
            Type="Date" Operator="LessThanEqual" ErrorMessage="Incorrect Date"
            ForeColor="Red"></asp:CompareValidator>
    </div> 
```

在代码隐藏 .cs 文件中

```
protected void OnSave_Click(object sender, EventArgs e)
{
    string date = txtDateOfBirth.Text;
} 
```

日期的`CompareValidato`r 属性`ValueToCompare`具有默认格式`dd-MM-yyyy` ，因此我们必须手动执行此操作以与其他日期格式进行比较。因此，您可以使用上述两个选项来比较验证与日期格式`MM/dd/yyyy`。

干杯！

# ruby-on-rails - Rails 视图与关联中的关联

> ID：16138774
> 
> 赞同：0
> 
> 时间：2013-04-22T02:59:51.140
> 
> 标签：ruby-on-rails, simple-form

我使用简单的形式和体面的曝光 - 我有访问的视图 - 一个家庭进行访问，每个家庭有 1 个或多个邻居或家庭成员。我试过这个：

```
= simple_form_for visit do |f|
  = f.association :household, :label => 'Household',prompt:'choose a household'
  - household.neighbors.each do |neighbor|
    %tr
      %td= link_to neighbor.name, neighbor_path(neighbor)
      %td= neighbor.age
      %td= neighbor.visits.count 
```

我可以通过协会选择一个家庭，但我很难显示属于该家庭的邻居 - 我上面的内容在家庭视图中有效，但在这里不起作用 - 我需要从协会归还家庭以制作它可用于邻居查找

我该怎么做呢？

我的控制器：

```
class VisitsController < ApplicationController
  expose(:visit)
  expose(:visits)
  helper_method :visit, :visits

def create
  if visit.save
    redirect_to visits_path, notice: 'Visit was successfully created.'
  else
    render action: "new"
  end
end

def update
  if visit.save
    redirect_to visits_path, notice: 'Visit was successfully updated.'
  else
    render action: "edit"
  end
end

def destroy
  visit.destroy

  redirect_to visits_path
end

private

def allowable
  [
    :household_id, :neighbor_id, :visited_on, :items_received, :notes
  ]
end

  def visit_params
   params.require(:visit).permit(*allowable)
  end
end 
```

# php - 关于php函数中参数的一个问题

> ID：16138780
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:01:33.500
> 
> 标签：php

```
<?php
function baz(ReflectionFunction $a, $b = 1, $c = null) { }
$reflect = new ReflectionFunction("baz");
echo $reflect;
...
?> 
```

问题：这是什么意思：`ReflectionFunction $a`？这是否等于：`$a = new ReflectionFunction()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:08:15.430

```
function baz(ReflectionFunction $a, ... 
```

是一个所谓的[`type hint`](http://www.php.net/manual/en/language.oop5.typehinting.php)。这允许 PHP 解释器在运行时检查参数类型

如果您传递一个类型不是`ReflectionFunction`PHP 的值，则会引发致命错误。这对于稳定您的代码并帮助解决由于 PHP 的松散类型系统而导致和监督的许多编程错误非常有帮助

例如，如果您传递一个字符串，您可以看到它的影响：

```
baz('my_function'); 
```

会给你什么：

> 可捕获的致命错误：传递给 baz() 的参数 1 必须是 ReflectionFunction 的实例，给定字符串，在第 5 行的 /tmp/peerindex-api-consumer/a.php 中调用并在 /tmp/peerindex-api-consumer/ 中定义a.php 在第 3 行

# javascript - Firefox 20 vs Google 图表 - getValue 奇怪

> ID：16138781
> 
> 赞同：1
> 
> 时间：2013-04-22T03:01:37.047
> 
> 标签：javascript, firefox, firebug, google-visualization

好吧，这是一个奇怪的...

下面的代码片段在 Chrome、IE8 和 Safari 中运行良好。直到上周（用户告诉我......）它还在 Firefox 中运行。

它不再适用于 FF 20.0.1

```
var data = google.visualization.arrayToDataTable(briefData);
var chart = new google.visualization.BarChart(document.getElementById('masterstatus'));
chart.draw(data, options);
google.visualization.events.addListener(chart, 'select', function(e){
  if (chart.getSelection()[0].column && chart.getSelection()[0].row >=0){
    status = data.getValue(chart.getSelection()[0].row, 0);
    makeOwnerTable(status);
  }
}); 
```

发布更多代码没有什么意义——它主要是特定于上下文的东西——数百行有限的（我认为）相关性。

底线是该页面显示两个谷歌图表，一个条形图和表格图表 - 表格图表根据用户单击条形图中的条形刷新

症状...

makeOwnerTable 函数在 FF 中接收一个空字符串。在萤火虫中放一个断点

```
makeOwnerTable(status); 
```

行，确认 var status = "" （Chrome 开发工具中的相同断点给出 status="foo"）。进入

```
x = data.getValue(chart.getSelection()[0].row, 0) 
```

在脚本暂停时在 Firebug 提示符处给我 x = "foo"。

现在通常当这种奇怪的事情发生时，我会去寻找尚未完成的野性 ajax 东西，但这里不是这种情况。

所以.. 总结一下... 在 FF 20.0.1（只有 FF 20.0.1）中，Google 的 getValue 似乎在运行时不起作用，但在 FB 提示符下起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:11:16.197

您的“状态”未声明为 var。这就是设置`window.status`。而这恰好在 Firefox 20 中不起作用（请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=862540](https://bugzilla.mozilla.org/show_bug.cgi?id=862540)）。

我建议将“var”放在那个状态变量之前，所以它是一个本地函数。

# php - 表单中基于 php 的元素的 Tab 键顺序

> ID：16138782
> 
> 赞同：1
> 
> 时间：2013-04-22T03:01:38.217
> 
> 标签：php, tab-ordering

我目前有一个表单，其中包含一些基于 php 的元素。在表单中，当我浏览表单时会跳过这些基于 php 的元素。如何为表单中基于 php 的元素设置 Tab 键顺序？

这是代码的子集。我希望计费国家的标签顺序为 13（在 zip 和电话之间）。

```
<div class="controls"><input placeholder="Zip Code" name="billing_zip"  tabindex="12"  type="text" class="medium" id="billing_zip" value="<?php echo $order['billing']['zip']; ?>" /></div>
<div class="controls"><?php echo country_box($order['billing']['country'], "billing_country"); //echo Html::state_box($order['billing']['state'], 'billing_state', 'state custom mini', array('display' => 'abbrev', 'display_case' => 'upper', 'optional' => true));?></div>
<div class="controls"><input placeholder="Phone" name="billing_phone"  tabindex="14"  type="text" id="billing_phone" value="<?php echo $order['billing']['phone']; ?>"/></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:11:31.073

要真正正确地执行此操作，您应该使用 PHP 脚本或函数生成所有这些 HTML。但是，如果这不可能或太麻烦，您至少可以使用 PHP 来跟踪选项卡索引，并使用 PHP 变量 like `$tab_index`echo 和 increment like `tab_index++;`。一个例子：

```
<?php
$tab_index = 1;
?>
<input ... name='zip' tabindex='<?php echo $tab_index; $tab_index++; ?> type='text' />
<input ... name='country' tabindex='<?php echo $tab_index; $tab_index++; ?> type='text' />
<input ... name='phone' tabindex='<?php echo $tab_index; $tab_index++; ?> type='text' /> 
```

对于每一个`++`，tabindex 将被更新，并且下一个正确显示为递增。

# facebook - 一行只有facebook like box

> ID：16138794
> 
> 赞同：0
> 
> 时间：2013-04-22T03:03:14.493
> 
> 标签：facebook, facebook-like

我目前正在设计一个网站，其中嵌入了一个类似 facebook 的框。facebook 的默认值如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/NvsUx.jpg)

但是，我希望朋友的图标与类似这样的框出现在同一行，而不是那种外观：

![在此处输入图像描述](https://i.stack.imgur.com/ju7jg.jpg)

有没有人有任何想法做这个？我尝试在 css 上添加几种样式并覆盖 facebook 给出的类，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:42:30.110

点赞按钮通常是 iframe，因此您的样式不会影响它。此外，由于它位于不同的域中，我不确定您是否可以通过 javascript 将您自己的样式添加到 tr 元素来操作它（将它们设置为 display:table-cell 实现您想要的），因为跨域访问问题。最后，我不确定是否有平台政策也会因此而失效，这可能会对您的 facebook 整合产生负面影响

# excel - 如何在 Mathematica 中导入包含超过 100,000 行的 excel 文件

> ID：16138797
> 
> 赞同：1
> 
> 时间：2013-04-22T03:03:38.387
> 
> 标签：excel, wolfram-mathematica

我有一个包含 110,000 行数据的 Microsoft Excel 文件。当我使用`Import`Mathematica 中的命令导入文件时，我发现它只能导入大约 60,000 行，因此原始 excel 文件中的大量数据丢失，原始文件被截断为 60,000 行文件。

# php - Android 和 PHP，网站返回 android 应该获取并执行的查询列表

> ID：16138799
> 
> 赞同：0
> 
> 时间：2013-04-22T03:04:01.167
> 
> 标签：php, android, mysql, sqlite

所以我正在制作应用程序，我需要应用程序从互联网 [http://www.arleitiss.netne.net/DBindex.php?action=fetchTrans](http://www.arleitiss.netne.net/DBindex.php?action=fetchTrans)获取查询列表 并执行它们。我做到了，它在手机上测试时没有显示错误，但它在 AVD 上抛出了空指针。

```
package com.example.droid;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URI;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.content.Context;
import android.util.Log;

public class OnlineSync {
    Context context;
    public OnlineSync(Context context){
        this.context = context;
    }
    public boolean AddUser(String username, String pass, String name, String city, String country, String age){
        HttpClient http = new DefaultHttpClient();
        HttpPost httpp = new HttpPost("http://www.arleitiss.netne.net/DBindex.php");
        boolean result = false;
        try{
            List<NameValuePair> nvp = new ArrayList<NameValuePair>(6);
            nvp.add(new BasicNameValuePair("action", "adduser"));
            nvp.add(new BasicNameValuePair("username", username));
            nvp.add(new BasicNameValuePair("password", pass));
            nvp.add(new BasicNameValuePair("name", name));
            nvp.add(new BasicNameValuePair("city", city));
            nvp.add(new BasicNameValuePair("country", country));
            nvp.add(new BasicNameValuePair("age", String.valueOf(age)));
            httpp.setEntity(new UrlEncodedFormEntity(nvp));

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String response = http.execute(httpp, responseHandler);
            Log.d("RESPONSE", response);
            if(response.toString().equals("ERROR1")){
                result = true;
            }
            else if(response.toString().equals("ERROR-1")){
                result = false;
            }

        }
        catch(ClientProtocolException e){result = false;}
        catch(IOException e){result = false;}
        return result;
    }

    public String[] SyncTrans(){
    BufferedReader in = null;
    String data = null;
    try{
    HttpClient client = new DefaultHttpClient();
    URI website = new URI("http://www.arleitiss.netne.net/DBindex.php?action=fetchTrans");
    HttpGet request = new HttpGet();
    request.setURI(website);
    HttpResponse response = client.execute(request);
    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.seperator");
    while(( l = in.readLine()) != null){
        sb.append(l + nl);
    }
    in.close();
    data = sb.toString();
    String arr[] = data.split("<br>");
    return arr;
    }
    catch(Exception e){}
    return null;
    }
    public void Exec(){
    DbCon dc = new DbCon(this.context);
    String queries[] = SyncTrans();
    for(int a = 0; a < queries.length-1; a++){
        dc.ExecQuery(queries[a]);
        Log.d("TAGG",queries[a].toString());
    }

    }

} 
```

在数据库中我有简单的功能：

```
public void ExecQuery(String query){
        DbCon.this.open();
        database.rawQuery(query, null);
        DbCon.this.close();
    } 
```

帮助？

日志猫：

> 04-22 02:36:42.648: E/AndroidRuntime(5983): 致命异常: main 04-22 02:36:42.648: E/AndroidRuntime(5983): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.droid/com.example.droid.Incomes_act}: java.lang.NullPointerException 04-22 02:36:42.648: E/AndroidRuntime(5983): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 04 -22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app .ActivityThread.access$600(ActivityThread.java:141) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 04-22 02: 36:42.648: E/AndroidRuntime(5983): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.os.Looper.loop(Looper.java:137) 04-22 02:36:42.648: E/AndroidRuntime(5983) : 在 android.app.ActivityThread.main(ActivityThread.java:5039) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-22 02 :36:42.648: E/AndroidRuntime(5983): at java.lang.reflect.Method.invoke(Method.java:511) 04-22 02:36:42.648: E/AndroidRuntime(5983): at com.android。 internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-22 02:36:42.648: E/AndroidRuntime(5983): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560 ) 04-22 02:36:42.648: E/AndroidRuntime(5983): at dalvik.system.NativeStart.main(Native Method) 04-22 02:36:42.648: E/AndroidRuntime(5983): Caused by: java.朗。NullPointerException 04-22 02:36:42.648: E/AndroidRuntime(5983): at com.example.droid.OnlineSync.Exec(OnlineSync.java:89) 04-22 02:36:42.648: E/AndroidRuntime(5983):在 com.example.droid.Incomes_act.onCreate(Incomes_act.java:88) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Activity.performCreate(Activity.java:5104) 04- 22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app。 ActivityThread.performLaunchActivity(ActivityThread.java:2144) 04-22 02:36:42.648: E/AndroidRuntime(5983): ... 11 更多Income_act.onCreate(Incomes_act.java:88) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Activity.performCreate(Activity.java:5104) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2144) 04-22 02:36:42.648: E/AndroidRuntime(5983): ... 11 更多Income_act.onCreate(Incomes_act.java:88) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Activity.performCreate(Activity.java:5104) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 04-22 02:36:42.648: E/AndroidRuntime(5983): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :2144) 04-22 02:36:42.648: E/AndroidRuntime(5983): ... 11 更多performLaunchActivity(ActivityThread.java:2144) 04-22 02:36:42.648: E/AndroidRuntime(5983): ... 11 更多performLaunchActivity(ActivityThread.java:2144) 04-22 02:36:42.648: E/AndroidRuntime(5983): ... 11 更多

另一个 logcat 日志 #2：

> 04-22 13:55:48.304: E/AndroidRuntime(933): 致命异常: main 04-22 13:55:48.304: E/AndroidRuntime(933): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.droid/com.example.droid.Incomes_act}：java.lang.NullPointerException 04-22 13:55:48.304：E/AndroidRuntime(933)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 04 -22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app .ActivityThread.access$600(ActivityThread.java:130) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 04-22 13: 55:48.304: E/AndroidRuntime(933): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.os.Looper.loop(Looper.java:137) 04-22 13:55:48.304: E/AndroidRuntime(933): 在android.app.ActivityThread.main(ActivityThread.java:4745) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-22 13:55 :48.304: E/AndroidRuntime(933): at java.lang.reflect.Method.invoke(Method.java:511) 04-22 13:55:48.304: E/AndroidRuntime(933): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 04-22 13:55:48.304: E/AndroidRuntime(933): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 04 -22 13:55:48.304: E/AndroidRuntime(933): at dalvik.system.NativeStart.main(Native Method) 04-22 13:55:48.304: E/AndroidRuntime(933): Caused by: java.lang. NullPointerException 04-22 13:55:48。304: E/AndroidRuntime(933): 在 com.example.droid.OnlineSync.Exec(OnlineSync.java:92) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 com.example.droid.Incomes_act .onCreate(Incomes_act.java:88) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.Activity.performCreate(Activity.java:5008) 04-22 13:55:48.304: E /AndroidRuntime(933): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 2023)5008) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 04-22 13:55:48.304: E/AndroidRuntime(933): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)5008) 04-22 13:55:48.304: E/AndroidRuntime(933): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 04-22 13:55:48.304: E/AndroidRuntime(933): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)

创建线程：

```
String arr[];
Thread trd = new Thread(new Runnable(){
      @Override
      public void run(){

                BufferedReader in = null;
                String data = null;
                try{
                final HttpClient client = new DefaultHttpClient();
                URI website = new URI("http://www.arleitiss.netne.net/DBindex.php?action=fetchTrans");
                final HttpGet request = new HttpGet();
                request.setURI(website);

                HttpResponse response = client.execute(request);
                in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                StringBuffer sb = new StringBuffer("");
                String l = "";
                String nl = System.getProperty("line.seperator");
                while(( l = in.readLine()) != null){
                    sb.append(l + nl);
                }
                in.close();

                data = sb.toString();
                String arr2[] = data.split("<br>");
                arr = arr2;
                }
                catch(Exception e){ 
                e.printStackTrace();
                return; 
                }

      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:55:16.590

手机运行的是什么版本的 Android？AVD 运行的是什么版本？

在 Android **Honeycomb 及更高版本**上，当您**尝试在主线程上进行网络操作**时会出现异常（更多信息请参见：[Android http 连接异常](https://stackoverflow.com/questions/6976317/android-http-connection-exception)）。如果是这种情况，您应该在单独的线程上执行网络操作。您的手机可能没有抱怨，因为它的 Android < 3.0（可能是 2.3？）允许您在主线程上执行网络操作。

这可能是您的空指针异常的原因，因为在这种情况下，SyncTrans 无法在 AVD 上执行。当您在此函数处静默捕获异常并在失败时返回 null 时，会引发 NullPointerException，因为在执行 SyncTrans 之后，您正在访问其返回值 at 的属性`for(int a = 0; a < queries.length-1; a++)`。如果 SyncTrans 失败，则A`queries`为 null，您将在尝试访问它的长度时抛出 NullPointerException。

我希望这能澄清你的问题。

**编辑：**在您的代码中没有发现有关此行为的错误，因为您实际上是在隐藏它们：

```
try{
    //Any code here
}
catch(Exception e){} 
```

这通常是一种不好的做法，因为您只是默默地捕获错误而不做任何事情。例如，如果您更改为此：

```
try{
    //Any code
}
catch(Exception e){
e.printStackTrace();
} 
```

您将在 Logcat 中看到带有错误的堆栈跟踪。

# c - 将 char 连接到 int 类型

> ID：16138804
> 
> 赞同：0
> 
> 时间：2013-04-22T03:04:17.447
> 
> 标签：c

过去几个小时一直在绞尽脑汁，但我需要帮助。几乎试图为 RTL 设计中使用的阻塞缓存编写 C 模型。我已将 C 中的缓存行定义为“char”类型的数组，以使其可字节寻址。唯一的困难是我一生无法弄清楚如何将四个字节（字符）连接成要返回的 32 位“int”类型。我已经尝试了所有我能想到的使用 strcat、strncat、strcpy 等，但没有运气。当我用实际字符填充 char 数组时，strcat 返回正确的值，但在使用数字时它的行为并不理想（strcat 只返回第一个元素而不是整个 char 数组）。示例代码：

```
unsigned char aa[4] = {0};
char testet[2] = {1,0};
printf(" aa[0] = %d \n", aa[0]);
printf(" aa[1] = %d \n", aa[1]);
printf(" aa[2] = %d \n", aa[2]);
printf(" aa[3] = %d \n", aa[3]);
printf(" aaconcat as a 32b word is %u \n", *strncat(aa, testet,2));
printf(" aaconcat as a 32b word is %u \n", *strncat(aa, testet,1));
printf(" aa[0] = %d \n", aa[0]);
printf(" aa[1] = %d \n", aa[1]);
printf(" aa[2] = %d \n", aa[2]);
printf(" aa[3] = %d \n", aa[3]); 
```

回报：

```
aaconcat as a 32b word is 1 
aaconcat as a 32b word is 1 
aa[0] = 1 
aa[1] = 2 
aa[2] = 1 
aa[3] = 0 
```

虽然我期待 {testet[0],testet[1],testet[0]} = 131330。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:31:19.583

如果您尝试连接实际位，我怀疑您可能正在尝试根据您的预期结果进行操作`{testet[0],testet[1],testet[0]} = 131330`，然后尝试这样的操作来连接`char`s：

这假设`char`您要连接的 s 存储在`unsigned char chararr[4]`.

```
long int chars_in_int = 0;
for (int i = 0; i < 4; i++ ) {
    chars_in_int << 8;    /* redundant on first loop */
    chars_in_int += chararr[i];
} 
```

这会将`char`具有最低索引的 s`chararr`放在 的最高有效位中`chars_in_int`。

# java - 井字游戏中无法访问的代码

> ID：16138805
> 
> 赞同：0
> 
> 时间：2013-04-22T03:04:18.193
> 
> 标签：java

我一直在研究“死代码”和“无法访问的代码”一段时间，但我似乎仍然无法弄清楚我的程序中这个问题是怎么回事。这是我所拥有的一个片段；在井字游戏中检查获胜者的方法“gameEnd()”：

```
private boolean gameEnd() {
    // Setting local variables
    int x = xMouseSquare;
    int y = yMouseSquare;
    int[][] g = gameBoard;
    int c = CPU;
    int h = HUMAN;

    // Checking for a winner

    /* Checking columns (xMouseSquare)
     * Enter the y value, the vertical value, first; then x, the horizontal value, second
     */

    // Set y equal to 0 and then add 1
    for (y = 0; y < 3; y++) {
        // Set CPU c equal to 0
        c = 0;
        // Set x equal to 0 and then add 1
        for (x = 0; x < 3; x++) {
            // Add CPU's value to the game board 
            c += g[x][y];

            // If statement returning the absolute value of CPU
            if (Math.abs(c) == 3) {
                // If these values are correct, return true; the game ends with CPU win horizontally
                return true;
            }
        }
    }
    // If not, return false; game continues until all marks are filled
    return false;
    // Set y equal to 0 and then add 1
    for (y = 0; y < 3; y++) {
        // This time, however, set HUMAN h equal to 0
        h = 0;
        // Set x equal to 0 and then add 1
        for (x = 0; x < 3; x++) {
            // Then add HUMAN's value to the game board
            h += g[x][y];
            // If statement returning the absolute value of HUMAN
            if (Math.abs(h) == -3) {
                // If these values are correct, return true; the game ends with HUMAN win horizontally
                return true;
            }
        }
    }
    // If not, return false; game continues until all marks are filled

    return false;
    {
        /* Checking rows (yMouseSquare)
         * Enter the x value, the horizontal value, first; then y, the vertical value, second
         */
        // Set x equal to 0 and then add 1
        for (x = 0; x < 3; x++) {
            // Set CPU equal to 0
            c = 0;
            // Set y equal to 0 and then add 1
            for (y = 0; y < 3; y++) {
                // Add CPU's value to the game board, but with y and then x
                c += g[y][x];
                // If statement returning the absolute value of CPU
                if (Math.abs(c) == 3) {
                    // If these values are correct, return true; the game ends with CPU win vertically
                    return true;
                }
            }
        }
        // If not, return false; game continues until all marks are filled
        return false;
        {
            // Set x equal to 0 and then add 1
            for (x = 0; x < 3; x++) {
                // This time, however, set HUMAN h equal to 0
                h = 0;
                // Set y equal to 0 and then add 1
                for (y = 0; y < 3; y++) {   
                    // Then add HUMAN's value to the game board
                    h += g[x][y];
                    // If statement returning the absolute value of HUMAN
                    if (Math.abs(h) == -3) {
                        // If these values are correct, return true; the game ends with CPU win vertically
                        return true;
                    }
                }
            }
            // If not, return false; game continues until all marks are filled
            return false;
        }
    }
}
} // error on this bracket; but when I remove it, some of the code above becomes unreachable. Can anyone point to what I'm doing wrong? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T03:11:03.707

如果缩进正确，我认为如果没有命中第一个“return true”实例，则将始终执行第一次出现的“return false”，因此永远不会到达所有剩余的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:55:08.130

你的问题就在这里

```
// If not, return false; game continues until all marks are filled
        return false; <-- code exits here, everything below will not run.
        {
            // Set x equal to 0 and then add 1
            for (x = 0; x < 3; x++) {
... 
```

# c# - 如何使用c#/asp.net在ie中调用打开或保存文件对话框

> ID：16138806
> 
> 赞同：0
> 
> 时间：2013-04-22T03:04:18.460
> 
> 标签：c#, asp.net, visual-studio, api, internet-explorer

我使用 get blobentry 将文件本地保存到我的电脑上，但我希望弹出 ie 打开/保存对话框。我该怎么做？我的代码是：

```
 ARSServer.GetEntryBLOB("CHG:WorkLog", "CWL000000005407", 1000000351, "C:\\Users\\josephs\\Desktop\\word.doc"); 
```

只要我创建了文件名，它就会将文件（来自 BMC 服务器）保存到我的桌面上，我可以让 IE 使用代码来处理这个吗？

还有使用“out byte [] content”的选项，但我不确定如何使用它

```
 ARSServer.GetEntryBLOB("CHG:WorkLog", "CWL000000005407", 1000000351, "out byte [] content" 
```

这会是让ie成为打开/保存对话框的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:02:28.277

ASP.NET 在浏览器中运行，为此，它使用浏览器可以理解的语言：**HTML**

为此，唯一让您能够请求文件的文件控件是`<input type="file" ...`

在 ASP.NET 中，您可以使用[**FileUpload**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)控件`<asp:FileUpload runat="server" id="...`

但是您需要将其包装在 a 中`<form>`并在提交时采取行动（或通过异步调用，但始终提交表单）

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)[中提供](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)**了完整的演示代码。**

# javascript - 如何在 Flask 和 Javascript 之间进行通信？

> ID：16138808
> 
> 赞同：0
> 
> 时间：2013-04-22T03:04:25.573
> 
> 标签：javascript, python, json, flask

每个人。所以我一直在浏览这个文档： http: [//flask.pocoo.org/docs/patterns/jquery/](http://flask.pocoo.org/docs/patterns/jquery/)。我有一个 Flask 站点正在运行，但是，当我尝试设置它们所拥有的东西时，我得到了错误： `GET http://127.0.0.1:5000/add_numbers?a=5&b=5 404 (NOT FOUND)`

看起来客户端甚至无法与服务器建立连接。

我这边唯一不同的是我如何为变量 a 和 b 赋值。我还确保包含定义 $SCRIPT_ROOT 是什么的脚本。不知道在这里做什么。我也正确加载了 jQuery。

我正在考虑尝试 ajax，但我找不到一个很好的 ajax 与 python 的例子。（我对后端开发很陌生）

```
$.getJSON($SCRIPT_ROOT + '/add_numbers', {
            a: 5,
            b: 5
        }, function(data) {                                 
            alert(data.result);
        }); 
```

基本上，我试图做的全部事情是最终将数据从数据库中获取到我的 javascript 中。我已经设法将数据从我的数据库中获取到我的 HTML 中，但还没有到我的 JS 中。这就是我正在尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:07:13.030

`$.getJSON` *是*AJAX，它只是包装得很好而且很干净。无论如何，如果您使用的是文章中的服务器端代码，那么您的 JavaScript 代码的 URL 是错误的：您应该`$SCRIPT_ROOT + '/_add_numbers'`使用`_`before `add_numbers`。

无论如何，如果您已经获得了 HTML 中的所有数据，为什么不让 JavaScript 从 HTML 中提取数据呢？

# java - 平衡二叉搜索树

> ID：16138809
> 
> 赞同：0
> 
> 时间：2013-04-22T03:05:12.050
> 
> 标签：java, binary-search-tree

我需要建立一个平衡的二叉搜索树。到目前为止，我的程序插入了从 1 到 26 的数字，但我的程序没有将它构建到平衡的二叉搜索树中。如果有人可以查看我的代码并帮助我，将不胜感激。

```
public class TreeNode {

  TreeNode leftTreeNode, rightTreeNode;// the nodes
  int data;
  //int size;

  public TreeNode(){//Constructer
    leftTreeNode = null;
    rightTreeNode = null;
  }

  public TreeNode(int newData){//Constructer with new Data coming in for comparison
    leftTreeNode = null;
    rightTreeNode = null;
    data = newData;
  }

  public TreeNode getLeft(){
    return leftTreeNode;
  }
  public TreeNode getRight(){
    return rightTreeNode;
  }

  public void setLeft(TreeNode leftTreeNode){
    this.leftTreeNode = leftTreeNode;
  }
  public void setRight(TreeNode rightTreeNode){
    this.rightTreeNode = rightTreeNode;
  }
  public int getData(){
    return data;
  }

//    public boolean isEmpty(){//Checking to see if the the root is empty
//      if(size == 0) return true;
//      else return false;

  public void print(){
    System.out.println("Data is: " + getData());
  }
}

//    public void traverse (Node root){ // Each child of a tree is a root of its subtree.
//    if (root.getLeft() != null){
//        traverse (root.getLeft());
//    }
//    System.out.println(root.data);
//    if (root.getRight() != null){
//        traverse (root.getRight());
//    }
//}

public class BinarySearchTree {
  TreeNode root;

  public BinarySearchTree(){
    root = null;
  }

  public TreeNode getRoot(){
    return root;
  }
  public void insert(int data) { //Insert method checking to see where to put the nodes
    TreeNode node1 = new TreeNode(data);
    if (root == null) { 
      root = node1; 
    } 
    else{
      TreeNode parIns = root;//Parent
      TreeNode insNode = root;//Insertion Node

      while(insNode != null){
        parIns = insNode;

        if(data < insNode.getData()){//If the data is less than the data coming in place it on the left
          insNode = insNode.getLeft();
        }else{//Place it on the right
          insNode = insNode.getRight();
        }
      }//Searching where to put the node

      if(data < parIns.getData()){
        parIns.setLeft(node1);
      }else{
        parIns.setRight(node1);
      }

    }
  }

  public void printInorder(TreeNode n){
    if(n != null){
      printInorder(n.getLeft());//L
      n.print();//N
      printInorder(n.getRight());//R
    }
  }
//    public TreeNode balance(tree, int start, int end){
//      if(start > end) return null;
//      int mid = (start + end) /2;
//      TreeNode node;
//      TreeNode leftChild;
//      TreeNode rightChild;
//      
//      if(node <= mid){
//        leftChild = balance(arr[mid -1], start, end);/*Make the left child if the node coming in is
//        less than the mid node */
//        
//        
//      }else{
//        rightChild = balance(arr[mid]+1, start, end);/*Make the rigth child if the node is
//          greater than the mid node*/
//        
//      }
//      return node;
//  }

  public static void main(String[] args) {
    BinarySearchTree tree = new BinarySearchTree();
    tree.insert(1);
    tree.insert(2);
    tree.insert(3);
    tree.insert(4);
    tree.insert(5);
    tree.insert(6);
    tree.insert(7);
    tree.insert(8);
    tree.insert(9);
    tree.insert(10);
    tree.insert(11);
    tree.insert(12);
    tree.insert(13);
    tree.insert(14);
    tree.insert(15);
    tree.insert(16);
    tree.insert(17);
    tree.insert(18);
    tree.insert(19);
    tree.insert(20);
    tree.insert(21);
    tree.insert(22);
    tree.insert(23);
    tree.insert(24);
    tree.insert(25);
    tree.insert(26);
    tree.printInorder(tree.getRoot());

  }

}

//for(int i = 1; i <= 26; i++)
  //tree.insert(i);

         public void balance(TreeNode tree, int start, int end){
      TreeNode tree1 = new TreeNode(data);
      if(start <= end){
      int mid = (start + end) /2;
      //TreeNode node;
      TreeNode leftChild;
      TreeNode rightChild;

      if(tree1.getData() <= mid){
        leftChild = balance(tree1(mid -1), start, end);/*Make the left child if the node coming in is
        less than the mid node */

      }else{
        rightChild = balance(tree1(mid+1), start, end);/*Make the rigth child if the node is
          greater than the mid node*/

      }

      }
} 
```

如何修复平衡功能以正确平衡我的树？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T03:08:00.190

由于您的树不会自平衡，因此它是否平衡将取决于元素的插入顺序。

如果您希望您的树无论如何都保持平衡，则需要注意班级中的平衡。例如，看一下[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)数据结构。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-23T03:19:06.557

```
public class BinarySearchTree {
  TreeNode root;

  public BinarySearchTree(){
    root = new TreeNode();
  }

  public TreeNode getRoot(){
    return root;
  }
  public void insert(int data) {
    root = insert(root, data);
  }//Insert method checking to see where to put the nodes

//  public void insert(TreeNode node, int data){
//    TreeNode node1 = new TreeNode(data);
//    if (root == null) { 
//      root = node1; 
//    } 
//    else{
//      TreeNode parIns = root;//Parent
//      TreeNode insNode = root;//Insertion Node
//      
//      while(insNode != null){
//        parIns = insNode;
//        
//        if(data < insNode.getData()){//If the data is less than the data coming in place it on the left
//          insNode = insNode.getLeft();
//        }else{//Place it on the right
//          insNode = insNode.getRight();
//        }
//      }//Searching where to put the node
//      
//      if(data < parIns.getData()){
//        parIns.setLeft(node1);
//      }else{
//        parIns.setRight(node1);
//      }
//      
//    }
//  }

  private TreeNode insert(TreeNode node, int data) { 
    if(root.data == 0)
      root.data = data;
    else if (node==null) { 
      node = new TreeNode(data); 
    } 
    else { 
      if (data <= node.data) { 
        node.leftTreeNode = insert(node.leftTreeNode, data); 
      } 
      else { 
        node.rightTreeNode = insert(node.rightTreeNode, data); 
      } 
    } 

    return(node); // in any case, return the new pointer to the caller 
  } 
  public void printPreOrder(){
    printPreOrder(root);
  }
  public void printPreOrder(TreeNode n){
    if(n != null){
      n.print();//N
      printPreOrder(n.getLeft());//L
      printPreOrder(n.getRight());//R
    }
  }

    public TreeNode balance(int[] a, int start, int end){
    TreeNode node = new TreeNode();
    if(start <= end){
      int mid = start + (end - start) /2;
      node.data = a[mid];

      if(root.data == 0)
        root = node;
      node.leftTreeNode = balance(a, start, mid -1);/*Make the left child if the node coming in is
       less than the mid node */

      node.rightTreeNode = balance(a, mid + 1, end);/*Make the rigth child if the node is
       greater than the mid node*/
    }
      else{
      return null;
      }

    return node;
  }

  public static void main(String[] args) {
    BinarySearchTree tree = new BinarySearchTree();
    //int[] a = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,22,23,24,25,26};
    int[] a = new int[26];
    for(int i = 0; i < 26; i++){
      a[i] = i + 1;
    }
    for(int i = 1; i <= 26; i++)
      tree.insert(i);

    tree.printPreOrder();
    BinarySearchTree tree2 = new BinarySearchTree();
    tree2.balance(a, 0, 25);
    System.out.println("Now I am going to balance my tree");
    tree2.printPreOrder();

  }

}

public class TreeNode {

  TreeNode leftTreeNode, rightTreeNode;// the nodes
  int data;
  //int size;

  public TreeNode(){//Constructer
    leftTreeNode = null;
    rightTreeNode = null;
    data = 0;
  }

  public TreeNode(int newData){//Constructer with new Data coming in for comparison
    leftTreeNode = null;
    rightTreeNode = null;
    data = newData;
  }

  public TreeNode getLeft(){
    return leftTreeNode;
  }
  public TreeNode getRight(){
    return rightTreeNode;
  }

  public void setLeft(TreeNode leftTreeNode){
    this.leftTreeNode = leftTreeNode;
  }
  public void setRight(TreeNode rightTreeNode){
    this.rightTreeNode = rightTreeNode;
  }
  public int getData(){
    return data;
  }

//    public boolean isEmpty(){//Checking to see if the the root is empty
//      if(size == 0) return true;
//      else return false;

  public void print(){
    System.out.println("Data is: " + getData());
  }

} 
```

# c++ - 使用 libssh 将“输入”发送到远程进程

> ID：16138811
> 
> 赞同：0
> 
> 时间：2013-04-22T03:05:32.153
> 
> 标签：c++, ssh, libssh

我正在使用 libssh 登录终端，然后运行 ​​ncurses 应用程序。

我正在关注本教程，一次发送一个字符：http: [//api.libssh.org/master/libssh_tutor_shell.html](http://api.libssh.org/master/libssh_tutor_shell.html)

ncurses 应用程序使用 getstr() 等待用户输入，我的问题是当我编写输入并按 enter 时，libssh 发送 '\n' 而不是输入信号，因此 curses 应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T10:48:20.027

您应该在此处使用文档 bash 语法。您通过 libssh API 发送的命令将如下所示：

```
your_instruction <<tag\ntag 
```

研究[以下例子](http://www.tldp.org/LDP/abs/html/here-docs.html)。

# c - 以位定义交流类型

> ID：16138817
> 
> 赞同：1
> 
> 时间：2013-04-22T03:06:26.747
> 
> 标签：c, typedef

我想知道你是否可以在位中定义一个类型。具体来说，我想定义一个 24 位类型，以便存储 RTP 中丢失的包的累积数量。

如果没有，我怎样才能从一个 int.memcpy 中提取 3 个字节。如果我这样做，我不确定它会如何结束：

```
memcpy(pkg + 29, (&clamped_pkgs_lost)+(sizeof(char)), 3*sizeof (char)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:05:19.247

您可以使用位域定义至少 24 位的类型，但位域必须是 a 的成员`struct`：

```
struct {
    unsigned pkgs_lost: 24;
}; 
```

无论您使用这样的位域，还是仅使用至少 24 位的简单类型`unsigned long`来存储应用程序中的值，当您将其复制到 RTP 数据包时，最简单的可移植方式是一次复制一个字节. 这是因为 RTP 数据包中的值始终是 big-endian，而您的主机的字节序是未知的。

假设它`pkg`是 type `unsigned char *`，你会做类似的事情：

```
pkg[33] = pkgs_lost >> 16;
pkg[34] = pkgs_lost >> 8;
pkg[35] = pkgs_lost; 
```

将 24 位大端序号放置在传出数据包中的字节位置 33 处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:58:20.430

在 C 中，您只能根据基本类型或位域来定义整数类型。

位域很古怪。你不能拿他们的地址。如果您只需要 24 位，它们不会为您节省任何空间，但您的平台只有 8、16 和 32 位的基本类型。您仍然需要使用 3 个 8 位整数或 1 个 32 位整数（或 1 个 16 位和 1 个 8 位）来存储您的 24 位。

对于像计数器这样简单的东西，我只使用一个 32 位整数。如果我有兴趣将其限制为 24 位值，我有两个选择：

*   将 8 个最高有效位清零，从而模拟回绕
*   将值限制为 2 ^(24) -1，因此它永远不会超过它也不会环绕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:00:35.683

您可以将一个窄整数存储在一个较大的整数中。只需屏蔽您想要的位。

```
int main() {
    long data;
    data & 0xFFFFFF;
} 
```

或者，您可以在结构成员上定义位域。但是不要尝试将结构写入磁盘并在不同的系统上打开它，因为位域布局*不是标准化*的。

```
struct {
    long data:24;
}; 
```

# javascript - 用 toggleMe 脚本替换 div

> ID：16138821
> 
> 赞同：0
> 
> 时间：2013-04-22T03:07:06.303
> 
> 标签：javascript

我有三个链接的图像，每个图像都有不同的 ID。我还有三个引用相应图像 ID 的 div。我已经在页面中启用了 toggleMe 脚本并且可以正常工作。我的问题是如何更改此脚本，以便不必再次单击链接来折叠/展开内容？例如...如果我单击图像 A，我希望图像 A 的内容展开。然后，如果我单击图像 B，我希望图像 A 的内容折叠并展开图像 B，而无需再次单击图像 A。或者，如果我单击 Image CI，则希望以前的内容折叠并扩展 Image C 的新内容。

```
<script type="text/javascript">
function toggleMe(a){
  var e=document.getElementById(a);
  if(!e)return true;
  if(e.style.display=="none"){
    e.style.display="block"
  } else {
    e.style.display="none"
  }
  return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:09:44.897

此功能称为手风琴。jquery ui 有一个开箱即用的实现。[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

把它放在你的脑海中：

`<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />`

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script> $(function() {
    $( "#accordion" ).accordion();
    });
</script> 
```

并且您的内容将具有以下结构：

```
 <div id="accordion">
    <h3>Section 1</h3>
    <div>
      <p>
        First
      </p>
    </div>
    <h3>Section 2</h3>
    <div>
      <p>
        Second 
      </p>
    </div>
    <h3>Section 3</h3>
    <div>
      <p>
        Third
      </p>
    </div>
  </div> 
```

这是一个例子：[小提琴](http://jsfiddle.net/abell25/NVxa3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:26:49.113

```
<script type="text/javascript">
function toggleMe(a){
  var allIds = ['one', 'two', 'three']; // store all of involved ids here
  var e=document.getElementById(a);
  if(!e)return true;
  for (var i = 0; i < allIds.length; i++) {
    if (allIds[i] != a) {
      document.getElementById(allIds[i]).style.display="none";
    }
  }
  if(e.style.display=="none") e.style.display="block";
  return true;
}
</script> 
```

# javascript - Javascript + XML

> ID：16138825
> 
> 赞同：1
> 
> 时间：2013-04-22T03:07:45.623
> 
> 标签：javascript, jquery, xml

有一些 javascript 查看以下 XML 的“注释”部分，我正在尝试添加另一个规则：“is-public”需要具有值：“true”。我试过添加`public[count] = $j(this).find('is-public').text("true")();`似乎不起作用。谁能帮我吗？提前致谢

**JAVASCRIPT：**

```
$j(document).ready(function() {
    $j('#ticket_fields_NONE').attr("disabled", true);
  //Check to see if there isn't already a value
  if(!$j('input#ticket_fields_NONE').val()) {

    //setting the DOM Object to attach the queue to
    var para = $j("select#ticket_assignee_id");
        var roleID = new Array();
    var count = 0;
    var commentAuthor = new Array();
    var ticketCreated = new Array();
var public = new Array();

//beginning of queue
        para.queue("testQueue", function( next ){$j.get('/tickets/{{ticket.id}}.xml', 
            function(ticketCreateAt) {
                $j(ticketCreateAt).find('comment').each(function() {
                    ticketCreated[count] = $j(this).find('created-at').text();
    public[count] = $j(this).find('is-public').text("true")();
                    commentAuthor[count] = $j(this).find('author-id').text();
                    var timeUNIX = new Date();
                    timeUNIX.setISO8601(ticketCreated[count]);
                    ticketCreated[count] = Date.parse(timeUNIX)/1000;
                    //displays in the sidewidget it can be removed.
                    count++;
                }); 
```

**XML:**

```
 <ticket>
    <assigned-at type="datetime" nil="true"/>
    <assignee-id type="integer" nil="true"/>
    <base-score type="integer">720</base-score>
    <created-at type="datetime">2012-07-17T10:38:03+10:00</created-at>
    <current-collaborators nil="true"/>
    <current-tags>
    topic-general_site_tech-facebook_question training_tim via_contact_form
    </current-tags>
    <description>test</description>
    <due-date type="datetime" nil="true"/>
    <entry-id type="integer" nil="true"/>
    <external-id nil="true"/>
    <group-id type="integer" nil="true"/>
    <initially-assigned-at type="datetime" nil="true"/>
    <latest-recipients nil="true"/>
    <nice-id type="integer">218</nice-id>
    <organization-id type="integer" nil="true"/>
    <original-recipient-address nil="true"/>
    <priority-id type="integer">0</priority-id>
    <recipient nil="true"/>
    <requester-id type="integer">237738133</requester-id>
    <resolution-time type="integer" nil="true"/>
    <solved-at type="datetime" nil="true"/>
    <status-id type="integer">0</status-id>
    <status-updated-at type="datetime">2012-07-17T10:38:03+10:00</status-updated-at>
    <subject/>
    <submitter-id type="integer">214034168</submitter-id>
    <ticket-type-id type="integer">0</ticket-type-id>
    <updated-at type="datetime">2013-04-19T12:53:45+10:00</updated-at>
    <updated-by-type-id type="integer">0</updated-by-type-id>
    <via-id type="integer">5</via-id>
    <score type="integer">720</score>
    <problem-id nil="true"/>
    <has-incidents type="boolean">false</has-incidents>
    <comments type="array">
    <comment>
    <author-id type="integer">237738133</author-id>
    <created-at type="datetime">2012-07-17T10:38:03+10:00</created-at>
    <is-public type="boolean">true</is-public>
    <type>Comment</type>
    <value>test</value>
    <via-id type="integer">5</via-id>
    <attachments type="array"/>
    </comment> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:18:51.030

如果您只想遍历公共评论，请更改

```
$j(ticketCreateAt).find('comment') 
```

到

```
$j(ticketCreateAt).find('comment:has(is-public:contains("true"))') 
```

演示：[小提琴](http://plnkr.co/edit/lPpm55nxGCuph6CpnaVf?p=preview)

# java - JMenuItem 快捷键 Ctrl-C / Ctrl-V 或 Ctrl-Insert / Shift-Insert 不再起作用

> ID：16138826
> 
> 赞同：2
> 
> 时间：2013-04-22T03:07:47.043
> 
> 标签：java, swing, jtable, copy-paste, jmenu

我有一个较旧的基于 Java swing 的独立应用程序，它使用 JFrame 和 JMenuBar，其中包含多个 Jmenu 元素（具有相应的 JMenuItem 项）。

在 Windows（7 和 vista）上升级到最新的 1.6.0_41（或 1.7.x）JVM 后，我注意到带有快捷键 Ctrl-C（或 Ctrl-Insert）的菜单项不再收到它的 ActionEvent，**如果JTable 被添加到框架**中。但是，如果通过鼠标单击访问菜单，则会调用菜单 ActionListener。如果删除了 JTable，则该快捷方式有效。如果我将快捷方式组合更改为 Ctrl-C 或 Ctrl-Insert（即 Ctrl-L）以外的其他内容，则会调用 ActionListener。

它过去的工作方式（我刚刚在 Windows Vista 上使用 jvm 1.4 确认了它 - 我知道该环境得到任何认真关注已经有一段时间了 :) 是 Ctrl-C 将执行标准复制到剪贴板功能如果焦点位于可编辑字段内，则为 JTable。否则，我的菜单 ActionListener 是通过 setAccelerator() 方法分配的快捷方式调用的。

看起来 JTable 实现在 1.6.* 中发生了变化，以在 Windows 上以不同方式处理 Ctrl-C 绑定事件。

在 Mac OS (JVM 1.6.0_43) 上运行这个应用程序我可以看到 ActionListener 是通过 Ctrl-C 快捷方式调用的。虽然可能是因为 JTable 在 Mac OS 下使用 Command-C 而不是 Ctrl-C 来复制到剪贴板。

我已经提取了演示问题的代码的相关部分。非常感谢任何建议。

```
public class TestFrame extends JFrame {

public TestFrame(String title) {

    super(title);
}

private void init() {

    getContentPane().setLayout(new BorderLayout());

    addMenu();
    addTable();

    // Change default exit operation
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    pack();
    setVisible(true);
}

private void addTable() {

    JTable jTable = new JTable(createTableModel());

    // Place table in JScrollPane
    JScrollPane scrollPane = new JScrollPane(jTable);

    // Add Table
    add(scrollPane, BorderLayout.CENTER);
}

private TableModel createTableModel() {

    Object[][] data = new Object[][]{ 
            {new Date(), "First Row, 2nd column", "First Row, 3rd column"},
            {new Date(), "Second Row, 2nd column", "Second Row, 3rd column"},
        };

    Object[] columnNames = new Object[]{"Date", "Type", "Description"};

    DefaultTableModel model = new DefaultTableModel(data, columnNames) {

        public boolean isCellEditable(int row, int column) {
            return column != 0;
        }

    };

    return model;
}

private void addMenu() {

    // Create the menu bar.
    JMenuBar menuBar = new JMenuBar();
    setJMenuBar(menuBar);

    JMenu editMenu = new JMenu("Edit");
    menuBar.add(editMenu);

    TestActionListener listener = new TestActionListener();
    JMenuItem menuItem = null;

    menuItem = new JMenuItem("Copy 1");
    menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_INSERT, ActionEvent.CTRL_MASK));
    menuItem.addActionListener(listener);
    editMenu.add(menuItem);

    menuItem = new JMenuItem("Copy 2");
    menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, ActionEvent.CTRL_MASK));
    menuItem.addActionListener(listener);
    editMenu.add(menuItem);

    menuItem = new JMenuItem("Copy 3");
    menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, ActionEvent.CTRL_MASK));
    menuItem.addActionListener(listener);
    editMenu.add(menuItem);
}

public static void main(String[] args) {

    TestFrame frame = new TestFrame("Test");
    frame.init();
}

private static class TestActionListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        System.out.println("TestFrame.TestActionListener.actionPerformed(): e="+ e);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:24:53.343

The problem is that your frame is not focused and there are no elements in your whole component hierarchy which has the focus, meaning that no one will "grab" the event and try to do something with it. Since `JMenuItem`'s bind their shortcut to the input map `JComponent.WHEN_IN_FOCUSED_WINDOW`, your shortcut never "answers" the event.

To fix this, either put the focus on one of the component or directly on the `JFrame` (for example with `frame.requestFocusInWindow();`). Small example here:

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class TestFrame extends JFrame {

    public TestFrame(String title) {

        super(title);
    }

    private void init() {

        getContentPane().setLayout(new BorderLayout());

        addMenu();
        addTable();

        // Change default exit operation
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        pack();
        setVisible(true);
    }

    private void addTable() {

        JTable jTable = new JTable();

        // Place table in JScrollPane
        JScrollPane scrollPane = new JScrollPane(jTable);

        // Add Table
        add(scrollPane, BorderLayout.CENTER);
    }

    private void addMenu() {

        // Create the menu bar.
        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu editMenu = new JMenu("Edit");
        menuBar.add(editMenu);

        TestActionListener listener = new TestActionListener();
        JMenuItem menuItem = null;

        menuItem = new JMenuItem("Copy 1");
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_INSERT, KeyEvent.CTRL_MASK));
        menuItem.addActionListener(listener);
        editMenu.add(menuItem);

        menuItem = new JMenuItem("Copy 2");
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_MASK));
        menuItem.addActionListener(listener);
        editMenu.add(menuItem);

        menuItem = new JMenuItem("Copy 3");
        menuItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, KeyEvent.CTRL_MASK));
        menuItem.addActionListener(listener);
        editMenu.add(menuItem);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestFrame frame = new TestFrame("Test");
                frame.init();
                frame.requestFocusInWindow();
            }
        });
    }

    private static class TestActionListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("TestFrame.TestActionListener.actionPerformed(): e=" + e);
        }
    }
} 
```

Additional remarks:

*   Don't extend `JFrame` if not needed
*   Start your UI from the Event Dispatching Thread (EDT) by using `SwingUtilities.invokeLater()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:45:25.790

如果您的问题是如何从表中删除 Control+C 绑定，那么您可以执行以下操作：

```
KeyStroke copy = KeyStroke.getKeyStroke("control C");
InputMap im = table.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
im.getParent().remove(copy); 
```

但是，这将从所有表中删除绑定。

# php - 强制 Emacs 在 php 模式下使用选项卡

> ID：16138830
> 
> 赞同：3
> 
> 时间：2013-04-22T03:08:29.837
> 
> 标签：php, emacs, indentation

我希望 Emacs 在 php 模式下使用制表符而不是空格。我试着把下面的代码

```
;; Turn on tabs
(setq indent-tabs-mode t)
(setq-default indent-tabs-mode t)

;; Bind the TAB key
(global-set-key (kbd "TAB") 'self-insert-command)

;; Set the tab width
(setq default-tab-width 4)
(setq tab-width 4)
(setq c-basic-indent 4) 
```

在我的 .emacs 中。然后我打开一个 php-mode 缓冲区并按下`<C-q><Tab>`，但 Emacs 仍然插入 4 个空格而不是一个制表符。我花了很多时间寻找这个。上面的代码只是不起作用的解决方案之一。我在这里想念什么？
（我知道很多人认为制表符是邪恶的，但在我工作的公司中，这是一个标准，所以在我工作时使用空格缩进不是我的选择）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:06:34.910

我会使用这样的东西：

```
(add-hook 'php-mode-hook 'my-php-mode-hook)
(defun my-php-mode-hook ()
  (setq indent-tabs-mode t)
  (let ((my-tab-width 4))
    (setq tab-width my-tab-width)
    (setq c-basic-indent my-tab-width)
    (set (make-local-variable 'tab-stop-list)
         (number-sequence my-tab-width 200 my-tab-width)))) 
```

在这里设置制表符停止列表可能是多余的，也可能不是多余的，因为我不知道它是否曾经在 php-mode 中使用过。但是，设置它并没有什么坏处。

请注意`indent-tabs-mode`，`tab-width`、 和`c-basic-indent`都是自动缓冲区局部变量。当你`C-h v`过去向 Emacs 询问它们时，它会告诉你情况就是这样。因此，您`setq`在原始代码中使用的方式不会对其他缓冲区产生任何影响。更改此类变量默认值的正确方法是使用`setq-default`. 该`default-tab-width`变量已过时；此类变量已被弃用，取而代之的是`setq-default`与普通变量名一起使用。

我的代码中的模式挂钩方法在您正在编辑的 php-mode 缓冲区的上下文中设置缓冲区本地值，因此如果您不想使用这种方法，则不需要弄乱默认值。

在您的情况下，您可能希望使用一些默认值，特别是如果您将编辑的不仅仅是 PHP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T14:12:22.690

我找到了一种更简单的方法来实现这一点。执行`M-x`> `customize-variable`>`php-mode-coding-style`并将其更改为`Wordpress`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:15:09.887

不同的方法怎么样？保存时插入选项卡，发现[这个](https://stackoverflow.com/questions/318553/getting-emacs-to-untabify-when-saving-certain-file-types-and-only-those-file-ty)SO 问题可以反向进行，您可能可以对其进行反向工程，`tabify`而不是`untabify`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T16:23:53.233

FWIW，我认为您只是在浪费时间：停止担心制表符与空格，然后继续前进。

这就是说，如果这真的是你想要的，你可以尝试：

```
(add-hook 'php-mode-hook
          (lambda ()
            (local-set-key [?\t] 'self-insert-command))) 
```

# vbscript - 在 VBScript 中获取当前目录

> ID：16138831
> 
> 赞同：53
> 
> 时间：2013-04-22T03:08:52.837
> 
> 标签：vbscript, directory

我正在尝试获取当前目录并使用它来运行应用程序，无论文件放在哪里，也无论路径如何更改

```
Dim fso: set fso = CreateObject("Scripting.FileSystemObject")
Dim CurrentDirectory
CurrentDirectory = fso.GetAbsolutePathName(".")
Dim Directory
Directory = CurrentDirectory\attribute.exe

Set WinScriptHost = CreateObject("WScript.Shell")
WinScriptHost.Run Chr(34) & "Directory" & Chr(34), 0
Set WinScriptHost = Nothing 
```

我如何实际设置此代码以使其正确执行我希望它执行的操作？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-01-20T02:42:58.177

您可以使用**WScript.ScriptFullName**它将返回*执行脚本*的完整路径。

然后您可以使用字符串操作（*jscript 示例*）：

```
scriptdir = WScript.ScriptFullName.substring(0,WScript.ScriptFullName.lastIndexOf(WScript.ScriptName)-1) 
```

或从 FileSystemObject 获得帮助，（*vbscript 示例*）：

```
scriptdir = CreateObject("Scripting.FileSystemObject").GetParentFolderName(WScript.ScriptFullName) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-22T11:13:02.573

您可以使用[CurrentDirectory](http://msdn.microsoft.com/en-us/library/3cc5edzd%28v=vs.84%29.aspx)属性。

```
Dim WshShell, strCurDir
Set WshShell = CreateObject("WScript.Shell")
strCurDir    = WshShell.CurrentDirectory
WshShell.Run strCurDir & "\attribute.exe", 0
Set WshShell = Nothing 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-04-22T09:14:30.893

您的问题是没有获取目录（`fso.GetAbsolutePathName(".")`很好地解决了当前工作目录）。即使您想要脚本目录而不是当前工作目录，您也可以很容易地确定，正如 Jakob Sternberg 在[他的回答](https://stackoverflow.com/a/21225466/1630171)中所描述的那样。

在您的代码中不起作用的是从目录和可执行文件构建路径。这是无效的语法：

> ```
> Directory = ~~CurrentDirectory\attribute.exe~~
> ```

如果要从变量和文件名构建路径，则文件名必须指定为字符串（或包含字符串的变量）并与变量目录变量连接：

```
Directory = CurrentDirectory & "\attribute.exe" 
```

[或者（更好）您使用BuildPath](http://msdn.microsoft.com/en-us/library/z0z2z1zt)方法构造路径：

```
Directory = fso.BuildPath(CurrentDirectory, "attribute.exe") 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-12T16:33:03.363

```
'-----Implementation of VB6 App object in VBScript-----
Class clsApplication
    Property Get Path()
          Dim sTmp
          If IsObject(Server) Then
               'Classic ASP
               Path = Server.MapPath("../")
          ElseIf IsObject(WScript) Then 
               'Windows Scripting Host
               Path = Left(WScript.ScriptFullName, InStr(WScript.ScriptFullName, WScript.ScriptName) - 2)
          ElseIf IsObject(window) Then
               'Internet Explorer HTML Application (HTA)
               sTmp = Replace( Replace(Unescape(window.location), "file:///", "") ,"/", "\")
               Path = Left(sTmp, InstrRev( sTmp , "\") - 1)
          End If
    End Property
End Class
Dim App : Set App = New clsApplication 'use as App.Path 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-22T03:38:48.097

你的线

```
Directory = CurrentDirectory\attribute.exe 
```

与我在 vbscript 说明手册中遇到的任何功能都不匹配。以下内容对我有用，但不确定您希望“attribute.exe”驻留在什么/位置。

```
dim fso
dim curDir
dim WinScriptHost
set fso = CreateObject("Scripting.FileSystemObject")
curDir = fso.GetAbsolutePathName(".")
set fso = nothing
Set WinScriptHost = CreateObject("WScript.Shell")
WinScriptHost.Run curDir & "\testme.bat", 1
set WinScriptHost = nothing 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-30T17:24:41.013

在代码中使用[With 。](https://itknowledgeexchange.techtarget.com/vbscript-systems-administrator/vbscript-statements-explanation-of-the-with-end-with-statement/)

试试这种方式：

```
''''Way 1

currentdir=Left(WScript.ScriptFullName,InStrRev(WScript.ScriptFullName,"\"))

''''Way 2

With CreateObject("WScript.Shell")
CurrentPath=.CurrentDirectory
End With

''''Way 3

With WSH
CD=Replace(.ScriptFullName,.ScriptName,"")
End With 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-15T17:30:21.963

简单的：

```
scriptdir = replace(WScript.ScriptFullName,WScript.ScriptName,"") 
```

# jquery - 如果单元格有省略号，如何在 Kendo UI Grid 中启用工具提示？

> ID：16138833
> 
> 赞同：2
> 
> 时间：2013-04-22T03:09:16.570
> 
> 标签：jquery, kendo-ui, kendo-grid

是否可以检查 Kendo Grid 的单元格在调整大小时是否包含省略号，以便显示工具提示？省略号是通过 CSS 声明的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:54:59.657

当然。对具有 text-overflow:ellipsis 属性的元素使用此函数

```
function isEllipsisActive(e) {
     return (e.offsetWidth < e.scrollWidth);
} 
```

这是一个例子[http://jsfiddle.net/cgzW8/115/](http://jsfiddle.net/cgzW8/115/)

# java - 如何在 JPanel 上显示不断变化的 BufferedImage

> ID：16138836
> 
> 赞同：0
> 
> 时间：2013-04-22T03:09:46.403
> 
> 标签：java, swing, jpanel, bufferedimage

我需要在 JPanel 上显示不断变化的 BufferedImages。代码的结构如下所示，我编译了一个 SSCCE，如下所示。

以下类在 Eclipse 的 SSCCE1 项目中

**类 DisplayLattice.Java**

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;   
import javax.swing.JPanel;

public class DisplayLattice extends JPanel {

    private BufferedImage IMAGE = null;
    private BufferedImage DISPLAY_IMAGE = null;

    public DisplayLattice()
    {
        IMAGE = new BufferedImage(100, 100, BufferedImage.TYPE_INT_RGB);
        render();
    }

    public DisplayLattice(BufferedImage map) {
        IMAGE = map;
        render();
    }

    public void paint(Graphics g) {
        if (IMAGE == null)
            super.paint(g);
        else
            g.drawImage(IMAGE, 0, 0, this);
    }

    public void render() {

    int cellWidth = 5;
    int cellHeight = 5;

        int imgW = IMAGE.getWidth();
        int imgH = IMAGE.getHeight();
        DISPLAY_IMAGE = new BufferedImage(imgW*cellWidth, imgH*cellHeight, 1);          
        Graphics2D g2 = IMAGE.createGraphics();
        g2.clearRect(0,0,DISPLAY_IMAGE.getWidth(),DISPLAY_IMAGE.getHeight());

        for (int x=0; x<imgW; x++) {
            for (int y=0; y<imgH; y++) {
                g2.setColor(new Color(IMAGE.getRGB(x, y)));
                g2.fillRect((int)(x*cellWidth), (int)(y*cellHeight),
                            (int)cellWidth, (int)cellHeight);
            }
        }
        g2.setColor(Color.black);
        g2.dispose();
        repaint();
        revalidate();
        System.out.println("XX");
    }   

    public void setImage(BufferedImage image)
    {
        IMAGE = image;
    }
} 
```

**类 SelfOrganizingMap.java**

```
import java.awt.Color;
import java.awt.image.BufferedImage;

public class SelfOrganizingMap {

    public void methodTrain()
    {
        for(int i = 0; i < 100; i++)
        {
            new DisplayLattice(exportImageNorm());
        }

    }

    private BufferedImage exportImageNorm()
    {
        BufferedImage colorNodes = new BufferedImage(200, 200, 1);
        double[][] normL2values = new double[200][200];
        float t = 0.0f;
        for(int i = 0; i < normL2values.length ; i++){
            for(int j = 0; j < normL2values[0].length; j++){
                t = (float) Math.random();
                colorNodes.setRGB(i, j, (new Color(t,t,t)).getRGB());
            }
        }
        System.out.println("LL");
        return colorNodes;
    }

} 
```

以下课程在 SSCCE2 项目中

**类 MapScreen.Java（主类）**

```
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class MapScreen extends JFrame {
    private int WIDTH = 0;
    private int HEIGHT = 0;
    private DisplayLattice pnlMap;

    public MapScreen(int mapOption) {

        setType(Type.UTILITY);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setTitle("Map");
        setSize(600, 600);
        setLocation(150,150);
        getContentPane().setLayout(null);

        pnlMap = new DisplayLattice();
        pnlMap.setBounds(6, 130, 582, 440);
        getContentPane().add(pnlMap);

        JButton btnNewButton = new JButton("New button");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                new SelfOrganizingMap().methodTrain();
            }
        });
        btnNewButton.setBounds(10, 81, 89, 23);
        getContentPane().add(btnNewButton);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                MapScreen frame = new MapScreen(5);
                frame.setVisible(true);
            }
        });

    }
} 
```

我想要实现的是，当我单击 MapScreen 类上的 JButton 时，我需要 JPanel，它是 SSCCE1 项目中 DisplayLattice 的一个实例，以动态更改 SelfOrganzingMap 类中 methodTrain() 中指定的迭代次数。

我当前遇到的问题是，我在每次迭代时在 SelfOrganizingMap 类中设置的 bufferedImage 未在显示的 JPanel 中设置。

如何纠正这个问题？进行这种可视化的最佳方式是什么，请记住，这里介绍的所有三个类都非常庞大，在实际应用程序中有很多方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:26:23.420

主要问题（您遇到的）在于您的`methodTrain`方法。

```
new DisplayLattice(exportImageNorm()); 
```

这只是创建 的新实例`DisplayLattice`，它与实际显示在屏幕上的实例无关......

我能想到的最简单的解决方案是将您创建的引用简单地传递`MapScreen`给`methodTrain`方法......

```
new SelfOrganizingMap().methodTrain(pnlMap); 
```

这将允许您执行类似...

```
public void methodTrain(DisplayLattice map) {
    for (int i = 0; i < 100; i++) {
        map.setImage(exportImageNorm());
    }
} 
```

之后您需要做的唯一另一件事是`repaint`在`setImage`重新分配图像后添加方法。

**挑剔**

*   不使用`setBounds`，使用a `LayoutManager`，认真，努力，它会给你无尽的回报......
*   不要覆盖`paint`，`paintComponent`而是使用。这是提供自定义绘画的推荐方法。此外，除非您绝对有具体的理由不这样做，否则您必须打电话`super.paintXxx`，如果不这样做，您最好知道会出现什么问题，以便您可以修复它。
*   无需调用`revalidate`after `repaint`，`revalidate`将`repaint`自行安排。
*   您还可能想看看[Java 编程语言的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

# java - 我第一次尝试制作一个简单的基于瓷砖的 java 游戏

> ID：16138837
> 
> 赞同：1
> 
> 时间：2013-04-22T03:09:48.073
> 
> 标签：java

我正在尝试在这里制作我的第一个小型 Java 游戏，并且我想让它基于平铺。我正在尝试在 JFrame 上平铺块图像，并整理了一些代码以适应我的情况。不幸的是，它并没有真正起作用，因为它不会绘制任何我想要的测试精灵，这是我需要帮助的地方。我将发布我的代码：

frame.java：我想说这一切都是正确的......

```
import javax.swing.JFrame;

public class frame extends JFrame
{
    panel ng;

    public frame()
        {
            ng = new panel();
            setSize(500,500);
            setVisible(true);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setResizable(false); 
            add(ng);
        }
        public static void main(String [] args)
        {
            frame n = new frame();
        }
} 
```

面板.java：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.JPanel;

public class panel extends JPanel implements Runnable
{
    private Thread game;
    private boolean running = false;
    private Image dbImage;
    private Graphics dbGraphics;
    static final int Width = 50;
    static final int Height = 50;
    static final Dimension dim = new Dimension(Width,Height);
    map nm;

    public panel()
    {
        nm = new map("tester.txt");
        setPreferredSize(new Dimension(75,75));
        setFocusable(true);
        requestFocus();
    }
    public void run()
    {
        while (running)
        {
            update();
            render();
            paintScreen();

        }
    }
    private void update()
    {
        if (game != null && running == true)
        {

        }
    }
    private void render()
    {
        if (dbImage == null)
        {
            dbImage = createImage(Width, Height);
            dbGraphics = dbImage.getGraphics();
        }
        dbGraphics.setColor(Color.WHITE);
        dbGraphics.fillRect(0,0,Width,Height);
        draw(dbGraphics);
    }
    private void paintScreen()
    {
        Graphics g;
        try
        {
            g=this.getGraphics();
            if(dbImage != null && g != null)
            {
                g.drawImage(dbImage,0,0,null);
            }

        }
        catch(Exception e) 
        {

        }
    }
    public void draw(Graphics g)
    {
        nm.draw(g);
    }

    private void startGame()
    {
        if(game == null || running == false)
        {
            game = new Thread(this);
            game.start();
        }
    }
    public void addNotify()
    {
        super.addNotify();
        startGame();
    }
    public void stopGame()
    {
        if (running == true)
        {
            running = false; 
        }
    }
} 
```

map.java：这是我尝试分配精灵的地方......不确定我做错了什么。顺便说一句，我在地图构造函数中使用的测试文本文件只是一个具有宽度、高度以及一堆随机 0 和 1 的文件。0 和 1 用于显示某些块的位置。

```
import java.awt.Graphics;
import java.awt.Image;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

public class map
{

    private int[][] tileMap;
        private int height;
        private int width;
        private Image BLOCK;

    public map(String mapFile)
    {
            BLOCK = new ImageIcon("path to sprite").getImage();
            int[] tileNums;
            try
            {
                BufferedReader br = new BufferedReader(new FileReader(mapFile));
                width=Integer.parseInt(br.readLine());
                height=Integer.parseInt(br.readLine());
                tileNums= new int[width];
                tileMap=new int[width][height];

                for(int row = 0; row < height; row++)
                {
                    String line=br.readLine();
                    //what I'm trying to do here is make each int in grid into array by converting char to int
                    for(int i=0; i<=line.length();i++)
                    {
                        tileNums[i]=(line.charAt(i)-48);
                    }
                    for(int col = 0; col<width; col++)
                    {
                        tileMap[row][col]=tileNums[col];
                    }
                }

            }
            catch(Exception e)
            {

            }
    }
        public void draw(Graphics g)
        {
            int ix=0;
            int iy=0;
            for(int row=0;row<height;row++)
            {
                for(int col=0;col<height;col++)
                {
                    if(tileMap[row][col]==0)
                    {
                         g.drawImage(BLOCK, ix, iy, null);
                         ix=ix+16;
                    }
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:52:06.743

您必须覆盖 JPanel 的paint 方法并在其中调用draw，将图形对象g 传递给它。

# java - 在 ExtJS 中显示

> ID：16138839
> 
> 赞同：1
> 
> 时间：2013-04-22T03:10:15.050
> 
> 标签：java, javascript, jsp, extjs4

我在显示我的 ExtJS 网格时遇到问题。今天早些时候，它工作正常。现在我再次运行它，它不再一样了。用户界面已损坏。我不知道该怎么办。我尝试重新启动 Eclipse、浏览器甚至我的 PC。我还尝试制作另一个 JSP，但 UI 仍然损坏。

![这是sc](https://i.stack.imgur.com/1GEQy.png)

[这是截图的链接。。](http://dc427.4shared.com/img/hHF8-pUk/s7/0.45000610714299316/error.PNG?async)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:06:08.697

根据您的说法，代码一直在工作，您刚刚添加了存储和/或 servlet 配置。然后您可能会遇到文件夹名称或路径错误。检查您在控制器中嵌入的文件夹\组件变量\存储名称等中的命名...

另一件值得注意的事情是，您告诉您恢复了代码并进行了尝试。那么，如果是这种情况，您是否清除了浏览器的缓存，因为它可能会解决您的问题。

# json.net - 如何根据用户授权动态jsonignore？

> ID：16138840
> 
> 赞同：7
> 
> 时间：2013-04-22T03:10:30.817
> 
> 标签：json.net, asp.net-web-api

我使用 Metadata 和 JsonIgnore 从序列化中删除特殊字段。

```
[Authorize(Roles = "admin")]
public class UserController : ApiController
{
    public IEnumerable<user> Get()
    {
        using (var mydb = new ModelContainer())
        {
            return mydb.userSet.ToList();
        }
    }
}

[MetadataType(typeof(user_Metadata))]  
public partial class user
{  
    private class user_Metadata  
    {  
        [JsonIgnore]  
        public virtual password { get; set; }  

        public virtual adminFile { get; set; }  
    }  
} 
```

如何动态控制应序列化的字段。对于一些事情，比如

```
public partial class user
{  
    private class user_Metadata  
    {  
        [JsonIgnore]  
        public virtual password { get; set; }  
        [Roes == admin?JsonIgnore:JsonNotIgnore] //some thing like this
        public virtual adminFile { get; set; }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T22:41:27.043

[条件属性序列化](http://james.newtonking.com/projects/json/help/index.html?topic=html/ConditionalProperties.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:51:14.570

`JsonIgnore`是一个不能动态设置的属性。但是您可以尝试类似的方法。

```
public partial class user
{  
    private class user_Metadata  
    {  
        [JsonIgnore]  
        public virtual password { get; set; }  

        //[Roes == admin?JsonIgnore:JsonNotIgnore] //something like this
        public virtual adminFile 
        { 
            get
            {
               if(Roes == admin)
                   return NULL;
               else
                   return adminFile;
            }
            set
            {
               if(Roes == admin)
                   value = NULL;
               else
                   value = adminFile;
            } 
        }  

    }  
} 
```

通过这种方式，您可以保存默认值而不是保存属性的实际值。

# bash - Bash 脚本错误：[：缺少]

> ID：16138841
> 
> 赞同：3
> 
> 时间：2013-04-22T03:10:36.013
> 
> 标签：bash, scripting

```
#!/bin/bash
if [ `date +%u` -lt 6 && `date +%H` == '19' ] ; then
   echo 'Sorry, you cannot run this program today.'
else
   echo 'yes, you can run today'
fi 
```

上面的脚本是在工作日和每晚 7 点运行一个程序。我检查了空格，它仍然返回错误： date.sh: 2: [: missing ]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:18:31.200

将其更改为：

```
#!/bin/bash
if [ `date +%u` -lt 6  ] && [ `date +%H` == '19' ] ; then
   echo 'Sorry, you cannot run this program today.'
else
   echo 'yes, you can run today'
fi 
```

请注意，这`[`只是`test`命令及其`]`最后一个参数的简写。运算符的`&&`使用与任何其他命令行一样，例如`cd /home && ls`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T03:15:37.600

您的代码有两个问题。

第一个是一个简单的错字：`date %H`应该是`date +%H`.

第二个是您看到的错误的原因：`&&`is not the right operator to use。它分隔命令，而您的`if`条件实际上应该是一个；bash 在 ] 的末尾寻找 ] `[ `date +%u` -lt 6`，没有找到它，并且出错了。你想`-a`改用。

# c++ - 通过 C++ 中的函数返回数组

> ID：16138842
> 
> 赞同：0
> 
> 时间：2013-04-22T03:10:36.370
> 
> 标签：c++, function

它将获得意想不到的价值：

```
double* myFunction()
{
    double a[2];
    a[0]=0.1;
    a[1]=0.2;
    return a;
}
int main()
{
    double* a = myFunction();
    cout<<a[0];  // it is not 0.1
    cout<<a[1];  // it is not 0.2
} 
```

它将获得预期值：

```
double* myFunction()
    {
        double* a = new double[2];
        a[0]=0.1;
        a[1]=0.2;
        return a;
    }
    int main()
    {
        double* a = myFunction();
        cout<<a[0];  // it is 0.1
        cout<<a[1];  // it is 0.2
    } 
```

这两种方法有什么区别？

为什么第一种方法不能正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:13:36.930

以您的第一种方式：

```
 double a[2]; 
```

是分配在堆栈上的本地数组，它的内存将在退出时被释放`myFunction`，所以`double*`将指向释放的内存，你看到了垃圾值。

```
double* a = new double[2]; 
```

它也是一个在堆上动态分配的本地数组，但是，它的内存在退出时不会被释放`myFunction`，返回`double*`时会指向该数组`myFunction`。您需要显式调用`delete[] a`以释放内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:13:17.143

第一个在堆栈上分配它的数组，在函数调用后被杀死，第二个分配的内存没有被释放，但你以后必须自己释放它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:02:13.290

第一种方法使用数组，当程序超出范围时，数组的范围会变成垃圾，因为它是在堆栈上分配的内存。但是，第二种方法使用堆分配，其中内存一直保留到`delete []`被调用。

如果您不使用非常大的数组，您也可以考虑使用`std::vector`，它结合了堆栈和堆分配，从某种意义上说，内存组件存储在堆上，当您超出范围时它们会被删除，而您不必调用delete[] 显式删除它占用的内存。

# java - 蜡染 SVGGraphics2D 绘制图像时出现空指针异常

> ID：16138850
> 
> 赞同：7
> 
> 时间：2013-04-22T03:11:24.000
> 
> 标签：java, batik

我正在尝试使用 Batik 库将 BufferedImage 绘制到 SVG 文件中。我有非常相似的代码适用于 EPS/PS 文件，但由于某种原因，以下代码：

```
// Get a DOMImplementation and create an XML document
DOMImplementation domImpl = GenericDOMImplementation.getDOMImplementation();
Document document = domImpl.createDocument(null, "svg", null);

// Create an instance of the SVG Generator
SVGGraphics2D svgGenerator = new SVGGraphics2D(document);

// draw from image into the svg:
svgGenerator.drawImage(image,new RescaleOp((float)1.0,(float)0.0,null),0,0); 

// Write svg file
OutputStream outputStream = new FileOutputStream(svgFile);
Writer out = new OutputStreamWriter(outputStream, "UTF-8");

//svgGenerator.stream(out, true /* use css */);  

// write and close file:                   
outputStream.flush();
outputStream.close(); 
```

在 svgGenerator.drawImage(...) 行上导致 NullPointerException。由于基本上相同的命令适用于 AbstractPSDocumentGraphics2D（以另一种方法），我不知道这里有什么问题。

编辑：图像在别处声明（类变量，此代码在该类的方法内）。

这是一个堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at org.apache.batik.svggen.ImageHandlerBase64Encoder.encodeImage(ImageHandlerBase64Encoder.java:157)
at org.apache.batik.svggen.ImageHandlerBase64Encoder.handleHREF(ImageHandlerBase64Encoder.java:133)
at org.apache.batik.svggen.ImageHandlerBase64Encoder.handleHREF(ImageHandlerBase64Encoder.java:72)
at org.apache.batik.svggen.DefaultImageHandler.handleImage(DefaultImageHandler.java:63)
at org.apache.batik.svggen.SimpleImageHandler.handleImage(SimpleImageHandler.java:100)
at org.apache.batik.svggen.SVGGraphics2D.drawImage(SVGGraphics2D.java:677)
at org.apache.batik.svggen.SVGGraphics2D.drawImage(SVGGraphics2D.java:996)
at SciTK.SciTK_Image.exportImageAsSVG(SciTK_Image.java:1232)
at SciTK.SciTK_Image.save_image(SciTK_Image.java:428)
at SciTK.SciTK_Image$7.actionPerformed(SciTK_Image.java:982)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
at com.apple.laf.AquaMenuItemUI.doClick(AquaMenuItemUI.java:157)
at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-17T15:59:39.890

为了其他人在谷歌上搜索这个......我有 - 我相信 - 同样的问题。

假设 Batik 1.7：低级原因是：`ImageHandlerBase64Encoder.encodeImage()`调用：

```
ImageWriter writer = ImageWriterRegistry.getInstance().getWriterFor("image/png");
writer.writeImage(buf, os); 
```

并且`ImageWriterRegistry`是空的，所以它返回null，`getWriterFor("image/png")`因此`writer.writeImage(buf, os);`死亡。

注册表为空的原因是类路径中缺少 JAR。我认为特别需要的是`batik-codec.jar`，但我只是添加了所有蜡染 JAR。

您可以下载蜡染源并在调试器中查看使用 JAR 注册的“图像/png”和其他格式（第一次调用`ImageWriterRegistry.getInstance()`创建实例，其构造函数调用`setup()`依次迭代所有`ImageWriter`服务提供者 - 这应该是非-empty 设置正确的类路径。）

# metadata - Drive API 给出错误 500

> ID：16138853
> 
> 赞同：0
> 
> 时间：2013-04-22T03:12:00.800
> 
> 标签：metadata, google-drive-realtime-api

使用 Google 提供的[表单](https://developers.google.com/drive/v2/reference/files/get)后，它失败并给出此响应

```
要求

获取 https://www.googleapis.com/drive/v2/files/0By0Nrrd3XVTUY2pGOTBXTWFWWjQ?key={YOUR_API_KEY}

X-JavaScript-User-Agent：谷歌 APIs Explorer

回复

500内部服务器错误

- 隐藏标题 -

缓存控制：私有，max-age=0
内容编码：gzip
内容长度：66
内容类型：应用程序/json；字符集=UTF-8
日期：2013 年 4 月 22 日星期一 03:08:00 GMT
过期时间：2013 年 4 月 22 日星期一 03:08:00 GMT
服务器：GSE

{
 “错误”： {
  “代码”：500，
  “消息”：空
 }
}

```

谁能澄清我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:54:26.530

I had the same issue and it [has been resolved](https://stackoverflow.com/questions/16199088/google-drive-api-error-500-simple-api-access) by Google employee Ali Afshar. (FYI, I think the tag google-drive-sdk is the one that probably got his attention.)

# android - 在自定义 ListView 中覆盖或添加单行

> ID：16138857
> 
> 赞同：2
> 
> 时间：2013-04-22T03:13:01.720
> 
> 标签：android, android-listview, android-adapter, android-adapterview

我正在为我正在制作的应用程序制作菜单列表。我按照本教程创建它（根据需要更改值） - [http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)。

现在我的清单不是很复杂。每次都会有相同的数据，而且只有两个部分。到目前为止，我的列表正常工作，但我需要用 xml 中的不同视图/布局替换第 7 项或添加该视图。

当前代码....

主要活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class HU_main extends Activity {

    private ListView f_menu;

        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hu_main);

        Front_menu front_menu_data[] = new Front_menu[] {
            new Front_menu("Cadences", "Reference chart of all the primary cadences."),
            new Front_menu("Chords and Non-Chord Tones", "Reference chart of chord types and non-chord tones and associated rules of NCTs."),
            new Front_menu("Key Signatures", "Reference chart for key signature rules."),
            new Front_menu("Scale/Mode Triads", "List of triads and degrees for all standard diatonic scale modes."),
            new Front_menu("Harmonic Progression", "Reference chart for scale and mode chord progressions."),
            new Front_menu("Terminology Translation", "Reference list if primary music terms and instruments in German, Italian and French."),
            new Front_menu("Replace", "Replace"),
            new Front_menu("Chord Finder", "Enter notes to find chords."),
            new Front_menu("Modulation", "Reference chart of chord types and non-chord tones and associated rules of NCTs."),
            new Front_menu("Scale Finder", "Find scales and modes by notes."),
            new Front_menu("Transposition", "Show changes to and from concert pitch for transposing instruments or determine overall transposition of key.")
            };

            Front_menuAdapter adapter = new Front_menuAdapter(this,
            R.layout.item_layout, front_menu_data);

            f_menu = (ListView)findViewById(R.id.f_menu);

            f_menu.setAdapter(adapter);

        }

    } 
```

Front_menu适配器：

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class Front_menuAdapter extends ArrayAdapter<Front_menu> {
    Context context;
    int layoutResourceId;
    Front_menu data[] = null;

    public Front_menuAdapter(Context context, int layoutResourceId, Front_menu[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    Front_menuHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new Front_menuHolder();
            holder.txtTitle1 = (TextView)row.findViewById(R.id.menu_item);
            holder.txtTitle2 = (TextView)row.findViewById(R.id.item_description);
            holder.header2 = (TextView)row.findViewById(R.id.tools_header);

            row.setTag(holder);

            if (position != 6) {
                holder.txtTitle1.setVisibility(View.VISIBLE);
                holder.txtTitle2.setVisibility(View.VISIBLE);
                holder.header2.setVisibility(View.GONE);
            }

            else if (position == 6) {
                holder.header2.setVisibility(View.VISIBLE);
                holder.txtTitle1.setVisibility(View.GONE);
                holder.txtTitle2.setVisibility(View.GONE);
            }

        }

        else {
            holder = (Front_menuHolder)row.getTag();
        }

        Front_menu front_menu = data[position];
        holder.txtTitle1.setText(front_menu.item);
        holder.txtTitle2.setText(front_menu.desc);

        return row;
    }

    class Front_menuHolder {
        TextView txtTitle1;
        TextView txtTitle2;
        TextView header2;
    }

}

Front_menu (constructor):

    public class Front_menu {
        public String item;
        public String desc;
        public Front_menu() {
             super();
        }

        public Front_menu(String item, String desc) {
            super();
            this.item = item;
            this.desc = desc;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:15:44.377

与其担心`View`为一项以不同方式显示而增加新的，为什么不在`layout`当前 XML 中定义另一项呢？

以我的应用程序中的一段实际代码为例，它显示了用户的 Facebook 新闻源（我已将其缩短并从中删除了不需要的代码）。用户可以在他/她的新闻源上拥有状态更新/照片或视频。因此，我没有创建多个布局 XML，而是将它们全部定义在一个 XML 中，然后在`adapter`.

XML 示例：

```
 <!-- STATUS | PHOTO -->

    <LinearLayout
        android:id="@+id/linlaStatusPhoto"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="2dp"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        .... OTHER ELEMENTS NEEDED

    </LinearLayout>

    <!-- VIDEO LAYOUT -->

    <LinearLayout
        android:id="@+id/linlaVideo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone" >

        .... OTHER ELEMENTS NEEDED

    </LinearLayout> 
```

现在在适配器中，我检查提要类型的条件并显示必要的布局，同时隐藏另一个。

```
if (feedType.equals("status") || feedType.equals("photo"))  {

    // SHOW THE NECESSARY LAYOUT CONTAINER
    holder.linlaStatusPhoto.setVisibility(View.VISIBLE);

    // HIDE THE OTHERS
    holder.linlaVideo.setVisibility(View.GONE);

  // I HAVE MORE CONDITIONS TO CHECK. HENCE THE else if().
} else if (feedType.equals("video")) {

    // SHOW THE NECESSARY LAYOUT CONTAINER
    holder.linlaVideo.setVisibility(View.VISIBLE);

    // HIDE THE OTHERS
    holder.linlaStatusPhoto.setVisibility(View.GONE);

} 
```

您可以轻松地调整此代码以适应您的方案。您将需要使用一些检查来确定`Widget`必须显示哪些内容。但即使你要给另一个充气也是如此`View`。如果它始终是列表中的第 7 项，您可以再添加一个参数来`front_menu_data[]`保存项目编号并使用它来触发上述示例。

更新：

从这里移动`if...else`代码块：

```
if (row == null) {
    LayoutInflater inflater = ((Activity)context).getLayoutInflater();
    row = inflater.inflate(layoutResourceId, parent, false);

    holder = new Front_menuHolder();
    holder.txtTitle1 = (TextView)row.findViewById(R.id.menu_item);
    holder.txtTitle2 = (TextView)row.findViewById(R.id.item_description);
    holder.header2 = (TextView)row.findViewById(R.id.tools_header);

    row.setTag(holder);

    // MOVE THIS BLOCK
    if (position != 6) {
        holder.txtTitle1.setVisibility(View.VISIBLE);
        holder.txtTitle2.setVisibility(View.VISIBLE);
        holder.header2.setVisibility(View.GONE);
    } else if (position == 6) {
        holder.header2.setVisibility(View.VISIBLE);
        holder.txtTitle1.setVisibility(View.GONE);
        holder.txtTitle2.setVisibility(View.GONE);
    }

} else {
    holder = (Front_menuHolder)row.getTag();
} 
```

至：

```
Front_menu front_menu = data[position];

if (position != 6) {
    holder.txtTitle1.setVisibility(View.VISIBLE);
    holder.txtTitle2.setVisibility(View.VISIBLE);
    holder.header2.setVisibility(View.GONE);

    holder.txtTitle1.setText(front_menu.item);
    holder.txtTitle2.setText(front_menu.desc);

} else if (position == 6) {
    holder.header2.setVisibility(View.VISIBLE);
    holder.txtTitle1.setVisibility(View.GONE);
    holder.txtTitle2.setVisibility(View.GONE);

    holder.txtTitle1.setText(front_menu.item);
    holder.txtTitle2.setText(front_menu.desc);
} 
```

# android - 调用 setVisibility(View.VISIBLE) 后未绘制 Android Listview 项

> ID：16138858
> 
> 赞同：3
> 
> 时间：2013-04-22T03:13:08.503
> 
> 标签：android, listview, android-listview

例如，我有一个列表视图，列表视图中的每一行的高度为 450dp，因此在大多数情况下，列表视图将同时呈现最多 3 个项目。

最初加载列表视图时，每一行只是一个带有“显示详细信息”按钮的图像（全部包含在相对布局中）当用户单击按钮时，它会隐藏当前具有图像和按钮的相对布局通过调用 setVisibility(View.GONE)，并通过调用 setVisibility(View.VISIBLE) 显示另一个视图 (LinearLayout)

请记住，相对布局和线性布局都位于在 Adapter.getView() 中膨胀的同一个 xml 中，我只是在可见性方面切换另一个。

问题是，在线性布局上调用 setVisibility(View.VISIBLE) 后，它不显示。它确实成功隐藏了相对布局，但没有出现线性布局。

**它仅在需要通过上下滚动列表视图**来呈现列表视图中的新项目之后出现。****

 **如何强制显示相对布局？通过强制重绘？我通过调用无效尝试过，它不起作用。

我也试过requestLayout，但同样没用。

我也尝试了 notifyDataSetChanged()，它没有用，我认为无论如何我都不应该调用它，因为适配器中的数据没有任何变化，我只是简单地隐藏并显示一个新视图。

请帮忙

编辑：基于butcode的帮助，但没有用

```
for(int i=start, j=list.getLastVisiblePosition();i<=j;i++) {
   if(list.getItemAtPosition(vh.position)==list.getItemAtPosition(i)){
       final View view = list.getChildAt(i-start);
       final int index = i;
       view.requestLayout();
       lv.invalidateChild(view, new Rect(view.getLeft(), view.getTop(), view.getRight(), view.getBottom()));
        runOnUiThread(new Runnable() {
             @Override
                 public void run(){
                     //lv.invalidateChild(view, new Rect(view.getLeft(),
                      //view.getTop(), view.getRight(), view.getBottom()));     
                     lv.requestChildRectangleOnScreen(view, new Rect(view.getLeft(), 
                           view.getTop(), view.getRight(), view.getBottom()), false);
                     view.requestLayout();
                     list.getAdapter().getView(index, view, list);
        } 
     });
     break; 
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:34:44.897

您应该像这样使用 requestChildRectangleOnScreen()。这是我的完整代码： 有点不同的情况是：我不会隐藏原始布局。但是显示/隐藏子布局效果很好。也许你可以参考一下。

```
 @Override
    public void onClick(final View v) {
        if (mResultView == null) {
            return;
        }

        View buttonLayout = mResultView.findViewById(R.id.call_button);
        if (buttonLayout == null) {
            return;
        }

        switch (buttonLayout.getVisibility()) {
            case View.GONE:
                for (View view : mVisibleCallButtons) {
                    view.setVisibility(View.GONE);
                }

                mVisibleCallButtons.clear();
                displayCallButton(buttonLayout, true);
                mVisiblePosition = mPosition;
                Handler handler = new Handler();
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        if (mListView != null && mResultView != null) {
                            mListView.requestChildRectangleOnScreen(mResultView, new Rect(0, 0,
                                    mResultView.getWidth(), mResultView.getHeight()), false);
                        }
                    }
                });
                break;
            case View.VISIBLE:
            default:
                displayCallButton(buttonLayout, false);
                mVisiblePosition = -1;
                break;
        }
    }
};

    private void displayCallButton(View btnLayout, boolean visible) {
    if (visible) {
        btnLayout.setVisibility(View.VISIBLE);
        mVisibleCallButtons.add(btnLayout);
    } else {
        btnLayout.setVisibility(View.GONE);
        mVisibleCallButtons.remove(btnLayout);
    }
} 
```

这是项目布局xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<LinearLayout
    android:nextFocusRight="@+id/secondary_action_button"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/actions_view_container"
        android:paddingBottom="@dimen/quickcontact_list_item_padding_bottom" >

        <TextView
            android:id="@android:id/text2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@android:id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>

</LinearLayout>

<LinearLayout
    android:id="@+id/call_button"
    android:layout_width="match_parent"
    android:layout_weight="1"
    android:visibility="gone" >

    <include layout="@layout/call_button" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:29:37.483

系统对listview的处理非常有效，当一个item看不到的时候，anthrod item会被显示，系统会重用旧的item instence。如果您将项目内容视图设置为 View.GONE，当您获取项目实例时，其内容视图的状态为 View.Gone yet，因此您必须手动将项目的内容更改为 View.VISIBLE**

# python - 通过 python 从 yahoo Finance api 获取特定日期范围的数据

> ID：16138860
> 
> 赞同：2
> 
> 时间：2013-04-22T03:13:23.097
> 
> 标签：python, yahoo-finance

我正在尝试通过此处描述的 Joe C 的方法从 Yahoo Finance API 获取数据： [Download history stock prices automatically from yahoo Finance in python](https://stackoverflow.com/questions/12433076/download-history-stock-prices-automatically-from-yahoo-finance-in-python/12510334#12510334)

但是，当我尝试传递有关日期的其他参数时，Yahoo Finance 似乎忽略了这些参数并返回从股票存在之初的价格列表。

有没有一种简单的方法可以获取特定日期范围的数据，还是我应该手动处理结果？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T00:28:02.097

要获取特定日期范围的数据，您需要修改 make_url，如下所示，

```
def make_url(ticker_symbol,start_date, end_date):
    print ticker_symbol
    a = start_date
    b = end_date
    dt_url = '%s&a=%d&b=%d&c=%d&d=%d&e=%d&f=%d&g=d&ignore=.csv'% (ticker_symbol, a.month-1, a.day, a.year, b.month-1, b.day,b.year)
    return base_url + dt_url 
```

要使用此功能，您需要执行以下操作，

```
import datetime
s = datetime.date(2012,1,1)
e = datetime.date(2013,1,1)
u =  make_url('csco',s,e) 
```

# android - 服务中的广播接收器：设计问题

> ID：16138866
> 
> 赞同：2
> 
> 时间：2013-04-22T03:13:54.910
> 
> 标签：android, service, broadcastreceiver, restart

我的应用程序需要监听广播事件（HEADSET 事件）并采取相应措施。我发现 HEADSET 事件不能通过 minifest 接收器使用，因为该事件启用了标志 FLAG_RECEIVER_REGISTERED_ONLY。因此，您只能在程序中动态注册此事件。由于我的应用程序在事件期间不会处于活动状态，因此我需要一个服务来处理此事件，我在 onCreate 中注册并在 onDestroy 中取消注册。到目前为止，一切都很好。我实现了服务并开始测试，我发现服务可以在资源紧缩的情况下被系统杀死，系统会自动重启服务。然而，令人惊讶的是，kill 和 restart 之间的延迟是完全随机的，并且可能是巨大的。有时是几秒钟，有时是几小时。所以，

我浏览了stackoverflow，有各种建议。有一个什么都不做的虚拟线程，这将增加服务的“重要性”，使用带有 startForeground 的服务 - 这会导致通知。所有这些看起来都是变通办法，并非万无一失。

有没有办法以万无一失的方式解决这个问题？处理“REGISTERED_ONLY”广播事件的替代解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T14:08:58.990

我做了很多试验和错误编程，并找到了解决方案。所以，我回答我自己的问题。

**服务重启时的 Android 行为：** 众所周知，Android 服务可以在资源紧张的情况下被系统强制停止。Android 会自动重启该服务。这是不可避免的，您需要对服务进行编程以优雅地处理这种情况。请注意，服务强制停止和重新启动之间存在延迟。这种延迟似乎是随机的，可能以数小时为单位。我发现这种延迟是有规律的。在第一次强制停止后，Android 会在 5000 毫秒（5 秒）内重新启动应用程序。此外，如果在第一次重启后 60 秒内再次强制停止服务（第二次），Android 会将下次重启的延迟更新 4 次（即 5000 x 4 = 20000ms = 20 秒）。20 秒后，Android 再次重启服务（第三次）。如果在 60 秒内再次强制停止服务（第三次），第三次重启后延迟更新为 4 次 20000 ms = 80000 ms = 80 秒，以此类推。因此，如果您的服务在自动重启后的 60 秒内被强制终止，则延迟会呈指数级增长（5 秒、20 秒、80 秒、320 秒、1280 秒……）。如果您的服务在 60 秒内没有再次被强制终止，则延迟计时器将重置为 5 秒以进行下一次强制停止并重新启动。在我看来，超过 20 秒的重启计时器是不合理的，如果您甚至不确定您的服务是否正在运行，程序员应该如何使用服务编写可靠的应用程序？如果您的服务在自动重启后的 60 秒内被强制终止，则延迟呈指数级增长（5 秒、20 秒、80 秒、320 秒、1280 秒……）。如果您的服务在 60 秒内没有再次被强制终止，则延迟计时器将重置为 5 秒以进行下一次强制停止并重新启动。在我看来，超过 20 秒的重启计时器是不合理的，如果您甚至不确定您的服务是否正在运行，程序员应该如何使用服务编写可靠的应用程序？如果您的服务在自动重启后的 60 秒内被强制终止，则延迟呈指数级增长（5 秒、20 秒、80 秒、320 秒、1280 秒……）。如果您的服务在 60 秒内没有再次被强制终止，则延迟计时器将重置为 5 秒以进行下一次强制停止并重新启动。在我看来，超过 20 秒的重启计时器是不合理的，如果您甚至不确定您的服务是否正在运行，程序员应该如何使用服务编写可靠的应用程序？

**已知的解决方案和变通方法：** 堆栈溢出中已经有几个答案，重点是如何确保您的服务一开始就不会被杀死。其中最重要的是让服务在前台启动。请参阅此处以了解如何执行此操作。这会在服务启动时引起通知。在前台启动服务可确保它几乎不会被杀死。还有其他建议的方法，例如从您的服务中生成一个连续运行的线程（该线程不必做任何事情）。这应该提高线程的“重要性”，并且服务不会经常被杀死。但是，我怀疑这可能会耗尽电池。

**我发现的新解决方案：** 我发现了另一种绕过此问题的方法，它不需要前台服务或电池耗尽线程。当意图为空时，您只需在 onStartCommand 的服务中调用 startService() （即，这是服务的系统重新启动，假设服务创建之前返回了 START_STICKY）。当您调用 startService() 时，重新启动计时器延迟始终重置为 5 秒。下面的示例

```
public class MyService extends Service {

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
    {
        if( null == intent )
        {
            Log.d( "MyServiceTag", "This is a System Restart");
            /* restart the service with startService().
             * This will ensure that the delay between system force-stop and restart  
             * is always 5 seconds
             */
            startService( new Intent( getBaseContext(), MyService.class));
        }

        return START_STICKY;
    }

    @Override
    public void onDestroy()
    {
        Log.d( "MyServiceTag", "In onDestroy");
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

如果您有一个更复杂的场景，您通过意图将参数传递给您的服务并且您正在使用 START_REDELIVER_INTENT，您可能需要使用“标志”来发现重新启动并在调用 startService 之前在您的意图中重新创建附加参数()。

为我工作。希望这可以帮助。

# javascript - 在 jQuery UI 工具提示中获取对悬停元素的引用

> ID：16138869
> 
> 赞同：3
> 
> 时间：2013-04-22T03:14:07.850
> 
> 标签：javascript, jquery, jquery-ui, firefox, jquery-ui-tooltip

基本上，我将一个`open`处理程序附加到我的 jQuery UI 工具提示，它对触发工具提示的元素执行一些检查。到目前为止我得到了什么：

```
$(document).tooltip({
  open: function(e, ui) {
    var el = e.toElement/* || e.relatedTarget*/;
    console.log(el.offsetWidth, el.scrollWidth);
    if (el.offsetWidth === el.scrollWidth) {
      ui.tooltip.hide();
    }
  }
}); 
```

上面的检查可以防止工具提示出现，除非元素水平溢出，这是流体布局的一部分。正如您在这个[**jsBin**](http://jsbin.com/uxilag/16/edit)中看到的那样，它在 Chrome 中运行良好。

但是，在 Firefox 中，`event.toElement`是`undefined`. 通过阅读围绕 SO 的主题，我认为这`event.relatedTarget`将是一个合适的替代品，但事实并非如此。在`event.toElement`引用当前悬停的项目时，`event.relatedTarget`in a`mouseover`引用了指点设备退出的元素，这是根据[W3C 规范](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MouseEvent-relatedTarget)的正确行为（类似于 Chrome 的`event.fromTarget`）。

我也尝试过[`event.target`](http://api.jquery.com/event.target/)，但是[`event.currentTarget`](http://api.jquery.com/event.currentTarget/)这些`this`引用指向`document`它是绑定了工具提示事件处理程序的节点。浏览[Tooltip API](http://api.jqueryui.com/tooltip/)页面也无济于事。

我不确定我是否忽略了一些非常基本的东西，或者我是否应该尝试更少的正统方法。

有没有办法从`open`在 Firefox 中工作的工具提示处理程序内部获取对触发元素的引用？或者是否有一些神奇的 jQuery UI 工具提示选项/方法可以以更简单/类似的方式实现这种期望的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T04:04:16.053

这是一个相当骇人听闻的解决方案，但这是我刚刚找到的临时修复。**编辑：**在完成了下面的第一个跨浏览器解决方案之后，它根本就不那么骇人听闻了。下面列出的**#1**、**#4**和**#2解决方案应该是可用的。**

jQuery Event 对象有一个 hidden`originalEvent`属性，在问题的情况下，它是一个对本机`mouseover`事件的引用。因此`event.originalEvent.target`可用于 Chrome 和 Firefox。

```
open: function(e, ui) {
  var el = e.originalEvent.target;
  if (el.offsetWidth === el.scrollWidth) {
    ui.tooltip.hide();
  }
} 
```

[**垃圾桶**](http://jsbin.com/uxilag/23/edit)

当涉及到旧的 IE 支持时，您将不得不使用[`event.srcElement`](http://help.dottoro.com/ljahrnvn.php)when [`event.target`](https://developer.mozilla.org/en-US/docs/DOM/event.target)is not present。

```
var el = e.originalEvent.target || e.originalEvent.srcElement; 
```

[**垃圾桶**](http://jsbin.com/uxilag/22/edit)

* * *

## #1 跨浏览器解决方案

最后，当触发工具提示的元素内有嵌套元素时，您必须使用[`.closest()`](http://api.jquery.com/closest/)传递与工具提示的委托选择器相同的过滤器的方法来对其进行猴子补丁（[`items`选项](http://api.jqueryui.com/tooltip/#option-items)，默认`[title]:not([disabled])`为 UI 1.10.2）：

```
var el = $(e.originalEvent.target || e.originalEvent.srcElement).closest($(this).tooltip('option', 'items'))[0]; 
```

[**垃圾桶**](http://jsbin.com/uxilag/25/edit)

这基本上是 Tooltip Widget 在内部执行的操作，如此[处所示](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.tooltip.js#L140-L143)。

* * *

## #2 替代的跨浏览器解决方案

通过使用简单的 DOM 查询不需要这么多变通方法的替代解决方案：

```
var el = $('[aria-describedby="'+ui.tooltip[0].id+'"]')[0]; 
```

[**垃圾桶**](http://jsbin.com/uxilag/28/edit)

* * *

#3 内部方法滥用

这不应该被使用，但是通过覆盖内部`_open`方法，您可以访问一个`target`jQuery 对象，该对象包含作为参数传递给它的事件的目标元素。问题是，您甚至无法访问它的`tooltip`小部件，`.tooltip('widget')`因为它是“未创建”的，尽管它已经存在于 DOM 中。您可以使用内部`_find`方法来解决它，该方法将通过 ID 执行[DOM 查询](https://github.com/jquery/jquery-ui/blob/e4a786e1a4fdd85b391711688bcb9790f38b5352/ui/jquery.ui.tooltip.js#L369-L372)，因此您可以`hide`在`show`动画开始后立即执行它，而它的生命周期不受影响 - 它会`mouseleave`像往常一样在那里并被删除，但会沿着这个`display:none`循环。

```
var bk_open = $.ui.tooltip.prototype._open;
$.ui.tooltip.prototype._open = function(event, target, content) {
  bk_open.apply(this, arguments);
  if (target[0].offsetWidth === target[0].scrollWidth) {
    this._find(target).hide();
  }
};

$(document).tooltip(); 
```

[**垃圾桶**](http://jsbin.com/uxilag/35/edit)

那个 DOM 查询`_find`是相当不必要的，所以我们也可以扩展内部`_tooltip`方法，它返回一个包含该元素的 jQuery 对象，这样我们就可以在我们的覆盖执行`tooltip`之前使用 JS 的词法范围来保存对工具提示元素的引用：`_open`

```
var tooltipproto = $.ui.tooltip.prototype,
    bk_open = tooltipproto._open,
    bk_tooltip = tooltipproto._tooltip,
    $tooltip;
tooltipproto._open = function(event, target, content) {
  bk_open.apply(this, arguments);
  if (target[0].offsetWidth === target[0].scrollWidth) {
    $tooltip.hide();
  }
};
tooltipproto._tooltip = function(element) {
  return ($tooltip = bk_tooltip.apply(this, arguments));
};
$(document).tooltip(); 
```

[**垃圾桶**](http://jsbin.com/uxilag/38/edit)

当然，由于`_tooltip`内部方法接收`target`as 参数并返回`tooltip`，因此可以仅覆盖此方法来执行整个操作，但是由于此方法返回后`tooltip`为`show`n ，因此这`setTimeout(fn, 0)`可能会导致不希望的闪烁效果。

对于如此简单的事情来说，这过于hackish、繁琐和冗长。

* * *

## #4 清洁解决方案

“干净”，即不使用未记录的方法、属性、原型覆盖或 DOM 查询。回到第一个片段，我们所需要的只是对触发工具提示的元素的引用。该元素由在处理程序之前调用`this`的函数内部引用，因此我们可以使用词法范围来存储该引用的上一级：`content``open`

```
var el;
$(document).tooltip({
  content: function() {
    el = this;
    return this.title;
  },
  open: function(e, ui) {
    if (el.offsetWidth === el.scrollWidth) {
      ui.tooltip.hide();
    }
  }
}); 
```

[**垃圾桶**](http://jsbin.com/uxilag/43/edit)

请注意，我`content`在上面的代码片段中的自定义函数删除了 jQuery 的[默认 HTML 标记剥离](https://github.com/jquery/jquery-ui/blob/e4a786e1a4fdd85b391711688bcb9790f38b5352/ui/jquery.ui.tooltip.js#L53)（因为我喜欢在工具提示中使用 HTML），但是如果您使用用户输入的数据动态填充标题属性，这可能是一个问题，所以以防万一您想保留原始`content`处理程序的功能：

```
var el,
    bk_content = $.ui.tooltip.prototype.options.content;
$(document).tooltip({
  content: function() {
    el = this;
    return bk_content.apply(this, arguments);
  },
  open: function(e, ui) {
    if (el.offsetWidth === el.scrollWidth) {
      ui.tooltip.hide();
    }
  }
}); 
```

[**垃圾桶**](http://jsbin.com/uxilag/44/edit)

* * *

我将在 jQuery UI bugtracker 上开一张票，要求同时实现此功能。这是它：

[工具提示：公开在打开/关闭处理程序中触发工具提示的元素](http://bugs.jqueryui.com/ticket/9239)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:20:08.453

只是为了完整起见：小部件包含属性`tooltips`，一个对象，其中包含所有打开的工具提示的 id 作为键和关联的目标元素作为值。

```
var widget = $(this).data("ui-tooltip");
var el = widget.tooltips[ui.tooltip[0].id][0]; 
```

它很干净，因为您可以直接引用元素，但也有点脏，因为它是一个可能会更改的实现细节。

也就是说，类似的东西`ui.target`确实很好。

# iphone - 使用/理解 JASidePanels 控件时遇到问题

> ID：16138870
> 
> 赞同：0
> 
> 时间：2013-04-22T03:14:21.557
> 
> 标签：iphone, ios, objective-c

我正在尝试在我的应用程序中实现类似 Facebook 的菜单，但我发现[了 JASidePanels](https://github.com/gotosleep/JASidePanels)。

按照 GitHub 页面上的说明操作，它运行良好，符合预期。我无法理解的是，当用户点击 LeftViewController 的单元格时，CenterViewController 将如何变化（当然，假设 LeftViewController 中有一个 UITableView）。

谁能解释这是怎么发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:48:37.520

变化发生在这里：

```
- (void)_changeCenterPanelTapped:(id)sender {
    self.sidePanelController.centerPanel = [[UINavigationController alloc] initWithRootViewController:[[JACenterViewController alloc] init]];
} 
```

所以在你的`UITableViewDelegate`，当：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

被调用，你需要用这个来处理它：

```
 self.sidePanelController.centerPanel = ...; 
```

# android - 在 android 中使用 phonegap 在 html5 中播放嵌入的 mp4 视频

> ID：16138871
> 
> 赞同：0
> 
> 时间：2013-04-22T03:14:22.197
> 
> 标签：android, cordova, html5-video

我正在尝试在我在 android 上运行的 html5 应用程序中播放嵌入式 mp4 视频。我经历了一些想法。

1.  插件 URL：[https](https://github.com/macdonst/VideoPlayer)
    ://github.com/macdonst/VideoPlayer 结果：视频播放器在 Android 环境中工作，但视频在单独的应用程序中播放
2.  插件 URL：[https](https://github.com/zencoder/video-js)
    ://github.com/zencoder/video-js 结果：视频播放器无法在 Android 中运行，但在 Web 浏览器中运行良好。

顺便说一句，我正在使用 phonegap 2.6.0。任何导致我的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T16:24:58.663

你可以使用插件[FileOpener](https://github.com/michalzubkowicz/FileOpener/tree/cordova-2.8.0)。它可以在 android 和浏览器中运行，我在使用 Phonegap 播放本地视频文件时遇到了很多问题，但我使用[FILE OPENER PLUGIN成功播放了本地视频文件](https://github.com/michalzubkowicz/FileOpener/tree/cordova-2.8.0)

# redis - 关闭 Redis

> ID：16138872
> 
> 赞同：6
> 
> 时间：2013-04-22T03:14:29.337
> 
> 标签：redis

我今天第一次在本地机器上启动了 Redis，然后在我关闭我的 Rails 应用程序后关闭了所有终端窗口。一个小时后，我再次启动 Rails 应用程序并执行以下操作以启动 redis 服务器

```
redis-server /usr/local/etc/redis.conf 
```

然而它告诉我

```
# Opening port 6379: bind: Address already in use 
```

因此，我认为即使我关闭了 Mac 上的终端窗口，它仍在运行其早期实例。

看着这个页面[http://redis.io/commands/shutdown](http://redis.io/commands/shutdown)，我试图运行

```
SHUTDOWN 
```

在终端窗口中，但我得到了这个响应

```
SHUTDOWN: NOT super-user 
```

因此我尝试了（即使我没有使用 sudo 来启动它）

```
sudo SHUTDOWN 
```

在它询问我的密码后，它输出了这个

```
usage: shutdown [-] [-h [-u] [-n] | -r [-n] | -s | -k] time [warning-message ...] 
```

但是当我随机运行时`shutdown -s`它说

```
 SHUTDOWN: NOT super-user 
```

关闭应用程序时关闭 Redis 的正确方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-09T17:57:32.487

使用内置的 redis 客户端：`redis-cli shutdown`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T03:18:11.980

这意味着作为命令发送到 redis，而不是在您的终端上执行。

在这种情况下，您实际上可以只`kill`从终端进行 redis，因为在收到`SIGTERM`信号后，它将安排 SHUTDOWN 而不是简单地退出。

有关参考[，请参阅信号处理文档页面。](http://redis.io/topics/signals)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-12T08:50:07.870

找出在您的机器上运行的 Redis 实例的进程 ID...

```
> ps aux | grep redis

impadmin 23277  0.0  0.0  35044  1976 pts/2    Sl+  14:19   0:00 src/redis-server 
```

...然后运行：

```
> kill 23277 
```

# c# - C# 是否有用于字典的 ContainsAny() 方法？

> ID：16138876
> 
> 赞同：5
> 
> 时间：2013-04-22T03:14:49.197
> 
> 标签：c#, linq, collections

我有一个字典，其中键是 Id，值是字符串

我现在有一个人员对象列表，其中每个人都有一个 CarIds 属性，它是

```
IEnumerable<int> 
```

我想基本上过滤对象列表以仅包含其中一个属性包含在字典中的项目。

例如。像这样的东西：

```
var dictionary = GetDict();

var people = GetPeople();

 people = people.Where(r => dictionary.ContainsAny(r.CarIds)).ToList(); 
```

是否存在这样的事情，我可以做类似于 ContainsKey() 但检查 ints 列表中的任何事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:19:14.973

是的，你可以试试这个列表：

```
people = people.Where(r => list.Intersect(r.CarIds).Count() != 0).ToList(); 
```

对于字典，您可以使用：

```
people = people.Where(r => r.CarIds.Any(n => dictionary.ContainsKey(n))).ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T03:27:44.010

你最好的选择可能是扩展 Dictionary （可能应该有一个`ContainsAny()`or `ContainsAnyKey()`）。

```
 public static bool ContainsAny<K, V>(
        this Dictionary<K, V> dict, IEnumerable<K> keys)
 {
     foreach(K key in keys)
         if(dict.ContainsKey(key)) return true;
     return false;
 } 
```

这可以 linq'd 为：

```
 public static bool ContainsAny<K, V>(
           this Dictionary<K, V> dict, IEnumerable<K> keys)
    {  return keys.Any(key => dict.ContainsKey(key));  } 
```

# php - Ajax 阻止我的表单提交

> ID：16138877
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:14:52.027
> 
> 标签：php, jquery, ajax

我已经创建了一个用于在酒店中列出促销活动的表格，并且我得到了 ajax 以通过入住和退房日期搜索促销活动。我的促销清单有一个预订提交按钮。

当我的页面加载时，我只是从数据库中检索带有一些随机日期的促销列表，并且我得到了供用户使用的搜索表单，用于通过使用 ajax 提交来过滤促销，但是当 ajax 触发时，预订按钮不提交。

请帮我。提前致谢

这是ajax代码：

```
$("#submitform").click(function(){
    $.ajax({
    data:$("#checkpromofrm").serialize(),
    url:'<?php echo '/'.APP_ROOT.'/promotion/checkpromotion'?>',
    type:"POST",
    success:function(respone){
    $('#hideform').html(respone);
    }
    });
    return false;
}); 
```

这是我的搜索表单：

```
<form name="frmrate" action="" id="checkpromofrm">
    Check-in
    <input type="text" id="popupDatepicker"  style="width:100px;" name="txtstartdate" value="<?php $currentdate = date('d-M-Y', strtotime('1 days'));
                    echo $currentdate;
                }
            ?>"/>

    Check-out:
    <input type="text" id="elapsed"  style="width:140px;text-align:left; border:none;padding-left:0px;"  value="<?php $currentdate = date('d-M-Y', strtotime('2 days'));
                    echo $currentdate;
                }
            ?>" readonly="readonly" name="EndDateCheckRate"/>
    <input type="submit" id="submitform" value=" Check"  name="" />
</form> 
```

这是我的促销清单：

```
<form action="<?php echo '/' . APP_ROOT . '/'; ?>promotion/<?php echo $newroom['h_id']?>/hotel" method="post">
    <tr id="songlist">
        <td width="100">
            <img src="<?php echo '/'.APP_ROOTAdmin.'/'.$newroom['r_picpath'];?>" align="left"  />   
        </td>
        <td >
            <p><span style="color:#1A7CBC;font-weight:bold;">
                <input type="hidden" name="r_cat" value="<?php echo $newroom['r_cat']; ?>"  />
                <input type="hidden" name="brf" value="<?php $newroom['brf'] ?>"  />
                <?php echo $newroom['r_cat'];?> Single</span>
                <font><b>
                    <i><br />
                        <?php if($newroom['brf']=='0')
      { echo "Breakfast not included"; }
      else { echo "Breakfast included";}?>
                    </i></b>
                </font>
            </p>
        </td>

        <td align="center" valign="middle">
            <input type="hidden" name="txthid" value="<?php echo $HoDetail['h_id']; ?>" />
            <input type="hidden" name="txtrid" value="<?php echo $newroom['r_id']?>" />
            <input type="submit" class="bookbutton red" value="Book now" onclick="return check(num);" /><br />
            Only <?php echo $newroom['s_room']?> rooms left
        </td> 
    </tr>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:10:29.767

您的成功回调函数指的是一个没有出现在您的屏幕上的元素（至少没有出现在提供的代码中。此外，您可能想要验证您使用 PHP 生成的 URL 实际上指向一个有效的 URL。

```
$("#submitform").click(function(){
  $.ajax({
    data:$("#checkpromofrm").serialize(),
    url:'<?php echo '/'.APP_ROOT.'/promotion/checkpromotion'?>',
    type:"POST",
    success:function(respone){
      $('#hideform').html(respone);  //<-- doesn't exist 
    }
  });
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:45:57.643

首先，您的 jquery 脚本必须在任何 php 文件中，因为您在其中使用 php 脚本。因此，如果您为此使用 .js 文件，它将不起作用。

现在，让我们简化并升级您的 jquery 脚本到 1.9.x 版本，

```
$(document).ready(function() {     
     $(document).on('click', '#submitform', function() {
          var data = $('#checkpromofrm').serialize();
          $.post ("<?php echo '/' . APP_ROOT . '/promotion/checkpromotion'; ?>", {data:data}, function(response) {
               // do something with response
          });

          return false;
     });
}) 
```

此处，php 脚本应在双引号内，而 php 代码应使用单引号。

**编辑**

让我们做一些测试，一个一个地使用它。

测试 1：jQuery 测试。页面加载时应弹出警报。

```
$(document).ready(function() {
     alert("jQuery Loaded Successfully.");
}) 
```

测试2：表单提交测试。单击时不应刷新页面`#submitform`。提交表单后，刷新页面（按`f5`）。在刷新弹出框时不应出现“想要重新提交”或类似的信息？

```
$(document).ready(function() {
     $(document).on('click', '#submitform', function() {
          return false;
     });
}) 
```

# matlab - 传递函数句柄

> ID：16138882
> 
> 赞同：0
> 
> 时间：2013-04-22T03:15:47.093
> 
> 标签：matlab

我正在尝试在 matlab 中解决以下问题。我有一个由 5 个参数和 4 个作为数据输入的变量定义的函数。我这样定义它：

`g = @(b)((b(4)*(b(2)*x(:,1) + b(3)*x(:,2) + 1)) + b(5)*x(:,3)*x(:,4).^b(1));`

然后，我想找到最小化此函数中的错误的参数值，我将其定义为：

`sum_res = @(b)(y-g)'*(y-g); [beta_opt,fval] = fminsearch(sum_res,[1,1]);`

我收到以下错误消息：

```
Undefined function 'minus' for input arguments of type 'function_handle'.

Error in @(b)(y-g)'*(y-g)

Error in fminsearch (line 191)
fv(:,1) = funfcn(x,varargin{:}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:58:37.953

错误消息是正确的；`g`是函数句柄，而不是值类型。因此，当您`y-g`在`sum_res`函数中执行减法运算时，将没有减法运算符会接受函数句柄作为操作数（您将如何减去函数句柄？）

看起来您只是忘记将参数传递`b`给`g`函数内的函数句柄`sum_res`（假设 b 确实是您想要的参数）

```
sum_res = @(b)(y-g(b))'*(y-g(b)); 
```

# javascript - 尝试创建 jquery mouseover 和 mouseout 事件

> ID：16138883
> 
> 赞同：0
> 
> 时间：2013-04-22T03:15:52.907
> 
> 标签：javascript, jquery, css, mouseevent, user-experience

我已经半成功地做到了这一点，但是我遇到了不一致和奇怪的行为，我有点难以修复......它在鼠标悬停和鼠标悬停事件上大约有一半的时间工作......不知道为什么并且最好 -如果有人至少可以为我指明正确的解决方向，那就满了。

**HTML：**

```
<div class="container">
    <div id="content">
        <header id="effect-me">
            <h1>sheikhart.com</h1>
        </header>
        <div class="row">
            <div class="shan-half">
                <div class="circle"><p>Shan</p></div>
            </div>
            <div class="lindsay-half">
                <div class="circle"><p>Lindsay</p></div>
            </div>
        </div>
    </div>
</div> 
```

**CSS：**

```
/* #444 looks better than black: twitter.com/H_FJ/statuses/11800719859 */
body, select, input, textarea { 
    color:#444;
}

/* www.aestheticallyloyal.com/public/optimize-legibility/ */
h1,h2,h3,h4,h5,h6 {
    font-weight: bold;
    text-rendering: optimizeLegibility;
}

/* maxvoltar.com/archive/-webkit-font-smoothing */
html {
    -webkit-font-smoothing: antialiased;
    background: url(images/index-bg.png) repeat-y center top;
    background-color: #111111;
}

html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    display: table
}

sub {
    vertical-align: sub;
    font-size: smaller;
}

sup { vertical-align: super;
    font-size: smaller;
}

/* align checkboxes, radios, text inputs with their label
   by: Thierry Koblentz tjkdesign.com/ez-css/css/base.css  */
input[type="radio"] {
    vertical-align: text-bottom;
}

input[type="checkbox"] {
    vertical-align: bottom;
    *vertical-align: baseline;
}

.ie6 input { 
    vertical-align: text-bottom;
}

/* hand cursor on clickable input elements */
label, 
input[type=button], 
input[type=submit], 
button {
    cursor: pointer;
}

/* These selection declarations have to be separate.
   No text-shadow: twitter.com/miketaylr/status/12228805301
   Also: hot pink. */
::-moz-selection {
    background: #fb8a00;
    color:#fff;
    text-shadow: none;
}

::selection {
    background:#fb8a00;
    color:#fff;
    text-shadow: none;
}

/*  j.mp/webkit-tap-highlight-color */
a:link { 
    -webkit-tap-highlight-color: #FF5E99;
}

/* always force a scrollbar in non-IE */
html {
    overflow-y: scroll;
}

/* make buttons play nice in IE:
   www.viget.com/inspire/styling-the-button-element-in-internet-explorer/ */
button {
    width: auto;
    overflow: visible;
}

/* bicubic resizing for non-native sized IMG:
   code.flickr.com/blog/2008/11/12/on-ui-quality-the-little-things-client-side-image-resizing/ */
.ie7 img {
    -ms-interpolation-mode: bicubic;
}

/*******************************
 * Non-semantic helper classes *
 *******************************/

/* for image replacement */
.ir {
    display:block;
    text-indent:-999em;
    overflow:hidden;
    background-repeat: no-repeat;
}

/* Hide for both screenreaders and browsers
   css-discuss.incutio.com/wiki/Screenreader_Visibility */
.hidden {
    display:none;
    visibility:hidden;
}

/* Hide only visually, but have it available for screenreaders
   www.webaim.org/techniques/css/invisiblecontent/
   Solution from: j.mp/visuallyhidden - Thanks Jonathan Neal! */
.visuallyhidden {
    position:absolute !important;
    clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
    clip: rect(1px, 1px, 1px, 1px);
}

/* Hide visually and from screenreaders, but maintain layout */
.invisible {
    visibility: hidden;
}

/* >> The Magnificent CLEARFIX << */
.clearfix:after {
    content: "."; 
    display: block; 
    height: 0; 
    clear: both; 
    visibility: hidden;
}

.clearfix { 
    display: inline-block; 
}

* html .clearfix {
    height: 1%;
} /* Hides from IE-mac \*/

.clearfix {
    display: block;
}

/* Fontface */

@font-face {
    font-family: 'abeatbykairegular';
    src: url('fonts/abeatbykairegular-webfont.eot');
    src: url('fonts/abeatbykairegular-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/abeatbykairegular-webfont.woff') format('woff'),
         url('fonts/abeatbykairegular-webfont.ttf') format('truetype'),
         url('fonts/abeatbykairegular-webfont.svg#abeatbykairegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

/*  Primary Styles
 *  Author: Resonance Design (Richard Bakos)
 *  Web: http://www.resonance-design.net
 */

body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
}

hr {
    max-width: 1200px;
    margin: 1em auto;
    border-bottom: 0;
    border-top: 1px solid rgba(191, 191, 191, 0.5);
}

header {
    width: 300px;
    background: #111;
    border: 1px solid #FFF;
    border-radius: 10px;
    margin: auto;
    text-align: center;
}

header h1 {
    width: auto;
}

.effected-1 {
    border-color: #FF7700;
    -moz-transition: all 1s;
    -webkit-transition: all 1s;
    -o-transition: all 1s;
    transition:width all 1s;
}

.effected-2 {
    border-color: #FFFFFF;
    -moz-transition: all 1s;
    -webkit-transition: all 1s;
    -o-transition: all 1s;
    transition:width all 1s;
}

.container {
    width: 100%;
    max-width: 1200px !important;
    display: table-cell;
    vertical-align: middle;
    margin: auto;
}

#content {
    width: 100%;
    max-width: 1200px !important;
    margin: auto;
}

.row {
    width: 100%;
}

.shan-half {
    width: 50%;
    float: left;
    vertical-align: middle;
}

.lindsay-half {
    width: 50%;
    float: right;
    vertical-align: middle;
}

.circle {
    border-radius: 50%;
    background: #fff;
    width: 200px;
    height: 200px;
    margin: auto;
    font-size: 20px;
    text-align: center;
    color: #111;
    -moz-transition: all 1s;
    -webkit-transition: all 1s;
    -o-transition: all 1s;
    transition:width all 1s;
}

.circle:hover {
    background: #FF7700;
    cursor: pointer;
    color: #FFF;
    -moz-transform:rotate(360deg);
    -webkit-transform:rotate(360deg);
    -o-transform:rotate(360deg);
    transform:rotate(360deg);
}

.circle p {
    padding-top: 90px;
} 
```

**JS：**

```
$('.circle').mouseover(function() {
    $('#effect-me').toggleClass('effected-1');
});
$('.circle').mouseout(function() {
    $('#effect-me').toggleClass('effected-2');
}); 
```

请查看小提琴：http: [//jsfiddle.net/resonancedesign/Fgemx/](http://jsfiddle.net/resonancedesign/Fgemx/)

正如您从查看小提琴中看到的那样，我正在尝试根据不同元素的 mouseover 和 mouseout 事件向元素添加和删除一个类......

如果有更优雅的方式来做到这一点，或者我在自己的努力中错过了一些简单的例子，我很乐意...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:49:31.443

通过切换，您有时会同时添加两个类。

尝试这个：

```
$('.circle').mouseover(function() {
    $('#effect-me').attr('class', 'effected-1');
});
$('.circle').mouseout(function() {
    $('#effect-me').attr('class', 'effected-2');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:15:43.567

代码的一些解释。

首先，您需要一个要添加过渡的元素（在您的情况下，它将是#effect-me）。现在，这只是告诉浏览器当元素的样式发生变化时该做什么。它本身不会进行任何转换。

```
#effect-me {
    border: 1px solid #fff;
    -moz-transition: border 1s ease-out;
    -webkit-transition: border 1s ease-out;
    -o-transition: border 1s ease-out;
    transition: border 1s ease-out;
} 
```

接下来，您需要为元素添加一种新样式，以便它可以从原始样式过渡到新样式。

```
#effect-me.on { border: 1px solid #f70 } 
```

现在您已经准备好元素，您只需要添加在悬停时添加新样式所需的 javascript

```
$('.circle').hover(
    function(){
        $('#effect-me').addClass('on');
    },
    function(){
        $('#effect-me').removeClass('on');
    }
); 
```

一切就绪[http://jsfiddle.net/CqDNf/](http://jsfiddle.net/CqDNf/)

# java - NullPointerException 错误：我该如何解决这个问题？

> ID：16138884
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:16:49.837
> 
> 标签：java, nullpointerexception

我正在尝试通过 Java 图形程序制作四个井字游戏板的简单图像。我的程序编译可以运行，但不产生四个板的图像。我在交互窗格中收到此错误（我使用 DrJava 进行编码）：

```
Welcome to DrJava.  Working directory is C:\Users\Daniel\Desktop\CS Programs
> run TicTacToeBoards
java.lang.NullPointerException
    at TicTacToeBoards.drawTicTacToeBoard(TicTacToeBoards.java:38)
    at TicTacToeBoards.<init>(TicTacToeBoards.java:18)
    at TicTacToeBoards.main(TicTacToeBoards.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

这是我试图运行的程序：

```
import java.awt.Color;

public class TicTacToeBoards {

  private NsccWindow win;

  public TicTacToeBoards() {

    NsccWindow win;
    win = new NsccWindow(10, 10, 330, 300);
    win.setTitle("Tic-Tac-Toe Boards");
    drawTicTacToeBoard(40, 40);
    drawTicTacToeBoard(40, 170);
    drawTicTacToeBoard(170, 40);
    drawTicTacToeBoard(170, 170);

  }  

  public void drawTicTacToeBoard(int x, int y) {

    NsccLine vertLineL;
    NsccLine vertLineR;
    NsccLine horizLineU;
    NsccLine horizLineD;

    vertLineL = new NsccLine((x + 30), y, (x + 30), (y + 90));
    vertLineR = new NsccLine((x + 60), y, (x + 60), (y + 90));
    horizLineU = new NsccLine(x, (y + 30), (x + 90), (y + 30));
    horizLineD = new NsccLine(x, (y + 60), (x + 90), (y + 30));

    win.add(vertLineL);
    win.add(vertLineR);
    win.add(horizLineU);
    win.add(horizLineD);

    win.repaint();

  }

  public static void main(String[] args) {
    TicTacToeBoards test = new
    TicTacToeBoards();
  }
} 
```

我对 Java 编程相当陌生，我一直坚持试图通过在 DrJava 中调试来查找错误，但无济于事。有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T03:19:15.540

从构造函数中删除这一行：

```
NsccWindow win; 
```

您已经有了`win`字段，因此也无需在构造函数中声明它。

当您在构造函数中声明它时，您会隐藏实例字段并实例化仅限于构造函数范围的变量。所以当你尝试访问里面的实例字段时`drawTicTacToeBoard`，它实际上是`null`。

# gtk - GDK/GTK 可以识别同时按下的两个键吗？

> ID：16138887
> 
> 赞同：1
> 
> 时间：2013-04-22T03:17:04.147
> 
> 标签：gtk, gdk

所以我正在努力开发一个平台风格的游戏，用 C 语言编写并使用 GTK 作为我的图形工具包。现在我有一个程序可以在屏幕上放置三个块。其中两个是平台，第三个可以通过按左/右箭头键横向移动。（我还没有绘制任何精灵，所以现在我的游戏的英雄是一个蓝色矩形）。我还实现了按“z”键跳跃，你可以在平台上跳跃和降落。

然而，在跳跃时横向移动是相当困难的。我相信这是因为我的程序无法识别同时按下的两个键，因此您必须释放左箭头或右箭头，按 z，然后释放 z 并再次按右箭头或左箭头以在空中横向移动。我希望能够按住左或右并同时按 z 让英雄横向跳跃。

[GDK 参考手册](https://developer.gnome.org/gdk/stable/gdk-Event-Structures.html#GdkEventKey)为您提供 GDK 密钥代码列表的“gdk/gdkkeysyms.h”（在我的系统上位于 /usr/include/gtk-3.0/gdk/gdkkeysyms.h），但没有给出任何同时使用两个键的指导。GTK/GDK 能否识别同时按下两个键的事件（GDK、GTK，无论哪一个，我都不清楚两者之间的界限在哪里，但我想这是另一个问题的主题......）？你会如何应用它？（对于单个键，您可以通过执行类似的操作来获取代码

```
key = event->keyval; 
```

但我真的不知道这对于两个键会是什么样子）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:10:46.267

键盘不是这样工作的：每个键都会产生一个单独的中断，这将产生一个单独的窗口系统事件，所以你必须自己保持状态。

一些键实际上是特殊的，并且充当其他键的修饰符：Control、Shift、Alt，是修饰符，因此被区别对待——即如果它们被按下，它们的状态将与实际键分开记录到事件数据结构中被压。尽管如此，它们也会产生单独的关键事件。

您可以简单地记录按键，并稍后检查状态是否保持，例如：

```
static gboolean is_a_pressed = FALSE;
static gboolean is_b_pressed = FALSE;

static gboolean on_key_press (GtkWidget *w, GdkEvent *e)
{
  /* acquire key A */
  if (e->key.symbol == GDK_KEY_a)
    is_a_pressed = TRUE;

  /* acquire key B */
  if (e->key.symbol == GDK_KEY_b)
    is_b_pressed = TRUE;

  /* both keys have been pressed */
  if (is_a_pressed && is_b_pressed)
    do_something_amazing ();

  /* let the event propagate further */
  return GDK_EVENT_PROPAGATE;
}

static gboolean on_key_release (GtkWidget *w, GdkEvent *e)
{
  /* release key A */
  if (e->key.symbol == GDK_KEY_a)
    is_a_pressed = FALSE;

  /* release key B */
  if (e->key.symbol == GDK_KEY_b)
    is_b_pressed = FALSE;

  return GDK_EVENT_PROPAGATE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:40:15.307

有两种情况需要注意。

一些特殊键称为修饰键，它们会导致设置修饰位，`event->state`因此您可以进行检查`if (event->state & GDK_CONTROL_MASK)`。

只有少数常见的修饰符以这种方式设置标志。对于其他键，您需要自己跟踪单独的按下和释放事件，这将允许您确定当另一个键到达时是否仍然按下一个键。小部件信号是按键事件和按键释放事件。

可能还有其他因素给您带来麻烦，一个好的方法是创建一个小的单文件独立可编译测试用例来显示问题。您可能仅通过制作测试用例就可以解决，但如果没有，测试用例将帮助其他人帮助您。（因为他们可以使用它来重现问题。）

# java - 是什么让最新版本的 JVM 更快？

> ID：16138888
> 
> 赞同：16
> 
> 时间：2013-04-22T03:17:17.610
> 
> 标签：java, performance, scala, jvm, native-code

我最近看到了多个关于 Java（和基于 JVM 的语言，如 Scala）如何在性能上与 C/C++ 代码相媲美的说法。

例如，来自[ScalaLab 项目](https://github.com/sterglee/scalalab)的描述：

> 基于 Scala 的脚本编写速度，接近原生和优化的 Java 代码的速度，因此接近甚至优于基于 C/C++ 的科学代码！

有人可以指出这些 JVM 优化是什么的摘要吗？是否有任何真正的基准支持这种说法或提供一些现实世界的比较？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T03:40:32.980

## 表演技巧

首先，这取决于您*所*谈论的 JVM，因为有多个 - 但我假设您的意思是 Oracle HotSpot（无论如何，其他顶级 JVM 将使用类似的技术）。

对于那个 JVM， HotSpot 内部 wiki 中的[这个列表](https://wiki.openjdk.java.net/display/HotSpot/PerformanceTechniques)提供了一个很好的开始（子页面详细介绍了一些更有趣的技术）。如果您只是在寻找技巧的洗衣清单，那么 wiki[也有](https://wiki.openjdk.java.net/display/HotSpot/PerformanceTacticIndex)，尽管要理解它们，您可能必须在谷歌上搜索各个术语。

并非所有这些都是最近实现的，但一些大的已经实现（范围检查省略、转义分析、超词优化）——至少对于“最近”的松散定义。

接下来，让我们看一下 C/C++ 与 Java 的相对性能图，以及为什么上述技术有助于缩小差距，或者在某些情况下实际上使 Java 和固有的优势优于原生编译语言。

## Java 与 C/C++

在高层次上，优化是您在任何像 C 和 C++ 等本地语言的体面编译器中看到的东西的混合，以及减少 Java/JVM 特定功能和安全检查的影响所需的东西，例如作为：

*   逃逸分析，可以（在某种程度上）减轻对象的无堆栈分配
*   内联缓存和类层次结构分析，可缓解“每个功能都是虚拟的”
*   范围检查消除，这减轻了“每个数组访问都经过范围检查”

许多这些 JVM 特定* 优化仅有助于使 JVM 与本机语言相提并论，因为它们正在解决本机语言不必处理的障碍。然而，一些优化是静态编译语言无法管理的（或者在某些情况下只能通过配置文件引导的优化来管理，这种情况很少见，而且无论如何都必须是一刀切的）：

*   仅动态内联最热门的代码
*   基于实际分支/开关频率的代码生成
*   动态生成 CPU/指令集感知代码（甚至在代码编译后发布的 CPU 功能！）¹
*   删除从未执行的代码
*   注入与应用程序代码交错的预取指令
*   安全指向支持的整个技术系列

共识似乎是，Java 生成的代码通常在速度上与中等优化级别的优秀 C++ 编译器相似，例如 gcc -O2，尽管很大程度上取决于确切的基准。像 HotSpot 这样的现代 JVM 往往在低级数组遍历和数学方面表现出色（只要竞争的编译器没有向量化 - 这很难被击败），或者在竞争代码执行相似数量分配时具有大量对象分配的场景中（JVM 对象分配 + GC 通常比 malloc 快），但是当典型的 Java 应用程序的内存损失是一个因素时，堆栈分配被大量使用，或者向量化编译器或内在函数向本机代码倾斜时，就会下降。

如果您搜索 Java 与 C 的性能，您会发现很多人都解决了这个问题，他们的严谨程度各不相同。这是[我偶然发现的第一个](http://blog.cfelde.com/2010/06/c-vs-java-performance/)，它似乎显示了 gcc 和 HotSpot 之间的粗略联系（即使在这种情况下为 -O3 ）。[如果您想了解单个基准如何在每种语言中经历多次迭代、相互跨越，这篇文章](http://www.azulsystems.com/blog/cliff/2009-09-06-java-vs-c-performanceagain)和相关讨论可能是一个更好的开始 - 并展示了双方优化的一些限制。

*并不是真正的 JVM 特定的——大多数也适用于其他*安全*或托管语言，如 CLR

* * *

^(1随着新指令集（尤其是 SIMD 指令，但还有)[其他](https://en.wikipedia.org/wiki/Bit_Manipulation_Instruction_Sets)指令）以某种频率发布，这种特殊的优化变得越来越重要。*自动向量化可以大大*加快一些代码的速度，虽然 Java 在这方面的速度已经很慢，但它们至少在[赶上](https://stackoverflow.com/questions/10784951/do-any-jvms-jit-compilers-generate-code-that-uses-vectorized-floating-point-ins)一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-22T03:38:07.803

当然，实际性能取决于基准，并因应用程序而异。但是很容易看出 JIT VM 是如何与静态编译的代码一样快的，至少在理论上是这样。

JIT 代码的主要优势在于它可以基于仅在运行时才知道的信息进行优化。在 C 中，当您链接到 DLL 时，您必须每次都调用该函数。在动态语言中，即使是在运行时加载的函数，也可以内联函数，这要归功于即时编译。

另一个例子是基于运行时值进行优化。在 C/C++ 中，您使用预处理器宏来禁用断言，如果您想更改此选项，则必须重新编译。在 Java 中，断言是通过设置一个私有布尔字段然后在代码中放置一个 if 分支来处理的。但是由于 VM 可以根据标志的值编译包含或不包含断言代码的代码版本，因此对性能的影响很小或没有。

另一个主要的 VM 创新是多态内联。Idomatic Java 非常关注像 getter 和 setter 这样的小型包装方法。为了获得良好的性能，内联它们显然是必要的。VM 不仅可以在实际仅调用一种类型的常见情况下内联多态函数，还可以内联调用多种不同类型的代码，方法是在适当的代码中包含内联缓存。如果代码开始在许多不同的类型上运行，VM 可以检测到这一点并回退到较慢的虚拟调度。

静态编译器当然不能做这一切。强大的静态分析只能让您走这么远。这也不仅限于 Java，尽管它是最明显的例子。用于 Javascript 的 Google 的 V8 vm 也非常快。Pypy 旨在为 Python 和 Rubinius 为 Ruby 做同样的事情，但它们并不完全在那里（当你有一个大公司支持你时，它会有所帮助）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T07:54:42.793

我要补充一点，热点、jrockit 和 IBM 的 JVM 都在 GC 中执行堆压缩。由于这个原因，我最近将一些繁重的数学代码移植到了 Scala。如果您打算运行任何大型应用程序，我强烈推荐 Java。在部署到服务器或向上扩展时，您可能会后悔使用 CLR，尤其是在内存密集型的情况下。

此外，对于本机代码，JVM 配置选项也非常出色。

# c# - 如何在不损失质量的情况下将 jpeg 转换为字节数组

> ID：16138890
> 
> 赞同：3
> 
> 时间：2013-04-22T03:17:30.357
> 
> 标签：c#, asp.net

我在这里做的是使用 ftp 将图像文件从终端复制到我的服务器。但是当我检查服务器中的图片时，它突然变得质量很差。

我开始认为这可能是因为我从图像转换为字节数组。任何人都可以帮忙吗？

这是我的代码..

```
Stream stream = FileUploadPic.FileContent;

System.Drawing.Image i = new Bitmap(stream);

var abort = new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback);

var thumbnail = i.GetThumbnailImage(300, 300, abort, IntPtr.Zero);

byte[] bytes = imageToByteArray(thumbnail);

FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(path);

request.Method = WebRequestMethods.Ftp.UploadFile;

request.Credentials = new NetworkCredential(username, password);
request.UsePassive = true;
request.UseBinary = true;
request.KeepAlive = false;
request.ContentLength = bytes.Length;
Stream req_Stream = request.GetRequestStream();
req_Stream.Write(bytes, 0, bytes.Length);
req_Stream.Close();

FtpWebResponse response = (FtpWebResponse)request.GetResponse(); 
```

这是`imageToByteArray`功能：

```
public byte[] imageToByteArray(System.Drawing.Image imageIn) { 
    MemoryStream ms = new MemoryStream(); 
    imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif); 
    return ms.ToArray(); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:20:33.787

质量的损失来自使用`GetThumbnailImage`. 它仅用于[文档中描述的](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)相当特定的场景。

[这个答案描述](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality/87786#87786)了如何在 c# 中对图像输出的质量和特性进行更精细的控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T06:00:43.597

`System.Drawing.Imaging.ImageFormat.Gif`是你的问题。GIF 是一种相当古老的格式，仅限于 256 种颜色。

如果您想避免重新压缩 Jpeg，我建议您尝试`ImageFormat.Png`，这是一种更现代的格式，并且仍然无损。

# linux - Linux 中的 TeeChart 库替代品是什么？

> ID：16138892
> 
> 赞同：3
> 
> 时间：2013-04-22T03:17:36.083
> 
> 标签：linux, teechart

我发现 TeeChart 库非常适合基于 C/C++/Java/Delphi 中的数学/物理模拟公式创建 2D 图表。我的朋友在 Microsoft Visual Studio 和 Delphi IDE 中使用了 TeeChart，他们成功地创建了 Haar Wavelet 模拟并将其模拟绘制在**动画**2D 图表中。他们都使用Windows。我使用 Linux。

Linux 中的 TeeChart 替代品是什么？用于将程序绘制成动画图表并精确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:45:10.500

有 5 个 TeeChart 版本可用于 linux：PHP、Java、JavaScript、.Net 和 VCL/FMX：

1.  我们已经成功运行 TeeChart for **PHP ，你可以**[在这里](http://www.teechart.net/support/viewtopic.php?f=11&t=10501)找到一个例子

2.  **Java**版本是另一个应该在Linux下工作的跨平台版本，我建议看看这个[链接](http://www.teechart.net/support/viewtopic.php?f=10&t=10235&p=42636&hilit=linux#p42636)

3.  您可以使用应该在 Linux 下正常工作的**JavaScript 。**

4.  TeeChart **.NET**也可以在 Mono 下的 linux 上运行。您需要它的 SourceCode 版本并使用`MONO` [预处理器符号](http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.80%29.aspx)构建源代码。

5.  TeeChart **VCL/FMX**也适用于带有 CrossVCL/FMXLinux 的 linux。为此，您需要 SourceCode 版本。

我希望它有所帮助。

谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T18:51:54.477

我不知道它是否等同于 TeeChart，因为它具有 TeeChart 的所有功能，但许多 Linux 用户喜欢在 Windows 和 Linux 上运行的 GNUplot。它有自己的脚本语言，但我相信现在有它的 API？谷歌搜索“C++ 和 gnuplot”之类的东西。免费。我只将它用于非常简单的折线图，因此我无法谈论它的功能，但请查看 GNUplot 站点上的一些示例图。

Python 有一个用于访问 GNUplot 的库。由于 Python 在 Linux 和 Win 上运行，因此这对组合构成了一个跨平台的解决方案。

还有适用于 Linux 的 MatPlotLib (sp?)。

# javascript - javascript游戏中的表单错误

> ID：16138893
> 
> 赞同：0
> 
> 时间：2013-04-22T03:17:41.803
> 
> 标签：javascript, forms

好的，所以我正在用 javascript 开发这个小型 RPG 游戏，我正在使用下拉菜单来显示库存。基本上它遍历库存数组并且项目的数量大于一个，它将它添加到库存表格中。唯一的问题是，当一个项目的数量为 0 时（它不应该出现在库存表单中），如果项目的数量超过 0，它只会显示一个空白区域。我该如何制作它所以它只显示数量超过0的项目？感谢您提供任何帮助，并根据需要提供更多代码。

```
function page_inventory(){
    document.getElementById('everything').innerHTML = '<span id="inv"><select name="stuff" id="current"></select><button onclick="equip_wep()">Equip</button></span>';

    for (i=0;i<you.inv.length;i++) {
        if (you.inv[i].quantity>0) {
            current.options[0] =new Option(you.inv[i].name+" X"+ you.inv[i].quantity,i);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:16:49.977

尝试

```
function page_inventory(){
    document.getElementById('everything').innerHTML = '<span id="inv"><select name="stuff" id="current"></select><button onclick="equip_wep()">Equip</button></span>';

    for (i=0;i < current.options.length; i++) {
        current.options[i] = null;
    }

    for (i=0; i < you.inv.length; i++) {
        if (you.inv[i].quantity>0) {
            current.options[i] =new Option(you.inv[i].name+" X"+ you.inv[i].quantity,i);
        }
    }

} 
```

# plugins - wp收藏夹获取用户最喜欢的帖子问题

> ID：16138894
> 
> 赞同：0
> 
> 时间：2013-04-22T03:17:43.760
> 
> 标签：plugins, wordpress, buddypress

我试图获得用户最喜欢的帖子，但我似乎没有使用 buddypress 工作，并且我在每个个人资料中建立用户有他们最喜欢的框，他们喜欢的任何文章并将其设置为他们的最爱，它将显示在他们的个人资料中所以基本上我试图让它工作，但它不工作。

我去访问我的个人资料，它显示得很好，但我访问了别人的，我的显示它没有显示他最喜欢的帖子，只是我的，就像它只循环我的一样，但我使用另一个用户登录，它发生了同样的问题他最喜欢的帖子显示在我的个人资料和他的个人资料中，顺便说一句，我使用 wp 收藏夹插件。

所以这就是我试图做的事情，但它在我的个人资料中显示得很好，但是一旦我访问其他个人资料，它就会显示完全相同的东西，它不会显示他们最喜欢的帖子而不是我的帖子

这是我试图做的工作[http://pastie.org/7697956](http://pastie.org/7697956)

`

```
<div class="profile-box items-following">

    <h3><?php _e('fav posts', 'bd_lang'); ?></h3>

    <div class="profile-content">

        <?php $favorite_post_ids = wpfp_get_users_favorites(user_id);
        if($favorite_post_ids) { ?>

                <?php foreach ($favorite_post_ids as $o) : $p = get_post($o); if ($p->post_status == 'publish') { ?>    

                    <div class="profile-item">

                        <!--Begin Image-->
                        <?php if(has_post_thumbnail($o)) { ?>                   
                            <div class="post-thumbnail">
                                <a href="<?php get_permalink($o); ?>" title="<?php echo $p->post_title; ?>">
                                    <?php $image = bd_resize(get_post_thumbnail_id($o), '', 50, 0, true); ?>
                                    <img src="<?php echo $image[url]; ?>" width="<?php echo $image[width]; ?>" height="<?php echo $image[height]; ?>" alt="<?php if(get_post_meta(get_post_thumbnail_id($o), '_wp_attachment_image_alt', true)) { echo get_post_meta(get_post_thumbnail_id($o), '_wp_attachment_image_alt', true); } else { echo $p->post_title; } ?>" />       
                                </a>                
                            </div>                  
                        <?php } ?>
                        <!--End Image-->

                        <a href="<?php echo get_permalink($o); ?>" title="<?php echo $p->post_title; ?>"><?php echo $p->post_title; ?></a>

                    </div>

                <?php } endforeach; ?>

        <?php } else { ?>

            <div class="profile-item">
                <strong><?php _e('No posts have been added yet.', 'bd_lang'); ?></strong>
            </div>

        <?php } ?>

    </div>

</div> ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:59:22.717

Try:

```
wpfp_get_users_favorites( bp_displayed_user_id() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:15:16.970

该`$user_id`变量应包含所查询用户的 ID。看看这个关于如何从全球获取作者信息的[答案。](https://stackoverflow.com/a/16122901/1981996)`$wp_query`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:45:45.023

我也在使用这个插件，但主要是将我自己的收藏夹列为缩略图。我只在“foreach”语句中收到错误，但除此之外它还有效。

我不知道它是否会帮助你，但无论如何，这里是：

```
<?php $curauth = (isset($_GET['author_name'])) ? get_user_by('slug', $author_name) : get_userdata(intval($author)); ?>

<?php $user_favs = wpfp_get_users_favorites($curauth->display_name); ?>
<ul>

<?php  
foreach ($user_favs as $user_fav)
  {
echo "<a href='".get_permalink($user_fav)."' title='". get_the_title($user_fav) ."'>" . get_the_post_thumbnail( $user_fav, array(335,335) ) . "</a>";
  } ; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T13:02:03.433

如果要获取当前作者页面的ID，而不是当前查看作者页面的用户的ID，可以使用以下方法：

```
 $curauth = (get_query_var('author_name')) ? get_user_by('slug', get_query_var('author_name')) : get_userdata(get_query_var('author')); 
```

这将创建一个对象，您可以使用它来获得您想要的东西。

例如，curauth->ID 保存该作者的 ID。

为此，您需要将此代码和任何相关代码放在 author.php 模板文件中。我假设你已经这样做了。

PS这一切都在Wordpress Codex中有很好的描述。

# java - 在一个类中构建对象并在另一个类中访问它们

> ID：16138898
> 
> 赞同：1
> 
> 时间：2013-04-22T03:18:17.150
> 
> 标签：java, object

我正在创建一个选择你自己的冒险“游戏”作为小组项目的一部分。我的想法是创建一个 StoryRoom 类型的对象，它将存储诸如对该 StoryRoom 的描述、其他 StoryRoom 连接到它的信息等信息。我还希望有一个类来创建一个冒险，这将是 StoryRoom 的数组. 这个想法是主程序将在 StoryRoom 中循环，显示文本并在做出决定时返回一个值，该值将作为下一个 StoryRoom 的参考，直到玩家到达结束场景。

我遇到的问题是我无法通过 AdventureTeller 类访问在 AdventureBuilder 类中创建的 StoryRooms。AdventureTeller 是游戏的驱动程序类。Eclipse 抛出 entryway 无法解析为变量的错误。我怎样才能解决这个问题？

```
public class StoryRoom {
    public String[] description = null;
    public int[] exits;

    public StoryRoom(String[] builddescriptions, int[] buildexits){
        description = new String[builddescriptions.length];
        exits = new int[buildexits.length];
        for (int i = 0; i< builddescriptions.length; i++){
            description[i] = builddescriptions[i];
        }
        for (int i = 0; i< buildexits.length; i++){
            exits[i] = buildexits[i];
        }

    }

    public String GetDescription(int reference){
        return description[reference];
    }

    public int GetExit(int reference){
        return exits[reference];
    }

}

public class AdventureTeller {

    public static void main(String[] args) {
        AdventureBuilder.main();
        for (int i = 0; i < entryway.description.length; i++)
        {
            System.out.println(entryway.GetDescription(i));
        }

    }

}

public class AdventureBuilder {

    public static void main() {
        // StoryRoom[] book = new StoryRoom[20];
        String[] description = null;
        description = new String[3];
        int[] exits;
        exits = new int[3];

        description[0] = "This is a strange room with 2 doors, one on the left and one on the right.";
        description[1] = "Take the left door? (enter 1)";
        description[2] = "Take the right door? (enter 2)";
        exits[0] = 1; // current room number
        exits[1] = 2;
        exits[2] = 3;
        StoryRoom entryway = new StoryRoom(description, exits);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T03:23:57.537

在您发布的代码中，`entryway`它不是实例变量，而是方法变量——它的范围仅限于您的`AdventureBuilder.main()`方法。如果您希望它在类之外和该方法之外可访问，请将其设置为实例变量（或返回它，然后调用方法可以使用它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:36:59.200

仅更改 AdventureBuilder 是不够的。您还需要更改 AdventureTeller。以下两个类的新版本（针对 Java 1.6 进行了测试）：

```
public class AdventureBuilder
{
    private StoryRoom entryway;

    // Avoid naming a method 'main' unless it's the main method of your main class
    // Try something like 'initAdventureBuilder()' instead
    public void main()
    {
        // StoryRoom[] book = new StoryRoom[20];
        String[] description = null;
        description = new String[3];
        int[] exits;
        exits = new int[3];

        description[0] = "This is a strange room with 2 doors, one on the left and one on the right.";
        description[1] = "Take the left door? (enter 1)";
        description[2] = "Take the right door? (enter 2)";

        exits[0] = 1; // current room number
        exits[1] = 2;
        exits[2] = 3;

        entryway = new StoryRoom(description, exits);
    }

    // A way for AdventureBuilder to be questioned about its entryway field

    public StoryRoom getStoryRoom()
    {
        return entryway;
    }
}

public class AdventureTeller
{
    public static void main(String[] args)
    {
        // Creating a copy of AdventureBuilder that AdventureTeller knows about
        AdventureBuilder ab = new AdventureBuilder();
        StoryRoom entryway;

        // Asking AdventureBuilder to run itself 
        ab.main();

        // Asking AdventureBuilder for a reference to the entryway which it created
        // when you asked AdventureBuilder to run itself

        entryway = ab.getStoryRoom();

        for (int i = 0; i < entryway.description.length; i++)
        {
            System.out.println(entryway.GetDescription(i));
        }
    }
} 
```

除了启动程序的方法之外，您可能希望避免将`main`其用作任何方法的方法名称。尝试使用类似`initAdventureBuilder()`或类似的描述性方法名称，以避免混淆。当我第一次查看您的代码时，由于您的命名约定，我认为 AdventureBuilder 是主类，但实际上并非如此。

为了让您知道发生了什么，当您尝试编译时，编译器抱怨不知道 AdventureTeller 中的 entryway 字段指的是什么。即使您已经注释掉那行代码只是为了让它编译，AdventureTeller 仍然不知道 AdventureBuilder 里面有什么字段，除非您明确告诉 AdventureTeller 里面有什么。更糟糕的是，您从未在 AdventureTeller 中创建 AdventureBuilder 的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T03:28:49.440

只需根据 Catherine 的建议修复您的代码，它应该是这样的。

```
...

public class AdventureBuilder {

    StoryRoom entryway;

    public static void main() {
        // StoryRoom[] book = new StoryRoom[20];
        String[] description = null;
        description = new String[3];
        int[] exits;
        exits = new int[3];

        description[0] = "This is a strange room with 2 doors, one on the left and one on the right.";
        description[1] = "Take the left door? (enter 1)";
        description[2] = "Take the right door? (enter 2)";
        exits[0] = 1; // current room number
        exits[1] = 2;
        exits[2] = 3;
        entryway = new StoryRoom(description, exits);
    }
} 
```

# javascript - 通过javascript中的函数传递数组变量

> ID：16138904
> 
> 赞同：0
> 
> 时间：2013-04-22T03:18:46.200
> 
> 标签：javascript, jquery, api, google-maps-api-3, jsonp

我正在使用 Google Maps API 和 Instagram API 在地图上显示流行的图像标记。一旦用户选择了一个，我希望在该位置拍摄的图像的缩略图显示在信息气泡中。我让这两个 API 分别工作得很好，但我不知道如何让它们一起工作。我知道我必须面对范围问题才能从 $.(each) 循环中取出变量，但我不知道如何在不使用 return 语句停止每个“循环”的情况下这样做。而且，一旦我返回它，它就不再是一个数组了，不是吗？这是我的Javascript：

```
// get instagram info

function requestJSON(urlToRequest) {
        var headElement = document.getElementsByTagName("head")[0];         
        var newScriptTag = document.createElement('script');
        newScriptTag.setAttribute('type','text/javascript');
        newScriptTag.setAttribute('src',urlToRequest);
        headElement.appendChild(newScriptTag);
}

function callThis(responseData) {
    console.log(responseData);
    $.each( responseData.data, function( i, data ) {
        //console.log(item);
        var image = data.images.thumbnail.url;
        var location = data.location;
        if (location) {
            $( "<img/>" ).attr( "src", image ).appendTo( "#showPics" );
            // decimal will need to be rounded to .000000
            var lat = data.location.latitude;
            var lon = data.location.longitude;
            console.log(lat);
            console.log(lon);
        }
        else {
            return;
        }
            });
}

$(document).ready(function() {
    $('p a').on('click',function(e) {
        e.preventDefault();
        requestJSON('https://api.instagram.com/v1/media/popular?client_id=MYCLIENTID&callback=callThis');
    });
});

// get the map info

function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(20, 0),
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);

    //hardcoded map info that I want to be an array of locations i.e. lat and long
    var locations = [
          ['Somewhere a picture was taken',  33.86857, -117.8778],

    ];

    var infowindow = new google.maps.InfoWindow();
    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });
      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:42:25.207

可能只有一个数组并在`window.locationsArray = []`之前将其声明为全局（或可能是普通对象的数组） ，在迭代完成后`$.each`填充它`$.each`，开始绘制`locationsArray`GMap 上包含的点，例如 -

```
$.each(locationsArray, function(index, value) {

                          var aLatLong = *--*Have the Lat+Longitude*--*;
                          var aContent = "";
                          map_canvas.gmap('addMarker', { 
                          'position':aLatLong  
                           }).click(function() {
                           map_canvas.gmap('openInfoWindow', { content :'<p style="color:black;">'+value[2]+'</p><p style="color:black;"><b>'+'Views: '+aContent+'</b></p>'  }, this);
                                    });

                                     }); 
```

# actionscript-3 - 使用 fileReference.Save 自动保存到 xml，而不会出现另存为对话框

> ID：16138905
> 
> 赞同：0
> 
> 时间：2013-04-22T03:18:47.213
> 
> 标签：actionscript-3, flash-cs6

我正在尝试将从我的应用程序中收集的数据保存到它随附的名为`data.xml`. 我正在使用该`fileReference.save`方法，但它似乎并没有完成这项工作：

```
function parseXML(xmlData:XML):void
{
    trace("Parsing:");
    trace("-----------------");
    var itemIndex:uint = event.currentTarget.index;
    delete data.item[itemIndex];
    fileReference.save(data, "data.xml");
    trace(xmlData);
} 
```

不幸的是，这会导致弹出一个“另存为”对话框，询问用户他们希望将 xml 文件保存在哪里（当我真正想要发生的是项目目录中的 data.xml 文件被自动覆盖时用户有任何发言权）。

我听说这`FileStream`是要走的路（尤其是我要在 Air for iOS 上部署它），但我不知道如何实现它。

有任何想法吗？

**编辑：**我已经用下面的建议更新了我的问题，但它仍然不起作用。该`data.xml`文件位于我的桌面上名为“RecipeMatcher2”的同一目录中，即/Desktop/RecipeMatcher2/（我使用的是Mac OS X），但我也希望它解析为文件在iPhone上存储的任何路径。

```
function parseXML(xmlData:XML):void
{
    trace("Parsing:");
    trace("-----------------");
    var itemIndex:uint = event.currentTarget.index;
    file = File.applicationStorageDirectory;
    file = file.resolvePath("data.xml");
    delete data.item[itemIndex];
    var writeStream:FileStream = new FileStream();
    writeStream.open(file, FileMode.WRITE);
    writeStream.writeUTFBytes(data.toXMLString());
    writeStream.close();
    trace('xml file saved');
} 
```

我最初像这样加载我的 xml 数据：

```
loader = new URLLoader();
// listens to see if data has fully loaded//
loader.addEventListener(Event.COMPLETE, dataLoaded);
//loads local xml file with URLrequest method//
loader.load(new URLRequest("data.xml")); 
```

这是我与这个问题相关的公共变量：

```
public var loader:URLLoader;
public var file:File;
public var data:XML;
public var items:XMLList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:13:21.407

该`FileReference`课程对于网络浏览器是安全的，因为它不会让您在未经他同意的情况下弄乱用户文件。

但是，当您使用 AIR 时，您可以使用`File`扩展`FileReference`.
查看[此链接](https://stackoverflow.com/questions/16122172/filereference-vs-file/16123731#16123731)以了解它们之间的区别。

以下是使用`FileStream`该类的方法：

```
var file:File = new File().resolvePath("myFile.txt");

var stream:FileStream = new FileStream();
stream.open(file, FileMode.WRITE);
stream.writeUTF("Hello world!");
stream.close(); 
```

您可以在此处阅读有关[FileStream 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)的更多信息。

* * *

**编辑**：查看您当前编辑的问题，我建议您使用`File`/加载 xml 数据`FileReference`，如下所示：

```
private var file:File = new File();

private function loadFile():void 
{
    file.addEventListener(Event.COMPLETE, onFileComplete);
    file.resolvePath("data.xml"); // Or whatever your file is located
    file.load();
}

private function saveFile():void 
{
    var writeStream:FileStream = new FileStream();
    /*
     * FileMode.WRITE will truncate (empty) the file on open.
     * FileMode.APPEND will open the file "as is" and write in the end of it.
     */
    writeStream.open(file, FileMode.WRITE);
    writeStream.writeBytes(data); // Any other write method can be used
    writeStream.close();
}

private function onFileComplete(event:Event):void 
{
    var xml:XML = XML(file.data); // Your XML is here!
    parseXML(xml); // Do your stuff here
} 
```

如您所见，一旦我们在文件系统中获得对文件的引用，我们就可以自由地从/向它读取/写入数据。

# r - 如何在列表中重复一个变量？

> ID：16138910
> 
> 赞同：1
> 
> 时间：2013-04-22T03:20:06.243
> 
> 标签：r

我有一个语义标签/语义标签类别字段，以及一个源、日期和 ID 变量。我想将语义标签字段分解为相应的标签/标签类别，然后转置数据集。我已经完成了大部分代码，但我仍然坚持让 ID/Date/Source 变量列出我从标签类别/标签创建的矩阵。我以（制表符分隔）开头的数据示例如下：

```
ID  Source  Date  Semantic Tags
1 thestate  2013-01-18  Person:elizabeth colbert-busch, Organization:congress
2 abcnews4  2013-04-03  PoliticalEvent:congressional race, Person:colbert busch, topicname:politics
3 Politics  2013-04-02  Person:mark sanford, Person:elizabeth colbert busch, Person:colbert busch, Organization:republican party 
```

我希望数据看起来像数据库格式（也是制表符分隔的）：

```
ID  Source  Date  Tag Type  Tag
1 thestate  2013-01-18  Person  elizabeth colbert-busch
1 thestate  2013-01-18  Organization  congress
2 abcnews 2013-04-03  Political event congressional race
2 abcnews 2013-04-04  Person  colbert-busch
2 abcnews 2013-04-05  topicname politics
3 Politics  2013-04-02  person  mark sanford
3 Politics  2013-04-03  person  elizabeth colbert-busch
3 Politics  2013-04-04  organization  republican party 
```

我在分离标签类型和标签时没有问题（thnx @Tyler Rinker 寻求帮助......），但是当我坚持让 ID、Source 和 Date 变量按列表重复标签类型/标签时我创建的矩阵。任何人都可以帮忙吗？我的代码如下：

```
et3 <- lapply(strsplit(as.character(et$Semantic.Tags), ","), function(x) gsub("^//s+|//s+$", "", x)) # break out semantic tags/tag type by comma

et3 <- lapply(et3, strsplit, ":(?!/)", perl=TRUE) # break on colon 
```

我尝试复制其他三个变量的以下代码行是我遇到问题的地方：

```
Date <- rep(et$Date, seq_along(et3), sapply(et3, length))

ID <- rep(et$ID, seq_along(et3), sapply(et3, length)) # Note that if I don't use "et$ID", the IDs replicate without issue... 
```

...对于变量 Source 也是如此。我收到的警告消息是：`In rep(et$Date, seq_along(et3), sapply(et3, length)): first element used of 'length.out' argument.`并且只有第一个值出现在输出中。如果我首先将 et3 列表绑定为矩阵，则会发生同样的问题。任何人都可以帮助在矩阵/列表中重复变量吗？我也尝试过使用转置命令，但我不知道如何处理我变成列表的标签。

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:12:14.443

```
# 1\. create a matrix containing the expanded information for each row
#
et3 <- lapply(et3, function(x) {xx <- do.call(rbind, x)
  colnames(xx) <- c('tag','value')
  xx})
 # 2\. cycle through each row and recombine

 do.call(rbind, lapply(seq_len(nrow(edt)), 
    function(x) cbind(edt[x, 1:3, drop = FALSE], et3[[x]]))) 
```

* * *

数据表方法

```
# an alternative is to use data.table
library(data.table)
EDT <- data.table(edt)
# string processing
EDT[, sc := lapply(strsplit(as.character(Semantic.Tags), ","), function(x) gsub("^//s+|//s+$", "", x)) ]
 EDT[, et3 := lapply(et3, strsplit, ":(?!/)", perl=TRUE)]

# rapply and by to create data.table  
EDT[, list(tag = rapply(et3, classes = 'character', function(x)x[1]), 
           value = rapply(et3, classes = 'character', function(x)x[2])), 
      by = list(ID, Source,Date)]

   ID   Source       Date            tag                   value
1:  1 thestate 2013-01-18         Person elizabeth colbert-busch
2:  1 thestate 2013-01-18   Organization                congress
3:  2 abcnews4 2013-04-03 PoliticalEvent      congressional race
4:  2 abcnews4 2013-04-03         Person           colbert busch
5:  2 abcnews4 2013-04-03      topicname                politics
6:  3 Politics 2013-04-02         Person            mark sanford
7:  3 Politics 2013-04-02         Person elizabeth colbert busch
8:  3 Politics 2013-04-02         Person           colbert busch
9:  3 Politics 2013-04-02   Organization        republican party 
```

# io - 如何使用 Scheme 中的读取功能？我知道它在语法上是如何工作的，但控制台不允许我输入值

> ID：16138914
> 
> 赞同：2
> 
> 时间：2013-04-22T03:20:51.320
> 
> 标签：io, scheme, interpreter

我想我对 Scheme 如何处理用户输入感到困惑。我只想从控制台读取用户在脚本运行时输入的一些值。例如，如果我想将用户的值添加到 3，我的印象是我可以使用：

```
(+ 3 (read)) 
```

我还可以将它包含在显示函数中以查看输出。这是我所期望的，但是当我尝试这样做时，它只等待控制台中的下一个代码。我正在尝试 biwascheme.org 和 ideone.com 作为口译员。

因此，我希望找到强制控制台等待用户输入然后将其放入（读取）位置的非常基本的方法。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:40:52.503

您需要使用实际支持从标准输入读取的运行时。大多数基于 Web 的运行时可能不支持这一点（尽管 Ideone 似乎允许您提前指定标准输入内容（不是交互方式），请参见[示例](http://ideone.com/S7Zjgr)）。

您应该安装[Racket](http://www.racket-lang.org/)。DrRacket 程序实际上会在`read`调用时给你一个很好的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-23T11:32:06.663

我发现[repl.it 的 biwascheme 在线编程环境](https://repl.it/languages/scheme)确实支持使用该函数读取用户输入`(read)`，尽管它似乎没有记录在[biwascheme 参考中](http://www.biwascheme.org/doc/reference.html)。

例如，在 repl.it 上的 Scheme repl 中，在左侧键入：

```
(define (user-says-y)
  (eq? (read) 'y))

(define (take-user-input)
  (if (user-says-y)
      (print "entered y!")
      (print "did not enter y!"))) 
```

保存，运行，然后从右侧的终端调用该函数：

```
> (take-user-input) 
```

如果您输入`y`，您将看到该`entered y!`消息，如果您输入，`n`您将看到该`did not enter y!`消息。

魔法。

# c# - C# 将 SQL 查询转换为 LINQ

> ID：16138916
> 
> 赞同：2
> 
> 时间：2013-04-22T03:20:59.400
> 
> 标签：c#, sql, linq

我有我认为是复杂的 SQL 查询，我需要将其转换为 LINQ 查询。但是，我只是 LINQ 的初学者，不知道如何让它工作。我试过搜索互联网，但仍然无法正常工作。

这是我的 SQL 查询：

```
SELECT
    a.empid,
    CAST(IF(COUNT(*)  > 10,FLOOR(COUNT(*) / 10),1) AS CHAR(100)) lim,
    CAST(GROUP_CONCAT(internalid) AS CHAR) internalIDS
FROM tblLogs a
INNER JOIN
    (
        SELECT 
            DISTINCT empid 
        FROM tblLogs
        WHERE IsDeleted = 0 AND DateAdded = 2013-04-18
    ) b ON  a.empid = b.empid
WHERE IsDeleted = 0 AND Remarks NOT LIKE '%proxy date used%' AND DateAdded = 2013-04-18 AND RecType = 8
GROUP BY empid; 
```

你好。这是我更新的 linq 查询，但它返回错误 Linq to Entities 无法识别方法 string.join。这有什么问题？谢谢。:)

```
var rows = from rec in context.tblWMSLogs join rec1
                        in context.tblWMSLogs.Where(t => t.DateAdded == refDate2 && t.IsDeleted == 0)
                        on rec.EmpID equals rec1.EmpID
                    where rec.DateAdded == refDate2 && rec.IsDeleted == 0 && !rec.Remarks.Contains("proxy date used") && rec.RecType == recType
                    group rec by rec.EmpID into g
                    select new WMSRandomViewModel
                    {
                        EmpID = g.Key,
                        Lim = (g.Count() > 10 ? Math.Ceiling(g.Count() / 10d) : 1),
                        InternalIDs = string.Join(",", g.OrderBy(s => s.InternalID).Select(s => s.InternalID))
                    };//string.Join(",", g.OrderBy(s => s.InternalID).Select(s => s.InternalID))
            //return rows.ToList();
            return rows.ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:56:10.870

这是你想要的吗？

```
var rows =
        from rec in context.tblLogs.AsEnumerable()
        join rec1 
            in context.Where(t => t.DateAdded == refDate && t.IsDeleted == 0)
            on rec.EmpID equals rec1.EmpID
        where rec.DateAdded == refDate && rec.IsDeleted == 0 && !rec.Remarks.Contains("proxy date used") && rec.RecType == recType
        group rec by rec.EmpID into g
        select new
        {
            g.Key,
            lim = (g.Count() > 10 ? Math.Floor(g.Count() / 10d) : 1).ToString(),
            InternalIDS = string.Join("", g.OrderBy(s => s.InternalId).Select(s => s.InternalId))
        }; 
```

现在，我的问题，

为什么你的 sql 中有一个内部连接？内连接中的where子句是否可以移动到主查询的where子句中

# java - 更改权限时，现有文件大小为零

> ID：16138918
> 
> 赞同：0
> 
> 时间：2013-04-22T03:21:15.230
> 
> 标签：java, file-io, permissions, java-io

我很难更改现有文件的权限。我想要做的是，编组 xml 并将其写入文件。因为应用程序在“root”帐户下运行，所以该文件归 root 所有。我想更改此文件的权限，以便其他用户可以 SFTP 此文件。

这是我的第一个代码：

```
 File file = new File(Constant.fileName);
         context = JAXBContext.newInstance(RateGroups.class);
         Marshaller marshaller = context.createMarshaller();
         marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
         marshaller.setProperty("jaxb.formatted.output",Boolean.TRUE);
         marshaller.marshal(rateGroups, file);
         marshaller.marshal(rateGroups,System.out); 
```

如果我运行上面的代码，文件写入成功，但我不能使用其他帐户进行 SFTP（权限被拒绝）。然后我添加此代码来更改文件的权限：

```
 file.setWritable(true,false);
         file.setExecutable(true,false);
         file.setReadable(true,false); 
```

权限已更改，但文件大小也变为零 (0)。请告诉我如何更改它的权限或者如果可能的话更改所有者？谢谢你。

* * *

**更新 1**

编写文件后，我调用我的 sftp 类：

```
 SFTPFile sftpFile = new SFTPFile();
        error = sftpFile.execute(Constant.rateGroupxml); 
```

这是 SFTPFile 类中的代码：

```
 public int execute(String fileName){
    JSch jsch = new JSch();
    Session session = null;
    int result = 0;
    String localPath = Constant.path + "/report/" + fileName;
    //try {

    try {
        session = jsch.getSession(Constant.user1, Constant.IP1, 22);
        session.setConfig("StrictHostKeyChecking", "no");
        session.setPassword(Constant.pass1);
        session.connect();

        System.out.println("session: " + session.getUserName());
        Channel channel = session.openChannel("sftp");
        channel.connect();
        ChannelSftp sftpChannel = (ChannelSftp) channel;
        sftpChannel.cd(Constant.pathDestination);
        sftpChannel.put(localPath);
        sftpChannel.exit();
        session.disconnect();
        result = 0;
    } catch (SftpException ex) {
        Logger.getLogger(SFTPFile.class.getName()).log(Level.SEVERE, null, ex);
        result = 1;
    } catch (JSchException ex) {
        Logger.getLogger(SFTPFile.class.getName()).log(Level.SEVERE, null, ex);
        result = 2;
    }
    return result; 
```

# javascript - Socket.io 不将数据从客户端发送到服务器

> ID：16138919
> 
> 赞同：2
> 
> 时间：2013-04-22T03:21:30.630
> 
> 标签：javascript, node.js, websocket, socket.io

我似乎在使用 socket.io 从客户端到服务器的通信时遇到问题。

首先，我发送的 JSON 对象

```
loginInfo = { email: 'username', password: 'password' } 
```

在客户端，我有：

```
socket.emit('user:login', loginInfo); 
```

然后在服务器端我有

```
socket.on('user:login', function(loginInfo) {
    console.log('data being sent is:\n' + loginInfo);
}); 
```

这会在控制台中打印出来：

```
data being sent is:
function ack() {
    self.log.debug('sending data ack packet');
    socket.packet({
        type: 'ack'
      , args: util.toArray(arguments)
      , ackId: packet.id
    });
} 
```

同样，如果我这样做

```
socket.on('user:login', function(loginInfo) {
    console.log('data being sent is:\n' + loginInfo.password);
}); 
```

控制台打印出：

```
data being sent is:
undefined 
```

我过去使用过socket.io，之前从未遇到过这个问题，所以我一定在做一些奇怪的事情。如果有人知道此问题的原因，我将非常感谢您提供有关如何解决此问题的见解。

编辑：问题与打印出来的内容无关，我只是用它来说明我的问题，即客户端未正确发送 loginInfo JSON 或服务器未正确接收。我的目标是让服务器接收到 loginInfo，以便我可以处理数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T00:38:39.690

尝试使数组成为对象的属性...无论出于何种原因对我有用；

```
messageIds = [1,2,3,4,5,6]; 
```

这不起作用：

```
socket.emit('updateMessage',JSON.stringify(messageIds)); 
```

这确实有效：

```
 socket.emit('updateMessage',{1:messageIds}); 
```

奇怪的错误，不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:49:37.300

您是否有可能`loginInfo`在客户端调用了一个函数？我相信该`socket.emit('user:login', loginInfo);`行发送的是函数而不是参数。作为参数的函数`socket.emit`用于获取确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:46:44.347

您需要对对象进行字符串化以将其附加到字符串中，否则行为将不可预测：

```
console.log('data being sent is:\n' + JSON.stringify(loginInfo)); 
```

# php - PHP & MySQL - 无法让 INSERT INTO 正常工作

> ID：16138926
> 
> 赞同：1
> 
> 时间：2013-04-22T03:22:14.423
> 
> 标签：php, mysql, insert

我已经尝试了一个多小时才能将其正确插入到我的数据库中。即使查询与工作完全一样，我也无法终生解决这个问题。

页面上没有抛出错误，但它没有将数据插入数据库。

PHP 代码（变量正确发布到页面）：

```
<?php
error_reporting(E_ALL);
//start session
session_start();

//include database connection
include('../db_connect.php');

//import info
$client = $_POST['client'];
$name = $_POST['name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$address1 = $_POST['address1'];
$address2 = $_POST['address2'];
$address3 = $_POST['address3'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$country = $_POST['country'];
$vehicle = $_POST['vehicle'];
$msrp = $_POST['msrp'];
$saleprice = $_POST['saleprice'];
$date = date("Y-m-d H:i:s");
$status = "Pending";
$notes = "Test notes are great!";

$sql = "INSERT INTO sales (salePrice, saleDate, saleStatus, saleNotes, saleName, saleCompany, salePhone, saleEmail, saleAddress1, saleAddress2, saleAddress3, saleCity, saleState, saleZipcode, saleCountry, clientFK) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

if ($stmt = $mysqli->prepare($sql)) {

/* Bind our params */
$stmt->bind_param('dssssssssssssssi', $saleprice , $date , $status , $notes , $name , $company , $phone , $email , $address1 , $address2 , $address3 , $city , $state , $zip , $country , $client);

/* Execute the prepared Statement */
$stmt->execute();

/* Echo results */
echo "Inserted user information into database.\n";

/* Close the statement */
$stmt->close();
}else{
    /* Error */
printf("Prepared Statement Error: %s\n", $mysqli->error);
}
?> 
```

这是我的数据库中该表的布局：

```
CREATE TABLE IF NOT EXISTS `sales` (
  `idsale` int(11) NOT NULL AUTO_INCREMENT,
  `salePrice` double NOT NULL,
  `saleDate` datetime NOT NULL,
  `saleStatus` varchar(50) NOT NULL,
  `saleNotes` varchar(100) DEFAULT NULL,
  `saleName` varchar(70) DEFAULT NULL,
  `saleCompany` varchar(50) DEFAULT NULL,
  `salePhone` varchar(20) DEFAULT NULL,
  `saleEmail` varchar(255) DEFAULT NULL,
  `saleAddress1` varchar(35) DEFAULT NULL,
  `saleAddress2` varchar(35) DEFAULT NULL,
  `saleAddress3` varchar(35) DEFAULT NULL,
  `saleCity` varchar(20) DEFAULT NULL,
  `saleState` varchar(50) DEFAULT NULL,
  `saleZipcode` varchar(15) DEFAULT NULL,
  `saleCountry` varchar(50) DEFAULT NULL,
  `createdBy` varchar(30) DEFAULT NULL,
  `createdDate` datetime DEFAULT NULL,
  `modifiedBy` varchar(30) DEFAULT NULL,
  `modifiedDate` datetime DEFAULT NULL,
  `clientFK` int(11) NOT NULL,
  PRIMARY KEY (`idsale`),
  KEY `clientFK_INDEX` (`clientFK`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ; 
```

任何帮助将不胜感激！提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:36:27.013

您的查询未正确绑定变量，因为您在查询中传递了 16 个占位符并在绑定函数中传递了 17 个值。

```
(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  //16 values...

$stmt->bind_param('dssssssssssssssi', $saleprice , $date , $status , $notes , $name , $company , $phone , $email , $address1 , $address2 , $address3 , $city , $state , $zip , $country , $client); //17 variables 
```

因此，您的查询会引发错误。在 php.ini 中启用错误以查看错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:23:01.607

这现在看起来真的很愚蠢，但它指出：

```
//include database connection
include('../db_connect.php'); 
```

直到我将其更改为：

```
//include database connection
include('db_connect.php'); 
```

这是最奇怪的事情 ../ 如何使一切变得不同。谢谢大家的帮助。

# jquery - jquery 聚焦并选择输入：文本

> ID：16138929
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:22:35.283
> 
> 标签：jquery, html

我有一个`textbox`文件名（例如`Mydata.doc`）之类的数据。我想从文本框中选择文本，但我不想选择所有文本。我只想选择`Mydata`exclude extension `.doc`。有没有办法得到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:30:01.127

您可以使用`lastIndexOf()`.

```
var val = MyData.value;

// base name
var name = val.substr(0, val.lastIndexOf('.')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:27:24.493

常见的做法：

1.  将 mydata.doc 之类的文件名作为字符串获取
2.  找到最后一个“。”的索引。
3.  从最后一个“。”的索引中删除字符。
4.  您将获得不带扩展名的文件名

希望它可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:16:28.247

正如我测试的那样，我发现我们从 html 的输入文件中得到的是一个磁盘路径，例如“c:\one.jpg”。所以我在下面更新了我的答案：

常见的做法：

1.  获取像 G:\mydata.doc 这样的文件名作为字符串
2.  找到最后一个“。”的索引。指数
3.  查找最后一个 '\' eIndex 的索引
4.  从 sIndex+1 获取字符到 eIndex
5.  您将获得不带扩展名的文件名

![我的测试，它确实有帮助](https://i.stack.imgur.com/1uLPv.png) 希望它可以帮助！

![在此处输入图像描述](https://i.stack.imgur.com/1uLPv.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:27:11.883

这应该适合你

```
var textboxData = $('.textbox').val();
var newData = textboxData.split('.');
alert(newData[0]); 
```

这是**[现场演示](http://jsfiddle.net/mZtyX/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T03:28:23.560

jquery 是 javascript。读取整个字符串并在字符串上调用js函数split()。

# android - 无法仅在 GooglePlay 上实例化活动 ComponentInfo

> ID：16138936
> 
> 赞同：1
> 
> 时间：2013-04-22T03:24:06.400
> 
> 标签：android, exception, google-play

我已经构建了一个使用 android maps API V2 的 android 应用程序，它对我来说很好用。

当我将应用程序提交到 Google Play 时，我遇到了很多例外情况，人们说该应用程序无法正常工作。

系统找不到 MainActivity。

StackTrace 是

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mostafa.cairometrobeta/com.mostafa.cairometrobeta.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.mostafa.cairometrobeta.MainActivity" on path: /system/framework/com.google.android.maps.jar:/data/app/com.mostafa.cairometrobeta-1.apk
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: Didn't find class "com.mostafa.cairometrobeta.MainActivity" on path: /system/framework/com.google.android.maps.jar:/data/app/com.mostafa.cairometrobeta-1.apk
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
... 11 more 
```

和清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mostafa.cairometrobeta"
    android:versionCode="7"
    android:versionName="1.0.2"
     android:installLocation="auto">

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
    <permission android:name="com.mostafa.cairometrobeta.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
    <uses-permission android:name="com.mostafa.cairometrobeta.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
                <uses-library android:name="com.google.android.maps" />
        <activity
            android:name="MainActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="GuideActivity"></activity>
        <activity android:name="GalleryActivity"></activity>
        <activity android:name="NearbyActivity"></activity>
        <activity android:name="SettingsActivity"></activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MapKey" />
    </application> 
```

有什么问题 ？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:07:51.877

试试这个：把你的包名放在你所有的活动之前，如下所示

```
<activity
            android:name="com.mostafa.cairometrobeta.MainActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

## 注意：如果您的应用程序中有不同的包，那么...

就像我有两个包裹 `com.test.example`和`com.test_new.example`

* * *

在 com.test.example 中有活动名称 = Mainactiivty

然后在清单中：`android:name="com.test.example.MainActivity"`

* * *

在 com.test_new.example 有活动名称 = New_Mainactiivty

然后在清单中：`android:name="com.test_new.example.New_Mainactiivty"`

# ruby - Ruby on Windows 命令提示符

> ID：16138939
> 
> 赞同：0
> 
> 时间：2013-04-22T03:24:33.773
> 
> 标签：ruby

我是 Ruby 的新手，我已经下载并安装了它，并将 Ruby 添加到我的 PATH 中。

我打开了一个新的命令提示符并输入`Ruby`了 ，可以这么说，这让我进入了一个会话。

然后我开始输入各种命令，如`help`、、等`update`，`version`但它什么也没做。

然后我又试了`exit`，`quit`才`cancel`发现你要使用`CTRL+C`中断。

无论如何，我是否通过输入这些随机命令以任何方式损害了安装？输入命令后，我从未收到任何反馈，只是换了一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:26:41.817

ruby 是我相信的编译器。irb 是交互式控制台。

如果您这样做`Ruby myRubyFile.rb`，它将为您运行该文件。这在我发现的批处理脚本中很有用。

例如，如果 ruby​​ 脚本重命名一些文件并将它们移动到某个位置，您可以将其放入 bat 或 bash shell 脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:28:55.797

当您键入

红宝石

像这样，您将 Ruby 解释器指向 . . . 没有什么！

创建一个名为 hello_world.rb 的文件，并将这一行放入其中：

放“你好，世界！”

然后输入

红宝石 hello_world.rb

看看会发生什么。

# sql - 我正在尝试比较两个表中的行。然后显示 line_items 与 product_class 中不存在的类别/类别

> ID：16138940
> 
> 赞同：0
> 
> 时间：2013-04-22T03:24:45.547
> 
> 标签：sql

```
Select DISTINCT product_class.product_category
From line_items
    JOIN product
        on line_items.product_id = product.product_id
    JOIN product_class
        on product_class.product_class_id = product.product_class_id

Select DISTINCT product_category
from product_class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:43:33.127

不太清楚你到底在追求什么。我猜你想拥有 line_items 中不存在的 product_class 中的所有类别/类别。

如果是这样，这是一个解决方案

```
SELECT DISTINCT product_category FROM product_class WHERE product_class_id NOT IN (
SELECT DISTINCT product_class_id FROM product WHERE product_id in (
SELECT DISTINCT product_id FROM line_items)) 
```

# c# - 当我希望我的异步方法不阻塞时，为什么 Resharper 坚持我添加等待？

> ID：16138945
> 
> 赞同：0
> 
> 时间：2013-04-22T03:25:45.690
> 
> 标签：c#, async-await

我正在努力学习`async/await`，所以这听起来像是一个愚蠢的问题，但我目前正在开发一个基本的 TCP 服务器，并尝试使用`async/await`而不是手动线程来处理多个连接。

在一个`NetworkClient`类中，我有以下方法：

```
 public async Task Start()
    {
        using (var reader = new StreamReader(_socket.GetStream()))
        {
            while (_server.IsRunning)
            {
                try
                {
                    var content = await reader.ReadLineAsync().ConfigureAwait(false);
                    if (content == null)
                    {
                        Console.WriteLine("Client {0} disconnected", _id);
                        return;
                    }

                    Console.WriteLine("Client {0} wrote: {1}", _id, content);
                }
                catch (IOException)
                {
                    Console.WriteLine("Client {0} disconnected", _id);
                    return;
                }
            }
        }
    } 
```

我的侦听客户端连接的循环包含以下代码：

```
 private void ListenForClients()
    {
        var numClients = 0;
        while (IsRunning)
        {
            var tcpClient = _listener.AcceptTcpClient();
            var netClient = new NetworkClient(this, tcpClient, numClients);
            netClient.Start();

            Console.WriteLine("Client {0} Connected", numClients);
            numClients++;
        }
    } 
```

这可以按我的预期工作，允许多个 telnet 连接同时连接并向服务器发送消息。但是，resharper 告诉我应该添加`await`，`netClient.Start();`否则它不会阻塞。但是，我不想让它阻塞！

Resharper 给我这样的警告的事实让我怀疑我是否`async/await`错误地接近系统。为什么 Resharper 要我添加`await`到这行代码中，以及使用此代码的正确方法是什么，这样*不会*`netClient.Start();`阻止其他 tcp 连接加入？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:44:18.730

> 但是，resharper 告诉我应该将 await 添加到 netClient.Start(); 因为否则它不会阻塞。但是，我不想让它阻塞！

ReSharper 会对这种情况发出警告，因为它通常是一个错误。

在您的情况下，您可以在您的类型中创建一个`private Task`代表该`Start`方法的成员并分配它而不是`await`它：

```
startTask = netClient.Start(); 
```

这应该避免警告，并使您能够确定`Start`方法何时退出并检测它抛出的任何异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:02:28.457

您`Start`的方法并不是真正的异步 - 看起来它等待连接同步发生，而不是异步读取数据。结果，您的代码实际上确实按照您期望的方式工作 -之前完成`ListenForClients`的同步部分（因此它打印正确的文本），而不是异步部分将自行运行而无需任何人等待结果。`Start``Console.WriteLine`

此代码本质上与“连接 + 触发并忘记新线程来处理读取数据”相同。

`async`/`await`当您需要使用异步操作编写顺序代码时闪耀。在您的情况下，您确实需要并行操作-启动多个侦听器可能会更好。使用每个侦听器的代码可能会受益`await`- 在循环中使用等待读取/等待写入要简单得多，而不是带有事件的多个状态（或者更糟糕的是 EndSend/SendReceive...）。*

# sql - 我希望查询的输出以连字符作为前缀

> ID：16138947
> 
> 赞同：0
> 
> 时间：2013-04-22T03:26:25.957
> 
> 标签：sql

我创建了下面的视图。我希望员工姓名（在我的声明中称为姓名）的输出以连字符作为前缀。我正在尝试使用 oracle 编写 SQL 树结构。谢谢你的帮助

```
create or replace view connected_employee 
as
select lpad(' ', (level - 1) * 3) ||  name as name, title, position, officekey
from employee
connect by prior employeekey=managerkey
start with employeekey=501; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:54:49.250

尝试在视图名称周围放置双引号或方括号。

# objective-c - 如何从字符串中删除字符串

> ID：16138951
> 
> 赞同：-3
> 
> 时间：2013-04-22T03:27:09.560
> 
> 标签：objective-c, xml, nsstring

我有这个字符串

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">{"IsSuccess":true,"Result":"","Obj":
[{"FACULTY_CODE":1,"FACULTY_DESC":"\u0E1A\u0E23\u0E34\u0E2B\u0E32\u0E23\u0E18\u0E38\u0E23\u0
E01\u0E34\u0E08","FACULTY_DESC_ENG":"Faculty of Business 
Administration","FACULTY_CODE_ICL":"00039","FACULTY_GROUP":"1000"},
{"FACULTY_CODE":2,"FACULTY_DESC":"\u0E19\u0E34\u0E15\u0E34\u0E28\u0E32\u0E2A\u0E15\u0E23\u0E
4C","FACULTY_DESC_ENG":"Faculty of Law","FACULTY_CODE_ICL":"00037","FACULTY_GROUP":"0101"},
{"FACULTY_CODE":3,"FACULTY_DESC":"\u0E28\u0E34\u0E25\u0E1B\u0E28\u0E32\u0E2A\u0E15\u0E23\u0E
4C","FACULTY_DESC_ENG":"Faculty of Liberal 
Arts","FACULTY_CODE_ICL":"00096","FACULTY_GROUP":"0100"},
{"FACULTY_CODE":4,"FACULTY_DESC":"\u0E27\u0E34\u0E17\u0E22\u0E32\u0E28\u0E32\u0E2A\u0E15\u0E
23\u0E4C\u0E41\u0E25\u0E30\u0E40\u0E17\u0E04\u0E42\u0E19\u0E42\u0E25\u0E22\u0E35","FACULTY_D
ESC_ENG":"Faculty of Science and 
Technology","FACULTY_CODE_ICL":"00083","FACULTY_GROUP":"0303"},
{"FACULTY_CODE":5,"FACULTY_DESC":"\u0E23\u0E31\u0E10\u0E28\u0E32\u0E2A\u0E15\u0E23\u0E4C","F
ACULTY_DESC_ENG":"Faculty of Political 
Sciences","FACULTY_CODE_ICL":"00068","FACULTY_GROUP":"0101"},
{"FACULTY_CODE":7,"FACULTY_DESC":"\u0E19\u0E34\u0E40\u0E17\u0E28\u0E28\u0E32\u0E2A\u0E15\u0E
23\u0E4C","FACULTY_DESC_ENG":"Faculty of Communication 
Arts","FACULTY_CODE_ICL":"00038","FACULTY_GROUP":"0104"},
{"FACULTY_CODE":8,"FACULTY_DESC":"\u0E27\u0E34\u0E17\u0E22\u0E32\u0E25\u0E31\u0E22\u0E19\u0E
32\u0E19\u0E32\u0E0A\u0E32\u0E15\u0E34\u0E14\u0E34\u0E29\u0E22\u0E30\u0E28\u0E23\u0E34\u0E19
","FACULTY_DESC_ENG":"Didyasarin International 
College","FACULTY_CODE_ICL":"00137","FACULTY_GROUP":""},
{"FACULTY_CODE":9,"FACULTY_DESC":".","FACULTY_DESC_ENG":"Bachelor of Fine and Applied 
Art","FACULTY_CODE_ICL":"","FACULTY_GROUP":""}]}</string> 
```

但我想删除`"<?xml version="1.0" encoding="utf-8"?> <string xmlns="http://tempuri.org/">"`和`"</string>"`

我正在使用此代码

```
NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"{.+}" options:0 error:&error];
    NSArray *matches = [regex matchesInString:dataString options:0 range:NSMakeRange(0, [dataString length])];
NSLog(@"matches = %@",matches );
for (NSTextCheckingResult *match in matches) {
    NSRange matchRange = [match range];
    newDataString = [dataString substringWithRange:matchRange];
} 
```

这没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:33:37.593

您可以像这样使用正则表达式：

```
%s/\"[^"]+\":\s*\" *\"\(\s*,\s*\)*//g 
```

这是一个 gvim 正则表达式

它将摆脱值为“”或“”的每个键值对，如果它存在则删除逗号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:35:47.203

你可以做的只是

```
NSString *string1 = @"<?xml version=\"1.0\" encoding=\"utf-8\"?> <string xmlns=\"http://tempuri.org/\">";
NSString *string2 = @"</string>";
NSString *myString;//this is your string
myString = [myString stringByReplacingOccurrencesOfString:string1 withString:@""];
myString = [myString stringByReplacingOccurrencesOfString:string2 withString:@""]; 
```

# jsp - 如何从 Java 库方法打开文件以在 Apache Tomcat 中读取

> ID：16138957
> 
> 赞同：1
> 
> 时间：2013-04-22T03:27:46.640
> 
> 标签：jsp, tomcat, php-java-bridge

我正在使用 Apache Tomcat 服务器。在库中的 Java 类中，我需要打开一个文件以使用 getResourceAsStream() 读取它。文件应该在哪个目录中以便可以从 Java 代码中打开，我应该在 getResourceAsStream() 的参数中使用什么路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:50:35.517

此代码从 conf 文件夹中读取 test.properties 文件：

```
 File file = null;
            if (System.getProperty("catalina.base") != null)
                file = new File(System.getProperty("catalina.base") + "/conf/test.properties");
            else
                throw new RuntimeException("Catalina.base doesn't exists.");
            FileInputStream fis = new FileInputStream(file);
            props.load(fis);
            fis.close(); 
```

# c# - 如何使用单声道编译 GUI 应用程序？

> ID：16138958
> 
> 赞同：5
> 
> 时间：2013-04-22T03:27:56.573
> 
> 标签：c#, mono

我写了一个 C# 程序，我会这样编译：

> C:\Users\Administrator\Documents\Visual Studio 2005\Projects\GUITest\GUITest>mcs *.cs /r:System.Data,System.Drawing,System.Windows.Forms,..\HtmlAgilityPack.dll

但是输出应用程序有一个控制台窗口。有没有办法编译程序，以便我可以在没有控制台窗口的情况下获得应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T06:56:48.660

Windows 应用程序有两种不同的“模式”或类型：控制台应用程序和 GUI 应用程序。托管应用程序也是如此，无论您如何构建它们。

控制台应用程序将始终在启动时自动显示控制台窗口。您还*可以*编写代码来显示 GUI 窗口（例如，表单），但这是可选的。无论哪种方式，控制台窗口都将始终显示。

GUI 应用程序在启动时不显示任何内容。通常，您编写显示 GUI 窗口（例如，表单）的代码，但您不必这样做。如果您不显示任何内容，那么您就创建了人们通常所说的“后台应用程序”，因为它在后台运行而不显示任何 UI。这对于控制台应用程序是不可能的，因为它显示了那个丑陋的控制台窗口。

因此，如果您*不*想要控制台窗口，您就不需要控制台应用程序。您需要一个常规的 GUI 应用程序。

现在，挑战在于弄清楚如何使用 Mono 编译器实现这一目标。Visual Studio 将此选项公开为项目级设置。Mono 编译器需要一个标志，`/target`告诉它要构建什么类型的应用程序。

*   `/target:exe`（默认选项）将构建一个控制台应用程序
*   `/target:winexe`将构建一个 GUI 应用程序
*   `/target:library`将构建一个库（它不是一个可执行的应用程序，而只是一块可重用的代码）

因此，将您在命令行中运行的命令更改为：

```
mcs *.cs /target:winexe /r:System.Data,System.Drawing,System.Windows.Forms,... 
```

我相信您还需要确保您运行的是相对较新的 Mono 版本。旧版本不支持创建 GUI 应用程序（`/target:winexe`未实现该开关）。我知道从 2.8 版开始完全支持此功能，但没有理由不使用可用的最新版本。

如果我的回答对您来说不够权威，您会发现[Mono WinForms FAQ](http://www.mono-project.com/FAQ:_Winforms#How_can_I_keep_the_terminal_window_.28.22dos_prompt.22.29_from_showing_when_my_application_runs.3F)中记录的相同快速修复（没有理由） 。

# java - 如何从我的 Maven 构建中排除资源，packagingExcludes 不起作用

> ID：16138959
> 
> 赞同：5
> 
> 时间：2013-04-22T03:27:58.187
> 
> 标签：java, spring, maven, spring-mvc

我正在使用**maven-war-plugin**构建一个 .war 文件

我正在使用 packagigExcludes，它适用于 .jar 文件：

```
 <packagingExcludes>WEB-INF/lib/jetty-*.ja                        
                        WEB-INF/../resources/log4j.properties,
                        WEB-INF/../resources/web.properties
                    </packagingExcludes> 
```

但是上面的属性文件没有被排除，我也试过：

```
src/main/resources/web.properties 
```

这是一个多模块 maven 项目，我正在为这个 spring mvc maven 项目构建一个 .war 文件，我必须排除这些文件，但它不起作用。

任何指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T03:42:17.037

我刚试过......你确定你在正确的地方进行配置吗？我的 pom 看起来像这样：

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.example</groupId>
        <artifactId>example-parent</artifactId>
        <version>0.1.4-SNAPSHOT</version>
    </parent>
    <artifactId>example-webapp</artifactId>
    <packaging>war</packaging>
    <url>http://maven.apache.org</url>
    <dependencies>
       [...]
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
                </configuration>
            </plugin>
        </plugins>
        <finalName>example-webapp</finalName>
    </build>
</project> 
```

----> 编辑

要从资源中排除东西，你必须这样做：

```
 <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <packagingExcludes>
                        WEB-INF/classes/log4j.properties
                    </packagingExcludes>
                </configuration>
            </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:39:53.343

添加这个`pom.xml`

```
</build>
  <resources>
        <resource>
            <directory>src/main/resources</directory>
            <excludes>
                <exclude>web.properties</exclude>
            </excludes
        </resource>
  </resources>
</build> 
```

# html - 为什么我的 WebMatrix 项目仍在使用旧的 favicon.ico 文件？

> ID：16138961
> 
> 赞同：1
> 
> 时间：2013-04-22T03:28:08.527
> 
> 标签：html, jpeg, webmatrix, favicon, ico

WebMatrix 产品中包含的默认 favicon.ico 添加到 _SiteLayout.cshtml 中，如下所示：

```
<link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

该图标不适合我的应用程序，因此我转换了在[http://www.coolutils.com/Online/Image-Converter/](http://www.coolutils.com/Online/Image-Converter/)创建的 jpg 。

我将 favicon.ico 重命名为*YourMotherWearsCombatBoots.ico*并将我转换的图像重命名为 favicon.ico（在将其添加到我的项目之后）。

我认为我的新 .ico 文件将在页面/站点的浏览器选项卡中使用。但是，唉，不！旧的 .ico 文件就像坡的诗中的乌鸦一样 - 它永远不会消失。那是怎么回事？

## 更新

注意：如果尝试使用 firefox 或 IE 作为浏览器不起作用（目前正在使用 Chrome 进行测试），我将尽快为这个问题加分 50 分。如果我在此之前得到答案，我将在回答后奖励赏金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:59:53.990

清除缓存:)

只要文件的路径（包括文件名）正确，并且是 .ico 文件，它就应该呈现。

话虽如此，请尽量不要使用`~`，因为它只是一个 html 标记，它用于`/`查找站点的根目录。

我已经这样做了很多次，并且在任何浏览器中的任何 ico 都没有任何问题。

老实说，缓存是我唯一能想到的。

**- - - - - - - - - - - - - - - - - 更新 - - - - - - - - ------------------**

我正在扩展我的答案以显示一个例子。这是我最近设置的一个场景，它第一次运行完美（就像我每次都一样）。

**的HTML：**

```
<link href="/Images/Site_Icon/Scribe.ico" rel="shortcut icon" type="image/x-icon" /> 
```

**目录结构：**

![目录结构为](https://i.stack.imgur.com/jTFKE.png)

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/PLOgi.png)

由于我一直在为我的网站使用图标，所以我没有注意到还需要其他任何东西。据我所知，这就是让它按预期工作所涉及的全部内容。

如果这仍然没有帮助，请执行以下操作：

1.  重新验证路径，一次检查一个文件夹。
2.  完全删除旧的 Microsoft favicon，除非您打算将其用于其他用途（我对此表示怀疑）。
3.  打开您尝试渲染的 ico 文件。真的是你期待的画面吗？
4.  手动`(Ctrl+Shift+Del)`清除缓存（尤其是对于 Chrome）并重试（如果您要在 Chrome 中调试，您不妨习惯于定期执行此操作 [好吧，实际上无论您使用什么浏览器，您都会当某些东西没有按照您期望的方式呈现时必须这样做，这样您就会知道这不是缓存问题]）​​。
5.  确保您正在查看正确的网站，当它在您的浏览器中打开时（即，确保您没有在本地编辑您的网站并从您的服务器或其他东西中提取未更新的版本）。

除此之外，我想不出还有什么可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:24:04.453

很可能是浏览器的问题，而不是与 WebMatrix 或代码有关的任何问题。

# c# - 使用 Decimal 参数的数据类型不匹配 - OleDb、C#、Access

> ID：16138964
> 
> 赞同：0
> 
> 时间：2013-04-22T03:28:27.230
> 
> 标签：c#, ms-access, parameterized, oledbdataadapter

好的，所以我正在尝试将已在我的程序中更新的私人成员发送到访问数据库。但是，每当我运行程序并按下保存按钮时，我都会收到“标准表达式中的数据类型不匹配”异常。

这是我正在使用的代码片段。它在 da.Update 命令中引发异常。所以我知道这与我的更新命令或我的参数有关。由于我一直试图缩小问题范围，因此我还注释掉了重复的部分。

OleDbConnection 连接 = 新 OleDbConnection(ConnString);

```
 string sql = @" SELECT * FROM Account where AccountID = '" + accountName + @"'";

        string update = @" UPDATE Account SET
                        Cash = '@Cash'";/*, PaidInCapital = '@PaidInCapital',
                        TotalRetainedEarnings = '@TotalRetainedEarnings',
                        StockholdersEquity = '@StockholdersEquity',
                        CommonStock = '@CommonStock', PreferredStock = '@PreferredStock',
                        TreasuryStock = '@TreasuryStock', CashDividends = '@CashDividends',
                        StockDividends = '@StockDividends', @"TotalNumberPreferred = '@TotalNumberPreferred',
                        PreferredMarketPrice = '@PreferredMarketPrice', PreferredPar = '@PreferredPar',
                        Cumulative = '@Cumulative', TotalNumberCommon = '@TotalNumberCommon',
                        CommonMarketPrice = '@CommonMarketPrice', CommonPar = '@CommonPar',
                        NumberTransactTreasuryStock = '@NumberTransactTreasuryStock',
                        AvgPriceTreasury = '@AvgPriceTreasury'";*/

        try
        {
            OleDbDataAdapter da = new OleDbDataAdapter();

            da.SelectCommand = new OleDbCommand(sql, conn);

            AccountDatabaseDataSet ds = new AccountDatabaseDataSet();

            da.Fill(ds, "Account");

            DataTable dt = ds.Tables["Account"];

            dt.Rows[0][1] = cash;
            /*dt.Rows[0][2] = paidInCapital;
            dt.Rows[0][3] = totalRetainedEarnings;
            dt.Rows[0][4] = stockholdersEquity;
            dt.Rows[0][5] = commonStock;
            dt.Rows[0][6] = preferredStock;
            dt.Rows[0][7] = treasuryStock;
            dt.Rows[0][8] = cashDividends;
            dt.Rows[0][9] = stockDividends;
            dt.Rows[0][10] = totalNumberPreferred;
            dt.Rows[0][11] = preferredMarketPrice;
            dt.Rows[0][12] = preferredPar;
            dt.Rows[0][13] = preferredRate;
            dt.Rows[0][14] = cumulative;
            dt.Rows[0][15] = totalNumberCommon;
            dt.Rows[0][16] = commonMarketPrice;
            dt.Rows[0][17] = commonPar;
            dt.Rows[0][18] = numberTransactTreasury;
            dt.Rows[0][19] = avgPriceTreasury;*/

            OleDbCommand cmd = new OleDbCommand(update, conn);

            cmd.Parameters.Add("@Cash", OleDbType.Decimal, 18, "Cash");
            /*cmd.Parameters.Add("@PaidInCapital", OleDbType.Decimal, 18, "PaidInCapital");
            cmd.Parameters.Add("@TotalRetainedEarnings", OleDbType.Decimal, 18, "TotalRetainedEarnings");
            cmd.Parameters.Add("@StockholdersEquity", OleDbType.Decimal, 18, "StockholdersEquity");
            cmd.Parameters.Add("@CommonStock", OleDbType.Decimal, 18, "CommonStock");
            cmd.Parameters.Add("@PreferredStock", OleDbType.Decimal, 18, "PreferredStock");
            cmd.Parameters.Add("@TreasuryStock", OleDbType.Decimal, 18, "TreasuryStock");
            cmd.Parameters.Add("@CashDividends", OleDbType.Decimal, 18, "CashDividends");
            cmd.Parameters.Add("@StockDividends", OleDbType.Decimal, 18, "StockDividends");
            cmd.Parameters.Add("@TotalNumberPreferred", OleDbType.Integer, 16, "TotalNumberPreferred");
            cmd.Parameters.Add("@PreferredMarketPrice", OleDbType.Decimal, 10, "PreferredMarketPrice");
            cmd.Parameters.Add("@PreferredPar", OleDbType.Decimal, 10, "PreferredPar");
            cmd.Parameters.Add("@PreferredRate", OleDbType.Decimal, 5, "PreferredRate");
            cmd.Parameters.Add("@Cumulative", OleDbType.Boolean, 2, "Cumulative");
            cmd.Parameters.Add("@TotalNumberCommon", OleDbType.Integer, 16, "TotalNumberCommon");
            cmd.Parameters.Add("@CommonMarketPrice", OleDbType.Decimal, 10, "CommonMarketPrice");
            cmd.Parameters.Add("@CommonPar", OleDbType.Decimal, 10, "CommonPar");
            cmd.Parameters.Add("@NumberTransactTreasuryStock", OleDbType.Integer, 16, "NumberTransactTreasuryStock");
            cmd.Parameters.Add("@AvgPriceTreasury", OleDbType.Decimal, 10, "AvgPriceTreasury");*/

            da.UpdateCommand = cmd;
            da.Update(ds, "Account"); 
```

如果您取出注释部分，基本上可以缩小到这一点：

```
OleDbConnection conn = new OleDbConnection(ConnString);

        string sql = @" SELECT * FROM Account where AccountID = '" + accountName + @"'";

        string update = @" UPDATE Account SET
                        Cash = '@Cash'";
        try{
            OleDbDataAdapter da = new OleDbDataAdapter();

            da.SelectCommand = new OleDbCommand(sql, conn);

            AccountDatabaseDataSet ds = new AccountDatabaseDataSet();

            da.Fill(ds, "Account");

            DataTable dt = ds.Tables["Account"];

            dt.Rows[0][1] = cash;

            OleDbCommand cmd = new OleDbCommand(update, conn);

            cmd.Parameters.Add("@Cash", OleDbType.Decimal, 18, "Cash");

            da.UpdateCommand = cmd;
            da.Update(ds, "Account");
         } 
```

所以，基本上我拥有的是一个“帐户”表，我想将第二个 [1] 列设置为等于十进制类型的私有成员变量“现金”。然后我为“@Cash”参数设置我的参数，其中 OleDbType 是十进制，大小是 18，访问数据库中的列是“现金”。最后我用这个值更新了“账户”表。

现在，我尝试将我的 oledbtype 中的 .Decimal 更改为列表中的每种可能类型，但它似乎永远不会起作用，甚至某些异常将其声明为“无法转换为 DateTime 的十进制类型”。所以我被引导相信 oledbtype 不是问题。我也尝试过弄乱参数中的大小，但这也没有奏效。

我已尽力解释这一点，但如果还有其他有助于解决此问题的内容，我将提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:08:37.150

这是解决我更新问题的代码，以供需要帮助的人将来参考。这是在 Visual Studio 2012 中使用 MS Access 的数据集：

```
public void UpdateValues(string accountName)
    {
        OleDbConnection conn = new OleDbConnection(ConnString);

        string sql = @" SELECT * FROM Account where AccountID = '" + accountName + @"'";

        string update = "UPDATE Account SET Cash = ?, PaidInCapital = ?, TotalRetainedEarnings = ?, StockholdersEquity = ?, " +
                        "CommonStock = ?, PreferredStock = ?, TreasuryStock = ?, CashDividends = ?, StockDividends = ?, " +
                        "TotalNumberPreferred = ?, PreferredMarketPrice = ?, PreferredPar = ?, Cumulative = ?, TotalNumberCommon = ?, " +
                        "CommonMarketPrice = ?, CommonPar = ?, NumberTransactTreasuryStock = ?, AvgPriceTreasury = ? WHERE AccountID = '" + accountName + "'";
        try
        {
            OleDbDataAdapter da = new OleDbDataAdapter();

            da.SelectCommand = new OleDbCommand(sql, conn);

            AccountDatabaseDataSet ds = new AccountDatabaseDataSet();

            da.Fill(ds, "Account");

            DataTable dt = ds.Tables["Account"];

            dt.Rows[0][1] = cash;
            dt.Rows[0][2] = paidInCapital;
            dt.Rows[0][3] = totalRetainedEarnings;
            dt.Rows[0][4] = stockholdersEquity;
            dt.Rows[0][5] = commonStock;
            dt.Rows[0][6] = preferredStock;
            dt.Rows[0][7] = treasuryStock;
            dt.Rows[0][8] = cashDividends;
            dt.Rows[0][9] = stockDividends;
            dt.Rows[0][10] = totalNumberPreferred;
            dt.Rows[0][11] = preferredMarketPrice;
            dt.Rows[0][12] = preferredPar;
            dt.Rows[0][13] = preferredRate;
            dt.Rows[0][14] = cumulative;
            dt.Rows[0][15] = totalNumberCommon;
            dt.Rows[0][16] = commonMarketPrice;
            dt.Rows[0][17] = commonPar;
            dt.Rows[0][18] = numberTransactTreasury;
            dt.Rows[0][19] = avgPriceTreasury;

            OleDbCommand cmd = new OleDbCommand(update, conn);

            cmd.Parameters.Add("@Cash", OleDbType.Decimal, 18, "Cash");
            cmd.Parameters.Add("@PaidInCapital", OleDbType.Decimal, 18, "PaidInCapital");
            cmd.Parameters.Add("@TotalRetainedEarnings", OleDbType.Decimal, 18, "TotalRetainedEarnings");
            cmd.Parameters.Add("@StockholdersEquity", OleDbType.Decimal, 18, "StockholdersEquity");
            cmd.Parameters.Add("@CommonStock", OleDbType.Decimal, 18, "CommonStock");
            cmd.Parameters.Add("@PreferredStock", OleDbType.Decimal, 18, "PreferredStock");
            cmd.Parameters.Add("@TreasuryStock", OleDbType.Decimal, 18, "TreasuryStock");
            cmd.Parameters.Add("@CashDividends", OleDbType.Decimal, 18, "CashDividends");
            cmd.Parameters.Add("@StockDividends", OleDbType.Decimal, 18, "StockDividends");
            cmd.Parameters.Add("@TotalNumberPreferred", OleDbType.Integer, 16, "TotalNumberPreferred");
            cmd.Parameters.Add("@PreferredMarketPrice", OleDbType.Decimal, 10, "PreferredMarketPrice");
            cmd.Parameters.Add("@PreferredPar", OleDbType.Decimal, 10, "PreferredPar");
            cmd.Parameters.Add("@PreferredRate", OleDbType.Decimal, 5, "PreferredRate");
            cmd.Parameters.Add("@Cumulative", OleDbType.Boolean, 2, "Cumulative");
            cmd.Parameters.Add("@TotalNumberCommon", OleDbType.Integer, 16, "TotalNumberCommon");
            cmd.Parameters.Add("@CommonMarketPrice", OleDbType.Decimal, 10, "CommonMarketPrice");
            cmd.Parameters.Add("@CommonPar", OleDbType.Decimal, 10, "CommonPar");
            cmd.Parameters.Add("@NumberTransactTreasuryStock", OleDbType.Integer, 16, "NumberTransactTreasuryStock");
            cmd.Parameters.Add("@AvgPriceTreasury", OleDbType.Decimal, 10, "AvgPriceTreasury");

            da.UpdateCommand = cmd;
            da.Update(ds, "Account");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + ex.StackTrace, "Exception Details");
        }
        finally
        {
            conn.Close();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:46:13.333

如果您需要更新数据库中的行，请尝试以下

```
using (OleDbConnection conn = new OleDbConnection(ConnString))
 {
       conn.Open();
       using (var cmd = conn.CreateCommand())
       {
            cmd.CommandText = "UPDATE Account SET Cash=? WHERE AccountID =?";
            cmd.Parameters.Add("@p1", OleDbType.Decimal).Value = 3.1416;
            cmd.Parameters.Add("@p2", OleDbType.Integer).Value = accountName;
            cmd.ExecuteNonQuery();
       }
 } 
```

*   使用参数，否则您的查询会因 sql 注入攻击而打开
*   OLE DB.NET Framework 数据提供程序使用标有问号 (?) 而不是命名参数的位置参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:53:48.750

你说它抛出异常。您是否尝试过捕获异常并更详细地检查它？有时异常会有一个 InnerException 属性，该属性可以包含复杂对象（如 OleDb）引发的错误的更多详细信息。

# php - jquery`.ajax`不工作

> ID：16138965
> 
> 赞同：1
> 
> 时间：2013-04-22T03:28:41.077
> 
> 标签：php, jquery, ajax, json

我是一个尝试`.ajax`通过在线教程学习 jquery 的 n00b。

我的本地主机上的“客户端”有以下代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            $("#submit_btn").click(function(){
                $.ajax({
                      type: "POST",
                      url: "response.php",
                      dataType: 'json',
                      data: { name: "John", location: "Boston" }
                }).done(function( msg ) 
                {
                  alert( "Data Saved: " + msg );
                });
            });
        }); 
    </script> 
</head>
<body>
    <input type="submit" name="submit" class="button" id="submit_btn" value="Send" /> 
</body>
</html> 
```

我在名为“response.php”的“服务器”端文件中有以下代码：

```
<?php
if (isset($_POST))
{
$answer = $_POST;
echo json_encode($answer);
}  else {
echo json_encode("no good");
}
?> 
```

当我单击“发送”按钮时，我会收到一条提示“已保存数据：[对象对象]”的警报。我试图让警报显示使用点击事件通过“发布”提交的数据。我希望警报显示“姓名：“约翰”，位置：“波士顿”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:33:31.910

`"Data Saved: " + msg.name + " " + msg.location`

您收到的是`JSON`对象，因此在`javascript`prints中打印一个对象`[object Object]`。您应该使用`.`（点）运算符访问对象的属性以获取名称和位置。

假设，您的响应是以下 JSON 对象：

`msg = { name : "John", last_name : "Doe" }`

要访问对象`name`的属性，请`msg`使用点运算符：

`console.log(msg.name);`

为了使您的代码通用，您应该能够以某种方式告诉客户端请求是好是坏。所以你可以`status`像这样发回：

```
<?php
if (isset($_POST))
{
$answer = $_POST;
$answer['status'] = true;
echo json_encode($answer);
}  else {
echo json_encode(array('status' => false, 'msg' => 'no good'));
}
?> 
```

在客户端上，您必须检查`status`：

```
function(response) {
  if (response.status) {
    console.log('yep, post was submitted, name is ' + response.name + ', location is ' + response.location);
  }
  else {
    console.log('something went wrong: ' + response.msg);
  }
} 
```

**更新**：

还有一件事：一旦你决定使用`JSON`，就不要`text/plain`寄回。这正是您在这里所做的：

`echo json_encode("no good");`

此代码 a 生成的字符串`"no good"`是`text/plain`，但不是有效`JSON`对象。

[`Take a look at what JSON is`](http://en.wikipedia.org/wiki/JSON)

# php - php：如何从 mysql SELECT 生成二维数组？

> ID：16138968
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:28:58.263
> 
> 标签：php, mysql, arrays, recursion, tree

我有一些问题，请帮助我。

1.  在 PHP/MySQL 中，我有一个要生成二维数组的查询，我该怎么做？
2.  我有一个 php 数组代码，如下所示：

    ```
    $menu = Array( // I wanna to get data from a SQL SELECT.
        Array('id'=>1,'title'=>'Menu 1',          'parent_id'=>null),
        Array('id'=>2,'title'=>'Sub 1.1',         'parent_id'=>1),
        Array('id'=>3,'title'=>'Sub 1.2',         'parent_id'=>1),
        Array('id'=>4,'title'=>'Sub 1.3',         'parent_id'=>1),
        Array('id'=>5,'title'=>'Menu 2',          'parent_id'=>null),
        Array('id'=>6,'title'=>'Sub 2.1',         'parent_id'=>5),
        Array('id'=>7,'title'=>'Sub Sub 2.1.1',   'parent_id'=>10),
        Array('id'=>8,'title'=>'Sub 2.2',         'parent_id'=>5),
        Array('id'=>9,'title'=>'Menu 3',          'parent_id'=>null),
        Array('id'=>10,'title'=>'Menu 3',          'parent_id'=>null),
    ); 
    ```

    如何使用 mysql 生成这个简单的数组？

    ```
    <?php
    mysql_connect("localhost", "mysql_user", "mysql_password") or
        die("Could not connect: " . mysql_error());
    mysql_select_db("mydb");

    $result = mysql_query("SELECT * FROM mytable");

    //this is wrong,but I wanna to reach this effect↓↓↓↓↓↓↓↓
    while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
        echo "Array('id'=>$row["id"],'title'=>'$row["title"]','parent_id'=>$row["parent_id"]),"

    }

    ?> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:37:32.033

创建一个索引为零的数组并将数组附加到它。

```
$rows = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $rows[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:43:12.447

```
$data = array();

for ($i=1; $i<4; $i++) {
    $row = array();
    $row[] = $i;
    $row[] = $i*3;
    $row[] = $i*9;

    $data[] = $row;
}

var_dump($data);

--output:--
array(3) {
  [0]=>
  array(3) {
    [0]=>
    int(1)
    [1]=>
    int(3)
    [2]=>
    int(9)
  }
  [1]=>
  array(3) {
    [0]=>
    int(2)
    [1]=>
    int(6)
    [2]=>
    int(18)
  }
  [2]=>
  array(3) {
    [0]=>
    int(3)
    [1]=>
    int(9)
    [2]=>
    int(27)
  }
} 
```

# google-maps - ExtJS HTML 加载 googlemap 失败

> ID：16138969
> 
> 赞同：1
> 
> 时间：2013-04-22T03:29:01.937
> 
> 标签：google-maps, extjs4

```
var layout = Ext.create('Ext.panel.Panel', {
    width: window.innerWidth,
    height: window.innerHeight,
    // title: 'Border Layout', //no title will be blank
    layout: 'border',
    items: [{
        title: 'Message List',
        region: 'south', // position for region
        xtype: 'panel',
        height: 100,
        split: true, // enable resizing
        collapsible: true,
        margins: '0 5 5 5',
        collapsed: true
    }, tree, {
        html: '<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZx1jmE9yB533ED9suD13buyd0pEfmTzI&sensor=false&dummy=.js">
                </script> 
                <script type="text/javascript">
                init();
                function init() {
                var googleMapOptions = 
                {
                center: new google.maps.LatLng(53.5267, -1.13330),
                zoom: 16, 
                mapTypeId: google.maps.MapTypeId.ROADMAP};
                map = new google.maps.Map(document.getElementById("map_canvas"),googleMapOptions);
                }</script>
                <body>
                <div id="map_canvas" style="width:600px; height:400px"></div>
                </body>',
         renderTo: Ext.getBody()
     }],
     renderTo: Ext.getBody()
     // get the body and display Layout at there
}); 
```

但是我使用[http://jsfiddle.net/anthor/ufTpN/](http://jsfiddle.net/anthor/ufTpN/)效果很好，当粘贴在 ExrJS 中时，无法加载谷歌地图。为什么？

PS：我不想使用 Gmpanel 和 No Iframe，因为我想在这个页面上添加标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:21:07.473

首先，我建议你使用 Ext.ux.GMapPanelView 基本实现。

> P/S：我不想使用 Gmpanel 和 No Iframe，因为我想在这个页面上添加标记

**可以**很简单的添加标记，看代码：

```
 addMarker: function(marker) {
    marker = Ext.apply({
        map: this.gmap
    }, marker);

    if (!marker.position) {
        marker.position = new google.maps.LatLng(marker.lat, marker.lng);
    }
    var o =  new google.maps.Marker(marker);
    Ext.Object.each(marker.listeners, function(name, fn){
        google.maps.event.addListener(o, name, fn);    
    });
    return o;
} 
```

所以你甚至可以给它添加监听器。

您在代码片段（示例）中尝试​​执行的操作：

```
{
  html: '<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZx1jmE9yB533ED9suD13buyd0pEfmTzI&sensor=false&dummy=.js"></script>

  <script type="text/javascript">
  init();

  function init() {
   var googleMapOptions = {
       center: new google.maps.LatLng(53.5267, -1.13330),
       zoom: 16, 
       mapTypeId: google.maps.MapTypeId.ROADMAP};
       map = new google.maps.Map(document.getElementById("map_canvas"),googleMapOptions);
  }
  </script>
  **<body>**
    <div id="map_canvas" style="width:600px; height:400px"></div>
  **</body>**',

 **renderTo: Ext.getBody()**
} 
```

对不起，绝对是错误的。添加body标签，渲染到位于面板容器下的body `Ext.panel.Panel`，它本身会渲染它的项目等等，这看起来你对ext的内部结构和它是如何工作的了解不多。

您正在尝试通过基本且非常非常简单的 ux 实现来做类似 sencha 的人建议使用的事情。您可以进一步扩展它。

看看：

[GMapPanelView 示例](http://docs.sencha.com/extjs/4.2.0/extjs-build/examples/window/gmap.html) 还查看源代码只是为了查看 googleapis 的插入位置（如果需要，您可以扩展 gmap 视图以异步加载它）

[GMapPanelView 源代码](http://docs.sencha.com/extjs/4.2.0/extjs-build/examples/ux/GMapPanel.js)

[示例源](http://docs.sencha.com/extjs/4.2.0/extjs-build/examples/window/gmap.js)

一个非常**简单**的布局边框示例，您已经使用过。在西部地区你可以找到添加按钮，按下它来添加标记。

[**Gmap 用法，jsfiddle**](http://jsfiddle.net/nbabinski/r8Sga/3/)（只是一个例子；不要这样写实际代码）

不要害怕看源头！

祝你好运 ;）

# authorize.net - 为多个供应商授权 .NET 交易

> ID：16138970
> 
> 赞同：1
> 
> 时间：2013-04-22T03:29:05.580
> 
> 标签：authorize.net

我们正在尝试为网关为 authorize.net 的客户端构建一个系统。网站所有者是多个供应商的经销商。

这就是我们设想的过程：

a) 用户在网站上为多个供应商购买产品。b) 交易已获得合并金额的授权，但未收取费用。c) 供应商有 36 小时的时间确认是否可以履行，36 小时后，为确认的供应商捕获交易。

因此，假设用户为供应商 A（100 美元）、B（100 美元）和 C（100 美元）购买产品.. 300 美元是授权的，但如果只有 A 和 B 在 36 小时内确认，那么只有 200 美元被捕获并释放。

这个实现有什么问题吗？

购买 A、B 和 C 的 3 笔交易并在他们确认后捕获会更好吗？我假设在很短的时间内进行 3 笔交易会导致问题。

问候，

# javascript - 如何构造javascript文件？

> ID：16138971
> 
> 赞同：4
> 
> 时间：2013-04-22T03:29:05.997
> 
> 标签：javascript, web-applications, requirejs

我有

*   `base.html`
*   `pageA.html`
*   `pageB.html`
*   `pageA.js`
*   `pageB.js`

    1.  `pageA.js`有代码`pageA.html`，`pageB.js`有代码`pageB.html`。
    2.  两者`pageA.js`都`pageB.js`使用`jQuery`。

目前我在 base.html 中包含所有脚本，如下所示：

```
<html>
  <body>
    <div id="contents">
      <!-- pageA.html / pageB.html comes here -->
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/pageA.js"></script>
    <script src="js/pageB.js"></script>
  </body>
</html> 
```

我只想加载`pageA.js`for`pageA.html`和`pageB.js`for `pageB.html`，因为其他页面不需要每个文件中的代码。

我查看了[requires.js](http://requirejs.org)库，但我不确定它是否是解决我问题的正确方法。在这种情况下构建 javascript 文件的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:47:53.653

你有 JavaScript 来加载每个 html 文件的内容吗？如果是这样，并且一旦加载了每个文件，您就可以运行 JavaScript 代码，您可以在加载函数中调用所需的设置函数，如下所示：

base.html

```
<html>
    <head>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/pageA.js"></script>
        <script type="text/javascript" src="js/pageB.js"></script>
        <script type="text/javascript">
            $(document).ready(function()
            {
                $('#loadPageA').on('click', function()
                {
                    $('#contents').load('pageA.html', function()
                    {
                        setupPageA(); // defined in pageA.js
                    });
                });

                $('#loadPageB').on('click', function()
                {
                    $('#contents').load('pageB.html', function()
                    {
                        setupPageB(); // defined in pageB.js
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="contents"></div>
        <a id="loadPageA">Load Page A</a>
        <a id="loadPageB">Load Page B</a>
    </body>
<html> 
```

或者，如果您只想在加载 pageA.html 时运行 pageA.js，您可以在 pageA.html 本身中包含 pageA.js 脚本元素，如下所示：

pageA.html：

```
<div id="pageAContent">Page A</div>
<script type="text/javascript src="js/pageA.js"></script> 
```

pageB.html：

```
<div id="pageBContent">Page B</div>
<script type="text/javascript src="js/pageB.js"></script> 
```

base.html：

```
<html>
    <head>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function()
            {
                $('#loadPageA').on('click', function()
                {
                    $('#contents').load('pageA.html');
                });

                $('#loadPageB').on('click', function()
                {
                    $('#contents').load('pageB.html');
                });
            });
        </script>
    </head>
    <body>
        <div id="contents"></div>
        <a id="loadPageA">Load Page A</a>
        <a id="loadPageB">Load Page B</a>
    </body>
<html> 
```

动态脚本src解决方案：

base.html：

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript">
            function loadScript(script)
            {
                // Modify the existing script tag
                if($('#dynamicScriptTag').length != 0)
                {
                    $('#dynamicScriptTag').attr('src', script);
                }
                else // Create script tag
                {
                    $('<script>').attr('type', 'text/javascript')
                                 .attr('src', script)
                                 .attr('id', 'dynamicScriptTag')
                                 .appendTo('head');
                }
            }

            $(document).ready(function()
            {
                $('#loadPageA').on('click', function(event)
                {
                    event.preventDefault();
                    $('#contents').load('pageA.html', function()
                    {
                        loadScript('js/scriptA.js');
                        testScriptB(); // test if we can still call a function in scriptB.js
                    });
                });

                $('#loadPageB').on('click', function(event)
                {
                    event.preventDefault();
                    $('#contents').load('pageB.html', function()
                    {
                        loadScript('js/scriptB.js')
                        testScriptA(); // test if we can still call a function in scriptA.js
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="contents"></div>
        <a id="loadPageA" href="#">Load Page A</a>
        <a id="loadPageB" href="#">Load Page B</a>
    </body>
</html> 
```

pageA.html：

```
<div id="pageAContents">Page A</div> 
```

pageB.html：

```
<div id="pageBContents">Page B</div> 
```

js/scriptA.js：

```
console.log($('#pageAContents').text());
function testScriptA(){ console.log('Can still call testScriptA!'); } 
```

js/scriptB.js：

```
console.log($('#pageBContents').text());
function testScriptB(){ console.log('Can still call testScriptB!'); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:57:13.703

我认为你能做的最好的就是在**IF**这个页面是动态加载`<script src="js/pageX.js"></script>`的末尾添加。如果页面不是动态加载的，它可能会在之前加载并破坏您的 javascript。`pageX.html` **`jquery.js`**

 **或者您可以读取当前 URL 并根据此信息加载正确的脚本，如下所示：

```
var scriptPath;
var currentPage = window.location.pathname;

if (currentPage == "pageA.html")
{
    scriptPath = "pageA.js";
}
else if (currentPage == "pageB.html")
{
    scriptPath = "pageB.js";
}

var scriptElement = document.createElement("script");
scriptElement.setAttribute("type", "text/javascript");
scriptElement.setAttribute("src", scriptPath);

document.getElementsByTagName("head")[0].appendChild(scriptElement); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T02:27:28.223

我最终使用[Jinja](http://jinja.pocoo.org)（模板引擎）来放置 javascript 文件，如下所示：

base.html

```
<html>
  <body>
    <div id="contents">
      {% block contents %}
      {% endblock %}
    </div>
    <script src="js/jquery.js"></script>
      {% block scripts %}      
      {% endblock %}       
  </body>
</html> 
```

pageA.html

```
{% block contents %}
   ..page A contents..
{% endblock %}
{% block scripts %}
<script src="js/pageA.js"></script>
{% endblock %} 
```

如果您使用的是模板引擎，它可能是一个可行的解决方案。**

# html - 使用 CSS 选择器选择最后一个元素

> ID：16138973
> 
> 赞同：0
> 
> 时间：2013-04-22T03:29:29.030
> 
> 标签：html, css, css-selectors

有没有办法只使用 ONLY 来定位组中的最后 X 个元素`CSS`（假设我们不知道有多少元素）？

示例 - 定位 a 中的最后 3 个元素`ul`：

```
<ul>
  <li>Element 1</li>
  <li>Element 2</li>
  <li>Element 3</li>
  ...
  <li>Element X-2</li>
  <li>Element X-1</li>
  <li>Element X</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:32:45.887

使用[`:nth-last-child(N)`选择器](https://developer.mozilla.org/en-US/docs/CSS/%3anth-last-child)：

```
li:nth-last-child(-n+3) {
    /* ... */
} 
```

[看这个演示。](http://jsfiddle.net/f9rcc/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T03:37:47.997

这将为最后 3 个元素应用样式。 `[Demo](http://jsfiddle.net/4e9Ee/)`

```
li:nth-last-child(-n+3)
{
    ....
} 
```

**支持**

```
功能 Chrome Firefox (Gecko) IE Opera Safari
基本支持 4.0 3.5 (1.9.1) 9.0 9.5 3.2

```

# c++ - 活动对象 - 实施问题

> ID：16138974
> 
> 赞同：0
> 
> 时间：2013-04-22T03:29:29.457
> 
> 标签：c++, design-patterns

我正在尝试实现[Active Object 模式](http://en.wikipedia.org/wiki/Active_object)。在所有示例实现中，ActivationQueue 正在同步对消息队列的访问。我在想为什么要在这个班级里完成。为什么调度程序不同步对 ActivationQueue 的访问。它是唯一访问此 ActivationQueue 对象的对象。同步在这里可以非常简单。问题是 - 在调度程序或 ActivationQueue 本身内同步访问 ActivationQueue 的更好位置是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:49:57.610

在 QP/C++ 活动对象框架 ( [http://www.state-machine.com/qp](http://www.state-machine.com/qp) ) 中，这更简单。每个活动对象都拥有自己的事件队列，只要活动对象线程为空，该队列就会阻塞活动对象线程。当一个事件发布到活动对象队列时，队列解除阻塞。如果以这种方式解除了多个活动对象的阻塞，则调度留给底层多任务内核。这意味着活动对象可以根据分配给活动对象线程的优先级自由地相互抢占。这种方法干净、简单，并且正是 UML 规范所建议的在活动对象中处理 RTC（运行到完成）处理的方式。具体实现见 P-thread 版本，[http://www.state-machine.com/linux/](http://www.state-machine.com/linux/)或 Win32 版本在[http://www.state-machine.com/win32](http://www.state-machine.com/win32)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:57:15.143

虽然您是对的，在 Lavender 和 Schmidt 的原始方法中只有调度程序访问队列，但在队列中实现同步是更好的选择。有两个原因：

1.  同步受保护对象是一种更清晰的设计，因为问题（可能的不一致）及其解决方案（同步）得到了更好的约束。
2.  AO 有一些实现，其中请求被直接调度到队列（由外部实体），并且调度程序“仅”决定重新排序。

# php - cakephp 复杂查找查询示例

> ID：16138979
> 
> 赞同：0
> 
> 时间：2013-04-22T03:29:56.020
> 
> 标签：php, sql, cakephp, cakephp-1.3

我想在具有以下条件的 CakePHP 应用程序中的表上执行[find('all')查询：](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#find-all)

1- 主键值等于 17

和

2-表中另一列`my_column_id`的值是该列所有值的最大值`my_column_id`但小于`my_column_id`主键值等于17的数据的值

和

3-表中另一列`my_column_id`的值是该列所有值的最小值，`my_column_id`但大于`my_column_id`主键值等于17的数据的值

所以上面的查询应该给我 3 个结果。

是否有可能在一个查询中获得所有这些？还是我需要三个单独的查询？

我试过类似的东西：

```
$results = $this->Model->find('all', array(
    'conditions' => array(
        'MAX(Model.my_column_id) <' => 23,
        'Mddel.id' => 17,
        'MIN(Model.my_column_id) >' => 23
    )
)); 
```

`23`表示`my_column_id`主键等于 17 的数据的值

但这给了我以下错误：`SQL Error: 1111: Invalid use of group function`

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:24:46.130

通常，当我有复杂的查询时，我只会写出 SQL。我不能说速度，我不确定它是否不受欢迎，但你可以试试这个。

```
$this->Model->query('
    SELECT MAX(table.column), 
    MIN(table.column) 
    FROM table 
    WHERE table.id = '$id' 
'); 
```

此外，如果此控制器在模型之外，请确保加载正确的模型（将其放在查询上方）

```
$this->loadModel('Model'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:27:30.467

您不能在 where 子句中使用 MySQL 聚合函数（MAX、MIN 等）。

我认为最简单的方法是明确包含 GROUP BY 并使用 HAVING，如下所示：

```
$this->Model->find('all', array(
    'group' => 'Model.some_field HAVING MAX(Model.some_field) > 23 
        AND MIN(some_field) < 23'
)); 
```

（虽然这没有意义，但我不认为！）*

这就是你想要的。

托比

**更新**

[*] 我的意思是，我认为查询*大于*和*小于*一个值是没有意义的！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T03:39:12.977

您可以通过`conditions`在内部传递数组来做到这一点`find`。

**例子**

```
$this->Model->find('all',array
(
   'conditions' => array
   (
       'Model.field' => 17,
       'MAX(Model.field) < ' => 17,
       'MIN(Model.field) > ' => 17 
   )
)) 
```

**OP评论回复**

`SQL Error: 1305: FUNCTION NAX does not exist`

**解决**方法：去掉函数和括号或集合之间的所有空格`sql_mode="IGNORE_SPACE"`；

这导致了错误：

```
SELECT MAX (id) as something FROM Example 
```

这将正常工作：

```
SELECT MAX(id) as something FROM Example 
```

# javascript - 扩展一个 jQuery 插件，而不必触及原始插件代码

> ID：16138983
> 
> 赞同：4
> 
> 时间：2013-04-22T03:30:42.173
> 
> 标签：javascript, jquery

现在我正在使用一个很棒的 cookie 处理程序，我发现[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)用于 jquery。唯一的问题是，它只会按天设置 cookie。我希望能够绕过它并在某些情况下将它们设置为秒/小时，甚至可能设置为特定时间。

查看插件，我知道我可以在哪里专门对其进行更改。但我想知道是否有办法用我自己的自定义代码扩展插件，所以当我像平常一样调用插件时，我可以使用我设置的参数。整个想法是避免侵入初始脚本，因此如果作者确实及时发布了新版本，我可以相应地对其进行更新，并且不会丢失我在升级过程中可能忘记的任何更改。

在当前插件行 44-47 中有

```
if (typeof options.expires === 'number') {
                var days = options.expires, t = options.expires = new Date();
                t.setDate(t.getDate() + days);
            } 
```

我知道我可以直接破解它并做我想做的事。但这个想法再次是通过一些外部手段使用相同的脚本来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:43:35.563

正如其他人所建议的，我认为该插件已经支持您要添加的功能。但我要回答你的问题`> I am wondering is there a means of extending the plugin with my own custom code`：

该插件设置`$.cookie`为具有三个参数 ( `function (key, value, options)`) 的函数。你可以这样扩展它：

```
// in a js file after including `jquery.cookies.js`
(function () {
    var cookie = $.cookie;
    $.cookie = function (key, value, options) {
        // TODO: add your code here

        $.cookie = cookie;
        var out = $.cookie(key, value, options);
        $.cookie = this;
        return out;
    }
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:40:39.820

您可以将所需的秒数除以 86400。因此 30 秒使用：

```
$.cookie('the_cookie', 'the_value', { expires: 30/86400, path: '/' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:36:30.433

我不认为这个假设是正确的。

您可以使用

```
$.cookie('my-key', 'my-valye', {
    expires: new Date()
}) 
```

或者

```
var expires = new Date();
expires.setHours(expires.getHours() + 1);
$.cookie('my-key', 'my-valye', {
    expires: expires 
}) 
```

# c# - 根据布尔值更改椭圆的颜色

> ID：16138985
> 
> 赞同：2
> 
> 时间：2013-04-22T03:31:12.587
> 
> 标签：c#, wpf, datatrigger

```
<Grid Grid.Row="1" Width="500" Height="500">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Ellipse Fill="Red" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25"/>
    <Ellipse Fill="Red" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25" Grid.Row="1"/>
    <Ellipse Fill="Red" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25" Grid.Row="3"/>
    <Ellipse Fill="Red" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25" Grid.Column="4"/>
    <Ellipse Fill="Red" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25" Grid.Column="4" Grid.Row="4"/>
</Grid> 
```

鉴于上述 XAML，我希望当属性为真时点为绿色。我假设我会用 DataTrigger 来做，但我能想到的唯一方法是为每个椭圆复制它。对我来说这似乎很骇人听闻，并且想知道他们是否是更好的解决方案。每个椭圆都基于一个属性，但这似乎又是很多重复的代码。理想情况下，我想要的是这个视图来反映“站”列表的状态，使用布尔值来确定它们是否可用。每个状态都是单向的，并且在视图启动时不会改变。

我对 WPF 和 XAML 很陌生，无法提出一个优雅的解决方案。每次我尝试某事时我都会畏缩，因为它看起来像是一个完整的黑客攻击。

编辑：感谢@Alastair 的回答，我已经开始工作了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T03:44:44.877

所以我会做一个`UserControl`包含椭圆的自定义。

然后，您可以将数据触发器放入`UserControl`. 然后将`DataContext`自定义控件的 绑定到您的布尔属性，然后将 绑定`DataTrigger`到`DataContext`您的`UserControl`.

因此，您可以保持 XAML 干净。

编辑：

一个基本的用户控件。这应该在单独的文件中定义，而不是资源。只需右键单击项目 -> 添加 -> 新建项目...，然后选择 WPF UserControl。

```
<UserControl x:Class="Test_WPF.MyEllipseControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Ellipse  HorizontalAlignment="Center"
                  Height="25"
                  Margin="0,0,0,0"
                  Stroke="Black"
                  VerticalAlignment="Center"
                  Width="25" 
                  Fill="Red">
            <Ellipse.Style>
                <Style TargetType="Ellipse">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=IsAvailable}"
                                     Value="True">
                            <Setter Property="Fill"
                                    Value="Green" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Ellipse.Style>
        </Ellipse>
    </Grid>
</UserControl> 
```

然后你会使用它：

```
<local:MyEllipseControl DataContext="{Binding Path=Station1}" /> 
```

其中`local`命名空间只是您的本地项目命名空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T19:17:39.257

另一种方法是将填充直接绑定到您的布尔值并使用转换器根据需要更改样式。

您的转换器可能如下所示：

```
 class StatusToColor : IValueConverter
    {
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
            {
                SolidColorBrush retColor = new SolidColorBrush();
                retColor.Color = System.Windows.Media.Color.FromRgb(0, 0, 0);
                if ((bool)value)
                {
                     retColor.Color = System.Windows.Media.Color.FromRgb(255, 0, 0);
                }
                else
                {
                     retColor.Color = System.Windows.Media.Color.FromRgb(0, 128, 0);
                }
                return retColor;
            }

            public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
            {
                throw new NotImplementedException();
            }
} 
```

然后，您可以在您的 xaml 资源中定义转换器：

```
<Window>    
    <Window.Resources>
        <c:StatusToColor x:Key="MyConverter"/>
    </Window.Resources>
... 
```

并像这样设置您的绑定：

```
<Ellipse Fill="{Binding SomeProperty, Converter={StaticResource MyConverter}}" HorizontalAlignment="Center" Height="25" Margin="0,0,0,0" Stroke="Black" VerticalAlignment="Center" Width="25"/> 
```

# python - Python：在嵌套的 for 循环中只执行了 1 个循环

> ID：16138988
> 
> 赞同：2
> 
> 时间：2013-04-22T03:31:29.790
> 
> 标签：python

我有一个带有嵌套`for`循环的 python 脚本

```
 HostList = file('trylist.txt')
    DestHostList = file('trylist2.txt')
    for DestHost in DestHostList:
            DestHost = DestHost.strip()
            for HostName in HostList:
                    HostName = HostName.strip()
                    try:
                            if DestHost!=HostName:
                                    print HostName,DestHost

                            print "one loop finishes"
                    except Exception, e:
                            ExceptionHost.write(HostName+' -  '+DestHost+':    '+str(e)+'\n')       
                            print "exception"
                            #traceback.print_exc(file=sys.stdout) 
```

外部`for`循环似乎只执行一次。潜在的问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T04:33:26.627

外循环执行不止一次，但只有在第一次迭代中它有事情要做。在其余部分，内部循环不执行，给您留下它只运行一次的印象。

问题是您打开第一个文件 ，`trylist.txt`并在外循环的第一次迭代中完全读取它。在第二次迭代中，文件对象（类似于迭代器）已被“使用”。

尝试：

```
HostList = file('trylist.txt').readlines()  # now it's a list of lines, not an iterator
DestHostList = file('trylist2.txt')
for DestHost in DestHostList:
    DestHost = DestHost.strip()
    for HostName in HostList: 
```

如果文件很大并且您想避免将其存储在内存中，则可以每次都重新打开它：

```
DestHostList = file('trylist2.txt')
for DestHost in DestHostList:
    DestHost = DestHost.strip()
    HostList = file('trylist.txt')
    for HostName in HostList: 
```

`with`此外，使用语句在 python 中打开文件是一种好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:46:40.040

问题是您在第一次通过后已经用尽了内部循环中的第二个文件。

正如我所看到的，您正在尝试使用`try ... except ...`. 但是由于文件读取操作在块之外，所以你错过了它。

这是一个提前阅读所有文件内容的解决方案。我希望它会有所帮助：

```
host_list = file("trylist.txt").readlines()
dest_host_list = file("trylist2.txt").readlines()

for h in host_list:
    for d in dest_host_list:
        h,d = h.strip(),d.strip()
        if h != d:
            print h,d 
```

# r - R过滤掉具有缺失值的行

> ID：16138989
> 
> 赞同：2
> 
> 时间：2013-04-22T03:31:31.947
> 
> 标签：r

我有一个 csv 文件，其中（在一列中）缺少一些值，我想省略 data.file 中的相应行。

我以为通过写作

```
data <- read.csv(file="name.csv",head=TRUE,sep=";", na.strings = "NA") 
```

na.strings = "NA" 选项用 NA 替换缺失值，然后我可以使用

```
cleanData <- na.omit(data) or cleanData <- data[complete.cases(data), ] 
```

过滤掉缺失的部分。

但即使在应用了第一部分之后，即包括 na.strings = "NA" 选项，生成的数据帧仍然包含具有空条目而不具有 NA 条目的行。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:53:50.630

回答您在评论中提出的问题：

我相信你已经把`na.strings`争论的目的转过来了。它没有说明`R`如何替换`NA`s。相反，它告诉`R`输入文件中的哪些值*应该被视为* `NA`s。

* * *

例如，您可能会遇到`-1`用于指示数据丢失的 data.source。在这种情况下，您将使用`na.string='-1'`

如果你看`?read.csv`：

> na.strings
> 
> 要解释为 NA 值的字符串的字符向量。空白字段也被认为是逻辑、整数、数字和复杂字段中的缺失值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:04:43.430

尝试一下`data.frame.instance <- data.frame.instance[!is.na(data.frame.instance),]`，您应该得到一个没有任何 NA 的 data.fame。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T04:01:30.393

你用`na.strings`错了。要将空字段替换为`NA`，请执行`data[data == ""] <- NA`。

# android - Sqlite：无法在线打开文件

> ID：16138996
> 
> 赞同：1
> 
> 时间：2013-04-22T03:32:30.057
> 
> 标签：android, sqlite, android-sqlite

当我在 Android 上进行一些用户/压力测试时，偶尔会发生此错误。发生此错误后，/data 下的文件消失，系统服务器崩溃。我很好奇数据库“contacts2.db-mj7742599A4”的名称。通常它应该是contacts2.db。“*.db-mj7742599A4”是什么意思？任何人都可以帮忙吗？

```
02-28 19:21:43.161   660   695 E SQLiteLog: (14) cannot open file at line 30174 of [00bb9c9ce4]
02-28 19:21:43.169   660   695 E SQLiteLog: (14) os_unix.c:30174: (2) open(/data/data/com.android.providers.contacts/databases/contacts2.db-mj7742599A4) - 

02-28 19:21:43.520   397   409 I am_crash: [660,android.process.acore,572933,android.database.sqlite.SQLiteCantOpenDatabaseException,unable to open database file (code 14),SQLiteConnection.java,-2]
02-28 19:21:43.536   397  5671 I am_crash: [397,system_server,-1,java.lang.IllegalArgumentException,NULL,StatFs.java,-2] 
```

# vb.net - Visual basic.net 在 LAN 上的计算机之间发送字符串

> ID：16138997
> 
> 赞同：-1
> 
> 时间：2013-04-22T03:32:39.743
> 
> 标签：vb.net, chat, lan

我正在尝试制作一个程序来通过服务器/客户端方法控制计算机的基本功能。我只需要将字符串从服务器发送到客户端，反之亦然。我发现的每个示例都非常陈旧，不再有效，或者解释不清，或者在 C# 中。

我几乎有一个工作示例，但是我遇到了一个线程问题，在我打开从服务器到客户端或客户端到服务器的连接的线程后，它不允许我修改 UI 中的元素。不知道如何解决这个问题，我没有选择。

本质上，我需要一种在服务器/客户端架构中将文本从一个 IP/端口发送到另一个的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:42:46.893

The clue to solving your issue is probably here: "I almost have a working example as is, but I'm running into a threading issue where it won't let me modify elements in the UI after I've opened my thread for the connection from server to client or client to server."

You cannot access controls (UI elements) created on one thread directly from another thread. So if you have another thread and you want to update an element in the UI, you need to use the [Control.BeginInvoke Method](http://msdn.microsoft.com/en-us/library/ae5kdt95.aspx).

You didn't post any code, so I won't try and give you an example that may be utterly useless in your case, but there's a good article on MSDN here - [How to: Make Thread-Safe Calls to Windows Forms Controls](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.110%29.aspx). This is for Windows Forms, nut the principals are the same for any application.

# algorithm - XOR 链表究竟是如何工作的？

> ID：16138998
> 
> 赞同：30
> 
> 时间：2013-04-22T03:32:42.123
> 
> 标签：algorithm

以下[链接](http://www.geeksforgeeks.org/xor-linked-list-a-memory-efficient-doubly-linked-list-set-1/)对此进行了说明。
据说该实现通过存储前一个地址和下一个地址（例如 nxp）的 XOR 来工作，而不是分别存储（前一个和下一个地址）。但是，据说进一步的实现是通过对前一个地址进行**异**或运算来工作的和nxp，为了得到*下一个地址*。

但这实际上不是使用 与拥有前一个和下一个指针**相同的空间吗？**

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-22T03:35:45.887

在双向链表中，每个节点存储两个指针：prev 和 next。在 XOR 链表中，每个节点存储一个“指针”，即 prev 和 next 的 XOR（或者如果其中一个不存在，则只是另一个（与 0 的 XORing 相同））。您仍然可以双向遍历 XOR 链表的原因取决于 XOR 的属性和双链表中固有的信息冗余。

* * *

假设您的 XOR 链表中有三个节点。

A 是头部，并且有一个未混淆的指向 B 的指针（B XOR 0，仅下一个）

B 是中间元素，具有指向 A 和指向 C 的指针的异或。

C 是尾部，并且是指向 B 的未混淆指针（0 XOR B，仅 prev）

当我遍历这个列表时，我从 A 开始。当我前往 B 时，我记下 A 在内存中的位置。当我希望前往 C 时，我将 B 的指针与 A 异或，授予我指向 C 的指针。然后我记下B在记忆中的位置并前往C。

这是因为 XOR 具有在应用两次时自行撤消的属性：C XOR A XOR A == C。另一种思考方式是，双向链表不存储单链表不存储的额外信息（因为它只是存储所有先前的指针都作为内存中其他地方的下一个指针的副本），因此通过利用这种冗余，我们可以拥有双链表属性，其中只有所需的链接数。**但是，**这仅在我们从头或尾开始 XOR 链表遍历时才有效——就好像我们只是跳到中间的一个随机节点，我们没有开始遍历所需的信息。

* * *

虽然 XOR 链表具有内存使用量较小的优点，但它也有缺点——它将混淆编译器、调试和静态分析工具，因为除了代码之外的任何指针都无法正确识别两个指针的 XOR。它还减慢了指针访问速度，必须首先执行 XOR 操作才能恢复真正的指针。它也不能在托管代码中使用——异或混淆指针不会被垃圾收集器识别。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-17T14:12:13.093

让我们考虑以下 XOR 列表

A->B->C->D

假设您在下面以这种格式创建了节点

关键字|链接|

```
A|0^addr(B)| ->  B|addr(A)^addr(C)|  ->  C|addr(B)^addr(D)| -> D|addr(C)^0| 
```

***CASE #1:[Forward Traversal]****现在假设你在 B (current_node=>B) 想要访问 C ，所以你需要 C 的地址。你将如何获得？*

> **Addressof(Next_node) = addressof(Prev_node) ^ Current_node(Link)**

```
addr(A)^ ( addr(A)^ addr(C) )
=>(addr(A) ^ addr(A)) ^ addr(C) 
=> 0 ^ addr(C)
=>addr(C) 
```

***CASE #2: [Backward traversal]****现在假设你在 C (current_node=> C) 想要访问 B ，所以你需要 B 的地址。你将如何获得？*

> **Addressof(Prev_node) = addressof(Next_node) ^ Current_node(Link)**

```
addr(D) ^ ((addr(B) ^ addr(D)) 
=> (addr(D)^ addr(D)) ^ addr(B)
=> 0^addr(B)
=> addr(B) 
```

**遍历：** *要遍历整个列表，您将需要 3 个指针 **prevPtr 、 currPtr 、 nextPtr**来存储从头开始的相对当前、上一个和下一个节点的地址。然后在每次迭代中，这些指针需要移动到前面的一个位置。*

```
struct Node *currPtr = head;
struct Node *prevPtr = NULL;
struct Node *nextPtr;

printf ("Following are the nodes of Linked List: \n");

while (currPtr != NULL)
{
    // print current node
    printf ("%d ", currPtr->key);

    // Save the address of next node
    nextPtr = XOR (prevPtr, currPtr->link);

    //move prevPtr and currPtr one position for next iteration

    prevPtr = currPtr;
    currPtr = nextPtr;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T03:39:13.023

> 但这实际上不是使用与拥有前一个和下一个指针相同的空间吗？

不——它使用了大约一半的空间，因为“prev”和“next”的异或结果的大小等于两者中较大者的大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-22T03:40:31.610

XOR 有一个非常特殊的性质，即在给定`a XOR b = c`的情况下，计算第三个变量只需要两个（任意两个）变量，但*有一些限制*。请参阅[XOR 交换算法](https://en.wikipedia.org/wiki/XOR_swap_algorithm)以了解其工作原理。

在这种情况下，前一个（或下一个）指针*仍然必须被携带*，但只能通过遍历计算而不是作为单独的成员。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-22T03:37:47.047

双链表需要为 N 个节点存储 2*N 个指针，加上至少一个额外的指针（头，或者可能是头和尾）。

XOR 链表需要为 N 个节点存储 N 个指针，加上至少两个额外的指针（头和最后访问的节点，或者可能是头和尾和最后访问的节点）。遍历时，您存储一个节点（最后访问的节点），但是当您转到下一个节点时，您使用现在的前一个节点的地址重写它。

# c# - 在 C# 中，您可以将 Or 放在“where”接口约束中吗？

> ID：16138999
> 
> 赞同：5
> 
> 时间：2013-04-22T03:32:44.413
> 
> 标签：c#, generics, interface

如果我有这个代码：

```
public interface IJobHelper
{
    List<T> FilterwithinOrg<T>(IEnumerable<T> entities) where T : IFilterable;
} 
```

有什么支持做这样的事情：

```
public interface IJobHelper
{
    List<T> FilterwithinOrg<T>(IEnumerable<T> entities) where T : IFilterable or ISemiFilterable
} 
```

所以它会接受任何支持两个接口之一的东西。我基本上是在尝试创建一个重载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T03:54:01.020

据我所知，您可以使用*AND*逻辑而不是*OR*。

**AND**（在这种情况下，*T*必须是*IFilterable* **和** *ISemiFilterable*的子级）

```
public interface IJobHelper
{
    List<T> FilterwithinOrg<T>(IEnumerable<T> entities) where T : IFilterable, ISemiFilterable
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T03:33:41.363

不，该语言不支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T03:36:10.700

我想说的最简单的方法是，如果您的两个接口都是同一个父接口的子接口。

```
public interface IFilterable { }

public interface IFullyFilterable : IFilterable { }

public interface ISemiFilterable : IFilterable { }

... where T : IFilterable { } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T03:39:23.753

该语言不支持在`where`子句中将接口/类“oring”在一起。

您需要使用不同的方法名称分别声明它们，以便签名不同。

```
public interface IJobHelper
{
    List<T> FilterwithinOrg<T>(IEnumerable<T> entities) 
        where T : IFilterable
    List<T> SemiFilterwithinOrg<T>(IEnumerable<T> entities) 
        where T : ISemiFilterable
} 
```

或者，您可以在两个接口上实现一个通用接口。这与上面的内容不同，因为如果您需要一个不包含在`IBaseFilterable`.

```
public interface IBaseFilterable { }
public interface IFilterable : IBaseFilterable { }
public interface ISemiFilterable : IBaseFilterable { }

public interface IJobHelper
{
    List<T> FilterwithinOrg<T>(IEnumerable<T> entities)
        where T : IBaseFilterable
} 
```

我不知道上下文，但上面可能是您正在寻找的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T03:38:36.110

您可以添加另一个空的基本接口，这两个接口都派生自...

```
 interface baseInterface {}
 interface IFilterable: baseInterface {}
 interface ISemiFilterable: baseInterface {} 
```

然后要求泛型类型约束中的类型是基接口

```
 List<T> FilterwithinOrg<T>(IEnumerable<T> entities) where T : baseInterface 
```

唯一的缺点是编译器不允许您在不强制转换的情况下使用来自任何派生接口的方法...