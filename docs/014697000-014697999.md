# StackOverflow 问答 14697000-14697999

# sql - 为什么在脚本组件中使用存储过程时出现未提供参数的错误？

> ID：14697001
> 
> 赞同：1
> 
> 时间：2013-02-04T22:33:32.737
> 
> 标签：sql, stored-procedures, crystal-reports, ssis

问题：尝试使用 SQL Server 2005 BIDS 创建 SSIS 作业。作业包括一个脚本任务和一个电子邮件任务。脚本任务在最后一步失败并出现此错误：

> 未能打开行集。详细信息：ADO 错误代码：0x 来源：Microsoft OLE DB Provider for SQL Server 描述：过程或函数“usp_xtal_InHouse_Penetration_Summary”需要参数“@DateStart”，但未提供该参数。
> 
> SQL 状态：42000 本机错误：无法打开行集。文件 C:\DOCUME~1\TEMP~1.SUM\LOCALS~1\Temp\1\auto_Inhouse_Leads_Penetration {5DA4C113-6AFC-4EB2-94E8-7D0F12E03C52}.rpt 中的错误：无法打开行集。

我相信这个问题是由于被调用的报告正在运行存储过程，我不确定报告是否真的会将参数传递给 SP。我认为这是因为错误是一个 SQL 错误，说明它正在寻找的第一个参数没有被提供。SP 仅查找在此脚本中声明的参数，并且脚本以与 SP 完全相同的顺序声明、设置和加载参数。

我们有其他报告正在运行类似的 SSIS 作业，但它们都没有使用 SP。

任何想法将不胜感激。

我提供的以下脚本在不同的地方有几个 msgbox()，检查变量是否正确加载以及脚本是否执行到该点。它在最后一个错误中失败并出现上述错误。

```
Public Class ScriptMain
    Public Sub Main()
        '
        Dim CrystalReportViewer1 As New CrystalDecisions.Windows.Forms.CrystalReportViewer
        Dim DiskOpts1 As New CrystalDecisions.Shared.DiskFileDestinationOptions
        Dim myExportOptions1 As New CrystalDecisions.Shared.ExportOptions

        DiskOpts1.DiskFileName = "\\10.200.0.7\c$\Jobs\Arrivals\WeeklyInhousePenetrationReport.pdf"
        myExportOptions1.ExportFormatType = myExportOptions1.ExportFormatType.PortableDocFormat
        myExportOptions1.ExportDestinationType = CrystalDecisions.Shared.ExportDestinationType.DiskFile
        myExportOptions1.ExportDestinationOptions = DiskOpts1

        ' Verify the path to the Crystal Report's .RPT file:
        Dim strReportPath1 As String = "\\10.200.0.7\c$\Jobs\Arrivals\auto_Inhouse_Leads_Penetration.rpt"

        If Not System.IO.File.Exists(strReportPath1) Then
            Throw (New Exception("Unable to locate report file:" & _
            vbCrLf & strReportPath1))
        End If

        ' Load the Crystal report's .RPT file:
        Dim cr1 As New CrystalDecisions.CrystalReports.Engine.ReportDocument

        'Dim ParamVal1 As New ParameterDiscreteValue
        'Dim ParamVal2 As New ParameterDiscreteValue
        Dim ParamVal3 As New ParameterDiscreteValue
        Dim ParamVal4 As New ParameterDiscreteValue
        Dim ParamVal5 As New ParameterDiscreteValue

        cr1.Load(strReportPath1)

        'Set the logon credentials of the main report---change these values
        LogonToDatabase(cr1.Database.Tables, "SomeInstance", "SomeUserName", "SomePassword")

        'ParamVal1.Value = 2
        'ParamVal2.Value = False
        ParamVal3.Value = DateAdd(DateInterval.Day, -15, Date.Today)
        ParamVal4.Value = DateAdd(DateInterval.Day, -8, Date.Today)
        ParamVal5.Value = "All"

        MsgBox(ParamVal3.Value, , "Param 3")  'Good to here

        'cr1.SetParameterValue("param_SiteID", ParamVal1)
        'cr1.SetParameterValue("param_Detail", ParamVal2)
        cr1.SetParameterValue("DateStart", ParamVal3)
        cr1.SetParameterValue("DateEnd", ParamVal3)
        cr1.SetParameterValue("Agent", ParamVal3)

        MsgBox(ParamVal4.Value, , "ParamVal4")  'Good to here

        ' Set the CrystalReportViewer's appearance and set the ReportSource:
        ' This may not be needed but I kept them anyhow
        CrystalReportViewer1.ShowRefreshButton = False
        CrystalReportViewer1.ShowCloseButton = False
        CrystalReportViewer1.ShowGroupTreeButton = False

        CrystalReportViewer1.ReportSource = cr1

        MsgBox(ParamVal5.Value, , "ParamVal5")  'Good to here

        cr1.Export(myExportOptions1)            '  Failing at this step

        MsgBox(ParamVal3.Value, , "ParamVal3")  'Never gets here
        '
        Dts.TaskResult = Dts.Results.Success
    End Sub

    Private Sub LogonToDatabase(ByVal ReportTables As CrystalDecisions.CrystalReports.Engine.Tables, ByVal ServerName As String, ByVal UserId As String, ByVal Password As String)
        ' To Supply Logon Information to each and every Tables used in the Report
        Dim myTable As CrystalDecisions.CrystalReports.Engine.Table
        Dim myConnectionInfo As New CrystalDecisions.Shared.ConnectionInfo()
        Dim myLogonInfo As New CrystalDecisions.Shared.TableLogOnInfo()
        myConnectionInfo.UserID = UserId
        myConnectionInfo.Password = Password
        myConnectionInfo.ServerName = ServerName
        myLogonInfo.ConnectionInfo = myConnectionInfo
        For Each myTable In ReportTables
            myTable.ApplyLogOnInfo(myLogonInfo)
        Next    

    End Sub
End Class 
```

# php - 通过 PHP 在其他 div 之后插入 div

> ID：14697003
> 
> 赞同：1
> 
> 时间：2013-02-04T22:33:37.560
> 
> 标签：php, css, wordpress, loops, css-selectors

我在 Wordpress 中有一个循环代码，它显示了我所有的 wordpress 帖子/div，它看起来像这样：

`<?php if ( have_posts() ) : ?> <?php while ( have_posts() ) : the_post(); ?>`

然后当然在那个循环中，有帖子所在的我的 div，然后是一些结束 php 代码。但这是我想要做的，我是如何做到的，以及为什么它不起作用。

我的主页上有大约 60 个帖子，每个帖子都有相同的 div 类（当然），我想在我的一些帖子 div 之前或之后插入其他 div。回想起来，我这样做的方式非常愚蠢。

我使用 CSS`nth-child`来选择我的 div 帖子，然后给它们留出边距或清除，以便为我要插入的其他 div 腾出空间。因此，例如，我将有 60 个帖子/div，每行 5 个 div.. 在第 10 个帖子上，我会说一个`margin-left`像素，以便为需要插入这些帖子中的 div 腾出空间。然后，当它下来将 div 插入开放点时，我会将它浮动到右侧（因为需要将 div 插入右侧）以及一个`margin-top`像素，直到它正确地适合开放点。

我认为这可以正常工作，但是由于我的帖子 div 宽度是百分比而不是像素（我的帖子是需要根据分辨率重新缩放的缩略图，所以我使用了百分比），插入到我的帖子中的 div 不会是正确的当窗口改变大小或以不同的分辨率查看时发现......那我做了什么？将需要在这些帖子旁边插入的每个 div 的所有边距值更改为百分比而不是像素...这*几乎*奏效了..唯一的问题是当您重新调整浏览器时，插入到我的帖子中的 div 会向上或向下移动 5-20 像素.. 太糟糕了！

然后今天晚些时候，我顿悟了.. 它是使用 PHP 在这些帖子中插入 div 而不是我愚蠢的 CSS 意识形态，我不知道该怎么做，但我确实认为出于某种奇怪的原因这是可能的.

所以我需要做的是将这些名为“doublearticlewrapperad”的 div 类插入到这些其他 div 类中，这些类是帖子。这些帖子类被称为“doublearticlewrapper”。我希望能够将我的 doublearticlewrapperad div 类定位在其他 doublearticlewrapper 循环帖子/div 类中。所以说我想在第 6、29 和 40 个 doublearticlewrapper post div 之后插入一个 doublearticlewrapperad div。我希望能够轻松地做到这一点。如果可能的话。

只是为了消除任何混乱..

doublearticlewrapperad = divs 我想在通过我的 WordPress Loop 显示的 div 类之后插入.. 和

articlewrapperad= 通过我的 wordpress 循环显示为帖子的 div。

如果有任何方法可以做到这一点，我认为 php 将是正确的方法，但如果事实证明我错了，并且有另一种方法或不同的代码可以做到这一点..请让我知道。伙计们，任何帮助都会真正受到赞赏，我真的是认真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:41:26.047

我认为像下面这样的东西应该可以工作。请注意，我删除了您拥有的 if 语句，这非常无用，因为您随后使用 while 语句重复检查。

```
$insert_after = array(6,29,40);
$post_count = 0;
while ( have_posts() ) {
    if (in_array($post_count, $insert_after)) {
        //code to output your doublearticlewrapperad should go here
    }
    // output the post
    the_post(); 
    $post_count++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:07:11.377

试试这个芽！

```
$count = 0;
while ( have_posts() ) {
    if ( ($count % 9) == 0 ) { //this will show anything you add on the condition in every 9th posts.
        //code to output your doublearticlewrapperad should go here
    }
    // output the post
    the_post(); 
    $count++;
} 
```

干杯!

# macos - 作用于脚本参数中给出的每个第 n 个文件

> ID：14697009
> 
> 赞同：0
> 
> 时间：2013-02-04T22:34:06.243
> 
> 标签：macos, bash, for-loop

我有一个要启动的 bash 脚本，它使用一些文件作为参数。然后我需要将该列表的每个*第 n 个*文件添加到一个数组中。

它考虑过使用`for`循环，但似乎它一次只能做这两件事中的一件。当然，我希望生成的代码尽可能简单和小，但唯一的先决条件是它必须在 bash 中完成，并且只能使用系统附带的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:42:29.063

您可以使用间接变量引用以数字方式引用参数：

```
selectedargs=()
n=4
for ((i=1; i<$#; i+=n)); do
    selectedargs+=("${!i}")
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:41:23.570

我认为`for`循环非常合适。在这里， for `n=9`，我创建一个包含数字 0 到 99 的数组，然后使用 for 循环创建一个包含原始数组的每个第 9 个数字的数组：

```
x=( {0..99} )
y=()
n=9
for ((i=0; i<${#x[@]}; i=i+n)); do
    y+=( "${x[i]}" )
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:59:09.630

由于文件名是参数，您可以使用`shift`丢弃不需要的参数：

```
#!/bin/bash

files=()
n=8
while (( $# > 0 )); done
   files+=( $1 )
   shift $n || shift $#
done 
```

额外的`shift`是必要的，因为`shift`如果它的参数大于剩余参数的数量，则什么都不做。

# uitableview - UITableView - didSelectRowAtIndexPath 仅在点击标签时触发

> ID：14697012
> 
> 赞同：0
> 
> 时间：2013-02-04T22:34:16.723
> 
> 标签：uitableview, ios6

我有一个简单的 tableView。如果我点击标签（左侧），didSelectRowAtIndexPath 触发正常。当我点击右侧（文本字段）时它不会触发。

我无法弄清楚我缺少什么。我创建和选择单元格的代码如下：

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

        UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 150, 30)];
        textField.delegate = self;
        textField.returnKeyType = UIReturnKeyDone;
        textField.borderStyle = UITextBorderStyleNone;
        cell.accessoryView = textField;
        textField.text = [NSString stringWithFormat:@"%d ", indexPath.row];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"Line %d", indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"%s", __FUNCTION__);
    currentIndexPath = indexPath;
    NSLog(@"didSelect currentIndexPath.section is %i", currentIndexPath.section);
    NSLog(@"didSelect currentIndexPath.row is %i", currentIndexPath.row);
} 
```

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:59:08.450

我很确定这是设计使然。在一行中的 UITextField 内点击不会自动选择该行。如果您的行有附件按钮，[点击它们也不会选择该行。](https://stackoverflow.com/q/14016136/1523962)

*编辑*

如果您想知道包含活动 TextField 的 TableViewCell 的索引路径，请将其添加到您的 textFieldShould/DidBeginEditing：

```
id cellContainingFirstResponder = textField.superview.superview ;
NSIndexPath* indexPathContainingFirstResponder = [self.tableView indexPathForCell:cellContainingFirstResponder] ; 
```

# git - 在 gitweb 中，如何在合并提交上进行差异时设置父级？

> ID：14697015
> 
> 赞同：1
> 
> 时间：2013-02-04T22:34:27.017
> 
> 标签：git, gitweb

请注意，这个问题是关于 GITWEB，而不是 git。我知道如何在 git 中执行此操作，但我希望能够在 gitweb 中执行它，以便我可以轻松地向与我一起工作的人展示我的更改。

如果我有一棵看起来像这样的树：

```
*--C--D     master
 \     \ 
  *-A---B   proj-1
        ^
        merge commit, has 2 parents 
```

我希望能够看到 B 和 D 之间的差异。这应该显示 A & B 与 C & D 的变化。但是，当我使用 git web （指定提交哈希）时，它只显示了 D 中的内容. 在合并提交上使用 commitdiff 时，有什么方法可以设置父级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T20:55:45.437

我知道这是一个老问题，但我可能有答案...尝试将 hp 参数添加/更改为 URL 中的新父 SHA：

```
https://gitweb.server.com/?p=REPONAME;a=commitdiff;h=SHA;hp=PARENTSHA 
```

这适用于我的 gitweb 服务器。

# java - 设计和编码一个可以执行非同步或同步任务的任务调度程序

> ID：14697020
> 
> 赞同：3
> 
> 时间：2013-02-04T22:34:56.853
> 
> 标签：java, task, synchronized

这是一个面试问题，这意味着这可以在很短的时间内完成。我想在这里问，因为如果被问到我不知道该怎么办。

**“设计和编写一个可以执行非同步或同步任务的任务调度程序”**

请发挥您的想象力/假设并分享您的想法和评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:45:11.083

这个问题是故意含糊不清的，它应该表明你在设计和解决问题方面有多好，你做了什么样的假设，你如何证明它们的合理性等等。没有一个好的答案。这是一个接近问题的问题。

这就是我的看法：

1.  我的调度器可以任意取`Runnable`或`Callable<V>`，我将实现[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)，因为它似乎是解决问题的一个很好的抽象。我正在使用尽可能多的标准类来使 API 可移植且易于使用。

2.  通过*非*同步和*同步*我理解：安全运行并发和那些需要排他锁。即调度器不允许同时运行两个*同步*的任务。

3.  同步任务和非同步任务之间的区别将使用标记界面进行。注释也很好，但在运行时更难提取。

4.  我不会给你完整的实现，但它可能会包含一些标准`ScheduledExecutorService`，并为同步任务提供额外的同步。我想`ConcurrentMap<Class, Semaphore>`会的。在运行标记为*同步*的任务之前，我确保没有同时运行其他*同步*任务。我阻止并等待或拒绝（这可以配置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:44:26.560

我会使用 ExecutorService，因为它是内置的，并且可以执行您想要的大部分操作。它不关心这些任务是否使用同步。

# email - 有没有办法删除 kohana 在电子邮件中设置的返回路径？

> ID：14697022
> 
> 赞同：2
> 
> 时间：2013-02-04T22:35:01.197
> 
> 标签：email, kohana, swiftmailer, sendgrid, return-path

我们的网站使用`Kohana`并且`php`我们正在使用`sendgrid`发送交易电子邮件。由于`gmail`我们遇到了大量垃圾邮件问题，我们只发送选择加入的电子邮件并且打开​​率很高。潜在问题之一是我们的电子邮件似乎在标题中有两个返回路径：

1.  被我们设定在`Kohana`
2.  被 插入`sendgrid`。

`Sendgrid`表示当他们发送消息时，为了处理退回管理，他们接管了“信封”。但是我们想不出办法让 Kohana 不插入这个。有什么建议么？代码示例：Kohana 使用 Swift 发送邮件。我们现在如何发送它们如下。我们已尝试删除回复通过

```
$message->headers->set('reply-to', ''); 
```

但它似乎不起作用。有趣的是，将其设置为非空值会改变它，但似乎没有办法完全摆脱它。

此功能的完整代码：

```
/**
 * Send an email message.
 *
 * @param   string|array  recipient email (and name), or an array of To, Cc, Bcc names
 * @param   string|array  sender email (and name)
 * @param   string        message subject
 * @param   string        message body
 * @param   boolean       send email as HTML
 * @param   string        Reply To address. Optional, default null, which defaults to From address
 * @return  integer       number of emails sent
 */
public static function send($category, $to, $from, $subject, $message, $html = FALSE, $replyto = null)
{
    // Connect to SwiftMailer
    (email::$mail === NULL) and email::connect();

    // Determine the message type
    $html = ($html === TRUE) ? 'text/html' : 'text/plain';

// Append mixpanel tracking pixel to html emails
if ($html) {
  $mixpanel_token = FD_DEV_MODE ? "08c59f4e26aa718a1038459af75aa559" : "d863dc1a3a6242dceee1435c0a50e5b7";
  $json_array = '{ "event": "e-mail opened", "properties": { "distinct_id": "' . $to . '", "token": "' . $mixpanel_token . '", "time": ' . time() . ', "campaign": "' . $category . '"}}';
  $message .= '<img src="http://api.mixpanel.com/track/?data=' . base64_encode($json_array) . '&ip=1&img=1"></img>';
}

    // Create the message
    $message = new Swift_Message($subject, $message, $html, '8bit', 'utf-8');

// Adding header for SendGrid, added by David Murray
$message->headers->set('X-SMTPAPI', '{"category" : "' . $category . '"}');

    if (is_string($to))
    {
        // Single recipient
        $recipients = new Swift_Address($to);
    }
    elseif (is_array($to))
    {
        if (isset($to[0]) AND isset($to[1]))
        {
            // Create To: address set
            $to = array('to' => $to);
        }

        // Create a list of recipients
        $recipients = new Swift_RecipientList;

        foreach ($to as $method => $set)
        {
            if ( ! in_array($method, array('to', 'cc', 'bcc')))
            {
                // Use To: by default
                $method = 'to';
            }

            // Create method name
            $method = 'add'.ucfirst($method);

            if (is_array($set))
            {
                // Add a recipient with name
                $recipients->$method($set[0], $set[1]);
            }
            else
            {
                // Add a recipient without name
                $recipients->$method($set);
            }
        }
    }

    if (is_string($from))
    {
        // From without a name
        $from = new Swift_Address($from);
    }
    elseif (is_array($from))
    {
        // From with a name
        $from = new Swift_Address($from[0], $from[1]);
    }

    // Reply To support, not standard in Swift, added by Soham
    if (!$replyto) $replyto = $from;

    $message->setReplyTo($replyto);

    return email::$mail->send($message, $recipients, $from);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:53:58.770

这不是一个真正的 Kohana 问题，而是一个 Swiftmailer 问题，因为 Swiftmailer 不是 Kohana 框架的标准。根据[Swiftmailer 文档](http://swiftmailer.org/docs/messages.html)，您可以明确设置/获取 Return-Path：

```
$message->setReturnPath('bounces@address.tld'); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T03:01:15.887

我只想说谢谢你间接地为我提供这个解决方案..

```
 // Adding header for SendGrid, added by David Murray
$message->headers->set('X-SMTPAPI', '{"category" : "INSERT CATEGORY HERE"}'); 
```

Sendgrid 网站上的 X-SMTPAPI 使用文档很烂。

# scheme - 什么构成了 DrRacket 编程语言的核心

> ID：14697025
> 
> 赞同：9
> 
> 时间：2013-02-04T22:35:20.057
> 
> 标签：scheme, racket

Racket 编程语言的核心是什么？核心是基于任何带有所有附加功能的 RnRS 规范，例如基于该微小核心的众多序列方法，还是语言核心的参考部分中的所有内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T23:59:48.190

`#%kernel`Racket 建立在内置模块导出的核心语言之上。内核语法形式在[完全扩展程序](http://docs.racket-lang.org/reference/syntax-model.html?#%28part._fully-expanded%29)的文档中进行了描述。内核模块还导出了大量的原始函数，例如`cons`、`vector-ref`和`make-struct-type`。

这些句法形式和函数中的大多数也是 Racket 基础语言 ( `racket/base`) 的一部分，因此它们记录在 Racket 参考中。原始函数没有被标记为内核语言的一部分，因为它主要被认为是实现细节。另一方面，原始句法形式被特别记录，因为它们是唯一出现在`expand`.

# php - 如何替换对象的受保护属性？

> ID：14697026
> 
> 赞同：0
> 
> 时间：2013-02-04T22:35:27.127
> 
> 标签：php, object

我有一个对象，它有一个名为`$_items`. 它包含更多对象的数组。

```
protected $_items => array(object1, object2, object3); 
```

`$_items`我的目标是根据对象中的值进行排序`$_items`。

```
protected $_items => array(object3, object2, object1); 
```

分离`$_items`，排序，然后将其添加回原始对象（或原始对象的精确副本）的正确方法是什么。

我已经弄清楚了排序部分。对我来说真正的问题是添加`$_items`回一个与原始对象完全相同的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:45:22.767

您不必分离它，您可以`uasort`使用自定义函数来代替：

```
uasort($this->_items, 'mySortFunction');

function mySortFunction($a, $b) {
    // logic for comparing goes here
    // $a and $b are items being compared in your array
} 
```

在这里阅读更多：http: [//php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)

# ruby-on-rails - rails“root”函数到底是在哪里定义的？

> ID：14697028
> 
> 赞同：2
> 
> 时间：2013-02-04T22:35:39.840
> 
> 标签：ruby-on-rails, ruby, scope, rails-routing

我在 Rails 应用程序中看到类似以下内容：

```
Application.routes.draw do
    root :to => "accounts#index"
end 
```

我在[这里](http://guides.rubyonrails.org/routing.html#using-root)被告知，如果“/”是所要求的路径，这将定义 Rails 路由到的位置。但是，在 rails 代码中定义的这个“根”函数到底在哪里？我不明白要让这个技巧发挥作用涉及哪些范围界定问题。

我可以看到一个块正在传递给`draw`函数。所以我假设`draw`函数调用`yield`来执行传递的块。但我仍然不确定为什么该`root`函数会神奇地在传递的块的范围内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:05:01.567

`root`定义在 上`ActionDispatch::Routing::Mapper::Base`，包含在 中`ActionDispatch::Routing::Mapper`。

幕后发生的事情比乍看之下要多一些。

如果我们看一下 的定义`draw`，我们就会明白为什么：

```
# action_dispatch/routing/route_set.rb
def draw(&block)
  # ...
  eval_block(block)
  # ...
end 
```

该块被转换为一个 proc (with `&`) 并传递给`eval_block`它被定义得更远一点：

```
def eval_block(block)
  # ...
  mapper = Mapper.new(self)
  # ...
  mapper.instance_exec(&block)
end 
```

因此，事实证明，`yield`根本没有使用。我们传递给的块`Application.routes.draw`只是在`ActionDispatch::Routing::Mapper`.

如果我们添加`puts self`到我们的`config/routes.rb`，我们可以看到这个：

```
Application.routes.draw do
  puts self
end 
```

当我们运行时，`rake routes`我们会得到类似于以下的内容：

```
#<ActionDispatch::Routing::Mapper:0x007feadf52cbd8>
# ... 
```

如需进一步阅读，请参阅：

[http://ruby-doc.org/core-1.8.7/Object.html#method-i-instance_exec](http://ruby-doc.org/core-1.8.7/Object.html#method-i-instance_exec) [https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/route_set .rb#LC296](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/route_set.rb#LC296) [https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#LC336](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#LC336) [http://www.amazon.com/Metaprogramming-Ruby-Program-Like -优点/dp/1934356476](https://rads.stackoverflow.com/amzn/click/com/1934356476)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:47:29.677

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb)

```
def root(options = {})
  options = { :to => options } if options.is_a?(String)
  match '/', { :as => :root, :via => :get }.merge!(options)
end 
```

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing.rb)

```
module Routing
  autoload :Mapper, 'action_dispatch/routing/mapper' 
```

# javascript - 如何获取之前的H3标签

> ID：14697029
> 
> 赞同：1
> 
> 时间：2013-02-04T22:35:46.463
> 
> 标签：javascript, jquery

我有这个代码：

```
 <nav role="nav" id="primary-nav" class="overview">
    <h3 class="section active">
        <span class="menu-toggle open"></span>
        <span data-content="the-basics">The Basics</span>
    </h3>
        <ul class="active">
            <li><a href="#" class="nav-link" data-content="0">Introduction</a></li>
            <li><a href="#" class="nav-link" data-content="1">A Chapter in the Zeitgeist Movement</a></li>
        </ul>
    <h3 class="section">
        <span class="menu-toggle"></span>
        <span data-content="setting-up-a-national-chapter">Setting up a National Chapter</span>
    </h3>
    <ul>
        <li><a href="#" class="nav-link" data-content="0">Gathering Volunteers &amp; Social Media</a></li>
    </ul>
</nav> 
```

和这个javascript代码

```
 // Load page
  $('a.nav-link').on('click', function( event ) {
      event.preventDefault();
      var $this = $(this);
      var parent = this.parentNode;
      console.log(parent);
      var dataContent = $this.attr("data-content");
      console.log(dataContent);
  }); 
```

获取此特定部分的父 H3 跨度的 data-content="" 的正确方法是什么，例如，我想在 The Basics 中返回“the-basics”

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:38:49.000

在您给定的示例中，这可能会起作用，但模板更改可能有点脆弱：

```
$this.closest('ul').prev('h3').children('[data-content]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:37:38.500

```
var dataContent =  $this.closest('ul').prev('h3').find('span[data-content]').data('content'); // the-basics 
```

# php - 如何获取数值（PHP/Wordpress）

> ID：14697035
> 
> 赞同：0
> 
> 时间：2013-02-04T22:36:17.403
> 
> 标签：php, numerical

我不知道为什么，但我无法从以下代码中获得任何数值。

```
 $key_1_value = get_post_meta($post->ID, 'Begin', true);
   $Begin = do_shortcode('[countup date='.$key_1_value.'][timer][/countup]');
   $Nombre = intval($Begin);
   echo $Begin;
   echo $Nombre; 
```

echo $Begin 给我类似“34天”的东西

echo $nombre 给我“0”

我认为这是因为它不是一个数值。我无法解释为什么。有没有办法将“34”作为数值？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:39:35.187

如果它总是相同的格式，`$Begin`那么这应该可以正常工作：

```
$key_1_value = get_post_meta($post->ID, 'Begin', true);
$Begin = do_shortcode('[countup date='.$key_1_value.'][timer][/countup]');
$Nombre = (int) substr($Begin, 0, strpos($Begin, ' '));
echo $Begin;
echo $Nombre; 
```

我改变的是第三行，我们删除了空格之后的所有内容，并将字符串的其余部分强制转换为整数。

# macos - Apple Mac 蓝牙低功耗代码与预编译头文件和更新版本的 Xcode 的问题

> ID：14697037
> 
> 赞同：3
> 
> 时间：2013-02-04T22:36:19.390
> 
> 标签：macos, cocoa, core-bluetooth, bluetooth-lowenergy

我下载了蓝牙低能量 (BLE) 心率示例代码（如果有兴趣，请参阅： http: [//developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/ReadMe_txt.html](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/ReadMe_txt.html)）并使用 XCode 4.6 构建它Mtn Lion MacBook Air。我收到以下错误： Documents/HeartRateMonitor/HeartRateMonitor/HeartRateMonitor-Prefix.pch:6:13: fatal error: 'Cocoa/Cocoa.h' file not found #import

我尝试了各种方法，例如摆脱预编译的头文件，更改一些设置，但没有任何效果。我是 Apple 世界的新手；我用 XCode 完成了有限的 iOS 工作，但没有 Mac 编程。我做了一些研究并尝试遵循这里的建议，例如： [Compile, Build or Archive questions with Xcode 4 (and dependencies)](https://stackoverflow.com/questions/5584317/compile-build-or-archive-problems-with-xcode-4-and-dependancies)

[从 Xcode 项目中删除 Prefix.pch 文件可以吗？](https://stackoverflow.com/questions/4728225/is-it-ok-to-remove-prefix-pch-file-from-the-xcode-project)

请注意，原始示例声明它适用于 XCode 4.2 或更高版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:38:07.650

对于同一个确切的项目，我遇到了这个问题。从苹果开发网站下载命令行工具包，一切顺利。

[https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-](https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:52:41.567

您需要将 Cocoa.framework 添加到您的项目中——这就是 Cocoa/Cocoa.h 所在的位置。有关如何使用特定版本的 Xcode 执行此操作的详细信息，请参阅 Xcode 文档。（顺便说一句，一旦你这样做了，你不应该需要删除 .pch 文件。）

# c# - 从 Web.config 读取 Ninject WithConstructorArguments

> ID：14697038
> 
> 赞同：4
> 
> 时间：2013-02-04T22:36:19.807
> 
> 标签：c#, asp.net-mvc-4, web-config, ninject

我有以下 RegisterServices 功能：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<ISearchRepository>().To<SearchRepository>();
    kernel.Bind<ITagRepository>().To<TagRepository>();
    kernel.Bind<IStore>().To<Store>()
        .WithConstructorArgument("dbId", ConfigurationManager.AppSettings["DatabaseId"])
} 
```

使用断点我可以确认`ConfigurationManager`正确填充了值。

但是，在运行时，当内核完成绑定时出现以下异常：

[![在此处输入图像描述](../Images/35b9f7a6e40a78601fbafa155a425157.png)](https://i.stack.imgur.com/h1eX8.png)

如果我用`ConfigurationManager`常量替换引用，则应用程序运行良好。

我不想失去通过配置文件配置 Ninject 的能力，这是 Ninject 的限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:03:54.790

不，Ninject 没有这样的限制。

我想问题是`ConfigurationManager.AppSettings["DatabaseId"]`返回`string`并且您的`dbId`参数是类型`int`（或其他一些非字符串类型）。

尝试：

```
var databaseId = Int32.Parse(ConfigurationManager.AppSettings["DatabaseId"]); 
kernel.Bind<IStore>()
      .To<Store>()
      .WithConstructorArgument("dbId", databaseId); 
```

# c++ - 纯转发的习惯用法

> ID：14697040
> 
> 赞同：0
> 
> 时间：2013-02-04T22:36:29.227
> 
> 标签：c++, templates, c++11, perfect-forwarding

混合[这个问题](https://stackoverflow.com/questions/14685101/template-collision-in-constructors)和[另一个问题](https://stackoverflow.com/questions/14648611/template-alias-in-template-function)，我已经到了下一个（确实非常简单）的解决方案：想法是只在实际函数的范围内提供类型别名并在适当的点检查模板条件：

```
template<typename... garbage>
struct firewall
{
   typedef typename std::enable_if<sizeof...(garbage) == 0>::type type;
};

#define FIREWALL_CALL typename = typename firewall<garbage...>::type
#define TMPL_FIREWALL typename... garbage, FIREWALL_CALL
#define TMPL_ALIAS typename
#define TMPL_CONDITION(...) typename = \
                              typename std::enable_if<__VA_ARGS__::value>::type 
```

使用此代码，我们可以以舒适的方式添加一些我们想要的别名或条件。这段代码：

```
// Erase only qualifiers and references.
template<typename target>
struct pluck
{
   typedef typename std::remove_cv<
       typename std::remove_reference<target>::type>::type type;
}

// `some_fun` wants ensure its arguments are passed by non-constant values.
template<typename T>
typename pluck<T>::type
some_fun(typename pluck<T>::type a, typename pluck<T>::type b)
{
   typename pluck<T>::type c;

   // something

   return c;
} 
```

变为（仅`some_fun`）：

```
template<typename T, TMPL_FIREWALL,
         TMPL_ALIAS friendly = typename pluck<T>::type
         TMPL_CONDITION(std::is_copy_constructible<friendly>)>
friendly some_fun(friendly a, friendly b)
{
   friendly c;

   // something

   return c;
} 
```

`firewall`正如[@ipc](https://stackoverflow.com/users/1176973/ipc)在我上面提出的第二个问题中所示，的目的是吸收任何可以重新替换定义为默认模板参数的本地类型别名的参数。

这也为避免其他更深层次的问题提供了一种有用的方法：当您只想使函数参数化以对预先已知的类型进行完美转发时；例如，在下一种情况下：

```
struct A
{
   template<typename... Args>
   A(Args&&... args) : _b(std::forward<Args>(args)...)
   {}

   template<typename Str>
   A(Str&& str) : _str(std::forward<Str>(str))
   {}

   B _b;
   std::string _str;
}; 
```

如果您想`_str`使用完美的转发机制进行初始化，则不可避免地会与任何其他模板参数产生歧义。使用以下附加宏可以轻松避免这种情况：

```
#define TMPL_PURE_FORWARDING(a, b) TMPL_FIREWALL, \
          TMPL_CONDITION(std::is_same<typename _f_pluck<a>::type, b>)

struct A
{
   template<typename... Args>
   A(Args&&... args) : _b(std::forward<Args>(args)...)
   {}

   template<typename fwStr, TMPL_PURE_FORWARDING(fwStr, std::string)>
   A(fwStr&& str) : _str(std::forward<fwStr>(str))
   {}

   B _b;
   std::string _str;
}; 
```

如果`fwStr`不是 type `std::string`,或者它们的常量版本`std::string&`，`std::string&&`则会选择其他构造函数，如果没有其他构造函数，则会抛出编译器错误，`std::enable_if<false, void>::type`说不存在。

问题：在 C++ 中总是最好避免使用宏，但是众所周知的模板是冗长的，这些情况（特别是第二种情况）很常见，或者至少在我的经验中是这样。然后，这些宏非常有用。

在这种情况下使用宏是否危险？这通常是好还是有用的`idiom`，或者看起来什么都没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:03:33.587

我不会使用宏。

在某些情况下，宏是唯一的可能性，但我敢说事实并非如此。宏执行纯文本处理；他们处理的不是 C++ 元模型的一部分，而是无意义的文本片段。它们不安全、难以理解且难以维护。因此，除非确实没有其他方法可以做某事，否则请避免使用宏。

此外，你的`pluck<>`特质基本上是做什么`std::decay<>`的。这意味着使用简单的模板别名，您可以`some_fun`以易于阅读*和*解析的方式重写您的函数（我在尝试将这些宏的所有部分放在一起时迷失了方向）。

```
#include <type_traits>

template<typename T>
using Decay = typename std::decay<T>::type;

template<typename T> 
Decay<T> some_fun(Decay<T> a, Decay<T> b)
{
    Decay<T> c;

   // something

   return c;
} 
```

同样，对于第二个用例，您可以编写如下内容：

```
template<typename T, typename U>
using CheckType = typename std::enable_if<
    std::is_same<typename std::decay<T>::type, U>::value
    >::type;

struct A
{
    template<typename... Args>
    A(Args&&... args) : _b(std::forward<Args>(args)...)
    {}

    template<typename T, CheckType<T, std::string>* = nullptr>
    A(T&& str) : _str(std::forward<T>(str))
    {}

    B _b;
    std::string _str;
}; 
```

# javascript - Javascript Array indexOf by Key, Value问题

> ID：14697044
> 
> 赞同：1
> 
> 时间：2013-02-04T22:36:38.557
> 
> 标签：javascript, arrays, oop

我有一个存储在键中的数组，请参阅值格式：

```
{id: 0, data: mydata} 
```

我还有一个与该 ID 对应的列表，用于删除文件和删除元素。
我遇到的问题是，当使用 Javascript 拼接函数（从数组中删除对象）时，它会更改索引值。

请参阅下面的 javascript：

```
function setupFileList(file, id){
    var list_of_file = document.getElementById("list_of_file");
    var name_of_file = file.name;
    var size_of_file = 0;
    var file_reader = new FileReader();
    file_reader.onload = function(e){
        var imgsrc = e.target.result;
        if(file){
            if(file.size > 1024 * 1024)
                size_of_file = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + "MB";
            else
                size_of_file = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
        }

        list_of_file.innerHTML += '<div id="file-'+id+'" class="filesUp"><img class="imgUp" src="' + imgsrc +'" width="100px" height="100px"><div class="progressUp"><span>' + name_of_file + ' / ' + size_of_file +'</span></div><a href="#" onclick="deleteUp(\''+id+'\')">Delete</a></div>';
    };
    file_reader.readAsDataURL(file);
};

function deleteUp(fid){
    var file_query = fileQuery.indexOf({id: fid});
    fileQuery.splice(file_query, 1);
    console.log(file_query);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:38:04.017

如何将对象存储在数组的对象 INSTEAD 中，这样键是固定的。

```
var fileQuery = {
   0: {
      id: 0,
      data: "some data"
   },
   1: {
      id: 1,
      data: "some more data"
   }
}; 
```

使用 delete 命令从对象中删除项目。
例如：

```
delete fileQuery[0]; 
```

也`indexOf`不会比较数组中对象的属性，而是比较对象本身的引用。这意味着`array.indexOf`返回您作为 arg 提供的对象的索引，因此`{id: fid}`实际上是在该点创建一个新的唯一对象。不幸的是`indexOf`，它总是会返回 -1，因为它永远不会在数组中找到新创建的对象。

查找您要查找的对象的索引的最佳方法是手动循环遍历数组并将所有元素的 id 属性与 fid 进行比较。恐怕在这种情况下`array.indexOf`不会起作用。

# c# - 如何通过 Unity 容器配置 HttpClient？

> ID：14697053
> 
> 赞同：13
> 
> 时间：2013-02-04T22:37:32.820
> 
> 标签：c#, .net, unity-container, asp.net-web-api

我正在尝试使用统一容器注册 HttpClient 对象的实例，以便它可以在整个应用程序中使用，但遇到错误 - “类型 HttpMessageHandler 没有可访问的构造函数。”

这是我用来向 Unity 注册 HttpClient 的代码-

```
private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        container.RegisterType<HttpClient>(
            new InjectionProperty("BaseAddress", new Uri(ConfigurationManager.AppSettings["ApiUrl"]))); 

        return container;
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T08:30:42.420

您可以使用工厂方法来注册它：

```
container.RegisterType<HttpClient>(
    new InjectionFactory(x => 
        new HttpClient { BaseAddress = new Uri(ConfigurationManager.AppSettings["ApiUrl"]) }
    )
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T08:14:33.760

默认情况下，Unity 使用参数最多的构造函数。你的情况就是`HttpClient(HttpMessageHandler, Boolean)`这样。您需要明确指定无参数的默认 ctor。

```
container.RegisterType<HttpClient>(new InjectionProperty(...), new InjectionConstructor()); 
```

# visual-studio - Sublime Text 2 - 当前编辑的文件在外部更改时如何导致 LiveReload 刷新

> ID：14697056
> 
> 赞同：8
> 
> 时间：2013-02-04T22:37:44.093
> 
> 标签：visual-studio, sublimetext, livereload

Sublime Text 2 - 当前编辑的文件在外部更改时如何导致 LiveReload 刷新（如 Visual Studio）

我安装了 LiveReload，当我在浏览器中激活它时，如果检测到 Sublime 中的“保存”，它可以与 Sublime Text 通信并重新加载当前页面。如果我只在 Sublime Text 编辑器中工作，这可以正常工作。

但是，我也在 Visual Studio 中处理同一组文件。我将 Sublime Text 添加为从我的工具菜单运行的外部进程，运行时会将当前编辑的页面及其光标位置传递给 Sublime Text，因此当 Sublime Text 打开该文件时，我可以编辑同一个文件并位于同一当前行就像在 Visual Studio 中一样（这是 Sublime 的一个很好的特性，可以接受光标位置作为输入命令参数）。这也很好。

它不起作用的是我在 Visual Studio 中编辑了一个在 Sublime 文本中打开的文件并保存它，该更改在 Sublime 中未被检测为“保存”操作，我没有看到 LiveReload 功能。我认为文件只会在 Sublime 中重新加载。

**有没有办法将外部程序对 Sublime Text 中当前编辑文件的更改视为“保存”操作，这反过来会触发浏览器中的 LiveReload？**

我不想为 sublime 和 Visual Studio 提供 2 个重新加载解决方案。我可以同时打开 2 个编辑器。理想情况下，最好有一个 LiveReload 插件，它会导致 Visual Studio 和 Submlime 文本刷新

谢谢，

辐射

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T23:12:17.303

我在 linux 中使用 sublime，它会自动重新加载。不需要插件。Windows 中的情况可能有所不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T12:23:41.953

[在https://sublime.wbond.net](https://sublime.wbond.net)中有许多 sublime 包可用

这是**最好**的教程之一 [http://www.hongkiat.com/blog/sublime-text-refresh-browser/](http://www.hongkiat.com/blog/sublime-text-refresh-browser/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T07:52:10.877

如果您正在使用 Chrome 来查看您的编辑器中所做的更新以反映您的页面，您可以考虑使用名为[LivePage](https://chrome.google.com/webstore/detail/livepage/pilnojpmdoofaelbinaeodfpjheijkbh?hl=en)的扩展程序。它独立于任何编辑器工作，因此应该满足您的需求。

# jquery - IE9 上的 jquery 不起作用：addclass from option/select

> ID：14697060
> 
> 赞同：1
> 
> 时间：2013-02-04T22:37:52.900
> 
> 标签：jquery, internet-explorer-9, internet-explorer-10

这是在 IE9 或 IE10 中无法正常运行的仪表板模型版本。它在 Chrome、Firefox 和我在测试期间为其设置的[jsfiddle中完美运行。](http://jsfiddle.net/Y2adT/)当您在顶部选择“控件”时，然后从“自定义日期范围”下拉列表中选择“自定义日期范围”，正如您在[jsfiddle](http://jsfiddle.net/Y2adT/)中看到的那样，日历显示在右侧。仅在 IE9 和 IE10 中不起作用。任何解决此问题的建议将不胜感激。我尝试将其从 .click 切换到 .change；并尝试使用模糊或聚焦的不同场景。我很确定这是可疑代码（jsfiddle 中的第 103-114 行）：

```
 range.css({
        left: area.outerWidth(true) - 1
    })
    select.change(function () {
        var options = select.find('option').filter('[selected]');
        if (options.hasClass('rangeDate')) {
            jcfSelect.showDropdown();
            range.addClass('dropActive').show();
        } else {
            range.removeClass('dropActive').hide();
        }
    }); 
```

提前致谢！

# ios - 在 Objective-C 字符串中插入 "

> ID：14697062
> 
> 赞同：-2
> 
> 时间：2013-02-04T22:38:01.970
> 
> 标签：ios, objective-c

我想将以下 json 文本放在目标 c 中的字符串中。我该怎么做呢 ？

我需要 NSString jsonText = { "username" : "Test", "password" : "testing123" }

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:42:13.473

```
NSString *jsonText = @" { \"username\" : \"Test\", \"password\" : \"testing123\" }"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:42:36.560

您应该转义引号字符并在字符串文字之前添加@，以便您的代码变为

```
NSString *jsonText = @"{ \"username\" : \"Test\", \"password\" : \"testing123\" }"; 
```

# jquery - jQuery 1.9.0 奇怪的 $.get 行为

> ID：14697064
> 
> 赞同：0
> 
> 时间：2013-02-04T22:38:07.397
> 
> 标签：jquery

我有以下代码：

```
$("#workout-switcher .button").on('click', function(){
   console.log('first test'); // this is logged
   $.get("/ajax/set-workout.php", { 'request' : id, 'date' : date },
      function(data){
         console.log('second test'); // this is not logged
      },'json'
   );
}); 
```

这在 jQuery 1.8.3 中完美运行，即：`first test`登录到控制台，然后`get`发送请求并成功执行，然后`second test`登录到控制台。

这就是 jQuery 1.9.0 中发生的情况：`first test`触发，`get`成功触发，但**没有**`second test`登录到控制台。

 **知道这里有什么问题吗？

**编辑**

当我将 $.get 更改为 $.ajax 时，它开始工作。显然是一个 jQuery 1.9.0 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:51:56.790

根据升级指南：http: [//jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

“jQuery.ajax 返回空字符串的 JSON 结果 在 1.9 之前，期望返回数据类型为 JSON 或 JSONP 的 ajax 调用将认为空字符串的返回值是成功案例，但返回 null 到“**

# asp.net-mvc - 具有多个样式绝对 URL 的 ASP.NET MVC 4.0 捆绑包

> ID：14697074
> 
> 赞同：0
> 
> 时间：2013-02-04T22:38:53.683
> 
> 标签：asp.net-mvc, bundle, asp.net-optimization

我的一些应用程序“**样式**”和“**脚本**”是从不同的环境应用程序中引用的。

1.  本地站点指的是`http://localhost:123/mystyles/default.css`
2.  开发网站指的是`http://mydev.com/mystyles/default.css`
3.  产品网站指的是`http://prod.com/mystyles/default.css`

我尝试在下面的**捆绑包上使用****cdn**进行一些调整，但没有帮助。

 **```
public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Clear();
            bundles.ResetAll();

            BundleTable.EnableOptimizations = false;
            bundles.UseCdn = true;

            if (HttpRuntime.BinDirectory.Contains("local"))
                cdnHost = "http://localhost:123/";
            else if(condition)
                cdnHost = "http://mydev.com/";
            else
                cdnHost = "http://prod.com/";

            bundles.Add(new StyleBundle("~/Content/HRO/jquery/ui/css", cdnHost)
                .Include("~/css/jQuery/hro-0079c1/jquery-ui-1.8.11.custom.css"));

            bundles.Add(new StyleBundle("~/Content/HRO/jquery/ui/css", cdnHost)
               .Include("~/css/jQuery/hro-0079c1/jquery-ui-1.8.11.custom.css"));

            bundles.Add(new StyleBundle("~/Content/HRO/base/css", cdnHost)
               .Include("~/css/base.css"));

            bundles.Add(new StyleBundle("~/Content/HRO/reset/css", cdnHost)
               .Include("~/css/reset.css"));
        } 
```

但这不起作用。当我如下调用这些捆绑包时

```
 @Styles.Render("~/Content/HRO/jquery/ui/css")
    @Styles.Render("~/Content/HRO/base/css")
    @Styles.Render("~/Content/HRO/reset/css") 
```

我试图调试 RegisterBundles()，看起来它没有使用 cdn url 创建这些项目。

这是为捆绑包创建绝对 css URL 的正确方法吗？我在这里错过了什么吗？有没有更好的方法来调试我的 RegisterBundles()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T10:54:16.577

如果只是在捆绑中获取绝对网址，那么您可以这样做。

```
public static class Extensions
    {
        public static IHtmlString RenderScript(this UrlHelper helper, params string[] paths)
        {
            string scripts = System.Web.Optimization.Scripts.Render(paths).ToHtmlString();
            string hostName = HttpContext.Current.Request.Url.Scheme + Uri.SchemeDelimiter + HttpContext.Current.Request.Url.Authority;
            string replaced = Regex.Replace(scripts, "src=\"/", "src=\"" + hostName + "/", RegexOptions.Multiline | RegexOptions.IgnoreCase);
            return new HtmlString(replaced);
        }
    } 
```

这基本上会从 Scripts.Render 中获取 bahvior，然后对其应用绝对 URL。然后在视图中你必须写

```
 @Url.RenderScript("~/bundles/jquery") 
```

代替

```
 @Scripts.Render("~/bundles/jquery") 
```

享受编码！...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:52:11.130

您需要将 EnableOptimizations 和 EnableCDN 都设置为 true 才能使用 cdn url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T18:31:43.733

例如，尝试一些这样的：

bundles.Add(new StyleBundle("~/Content/HRO/jquery/ui/css"," [http://mydev.com/css/jQuery/hro-0079c1/jquery-ui-1.8.11.custom.css](http://mydev.com/css/jQuery/hro-0079c1/jquery-ui-1.8.11.custom.css) " ));

好吧，我可以做到。我能做的是将多个样式组合在一个包中。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T10:23:52.677

`Scripts`并`Styles`来自`System.Web.Optimization` 支持`RenderFormat`方法，可以通过以下方式使用：

```
@{
    var hostName = "www.example.com";
    var styleFormat = "<link href=\"" + hostName+ "{0}\" type=\"text/css\" rel=\"stylesheet\"/>";
}

@Styles.RenderFormat(styleFormat, "~/styles/vendor") 
```**

# sql-server - 如何使用 Visual Studio AWS Toolkit 更新对 Amazon ec2 数据库的更改

> ID：14697075
> 
> 赞同：0
> 
> 时间：2013-02-04T22:38:54.933
> 
> 标签：sql-server, visual-studio-2012, amazon-web-services, amazon-ec2

设置如下：我在 Visual Studio 中创建了一个使用 SQL Server 数据库 (.mdf) 的 Web 应用程序。我已使用 AWS Toolkit for Visual Studio 将此网站发布到亚马逊 ec2 实例。该工具包在部署期间使用项目设置。所以我第一次使用数据库部署应用程序时，它部署得很好。但是从那以后我对本地数据库进行了更改，并希望这些更改也可以在部署的数据库上，但是当我尝试重新部署应用程序时，它返回一个 SQL 错误，“表已经存在。”，等等。这是因为“Package/Publish SQL”属性中的脚本试图从头开始创建数据库。我需要对本地数据库的新更改反映在已部署的数据库中。删除已部署的数据库并重新创建它不是一种选择，因为我们希望将数据保留在其中。我正在寻找一种合并两者的方法：添加任何缺少的表/列和数据。我该怎么做呢？我是否必须编写自己的自定义 SQL 脚本来更新数据库，还是有更好的完全不同的方法？如果 SQL 脚本是最好的选择，我可以举个例子吗？我对 SQL 几乎一无所知。

最后，我们正在寻找的是能够点击 Amazon Toolkit 中的“部署”按钮，并且整个项目（包括数据库）都会更新。

# perl - 从 ptr 记录中获取 TLD？

> ID：14697078
> 
> 赞同：-1
> 
> 时间：2013-02-04T22:39:14.847
> 
> 标签：perl, dns, reverse-dns

> **可能重复：**
> [从 url 中提取 TLD 并对每个 TLD 文件的域和子域进行排序](https://stackoverflow.com/questions/8031620/extraction-of-tld-from-urls-and-sorting-domains-and-subdomains-for-each-tld-file)

例如：从PTR记录45.36.190.206.in-addr.arpa域名指针ir1.fp.vip.gq1中获取yahoo.com。**雅虎网**。

我正在使用 Net::Nslookup；nslookup（主机=>“206.190.36.45”，类型=>“PTR”）；返回 ir1.fp.vip.gq1.yahoo.com。

只需从 ptr 记录中获取“yahoo.com”。

如何使用 perl 获取这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:25:21.820

您的问题仅仅是“如何获得 的顶级域名`ir1.fp.vip.gq1.yahoo.com`，即`yahoo.com`？”

```
use Domain::PublicSuffix qw( );

my $dps = Domain::PublicSuffix->new();

my $host = 'ir1.fp.vip.gq1.yahoo.com';

$host =~ s/\.\z//;  # D::PS doesn't handle "domain.com.".
my $root = $dps->get_root_domain($host)
   or die $dps->error();

say $root; 
```

顺便说一句，您可以使用内置/系统调用`gethostbyaddr`来获取 PTR 记录。

```
use Socket qw( inet_aton AF_INET );
my $host = gethostbyaddr(inet_aton("206.190.36.45"), AF_INET); 
```

# android - trigger.io - 仅支持 Android 平板电脑

> ID：14697081
> 
> 赞同：1
> 
> 时间：2013-02-04T22:39:22.783
> 
> 标签：android, trigger.io

trigger.io 中的 iOS 方面允许我在为应用程序设置配置时选择 iPhone、iPad 或两者。我知道您可以在正常情况下更改您的 AndroidManifest.xml 文件以添加如下内容

```
<supports-screens android:smallScreens="false"
                  android:normalScreens="false"
                  android:largeScreens="false"
                  android:xlargeScreens="true" /> 
```

是否可以编辑我的 AndroidManifest.xml 文件，所以当我上传到 Play 商店时，只允许平板设备下载和安装我的应用程序？我试图编辑 forge-workspace//development/ 文件夹中的那个，但没有运气。

*我在 Mac 上安装了 trigger.io，因此与 Windows 安装相关的路径对我来说毫无用处。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:18:14.937

在您使用`forge build`构建应用程序后，您会在以下目录中找到它：

```
forge-workspace/development/android/AndroidManifest.xml 
```

之后，您可以使用`forge package`该应用程序为 Play 商店做好准备。确保在使用 forge 包之前编辑清单文件，并记住每次都必须应用这些更改。

# php - Codeigniter htaccess 添加了一个额外的正斜杠

> ID：14697083
> 
> 赞同：4
> 
> 时间：2013-02-04T22:39:25.750
> 
> 标签：php, .htaccess, codeigniter

这是我当前的 .htaccess：

```
Options +FollowSymLinks +SymLinksIfOwnerMatch
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

我的配置文件：

```
$config['base_url'] = 'http://localhost/argh/';
$config['index_page'] = ''; 
```

例如，当我单击关于我们的链接时，它看起来像这样：

```
http://localhost/argh//about 
```

（在 argh 和 about 之间有 2 个正斜杠）

有什么建议吗？:)

编辑：

不确定，但这看起来像是 Codeigniter 问题，因为函数：

```
function site_url($uri = '')
{
    if ($uri == '')
    {
        return $this->slash_item('base_url').$this->item('index_page');
    }

    if ($this->item('enable_query_strings') == FALSE)
    {
        $suffix = ($this->item('url_suffix') == FALSE) ? '' : $this->item('url_suffix');
        return $this->slash_item('base_url').$this->slash_item('index_page').$this->_uri_string($uri).$suffix;
    }
    else
    {
        return $this->slash_item('base_url').$this->item('index_page').'?'.$this->_uri_string($uri);
    }
} 
```

更准确地说：

```
return $this->slash_item('base_url').$this->item('index_page'); 
```

在以下情况下返回 base_url：

```
$config['index_page'] = ''; 
```

这就是为什么前面的例子这样结束的原因：

```
http://localhost/argh//about 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:53:54.543

检查你没有写：

```
base_url().'/about' 
```

在您的查询中 - base_url() 将使用您的配置文件中的 /

另外，删除第二个 . 从这一行：

```
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

读书：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T15:04:16.713

在系统中更改它-> url_helper.php 文件

```
rtrim($CI->config->site_url($uri),'/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:21:17.170

在 .htacces 文件中使用它

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

将此用于基本网址

```
$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/argh'; 
```

并使用路径作为表单操作

```
<form method="post" action="<?php echo base_url();?>Your_Controller_Name">; 
```

对于href使用这个

```
<a href="<?php echo site_url("Controller_Name/Action_name"); ?>">About Us</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T09:44:37.210

以防将来有人面临同样的问题：

由于我重定向的方式，我遇到了同样的问题，例如，在成功登录后，我使用**`header("Location:".site_url()."/admin/home");`**了即使在**`index.php`**从**`$config['index_page']=''`**我删除后仍然得到**`http://example.com//admin/home`**

解决方法：使用**`redirect()`**CI提供的功能而不是**`header('');`** ie

改变：**`header("Location:".site_url()."/admin/home");`**到**`redirect('/admin/home')`**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-08T06:04:47.637

这项工作

`<a href="<?php echo site_url('Controller_Name') ?>" </a> change to <a href="#" onclick="window.location='<?php echo site_url('Controller_Name'); ?>'"></a>`

# php - 如何将二维数组放入php中的mysql_query

> ID：14697087
> 
> 赞同：0
> 
> 时间：2013-02-04T22:40:21.650
> 
> 标签：php, mysql, arrays, multidimensional-array

问题很简单。

**我有什么，有什么问题？**
我确实有二维数组`$someArray[][]`。第一个括号我可以放“主题”或“日期”。第二个，从 1 到 4（只是一个例子 - `$someArray['date'][0]`）

现在，当我尝试从数据库中获取一些数据时，`mysql_query()`我遇到了一些问题。我正在尝试在查询的 WHERE 部分中使用这个二维数组。

**示例哪些有效，哪些无效**
`$result = mysql_query("SELECT some from table where date='$someArray[date][0]' AND subject='$someArray[subject][0]') or die(mysql_error());`

当我使用它时，它不会返回任何东西。但是当我第一次将这些值分配给新变量时：

`$variable1 = $someArray['date'][0];`
`$variable2 = $someArray['subject'][0];`

然后在查询中使用它们

``$result = mysql_query("SELECT some from table where date='$variable1' AND subject='$variable2') or die(mysql_error());`

它就像一个魅力。

**问题**
我的第一个查询有什么问题，我写错了那些数组吗？我没有错误。
试图在 mysql 查询中将单个撇号放在 [] 括号内，但后来我确实得到了错误。如果我`$someotherArray[somedata]`在查询中使用类似数组，它也可以在没有它们的情况下工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:45:30.063

查询中的语法缺少右双引号。并连接字符串，而不是仅仅在其中添加它。字符串解析器不喜欢多维数组。

解决方案：

```
$result = mysql_query("SELECT some from table where date='".$someArray[date][0]."' AND subject='".$someArray[subject][0]."'") or die(mysql_error()); 
```

就像@barmar提到的括号也有效

附带说明一下，确保您对数据进行转义以确保防止 SQL 注入！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:45:38.107

数组插值仅适用于单级下标。对于多维数组，您需要使用`{...}`包装器：

```
$result = mysql_query("SELECT some from table where date='{$someArray['date'][0]}' AND subject='{$someArray['subject'][0]}') or die(mysql_error()); 
```

# google-chrome - 谷歌浏览器：将 PID 映射到窗口

> ID：14697097
> 
> 赞同：1
> 
> 时间：2013-02-04T22:41:09.637
> 
> 标签：google-chrome

我看到`ps`我的一个 Google Chrome 渲染器占用了出乎意料的大量 CPU。

如何确定该进程正在呈现哪个 Chrome 窗口？

注意：我的主要环境是 Linux 和 MacOS，以防万一没有跨平台的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:05:40.820

您应该能够调出 Chrome 任务管理器（“窗口/任务管理器”，选择“查看后台页面”选项）并选择显示“进程 ID”列（右键单击列标题，然后选择“出现的菜单中的“进程 ID”）。它适用于 Windows，我想它也适用于 Linux 和 MacOS。

当然，一旦您进入 Chrome 任务管理器，您就可以看到每个选项卡（也称为进程）的 CPU 使用率，因此不需要进程 ID-> 窗口映射。

# vhdl - VHDL 中的 tsetup 和 thold 是什么？

> ID：14697099
> 
> 赞同：0
> 
> 时间：2013-02-04T22:41:14.170
> 
> 标签：vhdl

我正在学习VHDL。当我尝试制作一个测试库时，我遇到了这些话。他们的意思是什么？我可以在谷歌上找到任何简单的解释。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:20:46.430

据我所知，tSetup 和 tHold 不是 VHDL 关键字，而是被模拟设备正确运行的最短设置和保持时间。

*   tSetup - 数据/控制需要在时钟沿之前有效的时间量。
*   tHold - 数据/控制需要在时钟沿之后有效的时间量。

一个简单的图形解释这一点：

[http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#Setup.2C_hold.2C_recovery.2C_removal_times](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#Setup.2C_hold.2C_recovery.2C_removal_times)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:27:22.447

正如 TOTA 所说，建立和保持时间是数字逻辑设计术语，而不是 VHDL 术语。

大多数情况下，您不需要在测试台上关心它们，因为您几乎总是在测试芯片内的内部模块，并且这些工具将为您管理所有时序。

当您在器件引脚级别工作时，您可以设置模型以检查建立和保持时间是否存在违规行为。在模拟 RTL 时，没有延迟（通常）建模，所以你的时间应该没问题。您可以稍后模拟一个包含所有实际芯片延迟的反向注释网表，并检查您是否仍将满足外部设备的所有时序要求。

# jquery - jQuery，更改背景图像时消除闪烁

> ID：14697102
> 
> 赞同：8
> 
> 时间：2013-02-04T22:41:38.273
> 
> 标签：jquery, html, css

我正在尝试消除 Chrome 和 FF 中的闪烁，尽管它在 FF 中要少得多。该脚本根据水平鼠标位置滚动 20 个背景 jpg。这种工作但非常闪烁。

**jQuery**

```
$( document ).ready( function() {
var xSlider = $("#third"); //cache
var loopvar = 10; //set start img to 10
xSlider.css({backgroundImage : 'url(images/' + loopvar + '.jpg)'}); 
document.onmousemove = function(e){
        var mouseposimg = Math.floor(e.pageX / Math.floor($(window).width() / 20) + 1);
        if (mouseposimg > 20) { mouseposimg = 21; } //if outside browser
        if (mouseposimg < 0) { mouseposimg = 1; }

        if(loopvar != mouseposimg) { 
            xSlider.css({backgroundImage : 'url(images/' + mouseposimg + '.jpg)'}); 
            loopvar = mouseposimg; 
        }

}; 
```

});

**CSS**

```
#third{
background: no-repeat 100%;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

}

**HTML**

```
<div id="third">
</div> 
```

忘了提我用这个预加载

```
(function(d){var h=[];d.loadImages=function(a,e){"string"==typeof a&&(a=[a]);for(var f=a.length,g=0,b=0;b<f;b++){var c=document.createElement("img");c.onload=function(){g++;g==f&&d.isFunction(e)&&e()};c.src=a[b];h.push(c)}}})(jQuery); 
```

$.loadImages(['1.jpg', '2.jpg', etc etc etc])

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:53:02.630

闪烁可能是由于图像加载。您可以只预加载所有图像来防止这种情况发生：

```
for (var x = 1; x <= 21; x++) {
    (new Image).src = 'images/' + x + '.jpg';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:01:44.290

听起来您需要先预加载图像。获取[imagesLoaded](https://github.com/desandro/imagesloaded)插件并尝试以下操作：

```
function preload(sources, callback) {
    if(sources.length) {
        var preloaderDiv = $('<div style="display: none;"></div>').prependTo(document.body);

        $.each(sources, function(i,source) {
            $("<img/>").attr("src", source).appendTo(preloaderDiv);

            if(i == (sources.length-1)) {
                $(preloaderDiv).imagesLoaded(function() {
                    $(this).remove();
                    if(callback) callback();
                });
            }
        });
    } else {
        if(callback) callback();
    }
}

$(document).ready( function() {
    var xSlider = $("#third"); //cache
    var loopvar = 10; //set start img to 10

    var filesToPreload = [];
    for(var x = 1; x <= 21; x++) filesToPreload.push('images/' + x + '.jpg');

    preload(filesToPreload, function() {
        xSlider.css({backgroundImage : 'url(images/' + loopvar + '.jpg)'}); 

        document.onmousemove = function(e){
            var mouseposimg = Math.floor(e.pageX / Math.floor($(window).width() / 20) + 1);
            if (mouseposimg > 20) { mouseposimg = 21; } //if outside browser
            if (mouseposimg < 0) { mouseposimg = 1; }

            if(loopvar != mouseposimg) { 
                xSlider.css({backgroundImage : 'url(images/' + mouseposimg + '.jpg)'}); 
                loopvar = mouseposimg; 
            }
        }
    });
}); 
```

另请参阅：[使用 JavaScript/jQuery 预加载图像的最终最佳方法？](https://stackoverflow.com/questions/901677/the-definitive-best-way-to-preload-images-using-javascript-jquery/)

# excel - 从函数中调用时，记录集是否会自行关闭？

> ID：14697104
> 
> 赞同：1
> 
> 时间：2013-02-04T22:41:57.423
> 
> 标签：excel, ms-access, vba

在 VBA 编程中，我试图了解记录集在将数据从函数内传递到另一个记录集时的状态

例如

```
Sub Test()

Dim Recordset1 as new ABODB.Recordset

Set RecordSet1 = BringDataFromRecordset2()

Do while not Recordset1.EOF
'data do something

Recordset1.movenext
Loop
End Sub

Function BringDataFromRecordset2() as ADODB.Recordset
dim RecordSet2 as new ADODB.Recorset

RecordSet2.Open "Select * from DUAL", Connectionstring

BringDataFromRecordset2 = RecordSet2 

End Function 
```

RecordSet2 在“Set RecordSet1 = BringDataFromRecordset2() 行中将数据传递给 RecordSet1 时会发生什么？

它会自动关闭吗？如果 RecordSet2 仍然打开，我该如何关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:58:01.353

您编写的代码有几个问题。在您需要使用的功能中

```
Set BringDataFromRecordset2 = RecordSet2 
```

因为您的返回值是对象类型。

在 Test() 中，您不需要`New`Recordset1 声明中的 ，因为该函数负责创建记录集，然后将其传递给 Test。

Recordset2（或至少它指向的对象）即使在函数`BringDataFromRecordset`完成后仍然在作用域内，因为现在 Recordset1 变量 in`Test`指向同一个对象。

# objective-c - 加速框架倒谱峰值查找

> ID：14697107
> 
> 赞同：2
> 
> 时间：2013-02-04T22:41:59.620
> 
> 标签：objective-c, fft, accelerate-framework

我正在尝试使用加速框架找到倒谱分析的峰值。我总是在帧的结尾或开头得到峰值。我正在分析它实时从麦克风获取音频。我的代码有什么问题？我的代码如下：

```
OSStatus microphoneInputCallback (void                          *inRefCon, 
                              AudioUnitRenderActionFlags    *ioActionFlags, 
                              const AudioTimeStamp          *inTimeStamp, 
                              UInt32                        inBusNumber, 
                              UInt32                        inNumberFrames, 
                              AudioBufferList               *ioData){

// get reference of test app we need for test app attributes
TestApp *this = (TestApp *)inRefCon;
COMPLEX_SPLIT complexArray = this->fftA;
void *dataBuffer = this->dataBuffer;
float *outputBuffer = this->outputBuffer;
FFTSetup fftSetup = this->fftSetup;

uint32_t log2n = this->fftLog2n;
uint32_t n = this->fftN; // 4096
uint32_t nOver2 = this->fftNOver2;
uint32_t stride = 1;
int bufferCapacity = this->fftBufferCapacity; // 4096
SInt16 index = this->fftIndex;

OSStatus renderErr;

// observation objects
float *observerBufferRef = this->observerBuffer;
int observationCountRef = this->observationCount;

renderErr = AudioUnitRender(rioUnit, ioActionFlags, 
                            inTimeStamp, bus1, inNumberFrames, this->bufferList);
if (renderErr < 0) {
    return renderErr;
}

// Fill the buffer with our sampled data. If we fill our buffer, run the
// fft.
int read = bufferCapacity - index;
if (read > inNumberFrames) {
    memcpy((SInt16 *)dataBuffer + index, this->bufferList->mBuffers[0].mData, inNumberFrames*sizeof(SInt16));
    this->fftIndex += inNumberFrames;

} else {

    // If we enter this conditional, our buffer will be filled and we should PERFORM FFT.
    memcpy((SInt16 *)dataBuffer + index, this->bufferList->mBuffers[0].mData, read*sizeof(SInt16));

    // Reset the index.
    this->fftIndex = 0;

    /*************** FFT ***************/

    //multiply by window
    vDSP_vmul((SInt16 *)dataBuffer, 1, this->window, 1, this->outputBuffer, 1, n);

    // We want to deal with only floating point values here.
    vDSP_vflt16((SInt16 *) dataBuffer, stride, (float *) outputBuffer, stride, bufferCapacity );

    /** 
     Look at the real signal as an interleaved complex vector by casting it.
     Then call the transformation function vDSP_ctoz to get a split complex 
     vector, which for a real signal, divides into an even-odd configuration.
     */
    vDSP_ctoz((COMPLEX*)outputBuffer, 2, &complexArray, 1, nOver2);

    // Carry out a Forward FFT transform.
    vDSP_fft_zrip(fftSetup, &complexArray, stride, log2n, FFT_FORWARD);

    vDSP_ztoc(&complexArray, 1, (COMPLEX *)outputBuffer, 2, nOver2);

    complexArray.imagp[0] = 0.0f;
    vDSP_zvmags(&complexArray, 1, complexArray.realp, 1, nOver2);
    bzero(complexArray.imagp, (nOver2) * sizeof(float));

    // scale
    float scale = 1.0f / (2.0f*(float)n);
    vDSP_vsmul(complexArray.realp, 1, &scale, complexArray.realp, 1, nOver2);

    // step 2 get log for cepstrum
    float *logmag = malloc(sizeof(float)*nOver2);
    for (int i=0; i < nOver2; i++)
        logmag[i] = logf(sqrtf(complexArray.realp[i]));

    // configure float array into acceptable input array format (interleaved)
    vDSP_ctoz((COMPLEX*)logmag, 2, &complexArray, 1, nOver2);

    // create cepstrum
    vDSP_fft_zrip(fftSetup, &complexArray, stride, log2n-1, FFT_INVERSE);

    //convert interleaved to real
    float *displayData = malloc(sizeof(float)*n);
    vDSP_ztoc(&complexArray, 1, (COMPLEX*)displayData, 2, nOver2);

    float dominantFrequency = 0;
    int currentBin = 0;
    float dominantFrequencyAmp = 0;

    // find peak of cepstrum
    for (int i=0; i < nOver2; i++){
        //get current frequency magnitude

        if (displayData[i] > dominantFrequencyAmp) {
           // DLog("Bufferer filled %f", displayData[i]);
            dominantFrequencyAmp = displayData[i];
            currentBin = i;
        }
    }

    DLog("currentBin : %i amplitude: %f", currentBin,  dominantFrequencyAmp);

}
return noErr; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:33:51.930

我没有使用过 Accelerate Framework，但您的代码似乎正在采取正确的步骤来计算倒谱。

真实声学信号的倒谱往往具有非常大的直流分量，在零频率处和附近有一个大峰值 [原文如此]。只需忽略倒谱的近直流部分并寻找高于 20 Hz 频率的峰值（高于倒谱宽度/20Hz 的频率）。

如果输入信号包含一系列间隔非常近的泛音，则倒谱在高频端也会有一个很大的峰值。

例如，下图显示了 N=128 和 Width=4096 的狄利克雷核的倒谱，其频谱是一系列间隔非常近的泛音。

![Dirichlet_Kernel_N128_Width4096](../Images/8b2d1106c565e7c09c903539e1a79a49.png)

您可能希望使用静态合成信号来测试和调试您的代码。测试信号的一个很好的选择是任何具有基本 F 和几个 F 的整数倍的泛音的正弦曲线。

您的 Cepstra 应该类似于以下示例。

首先是合成信号。

下图显示了合成稳态 E2 音符的倒谱，使用典型的近直流分量合成，基波频率为 82.4 Hz，8 个谐波为 82.4 Hz 的整数倍。合成正弦曲线被编程为生成 4096 个样本。

观察 12.36 处的显着非 DC 峰值。倒谱宽度为 1024（第二个 FFT 的输出），因此峰值对应于 1024/12.36 = 82.8 Hz，非常接近真正的基频 82.4 Hz。

![合成 E2 音符的倒谱](../Images/81dec4b98232912305de005f593440f2.png)

现在是真正的声学信号。

下图显示了真实原声吉他 E2 音符的倒谱。信号在第一次 FFT 之前没有加窗。观察 542.9 处显着的非 DC 峰值。倒谱宽度为 32768（第二个 FFT 的输出），因此峰值对应于 32768/542.9 = 60.4 Hz，与真正的基频 82.4 Hz 相去甚远。

![原声吉他 E2 音符的倒谱，未加窗](../Images/ade5e332d27a5ab128c13f07808fbce6.png)

下图显示了相同真实原声吉他 E2 音符的倒谱，但这次信号在第一次 FFT 之前进行了 Hann 加窗。观察 268.46 处显着的非 DC 峰值。倒谱宽度为 32768（第二个 FFT 的输出），因此峰值对应于 32768/268.46 = 122.1 Hz，这比真正的基频 82.4 Hz 更远。

![原声吉他 E2 音符的倒谱，Hann 窗口化](../Images/11ded196eab558a2abb3e58ad1660cda.png)

用于此分析的原声吉他的 E2 音符是在录音室条件下使用高质量麦克风以 44.1 KHz 采样的，它基本上包含零背景噪音，没有其他乐器或声音，也没有后处理。

参考：

真实音频信号数据、合成信号生成、绘图、FFT 和倒谱分析在此处完成：[乐器倒谱](https://sooeet.com/music/musical-instrument-cepstrum.php)

# sed - GNU sed：全局替换失败

> ID：14697109
> 
> 赞同：0
> 
> 时间：2013-02-04T22:42:14.493
> 
> 标签：sed

我有一个名为 test.csv 的文件，其内容如下：

```
T1,T2,T3,T4
10,2,3,17
10,2,5,14
10,2,2,16
15,1,17,15
12,1,9,25 
```

我想将第四列的所有值 17 替换为 25。所以我尝试了以下命令：

```
cat test.csv | sed -r 's/(([1-9]+,){3})17/\125/g'
T1,T2,T3,T4
10,2,3,17
10,2,5,14
10,2,2,16
15,1,17,15
12,1,9,25 
```

如您所见，仅修改了最后一行，而没有修改第二行。

但是，如果我这样做：`cat test.csv | sed -r "s/([0-9]+,[0-9]+,[0-9]+,)17/\125/"`我有我想要的输出。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:54:34.527

您的 sed 行不起作用的原因是：

如果你仔细检查你的 sed 线，

```
cat test.csv | sed -r 's/(([1-9]+,){3})17/\125/g' (your sed line) 
```

你`[1-9]`没有`[0-9]`，修复它然后再试一次，它应该对你有用。

也不`cat file`是必需的。你可以做`sed '...' file`

# c++ - 你如何覆盖 operator+=

> ID：14697111
> 
> 赞同：1
> 
> 时间：2013-02-04T22:42:18.170
> 
> 标签：c++, overriding

我想覆盖所有 = 运算符，其中 lhs 是已知类型，而 rhs 是我自己的类。举个例子：

```
 class MyClass;
    class Override {
        long operator+=(long X, const MyClass& Y);
    }
    long Override::operator+=(long X, const MyClass& Y) {
       return X += (long)Y;
    }
    void main(int argc, char** argv) {
       MyClass X(1);
       long Y = 1;
       Y += 1;        // works great
       Y += (long)X;  // works great
       Y += X;        // does not work
    } 
```

MyClass 具有适当的转换和创建方法。

我知道我错过了一些东西，但我不知道是什么。

我得到一个编译器错误

```
 Y += X 
```

具有以下功能

```
 long Override::operator(long& X, const MyClass& Y) ... 
```

谁能告诉我这样做的正确方法是什么？

谢谢艺术

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:46:29.930

这个类`Override`在这里完全没用。只需编写一个全局函数：

```
long &operator+=(long &X, const MyClass& Y) {
   return X += (long)Y;
} 
```

请注意，第一个参数 ( `X`) 必须通过引用传递，因为它将由操作员修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:48:50.780

像这样（例如，我创建了一些 MyClass castable to long ）

```
class MyClass
{
    long a;
    public:
    MyClass(long a) : a(a) {}
    operator long () const
    {
        return a;
    }
};

long operator+=(long X, const MyClass& Y) {
    return X += (long)Y;
}
int main(int argc, char** argv) {
    MyClass X(1);
    long Y = 1;
    Y += 1;        // works great
    Y += (long)X;  // works great
    Y += X;        // works too
    return 0;
} 
```

# javascript - 在d3中绘制三维数组的分量

> ID：14697119
> 
> 赞同：0
> 
> 时间：2013-02-04T22:42:50.927
> 
> 标签：javascript, d3.js

我试图弄清楚是否可以使用当前的数据结构在 d3 中创建散点图。我拥有的是一个三维数组，`thetas`，尺寸为*i*、*j*和*k*。维度*j*随用户输入而扩展。尺寸*i*和*k*固定为*i* =2 和*k* =3。对于给定的*i*，我想将*k的前两个条目绘制为所有**j*的散点图的*x*和*y*值。我不知道该怎么做。目前，要绘制*i* = 1，我有

 **```
 xx = d3.scale.linear()
    .domain([0,1])
    .range([margins.yylMarginFactor * width, (1 - margins.yyrMarginFactor) * width]);
    yy = d3.scale.linear()
    .domain([0,1])
    .range([(1 - margins.xxbMarginFactor) * height, margins.xxtMarginFactor * height]);
    var tmp = chart.selectAll(".vis3points").data(thetas[0][0], function (d, i) { return i; } );
    tmp
        .enter().insert("svg:circle")
        .attr("class", "vis3points")
        .attr("cx", function (d, i) { return xx(d); })
        .attr("cy", yy(d))
        .attr("r", 3);
    tmp.transition()
        .duration(10)
        .attr("cx", function (d, i) { return xx(d); })
        .attr("cy", yy(d))
    tmp.exit()
        .transition().duration(10).attr("r",0).remove(); 
```

这是正确的方向吗？我应该使用什么结构？**

# php - 如何在codeigniter中实现嵌套注释2层

> ID：14697122
> 
> 赞同：0
> 
> 时间：2013-02-04T22:43:01.333
> 
> 标签：php, codeigniter, codeigniter-2

我正在尝试在我的网站上实现一个只有两个级别的评论系统，例如您将拥有主要评论并回复该评论，但它不会进一步：

```
main comment 1
  (sub_comment1)
  (sub_comment2)

main comment 2
  (sub_comment1)
  (sub_comment2)
  (sub_comment2) 
```

ETC...

说得通？

我在 codeigniter 中创建网站，但我认为一个基本的 php 解决方案就可以了。

我的数据库表中的每一行都有一个 id 和一个 parent_id，如果父 id 为 0，则它是主评论，如果它是子评论，它将在 parent_id 中具有其父评论的 id。

如何以正确的顺序提供带有父注释和子注释的二维数组。

我当前的代码是这样的：控制器：

```
 function status_comments($id){

    $this->load->model('status_model');//load the status model
    $this->load->model('comment_model');//load the comment model

    $status = $this->status_model->get_entry_and_category($id); 
    $comments = $this->comment_model->get_comments($id);   

    if($status !== false) {

        if($comments !== false) {

            foreach($comments as $comment){

                  if($comment->reply_id == 0){

                    $comment =   

                  }
            }

            $content_data['comments'] = $comments; 

        }        

        $content_data['status'] = $status; 
        $data['content'] = $this->load->view('status_view', $content_data, TRUE);
        $data['title'] = $status->title.' - High Value Status'; 
        $data['page_title'] = $status->title;//The page H1 tag
        $this->load->view('home', $data);   

    }
    else 
    { 
        $this->session->set_flashdata('invalid', '<p class="rejectionalert"><span>The status you tried to view does not exist.</span></p>');
        redirect('home'); 
    }

} 
```

模型功能：

```
//Gets comments associated with an individual status   
function get_comments($status_id, $offset=null, $limit=null)
{
    $this->db->select('id, comment, nickname, created, reply_id');
    $this->db->from('comments');
    $this->db->where('active', 1);
    $this->db->where('status_id', $status_id);

    $query = $this->db->get(); 

    if ($query->num_rows() > 0) {

        return $query->result();      
    }

    return false;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:22:54.557

这可行，但它使用多个查询，模型：

```
 function get_comments($status_id, $limit=NULL, $offset=NULL)
 {
    $this->db->where(array('status_id' => $status_id, 'reply_id' => 0));
    $query = $this->db->get('comments', $limit, $offset);

    $parents = $query->result_array();
    $comments = array(); 

    foreach($parents as $key => $comment)
    {
        array_push($comments, $comment);

        $this->db->order_by('created', 'ASC');
        $this->db->where(array('status_id' => $status_id, 'reply_id' => $comment['id']));

        $comments = array_merge($comments, $this->db->get('comments')->result_array());
    }

    return $comments;   

} 
```

我认为对所有评论进行一次查询，通过它们的 id 将它们索引到一个数组中，然后再次遍历它们以找到它们的孩子会更有效。我仍然不知道如何实现？

# python - 使用 pandas 以其他列中的值为条件的跨行和列的平均值

> ID：14697124
> 
> 赞同：1
> 
> 时间：2013-02-04T22:43:08.443
> 
> 标签：python, pandas

我想在使用熊猫的其他列中的值的条件下对某些行和列的值进行平均。数据框包含以下信息：

*   指示准确性的列（缩写为“acc”）
    *   0 = 无响应
    *   1 = 不正确
    *   2 = 正确
*   指示反应时间的列（缩写为“rt”）

以下是数据框中信息的摘录：

```
a1_acc a1_rt a2_acc a2_rt a3_acc a3_rt b_acc b_rt
2      780   2      830   2      690   2     950
1      630   2      750   0      0     2     890
2      710   2      810   1      740   1     820 
```

我想做的是结合所有“a”（但不是“b”）反应时间，如果它们来自正确的反应。也就是说，我想要一个包含以下反应时间的 numpy 数组（或其他合适的数据结构）：

```
780, 830, 690, 750, 710, 810 
```

基于这些信息，我想计算平均反应时间（在拒绝反应时间偏离平均值超过 3 个标准偏差之后）。

任何帮助将不胜感激。

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:51:04.117

我认为这不是您的 DataFrame 的最佳形状——我认为像“letter”、“number”、“acc”、“rt”之类的列（给它们更有意义的名称）会更容易旋转。无论如何，按照您目前的安排：

```
>>> d
   a1_acc  a1_rt  a2_acc  a2_rt  a3_acc  a3_rt  b_acc  b_rt
0       2    780       2    830       2    690      2   950
1       1    630       2    750       0      0      2   890
2       2    710       2    810       1    740      1   820 
```

首先，我们切片`.ix`以获取`_acc`列并将它们与 2 进行比较：

```
>>> d.ix[:,0:6:2] == 2
  a1_acc a2_acc a3_acc
0   True   True   True
1  False   True  False
2   True   True  False 
```

然后我们将其应用于`_rt`列的一部分：

```
>>> d.ix[:, 1:6:2][d.ix[:,0:6:2] == 2]
   a1_rt  a2_rt  a3_rt
0    780    830    690
1    NaN    750    NaN
2    710    810    NaN 
```

展平这个：

```
>>> v = d.ix[:, 1:6:2][d.ix[:,0:6:2] == 2].unstack()
>>> v
a1_rt  0    780
       1    NaN
       2    710
a2_rt  0    830
       1    750
       2    810
a3_rt  0    690
       1    NaN
       2    NaN 
```

现在我们可以取平均值并查看标准偏差（可能有一个内置函数可以做到这一点，但我懒得去查找它），自动忽略`NaN`需要的值：

```
>>> v.mean()
761.66666666666663
>>> dev = ((v-v.mean())/v.std()).abs() < 3
>>> dev
a1_rt  0     True
       1    False
       2     True
a2_rt  0     True
       1     True
       2     True
a3_rt  0     True
       1    False
       2    False 
```

我们使用的所有值都在 3 个标准差之内，所以这个削减不是很有趣，但我们可以无论如何应用它：

```
>>> v[dev].mean()
761.66666666666663 
```

同样，我会在一开始就考虑重塑你的数据，所以`.ix`丑陋可能更像`d[(d["letter"] == a) & (d["acc"] == 2)]["rt"]`.

# python - 我无法启动 ipython-listener

> ID：14697125
> 
> 赞同：0
> 
> 时间：2013-02-04T22:43:11.610
> 
> 标签：python, ide, ipython, gedit

我正在尝试使用[gedit3](https://github.com/smathot/gedit-plugin-ipython/blob/master/README)的 ipython 插件启动并运行，但它需要`ipython-listener`，当我尝试启动它时，我得到了这个：

```
Traceback (most recent call last):
  File "/usr/local/bin/ipython-listener", line 27, in <module>
    from IPython.frontend.terminal.embed import InteractiveShellEmbed
ImportError: No module named terminal.embed 
```

我正在运行 ipython 版本 0.10.2 和 python 版本 2.7.2+

我试图做`pip install terminal.embed`但找不到它：

```
Downloading/unpacking terminal.embed
  Could not find any downloads that satisfy the requirement terminal.embed
No distributions at all found for terminal.embed
Storing complete log in /home/amanda/.pip/pip.log 
```

那么现在怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:03:00.447

> 我试着做`pip install terminal.embed`但找不到

它不是一个包，它是 IPython 的一部分。你的 IPython 太旧了（几年了）。

该插件依赖于 IPython ≥ 0.11（当前为 0.13.1）。尝试：

```
pip install --upgrade ipython 
```

# sql-server - TempDB性能爬取；我们应该重新启动吗？

> ID：14697128
> 
> 赞同：4
> 
> 时间：2013-02-04T22:43:33.993
> 
> 标签：sql-server, sql-server-2008

**一点背景知识：** 我们在服务器上有 17 个不同的 TempDB 数据库文件和 6 个 TempDB 日志文件。它们分布在不同的驱动器上，但托管在 2 个驱动器阵列上。

我看到磁盘 IO 响应时间超过了建议的限制。通常，您希望磁盘在 5 到 10 毫秒内做出响应，而不会超过 200 毫秒。我们在 TempDB 文件上看到高达 800 毫秒的随机峰值，但仅在一个驱动器阵列上。

**建议的解决方案：** 重新启动 SQL 服务器。在 SQL Server 关闭时，重新启动托管大部分 TempDB 文件的驱动器阵列。此外，当 SQL 关闭时，重做网络连接以绕过网络交换机，以尝试消除硬件上的任何缓慢来源。

这是一个好主意还是在黑暗中开枪？有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T22:57:36.297

17？谁想出了这个数字？[请阅读这个](http://www.sqlskills.com/blogs/paul/a-sql-server-dba-myth-a-day-1230-tempdb-should-always-have-one-data-file-per-processor-core/)和[这个](http://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/)- 很少有 > 8 个文件会有帮助的场景，特别是如果您只有 2 个底层阵列/控制器。一些建议：

1.  使用偶数个文件。大多数人从 4 或 8 开始，只有当他们证明他们仍然存在争用时才会增加（并且还知道他们的底层 I/O 实际上可以处理更多文件并随它们扩展；在某些情况下它不会效果或完全相反的效果 - 不同的驱动器号不一定意味着更好的 I/O 路径）。
2.  确保所有数据文件的大小相同，并具有相同的自动增长设置。拥有 17 个具有不同大小和自动增长设置的文件将击败循环 - 在很多情况下，由于 SQL Server 执行按比例填充的方式，只会使用一个文件。有一个奇数似乎……嗯，对我来说很奇怪。
3.  摆脱 5 个额外的日志文件。[他们是绝对没用的](http://www.sqlskills.com/BLOGS/PAUL/post/Inside-the-Storage-Engine-More-on-the-circular-nature-of-the-log.aspx)。
4.  使用跟踪标志 1117 确保所有数据文件同时增长并且（因为 2.）以相同的速率增长。请注意，此跟踪标志适用于所有数据库，而不仅仅是 tempdb。[更多信息在这里](http://blogs.technet.com/technet_blog_images/b/sql_server_sizing_ha_and_performance_hints/archive/2012/02/09/sql-server-2008-trace-flag-t-1117.aspx)。
5.  您也可以考虑使用跟踪标志 1118 来更改分配，但请先[阅读此内容](http://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/)。
6.  确保[即时文件初始化](http://blogs.msdn.com/b/sql_pfe_blog/archive/2009/12/23/how-and-why-to-enable-instant-file-initialization.aspx)已打开，以便文件在展开时不必清零。
7.  预先调整您的 tempdb 文件的大小，以便它们在正常的日常活动中不必增长。不要收缩 tempdb 文件，因为它们突然变大了——这只是一个冲洗和重复操作，因为如果它们曾经变得那么大，它们会再次变得那么大。在此期间，您不能出租回收的空间。
8.  如果可能，请在`DBCC CHECKDB`其他地方进行。如果你`CHECKDB`经常跑步，耶！拍拍自己的背。但是，这可能会对 tempdb 造成影响 -[请参阅这篇关于优化此操作](http://www.sqlperformance.com/2012/11/io-subsystem/minimize-impact-of-checkdb)并在可行的情况下将其从生产实例中拉出的文章。
9.  最后，验证您所看到的争用类型。你说 tempdb 性能爬，但是是通过什么方式呢？你如何衡量这个？[有关确定 tempdb 瓶颈的确切性质的一些](http://www.sqlskills.com/blogs/paul/tempdb-configuration-survey-results-and-advice/)信息[here](http://www.sqlservercentral.com/blogs/robert_davis/2010/03/05/Breaking-Down-TempDB-Contention/)和[here](http://technet.microsoft.com/en-gb/library/cc966545.aspx)以及[here](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2009/01/11/tempdb-monitoring-and-troubleshooting-allocation-bottleneck.aspx)和[here](http://sqlblog.com/blogs/adam_machanic/archive/2011/04/21/analyzing-tempdb-contention-a-month-of-activity-monitoring-part-21-of-30.aspx)。

您是否考虑过显式减少对 tempdb 的使用（减少 #temp 表、@table 变量和静态游标 - 或完全使用游标）？您是否大量使用 RCSI、MARS 或 LOB 类型的局部变量？

# css - CSS 下拉菜单悬停

> ID：14697129
> 
> 赞同：3
> 
> 时间：2013-02-04T22:43:38.380
> 
> 标签：css, drop-down-menu, menu

我需要帮助。我正在做一个带有共享图标的下拉菜单。我的问题是：我希望当我将鼠标移到页脚中的主共享图标上而不是去选择另一个图标（如 facebook）时，主图标仍然像鼠标悬停一样被选中，但它没有有效。

```
<div class="footer large blue">Footer Blue
<div class="pull-right buttons">
    <ul>
        <li><a class="btn2 large share2 blue" href="#">Share</a>

            <ul>
                <li><a class="btn large rss" href="#">RSS</a>

                </li>
                <li><a class="btn large twitter" href="#">Twitter</a>

                </li>
                <li><a class="btn large plus" href="#">G+</a>

                </li>
                <li><a class="btn large facebook" href="#">Fb</a>

                </li>
            </ul>
        </li>
        <li><a class="btn2 large btt blue" href="#">Back to Top</a>

        </li>
    </ul>
</div> 
```

我认为问题在于元素*li*和*a*是两个独立的标签。

**观看这张图片以更好地理解**我在说什么（因为我无法更好地解释它._。）

**[http://db.tt/Kujz3Pv4](http://db.tt/Kujz3Pv4)**

这是代码：http: [//jsfiddle.net/zPavan/KHWJ4/2/](http://jsfiddle.net/zPavan/KHWJ4/2/)

如果对代码有任何问题或有建议，我感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:49:16.607

而不是依赖于具体的悬停`<a>`，使其依赖于包含整个的列表项`<ul>`：

```
li:hover > .btn2.blue {
    background-color: hsl(197, 59%, 30%);
} 
```

我建议给那个特定的 li 一个`.share`你也可以使用的类。

[http://jsfiddle.net/ExplosionPIlls/KHWJ4/3/](http://jsfiddle.net/ExplosionPIlls/KHWJ4/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:51:19.593

我认为这会做到：

```
.buttons ul li:hover > a {
    background-color: #1f5f79;
} 
```

# network-drive - Plastic SCM 服务器可以使用网络驱动器吗？

> ID：14697132
> 
> 赞同：1
> 
> 时间：2013-02-04T22:43:44.283
> 
> 标签：network-drive, plasticscm

我们是一些开发人员，在 Windows 工作站上工作，他们可以通过网络驱动器（比如 X:) 访问文件服务器上的存储。我们不能在服务器本身上安装任何软件。

我正在考虑在工作站上安装塑料服务器组件并将塑料服务器配置为保存到 X: 驱动器。这可能吗？

我调查过的一些 SCM 存在网络驱动器问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:13:48.240

[管理指南](http://www.plasticscm.com/releases/4.1/manuals-html/en/adminguide.htm)中没有任何东西可以阻止它。

唯一的问题是服务器在通过网络驱动器访问数据时延迟更大，而不是访问本地驱动器上的相同数据。

# android - Android intent.putExtra() 从 Service 到 Activity

> ID：14697133
> 
> 赞同：3
> 
> 时间：2013-02-04T22:43:47.387
> 
> 标签：android, service, android-activity

一段时间以来，我试图将简单的`String`数据从 the`Service`传递到`Activity`with`Intent.putExtra()`但没有成功。`Intent.getStringExtra()`总是`NULL`

服务代码：

```
Intent intent=new Intent(getBaseContext(),MainActivity.class);
intent.putExtra(Consts.INTERNET_ERROR, "error");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(intent); 
```

活动代码：

```
public void onResume() {

    super.onResume();

    Intent i = getIntent();
    String test = "temp";
    Bundle b = i.getExtras();
    if (b != null) {
        test = b.getString(Consts.INTERNET_ERROR);
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T03:15:29.833

[为了详细说明我上面的评论，getIntent 返回 [1] http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)) [1]中记录的原始意图 ：

来自服务的意图通过 onResume 之前调用的 onNewIntent 传递给您的活动。因此，如果您覆盖 onNewIntent，您将获得预期的字符串。

```
@Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);

    // set the string passed from the service to the original intent
       setIntent(intent);

} 
```

然后您的代码 onResume 将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:50:18.133

我看不到您`String`在服务代码中添加的位置，但是您可以运行以下代码来发送字符串。

```
Intent intent=new Intent(getBaseContext(),MainActivity.class);
Bundle b = new Bundle();
b.putString(Consts.INTERNET_ERROR, "Your String Here");
intent.putExtras(b);
intent.setAction(Consts.INTERNET_ERROR);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:53:51.290

首先：尝试将您的代码从 onResume 移动到 onStart：

```
public void onStart() {

    super.onStart();

    Intent i = getIntent();
    String test = "temp";
    Bundle b = i.getExtras();
    if (b != null) {
        test = b.getString(Consts.INTERNET_ERROR);
    }
} 
```

如果它仍然无法正常工作，请尝试以下操作：

第一项活动：

```
Intent myIntent = new Intent(firstActivity.this, secondActivity.class);
myIntent.putExtra("mystring",strValue)' <=your String
startActivity(myIntent); 
```

第二个活动：

```
 String str = getIntent.getExtras().getString("mystring");<=get string 
```

并在此处查看一些信息：

[如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:05:52.907

而不是打电话

```
extras.getString(); 
```

尝试调用：

```
intent.getStringExtra("key"); 
```

另外，您是否直接**从**服务开始活动？或者您是否已经在活动上运行并且只是想从服务接收数据？

# c# - FileStream.Write 不写任何东西

> ID：14697135
> 
> 赞同：0
> 
> 时间：2013-02-04T22:43:53.980
> 
> 标签：c#, filestream

我编写了以下代码：

```
public static class PLog
{
    private static FileStream logFileStream;
    private static string logFilePath;

    public static void Initialize()
    {
        logFilePath = PSettings.IO.dirLogs + "log_" + DateTime.Now.ToString("ddMMyy_HHmmss") + ".txt";

        if (!Directory.Exists(PSettings.IO.dirLogs)) Directory.CreateDirectory(PSettings.IO.dirLogs);

        logFileStream = new FileStream(logFilePath, FileMode.Create);
    }

    public static void WriteLine(string text)
    {
        byte[] textArray = Encoding.ASCII.GetBytes("[" + DateTime.Now.ToString("dd.MM.yyyy - HH:mm:ss") + "] " + text + "\n");

        logFileStream.Write(textArray, 0, textArray.Length);
    }

    public static void Close()
    {
        logFileStream.Close();
    }
} 
```

但是当我这样称呼它时，它不会向文件写入任何内容：

```
PLog.Initialize();
PLog.WriteLine("test");
PLog.Close(); 
```

该文件已创建，但它的大小为 0 字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:47:52.040

`FileStream`实现`IDisposable`。

*在代码中显示的静态*上下文中使用它很少是一个好主意，因为很难真正确保调用 IDisposable.Dispose() 以正确清理流。

如果可以，请`FileStream`与*using*关键字一起使用以确保`Dispose()`被调用

```
using (FileStream fs = new FileStream(logFilePath, FileMode.Create))
{
   // Do stuff with fs
} 
```

如果您必须保留当前结构，请检查是否`Close()` *确实*被调用（并且您不会例如获得阻止它被调用的异常）。

**更新**

关于您对另一个答案的评论：

`Environment.Newline`在写出之前附加到字符串的末尾。

或者，您可以使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)，它公开一个`WriteLine()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:45:06.327

你需要使用flush来保存

```
logFileStream.Flush(); 
```

编辑：

关闭也应该刷新，但如果稍后发生，则缓冲区可能会被垃圾收集

# java - 没有 commandName 的 Spring 表单

> ID：14697143
> 
> 赞同：6
> 
> 时间：2013-02-04T22:44:21.723
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我是Spring的新手，我有一个问题。我有一个用于向控制器发送信息的表格。我不需要或不想让 bean 备份表单，所以我将表单`commandName`中的属性留空，如下所示：

```
<form:form action="getReportFile.html" method="post">
            <table>
                <tr>
                    <td><form:label path="field1">Field1:</form:label></td>
                </tr>
                <tr>
                    <td><form:select path="field1" items="${FieldMap}" />                        
                    </td>
                </tr>
               <tr>
                   <td><form:label path="field2">Field2:</form:label></td>
               </tr>
               <tr>
                   <td><form:input path="field2"/></td>
               </tr>
               <tr>
                   <td><input type="submit" value="Submit" /></td>
               </tr>
           </table>
       </form:form> 
```

我收到以下错误：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'command' available as request attribute 
```

我可以[在这里](https://stackoverflow.com/questions/11651769/spring-3-mvc-is-it-possible-to-have-a-spring-form-without-commandname-binding)看到，当你不给它一个值时，`commandName`它使用 default `'command'`，但是，**我是否需要配置其他任何东西？我应该在里面放一颗`'command'`豆子`dispatcher-servlet.xml`吗？那个豆子怎么办？**

我只想要一个表格来将信息发送给控制器。**我真的必须创建一个 bean 来支持它吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T01:08:25.090

如果您根本不需要命令对象，请避免使用 Spring 表单并简单地使用 HTML 表单。

所以，改变

```
<form:form action="getReportFile.html" method="post">
     .
     .
     .
</form:form> 
```

到

```
<form action="getReportFile.html" method="post">
     .
     .
     .
</form> 
```

命令对象确实不是强制性的。仅当您使用 Spring 的形式（如`<form:form></form:form>`使用以下库）时，它才是强制性的。

```
<%@taglib prefix="form" uri="http://www.springframework.org/tags/form"%> 
```

`request.getParameter("paramName")`如果您使用 HTML 表单，则必须使用该方法接收请求参数。

* * *

> 如果您没有表单支持 bean，则不能使用 Spring 标记，因为它确实需要一个！该标记上的“路径”属性应该指定模型 bean 属性的路径以进行数据绑定。

[http://forum.springsource.org/showthread.php?83532-how-to-have-form-without-command-object&p=279807#post279807](http://forum.springsource.org/showthread.php?83532-how-to-have-form-without-command-object&p=279807#post279807)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T22:58:53.490

我不知道是否可以在 Spring MVC 中制作一个没有支持 bean 的表单，但我认为如果不使用 bean，你不会从 Spring MVC 中获得太多东西。您正在使用的那些表单标签（如表单：输入）绑定到支持 bean 的属性，这使您可以附加验证、错误消息、类型转换等内容。您的意图是否只是将表单发布到 Spring 控制器，并使用“request.getParameter('field1')”之类的代码处理服务器上的所有表单字段？然后我建议只使用纯 HTML 表单。

# windows-phone-7 - 使用 XAML（适用于 WP7）如何获得一个水平规则，上面覆盖着居中的文本，该文本会随着方向的变化而调整大小？

> ID：14697147
> 
> 赞同：0
> 
> 时间：2013-02-04T22:44:51.800
> 
> 标签：windows-phone-7, xaml

我希望达到的效果是，

```
------------------- some text --------------------- 
```

这样如果手机变成横向，规则就会伸展（因此 AFAIK`Line`元素不适合）。

这可以在 XAML 中轻松完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:56:23.103

好吧，想通了，

```
<Grid Margin="0">
    <Border BorderThickness="0,2,0,0" BorderBrush="White" Margin="0,15,0,0" />
    <Border Background="Black" HorizontalAlignment="Center" Padding="5,0" >
        <TextBlock TextWrapping="Wrap" Text="some text" HorizontalAlignment="Center" >
    </Border>
</Grid> 
```

必须调整第一个`Border`上边距，使其与文本的中点对齐。

# python - 从 Python 中的命名空间对象导入变量

> ID：14697158
> 
> 赞同：1
> 
> 时间：2013-02-04T22:45:23.410
> 
> 标签：python, namespaces, argparse

假设我有一个`args`从调用中获得的命名空间`parser.parse_args()`，它解析命令行参数。

如何将此命名空间中的所有变量导入我当前的命名空间？

例如

```
parser.add_argument('-p', '--some_parameter', default=1)

args = parser.parse_args()

# ... code to load all variables defined in the namespace args ...

print some_parameter 
```

我当然可以：

```
some_parameter = args.some_parameter 
```

但如果我有大量参数，我需要为每个参数设置一个这样的行。

是否有另一种方法可以从命名空间导入变量而不必一个一个地遍历它们？

**PS**：`from args import *`不起作用。

**PS2**：我知道这是一种不好的做法，但这在某些极端情况下会有所帮助，例如我们在原型代码和快速测试**时**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:51:49.353

[`vars()`使用函数](http://docs.python.org/3/library/functions.html#vars)的结果更新您的本地命名空间：

```
globals().update(vars(args)) 
```

这通常*不是*一个好主意。将这些属性保留在命名空间中。

您可能会产生比使用这种方法解决的问题更多的问题，尤其是如果您不小心配置了一个[`dest`名称](http://docs.python.org/3/library/argparse.html#dest)会影响您关心的内置或本地名称的参数，例如`list`or`print`或其他东西。玩得开心寻找*那个*错误！

Tim Peters 在他的《Python 之禅》中已经说明了这一点：

> 命名空间是一个很棒的想法——让我们做更多的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:08:20.233

可能是有史以来最糟糕的想法：既然您可以将任意对象传递给`parse_args()`，请传递`__builtins__`模块，以便所有属性都可以作为局部变量查找。

```
p = argparse.ArgumentParser()
p.add_argument("--foo")
p.parse_args( "--foo bar".split(), __builtins__)
print foo 
```

这甚至对目的地不是有效 Python 标识符的参数“起作用”：

```
# To use the example given by Francis Avila in his comment on Martijn Pieters' answer
getattr(__builtins__, '2my-param') 
```

# c# - 当一个操作数是一个接口时，回退到 Object 的 == 运算符的原因是什么？

> ID：14697161
> 
> 赞同：10
> 
> 时间：2013-02-04T22:45:28.947
> 
> 标签：c#

考虑以下类型：

```
class A { }
class B { }
interface IC { }

A a = null; // the value doesn't matter - null or anything else, for all three
B b = null;
IC c = null; 
```

以下[不编译](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28CS0019%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)**：[**_**](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28CS0019%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)**

 **```
var x = a == b; 
```

但以下**确实**编译（我惊讶地发现）：

```
var x = a == c; 
```

据我了解，编译器回退到使用默认的 == 运算符，该运算符是在 object 上定义的，因此可以接受任何类型的参数。IL 看起来像这样（忽略 的细节`ldfld`）：

```
ldarg.0
ldfld class A a
ldarg.0
ldfld class IC c
ceq
stloc.0 
```

换句话说，它使用引用相等。

我的问题：

1.  在语言设计方面，为什么这有意义？对我来说不是，我认为这是一个很大的陷阱。

2.  如果这确实是一个陷阱，代码分析不应该警告我们吗？（不 - 它没有）。顺便说一句，[ReSharper 似乎有这个功能](http://youtrack.jetbrains.com/issue/RSRP-286954)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T23:01:45.037

第二行编译的原因是可能有另一个类从A派生并实现IC。

```
public class D : A, IC {}
...
a = new D(); c = a; var t = a == c; //t = true; 
```

类只能从一个类继承，所以你永远不能创建一个从 A 和 B 都继承的类，除非 A 是 B 的后代，反之亦然。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:06:44.080

测试无法编译的原因`a == b`是因为编译器有足够的信息知道测试不可能永远存在`true`，因为这两个类不在同一个层次结构中。因此，它相当于编译器不允许您错误地编写实际上是常量的条件。

对于接口比较，编译器看到有一个`operator==(object, object)`它可以使用，并且因为两者`A`和`IC`都可以隐式转换为`object`事实上必须发生的事情。很可能有另一种类型（甚至不一定是引用类型）可以实现`IC`，因此条件是真实的。

我很欣赏 R# 警告；正如页面所说，接口类型之间的相等比较在某些情况下有些可疑，并且有一个非常具有描述性，易于替换为解决方案：`object.ReferenceEquals`. 当然，有一个相反的论点是等式运算符可能已被重载，因此测试可能是有意义的。或者它可以只是一个以更简洁的风格写作的人。显然，尽管在编译器中禁止这样的使用有点过分。**

# mysql - MySQL按连接表中的分组日期排序

> ID：14697165
> 
> 赞同：2
> 
> 时间：2013-02-04T22:45:51.250
> 
> 标签：mysql, sql, sql-order-by

我有一张桌子，叫做`Posts`，还有第二张桌子，叫做`Comments`。这些通过`id`帖子表中的`postid`列和评论表中的列链接。

两个表都有一`date`列，即发布日期。我希望能够根据最新活动对我的帖子进行排序，因此它们应该按帖子的日期（如果没有评论）或*最新*评论的日期排序。

为了做到这一点，我构建了这个简单的查询：

```
SELECT Posts.id FROM Posts
INNER JOIN Comments ON Posts.id = Comments.postid
ORDER BY Comments.date ASC 
```

不幸的是，这有一个非常明显的问题。如果帖子上没有评论，它将被忽略。如果一个帖子有多个评论，它将在结果中显示多次。

如何构建查询以满足这些要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:48:21.053

您需要使用 a ，它仅在 JOIN 成功时`LEFT JOIN`返回来自 的所有行`Posts`和来自的行。`Comments`如果连接不成功，因为没有带有 的注释`comments.postid=posts.id`，您仍然可以从 中获取所有值`Posts`，但来自 的值`Comments`将为 Null。

然后您必须使用`GROUP BY`，因此每个 ID 只会获得一行，并且您可以使用 MAX() 聚合函数来获取评论表中的最大日期。

如果没有评论，`max(comments.date)`则为 Null，因此 COALESCE 将`Posts.date`改为返回。

最后的查询是这样的：

```
SELECT Posts.id
FROM Posts LEFT JOIN Comments
     ON Posts.id = Comments.postid
GROUP BY Posts.id
ORDER BY coalesce(max(Comments.date),Posts.date) ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:49:57.883

您需要一个左外连接来考虑可能没有评论：

```
SELECT Posts.id
FROM Posts left JOIN
     Comments
     ON Posts.id = Comments.postid
group by posts.id
ORDER BY coalesce(max(Comments.date), posts.date) ASC 
```

# c++ - Qt C++ 控制台服务器，等待套接字连接并同时接受输入？

> ID：14697168
> 
> 赞同：2
> 
> 时间：2013-02-04T22:46:10.813
> 
> 标签：c++, qt, sockets, input

我正在编写一个服务器作为 Qt 控制台应用程序。我将服务器设置为等待套接字连接，但我还需要允许用户将命令输入服务器以进行管理。两者都是独立工作的。但是，我遇到的问题是，当我在接受和处理输入命令的 while 循环中时，服务器不接受连接。

我有一个 Socket 类，在它的构造函数中，我有：

```
connect(server,SIGNAL(newConnection()),this, SLOT(newConnection())); 
```

在构造函数的正下方，我调用了一个具有更深入版本的函数，用于从用户那里获取命令：

```
QTextStream qin(stdin, QIODevice::ReadOnly);
QString usrCmd;

while(usrCmd != "exit" && usrCmd != "EXIT") {   
    //Get command input and process here
} 
```

在 newConnection() 中，我只接受下一个连接，然后使用套接字。

```
QTcpSocket *serverSocket = server->nextPendingConnection(); 
```

我怎样才能使套接字可以等待连接**并同时**等待用户输入的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:04:52.430

您的代码有问题是因为您使用 while 循环阻塞了事件循环。因此，您的问题的解决方案是异步读取标准输入。在 Linux 上（我猜在 Mac 上），您可以`QSocketNotifier`根据各种 Internet 资源来通知数据何时到达标准输入，并手动读取它）。

当我使用 Windows 时，我建议您以这种方式进行（应该适用于所有平台）：

1.  打开从标准输入读取数据的线程
2.  一旦你得到一些数据（也许是行？），你可以使用 Qt 信号槽机制将数据传递给主线程进行处理，而不会阻塞事件循环。

所以，这是伪代码。MainAppClass 应该是您现有的服务器类，只需编辑构造函数以创建新线程，并添加用于处理数据的新插槽。

```
class Reader: public QThread
{
    Q_OBJECT
 public:
    Reader(QObject * parent = 0 ): QThread(parent){}

    void run(void)
    {
         forever{
             std::string data;
             std::getline (std::cin, data);

             if(data == "exit")
             {
                 emit exitServer();
                 return;
             }

             emit dataReady(QString::fromStdString(data));
         }
     }

signals:
    void dataReady(QString data);
    void exitServer();

};

class MainAppClass: public QObject
{
    Q_OBJECT
public:
    MainAppClass()
    {
        Reader * tr = new Reader(this);
        connect(tr, SIGNAL(dataReady(QString)), this, SLOT(processData(QString)));
        connect(tr, SIGNAL(exitServer()), this, SLOT(exitServer()));
        tr->start();
    }

public slots:
    void processData(QString data)
    {

        std::cout << "Command: " << data.toStdString() << std::endl;
    }

    void exitServer()
    {
       std::cout << "Exiting..." << std::endl;
    }
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainAppClass myapp; //your server

    app.exec();
    return 0;
} 
```

**由于我编写了如何使用 QTcpSocket 的简单指南，所以这里是简短的**

当您获得客户端`QTcpSocket`时，将信号连接到某个插槽，并从对象中`readyRead()`读取数据。`sender()`您不需要在构造函数中阅读任何内容。

对于阅读，您可以使用标准`QIODevice`功能。

**注意：**这是伪代码，您可能需要更改一些内容（检查读取流的状态、在某个列表中保存指向套接字的指针、订阅`disconnected()`信号、调用`listen()`构造函数、检查是否`QTcpServer`正在侦听等）。

所以，你需要`onReadyRead()`在你的类中有一个插槽，它将具有以下代码：

```
void Server::readyReadSlot()
{
    QTcpSocket *client = (QTcpSocket*)sender(); // get socket which emited the signal
    while(client->canReadLine()) // read all lines! 
                                 // If there is not any lines received (you may not always receive 
                                 // whole line as TCP is stream based protocol),
                                 // you will not leave data in the buffer for later processing.
    {
        QString line = client->readLine(); 
        processLine(line); // or emit new signal if you like
    }
} 
```

在内部`newConnection()`，您需要将`readyRead()`信号与插槽连接。

```
void Server::newConnection()
{
    QTcpSocket *clientSocket = server->nextPendingConnection(); 
    connect(clientSocket, SIGNAL(readyRead()), this, SLOT(readyReadSlot()));
} 
```

# c - 程序堆大小？

> ID：14697170
> 
> 赞同：2
> 
> 时间：2013-02-04T22:46:47.470
> 
> 标签：c, unix, memory-management

C 中程序的最大堆大小是固定的，还是如果我继续 malloc-ing 它会在某个时候开始溢出？

代码：

```
 while(connectionOK) //connectionOK is the connection with server which might be forever
 {
    if(userlookup_IDNotFound(userID))
     user_struct* newuser = malloc(getsize(user_struct));
     setupUserAccount(newuser);
 } 
```

如果这很重要，我在 ubuntu/linux 中使用 gcc。我知道像 getrlimit 这样的东西，但不确定它是否给出堆大小。尽管它确实为输入参数中的选项之一提供了默认堆栈大小。此外，valgrind 可能是一个很好的工具，如这里建议的[如何获取程序的堆大小，](https://stackoverflow.com/questions/9748792/how-to-get-heap-size-of-a-program)但如果存在堆溢出，我想动态打印错误消息。我的理解是操作系统在进程创建开始时分配的进程地址空间（如果它愿意，它实际上可以使用整个内存），但我不确定它是否会在请求时动态分配更多物理内存额外的内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:49:35.980

堆永远不会溢出它只是在某个点耗尽内存（通常是在`malloc()`返回时`NULL`）所以要检测内存不足只需检查调用的返回值`malloc()`。

```
if (newuser == NULL)
{
    printf("OOM\n");
    exit(1); /* exit if you want or can't handle being OOM */
} 
```

`malloc()`内部将从操作系统请求更多内存，因此它会动态扩展，因此它不是真正固定的大小，因为它会将不再需要的页面返还给操作系统，并在需要它们的任何给定时间请求更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:11:10.480

从技术上讲，`malloc`在大多数系统上分配的不是内存，而是*地址空间*。在现代系统上，您可以轻松地使用 malloc 分配数 PB 的地址空间，而 malloc 可能总是返回一个非空指针。这背后的原因是，大多数操作系统实际上仅在主动修改一块地址空间时才执行内存分配。只要它原封不动地坐在那里，操作系统就会记录下进程地址空间的某个区域已被有效保留以供将来使用。

这种行为称为“内存过度使用”，在维护 Linux 系统时非常重要。如果可能发生，则分配的内存在一段时间内超过可用内存，然后某些程序实际上会写入一些过度使用的内存。然后发生的事情是，所谓的“Out Of Memory Killer”（OOM 杀手）将横冲直撞并杀死它认为最合适的那些进程；不幸的是，它通常是您在任何情况下都不想放松的那些过程。众所周知，数据库是 OOM 杀手的主要目标之一。

因此，强烈建议在高可用性 Linux 机器上切换内存过度使用。在禁用内存过量使用的情况下，每个地址空间请求都必须由内存支持。在这种情况下，如果请求无法完成，malloc 实际上会返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:49:58.663

在某些时候，当系统内存不足时，`malloc()`将返回。`NULL`然后，当您尝试取消引用时，您的程序将中止执行。

`malloc(SIZE_MAX)`看看你做几次会发生什么:-)

# java - 如何在 Tomcat 中中断部署/拒绝应用程序？

> ID：14697174
> 
> 赞同：1
> 
> 时间：2013-02-04T22:47:10.893
> 
> 标签：java, tomcat, war

我正在尝试验证应用程序启动时的一些条件，例如系统中是否存在关键文件。为此，我使用了 SerlvetContextListener，它在启动时测试一堆条件。

如果不满足这些条件中的任何一个，我该如何让应用程序拒绝在 Tomcat 中的部署？我可以抛出一个异常，并在日志中捕获它，但我希望应用程序根本不启动。即使 Tomcat 服务启动失败也是一个解决方案。

最简单的方法是什么？我应该尝试连接到 Tomcat 管理器并取消部署该应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:35:05.663

好...

根据您最初的问题，如果某些文件不存在（或不满足其他条件），您希望应用程序“根本不启动”。从逻辑上讲，条件检查不可能是应用程序的一部分（如果要作为应用程序的一部分进行检查 - 例如，在启动时 - 那么必须启动应用程序以进行这些检查发生）。

所以：

1.  如果您根本不希望应用程序启动*，*除非满足某些条件，那么您的解决方案必须在应用程序外部。例如，您可以编写自己的 Tomcat 启动脚本，该脚本将首先检查您的条件，然后才启动 Tomcat。

2.  如果您不介意应用程序启动和执行检查，那么这`ServletContextListener`正是您应该利用的。从内部抛出异常`contextInitialized()`将导致应用程序“不可用”来处理请求。或者，如果检查未通过，您可以与 Tomcat 的 MBean 通信以停止应用程序。

# search - 利用 Google 的爬虫基础设施来构建您自己的利基索引？

> ID：14697179
> 
> 赞同：0
> 
> 时间：2013-02-04T22:47:34.510
> 
> 标签：search, indexing, web-crawler, discovery

假设我想建立一个专门的信息目录，组织可以提供关于他们自己的信息。我们同意元数据标准，它们在网站上包含此信息。

是否有可能以某种方式使用 Google 的基础架构来解决使用该元数据发现站点的问题，并定期重新爬取以获取任何更新？

通常解决这类问题的方法似乎涉及使用中央索引“注册”站点，然后中央索引构建基础设施以定期访问每个注册站点。但我想知道它是否可以做得更聪明——而且不需要正式“注册”。

例如，假设您可以将元数据标准的一部分设为唯一字符串，然后您可以通过 Google 搜索该字符串。然后你会处理页面的其余部分。但是有没有更精简、更智能、更正式的方式来做到这一点？

# android - Google MAPs API for android 限制 2500 个请求/天是每个客户端设备还是每个应用程序密钥？

> ID：14697180
> 
> 赞同：9
> 
> 时间：2013-02-04T22:47:35.410
> 
> 标签：android, google-maps, limit, google-maps-android-api-2, license-key

抱歉，我发现了类似的问题——但没有找到答案：只有讨论。我正在开发旨在在地图上放置点和绘制路线的 android 应用程序。如果谷歌限制使用他们的地图 2500 r/day 每个键 - 没有办法使用它，因为即使你的应用程序曾经被出售 - 你需要每月为每额外 1000 个 req/day 支付费用。尤其是免费应用不清楚：1年后每月100000次下载要花多少钱？请分享您的经验（不是您的假设）。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T17:07:02.153

您正在寻找的限制并不完全清楚，因为“地图的使用”可以遵循许多不同的地图 API 类别。[对于仅显示地图，您可以使用Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)在移动应用程序上显示无限地图而没有使用限制——支持文档来自[常见问题解答](https://developers.google.com/maps/faq#usage_apis)。

> Maps API 使用限制仅适用于以下 Maps API 服务：
> 
> ```
> Google Maps JavaScript API v2
> Google Maps JavaScript API v3
> Google Maps API for Flash
> Google Maps Image APIs:
>     Google Static Maps API
>     Google Street View Image API 
> ```

请注意，Google Maps Android API v2*未*出现在列表中，因此不受使用限制。

但是，您的问题似乎是在询问路由，而不是地图。如果您需要路线，则需要使用[Google Directions API](https://developers.google.com/maps/documentation/directions/)，它不是 Google Maps Android API v2 的一部分，并且受其自身的[使用限制](https://developers.google.com/maps/documentation/directions/usage-limits)。*具体来说，每个密钥*每天2500 个请求。由于方向与移动应用程序无关，因此它没有设备的概念。

总而言之，如果您想显示带有您自己生成的路线的地图，则没有任何限制。如果你需要谷歌给你路线，你每天只能做 2500 次路线请求。如果您需要更多，您必须获得 Google Maps API for Business 帐户或寻找其他路线解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T21:29:37.147

来自谷歌地图 API 的常见问题解答： *“谷歌地球 API 和用于 Android 和 iOS 等移动平台的原生地图 API 不受影响。使用谷歌地图的嵌入功能，以及其他提供嵌入功能的谷歌产品，包括地图，不受这些限制的影响。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T05:05:36.967

Google 已共享 API 许可结构。请参阅下面的链接。 [https://developers.google.com/maps/faq#usage_pricing](https://developers.google.com/maps/faq#usage_pricing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T15:37:00.517

```
use of the Google Places API for Android request based on Application key based. 
After 150000 request per day whoever using your application "that means the "key" 
which you given for google places api request" will get a response error
from google api as "USAGE_LIMIT_EXCEEDED" like 
```

[USAGE_LIMIT_EXCEEDED](https://developers.google.com/places/android/usage#status-codes)

```
while giving search text in search view(to check the response debug and see
the Exception occurs while sending request to place api) , but it wont't be 
visible to the user who uses you app. It will simply shows no 
movement in markers and no auto suggestion will come. For that you want to use 
```

[隆起](https://developers.google.com/places/webservice/uplift#ensure_that_your_application_complies_with_the_api_terms_of_service)

```
for unlimited request. but it contains lots of restrictions by google. They
will track your app closely. If any violations of google policy happens means 
you app will get banned from GooglePlay Markert. so make sure in that you
app does't contains any violation policy before using this. 
```

# ios - UILabel 的文本在延迟后加载

> ID：14697182
> 
> 赞同：2
> 
> 时间：2013-02-04T22:47:41.327
> 
> 标签：ios, queue, grand-central-dispatch

在我的代码中，我称之为

```
[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if (responseData != nil) {
        NSError *error = nil;
        NSArray *dataSource = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];
        [self.ticker1 loadData:dataSource];
    } else {
        NSLog(@"Error requesting timeline %@ with user info %@.", error, error.userInfo);
    }
}]; 
```

在`loadData:`我这样做的方法中

```
NSDictionary *dict = [dataSource objectAtIndex:0];

_label.text = [dict objectForKey:@"text"];

dispatch_queue_t queue = dispatch_queue_create("com.test.ios.task", NULL);
dispatch_queue_t main = dispatch_get_main_queue();

dispatch_async(queue, ^{
    NSURL *imageURL = [NSURL URLWithString:[[dict objectForKey:@"user"] objectForKey:@"profile_image_url"]];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

    dispatch_async(main, ^{
        _image.image = [UIImage imageWithData:imageData];
    });
});

dispatch_release(queue); 
```

问题是我在主队列加载的图像比`_label.text`设置的要快得多。它在大约 4-5 秒的长时间延迟后被设置。我想知道为什么会这样。是因为`main queue`没有发布还是那条线上的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:12:32.390

我无法从您的代码中判断哪个线程正在调用请求的处理程序块，但如果它不是主线程，那可能就是问题所在。

尝试从内部设置标签的文本属性

```
dispatch_async(main, ^{
    _label.text = [dict objectForKey:@"text"];
}); 
```

堵塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T09:30:34.153

最奇怪的事情为我解决了这个问题。我在情节提要中将标签高度固定并稍微大了一点。它在约束中发出黄色警告，但至少标签正在加载。

# xaml - 两个用户控件，一个绑定，一个不绑定

> ID：14697188
> 
> 赞同：0
> 
> 时间：2013-02-04T22:48:19.257
> 
> 标签：xaml, windows-runtime, winrt-xaml

我在一个简单的 WinRT 演示项目中有两个非常简单的 UserControl。没有 Viewmodel——主要是用于布局探索的彩色框。我创建的第一个 UserControl 工作正常。第二个，非常相似，不会绑定到任何属性——它显示为空白。

第一个 UserControl 如下所示：

```
 <UserControl
    x:Class="Demo.SmallStartTile"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Demo"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Name="SmallStartTileUC"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid x:Name="SmallTileGrid"
        Margin="0,0,8,8"
        Background="{Binding Background, ElementName=SmallStartTileUC}"
        >

        <Rectangle
            Stroke="{Binding BorderBrush, ElementName=SmallStartTileUC}"
            Grid.RowSpan="2"
            />

        <TextBlock x:Name="SmallTileTitle" 
            Text="{Binding TileText, ElementName=SmallStartTileUC}" 
            Style="{StaticResource SmallTileHeader}"/>

        <Path x:Name="IconPath" 
            Style="{StaticResource SmallTileIcon}" 
            Data="{Binding TileIconPathData, ElementName=SmallStartTileUC}" />

    </Grid>

    </UserControl>

namespace Demo
{
    public sealed partial class SmallStartTile : UserControl
    {
    public static DependencyProperty TileTextProperty = DependencyProperty.Register("TileText", typeof(string), typeof(SmallStartTile), new PropertyMetadata("tile content"));

    public string TileText
    {
        get { return (string)GetValue(TileTextProperty); }
        set { SetValue(TileTextProperty, value); }
    }

    public static DependencyProperty TileIconPathDataProperty = DependencyProperty.Register("TileIconPathData", typeof(string), typeof(SmallStartTile), new PropertyMetadata("F0"));

    public string TileIconPathData
    {
        get { return (string)GetValue(TileIconPathDataProperty); }
        set { SetValue(TileIconPathDataProperty, value); }
    }

    public SmallStartTile()
    {
        this.InitializeComponent();
    }
} 
```

}

第二个，就像第一个一样，通过单击 Add New Item 并在 Blend 中选择 UserControl：

```
<UserControl
x:Class="Demo.SmallMediaTile"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Demo"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Name="SmallMediaTileUC"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid 
    Margin="0,0,8,8"
    Background="{Binding Background, ElementName=SmallMediaTileUC}"
    >

    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Rectangle 
        Stroke="{Binding BorderBrush, ElementName=SmallMediaTileUC}"
        Grid.RowSpan="2"
        />

    <Viewbox 
        Margin="30" 
        Child="{Binding Content, ElementName=SmallMediaTileUC}">
    </Viewbox>

    <TextBlock 
        Grid.Row="1" 
        Text="{Binding SourceText, ElementName=SmallMediaTileUC}" 
        Style="{StaticResource SmallMusicTileHeader}"/>

</Grid>

</UserControl>

namespace Demo
{
    public sealed partial class SmallMediaTile : UserControl
    {

    public static DependencyProperty SourceTextProperty = DependencyProperty.Register("SourceText", typeof(string), typeof(SmallMediaTile), new PropertyMetadata("source"));

    public string SourceText
    {
        get { return (string)GetValue(SourceTextProperty); }
        set { SetValue(SourceTextProperty, value); }
    }

    public SmallMediaTile()
    {
        this.InitializeComponent();
    }
} 
```

}

我在主页中使用 UserControl，如下所示：

```
 <local:SmallMediaTile x:Name="Source1Tile"
                            Grid.Column="0" Grid.Row="0"
                            SourceText="Radio"
                            Background="Blue"
                            BorderBrush="Red">
                            <local:SmallMediaTile.Content>
                            <Canvas x:Name="radio_icon" Height="68" Width="34">
                                <Path Data="F1M299.6182,396.2988C299.6182,389.7208,297.0722,383.5548,292.4572,378.8398L288.6162,382.6758C292.2022,386.3718,294.1842,391.1778,294.1842,396.2988C294.1842,401.4238,292.2022,406.2368,288.6162,409.9328L292.4572,413.7738C297.0722,409.0538,299.6182,402.8808,299.6182,396.2988" Fill="White" Height="34.934" Canvas.Left="0" Stretch="Fill" Canvas.Top="16.501" Width="11.002"/>
                                <Path Data="F1M311.1738,396.2988C311.1738,386.6278,307.4348,377.5528,300.6788,370.6208L296.8258,374.4618C302.5658,380.3698,305.7398,388.0798,305.7398,396.2988C305.7398,404.5218,302.5658,412.2298,296.8258,418.1428L300.6788,421.9898C307.4348,415.0498,311.1738,405.9718,311.1738,396.2988" Fill="White" Height="51.369" Canvas.Left="8.21" Stretch="Fill" Canvas.Top="8.282" Width="14.348"/>
                                <Path Data="F1M322.7578,396.2988C322.7578,383.5298,317.8508,371.5348,308.9638,362.3388L305.1168,366.1748C312.9758,374.3538,317.3338,384.9778,317.3338,396.2988C317.3338,407.6208,312.9758,418.2488,305.1168,426.4268L308.9638,430.2748C317.8508,421.0698,322.7578,409.0798,322.7578,396.2988" Fill="White" Height="67.936" Canvas.Left="16.501" Stretch="Fill" Canvas.Top="0" Width="17.641"/>
                            </Canvas>
                            </local:SmallMediaTile.Content>
                        </local:SmallMediaTile> 
```

第一个像我期望的那样拾取所有属性和显示，但第二个只拾取 Viewbox 内容。我已经查看了 SO 并一直在谷歌搜索，但无法弄清楚问题所在。对不起，如果这是冗长的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:01:58.107

当你试图将其属性绑定到它的上层时，你的根`Grid`被设置为`Content`那个。这是不允许的，因为根已经是 的父级，并且 XAML 控件只能存在于 UI 中的一个位置。`UserControl``Viewbox``Child``Content``UserControl``Grid``UserControl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T00:08:11.800

如前所述，问题是 UserControl 的内容只能设置一次。当我将 Viewbox 内容绑定到 UserControl 内容时，现有的 XAML 将被替换。因此，一个空白框，但对于我传入的内容。我想要做我希望的事情，我需要制作一个自定义控件。谢谢您的帮助！

# ios - NSFetchedResultsController 可以管理多深的 tableview 结构？

> ID：14697192
> 
> 赞同：0
> 
> 时间：2013-02-04T22:48:32.993
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我在 Core Data 中有三个实体，排列如下：

类别 ->> 条目 ->> 字段

这三个实体在三个后续的表格视图中显示给用户。显示类别，用户可以点击一个类别，以便显示该类别中的所有条目，依此类推。

目前我正在获取所有类别一次`CategorieViewController`，排序并将它们保存在一个可变数组中。然后用户点击一个类别，我从数组中提取这个类别对象并将其传递给下一个视图控制器。该视图控制器然后从托管对象的 nsset 中提取该类别的所有条目，依此类推。

现在我想用 简化这个`NSFetchedResultsController`，但我不确定它是否会对我有帮助。据我所知，NSFRC 会在用户重命名条目时自动重新排序条目，对吗？截至目前，我在作为我的 tableview 数据源的数组中手动​​执行此操作。

此外，NSFRC 将如何简化对对象的访问。我注意到它有一种方法可以在给定的 indexpath 处返回托管对象。因此，例如，如果用户点击了第 3 个类别，那么在第 8 个条目上，我现在想在我的表格视图中显示该条目的第 5 个字段，我可以通过提供该对象的完整索引路径来访问所需的字段对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:22:36.677

据推测，您正在使用`Category`作为节标题。使用 FRC，您可以通过指定`sectionNameKeyPath`何时获取`Entry`实体来轻松完成此操作。

你是正确的，你可以得到条目

```
Entry *entry = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

这些字段通过以下方式访问

```
entry.fields; 
```

这是一个`NSSet`，一个无序的集合。如果您的`Field`实体包含排序属性，例如`order`，您可以使用

```
Field *field = [[entry.fields filteredSetUsingPredicate:
                 [NSPredicate predicateWithFormat:@"order = %@", fieldPosition]]
                   objectAtIndex:0]; 
```

如果需要，您可以像这样订购字段：

```
NSArray *orderedFields = [entry.fields sortedArrayUsingDescriptors:
     @[[NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES]]]; 
```

# javascript - JavaScript 条件执行和变量作用域

> ID：14697193
> 
> 赞同：1
> 
> 时间：2013-02-04T22:48:43.930
> 
> 标签：javascript, scope, conditional-statements

我提前道歉，这可能之前在StackOverflow上已经讨论过，我只是不知道这叫什么，所以我找不到满意的答案。

但是，我正在学习 JavaScript，并且正在学习一本名为“Eloquent JavaScript”的书。在那里我找到了下面的一段代码，它反复提示用户输入他的名字，直到他这样做。

```
while (!input) {
    var input = prompt("Who are you?");
} 
```

我根本不明白为什么这实际上有效而不是引发错误。在评估条件表达式时，没有称为*输入*的变量。如果我理解正确，则无法进行评估，这通常会阻止进一步执行。不过，while 循环主体中的语句（**然后**创建了一个名为*input*的变量）仍在执行中。

但是，这让我很着急，所以我尝试了这个：

```
while (!bool) {
    console.log("Hi");
    var bool = true;
} 
```

这更奇怪了。当涉及到条件表达式时，也是同样的问题：在条件评估**之后**，在循环体的范围内创建了*bool 。*其次，*bool*始终设置为 true，但代码仍被执行一次，换句话说，*Hi*被打印一次。

 ****我很困惑，希望能得到一些帮助。;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:54:37.317

这是 Javascript 的小怪癖之一。要记住的关键是，在 Javascript 中，变量不一定是在代码中`var x =`出现的位置创建的。它们*总是*在范围的顶部创建。这意味着在包含它们的函数的开头，或者如果这是我们正在工作的范围，则在全局范围的顶部。这称为**提升**。

因此，您的代码可能如下所示：

```
function doStuff() {
    while (!bool) {
        console.log("Hi");
        var bool = true;
    }
} 
```

但它会像这样运行：

```
function doStuff() {
    var bool = undefined;
    while (!bool) {
        console.log("Hi");
        bool = true;
    }
} 
```

（请记住，Javascript 中没有块作用域之类的东西。）

第一次，`bool`是`undefined`。`!undefined`是`true`，所以条件通过。之后，`bool`is `true`，所以条件失败。`input`这是一个与您的第一个示例类似的故事。

变量将始终在作用域的最顶部创建，无论它在哪里声明。出于这个原因，有时建议将变量声明在作用域的顶部作为一种好习惯，因为这是 Javascript 认为它们所在的位置。这样可以防止像您引用的那样出现意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:54:18.850

JavaScript 不需要显式声明变量 - 您可以在显式声明变量之前访问变量或为其赋值。（正如 lonesomeday 所解释的那样，它还有更多意义——我只是想简单地说）。

当您在显式声明变量之前访问该变量时，它将具有值**undefined**。

因此，在您的代码中，如果您想自己查看，请尝试在`alert(input);`之前使用。`while`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:02:43.987

JavaScript 有一个不寻常的属性，即变量的作用域是在声明它们的函数级别，而不是在它们的封闭块内（就像 C++ 和 Java 这样的语言中的情况）。这意味着在函数中声明的变量在函数开始执行的那一刻就在作用域内，而不管该变量在函数体中的哪个位置被声明。这种行为有时被称为[“提升”或“提升”](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals)。

许多 JavaScript 程序员认为在函数的最开始声明函数内的所有变量是一种很好的做法，只是为了避免在声明之前在范围内具有变量的奇怪属性。

JavaScript 的一个更不幸的行为是，它允许人们通过简单地设置全局变量来动态定义它们。所以，如果你的程序没有名为 input 的变量，那么这段代码：

```
input = prompt("Who are you?"); 
```

创建一个名为 input 的全局变量，并为其分配由 prompt 方法返回的字符串。这可能会导致各种难以调试的副作用，因此被认为是不好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T23:02:54.807

There are 2 bits to realize. Initially, input is undefined, which is a "falsy" value, so !input evaluates to true. The second thing to realize is once the var input or var bool are assigned, they are valid at the same scope as the loop (ie just outside it), so when the loop iterates a second time the variable will be set. For the input case, anything null or undefined is considered falsy, so once the input has a value the loop will exit. You can kind of see this in this bit of code:

```
 while(!bar) {
        console.log('1', bar);
        var bar = true;
        console.log('2', bar);
    }
    console.log('3', bar); 
```****

# ruby - 异或两个对象

> ID：14697194
> 
> 赞同：3
> 
> 时间：2013-02-04T22:48:43.813
> 
> 标签：ruby

我必须对两个对象进行异或，并认为我可以使用 Ruby 的内置异或运算符 ( `^`)，但它不起作用。我想用它来测试我的一个对象是否被初始化。

```
a = Object.new
b = Object.new
a ^ b # => NoMethodError: undefined method `^' for #<Object:0x007...> 
```

有趣的是，我可以做到

```
a = nil
b = Object.new
a ^ b # => true 
```

我认为 Ruby 不允许您先天地异或两个对象，这很奇怪。我是否缺少另一个命令或者这个功能只是没有构建？

显然，我的问题的解决方案是执行以下操作：

```
(a || b) && !(a && b) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:19:30.713

这个怎么样？

```
a = Object.new
b = Object.new
c = nil
!a ^ !b # => false
!a ^ !c # => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:03:58.043

> 有趣的是，我可以做到

```
a = nil
b = Object.new
a ^ b # => true 
```

那是因为`NilClass`有`nil ^ obj`方法。

> 我是否缺少另一个命令或者这个功能只是没有构建？

它不是建造的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:06:26.257

您需要覆盖`^`对象的运算符（实际上是一种方法）。就像是：

```
class YourObject
  def ^(rhs)
    # You may want to do a check here that 
    #   rhs is of the same type as your object,
    #   and throw an error if not
   (self || rhs) && !(self && rhs)
  end
end 
```

我建议你替换你自己的类而不是改变 Object.

# php - 在 Javascript 代码中使用 PHP 变量

> ID：14697195
> 
> 赞同：0
> 
> 时间：2013-02-04T22:48:47.773
> 
> 标签：php, javascript, function, variables, echo

在某些 Javascript 代码中使用 PHP 变量时，我能得到一些帮助吗？

我想将值传递给存储在 PHP 变量中的 Javascript 函数。

这是我的代码：

```
$UpdateText="updateReTotal(Tills,'pos_cash','{$till->till_id}');updateVariance('{$till->till_id}')";

echo '<script type="text/javascript">'
    , 'testFunctionForUpdateTotal(.$UpdateText.);'
    , '</script>'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:49:37.500

```
$UpdateText="updateReTotal(Tills,'pos_cash','{$till->till_id}');updateVariance('{$till->till_id}')";

echo '<script type="text/javascript">'
    . 'testFunctionForUpdateTotal('.$UpdateText.');'
    . '</script>'; 
```

如果您使用双引号，您的代码会起作用（除了变量旁边的两个点，另外您需要转义其他双引号），如下所示：

```
echo "<script type=\"text/javascript\">
 testFunctionForUpdateTotal($UpdateText)
 </script>"; 
```

但这不适用于单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:55:11.413

```
<script language='javascript'>
function show(j)
{
alert(j);
}
</script>

<?php
$v = "a";
echo "<div onclick=\"show('".$v."',);return false;\">CLICK</div>";
?> 
```

# c# - 检查是否在更高级别处理异常

> ID：14697201
> 
> 赞同：1
> 
> 时间：2013-02-04T22:49:19.107
> 
> 标签：c#, .net, exception, exception-handling

有没有办法检查是否在更高的应用程序级别上处理了异常以跳过日志记录并重新抛出？像这样，例如：

```
 try
        {
            // Execute some code
        }
        catch (Exception e)
        {
            if(!ExceptionIsHandled())
                LogError(e);
            throw e;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:52:09.400

没有什么我知道的。如果您致力于这种设计（见最后的注释），您*可以*为某种异常编写一个包装器，`HandledException`并使其`InnerException`成为抛出的那个。然后你可以让你的代码看起来像：

```
 try
    {
        // Execute some code
    }
    catch (HandledException e)
    {
        LogError(e.InnerException);
        // Do something else
    }
    catch (Exception e)
    {
        throw ;
    } 
```

*这是答案中刻板的Stackoverflow“你做错了”的一部分......*

**但是**，如果您真的“处理”了异常，那么重新抛出它并没有多大意义。也许您的方法应该只返回一个失败结果，可能包括`Exception`作为出错原因的详细信息项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-23T15:27:16.070

这是旧的，但我在这里确实有一些意见。我以前使用过一种设计模式，它做得很好，但确实给一切增加了一点开销。

基本上，所有方法都会返回一个响应对象（例如，`Response<T>`）。发生的任何异常都应该包装在响应对象中并返回而不是抛出。

```
public class Response<T>
{
    public T Payload { get; set; }
    public bool IsSuccessful { get; set; } = false;
    public string Message { get; set; }
    public Exception Error { get; set; }

}

public class MyService
{
    public Response<IEnumerable<Customer>> GetCustomers()
    {
        var response = new Response<IEnumerable<Customer>>();
        try
        {
            var customers = new List<Customer>()
            {
                new Customer() { CompanyName = "ABC Co." },
                new Customer() { CompanyName = "ACME" }
            };

            response.Payload = customers;
            response.IsSuccessful = true;
        }
        catch (Exception e)
        {
            response.IsSuccessful = false;
            response.Error = e;
            // A friendly message, safe to show to users.
            response.Message = "An error occurred while attempting to retrieve customers.";
        }

        return response;
    }
} 
```

您可以在不重新抛出异常的情况下冒泡异常，并进行适当的处​​理。然后，您可以为更自定义的用户友好消息添加异常捕获。

对于可以安全地显示给客户端的任何错误，我还使用自定义的基本异常类型。这样我就可以在控制器级别添加一个通用的 catch 来传播那些准备好的错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T22:21:09.277

如果您可以确定代码被包装在一个专门设计的 try-catch 块中，该块是用支持异常过滤器的语言编写的，那么就有可能在堆栈展开之前或期间确定异常是否可能被那个捕获外部块或内部块。然而，这样做的用处是相当有限的，特别是考虑到代码捕获和重新抛出异常的极其常见的反模式，它知道它不会解决，只是为了找出它们发生的目的。

如果您的目标只是避免冗余日志记录，我建议您应该使用可以有效处理冗余的日志记录工具。虽然有些人可能会争辩说，在外层只记录一次异常更好，但拥有更多记录机会是有好处的。如果内层发生异常并且中间层吞下了它，那么外层内的日志记录代码将永远不会发现它。相比之下，如果内层从捕获异常开始并安排它被记录下来，那么即使中间层吞下异常，它发生的事实仍然可以被记录下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T22:57:27.387

嗯，不，还没有到那里。异常通过处理程序冒泡。通常的方法来解决这个问题。定义您自己的异常，然后只捕获您要处理的异常。

# jenkins - 如何在詹金斯作业之间传递源文件

> ID：14697206
> 
> 赞同：0
> 
> 时间：2013-02-04T22:49:37.827
> 
> 标签：jenkins

我当前的设置包括：

1.  项目工作——它是获取源代码、部署到测试环境并在测试环境中运行测试的工作
2.  构建工作 - 这是在将源构建到`deb`包中的特殊机器上运行的工作。

问题：从构建工作中检索包相当容易`deb`（作为工作工件），但是我如何将项目工作中的源传递给构建工作？

他们运行在不同的詹金斯奴隶上。

有哪些可能的选择？

注意：建筑工作不是这个特定项目的具体工作。有几个项目使用它作为从源代码构建的助手`deb`，所以我不能在那里硬编码任何特定于项目的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:04:55.550

您想查看[CloneWorkspace SCM 插件](https://wiki.jenkins-ci.org/display/JENKINS/Clone+Workspace+SCM+Plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:59:08.227

如果您使用的是 SVN，您可能需要查看[Tracking SVN Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Tracking+SVN+Plugin)。这允许您从 SVN 中提取相同的版本作为另一个作业。我们使用它，以便我们可以从同一个 SVN 版本创建“调试”和“发布”版本。调试版本首先构建。如果成功，则使用为调试构建的相同修订版本构建发布版本。

# perl - Perl - 详细程度的模式？

> ID：14697213
> 
> 赞同：0
> 
> 时间：2013-02-04T22:50:14.157
> 
> 标签：perl

我有一个基本功能，用于在 perl 包中打印详细级别的消息：

```
# 0 = no output, 1 = debug output
our $verbosity = 0;
sub msg {
    (my $verbLevel, my $format, my @addArgs) = @_;
    if ($verbLevel <= $verbosity) {
        printf($format, @addArgs);
    }
} 
```

这是包内 IMO 一个优雅的解决方案，因为要打印调试消息，我可以简单地执行以下操作：

```
msg(1, "Some debug message"); 
```

然而，在实践中，这个包被“使用”在一长串包中，每个包也使用一个详细的特性。假设使用链是这样的：entry.pl > package0.pm > package1.pm > package2.pm。每个文件都必须设置下一个文件的详细标志，以便每个文件都能正常工作。

我现在认为这是一个不优雅的解决方案，因为重复的代码以及每个“父文件”都需要设置每个子文件的详细级别。我希望每个 *.pm 文件从 entry.pl 继承详细级别和功能。

是否有我可以遵循的设计模式来跨包共享详细功能？是否有一个模块已经可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:54:32.453

也许看看 Log::Log4Perl - 可以作为您自己的实现工作的模型，也可以作为潜在的替代品。

# r - 如何：在“主题模型”中检查术语文档矩阵中的频率加权

> ID：14697218
> 
> 赞同：3
> 
> 时间：2013-02-04T22:50:19.723
> 
> 标签：r, text-mining

我正在尝试使用 R 包进行一些主题建模`topicmodels`

[根据这些说明R 文本文件和文本挖掘...如何加载数据](https://stackoverflow.com/questions/7927367/r-text-file-and-text-mining-how-to-load-data)，我已经使用 'tm' 包完成了我的预处理。

但是，当我在 R 中运行我的相关主题模型 (CTM)`topicmodels`时，我收到以下错误

```
 "Error in CTM...DocumentTermMatrix needs to have a term frequency weighting. 
```

我已经三次检查了 DocumentTermMatrix 的结构，显示它确实具有频率加权：

```
 A document-term matrix (26 documents, 413 terms)

 Non-/sparse entries: 4804/5934
 Sparsity           : 55%
 Maximal term length: 13 
 Weighting          : term frequency - inverse document frequency (normalized) (tf-idf) 
```

任何有关如何使这项工作的建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T09:35:45.517

如果之前使用slam包，需要指定权重参数为weightTf：

```
m=as.simple_triplet_matrix(mm);
dtm <- as.DocumentTermMatrix(m,weighting =weightTf) 
```

# ember.js - 车把部分与渲染与模板

> ID：14697221
> 
> 赞同：37
> 
> 时间：2013-02-04T22:50:50.570
> 
> 标签：ember.js, handlebars.js, mustache

[Fire Up Ember.js 截屏视频](https://peepcode.com/products/emberjs)使用`partial`, `template`,在`render`模板中呈现模板，但我仍然不确定何时使用哪个模板。

在同一个截屏视频中，`partial`解释为使用上下文和与当前控制器相关的所有数据，同时`render`使用指定控制器的匹配模板、上下文等：

![启动 Ember.js：部分与启动 Ember.js](../Images/788fd6061f57c3f6c5418d862396cb28.png)

`partial`有人可以澄清,`template`和`render`when (example) to use which之间的区别吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-05T01:09:49.977

我理解它的方式，它们分解的方式是这样的：

“render”为您提供了一个完整的视图/控制器/模板上下文以供使用。

一个示例是包含动态片段的顶部导航。内容将在 TopNavController 中维护，并使用“渲染”插入到应用程序模板中

"partial" 将插入一个模板，但该模板将使用当前上下文而不是它自己的上下文。Partial 也是框架中较新的部分，意在一定程度上替代使用模板。

一个例子是显示一个用户列表，让每个用户成为列表中相对复杂的部分（头像、姓名、电子邮件等），您可以遍历列表并根据每个用户的上下文插入部分内容。

“模板”只是使用当前上下文插入模板。我认为虽然使用模板在模板内渲染片段不是很好的风格，但您应该使用“部分”，尽管模板在大多数情况下都会以相同的方式工作。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-08-28T18:32:58.123

ember 网站上给出的这张[图表很好地比较了渲染、局部和视图。](http://emberjs.com/guides/templates/rendering-with-helpers/#toc_comparison-table)

这是网站中给出的比较的片段图像：

![在此处输入图像描述](../Images/3de22a4b3c19a8f6fc0ae3ec60d32197.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T06:46:35.720

就客户端内存使用而言，渲染或部分哪个更好。假设部分较小的对象会更好

# xml - 如何在复杂类型的 xsd 文件中使用唯一标记？

> ID：14697222
> 
> 赞同：4
> 
> 时间：2013-02-04T22:50:55.677
> 
> 标签：xml, xsd, uniqueidentifier

我已经看到了有关如何在 xsd 的元素声明中直接使用唯一标记的示例，但我不知道如何将其放入复杂类型的元素声明中，请参见下面的代码：

```
<xs:complexType name="flighttype">
<xs:sequence>
    <xs:element name="departure" type="departuretype"/>
    <xs:element name="arrival" type="arrivaltype"/>
    <xs:element name="altitude" type="xs:string"/>
    <xs:element name="speed" type="xs:string"/>
    <xs:element name="distance" type="xs:string"/>
    <xs:element name="entertainment" type="entertainmenttype"/>
    <xs:element name="safetymessage" type="xs:string"/>
</xs:sequence>
<xs:attribute name="id" type="xs:string"/>
<xs:attribute name="airline" type="xs:string"/>
<xs:attribute name="flightno" type="xs:string"/>
<xs:attribute name="model" type="xs:string"/>
<xs:attribute name="passengers" type="xs:integer"/>
<xs:attribute name="status" type="xs:string"/>
</xs:complexType> 
```

我想让 id 成为唯一的 id，我可以让下面的示例工作，但它直接在元素声明中使用。

[例子](https://stackoverflow.com/questions/870730/xml-element-unique-id-schema-repersentation)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:57:59.160

在 XSD 中，标识约束与元素相关联，而不是与类型相关联。因此，在定义为具有 type 的架构中的元素上定义身份约束`flighttype`，而不是在`flighttype`其自身上。

# java - 如何持久化通过 JPA 从 JTable 中检索到的实体对象？

> ID：14697224
> 
> 赞同：1
> 
> 时间：2013-02-04T22:51:03.410
> 
> 标签：java, jpa, jtable

几天来，我一直在尝试保存从导入的 Excel 表中的 jtable 获得的数据，但没有成功，并且试图找到异常令人作呕。

这是代码的一部分和错误堆栈跟踪

```
@Action
public void persist(){
emf = Persistence.createEntityManagerFactory("MauranaSurveyPU");
em = emf.createEntityManager();
em.getTransaction().begin();

//loops through table to retrieve object and persist

int count = jTable1.getRowCount();
for(int i=0; i<count; i++){

Mauranagroup mn = new Mauranagroup(); 
String obj1 = (String)GetData(jTable1,i,0);
String obj2 = (String)GetData(jTable1,i,1);
String obj3 = (String)GetData(jTable1,i,2);

//set entity
mn.setRespondentId(Integer.parseInt(obj1));        
mn.setMale(obj2);         
mn.setFemale(obj3);  

em.persist(mn);   
}//end for

em.getTransaction().commit();        

}//end method persist

// get object from jtable
private Object GetData(JTable jTable1, int x, int y) {
return jTable1.getModel().getValueAt(x,y);
} 
```

这段代码的问题在于它实际上仍然存在，但是在事务提交后我得到了这个堆栈跟踪；

> 内部异常：java.sql.SQLIntegrityConstraintViolationException：该语句被中止，因为它会导致在“MAURANAGROUP”上定义的“SQL130204062549290”标识的唯一或主键约束或唯一索引中出现重复键值。错误代码：20000 调用：INSERT INTO MAURANAGROUP (RESPONDENT_ID, AMOUNTTOBESPENT, AREYOUFAMILIARNO
> 
> bind => [211 个参数绑定] 查询：InsertObjectQuery(entity.Mauranagroup[ respondentId=5 ])

**当我删除记录并再次保留时，我得到另一行**

> bind => [211 个参数绑定] 查询：在 org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324) 处的 InsertObjectQuery(entity.Mauranagroup[ respondentId=2 ])

我不明白是吗，它实际上仍然存在，我可以看到我保存的数据。是循环还是循环没有很好地终止，我实际上是因为这个项目而生病了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:46:48.943

您的表上有一个数据库约束，即某些列是唯一的，并且您正在插入重复值。我猜是`RESPONDENT_ID`. 如果您是第一次尝试持久化表中的所有记录，我不会提供表数据中的 id。相反，我会使用序列为您生成 id 并将其返回给 UI。

如果您尝试修改存储在表中的现有数据。我会使用 id 在数据库中搜索它们，更新字段并再次保存它们。

顺便提一句。在开头使用小写字母命名您的方法是一个好习惯。

# javascript - 仅当父 div 具有 id 属性时才选择它

> ID：14697225
> 
> 赞同：0
> 
> 时间：2013-02-04T22:51:05.980
> 
> 标签：javascript, jquery

我正在尝试找到第一个`div`具有`id`属性的父级。

选择器是`'div .img'`，它可以在任何嵌套的 div 内

```
<div id='div1'>

 <div id='div2'> first nested parent div

       <div>second div
            <img class='img' src='test.jpg'/> 
       </div>   

 </div>

 <div>  //this div has no id
      <div>another div
           <img class='img' src='cookie.jpg'/> 
      </div>   
 <div>

</div> 
```

选择器

```
$('div.img') 
```

应该输出

```
div2 
div1

div2 shows first becasue div2 has id attribute and it is the parent of the test.img
div1 shows next becasue cookie is the second image and the first parent div that has div1 id 
```

我试过了

```
if($('div .img').find('.img').closest('div').attr('id')){
   console.log($('div.img').closest('div').attr('id'))
} 
```

但它不起作用。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:00:17.450

我建议：

```
var divsWithIDs = $('img.img').parents('div[id]').get();
console.log(divsWithIDs); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5BcGL/)。

这种方法查找`img.img`元素，然后查看这些图像的父`div`元素以找到具有`id`属性的元素。该`get()`方法将选择转换为数组。

参考：

*   [`get()`](http://api.jquery.com/get/).
*   [`parents()`](http://api.jquery.com/parents/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:00:05.290

```
var IamadivparentandhaveanId=$('div').find('img').closest('div[id]'); 
```

或使用类：

```
$('div').find('img.img').closest('div[id]'); 
```

或者

```
$('.img').closest('div[id]'); 
```

编辑每条评论以澄清使用只能找到一次：

```
$('img.img').each(function(){
   $(this).closest('div[id]');
});// or use .filter if that is perferred 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:57:46.497

您可以使用：

```
var $divsWithIds = $('img.img').closest('div[id]'); 
```

这与@David Thomas 的答案相同，除了使用`closest`而不是`parents`. 它选择所有具有“.img”类的“img”元素，然后为每个元素获取最近的父元素。

在以下情况下，using`parents()`将同时包含“div1”和“div2”，而 using`closest()`将仅返回“div2”：

```
<div id='div1'>
    <div id='div2'>
       <div>
            <img id="img1" class='img' src='test.jpg'/> 
       </div>   
    </div>
</div>

 <div>
       <img id="img2" class='img' src='cookie.jpg'/> 
 <div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T23:06:17.730

您可以使用 jQuery each 来迭代父母。

```
$('div img').each(function (a, b) {
    var x = $(b).parent();
    while (x && !x.attr('id')) {
        x = x.parent();
    }
    console.log(x.attr('id'));
}); 
```

# java - 如果给出大于 11 位或更大的数字，则 java 中的素数分解错误

> ID：14697227
> 
> 赞同：-4
> 
> 时间：2013-02-04T22:51:12.297
> 
> 标签：java

每当我给出一个大于 10 位的数字时，`Error:Integer too large`即使我在`long`任何地方都使用了数据类型，它也会给我一个错误提示。

这是我的程序：

```
class q3 {
    boolean prime(long a) {
        long c=0;
        for(long i=1;i<=a;i++) {
            if(a%i==0) {
                c++;
            }
        }
        if(c==2) {
            return true;
        } else {
            return false;
        }
    }

    public void main(long a) { 
        boolean result=false;
            for(long i=1;i<=a/2;i++) {
                if(a%i==0) {
                    result=prime(i);
                } else {
                    result=false;
                }
                if(result==true) {
                    System.out.println(i);
                }
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:03:52.100

有几种可能的解释说明您可能会收到错误消息，即数字太大。但问题不在于您提供的代码。

我怀疑问题在于您试图这样调用该`main`方法：

```
new q().main(1234567890); 
```

那失败了，因为`1234567890`是`int`文字，而不是`long`文字。像这样写：

```
new q().main(1234567890L); 
```

* * *

笔记：

1.  这适用于 18-19 位数字。除此之外，您将需要使用 BigInteger。
2.  以这种方式测试素数对于大量数据来说*非常缓慢。*有很多更有效的方法来做到这一点。读[这个](http://en.wikipedia.org/wiki/Primality_test)，还有[这个](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。
3.  即使您以这种方式测试素数，该`prime(a)`方法也可以在达到 时停止`sqrt(a)`。当您发现任何因素（大于 1）时，它*应该停止......而不是全部计算。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:23:10.983

我想你会发现，当你开始进行非常大量的迭代（如`long`s）时，你会想要摆脱`for`循环并开始使用`while`循环。

这是你所拥有的：

```
for(long i = 1; i <= a/2; i++) 
```

但是`for`循环实际上是用于可数集的。`int`当循环的迭代数不是 an 时，`for`您必须更仔细地考虑第二个和第三个参数：

```
i <= a/2; 
```

是`a/2`一个`int`？是`long`吗？是否需要写：

```
i <= ((long) a)/2L; 
```

突然，这变得更加复杂。当你写：

```
i++; 
```

您确定`++`运算符对`long`值起作用吗？大概。但是你应该检查一下。

通常，严肃的数学模型/计算使用`while`循环，因为：

```
while(i < someValue) 
```

是一个易于理解的陈述，几乎没有歧义。您将在循环内迭代`i`（可能是 a`long`或 a`BigInteger`或其他）`while`，并减少您真正需要了解该`for`语句的参数的程度。

您的程序中可能还有另一个问题，很难说出您是如何调用这个类的。但我认为你应该从重写这些循环开始。

# perl - perl fork 不执行

> ID：14697231
> 
> 赞同：0
> 
> 时间：2013-02-04T22:51:30.320
> 
> 标签：perl, fork

我第一次尝试使用 fork，所以我可以重定向用户的网络浏览器，然后继续处理。我查找了使用 fork 的代码，但我的子进程没有执行（即，文件没有被创建）。我究竟做错了什么？

```
#! /usr/bin/perl 

if ($pid = fork) { } 
else { 
  close STDOUT(); 
  open(FILE,'>test.txt'); 
   print FILE time; 
  close(FILE); 
  exit(0); 
} 
print "Location: http://mydomain.com/\n\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:11:36.643

`STDOUT()`让 Perl 寻找一个名为 的函数`STDOUT`，如果找不到，就会中止您的子进程。

```
$ perl -we 'close STDOUT()'
Undefined subroutine &main::STDOUT called at -e line 1. 
```

你只需要说

```
close(STDOUT); 
```

或者

```
close STDOUT; 
```

即使您只能在 Web 浏览器中测试此程序，错误消息仍应显示在服务器错误日志中。

# twitter-bootstrap - 如何显示带有 SVG 对象的引导工具提示？

> ID：14697232
> 
> 赞同：28
> 
> 时间：2013-02-04T22:51:38.277
> 
> 标签：twitter-bootstrap, svg, tooltip, d3.js

我要疯了，试图理解为什么我可以在常规 HTML 元素上显示工具提示，但不能在 D3 生成的 SVG 上显示：http: [//jsfiddle.net/nachocab/eQmYX/5/](http://jsfiddle.net/nachocab/eQmYX/5/)

我究竟做错了什么？

```
$(document).ready(function () {
    $("a").tooltip({
      'placement': 'bottom'
    }); // this works

    $("my_circle").tooltip({
      'placement': 'bottom'
    }); // this does not work
}); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-06T18:34:23.010

问题是 Bootstrap v2.2.2 生成的工具提示是一个`<div>`被插入到 中的`<svg>`，这使得浏览器无法呈现它。

我最终使用了[Bootstrap Tooltip](http://getbootstrap.com/javascript/#tooltips)的最新开发版本，它添加了一个新参数来确定工具提示的容器。现在我可以这样做：

```
$(".my_circle").tooltip({
    'container': 'body',
    'placement': 'bottom'
}); // this works! 
```

**编辑 - 一年后**

作为记录，我放弃了 jQuery 要求，现在使用 Justin Palmer 的优秀[d3-tip](https://github.com/Caged/d3-tip)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T06:05:31.730

使用 d3-bootstrap 库。该库将为您提供与 D3.js 兼容的警报、弹出框和工具提示功能。您可以将以下代码添加到您的 jsFiddle。

将此添加到您的头部。

```
<script src="https://github.com/shawnbot/d3-bootstrap/blob/master/d3-bootstrap.js"/> 
```

将此添加到您的代码部分。

```
d3.selectAll(".my_circle")
    .call( d3.tooltip().placement("right") ); 
```

# sharepoint-2010 - 如何自定义sp 2010“我的站点”导航链接并控制此链接的访问者？

> ID：14697233
> 
> 赞同：0
> 
> 时间：2013-02-04T22:51:45.577
> 
> 标签：sharepoint-2010, mysite

我有许多用户的 SharePoint 2010 门户，我配置了“我的网站”，我创建了一些发布页面，默认情况下页面链接出现在“我的网站”导航栏中，我希望特定用户（SharePoint 组）只显示此链接和其他用户不显示

我做了以下，

我已经从模板个性化站点创建站点，然后添加如下链接

在站点设置->导航中，我创建了新链接并分配了一个 SharePoint 组作为此链接的受众

当来自该组（观众）的用户登录时，链接出现在顶部导航栏和页面顶部“我的网站”旁边的导航栏上，[请注意，最后一个导航栏存在于“mysite.master”中]

当该组以外的用户登录时，链接仅从顶部导航栏中消失，但仍存在于“我的网站”导航栏中

任何人都可以帮我找出为什么当用户登录时链接出现在“我的网站”导航栏中，而不是在受众组中

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:52:41.160

你是在正确的方式。我认为它应该工作。我创建了如此多的链接，并使用受众定位为它们分配了权限。

它应该工作。请重新启动您的服务器并重试。

# asp.net-mvc - 如何在辅助方法中检索模型属性

> ID：14697235
> 
> 赞同：1
> 
> 时间：2013-02-04T22:51:50.303
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在创建一个具有以下签名的 html 辅助方法：

```
public static MvcHtmlString MyHelperMethod<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression) 
```

我知道我可以使用以下方法获取作为表达式传递的属性的值：

```
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
object modelValue = metadata.Model; 
```

在同一个模型中，我有另一个属性，我想在这个辅助方法中检索它的值。我将如何检索此其他属性的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:57:55.040

您可以使用反射来做到这一点。

```
var property = typeof (TModel).GetProperty("yourProperty", BindingFlags.Instance | BindingFlags.Public);
var value = property.GetValue(helper.ViewData.Model, null); 
```

常量“yourProperty”当然可以是您的辅助方法的参数。

也许有更好的方法，但是这个应该可以。

# database - 关系模式的功能依赖和规范化

> ID：14697238
> 
> 赞同：-1
> 
> 时间：2013-02-04T22:51:58.323
> 
> 标签：database, relational-database, database-normalization

如果我有具有功能依赖关系的关系模式 R(A, B, C, D, E)：AB->C、CD->E、C->A、E->D，那么 R 的键是什么？是R的正规形式吗？如何获得更高的范式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:01:18.757

一组可能的键是（A，B，D）。

正常形式将由表 (A, B, C, D) 和 (C, D, E) 组成。

没有一般规则可以达到更高的范式。这取决于您当前拥有哪种范式以及您想要实现哪种范式。你必须做任何必要的事情来满足你想要达到的标准形式的要求。

# keyboard - 开（按键“ ") 在 AS2 中不起作用

> ID：14697243
> 
> 赞同：1
> 
> 时间：2013-02-04T22:52:25.180
> 
> 标签：keyboard, actionscript-2, enter, onkeypress

我正在制作一个带有搜索框和搜索按钮的 Flash 电影。该按钮具有以下代码：

```
on (release, keyPress "<Enter>") {
    searchbox.execute();     
    /*the function above processes searches*/
} 
```

单击按钮工作得很好。按 Enter 不会做 bean！有谁知道这是为什么，以及我可以解决的任何方法？如果可以完全避免的话，我宁愿不使用监听器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:23:56.543

使用 on() 是一种已弃用的 AS1 做法，所以也许你应该停止使用它。感谢 MovieClip 类的 onKeyDown 事件处理程序，可以使用适当的代码在没有侦听器的情况下执行此操作，因此您不必担心它们。;)

无论如何，继续使用代码。在包含按钮的时间线中输入：

```
//Enable focus for and set focus to your button
searchButton.focusEnabled = true;
Selection.setFocus(searchButton);

//The onRelease handler for the button
searchButton.onRelease = function(){
    //You need this._parent this code belongs to the button
    this._parent.searchbox.execute();
}

//The onKeyDown handler for the button
searchButton.onKeyDown = function(){
    //Key.getCode() returns the key code of the last key press
    //Key.ENTER is a constant equal to the key code of the enter key
    if(Key.getCode() == Key.ENTER){
        this._parent.searchbox.execute();
    }
} 
```

# javascript - JavaScript 在加载 div 后更改 HTML 代码

> ID：14697248
> 
> 赞同：0
> 
> 时间：2013-02-04T22:53:00.190
> 
> 标签：javascript, ajax

我有一个从数据库获取值的页面，我无法控制这些值/它们的调用方式，但最终结果看起来像标准 HTML 代码，例如：

```
<div id="myDiv" class="controls">
    <select id="jform_province" name="jform[province]">
        <option value="AB">Alberta</option>
        <option value="BC">British Columbia</option>
        <option value="MB">Manitoba</option>
    </select>
</div> 
```

我希望在页面末尾放置一个脚本，该脚本可以通过添加一个函数来修改选项元素，因此它看起来像这样：

```
<option value="AB" onClick="someFunction()">Alberta</option> 
```

如何修改代码？我知道如何编辑 div 的全部内容，但我想更改元素，我不知道元素的值是什么，所以脚本需要在“myDiv”中找到所有选项标签（我在我不想更改的页面）并将该代码添加到所有这些中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:55:02.047

只需附加一个事件处理程序：

```
document.getElementById('jform_province').onchange = function() {
  switch(this.options[this.selectedIndex].value) {
    case "AB": someFunction(); break;
    // define other cases as needed
  }
}; 
```

请注意，`<option>`元素在被选中时不会触发`onclick`事件，即使它们触发了，它也不会检测到其他输入方法，例如使用键盘。上面的代码提供了另一种选择。

# c++ - 通过 WinAPI 打开/关闭/管理 Windows 8 应用程序

> ID：14697252
> 
> 赞同：1
> 
> 时间：2013-02-04T22:53:07.850
> 
> 标签：c++, windows, winapi, windows-8

**是否可以通过桌面程序的 WinAPI 功能**打开或**管理所有 Windows 8 应用程序**（例如内置邮件或新闻应用程序）？

 **使用“*管理*”，我的意思是打开、关闭、对齐（向左和向右）或枚举 Windows 8 应用程序。

我知道应用程序可以注册特殊的 URI 方案，以便可以通过链接（可能还可能通过`ShellExecute()`和相关功能）打开它们，但如果它们不这样做呢？

* * *

我刚刚在 Win8 App Dev 博客中找到了*Ashwin Needamangala*的博客文章，其中涵盖了应用程序激活和使用 C++、WinAPI 和 COM 自动化生命周期状态：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/ 09/04/automating-the-testing-of-windows-8-apps.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:12:37.723

枚举通过[PackageManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.management.deployment.packagemanager.aspx)类工作。[可以使用IApplicationActivationManager](http://msdn.microsoft.com/de-de/library/windows/desktop/hh706902%28v=vs.85%29.aspx)接口打开应用程序。如果你是打开它的人并且你有一个句柄，你也可以在它上面调用[TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)，但我没有尝试过那个。

编辑：我们开源了我们的[apprunner 实用程序](https://github.com/doo/metro-driver)，它可以安装、运行和卸载包，并展示了 PackageManager 和 IApplicationActivationManager 的使用。

除此之外，从外部似乎无法进行其他交互（即捕捉/取消捕捉）。**

# mysql - 消息系统的mysql查询

> ID：14697254
> 
> 赞同：3
> 
> 时间：2013-02-04T22:53:12.393
> 
> 标签：mysql, sql

我正在开发消息传递系统并且在写下查询（MYSQL）时遇到了麻烦。简而言之，查询应该为每个对话用户返回一组最后一条消息。

```
CREATE TABLE 'tbl_message'('id' int(10) AUTO_INCREMENT,
  'from_user' int(10),
  'to_user' int(10),
  'reply_to' int(10),
  'subject',
  'body' text,
  'status' tinyint(3),
  'deleted_from_sender' tinyint(3),
  'deleted_from_recipient' tinyint(3)',
  'created_on' datetime, 
```

我写了查询：

```
SELECT * FROM tbl_message s1 WHERE s1.created_on IN (
   SELECT MAX(s2.created_on)
      FROM tbl_message s2 WHERE s1.from_user=".$userID." OR s2.to_user=".$userID."
      GROUP BY s2.from_user, s2.to_user) 
       AND status = 0"; 
```

这很好，但给了我来自 from_user 和 to_user 的 2 条最后一条消息，而不是来自两者的 1 条最后一条消息。那当然是因为 GROUP BY，现在的问题是我如何在子查询中找到 max created_on（实际上是 mysql 日期戳）？或任何其他解决方案将不胜感激。感谢任何帮助或建议。

经过2天挖掘stackoverflow和mysql手册希望得到DB prof的帮助:)

UPD：例如一些数据

```
+----+-------+--------+--------+---------------------+--------+---------+
| id | from_user | to_user | subject      | created_on          | status |
+----+-------+--------+--------+---------------------+--------+---------+
|  1 |   68      |   128   | somesubject1 | 2013-07-01 21:31:29 |      0 |
+----+-------+--------+--------+---------------------+--------+---------+
|  2 |    128    |   68    | somesubject2 | 2013-07-01 21:41:29 |      0 |
+----+-------+--------+--------+---------------------+--------+---------+
|  3 |    128    |   68    | somesubject3 | 2013-07-01 21:51:29 |      0 |
+----+-------+--------+--------+---------------------+--------+---------+
|  4 |    68     |   226   | somesubject4 | 2013-07-01 22:01:29 |      0 |
+----+-------+--------+--------+---------------------+--------+---------+ 
```

查询的输出

```
|  3 |    128    |   68    | somesubject3 | 2013-07-01 21:51:29 |      0 |
+----+-------+--------+--------+---------------------+--------+---------+
|  4 |    68     |   226   | somesubject4 | 2013-07-01 22:01:29 |      0 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:04:17.857

您可以使用此查询来获取两个用户之间的最大 created_on 日期：

```
SELECT
  LEAST(from_user, to_user) user1,
  GREATEST(from_user, to_user) user2,
  MAX(created_on) max_created_on
FROM
  tbl_message
GROUP BY
  LEAST(from_user, to_user),
  GREATEST(from_user, to_user) 
```

您正在寻找的查询可能是这样的：

```
SELECT t.*
FROM
  tbl_message t INNER JOIN (
    SELECT
      LEAST(from_user, to_user) user1,
      GREATEST(from_user, to_user) user2,
      MAX(created_on) max_created_on
    FROM
      tbl_message
    WHERE from_user=68 or to_user=68
    GROUP BY
      LEAST(from_user, to_user),
      GREATEST(from_user, to_user)) M
  on t.created_on = M.max_created_on
     AND LEAST(t.from_user, t.to_user)=user1
     AND GREATEST(t.from_user, t.to_user)=user2 
```

[请参阅此处](http://sqlfiddle.com/#!2/4b7383/8)的两个查询。

# opencv - SIFT 特征检测器的 OpenCV 关键点“响应”值全为 0

> ID：14697260
> 
> 赞同：1
> 
> 时间：2013-02-04T22:54:00.513
> 
> 标签：opencv, sift

我正在实例化一个 SIFT FeatureDetector 并尝试使用相应的掩码检测某些图像上的关键点。我在掩码中得到了很好的关键点，但是，这些特征关键点没有按任何顺序排列。关键点的所有响应值都为零。有谁知道为什么会这样，或者我可能会错过什么？

编辑：示例代码。当然，关键点、掩码和图像变量已经初始化。

```
Ptr<FeatureDetector> detector = FeatureDetector::create("SIFT"); //new SiftFeatureDetector();                      

detector->detect(loadedImg, keypoints_free, mask); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:10:54.230

我遇到了同样的问题，发现了这个错误条目：[http ://code.opencv.org/issues/2210](http://code.opencv.org/issues/2210)

它说这个错误已在 openCV 2.4.4 中修复。

# ruby - 为什么 JRuby 的 read_nonblock 会阻塞？

> ID：14697272
> 
> 赞同：3
> 
> 时间：2013-02-04T22:54:47.623
> 
> 标签：ruby, jruby, nonblocking

我正在尝试将错误日志记录添加到 JRuby 进程中，该进程从一个子进程的标准输出读取数据，并将这些数据写入另一个子进程的标准输入，同时收集一些关于数据的统计信息。子进程使用`IO.popen4`.

要读取错误流，我不能使用阻塞读取，因为在正常情况下，这些流上没有输出。但是，当我`read_nonblock`在这些流上使用时，我仍然会遇到 JRuby 中的阻塞读取。

为什么`read_nonblock`调用会阻塞，我该如何重写这段代码，使其永远不会阻塞并始终显示任一子进程输出的任何标准错误？

下面是我正在使用的重现问题的代码的简化版本。它在 jruby 上阻塞，并且不会在`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]`.

```
if RUBY_PLATFORM != "java" && RUBY_VERSION =~ /^1\.9/
  class IO
    def self.popen4(*args, &block)
      require "open4"
      Open4::popen4(*args, &block)
    end
  end
end

IO.popen4('echo', 'hi') do |_, _, stdout1, stderr1|
  IO.popen4('sh', '-c', 'cat 1>&2') do |_, stdin2, _, stderr2|
    stdout1.each_line do |line|
      stdin2 << line
      (IO.select([stderr1, stderr2], [], [], 0.1) or [[]]).first.each do |stream|
        begin
          # in jruby 1.6.8 (ruby-1.9.2-p312) (2012-09-18 1772b40) (Java HotSpot(TM) Client VM 1.6.0_37) [darwin-i386-java], read_nonblock blocks
          # idem in jruby 1.7.2 (1.9.3p327) 2013-01-04 302c706 on Java HotSpot(TM) Client VM 1.6.0_37-b06-434-11M3909 [darwin-i386]
          puts stream.read_nonblock(1000)
        rescue Exception => e
          puts e.message
        end
      end
    end
  end
end 
```

我知道它在 read_nonblock 中被阻止，因为按下 ctrl+\ 时的堆栈跟踪：

```
"main" prio=5 tid=0000000003110800 nid=0xb0201000 runnable [00000000b01ff000]
java.lang.Thread.State: RUNNABLE
at sun.nio.ch.FileDispatcher.read0(Native Method)
at sun.nio.ch.FileDispatcher.read(FileDispatcher.java:26)
at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:198)
at sun.nio.ch.IOUtil.read(IOUtil.java:171)
at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:144)
- locked <0000000006158308> (a java.lang.Object)
at org.jruby.util.io.ChannelStream.refillBuffer(ChannelStream.java:196)
at org.jruby.util.io.ChannelStream.bufferedRead(ChannelStream.java:926)
at org.jruby.util.io.ChannelStream.bufferedRead(ChannelStream.java:888)
at org.jruby.util.io.ChannelStream.fread(ChannelStream.java:1288)
- locked <000000000615a8f8> (a org.jruby.util.io.ChannelStream)
at org.jruby.util.io.ChannelStream.readnonblock(ChannelStream.java:1314)
- locked <000000000615a8f8> (a org.jruby.util.io.ChannelStream)
at org.jruby.RubyIO.getPartial(RubyIO.java:2762)
at org.jruby.RubyIO.read_nonblock(RubyIO.java:2697)
at org.jruby.RubyIO$INVOKER$i$0$1$read_nonblock.call(RubyIO$INVOKER$i$0$1$read_nonblock.gen)
at org.jruby.internal.runtime.methods.JavaMethod$JavaMethodN.call(JavaMethod.java:646)
at org.jruby.internal.runtime.methods.DynamicMethod.call(DynamicMethod.java:204)
at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:168)
at read_nonblock_test.chained_2_rescue_1$RUBY$SYNTHETIC__file__(read_nonblock_test.rb:19)
at read_nonblock_test.block_3$RUBY$__file__(read_nonblock_test.rb:16)
at read_nonblock_test$block_3$RUBY$__file__.call(read_nonblock_test$block_3$RUBY$__file__)
at org.jruby.runtime.CompiledBlock19.yield(CompiledBlock19.java:139)
at org.jruby.runtime.Block.yield(Block.java:130)
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:07:56.177

所以，这是一个非常令人反感的解决方案，但它对我有用。由于 select 总是返回“yes”，而 nonblock 不起作用，我看不到其他选择：

```
 require 'timeout'
      begin
        while true
          line = nil
          Timeout::timeout(1) { line=io.gets }
          if line.nil?
            break
          else
            puts "line: #{line}"
          end
        end
      rescue Timeout::Error
      end 
```

-罗宾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:46:31.300

（这不是真正的答案，更多的是问题的延续）

我的从不阻塞（1.6.8），但*总是*返回 EAGAIN。我还没有找到*任何*方法在 jruby 中使用管道检测数据但不阻塞：

```
jruby-1.6.8 :001 > io=IO.popen('sh -c "sleep 10"') ; select([io],nil,nil,0)
 => [[#<IO:0x6e72d873>], [], []]
jruby-1.6.8 :003 > sleep 10 ; begin ; io.read_nonblock(1) ; rescue Exception => e ; puts "nothing: #{e.class.name}" ; puts "#{io.eof?}" ; end
nothing: Errno::EAGAIN
true
 => nil
jruby-1.6.8 :001 > io=IO.popen('sh -c "sleep 10"') ; select([io],nil,nil,0)
 => [[#<IO:0x6e72d873>], [], []]
jruby-1.6.8 :006 > require 'fcntl'; io=IO.popen('sh -c "sleep 10"') ; puts "f: #{io.fcntl(Fcntl::F_GETFL)}" ; io.fcntl(Fcntl::F_SETFL, Fcntl::O_NONBLOCK) ; puts "f: #{io.fcntl(Fcntl::F_GETFL)}" ; puts "e: #{io.gets}"
f: 0
f: 0
e:
 => nil
jruby-1.6.8 :007 > io=IO.popen('sh -c "echo foo ; sleep 10"') ; select([io],nil,nil,0) ; begin ; io.read_nonblock(1) ; rescue Exception => e ; puts "nothing: #{e.class.name}" ;     puts "#{io.eof?}" ; end
nothing: Errno::EAGAIN
false
 => nil 
```

并不是当数据存在时 read_nonblock 返回 EAGAIN ！在EOF！0.o

-罗宾

# javascript - 关于更改队列/后端数据库更新的文本

> ID：14697280
> 
> 赞同：1
> 
> 时间：2013-02-04T22:55:11.880
> 
> 标签：javascript, sql-server, asp.net-mvc

我有一个 JavaScript 表单，可以`<textarea>`通过 ajax 调用保存对我的服务器所做的更改。我希望保持简单，并连接事件`change`并`keyup`相应地触发对我的服务器的调用。

当多个重叠调用开始导致我的数据库出现乐观并发问题时，就会出现我的问题。（带有 RowVersions 的 SQL 2008）。

1.  有什么办法可以让ajax调用排队，这样我一次就不会超过一个？
2.  更好的方法是使用计时器而不是更改事件。每2秒更新一次？确保最终更新`onBlur`？
3.  这是否最好在服务器上处理，因为多个客户端（虽然不太可能）仍然可能导致相同的问题。那会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:52:05.540

减少调用次数的一种方法是将 ajax 调用延迟几秒钟，以查看用户是否会继续输入。你的 change/keyup 监听器的主体中会有这样的东西：

```
if(timeoutId){ 
    // prevent last timeout from sending the ajax call
    clearTimeout(timeoutId);
    timeoutId = 0;
}
timeoutId = setTimeout(sendAjaxToSaveState,delayInMilliseconds); 
```

您还应该像您在第二个选项中提到的那样在 blur 上发送 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:36:05.473

SQL 服务器应该能够足够快地处理文本字段的更新，以免导致并发问题。我建议您使用分析器并找出延迟的确切位置。

之后，如果您仍然希望将呼叫排队，我不确定是否可以通过排队 ajax 来完成，因为 ajax 是在多线程环境中的 IIS 工作进程中处理的。话虽如此，您可以选择使用单例模式来实现您自己的进程队列。

在这种情况下，您将在应用程序范围内创建一个静态类，该类将实现一个命令列表。您的 Ajax 后处理程序将使用列表注册 SQL 命令并立即退出。该类本身将在单独的线程上以串行方式处理列表中的每个命令。

正如您所看到的，您必须做一些工作才能使其正常工作，因此最好的选择可能仍然是弄清楚为什么 sql server（或任何中间层）花费的时间比处理查询的时间要长。

# javascript - ajax客户端-服务器通信

> ID：14697281
> 
> 赞同：0
> 
> 时间：2013-02-04T22:55:18.263
> 
> 标签：javascript, asp.net, ajax

我之前在这个网站上问过一个关于 ajax 客户端-服务器通信的问题。

我得到了很多帮助。但还是想不通，所以重新问这个问题。

**我正在尝试将存储在变量“mem_ID”中的值从我的 javascript 页面...Default.aspx 发送到我的服务器端 - Default.aspx.cs 页面。**

Javascript：-

```
<asp:Button ID="Button6" runat="server" BackColor="Silver" 
            onclientclick="store_memID()" style="margin-left: 20px" Text="Submit" 
            Width="102px" Font-Bold="True" Height="28px" />

<script type = "text/javascript" src ="http://code.jquery.com/jquery-1.9.0.min.js"> </script>

 <script type = "text/javascript"> 

        // Function to caputure client-input- Member_ID.
        function store_memID() {

            // 'TextBox3' is the server side ID. To get the client side ID we do the following:-
            mem_ID = document.getElementById('<%=TextBox3.ClientID%>').value;

            //return confirm('TimeLine is displayed for: ' + mem_ID);

            ajax();
        }

        function ajax(){
            $.ajax({
                url: 'Default.aspx/MyMethod',
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify({ memID: mem_ID }),
                success: function (result) {
                alert(result.d);
                }
            });

        }

        </script> 
```

服务器端：-

```
 public partial class _Default : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        // Defining a page method. 
        [WebMethod]
        public static string MyMethod(string mem_ID)
        {
            return string.Format("Thanks for calling me with id: " + mem_ID);

        }
` more code here`.... 
```

**但是，我仍然没有得到服务器的任何回复。我期待从服务器端返回“感谢您用 ID 给我打电话：.....”。有任何想法吗？**

我在 MyMethod 中，在响应行，在服务器端添加了一个断点，并且没有命中。所以我假设这条线甚至没有被遍历。

我是 Asp.net 和 Ajax 的新手。并需要有关此主题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:27:56.617

这是我为您编写的完整示例以供您入门：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System.Web.Services" %>
<script type="text/c#" runat="server">
    [WebMethod]
    public static string MyMethod(string memId)
    {
        return string.Format("Thanks for calling me with id: " + memId);
    }
</script>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Button ID="MyButton" runat="server" Text="Submit" />
        <asp:TextBox ID="MyTextBox" runat="server" />
    </form>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
        $('#<%= MyButton.ClientID %>').click(function () {
            var memId = $('#<%= MyTextBox.ClientID %>').val();
            $.ajax({
                url: '<%= ResolveUrl("~/Default.aspx/MyMethod") %>',
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify({ memId: memId }),
                success: function (result) {
                    alert(result.d);
                }
            });
            return false;
        });
    </script>
</body>
</html> 
```

出于演示的目的，它是一个自包含的 WebForm，但您当然可以将后面的代码与标记分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:47:33.590

```
<form id="form1" runat="server">
    <div>
    <asp:Button ID="Button6" runat="server" BackColor="Silver" 
            onclientclick="store_memID()" style="margin-left: 20px" Text="Submit" 
            Width="102px" Font-Bold="True" Height="28px" /> 
<script type = "text/javascript" src ="http://code.jquery.com/jquery-1.9.0.min.js"> </script>
 <script type = "text/javascript">

     // Function to caputure client-input- Member_ID.
     function store_memID() {
         var mem_ID;
         // 'TextBox3' is the server side ID. To get the client side ID we do the following:-
         mem_ID = document.getElementById('<%=TextBox3.ClientID%>').value;

         //return confirm('TimeLine is displayed for: ' + mem_ID);

         ajax(mem_ID);
     }
     function ajax(mem_ID) {
         alert(mem_ID);
         $.ajax({
             url: 'Default.aspx/MyMethod',
             type: 'POST',
             contentType: 'application/json; charset=utf-8',
             data: JSON.stringify({ memID: mem_ID }),
             success: function (result) {
                 alert(result.d);
             }
         });
     }
        </script>
    <asp:TextBox id="TextBox3" runat="server"></asp:TextBox>
    </div>
    </form>
In Your Code Behind

[WebMethod]
        public static string MyMethod(string memID)
        {
            return string.Format("Thanks for calling me with id: " + memID); 
        }

The method u have done all was right execpt,
The data passing from ajax should match the string Element declared in the Web-method. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:27:14.977

您将值作为 JSON 对象传递，指定请求的数据类型并指定服务器的返回格式很重要。

```
function ajax(){
            $.ajax({
                url: 'default.aspx/MyMethod',
                type: 'POST',
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify({ memID: mem_ID }),
                success: function (result) {
                alert(result.d);
                }
            });
        }

// Defining a page method. 
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static string MyMethod(string mem_ID)
 {
            return string.Format("Thanks for calling me with id: " + mem_ID);
 } 
```

然后您需要添加一个 ScriptManager 和 UpdatePanel 来触发 Ajax 调用。ScriptManager 提供了从 Aspx 页面调用 WebMethods 的功能。将此与我提供的上述代码一起使用。

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"/>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>

         <asp:Button ID="Button6" runat="server" BackColor="Silver" OnClientClick="store_memID()"
        Style="margin-left: 20px" Text="Submit" Width="102px" Font-Bold="True" Height="28px" />

         <asp:TextBox ID="TextBox3" runat="server">Testing</asp:TextBox>
    </ContentTemplate>
</asp:UpdatePanel>

</form>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:59:18.473

通常我会创建一个 Ajax.aspx 文件来处理大多数客户端-服务器 ajax 交互，就像在下面的示例中一样。然后这个页面加载特定的控件。我有时会`function`在 ajax 请求中添加一个参数来访问控件中的特定方法，或者直接在 Ajax.aspx 页面上访问。

示例：
[简单的 ASP.net ajax 框架](http://statehandler.com/asp-net/ajax-using-asp-net-and-jquery)

# postgresql - 在传单中使用来自 pgAdminIII 的内容创建弹出窗口

> ID：14697285
> 
> 赞同：1
> 
> 时间：2013-02-04T22:55:47.060
> 
> 标签：postgresql, leaflet

我无法将包含我的 postgres 数据库中的内容的弹出窗口创建到传单中。我的数据库已连接，点显示为图层，但弹出窗口未显示内容。如何指定要放入窗口的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:20:10.150

当您使用数据库中的 geojson 功能创建 Leaflet 图层时，如下所示：

```
L.geoJson(geojsonFeature, {
    onEachFeature: onEachFeature
}).addTo(map); 
```

您可以使用 onEachFeature 选项调用您自己的函数，该函数将为您的每个功能定义弹出内容：

```
function onEachFeature(feature, layer) {

    if (feature.properties && feature.properties.YourPropertyName) {
        layer.bindPopup(feature.properties.YourPropertyName);
    }
} 
```

在这种情况下：您从数据库收到的 geojson 至少应包含如下指定的属性：

```
var geojsonFeature = {
    "type": "Feature",
    "properties": {
        "YourPropertyName": "Coors Field",
        "anotherProperty": "Baseball Stadium"
    },
    "geometry": {
        "type": "Point",
        "coordinates": [-104.99404, 39.75621]
    }
}; 
```

希望这有帮助

# excel - 禁用删除工作表

> ID：14697288
> 
> 赞同：3
> 
> 时间：2013-02-04T22:56:16.640
> 
> 标签：excel, excel-2010, vba

我还想防止用户删除一些工作表。如何在excel 2010中做到这一点？ `Application.CommandBars("Ply")`不再起作用了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T21:58:27.503

您可以通过保护工作簿的结构来做到这一点（我认为该选项在*Review*选项卡中的 Protection 下）

我相信这是实际防止用户删除工作表的唯一方法，尽管可以使用 VBA 工作簿事件找出工作表已被删除 -[请参阅 MerExcel.com 上 Excel MVP Colo 的此答案](http://www.mrexcel.com/forum/excel-questions/5340-worksheet-delete-event.html#post24123)

# django - gunicorn 启动后无法访问 Django 站点

> ID：14697291
> 
> 赞同：2
> 
> 时间：2013-02-04T22:56:24.377
> 
> 标签：django, gunicorn

我正在尝试使用 shell 脚本启动 gunicorn 服务器。问题是一个站点不可访问（当我尝试通过浏览器访问它时连接超时）。我这里有 2 个脚本，一个有效，一个无效。我试图了解为什么第一个脚本不起作用以及如何解决问题。

**第一个脚本**（**不起作用**；当我尝试访问 domain.com:8000 上的站点时连接超时；日志中没有错误）：

```
#!/bin/bash
  set -e
  LOGFILE=/var/log/gunicorn/hello.log
  LOGDIR=$(dirname $LOGFILE)
  NUM_WORKERS=3

  USER=lumiawor
  GROUP=lumiawor

  cd /home/lumiawor/public_html/test/hello
  source /home/lumiawor/public_html/test/bin/activate
  test -d $LOGDIR || mkdir -p $LOGDIR

  gunicorn_django -w $NUM_WORKERS \
      --user $USER --group $GROUP --log-level debug \
      --log-file $LOGFILE 2>>$LOGFILE 
```

**第二个脚本**（**作品**；站点加载在 domain.com:8000）：

```
#!/bin/bash
  set -e
  LOGFILE=/var/log/gunicorn/hello.log
  LOGDIR=$(dirname $LOGFILE)
  NUM_WORKERS=3

  USER=lumiawor
  GROUP=lumiawor

  cd /home/lumiawor/public_html/test/hello
  source /home/lumiawor/public_html/test/bin/activate
  test -d $LOGDIR || mkdir -p $LOGDIR

  gunicorn_django -w $NUM_WORKERS -b 0.0.0.0:8000
      --user $USER --group $GROUP --log-level debug \
      --log-file $LOGFILE 2>>$LOGFILE 
```

唯一的区别在于 gunicorn_django 行。我实际上不确定反斜杠是什么意思。它是否告诉 gunicorn 在默认地址上运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T02:37:57.633

黑斜线只是将单个命令继续到下一行的一种方式。

这里的关键是**-b 0.0.0.0:8000**，它告诉 gunicorn 在您的**所有**网络接口上提供服务。如果没有 -b 参数，它将绑定到 127.0.0.1:8000 并且只服务来自**本地机器**的请求。

最有可能的是，**-b 0.0.0.0:8000**只有在 gunicorn 直接处理来自外部世界的请求时才是您想要的。如果您使用 nginx 或其他一些反向代理服务器（常见设置）并且只希望 gunicorn 服务来自同一台机器的请求，您将需要使用第一个脚本。

典型的设置如下：

*   用户 -> nginx 监听 0.0.0.0:80 或公共 ip -> gunicorn 监听 127.0.0.1:8000

顺便说一句，您可以使用**ifconfig**命令查看您机器的可用接口列表。

# windows - 如何创建一个 Win32 控件来包含其他 Win32 控件？

> ID：14697294
> 
> 赞同：7
> 
> 时间：2013-02-04T22:56:42.383
> 
> 标签：windows, winapi, visual-c++

设置：几年前，我们开发了一个不错的 C++ 跨平台，它管理了许多在 Mac OS X Windows 之间编写通用代码源的问题。（我们不会讨论这种方法的巨大缺点——我们是在 1993 年开发的！）。

为了简化可重用组件的开发，我们最近添加了一个“窗格”概念以包含多个控件和用户项，主要处理绘图和其他事件的分层性质，例如击键和鼠标点击。

我们在 Mac OS X (Carbon) 端成功地构建了这种方法。然而，试图将这种方法转移到 Windows（XP SP3 及更高版本）导致了无数混乱的问题：不停地重新绘制窗口内容，以及没有将事件传递到我们的“窗格”中。

在 Windows 上，每个窗格都转换为一个“窗口”，我怀疑这可能是问题的根源：在封闭项目“下”重叠项目可能会干扰绘图和事件传播。

是否有一种可接受的方法以编程方式将控件添加到分组层次结构中？或者是否必须设置特定的 FLAGS 才能完成此操作？

（注意：虽然我们目前与 XP SP3 兼容，但我们不需要这样做——我们可以将我们的最低操作系统定位为 Windows 7。我们目前正在使用 VS 2010 进行开发）

斯蒂芬

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T09:36:23.223

它通常如何工作的简单细分。

当您创建包含子窗口的父窗口（以下称为“窗格”）时，闪烁通常是由于父窗口的窗口过程处理 WM_ERASEBKGND 消息，并在指示子窗口之前在其所有子窗口的“顶部”绘制重绘自己。

正如 Nik Bougalis 所说，在创建父窗格时，如果您使用 CS_CLIPCHILDREN 样式创建它，则 DefWindowProc() 执行的任何绘制都不会发生在窗格的任何子边界（矩形或区域）的范围内。因此，子窗口或控件所占用的“屏幕空间”完全是子控件本身的责任。

对于大多数标准 Windows 控件，这很好。这将解决闪烁的问题。

至于消息：孩子们的窗口每个都会收到他们的 WM_MOUSEMOVE、WM_LBUTTONDOWN、WM_KEYDOWN（以及其他）消息。Windows 将这些消息发送到具有焦点的实际窗口。

如果您希望父窗口获得这些，您将不得不做一些称为子类化子窗口（控件）的窗口过程的事情。然后在您的新 WndProc() 中，您将有一个处理程序来处理您想要捕获的消息并将它们发送到父窗格的 HWND。

这是在控件中嵌入控件的简单工作示例。它显示子分类和将消息传递回上游。

右键单击蓝色“窗格”中的两个孩子中的任何一个，编辑控件或按钮！

```
#define _CRT_SECURE_NO_WARNINGS
#include <Windows.h>
#include <stdio.h>

LRESULT __stdcall WndProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam );
LRESULT __stdcall FrameProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam );
LRESULT __stdcall SubClassProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam );

int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hpi, LPSTR lpcl, int ncs) {

    WNDCLASSEX wcex;
    MSG msg;
    HWND hWnd=0, hFrame=0, hEdit=0, hButton=0, hCheckBox=0;
    ATOM ca=0, caframe=0;
    RECT cr;
    HBRUSH framecolor;
int cx=0;
    char *ptr=(char *)&wcex;
    int i =0;
    for (;i<sizeof(wcex);i++) {
        ptr[i]=0;
    }
    wcex.cbSize=sizeof(wcex);
    wcex.hbrBackground = (HBRUSH) COLOR_WINDOW;
    wcex.hCursor = LoadCursor(0, IDC_ARROW);
    wcex.lpfnWndProc = &WndProc;
    wcex.lpszClassName = "mywnd";
    wcex.hInstance = hInstance;
    wcex.style = CS_HREDRAW|CS_VREDRAW;

    ca = RegisterClassEx(&wcex);

    for (i=0;i<sizeof(wcex);i++) {
        ptr[i]=0;
    }
    wcex.cbSize=sizeof(wcex);
    framecolor = CreateSolidBrush(0xFFA100);
    wcex.hbrBackground = (HBRUSH) framecolor;
    wcex.hCursor = LoadCursor(0, IDC_ARROW);
    wcex.lpfnWndProc = &FrameProc;
    wcex.lpszClassName = "myframe";
    wcex.hInstance = hInstance;
    wcex.style = CS_HREDRAW|CS_VREDRAW;
    caframe = RegisterClassEx(&wcex);

    hWnd = CreateWindowExA(0, (LPCSTR)ca, "My Window", WS_CLIPCHILDREN|WS_VISIBLE|WS_SYSMENU|WS_SIZEBOX, 100, 100, 500, 500, 0, 0, hInstance, 0);
    GetClientRect(hWnd, &cr);
    hFrame = CreateWindowExA(0, (LPCSTR)caframe, "", WS_VISIBLE|WS_BORDER|WS_CHILD|WS_CLIPCHILDREN, 10, 10, ((cr.right-cr.left)-20), ((cr.bottom-cr.top)-20), hWnd, (HMENU) 1, hInstance, 0);
    cx = ((cr.right-cr.left)-20)/2;
    hEdit = CreateWindowExA(0, "Edit", "Edit Control", WS_CHILD|WS_VISIBLE|WS_BORDER, 10, 10, cx, 20, hFrame, (HMENU) 2, hInstance, 0);
    hButton = CreateWindowExA(0, "Button", "Click Me!", WS_CHILD|WS_VISIBLE, cx+20, 10, 70, 20, hFrame, (HMENU) 3, hInstance, 0);

    /* Sub-Class the children */
    SetWindowLongPtr(hEdit, GWLP_USERDATA, GetWindowLongPtr(hEdit, GWLP_WNDPROC));
    SetWindowLongPtr(hButton, GWLP_USERDATA, GetWindowLongPtr(hButton, GWLP_WNDPROC));
    SetWindowLongPtr(hEdit, GWLP_WNDPROC, (LONG)&SubClassProc);
    SetWindowLongPtr(hButton, GWLP_WNDPROC, (LONG)&SubClassProc);

    if (!hWnd) {
        return -1;
    }
    while ( GetMessage(&msg, 0, 0, 0) ) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    DestroyWindow(hWnd);
    DeleteObject(framecolor);
    return 0;
}

LRESULT __stdcall WndProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam ) {
    RECT rc;
    switch (uMsg) {
    case WM_WINDOWPOSCHANGING:
        GetClientRect(hWnd, &rc);
        SetWindowPos(GetDlgItem(hWnd, 1), 0, 0, 0, ((rc.right-rc.left)-20), ((rc.bottom-rc.top)-20), SWP_NOZORDER|SWP_NOMOVE);
        break;
    case WM_CLOSE:
        PostQuitMessage(0);
        break;
    default:
        break;
    }
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
}   

LRESULT __stdcall FrameProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam ) {
    PAINTSTRUCT ps;
    WINDOWPOS *wp=0;
    POINT p;
    short wmid=0, wmevent=0;
    char message[300];
    switch (uMsg) {
    case WM_WINDOWPOSCHANGING:
        wp = (WINDOWPOS *)lParam;
        SetWindowPos(GetDlgItem(hWnd, 2), 0, 0, 0, (wp->cx/2), 20, SWP_NOMOVE|SWP_NOZORDER);
        SetWindowPos(GetDlgItem(hWnd, 3), 0, (wp->cx/2)+20, 10, 0, 0, SWP_NOSIZE|SWP_NOZORDER);
        break;
    case WM_RBUTTONDOWN:
        p.x = (lParam & 0x0000ffff);
        p.y = (lParam >> 16 );
        sprintf(message, "The \"frame\" got a WM_RBUTTONDOWN message!\nx: %i\ny: %i\n",
            p.x, p.y);
        MessageBox(GetParent(hWnd), message, "Message", MB_ICONINFORMATION);
        break;
    case WM_COMMAND:
        wmid = (wParam & 0x0000ffff);
        wmevent = wParam>>16;
        switch (wmid) {
        case 3:
            if (wmevent==BN_CLICKED) {
                MessageBox(GetParent(hWnd), "You clicked my button!", "Notice", MB_OK);
            }
            break;
        default:
            break;
        }
        break;
    case WM_PAINT:
        break;
    default:
        break;
    }
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
}

LRESULT __stdcall SubClassProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam ) {
    WNDPROC wp=0;
    POINT p;
    HWND hParent=0;
    char message[300];
    wp = (WNDPROC)GetWindowLongPtr(hWnd, GWLP_USERDATA);
    if (!wp) {
        return DefWindowProc(hWnd, uMsg, wParam, lParam);
    }
    if (uMsg==WM_RBUTTONDOWN) {
        p.x = (lParam & 0x0000ffff);
        p.y = (lParam >> 16 );
        sprintf(message, "Right-Click in control!\nx: %i\ny: %i\n\nNow, we'll convert this to the coordinates of the frame and pass the message up-stream!",
            p.x, p.y);
        hParent = GetParent(hWnd);
        MessageBox(GetParent(hParent), message, "Message", MB_ICONINFORMATION);
        ClientToScreen(hWnd, &p);
        ScreenToClient(hParent, &p);
        SendMessage(hParent, WM_RBUTTONDOWN, wParam, MAKELPARAM(p.x, p.y));
    }
    return CallWindowProc( wp, hWnd, uMsg, wParam, lParam);
} 
```

大多数本机 Windows 控件通过 WM_COMMAND 或 WM_NOTIFY 消息自动通知其父级。就像在编辑控件中更改文本时一样。它向包含它的父窗口发送一条 WM_COMMAND 消息。

*   A - 它的手柄
*   B - 这是一个标识符
*   C - 通知代码（事件），在本例中为 EN_CHANGE。

因此，您可以拦截这些消息并通过 SendMessage() 将它们转发到任何地方。

当您进入自定义绘图控件时，您需要了解以下内容：

1.  什么是设备上下文。
2.  处理 WM_PAINT 消息。
3.  也许是 WM_PRINTCLIENT 消息。
4.  BitBlt()
5.  也许是内存设备上下文。

内存设备上下文是您进行绘图操作的不可见位置。就像 bkausbk 说的，一个缓冲区。在程序中，我写到我也需要添加一点华丽，我绘制到内存设备上下文。然后，我在 WM_PAINT 事件（来自系统）中使用 BitBlt() 将我的所有窗口及其子项在其上绘制的内存设备上下文复制到要显示的窗口的设备上下文中。

```
PAINTSTRUCT ps;
case WM_PAINT:
    BeginPaint(hWnd, &ps);
    BitBlt(ps.hdc, 0, 0, cx, cy, hMemDC, 0, 0, SRCCOPY);
    EndPaint(hWnd &ps); 
```

不管怎样，有很多东西要学，但希望上面的小程序可以帮到你，给你一个玩玩的模板！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-05T10:53:05.613

可以遵循这些来实施：

1.  在创建父控件（即窗格）时使用 WS_CLIPSIBLING|WS_CLIPCHILDREN 标志。
2.  在消息循环中避免 WM_ERASEBKGND 消息并为此返回 TRUE。这取决于使用语义。- [https://www.codeproject.com/articles/2078/guide-to-win32-paint-for-intermediates](https://www.codeproject.com/articles/2078/guide-to-win32-paint-for-intermediates)
3.  当有自定义绘图时，使用双缓冲绘图。- [http://www.winprog.org/tutorial/bitmaps.html](http://www.winprog.org/tutorial/bitmaps.html)
4.  对于子窗口消息的处理，使用MFC的方式，即让子窗口先处理消息。这可以通过覆盖 windowproc 来完成。

# c# - 在 C# 中打开 GTK 窗口，返回数据并关闭窗口，然后打开另一个窗口？

> ID：14697295
> 
> 赞同：1
> 
> 时间：2013-02-04T22:56:44.253
> 
> 标签：c#, gtk

我正在使用带有 GTK 的 C# 来编写一个包含按钮的主窗口的应用程序。当其中一个按钮被按下时，它会调用一个事件处理函数，该函数会打开一个新窗口，其中包含一个供用户填写的表单。到目前为止，一切都很好。

我遇到的问题是我需要让这个事件处理函数打开这个窗口，等待它被填写并关闭，然后打开第二个窗口，等待它被填写并关闭，然后处理所有这些捕获的数据。我做了一个简单的例子来说明我的意思（我明白在下面的例子中，用两个组合框打开一个窗口会更有意义，但那只是一个例子！）

```
using System;
using Gtk;

namespace WaitingTest
{
    public class MainClass
    {       
        static void Main (string[] args)
        {
            Application.Init ();
            MenuWindow myWindow = new MenuWindow();

            Application.Run();
        }
    }

    public class MenuWindow
    {
        static string favDrink = "Water";
        static string favCheese = "Chedder";
        static Label output = new Label();

        public MenuWindow()
        {
            Application.Init ();

            Window test = new Window ("Main Window");

            VBox vb = new VBox();
            Button getData = new Button("Get Data");
            Button quitApp = new Button("Quit");

            getData.Clicked += OnGetData;
            quitApp.Clicked += OnExit;

            vb.PackStart(getData, false, false, 1);
            vb.PackStart(quitApp, false, false, 1);
            vb.PackStart(output, false, false, 1);

            test.Add(vb);
            test.ShowAll();

            Application.Run();
        }

        static void OnGetData(object sender, EventArgs args)
        {
            // Open up Window to select drink
            WindowOne w1 = new WindowOne();

            // Open up Window to select cheese
            WindowTwo w2 = new WindowTwo();

            // Display results in label
            output.Text="Drink: "+favDrink+"\nCheese: "+favCheese;
        }

        public static void SetFavDrink(string d)
        {
            favDrink = d;
            Console.WriteLine(favDrink);
        }

        public static void SetFavCheese(string c)
        {
            favCheese = c;
            Console.WriteLine(favCheese);
        }

        static void OnExit(object sender, EventArgs args)
        {
            Application.Quit();
        }

        protected void OnDeleteEvent(object sender, DeleteEventArgs a)
        {
            Application.Quit ();
            a.RetVal = true;
        }   
    }

    class WindowOne
    {
        ComboBox drink = ComboBox.NewText();
        static string choice;

        public WindowOne ()
        {
            Window w1 = new Window ("Window One");

            VBox vb = new VBox();

            Button sendDrink = new Button("Send Drink");

            sendDrink.Clicked += OnSend;
            drink.Changed += new EventHandler(onDrinkChanged);

            drink.AppendText("Beer");
            drink.AppendText("Red Wine");
            drink.AppendText("White Wine");
            drink.AppendText("Whiskey");

            vb.PackStart(drink, false, false, 1);
            vb.PackStart(sendDrink, false, false, 1);

            w1.Add(vb);
            w1.ShowAll();
        }

        void OnSend(object sender, EventArgs args)
        {
            WaitingTest.MenuWindow.SetFavDrink(choice);
        }

        void onDrinkChanged(object o, EventArgs args)
        {
            ComboBox combo = o as ComboBox;
            if (o == null)
                return;

            TreeIter iter;

            if (combo.GetActiveIter (out iter))
                choice = ((string) combo.Model.GetValue (iter, 0));
        }
    }

    class WindowTwo
    {
        ComboBox cheese = ComboBox.NewText();
        static string choice;

        public WindowTwo ()
        {
            Window w2 = new Window ("Window Two");

            VBox vb = new VBox();

            Button sendCheese = new Button("Send Cheese");

            sendCheese.Clicked += OnSend;
            cheese.Changed += new EventHandler(onCheeseChanged);

            cheese.AppendText("Gorgonzola");
            cheese.AppendText("Edam");
            cheese.AppendText("Brie");
            cheese.AppendText("Feta");

            vb.PackStart(cheese, false, false, 1);
            vb.PackStart(sendCheese, false, false, 1);

            w2.Add(vb);
            w2.ShowAll();
        }

        void OnSend(object sender, EventArgs args)
        {
            WaitingTest.MenuWindow.SetFavCheese(choice);
        }

        void onCheeseChanged(object o, EventArgs args)
        {
            ComboBox combo = o as ComboBox;
            if (o == null)
                return;

            TreeIter iter;

            if (combo.GetActiveIter (out iter))
                choice = ((string) combo.Model.GetValue (iter, 0));
        }
    }
} 
```

上面的情况是两个窗口同时打开，标签立即使用默认数据更新，而不是在两个窗口中选择的数据。所以我有两个问题：

1）我怎样才能让它打开WindowOne，等到检索到数据，然后打开WindowTwo，等到检索到数据，然后更新标签？

2) 如何编辑“OnSend”函数，使其在调用 SetFavDrink/SetFaveCheese 函数后关闭窗口？

有人可以在这里指出我正确的方向吗？我是这个编程云雀的新手，所以要温柔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:25:13.697

我认为这就是你想要的（注意这可能会被清理......）：

```
using System;
using Gtk;

    namespace WaitingTest
    {
        public class MainClass
        {       
            static void Main (string[] args)
            {
                Application.Init ();
                new MenuWindow();
                Application.Run();
            }
        }
        public class MenuWindow
        {
            public static string favDrink = "Water";
            public static string favCheese = "Chedder";
            public static Label output = new Label();

            public MenuWindow()
            {
                Application.Init ();

                Window test = new Window ("Main Window");

                VBox vb = new VBox();
                Button getData = new Button("Get Data");
                Button quitApp = new Button("Quit");

                getData.Clicked += OnGetData;
                quitApp.Clicked += OnExit;

                vb.PackStart(getData, false, false, 1);
                vb.PackStart(quitApp, false, false, 1);
                vb.PackStart(output, false, false, 1);

                test.Add(vb);
                test.ShowAll();

                Application.Run();
            }

            static void OnGetData(object sender, EventArgs args)
            {
                // Open up Window to select drink
                new WindowOne();
            }

            public static void SetFavDrink(string d)
            {
                MenuWindow.favDrink = d;
                Console.WriteLine(favDrink);
            }

            public static void SetFavCheese(string c)
            {
                MenuWindow.favCheese = c;
                Console.WriteLine(favCheese);
            }

            static void OnExit(object sender, EventArgs args)
            {
                Application.Quit();
            }

            protected void OnDeleteEvent(object sender, DeleteEventArgs a)
            {
                Application.Quit ();
                a.RetVal = true;
            }   
        }

        class WindowOne
        {
            ComboBox drink = ComboBox.NewText();
            static string choice;
            static Window w1 = new Window ("Window One");
            public WindowOne ()
            {

                VBox vb = new VBox();

                Button sendDrink = new Button("Send Drink");

                sendDrink.Clicked += OnSend;
                drink.Changed += new EventHandler(onDrinkChanged);

                drink.AppendText("Beer");
                drink.AppendText("Red Wine");
                drink.AppendText("White Wine");
                drink.AppendText("Whiskey");

                vb.PackStart(drink, false, false, 1);
                vb.PackStart(sendDrink, false, false, 1);

                w1.Add(vb);
                w1.ShowAll();
            }

            void OnSend(object sender, EventArgs args)
            {
                WaitingTest.MenuWindow.SetFavDrink(choice);
                WindowOne.w1.Destroy();
                new WindowTwo();

            }

            void onDrinkChanged(object o, EventArgs args)
            {
                ComboBox combo = o as ComboBox;
                if (o == null)
                    return;

                TreeIter iter;

                if (combo.GetActiveIter (out iter))
                    choice = ((string) combo.Model.GetValue (iter, 0));
            }
        }

        class WindowTwo
        {
            ComboBox cheese = ComboBox.NewText();
            static string choice;
            static Window w2 = new Window ("Window Two");
            public WindowTwo ()
            {

                VBox vb = new VBox();

                Button sendCheese = new Button("Send Cheese");

                sendCheese.Clicked += OnSend;
                cheese.Changed += new EventHandler(onCheeseChanged);

                cheese.AppendText("Gorgonzola");
                cheese.AppendText("Edam");
                cheese.AppendText("Brie");
                cheese.AppendText("Feta");

                vb.PackStart(cheese, false, false, 1);
                vb.PackStart(sendCheese, false, false, 1);

                w2.Add(vb);
                w2.ShowAll();
            }

            void OnSend(object sender, EventArgs args)
            {
                WaitingTest.MenuWindow.SetFavCheese(choice);
                WindowTwo.w2.Destroy();
                MenuWindow.output.Text="Drink: "+MenuWindow.favDrink+"\nCheese: "+MenuWindow.favCheese;
            }

            void onCheeseChanged(object o, EventArgs args)
            {
                ComboBox combo = o as ComboBox;
                if (o == null)
                    return;

                TreeIter iter;

                if (combo.GetActiveIter (out iter))
                    choice = ((string) combo.Model.GetValue (iter, 0));
            }
        }
    }

` 
```

# xml - libxml2：xmlNewChild() 中的特殊字符

> ID：14697298
> 
> 赞同：0
> 
> 时间：2013-02-04T22:57:03.330
> 
> 标签：xml, special-characters, libxml2

这可能是一个非常愚蠢的问题，但我会很感激任何帮助。我正在使用 libxml2 从 sql 数据库中的数据构建 XML 文件。所以我循环遍历 sql 表中的字段并执行以下操作：

```
xmlNewChild(node, NULL, (xmlChar*) template[i].c_str(), (xmlChar*) data[i].c_str()); 
```

生成 XML：

```
<template>data</template> 
```

现在，对于其中的少数几个，我想偷偷摸摸地通过设置`data[i]`等于包含 XML 的字符串来放入另一个子节点。因此，例如，我想设置`data[i]`为，`<subnode>text</subnode>` 以便生成的 XML 为：

```
<template><subnode>text</subnode></template> 
```

然而，在 XML 中，这些总是被渲染`&lt;`并且`&gt;`：

```
<template>&lt;subnode&gt;text&lt;/subnode&gt;</template> 
```

有没有办法保留尖括号？我认为使用`xmlNewChild()`而不是`xmlNewTextChild()`会保留字符，但显然不会。有没有办法将包含尖括号的字符串放入`data[i]`并将这些括号保留在构建的 XML 中？

（我意识到以这种方式偷偷添加额外的 xml 标签似乎是一种粗略的做法，但在我的情况下，它确实比找出许多字段中的哪些需要子节点然后以标准方式构建这些子节点要简单得多）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:23:15.703

不，libxml2 将始终转义内容中的标签。我认为[xmlNodeSetContent](http://xmlsoft.org/html/libxml-tree.html#xmlNodeSetContent)和 [xmlNodeAddContent](http://xmlsoft.org/html/libxml-tree.html#xmlNodeAddContent)在这方面有所不同，但它们没有 - 它仅用于实体引用，例如`&#169;`. SetContent 会将其作为“真实”实体引用包含在内，但 AddContent 会将其转义为`&amp;#169;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:51:27.633

不，你不能这样做。您需要先解析子节点，然后将其添加到父节点。

# javascript - 制作展开式广告 - 无需 Flash？

> ID：14697302
> 
> 赞同：1
> 
> 时间：2013-02-04T22:57:24.613
> 
> 标签：javascript, html

我正在尝试制作可在没有 Flash 的情况下使用的展开式广告（即在 iOS 上）。
我是一名前端网页设计师，没有真正的 Javascript 知识。
我找到了一个关于如何创建广告的示例代码，但它结合了 Flash 来激活展开和收回 Javascript 功能。

是否可以使用 gif/jpg 图片制作展开式广告？
我的意思是一个 300x40 的移动广告，点击一下就可以扩展到 300x400 全屏。

我真的很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:58:52.653

我建议使用**CSS3**尝试此操作，因为我想作为前端网页设计师，您对**CSS**更满意。
我很确定悬停相当于在大多数移动设备上点击。

试试下面的：

```
<style>
.youradvert {
   overflow: hidden;
   width: 300px;
   height: 40px;
   -webkit-transition: all 1s;
   -moz-transition: all 1s;
   -o-transition: all 1s;
   transition: all 1s;
}
.youradvert:hover {
   height: 400px;
}
</style> 
```

或者，点击与单击相同，您可以设置图像`display:none`并使用简单的**Javascript**函数更改显示值`onclick`。
您可能会发现单击实现比悬停更普遍，但我不确定。`VISIBILITY`如果`DISPLAY`不这样做，您可以使用。

如下所示：

```
<script type="text/javascript">
<!--
    function expand(){
        document.getElementById('large_ad').style.display=block;
    }
-->
</script>

<div class="youradvert">
   <img id="small_ad" src="http://example.com/image.jpg" onclick="expand()" alt="" style="width:300px;height:40px;"/>
   <img id="large_ad" src="http://example.com/image.jpg" style="display:none;width:300px;height:400px;" alt=""/>
</div> 
```

# php - 退出时运行 php 脚本

> ID：14697309
> 
> 赞同：0
> 
> 时间：2013-02-04T22:57:48.773
> 
> 标签：php, mysql

有没有办法在浏览器或窗口关闭时调用 php 脚本，当有人点击 X.

我有一个登录、注销脚本

```
$sql2 = "UPDATE `users` SET `loggedin` = '1' WHERE `username` = '$username' AND `password` = '$password' LIMIT 1 "; 
```

将 SQL 变量更改为 1 或 0，让我知道该人是否已登录。

如果该变量为 1 并且其他人尝试登录，他们将无法登录。

但我的问题是，如果有人在不注销的情况下关闭了窗口。变量保持为 1，因此他们无法登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:01:42.110

首先，您需要考虑准备好语句，因为您的代码目前容易受到 sql 注入的影响。

作为问题的答案，请尝试以下操作：

1.  使用会话，因为您需要捕获浏览器关闭的事件，会话将持续到浏览器打开。
2.  如果不是会话，则使用 javascript 捕获关闭事件（谷歌如何做），然后将 ajax 请求发送到 PHP 脚本，该脚本将更新 DB 中的所需字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:04:17.107

作为GGio的补充；

使用类似这样的 jQuery (JS) 函数

```
$(function () {
  $("a").click(function {
    window.onbeforeunload = null;
  });
}); 
```

在该函数中进行 AJAX 调用。当进行调用并且浏览器关闭时，服务器仍将处理它，只有没有客户端可以将其发送回。

所以要小心你放在那里的代码，因为你不能检查输出或要求用户验证。

更多信息：

[onbeforeunload 事件上的 jQuery.ajax 不起作用](https://stackoverflow.com/questions/5271547/jquery-ajax-on-onbeforeunload-event-not-working)

[http://eureka.ykyuen.info/2011/02/22/jquery-javascript-capture-the-browser-or-tab-closed-event/](http://eureka.ykyuen.info/2011/02/22/jquery-javascript-capture-the-browser-or-tab-closed-event/)

[http://zeeshanumardotnet.blogspot.co.at/2011/01/how-to-end-session-when-browser-is.html](http://zeeshanumardotnet.blogspot.co.at/2011/01/how-to-end-session-when-browser-is.html)

# command-line - 如何创建指向 PyPy 的符号链接

> ID：14697314
> 
> 赞同：0
> 
> 时间：2013-02-04T22:58:19.917
> 
> 标签：command-line, symlink, pypy

PyPy 文档提到创建一个符号链接以允许在全球范围内使用 pypy，但我似乎不知道该怎么做。

我目前有这个命令：`mklink \pypy C:\pypy`

但是，它不断出现错误提示`Access is denied.`。关于如何解决此问题并使其正常工作的任何想法？尽管它在 PyPy 文档中被提出，但没有提到如何实际做到这一点。

PyPy 本身包含在`C:\pypy`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:21:03.580

从文件路径来看，我实际上假设您正在处理`Windows`.

您实际阅读的建议（[此处](http://doc.pypy.org/en/latest/getting-started.html#installing-pypy)）适用于`Linux`. 这就是为什么你不能在`Windows`.

另请注意，这`\pypy`不是该程序的有效选项`windows` `mklink`。

# jquery - Jquery 日期选择器年份顺序

> ID：14697315
> 
> 赞同：1
> 
> 时间：2013-02-04T22:58:26.157
> 
> 标签：jquery, datepicker

我在这里有一个 Jquery 日期选择器的代码

```
// Datepicker from jQuery UI plugin
    $birth.datepicker({
    onSelect: function(dateText, inst) { 
        $(this).parent().find("label#error").html("");
        $gender.focus();
    },
        yearRange: '1950:2006',
        changeMonth: true,
    changeYear: true,           
    showOtherMonths: true,          
    selectOtherMonths: true,
    dateFormat: 'yy-mm-dd'
    });
}); 
```

我的年份下拉列表从 1950 年开始一直到 2006 年，我想将它们反转..

我试过`yearRange: '2006:1950'`但没有显示:(

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T05:59:34.373

提供的链接是一个很好的解决方案。这是另一种黑客但有效的方法： [http ://plnkr.co/edit/sSdUbqd1pWKyiBOZAMwD?p=preview](http://plnkr.co/edit/sSdUbqd1pWKyiBOZAMwD?p=preview)

```
$(document).ready(function() {

  var showPicker = false;

  $("#txtBirthday").datepicker({
    onSelect: function(dateText, inst) {
      $(this).parent().find("label#error").html("");
      $gender.focus();
    },
    yearRange: '1950:2006',
    changeMonth: true,
    changeYear: true,
    showOtherMonths: true,
    selectOtherMonths: true,
    dateFormat: 'yy-mm-dd', 
    onClose: function(dateText, inst) {
      showPicker = false;
    }
  });

  $(".ui-datepicker").on("mouseenter", function() {

    if (!showPicker) {
      showPicker = true;

      //Reverse the years
      var dropYear = $("select.ui-datepicker-year");

      dropYear.find('option').each(function() {
        dropYear.prepend(this);
      });

    }

  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T08:09:02.113

希望这个问题，我找到了一个更好的解决方案并看到了你的帖子。如果这仍然相关：

[jQuery datepicker 年份下拉菜单从 1900 年开始，我希望它从底部开始](https://stackoverflow.com/questions/42650410/jquery-datepicker-year-dropdown-starts-from-1900-and-i-want-it-to-start-from-the/42666011#42666011)

> 这就是我解决问题的方法。我认为这就是为什么 jQuery 没有修复这个“错误”的原因，因为有一种“方法”可以让年份从最后一个日期开始：
> 
> ```
> dateFormat: 'mm/dd/yy',
> changeMonth: true, 
> changeYear: true,  
> yearRange: "-70:", 
> maxDate: "-13Y" 
> ```
> 
> 与我在此处发布的原始代码相比，如果使用 `yearRange`固定年份`yearRange: "1900:-13"` ，最好从下往上使用：`"-70:"`. 并设置`maxDate`. 所以现在我从 2004 年而不是 1900 年开始得到我的年份选择框。
> 
> 希望这可以帮助其他人。
> 
> PS：所有其他解决方案都已经过测试。它们非常慢，而且有些效果不佳（尤其是旧的 - 例如设置当前年份而不是 2004 年）。

# knockout.js - 当 obserable 发生变化时，Knockouts ko.computed 变量不会更新

> ID：14697316
> 
> 赞同：2
> 
> 时间：2013-02-04T22:58:28.460
> 
> 标签：knockout.js

当可观察的 this.isFollowing 改变时，计算函数 this.followButtonText 怎么不更新，总是显示（Follow）？$(文档).ready(函数 () {

```
 function AppViewModel() {

            this.toggleIsFollowing = function () {
                this.isFollowing = !this.isFollowing;
                follow();
            };

            this.isFollowing = ko.observable(false);
            this.followButtonText = ko.computed(function () {
                return this.isFollowing ? "Unfollow" : "Follow";
            });
        }

        ko.applyBindings(new AppViewModel());

        }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:26:15.363

可观察对象实际上是一个函数。要读取当前值，您需要将其作为不带参数的函数调用，例如：`this.isFollowing()`。

要设置 observable 的值，您需要将新值作为第一个参数传递。所以，你的切换看起来像：`this.isFollowing(!this.isFollowing());`

在您的`followButtonText`计算中，您需要将其作为函数调用，例如：

`return this.isFollowing() ? "Unfollow" : "Follow";`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T00:42:36.757

更改此语句：return this.isFollowing ? “取消关注”：“关注”；

为此：返回 this.isFollowing() ？“取消关注”：“关注”；

括号将其称为获取最新值所需的函数

# javascript - 从 browser.messageManager.loadFrameScript 获取内容脚本以侦听发布消息事件

> ID：14697317
> 
> 赞同：0
> 
> 时间：2013-02-04T22:58:29.403
> 
> 标签：javascript, firefox-addon, xul

所以我有自己的 xul 界面，其中包含 xul 浏览器，它需要从我的网站加载网页。根据网页，我希望它调用 window.postMessage，我的 contentscript（由 loadFrameScript 加载）应该捕获它，然后通过 sendSyncMessage 与主脚本对话。

[https://developer.mozilla.org/en-US/docs/The_message_manager](https://developer.mozilla.org/en-US/docs/The_message_manager)中的代码可以完美地工作（底部的简单示例）从我的网页监听点击事件。但是，我无法将事件侦听类型从“单击”更改为“消息”。它只是默默地失败。

从以下：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/dev-guide/guides/content-scripts/communicating-with-other-scripts.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/dev-guide/guides/content-scripts/communicating-with-other-scripts.html)

我想也许我应该像这样收听来自网页的消息......

`document.defaultView.addEventListener('message', function(event) { sendSyncMessage(...);}, false);`

...但是当我尝试以这种方式进行设置时，我收到错误消息，指出该文档不存在。

同样，从 The_message_manager 文档中，它列出了内容脚本的可用全局变量，我尝试将“文档”替换为“内容”......但无济于事。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:22:49.333

所以我找到了一个解决我的问题的方法。

不遗余力地翻阅 Mozilla 的文档，我偶然发现了这一点：

[https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pa​​ges](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages)

它主要提出了在主网页和 chrome（不是我的用例）之间发送事件（注入元素）的相当过时的方法。但其中一条是纯金。

`"Note: If you're using HTML5's postMessage() to send a message from unprivileged code to privileged code, adding 'true' to the end of your event listener in your privileged chrome code will allow the message to be received.`

`1 document.addEventListener("message", function(e) { yourFunction(e); }, false, true);"`

现在这个解决方案似乎不适用于 window.postMessage() 事件，但该解决方案非常适用于 CustomEvents！...在将“true”作为神秘的第四个参数添加到 addEventListener() 之前也失败了。自定义事件完全符合我的需求，所以我认为这是一个解决方案。

因此，由于这个神秘的论点，我基本上失去了两天的生命，我将其归咎于 Javascript 框架的弱类型性质和糟糕的文档，因为 IDE 会提出这个论点并提供有关该方法使用的文档。

但是，感谢stackoverflow，您不必:-)

# ruby-on-rails - 将参数传递给 HAML 部分

> ID：14697323
> 
> 赞同：2
> 
> 时间：2013-02-04T22:58:54.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

使用 rails 3.2.11，无论最新版本的 HAML 是什么，我一直在尝试将块传递给 HAML 部分。我想我可以在 HAML 文件中使用一个变量，然后在渲染部分之前分配该变量，但这感觉真的很草率和僵化。

我注意到在 Rails 应用程序布局中，有一个`= yield`，这显然是我所有视图的呈现位置。有没有办法让我在我的 HAML 部分中干净地使用参数和块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:09:32.820

您可以将任何您想要的内容传递给部分。你可以使用这样的东西：

```
= render "people/person", :object => @manager, :locals => { :show_details => true } 
```

您还可以同时使用 yield 和 content_for 来处理块。如果您执行以下操作：

```
- content_for :profile_links do
  %li Hello #{@manager.name}
  %li= link_to "Settings", @manager.profile 
```

然后在您的帐户菜单中使用：

```
%ul#account_menu
  = yield :profile_links
  %li= link_to "Sign Out", sign_out_url 
```

# c - C 如何让 scanf 在空白/空格处停止？

> ID：14697324
> 
> 赞同：0
> 
> 时间：2013-02-04T22:58:55.603
> 
> 标签：c, scanf, space

当我的 scanf 找到一个空格/空白时，我需要它停止。

例如

如果我输入“E E”，我只需要 1 个“E”，所以它必须停在空格/空白处。

```
char end[] = "E";
char end1[] = "End";
char info[] = "";

while(run) {
 scanf("%s", &info);
 ...
 else if(strcmp(info, end) == 0 || strcmp(info, end1) == 0) {
    end_of_turn();
 }
 ...
} 
```

现在这里的问题是，如果我输入“E E”，它将运行“end_of_turn”两次。

有谁知道为什么会这样？

编辑：

好的，我不能打破 while 循环，因为那会停止程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:01:30.243

用来`break`跳出`while`循环？打电话后`end_of_turn()`

`goto`或者，如果您不想跳出循环，请使用语句。

您还可以从输入流中获取所有字符，然后使用以下代码丢弃它们：`while(getchar() != '\n') ;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:56:26.363

看起来可以使用`%[`格式说明符仅匹配某些字符。要排除空格，我想你会使用`%[^ ]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T23:15:04.580

循环遍历存储在`info`搜索空格字符中的字符串`' '`，如果找到，则将字符串的其余部分设置为`\0`

# api - 需要帮助将 Coldfusion 应用程序创建到 Google Group API

> ID：14697330
> 
> 赞同：4
> 
> 时间：2013-02-04T22:59:14.780
> 
> 标签：api, coldfusion, oauth-2.0, google-groups-api

首先，提前感谢任何阅读这篇文章的人。

我的学校（我是一名教师/技术协调员）正在使用 Google Apps for Education。我已使用 Provisioning API 与我们的 Microsoft Active Directory Server 通信，以将用户和组与 Google 同步。我有一个运行 ColdFusion 9 和 PHP 的网络服务器。我是一个公平的 ColdFusion 程序员的基础，我的 PHP 技能是新手级别。

我至少有 3028 个组我想更新`replyTo`字段说`REPLY_TO_LIST`（默认情况下，创建组时，用户可以选择）

理想情况下，我希望 ColdFusion 服务器自动（每晚）联系 Google，获取域中所有组的列表（用户有权创建组，因此该列表可能每天更改）并确保回复字段设置正确。

目前，我在使用 OAuth 2.0 时遇到问题。我已阅读文档并且对我需要做什么感到困惑。我一直在寻找整个互联网，并发现了很多我头脑中的材料。我得到的最接近的是[Ray Camden](http://www.raymondcamden.com/index.cfm/2011/12/6/Working-with-Google-and-OAuth2)的一篇很棒的帖子。但是，当我为 Google Groups 修改它时，我得到：

> **错误：invalid_request 缺少必需参数：response_type**

但是， response_type 肯定存在。

我很确定这是我的问题的开始，我发现了多个不同的参考，例如：

*   [https://www.googleapis.com/auth/apps.groups.settings](https://www.googleapis.com/auth/apps.groups.settings)
*   [https://www.googleapis.com/groups/v1/groups](https://www.googleapis.com/groups/v1/groups)

这是我目前在 GoogleGroupModifier.cfm 中的内容：

```
<cfset authurl = "https://accounts.google.com/o/oauth2/auth?" 
               & "client_id=#urlEncodedFormat(application.clientid)#" 
               & "&redirect_uri=#urlEncodedFormat(application.callback)#" 
               & "&scope=https://www.googleapis.com/auth/apps.groups.settings?response_type=code">

<cfoutput>
    /groups/v1/groups/
    authurl=#authurl#
    <p><a href="#authurl#">Login</a></p>
</cfoutput> 
```

和 Application.cfc：

```
<cfcomponent>
    <cfset This.name = "googlegroups">
    <cfset This.Sessionmanagement="True">

    <cffunction name="onApplicationStart" returntype="boolean" access="public">
        <cfset application.clientid = "88888.apps.googleusercontent.com">
        <cfset application.clientsecret="zzzzzz_">
        <cfset application.callback="http://mydomain.org/wwp/google/GoogleGroupModifier.cfm">
        <cfreturn true>
    </cffunction>
</cfcomponent> 
```

任何人都可以提供任何建议吗？我知道有关于 GITHUB 的信息，但是我在那里尝试过的东西似乎也无法开始工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T23:49:57.987

我在 Github 上有一个 OAuth2 cfc，它将为您构建所需的身份验证和端点 URL：[https ://github.com/coldfumonkeh/oauth2](https://github.com/coldfumonkeh/oauth2)

# java - 可以从 SortedMap 中获取有序集合吗？

> ID：14697331
> 
> 赞同：2
> 
> 时间：2013-02-04T22:59:15.143
> 
> 标签：java, collections, map, iterator

我有一个`SortedMap`(a `TreeMap`，特别是)，我从中提取值。稍后，我需要获取第一个和最后一个值，因为它们在`SortedMap`.

`SortedMap.values()`返回 a `Collection`，其`Iterator`保留顺序。因此，获得第一个值就像`collection.iterator().next()`. 然而，获取最后一个值并不是那么简单——一直迭代到最后一个值是非常低效的。

有没有解决的办法？现在，我一直迭代到最后并存储该值，所以我只需要做一次......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:01:15.030

如果您使用的是 Java 6 或更高版本，则可以使用`NavigableMap`代替`SortedMap`, 并使用其`lastEntry`方法。

否则，您可以使用`SortedMap.get(SortedMap.lastKey())`.

# mongodb - MongoDB查询具有唯一字段的所有文档

> ID：14697332
> 
> 赞同：5
> 
> 时间：2013-02-04T22:59:16.700
> 
> 标签：mongodb

我看到很多对“我如何获得一个字段中的所有唯一值？”这个问题的回答。这建议了该`.distinct()`方法。但这会返回这些值的简单数组。如何检索具有字段唯一值的所有文档？

```
[{age: 21, name: 'bob'}, {age: 21, name: 'sally'}, {age: 30, name: 'Jim'}] 
Query for unique age -->
[{age: 21, name: 'sally'}, {age: 30, name: 'Jim'}]
or
[{age: 21, name: 'bob'}, {age: 30, name: 'Jim'}] 
```

事后过滤查询并不是一个理想的解决方案，因为我仍然想像往常一样选择、$limit 和 $skip。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:00:41.300

```
> db.foo.insert([{age: 21, name: 'bob'}, {age: 21, name: 'sally'}, {age: 30, name: 'Jim'}])
> db.foo.count()
3
> db.foo.aggregate({ $group: { _id: '$age', name: { $max: '$name' } } }).result
[
    {
        "_id" : 30,
        "name" : "Jim"
    },
    {
        "_id" : 21,
        "name" : "sally"
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-14T05:28:34.930

嗨，我是新手 mongo 开发人员，我一直在努力解决同样的问题，我终于能够找到解决方案。我正在使用具有以下步骤的聚合管道：

1.  组：与`_id`作为`age`
2.  查找：从步骤 1 开始使用。在具有本地字段和外部字段`_id`的同一集合中，将查找保存到新列表。`_id``age``ob`
3.  替换根：即。将到目前为止的每个结果的根替换为`ob`步骤 2 中列表中的第一个对象。

那里可能有更好的解决方案。如果有人发现它，请告诉我们。希望解决方案有所帮助。

D B：

```
[
  {
    age: 21,
    name: "bob"
  },
  {
    age: 21,
    name: "sally"
  },
  {
    age: 30,
    name: "Jim"
  }
] 
```

聚合：

```
db.collection.aggregate([
  {
    $group: {
      _id: "$age"
    }
  },
  {
    $lookup: {
      from: "collection",
      localField: "_id",
      foreignField: "age",
      as: "ob"
    }
  },
  {
    $replaceRoot: {
      newRoot: {
        $first: "$ob"
      }
    }
  }
]) 
```

输出：

```
[
  {
    "_id": ObjectId("5a934e000102030405000002"),
    "age": 30,
    "name": "Jim"
  },
  {
    "_id": ObjectId("5a934e000102030405000000"),
    "age": 21,
    "name": "bob"
  }
] 
```

mongoplayground：

[游乐场解决方案](https://mongoplayground.net/p/lFD07jQRYMC)

# wordpress - 链接到显示所有帖子的存档页面

> ID：14697333
> 
> 赞同：2
> 
> 时间：2013-02-04T22:59:23.390
> 
> 标签：wordpress, archive

我在使用 Wordpress 档案时遇到了一些问题，或者更准确地说，是在尝试创建自定义档案。

我正在为客户制作一个自定义主题，他们指定他们希望每个类别中的三个项目（在本例中为新闻（默认帖子类型）和评论（自定义帖子类型））出现在主页上。

现在这是简单的部分（主页上有两个循环，wp_query 每页 3 个帖子），但是他们希望用户能够单击一个按钮，以便查看该特定类型的所有帖子（而不是通过类别）。

![档案按钮](../Images/7d008bbb80e437ee23bcad451f57344c.png)

但是我不知道我什至会如何处理这个问题。

我知道我可以制作自定义页面模板并将其应用于页面，但实际上我想制作一些包装在主题中并且“直接开箱即用”的东西，所以客户不不必自己制作页面才能使其正常工作。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:47:10.313

有几件事要做：

1.  当您调用 register_post_type($name,$args) 时，将 'rewrite' => true 和 'has_archive' => true 添加到 $args 数组。（注意：不要将它添加到标签部分，这是人们经常犯的错误！）

2.  然后您创建一个名为archive-custom_post_type.php 的页面并将其放在您的主题文件夹中。向其中添加一些 php/html（包含 wp 循环等）并将“custom_post_type”替换为您的类型，显然 :-) 如果您想要所有内容类型的相同存档页面，您也可以使用 archive.php 默认模板文件。在这里您可以找到 wordpress 如何搜索可用模板：[http ://codex.wordpress.org/images/1/18/Template_Hierarchy.png](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

然后页面应该可以使用`http://yoursite/custom_post_type/`

如果没有，您应该转到 wp-settings 并再次保存您的永久链接结构。`http://yoursite//wp-admin/options-permalink.php -> save`.

# c# - 将复杂查询转换为不存在的 linq

> ID：14697334
> 
> 赞同：0
> 
> 时间：2013-02-04T22:59:24.877
> 
> 标签：c#, linq, entity-framework, linq-to-sql

大家好，任何人都可以帮我将此sql转换为linq 我想我最大的问题来自sql to linq中的不存在语句

```
select count(distinct(GroupID)) from ParticipantModulequestionnaire pmq
inner join ParticipantGroupMember pgm on pmq.participantid = pgm.ParticipantID 
where pmq.moduleid = 46 and  not exists
(select unf.participantid from ParticipantModuleQuestionnaire unf where unf.ParticipantID = pmq.ParticipantID
and unf.ModuleID = 46
and isnull(unf.completedflag,0) <> 0) 
```

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:05:25.097

您可以只做一个子查询并检查它`Any()`是否为假。我认为应该这样做（需要进行一些小的调整以使其适合您的上下文）。

```
var query = 
        from p in ParticipantModulequestionnaire
        join g in ParticipantGroupMember on p.ParticipantId = g.PariticipamtnId
        where p.ModuleId == 46 
         && !ParticipantModuleQuestionnaire.Any(a => 
                        a.ParticipantId = p.ParticipantId
                        && a.ModuleId == 46
                        && (a.CompletedFlag ?? 0) != 0)
        select [p or g, I don't know which].GroupId;
var result = query.Distinct().Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:07:15.843

“不存在”表达式后跟“pmq”上的谓词。请参阅`Enumerable.Any`和`Enumerable.All`扩展方法 - 您可以使用任何一种。

# php - MS SQL PDO 不会从表中检索数据

> ID：14697337
> 
> 赞同：0
> 
> 时间：2013-02-04T22:59:34.907
> 
> 标签：php, sql-server-2008, pdo

我正在尝试为我的 Apache 服务器启动并运行[PDO](http://php.net/manual/en/ref.pdo-dblib.php)，以便在它与我的 MS SQL 数据库交互时使用准备好的语句。似乎该库已安装并且连接正常，但我无法让它从表中返回任何信息

```
 $dbh = new PDO ("dblib:host=$hostname;dbname=$database","$username","$password");
  } catch (PDOException $e) {
    echo "Failed to get DB handle: " . $e->getMessage() . "\n";
    exit;
  }
  $stmt = $dbh->prepare("SELECT * FROM asdf");
  $stmt->execute();
  $result = $stmt->fetchAll(PDO::FETCH_COLUMN, 0);
  print_r($result);  //prints nothing
  var_dump($stmt->fetchAll(PDO::FETCH_COLUMN|PDO::FETCH_GROUP)); //prints nothing 
```

返回

```
**array(0) { }** 
```

然而这

```
 $dbh = new PDO("dblib:host=$hostname;dbname=$database", "$username", "$password");
} catch (PDOException $e) {
    echo "Failed to get DB handle: ".$e - > getMessage()."\n";
}
$stmt = $dbh - > prepare("SELECT @@VERSION");
$stmt - > execute();
while ($row = $stmt - > fetch()) {
    print_r($row);
}
unset($dbh);
unset($stmt); 
```

打印出计算机详细信息。

**`Array ( [] => Microsoft SQL Server 2008 R2 (RTM) - 10.50.1617.0 (X64) Apr 22 2011 19:23:43 Copyright (c) Microsoft Corporation Standard Edition (64-bit) on Windows NT 6.1 (Build 7601: Service Pack 1) (Hypervisor) [0] => Microsoft SQL Server 2008 R2 (RTM) - 10.50.1617.0 (X64) Apr 22 2011 19:23:43 Copyright (c) Microsoft Corporation Standard Edition (64-bit) on Windows NT 6.1 (Build 7601: Service Pack 1) (Hypervisor) )`**

所以我认为 PDO 在某种程度上正在发挥作用。我只是有一些不好的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:41:53.417

*（来自评论中的故障排除......）*

尝试检查返回值`$stmt->execute();`以确认查询成功。

成功时的返回值为`$stmt->execute();`真，所以我会这样做：

```
$success = $stmt->execute(); 

if(!$success) {
   print_r($stmt->errorInfo()); 
   die("DB Error");
} 
```

# php - 无法调用 CakePHP 安全组件

> ID：14697340
> 
> 赞同：0
> 
> 时间：2013-02-04T22:59:54.307
> 
> 标签：php, security, cakephp, controllers

当我尝试在任何应用程序中调用“安全”组件时，我网站的某些页面会崩溃。例如在 AppController 文件中，如果我将组件定义从

```
var $components = array('Auth','Session','Email'); 
```

到

```
var $components = array('Auth','Session','Email','Security'); 
```

我网站上依赖来自其他页面的 POST 数据的页面崩溃。我得到的只是一个空白屏幕。在 \cake\libs\controller\components 目录中定义并存储了“security.php”。

关于导致此问题或如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:08:00.193

这就是 SecurityComponent 应该做的。

它通过向所有表单添加“令牌”来保护您的应用程序，以检查表单是否“有效”并且未被篡改（例如，有人使用 javascript 在表单中添加了额外的字段或值）。

它还检查发布的表单是否来自控制器和/或允许这样做的操作（allowedControllers）

如果不满足要求，则会调用“blackHoleAction”来停止进一步的操作。

根据您对“var $components”的使用，而不是“public $components”，它认为您正在运行 Cakephp 1.3，请参阅此处的 SecurityComponent 文档：http: [//book.cakephp.org/1.3/en/The-手册/核心组件/安全组件.html](http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Security-Component.html)

阅读有关 allowedControllers 和 allowedActions 的部分

由于调试被禁用，您的脚本中的某处也可能出现不可见的错误。要启用调试，请在 core.php 配置文件中将调试级别更改为 1 或 2；

app/Config/core.php 将调试级别设置为 2，使用这一行：

```
Configure::write('debug', 2); 
```

# sql - 从具有 1 个不同列和 Where 条件的表中选择所有列

> ID：14697348
> 
> 赞同：1
> 
> 时间：2013-02-04T23:01:11.917
> 
> 标签：sql

这已被多次询问，但我没有找到适合我的解决方案。我有一个类似于下面的视图。我需要运行一个返回所有列的查询，但对于任何唯一的 GLASS_ID 只返回一次。我还需要一个 where 子句**WHERE GLASS_ID LIKE '%' + @PartialGlassId + '%'**

```
VEH_ID GLASS_ID OPENING_SEQ PART_NUM PREFIX_CD ANT_FLAG BLK_SIZE1
26975 DB00201 1 201 DB Y 14.00
26864 DB00375 1 375 DB N 16.00
26865 DB00375 1 375 DB N 16.00
26866 DB00375 1 375 DB N 16.00
38929 DB00408 1 408 DB N 12.00
38930 DB00408 1 408 DB N 12.00
38931 DB00408 1 408 DB N 12.00
38932 DB00408 1 408 DB N 12.00
38933 DB00408 1 408 DB N 12.00
38990 DB00408 1 408 DB N 12.00
38991 DW01015 1 1015 DB N 12.00

```

结果应该是

```
VEH_ID NAGS_GLASS_ID OPENING_SEQ PART_NUM PREFIX_CD ANT_FLAG BLK_SIZE1
26975 DB00201 1 201 DB Y 14.00
26864 DB00375 1 375 DB N 16.00
38929 DB00408 1 408 DB N 12.00

```

对于 WHERE GLASS_ID LIKE '%DB00%'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:05:34.547

```
SELECT b.* 
FROM yourTable b
INNER JOIN
  (SELECT MIN(VEH_ID) as minV,  GLASS_ID as g
   FROM yourTable
   GROUP BY GLASS_ID) as d
  ON b.Glass_ID = d.g and b.VEH_ID = d.minV
WHERE b.GLASS_ID LIKE  '%DB00%' 
```

注意：在这种情况下，WHERE 子句也可以在 INNER JOIN 的子查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:08:18.087

```
Select distinct max(veh_ID), glass_ID, Opening_SEQ, part_Num, PRefix_CD, Ant_Flag, BLK_Size1
FROM yourTable
WHERE GLASS_ID LIKE '%' + @PartialGlassId + '%'
Group by glass_ID, Opening_SEQ, part_Num, PRefix_CD, Ant_Flag, BLK_Size1 
```

其他选项

```
Select distinct group_Concat(veh_ID, ', '), glass_ID, Opening_SEQ, part_Num, PRefix_CD, Ant_Flag, BLK_Size1
FROM yourTable
WHERE GLASS_ID LIKE '%' + @PartialGlassId + '%'
Group by glass_ID, Opening_SEQ, part_Num, PRefix_CD, Ant_Flag, BLK_Size1 
```

# javascript - 如何使用小写键将 JSON 解析为对象

> ID：14697352
> 
> 赞同：9
> 
> 时间：2013-02-04T23:01:29.657
> 
> 标签：javascript, jquery, json

我有一些 JSON 数据，但所有的键都是大写的。如何解析它们并将键转换为更低？我正在使用 jQuery。

例如：

JSON数据：

```
{"ID":1234, "CONTENT":"HELLO"} 
```

期望的输出：

```
{id:1234, content:"HELLO"} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T23:14:04.513

这个怎么样：

```
json.replace(/"([^"]+)":/g,function($0,$1){return ('"'+$1.toLowerCase()+'":');})); 
```

正则表达式捕获键名 $1 并将其转换为小写。

现场演示：http: [//jsfiddle.net/bHz7x/1/](http://jsfiddle.net/bHz7x/1/)

[编辑] 为了解决@FabrícioMatté 的评论，另一个仅匹配单词字符的演示：http: [//jsfiddle.net/bHz7x/4/](http://jsfiddle.net/bHz7x/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T23:07:06.487

迭代属性并创建小写属性，同时删除旧的大写属性：

```
var str = '{"ID":1234, "CONTENT":"HELLO"}';

var obj = $.parseJSON(str);
$.each(obj, function(i, v) {
    obj[i.toLowerCase()] = v;
    delete obj[i];
});

console.log(obj);
//{id: 1234, content: "HELLO"} 
```

[**小提琴**](http://jsfiddle.net/QkaCJ/)

或者您可以从旧的属性构建一个新对象：

```
var obj = $.parseJSON(str),
    lowerCased = {};
$.each(obj, function(i, v) {
    lowerCased[i.toLowerCase()] = v;
}); 
```

[**小提琴**](http://jsfiddle.net/QkaCJ/3/)

### *参考：*

*   [`jQuery.each`](http://api.jquery.com/jQuery.each/)
*   [`String.toLowerCase`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:21:50.937

那就是功能：

```
function JSON_Lower_keys(J) {
   var ret={};
   $.map(JSON.parse(J),function(value,key){
             ret[key.toLowerCase()]=value;
   })
   return ret;
} 
```

那就是调用：

```
console.log(JSON_Lower_keys('{"ID":1234, "CONTENT":"HELLO"}')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-25T18:18:32.367

您可以坚持使用 js 并使用[Objeck.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

```
var oldObj = { "ID":123, "CONTENT":"HI" }
var keysUpper = Object.keys(oldObj)
var newObj = {}
for(var i in keysUpper){
   newObj[keysUpper[i].toLowerCase()] = oldObj[keysUpper[i]]
}
console.log(JSON.stringify(newObj)) 
```

复制并粘贴到您的浏览器控制台 (F12) >> 输出：{"id":123,"content":"HI"}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-11T11:35:16.960

我不擅长解释一个想法但是以下链接[https://github.com/dchester/jsonpath/](https://github.com/dchester/jsonpath/)的库“jsonpath”允许操作和过滤使用正则表达式或 JSONPath 转换为 json 的任何 json 数据或数组地址。

**示例1：** 显示一个包含在json变量中的类别使用值的地址获取：

```
jsonpath.query(json, '$["Bienestar"][2]'); 
```

> 这就像我使用 json["Bienestar"][2]; 没有图书馆。

**示例 2：** 使用 jsonpath 正则表达式显示所有类别：

```
jsonpath.nodes(json, '$..[?(@)]'); 
```

**示例3：** 将每个类别内的所有现有值转换为json变量的大写：

```
jsonpath.apply(json, '$..curso', function(value){return value.toUpperCase()}); 
```

> 对于小写的任何文本，将“toUpperCase()”更改为“toLowerCase()”

**示例 4：** 上面解释的示例，但使用 jquery ajax

```
/* library: https://github.com/dchester/jsonpath */
(function($){
  var json;
  var arg='balnero';
  var url='https://cedfer2.github.io/ex/c.json';
  $.ajax({
    type: 'GET',
    url: url,
    dataType: 'text',
    error: function() {
      console.log('{error!}');
    },
    beforeSend: function() {
      console.log('{cargando...(show spinner)}');
    },
    complete: function() {
      console.log('{peticionCompleta...(hide spinner)}');
    },
    success: function (data, textStatus, jqXHR) {
      console.log('success:');
      json=$.parseJSON(data);
      console.log('-------[success data: string find in json with valor in varable arg]-------');
      console.log('arg valor:' + arg);
      console.log(
        jsonpath.query(json, '$..[?(@.curso.toUpperCase().indexOf("'+arg.toUpperCase()+'")>=0)]')
        );
      console.log('-------[success data: convert string find in json uppercase with valor in varable arg]-------');
      console.log(jsonpath.apply(json, '$..[?(@.toUpperCase().indexOf("'+arg.toUpperCase()+'")>=0)]', function(value) { return value.toUpperCase() }));
      console.log('--[show new structure json in the category "Bienestar" item 2: without library js]--');
      console.log(json["Bienestar"][2]);
    }
  });
})(jQuery);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cedfer2.github.io/ex/jsonpath.min.js"></script>
```

# php - 循环通过 MySQL 结果循环

> ID：14697360
> 
> 赞同：0
> 
> 时间：2013-02-04T23:01:47.470
> 
> 标签：php, mysql

我正在尝试使用 PHP 显示按订单号分组的单个客户订单的详细信息。我可以通过运行单独的查询来完成这个基本操作，但这似乎效率不高。有人可以帮助我以最有效的方式做到这一点吗？请看下面的例子：

我有一个具有以下结构的“订单” MySQL 表：

```
|ordernumber|customer|quantity|sku|product |orderdate
-----------------------------------------------------
|1          |bob     |2       |aaa|producta|2012-08-30
|1          |bob     |1       |bbb|productb|2012-08-30
|1          |bob     |4       |ccc|productc|2012-08-30
|2          |jim     |10      |aaa|producta|2012-08-30
|2          |jim     |1       |ccc|productc|2012-08-30
|3          |bob     |1       |bbb|productb|2012-12-15
|3          |bob     |4       |ccc|productc|2012-12-15 
```

我想以这种格式输出 Bob 的订单：

```
Customer: Bob
Order ID: 1
Order Date: 2012-08-30
Details:    *Qty*     *Sku*     *Product*
              2        aaa       producta
              1        bbb       productb
              4        ccc       productc
____________________________________________________
Customer: Bob
Order ID: 3
Order Date: 2012-12-15
Details:    *Qty*     *Sku*     *Product*
              1        bbb       productb
              4        ccc       productc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:10:00.513

我会运行一个查询 - 选择所有客户是 bob 并按订单号订购。

然后我会简单地遍历结果并打印 skus。

每当我在迭代中看到新的订单号时，我都会打印格式以开始新订单（并回显其所有元数据，如日期、订单号等）

这是伪代码：

```
rows = run_sql(select * where customer = bob order by ordernumber asc)

curr_order_id = 0

foreach (row in rows)
{
  if (row[order_id] != curr_order_id)
  {
    curr_order_id = row[order_id]
    print(-----------------------)
    print(customer : row[customer])
    print(order : row[order_id])
    print(order date: row[order_date])
    print(details: *qty* *sku* *product*)
  }
  print(     row[qty] row[sku] row[product])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:12:05.803

Your table needs something whats called **normalization**. For example your table is redundant such that you are giving out information about **bob 5** times and out of which **2** times you are saying its **"sku"** is **ccc** and **2** times saying its **bbb**. You need to split the tables and normalize it for better performance. Read up on first **3 normal forms** believe me it will help you achieve your desired result and will open up flexibility to more complex queries.

# java - 按顺序收集和同步-Java

> ID：14697362
> 
> 赞同：0
> 
> 时间：2013-02-04T23:01:50.413
> 
> 标签：java, collections, synchronization

我只想使用一个集合，该集合按照我过去添加的顺序为我提供项目，并且也是同步的。当然我想动态添加-删除项目。我对 Java 拥有的许多集合感到非常困惑。如果有人知道答案，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:03:22.180

嗯，[`Vector`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)有你要求的两个属性......但老实说，我发现正在同步的集合*实际上没有*那么有用。我发现仅使*单个*操作同步几乎没有用 - 相反，您希望同步整个操作集，例如迭代整个集合。

但是，如果出于某种原因，您真的非常想要一个集合，其中每个操作都单独同步，`Vector`那么就可以了。

或者您可以使用[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)并使用[`Collections.synchronizedList`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:21:46.077

ConcurrentLinkedDeque 呢？[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)

它是完全同步的，并提供队列所需的 FIFO 顺序。

# sql - 范围与 Rails 中的两个关联

> ID：14697363
> 
> 赞同：1
> 
> 时间：2013-02-04T23:01:59.550
> 
> 标签：sql, ruby-on-rails, scope, associations, rails-activerecord

我在 Rails 中有以下范围。

```
scope :with_active_services, Contact.joins(:i_services, :c_services).merge(IService.enabled).merge(CService.enabled) 
```

我想要实现的是选择一个启用了 i_services 或 c_services 的联系人。联系人不必两者兼有。

我遇到了一些我无法解决的问题。

目前范围的方式意味着联系人需要同时启用 i_service 和 c_service 才能返回。

当我使用生成的 SQL 并将 WHERE 条件中的 AND 更改为 OR 时，我遇到了联系人仍然需要返回 c_service 和 i_service 的问题。

如何修改它以满足我的要求？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:14:15.180

你可以用一些花哨的 SQL 来做到这一点。像这样的东西：

```
scope :with_active_services ->() {
  joins("LEFT JOIN i_services ON contact.id = i_services.contact_id AND i_services.enabled")
  .joins("LEFT JOIN c_services ON contact.id = c_services.contact_id AND c_services.enabled")
  .group(:id)
  .where("(count(i_services.id) + count(c_services.id)) > 0")
} 
```

这将排除未加入任何已启用服务的任何联系人。

# javascript - 如何使用 Popcorn.js 停止/暂停视频缓冲？

> ID：14697364
> 
> 赞同：1
> 
> 时间：2013-02-04T23:02:11.057
> 
> 标签：javascript, video, streaming

基本上我想在触发事件时暂停或停止视频的缓冲。例如：单击视频时停止/恢复缓冲。

我知道有一个用于缓冲视频的[预加载](http://popcornjs.org/popcorn-docs/media-methods/#preload)功能，所以我正在寻找完全相反的东西。

# jquery - 两个 KendoUI 窗口父和子在当前窗口弹出的按键上停止传播？

> ID：14697369
> 
> 赞同：0
> 
> 时间：2013-02-04T23:02:36.387
> 
> 标签：jquery, kendo-ui, jquery-events

我有两个 popUpEdit 窗口附加到两个网格，一个父级和一个子级。我想添加一个`keyPress` `Enter`提交或单击更新按钮。我现在遇到的问题是，如果我在子弹出窗口打开时按 Enter，它会向下传播到父容器。到目前为止，这是我的代码。

`gridSumbitEnterAutoFocus`在每个网格编辑函数中调用，所以我认为`e.container`应该是唯一的，并且`keyPress`将附加到每个特定的窗口。我也尝试过`stopPropagation`，但我也无法让它工作。任何帮助都将受到赞赏！

调试后确定一些新信息。我禁用了所有`keypress`事件，但子弹出窗口仍然响应`Enter` `Keypress`. 我不确定它到底在做什么。根据萤火虫控制台，它没有调用`saveChanges`或提交，但子窗口和父窗口都关闭，当子弹出窗口有焦点时，我按回车键后返回主网格。我可以在父弹出窗口上按 Enter 键，但没有按预期发生。

```
function gridSumbitEnterAutoFocus(e) {

       e.container.keypress(function(event) {
        event.bubbles = false;
        event.stopPropagation(); debugger;
        //if the key press is ESC or Enter
        if (event.keyCode === 27) {//ESC
            e.sender.cancelChanges();
        } else if (event.keyCode === 13) {//ENTER
            event.bubbles = false;
            event.stopPropagation();
            // e.container.find('.k-grid-update').focus().click();
             e.sender.saveChanges();
        }
    });
    e.container.data('kendoWindow').bind('activate', function(e) {
        $('[autofocus]').focus()
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:53:36.037

好的，想通了。当表单标签在页面上时，回车键响应浏览器的默认提交操作。我不需要表单标签，所以我删除了它们。我想有一种方法可以防止提交的默认操作，但删除表单标签效果很好。现在我的按键事件正在使用正确的 popUpEdit 窗口。谢谢

# javascript - 如何从 JSON 字典中按键检索随机 JSON 对象？

> ID：14697371
> 
> 赞同：6
> 
> 时间：2013-02-04T23:02:42.200
> 
> 标签：javascript, jquery, json, random, iterator

我有一个 JSON 对象，它由一长串其他 JSON 对象组成，这些对象彼此具有一些共同的属性，例如：

```
var myData = { 
    "0291" : { "Firstname" : "Jeremy", "Surname" : "Dyson" },
    "0398" : { "Firstnname" : "Billy", "Surname" : "Bunter" },
    "6714" : { "Firstnname" : "Harry", "Surname" : "Peterson" },
    "9080" : { "Firstnname" : "Barry", "secondname": "Joe", "Surname" : "Mainwaring"}
    ...
    ...
} 
```

我已经构建了一个 html 模板。使用 JS，我想以**随机顺序**在 data{} 中的对象中挑选或迭代（随机挑选+循环） ，这样我就可以为每个访问者动态填充 HTML。随机部分很重要，因此每个访问者都可能获得不同的数据。

纯 JavaScript 或 jQuery 解决方案将在部署它的上下文中工作。

* * *

**编辑：**我实施的解决方案如下。

**1.收集所有钥匙：**

```
var keyArray = Object.keys(myData); 
```

**2.[随机播放功能](https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array-in-javascript/6274381#6274381)：**

```
function shuffle(o){ //v1.0
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};
keyArray = shuffle(keyArray); // shuffle it! 
```

**3.循环迭代：**

```
for (var i = 0; i < keyArray.length; ++i) {
    var current = data[keyArray[i]];
    ... // what you want to do each time.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:25:14.273

首先，将`data`对象转换为数组（第一级的键会丢失），如下所示：[https ://stackoverflow.com/a/11474071/664108](https://stackoverflow.com/a/11474071/664108)

```
var dataArray = $.map(data, function (value, key) { return value; }); 
```

然后随机播放数组（请参阅[如何随机化（随机播放）JavaScript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)）

或者，您可以只是随机播放键，然后对原始对象进行操作。这样你也仍然有钥匙：

```
var keyArray = $.map(data, function (value, key) { return key; });

shuffle(keyArray); // example (shuffle function has to be implemented, see above)

for (var i = 0; i < keyArray.length; ++i) {
    var current = data[keyArray[i]];
    // do stuff with current dataset
} 
```

**从评论中补充**

键数组也可以通过以下方式创建：

```
var keyArray = Object.keys(data); 
```

但请注意，这仅适用于现代浏览器，如果您想在 IE 8 之前的版本中支持 Internet Explorer，则不应使用它（请参阅：http: [//msdn.microsoft.com/en-us/library/ie/ff688127 (v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/ff688127(v=vs.94).aspx) )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T23:14:14.003

您是否考虑过已经随机生成 JSON 或对其进行改组？[Javascript 中的随机播放](https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array-in-javascript)

如果您对数组进行洗牌，则可以应用 foreach 并以随机顺序获取项目。:)

注意：仅随机播放 ID 的副本可能会更快。

免责声明！我假设对于您的情况，您只需要[Pseudorandomness](http://en.wikipedia.org/wiki/Pseudorandomness)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T10:55:34.033

使用 Object.keys 函数

```
var obj = { 0: 'a', 1: 'b', 2: 'c' };
console.log(Object.keys(obj)); // console: ['0', '1', '2'] 
```

更多：[https ://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

# linear-algebra - 在 Eigen 中分配稀疏矩阵

> ID：14697375
> 
> 赞同：2
> 
> 时间：2013-02-04T23:02:53.530
> 
> 标签：linear-algebra, eigen

我通读了这个关于分配稀疏矩阵的[页面。](http://eigen.tuxfamily.org/dox-devel/group__TutorialSparse.html)不幸的是，我不明白。谁能帮我举个例子？例如，我应该如何在 Eigen 中分配以下 10 x 8 稀疏矩阵？

A(1,2) = 3; A(1,4) = 10；A(2,1) = 9; A(2,8) = 9; A(4,7) = 11；A(5,3) = -23；A(7,6) = 21；A(9,3) = 45；A(10,7) = 76;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:25:18.163

首先，对于小于约 500x(00 的矩阵，使用稀疏表示没有明显优势。因此，对于 10x8，您实际上应该简单地使用密集的 MatrixXf。尽管如此，要填充稀疏矩阵，推荐的方法是填充中间三元组的 std::vector 像这样：

```
typedef Eigen::Triplet<double> T;
std::vector<T> tripletList;
tripletList.reserve(9);
tripletList.push_back(T(1,2,3));
tripletList.push_back(T(1,4,10));
// ...
SparseMatrix<double> mat(10,8);
mat.setFromTriplets(tripletList.begin(), tripletList.end()); 
```

# sql-server - 在 SQL 批处理中查看已声明变量的 SQL Server 列表

> ID：14697381
> 
> 赞同：1
> 
> 时间：2013-02-04T23:03:13.847
> 
> 标签：sql-server, variables

有谁知道是否有办法查看已在 SQL 批处理中声明的变量列表？它会是这样的：

```
declare @Variable1 datetime2

select * from [List Of Declared Variables Table] 
```

我意识到这将是我只能在当前 SQL 批处理中访问的东西。我只是想知道这是否可能。

# c - 是否可以使用 fseek 偏移选项卡？

> ID：14697384
> 
> 赞同：0
> 
> 时间：2013-02-04T23:03:20.947
> 
> 标签：c, io, fseek

我正在尝试解析存档文件的标题，我需要跳过标签。我一直在尝试`fseek()`这样做，但我无法确定它是否可能。

这是一个示例，尽管我确定语法不正确：

`fseek(stream, (long)"\t", SEEK_CUR);`

我需要使用一种方法来移动文件指针，因为我需要跳过文件并将文件名从每个标题中拉出（制作存档内容的表格。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:06:44.257

不 - 因为`fseek`您指定要移动的*距离*，而不是要搜索的东西。

要跳过制表符，您通常会读取一个字符，如果它是一个制表符，则忽略它并读取另一个字符。

# node.js - node.js TypeError 的 MQTT 客户端

> ID：14697399
> 
> 赞同：0
> 
> 时间：2013-02-04T23:04:25.753
> 
> 标签：node.js, mqtt

我尝试理解和实现 node.js 的 MQTT-Client，可以在以下位置找到：http: [//jahbromo.blogspot.de/2011/12/client-mqttt-javascript.html](http://jahbromo.blogspot.de/2011/12/client-mqttt-javascript.html)

我不断得到：
var client = new mqtt.MQTTClient(1883,'127.0.0.1','mirror');
^
类型错误：未定义不是函数

我对 node.js 比较陌生，我不明白为什么 node.js 会给出这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:45:47.240

所以首先值得知道的是，该博客在这里窃取了原作者的内容：http: [//ceit.uq.edu.au/content/simple-mqtt-cient-nodejs](http://ceit.uq.edu.au/content/simple-mqtt-cient-nodejs)

Yilun 的代码在 Github 上，但几年没有更新。

[https://github.com/yilun/node_mqtt_client](https://github.com/yilun/node_mqtt_client)

我建议改为查看 mqttjs 节点模块。

[https://github.com/adamvr/MQTT.js](https://github.com/adamvr/MQTT.js)

那有一些很好的例子可以让你很容易地创建一个客户端。

# shell - 在 shell 脚本中扩展 ipv6 地址

> ID：14697403
> 
> 赞同：1
> 
> 时间：2013-02-04T23:04:33.143
> 
> 标签：shell, ipv6

我想根据给定的 IPv6 地址更新 djbdns (dbndns) 配置文件，例如`2a01:488:66:1000:523:f116:0:1`或`::1`.

dbndns 需要扩展的 IPv6 地址，`2a010488006610000523f11600000001`例如`2a01:488:66:1000:523:f116:0:1`.

扩展这种 IPv6 地址的最简单方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T01:30:33.697

使用`sipcalc`可能会做到这一点。它提供了比您需要的更多的信息，但有点`grep`并且`cut`可以解决这个问题:-)

```
$ EXPANDED=`sipcalc 2001::1 | fgrep Expanded | cut -d '-' -f 2`
$ echo $EXPAND
2001:0000:0000:0000:0000:0000:0000:0001 
```

作为参考，这是完整的输出`sipcalc`：

```
$ sipcalc 2001::1
-[ipv6 : 2001::1] - 0

[IPV6 INFO]
Expanded Address        - 2001:0000:0000:0000:0000:0000:0000:0001
Compressed address      - 2001::1
Subnet prefix (masked)  - 2001:0:0:0:0:0:0:1/128
Address ID (masked)     - 0:0:0:0:0:0:0:0/128
Prefix address          - ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
Prefix length           - 128
Address type            - Aggregatable Global Unicast Addresses
Network range           - 2001:0000:0000:0000:0000:0000:0000:0001 -
                          2001:0000:0000:0000:0000:0000:0000:0001 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-07T07:21:42.470

我最近想要一个无依赖的解决方案，它可以跨 shell 移植并在诸如 openwrt 之类的平台上工作。我想出了以下片段：

```
# helper to convert hex to dec (portable version)
hex2dec(){
    [ "$1" != "" ] && printf "%d" "$(( 0x$1 ))"
}

# expand an ipv6 address
expand_ipv6() {
    ip=$1

    # prepend 0 if we start with :
    echo $ip | grep -qs "^:" && ip="0${ip}"

    # expand ::
    if echo $ip | grep -qs "::"; then
        colons=$(echo $ip | sed 's/[^:]//g')
        missing=$(echo ":::::::::" | sed "s/$colons//")
        expanded=$(echo $missing | sed 's/:/:0/g')
        ip=$(echo $ip | sed "s/::/$expanded/")
    fi

    blocks=$(echo $ip | grep -o "[0-9a-f]\+")
    set $blocks

    printf "%04x:%04x:%04x:%04x:%04x:%04x:%04x:%04x\n" \
        $(hex2dec $1) \
        $(hex2dec $2) \
        $(hex2dec $3) \
        $(hex2dec $4) \
        $(hex2dec $5) \
        $(hex2dec $6) \
        $(hex2dec $7) \
        $(hex2dec $8)
} 
```

我也有这个功能来压缩

```
# returns a compressed ipv6 address under the form recommended by RFC5952
compress_ipv6() {
    ip=$1

    blocks=$(echo $ip | grep -o "[0-9a-f]\+")
    set $blocks

    # compress leading zeros
    ip=$(printf "%x:%x:%x:%x:%x:%x:%x:%x\n" \
        $(hex2dec $1) \
        $(hex2dec $2) \
        $(hex2dec $3) \
        $(hex2dec $4) \
        $(hex2dec $5) \
        $(hex2dec $6) \
        $(hex2dec $7) \
        $(hex2dec $8)
    )

    # prepend : for easier matching
    ip=:$ip

    # :: must compress the longest chain
    for pattern in :0:0:0:0:0:0:0:0 \
            :0:0:0:0:0:0:0 \
            :0:0:0:0:0:0 \
            :0:0:0:0:0 \
            :0:0:0:0 \
            :0:0; do
        if echo $ip | grep -qs $pattern; then
            ip=$(echo $ip | sed "s/$pattern/::/")
            # if the substitution occured before the end, we have :::
            ip=$(echo $ip | sed 's/:::/::/')
            break # only one substitution
        fi
    done

    # remove prepending : if necessary
    echo $ip | grep -qs "^:[^:]" && ip=$(echo $ip | sed 's/://')

    echo $ip
} 
```

您可以将它们结合起来测试给定的输入是否是 ipv6

```
# a valid ipv6 is either the expanded form or the compressed one
is_ipv6(){
    expanded="$(expand_ipv6 $1)"
    [ "$1" = "$expanded" ] && return 0
    compressed="$(compress_ipv6 $expanded)"
    [ "$1" = "$compressed" ] && return 0
    return 1
} 
```

我希望这有帮助！这些片段取自[https://github.com/chmduquesne/wg-ip](https://github.com/chmduquesne/wg-ip)。如果您发现任何错误，请贡献！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:14:28.583

你可以吗？

```
kent$  echo "2a01:488:66:1000:523:f116:0:1"|awk -F: '{for(i=1;i<=NF;i++)x=x""sprintf ("%4s", $i);gsub(/ /,"0",x);print x}'
2a010488006610000523f11600000001 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-05T17:20:27.593

```
__rfc5952_expand () {
    read addr mask < <(IFS=/; echo $1)
    quads=$(grep -oE "[a-fA-F0-9]{1,4}" <<< ${addr/\/*} | wc -l)
    #[ "${addr:${#addr}-1}" == ":" ] && { addr="${addr}0000"; (( quads++ )); }
    grep -qs ":$" <<< $addr && { addr="${addr}0000"; (( quads++ )); }
    grep -qs "^:" <<< $addr && { addr="0000${addr}"; (( quads++ )); }
    [ $quads -lt 8 ] && addr=${addr/::/:$(for (( i=1; i<=$(( 8 - quads )) ; i++ )); do printf "0000:"; done)}
    #addr=$(
    #for quad in $(IFS=:; echo ${addr}); do
    #    [ "${#quad}" -lt 4 ] && for (( i=${#quad}; i<4 ; i++ )); do quad=0${quad}; done
    #    printf "${delim}${quad}"; delim=":";
    # Or so if you need result without colon, as asked in first post
    #   printf "${quad}";
    #done)
    addr=$(for quad in $(IFS=:; echo ${addr}); do printf "${delim}%04x" "0x${quad}"; delim=":"; done)
    #addr=$(for quad in $(IFS=:; echo ${addr}); do printf "%04x" "0x${quad}"; done)  
    [ ! -z $mask ] && echo $addr/$mask || echo $addr
}

for ip in 2a01:4f8:211:9e::/64 ::1/128; do __rfc5952_expand $ip; done

2a01:04f8:0211:009e:0000:0000:0000:0000/64
0000:0000:0000:0000:0000:0000:0000:0001/128

__rfc5952_compact () {
    read addr mask < <(IFS=/; echo $1)
    addr=$(for quad in $(IFS=:; echo ${addr}); do printf "${delim}%x" "0x${quad}"; delim=":"; done)
    for zeros in $(grep -oE "((^|:)0)+:?" <<< $addr | sort -r | head -1); do addr=${addr/$zeros/::}; done
    [ ! -z $mask ] && echo $addr/$mask || echo $addr
}

for ip in 2a01:04f8:0211:009e:00:0001:0000:0000/64 0000:0000:0000:0000:0000:0000:0000:0001/128; do __rfc5952_compact $ip; done

2a01:4f8:211:9e:0:1::/64
::1/128 
```

# apache-pig - 如何在 Pig 中读取 Mahout 生成的序列文件

> ID：14697404
> 
> 赞同：3
> 
> 时间：2013-02-04T23:04:40.600
> 
> 标签：apache-pig

我想知道如何在 Pig 中读取 Mahout 生成的序列文件？我想可能有一个UDF，但我还找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:14:00.933

我最终像这样使用了大象鸟（v2.2.3）：

```
register '/usr/share/dse/mahout/mahout-core-0.6-job.jar';
register './elephant-bird-2.2.3.jar';

%declare SEQFILE_LOADER   'com.twitter.elephantbird.pig.load.SequenceFileLoader';
%declare LONG_CONVERTER   'com.twitter.elephantbird.pig.util.LongWritableConverter';
%declare INT_CONVERTER    'com.twitter.elephantbird.pig.util.IntWritableConverter';
%declare VECTOR_CONVERTER 'com.twitter.elephantbird.pig.mahout.VectorWritableConverter';
%declare TEXT_CONVERTER   'com.twitter.elephantbird.pig.util.TextConverter';

....

sets = LOAD '$INPUT_SETS' USING $SEQFILE_LOADER ( '-c $INT_CONVERTER', '-c $VECTOR_CONVERTER') AS (thing_id:int, recommendations:chararray);

... 
```

# android - 你可以删除 android play store 应用程序并使用包名吗？

> ID：14697405
> 
> 赞同：10
> 
> 时间：2013-02-04T23:04:43.347
> 
> 标签：android, package

我有一个当前在 Google Play 商店中的应用程序，其包名称为 xxx 我想删除此应用程序，但我想将包名称重新用于将要上传的新应用程序。

是否可以只删除旧应用程序，然后使用现有包名称上传新应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T23:06:43.647

不，因为您不能真正删除应用程序。它只会被禁用。所以这个应用程序仍然会在你的开发者控制台中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:11:16.770

据我所知，一旦您发布了应用程序，您就无法从 Google Play 中删除它。在您的情况下，我想您可以上传一个具有相同包名的新应用程序，它会覆盖旧应用程序。但是您必须将其作为现有应用程序的“较新”版本上传（即清单中的新应用程序版本）。但这种方法对用户来说并不是最友好的，因为旧用户将获得全新的程序作为对旧程序的“更新”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T23:09:19.567

您可以使用相同的包名称编写新应用程序并将其用作旧应用程序的更新。但是我不知道如果您先删除旧应用程序会发生什么。

# c# - 抽象方法与接口

> ID：14697407
> 
> 赞同：1
> 
> 时间：2013-02-04T23:04:53.097
> 
> 标签：c#, java, oop, interface, abstract-class

我正在重构我的代码，所以我需要对接口或抽象类做出决定。我有基类 Player 和继承基类的类，称为 VideoPlayer、MusicPlayer 等。基类有没有实现的抽象方法（Play）。那么，什么是更可取的方式？将 Play 放在接口中或将其留在抽象类中。MusicPlayer 中的播放与 VideoPlayer 中的播放器不同。我在 C# 中这样做。

```
class Player
{
    abstract void Play();
} 

class VideoPlayer : Player
{
    void Play()
    {
      //Some code.
    }
}

class MusicPlayer : Player
{
    void Play()
    {
      //Some code.
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T23:07:23.470

如果您没有要继承的任何基本功能，请使用接口。当你有一个想要被继承的部分实现时，使用抽象类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T23:14:38.943

一件常见的事情是两者都做

a) 提供接口。并在消费对象时使用接口（即调用播放方法）。

b) 提供一个基类，在有公共管道的情况下实现接口；常用方法等。这是实现者可选择使用的助手

通过这种方式，IAmAPlayer 的实现者可以简单地实现该接口，或者如果他们的用例与您的基类匹配，他们可以使用该接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T23:07:31.317

通常，如果只是为了表示可以调用方法，您会使用接口。该接口部分设计用于解决单继承问题。如果您没有在父级中实现常用方法，请使用接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T23:15:34.033

把事情简单化。如果您可以使用接口，请执行此操作。如果您不能使用接口，请使用抽象类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T00:46:37.213

需要考虑的一件事是，接口需要在抽象类不需要的地方实现其所有属性和方法。次要问题，但有时您需要支持程序集的多个版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T15:40:12.487

您需要了解接口继承和类继承之间的区别。

抽象类用于对外观相似的类的类层次结构进行建模（例如，Animal 可以是抽象类，Human、Lion、Tiger 可以是具体的派生类）

Interface is used for Communication between 2 similar / non similar classes which does not care about type of the class implementing Interface(e.g. Height can be interface property and it can be implemented by Human , Building , Tree. It does not matter if you can eat , you can swim you can die or anything.. it matters only a thing that you need to have Height (implementation in you class) )

Now you will understand here that for your example you may need to have both. If you are sure of the possibility of consumption of Play method amongst many other classes its very good to have interface implementation so that others will use method via Interface.

# c - 动态内存和指针

> ID：14697409
> 
> 赞同：0
> 
> 时间：2013-02-04T23:05:00.857
> 
> 标签：c, pointers, memory, header, malloc

我正在制作一个必须为某种类型分配内存的程序，它必须存储数据的大小以及我传递给它的数据的大小。因此，如果我分配 8 个字节，我需要将内存大小存储在前 4 个字节中，并将剩余大小存储在其他 4 个字节中。我认为这被称为有标题，但我对 C 还是很陌生。我现在所拥有的只是分配的空间，我如何在其中存储值？

```
int * mem_start_ptr; //pointer to start off memory block
    int data; 
    data = &mem_start_ptr; 
    mem_start_ptr = (long *)malloc(sizeof(long)); //reserver 8 bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:23:46.913

首先，`sizof(long)`是特定于实现的，在 64 位 Linux 上是 8 个字节，而在 Windows 和 32 位 Linux 上是 4 个字节，AFAIK。`malloc(8)`如果您想显式分配 8 个字节，请使用。虽然，既然你想存储`int`，看来，使用`malloc(sizeof(*mem_start_ptr))`. 另外，不要强制转换 的返回值`malloc`，它在 C 中是多余的，甚至可以隐藏错误。现在，要存储这两个 4 字节值：

```
/* for the first one. Let's use 42 */
*mem_start_ptr = 42;
/* for the second one. Let's put the value of of some variable here */
*(mem_start_ptr + 1) = int_variable; 
```

你应该阅读指针算法。也可能关于数组。谷歌是你的朋友。另外，不知道您的代码中的这部分是做什么用的。**因为它没有做你可能期望它做的事情**：

```
int data;
data = &mem_start_ptr 
```

最后，我会像这样重写您的代码：

```
int *mem_start_ptr;
mem_start_ptr = malloc(sizeof(*mem_start_ptr));
*mem_start_ptr = your_1st_4bytes;
*(mem_start_ptr + 1) = your_2nd_4bytes; 
```

不再需要后不要忘记`free()`它。另外，我没有在这里拍摄，但也不要忘记检查`NULL`，因为`malloc()`失败时返回。

再一次 - 阅读指针算术。谷歌是你的朋友；]

# eclipse-rcp - Eclipse 4 RCP 应用程序“创建示例内容”和“为应用程序模型启用开发模式”未显示

> ID：14697410
> 
> 赞同：1
> 
> 时间：2013-02-04T23:05:18.187
> 
> 标签：eclipse-rcp

抱歉标题冗长，但我正在关注 Lars Vogels Eclipse 4 RCP 教程来尝试学习 Eclipse RCP，但遇到了一个问题。在[本](http://www.vogella.com/articles/EclipseRCP/article.html)教程的第 4.2 步中，我打算得到这样的屏幕：

[![](../Images/09c1b35faa0628a926b5efff9a0fbf8a.png "由 imgur.com 主办")](https://imgur.com/hPfXPDp)

但我得到的只是这样的屏幕：

[![](../Images/c1c37e31435203c05aef995b725788c3.png "由 imgur.com 主办")](https://imgur.com/Xn5EAbi)

[有人在这里](https://groups.google.com/forum/?fromgroups=#!topic/vogella/eqtQA_GfhLI)问了同样的问题，但 Lars 说要做的就是从我已经完成[的原始指南的第 3.3 节中获取最新的 e4 工具。](http://www.vogella.com/articles/EclipseRCP/article.html)

我错过了一些明显的东西吗？

任何建议都会非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:39:30.217

我有同样的问题。

由于 e4 Project 版本 0.12 导致的接缝（我从它开始，不知道早期版本是否也是这种情况）。我从[http://download.eclipse.org/e4/updates/0.12](http://download.eclipse.org/e4/updates/0.12)更新站点下载了它。这给了我 e4 Tools (Eclipse e4 Modeltooling) 版本 0.12.0.v20120529-2033

e4 项目现在已经发布了 build **0.13**，所以我将我的软件站点更改为：http: [//download.eclipse.org/e4/updates/0.13](http://download.eclipse.org/e4/updates/0.13) 并进行了更新，获得了 e4 Tools 的 0.12.0.v20130221-1605 版本.

正如 Lars Vogel 教程所示（带有示例部分代码），它现在可以工作（对我来说......）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:40:04.560

而是从[http://vogella.com/updatesite/e4tools](http://vogella.com/updatesite/e4tools)下载文件。

您的屏幕截图来自 eclipse.org 的最新版本。我遇到过同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:07:34.903

您可以像帮助 > 检查更新一样更新

# ios - 重新缩放在 xib 中定义的视图（自动缩放子视图 w/意外结果）

> ID：14697411
> 
> 赞同：0
> 
> 时间：2013-02-04T23:05:19.543
> 
> 标签：ios, interface-builder, xib, autolayout

为简单起见，我使用 Interface Builder 布置了一个视图。这是一个玩家状态视图，用于当前正在玩的所有“x”玩家。为了容纳大量玩家，我们选择根据玩家数量调整玩家视图的大小和位置。

例如，如果只有两个玩家，则 2 个玩家的视图将占据屏幕的大部分。但是，如果有 4 个，则每个仅占屏幕的大约 1/4。

似乎使用“自动调整子视图”和各种支柱，控制视图会相当容易。然而，相反，我发现了很多意想不到的行为。

每当我想改变视图大小时，我都会调用 setFrame。但是，如果任何小于 XIB 中使用的原始布局大小，视图不会正确缩小，而是以 XIB 布局的大小绘制。

根据我遇到的麻烦，我预计我不会以预期的方式这样做。有人可以为我指明正确的方向，以指定视图及其组件布局然后调整其大小的正确方法吗？（我宁愿不使用 CGAffineTransform ...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:23:09.270

听起来容器视图没有设置 autoresizesSubviews。（在界面生成器中，它是一个名为“自动调整子视图”的复选框）。

# ios - 无法在 UIView 上设置边框

> ID：14697413
> 
> 赞同：0
> 
> 时间：2013-02-04T23:05:27.717
> 
> 标签：ios, uiview

我在 UIView 上设置边框颜色时遇到问题。如果设置`tempColor`为`[UIColor lighGreyColor], [[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:1.0],`or `[UIColor blueColor]`，则按预期设置边框。但是，下面的代码没有设置颜色，也没有出现边框。 `unamecontainer`是`UIView`。为什么我可以将边框颜色设置为上面提到的颜色，而不是下面的颜色。

```
UIColor *tempColor = [[UIColor alloc] initWithRed:169 green:201 blue:229 alpha:1.0];
self.unamecontainer.layer.borderColor = tempColor.CGColor;
self.unamecontainer.layer.borderWidth = 1.0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:23:04.827

的 RGB 值`UIColor`需要在范围内`[0, 1]`，因此您需要将每个值除以`255.0`（不是`255`因为那是整数除法）以获得百分比：

```
UIColor *tempColor = [[UIColor alloc]
    initWithRed: 169/255.0
    green:       201/255.0
    blue:        229/255.0
    alpha:       1.0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T10:19:17.660

使用此代码

```
yourView.layer.borderColor = [UIColor colorWithRed:204.0f/255.0f green:204.0f/255.0f   blue:204.0f/255.0f alpha:1.0f].CGColor;
view_buttons.layer.borderWidth = 1.0f; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:18:02.900

红色、绿色和蓝色是从 0 到 1 的浮点数。试试

```
UIColor *tempColor = [[UIColor alloc] initWithRed:(169/255)f green:(201/255)f blue:(229/255)f alpha:1.0]; 
```

# java - 从 Java eclipse 连接 postgreSQL 时出错

> ID：14697420
> 
> 赞同：1
> 
> 时间：2013-02-04T23:06:02.767
> 
> 标签：java, eclipse, postgresql

我正在尝试从 Java eclipse 连接到 postgreSQL

这是数据库结构的快照。![数据库结构](../Images/9378a5a29ae2fd190feea6bcd94b4bb7.png)

```
connection = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/postgres", "postgres",
                    "admin"); 
```

当我尝试连接到 postgres 数据库时，它工作得非常好。但这是我不想连接的默认数据库。

```
 connection = DriverManager.getConnection(
                        "jdbc:postgresql://localhost:5432/postgres", "han2012205",
                        "admin"); 
```

当我尝试访问 han2012205 时，它抛出了这个错误。

```
org.postgresql.util.PSQLException: FATAL: password authentication failed for user "han201205"
    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:398)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:173)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:64)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:136)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:29)
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:21)
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:31)
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:24)
    at org.postgresql.Driver.makeConnection(Driver.java:393)
    at org.postgresql.Driver.connect(Driver.java:267)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at connectToDB.dbConnection.connectdatabase(dbConnection.java:26)
    at AdapterTest.main(AdapterTest.java:22) 
```

有人可以帮我解决我的问题吗

希望尽快收到某人的回音！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T23:08:12.037

你误解了你正在打的电话。您正在使用[`DriverManager.getConnection(String, String, String)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html#getConnection%28java.lang.String,%20java.lang.String,%20java.lang.String%29)- 其中第二个参数是用户，第三个参数是密码。这*不是*指定要连接的数据库的方法。

我怀疑你想要：

```
connection = DriverManager.getConnection(
                "jdbc:postgresql://localhost:5432/han201205", "postgres",
                "admin"); 
```

请注意，数据库名称是 JDBC 连接 URL 的最后一部分，*而不是*第二个参数。（您可能只需要用户名和密码，当然......）

有关更多详细信息，请参阅[Postgres JDBC 文档](http://jdbc.postgresql.org/documentation/91/connect.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:09:21.603

此外，数据库名为“han201205”，您的代码正在寻找“han2012205”，并带有额外的“2”

# zend-framework - ZEND 中的友好 url - 几个用户

> ID：14697421
> 
> 赞同：0
> 
> 时间：2013-02-04T23:06:12.480
> 
> 标签：zend-framework, redirect, friendly-url, restful-url

如何创建一个可以使用 Facebook 等 URL 的应用程序？

*   app.dev/用户名
*   app.dev/用户名/图片
*   app.dev/用户名/信息
*   app.dev/用户名/posts/post_333
*   app.dev/用户名/posts/post_333/share

该应用程序具有其他具有不同 URL 的控制器

*   app.dev/事件
*   app.dev/site/contact
*   app.dev/site/terms

当控制器不存在时，重定向到配置文件控制器

在应用程序.ini

```
autoloaderNamespaces[] = "Plugins"
resources.frontController.plugins[] = "Plugins_Profiles" 
```

在 Bootstrap.php 中

```
protected function _initProfiles()
{
    $front = Zend_Controller_Front::getInstance();
    $front->registerPlugin(new Plugins_Profiles());    
} 
```

在 /library/Plugin/Profiles.php

```
class Plugins_Profiles extends Zend_Controller_Plugin_Abstract
{

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $dispatcher = Zend_Controller_Front::getInstance()->getDispatcher();

        if (!$dispatcher->isDispatchable($request)) {

            $url = $request->getControllerName();

            $request->setModuleName('default');
            $request->setControllerName('profiles');
            $request->setActionName('url');
            $request->setParam('url', $url);

            /** Prevents infinite loop if you make a mistake in the new request **/
            if ($dispatcher->isDispatchable($request)) {
                $request->setDispatched(false);
            }

        }

    }

} 
```

但我不能发送变量 例如：app.dev/username/posts/post_333/share

知道我应该如何进行吗？

PS。对不起语法，我是巴西人，我说葡萄牙语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:23:24.753

您应该检查 Zend_Controller_Router_Route 以获得一个干净的 url。下面是一些开始使用 clean-url 和 zend 路由的链接。

*   [Zend框架中的url路由](http://blog.jebrini.net/post/1431025228/url-routing-in-zend-framework-for-dummies)
*   [简单路线示例](http://www.hardcode.nl/archives_132/article_566-simple-zend-router-example.htm)
*   [Zend_Controller_Router_Route 的文档](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)

# c# - NHibernate 2.2 如何设置列表关系

> ID：14697422
> 
> 赞同：1
> 
> 时间：2013-02-04T23:06:13.820
> 
> 标签：c#, xml, nhibernate, sqlite

我通常不使用 NHibernate 2.2，所以我有几个问题无法找到很好的解释。我有 2 个表：点和文件。

声明为 C# 类：

```
[Serializable]
    public class PPoint
    {
        public PPoint()
        {
        }

        public virtual int PPointID { get; set; }
        public virtual int Position { get; set; }
        public virtual int ImportID { get { if (ImportFile == null) return -1; else return ImportFile.ImportID; } }
        public virtual PPImportFile ImportFile { get; set; }

        public virtual int Name{ get; set; }
        //more properties
    }

[Serializable]
public class PPImportFile
{
    public PPImportFile()
    {
        Points = new List<PPoint>();
    }

    private static Repositories.PPointRepository ppr; 

    public virtual int ImportID { get; set; }
    public virtual string FileName{ get; set; }
    public virtual DateTime CreateDate { get; set; }

    public virtual IList<PPoint> Points { get; set; }

    public virtual int PointCount { get { return Points.Count; } }
} 
```

我的映射是：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="WebGPS.Data"
                   namespace="WebGPS.Data.Domain">

<id name="PPointID" column ="PPointID" type="System.Int32" unsaved-value="-1">
    <generator class="assigned"></generator>
</id>
<property name="Position" />
<!--<property name="ImportID" />-->
<many-to-one name="ImportFile" column="ImportID" update="true" insert="true" not-null="true" cascade="all-delete-orphan"  />

    <property name="Name" />
  </class>

</hibernate-mapping> 
```

和

```
 <?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                       assembly="WebGPS.Data"
                       namespace="WebGPS.Data.Domain">

  <class name="PPImportFile" lazy="true">
    <id name="ImportID" column ="ImportID" type="System.Int32" unsaved-value="-1">
        <generator class="assigned"></generator>
    </id>
    <property name="FailoPav" />
    <property name="ImportoData" />
    <property name="ImportavoVart" />

    <list name="Points" table="PPoint" cascade="all" lazy="true">
      <key column="PPointID" not-null="true" unique="true"/>
      <index column="Position"/>
      <one-to-many class="PPoint"/>
    </list>
  </class>

</hibernate-mapping> 
```

用点插入新文件的代码：

```
PPImportFile file = new PPImportFile();

int newPointID = pp.GetNewPontID(); // Get next Point ID from repository
do
{
   PPoint pt = new PPoint();
   pt.PPointID = newPointID;
   pt.ImportFile = file;
   // assign other properties

   file.Points.Add(pt);
   newPointID +=1;
} while (!eof)

if (fileNew)
    repository.Add(file); 
else
    repository.Update(file); // get an error here 
```

我已将 Position 列添加到 Point 表和类中，现在尝试在加载现有记录并获取旧错误后获取点集合： **未能延迟初始化角色集合：PPImportFile.Points**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:57:16.010

有两个问题。首先总是将集合映射为**接口**：可用类型在此处列出[6.1。持久性集合](http://nhforge.org/doc/nh/en/index.html#collections-persistent) *（例如`IList`, `Iesi.Collections.ISet`）*

其次，**索引列**。C# IList 可以实现（List 是一个很好的例子）作为一个包含一个值多次的集合（同一个 Point 可以被添加不止一次）。允许 .NET 区分此列表中的项目的唯一信息是索引。这就是 NHibernate 所支持的

因此，如果您的映射将是：

```
public virtual IList<PPoint> Points { get; set; } 
```

并且您想将其映射为`<list>`表应具有“ForeignKey”列和从零开始的“Index”列。该索引列将由 NHibernate 管理，并用`IList`索引值填充。在此处阅读更多内容[19.5.1。分类](http://nhforge.org/doc/nh/en/index.html#performance-collections-taxonomy)

### 建议：

如果无法更改数据库，请更改映射以避免索引列。

`IList<PPoint>`可以映射为存在一些性能问题（阅读链接） ，`<bag>`但它会为您工作。

使用`Iesi.Collections.Generic.ISet<T>`和`<set>`映射。Set 将确保每个值只添加到集合中一次。

更多关于`<list>`这里[http://ayende.com/blog/4043/nhibernate-mapping-list](http://ayende.com/blog/4043/nhibernate-mapping-list)

# c# - MappingException Edm.String 与 SqlServer.varbinary 不兼容

> ID：14697423
> 
> 赞同：9
> 
> 时间：2013-02-04T23:06:15.517
> 
> 标签：c#, sql-server-2008, mapping, edmx

我很难解决一个愚蠢的映射问题。基本上发生的事情是我在一个 sql db 表中有一个字段，它是一个 varbinary 用于安全目的（加密和解密）。所有这些东西都很好，但似乎 edmx 将该表中的字段视为一个字符串，我认为它应该将其视为给定数据只是一个二进制字符串。这是我收到的错误消息。

```
Schema specified is not valid. Errors:

ReadModel.Model.msl(836,12): error 2019: Member Mapping specified is not valid. The type 
'Edm.String [Nullable=True,DefaultValue=,MaxLength=256,Unicode=,FixedLength=False]' of 
member 'field-in-question' in type 'Lib.ReadModel.TableName' is not compatable with
'SqlServer.varbinary' [Nullable=True,DefaultValue=,MaxLength=256,FixedLength=False]'
of member 'field-in-question' in type 'Model.Store.TableName'. 
```

有没有人遇到过这样的问题？也许我忽略了什么？也许能够指出我正确的方向？我在查找信息以解决问题时遇到问题，并且不知所措。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T18:35:18.167

好的，对于那些曾经遇到过这样的问题的人，事实证明，最好通过在 edmx 中删除并重新添加实体来解决它。在我看来，这是一件愚蠢的事情，但它确实有效。呸。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-12T14:50:05.970

EF（或某个时候的用户更改）已更改（？）该`Model` `Entity`属性的 edmx 为 a`Edm.String[Nullable=True,DefaultValue=,MaxLength=256,Unicode=,FixedLength=False]`而不是 a `varbinary`。*错误首先读取本地实体，然后是数据库定义*

* * *

**备用修复；一样可行**

是的，您的修复确实解决了问题...

但是问题也可以*通过*在 edmx 中设置正确的值来*正确*解决，例如 ->

1.  `Model Browser`窗户，然后打开树。
2.  选择`Model`->`Entity Types`然后找到目标实体，打开它然后选择它`Properties`
3.  并将 更改`Type`为适当的值。

[![在此处输入图像描述](../Images/9c9948dbf8c265acdc23d5106597f894.png)](https://i.stack.imgur.com/K0eK9.png)

上面的示例显示`DateTime`，但在您的情况下，它会显示`String`，错误尽职尽责地报告。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-11T09:39:04.823

我遇到了这个问题，我更改了数据库上的字段类型，然后我的 c# 项目开始抱怨。首先，我从数据库更新了我的模型。然后，我点击了我的模型、我的实体类型、有问题的表和字段/属性。然后我更改了它的类型以匹配表中新更改的类型。然后错误消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-14T17:01:08.220

让我解释一下这个问题，例如，您在数据库中有一个表，其中有一个名为**Price**的实体，并且您将其类型**设为 string**，并且

在编码期间，您将此实体定义为`Property Int Price {get:set:}`，现在这是问题所在。您在 SQL TABLE 和代码上的数据类型必须相同，否则会发生此问题。我遇到了同样的问题，我修复了它，希望你能明白

如果您使用的是 EF，还可以通过搜索更改 EDMX Xml 文件中的这些类型

像

```
<Property Name="Price" Type="money" />

<Property Type="Decimal" Name="Price" Precision="19" Scale="4" /> 
```

希望这会帮助一些人

# ms-access - Access 2010 中的 IIf 语句将日期字段与今天起 90 天进行比较

> ID：14697429
> 
> 赞同：0
> 
> 时间：2013-02-04T23:06:36.643
> 
> 标签：ms-access

我正在尝试将 Access 2010 中的日期字段与今天日期后的 90 天进行比较。此公式将位于报告的文本框中。我尝试添加如下所示的语句，但它在我运行报告时询问我“d”的值。

```
IIf([DUE_DATE]>(DateAdd(d,90,Date)),[LETTER_DUE_DATE],Date) 
```

你能帮我理解我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:08:08.090

在 MS Access 中，日期是双倍的，只需添加：

```
IIf DueDate>Date()+90, ... 
```

如果必须使用 DateAdd，d 是一个字符串：

```
DateAdd("d",90,Date) 
```

# java - 适配器实例与列表视图一起进入片段

> ID：14697436
> 
> 赞同：0
> 
> 时间：2013-02-04T23:06:53.380
> 
> 标签：java, android, android-fragments, android-viewpager, android-arrayadapter

我对片段很陌生，并且确实有问题。

我的 onResume() 方法调用了一个数据库助手类，该类将一些简单的对象返回给以下侦听器方法：

```
 @Override
public void onHistoryLoaded(List<Entry> entrieslist) {
    Logging.d(TAG, "onHistoryLoadedListener called");
    if (entrieslist != null) {
        this.entries = entrieslist;
        if (mAdapter == null) {
            Logging.d(TAG, "adapter is null, recreating");
            this.mAdapter = new HistoryAdapter(getActivity(),
                    R.layout.history_row, entrieslist);
            registerForContextMenu(lv);
            mAdapter.setNotifyOnChange(true);
            lv.setAdapter(mAdapter);
            mAdapter.notifyDataSetChanged();
        } else {
            mAdapter.clear();
            mAdapter.addAll(entries);

            mAdapter.notifyDataSetChanged();
        }

    } else {
        Logging.e(TAG, "onHistoryLoaded: returned entries are empty");
    }

} 
```

如您所见，如果我的实例变量 mAdapter 为空，则它会被初始化。到目前为止，这很好用。一旦配置更改（例如用户进入风景），我的问题就会出现。数据显示得很好（因为 onResume 和 onHistoryLoaded 也被调用得很好，并告诉适配器已经为空，因此是新创建的）。但是，当我在适配器上调用 .clear() （在纵向模式下工作正常）时，我得到一个空指针异常，因为 mAdapter 变量实例为空。这怎么可能发生？我在后台线程或其他东西中什么都不做。此时不应为空。

我的想法已经用完了。提前致谢。

我的 LogCat 错误：

```
02-05 00:17:22.430: E/HistoryFragment(25174): mAdapter is null?
02-05 00:17:22.430: W/System.err(25174): java.lang.NullPointerException
02-05 00:17:22.445: W/System.err(25174):        at com.sapps.savetodrive.HistoryFragment.cleanHistory(HistoryFragment.java:361)
02-05 00:17:22.445: W/System.err(25174):        at com.sapps.savetodrive.MainActivity.onOptionsItemSelected(MainActivity.java:103)
02-05 00:17:22.445: W/System.err(25174):        at android.app.Activity.onMenuItemSelected(Activity.java)
02-05 00:17:22.445: W/System.err(25174):        at android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:351)
02-05 00:17:22.445: W/System.err(25174):        at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java)
02-05 00:17:22.450: W/System.err(25174):        at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java)
02-05 00:17:22.455: W/System.err(25174):        at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java)
02-05 00:17:22.455: W/System.err(25174):        at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java)
02-05 00:17:22.455: W/System.err(25174):        at com.android.internal.view.menu.MenuPopupHelper.onItemClick(MenuPopupHelper.java)
02-05 00:17:22.475: W/System.err(25174):        at com.android.internal.view.menu.ActionMenuPresenter$OverflowPopup.onItemClick(ActionMenuPresenter.java)
02-05 00:17:22.480: W/System.err(25174):        at android.widget.AdapterView.performItemClick(AdapterView.java)
02-05 00:17:22.480: W/System.err(25174):        at android.widget.AbsListView.performItemClick(AbsListView.java)
02-05 00:17:22.485: W/System.err(25174):        at android.widget.ListView.performItemClick(ListView.java)
02-05 00:17:22.485: W/System.err(25174):        at android.widget.AbsListView$PerformClick.run(AbsListView.java)
02-05 00:17:22.485: W/System.err(25174):        at android.widget.AbsListView$1.run(AbsListView.java)
02-05 00:17:22.485: W/System.err(25174):        at android.os.Handler.handleCallback(Handler.java)
02-05 00:17:22.490: W/System.err(25174):        at android.os.Handler.dispatchMessage(Handler.java)
02-05 00:17:22.490: W/System.err(25174):        at android.os.Looper.loop(Looper.java)
02-05 00:17:22.490: W/System.err(25174):        at android.app.ActivityThread.main(ActivityThread.java)
02-05 00:17:22.490: W/System.err(25174):        at java.lang.reflect.Method.invokeNative(Native Method)
02-05 00:17:22.490: W/System.err(25174):        at java.lang.reflect.Method.invoke(Method.java)
02-05 00:17:22.490: W/System.err(25174):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
02-05 00:17:22.495: W/System.err(25174):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
02-05 00:17:22.495: W/System.err(25174):        at dalvik.system.NativeStart.main(Native Method) 
```

下面的代码是错误发生的地方（只是有点重组，它发生在 mAdapter.clear() ）。这返回 mAdapter == null 是 TRUE！

```
 public void cleanHistory() {
    if (mAdapter == null)
        Logging.e(TAG, "ADAPTER IS NULL WHEN CLEANING?!");
    else {
        mAdapter.clear();
        lastUndoAction = FLAG_UNDO_CLEANALL;
        mUndoBarController.showUndoBar(false,
                getString(R.string.item_allremoved), null);
    }
} 
```

继续..

```
 @Override
public void onResume() {
    super.onResume();
    if (lv != null && helper != null) {

        Logging.d(TAG, "onResume(), lv and helper aren't null");
        helper.getAllEntries();
        // adapter.notifyDataSetChanged();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:38:59.523

现在已经修好了。这个问题真的在别的地方。Android 似乎实例化了自己的片段对象实例。所以发生的事情是，我在片段实例上的 OnOptionsItemCrated() 调用（由 viewpager 检索）基本上是片段的空实例，它没有调用 onAttach() onActivityCreated() 东西，因为它是'尚未附加到任何活动。所以我的“解决方法”（对于这个特别愚蠢的问题恕我直言）是使用这里建议的解决方案：[getFragmentByTag from Switcher](https://stackoverflow.com/questions/9727173/support-fragmentpageradapter-holds-reference-to-old-fragments/9744146#9744146)

它的作用基本上是在 viewpager 中“生成生成的标签”，以从片段管理器中检索当前显示的（和附加的）片段。

```
private String getFragmentTag(int pos){
    return "android:switcher:"+R.id.pager+":"+pos;
} 
```

所以我在 onOptionsItemSelected 中的解决方案最终看起来像这样：

```
 case R.id.menu_cleanhistory:
            ((HistoryFragment) MainActivity.this.getSupportFragmentManager()
                    .findFragmentByTag(
                            "android:switcher:" + R.id.viewpager + ":1"))
                    .cleanHistory();
           return true; 
```

信不信由你——它有效。

# qt4 - 如何调整 QTabWidget 的大小？

> ID：14697437
> 
> 赞同：0
> 
> 时间：2013-02-04T23:06:57.077
> 
> 标签：qt4, qt4.8, qtabwidget

我的程序执行计算并输出一些示意图，绘制在标签上（使用`QPixmap`）。我在每个标签上显示一个标签。

当下一次计算完成并且图纸更小时，我希望标签的大小也减小。但这不会发生。标签大小保持不变。

我首先使用 ) 删除所有以前的选项卡`removeTab(`，然后创建新选项卡。唯一没有被删除`QTabWidget`的当然是它本身。

从小图纸开始时，标签尺寸会随着图纸的增大而增加。但反过来就行不通了。

我怎样才能解决这个问题？以下代码不起作用：

```
layout_tabs = new QTabWidget;
layout_tabs->setSizePolicy(QSizePolicy::Minimum, QSizePolicy::Minimum); 
```

我正在使用 QT-4.8.4。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T21:10:40.760

您（用户）可以在切换到较小的标签后使用鼠标手动调整窗口大小吗？

如果是这样，可能发生的是父窗口小部件（即窗口）已调整大小以适应较大的子 QTabWidget。当小标签出现在大标签之后时，QTabWidget 仍将占用与其父级相同的空间，除非优先考虑其布局层次结构中同一级别的另一个小部件。因为父窗口没有变小，QTabWidget 也不会变小。

因此，请在删除选项卡后尝试调整父小部件（QMainWindow 或其他）的大小，并且应该跟随选项卡小部件。在 Qt 中，收缩通常必须来自上方，而扩展可以来自上方或下方。像这样的东西可能会起作用（未经测试）......

```
while(layout_tabs->count() > 0)
{
    QWidget* removedtab = layout_tabs->widget(0);
    layout_tabs->removeTab(0); //removeTab() doesn't delete the widget
    removedtab->deleteLater(); //so you have to delete it yourself
}
layout_tabs->updateGeometry();
mainwindow->resize(mainwindow->minimumSize()); 
```

**编辑**请注意，[QLayoutTab::removeTab()](http://qt-project.org/doc/qt-4.8/qtabwidget.html#removeTab)不会删除您删除的选项卡，因此您需要以某种方式自己删除它，例如在我刚刚添加的代码片段中，因为删除的选项卡不再具有父级。

# python - 多边形相交与匀称的更快方法

> ID：14697442
> 
> 赞同：48
> 
> 时间：2013-02-04T23:07:16.633
> 
> 标签：python, numpy, shapely

我有大量的多边形（~100000），并试图找到一种聪明的方法来计算它们与规则网格单元的相交区域。

目前，我正在使用 shapely（基于它们的角坐标）创建多边形和网格单元。然后，我使用一个简单的 for 循环遍历每个多边形并将其与附近的网格单元格进行比较。

只是一个小例子来说明多边形/网格单元。

```
from shapely.geometry import box, Polygon
# Example polygon 
xy = [[130.21001, 27.200001], [129.52, 27.34], [129.45, 27.1], [130.13, 26.950001]]
polygon_shape = Polygon(xy)
# Example grid cell
gridcell_shape = box(129.5, -27.0, 129.75, 27.25)
# The intersection
polygon_shape.intersection(gridcell_shape).area 
```

（顺便说一句：网格单元的尺寸为 0.25x0.25，多边形最大为 1x1）

实际上，这对于大约 0.003 秒的单个多边形/网格单元组合来说是相当快的。但是，在我的机器上运行大量多边形（每个多边形可能与数十个网格单元相交）大约需要 15 分钟以上（最多 30 分钟以上，具体取决于相交网格单元的数量），这是不可接受的。不幸的是，我不知道如何为多边形相交编写代码以获得重叠区域。你有什么建议吗？有没有比匀称的替代品？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-11T00:37:55.253

考虑使用[Rtree](http://pypi.python.org/pypi/Rtree/)来帮助识别多边形可能与哪些网格单元相交。这样，您可以删除与纬度/经度数组一起使用的 for 循环，这可能是较慢的部分。

像这样构造你的代码：

```
from shapely.ops import cascaded_union
from rtree import index
idx = index.Index()

# Populate R-tree index with bounds of grid cells
for pos, cell in enumerate(grid_cells):
    # assuming cell is a shapely object
    idx.insert(pos, cell.bounds)

# Loop through each Shapely polygon
for poly in polygons:
    # Merge cells that have overlapping bounding boxes
    merged_cells = cascaded_union([grid_cells[pos] for pos in idx.intersection(poly.bounds)])
    # Now do actual intersection
    print(poly.intersection(merged_cells).area) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-03-29T22:54:47.413

自 2013/2014 年以来，Shapely 拥有 [STRtree](https://shapely.readthedocs.io/en/latest/manual.html#str-packed-r-tree)。我用过它，它似乎运作良好。

这是文档字符串中的一个片段：

STRtree 是使用 Sort-Tile-Recursive 算法创建的 R-tree。STRtree 将一系列几何对象作为初始化参数。初始化后，查询方法可用于对这些对象进行空间查询。

```
>>> from shapely.geometry import Polygon
>>> from shapely.strtree import STRtree
>>> polys = [Polygon(((0, 0), (1, 0), (1, 1))), Polygon(((0, 1), (0, 0), (1, 0))), Polygon(((100, 100), (101, 100), (101, 101)))]
>>> s = STRtree(polys)
>>> query_geom = Polygon([(-1, -1), (2, 0), (2, 2), (-1, 2)])
>>> result = s.query(query_geom)
>>> polys[0] in result
True 
```

# javascript - 如何在完成 getjson 调用并显示 jw 播放器时使加载动画 gif 不可见？

> ID：14697448
> 
> 赞同：0
> 
> 时间：2013-02-04T23:07:43.193
> 
> 标签：javascript, jquery, ajax, jwplayer

我想在页面加载时显示加载动画，并在 getjson 调用成功完成时删除加载动画，并在 getjson 完成结束时显示我的 jw 播放器代码。现在我的加载动画始终可见。你们能告诉我如何在 getjson 调用结束时使动画加载不可见并显示我的 jw 播放器吗？

我的加载动画图像：

```
<td rowspan="4"><img src="./loading.gif" width="304" height="287"></td> 
```

和我的 getjson 电话：

```
<script>
$.getJSON('http://www.somesite.com/getmedia.php?id=1234&callback=?', function(data){
var mediaUrl = data.contents;
jwplayer().load({file: mediaUrl+".flv"});

});

</script> 
```

在 getjson 调用结束时应该可以看到的 jw 播放器：

```
<script type='text/javascript' src='./jwplayer.js'></script>

<div id='mediaspace'>This text will be replaced</div>

<script type='text/javascript'>
  jwplayer('mediaspace').setup({
    'flashplayer': './player.swf',
    'autostart': 'true',
    'controlbar': 'bottom',
    'width': '470',
    'height': '320'
  });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:11:35.017

在 id 中提供您的 img 标签，例如“loadingimg”... 然后，在您完成 Ajax 事件时：

```
$('#loadingimg').hide(); 
```

编辑：此外，播放器应该具有“显示：无”的风格。当你想展示它时，打电话

```
$('#player').show(); 
```

或者你给玩家的任何ID...

编辑：在 jwplayer.load(); 之后将这两行放在 getJSON() 的回调函数中；

# debugging - 在哪里可以获得 Windows.Live.dll 的调试符号 (PDB)？

> ID：14697454
> 
> 赞同：1
> 
> 时间：2013-02-04T23:08:15.967
> 
> 标签：debugging, windows-phone, debug-symbols, live-sdk

我正在使用 Microsoft [Live SDK for Windows Phone访问 SkyDrive 并在](http://msdn.microsoft.com/en-US/live/ff621310)**Microsoft.Live.dll**中获得异常。我想逐步调试源代码以调试问题，但从符号服务器[http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols)获取符号失败。

我按照[这些说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416588%28v=vs.85%29.aspx#using_the_microsoft_symbol_server)如何在我的开发环境中设置符号服务器。环境变量`_NT_SYMBOL_PATH`设置为**srv*c:\symbols* [http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols)**。这似乎适用于其他程序集。在调试时，我看到**c:\symbols**处的符号缓存随着条目的增加而增长，但缺少**Microsoft.Live 。**

在哪里可以获得 Microsoft.Live.dll 的调试符号？

# python - 为什么我的字符串格式不起作用？

> ID：14697456
> 
> 赞同：0
> 
> 时间：2013-02-04T23:08:19.817
> 
> 标签：python, string, format

我正在使用 python 动态创建一个 jQuery 函数：

```
jQuery = ("$('%(other_id)').click(function() { "
              "    if ($(this).is(':checked')) { "
              "        $('%(text_id)').show()     "
              "    } "
              "    else {"
              "       $('%(text_id)').hide()"
              "    }"
              " });") 
```

`other_id`我必须在and中插入变量`text_id`。我看到这个`$`符号用于字符串模板（虽然不知道它是做什么的）所以我用 double `$`-s( `$$`)转义它们

```
jQuery = ("$$('%(other_id)').click(function() { "
              "    if ($$(this).is(':checked')) { "
              "        $$('%(text_id)').show()     "
              "    } "
              "    else {"
              "       $$('%(text_id)').hide()"
              "    }"
              " });") 
```

但是我仍然无法格式化：

```
>>> choice_id = 'foo'
>>> text_choice_id = 'bar'
>>> jQuery = ("$$('%(other_id)').click(function() { "
                  "    if ($$(this).is(':checked')) { "
                  "        $$('%(text_id)').show()     "
                  "    } "
                  "    else {"
                  "       $$('%(text_id)').hide()"
                  "    }"
                  " });")
>>> jQuery %{'other_id' : choice_id, 'text_id' : text_choice_id }

Traceback (most recent call last):
  File "<pyshell#123>", line 1, in <module>
    jQuery %{'other_id' : choice_id, 'text_id' : text_choice_id }
ValueError: unsupported format character ''' (0x27) at index 15 
```

转义单引号后：

```
>>> jQuery = ("$$(\'%(other_id)\').click(function() { "
                  "    if ($$(this).is(\':checked\')) { "
                  "        $$(\'%(text_id)\').show()     "
                  "    } "
                  "    else {"
                  "       $$(\'%(text_id)\').hide()"
                  "    }"
                  " });")
>>> jQuery %{'other_id' : choice_id, 'text_id' : text_choice_id }

Traceback (most recent call last):
  File "<pyshell#125>", line 1, in <module>
    jQuery %{'other_id' : choice_id, 'text_id' : text_choice_id }
ValueError: unsupported format character ''' (0x27) at index 15 
```

无法尝试`string.format()`，因为我在字符串中有括号。为什么我不断收到`'`一些不受支持的格式字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T23:09:50.593

您缺少格式化程序类型：

```
%(other_id)s 
```

注意`s`括号后面的；您想将值插入为字符串。这是一个工作版本：

```
jQuery = ("$('#%(other_id)s').click(function() { "
                  "    if ($(this).is(':checked')) { "
                  "        $('#%(text_id)s').show()     "
                  "    } "
                  "    else {"
                  "       $('#%(text_id)s').hide()"
                  "    }"
                  " });") 
```

美元符号在`%`-style 字符串格式中没有任何意义，我已经`#`为您添加了 id 选择器。:-)

就个人而言，我会改用`"""`三引号：

```
jQuery = """\
$('#%{other_id}s').click(function() {
    if ($(this).is(':checked')) {
        $('#%(text_id)s').show()
    }
    else {
        $('#%(text_id)s').hide()
    }
});
""" 
```

更好的是，无论如何将其放入 Jinja 模板中（因为您使用的是 Flask）并渲染它：

```
jquery = render_template('toggle_field.js', other_id=choice_id, text_id=text_choice_id) 
```

`toggle_field.js`jQuery 片段的 Jinja 模板版本在哪里：

```
$('#{{ other_id }}').click(function() {
    if ($(this).is(':checked')) {
        $('#{{ text_id }}').show()
    }
    else {
        $('#{{ text_id }}').hide()
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:02:18.590

考虑一种数据驱动的方法，而不是代码生成。静态定义以下两个函数，最好在所有 html 文件中包含的某个 js 文件中：

```
function toggle_if_checked(checkbox, toggleable) {
    var cbox = $(checkbox), tgl = $(toggleable);
    tgl.toggle(cbox.is(':checked'));
}

function register_check_show_events(elist) {
    var i, cboxselector, textselector;
    function handler(e) {
        toggle_if_checked(e.target, e.data);
    }
    for (i = 0; i < elist.length; i++) {
        cboxselector = '#'+elist[0];
        textselector = '#'+elist[1];
        $(cboxselector).on('click', null, textselector, handler);
    }
} 
```

然后注册您的事件处理程序，收集一个 Python id 列表并通过 JSON 将其提供给 javascript。

```
import json

ids = [('cboxid1','textboxid1'),('cboxid2','textboxid2')]
json_ids = json.dumps(ids)
script = 'register_check_show_events({});'.format(json_ids) 
```

一般来说，如果您只通过 JSON 在 Python 和 JS 层之间传递*数据*而不是动态生成 javascript 代码，那么您的代码将更干净且更易于维护。

# .htaccess - 允许链接到一个文件 htaccess

> ID：14697460
> 
> 赞同：0
> 
> 时间：2013-02-04T23:08:36.920
> 
> 标签：.htaccess

允许链接到一个文件。我有一个名为远程 myfile.php 的文件，我不断收到 403 禁止错误：

```
403 Forbidden

                                                   [1][content-logo.gif] 

   You are not allowed to access this page. Possible problems:
     * Missing index file
     * Misconfigured mod_rewrite settings in .htaccess
     * Authentication Failure
     * Incorrect file or folder permissions 
```

我尝试在我的 htaccess 中添加一个 RewriteCond，但它似乎不起作用： RewriteCond $1 !^MyFile.php$

```
# BEGIN Better WP Security
Options -Indexes

# Begin HackRepair.com Blacklist
RewriteEngine on
#Block comment spammers, bad bots and some proxies
RewriteCond %{REMOTE_HOST} 12.226.240.248 [OR]
RewriteCond %{REMOTE_HOST} 24.111.102.26 [OR]
RewriteCond %{REMOTE_HOST} 24.117.121.113 [OR]
RewriteCond %{REMOTE_HOST} 65.30.216.140 [OR]
RewriteCond %{REMOTE_HOST} 67.87.64.23 [OR]
RewriteCond %{REMOTE_HOST} 68.12.149.198 [OR]
RewriteCond %{REMOTE_HOST} 69.139.167.203 [OR]
RewriteCond %{REMOTE_HOST} 74.95.182.57 [OR]
RewriteCond %{REMOTE_HOST} 91.121.3.29 [OR]
RewriteCond %{REMOTE_HOST} 203.94.229.227 [OR]
RewriteCond %{REMOTE_HOST} 208.96.122.142 [OR]
RewriteCond %{REMOTE_HOST} 210.0.141.247 [OR]
RewriteCond %{REMOTE_HOST} 210.197.97.67 [OR]
RewriteCond %{REMOTE_HOST} 212.179.127.188 [OR]
RewriteCond %{REMOTE_HOST} 216.246.60.183 [OR]
RewriteCond %{REMOTE_HOST} 220.156.189.233 [OR]
RewriteCond %{REMOTE_HOST} 222.36.12.42 [OR]
# Abuse Agent Blocking
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Bolt\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot\@yahoo\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} CazoodleBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Custo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Default\ Browser\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^DIIbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^DISCo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} discobot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^eCatch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ecxi [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailCollector [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GetRight [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Grafula [NC,OR]
RewriteCond %{HTTP_USER_AGENT} GT::WWW [NC,OR]
RewriteCond %{HTTP_USER_AGENT} heritrix [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^HMView [NC,OR]
RewriteCond %{HTTP_USER_AGENT} HTTP::Lite [NC,OR]
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ia_archiver [NC,OR]
RewriteCond %{HTTP_USER_AGENT} IDBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} id-search [NC,OR]
RewriteCond %{HTTP_USER_AGENT} id-search\.org [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InterGET [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InternetSeer\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} IRLbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ISC\ Systems\ iRc\ Search\ 2\.1 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Java [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^JetCar [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^larbin [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} libwww [NC,OR]
RewriteCond %{HTTP_USER_AGENT} libwww-perl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Link [NC,OR]
RewriteCond %{HTTP_USER_AGENT} LinksManager.com_bot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} linkwalker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} lwp-trivial [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Maxthon$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} MFC_Tear_Sample [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^microsoft\.url [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Microsoft\ URL\ Control [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Missigua\ Locator [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla\.*Indy [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla\.*NEWT [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^MSFrontPage [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Navroad [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NearSite [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Nutch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Octopus [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [NC,OR]
RewriteCond %{HTTP_USER_AGENT} panscient.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^pavuk [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PECL::HTTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^PeoplePal [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PHPCrawl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PleaseCrawl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^psbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ReGet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Rippers\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} SBIder [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SeaMonkey$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^sitecheck\.internetseer\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Snoopy [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Steeler [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Toata\ dragostea\ mea\ pentru\ diavola [NC,OR]
RewriteCond %{HTTP_USER_AGENT} URI::Fetch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} urllib [NC,OR]
RewriteCond %{HTTP_USER_AGENT} User-Agent [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Web\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} webalta [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^[Ww]eb[Bb]andit [NC,OR]
RewriteCond %{HTTP_USER_AGENT} WebCollage [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Wells\ Search\ II [NC,OR]
RewriteCond %{HTTP_USER_AGENT} WEP\ Search [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Wget [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Widow [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WWW-Mechanize [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} zermelo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus\.*Webster [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ZyBorg [NC]
RewriteRule ^.* - [F,L]
# Abuse bot blocking rule end
order allow,deny
allow from all
# Start Custom Blocks
# Bluecoat
deny from 8.21.4.254
deny from 65.46.48.192/30
deny from 65.160.238.176/28
deny from 85.92.222.0/24
deny from 206.51.36.0/22
deny from 216.52.23.0/24
# cyveillance (already blocked 38.*)
deny from 38.100.19.8/29
deny from 38.100.21.0/24
deny from 38.100.41.64/26
deny from 38.105.71.0/25
deny from 38.105.83.0/27
deny from 38.112.21.140/30
deny from 38.118.42.32/29
deny from 65.213.208.128/27
deny from 65.222.176.96/27
deny from 65.222.185.72/29
# Cyberpatrol
deny from 38.103.17.160/27
# Internet Identity - Anti-Phishing
deny from 66.113.96.0/20
deny from 70.35.113.192/27
# Ironport
deny from 204.15.80.0/22
# Lightspeed Systems Security
deny from 66.17.15.128/26
deny from 69.84.207.32/27
deny from 69.84.207.128/25
# Layered Technologies
deny from 72.36.128.0/17
deny from 72.232.0.0/16
deny from 72.233.0.0/17
deny from 216.32.0.0/14
# M86
deny from 67.192.231.224/29
deny from 208.90.236.0/22
# McAfee-Secure-Computing
deny from 69.48.241.64/26
deny from 80.66.0.0/19
deny from 192.55.214.0/24
deny from 207.67.117.0/24
# Phish-Inspector.com
deny from 209.147.127.208/28
# Prescient Software, Inc. Phishmongers
deny from 198.186.190.0/23
deny from 198.186.192.0/23
deny from 198.186.194.0/24
# urlfilterdb
deny from 207.210.99.32/29
# websense-in.car1.sandiego1.level3.net
deny from 4.53.120.22
# Websense
deny from 66.194.6.0/24
deny from 67.117.201.128/28
deny from 69.67.32.0/20
deny from 131.191.87.0/24
deny from 204.15.64.0/21
deny from 208.80.192.0/21
deny from 212.62.26.64/27
deny from 213.168.226.0/24
deny from 213.168.241.0/30
deny from 213.168.242.0/30
deny from 213.236.150.16/28
# Yandex
deny from 77.88.0.0/18
deny from 77.88.22.0/23
deny from 77.88.24.0/21
deny from 77.88.24.0/22
deny from 77.88.28.0/22
deny from 77.88.36.0/23
deny from 77.88.42.0/23
deny from 77.88.44.0/24
deny from 77.88.50.0/23
deny from 87.250.224.0/19
deny from 87.250.230.0/23
deny from 87.250.252.0/22
deny from 93.158.128.0/18
deny from 93.158.137.0/24
deny from 93.158.144.0/21
deny from 93.158.144.0/23
deny from 93.158.146.0/23
deny from 93.158.148.0/22
deny from 95.108.128.0/17
deny from 95.108.128.0/24
deny from 95.108.152.0/22
deny from 95.108.216.0/23
deny from 95.108.240.0/21
deny from 95.108.248.0/23
deny from 178.154.128.0/17
deny from 178.154.160.0/22
deny from 178.154.164.0/23
deny from 199.36.240.0/22
deny from 213.180.192.0/19
deny from 213.180.204.0/24
deny from 213.180.206.0/23
deny from 213.180.209.0/24
deny from 213.180.218.0/23
deny from 213.180.220.0/23
# End HackRepair.com Blacklist
<files .htaccess>
Order allow,deny
Deny from all
</files>

<files readme.html>
Order allow,deny
Deny from all
</files>

<files readme.txt>
Order allow,deny
Deny from all
</files>

<files install.php>
Order allow,deny
Deny from all
</files>

<files wp-config.php>
Order allow,deny
Deny from all
</files>

<IfModule mod_rewrite.c>
RewriteEngine On

RewriteRule ^wp-admin/includes/ - [F,L]
RewriteRule !^wp-includes/ - [S=3]
RewriteCond %{SCRIPT_FILENAME} !^(.*)wp-includes/ms-files.php
RewriteRule ^wp-includes/[^/]+\.php$ - [F,L]
RewriteRule ^wp-includes/js/tinymce/langs/.+\.php - [F,L]
RewriteRule ^wp-includes/theme-compat/ - [F,L]

RewriteCond %{REQUEST_METHOD} ^(TRACE|DELETE|TRACK) [NC]
RewriteRule ^(.*)$ - [F,L]

RewriteCond %{QUERY_STRING} \.\.\/ [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(bash|git|hg|log|svn|swp|cvs) [NC,OR]
RewriteCond %{QUERY_STRING} etc/passwd [NC,OR]
RewriteCond %{QUERY_STRING} boot\.ini [NC,OR]
RewriteCond %{QUERY_STRING} ftp\:  [NC,OR]
RewriteCond %{QUERY_STRING} http\:  [NC,OR]
RewriteCond %{QUERY_STRING} https\:  [NC,OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|%3D) [NC,OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(\[|\]|\(|\)|<|>|ê|"|;|\?|\*|=$).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(&#x22;|&#x27;|&#x3C;|&#x3E;|&#x5C;|&#x7B;|&#x7C;).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%24&x).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%0|%A|%B|%C|%D|%E|%F|127\.0).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(globals|encode|localhost|loopback).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(request|select|concat|insert|union|declare).* [NC]
RewriteCond %{QUERY_STRING} !^loggedout=true
RewriteCond %{QUERY_STRING} !^action=rp
RewriteCond %{HTTP_COOKIE} !^.*wordpress_logged_in_.*$
RewriteCond %{HTTP_REFERER} !^http://maps\.googleapis\.com(.*)$
RewriteRule ^(.*)$ - [F,L]

RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^MyFile\.php$

RewriteRule . /index.php [L]

</IfModule>
# END Better WP Security

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^MyFile\.php$
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:19:57.353

正在使用 linux 上名为 lynx 的程序进行调用。原来 mod security 出于某种原因阻止了这种情况！

# c# - 在 XNA 中使用 ShareLinkTask 时阻止用户更改消息

> ID：14697464
> 
> 赞同：1
> 
> 时间：2013-02-04T23:09:11.563
> 
> 标签：c#, xna, windows-phone

好的，所以这是一个非常简单的问题，但是我无法仅使用 Google 找到答案，有人知道我是否可以在使用 ShareLinkTask 在 Windows Phone 中发布社交更新时将消息框变灰，这样玩家就不会假装高分数？这是我当前的代码：

```
ShareLinkTask shareLinkTask = new ShareLinkTask();

shareLinkTask.Title = "New Highscore in X";
shareLinkTask.LinkUri = new Uri("http://google.com", UriKind.Absolute);
shareLinkTask.Message = "Testing. Testing. 1, 2, 3...";

shareLinkTask.Show(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:33:09.833

没有办法使用该功能来做到这一点。这些 *Task 对话框的目的是让用户控制，以便他们对发布的内容拥有最终的发言权并可以取消。如果您想直接发布到 Facebook 而无需用户修改文本，您需要直接使用 Facebook API 并注册您的应用并专门为您的应用设置自己的身份验证...

彼得

# mysql - Laravel 4 和 MySQL：需要 LIKE 策略和 DB::select 不起作用

> ID：14697470
> 
> 赞同：0
> 
> 时间：2013-02-04T23:09:36.910
> 
> 标签：mysql, laravel, laravel-4

我有一张桌子，里面满是想和我们做生意的人的线索。我还有一张垃圾邮件术语表。我需要过滤来自潜在客户的垃圾邮件。我在 Laravel 4 中这样做。我在想这样的事情：

```
$spam_terms = SpamTerms::all();

$sm = '"SELECT * FROM all_forms_send_message';
foreach ($spam_terms as $spam) {
    if ($spam->id == 1) {
            $sm .= ' WHERE GeneralNotes NOT LIKE ' . $spam->term  . ' ';
    } else {
            $sm .= ' AND WHERE GeneralNotes NOT LIKE ' . $spam->term  . ' ';
    }
}
$sm .= '"';
// echo $sm;
return DB::select(DB::raw($sm)); 
```

首先，这是行不通的。它在最后一行引发错误。该语句构建得很好并且`echo`正确。

其次，这是将线索与垃圾邮件表匹配的最佳方式吗？随着垃圾邮件表的增长，可能会有数百个 where 子句。有更好的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:24:22.607

警告：前面有未经测试的代码...

如果您要使用查询生成器，请在整个过程中使用它。

```
$query = DB::table('all_forms_send_message);
foreach ($spam_terms as $spam) {
    $query = $query->where('GeneralNotes','like',"%".$spam->term."%");
}
return $query->get(); 
```

看到所有数据库方法“未链接”有点不寻常，但它们以这种方式工作得很好。在这里，您要选择表，添加所有 where 子句，最后告诉查询运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:19:17.290

我会去掉 if 语句第二部分中的“AND WHERE”，并用“AND”替换它

在不了解该问题的更多信息（例如错误消息）的情况下，这似乎是最明显的语法问题。

编辑：要回答更大的问题，我认为这不是最好的方法。我会让专家来讨论这部分，但我可能会加载所有记录和所有垃圾邮件规则，并在数据库查询之后进行过滤。SQL 不擅长全文搜索、IME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:47:12.917

我认为你不能这样做：

`DB::select(DB::raw($sm));`

尝试将其更改为：

`DB::raw($sm);`

另外，为什么你的sql语句中有双引号？

# php - 这是 preg_replace 可利用的吗？

> ID：14697473
> 
> 赞同：-7
> 
> 时间：2013-02-04T23:09:52.577
> 
> 标签：php, code-injection, exploit

我正在寻找利用这个 preg_replace 调用：

```
$str = preg_replace($pattern, '__', $str); 
```

我可以控制 $str 和 $pattern 变量，但我不确定这是否足以注入任意 PHP 代码。有什么想法？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:15:15.160

`preg_replace`仅在使用`e`修饰符时才可利用。这意味着`$replacement`字符串被评估为 PHP 代码。由于您无法让`$replacement`远程用户更改它，因此它不容易受到攻击。

# c# - 仅允许文本框中的数字 C#

> ID：14697476
> 
> 赞同：1
> 
> 时间：2013-02-04T23:10:13.963
> 
> 标签：c#, textbox, digits

> **可能重复：**
> [如何只允许在 TextBox 中输入 0 或 1？](https://stackoverflow.com/questions/2882369/how-can-i-allow-only-0-or-1-to-be-entered-in-a-textbox)
> [仅允许在 TextBoxes 中使用整数](https://stackoverflow.com/questions/11656217/allow-only-integers-in-textboxes)

我现在正在开发一个程序，我有一些简单的`textboxes`. 当输入不是数字时，我不断收到错误`textbox`，因为它试图将其转换为整数。

代码非常基本：

```
 int optelNumber = Convert.ToInt32(textBox2.Text);
    MessageBox.Show("Please enter a digit."); //if optelNumber is not a digit 
```

例如：

```
input in textbox = "Hello !" => pops up the Mess.Box
input in textbox = 123245 => keep running the program 
```

希望这是足够的信息。我搜索了几乎所有其他主题，但所有代码对我来说都是高级的。：（ 谢谢你的时间

*   编辑 ：

这`messagebox`是为了捕捉错误并防止程序崩溃。

*   编辑 ：

    ```
    int vedett = 0, duvel = 0, kDuvel = 0, kriek = 0, pils = 0;

    //only digits allowed here
    int optelNumber = Convert.ToInt32(textBox2.Text);

    switch(comboItem)
    {
    case "vedett":
      vedett += optelNumber;
      break;
    case "duvel":
      duvel += optelNumber;
      break;
    case "kl. duvel":
      kDuvel += optelNumber;
      break;
    case "pils":
      pils += optelNumber;
      break;
    case "kriek":
      kriek += optelNumber;
      break;
    case "":
      MessageBox.Show("Kies een andere drank.");
      break;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:13:21.617

你需要做一个`int.TryPase`

```
 int result;
    if (int.TryParse(textBox2.Text, out result))
      int optelNumber = Convert.ToInt32(textBox2.Text); 
```

或者

```
int result;
int optelNumber; 
        if (int.TryParse(textBox2.Text, out result))
          optelNumber  = result; 
```

# storyboard - 来自 appDelegate 的 pushViewController - 问题

> ID：14697477
> 
> 赞同：1
> 
> 时间：2013-02-04T23:10:23.947
> 
> 标签：storyboard, pushviewcontroller, appdelegate, tabbed

我在互联网上搜索了堆栈溢出，但仍然无法解决这个问题。

它是一个选项卡式应用程序模板。

当应用程序未运行并收到推送通知时，我想从中读取 launchOptions 的内容

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`我通过解析 JSON 数据等...

然后我想在故事板上的单独视图上显示它。

我读过一些帖子要做：

`UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; DetailViewController *ivc = [storyboard instantiateViewControllerWithIdentifier:@"Detail"]; [(UINavigationController*)self.window.rootViewController pushViewController:ivc animated:NO];`

但这给了我

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UITabBarController pushViewController:animated:]：无法识别的选择器发送到实例 0x1c5a0c20”

当应用程序在后台运行并接收来自的推送时

`- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)notification`我打电话`[[NSNotificationCenter defaultCenter] postNotificationName:@"receivedPushNotification" object:self];`

它告诉当前正在显示的任何视图

`detail = [self.storyboard instantiateViewControllerWithIdentifier:@"Detail"]; [self.navigationController pushViewController:detail animated:YES];`

效果很好。

问题是应用程序首次启动时没有加载这些视图，因此我需要一种方法将详细视图控制器从 appDelegate 放在用户屏幕上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T09:05:18.443

我假设您的故事板设置为“mainstoryboard”（Info.plist 中的关键 UIMainStoryboardFile）。在这种情况下，UIKit 将加载故事板并将其初始视图控制器设置为窗口的根视图控制器，然后将 application:didFinishLaunchingWithOptions: 发送到您的AppDelegate.I 还假设情节提要中的初始视图控制器是导航控制器，您希望在其上推送主视图或登录视图控制器。

您可以向窗口询问其根视图控制器，并向其发送 performSegueWithIdentifier:sender: 消息：

```
NSString *segueId = success ? @"pushMain" : @"pushLogin";
[self.window.rootViewController performSegueWithIdentifier:segueId sender:self]; 
```

# java - Java-WS 解组错误：意外元素“xyz。预期元素是”

> ID：14697487
> 
> 赞同：0
> 
> 时间：2013-02-04T23:11:38.060
> 
> 标签：java, web-services, jaxb, java-ws

我有一个 Java Web 服务客户端与远程 .Net SOAP Web 服务通信。我需要将原始 XML 替换为参数之一，而不是打包和解包相应的 JAXB Java 对象。

问题：

1.  我选择使用“javax.xml.bind.Unmarshaller”来插入原始 XML。（我不知道是否有另一种更好的方法）。

2.  如果我使用 JAXB，我验证了调用是否有效，并记录了 SOAP 请求消息（见下文）。

3.  `WS error: Unexpected element "requestOptions". Expected elements are "".`当我尝试直接添加 XML 时，我得到了。

WORKING JAVA CLIENT（返回有效的“RequestOptions”JAXB 对象）：

```
private RequestOptions mkRequestOptions () throws Exception {
  RequestOptions requestOptions = new com.mypackage.shwsclients.ObjectFactory().createRequestOptions ();
  requestOptions.setTransactionId("007");
  requestOptions.setUserName("testName");
  requestOptions.setWorkflowName("testWorkflow");
  requestOptions.setModuleName("testModule");
  return requestOptions;
} 
```

FAILING JAVA CLIENT（尝试解组 XML 字符串失败）：

```
private static String theXml = 
  "<requestOptions>\n" +
  "  <WorkflowName>unmarshalTestWorkflow</WorkflowName>\n" +
  "  <ModuleName>unmarshalTestModule</ModuleName>\n" +
  "  <UserName>unmarshalTestName</UserName>\n" +
  "  <TransactionId>0099</TransactionId>\n" +
  "</requestOptions>\n";

private RequestOptions mkRequestOptions () throws Exception {
  JAXBContext context = JAXBContext.newInstance(RequestOptions.class);
  Unmarshaller unmarshaller = context.createUnmarshaller();
  Object obj = unmarshaller.unmarshal(new StringReader (theXml));  // DIES HERE!!!!
  RequestOptions requestOptions = (RequestOptions)obj;
  return requestOptions;
} 
```

成功的 SOAP 请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <GetAddressData xmlns="http://myservice.com/wsdl/myservice">
      <requestOptions>
        <WorkflowName>testWorkflow</WorkflowName>
        <ModuleName>testModule</ModuleName>
        <UserName>testName</UserName>
        <TransactionId>007</TransactionId>
      </requestOptions>
      <zipCode>90210</zipCode>
    </GetAddressData>
  </soapenv:Body>
</soapenv:Envelope> 
```

自动生成的代理代码：

```
//
// Generated By:JAX-WS RI 2.2.4-b01 (JAXB RI IBM 2.2.4)
//
package com.mypackage;

import java.io.Serializable;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;
...

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "RequestOptions", propOrder = {
    "workflowName",
    "moduleName",
    "userName",
    "transactionId"
})
public class RequestOptions
    implements Serializable
{

    @XmlElement(name = "WorkflowName")
    protected String workflowName;
    @XmlElement(name = "ModuleName")
    protected String moduleName;
    @XmlElement(name = "UserName")
    protected String userName;
    @XmlElement(name = "TransactionId")
    protected String transactionId;
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:09:16.503

问题已解决。

解决方案是将所有参数放入 XML，然后解组整个消息。

我以为我能够解开一个论点。相反，我需要解组整个消息 - 类 JAXB 注释为“@XmlRootElement”。

# c# - ActionLink 中的 Razor 变量

> ID：14697488
> 
> 赞同：3
> 
> 时间：2013-02-04T23:11:50.363
> 
> 标签：c#, asp.net-mvc, razor

我有一个 CSS 类值的变量，该变量分配给视图中的变量：

```
string aboutLinkClass = "normalLink"; 
```

这可以根据上下文而改变。稍后在视图中我调用 Html.ActionLink 并且我需要使用该变量，但以下无法产生所需的输出：

```
@Html.ActionLink("About", "Index", "about", null, new {@class="@aboutLinkClass"}) 
```

它将@aboutLinkClass 视为静态文本。所以它产生：

```
<a class="@aboutLinkClass" href="/about">About</a> 
```

相反，我希望它产生：

```
<a class="normalLink" href="/about">About</a> 
```

我需要使用什么语法来正确传递它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:15:19.793

试试这个：

```
@Html.ActionLink("About", "Index", "about", null, new {@class = aboutLinkClass}) 
```

当您`"@aboutLinkClass"`实际上想要传递`String`名为`aboutLinkClass`.

# android - 通过 USB 连接我的 Android 手机时发生了奇怪的事情

> ID：14697490
> 
> 赞同：0
> 
> 时间：2013-02-04T23:12:02.697
> 
> 标签：android, eclipse, usb

所以我正在为 Android 开发，并试图在我的手机上运行一些应用程序，而不是使用模拟器。我正在运行 Windows XP（woot）并拥有摩托罗拉 Droid RAZR M。当我将手机连接到计算机时，它首先会中断我的互联网连接，因此计算机无法看到任何可用的网络。此外，除非关闭 USB 调试，否则计算机将无法识别手机，所以如果没有它，我应该如何测试应用程序！

当 USB 调试选项关闭时，一切都很好，而且计算机将其视为媒体设备，但是当 USB 调试打开时，它不再将其视为同一部手机并尝试搜索新硬件。那么我需要下载不同的 USB 驱动程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:20:21.977

可能是因为手机安装在网络共享模式下，电脑认为手机是互联网来源。检查无线和网络下的设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:15:53.943

对我来说，我必须为我的手机下载确切的驱动程序，我有一个 Galaxy Nexus。我能够从制造商那里找到适用于您手机的此链接，但您可能已经尝试过。

[https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)

# javascript - 使用 D3 画笔进行细粒度事件处理

> ID：14697495
> 
> 赞同：11
> 
> 时间：2013-02-04T23:12:36.720
> 
> 标签：javascript, events, svg, d3.js

我有一个使用 D3 生成的散点图。图上的点（SVG 圆圈）可以通过单击它们来选择，并且可以使用 D3 画笔来选择区域。

为了确保圆圈获得点击事件，我需要先创建画笔，以便圆圈在其上方。不幸的是，这意味着当我的光标位于绘图中的某个点上时，我无法拖动以创建画笔范围。

有没有办法将悬停和单击事件传递给圆圈，但用画笔处理与拖动相关的事件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T02:38:29.897

它可以通过[使用 D3 画笔 API](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush_extent)来完成（参见下面的注释）。

这是一个示例[http://bl.ocks.org/4747894](http://bl.ocks.org/4747894)，其中：

1.  `brush`元素在圆圈*后面*
2.  圈子响应`mousedown`事件。（也可以响应其他事件。）
3.  `brush`即使从其中一个圆圈内开始拖动，该元素也表现良好。

一些跟踪和查看[D3 源代码](https://github.com/mbostock/d3/blob/master/src/svg/brush.js#L107)表明，当从画笔顶部的元素触发事件`extent`时，没有正确重置。这可以通过在元素的侦听器中重置画笔来修复：`mousemove``circle``extent``mousedown``circle`

```
 circles.on("mousedown", function (d, i) {
            // _svg_ is the node on which the brush has been created
            // x is the x-scale, y is the y-scale
            var xy = d3.mouse(svg.node()),
                xInv = x.invert(xy[0]),
                yInv = y.invert(xy[1]);

            // Reset brush's extent
            brush.extent([[xInv, yInv], [xInv, yInv]]);

            // Do other stuff which we wanted to do in this listener
        }); 
```

* * *

**注意：** [根据 API](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush_extent)，画笔的选择**不会**在调用时自动刷新`.extent(values)`。仅单击一个圆圈将重置`extent`但不会重绘所做的选择。`circle`仅当在 内启动不同的选择，或通过单击圆圈和当前选择的外部时，才会丢弃选择。*正如我从问题中所理解的那样，这是所需的行为*。但是，这可能会破坏编写的代码，假设`extent`画笔的任何内容都是图表上可见的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-09T08:27:25.517

使用`[selection.on](https://github.com/mbostock/d3/wiki/Selections#wiki-on)`：http: [//jsfiddle.net/NH6zD/1](http://jsfiddle.net/NH6zD/1)

```
var target,
    dimensions = {width: 200, height: 200},
    svg = d3.select("body").append("svg").attr(dimensions),
    rect = svg.append("rect").attr(dimensions); // Must be beneath circles 
svg
  .on("mousedown", function() {
      target = d3.event.target || d3.event.srcElement;
      if ( target === rect.node() ) {
          /* Brush */
      } else {
          /* Circle */
      }
  })
  .on("mousemove", function() {
      if (!target) return;
      if ( target === svg.rect() ) {
          /* Brush */
      } else {
          var mouse = d3.mouse(svg.node());
          target.attr({x: mouse[0], y: mouse[1]});
      }
  });
(function(exit) {
    for (var i in exit) svg.on(exit[i], function() { target = undefined; });
})(["mouseout", "mouseup"]); 
```

# c# - 使用 ASP.Net Webapi 流式传输大图像

> ID：14697497
> 
> 赞同：17
> 
> 时间：2013-02-04T23:13:05.593
> 
> 标签：c#, asp.net-web-api, download, streaming, large-files

我们正在尝试使用 ASP.Net WebApi 返回大图像文件，并使用以下代码将字节流式传输到客户端。

```
public class RetrieveAssetController : ApiController
{
    // GET api/retrieveasset/5
    public HttpResponseMessage GetAsset(int id)
    {
        HttpResponseMessage httpResponseMessage = new HttpResponseMessage();
        string filePath = "SomeImageFile.jpg";

        MemoryStream memoryStream = new MemoryStream();

        FileStream file = new FileStream(filePath, FileMode.Open, FileAccess.Read);

        byte[] bytes = new byte[file.Length];
        file.Read(bytes, 0, (int)file.Length);

        memoryStream.Write(bytes, 0, (int)file.Length);

        file.Close();

        httpResponseMessage.Content =  new ByteArrayContent(memoryStream.ToArray());
        httpResponseMessage.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        httpResponseMessage.StatusCode = HttpStatusCode.OK;

        return httpResponseMessage;
    }
} 
```

上面的代码工作正常，但我们处理的一些文件可能是 2 GB 或更大的大小，导致连接超时。我们过去曾使用类似于下面的代码（使用 HttpHandlers）将响应分块到响应流，以保持连接成功。

```
byte[] b = new byte[this.BufferChunkSize];
int byteCountRead = 0;

while ((byteCountRead = stream.Read(b, 0, b.Length)) > 0)
{
    if (!response.IsClientConnected) break;

    response.OutputStream.Write(b, 0, byteCountRead);
    response.Flush();
} 
```

我们如何使用前面展示的新 WebAPI 编程模型来使用类似的技术？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T23:59:55.793

是的，您可以使用`PushStreamContent`. 如果你将它与异步执行（使用即异步 lambdas）结合起来，你可能会得到更有效的结果。

本月早些时候，我在博客中介绍了这种方法 - [http://www.strathweb.com/2013/01/asynchronously-streaming-video-with-asp-net-web-api/](http://www.strathweb.com/2013/01/asynchronously-streaming-video-with-asp-net-web-api/)。

该示例使用了视频文件，原理相同 - 将字节数据下推到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T19:25:49.080

使用`StreamContent`（太新？）直接从文件中流式传输。类似于[Web API Controller 将 MemoryStream 转换为 StreamContent](https://stackoverflow.com/questions/37035606/web-api-controller-convert-memorystream-into-streamcontent)

```
httpResponseMessage.Content = new StreamContent(file); 
```

# xslt - 桌子

> ID：14697500
> 
> 赞同：0
> 
> 时间：2013-02-04T23:13:18.217
> 
> 标签：xslt, foreach, html-table

我尝试在表格中输出这 2 个食谱，但我不能，它只首先显示给我。如何在表格中输出两个食谱

这是我的xml：

```
<region id="southwest">
        <name>Southwest</name>
        <recipe id="1" author="" kitchen="en" origin="en">  
            <title>Chicken Fiesta Salad</title>
            <type>main</type>
            <difficulty>middle</difficulty>
            <time>90 min.</time>
            <portions>8</portions>
        </recipe>
        <recipe id="2" author="" kitchen="en" origin="en">  
            <title>Cupcakes</title>
            <type>dessert</type>
            <difficulty>hard</difficulty>
            <time>60 min.</time>
            <portions>8</portions>
        </recipe>       
    </region> 
```

蚂蚁这是我的 xsl：

```
<table border="1">
    <tr>
      <th>Title</th>
      <th>Region</th>
      <th>Type</th>
      <th>Difficulty</th>
      <th>Time</th>
      <th>Portions</th>
    </tr>
<xsl:for-each select="region">
    <tr>
      <td><xsl:value-of select="recipe/title"/></td>
      <td><xsl:value-of select="name"/></td>
      <td><xsl:value-of select="recipe/type"/></td>
      <td><xsl:value-of select="recipe/difficulty"/></td>
      <td><xsl:value-of select="recipe/time"/></td>
      <td><xsl:value-of select="recipe/portions"/></td>
      </tr>
</xsl:for-each>
</table> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:27:15.857

您需要`for-each`覆盖配方元素而不是区域元素

```
<xsl:for-each select="region/recipe"> 
```

并适当调整您的 xpath 表达式，例如

```
 <td><xsl:value-of select="title"/></td>
  <td><xsl:value-of select="../name"/></td> 
```

# objective-c - NSManagedObject 子类的意外自定义初始化方法行为

> ID：14697511
> 
> 赞同：0
> 
> 时间：2013-02-04T23:14:20.977
> 
> 标签：objective-c, core-data, restkit

我想以简单的方式创建 NSManagedObject 的子类的实例：`Library *library = [[Library alloc] init]`所以我`init`像这样覆盖了方法。

```
- (instancetype)init
{

    NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] 
                               initWithConcurrencyType:NSMainQueueConcurrencyType];
    managedObjectContext.parentContext = [RKManagedObjectStore 
                                      defaultStore].mainQueueManagedObjectContext;

   NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Library" 
                                       inManagedObjectContext: managedObjectContext];

   self = [super initWithEntity:entityDescription  
                  insertIntoManagedObjectContext:managedObjectContext];

   return self;
} 
```

在一个视图中，我创建了一个新实例，`Library *library = [[Library alloc] init]`这工作得很好。现在我需要向与它有关系的对象添加一个`Book`对象。`Library`所以一个新的`Book`实例应该`managedObjectContext`和它的父实例相同—— `Library`。要正确实例化`Book`，我需要获取`Library`'s managedObjectContent:`[library managedObjectContent]`回馈`nil`。几个小时后，我有一个解决方法：

```
- (instancetype)init
{

    NSManagedObjectContext *managedObjectContext = [GTObjectManager newManagedObjectContext];

   NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"City" 
                                       inManagedObjectContext: managedObjectContext];

   self =  [super initWithEntity:entityDescription  
                  insertIntoManagedObjectContext:managedObjectContext];

   return self;
} 
```

在 GTObjectManager 中，我的代码与旧的 init 方法中的代码相同：

```
+ (NSManagedObjectContext *)newManagedObjectContext
{
    NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] 
                               initWithConcurrencyType:NSMainQueueConcurrencyType];
    managedObjectContext.parentContext = [RKManagedObjectStore 
                                      defaultStore].mainQueueManagedObjectContext;
   return managedObjectContext;
} 
```

现在实例化`Library *library = [[Library alloc] init]`调用`[library managedObjectContext]`返回 not之后`nil`。所以澄清一下：如果`managedObjectContext`在`init`方法中创建，实例化后我无法得到它。如果在方法`managedObjectContent`之外创建`init`，我可以在实例化后得到它。

我无法解释这种行为。它是一种`init`方法的行为吗？我正在使用 ARC，它是某种 ARC 行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:33:39.200

***在您的第一个*** `init`函数中，您创建一个本地`managedObjectContext`对象并使用它来创建托管对象。*托管对象不保留其上下文*，因此`managedObjectContext`是对该对象的唯一强引用。ARC 在函数末尾添加代码来释放这个引用，因为它是唯一的引用，所以托管对象上下文被释放。

如果您将以下代码添加到您的`init`函数（在 之后`self = [super initWithEntity:...]`），您可以观察到这种行为：

```
NSLog(@"%@", [self managedObjectContext]);
// Output: <NSManagedObjectContext: 0x100134a00>
managedObjectContext = nil;
NSLog(@"%@", [self managedObjectContext]);
// Output: (null) 
```

如您所见，`nil`如果上下文已被释放，则向托管对象询问其上下文会返回。

***在您的第二个*** `init`函数中，应该会发生完全相同的情况，并且我在测试程序中观察到完全相同的行为。但这取决于如何调用返回新上下文的实用方法。

在您的代码示例中，它被称为`newManagedObjectContext`. 以 开头的方法`new...`返回一个*保留*对象，并在 init 函数结束时释放。`init`因此，您的两个功能之间应该没有区别。

但是，如果调用了实用方法 eg `getManagedObjectContext`，那么它会返回（粗略地说）一个*自动释放*的对象。这个对象可能存在的时间更长，直到当前的自动释放池被销毁。

也许这解释了为什么如果上下文是在实用程序方法中创建的，您的代码似乎可以工作。

***结论：***如果您以后需要对象，创建本地临时上下文来创建对象是没有意义的。托管对象存在于上下文中，如果上下文被销毁，您将无法再使用这些对象。

您必须首先决定要使用哪个上下文，然后在该上下文中创建对象及其关系。

# javascript - 我可以在引导弹出窗口中放置一个链接吗？

> ID：14697515
> 
> 赞同：3
> 
> 时间：2013-02-04T23:14:49.493
> 
> 标签：javascript, jquery, twitter-bootstrap

我想做这样的事情：

```
 $('.UofTennesseeKnox').popover({
    'selector': '',
    'placement': 'bottom',
    'title': '<a href="home.html">University of Tennessee-Knoxville</a>',
    'content': 'Facilities Services Department 2233 Volunteer Boulevard, Room 203 Knoxville, TN 37996-3010',
  }); 
```

但 'title' 的整个值出现在页面上，包括标签。有没有一种简单的方法可以做到这一点，还是我需要使用不同的弹出框脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:19:19.460

```
 $('.UofTennesseeKnox').popover({
        'selector': '',
        'placement': 'bottom',
        'title': '<a href="home.html">University of Tennessee-Knoxville</a>',
        'content': 'Facilities Services Department 2233 Volunteer Boulevard, Room 203 Knoxville, TN 37996-3010',
        'html': 'true'
      }); 
```

呃……

# javascript - 动态创建函数名

> ID：14697522
> 
> 赞同：0
> 
> 时间：2013-02-04T23:15:37.930
> 
> 标签：javascript

> **可能重复：**
> [javascript中的动态函数名称？](https://stackoverflow.com/questions/5905492/dynamic-function-name-in-javascript)

我想实现以下结果。有人可以告诉我如何。基本上名称是动态的。

```
 var name =  'tab'+ ID;    
name(tab); 
```

到目前为止，尝试了一些效果很好的东西。这是一种很好的做法，否则有人可以提出另一种方法。

```
var function_name  =  't'+ ID; 
if (typeof(window[function_name]) === "function")
{
    window[function_name](tab);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:19:34.800

我首先创建一个对象来存储您的函数：

```
var funcs = {}; 
```

然后你可以只使用括号表示法：

```
var id = '001';

funcs['tab'+ id] = function(tab) {

};

funcs.tab001(tab);
// or if you have special chars...
funcs['tab001'](tab); 
```

# matlab - Matlab条形图中的图例

> ID：14697525
> 
> 赞同：5
> 
> 时间：2013-02-04T23:15:47.760
> 
> 标签：matlab, plot, legend

如何在 Matlab 的条形图中绘制图例？这是代码：

```
Y = [1.5056
0.72983
3.4530
3.2900
1.4839
12.9 ];
n = length(Y);
h = bar(Y);
colormap(summer(n));
grid on

l = cell(1,6);
l{1}='L'; l{2}='B'; l{3}='R'; l{4}='P'; l{5}='h'; l{6}='Ri';    
legend(h,l); 
```

这给出了一个错误：*警告：忽略额外的图例条目。*我尝试了在[SO](http://stackoverflow.com)和 web 上找到的解决方案，但我无法解决这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T23:19:32.283

代替图例，您可以使用刻度标签来解决它，例如：

```
set(gca,'xticklabel', l) 
```

![在此处输入图像描述](../Images/e4fa24049b72d4bcba5c32556622d787.png)

这将标记每个条。如果你想使用`legend`你需要有一个矩阵数据，所以条形图将显示每个条目几个条形图。例如

```
Y=rand(10,6)
h = bar(Y);
colormap(summer(n));
grid on
l = cell(1,6);
l{1}='L'; l{2}='B'; l{3}='R'; l{4}='P'; l{5}='h'; l{6}='Ri';    
legend(h,l); 
```

![在此处输入图像描述](../Images/24d790abef2cd197d7f777ff6cb3a6d7.png)

或者，您可以通过`bar()`这种方式使用不同的调用：

```
h = bar(diag(Y)); 
```

但是你会得到每个条的位移：

![在此处输入图像描述](../Images/cf31fe5f2e7142ddce9f70a0ae4c466b.png)

所以，真正做到这一点的唯一方法是单独`legend`绘制每个`bar`，类似于[这里](http://www.mathworks.com/matlabcentral/answers/176)讨论的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T15:16:00.087

除了 bla 的回答，您可以使用

```
h = bar(diag(Y),'stacked'); 
```

如果你想避免位移。

# mysql - 单个 SQL 使用不同的 where 子句获得多个计数，这可能吗？

> ID：14697527
> 
> 赞同：5
> 
> 时间：2013-02-04T23:16:05.317
> 
> 标签：mysql, sql, count, where-clause

我有一张如下表，

```
+-----+--------+-----------+----------+
| id  | type_id| product_id| date     |
+-----+--------+-----------+----------+
|  1  |   1    |   300     |22/01/2013|
|  2  |   1    |   800     |22/01/2013|
|  3  |   1    |   400     |30/01/2013|
|  4  |   1    |   300     |05/02/2013|
|  5  |   5    |   300     |27/02/2013|
|  6  |   1    |   300     |28/02/2013|
|  7  |   3    |   400     |12/03/2013|
|  8  |   5    |   400     |02/03/2013|
|  9  |   1    |   300     |06/03/2013|
| 10  |   1    |   400     |06/03/2013|
| 11  |   5    |   400     |06/03/2013|
| 12  |   1    |   400     |08/03/2013| 
```

假设我想按月和年计算每个产品组的每种类型，这可能吗？我追求的输出应该类似于以下..

```
+-----------+------------+-------------+------------+------+------+
|product_id |count_type_1|count_type_3 |count_tyep_5| month| year |
+-----------+------------+-------------+------------+------+------+
| 300       |     1      |      0      |     0      |   01 | 2013 |
| 800       |     1      |      0      |     0      |   01 | 2013 |
| 400       |     1      |      0      |     0      |   01 | 2013 |
| 300       |     2      |      0      |     1      |   02 | 2013 |
| 300       |     1      |      0      |     0      |   03 | 2013 |
| 400       |     2      |      1      |     2      |   03 | 2013 | 
```

这可以使用单个 SQL 来实现吗？

PS：这是在MYSQL服务器上

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T23:25:34.010

您可以使用以下内容来*透视*使用聚合函数和`CASE`表达式来创建每一列的数据：

```
select 
  product_id,
  sum(case when type_id=1 then 1 else 0 end) count_type_1,
  sum(case when type_id=2 then 1 else 0 end) count_type_2,
  sum(case when type_id=3 then 1 else 0 end) count_type_3,
  sum(case when type_id=4 then 1 else 0 end) count_type_4,
  sum(case when type_id=5 then 1 else 0 end) count_type_5,
  month(date) month,
  year(date) year
from yourtable
group by product_id, month(date), year(date) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/2151d/1)

这给出了结果：

```
| PRODUCT_ID | COUNT_TYPE_1 | COUNT_TYPE_2 | COUNT_TYPE_3 | COUNT_TYPE_4 | COUNT_TYPE_5 | MONTH | YEAR |
--------------------------------------------------------------------------------------------------------
|        300 |            1 |            0 |            0 |            0 |            0 |     1 | 2013 |
|        300 |            2 |            0 |            0 |            0 |            1 |     2 | 2013 |
|        300 |            1 |            0 |            0 |            0 |            0 |     3 | 2013 |
|        400 |            1 |            0 |            0 |            0 |            0 |     1 | 2013 |
|        400 |            2 |            0 |            1 |            0 |            2 |     3 | 2013 |
|        800 |            1 |            0 |            0 |            0 |            0 |     1 | 2013 | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T23:25:44.507

```
SELECT
  product_id,
  COUNT(CASE WHEN type_id=1 THEN 1 END) count_type_1,
  COUNT(CASE WHEN type_id=2 THEN 1 END) count_type_2,
  COUNT(CASE WHEN type_id=3 THEN 1 END) count_type_3,
  COUNT(CASE WHEN type_id=4 THEN 1 END) count_type_4,
  COUNT(CASE WHEN type_id=5 THEN 1 END) count_type_5,
  MONTH(date) month,
  YEAR(date) year
FROM
  products
GROUP BY
  product_id,
  MONTH(date),
  YEAR(date) 
```

# java - 命令行上是否有 Java API 查看器，例如用于 c 的 man 和用于 ruby 的 ri？

> ID：14697528
> 
> 赞同：17
> 
> 时间：2013-02-04T23:16:09.823
> 
> 标签：java, linux, bash, documentation

命令行上有 Java API 查看器吗？

我一直在使用`man`C 编程和`ri`Ruby 编程。它们对我来说似乎都很方便，现在我正在为 Java API 寻找类似的东西。

如果之前有人提出过这个问题，我深表歉意。我做了很多谷歌搜索，但没有结果显示。我想我可能使用了错误的术语。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T16:54:04.783

作为 JDK 的一部分，您还将收到 javap 实用程序，该实用程序允许您查看 java .class 文件中的方法签名。

```
javap myClass 
```

对于 java API，您可以使用

```
javap java.lang.Integer 
```

如果您是 vi 狂热者，请使用此调整来查看光标下类的方法签名，并在您的 ~/.vimrc 中添加以下内容。

```
let $jre='/cygdrive/c/jdk1.6.0_21/jre'  
map tt yy:tabnew ^R^W^M  
map + tt:set ft=java^M!!javap -public `grep .*%$ $jre/lib/classlist`^M 
```

1.  ^M 之类的插入符号前面的字符需要使用 Ctrl+V 然后 Ctrl+M 键入
2.  javap 需要在您的系统路径中
3.  使用您自己的 jre 位置代替它
4.  最后，由于这是使用 cygwin 测试的，您可能需要做一些修饰

另一种方法是使用基于文本的浏览器。请参阅： [从 Vim 查找 javadoc 帮助文件 [仅限 Unix]](http://www.vim.org/scripts/script.php?script_id=801 "从 Vim 中查找 javadoc 帮助文件")

# javascript - iOS Javascript：如何知道我的应用程序在终止后是否打开？

> ID：14697533
> 
> 赞同：0
> 
> 时间：2013-02-04T23:16:42.163
> 
> 标签：javascript, ios, events

我正在为 iOS 开发一个移动应用程序，当在我的设备中测试它时，一旦我终止它（双击主页并长按后使用红色按钮）然后再次打开它，它仍然处于它的状态当我决定终止它时。

所以我的问题是：

我可以`javascript`在终止后打开我的应用程序时刷新我的应用程序吗？我需要寻找哪个事件？

编辑：如果我使用下面的结构，我可以让 PAUSE 事件起作用，但不能让 RESUME 事件起作用……为什么？

```
var app = {

    ready: false,

    initialize: function() {
        this.bind();
    },

    bind: function() {
        document.addEventListener('deviceready', this.deviceready, false);
    },

    deviceready: function() {
        app.report('deviceready');
        document.addEventListener("pause", onPause, false);
        document.addEventListener("resume", onResume, false);
    },

    report: function(id) { 
        console.log("report:" + id);
    }
};

function onPause() {
  console.log("I've been paused");
}

function onResume() {
  console.log("I've been resumed");
} 
```

编辑2：好的，我解决了。看起来当您的设备插入计算机时，RESUME 事件不会触发，因为当 KILLING 应用程序 Xcode 停止任务时，这将使应用程序冻结。然后，当重新打开时，应用程序混乱且无响应。谢谢你的帮助。上面的编辑应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:01:40.433

根据我在 PhoneGap 文档中看到的内容，您可以使用 resume 事件来刷新您的应用程序。

例如：

```
var refreshApp = function() {
    // Do what you need to do in order to refresh app here.
};
document.addEventListener("resume", refreshApp, false); 
```

看看[http://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#resume](http://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#resume)

注意：我没有使用过 PhoneGap，也没有经过任何测试。

# .net - 绑定配置和行为有什么区别？

> ID：14697535
> 
> 赞同：5
> 
> 时间：2013-02-04T23:16:49.160
> 
> 标签：.net, wcf

我正在尝试更好地*获取*WCF 配置文件，以便我可以更轻松地处理更复杂的场景。通常情况下，我正在重新审视我对基础知识的理解。所以这就引出了一个问题，***绑定配置和行为之间有什么区别？***我*不是*在问什么是绑定（即`netTcpBinding`，等等）。我明白了。

因此，假设我有一个配置文件，其中包含针对该单个绑定的多个配置：

```
 <netTcpBinding>
    <binding name="LargeMessages" maxBufferPoolSize="5242880" maxBufferSize="5242880" maxReceivedMessageSize="5242880">
      <readerQuotas maxDepth="256" maxStringContentLength="16384" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None"></security>
    </binding>
    <binding name="LargeFiles" maxBufferPoolSize="15728640" maxBufferSize="15728640" maxReceivedMessageSize="15728640">
      <!-- 15MB max size -->
      <readerQuotas maxDepth="256" maxStringContentLength="15728640" maxArrayLength="15728640" maxBytesPerRead="204800" maxNameTableCharCount="15728640" />
      <security mode="None"></security>
    </binding>
    <binding name="LargeStrings" maxBufferPoolSize="524288" maxBufferSize="524288" maxReceivedMessageSize="524288">
      <!-- 0.5MB max size -->
      <readerQuotas maxDepth="256" maxStringContentLength="524288" maxArrayLength="524288" maxBytesPerRead="204800" maxNameTableCharCount="524288" />
      <security mode="None"></security>
    </binding>
  </netTcpBinding> 
```

在这种情况下，我调用`LargeMessages`、`LargeFiles`和`LargeStrings`“绑定配置”。

现在我有了那个配置，我也可以有多个行为，其中一个可能看起来像这样：

```
<behavior name="DefaultServiceBehavior">
  <serviceCredentials>
    <serviceCertificate findValue="1234123412341234123412341234"
                        x509FindType="FindByThumbprint" />
  </serviceCredentials>
  <serviceMetadata/>
  <serviceDebug includeExceptionDetailInFaults="true" />
</behavior> 
```

在这种情况下，`DefaultServiceBehavior`是一种行为。

所以问我问题的另一种方式是，***为什么我的绑定配置不能包含我的行为指定的所有设置？或相反亦然？在基本和高层次上，为什么我们有两组设置？***似乎两者都会显着影响我的传输配置或消息配置。我只是看不到设置分离的逻辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T01:01:49.363

在技​​术方面：

*   [绑定](http://msdn.microsoft.com/en-us/library/ms733027.aspx)：用于指定客户端和服务相互通信所需的传输、编码和协议细节。
*   [行为](http://msdn.microsoft.com/en-us/library/aa480210.aspx)：是修改或扩展服务或客户端功能的类型。

通俗地说：

*   **Bindings**：用于指定您的服务使用的语言（例如：英语、葡萄牙语等）。服务和客户只有在同意说同一种语言的情况下才能相互交流。
*   **行为**：用于定义您的服务应该如何行动。例如，[英国女王卫队](http://en.wikipedia.org/wiki/Queen%27s_Guard)在执勤时应该完全静止不动，因为这是礼仪规定他们应该采取的行动，否则人们可能会怀疑他们是真正的英国卫队。

结论，你的服务应该使用适当的语言（绑定）和行为（行为），否则客户可能很难与他们沟通。

# python - 检查 Tornado (Python) 中的 HTTPS 连接以识别速度慢

> ID：14697536
> 
> 赞同：0
> 
> 时间：2013-02-04T23:16:49.367
> 
> 标签：python, sockets, networking, ssl, tornado

我在我的 Tornado 应用程序中大量使用了 3rd 方 API，似乎在消除了其他一些低效率之后，我仍然遇到每个请求 300-600 毫秒的响应时间。我最好的猜测是 Tornado 每次都在重新协商 SSL 连接，但我不确定如何深入了解请求缓慢的来源。

我正在寻找可以按时间分解连接的每个阶段的东西，例如“收到的证书：100 毫秒”和“服务器响应：200 毫秒”

我通常对同一服务器执行多个异步请求，如下所示：

```
liked_response, following_response, subscribed_response = \
yield [gen.Task(http_client.fetch, like_request),
       gen.Task(http_client.fetch, following_request),
       gen.Task(http_client.fetch, subscribed_request)] 
```

如何更深入地了解 Tornado 的网络堆栈，以确定我的请求的哪些部分运行缓慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:00:10.670

调试这样的事情的最佳机会是`netcat`，`wireshark`或者如果你能找到一些东西，你可以将你的 web 进程通过管道进行一些监控。类似的东西`django-debug-toolbar`

# mysql - 查询中记录的行号

> ID：14697538
> 
> 赞同：1
> 
> 时间：2013-02-04T23:16:53.173
> 
> 标签：mysql, sqlalchemy

我需要在查询中找到记录的页码。我有偏移和限制，但也需要行号来计算。

给定一个查询对象和一个记录 ID，我如何找到行号？

行号应该是相对于查询表的。限制和偏移量将在之后应用。

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:31:27.473

像这样让记录的“页码”倒退有点尴尬，通常一个想要从记录的“细节”反弹回“所有这些的分页视图”的系统只会随身携带页码到“详细信息”页面。

[但是假设您正在使用功能强大的数据库，您可以使用窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)从任意 SELECT 语句中获取行号，您可以使用 Postgresql、SQL Server 或 Oracle（尤其不是 MySQL 或 SQLite）等数据库来获取行号。

使用 PG 我们可以从一些数据开始：

```
test=> create table data(id SERIAL primary key, value varchar(20));
NOTICE:  CREATE TABLE will create implicit sequence "data_id_seq" for serial column "data.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "data_pkey" for table "data"
CREATE TABLE
test=> insert into data (value) values ('d1'), ('d2'), ('d3'), ('d4'), ('d5'), ('d6'), ('d7'), ('d8'), ('d9'), ('d10'), ('d11'), ('d12'), ('d13'), ('d14'), ('d15'), ('d16');
INSERT 0 16 
```

`row_number()`然后我们可以选择这些数据并使用窗口函数获得整数行数：

```
test=> select value, row_number() over (order by id) as rownum from data;
 value | rownum 
-------+--------
 d1    |      1
 d2    |      2
 d3    |      3
 d4    |      4
 d5    |      5
 d6    |      6
 d7    |      7
 d8    |      8
 d9    |      9
 d10   |     10
 d11   |     11
 d12   |     12
 d13   |     13
 d14   |     14
 d15   |     15
 d16   |     16
(16 rows) 
```

在子查询中应用窗口数据，我们可以根据这个计数选择结果的切片：

```
test=> select value from (select value, row_number() 
     > over (order by id) as rownum from data) as sub where rownum between 5 and 10;
 value 
-------
 d5
 d6
 d7
 d8
 d9
 d10
(6 rows) 
```

因此，如果您有记录“d14”且页面大小为 5，您可以这样做：

```
test=> select (rownum - 1) / 5 from (select value, row_number() 
     > over (order by id) as rownum from data) as sub where value='d14';
 ?column? 
----------
        2
(1 row) 
```

SQLAlchemy 通过[over()](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.over)方法/函数提供窗口函数，因此假设一个典型的 ORM 映射的 SQLA 查询如下所示：

```
subq = session.query(
            Data.value, 
            func.row_number().over(order_by=Data.id).label('rownum')
       ).subquery()
pagenum = session.query((subq.c.rownum - 1) / 5).\
       filter(subq.c.value == 'd14').scalar() 
```

至于使用窗口函数与限制/偏移进行分页，值得查看我在这里写的[比较](https://stackoverflow.com/q/3125571/34549)各种方法的性能，以及我有时使用的[窗口范围查询配方。](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/WindowedRangeQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:47:01.353

我看了很长时间，6小时后找到了解决方案。

我使用 Mysql，所以我相信我能做到这一点的唯一方法是使用 @ 变量。

这是我将它实现到 SQLAlchemy 中的方法：

```
qry = ...
sel = select([qry.c.id, "@rownum := @rownum + 1 as rownumber"])
conn = sel.engine.connect()
conn.execute("SET @rownum:=0")
res = conn.execute(sel) 
```

`@rownum`将随着每一行递增。`qry`如果我们愿意， 我们可以从第二行添加更多列。`res`是带有列的最终表`rownumber`，我们可以在其中调用`res.fetchall()`以返回列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T06:15:14.197

经过长时间的搜索，我找到了以下 MySQL 解决方案：

```
SELECT d.myRowSerial
FROM (
    SELECT *, @rownum:=@rownum + 1 AS myRowSerial 
    FROM myTable, (SELECT @rownum:=0) AS nothingButSetInitialValue 
    WHERE 1=1 -- Optional: filter if required, otherwise, omit this line;
    ORDER BY AnyColumn -- Apply the order you like; 
) d
WHERE d.myColumn = 'Anything'; -- If you like to limit it to only
-- for any specific row(s), similar to the *MAIN query. 
```

如果您也需要页码，那么只需像这样更改上面的第一行：

```
SELECT d.myRowSerial, FLOOR((d.myRowSerial-1)/10) AS pageNumber
-- Say, 10 is per page; 
```

第 1 页的 pageNumber==0，第 2 页的 pageNumber=1，......

# matlab - 如何在matlab中重复一个循环

> ID：14697540
> 
> 赞同：0
> 
> 时间：2013-02-04T23:17:16.227
> 
> 标签：matlab

给定`for loop`计算一个新的转移矩阵。我正在尝试一个

我想巧妙地重复给定的循环，但一次又一次地复制/粘贴循环是可疑的。请帮忙。

```
 %% generate some weights vector i.e. the probability matrix
 Transition = 
[              
               0.06    0.47   0      0.47   0      0      0;
               0.47    0.06   0.47   0      0      0      0;
               0       0.47   0.06   0.47   0      0      0;
               0.47    0      0.47   0.037  0.023  0      0;
               0       0      0      0.023  0.037  0.47   0.47;
               0       0      0      0      0.47   0.06   0.47;
               0       0      0      0      0.47   0.47   0.06
];

tolerance= 0.01

Dij= Transition;
len=length(Transition);
enter code here

%% copying the status
for i=1:7 

    while(1)
        sel=randi(7);
        if((Dij(i,sel) ~= 0))
            show(i)=sel;
            break;
        end
    end

    Dij(i,sel)=Dij(i,sel)-tolerance*(i ~= sel);
    for i=1:7
     while(1)
        sel=randi(7);
        if((NewDij(i,sel) ~= 0))
            show(i)=sel;
            break;
        end
    end

    NewDij(i,sel)=NewDij(i,sel)-tolerance*(i ~= sel);
    newnew=NewDij;
end

 for i=1:7
     while(1)
        sel=randi(7);
        if((newnew(i,sel) ~= 0))
            show(i)=sel;
            break;
        end
    end

    newnew(i,sel)=NewDij(i,sel)-tolerance*(i ~= sel);

end 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:58:42.933

我看到您的代码片段在代码中出现了两次。假设这就是您所说的重复，您可以定义一个包含此代码的函数或脚本，然后调用它两次而不是复制粘贴代码。这样，也没有在一个位置更新代码而不是在第二个位置更新代码的风险。

当输入和输出参数有限时，通常首选函数，检查`help function`

* * *

作为旁注，我不知道 a`while 1 ... break`是否真的是不好的做法，但我认为它至少是不寻常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:35:58.683

首先，您是否有任何终止条件：何时停止更新 Dij。

您可以通过在条件下定义它来在循环本身内添加 Dij 更新`if`。

所以而不是

```
if((Dij(i,sel) ~= 0))
    show(i)=sel;
    break; 
```

你可以写

```
if((Dij(i,sel) ~= 0))
    show(i)=sel;
    Dij(i,sel)=Dij(i,sel)-tolerance*(i ~= sel); 
```

# bash - 断开长 SED 字符串

> ID：14697545
> 
> 赞同：1
> 
> 时间：2013-02-04T23:17:46.007
> 
> 标签：bash, sed

我将如何打破长 sed 行，例如：

```
sed -n 's/.*<a href="\(.*\)" target="_blank" rel="nofollow">Download<\/a>.*/\1/p' 
```

我想要这样的东西，例如：

```
sed -n 's/.*<a href="\(.*\)" target="_blank" 
  rel="nofollow">Download<\/a>.*/\1/p' 
```

我知道“\”，但它不适用于 sed。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:25:56.480

我已经找到了一个具有多个变量的解决方法。它并不完美，但它有效。这是以防万一其他人遇到类似问题。如果有人找到更好的解决方案，请在这里分享。

```
str1='<a href="\(.*\)" target="_blank"'
str2='rel="nofollow">Download<\/a>'
sed -n "s/.*$str1 $str2.*/\1/p" 
```

另一种方法是使用heredoc，这是一种更简洁的方式。

```
str=$(cat <<'EOF'
<a href="\(.*\)" target="_blank" \
rel="nofollow">Download<\/a>
EOF
)

sed -n "s/.*$str.*/\1/p" 
```

好吧，我还发现 printf 可以像这样使用，但你需要转义双引号。

```
str=$(printf "<a href=\"\(.*\)\" target=\"_blank\" \
rel=\"nofollow\">Download<\/a>")

sed -n "s/.*$str.*/\1/p" 
```

最干净的方法是这样。

```
str="<a href=\"\(.*\)\" target=\"_blank\" \
rel=\"nofollow\">Download<\/a>"

sed -n "s/.*$str.*/\1/p" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:49:35.420

您可以在 shell 级别而不是 sed 级别上破坏它：

```
sed -n 's/.*<a href="\(.*\)" target="_blank" '\
'rel="nofollow">Download<\/a>.*/\1/p' 
```

不幸的是，这不允许缩进第二行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:22:54.483

您实际上想要提取字符串（url），而不是替换。删除 sed 并使用 grep 怎么样？会很短！

```
grep -Po '(?<=href=")[^"]*' file 
```

例子：

```
kent$  echo 'foo<a href="IWantIt" target="_blank" rel="nofollow">Download</a>baz'|grep -Po '(?<=href=")[^"]*'
IWantIt 
```

# conflict - 解决冲突？

> ID：14697553
> 
> 赞同：9
> 
> 时间：2013-02-04T23:18:41.670
> 
> 标签：conflict, offline, firebase

如果 2 个或更多用户都处于离线状态并且他们正在编辑相同的数据，那么谁会赢？或者，更好的是，是否存在冲突/合并解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T23:48:02.977

答案取决于他们如何修改数据。

*   set() （以及 remove、push、setWithPriority 等）是最后写入获胜。因此，如果客户端 A 和客户端 B 都“离线”然后连接到 Firebase，如果客户端 A 先成功连接到 Firebase，他的 set() 将被写入 Firebase，但是当客户端 B 最终连接时，他的 set将覆盖客户端 A 的集合，因此客户端 B 最终将获胜。
*   [transaction](https://www.firebase.com/docs/transactions.html) () 具有内置的冲突解决方案。因此，如果客户端 A 先连接到 Firebase，他的事务将在第一次尝试时成功（因为没有冲突）。然后当客户端 B 连接时，他的事务第一次尝试失败，因此他的事务更新功能将自动运行第二次（现在是客户端 A 之前写入的新数据），并将此新数据写入 Firebase （假设没有进一步的冲突）。

因此，如果您不在乎谁赢，请使用 set()。如果您需要通过冲突/合并解决方案确保某种一致性，请使用 transaction()。

# android - 更改片段时Android隐藏键盘

> ID：14697555
> 
> 赞同：10
> 
> 时间：2013-02-04T23:19:05.820
> 
> 标签：android

当我改变片段时。我正在使用它来关闭键盘，因为屏幕上有一个 EditText 字段。我只是觉得必须有更好的方法，但我还没有发现任何关于检测键盘是否在屏幕上的东西。

```
Activity activity = getActivity();
InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
try
{
    inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), 0);
}
catch (Exception e)
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-25T02:19:22.893

在您实现对各种片段的调用的活动中，放置以下内容......

```
 InputMethodManager imm = (InputMethodManager)this.getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-27T10:48:49.150

您可以在 pause 方法中使用以下代码：

```
@Override
protected void onPause() {
    super.onPause();

    final InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
    if (inputMethodManager != null && inputMethodManager.isActive()) {
        if (getCurrentFocus() != null) {
            inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T00:11:28.070

我能想到的唯一真正的方法是使用以下`onConfigurationChanged(Configuration config)`方法：

[KeyboardHidden](https://developer.android.com/reference/android/content/res/Configuration.html#keyboardHidden)和[Configuration](https://developer.android.com/reference/android/content/res/Configuration.html)的组合应该可以做到。

```
class MyFrag extends Fragment{

  @Override
  public void onConfigurationChanged(Configuration config){
    //Check flags
    switch(config.keyboardHidden){
      case KEYBOARDHIDDEN_NO:
        // do something
        break;
      case KEYBOARDHIDDEN_YES:
        break;
    }
  }

} 
```

这当然依赖于您拥有清单和父活动来接受这些作为配置更改：

```
<activity ...
  android:configChanges="keyboardHidden|orientation|screenSize|screenLayout"/> 
```

此外，您会注意到`Activity`具有相同的可覆盖方法，活动将首先获取该方法，然后将其传递给附加`Fragment`的 s。

对于观察者，您可以使用上下文即时执行此操作：

```
Configuration config = getResources().getConfiguration(); 
```

希望对您有所帮助，这也意味着要考虑硬键盘，但我相信您会遇到一些特定于设备的错误！

# jquery - 如何让 JQuery 执行与 html 表单相同的操作

> ID：14697560
> 
> 赞同：0
> 
> 时间：2013-02-04T23:19:33.010
> 
> 标签：jquery, forms, get

我在尝试让 JQuery 执行表单将执行的相同操作时遇到问题。我有以下表格，可以完全按照我的意愿工作：

```
<form method='get' action='/editor'>
  <input name='r'>
  <input name='c'>
  <input name='t'>
  <input type='submit'>
</form> 
```

/editor 的服务器上的处理程序只需使用 url 中的 r、c 和 t 参数重定向页面。这也完全符合我的要求。

现在，我正在尝试做完全相同的事情，但是使用 JQuery，这就是我目前所拥有的：

```
$.get("/editor", { r: "foo", c: "bar", t: "meow" } ); 
```

从控制台日志中可以看出，请求已发送：**XHR 已完成加载**，但页面未重定向到 /editor

我的问题是如何在 JQuery 中执行与 html 表单完全相同的功能？

谢谢大家的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:21:57.463

你必须重定向到`/editor`自己。如果您想完全按照表单通常执行的操作（包括重定向）进行操作，那么让 JavaScript 完全没有意义。但是，既然你问：

```
$.get(/* what you have */).done(function () { window.location = '/editor'; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:18:45.787

只是为了记录，您还可以通过 Javascript 给输入元素一个值，然后：

```
document.forms["id_of_the_form"].submit(); 
```

也许它更优雅。

# ios - 在 Objective-C 中等待异步操作

> ID：14697562
> 
> 赞同：4
> 
> 时间：2013-02-04T23:19:35.313
> 
> 标签：ios, objective-c, asynchronous, grand-central-dispatch

我像疯了一样在谷歌上搜索，仍然对此感到困惑。

我想将一组文件 url 下载到磁盘，并且我想根据每个文件在下载时加载的字节来更新我的视图。我已经有了可以下载文件并通过块报告进度和完成的东西。

如何为数组中的每个文件执行此操作？

我可以一次做一个。我可以通过这种方式轻松计算总进度：

```
float progress = (numCompletedFiles + (currentDownloadedBytes / currentTotalBytes)) / totalFiles) 
```

我主要了解 GCD 和 NSOperations，但是如何告诉操作或 dispatch_async 块等到回调被调用后再完成？重写 NSOperation 似乎是可能的，但这似乎有点矫枉过正。还有其他方法吗？只用GCD可以吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T23:53:37.880

我不确定我是否正确理解您，但也许您需要调度信号量来实现您的目标。在我的一个项目中，我使用调度信号量来等待另一位玩家完成另一个回合。这部分是我使用的代码。

```
for (int i = 0; i < _players.count; i++)
{

    // a semaphore is used to prevent execution until the asynchronous task is completed ...

    dispatch_semaphore_t sema = dispatch_semaphore_create(0);

    // player chooses a card - once card is chosen, animate choice by moving card to center of board ...

    [self.currentPlayer playCardWithPlayedCards:_currentTrick.cards trumpSuit:_trumpSuit completionHandler:^ (WSCard *card) {

        BOOL success = [self.currentTrick addCard:card];

        DLog(@"did add card to trick? %@", success ? @"YES" : @"NO");

        NSString *message = [NSString stringWithFormat:@"Card played by %@", _currentPlayer.name];
        [_messageView setMessage:message];

        [self turnCard:card];
        [self moveCardToCenter:card];

        // send a signal that indicates that this asynchronous task is completed ...

        dispatch_semaphore_signal(sema);

        DLog(@"<<< signal dispatched >>>");
    }];

    // execution is halted, until a signal is received from another thread ...

    DLog(@"<<< wait for signal >>>");

    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    dispatch_release(sema);

    DLog(@"<<< signal received >>>"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T06:28:00.833

调度组是 GCD 工具，旨在跟踪一组独立或单独异步块/任务的完成情况。

要么使用 dispatch_group_async() 提交有问题的块，要么在触发异步任务之前使用 dispatch_group_enter() 组，并在任务完成时使用 dispatch_group_leave() 组。

然后，当组中的所有块/任务都完成时，您可以通过 dispatch_group_notify() 异步获得通知，或者如果必须，您可以使用 dispatch_group_wait() 同步等待完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:51:24.260

我只是想指出，我确实通过继承 NSOperation 并使其成为“并发”操作来使其工作。（在这种情况下，并发是指在将其标记为完成之前应该等待的异步操作）。

[http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)

基本上，您在子类中执行以下操作

1.  覆盖`start`以开始您的操作
2.  覆盖`isConcurrent`返回`YES`
3.  完成后，确保 isExecuting 和 isFinished 更改正确，以符合键值的方式（基本上，调用`willChangeValueForKey:`和`didChangeValueForKey:``isFinished``isExecuting`

在包含队列的类中

1.  设置为`maxConcurrentOperationCount`_`NSOperationQueue``1`
2.  在所有并发操作之后添加一个操作，一旦它们全部完成就会触发

# ios - UIView 上的平滑帧动画

> ID：14697564
> 
> 赞同：0
> 
> 时间：2013-02-04T23:19:44.817
> 
> 标签：ios, objective-c

我试图通过在动画块中增加 UIView 的 x 属性来在屏幕上移动 UIView。我希望元素连续移动，所以我不能只指定结束 x 和持续时间。

此代码有效，但非常不稳定。在模拟器中看起来很棒，但在设备上不稳定。

```
-(void)moveGreyDocumentRight:(UIImageView*)greyFolderView
{
[UIView animateWithDuration:0.05 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
    NSInteger newX = greyFolderView.frame.origin.x + 5.0;
    greyFolderView.frame = CGRectMake(newX, greyFolderView.frame.origin.y, greyFolderView.frame.size.width, greyFolderView.frame.size.height);
    }
} completion:^(BOOL finished) {
    [self moveGreyDocumentRight:greyFolderView];
}]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:52:46.880

你在这里与视图动画作斗争。您的每个动画都包含一条`UIViewAnimationOptionCurveEaseInOut`时序曲线。这意味着您每 0.05 秒尝试加快速度，然后放慢速度，然后换到其他地方。

第一个也是最简单的解决方案可能会通过传递选项更改为线性时序`UIViewAnimationOptionCurveLinear`。

也就是说，每 5 毫秒制作一个新动画确实违背了核心动画的观点，使代码复杂化并损害了性能。将框架发送到您*当前*希望它去的地方。每当您希望它去其他地方（即使它仍在动画中）时，将其发送到传递 option 的新位置`UIViewAnimationOptionBeginFromCurrentState`。它会自动适应新的目标。如果您希望它重复动画或来回弹跳，请使用重复选项（`UIViewAnimationOptionRepeat`和`UIViewAnimationOptionAutoreverse`）。

# php - Chrome 在 PHP 脚本执行期间停止读取 JSON 文件

> ID：14697565
> 
> 赞同：2
> 
> 时间：2013-02-04T23:20:09.217
> 
> 标签：php, javascript, json, google-chrome

我需要为长时间运行的 PHP 脚本创建进度条，所以我决定将脚本进度写入 json 文件，然后通过 Javascript 读取它。在 Firefox 中一切正常，但如果我将浏览器更改为 Chrome，它将停止工作。控制台窗口中没有错误。当用户启动 PHP 脚本时，Chrome 会停止加载 json 文件，但它会在 PHP 执行开始之前读取此文件。是我的代码有问题还是 Chrome 浏览器的正常行为有问题？

PHP：

```
$fp = fopen($this->writeFile, "w");
fwrite($fp, json_encode($values));
fclose($fp);

//for safety we will make a copy and let client access the copy.
copy($this->writeFile, $this->readFile); 
```

Javascript：

```
getProgress();
function getProgress() {
    $.ajaxSetup({ cache: false });
    $.getJSON("../../../../upload/status.json", function(data) {
    var pbvalue = 0;
    if(data){
        var total = data['total'];
        var current = data['current'];
        if(total != 0)
            pbvalue = Math.floor((current / total) * 100);
        $(".progress-bar .indicator").width(pbvalue+"%");
        $(".progress-text").text(current+"/"+total);
    }
    if(pbvalue < 99)
        setTimeout("getProgress()", 3000);
});
} 
```

JSON文件：

```
{"total":"0","current":"0"} 
```

**编辑1：** 感谢超时提示，但它在Firefox中工作（很好）问题是在我开始PHP执行后Chrome控制台内没有“XHR完成加载”响应（在它应该每3秒加载文件之前）

**编辑 2：** 这个问题的原因可能是我在用户提交表单后尝试读取这个 JSON 文件。我猜由于某些原因，表单提交后 Chrome 不再允许执行 jQuery $getJSON 函数。任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:52:11.730

我什至尝试制作读取 json 文件的 flash 动画，但它也没有工作（看起来像在提交 Chrome 之后停止更新当前显示的页面）。对我来说，唯一可行的解​​决方案是重新设计代码并通过 ajax 调用而不是传统的表单提交来执行 PHP 函数。

# ant - Ant：如何使用 php 文件调用目录并将结果保存为覆盖文件

> ID：14697566
> 
> 赞同：0
> 
> 时间：2013-02-04T23:20:10.667
> 
> 标签：ant

如何使用 Ant 执行目录中的**每个**php 文件？php 执行的输出应覆盖原始文件。

该目录位于安装了 php 的 localhost 网络服务器上。我假设解决方案将涉及 GET 并让 src 指向每个文件的 http 等效项。

c:/webroot/php/file1.php
c:/webroot/php/file2.php的一些动态版本

翻译成
get src="localhost/php/file1.php"
get src="localhost/php/file2.php"

然后让输出覆盖自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:47:53.957

为什么不使用[php 命令行](http://php.net/manual/en/install.windows.commandline.php)结合 ANT[应用](http://ant.apache.org/manual/Tasks/apply.html)任务呢？

就像是：

```
<apply executable="C:\PHP5\php.exe">
    <arg value="-f"/>
    <fileset dir="c:/webroot/php" includes="*.php"/>
</apply> 
```

我不清楚为什么要覆盖源文件....

# 更新

或者使用嵌入式[groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)脚本

```
<fileset id="phpfiles" dir="c:/webroot/php" includes="*.php"/>

<groovy>
   project.references.phpfiles.each {
      def file = new File(it.toString())
      ant.get(src:"http://localhost/php/${file.name}", dest:"output/${file.name}")
   }
</groovy> 
```

# jquery - jQuery append() 不添加

> ID：14697567
> 
> 赞同：4
> 
> 时间：2013-02-04T23:20:12.477
> 
> 标签：jquery, html-lists, append

> **可能重复：**
> [使用 .after() 添加 html 关闭和打开标签](https://stackoverflow.com/questions/8706457/using-after-to-add-html-closing-and-open-tags)

我想显示`<ul>`高度几乎相同的 3 列列表 ( )，因此我正在计算`<li>`标签并使用 append 动态生成列表。但是当我`$el.append($("</ul><ul class='new'>"))`关闭当前列表并附加一个新列表时，它会像`<ul class='new'></ul>`.

我只想关闭`<ul>`标签并再次打开它。jQuery`append()`函数是否以某种方式验证 DOM 结构？我怎样才能得到预期的结果？有更好的方法来实现这一点吗？

### HTML：

```
<div id="mylist">
   here the list will show
</div> 
```

### 查询：

```
var $el = $("#mylist");
$el.empty(); // remove old options
$el.append($("<ul class='new'>"));
var j = parseInt(response.length/3);
var i = 0;
$.each(response, function(key, value) {
  i++;
  if(i%j==0){
      $el.append($("</ul><ul class='new'>")).append($("<li></li>").text(value.nombre));
  }
  else{
     $el.append($("<li></li>").text(value.name));
  }}); 
```

### 预期结果：

```
<div >
   <ul class="new">
     <li>Lorem Ipsum</li>
     <li>Lorem Ipsum</li>
     <li>Lorem Ipsum</li>
   </ul><ul class="new"> //This is what I want to append
     <li>Lorem Ipsum</li>
     <li>Lorem Ipsum</li>
     <li>Lorem Ipsum</li>
   </ul><ul class="new">
     <li>Lorem Ipsum</li>
     <li>Lorem Ipsum</li>
   </ul>
</div> 
```

### 我得到了什么：

```
<div id="mylist">
<ul class="new"></ul>
 <li>Lorem Ipsum</li>
 <li>Lorem Ipsum</li>
 <li>Lorem Ipsum</li>
 <ul class="new"></ul>
 <li>Lorem Ipsum</li>
 <li>Lorem Ipsum</li>
 <li>Lorem Ipsum</li>
 <ul class="new"></ul> 
 <li>Lorem Ipsum</li>
 <li>Lorem Ipsum</li>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:35:06.947

`$('</ul><ul>')`不会按照你的想法去做。它将尝试创建一个 DOM 元素，可能会导致`<ul>`.

您必须构建所需的每个元素并将它们拼凑在一起，或者使用`.html()`. 我绝对推荐这些选项中的第一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:40:26.587

首先，重要的是要注意`append`ing 是一个比`innerHTML`在元素上设置更昂贵的计算操作。其次，重要的是要注意 jQuery`$('<ul />');`通过`document.createElement`. 换句话说，它不像连接一个字符串。您不能创建部分元素。

你想要的是用原始字符串连接构建一个 HTML 字符串，然后通过`innerHTML`. 例如：

```
var colHTML = [];
var numPerCol = Math.ceil(response.length/3);
var i=0;
$.each(response, function(key, value) {
    var curCol = Math.floor(i / numPerCol);
    if (i % numPerCol == 0)
        colHTML[curCol] = '';
    colHTML[curCol] += '<li>' + value.nombre + '</li>'; // if nombre has invalid HTML, you need to escape it
});

var html = '<ul class="new">' + colHTML.join('</ul><ul class="new">') + '</ul>';
document.getElementById('mylist').innerHTML = html; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T23:42:35.443

简单的：

`**[LIVE DEMO](http://jsbin.com/umikom/23/edit)**`

`"strings"`在需要的地方进行设置，而不是对象`</ul><ul>`。

```
var arr = ['1','2','3','4','5','6','7','8','9','10','11','12','13','14'];

var str = "<ul class='new'>";
for(var i=0; i<arr.length;) { 
              str += "<li>"+ arr[i++] +"</li>" ;  
  if(i%3===0) str += "</ul><ul class='new'>"   ;
}
str += "</ul>" ;

$("#mylist").html( str ); 
```

# php - PHPUnit-Skelgen 1.2.0 未创建命名空间

> ID：14697570
> 
> 赞同：0
> 
> 时间：2013-02-04T23:20:31.667
> 
> 标签：php, testing, phpunit

我附加了一个示例类，当我尝试使用 PHP 5.4.11 上的 PHPUnit-Skelgen 1.2.0 为其生成测试文件时，我没有将命名空间添加到文件中，因此测试失败。但是，所有方法都被拾取。

源文件：

```
<?php
namespace lib\Parameters;

class COMMAND_LINE implements \Iterator
{
    private $CommandLineOptions_ = array();

    /**
     * Create the Command Line Options Class
     * @param boolean $AddHelpOption - Optionally add the -h/--help option automatically
     */
    public function __construct($AddHelpOption = TRUE)
    {
        if( $AddHelpOption == TRUE)
        {
        }
    }

    /**
     * An internal pointer to the current position in the Command Line Options
     * @var integer
     */
    protected $Position = 0;

    /**
     * This method takes the pointer back to the beginning of the dataset to restart the iteration
     */
    public function rewind() 
    {
        $this->Position = 0;
    }

    /**
     * This method returns the value at the current position of the dataset
     * @return COMMAND_LINE_OPTION
     */
    public function current()
    {
        return $this->CommandLineOptions_[$this->Position];
    }

    /**
     * Return the current value of the pointer
     * @return integer
     */
    public function key()
    {
        return $this->Position;
    }

    /** 
     * Move the pointer to the next element
     */
    public function next() 
    {
        ++ $this->Position;
    }

    /**
     * Returns where the next item is valid or not
     * @return boolean
     */
    public function valid() 
    {
        return isset($this->CommandLineOptions_[$this->Position]);
    }
}
?> 
```

命令行，当前目录中的类：

```
>phpunit-skelgen --test -- lib\Parameters\COMMAND_LINE COMMAND_LINE.class COMMAND_LINE_Test COMMAND_LINE.class.test

PHPUnit Skeleton Generator 1.2.0 by Sebastian Bergmann.
Wrote skeleton for "COMMAND_LINE_Test" to "COMMAND_LINE.class.test". 
```

创建的测试类具有功能，但没有命名空间：

```
<?php
/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.0 on 2013-02-04 at 17:50:23.
 */
class COMMAND_LINE_Test extends PHPUnit_Framework_TestCase
{
    /**
     * @var COMMAND_LINE
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new COMMAND_LINE;
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
    }

    /**
     * @covers lib\Parameters\COMMAND_LINE::rewind
     * @todo   Implement testRewind().
     */
    public function testRewind()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers lib\Parameters\COMMAND_LINE::current
     * @todo   Implement testCurrent().
     */
    public function testCurrent()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers lib\Parameters\COMMAND_LINE::key
     * @todo   Implement testKey().
     */
    public function testKey()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers lib\Parameters\COMMAND_LINE::next
     * @todo   Implement testNext().
     */
    public function testNext()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers lib\Parameters\COMMAND_LINE::valid
     * @todo   Implement testValid().
     */
    public function testValid()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
} 
```

从具有相对文件路径的根目录尝试它也不起作用。如果我使用完全限定的命名空间（我不能，因为我需要是相对的），则找不到该类，并且只找到 setUp 和 tearDown 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:31:23.000

您可以像这样为生成的测试类提供命名空间。

```
>phpunit-skelgen --test -- lib\Parameters\COMMAND_LINE COMMAND_LINE.class lib\Parameters\COMMAND_LINE_Test COMMAND_LINE.class.test 
```

# javascript - 如何选择 textarea 并检查它是否是只读的？

> ID：14697573
> 
> 赞同：0
> 
> 时间：2013-02-04T23:21:02.180
> 
> 标签：javascript, jquery, html

我正在努力使用 jQuery。我想编写一个脚本来检查单击该按钮时与该按钮共享同一父项（列表项）的文本区域是否为只读。这是HTML：

```
...
<li>
  <h1>Title</h1>
  <button type="button" onclick="javascript:confirmDelete();">Delete</button>
  <button type="button" onclick="javascript:toggle();">Toggle</button>
  <textarea class="readOnly" readonly="true">Some text</textarea>
</li>
... 
```

和脚本：

```
<script language="JavaScript">
  <!--
  ...    
  function toggle()
  {
    var textArea = $(this).parent("li").children("textarea");
    var isReadOnly = textArea.attr("readonly");
    if (isReadOnly == "true") {
      alert('It\'s read-only.');
    } else {
      alert('It\'s not read-only.');
    }
  }
  //-->
</script> 
```

看来我无法通过`var textArea = ...`

### 更新1：

好的，为了帮助自己分析问题，我分解了选择：

```
...
var btn = $(this);
console.log(btn); //returns value, but not sure what exactly
var li = btn.parent();
console.log(li); //returns value, but not sure what exactly
var textArea = li.children('textarea');
console.log(textArea.prop('tagName')); //returns unidentified 
```

所以，有错误。我似乎无法理解实际出了什么问题，因为如果我从调试中获得的所有输出都是一个对象（我什至不知道它代表什么；它是一个元素还是数组），我无法真正学到很多东西。 ..) 或`unidentified`. jQuery 并不完全直观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:26:37.067

该属性区分大小写。试试吧

```
var isReadOnly = textArea.attr("readOnly"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:29:22.347

如果它是您唯一可能需要的：

```
...find("textarea")[0]; 
```

不是

```
...children("textarea"); 
```

或者干脆`$(this).siblings("textarea")[0];`

或直接选择

```
var mylist = $(this).siblings("textarea.readOnly");

if (mylist.length > 0)//true if it is 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:07:21.643

这里有一些错误。

首先，事实证明，当属性“readonly”处于活动状态时，它没有“true”值，而是“readonly”值。

另一方面，如果你通过 onclick 调用一个函数（我不是 100% 确定），你不能使用 $(this)。我建议你这样做（在给触发按钮一些 ID 或任何识别它的东西之后）：

```
$(function() {

  $("button#my-button").bind("click", function() {
    if ($(this).siblings("textarea").attr("readonly") == "readonly") {
      alert("It's readonly");
    } else {
      alert ("It's not");
    }
  });

}); 
```

# c++ - 从线扫描相机显示线图像的最快算法或方法是什么

> ID：14697575
> 
> 赞同：3
> 
> 时间：2013-02-04T23:21:15.220
> 
> 标签：c++, algorithm

我们有一台线扫描相机，每秒可生成 300 张线图像。我们希望以 FIFO 的方式在图像视图上显示线条，以便视图的最后一行显示最新的线条图像，同时将先前的线条移到上方以进行线条更新。

如果我可以像过去一样访问 C 中的视频内存，我会这样做

```
memcpy(videoMem, videoMem+lineWidth*pixelSize, pixelSize*lineWidth*(nLines-1));
memcpy(videoMem+pixelSize*lineWidth*(nLines-1),newLine,lineWidth*pixelSize); 
```

但我不知道这是否是我能做到的最好的，即使是直接访问视频内存。

现在我知道直接访问视频内存是不可能的，也不可取。在这种情况下，最好的方法是什么？专家的任何意见将不胜感激。

它是 Windows 7 中的台式电脑应用程序。

**更新**

正如我所料，似乎我必须处理一种循环缓冲区。就我而言，棘手的部分是逐行写入缓冲区，而逐屏读取。所以`end`指针到达缓冲区的物理末端，需要额外的内存副本才能将屏幕内存传递给视频。我想 Bip 缓冲区将是一个解决方案。还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:22:45.303

您不能 memcpy 重叠的内存，这就是 memmove 的目的。不过，只要副本以正确的顺序出现，您就可以使用 memcpy。在您的平台上尝试一下，看看它是否有效。

主要的实现问题是如果有两个单独的写入会导致闪烁。如果是这种情况，您必须先将新图像写入缓冲区，然后将整个缓冲区一次全部写入视频内存。

一般来说，您不会读取视频内存。要显示的数据应该在它自己的内存区域中。总结一下，您有 3 个内存区域：

1.  要显示的数据
2.  显示缓冲区
3.  显存（或其等效物）

标准流程是一步写1->2，然后2->3。但是，如果没有闪烁，则可以直接 1->3 不带缓冲区。除此之外，除了你所写的之外，没有什么神奇的算法

# java - 在 grails url 映射中使用目录

> ID：14697577
> 
> 赞同：2
> 
> 时间：2013-02-04T23:21:18.290
> 
> 标签：java, model-view-controller, grails, groovy

我是 Grails 的新手，以前使用 Codeigniter 进行 Web 应用程序开发。

我想知道是否可以像这样映射我的 url 和控制器。

所以我在控制器中有一个名为仪表板的文件夹，在仪表板中我有控制器，例如：用户、组、设置

所以控制器或 project.dashboard 中的设置是

```
project.dashboard/Groups.groovy 
```

我想要这样的相应视图：

```
views/dashboard/groups/index.gsp 
```

我将如何使用 URL 映射来设置它，这是我没有的，它不适合我。

```
"/dashboard/$controller/$action?/$id?" {
            constraints {
                // apply constraints here
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:10:18.693

如果你想要里面的子文件夹`controllers`，那实际上是对你的控制器类的包的改变。

如果在 上创建控制器`grails-app/controllers/dashboard/GroupsController.groovy`，则该类属于`dashboard`包：

```
package dashboard

class GroupsController {
  // ...
} 
```

在视图中添加额外的文件夹没有多大意义，上面的文件夹`grails-app/views`是控制器名称的全小写版本（例如，“groups”包含“GroupsController”的视图）：

```
$ ls grails-app/views
groups/    layouts/    tasks/    users/ 
```

# python - 在递归中分配局部变量

> ID：14697578
> 
> 赞同：3
> 
> 时间：2013-02-04T23:21:19.073
> 
> 标签：python, recursion

我有一棵树，它不是二叉树，所以我想比较所有节点并使用递归返回最大的节点。我有一个如何跟踪它的问题，因为我不能放置一个全局变量，因为它必须是本地的......我猜......但是如果递归进行，它会重置局部变量。

```
def tree_max(node):
    max=1                                                                                     
    if node.left == None and node.right == None:
       if node.value>max:
          max=node.value
          return max
    elif node.left == None and node.right != None:
        return tree_max(node)
    elif node.left != None and node.right == None:
        return tree_max(node.left)
    else:
        return tree_max(node.left) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:26:50.513

您不需要在所有递归调用中将最大值保留在变量中，并且无论如何，不​​是*全局*变量。在结构良好的递归中，结果将在每个递归调用的返回值中传递。像这样：

```
def tree_max(node):
    maxleft  = float('-inf') if not node.left  else tree_max(node.left)
    maxright = float('-inf') if not node.right else tree_max(node.right)
    return max(node.value, maxleft, maxright) 
```

以上假设`node`不是`None`，如果可以为空，则在调用*之前*`node`检查此条件。*`tree_max()`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T23:41:15.897

我会有一个遍历树的生成器。这意味着您可以在不重复遍历逻辑的情况下编写 a`min()`等`sum()`

```
def tree_traverse(node):
    if not node.left and not node.right: # if only leaf nodes have values
        yield node.value
    if node.left:
        for v in tree_traverse(node.left):
            yield v
    if node.right:
        for v in tree_traverse(node.right):
            yield v 
```

现在你可以使用`max(tree_traverse(node))`

如果所有节点都有值，您可以跳过第一个`if`并减少`yield`

正如@abarnert 所说，Python3.3 有一种简化递归生成器的好方法

```
def tree_traverse(node):
    if not node.left and not node.right: # if only leaf nodes have values
        yield node.value
    if node.left:
        yield from tree_traverse(node.left)
    if node.right:
        yield from tree_traverse(node.right) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:24:53.797

这通常使用关键字参数来完成，例如

```
def tree_max(node, max=None): 
```*

# javascript - 强制浏览器记住选择框上的选项

> ID：14697585
> 
> 赞同：1
> 
> 时间：2013-02-04T23:21:59.150
> 
> 标签：javascript, jquery, html

现在我正在使用

```
$(document).ready(function(){
        $('#submit-car').click(function(e){
            e.preventDefault();
            var brand = $('#brand option:selected').text();
            var model = $('#model option:selected').text();
            var size = $('#size option:selected').text();
            location.href ='index.php?s='+brand+'+'+model+'+'+size+'';
        });
}); 
```

将一些变量发送到 url。我想知道是否有办法强制浏览器记住网站访问者在访问新网址后选择了哪些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:26:07.827

使用会话（保存在服务器上）或 cookie（保存在客户端电脑上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:27:07.130

当用户点击转到下一个 url 时，也许您可​​以使用一些 php 编码来设置[cookie 。](http://www.w3schools.com/php/php_cookies.asp)例如：

```
<?php
  setcookie("Brand", "brand_value", time()+3600); // Expires in one hour
 ?> 
```

然后在下一页您可以检索品牌，如下所示：

```
<?php echo $_COOKIE["Brand"]; ?> // echoes the value of Brand 
```

**更详细地说**，你可以试试这个：

**主文件**

```
<script>
$(document).ready(function(){
    $('#submit-car').click(function(e){
        e.preventDefault();
        var brand = $('#brand option:selected').text();
        var model = $('#model option:selected').text();
        var size = $('#size option:selected').text();
        // Ajax call to a cookies.php file, passing the values
        $.get('cookies.php', { thebrand: brand, themodel: model, thesize: size },
        function() {
          // When the call has been completed, open next page
          location.href ='index.php?s='+brand+'+'+model+'+'+size+'';
        });
    });
});
</script> 
```

**饼干.php**

```
<?php

if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

    // Get all the values
    $theBrand = $_GET["thebrand"];
    $theModel = $_GET["themodel"];
    $theSize = $_GET["thesize"];

    // Call the setTheCookies function, below
    setTheCookies($theBrand, $theModel, $theSize);

    // The setTheCookies function
    function setTheCookies($theBrand, $theModel, $theSize)
    {
        setcookie("Brand", $theBrand, time()+3600);
        setcookie("Model", $theModel, time()+3600);
        setcookie("Size", $theSize, time()+3600);
    }
}

?> 
```

**下一页**

```
<?php

  // Get all the values from the next page
  $getBrand = $_COOKIE["Brand"];
  $getModel = $_COOKIE["Model"];
  $getSize = $_COOKIE["Size"];

?> 
```

# php - Javascript/flash 加载外部 URL HTML

> ID：14697587
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:22:33.860
> 
> 标签：php, javascript, jquery, html, flash

我环顾四周，似乎没有办法通过客户端浏览器使用 Javascript 加载外部/远程 URL，如[http://google.com](http://google.com)，而不使用代理，无论是服务器端的 PHP 文件还是 YQL，本质上使用 Yahoo API 作为代理。这是由于同源政策。

我不精通 Flash，我认为它可能有一个答案，因为即使有些人正在积极地逐步淘汰它，它也有很大的力量。

我的问题：搜索时我错过了什么吗？免费主机对每单位时间的请求数量和服务器负载有一些限制，我不想被踢出去。此外，我的站点会抓取一些远程站点的数据，因此我不想被阻止，如果我使用 PHP 代理，我会遇到这种情况。那么有没有我没有看到的简单的**Flash解决方案或 Javascript 解决方案？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:27:08.767

不，这是不可能的，因为`Same origin policy`：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# django - 使用 django-mongo-engine 的单元测试失败

> ID：14697588
> 
> 赞同：1
> 
> 时间：2013-02-04T23:22:36.100
> 
> 标签：django, mongodb, unit-testing, django-nonrel, django-mongodb-engine

我使用 django 1.3、Mongodb 和 django-mongo-engine 建立了一个网站。当我使用“manage.py runserver”运行服务器时，它是成功的。但是当我尝试通过“manage.py test”进行单元测试时，它以某种方式失败了。

这是关于数据库的settings.py：

```
DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine', 
        'NAME': 'sean_test',                     
        'USER': '',                    
        'PASSWORD': '',                  
        'HOST': '',                      
        'PORT': '',                      
    }
} 
```

这是测试中的错误消息：

> ....问题安装夹具 'c:\Python27\lib\sitepackages\django\contrib\auth\fixtures\authtestdata.json'：回溯（最近一次通话最后）：
> 
> 文件“c:\Python27\lib\site-packages\django\core\management\commands\loaddata.py”，第 174 行，在 handleobj.save(using=using)
> 
> 文件“c:\Python27\lib\site-packages\django\core\serializers\base.py”，第 165 行，在 savemodels.Model.save_base(self.object, using=using, raw=True)
> 
> 文件“c:\Python27\lib\site-packages\django\db\models\base.py”，第 573 行，在 save_baseresult = manager._insert(values, return_id=update_pk, using=using)
> 
> 文件“c:\Python27\lib\site-packages\django\db\models\manager.py”，第 195 行，在 _insertreturn insert_query(self.model, values, **kwargs)
> 
> 文件“c:\Python27\lib\site-packages\django\db\models\query.py”，第 1438 行，在 insert_queryreturn query.get_compiler(using=using).execute_sql(return_id)
> 
> 文件“c:\Python27\lib\site-packages\djangotoolbox\db\basecompiler.py”，第 369 行，在 execute_sqlvalue = self.convert_value_for_db(db_type, value)
> 
> 文件“c:\Python27\lib\site-packages\django_mongodb_engine\compiler.py”，第 67 行，在 wrapperreturn func(*args, **kwargs)
> 
> 文件“c:\Python27\lib\site-packages\django_mongodb_engine\compiler.py”，第 307 行，在 convert_value_for_dbraise InvalidId(msg)
> 
> InvalidId：AutoField（默认主键）值必须是表示 MongoDB 上的 ObjectId 的字符串（取而代之的是 u'1'）

我知道 django 使用整数，而 mongodb 使用字符串作为主键，但我不知道为什么“runserver”成功时测试会失败。关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:35:47.693

所以看起来你在运行测试时没有连接到 mongodb 实例的测试设置，因为你是从命令行运行它的，也许可以尝试做这样的事情

您有 2 个设置文件，不连接的 lsettings.py 和不连接的 settings.py

```
from lsettings import *
mongodb.connect()

So, while locally testing you can:

python manage.py test --settings=lsettings 
```

希望这可以解决您的问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T11:16:37.320

问题在于加载固定装置，如[后面的问题](https://stackoverflow.com/questions/20617528/initial-data-for-django-running-with-mongodb)中所述。

[您可以通过使用相应答案](https://stackoverflow.com/questions/20617528/initial-data-for-django-running-with-mongodb/20619682#20619682)中所述的正确 ObjectId 替换固定装置中的 id 来修复它。

从您的回溯来看，问题出在由`django.contrib.auth`. 由于这些与 ObjectId 不兼容，您需要更新您的测试以使用不同的夹具，或者如果您无法更新它们，则跳过失败的测试。例如，Django 的身份验证测试不会通过。

# c# - 在 C# 中将表格列表数据转换为 Rowa

> ID：14697596
> 
> 赞同：1
> 
> 时间：2013-02-04T23:23:28.707
> 
> 标签：c#

我正在查询数据库以获取表格数据

```
ID   NAME
1     ABC
2     XYZ
3     IJK
4     LMN
5     OPQ
6     RSS
7     NTN
8     UPS
9     DHL
10    XXX   

I want this to convert it into following format to display in Grid

1  ABC    2 XYZ     3 IJK
4  LMN    5 OPQ     6 RSS
7  NTN    8 UPS     9 DHL
10 XXX

I want to Convert it into a List of Following Object

Class NewData
{
  Int Id1
  string Name1
  int id2
  string Name2
  int id3
  string Name3 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:35:24.253

或者你可以用类似的东西查询它

```
Select C1.ID,C1.Name, C2.ID,C2.Name, C3.ID,C3.Name 
From MyTAble c1
Left Join MyTable c2 On c2.ID = (C1.ID + 1)
Left Join MyTable c3 On c3.ID = (C1.ID + 2)
Where ((C1.ID -1) % 3) = 0; 
```

注意，这是因为您的 ID 是连续的。如果他们不是，就会留下空白。

# excel - MS Excel 2010 - 根据另一张纸上的信息自动填充

> ID：14697597
> 
> 赞同：0
> 
> 时间：2013-02-04T23:23:28.817
> 
> 标签：excel

目标是根据数据库中的信息（数据转储）创建格式化的资产负债表。

[下载 Excel 文件](http://www.4shared.com/file/2lkXx4Cu/sample_statements.html)

有2个工作表

工作表 1：原始数据表

```
Column A Column B

Grp 1     Name 1
Grp 1     Name 2
Grp 2     Name 45 
```

我需要将工作表 2 填充为

```
Column A  Column B 
Grp 1
            Name 1
            Name 2

Total Grp 1: 

Grp 2
            Name 45 
Total Grp 2 
```

这需要自动化，以便如果将新行添加到原始数据表（例如 Grp 1，名称 76），它应该反映在另一个工作表上。

我不是 Excel Pro（宏、vba 等）- 任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:44:08.087

你有没有想过只做一个数据透视表？

使用行标签 A 列和 B 列以及要聚合的任何字段的值创建一个数据透视表。它不会自动更新，但您只需点击数据透视表选项功能区中的“刷新”按钮即可更新数据。

# javascript - 如何使用 jquery 将整个页面内容包装在 div 中

> ID：14697598
> 
> 赞同：1
> 
> 时间：2013-02-04T23:23:35.607
> 
> 标签：javascript, jquery

这是我的代码。

```
$(function(){
    $("body").prepend('<div id="loading"><span id="pagename"></span></div><div id="fade_wrapper">');
    $("body").append('</div> <!-- closing #fade_wrapper -->');
}); 
```

问题是 chrome 自动关闭了打开`<div id="fade_wrapper">`，因此 HTML 看起来像这样：

```
<div id="loading"><span id="pagename"></span></div><div id="fade_wrapper"></div> 
```

第二个代码中的关闭 DIV 不应该存在。如何使用 jquery 将整个页面内容包装在 div 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:25:03.830

使用`.wrapInner`：

```
$("body").wrapInner('<div id="loading"...'); 
```

append 和 prepend 不是那样工作的。您添加/附加*节点*，而不是*标签*。

似乎您还想添加一些单独的 HTML。不管：

```
$("body").wrapInner('<div id="fade_wrapper">');
$("body").prepend('<div id="loading"><span id="pagename"></span></div>'); 
```

这`.prepend`是第二个完成，因此它将在包装之外。

# certificate - 使用 ADFS2 注销 SAML2 需要什么类型的证书？

> ID：14697599
> 
> 赞同：0
> 
> 时间：2013-02-04T23:23:36.443
> 
> 标签：certificate, single-sign-on, adfs2.0, saml-2.0

使用 ADFS2 注销 SAML2 需要什么类型的证书？我注意到 ADFS2 要求 LogOut 请求由依赖方签名并在 ADFS2 中验证。我假设我们应该在依赖方内签名（使用私钥）并向 ADFS2 提供公钥以进行验证。我可以详细了解这需要什么类型的证书吗？

注意：我只针对 SAML2 协议而不是 WS-Federation。WS-Federation 不要求依赖方签署注销请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:46:28.383

您可以使用自签名证书 - 算法是 RSA - 我通常使用密钥大小 2048。

在 ADFS RP - 属性 - 高级 - 将哈希算法设置为 SHA-1。

# apache - 将 domain.com 重定向到 www.domain.com？

> ID：14697602
> 
> 赞同：0
> 
> 时间：2013-02-04T23:24:05.117
> 
> 标签：apache, .htaccess, redirect, dns

有点问题 - 我当前的 DNS 和 apache 设置允许从[http://domain.com/](http://domain.com/)和[http://www.domain.com/](http://www.domain.com/)访问我的网站。但是，当前使用的 CMS 应用程序要求 URL 为[http://www.domain.com/](http://www.domain.com/)，否则会出现问题。

为了争论，考虑修改 CMS 是不可能的。我将如何强制[http://domain.com/](http://domain.com/)在 DNS/Apache 级别重定向到[http://www.domain.com/ ？](http://www.domain.com/)我在 DNS 杂技方面没有太多经验，而且 .htaccess 是多方面的，所以很难确定一个合适的解决方案。因此，我依靠您的意见和专业知识。提前致谢！

# ruby-on-rails - Rails 资产预编译无法正常工作

> ID：14697604
> 
> 赞同：11
> 
> 时间：2013-02-04T23:24:05.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

我已经将 Rails 应用程序推送到 Heroku 并继续遇到以下问题：

我会将更改保存到我的主 css.scss 文件（在资产/样式表中）或资产/图像中的图像，推送到 git，将其推送到 heroku，然后重新加载页面，结果发现这些资产没有完全加载。

这在本地服务器上也是一个小问题，但是输入：

```
rake assets:precompile 
```

并重新加载本地服务器通常有效，而做

```
heroku run rake assets:precompile 
```

然后重新推送什么都不做。我四处寻找信息，并没有发现任何特别有用的东西。

值得注意的是，在我的**config/application.rb**中（其中一些是说钓鱼的结果）：

```
# Enable the asset pipeline
config.assets.enabled = true

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

在**config/environments/production.rb**：

```
# Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = false

# Compress JavaScripts and CSS
config.assets.compress = true

# Fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = true

# Generate digests for assets URLs
config.assets.digest = true 
```

另一个可能感兴趣的是，当我推到 heroku 时，它说，除其他外，这个：

```
Preparing app for Rails asset pipeline
       Detected manifest.yml, assuming assets were compiled locally
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets 
```

和

```
Installing dependencies using Bundler version 1.3.0.pre.5
Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment 
```

我在 Rails 3 中学习，并不真正知道资产管道与以前版本中可用的管道有何不同，如果我是个白痴并在我的配置文件中放置重叠和/或矛盾的设置，我很抱歉。

将不胜感激任何帮助。这一直很头疼。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T00:01:43.290

看起来可能是您将本地编译的资产添加到 git 并推送它们，结果 Heroku 没有在推送时编译您的资产。检查以确保您没有将 public/assets 目录添加到 git。

# javascript - 使用 Javascript (jQuery) 接收数据

> ID：14697606
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:24:36.640
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个搜索页面，其中显示了用户可以过滤的几个不同标准。每个用户可能希望每次使用该应用程序时都搜索相同的内容，因此每个`User`实体都包含每个字段的默认值。

```
public class User
{
    public string name ...
    public string DefaultCriteria1
    public string DefaultCriteria2
    ...
} 
```

我的目标是在搜索页面上创建一个按钮，单击该按钮将以某种形式（XML？JSON？）检索当前用户并根据需要设置所有值。我是 jQuery 新手，我不确定要发生这些预期效果需要发生什么。

至于答案，这是我正在寻找的东西

1.  jQuery 如何调用一个动作？
2.  动作以什么格式返回数据？如果可以选择，它们是什么，它们各自的优点/缺点是什么？
3.  如何使用 jQuery 接收这些数据并对其进行解析。

**编辑**：我想要的答案是更高层次的，而不是特定的代码。例如，“jQuery 对操作执行 GET/POST 请求……”、“在这种情况下我会使用 JSON，因为……”、“XML 在 xyz 情况下会很有用”等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:32:04.517

1.  调用操作应该与普通的页面请求没有什么不同。jQuery 有很多内置的方法可以做到这一点，但基本的方法是`$.ajax`
2.  数据以您希望它返回的任何格式返回。不一定有优点/缺点，只要最适合您的需求。我认为 JSON 在这里效果最好。您可以在服务器端控制它，也可以通过使用 jQuery`dataType`选项来控制它`$.ajax`。
3.  举个例子：

* * *

```
 $.getJSON('/action').done(function (data) {
    $("#DefaultCriteria1").val(data.DefaultCriteria1);
 }); 
```

# c - ARM的Clang交叉编译？

> ID：14697614
> 
> 赞同：27
> 
> 时间：2013-02-04T23:25:15.180
> 
> 标签：c, linux, arm, clang, cross-compiling

是否可以为 ARM 处理器设置 Clang 进行交叉编译？主机可能在 x86（AMD64 - 可能是 Ubuntu 12.04）上，目标是 ARM（Raspberry Pi 和 Pandaboard - 将为每个单独编译），我可能在某些时候还希望交叉编译 PowerPC 架构? 程序源代码是 C 语言。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-05T00:25:57.833

要为运行软浮点 Linux 发行版的 Raspberry Pi 进行交叉编译，请添加标志`-ccc-host-triple arm-eabi -marm -mfpu=vfp -mcpu=arm1176jzf-s -mtune=arm1176jzf-s -mfloat-abi=softfp`

要为运行硬浮点 Linux 发行版的 Raspberry Pi 进行交叉编译，请使用标志`-ccc-host-triple arm-eabi -marm -mfpu=vfp -mcpu=arm1176jzf-s -mtune=arm1176jzf-s -mfloat-abi=hard`

为 Pandaboard 交叉编译使用标志`-ccc-host-triple arm-eabiv7 -mthumb -mfpu=neon-fp16 -mcpu=cortex-a9 -mtune=cortex-a9 -mfloat-abi=hard`（假设你的 Pandaboard 运行 Ubuntu）

注意：更新`clang`版本使用`-target`选项而不是`-ccc-host-triple`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T15:37:18.667

请参阅[EmbToolkit](http://www.embtoolkit.org)项目。它可以生成基于 clang/llvm 或 gcc 的交叉编译器工具链。

# c++ - 在 C++ 中从 System::String^ 编组到 char*

> ID：14697615
> 
> 赞同：-2
> 
> 时间：2013-02-04T23:25:17.243
> 
> 标签：c++, c++-cli

[本文](http://msdn.microsoft.com/en-us/library/bb384865.aspx "MSDN")中提到了 System::String 和 const char* 之间的转换。

我的问题是：是否可以使用这种构造（marshal_context）从 System::String 转换为 char*（注意缺少 const）？

如果不是这个问题的推荐解决方案是什么？

我是否被迫使用较旧的 Marshal::StringToHGlobalAnsi？

评论中还有其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:31:33.387

您可以使用 Strings 提供的方法来获取底层的 c 样式字符串`c_str()`。它是`const`，但您可以将其复制到您自己的变量`char*`中。

只需分配一个足够大的缓冲区，就像使用`malloc`，然后`strncpy`进入它。有一百种不同的方法可以做到这一点，但归根结底是保留内存，复制字符串，玩得开心。

# c# - 从 Intranet 链接到内部网络位置

> ID：14697620
> 
> 赞同：1
> 
> 时间：2013-02-04T23:25:37.470
> 
> 标签：c#, file, impersonation

我需要为企业用户提供一种查看/下载位于网络共享上的 Excel 文件的方法。我确定 IIS 具有对该位置的读取权限，我可以通过浏览器导航到它，如下所示：\corp.it.com\root\shared\test.xls

但在我的一生中，我无法让它与 href、超链接或 response.redirect 一起使用。我尝试了很多不同的东西——双向斜线，以 file:// 开头，但没有运气。我也尝试过模拟一个有效用户，我可以从我的代码中读取/复制文件，但我不能使用该模拟来实际导航到该位置。

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:39:59.490

这根本不应该涉及 IIS，您只需要一个格式正确的`file://...`URL。按照规范`file://machinepathisvalidfrom/path`，您可以省略`machinepathisvalidfrom`localhost ，但您必须保留`\`s 。这使得`file:\\\`UNC 紧随其后，`/`更改为`\`：

```
file://///server/share/file.txt 
```

请注意，这可能取决于浏览器。

请参阅[`file://`](http://en.wikipedia.org/wiki/File_URI_scheme#Windows)规范和[其他来源](https://www.google.co.uk/search?q=UNC+file%3A%2F%2F&sourceid=ie7&rls=com.microsoft%3aen-GB%3aIE-Address&ie=&oe=&redir_esc=&ei=wUQQUZC6LIOc0QW0xYG4BA)

# arrays - 比较两个不同格式的哈希数组的最快和最有效的方法

> ID：14697621
> 
> 赞同：0
> 
> 时间：2013-02-04T23:25:37.593
> 
> 标签：arrays, ruby-on-rails-3, comparison, hash

我有两个哈希数组，格式为：

哈希1

```
[{:root => root_value, :child1 => child1_value, :subchild1 => subchild1_value, bases => hit1,hit2,hit3}...] 
```

哈希2

```
[{:path => root_value/child1_value/subchild1_value, :hit1_exist => t ,hit2_exist => t,hit3_exist => f}...] 
```

* * *

如果我这样做

```
Def sample
  results = nil
  project = Project.find(params[:project_id])
  testrun_query = "SELECT root_name, suite_name, case_name, ic_name, executed_platforms FROM testrun_caches WHERE start_date >= '#{params[:start_date]}' AND start_date < '#{params[:end_date]}' AND project_id = #{params[:project_id]} AND result <> 'SKIP' AND result <> 'N/A'"
  if !params[:platform].nil? && params[:platform] != [""]
    #yell_and_log "platform not nil"
    platform_query = nil
    params[:platform].each do |platform|
      if platform_query.nil?
        platform_query = " AND (executed_platforms LIKE '%#{platform.to_s},%'"
      else
        platform_query += " OR executed_platforms LIKE '%#{platform.to_s},%'"
      end
    end
    testrun_query += ")" + platform_query
  end
  if !params[:location].nil? &&!params[:location].empty?
    #yell_and_log "location not nil"
    testrun_query += "AND location LIKE '#{params[:location].to_s}%'"    
  end
  testrun_query += " GROUP BY root_name, suite_name, case_name, ic_name,   executed_platforms ORDER BY root_name, suite_name, case_name, ic_name"
  ic_query = "SELECT ics.path, memberships.pts8210, memberships.sv6, memberships.sv7,   memberships.pts14k, memberships.pts22k, memberships.pts24k, memberships.spb32, memberships.spb64, memberships.sde, projects.name FROM ics INNER JOIN memberships on memberships.ic_id = ics.id INNER JOIN test_groups ON test_groups.id = memberships.test_group_id INNER JOIN projects ON test_groups.project_id = projects.id WHERE deleted = 'false' AND (memberships.pts8210 = true OR memberships.sv6 = true OR memberships.sv7 = true OR memberships.pts14k = true OR memberships.pts22k = true OR memberships.pts24k = true OR memberships.spb32 = true OR memberships.spb64 = true OR memberships.sde = true) AND projects.name = '#{project.name}' GROUP BY path, memberships.pts8210, memberships.sv6, memberships.sv7, memberships.pts14k, memberships.pts22k, memberships.pts24k, memberships.spb32, memberships.spb64, memberships.sde, projects.name ORDER BY ics.path"
  if params[:ic_type] == "never_run"
    runtest = TestrunCache.connection.select_all(testrun_query)
    alltest = TrsIc.connection.select_all(ic_query) 
    (alltest.length).times do |i|
      #exec_pltfrm = test['executed_platforms'].split(",")
      unfinishedtest = comparison(runtest[i],alltest[i])
      yell_and_log("test = #{unfinishedtest}")
      yell_and_log("#{runtest[i]}")
      yell_and_log("#{alltest[i]}")
    end
  end
end 
```

我进入我的日志：

```
test = true
array of hash 1 = {"root_name"=>"BSDPLATFORM", "suite_name"=>"cli",  "case_name"=>"functional", "ic_name"=>"cli_sanity_test", "executed_platforms"=>"pts22k,pts24k,sv7,"}
array of hash 2 = {"path"=>"BSDPLATFORM/cli/functional/cli_sanity_test", "pts8210"=>"f", "sv6"=>"f", "sv7"=>"t", "pts14k"=>nil, "pts22k"=>"t", "pts24k"=>"t", "spb32"=>nil, "spb64"=>nil, "sde"=>nil, "name"=>"pts_6_20"}
test = false
array of hash 1 = {"root_name"=>"BSDPLATFORM", "suite_name"=>"infrastructure", "case_name"=>"bypass_pts14k_copper", "ic_name"=>"ic_packet_9", "executed_platforms"=>"sv6,"}
array of hash 2 = {"path"=>"BSDPLATFORM/infrastructure/build/copyrights", "pts8210"=>"f", "sv6"=>"t", "sv7"=>"t", "pts14k"=>"f", "pts22k"=>"t", "pts24k"=>"t", "spb32"=>"f", "spb64"=>nil, "sde"=>nil, "name"=>"pts_6_20"}
test = false
array of hash 1 = {"root_name"=>"BSDPLATFORM", "suite_name"=>"infrastructure", "case_name"=>"bypass_pts14k_copper", "ic_name"=>"ic_status_1", "executed_platforms"=>"sv6,"}
array of hash 2 = {"path"=>"BSDPLATFORM/infrastructure/build/ic_1", "pts8210"=>"f", "sv6"=>"t", "sv7"=>"t", "pts14k"=>"f", "pts22k"=>"t", "pts24k"=>"t", "spb32"=>"f", "spb64"=>nil, "sde"=>nil, "name"=>"pts_6_20"}
test = false
array of hash 1 = {"root_name"=>"BSDPLATFORM", "suite_name"=>"infrastructure", "case_name"=>"bypass_pts14k_copper", "ic_name"=>"ic_status_2", "executed_platforms"=>"sv6,"}
array of hash 2 = {"path"=>"BSDPLATFORM/infrastructure/build/ic_files", "pts8210"=>"f", "sv6"=>"t", "sv7"=>"f", "pts14k"=>"f", "pts22k"=>"t", "pts24k"=>"t", "spb32"=>"f", "spb64"=>nil, "sde"=>nil, "name"=>"pts_6_20"} 
```

所以我只得到第一个匹配但休息变得不同，我得到一个而不是 4230

我想通过路径和 root/suite/case/ic 进行匹配，然后比较在哈希 1 数组中传递的执行平台与在哈希 2 数组中设置为 true 的平台

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:24:10.847

不确定这是否最快，我是根据您未提供示例代码的原始问题编写的，但是：

```
def compare(h1, h2)
  (h2[:path] == "#{h1[:root]}/#{h1[:child1]}/#{h1[:subchild1]}") && \
  (h2[:hit1_exist] == ((h1[:bases][0] == nil) ? 'f' : 't')) && \
  (h2[:hit2_exist] == ((h1[:bases][1] == nil) ? 'f' : 't')) && \
  (h2[:hit3_exist] == ((h1[:bases][2] == nil) ? 'f' : 't'))
end

def compare_arr(h1a, h2a)
  (h1a.length).times do |i|
    compare(h1a[i],h2a[i])
  end
end 
```

测试：

```
require "benchmark"

h1a = []
h2a = []

def rstr
  # from http://stackoverflow.com/a/88341/178651
  (0...2).map{65.+(rand(26)).chr}.join
end

def rnil
  rand(2) > 0 ? '' : nil
end

10000.times do
  h1a << {:root => rstr(), :child1 => rstr(), :subchild1 => rstr(), :bases => [rnil,rnil,rnil]}
  h2a << {:path => '#{rstr()}/#{rstr()}/#{rstr()}', :hit1_exist => 't', :hit2_exist => 't', :hit3_exist => 'f'}
end

Benchmark.measure do
  compare_arr(h1a,h2a)
end 
```

结果：

```
=>   0.020000   0.000000   0.020000 (  0.024039) 
```

现在我正在查看您的代码，我认为可以通过删除数组创建以及创建需要垃圾收集的数组和字符串的拆分和连接来优化它，这也会减慢速度，但不会减慢你提到。

您的数据库查询可能很慢。对它们运行解释/分析或类似操作，以查看为什么每个都慢，优化/减少查询，在需要的地方添加索引等。此外，检查 cpu 和内存利用率等。它可能不仅仅是代码。

但是，有一些明确的事情需要解决。您还面临一些 SQL 注入攻击的风险，例如：

```
... start_date >= '#{params[:start_date]}' AND start_date < '#{params[:end_date]}' AND project_id = #{params[:project_id]} ... 
```

将参数和变量直接放入 SQL 的任何地方都可能存在危险。您需要确保使用准备好的语句或至少 SQL 转义值。一直阅读： http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:14:22.017

```
([element_being_tested].each do |el|
  [hash_array_1, hash_array_2].reject do |x, y|
    x[el] == y[el]
  end
end).each {|x, y| puts (x[bases] | y[bases])} 
```

枚举要测试的哈希元素。[element_being_tested].each 做 |el|

然后遍历散列数组本身，将给定的散列与由外部循环定义的给定比较的元素进行比较，拒绝那些不适当相等的散列。（`==`实际上可能需要，`!=`但你可以弄清楚那么多）

```
 [hash_array_1, hash_array_2].reject do |x, y|
    x[el] == y[el]
  end 
```

最后，您再次比较采用其元素的集合并集的哈希值。

```
.each {|x, y| puts (x[bases] | y[bases])} 
```

您可能需要测试代码。与其说是用于演示不如说是用于生产，因为我不确定我是否正确阅读了您的代码。如果此答案不令人满意，请发布更大的源样本，包括有问题的数据结构。

关于速度：如果您正在迭代一个大型数据集并比较多个数据集，那么您可能无能为力。也许您可以反转我提出的循环，并使散列数组成为外循环。如果数据结构很大，你不会在 Ruby（实际上是任何语言）中获得闪电般的速度。

# struts2 - 拦截器后处理中 Struts 2 动作变量的修改值未持续

> ID：14697623
> 
> 赞同：1
> 
> 时间：2013-02-04T23:25:41.140
> 
> 标签：struts2, interceptor

我需要在执行操作之前格式化一些变量，并在执行操作后但在渲染之前重新格式化。我添加了一个拦截器。我在调用方法调用之前格式化动作变量值，并在调用方法调用之后重新格式化。在拦截器中调用方法之前所做的更改在动作执行方法中有效。但是在页面渲染时看不到调用方法执行后对动作变量重新格式化所做的更改。框架不会接受拦截器后处理部分中动作变量所做的更改吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:07:24.177

到`invoke`将控制权返回给拦截器时，结果已经呈现。

您需要[按照“Writing Interceptors”文档页面上黄色大框的](http://struts.apache.org/2.x/docs/writing-interceptors.html)`PreResultListener`描述实现一个。

# javascript - jQuery Mobile - PhoneGap - 谷歌地图不工作

> ID：14697626
> 
> 赞同：0
> 
> 时间：2013-02-04T23:25:52.770
> 
> 标签：javascript, google-maps, cordova, jquery-mobile

当此应用程序通过 PhoneGap 捆绑时，我遇到了一个问题，谷歌地图无法加载，但是当通过 iPhone 上的 safari 浏览器查看同一页面时，它可以工作。

我已调试此应用程序并确定 latlng 未初始化：

```
var latlng = new google.maps.LatLng(latitude, longituide); 
```

这是jsfiddle：

```
http://jsfiddle.net/kfcj4/ 
```

请注意，地图页面是从外部页面链接的。因此，无论出于何种原因，它都没有初始化 latlng ..你能告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:29:23.473

终于想通了..你需要在 index.html 中有这个

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

# loops - VBA：循环遍历命名范围列表并根据地址引用将它们粘贴到另一个工作表

> ID：14697628
> 
> 赞同：0
> 
> 时间：2013-02-04T23:26:12.290
> 
> 标签：loops, excel, range, named, vba

我正在制作一些 VBA 代码来帮助我执行以下操作：

粘贴所有命名范围的列表 循环遍历列表并根据列表复制/选择范围 每个选择都将粘贴到另一张给定地址引用的工作表上，该地址与该地址有一定的偏移

我对 VBA 很陌生，所以我整理了一些我认为可以解决问题的代码，但我遇到了运行时错误。有人可以帮我解决问题或提供建议吗？

我的代码在这里：

```
Sub RangeLoop()

Sheets("RANGEMATCH").Select
Range("A1").ListNames

Dim columnrange As Range
Dim m As Long
Dim address As Range

Set columnrange = Sheets("RANGEMATCH").Range("A:A").SpecialCells(xlConstants)

With columnrange
    For m = 1 To columnrange.Areas.Count
        Set address = Sheets("RANGEMATCH").Range(.Areas(m).Cells(1, 7).Value)
        Range(m).Copy Sheets("ETIE").Range(address.Offset(1, 10))
    Next
End With

End Sub 
```

这是我正在使用的示例工作簿：

[https://docs.google.com/spreadsheet/ccc?key=0AodOP_8DnJnFdHJoQ0xBM3JUUGJxT3EyRXN0T2ltUmc&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AodOP_8DnJnFdHJoQ0xBM3JUUGJxT3EyRXN0T2ltUmc&usp=sharing)

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:37:49.607

Range() 函数需要一个字符串变量。范围名称或单元格引用，如“A1”

```
Range(m).Copy Sheets("ETIE").Range(address.Offset(1, 10)) 
```

m 是一个数字，所以它不起作用。您需要引用要复制的内容。我认为这可能只是您`address`之前在该行中设置的对象：

```
address.Copy Sheets("ETIE").Range(address.Offset(1, 10)) 
```

# python - 在当前进程中通过 python 运行 bat 文件

> ID：14697629
> 
> 赞同：3
> 
> 时间：2013-02-04T23:26:32.120
> 
> 标签：python, build, visual-studio-2012

我正在尝试通过 python 脚本构建一个大型系统。我首先需要为 Visual Studio 设置环境。遇到问题，我决定看看是否可以设置并启动 Visual Studio。我先设置了几个环境变量，然后调用`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat x64`.

一旦完成，我会打电话给`devenv /useenv`. 如果我从命令提示符处执行这些操作，一切正常，我可以在 VS 中做我需要做的事情。我这样做的python代码是：

```
import os
vcdir=os.environ['ProgramFiles(x86)']
arch = 'x64'
command  = 'CALL "' +vcdir+'\\Microsoft Visual Studio 11.0\\VC\\vcvarsall.bat" '+arch
os.system(command)
command = "CALL devenv /useenv"
os.system(command) 
```

如果我运行它，bat 文件将运行，当它尝试`devenv`命令时，我得到它无法识别。看起来 bat 文件在与运行脚本的子进程不同的子进程中运行。我真的需要在我当前的进程中运行它。我的最终目标是在 python 脚本中完成整个构建，并且会有很多调用来`devenv`完成构建的主要部分。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-02T19:26:07.337

我和你有完全相同的问题。我试图将 vcvarsall.bat 作为用 python 编写的构建脚本的一部分运行，我需要 vcvarsall 创建的环境。我找到了一种方法。首先创建一个名为 setup_environment.bat 的包装脚本：

```
call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" amd64
set > environment.txt 
```

然后在您调用 vcvarsall.bat 的 python 脚本中，运行包装脚本，然后将文本文件中的环境变量读取到当前环境中：

```
 this_dir = os.path.dirname(os.path.realpath(__file__)) # path of the currently executing script
    os.system('call ' + this_dir + '\setup_environment.bat') # run the wrapper script, creates environment.txt
    f = open('environment.txt','r')
    lines = f.read().splitlines()
    f.close()
    os.remove('environment.txt')
    for line in lines:
        pair = line.split('=',1)
        os.environ[pair[0]] = pair[1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-11T06:57:57.377

这是一个简单的例子，应该开箱即用：

```
import os
import platform

def init_vsvars():
    vswhere_path = r"%ProgramFiles(x86)%/Microsoft Visual Studio/Installer/vswhere.exe"
    vswhere_path = os.path.expandvars(vswhere_path)
    if not os.path.exists(vswhere_path):
        raise EnvironmentError("vswhere.exe not found at: %s", vswhere_path)

    vs_path = os.popen('"{}" -latest -property installationPath'.format(vswhere_path)).read().rstrip()
    vsvars_path = os.path.join(vs_path, "VC\\Auxiliary\\Build\\vcvars64.bat")

    output = os.popen('"{}" && set'.format(vsvars_path)).read()

    for line in output.splitlines():
        pair = line.split("=", 1)
        if(len(pair) >= 2):
            os.environ[pair[0]] = pair[1]

if "windows" in platform.system().lower():
    init_vsvars()
    os.system("where cl.exe") 
```

请注意，python 脚本退出后环境变量不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:41:27.183

你试图做的事情是行不通的。 `vcvarsall.bat`设置环境变量，它只在特定的进程内工作。并且 Python 进程无法`CMD.exe`在同一进程空间内运行进程。

我有几个解决方案给你。

一种是运行`vcvarsall.bat`，然后找出它设置的所有环境变量并让 Python 为您设置它们。您可以使用该命令`set > file.txt`从 CMD shell 中保存所有环境变量，然后编写 Python 代码来解析此文件并设置环境变量。可能工作量太大了。

另一种是创建一个运行的批处理文件，`vcvarsall.bat`然后从该批处理文件中启动一个新的 Python 解释器。新的 Python 解释器将在一个新的进程中，但它会是该进程下的一个子进程`CMD.exe`，它会继承所有的环境变量。

或者，嗯。也许最好的事情就是编写一个运行`vcvarsall.bat`然后运行`devenv`命令的批处理文件。是的，这可能是最简单的，简单就是好的。

需要注意的重要一点是，在 Windows 批处理文件语言（以及之前的 DOS 批处理文件）中，当您执行另一个批处理文件时，另一个批处理文件设置的变量设置在同一环境中。在 *NIX 中，您需要使用特殊命令`source`在同一环境中运行 shell 脚本，但批量运行就是这样。但是你永远不会让变量在进程终止后持续存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-02T13:10:45.097

在@derekswanson08 的答案的基础上，我想出了这个更成熟的方法。使用 VS 2017 自带的 wvwhere.exe。

```
def init_vsvars():
    cprint("")
    cprint_header("Initializing vs vars")

    if "cygwin" in platform.system().lower():
        vswhere_path = "${ProgramFiles(x86)}/Microsoft Visual Studio/Installer/vswhere.exe"
    else:
        vswhere_path = r"%ProgramFiles(x86)%/Microsoft Visual Studio/Installer/vswhere.exe"
    vswhere_path = path.expandvars(vswhere_path)
    if not path.exists(vswhere_path):
        raise EnvironmentError("vswhere.exe not found at: %s", vswhere_path)

    vs_path = common.run_process(".", vswhere_path,
                                 ["-latest", "-property", "installationPath"])
    vs_path = vs_path.rstrip()

    vsvars_path = os.path.join(vs_path, "VC/Auxiliary/Build/vcvars64.bat")

    env_bat_file_path = "setup_build_environment_temp.bat"
    env_txt_file_path = "build_environment_temp.txt"
    with open(env_bat_file_path, "w") as env_bat_file:
        env_bat_file.write('call "%s"\n' % vsvars_path)
        env_bat_file.write("set > %s\n" % env_txt_file_path)

    os.system(env_bat_file_path)
    with open(env_txt_file_path, "r") as env_txt_file:
        lines = env_txt_file.read().splitlines()

    os.remove(env_bat_file_path)
    os.remove(env_txt_file_path)
    for line in lines:
        pair = line.split("=", 1)
        os.environ[pair[0]] = pair[1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T23:45:03.363

您应该使用的是标准库中的一个模块，称为`subprocess`

我已将您链接到[此处标准库中的示例。](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

这是您的情况的示例。

```
import shlex, subprocess
args = shlex.split(your_command)
p = subprocess.Popen(args) 
```

如果您需要知道调用发生了什么，那应该执行它也返回stderr。您的命令甚至可能是包含两个 bat 文件的第三个 bat 文件，因此您可以获得所有环境变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-07T15:07:32.253

另一种解决方案是在与构建命令相同的 os.system 中调用 vcvarsall.bat：

```
os.system("cd " + vcFolder + " & vcvarsall.bat amd64 & cd " + buildFolder + " & make") 
```

# macos - Mac Safari html5 视频不工作

> ID：14697631
> 
> 赞同：0
> 
> 时间：2013-02-04T23:26:41.030
> 
> 标签：macos, html, video-streaming, html5-video

我正在为 .webm、.mp4 视频使用 video-js 播放器，在所有播放器中都可以正常工作，但在 Mac Safari 6 上却不行（没有测试其他版本）。我的 .htaccess 文件中有用于 webm 和 mp4 的 MIME 类型。有没有人有这方面的经验？谢谢

注意：视频在我的本地服务器上运行良好，只是在线是问题。

# codeigniter - 如何在加载视图之前更改我的 URL？

> ID：14697634
> 
> 赞同：0
> 
> 时间：2013-02-04T23:26:46.000
> 
> 标签：codeigniter

我有一个 CodeIgniter 网页，其中包含 (i) 项目列表和 (ii) 用于添加新项目或编辑所选项目详细信息的表单。

要选择要编辑的项目，我有一个“编辑”锚标记，其超链接以`?id=nnn`. 这会产生一个 GET 请求，该请求会填充我所选项目的详细信息字段并重新显示列表。我的 URL 现在包含`site_address/index.php/country?id=151`.

当我提交更改时，列表会正确更新，但我的 URL 保持不变。更新成功后，我需要在控制器中执行什么操作才能删除“？id=151？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:30:38.327

我不确定你在做什么，所以我直接回答：

在您的控制器中，更新后，您可以：

```
redirect('site_address/index.php/country'); 
```

这符合你的意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:38:18.000

通过 php 在请求期望重定向后无法更改 URL

```
redirect('controller/method'); 
```

并且您可以在重定向后使用会话闪存消息成功消息，如果那是您想要重新加载视图的原因

# c++ - C/C++ 赋值运算符实现的低级细节。它返回什么？

> ID：14697643
> 
> 赞同：10
> 
> 时间：2013-02-04T23:27:58.983
> 
> 标签：c++, c, assignment-operator

我是 C++ 世界（以及 C 语言）的新手。并且不知道它的所有细节。但有一件事真的让我很困扰。它是这样的结构： 。据`while (a=b) {...}`我了解，这种魔术之所以有效，是因为 C 和 C++ 中的赋值运算符会返回一些东西。所以问题是：它返回什么？这是记录在案的事情吗？它在 C 和 C++ 中的工作方式相同吗？非常感谢有关赋值运算符及其在 C 和 C++ 中的实现（如果有区别）的低级细节！

我希望这个问题不会被关闭，因为从低层次的角度来看，我找不到关于这个主题的全面解释和好的材料。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T23:39:41.063

对于 C++ 中的内置类型，评估赋值表达式会产生一个左值，它位于赋值表达式的左侧。赋值是在结果可以使用之前排序的，所以当结果转换为右值时，你会得到新分配的值：

```
int a, b=5;
int &c = (a=b);
assert(&c==&a);
b=10;
assert(10==(a=b)); 
```

C 几乎但不完全相同。C 中赋值表达式的结果是一个右值，与新分配给赋值左侧的值相同。

```
int *c = &(a=b); // not legal in C because you can only take the address of lvalues. 
```

通常，如果完全使用赋值的结果，它会被用作右值（例如，`a=b=c`），因此 C++ 和 C 之间的这种差异在很大程度上不会被注意到。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T23:50:02.603

赋值运算符（在 C 中）被定义为返回被赋值的变量的值 - 即表达式`(a=b)`的值是`a`表达式计算后的值。

对于 C++ 中用户定义的运算符重载，可以将其定义为不同的（相同类型），但我怀疑大多数人会认为这是对运算符重载的非常不愉快的使用。

`while`由于类型转换，您可以在 a （或 an等）中使用此（非布尔）值`if`- 在条件上下文中使用值会导致它被隐式转换为在条件上下文中有意义的东西。在 C++ 中，这是`bool`，您可以通过重载定义自己的转换（针对您自己的类型）`operator bool()`。在 C 中，除此之外的任何内容`0`都是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:36:32.973

要理解这样的表达式，你首先要明白，正整数被认为是“真”，而 0 被认为是假。

赋值运算将运算符的左侧`=`作为其值。因此，`while(a=b) { }`这意味着，`while(1 /*true*/)`如果`a`在被分配给之后`b`评估为非零。否则，它被认为是`while(0 /*false*/)`

同理，with 运算符`(a=b)?1:0`是`a`after 赋值给`b`.. 的值，如果非零则取值为 as `true`，执行后面`?`的语句，或者执行后面的语句`:`。

赋值通常计算为运算符左侧的值，`=`其中逻辑运算符（例如`==`，`&&`等）计算为 1 或 0。

注意：对于 C++，它取决于某个运算符是否被重载.. 它还取决于重载运算符的返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T23:41:42.963

C 和 C++ 中的赋值运算符返回被赋值的变量的值，即它们的左操作数。在您的 示例中`a = b`，整个表达式的值是分配给`a`的值（这是`b`转换为 的类型的值`a`）。

因此，您可以说赋值运算符“返回”其左操作数的值。

在 C++ 中它稍微复杂一些，因为您可以`=`使用实际的用户定义函数重载运算符，并让它返回左操作数的值（和类型）以外的东西。

# c# - C# Tuple/List/Generics - 有没有更短的方法？

> ID：14697645
> 
> 赞同：2
> 
> 时间：2013-02-04T23:28:06.193
> 
> 标签：c#, generics, boilerplate

我编写了一个解析命令行参数的程序或算法。首先，需要指定有效参数及其属性（标志、分隔符等）。

现在，我有一个辅助函数，它返回：`Tuple<Tuple<Argument, String>, String>`: 元组中的第一个元素（也是一个元组）包含一个“键值对”，`null`如果找不到对。第二个元素包含一个被标识为选项的字符串，分隔符是`" "`（意味着该值将是命令行中的下一个元素）

该函数的代码如下：

```
private Tuple<Tuple<Argument, String>, Argument> f(string e, List<Argument> valid) {
    var p = valid.Find( x => { return e.StartsWith( x.value ); } );
    if ( p == null )
        return new Tuple<Tuple<Argument, String>, Argument>( null, null );
    if ( p.flag )
        return new Tuple<Tuple<Argument, String>, Argument>( new Tuple<Argument, String>( p, "" ), null );
    if ( p.separator.Equals(" ") && p.value.Length == e.Length )
        return new Tuple<Tuple<Argument, String>, Argument>( null, p );
    var si = e.IndexOf(p.separator);
    if ( si != p.value.Length )
        return new Tuple<Tuple<Argument, String>, Argument>( null, null );
    return new Tuple<Tuple<Argument, String>, Argument>( new Tuple<Argument, String>( p, e.Substring( si + p.separator.Length ) ), null );
} 
```

有什么办法可以写得更短吗？我是否必须明确地将泛型放在那里？

显然，为此创建自己的类将是一个解决方案。但不是还有一个吗？

作为参考，Scala 中的相同代码如下所示：

```
val po = valid.find(p => e.startsWith(p.value))
po match {
    case Some(p) =>
        if ( p.flag )
            (Some((p, "")), None)
        else if ( p.separator.matches(" |\t") && p.value.length == e.length )
            (None, Some(p))
        else {
            val si = e.indexOf(p.separator)
            if ( si != p.value.length )
                (None, None)
            else
                (Some((p, e.substring(si + p.separator.length))), None)
        }
    case _ => (None, None)
} 
```

另外，有没有办法启动`Lists`或`Tuples`以紧凑的方式？如在`List(1, 2, 3, 4)`或`(Key, Value)`代替`Tuple<KeyType, ValueType>(Key, Value)`

问候，
丹尼尔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T23:35:28.947

您可以使用 typedef 来清理代码。从技术上讲，C# 没有 typedef，但您可以使用 usings 来模拟它们。像这样的东西：

```
using MyTuple = Tuple<Tuple<Argument, string>, Argument>;
using MyTuple2 = Tuple<Argument, string>;

public class MyClass {

    private MyTuple f(string e, List<Argument> valid) {
        var p = valid.Find( x => { return e.StartsWith( x.value ); } );
        if ( p == null )
           return new MyTuple( null, null );
        if ( p.flag )
           return new MyTuple( new MyTuple2( p, "" ), null );
        if ( p.separator.Equals(" ") && p.value.Length == e.Length )
            return new MyTuple( null, p );
        var si = e.IndexOf(p.separator);
        if ( si != p.value.Length )
            return MyTuple( null, null );
        return new MyTuple( new MyTuple2( p, 
            e.Substring( si + p.separator.Length ) ), null );
    }
} 
```

关于您关于初始化的问题，我不确定我是否理解。元组已经有一个紧凑的初始化方法，使用构造函数参数。

列表可以使用初始化器，如下所示：

```
var s = new List<string> { "one", "two", "three" }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:56:56.987

看一下您的行，该行说明了显式声明元组类型的“丑陋”：

```
// ugly code
return new Tuple<Tuple<Argument, String>, Argument>( new Tuple<Argument, String>( p, "" ), null ); 
```

1) 惯用的 C# 可能会显式定义一个类

```
class ArgumentMatch {
    public Argument Key;
    public string Value;
    public Argument Unmatched;
}
// if you define the constructor
return new ArgumentMatch(p, "", null);
// or using object initializer syntax,
return new ArgumentMatch { Key = p, Value = "" }; 
```

2）您可以编写自己的通用实用程序函数来避免显式元组声明。C# 将推断函数的类型，而不是构造函数。

```
// using standard static method
static Tuple<T,U> MakeTuple<T,U>(T a, U b) { return new Tuple<T,U>(a,b); }
// and extension method (I don't personally like this since it's a bit 
// of a name-space pollutant)
static Tuple<T,U> Pair<T,U>(this T a, U b) { return new Tuple<T,U>(a,b); }

return MakeTuple(MakeTuple(p, ""), (Argument)null); 
return p.Pair("").Pair((Argument)null); 
```

3) F# 几乎是 scala 示例的逐行翻译。如果您可以使用 scala，则可以考虑在 .NET 中使用 F#。

```
// F# example code
match valid.find(fun x -> e.StartsWith(x.Value)) with
| Some(p) ->
    if p.flag then
        (p, ""),None
    elif p.separator = " " && p.Value.Length = e.Length then
        (None,None),Some(p)
 .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T16:43:19.197

这个问题可能很老了。

`Tuples<T1,T2>`但是，4 年后，Microsoft 在 C# 7 中实现了 ValueTuples。因此，您可以简单地 return代替return `(T1 a, T2 b)`。更多细节在这里[https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#tuples](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#tuples)

该元组使用`System.ValueTuple`which 是结构（值类型）而不是`System.Tuple`类（引用类型）。

# vim - EasyMotion 重复

> ID：14697646
> 
> 赞同：1
> 
> 时间：2013-02-04T23:28:08.977
> 
> 标签：vim

我已经用 EasyMotion 的等价物完全替换了我的 fFtT，我发现它在大多数情况下已经足够了，除非我需要用文本对象重复最后一个动作。例如，在 ct 或 cf 之后的 dot 命令不能按应有的方式工作。有没有办法使这项工作以某种方式工作，或者我是否必须针对这种情况求助于映射原始 ftFT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:39:02.560

我试着大胆一点，不做测试，然后说，不，不能重复。

您输入了一些魔法键（例如**f** . Default `<leader><leader>f`），触发了 easyMotion，尝试移动到 letter `x`。`x`但在您当前的屏幕上，光标后有 10 个。然后你输入`c`移动到右边。现在您尝试键入 dot`.`来重复它。easyMotion 如何知道`x`您接下来想去哪个？

# ruby - 当 gemspec 指定一个悲观约束时，为什么 bundler 认为它需要一个特定的版本？

> ID：14697648
> 
> 赞同：1
> 
> 时间：2013-02-04T23:28:20.103
> 
> 标签：ruby, rubygems, bundler

我的 gemspec 显然需要`active_support ~> 3.0`，但捆绑器没有`bundle install`说我的 gem 需要`active_support = 3.0`。WTF捆绑器？谁能解释一下？

```
$ gem install code_filter
Successfully installed activesupport-3.0.0
Successfully installed active_support-3.0.0
Successfully installed code_filter-0.1.1 
```

* * *

```
$ gem dependency code_filter
Gem code_filter-0.1.1
  active_support (~> 3.0, runtime) 
```

* * *

```
$ bundle
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://192.168.10.22/...
Fetching gem metadata from http://rubygems.org/...........
Fetching gem metadata from http://192.168.10.22/..
Bundler could not find compatible versions for gem "activesupport":
  In Gemfile:
    code_filter (= 0.1.1) ruby depends on
      activesupport (= 3.0.0) ruby

    json_builder (~> 3.1) ruby depends on
      activesupport (3.0.20) 
```

# php - 可以对复杂的 PHP for 循环进行排序

> ID：14697649
> 
> 赞同：0
> 
> 时间：2013-02-04T23:28:21.817
> 
> 标签：php, sorting, for-loop

是否可以对复杂的 for 循环进行排序？我会将值存储在数组中然后按此排序吗？

这是我正在使用的 for 循环，我想按我正在处理的事件的日期和时间进行排序

```
foreach ($recurring_events as $recurring_event):
    if ($recurring_event->period == 'week') { 
        $StartDate = strtotime($event->RequestDateStart);
        $EndDate = strtotime($event->RequestDateEnd);
        $TotalDays = round(($EndDate-$StartDate)/(60*60*24*7));
        for($i=0; $i<($TotalDays-1); $i++) {
            $StartDate += (60*60*24*7);
            if (date('WMY', $StartDate) == date('WMY')) {
                echo '<div class="col-12">';

                echo '<strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Date:</strong> ' . date('l, F j o',$StartDate) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

                echo '</div>';
            }
        }
    }
endforeach; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:31:08.120

把它放在一个数组中，然后参考这篇文章了解如何按日期排序

[如何在 PHP 中对日期数组进行排序](https://stackoverflow.com/questions/597863/how-to-sort-a-date-array-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:37:46.513

在循环输出数据时无法对数据进行排序。相反，对数据进行排序，然后循环排序后的数据以输出。

一个有用的函数是[uasort](http://www.php.net/manual/en/function.uasort.php "uasort()")，它接受一个数组并使用您定义的函数对其进行排序：

```
function sortEvents($a, $b) {
   if (strtotime($a->RequestDateStart) == strtotime($b->RequestDateStart)) {
      return 0;
   }
   return ($a->RequestDateStart < $b->RequestDateStart) ? -1 : 1;
}
uasort($recurring_events,'sortEvents'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:30:12.490

您需要将结果放入数组中，然后对其进行排序，然后将其输出。

```
$output = array();
foreach ($recurring_events as $recurring_event):
    if ($recurring_event->period == 'week') { 
        $StartDate = strtotime($event->RequestDateStart);
        $EndDate = strtotime($event->RequestDateEnd);
        $TotalDays = round(($EndDate-$StartDate)/(60*60*24*7));
        for($i=0; $i<($TotalDays-1); $i++) {
            $StartDate += (60*60*24*7);
            if (date('WMY', $StartDate) == date('WMY')) { //$StartDate >= strtotime('now') &&
                $output[$StartDate] .= '<div class="col-12">';

                $output[$StartDate] .='<strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Date:</strong> ' . date('l, F j o',$StartDate) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

                $output[$StartDate] .='</div>';
            }
        }
    }
endforeach; 
```

然后使用排序

```
sort($output); 
```

假设您的 StartDate 是您需要的日期（那么它应该是一个 unix 时间戳？）

[http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T07:47:49.270

```
foreach ($recurring_events as $recurring_event):
    if ($recurring_event->period == 'week') { 
        $StartDate = strtotime($event->RequestDateStart);
        $EndDate = strtotime($event->RequestDateEnd);
        $TotalDays = round(($EndDate-$StartDate)/(60*60*24*7));
        for($i=0; $i<($TotalDays-1); $i++) {
            $EndDate -= (60*60*24*7);
            if (date('WMY', $StartDate) == date('WMY')) {
                echo '<div class="col-12">';

                echo '<strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Date:</strong> ' . date('l, F j o',$StartDate) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

                echo '</div>';
            }
        }
    }
endforeach; 
```

尝试从结束日期开始并减去它。如果你想要它，我很抱歉，如果我不理解你的问题

# c++ - 在链接 SWIG C++ Wrapper Object for Ruby 时架构 i386 的未定义符号使用 -m32 选项编译

> ID：14697651
> 
> 赞同：2
> 
> 时间：2013-02-04T23:28:38.290
> 
> 标签：c++, ruby, macos, swig, 32-bit

问候 StackOverflow 社区，

我有一个 SWIG 项目，它为 C++ 静态存档库生成 Ruby C API 包装器。我在 64 位 Linux 下生成和编译代码没有任何问题（在 Fedora 和 Debian 下测试）。不幸的是，存档的 OS X 版本只有 32 位。我在 OS X 上构建了一个 32 位版本的 Ruby，以便生成、编译和链接将用作 Ruby C 本机扩展的共享对象：

```
$ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [i386-darwin11] 
```

所有对象都使用*-m32*标志编译：

```
$ g++ -m32 -Wall -g -c -fPIC -rdynamic ../src/CPPExampleWrapper.cpp ../src/CPPExampleException.cpp ../src/CPPExampleObject.cpp ../src/CPPExampleCallbackFunctor.cpp -I../include/ -I../lib/include/ 
```

并相应地链接：

```
g++ -m32 -shared -fPIC -o ../lib/cppexample.so ./bin/CPPExampleWrapper.o ../qa_cpp_utils/bin/CPPExampleObject.o ../qa_cpp_utils/bin/CPPExampleCallbackFunctor.o ../qa_cpp_utils/lib/libcppexamplearchive.a -framework CoreFoundation -lpthread 
```

在链接时，我收到一条错误消息，指出 CPPExampleWrapper.o 中引用的符号对于体系结构 i386 未定义：

```
Undefined symbols for architecture i386:
  "_rb_big2long", referenced from:
      SWIG_AUX_NUM2LONG(unsigned long*)in CPPExampleWrapper.o
  "_rb_big2ulong", referenced from:
      SWIG_AUX_NUM2ULONG(unsigned long*)in CPPExampleWrapper.o
  "_rb_cFalseClass", referenced from:
      _rb_class_of in CPPExampleWrapper.o
  "_rb_cFixnum", referenced from:
      _rb_class_of in CPPExampleWrapper.o
  "_rb_cNilClass", referenced from:
      _rb_class_of in CPPExampleWrapper.o
  "_rb_cObject", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
      _SWIG_Ruby_SetModule in CPPExampleWrapper.o
      _SWIG_Ruby_define_class in CPPExampleWrapper.o
  "_rb_cSymbol", referenced from:
      _rb_class_of in CPPExampleWrapper.o
  "_rb_cTrueClass", referenced from:
      _rb_class_of in CPPExampleWrapper.o
  "_rb_check_type", referenced from:
      _SWIG_Ruby_GetModule in CPPExampleWrapper.o
      _SWIG_Ruby_ConvertPtrAndOwn in CPPExampleWrapper.o
  "_rb_const_get", referenced from:
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
  "_rb_data_object_alloc", referenced from:
      _SWIG_Ruby_SetModule in CPPExampleWrapper.o
      _SWIG_Ruby_NewClassInstance in CPPExampleWrapper.o
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
  "_rb_define_alloc_func", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_define_class", referenced from:
      getNullReferenceError()      in CPPExampleWrapper.o
      getObjectPreviouslyDeletedError()      in CPPExampleWrapper.o
      _SWIG_Ruby_SetModule in CPPExampleWrapper.o
  "_rb_define_class_under", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
      _SWIG_Ruby_define_class in CPPExampleWrapper.o
  "_rb_define_const", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_define_method", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_define_module", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
      _SWIG_Ruby_InitRuntime in CPPExampleWrapper.o
  "_rb_define_module_function", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_define_readonly_variable", referenced from:
      _SWIG_Ruby_SetModule in CPPExampleWrapper.o
  "_rb_define_singleton_method", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_eArgError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
      _wrap_new_JobOrder(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_src_location_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_src_location_get(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_dst_location_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_dst_location_get(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_xfer_params_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      ...
  "_rb_eFatal", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eIOError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eIndexError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eNoMemError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eRangeError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eRuntimeError", referenced from:
      getNullReferenceError()      in CPPExampleWrapper.o
      getObjectPreviouslyDeletedError()      in CPPExampleWrapper.o
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eSyntaxError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eTypeError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_eZeroDivError", referenced from:
      SWIG_Ruby_ErrorType(int)   in CPPExampleWrapper.o
  "_rb_funcall", referenced from:
      _SWIG_RubyRemoveTracking in CPPExampleWrapper.o
  "_rb_gv_get", referenced from:
      _SWIG_Ruby_GetModule in CPPExampleWrapper.o
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
  "_rb_gv_set", referenced from:
      _SWIG_Ruby_GetModule in CPPExampleWrapper.o
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
  "_rb_hash_aref", referenced from:
      _SWIG_RubyInstanceFor in CPPExampleWrapper.o
  "_rb_hash_aset", referenced from:
      _SWIG_RubyAddTracking in CPPExampleWrapper.o
  "_rb_hash_new", referenced from:
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
  "_rb_inspect", referenced from:
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_int2big", referenced from:
      _SWIG_RubyPtrToReference in CPPExampleWrapper.o
      _SWIG_RubyObjectToReference in CPPExampleWrapper.o
      SWIG_From_int(int)   in CPPExampleWrapper.o
  "_rb_intern", referenced from:
      _SWIG_Ruby_InitRuntime in CPPExampleWrapper.o
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
  "_rb_iv_get", referenced from:
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
      _SWIG_Ruby_MangleStr in CPPExampleWrapper.o
  "_rb_iv_set", referenced from:
      _SWIG_Ruby_NewClassInstance in CPPExampleWrapper.o
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
  "_rb_ivar_get", referenced from:
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
  "_rb_ivar_set", referenced from:
      _SWIG_RubyInitializeTrackings in CPPExampleWrapper.o
  "_rb_num2long", referenced from:
      _SWIG_RubyReferenceToObject in CPPExampleWrapper.o
      SWIG_AUX_NUM2LONG(unsigned long*)in CPPExampleWrapper.o
  "_rb_num2ulong", referenced from:
      SWIG_AUX_NUM2ULONG(unsigned long*)in CPPExampleWrapper.o
  "_rb_obj_classname", referenced from:
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_obj_is_kind_of", referenced from:
      _SWIG_Ruby_ConvertPtrAndOwn in CPPExampleWrapper.o
  "_rb_raise", referenced from:
      _wrap_new_JobOrder(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_src_location_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_src_location_get(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_dst_location_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_dst_location_get(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_xfer_params_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_JobOrder_xfer_params_get(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      ...
  "_rb_rescue", referenced from:
      SWIG_AsVal_unsigned_SS_long(unsigned long, unsigned long*)in CPPExampleWrapper.o
      SWIG_AsVal_long(unsigned long, long*)in CPPExampleWrapper.o
  "_rb_str_append", referenced from:
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_str_cat", referenced from:
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_str_cat2", referenced from:
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_str_new", referenced from:
      SWIG_FromCharPtrAndSize(char const*, unsigned long)in CPPExampleWrapper.o
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_str_new_cstr", referenced from:
      _SWIG_Ruby_NewClassInstance in CPPExampleWrapper.o
      _SWIG_Ruby_NewPointerObj in CPPExampleWrapper.o
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_string_value_ptr", referenced from:
      _wrap_XferParams_exclude_patterns_set(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _wrap_CPPTransfer_SetExcludePattern(int, unsigned long*, unsigned long)in CPPExampleWrapper.o
      _SWIG_Ruby_MangleStr in CPPExampleWrapper.o
      SWIG_AsCharPtrAndSize(unsigned long, char**, unsigned long*, int*)in CPPExampleWrapper.o
      Ruby_Format_TypeError(char const*, char const*, char const*, int, unsigned long)in CPPExampleWrapper.o
  "_rb_uint2big", referenced from:
      SWIG_From_unsigned_SS_long(unsigned long)in CPPExampleWrapper.o
  "_rb_undef_alloc_func", referenced from:
      _Init_CPPExample in CPPExampleWrapper.o
  "_rb_undef_method", referenced from:
      _SWIG_Ruby_define_class in CPPExampleWrapper.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

也许并非如此巧合，所有未定义的符号都是 Ruby C API 的成员。我在编译或链接时遗漏了什么吗？或者，为便于生成此扩展而创建的 Ruby 的 32 位 OS X 构建可能有问题？

非常感谢任何反馈。

干杯，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:41:49.420

在这种情况下，问题在于 Xcode 安装了 64 位版本的 Ruby 并将其放在系统路径上。为了解决这个问题，我必须在链接行明确指定 32 位版本的 Ruby 二进制文件的路径：

```
g++ -arch i386 -shared -fPIC -o ../lib/cppexample.so ./bin/CPPExampleWrapper.o ../qa_cpp_utils/bin/CPPExampleObject.o ../qa_cpp_utils/bin/CPPExampleCallbackFunctor.o ../qa_cpp_utils/lib/libcppexamplearchive.a -L/PATH/TO/32BIT/RUBY -framework CoreFoundation -lpthread 
```

这在 Linux 中不是问题，因为系统路径上的 Ruby 版本是为正在链接的体系结构构建的。

詹姆士

# android - 从 facebook 图中获取 json 解析用户名和 id

> ID：14697654
> 
> 赞同：1
> 
> 时间：2013-02-04T23:28:48.483
> 
> 标签：android, facebook-graph-api

我是 facebook api 的新手。我尝试了多个教程，但对我没有任何效果...我使用的是 api 级别 10，平台 2.3.3，连接工作正常，但是当我注销并再次打开应用程序时，它应该向我显示带有我名字的欢迎文本而是应用程序崩溃...

编码：

```
package com.example.kamehameha;

import java.io.IOException;
import java.net.MalformedURLException;

import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.*;
import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;
import com.facebook.model.*;
import com.parse.Parse;
import com.parse.ParseFacebookUtils;
import com.parse.ParseObject;

public class MainActivity extends Activity {
    Facebook fb;
    private SharedPreferences sp;
    TextView welcome;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        String APP_ID = getString(R.string.app_id);
        fb = new Facebook(APP_ID);

        welcome = (TextView)findViewById(R.id.welcome);

        sp = getPreferences(MODE_PRIVATE);
        String at = sp.getString("access_token", null);
        long expires = sp.getLong("access_expires", 0);

        if(at != null){
            fb.setAccessToken(at);
        }
        if(expires != 0){
            fb.setAccessExpires(expires);
        }
        getName();

    }

    @SuppressWarnings("deprecation")
    public void getName(){

        JSONObject obj = null;
        welcome = (TextView)findViewById(R.id.welcome);

        if(fb.isSessionValid()){            

            try {
                String jsonUser = fb.request("me");
                obj = Util.parseJson(jsonUser);
                String name = obj.optString("name");
                welcome.setText("Welcome"+name);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (FacebookError e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }else{
            fb.authorize(this, new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "fbError",Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "onError",Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    Editor editor = sp.edit();
                    editor.putString("access_token", fb.getAccessToken());
                    editor.putLong("access_expires", fb.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "onCancel",Toast.LENGTH_SHORT).show();
                }
            });         
        }
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        fb.authorizeCallback(requestCode, resultCode, data);
    }
} 
```

我在 logcat 中得到什么：

```
02-05 01:10:41.515: E/AndroidRuntime(30114): FATAL EXCEPTION: main
02-05 01:10:41.515: E/AndroidRuntime(30114): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kamehameha/com.example.kamehameha.MainActivity}: android.os.NetworkOnMainThreadException
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.os.Looper.loop(Looper.java:137)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at java.lang.reflect.Method.invokeNative(Native Method)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at java.lang.reflect.Method.invoke(Method.java:511)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at dalvik.system.NativeStart.main(Native Method)
02-05 01:10:41.515: E/AndroidRuntime(30114): Caused by: android.os.NetworkOnMainThreadException
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.facebook.android.Util.openUrl(Util.java:219)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.facebook.android.Facebook.requestImpl(Facebook.java:806)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.facebook.android.Facebook.request(Facebook.java:732)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.example.kamehameha.MainActivity.getName(MainActivity.java:71)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at com.example.kamehameha.MainActivity.onCreate(MainActivity.java:58)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.Activity.performCreate(Activity.java:4562)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-05 01:10:41.515: E/AndroidRuntime(30114):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-05 01:10:41.515: E/AndroidRuntime(30114):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:04:45.203

尝试使用 3.0 的新 Android Facebook SDK，这比您使用的更容易使用，我认为它已被弃用

# wordpress - 为什么某个短代码参数在 WordPress 中不起作用？

> ID：14697655
> 
> 赞同：0
> 
> 时间：2013-02-04T23:28:56.993
> 
> 标签：wordpress

以下是我的简码功能，它将显示会员信息

```
/*[member][/member]*/
add_shortcode('member', 'van_member_shortcode');
function van_member_shortcode( $atts, $content = "" ) {
   extract(shortcode_atts(array(
        'avatar'=>get_template_directory_uri().'/images/default_avatar.jpg',
        'name' => '',
        'job' => '',
        'facebook' => '',
        'twitter' => '',
        'dribbble'=> '',
        'flickr' => '',
        'googlePlus' => ''
   ), $atts));      

   $str='<div class="member">';
   $str.='<div class="avatar">';
   $str.='<div class="overlay">';
   $str.='<div class="social">';
   if($facebook<>''){
   $str.='<a href="'.esc_attr($facebook).'" class="facebook"></a>';
   }
   if($twitter<>''){
   $str.='<a href="'.esc_attr($twitter).'" class="twitter"></a>';
   }
   if($dribbble<>'') {
   $str.='<a href="'.esc_attr($dribbble).'" class="dribbble"></a>';
   }
   if($flickr<>'') {
   $str.='<a href="'.esc_attr($flickr).'" class="flickr"></a>';
   }
   if($googlePlus<>''){
   $str.='<a href="'.esc_attr($googlePlus).'" class="gplus"></a>';
   }
   $str.='</div>';
   $str.='</div>';
   if($avatar==''){
   $str.='<img src="'.get_template_directory_uri().'/images/default_avatar.jpg" />';
   }else{
   $str.='<img src="'.esc_attr($avatar).'" />';
   }
   $str.='</div><hgroup>';
   $str.='<h2>'.esc_attr($name).'</h2>';
   $str.='<span>'.esc_attr($job).'</span>';
   $str.='</hgroup><p class="intro">'.van_shortcode($content).'</p>';
   $str.='</div>';
   return $str;
} 
```

用法：

```
[member name="Ane" job="Graphic designer" avatar="" facebook="http://www.facebook.com" twitter="http://www.twitter.com" dribbble="http://www.dribbble.com" flickr="http://www.flickr.com" googlePlus="http://plus.google.com"]
Aenean malesuada diam ac urna pulvinar posuere fringilla magna congue. Mauris a eros felis.
[/member] 
```

但是当我添加 googlePlus="http://plus.google.com" 时，google 加号图标没有显示，我不知道为什么，我错过了什么吗？

# javascript - 在 ASP.NET MVC 3 的数据表中访问隐藏的 TD

> ID：14697657
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:29:22.627
> 
> 标签：javascript, jquery, asp.net-mvc-3, datatables

我在表中有一行，其中 ID 列被数据表隐藏。这意味着它不会显示在实际的 HTML 中，而只是显示在 Data Tables JS 中。

我写了一些 JS 来尝试提取数据，但同样，它不在 HTML 中，因为它没用。

我在网上查看并找到了诸如

> fnGetPosition() - [http://datatables.net/api#fnGetPosition](http://datatables.net/api#fnGetPosition)
> 
> fnGetData() - [http://datatables.net/api#fnGetData](http://datatables.net/api#fnGetData)

但是，我实际上并没有直接通过 javascript 使用 dataTables，我通过 ASP.NET MVC 3 设置了所有内容，并且不想将所有 Data Tables 内容导入到我的 JS 中。

我曾考虑`display:none`为每个 TD 和 Th 添加一个类，但这看起来很混乱。

有谁知道任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:16:26.280

使用[HTML5 数据属性](http://html5doctor.com/html5-custom-data-attributes/)。您可以使用 jQuery 以多种方式访问​​它。

```
<table>
    <tr data-key1="val1" data-key2="val2">
        <td></td>
    </tr>
</table> 
```

jQuery 选项 1：

```
$(tr).data('key1');
$(tr).data('key2', 'value2'); 
```

jQuery 选项 2：

```
$(tr).attr('data-key1'); 
```

# c# - RX Observable.TakeWhile 在每个元素之前检查条件，但我需要在之后执行检查

> ID：14697658
> 
> 赞同：8
> 
> 时间：2013-02-04T23:29:24.690
> 
> 标签：c#, system.reactive

Observable.TakeWhile 允许您在条件为真时运行序列（使用委托以便我们可以对实际序列对象执行计算），但它会在每个元素之前检查此条件。如何在每个元素之后执行相同的检查？

下面的代码演示了这个问题

```
 void RunIt()
    {
        List<SomeCommand> listOfCommands = new List<SomeCommand>();
        listOfCommands.Add(new SomeCommand { CurrentIndex = 1, TotalCount = 3 });
        listOfCommands.Add(new SomeCommand { CurrentIndex = 2, TotalCount = 3 });
        listOfCommands.Add(new SomeCommand { CurrentIndex = 3, TotalCount = 3 });

        var obs = listOfCommands.ToObservable().TakeWhile(c => c.CurrentIndex != c.TotalCount);

        obs.Subscribe(x =>
        {
            Debug.WriteLine("{0} of {1}", x.CurrentIndex, x.TotalCount);
        });
    }

    class SomeCommand
    {
        public int CurrentIndex;
        public int TotalCount;
    } 
```

这输出

```
1 of 3
2 of 3 
```

我无法获得第三个元素

看这个例子，你可能会认为我所要做的就是像这样改变我的条件 -

```
var obs = listOfCommands.ToObservable().TakeWhile(c => c.CurrentIndex <= c.TotalCount); 
```

但是，observable 永远不会完成（因为在我的真实世界代码中，流不会在这三个命令之后结束）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T03:11:10.153

没有内置运算符可以执行您的要求，但这里有一个用于`Publish`运行两个查询，同时只订阅底层 observable 一次：

```
// Emits matching values, but includes the value that failed the filter
public static IObservable<T> TakeWhileInclusive<T>(
    this IObservable<T> source, Func<T, bool> predicate)
{
    return source.Publish(co => co.TakeWhile(predicate)
        .Merge(co.SkipWhile(predicate).Take(1)));
} 
```

接着：

```
var obs = listOfCommands.ToObservable()
    .TakeWhileInclusive(c.CurrentIndex != c.TotalCount); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T21:15:14.153

最终编辑：

我的解决方案基于此线程中 Sergey 的 TakeWhileInclusive 实现 - [如何根据事件中的条件完成 Rx Observable](https://stackoverflow.com/questions/8126495/how-to-complete-a-rx-observable-depending-on-a-condition-in-a-event)

```
public static IObservable<TSource> TakeUntil<TSource>(
        this IObservable<TSource> source, Func<TSource, bool> predicate)
{
    return Observable
        .Create<TSource>(o => source.Subscribe(x =>
        {
            o.OnNext(x);
            if (predicate(x))
                o.OnCompleted();
        },
        o.OnError,
        o.OnCompleted
    ));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T12:32:05.817

您可以使用`TakeUntil`运算符获取每个项目，直到辅助来源产生值；在这种情况下，我们可以将第二个流指定为谓词通过后的第一个值：

```
public static IObservable<TSource> TakeWhileInclusive<TSource>(
    this IObservable<TSource> source,
    Func<TSource, bool> predicate)
{
    return source.TakeUntil(source.SkipWhile(x => predicate(x)).Skip(1));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T01:47:30.077

~~我认为你追求的是`TakeWhile`，​​而不是`TakeUntil`：~~

 ~~```
var list = (new List<int>(){1,2,3,4,5,6,7,8,9,10});
var takeWhile = list
        .ToObservable()
        .Select((_, i) => Tuple.Create(i, _))
        .TakeWhile(tup => tup.Item1 < list.Count)
        .Do(_ => Console.WriteLine("Outputting {0}", _.Item2)); 
```~~  ~~好的，您想要的东西不存在开箱即用，至少我不知道具有那种特定语法的东西。也就是说，你可以很容易地把它拼凑起来（而且它不是*太*讨厌）：

```
var fakeCmds = Enumerable
    .Range(1, 100)
    .Select(i => new SomeCommand() {CurrentIndex = i, TotalCount = 10})
    .ToObservable();

var beforeMatch = fakeCmds
    .TakeWhile(c => c.CurrentIndex != c.TotalCount);
var theMatch = fakeCmds
    .SkipWhile(c => c.CurrentIndex != c.TotalCount)
    .TakeWhile(c => c.CurrentIndex == c.TotalCount);
var upToAndIncluding = Observable.Concat(beforeMatch, theMatch); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T20:41:21.757

组合，使用新的`SkipUntil`and `TakeUntil`：

**跳过直到** `return source.Publish(s => s.SkipUntil(s.Where(predicate)));`

**TakeUntil** *（含）* `return source.Publish(s => s.TakeUntil(s.SkipUntil(predicate)));`

*完整来源*：[https ://gist.github.com/GeorgeTsiokos/a4985b812c4048c428a981468a965a86](https://gist.github.com/GeorgeTsiokos/a4985b812c4048c428a981468a965a86)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-01-01T13:31:21.190

也许以下方式对某人有用。您必须使用“Do”方法和空的“Subscribe”方法。

```
 listOfCommands.ToObservable()
    .Do(x =>
    {
        Debug.WriteLine("{0} of {1}", x.CurrentIndex, x.TotalCount);
    })
    .TakeWhile(c => c.CurrentIndex != c.TotalCount)
    .Subscribe(); 
```

这样，您无需编写自己的扩展即可获得结果。~~

# asp.net - Entity Framework 如何决定是引用现有对象还是创建新对象？

> ID：14697661
> 
> 赞同：4
> 
> 时间：2013-02-04T23:29:40.230
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

只是出于我的好奇心（和未来的知识），Entity Framework 5 如何决定何时创建新对象与引用现有对象？我可能只是做错了什么，但似乎我时不时地做一些事情：

```
using (TestDB db = new TestDB())
{
    var currParent = db.Parents.Where(p => p.Prop == passedProp).FirstOrDefault();
    if(currParent == null) {
         Parent newParent = new Parent();
         newParent.Prop = passedProp;
         currParent = newParent;
    }
    //maybe do something to currParent here
    var currThing = db.Things.Where(t => t.Prop == passedPropTwo).FirstOrDefault();
    currThing.Parent = currParent;
    db.SaveChanges();
} 
```

EF 将在数据库中创建一个新的 Parent，基本上是 currParent 的副本，然后将 currThing 的 Parent_ID 值设置为该副本。然后，如果我再做一次（例如，如果已经有两个父母），它不会创建一个新的父母，而是链接到第一个。我不太了解这种行为，但是在玩了一段时间之后，就像：

```
using (TestDB db = new TestDB())
{
    var currParent = db.Parents.Where(p => p.Prop == passedProp).FirstOrDefault();
    if(currParent == null) {
         Parent newParent = new Parent();
         newParent.Prop = passedProp;
         currParent = newParent;
    }
    //maybe do something to currParent here
    var currThing = db.Things.Where(t => t.Prop == passedPropTwo).FirstOrDefault();
    currThing.Parent = db.Parents.Where(p => p.ID == currParent.ID).First();
    db.SaveChanges();
} 
```

似乎解决了这个问题。是否有任何原因我应该知道这可能发生，或者我当时的做事方式有什么奇怪的地方？抱歉，我无法更具体地说明确切的代码是什么，我前段时间遇到了这个问题，并用上面的代码修复了它，所以我没有任何理由询问它。更一般地说，EF 如何决定是否引用现有项目而不是创建新项目？仅基于是否设置了ID？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:57:27.130

如果您的特定实例向您`DBContext`提供了该实体的特定实例，那么它将知道它所代表的数据库中的哪些记录以及您对其所做的任何更改都将适用于数据库。如果您自己实例化一个新实体，那么您需要告诉该`DBContext`记录到底是什么，如果它不是应该插入到数据库中的新记录。

在您有多个`DBContext`实例并且一个实例为您提供此实体但您想使用另一个实例来处理和保存该实体的特殊情况下，您必须使用`((IObjectContextAdapter)firstDbContext).ObjectContext.Detach()`孤立该实体，然后使用`((IObjectContextAdapter)secondDbContext).ObjectContext.Parents.Attach()`附加它（或者`ApplyChanges()`如果您'也在编辑它 - 这会要求`Attach`你）。

在其他一些特殊情况下（您的对象已被序列化和/或您有自跟踪实体），可能需要一些额外的步骤，具体取决于您要执行的操作。

* * *

总而言之，如果您的特定实例`DBContext`“知道”您的特定实体实例，那么它将与它一起工作，就好像它直接绑定到数据库中的特定行一样。

# jquery - jQuery .post() 内容通过后续的 jQuery 调用恢复为原始内容

> ID：14697663
> 
> 赞同：0
> 
> 时间：2013-02-04T23:29:54.487
> 
> 标签：jquery, dom, client-server

我已经使用表单和数据库调用将内容替换为 .post() 。新内容是来自 php 查询的另一个表单和数据表。然后我使用新表上的新表单来更改一些 css。但是，当我在新表单中输入数据时，在单击事件中，内容会恢复为原始内容。我知道我没有更改页面内容的服务器端，但我认为 jQuery 可以在当前 DOM 上运行。

原创内容：

```
<div id="bodyContent">
 <form id="usualValidate" class="mainForm" method="post" action="">
 <label>Barcode:<span>*</span></label>
  <input type="text" class="required" name="startBarcode" id="startBarcode"/>
  <input type="submit" value="submit" class="blueBtn" id="startBtn" />
 </form>
</div> 
```

替换内容：

```
<div id="bodyContent">    
 <form id="checkinProcess" class="mainForm" method="post" action="">
  <label>Barcode:<span>*</span></label>
  <input type="text" class="required" name="processBarocdes" id="processBarcodes"/>
  <input type="submit" value="submit" class="blueBtn" id="submitBtn" />
</form>
<table id="shippedBarcodesTable">
  <thead>...</thead>
  <tbody id="shippedBarcodes">
    <tr id="B000503513">...</tr>
    <tr id="B000496123">...</tr>
  </tbody>
</table>
</div> 
```

JS：第一个加载新内容。第二个突出显示加载的表中的一行。突出显示脚本适用于具有整个页面刷新的传统页面设置。但是尝试使用 jQuery 加载动态表，然后使用后续 jQuery 突出显示表中的一行，会导致它恢复到原始源内容。

```
$(document).ready(function() {

$("#startBtn").on("click", startCheckin);
function startCheckin(sevt) {
  sevt.preventDefault();
  var startBC = $("#startBarcode").val();
  $.post("checkin_process.php",
    {startBarcode : startBC},
     function(data) {
       $("#bodyContent").html(data);
     });
}

$("#submitBtn").on("click", highlight); 
function highlight(hevt) {
  hevt.preventDefault();
  var scanbc = $("#processBarcodes").val();
  $("#" + scanbc).addClass("curChecked");
  $('html, body').animate({scrollTop: $("#" + scanbc).offset().top-150}, 750);
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:22:03.053

您的`highlight`函数永远不会被调用，因为它没有与动态创建的按钮连接。由于调用了提交按钮的默认操作 - 表单已提交并且页面正在刷新，因为没有定义操作 URL。这就是为什么您会看到`$.post`呼叫之前的页面。

要解决此问题，您应该更改此行

```
$("#submitBtn").on("click", highlight); 
```

像这样的东西：

```
$("body").on("click", "#submitBtn", highlight); 
```

您应该将您的函数与未动态加载的元素连接到您想要触发此事件作为函数中的第二个参数的项目的选择器`on`。检查[`.on`文档](http://api.jquery.com/on/)以获取更多信息。

顺便说一句，你的函数的定义不必在里面`$(document).ready`。

# jquery - 元素应在悬停时保持打开状态

> ID：14697666
> 
> 赞同：0
> 
> 时间：2013-02-04T23:29:59.977
> 
> 标签：jquery

我尝试在元素 Y 上显示元素 X`mouseenter`并将其隐藏在`mouseleave`元素 Y 上。

到目前为止，它工作正常。

除此之外，我希望元素 X 在悬停在它上面后保持打开状态。
悬停在元素 X 之外后，它应该被隐藏。

你能帮我找出代码中的问题吗？
（我使用 jquery 1.3.2）

```
$(document).ready(function () {
    $('.kukuk').mouseenter(showBox).mouseleave(hideBox);

    function showBox(e) {
        $('.kuk-blok').fadeIn().css(({
            left: 0,
            top: 30
        }));
    }

    function hideBox() {
        $('.kuk-blok').fadeOut();
    }

    $(".kuk-blok").hover(function () {
        $(this).css('display:block');
    }, function () {
        $(this).css('display:none');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:38:34.557

在没有看到实际 HTML 的情况下，与脚本相关的最明显问题似乎是[**css()**](http://api.jquery.com/css/)方法的使用。

该`css()`方法需要 2 个参数来设置一个值：

```
$(".kuk-blok").hover(function () {
    //$(this).css('display:block');
    $(this).css('display', 'block');
}, function () {
    //$(this).css('display:none');
    $(this).css('display', 'none');
}); 
```

或者你也可以使用`show()`，`hide()`如果你也想：

```
$(".kuk-blok").hover(function () {
    //$(this).css('display:block');
    $(this).show();
}, function () {
    //$(this).css('display:none');
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:52:43.213

至于“保持开放”部分，我混合使用了 hover() 和 delay()。

当鼠标离开 elementX 时，延迟 elementY 的隐藏。这提供了足够的时间在隐藏之前将鼠标移动到 elementY。当鼠标进入 elementY 时，它的隐藏动画被取消并保持可见。当鼠标离开 elementY 时，它会隐藏自己。

```
$('#elementX').hover(
  function() { $('#elementY').stop(true,true).fadeIn('fast'); },
  function() { $('#elementY').stop(true,true).delay(350).fadeOut('fast'); }
);

$('#elementY').hover(
  function() { $(this).stop(true,true).show(0); },
  function() { $(this).stop(true,true).delay(150).fadeOut('fast'); }
); 
```

这是一个[jFiddle](http://jsfiddle.net/TUDbj/)。

# c# - System.Speech 在 Windows 服务中引发“系统上未安装语音或当前安全设置不可用”异常

> ID：14697668
> 
> 赞同：1
> 
> 时间：2013-02-04T23:30:09.930
> 
> 标签：c#, windows-services, text-to-speech

长期读者，第一次海报。

我正在 C# .Net 3.5 中开发一个 Windows 服务来执行文本到语音的操作。

我正在使用 System.Speech (Microsoft Speech API 3.x)。

我将该服务部署到 Win2008 x64 服务器，现在它抛出以下异常：

```
System.InvalidOperationException: No voice installed on the system or none available with the current security setting.
   at System.Speech.Internal.Synthesis.VoiceSynthesis.Speak(Prompt prompt)
   at System.Speech.Synthesis.SpeechSynthesizer.Speak(Prompt prompt)
   at System.Speech.Synthesis.SpeechSynthesizer.Speak(String textToSpeak) 
```

该服务在域帐户下运行。如果我将服务更改为在我自己的个人域帐户（具有相当高的权限）下运行，一切正常（因此肯定安装了语音 [Anna]）。所以我很确定这是一个安全问题。

我需要对其他域帐户进行哪些权限/修改才能使其正常工作？

它需要是这个特定的用户，因为它用于 MSSQL 数据库的 Windows 身份验证。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T14:52:17.310

`C:\windows\system32\config\systemprofile\appdata\roaming`简单修复：为运行服务的同一用户授予读/写访问权限。

更多信息：在 Windows 10 Framework 4.6.2 上测试：Microsoft Speech 需要对“roaming”文件夹的文件读/写访问权限，以便创建 ...\roaming\Microsoft\Speech 文件夹以在其中存储文件。

如果您的服务用户不是对以下注册表项具有读/写访问权限的组的成员，您可能还需要添加这些权限：

对于以下内容，包括 WOW6432Node 用于 32 位应用程序，将其保留用于 64 位应用程序

HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\SPEECH\Voices\Tokens（语音名称）

示例：HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\SPEECH\Voices\Tokens\TTS_MS_EN-US_DAVID_11.0

和：

HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\SPEECH\Voices\Tokens(VOICE NAME)\Attributes

示例：HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\SPEECH\Voices\Tokens\TTS_MS_EN-US_DAVID_11.0\Attributes

您可能需要将这些注册表项的所有者从 TrustedInstaller 切换到您的用户或管理员组，以进行这些更改

如果您的应用程序在 IIS 下运行，请为应用程序池用户添加上述权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T19:32:11.983

在 x64 操作系统中，这是由 AnyCPU 构建配置引起的。切换到 x86 构建配置，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T17:13:17.530

我退出Visual Studio并在保存后重新打开它，问题就解决了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-19T10:00:20.357

Simply, run the app as "administrator". ;)

![error](../Images/4956095f597f1df50f9265edb62ba2e8.png) ![run as administrator](../Images/339c8bada4ddced9f6309d68e05cf9e8.png)

# r - R中的多核和data.table

> ID：14697670
> 
> 赞同：7
> 
> 时间：2013-02-04T23:30:21.157
> 
> 标签：r, fork, multicore, data.table

我正在尝试使用`multicore`功能`parallel`，`data.table`但我无法想出正确的方法来做到这一点。代码：

```
require(multicore)
require(data.table)
dtb = data.table(a=1:10, b=1:2)
x = dtb[,parallel(a+1),by=b]

> x
   b   pid fd
1: 1 12243  3
2: 1 12243  6
3: 2 12247  4
4: 2 12247  8 
```

我想呼吁`collect()`这一点，但这些不再是`parallel`对象。应该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T20:44:41.763

我认为这符合您的要求：

```
collect(dtb[, list(jobs = list(parallel(a+1))), by = b][, jobs]) 
```

您不再拥有`parallel`对象并且无法运行 a`collect`的原因是因为您将它们转换*为*a `list`，而不是将它们存储*在*列表中，这就是我在上面所做的。

# r - 如何创建循环作业以更改/转换 r 中多个变量的类型

> ID：14697671
> 
> 赞同：0
> 
> 时间：2013-02-04T23:30:24.547
> 
> 标签：r, loops

我需要使用下面的语句替换整数变量以实现我的目标。

```
training$v1 <- factor(training$v1) 
```

但是我有 100 个这些 v1 到 v100 ：我正在尝试使用此代码对此进行循环..但它给了我错误。

```
for (i in 1:100) {
    training$vi <-factor(training$vi)
} 
```

有什么推荐吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-26T10:23:17.957

`dplyr`不使用显式循环的单行解决方案：

```
training <- mutate_each(training, funs(factor), v1:v100) 
```

或者等效地，使用管道和替代变量选择器：

```
training <- training %>% mutate_each(funs(factor), num_range('v',1:100)) 
```

等等等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:36:04.000

您可以在 for 循环中尝试此操作

```
clm <- paste("v", i, sep = "")
training[, clm] <- factor(training[, clm] 
```

或改用列索引。例如，您要修改的列来自 2:101

```
for (i in 2:101) {
    training[, i] <- factor(training[, i])
} 
```

# wordpress - Woo Commerce - 有人知道如何将产品类别显示为主要的商店登陆页面吗？

> ID：14697672
> 
> 赞同：0
> 
> 时间：2013-02-04T23:30:24.613
> 
> 标签：wordpress, wordpress-theming, shopping-cart, woocommerce

我读了一篇类似的帖子，询问如何显示只有“产品类别”的顶级商店页面 - 没有子类别，没有产品。

我已经选择了 WooCommerce 上的设置 - 设置 | 目录 -

x 在类别页面上显示子类别

x 在商店页面上显示子类别

x 显示子类别时，隐藏产品

我仍然只看到我的产品，而不是任何类别。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:23:40.933

`Show subcategories on the shop page`应该可以解决问题，您是否尝试过禁用任何其他插件并使用默认主题？

一些主题和插件可能会干扰。

# sql - SQL INNER JOIN 与 WHERE ID IN(...) 结果不一样

> ID：14697677
> 
> 赞同：1
> 
> 时间：2013-02-04T23:30:59.103
> 
> 标签：sql

我对这两个查询的结果感到惊讶。我对两者的期望相同。我有两个共享一个公共字段的表，但没有建立关系。table( `A`) 有一个字段`EventID varchar(10)`，table( `B`) 有一个字段`XXNumber varchar(15)`。

表列中的值在表`B`列`XXNumber`中引用。尽管可以容纳 15 个字符，但 179K 行数据中没有一个长度超过 10 个字符。`A``EventID``XXNumber`

所以要求是：

> “为避免重复表B和表A条目，如果XXNumber包含在表A>“事件ID”编号中，则不应计算在内。”

要查看我有多少常见记录，我首先运行了这个查询 - 称之为查询 alpha"

```
SELECT dbo.TableB.XXNumber FROM dbo.TableB WHERE dbo.TableB.XXNumber in
  ( select distinct dbo.TableA.EventId FROM dbo.TableA ) 
```

结果是 5322 行。

以下查询 - 称之为查询增量，如下所示：

```
SELECT DISTINCT dbo.TableB.XXNumber, dbo.TableB.EventId
FROM dbo.TableB INNER JOIN dbo.TableA ON dbo.TableB.XXNumber= dbo.TableB.EventId 
```

已返回 4308 行。

结果的行数不应该相同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T23:57:45.913

该版本将选择与列表中每个*不同*`WHERE ID IN ()`值匹配的所有行（无论您是否在内部选择中编码 - 这无关紧要）。如果给定值多次出现在父表中，您将从父表中为在子表中找到的单个值选择多行。*`DISTINCT`*

 *每次成功连接时，`INNER JOIN`版本都会从父表中选择每一行，因此如果子表中有 3 行具有该值，而父表中有 2 行，则该值的结果中将有 6 行。

要使它们“相同”，请将“DISTINCT”添加到您的主选择中。

为了解释您所看到的，我们需要更多地了解您的实际数据。*

# ruby-on-rails - 为什么我的 Git Bash 不能访问“捆绑包”？

> ID：14697680
> 
> 赞同：1
> 
> 时间：2013-02-04T23:31:18.170
> 
> 标签：ruby-on-rails, ruby, git, bash, bundler

我正在浏览 Rails 教程，我想通过 Git Bash 查看“测试”，因为它看起来测试结果的格式更好。

但是，每当我尝试运行“bundle exec ...等”时。通过 Git Bash，我收到“错误的解释器：没有这样的文件或目录”的错误。现在，我检查了那个特定的目录，并且确实有一个 bundle.exe（因为我最近做了“gem bundle install”或“gem install bundle”）。

现在，需要明确的是，我可以通过 Windows 上的命令提示符运行“bundle exec”/“bundle install”/“bundle anything...”。只是 Git Bash 不想做这些事情。我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:02:29.823

`$PATH`可能无法解释“ ” `C:\Program Files (x86)\...`，如“[找不到捆绑命令。错误的解释器](https://stackoverflow.com/a/10575692/6309)”中所述。

如“ [Bundle command not found Windows x64](https://stackoverflow.com/a/13898595/6309) ”中所示，尝试在更简单的路径中安装任何与 ruby​​ 相关的东西（没有空格，没有特殊字符）。

# windows-server-2008 - IIS Express 无法启动，已注释掉 application.host

> ID：14697681
> 
> 赞同：0
> 
> 时间：2013-02-04T23:31:18.260
> 
> 标签：windows-server-2008, vmware, iis-express

我找到了几个讨论 IIS Express 错误的站点和论坛，但是很难找到一个特定于我遇到的问题的站点和论坛。我正在运行带有 Windows Server 2008 的 VMWare 8——我的笔记本电脑正在运行 Windows 7 Professional。我已经尝试注释掉 HttpLogging 组件——正如这里的几篇文章中提到的——但我仍然收到下面的错误消息。我希望我能提供足够的信息，我很乐意详细说明任何事情，因为我已经有几天无法解决这个问题了。这是我尝试从控制台启动 IIS Express 时收到的错误：

![在此处输入图像描述](../Images/60548fe466c87643a845ccff662fd814.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:03:04.203

我想通了。我有.NET 的客户端版本，而不是实际的框架。细节！

# jquery - 全屏背景幻灯片，允许放置图像

> ID：14697682
> 
> 赞同：0
> 
> 时间：2013-02-04T23:31:23.787
> 
> 标签：jquery, html, slider

好的，我尝试了 2 种不同的全屏/全宽幻灯片。

[http://nicinabox.github.com/superslides/](http://nicinabox.github.com/superslides/)

[http://buildinternet.com/project/supersized/slideshow/3.2/demo.html](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html)

但那些不能像我需要的那样工作。

我正在寻找一个全宽内容滑块，它可以根据屏幕大小进行调整，并允许我将图像放在它上面。

像-----------> Taylorswift.com

看看有一个背景幻灯片，她可以在每张幻灯片的背景上放置图像。

当我尝试使用这两个滑块进行操作时，它不起作用。使用第一个滑块，图像刚刚被拉伸。第二个滑块不是 html 滑块。

我什至尝试自己调整CSS。

任何人都知道我在哪里可以找到像 ----> Taylorswift.com 上的滑块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:49:59.983

我认为您正在查看的是 Royal Slider 中的内容。[http://dimsemenov.com/plugins/royal-slider/](http://dimsemenov.com/plugins/royal-slider/)

你可以在这里查看各种实现[http://dimsemenov.com/plugins/royal-slider/templates/](http://dimsemenov.com/plugins/royal-slider/templates/)

我使用这个滑块，它有点酷。我与他们没有任何关系，只需确保您在购买前检查其他替代品

# twitter-bootstrap - 在同一行 - 引导

> ID：14697686
> 
> 赞同：0
> 
> 时间：2013-02-04T23:31:47.103
> 
> 标签：twitter-bootstrap, html-lists

我有这个代码：

```
 <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Pacientes</li>
      <li class="active"><a href="#"><img src="../../img/catalogo_pacientes.png"/></a></li>
      <li><a href="#">Editar Paciente</a></li>
      <li><a href="#"><img src="../../img/add_paciente.png"/></a></li>
      <li class="nav-header">Administrativo</li>
      <li><a href="#"><img src="../../img/exportar_dados.png"/></a></li>
      <li><a href="#">Adicionar Campos</a></li>
    </ul>
  </div><!--/.well --> 
```

无法弄清楚如何使它作为 li 内容保持在同一行，最好在它们之间有一些填充。

我正在使用 display:inline 进行一些测试，但我想不出将它放在 CSS 上的正确方法

- 编辑 -

我有一些问题要在这里添加评论，所以我将在这里进行编辑。

您提出的解决方案奏效了！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-21T04:06:15.003

如果您使用的是 Bootstrap 4，您可以使用 Flexbox 实用程序来替代内联样式。我遇到了一个类似的问题，让字形和文本`<li>`保持在同一行。这是我解决问题的方法。

```
<ul class="nav navbar navbar-left d-flex d-inline-flex ">
  <li class="nav-item d-inline-flex  align-items-center mr-2"><a class="nav-link d-inline-flex" href="#"><i class="fa fa-user-o mr-2" aria-hidden="true"></i>Login</a></li>
  <li class="nav-item d-inline-flex  align-items-center mr-2"><a class="nav-link d-inline-flex" href="#"><i class="fa fa-pencil-square-o mr-2" aria-hidden="true"></i>Register</a></li>
</ul> 
```

在这里，我使用 Font Awesome 中的字形图标。

这是一个使用无序列表上 的和类的[JSFiddle 。](https://jsfiddle.net/jjkind/qc3bscxy/23/)`.list-inline``.list-inline-item`

这是另一个[JSFiddle](https://jsfiddle.net/jjkind/2sq9xf3c/4/)，它也可以在 Bootstrap 4 中使用并使用内联弹性框。

任何一种方法都应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T20:01:25.623

要在一行上显示列表，css 需要具有`display: inline`属性。此属性必须应用于`li`元素。

这个 CSS 可以正常工作。还要注意填充。

```
ul li {
  display: inline;
  padding: 10px;
} 
```

编码时，请给你的`<ul>`元素一个 ID，然后在该 ID 上应用 CSS，而不是在通用`<li>`元素上应用它。

[JSFIDDLE 演示](https://jsfiddle.net/g9qkr4vw/)

# javascript - 在 Backbone.js 中拖放模型的 id

> ID：14697689
> 
> 赞同：1
> 
> 时间：2013-02-04T23:32:07.543
> 
> 标签：javascript, backbone.js, drag-and-drop, marionette

我正在尝试仅在屏幕上拖放卡片模型的 ID。因此，第一部分是在事件上使用 setData() 设置 id。我已经使卡片模板中的卡片元素具有属性 draggable="true"。当我单击拖动卡片时，出现此错误：未捕获的类型错误：无法调用未定义的方法“setData”

```
var CardView = Marionette.ItemView.extend({
    template: tmpl,
    events: {
        'dragstart .card-container': 'dragStart',
    },
    dragStart: function (e) {
        e.dataTransfer.setData("Text", this.model.id);
    },
});

return CardView;
}); 
```

我正在使用 Google Chrome、Backbone.js 和 Marionette

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:43:50.150

您可以像这样设置数据：

`e.originalEvent.dataTransfer.setData('Text', this.model.id);`

这是因为 Backbone 使用 jQuery 连接事件，并且`e`是一个[jQuery 事件](http://api.jquery.com/category/events/event-object/)对象。

# plsql - 在 Oracle 10G 中使用 PLSQL 展平数据

> ID：14697690
> 
> 赞同：0
> 
> 时间：2013-02-04T23:32:09.617
> 
> 标签：plsql, oracle10g

有如下三个表：

```
Client (Client_Id)
Order (Order_Id, Client_Id)
OrderItem (OrderItem_Id, Order_Id) 
```

如何获取`ClientId`由客户制作的所有 OrderItem_Id（序列化为字符串）的列表以及逗号分隔的列表？

**注意**客户不能有多个订单。

这是一个例子：

输入：

```
Client: 100
Order: 50, 100
OrderItem: [{1, 50}, {2, 50}, {3, 50}] 
```

预期结果：`100, "1,2,3"`

我正在使用 Oracle 10G（即将移至 11G），`java`请不要，不要游标，不要临时表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:43:02.557

[WM_CONCAT](https://stackoverflow.com/questions/1967796/oracle-function-replicate-wm-concat)如果 < 11g 或[LIST_AGG](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)或可能是[XMLAGG](http://www.dautkhanov.com/2010/08/listagg-alternative-in-10g.html)

```
Select client_ID, List_Agg(OrderItem_ID, ', ')
from ORDER O
INNER JOIN ORDERITEM OI on OI.Order_ID = O.Order_ID 
```

或者

```
Select client_ID, wm_concat(OrderItem_ID)
from ORDER O
INNER JOIN ORDERITEM OI on OI.Order_ID = O.Order_ID 
```

注意：WM_CONCAT 是一个未记录的函数，使用风险自负；尽管非常有用。

# javascript - 在使用Java的asp（经典）循环期间找到数组中的第二高值

> ID：14697693
> 
> 赞同：2
> 
> 时间：2013-02-04T23:32:15.713
> 
> 标签：javascript, arrays, loops, asp-classic

在 ASP Classic 脚本中，我有一个循环。在每个记录集中都有一个名为“portos”（7、4、12）的数组，我需要在其中转发最高值和第二高值。

现在我得到最大值并将其传递给一个链接：

```
 <script type="text/javascript">
   var v=[<%=portos %>]
   var porto=parseInt((Math.max.apply(0,v)), 10);
   document.links["link"].href += porto;
   </script>
   <a id="link" href="somepage.asp?maxv=">Link</a> 
```

不幸的是，它只能在循环之外工作。在里面，我得到了第一个记录集中的所有数字，而其他记录集中没有。这是一个问题。另一个在标题中：如何将第二高的值放入链接？

我对 Java 完全是个菜鸟，从那以后就一直在思考这个问题……请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:56:24.023

可能最简单的解决方案是将数组从高到低排序，然后获取前两个成员：

```
// Array might be numbers or strings or a bit of both
var x = ['123', '14', 7, 4, '12', -3];

// Sort numbers from higest to lowest
function sortNumReversed(a, b) {

  // Ensure a and b are numbers, lots of ways to do this
  a = Number(a), b = Number(b);

  // Return result of comparison
  return b == a ? 0 : b < a? -1 : 1;
}

x.sort(sortNumReversed);

alert('Highest: ' + x[0] + '\nSecond highest: ' + x[1]); 
```

# highcharts - 在 HighCharts 中使用 CSS 类

> ID：14697695
> 
> 赞同：5
> 
> 时间：2013-02-04T23:32:24.627
> 
> 标签：highcharts

是否可以使用 CSS 类来设置图表的不同元素的样式，而不是使用诸如（fontWeight、fontColor 等）之类的 highchart 选项指定 CSS 样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T09:42:40.553

在许多情况下（工具提示、标签），您可以将 useHTML 设置为 true，然后使用不带 !important 的 CSS 样式或使用格式化程序定义您自己的带有 CSS 样式的元素。

示例[http://api.highcharts.com/highcharts#tooltip.useHTML](http://api.highcharts.com/highcharts#tooltip.useHTML)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T02:12:08.750

是的，您必须使用`!Important`它，因为它是覆盖 inline 的唯一方法`style`。
您的图表呈现在某些内容上，您必须在`chart.rendertTo`选项上传递它的 id。
因此，您可以通过图表容器匹配元素，例如。

```
#container text {
    font-size: 14px !Important;
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/46qeH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T16:58:44.043

您可以在 highcharts 'chart' 选项中使用 css 类名，但这些更改不会反映在导出的图表上。例如：

```
chart{
    type: 'line',
    className: 'someCss'
} 
```

CSS：

```
.someCss{
    border-top-left-radius: 25px;
    font-weight: bold;
    font-style: italic;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T16:25:08.593

您的 highcharts 图表是 html 中的 SVG。您需要检查 SVG 源代码以了解类的名称，然后才能在 CSS 中使用它们。您需要添加 !important，因为 SVG 中已经存在一些默认样式。

例如，您可以使用

```
text { 
    fill:red !important;
    font-family: "Arial" !important;
    font-size  : 12px !important;
} 
```

定义默认字体颜色、系列和样式

或者

```
.highcharts-yaxis-labels text
{
   (some css )
} 
```

定义 y 轴标签样式

# javascript - wordpress中的滑动框

> ID：14697696
> 
> 赞同：2
> 
> 时间：2013-02-04T23:32:40.120
> 
> 标签：javascript, jquery, wordpress, position, css-position

我希望我的网站有像 [this site] 这样的滑动框

我可以通过将属性`text widget`设置为来做到这一点。但它不会向下滑动。我必须在这里使用 Javascript 吗？谢谢这是我的代码`position``fixed`

```
 <div id="primary" class="widget-area" role="complementary">
            <ul class="xoxo">

<li id="text-4" class="widget-container widget_text">           <div class="textwidget"><table border="0">
    <tbody>
       <tr>
            <td>
                <p style="text-align: center">
                    <a href="http://nwfighting.com/files/2013/01/jiujitsuofferclean.png">
                        <img class="alignright size-full wp-image-4449" title="jiujitsuoffer" src="http://nwfighting.com/files/2013/01/jiujitsuofferclean.png" alt="" width="200" height="165" />
                    </a>
                </p>
<p style="text-align: center"></p>
                <p style="text-align: center">
                    <span style="font-size: 18px;color: #002aff">
                        <strong>
                            And Get a 2nd Video "Jiu Jitsu Fitness <BR>Secrets!"
                        </strong>
                    </span>
                </p>
                <p style="text-align: center">
                    <strong>
                        <span style="font-size: 16px">
                            And Ask About Our 30 Days Free Offer!
                        </span>
                    </strong>
                </p>
                <p>
                        <p>
                  <p style="text-align: center">
                    <strong>
                        <span style="font-size: 18px">
                            -Enter Your Info Here to Get Your Free Video-
                        </span>
                    </strong>   
                </p>
</p>
                </p>
            </td>
        </tr>
            <td>
<script type="text/javascript" src="https://cn112.infusionsoft.com/app/form/iframe/323c5df08af18d52623818df2e915c02"></script>
            </td>
        </tr>
    </tbody>
</table>
</div>
        </li>           </ul>
        </div><!-- #primary .widget-area --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:57:44.293

该站点实际上使用了一个使用 Javascript 的插件。您可以简单地使用此脚本并完成它

```
http://wordpress.org/extend/plugins/strx-magic-floating-sidebar-maker/ 
```

希望这会有所帮助

# c++ - 当 extern 声明和定义之间的类型不匹配时，会有什么行为？

> ID：14697698
> 
> 赞同：3
> 
> 时间：2013-02-04T23:33:09.923
> 
> 标签：c++, linker, extern, undefined-behavior, typechecking

假设我有两个文件：

==文件1==

```
extern char* foo; 
```

==文件2==

```
double foo; 
```

尽管类型不匹配，这两个文件似乎与 g++ 和 clang++ 都可以很好地编译和链接。据我了解，推荐的做法是将 extern 声明放在两个文件都包含的标头中，因此 File2 将引发重新定义错误。

我的问题是：

*   根据 c++ 标准，这是否会导致未定义的行为？如果不是 File1 中的*foo*中的内容是什么？
*   链接器能捕捉到这种类型不匹配吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:28:41.373

> 根据 c++ 标准，这是否会导致未定义的行为？

好吧，真正的问题是这是否是*未定义的行为*，或者它是否被标准指定为格式错误*（*用标准术语）。因为，显然，这是不正确的。我试图从标准中找到一些关于此的内容，但无济于事。然而，在许多类似的情况下，例如 decl/def 不匹配或在链接器上抛出一些奇怪的东西（参见第 3.5、7.5 节，或搜索“extern”或“linkage”），标准通常会说：

该程序格式错误，无需诊断。

所以，我敢打赌，假设这里也是这种情况是非常安全的。这意味着这是错误的代码，比“未定义的行为”更糟糕，因为 UB 通常会对特定的实现有某种合理的行为（尽管你不应该推测这种行为会是什么，当然也不应该依赖它推测）。“格式错误”一词在标准中使用得非常随意，您可以或多或少地推断出它意味着代码是 FUBAR。这也意味着根据标准，链接器不需要以允许它捕获此类错误的方式实现，这就是它正确编译和链接的原因，但在你运行它时请抓住你的袜子.

> 链接器能捕捉到这种类型不匹配吗？

理论上，是的。链接器实现可以将变量的类型编码（使用名称修饰）到其外部符号中，因此能够限制与类型匹配的事物的链接（例如，重载函数），或者在发生时抛出诊断（错误）它遇到类型不匹配。我认为与标准相比，前者过于宽松。

但是，我所知道的所有编译器都不会破坏变量的名称，因此，您可以假设这种不匹配是“格式错误的，不需要诊断”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T00:01:51.260

> 根据 c++ 标准，这是否会导致未定义的行为？

当然是。

> 如果不是 File1 中的 foo 中的内容是什么？

嗯，它的值为零，因为`double foo;`没有设置任何东西。`foo`但是，由于您不能依赖双精度值的零值实际上与指针的 N​​ULL 相同，因此如果您尝试以某种方式将指针与双精度值进行比较，则不知道会发生什么`foo`。

自然，如果指针`foo`被分配，例如`foo = malloc(100);`，那么 double`foo`将包含指针的位，这很可能不是一个特别好的浮点数 - 在 64 位系统上很可能是非法的，因为前几位将最可能为零，这往往意味着该值为零，在这种情况下，其余位也应为零。虽然，它确实取决于浮点的内部格式，以及指针的实际值

> 链接器能捕捉到这种类型不匹配吗？

不，即使在 C++ 中，变量的名称也不会因类型而“损坏”。只有函数具有编码到函数名称中的函数类型。

从技术上讲，链接器或某些编译器组件可以跟踪符号表示的类型，然后给出错误或警告。但是标准没有要求这样做。你需要做正确的事。

# c# - Web 表单和 Web API 部署

> ID：14697700
> 
> 赞同：3
> 
> 时间：2013-02-04T23:33:48.950
> 
> 标签：c#, asp.net-mvc, authentication, asp.net-web-api

最好的旧 Microsoft 文档。有谁知道解释如何使用 Asp.net Web Forms 应用程序部署 Web Api 的任何资源。我在一个单独的类库中有 web api，我使用 jquery 调用。我不希望匿名用户只能通过应用程序访问此服务。我想使用自托管吗？如何锁定服务？展示如何使用的很棒的示例，大量的视频，但没有关于部署的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:17:59.990

对于所描述的内容，您没有正确的架构，但您所拥有的架构是正确的。

如果您从客户端调用 Web 服务（使用 jquery），那么您的 Web 服务必须是面向公众的。

您所描述的是面向服务架构中的 Web 或 WCF 服务。该服务很可能位于不同的服务器上并位于内部网络等。即使它在同一台服务器上，您的要求是它不能公开访问 - 因此您的 jquery 都不会工作，因为该请求是由发起的用户和用户只能向面向公众的服务提出请求。

关于使用表单身份验证来保护您的服务调用的评论是正确的。jQuery 在进行 AJAX 调用时将为您包含表单身份验证 cookie，因此您不必在客户端进行太多更改。

# php - 在 PHP 中调用 openssl_pkcs7_verify 时指定输入格式类型

> ID：14697702
> 
> 赞同：4
> 
> 时间：2013-02-04T23:33:55.013
> 
> 标签：php, openssl, pkcs#7

我有一个加密/php 问题，我希望有人可以帮助我。我的问题是我有一个签名的 PKCS7 块，我试图在 PHP 中验证它。但是，当我运行以下 PHP 命令时：

```
openssl_pkcs7_verify($myfile, PKCS7_BINARY | PKCS7_NOVERIFY, $signers_file); 
```

我收到以下错误：

```
PKCS7 routines:SMIME_read_PKCS7:no content type 
```

如果我像这样使用 ruby​​ 进行操作：

```
p7container = OpenSSL::PKCS7.new(file_contents);
mystore = OpenSSL::X509::Store.new
p7container.verify(nil, store, nil, OpenSSL::PKCS7::NOVERIFY) 
```

有用。

另外，如果我通过 OpenSSL 命令行运行它：

```
openssl smime -verify -inform der -in my_data_file -noverify 
```

它也有效。但是，如果我运行以下命令：

```
openssl smime -verify -in my_data_file -noverify 
```

这是相同的命令，但没有指定通知参数，它失败并出现之前指定的相同错误消息，关于“无内容类型”，这使得我似乎需要指定输入文件格式。有什么想法可以通过 PHP 做到这一点吗？

在此先感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:19:01.223

我通过直接从 PHP 调用 openssl（使用[exec](http://php.net/manual/en/function.exec.php)函数）解决了这个问题。确保在命令中添加 2>&1 以将 stderr 重定向到 stdout，因为消息“验证成功”被发送到 stderr。

```
function verify($signedData, &$data = null) {
    @mkdir("tmp");
    $random = randomString(32);
    $signedFile = "tmp/" . $random . ".pem";
    $file = "tmp/" . $random . ".dat";
    file_put_contents($signedFile, $signedData);
    $output = exec("openssl smime  -verify -in $signedFile -inform DER -noverify -out $file 2>&1");
    if ($output == "Verification successful") {
        $data = file_get_contents($file);
        $result = true;
    } else {
        $result = false;
    }
    @unlink($signedFile);
    @unlink($file);
    return $result;
} 
```

# ruby-on-rails - 等效于 rails 模型或控制器中的 cURL Post 请求调用

> ID：14697705
> 
> 赞同：0
> 
> 时间：2013-02-04T23:34:16.607
> 
> 标签：ruby-on-rails, box-api

当我从终端调用以下代码行时，它可以正常工作。我想在我的 Rails 应用程序中运行它的等效项来刷新我的 access_token 字段（请参阅[使用访问和刷新令牌](http://developers.box.com/oauth/)）：

```
curl https://api.box.com/oauth2/token \
-d 'grant_type=refresh_token&refresh_token={valid refresh token}&client_id={your_client_id}&client_secret={your_client_secret}' \
-X POST 
```

假设我有所有可用的参数，我将如何从模型或控制器发布此请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:17:22.980

我最终在我的身份验证模型中实现了以下代码，以获取刷新的 Box OAuth 令牌。这样我就可以做一些事情，比如`User.authentication.find_by_provider('box').refresh!`它是否过期（我每次通过该`token`方法调用 Box API 时都会检查它）。

```
 require 'uri'
  require 'net/http'

  def refresh!
    case self.provider
    when 'box'
      url = "https://api.box.com/oauth2/token"
      uri = URI(url)
      params = {}
      params["grant_type"] = "refresh_token"
      params["refresh_token"] = self.refresh_token
      params["client_id"] = APP_CONFIG['box_client_id']
      params["client_secret"] = APP_CONFIG['box_client_secret']
      res = Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https') do |http|
               req = Net::HTTP::Post.new(uri.path)
               req.set_form_data(params)
               response = http.request(req)
            end
      res_json = JSON.parse(res.body)
      self.refresh_token = res_json["refresh_token"]
      self.oauth_token = res_json["access_token"]
      self.expires_at = Time.now.to_i + res_json["expires_in"].to_i
      self.save      
    end
  end

  def fresh_token
    case self.provider
    when 'box'
      self.refresh! if self.is_expired? && self.is_refreshable?
      self.oauth_token
    else
      self.oauth_token
    end
  end

  def is_refreshable?
    case self.provider
    when 'box'
      Time.now < self.updated_at + 14.days ? true : false
    else
      nil
    end
  end

  def is_expired?
    case self.provider
    when 'box'
      Time.now.to_i > self.expires_at ? true : false
    else
      false      
    end
  end 
```

例如，要获取 Box 用户配置文件，我会这样做：

```
 def profile
    token = self.fresh_token

    case self.provider
    when 'box'
      profile = JSON.parse(open("https://api.box.com/2.0/users/me?access_token=#{token}").read)
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:51:30.100

```
Net::HTTP.post_form(URI.parse("https://api.box.com/oauth2/token?grant_type=refresh_token&refresh_token=#{valid_refresh_token}&client_id=#{your_client_id}&client_secret=#{your_client_secret}")) 
```

# web-config - Tridion 中的“/”应用程序中的服务器错误

> ID：14697707
> 
> 赞同：0
> 
> 时间：2013-02-04T23:34:26.200
> 
> 标签：web-config, tridion

我们有工作的网站。当我们迁移到 Tridion 时，我们收到以下错误：

> 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：无法加载文件或程序集“SecureBinaries”或其依赖项之一。该系统找不到指定的文件。

源错误：

> ```
>  <add verb="*" path="*.doc" type="SecureBinaries.fileHandler, SecureBinaries" /> 
> ```

源文件：*****\web.config 行：43

> 程序集加载跟踪：以下信息有助于确定无法加载程序集“SecureBinaries”的原因。

**那就是上面的第 43 行导致错误。**对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:40:28.337

SecureBinaries 程序集是在应用程序的 bin 文件夹中还是在运行应用程序的服务器上的 GAC 中？

如果您添加/启用 HKLM\Software\Microsoft\Fusion!EnableLog 键，YSOD 将显示尝试加载 SecureBinaries dll 的位置。

干杯

尼尔

# iphone - 无法设置 NSString 属性，崩溃

> ID：14697711
> 
> 赞同：2
> 
> 时间：2013-02-04T23:34:41.683
> 
> 标签：iphone, ios, objective-c

我的代码：

```
 NSArray *keys = [piecesDict allKeys]; 
    //keys are NSStrings of sprite names, piecesDict is NSDictionary

    for(int i = 0; i < piecesDict.count; i++){
        PuzzlePiece *piece;
        id key = [keys objectAtIndex:i];
        piece.keyName = key; } 
```

崩溃的确切代码是`piece.keyName = key`. 我明白了 `EXC_BAD_ACCESS`。该`.keyName`物业是`(nonatomic, retain)`。我试过制作`key`或`NSString *`铸造它`(NSString *)key`无济于事。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:41:12.060

您无需初始化`piece`，只需声明一个指针并将其悬空。它将指向随机的废话和崩溃。您需要将其分配给适当的实例：

```
PuzzlePiece *piece = [[PuzzlePiece alloc] init]; // or whatever 
```

说真的：在尝试制作 iOS 应用程序之前先**学好 C 语言**，否则你会害了你自己和你的用户。

# javascript - 有没有办法将参数传递给在 jQuery .click 上调用的函数？

> ID：14697712
> 
> 赞同：4
> 
> 时间：2013-02-04T23:34:46.483
> 
> 标签：javascript, jquery

我知道你可以通过点击调用一个函数：

```
$(".foo").on("click", function);
// Assume 'function' is an actual function declared elsewhere. 
```

但是有没有办法使用这种风格将参数传递给函数？我知道你可以这样做：

```
$(".foo").on("click", {namespace: this}, function (e) {
    var that = e.data.namespace;

    that.function(that);
}); 
```

但这不是我想写的。我想在 .click 事件上调用已创建的函数，并使用顶部示例的单行表示法将参数传递给它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:36:46.690

不幸的是，你不能完全按照你的要求做，但你可以通过调用回调函数内部的函数来非常接近：

```
$(".foo").on('click', function () { namedFunction.call(this, yourArguments); }); 
```

如果它适合你，你可以使用它`.apply`来代替。`.call`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:41:08.300

此外，您还可以使用[`bind`](https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
function namedFunction(yourArgument, e) {
    console.log(yourArgument);
}

$(".foo").on("click", namedFunction.bind(this, yourArgument)); 
```

此方法已添加到 ECMA-262 第 5 版中，可能与旧浏览器存在[兼容性问题。](https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)您可以查看**MDN**以了解可能的解决方法。

# ios - 缩放 UIView 及其所有子项

> ID：14697714
> 
> 赞同：59
> 
> 时间：2013-02-04T23:34:59.460
> 
> 标签：ios, objective-c, uiview, scale, subview

我有一个带有大约 50 个 UIButton 的 UIView。所有按钮的位置都以像素为单位，相对于我的主 UIView 的左上角。

视图中使用的所有（背景）图像都具有更高的分辨率。当我将我的应用程序从 iPhone 移植到 iPad 时，我想增加 UIView 的有效像素大小。

现在我正在寻找一种将整个 UIView 放大 2 倍的方法。在不破坏内部元素位置的情况下，这是否可能？

仅供参考，UIView 是在 XCode 中的 NIB 文件中设计的。但我不介意它是否可以以编程方式完成。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-05T23:34:20.677

我最终使用

```
self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 2, 2); 
```

它允许我保留在 Interface Builder 中创建的设计。

不幸的是，在这种情况下图像的清晰度会受到影响，但与以编程方式编写整个设计的脚本相比，这是一个很小的代价。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-12T08:24:37.663

Swift 3.0 更新

```
self.view.transform = CGAffineTransform(scaleX: 2.0, y: 2.0) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-06-15T16:29:20.373

对于 Swift 4.0，缩放 2 倍：

```
myView.transform = CGAffineTransform.identity.scaledBy(x: 2, y: 2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T01:26:01.577

您可以首先以编程方式创建这些按钮，例如使用该`CGRectMake`方法创建这些按钮并将宽度和高度声明为 X 和 Y 并乘以 2 如果 ipad 被检测到原点它也应该分别改变，如果太接近可能会导致重叠彼此

编辑：这完全取决于你的逻辑，我也不确定

# r - 如何从字符串创建带引号的表达式

> ID：14697718
> 
> 赞同：12
> 
> 时间：2013-02-04T23:35:20.600
> 
> 标签：r, expression, data.table, quote

给定一个字符串向量，我想创建一个不带引号的表达式。

```
# eg, I would like to go from 
c("string1", "string2")

# to...  (notice the lack of '"' marks)
quote(list(string1, string2)) 
```

我在删除引号时遇到了一些困难

```
input <- c("string1", "string2")
output <- paste0("quote(list(", paste(input, collapse=","), "))")

# not quite what I am looking for.     
as.expression(output)
expression("quote(list(string1,string2))") 
```

* * *

***如果相关，这用于 data.table 列选择。***
我正在寻找的应该能够适合 data.table 如下：

```
library(data.table)
mydt <- data.table(id=1:3, string1=LETTERS[1:3], string2=letters[1:3])

result <- ????? # some.function.of(input)
> mydt[ , eval( result )]
   string1 string2
1:       A       a
2:       B       b
3:       C       c 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T23:47:10.563

这是我要做的：

```
## Create an example of a data.table "dt" whose columns you want to index 
## using a character vector "xx"
library(data.table)
dt <- data.table(mtcars)
xx <- c("wt", "mpg")

## Construct a call object identical to that produced by quote(list("wt", "mpg"))
jj <- as.call(lapply(c("list", xx), as.symbol))

## Try it out
dt[1:5,eval(jj)]
#       wt  mpg
# 1: 2.620 21.0
# 2: 2.875 21.0
# 3: 2.320 22.8
# 4: 3.215 21.4
# 5: 3.440 18.7 
```

* * *

当像这样[“计算语言”](http://cran.r-project.org/doc/manuals/R-lang.html#Computing-on-the-language)时，查看您尝试构建的对象的结构通常会有所帮助。基于以下内容（一旦您了解`as.call()`and `as.symbol()`），创建所需的语言对象就变得轻而易举：

```
x <- quote(list(wt, mpg))

str(x)
#  language list(wt, mpg)

class(x)
# [1] "call"

str(as.list(x))
# List of 3
#  $ : symbol list
#  $ : symbol wt
#  $ : symbol mpg 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T23:47:30.737

我倾向于`as.quoted`从 plyr 包中使用

```
 outputString <- sprintf('list(%s)', paste(input, collapse = ', ')) 

 library(plyr)
  output <- as.quoted(outputString)[[1]]

  mydt[, eval(output)]
   string1 string2
1:       A       a
2:       B       b
3:       C       c 
```

但是，如果它只是列选择，您可以传递字符串并使用`..`（与 Unix 终端一样，这意味着“查找一级”）

```
mydt[ , ..input]
   string1 string2
1:       A       a
2:       B       b
3:       C       c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-04T18:38:37.530

我发现这些答案对于在表达式中使用变量和多行很有帮助但不完整。要从带有变量和多行的字符串创建带引号的表达式，请使用 quote()、atop() 和 subsititute()：

```
 # Prepare variables
  samp_skewness = round(skewness(dv),2)
  samp_kurtosis = round(kurtosis(dv),2)
  samp_var = round(var(dv))
  samp_summ <- summary(dv)
  num_samples = length(dv)

  # Prepare quotes containing math annotations
  q1 = quote(paste(mu,"="))
  q2 = quote(paste(sigma,"="))
  q3 = quote(paste(gamma[1],"="))
  q4 = quote(paste(gamma[2],"="))

# Use subsitition to construct the expression, passing in the variables and quoted expressions
  title = substitute(atop(paste("Top Title, # samples: ", ns), 
            paste(e1,v1,", ",e2,v2,", ",e3,v3,", ",e4,v4)),
            list(ns=num_samples,v1=round(samp_summ['Mean']),v2=samp_var,
            v3=samp_skewness,v4=samp_kurtosis,e1=q1,e2=q2,e3=q3,e4=q4)) 
```

在ggplot中：...

```
labs(title = title) + 
```

...

# ruby-on-rails - 如何从 gem 中添加到应用程序的 development.rb 配置

> ID：14697722
> 
> 赞同：0
> 
> 时间：2013-02-04T23:35:30.063
> 
> 标签：ruby-on-rails, gem

我正在制作一个添加常用宝石进行开发的宝石，例如子弹宝石。

我想添加到应用程序的 development.rb 配置文件中，这样我就可以配置项目符号 gem，而不必从应用程序的配置文件中进行配置。

据我所知，应用程序的开发配置文件被命名为与应用程序名称间隔开（“SomeApp::Application.configure”）。那么我如何最好地从 gem 中动态添加这个文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:43:46.673

您最好的选择可能是通过创建一个继承自的类并确保它在加载时被 gem 包含来将您的 gem 设置为[rails 引擎。](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)`Rails::Engine`

在您的引擎中，您可以将任何设置工作作为初始化程序块的一部分：

```
module MyGem
  class Engine < Rails::Engine
    initializer "my_gem.setup_environment" do |app|
      case Rails.env
      when 'development'
        # do something
      else
        # do something else
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:46:58.580

与Railtie。您可以访问在其他 Railties 和应用程序之间共享的配置对象：

```
class MyRailtie < Rails::Railtie
  config.to_prepare do
    MyRailtie.setup!
  end
end 
```

# php - 反钓鱼系统（更有效的方法）

> ID：14697728
> 
> 赞同：0
> 
> 时间：2013-02-04T23:36:10.143
> 
> 标签：php, database, security

我今天与大家联系，询问是否有人知道创建自定义反网络钓鱼系统的更“有效”方法，该系统可以识别登录 IP 超过 10 次并将其视为“可信”来源，而新的IP（访问至少 5 次或更少）被“列入黑名单”并阻止帐户。

这是我的代码：

```
 <?php
     $sql="select * from user_table where netuser_id = $_SESSION[netuser_id]";
     $res=mysql_query($sql);
     $data_set=mysql_fetch_array($res);
     if($data_set["current_record"]!=$data_set["last_record"])
     {
?>
<!-- Phishing Announcement -->
You've been phished! D: Please change your account password.
<!-- Phishing Announcement -->
<?php
     }
?> 
```

这段代码有点有效，但我最初的想法是做一些类似的事情：

```
<?php

$sql="select count(*) as a from current_ips where netuser_id = ".$_SESSION["netuser_id"]." and current_ips = $_SERVER[REMOTE_ADDR];";
$result = mysql_query($sql);
$phished=mysql_num_rows($result);
        if($phished==0)
        {
?>
<!-- Phishing Announcement -->
You've been phished! D: Please change your account password.
<!-- Phishing Announcement -->
<?php
        }
        else
        {
?>
<?php
        }
?> 
```

但是，考虑到我希望代码仅在被无法识别的 IP 访问大约 3 次时才自行启动，因此此代码效果不佳。如果已识别的 IP 已被访问超过 5-10 次，则禁用自身。

例子：

我的 IP 总共访问了我的帐户 230/270 次。我表弟的 IP 访问了我的帐户 20 次。我的朋友访问了我的帐户 10 次。我妹妹也是。

因此，它被归类为“受信任”来源，因为 IP 是静态 IP，并且每次我访问该站点时，它都对我有用！:)

但是假设我通过一个无法识别的 IP（我爸爸的房子）访问我的帐户，那么我希望网络钓鱼系统能够自行启用并阻止我访问我的帐户，直到我更改密码。

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:02:48.163

许多不同的平台（Google、Facebook 和几家主要银行）使用使用 SMS 身份验证的 2 因素身份验证系统，您可以非常轻松地将[Google 的 2 身份验证](http://support.google.com/accounts/bin/answer.py?hl=en&answer=180744&rd=1)移动应用程序用于您[自己的网站](https://code.google.com/p/ga4php/)。

在任何情况下，一旦使用 2FA 对用户进行身份验证，您就可以保存一个 cookie，其中包含您也保存在数据库中的秘密，这将确保这是一台可识别的计算机。此 cookie 应在 30 天左右到期。

这样，当用户来自“不受信任的计算机”并且经过身份验证后，您可以使用额外的安全措施（如安全问题等），然后保存该 cookie，以便用户下次进入时免于这些措施。

这种方法比依靠 IP 更好，而 IP 目前几乎不是一种可靠的识别方法。

# php - 新安装的 Eclipse PHP 编辑器 (PDT) 中没有自动完成或功能信息

> ID：14697729
> 
> 赞同：1
> 
> 时间：2013-02-04T23:36:13.377
> 
> 标签：php, eclipse, eclipse-pdt

最近安装了新版本的 Eclipse PDT (3.0.2) 和自动完成，功能信息（ctrl+click），悬停查看更多信息不起作用。相同的安装程序在另一台计算机上工作，相同的项目和工作区在旧版本的 PDT 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:36:13.377

必须重新创建工作区并复制然后重新导入所有项目。

有人建议删除`workspace/.metadata/.plugins/org.eclipse.dltk.core.index.sql.h2`它，让悬停和 crtl+click 工作，但每次尝试自动完成时，eclipse 都会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T08:51:30.740

删除`.metadata/.plugins/org.eclipse.dltk.core.index.sql.h2/*`对我有用。这在升级 Eclipse 之后是必要的。

# mysql - 将 MySQL 表从 MyISAM 切换到 InnoDB - 我该如何处理 FULLTEXT 的列索引

> ID：14697730
> 
> 赞同：0
> 
> 时间：2013-02-04T23:36:14.517
> 
> 标签：mysql, innodb, myisam, indexing, full-text-search

我正在将一些 MySQL 表从 MyISAM 切换到 InnoDB：

我应该用什么代替**FULLTEXT**？

由于**InnoDB**没有**FULLTEXT**。从**MyISAM**切换到**InnoDB**时，我应该在**FULLTEXT**的位置使用什么？

 ****谢谢大家:)

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:54:48.840

从 MySQL 5.6.4 开始，InnoDB 支持全文索引。 [http://dev.mysql.com/doc/refman/5.6/en/fulltext-restrictions.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-restrictions.html)****

# javascript - 使用 javascript 从 html 背景图像“链接”？

> ID：14697735
> 
> 赞同：1
> 
> 时间：2013-02-04T23:36:43.757
> 
> 标签：javascript, html, css

在网站上查看其他地方后，在我看来，将 html 中的背景图像也作为链接有点棘手。在环顾四周时，我偶然发现有人建议使用 java 脚本应该可以解决问题。然而，在测试这个想法时，我没有运气。

如果有人能指出我哪里出错了，我将不胜感激。

我有以下 html 和 javascript 代码：

```
<html>

<head>
<link href = "style1.css" rel = "stylesheet" type = "text/css">
</head>

<div id = "header">
Header
</div>

<body>

<div id = "body">

<div class = "container">

</div>
</div>

</body>

</html>

<script>
document.getElementById('container').onclick = function() {
window.location = 'http://www.google.com/';
}
</script> 
```

我还有以下 CSS：

```
#header{
width:100%;
height:50px;
background-color:black;
}

#body {
width:100%;
height:2000px;
background-image:url('uploads/1.jpg');
cursor:pointer;
}

.container{
 width: 1000px;
margin-right: auto;
margin-left: auto;
height: 1000px;
background-color:white;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:38:51.093

你有`.getElementById('container')`

当`container`实际上是一个类。

也可以`<div class="container" onClick="goToWebsite()"></div>`

```
<script>
 function goToWebsite() {
 window.location = 'http://google.com';
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:41:20.623

您是否尝试过使容器成为一个大链接？这里的诀窍是设置`display:block`。同样从 HTML5 开始，这是完全有效的。

**HTML**

```
<html>
<head>
   <link href = "style1.css" rel = "stylesheet" type = "text/css">
</head>

<div id = "header">
Header
</div>

<body>

    <div id = "body">

        <a class="container" href="http://www.google.com"></a>
    </div>

</body>

</html> 
```

**CSS**

```
.container{
   display: block; 
   width: 1000px;
   margin-right: auto;
   margin-left: auto;
   height: 1000px;
   background-color:white;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T13:22:58.027

对于此示例，您也可以使用纯 HTML 来完成。

```
<a href="http://www.google.com"><div id="image-link"></div></a> 
```

这样，您就有了该 div 的链接，然后在样式表中您可以添加背景图像以供点击。CSS 部分如下所示：

```
#image-link {
        background-image:url('untitled.jpg');
} 
```

只需将背景图像的位置更改为当然。

# ruby - EventMachine 可延迟回调链

> ID：14697737
> 
> 赞同：1
> 
> 时间：2013-02-04T23:36:59.277
> 
> 标签：ruby, eventmachine

我有一些 Deferables，当所有这些都完成时，我需要在回调中做一些事情。

```
defers[0].callback do
    defers[1].callback do
        defers[2].callback do
            yield if block_given?
        end
    end
end 
```

但这非常难看，我必须知道必要回调的确切数量。我怎样才能写得更干净？

就像在 jQuery 中一样，`$.when`允许传递对象数组`$.Deferred`，这太棒了，我可以在 Ruby 中做到吗？

```
$.when(defers).done(function() {
    // do something
}) 
```

由于使用了不兼容的库，我无法使用 em-synchrony。

* * *

解决方案：

```
multi = EventMachine::MultiRequest.new
defers.each.with_index do |defer, i|
    multi.add(i, defer)
end
multi.callback do
    yield if block_given?
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T23:38:42.003

如果您使用的是`em-http-request`gem，则可以使用[`EventMachine::MultiRequest`](http://rdoc.info/github/igrigorik/em-http-request/master/EventMachine/MultiRequest).

如果没有，实现很容易[`em-http-request / lib / em-http / multi.rb`](https://github.com/igrigorik/em-http-request/blob/master/lib/em-http/multi.rb)，所以自己做。

# c++ - 为什么这个 c++ struct 是 96 字节的内存？

> ID：14697738
> 
> 赞同：2
> 
> 时间：2013-02-04T23:37:09.573
> 
> 标签：c++, memory, struct

我不明白为什么这个结构占用 96 字节的内存。

```
struct cell
{
    bool filled;
    bool isParent;
    short int mat;
    bool cx,cy,cz;
    vect norm;
    struct cell* child[8];
    struct cell* parent;
    cell(float pxx=0, float pyy=0, float pzz=0, float ss=0, cell *par=NULL, bool cxx=0, bool cyy=0, bool czz=0);

    void open_read(string);
}; 
```

我知道字对齐，但我认为这至少应该不超过 64 个字节......这个结构将有数百万个实例，所以我怎样才能将内存占用降到最低？我正在使用 linux 并且 vect 是一个向量（3 个浮点数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:51:24.860

对于指针，您无能为力。

但是，您可以使用一位枚举器或位域将所有布尔值压缩为一个字节。根据 的最大值`mat`，您可以将标志和该值压缩为两个字节。这不是一个很大的节省。

如果您希望您的树非常密集，则可以通过将您的孩子分配为池来获得显着收益。也就是说，您有一个`struct cell* child`指针，它引用一个内存块，该内存块是一个由所有八个子元素组成的数组。然后，您可以节省每条记录 7 个指针的空间，并了解每个非叶节点将分配比它需要的更多的内存。您可能需要一个标志来指示节点为空。

或者，如果您想牺牲数组的随机访问，您可以将您的孩子链接为一个列表。然后你只需要一个`child`指针和一个`sibling`指针。每个节点节省 6 个指针，并且不会因池化而浪费。不过，它有点笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:11:02.853

问题显然是 64 位系统上的 8 字节指针

如果你真的想尽量减少内存占用，并且你愿意为实现它而跳舞，我们可以尝试减少指针大小

不建议使用 32 位指针，因为那样您只能访问 4 GB 的内存，如果您使用大量内存，这可能还不够

我可以建议这种有点疯狂的方法：

对于您的结构，使用自定义分配器而不是常规堆。自定义分配器基本上意味着对于此特定结构的实例，您正在使用您自己管理的单独堆。在 Windows 操作系统上，使用 HeapCreate() 很容易做到这一点，在 Linux 上，使用这个问题引用的 mmap：[HeapCreate, HeapAlloc in Linux, private allocator for Linux](https://stackoverflow.com/questions/2880639/heapcreate-heapalloc-in-linux-private-allocator-for-linux)

因为我们为这个结构类型有一个单独的堆，所以这个堆只会分配和释放这个结构的实例。这本身就是一项重大优化，因为具有完全相同大小的所有分配消除了堆碎片。

现在，为了诀窍。由于每个实例都在这个单独的堆中，我们可以给它一个索引。只需取其分配的指针，减去堆起始指针并除以结构大小。堆中的第一个结构将获得索引 0，第二个是索引 1，依此类推。我们要做的是保存结构的索引而不是结构的指针。这些索引更节省空间，并且可以很容易地转换回指针。

这种方法当然只会最小化指向您的单元结构的指针。而不是通用堆中的通用指针。如果你觉得除以结构体大小是危险的（当你这样做时假设所有结构体在堆中都是连续的），跳过这一步，它只会节省几个位。简单地替换堆开始可能足以为您节省大量空间。

有点矫枉过正，但还是很有趣:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:30:39.070

Talkol 关于使用自定义分配器的建议是一个很好的建议。如果结构将按随机顺序访问，并且您对实现最佳性能感兴趣，那么工作可能会很好，这样您的结构就是字节，并且在 64 字节边界上对齐。数据以称为“行”的 64 字节块的形式从主内存中提取到缓存中；CPU 可以在将块从主内存提取到缓存所需的时间内执行数十或数百条指令。如果结构将按随机顺序访问，则将它们对齐意味着读取每个结构将只需要加载一个缓存行而不是两个。

请注意，如果数据有时会被顺序访问，较小的结构可能会提高效率，因为即使访问一个需要获取两个缓存行，访问下一个也最多需要获取一个；如果一个结构占用 48 个字节，则每组访问的四个结构只需要 3 次高速缓存线提取，但随机访问平均需要 1.5 次高速缓存线提取。

# batch-file - 批处理文件执行后如何自动关闭cmd窗口？

> ID：14697739
> 
> 赞同：103
> 
> 时间：2013-02-04T23:37:14.250
> 
> 标签：batch-file, cmd

我正在运行一个包含这两行的批处理文件：

```
start C:\Users\Yiwei\Downloads\putty.exe -load "MathCS-labMachine1"
"C:\Program Files (x86)\Xming\Xming.exe" :0 -clipboard -multiwindow 
```

这个批处理文件用于运行 Xming 应用程序，然后是 PuTTY 应用程序，这样我就可以通过 SSH 连接到我大学的计算机实验室。

但是，如果我运行它并且 Xming 尚未打开，那么一旦我从 PuTTY 终端退出，cmd 窗口就会保持打开状态。只有当我已经运行 Xming 时，当我关闭 PuTTY 终端时，cmd 窗口才会关闭。我尝试添加`exit`到批处理文件的最后一行，但无济于事。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-05T06:45:41.310

将批处理文件修改为`START`两个程序，而不是`START`一个和`CALL`另一个

```
start C:\Users\Yiwei\Downloads\putty.exe -load "MathCS-labMachine1"
start "" "C:\Program Files (x86)\Xming\Xming.exe" :0 -clipboard -multiwindow 
```

如果你这样运行它，启动程序后不会有任何 CMD 窗口保持打开状态。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-03-04T16:22:32.197

您通常会以一行结尾的批处理文件`exit`。如果要确保文件已运行并且 DOS 窗口在 2 秒后关闭，可以添加以下行：

```
timeout 2 >nul
exit 
```

但是`exit`如果您的批处理文件打开另一个窗口，该命令将不起作用，因为当第二个窗口打开时，旧的 DOS 窗口也会显示。

**解决方案：**例如，有一个很棒的小免费程序，叫做*BgInfo*，它将显示有关您计算机的所有信息。假设它位于名为 的目录中`C:\BgInfo`，要使用开关从批处理文件运行它`/popup`并在它仍在运行时关闭 DOS 窗口，请使用：

```
start "" "C:\BgInfo\BgInfo.exe" /popup
exit 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-01-21T01:35:30.737

To close the current cmd windows immediately, just add as the last command/line:

```
**move nul 2>&0**
```

Try move **`nul`** to nowhere and redirect the *stderr* to *stdin* will result in the current ***window cmd.exe being closed***

This is different from ***closing a bat***, or exiting it using **`goto :EOF`** or **`Exit /b`**

I even opened a question to find an answer that would explain behavior. **[Would that be a bug? Immediate closing of the current cmd window when executing: move nul 2>&0](https://superuser.com/questions/1620933/would-that-be-a-bug-immediate-closing-of-the-current-cmd-window-when-executing)**

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-30T20:31:18.390

如果要将命令分成每个文件一个命令，可以执行

```
cmd /c start C:\Users\Yiwei\Downloads\putty.exe -load "MathCS-labMachine1" 
```

在另一个文件中，你可以做

```
cmd /c start "" "C:\Program Files (x86)\Xming\Xming.exe" :0 -clipboard -multiwindow 
```

命令 cmd /c 将在运行 exe 后关闭命令提示符窗口。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-24T22:37:47.870

这对我有用。我只是想在退出游戏后自动关闭命令窗口。我只需双击桌面上的 .bat 文件。没有捷径。

```
taskkill /f /IM explorer.exe
C:\"GOG Games"\Starcraft\Starcraft.exe
start explorer.exe
exit /B 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-26T19:58:08.727

您可以尝试一些危险的：`taskkill /IM cmd.exe`..dangerous bcz，它会杀死打开的 cmd 以及在它之前打开的任何 cmd。

或者添加验证以确认您拥有正确的 cmd.exe，然后通过 PID 将其杀死，例如：

```
set loc=%time%%random%
title=%loc%
for /f "tokens=2 delims= " %%A in ('tasklist /v ^| findstr /i "%loc%"') do (taskkill /PID %%A) 
```

如果您想先检查它（并且可能安装了 pstools），请替换`(pslist &&A)`或`(tasklist /FI "PID eq %%A")`。`(taskkill /PID %%A)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-01T12:40:18.007

我有这个，我补充说`EXIT`，最初它没有用，我想每需要`called program exiting`这里另一个回复中提到的建议，但它现在可以不用多说 - 不知道是什么原因造成的，但要注意的是我调用数据文件`.html`而不是处理它的程序`browser.exe`，我没有编辑任何其他内容，但足以说明使用 bat 文件访问这些 Web 文档的主要访问页面并且只有在`title.bat`根文件夹`contents.bat`中`index.bat`与子文件夹中的其余内容。

即：contents.bat 读取

```
cd subfolder
"contents.html"
exit 
```

如果我只更改这些项目的 bat 文件图标以适应它们所在的上下文，它看起来也会更好，但这是另一回事，将 bat 文件隐藏在子文件夹中并在根文件夹中创建自定义图标快捷方式与图像要求定制也隐藏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-11T02:12:18.767

有时您可以参考Windows“快捷方式”文件来启动应用程序，而不是使用“.bat”文件，这样就不会出现残留提示问题。但它不像 bat 文件那样灵活。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-12-06T22:05:48.407

只需尝试`/s`如下所列。

作为批处理文件类型的最后一行：

```
exit /s 
```

上述命令将关闭 Windows CMD 窗口。

`/s`- 代表静默（它会等待来自键盘的输入）。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2022-01-14T23:12:55.743

我做类似下面的事情

```
start ""
** code
exit 
```

这对我有用

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2021-01-13T08:40:06.697

这对我有用

```
cd "C:\Program Files\SmartBear\SoapUI-5.6.0\bin"

start SoapUI-5.6.0.exe -w "C:\DATA\SoapUi\Workspaces\Production-workspace.xml"

exit 
```

# rally - Rally 2 SDK：网格中每一列的组合框过滤器

> ID：14697741
> 
> 赞同：1
> 
> 时间：2013-02-04T23:37:20.947
> 
> 标签：rally

我有一个 rallygrid，我想为网格中的每一列创建一个组合框/文本搜索框。组合框将填充列的可能值。在组合框中选择一个值将相应地过滤网格。

Rally 中是否有内置方式来执行此操作？还是我手动创建所有内容并将其绑定在一起？

这是我的拉力网格：

```
this.add({
    xtype: 'rallygrid',
    store: customStore,
    columnCfgs: [
        { text: 'Project', dataIndex: 'Project' },
        { text: 'Type', dataIndex: 'Type' },
        { text: 'State', dataIndex: 'State' }
    ]
}); 
```

我想创建 3 个可以搜索和过滤网格的组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:08:56.883

2.0 预览版 SDK 中包含的网格当前不支持此功能，但它可能在我们的 backlog 中某处实现此功能，因为像 Rally 中的 Backlog 这样的页面有它。

您可以使用一些用户贡献的示例来帮助您入门：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature) [http://www.sencha.com/forum/showthread.php?150918-Grid- Header-Filters&p=660276#post660276](http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters&p=660276#post660276) [http://dev.sencha.com/deploy/ext-4.0.0/examples/grid-filtering/grid-filter-local.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid-filtering/grid-filter-local.html)

# jsfl - JSFL 如何将库项目的实例添加到不同的库项目？

> ID：14697744
> 
> 赞同：0
> 
> 时间：2013-02-04T23:37:56.587
> 
> 标签：jsfl

假设我在库中有一个名为“Face”的 MovieClip。我在同一个名为“Eyes”的库中还有一个不同的 MovieClip。

如何制作“眼睛”的实例并将其添加到“面部”影片剪辑中？

```
var mainFla = fl.documents[0];
var mainFlaTimeline = mainFla.getTimeline();
var mainFlaLibrary = mainFla.library; 
```

另一种说法是，想象这是 Flash。我会双击人脸库项目。将 Eyes 的副本拖动到 Face 时间轴，就完成了工作。Face 现在包含一个 Eyes 的实例。

时间线、图层和框架似乎没有我预期的“addItem”方法，所有示例似乎都假设我正在向文档的舞台添加一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:10:27.357

我无法用语言很好地解释这个概念。我认为 addItem() 正在向阶段添加实例（如在根阶段或 as3 阶段）。但是，当您在一个项目上进入编辑模式然后 mainFla.addItem() 时，它会出现，该编辑的项目会获取实例。

```
mainFlaLibrary.editItem("Face");
selectedIndex = mainFlaLibrary.findItemIndex("Eyes");
selectedItem = mainFlaLibrary.items[selectedIndex];
mainFla.addItem({x:0, y:0}, selectedItem); 
```

这相当于双击面，然后从库中将眼睛的一个实例拖入其中。

# vms - 在 VMS 上的 DCL 中等待后台子进程

> ID：14697745
> 
> 赞同：1
> 
> 时间：2013-02-04T23:38:07.923
> 
> 标签：vms, openvms, dcl

我正在寻找一种方法来启动多个后台进程以与 DCL 并行运行。我想等待他们全部完成并知道他们是否都成功了，或者至少有一个失败了。这就像在 bash 中使用 & 并等待。

我阅读了 spawn/nowait 的文档，但在生成多个子进程后我看不到等待的方法。我想我可以让子进程在退出时写入文件并在睡眠循环中从父进程中检查文件？但是有更好的/内置的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:47:33.933

两种可靠的方法是：

如果您`submit`将它们作为批处理作业，您可以使用`synchronize`命令依次等待每个作业。

使用`run/detach`启动进程允许您指定`/mailbox`接收终止消息。

子流程略有不同。一种方法是共享一个逻辑名称表，并让每个子流程相应地更新其状态。不保证会报告异常终止。

如果您愿意做一些额外的工作，您可以创建几个小应用程序来使用锁管理器或公共事件标志集群来传达状态更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:04:11.210

```
$   BKGVFY = F$VERIFY(0)  !******Start of BACKGROUND******
$!*DOC+
$!*
$!* Procedure    : BACKGROUND.COM
$!*
$!*   Abstract   : Invoke Commands in Background
$!*
$!*   Prototype  : @MYDCL:BACKGROUND "RUN PROG1" "@COMFIL" "RUN PROG2"
$!*
$!*   Description: This utility is used to run background spawned jobs. It
$!*                will return control after all of the jobs have run.
$!*
$!*          Note: Requires GRPNAM or SYSNAM Privilege
$!*
$!* Parameters   : P1 = Background Command (Required)
$!*                P2 = Background Command (Optional)
$!*                P3 = Background Command (Optional)
$!*                P4 = Background Command (Optional)
$!*                P5 = Background Command (Optional)
$!*                P6 = Background Command (Optional)
$!*                P7 = Background Command (Optional)
$!*                P8 = Background Command (Optional)
$!*
$!* Change Control Log:
$!*
$!*        Who         Date      Description
$!*  --------------- ----------  -----------
$!*  Scott Kelbell   02/16/2010  Initial version
$!*
$!*DOC-
$   !
$   ! VALIDATION
$   !
$   IF P1 .EQS. "" .OR. P1 .EQS. "HELP" .OR. P1 .EQS. "?" THEN EXIT
$   IF F$PRIVILEGE("GRPNAM")
$   THEN
$     BKGPRIV = "GROUP"
$   ELSE
$     IF F$PRIVILEGE("SYSNAM")
$     THEN
$       BKGPRIV = "SYSTEM"
$     ELSE
$       WRITE SYS$OUTPUT "%BACKGROUND-F-IPRV, insufficient priv (GRPNAM)"
$       EXIT
$     ENDIF
$   ENDIF
$   !
$   ! INITIALIZATION
$   !
$   BKGN     = "BKG" + F$UNIQUE()   ! Background Logical Prefix
$   BKGFIL   = "SYS$LOGIN:" + BKGN  ! Background File Prefix
$   BKGCNT   = 0                    ! Parameter Counter
$   !
$   ! MAINLINE
$   !
$ LOOP:
$   IF BKGCNT .EQ. 8 THEN GOTO LOOP_WAIT
$   BKGCNT = BKGCNT + 1
$   IF P'BKGCNT' .NES. ""                           ! For each parameter
$   THEN
$     BKGLOG = BKGFIL + ".LOG_" + F$STRING(BKGCNT)
$     CREATE/FDL=NL: 'BKGFIL'.TMP_'BKGCNT' ! Create the command procedure
$     OPEN/APPEND 'BKGN' 'BKGFIL'.TMP_'BKGCNT'
$     BKGLNM = BKGN + "_" + F$STRING(BKGCNT)
$     WRITE 'BKGN' "$ SET VERIFY"
$     WRITE 'BKGN' "$ ! Background Job #", P'BKGCNT', " ", F$TIME()
$     WRITE 'BKGN' "$ SET NOON"
$     WRITE 'BKGN' "$ DEFINE/NOLOG/", BKGPRIV, " ", BKGLNM, " RUNNING"
$     WRITE 'BKGN' "$ ", P'BKGCNT'
$     WRITE 'BKGN' "$ DEFINE/NOLOG/", BKGPRIV, " ", BKGLNM, " FINISHED"
$     WRITE 'BKGN' "$ EXIT ! End of Background Job"
$     CLOSE 'BKGN'
$     DEFINE/'BKGPRIV' 'BKGN'_'BKGCNT' INITIALIZED
$     SPAWN/NOWAIT/OUTPUT='BKGLOG'/NOLOG @'BKGFIL'.TMP_'BKGCNT'
$     GOTO LOOP
$   ENDIF
$   BKGCNT = BKGCNT - 1
$   !
$   ! WAIT LOGIC
$   !
$ LOOP_WAIT:
$   CURLOG = BKGN + "_" + F$STRING(BKGCNT)
$   IF F$TRNLNM("''CURLOG'") .NES. "FINISHED"
$   THEN
$     WAIT 00:00:05
$     GOTO LOOP_WAIT
$   ENDIF
$   DEASSIGN/'BKGPRIV' 'BKGN'_'BKGCNT'
$   DELETE/NOLOG/NOCONFIRM 'BKGFIL'.TMP_'BKGCNT';*
$   BKGCNT = BKGCNT - 1
$   IF BKGCNT .GT. 0 THEN GOTO LOOP_WAIT
$   !
$   ! EXIT LOGIC
$   !
$ EXIT:
$   BKGVFY = F$VERIFY(BKGVFY) !******End of BACKGROUND****** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:50:43.343

您总是可以在 Perl 中进行管道打开，然后使用 waitpid 等待它：

```
$ perl -e "my $pid = open F, '| wait 00:00:05'; print qq/waiting for $pid\n/; waitpid($pid, 0); close F;"
waiting for 6233 
```

将您要等待的实际 DCL 命令替换为“wait 00:00:05”命令。这里的文件句柄 F 是一个只写文件句柄，连接到孩子的标准输入/SYS$INPUT。如果子进程对 SYS$INPUT 进行任何阻塞读取，父进程将需要写入它所期望的任何内容，否则子进程将挂起。或者你可以把管道字符 | 在命令的末尾，然后 F 将是一个连接到孩子的 stdout/SYS$OUTPUT 的只读文件句柄。如果等待多个孩子，您可能需要使用 wait() 而不是 waitpid()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T22:10:56.450

只需轮询 suprocess 计数。f$getjpi 的“PRCCNT”参数是您需要的值，名称可能会产生误导（作为总进程作业数），它是子进程数。那是一个“oneliner”（当然，“按 kB 支付”可能会将其拆分为半页）：

```
$ spawn/nowait command1
$ spawn/nowait command2
...
$waitall: if f$getjpi("","PRCCNT").gt.0 then pipe wait 0::.5 ; goto waitall
... 
```

将轮询间隔设置为合理的值，适合命令执行时间，当然，0.5 秒不是通用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T14:21:50.100

正如所指出的，SYNCHRONIZE 是最稳健的方法。

一种草率但通常足够的方法是首先使用 spawn/nowait 创建寿命最短的任务，然后 spawn/wait 预期最后运行的任务。

为了加强这一点，您可以使用 F$CONTEXT 进入轮询循环，查看 MASTER_PID = your-pid 计算返回的 F$PID 值的数量，以及可选的 F$GETJPI

Hackish 方法是例如尝试重用进程名称，或尝试打开不允许共享的进程日志文件，该文件仅在进程消失后才有效，或解析 SHOW PROC/SUB 输出。

也许您可以创建一个简单的 shell 程序来执行一堆 (lib$)spawns 并使用完成 AST 来确定所有完成的时间？

您可能还想查看 CRTL 函数 waitpid。

嗯，海因。

# javascript - 匿名 javascript 函数中可访问的变量

> ID：14697747
> 
> 赞同：0
> 
> 时间：2013-02-04T23:38:29.243
> 
> 标签：javascript, arrays, anonymous-function

我在匿名函数中访问 temp 时遇到问题。切换工作正常。这是解决方法，因为我无法将回调函数设置为`.toggle()`

我希望`.toggle("drop", 200, function(){});`在函数中调用第二个切换以在文本更改时显示元素。我没有让这个工作，所以我尝试了`setTimeout`解决方法，但这也行不通。请告诉我如何访问其中的 temp 或如何使用的回调`.toggle()`？

```
for (var i = 0; i < array.length; i++) {
  var temp = array[i].split("&");

  setTimeout(function(){
    $('td[vvalue="'+temp[0] + '"] > a').text("A");
  }, 300);

  $('td[vvalue="'+temp[0] + '"]').toggle("drop", 200);
  $('td[vvalue="'+temp[0] + '"]').toggle("drop", 200);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:48:54.307

我认为这可能是您的选择器的问题，而不是函数中的临时值：

```
$('td[vvalue="'+temp[0] + '"] > a').text("A"); 
```

应该是：

```
$('td[value="'+temp[0] + '"] > a').text("A"); 
```

注意“值”的拼写错误。td 元素没有 value 属性。您可能需要重新考虑您的标记。如果您需要自定义属性，html5 具有自定义属性的新 data- 属性。

# ios - 使用 vDSP 复制阵列内容

> ID：14697748
> 
> 赞同：4
> 
> 时间：2013-02-04T23:38:33.357
> 
> 标签：ios, accelerate-framework

我正在使用加速框架来优化我的 DSP 代码。有好几次我想将一个数组（或数组的一部分）的内容复制到另一个数组。

我似乎找不到合适的函数来执行此操作，因此我一直在做一些愚蠢的事情，即将数组乘以 1（或加 0）并以这种方式获取副本。

```
float one = 1;

float sourceArray = new float[arrayLength];
/////....sourceArray is filled up with data

float destArray = new float[arrayLength];

vDSP_vsmul(sourceArray, 1, &one, destArray, 1, arrayLength); 
```

必须有更好的方法来做到这一点！？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T05:18:09.377

如果您愿意使用 Accelerate 的 BLAS 部分，Jeff Biggus 的基准测试[`cblas_scopy()`](https://developer.apple.com/library/ios/#documentation/Accelerate/Reference/BLAS_Ref/Reference/reference.html#//apple_ref/doc/uid/TP30000414-SW25)是比甚至更快`memcpy()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T23:50:43.867

[memcpy](http://pubs.opengroup.org/onlinepubs/009695399/functions/memcpy.html)怎么样？

```
#include <string.h>

memcpy(destArray, sourceArray, arrayLength * sizeof(float)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T02:11:29.527

我可以想到更糟糕的方法`vDSP_vsmul()`；你也可以这样做`vvcopysign()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T10:51:34.660

我认为这是最好的复制方式。

将一个子矩阵的内容复制到另一个子矩阵；单精度。[https://developer.apple.com/documentation/accelerate/1449950-vdsp_mmov](https://developer.apple.com/documentation/accelerate/1449950-vdsp_mmov)

```
func vDSP_mmov(_ __A: UnsafePointer<Float>, 
             _ __C: UnsafeMutablePointer<Float>, 
             _ __M: vDSP_Length, 
             _ __N: vDSP_Length, 
             _ __TA: vDSP_Length, 
             _ __TC: vDSP_Length) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-24T14:59:08.027

您可以使用`vDSP_vclr`and`vDSP_vadd`如下：

```
int sourceLength = 3;
float* source = (float*)malloc(sourceLength * sizeof(float));
// source is filled with data, let's say [5, 5, 5]

int destinationLength = 10;
float* destination = (float*)malloc(destinationLength * sizeof(float));
// destination is filled with ones so [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]

// Prepare the destination array to receive the source array
// by setting its values to 0 in the range [initialIndex, initialIndex + N-1]
int initialIndex = 2;
vDSP_vclr((destination+initialIndex), 1, sourceLength);

// We add source[0, N-1] into destination[initialIndex, initialIndex + N-1]
vDSP_vadd(source, 1, (destination+initialIndex), 1, (destination+initialIndex), 1, sourceLength); 
```

或者更简洁，您也可以使用 Brad Larson 所说的 'cblas_scopy'

```
// Init source and destination
// We copy source[0, sourceLength] into destination[initialIndex, initialIndex + sourceLength]
cblas_scopy(sourceLength, source, 1, (destination+initialIndex), 1); 
```

# html - 使图像 100% 高度但成比例的宽度

> ID：14697751
> 
> 赞同：1
> 
> 时间：2013-02-04T23:38:35.047
> 
> 标签：html, css, twitter-bootstrap

我有一个问题，我想我只是在措辞上遇到问题，这就是为什么我找不到答案。

我有一个网站，其图像在列上跨越 100% 的高度。当您在 1000 像素的视口宽度上方查看它时，它看起来很棒。但是当你向下滚动时，它显然会扭曲并且被超级拉伸，就像这里的图像：

![在此处输入图像描述](../Images/2f5e99d6006ecf1a8281f09147f87744.png)

我的问题是，我怎样才能拥有一个不是背景图像的图像，它可以拉伸 100% 的高度，但保持纵横比。有点像超大的 js 插件，但只在单个 div 上而不是整个背景上。

该网站的实时版本可以在[http://faithpointdallas.com/422studios看到](http://faithpointdallas.com/422studios)

它在 Firefox 中可以按需要工作，并且在 safari 中完全烂透了。有什么方法可以在所有浏览器中完成 firefox 结果？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:46:14.807

为什么不使用背景图像？那里的`background-size`属性正是您想要的。

删除`topImage`HTML 中的 div 并尝试以下操作：

```
div.top {
  background: url("../img/dallas.jpg") no-repeat scroll center center / cover transparent;
  min-height: 300px;
  overflow: hidden;
  position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:45:52.227

我认为您应该使用 CSS 将宽度设为 100%。它应该可以解决您的问题。

```
background-size: 100%; 
```

有关更多信息，请在此处查看[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

# actionscript-3 - FLEX 3 如何有条件地选择列表项？

> ID：14697760
> 
> 赞同：1
> 
> 时间：2013-02-04T23:39:23.010
> 
> 标签：actionscript-3, apache-flex, flex3

FLEXBuilder 3 独立版，SDK 3.5

您好，我有一个带有项目渲染器的列表控件。通过数据绑定，选择列表中的某一项，将对应的数据集以表格形式显示出来进行编辑。通过单击“保存”按钮更新更改。

如果在表单中进行了更改但未保存，我需要提示用户是否尝试移动到另一个列表项。如果他们确认提示，则转到他们单击的项目，放弃他们的更改，如果没有，则留在原处，以便他们有机会单击“保存”。

我已经尝试在列表的单击事件上使用监听器，也使用 preventDefault() 但似乎没有任何东西可以拦截更改所选项目的默认功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:17:16.147

您可以尝试扩展 List 并覆盖**受保护的函数 mouseDownHandler(event:MouseEvent):void**。在那里你可以通过一些逻辑来决定是调用**super.mouseDownHandler(event)**还是什么都不做:)

可能有一个更好的功能可以覆盖和一个更好的地方，但我把这个想法留给你。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:40:05.793

您可以尝试以下方法：

*   在捕获阶段防止鼠标按下事件
*   无论如何都会发生 Itemclick 事件，因此请记住单击的项目索引并显示确认对话框
*   如果需要，请在 alet's close 处理程序中进行实际更改。

这是一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600"
            creationComplete="application1_creationCompleteHandler(event)"
            >
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.CloseEvent;
        import mx.events.FlexEvent;
        import mx.events.ListEvent;

        [Bindable]
        private var formDirty:Boolean = false;              

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            myList.addEventListener(MouseEvent.MOUSE_DOWN, myList_mouseDownHandler, true);  
        }           

        protected function myList_mouseDownHandler(event:MouseEvent):void
        {
            if (formDirty)
            {
                event.preventDefault();
                event.stopImmediatePropagation();
            }
        }

        protected function myList_itemClickHandler(event:ListEvent):void
        {
            if (formDirty)
            {
                var alert:Alert  = Alert.show("Save changes?", "Confirm save", Alert.YES | Alert.NO | Alert.CANCEL, null, alertCloseHandler);
                alert.data = event.rowIndex;
            }
        }

        private function alertCloseHandler(evt:CloseEvent):void
        {
            var alert:Alert = evt.target as Alert;
            switch (evt.detail)
            {
                case Alert.YES:
                    //Save changes
                    //
                    // Whatever....
                    //
                case Alert.NO: 
                    //manually change list index cahnge
                    // we also fall here from Alert.Yes case
                    formDirty = false;
                    myList.selectedIndex = alert.data as int;
                    break;
                case Alert.CANCEL:
                    //Do notthing:
                    break;
            }                   
        }           

        protected function invalidateButton_clickHandler(event:MouseEvent):void
        {
            formDirty = true;   
        }

    ]]>
</mx:Script>
<mx:VBox>
    <mx:List id="myList" itemClick="myList_itemClickHandler(event)">
        <mx:dataProvider>
            <mx:ArrayCollection>
                <mx:String>Item 0</mx:String>
                <mx:String>Item 1</mx:String>
                <mx:String>Item 2</mx:String>
                <mx:String>Item 3</mx:String>
                <mx:String>Item 4</mx:String>
            </mx:ArrayCollection>
        </mx:dataProvider>
    </mx:List>
    <mx:Button id="invalidateButton" click="invalidateButton_clickHandler(event)"  label="{formDirty?'Invalidated':'Invalidate form'}" enabled="{formDirty?false:true}"/>
</mx:VBox> 
```

# php - 如何使用 PDO 从 MySQL 复制行

> ID：14697761
> 
> 赞同：-5
> 
> 时间：2013-02-04T23:39:28.363
> 
> 标签：php, mysql, pdo

我正在使用 PDO 重写我的所有代码。我被困在 PDO 中重写 DuplicateMySQLRecord 函数。

函数 DuplicateMySQLRecord ($table, $id_field, $id)

我只是无法解决这个问题 - 已经采取了很多措施，这一切都是一个悲惨的失败。

有人可以帮帮兄弟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:08:34.290

你为什么要为此做一个函数？

`INSERT INTO my_table SELECT * FROM my_table WHERE column="data"`

请记住，如果您没有唯一的分隔符（id 等），这将导致大问题。

以此为例：

假设我有一个如下所示的表：

```
+-------------+-------+----------+
| something   | other | there_is |
+-------------+-------+----------+
| huh         | what  | no id    |
+-------------+-------+----------+ 
```

我执行

`INSERT INTO my_table SELECT * FROM my_table WHERE there_is="no id"`

现在我们有

```
+-------------+-------+----------+
| something   | other | there_is |
+-------------+-------+----------+
| huh         | what  | no id    |
| huh         | what  | no id    |
+-------------+-------+----------+ 
```

如果我想再次执行它怎么办？那行得通吗？好吧，这次我们会得到：

```
+-------------+-------+----------+
| something   | other | there_is |
+-------------+-------+----------+
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
+-------------+-------+----------+ 
```

接着

```
+-------------+-------+----------+
| something   | other | there_is |
+-------------+-------+----------+
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
| huh         | what  | no id    |
+-------------+-------+----------+ 
```

等等。所以设置一个唯一的标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T23:56:47.973

**不安全的代码——这很容易受到 SQL 注入的攻击。强烈建议正确使用准备好的语句。**

基于函数名：

```
function DuplicateMySQLRecord ($table, $id_field, $id) {
   $result = $dbconn->query("SELECT * FROM ".$table." 
                                WHERE ".$id_field." = '".$id."' LIMIT 1");
   $row = $result[0];
   $SQL = "INSERT INTO ".$table." (";
   $first = true;
   foreach($row as $key=>$val) {
      if($key != $id_field) {
         if(!$first) {
           $SQL.=',';
           $SQL .=$key;
        }
      }
   }
   foreach($row as $key=>$val) {
      if($key != $id_field) {
         if(!$first) {
           $SQL.=',';
           $SQL .="'".$val."'";
         }
      }
   }
   $dbconn->exec($SQL);
 } 
```

}

# python - python log parse创建重复url的dict和带有计数的大小

> ID：14697765
> 
> 赞同：0
> 
> 时间：2013-02-04T23:39:52.090
> 
> 标签：python, parsing, logging, dictionary

我想从以下格式解析日志文件，有多个重复的 url，我想计算每个 url 的总大小以及计算特定类型 url 的大小，最好的方法是什么？

```
/images/img81a.jpg 6620
/images/img88a.jpg 6990
/images/img80b.jpg 5909 
/images/swb-30-furniture.gif 6216 
/images/button-arrow.png 498
/images/button-arrow-down.png 484 
/images/img81a.jpg 6620 
/images/img80b.jpg 5909 
/images/back-to-top_off.gif 1506 
/images/new-logo.gif 3377 
/images/img81a.jpg 6620        

Result:

Total size computation: 11503 
```

所有特定类型的 url 大小计算：

```
 /images/img81a.jpg 19860
 /images/img80b.jpg 11818
 like wise ... 
```

我将所有大小值附加到列表并执行加法以获得总大小结果，但是对于类似类型的 url，大小计算需要二维字典，我猜。我不打算创建它。

```
 a['/images/img81a.jpg'][6620] = 3
 a['/images/img88a.jpg'][6990] = 1
 a['/images/img80b.jpg'][5909] = 2
 like wise ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:44:28.107

假设您将所有行都放在一个列表中：

```
with open('log.txt') as f:
    dico = dict()
    total_value = 0
    for line in f:
        #Feeding the dictionary
        split_array = line.split()
        possible_key = split_array[0]
        value = int(split_array[1])

        #If url has already been processed, update the value
        #Else, initialize the entry in the dictionary => default=0
        dico[possible_key] = dico.get(possible_key, default=0) + value

        #Updating the global sum
        total_value = total_value + value 
```

用法：

```
dico['/images/img81a.jpg'] => 19860 
```

# prestashop - 按名称运行 prestashop 钩子

> ID：14697767
> 
> 赞同：0
> 
> 时间：2013-02-04T23:40:12.467
> 
> 标签：prestashop

我想在我的菜单元素中插入一个挂钩。

Store 是 prestashop 中的一个模块，它钩住右侧栏。

我想在我的菜单 elem 中加载 store 模块输出

blockcontact 模块钩子函数

```
public function hookDisplayRightColumn()
{
    global $smarty;

    $smarty->assign(array(
        'telnumber' => Configuration::get('blockcontact_telnumber'),
        'email' => Configuration::get('blockcontact_email')
    ));
    return $this->display(__FILE__, 'blockcontact.tpl');
} 
```

我想通过一些在我的菜单元素中返回这个方法输出的方式来触发这个模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T16:52:33.397

您不能在模板文件中添加新钩子并使用 {hook h="[nameHook]" mod="[namemodule]"} 。

示例：`{hook h="displayTop" mod="blocksearch"}`- 此代码显示 blokseacrh 为 displayTop 挂钩生成的内容，您在哪里使用它

# go - 切片内容的大小（以字节为单位）

> ID：14697771
> 
> 赞同：6
> 
> 时间：2013-02-04T23:40:47.570
> 
> 标签：go, slice

我正在尝试向 OpenGL 发送一些数据。借助 Sizeof，发送数组很容易：

```
array := [...]Whatever {lots of data}
array_ptr := gl.Pointer(&array[0])
array_size := gl.Sizeiptr(unsafe.Sizeof(array))
gl.BufferData(gl.ARRAY_BUFFER, array_size, array_ptr, gl.STATIC_DRAW) 
```

我想使用切片而不是数组，因为我的 3D 模型的大小在编译时是未知的。

**如何检索切片内容的大小（*以字节为单位）？*** 我想到了这个：

```
size := uintptr(len(slice)) * unsafe.Sizeof(slice[0]) 
```

但不是很笼统。实际上，我需要知道切片的底层类型才能使其工作，并且假设数组的所有元素都具有相同的大小。

我还可以遍历整个切片并添加每个元素的所有大小。它不是很快。

我已准备好始终保留 len(s)==cap(s)，这对我有帮助吗？

**编辑：使用运行时反射实现建议的解决方案**

```
package main

import "fmt"
import "reflect"

func ElemSize(container interface{}) uintptr {
    return reflect.TypeOf(container).Elem().Size()
}
func ElemSizeVerbose(container interface{}) uintptr {
    t := reflect.TypeOf(container)
    e := t.Elem()
    s := e.Size()
    fmt.Println(t, e, s)
    return s
}
func main() {
    a := [...]int8{2, 3, 5, 7, 11} // Array
    s := []int64{2, 3, 5, 7, 11} // Slice
    z := []int32{} // Even empty things
    ElemSizeVerbose(a) // [5]int8 int8 1
    ElemSizeVerbose(s) // []int64 int64 8
    ElemSizeVerbose(z) // []int32 int32 4
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T01:29:50.817

在切片或数组中，每个元素的大小始终相同。因此，只要 len(s) > 0，您的示例就可以工作。换句话说，只要切片中至少有一个元素。否则它会恐慌。

为了避免在切片中包含元素，我建议使用以下内容：

```
 uintptr(len(s)) * reflect.TypeOf(s).Elem().Size() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-01T01:13:32.343

您可以使用编码/二进制包的（大小）。

```
package main

import (
    "encoding/binary"
    "fmt"
)

func main() {
    a := [...]int8{2, 3, 5, 7, 11} // Array
    s := []int64{2, 3, 5, 7, 11}   // Slice
    z := []int32{}                 // Even empty things

    fmt.Println(binary.Size(a)) // 5
    fmt.Println(binary.Size(s)) // 40
    fmt.Println(binary.Size(z)) // 0
} 
```

# java - 实体 - FetchType.EAGER

> ID：14697775
> 
> 赞同：1
> 
> 时间：2013-02-04T23:41:13.590
> 
> 标签：java, spring, hibernate

我需要与`FetchType.EAGER`（以下示例）的关系，但我有例外。如果我更改`FetchType.EAGER`为`FetchType.LAZY`一切正常，但我真的需要`FetchType.EAGER`. 我该如何解决？感谢您的帮助。

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = "department")
public Set<Contact> getContact() {
    return contact;
} 
```

和：

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "Department_ID", nullable = false)
private Department department; 
```

例外`FetchType.EAGER`：

```
type Exception report

message Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]

description The server encountered an internal error (Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]) that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)

root cause

org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]
    org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:657)
    org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy18.removeContact(Unknown Source)
    pl.ivmx.contact.controller.ContactController.delete(ContactController.java:108)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)

root cause

org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [pl.ivmx.contact.form.Contact#9]
    org.hibernate.impl.SessionImpl.forceFlush(SessionImpl.java:1042)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:188)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117)
    org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:535)
    org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:527)
    org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:241)
    org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:292)
    org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:240)
    org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:193)
    org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:320)
    org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:266)
    org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:243)
    org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:193)
    org.hibernate.engine.Cascade.cascade(Cascade.java:154)
    org.hibernate.event.def.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:154)
    org.hibernate.event.def.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:145)
    org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:88)
    org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:49)
    org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1028)
    org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:366)
    org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy18.removeContact(Unknown Source)
    pl.ivmx.contact.controller.ContactController.delete(ContactController.java:108)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:56:43.353

当您删除当前加载到具有 CascadeType.SAVE（或 UPDATE 或 ALL 等）的集合中的对象时，会发生此错误。

看起来您正在删除作为已加载部门的联系人。确保在删除联系人之前从部门的联系人集中删除联系人：

```
contact.getDepartment().getContact().remove(contact);
session.delete(contact); 
```

# php - 在 Wordpress 中使用 PHP 的 jQuery

> ID：14697782
> 
> 赞同：0
> 
> 时间：2013-02-04T23:41:34.843
> 
> 标签：php, javascript, jquery, wordpress

我正在尝试将 jQuery 动画添加到我的 Wordpress 帖子中。

动画效果很好，但困难的是如何为每个单独的帖子做。意思是，每个帖子都分配有一个单独的 ID（例如`post-xxxx`），并且知道帖子 ID（我知道）的唯一方法是通过 Wordpress 的`the_ID()`功能。

我让我的 jQuery 在索引 PHP 文件的脚本标签中运行。我该怎么做呢？我唯一的好主意是在帖子`onclick`的标签中添加一个 HTML 侦听器`DIV`，然后`this`在 jQuery 代码中使用引用，但它从未执行（不确定我的代码是否错误）。

这是我尝试过的那件事的代码：

```
<script>
    function('test') {
        $(this).animate({
            height: '+=350'
        }, {
            duration: 500
        });

        $('.review-thumb').animate({
            opacity: 0
        }, {
            duration: 500
        });
    },
</script> 
```

这是我的 HTML 标签：

```
<div onclick="test" class="post number-<?php echo $number; ?> colour-<?php echo $colour; ?>" id="post-<?php the_ID(); ?>"> 
```

网站主题可以在[http://vusavusa.com/blog/?theme=vusavusa2](http://vusavusa.com/blog/?theme=vusavusa2)找到。请原谅现在内容的混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:54:52.253

`post-`假设所有帖子都以标识符开头，您可以执行类似的操作。下面的选择器将抓取所有以`id`开头的输入`post-`。

```
$('input[id^="post-"]').animate({ height: '+=350' }, { duration: 500 }); 
```

这个概念可以适应你想要做的任何事情，例如：

```
/** Assign an animation to each element */
$('input[id^="post-"]').click(function() {
    $(this).animate({ height: '+=350' }, { duration: 500 });
    return false;
}); 
```

另一种选择是使用`slideToggle`动画来扩展您`Post`的完整视图。您的完整视图将被预加载，但默认情况下是隐藏的，并且将有一个`post-full`.

**CSS：**

```
.post-full { display: none; } 
```

**JS：**

```
$(function() { 
    $('[id^="post-"]').click(function() {
        $(this).find('.post-full').slideToggle(500, function(){});
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:52:21.067

为什么不添加一个类（例如“postClass”）并使用 `$('.postClass')`

# clojure - Clojure 和 64 位 lwjgl (lein 2)

> ID：14697783
> 
> 赞同：10
> 
> 时间：2013-02-04T23:41:37.340
> 
> 标签：clojure, leiningen, jmonkeyengine

在 64 位 JVM 上，在 Linux 中，无论本地库加载如何，都坚持尝试加载 32 位库。

我问这是一个clojure和（甚至更多）java n00b。

到目前为止我找到的答案（[在 Leiningen/Clojure 中使用 lwjgl](https://stackoverflow.com/questions/10558795/using-lwjgl-in-leiningen-clojure)似乎是搜索结果中最突出的）似乎适用于旧版本的 lein，问题围绕 project.clj 中的 :native-dependencies 或 LD_LIBRARY_PATH 旋转。

我正在重新发明轮子并将基本的 jME 教程翻译成 clojure，作为学习它们的一些个人家庭作业。在迄今为止我发现的所有教程和示例中，人们展示了他们是如何做到这一点的，这部分似乎“正常工作”。

（就此而言，它在 Windows 下对我来说工作得很好）。

我正在使用 lein 构建一个新的空项目。我已经在 clojars 上设置了对各种版本的 jMonkeyEngine 库的依赖。在 'lein deps' 之后，liblwjgl64.so 和 libopenal64.so 在我的项目目录的根目录中结束。

当我尝试“lein run”时，它会显示设置的猴子启动画面，然后在尝试实际运行时抛出异常，因为它正在尝试加载 liblwjgl.so。

该文件位于 target/native/linux 和 target/native/linux64 下（但奇怪的是，不在 target/native/linux32 下）。

如果我将它想要的文件复制到我的项目的根目录中，错误将变为“错误的 ELF 类：ELFCLASS32（可能的原因：架构字宽不匹配）”，这是谷歌不断给我的另一组讨论。那里提到的解决方案似乎都相当于“切换到 32 位 JVM 以使 Minecraft 正常工作”，但我更愿意了解正在发生的事情的实际线索。

这个问题在我可以在 clojars 中使用的每一组依赖库中都非常一致（无论如何，回到第 2 版……那些似乎不值得深入研究的更大问题）。查尔斯染色在窗户上为我设置了“刚刚工作”。

到目前为止，我能够提出的最好的假设是这样的：

我怀疑必须在某个时候指定一个版本。[http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)提到了一个看起来非常合适的资源属性，但这似乎没有任何意义用 JNLP 做。我想知道是否有一个清单文件位于我无法找到的 .jar 中的某个地方（这就是我的 n00bishness 发挥作用的地方......我真的不知道我在寻找什么）。

那么，是否有人对我应该看哪里或应该问谁有任何指示？我什至不知道从这里去哪里。纠缠 jMonkeyEngine 论坛、#clojure 或 lwjgl 邮件列表（或他们使用的任何东西......我实际上根本没有调查过他们的事情......我应该吗？）

我要尝试的下一件事是将 jME 库捆绑到我自己的存储库中。这似乎是一项艰巨而艰巨的任务，我决定在处理这个问题时在这里提出。

我知道这很模糊，我为此道歉。我的 google-fu 让我失望了。我会很感激任何人能提出的任何建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T01:48:53.597

我知道这是一个老问题，但我在决定从事 Clojure + jMonkeyEngine 项目时发现了它。我花了一些时间与 clojars 中的包进行斗争，然后研究构建我自己的 maven 包需要什么，我在 jMonkeyEngine wiki 上找到了一个页面，上面有这个严厉的警告：

> 请注意，核心 jME 团队既不推荐也不支持将 jME3 与 maven 一起使用，并且 maven 存储库中的库可能已过时！

后来我发现我能够成功地运行一个最小的 JME 应用程序，方法是将它们的 jar 直接放在我的项目中，并使用 leiningen 的 :resource-paths 配置将它们包含在类路径中。

通过下载 JME3 SDK 并在 jmonkeyplatform/jmonkeyplatform/libs 中查找 jars。将所有 jar 复制到项目内的“lib”文件夹中（是的，您可以删除不会使用的 jar）。然后像这样配置你的 lein 项目：

```
(defproject my-jme-project "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.5.1"]]
  :resource-paths ["resources" "lib/*"]) 
```

运行 lein-repl，下面应该会启动一个最小的 JME3 应用程序：

```
(import 'com.jme3.app.SimpleApplication)
(def app (proxy [SimpleApplication] [] (simpleInitApp [] nil)))
(.start app) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:18:18.600

在 Java 程序中使用本机库一开始可能会很痛苦，但实际上并没有那么复杂。

首先，你的错误，`wrong ELF class: ELFCLASS32`意味着某些*64-bit 程序*试图加载*32-bit shared library*。显然，当程序查找库的路径上存在具有所需名称的 32 位库，但程序本身是 64 位时，就会发生这种情况。这几乎就是对错误的解释。

现在，关于问题的主要部分。确实有几种方法可以在 Java 应用程序中使用本机库，其中一些甚至涉及环境变量。但 IMO 最简单的方法是指定 Java*系统属性* `java.library.path`，这正是用于管理本机库的。此属性应指向程序的所有本机库所在的目录。JVM 将在该目录中查找所有必需的共享对象。

直接运行 JAR 文件时，可以在命令行中指定系统属性，如下所示：

```
java -Djava.library.path=natives/linux64 -jar yourprogram.jar 
```

在这里，我们指定了相对于当前目录的库路径。就我而言，这是为通常由脚本启动的独立应用程序设置属性的首选方式。

至于 REPL，似乎可以在里面为其设置 JVM 选项`project.clj`，如下所示：

```
(defproject project "version"
  ...
  :jvm-opts ["-Djava.library.path=target/natives/linux64"]) 
```

我不记得 REPL 的默认工作目录是什么，所以这可能需要对确切的路径进行一些试验，但你明白了。

现在我正在自己开发 lwjgl 程序（虽然不是在 Clojure 中，而是在纯 Java 中，使用 Maven），真正需要的是从 jar 中提取本机库（`maven-native-plugin`这样做）并`java.library.path`为它们设置。

顺便说一句，看起来 leiningen 支持 , 中的另一个重要选项`project.clj`，`:native-path`这似乎启用了类似`maven-native-plugin`功能：它指定了一个目录，所有本机依赖项都应提取到该目录。将其与`:jvm-opts`应该为您提供正确的独立于平台的 REPL :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T15:16:59.900

仍然是老问题，但我遇到了同样的问题，所以我可以通过在文件中添加 jCenter 存储库来在 Closure 上设置 jME3 `project.clj`：

```
(defproject example-project "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :repositories [["jcenter" "http://jcenter.bintray.com"]]
  :dependencies [[org.clojure/clojure "1.6.0"]
                 [org.jmonkeyengine/jme3-core "3.1.0-beta1"]
                 [org.jmonkeyengine/jme3-desktop "3.1.0-beta1"]
                 [org.jmonkeyengine/jme3-lwjgl "3.1.0-beta1"]]) 
```

# activemq - Mule 应用程序中的所有消息都没有从 ActiveMQ 中出列

> ID：14697788
> 
> 赞同：0
> 
> 时间：2013-02-04T23:42:06.557
> 
> 标签：activemq, mule

我在 Mule 应用程序中有一个带有两个 JMS 连接器的暂存队列，用于在队列上读取和写入。如果我在队列中暂存/入队 40 条消息，则只有 20 条消息正在出队，其余消息将作为待处理消息等待处理，并且在 Mule App 未重新启动之前不会出队。

下面是连接器和 mule 流的代码。任何人都可以建议这里可能存在什么问题吗？以及为什么消息处理在 20 条消息处停止。

如果需要更多信息，请告诉我。

```
<!-- PROCESSING BEAN WHICH HAS ALL STREAM INTERACTION AND ERROR HANDLING -->
        <spring:bean name="processorPR" class="net.prcins.esb.claims.vci.policereports.processing.PoliceReportProcessor" scope="prototype">
            <spring:property name="policeReportBO" ref="policeReportBO" />
        </spring:bean>

        <!-- This is for validation of inital transformation -->    
        <spring:bean name="receiverPR" class="net.prcins.esb.claims.vci.policereports.staging.PoliceReportReceiver" scope="prototype" />            

        <!-- PROCESSING BEAN WHICH HAS ALL BUSINESS LOGIC -->
        <spring:bean name="policeReportBO" class="net.prcins.esb.claims.vci.policereports.processing.PoliceReportBO" scope="prototype">     
            <spring:property name="rulesFileCovLogic_NE" value="${policeReport.rules.covLogic.NE}"/>
            <spring:property name="rulesFileCovLogic_NJ" value="${policeReport.rules.covLogic.NJ}"/>                        
        </spring:bean>

<jms:activemq-connector name="jmsConnectorStagingQReaderNormal"
                            brokerURL="${mule.activemq.broker.read.normal.url}" 
                            specification="1.1"
                            maxRedelivery="-1"
                            persistentDelivery="true"   
                            createMultipleTransactedReceivers="true"
                            numberOfConcurrentTransactedReceivers="10"        
                            connectionFactory-ref="connectionFactoryPR"
                            disableTemporaryReplyToDestinations="false">
        </jms:activemq-connector>

        <!-- JMS CONNECTOR FOR WRITING FROM STAGING QUEUE -->
        <jms:activemq-connector name="jmsConnectorStagingQWriter"
                            brokerURL="${mule.activemq.broker.write.url}" 
                            specification="1.1"
                            maxRedelivery="-1"
                            persistentDelivery="true"
                           createMultipleTransactedReceivers="true"
                            numberOfConcurrentTransactedReceivers="10" 
                            connectionFactory-ref="connectionFactoryPR"
                            disableTemporaryReplyToDestinations="false">
        </jms:activemq-connector>

    <jms:endpoint name="inboundProcessReaderNormalPR" queue="${policereport.queue.staging.name}" exchange-pattern="one-way" connector-ref="jmsConnectorStagingQReaderNormal" />

<flow name="pr-flow-stage-individual-message">
        <http:inbound-endpoint  host=   "localhost" 
                                    port=   "${policeReport.inbound.port}" 
                                    path=   "claims/vci/policeReport/record"
                                    exchange-pattern=   "request-response"
                                    >

         </http:inbound-endpoint>
         <object-to-string-transformer />
        <logger message="PoliceRecord: SPLIT MESSAGE:#[payload]" level="ERROR" /> 
        <transformer ref="XMLToRecord"></transformer>

        <!--  COMPONENT TO PROCESS THE DATA -->
        <!-- Component returns Invoice XML if all validations are successful, else it returns error XML containing error message, error code and original payload -->
        <component>
            <spring-object bean="receiverPR"></spring-object>
        </component>
        <transformer ref="RecordToXML"></transformer>
        <object-to-string-transformer />
        <!-- DECIDE SUCCESS/FAILURE AND PLACE ON QUEUE IF SUCCESS --> 
         <choice>
               <when expression="//Record/Response/Status = 'ACCEPTED'" evaluator="xpath">
                <jms:outbound-endpoint  ref="inboundProcessReaderNormalPR" doc:name="JMS">
                            <jms:transaction action="NONE"/>
                </jms:outbound-endpoint>
            </when>
            <otherwise>
                <!-- Relevant endpoint for error handling -->
                <logger message="Skipped staging message due to errors" level="ERROR" /> 
            </otherwise>
         </choice>

        <logger message="PoliceReport: STAGED PAYLOAD:#[payload]" level="ERROR" />

      <default-exception-strategy>
            <logger message="PoliceReport: Exception recived in flow-stage-individual-message. Payload is :#[payload]" level="ERROR" />
      </default-exception-strategy>

    </flow>

    <!-- ============================== PROCESSING =============================== -->
     <!-- ====================================================================== -->
    <!--===================  PROCESSING JOB FOR Police Report (NORMAL)  ========================-->
        <flow name="pr-flow-process-jms-input-normal" > 
          <jms:inbound-endpoint    ref="inboundProcessReaderNormalPR"/> 
          <flow-ref name="pr-flow-process-jms-input-subbflow" />
        </flow>

        <!--===================  PROCESSING JOB FOR Police Report (DR)  ========================-->

        <flow name="pr-flow-process-jms-input-dr" > 
          <jms:inbound-endpoint ref="inboundProcessReaderDRPR" /> 
        <flow-ref name="pr-flow-process-jms-input-subbflow" />
        </flow>

        <!--===================  PROCESSING JOB FOR PoliceReport (NE)  ========================-->
       <sub-flow name="pr-flow-process-jms-input-subbflow" > 

        <transformer  ref="DomToXmlPR" doc:name="DOM to XML"/>    
        <transformer ref="XMLToRecord"></transformer>

          <!--  COMPONENT TO PROCESS THE DATA. WILL PROCESS THE OBJECT AND RETURN ANOTHER OBJECT AS RESPONSE -->
        <component> 
            <spring-object bean="processorPR"></spring-object>
        </component>

        <!--  Component above performs all business logic, including validations, creation/editing of claim, error handling etc. 
        Returns success/failure of claim import processing in the end -->

        <transformer ref="RecordToXML"></transformer>
        <object-to-string-transformer />

        <!-- DECIDE SUCCESS OR FAILURE  -->
        <choice>
              <when expression="//Record/Response/Status = 'ERROR' and contains(//Record/Response/Description, 'SysError')" evaluator="xpath">
             <!-- DROP XFORMED BATCH FORMAT STRING ON THE JMS QUEUE
                RETURNS RIGHT AWAY, NO WAITING -->
                <logger message="PoliceReport: FAILED TO PROCESS MESSAGE :#[payload]" level="ERROR" />
                <jms:outbound-endpoint queue="${policeReport.queue.errors.name}" exchange-pattern="one-way" connector-ref="policeReportJMSConnectorErrorQWriter" />
            </when>
             <otherwise>
                     <logger message="Messages processd without error :#[payload]" level="ERROR" />
             </otherwise>
        </choice>
        <transformer ref="record2balancingXFormer" />
        <object-to-string-transformer />
        <splitter evaluator="xpath" expression="//Batch_Status"  />
        <!-- <logger message="OUTPUT OF SPLITTER IS: #[payload]" level="ERROR" /> --> 
        <custom-transformer class="net.prcins.esb.claims.vci.policereports.transformers.DocumentToString" />
        <!--  Not sure why only splitter makes the payload workable for HTTP call. Without this, I keep getting error that the Rest Endpoint does not accept XML -->
        <flow-ref name="pr-flow-balancing"/>

      </sub-flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:41:09.637

不确定发生了什么，但有些事情可能会在您的配置中引入不必要的线程/争用，这让我有点担心：

*   如果您的`pooled-component`可用实例少于并发线程，则可能会成为瓶颈。你确定你**真的**需要 `pooled-component`吗？使用它们而不是标准的理由是`component`什么？
*   `flow-process-jms-input-subbflow`是私有流，不是子流，使用默认的处理策略。这意味着`flow-ref`调用`flow-process-jms-input-normal`实际上会将执行转移到另一个线程。除非这**真的**是你想要发生的事情，否则我建议你`flow-process-jms-input-subbflow`变成一个子流，这样它将在接收到 JMS 消息的同一线程上执行`<jms:inbound-endpoint ref="inboundProcessReaderNormal" />`。
*   引用全局端点`inboundProcessReaderNormal`而`jms:outbound-endpoint`不是重新定义它。

这些更改很可能无法解决问题，但至少它会简化执行模型并有助于更好地推理正在发生的事情。

# c# - 我应该如何在 c# 中解析这个 json 响应？

> ID：14697789
> 
> 赞同：0
> 
> 时间：2013-02-04T23:42:30.030
> 
> 标签：c#, jquery, .net, json

我对 json 响应有点陌生。我一直在使用 json.net 将我的响应解析为自定义对象。但我觉得这个响应是一种标准格式，我应该能够轻松解析。

这是响应的示例。

```
 {"jquery": 
[
    [0, 1, "call", ["body"]], 
    [1, 2, "attr", "find"], 
    [2, 3, "call", [".status"]], 
    [3, 4, "attr", "hide"], 
    [4, 5, "call", []], 
    [5, 6, "attr", "html"], 
    [6, 7, "call", [""]], 
    [7, 8, "attr", "end"], 
    [8, 9, "call", []], 
    [0, 10, "call", ["body"]], 
    [10, 11, "attr", "captcha"], 
    [11, 12, "call", ["uIP22Wow9xa68aLQ0tl1e9Uiiinracdj"]]
]} 
```

这是标准的还是我应该继续使用我的自定义对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:59:49.453

.NET 4.5 包含一个[JavaScriptSerializer 类](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)，它可以轻松解析任何内容。

我通常会解析我的数据做这样的事情..

```
private struct MyStruct
{
  public System.Collections.ArrayList jquery { get; set; }
}

string testJson = "{\"jquery\": [[0, 1, \"call\", [\"body\"]], [1, 2, \"attr\", \"find\"], [2, 3, \"call\", [\".status\"]], [3, 4, \"attr\", \"hide\"], [4, 5, \"call\", []], [5, 6, \"attr\", \"html\"], [6, 7, \"call\", [\"\"]], [7, 8, \"attr\", \"end\"], [8, 9, \"call\", []], [0, 10, \"call\", [\"body\"]], [10, 11, \"attr\", \"captcha\"], [11, 12, \"call\", [\"uIP22Wow9xa68aLQ0tl1e9Uiiinracdj\"]]]}";
MyStruct generic = new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize<MyStruct>(testJson); 
```

![在此处输入图像描述](../Images/31107cedb82af59f34796d38a4b167d2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:56:32.047

这是格式良好的 JSON，其中一个对象名为`"jquery"`. 它的值是一个数组，该数组的每个元素又是一个数组。内部数组包含几个值：两个数字，然后是字符串，最后是字符串或单个字符串的数组。

没有任何迹象表明任何其他命名的对象`"jquery"`是否具有相同的结构。

在没有任何其他模式信息的情况下，通用 JsonObject 似乎是解析它的唯一有用结构

# android - Android jellybean 上不显示 Listview 选择

> ID：14697793
> 
> 赞同：1
> 
> 时间：2013-02-04T23:42:38.843
> 
> 标签：android, listview, android-4.2-jelly-bean

我有一个列表视图，它已经按预期工作了一段时间。最近一个用户将他们的设备软件更新为 JellyBean，现在列表视图选择在按下时不会更新。

在后台，onTouchEvent() 方法触发，（反过来适配器的 onItemClick()）并且选择设置为“幕后”，它根本不会显示为已选择。但是，如果设备现在被旋转并且方向改变，选择突出显示在重绘上！

我已经搜索了其他问题，我能找到的最接近的是 onAttachedToWindow() 方法被覆盖并且没有调用它的超级实现，但是这里不是这种情况！

有没有其他人在 JellyBean 上看到过类似的问题，并且知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:39:20.400

在每个选择上添加了对 adapter.notifyDataSetChanged() 的调用。

不理想，因为我怀疑大型数据集的性能会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T09:28:16.957

解决此问题的更好方法是使用 listview 的 invalidateViews() 函数。

**ListView.invalidateViews()**用于告诉 ListView 使其所有子项视图无效（重绘它们）。而**Adapter.notifyDataSetChanged()**是告诉适配器的观察者正在适应的内容已经改变。

在这种特殊情况下，ListView.invalidateViews() 似乎是一个更好的选择，因为您的数据集没有更新，您只需要重绘视图。

在您的 OnItemClick 中插入 listview.invalidateViews() 就可以了。

```
public void onItemClick(AdapterView<?> av, View v, int position,long id) {
            // TODO Auto-generated method stub
                    listview.invalidateViews();
            /*  YOUR   CODE 
                                GOES   HERE    */          
        }
    }); 
```

您也可以对 GridView 使用相同的功能。

# google-api - Google Groups 服务返回 404 错误

> ID：14697794
> 
> 赞同：1
> 
> 时间：2013-02-04T23:42:41.613
> 
> 标签：google-api, google-apps, google-groups

我尝试在我的网站内使用谷歌群组服务，虽然将此代码嵌入主页，但它返回 404 错误！是因为我使用的是 localhost 吗？

```
<iframe id="forum_embed"
  src="javascript:void(0)"
  scrolling="no"
  frameborder="0"
  width="900"
  height="700">
</iframe>
<script type="text/javascript">
  document.getElementById('forum_embed').src =
     'https://groups.google.com/forum/embed/?place=forum/*********'
     + '&showsearch=true&showpopout=true&showtabs=false'
     + '&parenturl=' + encodeURIComponent(window.location.href);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:49:57.793

是的，404 问题是因为您从`localhost`. 我在 Mac OS X 上使用内置的 Apache 服务器，遇到了完全相同的问题。将 HTML 文件上传到我的托管网站后，Google 网上论坛会正确显示。

# javascript - 使用JS隐藏表格的某些行，如果

> ID：14697795
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:42:56.410
> 
> 标签：javascript, html-table

我有一个这样设置的表：

```
<table id="Table" class="sortable">
<col class="quantity"></col>
<col class="price"></col>
<col class="total"></col>
<thead>
<tr>    
<th class="right">Quantity</th>
<th class="right">Price</th>
<th class="right">Total</th>
</tr>
</thead>
<tbody>

<tr>
<td class="right">50,000</td>
<td class="right" sorttable_customkey="10.25">10.25</td>
<td class="right" sorttable_customkey="512500">512,500</td>
</td>
</tr>

<tr>
<td class="right">1,250</td>
<td class="right" sorttable_customkey="8.1">8.10</td>
<td class="right" sorttable_customkey="101125">101,125</td>
</td>
</tr>
</tbody>
</table> 
```

使用 JavaScript，如何根据一个或多个单元格的数量隐藏行？就像如果（价格小于 5），或者（价格小于 10 并且数量大于 1,000），则跳过整行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:25:20.247

我只是回答这个问题，因为可怕的 jQuery 答案需要有一个替代品。

将以下内容放在`<script>`表格后面的任何位置的标记中：

```
(function() {
    var tbl = document.getElementById('Table'),
        rows = tbl.tBodies[0].children, l = rows.length, i,
        filter = function(cells) {
            var values = [
                parseInt(cells[0].firstChild.nodeValue.replace(/,/g,''),10),
                parseFloat(cells[1].firstChild.nodeValue.replace(/,/g,'')),
                parseFloat(cells[2].firstChild.nodeValue.replace(/,/g,''))
            ];
            // THIS IS WHERE YOUR CONDITIONS GO
            if( values[1] < 5) return false;
            if( values[1] < 10 && values[0] > 1000) return false;
            return true;
        };
    for( i=0; i<l; i++) {
        if( !filter(rows[i].cells)) rows[i].style.display = "none";
    }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:52:24.813

使用 jQuery，你可以做类似的事情

```
$.each($('tr'), function(tri, tr) {
    var $tr = $(tr),
        price = parseFloat($tr.find('td:nth-child(2)').text()replace(/,/g, "")),
        quantity = parseInt($tr.find('td:first-child').text()replace(/,/g, ""));
    if (price < 5) $tr.hide(); 
    //repeat for other conditions, like if(price < 10 && quantity > 1000)
}); 
```

至于为什么你可能更喜欢使用像 jQuery 这样的库而不是使用 vanilla js 来完成这样的任务，我发现 jQuery 选择器和类似的方法`text()`比纯 JavaScript 中的对应物更容易编写和阅读。此外，我发现使用 jQuery 选择器完成的代码比通过手动遍历 DOM 完成的代码要少得多。例如，如果标记更改为包含链接或样式元素，则无需更新此代码。

```
<tr>
<td class="right">1,250</td>
<td class="right" sorttable_customkey="8.1"><span class="low_price">8.10</span></td>
<td class="right" sorttable_customkey="101125">101,125</td>
</td>
</tr> 
```

在上面的例子中，标记发生了变化；价格现在包含在`<span>`标签中，该标签可用于对某些定价项目进行不同的样式设置。您的应用程序的标记可能永远不会改变，但这些事情确实会发生。当他们这样做时，拥有易于更改的可读代码是一件好事，如果您的代码不必更改，那就更好了。

# vim - 无法让 BundleInstall 为 Vundle 工作

> ID：14697797
> 
> 赞同：2
> 
> 时间：2013-02-04T23:43:02.573
> 
> 标签：vim, ubuntu

我正试图让 vundle 工作。这是我运行时遇到的错误：BundleInstall E117: Unknown function: vundle#installer#new

这是我的.vim：

```
.
├── bundle
│   └── vundle
│       ├── autoload
│       │   ├── vundle
│       │   │   ├── config.vim
│       │   │   ├── installer.vim
│       │   │   └── scripts.vim
│       │   └── vundle.vim
│       ├── doc
│       │   └── vundle.txt
│       ├── LICENSE-MIT.txt
│       ├── README.md
│       └── test
│           ├── files
│           │   └── test.erl
│           ├── minirc.vim
│           └── vimrc
└── colors
    └── xoria256.vim 
```

这是我的.vimrc：

```
set nocompatible
filetype off

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

Bundle 'gmarik/vundle'
Bundle 'msanders/snipmate.vim'
Bundle 'mattn/zencoding-vim'
Bundle 'tpope/vim-surround'
Bundle 'scrooloose/nerdtree'
Bundle 'L9'
Bundle 'FuzzyFinder'

filetype plugin indent on
colorscheme xoria256
set relativenumber
set expandtab
set tabstop=2
set shiftwidth=2
set cindent
set virtualedit=all
" All system-wide defaults are set in $VIMRUNTIME/debian.vim (usually just
" /usr/share/vim/vimcurrent/debian.vim) and sourced by the call to :runtime
" you can find below.  If you wish to change any of those settings, you should
" do it in this file (/etc/vim/vimrc), since debian.vim will be overwritten
" everytime an upgrade of the vim packages is performed.  It is recommended to
" make changes after sourcing debian.vim since it alters the value of the
" 'compatible' option.

" This line should not be removed as it ensures that various options are
" properly set to work with the Vim-related packages available in Debian.
runtime! debian.vim

" Uncomment the next line to make Vim more Vi-compatible
" NOTE: debian.vim sets 'nocompatible'.  Setting 'compatible' changes numerous
" options, so any other options should be set AFTER setting 'compatible'.
"set compatible

" Vim5 and later versions support syntax highlighting. Uncommenting the next
" line enables syntax highlighting by default.
if has("syntax")
  syntax on
endif

" If using a dark background within the editing area and syntax highlighting
" turn on this option as well
"set background=dark

" Uncomment the following to have Vim jump to the last position when
" reopening a file
"if has("autocmd")
"  au BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif
"endif

" Uncomment the following to have Vim load indentation rules and plugins
" according to the detected filetype.
"if has("autocmd")
"  filetype plugin indent on
"endif

" The following are commented out as they cause vim to behave a lot
" differently from regular Vi. They are highly recommended though.
"set showcmd    " Show (partial) command in status line.
"set showmatch    " Show matching brackets.
"set ignorecase   " Do case insensitive matching
"set smartcase    " Do smart case matching
"set incsearch    " Incremental search
"set autowrite    " Automatically save before commands like :next and :make
"set hidden             " Hide buffers when they are abandoned
"set mouse=a    " Enable mouse usage (all modes)

" Source a global configuration file if available
if filereadable("/etc/vim/vimrc.local")
  source /etc/vim/vimrc.local
endif 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-14T07:02:24.413

我通过 move 'runtime! debian.vim' 在 vundle 代码之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T06:46:42.053

```
set rtp+=~/.vim/bundle/vundle/
```

vundle 安装了 py 病原体？完美……但病原体不想工作！只需安装一个包管理器。我阅读了您之前的问题，我认为您需要清理所有 vim 目录，例如 ~/.vim、/usr/share/vim 等，然后重新安装 vim。之后，通过阅读插件安装说明仅安装病原体或 vundle。最后通过病原体（git clone）或 vundle 安装你最喜欢的插件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-01T22:53:19.553

作为记录，在没有使用或曾经使用过病原体的情况下，我得到了完全相同的错误（因此无法使用 Vundle）：

```
E117: Fonction inconnue : vundle#installer#list 
```

就我而言，以下选项是导致 Vundle 无法运行的原因：

~/.vimrc

```
" Syntaxe pour Perl
    autocmd FileType python set omnifunc=pythoncomplete#Complete
    set runtimepath=~/.vim,/vimfiles 
```

（作为我的 .vimrc 中最后一个选项的记录：-o）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-25T09:34:26.437

就我而言，问题是当我在 rtp 路径中有非拉丁字符时。将 vimfiles 目录移动到带有拉丁字符的路径只为我解决了这个问题。

# php - MySQL 查询突然变慢

> ID：14697798
> 
> 赞同：1
> 
> 时间：2013-02-04T23:43:11.107
> 
> 标签：php, mysql

我有一个 PHP 脚本，它通过 Internet 流式传输一些数据并将其存储在 MySQL 表中，然后是另一个处理脚本，它每分钟作为 cron 作业运行，读取原始数据，处理它并将结果插入其他表（取决于提取的数据类型）。

处理脚本有大约 10 个查询（`INSERT`s 和`UPDATE`s）。它通常以毫秒为单位处理大约 2000 个原始数据条目。但有时它会出现一些不寻常的突然减速（大约每周一次），它在一分钟内只能处理大约 200 个原始条目。

这会持续几个小时；然后它恢复正常。

我在共享服务器上运行我自己的 MySQL 实例，根据我的网络主机，在这些减速期间服务器负载非常低。

在这些减速期间，我尝试重新启动 MySQL 服务器，但这并没有帮助。

任何帮助表示赞赏。并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:59:11.447

有更少的信息可以给你一个很好的答案。

*   服务器操作系统和 MySQL 版本
*   MySQL 配置
*   在服务器上运行的其他服务
*   服务器硬件
*   您运行的 SQL 查询

你可以做的第一件事是使用`EXPLAIN`Statement 来获得一个快速的概览

# iphone - iPhone 文档类型

> ID：14697800
> 
> 赞同：0
> 
> 时间：2013-02-04T23:43:21.550
> 
> 标签：iphone

我已注册 PDF 文档类型，因此我可以打开在 Safari 中查看的邮件附件和 PDF 文件。问题是如果应用程序关闭，它可以正常工作。如果应用程序在后台。Safari/Mail 切换到我的应用程序`didFinishLaunchingWithOptions`，但未调用包含文件 URL 的应用程序函数。所以在这种情况下我无法访问该文件。

在 Safari 中打开任何文档之前，我是否需要强制用户关闭应用程序！

编辑：这是我的 plist 更改

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PDF Document</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.content</string>
            <string>public.item</string>
            <string>public.data</string>
        </array>
    </dict>
</array> 
```

我弄乱了这些值，但 public.content 和 public.item 和 public.data 只是注册我的应用程序来打开任何内容，而不仅仅是 PDF。我仍然需要先关闭我的应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:37:16.173

@KDaker 在评论中指出了这一点，但底线是您需要在应用程序委托中实现这两个功能。

```
- (BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url;

- (BOOL) application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation; 
```

# git - Git：将特定提交移动到另一个分支

> ID：14697801
> 
> 赞同：17
> 
> 时间：2013-02-04T23:43:34.393
> 
> 标签：git, git-commit

一个有两个分支的存储库。

主分支提交：

c1, c2, c3, c4, c5, c6, c7, ..., c15, ...

暂存分支提交：

c1、c2、c3、c4、c5、c6、c7

我想在**c7**之后将所有提交从主分支移动到暂存分支

然后恢复主分支

和

```
git reset --hard c7-hash 
```

如何将特定提交从一个分支移动/复制到另一个分支？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-04T23:48:27.727

在您描述的情况下，暂存分支上的所有提交也都在主分支上，这很容易：

```
git checkout staging
git merge master
git checkout master
git reset --hard c7-hash 
```

合并将是一个快进。

在一般情况下，您可以使用`git cherry-pick c8 c9 c10 c11 c12 c13 c14 c15`挑选单个提交到当前分支。一个更短的方式来挑选所有在 master 但不是当前分支的提交，`git cherry-pick ..master`还有其他示例显示`git help cherry-pick`

# php - 验证 JSON 数据时，Web 服务始终返回 true

> ID：14697802
> 
> 赞同：1
> 
> 时间：2013-02-04T23:43:34.787
> 
> 标签：php, jquery

我要做的是验证电子邮件地址是否在数据库中。我`CheckEmailAddress`检查电子邮件是否在数据库中并且它似乎有效（如果需要，重写它）。问题是当我从我的 JQuery 函数发布我的 JSON 电子邮件数据时，如果在数据库中输入了电子邮件，则它总是返回 true，而应该是 false。

查询：

```
$('#checkemail').click(function() {
    $.post('http://' +  location.host + '/buyme/include/getemailaddress.php', 
        {'email':'test012@yahoo.co.nz'},  function(res){
        var obj = JSON.parse(res);
        alert(obj)
    });
}); 
```

PHP

```
<?PHP
    require_once("membership.php");
    $membership = new Membership();
    $val = $_POST["email"];;
    $result = $membership->CheckEmailAddress(trim($val));
    echo json_encode($result); //output test@test.com   
?>

function CheckEmailAddress($email_address) {
    $connection = mysql_connect('localhost:3306','root','')or die('Error connecting');
    mysql_select_db('buyme') or die('Connection not working properly');     
    $query = "SELECT email_address from users where email_address='$email_address'";
    $result = mysql_query($query, $connection);
    $row = mysql_fetch_assoc($result);

            $emailInUse = 'false';
    if(!$row || $row["email_address"] == '') {
        $emailInUse = 'true';
    }else{
        $emailInUse = 'false';  
    }

    return $emailInUse;
} 
```

如果有什么需要更正，请更新我的代码，以便我测试谢谢

更新：

```
 try {
    $pdo = new PDO('mysql:dbname=buyme;host=localhost:3306', 'root', '', 
        $options = array (
        PDO::ATTR_ERRMODE,  PDO::ERRMODE_EXCEPTION
    ));
    $email_address = 'kirkdm021@yahoo.co.nz';

    $stmt = $pdo->prepare("SELECT email_address
            FROM users 
            WHERE email_address=:email_address");
    $stmt->execute(array('email_address'=>$email_address));
    $rows = $stmt->fetchObject();

    echo empty($rows->email_address) ? "" : $rows->email_address; // $row["email_address"];

}catch (PDOException $e) {
    die('error: ' . $e->getMessage());      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:59:15.507

问题是您的`TRUE`&`FALSE`分配正在返回字符串而不是`TRUE`或`FALSE`值。这意味着它们本质上将始终被视为`TRUE`因为它们是包含值的字符串。A`FALSE`将始终不包含任何内容。此外，当它应该是一个by `OR`doing时，你正在做一个by doing 。所以这段代码：`||``AND``&&`

```
if(!$row || $row["email_address"] == '') {
    $emailInUse = 'true';
}else{
    $emailInUse = 'false';  
} 
```

应该这样改写：

```
if(!$row && $row["email_address"] == '') {
    $emailInUse = TRUE;
}else{
    $emailInUse = FALSE;  
} 
```

最终函数如下所示：

```
function CheckEmailAddress($email_address) {
    $connection = mysql_connect('localhost:3306','root','')or die('Error connecting');
    mysql_select_db('buyme') or die('Connection not working properly');     
    $query = "SELECT email_address from users where email_address='$email_address'";
    $result = mysql_query($query, $connection);
    $row = mysql_fetch_assoc($result);

    if(!$row && $row["email_address"] == '') {
        $emailInUse = TRUE;
    }else{
        $emailInUse = FALSE;  
    }

    return $emailInUse;
} 
```

也就是说，我建议`else`通过这样做来避免声明：

```
 $emailInUse = FALSE;        
    if(!$row || $row["email_address"] == '') {
        $emailInUse = TRUE;
    }

    return $emailInUse; 
```

可能看起来差别不大，但根据我的经验，从长远来看，使用默认值初始化这样的值可以让你头疼。在这个脚本中可能意义不大，但如果你是一个初级程序员，我建议你早点养成这个习惯。

**以其他视角编辑：**另外，我刚刚重新阅读了您的帖子。您似乎想返回“真”和“假”这两个词？坏习惯。让函数在逻辑上返回 a`TRUE`或`FALSE`按照我的解释，然后在您的主代码中对其进行操作。所以这个编码：

```
<?PHP
    require_once("membership.php");
    $membership = new Membership();
    $val = $_POST["email"];;
    $result = $membership->CheckEmailAddress(trim($val));
    echo json_encode($result); //output test@test.com   
?> 
```

现在看起来像这样：

```
<?PHP
    require_once("membership.php");
    $membership = new Membership();
    $val = $_POST["email"];;
    $result = $membership->CheckEmailAddress(trim($val));
    $result_value = !empty($result) ? 'true' : 'false';
    echo json_encode($result_value); //output test@test.com   
?> 
```

看到那行`$result_value = !empty($result) ? 'true' : 'false';`吗？那是一段内联代码，可以替代`if`/ `else`stuff for values。我真的忘记了该方法的正式名称，但它对这种情况很有用。日志流程基本上是

```
[value] = [test] ? [test value] : [default value]; 
```

这基本上意味着如果`test`通过，则将值设为`?`. 如果测试不通过？然后使用右边的默认值`:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:04:50.327

首先，我在您的代码中看到的错误是您缺少`$email_address`在引号中嵌入：`'`在构建 SQL 查询时。

但我建议您使用准备好的语句，而不是修复查询。因为它对 SQL 注入最安全且易于使用。

下面是一个使用[PDO](http://www.php.net/manual/en/book.pdo.php)扩展的示例：

```
function CheckEmailAddress($email_address) {
    try {
        $pdo = new PDO('mysql:dbname=test;host=localhost', 'root', '', $options = array (
             PDO::ATTR_ERRMODE,  PDO::ERRMODE_EXCEPTION
        ));

        // prepare a statement 
        $stmt = $pdo->prepare('
            SELECT `email_address`
            FROM `users` 
            WHERE `email_address`=:email_address
        ');

        $stmt->execute(array(
            'email_address' => $email_address
        ));

        $row = $stmt->fetchObject();

        if(!$row || $row["email_address"] == '') {
            return 'true';
        }else{
            return 'false';  
        }

    } catch (PDOException $e) {
        // just for debugging. Don't display the error message in
        // production envirionemnet as it can contain sensitive data
        die('error: ' . $e->getMessage());
    }

} 
```

# php - 如何检查文件是否已更改？

> ID：14697805
> 
> 赞同：5
> 
> 时间：2013-02-04T23:43:47.720
> 
> 标签：php

我有一个 xml 文件，其中包含在安装脚本或文件内容更改时应加载的数据库信息。我可以在 xml 文件上使用 md5_file() 然后将值存储在数据库中，并在每次运行脚本时将其与文件的哈希值进行比较？它有什么缺点吗？还有其他更快/更简单的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T23:49:57.783

这取决于你所说的“改变”是什么意思。如果您要求实际修改内容，那么检查`filemtime`是不够的——这是一个很棒的第一步，应该首先使用，但仅靠它是不够的。

将`filemtime`与文件内容的哈希（例如`md5_file`）结合起来，它将有效地工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T23:46:59.093

您最好的选择是存储文件修改时间并将其与您将来检查的文件修改时间进行比较。

```
if(filemtime('myfile.txt') > $result_set['filemtime']) {
    // file was modified
} 
```

我希望你可以自己做数据库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T23:47:51.423

也许你可以使用[PHP 的`filemtime()`函数](http://php.net/manual/en/function.filemtime.php)。简单地说，这个函数获取指定文件的文件修改时间。

此函数返回一个[unix 时间戳](http://en.wikipedia.org/wiki/Epoch)，因此您需要将上次已知的修改时间保存在某处，以便将其与新值进行比较。

```
$modifiedTs = filemtime($filename);
if ($modifiedTs != $lastModificationTs){
  echo "$filename was modified!";
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-18T22:14:22.643

我知道我会及时回到这里，但这个问题对我有帮助，所以我想分享我用它做了什么，所以虽然这不是问题的答案，但我会将其设为社区 wiki，以便可以改进（我不是专家）。

这是一个更大的类的一部分，所以我去掉了其余部分，只提供了适用的代码，并使用一个非常常见的文件将它变成了一个易于理解的示例：

```
class ApplicationLogger {

    private $logfile, $path;

    public function __construct() {
        $this->logfile  = 'error.log';
        $this->path  = '/var/log/apache2/';
    }

    public function logState() {
        $files = array(
            'target'  => $this->path . $this->logfile,
            'lastmod' => $this->path . $this->logfile . '_lastmod'
        );

        if (file_exists($files['lastmod']) && file_exists($files['target'])) {
            $lfh = fopen($files['lastmod'], 'r');
            while (!feof($lfh)) {
                $lines[] = fgets($lfh);
            }
            fclose($lfh);
        }

        $modified = false;

        /**
         * check if we have a matching hash.
         */
        if (isset($lines) && filemtime($files['target']) != $lines[0]) { // mod time mismatch
            if (md5_file($files['target']) != $lines[1]) { // content modified
                $modified = true;
            }
        }

        /**
         * update or create the lastmod file
         */
        if (!file_exists($files['lastmod']) || $modified) {

            $current_mod = filemtime($files['target']) . "\n" . md5_file($files['target']);

            file_put_contents($files['lastmod'], $current_mod);
            $modified = true;
        }

        return $modified;
    }
} 
```

用法很简单：

```
$mod = new ApplicationLogger();
if ($mod->logState()) {
    // changed do something
} 
```

使其适应您的需求，并以您认为合适的方式对其进行改进。我希望你能通过编辑这个 CW 来贡献你的改编。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T23:47:13.797

最简单的方法是比较 file_date - 您可以使用`filemtime`它

# java - 如何启用 Collection notifyDataChanged？

> ID：14697811
> 
> 赞同：3
> 
> 时间：2013-02-04T23:44:09.183
> 
> 标签：java, android, android-ui

我有一个片段，其中有一个带有 BaseAdapter 的 ListView。然后我有一个弹出菜单，我在其中选择一个选项并将项目添加到 Collection。收集的数据应该显示在列表中，但它不显示。我需要添加 adapter.notifyDataChanged() 来更新视图。

问题是我可能无法访问来自不同类的适配器。如何启用自动 ui 更新？

PS。我试图从 UI 线程添加数据，但仍然没有...

```
 getActivity().runOnUiThread(new Runnable() {

                        public void run() {
                            GlobalData.groupTable.put(newGroup.getId(), newGroup);

                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:50:17.470

> 问题是我可能无法访问来自不同类的适配器。

创建自定义回调以更新您的适配器。[此方法](https://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)来自开发人员指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:46:32.867

它不是。将适配器作为参数传递给需要调用它的类。或者，您可以编写自己的集合类来覆盖 add 方法来调用适配器，但即便如此，您也必须将适配器传递给新的集合类。

# jquery - Kendo - save grid filters via code on the page has issues only with the date filter grid columns

> ID：14697819
> 
> 赞同：5
> 
> 时间：2013-02-04T23:44:49.880
> 
> 标签：jquery, date, filter, grid, kendo-ui

I have a kendo grid on my web page and I am trying to programatically save the grid filters using the `sessionStorage` and this is working for the most part.

The issue I am having is that when I place a filter on a date column, when I try to re-apply that filter when the user navigates back to that page, it errors out in one of the anonymous functions b/c the `toLowerCase()` method does not exist. The filter works fine if I am filtering on a string column. I can apply multiple filters and save them to a `sessionStorage` var and reapply to the grid just fine. Only with date columns am I having issues.

It took me a while to figure out how to get the kendo grid filters using the syntax:

```
var theKgridFilters = $("#gridList").data("kendoGrid").dataSource.filter(); 
```

Then to store it in a `sessionStorage` var, I had to `stringify()` the object or else it would not hold the grid filters in that var:

```
sessionStorage.setItem('theGridFilters', JSON.stringify(theKgridFilters)); 
```

Next, to reapply the filter on the grid, I had to convert the string back to a JSON object b/c the filter is an object with attributes, so I used this:

```
if (sessionStorage.theGridFilters) {                            
    gridFilter = sessionStorage.theGridFilters;
    gridFilter = $.parseJSON(gridFilter);
} 
```

Which gets applied to the grids dataSource filter attribute:

```
filter: gridFilter, 
```

When I filter the grid on a date column, the error throws on this line below:

```
function anonymous(d, __f, __o) {
    return (d.Last_Modified_Date.toLowerCase() == '2013-01-25t06:00:00.000z')
} 
```

Where the field that has the filter is `Last_Modified_Date`. I'm fairly new to working with jQuery, JS, etc., and from what I've read, the anonymous() fns are created on the fly, so I don't believe I can change this.

I checked online and someone mentioned to add `toString()` function before the `toLowerCase()`. I tried it in the debugger and it worked but I'm not sure how to access this via the code to make that change. It looks like the anonymous function is called from the kendo.web.js file based on the call stack of the IE debugger.

Also, the value of the date field in the debugger is shown below:

```
d.Last_Modified_Date    Wed Jan 25 00:00:00 CST 2013    Object, (Date) 
```

So I'm not even sure if it can equate that value to the string in the anonymous fn above, which is: `'2013-01-25t06:00:00.000z'`.

Please let me know if anyone has any insights to get around this date filter save issue. It's driving me insane. Maybe there's another way that I'm not aware of to save the grid filters.

Thanks in advance, Bruce!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:21:05.010

The reason you are observing this behavior is that JSON.parse doesn't create JavaScript Date objects. It creates strings instead:

```
typeof $.parseJSON(JSON.stringify(new Date())); // "string" 
```

The Kendo UI framework then tries to filter dates as strings hence the error.

The workaround is to use specify a [reviver](https://stackoverflow.com/questions/1792865/how-to-use-json-parse-reviver-parameter-to-parse-date-string):

```
 function dateReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
        if (a) {
            return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
        }
    }
    return value;
 }

 gridFilter = JSON.parse(gridFilter, dateReviver); 
```

# internet-explorer-8 - 仅在 IE8 中出现 JavaScript 错误“无效参数”

> ID：14697823
> 
> 赞同：1
> 
> 时间：2013-02-04T23:45:37.123
> 
> 标签：internet-explorer-8, arguments

我只在 IE8 上收到一个错误，我的菜单没有加载到主页上。所有其他浏览器都很好。

IE 给了我这个“页面错误”：-

```
Message: Invalid argument.
Line: 2
Char: 66850
Code: 0
URI: https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js 
```

奇怪的是，它在 Jquery 中，但实际上它是一些传递给 JQuery 的参数，它触发了错误。

经过调查，我发现以下行会引发错误：-

```
"this.parentNode.insertBefore(a,this.nextSibling" 
```

这是关于错误的，现在我不知道它在代码中触发的位置。经过一些尝试，我在我的代码中发现了一个奇怪的场景，在我创建菜单的地方：-

```
`
"node-1" : ['Overview/2','Overview/3','Overview/4','Overview/5','Overview/6','Overview/7','Overview/8','Overview/9','Overview/10','Overview/11','Overview/12','Overview/13'],

"node-2" : 
['node/2/1','node/2/4','My-Perspective/Opportunity-for-RMEP','node/2/2','node/2/5','node/2/6','My-Perspective','My-Perspective/2','My-Perspective/3','My-Perspective/4','My-Perspective/5','My-Perspective/6','My-Perspective/7','My-Perspective/8','My-Perspective/9','My-Perspective/10','node/2/7',/*'node/2/44a','node/2/44b',*/'node/2/43','node/2/44','node/2/45','node/2/46','node/2/47','node/2/48','node/2/49','node/2/8','node/2/9','node/2/10','node/2/11','node/2/12','node/2/13','node/2/14','node/2/15','node/2/16','node/2/16a','node/2/16b','Value/Transportation','Value/Transportation/1','Value/Transportation/2','Value/Transportation/3','Value/Transportation/4','Value/Transportation/4b','Value/Outbound-logistics','Value/Outbound-logistics/2','Value/Outbound-logistics/3','Value/Outbound-logistics/4','Value/Outbound-logistics/5','Value/Outbound-logistics/6','Value/Outbound-logistics/7','Value/Inbound-logistics','Value/Inbound-logistics/2','Value/Inbound-logistics/3','Value/Inbound-logistics/4','node/2/50','node/2/51','node/2/52','node/2/53','node/2/54','node/2/55'],//,'node/2/56','node/2/57','node/2/58','node/2/59','node/2/60','node/2/61'],

"node-3" : 
['My-Experts/1', 'My-Experts/2', 'My-Experts/3', 'My-Experts/4', 'My-Experts/5', 'My-Experts/6', 'My-Experts/7', 'My-Experts/8', 'My-Experts/9'],//'vince-lima','dave-mcmurray','ron-gewin','bill-parr'],

"node-4" : 
['My-Way/Potential','My-Way/Potential/2','My-Way/Requirements','My-Way/Requirements/Business-Led-Approach','My-Way/Requirements/Integrative-Transformation','My-Way/Requirements/Systematic-Waves','My-Way/Junk','My-Way/Junk/Relevant-Examples','My-Way/Junk/High-Tech','My-Way/Junk/High-Tech/2','My-Way/Junk/High-Tech/3','My-Way/Junk/High-Tech/4','My-Way/Junk/High-Tech/5','My-Way/Junk/High-Tech/6','My-Way/Junk/Retailer','My-Way/Junk/Retailer/2','My-Way/Junk/Retailer/3','My-Way/Junk/Retailer/4','My-Way/Junk/Retailer/5','My-Way/Junk/Basic-Materials','My-Way/Junk/Basic-Materials/2','My-Way/Junk/Basic-Materials/3','My-Way/Junk/Basic-Materials/4','My-Way/Junk/Basic-Materials/5','My-Way/Junk/Basic-Materials/6','My-Way/Junk/Automotive', 'My-Way/Junk/Automotive/2','My-Way/Junk/Automotive/4','My-Way/Junk/Automotive/5','My-Way/Approach','My-Way/Approach/1','My-Way/Approach/2','My-Way/Approach/3','My-Way/Approach/4','My-Way/Approach/5' ],

"node-135" : 
['Why-me/My-Capabilities/We-have-the-most', 'Why-Me/My-Capabilities/We-have-the-most-2','Why-Me/My-Capabilities/Sample-Profiles','Why-Me/My-Capabilities/We-bring-proprietary-tools','Why-Me/My-Capabilities/My-Consultants-Combine','Why-Me/My-Capabilities/My-Consultants-Combine-2','Why-Me/My-Capabilities/My-DTV-Labs','Why-Me/My-Capabilities/My-Chicago-Lab','Why-Me/My-Capabilities/IT-Systems','Why-Me/My-partnership'],

"node-145" : ['Tools/1','Tools/2','Tools/3','Tools/4','Tools/5','Tools/6','Tools/7','Tools/8','Tools/9','Tools/10','Tools/11','Tools/12','Tools/13','Tools/14','Tools/15','Tools/16','Tools/17','Tools/18','Tools/19','Tools/20','Tools/21']
` 
```

当我删除最后一个节点（node-145）时，页面没有给出任何错误，但仍然没有显示菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T19:24:57.677

在IE8中，调出开发者工具，点击“脚本”选项卡，点击“开始调试”按钮，在浏览器中刷新页面。浏览器将执行代码，然后在导致问题的行上中断。虽然这不是对您问题的具体答案，但这将更加具体，并为您提供有关如何修复错误的更多信息，而不是控制台中的错误消息。

# sqlite - CREATE INDEX 的指数执行时间

> ID：14697827
> 
> 赞同：5
> 
> 时间：2013-02-04T23:46:26.107
> 
> 标签：sqlite

我们正在开发一个项目，该项目在 sqlite3 数据库中进行数百万次插入，并且在调用时遇到了不同机器之间不一致的性能问题：

```
CREATE INDEX blocking_map_key_idx ON blocking_map (key) 
```

CentOS 5.8 在不到 1 小时内执行此 CREATE INDEX Mac OSX Mountain Lion 超过 6 小时后无法完成。

它们具有相同的 PRAGMA 设置、相同的 Sqlite 版本（3.3.6），并且似乎都使用了相似的内存占用。

sqlite 在这两个操作系统上是否有重要的执行方式？如果不是，是否可能是磁盘或内存问题？

我们正在运行的完整代码可以[在这里找到](https://github.com/open-city/dedupe/blob/sqlite_optimization/examples/sqlite_example/sqlite_example.py)，它是一个更大的[开源重复数据删除库](https://github.com/open-city/dedupe)的一部分。

# iphone - iOS：向 AVMutableComposition 添加空/黑帧

> ID：14697831
> 
> 赞同：6
> 
> 时间：2013-02-04T23:46:46.647
> 
> 标签：iphone, ios, avfoundation, avmutablecomposition

从一个 CAF 录音开始，我需要创建一个视频文件，其中视频轨道只是空帧，而音轨就是这个录音文件。我知道这是一个奇怪的用例，这可能就是我找不到有关如何操作的信息的原因。我正在尝试使用`AVMutableComposition`，但我无法弄清楚如何让它工作。

这是我现在所拥有的：

```
AVMutableComposition *composition = [AVMutableComposition composition];    

/* soundFilePath is the path to the CAF audio file */
AVURLAsset *audioAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:soundFilePath] options:nil];
CMTimeRange fullTime = CMTimeRangeMake(kCMTimeZero, [audioAsset duration]);
AVAssetTrack *sourceAudioTrack = [[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

/* Add audio track */
AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionAudioTrack insertTimeRange:fullTime ofTrack:sourceAudioTrack atTime:kCMTimeZero error:nil];

/* docsDir is defined previously as the path to where I want to save the file */
NSString *videoFilePath = [docsDir stringByAppendingPathComponent:@"video.mov"];
NSURL *videoFileURL = [NSURL fileURLWithPath:videoFilePath];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetHighestQuality];

exporter.outputFileType = AVFileTypeQuickTimeMovie;
exporter.outputURL = videoFileURL;

[exporter exportAsynchronouslyWithCompletionHandler:nil]; 
```

这让我得到的是一个 .mov 文件，其中包含音频，但没有视频。我需要该文件包含某种视频内容 - 只是空的视频帧。我对所有这些 iOS 库都很陌生，所以上面的所有代码基本上都是从各种示例中拼凑而成的，我当然不完全了解这一切应该如何工作。

我还尝试添加一个`AVMutableVideoComposition`以防`AVMutableComposition`万一这是正确的方法。为了做到这一点，我以与添加音轨`AVMutableComposition`相同的方式添加了一个空白视频轨道：

```
/* Add video track */
AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertEmptyTimeRange:fullTime]; 
```

然后我创建并配置了一个`AVMutableVideoComposition`这样的：

```
AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.frameDuration = [audioAsset duration];
videoComposition.renderScale = 1.0;
videoComposition.renderSize = CGSizeMake(320, 240);
AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];
instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
instruction.timeRange = compositionVideoTrack.timeRange;

videoComposition.instructions = [NSArray arrayWithObject:instruction]; 
```

最后，添加`AVMutableVideoComposition`到`AVMutableComposition`：

```
exporter.videoComposition = videoComposition; 
```

但是，使用这种方法，我什么也得不到。不创建视频文件。我在导出的完成处理程序中放置了一条日志语句，它确实完成了，但没有创建视频文件。

对此的任何帮助将不胜感激。谢谢！

# eclipse-plugin - Eclipse Juno (4.2) 的 Borland StarTeam 插件

> ID：14697839
> 
> 赞同：1
> 
> 时间：2013-02-04T23:47:31.293
> 
> 标签：eclipse-plugin, eclipse-juno, starteam

我一直在寻找 Eclipse Juno (4.2) 的 Borland StarTeam 插件，但找不到。

我尝试使用来自以下更新站点的 Eclipse 3.4 客户端，但它不适用于 Juno...

[http://altd.borland.com/update/eclipse3.4/site.xml](http://altd.borland.com/update/eclipse3.4/site.xml)

有谁知道我在哪里可以找到适用于 Eclipse Juno (4.2) 的 StarTeam 插件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:35:27.530

eclipse 4.2 没有插件！注册用户可以从这里下载最新版本的 eclipse 3.5 和 3.6，[http://supportline.microfocus.com/](http://supportline.microfocus.com/)

乔治

# berkeley-db - BDB 选择键以开头的记录

> ID：14697842
> 
> 赞同：2
> 
> 时间：2013-02-04T23:47:41.747
> 
> 标签：berkeley-db, berkeley-db-je

给定：存储为简单字符串 DatabaseEntry 键值的记录，键如下所示：

1.  NODE_1
2.  NODE_1_PROP_1
3.  NODE_1_PROP_2
4.  NODE_1_PROP_3
5.  NODE_2
6.  NODE_2_PROP_1
7.  NODE_2_PROP_2
8.  NODE_2_PROP_3

如何：仅选择 ID 以 NODE_1，结果 1-4 开头的记录？

我使用过 Cursor.getNext()，但 Cursor 类的一般问题是它会一直转到下一条记录，所以如果我这样做，我必须每次都评估键前缀以便在光标时停止将在 NODE_2 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:48:08.403

您需要使用辅助数据库。辅助数据库的想法是您为每条记录提供额外的标准。因此，鉴于您的示例，您需要提供辅助密钥创建者，它将采用“NODE_1_PROP_1”并返回“NODE_1”作为辅助密钥。然后您可以查询辅助数据库中的“NODE_1”，它将返回所有具有“NODE_1”作为键前缀的记录。关键是您不仅要使用密钥，还要使用记录的任何适当内容。确保您允许在辅助数据库中排序重复。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:03:17.897

我已经通过将字符串转换为二进制数组解决了这个问题，在这种情况下 NODE_1_PROP_1 会在 NODE_2 之前出现，这是我使用字符串作为键时的问题。

# sql - ORA-06511: PL/SQL 游标已打开

> ID：14697843
> 
> 赞同：9
> 
> 时间：2013-02-04T23:47:44.577
> 
> 标签：sql, oracle, plsql, database-cursor

有人对系统为什么告诉我`PAR_CUR`已经打开有任何想法吗？一切正常，直到我添加了最外面的光标（`dup_cur`），现在我收到了这个错误。感谢您提供的任何帮助。数据也在下面。

错误报告：

```
ORA-06511: PL/SQL: cursor already open
ORA-06512: at line 18
ORA-06512: at line 61
06511\. 00000 -  "PL/SQL: cursor already open"
*Cause:    An attempt was made to open a cursor that was already open.
*Action:   Close cursor first before reopening. 
```

代码：

```
ACCEPT p_1 prompt 'PLEASE ENTER THE REGION:'
DECLARE
    v_child        regions.child_name%TYPE := '&p_1';
    v_parent       regions.parent_name%TYPE;
    v_parent2      regions.child_name%TYPE;
    v_parent3      regions.child_name%TYPE;
    v_count        NUMBER := 0;
    v_regionnumber NUMBER := 1;
    v_parentcount  NUMBER := 0;
    v_dup          regions.child_name%TYPE;
    CURSOR reg_cur IS
      SELECT Upper(parent_name)
      FROM   regions
      WHERE  Upper(child_name) = Upper(v_child)
             AND Upper(parent_name) = Upper(v_dup);
    CURSOR par_cur IS
      SELECT Upper(parent_name)
      FROM   regions
      WHERE  Upper(child_name) = v_parent
             AND parent_name IS NOT NULL;
    CURSOR dup_cur IS
      SELECT Upper(parent_name)
      FROM   regions
      WHERE  Upper(child_name) = Upper(v_child); 
```

开始打开 ​​dup_cur;

```
 LOOP
        FETCH dup_cur INTO v_dup;
        EXIT WHEN dup_cur%NOTFOUND;

        SELECT Count(*)
        INTO   v_count
        FROM   regions
        WHERE  Upper(child_name) = Upper(v_child);

        SELECT Count(parent_name)
        INTO   v_parentcount
        FROM   regions
        WHERE  Upper(parent_name) = Upper(v_child);

        IF v_count > 0
            OR v_parentcount > 0 THEN
          SELECT Count(parent_name)
          INTO   v_count
          FROM   regions
          WHERE  Upper(child_name) = Upper(v_child);

          IF v_count > 0 THEN
            OPEN reg_cur;

            FETCH reg_cur INTO v_parent;

            dbms_output.Put_line('----- Begin Output -----');

            LOOP
                IF v_regionnumber < 2 THEN
                  dbms_output.Put_line('Line 1: (Region 1) '
                                       || Upper(v_child));

                  dbms_output.Put_line('Line 2: (Region 1) '
                                       || Upper(v_child)
                                       || ' --> '
                                       || '(Region 2) '
                                       || Upper (v_parent));
                END IF;

                OPEN par_cur;

                v_parent2 := v_parent;

                FETCH par_cur INTO v_parent;

                EXIT WHEN par_cur%NOTFOUND;

                v_regionnumber := v_regionnumber + 1;

                IF v_regionnumber = 2 THEN
                  dbms_output.Put_line('Line 3: '
                                       || '(Region 1) '
                                       || Upper(v_child)
                                       || ' --> '
                                       || '(Region 2) '
                                       || Upper(v_parent2)
                                       || ' --> '
                                       || '(Region 3) '
                                       || Upper(v_parent));
                ELSE
                  IF v_regionnumber = 3 THEN
                    dbms_output.Put_line('Line 4: '
                                         || '(Region 1) '
                                         || Upper(v_child)
                                         || ' --> '
                                         || '(Region 2) '
                                         || Upper(v_parent3)
                                         || ' --> '
                                         || '(Region 3) '
                                         || Upper(v_parent2)
                                         || ' --> '
                                         || '(Region 4) '
                                         || Upper(v_parent));
                  END IF;
                END IF;

                CLOSE par_cur;

                v_parent3 := v_parent2;
            END LOOP;

            dbms_output.Put_line('----- End_Output -----');

            CLOSE reg_cur;
          ELSE
            dbms_output.Put_line('----- Begin Output -----'
                                 || Chr(10)
                                 || 'Line 1: (Region 1) '
                                 || Upper(v_child)
                                 || Chr(10)
                                 || '----- End_Output -----');
          END IF;
        ELSE
          dbms_output.Put_line('----- Begin Output -----'
                               || Chr(10)
                               || Upper(v_child)
                               ||' is not in the table.'
                               || Chr(10)
                               || '----- End_Output -----');
        END IF;
    END LOOP;

    CLOSE dup_cur;
END; 

CREATE TABLE regions
(
        PARENT_NAME     VARCHAR2(30),
        CHILD_NAME      VARCHAR2(30)
);
INSERT INTO regions VALUES('Texas','Rockford');
INSERT INTO regions VALUES('Colorado','Aurora');
INSERT INTO regions VALUES(NULL,'Asia');
INSERT INTO regions VALUES(NULL,'Australia');
INSERT INTO regions VALUES(NULL,'Europe');
INSERT INTO regions VALUES(NULL,'North America');
INSERT INTO regions VALUES('Asia','China');
INSERT INTO regions VALUES('Asia','Japan');
INSERT INTO regions VALUES('Australia','New South Wales');
INSERT INTO regions VALUES('New South Wales','Sydney');
INSERT INTO regions VALUES('Canada','Ontario');
INSERT INTO regions VALUES('China','Beijing');
INSERT INTO regions VALUES('England','London');
INSERT INTO regions VALUES('Europe','United Kingdom');
INSERT INTO regions VALUES('Illinois','Aurora');
INSERT INTO regions VALUES('Illinois','Chicago');
INSERT INTO regions VALUES('Illinois','Rockford');
INSERT INTO regions VALUES('Wisconsin','Madison'); 
INSERT INTO regions VALUES('Japan','Osaka');
INSERT INTO regions VALUES('Japan','Tokyo');
INSERT INTO regions VALUES('North America','Canada');
INSERT INTO regions VALUES('North America','United States');
INSERT INTO regions VALUES('Ontario','Ottawa');
INSERT INTO regions VALUES('Ontario','Toronto');
INSERT INTO regions VALUES('United States','Colorado');
INSERT INTO regions VALUES('United States','Illinois');
INSERT INTO regions VALUES('United States','Texas');
INSERT INTO regions VALUES('United Kingdom','England'); 
COMMIT; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T00:05:59.527

您正在循环中打开和关闭光标。您应该在循环之外打开和关闭它。

IE。

```
FETCH REG_CUR INTO V_PARENT;
DBMS_OUTPUT.PUT_LINE('----- Begin Output -----');
OPEN PAR_CUR; -- ************OPEN HERE 
LOOP
  IF V_REGIONNUMBER < 2 THEN
    DBMS_OUTPUT.PUT_LINE('Line 1: (Region 1) ' || UPPER(V_CHILD));
    DBMS_OUTPUT.PUT_LINE('Line 2: (Region 1) ' || UPPER(V_CHILD) || ' --> ' || '(Region 2) ' || UPPER (V_PARENT));
  END IF;
  V_PARENT2 := V_PARENT;
  FETCH PAR_CUR INTO V_PARENT;
  EXIT WHEN PAR_CUR%NOTFOUND;
  V_REGIONNUMBER   := V_REGIONNUMBER + 1;
  IF V_REGIONNUMBER =2 THEN
    DBMS_OUTPUT.PUT_LINE('Line 3: ' || '(Region 1) '|| UPPER(V_CHILD) || ' --> ' || '(Region 2) ' || UPPER(V_PARENT2) || ' --> ' || '(Region 3) ' || UPPER(V_PARENT));
  ELSE
    IF V_REGIONNUMBER =3 THEN
      DBMS_OUTPUT.PUT_LINE('Line 4: ' || '(Region 1) '|| UPPER(V_CHILD) || ' --> ' || '(Region 2) ' || UPPER(V_PARENT3) || ' --> ' || '(Region 3) ' || UPPER(V_PARENT2)|| ' --> ' || '(Region 4) ' || UPPER(V_PARENT));
    END IF;
  END IF;
  V_PARENT3 := V_PARENT2;
END LOOP;
CLOSE PAR_CUR;-- ************CLOSE HERE 
```

当您在循环中打开时，在第二次迭代中，光标错误，因为它已经打开

ps 看起来你只是想弄清楚层次结构并打印它。如果是这样，您可以这样做：

```
SQL> select ltrim(str, ' --> ') str
  2    from (select child_name, level, SYS_CONNECT_BY_PATH('(Region ' || level || ') ' || child_name, ' --> ') str,
  3                 parent_name
  4            from regions
  5           start with child_name = 'Rockford'
  6           connect by  child_name = prior parent_name)
  7   where parent_name is null
  8  /

STR
--------------------------------------------------------------------------------
(Region 1) Rockford --> (Region 2) Illinois --> (Region 3) United States --> (Re
gion 4) North America

(Region 1) Rockford --> (Region 2) Texas --> (Region 3) United States --> (Regio
n 4) North America

SQL> select ltrim(str, ' --> ') str
  2    from (select child_name, level, SYS_CONNECT_BY_PATH('(Region ' || level || ') ' || child_name, ' --> ') str,
  3                 parent_name
  4            from regions
  5           start with child_name = 'London'
  6           connect by  child_name = prior parent_name)
  7   where parent_name is null
  8  /

STR
--------------------------------------------------------------------------------
(Region 1) London --> (Region 2) England --> (Region 3) United Kingdom --> (Regi
on 4) Europe

SQL> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T14:36:20.807

它（通常）建议在打开任何游标时使用此语法

```
IF reg_cur %ISOPEN THEN
     CLOSE reg_cur ;
   END IF;
   OPEN reg_cur ; 
```

希望这会有所帮助...

# c# - 使用 DataSet 读取带有子节点的 XML 文件

> ID：14697844
> 
> 赞同：0
> 
> 时间：2013-02-04T23:47:50.033
> 
> 标签：c#, xml

我有一个想要加载到数据集中的 XML 文件。

XML 文件来自我无法控制的日志记录系统；这带来了一些挑战，我在解析时需要帮助......

XML 文件如下所示：

```
<LogEntry>
<DateTime></DateTime>
<AppId></AppId>
<Description>
   <EncryptedData>
      <CipherValue></CipherValue>
   </EncryptedData>
</Description>
<Module></Module>
</LogEntry> 
```

注意：没有 XML DocType。不确定这对 DataSet 是否必要？

通常，没有根节点。除非程序停止/重新启动，否则文档的“和”开始和结束标记。它似乎在启动时创建根节点，但如果文件在运行时因大小而被删除，它不会重新创建根节点。

问题 #1 - 处理丢失根节点问题的最佳方法是什么？我是否应该在尝试通过 DataSet 的 ReadXML() 函数加载之前打开文件并查找它，并在必要时预先添加 - 并附加？

问题 #2 - 带有子节点的条目似乎没有加载到数据集中。ReadXML() 似乎跳过了这个元素；因为我在尝试访问该特定列时遇到错误，它告诉我它不存在。IE，上面的“描述”。

问题 #3 - 当我加载“描述”列时，我需要访问“CipherValue”数据，因为它是 BASE64 编码的。我将不得不解密这些信息。我有这方面的信息。

访问“描述”列以便我可以解密数据是我进行此练习的主要原因。请注意，确实有更多的列和更多的子节点……但基本思想相同。

我正在尝试使用 DataSet，因为我认为它会使处理相当大的 XML 文件变得更容易？也许有更好的方法？

例如，下面的代码可以工作，但我再次没有看到子节点（我注释掉了返回列不存在的行）：

```
Console.WriteLine("Rows found = {0}", dt.Rows.Count);
foreach (DataRow row in dt.Rows)
{
    Console.WriteLine("{0} {1} {2}", 
    row["DateTime"], 
    row["AppId"],
    //row["Description"],
    row["Module"]
    ); 
```

我想我需要一个 XML 模式——但我不确定如何编写它（即使是上面的示例），以便我可以按照我想要的方式读取数据。

对此的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:58:14.820

DataSet 类不适用于通用 XML 输入和输出。它是关系数据库模型的内存表示。它不能表示任何不能表示为关系数据库的东西。

您的数据可以建模为`LogEntry`具有`DateTime`和列`AppId`的表。`Module`但什么是`Description`？它不是表的外键-两边都`EncryptedData`没有**id ！**

# symfony - Symfony 的模态弹出窗口

> ID：14697847
> 
> 赞同：0
> 
> 时间：2013-02-04T23:48:00.497
> 
> 标签：symfony

我需要使用模态弹出框作为表格的过滤器。在 Symfony 环境中处理此问题的正确/常见/基本方法是什么？

一个例子; [http://hypertrends.com/net/files/2010/04/modal.png](http://hypertrends.com/net/files/2010/04/modal.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:51:21.553

JQuery UI Dialog 是最简单的：

[Jquery UI 模态表单](http://jqueryui.com/resources/demos/dialog/modal-form.html)

# html - 我正在从一个 div 设计一个按钮，但我想要它旁边的其他按钮，所以我使用了内联，但这完全扭曲了格式：

> ID：14697854
> 
> 赞同：1
> 
> 时间：2013-02-04T23:48:46.220
> 
> 标签：html, css

可见这里：http: [//jsfiddle.net/USy5L/](http://jsfiddle.net/USy5L/)

CSS：

```
.upload {
    display: inline;
    margin: 0 auto 15px auto;
    width: 400px;
    height: 50px;

    background: #fffbed;
    border: 1px solid #efdec4;
    border-radius: 5px;
    -moz-box-shadow: 0px 2px 4px rgba(236, 229, 199, 0.3), inset 0px 0px 3px 1px rgba(236, 229, 199, 0.5);
    -webkit-box-shadow: 0px 2px 4px rgba(236, 229, 199, 0.3), inset 0px 0px 3px 1px rgba(236, 229, 199, 0.5);
    box-shadow: 0px 2px 4px rgba(236, 229, 199, 0.3), inset 0px 0px 3px 1px rgba(236, 229, 199, 0.5);
}

input[type="button"] {
    width: 120px;
    height: 50px;
    float: right;

    border: 1px solid #4b2218;
    border-radius: 5px;
    color: #fff;
    font-size: 1em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);

    background: #a35a47; /* Old browsers */
}

.filename {
    margin: 14px 0 0 14px;

    color: #bf9e7b;
    float: left;
    font-size: 1.2em;
    font-style: italic;
} 
```

HTML：

```
<div class="upload">
    <input type="button" value="Browse">
    <span class="filename">No file selected</span>
</div> 
```

我不知道我做错了什么。如果我使用 display:block，它可以完美地工作，但是因为我需要在同一行上的另一个按钮，所以我需要它是内联的。

使用检查器，它显示没有宽度，只是假设父 div 的宽度。但是，我设置了它的宽度。宽度不是用内联元素设置的吗？

我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:50:48.657

尝试`inline-block`而不是简单地`inline`. 或者浮动元素（浮动元素隐式显示为`block`。）

正如您所发现的，设置内联元素的宽度将不起作用。

# android - 以正确的方式开发安卓游戏

> ID：14697857
> 
> 赞同：2
> 
> 时间：2013-02-04T23:49:08.970
> 
> 标签：android, drawing

我想指出，我对 Android 游戏开发还很陌生。我尝试了几种游戏编程方法，发现两者都有效，但它们都有自己的优势。所以我想知道哪种方式更好/更常见。例如，如果我们正在尝试制作拼图游戏，我们需要许多相互交互并响应触摸事件的拼图对象。

**方式一：**

正如我从 java 中学到的，如果您有许多行为方式相同的对象，您应该创建类，然后创建该类的对象。我在游戏项目中尝试了这个并创建了扩展 ImageView 的类“PuzzlePiece”。然后在我的主程序中，我将它们添加到我的布局中并将它们从主活动中移出。这是相当复杂和缓慢的。而且感觉这不是正确的方法。

**方式二：**

我将我的游戏对象添加为组件（例如 ImageView、ImageButton、带有图像背景的自定义布局）。这样我可以更好地控制它们，同时拥有许多对象并让它们相互交互更容易。但是这种方法很慢，而且感觉也不是正确的方法。

**方式3：**

我在 Activity 中添加了 SurfaceView，并使用 draw() 方法在画布上绘制了我的所有对象。这种方法要快得多，但这样我对我的对象的控制就更少了。例如，在画布上绘制许多对象并让它们都响应触摸事件或相互交互更难实现。

还有其他我错过的方法，或者我的方法之一接近正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:22:22.383

您可以使用 android 类构建东西，或者如果您足够熟练，您可以从类似 andengine.org 或其他一些使用 opengl es 的开源游戏引擎开始，其方式主要是从您那里抽象出 opengl es 部分。您仍然需要进行大量配置，但不会像您从头开始构建基于 opengl 的应用程序那样糟糕。

andengine.org

还有相当多的其他开源 android 游戏引擎得到了开发社区的大力支持。做一些谷歌搜索并检查一下。否则，正如您注意到的那样，您想要在游戏方面完成的大多数事情最终会变得非常缓慢和笨拙，使用普通的 android 视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:29:23.410

在原生android方式中，我认为方式3是正确的。但是正如您之前所经历的那样，它非常混乱且难以处理（取决于设备或操作系统版本，您将面临 GC 严重的丢帧。

如果你只是在锻炼，方式1很容易理解Android的架构。方式 3 可以训练您的布局渲染技术。但永远不要考虑在市场上发布。您将获得 Android 碎片化的可怕体验。

如果您想创建将在市场上发布的真实游戏，则必须使用 OpenGL。有几种游戏引擎可以使用 OpenGL。

*   **AndEngine** [http://www.andengine.org/](http://www.andengine.org/)
*   **libgdx** [http://code.google.com/p/libgdx/](http://code.google.com/p/libgdx/)
*   **Unity3D** [http://unity3d.com/](http://unity3d.com/)
*   **Cocos2d-x** [http://www.cocos2d-x.org/](http://www.cocos2d-x.org/) - 将是一个不错的选择。

# scala - 未找到 Basic Play 2.0 WebSocket 请求标头

> ID：14697868
> 
> 赞同：9
> 
> 时间：2013-02-04T23:50:42.147
> 
> 标签：scala, websocket, playframework-2.0

我正在尝试使用 Play 2.0 websockets 做一个非常简单的概念证明。

这是我现在正在做的事情：

*   在我的控制器中定义 WebSocket：

```
def wsrequest = WebSocket.using[String] { request =>

  // Send a single 'Hello!' message 
  val out = Enumerator("Hello!") 

 // Just consume and ignore the input
  val in = Iteratee.consume[String]()

  // tie the in and out values to each other
  (in, out)
} 
```

*   在我的路线文件中添加路线

```
GET     /wsrequest                  controllers.Application.wsrequest 
```

*   在我的 index.scala.html 的 javascript 中使用以下内容：

```
 var sock = new WS("@routes.Application.wsrequest().webSocketURL()") 
```

但是，当我尝试编译它时，我得到一个错误：

```
 [info] Compiling 5 Scala sources and 1 Java source to target\scala-2.9.1\classes...
[error] target\scala-2.9.1\src_managed\main\views\html\index.template.scala:32: Cannot find any HTTP Request Header here
[error] Error occurred in an application involving default arguments.
[error]             var sock = new WS(""""),_display_(Seq[Any](/*11.33*/routes/*11.39*/.Application.wsrequest().webSocketURL())),format.raw/*11.78*/("""")
[error]                                                                                                                     ^
[error] one error found 
```

我错过了一步吗？或者我在上面所做的事情中犯了一个错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T08:29:04.467

您的模板需要一个隐式请求标头，如下所示：

```
@(message: String)(implicit request: RequestHeader) 
```

# java - 等到任务完成

> ID：14697881
> 
> 赞同：4
> 
> 时间：2013-02-04T23:51:25.203
> 
> 标签：java, android, wifi

我需要等到android启用wifi（你不能只是“setWifiEnabled（true）”并期望立即启用）。我需要正确的方法来做到这一点。

我有一些代码及其工作，但我认为它不是完成工作的正确方法（我认为）

```
while(wifiManager.getWifiState() != 3) {

            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } 
```

我已经检查了[等到 wifi 在 android 上连接](https://stackoverflow.com/questions/8678362/wait-until-wifi-connected-on-android)，但我没有找到我需要的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:54:28.877

正确的方法是注册 wifi 连接事件。然后Android会在连接时给你打电话。请参阅[如何检测何时在 Android 中建立了 WIFI 连接？](https://stackoverflow.com/questions/5888502/android-wifi-how-to-detect-when-wifi-connection-has-been-established)

# ruby - Ruby/Rails if/else case 语句

> ID：14697883
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:51:38.700
> 
> 标签：ruby

我在 lib 方法中有以下 if else 语句：

```
begin
    url                  = URI.parse("url"+ product )
    @response            = JSON.parse(Net::HTTP.get_response(url).body)
    url2                 = URI.parse("url" + product)
    @response1           = JSON.parse(Net::HTTP.get_response(url2).body)

    if @response != nil
        @url                 = @response["product"]["url"]
        image_url1           = @response["product"]["image_url"]
        @title               = @response["product"]["title"] 

    else
        @url                 = @response1["ProductUrl"]
        @image_url           = @response1["ImagePath"]  
        @title               = @response1["ProductName"]
    end
  rescue 
     next 
end 
```

目前此方法仅检查 url 和 @response，如果 @response = nil 则简单地跳过。如何检查 @response 是否为 nil，如果是，请使用 url2 和 @response1 并保存从该响应返回的变量。如果@response 不为零，则保存从@response 返回的变量。

@response 和 @response1 是不同的 API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:00:24.287

我想这就是你想要的。关键是要检查 nil，使用 @response.nil? 另一个问题是，如果第一次失败，你会得到相同的 url - 不知道为什么你会再次要求相同的 url，如果第一次失败，你会以不同的方式对待它。

```
begin
  url = URI.parse("url+ product )
  @response = JSON.parse(Net::HTTP.get_response(url).body)

  if !@response.nil?
    @url = @response["product"]["walmart_canonical_url"]
    @image_url = @response["product"]["image_url"]
    @title = @response["product"]["title"] 
  else
    url = URI.parse("url" + product)
    @response = JSON.parse(Net::HTTP.get_response(url2).body)
    @url = @response["ProductUrl"]
    @image_url = @response["ImagePath"]  
    @title = @response["ProductName"]
  end

rescue
  next
end 
```

# ruby-on-rails - 将参数与 Ruby 方法一起作为参数发送给 link_to

> ID：14697888
> 
> 赞同：0
> 
> 时间：2013-02-04T23:52:20.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我无法让一个`link_to`方法工作的两部分参数，其中一个是 Ruby 方法，另一个是参数。

当我使用以下代码时：

```
<%= link_to "Sort by most active", school_course_path(current_school, :params => "by_most_active") %> 
```

我收到“无法将字符串转换为哈希”的错误。我试图在 params 的语法方面遵循这个[问题](https://stackoverflow.com/questions/2124862/link-to-send-parameters-along-with-the-url-and-grab-them-on-target-page)，但无法弄清楚为什么我的 :params 会出现错误。

谢谢。

**编辑**：

为了提供额外的上下文，我设置了以下嵌套路由：

```
 resources :schools do
    resources :courses 
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:56:49.187

看起来您正在尝试链接到 course_controller 的 show 方法。您是否没有错过课程对象作为路径助手的第二个参数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:03:11.707

该`:params`选项需要哈希，而不是键，因此您可以同时指定键和值。你需要类似的东西`:params=> { by_most_active: true }`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T00:24:50.240

您正在使用`school_course_path`which 期望一所学校和一门课程作为其前两个参数。通过 current_school 后，您需要为其提供课程。您还应该`params`使用不同的名称更改部件，例如`order`. 所以你的 link_to 应该看起来像

```
school_course_path(current_school, course, order: 'by_most_active') 
```

如果你想获得最活跃的课程`current_school`，你应该使用`school_courses_path`

```
school_courses_path(current_school, order: 'by_most_active') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T23:56:44.417

试试这个

```
<%= link_to "Sort by most active", school_course_path(:current_school => current_school, :params => "by_most_active") %> 
```

并打电话

```
params["current_school"] and current_school["by_most_active"]. 
```

# php - 搜索表单和内联 cGridView 过滤器的互操作性

> ID：14697891
> 
> 赞同：0
> 
> 时间：2013-02-04T23:52:22.820
> 
> 标签：php, yii, cgridview

我会保持这个非常抽象，因为我相信（希望）这是一个容易解决的普遍问题。我修改了一个 gii 生成的管理页面，如下所示。修改搜索表单以选择属于给定用户的记录。这有效，并且在搜索网格时更新正常。

我已经自定义了网格的输出以包含各种用户相关数据，例如反映一些用户数据的每条记录。

当我使用网格过滤器（到小部件的顶部）时，过滤器结果很好，但是我丢失了用户的原始过滤器。

因此，我查询用户并选择一些结果，当我想根据其他条件过滤这些结果时，它会生成从整个数据集生成的结果，而不是用户过滤的结果。

附带说明，我尝试安装[http://www.yiiframework.com/extension/remember-filters-gridview/](http://www.yiiframework.com/extension/remember-filters-gridview/)

这实际上会产生一些结果，因为当我按照上面指定的方式进行过滤时它不起作用，但是当我刷新页面时，结果完全符合预期，因为它保存了上一个会话中的两个过滤器。

希望这很清楚，请帮忙！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:46:41.190

代码总是有帮助的，但如果我理解正确，我会做类似的事情来显示用户消息；我设置了一个初始过滤器以仅查找发送给登录用户的消息，然后我还需要让用户按主题和发件人过滤消息。我不知道您的模型或标准的名称，所以这里有一个简化的例子来说明我是如何做到的：

控制器：

```
public function actionIndex()
{
    $model = new Message('search');
    $model->unsetAttributes();

    if(isset($_GET['Message']))
        $model->attributes = $_GET['Message'];

    // Set default filter
    $model->msg_to = Yii::app()->user->id;

    $this->render('index', array('model' => $model));
} 
```

看法：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=> 'message-grid',
    'dataProvider'=> $model->search(),
    'filter'=> $model,
)); 
```

模型：

```
public function search()
{
    $criteria = new CDbCriteria;

    $criteria->compare('from',$this->from);
    $criteria->compare('msg_to',$this->msg_to);
    $criteria->compare('from_name',$this->from_name,true);
    $criteria->compare('subject',$this->subject,true);
    $criteria->compare('body',$this->body,true);
    $criteria->compare('read',$this->read);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
        'pagination'=>array('pageSize'=>15),
    ));
} 
```

如果默认过滤器的标准非常复杂，最好的办法是在模型中创建一个[命名范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)，如下所示：

```
public function scopes()
{
    return array(
        'inbox' => array(
            'condition' => 't.msg_to = :user_id',
            'params' => array(':user_id' => Yii::app()->user->id),
            'order' => 'min(t.read) ASC, t.posted_on DESC',
        ),
    );

} 
```

要使用该范围，您将`$model->inbox()->search()`在 CGridView 中编写而不是`$model->search()` 您还应该删除该`$model->msg_to = Yii::app()->user->id;`行

最后一件事：如果您的条件需要用户输入，例如通过 $_GET 变量，您可以使用“参数化命名范围”。请参阅此页面上的部分：[http](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes) ://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes您将以相同的方式使用它们：`$model->inbox()->search()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:02:14.590

根据您的代码条件，答案可能会有所不同：

1 ) user_id 的形式是 GET 还是 POST？如果是 POST，则必须更改为 GET，因为 .CGridView 用于 GET

2) 请记住，我们正在使用两个单独的表单，因此，如果在每种情况下都收到执行操作所需的参数，您必须验证您的代码......如果没有，您必须将 URL 或会话或 cookie 更改为始终接收您需要的所有数据。

3）CgridView将过滤器添加到当前url并发送AJAX，我猜选择user_id的表单是普通的HTTP GET（不是AJAX），检索用户ID的表单字段的名称是user_id

a) 过滤器字段被命名为 CGridView "model_name['attribute_name']" 然后在控制器中：

```
public function actionAdmin($user_id="") {
    ...
    if (!empty($user_id)) $model->user_id = intval($user_id);
    if (isset($_GET['model_name'] ) $model->attributes = $_GET['model_name'];
    ...
} 
```

b) 如果用户 ID 表单也可用作 CGridWiew 列，则：

```
public function actionAdmin($user_id="") {
   ...
   if (isset($_GET['model_name'] ) {
       if (! isset($_GET['model_name']['user_id']) && ! empty($user_id) ) {
          $_GET['model_name']['user_id'] = $user_id;
       }          
        $model->attributes = $_GET['model_name'];
   } elseif (!empty($user_id)) $model->user_id = intval($user_id);
   ... 
} 
```

c) 是你的 actionAdmin 就像 actionAdmin() 你必须检索用户 ID

```
yii::app()->request->getParam('user_id'); 
```

# javascript - 我可以将元素作为第一个参数传递给 JavaScript 中的事件处理程序的最简单方法是什么？

> ID：14697898
> 
> 赞同：4
> 
> 时间：2013-02-04T23:52:42.877
> 
> 标签：javascript, jquery, event-handling, bind, jquery-events

我知道将 this 的值更改为在事件处理函数中接收事件的元素非常有用。但是，我想让我的函数总是在我的应用程序上下文中调用，而不是在元素上下文中。这样，我可以将它们用作事件处理程序以及以其他方式（例如在`setTimeout`调用中）。

所以，像这样的代码：

```
window.app = (function () {
    var that = {
        millerTime: function () {},
        changeEl: function (el) {
            el = el || this;
            // rest of code...
            that.millerTime();
        }
    };
    return that;
}()); 
```

可能是这样的：

```
window.app = (function () {
    return {
        millerTime: function () {},
        changeEl: function (el) {
            // rest of code...
            this.millerTime();
        }
    };
}()); 
```

第一种方式让我看起来很困惑。有没有一种简单的方法可以将接收事件的元素作为第一个参数（最好是 jQuery 包装的元素）传递给我的事件处理函数并在应用程序的上下文中调用？假设我使用 jQuery 绑定了一堆事件处理程序。我不想一直包含匿名函数：

```
$('body').on('click', function (event) {
    app.changeEl.call(app, $(this), event);  // would be nice to get event too
}); 
```

我需要一个函数来为我处理这一切。在这一点上，我觉得传递匿名函数是没有办法的，但我只想看看是否有人有解决方案。

我的尝试：

```
function overrideContext (event, fn) {
   if (!(this instanceof HTMLElement) ||
         typeof event === 'undefined'
   ) {
       return overrideContext;
   }

   // at this point we know jQuery called this function // ??
   var el = $(this);

   fn.call(app, el, event);
}

$('body').on('click', overrideContext(undefined, app.changeEl)); 
```

使用`Function.prototype.bind`（我是新手），我仍然无法获得元素：

```
window.app = (function () {
    return {
         millerTime: function () {},
         changeEl: function (el) {
            // rest of code...
            console.log(this); // app
            this.millerTime();
         }
    };
}());

function overrideContext (evt, fn) {
    var el = $(this); // $(Window)
    console.log(arguments); // [undefined, app.changeEl, p.Event] 
    fn.call(app, el, event);
}

$('body').on('click', overrideContext.bind(null, undefined, app.changeEl)); 
```

相反，使用`$('body').on('click', overrideContext.bind(app.changeEl));`this 指向我的`app.changeEl`函数，我的参数长度为 1 并且仅包含`p.Event`. 在这两种情况下，我仍然无法获取元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:57:54.743

定义这样的函数应该会给你你想要的：

```
function wrap(func) {
  // Return the function which is passed to `on()`, which does the hard work.
  return function () {
    // This gets called when the event is fired. Call the handler
    // specified, with it's context set to `window.app`, and pass
    // the jQuery element (`$(this)`) as it's first parameter.
    func.call(window.app, $(this) /*, other parameters (e?)*/);
  }
} 
```

然后你会像这样使用它；

```
$('body').on('click', wrap(app.changeEl)); 
```

有关详细信息，请参阅[`Function.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

^(此外，我想建议*不要*使用这种方法。精通 JavaScript 程序员*希望*上下文在超时和事件处理程序中发生变化。从他们身上拿走这个基本原理就像我没有指南针就把你丢在撒哈拉沙漠。)

# r - mclapply 是否保证按顺序返回其结果？

> ID：14697901
> 
> 赞同：15
> 
> 时间：2013-02-04T23:53:27.987
> 
> 标签：r, parallel-processing, multicore

我正在使用`mclapply`包`multicore`（在 Ubuntu 上），我正在编写一个函数，该函数要求`mclapply(x, f)`按顺序返回 的结果（即`f(x[1]), f(x[2]), ...., f(x[n])`）。

```
# multicore doesn't work on Windows

require(multicore)
unlist(mclapply(
    1:10,
    function(x){
        Sys.sleep(sample(1:5, size = 1))
        identity(x)}, mc.cores = 2))

[1] 1 2 3 4 5 6 7 8 9 10 
```

上面的代码似乎暗示`mclapply`返回结果的顺序与`lapply`.

但是，如果这个假设是错误的，我将不得不花很长时间重构我的代码，所以我希望从更熟悉这个包/并行计算的人那里得到这个假设是正确的保证。

假设`mclapply`无论给出什么可选参数，它总是按顺序返回结果是否安全？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T22:59:40.010

简短的回答：它确实以正确的顺序返回结果。

但当然，您应该自己阅读代码（`mclapply`是一个 R 函数......）

手册页`collect`提供了更多提示：

> 注意：如果 expr 使用诸如 sendMaster 之类的低级多核函数，则单个作业可以多次传递结果，用户有责任正确解释它们。

但是，如果你不搞低级，

> collect 返回列表中可用的任何结果。**结果将具有与指定作业相同的顺序。**如果有多个作业并且一个作业有名称，它将用于命名结果，否则将使用其进程 ID。

（我的重点）

现在为`mclapply`. 快速浏览一下源代码会产生：

*   如果`!mc.preschedule`并且没有比核心 ( `length (X) <= cores`)更多的作业`parallel`并且`collect`被使用，请参见上文。
*   如果`mc.preschedule`或比核心更多的工作，`mclapply`它本身会处理订单 - 请参阅代码。

但是，这是您的实验稍作修改的版本：

```
> unlist (mclapply(1:10, function(x){
    Sys.sleep(sample(1:5, size = 1)); 
    cat (x, " ");    
    identity(x)}, 
  mc.cores = 2, mc.preschedule = FALSE))
1  2  4  3  6  5  7  8  9  10   [1]  1  2  3  4  5  6  7  8  9 10
> unlist (mclapply(1:10, function(x){
    Sys.sleep(sample(1:5, size = 1)); 
    cat (x, " ");    
    identity(x)}, 
  mc.cores = 2, mc.preschedule = TRUE))
1  3  2  5  4  6  7  8  10  9   [1]  1  2  3  4  5  6  7  8  9 10 
```

这表明子作业以不同的顺序返回结果（更准确地说：子作业即将以不同的顺序完成），但结果是按原始顺序组装的。

（在控制台上工作，但不在 RStudio 中 - `cat`s 不显示在那里）

# c# - 无论运行时上下文如何，都将 C# 程序使用的数据文件定位在公共位置？

> ID：14697902
> 
> 赞同：1
> 
> 时间：2013-02-04T23:53:29.733
> 
> 标签：c#, .net, visual-studio, file, path

在从开发到最终用户分发的整个生命周期中，AC# 可执行文件可以驻留在 3 个不同的位置：

*   {项目目录}\bin\Debug
*   {项目目录}\bin\Release
*   {最终用户安装目录}

我的应用程序有一个网页和一些辅助文件，我喜欢将它们放在一个名为*\video*的子目录中，就在包含可执行文件的目录下方。我真正**不想**做的是在上面列出的 3 个目录之间复制子目录。换句话说，显然我不想最终得到：

*   {项目目录}\bin\Debug\video
*   {项目目录}\bin\Release\video
*   {最终用户安装目录}\video

每次*\video*中的文件更改时都会进行固有的重新复制。

将与应用程序一起分发的数据文件保存在集中目录中的方便总体策略是什么，该目录将在分发应用程序时添加到*安装* 程序中？我希望每次在 Visual Studio 2012 IDE 中运行应用程序时，我都不必添加*构建*任务来将数据文件复制到*\Debug*和*\Release*子目录。*如果我忘记在构建*任务期间复制文件，这会导致潜在的错误，并且如果有很多文件，尤其是大文件，则会造成混乱。

有没有办法构建可以方便地检测 3 个不同运行时上下文中的每一个的顶级数据路径？我不介意在将*相对*路径传递给另一个方法时，是否必须使用规范化数据路径的方法来包装所有*相对数据路径。*这是一个使用名为*fixRelPath()*的虚构方法的示例，该方法将在将相对路径传递给名为*openFile()*的示例方法之前正确扩展相对路径：

 ***```
openFile(fixRelPath(".\\video\\temp.html")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:57:35.630

您应该将文件放在 AppData 目录中。

每个用户：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData); 
```

共享：

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData); 
```***

# ruby-on-rails - 如何使用两个不同的 simple_form.rb 初始化文件？

> ID：14697905
> 
> 赞同：1
> 
> 时间：2013-02-04T23:53:52.307
> 
> 标签：ruby-on-rails, simple-form, spree

# 问题

这是一个简单的问题，我查看了 spree 论坛、plataforma tec 论坛等，但没有成功。

我们想使用两个单独的 simple_form 配置，一个用于我们的主应用程序，另一个用于我们安装在特定 url 上的 spree 引擎商店。

# 更详细的解释

目前，我们正在使用 spree 引擎开发应用程序。这意味着 spree 引擎安装在特定的 url 上，并通过访问 mysite.com/store 来激活，例如。

现在，在主应用程序上，我们使用的资产集与 spree 商店中的资产集不同。我们最初的 simple_form.rb 初始化器是专门为这些资产创建的。

这就是有趣的地方。

在 spree 引擎中，我们也在使用 simple_form 开发一个新表单。它工作正常，但它使用的是我们主应用程序的 simple_form.rb 文件，该文件使用主应用程序的 css 标签和标记。

我们需要修改 simple_form.rb 文件以实际使用 spree 模板的 css 以便正确显示。

# 可能的解决方案？

理想情况下，我们应该有一个用于 spree 引擎的 simple_form.rb 文件和一个用于主应用程序的文件，但我还没有想出一个直接的方法来做到这一点......

我的另一个想法是在 simple_form.rb 文件中设置某种条件，以便在我们在主应用程序上时加载一组选项，在狂欢商店中加载另一组选项......也许检查 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:35:19.257

好的，很明显，如何为 simple_form 进行单独的配置是很明显的。

一切都进入一个 simple_form.rb 初始化程序。唯一改变的是 config.wrapper。

```
SimpleForm.setup do |config|
  # Wrappers are used by the form builder to generate a
  # complete input. You can remove any component from the
  # wrapper, change the order or even add your own to the
  # stack. The options given below are used to wrap the
  # whole input.
  config.wrappers :default, :class => :input do |b|
    # config goes here
  end

  config.wrappers :special, :class => input do |b|
    # special config goes here
  end

  config.default_wrapper = :default
end 
```

然后在您的代码中，如果您想使用`:special`包装器，只需像这样写在您的输入中

```
f.input :name, :wrapper => :special 
```

你可以在这里找到更多信息

[自定义包装器](https://github.com/plataformatec/simple_form/wiki/Custom-Wrappers/)

# uitableview - iOS：使用 Interface Builder 创建带有嵌入式表格视图的选项卡栏应用程序

> ID：14697906
> 
> 赞同：0
> 
> 时间：2013-02-04T23:53:51.520
> 
> 标签：uitableview, ios6, uitabbarcontroller

我正在尝试做一些非常基本的事情。我想要一个标签栏应用程序，其中一些标签包含表格视图。我正在使用界面生成器。

我可以使用在开始 iPhone 6 开发中找到的代码从一个空应用程序开始创建一个标签栏应用程序。这很容易。我创建应用程序，创建一个空笔尖，然后将标签栏控制器拖到空笔尖中。设置连接、根控制器并从 App Delegate 加载 nib。工作正常。然后我可以创建更多笔尖并将每个笔尖分配给每个选项卡项。如果我为每个笔尖添加一个标签，那很好。

我可以创建一个表格视图应用程序。从一个视图应用程序开始，转到我的主笔尖，拖入一个表格视图，实现类中的方法，将所有内容连接起来，这很好。

但是当我将这两者结合起来时，它不起作用。具体来说，让标签应用程序正常工作。从其中一个视图（单独的笔尖）中，删除标签并添加一个表格视图。

我做的所有事情都和我在简单版本中做的一样。我剪切并粘贴代码。但是当我运行它时，我收到有关发送无效选择器的消息（numberOfRowsInSection）。

所以......显然我必须以不同的方式做。

评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:10:05.180

您需要实现 tableview 委托方法。有一些特定的方法可以驱动 tableview 的数据和委托。任何时候 tableview 加载你的应用程序都会寻找这些方法。其中之一是（numberOfRowsInSection）。确保您已经在 IB 中连接了您的委托和数据源（通过右键单击 tableview 并使用拖动命令选择 File's Owner）。然后你必须实现适当的方法来设置一个表视图。

这些方法可以在 Apple Doc 站点上找到，用于配置下面链接的 tableview：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# c# - 如何以编程方式使用 PIN 码登录 Windows

> ID：14697908
> 
> 赞同：5
> 
> 时间：2013-02-04T23:54:04.093
> 
> 标签：c#, windows, authentication, pinvoke, pin-code

在 Windows 8 中，为非域用户引入了一种新的身份验证方法：使用控制面板中设置的 PIN。

目前我们的应用程序支持使用预先保存的密码登录 Windows `LogonUserW()`，现在也需要支持 PIN。

我们如何从 .NET 应用程序直接或通过 P/Invoke 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:26:00.410

所以所有这些东西都是由`ICredentialProvider`界面的蜂巢控制的——对于 Windows 8，他们在`ICredentialProvider2`.

我不是这里的专家，但我确实挖掘了一些参考资料：

*   [http://msdn.microsoft.com/en-us/magazine/cc163489.aspx](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/bb776042(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776042(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/bb776029(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776029(v=vs.85).aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/hh706912(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706912(v=vs.85).aspx)

我的直觉说你可能会为 COM 接口（可能是`ICredentialProviderProvider`和`ICredentialProvider`接口）创建一个苗条的包装器，并以这种方式调用它们......但我主要是在这里猜测。

# objective-c - 带有自定义单元格的故事板 UITableview - 空数组错误

> ID：14697909
> 
> 赞同：1
> 
> 时间：2013-02-04T23:54:10.767
> 
> 标签：objective-c, xcode, uitableview, storyboard, afnetworking

我不断收到错误消息，说我的表数组为空。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    // Set navigation bar image
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header.png"]
                                                  forBarMetrics:UIBarMetricsDefault];

    spinnerActivity = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
    spinnerActivity.hidesWhenStopped = YES;
    spinnerBarButton = [[UIBarButtonItem alloc] initWithCustomView:spinnerActivity];
    self.navigationItem.rightBarButtonItem = spinnerBarButton;
    [spinnerActivity startAnimating];

    self.testString =       [[NSString alloc] init];
    self.testMutableArray = [[NSMutableArray alloc] init];
    self.myTableView =      [[UITableView alloc] init];

    [self.view addSubview:self.myTableView];

    [self getMoviesInformation];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload
{
    [self setMenuBarButtonItem:nil];
    [super viewDidUnload];
}

#pragma mark - Custom Methods
- (void)getMoviesInformation
{
    NSURL *url = [NSURL URLWithString:@"http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=6844abgw34rfjukyyvzbzggz&q=The+Man+With+The+Iron+Fists&page_limit=1"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.testMutableArray = [JSON objectForKey:@"movies"];
        NSLog(@"Return String: %@", self.testMutableArray);
        [self.myTableView reloadData];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];
}

#pragma mark - Tableview Methods
#pragma mark DataSource
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"movieTableCell";

    MovieTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[MovieTableCell alloc] initWithStyle:UITableViewCellStyleDefault
                                     reuseIdentifier:CellIdentifier];
    }
    NSDictionary *dict = [self.testMutableArray objectAtIndex:indexPath.row];
    NSLog(@"Dict: %@", dict);
    cell.titleLabel.text = @"test";
    NSLog(@"Cell TitleLabel: %@", cell.titleLabel.text);

    return cell;
}

#pragma mark Delegate
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 150;
} 
```

这是我遇到的错误消息：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]：空数组的索引 0 超出范围

知道为什么我的字典总是 nil 以及我应该在我的代码中调整什么以使其工作吗？我基本上将其设计为此处的示例：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:50:58.453

更改此行

```
self.testMutableArray = [JSON objectForKey:@"movies"]; 
```

类似于：

```
[self.testMutableArray addObject:(id)[JSON objectForKey:@"movies"]]; 
```

您没有将对象添加到数组中，基本上每次都将其清除并分配一些可能有效或无效的对象。如果您希望 cellForRowAtIndexPath 正常工作，您需要将对象连续添加到数组中。

哦，问题不在于你的字典是零。这是你试图抓住你的数组的一部分，它不存在/没有分配给它的东西并将它分配给你的字典。检查您的数组计数`testMutableArray.count`以查看其中实际有多少对象。

# sql-server - 数据库邮件性能

> ID：14697910
> 
> 赞同：-3
> 
> 时间：2013-02-04T23:54:12.480
> 
> 标签：sql-server, database-mail

SQL Server 数据库邮件提供了很好的内置功能，如日志记录。我想用它来发送大量的电子邮件（数百万+）非常快（几百万/小时）。

数据库邮件是为这种用途而设计的吗？我能否通过该解决方案达到我在生产中所需的性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T00:39:18.747

不它不是。投资一些 listserv 软件或通过像[Message Systems](http://www.messagesystems.com/)这样的信誉良好的服务提供商。

顺便说一句，每小时需要数百万封电子邮件的合法目的是什么？

# c# - SQL Server 2012 错误 26

> ID：14697913
> 
> 赞同：-1
> 
> 时间：2013-02-04T23:54:30.577
> 
> 标签：c#, sql, sql-server-2012-express

我下载了 SQL Server 2012 Express。使用[http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/)。我创建了一个本地数据库。现在，当我尝试使用 Visual Studio 2010 连接到该数据库时，它会抛出错误 26

这是我的代码：

```
using(SqlConnection connectionString = new SqlConnection(@"Server=(localdb)\SQLEXPRESS;database=master;Trusted_Connection=True;")                          
{
    connectionString.Open(); //error 26
    sql = "insert into Main ([Cable Length1], [Cable Length2]) values(@3',@5')";

    using (SqlCommand cmd = new SqlCommand(sql, connectionString))
    {
        cmd.Parameters.AddWithValue("@3'", 1);
        cmd.Parameters.AddWithValue("@5'", 2);
        cmd.ExecuteNonQuery();
              }
} 
```

另外，我可以通过 SQL Server Management Studio 2012 登录。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:26:15.673

忽略所有其他问题¹，您应该决定是否使用 SQL Server LocalDB。我非常怀疑您是否创建了一个名为`SQLEXPRESS`.

您可能想要以下内容：

```
new SqlConnection(@"Server=(localdb)\v11.0;Trusted_Connection=True;") 
```

或者

```
new SqlConnection(@"Server=.\SQLEXPRESS;Trusted_Connection=True;") 
```

¹如下：

*   你`SqlConnection`叫`connectionString`.
*   名称中带有引号的参数。
*   使用`master`然后尝试插入名为`Main`. 系统数据库用于系统。你不是系统。

我希望看到以下内容：

```
using (var connection = new SqlConnection(@"Server=(localdb)\v11.0;Database=MyDatabaseName;Integrated Security=true;")
{
    connection.Open();

    using (var command = connection.CreateCommand())
    {
            command.CommandText = "INSERT INTO [Main] ([Cable Length1], [Cable Length2]) VALUES(@3, @5)";

            command.Parameters.AddWithValue("@3", 1);
            command.Parameters.AddWithValue("@5", 2);

            command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:44:24.987

我得到了解决方案：确保您已连接到数据库，并且当您在服务器名称下启动 sql management studio 时-->选择浏览更多-->选择数据库引擎，然后选择您的本地数据库。您应该看到绿色图标，然后您就可以连接了。谢谢你们的帮助！

# javascript - Chome 中的 HTML5 视频，SECURITY_ERR：DOM 异常 18

> ID：14697919
> 
> 赞同：0
> 
> 时间：2013-02-04T23:55:04.000
> 
> 标签：javascript, google-chrome, canvas, cross-domain

我正在尝试让我的网页显示来自我的视频服务器的视频。视频服务器与我的网络服务器在同一主机上运行，​​但在不同的端口上。

当我用来`canvas.toDataURL()`从画布上播放的视频上刮下像素时，我`Uncaught Error: SECURITY_ERR: DOM Exception 18`在浏览器上得到一个“”。我正在使用 Chrome，版本 24。

这是随视频页面发送的 HTTP 标头

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Content-Type: video/x-mp4
Transfer-Encoding: chunked
Date: Mon, 04 Feb 2013 23:28:00 GMT
Server: OizysLight 
```

我错过了什么？“Access-Control-Allow-Origin: *”不应该允许跨源资源共享吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:21:27.000

您可能需要在元素上设置[`crossOrigin`属性。](https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes)如果对视频资源的请求不需要 cookie 或 HTTP 身份验证，则`<video>`可以将其设置为。`anonymous``use-credentials`

Mozilla 在 上有一篇关于[跨域图像](https://developer.mozilla.org/en-US/docs/HTML/CORS_Enabled_Image)的文章`<canvas>`，几乎所有文章都适用于视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:31:18.343

我找到了答案。我需要在我的视频上设置 crossOrigin 属性。

`video.crossOrigin = "Anonymous";`

# excel - VBA绘制动态范围

> ID：14697923
> 
> 赞同：0
> 
> 时间：2013-02-04T23:55:33.213
> 
> 标签：excel, vba, plot

我有一个 excel 2010 启用宏的工作簿。工作簿有几张纸。第一张表有一个宏分配按钮，用于导入 csv 文件。csv 文件加载到名为“Data”的现有工作表中。导入的 csv 文件加载到第 1 行作为下面数据的标题的列中。例如，A1 被命名为“时间”，单元格 A2 向下是时间数据。单元格 B1 被命名为“温度”，单元格 B2 向下是与每次读数相关的温度数据。该工作簿在名为“温度图”的工作簿中有第三个现有工作表。我想通过引用“数据”表中的值自动在此表上绘制温度与时间的关系图。（时间是 x 轴，温度是 y 轴）

问题是加载到“数据”表中的导入 csv 文件每次都会有不同的行数。有时导入的 csv 文件可能有 25 行数据，有时可能有 100,000 行数据。假设我导入了一个包含 1000 行数据的 csv，工作簿还绘制了空白单元格，因为我的图表已预先设置为捕获整个列。结果，图表数据被挤压到左侧。如果我预先将要绘制的行数设置为 1000，那么下一个导入的超过 1000 行的 csv 文件将不会绘制超过 1000 行。

我尝试使用#NA 公式渲染单元格以避免绘制空单元格，但此解决方案会创建一个庞大的文件。

有没有办法创建一个生成数据折线图的宏：

y 轴 =（B2 到最后一个带有数字的 B 单元格）与 x 轴 =（A2 到最后一个带有数字的 A 单元格）

这样每次打开工作簿并导入新的 csv 文件（无论有多少行）时，图表都会绘制带有数字的单元格而不绘制空白单元格？

任何帮助将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:58:59.477

通过使用动态范围，您可以创建一个命名范围，该范围根据您拥有的数据量进行扩展和收缩。您将创建两个命名范围，一个用于 x，一个用于 y，然后绘制范围。现在不在 PC 中，但这将通过 offset 命令完成（动态范围）。

# php - PHP 变量没有被正确设置/声明/调用？

> ID：14697925
> 
> 赞同：1
> 
> 时间：2013-02-04T23:55:49.757
> 
> 标签：php, variables

我有一部分 PHP 脚本对我来说很奇怪。下面的循环从数组中获取最大值`builds`——这是一堆随机顺序的整数。它按预期获得了最高值，那里没有问题。

```
$highest = $builds[0];
    for ($i=0; $i < count($builds); $i++) {
        if ($builds[$i] > $highest) {
            $highest = $builds[$i];
    }
} 
```

问题是当我尝试`$highest`在循环之后使用时。（`file_get_html`是 simple_html_dom 库的一部分 - 我在脚本的其他部分使用它很好 - 这不是问题。）

```
$html = file_get_html("http://www.blah.com/builds/" . $highest);
//timeout msg on browser 
```

这最终会超时。Chrome 返回“错误 101：连接已重置”。Firefox 以类似的方式返回，“在加载页面时重置了与服务器的连接。”

我玩了一点，我能说的最好的`$highest`就是没有以某种方式正确设置或调用。

如果我手动分配变量，则`file_get_html`可以正常工作并按预期返回数据。IE 如果我让我的脚本看起来像这样。

```
$highest = $builds[0];
    for ($i=0; $i < count($builds); $i++) {
        if ($builds[$i] > $highest) {
            $highest = $builds[$i];
    }
}

$highest = 20;  //I understand the loop is useless because of this
                //but I've been running it to make sure it's not the issue.

$html = file_get_html("http://www.blah.com/builds/" . $highest);
//now this returns data 
```

为什么手动分配变量有效，但在循环中设置却无效？我一直在努力确保变量设置正确，而且看起来是这样`prints`。`var_dumps`脑子里糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:36:03.583

由于 php [max()](http://php.net/max)函数可以采用数组，因此更简单的版本是

```
$highest=max($builds);
$html = file_get_html("http://www.blah.com/builds/" . $highest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:11:33.437

对此进行测试，一切似乎都有效。

```
$builds = array(10, 5, 6, 9, 22, 54, 33, 72, 9);
$highest = $builds[0];
for ($i=0; $i < count($builds); $i++) {
    if ($builds[$i] > $highest) {
    $highest = $builds[$i];
    }
}

echo $highest; 
```

回显 $highest 输出 72，这是数组中的最高数字。$builds 是什么类型的数组，$builds 数组的 var_dump 是什么？

# java - Java将字符串转换为日期然后比较

> ID：14697927
> 
> 赞同：2
> 
> 时间：2013-02-04T23:56:07.627
> 
> 标签：java, date, datetime, comparison

我有一个二维字符串数组

```
static String[][] TaskStorage = {
{"Task 1","02/07/13"},  
{"Task 2","02/08/13"},  
{"Task 3","02/09/13"},  
{"Task 4","02/10/13"},  
{"Task 5","02/11/13"},  
{"Task 6","02/03/13"},  
{"Task 7","02/04/13"},  
{"Task 8","02/05/13"},  
{"Task 9","02/06/13"},  
{"Task 10","03/01/13"}, 
{"Task 11","03/02/13"}, 
{"Task 12","03/03/13"}, 
}; 
```

我想打印所有 TaskStorage[0][i]，其中 TaskStorage[i][1] 是 02/07 和 02/08。考虑到今天的日期是 02/04。今天日期可以更改为 02/28。todayDate 将基于代码的执行时间。
基本上是提前两天打印的任务。

这是我尝试过的：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("mm/dd/yy");
TaskDate = dateFormat.parse(LinkStorage[i][1]);
if (todayDate.after(TaskDate)) {
    System.out.println("");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:04:34.153

一种方法是使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将字符串解析为`Date`对象，然后通过`Date`API 进行比较。

**编辑以更改问题：**

> 以下是我尝试过的。
> 
> ```
> SimpleDateFormat dateFormat = new SimpleDateFormat("mm/dd/yy");  
> TaskDate = dateFormat.parse(LinkStorage[i][1]);  
> if (todayDate.after(TaskDate)) {  
>     System.out.println("")  
> } 
> ```
> 
> 不幸的是没有得到想要的输出

问题在于您的格式字符串，您要求的是**Minutes**而不是**Months**。换成你`"mm/dd/yy"`应该`"MM/dd/yy"`有更好的运气。

# javascript - 通过Javascript不使用JQuery库的IE 9设置样式属性

> ID：14697929
> 
> 赞同：0
> 
> 时间：2013-02-04T23:56:15.350
> 
> 标签：javascript, internet-explorer-9

我正在尝试更改 gridview 页脚样式的样式，因为基于 IE9 中的三个条件更改了聚合页脚对齐方式，但它只是不断向我抛出未定义的错误，我的问题是如何更改样式任何帮助表示赞赏：

```
.rgFooter, .rgFooterDiv
    {
        background: none !important;
        background-color: transparent !important;
        width: 100% !important;
        /*max-width:779px;*/
    } 
```

到：

```
.rgFooter, .rgFooterDiv
    {
        background: none !important;
        background-color: transparent !important;
        width: 100% auto!important;
} 
```

只使用 javascript 没有 JQuery。到目前为止我尝试过：

```
var mydiv = document.getElementById("mygrid").className;
mydiv.setAttribute("style", "width: 100% auto !important;  background: none !important; background-color: transparent !important;"); 
```

# 感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:01:48.930

如果你不能使用 jQuery，也许你应该使用它的`addClass`and`removeClass`函数。您可以在这里看到它们用纯 JavaScript 重写：[https ://stackoverflow.com/a/14105067/1026459](https://stackoverflow.com/a/14105067/1026459)

您的调用`setAttribute`不起作用的原因是您所做的引用是对元素类的字符串的引用。

```
var mydiv = document.getElementById("mygrid").className; 
```

也许您应该像这样访问 div ：

```
var mydiv = document.getElementById("mygrid"); 
```

然后您将可以访问`setAttribute`. 要简单地从 div 中删除所有类，您可以随时使用

```
mydiv.removeAttribute("class"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:04:31.757

内联样式无需使用“！important”。如果你想使用 javascript 设置内联样式而不使用任何库，我会推荐这样的东西：

```
var mydiv = document.getElementById("mygrid");
mydiv.style.width = "100% auto";
mydiv.style.background = "none";
mydiv.style.backgroundColor = "transparent"; 
```

我猜你的代码有问题

```
var mydiv = document.getElementById("mygrid").className; // mydiv variable is a string
mydiv.setAttribute(...); // Why would a string have "setAttribute" function? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:01:53.747

该`className`属性返回一个字符串，而不是您可以用来访问该元素的对象。只需删除它：

```
var mydiv = document.getElementById("mygrid"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T00:01:58.327

首先，您不想访问元素的“className”属性；你只需要元素。

```
var mydiv = document.getElementById("mygrid"); 
```

然后，您应该设置样式对象的各个属性：

```
mydiv.style.width = '100%';
mydiv.style.backgroundColor = 'transparent'; 
```

等等。如果你想摆脱所有类，你可以这样做：

```
mydiv.className = ''; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T00:08:56.523

添加了另一个CSS：

```
.rgmine
    {
        background: none !important;
        background-color: transparent !important;
        width: auto !important;       
    } 
```

然后根据第三个条件更改类名：

```
<script type="text/javascript">
    function pageLoad() {                
            document.getElementById('ctl00_Body_rgWMTSI_GridFooter').className = 'rgmine'}

</script> 
```

# php - 将数据插入在线数据库

> ID：14697934
> 
> 赞同：0
> 
> 时间：2013-02-04T23:56:33.480
> 
> 标签：php, mysql, objective-c, sql, ipad

我正在尝试向 MySQL DB 插入一些值，通过 iPad 应用程序在线访问它。

发送数据：

```
if(txtInput != nil){
        NSString *postVars = [NSString stringWithFormat:@"id=%d&input=%@", index, txtInput.text];
        NSLog(@"%d",index);
        index++;
        NSData *data = [postVars dataUsingEncoding:NSUTF8StringEncoding];

        NSString *strURL = @"http://localhost:8888/Insert.php";
        NSURL *url = [NSURL URLWithString:strURL];
        NSMutableURLRequest *req = [[NSMutableURLRequest alloc]initWithURL:url];
        [req setHTTPBody:data];
        [req setHTTPMethod:@"POST"];
        NSURLConnection *con = [NSURLConnection connectionWithRequest:req delegate:self];
    } 
```

Web 服务的脚本：

```
<?php
$host = 'localhost';
$username = 'root';
$password = 'root';

$con = mysql_connect($host, $username, $password);
if(!$con)
{
echo "Failed connection";
echo "<br/>";
die('Connection failed');
}

mysql_select_db("unbounded", $con);

$ids = $_GET['id'];
$str = $_GET['input'];

$in= mysql_query("INSERT INTO `unbounded`.`stuff` (`id`, `string`) VALUES ('$ids','$str');");
echo $in;
echo "<br/>";
mysql_close($con);
?> 
```

一旦我在 PHPAdmin 页面运行我的应用程序，我可以看到每次执行应用程序时 id 值已设置为 0，而字符串值为空。

如果我通过浏览器运行脚本来插入数据就好了。顺便说一句，一旦我执行脚本 vi 浏览器，我发现与 DB 的连接已经建立良好。. 可能是什么问题？最好的毕业生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:09:39.663

在您的 iOS 应用程序中，您使用 POST 方法发送数据

```
[req setHTTPMethod:@"POST"]; 
```

但是在 PHP 中，您正在从 GET 中读取

```
$ids = $_GET['id']; 
```

如果两者都使用相同的 HTTP 方法，它应该可以工作

与您的问题无关，但您的 PHP 代码容易受到*SQL 注入*攻击。

# ios - Xcode 重复复制捆绑资源

> ID：14697942
> 
> 赞同：3
> 
> 时间：2013-02-04T23:57:13.377
> 
> 标签：ios, xcode

我有一个关于 Xcode 和捆绑资源副本的问题。

我目前正在从事一个拥有大型资产库的项目。因此，全新安装或捆绑资源的更改需要“新”捆绑资源的副本。

但是，我目前面临的问题是每次构建应用程序时 Xcode 都会复制我的整个资产库的一部分。这种行为非常奇怪，因为在我工作过的所有项目中，Xcode 仅在资源发生更改时复制资源，或者如果它是全新安装，或者如果有以前没有复制过的新内容。

然而，在这种情况下，它复制了全新安装的所有资源（预期）。但是，在每次连续构建时，它仍然会复制一些文件。现在这很奇怪，因为没有任何文件发生变化，而且它没有复制所有文件，只复制了其中的一小部分。还有一件事 - 如果我在模拟器上运行相同的应用程序，并使用相同的配置，则不会发生复制（莫名的奇怪）。

是否有一些我可以更改的设置，或者我可以包含一个可能会阻止这种情况发生的标志？

在此先感谢您的帮助！

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:56:16.843

自从提出这个问题以来已经一个月了，我设法找到了一种“解决方法”的解决方案。

现在，我将其作为已接受的答案的原因主要是因为在撰写本文时尚未发布其他答案/解决方案。如果发布了更好的答案（或者如果我有更新），我一定会将更好的答案标记为已接受的答案。

无论哪种方式，如果您拥有一组不会在连续构建中发生变化的超大型资产，则此“解决方法”将起作用。

我正在处理的项目有很多已经准备好的音频和视频文件，并且不会改变（除了偶尔的重新录制或类似的东西）。

因此，正如我的问题所述，Xcode 正在复制资源的子集。理想情况下，一旦资源被复制（并且没有对其进行更改），它就不会在连续构建中重新复制（至少不应该被重新复制）。就我而言，它在每次连续运行期间都会被复制，导致我的总构建开始时间约为 15 ~ 20 分钟。我还想指出，无论我们是否在构建阶段使用“运行脚本”，或者我们的 Xcode 项目中是否有媒体，我们都面临着同样的问题。

解决方案：我所做的是清理我的项目，删除应用程序，然后重新安装。因此，第一次，它使用应用程序复制所有文件。此外，资产目录**不在**我的 Xcode 项目中。我们添加了一个“运行脚本”阶段，其中我们运行**rsync**以在每次构建期间将媒体从媒体文件夹复制到应用程序。

现在，一旦应用程序完成了全新的构建；它会复制所有需要的媒体文件。

然后，删除/禁用脚本，在 Xcode 中执行清理（command + shift + K）并再次运行项目。这一次，由于没有运行脚本，并且由于 Xcode 已经执行了清理，现在它认为它需要做的就是重新编译二进制文件，它的构建速度非常快。由于我**没有**删除应用程序，媒体文件夹仍在我的应用程序中，我的构建开始时间现在大约是 30 秒 ~ 1 分钟（这包括沙盒和代码签名）。对应用程序进行代码签名和“沙盒化”仍然需要时间，但这比每次运行时都必须等待 15 到 20 分钟要好得多。:)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T16:43:08.610

我有非常相似的情况。此外，我的应用程序中有 6 000 个资源，甚至列出其中的一些（不是复制）有点慢。我找到了另一种解决方法（与您的非常相似，但执行起来有点容易）。它受到了您的启发，非常感谢您！

我复制了项目的目标，将其捆绑 ID 设置为原始 ID（它是使用构建设置中的 ${PRODUCT_NAME} 自动设置的）并从复制捆绑资源部分中删除了所有资源。第一次（从设备应用程序中删除后）我需要使用其资源启动原始目标，但随后我可以在资源仍在设备上时构建复制的目标。

一些优点：

*   在两个目标之间切换非常容易
*   不需要两个写任何脚本（那是我没有使用你的解决方案的目的）

有趣的数字：

*   从“Cmd+R”到出现捆绑资源的加载屏幕需要 58 秒。
*   相同的时间间隔为 20 秒，“复制捆绑资源”部分为空。不如您的改进，但仍然有所作为。

希望这也有帮助:)

# css - CSS box-sizing 与表单高度混淆

> ID：14697951
> 
> 赞同：6
> 
> 时间：2013-02-04T23:58:07.857
> 
> 标签：css

我前段时间上传了这个问题，但它最终给了我风滚草徽章，所以我再试一次。

我现在正在浏览 Michael Hartl 的 railstutorial，我遇到了一个问题，即 box-sizing 属性会干扰表单高度，如下图所示。

```
@mixin box_sizing {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  height: auto;
  margin-bottom: 15px;
  @include box_sizing; <--- this line here is causing issues
} 
```

![有效的盒子尺寸](../Images/6535659e5f5b08c116baa88dadf8349c.png)

（有效的 box-sizing 属性）

![box-sizing 无效](../Images/7e83881ff93034dcd26a87328ef8a66e.png)

（box-sizing 属性无效）

请注意，当 box-sizing 属性生效时，表单会变小多少？您无法真正查看完整的字母，因为高度太低了。我试图改变输入，textarea，..等下的高度属性。但似乎我的代码被 Bootstrap 覆盖了。如果您知道如何使表格更大（更高的高度），我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T00:11:26.253

`box-sizing: border-box`更改盒子模型，以便从高度中取出填充，而不是添加到其中。

所以这个块：

```
div {
  box-sizing: content-box; // default
  height: 2em;
  padding: .25em;
} 
```

会`2.5em`很高，而且这个街区：

```
div {
  box-sizing: border-box;
  height: 2em;
  padding: .25em;
} 
```

将`2em`很高，`.5em`间距为填充。

另一个问题是 bootstrap 如何定义输入的高度：

```
input[type="text"], ...other selectors..,
.uneditable-input {
  display: inline-block;
  height: 20px;
  ...
} 
```

定义高度不起作用的原因是因为`input[type="text"]`它比 更具体`input`，因此引导程序声明覆盖了您的声明。

要解决您在输入方面遇到的问题，请定义一个高度并使用更具体的选择器：

```
input[type="text"], textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  height: 2em;
  margin-bottom: 15px;
  @include box_sizing;
} 
```

[演示](http://jsfiddle.net/X5d4q/)

# php - 数组搜索和显示

> ID：14697952
> 
> 赞同：0
> 
> 时间：2013-02-04T23:58:10.797
> 
> 标签：php, arrays, search

我有一个函数可以搜索一系列蔬菜品种以查看它是否与 ID 匹配：

```
// my function
function findVariety($array, $key, $value)
{
    $results = array();

    if (is_array($array))
    {
        if (isset($array[$key]) && $array[$key] == $value)
            $results[] = $array;

        foreach ($array as $subarray)
            $results = array_merge($results, findVariety($subarray, $key, $value));
    }
    return $results;
}
// function call
$picks = findVariety($veg,id,$sf->spring_choice); 
```

成功时，它会返回如下内容：

```
// returned from print_r($picks);
Array ( [0] => Array ( [id] => 2 [variety] => Royal Burgundy (bush) ) ) 
```

我所缺少的只是如何将多样性添加到我发送到我的页面的回声中，例如：

```
echo '<td height="90px">'.$picks['variety'] .'<br /><a href="#" onclick="fill_square('.$a.','.$b.','.$box->id.','.$ID.');">add plants</a></td>'; 
```

到目前为止，我一直坚持这最后一步！任何帮助都会很棒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:01:58.657

您返回的数组是嵌套的，因此要访问您需要执行此操作的品种：

```
echo $picks[0]['variety'] 
```

# javascript - 如何检查传递给 JavaScript 函数的值是否已定义或其长度 >=0？

> ID：14697958
> 
> 赞同：4
> 
> 时间：2013-02-04T23:59:39.867
> 
> 标签：javascript, jquery

我有以下 javascript 代码：

```
function changeButtonState(targetSelector, action, iconClass) {
    var $target = $(targetSelector);
    var $targetSpan = $(targetSelector + ' span');
    $targetSpan.removeClass('sprite-blank').addClass(iconClass);
} 
```

我怎样才能使它`$targetSpan.removeClass(..).addClass`只有`iconClass`在调用函数时具有值时才起作用。我想我感到困惑的是我是否检查它是否已定义或者我是否检查它的长度是否为 0 或更多？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:02:07.880

只需使用 if 语句：

```
if (iconClass){} 
```

或者，`typeof`：

```
if (typeof iconClass != 'undefined') {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:01:55.353

```
if (typeof(iconClass)=='undefined') {
  // nothing was passed
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T00:03:41.953

`**[LIVE DEMO](http://jsbin.com/icukum/1/edit)**`

```
if ( 'undefined' != typeof iconClass ) {  /**/  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T00:12:29.540

您的用例必须假设 iconClass 是一个字符串。在这种情况下，我会建议第一个 if 条件。第二个可能太严格了，它通常只在调用函数的人实际上没有传递第三个参数或传递未定义的情况下使用。但是如果调用者传递 null 或空字符串，第一个 if 条件也会捕获这些条件。它是最容易编写的，并且在 Javascript 中很常见，只需简单检查即可`if (variable) { }`，因为它会捕获更多内容并且非常易于阅读和编写。

```
if (iconClass) {
   // Executes if iconClass is not null, not undefined, not 0, and not empty string
}
if (typeof iconClass != 'undefined') {
   // WILL execute if iconClass is null, 0, empty string
   // Only will not execute if iconClass is undefined!
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T01:02:58.977

据推测，`iconClass`应该是一个字符串（一个类名），所以你应该测试它是否是一个字符串：

```
if (typeof iconClass == 'string') 
```

或者您可以使用正则表达式同时测试它是否是有效的类名：

```
if (/^[a-z][a-z0-9]*$/i.test(iconClass)) 
```

正则表达式可能需要更多字符来测试（至少连字符），我将把它留给你。[CSS 类名中哪些字符有效](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)？可能会有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-05T00:01:32.377

```
if(iconClass.length > 0){
    $targetSpan.removeClass('sprite-blank').addClass(iconClass);
} 
```

# c++ - 特定接口上的 TCP/IP 连接

> ID：14697963
> 
> 赞同：12
> 
> 时间：2013-02-05T00:00:01.883
> 
> 标签：c++, winsock

我想使用两条网络路由之一连接到服务器。如何做到这一点？我用谷歌搜索了很多，常见的答案是摆弄路由表，但这无济于事，因为目的地只有一个 IP 地址。大多数示例都具有具有单个网卡的客户端和具有多个 NIC 的服务器，但在这种情况下情况正好相反。

ForceBindIP 应用程序似乎能够提供这种类型的功能，所以我想它一定是可能的。

```
 +----->-------+
192.168.1.3  |      B      |          192.168.1.4
      +--------+      +--------+      +--------+
      | Client |      | Switch |-->---| Server |
      +--------+      +--------+      +--------+
192.168.1.2  |      A      |
             +----->-------+ 
```

我很可能会使用 C++ 和winsock 来做到这一点。我需要能够随意打开给定路由上的连接（即不能静态绑定到特定路由）。我将使用普通的 TCP/IP。

编辑：Windows 7 客户端

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T01:11:31.113

使用该[`bind()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550.aspx)函数将套接字绑定到调用、`192.168.1.3`或. 这告诉套接字将哪个特定接口用于传出连接。例如：`192.168.1.2``connect()``ConnectEx()``WSAConnect()`

```
SOCKET s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

sockaddr_in localaddr = {0};
localaddr.sin_family = AF_INET;
localaddr.sin_addr.s_addr = inet_addr("192.168.1.3");
bind(s, (sockaddr*)&localaddr, sizeof(localaddr));

sockaddr_in remoteaddr = {0};
remoteaddr.sin_family = AF_INET;
remoteaddr.sin_addr.s_addr = inet_addr("192.168.1.4");
remoteaddr.sin_port = 12345; // whatever the server is listening on
connect(s, (sockaddr*)&remoteaddr, sizeof(remoteaddr)); 
```

或者：

```
addrinfo localhints = {0};
localhints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
localhints.ai_family = AF_INET;
localhints.ai_socktype = SOCK_STREAM;
localhints.ai_protocol = IPPROTO_TCP;

addrinfo *localaddr = NULL;
getaddrinfo("192.168.1.3", "0", &localhints, &localaddr);
bind(s, localaddr->ai_addr, localaddr->ai_addrlen);
freeaddrinfo(localaddr);

addrinfo remotehints = {0};
remotehints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;
remotehints.ai_family = AF_INET;
remotehints.ai_socktype = SOCK_STREAM;
remotehints.ai_protocol = IPPROTO_TCP;

addrinfo *remoteaddr = NULL;
getaddrinfo("192.168.1.4", "12345", &remotehints, &remoteaddr);
connect(s, remoteaddr->ai_addr, remoteaddr->ai_addrlen);
freeaddrinfo(remoteaddr); 
```

# url - 产品的不同链接对seo有利还是有害？

> ID：14697968
> 
> 赞同：3
> 
> 时间：2013-02-05T00:00:32.837
> 
> 标签：url, seo, hyperlink, opencart

Opencart 为产品生成不同的链接，例如：

```
website.com/product_name
website.com/category/product_name
website.com/category/subcategory/product_name
website.com/brand/product_name
etc. 
```

它基于您访问产品的列表页面。我的问题是，对产品/内容使用不同的链接对 seo 有利还是有害？如果它是有害的或不必要的，我会将其设为一个链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:39:22.947

我个人认为这对 SEO 不利。从谷歌的说法来看，这真的无关紧要，因为它只是忽略了重复的内容，而不是像一些人建议的那样受到惩罚——而且每个产品页面都有谷歌将再次使用的规范 URL。但是，如果您正在寻找使您的 URL 更加一致的东西，我有[一个扩展](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5023)（商业），它确实使它们在整个网站上都统一（并且也使页面的面包屑也一样）

# string - 替代 CONTAINS 方法？

> ID：14697971
> 
> 赞同：0
> 
> 时间：2013-02-05T00:01:01.143
> 
> 标签：string, contains, anonymous-types

使用逗号分隔的“服务器类型”给出下面的字符串：

string serverTypeList = "DB, IIS, CMDB";

//server.Type 下面循环中的值应该是“MDB”

我的问题是，在这种情况下它将返回 TRUE，因为“MDB”字符串在 serverTypeList 内。只有当它匹配“MDB”类型而不是“CMDB”时，我才需要它返回 TRUE：

...

```
from site in SiteManager.Sites
from server in site.Servers
where
  serverTypeList.Contains(server.Type)
select new Server()
{ ID=server.ID, SiteName=site.Name } 
```

...

如何更改上面的代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:27:35.450

```
(", " + serverTypeList + ", ").Contains(", " + server.Type + ", ") 
```

是处理此问题的一种标准方法。我不清楚您使用的语言，所以我不知道您需要的确切语法，但一般的想法是通过在列表字符串之前和之后强制分隔符来确保该术语出现在分隔符之间。

# rally - Rally 2 SDK 和 Confluence 集成

> ID：14697972
> 
> 赞同：1
> 
> 时间：2013-02-05T00:01:32.243
> 
> 标签：rally, confluence

将集会应用程序嵌入到 Confluence 文档中的最佳方式是什么？

我尝试在 {html} 宏之间粘贴我的代码，但它不起作用

```
{html}

<!DOCTYPE html>
<html>
<head>
<title>Grid Example</title>

<script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p4/sdk.js"></script>

<script type="text/javascript">
    Rally.onReady(function() {
        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
                ...
                ...
            }
        });
    Rally.launchApp('CustomApp', {
            name: 'Grid Example'
        });
    });
</script>
<style type="text/css">
</style>
</head>
<body></body>
</html>

{html} 
```

上面的代码直接打开时工作正常，但粘贴到 confluence 的 {html} 宏中时不显示任何内容。（我在另一个标签中登录了集会）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:54:00.730

一种解决方法是在服务器上托管 html 页面并将其包含在汇合中的 {iframe} 宏中。但是，某些浏览器可能存在跨域相关的安全问题。

最后我决定不在我的汇合页面中呈现内容。我只是在服务器上托管了 html 页面，并在我的 confluence 页面中添加了指向它的链接。

# iphone - 合适的行单元格标题中的文本在 iOS 应用程序中呈现不佳

> ID：14697974
> 
> 赞同：2
> 
> 时间：2013-02-05T00:01:34.937
> 
> 标签：iphone, ios, objective-c, uitableview

我在表格行单元格标题中有一些文本呈现不佳。我增加了字体大小，以便更好地看到它。此外，字体的质量会随着表格的滚动而变化。

该字体已添加到项目中，并且可以在应用程序的其他地方正常工作。就是这个tableview。

这发生在 iPad 2 上。3GS 设备看起来不错。

有谁知道为什么会发生这种情况？

这是我添加它的代码：

```
cell.titleLabel.text = [item objectForKey:@"title"];
[cell.titleLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 15.0f]]; 
```

这是一个屏幕截图。

![在此处输入图像描述](../Images/0fce8aeb93dcbb0e5eecb7da77c1b5fc.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:33:44.083

将您的代码从

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

至

`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`

[有关此 SO question](https://stackoverflow.com/questions/1890265/what-is-uitableviewdelegate-willdisplaycellforrowatindexpath-for)的更多信息/讨论。

# html - 如果有多个 HTML 元素，则 HTML 元素的有趣“问题”

> ID：14697985
> 
> 赞同：-3
> 
> 时间：2013-02-05T00:02:02.440
> 
> 标签：html, css, browser

有人可以向我解释以下内容吗？

在以下代码中，Firefox、Chrome 和 Opera 中的**所有**文本都是红色的。（[代码](http://codepen.io/anon/pen/nzGfI)）

```
<html>
    <head><title>HTML TEST</title></head>
    <body>
        Test One
        <html style="color:red">Test Two</html>
    </body>
</html> 
```

现在我知道实际上你不应该`html`在 body 标签内添加元素，但是是什么让浏览器改变了文本的颜色`body`而不是第二个`html`？

如果我添加`style=blue`到第**一个** `html`，那么**所有**文本都是蓝色的。

重申一下 - 我知道这不是一个实际问题，我只是想知道是什么让浏览器以这种方式运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:42:53.210

使用 firebug for firefox 或在 chrome 中按 f12 以查看浏览器如何解释代码。在 Firefox 和 Chrome 中，您都会看到只有一个`<html>`标签。有趣的是，与@Ragarokkr 的答案样式相比，外部标签优先于内部标签：

[例子](http://codepen.io/anon/pen/bxzvs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:56:43.280

从做进一步的测试；

如果没有`style`与根级别关联的属性，则将删除`html`任何前面的`html`元素并将它们的样式添加到根级别`html`元素。

一旦有与根级别`html`元素关联的样式属性，则样式更改将无关紧要。

例如，在我的链接代码中，将第一个`html`元素更改为`style=""`后面的元素，文字将是黑色的。

这是一个有趣的属性。

# c# - 恢复队列成员

> ID：14697987
> 
> 赞同：-3
> 
> 时间：2013-02-05T00:02:08.227
> 
> 标签：c#

大家好，我有这样的循环：

```
for (int i = 0; i < 5; i++)
{
    lock (locker)
    {
        if (passwords.Count == 0)
        {
            proxy_loop = false;
            break;
        }
        else
        {
            password = passwords.Dequeu();
            j++;
        }
    }
} 
```

当循环结束时，我必须恢复密码队列的内容（那是在开头）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:15:07.050

```
 Queue backup = (Queue) passwords.Clone();
        for (int i = 0; i < 5; 6++)
        {
            lock (locker)
            {
                if (passwords.Count == 0)
                {
                    proxy_loop = false;
                    break;
                }
                else
                {
                    string password = (string) passwords.Dequeue();

                    j++;
                }
            }
        }
        passwords = backup; 
```

# ios - UISearchBar 关闭方法

> ID：14697989
> 
> 赞同：0
> 
> 时间：2013-02-05T00:02:37.100
> 
> 标签：ios, uisearchbar, uisearchbardelegate

对于带有 UISearchDisplayController 的 UISearchBar，当单击搜索字段时，会出现键盘并在 tableview 上显示一个叠加层。单击取消时

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar 
```

叫做。

我想知道单击叠加层时是否调用了一个方法。它确实关闭了键盘并返回到 tableview。基本上我想让单击此叠加层运行与单击取消时相同的方法。有任何想法吗？我检查了 Apple Docs，除了取消按钮方法之外找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:13:26.600

1.  [您可以继承 UISearchDisplayController 并从touchesBegan 方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)调用此取消方法：

    ```
    - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
    ```

2.  您可以将[UITapGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)分配给 overlayView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:09:12.820

*取消：只是 [self.searchDisplayController setActive:NO]; 并在 touchesBegan 中实现它，就像 ToMfromTO 的答案一样。

# jquery - jquery show div不会停止动画

> ID：14697990
> 
> 赞同：1
> 
> 时间：2013-02-05T00:02:40.137
> 
> 标签：jquery, hide, show, slidetoggle

我正在尝试自定义显示/隐藏功能。在一个 div 滚动时，另一个 div 滑动向下切换，只要光标在父 div 上，它就会保持这种状态。当鼠标离开父 div 的区域时，辅助 div 应该向上滑动。此代码执行此操作，但在 mouseenter 和 mouseout 上上下滑动多次，而它应该为每个事件只执行一次。有任何想法吗？谢谢。

```
$(document).ready(function()
{
    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').mouseenter(function()
    {
        $(".slidingDiv").slideToggle();
    });

    $('.show_hide').mouseout(function()
    {
        $(".slidingDiv").slideToggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:06:55.463

在每个动画之前使用[stop(true) ，如下所示：](http://api.jquery.com/stop/)

```
$(".slidingDiv").stop(true).slideToggle(); 
```

改用这个，让我知道它是否有效：

```
$(document).ready(function()
{
  $(".slidingDiv").hide();
  $(".show_hide").show();

  $('.show_hide').hover(
      function () {
         $(".slidingDiv").stop(true).slideToggle();
      },
      function() {
         $(".slidingDiv").stop(true).slideToggle();
      }
  );

}); 
```

检查[jQuery hover()](http://api.jquery.com/hover/)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:07:16.543

没关系，迈克打败了我。 [https://stackoverflow.com/a/14698021/1933563](https://stackoverflow.com/a/14698021/1933563)

`$(".slidingDiv").stop(true).slideToggle();`

# android - 小部件：无需 onclick() 即可自动启动 Activity

> ID：14697994
> 
> 赞同：1
> 
> 时间：2013-02-05T00:03:18.423
> 
> 标签：android, android-intent, android-widget

如果单击小部件，我正在尝试打开一个活动。但是，当我将包上传到我的模拟器时，活动会自动打开，即使它只有在我单击小部件时才会打开。

这是我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.NewsWidget"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <service android:name=".UpdateWidgetService" >
        </service>

        <receiver android:name="MyWidgetProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </receiver>
         <activity
            android:name="com.example.NewsWidget.MainActivity"
            android:label="@string/app_name"
            android:launchMode="singleInstance" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".DetailedNewsViewer"
            android:label="DetailedNewsViewer" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

[我已使用此处另一个问题的详细信息（从小部件启动活动](https://stackoverflow.com/questions/1937236/launching-activity-from-widget)）将以下代码添加到我的小部件提供程序中。

```
 Intent i = new Intent(); 
        i.setClassName("com.example.NewsWidget", "com.example.NewsWidget.MainActivity"); 
        PendingIntent myPI = PendingIntent.getService(context, 0, i, 0); 
        //intent to start service 

      // Get the layout for the App Widget 
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout); 

      //attach the click listener for the service start command intent 
      views.setOnClickPendingIntent(R.id.update, myPI); 

      //define the componenet for self 
      ComponentName comp = new ComponentName(context.getPackageName(), MyWidgetProvider.class.getName()); 

      //tell the manager to update all instances of the toggle widget with the click listener 
      mgr.updateAppWidget(comp, views); 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:04:06.497

我注意到您正在使用`PendingIntent.getService()`但您调用的是活动而不是服务（根据您的清单）。尝试`PendingIntent.getActivity()`改用并查看您的 pendingIntent 是否触发。

当您从 Eclipse 运行时，您的主要活动正在加载，但*edthethird*是正确的，这可能与您的问题无关。这只是启动主要活动的默认 Eclipse 行为。

# javascript - 了解 JavaScript 匿名函数、变量和作用域

> ID：14697996
> 
> 赞同：0
> 
> 时间：2013-02-05T00:03:19.623
> 
> 标签：javascript, jquery

我们试图理解 JavaScript 匿名函数中的变量作用域。

这段代码只需要在 Webkit 浏览器中工作，因为它是用于 PhoneGap 应用程序的。

给定下面的代码块，对于 all_packs 中的每个项目， **setTimeout**的参数是否总是相同，或者**pack_name**的变化值（因为它在 jQuery 循环的每次迭代中都会改变）会影响参数**？**换句话说，每个新行都应该与**all_packs**中的不同项目相关联。这是使用匿名函数的正确方法，还是某些行最终会引用相同的名称？

我们不能在**tap**匿名函数中使用**this.name ，因为****this**将不再引用**all_packs**中的项目。结果，我们首先将名称隐藏在**pack_name**中。

 ******假设**TAP_DELAY**是其他地方的常量集，**start_work**是有效函数，**all_packs**是对象数组。

```
 // Load each pack
    $( all_packs ).each( function(index) {              
            // Set vars
            var pack_name = this.name;
            var row = $( '#templates .row' ).clone( true );

        // Append new row
        $( '#test' ).append( row );

            // Valid pack?
            if ( this.valid ) {             
                // Configure for tap
                row.on( 'tap', function() {
                                setTimeout( start_work, TAP_DELAY, pack_name );             
                });
            } else {
                            setTimeout( start_work, TAP_DELAY, this.name );
            }
        }); 
```******

# c++ - Eclipse 中的 C++ 错误

> ID：14697999
> 
> 赞同：1
> 
> 时间：2013-02-05T00:03:37.367
> 
> 标签：c++

我已经在 Eclipse 中编写了这个头文件。Eclipse 显示错误，我不确定它们的含义。编码：

是 >> numPairs; kP = new KeyValuePair[numPairs];

Eclipse 显示 numPairs 和 kP 未解析。然后最后两个方法（createTable 和 getValue）显示“Invalid Overload”。我今天问了我的 TA，他说代码是正确的。我也尝试将它分离到一个实现文件中，但同样的错误仍然存​​在。我的头文件在 src 文件夹和 main.cpp 中。有什么我想念的吗？

```
#ifndef TRANSLATIONTABLE_H_
#define TRANSLATIONTABLE_H_
#include "KeyValuePair.h"

template<typename Key, typename Value>
class TranslationTable
{
private:
    int numPairs;
    KeyValuePair<Key,Value> *kP;

public:
    TranslationTable(std::istream& is);
    TranslationTable();
    void createTable(std::istream& is);
    Value getValue(Key myKey) const;
};

 template<typename Key, typename Value>
 TranslationTable<typename Key,typename Value>TranslationTable()
 {return;}

 template<typename Key, typename Value>
 TranslationTable<typename Key,typename Value>TranslationTable(std::istream& is)
 {
is >> numPairs;
kP = new KeyValuePair<Key,Value>[numPairs];
 }

 template<typename Key, typename Value>
 void TranslationTable<Key,Value>::createTable(std::istream& is)
 {
is >> numPairs;
kP = new KeyValuePair<Key,Value>[numPairs];
 }

 template<typename Key, typename Value>
 Value TranslationTable<Key,Value>::getValue(Key myKey) const
 {

}

#endif /* TRANSLATIONTABLE_H_ */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:07:50.133

您忘记`::`了构造函数定义的范围解析符号：

```
 template<typename Key, typename Value>
 TranslationTable<typename Key,typename Value>::TranslationTable()
                                              ^^^

 template<typename Key, typename Value>
 TranslationTable<typename Key,typename Value>::TranslationTable(std::istream& is)
                                              ^^^ 
```