# StackOverflow 问答 14695000-14695999

# visual-studio - MSBuild 未将编译后的二进制文件复制到 \垃圾桶

> ID：14695005
> 
> 赞同：0
> 
> 时间：2013-02-04T20:26:36.920
> 
> 标签：visual-studio, msbuild

我有一个构建过程（我们称之为“引擎”），它一直在使用命令行调用 Visual Studio 的 devenv.exe 来构建项目。我已经知道 VS 只是使用 MSBuild 构建，所以我终于开始更新引擎以直接使用 MSBuild。但是，我发现 MSBuild 有一个奇怪的异常。

为了便于讨论，有项目 A、B、C 和 D。项目 A 是我正在构建的主要项目，一个 Web 应用程序，它依赖于（通过项目引用）其他 3 个项目。在 VS 中手动构建时，`A\bin`会填充程序集。当内置在引擎中时，`devenv.exe` `A\bin`再次填充了预期的二进制文件。当内置引擎使用 MSBuild 时，`A\bin`不包含任何内容。但是，`B\Release\bin`和`C\Release\bin`包含`D\Release\bin`它们的二进制文件，就像使用前两种构建方法一样。

这也发生在一个项目中。该问题似乎与依赖项目无关。

我试图显式设置 MSBuild`OutDir`属性，但它似乎没有任何影响。

我已经运行了带有诊断输出的构建，但看不到任何明显的东西（当然，那里有很多东西，所以我可能还没有找到重要的东西）。

我也一直在试图弄清楚如何查看 VS 在运行时对 MSBuild 的命令行调用，`devenv.exe`但我似乎找不到它。

我查看了其他几个 SO 帖子（[此处](https://stackoverflow.com/questions/3943136/bin-folder-not-being-copied-with-msbuild-teamcity)和[此处](https://stackoverflow.com/questions/2593987/msbuild-target-copywebapplication-does-not-copy-all-necessary-files-to-the-bin)），但它们不是同一个问题。

任何人都知道这可能是什么，或者我可以在哪里寻找答案或更多诊断信息？

**编辑 1：**用于调用 MSBuild 的参数模式如下所示：

```
/nologo /target:Compile /property:Configuration=%%BUILDCONFIG%% /maxcpucount 
  /property:OutDir=%%OUTDIR%%\bin\ /verbosity:diag /detailedsummary "%%PROJPATH%%" 
```

下半部分显示了我尝试强制输出目录以及增强的输出以显示该过程的更多细节。构建引擎代码替换为“%%TOKEN%%”项，并为正在构建的项目使用适当的替换值。

**编辑 2：**经过更多研究并研究提供的建议后，我决定放弃使用`msbuild`而不是`devenv`. 似乎`devenv`在准备自己调用的引擎盖下还有很多`msbuild`事情要做，如果我不完全理解`msbuild`. 我确实尝试查看是否记录了对`msbuild`from的调用`devenv`，但似乎没有。我考虑过构建一个虚拟的 msbuild 应用程序来转储进入其中的命令并临时换出实际的 msbuild 以生成此诊断信息，但这比此时值得付出更多的努力。性能提升不是很大，现在值得进一步追求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:17:58.377

我会查看项目属性的构建选项卡上的输出路径。使用 MSBuild 和使用 Visual Studio 时（即使从命令行）也有很多不同之处。可能是您的 A 配置与 B、C、D 不同，并且将 A 与其余部分同步将使其正常工作。此外，如果您计划单独构建项目，而不是作为解决方案，请确保您不使用对项目文件本身不可用的解决方案级别宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:32:28.680

你应该设置`OutputPath`而不是`OutputDir`.

既然您已经使用过`/verbosity:diag`，为什么不将输出重定向到文本文件并仔细分析 csc.exe（或正在使用的其他编译器）存储二进制文件的位置？这对于您了解 MSBuild 如何在后台工作非常简单且内容丰富。

# c - 如何从字面上打印f %d

> ID：14695013
> 
> 赞同：3
> 
> 时间：2013-02-04T20:27:07.557
> 
> 标签：c, printf

### 如何从字面上打印f %d

这可能是一个简单的答案。但我似乎找不到答案。

假设我想：

```
printf( "printf(\"%d\", x );" ); 
```

我希望输出字面上是：`printf( "%d", x );`

有没有办法做到这一点？如果我只是输入我上面写的代码，一个数字会被放入 %d，但我不想在其中放置任何东西。我只想要文字 %d。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:46:11.250

那么我们为什么不在这里练习一些真正安全的编程练习呢？

```
printf("%s", "printf(\"%d\", x );" ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:28:05.013

`%`与另一个逃脱`%`：

```
printf( "printf(\"%%d\", x );" ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T20:28:17.430

您可以使用`%%`文字百分比。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T20:49:53.373

使用`puts`or `fputs`，这些是输出无格式文本的选择

```
puts( "printf(\"%d\", x );"); 
```

将它与尾随换行符（我觉得这是个好主意）或

```
fputs( "printf(\"%d\", x );", stdout); 
```

如果您坚持没有换行符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T20:28:14.873

加倍`%`以“逃脱”它：

```
printf( "printf(\"%%d\", x );" );
                   ^-- 
```

# extjs - 如何捕获 ExtJS Graph 线名点击事件

> ID：14695014
> 
> 赞同：1
> 
> 时间：2013-02-04T20:27:20.917
> 
> 标签：extjs, extjs4

我有一个如下图所示的图表，目前如果我单击“Name1”，ExtJS 会从图表中隐藏这条线。但是我想在这个点击事件之后调用服务器并刷新图表。如何在“Name1”上捕获此点击事件？

![在此处输入图像描述](../Images/5efd910b1914ef1a6aa036b26de07ac9.png)

# api - API 设计 - 在数组中排序返回数据

> ID：14695015
> 
> 赞同：1
> 
> 时间：2013-02-04T20:27:22.497
> 
> 标签：api, api-design

我目前有一个 API 端点，它返回一个对象数组，每个对象包含 4 个 JSON 格式的变量。

数据的大小范围从 500kb 到 5mb - 取决于记录的数量。为了减少返回的大小，我们正在考虑从对象中删除标签，并返回一个数组数组。

例如

[{propertyone:123,propertytwo:456,propertythree:789,propertyfour:012},等等等等]

会成为

[[123,456,789,012]，等等，等等，等等]

然后，我们将记录数组位置 0 将被视为 propertyone 等。将来这个 API 可能会公开。将名称留在其中是否被认为是更好的做法，或者将提供具有强制订单的文档化 API 就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:18:32.277

有据可查的 API 通常是最好的 API。为您的 API 提供外部文档很重要，但您返回的数据也需要记录，没有什么比自记录数据更好的了。

我认为通过删除属性名称，您将完全失去这种自我记录，并且您将来也可能最终限制自己。例如，考虑只想返回部分数据，如果没有这些属性名称，您将如何表示它？

除了文档之外，如果您要返回 JSON，则取决于消费者的环境，提供这些属性可以为他们提供一个自然的模型来使用。以 JavaScript 为例，如果他们只是将您的响应解析为 JavaScript 对象，那么他们本质上就有一个免费实现的客户端模型，这将使​​使用您的 API 变得愉快。

尽管如此，速度很重要，我建议研究不同的措施来减少回报的规模。通常对此的常见解决方案是提供分页结果，如果客户端需要更多数据，则需要执行其他请求。此外，根据数据的形状，您可以通过对响应使用[GZIP 压缩之类的简单方法受益匪浅。](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)

在设计 API 时，只要你记录它并且它按照描述的那样工作，通常任何东西都足够了。然而，赋予消费者权力的 API 才是成功的。

# ssis - 我可以循环一个 SSAS 处理任务，直到它成功吗？

> ID：14695019
> 
> 赞同：0
> 
> 时间：2013-02-04T20:27:32.733
> 
> 标签：ssis, ssas

我有一台较旧的机器，运行 Windows Server 2003 和 SQLServer 2005。它的生命周期即将结束，但在所有用户迁移到新服务器之前，我们需要保持该机器上的 SSAS 多维数据集是最新的。

问题是网络连接有时不稳定。此服务器上的多维数据集指向另一台服务器上的 SQL 数据库，如果在重建多维数据集时连接遇到问题，该过程将停止并显示错误消息。

由于 100 次中有 99 次出现处理错误是由网络引起的，因此我正在寻找一种方法来在多维数据集失败时重复处理。完美的解决方案应该在 x 次尝试后停止（以防万一这是第 100 次并且不是网络问题）。

我已经查看了 SQL Server 代理作业和 SSIS，并且在它成功或达到 x 尝试次数之前看不到循环的方法。是否没有命令行选项来运行多维数据集处理，以便我可以将它包含在 Powershell 循环或其他东西中？或者是否有我错过的 SQL 或 SSIS 选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:01:35.503

我们的流程遇到了类似的情况，并且能够让代理作业在 10 分钟的等待期后重试 3 次。只有当所有 3 次尝试都失败时，我们的流程才会提醒我们“这是一个真正的失败，而不是暂时的问题”。

在任何 SQL 代理作业步骤类型中，“高级”选项卡应该如下所示。

![在此处输入图像描述](../Images/bb7045e751a77461336a920fa9c02c80.png)

如您所见，您可以指定您的`Retry attempts`和 以分钟为单位的时间间隔，以便它重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:37:58.947

您可以使用某种循环，其中您的包中有三个对象：

1.  SSAS 处理任务
2.  递增计数器的脚本组件
3.  如果计数器小于处理任务的尝试次数，则调用当前包的包执行任务。

# c# - 将 ParameterDirection.Input 更改为 ParameterDirection.InputOutput

> ID：14695020
> 
> 赞同：0
> 
> 时间：2013-02-04T20:27:35.177
> 
> 标签：c#, sql

```
MemberChecker.CommandType = CommandType.StoredProcedure; 
```

添加 **并解决了问题！**

---- 这是一个有趣的问题！

为什么我的 SqlCommand 访问存储过程仅在我使用时才有效

```
ParameterDirection.InputOutput 
```

并不是

```
ParameterDirection.Output 
```

**此 SqlParameterCollection 不包含具有 ParameterName '@Customer' 的 SqlParameter**

这是我的一些代码：

```
 using (SqlConnection H20_Connection = new SqlConnection(ConfigurationManager.ConnectionStrings["H20"].ConnectionString))
        {
            SqlCommand MemberChecker = new SqlCommand("execute custom_x_Check", H20_Connection);
            MemberChecker.Parameters.Add("@TN", SqlDbType.VarChar,50).Value = TNH20.Text.Trim();
            MemberChecker.Parameters.Add("@Customer_ID", SqlDbType.VarChar, 50).Value = TNH20.Text.Trim();

            MemberChecker.Parameters.Add("@Customer", SqlDbType.VarChar, 100).Direction = ParameterDirection.Output;
            MemberChecker.Parameters.Add("@Out_TN", SqlDbType.VarChar, 50).Direction = ParameterDirection.Output;
            MemberChecker.Parameters.Add("@Out_Customer_ID", SqlDbType.VarChar, 50).Direction = ParameterDirection.Output;
            H20_Connection.Open();
            if (MemberChecker.ExecuteNonQuery() > 1)
            {
                Top.Visible = false;
                Bottom.Visible = true;
            }
            else
            {
                Top.Visible = true;
                Bottom.Visible = false;
            }
        } 
```

和我的 SQL

```
alter proc custom_Check

@TN varchar(50) ='',
@Customer_ID varchar(50)='',
@Customer varchar(100) out,
@Out_TN varchar(50) out,
@Out_Customer_ID varchar(50) out

as

select @Out_Customer_ID=Customer_ID,
@Out_TN = MainTN,@Customer = Customer
 from [vCustomerName]
where Customer_ID  = @Customer_ID or @TN = MainTN 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:30:41.020

`@Customer`, `@Out_TN`, 并且`@Out_Customer_ID`都应该使用，`ParameterDirection.Output`因为它们是`out`SQL 中的参数。

像这样的东西：

```
MemberChecker.Parameters.Add("@Customer").Direction = ParameterDirection.Output;
MemberChecker.Parameters.Add("@Out_TN").Direction = ParameterDirection.Output;
MemberChecker.Parameters.Add("@Out_Customer_ID").Direction = ParameterDirection.Output; 
```

另请注意，如果有多个记录符合您的条件，您的 SQL 将失败：

```
where Customer_ID  = @Customer_ID or @TN = MainTN 
```

`execute`正如您敏锐地注意到的那样，您正在使用在这种情况下不正确的语句调用存储过程。将命令更改为：

```
SqlCommand MemberChecker = new SqlCommand("custom_Check", H20_Connection);
MemberChecker.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:36:24.657

```
MemberChecker.CommandType = CommandType.StoredProcedure 
```

# android - 我可以在安卓手机上打开2个摄像头吗

> ID：14695024
> 
> 赞同：0
> 
> 时间：2013-02-04T20:27:54.623
> 
> 标签：android

我可以在我的 android 应用程序中同时打开前后摄像头吗？或者我可以前开还是后开？

我可以有 2 个预览表面吗？一个从前面，一个从后面？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:32:43.467

是的，您可以打开多个摄像头。使用`Camera.open(int cameraid)`. 它需要一个 int`0`和`getNumberOfCameras()`。这将允许您打开您想要的任何相机，或者一次打开所有相机。

# javascript - 如何防止浏览器在使用 javascript 重新加载时自动滚动？

> ID：14695027
> 
> 赞同：4
> 
> 时间：2013-02-04T20:28:01.643
> 
> 标签：javascript, scroll, reload

所以，现在大多数浏览器会在页面刷新时自动重新定位窗口滚动，这通常很好，但我有一种情况，我需要重新加载页面并关注用户离开页面的不同部分。*注意*获得焦点的新元素以隐藏开始，因此散列不起作用。我需要在 JS 中处理它，这样我才能使 div 可见，等等。

重新加载后调用...

```
$(document).ready(function(){
    $('#mydiv').show();
    var top = $('#myelement').offset().top;
    window.scrollTo(0, top);
}); 
```

尽管如此，页面关注的是用户离开页面的位置。经过多次调试，在我看来代码运行得很好，但是浏览器在我处理 reload 事件之后正在处理，并重新定位我新定位的滚动......它会立即发生，但如果我在之后发出警报我的滚动，它显示了正确的屏幕位置。解除警报后，浏览器会将滚动条跳回到 IT 认为应该在的位置（至少在 Chrome 中是这样）。

我的问题，有什么办法可以防止浏览器（跨浏览器）处理重载事件？用超时延迟我的滚动似乎有效，但它看起来非常不专业和跳跃。

我试过了

```
 $(document).unbind("scroll"); 
```

正如我在这里看到的某处推荐的那样，但它没有做任何事情。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:21:56.780

这是适用于 FF (18)、Chrome (24) 和 IE (9) 的解决方案。

将以下内容放入文档头部的脚本中：

```
function autoScroll() {
    var div = document.getElementById("mydiv");
    div.style.display = '';
    var top = div.offsetTop;
    if(window.scrollTop != top) 
        window.scrollTo(0, top);
}
function loadAutoScroll() {
    autoScroll();
    window.onload = null;
    return false;
}
function scrollAutoScroll() {
    autoScroll();
    window.setTimeout(function(){ window.onscroll = null; }, 100);
    return false;
}
window.onload = loadAutoScroll;
window.onscroll = scrollAutoScroll; 
```

我确信可以得出更清洁的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-30T13:29:53.237

将此添加到您的页面标题中

```
<style>
    body{
        overflow: hidden;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
    }
</style>
<script>
    window.onload = function () {
      jQuery('body').css({'overflow': 'auto', 'position': 'static'});
      window.scrollTo(0, 0);
    };
</script> 
```

# php - 将我的大量文件保存在 NTFS 上的一个目录中

> ID：14695034
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:28:14.960
> 
> 标签：php, mysql, ntfs, windows-server

我有一个共享服务，我在 Windows 2008 服务器上的一个 NTFS 目录上有 100,000 多个文件。

问题是，关于性能，将所有文件添加到 mysql blob 是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:39:31.940

在文件系统与数据库上存储文件在[这里](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)详细讨论。*将这么多*文件存储在一个目录中绝对是个坏主意。您可能会遇到性能问题。

一个更好的主意是在该目录下创建子目录。它们可以通过以下方式组织：

*   年/月
*   文件名的前 x 个字符
*   文件名的 MD5 哈希的前 x 个字符

# bash - Shell 脚本 - 不访问变量的内容

> ID：14695037
> 
> 赞同：0
> 
> 时间：2013-02-04T20:28:22.440
> 
> 标签：bash, shell, variables

我正在编写一个 Shell 脚本，但出现了一个意外错误（我以前从未见过）。

代码是这样的：

```
 num=1

 case $line in
    *.mp3*)
    s$num=$total_seconds; # $total_seconds is a variable with numbers like: 11.11
    a$num=$file;
    num=$(($num + 1));
    ;;
 esac 
```

如果我尝试查看这些变量的内容，它不会显示任何内容。

```
echo $s1 $a1
echo $s2 $a2 
```

甚至：

```
for ((i=1; i<=$num; i++))
do
  echo $s$i $a$i
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:40:51.340

如果您可以使用 bash（或任何支持数组的 shell），请使用数组：

```
num=1
declare -a s
declare -a a
case $line in
    *.mp3*)
        s[num]=$total_seconds # $total_seconds is a variable with numbers like: 11.11
        a[num++]=$file
        ;;
esac 
```

如果你想要一些 POSIXly 严格的东西，那么事情就会变得更加艰难。在不了解您的代码的情况下，我不想对此提出任何建议。

Aside:是一个带有类似 11.11的*字符串*`$total_seconds`的变量。这些 shell 不支持浮点数。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:46:52.003

`bash`仅当 LHS 是文字而非表达式时才识别变量赋值。虽然您可以稍微修改您的代码以获得这样的动态生成的变量名称：

```
num=1

case $line in
  *.mp3*)
  declare s$num=$total_seconds; # $total_seconds is a variable with numbers like: 11.11
  declare a$num=$file;
  num=$(($num + 1));
  ;;
esac 
```

一个更好的主意是使用 kojiro 建议的数组。

要动态访问它们，您需要使用间接扩展：

```
num=1
var="s$num"
echo ${!var}  # var must be the name of a variable, not any other more complex expression 
```*

# java - Java - 查找 - 素数与否

> ID：14695049
> 
> 赞同：-4
> 
> 时间：2013-02-04T20:29:33.507
> 
> 标签：java, eclipse

使用 Eclipse、Java

尝试制定检查一个数是否为素数的方法（手段可以被1和他自己分开）与否

当前创建了一些功能（下面的代码）。此代码返回所需的结果，但并非对于所有素数，意味着对于数字 33 和 55，它是 return`false`而不是`true`.

代码

```
private static void numberCheker() throws IOException {
    System.out.println("Enter number - ");
    int number;
    number = getNumber();
    boolean result = true;
    if ((number % 2 == 0) && (number != 2)) {
        System.out.println("Not");
    } else if (number == 1) {
        System.out.println("1 not a valid number");    
    } else if (number == 2)
        System.out.println("Simple");    
    else {
        for (int i = 2; i < number + 1; i++) {
            if (number % i == 0) {
                result = false;
            } else
                result = true;
        }
        if (result = true)
            System.out.println("Simple");    
        else 
            System.out.println("not Simple");
    }
} 
```

**问题**- 我在“逻辑”中犯了错误 - 花几个小时来修复 - 但不能这样做。有什么建议吗？

结果必须如下所示

```
Enter number - 
1
simple
Enter number - 
2
simple
Enter number - 
3
simple
Enter number - 
4
not simple
Enter number - 
5
simple 
```

...

但我得到了

```
Enter number - 
33
not simple - **WRONG**
Enter number - 
55
not simple - **WRONG** 
```

* * *

**编辑：**

非常感谢所有人都尝试像 Michael Konietzka 一样悲伤：

```
 private static boolean numberCheker() throws IOException {

    System.out.println("Enter number - ");
    int number = getNumber();

    for (int i=2;i<number;i++)
     {
        if (number%i==0) return false; 
     }
        return (number>1); 
```

}

和 getNumber()

```
public static int getNumber () throws IOException{
int temp;
try{    
    BufferedReader bReader = new BufferedReader (new InputStreamReader(System.in));
    String resultReader = bReader.readLine();
    temp =  Integer.parseInt(resultReader);
    return temp;
}
catch (NumberFormatException failDescription){
    System.out.println(failDescription);
    return 0;
} 
```

}

现在它的工作完美感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:35:40.067

我不确定简单数字的定义是什么

但这可能是个问题

```
 if (result=true) 
```

将上面更改为

```
 if (result) 
```

**编辑**您还需要修复其他人提到的漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:36:55.973

```
if (result=true) 
```

我认为你的意思是双等号：

```
if (result==true) 
```

当你说 if (result=true) 时，这个语句总是会返回 true。

编辑：您还需要在 for 循环中修复 if-else 内容。见我先生的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T21:44:49.760

您可以将检查放入类的静态方法中：

```
public static boolean isPrime(final int n)
    {
     for (int i=2;i<n;i++)
     {
        if (n%i==0) return false; 
     }
        return (n>1);
    } 
```

您必须遍历从 2 到 n-1 的所有数字并检查 n 是否可被 i 整除而没有余数。如果是这样，该方法可以立即返回 false，因为找到了一个因素。如果在 2 和 n-1 之间没有找到因子，并且数字大于 1，则它是素数；该方法返回真。

要使用此方法，您可以以这种方式简单地使用它，例如：

```
public static void main (String[] args) 
  {
     for (int i=1;i<10;i++)
     {
         System.out.println(i+": "+isPrime(i));
     } 
```

这将输出

> 1：错误
> 
> 2：真
> 
> 3：真的
> 
> 4：错误
> 
> 5：真的
> 
> 6：错误
> 
> 7：真的
> 
> 8：错误
> 
> 9：错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T20:38:25.977

问题是当你发现数字不是素数时你并没有跳出循环，要解决这个问题，只需添加，中断；在你的 if 语句之后......这里是代码：

```
 if (number%i==0){
            result=false;
             break;
            } 
```

**编辑**

您还需要按照@Smit 的建议修复 if 语句

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:38:05.110

3 是素数，但 3 的倍数不是素数，5 等也是如此。素数的倍数不是素数。只有这么多的素数。没有为设计素数制定明确的规则，我怀疑你是否会这样做。素数 no 是一个不在集合 2n n 3n 中并且只能被它自己和 1 整除的数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T20:42:05.827

2 个问题 1 - 你需要在它为 false 时添加一个 break 2 - 最后需要更改 if

```
 if (result=true) 
```

到

```
 if (result)

public static void main(String[] args) {

        System.out.println("Enter number - ");
        int number = 55;
        boolean result = true;
        if ((number%2==0) && (number!=2) ){
            System.out.println("Not");
            }
        else if (number ==1){
            System.out.println("1 not a valid number"); 
        }
        else if (number ==2)
            System.out.println("Simple");   
        else{           
            for (int i=2; i<number;i++){
                if (number%i==0){
                    result=false;
                    break;
                    }
                else
                    result = true;

                }
            if (result)
                System.out.println("Simple");   
            else 
                System.out.println("not Simple");
        }   

    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T20:49:17.610

您的错误在循环终止中。

通过循环直到 number + 1，该数字最终将被自身除，余数为零，因此每个数字看起来都不是素数。

循环直到 number / 2 （sqrt(number) 会更有效，但代码的质量表明这不是问题）

此外，当您检测到余数为零时，您必须中断循环。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T21:50:03.210

我建议查看一种称为埃拉托色尼筛法的算法：[http ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

这是一个创建素数列表的非常简单的算法，它将帮助您了解如何确定一个数字是否为素数。

顺便说一句 - 不要忘记排除负数！

# hibernate - jpa - 为什么惰性引用的 id 的 getter 执行数据库语句

> ID：14695050
> 
> 赞同：1
> 
> 时间：2013-02-04T20:29:33.773
> 
> 标签：hibernate, jpa, lazy-loading, getter

我在产品和参数之间有一个单一的关系。（JavaAssistant 用于实现惰性引用。代码在 Spring-Container 中执行）。

```
@Entity
public class Product extends AbstractEntity {

  @javax.persistence.ManyToOne(fetch = FetchType.LAZY)
  @javax.persistence.JoinColumn(name = "parameterID")
  private Parameter parameter;

...
} 
```

现在我执行：

```
 1\. Product p = em.find(Product.class, 1L);
 2\. System.out.println(p.getParameter().getId()) 
```

在日志中我可以看到：

```
select ... **product1_.parameterID** as paramet11_38_ ... from Product product1_  where product1_.id=?
select parameter0_.id as id49_0_ ... from Parameter parameter0_ where parameter0_.id=? 
```

为什么 Jpa 在知道参数的 id 时执行第二行的查询（因为它在第一行中读取）？当它被要求提供除 id 之外的其他属性时，它应该执行查询。你不觉得吗？为什么会这样？我们可以强制 Hibernate 做出不同的行为吗？

环境：

*   Hibernate 3.6.10 作为 JPA 提供者
*   春天 3.1.0
*   JavaAssistant 用于实现惰性引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T12:20:48.307

此问题已注册为错误 ( [https://hibernate.atlassian.net/browse/HHH-3718](https://hibernate.atlassian.net/browse/HHH-3718) )。将来可能会更正。

# c - 如何在 C 中模拟 4 位二进制加法器

> ID：14695051
> 
> 赞同：1
> 
> 时间：2013-02-04T20:29:34.207
> 
> 标签：c, binary, logic, bit-manipulation

我的教授分配班级编写一个 C 程序，以使用基本加法器模拟 32 位加法器。我知道 32 位加法器由 8 X 4 位加法器组成。但是，我什至不确定如何在 C 中模拟 4 位加法器。我需要实现 4 位二进制波纹进位加法器、4 位二进制先行进位生成器和 4 位先行进位加法器。从全加器的真值表和卡诺图，我得到了 Sum 和 Carry Out 输出的函数。对于总和，我收到了 A xor B xor Carry In。对于执行功能，我收到 (A*B) + (进位 (A xor B))。现在我不确定该去哪里。我很确定我需要使用位运算符在位级别操作整数（我有位运算符的基本知识，尽管我从未在纸和铅笔之外实现过它们）。

如何分解整数以获得函数的 A、B 和进位输入？如何获得 Sum 和 Carry Out 输出？如何将全加器串在一起以获得 4 位加法器？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:00:21.837

好吧，对于一个简单的解决方案，我们可以将半加器和全加器电路图抽象一下。来自维基百科：

半加法器：

![半加器](../Images/eb527fe7fc9995d30de5a9e596be1a93.png)

全加器：

[![全加器](../Images/3e6a93f5ca7732e5e73776cf6a0129de.png)](https://i.stack.imgur.com/8UFxf.png)

```
#include<stdio.h>

typedef char bit;
bit carry = 0;
bit halfadd( bit A, bit B ){
    carry = A & B;
    return A ^ B;
}
bit fulladd( bit A, bit B ){
    bit xor = A ^ B;
    bit ret = carry ^ xor;
    carry = (carry & xor) | (A & B);
    return ret; 
}

void fillNum( int num, bit *array ){
    int i;
    for( i = 0; i < 32; ++ i ){
        array[i] = ( num >> i ) & 1;
    }
}

int main(){ 
    bit num1[32] = {0}, num2[32] = {0};
    int A = 64620926, B = 1531529858;
    fillNum( A, num1 );
    fillNum( B, num2 );

    int r = 0;
    bit tmp = halfadd( num1[0], num2[0] );
    putchar( tmp ? '1' : '0' );
    r = tmp;
    int i;
    for( i = 1; i < 32; ++i ){
        tmp = fulladd( num1[i], num2[i] );
        r += tmp << i;
        putchar( tmp ? '1' : '0' );
    }
    putchar( carry ? '1' : '0' );
    printf("\n%d\n\n%d + %d = %d", r, A, B, A+B);
    return 0;
} 
```

这将首先输出带有 LSB 的附加值，但它演示了基本原理。[这根据 Ideone 有效。](https://ideone.com/SjgA03)在模拟 4 位加法器时，只需应用类似的方法来处理逻辑电路。

如果您不想先将整数读取到数组中，您可以随时使用

```
#define GETBIT(num,bit)((num>>bit)&1) 
```

为了安全起见，您可以根据需要将其放入函数调用中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:37:04.950

如果我这样做，我将模拟一个带有查找表的 4 位加法器。在这种情况下，它将是一个 256 个条目表，可以设置为 16 x 16 值数组。

```
unsigned short outputs[16][16];

multOut = outputs[inA][inB]; 
```

你必须初始化你的数组，但这应该很简单。

使用数组中每个值的第 5 位作为执行位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:57:29.187

To start you will need to break your larger integers into individual bits. This will depend on the endianess of your system (whether numbers are stored most, or least significant bit first). An array of bit masks would help. Assuming big endian,

```
int bit[]={
             1<<0, //least significant bit
             1<<1, 
             1<<2,
             1<<3
}; 
```

So then to get the first bit of a number you would do

```
leastSignificantBitOfA = A&bit[0]; 
```

From there you could either use some shared array to store outputs or maybe make a simple structure like:

```
struct fullAdderReturn{
       int sum;
       int carryOut;
}

struct fullAdderReturn oneBitAdder(int a, int b, int carryIn)
{
     struct fullAdderReturn output;

     output.sum = a&b;
     output.carryOut = (a&b) | (a&carryIn) | (b&carryIn);

     return output;
} 
```

I put together a simple 2-bit ripple adder here [http://ideone.com/NRoQMS](http://ideone.com/NRoQMS) hopefully it gives you some ideas .

# c++ - 在 C++ 和 Qt 中显示 yuv 数据的映像库

> ID：14695052
> 
> 赞同：1
> 
> 时间：2013-02-04T20:29:33.787
> 
> 标签：c++, image, qt, yuv

我想知道是否有任何 C++ 成像库以便我可以获取一个 yuv 文件并显示它，我将能够传递文件的分辨率和 Ycbcr 信息（通常在 4:2:2）我需要这个来打开如果可能，将 yuv 转换为 jpeg 或以 rgb 模式显示它以构建在 QPixmap 上。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:41:09.937

我只是环顾四周，您是否尝试过以下操作？

[http://code.google.com/p/yuvtoolkit](http://code.google.com/p/yuvtoolkit)

[http://code.google.com/p/yuvplayer](http://code.google.com/p/yuvplayer)

# awk - 需要 awk 脚本来解析以太网统计命令的输出

> ID：14695053
> 
> 赞同：1
> 
> 时间：2013-02-04T20:29:35.427
> 
> 标签：awk

我有以下格式的命令输出：

```
Ethernet STATISTICS (ent0) :
Device Type: 2-Port 10/100/1000 Base-TX PCI-X Adapter (14108902)
Hardware Address: 00:09:6b:6e:5d:50
Transmit Statistics:                          Receive Statistics:
--------------------                          -------------------
Packets: 0                                    Packets: 0
Bytes: 0                                      Bytes: 0
Interrupts: 0                                 Interrupts: 0
Transmit Errors: 0                            Receive Errors: 0
Packets Dropped: 0       
ETHERNET STATISTICS (ent1) :
Device Type: 2-Port 10/100/1000 Base-TX PCI-X Adapter (14108902)
Hardware Address: 00:09:6b:6e:5d:50
Transmit Statistics:                          Receive Statistics:
--------------------                          -------------------
Packets: 30                                   Packets: 0
Bytes: 1800                                   Bytes: 0
Interrupts: 0                                 Interrupts: 0
Transmit Errors: 0                            Receive Errors: 0
Packets Dropped: 0                            Packets Dropped: 0
                                              Bad Packets: 0 
```

我需要将与 ent0 关联的传输数据包数和与 ent1 关联的传输数据包数保存到变量中。我需要使用 awk 来完成这项任务，虽然我知道如何提取数据包的数量，但我不知道如何将它与上面几行列出的适配器（ent0 或 ent1）相关联。似乎我需要使用某种嵌套循环，但不知道如何在 awk 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:42:52.013

怎么样：

```
# list all ent's and there counts 
$ awk '/ent[0-9]+/{e=$3}/^Packets:/{print e,$2}' file
(ent0) 0
(ent1) 30

# list only the count for a given ent 
$ awk '/ent0/{e=$3}/^Packets:/&&e{print $2;exit}' file
0

$ awk '/ent1/{e=$3}/^Packets:/&&e{print $2;exit}' file
30 
```

**解释：**

第一个脚本`ent's`与传输的数据包计数一起打印：

```
/ent[0-9]+/        # For lines that contain ent followed by a digit string
{
   e=$3            # Store the 3rd field in variable e
}
/^Packets:/        # Lines that start with Packet:
{
   print e,$2      # Print variable e followed by packet count (2nd field)
} 
```

第二个脚本仅打印给定的计数`ent`：

```
/ent0/             # For lines that match ent0
{
   e=$3            # Store the 3rd field 
}
/^Packets:/&&e     # If line starts with Packets: and variable e set 
{
   print $2        # Print the packet count (2nd field)
   exit            # Exit the script 
} 
```

您可以在 bash 中使用命令替换将值存储在 shell 变量中：

```
$ entcount=$(awk '/ent1/{e=$3}/^Packets:/&&e{print $2;exit}' file)

$ echo $entcount 
30 
```

以及传递变量的`-v`选项：`awk`

```
$ awk -v var=ent0 '$0~var{e=$3}/^Packets:/&&e{print $2;exit}' file 
0

$ awk -v var=ent1 '$0~var{e=$3}/^Packets:/&&e{print $2;exit}' file 
30 
```

# webserver - 我们是否需要专用的网络服务器，或者我们可以简单地使用现代应用程序服务器？

> ID：14695055
> 
> 赞同：0
> 
> 时间：2013-02-04T20:29:39.923
> 
> 标签：webserver, weblogic

我计划设计一个需要 Web 服务器和应用程序服务器（基于 Java EE）的应用程序。现代应用服务器如 Weblogic、Websphere、JBOSS 可以同时为应用服务器和 Web 服务器提供支持。但是，我看到许多应用程序的部署架构将 Web 服务器和应用程序服务器隔离为一个单独的实体。

我想知道：

*   将 Web 服务器和应用程序服务器分离为单独的实体有什么架构优势？
*   例如，假设我们将使用 weblogic 作为 Web 服务器和应用服务器，您认为是否对大型应用程序有任何顾虑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:59:56.303

使用专用 Web 服务器处理静态内容有几个原因：

*   在大多数情况下，Web 服务器已经存在于应用程序服务器（反向代理）的前面，如果应用程序服务器是集群的，则需要它。所以它已经存在了。
*   如果静态内容很重要（大小和流量），将其放在 Web 服务器中允许将内容和应用程序分开调用。
*   历史上纯 Java 应用程序服务器比本地 Web 服务器慢，现在 NIO 允许相同的访问系统调用将文件直接发送到套接字，而无需在系统和用户模式之间来回切换。

所以我认为你应该从应用服务器提供的竞争开始，如果它可以帮助你解决你实际遇到的问题，就可以使系统复杂化。

# css - CSS 如何将 div 高度设置为 100% 减去一些像素

> ID：14695059
> 
> 赞同：0
> 
> 时间：2013-02-04T20:29:55.837
> 
> 标签：css, html, resize, height

这些天我正在尝试设计一个有点困难的网页。

我有三个主要的div。第一个用于页眉，另一个用于页脚，第三个用于主要内容。页眉和页脚必须固定在页面的顶部和底部。它们的位置不能随着浏览器窗口大小的改变而改变。第三个 div 必须在这些 div 之间的空白处。它可以调整大小以适应窗口调整大小的页面。

主 div 的高度必须完全改变，因为我想在那个 div 中放置一个谷歌地图，所以这个 div 的高度很重要。

我尝试了很多东西，但都没有成功。将 div 设置`height`为 100%（而 body 和 html 的高度也是 100%）不是答案。使用表格（三行，两行固定高度，一行可变高度，with `height="100%"`）也有一些问题（在IE8中，当我声明 a 时`doctype`，第二行中的div（with `height:100%`）不适合单元格了！）。

现在我不知道做这项工作。我能做些什么？

**注意：**我不喜欢使用 CSS3，因为与旧浏览器的兼容性对我来说很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:39:50.917

你可以试试这样的。

**HTML**

```
 <div id="header"></div>
    <div id="body"></div>
    <div id="footer"></div> 
```

**CSS**

```
#header {
    height:50px;
    width: 100%;
    background: black;
    position: fixed;
    z-index: 1;
    top: 0;
}

#body {
    height:100%;
    width: 100%;
    background: #CCC;
    position: absolute;
    z-index: 0;
}

#footer {
    height: 50px;
    width: 100%;
    background: #0CF;
    position: fixed;
    bottom: 0;
} 
```

这是一个小提琴 - [http://jsfiddle.net/6M59T/](http://jsfiddle.net/6M59T/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:32:26.847

为您的页眉使用设定的高度，并使用[粘性页脚](http://ryanfait.com/sticky-footer/)使您的页脚保持设定的高度并与底部对齐。之间的空间应该始终是正确的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-08T10:59:06.700

这是css的缺点之一。您无法仅使用这三个 div 完成您想要的。您需要使用额外的 div 来抵消页眉和页脚的高度。以下是解决此问题的方法：

```
<body style="height:100%; margin:0; padding:0;">
    <div id="header" style="height:50px; position: relative; z-index: inherit; background-color:lightblue;"></div>
    <div id="content" style="height:100%; margin:-50px 0 -70px 0; background-color:wheat">
        <div id="header-offset" style="height:50px;"></div>
        <div id="footer-offset" style="height:70px;"></div>
    </div>
    <div id="footer" style="height:70px; background-color:lightblue;"></div>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:37:20.023

您应该尝试众所周知的[Clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)来处理高度问题，因为您需要“清除”父元素以获得所需的 100% 高度。

# quickbooks - QuickBooks Online 使用过滤器查询每次都返回 401

> ID：14695065
> 
> 赞同：8
> 
> 时间：2013-02-04T20:30:08.407
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online

我已经成功使用 POST 和 Content-Type application/xml 创建对象

我也使用 Content-Type application/x-www-form-urlencoded 和一个空白请求主体成功查询，该请求主体根据我指定的 URI 返回所有对象类型。

我也可以在请求正文中使用类似 PageNum=1&ResultsPerPage=1 的内容，并且我已经弄清楚如何将其合并到签名中，以便获得有效的响应。

但是，无论我如何格式化它，当我尝试使用过滤器（像 Filter=FAMILYNAME :EQUALS: Doe 这样基本的东西）时，除了 401 响应之外，我什么也得不到。我已经阅读了关于如何使用 [RFC3986] 百分比编码对所有参数名称和值进行转义的 OAuth Core 1.0 Revision A 规范。但是我觉得我错过了一个步骤或格式不正确。我在 Intuit 的论坛中搜索关于什么是正确格式的信息不一致。

对此的任何帮助将不胜感激。我已经为此苦苦挣扎了一个星期。

我在尝试使用过滤器时得到的响应是：HTTP Status 401 - message=Exception authenticationing OAuth; 错误代码=003200；状态码=401

- - 更新 - -

当我尝试将过滤器与新 IPP 开发人员工具 - IPP API Explorer 一起使用时，我看到了同样的错误。我正在使用 IDS V2 QBO API Explorer。我可以使用该工具来检索所有帖子，并且响应显示了我所有的客户，但是当我尝试使用过滤器时，我得到：服务器错误 401 - 未经授权：由于凭据无效，访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

有任何想法吗？如果我从 API Explorer 工具中得到同样的错误，这让我认为问题完全是另外一回事。

----最终更新----

我终于在过滤器方面取得了成功，我相信我已经弄清楚了我的问题所在。我一直怀疑我是否能够使用像“PageNum=1&ResultsPerPage=1”这样的分页查询来工作，但无法获得像“Filter=FAMILYNAME:EQUALS:Doe”这样的查询。我怀疑过滤器格式中的空白存在问题。之前让我无法追踪的原因是我无法让过滤器在 IDS V2 QBO API Explorer 中工作。这让我怀疑还有其他事情发生。我决定完全忽略 API Explorer，并专注于为什么我可以让它以一种方式工作，而不能以另一种方式工作。

我相信我的问题归结为签名中过滤器值的编码不当。这解释了我得到的 401 无效签名错误。

“Filter=Name :EQUALS: Doe”在标准化后变为“Filter=Name%20%3AEQUALS%20%3ADoe”。

应该给出“Filter%3DName%2520%253AEQUALS%2520%253ADoe”的百分比编码。

本质上，您必须对空格和冒号进行“双重”编码，但不能对等号进行编码。我尝试了许多编码排列，但相信我的错误是我不是“双重”编码，或者当我进行双重编码时，我包含了“=”符号。无论哪种方式都会破坏您的签名。感谢大家的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:54:30.113

我相信我的问题归结为签名中过滤器值的编码不当。这解释了我得到的 401 无效签名错误。

我使用在线工具引导我完成正确签署 Oauth 请求的步骤。在完成这些步骤时，我意识到我的问题在于规范化请求参数然后对它们进行百分比编码的步骤。我在规范化步骤中包含了过滤器的“=”，这会破坏您的签名。我使用的工具可以在以下位置找到：

[http://hueniverse.com/2008/10/beginners-guide-to-oauth-part-iv-signing-requests/](http://hueniverse.com/2008/10/beginners-guide-to-oauth-part-iv-signing-requests/)

感谢大家的意见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:27:51.190

peterl 在这里回答了我的一个问题，也可能回答你的问题。当过滤器应该进入标题时，我一直试图将它们放在正文中。这是 peterl 的代码示例，用于获取特定客户的所有未付发票（未结余额大于 0.00）。

[http://pastebin.com/raw.php?i=7VUB6whp](http://pastebin.com/raw.php?i=7VUB6whp)

```
public List<Intuit.Ipp.Data.Qbo.Invoice> GetQboUnpaidInvoices(DataServices dataServices, int startPage, int resultsPerPage,  IdType CustomerId)
{
    StringBuilder requestXML = new StringBuilder();
    StringBuilder responseXML = new StringBuilder();

    var requestBody = String.Format("PageNum={0}&ResultsPerPage={1}&Filter=OpenBalance :GreaterThan: 0.00 :AND: CustomerId :EQUALS: {2}", startPage, resultsPerPage, CustomerId.Value);

    HttpWebRequest httpWebRequest = WebRequest.Create(dataServices.ServiceContext.BaseUrl + "invoices/v2/" + dataServices.ServiceContext.RealmId) as HttpWebRequest;
    httpWebRequest.Method = "POST";
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";
    httpWebRequest.Headers.Add("Authorization", GetDevDefinedOAuthHeader(httpWebRequest, requestBody));
    requestXML.Append(requestBody);
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] content = encoding.GetBytes(requestXML.ToString());
    using (var stream = httpWebRequest.GetRequestStream())
    {
        stream.Write(content, 0, content.Length);
    }
    HttpWebResponse httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;
    using (Stream data = httpWebResponse.GetResponseStream())
    {
        Intuit.Ipp.Data.Qbo.SearchResults searchResults = (Intuit.Ipp.Data.Qbo.SearchResults)dataServices.ServiceContext.Serializer.Deserialize<Intuit.Ipp.Data.Qbo.SearchResults>(new StreamReader(data).ReadToEnd());
        return ((Intuit.Ipp.Data.Qbo.Invoices)searchResults.CdmCollections).Invoice.ToList();
    }

}

protected string GetDevDefinedOAuthHeader(HttpWebRequest webRequest, string requestBody)
{

    OAuthConsumerContext consumerContext = new OAuthConsumerContext
    {
        ConsumerKey = consumerKey,
        ConsumerSecret = consumerSecret,
        SignatureMethod = SignatureMethod.HmacSha1,
        UseHeaderForOAuthParameters = true

    };

    consumerContext.UseHeaderForOAuthParameters = true;

    //URIs not used - we already have Oauth tokens
    OAuthSession oSession = new OAuthSession(consumerContext, "https://www.example.com",
                            "https://www.example.com",
                            "https://www.example.com");

    oSession.AccessToken = new TokenBase
    {
        Token = accessToken,
        ConsumerKey = consumerKey,
        TokenSecret = accessTokenSecret
    };

    IConsumerRequest consumerRequest = oSession.Request();
    consumerRequest = ConsumerRequestExtensions.ForMethod(consumerRequest, webRequest.Method);
    consumerRequest = ConsumerRequestExtensions.ForUri(consumerRequest, webRequest.RequestUri);
    if (webRequest.Headers.Count > 0)
    {
        ConsumerRequestExtensions.AlterContext(consumerRequest, context => context.Headers = webRequest.Headers);
        if (webRequest.Headers[HttpRequestHeader.ContentType] == "application/x-www-form-urlencoded")
        {
            Dictionary<string, string> formParameters = new Dictionary<string, string>();
            foreach (string formParameter in requestBody.Split('&'))
            {
                formParameters.Add(formParameter.Split('=')[0], formParameter.Split('=')[1]);
            }
            consumerRequest = consumerRequest.WithFormParameters(formParameters);
        }
    }

    consumerRequest = consumerRequest.SignWithToken();
    return consumerRequest.Context.GenerateOAuthParametersForHeader();
} 
```

您还可以在 StackOverflow 上查看我的原始问题：[使用 QuickBooks Online (QBO) Intuit Partner Platform (IPP) DevKit 查询所有未结余额的发票](https://stackoverflow.com/questions/14323815/query-for-all-invoices-with-open-balances-using-quickbooks-online-qbo-intuit-p)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:38:46.853

您是否在 API Explorer 中收到具有相同请求的 401？

[http://ippblog.intuit.com/blog/2013/01/new-ipp-developer-tool-api-explorer.html](http://ippblog.intuit.com/blog/2013/01/new-ipp-developer-tool-api-explorer.html)

另外，您是使用静态基本 URL 还是在运行时检索它？

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0010_Getting_the_Base_URL](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0010_Getting_the_Base_URL)

如果您使用的是静态基本 URL，请尝试切换到运行时基本 URL 以查看是否仍然出现错误。

# drupal-7 - Drupal7 hook_menu 用于存在节点别名

> ID：14695066
> 
> 赞同：3
> 
> 时间：2013-02-04T20:30:15.007
> 
> 标签：drupal-7

我正在开发我的模块。对于模块，我创建了特殊的节点类型并添加了一些别名为“events/my1”、“events/my2”和“events/my3”的节点。

在模块中我使用 hook_menu 函数

```
$items['events'] = array(
    'title' => t('Events list'),
    'access callback' => TRUE,
    'page callback' => '_events_list',
    'type' => MENU_CALLBACK,
  );
  $items['events/%'] = array(
    'title' => t(''),
    'access callback' => TRUE,
    'page callback' => '_event_detail',
    'page arguments' => array(1),
    'type' => MENU_CALLBACK,
  ); 
```

在 url site.com/events/ 从 _events_list() 函数打开我的页面

在 url site.com/events/anyurl/ 从 _event_detail() 函数打开的内容

但是当我打开 site.com/events/my1/ 然后打开节点的默认视图。不是我来自 _event_detail() 的代码。

我该如何解决？我想要 /events/ 中的每个 url 从我的函数中显示代码，而不是默认视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:56:12.523

`hook_menu`定义新的 URL 路径。对于现有 URL 路径，请使用[`hook_menu_alter`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_alter/7).

# windows - 计数与 GREP 模式匹配的文件

> ID：14695068
> 
> 赞同：4
> 
> 时间：2013-02-04T20:30:26.207
> 
> 标签：windows, grep

我在 Windows 服务器上，并且已经为 win 安装了 GREP。我需要计算匹配（或不匹配）特定模式的文件名的数量。我真的不需要列出所有文件名，我只需要计算匹配的总数。我将要搜索的树结构相当大，所以我想尽可能多地保存处理。

我对 grep 不是很熟悉，但看起来我可以使用 -l 选项来搜索与给定模式匹配的文件名。所以，例如，我可以使用

```
$grep -l -r this *.doc* 
```

搜索当前文件夹和所有子文件夹中的所有 MS word 文件。然后，这将返回给我所有这些文件的列表。我不想要列表，我只想计算它找到了多少。这可以用 GREP ......或其他工具吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T20:32:55.760

在linux上你会使用

```
grep -l -r this .doc | wc -l 
```

获取打印行数

尽管 -r .doc 不会搜索所有单词文件，但您可以使用 --include "*doc" 。

如果你没有 wc，你可以再次使用 grep 来计算匹配的数量：

```
grep -l -r --include "*doc" this . | grep -c . 
```

# facebook-graph-api - 通过 FB 应用向朋友发送卡片的最佳方式

> ID：14695070
> 
> 赞同：1
> 
> 时间：2013-02-04T20:30:33.073
> 
> 标签：facebook-graph-api, facebook-wall

我有一个应用程序，它允许用户为某个场合（生日只是一个例子）构建一张带有消息、照片、歌曲等的个人卡片。你可以在这里查看：apps.facebook.com/getmixxd

我正在使用图形 api 允许发件人发布到收件人的墙上，并可选择将其设为公开或私有。截至 2 月 5 日，此功能显然已禁用。

我的问题是我最好的选择是什么？仅使用对话框似乎并不能解决问题，因为用户要求的功能之一是能够指定卡片的交付时间（我朋友的生日是明天，但我想今天构建卡片并在明天交付）。此外，似乎没有任何预设的自定义操作适用。

向 FB 专家寻求一些建议，了解我的最佳选择是什么......

谢谢！！

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:56:44.177

首先，我不是FB Guru，这也是我的问题。

这是我反复看到的解决方案： [https ://stackoverflow.com/a/15234553](https://stackoverflow.com/a/15234553)

您最好的选择是 Open Graph API，您必须为此提交一个应用程序并“操作”一个相应的“对象”。例如动作“cook”和对象“recipe”。

# opencl - PyOpenCL enqueue_copy 在不同设备上运行时挂起

> ID：14695072
> 
> 赞同：0
> 
> 时间：2013-02-04T20:30:33.833
> 
> 标签：opencl, pyopencl

我无法让内核在两个不同的 OpenCL 平台上运行。平台的唯一区别是一个是 OpenCL 1.1，另一个是 1.2：

代码适用于此设备（OS X 10.8）：

```
===============================================================
('Platform name:', 'Apple')
('Platform profile:', 'FULL_PROFILE')
('Platform vendor:', 'Apple')
('Platform version:', 'OpenCL 1.2 (Sep 20 2012 17:42:28)')
---------------------------------------------------------------
('Device name:', 'Intel(R) Core(TM) i5-3427U CPU @ 1.80GHz')
('Device type:', 'CPU')
('Device memory: ', 8192L, 'MB')
('Device max clock speed:', 1800, 'MHz')
('Device compute units:', 4) 
```

目标设备（Ubuntu 11.04）：

```
===============================================================
('Platform name:', 'NVIDIA CUDA')
('Platform profile:', 'FULL_PROFILE')
('Platform vendor:', 'NVIDIA Corporation')
('Platform version:', 'OpenCL 1.1 CUDA 4.2.1')
---------------------------------------------------------------
('Device name:', 'Tesla M2050')
('Device type:', 'GPU')
('Device memory: ', 3071, 'MB')
('Device max clock speed:', 1147, 'MHz')
('Device compute units:', 14)
===============================================================
('Platform name:', 'NVIDIA CUDA')
('Platform profile:', 'FULL_PROFILE')
('Platform vendor:', 'NVIDIA Corporation')
('Platform version:', 'OpenCL 1.1 CUDA 4.2.1')
---------------------------------------------------------------
('Device name:', 'Tesla M2050')
('Device type:', 'GPU')
('Device memory: ', 3071, 'MB')
('Device max clock speed:', 1147, 'MHz')
('Device compute units:', 14) 
```

我已经将我认为的挂起源追溯到以下代码：

```
# set up 
host_array = numpy.array(arr)
device_buffer = pyopencl.Buffer(context, pyopencl.mem_flags.WRITE_ONLY, host_array.nbytes)

# run the kernel
program.run(queue, host_array.shape, None, device_buffer)

# copy the results back --- this call causes the code to hang ----
pyopencl.enqueue_copy(queue, host_array, device_buffer) 
```

两个设备之间没有代码更改，并且两个设备都运行 PyOpenCL 2013.1。我错过了什么吗？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:34:35.940

尝试`.wait()`在`program.run`. 这将确定它是否实际上是挂起的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:08:14.533

原来问题是线程问题。我正在使用线程模块生成的第二个线程来进行我的 pyopencl 调用。我认为问题在于我用来调用 pyopencl 的上下文是在主线程上创建的，我认为这导致了某种问题。

为了解决这个问题，我只是确保在第二个线程而不是主线程上声明我的上下文、队列和创建的程序。

# javascript - 导入外部js函数Mongodb shell

> ID：14695077
> 
> 赞同：1
> 
> 时间：2013-02-04T20:30:49.800
> 
> 标签：javascript, python, shell, mongodb

我在 json 文件中编写了 javascript 函数：

```
functions={}
functions.a =
    function(){
        return "returned"
    } 
```

我在教程中看到，如果我们导入那个 json 文件，我可以从 shell 中使用这些函数。

我正在尝试这个导入函数

```
mongo --shell test json 
```

但是我的功能不起作用！在这种情况下可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:06:10.403

Works for me:

```
$ cat foo.js
functions={}
functions.a =
    function(){
        return "returned"
}
$ mongo --shell foo.js
MongoDB shell version: 2.4.0-rc0
connecting to: test
> functions.a()
returned 
```

# grails - 如何将映射添加到 ElasticSearch grails 插件？

> ID：14695079
> 
> 赞同：1
> 
> 时间：2013-02-04T20:31:01.610
> 
> 标签：grails, groovy, elasticsearch

我正在尝试将父映射添加到 elasticSearch。我正在使用[grails 插件](http://grails.org/plugin/elasticsearch)。

[这是我要添加的映射示例](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html)

我正在努力寻找把它放在哪里。任何帮助将非常感激。

# wpf - Visual Studio 2012 样式窗口

> ID：14695089
> 
> 赞同：1
> 
> 时间：2013-02-04T20:32:05.337
> 
> 标签：wpf, visual-studio-2012, styles

我有兴趣在 WPF 中创建一个样式类似于 Visual Studio 2012 外观的窗口（边缘周围有颜色的无缝窗口，颜色不是必需的）。这可能不是一个非常面向编程的问题，但是有人知道像 Fluent Ribbon 库这样的库可以创建这种样式吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:38:35.103

我认为，如果您查找“自定义窗口 Chrome”一词，您将获得有关您正在寻找的内容的答案。不久前我写了一个库，为此做了很多工作：

[http://archive.msdn.microsoft.com/WPFShell](http://archive.msdn.microsoft.com/WPFShell)

还有一个链接在那里的博客文章解释了它是如何实现的：

[https://docs.microsoft.com/en-us/archive/blogs/wpfsdk/custom-window-chrome-in-wpf](https://docs.microsoft.com/en-us/archive/blogs/wpfsdk/custom-window-chrome-in-wpf)

# jquery-mobile - jquery listview链接切断正文

> ID：14695091
> 
> 赞同：2
> 
> 时间：2013-02-04T20:32:07.483
> 
> 标签：jquery-mobile

我使用 jquery mobile 构建了一个列表视图。但是，我希望正文文本比典型移动屏幕上的内容多一点。

```
<article id="military_list">
<ul data-role="listview" data-inset="true">
        <li><a href="barracks">
            <img src="../img/structure/barracks.png"/>
            <h3>Barracks</h3>
            <p>Fearless fighters weilding with shield and sword</p>
    </a></li>
            <li><a href="mage">
            <img src="../img/structure/mage.png"/>
            <h3>Mage Quarters</h3>
            <p>Where magical folk live</p>
    </a></li>
        </ul></article> 
```

它采用`<p></p>`标签并自动对其进行缩写。有没有办法简单地跳下一行？似乎还有很多剩余空间

堵塞。

这是一个例子：

![在此处输入图像描述](../Images/3acb829d1e28e31da097deb40d0ea42d.png)

正如您在黄色区域中看到的那样，它切断了字符串并添加了“授予您...”而不是转到下一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:37:35.237

使用这个 CSS：

```
.ui-li-desc {
    white-space: normal !important;
} 
```

这是一个例子：http: [//jsfiddle.net/Gajotres/3ZVeN/](http://jsfiddle.net/Gajotres/3ZVeN/)

# clearcase - 如何从 main 更新我的分支并接受他们在 clearcase 中的所有更改？

> ID：14695096
> 
> 赞同：1
> 
> 时间：2013-02-04T20:32:37.600
> 
> 标签：clearcase, cleartool

我抓起一个文件并做了：`rm -f theFile.C && ct update .`看着它重新加载。然后我去了一个不同的主要快照视图并运行`ct update .`并且文件不同。在这样做之后，我对此感到非常困惑，我希望它们是一样的！

我的“主要快照”的 EDCS 是：

```
element * CHECKEDOUT
element * /main/LATEST
load /ntrepo 
```

我的分支机构的 EDCS 是：

```
element * CHECKEDOUT
element * /main/branch_name/LATEST
element * /main/LATEST -mkbranch branch_name
element * /main/LATEST
load /ntrepo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:38:25.290

在快照视图中，当文件与预期版本不匹配时，首先要检查的是：

```
cleartool ls /path/to/parent/directory 
```

并查看`cleartool`该文件的返回值。

例如：

*   它可能被[劫持](https://stackoverflow.com/questions/2165155/clearcase-checkout-and-modify-but-forbid-checkin/2166107#2166107)，这意味着 a`ct update .`不会覆盖本地修改的文件。
*   它可能有不同的版本`branch_name`，因为选择规则*在之前* `/main/LATEST`。

# azure - Windows 8/RT + Phone 8 应用程序 - 同步数据

> ID：14695099
> 
> 赞同：2
> 
> 时间：2013-02-04T20:32:43.590
> 
> 标签：azure, windows-8, synchronization, windows-phone-8

嗨，我正在为 Windows 8 (RT) 和 Windows Phone 8 开发一个待办事项/提醒应用程序。我想让用户能够在这两者之间同步他们的待办事项。

我知道有一个适用于 Windows 8 的漫游应用程序数据存储，但是否可以通过手机访问它？我的另一个想法是创建一个 xml 文件并将其上传到 skydrive，但是我将没有推送功能 :( 还有 Azure，这似乎是最复杂的解决方案..

选择哪种方式最好？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-07T11:18:05.713

与此同时，Windows Phone 8.1 发布了，它改变了您的问题的答案 - 今天有通用应用程序，它们在 Phone 和常规 Windows 上共享相同的漫游存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:00:59.710

您可以使用[Live SDK (SkyDrive)](http://msdn.microsoft.com/en-us/live/)和[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)来完成此操作。Live SDK 将允许您从 SkyDrive 上传和检索项目，并且您可以使用移动服务进行推送通知。 这是您要执行的操作[的示例。](http://code.msdn.microsoft.com/windowsapps/Event-Buddy-ddafd9b6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T09:29:39.697

我知道该线程有点旧，但它仍然会出现在搜索结果中。所以，这就是答案。

我有完全相同的问题。因此，我开发了一个小型库，它正是这样做的——在 Windows Phone 和 Windows Azure 之间同步数据。代码在[GitHub 上](http://bit.ly/ProjectMirror)，这里有一个包装精美的[NuGet](https://www.nuget.org/packages/ProjectMirror/)包。您可以轻松地将其移植到 WinRT 并使用 SQLite 作为本地数据存储。

API 非常简单。您只需调用方法来执行 CRUD 操作，完成后，您调用`SynchronizeAsync`与 WAMS 同步数据。同步是双向的。如果发生冲突，最新的副本将获得首选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:58:15.037

对于这种情况，您将要使用移动服务 (www.windowsazure.com/mobile)。在 manage.windowsazure.com 登录后，获取 WinStore C# SDK 和 WP8 SDK。您将需要同时指向同一个 SQL 数据库和移动服务。当然，如果您还需要 blob 或表存储，则支持。您只需通过 DATA 选项卡下的脚本访问它们。

要查看已经在执行此操作的生产应用程序，我会将您指向 SeeSharpGuys 的 Slot Machine。Win 商店：[http](http://apps.microsoft.com/windows/en-US/app/slot-machine/7c60012a-00bd-4cae-a402-a9885ec11ea1) : //apps.microsoft.com/windows/en-US/app/slot-machine/7c60012a-00bd-4cae-a402-a9885ec11ea1 WP8： http: [//www.windowsphone.com/en-us/商店/应用程序/老虎机移动/9fa24191-d08d-4073-8098-740975e41946](http://www.windowsphone.com/en-us/store/app/slot-machine-mobile/9fa24191-d08d-4073-8098-740975e41946)

# postgresql - 在 PostgreSQL 中的小表上 ALTER 查询非常慢

> ID：14695100
> 
> 赞同：6
> 
> 时间：2013-02-04T20:32:46.937
> 
> 标签：postgresql

我有 PostgreSQL 9.2 和一个小型数据库，其中只有一些我正在开发的网站的种子数据。

以下查询似乎永远运行：

```
ALTER TABLE diagnose_bodypart ADD description text NOT NULL; 
```

`diagnose_bodypart`是一个少于 10 行的表。我已经让查询运行了超过一分钟，但没有任何结果。可能是什么问题呢？有什么调试的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:55:11.647

添加列不需要重写表（除非您指定 a `DEFAULT`）。这是一个没有任何锁的快速操作。正如克雷格指出的那样，pg_locks 是检查的地方。

一般来说，最可能的原因是长时间运行的事务。我将查看哪些工作流程正在影响这些表以及事务保持开放的时间。这种锁通常是事务性的，因此提交事务通常会解决问题。

# php - mb_convert_encoding 不工作

> ID：14695104
> 
> 赞同：0
> 
> 时间：2013-02-04T20:33:02.267
> 
> 标签：php, x-cart

我`mb_convert_encoding`用于将用户输入的文本转换为 X 购物车站点中的 utf-8 格式。但是当我试图运行代码时，执行会在编码点终止。以下代码是我用于转换的代码：

```
mb_convert_encoding($str,"iso-8859-7"); 
```

我什至检查了`phpinfo`并且在`mbstring`那里启用了。我不知道我是否需要启用任何其他设置？对此的任何帮助将不胜感激。

**更新**：还有一件事我错过了。我们也在转换希腊字母，我们不知道是否`mb_convert_encoding`支持希腊字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:36:25.033

检查您的错误日志，它将为您提供有关问题的大量详细信息。

在像 Linux 这样的 UNIX 系统上，它通常配置为 at`/var/log/apache2/error.log`或`/var/log/httpd/error.log`.

# jquery - 当用户键入字符时选择列表更改事件触发器

> ID：14695107
> 
> 赞同：0
> 
> 时间：2013-02-04T20:33:10.340
> 
> 标签：jquery

我有一个选择列表，我已经连接到一个更改事件..

```
 $('.ddlApplications').change(function () { alert('Hi'); }) 
```

如果您将焦点放在选择上并开始输入，则会触发此事件。我希望能够强制用户从选择中选择一个选项，并且无法在选择中输入。当用户在选择框中键入内容时，如何禁用（或不触发更改事件）？

我尝试禁用选择，但您无法选择任何选项，所以这不起作用..

```
 $('.ddlApplications').attr("disabled", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:39:12.950

如果您不想使用按键选择选项，只需禁用按键？

```
$('.ddlApplications').on({
    keydown: function() {
        return false;
    },
    change: function() {
        alert('Hi');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/yYkUd/1/)

# jquery - jQuery Validator 中有两个errorClasses？

> ID：14695108
> 
> 赞同：1
> 
> 时间：2013-02-04T20:33:10.497
> 
> 标签：jquery, jquery-validate

我知道您可以指定用于错误的类名，但是如果错误发生在特定元素上，是否可以指定第二个类名？我有一个带有输入的表单，并且所有错误都直接在输入下方对齐（如下所示：）
![在此处输入图像描述](../Images/87e35a18a2ef43441aef8b7eb6086145.png)
但我在页面上有一个复选框，当前的 errorClass 最终看起来像这样：

![在此处输入图像描述](../Images/81d9f6b6e0d7c7c7241911ed56c787e3.png)
我想为该复选框，因此它将正确对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:37:24.840

AFAIK，没有办法让插件应用多个“错误”类，除了使用它的各种内置回调函数（[`highlight`，`unhighlight`等](http://docs.jquery.com/Plugins/Validation/validate#toptions)）来应用/删除额外的类。这很快就会变得混乱和冗长。

但是当你有 CSS 时，真的没有必要让插件如何输出默认`.error`类复杂化。

只需使用 CSS专门针对`label`复选框（带有类）的错误消息（） ...`.error`

**工作演示：http:** [//jsfiddle.net/gfLR9/](http://jsfiddle.net/gfLR9/)

**CSS**：

```
label[for='myfieldname'].error {

} 
```

**HTML**：

```
<input type="checkbox" name="myfieldname" /> 
```

* * *

**澄清**：上述目标`label[for='myfieldname'].error`不会干扰`label`您对于同一输入可能拥有的任何其他附加元素。因为它非常专门针对那些`label`也带有`class="error"`. 见：http: [//jsfiddle.net/PcxKS/](http://jsfiddle.net/PcxKS/)

# proxy - wso2 esb mtom 附件

> ID：14695111
> 
> 赞同：2
> 
> 时间：2013-02-04T20:33:22.730
> 
> 标签：proxy, wso2, wso2esb, mtom

我目前正在使用 WSO2 企业服务总线、一些基于 cxf 的 web 服务和 mtom 附件。

使用 SoapUI（启用 MTOM），我向一个后端服务提交以下请求：

```
 ...
     <incident>
         ....
        <attachmentList>
           <attachment>
              <contentID>cid:soapui32.png</contentID>
           </attachment>
        </attachmentList>   
     </incident>
     ... 
```

启用 MTOM 原始数据为

```
 ...
    <attachmentList>
       <attachment>
         <contentID>
          <inc:Include href="cid:soapui32.png" xmlns:inc="http://www.w3.org/2004/08/xop/include"/>
         </contentID>
       </attachment>
    </attachmentList>
    ...

    ------=_Part_0_22113723.1360006252844
    Content-Type: image/x-png; name=soapui32.png
    Content-Transfer-Encoding: binary
    Content-ID: <soapui32.png>
    Content-Disposition: attachment; name="soapui32.png"; filename="soapui32.png"
    ...... 
```

* * *

到目前为止，一切都很好。现在，作为下一步，我为此 Web 服务创建一个基于 WSDL 的代理服务 (WSO2 ESB 4.5.1)。

```
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="testService" transports="https,http" statistics="enable" trace="enable" startOnLoad="true">
     <target>
      <outSequence>
       <send/>
     </outSequence>
     <endpoint>
      <wsdl service="IncidentService" port="IncidentServicePort" uri="uri2myservicewsdl"/>
     </endpoint>
     </target>
     <publishWSDL uri="uri2myservicewsdl"/>
     <description></description>
    </proxy> 
```

在axis2.xml中将enableMTOM设置为true，为代理服务启用MTOM。

如果我通过 SoapUI 提交具有相同附件的完全相同的请求，esb 会将附件转换为内联内容（调试日志）：

```
 DEBUG -  Starting Activation Handler invocation. Incoming Message: 
    ......
     <incident>
        <attachmentList>
           <attachment>
              <contentID>iVBORw0KGgoAAAANSUh.....</contentID>
           </attachment>
        </attachmentList>   
     </incident>
    .....
    </soapenv:Body></soapenv:Envelope>
    {org.wso2.carbon.activation.module.ActivationHandler} 
```

我在哪里可以启用 MTOM，以便代理不会将其转换为内联内容？

提前谢谢了。

## 解决方法

也许有人感兴趣，即使这只是一种解决方法：

我在axis2.xml（wso2 esb conf 目录）中启用了MTOM 和SwA 附件。

一旦我禁用了 SwA 并且只启用了 MTOM，附件就不再转换为内联内容。

现在，所有代理服务都禁用了 SwA，但目前还可以。稍后我会再看看它，也许这是一个错误。

# c++ - (-2147483648> 0) 在 C++ 中返回 true？

> ID：14695118
> 
> 赞同：249
> 
> 时间：2013-02-04T20:33:53.057
> 
> 标签：c++, types, literals, integer-overflow

`if(...)`-2147483648 是 32 位整数类型的最小整数，但在句子中似乎会溢出：

```
if (-2147483648 > 0)
    std::cout << "true";
else
    std::cout << "false"; 
```

`true`这将在我的测试中打印。但是，如果我们将 -2147483648 转换为整数，结果会有所不同：

```
if (int(-2147483648) > 0)
    std::cout << "true";
else
    std::cout << "false"; 
```

这将打印`false`.

我很困惑。任何人都可以对此作出解释吗？

* * *

2012 年 2 月 5 日更新：

感谢您的评论，在我的编译器中， int 的大小为 4 个字节。我正在使用 VC 进行一些简单的测试。我已经更改了问题中的描述。

在这篇文章中有很多非常好的回复，[AndreyT](https://stackoverflow.com/a/14695202/2040924)非常详细地解释了编译器将如何处理此类输入，以及如何实现这个最小整数。[另一方面， qPCR4vir](https://stackoverflow.com/a/14695400/2040924)给出了一些相关的“好奇心”以及整数的表示方式。如此令人印象深刻！

* * *

## 回答 #1

> 赞同：399
> 
> 时间：2013-02-04T20:38:46.733

`-2147483648`不是一个“数字”。C++ 语言不支持负文字值。

`-2147483648`实际上是一个表达式：一个正的文字值，前面`2147483648`带有一元运算符。对于您平台上范围的积极方面来说，`-`价值`2147483648`显然太大了。`int`如果类型`long int`在您的平台上有更大的范围，编译器将不得不自动假定它`2147483648`具有`long int`类型。（在 C++11 中，编译器还必须考虑`long long int`类型。）这将使编译器`-2147483648`在更大类型的域中进行评估，结果将是负数，正如人们所期望的那样。

但是，显然在您的情况下，范围与`long int`范围相同`int`，并且通常没有比`int`您的平台范围更大的整数类型。这正式意味着正常`2147483648`量溢出所有可用的有符号整数类型，这反过来意味着您的程序的行为是未定义的。（在这种情况下，语言规范选择了未定义的行为，而不是要求诊断消息，这有点奇怪，但事实就是这样。）

在实践中，考虑到行为是未定义的，`2147483648`可能会被解释为一些依赖于实现的负值，在`-`应用一元后恰好变成正值。或者，某些实现可能决定尝试使用无符号类型来表示值（例如，在 C89/90 编译器中需要使用`unsigned long int`，但在 C99 或 C++ 中则不需要）。允许实现做任何事情，因为无论如何行为是未定义的。

作为旁注，这就是为什么像这样的常量`INT_MIN`通常被定义为

```
#define INT_MIN (-2147483647 - 1) 
```

而不是看似更直接的

```
#define INT_MIN -2147483648 
```

后者不会按预期工作。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-04T20:50:19.903

编译器（VC2012）提升为可以保存值的“最小”整数。在第一种情况下，`signed int`(and `long int`) 不能（在应用符号之前），但是`unsigned int`可以：**`2147483648`有`unsigned int`**???? 类型。在第二个中，您`int`从`unsigned`.

```
const bool i= (-2147483648 > 0) ;  //   --> true 
```

> 警告 C4146：一元减号运算符应用于**无符号类型**，结果仍然**无符号**

以下是相关的“好奇心”：

```
const bool b= (-2147483647      > 0) ; //  false
const bool i= (-2147483648      > 0) ; //  true : result still unsigned
const bool c= ( INT_MIN-1       > 0) ; //  true :'-' int constant overflow
const bool f= ( 2147483647      > 0) ; //  true
const bool g= ( 2147483648      > 0) ; //  true
const bool d= ( INT_MAX+1       > 0) ; //  false:'+' int constant overflow
const bool j= ( int(-2147483648)> 0) ; //  false : 
const bool h= ( int(2147483648) > 0) ; //  false
const bool m= (-2147483648L     > 0) ; //  true 
const bool o= (-2147483648LL    > 0) ; //  false 
```

[C++11 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)：

> 2.14.2 整数文字 [lex.icon]

…

> 整数文字是没有句点或指数部分的数字序列。整数文字可能有一个指定其基数的前缀和一个指定其类型的后缀。

…

> 整数文字的类型是可以表示其值的相应列表中的第一个。

![在此处输入图像描述](../Images/6310e5dd0ce2673c30a74a45f2aab710.png)

> 如果整数文字不能由其列表中的任何类型表示，并且扩展整数类型 (3.9.1) 可以表示其值，则它可能具有该扩展整数类型。如果文字列表中的所有类型都带有符号，则扩展整数类型应带有符号。如果文字列表中的所有类型都是无符号的，则扩展整数类型应该是无符号的。如果列表同时包含有符号和无符号类型，则扩展整数类型可能是有符号或无符号的。如果程序的一个翻译单元包含不能由任何允许的类型表示的整数文字，则该程序是格式错误的。

这些是标准中整数的提升规则。

> **4.5 整体促销**[conv.prom]
> 
> 一个除`bool`, `char16_t`,之外的整数类型的纯右值`char32_t`，或者 `wchar_t`其整数转换等级 (4.13) 小于 int 等级的纯右值，`int`如果`int`可以表示源类型的所有值，则可以转换为类型的纯右值；否则，源纯右值可以转换为类型的纯右值**`unsigned int`。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-05T02:42:28.373

简而言之，`2147483648`溢出到`-2147483648`，并且`(-(-2147483648) > 0)`是`true`。

[这](http://www.wolframalpha.com/input/?i=2147483648+to+base+2)就是`2147483648`二进制的样子。

此外，在有符号二进制计算的情况下，最高有效位（“MSB”）是符号位。[这个问题](https://stackoverflow.com/questions/1049722/what-is-2s-complement)可能有助于解释原因。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T18:21:40.420

因为`-2147483648`实际上是对它应用`2147483648`了否定 ( `-`)，所以这个数字不是你所期望的。它实际上相当于这个伪代码：`operator -(2147483648)`

现在，假设您的编译器`sizeof(int)`等于`4`并`CHAR_BIT`定义为`8`，这将使溢出成为整数 ( )`2147483648`的最大有符号值。`2147483647`那么最大加一是多少呢？让我们用一个 4 位、2 秒的补码整数来解决这个问题。

等待！8 溢出整数！我们做什么？使用其无符号表示`1000`并将这些位解释为有符号整数。这种表示使我们`-8`可以应用 2s 补码否定导致`8`，众所周知，它大于`0`。

这就是为什么`<limits.h>`( 和`<climits>`) 通常定义`INT_MIN`为`((-2147483647) - 1)`- 以便最大有符号整数 ( `0x7FFFFFFF`) 被取反 ( `0x80000001`)，然后递减 ( `0x80000000`)。

# algorithm - 我需要一个算法来查看 3 个列表并找到唯一的项目

> ID：14695121
> 
> 赞同：0
> 
> 时间：2013-02-04T20:34:13.333
> 
> 标签：algorithm, list, language-agnostic

我一直在挠头几个小时，可以使用一些帮助......

我有 3 个对象列表。每个列表可以包含相同的对象（但不是必须的）。我想要一种算法来测试每个列表中是否至少有一个唯一对象。

编辑：一个项目只能在每个列表中出现一次，但可以在多个列表中。

编辑：有一个伪第 4 个列表 - 3 个列表中的每个列表都有 1 个项目。那是必须包含唯一性的列表。总共可能有 3 个项目，每个列表中的每个项目。这应该返回 true，因为第 4 个列表可能包含唯一值。

编辑：这是我到目前为止想出的，但我不知道这是多么有效，或者即使它有效！

```
bool Uniques( List<Item> list1, List<Item> list2, List<Item> list3 ) {
    foreach( Item item1 in list1 ) {
        foreach( Item item2 in list2 ) {
            if ( item1!=item2 ) {
                foreach( Item item3 in list3 ) {
                    if ( item3!=item1 && item3!=item2 ) return true;
                }
            }
        }
    }
    return false;
} 
```

编辑：为了说明，这里有一个例子。
从颜色的整体列表中：红色、绿色、蓝色、黄色、青色、洋红色、白色、黑色、橙色、紫色。

列表 1 包含红色、绿色
列表 2 包含红色
列表 3 包含蓝色、橙色
结果为 FALSE

列表 1 包含红色、绿色
列表 2 包含红色、绿色
列表 3 包含红色、绿色
结果为 FALSE

列表 1 包含红色、绿色
列表 2 包含黄色
列表 3 包含红色、绿色
结果为 TRUE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:20:47.437

**编辑**：由于对原始问题的误解，我基本上改变了我的答案。

既然我们知道每个列表元素在其列表中都是唯一的，那么我们可以使用以下算法：

```
Compute the length of the three lists.
Sort these lengths into a tuple (l_1,l_2,l_3) in ascending order.

If l_1 >= 1 and l_2 >= 2 and l_3 >= 3, then answer 'YES'; 
else, 
    if among all possible combinations there is a valid one, 
    then, return 'YES', 
    otherwise return 'NO'. 
```

如果您事先知道列表的长度（否则它是线性的），则此算法需要**恒定的时间。**请注意，当您检查所有可能的组合时，您检查的三元组少于 6 个。

现在，这个工作的证明非常简单：`x_1`从长度列表中`l_1`选择一个元素，然后`x_2`从长度列表中选择一个元素`l_2`，不同于`x_1`（这是可能的`l_2 >= 2`）。`x_3`现在，从长度列表中选择一个与和`l_3`不同的元素。同样，您可以选择这样一个元素，因为该列表至少包含三个不同的元素。`x_1``x_2`

我希望现在我真的解决了你所要求的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:09:24.470

线性时间：使用哈希。首先将列表 1 的每个 elt 散列为三个布尔值的数组，将第一个布尔值设置为 true。对列表 2 和 3 重复此操作。瞧——您有一个散列，其键是元素，其值指示每个元素属于哪个列表。

然后，要查看每个列表中是否至少有一个唯一项，循环遍历哈希值，检查三个布尔值中只有一个设置为 true 的数组。例如，如果一个值为 [true, true, false] 你忽略它，但如果一个值为 [false, true, false] 那么你知道第二个列表有一个唯一的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:07:51.767

```
set counter = 0
create empty list U
for each list L
    create D, a duplicate of list L
    for each list P, where P != L
        remove all items in P from D

    add all items in D to U
    if D is not empty, increment counter

if counter == number of lists, return U, else return empty list 
```

当且仅当每个列表包含不在任何其他列表中的值时，返回的列表才会为非空。如果它是空的，它就是这样的非共享值的集合。

# java - 实现 JXTreeTable

> ID：14695126
> 
> 赞同：0
> 
> 时间：2013-02-04T20:34:33.243
> 
> 标签：java, swing, swingx, jxtreetable

我正在尝试理解 JXTreeTable ，因为我参考了一个站点来进行简单的 JXTreeTable 实现：下面是修改后的代码（我从一个站点中选择的）

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Toolkit;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import org.jdesktop.swingx.JXTreeTable;

import org.jdesktop.swingx.treetable.AbstractTreeTableModel;

class MyTreeTableModel extends AbstractTreeTableModel {

    private MyTreeNode myroot;

    public MyTreeTableModel() {
        myroot = new MyTreeNode("root", "Root of the tree", "zcxz");
        ims.CPool.configureConnPool();
        Connection con = CPool.getConnection();
        try {
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("select distinct category from inventory");
            Statement s2 = con.createStatement();
            ResultSet r2 = s2.executeQuery(" select category,name,supplier from inventory");
            while (rs.next()) {
                MyTreeNode cat = new MyTreeNode(rs.getString(1), " ", " ");
                myroot.getChildren().add(cat);

            }

               while(r2.next())
                  {
                      System.out.println(r2.getString(1)+"bnnbnb");
                      if(this.getValueAt( r2.getObject(1),0).equals(r2.getObject(1))==true)
                      {                              System.out.println("zxccx");

                      }
                  }
        } catch (Exception x) {
            System.out.println(x.getMessage());
            x.printStackTrace();
        }

    }

    @Override
    public int getColumnCount() {
        return 3;
    }

    @Override
    public String getColumnName(int column) {
        switch (column) {
            case 0:
                return "Name";
            case 1:
                return "Supplier";
            case 2:
                return "Category";
            case 3:
                return "Size";

            default:
                return "Unknown";
        }
    }

    @Override
    public Object getValueAt(Object node, int column) {
        System.out.println("getValueAt: " + node + ", " + column);
        MyTreeNode treenode = (MyTreeNode) node;
        switch (column) {
            case 0:
                return treenode.getName();
            case 1:
                return treenode.getDescription();
            case 2:
                return treenode.getCategory();
            case 3:
                return treenode.getChildren().size();
            default:
                return "Unknown";
        }
    }

    @Override
    public Object getChild(Object node, int index) {
        MyTreeNode treenode = (MyTreeNode) node;
        return treenode.getChildren().get(index);
    }

    @Override
    public int getChildCount(Object parent) {
        MyTreeNode treenode = (MyTreeNode) parent;
        return treenode.getChildren().size();
    }

    @Override
    public int getIndexOfChild(Object parent, Object child) {
        MyTreeNode treenode = (MyTreeNode) parent;
        for (int i = 0; i > treenode.getChildren().size(); i++) {
            if (treenode.getChildren().get(i) == child) {
                return i;
            }
        }

        // TODO Auto-generated method stub
        return 0;
    }

    public boolean isLeaf(Object node) {
        MyTreeNode treenode = (MyTreeNode) node;
        if (treenode.getChildren().size() > 0) {
            return false;
        }
        return true;
    }

    @Override
    public Object getRoot() {
        return myroot;
    }
}

class MyTreeNode {

    private String name;
    private String description;
    private String category;
    private List<MyTreeNode> children = new ArrayList<MyTreeNode>();

    public MyTreeNode() {
    }

    public MyTreeNode(String name, String description, String categ) {
        this.name = name;
        this.category = categ;
        this.description = description;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(String name) {
        this.category = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public List<MyTreeNode> getChildren() {
        return children;
    }

    public String toString() {
        return "MyTreeNode: " + name + ", " + description + " ," + category;
    }
}

public class TT extends JFrame {

    private JTabbedPane tabs = new JTabbedPane();
    private MyTreeTableModel treeTableModel = new MyTreeTableModel();
    private JXTreeTable treeTable = new JXTreeTable(treeTableModel);

    public TT() {
        super("SwingX Examples");

        // Build the tree table panel
        JPanel treeTablePanel = new JPanel(new BorderLayout());
        treeTablePanel.add(new JScrollPane(treeTable));
        tabs.addTab("JXTreeTable", treeTablePanel);

        // Add the tabs to the JFrame
        add(tabs);

        setSize(1024, 768);
        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
        setLocation(d.width / 2 - 512, d.height / 2 - 384);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        AppStarter starter = new AppStarter(args);
        SwingUtilities.invokeLater(starter);
    }
}

class AppStarter extends Thread {

    private String[] args;

    public AppStarter(String[] args) {
        this.args = args;
    }

    public void run() {
        TT example = new TT();
    }
} 
```

在运行代码时，我得到以下异常：

```
at ims.MyTreeTableModel.getValueAt(TT.java:85)
    at ims.MyTreeTableModel.<init>(TT.java:41)
    at ims.TT.<init>(TT.java:206)
    at ims.AppStarter.run(TT.java:247)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 
```

, Inevtory Items 有子类别，如查询中所示（我想生成一个 JXTreeTable，类别为 parentNodes，属于类别的 Inventory 项目为子元素）。请帮助，因为我是 JXTreeTables 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T12:24:18.857

```
class TTM extends AbstractTreeTableModel {

    TTN root;
    String[] header;

    public TTM(TTN root, String[] header) {
        this.root = root;
        this.header= header;
    }

    @Override
    public int getColumnCount() {
        return header.length;
    }

    @Override
    public String getColumnName(int column) {
        return header[column];
    }

    @Override
    public Object getValueAt(Object node, int Column) {
        TTN treenode = (TTN) node;
        return treenode.GetValueAt(Column);
    }

    @Override
    public Object getChild(Object node, int index) {
        TTN treenode = (TTN) node;
        return treenode.GetChildren().get(index);
    }

    @Override
    public int getChildCount(Object parent) {
        TTN treenode = (TTN) parent;
        return treenode.GetChildren().size();
    }

    @Override
    public int getIndexOfChild(Object parent, Object child) {
        TTN treenode = (TTN) parent;
        for (int i = 0; i > treenode.GetChildren().size(); i++) {
            if (treenode.GetChildren().get(i) == child) {
                return i;
            }
        }
        return 0;
    }

    @Override
    public boolean isLeaf(Object node) {
        TTN treenode = (TTN) node;
        return treenode.GetChildren().size() <= 0;
    }

    @Override
    public Object getRoot() {
        return root;
    }
}

Class TTN extends AbstractMutableTreeTableNode {

    Object[] Row;

    public TTN() {
    }

    public TTN(Object[] Row) {
        this.Row = Row;
    }

    public Object GetValueAt(int Column) {
        return this.Row[Column];
    }

    public ArrayList<TTN> GetChildren() {
        return children;
    }

    @Override
    public String toString() {
        return this.Row[0].toString();
    }

    @Override
    public int getColumnCount() {
        return Row.length;
    }

    @Override
    public Object getValueAt(int column) {
        return Row[column];
    }
} 
```

我在另一个网站上找到了上述课程，然后对其进行了修改。您可以将 TTN (TreeTableNode) 初始化为根节点。`TableModel`然后，您可以`jXTreeTable1`使用 的匿名新实例设置`TreeTableModel`。传入你初始化的根节点，以及一个`String`数组作为标题。

例子：

```
TTN root = new TTN(new Object[]{"abc", "def"});
jXTreeTable1.setTreeTableModel(new TTM(root, new String[]{"Name", "Serial", "Date added", "Limit", "Transactions type", "Type", "ID"})); 
```

添加新行：

```
Node.GetChildren().add(new TTN(new Object[]{"abc", "def"})); 
```

# websocket - VNC 服务器 -> websockify -> noVNC 问题

> ID：14695127
> 
> 赞同：2
> 
> 时间：2013-02-04T20:34:34.520
> 
> 标签：websocket, vnc-server, vnc-viewer

您好，我在使用 websockify 时遇到了一点问题。

我为 Windows 制作了可执行文件，然后我在 cmd 中启动了我的 websockify：

c:\web\websockify.exe 192.168.1.70:5901 192.168.1.70:5900

警告：没有“资源”模块，守护进程较慢或禁用

WebSocket 服务器设置：

*   收听 192.168.1.70:5901

*   闪存安全策略服务器

*   不支持 SSL/TLS（无证书文件）

*   从 192.168.1.70:5901 代理到 192.168.1.70:5900

到目前为止一切都很好。在后台，VNC 服务器在端口 5900 的同一台计算机上运行。问题是我需要使用 websockify 才能在本地网络中的另一台计算机上使用 novnc。

我在最新的 XAMPP 服务器（apache 2.2）上安装了最新的 novnc。当我启动 vnc.html 时，它会询问服务器、端口、密码。我输入它们并按连接。我在 websockify 端收到一个错误：

警告：没有“资源”模块，守护进程较慢或禁用

用法：

```
websockify.exe [options] [source_addr:]source_port target_addr:target_port

websockify.exe [options] [source_addr:]source_port -- WRAP_COMMAND_LINE 
```

websockify.exe：错误：没有这样的选项：--multiprocessing-fork

我无法使用 noVNC 连接。我在互联网上搜索以找到解决方案，但没有找到。

有人可以帮我把这些应用程序一起运行吗？

或者是否有一些其他应用程序对 Windows 更友好的解决方案可以执行 websockify 的功能？

br

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:11:27.143

您是否遵循本指南？[https://github.com/kanaka/websockify/wiki/Compiling-Websockify-as-Windows-Executable](https://github.com/kanaka/websockify/wiki/Compiling-Websockify-as-Windows-Executable)

Websockify 使用 python 多处理模块。这个模块在 Windows 上是有问题的，尤其是旧版本的 python。您可以尝试 python 3.2 或更高版本，看看是否有更多成功，但不能保证。Websockify 仅在 Linux 上开发和测试。

曾经有一个用于 Windows 的预构建版本的 Websockify，至少可以在没有多处理（一次一个客户端）的情况下工作，但是，github 放弃了对下载的支持，因此这个构建不再可用。

**免责声明**：我制作了 websockify。

# mysql - MySQL 选择连接顺序

> ID：14695129
> 
> 赞同：0
> 
> 时间：2013-02-04T20:34:41.243
> 
> 标签：mysql, join

我有两张桌子：

`tb_user`使用这些字段： `userId`、`lastName`和`firstName`其他字段。

`tb_application`使用以下字段： `ApplicationID`、`ApplicantID`、`applicationType`、`applicationStatus`和`applicationCycle`其他字段。

使用这个语句，我得到了按 ApplicationID 排序的应用程序的记录集。

```
SELECT tb_application.ApplicationID, tb_application.ApplicantID, 
 tb_application.applicationType, tb_application.applicationCycle, 
 tb_application.applicationStatus 
WHERE applicationCycle = '10' and applicationType ='5' and and applicationStatus ='1' 
ORDER BY tb_application.ApplicationID 
```

然后，我使用应用程序表中的字段`ApplicantID`从用户表中检索名称。

但我需要的是按姓氏排序的应用程序列表。

在收到 Raphael 的答案并感谢他的勤奋并向我介绍 MySQL 中“JOIN”指令的强大功能后，我修改了他的答案，对我有用的是：

```
SELECT * FROM tb_application 
    INNER JOIN tb_user ON tb_application.ApplicantID=tb_user.userId 
        WHERE applicationCycle = '10' 
        and applicationType='5' 
    and applicationStatus='1' 
        ORDER BY lastName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:38:04.950

```
SELECT 
 --u.lastName, 
  tb_t.ApplicationID, 
  t.ApplicantID, 
  t.applicationType, 
  t.applicationCycle, 
  t.applicationStatus
FROM tb_application t
INNER JOIN tb_user u 
   ON t.ApplicantID = u.userId
WHERE 
 applicationCycle = '10' 
AND
 applicationType ='5' 
AND
 applicationStatus ='1' 
ORDER BY u.lastName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:40:19.743

您可以用逗号分隔多个字段以进行排序，如下所示

```
ORDER BY tb_application.ApplicationID, tb_user.lastName 
```

这意味着它将首先排序在 之后`tb_application.ApplicationID`，并且在该范围内它将排序在之后`tb_user.lastName`

# vbscript - WMIService 文件结果有时会给出“对象不支持此属性”

> ID：14695133
> 
> 赞同：0
> 
> 时间：2013-02-04T20:34:57.300
> 
> 标签：vbscript, wmi-query

我正在尝试修改计算机上的所有快捷方式。该脚本工作正常，但时不时会抛出一个错误，即对象的 .Target 属性不可用。由于我的查询只查找扩展名为 .lnk 的文件，因此绝不应该是这种情况。（有关此错误的更多详细信息，您可以在此处查看 MS 文档：[http](http://technet.microsoft.com/en-us/library/ff406382.aspx#H25) ://technet.microsoft.com/en-us/library/ff406382.aspx#H25 ）

有问题的脚本：

```
strComputer = "."

Set wshShell    = WScript.CreateObject("WScript.Shell")

Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colFiles = objWMIService.ExecQuery("Select * from CIM_DataFile WHERE Extension = 'lnk' AND Drive = 'C:'")

For Each objFile in colFiles

    If InStr(1, ucase(objFile.Target), "METER.EXE") Then
        Set objShortcut = wshShell.CreateShortcut(objFile.Name)
                Wscript.Echo "FIXING: " & objShortcut.TargetPath
        End If
Next 
```

好奇的：这个脚本的目的是修复我们实验室机器上的几十个快捷方式，这些快捷方式以前被修改为支持“本土”许可/计量应用程序。在所有情况下，原始 .EXE 路径都已从目标中删除，但仍可以从快捷方式的图标路径中找到。

谢谢

编辑：完整的错误信息。它似乎在重新启动后出现得更频繁，但在我运行脚本 2-3 次后就不会出现。

> Microsoft VBScript 运行时错误：对象不支持此属性或方法：'objFile.Target'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:41:45.583

[`CIM_DataFile`](http://msdn.microsoft.com/en-us/library/aa387236.aspx)没有`Target`财产。

我相信您打算[`Win32_ShortcutFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394438%28v=vs.85%29.aspx)改用。

# python - 如何使用 Python 将带引号和换行符的字符串插入 sqlite db？

> ID：14695134
> 
> 赞同：9
> 
> 时间：2013-02-04T20:34:59.710
> 
> 标签：python, mysql, sql, database, sqlite

我正在尝试将从文件中读取的字符串插入到`sqlite`Python 中的数据库中。字符串具有空格（换行符、制表符和空格），并且还具有单引号或双引号的外观。这是我尝试这样做的方法：

```
import sqlite3
conn = sqlite3.connect('example.db')
c = conn.cursor()

# Create table
c.execute('''CREATE TABLE test
             (a text, b text)''')

f = open("foo", "w")
f.write("hello\n\'world\'\n")
f.close()

testfield = open("foo").read()

# Insert a row of data
c.execute("INSERT INTO test VALUES ('%s', 'bar')" %(testfield))

# Save (commit) the changes
conn.commit() 
```

我发现这失败并出现错误：

```
 c.execute("INSERT INTO test VALUES ('%s', 'bar')" %(testfield))
sqlite3.OperationalError: near "world": syntax error 
```

我怎样才能做到这一点？在插入数据库之前是否需要对字符串进行转义，如果需要，如何转义？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T20:36:20.550

您使用 SQL 参数而不是字符串格式：

```
c.execute("INSERT INTO test VALUES (?, 'bar')", (testfield,)) 
```

使用 SQL 参数时，您可以让数据库库处理引用，甚至更好的是，让数据库优化查询并将优化的查询计划重用于同一基本查询的多次执行（使用不同的参数）。

最后但并非最不重要的一点是，您可以更好地防御 SQL 注入攻击，因为数据库库最了解如何逃避危险的类似 SQL 的值。

引用[sqlite3 文档](http://docs.python.org/2/library/sqlite3.html)：

> 通常，您的 SQL 操作将需要使用 Python 变量中的值。你不应该使用 Python 的字符串操作来组装你的查询，因为这样做是不安全的；它使您的程序容易受到 SQL 注入攻击（有关可能出错的幽默示例，请参见[http://xkcd.com/327/ ）。](http://xkcd.com/327/)
> 
> 相反，使用 DB-API 的参数替换。将`?`作为占位符放在要使用值的任何位置，然后提供一个值元组作为游标`execute()`方法的第二个参数。

# asp.net-mvc - asp.net - 是否将电话号码显示为链接

> ID：14695137
> 
> 赞同：0
> 
> 时间：2013-02-04T20:35:01.347
> 
> 标签：asp.net-mvc, jquery-mobile, razor, asp.net-mvc-4

我有一个真正简单的 ASP.NET MVC4 应用程序，它使用 JQuery Mobile 并显示用户列表及其信息。模型外的 3 个字段是电话号码。这些字段可以包含一个空值，所以我想链接电话号码，`<a href="tel:"`如果它存在，如果不存在，什么都没有。我想出了这个：

```
<div data-role="fieldcontain">
    <label for="textinput1"><strong>Office Phone:</strong></label>
    if(!@String.IsNullOrEmpty(user.OfficePhone)){
        <a href="tel:@user.OfficePhone"><input name="" id="textinput1" value="@user.OfficePhone" type="text" readonly="true"/></a>
    } else {
        <input name="" id="textinput" value="@user.OfficePhone" type="text" readonly="true"/>
    }
</div> 
```

但是会认为有一种更清洁，更好的方法来做到这一点。还有其他选择吗，或者我是否坚持`<input>`在两种情况下都写出两次标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:45:49.050

这是未经测试的代码。希望它能传达这个想法：

```
@{string pref="tel:"}
@if(String.IsNullOrEmpty(user.OfficePhone))
{pref="";
}

<div data-role="fieldcontain">
    <label for="textinput1"><strong>Office Phone:</strong></label>
        <a href="@(pref):@(user.OfficePhone)"><input name="" id="textinput1" value="@(pref)@(user.OfficePhone)" type="text" readonly="true"/></a>
</div> 
```

# sql - 如何对存储在 SQL 中的附近经纬度位置进行分组

> ID：14695138
> 
> 赞同：10
> 
> 时间：2013-02-04T20:35:07.773
> 
> 标签：sql, sqlite, machine-learning, cluster-analysis, data-mining

我试图分析英国自行车事故的数据，以找到统计黑点。这是来自另一个网站的数据示例。[http://www.cycleinjury.co.uk/map](http://www.cycleinjury.co.uk/map)

我目前正在使用 SQLite 存储约 100k 经纬度位置。我想将附近的位置组合在一起。此任务称为[聚类分析](http://en.wikipedia.org/wiki/Cluster_analysis)。

我想通过忽略孤立事件来简化数据集，而只显示在一个小区域内发生了不止一次事故的集群的起源。

我需要克服 3 个问题。

1.  **性能**- 如何确保快速找到附近的点。例如，我应该使用[SQLite 的](http://www.sqlite.org/rtree.html)R [-Tree](http://en.wikipedia.org/wiki/R-tree)实现吗？

2.  **链**- 如何避免拾取附近点的链？

3.  **密度**- 如何考虑循环人口密度？伦敦骑自行车的人比布里斯托尔的人口密度要高得多，因此伦敦似乎有更多的后备站。

我想避免这样的“连锁”场景：

![在此处输入图像描述](../Images/84f248bd94554ca0279dcf6d71ea63b0.png)

相反，我想找到集群：

![在此处输入图像描述](../Images/1c8b316404c0bca52accf98e307c8ed8.png)

伦敦截图（我手绘了一些集群）......

![在此处输入图像描述](../Images/25229f7b51e892c73174ba6001ecf379.png)

布里斯托尔屏幕截图 - 密度低得多 - 如果不考虑相对密度，在该区域运行的相同程序可能找不到任何黑点。

![在此处输入图像描述](../Images/404522296dad34f800df2072bd6fc608.png)

任何指针都会很棒！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T08:08:56.383

好吧，您的问题描述与[DBSCAN 聚类算法（维基百科）](https://en.wikipedia.org/wiki/DBSCAN)*完全*一样。它避免了连锁效应，因为它要求它们至少是 minPts 对象。

至于密度的差异，这就是[OPTICS（维基百科）](https://en.wikipedia.org/wiki/OPTICS_algorithm)应该解决的问题。不过，您可能需要使用不同的方式来提取集群。

好吧，好吧，也许不是 100% - 你可能想要有单个热点，而不是“密度连接”的区域。在考虑 OPTICS 图时，我认为您只对小而深的山谷感兴趣，而不是对大山谷感兴趣。您可能可以使用 OPTICS 扫描“至少 10 起事故”的局部最小值。

**更新：**感谢指向数据集的指针。这真的很有趣。所以我没有将其过滤到骑自行车的人，但现在我正在使用所有 120 万条带坐标的记录。我已经将它们输入[ELKI](http://elki.dbs.ifi.lmu.de/)进行分析，因为它非常快，而且它实际上可以使用大地距离（即纬度和经度）而不是欧几里得距离，以避免偏差。*我已经启用了带有 STR批量*加载的 R*-tree 索引，因为这应该有助于大大降低运行时间*. 我正在使用 Xi=.1、epsilon=1 (km) 和 minPts=100（仅寻找大型集群）运行 OPTICS。运行时间约为 11 分钟，还不错。OPTICS 图当然是 120 万像素宽，所以它不再适合完全可视化。考虑到巨大的阈值，它确定了 18 个集群，每个集群有 100-200 个实例。接下来我将尝试可视化这些集群。但绝对要为您的实验尝试较低的 minPts。*

 *所以这里是发现的主要集群：

*   51.690713 -0.045545 在伦敦以北的 A10 上的交叉口，刚刚经过 M25
*   51.477804 -0.404462 “货车环形交叉路口”
*   51.690713 -0.045545 "Halton Cross Roundabout" 或其南边的路口
*   51.436707 -0.499702 A30 和 A308 污渍旁通叉
*   53.556186 -2.489059 M61 出口到 A58，曼彻斯特西北
*   55.170139 -1.53​​2917 A189，北西顿环岛
*   55.067229 -1.577334 A189 和 A19，就在这个南边，一个四车道环形交叉路口。
*   51.570594 -0.096159 庄园，皮卡迪利线
*   53.477601 -1.152863 M18 和 A1(M)
*   53.091369 -0.789684 A1、A17 和 A46，A1 两侧都有环形交叉路口的复杂结构。
*   52.949281 -0.97896 A52 和 A46
*   50.659544 -1.15251 怀特岛，桑当。
*   ...

请注意，这些只是从集群中获取的随机点。计算例如集群中心和半径可能是明智的，但我没有这样做。我只是想看看那个数据集，它看起来很有趣。

下面是一些截图，minPts=50，epsilon=0.1，xi=0.02：

![伦敦市中心的一些集群](../Images/f1f92281fe32a34317f93b8649d9cdf6.png)

请注意，使用 OPTICS，集群可以是分层的。这是一个细节：

![嵌套集群 - OPTICS 产生层次结构](../Images/c5acea2c1fa5066ebcc5906a5c22902c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:47:34.373

首先，您的示例非常具有误导性。您有两组不同的数据，并且您无法控制数据。如果它出现在一个链条中，那么您将获得一个链条。

这个问题并不完全适合数据库。您必须编写代码或找到在您的平台上实现此算法的包。

有许多不同的聚类算法。一个，k-means，是一种迭代算法，您可以在其中寻找固定数量的集群。k-means 需要对数据进行几次完整的扫描，瞧，你有你的集群了。索引并不是特别有用。

另一个通常适用于稍微较小的数据集的方法是层次聚类——将两个最接近的东西放在一起，然后构建聚类。索引在这里可能会有所帮助。

不过，我建议您仔细阅读[kdnuggets 之](http://www.kdnuggets.com)类的网站，以了解哪些软件（免费和其他）可用。*

# javascript - 选择导航兼容性

> ID：14695145
> 
> 赞同：0
> 
> 时间：2013-02-04T20:35:24.077
> 
> 标签：javascript, jquery, html

我正在使用`select`如下导航，它在桌面浏览器上运行良好：

```
<select onchange="window.location=this.value;"> 
```

但这在 Mobile Safari 中不起作用，因此`onblur`需要。

是否存在`on`交叉兼容的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:59:57.297

```
$("select").on('change', function () { $(this).trigger('blur'); })
   .on('blur', function () {
       window.location = $(this).val();
   }); 
```

# linux - 使用 konsole 通过 Perl 模拟终端

> ID：14695147
> 
> 赞同：1
> 
> 时间：2013-02-04T20:35:28.760
> 
> 标签：linux, perl, raspberry-pi, konsole

使用此命令时遇到问题

```
system("konsole --new-tab --workdir<dir here> -e perlprogram.pl &"); 
```

它打开 perlprogram.pl，其中有：

```
system("mpg321 song.mp3"); 
```

我想这样做是因为 mpg321 停止了主要的 perl 脚本。所以我想通过在另一个终端窗口中打开它就可以了。但是当我运行第一个脚本时，它所做的只是打开一个新选项卡并且什么都不做。

我是否正确使用了 konsole？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:28:30.600

> 我使用`konsole`正确吗？

可能，没有。但这取决于。这个问题可以分解为两个问题：

1.  如何实现并发，以使我的程序在执行外部命令时不会停止
2.  我如何使用`konsole`.

### 1.并发

有多种方法可以做到这一点。以`fork||exec('new-program')`、 to`system 'new-program &'`或什至 开头`open`。

`system`将调用您操作系统的标准 shell，并执行您提供的命令。如果您提供多个参数，则不会进行 shell 转义，并`exec`直接编辑指定的程序。（`exec`到目前为止，该函数具有相同的接口）。`system`返回一个数字，指定命令是否正确运行：

```
system("my-command", "arg1") == 0
  or die "failed my-command: $?"; 
```

请参阅`perlfunc -f system`有关此返回值含义的完整信息……</p>

如果`exec`成功，则永远不会返回，但会将您的进程转变为执行新程序。

`fork`将您的进程一分为二，并将子进程和进程作为相等的副本执行。它们*仅*在返回值上有所不同`fork`：父母获得孩子的PID；孩子得了零。所以下面异步执行一个命令，让你的主脚本执行没有进一步的延迟。

```
my @command = ("mpg321", "song.mp3");
fork or do {
  # here we are in the child
  local $SIG{CHLD} = 'IGNORE'; # don't pester us with zombies
  # set up environment, especially: silence the child. Skip if program is well-behaved.
  open STDIN, "<", "/dev/null" or die "Can't redirect STDIN";
  open STDOUT, ">", "/dev/null" or die "Can't redirect STDOUT";
  exec {$command[0]} @command;
  # won't ever be executed on success
  die qq[Couldn't execute "@command"];
}; 
```

上述过程有效地守护子进程（在没有 tty 的情况下运行）。

### 2\. 控制台

该程序的命令行界面很糟糕，当我使用任何参数运行它时，它会产生一半的错误。

但是，您的命令（加上一个工作目录）实际上应该可以工作。尾随 & 号不是必需的，因为`konsole`命令会立即返回。就像是

```
# because I `say` hello, I can be certain that this actually does something.
konsole --workdir ~/wherever/ --new-tab -e perl -E 'say "hello"; <>' 
```

对我来说很好（打开一个新选项卡，显示“你好”，并在我按 Enter 时关闭）。最后的 readline 保持标签打开，直到我关闭它。您可以保持选项卡打开，直到`-e`通过`--hold`. 这使您可以看到任何会消失的错误消息。

# javascript - 根据一个值进行 x 次计算

> ID：14695148
> 
> 赞同：0
> 
> 时间：2013-02-04T20:35:29.760
> 
> 标签：javascript, math, loops, formulas

```
Math.floor((1600 * Math.pow(1.4, 19)));  // = 956208 
```

我在做一个游戏的粉丝网站，我试图计算你需要多少法力+技能上面的公式从 19-20 技能计算

但我需要循环计算 x 次数，这样你就可以从 x （上面计算中的 19）计算到 y 需要每次提高 x+1 直到它达到最终值 y 并将每个循环的答案加起来，比如以下

我有 2 个文本框，我从中获取值

956208+1338692+1874168+2623836+3673371+5142719 = 15608994 所以它最终会从 19 到 25 做类似的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:41:59.430

如果我正确理解了这个问题（有点不清楚......）你想要这样的东西。

```
var from = 19;
var to   = 25;
var totalMana = 0;

for (var i = from; i <= to; i++) {
  totalMana += Math.floor(1600 * Math.pow(1.4, i));
}

console.log(totalMana); // 22,808,801 
```

您只需从较低的值循环到较高的值，每次都评估您的公式并将其添加到在每次迭代中持续存在的累积变量中。

* * *

此外，正如您所知，您正在涉足微积分。你得到[一个有限级数的总和。](http://en.wikipedia.org/wiki/Series_%28mathematics%29)数学很有趣，即使你不知道你在做什么 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:09:50.447

把这个答案扔进去很有趣：

```
// generate an array with each value in the series, where callback evaluates
// the value at each step
Math.series = function(from, to, callback){
    var out = [];
    for (var i = from; i <= to; i++)
        out.push(callback.call(null, i));

    return out;
};

// add the things in an array.
Math.sum = function(arr){
    var sum = 0; 
    for (var i = 0; i < arr.length; i++)
        sum += +arr[i];

    return sum;
}; 
```

使用这些实用功能，您可以像这样以单行方式完成任务：

```
Math.sum(Math.series(19,25,function(i){return Math.floor(1600*Math.pow(1.4,i));})); 
```

# javascript - Javascript onclick 函数调用问题：不会传递字符串

> ID：14695149
> 
> 赞同：3
> 
> 时间：2013-02-04T20:35:34.247
> 
> 标签：javascript, html, web-applications

所以基本的纲要是我正在尝试创建一种基本的方法来标记我们的网络地图应用程序上的不适当内容。当用户单击某个点时，在为 webmap 的侧边栏动态创建内容的函数中，我有这段代码应该生成一个标志的图像。

当用户单击标志时，我想运行函数 flagContent 应该将 url 字符串传递给函数。在这个函数中，我稍后可以将它写入数据库（尽管我还没有做到这一点）。

以下是我一直在使用的一些代码片段：

1.这是生成标志图像的地方

```
content += "<p class='info'><img id='flag' onclick='flagContent(" + attachmentInfo.url + ")
'src='assets/flag.png' style='height:15px'>Flag as inappropriate...</p>"; 
```

1.  这是连接功能

    功能标志内容（imageUrl）{console.log（imageUrl）}

所以基本上 url 是一个字符串，我希望能够在 flagContent 函数中操作它。不幸的是，我无法让它工作。当我传递诸如*attachmentInfo.objectID*之类的数字参数时，我不会遇到同样的问题。

对于它的价值，我也得到了这个错误：

> Uncaught SyntaxError: Unexpected token :

任何帮助将不胜感激。让我知道是否有其他信息可以帮助解决此问题。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T20:39:58.930

我假设这`attachmentInfo.url`将返回一个 URL，它应该是一个字符串，只需要用引号括起来。由于您已经使用了这两种类型的引号，因此您必须转义一些引号。

```
content += "<p class='info'>";
content += "<img id='flag' onclick=\"flagContent('" + attachmentInfo.url + "')\" src='file.png'/>";
content += "Flag as inappropriate...";
content += "</p>"; 
```

这样做会使最终输出看起来像这样：

```
<p class='info'>
  <img id="flag" onclick="flagContent('http://example.com')" src='file.png'/>
  Flag as inappropriate...
</p> 
```

您遇到的问题是 URL 没有被引号包围，它看到`flagContent(http://example.com)`并且不知道如何处理那些不在字符串中的裸词。

# java - 在子类中引用抽象超类字段

> ID：14695151
> 
> 赞同：1
> 
> 时间：2013-02-04T20:35:39.530
> 
> 标签：java, inheritance, initialization

我有一个有变量的`abstract`超类。`protected String`它没有在超类中初始化。

我要做的就是初始化并在子类中使用它。所以，我有这样的事情：

```
 public class MySubclass extends MyAbstractSuperclass {        
        thing = "i'm a thing";
        [...]
    } 
```

看起来很简单，因为继承的重点是在不同的上下文中重用类及其字段。但这是错误的：`Syntax error on token "thing", VariableDeclaratorId expected after this token`.

我可以通过在子类初始化周围加上括号来编译它。我想知道的是为什么第一种方法是错误的，以及为什么括号可以解决它。谢谢你的帮助。

编辑：我很欣赏我可以通过使用构造函数来解决这个问题的提示。但是，我仍然很好奇以这种方式使用超类字段实际上有什么问题，因为在我看来这很直观。而且，为什么大括号会修复它，在循环结构之外用大括号包围语句到底意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:37:01.663

这不是 Scala，您必须编写一个显式构造函数：

```
public class MySubclass extends MyAbstractSuperclass {        
    public MySubclass() {
        thing = "i'm a thing";
        [...]
    }
} 
```

或使用带参数的构造函数：

```
public abstract class MyAbstractSuperclass {

    protected final String thing;

    protected MyAbstractSuperclass(String thing) {
        this.thing = thing;
    }

}

public class MySubclass extends MyAbstractSuperclass {
    public MySubclass() {
        super("i'm a thing");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:46:50.393

> 我想知道的是为什么第一种方法是错误的，以及为什么括号可以解决它。谢谢你的帮助。

```
public class MySubclass extends MyAbstractSuperclass {        
    thing = "i'm a thing";
    [...]
} 
```

你尝试在这里做一个语句，将变量的值设置`thing`为文本。你不能在这里做声明，你只能在这里做变量声明。

```
public class MySubclass extends MyAbstractSuperclass { 
    {       
        thing = "i'm a thing";
    }
    [...]
} 
```

现在，您有一个初始化程序块，它作为语句执行（在构造函数之前）。因此，您可以访问`thing`，因为可见性受到保护。例如，请参见此处：[http ://docs.oracle.com/javase/tutorial/java/javaOO/initial.html](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:38:21.967

```
public class MySubclass extends MyAbstractSuperclass {        

        public MySubclass(){
         super.thing= "i'm a thing";
         }
    } 
```

# wcf - 在 WCF 测试客户端 (WcfTestClient.exe) 中按字母顺序列出服务操作

> ID：14695156
> 
> 赞同：7
> 
> 时间：2013-02-04T20:35:55.747
> 
> 标签：wcf, wcftestclient

我经常使用 WCF 测试客户端。不幸的是，这个工具没有按字母顺序排列，也没有按“出现顺序”（在服务合同类中声明操作的顺序）。如果有很多，这使得很难找到具体的操作。

有没有办法强制 WCF 测试客户端按字母顺序排列操作？默认排序从何而来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T03:58:27.267

尽管似乎不可能按字母顺序排列操作，但我意识到 WCF 测试客户端具有内置的增量搜索。

如果您知道自己在寻找什么，这会有所帮助。

# c# - 实体框架代码优先，非空 setter 或 getter？

> ID：14695161
> 
> 赞同：9
> 
> 时间：2013-02-04T20:36:27.930
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用 EF Code First 项目，一切都很好。我有一个简单的类，客户。在我的客户类中，我有一个要加密的字段（是的，我知道我可以在数据库级别加密，但要求我在域/代码级别进行加密），所以我希望我可以执行以下操作：

```
public class Customer
{
    public int CustomerID { get; set; }      
    public string FieldToEncrypt { get; set { _FieldToEncrypt = MyEncryptionFunction.Encrypt(); } }
} 
```

但是，我假设如果 setter 有定义，实体框架代码首先可能会在生成模式时忽略该属性。所以我的问题是，有没有办法使用提供的 getter/setter 执行 EF Code First，或者我应该将此功能移动到构造函数中？我应该覆盖保存上下文时发生的方法/事件之一吗？

编辑***** ** *** ** *** ** *** ** *** ** *** ******

作为说明，我使用 DataService 通过 OData 协议服务传输数据。这会自动生成插入/更新/选择方法。一些建议需要创建第二个属性，但 DataService 类似乎没有通过 NotMapped 属性。这给我之前的问题带来了一些麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:01:46.550

```
public class Customer 
{
    public int CustomerID { get; set; }        
    public string EncryptedField { get; private set; }

    [NotMapped]
    public string Field
    {
        get { return MyEncryptionFunction.Decrypt(EncryptedField); }
        set { EncryptedField = MyEncryptionFunction.Encrypt(value); }
    } 
} 
```

# c# - 找不到 System.Data.Entity.SqlServer.SqlProviderServices、EntityFramework.SqlServer

> ID：14695163
> 
> 赞同：21
> 
> 时间：2013-02-04T20:36:29.233
> 
> 标签：c#, entity-framework-6

我正在从 SqlConnection 构建 DbContext。当我使用它时，我收到以下错误：

> 'System.Data.SqlClient' ADO.NET 提供程序的实体框架提供程序类型 'System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'加载。

我正在使用 6.0.0-alpha2-11210。

我发现这很奇怪，因为我有一个对 Entity.SqlServer 的引用，并且我设法通过在查询之前放置以下代码行来“修复它”：

```
var patch_only = System.Data.Entity.SqlServer.SqlProviderServices.Instance; 
```

这是alpha版本的错误吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-29T12:53:28.177

您所做的会创建对 EntityFramework.SqlServer.dll 的引用。它确保使用您的数据访问程序集将此程序集复制到项目的 bin 文件夹中。

您可以通过在数据访问程序集中的某处添加类似以下内容来执行相同操作：

```
Type _Hack = typeof(System.Data.Entity.SqlServer.SqlProviderServices) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-26T18:06:59.127

我希望我不会迟到。我正在使用`ASP.NET MVC`4 并且`Entity Framework 6 alpha 3`遇到了类似的问题。

我的解决方案中有多个项目。2个主要项目是：

```
MyProject.Infrastructure.EntityFramework
MyProject.Web 
```

在第一个项目中，我将设置我所有的存储库，`DbContext`等等。在这个项目中，我有 2 个参考：

```
EntityFramework
EntityFramework.SqlServer 
```

第二个项目是我的网站。它使用第一个项目中的存储库来返回我的数据。例如：

```
private readonly IMyRepository myRepository;

public MyController(IMyRepository myRepository)
{
     this.myRepository = myRepository;
}

public ActionResult Details(int id)
{
     MyObject myObject = myRepository.FindById(id);

     return View();
} 
```

这就是我遇到问题的地方，打电话给`FindById`.

我所做的只是将以下引用添加到我的网站：

```
EntityFramework.SqlServer 
```

在我的 web.config 中：

```
<configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
     <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections> 
```

`system.webServer`在结束标签下方：

```
<entityFramework>
     <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
          <parameters>
               <parameter value="v11.0" />
          </parameters>
     </defaultConnectionFactory>
</entityFramework> 
```

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-06T13:59:01.917

**问题是“EntityFramework.SqlServer”参考。**

在我的项目中，当我在数据访问层中使用 NuGet 添加实体框架 6.0.1 时，由于客户端没有该引用，我在客户端遇到了同样的错误。

因此，我也通过将该引用添加到客户端来解决该问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-21T09:05:14.630

我在同一个解决方案中使用 EF 4 和 EF 6 两个不同的项目。

在使用 NuGet for EF 6.0 后，我的测试项目中删除了对 EF 4 的所有引用。我不得不再次从项目中删除 EF6，并为 EF4 添加了对 System.Data.Entity 的引用。

要在测试项目中通过 EF6 访问数据，我必须手动引用 EntityFramework.SqlServer.dll (4.5) 并使用 hack (above) 建议。

无需在我的测试项目的 app.config 中进行任何更改。

不

```
 <section name="entityFramework" ... 
```

和不

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" /> ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-15T07:53:12.073

@乐龙37

我遇到了和你一样的错误：“...没有为 'System.Data.SqlServerCe.4.0' ADO.NET 提供程序找到实体框架提供程序...”

我通过从目录“packages\EntityFramework.SqlServerCompact.6.0.0-rc1\lib\net40”中添加对“EntityFramework.SqlServerCompact”的引用来解决它

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-31T23:58:40.317

如果您在使用模板中的全新 MVC 站点时遇到问题：1) 卸载 Microsoft.ASPNet.Identity.EntityFramework（它会询问您是否要卸载 Entity Framework - 继续执行此操作。） 2) 安装 Entity Framework 3) 重新安装 Microsoft.ASPNET.Identity.EntityFramework

现在应该可以上班了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-08T15:16:30.183

[我在Youtube 上](http://www.youtube.com/watch?v=AKQhHBE4lDU)添加了一个截屏视频，在大约 6 分钟内描述了这一点和解决方案。我这样做是因为当您使用遇到相同问题的 Team Build 时，Fabrice 提供的解决方案不起作用。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-09-09T06:50:25.727

我通过复制这两个文件解决了这个问题

```
EntityFramework.SqlServer.dll
EntityFramework.SqlServer.xml 
```

到`/bin`.

# database - 端口重定向不起作用 (80->3306)

> ID：14695164
> 
> 赞同：0
> 
> 时间：2013-02-04T20:36:33.317
> 
> 标签：database, linux, redirect, forwarding

我有一个带有数据库（MySQL）的新 Linux 服务器（Debian 6.0），它像往常一样通过端口 3306 访问。

现在我想通过端口80或443访问由于某些用户的端口问题（因为端口3306经常被网络防火墙阻止）访问数据库。因此必须从端口重定向传输`80`以`3306`保持数据库正常工作。

我试过以下命令：

```
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3306 
```

但我收到以下错误：

> iptables：该名称没有链/目标/匹配。

有谁可以帮我解决这个问题？NAT 表为空（`PREROUTING`, `POSTROUTING`,`OUTPUT`没有条目）（用 选中`iptables -t nat -n -L`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:56:36.330

# 在 NAT 功能所需的 iptables 内核模块中：

运行以下命令在内核中加载模块：

```
 # modprobe iptable_nat
  # modprobe ipt_REDIRECT 
```

确保您在内核中编译了上述模块：

```
[root@instructor tmp]# grep REDIRECT /boot/config-$( uname -r )
CONFIG_IP_NF_TARGET_REDIRECT=m
CONFIG_BRIDGE_EBT_REDIRECT=m 
```

**在 VPS 服务器中：**

`modprobe`使用命令在主机服务器上启用模块

从主机服务器执行以下命令以启用所有模块`VPS`

```
vzctl set VEID --iptables iptable_nat --iptables ipt_REDIRECT 
```

在文件中添加规则`/etc/vz/conf/veid.conf`

```
IPTABLES="iptable_nat ipt_REDIRECT" 
```

# iis-7 - 在线证书颁发机构，无法选择。

> ID：14695180
> 
> 赞同：9
> 
> 时间：2013-02-04T20:37:45.117
> 
> 标签：iis-7, windows-server-2008-r2

我正在尝试创建域服务器，当我到达指定在线证书颁发机构时，选择按钮显示为灰色。我希望选择与其证书颁发机构相同的计算机。感谢任何帮助。

![在此处输入图像描述](../Images/7a383f82c827c39402e53dde5f23b516.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:39:57.517

请参阅此页面： [http ://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/e3e43894-30d5-4064-93d1-96d46ef3de14/](http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/e3e43894-30d5-4064-93d1-96d46ef3de14/)

该线程的答案：

*请注意，您只能从默认的 V1 WebServer 模板从 IIS 注册证书。必须将此模板添加到您的发证 CA 服务器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T06:32:24.783

我有同样的问题和答案“V1 WebServer 模板。这个模板必须添加到您的发行 CA 服务器。” 没有解决它。但是，在我在命令提示符下运行以下命令后：

```
certreq -submit -attrib “CertificateTemplate:WebServer” request.req 
```

我的要求是流程，我获得了证书。此外，我得到的选择按钮工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T22:53:09.947

Another way to resolve this problem, from here: [https://www.experts-exchange.com/questions/27758425/Windows-2008R2-IIS-7-Domain-Certficate-problem-select-button-is-greyed-out.html](https://www.experts-exchange.com/questions/27758425/Windows-2008R2-IIS-7-Domain-Certficate-problem-select-button-is-greyed-out.html)

> You could try enrolling the certificate through the certificates MMC snap-in instead and see if you have better luck:
> 
> Start -> Run -> type 'mmc' -> Press enter
> 
> (MMC console should open)
> 
> File -> Add/Remove Snap-in -> Select 'Certificates' -> Add -> Computer Account -> Local Computer -> Click OK out of the Add/Remove Snap-ins window.
> 
> Expand certificates -> Expand Personal -> Right click in an empty space in the main pane -> All tasks -> Request new certificate.
> 
> You should be able to run through that wizard and enroll based on your CA enrollment policies. Any certs that you enroll here and are applicable for securing websites will appear in IIS.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-05T15:11:05.763

我的 AD CS 运行良好，但我的 IIS 服务器不允许我选择它。为了仔细检查我的证书颁发机构服务器是否已启动，我从 CMD 运行**certutil.exe**，我可以看到我的 CA 服务器已启动并正在运行。

我以最经典的 Windows 故障排除方式修复了它。IIS 重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-11T09:50:16.707

对面临此问题的人进行更多检查：

*   使用域用户而不是本地用户
*   检查您的 CA 是否为企业 CA

# linux - 使用 ssl 为 ARM9 交叉编译 cURL 时遇到问题

> ID：14695184
> 
> 赞同：0
> 
> 时间：2013-02-04T20:37:50.847
> 
> 标签：linux, gcc, curl, arm, cross-compiling

我正在尝试使用为 ARM9 启用的 ssl 选项交叉编译 curl，但不知何故我无法启用它。

我之前交叉编译了openssl，然后我尝试使用ssl选项运行./configure：

```
CPPFLAGS="-I/home/asphantix/Tools/owa33a/openssl/openssl-1.0.1c/include" LDFLAGS="-L/home/asphantix/Tools/owa33a/openssl/openssl-1.0.1c/ssl" ./configure --with-ssl --without-ca-bundle --target=arm-none-linux-gnueabi --host=arm-none-linux-gnueabi --build=x86_64-unknown-linux-gnu 
```

它贯穿但这是我每次得到的：

```
configure: Configured to build curl/libcurl:

curl version:     7.28.1
Host setup:       arm-none-linux-gnueabi
Install prefix:   /usr/local
Compiler:         arm-none-linux-gnueabi-gcc
SSL support:      no      (--with-{ssl,gnutls,nss,polarssl,cyassl,axtls,winssl} )
SSH support:      no      (--with-libssh2)
zlib support:     no      (--with-zlib)
krb4 support:     no      (--with-krb4*)
GSSAPI support:   no      (--with-gssapi)
SPNEGO support:   no      (--with-spnego)
TLS-SRP support:  no      (--enable-tls-srp)
resolver:         default (--enable-ares / --enable-threaded-resolver)
ipv6 support:     no      (--enable-ipv6)
IDN support:      no      (--with-{libidn,winidn})
Build libcurl:    Shared=yes, Static=yes
Built-in manual:  enabled
--libcurl option: enabled (--disable-libcurl-option)
Verbose errors:   enabled (--disable-verbose)
SSPI support:     no      (--enable-sspi)
ca cert bundle:   no
ca cert path:     no
LDAP support:     no      (--enable-ldap / --with-ldap-lib / --with-lber-lib)
LDAPS support:    no      (--enable-ldaps)
RTSP support:     enabled
RTMP support:     no      (--with-librtmp)
metalink support: no      (--with-libmetalink)
Protocols:        DICT FILE FTP GOPHER HTTP IMAP POP3 RTSP SMTP TELNET TFTP 
```

我还尝试设置以下内容：

```
export AR=arm-none-linux-gnueabi-ar
export AS=arm-none-linux-gnueabi-as
export LD=arm-none-linux-gnueabi-ld
export RANLIB=arm-none-linux-gnueabi-ranlib
export CC=arm-none-linux-gnueabi-gcc
export NM=arm-none-linux-gnueabi-nm 
```

这是 config.log： [https ://dl.dropbox.com/u/3985208/config.log](https://dl.dropbox.com/u/3985208/config.log)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:46:17.983

看起来你没有`crypto`图书馆。

```
configure:20710: checking for CRYPTO_lock in -lcrypto
configure:20732: arm-none-linux-gnueabi-gcc -o conftest -O2 -Wno-system-   headers -isystem /home/asphantix/Tools/owa33a/openssl/openssl-1.0.1c/include  -   L/home/asphantix/Tools/owa33a/openssl/openssl-1.0.1c/ssl  conftest.c -lcrypto  -lrt >&5
/opt/crosstool/arm-none-linux-gnueabi/bin/../lib/gcc/arm-none-linux-gnueabi/4.4.1/../../../../arm-none-linux-gnueabi/bin/ld: cannot find -lcrypto
collect2: ld returned 1 exit status
...
configure:20741: result: no 
```

# javascript - 如何在 DeviceMotionEvent 中获得加速度

> ID：14695191
> 
> 赞同：2
> 
> 时间：2013-02-04T20:38:09.023
> 
> 标签：javascript, html, accelerometer, dart

使用 Dart，我正在尝试访问 HTML 页面上的加速度计。使用陀螺仪没有问题，文档清楚地指出 DeviceOrientationEvent 具有 alpha、beta 和 gamma 属性，并且工作正常。

但是使用 DeviceMotionEvent，我如何访问加速？在文档中： [http](http://api.dartlang.org/docs/bleeding_edge/dart_html/DeviceMotionEvent.html) ://api.dartlang.org/docs/bleeding_edge/dart_html/DeviceMotionEvent.html 您可以阅读：“它提供有关旋转速率以及沿所有三个轴的加速度的信息。”。但是，属性列表并没有这样说，自动完成或未键入的“黑客”尝试读取“accelerationIncludingGravity”都没有。

请问我可以得到一些提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T20:49:27.413

现在可以使用[DeviceMotionEvent](http://api.dartlang.org/docs/bleeding_edge/dart_html/DeviceMotionEvent.html)的加速和加速包括重力属性，提供对[DeviceAcceleration](http://api.dartlang.org/docs/bleeding_edge/dart_html/DeviceAcceleration.html)的 x、y、z 属性的访问：

```
window.onDeviceMotion.listen((DeviceMotionEvent e) {
  print(e.acceleration.x);
  print(e.acceleration.y);
  print(e.acceleration.z);
  print(e.accelerationIncludingGravity.x);
}); 
```

根据[Issue 9092](https://code.google.com/p/dart/issues/detail?id=9092)， initDeviceMotionEvent 是唯一缺少的东西。

# numpy - numpy/scipy 特征分解的不稳定结果

> ID：14695199
> 
> 赞同：5
> 
> 时间：2013-02-04T20:38:36.940
> 
> 标签：numpy, scipy, eigenvalue

我发现 scipy.linalg.eig 有时会给出不一致的结果。但不是每次。

```
>>> import numpy as np
>>> import scipy.linalg as lin
>>> modmat=np.random.random((150,150))
>>> modmat=modmat+modmat.T  # the data i am interested in is described by real symmetric matrices
>>> d,v=lin.eig(modmat)
>>> dx=d.copy()
>>> vx=v.copy()
>>> d,v=lin.eig(modmat)
>>> np.all(d==dx)
False
>>> np.all(v==vx)
False
>>> e,w=lin.eigh(modmat)
>>> ex=e.copy()
>>> wx=w.copy()
>>> e,w=lin.eigh(modmat)
>>> np.all(e==ex)
True
>>> e,w=lin.eigh(modmat)
>>> np.all(e==ex)
False 
```

虽然我不是最伟大的线性代数向导，但我确实理解特征分解本质上会受到奇怪的舍入误差的影响，但我不明白为什么重复计算会导致不同的值。但我的结果和可重复性各不相同。

问题的本质是什么——嗯，有时结果是可以接受的不同，有时不是。这里有些例子：

```
>>> d[1]
(9.8986888573772465+0j)
>>> dx[1]
(9.8986888573772092+0j) 
```

~3e-13 的上述差异似乎并不是什么大问题。相反，真正的问题（至少对于我目前的项目而言）是一些特征值似乎无法就正确的符号达成一致。

```
>>> np.all(np.sign(d)==np.sign(dx))
False
>>> np.nonzero(np.sign(d)!=np.sign(dx))
(array([ 38,  39,  40,  41,  42,  45,  46,  47,  79,  80,  81,  82,  83,
    84, 109, 112]),)
>>> d[38]
(-6.4011617320002525+0j)
>>> dx[38]
(6.1888785138080209+0j) 
```

MATLAB中的类似代码似乎没有这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:26:44.733

特征值分解满足 AV = V Lambda，这是可以保证的——例如，特征值的顺序不是。

回答你问题的第二部分：

现代编译器/线性代数库根据数据是否在内存中（例如）16 字节边界对齐，生成/包含执行不同操作的代码。这会影响计算中的舍入误差，因为浮点运算是以不同的顺序完成的。如果算法（此处为 LAPACK/xGEEV）在这方面不能保证数值稳定性，则舍入误差的微小变化会影响诸如特征值排序之类的事情。

（如果你的代码对这样的事情敏感，那是不正确的！在不同的平台或不同的库版本上运行它会导致类似的问题。）

结果通常是准确定的——例如，您会得到 2 个可能的结果之一，这取决于数组是否恰好在内存中对齐。如果您对对齐感到好奇，请检查`A.__array_interface__['data'][0] % 16`.

有关更多信息，请参见[http://www.nccs.nasa.gov/images/FloatingPoint_consistency.pdf](http://www.nccs.nasa.gov/images/FloatingPoint_consistency.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:00:39.543

我认为您的问题是您期望以特定顺序返回特征值，并且它们的结果并不总是相同。对它们进行排序，然后您就可以上路了。如果我运行您的代码来生成`d`并`dx`得到`eig`以下信息：

```
>>> np.max(d - dx)
(19.275224236664116+0j) 
```

但...

```
>>> d_i = np.argsort(d)
>>> dx_i = np.argsort(dx)
>>> np.max(d[d_i] - dx[dx_i])
(1.1368683772161603e-13+0j) 
```

# php - 在 PHP 中使用 Selenium Web Driver 获取元素的 ID

> ID：14695200
> 
> 赞同：1
> 
> 时间：2013-02-04T20:38:42.620
> 
> 标签：php, selenium, selenium-webdriver

我正在 PHP/MySQL/jQuery 中构建一个应用程序，它向用户显示项目列表，底部有一个空白字段以添加新项目。有一个 Ajax 模糊事件将您的数据保存到数据库，然后将“新”行替换为常规行，其中包括您输入的文本和一个编辑按钮。如果单击编辑按钮，它会将文本转换回输入。所有这些都有像 item_n 和 edit_n 这样的 ID，其中 n 是数据库中的 ID。我真正追求的是n。

使用Selenium（我一直专注于Web Driver，但我对使用IDE持开放态度），我想创建一个新项目，然后单击编辑按钮并更改它，但我不知道ID编辑按钮。

我已经能够在创建新行的地方创建测试，然后使用 assertTextPresent 确认它在那里，但我找不到获取新行 ID 的方法（它将是 item_n）。

我试过使用:contains，但它总是返回一个空字符串。我尝试了一些 CSS 和 Xpath 选择器，从通用到特定：

```
$elem = $this->_session->element('css', 'div.item_row div.item_title:contains("'.$new_item.'")');
$elem = $this->_session->element('xpath', '//div:contains("'.$new_task.'")'); 
```

我还尝试只获取列表中倒数第二个元素（因为最后一个是新行字段），但我真的更希望不必依赖排序。

下面的问题表明 Selenium RC 可以调用 JavaScript： [Selenium RC: How to check if an element has a given attribute?](https://stackoverflow.com/questions/2959188/selenium-rc-how-to-check-if-an-element-has-a-given-attribute)

我知道 Web Driver 成功了 Selenium RC，但我不确定 Web Driver 是否支持上述 RC 命令。话虽如此，我还是试了一下。我编写的用于获取 ID 的 JavaScript 函数返回 null。我确实在 Selenium 之外测试了该功能，所以我知道它正在工作。

我正在使用 Facebook PHP Web Driver 实现，但我没有与之结婚： [https ://github.com/facebook/php-webdriver](https://github.com/facebook/php-webdriver)

任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:12:02.977

创建元素的 IWebElement 实例。然后获取 IWebElement 的 id 属性。下面是相同的 C# 代码：

```
IWebElement element = driver.FindElement(By.XPAth("//XpathOfTheElement"));
string id = element.GetAttribute("id") 
```

我希望这有帮助

# angularjs - 如何调用函数来更改指令中的值？

> ID：14695205
> 
> 赞同：0
> 
> 时间：2013-02-04T20:38:52.043
> 
> 标签：angularjs, angularjs-directive

我需要这样的东西，但它不起作用

```
.directive('dateTime', function(){
        return {
            restrict: 'E',
            replace: true,
            scope:'=value',
            template: "<div>{{value.format('mmm dd yy')}}"</div>", 
                                    // ^here: applying a function to the scope  
         };
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:48:09.370

您已经创建了一个隔离范围，`scope: '=value'`因此这是一个全新的范围，它在原型上不会从父范围继承。这意味着您要调用的任何函数都必须来自

1.  您注入指令的服务、过滤器等
2.  另一个指令的控制器，用于`require`获取访问权限（参见Angular 主页上的`tabs`and指令示例）`pane`
3.  您在指令的控制器或 $scope 上的链接函数中定义的函数（本质上是相同的）示例：[https ://stackoverflow.com/a/14621193/215945](https://stackoverflow.com/a/14621193/215945)
4.  使用“&”语法使指令能够调用在父作用域上声明的函数。示例：[实现在 AngularJS 中提交时需要禁用的按钮的最佳方法是什么？](https://stackoverflow.com/questions/14493050/what-is-the-best-way-to-implement-a-button-that-needs-to-be-disabled-while-submi/14494122#14494122)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:41:19.393

您可能只是在寻找[日期过滤器](http://docs.angularjs.org/api/ng.filter%3adate)：

```
{{value | date:'MMM dd yy'}} 
```

但你也可以这样做：

```
app.directive('dateTime', function(){
        return {
            restrict: 'E',
            replace: true,
            scope:'=value',
            template: "<div>{{value | date:'MMM dd yy')}}"</div>", 
                                    // ^here: applying a function to the scope  
         };
    }); 
```

# sql-server - 具有多个 0 的值的子字符串

> ID：14695207
> 
> 赞同：0
> 
> 时间：2013-02-04T20:38:58.593
> 
> 标签：sql-server, substring

表中的数据如下所示

```
ID  Value
1   5006049
2   5006050 
```

如何选择一个子字符串以便我得到

```
R6049
R6050 
```

请记住，这些值是从

```
5000001 = R1 
```

到

```
5999999 = R999999 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:45:36.197

只需减去

```
SELECT 'R' +  CAST(VALUE - 5000000 as VARCHAR(6))
FROM table 
```

[SqlFiddle](http://sqlfiddle.com/#!3/e889f/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:44:48.510

我想这么简单：

```
Select 'R'+Substring(convert(VARCHAR(7), Value), 4,7) 
```

哪个会给出 R0001（你想要零吗？）

如果您不想要零/只希望删除最高位：

```
Select 'R'+ convert(VARCHAR(6),Value - 5000000) 
```

# iphone - Monotouch.Dialog：RadoElement 块的背景

> ID：14695208
> 
> 赞同：0
> 
> 时间：2013-02-04T20:39:07.043
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog

（来自 MT 示例）

我有一个简单的对话框，其中显示了甜点列表。当甜点被录音时，列表就会出现。但是，沙漠列表的样式与我为**tableview**设置**背景**视图的主视图不同。

 **有没有办法设置沙漠列表表格视图背景的样式？

```
var root = new RootElement ("Meals") {
new Section ("Dinner"){
        new RootElement ("Dessert", new RadioGroup ("dessert", 2)) {
            new Section () {
                new RadioElement ("Ice Cream", "dessert"),
                new RadioElement ("Milkshake", "dessert"),
                new RadioElement ("Chocolate Cake", "dessert")
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:04:04.643

您将需要创建 RootElement 的子类，并覆盖在呈现控制器之前调用的 PrepareDialogViewController 方法。这是您可以自定义背景的地方。**

# java - 为什么我的 Java 异常在 SwingWorker 中抛出时不打印堆栈跟踪？

> ID：14695214
> 
> 赞同：6
> 
> 时间：2013-02-04T20:39:17.360
> 
> 标签：java, swing, exception

为什么当我将 SwingWorker 包裹在这段代码周围时，它不再报告抛出异常？

```
import java.security.InvalidParameterException;

import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SwingWorker<Void, Void>() {

                    @Override
                    protected Void doInBackground() throws Exception {
                        IntegerString s = new IntegerString("EIGHT");
                        return null;
                    }

                }.execute();

            }

        });

    }

}

class IntegerString {

    public IntegerString(String s) {
        if (!isInteger(s)) {
            System.out.println("...throwing exception.");
            throw new InvalidParameterException("Thrown.");
        }
        // ...
    }

    static boolean isInteger(String str) {
        if (str == null) {
            return false;
        }
        int length = str.length();
        if (length == 0) {
            return false;
        }
        int i = 0;
        if (str.charAt(0) == '-') {
            if (length == 1) {
                return false;
            }
            i = 1;
        }
        for (; i < length; i++) {
            char c = str.charAt(i);
            if (c <= '/' || c >= ':') {
                return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T21:07:01.467

您必须调用`get()`以检索在`doInBackground()`. 例如，您可以在`done()`方法中执行此操作，即：

```
@Override
protected void done() {
    try {
        get();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# php - 用户下载文件后如何显示感谢页面？

> ID：14695216
> 
> 赞同：5
> 
> 时间：2013-02-04T20:39:18.557
> 
> 标签：php, html

我正在使用这个小推送器 php 文件下载一个“exe”文件，供用户在填写表格时保存。

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

使用这种方法，没有人可以关注的在线 $file 位置的链接，但由于某种原因，我无法在代码执行之后甚至之前显示感谢页面。

我试过 header("Location: $thankyouurl"); 在上面的代码之后立即，但什么都没有显示，我尝试在运行上面的代码之前回显感谢页面的 html 源代码，但这会导致 exe 文件被下载到网页实际上导致浏览器崩溃.

有什么建议么？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T20:41:32.060

将用户直接指向显示感谢信息的静态页面。然后，使用 JavaScript 将 设置`window.location`为您的下载脚本。

如果您的下载页面的标题设置正确，浏览器将开始下载文件，而您的用户正在阅读您的感谢信息。

如果用户禁用了 JavaScript，请确保显示直接下载链接。

# 例子：

**索引.php**

```
<a href="thankyou.php">Click here to download.</a> 
```

**谢谢你.php**

```
<html>
<head>
    <script type="text/javascript">
        function startDownload() {
            window.location = "/download.php";
        }
    </script>
</head>
<body onload="startDownload();">
    <h1>Thank you!</h1>
    <p>Your download will start in a moment. If it doesn't, use this <a href="download.php">direct link.</a></p>
</body> 
```

**下载.php**

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

# 更新

为了将数据从`index.php`on 传递到下载脚本，您可以使用`GET`变量。该`thankyou.php`页面的链接将成为`thankyou.php?download=12`下载是您获取正确文件的 ID。然后，您可以通过在您的标记中回显该变量，将其传递给您的下载脚本，如下所示：

**索引.php**

```
<a href="thankyou.php?download=12">Click here to download.</a> 
```

**谢谢你.php**

```
<html>
<head>
    <script type="text/javascript">
        function startDownload() {
            window.location = "/download.php?file=<?=$_GET['download']?>";
        }
    </script>
</head>
<body onload="startDownload();">
    <h1>Thank you!</h1>
    <p>Your download will start in a moment. If it doesn't, use this <a href="download.php?file=<?=$_GET['download']?>">direct link.</a></p>
</body> 
```

然后，您将获取下载脚本中的值并以您喜欢的任何方式处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:45:00.333

不太确定这个，会不会...

```
header('Location: thanks_page.php'); 
```

...不行，。如果放在 readfile() 之后？真的不确定，只是我的想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:47:18.037

您可以使用“windows.open('url to download file')”打开“下载页面”

例子：

```
<script type="text/javascript">
    function openDownload()
    {
        window.open( "http://domain.com/download.php?file=file.pdf" );
        window.location = "http://domain.com/thanks.php";
    }
</script> 
```

打开一个直接下载文件的窗​​口，当您选择保存或取消时，它将自动关闭，然后“父”窗口重定向到感谢页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:48:02.323

使用您的原始方法，添加`header('location: thank-you-page.php');`到末尾，以及退出，如下所示：

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);

header('location: thank-you-page.php');
exit; 
```

# windows - 从当前路径批量启动程序

> ID：14695217
> 
> 赞同：0
> 
> 时间：2013-02-04T20:39:21.530
> 
> 标签：windows, batch-file, path, cmd

我有一个批处理文件，其中包含：

```
start "" javaw -jar %CD%\example.jar 
```

如果 example.jar 和批处理文件都在没有空格的目录中（fe ProgramFiles），一切正常。如果这些文件位于有空间的目录中（fe 程序文件），则无法访问 example.jar 文件。Javaw 程序写入以下内容：无法访问 jarfile：pathToMyDir\Program

也试过这个

```
start "" javaw -jar %~p0\example.jar 
```

但结果是一样的..

有任何想法吗？如何强制系统将空格识别为目录名的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:44:14.283

在路径周围加上引号。

```
start "" javaw -jar "%CD%\example.jar" 
```

此外，除非我误读，否则您实际上不需要指定 %CD% 。你可以说：

```
start "" javaw -jar example.jar 
```

# php - 树行为因“语法错误或访问冲突”而在保存时失败

> ID：14695219
> 
> 赞同：0
> 
> 时间：2013-02-04T20:39:36.130
> 
> 标签：php, cakephp, cakephp-2.3

我无法使用 Tree 行为保存记录。如果记录的 parent_id 更改，则保存将失败。

我的`CmsPost`模型看起来像这样。

```
class CmsPost extends CmsAppModel
{
    /**
     * Alias for the model.
     */
    public $name = 'CmsPost';

    /**
     *
     * @var array The behaviors for this model.
     */
    public $actsAs = array(
        'Tree' => array(
            'left' => 'left_id',
            'right' => 'right_id'
        )
    );
} 
```

保存记录工作正常。SQL 转储在历史记录中显示此更新。

> 更新`cgtag`。`cms_posts`SET `title`='其他东西'，`key`='其他东西'，`desc`=''，`content`=''，`parent_id`= NULL，`status`='评论'，`image_count`= 0，`published`='2013-02-03 17:39:00'，`created`='2013-02 -03 17:42:00'，`updated`='2013-02-03 17:47:00' 在哪里`cgtag`。`cms_posts`. `id`='1'

问题是`afterSave`Tree 行为中的回调因此错误而失败。

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND' at line 1

SQL Query: UPDATE `cgtag`.`cms_posts` AS `CmsPost` SET `CmsPost`.`left_id` = `CmsPost`.`left_id` + 1 WHERE `CmsPost`.`left_id` BETWEEN AND 
```

`WHERE`条件不对。为 设置了值`left_id`。

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:43:52.510

好的，我解决了这个问题。

表的`left_id`和`right_id`列不能是可为空的字段。必须将默认值设置为`0`.

# java - 此元素没有附加源，并且在附加的 Javadoc 中找不到 Javadoc

> ID：14695220
> 
> 赞同：2
> 
> 时间：2013-02-04T20:39:35.077
> 
> 标签：java, android, eclipse

我开始在 Android 上进行开发，但遇到了 eclipse 的一些问题：

有图片：

![在此处输入图像描述](../Images/5f415401196bba1b9b36466e802b72b7.png)

我应该怎么做才能显示 javadoc？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:49:50.147

您需要下载并附上源代码。

1) 打开 SDK Manager 并在最新或适当的 API 下下载“Sources for Android SDK”。

2) `Ctrl`+单击任何Android类或方法，然后在出现的窗口中单击“附加源代码”按钮。接下来选择“外部文件夹”并导航到`<android-SDK>\sources\android-xx`.

*   `<android-SDK>`是保存您的 SDK 的文件夹
*   `xx`指您适当的 API

# scala - 尝试将映射投影与 Slick 一起使用时出现类型错误

> ID：14695223
> 
> 赞同：1
> 
> 时间：2013-02-04T20:39:50.550
> 
> 标签：scala, slick

我正在尝试使用 Slick 的映射投影（版本 1.0.0-RC1）。但是以下代码遵循网站上的示例（因为似乎没有任何适当的文档或可用的 scaladocs）会产生类型错误：

```
object PDFDocs extends Table[(String,Option[String],String)]("DOCUMENTS"){
  def id = column[String]("ID", O.PrimaryKey)
  def title = column[Option[String]]("TITLE")
  def tags = column[String]("TAGS")
  def * = (id ~ title ~ tags).<>[PDFDocument](PDFDocument,PDFDocument unapply _)
}

case class PDFDocument(name: String,
                       title: Option[String],
                       tags: String) 
```

这是产生的错误：

```
error: type mismatch; 
found: scala.slick.lifted.MappedProjection[docman.rdb.PDFDocument,(String,Option[String], String)] 
required: scala.slick.lifted.ColumnBase[(String, Option[String], String)] 
def * = (id ~ title ~ tags).<>[PDFDocument](PDFDocument,PDFDocument unapply _) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T21:01:58.160

在我的脑海中，第一行不应该是：

```
object PDFDocs extends Table[PDFDocument]("DOCUMENTS") { 
```

# html - Internet Explorer 8 中的透明度/不透明度问题

> ID：14695229
> 
> 赞同：0
> 
> 时间：2013-02-04T20:40:00.730
> 
> 标签：html, css, google-chrome, internet-explorer-8, opacity

我正在为客户开发一个“单页”网站。该网站在大多数浏览器中按我想要的方式显示，但是我在 Windows XP 上安装的 Internet Explorer 8 的特定组合中遇到了问题。

由于客户的要求和图形设计师的设计相结合，不同的元素被放置在彼此之上，并且需要根据导航淡入或淡出。

在 IE9&10（包括开发人员工具中的 IE8 文档属性）、Chrome 以及 Win2K8 服务器上的 IE8 等浏览器中一切正常。

然而，在 IE8 中，不可见元素的透明度似乎是由同一位置的“将是”可见的兄弟姐妹继承的。

我搜索了不同的解决方案并尝试了不同的方法，例如：

```
opacity: 0;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
-filter: alpha(opacity=0); 
```

还有一个额外的但大多是不必要的：

```
display: block; 
```

或者

```
zoom: 1; 
```

但以上都没有奏效。

有没有人经历过或解决过这个问题。或者是在 IE8 中的同一位置淡化多个元素，这不是正确的方法。

请参阅此小提琴以了解我的预期功能：http: [//jsfiddle.net/6HZGw/11/](http://jsfiddle.net/6HZGw/11/)

PS。我试图发布我的问题的确切图像，但由于我刚刚注册，这不可能作为垃圾邮件预防措施。

所以这里是问题的链接：http:
[//img338.imageshack.us/img338/4458/ie8f.png](http://img338.imageshack.us/img338/4458/ie8f.png)

以及预期视图的链接：http:
[//img255.imageshack.us/img255/8391/chromeothers.png](http://img255.imageshack.us/img255/8391/chromeothers.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:41:58.143

IE8 的不透明度过滤器真的很糟糕。它在某些时候有点工作，但它充满了错误和陷阱。jQuery 让它稍微不那么痛苦，但即便如此，它也很容易被其中一个怪癖所吸引。

我现在没有可用的 IE8 或 XP 来测试它，但我自己也走上了这条路，也遇到了类似的结果，特别是在处理多个元素时，尤其是当这些元素是文本和图形的混合时.

正如我所说，我现在无法亲自尝试，但我的猜测是您遇到了无法解决的问题之一。所以我建议寻找替代解决方案。

In our case, after a lot of work, we ended up completely abandoning the idea of fading the elements in and out because of this, and switched to a tactic of sliding them out from behind other elements. The effect was similar enough that the customer was happy, and it worked in all browsers.

# javascript - 如何设置逗号分隔符。字符串作为参数？

> ID：14695232
> 
> 赞同：0
> 
> 时间：2013-02-04T20:40:08.593
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

我有一个函数调用，如：

```
var ex = _.where(obj, {param1:0,param2:1}); 
```

效果很好，所有代码都在后面。

我检查我的 URL 并取出参数并将此信息保存到数组中：

```
 var query = window.location.search.substring(1);

    var vars = query.split("&");

    var testParamter = vars.toString().replace( /=/g,':' ); 
```

通过使用 console.log(testParamter); 返回 以下结果：

```
param1:0,param2:1 
```

但我还不能将 var testParamter 插入到我的函数调用中：

```
var ex = _.where(obj, {testParamter}); 
```

因为它是一个字符串，我不能用 eval() 处理它。所以谁能告诉我正确的方法来解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:44:37.760

遍历查询字符串中的值并从这些值创建一个对象：

```
var query  = window.location.search.substring(1),
    vars   = query.split("&"),
    params = {};

$.each(vars, function(k,v) {
    var arr = v.split('=');
    params[ decode(arr[0]) ] = decode(arr[1]);
});

var ex = _.where(obj, params);

function decode(s) { 
    return decodeURIComponent(s.replace(/\+/g, " ")); 
} 
```

# azure - 在 Windows azure 上设置反向 dns？

> ID：14695233
> 
> 赞同：3
> 
> 时间：2013-02-04T20:40:15.493
> 
> 标签：azure, reverse-dns

有谁知道这是否可能？在互联网上浏览，我发现它已被列入路线图，但那是一段很长的路要走。有没有人做到这一点？像 AWS 那样，托管行业中如此大的参与者不提供此功能似乎很奇怪。

另外，我说的是虚拟机上的反向 dns，而不是云服务的 IP 地址。我认为这与 linux 机器的配置有关，因为虚拟机具有 root 访问权限，我认为这可能是可能的，尽管很难找到有关它的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:12:52.790

似乎计划了*反向 DNS*功能，但我无法找到有关任何时间线/计划发布日期的更多详细信息。

[您可以在为 Azure 虚拟机提供反向 DNS](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/3090834-provide-reverse-dns-ptr-records-for-virtual-mach)以及[Windows Azure 功能投票](http://www.mygreatwindowsazureidea.com)网站上的[反向 DNS 查找](http://www.mygreatwindowsazureidea.com/forums/170031-sdk/suggestions/1327391-reverse-dns-lookup)建议中找到有关这些功能的更多信息。

**编辑** 正如@franzo 所指出的，Windows Azure 平台现在支持反向 DNS 记录，**无需**额外费用。反向 DNS 支持适用于所有 PaaS 和 IaaS 云服务。[您可以在宣布：Azure 云服务的反向 DNS](http://azure.microsoft.com/blog/2014/07/21/announcing-reverse-dns-for-azure-cloud-services/)中找到有关该功能的更多信息。

# ruby-on-rails - 如何检查响应是否为文件？

> ID：14695235
> 
> 赞同：2
> 
> 时间：2013-02-04T20:40:22.373
> 
> 标签：ruby-on-rails, tdd, testunit, minitest, rack-test

如何测试 Rails 中控制器操作的响应是否为文件？（机架测试或水豚）

我应该使用单元测试来做到这一点吗？

场景很简单：我必须测试从数据库中导出的用户是否与操作生成的 .csv 中包含的用户相同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T22:27:01.017

您不需要机架测试或 Capybara 来执行此操作。默认的测试基础架构就是您所需要的。只需检查 Content-Type 是否为 CSV：

```
test "returns a CSV file" do
  get :index, format: :csv
  assert_response :success
  assert_equal "text/csv", response.content_type
end 
```

如果您想更进一步，您可以解析返回的 CSV 以确保其有效并测试返回的值：

```
test "returns a valid CSV file and data" do
  get :index, format: :csv
  assert_response :success
  assert_equal "text/csv", response.content_type

  csv = CSV.parse response.body # Let raise if invalid CSV
  assert csv
  assert_equal 6, csv.size
  assert_equal "Joe Smith", csv[3][4]
end 
```

# c# - 什么框架使用`IServiceProvider`？

> ID：14695238
> 
> 赞同：5
> 
> 时间：2013-02-04T20:40:32.977
> 
> 标签：c#, inversion-of-control

基本上只是任何 IOC 容器的`IServiceProvider`通用接口，还是用于特定框架？我正在滚动我自己的轻量级 IOC 容器，我想知道是否应该实施它。还有其他我应该实现的接口吗？我对 MEF 或 Unity 都不感兴趣。我已经广泛使用了这两种方法，但它们并不真正适用于我当前的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:09:36.663

`IServiceProvider`是一个导入的（或者可能是保留的）COM 接口，旨在用于您为服务询问的对象的上下文中的私有功能。术语“服务”在这里应用得相当松散，它最初是指可以根据给定的 GUID 返回的任何 COM 对象。

[IServiceProvider @ MSDN（.NET 参考）](http://msdn.microsoft.com/en-us/library/system.iserviceprovider.aspx)
[IServiceProviderImpl Class @ MSDN（C++ ATL 参考）](http://msdn.microsoft.com/en-us/library/zsz5ss6c.aspx)

在 .NET 中，除非您有专门支持它的客户端，否则您不需要实现它，并且在许多情况下，您不需要添加使用`IServiceProvider`. 此外，您可以设计自己的方案来共享公共对象或实现基于 IoC / 依赖注入的其他使用模式，这些模式根据您的需要更灵活或更严格。

一个很好的历史背景`IServiceProvider`是 IE 浏览器插件规范。在这里，它用于允许插件组件在上下文中使用浏览器主机功能。在 COM 上下文中，此接口很有用，因为它隐藏了实例化的细节，也可以用作对象构造和利用策略的一部分，以避免引用循环。

[WebBrowser 自定义（第 2 部分）@ MSDN](http://msdn.microsoft.com/en-us/library/aa770042.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:46:48.570

我认为这是一个非常通用的使用界面，因此您可以将其与任何东西一起使用。它几乎不应该在框架类库中。对于一个特定用途，WCF 数据服务团队的 Alex D. James 有一篇关于它的博客。

[http://blogs.msdn.com/b/alexj/archive/2010/01/07/creating-a-data-service-provider-part-2-iserviceprovider-datasources.aspx](http://blogs.msdn.com/b/alexj/archive/2010/01/07/creating-a-data-service-provider-part-2-iserviceprovider-datasources.aspx)

我认为这与 IoC 容器无关。我已经使用过很多 Unity 和 Autofac，但从未见过它与它们一起使用。至于自己滚动，我建议您以更标准的通用方式定义自己的容器接口：

```
public interface IContainer
{
    T Resolve<T>();
} 
```

这是相当标准的一些变化，但如果符合您的需要，您也可以只使用 IServiceProvider。

在那一点上，除非这只是一个学术练习，否则您可能需要阅读“依赖注入”。Mark Seemann 涵盖了所有的容器以及相当多的理论和实践。也就是说，我强烈推荐它。

[https://www.amazon.com/Dependency-Injection-NET-Mark-Seemann/](https://www.amazon.com/Dependency-Injection-NET-Mark-Seemann/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T12:59:40.670

ASP.NET 5`IServiceProvider`在“自托管”模式下使用，即在控制台应用程序或服务中托管 ASP.NET 应用程序和运行时。
（一个类型的对象`Microsoft.Framework.Runtime.Common.DependencyInjection.ServiceProvider`——实现`IServiceProvider`——被传递给你的控制台应用程序构造函数。）

因此，如果您想在 ASP.NET 5 中使用不同的 IoC 容器，您可能需要实现此接口。或者将另一个 IoC 容器包装在实现此接口的类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T14:16:38.990

新的（从 .NET 4 开始）运行时缓存 API 也使用它：http: [//msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.host.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.host.aspx)。

还有 Visual Studio 设计师。

# paypal - Paypal IPN - 区分定期付款和初始付款

> ID：14695241
> 
> 赞同：1
> 
> 时间：2013-02-04T20:40:39.827
> 
> 标签：paypal, paypal-ipn

我在 Paypal 上创建了一个定期付款资料，并设置了初始付款。

当我收到 IPN 时，初始付款和定期付款的 txn_id 相同。我想知道是否有办法区分它们。

我注意到当我收到定期付款时，有这个变量“period_type=Regular”。这不会出现在初始付款 IPN 中。这是区分的好方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:23:34.603

我认为您可能会对您在 IPN 中获得的内容感到困惑。

首次创建配置文件时，您将获得一个带有刚刚创建的配置文件的配置文件 ID 的 IPN，并且如果您包含要收取的原始金额，您只会获得一个交易 ID。此处的交易 ID 仅适用于该原始金额。如果您没有这些，您将获得的只是个人资料 ID。

如果您的定期付款也计划在同一天开始，您将获得一个额外的 IPN 用于定期付款，并且将有自己的交易 ID。

# objective-c - 向 C void * 发送 Objective-C 消息

> ID：14695242
> 
> 赞同：1
> 
> 时间：2013-02-04T20:40:44.090
> 
> 标签：objective-c, c

两个问题：

1.  是否可以从 C 函数向 C void * 发送 Objective-C 消息？
2.  `<SomeProtocol>`是否可以在 C 函数声明中提示 void * ？在函数体中？

（伪代码）

```
// myfunc.h
void myfunc(void *object, int param);

// myfunc.c
void myfunc(void *object, int param) {
    // desired (pseudocode):
    // [<SomeProtocol>(id)object method:param];
}

// objective-c controller
# include "myfunc.h"
// ....
@implementation

- (void)visible_to_outer_world {
    Object *o = [Object new];
    myfunc(o, 5);
}

// ....
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:42:59.370

> `void *`是否可以从 C 函数向 a 发送 Objective-C 消息？

不知道你为什么想要它，但如果你正在编译为 Objective-C：

```
void bar(void *ptr)
{
    // MRC version:
    [(id)ptr someMessage];

    // ARC (alias "ugly") version:
    [(__bridge id)ptr someMessage];
}

Foo *foo = [[Foo alloc] init];
bar(foo); 
```

> 是否可以在 C 函数声明中`void *`进行提示？`<SomeProtocol>`在函数体中？

不。

# c# - 通过 asp.net 编辑 HTML

> ID：14695243
> 
> 赞同：0
> 
> 时间：2013-02-04T20:40:45.660
> 
> 标签：c#, asp.net

所以我用asp.net做一个网站，遇到了一点问题。我需要从 .aspx.cs 文件中编辑 html，虽然这通常不是问题，但 html 文件位于项目其他地方的模板文件夹中。我曾尝试使用 javascript，但我一直收到错误消息“无法设置属性/更改 null 类型的 innerHTML。

继续尝试用 javascript 解决这个问题会更好，还是 asp.net 有这方面的东西？

另请注意：html 位于 html 文件中，而不是 .aspx 文件中，因此 asp.net 控件（例如 runat="server"）不起作用。

编辑：如果当前用户不是管理员，我想要做的是隐藏一个 div，该 div 包含一个管理员导航栏。

对于 javascript 修复，我尝试过 Page.RegisterStartUpScript 和 Response.Write（从 .aspx.cs 文件调用），但都给了我上述错误。我不能（据我所知）有一个javascript文件只是隐藏div而不以某种方式被c#调用或发起，因为我需要找出他们是否是管理员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:56:34.210

您需要做的是将 HTML 文档转换为 .aspx 文件并将其[包含](http://www.mikesdotnetting.com/Article/144/Classic-ASP-Include-Files-in-ASP.NET)在使用它的其他文件。然后，您可以在后面的代码中引用该控件，使用任何可用的方法来确定用户是否已登录。例如：

```
if (Security.IsLoggedIn())
{
  myIncludeFile.Visible = true;
}
else
{
  myIncludeFile.Visible = false;
} 
```

这对你有意义吗？

# php - 在 PHP 中：OpenSSL 错误消息：错误：1409F07F：SSL 例程：SSL3_WRITE_PENDING：错误写入重试

> ID：14695247
> 
> 赞同：5
> 
> 时间：2013-02-04T20:40:50.663
> 
> 标签：php, ssl, websocket

我正在尝试使用 PHP 中的 SSL/TLS 连接发送大量数据。如果数据块不是很大或者我不使用 TLS，它工作得很好，但是我需要（接近 2MiB），`fwrite`函数显示警告：

> 警告：fwrite()：SSL 操作失败，代码为 1。OpenSSL 错误消息：错误：1409F07F：SSL 例程：SSL3_WRITE_PENDING：错误写入重试

我用来连接客户端的相关代码：

```
$cntxt = stream_context_create(array('ssl' => array('local_cert' => 'certificate.pem')));
$server = stream_socket_server('tls://127.0.0.1:8080', $errno, $errstr, STREAM_SERVER_BIND|STREAM_SERVER_LISTEN, $cntxt);

// Wait for client connection //

$client = stream_socket_accept($server);
// Use non-blocking socket to allow answering many clients at a time
stream_set_blocking($client, 0);
$clients[] = $client; 
```

发送数据时，它会附加到缓冲区，并且不时为每个客户端和链接的缓冲区调用此函数：

```
function trySend($client, &$buffer) {
    if (strlen($buffer)) {
        $len = fwrite($client, $buffer);
        $buffer = substr($buffer, $len);
    }
} 
```

正如我所说，我的代码适用于少量数据或正常（非 TLS）连接。我搜索了这个错误并找到了[http://www.openssl.org/docs/ssl/SSL_write.html](http://www.openssl.org/docs/ssl/SSL_write.html)：

> 当长度为 num 的 buf 的完整内容被写入后，SSL_write() 才会成功返回。可以使用 SSL_CTX_set_mode(3) 的 SSL_MODE_ENABLE_PARTIAL_WRITE 选项更改此默认行为。设置此标志后，SSL_write() 也会在部分写入成功完成时返回成功。在这种情况下，SSL_write() 操作被认为已完成。字节被发送，并且必须开始使用新缓冲区（已删除已发送的字节）的新 SSL_write() 操作。使用消息块的大小执行部分写入，对于 SSLv3/TLSv1 为 16kB。

但是我怎样才能在 PHP 中做到这一点？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T13:45:28.723

我发现我可以通过将传递给 fwrite() 的字符串长度限制为 8192 来解决这个问题，这可以防止 fwrite() 警告。

因此，对于您示例中的代码，我将尝试将 substr() 调用更改为：

```
$buffer = substr($buffer, $len, 8192); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-04-29T13:53:24.990

解决方案是：

```
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;
try {                           
$result = fwrite($fp, $msg, strlen($msg));
}
catch (Exception $ex) {
sleep(1); //sleep for 5 seconds
$result = fwrite($fp, $msg, strlen($msg));
} 
```

# c - 为什么 C 没有定义数组的最小大小？

> ID：14695254
> 
> 赞同：4
> 
> 时间：2013-02-04T20:41:38.317
> 
> 标签：c, arrays, undefined-behavior

C 标准定义了很多下限/上限（**[翻译限制](http://c0x.coding-guidelines.com/5.2.4.1.html)**），并规定了每个翻译都应该满足的实现。为什么没有为数组大小定义这样的最小限制？以下程序将编译良好，可能会产生运行时错误/段错误，并会调用**未定义的行为**。

```
int main()
{
   int a[99999999];
   int i;

   for(i=0;i<99999999;i++)
   a[i]=i;

   return 0;
} 
```

一个可能的原因可能是在自动存储上分配了本地数组，这取决于分配的堆栈帧的大小。但是为什么不像 C 定义的其他限制那样设置最小限制呢？

让我们忘记上面的未定义情况。考虑以下：

```
int main()
{
   int a[10];
   int i;

   for(i=0;i<10;i++)
   a[i]=i;

   return 0;
} 
```

在上面，是什么让我保证本地数组（尽管非常小）将按预期工作并且不会由于分配失败而导致未定义的行为？

尽管在任何现代系统上分配如此小的阵列都不太可能失败。但是 C 标准没有定义任何要满足的要求，编译器也没有（至少 GCC 没有）报告分配失败。只有运行时错误/未定义的行为是可能的。*困难的部分是没有人可以判断任意大小的数组是否会由于分配失败而导致未定义的行为。*

请注意，我知道我可以为此目的使用动态数组（通过*malloc*和朋友），并且可以更好地控制分配失败。我更感兴趣的是为什么没有为本地数组定义这样的限制。此外，全局数组将存储在静态存储中，并将增加编译器可以处理的可执行文件大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T20:43:52.367

您已经回答了自己的问题；这是由于堆栈限制。^* 即使这样也可能行不通：

```
void foo(void) {
    int a;

    ...
} 
```

如果这`...`实际上是对 . 的递归调用`foo`。

换句话说，这与数组无关，因为同样的问题会影响所有局部变量。该标准无法强制执行要求，因为在实践中这将转化为对无限大小堆栈的要求。

* * *

[* 是的，我知道 C 标准不谈论堆栈。但这是隐含的模型，从某种意义上说，标准实际上是当时存在的实现的形式化。]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T20:46:10.257

因为 C*语言*不应该对您的可用堆栈大小施加限制。C 在许多（许多）不同的环境中运行。它怎么可能得出一个合理的数字？地狱，自动存储持续时间！=堆栈，堆栈是一个实现细节。C，*语言*，没有说“堆栈”。

环境决定了这些东西，这是有充分理由的。如果某个环境通过没有这种限制的替代方法实现自动存储持续时间怎么办？如果硬件出现突破，突然现代机器不需要这样的限制怎么办？

在这种情况下我们应该修改标准吗？*如果 C语言*指定了这样的实现细节，我们将不得不这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T20:54:54.780

MINIMUM 限制是 1 个元素的数组。为什么你会有一个“限制”呢？当然，如果你永远递归调用一个函数，一个 1 的数组可能不适合堆栈，或者调用函数的调用下一次调用可能不适合堆栈 - 解决这个问题的唯一方法是知道编译器中堆栈的大小 - 但在那个阶段编译器实际上并不知道堆栈有多大 - 别介意极其复杂的调用层次结构的问题是几个不同的函数调用同一个函数，可能使用递归和/或几层相当大的堆栈消费者-您如何为此调整堆栈的大小-可能永远不会遇到最坏的情况，因为其他事情表明这种情况不会发生-例如，一个函数中最坏的情况是仅当输入文件为空时，但另一个函数中最坏的情况是同一文件中存储了大量数据。很多很多这样的变化。这太不可靠了，所以迟早会变成猜测或大量误报。

考虑一个具有数千个函数的程序，所有这些函数都调用相同的日志记录函数，该函数需要堆栈上的 200 字节数组来临时存储日志输出。从 main 向上的几乎每个函数都调用它。

局部变量的 MAXIMUM 取决于堆栈的大小，正如我上面所说，编译器在编译代码时并不知道[链接器可能知道，但稍后再说]。对于全局数组和在堆上分配的数组，限制是“您的进程可以获得多少内存”，因此那里没有上限。

没有简单的方法来确定这一点。该标准提供的许多限制是为了保证代码可以在“任何编译器”上编译，只要您的代码遵循规则。被编译和能够运行完成是两件不同的事情。

int main() { while(1); }

永远不会完成 - 但它会在我知道的每个编译器中编译，而且大多数人不会说存在无限循环 - 这是你的选择。

将大型数组放入堆栈也是您的选择。很可能链接器被赋予了几千兆字节的堆栈，在这种情况下它会很好 - 或者堆栈是 200K，你不能有 50000 个整数数组......

# mongodb - 在需要分片之前，mongodb 可以处理多少个请求？

> ID：14695261
> 
> 赞同：6
> 
> 时间：2013-02-04T20:42:14.977
> 
> 标签：mongodb, mongodb-query

有人知道（根据个人经验或官方文档）在建议分片之前单个 MongoDb 服务器可以处理多少并发请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:01:23.830

如果您的工作集超出了您可以为单个服务器提供的 RAM，或者您的磁盘 I/O 需求超出了您在单个服务器上可以提供的容量，或者（不太可能）您的 CPU 需求超出了您可以在一台服务器上获得的容量，那么你需要分片。所有这些在很大程度上取决于您的具体工作量。请参阅[http://docs.mongodb.org/manual/faq/storage/#what-is-the-working-set](http://docs.mongodb.org/manual/faq/storage/#what-is-the-working-set)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:59:54.420

一个因素是硬件。尽管为此您有副本集。它们通过使用复制数据回答只读查询来减少主服务器的负载。另一种选择是对非常频繁和重复的查询进行内存缓存，这会更快。

是否需要分片的一个因素是数据大小和变化。当您需要访问大量不同的数据时，通过将对数据的访问分布到广泛的范围，这会使服务器的缓存失效，那么您将考虑使用分片。卸载工作只是其副作用。

# windows - 期望脚本 Telnet 电子邮件脚本

> ID：14695265
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:42:40.803
> 
> 标签：windows, tcl, telnet, expect

尝试在 Windows 中使用 Expect Script the Active TCL 以在每次运行时发送一封电子邮件。下面是我拥有的代码，但下面显示了一条错误消息，希望能提供有关如何避免该问题的任何帮助。谢谢你。

```
#!/usr/bin/expect
# \
exec tclsh "$0" ${1+"$@"}
package require Expect

spawn plink -telnet IP PORT
send "ehlo *******.com\r";
send "AUTH LOGIN\r";
expect "334 VXNlcm5hbWU6" sleep .1;
send "*************\r";
sleep .1;
expect "334 UGFzc3dvcmQ6\r"
send "********\r";
sleep .1;
expect "235 Authentication succeeded\r";
send "MAIL from:******@*******.com\r";
expect "250 OK\r"
send "RCPT to:********@*********.com\r";
expect "250 Accepted\r"
send "DATA\r";
send "!!!TEXT HERE!!!\r";
send ".\r";
send "QUIT\r";
exit 
```

收到错误：

```
Error in startup script

send: spawn id exp2 not open
           while executing
"send "MAIL from:*****@******.com\r""
   (file "***.tcl" line 16) 
```

关于这里有什么问题的任何想法？？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:49:34.817

我认为是因为远程主机关闭了连接并且 plink 退出了。

为什么不使用`smtp`tcllib 的包呢？它比通过 plink 与 expect 交谈原始 smtp 更容易使用。

总结一下：您将 plink 用于 telnet，您`socket`已经可以使用 tcl s 来做这件事。你说的是 smtp，其中存在许多库，这使得使用它变得更加容易。

纯tcl发送邮件示例：

```
package require mime
package require smtp

set tok [::mime::initialize \
    -canonical text/plain \
    -header {From sender@address.example.com} \
    -string {Some Text Here}]
::smtp::sendmessage $tok \
    -servers IP \
    -ports PORT \
    -username ****** \
    -password ****** \
    -recipients recipient@address.example.com \
    -originator sender@address.example.com
::mime::finalize $tok 
```

# c# - 从引用中随机化枚举

> ID：14695267
> 
> 赞同：1
> 
> 时间：2013-02-04T20:42:43.507
> 
> 标签：c#, object, random

尝试随机化枚举值。问题是枚举位于我在代码中引用的参考文件中。例如

```
 public enum AccountTypeEnum
{
        Direct,
        Partner,
        Referral,
        Resold,
} 
```

在我的参考文件和我的代码中，我需要引用 AccountTypeEnum 并将其随机化，因此当我运行我的程序时，我可以获得这 4 个值之一。

到目前为止，我认为随机化这些值是这样的：

```
 public void AcctType()
        {
            string[] Types = Enum.GetNames(typeof(AccountTypeEnum));            
            Random randType = new Random();
            int randomenum = randType.Next(Types.Length);
            var ret = Enum.Parse(typeof(AccountTypeEnum), Types[randomenum]);
        } 
```

关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:52:44.017

弄清楚了。创建了一个新类：

```
public class EnumRandomizeer
{
    public static Random rand = new Random();
    public static T GetRandomValue<T>()
    {
        T[] values = (T[])(Enum.GetValues(typeof(T)));
        return values[rand.Next(0, values.Length)];
    }
} 
```

当引用枚举值时，我引用了这样的类：

```
 AccountTypeEnum randomAcct = EnumRandomizeer.GetRandomValue<AccountTypeEnum>(); 
```

工作得很好！

# vb6 - vb6在每第n个空格处拆分空格分隔字符串

> ID：14695270
> 
> 赞同：0
> 
> 时间：2013-02-04T20:42:56.060
> 
> 标签：vb6, split

我有一个空格分隔的字符串变量。我想将变量的内容存储到一个数组中。使用拆分，我可以将每个空格分隔的值存储在一个数组中。如果我可以在每 7 个空格处分隔字符串变量，我会更喜欢。例如，文本可以是：

“喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂喂

这不是字符串的实际内容，而是更易于阅读的更简单版本。我想在单词变化的地方分开，或者每隔 7 个空格分开。任何帮助将不胜感激。我当前的代码看起来像这样，它在每个空间都分开。

```
 ReDim StatsArray(ArrInc)
    StatsArray = Split(Stats)

    For i = 0 To UBound(StatsArray())
        If i > UBound(StatsArray()) Then
            ReDim Preserve StatsArray(i + ArrInc)
        End If

     '  MsgBox StatsArray(i) ' When not commented out, this help me check the array
    Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:17:45.117

没有任何内置函数可以为您执行此操作。我想到了几个解决方案：（1）进行拆分，然后迭代您的数组。连接字符串变量中的七个数组元素。将结果写入新数组。冲洗并重复。(2) 创建一个数组。逐个字符地遍历字符串，将每个字符推入一个变量并跟踪您遇到的空格；当您到达第七个空格时，将一个元素添加到您的数组中，将变量复制到其中并清除该变量。冲洗并重复。

第一个让我觉得有点快，但我可能错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:21:07.820

Another stab at it, though I'd probably optimize the `ReDim Preserve`s, doing them in chunks:

```
Option Explicit

Private Function SplitN( _
    ByRef Source As String, _
    ByVal Delim As String, _
    ByVal N As Long) As String()
    'Delim can be multi-character.
    'Always returns at least 1-element result,
    'even if Source = "".
    Dim SearchPos As Long
    Dim PartPos As Long
    Dim DelimPos As Long
    Dim Parts() As String
    Dim DelimCount As Long
    Dim PartsCount As Long

    SearchPos = 1
    PartPos = SearchPos
    Do
        DelimPos = InStr(SearchPos, Source, Delim)
        If DelimPos > 0 Then
            DelimCount = DelimCount + 1
            If DelimCount = N Then
                DelimCount = 0
                ReDim Preserve Parts(PartsCount)
                Parts(PartsCount) = _
                    Mid$(Source, PartPos, DelimPos - PartPos)
                PartsCount = PartsCount + 1
                PartPos = DelimPos + Len(Delim)
            End If
            SearchPos = DelimPos + Len(Delim)
        End If
    Loop While DelimPos > 0
    ReDim Preserve Parts(PartsCount)
    Parts(PartsCount) = Mid$(Source, PartPos)
    SplitN = Parts
End Function

Private Sub Form_Load()
    Dim S As String
    Dim Parts() As String
    Dim P As Long

    S = "hello hello hello hello hello hello hello " _
      & "hi hi hi hi hi hi hi " _
      & "hey hey hey hey hey hey hey"
    Text1.SelStart = 0
    Text1.SelText = S & vbNewLine & vbNewLine
    Parts = SplitN(S, " ", 7)
    Text1.SelText = "Ubound() = " & UBound(Parts) & vbNewLine
    For P = 0 To UBound(Parts)
        Text1.SelText = Parts(P) & vbNewLine
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:16:55.557

如果我理解您要执行的操作，则“1234 12345678 123”字符串将被拆分为 1234、1234567、8、123。这是正确的吗？

如果是这样，那么您可以使用**正则表达式**为您进行拆分。

```
Function Split7(S As String)
   Dim regex As New RegExp
   regex.Pattern = "[^ ]{7}"
   regex.Global = True
   Split7 = Split(regex.Replace(S, "$& "), " ")
End Function 
```

这将在每 7 个不是空格的字符后插入一个空格。然后使用 split 函数将整个东西放入一个数组中。

# openxml - 如何读取 excel 单元格格式（.XLS 和 .XLSX）

> ID：14695272
> 
> 赞同：2
> 
> 时间：2013-02-04T20:43:02.303
> 
> 标签：openxml, xls, openxml-sdk, xlsx, npoi

我需要阅读 excel 单元格中可用的格式信息。excel 文件可能包含一个带有“一些示例文本”之类的文本的单元格。每个单词都有不同的格式信息。就像单词“Some”可能是粗体并且有不同的字体颜色和大小。下一个词可能有不同的词。

我们可以读取单个单元格值的单个格式信息集吗？如果是，请让我知道如何做同样的事情。

我使用过 NPOI 和 OpenXML SDK 2.5，但没有运气。最好不要使用 excel 互操作，因为这将在服务器中处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:18:16.877

Here is a complete "hacker's answer" to your question.

I made a small Excel file with a single cell like this:

![screen shot of spreadsheet](../Images/ffa42d5b821b08bdd5a3e9809f1b6465.png)

I saved the file, and closed it. Next, I changed the extension of the file from .xlsx to .zip - this allows you to open it and look at the contents. In a subfolder named `xl` you find a file called "sharedStrings.xml" that contains all the strings in the workbook, and their formatting within the cell. This is a giant array - this is done so that if the same value is entered in multiple cells, it is stored only once. Work through this file to get all the strings in all the cells, and their format...

For this particular cell, the sharedStrings.xml file contents start out as follows:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="1" uniqueCount="1">
<si>
<r>
<t xml:space="preserve">This </t>
</r>
<r>
<rPr>
<b/>
<sz val="11"/>
<color theme="1"/>
<rFont val="Calibri"/>
<family val="2"/>
<scheme val="minor"/>
</rPr>
<t>cell</t>
</r>
<r>
<rPr>
<sz val="11"/>
<color theme="1"/>
... etc 
```

By reading this file you will be able to reconstruct all the strings with their formatting. There MUST be a better way...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T09:44:18.317

您正在谈论从 Cell 读取 RichText 值。NPOI 2.0 最终版本将支持它。该版本将于 2014 年第一季度发布。

# facebook - Facebook Like 按钮显示的开关和图像

> ID：14695275
> 
> 赞同：0
> 
> 时间：2013-02-04T20:43:16.003
> 
> 标签：facebook, button, facebook-like, switch-statement, profile

我对 Facebook Like 按钮有疑问，如果一个人是多个页面/帐户的管理员，而不是显示按钮，它会显示一个带有“切换”链接和该人图像的小框。与此处解释的相同... [http://developers.facebook.com/bugs/111826392293111/](http://developers.facebook.com/bugs/111826392293111/)

我使用的是 Facebook 提供的默认代码，而不是任何特殊代码。任何想法或无法修复的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:34:36.310

如果您获得“切换链接”，则表明您当前使用的是 facebook 作为页面，因此无法访问社交插件。返回 facebook.com，将您的身份更改回您的用户个人资料并使用社交插件重新加载页面。这根本不是您的实现中的错误，也不是来自 facebook 的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T12:00:38.757

只需使用：data-height="60" data-width="60" 为例，并限制框的扩展。

# jquery - 在模糊或鼠标移出时隐藏 div

> ID：14695276
> 
> 赞同：0
> 
> 时间：2013-02-04T20:43:17.620
> 
> 标签：jquery, html, hide, show

在失去焦点或模糊后试图隐藏 div。我有一个简单的表单，当通过触摸或点击（这是一个移动网站）关注该字段时，我为用户提供了一些指导。它可以正常工作，但我必须再次单击该字段才能使 div 再次隐藏。

HTML：

```
 <input type="text" id="usernameCL" name="usernameCL" placeholder="Create a Username" autocomplete="off" autocorrect="off" class="field_hints"/>
<div id="usernameCL" class="tooltip_static" style="display:none"> This be my field hint</div> 
```

这是我的另一个领域提示

使用 1.6.4 JQ 的 JQuery 函数：

```
$().ready(function () {
    $('.field_hints').bind('focus',
     function()
     {
       var field = this.id;
       var div = $('.tooltip_static[id='+field+']');

       if(div.css('display') == 'none')
       {
         div.show(function()
         {
           div.slideUp("fast");
         });
       }
      else
      {
        div.hide('blur');
      }
    });
  }); 
```

这是一个小提琴：http: [//jsfiddle.net/LapPA/](http://jsfiddle.net/LapPA/)

任何人都知道如何让它隐藏在模糊或鼠标之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:51:15.457

```
 $('#myformid').on('blur', '.field_hints',function(){
     $(this).next('.tooltip_static').hide();
 }); //replace #myformid with the id of your form 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:52:33.360

您需要一个绑定到`blur`事件的单独处理程序。

例如，您可以这样[做](http://jsfiddle.net/LapPA/6/)：

```
$().ready(function () {
  $('.field_hints').bind('focus',
    function()
    {
      var field = this.id;
      var div = $('.tooltip_static[id='+field+']');

      if(div.css('display') == 'none')
      {
        div.hide(function()
        {
          div.slideDown("fast");
        });
      }
    }).bind('blur', 
        function()
        {
            var field = this.id;
            var div = $('.tooltip_static[id='+field+']');
            div.hide();
        });
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:54:51.283

您可以使用该[`mouseleave`](http://api.jquery.com/mouseleave/)事件：http: [//jsfiddle.net/4VUvD/](http://jsfiddle.net/4VUvD/)

```
$().ready(function () {
      $('.field_hints').bind('focus', function() {
          var field = this.id;
          var div = $('.tooltip_static[id='+field+']');
          div.slideDown("fast");
      }).bind('mouseleave', function(){
          $('.tooltip_static[id='+this.id+']').slideUp("fast");
      });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:54:03.377

首先，您有两个具有相同 id 的对象`usernameCL`。情况不妙。

您正在搜索的代码：

```
var func = function () {
    // We assume the id of the input tag to be #someid, and the tooltip div to be #someid_tooltip
    var id = $(this).attr('id');
    $('#' + id + '_tooltip').fadeOut();
};

$('#usernameCL').bind('blur', func);
$('#usernameCL').bind('mouseout', func); 
```

可能是我搞砸了一个或两个名字。

# python - 未使用 pip 在 vi rtualenv 中安装 Python 包

> ID：14695278
> 
> 赞同：35
> 
> 时间：2013-02-04T20:43:36.667
> 
> 标签：python, twisted, virtualenv, pip

**我在安装 twisted 时遇到问题**

```
pip --version 
```

> 来自 /home/chris/GL/GLBackend/gleenv/lib/python2.7/site-packages/pip-1.1-py2.7.egg 的 pip 1.1（python 2.7）

**创建虚拟环境**

```
chris@chris-mint ~/GL/GLBackend $ sudo virtualenv -p python2.7 glenv 
```

> 使用解释器 /usr/bin/python2.7 运行 virtualenv 在 glenv/bin/python2.7 中新的 python 可执行文件还在 glenv/bin/python 中创建可执行文件..................................................... ..................................................... ..................................................... .......................完毕。安装 pip……完成。

**以防万一，我将启用所有权限**

```
chris@chris-mint ~/GL/GLBackend $ sudo chmod -R 777 glenv

chris@chris-mint ~/GL/GLBackend $ source glenv/bin/activate

(glenv)chris@chris-mint ~/GL/GLBackend $ pip freeze 
```

> argparse==1.2.1 分发==0.6.24 wsgiref==0.1.2

**twisted 未在此处列出为已安装**

```
(glenv)chris@chris-mint ~/GL/GLBackend $ sudo pip install twisted 
```

> 已经满足要求（使用 --upgrade 升级）：扭曲在 /usr/local/lib/python2.7/dist-packages 要求已经满足（使用 --upgrade 升级）：zope.interface>=3.6.0 in / usr/local/lib/python2.7/dist-packages （来自twisted） 要求已经满足（使用--upgrade 升级）：分发在/usr/local/lib/python2.7/dist-packages （来自zope.interface >=3.6.0->twisted) 清理... (glenv)chris@chris-mint ~/GL/GLBackend $ pip uninstall twisted 无法卸载要求 twisted，未安装 存储完整登录 /home/chris/.pip/点子日志

**但是当我安装它时，它说它已经安装了。强制安装：**

```
sudo pip install -I twisted 
```

> 下载/解压twisted 下载Twisted-12.3.0.tar.bz2 (2.6Mb)：下载2.6Mb 运行setup.py egg_info 以获取twisted 包。. .
> 
> 成功安装了twisted zope.interface 分发清理...

**然而它仍然没有安装**

```
(glenv)chris@chris-mint ~/GL/GLBackend $ pip freeze 
```

> argparse==1.2.1 分发==0.6.24 wsgiref==0.1.2

**当我尝试运行使用 twisted 的 Python 脚本时，我收到一条错误消息，指出未安装 twisted。那是：

> ImportError：没有名为 twisted.python 的模块**

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-04T20:58:11.620

这里的问题是你在`sudo`不应该使用的时候使用。这导致`pip`尝试安装到`/usr/local/lib`而不是`~/glenv/lib`. （而且，因为您使用`sudo`了 ，所以它成功地这样做了，但这对您没有帮助，因为您不允许在您的 venv 中使用系统站点包。）

有多种原因`sudo pip`可能导致这种行为，但最有可能的是：在大多数系统上（包括我可以立即访问的各种 Mac 和 RHEL/CentOS 机器），该`sudoers`文件将重置您的环境，然后添加少量列入白名单的环境变量。这意味着当你 时`sudo pip`，它不会看到设置的环境变量`virtualenv`，所以它会回退到做默认的事情并安装到你的系统 Python 中，而不是你的 venv。

*但实际上，为什么*会发生这种情况并不重要。答案是一样的：只做`pip install`而不是`sudo pip install`.

请注意，您*还想*`sudo`在通话中删除`virtualenv`，因为这可能会导致 venv 设置不正确（这就是您需要 的原因`sudo chmod`，否则就没有必要了）。在您的用户主目录下安装东西的全部意义在于您可以使用您的普通用户权限来完成。

附带说明一下，您可能还想升级到更新的`virtualenv`/ `pip`，因为 1.8 和 1.2 有一些错误修复和改进。但我证实，即使使用最新的（1.8.4 和 1.2.1）版本，我也会遇到与您完全相同的问题，所以我认为这与这里无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T10:48:36.170

这`sudo pip`是造成问题的原因。它会将软件包安装在您的系统中，而不是您创建的虚拟环境中。因此，当它说要求已经满足时。尝试添加它指向的目录。在您尝试安装时，您的情况是`/usr/local/lib/python2.7/dist-packages`

如果它在类似的东西里面`/usr/local/lib/...`，它不指向你的 virtualenv 文件夹，那么它就会安装在你的系统中。否则，在正确的情况下，它看起来像这样`/usr/local/lib/..../<name of your virtualenv>/lib`。

您始终可以使用`which python`&之类的命令`which pip`来查看它们是否都在使用我们虚拟环境的占位符。

# tfs - Team Foundation Serivce (TFS) 和正在运行的 Visual Studio 实例

> ID：14695279
> 
> 赞同：1
> 
> 时间：2013-02-04T20:43:43.467
> 
> 标签：tfs, azure-devops

我在 www.visualstudio.com 上使用 TFS（云）创建了一个 repo
我在 myproject.visualstudio.com 上创建了我的 repo，并在尝试运行或单击以下链接时：

**打开 Visual Studio 的新实例，**它会引发错误

> 无法打开文件 vstfs:///Framework/TeamProject/..... 验证文件是否仍然存在，然后重试

我在 SOV 和 MSDN 上搜索了这里，并在 MSDN 论坛上找到了一个帖子，但它是关于一些服务包和更新的。

有人用过这个服务吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:04:52.130

我假设您已经在 yourAccountName.visualstudio.com 上创建了项目

然后，如果您使用的是 VS2010，请安装推荐的更新 SP1 [VS2010 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

之后（可能需要一段时间，长达 30 分钟），只需启动 VS2010，在开始页面上单击连接到 Team Foundation Server，然后在“选择团队 Foundation Server”上单击“服务器”，然后单击“添加”，在“Team Foundation Server 的名称或 URL”中，只需粘贴您的 AccountName 的 URL，例如：“ [https://yourAccountName.visualstudio.com](https://yourAccountName.visualstudio.com) ”（不带引号）。然后您只需单击“确定”即可。您的 VS2010 现在应该与您在 visualstudio.com 上的帐户相关联

这是一种手动方法，但它有效:)

您可以在此 MSDN 博客[Team Foundation Service Preview – Connect Visual Studio 2010 to Your TFS Preview Account中找到更多相关信息](http://blogs.msdn.com/b/visualstudioalm/archive/2011/12/07/connect-visual-studio-2010-to-your-tfs-preview-account.aspx?PageIndex=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:23:40.963

我刚刚找到了一个解决方案，它可以引导我完成 IDE。

1.  运行 VS2012 在 VS 2012 的“开始”下单击“连接到 Team Foundation Server ...”
2.  它将弹出一个对话框，然后在对话框/表单的底部有一个链接为“登录”，点击它
3.  输入您的用户名和密码现在，您已连接到服务器并可以查看您的所有存储库

PS 不要忘记在 IDE 提供的 TFS 列表中添加您的服务器 URL。

# php - 如何将 PHP 与 SSL 一起使用

> ID：14695281
> 
> 赞同：13
> 
> 时间：2013-02-04T20:43:46.923
> 
> 标签：php, ssl

我的服务器通过 https 提供 SSL 连接，尽管证书需要额外付费...

PHP 代码中是否需要更改任何内容才能使用此协议？

我的网站有：

*   通过 POST 的 ajax 表单
*   使用 POST 和 GET 参数的常规表单和页面
*   会话变量

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T20:47:20.707

你应该很高兴。PHP 不影响 SSL 的使用与否。

你应该检查的事情是：

*   您的应用程序中的所有 URL 都是相对的（否`http://`）
*   您的网站中使用的资产（CSS/JS/IMG）（***来自内部***和外部来源）是否也作为相对路径或前缀`https://`

如果在 SSL 支持的站点中没有资产`https://`，浏览器会警告您的访问者有什么不对劲的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-21T12:29:51.787

您可以使用服务器 .htaccess 文件来重定向所有链接。因此，当通过说链接打开标准页面时，服务器将重定向到 https 版本......

```
# Permanent reirect ALL old pages to HTTPS:
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T20:45:05.407

除了任何硬编码的 URL，不，您的代码不应该知道差异，也不应该关心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T20:56:17.640

我不得不说与 mvbrakel 相同，但就会话 cookie/cookie 而言，只有在**所有**页面上都使用 https 时，您才需要打开 HTTPS。

此外，仅将 HTTP 添加到 cookie、js 脚本将无法检查值等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T20:46:50.067

代码不需要更改，除了将所有链接从更改`http://`为`https://`（说真的，不要忘记，否则你没有使用 SSL ......）

# c# - 如何在c#中搜索数据库中的字符串

> ID：14695282
> 
> 赞同：1
> 
> 时间：2013-02-04T20:43:50.597
> 
> 标签：c#, c#-4.0, c#-3.0, facebook-c#-sdk, c#-2.0

这是用于进行搜索的代码

```
 private void button1_Click(object sender, EventArgs e)
    {
        string connectionString = Tyre.Properties.Settings.Default.Database1ConnectionString;
        SqlConnection conn = new SqlConnection(connectionString);
        DataTable dt = new DataTable();
        SqlDataAdapter SDA = new SqlDataAdapter("SELECT * FROM table1 where Nom like " + textBox1.Text, conn);
        SDA.Fill(dt);
        dataGridView1.DataSource = dt;
    } 
```

我得到这个错误

System.Data.dll 中出现“System.Data.SqlClient.SqlException”类型的未处理异常

附加信息：列名“elie”无效。

那是我的应用程序的一个例子： ![在此处输入图像描述](../Images/b3ce82a8815b734913aefe68baf6dd27.png) [单击此处查看图像](http://i50.tinypic.com/opag60.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:46:13.220

首先，您的代码对[SQL Injection](http://xkcd.com/327/)是开放的。您允许用户插入他想要的任何数据，包括

> ; 删除表表 1

要解决与单引号和 % 符号匹配的项目周围的直接问题：

```
"SELECT * FROM table1 where Nom like '%" + textBox1.Text + "%'" 
```

但是，您*绝对*应该考虑使用[参数化查询](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)。

# java - 系统覆盖android 4.0

> ID：14695283
> 
> 赞同：8
> 
> 时间：2013-02-04T20:43:51.067
> 
> 标签：java, android, keyboard

在 android 4.0 之前，您可以使用 TYPE_SYSTEM_OVERLAY 创建和覆盖任何应用程序并使用 FLAG_WATCH_OUTSIDE_TOUCH 进行触摸...现在使用 android 4 您无法接收触摸。

基本上这个想法遵循这个应用程序， [http://www.appbrain.com/app/smart-taskbar-%28sidebar%29/com.smart.taskbar](http://www.appbrain.com/app/smart-taskbar-%28sidebar%29/com.smart.taskbar) 你可以让你的应用程序保持打开状态，或者总是在顶部。它将在任何应用程序上运行。

我到处寻找信息甚至源代码以在 android 4.0 上使用，但没有运气......现在..我知道肯定有应用程序即使在 4.0 上仍然这样做......仍然有办法。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T02:31:05.103

我在[这里找到了适用于 Android 4.0 的完整示例应用程序](http://www.jawsware.mobi/code_OverlayView/)

这里是亮点：

> 要创建覆盖视图，在设置 LayoutParams 时**不要** 将类型设置为 TYPE_SYSTEM_OVERLAY。
> 
> 而是将其设置为[**TYPE_PHONE**](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_PHONE)。
> 
> 使用以下标志：
> 
> [**FLAG_NOT_TOUCH_MODAL**](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_NOT_TOUCH_MODAL)
> 
> [**FLAG_WATCH_OUTSIDE_TOUCH**](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_WATCH_OUTSIDE_TOUCH)
> 
> [**FLAG_NOT_TOUCH_MODAL**](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_NOT_TOUCH_MODAL) << 这个很重要。没有它，焦点将被赋予覆盖和软键（主页、菜单等）按下不会传递给下面的活动。
> 
> 还要确保将[**SYSTEM_ALERT_WINDOW**](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW)权限添加到 mainifest 文件。

# c# - SetEventWinHook 使用 Stack Overflow 使 WPF 应用程序崩溃

> ID：14695290
> 
> 赞同：2
> 
> 时间：2013-02-04T20:44:15.823
> 
> 标签：c#, winapi, crash, stack-overflow, event-hooking

我遇到了一个问题，我的应用程序由于 EventHooking 而使 WPF 应用程序崩溃。下面是我尝试过的简单代码，但仍然能够重新创建崩溃。这仅在针对某种扩展了许多节点的自定义树视图运行时。

```
{
...
_focusChangedHandler =  OnFocusChanged;
_focusChangedGCHandle = GCHandle.Alloc(_focusChangedHandler);
_focusChangedHookId = User32.SetWinEventHook(User32.EVENT_OBJECT_FOCUS,
    User32.EVENT_OBJECT_FOCUS, IntPtr.Zero, _focusChangedHandler,
    0,0,User32.WINEVENT_OUTOFCONTEXT);
...
}

private void OnFocusChanged(IntPtr hWinEventHook, uint eventType,
                            IntPtr hwnd,
                            int idObject, int idChild, uint dwEventThread,
                            uint dwmsEventTime)
{
} 
```

我还让客户使用显式`new User32.WinEventDelegate(OnFocusChanged)`且不使用`GCHandle.Alloc`. 以及所有这些场景的组合。这并没有解决问题

有谁知道为什么会发生这种情况？

*我们确实遇到了这个 WPF 应用程序的问题，并在虚拟化被`IAccessible`调用取消时产生了内存/性能问题，但是我们已经删除了这些调用。

**按要求编辑**

我对第三方的唯一信息来自事件日志：

```
Faulting application name: THIRDPARTY.exe, version: x.y.z, time stamp: 0x4fb0d031
Faulting module name: clr.dll, version: 4.0.30319.296, time stamp: 0x50484aa9
Exception code: 0xc00000fd
Fault offset: 0x00001ac6
Faulting process id: 0x6f50
Faulting application start time: 0x01cdf9a521428158
Faulting application path: C:\Program Files (x86)\THIRDPARTYEXEPATH
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: d8e42ff6-6598-11e2-9614-441ea14b96e0 
```

据我的研究告诉我，异常代码是堆栈溢出

# c# - 横向扩展 Windows 服务

> ID：14695292
> 
> 赞同：7
> 
> 时间：2013-02-04T20:44:18.060
> 
> 标签：c#, windows-services, scalability, horizontal-scaling

我正在寻找有关如何扩展目前在我公司运行的 Windows 服务的一些信息。我们正在使用 .NET 4.0（可以并且将来会升级到 4.5）并在 Windows Server 2012 上运行它。

**关于服务**
该服务的工作是查询日志表中的新行（我们正在使用 Oracle 数据库）、处理信息、创建和/或更新 5 个其他表中的一堆行（我们称它们为跟踪表)，更新记录表并重复。

日志表有大量的 XML（每行最多 20 MB）需要选择并保存在其他 5 个跟踪表中。新行一直以每小时 500,000 行的最大速率添加。
跟踪表的流量要高得多，从最小的表中的 90,000 新行到最大表中的潜在数百万行，每小时不等。更不用说这些表上也有更新操作。

**关于正在处理的数据，**
我觉得这一点对于根据这些对象的分组和处理方式找到解决方案很重要。数据结构如下所示：

```
public class Report
{
    public long Id { get; set; }
    public DateTime CreateTime { get; set; }
    public Guid MessageId { get; set; }
    public string XmlData { get; set; }
}

public class Message
{
    public Guid Id { get; set; }
} 
```

*   报告是我需要选择和处理的日志数据
*   对于每条消息，平均有 5 个报告。在某些情况下，这可以在 1 到数百之间变化。
*   消息有一堆其他集合和其他关系，但它们与问题无关。

* * *

今天，我们几乎没有管理 16 核服务器上的负载的 Windows 服务（我不记得完整的规格，但可以肯定地说这台机器是野兽）。我的任务是找到一种方法来扩展和添加更多机器，这些机器将处理所有这些数据并且不会干扰其他实例。

目前，每条消息都有自己的线程并处理相关报告。我们分批处理报告，按其 MessageId 分组，以在处理数据时将数据库查询的数量减少到最低限度。

**限制**

*   在这个阶段，我可以使用我认为合适的任何架构从头开始重写此服务。
*   如果一个实例崩溃，其他实例需要能够从崩溃的一个离开的地方接起。不会丢失任何数据。
*   从插入数据库的报告开始，此处理需要尽可能接近实时。

* * *

我正在寻找有关如何构建这样一个项目的任何意见或建议。我认为服务需要是无状态的，或者有没有办法以某种方式同步所有实例的缓存？我应该如何在所有实例之间进行协调并确保它们不处理相同的数据？如何在它们之间平均分配负载？当然，如何处理实例崩溃而不完成它的工作？

**编辑**
删除无关信息

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T21:55:22.963

For your work items, Windows Workflow is probably your quickest means to refactor your service.

[Windows Workflow Foundation @ MSDN](http://msdn.microsoft.com/en-us/library/dd489441.aspx)

The most useful thing you'll get out of WF is workflow persistence, where a properly designed workflow may resume from a Persist point, should anything happen to the workflow from the last point at which it was saved.

[Workflow Persistence @ MSDN](http://msdn.microsoft.com/en-us/library/dd489420.aspx)

This includes the ability for a workflow to be recovered from another process should any other process crash while processing the workflow. The resuming process doesn't need to be on the same machine if you use the shared workflow store. Note that all recoverable workflows require the use of the workflow store.

For work distribution, you have a couple options.

1.  A service to produce messages combined with host-based load balancing via workflow invocation using WCF endpoints via the `WorkflowService` class. Note that you'll probably want to use the design-mode editor here to construct entry methods rather than manually setup `Receive` and corresponding `SendReply` handlers (these map to WCF methods). You would likely call the service for every Message, and perhaps also call the service for every Report. Note that the `CanCreateInstance` property is important here. Every invocation tied to it will create a running instance that runs independently.
    ~
    [WorkflowService Class (System.ServiceModel.Activities) @ MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.workflowservice.aspx)
    [Receive Class (System.ServiceModel.Activities) @ MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.receive.aspx)
    [Receive.CanCreateInstance Property (System.ServiceModel.Activities) @ MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.receive.cancreateinstance.aspx)
    [SendReply Class (System.ServiceModel.Activities) @ MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.sendreply.aspx)

2.  Use a service bus that has Queue support. At the minimum, you want something that potentially accepts input from any number of clients, and whose outputs may be uniquely identified and handled exactly once. A few that come to mind are NServiceBus, MSMQ, RabbitMQ, and ZeroMQ. Out of the items mentioned here, NServiceBus is exclusively .NET ready out-of-the-box. In a cloud context, your options also include platform-specific offerings such as Azure Service Bus and Amazon SQS.
    ~
    [NServiceBus](http://nservicebus.com/)
    [MSMQ @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472.aspx)
    [RabbitMQ](http://www.rabbitmq.com/)
    [ZeroMQ](http://www.zeromq.org/)
    [Azure Service Bus @ MSDN](http://msdn.microsoft.com/en-us/library/ee732537.aspx)
    [Amazon SQS @ Amazon AWS](http://aws.amazon.com/sqs/)
    ~
    Note that the service bus is just the glue between a producer that will initiate Messages and a consumer that can exist on any number of machines to read from the queue. Similarly, you can use this indirection for Report generation. Your consumer will create workflow instances that may then use workflow persistence.

3.  Windows AppFabric may be used to host workflows, allowing you to use many techniques that apply to IIS load balancing to distribute your work. I don't personally have any experience with it, so there's not much I can say for it other than it has good monitoring support out-of-the-box.
    ~
    [How to: Host a Workflow Service with Windows App Fabric @ MSDN](http://msdn.microsoft.com/en-us/library/ff729689.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:16:07.237

我通过自己编写所有这些可扩展性和冗余的东西来解决这个问题。如果有人需要，我将解释我做了什么以及我是如何做到的。

我在每个实例中创建了一些进程来跟踪其他进程并知道特定实例可以处理哪些记录。启动时，该实例将在数据库中注册（如果尚未注册）的一个名为`Instances`. 此表具有以下列：

```
Id                 Number
MachineName        Varchar2
LastActive         Timestamp
IsMaster           Number(1) 
```

如果未找到该实例，则在此表中注册并创建一行后`MachineName`，该实例开始在单独的线程中每秒 ping 该表，更新其`LastActive`列。然后它从该表中选择所有行并确保`Master Instance`（稍后会详细介绍）仍然存在 - 这意味着它的`LastActive`时间在最后 10 秒内。如果主实例停止响应，它将承担控制权并将自己设置为主实例。在下一次迭代中，它将确保只有一个 master（以防另一个实例同时决定同时承担控制权），如果没有，它将让给具有最低`Id`.

**什么是主实例？**
该服务的工作是扫描日志表并处理该数据，以便人们可以轻松地过滤和阅读它。我没有在我的问题中说明这一点，但在这里可能是相关的。我们有一堆 ESB 服务器根据请求将多条记录写入日志表，而我的服务的工作是近乎实时地跟踪它们。由于他们正在异步写入日志，因此我可能会在日志中获得一个`finished processing request A`before`started processing request A`条目。所以，我有一些代码可以对这些记录进行排序，并确保我的服务以正确的顺序处理数据。因为我需要扩展这项服务，所以只有一个实例可以执行此逻辑以避免大量不必要的数据库查询和可能的疯狂错误。
这就是`Master Instance`进来。只有它执行这个排序逻辑，并将日志记录 Id 临时保存在另一个名为`ReportAssignment`. 该表的工作是跟踪哪些记录已被处理以及由谁处理。处理完成后，记录将被删除。该表如下所示：

```
RecordId        Number
InstanceId      Number    Nullable 
```

主实例对日志条目进行排序并在此处插入它们的 ID。我的所有服务实例以 1 秒的间隔检查此表，以查找未被任何人处理或正在由非活动实例处理的新记录，以及`[record's Id] % [number of isnstances] == [index of current instance in a sorted array of all the active instances]`（在 Pinging 过程中获取的）。查询看起来有点像这样：

```
SELECT * FROM ReportAssignment 
WHERE (InstanceId IS NULL OR InstanceId NOT IN (1, 2, 3))   // 1,2,3 are the active instances
AND RecordId % 3 == 0    // 0 is the index of the current instance in the list of active instances 
```

**为什么我需要这样做？**

*   其他两个实例将查询`RecordId % 3 == 1`和`RecordId % 3 == 2`。
*   `RecordId % [instanceCount] == [indexOfCurrentInstance]`确保记录在所有实例之间均匀分布。
*   `InstanceId NOT IN (1,2,3)`允许实例接管崩溃的实例正在处理的记录，并且在添加新实例时不处理已经活动的实例的记录。

一旦实例查询这些记录，它将执行更新命令，将 设置`InstanceId`为自己的并查询日志表以获取具有这些 Id 的记录。处理完成后，它会从 中删除记录`ReportAssignment`。

总的来说，我对此感到非常满意。它可以很好地扩展，确保在实例关闭时不会丢失任何数据，并且几乎没有对我们现有的代码进行任何更改。

# excel - 将 50 行移至下一列的脚本 - Excel

> ID：14695296
> 
> 赞同：0
> 
> 时间：2013-02-04T20:44:36.447
> 
> 标签：excel

我有一个关于如何进行以下操作的请求：

我有一个 csv 文件（我在 Excel 中打开），我将一个数据块 50X2（rowsXcolumns）附加到 csv 文件。使用完成的 csv 文件，我想自动化一个过程，其中每 50 行被选中（两列），数据基本上被剪切并复制到接下来的两个可用列。

一个例子是来自 $A$1:$B$50 的数据在 csv 中，然后采集第二个样本，第二组数据转到 $A$51:$B$100 我想自动将第二组移动到$C$1:$D$50 并对所有采集的样本执行该移动。

我不知道这个操作的最佳路线是什么（宏/VBA/等），如果很容易的话，我希望得到一些帮助。

感谢大家的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:07:32.250

需要做的事情背后的基本思想是：

*   获取要创建的新列数（例如`Total Rows/#rows per column`）
*   对于要制作的每个新列，从`nth + 1`行剪切到最后一行，其中`nth`行是您想要的每列的行数（在您的情况下为 50）。
*   将剪切的行粘贴到其中包含数据的最后一列的右侧
*   重复直到完成所有列

这是我整理的一些示例代码，可帮助您入门。这假设您的数据从单元格 A1 开始，并且每列最多应包含 10 行。您可以更改该`rowsToSkip`值以满足您的需求。另外，请注意，这是为了帮助您入门，需要更多测试。按照您认为合适的方式更改它：

```
Public Sub MakeColumnsFromRows()
    Dim totalCutsToMake As Integer
    Dim currentColumn As Integer
    Dim currentCut As Integer
    Dim rowsToCut As Integer

    Sheets(1).Activate
    rowsToSkip = 10
    totalCutsToMake = (ActiveSheet.UsedRange.Rows.Count / rowsToSkip)
    currentColumn = 1

    Dim RowCount As Integer
    For currentCut = 1 To totalCutsToMake
        RowCount = Cells(Rows.Count, currentColumn).End(xlUp).Row
        Range(Cells(rowsToSkip + 1, currentColumn), Cells(RowCount, currentColumn + 1)).Select
        Selection.Cut
        Cells(1, currentColumn + 2).Select
        ActiveSheet.Paste
        currentColumn = currentColumn + 2
    Next
End Sub 
```

它的作用是首先找出要创建多少新列，然后从每列的第 11 行切到最后一行，然后将这些值粘贴到包含数据的最后一列之后。它会这样做，直到所有新列都已创建。请注意，这会留下每列 10 行数据。要将其更改为 50，您只需将`rowsToSkip`变量更改为`50`.

这是之前和之后的屏幕截图：

**前** ![在此处输入图像描述](../Images/6b0cf5ba0babd32baece2a94703ae4fc.png)

**后** ![在此处输入图像描述](../Images/d893c17133b6e2e21b6866a988755d2c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:17:21.507

这个怎么样？

```
Sub move()
    Dim ws As Worksheet
    Dim r As Range
    Dim columnCounter As Long
    Dim rowCounter As Long
    Set ws = Sheets("Sheet1")

    columnCounter = 1
    rowCounter = 51

    Set r = ws.Cells(rowCounter, 1)

    Do While r.Value <> vbNullString
        ws.Range(r, r.Offset(49, 1)).Cut ws.Cells(1, columnCounter)

        columnCounter = columnCounter + 2
        rowCounter = rowCounter + 50

        Set r = ws.Cells(rowCounter, 1)
    Loop
End Sub 
```

# java - 将方法添加到 oracle 制作的 java 类的最佳方法

> ID：14695300
> 
> 赞同：0
> 
> 时间：2013-02-04T20:44:38.810
> 
> 标签：java, buttongroup

我创建了一种方法，当我将它所在的按钮组传递给选定的单选按钮时，它可以从它获取文本。我一直在阅读帮助/实用程序类可能不是最好的主意，因为它们可以变成上帝类，我可以看到一段时间后发生。另外，我只添加了一种方法，并且该方法非常特定于按钮。

所以我的问题是，有没有最好的方法将方法添加到 oracle 制作的类中？每当我创建一个新项目并使用按钮组时，我都希望这种方法始终可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:47:08.387

创建一个包含新方法的子类。

继承：[http ://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:49:33.283

你的意思是你想添加方法[`JRadioButton`](http://docs.oracle.com/javase/7/docs/api/index.html?javax/swing/JRadioButton.html)吗？你不能这样做。完成此操作的典型方法是`extending JRadioButton`添加方法并在任何地方使用该类。

# php - 在原始 DOMDocument 被销毁后访问导入的元素

> ID：14695303
> 
> 赞同：3
> 
> 时间：2013-02-04T20:44:43.843
> 
> 标签：php, html, html-parsing, domdocument, xmlnode

我最近一直在搞乱 DOMDocument，我注意到为了将元素从一个文档传输到下一个文档，我必须调用[`$DOMDocument->importNode()`](http://php.net/manual/en/domdocument.importnode.php)target `DOMDocument`。

但是，我遇到了奇怪的问题，一旦原始文档被破坏，克隆的元素就会行为不端。

* * *

例如，这里有一些可爱的工作代码：

```
$dom1 = new DOMDocument;
$dom2 = new DOMDocument;

$dom2->loadHTML('<div id="div"><span class="inner"></span></div>');
$div = $dom2->getElementById('div');

$children = $dom1->importNode( $div, true )->childNodes;

echo $children->item(0)->tagName; // Output: "span" 
```

这是一个演示：[http ://codepad.viper-7.com/pjd9Ty](http://codepad.viper-7.com/pjd9Ty)

* * *

当我在原始文档超出范围后尝试使用这些元素时，就会出现问题：

```
global $dom;
$dom = new DOMDocument;

function get_div_children () {

    global $dom;

    $local_dom = new DOMDocument;
    $local_dom->loadHTML('<div id="div"><span class="inner"></span></div>');

    $div = $local_dom->getElementById('div');

    return $dom->importNode( $div, true )->childNodes;
}

echo get_div_children()->item(0)->tagName; 
```

以上导致以下错误：

> **PHP 警告**：无法获取`DOMElement`。节点不再存在于...
> **PHP 注意**：未定义的属性：`DOMElement::$tagName`在...

这是一个演示：[http ://codepad.viper-7.com/c0kqOA](http://codepad.viper-7.com/c0kqOA)

* * *

我的问题是双重的：

1.  即使在原始文档被销毁后，返回的元素是否应该存在，因为它们被克隆到当前文档中？

2.  一种解决方法。由于各种原因，我必须在原始文档被销毁之后，但在我真正将它们插入到另一个 DOM 之前，对元素进行操作`DOMDocument`。有没有办法做到这一点？

* * *

**澄清：**我知道如果将元素插入到 DOM 中，它会按预期运行。但是，如上所述，我的设置要求在插入 DOM 之前对元素进行操作（长篇大论）。鉴于这里的第一个示例有效 - 并且在 DOM 之外操作元素是 JavaScript 中的标准过程 - 这难道不应该在这里也是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:40:48.087

The cloned node has a reference to $dom, but $dom has not. Internal PHP garbage collector destroys such nodes when the calling context changes. There is only one way to create this reference: `$dom->documentElement->appendChild($node)`.

So, use code like this (static keyword will prevent garbage collector from destroying your variable):

```
global $dom;
$dom = new DOMDocument;

function get_div_children () {

global $dom;

$local_dom = new DOMDocument;
$local_dom->loadHTML('<div id="div"><span class="inner"></span></div>');

$div = $local_dom->getElementById('div');
static $nodes;
$nodes = $dom->importNode( $div, true )->childNodes;
return $nodes;
}

echo get_div_children()->item(0)->tagName; 
```

# python - 从 numpy.datetime64 转换为 pandas.tslib.Timestamp 错误？

> ID：14695309
> 
> 赞同：3
> 
> 时间：2013-02-04T20:44:55.190
> 
> 标签：python, numpy, python-2.7, timestamp, pandas

我有一个 python 模块，可以将数据直接加载到 numpy.ndarray 的字典中，以便在 pandas.Dataframe 中使用。但是，我注意到“NA”值存在问题。我的文件格式将 NA 值表示为 -9223372036854775808 (boost::integer_traits::const_min)。我的非 NA 值按预期（使用正确的值）加载到 pandas.Dataframe 中。我相信正在发生的事情是我的模块加载到 numpy.datetime64 ndarray 中，然后将其转换为 pandas.tslib.Timestamp 列表。这种转换似乎没有保留“const_min”整数。尝试以下操作：

```
>>> pandas.tslib.Timestamp(-9223372036854775808)
NaT
>>> pandas.tslib.Timestamp(numpy.datetime64(-9223372036854775808))
<Timestamp: 1969-12-31 15:58:10.448384> 
```

这是熊猫错误吗？我想我可以让我的模块避免在这种情况下使用 numpy.ndarray，并使用 Pandas 不会触发的东西（也许预先分配 tslib.Timestamp 本身的列表。）

这是发生意外事情的另一个例子：

```
>>> npa = numpy.ndarray(1, dtype=numpy.datetime64)
>>> npa[0] = -9223372036854775808
>>> pandas.Series(npa)
0   NaT
>>> pandas.Series(npa)[0]
<Timestamp: 1969-12-31 15:58:10.448384> 
```

在下面杰夫的评论之后，我有更多关于出了什么问题的信息。

```
>>> npa = numpy.ndarray(2, dtype=numpy.int64)
>>> npa[0] = -9223372036854775808
>>> npa[1] = 1326834000090451
>>> npa
array([-9223372036854775808,     1326834000090451])
>>> s_npa = pandas.Series(npa, dtype='M8[us]')
>>> s_npa
0                          NaT
1   2012-01-17 21:00:00.090451 
```

耶！该系列保留了 NA 和我的时间戳。但是，如果我尝试从该系列创建一个 DataFrame，则 NaT 会消失。

```
>>> pandas.DataFrame({'ts':s_npa})
                      ts
0 1969-12-31 15:58:10.448384
1 2012-01-17 21:00:00.090451 
```

哼哼。一时兴起，我尝试将我的整数解释为过去纪元的纳秒。令我惊讶的是，DataFrame 工作正常：

```
s2_npa = pandas.Series(npa, dtype='M8[ns]')
>>> s2_npa
0                             NaT
1   1970-01-16 08:33:54.000090451
>>> pandas.DataFrame({"ts":s2_npa})
                             ts
0                           NaT
1 1970-01-16 08:33:54.000090451 
```

当然，我的时间戳是不对的。我的观点是 pandas.DataFrame 在这里的行为不一致。为什么在使用 dtype='M8[ns]' 时保留 NaT，但在使用 'M8[us]' 时不保留？

我目前正在使用此解决方法来转换 ，这会减慢速度，但可以：

```
>>> s = pandas.Series([1000*ts if ts != -9223372036854775808 else ts for ts in npa], dtype='M8[ns]')
>>> pandas.DataFrame({'ts':s})
                          ts
0                        NaT
1 2012-01-17 21:00:00.090451 
```

（几个小时后……）

好的，我有进展了。我深入研究了代码，发现 Series 上的**repr**函数最终调用了“_format_datetime64”，它检查“isnull”并打印出“NaT”，这解释了这两者之间的区别。

```
>>> pandas.Series(npa)
0   NaT
>>> pandas.Series(npa)[0]
<Timestamp: 1969-12-31 15:58:10.448384> 
```

前者*似乎*尊重 NA，但它只在打印时这样做。我想可能还有其他 pandas 函数调用“isnull”并根据答案采取行动，在这种情况下，这似乎部分适用于 NA 时间戳。但是，我知道由于元素零的类型，Series 是不正确的。它是**Timestamp**，但应该是**NaTType**。我的下一步是深入研究 Series 的构造函数，以找出 pandas 在构造过程中何时/如何使用**NaT**值。据推测，当我指定 dtype='M8[us]'... 时，它丢失了一个案例。

按照 Andy 在评论中的建议，我尝试使用 pandas Timestamp 来解决问题。它没有用。以下是这些结果的示例：

```
>>> npa = numpy.ndarray(1, dtype='i8')
>>> npa[0] = -9223372036854775808
>>> npa
array([-9223372036854775808])
>>> pandas.tslib.Timestamp(npa.view('M8[ns]')[0]).value
-9223372036854775808
>>> pandas.tslib.Timestamp(npa.view('M8[us]')[0]).value
-28909551616000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:03:22.210

答案：没有

从技术上讲，就是这样。我在 github 上发布了这个错误并在这里得到了回复： [https ://github.com/pydata/pandas/issues/2800#issuecomment-13161074](https://github.com/pydata/pandas/issues/2800#issuecomment-13161074)

“目前在索引等方面不支持纳秒以外的单位。这应该严格执行”

我使用“ns”而不是“us”运行的所有测试都可以正常工作。我期待着未来的版本。

对于任何有兴趣的人，我修改了我的 C++ python 模块以迭代我从磁盘加载的 int64_t 数组，并将除 NA 值 (boost::integer_traits::const_min) 之外的所有值乘以 1000。我担心性能，但加载时间的差异对我来说很小。（在 Python 中做同样的事情非常非常慢。）

# c# - 返回数组中最大值的函数

> ID：14695310
> 
> 赞同：0
> 
> 时间：2013-02-04T20:44:58.317
> 
> 标签：c#, arrays, function, for-loop

我仍然对函数和数组有一些小问题。我创建了一个填充了随机数的数组。我正在尝试创建一个设置数组并返回最大值的函数。我不确定如何处理这个问题，但是这个和我到目前为止所写的内容都无法编译。

```
namespace Task_1._13
{
    class Program
    {
        static void Main(string[] args)
        {
            gettingMaximum(int i);
        }

        public int gettingMaximum(int i);
        {        
            int maximum = 0;
            int[] myArray = new int[10];
            Random rand = new Random();

            for (int i = 0; i < myArray.Length; i++)
            { 
                myArray[i] = rand.Next(19);
            }
            for (int i = 0; i < 10; i++)
            {
                if (i == 0)
                    maximum = myArray[i];
                else
                    if (myArray[i] < maximum) maximum = myArray[i];
                int result = i;
                return result;
            }
        }
    }
} 
```

这就是我到目前为止所得到的。我在编程方面不是很有经验，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:49:09.743

```
for (int i = 0; i < myArray.Length; i++)
        {
            if(myArray[i] > maximum)
           {
             maximum = myArray[i];
           }
        }
return maximum; 
```

或者你可以像这样使用[Max 函数](http://msdn.microsoft.com/en-us/library/bb549329.aspx)

```
return myArray.Max(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:49:22.740

如果要返回最大值，可以使用`System.Linq`和使用`Max`函数。

```
int largestValue = myArray.Max(); 
```

[Enunerable.Max 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.max.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:51:01.823

```
public int gettingMaximum();
{

int maximum = 0;
int[] myArray = new int[10];
Random rand = new Random();

    for (int i = 0; i < myArray.Length; i++)
    {
        myArray[i] = rand.Next(19);
    }
    for (int i = 0; i < myArray.Length; i++)
    {
        if (i == 0)
            maximum = myArray[i];
        else
            if (myArray[i] > maximum) maximum = myArray[i];
    }
    return maximum;
} 
```

这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:16:00.800

更新了评论

```
namespace Task_1._13
{
    class Program
    {
        static void Main(string[] args)
        {
            // gettingMaximum(int i); This won't work because the int can't be declared while it's being passed into the method
            int i = 0; // You need to declare the i before you pass it to a method. Although look closely at your method and the reason you are passing in a value. Do you need it or use it?
            Console.WriteLine(gettingMaximum(i)); // I'm outputting the results to the screen so that you can verify that at least something happened
        }

        public static int gettingMaximum(int z)//; You don't need the semicolon here  
                                               // Also, I renamed this to z to demonstrate that you never use it. You could just as easily remove it
                                               // Also, this method must be marked static which is outside the scope of this question
        {
            int maximum = 0;
            int[] myArray = new int[10];
            Random rand = new Random();

            // This looks good. You create the array and loop through the items and set the value
            for (int i = 0; i < myArray.Length; i++)
            { 
                myArray[i] = rand.Next(19);
            }

            // This code counts to 10\. During each step, it compares the current step with 0\. 
            // If the step (i) is 0, you set the maximum to to that value.
            // Otherwise, you see if the array value at that step is LESS than the current maximum, and if it is
            // you set the maximum to be that value. 
            //for (int i = 0; i < 10; i++) 
            //{
            //    if (i == 0)
            //        maximum = myArray[i];
            //    else
            //        if (myArray[i] < maximum) maximum = myArray[i];
            //    int result = i;   // Here, you're actually setting the result to the current step number
            //    return result;   // I think you meant to set it to maximum, but you can leave it out completely and just return maximum. 
            //}

            for (int i = 0; i < 10; i++)
            {
                if (i == 0)
                {
                    maximum = myArray[i];
                }
                else
                { // Since you have nested if's, i'm using braces to illustrate the paths of the branches
                    if (myArray[i] > maximum) // What i think you mean is, is the value at this item in the array MORE than my current maximum
                    {
                        maximum = myArray[i];
                    }
                }
            }

            return maximum;
        }
    }
} 
```

# ios - FBSession：尝试重新授权未打开会话的权限

> ID：14695312
> 
> 赞同：16
> 
> 时间：2013-02-04T20:45:01.470
> 
> 标签：ios, objective-c, facebook, sdk

我正在按照本[教程](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/) 在 Facebook SDK 3.1 上实现视图预览帖子，但是当我调用此方法时...

```
// Ask for publish_actions permissions in context
    if ([FBSession.activeSession.permissions
         indexOfObject:@"publish_actions"] == NSNotFound) {
        // No permissions found in session, ask for it
        [FBSession.activeSession
         reauthorizeWithPublishPermissions:
         [NSArray arrayWithObject:@"publish_actions"]
         defaultAudience:FBSessionDefaultAudienceFriends
         completionHandler:^(FBSession *session, NSError *error) {
             if (!error) {
                 // If permissions granted, publish the story
                 [self publishStory];
             }
         }];
    } else {
        // If permissions present, publish the story
        [self publishStory];
    } 
```

...

返回以下错误：

> ***由于未捕获的异常“com.facebook.sdk：InvalidOperationException”而终止应用程序，原因：“FBSession：尝试重新授权未打开会话的权限”

到底是怎么回事？谢谢！

**编辑：** 跑我的朋友，非常感谢，但仍然有一个细节......什么时候发布他第一次要求授权应用程序我授权这个秋天

/* * 打开一个具有发布权限的新会话 */

```
 [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                   defaultAudience:FBSessionDefaultAudienceOnlyMe
                                      allowLoginUI:YES
                                 completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                     if (!error && status == FBSessionStateOpen) {
                                         [self publishStory];
                                     }else{
                                         NSLog(@"error");
                                        //Here I get the error mentioned below
                                     }
                                 }];
} 
```

出现错误：错误：

> 域 = com.facebook.sdk，代码 = 5

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-04T21:37:18.183

该错误表示未打开 FBSession。所以你应该在尝试重新授权之前检查会话是否打开。

```
if ([[FBSession activeSession] isOpen]) {
  /* 
   * if the current session has no publish permission we need to reauthorize 
   */
  if ([[[FBSession activeSession] permissions]indexOfObject:@"publish_actions"] == NSNotFound) {

        [[FBSession activeSession] requestNewPublishPermissions:[NSArray arrayWithObject:@"publish_actions"] defaultAudience:FBSessionDefaultAudienceFriends
                                              completionHandler:^(FBSession *session,NSError *error){
                                                  [self postPhoto];
                                              }];

    }else{
        [self publishStory];
    }
}else{
    /* 
     * open a new session with publish permission 
     */
    [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                       defaultAudience:FBSessionDefaultAudienceOnlyMe
                                          allowLoginUI:YES
                                     completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                         if (!error && status == FBSessionStateOpen) {
                                             [self publishStory];
                                         }else{
                                             NSLog(@"error");
                                         }
                                     }];
} 
```

确保始终请求相同的权限，应该是**publish_actions**（注意复数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T07:08:07.120

您还需要 AppDelegate 中的另一种方法：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBAppCall handleOpenURL:url
                  sourceApplication:sourceApplication
                    fallbackHandler:^(FBAppCall *call) {
                        NSLog(@"In fallback handler");
                    }];
} 
```

如果在 safari 中完成身份验证，这将处理 url 回调。之后，FBSession 将打开。

# java - java字符串拆分查询

> ID：14695313
> 
> 赞同：2
> 
> 时间：2013-02-04T20:45:04.970
> 
> 标签：java

我正在大脑冻结-我正在运行以下命令（在java中拆分字符串-尝试将“|”周围的字符分开）。split 命令给了我一个单独的字符数组，而不是 '|' 周围的值 特点。任何有用的建议都将受到欢迎。例如，在下面的例子中，我试图在三个不同的数组位置检索“abc”、“123456789”和“def”。

```
//testKey is the following "abc|123456789|def"
String[] keySplit = testKey.split("|");
//I am getting null in keySplit[0] & "a" in keySplit[1] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T20:45:28.803

**[String#split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)**使用正则表达式。此外，管道运算符`|`是正则表达式中的特殊字符（意思是*OR*）。因此，您需要在此处转义该字符：

```
String[] keySplit = testKey.split("\\|"); 
```

# vb.net - 使用 vb 2008 获取选定的列表框项目值以显示在另一个列表框中

> ID：14695322
> 
> 赞同：0
> 
> 时间：2013-02-04T20:45:47.837
> 
> 标签：vb.net, listbox

我有一个带有 2 个列表框的表单。在这里，listbox1 填充了演员的姓名。如果从 listbox1 中选择了一个名称，则 listbox2 应该显示涉及该名称的电影的标题。如果选择了另一个名称，listbox2 将显示涉及该名称的电影的标题。

```
Call Connect()
    With Me
        STRSQL = "select mTitle from selectmovie where cName = '" & lstNames.SelectedItem & "'"
        Try
            myCmd.Connection = myConn
            myCmd.CommandText = STRSQL
            myReader = myCmd.ExecuteReader
            If (myReader.Read()) Then
                myReader.Close()
                myAdptr.SelectCommand = myCmd
                myAdptr.Fill(myDataTable)
                lstTitle.DisplayMember = "mTitle"
                lstTitle.ValueMember = "mTitle"

                If myDataTable.Rows.Count > 0 Then
                    For i As Integer = 0 To myDataTable.Rows.Count - 1
                        lstTitle.Items.Add(myDataTable.Rows(i)("mTitle"))
                    Next
                End If
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End With 
```

没有错误。当我选择 1 项时，结果是正确的，但它留下了很多空间..这里是我的表单的屏幕截图：http: [//www.flickr.com/photos/92925726@N06/8445945758/in/photostream/](http://www.flickr.com/photos/92925726@N06/8445945758/in/photostream/)

当我选择actor3时输出变得更糟：http: [//www.flickr.com/photos/92925726@N06/8445945724/in/photostream/](http://www.flickr.com/photos/92925726@N06/8445945724/in/photostream/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:17:50.963

Your main problem seems to be that you do not clear your `lstTitle` control before re-loading it with the new selection. Therefore, each time you select a new name, it will add all the titles for that name to the existing list of titles that are already loaded. Also, instead of using an integer to iterate all the indexes, it is easier to just use a `For Each` loop:

```
lstTitle.Items.Clear()
For Each row As DataRow In myDataTable.Rows
    lstTitle.Items.Add(row("mTitle"))
Next 
```

However, I must also mention that you really should also be using a parameter in your query rather than dynamically building the SQL statement like that, for instance:

```
myCmd.CommandText = "select mTitle from selectmovie where cName = @name"
myCmd.Parameters.AddWithValue("name", lstNames.SelectedItem) 
```

To select all the movies where all of the multiple selected actors are involved, you would need to add an additional condition to your where clause for each actor, for instance:

```
Dim builder As New StringBuilder()
builder.Append("select distinct mTitle from selectmovie where ")
For i As Integer = 0 to lstNames.SelectedItems.Count - 1
    Dim parameterName As String = "@name" & i.ToString()
    If i <> 0 Then
        builder.Append("and ")
    End If
    builder.Append(parameterName)
    builder.Append(" in (select cName from selectmovie where mTitle = m.mTitle) ")
    myCmd.Parameters.AddWithValue(parameterName, lstNames.SelectedItems(i))
Next
myCmd.CommandText = builder.ToString() 
```

# inversion-of-control - 从工厂模式到 IoC

> ID：14695326
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:06.977
> 
> 标签：inversion-of-control, unity-container, factory-pattern

因此，我了解 IoC，尤其是在“将未知的混凝土注入”到课程中时。在构造函数中或通过属性将“ILogger”注入类的最通用示例。

现在，我有一个较旧的工厂模式，我试图弄清楚如何/是否可以转换为 IoC。（我正在使用 Unity，仅供参考）。

下面我有我的旧工厂模式。它基本上是根据当前的天然气（石油）价格做出工厂决定。如果汽油真的很贵，我会骑自行车。如果汽油价格中等，我会开车。如果汽油变得便宜，那我开卡车上班！（这是一个愚蠢的例子，请随它去吧）。

我不明白的是我如何将其“翻译”为 IoC ......当涉及到返回哪个具体类的业务逻辑决策时。

我错过了什么？也许我还需要工厂？还是我错过了一些关键概念？

在此先感谢您的帮助...

```
namespace MyApp
{
    public interface IVehicle
    {
        void MakeTrip();
    }

    public class Bicycle : IVehicle
    {
        public void MakeTrip() { Console.WriteLine("Bicycles are good when gas is expensive."); }
    }

    public class Car : IVehicle
    {
        public void MakeTrip() { Console.WriteLine("Cars are good when gas is medium priced"); }
    }

    public class PickupTruck : IVehicle
    {
        public void MakeTrip() { Console.WriteLine("Gas is back to 1980's prices.  Drive the truck!"); }
    }

    public static class VehicleFactory
    {

        public static IVehicle GetAConcreteVehicle(decimal priceOfGasPerGallon)
        {
            if (priceOfGasPerGallon > 4.00M)
            {
                return new Bicycle();
            }

            if (priceOfGasPerGallon > 2.00M)
            {
                return new Car();
            }

            return new PickupTruck();
        }
    }

public class TripControllerOldFactoryVersion
{
    public decimal PriceOfGasPerGallon { get; set; }

    public TripControllerOldFactoryVersion(decimal priceOfGas)
    {
        this.PriceOfGasPerGallon = priceOfGas;
    }
    public void TakeATrip()
    {
        IVehicle v = VehicleFactory.GetAConcreteVehicle(this.PriceOfGasPerGallon);
        v.MakeTrip();
    }
}

}

    class Program
    {
        static void Main(string[] args)
        {

            try
            {
                TripControllerOldFactoryVersion controller1 = new TripControllerOldFactoryVersion(5.00M);
                controller1.TakeATrip();

                TripControllerOldFactoryVersion controller2 = new TripControllerOldFactoryVersion(3.33M);
                controller2.TakeATrip();

                TripControllerOldFactoryVersion controller3 = new TripControllerOldFactoryVersion(0.99M);
                controller3.TakeATrip();

            }
            catch (Exception ex)
            {

                Exception exc = ex;
                while (null != exc)
                {
                    Console.WriteLine(exc.Message);
                    exc = exc.InnerException;
                }
            }
            finally
            {
                Console.WriteLine("Press ENTER to Exit");
                Console.ReadLine();
            }

        }
} 
```

所以上面是工厂版本。

因此，我试图找出将其转换为 IoC 的最佳方法，但仍有一些“基于天然气价格”的逻辑来确定 IVehicle。

启动代码如下。

```
public class TripControllerIoCVersion
{
    public IVehicle TheVehicle { get; set; }

    public TripControllerIoCVersion(IVehicle v)
    {
        this.TheVehicle = v;
    }
    public void TakeATrip()
    {
        if (null != this.TheVehicle)
        {
            this.TheVehicle.MakeTrip();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:01:22.463

出色地。我想通了一些东西。我仍然需要考虑。我不喜欢硬编码的“关键”名称。但它确实有效。

仍然需要上面的代码，但我将“工厂”更改为下面的代码。

一是统一配置。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>

  <unity>
    <container>

      <register type="MyProjectName.IVehicle, MyProjectName" mapTo="MyProjectName.Bicycle, MyProjectName" name="myBicycleKey" />
      <register type="MyProjectName.IVehicle, MyProjectName" mapTo="MyProjectName.Car, MyProjectName" name="myCarKey" />
      <register type="MyProjectName.IVehicle, MyProjectName" mapTo="MyProjectName.PickupTruck, MyProjectName" name="myPickupTruckKey" />

    </container>
  </unity>

</configuration> 
```

现在是cs代码。

```
public static class VehicleFactory
{

    public static IVehicle GetAConcreteVehicle(decimal priceOfGasPerGallon)
    {

        var container = new UnityContainer();

        UnityConfigurationSection section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
        section.Configure(container);

        IVehicle v = null;

        if (priceOfGasPerGallon > 4.00M)
        {
            v = container.Resolve<IVehicle>("myBicycleKey");
            return v;
        }

        if (priceOfGasPerGallon > 2.00M)
        {
            v = container.Resolve<IVehicle>("myCarKey");
            return v;
        }

        v = container.Resolve<IVehicle>("myPickupTruckKey");
        return v;

    }
} 
```

我想我从这里得到了这个想法：

[http://www.sharpfellows.com/post/Unity-IoC-Container-.aspx](http://www.sharpfellows.com/post/Unity-IoC-Container-.aspx)

# python - Python，如何在捕获异常后保持程序运行

> ID：14695330
> 
> 赞同：4
> 
> 时间：2013-02-04T20:46:16.810
> 
> 标签：python, exception, pyodbc

可能是一个简单的问题，因为我对 python 和一般编程相当陌生，但我目前正在改进我的程序，并且无法弄清楚如果捕获到异常，如何让程序继续运行。也许我以错误的方式看待它，但例如我有一些类似的东西：

```
 self.thread = threading.Thread(target=self.run)
    self.thread.setDaemon(True)
    self.thread.start()

    def run(self):
        logging.info("Starting Awesome Program") 
        try:
            while 1:
                awesome_program(self)
    except:
        logging.exception('Got exception on main handler')
        OnError(self)

    def OnError(self):
        self.Destroy() 
```

显然，我目前只是在遇到错误时终止程序。awesome_program 基本上是使用 pyodbc 在远程数据库上连接和运行查询。连接丢失时会出现问题。如果我没有捕捉到异常，程序就会冻结，所以我将它设置为它会杀死程序，但如果没有人手动重新启动它，这并不总是理想的。有没有一种简单的方法可以保持程序运行或重新启动它。随意责备我不正确的语法或糟糕的编程技能。我正在尝试自学，但我仍然是个新手，还有很多我不明白或可能做得不对的地方。如果需要，我可以发布更多代码。我不知道要发布多少才不会被压倒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:48:18.427

在循环中捕获异常并继续，即使捕获到异常也是如此。

```
def run(self):
        logging.info("Starting Awesome Program") 
        while 1:
            try:
                awesome_program(self)
            except:
                logging.exception('Got exception on main handler')
                OnError(self) 
```

顺便提一句：

*   你的缩进似乎搞砸了。
*   我宁愿`while True`. 与 C 不同， Python 具有`bool`类型，因此当需要一个布尔值时 - 给出`while`一个布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:50:07.933

你正在寻找这个：

```
def run(self):
     while True:
         try:
             do_things()
         except Exception as ex:
             logging.info("Caught exception {}".format(ex)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:50:40.590

看看[Python 异常处理](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)，尤其是`Try...Except`。它将允许您捕获特定错误并根据您的选择进行处理，如果可能的话，甚至可以完全忽略它们。例如：

```
try:
    while something == True:
        do_stuff()
except ExceptionType:
    print "Something bad happened!" #An error occurred, but the script continues
except:
    print "Something worse happened!"
    raise #a worse error occurred, now we kill it
do_more_stuff() 
```

# jquery - 在主干 js 应用程序中处理键盘和模糊/焦点事件

> ID：14695332
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:17.440
> 
> 标签：jquery, backbone.js, marionette

我正在使用backbonejs和marionette构建一个应用程序，需要一些关于如何根据键更改字段焦点和检测“div”或“li”标签的模糊/焦点输出的输入。

[http://jsbin.com/akiyiw/18/edit](http://jsbin.com/akiyiw/18/edit)

上面的 jsbin 链接显示了我现在拥有的东西，并试图实现以下目标。

1.  在标题字段中键入“enter”键时，焦点应移动到第一行的“fullname”字段。

2.  同样，在第一行（GridRow 视图）中的任何地方（全名文本字段或其他元素，如“p”等）键入“enter”键时，焦点应移至下一行，依此类推。

3.  还想检测该行（ GridRow 视图）退出的焦点以触发自动保存。退出可能是由于“回车”键或由于在行外单击鼠标所致。

对于#1 和#2，我一直在尝试使用 keydown 事件，但不确定如何将焦点从一个视图移动到另一个视图。

对于#3，我尝试使用 blur 和 focusout 事件，但不是很成功。

关于如何实现这一点的任何想法都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:08:08.907

当您使用 marionete 时，您可以使用事件聚合器并在其他视图上触发事件。 [http://lostechies.com/derickbailey/category/backbone-eventbinder/](http://lostechies.com/derickbailey/category/backbone-eventbinder/)

在这篇博文中，德里克解释得更好。

希望这可以帮助

# ruby - 用于剥离 BBCode 的 Ruby 正则表达式

> ID：14695333
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:23.093
> 
> 标签：ruby, regex, bbcode, gsub

我正在尝试从给定的字符串中删除 BBCode（仅`gsub`与一些正则表达式一起使用）。

这是一个示例字符串：

```
The [b]quick[/b] brown [url=http://example.com]fox[/url] jumps over the lazy dog [img=http://example.com/lazy_dog.png] 
```

我需要输出的是：

```
The quick brown fox jumps over the lazy dog 
```

那么有什么办法呢？我找到了各种这样做的例子，但没有一个适用于我的用例。

我试过的一个：`/\[(\w+)[^w]*?](.*?)\[\/\1]/`

但这不会抓住结束`[img]`标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:07:18.510

**这篇文章的目的是展示如何解释 BBCode 的差异，在保留内容的同时剥离 BBCode 标签时应该考虑到这一点**

这只会删除[此页面](http://www.bbcode.org/reference.php)定义的 BB 代码标签。

不过，它可能会删除超出有效 BB 代码标签的内容。例如，[这个 BBCode tester](http://www.bbcode.org/playground.php)`[b ]Bold[/b]`没有加粗，**所以**在右边，这些标签应该单独留下。但将被下面的正则表达式删除。它还将清除明显的非BBCode，例如`[\b]``[\b=something]`

另一个例子是`[url=http://example.com/ ][/url]`（注意空格）。根据 BBCode 解析器，这可能好也可能不好。下面的正则表达式忽略开始标记，但删除结束标记。

```
/\[\/?(?:b|u|i|s|size|color|center|quote|url|img|ul|ol|list|li|\*|code|table|tr|th|td|youtube|gvideo)(?:=[^\]\s]+)?\]/ 
```

`[code]`正则表达式也没有正确处理该标记，如[本演示](http://rubular.com/r/WByH1afM23)中所示。替换应该单独留`[code]`在`code`标签之间。

此[BBCode 测试器](http://www.tytyweb.net/projects/smf/bbcode/)允许`[b][b][b]Text[/b][/b][/b]`将其解析为`Text`粗体，但另一个将其解释为`[b][b]Text[/b][/b]`部分`[b][b]Text`加粗，其余部分不加粗。如果您允许嵌套标签，那么正则表达式不是一个好的选择。

# android - 媒体播放器 NullPointerException

> ID：14695335
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:26.427
> 
> 标签：android, nullpointerexception, android-mediaplayer

我在我的应用程序中使用媒体播放器（铃声的 mp3 声音）。我的应用程序工作正常，但我在 google play 开发者控制台上看到错误报告（仅部分用户） 问题出在哪里，我不知道，谢谢（我测试了所有声音）

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    soundname= new String[]  {"Sound1","Sound2","Sound3","Sound4","Sound5","Sound6"}; 
    soundfile= new int[] {R.raw.sound1,R.raw.sound2,R.raw.sound3,R.raw.sound4,R.raw.sound5,R.raw.sound6};

    this.setContentView(R.layout.single_list_item_view);

    TextView txtProduct = (TextView) findViewById(R.id.product_label);
    Intent intent = getIntent();
    int position = intent.getExtras().getInt("position");

    txtProduct.setText(soundname[position]);
    mediaPlayer = MediaPlayer.create(this, soundfile[position]); 

    Button btnplay= (Button) findViewById(R.id.btnoynat);
    btnplay.setOnClickListener(new View.OnClickListener(){

        public void onClick(View arg0) { 
                mediaPlayer.start();         
        }
        }); 
```

错误日志；(mediaPlayer.start();-->SingleListItem.java:60)

```
java.lang.NullPointerException
at com.zilsesleri.SingleListItem$1.onClick(SingleListItem.java:60)  
at android.view.View.performClick(View.java:2538)
at android.view.View$PerformClick.run(View.java:9152)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3693)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:53:47.630

Android 只能分配一定数量的 MediaPlayer 对象，这需要开发人员在完成后释放任何 MediaPlayer 对象，方法是调用`mediaPlayer.release();`

不幸的是，许多开发人员没有这样做，这导致 MediaPlayer 对象池返回 null 而不是分配新对象。

阅读更多相关信息：[MediPlayer API](http://developer.android.com/reference/android/media/MediaPlayer.html#release%28%29)

无论如何，您可能想要检查 null 并以适合您的应用程序的方式处理它。

# c++ - qmap unicode qstring 不工作

> ID：14695337
> 
> 赞同：1
> 
> 时间：2013-02-04T20:46:28.517
> 
> 标签：c++, qt, unicode, qmap

我试图使用从语言名称到本地文件名的映射，例如：

```
QMap<QString, QString> map;
map.insert("Русский", "russian"); 
```

然而，当我转储值时，结果为空：

```
QMap<QString, QString>::const_iterator it = map.begin();
while (it != map.end())
{
    qDebug() << "Language: " << it.key();
    ++it;
}

Language: "" 
```

我尝试将 QTextCodec 设置如下：

```
QTextCodec * codec = QTextCodec::codecForName("UTF-8");
QTextCodec::setCodecForTr(codec);
m_langMap.insert(codec->fromUnicode("Русский"), "russian"); 
```

然而同样的结果。我在这里做错了什么？我真的需要这张地图在几个地方使用而不复制代码。

谢谢

== 编辑 ==

对不起，我以为我在编辑我自己的。这是非工作代码，与我制作的简短示例大致相同。工作文件是一个大得多的文件。

在 CTOR 中：

```
m_ui->setupUi(this);

m_langMap.insert(QString::fromWCharArray(L"English"), "english");
m_langMap.insert(QString::fromWCharArray(L"Dansk"), "dansk");
m_langMap.insert(QString::fromWCharArray(L"Nederlands"), "dutch");
m_langMap.insert(QString::fromWCharArray(L"Čeština"), "czeck");
m_langMap.insert(QString::fromWCharArray(L"Slovenský"), "slovak");
m_langMap.insert(QString::fromWCharArray(L"Magyar"), "hungarian");
m_langMap.insert(QString::fromWCharArray(L"Român"), "romanian");
m_langMap.insert(QString::fromWCharArray(L"Latviešu"), "latvian");
m_langMap.insert(QString::fromWCharArray(L"Lietuvių"), "lithuanian");
m_langMap.insert(QString::fromWCharArray(L"Polski"), "polish");
m_langMap.insert(QString::fromWCharArray(L"Português"), "portuguese");
m_langMap.insert(QString::fromWCharArray(L"Español"), "spanish");
m_langMap.insert(QString::fromWCharArray(L"Français"), "french");
m_langMap.insert(QString::fromWCharArray(L"Italiano"), "italian");
m_langMap.insert(QString::fromWCharArray(L"Svenska"), "swedish");
m_langMap.insert(QString::fromWCharArray(L"Русский"), "russian");
m_langMap.insert(QString::fromWCharArray(L"Українська"), "ukranian");
m_langMap.insert(QString::fromWCharArray(L"Русский"), "russian");
m_langMap.insert(QString::fromWCharArray(L"中文"), "chinese");
m_langMap.insert(QString::fromWCharArray(L"日本語"), "japanese");

QMap<QString, QString>::const_iterator it = m_langMap.begin();
while (it != m_langMap.end())
{
    m_form.language_combo->addItem(it.key());
    ++it;
} 
```

== 编辑 2 ===

我在这里创建了一个新问题：

[qt 应用程序中的 Unicode 字符不显示](https://stackoverflow.com/questions/14776921/unicode-characters-in-qt-app-dont-show-up)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:17:20.200

这有效：

```
map.insert(QString::fromWCharArray(L"Русский"), "russian"); 
```

**编辑：**

使用 QStringList 也可以：

```
QStringList sl;
sl << QString::fromWCharArray(L"Русский")
   << QString::fromWCharArray(L"English")
   << QString::fromWCharArray(L"日本語");
ui->comboBox->addItems(sl); 
```

# php - 如何将 Twitter API 中的特殊字符存储到 MySQL 中？

> ID：14695338
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:31.580
> 
> 标签：php, mysql

我正在尝试将推文正确存储到 MySQL 数据库中。Ao，Twitter 搜索 API 返回以下内容：

```
from_user_name":"Daniel Salas Jim\u00e9nez" 
```

从[个人资料页面](https://twitter.com/dansalasjmz)可以看出，这翻译为 Daniel Salas Jiménez。然而，我的`utf8_general_ci`编码数据库将其存储为 Daniel Salas Jiménez。注意 nor `\u00e9`or`é`被存储，但是`Ã©`. 我永远无法将它重新组合成`é`.

所以我的问题是：我在存储 Twitter 数据时做错了什么？如何存储此用户用户名，以便我可以从 MySQL 正确读取它，是`Daniel Salas Jiménez`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:53:20.840

这都是因为字符集问题。您试图在 charset="UTF-8" 中查看它，因为 twitter 字符集是 charset="iso-8859-1" 您基于 mysql 的数据库它正确保存它但没有正确显示它，所以当你需要它时在某些页面上显示它在标题中使用 charset="iso-8859-1"

例子

```
<meta http-equiv="Content-Type" content="text/html" charset="iso-8859-1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:52:35.223

如果你的数据库是 utf_unicode_ci，你可以使用这个：

[utf8_decode() PHP](http://php.net/manual/es/function.utf8-decode.php) [utf8_encode() PHP](http://php.net/manual/es/function.utf8-encode.php)

# ios - 在 UIPickerView 中显示来自多个组件的文本

> ID：14695340
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:36.583
> 
> 标签：ios, objective-c, cocoa-touch, uipickerview

我需要在标签的多组件选择器视图中显示最近选择的值

*   我有一个包含三个组件的 pickerView，由三个 NSMutableArrays（rowOneItems、rowTwoItems、rowThreeItems）填充。
*   我还有一个 NSLog 语句，它正确地显示了用户最后从更改的组件中选择的内容。
*   但是，我无法弄清楚如何正确显示标签中最近选择的值。

目前，标签从第一个选择器中获取值并显示它，但不会正确更新第二个和第三个值。相反，它选择与它在同一位置的值。例如，如果所有三个数组都有鸟、狗和猫的值，当我在选择器视图中选择“狗”时，标签将显示三个“狗”值。

我想要做的是将用户在选择器视图中选择的值显示到标签中。

```
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
   inComponent:(NSInteger)component {

//log which row is selected in each component
//this shows the values correctly in output
if(component ==1) {
return NSLog(@"Selected Difficulty: %@",[rowTwoItems objectAtIndex:row]);
}
else if(component ==2) {
return NSLog(@"Selected Duration: %@",[rowThreeItems objectAtIndex:row]);
}
else{
    NSLog(@"Selected Type: %@",[rowOneItems objectAtIndex:row]);
}

//define chosen items
//stuck here. tried using a if else statement as above, but of course that would only return the first value in the label
NSString *chosenType = [rowOneItems objectAtIndex:row];
NSString *chosenDifficulty = [rowTwoItems objectAtIndex:row];
NSString *chosenDuration = [rowThreeItems objectAtIndex:row];

[workoutResults setText:[NSString stringWithFormat:@"%@, %@, %@", chosenType, chosenDifficulty, chosenDuration]]; 
```

}

刚开始学习obj-c，所以如果这是一个新手问题，我很抱歉。感谢您能给我的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:50:22.053

你上面的那个方法被调用来改变单行，而不是全部。（因此“行”变量）在刚刚更改的行之外没有用。你会想打电话`selectedRowInComponent:`

```
NSString *chosenType = [rowOneItems objectAtIndex:[pickerView selectedRowInComponent:0]];
NSString *chosenDifficulty = [rowTwoItems objectAtIndex:[pickerView selectedRowInComponent:1]];
NSString *chosenDuration = [rowThreeItems objectAtIndex:[pickerView selectedRowInComponent:2]]; 
```

# perl - 如何抓取多个日志文件以查找异常

> ID：14695347
> 
> 赞同：1
> 
> 时间：2013-02-04T20:46:56.560
> 
> 标签：perl, logging, sed, awk, grep

我正在编写一个 node.js 函数来 ssh 到远程机器，并尝试从各种不同的日志文件中抓取日志以查找异常。日志文件的重要部分如下所示：

```
.... gunk ....

2013-01-29 04:06:39,133 com.blahblah.BaseServlet processRequest Thread-1629  Site-102 Cons-0 Url-http://theurlthat.com/caused/the/problem App-26 yada yada yada

java.lang.NullPointerException
        at com.blahblah.MyClass.hi(MyClass.java:173)
        at com.blahblah.StandardStackTrace.main(StandardStackTrace.java:125)
        at com.blahblah.SoOnAndSo.forth(SoOnAndSo.java:109)
        at java.lang.Thread.run(Thread.java:595)

2013-01-29 04:06:39,133 com.blahblah.BaseServlet defaultThrowableHandler Thread-1629  Site-102 Cons-0 Url-http://theurlthat.com/caused/the/problem App-26 yad yada yada

TechnicalDifficultiesException: TD page delivered by handleThrowable
http://theurlthat.com/caused/the/problem

....more gunk.... 
```

我需要在日志文件中找到满足以下三个要求的异常和对应的日期：

1.  例外必须是此静态文本之前的第一个：

    TechnicalDifficultiesException：handleThrowable 传递的 TD 页面

2.  异常必须直接位于具有“BaseServlet.*Site-102”的两行之间

3.  异常必须是满足上述条件的日志文件中最近的（最后一个）。日志会定期翻转，因此它必须是 Log 中的最后一个，或者如果不存在则 Log.001 中的最后一个，或者如果不存在则 Log.002 中的最后一个等。

由于该程序必须通过 ssh 连接到许多潜在服务器之一，因此最好只在 node.js 程序中维护逻辑，而不是在有日志的机器上维护。因此，perl/sed/awk/grep/etc 中的单行将是最理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:59:50.523

所以你的问题看起来像这样，如果我理解正确的话：

*   日志文件有许多由双换行符分隔的部分。
*   每个都以带有日期等的行开头。
*   我们只对标题匹配的部分感兴趣`/BaseServlet.*?Site-102/`。
*   如果一个节的主体匹配`/^TechnicalDifficultiesException: TD page delivered by handleThrowable/`，我们想要选择先前匹配的节的主体，我们应该验证它看起来像一个 java 异常。
*   我们处理整个日志文件，并返回以这种方式找到的最后一个异常。

很公平。

```
#!/usr/bin/perl
use strict; use warnings;
local $/ = ""; # paragraph mode
my ($prev_sec, $prev_err);
SECTION:
while (my $head = <>) {
  my $body = <>;
  defined $body or die "Can't read from empty filehandle.";
  next SECTION unless $head =~ /BaseServlet.*?Site-102/;
  if ($body =~ /^TechnicalDifficultiesException: TD page delivered by handleThrowable/) {
    $prev_err = $prev_sec;
  }
  $prev_sec = $body;
}
die "No error found" unless defined $prev_err;
print $prev_err; 
```

（没有真正测试那么多，但会从您的代码段中打印出错误）

对于单行代码来说，代码有点长。如果您愿意，您可以随时将源代码通过管道传输到 perl 解释器中。

```
perl -ne'BEGIN{$/=""}END{print$prev_err}$b=<>;defined$b or die"empty FH";/BaseServlet.*?Site-102/ or next;$prev_err=$prev_sec if $b=~/^TechnicalDifficultiesException: TD page delivered by handleThrowable/;$prev_sec=$b' 
```

将日志文件指定为命令行参数，或将文件内容直接通过管道传输到该程序中。找到正确的日志文件并不难。在 Perl 的一个片段中：

```
my $log_dir = ...;
my ($log) = sort glob "$log_dir/LOG*";
die "no log in $log_dir" unless defined $log; 
```

* * *

### 更新

如果还应捕获日期，则代码将更改为

```
#!/usr/bin/perl
use strict; use warnings;
local $/ = ""; # paragraph mode
my (@prev, @prev_err);
SECTION:
while (my $head = <>) {
  my $body = <>;
  defined $body or die "Can't read from empty filehandle.";
  next SECTION unless $head =~ /BaseServlet.*?Site-102/;
  if ($body =~ /^TechnicalDifficultiesException: TD page delivered by handleThrowable/) {
    @prev_err = @prev;
  }
  @prev = ($head, $body);
}
die "No error found" unless @prev_err;
my ($date) = $prev_err[0] =~ /^(\d{4}-\d\d-\d\d \d\d:\d\d:\d\d),/;
print "$date\n\n$prev_err[1]"; 
```

作为单线：

```
perl -ne'BEGIN{$/=""}END{@perr||die"No error found";($date)=$perr[0]=~/^(\d{4}-\d\d-\d\d \d\d:\d\d:\d\d),/;print"$date\n\n$perr[1]"}$b=<>;defined$b or die"empty FH";/BaseServlet.*?Site-102/ or next;@perr=@p if $b=~/^TechnicalDifficultiesException: TD page delivered by handleThrowable/;@p=($_,$b)' 
```

我不明白它怎么只能返回第一场比赛；此代码应处理整个文件。如果您可以提供更完整的测试用例，我可以验证此代码是否按要求工作。

# java - 使用多个线程访问一个数组，但只能读取或只写入

> ID：14695348
> 
> 赞同：0
> 
> 时间：2013-02-04T20:46:57.523
> 
> 标签：java, arrays, multithreading

我想知道在访问一个具有多个线程但只能读取或仅写入的数组时是否会出现任何问题。

当线程写入数组时，它们写入的顺序无关紧要，即使它们写入同一个条目，所有线程也会写入相同的值。

例如，如果我想通过 Eratosthenes 筛找到素数：我创建一个连续数字数组，并使用多个线程将所有素数的倍数设置为 0。

删除 2 的倍数的线程和删除 5 的倍数的线程是否同时将数字 20 的条目设置为 0 或一个在另一个之前或之后都没有关系。

因此，这不是数据的质量或一致性的问题，而是在不面临任何 java 错误的情况下执行此操作的技术可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:57:52.303

我假设您的意思是“没有同步控制”。最简洁的答案是不。

使用同步有两个原因：

*   数据互斥
*   线程之间的通信

您的设置表明第一个原因在您的情况下并不是真正的问题。该算法有效地将数据分离出来，以便多个工作线程不会使用相同的数据。

但是，**为了使一个线程中完成的更改对另一个线程可见，您必须使用同步**。如果没有同步，JVM 无法保证写入的顺序。一个线程所做的更新可能会在以后的任何时间在另一个线程中可见，甚至永远不可见。请参阅 Effective Java Item #66，或者查看 Java Concurrency in Practice 一书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:42:35.290

我认为它不会起作用，因为最终您需要读取变量（输出它们，保存到磁盘等）。并且必须同步读取以保证正确的线程间操作顺序。请记住，没有同步 java 只能保证线程内操作的顺序。

现在，您可以说您根本不想阅读它们，但如果是这种情况，java 可以优化丢弃整个代码。

# flash - 在这个 Flash 浏览器应用程序中增加字体

> ID：14695349
> 
> 赞同：1
> 
> 时间：2013-02-04T20:47:01.417
> 
> 标签：flash

我想使用这个应用程序，但我发现我的浏览器（FF 和 Chrome）上的字体不可读。我增加字体的标准浏览器功能不起作用。有谁知道增加这种字体的方法？

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:43:19.183

没有像浏览器那样在 Flash 中更改字体大小的“内置”方法。

除非开发人员自己构建了该功能（从来没有人这样做过），否则除了获取源代码之外，您无能为力。

# magento - Magento - 将自定义属性（列）添加到 sales_order 索引网格

> ID：14695352
> 
> 赞同：4
> 
> 时间：2013-02-04T20:47:10.237
> 
> 标签：magento, gridview, attributes

我在`sales_order_flat`表格中添加了一个自定义属性，我试图在网格中显示这个属性`sales_order/index`。

我已经成功地使用客户属性完成了此操作，但是在尝试使用订单数据进行相同操作时出现错误。

```
<global>
    <blocks>
        <adminhtml>
            <rewrite>
                <sales_order_grid>WACI_AdminHtmlExt_Block_Sales_Order_Grid</sales_order_grid>
            </rewrite>
        </adminhtml>
    </blocks>
 <!-- etc  --> 
```

**app/code/local/namespace/module/Block/Sales/Order/Grid.php**

```
class WACI_AdminHtmlExt_Block_Sales_Order_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid
{

    protected function _prepareColumns()
    {

        $this->addColumn('dynamics_ord', array(
            'header'    => $this->__('Dynamics ID'),
            'width'     => '75px',
            'index'     => 'dynamics_ord',
        ));

        $this->addColumnsOrder('dynamics_ord','entity_id');

        return parent::_prepareColumns();
    }
} 
```

我看到它`_prepareCollection`有时[会被使用](http://www.atwix.com/magento/customize-orders-grid/)，但我只是想在简单的情况下修改集合`setCollection`。

无论如何，该列都会显示，但不会产生任何数据。（当我尝试排序时页面错误）。

对此有什么想法吗？

### 更新

这篇文章是[这个 SO 线程](https://stackoverflow.com/questions/14616499/magento-custom-order-attribute-admin-input-and-display)的扩展，我已经更新了它以匹配模块的当前状态。也就是说，我将列添加到`sales_flat_order`和`sales_flat_order_grid`。

从那篇文章中，我得到了一个设置此属性值的操作（在订单完成后）。

在这一点上我的问题是 - 如何`updateGridRecords()`发挥作用？

**=> updateGridRecords 似乎在调用 $order->save() 时自动调用（订单完成后我手动执行的操作）。**

如果我理解正确，因为我没有从任何其他模型中提取数据，所以`_prepareColumns`只需要调用即可。

**=> 是的。保存 attr 后正确显示和排序。赢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:15:28.790

客户集合和订单网格集合之间的区别在于，客户集合是从 Mage_Eav_Model_Entity_Collection_Abstract 派生的，而 sales_flat_order_grid 集合是从不是 EAV 的 Mage_Sales_Model_Resource_Abstract 派生的。

因此，您无法像通常使用 EAV 那样添加要选择的属性 - 您要使用的所有属性都必须表示为平面表中的表列。

您正在调用的函数 addAttributeToSelect 在 Mage_Sales_Model_Resource_Collection_Abstract 类中实现，并在后台使用 addFieldToSelect 因此在您的情况下，您应该在 sales_flat_order_grid 表中有一个名为 dynamics_ord 的列。

将属性值从订单 EAV 移动到订单网格的函数是 Mage_Sales_Model_Resource_Order_Abstract::updateGridRecords，此函数读取 sales_flat_order_grid 表的结构以了解应将哪些属性写入 sales_flat_order_grid 表，因此如果缺少 dynamics_ord 列，您必须将其添加到您的模块的安装脚本。

我遇到了[关于](https://stackoverflow.com/questions/4370235/saving-extra-data-with-an-order-in-magento)如何在安装脚本中添加列然后将其添加到网格的堆栈溢出解决方案。答案有点过时，但我认为它可以工作。

我还发现[了](http://www.magentocommerce.com/boards/viewthread/260879/#t349572)关于如何添加将在订单网格上使用但尚未测试的属性的开箱即用解决方案，因此我无法确定它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:07:20.203

当您使用 FLAT 表连接 EAV 表时，您无法过滤网格中的数据。我之前也遇到过同样的问题，和我的前辈一起花了 4 天时间，最后得出了 2 个结论，你不能那样做......！！！

# c# - 在文本框条目上显示工具提示

> ID：14695357
> 
> 赞同：22
> 
> 时间：2013-02-04T20:47:32.323
> 
> 标签：c#, .net, textbox, tooltip

我有一个`textbox`要求以某种方式输入数据。我已经实现了一些单元格验证技术来在输入数据后检查数据，但我想在用户输入数据之前向他们提供一些信息。

为此，我想在用户进入工具箱`tooltip`时`textbox`弹出，然后在他们开始输入时退出。

例如我有以下代码：

```
private void YearEdit_Enter(object sender, EventArgs e)
  {
        ToolTip tt = new ToolTip();
        tt.IsBalloon = true;
        tt.InitialDelay = 0;
        tt.ShowAlways = true;
        tt.SetToolTip(YearEdit, "Enter 4 digit year.");
    } 
```

这在用户输入 时执行`textbox`，但`tooltip`仅在鼠标悬停在 时才会出现`textbox`。有没有人有任何想法来解决这个问题？我认为这也许`tt.ShowAlways = true`可行，但显然不行。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-04T21:04:02.180

挂钩到 textbox.enter 事件并使用以下代码：

```
private void textBox1_Enter(object sender, EventArgs e)
    {
        TextBox TB = (TextBox)sender;
        int VisibleTime = 1000;  //in milliseconds

        ToolTip tt = new ToolTip();
        tt.Show("Test ToolTip",TB,0,0,VisibleTime);
    } 
```

使用 X/Y 值将其移动到您想要的位置。可见时间是它消失之前的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:54:57.240

工具提示仅在鼠标仍在设计时出现。

您可以尝试将其设置[`InitialDelay`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.initialdelay.aspx)为 0：

```
tt.InitialDelay = 0; 
```

但这仍然需要鼠标在瞬间静止。

但是还有其他方法。显示所需输入的一种常用方法是在文本框中使用水印（褪色文本），该水印显示在用户开始输入之前所需的格式。

如果你真的想要一个工具提示，那么你可以添加一个信息图标（通常是一个“i”），当它悬停时会显示工具提示，或者实现你自己的。

如果您将日期分成几部分（单独的日、月、年），它也可能会起作用。这将使您可以更好地控制用户可以输入的内容 - 月份可以成为下拉/组合框，因此它始终是正确的格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-06T01:20:26.783

您也可以像这样显示工具提示：

```
ToolTip t = new ToolTip();
t.Show("Hello World", textBox1, 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-05T15:31:56.997

试试这个。（基于上面的答案）为您想要为其设置工具提示的所有控件添加事件处理程序。将所有事件处理程序指向相同的方法。然后像这样构造你的处理方法

```
private void procToolTips(object sender, EventArgs e)
{
   ToolTip tt = new ToolTip();
   Control o = (Control)sender;
   if ( o.Name == "label1") {
     tt.Show("Lorem ipsum dolor sit ame", o, 1000);
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T14:33:16.333

您应该使用 `if ( o.Name == label1.Name)`而不是 `if ( o.Name == "label1")`，因为如果您重命名 label1，此行也会被修改。

更多：`if(o.equals(label1))`...

# css - :after 元素中的 CSS 背景图像

> ID：14695365
> 
> 赞同：29
> 
> 时间：2013-02-04T20:48:06.123
> 
> 标签：css, background

我正在尝试创建一个 CSS 按钮并使用 :after 向其添加一个图标，但图像从未出现。如果我用 'background-color:red' 替换 'background' 属性，则会出现一个红色框，所以我不确定这里有什么问题。

HTML：

```
<a class="button green"> Click me </a> 
```

CSS：

```
.button {
padding: 15px 50px 15px 15px;
color: #fff;
text-decoration: none;
display: inline-block;
position: relative;
}

.button:after {
content: "";
width: 30px;
height: 30px;
background: url("http://www.gentleface.com/i/free_toolbar_icons_16x16_black.png") no-repeat -30px -50px no-scroll;
background-color: red;
top: 10px;
right: 5px;
position: absolute;
display: inline-block;
}

.green {
background-color: #8ce267;
} 
```

[你可以检查这个小提琴，看看我的意思。](http://jsfiddle.net/KVmJJ/1/)

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-04T20:50:31.573

几件事

(a) 你不能同时拥有背景颜色和背景，背景总是会赢。在下面的示例中，我通过速记将它们组合在一起，但这只会在图像不显示时产生颜色作为后备方法。

(b) no-scroll 不起作用，我认为它不是背景图像的有效属性。尝试类似固定的东西：

```
.button:after {
    content: "";
    width: 30px;
    height: 30px;
    background:red url("http://www.gentleface.com/i/free_toolbar_icons_16x16_black.png") no-repeat -30px -50px fixed;
    top: 10px;
    right: 5px;
    position: absolute;
    display: inline-block;
} 
```

我将您的[jsFiddle](http://jsfiddle.net/KVmJJ/2/)更新为此并显示了图像。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T20:55:35.720

正如 AlienWebGuy 所说，您可以使用背景图像。我建议您使用背景，但在 URL 之后还需要三个属性：

`background: url("http://www.gentleface.com/i/free_toolbar_icons_16x16_black.png") 0 0 no-repeat;`

解释：这两个零是图像的x和y定位；如果您想调整背景图像的显示位置，请使用这些（您可以使用正值和负值，例如：1px 或 -1px）。

不重复表示您不希望图像在整个背景中重复。这也可以是重复-x 和重复-y。

# python - 过滤长时间序列Python的最有效方法

> ID：14695367
> 
> 赞同：8
> 
> 时间：2013-02-04T20:48:13.180
> 
> 标签：python, numpy, python-2.7, signal-processing, scientific-computing

我有一个很大的时间序列，比如 1e10，它是由记录神经活动（即电压）产生的。在进行进一步分析之前，我想对 300 Hz 到 7000 Hz 之间的数据进行带通滤波。下面，我贴出我设计的巴特沃斯滤波器的代码。**如何使此过滤器更快？运行时间太长。**

**更新：示例数据**

[这](https://www.dropbox.com/s/3eb6ywjzoo468rd/ch008.ddt)是一个指向数据的链接，例如`data`.

至于格式，每一行代表一个不同的记录源，每一列代表一个时间点。数据以 20, 000 Hz 采样。

```
 def butter_bandpass(lowcut,highcut,fs,order=8):
     nyq = 0.5*fs
     low = lowcut/nyq
     high = highcut/nyq

     b,a = butter(order, [low, high], btype='band')
     return b,a

 def butter_bandpass_filter(data,lowcut,highcut,fs,order=8):
     b,a = butter_bandpass(lowcut,highcut,fs,order=order)
     return lfilter(b,a,data) 

 print 'Band-pass filtering data'
 data = map(lambda channel: butter_bandpass_filter(channel,300,7000,20000),data) 
```

**更新**

像大多数 NumPy 一样，SciPy 函数`lfilter`可以接受多维输入，因此`map`会产生不必要的开销。也就是说，可以重写

```
 data = map(lambda channel:butter_bandpass_filter(channel,300,7000,20000),data) 
```

作为

```
 data = butter_bandpass_filter(data,300,7000,20000) 
```

默认情况下`lfilter`，在最后一个非单轴上运行。对于 2D 矩阵，这意味着该函数应用于每一行，这正是我所需要的。可悲的是，它仍然太慢了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T07:40:08.093

首先，您的数据样本采用专有格式，对吗？即使使用 Python 的 biosig 工具箱也无法读取这种格式。也许我错了，但我没有成功阅读它。

因此，我的答案将基于从罗斯勒振荡器生成的人工数据。它是一种混沌的 3d 振荡器，常用于非线性时间序列分析领域。

```
import numpy as np
from scipy.signal import butter, lfilter

##############################################################
# For generating sample-data
##############################################################
from scipy.integrate import odeint

def roessler_ode(y,t,omega=1,a=0.165,b=0.2,c=10):
    dy = np.zeros((3))
    dy[0] = -1.0*(omega*y[1] + y[2]) #+ e1*(y[3]-y[0])
    dy[1] = omega * y[0] + a * y[1]
    dy[2] = b + y[2] * (y[0] - c)
    return dy

class Roessler(object):
    """A single coupled Roessler oscillators"""
    def __init__(self, y=None, omega=1.0, a=0.165,b=0.2,c=10):
        self.omega = omega
        self.a = a
        self.b = b
        self.c = c
        if y==None:
            self.y = np.random.random((3))+0.5
        else:
            self.y = y

    def ode(self,y,t):
        dy = roessler_ode(y[:],t,self.omega,self.a,self.b,self.c)
        return dy

    def integrate(self,ts):
        rv = odeint(self.ode,self.y,ts)
        self.y = rv[-1,:]
        return rv
############################################################### 
```

现在来你的函数定义：

```
def butter_bandpass(lowcut,highcut,fs,order=8):
    nyq = 0.5*fs
    low = lowcut/nyq
    high = highcut/nyq

    b,a = butter(order, [low, high], btype='band')
    return b,a

def butter_bandpass_filter(data,lowcut,highcut,fs,order=8):
    b,a = butter_bandpass(lowcut,highcut,fs,order=order)
    return lfilter(b,a,data) 
```

我让它们保持不变。我用我的振荡器生成了一些数据，但我只取了它的第三部分。我添加了一些高斯噪声以便过滤掉一些东西。

```
# generate sample data
data = Roessler().integrate(np.arange(0,1000,0.1))[:,2]
data += np.random.normal(size=data.shape) 
```

现在让我们来谈谈速度问题。我使用`timeit`-module 来检查执行时间。这些语句执行 100 次过滤，并测量总时间。我对 2 阶和 8 阶进行此测量（是的，您想要更清晰的光谱边缘，我知道，但请稍等）

```
# time execution
from timeit import timeit
time_order8 = timeit("butter_bandpass_filter(data,300,2000,20000,8)", "from __main__ import butter_bandpass_filter, butter_bandpass, data", number=100)
time_order2 = timeit("butter_bandpass_filter(data,300,2000,20000,2)", "from __main__ import butter_bandpass_filter, butter_bandpass, data", number=100)
print "For order 8: %.2f seconds" % time_order8
print "For order 2: %.2f seconds" % time_order2 
```

这两个打印语句的输出是：

```
For order 8: 11.70 seconds
For order 2: 0.54 seconds 
```

这是20倍！对巴特沃斯滤波器使用 8 阶绝对不是一个好主意。我想不出任何情况下这是有意义的。为了证明使用这种过滤器时出现的其他问题，让我们看看这些过滤器的效果。我们对我们的数据应用带通滤波，一次是 8 阶，一次是 2 阶：

```
data_bp8 = butter_bandpass_filter(data,300,2000,20000,8)
data_bp2 = butter_bandpass_filter(data,300,2000,20000,2) 
```

现在让我们做一些情节。首先，简单的线条（我不关心x轴）

```
# plot signals
import matplotlib.pyplot as plt
plt.figure(1)
plt.plot(data, label="raw")
plt.plot(data_bp8, label="order 8")
plt.plot(data_bp2, label="order 2")
plt.legend() 
```

这给了我们：

![信号](../Images/28024f5aa745ea739dbc1060bed893ac.png)

哦，绿线怎么了？很奇怪，不是吗？原因是 8 阶巴特沃斯滤波器变得相当不稳定。听说过[共振灾难/灾难](http://en.wikipedia.org/wiki/Mechanical_resonance#Resonance_disaster)吗？这就是它的样子。

这些信号的功率谱密度可以绘制如下：

```
# plot power spectral densities
plt.figure(2)
plt.psd(data, Fs=200000, label="raw")
plt.psd(data_bp8, Fs=20000, label="order 8")
plt.psd(data_bp2, Fs=20000, label="order 2")
plt.legend()

plt.show() 
```

![PSD](../Images/b46d2eeeac8ce0bfebc5acf7b4a825ea.png)

在这里，您看到绿线的边缘更锐利，但价格是多少？人工高峰约。300 赫兹。信号完全失真。

那你该怎么办？

*   **切勿**使用 8 阶巴特沃斯滤波器
*   如果足够，请使用低阶。
*   如果没有，请使用 Parks-McGlellan 或 Remez-Exchange-Algorithms 创建一些 FIR 滤波器。例如，有 scipy.signal.remez。

另一个提示：如果您关心信号的相位，则绝对应该及时*向前和向后*过滤。`lfilter`否则会改变阶段。这种算法的实现，通常称为`filtfilt`，可以在[我的 github 存储库](https://github.com/thorstenkranz/eegpy/blob/master/eegpy/filter/freqfilt.py)中找到。

*另一个编程提示：*

如果有*传参*的情况（四个参数`butter_bandpass_filter`只传给`butter_bandpass`，可以使用`*args`and `**kwargs`。

```
def butter_bandpass(lowcut,highcut,fs,order=8):
    nyq = 0.5*fs
    low = lowcut/nyq
    high = highcut/nyq

    b,a = butter(order, [low, high], btype='band')
    return b,a

def butter_bandpass_filter(data, *args, **kwargs):
    b,a = butter_bandpass(*args, **kwargs)
    return lfilter(b,a,data) 
```

这减少了代码冗余，并使您的代码不易出错。

最后，这里是完整的脚本，方便复制粘贴试一试。

```
import numpy as np
from scipy.signal import butter, lfilter

##############################################################
# For generating sample-data
##############################################################
from scipy.integrate import odeint

def roessler_ode(y,t,omega=1,a=0.165,b=0.2,c=10):
    dy = np.zeros((3))
    dy[0] = -1.0*(omega*y[1] + y[2]) #+ e1*(y[3]-y[0])
    dy[1] = omega * y[0] + a * y[1]
    dy[2] = b + y[2] * (y[0] - c)
    return dy

class Roessler(object):
    """A single coupled Roessler oscillators"""
    def __init__(self, y=None, omega=1.0, a=0.165,b=0.2,c=10):
        self.omega = omega
        self.a = a
        self.b = b
        self.c = c
        if y==None:
            self.y = np.random.random((3))+0.5
        else:
            self.y = y

    def ode(self,y,t):
        dy = roessler_ode(y[:],t,self.omega,self.a,self.b,self.c)
        return dy

    def integrate(self,ts):
        rv = odeint(self.ode,self.y,ts)
        self.y = rv[-1,:]
        return rv
###############################################################

def butter_bandpass(lowcut,highcut,fs,order=8):
    nyq = 0.5*fs
    low = lowcut/nyq
    high = highcut/nyq

    b,a = butter(order, [low, high], btype='band')
    return b,a

def butter_bandpass_filter(data,lowcut,highcut,fs,order=8):
    b,a = butter_bandpass(lowcut,highcut,fs,order=order)
    return lfilter(b,a,data) 

# generate sample data
data = Roessler().integrate(np.arange(0,1000,0.1))[:,2]
data += np.random.normal(size=data.shape)

# time execution
from timeit import timeit
time_order8 = timeit("butter_bandpass_filter(data,300,2000,20000,8)", "from __main__ import butter_bandpass_filter, butter_bandpass, data", number=100)
time_order2 = timeit("butter_bandpass_filter(data,300,2000,20000,2)", "from __main__ import butter_bandpass_filter, butter_bandpass, data", number=100)
print "For order 8: %.2f seconds" % time_order8
print "For order 2: %.2f seconds" % time_order2

data_bp8 = butter_bandpass_filter(data,300,2000,20000,8)
data_bp2 = butter_bandpass_filter(data,300,2000,20000,2)

# plot signals
import matplotlib.pyplot as plt
plt.figure(1)
plt.plot(data, label="raw")
plt.plot(data_bp8, label="order 8")
plt.plot(data_bp2, label="order 2")
plt.legend()

# plot power spectral densities
plt.figure(2)
plt.psd(data, Fs=200000, label="raw")
plt.psd(data_bp8, Fs=20000, label="order 8")
plt.psd(data_bp2, Fs=20000, label="order 2")
plt.legend()

plt.show() 
```

# ember.js - Ember 数据，如何使用 registerTransform

> ID：14695370
> 
> 赞同：2
> 
> 时间：2013-02-04T20:48:42.377
> 
> 标签：ember.js, ember-data

我已经在谷歌上搜索了一段时间，但还没有找到任何好的解决方案。

问题的根源是`isDirty`使用此方法时没有设置我的记录：

```
DS.JSONTransforms.object = {
  deserialize: function(serialized) {
    return Ember.isNone(serialized) ? {} : serialized;
  },
  serialize: function(deserialized) {
    return Ember.isNone(deserialized) ? {} : deserialized;
  }
} 
```

据我所知，这是一个显然仍然有效的旧方法，因为它处理我扔给它的 JSON 对象，但`isDirty`在进行编辑时它没有设置我的记录。

您现在应该使用的是`registerTransform`您的适配器（根据此[https://github.com/emberjs/data/issues/517](https://github.com/emberjs/data/issues/517)）。但是我的自定义转换没有被注册，所以我想我把它放在了错误的地方（与我之前的 JSONTransforms 相同的地方）。

```
DS.RESTAdapter.registerTransform('object', {
  deserialize: function(serialized) {
    return Em.none(serialized) ? {} : serialized;
  },
  serialize: function(deserialized) {
    return Em.none(deserialized) ? {} : deserialized;
  }
}); 
```

有没有人有这方面的知识分享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:49:18.157

问题`isDirty`不是因为您没有使用`registerTransform`，行为将是相同的。

目前，Ember Data 不支持对象属性，其中一个难点实际上是观察设置`isDirty`标志的变化。

有一个[未解决](https://github.com/emberjs/data/issues/53)的问题，您可以在 github 上跟踪。

一种解决方法是将嵌套对象声明为正确`DS.Model`并在它们之间设置嵌入关系。

例如，假设您有一个与 post 一起发送的日期对象：

```
{post: {
  id: 12
  title: "EmberData accept object attributes, you do not need this anymore !!"
  date: {
    day: "01"
    month: "03"
    year: "2013"
  }
}} 
```

您将声明模型如下：

```
App.Post = DS.Model.extend({
  title: DS.attr('string'),
  date: DS.belongsTo('App.PostDate')
});

App.PostDate = DS.Model.extend({
  post: DS.belongsTo('App.Post'),
  day: DS.attr('string'),
  month: DS.attr('string'),
  year: DS.attr('string'),
}); 
```

并在您的适配器中添加一个映射：

```
DS.RESTAdapter.map('App.Post',{
  date:{
    embedded:'always'
  }
}) 
```

有关嵌入式映射选项的更多详细信息，请参阅[此答案](https://stackoverflow.com/a/14521612/793002)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T04:21:31.883

我不同意。我认为必须对所有孩子的关系/记录进行额外的调用是低效且过于复杂的。我找到了解决这个问题的方法。为“last_updated”添加一个字段，在更改嵌套内容的值后，只需将 last_updated 更新为当前时间，这将触发“isDirty”标志并允许您更新...

# asp.net - 允许用户从 asp.net Web 应用程序从 subversion 下载文件

> ID：14695371
> 
> 赞同：0
> 
> 时间：2013-02-04T20:48:41.757
> 
> 标签：asp.net, svn

有没有办法让用户使用 asp.net Web 应用程序从 subversion 下载大文件。我们不想将 SVN 帐户提供给所有 Web 用户，但希望我们的站点能够从 SVN 提供文件，而无需将实际文件下载到运行 Web 应用程序的服务器。有没有办法可以实现这一点？

任何帮助是极大的赞赏。

谢谢，安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:11:28.123

您可以预见一个 SVN 帐户并编写一个 ASP.NET 处理程序来将来自 svn 服务器的文件处理成一个内存文件（DotSVN 或类似的东西）并将其提供给用户以供下载。

您也可以看看 Mercurial Large Files Extension。

*   [点SVN](http://code.google.com/p/dotsvn/)
*   [ASP.NET 处理程序](http://www.dotnetperls.com/ashx)
*   [Mercurial 大文件扩展名](http://mercurial.selenic.com/wiki/LargefilesExtension)

# objective-c - CoreData 将对象添加到多对多关系

> ID：14695382
> 
> 赞同：0
> 
> 时间：2013-02-04T20:49:29.947
> 
> 标签：objective-c, core-data

所以我有`CustomEntity1`并`CustomEntity2`用 mogenerator 生成。`CustomEntity1`与 有一对多关系，`CustomEntity2`与`CustomEntity2`有一个反向关系`CustomEntity1`。

我的问题是当我通过以下方式添加一些内容`CustomEntity2`时`CustomEntity1`：

```
[CustomEntity1 addCustomEntity2Object:entity2FreshlyCreated] 
```

它是否设置了反向relashionship？还是我也必须这样做？

```
CustomEntity2.parent = CustomEntity1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:56:21.227

Core Data 要求您指示对象的反向关系的全部原因是它可以自动更新它。您发布的行是等效的。

# java - 多次打开/关闭时切换按钮崩溃

> ID：14695407
> 
> 赞同：3
> 
> 时间：2013-02-04T20:50:41.913
> 
> 标签：java, android, media-player, togglebutton

我可以打开（一次）和关闭（一次）切换按钮，但如果我第三次触摸它，它会打开但从不播放音乐。从那里，当我再次触摸它以将其关闭时，它会崩溃。

```
public class Main extends Activity {

MediaPlayer mp;
Button startButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    mp = MediaPlayer.create(getBaseContext(), R.raw.songthing);

    ToggleButton toggle = (ToggleButton) findViewById(R.id.ToggleButton);
    toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                mp.start();
            } else {
                mp.stop();
            }
        }
    });

    mp.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.release();
        }
    });

} 
```

我不确定我是否应该在 onCreate 方法中使用它......我试图移动它，但我对所有括号感到非常困惑并且它不起作用。

关于我的代码的更多信息......我试图让媒体播放器在切换按钮打开时播放歌曲，并在其关闭时停止播放。

编辑：Logcat 说了一些关于`java.lang.IllegalStateException`

XML:

```
<ToggleButton
        android:id="@+id/ToggleButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:textOff="Start"
        android:textOn="Stop" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:51:13.340

[你可以在这里](http://developer.android.com/reference/android/media/MediaPlayer.html)阅读一些关于`MediaPlayer`状态的信息。 如果你调用，你必须再次调用播放器才能调用它。
`stop()``prepare()``start()`

> 一旦处于 Stopped 状态，在调用 prepare() 或 prepareAsync() 以将 MediaPlayer 对象再次设置为 Prepared 状态之前，无法开始播放。

如果准备播放器花费的时间太长，请考虑使用`pause()`其次`seekTo(0);`作为替代。

# android - 如何提供用户指南？

> ID：14695409
> 
> 赞同：0
> 
> 时间：2013-02-04T20:50:42.837
> 
> 标签：android, user-guide

我一直试图在谷歌开发者网站和 SO 上找到这个问题的答案，但到目前为止我无法给出令人满意的答案。

我希望为下载我的应用程序的用户提供有关如何设置应用程序的某些部分以及如何将外部数据加载到其中的“用户指南”。我想在一个简单的分步指南中添加一些屏幕截图。

是否有可用的固定框架来执行此操作？我可以将应用程序与我在设备浏览器中加载的几个页面一起发布 - 但在手机浏览器上 - 查看手机的屏幕截图可能不是很“可读”。可以从 PC 上查看的 URL 会更好吗？或者也许只是我的应用程序中的一个文本窗口是最好的。我希望这里有人有一个想法，过去可能对他们很有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:55:43.320

如果是我，我只会在线托管用户指南并从您的应用程序中提供指向它的链接。

这将是最容易设置的，它允许用户从他们的计算机或平板电脑上查看指南。（这样他们就可以设置您的应用程序，而无需在您的指南和相关屏幕之间来回切换！）

# android - ExpandableListView，单击时更改组视图

> ID：14695419
> 
> 赞同：1
> 
> 时间：2013-02-04T20:51:10.910
> 
> 标签：android, widget

我正在使用 ExpandableListView 小部件。单击组视图时，除了显示子视图之外，我还想对组视图进行更改。我在适配器的 getGroupView() 方法中向组视图添加了一个 OnClickListener，但是当单击其中一个时，对组视图进行了更改，但子视图不显示 - 就好像 OnClickListener 覆盖了显示的孩子的意见。有没有可以添加到 OnClickListener 来显示孩子的调用？欢迎任何其他想法......

编辑：这是 getGroupView() 方法的代码，添加了 OnClickListener。我认为其他任何代码都不相关，因为当 OnClickListener 被注释掉时它可以正常工作

```
 @Override
    public View getGroupView(int position, boolean arg1, View convertView,
            ViewGroup arg3) {
        if (convertView == null){
        convertView = getLayoutInflater().inflate(R.layout.questionbox, null);
        }

        TextView summary = (TextView)convertView.findViewById(R.id.questionHl);
        final TextView asker = (TextView)convertView.findViewById(R.id.asker);
        TextView numviews = (TextView)convertView.findViewById(R.id.numViews);
        TextView numAnswers = (TextView)convertView.findViewById(R.id.numAnswers);
        final TextView fullText = (TextView)convertView.findViewById(R.id.fullText);

        summary.setText(q.get(position).summary);
        asker.setText("by " + q.get(position).author);
        numviews.setText(Integer.toString(q.get(position).views));
        numAnswers.setText(Integer.toString(q.get(position).numAnswers));   
        fullText.setText(q.get(position).fullText);
        convertView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (fullText.getVisibility() == 8){
                    fullText.setVisibility(1);;
                }
                else if (fullText.getVisibility() == 0){
                    fullText.setVisibility(8);
                }
            }
            });
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:54:35.023

我认为这是因为您的 onclicklistener 在应该返回 false 时返回 true。True 表示您已完全处理了该事件，因此不会将其转发回可扩展列表视图。但是我在这里盲目猜测，因为您没有显示任何代码：D

编辑：有些 onclick 方法返回一个布尔值，有些则没有，所以我可能完全错了。你能告诉我们你的代码吗？

# jquery - jqGrid 不显示 java 服务响应

> ID：14695421
> 
> 赞同：0
> 
> 时间：2013-02-04T20:51:13.063
> 
> 标签：jquery, jqgrid

jqGrid 不显示 java 服务返回的响应。

html:

```
<table id="fbDetailTable" style="display: none"></table> 
```

Java 脚本：

```
jQuery("#fbDetailTable").jqGrid({

url: "/ReportBatch/rs/ReportService/getFB?fB="+frtBill,
    datatype: "json",
colNames: ['Store Number', 'Order Number', 'SKU number',
           'Shipped Quantity','Order Created Date'],
colModel:[{name:'strNbr',index:'strNbr',width:100,jsonmap:'strNbr'},
          {name:'orderNbr',index:'orderNbr',width:100,jsonmap:'orderNbr'},
          {name:'skuNbr',index:'skuNbr',width:100,jsonmap:'skuNbr'},
          {name:'shpdQty',index:'shpdQty',width:100,jsonmap:'shpdQty'},
          {name:'ordCrtDt',index:'ordCrtDt',width:100,jsonmap:'ordCrtDt'}],
jsonReader: { repeatitems : false, strNbr: "0" },
viewrecords: true, 
loadonce:true,                                
    caption:"Order Details"
}); 
```

服务响应：

```
[{"strNbr":"6310",
  "orderNbr":"10979577",
  "skuNbr":"646274",
  "shpdQty":"1",
  "ordCrtDt":"2013-01-29"},     
 {"strNbr":"6310",
  "orderNbr":"10979583",
  "skuNbr":"765992",
  "shpdQty":"3",
  "ordCrtDt":"2013-01-29"
 }] 
```

响应标头：

```
Content-Type    application/json
Date    Mon, 04 Feb 2013 20:21:24 GMT
Server  Apache-Coyote/1.1
Transfer-Encoding   chunked 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:02:39.347

主要错误是您的输入 JSON 数据没有“行”属性，并将数据直接作为数组放置。在这种情况下你应该使用

```
root: function (obj) { return obj; } 
```

里面`jsonReader`。而且设置`strNbr: "0"`错误。应该是`id: "strNbr"`。

另外使用`rowNum`一些足够大的值作为默认值 25 非常重要（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)）。如果不这样做，jqGrid 将只显示第 25 行数据。这不是你想要的。

我强烈建议您使用的其他重要选项是：`gridview: true`, `autoencode: true`. 该选项`height: "auto"`在大多数情况下也非常实用。所以代码应该是关于以下的

```
$("#fbDetailTable").jqGrid({
    url: "AVVD.json",
    datatype: "json",
    colNames: ["Store Number", "Order Number", "SKU number",
               "Shipped Quantity", "Order Created Date"],
    colModel: [
        { name: "strNbr" },
        { name: "orderNbr" },
        { name: "skuNbr" },
        { name: "shpdQty" },
        { name: "ordCrtDt" }
    ],
    cmTemplate: { width: 120 },
    jsonReader: {
        repeatitems: false,
        id: "strNbr",
        root: function (obj) {
            return obj;
        }
    },
    rowNum: 10000,
    gridview: true,
    autoencode: true,
    height: "auto",
    viewrecords: true,
    loadonce: true,
    caption: "Order Details"
}); 
```

您还可以声明变量，例如

```
var intTemplate = { sorttype: "integer", formatter: "integer" },
    dateTemplate = { sorttype: "date", formatter: "date" }; 
```

并使用模板（见[答案](https://stackoverflow.com/a/6047856/315935)）并修改`colModel`为以下

```
colModel: [
    { name: "strNbr", template: intTemplate },
    { name: "orderNbr", template: intTemplate },
    { name: "skuNbr", template: intTemplate },
    { name: "shpdQty", template: intTemplate },
    { name: "ordCrtDt", template: dateTemplate }
] 
```

您将[在此处](http://www.ok-soft-gmbh.com/jqGrid/AVVD.htm)看到生成的演示：

![在此处输入图像描述](../Images/a710c6c87c9adc15659708094ce83596.png)

# javascript - IE10 console.log 不工作

> ID：14695422
> 
> 赞同：19
> 
> 时间：2013-02-04T20:51:13.953
> 
> 标签：javascript, internet-explorer

我刚开始在 Win8 上玩 IE10 并遇到了问题。当文档模式设置为标准时，开发人员工具控制台似乎不起作用。我玩过浏览器模式和文档模式，当设置为 IE9 标准时，控制台工作，但将其设置为简单的“标准”，即 IE10 的默认值，控制台未定义。有任何想法吗？

这不是重复的。测试时，开发者控制台是打开的。将 Doc 模式切换到 IE9 标准并重新加载会按预期显示控制台输出。切换回 IE10 标准不会显示控制台输出。调试显示控制台未定义，因此将 console.log 设置为空函数以处理未定义。我很好奇为什么在 IE10 标准模式下控制台未定义。

我在 VirtualBox 中运行 Win8。我的页面是具有适当文档类型的 HTML4 标记。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T16:25:56.817

未定义的原因`console.log();`是因为这就是标准模式的工作方式。IE 8 有一个兼容模式，实际上将它变成了 IE 7，消除了对添加到 IE 8 的所有功能的理解。控制台是在 IE 10 中添加的，因此通过在标准模式下运行它，它会抛出错误是有意义的。

```
<head>
    <title>Force IE 10</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head> 
```

此处的此元标记将强制 IE 在您安装的最新版本中运行（禁用标准和兼容模式）。这是在标准模式下在 IE 10 中定义控制台的唯一方法 - 通过禁用标准模式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T21:16:40.133

定义它！

```
if (typeof console == "undefined") {
    this.console = {log: function() {}};
} 
```

请参阅：[“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/questions/3326650/console-is-undefined-error-for-internet-explorer)

# php - 计算 CSV 中的值

> ID：14695424
> 
> 赞同：-2
> 
> 时间：2013-02-04T20:51:19.257
> 
> 标签：php, arrays, csv

.csv 文件：

```
question1,question2,question3,question4,question5,question6,question7,question8,question9,question10
yes,response,response,response,response,response,response,response,response,response
yes,response2,response2,response2,response2,response2,response2,response2,response2,response2
no,response3,response3,response3,response3,response3,response3,response3,response3,response3 
```

我想在 php.ini 中得到这个结果。

$question = "the_question_goes_here"

问题1
是 = 2
否 = 1

代码必须找到每个问题的唯一答案并计算每个问题的数量。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:58:58.810

`str_getcsv()`可用于将 csv 字符串作为数组获取。

使用它，您可以在数组上编写一个循环来计算值（在伪代码中）：

```
counts = array;
//Loop over each row
for(row in csvrows){
     for(cell in row){
         counts[rowHeader][cellValue] = counts[rowHeader][cellValue]+1;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:00:55.157

这应该可以将文件内容读入 PHP

```
$data= array();    
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        foreach ($data as $position => $value)  {
            if($row == 1) {
                $data[$position]['question'] = $value;
                $data[$position]['yes'] = 0;
                $data[$position]['no'] = 0;
                continue;
            }
            if ($value == 'yes') {
                  $data[$position]['yes'] = $data[$position]['yes'] + 1
            } elseif ($value == 'no') {
                  $data[$position]['no'] = $data[$position]['no'] + 1
            }
        }
        $row++;            
    }        
    fclose($handle);
} 
```

这将返回一个数组，您可以像这样读取

*   数组值
    *   '问题'键持有文本
    *   'yes' 键持有 numOf 是
    *   'no' 键持有 numOf 否

# wordpress - Wordpress 高级搜索插件

> ID：14695425
> 
> 赞同：-3
> 
> 时间：2013-02-04T20:51:21.300
> 
> 标签：wordpress, specifications, advanced-search

我想设计一个包含所有常用 Wordpress 组件（博客、联系我们、图片库等）的 Wordpress 网站。我希望网站有一个单独的部分用于“书籍”和“文章”。

管理员将能够输入一本书/文章及其详细信息（标题、作者、参考文献等）。我需要让用户（非管理员）能够对管理员输入的这些书籍进行高级搜索。

我应该为整个网站使用 Wordpress，并为图书搜索编写一个自定义插件吗？或者有一个用于搜索的自定义 PHP 页面？或者 是否有一个已经存在的插件，我可以利用 Wordpress 为我进行高级搜索？任何可以为我指明正确方向的信息都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:59:45.903

看看这个[Wordpress 插件](http://www.zirona.com/software/wordpress-advanced-search/)。它应该在 Wordpress 的范围内为您提供所需的内容。这应该可以节省为此功能编写自定义 PHP 代码的时间。

可能还有其他可用的插件也可以为您工作。开源的好处之一是有很多用户创建的内容。这应该可以帮助您入门。

# ruby - 如何找到以“..”开头的字符串？

> ID：14695427
> 
> 赞同：1
> 
> 时间：2013-02-04T20:51:47.783
> 
> 标签：ruby, regex

我试图找出后面只有“..”的字符串，但找不到：

```
["..ab","...cc","..ps","....kkls"].each do |x|
puts x if /../.match(x)
end
..ab
...cc
..ps
....kkls
=> ["..ab", "...cc", "..ps", "....kkls"]

["..ab","...cc","..ps","....kkls"].each do |x|
puts x if /(.)(.)/.match(x)
 end
..ab
...cc
..ps
....kkls
=> ["..ab", "...cc", "..ps", "....kkls"] 
```

***预期输出：***

```
["..ab","..ps"] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:59:17.873

你想要的是

```
/^\.\.(?!\.)/ 
```

开头的插入符号`^`表示匹配字符串的开头；句点必须用反斜杠转义，`\.`因为在正则表达式中，普通句`.`点匹配任何字符；这`(?!\.)`是一个负前瞻，意味着下一个字符不是句点。所以表达式的意思是，“在字符串的开头，匹配两个句点，后面必须跟一个不是句点的字符。”

```
>> /^\.\.(?!\.)/.match "..ab"
=> #<MatchData "..">
>> /^\.\.(?!\.)/.match "...cc"
=> nil 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:58:37.430

尝试选择 on `/^\.\.[^\.]/`（从两个点开始，然后不是一个点）。

```
ss = ["..ab","...cc","..ps","....kkls"]
ss.select { |x| x =~ /^\.\.[^\.]/ } # => ["..ab", "..ps"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T21:02:09.893

尝试`/^\.{2}\w/`用作正则表达式。

快速解释： ^ 表示字符串的开头。没有这个，它可以匹配在字符串中间找到的点。

`\.`转换为`.`-- 如果您单独使用点，它将匹配任何非换行符

`{2}`表示您正在寻找其中两个点。（你可以重写`/\.{2}/`为`/\.\./`）

最后，`\w`匹配任何单词字符（字母、数字、下划线）。

一个非常好的测试 Ruby 正则表达式的地方是[http://rubular.com/——](http://rubular.com/)它可以让你使用正则表达式并在你的浏览器中测试它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:41:31.053

您根本不需要正则表达式，您可以使用[`String#[]`](https://ruby-doc.org/core/String.html#method-i-5B-5D)or提取适当的前导块[`String#slice`](https://ruby-doc.org/core/String.html#method-i-slice)并进行简单的字符串比较：

```
>> a = ["..ab", "...cc", "..ps", "....kkls", ".", "..", "..."]
>> a.select { |s| s[0, 2] == '..' && s[0, 3] != '...' }
=> ["..ab", "..ps", ".."] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:58:22.693

也许是这样：

```
["..ab","...cc","..ps","....kkls"].each {|x| puts x if /^\.{2}\w/.match(x) } 
```

或者，如果您想确保 . 不匹配：

```
["..ab","...cc","..ps","....kkls"].each {|x| puts x if /^\.{2}[^\.]/.match(x) } 
```

# android - 设置 ROI OpenCV Android 时出错

> ID：14695428
> 
> 赞同：3
> 
> 时间：2013-02-04T20:51:52.500
> 
> 标签：android, image-processing, opencv, roi

我试图弄清楚如何在 Android 上的 OpenCV 中为图像设置 ROI。我在其他操作系统上做过这个，所以我认为我是怎么做的在语义上是正确的，但是某处有错误。

到目前为止，我已经尝试过了

```
Rect roi = new Rect(0, 0, inputFrame.cols(), inputFrame.rows());
Mat cropped = new Mat(inputFrame, roi); 
```

但是我在 OpenCV 类中的某个地方出现了一个错误，看起来像这样

```
Utils.matToBitmap() throws an exception:/home/reports/ci/slave/opencv/modules/java/generator/src/cpp/utils.cpp:107: 
error: (-215) src.dims == 2 && info.height == (uint32_t)src.rows && info.width ==
(uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2
(JNIEnv*, jclass, jlong, jobject, jboolean) 
```

我在 opencv 包装类提供的 onCameraFrame 回调中调用它

不知道该怎么做，有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T19:25:54.797

OpenCV for Android（和新的 Java API）有自己的方式来创建 ROI。

您所要做的就是调用 Mat 对象的 submat 方法。如果我没记错的话，调用 submat 不会创建该图像区域的副本，如果您想要一个副本，您可以为此目的在 submat 上使用 copyTo。

```
Mat roi = inputFrame.submat(rowStart, rowEnd, colStart, colEnd); 
```

您可以通过 3 种不同的方式调用 submat，查看链接了解更多详情：

*   submat（int rowStart，int rowEnd，int colStart，int colEnd）

[子垫 1](http://docs.opencv.org/java/3.1.0/org/opencv/core/Mat.html#submat-int-int-int-int-)

*   submat（范围行范围，范围 colRange）

[子垫 2](http://docs.opencv.org/java/3.1.0/org/opencv/core/Mat.html#submat-org.opencv.core.Range-org.opencv.core.Range-)

*   子垫（矩形投资回报率）

[子垫 3](http://docs.opencv.org/java/3.1.0/org/opencv/core/Mat.html#submat-org.opencv.core.Rect-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:08:16.460

该错误表明您正在尝试设置具有相同图像尺寸的 ROI，因此在这种情况下不需要 ROI。

为了确保这是问题所在，以下应该有效：

```
Rect roi = new Rect(0, 0, inputFrame.cols() - 1, inputFrame.rows() - 1);
Mat cropped = new Mat(inputFrame, roi); 
```

# jsf - 如何在 JSF 验证器中传递第二个值？

> ID：14695430
> 
> 赞同：12
> 
> 时间：2013-02-04T20:52:33.963
> 
> 标签：jsf, jsf-2

我在编辑页面和验证器中有一个简单的 JSF 输入表单，它检查重复值：

```
<td>Name</td>
<td>
    <h:outputText value="#{ud.name}"
                  rendered="#{not DCProfileTabGeneralController.editable}" />
    <h:inputText id="dcname" value="#{ud.name}" rendered="#{DCProfileTabGeneralController.editable}"
                 validator="#{ValidatorDatacenterController.validateDatacenterName}" autocomplete="off">
        <f:ajax event="blur" render="dcnamevalidator" />
    </h:inputText>
    <h:message id="dcnamevalidator" for="dcname" />
</td>

public void validateDatacenterName(FacesContext context, UIComponent component, Object value){
....
} 
```

我很感兴趣是否有任何可能的方法来发送将用于验证过程的第二个值？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T21:19:22.563

`<f:attribute>`想到了。向 inputtext 添加一个并在验证器中检索它。

```
<h:inputText id="dcname".....
<f:attribute name="param" value="myparam" /> 
</h:inputText> 
```

和：

```
String param = (String) component.getAttributes().get("param"); 
```

可以从EL获取值。祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:26:59.730

您可以添加一个 postValidate 事件来验证多个字段，例如

```
<f:event listener="#{bean.validationMethod}" type="postValidate" /> 
```

这应该在模型更新之前触发，您可以获得不同组件的新值

```
FacesContext fc = FacesContext.getCurrentInstance(); 
UIComponent components = event.getComponent();
UIInput param1 = (UIInput) components.findComponent("param1");
UIInput param2 = (UIInput) components.findComponent("param2"); 
```

如果验证失败，调用 FacesContext renderResponse 方法跳过模型更新。

# android - Android界面：像分组列表视图样式一样显示表单？

> ID：14695435
> 
> 赞同：1
> 
> 时间：2013-02-04T20:52:56.003
> 
> 标签：android, listview, interface

我正在为 iOS 构建一个已经存在的 Android 应用程序。在 iOS 上，我们非常喜欢使用[listview 分组样式](http://www.mosync.com/files/images/ListView-widget-segmented-list-on-ios.img_assist_custom-220x329.png)来显示详细信息和表单。在加载之前显示我们不知道它们有多少属性的对象的详细信息非常有用。

我知道 Android 没有类似的 tableview 样式。而且我不想使用自定义库来重新创建它，因为我不想向我的 Android 用户强制使用类似 iOS 的界面。

但是，您将如何创建一个显示类似信息的一致的 Android 界面？你有我的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:06:41.097

首先，你不将 iOS 风格的 UI 强加给 Android 用户的直觉是正确的，我尊重你。

Android 的 ListView 大致相当于 iOS 的 UITableView。有重要的区别。例如，您永远不应该在另一个可滚动容器中使用 ListView。如果 ListView 在特定布局中，它应该（通常）是唯一的可滚动组件。如果你想在一个布局中有多个 ListView，你可能根本不需要 ListView。您应该改为使用（垂直）LinearLayouts 并按顺序添加项目。

Cyril Mottier 撰写了有关为 Android 的 ListView 实现自定义行为的[优秀文章](https://www.google.com/search?q=%22Cyril%20Mottier%22%20%22ListView%20Tips%20&%20Tricks%22&oq=%22Cyril%20Mottier%22%20%22ListView%20Tips%20&%20Tricks%22&aqs=chrome.0.57.12884&ie=UTF-8)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:03:52.830

如果要在列表中显示数据，则可以使用[`ListView`](http://developer.android.com/reference/android/widget/ListView.html). [这](http://www.vogella.com/articles/AndroidListView/article.html)是一篇关于如何使用它的好文章。

# scheme - 我在哪里可以找到有关 Scheme 中“使用”指令的文档？

> ID：14695437
> 
> 赞同：2
> 
> 时间：2013-02-04T20:53:00.270
> 
> 标签：scheme, chicken-scheme

我正在使用 Chicken Scheme，我试图理解它的含义`(use abcd)`以及它与`(require-extension abcd)`. 鸡肉网站似乎没有足够的信息来澄清，网络搜索也没有提供任何有用的信息。如果有人能向我指出此类文档的方向，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:15:02.767

这是[文档](http://wiki.call-cc.org/man/4/Non-standard%20macros%20and%20special%20forms#use)：

```
use
[syntax] (use ID ...)

use is just a shorter alias for require-extension. 
```

以防万一：

```
require-extension
[syntax] (require-extension ID ...)

This is equivalent to (require-library ID ...) but performs an implicit import,
if necessary. Since version 4.4.0, ID may also be an import specification (using
rename, only, except or prefix).

This implementation of require-extension is compliant with SRFI-55 (see the
SRFI-55 document for more information). 
```

# android - 在listview android中添加项目时出现indexoutofbound异常

> ID：14695439
> 
> 赞同：0
> 
> 时间：2013-02-04T20:53:16.263
> 
> 标签：android, android-listview, indexoutofboundsexception

您好，我是 android 新手，我很难在 daynamic listview 中添加元素。当我单击 TextView(tv) 时，它应该在 ArrayList 的末尾添加元素，但是当我向下滚动到 listview 时，它会因 indexoutofbound 异常而崩溃。

```
public class PosterList extends Activity 
{

MyCustomAdapter dataAdapter = null;
ArrayList<Country> countryList = new ArrayList<Country>();

TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.posterlist);

            //Click on textview to add element in contrylist

    tv = (TextView) findViewById(R.id.myFilter);
    tv.setOnClickListener(new View.OnClickListener() 
    {
            public void onClick(View v) 
            {
                Country country = new Country("df","df","df","m");
                countryList.add(country);      
                dataAdapter.notifyDataSetChanged();
            }
    });

    displayListView();

}

private void displayListView() 
{

            //Parse my JSON and store it in to different arrays

    for(int k=0;k<len;k++)
    {
        Country country = new Country(subcategory[k],caseid[k],time[k],newpost[k]);
        countryList.add(country);
    }

    dataAdapter = new MyCustomAdapter(this,R.layout.country_info, countryList);
    ListView listView = (ListView) findViewById(R.id.listView1);
    listView.setAdapter(dataAdapter);

    listView.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) 
        {

                Country country = (Country) parent.getItemAtPosition(position);
                Toast.makeText(getApplicationContext(),
                country.getContinent(), Toast.LENGTH_SHORT).show();

        }
    });

}

private class MyCustomAdapter extends ArrayAdapter<Country> 
{

    private ArrayList<Country> originalList;
    private ArrayList<Country> countryList;

    public MyCustomAdapter(Context context, int textViewResourceId, 
        ArrayList<Country> countryList) {
    super(context, textViewResourceId, countryList);
    this.countryList = new ArrayList<Country>();
    this.countryList.addAll(countryList);
    this.originalList = new ArrayList<Country>();
    this.originalList.addAll(countryList);
}

private class ViewHolder 
{
    TextView code;
    TextView name;
    TextView continent;
    TextView region;
 }

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{

    ViewHolder holder = null;
    Log.v("ConvertView", String.valueOf(position));
    if (convertView == null) 
    {

        LayoutInflater vi = (LayoutInflater)getSystemService(
            Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate(R.layout.country_info, null);

        holder = new ViewHolder();
        holder.code = (TextView) convertView.findViewById(R.id.code);
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.continent = (TextView) convertView.findViewById(R.id.continent);
        holder.region = (TextView) convertView.findViewById(R.id.region);

        convertView.setTag(holder);

    } 
    else
     {
            holder = (ViewHolder) convertView.getTag();
     }

    Country country = countryList.get(position);
    holder.code.setText(country.getCode());
    holder.name.setText(country.getName());
    holder.continent.setText(country.getContinent());
    holder.region.setText(country.getRegion());

    return convertView;

  }
   }
} 
```

这是我的 Country 课程，有人可以帮我看看这段代码有什么问题吗？

```
`enter code here`public class Country {

 String code = null;
 String name = null;
 String continent = null;
 String region = null;

 public Country(String code, String name, String continent, String region) {
  super();
  this.code = code;
  this.name = name;
  this.continent = continent;
  this.region = region;
 }

 public String getCode() {
  return code;
 }
 public void setCode(String code) {
  this.code = code;
 }
 public String getName() {
  return name;
 }
 public void setName(String name) {
  this.name = name;
 }
 public String getContinent() {
  return continent;
 }
 public void setContinent(String continent) {
  this.continent = continent;
 }
 public String getRegion() {
  return region;
 }
 public void setRegion(String region) {
  this.region = region;
 }

 @Override
 public String toString() {
  return  code + " " + name + " "
    + continent + " " + region;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:59:59.077

摆脱适配器中的这些字段

```
private ArrayList<Country> originalList;
private ArrayList<Country> countryList; 
```

您正在修改传递给适配器中的超级调用的 countryList，但您正在从存储为适配器内部字段的 countryList 中读取，当您添加新国家/地区时，该字段永远不会被修改！

您正在创建原始国家/地区列表的副本.. 但您在创建副本后从未修改过

# c# - GridView 不会在回发时更新值？

> ID：14695442
> 
> 赞同：1
> 
> 时间：2013-02-04T20:53:30.900
> 
> 标签：c#, asp.net

我有一个带有一些自定义模板的gridview：

```
 <asp:GridView ID="gvGroups" runat="server" AutoGenerateColumns="False"
     CssClass="table table-hover table-striped" GridLines="None" >
        <Columns>
            <asp:BoundField DataField="GroupDescription" HeaderText="Name" ReadOnly="True" 
                SortExpression="GroupDescription" />
            <asp:TemplateField HeaderText="Administrator">
                <ItemTemplate>
                    <asp:CheckBox ID="cbAdmin" runat="server" 
                    Checked='<%# Boolean.Parse((Boolean)Eval("IsReadOnly") ? "True" : "False") ? false : true %>'/>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Remove">
                <ItemTemplate>
                    <asp:CheckBox ID="cbRemove" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="ID" SortExpression="GroupID" Visible="False">
                <ItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Bind("GroupID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

然后我有一个按钮，我单击它应该更改组管理并删除选中的组。

这是按钮代码：

```
 protected void btnSave_Click(object sender, EventArgs e)
        {
            foreach (GridViewRow gvr in gvGroups.Rows)
            {
                CheckBox cbAdmin = (CheckBox)gvr.FindControl("cbAdmin");
                CheckBox cbRemove = (CheckBox)gvr.FindControl("cbRemove");
                Label lblID = (Label)gvr.FindControl("lblID");
                int id;
                bool idValid = int.TryParse(lblID.Text,out id);
                bool isReadOnly = !cbAdmin.Checked;

                if (idValid)
                {
                    Group g = SecurityManager.GetGroup(id);

                    if (g.IsReadOnly != isReadOnly)
                    {
                        bool updateSuccess = SecurityManager.ChangeGroupPermissions(id, isReadOnly);
                    }

                    if (cbRemove.Checked)
                    {
                        bool removeEmpSuccess = SecurityManager.RemoveEmployeesFromGroup(id);
                        bool removeSuccess = SecurityManager.RemoveGroup(id);
                    }
                }
            }
        } 
```

我使用了调试器，即使我取消选中所有组的管理员，当我查看 cbAdmin.Checked 时，它仍然是正确的，这与它开始时的值相同，因此什么也没有发生。

可能是什么问题呢？为什么我在按钮回发上看不到更新的值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:59:02.593

你必须在`GridView#DataBind()`里面打电话`if(!IsPostBack){ }`

您还需要将文本框的 AutoPostBack 属性设置为“true”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:02:56.160

我猜您正在`GridView`对回发进行数据绑定。这将再次从数据库加载数据并防止更改。所以 ue 的`PostBack`属性`Page`：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        DataBindGridView();
    }
} 
```

# csv - Biztalk 2010 聚合

> ID：14695445
> 
> 赞同：0
> 
> 时间：2013-02-04T20:53:42.813
> 
> 标签：csv, biztalk, aggregation

我有一个这样的输入 xml 文件：

```
<root>
   <item ...>
   <item ...>
   <item ...>
</root> 
```

我需要在同一个编排中以 2 种方式构建和发送消息： 1\. 作为每个项目的 1 个 xml 文件发送到一个目的地 2\. 将整个“项目”作为一个单独的 csv 平面文件发送。

我的文件实际上是由从信封中提取每个“项目”的管道处理的。问题是我需要根据特定条件合并所有“项目”。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:38:59.173

似乎至少有两种方法可以解决这个问题 - 不清楚你如何“到达”输入 xml 文件批处理 - 这将推动决定，IMO。

1.  由于您似乎在一开始就已经在一个 xml 批处理中获得了所有消息，所以这应该很容易。在管道中对它们进行分批之前，您需要确保将此批消息 ( `root`...) 发布到消息框（如果尚未发布）（即直接绑定，如果消息尚未来自消息框）。

    然后，您可以为 CSV 文件创建一个映射，该映射将根消息作为输入，然后过滤掉`item`CSV 中不需要的 s。要在 Map 中进行过滤，您可以使用[带有 conditionals 的循环 functoid](http://geekswithblogs.net/benny/archive/2006/02/04/68178.aspx)，或者我的偏好只是在 xslt 中实现 map，然后使用`item`xpath 过滤器将模板应用于所需的 s。订阅 FILE 发送端口，过滤 (BTS.MessageType) 到传入的 xml 批处理消息，然后可以应用此映射。

    然后，您的分批管道将处理各个 xml 文件，然后另一个订阅物理文件发送端口可以将它们写出。

    2\. 或者，如果为时已晚并且`root`xml 文件已被分批（并且您无法访问原始 Xml 文件 FWR），您将需要使用另一个 orch 重新组合 CSV 所需的消息（分散和收集）。这将更加复杂，因为您可能需要关联消息（例如在某些批次标识符上），或应用计时器等。

    查看[Pipeline Aggregator](http://msdn.microsoft.com/en-us/library/aa561747.aspx)示例，了解如何使用循环将“理想的”CSV 消息收集到`Microsoft.XLANGs.Pipeline.SendPipelineInputMessages`变量中，然后使用管道组装批次。如果已经在单个项目消息上提升了“理想”的标准，那么您可以在接收中应用过滤器，但如果没有，您将需要在循环中使用决策来确定是否将消息添加到批次。

# calendar - Obout Suite Superform DateField 问题

> ID：14695449
> 
> 赞同：0
> 
> 时间：2013-02-04T20:53:56.560
> 
> 标签：calendar, datefield, obout

我在网站中使用 Obout Suite。我有一个 SuperForm 控件，我在其中插入了一些控件，例如 BoundFields 或 DateFields。

问题是当我在 DateField 日历中选择一个日期时，关联的文本框不会刷新日期的值。

我有类似的东西：

```
<obout:SuperForm ID="SuperForm2" runat="server" AutoGenerateInsertButton ="true" AutoGenerateEditButton="false" AutoGenerateDeleteButton="false" AutoGenerateRows="false"                        DataKeyNames="IdDocumento" DefaultMode="Insert"  Width="525" DataSourceID="SqlDataSource2">
   <Fields>
       <obout:BoundField DataField="DocumentType" HeaderText="Name" FieldSetID="FieldSet1" />                                
       <obout:DateField DataField="OrderDate" HeaderText="Order Date" FieldSetID="FieldSet2" DataFormatString="{0:MM/dd/yyyy}" ApplyFormatInEditMode="true" />
       <obout:DateField DataField="RequiredDate" HeaderText="Required Date" FieldSetID="FieldSet2" DataFormatString="{0:MM/dd/yyyy}" ApplyFormatInEditMode="true" /> 

   </Fields>

    <FieldSets>                           
       <obout:FieldSetRow>
           <obout:FieldSet ID="FieldSet1" />
       </obout:FieldSetRow>
       <obout:FieldSetRow>
           <obout:FieldSet ID="FieldSet2" />
       </obout:FieldSetRow>           
    </FieldSets>
 </obout:SuperForm> 
```

标签前缀是：

```
<%@ Register TagPrefix="obout" Namespace="Obout.SuperForm" Assembly="obout_SuperForm" %> 
```

解决方案引用了“obout_Calendar2_Net.dll”。我忘记了什么吗？

提前致谢。

卡托哈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:48:20.320

好吧，最后我找到了解决方案。如果您像我一样使用 .net 4.0.... 您必须将属性 clientIDMode="AutoID" 添加到 web.config 文件的“pages”部分：

```
<pages clientIDMode="AutoID">
  ....
</pages> 
```

这会生成 asp.net 控件 ID，如过去版本的 .net

# jquery - 如何使用jquery识别嵌套在多个span元素中的复选框元素

> ID：14695451
> 
> 赞同：0
> 
> 时间：2013-02-04T20:54:07.727
> 
> 标签：jquery

我想识别已嵌套在多个跨度元素中的复选框元素，下面是我的代码片段

```
<asp:Label ID="Label13" runat="server" AssociatedControlID="chk1" CssClass="required" Style="vertical-align : baseline ; margin:0px;" >
   <span style="background : none transparent scroll repeat 0% 0% ; cursor: pointer ; display : inline-block ; margin-right : 8px ; text-align : right ; vertical-align : top ; width : 160px">
                            HI HOW ARE YOU...</span>

<span style="cursor : pointer ; font : 99% sans-serif ; height : 27px ; margin : 0px ; padding-bottom : 0px ; padding-left : 8px ; padding-right : 10px ; padding-top : 7px ; text-align : left ; vertical-align : top ; width : 257px">
<span style="display:inline-block;width:38%;text-align : left; margin : -20px;padding-left : 10px ; padding-right:10px">
                             <asp:CheckBox runat="server" ID="chk1" Text="Yes" Checked="false" /></span>
 <span style="display:inline-block;width:38%;"> <asp:CheckBox runat="server" Checked="false" ID="chk2" Text="No" /></span></span></asp:Label> 
```

因此，我的表单将使用 jquery 进行汇总，它将找到我在下面提到的所有元素。

```
$this.find('.required :input, .required select').each(function () {

                var $input = $(this),
                fieldValue = $.trim($input.val()),
    labelText = $input.closest('label').text().replace(o.removeLabelChar, ''),
                        errorMsg = ''; 
```

因此，此 find 方法方法将查找所有输入元素。但不幸的是，我找不到我的复选框。请提供一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:01:00.993

1.  您的复选框没有嵌套到任何“输入”控件或任何“选择”控件中。这就是您的代码找不到它的原因。
2.  要访问您的复选框，请使用`$('label span input[type="checkbox"]')`

PS：伙计，用你的代码做点什么，它看起来......非常糟糕。

# java - Java：需要一些帮助才能同时使用线程和图形

> ID：14695453
> 
> 赞同：1
> 
> 时间：2013-02-04T20:54:15.257
> 
> 标签：java, multithreading, graphics

作为一个初学者，我仍然需要一些关于如何同时使用线程和图形的解释。我想做的是非常基本的：只让两个球在一个框架内同时移动。这是我尝试过的：

```
public class Main extends JFrame
{
    private static final long serialVersionUID = 1L;
    private static final int _HEIGHT = 320, _WIDTH = 480;
    private MyPanel panel;

    public Main()
    {
        super("Test");

        panel = new MyPanel();

        this.setContentPane(panel);
        this.setBounds(350,100,_HEIGHT,_WIDTH);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setVisible(true);
    }

    public static void main(String[] args)
    {
        new Main();
    }
}

public class MyPanel extends JPanel
{
    private static final long serialVersionUID = 1L;
    ArrayList<Ball> listBalls;

    public MyPanel()
    {
        this.setBackground(Color.WHITE);
        listBalls = new ArrayList<Ball>();
        listBalls.add(new Ball(30,30));     
    }

    @Override
    public void paint(Graphics gr)
    {
        Graphics2D g = (Graphics2D) gr;
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g.setStroke(new BasicStroke(3f));
        super.paint(g);
        synchronized (listBalls) {
            for(Ball b : listBalls)
            {
                b.drawItself(g);
            }   
        }
    }
}

public class Ball extends JPanel implements Runnable
{
    private static final long serialVersionUID = 1L;
    private int x, y;
    private Thread thread;

    public Ball(int x, int y)
    {
        this.x = x;
        this.y = y;
    }

    public void drawItself(Graphics2D g)
    {
        g.setColor(Color.BLACK);
        g.fillOval(x, y, 13, 13);
    }

    public void run() 
    {
        Thread currentThread = Thread.currentThread();
        while (thread == currentThread) 
        {
            x+=2;
            y+=2;
            repaint();
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

但这不起作用（球没有出现），我不知道该怎么做..请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:01:12.010

1.  无需`Ball`扩展`JPanel`，您没有使用任何功能`JPanel`或它的子级。
2.  您不应该覆盖`paint`，建议您`paintComponent`改用。有很多原因，但您会喜欢的一个事实是，`paint`它不是双缓冲的，而是`paintComponent`- 闪烁的可能性较小
3.  如果您必须使用`Thread`，我建议您使用单个`Thread`并更新其中的所有球，然后更新显示。这通常会减少您使用的资源数量并使其更具可扩展性。
4.  你永远不会开始你的`Thread`，这意味着永远不会调用的`run`方法`Ball`

Swing 中的并发性存在一些特殊问题。我建议您看一下[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的 Concurrency 以获得概述。

**更新**

SO上有很多很好的例子，这里有一些我过去做过的......

*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [如何让线条动画更流畅？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)
*   [图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)

# mysql - mysql根据两个字段排序，然后重新编号“id”列

> ID：14695455
> 
> 赞同：0
> 
> 时间：2013-02-04T20:54:22.003
> 
> 标签：mysql, sorting

我有一个 5 列的表（列是 id、answer、weight、quiz_id 和 question_id），我想按 question_id 对其进行排序，然后按 weihgt 排序，然后我想根据这种双重排序递增地重新编号 id 列。在 mysql 中是否有可能（我正在使用 phpmyadmin）？

谢谢

就像是：

```
SELECT 
   @curRow := @curRow + 1 AS id,
   T.Answer, T.Weight, T.Quiz_Id, T.Question_Id
FROM wp_wpss_Answers T
   JOIN    (SELECT @curRow := 0) r
ORDER BY QuestioN_Id, Weight
LIMIT 0 , 1000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:00:13.583

假设您只想在查询中显示行号，然后使用如下内容：

```
SELECT 
   @curRow := @curRow + 1 AS RowNumber,
   T.Answer, T.Weight, T.Quiz_Id, T.Question_Id, T.Id
FROM YourTable T
   JOIN    (SELECT @curRow := 0) r
ORDER BY QuestioN_Id, Weight 
```

如果您想更新您的 ID，您可以使用上述方法，但我会问您为什么要这样做？我看不出有任何理由对您的 ID 列重新编号——将其设置为 Identity 并让 MySQL 处理它。

但是，要更新您的 Id 列，请尝试以下操作：

```
UPDATE YourTable t
  JOIN (SELECT 
       @curRow := @curRow + 1 AS RowNumber,
       T.Answer, T.Weight, T.Quiz_Id, T.Question_Id, T.Id
    FROM YourTable T
       JOIN    (SELECT @curRow := 0) r
    ORDER BY QuestioN_Id, Weight) T2 ON T.Id = T2.Id
SET t.Id = T2.RowNumber 
```

这是[小提琴](http://sqlfiddle.com/#!2/4ac3f/1)。

但是你真的应该重新考虑这种方法。

祝你好运。

# android - 按值复制数组失败（使用 clone() 或 arraycopy()）（Android、Java）

> ID：14695456
> 
> 赞同：2
> 
> 时间：2013-02-04T20:54:24.873
> 
> 标签：android, clone, arrays

为了制作包含值副本而不是通过引用的数组的副本，我执行以下操作：

```
int[][][] copy = {{{0}},{{0}},{{0,0}},{{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0}},{{0}},{{0,0}}};
System.arraycopy(spelerSpel, 0, copy, 0, spelerSpel.length); 
```

然后在副本中更改一个值：

```
copy[SPELER_NUMMER][0][0] = baanSpelerNummer; 
```

这导致在原始（spelerSpel）数组中保持相同的更改值，例如：

```
{{{4}},{{0}},{{0,0}},{{0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0}},{{0}},{{0,0}}}; 
```

作为副本。我也试过 .clone()，同样的结果。我究竟做错了什么？

顺便说一句，我的目标是 Android API 8，它不支持 Arrays.copyOf()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:34:47.170

`System.arraycopy()`不支持深拷贝，但它在简单数组的性能方面做得很好。

您可以将它与一些额外的循环一起使用来创建自己的多维`arraycopy3d()`：

```
public int[][][] arraycopy3d(int[][][] array) {

     int[][][] copy = new int[array.length][][];

     for (int i = 0; i < array.length; i++) {
         copy[i] = new int[array[i].length][];
         for (int j = 0; j < array[i].length; j++) {
             copy[i][j] = new int[array[i][j].length];
             System.arraycopy(array[i][j], 0, copy[i][j], 0, array[i][j].length);
        }
    }

    return copy;
} 
```

# python - 在 TCP Python SocketServer 中捕获目标 IP

> ID：14695458
> 
> 赞同：2
> 
> 时间：2013-02-04T20:54:32.307
> 
> 标签：python, linux, socketserver

我有一个在 Linux 服务器上运行的 Python 脚本，该服务器有十几个与之关联的 IP 地址。我从 Python 的 socketserver 库中实现了一个 TCPSServer，并让它监听所有的网络接口。

多个设备将连接到该服务器，我们需要能够以某种方式捕获目标的 IP 地址（不是客户端的 IP 地址，而是客户端认为它正在连接的服务器的 IP 地址）。现在，我可以接收客户端连接，我可以看到客户端 IP，但我无法弄清楚获取目标 IP 的方法。

有谁知道在 socketserver 类上捕获目标 IP 的方法？似乎如果我可以监听多个接口，就会有一种方法可以判断哪个接口被击中。

这最终将安装在几台服务器上，每台服务器都有未知数量的网络接口。但是，我们确实知道这只会存在于基于 Linux 的系统上。因此，如果有特定于操作系统的方法来执行此操作，我也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:02:42.287

如果你有一个`socket`对象，你可以使用`socket.getsockname()`它来获取它绑定的 IP 地址。所以类似于：

```
# IPv4
client = listening_socket.accept()
(ipv4,port) = client.getsockname()

# IPv6
client = listening_socket.accept()
(address, port, flow_info, scope_id) = client.getsockname() 
```

从来没有在绑定到所有接口的多宿主服务器上测试它`socket`——据我所知，可能会返回 IPv4 0.0.0.0 或 IPv6 等价物，这并不是那么有用。

# asp.net-mvc - 如何存储 MVC MiniProfiler 结果

> ID：14695460
> 
> 赞同：24
> 
> 时间：2013-02-04T20:54:38.713
> 
> 标签：asp.net-mvc, mvc-mini-profiler

我想将 MVC MiniProfiler 的结果保存到 sql server 数据库中。我分析了一个高负载 mvc4 页面以发现一个棘手的性能问题，该问题在我们的测试或开发系统上无法重现，并且仅在生产服务器上偶尔发生。

连接迷你分析器的最佳方法是什么？是否有现有的扩展来做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-08T15:20:19.193

我刚刚设置了[MiniProfiler](http://miniprofiler.com/)以将结果保存到 SQL Azure，这相当容易。我们使用[MiniProfiler.MVC3](http://nuget.org/packages/MiniProfiler.MVC3/2.0.2)来处理所有的接线，如此[处](http://samsaffron.com/archive/2011/07/25/Automatically+instrumenting+an+MVC3+app)所述。

表创建脚本嵌入到带有[`SqlServerStorage.TableCreationScript`](https://github.com/SamSaffron/MiniProfiler/blob/85609b6226eff71ac21dfa990dd1fa54aace237f/StackExchange.Profiling/Storage/SqlServerStorage.cs#L511)静态字段的程序集中，因此您可以使用它，但在深入研究代码时，我发现最新的开发分支通过添加一些索引略微增强了脚本。表结构在其他方面保持不变，因此它仍然适用于[nuget](http://nuget.org/packages/MiniProfiler/2.0.2)上可用的最新包。

在撰写本文时，[这里直接链接](https://github.com/SamSaffron/MiniProfiler/blob/85609b6226eff71ac21dfa990dd1fa54aace237f/StackExchange.Profiling/Storage/SqlServerStorage.cs#L511)到最新的表创建脚本。

之后，您唯一需要做的就是设置[MiniProfiler](http://miniprofiler.com/)以通过单行代码使用 SQL：

```
MiniProfiler.Settings.Storage = new SqlServerStorage("<your connection string>"); 
```

如果您不使用 SQL Azure，就可以了，但是当我们尝试在 Azure 中使用它时，我发现了一个问题。分析尝试保存时，我收到以下异常（谢谢[ELMAH ）：](http://code.google.com/p/elmah/)

> System.Data.SqlClient.SqlException
> 
> 此版本的 SQL Server 不支持没有聚集索引的表。请创建聚集索引并重试。

为了解决这个问题，我必须在表中添加一个额外的（未使用的）列`MiniProfilers`。以下是相关创建表脚本的开头：

```
create table MiniProfilers
(
    RowId integer not null identity constraint PK_MiniProfilers primary key clustered, -- Need a clustered primary key for SQL azure
    Id    uniqueidentifier not null,
    Name  nvarchar(200) not null, 
```

由于 Guid Id 列不再是主键，我添加了一个额外的索引以确保查找仍然快速：

```
create unique nonclustered index IX_MiniProfilers_Id on MiniProfilers (Id) 
```

希望有帮助。

* * *

**更新**

支持 SQL Azure 的更改已作为[拉取请求](https://github.com/SamSaffron/MiniProfiler/pull/114)提供并被接受。谢谢[贾罗德](https://stackoverflow.com/users/3/jarrod-dixon)。

# ruby-on-rails - 如何访问 Ruby 响应的返回？

> ID：14695461
> 
> 赞同：0
> 
> 时间：2013-02-04T20:54:42.513
> 
> 标签：ruby-on-rails, ruby

假设我执行一个方法

```
a.kung_fu_this 
```

该方法`kung_fu_this`在控制台中返回一个 OpenStruct 作为响应。我将如何访问这些信息？

例如，假设它返回了一个 OpenStruct，例如：

```
>> a.kung_fu_this
=> {Car: 'Mazda', Wood: 'Maple'} 
```

Hpw 我可以捕获该返回并在另一种方法中使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:58:25.003

只需创建一个新变量并为其分配方法调用的返回值，

```
returned_kung_fu = a.kung_fu_this
returned_kung_fu[:Car] # Mazda 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:58:35.987

您可以将其存储在变量中，然后使用它。

```
value = a.kung_fu_this 
```

# symfony - 将 fos 用户捆绑服务转换为 yml

> ID：14695464
> 
> 赞同：3
> 
> 时间：2013-02-04T20:54:44.463
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我有一个 FosUserBundle 服务需要转换为 yml 格式。我该怎么做？有翻车机或其他什么吗？

这在 yml 中看起来如何？

```
 <service id="fos_user.mailer.twig_swift" class="FOS\UserBundle\Mailer\TwigSwiftMailer" public="false">
        <argument type="service" id="mailer" />
        <argument type="service" id="router" />
        <argument type="service" id="twig" />
        <argument type="collection">
            <argument key="template" type="collection">
                <argument key="confirmation">%fos_user.registration.confirmation.template%</argument>
                <argument key="resetting">%fos_user.resetting.email.template%</argument>
            </argument>
            <argument key="from_email" type="collection">
                <argument key="confirmation">%fos_user.registration.confirmation.from_email%</argument>
                <argument key="resetting">%fos_user.resetting.email.from_email%</argument>
            </argument>
        </argument>
    </service> 
```

我试图使用 Yml 转储程序，但这只是给了我序列化的对象：

```
 $cs = new ContainerBuilder();

    $loader1 = new Loader\XmlFileLoader($cs, new FileLocator(__DIR__ . '/../../../../vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Resources/config'));
    $loader1->load('mailer.xml');

    $dumper = new \Symfony\Component\Yaml\Dumper();

    file_put_contents(__DIR__ . '/test2.yml', $dumper->dump($cs)); 
```

任何提示将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T20:06:06.437

您可以尝试这样做：

```
services:
    fos_user.mailer.twig_swift:
        class: FOS\UserBundle\Mailer\TwigSwiftMailer
        arguments:
            - @mailer
            - @router
            - @templating
            - { template: { confirmation: %fos_user.registration.confirmation.template%, resetting: %fos_user.resetting.email.template% }, from_email: { confirmation: %fos_user.registration.confirmation.from_email%, resetting: %fos_user.resetting.email.from_email% } } 
```

你也使用了错误的倾倒器，你应该使用`Symfony\Component\DependencyInjection\Dumper\YamlDumper`

# c# - DataLoadOptions LoadWith 在关系为空时防止对象加载

> ID：14695473
> 
> 赞同：1
> 
> 时间：2013-02-04T20:55:19.077
> 
> 标签：c#, sql-server, linq-to-sql

我有一种情况，我想急切地加载使用 LINQ-to-SQL 从数据库中检索到的用户的组织属性（因为我`using`在这里尝试稍后获取该属性失败，因为上下文的连接已关闭）。问题是有时用户没有组织。在这种情况下`FetchUserByName`返回`null`。根本不是我想要的。有没有办法让它按照我想要的方式工作，即返回一个用户实例，无论他们是否有关联的组织？

```
 private static void EagerLoad(DataContext ctx)
    {
        var loadOpt = new DataLoadOptions();
        loadOpt.LoadWith<User>(u => u.Organization);
        ctx.LoadOptions = loadOpt;
    }

    public User FetchUserByName(string username)
    {
        User user = null;
        using (var ctx = contextManager.GetSingleDataContext())
        {
            EagerLoad(ctx);
            user = ctx.GetTable<User>().SingleOrDefault(u => u.UserName == username && u.IsActive);
        }

        return user;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:21:06.153

记录可能遇到此问题的其他人的修复程序。

`LoadWith`实际上通过查看数据模型类中的外键在数据库中是否可以为空来确定是否在 LINQ-to-SQL 创建的 SQL中使用 an`INNER JOIN`或 an 。`OUTER LEFT JOIN`如果它可以为空，则使用外连接。

```
 [Column]
    public int OrganizationId { get; set; } /*** Here is The Problem ***/

    private EntityRef<Organization> _organization;

    [Association(OtherKey = "OrganizationId", Storage = "_organization", ThisKey = "OrganizationId", IsForeignKey = true)]
    public Organization Organization
    {
        get
        {
            return this._organization.Entity;
        }
    } 
```

将一行更改为：

```
public? int OrganizationId { get; set; } 
```

然后一切都按预期工作。

# xcode - #define iTunesFileSharingEnabled ... 我该如何声明

> ID：14695487
> 
> 赞同：0
> 
> 时间：2013-02-04T20:56:50.940
> 
> 标签：xcode, cocoa

我想根据 Info.plist 文件上的 iTunes 文件共享布尔状态的状态创建一个定义。所以，我创建了这个：

```
#define itunesFileSharingEnabled [[[NSBundle mainBundle] \
objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]

#if itunesFileSharingEnabled
#define something
#endif 
```

但是 if**在预处理器表达式开始时失败并出现错误无效标记**。

如果我用#define itunesFileSharingEnabled 替换

```
#define itunesFileSharingEnabled YES 
```

比 if 完美编译。所以错误在前一行。Xcode 不喜欢 #define 行。

如果 iTunes 文件共享是 YES，我想要定义一些指令为真，如果不是，则定义为 NO。

我该如何声明？

谢谢。

* * *

编辑：

问题是我不能使用常规 if 在运行时检查 iTunes 文件共享，因为我想使用 #error 或 #warning 指令使编译器失败...

例如，稍后在我的代码中我想使用它

```
#if iTunesFileSharingEnabled
#error TURN OFF FILE SHARING
#endif 
```

如果打开文件共享，我希望编译器失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:08:56.497

预处理器指令在编译时进行评估。

在预处理器第一次运行之后

```
#define itunesFileSharingEnabled [[[NSBundle mainBundle] \
objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]

#if itunesFileSharingEnabled
#define something
#endif 
```

变成

```
#if [[[NSBundle mainBundle] objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]
#define something
#endif 
```

在第二次运行期间，预处理尝试验证`[[[NSBundle mainBundle] objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]`. 这不起作用，因为这无法在编译时进行评估。这是一个只能在运行时评估的语句。

* * *

我不知道你想做的事情是否有可能。（我对预处理器了解不多）。

我想你已经知道你可以在运行时进行这些检查

```
if ([[[NSBundle mainBundle] \
objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]) {
    [self foo];
} 
else {
    [self bar];
} 
```

* * *

另一种选择是强制执行手动输入的预编译器宏

这会进入您的代码，在某个地方它只被调用一次。可能在您的库的 init 中：

```
#if HAS_ITUNES_FILESHARING
    if (![[[NSBundle mainBundle] objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]) {
        [NSException raise:@"MBFileSharingNotActiveButDeclaredException" format:@"File sharing is not active but \"HAS_ITUNES_FILESHARING\" is set to 1"];
    }
#else
    if ([[[NSBundle mainBundle] objectForInfoDictionaryKey:@"UIFileSharingEnabled"] boolValue]) {
        [NSException raise:@"MBFileSharingActiveButNotDeclaredException" format:@"File sharing is active but you did not declare it as preprocessor macro. Please set \"HAS_ITUNES_FILESHARING\" to 1"];
    }
#endif 
```

这必须在`Build Settings`as中输入`Preprocessor Macro`：

```
HAS_ITUNES_FILESHARING=1 
```

如果`HAS_ITUNES_FILESHARING=1`未在预处理器宏部分中声明，但文件共享处于活动状态，则代码将引发异常。

如果`HAS_ITUNES_FILESHARING=1`已声明，但文件共享未激活，代码也会引发异常。

这样，您始终可以判断预处理器宏与配置匹配。如果您只调用一次（`+(void)initialize`应该完全没有性能影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:19:52.413

尽管您只能在运行时（在代码中）检查它，但 iTunes 文件共享是应用程序开发人员在开发中设置的东西。如果您不想共享文件，请不要打开它。

不过，大概你自己的左右手在交叉用途上工作实际上并没有遇到问题——更有可能的是，你正在编写代码（希望关闭 iTunes 文件共享）以供某人使用其他（谁可能打开它）？

在这种情况下，您最好的办法是文档（或许可）。与您的资料库的用户沟通，它应该只在没有 iTunes 文件共享的项目中使用。换句话说：如果您将源代码提供给其他程序员，您已经放弃了对他们如何使用它的控制权，但您仍然可以就如何最好地使用它向他们提供建议。（或者让您的律师让他们同意仅以您指定的方式使用您的软件，但这不再是编程问题，也不是法律咨询论坛。）

（除此之外：您还可以考虑使用构建系统做一些有趣的事情：例如读取项目的主要 Info.plist 的 shell 脚本构建阶段。但是，如果您的库是应用程序的依赖项，则需要先构建它，这意味着 plist 不会在那里供它阅读。同样，沟通是你最好的选择。）

# python - Python 中 HTTP POST 请求的行为不一致

> ID：14695490
> 
> 赞同：6
> 
> 时间：2013-02-04T20:57:12.657
> 
> 标签：python, node.js, http, rest, urllib2

尝试在 Python (WSGI) 和 NodeJS + Express 应用程序之间发出 POST 请求。它们位于不同的服务器上。

问题是，当使用不同的 IP 地址（即私有网络与公共网络）时，`urllib2`公共网络上的请求成功，但对私有网络的相同请求失败，并带有`502 Bad Gateway`or `URLError [32] Broken pipe`。

`urllib2`我正在使用的代码是这样的：

```
req = urllib2.Request(url, "{'some':'data'}", {'Content-Type' : 'application/json; charset=utf-8'})

res = urllib2.urlopen(req)

print f.read() 
```

现在，我还使用以下代码对请求进行了编码[`requests`](http://docs.python-requests.org/en/latest/)：

```
r = requests.post(url, headers = {'Content-Type' : 'application/json; charset=utf-8'}, data = "{'some':'data'}")

print r.text 
```

并得到`200 OK`回应。这种替代方法适用于两个网络。

我有兴趣找出`urllib2`我不知道的请求是否需要一些额外的配置，或者我是否需要查看一些可能丢失的网络配置（我不相信是这种情况，因为备用请求方法有效，但我肯定是错的）。

任何与此有关的建议或指示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:30:35.237

这里的问题是，正如 Austin Phillips 所指出的，[`urllib2.Request`](http://docs.python.org/2/library/urllib2.html#urllib2.Request)' 的构造函数的`data`参数：

> 可能是一个字符串，指定要发送到服务器的附加数据……`data`应该是标准*application/x-www-form-urlencoded*格式的缓冲区。urllib.urlencode() 函数采用 2 元组的映射或序列，并以这种格式返回一个字符串。

通过将 JSON 编码数据而不是 urlencoded 数据传递给它，您会在某处混淆它。

但是，`Request`有一个方法[`add_data`](http://docs.python.org/2/library/urllib2.html#urllib2.Request.add_data)：

> 将请求数据设置为数据。除了 HTTP 处理程序之外，所有处理程序都会忽略这一点——它应该是一个字节字符串，并将请求更改为 POST 而不是 GET。

如果您使用它，您可能还应该使用`add_header`它而不是在构造函数中传递它，尽管文档中似乎没有特别提到这一点。

所以，这应该工作：

```
req = urllib2.Request(url)
req.add_data("{'some':'data'}")
req.add_header('Content-Type', 'application/json; charset=utf-8')
res = urllib2.urlopen(req) 
```

* * *

在评论中，你说：

> 我不想在不知道为什么我看到这个问题的情况下就切换到请求的原因是，可能存在一些更深层次的潜在问题，这可能会再次出现并导致以后难以检测到的问题.

如果你想找到深层的潜在问题，你不会仅仅通过查看你的客户端源来做到这一点。弄清楚“为什么 X 工作但 Y 失败？”的第一步 使用网络代码的目的是弄清楚每个发送的字节 X 和 Y。然后你可以尝试缩小相关的差异是什么，然后找出你的代码的哪一部分导致 Y 在相关的地方发送了错误的数据。

您可以通过在服务中记录事物（如果您控制它）、运行 Wireshark 等来做到这一点，但对于简单的情况，最简单的方法是 netcat。您需要`man nc`为您的系统阅读（并且，在 Windows 上，您需要先获取并安装 netcat，然后才能运行它），因为每个版本的语法都不同，但它总是很简单，例如`nc -kl 12345`.

然后，在您的客户端中，更改要使用的 URL 来`localhost:12345`代替主机名，它将连接到 netcat 并发送其 HTTP 请求，该请求将被转储到终端。然后，您可以复制并使用`nc HOST 80`并粘贴它以查看真实服务器的响应方式，并使用它来缩小问题所在。或者，如果您遇到困难，至少您可以将数据复制并粘贴到您的 SO 问题中。

* * *

最后一件事：这几乎肯定与您的问题无关（因为您正在发送完全相同的数据`requests`并且它正在工作），但您的数据实际上不是有效的 JSON，因为它使用单引号而不是双引号。根据[文档](http://www.json.org/)，`string`定义为：

```
string
    ""
    " chars " 
```

（文档也有很好的图形表示。）

通常，除了非常简单的测试用例之外，您不想手动编写 JSON。在许多情况下（包括您的情况），您所要做的就是将 替换为`"…"`，`json.dumps(…)`所以这不是一个严重的困难。所以：

```
req = urllib2.Request(url)
req.add_data(json.dumps({'some':'data'}))
req.add_header('Content-Type', 'application/json; charset=utf-8')
res = urllib2.urlopen(req) 
```

那么，它为什么有效呢？好吧，在 JavaScript 中，单引号字符串是合法的，以及在 JSON 中无效的反斜杠转义之类的其他内容，并且任何使用限制评估（或更糟糕的是原始评估）进行解析的 JS 代码都将接受它. 而且，由于很多人因此习惯了编写糟糕的 JSON，许多浏览器的原生 JSON 解析器和许多其他语言的 JSON 库都有解决方法来允许常见错误。但你不应该依赖它。

# xaml - Windows Phone 8 升级中的重复库

> ID：14695491
> 
> 赞同：1
> 
> 时间：2013-02-04T20:57:18.820
> 
> 标签：xaml, c#-4.0, windows-phone-7.1, windows-phone-8

我正在将应用程序从 Windows Phone 7.1 升级到 Windows Phone 8。PanaromaItem 和 Pivot 控件的每个实例都给我这个错误：

“Microsoft.Phone.Controls.Pivot”类型存在于“d:\Lib\Microsoft.Phone.Controls.dll”和“c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8”中。 0\Microsoft.Phone.dll'

xmlns 读取：

```
 xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls" 
```

那应该怎样才能让我摆脱对 Microsoft.Phone.Controls.dll 的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:23:28.030

看起来像列出的已知升级问题中的第二个@

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207030(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207030(v=vs.105).aspx)。

希望能帮助到你！

# ios - NSMutableString replaceOccurrencesOfString 替换整个单词

> ID：14695493
> 
> 赞同：4
> 
> 时间：2013-02-04T20:57:27.783
> 
> 标签：ios, objective-c, nsmutablestring

有没有办法使用`replaceOccurrencesOfString`(from `NSMutableString`) 替换整个单词？

例如，如果我想替换字符串中所有出现的分数，比如“1/2”，我希望它只匹配那个特定的分数。所以如果我有“11/2”，我**不**希望它与我的“1/2”规则相匹配。

我一直在试图寻找这个问题的答案，但我没有运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T21:04:22.477

您可以在 Regex 中使用单词边界`\b`。此示例匹配示例字符串开头和结尾的“1/2”，但中间选项均不匹配

```
// Create your expression
NSString *string = @"1/2 of the 11/2 objects were 1/2ed in (1/2)";

NSError *error = nil;
NSRegularExpression *regex = 
  [NSRegularExpression 
    regularExpressionWithPattern:@"\\b1/2\\b"
                         options:NSRegularExpressionCaseInsensitive
                           error:&error];

// Replace the matches
NSString *modifiedString = 
[regex stringByReplacingMatchesInString:string
                                options:0
                                  range:NSMakeRange(0, [string length])
                           withTemplate:@"HALF USED TO BE HERE"]; 
```

# jquery - 更改 iframe 父级中的 div 文本？

> ID：14695495
> 
> 赞同：0
> 
> 时间：2013-02-04T20:57:30.780
> 
> 标签：jquery

我正在尝试更改父 iframe 中以下 div 中的文本。

（我在 iframe 中运行代码）

```
<div class="hello1">I want to change this</div> 
```

我怎么能做到这一点？

我试过了：

```
$("body #hello1", top.document).text("HELLO"); 
```

但我得到这个错误：

> 不安全的 JavaScript 尝试访问框架

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:59:39.473

div 有一个 hello1 类，您编写的代码试图访问 id hello1。改成这个——

```
$(".hello1", top.document).text("HELLO"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T03:58:12.923

当您需要在 iframe 中触发 click 事件并且用户已测试提交按钮时需要更改父框架边框文本时，我还使用了以下解决方案：

```
<script>
$("button").click(function(){
    if ($('.email').val() !== 'Enter Your Best Email'){
        $('.x_out', top.document).text('<< Back to the main page');
        }
});
</script> 
```

测试提交按钮一次后，会提示用户“！请填写此字段”的工具提示提示。通过 HTML5 onclick="validate();"

在第二次测试提交按钮时，包围 iframe 的边框在关闭链接中具有文本更改以引导它们返回主页面（即关闭链接关闭 iframe 并单击 iframe 中的按钮会更改父项中的此文本框架）。

# c# - 是否可以在 Windows 窗体中使用相机模式？

> ID：14695496
> 
> 赞同：-2
> 
> 时间：2013-02-04T20:57:33.010
> 
> 标签：c#, forms, camera, rotation, move

> **可能重复：**
> [C# 中的网络摄像头使用](https://stackoverflow.com/questions/233455/webcam-usage-in-c-sharp)

以及是否可以使用 C# 使用 Windows 窗体创建相机。

它在形式上很重要，因为它适用于我的学校项目。

如果没有类似的东西，是否有可能创造出这样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:09:38.513

AForge 是一个非常易于使用的库，可以轻松使用 WinForms 中的网络摄像头。去年我设计了一个用医用平板电脑拍照的小应用程序，整个可执行文件的重量不到 1Mb，其中大部分是 AForge 库。

[http://www.aforgenet.com/](http://www.aforgenet.com/)

检查它附带的示例应用程序，其中有一个包含您需要的所有代码的预制程序。它也是一个很酷的库，可以单独使用。

# php - 使用占位符属性修改文本框以使某些文本在单击时消失

> ID：14695499
> 
> 赞同：0
> 
> 时间：2013-02-04T20:57:56.077
> 
> 标签：php, javascript, html, placeholder

我正在尝试修改我网页上的文本框，以便在用户单击文本框输入信息后，其中写入一些文本就会消失。我试过使用占位符属性，但没有运气。然后我尝试添加这个：（[https://github.com/jamesallardice/Placeholders.js](https://github.com/jamesallardice/Placeholders.js)）以使占位符工作，它再次不起作用（文本框保持空白）。

我是编程初学者，使用 Internet Explorer 8。

这是代码：

```
<td colspan="3">    

    <textarea style="background: #F6E3CE; overflow:auto;" rows="3" cols="70" name="" id="" placeholder="Please enter your name here" onchange="commentsChanged(this,<?php echo $variable;?>);"><?php echo str_replace('\r\n', "\n", rtrim($variable2[0][TitleTitle]));?></textarea>

</td> 
```

如果缺少任何信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:01:40.980

使用 jQuery 你可以做到这一点：（我没有测试，但这并不远）

```
<script type="text/javascript">
    $("input#text").focus(function(){
        if( $(this).val() == "default message" )
        {
            $(this).val("");
        }
    }).blur(function(){
        if( $(this).val() == "" )
        {
            $(this).val("default message");
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:09:48.860

或者没有 jQuery：

HTML 代码

```
<textarea onFocus="placeholder(this, ´focus´)" onBlur="placeholder(this, ´blur´)">Default value</textarea> 
```

JavaScript 代码

```
<script>

function placeholder(el, w) {

    if (el.value == "Default value" && w == "focus") el.value = "";
    if (el.value == "" && w == "blur") el.value = "Default value";

}

</script> 
```

# sql-server - ConnectionString（|DataDirectory| 和 LocalDB）上的基础提供程序失败

> ID：14695501
> 
> 赞同：2
> 
> 时间：2013-02-04T20:58:01.323
> 
> 标签：sql-server, entity-framework-4, connection-string, localdb

我得到了例外

> 基础提供程序在 ConnectionString 上失败。

除了内部异常

> 键“attachdbfilename”的值无效

在我尝试部署和调试我的应用程序时，在 Windows 7 家庭高级虚拟机上。

但是，在我的开发机器上，应用程序刚刚启动而没有问题。

连接字符串是：

```
<add name="AssetsLocalDBEntities" connectionString="metadata=res://*/AssetsLocalDB.csdl|res://*/AssetsLocalDB.ssdl|res://*/AssetsLocalDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(localdb)\v11.0;attachdbfilename=|DataDirectory|\AssetDatabase.mdf;initial catalog=AssetDBSource;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

Steve Wellens 在这个主题中提到了连接字符串包含垃圾： [The underscient provider failed on ConnectionString](https://stackoverflow.com/questions/5280174/the-underlying-provider-failed-on-connectionstring)

然而，正如 Maxim Gueivandov 所回答的，这应该是有效的连接字符串，因为它是由 EntityFramework 的 edmx 设计器直接生成的。至少，我相信它是有效的，因为它确实在开发机器上工作。

同样在另一个主题（[实体框架 - ConnectionString 上的基础提供程序失败](https://stackoverflow.com/questions/2158853/entity-framework-the-underlying-provider-failed-)）中，接受的答案是删除“ 并用 \" 替换它们，因为该字符串是 c# 代码中的文字，但我仍然在 xml 中有我的连接字符串，所以不能简单地替换 "。on-connectionstring

虚拟机上安装的 .NET 版本是 4.0.30319，MsSQL Server Express LocalDB 是 11.0.2318.0，所以我相信它们都是最新的。

*编辑*：如果我删除“|DataDirectory|” 从连接字符串中，我在开发机器上收到以下错误：

> 无法将文件“AssetDatabase.mdf”附加为数据库“AssetDBSource”。

所以我也删除了“初始目录= AssetDBSource”，我得到了

> 尝试为文件 AssetDatabase.mdf 附加自动命名的数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

我可以想象这是因为它不知道去哪里看？所以，我为它提供了完整路径（C:..\AssetDatabase.mdf），它可以工作。

所以剩下的问题是：我如何获得使用 LocalDB 的相对路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:27:54.260

我相信目标机器没有安装 .NET 4 的更新 4.0.2 或更高版本。.NET 4 版本号可能会令人困惑，因为`4.0.30319`所有 .NET 4 版本似乎都在使用该版本。实际上，这并不意味着您的机器有更新 4.0.2。

您能否在目标机器上安装[.NET 4 Update 4.0.3](http://support.microsoft.com/kb/2600211)（截至今天的最新 .NET 4 更新）并查看问题是否消失？

或者只是验证是否安装了更新 - 只需在 .NET 4 中构建一个简单的应用程序，该应用程序用于`SqlClient`使用连接字符串连接到 LocalDB，并记录错误信息以防您仍然遇到任何错误。EF 错误消息相当通用，我不知道如何从底层 SqlClient 提供程序获取详细错误。

或者，您也可以将其迁移到 .NET 4.5。

# css - 如何为 Bootstrap 制作响应式（行流体）Mixin

> ID：14695502
> 
> 赞同：3
> 
> 时间：2013-02-04T20:58:09.117
> 
> 标签：css, twitter-bootstrap, less, mixins

我可以用

```
 <div class="row">
      <div class="span10">...</div>
      <div class="span2">...</div>
    </div> 
```

有了这个，使它更具语义

```
<div class="article">
  <div class="main-section">...</div>
  <div class="aside">...</div>
</div>

<!-- Less stylesheet -->
.article {
  .makeRow(); 
  .main-section {
    .makeColumn(10);
  }
  .aside {
    .makeColumn(2);
  }
} 
```

我怎么能用流体网格做到这一点：

```
 <div class="row-fluid">
      <div class="span10">...</div>
      <div class="span2">...</div>
    </div>

<!-- Less stylesheet -->
.article {
  ???
  .main-section {
    .makeColumn(10);
  }
  .aside {
    .makeColumn(2);
  }
} 
```

我试过了：

```
.article { #grid > .fluid(@fluidGridColumnWidth768, @fluidGridGutterWidth768);} 
```

以及一些[相关的](https://stackoverflow.com/questions/9906571/semantic-grid-with-bootstrap-less-mixins-how) [stackoverflow帖子](https://stackoverflow.com/questions/9090238/tweaking-bootstrap-2-0-for-semantic-markup)的一些变化，但它没有得到响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T16:31:20.550

这对我有用..张贴以防万一它帮助其他人。

**用于语义流体网格的 Mixin：**

```
.makeFluidRow(){
    width: 100%;
    .clearfix();
}

.makeFluidCol(@span:1,@offset:0){
    float: left;
    #grid > .fluid .span(@span);
    #grid > .fluid .offset(@offset);
    &:first-child {
        margin-left: 0;
        .offsetFirstChild(@offset);
    }
} 
```

**像使用非流体 mixins 一样使用它们：**

```
.article {
    .makeFluidRow();
    .main-section {
        .makeFluidCol(10); //Spans 10 cols
    }
    .aside {
        .makeFluidCol(1,1); //offset by one, spans 1
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:37:23.457

好的，我想我明白了。我正在更新问题以使用流畅的布局添加偏移量，因为这是我遇到最大麻烦的地方。

```
<div class="article">
  <div class="main-section">...</div>
  <div class="aside">...</div>
</div>

<!-- Less stylesheet -->
.article {

  .main-section {
     #grid > .fluid > .offset(2);
     #grid > .fluid > .span(8);
  }
  .aside {
    #grid > .fluid > .span(2);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T17:32:45.653

我发现您的问题正在寻找一种将 .makeColumn() 用于响应式网格（1200px、768px 等）的方法。Bootstrap 2 中包含的 .makeColumn() mixin 仅占 940px 网格。

为了解决这个问题，我只是在一个 LESS 文件中扩展了 .makeColumn() mixin，该文件在 Boostrap 文件之后加载。

```
// Improve .makeColumn to work with 1200px responsive grid
.makeColumn(@columns: 1, @offset: 0) {
  @media (min-width: 1200px) {
    margin-left: (@gridColumnWidth1200 * @offset) + (@gridGutterWidth1200 * (@offset - 1)) + (@gridGutterWidth1200 * 2);
    width: (@gridColumnWidth1200 * @columns) + (@gridGutterWidth1200 * (@columns - 1));
  }
} 
```

# asp.net - ASP.net 安全 cookie 的安全性如何

> ID：14695503
> 
> 赞同：4
> 
> 时间：2013-02-04T20:58:09.760
> 
> 标签：asp.net, security, cookies

我的理解是 ASP 生成一个 cookie 来验证会话。但是，如果该 cookie 通过非 https 通道来回发送，我不能简单地通过欺骗 cookie 来欺骗它吗？cookie 可以锁定到特定的 IP 或其他机器指纹吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:34:13.473

ASP.NET 中的会话没有经过身份验证 - 身份验证是完全独立的。通过获取会话 cookie 并重新创建它，是的，您可以劫持会话，如果您解除身份验证 cookie，那么您可以作为用户进行身份验证（这就是默认情况下身份验证 cookie 过期的原因） - 请参阅[http://msdn.microsoft .com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

安全说明非常清楚；

> SessionID 值以明文形式发送，无论是作为 cookie 还是作为 URL 的一部分。恶意用户可以通过获取 SessionID 值并将其包含在对服务器的请求中来访问另一个用户的会话。如果您在会话状态中存储敏感信息，建议您使用 SSL 加密浏览器和服务器之间包含 SessionID 值的任何通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:45:21.370

在我的上一份工作中，我们通过在数据库中跟踪用户的会话 ID（我们将 guid 作为查询字符串附加到 URL，还有其他方法）来解决这个问题，我们还将在其中存储发出请求的 IP 地址。对于所有后续请求（具有会话 ID 的任何请求，获取任何敏感信息的要求），我们只需检查会话 ID 和发出请求的 ip 与我们验证和设置会话时存储的值。Request.UserHostAddress 有点难以欺骗。有一些开销，但它比 cookie 更安全。

# php - 写这些支票的正确方法？

> ID：14695507
> 
> 赞同：0
> 
> 时间：2013-02-04T20:58:28.563
> 
> 标签：php, coding-style

写这些支票的正确方法是什么。我有一个数组，一些时间值未设置或为空。现在那个代码有点难以阅读，我该怎么做才能让它看起来更清晰和可信。或者我只是要努力解决这个问题。有什么建议么？

```
<?php 

private static function filter_yt_data($yt_api_response = null)
    {
        $data     =    array(); 
        $api      =    json_decode($yt_api_response);
        $api      =    $api->data->items[0];

        $data = array(
                    'id'            =>   $api->id,
                    'author'        =>   e($api->uploader),
                    'label'         =>   e($api->category),
                    'title'         =>   e($api->title),
                    'description'   =>   e($api->description),
                    'duration'      =>   $api->duration,
                    'view_count'    =>   $api->viewCount,
                    'access'        =>   $api->accessControl->embed,
                    'favorite_count'=>   $api->favoriteCount
                    );

        if($api->accessControl->comment == 'allowed')
        {
           $data['comment_count']   =   $api->commentCount;
        }
        else
        {
            $data['comment_count']  =   0;
        }

        if($api->ratingCount)
        {
            $data['rating_count']  =   $api->ratingCount;
        }
        else
        {
            $data['rating_count']  =   0;
        }

        if($api->accessControl->rate == 'allowed')
        {
            $data['like_count'] =   $api->likeCount;
        }
        else
        {
            $data['like_count'] =   0;
        }

        if($api->thumbnail->hqDefault)
        {
            $data['thumbnail'] =   $api->thumbnail->hqDefault;
        }
        elseif($api->thumbnail->sqDefault)
        {
            $data['thumbnail'] =   $api->thumbnail->sqDefault;

        }else
        {
            $data['thumbnail'] = null;
        }

        return $data;
    }

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:01:51.400

```
if($api->accessControl->comment == 'allowed')
        {
           $data['comment_count']   =   $api->commentCount;
        }
        else
        {
            $data['comment_count']  =   0;
        } 
```

也可以是：

```
$data['comment_count'] = $api->accessControl->comment == 'allowed' ? $api->commentCount : 0; 
```

这称为**三元运算符**

句法：

```
$variable = (condition) ? if condition true : else; 
```

这样，您可以替换所有 if-else 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:02:33.087

一种方法是初始化默认值，然后进行检查：

```
 $data['comment_count']  =   0;
    if($api->accessControl->comment == 'allowed'){
       $data['comment_count']   =   $api->commentCount;
    }
    $data['rating_count']  =   0;
    if($api->ratingCount){
        $data['rating_count']  =   $api->ratingCount;
    }
    $data['like_count'] =   0;
    if($api->accessControl->rate == 'allowed'){
        $data['like_count'] =   $api->likeCount;
    }
    $data['thumbnail'] = null;
    if($api->thumbnail->hqDefault){
        $data['thumbnail'] =   $api->thumbnail->hqDefault;
    }elseif($api->thumbnail->sqDefault){
        $data['thumbnail'] =   $api->thumbnail->sqDefault;
    } 
```

这些也可以在原始数组中初始化。

# android - Dagger 在模块上找不到可注入成员

> ID：14695515
> 
> 赞同：10
> 
> 时间：2013-02-04T20:58:45.613
> 
> 标签：android, dependency-injection, dagger

我在 Android 项目中使用[Dagger](http://square.github.com/dagger/)进行依赖注入，并且可以很好地编译和构建应用程序。对象图似乎是正确且有效的，但是当我将 dagger-compiler 添加为依赖项以在编译时获取错误时，它会报告一些奇怪的错误：

```
[ERROR] error: No binding for com.squareup.tape.TaskQueue<com.atami \
    .mgodroid.io.NodeIndexTask> required by com.atami \
    .mgodroid.ui.NodeIndexListFragment for com.atami.mgodroid \
    .modules.OttoModule
[ERROR] error: No binding for com.squareup.tape.TaskQueue<com.atami \
    .mgodroid.io.NodeTask> required by com.atami \
    .mgodroid.ui.NodeFragment for com.atami.mgodroid.modules.OttoModule
[ERROR] error: No injectable members on com.squareup.otto.Bus. Do you want 
     to add an injectable constructor? required by com.atami. \
     mgodroid.io.NodeIndexTaskService for 
     com.atami.mgodroid.modules.TaskQueueModule 
```

Otto 错误看起来像 Eric Burke 在他的[Android App Anatomy](http://www.infoq.com/presentations/Android-Design/)演示文稿中提到的关于没有`@Provides`注释的错误，但正如您在下面看到的那样。

我的 Otto 和 TaskQueue 模块如下：

```
@Module(
        entryPoints = {
                MGoBlogActivity.class,
                NodeIndexListFragment.class,
                NodeFragment.class,
                NodeActivity.class,
                NodeCommentFragment.class,
                NodeIndexTaskService.class,
                NodeTaskService.class
        }
)
public class OttoModule {

    @Provides
    @Singleton
    Bus provideBus() {
        return new AsyncBus();
    }

    /**
     * Otto EventBus that posts all events on the Android main thread
     */
    private class AsyncBus extends Bus {
        private final Handler mainThread = new Handler(Looper.getMainLooper());

        @Override
        public void post(final Object event) {
            mainThread.post(new Runnable() {
                @Override
                public void run() {
                    AsyncBus.super.post(event);
                }
            });
        }
    }
} 
```

...

```
@Module(
    entryPoints = {
        NodeIndexListFragment.class,
        NodeFragment.class,
        NodeIndexTaskService.class,
        NodeTaskService.class
    }
)
public class TaskQueueModule {

    private final Context appContext;

    public TaskQueueModule(Context appContext) {
        this.appContext = appContext;
    }

    public static class IOTaskInjector<T extends Task> 
        implements TaskInjector<T> {

        Context context;

        /**
         * Injects Dagger dependencies into Tasks added to TaskQueues
         *
         * @param context the application Context
         */
        public IOTaskInjector(Context context) {
            this.context = context;
        }

        @Override
        public void injectMembers(T task) {
            ((MGoBlogApplication) context.getApplicationContext())
                .objectGraph().inject(task);
        }
    }

    public static class ServiceStarter<T extends Task> 
        implements ObjectQueue.Listener<T> {

        Context context;
        Class<? extends Service> service;

        /**
         * Starts the provided service when a Task is added to the queue
         *
         * @param context the application Context
         * @param service the Service to start
         */
        public ServiceStarter(Context context, 
                              Class<? extends Service> service) {
            this.context = context;
            this.service = service;
        }

        @Override
        public void onAdd(ObjectQueue<T> queue, T entry) {
            context.startService(new Intent(context, service));

        }

        @Override
        public void onRemove(ObjectQueue<T> queue) {
        }
    }

    @Provides
    @Singleton
    TaskQueue<NodeIndexTask> provideNodeIndexTaskQueue() {
        ObjectQueue<NodeIndexTask> delegate = 
            new InMemoryObjectQueue<NodeIndexTask>();
        TaskQueue<NodeIndexTask> queue = new TaskQueue<NodeIndexTask>(
            delegate, new IOTaskInjector<NodeIndexTask>(appContext));
        queue.setListener(new ServiceStarter<NodeIndexTask>(
            appContext, NodeIndexTaskService.class));
        return queue;
    }

    @Provides
    @Singleton
    TaskQueue<NodeTask> provideNodeTaskQueue() {
        ObjectQueue<NodeTask> delegate = 
            new InMemoryObjectQueue<NodeTask>();
        TaskQueue<NodeTask> queue = new TaskQueue<NodeTask>(
            delegate, new IOTaskInjector<NodeTask>(appContext));
        queue.setListener(new ServiceStarter<NodeTask>(
            appContext, NodeTaskService.class));
        return queue;
    }
} 
```

...

```
/**
 * Module that includes all of the app's modules. Used by Dagger
 * for compile time validation of injections and modules.
 */
@Module(
        includes = {
                MGoBlogAPIModule.class,
                OttoModule.class,
                TaskQueueModule.class
        }
)
public class MGoBlogAppModule {
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-11T20:41:26.010

Dagger 的完整图形分析来自一个完整的模块。即@Module(complete = true)，这是默认的。因为它是默认设置，所以默认情况下，dagger 将假定所有绑定都可从该模块或它明确包含的那些模块中获得。

在这种情况下，您已经给出了两个您声称是完整的模块，但是 Dagger 无法在编译时将它们联系在一起而无需额外的信号。简而言之，在 OttoModule 不知道 TaskQueueModule 的情况下，编译器将尝试分析 OttoModule 的完整性，并失败，因为它现在不知道 TaskQueueModule。

修改 OttoModule 的注解如下：

```
@Module(
  includes = TaskQueueModule.class,
  entryPoints = {
    MGoBlogActivity.class,
    NodeFragment.class,
    NodeActivity.class,
    NodeCommentFragment.class,
    NodeIndexTaskService.class,
    NodeTaskService.class
  }
) 
```

然后 Dagger 会知道，要使 OttoModule 完整，它会将另一个模块作为其完整定义的一部分。

***注意：*** dagger-compiler 无法检测到 TaskQueueModule 存在于类路径中，并且只是“知道”开发人员打算在没有附加信号的情况下将其与 OttoModule 一起使用。例如，您可能有几个定义任务队列的模块，它会选择哪一个？声明必须是明确的。

# android - Android 从服务更新活动 UI

> ID：14695537
> 
> 赞同：115
> 
> 时间：2013-02-04T21:00:00.237
> 
> 标签：android

我有一项服务一直在检查新任务。如果有新任务，我想刷新活动 UI 以显示该信息。我确实找到了[https://github.com/commonsguy/cw-andtutorials/tree/master/18-LocalService/](https://github.com/commonsguy/cw-andtutorials/tree/master/18-LocalService/)这个例子。这是一个好方法吗？还有其他例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2013-02-04T21:25:57.200

请参阅下面的原始答案-该模式运行良好，但最近我开始使用不同的方法进行服务/活动通信：

*   使用[绑定服务](https://developer.android.com/guide/components/bound-services.html)，使 Activity 能够获得对服务的直接引用，从而允许直接调用它，而不是使用 Intents。
*   使用 RxJava 执行异步操作。

*   如果 Service 需要在没有 Activity 运行的情况下继续后台操作，也可以从 Application 类启动该服务，这样它就不会在未绑定时停止。

与 startService()/LocalBroadcast 技术相比，我在这种方法中发现的优势是

*   不需要数据对象来实现 Parcelable - 这对我来说尤其重要，因为我现在在 Android 和 iOS 之间共享代码（使用 RoboVM）
*   RxJava 提供固定的（和跨平台的）调度，以及顺序异步操作的简单组合。
*   这应该比使用 LocalBroadcast 更有效，尽管使用 RxJava 的开销可能超过它。

一些示例代码。首先是服务：

```
public class AndroidBmService extends Service implements BmService {

    private static final int PRESSURE_RATE = 500000;   // microseconds between pressure updates
    private SensorManager sensorManager;
    private SensorEventListener pressureListener;
    private ObservableEmitter<Float> pressureObserver;
    private Observable<Float> pressureObservable;

    public class LocalBinder extends Binder {
        public AndroidBmService getService() {
            return AndroidBmService.this;
        }
    }

    private IBinder binder = new LocalBinder();

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        logMsg("Service bound");
        return binder;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_NOT_STICKY;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        Sensor pressureSensor = sensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE);
        if(pressureSensor != null)
            sensorManager.registerListener(pressureListener = new SensorEventListener() {
                @Override
                public void onSensorChanged(SensorEvent event) {
                    if(pressureObserver != null) {
                        float lastPressure = event.values[0];
                        float lastPressureAltitude = (float)((1 - Math.pow(lastPressure / 1013.25, 0.190284)) * 145366.45);
                        pressureObserver.onNext(lastPressureAltitude);
                    }
                }

                @Override
                public void onAccuracyChanged(Sensor sensor, int accuracy) {

                }
            }, pressureSensor, PRESSURE_RATE);
    }

    @Override
    public Observable<Float> observePressure() {
        if(pressureObservable == null) {
            pressureObservable = Observable.create(emitter -> pressureObserver = emitter);
            pressureObservable = pressureObservable.share();
        }
         return pressureObservable;
    }

    @Override
    public void onDestroy() {
        if(pressureListener != null)
            sensorManager.unregisterListener(pressureListener);
    }
} 
```

还有一个绑定到服务并接收压力高度更新的 Activity：

```
public class TestActivity extends AppCompatActivity {

    private ContentTestBinding binding;
    private ServiceConnection serviceConnection;
    private AndroidBmService service;
    private Disposable disposable;

    @Override
    protected void onDestroy() {
        if(disposable != null)
            disposable.dispose();
        unbindService(serviceConnection);
        super.onDestroy();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        binding = DataBindingUtil.setContentView(this, R.layout.content_test);
        serviceConnection = new ServiceConnection() {
            @Override
            public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
                logMsg("BlueMAX service bound");
                service = ((AndroidBmService.LocalBinder)iBinder).getService();
                disposable = service.observePressure()
                    .observeOn(AndroidSchedulers.mainThread())
                    .subscribe(altitude ->
                        binding.altitude.setText(
                            String.format(Locale.US,
                                "Pressure Altitude %d feet",
                                altitude.intValue())));
            }

            @Override
            public void onServiceDisconnected(ComponentName componentName) {
                logMsg("Service disconnected");
            }
        };
        bindService(new Intent(
            this, AndroidBmService.class),
            serviceConnection, BIND_AUTO_CREATE);
    }
} 
```

此活动的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<layout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context="com.controlj.mfgtest.TestActivity">

        <TextView
            tools:text="Pressure"
            android:id="@+id/altitude"
            android:gravity="center_horizontal"
            android:layout_gravity="center_vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>
</layout> 
```

如果服务需要在没有绑定 Activity 的情况下在后台运行，它可以从 Application 类启动，也可以`OnCreate()`使用[`Context#startService()`](https://developer.android.com/reference/android/content/Context.html#startService(android.content.Intent)).

* * *

**我的原始答案（从 2013 年开始）：**

**在您的服务中：（**在下面的示例中使用 COPA 作为服务）。

使用 LocalBroadCastManager。在您的服务的 onCreate 中，设置广播器：

```
broadcaster = LocalBroadcastManager.getInstance(this); 
```

当您想通知 UI 某些事情时：

```
static final public String COPA_RESULT = "com.controlj.copame.backend.COPAService.REQUEST_PROCESSED";

static final public String COPA_MESSAGE = "com.controlj.copame.backend.COPAService.COPA_MSG";

public void sendResult(String message) {
    Intent intent = new Intent(COPA_RESULT);
    if(message != null)
        intent.putExtra(COPA_MESSAGE, message);
    broadcaster.sendBroadcast(intent);
} 
```

**在您的活动中：**

在 onCreate 上创建一个监听器：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setContentView(R.layout.copa);
    receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String s = intent.getStringExtra(COPAService.COPA_MESSAGE);
            // do something here.
        }
    };
} 
```

并在 onStart 中注册：

```
@Override
protected void onStart() {
    super.onStart();
    LocalBroadcastManager.getInstance(this).registerReceiver((receiver), 
        new IntentFilter(COPAService.COPA_RESULT)
    );
}

@Override
protected void onStop() {
    LocalBroadcastManager.getInstance(this).unregisterReceiver(receiver);
    super.onStop();
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-08-15T13:23:12.123

对我来说，最简单的解决方案是发送一个广播，在 oncreate 活动中我注册并定义了这样的广播（updateUIReciver 被定义为一个类实例）：

```
 IntentFilter filter = new IntentFilter();

 filter.addAction("com.hello.action"); 

 updateUIReciver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                //UI update here

            }
        };
 registerReceiver(updateUIReciver,filter); 
```

并从服务中发送这样的意图：

```
Intent local = new Intent();

local.setAction("com.hello.action");

this.sendBroadcast(local); 
```

不要忘记在销毁活动中取消注册恢复：

```
unregisterReceiver(updateUIReciver); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-04T21:05:19.120

我会使用[绑定服务](http://developer.android.com/guide/components/bound-services.html)来做到这一点，并通过在我的活动中实现一个监听器来与它通信。因此，如果您的应用程序实现了 myServiceListener，您可以在绑定后将其注册为服务中的侦听器，从绑定的服务中调用 listener.onUpdateUI 并在其中更新您的 UI！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-04T21:03:02.570

我建议查看[Otto](https://github.com/square/otto)，这是一个专为 Android 量身定制的 EventBus。您的 Activity/UI 可以从 Service 监听 Bus 上发布的事件，并将自身与后端分离。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-06T23:37:33.680

Clyde 的解决方案有效，但它是一个广播，我很确定它比直接调用方法效率低。我可能弄错了，但我认为广播更多地用于应用程序间的通信。

我假设您已经知道如何将服务与 Activity 绑定。我做了一些类似于下面的代码来处理这种问题：

```
class MyService extends Service {
    MyFragment mMyFragment = null;
    MyFragment mMyOtherFragment = null;

    private void networkLoop() {
        ...

        //received new data for list.
        if(myFragment != null)
            myFragment.updateList();
        }

        ...

        //received new data for textView
        if(myFragment !=null)
            myFragment.updateText();

        ...

        //received new data for textView
        if(myOtherFragment !=null)
            myOtherFragment.updateSomething();

        ...
    }
}

class MyFragment extends Fragment {

    public void onResume() {
        super.onResume()
        //Assuming your activity bound to your service
        getActivity().mMyService.mMyFragment=this;
    }

    public void onPause() {
        super.onPause()
        //Assuming your activity bound to your service
        getActivity().mMyService.mMyFragment=null;
    }

    public void updateList() {
        runOnUiThread(new Runnable() {
            public void run() {
                //Update the list.
            }
        });
    }

    public void updateText() {
       //as above
    }
}

class MyOtherFragment extends Fragment {
             public void onResume() {
        super.onResume()
        //Assuming your activity bound to your service
        getActivity().mMyService.mMyOtherFragment=this;
    }

    public void onPause() {
        super.onPause()
        //Assuming your activity bound to your service
        getActivity().mMyService.mMyOtherFragment=null;
    }

    public void updateSomething() {//etc... }
} 
```

为了线程安全，我省略了一些位，这是必不可少的。在检查和使用或更改服务上的片段引用时，请确保使用锁或类似的东西。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-05-05T07:17:04.213

```
Callback from service to activity to update UI.
ResultReceiver receiver = new ResultReceiver(new Handler()) {
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        //process results or update UI
    }
}

Intent instructionServiceIntent = new Intent(context, InstructionService.class);
instructionServiceIntent.putExtra("receiver", receiver);
context.startService(instructionServiceIntent); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-05T23:18:29.100

我的解决方案可能不是最干净的，但它应该没有问题。逻辑只是创建一个静态变量来存储您的数据`Service`并在您的`Activity`.

假设您有一个`String`您`Service`想要将其发送到`TextView`您的`Activity`. 它应该看起来像这样

您的服务：

```
public class TestService extends Service {
    public static String myString = "";
    // Do some stuff with myString 
```

您的活动：

```
public class TestActivity extends Activity {
    TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        tv = new TextView(this);
        setContentView(tv);
        update();
        Thread t = new Thread() {
            @Override
            public void run() {
                try {
                    while (!isInterrupted()) {
                        Thread.sleep(1000);
                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                update();
                            }
                        });
                    }
                } catch (InterruptedException ignored) {}
            }
        };
        t.start();
        startService(new Intent(this, TestService.class));
    }
    private void update() {
        // update your interface here
        tv.setText(TestService.myString);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-20T19:31:28.973

你可以使用 android Jetpack 的[LiveData](https://developer.android.com/topic/libraries/architecture/livedata)

根据文档：

> 您可以`LiveData`使用单例模式扩展对象以包装系统服务，以便它们可以在您的应用程序中共享。LiveData 对象连接到系统服务一次，然后任何需要资源的观察者都可以观看 LiveData 对象。有关详细信息，请参阅[扩展 LiveData](https://developer.android.com/topic/libraries/architecture/livedata?hl=en#extend_livedata)。

下面是我为 Service 和 Activity 以及 Service 和 Fragment 之间的通信所做的。

在这个例子中，我有：

*   一个类`SyncLogLiveData`扩展`LiveData`，包含一个`SpannableStringBuilder`
*   一项服务`SyncService`
*   一个片段`SyncFragment`

Fragment “观察” LiveData（即 SyncLogLiveData）并在 LiveData 更改时执行操作。
LiveData 由服务更新。
我也可以以相同的方式从 Fragment 更新 LiveData，但不要在此处显示。

**班级`SyncLogLiveData`**

```
public class SyncLogLiveData extends LiveData<SpannableStringBuilder> {
    private static SyncLogLiveData sInstance;
    private final static SpannableStringBuilder log = new SpannableStringBuilder("");

    @MainThread
    public static SyncLogLiveData get() {
        if (sInstance == null) {
            sInstance = new SyncLogLiveData();
        }
        return sInstance;
    }

    private SyncLogLiveData() {
    }

    public void appendLog(String text) {
        log.append(text);
        postValue(log);
    }

    public void appendLog(Spanned text) {
        log.append(text);
        postValue(log);
    }
} 
```

**在班上`SyncService`**

这行代码将更新 LiveData 的内容

```
SyncLogLiveData.get().appendLog(message); 
```

您也可以直接使用`setValue(...)`或`postValue(...)`方法`LiveData`

```
SyncLogLiveData.get().setValue(message); 
```

**类 SyncFragment**

```
public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {

    //...

    // Create the observer which updates the UI.
    final Observer<SpannableStringBuilder> ETAObserver = new Observer<SpannableStringBuilder>() {
        @Override
        public void onChanged(@Nullable final SpannableStringBuilder spannableLog) {
            // Update the UI, in this case, a TextView.
            getActivity().runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    textViewLog.setText(spannableLog);
                }
            });
        }
    };
    // Observe the LiveData, passing in this activity/fragment as the LifecycleOwner and the observer.
    SyncLogLiveData.get().observe(getViewLifecycleOwner(), ETAObserver);

    //...
} 
```

在活动中，它的工作方式相同，但是对于`.observe(...)`，您可以改用它

```
SyncLogLiveData.get().observe(this, ETAObserver); 
```

您也可以随时在代码中以这种方式获取 LiveData 的当前值。

```
SyncLogLiveData.get().getValue(); 
```

希望这会对某人有所帮助。在这个答案中还没有提到 LiveData 。

# python - 用鼻子命名TestSuite

> ID：14695540
> 
> 赞同：1
> 
> 时间：2013-02-04T21:00:08.053
> 
> 标签：python, nose

我正在使用鼻子以编程方式运行测试并生成 xunit xml。我在 xml 中注意到，testsuite 的 name 属性始终是nosetests。我想将此值更改为包含我的测试的目录名称，但我似乎找不到任何有关如何执行此操作的文档。

所以在下面的片段中，我想`name="nosetests"`阅读`name="sample_test"`

```
....
<testsuite name="nosetests" tests="3" errors="1" failures="1" skip="0">
<testcase classname="app.sample_test.passing" ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-09T20:25:04.170

要更改测试套件名称，您可以使用输入参数

```
--xunit-testsuite-name=YOURTESTSUITENAME 
```

[http://nose.readthedocs.io/en/latest/plugins/xunit.html#cmdoption-xunit-testsuite-name](http://nose.readthedocs.io/en/latest/plugins/xunit.html#cmdoption-xunit-testsuite-name)

# objective-c - 如何在目标C中编写像system.log这样的日志文件？

> ID：14695543
> 
> 赞同：2
> 
> 时间：2013-02-04T21:00:17.110
> 
> 标签：objective-c, cocoa

我希望我的 Mac Os X 沙盒应用程序为其执行的每个操作编写一个日志文件，我认为正确的路径是 /Users/MyName/Library/Containers/com.me_developer.myAppID/Data/Library/Logs/。我知道如何在文件中写入附加文本，但我正在寻找的是以类似于系统日志文件的方式归档旧日志文件在 /var/log 中写入，一旦它们达到一定大小，它们被重命名并压缩（bz2）。我想知道 Mac Os X 或其较低级别的 UNIX 是否为此提供了内置解决方案，因此我不必手动编写所有代码。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:19:41.017

看看[asl](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/asl.3.html)，它是用于与 Mac OS X（和 iOS）中的系统日志工具交互的 API。它有点低级，因为它是一个 C API，但它应该做你想做的一切，并且以 Apple 认可的、与沙盒兼容的方式来做。

有许多用于 ASL 的第三方开源 Objective-C 包装器。以下是一些示例（我自己没有使用过这些示例）：

[https://github.com/AlanQuatermain/aqtoolkit/tree/master/ASLogger](https://github.com/AlanQuatermain/aqtoolkit/tree/master/ASLogger)
[https://github.com/billgarrison/SOLogger](https://github.com/billgarrison/SOLogger) [https://github.com/nloko/NLOSyslog](https://github.com/nloko/NLOSyslog)

这里有几篇关于使用 ASL 的文章/教程：

[http://boredzo.org/blog/archives/2008-01-20/why-asl](http://boredzo.org/blog/archives/2008-01-20/why-asl)
[http://www.cocoanetics.com/2011/03/accessing-the-ios-system-log/](http://www.cocoanetics.com/2011/03/accessing-the-ios-system-log/)

最后，一定要看看[Cocoa Lumberjack](https://github.com/robbiehanson/CocoaLumberjack)，这是一个非常流行的 Cocoa 日志库。

# modx - MODx Revo。如何在主页上显示博客文章的第一张图片？

> ID：14695545
> 
> 赞同：0
> 
> 时间：2013-02-04T21:00:30.060
> 
> 标签：modx, modx-revolution

我使用 MODx 革命。在主页上，我们展示了一些内容摘录（introtext）。

```
<h2 class="title"><a href="[[~[[+id]]]]">[[+pagetitle]]</a></h2>
<p>[[+introtext]]</p>
<p class="postmeta">
<a href="[[~[[+id]]]]" class="readmore">read more</a> 
| <span class="date">[[+publishedon:strtotime:date=`%m/%d/%y`]]</span>
</p> 
```

[这是我用过的指南。](http://rtfm.modx.com/display/revolution20/Creating+a+Blog+in+MODx+Revolution)

如何在首页显示为文章的第一张图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:10:24.300

您需要创建一个模板变量，例如“Image”类型的“BlogImage”，并将该电视分配给您的博客文章模板。然后将您的图片上传到每篇博客文章中的该字段，然后您可以通过以下方式访问它：

img src="[[+tv.BlogImage]]"

这将从电视输出您的图像。

要在不同的模板上输出此图像，例如您的主页模板，您需要执行 GetResources 或 GetResourceField 调用，这需要通过 Revo 包管理器安装包。

希望有帮助。

# xpath - PMD XPath 规则，用于查找使用提前不知道名称的类字段的方法

> ID：14695546
> 
> 赞同：2
> 
> 时间：2013-02-04T21:00:30.713
> 
> 标签：xpath, pmd

我需要查找在其 equals() 方法中使用 JPA ID 属性的 JPA 持久类。例如，以下类将触发 PMD 规则违规：

```
@Entity
public class Foo
{
   @Id
   private long id;

   public boolean equals(Object o)
   {
      if (o.getClass().equals(Foo.class)) {
         Foo other = (Foo) o;
         return o.id == id;
      }
      return false;
   }
} 
```

我知道如何让这个查询的各个部分工作，但不知道如何把它放在一起。因此，例如，我知道如何找到 JPA 持久类（假设使用 JPA 注释）：

```
//ClassOrInterfaceDeclaration/../Annotation/MarkerAnnotation/Name[@Image='Entity'] 
```

我知道如何找到使用 JPA ID 注释注释的字段声明：

```
//FieldDeclaration[../Annotation/MarkerAnnotation/Name[@Image='Id']] 
```

同样，我可以在 equals() 方法中找到一个引用名为“id”的字段的表达式：

```
//MethodDeclaration[
  ./MethodDeclarator[@Image='equals'] and
  ./MethodDeclarator/FormalParameters[1]/FormalParameter/Type/ReferenceType/ClassOrInterfaceType[@Image='Object']
]
/Block//PrimaryExpression/PrimaryPrefix/Name[@Image='id'] 
```

我遇到的麻烦是使用表达式查找标有 @Id 注释的字段的名称，并在谓词中使用它来查找使用该字段的 equals() 方法中的行。

这是我对查询的最佳猜测，但它不返回任何节点：

```
//MethodDeclaration[
  ./MethodDeclarator[@Image='equals'] 
  and
  //MethodDeclarator[count(./FormalParameters)=1]
  and
  ./MethodDeclarator/FormalParameters[1]/FormalParameter/Type/ReferenceType/ClassOrInterfaceType[@Image='Object']
]
/Block//PrimaryExpression/Name[
  @Image=ancestor::ClassOrInterfaceDeclaration//FieldDeclaration[
  ../Annotation/MarkerAnnotation/Name/@Image='Id']/VariableDeclarator/VariableDeclaratorId/@Image
] 
```

前 7 行返回所有名称为“equals”的 MethodDeclarations，并采用单个“Object”参数。

下一部分选择该方法内的任何 PrimaryExpressions，其 Name 等于使用“Id”注释注释的字段的名称。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:42:53.327

好的，我已经想通了......这是我想出的解决方案：

```
//MethodDeclaration[
  MethodDeclarator[
    count(FormalParameters/FormalParameter)=1 and
    @Image='equals' and
    FormalParameters/FormalParameter[1]/Type/ReferenceType/ClassOrInterfaceType[@Image='Object']
  ]
]
/Block//PrimaryExpression[
  PrimaryPrefix/@Image=
    ancestor::ClassOrInterfaceDeclaration//FieldDeclaration[
      ../Annotation/MarkerAnnotation/Name/@Image='Id'
    ] /VariableDeclarator/VariableDeclaratorId/@Image
  or
  PrimarySuffix/@Image=
    ancestor::ClassOrInterfaceDeclaration//FieldDeclaration[
      ../Annotation/MarkerAnnotation/Name/@Image='Id'
    ] /VariableDeclarator/VariableDeclaratorId/@Image
] 
```

它似乎工作。

# c# - 从另一个集合中过滤数据集

> ID：14695554
> 
> 赞同：0
> 
> 时间：2013-02-04T21:00:50.893
> 
> 标签：c#, linq, select, set

我一直在阅读有关 LINQ 查询的文档和教程，但似乎无法正确理解。我有一个类似于这个的模型，并且正在使用实体框架来持久化它：

```
public class Question
{
  public int Id {set;get;}
  public string Question {set;get;}
  public DateTime DateCreated {get;set;}
  public List<Answer> Answers {set; get;}
}

public class Answer
{
  public int Id {set; get;}
  public string UserAnswer {get;set;}
  public DateTime DateAnswered {get;set;}
  public User TheUserWhoAnswerd {get;set;}
}

public class User
{
  public int Id { get;set;}
  public string UserName {get;set;}
  public DateTime DateCreated {get;set;}
  public List<Question> Questions { get;set;}
}

The data context has something like this
public HashSet<Question> AllOfTheQuestionsDb {get;set;}
public HashSet<Answer> AllOfTheAnswersDb {get;set;}
public HashSet<User> AllOfTheUsersDb {get;set;} 
```

我的流程类似于堆栈溢出 --trivia 风格。

系统可以为用户分配问题（问题由系统即 admin 生成，最初不属于任何人）。之后，可以将相同的问题分配给多个不同的用户。然后每个用户都可以回答问题。

该问题包含一个给出的答案列表。

因此，例如，如果将问题 1 分配给用户 1 到 10，但只有用户 2 和 4 回答，则该问题在“答案列表”中将只有 2 个答案。

我的目标是能够对数据源进行一些基本的排序和选择。

例如：

1.  对于给定用户 - UserA -，返回 UserA**未**回答该问题的所有问题。

2.  对于系统中的所有问题，返回分配给该问题但该用户回答/未回答的所有用户

3.  为用户选择在给定日期之后被/未被回答的问题和答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:56:05.650

I haven't tested them, but I think it should give you what you want.

```
int UserA = 1;
// For a given user - UserA -, return all questions where UserA did not answer that question
// Look for questions where the count of UserA appearances is zero.
List<Question> NotAnsweredByUserA = AllOfTheQuestionsDb.Where(a => a.Answers.Count(b => b.TheUserWhoAnswerd.Id == UserA) == 0).ToList();

// For all questions in system, return all users that the question was assigned to but that user did/didn't answer
// Look for answers in questions where a User has been assigned, but no answer, and select that user
List<User> NotAnsweredButAssigned = AllOfTheQuestionsDb.SelectMany(a => a.Answers.Where(b => b.TheUserWhoAnswerd != null && string.IsNullOrWhiteSpace(b.UserAnswer)).Select(c => c.TheUserWhoAnswerd)).ToList();

// Selecting questions and answers for a user that were not answered after a given date
// Select the questions where the answer contains an answer date before today and answered by UserA
List<Question> NotAnsweredBeforeDate = AllOfTheQuestionsDb.Where(a=>a.Answers.Any(b=>b.DateAnswered < DateTime.Now && b.TheUserWhoAnswerd.Id == UserA)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:00:36.970

这应该让你接近或给你一个好的起点：

```
List<Question> QuestionsUnasweredByUser(User givenUser)
{
    return AllOfTheQuestionsDb
           .Where(q => q.Answers
                        .Any(a => AllOfTheAnswersDb
                                  .Where(na => na.TheUserWhoAnswerd.Id != givenUser.Id)
                                  .ToList().Contains(a)))
           .ToList();
}

List<User> UserAssignedQuestions(bool answered)
{
    return AllOfTheUsersDb
           .Where(u => u.Questions.Count > 0 && 
                       answered ? u.Questions.Any(q=> q.Answers.Count > 0) 
                                : u.Questions.Any(q=>q.Answers.Count == 0)).ToList();
}

List<Question> OverdueQuestions(User givenUser, DateTime dueDate, bool answered)
{
    return AllOfTheQuestionsDb
          .Where(q => (q.Answers.Count == 0 && !answered) || 
                       q.Answers.Any(a => a.TheUserWhoAnswerd.Id == givenUser.Id && 
                                          answered ? a.DateAnswered > dueDate  
                                              : a.DateAnswered <= dueDate)).ToList();
}

List<Answer> OverdueAnswers(User givenUser, DateTime dueDate, bool answered)
{
    return AllOfTheAnswersDb
          .Where(a => a.TheUserWhoAnswerd.Id == givenUser.Id && 
                      answered ? a.DateAnswered < dueDate 
                               : a.DateAnswered <= dueDate).ToList();
} 
```

# facebook - 2013 年 2 月警报“经过身份验证的推荐人将消失”

> ID：14695556
> 
> 赞同：0
> 
> 时间：2013-02-04T21:00:54.317
> 
> 标签：facebook

我的应用程序允许用户使用 Facebook 登录。

我这样做是为了访问用户的姓名、地址等，因为他们记录在他们的 Facebook 帐户中。

我认为这与“经过身份验证的推荐”或 2013 年 2 月发生的更改列表中描述的任何其他内容无关，但只是想仔细检查一下这是否正确。

任何人都可以发表评论吗？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:30:20.167

对，那是正确的。您根本不使用经过身份验证的推荐:)

# css - 我可以使用 after 伪类来创建目标图像吗？

> ID：14695558
> 
> 赞同：0
> 
> 时间：2013-02-04T21:00:55.987
> 
> 标签：css

所以我在这里有这个CSS：

```
.outerDot {
    width: 50px;
    height: 50px;
    background: white;
    border: 4px solid blue;
    border-radius: 50px;
}
.outerDot:after {
    background: blue;
    width: 20px;
    height: 20px;
} 
```

我希望`.outerDot:after`出现在`.outerDot`. 我在吠叫错误的树吗？ [提琴手](http://jsfiddle.net/hV93X/)

html 只是`<div class="outerDot"></div>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:05:52.763

您必须添加一个`content`属性，并使其显示块：

```
.outerDot:after {
    content: '';
    display: block;
    background: blue;
    width: 20px;
    height: 20px;
} 
```

这是你的小提琴：http: [//jsfiddle.net/hV93X/2/](http://jsfiddle.net/hV93X/2/)

# python - 使用 shell 进行 Grepping - 长时间延迟

> ID：14695559
> 
> 赞同：0
> 
> 时间：2013-02-04T21:00:59.233
> 
> 标签：python, linux, shell

我有一个基准线程正在运行，它需要几个小时才能运行。启动基准线程的脚本是使用 python 完成的。它打印出一些随机的“foo”，我想对其进行 grep 以供进一步使用。

因此，我编写了一个执行此操作的 shell 脚本。

```
#!/bin/bash

id = `taskset -c 0 python <path>/run-apps.py <thread> | grep "pid" | awk '{print $2}'`
echo $id 
```

因为，线程需要很长时间。也许shell脚本在执行结束之前无法跳转到下一行，并且我无法在它启动后立即打印id..

你看有什么问题吗？或者我该如何纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:19:39.737

这个说法

```
echo $id 
```

直到上一条语句才能运行

```
id=`taskset -c 0 python <path>/run-apps.py <thread> | grep "pid" | awk '{print $2}'` 
```

完成。如果您不需要`$id`，请摆脱它并简单地运行

```
taskset -c 0 python <path>/run-apps.py <thread> | grep "pid" | awk '{print $2}' 
```

查看生成的输出（但您可能需要禁用缓冲，正如 Martijn 所指出的那样）。如果确实需要`$id`，可以使用该`tee`命令存储输出的副本并同时将其打印到标准错误：

```
id=$(taskset -c 0 python <path>/run-apps.py <thread> |\
     grep "pid" | awk '{print $2}' | tee /dev/stderr) # Or some other file descriptor that goes to your terminal 
```

第三种选择是使用临时文件。

```
taskset -c 0 python <path>/run-apps.py <thread> | grep "pid" | awk '{print $2}' > tmpfile &
tail --pid $! -f tmpfile # Watch tmpfile until the backgrounded job completes
do-other-job --reading-from tmpfile 
```

# iphone - 动画 NavigationController 过渡而不动画导航栏

> ID：14695561
> 
> 赞同：3
> 
> 时间：2013-02-04T21:01:05.463
> 
> 标签：iphone, ios, cocoa-touch, ios6

我有一个带有导航控制器的典型 ios 应用程序。顶部的导航栏有左右按钮，它们在不同的视图中保持不变，所以我想只为当前视图而不是顶部栏设置动画。

我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T08:49:17.560

我有一个主意。首先，在主视图顶部添加您的自定义导航栏。其次，在导航栏下添加一个 navigationController 作为子视图。现在，如果 navigationController 进行推送或弹出，您的导航栏将根本不会改变。

# android - RSS 阅读器不获取 HTML 字符

> ID：14695562
> 
> 赞同：0
> 
> 时间：2013-02-04T21:01:06.153
> 
> 标签：android, rss-reader

RSS 阅读器不会获取诸如“#8220;”之类的 HTML 字符。所以当提要是“Hey#8220;”时 该应用程序只显示“嘿”，但我不知道为什么。我尝试了 Html.fromHtml 之类的东西，但它确实不起作用。有没有人看到错误？感谢您的回答

`公共类 AndroidRssReader 扩展 ListActivity {

```
private RSSFeed myRssFeed = null;

TextView feedTitle;
TextView feedDescribtion;
TextView feedPubdate;
TextView feedLink;

public class MyCustomAdapter extends ArrayAdapter<RSSItem> {

    public MyCustomAdapter(Context context, int textViewResourceId,
            List<RSSItem> list) {
        super(context, textViewResourceId, list);   
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        //return super.getView(position, convertView, parent);

        View row = convertView;

        if(row==null){
            LayoutInflater inflater=getLayoutInflater();
            row=inflater.inflate(R.layout.row, parent, false);  
        }

        TextView listTitle=(TextView)row.findViewById(R.id.listtitle);
        listTitle.setText(myRssFeed.getList().get(position).getTitle());
        TextView listPubdate=(TextView)row.findViewById(R.id.listpubdate);
        listPubdate.setText(myRssFeed.getList().get(position).getPubdate());

        if (position%2 == 0){
            listTitle.setBackgroundColor(0xff101010);
            listPubdate.setBackgroundColor(0xff101010);
        }
        else{
            listTitle.setBackgroundColor(0xff080808);
            listPubdate.setBackgroundColor(0xff080808);
        }

        return row;
    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    feedTitle = (TextView)findViewById(R.id.feedtitle);
    feedDescribtion = (TextView)findViewById(R.id.feeddescribtion);
    feedPubdate = (TextView)findViewById(R.id.feedpubdate);
    feedLink = (TextView)findViewById(R.id.feedlink);

    readRss();
}

private void readRss(){

    feedTitle.setText("--- wait ---");
    feedDescribtion.setText("");
    feedPubdate.setText("");
    feedLink.setText("");
    setListAdapter(null);

    Toast.makeText(this, "News werden geladen...", Toast.LENGTH_LONG).show();

    try {
        URL rssUrl = new URL("MYURL");
        SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
        SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
        XMLReader myXMLReader = mySAXParser.getXMLReader();
        RSSHandler myRSSHandler = new RSSHandler();
        myXMLReader.setContentHandler(myRSSHandler);
        InputSource myInputSource = new InputSource(rssUrl.openStream());
        myXMLReader.parse(myInputSource);

        myRssFeed = myRSSHandler.getFeed();

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (myRssFeed!=null)
    {
        Calendar c = Calendar.getInstance();
        String strCurrentTiime =  "\n(Time of Reading - "
                                + c.get(Calendar.HOUR_OF_DAY) 
                                + " : "
                                + c.get(Calendar.MINUTE) + ")\n";

        feedTitle.setText(myRssFeed.getTitle() + strCurrentTiime);
        feedDescribtion.setText(myRssFeed.getDescription());
        feedPubdate.setText(myRssFeed.getPubdate());
        feedLink.setText(myRssFeed.getLink());

        MyCustomAdapter adapter =
            new MyCustomAdapter(this, R.layout.row, myRssFeed.getList());
        setListAdapter(adapter);

    }
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    /*Intent intent = new Intent(this,ShowDetails.class);
    Bundle bundle = new Bundle();
    bundle.putString("keyTitle", myRssFeed.getItem(position).getTitle());
    bundle.putString("keyDescription", myRssFeed.getItem(position).getDescription());
    bundle.putString("keyLink", myRssFeed.getItem(position).getLink());
    bundle.putString("keyPubdate", myRssFeed.getItem(position).getPubdate());
    intent.putExtras(bundle);
    startActivity(intent);*/
    Uri feedUri = Uri.parse(myRssFeed.getItem(position).getLink());
    Intent myIntent = new Intent(Intent.ACTION_VIEW, feedUri);
    startActivity(myIntent);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    menu.add(0, 0, 0, "Refresh");
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
    case (0): readRss();
            break;
    default:
            break;
    }

    return true;
} 
```

}`

```
public class RSSFeed {
private String title = null;
private String description = null;
private String link = null;
private String pubdate = null;
private List<RSSItem> itemList;

RSSFeed(){
    itemList = new Vector<RSSItem>(0);
}

void addItem(RSSItem item){
    itemList.add(item);
}

RSSItem getItem(int location){
    return itemList.get(location);
}

List<RSSItem> getList(){
    return itemList;
}

void setTitle(String value)
{
    title = value;
}
void setDescription(String value)
{
    description = value;
}
void setLink(String value)
{
    link = value;
}
void setPubdate(String value)
{
    pubdate = value;
}

String getTitle()
{
    return title;
}
String getDescription()
{
    return description;
}
String getLink()
{
    return link;
}
String getPubdate()
{
    return pubdate;
} 
```

}

公共类 RSSHandler 扩展 DefaultHandler {

```
final int state_unknown = 0;
final int state_title = 1;
final int state_description = 2;
final int state_link = 3;
final int state_pubdate = 4;
int currentState = state_unknown;

RSSFeed feed;
RSSItem item;

boolean itemFound = false;

RSSHandler(){
}

RSSFeed getFeed(){
    return feed;
}

@Override
public void startDocument() throws SAXException {
    // TODO Auto-generated method stub
    feed = new RSSFeed();
    item = new RSSItem();

}

@Override
public void endDocument() throws SAXException {
    // TODO Auto-generated method stub
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub

    if (localName.equalsIgnoreCase("item")){
        itemFound = true;
        item = new RSSItem();
        currentState = state_unknown;
    }
    else if (localName.equalsIgnoreCase("title")){
        currentState = state_title;
    }
    else if (localName.equalsIgnoreCase("description")){
        currentState = state_description;
    }
    else if (localName.equalsIgnoreCase("link")){
        currentState = state_link;
    }
    else if (localName.equalsIgnoreCase("pubdate")){
        currentState = state_pubdate;
    }
    else{
        currentState = state_unknown;
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equalsIgnoreCase("item")){
        feed.addItem(item);
    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub

    String strCharacters = new String(ch,start,length);

    if (itemFound==true){
    // "item" tag found, it's item's parameter
        switch(currentState){
        case state_title:
            item.setTitle(strCharacters);
            break;
        case state_description:
            item.setDescription(strCharacters);
            break;
        case state_link:
            item.setLink(strCharacters);
            break;
        case state_pubdate:
            item.setPubdate(strCharacters);
            break;  
        default:
            break;
        }
    }
    else{
    // not "item" tag found, it's feed's parameter
        switch(currentState){
        case state_title:
            feed.setTitle(strCharacters);
            break;
        case state_description:
            feed.setDescription(strCharacters);
            break;
        case state_link:
            feed.setLink(strCharacters);
            break;
        case state_pubdate:
            feed.setPubdate(strCharacters);
            break;  
        default:
            break;
        }
    }

    currentState = state_unknown;
} 
```

}

```
public class RSSItem {

private String title = null;
private String description = null;
private String link = null;
private String pubdate = null;

RSSItem(){
}

void setTitle(String value)
{
    value.replace("#8220;", "hi");
    title =value;
}
void setDescription(String value)
{
    description = value;
}
void setLink(String value)
{
    link = value;
}
void setPubdate(String value)
{
    pubdate = value;
}

String getTitle()
{
    return title;
}
String getDescription()
{
    return description;
}
String getLink()
{
    return link;
}
String getPubdate()
{
    return pubdate;
}

/*@Override
public String toString() {
    // TODO Auto-generated method stub
    return title;
}*/ 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:11:59.443

```
 InputSource myInputSource = new InputSource(rssUrl.openStream());
        myXMLReader.parse(myInputSource); 
```

为您的输入源或流设置编码。[此示例代码](http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/)可以帮助您。

# android - 允许用户创建活动/论坛

> ID：14695571
> 
> 赞同：-2
> 
> 时间：2013-02-04T21:01:40.090
> 
> 标签：android, eclipse

我开始开发一个允许用户发布广告的 android 应用程序。当用户登录后，他们可以发布他们所售商品的广告。有不同的部分，即汽车，书籍，DVD等。

我需要帮助完成允许用户提交他们的添加以便其他人可以浏览它的任务！很像这个帮助论坛（允许人们发布东西）！

我浏览了一些安卓应用书籍和在线，找不到任何东西！

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:13:42.387

听起来您正在寻找类似 CraigsList 的东西，但在移动应用程序中。

您将需要一个服务器端应用程序，该应用程序将接收和分发广告以及显示添加内容并让人们能够发布的移动客户端。

对于服务器端应用程序，您可以查看[Google App Engine](https://appengine.google.com/)。由于您在 Eclipse 中为 android 开发，我推测您正在使用 Java。Google App Engine 应用程序可以用 Java 编写并免费托管以开始使用。如果您想走更一般的路线，请考虑构建一个[Servlet ，将其托管在](http://en.wikipedia.org/wiki/Java_Servlet)[Tomcat](http://tomcat.apache.org/)之类的东西中。

一旦服务器端应用程序就位，只需从移动应用程序中将数据发送给它即可。 [这是一个已回答的问题](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)，显示了如何做到这一点。

# facebook - Facebook：通过 API 发布到我自己的墙上

> ID：14695576
> 
> 赞同：0
> 
> 时间：2013-02-04T21:01:56.643
> 
> 标签：facebook, facebook-wall

我希望我的应用程序在没有客户端交互的情况下发布到单个预定义用户的墙上，例如“我们刚刚在 [URL] 上发布了一个新博客”。

但是我在这个话题上能找到的每一个答案似乎都取决于通过

```
https://graph.facebook.com/oauth/access_token 
```

这为您提供了一些重定向 URL，用户必须通过该 URL 手动登录。

我对 Facebook 的体验几乎为零。是否可以自动获取预定义用户的访问令牌？我做错了吗？;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:51:28.427

你不能。

Facebook 没有为您提供自动获取用户访问令牌的方法。该用户需要登录 Facebook 并明确授予您的应用权限。你能得到的最好的是一个长期有效的访问令牌，有效期最长为 60 天。

获取该令牌需要两个步骤：

1) 使用 JavaScript API 登录 Facebook 或将用户重定向到有效的 Facebook 登录 URL。2) 检索您在步骤 1 中获得的短期访问令牌以获得长期访问令牌。

获得该访问令牌后，如果您的帖子失败，您知道您需要重新验证用户并获得一个新的长期访问令牌。您的用户需要在线并登录 Facebook 才能正常工作，尽管它可以在没有他们交互的情况下发生。

# android - Android：从 Horizo ntalScrollView 创建的自定义类的分页不流畅

> ID：14695578
> 
> 赞同：2
> 
> 时间：2013-02-04T21:01:58.710
> 
> 标签：android, horizontalscrollview, pager, infinite

我正在尝试从 Horizo​​ntalScrollView 创建一个无限寻呼机。

它通过根据需要不断地重新排列子视图来无限滚动，但是一旦它必须开始移动视图（添加到左侧或右侧），它就不再平滑滚动。我试图弄清楚如何让它顺利滚动到下一页，即使它改变了子位置。

这是我到目前为止的课程：

```
import java.util.HashMap;
import java.util.Map;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.HorizontalScrollView;
import android.widget.LinearLayout;

public class PagerInfinite extends HorizontalScrollView {
    private LinearLayout contents;
    private Map<Integer, Integer> childWidths =  new HashMap<Integer, Integer>();
    private int childSpacing = 0;
    private int activePageIndex = 1;
    private float oldX = 0f;
    private float oldY = 0f;
    private boolean firstScroll = true;

public PagerInfinite(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.contents = new LinearLayout(context);
    this.contents.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT));
    this.addView(this.contents);
    setVerticalScrollBarEnabled(false);
    setHorizontalScrollBarEnabled(false);
}

@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    for (int i = 0; i < this.contents.getChildCount(); i++) {
        View child = this.contents.getChildAt(i);
        int width = child.getWidth();
        if(width != 0) {
            this.childWidths.put(i, width);
        }
    }
    if(this.childWidths.size() > 0 && this.firstScroll) {
        this.smoothScrollTo(this.getActivePageOffset(), 0);
        this.firstScroll = false;
    }
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

@Override
protected float getLeftFadingEdgeStrength() {
    return 0.0f;
}

@Override
protected float getRightFadingEdgeStrength() {
    return 0.0f;
}

public void addPage(View child) {
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.setMargins(0, 0, this.childSpacing, 0);
    child.setLayoutParams(params);
    if(this.contents.getChildCount() <= 1) {
        this.contents.addView(child);
    } else if(this.contents.getChildCount() <= 2) {
        this.contents.addView(child, 0);
    } else {
        View last = this.contents.getChildAt(0);
        this.contents.removeView(last);
        this.contents.addView(last);
        this.contents.addView(child, 0);
    }
    this.contents.requestLayout();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean result = super.onTouchEvent(event);

    switch(event.getAction()) {
        case(MotionEvent.ACTION_DOWN):
            this.oldX = event.getX();
            this.oldY = event.getY();
            break;
        case(MotionEvent.ACTION_UP):
            float newX = event.getX();
            float newY = event.getY();
            float deltaX = newX - this.oldX;
            float deltaY = newY - this.oldY;

            // Use deltaX and deltaY to determine the direction
            if(Math.abs(deltaX) > Math.abs(deltaY)) {
                if(deltaX > 0) {
                    // right
                    if(this.activePageIndex <= 1) {
                        this.buildLeft();
                    } else {
                        this.activePageIndex -= 1;
                    }
                } else {
                    // left
                    if(this.activePageIndex >= this.contents.getChildCount() - 2) {
                        this.buildRight();
                    } else {
                        this.activePageIndex += 1;
                    }
                }
            }
            this.smoothScrollTo(this.getActivePageOffset(), 0);
            break;
    }

    return result;
}

private void buildLeft() {
    View view = this.contents.getChildAt(this.contents.getChildCount() - 1);
    this.contents.removeView(view);
    this.contents.addView(view, 0);
}

private void buildRight() {
    View view = this.contents.getChildAt(0);
    this.contents.removeView(view);
    this.contents.addView(view);
}

private int getActivePageOffset() {
    Log.d(LCHApplication.TAG, "ActiveIndex = " + this.activePageIndex);
    if(this.activePageIndex == 0) {
        return 0;
    }
    if(this.activePageIndex == this.contents.getChildCount() - 1) {
        return this.contents.getWidth();
    }
    int offset = 0;
    for(Map.Entry<Integer, Integer> entry : this.childWidths.entrySet()) {
        if(entry.getKey() < this.activePageIndex) {
            offset += entry.getValue() + this.childSpacing;
        } else {
            break;
        }
    }
    offset += (this.childWidths.get(this.activePageIndex) / 2);
    offset -= (LCHApplication.instance.width / 2);
    return offset;
}

public boolean hasPage(View v) {
    return this.contents.indexOfChild(v) != -1;
}

public void removePage(View v) {
    int index = this.contents.indexOfChild(v);
    this.contents.removeView(v);
    this.childWidths.remove(index);
}

public int getCurrentPageIndex() {
    return this.activePageIndex;
}

public int getPageCount() {
    return this.contents.getChildCount();
}

public void removeAllPages() {
    this.contents.removeAllViews();
    this.childWidths = new HashMap<Integer, Integer>();
}

public void cycle() {
    if(this.activePageIndex < this.contents.getChildCount() - 1) {
        this.activePageIndex += 1;
    } else {
        this.activePageIndex = 0;
    }
    this.smoothScrollTo(this.getActivePageOffset(), 0);
}

public int getChildSpacing() {
    return this.childSpacing;
}

public void setChildSpacing(int spacing) {
    this.childSpacing = spacing;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T10:36:59.230

为时已晚，但我相信我的回答可能对遇到同样问题的其他人有所帮助。

具有无限页面的示例项目 - 具有页面滑动效果

[https://github.com/UdaySravanK/USK_APIs](https://github.com/UdaySravanK/USK_APIs)

# asp.net-mvc-4 - 便携式区域找不到嵌入文件 MVC4 C#

> ID：14695580
> 
> 赞同：0
> 
> 时间：2013-02-04T21:02:05.037
> 
> 标签：asp.net-mvc-4, portable-areas

我有一个包含两个项目的解决方案。一个可移植区域项目，以及一个引用可移植区域项目的网站，并且两者都引用 MvcContrib。

我遇到的问题是嵌入式资源，当我尝试访问它们时，它们给了我一个 404 错误。似乎它正在尝试访问物理路径而不是 dll。部分视图工作正常。

我试图访问的文件在我的 Visual Studio 解决方案资源管理器中看起来像这样

AdHocReporting/Areas/AdHocReportBuilder/Content/adhoc.css（嵌入构建动作）

**这是便携式区域的路由：**

```
using System.Web.Mvc;
using MvcContrib.PortableAreas;

namespace AdHocReporting.Areas.AdHocReportBuilder
{
    public class AdHocReportBuilderAreaRegistration : PortableAreaRegistration
    {
        public override string AreaName
        {
            get { return "AdHocReportBuilder"; }
        }

        public override void RegisterArea(AreaRegistrationContext context, IApplicationBus bus)
        {
            RegisterRoutes(context);
            RegisterAreaEmbeddedResources();

        }
        private void RegisterRoutes(AreaRegistrationContext context)
        {
            context.MapRoute(
              AreaName + "_content",
              base.AreaRoutePrefix + "/Content/{resourceName}",
              new { controller = "EmbeddedResource", action = "Index", resourcePath = "Content" },
              new[] { "MvcContrib.PortableAreas" }
          );

            context.MapRoute(
                AreaName + "_default",
                base.AreaRoutePrefix + "/{controller}/{action}/{id}",
                new { action = "Index", id = UrlParameter.Optional }
            );
        }
    }
} 
```

**这是对便携式区域的引用的网站 Global.aspx**

```
namespace AdHocReportingSite
{
    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        }
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            PortableAreaRegistration.RegisterEmbeddedViewEngine();
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

**这是我的解决方案探索的图像：**

![解决方案资源管理器](../Images/8edf6ff8896eabab2526bf3de3435617.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:21:29.063

一旦我创建了一个新项目并重新进行了所有操作，就无法重现该问题。我不确定这是否是一个错误，或者我只是错过了设置便携式区域的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T19:29:34.017

在 Web.Config 中为每种文件类型添加：

```
<system.webServer>
  <handlers>
    <add name="js" path="*.js" verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="File" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

这将使 IIS 尝试使用定义的路由而不是搜索静态文件。

# algorithm - 二维矩阵中的范围更新和查询

> ID：14695582
> 
> 赞同：4
> 
> 时间：2013-02-04T21:02:06.550
> 
> 标签：algorithm, data-structures, segment-tree

我没有场景，但问题就在这里。这是一个让我发疯的人。有一个 nxn 布尔矩阵，最初所有元素都是 0，n <= 10^6 并作为输入给出。接下来将有多达 10^5 个查询。每个查询既可以将 c 列的所有元素设置为 0 或 1，也可以将 r 行的所有元素设置为 0 或 1。可以有另一种类型的查询，打印 c 列或 r 行中 1 的总数。

我不知道如何解决这个问题，任何帮助将不胜感激。显然，每个查询的 O(n) 解决方案是不可行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:36:40.043

使用数字来订购修改的想法来自 Dukeling 的帖子。

我们将需要 2 个映射和 4 个二进制索引树（BIT，又名 Fenwick 树）：1 个映射和 2 个用于行的 BIT，1 个映射和 2 个用于列的 BIT。让我们称它们`m_row`为 ,`f_row[0]`和`f_row[1]`; `m_col`,`f_col[0]`和`f_col[1]`分别。

Map 可以用数组、树状结构或散列来实现。2 个映射用于存储对行/列的最后修改。由于最多可以有 10 ^(5 个)修改，因此您可以使用该事实来节省简单数组实现的空间。

BIT 有 2 个操作：

*   `adjust(value, delta_freq)`，它调整了`value`按`delta_freq`数量的频率。
*   `rsq(from_value, to_value)`, （rsq 代表范围和查询）它找到所有频率的总和 from`from_value`到`to_value`inclusive。

让我们声明全局变量：`version`

让我们定义`numRow`2D 布尔矩阵中的行数和 2D 布尔矩阵`numCol`中的列数。

BIT 的大小至少应为 MAX_QUERY + 1，因为它用于计算行和列的更改次数，可以与查询次数一样多。

初始化：

```
version = 1
# Map should return <0, 0> for rows or cols not yet
# directly updated by query
m_row = m_col = empty map
f_row[0] = f_row[1] = f_col[0] = f_col[1] = empty BIT 
```

更新算法：

```
update(isRow, value, idx):
    if (isRow):
        # Since setting a row/column to a new value will reset
        # everything done to it, we need to erase earlier
        # modification to it.
        # For example, turn on/off on a row a few times, then
        # query some column
        <prevValue, prevVersion> = m_row.get(idx)
        if ( prevVersion > 0 ):
            f_row[prevValue].adjust( prevVersion, -1 )

        m_row.map( idx, <value, version> )
        f_row[value].adjust( version, 1 )
    else:
        <prevValue, prevVersion> = m_col.get(idx)
        if ( prevVersion > 0 ):
            f_col[prevValue].adjust( prevVersion, -1 )

        m_col.map( idx, <value, version> )
        f_col[value].adjust( version, 1 )

    version = version + 1 
```

计数算法：

```
count(isRow, idx):
    if (isRow):
        # If this is row, we want to find number of reverse modifications
        # done by updating the columns
        <value, row_version> = m_row.get(idx)
        count = f_col[1 - value].rsq(row_version + 1, version)
    else:
        # If this is column, we want to find number of reverse modifications
        # done by updating the rows
        <value, col_version> = m_col.get(idx)
        count = f_row[1 - value].rsq(col_version + 1, version)

    if (isRow):
       if (value == 1):
           return numRow - count
       else:
           return count
    else:
       if (value == 1):
           return numCol - count
       else:
           return count 
```

在最坏的情况下，更新和计数的复杂性都是对数的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:19:26.523

Take version just to mean a value that gets auto-incremented for each update.

Store the last version and last update value at each row and column.

Store a list of (versions and counts of zeros and counts of ones) for the rows. The same for the columns. So that's only 2 lists for the entire grid.

When a row is updated, we set its version to the current version and insert into the list for rows the version and `if (oldRowValue == 0) zeroCount = oldZeroCount else zeroCount = oldZeroCount + 1` (so it's not the number of zero's, rather the number of times a value was updated with a zero). Same for oneCount. Same for columns.

If you do a print for a row, we get the row's version and last value, we do a binary search for that version in the column list (first value greater than). Then:

```
if (rowValue == 1)
  target = n*rowValue
           - (latestColZeroCount - colZeroCount)
           + (latestColOneCount - colOneCount)
else
  target = (latestColOneCount - colOneCount) 
```

Not too sure whether the above will work.

That's O(1) for update, O(log k) for print, where k is the number of updates.

# c# - 非字符串返回类型的日期检查 - 设计

> ID：14695584
> 
> 赞同：0
> 
> 时间：2013-02-04T21:02:10.497
> 
> 标签：c#

```
public static bool CheckExpired()
{
    DateTime expiryDate, currentDate = DateTime.Today;
    DateTime.TryParse(date, out expiryDate);

    if (expiryDate > currentDate)
    {
        return true;
    }
    else { return false; }
} 
```

这就是我现在所拥有的。但是，如果日期格式不正确，我希望有第三个选项。就像现在一样，它直接跳转到 else 并返回 false。

问题是我想要三个可能的结果：

true --> 没有过期

false --> 已过期

第三个 --> 输入的日期无效

我只是坚持我是如何到达那里的。我知道我可以轻松地使用 String 返回类型，但是有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T21:06:22.130

几个选项；

1.  使用`bool?`类型；然后您可以返回`null`结果。问题是，“null”在您的上下文中并没有真正的意义，因此用法不清楚

2.  抛出一个`Exception`if 格式不正确。可能使用法更清晰（不能传递格式错误的日期），但这意味着您需要在所有调用者中进行尝试捕获

3.  使用 an`enum`作为返回值，它可以为您的结果显式设置名称。

我认为枚举在这里可能最有意义，并且对于该方法的消费者来说是最清楚的；

```
public enum ExpiredResult
{
    Expired,
    NotExpired,
    FormatError,
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T21:05:18.280

由于[DateTime.TryParse()](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)如果成功返回布尔值，您可以触发它。

```
if(DateTime.TryParse(date, out expiryDate))
{
    if (expiryDate > currentDate)
    {
        return true;
    }
    else { return false; }
}
else
{
    Console.Write("Invalid date.");
} 
```

然后使用 Nullable 而不是 bool 作为返回类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T21:05:34.017

你可以使用`NullableBool`,

```
 public static bool? CheckExpired(string date)
    {
        DateTime expiryDate, currentDate = DateTime.Today;
        if (DateTime.TryParse(date, out expiryDate))
        {
            return expiryDate > currentDate;
        }
        return null;
    } 
```

true --> 没有过期

false --> 已过期

null --> 输入的日期无效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:06:19.687

我稍微重构了代码。但这可能是一个解决方案：

```
public static bool CheckExpired()
{
    DateTime expiryDate, currentDate = DateTime.Today;

    if (!DateTime.TryParse(date, out expiryDate))
    {
         throw new Exception("Invalid date");
    }

    return (expiryDate > currentDate);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T21:13:08.767

就我个人而言，我只是编写一个 Enum 来封装返回状态，如下所示：

```
public enum ExipiryStatus
{
    Expired,
    NotExpired,
    InvalidDate
}

public static ExipiryStatus CheckExpired(string date)
{
    DateTime expiryDate, currentDate = DateTime.Today;

    if (DateTime.TryParse(date, out expiryDate))
    {
        if (expiryDate > currentDate)
        {
            return ExipiryStatus.Expired;
        }
        else
        {
            return ExipiryStatus.NotExpired;
        }
    }
    else
    {
        return ExipiryStatus.InvalidDate;
    }
} 
```

我真的不喜欢这种可以为空的布尔值。在调用站点上，返回值应该是什么从来都不是很清楚。使用枚举，它是明确的。

[编辑] 被打败了。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T21:09:30.373

尝试这个：

```
public static bool? CheckExpired(string date)
{
    DateTime expiryDate;
    DateTime currentDate = DateTime.Today;

    if (!DateTime.TryParse(date, out expiryDate))
    {
        return null;
    }

    return (expiryDate > currentDate);
} 
```

检查`null`返回值或有效`true`/`false`值，如下所示：

```
string date = "2/4/2013";
bool? isExpired = CheckExpired(date);

if (!isExpired.HasValue)
{
    Console.Write("Invalid date");
}
else if (isExpired.Value)
{
    Console.Write("Expired");
}
else // if (!isExpired.Value)
{
    Console.Write("Valid");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T21:07:15.003

听起来像是一个[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.110%29.aspx)的工作......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T21:07:36.917

我会选择一个枚举。类似于以下内容：

```
public static DateValidationResult CheckExpired(string date)
{
    DateTime expiryDate, currentDate = DateTime.Today;
    if (!DateTime.TryParse(date, out expiryDate))
        return DateValidationResult.InvalidDate;

    return expiryDate > currentDate ? DateValidationResult.Ok : DateValidationResult.Fail;
}

public enum DateValidationResult
{
    InvalidDate,
    Ok,
    Fail
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-04T21:06:01.313

您可以使用可为空的 bool (bool?) 或 int

如果字符串未能转换为日期时间，它将返回 null

```
public static bool? CheckExpired()
    {
        DateTime expiryDate, currentDate = DateTime.Today;
        DateTime.TryParse(date, out expiryDate);
        if (expiryDate == new DateTime())
        {
            return null;
        }
        if (expiryDate > currentDate)
        {
            return true;
        }
        else 
        { return false; }
    } 
```

# c# - DataGridView 中的 RowsAdded 事件仅针对前 2 行触发

> ID：14695585
> 
> 赞同：2
> 
> 时间：2013-02-04T21:02:27.533
> 
> 标签：c#, datagridview

有没有人遇到过`RowsAdded`事件只触发两次然后离开循环的问题？

我以编程方式填充 a`DataGridView`然后执行一些计算以给出适当的数字。

我的代码在下面，但是当运行`DataGridView`拉取并显示所有数据时，计算字段仅针对前 2 行完成。通过使用断点，这会正确循环两次，但随后会离开第 3 行和其他行而不循环`RowsAdded`事件。

```
 private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        DataClasses1DataContext getIsEmployed = new DataClasses1DataContext();
        var result = from a in getIsEmployed.writers
                     where a.name == dataGridView1.Rows[e.RowIndex].Cells["nameDataGridViewTextBoxColumn"].Value.ToString()
                     select a;

        foreach (var b in result)
        {
            if (b.IsEmployed == true)
            {
                int val1 = Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                decimal val2 = val1 * 300;
                decimal hourlyRate = Convert.ToDecimal(dataGridView1.Rows[e.RowIndex].Cells["hourlyRateDataGridViewTextBoxColumn"].Value);
                int contractedEmployedHours = Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells["hoursDataGridViewTextBoxColumn"].Value);
                decimal employedWage = (((hourlyRate * contractedEmployedHours) * 52) / 12);

                decimal employedBonusPerArticle = Convert.ToDecimal(dataGridView1.Rows[e.RowIndex].Cells["bonusDataGridViewTextBoxColumn"].Value);
                decimal maximumEmployedBonus = (((val1 * employedBonusPerArticle) * 52) / 12);

                decimal maximumEmployedLiability = employedWage + maximumEmployedBonus;

                dataGridView1.Rows[e.RowIndex].Cells["ExpectedWeeklyWords"].Value = val2;
                dataGridView1.Rows[e.RowIndex].Cells["CostOfContent"].Value = employedWage;
                dataGridView1.Rows[e.RowIndex].Cells["MaximumBonus"].Value = maximumEmployedBonus;
                dataGridView1.Rows[e.RowIndex].Cells["MaximumLiability"].Value = maximumEmployedLiability;
            }
            else
            {
                int val1 = Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                decimal val2 = val1 * 300;
                int basicCost = Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                int calculatedBasicCost = (((basicCost * 3) * 52) / 12);

                decimal bonusPerArticle = Convert.ToDecimal(dataGridView1.Rows[e.RowIndex].Cells["bonusDataGridViewTextBoxColumn"].Value);
                decimal maximumBonus = (((val1 * bonusPerArticle) * 52) / 12);

                decimal maximumLiability = calculatedBasicCost + maximumBonus;

                dataGridView1.Rows[e.RowIndex].Cells["ExpectedWeeklyWords"].Value = val2;
                dataGridView1.Rows[e.RowIndex].Cells["CostOfContent"].Value = calculatedBasicCost;
                dataGridView1.Rows[e.RowIndex].Cells["MaximumBonus"].Value = maximumBonus;
                dataGridView1.Rows[e.RowIndex].Cells["MaximumLiability"].Value = maximumLiability;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:35:53.037

I managed to work out a workaround but I am still unsure why it happens. I ended up having to use the RowStateChanged event in DataGridview and perfoming a check to chen the state changes to "Displayed" and then running the calculations.

Code used is below:

```
 private void dataGridView1_RowStateChanged(object sender, DataGridViewRowStateChangedEventArgs e)
    {               
        if(e.StateChanged.ToString() == "Displayed")
        {

            DataClasses1DataContext getIsEmployed = new DataClasses1DataContext();
            var result = from a in getIsEmployed.writers
                         where a.name == dataGridView1.Rows[e.Row.Index].Cells["nameDataGridViewTextBoxColumn"].Value.ToString()
                         select a;

            foreach (var b in result)
            {
                if (b.IsEmployed == true)
                {
                    int val1 = Convert.ToInt32(dataGridView1.Rows[e.Row.Index].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                    decimal val2 = val1 * 300;
                    decimal hourlyRate = Convert.ToDecimal(dataGridView1.Rows[e.Row.Index].Cells["hourlyRateDataGridViewTextBoxColumn"].Value);
                    int contractedEmployedHours = Convert.ToInt32(dataGridView1.Rows[e.Row.Index].Cells["hoursDataGridViewTextBoxColumn"].Value);
                    decimal employedWage = (((hourlyRate * contractedEmployedHours) * 52) / 12);

                    decimal employedBonusPerArticle = Convert.ToDecimal(dataGridView1.Rows[e.Row.Index].Cells["bonusDataGridViewTextBoxColumn"].Value);
                    decimal maximumEmployedBonus = (((val1 * employedBonusPerArticle) * 52) / 12);

                    decimal maximumEmployedLiability = employedWage + maximumEmployedBonus;

                    dataGridView1.Rows[e.Row.Index].Cells["ExpectedWeeklyWords"].Value = val2;
                    dataGridView1.Rows[e.Row.Index].Cells["CostOfContent"].Value = employedWage;
                    dataGridView1.Rows[e.Row.Index].Cells["MaximumBonus"].Value = maximumEmployedBonus;
                    dataGridView1.Rows[e.Row.Index].Cells["MaximumLiability"].Value = maximumEmployedLiability;
                }
                else
                {
                    int val1 = Convert.ToInt32(dataGridView1.Rows[e.Row.Index].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                    decimal val2 = val1 * 300;
                    int basicCost = Convert.ToInt32(dataGridView1.Rows[e.Row.Index].Cells["articlesPerWeekDataGridViewTextBoxColumn"].Value);
                    int calculatedBasicCost = (((basicCost * 3) * 52) / 12);

                    decimal bonusPerArticle = Convert.ToDecimal(dataGridView1.Rows[e.Row.Index].Cells["bonusDataGridViewTextBoxColumn"].Value);
                    decimal maximumBonus = (((val1 * bonusPerArticle) * 52) / 12);

                    decimal maximumLiability = calculatedBasicCost + maximumBonus;

                    dataGridView1.Rows[e.Row.Index].Cells["ExpectedWeeklyWords"].Value = val2;
                    dataGridView1.Rows[e.Row.Index].Cells["CostOfContent"].Value = calculatedBasicCost;
                    dataGridView1.Rows[e.Row.Index].Cells["MaximumBonus"].Value = maximumBonus;
                    dataGridView1.Rows[e.Row.Index].Cells["MaximumLiability"].Value = maximumLiability;
                }
            }
        }   

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T12:04:58.630

今天，我在我们的一个旧应用程序中遇到了同样的问题。实际上问题是“我们错误地使用了“ **RowsAdded** ”事件。如果您阅读**DataGridViewRowsAddedEventArgs**类的文档，您会看到它可以包含有关添加多行的信息。

```
public class DataGridViewRowsAddedEventArgs : EventArgs
{
  //The number of rows that have been added.
  public int RowCount { get; }

  //The index of the first added row.
  public int RowIndex { get; }
} 
```

因此，您必须处理从索引**e.RowIndex开始的****e.RowCount**行数，以便处理所有新添加的行。

 **```
for (int i = 0; i < e.RowCount; i++)
{
   DataGridViewRow _row = m_dgMetadata.Rows[e.RowIndex + i];
   //.. Do whatever you want
} 
```**

# android - 如何设置图像/WebView 高度/宽度以匹配父级？

> ID：14695589
> 
> 赞同：2
> 
> 时间：2013-02-04T21:02:41.667
> 
> 标签：android, android-webview, android-animation

大家好，美好的一天。

我发现使用 WebView 显示 GIF 动画很容易，因为它相当简单。

现在我显示的 GIF 大小为 800x800px。我想要的是这个 GIF 适合它可用的屏幕，可能与类似的父级匹配，这样就不必滚动或放大/缩小图片。它只是自动适合任何可用的屏幕。

我用于实验的设备是：GT-I9100/Samsung Galaxy SII，屏幕尺寸为 800x480px。

这是我的主要活动中的一段代码：

```
HToad view = new HToad(this, "file:///android_asset/hypnotoad.gif");
view.setInitialScale(30);
view.getSettings().setUseWideViewPort(true);
setContentView(view); 
```

这是 HToad 类：

```
import android.content.Context;
import android.webkit.WebView;

public class HToad extends WebView {

    public HToad(Context context, String path) {
        super(context);
        // TODO Auto-generated constructor stub
        loadUrl(path);
    }

} 
```

我尝试使用 LayoutParams 和 IntialSize 等各种设置，但都没有帮助我实现我想要的。

我将 JAVA 用于 WebView，而不是在 XML 中定义 WebView。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:28:45.847

尝试使用 loadData 方法而不是 loadUrl 加载您的 gif，并添加如下 CSS 样式：

```
<style type='text/css'>
    img {max-width: 100%;height:initial;}
</style> 
```

最后你必须得到这样的东西：

```
setBackgroundColor(Color.TRANSPARENT);
loadData("<style type='text/css'> img {max-width: 100%;height:initial;}</style>" +
         "<img align='middle' src='file:///android_asset/hypnotoad.gif'/>", "text/html", "utf-8");
reload(); 
```

我希望我对你有所帮助。

# junit - 是否可以重用 OpenJDK 中现有的测试套件来测试新的集合类？

> ID：14695597
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:03:18.613
> 
> 标签：junit, java

我实现了一个自定义集合，并希望使用来自 open-jdk 的单元测试对其进行测试。
用于测试 OpenJDK 实现的测试套件是否开放？还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:17:12.663

改用 Guava 的那些：

[http://code.google.com/p/google-collections/source/browse/trunk/testfw/com/google/common/collect/testing/](http://code.google.com/p/google-collections/source/browse/trunk/testfw/com/google/common/collect/testing/)

# r - 使用 textplot() 将字符串中的一个单词更改为粗体

> ID：14695598
> 
> 赞同：7
> 
> 时间：2013-02-04T21:03:27.350
> 
> 标签：r

我使用`textplot()`包中的`gplots`来编写定义，然后使用`par(mfrow=c(3,2))`.

我想将字符串中的单个单词更改为粗体（通常是正在定义的单词）。是否有一个元字符可以让我在“”中执行此操作？或者另一种选择单词并赋予它们粗体属性而不将其分配给整个字符串的解决方案？

它类似于这个问题，但我无法在 textplot() 中使用相同的技术： [text() R-function - 如何更改单个单词的字体？](https://stackoverflow.com/questions/10408542/text-r-function-how-to-change-the-font-of-a-single-word/10408821#10408821)

```
text(0.5,0.5, expression(paste(bold("bold")," not bold"))) 
```

这是我的代码，没有粗体字。假装“定义”是粗体：

```
blurb<-strwrap("Definition: This is my text blurb",
                width=60)
textplot(blurb, halign="left", valign="top", cex = 1,  family="serif") 
```

我一直在尝试将字符串分开并搜索将粗体分配给“定义”部分的函数，font=2，然后将字符串重新粘贴在一起，但我很难过。我找不到要使用的功能：

```
blurb1<-"Definition"             ##How to change to bold face?? 
blurb2<-"This is my text blurb"

blurb<-paste0(blurb1,blurb2) 
```

编辑：使用其他解决方案的主要障碍是对于我的页面布局， text() 并不完全可行。我希望找到在 textplot() 内部或以可以传递给 textplot() 的方式编辑字符串的解决方案。

我正在创建一些“报告卡”，它将绘制用户数据并在情节旁边提供一段解释。不同的值会触发不同的 textplot()。我喜欢 textplot() 因为它很容易与 par(mfrow=c(4,2)) 一起放置，在不重叠其他图的情况下划出一个单独的空间。如果没有大量的定位，我似乎无法在 text() 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:29:15.207

你需要使用`bquote()`. 这是一个简单的函数，它接受一个文本字符串并将其拆分并返回适当的表达式以满足您的粗体绘图需求。我相信您可以根据需要进行调整。

```
# Pass the function a string and a character to split on
# The splitting is greedy (i.e. it will split on all matches so make sure you are splitting on a unqiue character such as ":" in your example)
tsplit <- function( string , split ){
    require( stringr )
    blurb <- paste( string )
    blurbs <- strsplit( blurb , paste(split) )
    annot <- bquote( paste( bold( .( blurbs[[1]][1] ) ) , .(split) , .(blurbs[[1]][2]) , sep = "" ) )
    return( annot )
}

#And the function in action...
j <- tsplit( "Define: This is my blurb" , ":" )
textplot( paste( " " ) ) #Get new plot
text(0.5 , 0.5 , j ) #paste the text 
```

我希望这有帮助。该函数假定只有一个唯一字符可以拆分字符串，并且您希望第一个单词以粗体显示，而字符串的其余部分以正常格式显示。

干杯

**编辑**

抱歉，我在您所说的问题中意识到您不能使用文本进行放置，因为它有问题。快速检查 textplot ( `showMethods(textplot)`) 的可用方法和用于绘制字符 ( `getAnywhere(textplot.character)`) 的适当方法的来源表明 textplot 实际上使用调用来`text`使用文本对象注释绘图。大部分代码都涉及在您想要文本的位置进行繁重的工作。您可以进行一些简单的调整来`textplot.character()`创建自定义函数来执行您想要的操作。您可以将其复制并粘贴到 R 中，它应该按照底部的示例工作。

```
tplot.cust <-   function ( object , split , halign = c("center", "left", "right"), valign = c("center", 
"top", "bottom"), cex, fixed.width = TRUE, cspace = 1, lspace = 1, 
mar = c(0, 0, 3, 0) + 0.1, tab.width = 8, ...) 
{
# extra code to split text according to 'split' argument and make text before the split bold.
require(stringr)
blurb <- paste( object )
blurbs <- strsplit( blurb , paste(split) )
annot <- bquote( paste( bold( .( blurbs[[1]][1] ) ) , .(split) , .(blurbs[[1]][2]) , sep = "" ) )

object <- paste(object, collapse = "\n", sep = "")
object <- gplots:::replaceTabs(object, width = tab.width) #you need to add gplots::: to this line because replaceTabs is a function that is not exported from the gplots namespace
halign = match.arg(halign)
valign = match.arg(valign)
plot.new()
opar <- par()[c("mar", "xpd", "cex", "family")]
on.exit(par(opar))
par(mar = mar, xpd = FALSE)
if (fixed.width) 
    par(family = "mono")
plot.window(xlim = c(0, 1), ylim = c(0, 1), log = "", asp = NA)
slist <- unlist(lapply(object, function(x) strsplit(x, "\n")))
slist <- lapply(slist, function(x) unlist(strsplit(x, "")))
slen <- sapply(slist, length)
slines <- length(slist)
if (missing(cex)) {
    lastloop <- FALSE
    cex <- 1
}
else lastloop <- TRUE
for (i in 1:20) {
    oldcex <- cex
    cwidth <- max(sapply(unlist(slist), strwidth, cex = cex)) * 
        cspace
    cheight <- max(sapply(unlist(slist), strheight, cex = cex)) * 
        (lspace + 0.5)
    width <- strwidth(object, cex = cex)
    height <- strheight(object, cex = cex)
    if (lastloop) 
        break
    cex <- cex/max(width, height)
    if (abs(oldcex - cex) < 0.001) {
        lastloop <- TRUE
    }
}
if (halign == "left") 
    xpos <- 0
else if (halign == "center") 
    xpos <- 0 + (1 - width)/2
else xpos <- 0 + (1 - width)
if (valign == "top") 
    ypos <- 1
else if (valign == "center") 
    ypos <- 1 - (1 - height)/2
else ypos <- 1 - (1 - height)
text(x = xpos, y = ypos, labels = annot , adj = c(0, 1), 
    cex = cex, ...) #add the newly created annot expression here
par(opar)
invisible(cex)
} 
```

然后我们可以像这样使用 tplot.cust ......

```
blurb <- "Define: This is my blurb"
tplot.cust(blurb, ":" , halign="left", valign="top", cex = 1,  family="serif") 
```

希望这是你想要的？？

# android - Facebook Android sdk 3.0 授权对话框未显示请求的权限

> ID：14695599
> 
> 赞同：3
> 
> 时间：2013-02-04T21:03:30.463
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我要求提供电子邮件、user_birthday 和姓名。每次登录 Web 视图出现时，它只列出基本信息。

它似乎与 onClickLogin 侦听器中对 openActiveSession 的调用有关。

此类是“SessionLoginSample”facebook 示例项目的“LoginUsingActivityActivity.java”文件的复制/粘贴。我添加的唯一内容是权限、关闭会话 onStart 和 onStop，以及在 SessionStatusCallback 中添加检索用户信息的请求。

我无法找到权限未显示在授权对话框中的原因。非常感谢任何帮助，代码粘贴在下面。

```
package com.mydomain.test.login;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import com.facebook.LoggingBehavior;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.Settings;
import com.facebook.model.GraphUser;

public class LoginTest extends Activity {
    private static final String URL_PREFIX_FRIENDS = "https://graph.facebook.com/me/friends?access_token=";
    private List<String> perms;

    private TextView textInstructionsOrLink;
    private Button buttonLoginLogout;
    private Session.StatusCallback statusCallback = new SessionStatusCallback();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login_test);
        buttonLoginLogout = (Button)findViewById(R.id.fbLogin);
        textInstructionsOrLink = (TextView)findViewById(R.id.textView1);
        perms = new ArrayList<String>();
        perms.add("email");
        perms.add("name");
        perms.add("user_birthday");

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(perms));
            }
        }

        updateView();
    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
        if( Session.getActiveSession() != null )
            Session.getActiveSession().close();
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
        if( Session.getActiveSession() != null )
            Session.getActiveSession().close();
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        if (session.isOpened()) {
            textInstructionsOrLink.setText(URL_PREFIX_FRIENDS + session.getAccessToken());
            buttonLoginLogout.setText(R.string.fbLogout);
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogout(); }
            });
        } else {
            textInstructionsOrLink.setText(R.string.hello_world);
            buttonLoginLogout.setText(R.string.fbLogin);
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogin(); }
            });
        }
    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(perms));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    private void onClickLogout() {
        Session session = Session.getActiveSession();
        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if( session.isOpened() ){
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        Log.i("FB_TEST", response.toString());
                        Log.i("FB_TEST", user.getName() + " -- " + "DOB: " + user.getBirthday() + " EMAIL: " + user.getProperty("email"));
                    }
                });
            }
            updateView();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T06:45:47.310

您可以使用以下代码添加所需的权限

```
 session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback).setPermissions(Arrays.asList("email", "user_status"))); 
```

# c# - 具有多个 Where 子句的 Linq 过滤结果

> ID：14695600
> 
> 赞同：3
> 
> 时间：2013-02-04T21:03:36.267
> 
> 标签：c#, linq

我正在尝试使用 EF 5 将多个搜索条件应用于结果集（在本例中，用于图书馆目录搜索）。以下是相关代码：

```
public IQueryable<LibraryResource> GetSearchResults(string SearchCriteria, int? limit = null)
    {
        List<string> criteria = SearchCriteria.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        IQueryable<LibraryResource> allResults = context.LibraryResources.Include("Type").Where(r => r.AuditInfo.DeletedAt == null);
        foreach (string criterion in criteria)
        {
            allResults = allResults.Where(r => (r.Title.Contains(criterion) || r.Keywords.Contains(criterion) || r.Author.Contains(criterion) || r.Comments.Contains(criterion)));
        }
        allResults = allResults.OrderBy(r => r.Title);
        if (limit.HasValue) allResults = allResults.Take(limit.Value);
        return allResults;
    } 
```

示例 SearchCriteria = "历史时代"

出于某种原因，只有最后一个标准被应用。例如，在上面的示例中，所有在标题、作者、关键字和评论中带有“时代”的书籍都被返回，而没有按“历史”进行过滤。我单步执行了代码，循环执行了两次，每次都使用适当的标准。你能看到我看不到的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:06:28.257

您已成为修改封闭变量值的受害者。

将代码更改为：

```
foreach (string criterion in criteria)
{
    var crit = criterion;
    allResults = allResults.Where(/* use crit here, not criterion */);
} 
```

这里的问题是，当您构建查询时，您的过滤表达式关闭变量`criterion`，实际上是在评估查询的点将其拉入范围。但是，那时`criterion`只有*一个*值（它碰巧循环的最后一个值），所以除了最后一个过滤器之外的所有过滤器实际上都会变成最后一个的副本。

在表达式中创建本地副本`criterion`并引用它可以纠正问题，因为每次`crit`都是*不同*的本地变量，其生命周期不会从循环的一次迭代延伸到下一次迭代。

有关更多详细信息，您可能想阅读[C# 在 foreach 中重用变量是否有原因？](https://stackoverflow.com/q/8898925/50079)，其中还提到 C# 5.0 将采取适用于这种情况的重大更改：循环变量的生命周期`criterion`将发生变化，使此代码在没有额外本地的情况下正常工作。

# javascript - 在登录期间防止重定向到 Dropbox 页面的技术是什么

> ID：14695601
> 
> 赞同：0
> 
> 时间：2013-02-04T21:03:39.420
> 
> 标签：javascript, android, redirect, dropbox

尝试制作某种移动应用程序以与 Dropbox 一起使用。在身份验证过程中，有一个步骤要求应用程序打开 Dropbox 上的页面以让用户登录并允许应用程序访问 Dropbox 资源。

但是 Android 的 Dropbox 应用程序不会重定向到任何地方，在您输入凭据后，它只会将您连接到您的 Dropbox。他们如何做到这一点？有任何想法吗？

我的应用程序是基于 Javascript 的，并且可以运行，但我希望获得无缝的用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:14:23.330

The Dropbox application for Android most likely has access to internal APIs to accomplish this that third party developers / applications cannot access.

Third party apps wanting to integrate with Dropbox need to authenticate / authorize their users via Oauth.

The Dropbox documentation ([step 2 of the authentication process](https://www.dropbox.com/developers/reference/api#authorize)) clearly states that the user needs to choose whether to grant the application the ability to access files on their behalf.

This is a standard step in the OAuth dance.

# java - 根据抽象类值的具体实现改变元素标签

> ID：14695602
> 
> 赞同：1
> 
> 时间：2013-02-04T21:03:47.063
> 
> 标签：java, xstream

假设我有一个名为的抽象类`AbstractItem`，用作另一个类中的字段。当我使用 XStream 生成 XML 时，我希望元素标记基于`AbstractItem`.

我得到什么：

```
<Test>
  <item class="Item1" name="name 1" description="description 1"/>
</Test> 
```

我想要的是：

```
<Test>
  <Item1 name="name 1" description="description 1"/>
</Test> 
```

`XStream`我尝试通过执行以下操作在实例上设置别名：

```
stream.alias("Item1", Item1.class); 
```

并且还使用：

```
stream.aliasType("Item1", Item1.class); 
```

以上任何一种都不起作用。

* * *

为了清楚起见，这里是上述的可运行示例：

**测试.java**

```
import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.annotations.XStreamAlias;

@XStreamAlias("Test")
public class Test {

    public AbstractItem item;   

    public static void main(String[] args){

        Test t1 = new Test();
        Item1 item1 = new Item1();
        item1.name = "name 1";
        item1.description = "description 1";
        t1.item = item1;

        XStream stream = new XStream();
        stream.setMode(XStream.NO_REFERENCES);
        stream.autodetectAnnotations(true);
        stream.alias("Item1", Item1.class);

        System.out.println(stream.toXML(t1));
    }
} 
```

**抽象项目.java**

```
import com.thoughtworks.xstream.annotations.XStreamAsAttribute;

public abstract class AbstractItem {
    @XStreamAsAttribute
    public String name;
} 
```

**项目1.java**

```
import com.thoughtworks.xstream.annotations.XStreamAsAttribute;

public class Item1 extends AbstractItem {
    @XStreamAsAttribute
    public String description;
} 
```

* * *

**更新：** 我试图使用转换器类来做到这一点，但它仍然不正确：

```
stream.registerConverter(
        new Converter(){

            @Override
            public boolean canConvert(Class type) {
                if (AbstractItem.class.isAssignableFrom(type)){
                    return true;
                }
                return false;
            }

            @Override
            public void marshal(Object source, HierarchicalStreamWriter writer,
                    MarshallingContext context) {
                AbstractItem item = (AbstractItem)source;
                if(source instanceof Item1){
                    writer.startNode("Item1");
                    writer.addAttribute("description",((Item1)item).description);
                } else if(source instanceof Item2){
                    writer.startNode("Item2");
                    writer.addAttribute("description", ((Item2)item).description);
                } else {
                    writer.startNode("Item");
                }
                writer.addAttribute("name", item.name);
                writer.endNode();
            }

            @Override
            public Object unmarshal(HierarchicalStreamReader reader,
                    UnmarshallingContext context) {
                // TODO Auto-generated method stub
                AbstractItem item = null;
                String nodeName = reader.getNodeName();
                if (nodeName.equals("Item1")){
                    item = new Item1();
                    ((Item1)item).description = reader.getAttribute("description");
                } else if (nodeName.equals("Item2")){
                    item = new Item2();
                    ((Item2)item).description = reader.getAttribute("description");
                }  
                item.name = reader.getAttribute("name");
                return item;
            }
        }); 
```

我现在得到的结果是：

```
<Test>
  <item class="Item1">
    <Item1 description="description 1" name="name 1"/>
  </item>
</Test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:26:21.673

我发现实现这一点的唯一方法是使用包含我要为其操作元素标记的对象的类的自定义转换器。在问题的示例中，它将是`Test`该类的自定义转换器，它看起来像：

```
import com.thoughtworks.xstream.converters.Converter;
import com.thoughtworks.xstream.converters.MarshallingContext;
import com.thoughtworks.xstream.converters.UnmarshallingContext;
import com.thoughtworks.xstream.io.HierarchicalStreamReader;
import com.thoughtworks.xstream.io.HierarchicalStreamWriter;

public class BasicConverter implements Converter {

    @Override
    public boolean canConvert(Class type) {
        return Test.class.isAssignableFrom(type);
    }

    @Override
    public void marshal(Object source, HierarchicalStreamWriter writer,
            MarshallingContext context) {
        if (((Test) source).item instanceof Item1) {
            writer.startNode("Item1");
            writer.addAttribute("description", ((Item1)((Test) source).item).description);
        } else if (((Test) source).item instanceof Item2) {
            writer.startNode("Item2");
            writer.addAttribute("description", ((Item2)((Test) source).item).description);
        }
        writer.addAttribute("name", ((Test) source).item.name);
        writer.endNode();
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader,
            UnmarshallingContext context) {
        Test test = new Test();

        reader.moveDown();
        String nodeName = reader.getNodeName();
        AbstractItem item = null;       
        if (nodeName.equals("Item1")) {
            item = new Item1();
            ((Item1)item).description = reader.getAttribute("description");
        } else if (nodeName.equals("Item2")) {
            item = new Item2();
            ((Item2)item).description = reader.getAttribute("description");
        }   
        item.name = reader.getAttribute("name");    
        ((Test)test).item = item;
        reader.moveUp();
        return test;
    }
} 
```

这给出了我在上面寻找的输出，但对我来说并不令人满意。原因是，我需要使用它的实际类有大量字段，其中一些使用自己的自定义转换器、自定义别名等。此外，它基本上会忽略 Test 类上的所有注释，除了那些定义在班级水平。另外，随着班级的增长，您必须更新此转换器以处理这些新字段，否则它们将被包括在内。

理想情况下，我想要一个转换器，它可以执行注释定义的所有操作，但某些字段除外。目前没有我知道的。我正在做的是扩展`com.thoughtworks.xstream.converters.reflection.ReflectionConverter`课程以实现这一目标。但它需要从我特别关心的底层实现中复制更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:56:25.470

XStream 我也面临同样的问题。我以前使用过使用反射来读取 xml 的[Commons 消化器。](http://commons.apache.org/proper/commons-digester/)这将为您提供读取 xml 时请求的功能。缺点是它无法编写 xml。我更喜欢消化器，因为不需要更改 java 类中的任何内容（没有注释或转换器的东西），并且很容易设置解析 xml 的规则。但话又说回来，它没有您从 XStream 或 Jaxb 获得的所有功能。现在我必须使用 XStream（或 Jaxb）来解决这个问题，所以我想我必须编写所需的转换器内容。谢谢你的例子。

# ember.js - 在 Controller.content[] 数组中显示数组中的第一项

> ID：14695605
> 
> 赞同：1
> 
> 时间：2013-02-04T21:04:10.690
> 
> 标签：ember.js

如何在我的 ArrayController.content[] 属性中的数组中显示特定项目？我在下面有这段代码：

```
App.View.PairView = Em.View.create({    
  templateName: 'display-template',
  controller: App.Controller.PairController 
});

App.Controller.PairController = Em.ArrayController.create({
  content: [],
  createNew: function(){        
    var weeks = ['1','2','3'];
    var quarters = ['Q1', 'Q2', 'Q3'];
    var months = ['Jan', 'Sep', 'Dec'];

    this.set('content', []);
    this.pushObject(weeks);
    this.pushObject(quarters);
    this.pushObject(months);        
  }
}); 
```

我只想获取 App.Controller.PairController.content[0][0] 或“周”。如果我有下面的车把模板，我该怎么写？

```
<script type="text/x-handlebars" data-template-name="display-template">
  {{#each item in controller}}                                                  
       ???????????????????????
   {{/each}}      
</script> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:50:22.577

按索引 .0 或 .1 等...

{{item.0.0}}

# c# - C# List<> 将列表添加到字典

> ID：14695606
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:04:11.900
> 
> 标签：c#

```
 Dictionary<string, List<Piese>> SetPiese = new Dictionary<string, List<Piese>>();

        char[] litere = "ABCDEFGHIJLMNOPRSTUVXZ".ToCharArray();

        for (int i = 1; i <= litere.Length; i++) {
            SetPiese.Add(litere[i], Set + litere[i]);
        }

        List<Piese> SetA = GenerareSetLitere("A", 1, 11);
        List<Piese> SetB = GenerareSetLitere("B", 9, 2);
        List<Piese> SetC = GenerareSetLitere("C", 1, 5);
        ................................................ 
```

所以我有很多列表，我想将它们添加到字典中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:07:02.430

很简单，不要在一开始就在单独的变量中声明它们。以编程方式工作总是很痛苦。如果您开始：

```
List<Piese>[] sets = new List<Piese>[]
{
    GenerareSetLitere("A", 1, 11),
    GenerareSetLitere("B", 9, 2),
    GenerareSetLitere("C", 1, 5)
    ...
}; 
```

那么你可以使用：

```
// Note loop condition change
for (int i = 0; i < litere.Length; i++) {
    SetPiese.Add(litere[i], sets[i]);
} 
```

或者更好的是，如果`literere`实际上是一组可以内联指定的表达式，则可以在集合初始化程序中完成所有操作：

```
Dictionary<string, List<Piese>> SetPiese = new Dictionary<string, List<Piese>>
{
    { "first-key", GenerareSetLitere("A", 1, 11) },
    { "second-key", GenerareSetLitere("B", 9, 2) }
}; 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:06:37.400

我想这行得通：

```
Dictionary<string, List<Piese>> SetPiese = new Dictionary<string, List<Piese>>();
List<Piese> SetA = GenerareSetLitere("A", 1, 11);
List<Piese> SetB = GenerareSetLitere("B", 9, 2);
List<Piese> SetC = GenerareSetLitere("C", 1, 5);
SetPiese.Add("A", SetA);
SetPiese.Add("B", SetB);
SetPiese.Add("C", SetC); 
```

我不确定，因为您没有提到字典的键。

# windows - 带有图标相对路径的 Windows 快捷方式

> ID：14695607
> 
> 赞同：7
> 
> 时间：2013-02-04T21:04:14.630
> 
> 标签：windows, batch-file, path, icons, shortcuts

有没有办法在win快捷方式中设置图标的相对路径？对于目标位置，它工作正常：

```
%windir%\system32\cmd.exe /c "cd %CD% && start fileToExecute.bat" 
```

我读到win快捷方式可以自动从.exe文件中获取图标，但是如果我的目标文件是批处理文件怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T01:36:40.563

您的要求并不完全清楚，因为您的标题说明了一件事，但您的问题说明了另一件事。

如果问题是是否可以为 LNK 文件中的图标位置设置相对路径，那么答案是否定的。[图标文件格式](http://msdn.microsoft.com/en-us/library/dd871305%28prot.20%29.aspx)有两种指定图标位置的方法，可以是绝对路径，也可以是扩展环境变量的路径。没有相对路径的选项。

# scala - 如何让 Scala ToolBox 查看 REPL 定义？

> ID：14695609
> 
> 赞同：12
> 
> 时间：2013-02-04T21:04:31.963
> 
> 标签：scala, reflection, scala-2.10

回到反射还刚刚起步的时候，在 Scala 2.10.0 里程碑的日子里，我[问了一个问题](https://stackoverflow.com/q/11055210/53013)，关于如何使用它来查看来自 REPL 的代码片段树。出色的答案比我问的更进一步，并展示了如何使用它们来解析和评估树，所以我继续尝试在我今天正在进行的一个小项目中使用它。

不幸的是，以这种方式解析和评估的代码似乎没有看到任何 REPL 定义：

```
scala> val x = 1
x: Int = 1

scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> val tb = scala.reflect.runtime.universe.runtimeMirror(
  getClass.getClassLoader).mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = ...

scala> tb.eval(tb.parse("x"))
scala.tools.reflect.ToolBoxError: reflective compilation has failed:

not found: value x 
```

有没有办法让它识别 REPL 上的定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T08:35:04.483

最近我研究了 repl，试图让它支持类型宏，所以我有能力解释为什么它不起作用。让它工作将是下一步:)

我知道您知道输入 repl 的每个片段在编译之前都会被包装到一些样板文件中。因此， x 最终成为具有奇怪名称的包中嵌套嵌套嵌套对象中的字段。

显然，repl 会跟踪所有定义的符号，然后将必要的导入连同它生成的样板一起注入。因此后续行可以看到 x 不合格。相比之下，工具箱只是重用 repl 的类加载器，但不对导入做任何事情，因此失败了。

一种解决方法是以某种方式获取表示 repl 的对象，询问它定义的符号，然后生成相应的导入到您提供给工具箱的代码中。如果您提交工单，我将尝试在 2.10.1 代码冻结疯狂结束后（假设是本周末）编写一个解决方法。

# mysql - DataNucleus JDO 应用程序的 UTF-8 字符编码问题（暴露 MySQL 数据库）

> ID：14695612
> 
> 赞同：2
> 
> 时间：2013-02-04T21:04:50.667
> 
> 标签：mysql, jdbc, jdo, datanucleus

我有一个将 MySQL 数据库表公开为 Web 服务的 DataNucleus JDO Web 应用程序。其中一个表行包含俄语文本。当 Web 服务返回该行时，该文本显示为？

这是我迄今为止尝试过的：

1.  我已经确认 MySQL 数据库表中的数据实际上是正确编码的。当我在 MySQL Workbench 中查看数据时，它显示正确。
2.  我尝试用 Java 编写一个小型 MySQL 客户端，它只是连接到数据库并打印出该行。起初，我收到了类似的输出（所有？）。然后，我尝试使用 JVM 参数运行客户端，`-Dfile.encoding=UTF-8`它成功了。
3.  我在 Tomcat 中运行 Web 服务。我尝试`-Dfile.encoding=UTF-8`在 catalina.bat 中添加 JAVA_OPTS，但没有任何变化。
4.  我在我的 pom.xml 文件中将我的 JDBC 连接 URL 指定为一个属性，并且在 jdoconfig.xml 中引用了它。我尝试附加`?useEncoding=true&amp;characterEncoding=UTF-8`到连接 url，当我尝试访问 Web 服务时，我不断收到以下 NullPointerException 错误：

    java.lang.NullPointerException org.datanucleus.api.rest.RestServlet.doGet(RestServlet.java:271) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet .java:728)

我现在完全没有主意了。我一直小心翼翼地确保我正在查看支持 UTF-8 编码的媒体中的任何输出。我对 DataNucleus 和 JDO API 没有太多经验，所以我想知道我是否遗漏了与此相关的内容。

# java - CPLEX 多维阵列

> ID：14695613
> 
> 赞同：1
> 
> 时间：2013-02-04T21:04:51.500
> 
> 标签：java, multidimensional-array, cplex

我有变量`xijm`，它可以是 0 或 1。我知道我应该这样做，`IloArray<>`但我需要在 java 中查看一个示例。我找到[了这个](http://www-01.ibm.com/support/docview.wss?uid=swg21399963)，但我使用的是 java。这个想法我不清楚！你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:35:22.387

The way to learn is by looking at examples and getting them to work in your environment. Then you make changes to the formulation, until it represents your full model.

Here are several examples to get you on your way:

1.  You could start with [this tutorial](http://www.me.utexas.edu/~bard/LP/LP%20Handouts/CPLEX%20Tutorial%20Handout.pdf), to get familiar with the various Ilog calls. First, get familiar with the Library and how CPLEX responds. The tutorial includes Java examples.

2.  If you want [decision variables with multiple dimensions](http://web.njit.edu/all_topics/Prog_Lang_Docs/cplex80/doc/userman/html/Java_Design_Model22.html), here's an example of that using Java.

3.  Also, IBM's ["Modeling with IBM ILOG CPLEX CP Optimizer – Practical Scheduling Examples"](ftp://public.dhe.ibm.com/common/ssi/ecm/en/wsw14076usen/WSW14076USEN.PDF) is another good place to get acquainted with CPLEX modeling.

4.  [Finally, here's another example, provided by IBM.](http://www-01.ibm.com/support/docview.wss?uid=swg21399963)

Hope that helps.

# java - jnlp 突然被 java web start 破坏了

> ID：14695616
> 
> 赞同：0
> 
> 时间：2013-02-04T21:05:02.140
> 
> 标签：java, macos, jnlp, java-web-start

我看到运行相同的旧 jnlp 的 Web App Start 出现问题。

我一直在 Mac 上运行，达尔文内核版本 10.8.0，永远。突然之间，我无法从 Web 启动运行该应用程序。

```
java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-10M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

从控制台，我运行

```
javaws ./my.jnlp 
Java Web Start splash screen process exiting .....
    Bad installation. No JRE found in configuration file 
```

jnlp 文件包含：

```
<security>
    <all-permissions/>
</security>
<resources>
<j2se version="1.4+" initial-heap-size="128m" max-heap-size="256m" /> 
```

不知道发生了什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:26:44.460

如果您的问题再次出现，或者其他人是否遇到同样的问题... Oracle 的 Mac Java 常见问题解答指出：“[当使用 Software Update 完成 Java 更新时，Apple 会禁用 Java 插件和 Webstart 应用程序](https://www.java.com/en/download/faq/java_mac.xml#software%20upgrade)。” 您可以从 Oracle 下载适用于 Mac 的 Java 7 并将其用于 Webstart。见[https://www.java.com/en/download/mac_download.jsp](https://www.java.com/en/download/mac_download.jsp)

Apple 一直在间歇性地发布禁用 Java 小程序和 Webstart 的软件更新，因此该问题可能会在稍后再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:15:19.950

我在我的 Mac 上运行 Java 的软件更新，问题就消失了。它以神秘的形式出现，只有在神秘中消失才是公平的。

# java - 在 Java 应用程序中访问 SMSESSION 值

> ID：14695619
> 
> 赞同：2
> 
> 时间：2013-02-04T21:05:07.063
> 
> 标签：java, siteminder

我们有一个 Java 桌面应用程序，它向一些需要将 SMSESSION 值传递到 SOAP 标头的后端服务发出 SOA Web 服务请求。在我们的 Web 应用程序中，一旦 SMSESSION 在浏览器 Cookie 中建立，我们就会获得单点登录，因此传递 SMSESSION 是无缝的。

对于我们的桌面应用程序，我们不知道如何从桌面获取 SMSESSION。是否有 SiteMinder Java API 允许我们从桌面上的 cookie 或任何其他解决方案中获取 SMSESSION？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T20:44:18.003

SmAuthenticationContext[类](https://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP2-ENU/Bookshelf_Files/HTML/javadoc-sm/com/netegrity/policyserver/smapi/SmAuthenticationContext.html)包含以下方法：

*   让您检索 AppSpecificContext 对象

*   包括来自建立用户上下文的用户目录的凭据信息

*   设置此身份验证请求的用户文本响应

以下是一些可能有帮助的参考资料：

*   [适用于 Java 的 CA SiteMinder API 参考指南](http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP2-ENU/Bookshelf_Files/HTML/javadoc-sm/overview-summary.html)
*   [持久化服务](http://www.cs.rit.edu/usr/local/jdk/docs/technotes/guides/javaws/developersguide/examples.html#PersistenceService)
*   [NTLM SSO](https://www.liferay.com/it/community/wiki/-/wiki/Main/NTLM+SSO)
*   [通过单点登录简化企业 Java 身份验证](http://www.ibm.com/developerworks/java/library/j-gss-sso/)

# java - 如何使用 Struts Form 管理多维数组

> ID：14695621
> 
> 赞同：5
> 
> 时间：2013-02-04T21:05:16.303
> 
> 标签：java, web-applications, struts-1

我正在使用 Apache Struts 1.3 来呈现网格，它是嵌入在 .jsp 中的 html 表单。就像是

```
<html:form action="/MyController.do?action=processForm">
<html:text property="taxation[0][0]" value="" styleClass="gridInputs"></html:text>
<html:text property="taxation[0][1]" value="" styleClass="gridInputs"></html:text>
 ...
<html:text property="taxation[10][10]" value="" styleClass="gridInputs"></html:text> 
```

MyController 与 ActionForm 相关联：

```
public class MyForm extends ActionForm{

protected String taxation[][]= new String [10][10]; 

public String[] getTaxation() {
    return taxation;
}

public void setTaxation(String[][] taxation) {
    this.taxation = taxation;
} 
```

当我尝试检索表单提交的信息时出现问题。Whithin MyController.class 我有一个简单的调度程序操作

```
public class MyController extends DispatchAction {
public ActionForward processForm(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response) {

    MyForm myform = (MyForm) form;

            // Here i can use the getter method to retrieve an array, but
           // myform is already wrong populated from struts

    }

    return mapping.findForward("stage2");

} 
```

我知道我可以使用 Vector（一维数组）并且它工作得很好，但遗憾的是我需要遵循一些规范（并且规范迫使我使用 MyForm 类和 10x10 矩阵......）。使用 struts 填充二维数组的正确方法是什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:23:42.553

Struts 不支持在 Form bean 中填充多维数组。但是，它确实处理对象的一维数组。因此，如果您可以创建一个本身包含一维数组的类（例如 MatrixRow），然后您可以在表单 bean 中创建该对象的一维数组，那么作为一种解决方法。你的新课程看起来像

```
 public class MatrixRow {

    private String matrixCol[] = new String[10];

    /**
     * @return the matrixCol
     */
    public String[] getMatrixCol() {
        return matrixCol;
    }

    /**
     * @param matrixCol the matrixCol to set
     */
    public void setMatrixCol(String[] matrixCol) {
        this.matrixCol = matrixCol;
    }
} 
```

然后在你的表单bean中

```
private MatrixRow[] arrMatrix = new MatrixRow[10];
/**
     * @return the arrMatrix
     */
    public MatrixRow[] getArrMatrix() {
        return arrMatrix;
    }

    /**
     * @param arrMatrix the arrMatrix to set
     */
    public void setArrMatrix(MatrixRow[] arrMatrix) {
        this.arrMatrix = arrMatrix;
    } 
```

并且在您的 JSP 中，您可以使用类似

```
 <html:form action="biArrayTestAction.do">
    <table cellpadding="0" cellspacing="0" width="100%">
    <logic:iterate id="matrixRows" name="biArrayTestForm" 
                   property="arrMatrix" indexId="sno" 
                   type="logic.MatrixRow" >
    <tr>
        <td><bean:write name="sno"/></td>
    <logic:iterate id="matrixCol" name="matrixRows" property="matrixCol" indexId = "colNo">
        <td>
           <input type="text" name="arrMatrix[<%=sno %>].matrixCol[<%=colNo %>]">
        </td>
    </logic:iterate>
    </tr>
    </logic:iterate>
    <tr>
      <td align="center" valign="top" colspan="2">
        &nbsp;
      </td>
    </tr>
    <tr>
        <td align="center" valign="top" colspan="2">
          <html:submit property="command" value="Test"></html:submit>
        </td>
    </tr>
   </table> 
```

当您提交该表单时，您将获得填充了值的 MatrixRow 对象的所有列。

我希望这能帮到您。我没有找到在 Struts1 中使用多维数组的任何其他方式。

# java - FileNotFound 异常尝试简单的 Spring java 应用程序

> ID：14695624
> 
> 赞同：3
> 
> 时间：2013-02-04T21:05:19.107
> 
> 标签：java, spring

我有以下“Beans.xml”；它在 Eclipse 中的“src”文件夹中：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

        <bean id="user1" class="rc.User">
            <property name="name"    value="joe" />
        </bean>

    </beans> 
```

我有以下java应用程序：

```
package rc;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Asparagus 
{
    public static void main (String[] arguments)
    {
        ApplicationContext context = null;
        try
        {
            context = new ClassPathXmlApplicationContext("Beans.xml");
        }
        catch (ExceptionInInitializerError eiie)
        {
            System.out.println(eiie);
        }
        System.out.println("hi");
        User u = context.getBean("user1", User.class);
        System.out.println("hi2");
        System.out.println(u);
    }
} 
```

这是在 Eclipse 中的 'src' 文件夹内的一个 'rc' 包中。我有一个 User bean 类，我想我不妨包括它：

```
package rc;

public class User 
{
    public User() {} 

    public String name;

    public String getName()                {return name;            }
    public void setName(String name)       {this.name = name;       }
} 
```

当我运行它时，我得到 FileNotFoundException。我能想到的唯一文件是我的 XML 文件，但我不知道它为什么会出现问题。

我使用 DOS 查看目录结构，验证“Beans.xml”是否位于应用程序类路径的根目录中，位于 src 和 bin 下。我认为这一点可以通过 Asparagus 类（有人反对它被称为“Main”）被发现并开始运行这一事实得到证实，如果 src/bin 不是类路径根目录，eclipse 就无法做到这一点。

我最近在别人的建议下包含了一堆乱七八糟的库，这个问题消失了，我发现另一个问题（在 StackOverflow 中）是由一个 jar 作为系统库包含在 eclipse 中引起的，所以我拿了除了 java 运行时之外的所有系统库。

我真的不希望通过添加一堆库而不知道它们应该做什么来解决这个问题。有人可以解释这里发生了什么以及为什么建议的解决方案可以解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T09:40:48.020

**ClassPathXmlApplicationContext：**不需要提供完整路径，但必须`CLASSPATH`正确设置。如果您的代码抛出异常，则意味着容器在类路径中找不到 bean 定义。检查类路径并重试。

如果使用**FileSystemXmlApplicationContext**则需要提供 XML bean 的完整路径。

供参考检查[Spring ApplicationContext 容器](http://www.tutorialspoint.com/spring/spring_applicationcontext_container.htm)

Spring 3.1.x 支持注解，所以我更喜欢注解`@Autowired`来初始化任何 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:40:30.113

事实证明，这是项目中使用的弹簧罐的一些尚未确定的问题。

我有一整套弹簧罐——其中 8 个或 10 个——都以 org.springframework.-3.1.1.RELEASE.jar 的形式命名；这些作为 jars 放置在 Spring Tool Suite（又名 eclipse）中的构建路径上。另一个程序员有一个类似的简单项目正在运行，它使用 spring--3.1.2.RELEASE.jar 形式的 jar，所以我切换到了这些。现在代码可以工作了。

感谢所有提供帮助的人；我仍然不知道这两组 jar 之间的区别，也不知道为什么原始错误消息如此晦涩（任何引发 FileNotFoundException 的代码都应该能够告诉我们有关哪个文件的信息）。

# angularjs - 如何制作可重用的 AngularJs 组件

> ID：14695625
> 
> 赞同：5
> 
> 时间：2013-02-04T21:05:24.427
> 
> 标签：angularjs, angularjs-directive

这似乎应该很容易，但我找不到关于它的文档。我想知道如何使 Angular 组件（比如说过滤器）在不同的应用程序中可重用。我制作了一个简单的过滤器来格式化电话号码，我希望能够在任何应用程序中使用它。目前它是这样声明的：

```
var myModule = angular.module('myModule', ['ngSanitize']);

myModule.filter('formatFilter', function() {
  return function(input) {
    return input.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3");
  }
}); 
```

问题是如何使这个过滤器可重用。现在它只是附加到“myModule”，但我怎样才能把它从这个文件中取出，以便我也可以在其他地方重用它呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:28:48.730

您通过将过滤器封装在一个单独的模块中来开始 OK。对于其他应用程序使用它，这些应用程序只需要包含过滤器的源代码并声明对模块的依赖：

`angular.module('myApp',['myModule'])`

您可能希望将您的过滤器保持模块重命名为更有意义的名称，例如`phoneFormatter`或某事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T20:43:49.317

举个例子：

这是一个声明为模块的可重用过滤器，因此只需要在应用程序上注入：

筛选：

```
angular.module("lov-filter", []).filter('StartOnPage', function () {
    return function (input, start) {
        start = +start;
        return input.slice(start);
    }
}); 
```

应用程序：

> var demoApp = angular.module('demoApp', ['lov-filter']) .config(function () {
> 
> ```
> }); 
> ```

用于此角度指令：[https ://github.com/rolandocc/lov-angular-directive](https://github.com/rolandocc/lov-angular-directive)

# python - Django 平面页面

> ID：14695629
> 
> 赞同：0
> 
> 时间：2013-02-04T21:05:41.490
> 
> 标签：python, django, django-views, django-flatpages

我正在使用 Django flatpages，并希望在基于用户会话变量的模板中实现一些逻辑。

例如。

```
{% if session.my_var %}
    YES
{% else %}
    NO
{% endif %} 
```

问题是会话对象未在平面页面上下文中定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:29:56.733

创建一个`TEMPLATE_CONTEXT_PROCESSOR`然后由`RequestContext`（请参阅[文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)）使用。

```
def session(request):
    return { 'session': request.session } 
```

# templates - emberjs：在所有模板准备好/可见后调用一个函数

> ID：14695633
> 
> 赞同：1
> 
> 时间：2013-02-04T21:05:49.773
> 
> 标签：templates, ember.js, rendering

我需要在应用程序启动并呈现自身后执行操作。我所做的就是将**didInsertElement**添加到主模板并调用控制器方法来执行实际操作，如下所示：

```
Sp.IndexView = Em.View.extend({
    templateName: 'index',

    didInsertElement: function() {
        this.controller.switchMenuItem() ;
    }
}) ;

Sp.IndexController = Em.Controller.extend({

    switchMenuItem: function() {
        $('#index').addClass('nice-animation') ;
        ... and something more ...
    }
}); 
```

但是，当页面准备就绪并可见时，动画就已经应用了。只有当我添加 setTimeout() 并在添加类之前等待片刻时，我才看到元素被转换了。在 Ember 中是否有一种方法可以在一切都变得可见之后执行操作？

干杯

# c# - 来自 C#/ASP.NET 的慢速、大型 SQL 查询

> ID：14695635
> 
> 赞同：0
> 
> 时间：2013-02-04T21:05:53.627
> 
> 标签：c#, sql, sqldatareader

> **可能重复：**
> [如何在 C# 中有效地从 SQL 数据读取器写入文件？](https://stackoverflow.com/questions/9055521/how-to-efficiently-write-to-file-from-sql-datareader-in-c)

我目前正在尝试创建一个使用只读访问权限的 Web 应用程序，以允许用户从我们的数据库中下载大文件。有问题的表中有 400,000 条记录，导出时会生成一个 50 MB 的 .csv 文件。

在 SQL 服务器上运行语句“SELECT * FROM [table]”大约需要 7 秒，从我的 Web 应用程序（托管在不同的服务器上）大约需要 33 秒。这是将所有数据读入 System.Data.SqlClient.SqlDataReader 对象。

我的问题是我无法将 SqlDataReader 转换为 .csv 文件。将 SqlDataReader 的每一行都转换成字符串，然后逐行输出到文件中需要将近 2 个小时，这是不可接受的。下面是我用来在 Web 应用程序的服务器上创建文件的代码：

```
 while (rdr.Read())
    {
        string lineout = "";
        for (int index = 0; index < rdr.FieldCount; index++)
            lineout += rdr[index].ToString().Replace(',', ' ') + ',';
        write(lineout, filename); //uses StreamWriter.WriteLine()
    } 
```

一定有更好的方法。我环顾四周，看到了很多建议，基本上建议执行上述操作来创建文件。这适用于较小的桌子，但不适用于我们每天使用的两张非常大的桌子。谁能给我推动正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:29:10.777

您可以尝试`lineout`使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/y9sxk6fy.aspx)而不是手动连接字符串来构建您的：

```
//you can test whether it makes any difference in performance declaring a single
//StringBuilder and clearing, or creating a new one per loop
var sb = new StringBuilder();

while (rdr.Read())
{
    for (int index = 0; index < rdr.FieldCount; index++)
        sb.Append(rdr[index].ToString().Replace(',', ' ').Append(',');

    write(sb.ToString(), filename); //uses StreamWriter.WriteLine()
    sb.Clear();
} 
```

或者尝试直接写入文件并避免首先在内存中生成每一行：

```
//assume a StreamWriter instance has been created called sw...
while (rdr.Read())
{
    for (int index = 0; index < rdr.FieldCount; index++)
    {
        sw.Write(rdr[index].ToString().Replace(',', ' ');
        sw.WriteLine(",");
    }
}

//flush and close stream 
```

# python - Pandas 附加数据帧，添加一个字段，然后用默认值填充该字段？

> ID：14695637
> 
> 赞同：2
> 
> 时间：2013-02-04T21:06:10.943
> 
> 标签：python, pandas

我有几个包含所有相同列名的数据框。我想将它们附加到主数据框中。我还想创建一个表示原始字段的列，然后用原始数据框名称填充它。我有一些有效的代码。

```
df_combine = df_breakfast.copy()
df_combine['X_ORIG_DF'] = 'Breakfast'
df_combine = df_combine.append(df_lunch, ignore_index=True)
df_combine['X_ORIG_DF'] = df_combine['X_ORIG_DF'].fillna('Lunch')
# Rinse and repeat 
```

然而，它似乎不优雅。我希望有人可以为我指出一个更优雅的解决方案。提前感谢您的宝贵时间！

***注意：**已编辑以反映评论！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:38:44.233

我肯定会考虑以可以整齐地访问名称而不是变量名称的方式重组您的数据（如果它们*必须*分开开始）。
例如字典：

```
d = {'breakfast': df_breakfast, 'lunch': df_lunch} 
```

创建一个函数，为每个 DataFrame 提供一个新列：

```
def add_col(df, col_name, col_entry):
    df = df.copy() # so as not to change df_lunch etc.
    df[col_name] = col_entry
    return df 
```

并将每个 DataFrame 列表与附加列 ( `'X_ORIG_DF'`) 结合起来：

```
In [3]: df_combine = pd.DataFrame().append(list(add_col(v, 'X_ORIG_DF', k)
                                           for k, v in d.items()))
Out[3]: 
   0  1  X_ORIG_DF
0  1  2      lunch
1  3  4      lunch
0  1  2  breakfast
1  3  4  breakfast 
```

*在这个例子中：`df_lunch = df_breakfast = pd.DataFrame([[1, 2], [3, 4]])`.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:59:10.553

在尝试将多个文件组合在一起以在主数据框中进行分析时，我遇到了与您类似的问题。这是一种通过独立加载每个数据帧来创建主数据帧的方法，在名为“ID”的列中为每个数据帧提供一个标识符并将它们组合起来。如果您的数据是一个名为的目录中的文件列表，`datadir`我将执行以下操作：

```
import os
import pandas as pd

data_list = os.listdir(datadir)
df_dict = {}

for data_file in data_list:
    df = read_table(data_file)
    #add an ID column based on the file name.
    #you could use some other naming scheme of course 
    df['ID'] = data_file
    df_dict[data_file] = df

#the concat function is great for combining lots of dfs. 
#it takes a list of dfs as an argument.
combined_df_with_named_column = pd.concat(df_dict.values()) 
```

# java - 我应该如何为我的系统建模 - 数据库含义

> ID：14695639
> 
> 赞同：0
> 
> 时间：2013-02-04T21:06:15.360
> 
> 标签：java, netbeans, model, connection, javadb

我有一个主类、一个登录类和一个 gui 类。

在我的主目录中，我正在使用单例模式创建一个数据库连接——只有这个连接的一个实例。

我想从登录访问数据库连接，以在登录系统时验证用户。

我在 main 中的连接方法：

```
/**
 * Use the Singleton pattern to create one Connection
 */
private static Connection getConnection() {
    if (conn != null) {
        return conn;
    }
    try {
        Class.forName(driver);
    } catch (ClassNotFoundException e) {
        System.out.println(e.getMessage() + " load driver error");
        System.exit(0);
    }
    try {
        //conn = DriverManager.getConnection(host);
        conn = DriverManager.getConnection(host + "create=true", dbUsername, dbPassword);
    } catch (SQLException e) {
        displayErr("Get connection error: ", e);
        System.exit(0);
    }
    return conn;
} 
```

现在，我想创建一个需要使用连接连接的登录方法。该方法是静态的，我不能使用 conn。

我确定这是错误的，但我也尝试过创建一个返回连接 conn 的公共方法，然后尝试从 Main 调用该方法。

```
conn = Main.returnConnection(); 
```

在这种情况下我该怎么办？我很困惑我应该如何建模。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:58:15.710

*与连接池*相比，您的方法是如此原始。连接池是指包含缓存的、可重用的连接的池，这些连接可以在未来的请求中使用。正如您所说，为每个用户打开连接是一个昂贵的过程，而且为每个用户提供静态连接也会发生冲突。连接池是在这种情况下应该使用的标准。

```
connection = connectionPool.getConnection(); 
```

上面的代码表示从池中获取一个连接，如果所有连接都已分配，机制会自动创建一个新的。

The most popular libraries are:

*   [BoneCP](http://jolbox.com/)
*   [Apache DBCP](http://commons.apache.org/dbcp/)
*   [C3p0](http://www.mchange.com/projects/c3p0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:50:48.590

我发现 Singleton 模式的目的是创建某物的一个实例并让每个人都可以看到它。

所以我改为将其设为 public static void，现在可以访问连接，而无需每次都创建一个新连接。

如果我错了，请纠正我，但这很好用。

# sql - 在选择中使用大小写显示附加列

> ID：14695644
> 
> 赞同：0
> 
> 时间：2013-02-04T21:06:31.760
> 
> 标签：sql, case

使用 SQL 2008，我有以下代码：

```
 if (exists (select * from tempdb.INFORMATION_SCHEMA.TABLES where TABLE_NAME = '##tempz'))
begin
drop table ##tempz
end
else
DECLARE @startDate datetime, @enddate datetime, @storename varchar(20), @showstore int, @showcashier int, @showregister int, @showdate int
SET @startDate = '1/1/2011'
SET @enddate = '1/1/2013'
SET @storename = '01'
SET @showstore = 1
SET @showcashier = 1
SET @showregister = 1
SET @showdate = 1

DECLARE @cols AS NVARCHAR(MAX),@colsNull AS NVARCHAR(MAX),@query  AS NVARCHAR(MAX)
SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(c.CurrencyDesc)
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.ReceiptNo LEFT JOIN Currencies c ON c.POSCurrency = LEFT(p.paytype,1)
WHERE r.trsdate >= @startDate AND r.trsdate <= @enddate
FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

SELECT @colsNull = STUFF((SELECT DISTINCT ', IsNull(' + QUOTENAME(c.CurrencyDesc) +', 0) as '+ QUOTENAME(c.CurrencyDesc)
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.ReceiptNo LEFT JOIN Currencies c ON LEFT(p.paytype,1) = c.POSCurrency
WHERE r.trsdate >= @startDate AND r.trsdate <= @enddate
FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

SET @query = 'select date, cashregister, storeid, cashier, '+@colsNull+' into ##tempz
FROM
(SELECT cast(r.trsdate AS DATE) date,c.CurrencyDesc,p.amount,r.cashregister,r.storeid,r.cashier
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.receiptno LEFT JOIN Currencies c ON LEFT(p.paytype,1) = c.POSCurrency
WHERE r.trsdate >= '''+ convert(varchar(10), @startDate, 101) +''' AND r.trsdate <= '''+ convert(varchar(10), @endDate, 101) +''' 
) p
pivot
(sum(amount) FOR CurrencyDesc in('+@cols+')) piv'
execute(@query)

select * from ##tempz 
```

这返回 ![返回](../Images/b5ddd96268087a143eec3033e48c0d26.png)

我想要的是，如果其中任何一个：

```
SET @showstore = 1
SET @showcashier = 1
SET @showregister = 1
SET @showdate = 1 
```

是 0，那么我不想在结果窗口中显示它。所以如果@showcashier 为0，那么Cashier 将不会显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:08:45.857

你不能，使用常规 SQL。SQL 语句返回的列已定义。

你有三个选择。首先是在应用程序级别选择列。第二个是返回 NULL 值（如果语法正确，您的查询将执行此操作。第三个是使用“动态”sql。即，将 SQL 查询生成为字符串，然后执行它。

第三个选项取决于您使用的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:27:38.330

这样做的一种方法是使用这样的存储过程：

```
CREATE PROCEDURE GetData
    @show tinyint
AS
BEGIN
    IF @show = 1
    BEGIN
        select CurrencyDesc, POSCurrency from Currencies;
    END
    ELSE
        select CurrencyDesc from Currencies;
END 
```

而不是像这样执行它：

```
exec GetData 1 -- returns 2 columns

exec GetData 0 -- returns one column 
```

# codeigniter - Ion-auth：从管理员切换到用户帐户

> ID：14695647
> 
> 赞同：1
> 
> 时间：2013-02-04T21:06:56.050
> 
> 标签：codeigniter, codeigniter-2, ion-auth

我对 ion-auth 很陌生，所以如果这是一个愚蠢的问题，请提前道歉。

我有来自用户（管理员）的功能请求，他们希望能够切换到另一个用户的帐户以从他们的角度查看应用程序。这里的用例是管理员会在应用程序的用户管理页面中找到相关用户的帐户，然后单击一个按钮以有效地“成为”该用户。

任何想法如何实现？

非常感谢

皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:30:27.673

@皮特，

您要求的是有时被称为“劫持”帐户的内容。

目前没有这样的功能，但基本上你需要做的是：

1) 销毁当前会话

2）以您要劫持的用户身份重建会话

3) 确保还设置了 logged_in 会话变量。

* * *

密码都是散列的，但我认为为自己编写一个登录函数非常简单，它不通过密码散列作为登录步骤的一部分。

换句话说，

1) 登出

2）查找用户ID的用户名和密码

3）直接使用该密码登录，而不是哈希版本

当然，您需要非常小心自己的安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T17:26:22.183

您需要更改 users_groups 表，添加“状态”字段，以便将当前 user_group 设置为 true/false。

然后，使用以下功能升级模型：

1.  获取当前组并将其状态设置为 false。
2.  获取新组并将其状态设置为 true。
3.  重定向到所选组的主页。

通过此更改，您可以重新生成所有用户的数据会话并以选定用户的身份导航。

# javascript - javascript将表单从一个页面复制到另一个页面上的另一个表单

> ID：14695651
> 
> 赞同：0
> 
> 时间：2013-02-04T21:07:09.170
> 
> 标签：javascript, forms

是否可以使用javascript将x页上的表单中的值复制到y页上的表单。数据是一样的，只是页面不同，应用不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:10:02.743

是的，你可以这样做。使用 AngularJS，您可以使用“搜索”变量，然后将它们插入表单。使用普通的 javascript，您可以在数据中使用 #。使用 PHP + 普通 javascript（更安全），您可以将 POST 发送到页面（这是一个 PHP 页面）并拥有该页面，如果具有您的值的 POST 参数存在，则在页面上放置一个 javascript 片段设置值页面加载完成时的表单。

Cookie 也始终是一种选择 :)

**[编辑]**

经过讨论，这里是问题的解决方案：[GitHub](https://github.com/kidovate/copyformdata)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:12:23.427

如果它只是从一个页面到另一个页面，您可以将数据作为 POST（使用 PHP）变量或简单查询字符串（GET）附加到请求中，并在页面加载/填充相关字段后读取它们 - 如果第二页是直接从第一个加载。

如果需要将其保留到未指定的时间（当用户可能在此期间访问其他页面时），您可以考虑使用 cookie。

[如何使用 JQuery 获取 GET 和 POST 变量？](https://stackoverflow.com/questions/439463/how-to-get-get-and-post-variables-with-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:12:30.233

尝试这样的事情：

```
window.onload = function() {
   var myValues;
   if (document.cookie) {
      // get your values onLoad
      myValues = document.cookie;
   } else {
      // set your values
      myValues = "..." // your values
      document.cookie = myValues;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:10:11.993

实际上，不允许使用交叉表 JS。我不确定前沿的 api。

理论上，可以通过具有同源限制的本地存储来实现。但你最好不要介意这个选项。

另外，尝试玩饼干。

# php - 已达到 SimpleXML 重定向限制

> ID：14695667
> 
> 赞同：0
> 
> 时间：2013-02-04T21:08:15.807
> 
> 标签：php, simplexml

我试图在远程服务器上打开一个 XML 文件，但我收到一条错误消息，指出已达到重定向限制。我无法控制遥控器，有没有办法可以增加这个限制？或者，我应该与拥有服务器的人交谈，看看他们能做什么？

这是错误：

> 警告：simplexml_load_file（[http://www.server.com/search/music.xml?key=key&type=songs&p1=All%20Things%20New&p2=Elevation%20Worship](http://www.server.com/search/music.xml?key=key&type=songs&p1=All%20Things%20New&p2=Elevation%20Worship)）[function.simplexml-load-file]：无法打开流：达到重定向限制，在第 4 行的 /home/admin/public_html/art/art.php 中中止
> 
> 警告：simplexml_load_file() [function.simplexml-load-file]：I/O 警告：未能加载外部实体“ [http://www.server.com/search/music.xml?key=key&type=songs&p1=All% 20Things%20New&p2=Elevation%20Worship](http://www.server.com/search/music.xml?key=key&type=songs&p1=All%20Things%20New&p2=Elevation%20Worship) " 在 /home/admin/public_html/art/art.php 的第 4 行
> 
> 致命错误：在第 6 行的 /home/admin/public_html/art/art.php 中的非对象上调用成员函数 xpath()

我的代码是：

```
<?php
function errorHandler($n, $m, $f, $l) {
    header('Location: blank.png');
}

set_error_handler('errorHandler');

$url = 'http://REMOTESERVER/search/music.xml?key=KEY&type=songs&p1=' . htmlspecialchars($_GET["track"]) . '&p2=' . htmlspecialchars($_GET["artist"]) . '';
$xml = simplexml_load_file($url);

$img = $xml->xpath('//image200');

$large = (string)$img[0];

header("Location:".urldecode($large));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:36:52.393

您看到的错误与 SimpleXML 本身无关，它是 PHP 的透明远程文件访问机制在抱怨。`file_get_contents($url);`您可以通过使用[`simplexml_load_file($url)`基本上是`simplexml_load_string( file_get_contents($url) )`]的简写创建一个更简单的测试用例来验证这一点

该特定错误消息表明您尝试加载的 URL 正在提供 HTTP 重定向（状态代码`301`, `302`）以转发到另一个 URL，然后该 URL 正在转发到另一个，依此类推。要么有一个长链，要么远程服务器配置错误，因此它正在创建一个无限循环。

请注意，这样的重定向可能取决于请求的属性，因此在浏览器中加载它的行为可能不会完全相同。但是，如果确实如此，您应该能够在 Firebug 等浏览器调试工具的 Net 面板中看到它。

可能的解决方案：

*   计算出最终 URL 应该是什么并请求它，而不是重定向链的开始
*   要求远程服务器的维护者检查他们的配置并减少链接重定向的数量
*   使用 PHP 的[cURL 函数](http://uk.php.net/manual/en/book.curl.php)显式获取数据，而不是将 URL 视为文件名；这将使您可以完全控制诸如重定向处理之类的选项，但显然要正确处理要复杂一些

# user-interface - Jetty 关闭程序

> ID：14695668
> 
> 赞同：0
> 
> 时间：2013-02-04T21:08:18.643
> 
> 标签：user-interface, jetty

我正在尝试创建一个 GUI 界面来启动和停止具有不同返回字符串的 Jetty 服务器。目前我已经编程了一个开始和停止按钮，它将“Hello World”返回到 localhost:8080。我的代码发布在下面，是的，我有导入，删除以简化它。

```
public class JettyGUI extends AbstractHandler{

private static Server server = new Server(8080);
private static boolean running = false;

private static void gui() {

    JFrame frame = new JFrame("Jetty");
    JButton start_button = new JButton("Start");
    JButton stop_button = new JButton("Stop");
    JPanel panel = new JPanel();

    panel.setBackground(Color.BLACK);

    panel.add(start_button);
    panel.add(stop_button);

    frame.add(panel);

    frame.setSize(300, 150);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

    start_button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            System.out.println("Start pressed.");
            startServer();
        }
    });
    stop_button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            System.out.println("Stop pressed.");
            JettyGUI.stopServer();
        }
    });

}

private static void stopServer() {
    if(running == false){
        System.err.println("Server is already running!");
    }
    else{
        try {
            server.stop();
        } 
        catch (Exception ex) {
            System.out.println(ex);
        }
    }
    System.out.println("Server stopped!");
}

private static void startServer() {
    if(running == true){
        System.err.println("Server is already running!");
    }
    else{
        try{
            server.setHandler(new JettyGUI());
            server.start();
            server.join();
        }
        catch(Exception ex){
            System.out.println(ex);
        }
      System.out.println("Server started!");  
    }
}

    public void handle(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

    response.setContentType("text;charset=utf-8");
    response.setStatus(HttpServletResponse.SC_OK);
    baseRequest.setHandled(true);
    response.getWriter().println("Hello World!"); //print this text

}

public static void main(String[] args) {

    gui();

}

} 
```

当我按下“开始”按钮时，Jetty API 似乎接管了我的应用程序，我无法再按下“停止”按钮。谁能告诉我一种绕过这个或以不同方式编程的方法？

谢谢！:) -亨利哈里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:18:56.067

这`server.join();`将使当前线程等待，直到服务器停止。

把它注释掉，作为一个 GUI 程序你不需要它。

# google-maps - 添加多个点后聚焦谷歌地图

> ID：14695669
> 
> 赞同：0
> 
> 时间：2013-02-04T21:08:25.760
> 
> 标签：google-maps, google-maps-api-3

> **可能重复：**
> [中心地图和缩放以适应屏幕上的标记](https://stackoverflow.com/questions/13002424/center-map-and-zoom-to-fit-the-markers-on-the-screen)

我只是在写一个使用谷歌地图的应用程序。该应用程序将多个点添加到地图中。添加后，我希望能够将地图集中在这些多个点上，但不知道如何。

到目前为止，我的倾向是执行以下操作：

1.  添加点时，跟踪最小经度、最大经度、最小纬度、最大纬度
2.  计算平均经度，平均纬度

所以..现在我知道如何找到我的地图中心了。

**有谁知道我将如何计算缩放？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:23:36.663

将位置添加到空的[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)对象。

在结果边界上调用[google.maps.Map.fitBounds 。](https://developers.google.com/maps/documentation/javascript/reference#Map)

伪代码（未经测试，假设您的标记位于名为 gmarkers 的范围内的数组中，假设您的 google.maps.Map 对象称为“map”）：

```
var bounds = new google.maps.LatLngBounds();
for (var i = 0; i < gmarkers.length; i++) 
{
   bounds.extend(gmarkers[i].getPosition());
}
map.fitBounds(bounds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:26:40.470

如果您提前知道点（标记），而不是将所有中心的点设置为 setCenter 标记点并休息为标记并设置 Zoomlevel

如果您事先不知道点并且知道位置（例如特定的州或县或地区）而不是获取它的中心点获取它的纬度/经度并将该点设置为 setCenter 标记点，请相应地设置缩放级别并添加标记（点）。

# java - 从java中的用户输入填充对象数组

> ID：14695670
> 
> 赞同：0
> 
> 时间：2013-02-04T21:08:27.057
> 
> 标签：java

我正在尝试制作一个 Java 应用程序，该应用程序允许用户为超市制作目录，然后显示用户输入到目录中的所有产品。现在我在填充应该由用户输入填充的对象数组时遇到问题。输出应如下所示（用户输入**粗体**）：

输入产品描述（或 # 停止）：**Condensed Powdered water** 输入产品代码：**P3487** 输入产品单价：**$2.50** 输入产品单位短语：**每包**

输入产品描述（或 # 停止）：**Distilled Moonbeams** 输入产品代码：**K3876** 输入产品单价：**$3.00** 输入产品单位短语：**一打**

输入产品描述（或 # 停止）：**Anti-Gravity Pills** 输入产品代码：**Z9983** 输入产品单价：**$12.75** 输入产品单价：**60**

输入产品描述（或 # 停止）：**#**

您的目录：P3487，浓缩粉状水，每包 2.50 美元。K3876，蒸馏月光，3.00 美元一打。Z9983，反重力药丸，60 美元，12.75 美元。

我写的代码：2类1类：

```
public class Catalog {

private String description ; 
private String code ;
private double price ;
private String phrase ;

int counter = 0;

private Catalog [] list = new Catalog [100];

public Catalog (String productDescription , String productCode , double    productPrice , String productPhrase)
{
    description = productDescription;
    code = productCode;
    price = productPrice;
    phrase = productPhrase;
}

public void setDescription (String productDescription)
{
    description = productDescription;
}

public String getDescription ()
{
    return description;
}

public void setCode (String productCode)
{
    code = productCode;
}

public String getCode ()
{
    return code;
}

public void setPrice (double productPrice)
{
    price = productPrice;
}

public double getPrice ()
{
    return price;
}

public void setPhrase (String productPhrase)
{
    phrase = productPhrase;
}

public String getPhrase ()
{
    return phrase;
} 
```

第 2 类：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class CatalogTest {

/**
 * @param args
 * @throws IOException 
 */

public static void main(String[] args) throws IOException {
    // TODO Auto-generated method stub

    String name = null; 
    String code = null;
    double price = 0.0;
    String phrase = null;

    BufferedReader input = new BufferedReader (new InputStreamReader  (System.in));

    Catalog product = new Catalog(name,code,price,phrase);

    Catalog [] productsArray = new Catalog [100];

    for (int i = 0 ; i < productsArray.length ; i ++)
    {

        System.out.println("Enter product description (or # to stop): ");
        name = input.readLine();

        if (!("#".equals(name))) 
        {

            productsArray [i] = product;
            product.setDescription(name);

            System.out.println("Enter product code: ");
            code = input.readLine();
            productsArray [i] = product;
            product.setCode(code);

            System.out.println("Enter product unit price: ");
            price = Double.parseDouble(input.readLine());
            productsArray [i] = product;
            product.setPrice(price);

            System.out.println("Enter product unit phrase: ");
            phrase = input.readLine();
            productsArray [i] = product;
            product.setPhrase(phrase);

            productsArray [i] = new Catalog (name,code,price,phrase);

        }

        else 
        {
            System.out.println("Your Catalog:");

            System.out.printf("%s, %s,$%.2f   %s",product.getCode(),product.getDescription(),product.getPrice(),product
                    .getPhrase());
            break;
        }

    }

}
} 
```

我得到的输出（用户输入**粗体**）：输入产品描述（或#停止）： **冷凝水** 输入产品代码： **p3487** 输入产品单价： **2.50** 输入产品单位短语： **每包** 输入产品描述（或#停止)： **蒸馏月光** 输入产品代码： **k3876** 输入产品单价： **3** 输入产品单位短语： **一打** 输入产品描述（或 # 停止）： **#** 您的目录：k3876，蒸馏月光，3.00 美元一打

所以有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:20:23.453

这是有效的更新代码...

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class CatalogTest
{

    /**
     * @param args
     * @throws IOException
     */

    public static void main(String[] args) throws IOException
    {
        // TODO Auto-generated method stub

        String name = null;
        String code = null;
        double price = 0.0;
        String phrase = null;

        BufferedReader input = new BufferedReader(new InputStreamReader(
            System.in));

        Catalog product = new Catalog(name, code, price, phrase);

        Catalog[] productsArray = new Catalog[100];

        for (int i = 0; i < productsArray.length; i++)
        {

            System.out.println("Enter product description (or # to stop): ");
            name = input.readLine();

            if (!("#".equals(name)))
            {

                productsArray[i] = product;
                product.setDescription(name);

                System.out.println("Enter product code: ");
                code = input.readLine();
                productsArray[i] = product;
                product.setCode(code);

                System.out.println("Enter product unit price: ");
                price = Double.parseDouble(input.readLine());
                productsArray[i] = product;
                product.setPrice(price);

                System.out.println("Enter product unit phrase: ");
                phrase = input.readLine();
                productsArray[i] = product;
                product.setPhrase(phrase);

                productsArray[i] = new Catalog(name, code, price, phrase);

            }

            else
            {
                System.out.println("Your Catalog:");
                for (int j = 0; j < productsArray.length; j++)
                {
                    if(productsArray[j]!=null)
                    {
                        System.out.printf("%s, %s,$%.2f %s,",
                            productsArray[j].getCode(),
                            productsArray[j].getDescription(),
                            productsArray[j].getPrice(),
                            productsArray[j].getPhrase());
                    }
                }
                break;
            }

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:48:06.187

我没有详细说明已经给出的正确答案，但将来研究[ArrayLists](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)或[Vectors](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html)可能会有所帮助。当您不确定需要存储的项目数量时，两者都是更好的数据结构，因为它们是可增长的数据存储，即您不需要在初始化时定义它们的大小。

例如，在您最初的尝试中，您将`productsArray`大小定义为 100。如果用户想要输入 101 个项目怎么办？使用 Vector 可以解决这个问题，因为它可以动态地增长或缩小。

我是一名 3 年级软件开发学生，当我开始使用 Vectors over Arrays 时，由于 Vectors 提供的灵活性，编程问题变得更容易解决:)

# jquery - 为什么我的变量在第二个 if 语句中未定义？

> ID：14695673
> 
> 赞同：-2
> 
> 时间：2013-02-04T21:08:41.453
> 
> 标签：jquery, javascript

我试图在第一个语句的第二个语句中重用相同的变量，`if`我`if`收到警告说我的变量是`undefined`当我对其发出警报时。

我怎样才能让这个变量在第二条`if`语句中保留它的值？我只是复制部分代码让你看看我在说什么。我试图`foundRangeStart`在第二个 if 语句中使用 for `ESNEnd`，它以前在第一个`if`语句中使用过 for `ESNStart`。

为什么在第二个语句中`foundRangeStart`设置为？`undefined``if`

```
if ($(this).attr("id") == "ESNStart") {
    var esnStart = [];
    esnStart[0] = esn_to_num(enteredData);
    var item;
    var rangesFoundStart = [];

    rangesFoundStart[0] = -1; // Set defaut value as -1 for the corresponding entry in the "rangesFound" array
    for (var x in ranges) { // Inner loop over items in ranges object
        item = esnStart[0];
        if (item >= ranges[x].min && item <= ranges[x].max) {
            rangesFoundStart[0] = x;
        }
    }

    if (rangesFoundStart[0] >= 0) {
        foundRangeStart = rangesFoundStart[0];
    }

    if (foundRangeStart && foundRangeStart >= 0) {
        $("#STxModel").val(ranges[foundRangeStart].StxName);
        $("#TxSpacing").val(ranges[foundRangeStart].rtumodel);
    }
}
if ($(this).attr("id") == "ESNEnd") {
    var esnEnd = [];
    esnEnd[0] = esn_to_num(enteredData);
    var item;
    var foundRangeEnd;
    var rangesFound = [];
    rangesFound[0] = -1; // Set defaut value as -1 for the corresponding entry in the rangesFound array
    for (var x in ranges) { // Inner loop over items in ranges object
        item = esnEnd[0];
        if (item >= ranges[x].min && item <= ranges[x].max) {
            if (rangesFound[x] == foundRangeStart) {
                rangesFound[0] = x;
                var foundone = rangesFound[0] = x;
                alert(foundone + foundRangeStart);
            }
        } else {
            alert(alert_total);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:12:17.877

因为在那个控制路径中，`foundRangeStart`没有设置。

它似乎只设置在这里，在第一个`ESNStart`块中；

```
if ( rangesFoundStart[0] >= 0 ) {  
    foundRangeStart = rangesFoundStart[0];
} 
```

但是，如果该语句不等于，则不会执行该行`true`；

```
if ($(this).attr("id") == "ESNStart") { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:17:29.440

> 我正在尝试`foundRangeStart`在 ESNEnd 的第二个 if 语句中使用，该语句以前在 ESNStart 的第一个 if 语句中使用

不，它没有在第一个 if 语句中使用。如果第二个被执行，第一个没有被执行——这两个条件`$(this).attr("id") == "ESNStart"`和`$(this).attr("id") == "ESNEnd"`是互斥的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:14:54.593

```
 if ( rangesFoundStart[0] >= 0 ) {  
            foundRangeStart = rangesFoundStart[0];
         } 
```

您在条件内声明变量。如果 rangeFoundStart[0] 小于 0 怎么办？那么该变量将永远不会被声明。

您可以通过在条件之外声明 foundRangeStart 来解决此问题。

```
 var rangesFoundStart = [];
       var foundRangeStart;

            rangesFoundStart[0] = -1; // Set defaut value as -1 for the corresponding entry in the "rangesFound" array
            for (var x in ranges) { // Inner loop over items in ranges object
                item = esnStart[0];
                if (item >= ranges[x].min && item <= ranges[x].max) {
                     rangesFoundStart[0] = x;
                }
            }

        if ( rangesFoundStart[0] >= 0 ) {  
            foundRangeStart = rangesFoundStart[0];
         } 
```

# css - 如何使用边距/填充水平对齐“n”个div？

> ID：14695674
> 
> 赞同：1
> 
> 时间：2013-02-04T21:08:43.020
> 
> 标签：css, html, alignment

我有以下 HTML：

```
 <div class="top_buttons">

    <div class="top_button">
        <img src="img/image1.png">
    </div>

    <div class="top_button">
        <a href="#">
            <img src="img/image2.png">
        </a>
    </div>

    <div class="top_button">
        <a href="#">
            <img src="img/image3.png">
        </a>
    </div>

</div> 
```

以下 CSS 完美运行：

```
.top_buttons{

    width: 100%;
    height: auto;

    margin: 0 auto;

    overflow: hidden;
}

 .top_button{

     float: left;
     width: 33.333%;/*Because I have 3 images with the same width, I want each to have 1/3 of the total width space available (mobile website)*/
 } 
```

当我想向内部 div（即图像的父级）添加一些边距和/或填充时，问题就来了。如果我为这些 div 添加边框/填充/边距，我设置的上述 33.333% 将不再起作用，因为显然每个“top_button” div 不仅包含图像，还包含添加到 div 的边框/填充/边距。

所以，我的临时解决方案是将这个百分比降低到 31% 左右。但是，根据手机的不同，屏幕右侧会留下或多或少的像素，因为我只是想用百分比来猜测 div 的长度以及额外的边框/填充/边距。我想要的是一个解决方案，即使我将边框/填充/边距设置为内部 div，我仍然可以使用 33.333%，因此我可以进行像素完美的水平对齐。

简而言之，**我如何才能水平对齐 'n' div，因为我知道 div 也会有边框/填充/边距**，而且我***不***知道“top_button * *s* *” div 的总宽度（因为显示的宽度会有所不同取决于手机屏幕）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:13:21.757

当前的标准盒模型行为是您在问题中描述的。如果您定义宽度，这并不意味着元素将仅与宽度值一样宽。而是将填充等添加到其中。

为了实现更直观的行为，您需要一个替代的盒子模型。现在，如果您定义宽度，您实际上是用所有可能的填充、边框等来定义宽度。

下面的 CSS 正是您需要的。请注意，此 CSS 将为所有元素启用备用框模型。您也可以只为您需要的元素定义它们，尽管您不必在一个项目中使用两种不同的方法。

```
*, ::before, ::after {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:13:59.093

使用盒子大小。Box-sizing 允许您添加填充和边框，而不必担心破坏宽度。但是，边距仍会破坏对齐方式。为了计算边距，您需要从元素的宽度中减去边距。

```
.top_button{
     float: left;
     width: 33.333%;
     -moz-box-sizing: border-box;      
     -webkit-box-sizing: border-box; 
     box-sizing: border-box; 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:23:02.100

如果您遇到与 box-sizing 相关的跨浏览器兼容性问题，这里有一个替代方案。每个按钮都需要一个额外的“内部”div，您可以在其中应用边距。

HTML：

```
 <div class="top_button">
      <div class="top_button_contents">
        <a href="#">
          <img src="img/image2.png" /> some button text for testing
        </a>
      </div>
    </div> 
```

CSS：

```
.top_button {
  float: left;
  width: 33.333%;
}

.top_button .top_button_contents {
  position:relative;
  margin:0px 10px 0px 0px;
  background-color:#CCC;
}

.top_button.last .top_button_contents {
 margin:0px;
} 
```

这是一个[jFiddle](http://jsfiddle.net/AKAYW/)。

# c# - Visual Studio C#数据库错误

> ID：14695679
> 
> 赞同：0
> 
> 时间：2013-02-04T21:08:57.080
> 
> 标签：c#, sql, csv

我正在 Visual Studio 中创建一个搜索框，将 csv 文件作为数据库进行查看，sql 查询有效但不完全。如果我将 sql 数据库设置为：

```
SELECT Number_Plate, Regstered_Keeper, Make, Model, Year_Of_Make, Colour, Engine_Size, Transmission, Fuel_Type FROM 'tabledata.csv' WHERE Number_Plate = 'B9BOL' 
```

它可以工作，但只能查看特定的车牌，但我的代码是：

```
"SELECT Number_Plate, Regstered_Keeper, Make, Model, Year_Of_Make, Colour, Engine_Size, Transmission, Fuel_Type FROM` `'tabledata.csv' WHERE Number_Plate = "+ textBox1.Text 
```

这不起作用，它在执行时显示以下错误：

```
ERROR [42000] [Microsoft][ODBC Text Driver] Invalid SQL statement; expected 'DELETE', 'INSERT', 'PROCEDURE', 'SELECT', or 'UPDATE'. 
```

在visual studio中，代码如下：

```
private void Show_Click(object sender, EventArgs e)
 {
 Data.Items.Clear();
 var ta = new CarsDataSetTableAdapters.tabledata_csvTa…

Make.DataSource = ta.GetDataByPlate();
 Make.DisplayMember = "Make";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:21:25.173

Looks like you're missing some quotes from around your where clause:

```
"SELECT  Number_Plate, 
         Regstered_Keeper, 
         Make, 
         Model, 
         Year_Of_Make, 
         Colour, 
         Engine_Size, 
         Transmission, 
         Fuel_Type 
FROM     'tabledata.csv' 
WHERE    Number_Plate = '"+ textBox1.Text + "'" 
```

# c++ - C/C++ 后增/减和函数调用

> ID：14695681
> 
> 赞同：2
> 
> 时间：2013-02-04T21:09:06.903
> 
> 标签：c++, c, function, call, post-increment

> **可能重复：**
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

我正在使用 Microsoft Visual C++。看下面的例子：

```
int n = 5;
char *str = new char[32];
strcpy(str, "hello world");
memcpy(&str[n], &str[n+1], 6+n--);
printf(str);
// output is "hell world" 
```

所以出乎意料的是，我的编译器生成的代码**首先**递减 n，然后执行 memcpy。以下来源将做我期望发生的事情：

```
int n = 5;
char *str = new char[32];
strcpy(str, "hello world");
memcpy(&str[n], &str[n+1], 6+n);
n--;
printf(str);
// output is "helloworld" 
```

首先，我试图向自己解释。最后一个参数首先被压入堆栈，因此可以先评估它。但我真的相信在下一个分号之后评估后递增/递减保证。

所以我进行了以下测试：

```
void foo(int first, int second) {
    printf("first: %i / second: %i", first, second);
}
int n = 10;
foo(n, n--); 
```

这将输出“第一：10 / 第二：10”。

所以我的问题是：这种情况是否有任何明确的行为？有人可以指出我描述的文件吗？有没有发现编译器的bug~~OO~~？

该示例已简化为不再有意义，它只是说明了我的问题并且可以自行运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:11:57.987

有两个相关的问题在起作用。首先，函数参数的执行顺序是**未指定**的。保证的是在进入函数体之前所有的都被执行。其次，这是**未定义**的行为，因为您正在更改和阅读`n`这些表达式之间没有任何序列点。

# lucene - Lucene.net GetFieldQuery 与 TermQuery

> ID：14695682
> 
> 赞同：1
> 
> 时间：2013-02-04T21:09:08.067
> 
> 标签：lucene

使用 Lucene 的标准分析器。有问题的标题字段未存储，已分析。查询如下：

```
title:"Some-Url-Friendly-Title" 
```

在 Luke 中，这个查询被正确地重写为：

```
title:"some url friendly title" (- replaced by whitespace, everything lowercased). 
```

我*认为*Lucene.net 版本将是：

```
new TermQuery(new Term("title","Some-Url-Friendly-Title")) 
```

但是，不返回任何结果。

然后我尝试了：

```
_parser.GetFieldQuery("title","Some-Url-Friendly-Title") 
```

它按预期工作！

两个查询均通过以下方式执行：_searcher.Search([query object], [sort object])

有人可以指出我正确的方向，看看 TermQuery 和 _parser.GetFieldQuery() 之间的区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:18:05.497

A[`TermQuery`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/TermQuery.html)比通过查询解析器运行查询要简单得多。它不仅没有小写，而且无法分解连字符的术语，甚至没有被标记化。它只是搜索您告诉它要查找的术语。这意味着它正在您的索引中寻找术语“Some-Url-Friendly-Title”作为单个未标记的关键字。我假设您正在使用分析器，因此很可能不存在此类令牌。

更进一步，如果您一直在搜索“Some Url Friendly Title”作为术语文本，您仍然不会想出任何东西，因为它正在寻找“Some Url Friendly Title”作为单个标记，而不是作为索引中的四个标记（或更确切地说，术语）。

如果您查看[标准查询解析器](http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/flexible/standard/StandardQueryParser.html)在解析查询时生成的内容，您会发现 TermQueries 只是它用于生成完整查询的构建块之一，还有[BooleanQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/BooleanQuery.html)，可能还有[PhraseQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/PhraseQuery.html)、[PrefixQueriy](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/PrefixQuery.html)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:35:12.250

在 Lucene.Net 3.0.3 版中，GetFieldQuery 由于它的保护修饰符而无法访问。采用

```
MultiFieldQueryParser.Parse(searchText, field) 
```

反而。

# python - 从配置文件中获取值的最佳方法是什么？

> ID：14695683
> 
> 赞同：0
> 
> 时间：2013-02-04T21:09:08.693
> 
> 标签：python, python-3.x, python-2.7, configparser

我想从配置文件中获取 15 个值并将它们存储在单独的变量中。

我在用

```
from ConfigParser import SafeConfigParser

parser = SafeConfigParser()
parser.read(configFile) 
```

这是一个非常好的图书馆。

**选项1**

如果我更改变量的名称并希望它与配置文件条目匹配，我必须编辑函数中的相应行

```
def fromConfig():
    #open file
    localOne = parser.get(section, 'one')
    localTwo = parser.get(section, 'two')
    return one, two

one = ''
two = ''
#etc
one, two = fromConfig() 
```

**选项 #2**

更清楚地看到变量从哪里获取它们的值，但是我会为每个变量打开和关闭文件

```
def getValueFromConfigFile(option):
    #open file
    value = parser.get(section, option)
    return value

one = getValueFromConfigFile("one")
two = getValueFromConfigFile("two") 
```

**选项#3**

这个没有多大意义，因为我必须有另一个包含所有变量名的列表，但函数更简洁。

```
def getValuesFromConfigFile(options):
    #open file
    values = []
    for option in options:
        values.append(parser.get(section, option))

    return values

one = ''
two = ''
configList = ["one", "two"]
one, two = getValuesFromConfigFile(configList) 
```

**编辑：** 这是我尝试读取文件一并将所有值存储在字典中，然后尝试使用他的值。我有一个多行字符串，我正在使用

```
%(nl)s to be a new line character so then when I get the value 
message = parser.get(section, 'message', vars={'nl':'\n'}) 
```

这是我的代码：

```
from ConfigParser import SafeConfigParser

def getValuesFromConfigFile(configFile):
    ''' reads a single section of a config file as a dict '''
    parser = SafeConfigParser()
    parser.read(configFile)
    section = parser.sections()[0]

    options = dict(parser.items(section))

    return options

options = getValuesFromConfigFile(configFile)

one = options["one"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:28:44.860

要从单个部分获取值作为 dict：

```
options = dict(parser.items(section)) 
```

您可以像往常一样访问单个值：`options["one"]`, `options["two"]`. 在 Python 3.2+ 中，configparser 本身提供了类似 dict 的访问。

为了灵活性，支持从各种源格式更新配置和/或集中配置管理；您可以定义封装解析/访问配置变量的自定义类，例如：

```
class Config(object):
    # ..    
    def update_from_ini(self, inifile):
        # read file..
        self.__dict__.update(parser.items(section)) 
```

在这种情况下，单个值可用作实例属性：`config.one`, `config.two`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:59:07.367

一个解决方案也可以使用字典和 json，这可以使事情变得非常简单和可重用

```
import json

def saveJson(fName, data):
    f = open(fName, "w+")
    f.write(json.dumps(data, indent=4))
    f.close()

def loadJson(fName):
    f = open(fName, "r")
    data = json.loads(f.read())
    f.close()
    return data

mySettings = {
    "one": "bla",
    "two": "blabla"
}

saveJson("mySettings.json", mySettings)
myMoadedSettings = loadJson("mySettings.json")

print myMoadedSettings["two"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:19:47.423

As a possible solution:

```
module_variables = globals() # represents the current global symbol table
for name in ('one', 'two'):
    module_variables[name] = parser.get(section, name)
print one, two 
```

# scala - 如何将 Play 应用程序拆分为多个部分

> ID：14695684
> 
> 赞同：2
> 
> 时间：2013-02-04T21:09:12.877
> 
> 标签：scala, playframework-2.0, sbt

我正在尝试将我的 Play 应用程序拆分为[官方文档](http://www.playframework.org/documentation/2.0/SBTSubProjects)中描述的几个模块……但我想知道是否有完整的示例……或更全面的教程。任何帮助将非常感激 ：-）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:39:17.740

如果您查看命令行，在您的根项目目录中开始播放，键入`projects`，您将看到拆分的项目。

当前活跃的游戏是带有星号的游戏。您可以使用 切换项目`porject yourProjectName`。

您可以将文档“将您的 Web 应用程序拆分为多个部分”中的示例可视化，如下所示：
![在此处输入图像描述](../Images/c1a8c40ab2921caa4157e6ce73797e7b.png)

我想说，如果您使用 play 导航到 main，您可以同时启动：网站和管理员。

# php - 如何从 mysql 数据库中的新照片动态/ajax 重新加载照片？

> ID：14695696
> 
> 赞同：0
> 
> 时间：2013-02-04T21:09:41.380
> 
> 标签：php, javascript, html, mysql, ajax

我在从保存文件名的 mysql 数据库中提取的页面上嵌入了一个图像。我想做的是使用javascript调用让我们说pump.php在数据库中引入绝对下一个图像 - 有点像幻灯片放映，然后动态地将其写入img src。我很接近但很难过。非常感谢任何帮助，我搜索并搜索！这是 div/嵌入图像：

```
<div id="image_holder"><img id=target src=./watch/<? echo $frame; ?> /></div> 
```

然后我有这个javascript，在1000个时钟滴答之后调用函数kitty。Kitty 应该刷新包含 php 和 ID 号的 pump.php（假设它以 1 开头，第一条记录，然后动态写入新图像名称上方的 HTML：

```
 setInterval("kitty()",1000);

 function kitty(){

 $.get('pump.php?id=<? echo $id; ?>', 
  { lastupdate: 1 }, 
  processUpdate, 'html');
  }, 1000 ) };

 var target_image = document.getElementById("target");
  target_image.src = <? echo $image ?>; 
} 
```

这是pump.php（减去数据库连接信息），它应该提取ID =脚本当前ID的图像，并将ID加一，这样我们下次可以从2开始！

```
$result = mysql_query( "SELECT * FROM frame_database where id=$id " );
$data = mysql_fetch_array($result); 
$image = $data["image"]; 
$id++; 
```

你们有什么感想？我是树上的faaaaaaaaaaaar 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:20:52.303

我第一眼看到的第一个问题是您从 PHP 调用中填充图像 src。您要做的是开始对服务器上的某个文件进行 ajax 调用（用 PHP、Java 或服务器支持的其他语言编写）。由于这是一个异步调用，因此您必须为成功和失败提供一个回调函数（在 java 脚本中）。

成功函数可能会收到一个字符串或一个 json 对象，其中包含图片的 uri。然后你必须更改图像 src ......我想应该是它。

我建议使用像 jQuery 这样的框架来简化整个 ajax 的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:48:01.723

首先，pump.php 需要向脚本返回数据，以便脚本可以获取图像名称。

```
$result = mysql_query( "SELECT * FROM frame_database where id=$id " );
$data = mysql_fetch_array($result); 
$image = $data["image"]; 
$id++;
echo json_encode(array('image'=>$image, 'id'=>id)); 
```

然后在 kitty() 你可以这样做：

```
$.get('pump.php?id=<? echo $id; ?>', 
      { lastupdate: 1 }, 
      function(data){
            var res = JSON.parse(data);
            var target_image = document.getElementById("target");
            target_image.src = res.image; 
      }, 'html'); 
```

请注意，您可能希望将该`<? echo $id; ?>`部分更改为 kitty() 中的 get 调用可以更新的 javascript 变量。

希望这可以帮助。

# php - 订单视图页面上的 Magento Track 发货链接未显示

> ID：14695701
> 
> 赞同：0
> 
> 时间：2013-02-04T21:10:02.357
> 
> 标签：php, magento, magento-1.7

我无法让链接显示在管理端！我的客户对它的丢失感到非常恼火。有任何想法吗？

文件 adminhtml/default/default/template/sales/order/view/tab/info.phtml 具有以下代码：

```
 <?php  if ($_order->getTracksCollection()->count()) : ?>
                    <a href="#" id="linkId" onclick="popWin('<?php echo $this->helper('shipping')->getTrackingPopupUrlBySalesModel($_order) ?>','trackorder','width=800,height=600,resizable=yes,scrollbars=yes')" title="<?php echo $this->__('Track Order') ?>"><?php echo $this->__('Track Order') ?></a>
                    <br/>
                    <?php endif; ?> 
```

adminhtml/default/ **your_template_name** /template/sales/order/view/tab/info.phtml‌​也有相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:57:48.420

我发现以前由另一个程序员编写的程序没有将跟踪号从仓库上传到管理员中的正确位置。它将它添加到评论中，但没有添加到发货部分。一旦我在程序中修复了一些代码以添加跟踪号，所有相关问题都得到了解决。如果您需要帮助，请随时与我联系。

# c# - 如何使 DNN 文本字段只读

> ID：14695705
> 
> 赞同：1
> 
> 时间：2013-02-04T21:10:10.453
> 
> 标签：c#, asp.net, dotnetnuke, dotnetnuke-6

如何在 DotNetNuke 中将文本字段设为只读？

我有这个代码，但它不工作：

```
DnnFormTextBoxItem.Enabled = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:15:57.247

在 DotnetNuke 中，我只将 dnn 标记用于文本编辑器，文本字段我使用 asp:TextBox 标记，它可以禁用或设置为只读。但是，如果您使用 dnn:Texteditor 则无法禁用或将其设置为只读。它只能设置为可见或不可见。

在 DotnetNuke 中禁用文本编辑器的另一种解决方案是从文本编辑器中检索值并将其粘贴到标签上，然后隐藏文本编辑器。

我在 C# 中有一个简短的代码。想象一下，您的页面中有一个 TextEditor1 和 Label1 控件，它们并排放置，但 Label1 有一个空值。有为 DNN TextEditor 设置属性的代码：

```
string teValue = TextEditor1.Value;
Label1.Text = teValue;
TextEditor1.Visible = false; 
```

在上面的代码中，您将在标签 (Label1) 中显示 TextEditor1 的值，然后隐藏 TextEditor1 控件，这样用户只能看到 DNN TextEditor 的内容，但在进行一些回发后不再能够对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:08:52.253

我见过人们使用

```
<dnn:DnnFormLiteralItem> 
```

在我的模块中，我使用标准

```
<asp:TextBox> 
```

# c# - 在 asp.net mvc 应用程序中使用 xml 数据填充下拉列表

> ID：14695709
> 
> 赞同：0
> 
> 时间：2013-02-04T21:10:17.643
> 
> 标签：c#, xml, asp.net-mvc, linq-to-xml

我有一个 xml 文件，想用它来填充 asp.net mvc 应用程序中的下拉列表控件

xml 看起来像这样

```
 <?xml version="1.0" encoding="utf-8" ?>
 <Processes>
<Process>
    <id>1</id>
    <ConfigFile>Process1.xml</ConfigFile>
</Process>
<Process>
    <id>2</id>
    <ConfigFile>SecondProcess.xml</ConfigFile>
</Process>
<Process>
    <id>3</id>
    <ConfigFile>Process3.xml</ConfigFile>
</Process>
</Processes> 
```

这就是我到目前为止所做的：谢谢你们

```
 IEnumerable<SelectListItem> process = from proc in         

                                XDocument.Load("Processes.xml").Descendants("Process")  

                                              select new SelectListItem
                                              {

                                                  Text = (string)proc.Element("ConfigFile")

                                              };
        ViewBag.process = process; 
```

现在我想在下拉列表项选择的事件上做点什么打开一个带有文本框的新网页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:15:01.557

尝试读取 XML 并从 XML 中获取 List 对象，然后将其与下拉框绑定。那应该工作！检查 XMLReader 以读取 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:16:43.260

控制器：

```
model.Processes = from p in xdoc.Descendants("Process")
                  let id = (int)p.Element("id")
                  select new SelectListItem 
                  {
                     Selected = (id == model.ProcessId),                    
                     Text = (string)p.Element("ConfigFile"),
                     Value = id.ToString()
                  }); 
```

看法：

```
@Html.DropDownList(m => m.ProcessId, Model.Processes) 
```

# android - 保存的图像太小为什么？

> ID：14695710
> 
> 赞同：1
> 
> 时间：2013-02-04T21:10:28.507
> 
> 标签：android, image

我想用相机拍照并将其保存到图片文件夹中......我唯一无法解决的是为什么我的图像保存在一个小尺寸......

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(i, TAKE_PICTURE);

protected void onActivityResult(int requestCode, int resultCode, Intent imageReturned) {
    super.onActivityResult(requestCode, resultCode, imageReturned);

    switch(requestCode) {
        case TAKE_PICTURE:
            if(resultCode == RESULT_OK)
            { 
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                photo.compress(Bitmap.CompressFormat.PNG, 100, bytes);                  

                File f = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)+ File.separator + "test3.png");
                try {
                    f.createNewFile();
                    //write the bytes in file
                     FileOutputStream fo = new FileOutputStream(f);
                     fo.write(bytes.toByteArray());
                     fo.flush();
                     // remember close de FileOutput
                     fo.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }    
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T21:12:25.087

您应该考虑阅读文档：

[http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)

它总是给你一个较小的图像，除非你将它设置为给你全尺寸：

## 直接来自开发站点

> 调用者可能会传递一个额外的 EXTRA_OUTPUT 来控制该图像将被写入的位置。如果 EXTRA_OUTPUT 不存在，则在额外字段中将小尺寸图像作为位图对象返回。这对于只需要小图像的应用程序很有用。如果存在 EXTRA_OUTPUT，则将全尺寸图像写入 EXTRA_OUTPUT 的 Uri 值。

# sql - 带数组的 Sql Server 2008

> ID：14695713
> 
> 赞同：2
> 
> 时间：2013-02-04T21:10:37.097
> 
> 标签：sql, sql-server, sql-server-2008

我的 sql 中有两个表：

用户：

```
id    name     roleid
1     David    1
2     Sean     2
3     Joe      1 
```

角色：

```
roleid    desc
1         copy
2         delete
3         move 
```

现在我使用这个 cmd 来选择具有用户权限的用户

```
SELECT * FROM Users u INNER JOIN Roles r ON u.roleid = r.roleid 
```

现在我想知道是否可以构建 SQL 表（角色表），它将是每个用户的动态角色 ID 数。就像是：

用户：

```
id    name     roleid roleid2 roleid3
1     David    1      2       3
2     Sean     2   
3     Joe      1      3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:03:20.830

使用[关联实体](https://en.wikipedia.org/wiki/Associative_entity)`Users`来处理和之间的多对多关系`Roles`。表中的复合主键`UserRole`将防止角色的重复分配，并且引用`Users`and`Roles`表的外键将保持引用完整性。

有关示例实现，请参阅[SQL fiddle](http://www.sqlfiddle.com/#!3/db702/4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:26:15.027

首先，我建议你使用多对多关系。意思是三表：UsersRoles(userid,roleid) 其次，在典型的SQL语句中创建动态列数是不可能的。但它可能通过使用存储过程。

这是工作示例 [sqlfiddle](http://www.sqlfiddle.com/#!3/311fc/2)

# html - 选择 tr 系列的每个最后一个元素

> ID：14695717
> 
> 赞同：0
> 
> 时间：2013-02-04T21:10:58.940
> 
> 标签：html, css, css-selectors

首先，我无法控制标记，我只是对其进行样式设置。

我有一个包含一系列行的表，有些行有一个连续顺序的类。我已经能够选择该系列的第一个元素，但无法选择最后一个。

有任何想法吗？

这是一个例子：

```
<table>
    <tr class="parent">
        <td></td>
    </tr>
    <tr class="parent">
        <td></td>
    </tr>
    <tr class="child">
        <td></td>
    </tr>
    <tr class="child">
        <td></td>
    </tr>
    <tr class="parent">
        <td></td>
    </tr>
    <tr class="child">
        <td></td>
    </tr>
    <tr class="child">
        <td></td>
    </tr>
    <tr class="child">
        <td></td>
    </tr>
    <tr class="parent">
        <td></td>
    </tr>
</table> 
```

我用于选择每个子系列的第一个元素的 CSS 是：

```
table tr.parent + tr.child 
```

我不能使用 jQuery！！！！这必须是纯 CSS！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:17:09.670

如果您的浏览器支持，您可以使用 CSS 3 选择器（请参阅[http://caniuse.com/#feat=css-sel3](http://caniuse.com/#feat=css-sel3)）

根据[W3C 文档](http://www.w3.org/TR/selectors/)，您可以使用以下内容：

```
tr.parent:last-of-type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:17:35.457

使用 :last-child 选择器。例子：

```
table tr:last-child 
```

这将选择每个 tr ，它是其父元素中的最后一个元素；在这种情况下，`tr`表中的最后一个。有关它的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/:last-child](https://developer.mozilla.org/en-US/docs/CSS/:last-child)

是相邻的`+`子选择器，在您的示例中，将选择紧接在它之前的任何`tr.parent`同级`tr.parent`。有关它的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)

# python - pexpect telnet 进入一个设备，然后从那里到另一个

> ID：14695718
> 
> 赞同：0
> 
> 时间：2013-02-04T21:11:07.940
> 
> 标签：python, pexpect

我正在尝试使用 pexpect 远程登录到一个设备，然后从该设备远程登录到另一个设备，然后在第二个设备上输出命令的结果，但我无法。这是我写的脚本和我得到的错误

我将非常感谢帮助。谢谢

```
import pexpect

child = pexpect.spawn('telnet 192.168.2.45');

child.expect('assword:');
child.sendline('getin');

child.expect('AS-C5350-02>');
child.sendline('telnet 192.168.1.2'); 
child.expect('\nTrying 192.168.1.2 ... Open\n\n\nUser Access Verification\n nPassword:');
child.sendline('cisco'); 
child.expect('ipipgw01>'); 
child.sendline('sh clock');
child.sendline('exit');

child.expect(pexpect.EOF);

print child.before; 
```

这是我不断收到的错误

```
Traceback (most recent call last):
  File "expect_telnetback.py", line 14, in <module>
  child.expect('\nTrying 192.168.1.2 ... Open\n\n\nUser Access Verification\n    \nPassword:');
  File "/usr/lib/python2.6/dist-packages/pexpect.py", line 1311, in expect
  return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
  File "/usr/lib/python2.6/dist-packages/pexpect.py", line 1325, in expect_list
  return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize)
  File "/usr/lib/python2.6/dist-packages/pexpect.py", line 1409, in expect_loop
  raise TIMEOUT (str(e) + '\n' + str(self))
  pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().
 <pexpect.spawn object at 0xb7752a2c>
version: 2.3 ($Revision: 399 $)
command: /usr/bin/telnet
args: ['/usr/bin/telnet', '192.168.2.45']
searcher: searcher_re:
0: re.compile("
Trying 196.192.7.14 ... Open

User Access Verification

Password:")
buffer (last 100 chars): telnet 192.168.1.2
Trying 192.168.1.2 ... Open

User Access Verification

Password: 
before (last 100 chars): telnet 192.168.1.2
Trying 192.168.1.2 ... Open

User Access Verification

Password: 
after: <class 'pexpect.TIMEOUT'>
match: None
match_index: None
exitstatus: None
flag_eof: False
pid: 26275
child_fd: 3
closed: False
timeout: 30
delimiter: <class 'pexpect.EOF'>
logfile: None
logfile_read: None
logfile_send: None
maxread: 2000
ignorecase: False
searchwindowsize: None
delaybeforesend: 0.05
delayafterclose: 0.1
delayafterterminate: 0.1 
```

# jquery - 模型对话框中的 .NET MVC 和 jQuery-UI 表单

> ID：14695723
> 
> 赞同：3
> 
> 时间：2013-02-04T21:11:30.733
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我正在努力弄清楚为什么会遇到这个问题。我使用 jQuery-ui 模型对话框作为更新数据的弹出表单。在我尝试在包含实际表单的对话框 div 中放置一个 div 之前，这工作得很好而且很花哨。打开模式工作正常，但是当我按下“取消”按钮时，我在 javascript 控制台中收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'dialog' 
```

此外，窗户永远不会关闭。最后，如果我按下模态框右上角的“X”按钮，窗口会正常关闭，但是当我再次尝试打开模态框时，我会得到同样的错误。

以下是相关代码：

视图中的 div：

```
<div id="TacticInstanceModal" title="Update Tactic">
    <div id="addEditTacticsInstanceContent">
    </div>
</div> 
```

用于初始化对话框并填充内部 div 的 Javascript：

```
var addEditTacticInstance = '@Url.Action("Edit", "TacticInstance")';
$('#updateTacticInstanceButton').live("click", function () {
    $('#TacticInstanceModal').dialog({
        resizable: false,
        modal: true,
        buttons: {
            Save: function () {
                $(this).dialog("close");
                SaveTacticInstance();
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    $.get(addEditTacticInstance,
        { id: $(this).parent().parent().find('.tacticInstanceIdField').val() },
        function (data) {
            $('#addEditTacticsInstanceContent').html(data);
        });
}); 
```

加载部分视图的操作：

```
public ActionResult Edit(int id = 0)
    {
        try
        {
            TacticInstance ti = null;

            if (id != 0)
            {
                ti = tacticInstanceRepository.GetSingle(x => x.TacticInstanceId == id);
                ti.Tactic = tacticRepository.GetSingle(t => t.TacticId == ti.TacticId);
            }
            else
            {
                ti = new TacticInstance();
                ti.TacticInstanceId = 0;
            }

            TacticInstanceViewModel tacticInstance = new TacticInstanceViewModel
            {
                TacticId = ti.TacticId,
                TacticInstanceId = ti.TacticInstanceId,
                StartDate = ti.StartDate,
                EndDate = ti.EndDate,
                CompletedDate = ti.CompletedDate,
                PropertyEnrollmentId = ti.PropertyEnrollmentId,
                TacticName = ti.Tactic.Name

                //TODO: Implement Assets
            };

            return PartialView("_AddEdit", tacticInstance);
        }
        catch (EntityException e)
        {
            ErrorSignal.FromCurrentContext().Raise(e);
            return View("Error");
        }
        catch (Exception ex)
        {
            ErrorSignal.FromCurrentContext().Raise(ex);
            return View("Error");
        }
    } 
```

局部视图：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    @Html.Hidden("TacticInstance_TacticId", @Model.TacticId)
    @Html.Hidden("TacticInstance_InstanceId", @Model.TacticInstanceId)
    @Html.Hidden("TacticInstance_PropertyEnrollmentId", @Model.PropertyEnrollmentId)

   <div class="editor-label">
        @Html.LabelFor(model => model.TacticName, new { @style= "font-weight:bold" } )
    </div>
    <div class="editor-field">
        @Html.Label("TacticInstance_Name", Model.TacticName.ToString(), new { id = "TacticInstance_Name" })
    </div>

    <div class="editor-label">
       @Html.LabelFor(model => model.StartDate, new { @style= "font-weight:bold" } )
    </div>
    <div class="editor-field">
        @Html.Label("TacticInstance_StartDate", String.Format("{0:MM/dd/yyyy}", Model.StartDate), new { id = "TacticInstance_StartDate" })
    </div>

    <div class="editor-label">
          @Html.LabelFor(model => model.EndDate, new { @style= "font-weight:bold" } )
    </div>
    <div class="editor-field">
        @Html.Label("TacticInstance_EndDate", String.Format("{0:MM/dd/yyyy}", Model.EndDate), new { id = "TacticInstance_EndDate" })
    </div>
    <div class="editor-label">
         @Html.LabelFor(model => model.CompletedDate, new { @style= "font-weight:bold" } )
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.CompletedDate, new { id = "TacticInstance_CompletedDate" })
        @Html.ValidationMessageFor(model => model.CompletedDate)
    </div>
Html.EndForm();
} 
```

最奇怪的是，如果我在 javascript 中注释掉 ajax .get 但将生成的部分视图 HTML 复制/粘贴到视图上的 div 中，它就可以正常工作。这让我相信问题出在某个地方，但我尝试了多种注入 html 的技术，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:05:42.867

你不需要 Html.EndForm(); `</form>`这会在 html 输出的末尾产生一秒钟。还要检查您的部分视图中是否没有返回任何 javascript 库。

# visual-studio - 跟踪点中允许哪些表达式？

> ID：14695724
> 
> 赞同：19
> 
> 时间：2013-02-04T21:11:33.603
> 
> 标签：visual-studio, breakpoints, trace

在 Visual Studio 中创建跟踪点时（右键单击断点并选择“当命中...”），对话框中有此文本，强调我的：

> 您可以通过将变量**或其他表达式**放在花括号中来在消息中包含它的值...

允许哪些表达方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T21:12:34.023

Microsoft 的文档对于允许和不允许的确切细节相当少。下面的大部分内容都是在“立即”窗口中通过反复试验发现的。请注意，此列表适用于 C++，因为这就是我编写的代码。我相信在 C# 中，下面的一些禁止项目实际上是允许的。

可以评估大多数基本表达式，包括转换、设置变量和调用函数。

**一般限制**

*   仅支持 C 风格的强制转换；没有 static_cast、dynamic_cast、reinterpret_cast、const_cast
*   无法声明新变量或创建对象
*   不能使用重载的运算符
*   三元运算符不起作用
*   不能使用逗号运算符，因为 Visual Studio 使用它来[格式化表达式的结果](http://msdn.microsoft.com/en-us/library/75w45ekt.aspx)；对多个表达式使用多组大括号

**函数调用**

*   禁止调用：
    *   Lambdas（不能定义或调用它们）
    *   匿名命名空间中的函数
    *   按值获取对象的函数（因为您不能创建对象）
*   允许的调用：
    *   成员函数，常规和虚函数
    *   采用对基本类型或类类型的引用或指针的函数
    *   传递范围内变量
    *   使用“&”传递指向范围内变量的指针
    *   传递文字“true”、“false”、数字
    *   传递字符串文字，只要您不违反“无法创建对象”规则
    *   使用多组大括号调用具有一个跟踪点的多个函数

**变量赋值**

*   禁止：
    *   对象
    *   字符串文字
*   允许：
    *   具有基本类型的变量，值来自文字或其他变量
    *   转换后的内存地址：`{ *(bool*)(0x1234) = true }`
    *   寄存器：`{ @eip = 0x1234 }`

## 用例

从跟踪点调用函数可能非常强大。通过精心设置的功能和正确的调用，您可以绕过上面列出的大部分限制。这里有一些更具体的想法。

**强制一个 if**

非常简单：设置一个跟踪点来设置一个变量并强制 if 条件为真或假，具体取决于您需要测试的内容。所有这些都无需添加代码或离开调试会话。

**断点“切换”**

我已经看过几次这个问题了，“我需要在一个经常被击中的地方打断**。**我想简单地从另一个断点启用那个断点，所以我关心的那个只从某个代码中中断路径。我该怎么做？根据我们上面的知识，这很容易，尽管您确实需要一个辅助变量。

1.  创建一个全局布尔值，设置为 false。
2.  在最终目的地创建断点，条件是仅在全局标志为真时才中断。
3.  在将全局标志分配为 true 的关键点中设置跟踪点。

好处是您可以在不离开调试会话的情况下移动跟踪点。如果您需要再次运行它，请使用立即窗口或监视窗口重置您的全局标志。完成后，您只需要清理该全局布尔值即可。没有其他代码可以删除。

**自动跳过代码**

EIP 寄存器（至少在 x86 上）是指令指针。如果您分配给它，您可以更改您的程序流程。

1.  通过在“寄存器”窗口或带有“@eip,x”的“监视”窗口中中断一次并查看 EIP 的值来找到要**跳到的行的地址。**（请注意，寄存器窗口中的值是十六进制，但没有前导“0x”。）
2.  使用步骤 1 中的地址，在要**跳过**的行上添加一个跟踪点，使用类似的表达式。`{@eip = address}`
3.  EIP 分配将在执行该行的任何内容*之前发生。*

虽然这很方便，但要小心，因为跳过这样的代码会导致奇怪的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-18T12:17:47.663

正如 Kurt Hutchinson 所说，在跟踪点中不允许进行字符串分配。您可以通过创建一个分配字符串变量的方法并调用它来解决这个问题。

```
public static class Helper
{
    public static void AssignTo(this string value, out string variable)
    {
        variable = value;
    }
} 
```

然后在您的跟踪点消息中：

```
{"new string value".AssignTo(out stringVariable)} 
```

# mysql - 生成与数字等效的文本

> ID：14695733
> 
> 赞同：0
> 
> 时间：2013-02-04T21:12:27.563
> 
> 标签：mysql, sql-server, automation, generator

> **可能重复：**
> [如何在 sql server 中将数字写入 word 函数](https://stackoverflow.com/questions/1673265/how-to-write-number-to-word-function-in-sql-server)

简单的要求，但似乎无法正确查找/搜索。

你知道会为我产生的一种方式吗：

```
1-->One
2-->Two
3-->Three
100-->One hundred
295-->Two hundred and ninety five 
```

等等

当我给出一系列数字时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:25:12.120

我认为这符合我的目的： [how to write number to word function in sql server](https://stackoverflow.com/questions/1673265/how-to-write-number-to-word-function-in-sql-server)

我只是在寻找一种能够快速生成数字范围内的单词等价物的方法。“如何”并不重要。

我发布问题的原因是因为我之前没有使用正确的搜索词。

如果我在网络上使用“数字等价词”进行搜索，我会得到我想要的结果，但我使用的是“文本等价物......”来搜索。

# jquery - Jquery和背景位置的问题

> ID：14695737
> 
> 赞同：0
> 
> 时间：2013-02-04T21:12:35.517
> 
> 标签：jquery, jquery-animate

我目前的网站上有一些简单的 JQuery 动画，但它在 Safari 中不起作用，我不知道我哪里出错了：

[http://www.mousehouse.org.uk/index.php](http://www.mousehouse.org.uk/index.php)

```
// Header Animations
$('nav ul li #Global_Logo').animate({'background-position-y': '0px'}, 150)
.hover(function(){
    $(this).stop().animate({'background-position-y': '-107px'}, 150);
}, function(){
    $(this).stop().animate({'background-position-y': '0px'}, 150);
}); 
```

和这个：

```
// Work Links Animations
$('#Global_Work li a').stop().animate({backgroundPositionY: "0px", backgroundPositionX: "0px"}, 0)
.hover(function(){
    $(this).stop().animate({backgroundPositionY: "-300px", backgroundPositionX: "0px"}, 150);
}, function(){
    $(this).stop().animate({backgroundPositionY: "0px", backgroundPositionX: "0px"}, 150);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:04:59.770

FireFox 和 Opera 中的`backgrgroundPositionY`(and )似乎存在问题。`X`一个常见的解决`step`方法是`animate`：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

您可以为一些隐藏的 css 属性设置动画`border-spacing`，并将其作为您`step`方法的步进器：

```
$('#Global_Work li a').hover(function(){
    $(this).stop().css({'border-spacing': 0}).animate({
        'border-spacing': -300
    }, {
        step: function(now, fx){
            $(this).css("background-position", "0px "+now+"px");
        },
        duration: 300
    });
}, function(){
    $(this).stop().css({'border-spacing': 0}).animate({
        'border-spacing': 300
    }, {
        step: function(now, fx){
            $(this).css("background-position", "0px "+(now-300)+"px");
        },
        duration: 300
    });
}); 
```

这在我的 FireBug 控制台中有效，所以我希望它对你有用！

# jsf - 编辑页面的 JSF 验证器

> ID：14695738
> 
> 赞同：0
> 
> 时间：2013-02-04T21:12:37.233
> 
> 标签：jsf, jsf-2

我有我无法解决的问题。我有一个 JSF 编辑页面，它显示从 Java 对象生成的数据。该页面按应有的方式将值显示到输入表单中。现在我遇到了这个问题。例如，我有一个原始值的输入值`12`。当我插入值 22 时，输入表单的验证器会检查并返回 message `22 is not a unique value`。

然后我再次输入值 12，我再次收到消息`12 is not a unique value`如何告诉这个验证器这个值`12`是可接受的值，即使它被重复到数据库中它也应该接受它，因为这是从 Java 对象中获取的原始值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:12:31.477

You can add validation method to your backing bean and validate against the current value in model . Current model value should be the last validated value bound in the backing bean.

or if its a separate validator then its already answered above.

# jquery - 尝试使用 jQuery .click 事件更改边框颜色

> ID：14695741
> 
> 赞同：2
> 
> 时间：2013-02-04T21:12:48.327
> 
> 标签：jquery, css

我正在尝试使用来自 jQuery 的 .click 事件来更改 5 div 的 class="Hoofdstuk" 底部边框的颜色。正如您在以下链接中看到的：

[casperjonker.site50.net](http://casperjonker.site50.net/)

如您所见，它不起作用。这是HTML代码：

```
<div class="Hoofdstuk" id="Introductie"></div>
<div class="Hoofdstuk" id="Content"></div>
<div class="Hoofdstuk" id="Interactie"></div>
<div class="Hoofdstuk" id="FrontEnd"></div>
<div class="Hoofdstuk" id="Projecten"></div> 
```

这是我的 jQuery 代码：

```
$('.Hoofdstuk').click(function () {
    $(this).animate({
        'width': '55em'
    }).siblings().animate({
        'width': '5em'
    }).css({
        'border-color': '#ffba00'
    }).siblings().css({
        'border-color': '#333'
    })
}); 
```

这是CSS代码：

```
.Hoofdstuk {
    width: 5em;
    height: 25em;
    float: left;
    border-width: 0.1em;
    overflow:hidden;
    border-bottom: #ffba00 solid 0.5em;
} 
```

如果有人能看到这个问题，请告诉我。

我感谢你的时间。

扬克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:18:32.430

On your first .animate() - use .end() before moving on. This tells it to go back to the original selector (this), which could be the culprit. Otherwise, it will use siblings() as the current selector.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:18:47.220

Try to `.end()` the chain

```
$('.Hoofdstuk').click(
    function(){
        $(this)
            .animate({'width': '55em'}).siblings().animate({'width':'5em'}).end()
            .css({'border-color':'#ffba00'}).siblings().css({'border-color':'#333'})

}); 
```

[**DEMO**](http://jsfiddle.net/p5F6S/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:31:39.603

没有`end()`你可以作为替代保持它们的顺序并这样做：

```
$('.Hoofdstuk').click(function () {
    $(this)
    .animate({'width': '55em'})
    .css({'border-color': '#333'})
    .siblings().animate({'width': '5em'})
    .css({'border-color': '#ffba00'})
}); 
```

* * *

[**演示**](http://jsfiddle.net/TKVXd/embedded/result/)- 先是兄弟姐妹

* * *

# mongodb - 我是否应该将子文档存储在单独的集合中

> ID：14695745
> 
> 赞同：0
> 
> 时间：2013-02-04T21:12:59.397
> 
> 标签：mongodb, mongoose, normalization, nosql

我已经构建了一些具有不太复杂的父子结构的猫鼬模式。当我创建我的父母时，我包含了一个与子模式匹配的 json 数组，并且子文档可以正常创建，但不会出现在 mongodb 的单独子集合中。

但是，如果我稍后添加更多的孩子，那么这些确实会出现在 mongodb 中的单独子集合中，并且在父集合中有重复/引用（我使用 Model.create 创建它们，因为我需要访问它们的 ObjectId）

由于我是 NoSQL 的新手，我不确定是否仍应尝试保留子文档的单独集合。只有我的一些孩子出现在单独的收藏中是否有任何负面影响？

## 最少的示例代码

```
var mongoose = require('mongoose'),
    arrangementSchema = mongoose.Schema({
        abc: String
    }),
    tuneSchema = mongoose.Schema({
        name: String,
        arrangements: [arrangementSchema]
    });

mongoose.connect('mongodb://localhost/jnr_dev');

var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () {

});

var Arrangement = mongoose.model('Arr', arrangementSchema),
    Tune = mongoose.model('Tu', tuneSchema);

var tune = Tune.create({
    name: 'test'
}, function (err, newTune) {
    newTune.arrangements = [{abc:'abc1'}];
    newTune.save(function () {
        Arrangement.create({
            abc: 'abc2'
        }, function (err, arr) {
            newTune.arrangements.push(arr);
            newTune.save();
        });
    })
});

// and same behaviour with

var tune = Tune.create({
    name: 'test',
    arrangements: [{abc:'abc3'}]
}, function (err, newTune) {
    Arrangement.create({
        abc: 'abc4'
    }, function (err, arr) {
        newTune.arrangements.push(arr);
        newTune.save();
    });
}); 
```

## Tus 集合中的结果

```
 {    "__v": NumberInt(2),    "_id": ObjectId("511037ef60e5af0000000002"),    "arrangements": {
     "0": {
       "abc": "abc1",
       "_id": ObjectId("511037ef60e5af0000000003")
    },
     "1": {
       "_id": ObjectId("511037ef60e5af0000000004"),
       "abc": "abc2"
    }   },    "name": "test" } 
```

## 结果在 Arrs 集合中

```
 {
   "abc": "abc2",
   "_id": ObjectId("511037ef60e5af0000000004"),
   "__v": NumberInt(0)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:18:39.123

在第二个集合中创建文档的是 Arrangement.create() 调用。我假设您只需要 Tune 集合中的子文档数组。看：

[http://mongoosejs.com/docs/subdocs.html](http://mongoosejs.com/docs/subdocs.html)

你应该这样做：

```
newTune.arrangements.push({
    abc: 'abc4'
});

newTune.save(); 
```

# wordpress - wordpress 发布 the_content 过滤器

> ID：14695747
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:04.253
> 
> 标签：wordpress, filter, pagination

我想编写添加到我的帖子内容`<!--nextpage-->`标签的函数，我编写了这个函数：

```
<?php
function output($content) {
$output = $content.'<!--nextpage-->'.$content;

return $output;
}

add_filter('the_content','output');

?> 
```

功能添加`<!--nextpage-->`标签，但是当我显示帖子时这个标签不起作用，就像html评论一样，也许是解决这个问题的一些解决方案？

也许我必须使用 not `the_content`but `wp_insert_post_data`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:32:56.500

从文本`<!--nextpage-->`到“页面”的转换发生在`setup_postdata`. 但是当调用具有相同名称的模板标记时，您使用的钩子会执行`the_content`。所以这意味着你必须在循环开始之前更改内容。这可能有点棘手。我不知道有什么合适的钩子，但你可以检查源代码，`setup_postdata`可能有一个。但是，在主题中，您可以访问`$posts`，因此如果将其放入模板中，它应该可以工作：

```
global $posts;
array_map( function( $apost ) {
    $apost->post_content = $apost->post_content.'<!--nextpage-->'.$apost->post_content;
    return $apost;
}, $posts ); 
```

如果您没有 PHP 版本 => 5.3，则不能使用匿名函数。在这种情况下，此版本将起作用：

```
global $posts;
function output( $apost ) {
    $apost->post_content = $apost->post_content.'<!--nextpage-->'.$apost->post_content;
    return $apost;
}
array_map( 'output', $posts ); 
```

# facebook - Facebook 时间线/新闻提要奇怪地调整外部链接缩略图的大小

> ID：14695751
> 
> 赞同：1
> 
> 时间：2013-02-04T21:13:20.353
> 
> 标签：facebook

当在时间线或新闻源上共享带有缩略图的链接时，通常不管原始图像大小（无论多么小），Facebook 都会将图像重置为其他东西，很多时候只显示一半图像，或者如果显示整个图像，它是重新调整大小，结果变得模糊！那么我们可以将我们的网站缩略图设置到多大的神奇尺寸，以便它们在 Facebook 上共享时不会被驻留或降级？100X100？93X97？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:34:19.420

每个维度必须至少为 200 像素。这是一个链接，您可以在其中输入您的网站链接以进行验证以查看问题所在：[https ://developers.facebook.com/tools/debug/og/](https://developers.facebook.com/tools/debug/og/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:38:07.677

Facebook 希望`og:image`a 边至少为 200 像素，并且纵横比小于 3:1。图像没有最大尺寸。

# python - Constrained minimization of multivariate function using Jython

> ID：14695752
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:20.767
> 
> 标签：python, jython, mathematical-optimization, jython-2.5

I have a python program running under Jython (to use a third party Java API), inside which I would like to calculate a constrained minimization of a multivariate function.

Scipy has a module for this that works perfectly ([`scipy.optimize`](http://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html#constrained-minimization-of-multivariate-scalar-functions-minimize)) but unfortunately you cannot use scipy within Jython. Does anyone know of a good library/any other way to do this in Jython? If I could just run this under Jython, I'd be all set:

```
def func(x, sign=1.0):
    """ Objective function -- minimize this """
    return sign*(2*x[0]*x[1] + 2*x[0] - x[0]**2 - 2*x[1]**2)

def func_deriv(x, sign=1.0):
    """ Derivative of objective function """
    dfdx0 = sign*(-2*x[0] + 2*x[1] + 2)
    dfdx1 = sign*(2*x[0] - 4*x[1])
    return np.array([ dfdx0, dfdx1 ])

cons = ({'type': 'eq',
         'fun' : lambda x: np.array([x[0]**3 - x[1]]),
         'jac' : lambda x: np.array([3.0*(x[0]**2.0), -1.0])}, #partial derivative of fun
        {'type': 'ineq',
         'fun' : lambda x: np.array([x[1] - 1]),
         'jac' : lambda x: np.array([0.0, 1.0])})   #partial derivative of fun

res = minimize(func, [-1.0,1.0], args=(-1.0,), jac=func_deriv, 
               method='SLSQP', constraints=cons, options={'disp': True}) 
```

Thanks! -Michael

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:52:10.583

这可能不是针对您的特定用例的最佳解决方案，因为您已经在 J​​ython 中拥有了应用程序，但是`JPype`（[链接](http://jpype.sourceforge.net)）允许 CPython 程序与在 JVM 上运行的程序通信，我自己没有尝试过，但找到了一个你好世界的例子[在这里](http://www.thenumber42.net/2008/03/31/how-to-use-jpype/)。

基本上你制作你的Java类，把它编译成一个jar，然后在CPython中做

```
import jpype
import os.path

jarpath = os.path.join(os.path.abspath('.'), 'build/jar')
jpype.startJVM(jpype.getDefaultJVMPath(), "-Djava.ext.dirs=%s" % jarpath)

# get the class
hello_world = jpype.JClass('com.stackoverflow.HelloWorld')
t = hello_world()  # create an instance of the class
t.helloWorld("Say hello")  # try to call one of the class methods
jpype.shutdownJVM() 
```

我意识到这会颠倒您的应用程序逻辑。另一种选择是使用`subprocess`和序列化输入/输出。

**更新**

我最近遇到了一个类似的问题并决定试一试`JPype`，现在可以说它非常值得使用，尽管至少在 OSX 上安装它存在一些问题，请参阅[此处](https://stackoverflow.com/questions/8525193/cannot-install-jpype-on-os-x-lion-to-use-with-neo4j)的帮助（一些 JVM 路径需要更改`setup.py`） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-04T18:36:38.877

如果您的项目使用 Jython，您可以使用 Slsqp4j 在 JVM 上本地执行求解，并完全绕过编写 SciPy 代码。Slsqp4j 是 SciPy 中包含的 SLSQP 求解器的 Java 包装器。该 api 与 SciPy 的非常相似。它托管在这里： [https ://github.com/skew-opensource/slsqp4j](https://github.com/skew-opensource/slsqp4j)

（披露：我是作者）

# oracle - Schema growth in Oracle 11g

> ID：14695754
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:26.973
> 
> 标签：oracle, schema

what is the best way to get the schema growth in Oracle? I tried using many of the dba_hist_ tables and none of them seem to get me the size and growth of the schema for a specific time (7day) period. These tables seem to hold tablespace growth information, not @ the schema level.

Can somebody help?

Tried the following tables,

dba_hist_tablespace_stat, dba_hist_seg_stat, dba_hist_seg_stat_obj, dba_hist_snapshot etc.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:25:21.527

检查此查询：

```
SELECT b.tsname tablspc_name ,
  MAX(b.used_size_mb) cur_used_size_mb ,
  ROUND(AVG(inc_used_size_mb),2) avg_incr_mb
FROM
  (SELECT a.days,
    a.tsname ,
    used_size_mb ,
    used_size_mb - LAG (used_size_mb,1) OVER ( PARTITION BY a.tsname ORDER BY a.tsname,a.days) inc_used_size_mb
  FROM
    (SELECT TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY') days ,
      ts.tsname ,
      MAX(ROUND((tsu.tablespace_usedsize* dt.block_size )/(1024*1024),2)) used_size_mb
    FROM dba_hist_tbspc_space_usage tsu ,
      dba_hist_tablespace_stat ts ,
      dba_hist_snapshot sp,
      dba_tablespaces dt
    WHERE tsu.tablespace_id    = ts.ts#
    AND tsu.snap_id            = sp.snap_id
    AND ts.tsname              = dt.tablespace_name
    AND sp.begin_interval_time > sysdate-7
    GROUP BY TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY'),
      ts.tsname
    ORDER BY ts.tsname,
      days
    ) a
  ) b
GROUP BY b.tsname
ORDER BY b.tsname; 
```

并按所有者分组：

```
SELECT  ds.owner as owner, 
  MAX(b.used_size_mb) cur_used_size_mb ,
  ROUND(AVG(inc_used_size_mb),2) avg_incr_mb
FROM
  (SELECT a.days,
    a.tsname ,
    used_size_mb ,
    used_size_mb - LAG (used_size_mb,1) OVER ( PARTITION BY a.tsname ORDER BY a.tsname,a.days) inc_used_size_mb
  FROM
    (SELECT TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY') days ,
      ts.tsname ,
      MAX(ROUND((tsu.tablespace_usedsize* dt.block_size )/(1024*1024),2)) used_size_mb
    FROM dba_hist_tbspc_space_usage tsu ,
      dba_hist_tablespace_stat ts ,
      dba_hist_snapshot sp,
      dba_tablespaces dt
    WHERE tsu.tablespace_id    = ts.ts#
    AND tsu.snap_id            = sp.snap_id
    AND ts.tsname              = dt.tablespace_name
    AND sp.begin_interval_time > sysdate-7
    GROUP BY TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY'),
      ts.tsname
    ORDER BY ts.tsname,
      days
    ) a
  ) b
JOIN dba_segments ds on ds.tablespace_name = b.tsname
GROUP BY ds.owner
ORDER BY ds.owner; 
```

# powershell - 使用 Powershell cmdlet export-csv 时防止文本文件中出现多余字符

> ID：14695755
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:30.343
> 
> 标签：powershell, export

我正在使用 Powershell cmdlet export-csv 将 sqlserver 查询的结果导出到 .txt 文件。当我使用文本编辑器（记事本）查看结果行时，结果行符合我的期望，如下所示：

```
 Account|Representative|Note 
```

但是，当我使用二进制文件格式（在 TextPad 中）打开文件时，我看到结果行中散布着额外的字符（不确定它们是句点还是空格），如下所示：

```
 A.c.c.o.u.n.t.|.R.e.p.r.e.s.e.n.t.a.t.i.v.e.|.N.o.t.e. 
```

我尝试为 export-csv 的编码参数指定不同的值，包括 UTF32、UTF8、ASCII 和 Unicode，但无法摆脱多余的字符。

我有其他生成文件的方法（SSIS 包），但特别希望让这个 Powershell 选项为支持导出的组的利益而工作。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:10:45.087

在记事本中打开文件，然后单击*文件 → 另存为*...。*字段编码*的预选值将告诉您使用了哪种编码（可能`Unicode`）。`Export-Csv -Encoding ASCII`不过，应该注意这一点。您也可以尝试像这样重新编码文件：

```
Get-Content generated.txt | Out-File -Encoding ASCII converted.txt 
```

如果这没有帮助，请使用十六进制编辑器打开文件并使用前几个字节更新您的问题（第一行就足够了）。

# r - Changing the colour palette

> ID：14695756
> 
> 赞同：1
> 
> 时间：2013-02-04T21:13:40.090
> 
> 标签：r, ggplot2

I would like to obtain a greater variety of colours in the lines/points on this scatterplot:

![enter image description here](../Images/e05a91f0f19b13f80f4edc89b2d840fa.png)

```
require(ggplot2)
dt.gg <- read.csv("http://goo.gl/5yjEZ")
dt.gg$X <- NULL
dt.gg$X.1 <- NULL

ggplot(dt.gg, aes(x=base, y=pred, color=hospital,group=hospital)) + geom_point(shape=1) +
 geom_line()+ theme(legend.position="none") + scale_fill_brewer(palette=3) 
```

`scale_fill_brewer` doesn't seem to work

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:30:46.117

试试：`scale_colour_gradientn(colours = rainbow(7))`。

# ios - 如何在 Objective-C 中舍入之前保持浮点值？

> ID：14695758
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:44.070
> 
> 标签：ios, cocoa-touch, floating-point, nsstring, rounding

我有一些`NSString`平等`@"1234567.89"`的。我必须用`floatValue`这个字符串制作。当我打电话时`[myString floatValue]`，这`float`是平等的`1234567.875000`。在此之前如何保持？我想要 floatValue equal `1234567.89000`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:24:39.233

问题是浮点数不能代表您正在寻找的精度那么大的数字。尝试使用 double 代替，并使用`[myString doubleValue]`. 下面的小示例程序演示了这一点：

```
#import <Foundation/Foundation.h>
int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSString *myString = @"1234567.89";
        float floatVal = [myString floatValue];
        double doubleVal = [myString doubleValue];
        NSLog(@"String: %@ float: %f double: %f", myString, floatVal, doubleVal);
    }
} 
```

> 字符串：1234567.89 浮点数：1234567.875000 双数：1234567.890000

# php - 我将如何在 PHP 而不是 MySQL 中进行 groupby 或 groupconcat？

> ID：14695761
> 
> 赞同：0
> 
> 时间：2013-02-04T21:13:45.020
> 
> 标签：php, mysql

我有一个 SQL 查询：

```
SELECT mealdesc, group_concat(fooddesc) as fooddesc 
FROM plan p
INNER JOIN mealplan mp
ON mp.planid = p.id
INNER JOIN meal m
ON m.id = mp.mealid
INNER JOIN foodmeal fm
ON fm.mealid = m.id
INNER JOIN food f
ON f.id = fm.foodid
where userid = 2
GROUP by mealdesc
order by mealdesc 
```

结果如下所示：

```
mealdesc,fooddesc
Meal 1,"egg,egg whites,oatmeal,wheat toast,fruit,berries"
Meal 2,"Isolyze,raw nuts"
Meal 3,"chicken,turkey,yam,baked potato,veggies,medium salad"
Meal 4,"Isolyze,raw nuts"
Meal 5,"veggies,lean red meat,salmon,Chilean Sea Bass,large salad"
Meal 6,"veggies,large salad,Casein Protein,white fish" 
```

当我删除 group by 和 group_concat 结果如下所示：

```
mealdesc,fooddesc
Meal 1,egg
Meal 1,egg whites
Meal 1,oatmeal
Meal 1,wheat toast
Meal 1,fruit
Meal 1,berries
Meal 2,Isolyze
Meal 2,raw nuts
Meal 3,veggies
Meal 3,medium salad
Meal 3,chicken
Meal 3,turkey
...and so on. 
```

与其在 sql 语句中执行 Group by 和 Group_Concat 并且必须处理爆炸等来处理分隔符并将其放入 php 数组中，有没有办法执行相同的 group by 和 group_concact 逻辑并组织所有这些在 PHP 中并将其推入数组？

更新：感谢您到目前为止的回复。将我的 PHP 和 HTML 部分添加到此。

我基本上希望将每餐输出为标题，并将每种食物输出为列表。我过去使用过explode，但我无法正确形成数组，也许这只是我的问题。

PHP代码：

```
$sql = "SELECT mealdesc, group_concat(fooddesc) as fooddesc 
    FROM plan p
    INNER JOIN mealplan mp
    ON mp.planid = p.id
    INNER JOIN meal m
    ON m.id = mp.mealid
    INNER JOIN foodmeal fm
    ON fm.mealid = m.id
    INNER JOIN food f
    ON f.id = fm.foodid
    where userid = 2
    GROUP by mealdesc
    order by mealdesc";

$result = mysqli_query($link, $sql);
if (!$result)
{
echo 'Error';
exit();
}

// Fetch food data
while($row = mysqli_fetch_assoc($result)){
$meals[] = array('mealdesc' => $row['mealdesc'], 'fooddesc' => explode(",", $row['fooddesc']));
}

echo '<pre>';
echo print_r($meals, true);
echo '</pre>'; 
```

然后在我的 HTML 中，我像这样循环输出膳食和食物描述

```
<?php foreach ($meals as $meal): ?>
<h4><?php htmlout($meal['mealdesc']); ?></h4>
<ul>
  <li><?php htmlout($meal['fooddesc']); ?></li>
</ul>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:21:32.233

如果你想保持 SQL 那样，为什么不在 PHP 中做这样的事情：

```
 while($row = dbOBj->Fetch($result))
    {
    $meal[$row['meal desc'][] = $row['food desc'];
    } 
```

你最终会得到`$meal['Meal 1'] = array('egg', 'egg whites', ...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:21:14.040

我假设您使用 PDO 通过准备好的语句获取上述记录集：

```
$meals = array();
while ($row = $stmt->fetch()) {
    $meals[$row[0]][] = $row[1];
} 
```

这为您提供了以下格式：

```
array(
    "Meal 1" => array("egg","egg whites","oatmeal","wheat toast","fruit","berries"),
    "Meal 2" => array("Isolyze","raw nuts"),
    "Meal 3" => array("chicken","turkey","yam","baked potato","veggies","medium salad"),
    "Meal 4" => array("Isolyze","raw nuts"),
    "Meal 5" => array("veggies","lean red meat","salmon","Chilean Sea Bass","large salad"),
    "Meal 6" => array("veggies","large salad","Casein Protein","white fish"),
); 
```

然后，您可以通过执行以下操作以您希望的格式选择一个：

```
implode(",", $meals["Meal 1"]); 
```

输出

```
egg,egg whites,oatmeal,wheat toast,fruit,berries 
```

**编辑**

查看上面的代码，您可能希望在 HTML 中执行以下操作：

```
<?php foreach ($meals as $meal): ?>
<h4><?php htmlout($meal['mealdesc']); ?></h4>
<ul>
  <?php foreach ($meal['fooddesc'] as $d): ?>
  <li><?php htmlout($d); ?></li>
  <?php endforeach; ?>
</ul>
<?php endforeach; ?> 
```

# ruby-on-rails - composite_primary_keys - How to pass both from view to controller?

> ID：14695763
> 
> 赞同：1
> 
> 时间：2013-02-04T21:13:56.920
> 
> 标签：ruby-on-rails

I have installed composite_primary_keys, and set my two primary keys. My delete method works, as it doesn't need to pass any id's. However I am unsure how to get my edit path to function.

If I leave it including only the default :id, I get this message (as expected)

```
Incorrect number of primary keys for Deal: ["id", "merchant_id"] 
```

I have found that for the edit form to render, I effectively have to make the URL look this this

```
http://localhost:3000/deals/2,1/edit 
```

My attempts to get both values into the edit_deals_path() have not worked.

Is there a tutorial somewhere on how to use composite_primary_keys gem? The author's website doesn't include this issue.

# ios - 为什么我的 NSURLConnection 返回 null？

> ID：14695765
> 
> 赞同：0
> 
> 时间：2013-02-04T21:14:04.320
> 
> 标签：ios, nsurlconnection

我正在为我的服务器创建一个 NSURLConnection 但`responseData`最终为空`connectionDidFinishLoading`，我不知道为什么。这是连接的代码：

```
NSMutableData *responseData;

- (void)myFunction:(id)sender {

  NSString *url = @"http://www.example.com/";

  NSURL *URL = [NSURL URLWithString:url];

  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

  [connection start];
}

// NSURLConnection Delegates
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
  [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
  [responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

} // end connectionDidFinishLoading

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
  NSLog(@"Connection error: %@",[error description]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:20:24.320

responseData 未初始化:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:17:41.543

典型的！就在我完成发布问题时，答案突然出现在我身上。我从来没有初始化过`responseData`。所以在`viewDidLoad`我添加了下面的行：

```
- (void)viewDidLoad
{

  [super viewDidLoad];

  responseData = [NSMutableData data];

} 
```

# java - 使用密码短语的带有 CBC 的 Java AES

> ID：14695766
> 
> 赞同：4
> 
> 时间：2013-02-04T21:14:07.000
> 
> 标签：java, encryption, passwords, aes, cbc-mode

我想用 Java 实现 256 密钥 AES 和 CBC 加密。收件人向我发送了 256 位密码作为字符串“absnfjtyrufjdngjvhfgksdfrtifghkv”，它使用以下 openssl 命令完美运行：

```
 echo test | openssl enc  -aes-256-cbc -a -k 'absnfjtyrufjdngjvhfgksdfrtifghkv' 
```

base64 格式的输出为：U2FsdGVkX1/yA4J8T+i1M3IZS+TO/V29rBJNl2P88oI=

当我描述它时，它返回原始输入字符串：

```
 echo U2FsdGVkX1/yA4J8T+i1M3IZS+TO/V29rBJNl2P88oI= | openssl enc -d -aes-256-cbc -a -k 'absnfjtyrufjdngjvhfgksdfrtifghkv' 
```

我的问题是我不能让我的加密在java中工作并用上面的命令解密它。我知道我的密钥应该使用我的密码生成。下面是我的代码示例，其中 IV 是随机生成的，密钥是使用密码和随机盐生成的。

```
byte[] input = "test".getBytes();
String passphrase = "absnfjtyrufjdngjvhfgksdfrtifghkv";
int saltLength = 8; 

SecureRandom random = new SecureRandom();

//randomly generate salt
byte[] salt = new byte[saltLength];
random.nextBytes(salt);

// generating key from passphrase and salt
SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
KeySpec spec = new PBEKeySpec(passphrase.toCharArray(), salt, 1024, 256);
SecretKey key = factory.generateSecret(spec);
SecretKey kspec = new SecretKeySpec(key.getEncoded(), "AES");

// randomly generate IV
byte iv[] = new byte[16];
random.nextBytes(iv);
IvParameterSpec ips = new IvParameterSpec(iv);

Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding");
c.init(Cipher.ENCRYPT_MODE, kspec, ips);
byte[] encryptedData = c.doFinal(input);
System.out.println(new String(Base64.encodeBase64(encryptedData))); 
```

我的 java base64 输出是 XimWIM+8UewzobFOMfevaw== ，当我尝试运行时：

```
echo XimWIM+8UewzobFOMfevaw= | openssl enc -d -aes-256-cbc -a -k   'absnfjtyrufjdngjvhfgksdfrtifghkv' 
```

我收到“坏幻数”错误。java加密的哪一步我做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T21:19:17.110

根据[这个答案](https://stackoverflow.com/a/9500692/150339)，OpenSSL 使用的密钥派生算法与您在 Java 代码中使用的不同。因此，用于加密的密钥在您的 OpenSSL 命令和 Java 程序中将不同，因此输出将不同且不兼容。

您还应该查看OpenSSL中[密钥派生函数的文档。](http://www.openssl.org/docs/crypto/EVP_BytesToKey.html)显然它在算法中使用 MD5，而您的 Java 代码使用的是 SHA1。他们不会输出相同的密钥。

您必须指定完全相同的密钥派生函数，或者直接指定密钥，而不是从密码短语派生。

最后，避免为自己创建一个密钥派生函数（您可以使用 bash 和 Java 轻松实现）并坚持标准，如果安全是一个问题（如果不是，为什么还要使用加密？）；算法很可能会被破坏。

# javascript - Having different models for request and response - backbone.js

> ID：14695768
> 
> 赞同：2
> 
> 时间：2013-02-04T21:14:13.040
> 
> 标签：javascript, backbone.js

```
//A backbone model
var RequestModel = Backbone.Model.extend({});

//A backbone model
var ResponseModel = Backbone.Model.extend({});

RequestModel.save({
    success: function (ResponseModel ) {
        alert(ResponseModel .toJSON());
    }
}) 
```

Can i have a separate Model for Request and Response, as both Request and Response does not match. Its a total RPC call and not a CRUD operation.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:31:58.027

我以前也考虑过同样的问题，我觉得在 Backbone 中没有**很好的**方法来实现这一点。我想出的最好的方法是在模型上实现一个`fromResponse`and`toRequest`方法，并覆盖[`model.parse`](http://backbonejs.org/#Model-parse)并将[`model.sync`](http://backbonejs.org/#Model-sync)模型对象映射到它们。就像是：

```
var Model = Backbone.Model.extend({
  fromResponse: function(responseAttrs) {
    var modelAttrs = {}; //map response attributes to modelAttrs
    return modelAttrs;
  },

  toRequest: function() {
    //map model attributes to response attributes here
    var modelAttrs = this.toJSON();
    var responseAttrs = {}; //map models attributes to requestAttrs
    return responseAttrs;
  },

  parse: function(response) {
    return this.fromResponse(response);
  },

  sync: function(method, model, options) { 
    options = options || {};
    options.data = this.toRequest();
    Backbone.sync(method, model, options);
  }
}); 
```

如果`parse`and`sync`在某种基类中被覆盖，那么您只需要为每个模型实现`fromResponse`and映射器。`toRequest`

另一种选择是`Backbone.sync`完全覆盖，并将每种类型映射`Model`到某种类型`ModelRequestMapper`和`ModelResponseMapper`对象以（反）序列化每个模型。我觉得这会更复杂，但如果你有很多模型，可能会更好地扩展。

/代码示例未测试

# java - Java 内存和 Windows

> ID：14695770
> 
> 赞同：3
> 
> 时间：2013-02-04T21:14:21.543
> 
> 标签：java, windows, memory

今天注意到一些有意义的东西，但我无法准确解释语义。

基本上，我创建了一个普通的旧 java`main`方法，其中有一个永无止境的 while 循环。在这个循环中，我创建了一些字符串并将它们放入 HashMap 中。我真正想要的是一个在一段时间内运行并建立它的内存利用率的进程。

```
public class Test {

public static void main(String[] args) throws InterruptedException {
    final HashMap<String, String> names = new HashMap<String, String>();
    while(true) {
        names.put(new Date().toString(), "lskjflksjdflksjdflkjsieurlskjflksn,kdsgkjsdlkfjslkdjfs");
        Thread.sleep(50);
    }
} 
```

}

该过程从 开始`-Xms512m -Xmx512m`。

启动后，我可以使用它`procexp.exe`来查看我的 java 进程。我试图理解的位是虚拟内存和物理内存。虚拟内存（私有字节）似乎映射到请求的 jvm 大小，即 512MB。从进程随时间推移的配置文件来看，我假设物理内存（工作集）是进程使用的实际内存，因为随着我的进程生成更多字符串值并填满地图，它会随着时间的推移而逐渐增加。它总是远小于 512MB。

所以我的问题是，为什么 Java 使用虚拟内存？

不都是在 RAM 中，即物理内存吗？

因为我使用的是虚拟内存，这是否意味着它正在交换到磁盘？

这对性能不利吗？

有没有办法强制它全部在 RAM 中以获得更好的性能？

任何关于 Windows 上这类事情的好文章都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:22:19.103

> 为什么Java使用虚拟内存？

所有用户应用程序都使用虚拟内存与操作系统内存进行交互。由操作系统将其映射回物理 RAM/磁盘（通过页表）。因为您使用 -Xms512m 启动了 JVM，它将在启动时请求 500 MB 的虚拟内存空间，但操作系统选择不为此保留 500 MB 的物理 RAM，因为它可能永远不会被使用。

> 不都是在 RAM 中，即物理内存吗？

除非你的机器使用了很高的百分比（>75% 左右）它的所有物理 RAM 并且基于 JVM 的应用程序最近访问了它的一些数据，否则 JVM 将全部在 RAM 中。

> 因为我使用的是虚拟内存，这是否意味着它正在交换到磁盘？

不，见上文。

> 这对性能不利吗？

在将数据分页到磁盘的应用程序中，分页可能不利于性能。Windows 将尝试通过以下几种方式最小化这种影响：

1.  发送到磁盘的虚拟内存页面是最近最少使用的页面
2.  如果 Windows 可以检测到它即将被使用，则有几个优化旨在从磁盘拉回页面（即，如果您开始遍历地图中的键，那么 Windows 将尝试拉回包含迭代到达之前的下一个键块）

此外，正如我所提到的，您很可能不会分页到磁盘。

> 有没有办法强制它全部在 RAM 中以获得更好的性能？

您可以在 windows 中关闭页面文件。 [这是一个带有说明的 Youtube 视频。](http://www.youtube.com/watch?v=XM1UZc9AkE4)

> 任何关于 Windows 上这类事情的好文章都会很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:20:17.097

对于 32 位计算机上的每个进程，可寻址的内存为 4GB，计算机是否有 4GB 的实际 RAM 内存并不重要。

例如，如果您的计算机有 2GB 的 RAM，对于 JVM，它看起来就像有 4GB 的内存。另外 2GB 内存来自将内存映射到 HDD 中的文件（这是虚拟内存）。

如果有多个进程在运行，对于每个进程来说，它似乎是计算机上唯一运行的进程，具有 4GB 的可寻址内存。由于 JVM 不会是唯一运行的进程，因此操作系统中的内存管理器可能会决定将未使用内存的内容推送到虚拟内存文件中。这取决于操作系统来决定。

由于它正在交换到磁盘，因此性能滞后会很明显（除非它是固态硬盘）

# python - Access operator functions by symbol

> ID：14695773
> 
> 赞同：6
> 
> 时间：2013-02-04T21:14:30.460
> 
> 标签：python, functional-programming, idioms

I need a function which takes one of python's operator symbols or keywords **as a string**, along with its operands, evaluates it, and returns the result. Like this:

```
>>> string_op('<=', 3, 3)
True
>>> string_op('|', 3, 5)
7
>>> string_op('and', 3, 5)
True
>>> string_op('+', 5, 7)
12
>>> string_op('-', -4)
4 
```

The string cannot be assumed to be safe. I will be satisfied with just mapping the binary operators, but I'd be extra happy if I could get all of them.

My current implementation manually maps the symbols to the functions in the [operator module:](http://docs.python.org/2/library/operator.html#mapping-operators-to-functions)

```
import operator

def string_op(op, *args, **kwargs):
    """http://docs.python.org/2/library/operator.html"""
    symbol_name_map = {
        '<': 'lt',
        '<=': 'le',
        '==': 'eq',
        '!=': 'ne',
        '>=': 'ge',
        '>': 'gt',
        'not': 'not_',
        'is': 'is_',
        'is not': 'is_not',
        '+': 'add', # conflict with concat
        '&': 'and_', # (bitwise)
        '/': 'div',
        '//': 'floordiv',
        '~': 'invert',
        '%': 'mod',
        '*': 'mul',
        '|': 'or_', # (bitwise)
        'pos': 'pos_',
        '**': 'pow',
        '-': 'sub', # conflicts with neg
        '^': 'xor',
        'in': 'contains',
        '+=': 'iadd', # conflict with iconcat
        '&=': 'iand',
        '/=': 'idiv',
        '//=': 'ifloordiv',
        '<<=': 'ilshift',
        '%=': 'imod',
        '*=': 'imul',
        '|=': 'ior',
        '**=': 'ipow',
        '>>=': 'irshift',
        '-=': 'isub',
        '^=': 'ixor',
    }
    if op in symbol_name_map:
        return getattr(operator, symbol_name_map[op])(*args, **kwargs)
    else:
        return getattr(operator, op)(*args, **kwargs) 
```

This solution fails on the overloaded operators -- `add`/`concat` and `sub`/`neg`. Checks could be added to detect those cases and detect types or count arguments to pick the right function name, but that feels a bit ugly. It's what I'll go with if I don't get a better idea here.

The thing that is bugging me is that python *already does this*. It already knows how to map symbols to operator functions, but so far as I can tell, that functionality is not exposed to the programmer. Seems like everything else in python, right down to [the pickling protocol](http://docs.python.org/2/library/pickle.html "so cool -- I was just reading about this earlier"), is exposed to programmers. So where is this? or why isn't it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T21:30:53.720

Python 不会*将*符号映射到`operator`函数。`dunder`它通过调用特殊方法来解释符号。

例如，当您编写时`2 * 3`，它不会调用`mul(2, 3)`; 它调用一些 C 代码来确定是使用`two.__mul__`,`three.__rmul__`还是 C 类型的等效项（插槽`nb_multiply`和`sq_repeat`都等效于`__mul__`and `__rmul__`）。您可以从 C 扩展模块调用相同的代码作为[`PyNumber_Multiply(two, three)`](http://docs.python.org/2/c-api/number.html#PyNumber_Multiply). 如果您查看 的源代码[`operator.mul`](http://hg.python.org/cpython/file/e64b74227198/Modules/operator.c#l70)，它是一个完全独立的函数，它调用相同的`PyNumber_Multiply`.

因此，Python 没有从`*`to`operator.mul`公开的映射。

如果您想以编程方式执行此操作，我能想到的最好的方法是解析`operator`函数的文档字符串（或者，也许是 operator.c 源）。例如：

```
runary = re.compile(r'Same as (.+)a')
rbinary = re.compile(r'Same as a (.+) b')
unary_ops, binary_ops = {}, {}
funcnames = dir(operator)
for funcname in funcnames:
    if (not funcname.startswith('_') and
        not (funcname.startswith('r') and funcname[1:] in funcnames) and
        not (funcname.startswith('i') and funcname[1:] in funcnames)):
        func = getattr(operator, funcname)
        doc = func.__doc__
        m = runary.search(doc)
        if m:
            unary_ops[m.group(1)] = func
        m = rbinary.search(doc)
        if m:
            binary_ops[m.group(1)] = func 
```

我认为这不会遗漏任何东西，但它肯定有一些误报，例如`"a + b, for a "`作为映射到的运算符`operator.concat`和映射到`callable(`的运算符`operator.isCallable`。（确切的设置取决于您的 Python 版本。）随意调整正则表达式，将此类方法列入黑名单等以品尝。

然而，如果你真的想写一个解析器，你最好为你的实际语言编写一个解析器，而不是为文档字符串编写一个解析器来生成你的语言解析器……</p>

如果您尝试解析的语言是 Python 的子集，Python*会*公开内部结构以帮助您。[`ast`](http://docs.python.org/2/library/ast.html#module-ast)有关起点，请参阅模块。你可能仍然对类似的东西更满意`pyparsing`，但你至少应该玩`ast`。例如：

```
sentinel = object()
def string_op(op, arg1, arg2=sentinel):
    s = '{} {}'.format(op, arg1) if arg2 is sentinel else '{} {} {}'.format(op, arg1, arg2)
    a = ast.parse(s).body 
```

打印出来`a`（或者，更好，`ast.dump(a)`），玩弄它，等等。但是，你仍然需要映射 from`_ast.Add`到`operator.add`。但是，如果您想映射到实际的 Python`code`对象……那么，也可以使用相应的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:34:22.540

如果要使用这样的映射，为什么不直接映射到函数而不是按名称进行间接层呢？例如：

```
symbol_func_map = {
    '<': (lambda x, y: x < y),
    '<=': (lambda x, y: x <= y),
    '==': (lambda x, y: x == y),
    #...
} 
```

虽然这不会比您当前的实现更简洁，但在大多数情况下它应该得到正确的行为。剩下的问题是一元和二元运算符冲突的地方，可以通过向字典键添加 arity 来解决这些问题：

```
symbol_func_map = {
    ('<', 2): (lambda x, y: x < y),
    ('<=', 2): (lambda x, y: x <= y),
    ('==', 2): (lambda x, y: x == y),
    ('-', 2): (lambda x, y: x - y),
    ('-', 1): (lambda x: -x),
    #...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-12T18:57:41.363

您可以使用粗略的正则表达式。我们可以做的：

```
import re, operator

def get_symbol(op):
    sym = re.sub(r'.*\w\s?(\S+)\s?\w.*','\\1',getattr(operator,op).__doc__)
    if re.match('^\\W+$',sym):return sym 
```

例子：

```
 get_symbol('matmul')
'@'
get_symbol('add')
 '+'
get_symbol('eq')
'=='
get_symbol('le')
'<='
get_symbol('mod')
'%'
get_symbol('inv')
'~'
get_symbol('ne')
'!=' 
```

仅举几例。你也可以这样做：

```
{get_symbol(i):i for i in operator.__all__} 
```

这为您提供了带有符号的字典。你会看到`abs`给出的东西不正确，因为没有实现符号版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T15:23:46.637

您可以使用 eval 为运算符生成 lambda 函数，而不是使用`operator`模块。Eval 通常是不好的做法，但我认为为此目的它很好，因为它并不是真正疯狂的。

```
def make_binary_op(symbol):
    return eval('lambda x, y: x {0} y'.format(symbol))

operators = {}
for operator in '+ - * / ^ % (etc...)'.split(' '):
    operators[operator] = make_binary_op(operator)

operators['*'](3, 5) # == 15 
```

# android - 哈希导航崩溃 android 浏览器

> ID：14695784
> 
> 赞同：1
> 
> 时间：2013-02-04T21:15:12.663
> 
> 标签：android, knockout.js

我正在使用 KnockoutJS 和 PagerJS 测试一个 html 单页应用程序。我正在使用股票浏览器在我的 Xperia S (ICS 4.0.4) 上测试这个应用程序，并且我的应用程序使用 SIGSEV ( [Full crash tombstone](http://pastebin.com/UDXz9k4f) ) 使浏览器崩溃，通过注释掉这一行来解决这个问题（即使它是严重损害我的应用程序的用户工作流程）

```
window.location.hash = "start"; 
```

顺便说一句：

```
<div data-bind="page: {id: 'start', title: 'Overview', afterShow: switchToOverview}">
    SNIP
</div> 
```

有任何想法吗？

更多细节：崩溃似乎与按下虚拟键盘上的“开始”按钮有关，因为使用提交按钮提交表单工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:50:45.617

您需要以散列开始散列`(#)`！

来自[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.location)：

> `window.location.hash:`
> 
> > URL 中 # 符号之后的部分，包括 # 符号。您可以侦听 hashchange 事件以获取支持浏览器中哈希更改的通知。

# email - 我正在尝试建立一个 Mediawiki 自动通知系统

> ID：14695791
> 
> 赞同：0
> 
> 时间：2013-02-04T21:15:50.527
> 
> 标签：email, mediawiki, wiki

我正在尝试为一家小型设计公司建立一个使用 SMW 的系统，在该系统中，客户的项目每天都在进行，设计师会在 wiki 上更新该客户的页面（充当即兴变更日志）。

每个客户都充当自己的类别，与具有该单个客户的电子邮件标签的模板相关联。

我要做的是设置 mediawiki 站点，以便新页面通过电子邮件发送给客户。我试图避免设置一个通知系统，它只会告诉客户去查看他们的 wiki 页面，因为那样要么 a. 让每个人都能看到客户 A. 或 b. 的工作日志。导致客户 A 必须在 wiki 上注册。A 和 B 都不是我们所说的“好”。

有没有人对基于当前在 wiki 中客户页面上的电子邮件设置摘要系统有任何建议？我再说一遍，在这个理想的系统中，客户最终不会获得对 wiki 的任何访问权限，包括只读权限。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:40:51.893

这可能吗？，我建议将页面下载为 xml 并将该 xml 发送给他（但它不会获取图像，或者可能获取页面的图像并将其发送给他

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:18:12.133

您可能需要为 MediaWiki 编写（或聘请某人编写）扩展程序。但在你这样做之前，重新考虑你的概念。

*首先，Wiki 是关于编辑的，因此仅*发送一封关于创建新文章的电子邮件可能是不够的。如果你的员工犯了一个愚蠢的错误怎么办？如果他在提交前忘记使用预览怎么办？另一方面，在每次页面更新时向客户发送垃圾邮件也是不好的选择。考虑使用[Flagged Revisions 扩展](http://www.mediawiki.org/wiki/Extension%3aFlaggedRevs)。创建一个新页面，再次仔细阅读，然后将修订标记为稳定。您所需的通知扩展程序会在此类标记上发送一封电子邮件，允许您发送包含更新的电子邮件。请记住，用户可能有权自动标记他们的修订——禁用它。

类别可能与任何其他文章一样具有内容，因此它们适合存储电子邮件地址。

所以，回到你的问题：创建新页面时会触发[ArticleInsertComplete 钩子。](http://www.mediawiki.org/wiki/Manual%3aHooks/ArticleInsertComplete)我不确定标记给定页面时触发了哪个钩子，它可能是[ArticleSaveComplete](http://www.mediawiki.org/wiki/Manual%3aHooks/ArticleSaveComplete)。您的分机应该连接到这些钩子之一并发送电子邮件。我不确定如何检索呈现的文章，但这当然是可能的（在最坏的情况下，您可以执行 Web 请求来收集 HTML，但必须有更好的方法）。

# javascript - 将数组绑定到AngularJS中的指令变量

> ID：14695792
> 
> 赞同：32
> 
> 时间：2013-02-04T21:15:55.403
> 
> 标签：javascript, html, angularjs

我正在尝试将数组放入模板中，以便可以使用其中的个人值。我的问题是该属性在我的模板中变成了一个字符串，因此它不再可以作为 {{var[0]}} 访问，而是返回“字符串”的第一个字符，通常是“[”

这是数据的简化设置：

```
"varForward": ["100", "1"],
"varBack": ["1", "100"] 
```

这是与该数据交互的 HTML 文件的简化部分：

```
<my-customer-vars value="{{varForward}}">
    </address-numbers>
<my-customer-vars value="{{varBack}}">
    </address-numbers> 
```

最后，这里是应该用我自己的东西替换自定义标签的部分：

```
directive('myCustomerVars', function($compile) {
    return {
        restrict: 'E',
        scope: {
            value: "@"
        },
        template:
        '<div>'+
          '<p class="body-text">Some stuff goes here</p>'+
          '<input type="text" name="firstinput" value="{{value[0]}}"> - '+
          '<input type="text" name="secondinput" value="{{value[1]}}">'+
        '</div>',
        replace: true
    }
}); 
```

所以我在这里，如果我尝试使用 value[0] 我会得到 [ 如果我尝试获得 value[1] 我会得到 " 等等。在指令模板中使用数组有什么帮助吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-04T21:20:20.187

您需要将“@”更改为“=”并在没有 {{ }} 的情况下传入数组

像这样：

```
<my-customer-vars value="varForward">
    </my-customer-vars>
<my-customer-vars value="varBack">
    </my-customer-vars> 
```

指示：

```
directive('myCustomerVars', function($compile) {
    return {
        restrict: 'E',
        scope: {
            value: "="
        },
        template:
        '<div>'+
          '<p class="body-text">Some stuff goes here</p>'+
          '<input type="text" name="firstinput" value="{{value[0]}}"> - '+
          '<input type="text" name="secondinput" value="{{value[1]}}">'+
        '</div>',
        replace: true
    }
}); 
```

发生这种情况是因为由 @ 定义的 directuve 属性中的每个表达式都被评估为仅作为字符串，而以另一种方式，它被评估为绑定表达式。（有 2 路绑定，所以要小心）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-27T23:44:59.047

如果您不想在指令中创建隔离范围（例如在创建自定义验证指令时），您可以将数组传递为：

```
<my-customer-vars model="varForward"> 
```

然后将指令的链接函数中的值读取为：

```
directive('myCustomerVars', function($compile) {
    return {
        restrict: 'E',
        link: function (scope, elm, attrs, ctrl) {
            var myVars = scope[attrs.model]; // <--- took a time to figure out
            console.log(myVars);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-29T12:36:16.273

只是为了添加到 Danita 的回复中，您将不得不`$eval`用于获取此范围变量：

只是改变

```
var myVars = scope[attrs.model]; 
```

到

```
var myVars = scope.$eval(attrs.model); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T17:55:38.077

只是另一个角度 - 如果问题只是在角度应用程序中管理字符串数组，我将使用以下之一（或任何类似的）：

1.  [ngTagsInput](http://mbenford.github.io/ngTagsInput/)
2.  [带标签模式的角度选择2](https://github.com/angular-ui/ui-select2#using-simple-tagging-mode)
3.  [列表](https://docs.angularjs.org/api/ng/directive/ngList)

除非您正在练习创建自己的角度指令（然后忽略我的回答）

# android - (Android) 二维数组和 Spinner

> ID：14695797
> 
> 赞同：0
> 
> 时间：2013-02-04T21:16:13.197
> 
> 标签：android, multidimensional-array, spinner

我有一个（简单的）二维数组。我想做的是用该数组中的数据填充微调器。

```
String ap1[][] = new String[5][2];
ap1[0][0]="First item";
ap1[0][1]="1";
ap1[1][0]="Second item";
ap1[1][1]="2";
//etc. etc. etc.

Spinner apSpinner = (Spinner) findViewById(R.id.ap_spinner); 
```

现在微调器应该填充来自每个数组条目的第一个元素（例如*“第一个项目”、“第二个项目”、...*），并且应该在做出选择后读取第二个项目并在以后的计算中使用。

我尝试使用以下代码，但得到了一些奇怪的文本，例如 *LJava.Lang.String;@...*

```
ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this, android.R.layout.simple_spinner_dropdown_item, ap1);
apSpinner.setAdapter(spinnerArrayAdapter); 
```

关于我的问题的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:21:20.253

Adding a dimension to the array makes your life harder. If you goal of your 2nd dimension is to

> should be read after a selection has been made and used in later

You can achieve/get the same number in `position+1` . Depending one when/how you will use it.

You also have to remember, what you see in your list ([Docs](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int,%20T%5B%5D%29)):

> To use something other than TextViews for the array display, for instance, ImageViews, or to have some of data besides toString() results fill the views, override getView(int, View, ViewGroup) to return the type of view you want.

So you will see `String[].toString()` , since its the 2nd dimension. Hence you see `classname@hashcode`

# c# - Windows 7 上的 IIS 500.19

> ID：14695799
> 
> 赞同：0
> 
> 时间：2013-02-04T21:16:18.863
> 
> 标签：c#, iis, iis-7, visual-studio-2012

我最近将所有项目从旧计算机迁移到运行 Windows 7 64 位版本的较新系统。我现在正尝试在本地启动和运行 ASP.NET 站点，但我不断收到错误消息：

HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

当我通过 Visual Studio 2012 的 ASP.NET 配置工具时，没有报告任何错误 - 这仅在我实际尝试运行项目时发生。我尝试从 64 位模式切换到 32 位模式，在 64 位模式下启用 32 位应用程序，将应用程序池的身份和 IIS 用户组设置为完全控制所有文件 - 没有任何效果。

有没有人发生过这种情况，如果有，你是如何解决的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:02:57.527

几个需要考虑的事情。

1.  您是否在旧系统的 IIS 中安装了任何模块？即URL重写等。

如果是这样，要么删除配置中他们将引用的部分（可能是个坏主意，安装模块是有原因的），要么在新系统上重新安装模块。

1.  事件查看器中的应用程序日志将准确告诉您 Web 配置中的哪一行出错。

祝你好运！

# php - 无法让 lineitems 在 Authorized.net xml createTransactionRequest 中工作

> ID：14695800
> 
> 赞同：0
> 
> 时间：2013-02-04T21:16:31.307
> 
> 标签：php, authorize.net

我正在尝试从 mysql 表中提取信息并将其插入 createTransactionRequest 数组以显示电子邮件中的行项。当我这样做并在页面上回显时，它看起来应该是这样，但它一直给我一个错误。如果我删除数组（ $lineitem ），我创建它会很好。我觉得我插入了这个错误，或者它只是不可能按照我试图这样做的方式来做到这一点。希望有这方面经验的人可以帮助我解决这个问题。

我像这样创建数组。

```
while($r = mysql_fetch_array($cartitems)) {
$lineitem[] = array('itemId' => ''.$r['itemid'].'','name' => ''.$r['productname'].'','description' => ''.$r['productdescription'].'','quantity' => '1','unitPrice' => ''.$price.'');
} 
```

然后我像这样将它插入数组中..

```
$xml->createTransactionRequest(array(
'refId' => rand(1000000, 100000000),
'transactionRequest' => array(
'transactionType' => 'authCaptureTransaction',
'amount' => 45.00,
'payment' => array(
'creditCard' => array(
    'cardNumber' => '4111111111111111',
    'expirationDate' => '122015',
    'cardCode' => '123',
),
),
'order' => array(
'invoiceNumber' => '123123',
'description' => 'Purchase from website',
),
'lineItems' => array(
'lineItem' => $lineitem
),
'poNumber' => '123123321',
'customer' => array(
'id' => 123,
'email' => email@website.com,
),
'billTo' => array(
'firstName' => $firstname,
'lastName' => $lastname,
'address' => $address,
'city' => $city,
'state' => $state,
'zip' => $zipcode,
'country' => 'USA',
),
'customerIP' => 12-12-12-1234,
'transactionSettings' => array(
'setting' => array(
    0 => array(
        'settingName' =>'allowPartialAuth',
        'settingValue' => 'false'
                                                ),
    1 => array(
        'settingName' => 'duplicateWindow',
        'settingValue' => '0'
    ),
    2 => array(
        'settingName' => 'emailCustomer',
        'settingValue' => 'true'
    ),
    3 => array(
        'settingName' => 'recurringBilling',
        'settingValue' => 'false'
    ),
    4 => array(
        'settingName' => 'testRequest',
        'settingValue' => 'false'
    )
)
),
),
)); 
```

---------------编辑下面，显示打印输出----------------

```
Array
(
    [refId] => 90801855
    [transactionRequest] => Array
        (
            [transactionType] => authCaptureTransaction
            [amount] => 31.41
            [payment] => Array
                (
                    [creditCard] => Array
                        (
                            [cardNumber] => 4111111111111111
                            [expirationDate] => 042012
                            [cardCode] => 123
                        )

                )

            [order] => Array
                (
                    [invoiceNumber] => 1360116011
                    [description] => Purchase from website
                )

            [lineItems] => Array
                (
                    [lineItem] => Array
                        (
                            [0] => Array
                                (
                                    [itemId] => 1
                                    [name] => item one title
                                    [description] => item one description
                                    [quantity] => 1
                                    [unitPrice] => 19.90
                                )

                            [1] => Array
                                (
                                    [itemId] => 4
                                    [name] => item 4 title
                                    [description] => item 4 description
--
                                    [quantity] => 1
                                    [unitPrice] => 15.00
                                )

                        )

                )

            [poNumber] => 22
            [customer] => Array
                (
                    [id] => 2
                    [email] => email@website.com
                )

            [billTo] => Array
                (
                    [firstName] => john
                    [lastName] => smith
                    [address] => 132 addy here lane
                    [city] => foxboro
                    [state] => MA
                    [zip] => 01955
                    [country] => USA
                )

            [customerIP] => 12.123.123.123
            [transactionSettings] => Array
                (
                    [setting] => Array
                        (
                            [0] => Array
                                (
                                    [settingName] => allowPartialAuth
                                    [settingValue] => false
                                )

                            [1] => Array
                                (
                                    [settingName] => duplicateWindow
                                    [settingValue] => 0
                                )

                            [2] => Array
                                (
                                    [settingName] => emailCustomer
                                    [settingValue] => true
                                )

                            [3] => Array
                                (
                                    [settingName] => recurringBilling
                                    [settingValue] => false
                                )

                            [4] => Array
                                (
                                    [settingName] => testRequest
                                    [settingValue] => false
                                )

                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:52:26.830

我不知道这是好消息还是坏消息。使用您提供的数据，我能够让我的两个测试正常工作。

*   [代码示例 1](http://pastebin.com/z5YxUew1)
*   [代码示例 2](http://pastebin.com/fLkGbZEU)
*   [结果](http://pastebin.com/WH6b4uKM)

第一个代码示例是使用我的示例代码和您提供的数据。示例代码使用您在上面提供的代码和我手动添加的行项目。您可以在第三个代码示例中看到请求和响应 XML。

在我们解决这个问题时，这里有一些可能有用的提示：

*   在您上面提供的示例数据中，在第二行项目中，我`--`随机看到了几个破折号。它们在您的代码中吗？或者这只是一个剪切和粘贴错误？
*   Authorize.Net 并不真正关心数值是否在引号中传递，因此将它们放在那里总是一个好主意。

# drupal - 创建 Drupal 沙箱

> ID：14695801
> 
> 赞同：1
> 
> 时间：2013-02-04T21:16:35.740
> 
> 标签：drupal, sandbox

这可能是一个超级用户的问题。我不确定，但我需要为现有的 Drupal 站点创建一个沙箱。我想知道是否有一种经过验证的真实方法可以做到这一点，还是我必须尝试将我需要的所有文件拼凑在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:12:04.857

只需在本地机器上安装 Acquia 或 Mamp/Xammp 堆栈，创建一个新数据库并将当前数据库转储到某处。

安装相同版本的 Drupal 并选择新的数据库。

然后，只需复制当前的“drupal”文件夹，除了 settings.php 文件（从新安装中保留较新的文件夹）。

将数据库导入到您在本地安装新的 drupal 的新数据库中。

登录，应该很好去。我所做的一切都很好。

# mysql - MySQL如何统计一个count的结果？

> ID：14695803
> 
> 赞同：1
> 
> 时间：2013-02-04T21:16:42.950
> 
> 标签：mysql, sql

如何在 MySQL 中构造查询来计算组的结果？所以，

表 A

```
Month    Item
Jan         1
Jan         3
Feb         2
Feb         2
Mar         3 
```

表 B

```
Item   Color
1       red
1       blue
2       black
3       black
3       yellow 
```

我想要一个查询，它会告诉我表 B 中存在多少表 A 中的项目，其中每个月至少有两种颜色。换句话说，我每个月卖出了多少件超过 2 种颜色的商品。所以结果是：

```
Month  Results
Jan      2
Feb      0
Mar      1 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:26:39.240

如果我正确理解了这个问题，我认为以下内容可以回答它：

```
select a.month,
       (case when count(distinct b.color) >= 2 then COUNT(distinct a.item) else 0 end)
from TableA a join
     TableB b
     on a.item = b.item
group by a.month 
```

这会计算一个月内的颜色总数。如果 2 或更大，则它具有项目数。否则，它有 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:40:46.187

此子查询返回至少具有两种颜色的所有项目：

```
select Item
from TableB
group by Item
having count(distinct Color)>1 
```

您可以将它与 TableA 连接起来，结果查询是这样的：

```
select
  A.Month,
  Count(B.Item)
from
  TableA A left join (
    select Item
    from TableB
    group by Item
    having count(distinct Color)>1) B
  on A.Item=B.Item
group by A.Month 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:20:20.530

Try something like this:

```
SELECT DISTINCT T.Month, COALESCE(T2.Cnt2,0) Cnt
FROM (
   SELECT Month
   FROM TableA
) T LEFT JOIN (
   SELECT A.Month, COUNT(DISTINCT B.Color) Cnt, COUNT(DISTINCT B.Item) Cnt2
   FROM TableA A
      INNER JOIN TableB B ON A.Item = B.Item
   GROUP BY A.Month
   HAVING  COUNT(DISTINCT B.Color) >= 2
) T2 ON T.Month = T2.Month 
```

It Uses `GROUP BY` and `HAVING` to get the `COUNT` of `DISTINCT` Items in TableA and TableB. To return Feb 0, you need the `LEFT JOIN`.

Here is the [SQL Fiddle](http://sqlfiddle.com/#!2/410a5/1).

Good luck.

# c++ - 如何在 C++ 中打印结构数组中的所有内容？

> ID：14695805
> 
> 赞同：7
> 
> 时间：2013-02-04T21:16:52.040
> 
> 标签：c++, struct

我有一个名为 bookStruct 的结构化数据类型，books 是与 bookStruct 数据类型关联的变量的名称。book[10] 是 10 个字符长的数组，包含 4 个字符的数据，这意味着当其余为空（o 值）时，book[0] 到 book [3] 中有数据。现在我想打印已经在数组中可用的数据，而不是打印那些为空的数据，否则为 0。我尝试了下面的代码，但没有运气。我在这里做错了什么？

```
for (int i=0;i<MAX_BOOKS && books[i]!='\0';i++)
            {
                cout << "Book Title: " << books[i].bookTitle << endl;
                cout << "Total Pages: " << books[i].bookPageN << endl;
                cout << "Book Review: " << books[i].bookReview << endl;
                cout << "Book Price: " << books[i].bookPrice<< "\n\n" << endl;
            } 
```

这是书结构的声明

```
struct bookStruct
{
    string bookTitle;
    int bookPageN;
    int bookReview;
    float bookPrice;
};

bookStruct books[10]; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T21:49:42.493

重载输出运算符。例如：

```
struct Book {
    string title;
    int pageN;
    int review;
    float price;
};

ostream& operator<<(ostream& os, const Book& book) {
    return os << "Title: " << book.title << endl
              << "Pages: " << book.pageN << endl
              << "Review: " << book.review << endl
              << "Price:" << book.price << endl;
} 
```

然后你可以输出到任何流：

```
Book book;
ostringstream oss;
oss << book; 
```

要遍历所有书籍，复制到`std::cout`，仅当书籍有标题时，您需要[`std::copy_if`](http://en.cppreference.com/w/cpp/algorithm/copy)：

```
bool bookHasTitle(const Book& book) {
    return book.title.empty() == false;
}

Book books[10];

copy_if(books, books+10, ostream_iterator<Book>(cout, "\n"),
        bookHasTitle); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:24:57.950

很难说这里问的是什么。你看，只计算你存储了多少本书是很容易的：

```
int numBooks = 0; 
```

当您添加一本书时，您会递增`numBooks`直到`MAX_BOOKS`。

```
for( int i=0; i<numBooks; i++ ) ... 
```

如果你不想这样做，你当然不能测试`books[i] != '\0'`，因为那是针对单个字符测试结构。

相反，您可能想要测试`books[i].bookTitle.size() != 0`

（或确实`!books[i].bookTitle.empty()`）。

```
for( int i=0; i<MAX_BOOKS && !books[i].bookTitle.empty(); i++ ) ... 
```

另一种选择是将书籍存储在 a`vector`而不是数组中，因此您不必担心最大计数和当前计数。矢量可以为您缩小和增长。

```
vector<bookStruct> books;

...

for( int i = 0; i < books.size(); i++ ) ... 
```

# asp.net-mvc-4 - 带有脏对象的淘汰赛js列表

> ID：14695807
> 
> 赞同：0
> 
> 时间：2013-02-04T21:17:03.730
> 
> 标签：asp.net-mvc-4, knockout.js

我正在学习 Knockout，但我被困在一个似乎相当微不足道的问题上。下面是一些修改过的代码，但大部分来自 Pluralsight 课程。我正在使用 MVC4，我所有的数据都来自 JSON 中的控制器。

```
Public Function GetData() As ActionResult

    Return Json(dataContext.GetData, JsonRequestBehavior.AllowGet)

End Function 
```

这是我的看法

```
<ul data-bind="foreach: items">
        <li >
            <input type="text" id="name"  data-bind="value: name" />

        </li>
</ul> 
```

我的视图模型：

```
 $(document).ready(function () {

    ko.dirtyFlag = function (root) {
        var result = function () { },
            _initialState = ko.observable(ko.toJSON(root))

        result.isDirty = ko.dependentObservable(function () {
            return _initialState() !== ko.toJSON(root);
        });

        result.reset = function () {
            _initialState(ko.toJSON(root));
        };

        return result;
    };

    function Customer(data) {
          this.name = ko.observable(data.name);
          this.id = ko.observable(data.id);
          this.dirtyFlag = new ko.dirtyFlag(this);
}

    var ViewModel = function (items) {
          var self = this;
          this.items = ko.observableArray([]);

          this.save = function () {
            alert("update");
                };

          this.addNew = function () {
            alert("add");
                };

          this.deleteItem = function () {
           alert("delete");
                 };

          this.dirtyItems = ko.computed(function () {
            return ko.utils.arrayFilter(this.items(), function (item) {
                return item.dirtyFlag.isDirty();
            });
           }, this);

          this.isDirty = ko.computed(function () {
            return this.dirtyItems().length > 0;
          }, this);

        $.getJSON("/home/GetCustomers", function (allData) {
                    var mappedLoadouts = $.map(allData, function (item) { return new     Customer(item) });
                    self.items(mappedLoadouts);
                });
          };

            ko.applyBindings(new ViewModel()); 
```

请注意，此代码已更改以简化示例。

我的第一个问题是，为什么这不起作用？我不断收到“DirtyItems”，有人能告诉我为什么吗？我看不到范围问题，因为我指的是同一上下文中的客户。

此外，到目前为止，我发现的所有帮助都使用了不同的 Javascript 方法。就像这个类似的问题[仅从 observableArray 获取修改行的最佳方法（当有批量编辑选项时）](https://stackoverflow.com/questions/8662626/best-way-to-get-only-modified-rows-from-observablearray-when-there-is-bulk-edit)。当我尝试重建我的视图模型以遵循此示例时，我在 foreach 上收到错误：客户（与 DirtyItems 相同的错误）。

这是一个很有希望的问题，但答案再次使用了其他 Javascript 方法[Knockoutdirty flag event](https://stackoverflow.com/questions/10896244/knockout-dirty-flag-event)

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:41:11.033

我不确定，但我猜问题是 Knockout 需要您限定 DirtyItems，因为您在函数中使用它。

```
<div data-bind="text: ko.toJSON($root.DirtyItems)"></div> 
```

如果您仍然遇到问题，您可能需要发布一个重现问题的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:44:54.020

我不知道这是否是问题的一部分，但您的 DirtyFlag 代码中有一个错字：

```
return ko.utils.arrayFilter(this.**Customerss**, function (item) { 
```

这可能是 Judah 所说的，关于需要 $root。这也可能是绑定/时间问题。什么是实际的 JavaScript 消息，DirtyItems 是否“未定义”？

作为个人偏好，我尽量避免嵌入在 HTML 中的此类函数调用，因此我会将“ko.toJSON(DirtyItems)”调用移动到计算函数并绑定到该函数。

# python - 以编程方式在 Google 应用引擎上设置子域

> ID：14695812
> 
> 赞同：1
> 
> 时间：2013-02-04T21:17:14.507
> 
> 标签：python, google-app-engine, web-applications

我正在将我的应用程序部署到主域 www.mysite.com 的 GAE。当有人订阅我的应用程序时，他将使用电子邮件 ID username@company.com。

我想从电子邮件 id 中获取公司，并将 URL 设置为 company.mysite.com，它将映射到 www.mysite.com。我认为这可以通过在域注册商 cpanel 上使用 * 通配符 CNAME 来完成。但是，根据线程[如何设置动态子域跨服务器或在 DNS 设置中](https://stackoverflow.com/questions/1022191/how-to-set-dynamic-subdomain-cross-server-or-in-dns-setting)，我们无法使用 GAE 设置通配符域。

所以，我的问题是我应该如何从电子邮件 ID 以编程方式进行操作，这样我就不必为每个公司手动设置子域？我可以在 GAE 上使用通配符子域还是需要对 AWS 的 route53 做一些研究？

请注意，我已经从 godaddy 注册了我的域名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:18:44.643

与此同时，GAE 已经更新，现在完全支持子域通配符：[自定义域文档](https://developers.google.com/appengine/docs/domain)。

也就是说，我在 Godaddy 上也遇到了通配符问题。Godaddy 上的通配符是`**`但仍然不起作用，我需要手动添加子域。顺便说一句，我还没有为此寻找解决方案，我更喜欢将名称服务器指向其他地方。

如果你使用 webapp2 看看[Domain and subdomain routing](http://webapp-improved.appspot.com/guide/routing.html#domain-and-subdomain-routing)，看起来很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:28:02.197

**指示**

1.  注册 AWS Route53
2.  在您的新 Route53 帐户中，创建一个新的托管区域，该值是您在 GoDaddy 上托管的域（在您的示例中，区域名称为`mysite.com`）
3.  现在按照[此处](http://support.godaddy.com/help/article/664/setting-nameservers-for-your-domain-names "这里")的步骤在“为向我们注册的域名设置名称服务器”>>“我的域有特定的名称服务器”下（您将输入在第 2 步中提供给您的名称服务器）
4.  现在，此域需要是 Google Apps 域，因此如果不是，请注册 Google Apps 或将域添加到您现有的 Google Apps 帐户。
5.  完成[自定义域设置过程](https://developers.google.com/appengine/docs/domain)`*`，但在步骤 5 中输入您的子域
6.  返回到您的 Route53 控制台并将新记录集添加到您在步骤 2 中创建的托管区域。将类型切换为`CNAME`，输入`*`作为名称，值应设置为`ghs.googlehosted.com`（或通过设置过程提供给您的任何内容在步骤 5)

仅此而已。您必须等待 DNS 设置正确传播，但现在`wildcard.mysite.com`应该指向您的应用程序。

**笔记**

这将允许任何通配符指向您的应用程序。请参阅上面链接的自定义域设置过程页面中有关**通配符子域映射的更多**信息下的注释。您可以通过处理应用程序中的值并为您不想确认的子域返回 404 错误等来限制应用程序中“允许”的子域（在您的用例中，任何不是公司名称的值）已注册您的应用程序的用户）

# jsp - 从每个循环中获取请求参数

> ID：14695816
> 
> 赞同：0
> 
> 时间：2013-02-04T21:17:31.073
> 
> 标签：jsp, jakarta-ee, jstl

我有一个像这样的表的 JSP

```
<table border="1">
<tr>
    <th>Step</th>
    <th>Date</th>
</tr>
<c:forEach var="myVar" items="${sessionScope.myBean.myList}" varStatus="status">
    <tr>
    <td><input type="text" name="index" value="${status.count}" disabled></td>
    <td><input type="text" name="date" value="${myVar.date}"></td>
    </tr>
</c:forEach>
</table> 
```

该表位于表单内，带有提交输入标签。

假设 myList（bean myBean 中的列表属性）包含 2 个元素，我的表正确显示了两行，每行都有步骤和日期。

假设我编辑了两行以在每一行上输入日期。

当我单击提交输入时，如何获得两个输入的日期？我怎么知道它们应该存储在 bean 列表中的哪个项目中？

我在发布表单后查看了 request.getParameterNames() 的调试，但它只包含一个“日期”参数。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:19:24.327

Use `HttpServletRequest#getParameterValues()`. The values are in the same order as the HTML input elements appear in the HTML DOM tree.

```
String[] dates = request.getParameterValues("date");
// ... 
```

# version-control - Why Doesn't Mercurial Make it Easy to Ignore Uncommitted Files on a Merge?

> ID：14695821
> 
> 赞同：-2
> 
> 时间：2013-02-04T21:17:48.483
> 
> 标签：version-control, mercurial

Am I not understanding something here? I've not committed these files. They shouldn't exist in a change-set anywhere. While I do appreciate Mercurial's efforts to preserve any work I've done that I might want to keep why isn't the sensible design choice on Mercurial's part:

a) Ignore them as per the general process where they effectively are if you remember to pull/update before committing changes in other files.

or

b) Ask user if s/he'd like them overwritten / if no, give directions on how to merge with the proper args that tell Mercurial to ignore files with uncommitted changes in them.

How did we get to:

c) Refuse to do anything forcing user to Google for some hack-ish solution to work around a popular version control system's complete inability to take into account that sometimes we forget to pull/update before commits and most of us (unfortunately) have a ton of config files we never want committed.

What is it I'm not getting here? Why is it all or nothing like this? And given that there's a reason for it, why is there no "duh" way to establish these files as off-limits in the first place? I'm getting semi-ranty here but I am legitimately trying to understand. What's the win here that hasn't sunk in yet that makes such awkwardness necessary?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:33:40.197

在不了解您如何使用 Mercurial 的更多信息的情况下，我们只能猜测正在发生的事情。您的主要问题似乎是为什么没有一种简单的方法可以让 Mercurial 忽略未提交的更改，其次为什么我们被迫在合并之前提交更改。

首先回答第二个问题，在两个变更集之间执行合并使这些变更集成为新的合并变更集的父级。因此，您的工作目录中不得有预先存在的（未提交的）更改（它必须是“干净的”）。如果您尝试将另一个变更集合并到“脏”工作目录，然后决定撤消该合并而不是提交它，Mercurial 将不知道将工作目录放回什么状态。为什么你不能告诉 Mercurial 忽略合并有变化的文件？因为 Mercurial 不能在每个文件的基础上工作，它是在“变更集”的基础上工作的，其中单个变更集及时保存所有跟踪文件的状态（与 Subversion 之类的不同，

如果您的计划是在合并时丢失任何本地更改，您只需首先删除任何本地更改，您可以通过执行干净更新来完成，根据 Mercurial 帮助：`hg update --clean .`

至于您的第一个问题，有一种非常简单的方法可以忽略您不想存储在存储库中的内容，那就是使用`.hgignore`文件来指定这些文件。你提到你们中的大多数人“有大量我们永远不想提交的配置文件”，这正是`.hgignore`文件的用途。Mercurial 将忽略这些文件，并且它们永远不会被提交（除非您*明确*添加它们）。因此，如果您更改了它们，Mercurial 仍然会忽略它们，并且一切都会非常顺利。需要注意的是，如果存储库已经跟踪了一个文件，那么忽略它为时已晚。

如果您决定在提交您所做的更改之前确实需要合并（MQ 和 Shelve 扩展浮现在脑海中），那么有一些解决方案，但是您仍然会遇到合并回您所做更改的潜在问题到新的工作目录上，这意味着您将执行两个合并，而不仅仅是一个。

您的最后一个问题是“我没有到达这里是什么？”。虽然我不想听起来刺耳，但您的问题表明您“没有得到”应该如何配置和使用 Mercurial。`.hgignore`您需要花一些时间来阅读诸如 The [Definitive Guide](http://hgbook.red-bean.com/)是一个很好的地方，它涵盖了诸如合并 (Ch2)、文件忽略 (Ch7) 等内容。即使对于经验丰富的 Mercurial 用户来说，这也是一本好书。

我希望这会有所帮助。

# java - What is wrong with my ChangeListener

> ID：14695827
> 
> 赞同：1
> 
> 时间：2013-02-04T21:18:16.573
> 
> 标签：java, swing, jslider, changelistener

I have some code for a changeListener below. Basically I need to set the value of my Voltage variable to the value which my JSlider is currently positioned at. So if my slider was at 5 then my variable Voltage would read 5\. However this does not happen and I am unsure why. Whats missing which would set the variable to have the current value that my JSlider is at?

```
public double getVoltageFromSlider() {

sliders.voltageSlider.addChangeListener(new ChangeListener() { 

 public void stateChanged(ChangeEvent event) {

                Voltage = (double) event.getSource();
                Voltage = sliders.voltageSlider.getValue();
            }
        });
        return Voltage;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:44:04.693

您似乎正在混合两种获取电压的方法：从滑块“拉”值，并`voltage`使用侦听器将值“推”到变量中。

正如 Marcelo 所指出的，您的代码所做的是，它`ChangeListener`每次调用滑块时都会附加一个新滑块，但随后会立即返回当前绑定到`voltage`变量的值，而无需等待侦听器实际*设置*该值。

相反，您应该尝试以下方法之一：

1.  *在创建滑块*`ChangeListener`时将 a 附加到滑块，并让侦听器设置`voltage`变量的值。在这种情况下，`getVoltageFromSlider`不需要该方法。
2.  *或者*根据需要使用 getter（或只是调用`sliders.voltageSlider.getValue()`）来检索滑块的值。在这种情况下，监听器不是必需的。

但是，我的建议是坚持使用侦听器，因为这样`voltage`变量始终是最新的。并删除该行`Voltage = (double) event.getSource()`，因为事件的来源是 JSlider 本身，这将导致异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:24:19.017

您的方法是向滑块添加一个更改侦听器，它实际上并没有检索该值。您返回的值是分配给`Voltage`变量的值，我假设它是您的类的一个字段。

# javascript - How to Open and Automatically Pan to a Specific SVG ID on a Large Drawing

> ID：14695829
> 
> 赞同：0
> 
> 时间：2013-02-04T21:18:17.653
> 
> 标签：javascript, html, svg, filemaker

At the risk of sounding like a rookie, which I am, how can I change the default opening position of an SVG drawing? The drawing is quite large -- 2130 x 3100 px -- larger than my screen area, and has IDs that define paths. The paths outline the various rooms on an architectural floor plan.

Tried to paste the entire SVG code, to help illustrate the point and to request help from readers. Is there a way I can attach it? For now, only snippets (of random rooms) are included.

Currently, the file defaults to the top left corner of the drawing, which I'd like to change to open on "myID". For example, when the given SVG is opens, user sees top left rooms P117, P118, P119\. What if I wanted user to see bottom right room P124, or near-center room P113? That is, can I use a room ID to specify the opening position of the SVG? And can I do it internally?

Maybe I should mention that I'm using this in a "web viewer" that understands SVG, HTML, and javascript, but it's not a browser per se. Those of you familiar with FileMaker will know what I mean. I'm thinking this matters in case some of you suggest external file references, which won't help.

Anyway, here's the SVG. Any help is greatly appreciated.

Thanks, Leo

```
<path
       style="fill:none;stroke:#250000;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
       d="m 1146.9779,223.87304 c 0,51.75805 0,103.51609 0,155.27414 164.7957,0 329.5913,0 494.387,0 0,-20.01962 0,-40.03925 0,-60.05887 -164.7957,-31.73842 -329.5913,-63.47685 -494.387,-95.21527 z"
       id="P119"
       inkscape:connector-curvature="0"
       inkscape:label="#P119" />
<path
       style="fill:none;stroke:none"
       d="m 1149.6255,377.00439 c 59.8716,0.24414 119.7432,0.48829 179.6148,0.73243 -0.3382,30.85668 -0.6763,61.71337 -1.0145,92.57005 -7.8876,0 -15.7751,0 -23.6627,0 0,20.43204 0,40.86409 0,61.29613 6.798,0 13.5961,0 20.3941,0 0,6.31056 0,12.62111 0,18.93167 -49.8049,0 -99.6099,0 -149.4148,0 0,13.80389 0,27.60779 0,41.41168 -9.0332,0 -18.0665,0 -27.0997,0 0,-44.02138 0,-88.04275 0,-132.06413 7.0612,0 14.1223,0 21.1835,0 0,-10.53522 0,-21.07043 0,-31.60565 -6.3287,0 -12.6575,0 -18.9862,0 -0.3382,-17.09073 -0.6763,-34.18145 -1.0145,-51.27218 z"
       id="P118"
       inkscape:connector-curvature="0"
       inkscape:label="#P118" />
<path
       style="fill:none;stroke:none"
       d="m 1184.3315,559.32378 c 47.1194,0 94.2387,0 141.3581,0 -0.4883,19.09995 -0.9765,38.1999 -1.4648,57.29985 -47.1194,-0.73243 -94.2387,-1.46485 -141.3581,-2.19728 0.4883,-18.36752 0.9765,-36.73505 1.4648,-55.10257 z"
       id="P117"
       inkscape:connector-curvature="0"
       inkscape:label="#P117" />

<path
       style="fill:none;stroke:none"
       d="m 2763.9405,2607.0739 c 0,80.4835 0,160.967 0,241.4505 39.2273,0 78.4545,0 117.6818,0 0,-80.4835 0,-160.967 0,-241.4505 -39.2273,0 -78.4545,0 -117.6818,0 z"
       id="P124"
       inkscape:connector-curvature="0" />

<path
       style="fill:none;stroke:none"
       d="m 1805.24,1677.2866 c 0,41.4253 0,82.8507 0,124.276 28.575,0 57.1501,0 85.7251,0 0,-41.5944 0,-83.1889 0,-124.7833 -28.575,0.1691 -57.1501,0.3382 -85.7251,0.5073 z"
       id="P113"
       inkscape:connector-curvature="0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:20:48.373

根本不是菜鸟问题。如果你还没有，你应该在你的 SVG 元素上声明一个 viewBox。鉴于您的尺寸，它应该看起来像这样：

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2130 3100">
  ...
</svg> 
```

如果您熟悉绘图应用程序，则 viewBox 相当于将缩放工具拖到画布上。前两位数字将是`x`和`y`，最后两位数字将是缩放“矩形”的高度和宽度。

现在，假设您想将视口移动到 room `P113`，这就是您要做的：

```
var svg = document.querySelector('svg');
var room = document.getElementById('P113');
var bbox = room.getBBox();
svg.setAttribute("viewBox",  bbox.x + " " + bbox.y + " 2130 3100"); 
```

这实际上会`P113`在左上角显示房间。如果您想在视口中居中房间，您可以通过计算视口尺寸和房间尺寸来实现，但这应该可以帮助您入门。

# iphone - Search for images in resources

> ID：14695830
> 
> 赞同：0
> 
> 时间：2013-02-04T21:18:26.960
> 
> 标签：iphone, xcode, search, resources

I have a project, which contains images in its resources. For example: image1yellow.png, image2red.png, image3green.png... The number of these images could be different, but my app has to know the number and their names. So I want to collect these images from the resources by searching for them... The 'image' part of the title is constant and right after that there is a number. The final part of the title is always a color name (so..variable strings) >>> image+3+green=image3green. I think somehow I can search with these criterias...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:39:51.053

由于您知道文件名的结构，因此在给定一组变量的情况下，使用特定格式创建一个新的 NSString：

```
NSUInteger arbitraryNumber = 7;
NSString *color = @"yellow";
NSString *extension = @"png";
NSString *imageName = [NSString stringWithFormat:@"image%d%@.%@", arbitraryNumber, color, extension]; 
```

或者将这些图像分配给循环中的数组...

编辑：在对手头的问题进行明确监督之后......

以下是使用正则表达式在文件名中获取所需“短语”的递归解决方案。我只为你写了这个并测试了它。当然，这个东西有点棘手，所以如果你给它一个像“images23green.png”这样的文件名，它可能会失败。如果你担心这个，你应该学习更多关于正则表达式的知识！

要执行此操作，只需调用`[self loadImages]`.

```
- (void)loadImages
{
    NSDictionary *filenameElements = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"^(image)\\d+\\w+\\.\\w{3}$", @"^(image)", @"^\\d+", @"^\\w+", @"^\\w{3}", nil] forKeys:[NSArray arrayWithObjects:@"filename", @"image", @"number", @"color", @"fileExtension", nil]];
    NSString *string = @"image23green.png";      // Example file name
    NSError *error = NULL;
    error = [self searchForSubstring:@"image" inString:string withRegexFormatDictionary:filenameElements beginAtIndex:0];
}

- (NSError *)searchForSubstring:(NSString *)key inString:(NSString *)givenString withRegexFormatDictionary:(NSDictionary *)filenameElements beginAtIndex:(NSInteger)index
{
    NSError *error = NULL;
    NSString *substring = [givenString substringFromIndex:index];

    NSString *regexPattern = [filenameElements objectForKey:key];
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexPattern options:NSRegularExpressionCaseInsensitive error:&error];
    NSArray *matches = [regex matchesInString:substring options:0 range:NSMakeRange(0, [substring length])];
    if ([matches count] > 0)
    {
        NSRange matched = [[matches objectAtIndex:0] rangeAtIndex:0];
        NSLog(@"matched: %@", [substring substringWithRange:matched]);

        index = 0;
        NSString *nextKey;
        if      ([key isEqualToString:@"image"])         { nextKey = @"number"; index = matched.length; }
        else if ([key isEqualToString:@"number"])        { nextKey = @"color"; index = matched.length; }
        else if ([key isEqualToString:@"color"])         { nextKey = @"fileExtension"; index = matched.length + 1; }
        else if ([key isEqualToString:@"fileExtension"]) { nextKey = nil; }
        if (nextKey)
            error = [self searchForSubstring:nextKey inString:substring withRegexFormatDictionary:filenameElements beginAtIndex:index];
    }
    return error;
} 
```

此解决方案接受具有任意长度数值的文件名、仅接受字母字符（即不允许使用连字符）和 3 个字符长的文件扩展名的任何颜色名称长度。如果您想要 3 到 4 个字符长度的范围，可以通过替换`{3}`为来更改`{3-4}`，依此类推...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:30:58.230

**编辑**

实际上，NSBundle 有一个更方便的方法：

> URLsForResourcesWithExtension：子目录：inBundleWithURL：

有了这个，您可以获得所有 png 资源的数组，然后使用它来确定您想要的图像。

要获取以图像开头的资源，您可以使用：

```
    NSArray * array = [NSBundle URLsForResourcesWithExtension:@"png" subdirectory:nil inBundleWithURL:[[NSBundle mainBundle] bundleURL]];
    [数组 indexOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        return [obj isKindOfClass:NSURL.class] && [[((NSURL *) obj) resourceSpecifier] hasPrefix:@"image"];
    }];

```

当然，这**不是**检索它的最佳方法，我几乎可以肯定你有一些简单的逻辑来获取图像名称的结尾，你可能有更好的算法（也许你可以对数组进行排序并使用枚举器）。此外，您可能希望将最终结果（例如所有以图像开头的资源）保存在静态字段中以更快地检索它们，而不是每次都重做所有工作。

基本上，您必须根据您真正想要的来完成其余的实现（或举例说明您的逻辑以获得最终图像）。

**原始回复**

我不确定我理解你想要什么，但我认为它是这样的：

```
    NSArray * ressources = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[NSBundle mainBundle] resourcePath] error:&error];

```

你也可以考虑

> contentsOfDirectoryAtURL：包括PropertiesForKeys：选项：错误：

# scala - 用于按多个条件排序的 Scala 习语

> ID：14695833
> 
> 赞同：20
> 
> 时间：2013-02-04T21:18:40.997
> 
> 标签：scala, sorting, functional-programming, compareto

我想做这样的事情：

```
class Foo extends Ordered[Foo] {
   val x
   val y
   val z
   .
   .
   .
   .
   def compare(that: Foo) = {
      val c0 = this.length compareTo that.length          // primary comparison
      lazy val c1 = this.x compareTo that.x               // secondary comparison
      lazy val c2 = this.y.size compareTo that.y.size     // tertiary comparison
      lazy val c3 = this.z.head compareTo that.z.head     // final tie breaker
      if (c0 != 0) c0 else if (c1 != 0) c1 else if (c2 != 0) c2 else if (c3 != 0) c3 else c4
   }    
} 
```

我想知道是否有任何更清洁的方式来写这种东西。我期待像`Ordering.multipleBy(ordering: Ordered[A]*)`签名这样的东西，它采用可比较的可变参数并选择第一个非零。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-04T21:58:13.483

通常最好使用`Ordering`而不是`Ordered`. `Ordering`是一个类型类并且比`Ordered`（如果只是因为`Ordered`必须由类型实现来比较，而`Ordering`你可以在外面定义这个）灵活得​​多。要为您的类型定义自然排序（默认`Ordering`实例），您只需在伴随对象中定义一个隐式排序值。

所以，序言就足够了。好的是当使用`Ordering`你想做的事情时非常简单，因为元组有一个隐式排序（假设元组元素本身有一个排序）`：

```
object Foo {
  implicit val FooOrdering = Ordering.by{ foo: Foo => 
    (foo.length, foo.x, foo.y, foo.z) 
  }
} 
```

此外，还有一个隐式转换，它将任何具有`Ordering`类型类实例的值转换为一个`Ordered`值（请参阅`Ordered.orderingToOrdered`），因此我们没有什么特别的事情可以自动将 的任何实例传递`Foo`给期望一个 的函数`Ordered[Foo]`）

* * *

**更新**：关于你的新问题：

> 稍微相关 - 有没有办法组成订单？

一种方法是使用基于`Ordering.by`元组并转换为元组的大部分相同技术，但显式传递排序以组合：

```
val byXOrdering = Ordering.by{ foo: Foo => foo.x }
val byYOrdering = Ordering.by{ foo: Foo => foo.y }
val byZOrdering = Ordering.by{ foo: Foo => foo.z }

// Compose byXOrdering and byYOrdering:
val byXThenYOrdering = Ordering.by{ foo: Foo => (foo, foo) }(Ordering.Tuple2(byXOrdering, byYOrdering))

// Compose byXOrdering and byYOrdering and byZOrdering:
val byXThenYThenZOrdering = Ordering.by{ foo: Foo => (foo, foo, foo) }(Ordering.Tuple3(byXOrdering, byYOrdering, byZOrdering)) 
```

但它相对“嘈杂”。仅使用标准库我找不到更好的东西，所以我实际上建议使用我们自己的助手：

```
final class CompositeOrdering[T]( val ord1: Ordering[T], val ord2: Ordering[T] ) extends Ordering[T] {
  def compare( x: T, y: T ) = {
    val comp = ord1.compare( x, y )
    if ( comp != 0 ) comp else ord2.compare( x, y )
  }
}
object CompositeOrdering {
  def apply[T]( orderings: Ordering[T] * ) = orderings reduceLeft (_ orElse _)
}
implicit class OrderingOps[T]( val ord: Ordering[T] ) extends AnyVal {
  def orElse( ord2: Ordering[T] ) = new CompositeOrdering[T]( ord, ord2 )
} 
```

可以这样使用：

```
val byXOrdering = Ordering.by{ foo: Foo => foo.x }
val byYOrdering = Ordering.by{ foo: Foo => foo.y }
val byZOrdering = Ordering.by{ foo: Foo => foo.z }

// Compose byXOrdering and byYOrdering:
val byXThenYOrdering = byXOrdering orElse byYOrdering

// Compose byXOrdering and byYOrdering and byZOrdering:
val byXThenYThenZOrdering = byXOrdering orElse byYOrdering orElse byZOrdering 
```

或者更简单，像这样：

```
// Compose byXOrdering and byYOrdering:
val byXThenYOrdering = CompositeOrdering(byXOrdering, byYOrdering)

// Compose byXOrdering and byYOrdering and byZOrdering:
val byXThenYThenZOrdering = CompositeOrdering(byXOrdering, byYOrdering, byZOrdering) 
```

`CompositeOrdering.apply`基本上就是你`Ordering.multipleBy`在问题中所说的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T21:37:39.837

如果你想要最大的速度——不是你要求的，我知道！——并且仍然清晰，你可以

```
def compare(that: Foo): Int = {
  this.length compareTo that.length match { case 0 =>; case c => return c }
  this.x      compareTo that.x      match { case 0 =>; case c => return c }
  this.y.size compareTo that.y.size match { case 0 =>; case c => return c }
  this.z.head compareTo that.z.head match { case 0 =>; case c => return c }
  0
} 
```

还有各种不错的基于集合的解决方案和其他解决方案，我将留给其他人解释。（注意所有的样板文件，并观察到你真正需要知道的只是`_.length`在每种情况下......这会激发 a `compareBy`，例如。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T21:48:56.813

我能想到的最好的是：

```
def compare(that: Foo) = multiCompare(
  this.length compareTo that.length      // primary comparison
  this.x      compareTo that.x,          // secondary comparison
  this.y.size compareTo that.y.size,     // tertiary comparison
  this.z.head compareTo that.z.head,     // final tie breaker
)

def multiCompare(c: ( => Int)*) = c find {_ != 0} getOrElse 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T13:36:46.770

避免`Ordered`，`Ordering`如果可以的话。按多个条件排序的最简单方法是使用`sortBy`. 这是一个例子：

```
val foos: Seq[Foo] = ???
foos.sortBy(f => (f.x, f.y, f.z, ...)) 
```

如果你真的想实现`Ordered`我建议你看看[https://stackoverflow.com/a/19348339/1262728](https://stackoverflow.com/a/19348339/1262728)

如果你真的想要一个`Ordering`，最简单的写法如下：

```
val fooOrdering: Ordering[Foo] = Ordering.by(f => (f.x, f.y, f.z)) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-11T05:59:30.053

我使用这种语法是因为它是自记录的：

```
 val compositeOrdering: Ordering[Foo] =
    Comparator.comparing[Foo, CustomType](_.x, new ExplicitOrderingForCustomType)
    .thenComparingDouble(_.y)
    .thenComparingInt(_.z)
    .compare 
```

它正在构建一个复合材料`java.util.Comparator`，然后将其`compare`方法转换为`scala.math.Ordering`

# windows - Lua for Windows 中的位运算符？

> ID：14695834
> 
> 赞同：0
> 
> 时间：2013-02-04T21:18:41.357
> 
> 标签：windows, lua, bitwise-operators, xor

我目前正在使用 Lua for Windows，并且我当前的项目处理二进制文件。但是我需要 XOR 位运算符，但我认为 Lua for Windows 没有按位运算符库，因为它仍然是 5.1 版（在 5.2 中添加了按位运算符库）。有没有办法在 Lua for Windows（5.1 版）中获取位运算符？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:10:10.443

[LuaBitOp](http://bitop.luajit.org/)包含在 Lua For Windows 中，因此您只需添加

```
require 'bit' 
```

在程序的顶部。

# excel - MS Excel adds line break when copying a cell

> ID：14695836
> 
> 赞同：22
> 
> 时间：2013-02-04T21:18:43.180
> 
> 标签：excel, copy-paste

MS Excel 2010 or 2007 or any version for that matter when you copy a cell(not selecting text from the cell) and pasting to any editor adds a line break and sends the cursor to next line. Its annoying to move up the cursor back to last line.

It doesnt look much work to get the cursor back to last line but if you have to keep doing this a lot of times as a programmer i feel really bad. Any suggestions if there is a setting in excel to stop this?

I tried looking online didnt find any thing and also looked up the options of excel, didnt find anything.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-17T08:41:51.193

我在翻译公司的 Excel 电子表格和我们的代码之间为我们的应用程序复制/粘贴了一个大的翻译文件。每次都必须删除换行符让我陷入困境。

最后，我复制了整张表格并将其粘贴到新的 Google 文档电子表格中。然后我用它来满足我的复制需求，因为它不会像 Excel 那样在副本上添加换行符。

希望有帮助！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-04T21:35:36.863

You can create your own copy routine, that does not store the whole cell, but only its value in the clipboard:

```
Sub OwnCopy()
    Dim DataObj As New MSForms.DataObject

    DataObj.SetText ActiveCell.Value 'depending what you want, you could also use .Formula here
    DataObj.PutInClipboard
End Sub 
```

To be able to compile the macro, you need to include "Microsoft Forms 2.0 Object Library" as a reference (in the Visual Basic editor, go to Tools->References and browse `%windir%\system32` for `FM20.dll`¹).

您现在可以使用默认的运行宏对话框将此宏分配给另一个快捷方式（例如`Ctrl`- ） `Shift`，`C`甚至可以通过执行来覆盖`Ctrl`。但是，我不建议覆盖-因为除了粘贴到编辑器之外，您很可能希望使用通常与它一起复制的所有其他信息。`c``Application.OnKey "^c", "OwnCopy"``Ctrl``c`

要使其永久化，只需将宏存储在您的个人工作簿中。

如果您想要一个更复杂的复制例程，它还可以处理多个单元格/选择区域，请使用以下代码：

```
Sub OwnCopy2()
    Dim DataObj As New MSForms.DataObject
    Dim lngRow As Long
    Dim intCol As Integer
    Dim c As Range
    Dim strClip As String

    Const cStrNextCol As String = vbTab
    Const cStrNextRow As String = vbCrLf

    With Selection
        If Not TypeOf Selection Is Range Then
            On Error Resume Next
            .Copy
            Exit Sub
        End If

        If .Areas.Count = 1 Then
            For lngRow = 1 To .Rows.Count
                For intCol = 1 To .Columns.Count
                    strClip = strClip & _
                        Selection(lngRow, intCol).Value & cStrNextCol
                Next intCol
                strClip = Left(strClip, Len(strClip) - Len(cStrNextCol)) _
                    & cStrNextRow
            Next lngRow
        Else
            For Each c In .Cells
                strClip = strClip & c.Value & vbCrLf
            Next c
        End If
        strClip = Left(strClip, Len(strClip) - Len(cStrNextRow))
        DataObj.SetText strClip
        DataObj.PutInClipboard
    End With
End Sub 
```

^(¹实际上，此文件存在于`%ProgramFiles%\Microsoft Office\root\vfs\System`- Office 使用一些虚拟化技巧使其出现在它所在的位置。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:37:52.807

我同意这很烦人，但不确定有什么可做的。

Excel 自动格式化单元格...制表符分隔的列，行分隔的行（单个单元格是 1 列的行）。

验证：在 .NET 中，Clipboard.GetText() 显示格式已在剪贴板中

这里有一些 IronPython 来说明：

```
# Copy some cells in Excel, then run the following
import sys, clr
clr.AddReference("System.Windows.Forms")
from System.Windows.Forms import Clipboard
Clipboard.GetText() 
```

# asp.net-mvc - SimpleMembership 需要 App_Data 文件夹

> ID：14695840
> 
> 赞同：1
> 
> 时间：2013-02-04T21:19:05.930
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

我将 SimpleMembership 用于 ASP.Net MVC 4 应用程序。

连接字符串配置为在开发和生产中都使用 SQL Server 而不是 LocalDB。这工作正常，除了在没有 App_Data 文件夹的生产环境中，SimpleMembership 会在应用程序池被回收后尝试在对站点的第一个 HTTP 请求上访问 App_Data（始终可重现）。对于后续的 HTTP 请求，它不会尝试访问 App_Data。

如果我预先创建 App_Data 并授予读/写权限，则不会引发错误。App_Data 中未创建任何文件。

有什么我可以配置的（除了在生产中创建一个虚拟 App_Data 文件夹）来防止这种“虚拟”访问尝试吗？

堆栈跟踪供参考：

```
2013-02-04 21:10:27.4133 FATAL Global Exception.  Status 500, Message: Access to the path 'C:\inetpub\MyWebApp\App_Data' is denied.
2013-02-04 21:10:28.5643 ERROR    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.Directory.InternalCreateDirectory(String fullPath, String path, Object dirSecurityObj, Boolean checkHost)
   at System.IO.Directory.InternalCreateDirectoryHelper(String path, Boolean checkHost)
   at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.EnsureDBFile(String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)
   at System.Web.Security.SqlRoleProvider.GetRolesForUser(String username)
   at WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username)
   at System.Web.Security.RolePrincipal.IsInRole(String role)
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at System.Web.Mvc.AuthorizeAttribute.AuthorizeCore(HttpContextBase httpContext)
   at System.Web.Mvc.AuthorizeAttribute.OnAuthorization(AuthorizationContext filterContext)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag)
   at System.Web.Mvc.Controller.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag)
   at System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin[TResult](AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout)
   at System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:10:15.233

You should copy the line starting with "WebSecurity.InitializeDatabaseConnection(...)" in InitializeSimpleMembershipAttribute.cs to the beginning of Application_Start method in Global.asax

```
protected void Application_Start()
{
    WebSecurity.InitializeDatabaseConnection("MyDBContext", "UserProfile", "UserId", "UserName", autoCreateTables: true);

    AreaRegistration.RegisterAllAreas();
    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth(); 
} 
```

# java - java.sql.SQLException: Driver Error: index parameter to bindParam() must be between 1 and numParameters

> ID：14695842
> 
> 赞同：0
> 
> 时间：2013-02-04T21:19:16.640
> 
> 标签：java, sql, prepared-statement

I am trying to insert into a new Database named `XpressMP`. And I need to insert a timestamp value in that database. Also it doesn't supports `TO_TIMESTAMP` instead of that, it supports `CURRENT_TIMESTAMP` which takes no parameter and it gives the current timestamp value.

So in the below SQL, second column and third column data types are Timestamp and total number of columns are 30\. So I was thinking to use preparedStatement here to insert the record. And in the below SQL, I have placed `CURRENT_TIMESTAMP` in second column and third column to get the current timestamp and in the prepared statement I am leaving column for 2 and 3\. But after running it gives me exception as

```
java.sql.SQLException: Driver Error: index parameter to bindParam() must be between 1 and numParameters. 
```

Below is the code, I am using.

```
private static String insertSQL = "INSERT INTO USER"
            + "("
            + "ID, CREATION_DATE, LAST_MODIFIED_DATE) VALUES"
            + "(?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)";

            preparedStatement.setString(1, "1000015236");

            preparedStatement.setString(4, "Hello"); 
```

Can anyone help me what wrong I am doing here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:24:57.517

setParameter 的第 n 个索引映射到第 n 个问号，您的索引应该从 1 到 28 开始，并且应该是连续的。

# node.js - Why does Grunt fail?

> ID：14695845
> 
> 赞同：12
> 
> 时间：2013-02-04T21:19:20.390
> 
> 标签：node.js, backbone.js, gruntjs

I'm getting a weird error after running `npm run-script grunt` in which it tell's me that `node_modules/.bin/grunt` fails.

I'm following a tutorial as im pretty new to Backbone ([http://dailyjs.com/2012/11/29/backbone-tutorial-1/](http://dailyjs.com/2012/11/29/backbone-tutorial-1/)),

Here's my `package.json` file.

```
{
  "name": "btask"
, "version": "0.0.1"
, "private": true
, "dependencies": {
    "requirejs": "latest"
  , "connect": "2.7.0"
  }
, "devDependencies": {
    "mocha": "latest"
  , "chai": "latest"
  , "grunt": "latest"
  , "grunt-exec": "latest"
  }
, "scripts": {
    "grunt": "node_modules/.bin/grunt"
  }
} 
```

And here's a full transcript of the error.

```
0 info it worked if it ends with ok
1 verbose cli [ 'node',
1 verbose cli   '/Users/Keva161/.nvm/v0.8.18/bin/npm',
1 verbose cli   'run-script',
1 verbose cli   'grunt' ]
2 info using npm@1.2.4
3 info using node@v0.8.18
4 verbose read json /Users/Keva161/Documents/Web Dev/Webapps/Node/btask/package.json
5 verbose run-script [ 'pregrunt', 'grunt', 'postgrunt' ]
6 info pregrunt btask@0.0.1
7 info grunt btask@0.0.1
8 verbose unsafe-perm in lifecycle true
9 silly exec sh "-c" "node_modules/.bin/grunt"
10 silly sh,-c,node_modules/.bin/grunt,/Users/Keva161/Documents/Web Dev/Webapps/Node/btask spawning
11 info btask@0.0.1 Failed to exec grunt script
12 error btask@0.0.1 grunt: `node_modules/.bin/grunt`
12 error `sh "-c" "node_modules/.bin/grunt"` failed with 2
13 error Failed at the btask@0.0.1 grunt script.
13 error This is most likely a problem with the btask package,
13 error not with npm itself.
13 error Tell the author that this fails on your system:
13 error     node_modules/.bin/grunt
13 error You can get their info via:
13 error     npm owner ls btask
13 error There is likely additional logging output above.
14 error System Darwin 12.2.1
15 error command "node" "/Users/Keva161/.nvm/v0.8.18/bin/npm" "run-script" "grunt"
16 error cwd /Users/Keva161/Documents/Web Dev/Webapps/Node/btask
17 error node -v v0.8.18
18 error npm -v 1.2.4
19 error code ELIFECYCLE
20 verbose exit [ 1, true ] 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-20T09:35:42.747

您正在谈论的教程使用 grunt 0.3。从那时起，Grunt 已经更新，如果您在*package.json*文件中使用 "grunt": "latest"，那么默认情况下您将获得 grunt 0.4。

您可以阅读[迁移指南](https://github.com/gruntjs/grunt/wiki/Upgrading-from-0.3-to-0.4)以使事情正常进行。

为了让本教程的工作更加繁重，您可以这样做 -

*   全局安装 grunt-cli`npm install -g grunt-cli`
*   全局安装 grunt-init`npm install -g grunt-init`
*   在本地安装 grunt（如果你按照教程已经安装）
*   将 *package.json*更改 `"grunt": "node_modules\\.bin\\grunt"` 为*`"grunt": "grunt"`*
**   将根目录下的*grunt.js*重命名为*Gruntfile.js**   将 *Gruntfile.js*更改 `grunt.registerTask('default', 'exec copy-require');` 为*`grunt.registerTask('default', ['exec','copy-require']);`***   `npm run-script grunt`在命令行中照常运行。事情现在应该可以正常工作了。**

 **您将获得一个带有 r.js 构建的构建目录。

如果您仍然无法通过上述步骤以某种方式使其工作，您可以在您的*package.json*文件中更改`grunt: "latest"`为并在 shell 中运行。`grunt : "0.3"`*`npm install`*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T09:07:27.650

[arunkjn](https://stackoverflow.com/questions/14695845/why-does-grunt-fail/#answer-14976496)的回答将解决问题。虽然按照教程的意图，作者并不想全局安装 grunt，这也是我想要的。感谢 arunkjn，我认为您还可以：

*   通过在本地安装 grunt-cli`npm install grunt-cli`
*   将根目录下的 grunt.js 重命名为 Gruntfile.js
*   将 Gruntfile.js更改`grunt.registerTask('default', 'exec copy-require');`为`grunt.registerTask('default', ['exec','copy-require']);`

再做`npm run-script grunt`一次，它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T23:25:40.703

我已经使用 grunt 和 npm 有一段时间了，但我从未使用过`run_script`. 也许试试这个？

该`scripts`部分通常用于在远程服务器上运行（即 Heroku 或 Travis）

* * *

删除`scripts`块。

然后做

```
npm install -g grunt 
```

在此之后可能必须重新启动终端。

```
cd myproject
npm install
grunt mytask 
```***

# c - C - Pipe using printf and scanf.. pausing

> ID：14695854
> 
> 赞同：0
> 
> 时间：2013-02-04T21:19:40.060
> 
> 标签：c, pipe, stdout, stdin

I’m new to C and I’m trying to figure out how to send the output of one program to another for processing.… or PIPE it.

Eg. ./foo | ./boo

foo - reads data from an external source every 100ms and writes it to stdout.

boo - reads data from stdin, does some simple calculations and writes it to stdout,

(I don't have access to foo, but it writes a float value every 100ms on a new line.)

I have it working, however after every couple of hundred entries… there is a 2 second pause...

so it spits out about 200 lines, 2 second pause, 200 lines, 2 second pause. etc..

Is there a buffer I need to be aware off?

Here is the code for boo;

```
#include <stdio.h>
float input;
float value;

while (1)
    {
    input = scanf("%f", &value);

    {do stuff here}

    printf("result %f \n ", input);
    fflush(stdout);

    }
    return  0;
} 
```

**EDIT** I found the issue, foo had a loop for the 100ms delay. when piping this into boo it was somehow getting grouped together. Removing this loop fixed the issue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:32:48.790

编辑我发现了问题， foo 有一个 100 毫秒延迟的循环。当将它输送到嘘声中时，它以某种方式组合在一起。删除此循环解决了问题

我删除了这个循环并解决了这个问题；

```
int millis()
{
    struct timeval tv;
    gettimeofday(&tv, NULL);
    return (tv.tv_sec) * 1000 + (tv.tv_usec)/1000;
}
start = millis()
while(millis() - start < 20)
 {
  usleep(1000);
 } 
```

# css - 通过 CSS 将标题标签与固定高度垂直对齐

> ID：14695857
> 
> 赞同：1
> 
> 时间：2013-02-04T21:19:47.297
> 
> 标签：css, header, vertical-alignment

我有一个固定宽度的标题标签，在某些情况下将包含 2 行文本，在某些情况下为 1。我希望它们在中心垂直对齐，就好像已经计算出填充来补偿这。

我希望在不修改标记的情况下完成此操作。

```
<h1>This would be 2 lines of text</h1>
<h1>This is 1 line</h1>
<h1>This would be 2 lines of text</h1>
<h1>This is 1 line</h1>
<h1>This would be 2 lines of text</h1>
<h1>This is 1 line</h1>
<h1>This would be 2 lines of text</h1>
<h1>This is 1 line</h1> 
```

CSS：

```
h1 {
float:left;
margin:5px;
padding:5px;
width:100px;
height:50px;
vertical-align:middle; /*obvi doesn't work because it's not an inline element */
text-align:center;
background:#336699;
color:#fff;
} 
```

也许......就像一个 CSS 选择器，它根据自动高度确定 2 个不同的填充属性？就像，如果我将高度设置为自动，并且如果标题标签超过 60 像素（这将是 2 行），则将填充设为*this*，但如果自动高度小于该高度，则将填充设为*this* .. ..

```
h1[height>60px] { padding:10px 0px; }
h1[height<60px] { padding:20px 0px; } 
```

我希望这是有道理的。我只是不确定如何写它......还是有更好的方法？

请看例子。

[http://jsfiddle.net/KcD3v/](http://jsfiddle.net/KcD3v/)

非常感谢所以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:51:48.147

你可以尝试做这样的事情：

**HTML**

```
<div class="header">
    <h1>This would be 2 lines of text</h1>
    <h1>This is 1 line</h1>
    <h1>This would be 2 lines of text</h1>
    <h1>This is 1 line</h1>
    <h1>This would be 2 lines of text</h1>
    <h1>This is 1 line</h1>
    <h1>This would be 2 lines of text</h1>
    <h1>This is 1 line</h1>
</div> 
```

**CSS**

```
.header {
    display: inline-table; /* IE8+, Chrome, FF3+, Opera7+ */
}

h1 {
    display: table-cell;
    margin:5px;
    padding:5px;
    width:100px;
    height:50px;
    vertical-align: middle;
    text-align:center;
    background:#336699;
    color:#fff;
} 
```

通过这种方式，您可以在不破坏网站语义的情况下使用表格。查看[MDN](https://developer.mozilla.org/en-US/docs/CSS/display)`display`以获取有关表格样式的更多详细信息。

但是，通常每个页面只使用**一个** `<h1>`元素来定义网站的页面标题，然后是所有其他`<h*>`元素的组合。

如果您不需要跨浏览器兼容性（例如，如果您正在开发一些 Chrome/Firefox 扩展程序/webapp），那么即使是新的[flexbox](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)也可能是一个有趣的选择。

* * *

另一种方法可能是将`vertical-align`代码更改为`line-height`设置为`<h1>`元素的高度，但在这种情况下，您将仅限于单行文本。

# ruby - how to parse a float from an string pattern

> ID：14695858
> 
> 赞同：1
> 
> 时间：2013-02-04T21:19:49.810
> 
> 标签：ruby, parsing

I am having a string with the following patter

```
"00:00:30.04," 
```

Which would be the smartest way to parse this string into a float?

best, phil

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:23:24.097

```
s = "00:00:30.04,"
s.split(/[^\deE\.+-]/).map(&:to_f) # => [0.0, 0.0, 30.04] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:30:19.970

```
p "00:00:30.04,"[6,5].to_f # 30.04
p Float("00:00:30.04,"[6,5]) # 30.04

p "abcdefg"[6,5].to_f # 0.0
p Float("abcdefg"[6,5]) #ArgumentError 
```

本质上：从位置 6 开始，长度为 5 的子字符串，并基于它返回一个浮点数。`Float`然后更严格`String.to_f`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:23:06.877

你那里有3个数字。将它们拆分，然后`#to_f`在每个字符串上简单地调用（意思是“浮动”）。

```
string = "00:00:30.04,"
strings = string.split ":"
numbers = strings.map { |s| s.to_f }
numbers # => [0.0, 0.0, 30.04] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:53:32.173

如果分隔符始终是冒号或逗号，则可以使用以下内容：

```
"00:00:30.04,".split(/:|,/).map(&:to_f) #=> [0.0, 0.0, 30.04] 
```

# sql-server - Join two sql queries, with overlapping values, to add a third column

> ID：14695860
> 
> 赞同：1
> 
> 时间：2013-02-04T21:19:54.633
> 
> 标签：sql-server

I've read close to a dozen similar issues on this site, but I don't think my specific case was covered anywhere. I'm not a dba, this is just a side-project I was voluntold for because I knew more SQL than anyone else here, so I won't take it personally if somebody tells me this query is a disaster. :-)

This is my query:

```
SELECT COUNT(a.issue_type_id) as DistinctIssues, b.issue_type_name, c.subissue_type_name, null AS DistinctTickets
FROM [somedb].[dbo].[wh_task] AS a
INNER JOIN [somedb].[dbo].[wh_issue_type] AS b ON a.issue_type_id = b.issue_type_id
INNER JOIN [somedb].[dbo].[wh_subissue_type] AS c ON a.subissue_type_id = c.subissue_type_id
WHERE a.[create_time] between '11/01/12' AND '01/31/13'
AND a.[account_id] = 123456
AND a.[account_contact_id] is not null
GROUP BY b.issue_type_name, c.subissue_type_name  
UNION
SELECT null as DistinctIssues, b.issue_type_name, c.subissue_type_name, COUNT(a.issue_type_id) as DistinctTickets
FROM [somedb].[dbo].[wh_task] AS a
INNER JOIN [somedb].[dbo].[wh_issue_type] AS b ON a.issue_type_id = b.issue_type_id
INNER JOIN [somedb].[dbo].[wh_subissue_type] AS c ON a.subissue_type_id = c.subissue_type_id
WHERE a.[create_time] between '11/01/12' AND '01/31/13'
AND a.[account_id] = 123456
GROUP BY b.issue_type_name, c.subissue_type_name 
```

And the results look like this.

```
DistinctIssues  issue_type_name   subissue_type_name   DistinctTickets
NULL            Storage           EMC                  45
NULL            Storage           HP                   2
NULL            Symantec          Anti Virus           1
NULL            Symantec          Backup Exec          4
NULL            Virtualization    Environmental        1
NULL            Virtualization    Network              5
1               Microsoft         Server 2003          NULL
1               Microsoft         Windows 7            NULL
1               Network           Performance          NULL
1               Virtualization    Environmental        NULL
2               Exchange          Database             NULL 
```

I bet you can guess what I'm trying to do from here. I'm grouping by the two issue types, and I want the count of all tickets, as well as the count of a subset of those tickets. My database is a MS SQL server (2008, I believe). I only have access to views, for what that's worth.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:18:37.523

两个查询都以相同的条件连接相同的表，根据相同的条件对结果进行分组，甚至计算相同的列。唯一的区别似乎是其中一个查询在 WHERE 子句中使用了附加条件。

在这种情况下，您可以将它们组合成一个查询，对查询返回的值使用条件聚合以及附加条件 ( `DistinctIssues`)：

```
SELECT
  COUNT(CASE WHEN a.[account_contact_id] is not null THEN a.issue_type_id END) as DistinctIssues,
  b.issue_type_name,
  c.subissue_type_name,
  COUNT(a.issue_type_id) as DistinctTickets
FROM [somedb].[dbo].[wh_task] AS a
INNER JOIN [somedb].[dbo].[wh_issue_type] AS b
  ON a.issue_type_id = b.issue_type_id
INNER JOIN [somedb].[dbo].[wh_subissue_type] AS c
  ON a.subissue_type_id = c.subissue_type_id
WHERE a.[create_time] between '11/01/12' AND '01/31/13'
  AND a.[account_id] = 123456
GROUP BY b.issue_type_name, c.subissue_type_name
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:44:01.490

很难确定最好的方法是缺少一些信息 - 你的意思是这样的：

```
WITH Issues AS
(
  SELECT COUNT(a.issue_type_id) as DistinctIssues, b.issue_type_name, c.subissue_type_name
  FROM [somedb].[dbo].[wh_task] AS a
  INNER JOIN [somedb].[dbo].[wh_issue_type] AS b ON a.issue_type_id = b.issue_type_id
  INNER JOIN [somedb].[dbo].[wh_subissue_type] AS c ON a.subissue_type_id = c.subissue_type_id
  WHERE a.[create_time] between '11/01/12' AND '01/31/13'
  AND a.[account_id] = 123456
  AND a.[account_contact_id] is not null
  GROUP BY b.issue_type_name, c.subissue_type_name
),
Tickets AS
(
  SELECT b.issue_type_name, c.subissue_type_name, COUNT(a.issue_type_id) as DistinctTickets
  FROM [somedb].[dbo].[wh_task] AS a
  INNER JOIN [somedb].[dbo].[wh_issue_type] AS b ON a.issue_type_id = b.issue_type_id
  INNER JOIN [somedb].[dbo].[wh_subissue_type] AS c ON a.subissue_type_id = c.subissue_type_id
  WHERE a.[create_time] between '11/01/12' AND '01/31/13'
  AND a.[account_id] = 123456
  GROUP BY b.issue_type_name, c.subissue_type_name
)
SELECT i.DistinctIssues
  , COALESCE(i.issue_type_name, t.issue_type_name) AS issue_type_name
  , COALESCE(i.subissue_type_name, t.subissue_type_name) AS subissue_type_name
  , t.DistinctTickets
FROM Issues i
  FULL JOIN Tickets t ON i.issue_type_name = i.issue_type_name
    AND i.subissue_type_name = t.subissue_type_name 
```

这会为存在的每个组合提供问题和票证。

如果这不是必需的，也许您还可以提供示例数据集和所需的输出？

# ant - How to get Ant to throw an error if an included file in the classpath task doesn't exist?

> ID：14695862
> 
> 赞同：2
> 
> 时间：2013-02-04T21:20:01.260
> 
> 标签：ant

Is there a built-in way to get Ant to throw an error when a file included in the classpath task doesn't exist? My goal is for Ant to throw a build error when a compile target is called but the required libraries don't exist.

Here is an example from the build.xml file that includes the dependent libraries, however it doesn't throw an error when one of the libraries doesn't exist.

```
<target name="compile" description="Compiles the Java code" depends="init">
    <mkdir dir ="${build}/${module-package}" />
    <javac srcdir="${src}/main/${module-package}" 
           destdir="${build}" 
           includeantruntime="off"
           debug="true" 
           fork="true">

        <classpath>
            <fileset dir="${lib}" >
                <include name="joda-time/joda-time-2.1.jar" />
                <include name="jackson/jackson-core-lgpl-1.9.7.jar"/>
                <include name="jackson/jackson-mapper-lgpl-1.9.7.jar"/>
            </fileset>
        </classpath>
    </javac>
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:06:39.303

您可以使用 ANT 中的[可用](https://ant.apache.org/manual/Tasks/available.html)任务来检查您知道应该存在的类是否存在（由 jars 提供）。

```
<path id="compile.path">
    <fileset dir="${lib}" >
        <include name="joda-time/joda-time-2.1.jar" />
        <include name="jackson/jackson-core-lgpl-1.9.7.jar"/>
        <include name="jackson/jackson-mapper-lgpl-1.9.7.jar"/>
    </fileset>
</path>

<available classname="org.joda.time.DateTime" property="joda.present" classpathref="compile.path"/>
<available classname="org.codehaus.jackson.JsonFactory" property="jackson.present" classpathref="compile.path"/>

<target name="compile" description="Compiles the Java code" depends="init">
    <mkdir dir ="${build}/${module-package}" />

    <fail message="Joda time missing" unless="joda.present"/>
    <fail message="Jackson missing"   unless="jackson.present"/>

    <javac srcdir="${src}/main/${module-package}" 
           destdir="${build}" 
           includeantruntime="off"
           debug="true" 
           fork="true"
           classpathref="compile.path"
           />
</target> 
```

# java - 用 Java 继承实例变量

> ID：14695864
> 
> 赞同：3
> 
> 时间：2013-02-04T21:20:07.383
> 
> 标签：java, inheritance

我知道，如果您将具有例如实例变量的类（超类）子类化，它将在子类中继承。

IE ：

```
class Weather {
    int humidity;
}

public class Rainy extends Weather {
    void changeHumidity() {
        humidity = 10;
        System.out.println(super.humidity);
    }

    public static void main(String[] args) {
        new Rainy().changeHumidity();
    }
} 
```

底线：我想知道为什么实例变量“湿度”在子类和类之间共享。

我知道如果我隐藏了它，它将不会被共享，但仍然为什么另一个实例（即使是超类）应该与继承逻辑中的子类共享一个变量。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T21:24:42.237

Java 的创建者做出了两个决定来指导他们如何设计 Java。一是性能是重中之重，不能因为太慢而被判定为不可用。另一个决定是，他们将针对 C 和 C++ 开发人员，并使 Java 与他们习惯的相似，以便更容易采用。

因此，Java 像 C++ 一样获得了公共、私有和受保护的访问权限。package-private 出现在哪里以及为什么它是默认值尚不清楚。他们可能假设开发人员希望直接访问变量以节省方法调用开销。很久以前，我和 Marimba 的专业服务人员一起做一个项目，我们有机会研究了一些实现代码，这些代码是由很多包私有成员编写的。当我问为什么解释是为了表现时。这是在 JIT 之类的优化之前，因此可能有人担心使用访问器方法获取常用超类成员可能会太慢。另一方面，这可能是一种风格偏好，或者他们正在使用更自由的方法作为不断发展的设计的一部分，也许将 package-private 设置为默认值的想法是应该期待这种自由。（根据我读过的任何其他代码判断，这不是什么。）它是由 Jonathon Payne 和 Arthur Van Hoff 编写的代码，因此专业服务人员可能没有了解真正的原因。

詹姆斯·高斯林（James Gosling ）在[一次采访中谈到了他的原因](http://www.artima.com/intv/gosling2P.html)：

> ......我早期想做的一件事是正式设置并用语言获得一些东西。您知道在 JavaBeans 中如何编写 setter 和 getter 方法的这种约定吗？但当时我对开发人员进行了一系列调查，关于他们是否希望这个存在。一般人会说，“天哪！”
> 
> 所以我没有这样做。但我想回想起来，我不应该听他们的。我应该做的。因为，我的意思是 Beans 基本上是在我本来想做的这个设施上分层的，但 Beans 是事后才做的。
> 
> 而且因为它是作为命名约定分层的，所以有些东西不能很好地结合在一起。因此，例如，将实例变量的默认保护设为私有会很有意义。然后是 getter 和 setter，系统会在更深层次上知道它们，使它们要么公开要么打包。

风格演变的方向是更喜欢将实例变量设为私有，并在需要时通过 getter 公开它们。您可以指定私有访问修饰符，如下所示：

```
private int humidity; 
```

然后变量对子类不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:21:37.467

> 我想知道为什么实例变量“湿度”在子类和类之间共享。

这就是默认/包本地成员所做的。

# expression-encoder-sdk - Expression encoder cuts ending part of livejob webcam recording/encoding

> ID：14695865
> 
> 赞同：1
> 
> 时间：2013-02-04T21:20:07.897
> 
> 标签：expression-encoder-sdk

I am using expression encoder 4 SP2 SDK in C#, as I found, it can record and encode cameras live. So I managed to write some code, which works fine, when computer is good enough. Then the recorded video is fine.

I assumed, that when computer is slow, it will just "lag" more, skip frames etc. which wouldn't be that much of a problem in my application, but when I click button with this code:

```
liveJob.StopEncoding(); 
```

It stops encoding, which is great, but doesn't finish the whole video, so end part is missing. As there is no liveJob.Pause() or something like that, I don't know how to stop my camera properly to finish encoding. So I am seeking for help there.

If there is no solution, could you recommend me something similar, with very easy .net SDK, preferably stripped of any directshow graphs, easy listing of devices, simultaneous audio encoding. (I have already looked at DirectShow .net and EmguCV)

Thanks

# boolean-operations - Boolean Expressions with DeMorgan’s law

> ID：14695866
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:20:08.037
> 
> 标签：boolean-operations

I need help using De Morgan's law to derive an expression that is equivalent to

('A + B + 'C)D but uses only AND and NOT operations (but no OR operation).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:24:10.660

首先，`('A + B + 'C) = ''('A + B + 'C) = '(A * 'B * C)`。
所以结果是，`('(A * 'B * C)) * D`。

# entity-framework - 具有未映射列的实体框架 5 更新过程

> ID：14695868
> 
> 赞同：0
> 
> 时间：2013-02-04T21:20:19.870
> 
> 标签：entity-framework, entity-framework-5

我们的架构设置为通过存储过程完成每个数据库更新、插入和删除。随着每次更新、插入或删除，我们传入一个 ActionId 参数，该参数对于用户会话是唯一的，并存储在日志表中。表定义为：

```
CREATE TABLE Member(
    MemberId int primary key identity not null,  
    MemberName nvarchar(100) not null) 
```

使用插入存储过程定义：

```
ALTER procedure [dbo].[proc_MemberInsert]  
(  
    @MemberName nvarchar(100),   
    @ActionId int
)  
AS 
BEGIN
INSERT
INTO
    dbo.[Member] (  
    MemberName)   
values (  
    @MemberName)  

INSERT
INTO
    dbo.[Activity] (  
    TableName,
    ActivityId)   
values (  
    'Member',
    @ActivityId)  
END 
```

我如何使用存储过程对成员实体执行插入，并传入一个附加参数，因为这个 ActivityId 不是实体或任何表的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:44:34.723

Gert 是正确的，这并不容易。Oracle 确实提供了为整个用户会话记录活动 ID 的能力，我们以用户身份连接到 Oracle。所以我们最终将 ActivityId 添加到所有选择过程中，并在选择映射中将 ActivityId 映射到会话（因为在执行任何编辑之前我们总是有一个选择）。在这种情况下，ActivityId 值存在，我们将其添加到日志中，一切正常。

# scala - Heroku adding sbt start plugin prevents sbt plugin from resolving

> ID：14695873
> 
> 赞同：1
> 
> 时间：2013-02-04T21:20:39.607
> 
> 标签：scala, heroku, playframework-2.0, sbt

When adding the sbt-start plugin to push to Heroku, via build.sbt with the following contents:

```
resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.startscript" % "xsbt-start-script-plugin" % "0.5.3") 
```

I get an unresolved dependency with play:

```
[warn]  module not found: play#sbt-plugin;2.0.4
[warn] ==== local: tried
[warn]   /Users/david-grandes/.ivy2/local/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0.4/ivys/ivy.xml
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/play/sbt-plugin/scala_2.9.2/sbt_0.12/2.0.4/ivys/ivy.xml
[warn] ==== Typesafe repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/play/sbt-plugin_2.9.2_0.12/2.0.4/sbt-plugin-2.0.4.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/play/sbt-plugin_2.9.2_0.12/2.0.4/sbt-plugin-2.0.4.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: play#sbt-plugin;2.0.4: not found
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

Which is weird considering that if we remove the sbt-start-plugin, we can actually find the play plugin with no problems.

**EDIT**

Maybe its related to this specific version of the plugin? [https://github.com/sbt/sbt-start-script/issues/23](https://github.com/sbt/sbt-start-script/issues/23)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:59:13.110

删除`sbt-start-plugin`允许`play#sbt-plugin;2.0.4`被发现是很奇怪的，因为我相信这`play#sbt-plugin;2.0.4`仅[适用于 Scala 2.9.1 和 SBT 0.11.3](http://repo.typesafe.com/typesafe/webapp/browserepo.html?7&pathId=ivy-releases%3aplay/sbt-plugin/scala_2.9.1/sbt_0.11.3/2.0.4/jars/sbt-plugin.jar)。也许当您添加时，`sbt-start-plugin`您还更改了 Scala 或 SBT 版本？

尽管如此，与将其他 Scala Web 框架部署到 Heroku 不同，`sbt-start-plugin`将 Play 2.0 应用程序部署到 Heroku 应该没有必要，因为[Play 2.0 已经包含所需的`stage`任务](http://www.playframework.org/documentation/2.0/ProductionDist)，因此部署到 Heroku 应该开箱即用。如果您使用新的 Play 2.0 应用程序，您可以将其部署到 Heroku，而无需进行任何修改。

# javascript - Does JQuery.Load() execute markup rendering and Java Script as a single blocking call

> ID：14695875
> 
> 赞同：0
> 
> 时间：2013-02-04T21:20:49.090
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

I have a question about inserting html with JavaScript into the DOM after an Ajax call using JQuery's .load().

Assume the following sample html section:

```
<script>$(document).ready(function(){var e = $('#'+'@Servergenerated');})</script>

<div id='@Servergenerated'>Test Element</div> 
```

If I return the above section through an Ajax call and insert the result into the DOM using JQuery's load() function -- Will both the markup rendering and the script execute as a blocking call? Meaning, since .load() executes on the single thread available to JavaScript, will it ensure that both the markup rendering and the JavaScript execution will finish before other JavaScript on the same main page can be invoked ?

The Ajax request is initiated through `$("#someElement").load(..)`

In the above case, can I always assume that the JS is always paired up with the correct html (so that the JS will execute against the ID that is currently defined on the page)

However, is there a difference between using .load() and .html().

Typically I use $.get to retrieve the data and then insert it into the DOM using .html(). This code is however in a third party library and it's uisng .load() instead..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:51:28.233

当您使用`$().load(url,fn)`时，该行后面的代码将在 html 附加到页面之前执行，因为`$().load(url,fn)`执行异步 http 请求来获取内容。见最后的例子。

要记住的另一件重要的事情是`$().load(url,fn)`，如果返回的 html 包含 javascript，则该 javascript 可能会在页面上存在内容之前执行，从而导致插件无法正确初始化。这就是为什么强烈建议您不要使用`$().load(url,fn)`引入包含脚本的内容。

例子：

```
console.log(1)
$("#div1").load("page1.html",function(){
    console.log("4 maybe 5")
});
console.log(2)
$("#div2").load("page2.html",function(){
    console.log("5 maybe 4")
});
console.log(3) 
```

在上面的示例中，日志 1 2 和 3 保证按此顺序发生，但是 4 和 5 可能会交换位置，具体取决于哪个 ajax 请求完成速度最快。除了不使用`$().load(url,fn)`或请求 div2 的内容成功请求 div1 的内容之外，没有其他方法可以避免。

# asp.net-mvc - ASP.NET URL Rewrite Html.BeginForm Controller

> ID：14695885
> 
> 赞同：0
> 
> 时间：2013-02-04T21:21:34.703
> 
> 标签：asp.net-mvc, asp.net-mvc-4

I'm trying to understand the behavior within my RouteConfig setup. Here is what I have:

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "2KeywordController",
            url: "{keyword1}-{keyword2}-{controller}/{action}",
            defaults: new { action = "Index" }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}",
            defaults: new { controller = "Home", action = "Index" }
        );
    }
} 
```

I have a controller called ContactController and a View under /Views/Contact/Index.cshtml that has the following to create the form:

```
@using (Html.BeginForm("Index", "contact", FormMethod.Post, new { id = "contactform" })) 
```

When I navigate to example.com/kw1-kw2-contact the ContactController is correctly called and the default contact view is displayed. When I looked at the source I was surprised to find that the action for the form was set to "/kw1-kw2-contact" instead of just "/contact". Is there a way to use Html.Begin() but have just the controller name appear in action without the two keywords? e.g. /contact

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:25:59.623

> 有没有办法使用 Html.Begin() 但只有控制器名称出现在没有两个关键字的情况下？

当然，您可以使用 a`BeginRouteForm`而不是 a`BeginForm`并指定要使用的路由名称：

```
@using (Html.BeginRouteForm(
    routeName: "Default", 
    routeValues: new { action = "index", controller = "contact" }, 
    method: FormMethod.Post, 
    htmlAttributes: new { id = "contactform" })
)
{
    ...
} 
```

将发出：

```
<form action="/contact" id="contactform" method="post">
    ...
</form> 
```

# azure - How to Install/Configure Zend Framework 2 on an Azure?

> ID：14695888
> 
> 赞同：1
> 
> 时间：2013-02-04T21:22:05.233
> 
> 标签：azure, zend-framework2

A client asked me **if it's possible to install zf2 on an Azure environment**. I haven't used azure yet, even if I know it's possible to configure a virtual server with linux, I'd like to know if there is a tutorial to do this or is not possible to install zf2 on Azure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:53:18.977

Windows Azure 支持 PHP，它还支持不同的 PHP 框架，如 Zend Framework。

您可以找到不错的博客：在[Zend和 Azure 上](http://framework.zend.com/)[为 Windows Azure 配置 Zend Framework 应用程序，](http://www.dragonbe.com/2011/12/configuring-zend-framework-apps-for.html)描述数据库配置、会话、缓存等等。

我希望这会有所帮助。

# php - Connecting to a database on a different network via VPN through PHP

> ID：14695891
> 
> 赞同：1
> 
> 时间：2013-02-04T21:22:19.307
> 
> 标签：php, sql-server, perl, server-side, vpn

We currently have a process where a user uses Cisco VPN client to establish a secure tunnel to a remote server. They, then, remote desktop into a machine on the remote network. While on the remote machine, they fire up SQL Server 2008 Enterprise manager, run a query that produces a CSV file. The file is then manually transferred back to their local machine.

This process only needs to happen once a month to pull this CSV (report) from our remote machines.

The transport is IPSec/UDP.

I am having trouble finding any kind of help being able to do this through a script. Is this possible? If not through PHP, maybe through perl or any server side script?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:57:31.220

Perl 能够做到这一点。

试着把这个问题分成两部分：

1) 生成 CSV 文件。2) 将此 CSV 文件移出。

**第1部分：**

您可以使用 Perl 连接到 SQL 服务器、运行查询并生成 CSV 文件。

使用 ODBC 和 DBI 连接：[如何使用 Perl 连接到 SQL Server？](https://stackoverflow.com/questions/4905624/how-do-i-connect-with-perl-to-sql-server)

使用[Text::CSV](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)生成有效的 CSV 文件。

**第2部分：**

2.1：您可以设置一个简单的 (https) 网络服务器来仅提供此 CSV 文件。如果需要，您可以在发送之前加密此文件。

您可以使用 Putty 设置 SSH Tunel 以进一步保护传输：[http ://www.planetb.ca/2010/08/how-to-create-an-ssh-tunnel-with-putty-and-stay-anonymous -在网络上/](http://www.planetb.ca/2010/08/how-to-create-an-ssh-tunnel-with-putty-and-stay-anonymous-on-a-network/)

有了这个就很容易了：[http ://metacpan.org/pod/HTTP::Server::Brick](http://metacpan.org/pod/HTTP::Server::Brick)

```
use HTTP::Daemon::SSL;

my $server = HTTP::Server::Brick->new(
      port => 8889,
      daemon_class => 'HTTP::Daemon::SSL',
      directory_indexing => 1,
      daemon_args  => [
         SSL_key_file  => 'my_ssl_key.pem',
         SSL_cert_file => 'my_ssl_cert.pem',
      ],
    );
$server->mount( '/csvfile' => {
    path => 'C:/path/to/your/csv/file',
    wildcard => 1,
}); 
# start accepting requests (won't return unless/until process
# receives a HUP signal)
$server->start; 
```

2.2：您可以在您的机器上设置 ssh 服务器并使用 scp(.exe from Putty) 来复制文件。

[https://serverfault.com/questions/8411/what-is-a-good-ssh-server-to-use-on-windows](https://serverfault.com/questions/8411/what-is-a-good-ssh-server-to-use-on-windows)

# r - 在 knitr/markdown 中更改代码块颜色

> ID：14695892
> 
> 赞同：10
> 
> 时间：2013-02-04T21:22:23.740
> 
> 标签：r, knitr, rstudio, r-markdown

我正在研究 Rstudio 中比较 Perl 和 R 的降价文档。我希望能够根据所使用的语言使用不同的代码块背景颜色。例如

**R代码块**

```
```{r}
dog <- 1
cat <- 2
dog + cat
``` 
```

**Perl 代码块**

```
```{r, engine='perl'}
$dog = 1;
$cat = 2;
print $dog + $cat;
``` 
```

如果您使用上述代码使用 knitr 生成 html 文件，则 r 代码块具有纯灰色背景，而代码块的输出具有白色/透明背景。

然而，Perl 代码块和输出有一个看起来很混乱的白色/透明背景。我希望在 markdown/knitr 中有一种优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T15:25:55.023

根据 Yihui 的建议，我与 Rstudio 支持人员进行了交谈。他们指出，我基本上可以通过以下 R 代码告诉 R 使用我自己的样式表：

```
options(rstudio.markdownToHTML = 
function(inputFile, outputFile) {      
require(markdown)
markdownToHTML(inputFile, outputFile, stylesheet='custom.css')   
}
) 
```

“custom.css”必须在您的工作目录中。我下载了 R studio 的 CSS 表（[链接](https://github.com/rstudio/markdown/blob/master/inst/resources/markdown.css)）来查找要修改的部分。在样式表中有一段代码

```
code.r, code.cpp {   background-color: #F8F8F8;} 
```

正如 Yihui 指出的那样，这只支持 R 和 C++ 的颜色编码块。对以下内容的快速更改包括 perl: code.r, code.cpp, code.perl { background-color: #F8F8F8;} 或者通过在 code.r 背景块下方添加以下内容来制作不同的颜色。

```
code.perl {
background-color: #B53389;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:15:43.567

发生这种情况的原因是因为 RStudio 仅捆绑`js`并`css`需要在运行时突出显示 R 代码`knit2html`。您可以通过在 Rmd 文件中包含以下 css 和 javascript 来启用其他语言的语法突出显示。

```
<link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
});
</script> 
```

这仍然不能解决不同背景的问题，因为两者都是由主题 css 控制的。但是，您可以包含自定义 css 以为输出提供不同的背景。

**更新：**

添加以下附加行将有助于调整输出背景颜色（我选择了浅黄色，但您可以根据需要自定义它）

```
<style>
pre code.bash {
  background: lightyellow;
}
</style> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T23:16:10.340

我认为这是 RStudio 的一个问题。目前，它似乎只支持两种语言（用于语法高亮）——R 和 C++；也许您可以向他们提交功能请求，或者您可以使用 Pandoc 等其他工具呈现您的降价输出，或者只是将 md 文件放在 Github 上，它也为 Perl 进行语法突出显示，例如[028-engine-perl.md](https://github.com/yihui/knitr-examples/blob/master/028-engine-perl.md)。

# java - 更新 java 表

> ID：14695893
> 
> 赞同：2
> 
> 时间：2013-02-04T21:22:29.570
> 
> 标签：java, swing, jtable, defaulttablemodel

我有一个计时器类来更新我的表，但我发现影响更改的唯一方法是使用此代码。它本质上是一个休息时间的应用程序。我正在使用 ini4j 读取网络上的 ini 文件。它确实有效，但它与我正在做的其他事情产生了速度问题。使用当前设置，它或多或少地正确显示时间，但当我添加更多人时开始滞后。如果您的回答是学习 jTables，那将无济于事，哈哈。我无法使用 jtables 和 fireupdate 更改使其正常工作。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.TimeZone;

import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

import main.Break;

import org.ini4j.InvalidFileFormatException;
import org.ini4j.Wini;

public class TableUpdate extends JLabel implements ActionListener {

    /**
     * 
     */
    private static final long serialVersionUID = 4357754555235469274L;
    private volatile static boolean running = true;
    SimpleDateFormat UTC = new SimpleDateFormat("HH:mm:ss");    
    Timer breaktimer = new Timer(1000, this);   
    public static long now = System.currentTimeMillis();

    final static String local = ConfigIni.location();
    final static File FILENAME = new File(local+"\\master.ini");

    @Override
    public void actionPerformed(ActionEvent arg0) {
        Runnable runnable = new Runnable() {
             public void run() {

                    tableupdate();  
             }};
            SwingUtilities.invokeLater(runnable);
        }

    public void tableupdate() {  
        UTC.setTimeZone(TimeZone.getTimeZone("UTC"));          
            Wini ini = null;
            try {
                ini = new Wini(FILENAME);
            } catch (InvalidFileFormatException e1) {               
                e1.printStackTrace();
            } catch (IOException e1) {              
                e1.printStackTrace();
            }
            String number = ini.get("analysts", "number");

            if (number.equals("8")) {
                Break.jTable1.setModel(new javax.swing.table.DefaultTableModel(
                 new Object [][] {
                 {AnalystIni.one(), StartIni.one(), BreakIni.one(), TypeIni.one()},
                 {AnalystIni.two(), StartIni.two(), BreakIni.two(), TypeIni.two()},
                 {AnalystIni.three(), StartIni.three(), BreakIni.three(), TypeIni.three()},
                 {AnalystIni.four(), StartIni.four(), BreakIni.four(), TypeIni.four()},
                 {AnalystIni.five(), StartIni.five(), BreakIni.five(), TypeIni.five()},
                 {AnalystIni.six(), StartIni.six(), BreakIni.six(), TypeIni.six()},
                 {AnalystIni.seven(), StartIni.seven(), BreakIni.seven(), TypeIni.seven()},
                 {AnalystIni.eight(), StartIni.eight(), BreakIni.eight(), TypeIni.eight()},              
                         },
                         new String [] {
                         "Analyst", "Start Time", "Timer", "Status"
                         }
                     ));

            }
    }

    public void start()  {

        running = true;
        breaktimer.start();
    }

    public void stop() {

        running = false;
    }

    public static void main(String[] args) {    

        java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {         
            TableUpdate jtl = new TableUpdate();
            jtl.start();
            }
    });                    
    }
} 
```

这是我的表的代码

```
try {
            jTable1.setModel(new javax.swing.table.DefaultTableModel(

                new Object [][] {
                    {AnalystIni.one(), StartIni.one(), BreakIni.one(), TypeIni.one()},
                    {AnalystIni.two(), StartIni.two(), BreakIni.two(), TypeIni.two()},
                    {AnalystIni.three(), StartIni.three(), BreakIni.three(), TypeIni.three()},
                    {AnalystIni.four(), StartIni.four(), BreakIni.four(), TypeIni.four()},
                    {AnalystIni.five(), StartIni.five(), BreakIni.five(), TypeIni.five()},
                    {AnalystIni.six(), StartIni.six(), BreakIni.six(), TypeIni.six()},
                    {AnalystIni.seven(), StartIni.seven(), BreakIni.seven(), TypeIni.seven()},
                    {AnalystIni.eight(), StartIni.eight(), BreakIni.eight(), TypeIni.eight()}
                },
                new String [] {
                    "Analyst", "Time Started", "Timer", "Status"
                }
            ));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        JTableHeader header = jTable1.getTableHeader();
        header.setBackground(SettingsIni.jtable1h());
        header.setForeground(SettingsIni.jtable1ht());
        jTable1.setBackground(SettingsIni.jtable1());
        jTable1.setForeground(SettingsIni.jtable1t());
        jTable1.setOpaque(false);
        jScrollPane1.setViewportView(jTable1);
        jScrollPane1.setOpaque(false);
        jTable1.setFocusable(false);
        //jScrollPane1.setBorder(BorderFactory.createMatteBorder(0,1,0,0,Color.black));
        jScrollPane1.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));

        jScrollPane1.getViewport().setOpaque(false);
        final Color jcolor1 = new Color(0, true);
        jScrollPane1.getViewport().setBackground(jcolor1);

        getRootPane().setBorder(BorderFactory.createEmptyBorder(0,0,0,0));//removed border 
```

我已将此代码添加到带有表格的类中。

```
@Override
    public void tableChanged(TableModelEvent e) {
        int row = e.getFirstRow();
        int column = e.getColumn();
        TableModel model = (TableModel)e.getSource();
        String columnName = model.getColumnName(column);
        Object data = model.getValueAt(row, column);        
    } 
```

我正在考虑将它添加到我的计时器中，但我仍然觉得我错过了一些东西。

```
BreakTimev21.jTable1.tableChanged(new TableModelEvent(BreakTimev21.jTable1.getModel())); 
```

从 camickr 我在我的 tableupdate 课程中尝试了这个。仍然没有帮助，它确实更新了，但有点小故障。我确实记得使用`jTable1.setAutoCreateColumnsFromModel(false);`

```
Object [][] data = {
                        {a1, StartIni2.one(), BreakIni2.one(), TypeIni2.one()},
                        {a2, StartIni2.two(), BreakIni2.two(), TypeIni2.two()},
                        {a3, StartIni2.three(), BreakIni2.three(), TypeIni2.three()},
                        {a4, StartIni2.four(), BreakIni2.four(), TypeIni2.four()},
                        {a5, StartIni2.five(), BreakIni2.five(), TypeIni2.five()},
                        {a6, StartIni2.six(), BreakIni2.six(), TypeIni2.six()},
                        {a7, StartIni2.seven(), BreakIni2.seven(), TypeIni2.seven()},
                        {a8, StartIni2.eight(), BreakIni2.eight(), TypeIni2.eight()},
                    };
                    String [] columnNames = {
                        "Analyst", "Start Time", "Timer", "Status"
                    };

                    TableModel model = BreakTimev21.jTable1.getModel();
                    ((DefaultTableModel) model).setDataVector(data, columnNames); 
```

我停止将 ini4j 用于 tableupdate 的读取部分，只使用 java 属性，这有助于他加快速度，但仍然没有解决。setDataVector 的工作原理与`BreakTimev21.jTable1.setValueAt(StartIni2.one(), 0, 1);`StartIni2 现在使用 java 属性而不是 ini4j 一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:45:49.200

您不应为计时器中的每次更新更改表模型。相反，您应该通过子类化来实现自己的模型`AbstractTableModel`。每次在计时器中更新数据时，您只更改模型中已更改的值，并使用 fire*() 方法`AbstractTableModel`让 Swing 知道您做了什么。

请参阅[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/AbstractTableModel.html)和[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:49:15.983

首先，您不应该扩展 JLabel 来实现 TableUpdate 类。

没有理由不能使用 DefaultTableModel。当您想更改模型中的现有数据时，您只需调用：

```
model.setValueAt(...) 
```

表格将自动重新绘制单元格。

因此，当 Timer 触发并更新表时，您可以使用新数据创建二维数组。然后循环遍历数组并将数组中的值与模型中的值进行比较。当您发现差异时，您可以按照我上面的建议更新模型。

或者另一种方法是继续使用现有模型，并使用 DefaultTableModel 的 setDataVector() 方法将模型中的所有数据替换为数组中的数据。

如果您使用第二种方法，那么在您最初创建 JTable 之后，您将要使用：

```
table.setAutoCreateColumnsFromModel(false); 
```

这将使模型的更新更快，因为它只是更新数据并且不会重新创建所有 TableColumns 等。

使用此处的任何一种方法，您都无需使用 tableChanged() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:44:27.363

问题是您将数据复制到 Object[][] 数组中，并将其用于表模型。但是当你的数据发生变化时，不清楚如何告诉表模型哪个值发生了变化。

相反，继承 AbstractTableModel 并覆盖以下内容（至少）：

```
public int getRowCount();
public int getColumnCount();
public Object getValueAt(int row, int column);
isCellEditable(int rowIndex, int columnIndex);
public Object setValueAt(Object aValue, int rowIndex, int columnIndex); 
```

调用 setValueAt 时，找出要修改的支持对象/属性，然后对其进行修改。然后调用 fireTableCellUpdated(int row, int column) 方法。

作为旁注，您在 AnalystIni 中使用的方法调用对我来说似乎很可疑，就像它们会将您限制为表中的八行一样。考虑使用列表而不是命名值。

# haskell - Haskell：显示 Hlist 上“可显示”的所有元素

> ID：14695894
> 
> 赞同：5
> 
> 时间：2013-02-04T21:22:30.333
> 
> 标签：haskell, reflection, hlist

我努力了

```
map show . mapMaybe fromDynamic $ [toDyn "one", toDyn (\x -> x::Integer), toDyn 3, toDyn ()] 
```

但它回来了

```
["()"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:35:13.367

问题是`fromDynamic`必须去一个单态类型。它正在采摘`()`，但使用类型签名，您可以让它选择任何其他类型。

为了展示它，您需要一些函数来依次尝试所有可能的类型。可能您不想像这样存储数据，而是希望将其与一些操作（例如显示）捆绑在一起存储。

有两种方法可以捆绑。我最喜欢的是将所有功能预先应用于该值（因此，为了展示，您只需获得 type 的 thunk 列表`String`）。

另一种方法是将函数也放入 a `Dynamic`（确保它们是正确的单态类型！），然后使用`dynApply`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T21:36:28.090

您的代码没有按照您的预期执行。早在动态行为`Data.Dynamic`开始之前，Haskell 类型检查器就会解析类型。表达式右侧部分的类型是

```
mapMaybe fromDynamic $ [toDyn "one", toDyn (\x -> x::Integer), toDyn 3, toDyn ()] :: Typeable b => [b] 
```

左边的类型是

```
map show :: Show a => [a] -> [String] 
```

所以结合这些，类型变量`b`resp。`a`得到统一。如果你从一个常规的 Haskell 文件编译它，编译器会给你一个警告（`The type variable `a' is ambigous`）。但在 GHCi 中，解释器默认为`()`.

但这会将`fromDynamic`表达式中的类型固定为`Dynamic -> Maybe ()`，从而有效地选择类型的所有元素`()`。

如果您强制编译器在那里使用不同的类型，例如通过指定类型签名，您会看到`fromDynamic`选择了不同的类型：

```
Prelude Data.Dynamic Data.Maybe> map (show :: Integer -> String) . mapMaybe fromDynamic $ [toDyn "one", toDyn (\x -> x::Integer), toDyn 3, toDyn ()]
["3"] 
```

不幸的是，没有办法实现您想要的：选择类型支持显示实例的所有元素，因为该信息不适用于`fromDynamic`.

# c++ - 错误：“=”标记之前的预期标识符

> ID：14695896
> 
> 赞同：3
> 
> 时间：2013-02-04T21:22:56.377
> 
> 标签：c++, mingw, librocket

我正在尝试编译一个库。

```
class ROCKETCORE_API Property
{
public:
enum Unit
{
    UNKNOWN = 1 << 0,

    KEYWORD = 1 << 1,           // generic keyword; fetch as < int >

    STRING = 1 << 2,            // generic string; fetch as < String >

    // Absolute values.
    NUMBER = 1 << 3,            // number unsuffixed; fetch as < float >
    PX = 1 << 4,                // number suffixed by 'px'; fetch as < float >
    COLOUR = 1 << 5,            // colour; fetch as < Colourb >
    ABSOLUTE_UNIT = NUMBER | PX | COLOUR,

    // Relative values.
    EM = 1 << 6,                // number suffixed by 'em'; fetch as < float >
    PERCENT = 1 << 7,           // number suffixed by '%'; fetch as < float >
    RELATIVE_UNIT = EM | PERCENT,

    // Values based on pixels-per-inch.
    IN = 1 << 8,                //<<----LINE 66----- number suffixed by 'in'; fetch as < float >
    CM = 1 << 9,                // number suffixed by 'cm'; fetch as < float >
    MM = 1 << 10,               // number suffixed by 'mm'; fetch as < float >
    PT = 1 << 11,               // number suffixed by 'pt'; fetch as < float >
    PC = 1 << 12,               // number suffixed by 'pc'; fetch as < float >
    PPI_UNIT = IN | CM | MM | PT | PC
}; 
```

错误输出为：

```
Property.h:66:6: error: expected identifier before '=' token
Property.h:66:6: error: expected '}' before '=' token
Property.h:66:6: error: expected unqualified-id before '=' token 
```

我认为还有其他错误是由于该枚举未正确定义而引起的。

知道为什么会这样吗？

将 MinGW 4.7.2 与 Eclipse 一起使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T21:25:30.977

这种情况下的一个典型问题是与您包含的某些标头中定义的某些宏名称发生冲突。在您的情况下`IN`，它在某些实现（MS？）中用作指定函数中的输入参数的宏。

一个好主意是给你的枚举常量一个前缀，`UNIT_UNKNOWN`而不是只是`UNKNOWN`. 或者，您可以`#undef IN`在包含所有“系统”标头之后执行此操作，但这种方法很容易最终变得非常“高维护”。再次，一个更好的主意是避免使用短的全大写标识符。

# marionette - 在 Marionette.js 的 CompositeView 中使用布局？

> ID：14695897
> 
> 赞同：0
> 
> 时间：2013-02-04T21:22:57.467
> 
> 标签：marionette

我目前使用 CompositeView 来显示许多 ItemView，每个都代表一个评论。现在，我希望能够回复评论：当用户选择“回复”按钮（ItemView 的一部分）时，我想在评论下方显示一个表单供用户回复。

我的想法是为此使用一个布局，包含两个区域：一个用于评论（当前由 ItemView 表示）和一个用于回复表单（后者仅在用户单击“回复”按钮后显示）。

是否可以将 Layout 指定为 CompositeView 的 itemView 属性并在此 Layout 中呈现原始 ItemView（在我的情况下表示评论）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:54:38.867

布局扩展了 ItemView 添加对区域的支持，因此应该可以正常工作。当您处理“回复”事件时，在您的（以前为空的）评论区域中显示您的评论视图。

# mysql - 左连接条件过滤

> ID：14695899
> 
> 赞同：0
> 
> 时间：2013-02-04T21:23:02.333
> 
> 标签：mysql, join, conditional-statements

我有一个`books`,`users`和一张`books_users`桌子。

现在，我想要一本由我（user_id = 3）和其他用户（user_id = 18）管理的书：

```
SELECT *
FROM books as Book
LEFT JOIN books_users as BookUser
    ON BookUser.book_id = Book.id
WHERE
    Book.user_count = 2 AND
    BookUser.user_id = 3 AND
    BookUser.user_id = 18 
```

问题：当左连接将书籍的结果分成几行时，它不会给两个用户一行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:28:27.470

我相信您想两次加入 BookUser 表以获取两个条件并使用 DISTINCT 来获取该书一次：

```
SELECT DISTINCT Book.*
FROM books as Book
LEFT JOIN books_users as BookUser1
    ON BookUser.book_id = Book.id
LEFT JOIN books_users as BookUser2
    ON BookUser.book_id = Book.id
WHERE
    Book.user_count = 2 AND
    BookUser1.user_id = 3 AND
    BookUser2.user_id = 18 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:28:52.647

```
SELECT *
  FROM books as B
 INNER JOIN books_users as BU1
    ON BU1.book_id = B.id
 INNER JOIN books_users as BU2
    ON BU2.book_id = B.id
 WHERE B.user_count = 2
   AND BU1.user_id = 3
   AND BU2.user_id = 18 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:30:50.157

我不知道 user_count 列。

这给出了由 3 或 18 使用的书籍

```
SELECT *
FROM books as Book
INNER JOIN books_users as BookUser
    ON BookUser.book_id = Book.id
WHERE
    Book.user_count = 2 AND
    BookUser.user_id IN  (3,18) 
```

或者

```
SELECT *
FROM books as Book
INNER JOIN books_users as BookUser
    ON BookUser.book_id = Book.id
WHERE
    Book.user_count = 2 AND
    (BookUser.user_id = 3 OR BookUser.user_id = 18) 
```

编辑：这给出了 3 和 18 使用的书籍。

```
SELECT book.*
FROM books as Book
INNER JOIN books_users as BookUser1
    ON BookUser1.book_id = Book.id
INNER JOIN books_users as BookUser2
    ON BookUser2.book_id = Book.id
WHERE
    Book.user_count = 2 AND
    BookUser1.user_id = 3 AND
    BookUser2.user_id = 18 
```

# android - 尝试在 android 中流式传输 IP 摄像机时出现黑屏

> ID：14695905
> 
> 赞同：3
> 
> 时间：2013-02-04T21:23:13.520
> 
> 标签：android, streaming, mjpeg, ip-camera

我正在开发一个 android 应用程序来监控一些 IP 摄像机。我正在使用[MjpegView 类](http://code.google.com/p/android-camera-axis/source/browse/trunk/serealisation/src/de/mjpegsample/MjpegView/?r=33)来流式传输视频。

我有三个相机。

我的主要活动中的代码如下：

```
public class MainActivity extends Activity {
    private MjpegView mv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Camera 1
        String URL = "http://216.62.222.101/mjpg/video.mjpg";

        //Camera 2
        // String URL = "http://user:user@iprobocam.marmitek.com/cgi/mjpg/mjpg.cgi";

        //Camera 3
        // String URL = "http://MyIp:MyPort/mjpg/video.mjpg";

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        mv = new MjpegView(this);
        setContentView(mv);
        mv.setSource(MjpegInputStream.read(URL));
        mv.setDisplayMode(MjpegView.SIZE_BEST_FIT);
        mv.showFps(true);
    }

    public void onPause() {
        super.onPause();
        mv.stopPlayback();
} 
```

我可以毫无问题地流式传输摄像机 1。当我使用相机 2 或 3 运行应用程序时，没有错误也没有警告，但我得到的最多的是黑屏。我认为这是身份验证的问题，但是如果我将其从相机中删除，我会得到相同的结果，即黑屏。

使其中一些工作而不是其他工作的相机之间有什么区别？

提前感谢您的帮助。

- - 编辑 - -

我在使用相机 2 运行应用程序时发现了一些奇怪的东西。`MjpegView`当它调用方法时，我在类中捕获了一个异常`MjpegInputStream.readMjpegFrame`。更深入地看，我注意到该方法`getEndOfSeqeunce`总是返回 1，而 Camera 1（运行良好的那个）返回更高的值（在 66 和 68 之间）。

我希望这可以让某人了解这里发生的事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:14:34.273

最后我解决了！

我不知道为什么在我第一次尝试流式传输此相机以删除身份验证时它不起作用。但是今天我又试了一次，现在可以了。

所以现在问题出在身份验证上。无法像在浏览器中那样在 URL 中添加凭据。

我刚刚修改了`MjpegInputStream`设置凭据`HTTPClient`：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.getCredentialsProvider().setCredentials(new AuthScope(host, AuthScope.ANY_PORT), new UsernamePasswordCredentials(username, password));
res = httpclient.execute(new HttpGet(URI.create(url))); 
```

是的，终于它起作用了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T03:04:41.220

如果您不想输入主机名，这也可以。

```
CredentialsProvider provider = new BasicCredentialsProvider();
UsernamePasswordCredentials credentials = new UsernamePasswordCredentials("username", "password");
provider.setCredentials(AuthScope.ANY, credentials);
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.setCredentialsProvider(provider);
res = httpclient.execute(new HttpGet(URI.create(url))); 
```

# c# - 填充 DataTemplate 内的 Combobox

> ID：14695913
> 
> 赞同：2
> 
> 时间：2013-02-04T21:23:52.630
> 
> 标签：c#, xaml, winrt-xaml

如果 a`combobox`在 a`DataTemplate`中，则表示 a 的项目`ItemsControl`。如何在`combobox`不进行硬编码的情况下填充项目？从代码隐藏中访问`combobox`它的名称是不可能的，我什至不喜欢这种方法。

```
<ItemsControl>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ComboBox x:Name="aComboBox" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

是否有一种标准方法来填充`combobox`来自外部数据存储的 ' 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:06:09.293

这是一个有点讨厌的解决方法，但是您是否考虑过在提供相关列表数据的每项数据源上添加一个属性？这不需要复制任何东西 - 它可以引用底层数据源，例如：

```
public class MyItemViewModel
{
    public IList<string> ComboBoxItems { get { return MySource.ItemList; } }
    ...
} 
```

`ItemsControl`然后，您可以从项目模板绑定到此。

这仅在您有一个仅用作项目的数据源的类时才有效 - 如果您直接绑定到底层模型对象，这不太实用。但是，出于各种原因，添加额外的层（例如，ViewModel 层）通常是个好主意。

或者，您能否通过命名资源提供数据？您可以编写`DataContext={StaticResource myData}`可以使您摆脱引用 item 的数据上下文的问题。

# c# - 如何检测mdi子控件事件？

> ID：14695916
> 
> 赞同：0
> 
> 时间：2013-02-04T21:23:53.337
> 
> 标签：c#, events, mdi

我一直在网上寻找，但找不到我正在尝试做的事情的答案。我正在创建一个 MDI 应用程序，并且在子窗体上是一个 DataGrid。我需要弄清楚如何在子表单上订阅该 DataGrid 的 DoubleClick 事件。

因此，假设 Form1 是父级。Form2 是孩子。我已经这样打开了 Form2：

```
Form2 f = new Form2 { Text = "Child", MdiParent = this };
f.Show(); 
```

当用户双击该表单 (f) 中的数据网格时，我需要能够检测到它。谁能指出我正确的方向？

（我希望这已经解释清楚了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:36:53.180

您可以使用从Class[`myDataGrid.DoubleClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doubleclick.aspx)继承的Class[`DataGrid`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.aspx)[`System.Windows.Forms.Control`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)

```
 private void Form_Load()
    {
        myDataGrid.DoubleClick += MyDataGridOnDoubleClick;
    }

    private void MyDataGridOnDoubleClick(object sender, EventArgs eventArgs)
    {
        //throw new NotImplementedException();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:28:31.177

AppDeveloper 的答案是您所需要的，但我感觉您的问题的核心可能是 Form2 的 DataGrid 相对于父 MDI 容器 (Form1) 的默认可见性。Form1 可以订阅 Form2 的 DataGrid 中的任何事件，但前提是 DataGrid 被标记为**public**（或**internal**）。默认情况下，该子控件将被标记为**private**，因此仅对 Form2 可见。

因此，如果您只是将 DataGrid 的访问修饰符从**private**更改为**public**，您应该能够像这样从 Form1 监听它的事件：

```
Form2 childForm = new Form2();
childForm.MdiParent = this;
// Form2.myDataGrid must be public/internal
childForm.myDataGrid.DoubleClick += new EventHandler(MyDataGridOnDoubleClick);
childForm.Show(); 
```

如果您想避免组件之间的紧密耦合，有更好的方法来处理这个问题，但在您的情况下，这是从 A 到 B 的最短路径。

# grocery-crud - 杂货杂货添加按钮以复制另一个表中的行

> ID：14695918
> 
> 赞同：1
> 
> 时间：2013-02-04T21:24:09.683
> 
> 标签：grocery-crud

我有 2 张桌子：**客户**和**待命**，我以这种方式在待命的杂货杂货中添加了一个新按钮：

```
$crud->add_action('Send', '', 'standby/copyrow','ui-icon-plus'); 
```

两个表都有相同的字段，在待机状态下，我从表单中接收数据，当我单击“发送”时，我的想法是复制该 id in 客户并从待机中删除该 id

换句话说，我需要将第一个表中的一行（我在其中添加了一个新按钮）添加到第二个表中，然后从第一个表中删除该行。

然后我创建了一个函数

```
function copyrow($id)
    {
       // I don't know how can I add that row 
    } 
```

希望有人可以帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:03:27.743

我在此代码中使用的表：

第一个表名 - 客户和字段 - a（主键，自动增量），b

第二个表名 - 备用和字段 - c（主键，自动增量），d

对您的代码进行您想要的更改..

函数复制行（$id）{

```
 $customers=$this->db->select('b')->where('a',$id)->get('customers')->result();
      foreach ($customers as $customer)
      {
              $this->db->set('d', $customer->b); 
              $this->db->insert('standby');
              $this->db->delete('customers', array('a' => $id)); 
      } 
```

}

我相信你会帮助这个代码。

# javascript - 所有版本的 Google Chrome 独有的 JavaScript 对象？

> ID：14695922
> 
> 赞同：0
> 
> 时间：2013-02-04T21:24:26.127
> 
> 标签：javascript, google-chrome, dom, object, google-chrome-extension

我想知道是否有任何 javascript 对象是**所有**版本的 Google Chrome 独有的。

我知道有`window.chrome`，但这仅在 Chrome 15 中实现，这是相当新的。我想知道是否有任何对象（或多个对象结合在一起）只有 Google Chrome 才有。

我正在构建一个需要 Chrome 的网络应用程序的原因是因为它是以“Chrome/Google”为主题/基于的。我不希望使用 Firefox 或 IE 的用户查看看起来像 Google Chrome 的应用程序，并且（因为我有时自己这样做），我不想嗅探用户代理，因为它可能被欺骗。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:27:34.833

你为什么不检查浏览器是否是这样的Chrome？

```
var isChrome = /chrome/.test(navigator.userAgent.toLowerCase()); 
```

[（这里的](https://stackoverflow.com/a/6339535/339852)原始答案）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:27:34.397

使用特征检测测试 chome 的正确方法如下：

```
var isChrome = !(Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) && 'WebkitTransform' in document.documentElement.style; 
```

查询的第二部分是检查您是否是 webkit，因为所有 webkit 浏览器的 CSS 供应商属性都以 Webkit（大写 W）开头。

第二部分检查你是否是 safari 并否定第二部分。Safari 是唯一具有“构造函数”的浏览器。

# file - Windows phone 8 获取文件夹 Music 或 Documents 中的文件

> ID：14695930
> 
> 赞同：3
> 
> 时间：2013-02-04T21:24:53.067
> 
> 标签：file, windows-phone-8, directory

我想将 C# 上的文件从计算机下载到 windows phone 8 上的默认文件夹 Document 或 Music。如果可能的话，我该如何获取它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:54:00.887

这两个文件夹可供开发人员使用，如[Windows Phone 8 上的答案所述：媒体文件访问](https://stackoverflow.com/questions/13467701/windows-phone-8-media-file-access)

## 歌曲和图片

根据 MSDN 上的“Windows Phone 数据”页面，歌曲和图片的 api 似乎是 MediaLibrary。

它允许从库中添加（SaveSong、SavePicture）和删除歌曲和图片。

为此，您需要在应用的清单中设置功能**ID_CAP_MEDIALIB_AUDIO**和**ID_CAP_MEDIALIB_PHOTO 。**

## 文档（仅限 Windows RT，不适用于手机）

可以通过 StorageFolder Api 访问文档文件夹，如[文件访问示例中所述](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597)

```
StorageFolder storageFolder = KnownFolders.DocumentsLibrary; 
```

## 下载文件

从计算机下载文件是一个完全不同的问题，需要您提供更多信息：

*   你想如何从电脑上下载文件
*   电脑有文件共享服务器吗
*   你想使用什么协议
*   ...

如果您要为该计算机编写一个程序以将文件共享到您的手机，那么这些[Windows Phone 8 网络示例](http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-Networking-835239c1)可以提供一些有关如何在 Windows Phone 8 上获取套接字、nfc、蓝牙或 http 的信息。

# javascript - 具有类名的可拖动 div

> ID：14695933
> 
> 赞同：2
> 
> 时间：2013-02-04T21:25:01.850
> 
> 标签：javascript

我通过 theZillion ( [http://thezillion.wordpress.com/2012/08/29/javascript-draggable-no-jquery/](http://thezillion.wordpress.com/2012/08/29/javascript-draggable-no-jquery/) ) 找到了这个脚本，它使 div 可拖动。我正在尝试使用此脚本按类名移动 div。而不是ID。

我有一个可以工作的事件处理程序，但在我添加脚本时没有......控制台也没有显示任何错误。关于如何使这项工作的任何想法？

这是我的代码：

```
function wrappmover(){
    var moveEvent = "dice-window-wrapper";
    var addClassArr= document.getElementsByClassName(moveEvent);
    for(var i=0; i<addClassArr.length; i++){
        var addClass = addClassArr[i];
        addClass.addEventListener("click", movewrapp, true);
    }       
    function movewrapp() {
        var classToMove = "dice-window-wrapper";
        var elems = document.getElementsByClassName(classToMove);
        var tzdragg = function(){
            return {
                 startMoving : function(evt){ 
                     evt = evt || window.event;
                     var posX = evt.clientX, 
                     posY = evt.clientY, 
                     a = document.getElementsByClassName(classToMove),
                     divTop = a.style.top,
                     divLeft = a.style.left;
                     divTop = divTop.replace('px','');
                     divLeft = divLeft.replace('px','');
                     var diffX = posX - divLeft, 
                     diffY = posY - divTop; 
                     document.onmousemove = function(evt){ 
                         evt = evt || window.event;
                         var posX = evt.clientX,
                         posY = evt.clientY, 
                         aX = posX - diffX,
                         aY = posY - diffY; 
                         tzdragg.move('elem',aX,aY);
                     }
                 },
                 stopMoving : function(){ 
                    document.onmousemove = function(){}
                 },
                 move : function(divid,xpos,ypos){ 
                     var a = document.getElementById(divid);
                     document.getElementById(divid).style.left = xpos + 'px';
                     document.getElementById(divid).style.top = ypos + 'px';
                 }
            }
        }(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:49:59.983

好的，所以你想在你的页面上有可拖动的元素？

看看下面的代码（这里是[**一个工作示例**](http://jsbin.com/usizoh/2/edit)）。我希望你会发现它不言自明，但以防万一还有评论：

```
// Wrap the module in a self-executing anonymous function
// to avoid leaking variables into global scope:
(function (document) {
    // Enable ECMAScript 5 strict mode within this function:
    'use strict';

    // Obtain a node list of all elements that have class="draggable":
    var draggable = document.getElementsByClassName('draggable'),
        draggableCount = draggable.length, // cache the length
        i; // iterator placeholder

    // This function initializes the drag of an element where an
    // event ("mousedown") has occurred:
    function startDrag(evt) {

        // The element's position is based on its top left corner,
        // but the mouse coordinates are inside of it, so we need
        // to calculate the positioning difference:
        var diffX = evt.clientX - this.offsetLeft,
            diffY = evt.clientY - this.offsetTop,
            that = this; // "this" refers to the current element,
                         // let's keep it in cache for later use.

        // moveAlong places the current element (referenced by "that")
        // according to the current cursor position:
        function moveAlong(evt) {
            that.style.left = (evt.clientX - diffX) + 'px';
            that.style.top = (evt.clientY - diffY) + 'px';
        }

        // stopDrag removes event listeners from the element,
        // thus stopping the drag:
        function stopDrag() {
            document.removeEventListener('mousemove', moveAlong);
            document.removeEventListener('mouseup', stopDrag);
        }

        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('mousemove', moveAlong);
    }

    // Now that all the variables and functions are created,
    // we can go on and make the elements draggable by assigning
    // a "startDrag" function to a "mousedown" event that occurs
    // on those elements:
    for (i = 0; i < draggableCount; i += 1) {
        draggable[i].addEventListener('mousedown', startDrag);
    }
}(document)); 
```

将其加载或包装在[尽可能接近](http://developer.yahoo.com/performance/rules.html#js_bottom)`<script></script>`的标签中，以免阻止浏览器获取其他资源。 `</body>`

实际上，如果您删除评论，这是一个非常小的功能。比您提供的网站上的那个更小、更高效。

## 可能的改进

考虑用[CSS 选择器](http://www.w3.org/TR/selectors-api/)`makeDraggable(selector);`在哪里替换匿名包装器，这样你就可以做一些疯狂的事情，比如：`selector`

```
makeDraggable('#dragMe, #dragMeToo, .draggable, li:nth-child(2n+1)'); 
```

它可以通过使用[`document.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)能够执行复杂的 CSS 查询而不是简单的类名查找来实现[`document.getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)。

## 需要注意的事项

*   如果页面有任何滚动 - 拖动看起来会损坏；[考虑通过scrollX和scrollY](https://developer.mozilla.org/en-US/docs/DOM/window.scrollX)调整被拖动元素的定位
*   这显然在 Internet Explorer 中不起作用（自己弄清楚）。
*   可能存在内存泄漏（需要分析和测试）。

## 编辑：添加新的可拖动元素的解决方案

所以你希望能够添加更多的可拖动元素？有几种方法可以解决这个问题。例如，您可以编写一个`makeDraggable(element);`函数并在要添加到 DOM 的元素上调用它。它当然会起作用，但是让我们看看不同的东西，好吗？

与其在 DOM 中搜索可拖动元素并为其分配事件侦听器，不如为文档正文上的“mousedown”事件分配*一个*。

触发时，事件对象将包含对[目标元素](https://developer.mozilla.org/en-US/docs/DOM/event.target)的引用，该元素是已调度事件的对象（您鼠标按下的元素）。代码的相关部分现在将类似于：

```
// Performs a check if the current element is draggable and if yes,
// then the dragging is initiated:
function startDragIfDraggable(evt) {
    // Check if the target element (referenced by evt.target) contains a
    // class named "draggable" (http://stackoverflow.com/questions/5898656/):
    if (evt.target.classList.contains('draggable')) {
        // Invoke startDrag by passing it the target element as "this":
        startDrag.call(evt.target, evt);
    }
}

// Listen for any "mousedown" event on the document.body and attempt dragging
// the target element (the one where "mousedown" occurred) if it's draggable:
document.body.addEventListener('mousedown', startDragIfDraggable); 
```

这是上述代码的[**一个工作示例。**](http://jsbin.com/usizoh/4/edit)作为奖励，它具有向 DOM 添加新的可拖动元素的模拟。

除了能够拖动动态添加的可拖动元素之外，这种方法还可以为我们节省一些内存，因为我们现在可以避免将一堆事件监听器分配给一堆元素。但是，如果您正在开发的应用程序是点击密集型应用程序（例如游戏），那么您可能会因为每次点击都进行检查而浪费一点 CPU。

# seo - 在所有产品页面上复制产品选项是否会损害我的 SEO？

> ID：14695935
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:25:19.607
> 
> 标签：seo, duplicates

我在一个网站上有 50 种产品 - 每个产品都有自己的页面。其中 30 种产品提供相同的硬件，因此在每个产品页面上都有列出。这种重复的内容会伤害我的 SEO 吗？人们如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:03:24.720

尚无法发表评论，但我同意原始评论者的观点，即在[Webmasters](https://webmasters.stackexchange.com/) StackExchange 网站上可能会更好地解决这个问题。然而，这个问题的具体答案涉及到编程领域，因为它可能至少涉及编写 HTML 代码。

如果内容直接出现在 30 个页面中的每一页上，那么它很可能会损害您的 SEO（可能的线索可能来自使用某种类型的站点分析工具进行的页面性能分析），特别是如果它们在其他方面基本相似或共享其他样板内容。有很多方法可以尝试解决这个问题，但是它们都有自己的缺点，主要影响 SEO 的其他领域：

1.  `<head>`在您的 html 文档中使用规范标签-关于此方法的优缺点和替代方案的旧但很好的[SEOMoz 文章。](http://www.seomoz.org/blog/complete-guide-to-rel-canonical-how-to-and-why-not)

2.  使用纯 JavaScript、AJAX 或 iFrame（最好带有 noindex 标签）来显示重复的内容 - 尽管爬虫功能的[最新发展](https://developers.google.com/webmasters/ajax-crawling/)表明这些在从 bot 中隐藏内容的方法变得不那么有用。

# php - 从 ajax 请求中获取未定义

> ID：14695937
> 
> 赞同：0
> 
> 时间：2013-02-04T21:25:28.797
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我正在尝试根据我使用 ajax 发送的值从 SQL 获取记录。但是当我 console.log 它时，我得到的只是未定义的。

jQuery：

```
function extraOptions(str){
    $.get("inc/ajax/extra_options.php",
        {q:str},
        function(html){
           return html;
        }
    );
}

$("#auto_model").change(function(){
   console.log(extraOptions(this.value));
}); 
```

extra_options.php：

```
$q = $_GET['q'];

echo extra_options($mysqli, $q); 
```

extra_options 功能：

```
function extra_options($mysqli, $q){
    $query = "SELECT
                                extra_options
                            FROM
                                vozila_tbl
                            WHERE
                                Model_vozila = '".$mysqli->real_escape_string($q)."'";
    $result = $mysqli->query($query);
    $row = $result->fetch_assoc();

    return $row['extra_options'];
} 
```

编辑：

它应该返回 1 或 0，如果它返回 0，我想用 if 语句更改 updateField 函数。

```
function updateField(str, id, prevvalue, value, vehicletype){
    $.get("inc/ajax/form_rest.php",
        {q:str, prevvalue:prevvalue, value:value, vehicletype:vehicletype},
        function(html){
           $('#'+id).html(html);
        }
    );
}

$("#auto_model").change(function(){
   updateField(this.value, 'auto_bodywork', 3, 4, this.parentNode.id), resetBelow(2,'auto'), show('auto_bodywork');
}); 
```

我需要在 if 语句中更改的行是：

```
updateField(this.value, 'auto_bodywork', 3, 4, this.parentNode.id), resetBelow(2,'auto'), show('auto_bodywork'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:29:49.267

您的`return`语句是从匿名函数返回的，而不是从`extraOptions()`. 因此，`extraOptions()`返回 undefined 因为它什么也不返回。

试试这个：

```
function extraOptions(str){
    $.get("inc/ajax/extra_options.php",
        {q:str},
        function(html){
           console.log(html);
        }
    );
}

$("#auto_model").change(function(){
   extraOptions(this.value);
}); 
```

如果我理解正确，以下代码应该可以满足您的要求：

```
$("#auto_model").change(function(e) {
    extraOptions(this.value, this.parentNode.id);
});

function extraOptions(str, parentNodeId) {        
    $.get("inc/ajax/extra_options.php",
        {q:str},
        function(data) {
            if (data == "1") {
                updateField(str, "auto_bodywork", 3, 4, parentNodeId);
            } else if (data == "0") {
                updateField(str, "auto_type", 5, 7, parentNodeId);
            } else {
                //Not 0 or 1.
            }

            resetBelow(2, "auto");
            show("auto_bodywork");
        }
    );
}

function updateField(str, id, prevvalue, value, vehicletype){
    $.get("inc/ajax/form_rest.php",
        {q:str, prevvalue:prevvalue, value:value, vehicletype:vehicletype},
        function(html){
           $('#'+id).html(html);
        }
    );
} 
```

# scala - 使用过滤值过滤条件

> ID：14695939
> 
> 赞同：4
> 
> 时间：2013-02-04T21:25:31.337
> 
> 标签：scala, functional-programming

我想过滤集合，因此相邻元素之间的距离至少为 5。

所以`List(1, 2, 3, 4, 5, 6, 7, 11, 20)`会变成`List(1, 6, 11, 20)`。

是否可以使用过滤器一次性实现？什么是scala方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:43:19.697

这个单线怎么样：

```
scala> l.foldLeft(Vector(l.head)) { (acc, item) => if (item - acc.last >= 5) acc :+ item else acc }

res7: scala.collection.immutable.Vector[Int] = Vector(1, 6, 11, 20) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T21:30:48.660

尝试`foldLeft()`：

```
val input = List(1, 2, 3, 4, 5, 6, 7, 11, 20)

input.tail.foldLeft(List(input.head))((out, cur) => 
  if(cur - out.head >= 5) cur :: out else out
).reverse 
```

如果不明显：

1.  `output`算法从集合中的第一个元素开始（可能您需要处理一些边缘情况）

2.  它遍历`input`. `cur`如果此元素 ( ) 与 的第一个元素之间的差异`input`大于或等于`5`，则添加到`input`。否则跳过并继续

3.  `input`是通过前置和检查`head`来获得更好的性能而构建的。`.reverse`最后需要

这基本上就是您以命令式的方式实现它的方式，但语法更简洁。

# c# - 如何从 C# 中的 Graphics 对象获取位图？

> ID：14695940
> 
> 赞同：0
> 
> 时间：2013-02-04T21:25:47.373
> 
> 标签：c#, .net, image, graphics, bitmap

如何从图形对象（或至少指向它的 Scan0 的指针）中获取位图？

如果一个图形对象真的总是引用一个位图，那么就有可能从图形对象中获取位图数据。（想一想：图形对象必须有一个指向 bmp 数据的指针。我会用 C 对其进行编码，但我的项目需要每个人都被 .NET 所困扰。）

这方面的应用包括： - 使用不安全的代码来获得更快的屏幕截图 - 使用 CreateGraphics 修改控件上的内容 - （以及我实际尝试完成的任务需要很长时间才能解释）

是的，以前有人问过这个问题，但从未回答过。我不是在寻找如何从位图中获取图形对象（显然是微不足道的）。 [FAIL1](https://stackoverflow.com/questions/597037/how-to-copy-one-graphics-object-into-another) , [FAIL2](https://stackoverflow.com/questions/5308363/how-to-get-the-bitmap-image-from-a-graphics-object-in-c) , [FAIL3](https://stackoverflow.com/questions/3021902/how-to-create-bitmap-object-from-a-graphics-object) , [FAIL4](https://stackoverflow.com/questions/3021902/how-to-create-bitmap-object-from-a-graphics-object) , [FAIL5](https://stackoverflow.com/questions/597037/how-to-copy-one-graphics-object-into-another) , [FAIL6](https://stackoverflow.com/questions/1836338/saving-panel-as-an-image) , [FAIL7](https://stackoverflow.com/questions/1535730/convert-graphics-object-to-bitmap-object)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:09:36.073

我认为您尝试做的事情是不可能的，因为您假设“图形对象确实总是引用位图”是错误的。

如果你真的想要一个位图，[这里](http://social.msdn.microsoft.com/Forums/hu-HU/netfxcompact/thread/286703c6-c6af-46a6-b7e0-c4f17ee8ea65)有一篇很好的文章展示了如何将控件渲染为位图，还有一篇[文章](http://www.wyvernzora.com/2012/12/ripple-effect-in-winforms-c.html)展示了如何在 WndProc 级别快速更新屏幕。如果您更熟悉 C++，这可能会让您朝着正确的方向前进。

# iis-7.5 - 应用程序请求路由 - IIS 中的单服务器 webfarm 设置

> ID：14695945
> 
> 赞同：0
> 
> 时间：2013-02-04T21:26:00.447
> 
> 标签：iis-7.5, reverse-proxy, web-farm, arr

我正在尝试使用 IIS 7.5 在我的 Windows Server 2008 上设置应用程序请求路由 (v2.5)。

到目前为止，我得到了这个：

1.  运行两个站点的 IIS 7.5
    *   `www.domain1.com`
    *   `test.domain1.com`
2.  IIS 7.5 和一个名为**My-Farm**的 webfarm和一台服务器：`test.domain1.com`
3.  Apache Tomcat 运行一些服务器`www.domain1.com:10000`

我可以将请求路由`www.domain1.com`到 webfarm，但我没有看到任何结果来自`test.domain1.com`？

我还尝试在上面的步骤 2 中将服务器更改为`localhost`or `www.domain1.com:10000`，`localhost:10000`但无论我做什么，请求都不会被代理。

**我是否正确设置了 ARR？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:53:01.527

在 ARR 中，当在与 ARR 相同的服务器中本地托管站点时，我倾向于将面向公众的站点（接收请求）与代理站点分开。

在你的情况下，你可能有这样的事情：

```
IIS:
   - Site 1 (binding: test.domain1.com:80)
   - Site 2 - proxied (binding: 127.0.0.1:22001)

Rewrite Rule
  - Match All
    - {HTTP_HOST} matches test.domain1.com
    - {SERVER_PORT} does not match 22001
  - Action: Route to Far 
```

这样，在请求 test.domain1.com 时，到达站点 1 的请求会被路由到站点 2。端口更改和规则避免了 ARR 再次将请求路由到站点 2。

# linux-kernel - spin_lock_irqsave

> ID：14695946
> 
> 赞同：2
> 
> 时间：2013-02-04T21:26:12.243
> 
> 标签：linux-kernel, linux-device-driver

我在单处理器机器上遇到了 spin_lock_irqsave 的奇怪问题。我有一段以 rx_process 命名的关键代码/函数，它由两个函数 rx_timeout 和 rx_callback 共享。它位于 Linux 内核驱动程序 omap-serial.c 下

```
rx_process ( uartNum)
{
//critical section
}

rx_timeout (uartNum)//this is called from softIrq context upon timer expiry
{ 
   rx_process (uartNum);
}
rx_callback(uartNum)//this is called when interrupt handler registers upon interrupt and when 4k buf is full in rx_process function which invokes start_rx_dma which results in this call back function.
{
   rx_process (uartNum);
} 
```

我发现这两个函数之间发生了竞态条件，因此我决定在函数开始和函数结束时在 rx_process 中引入 spin_lock_irqsave，但它仍然会导致竞态条件，并且不时，我观察数据丢失和内核恐慌。

```
rx_process ( uartNum)
{ spin_lock_irqsave(&lock, flags);
 //critical section
 spin_unlock_irqrestore(&lock, flags);
}
rx_timeout (uartNum)//this is called from softIrq context upon timer expiry
{ 
  rx_process (uartNum);
}
rx_callback(uartNum)//this is called when interrupt handler registers upon interrupt and when 4k buf is full in rx_process function which invokes start_rx_dma which results in this call back function
{
 rx_process (uartNum);
} 
```

现在，我将 spin_lock_irqsave 移动到 rx_timeout 以及 rx_callback 函数，我没有看到竞争条件。

```
 rx_process ( uartNum)
    { 
     //critical section
     spin_unlock_irqrestore(&lock, flags);
    }
    rx_timeout (uartNum)//this is called from softIrq context upon timer expiry
    { 
      spin_lock_irqsave(&lock, flags);
      rx_process (uartNum);
      spin_unlock_irqrestore(&lock, flags);
    }
    rx_callback(uartNum)//this is called when interrupt handler registers upon interrupt and when 4k buf is full in rx_process function which invokes start_rx_dma which results in this call back function
    {
     spin_lock_irqsave(&lock, flags);
     rx_process (uartNum);
     spin_unlock_irqrestore(&lock, flags);
    } 
```

如果有人能解释为什么在 rx_process 中使用的 spin_lock_irqsave 失败并且没有防止竞争条件，我将非常感激？

# jquery - jQuery.SerialScroll

> ID：14695949
> 
> 赞同：0
> 
> 时间：2013-02-04T21:26:17.563
> 
> 标签：jquery

请帮助我，我被卡住了。无法理解如何使用这个插件。我有一个很大的主页，其中包含潜水。所以我需要一个向下的固定箭头，让它在我按下它时在每个 div 中滚动我的页面。我从这里得到了这个插件[http://flesler.blogspot.com/2008/02/jqueryserialscroll.html](http://flesler.blogspot.com/2008/02/jqueryserialscroll.html) 我的箭头演示就在这里（顶部） [http://demos.flesler.com/ jquery/serialScroll/](http://demos.flesler.com/jquery/serialScroll/)

我知道我应该以某种方式显示脚本何时中断，但仍然卡住:(

Thsnx 4 帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:03:27.207

所以我无法理解，例如我接下来制作一个带有 id 的箭头。但是我应该如何说何时停止以及我的 div 显示在哪里？

```
$(document).ready(function(){
        $('#next').trigger( 'next' );       
    }); 
```

# ruby-on-rails-3 - 使用帮助程序填充表单部分的下拉选项时，rails 3将默认设置为下拉菜单

> ID：14695951
> 
> 赞同：2
> 
> 时间：2013-02-04T21:26:24.633
> 
> 标签：ruby-on-rails-3, drop-down-menu, partial, selected

我有一个`new`和`edit`视图通过部分共享相同的形式。我在表单上有一个选择下拉菜单来选择一个状态。我正在使用帮助程序来填充下拉列表的选项。我的问题是我无法在`edit`视图上获取表单以预先选择所选选项。

这是我填充选择下拉列表的代码：

```
<%= f.select :state, options_for_select(us_states) %> 
```

这是帮助程序代码：

```
module ListingsHelper
  def us_states
      [
        ['Alabama', 'AL'],
        ['Alaska', 'AK'],
        ['Arizona', 'AZ'],
        ['Arkansas', 'AR'],
        ['California', 'CA'],
        ['Colorado', 'CO'],
        ['Connecticut', 'CT'],
        ['Delaware', 'DE'],
        ['District of Columbia', 'DC'],
        ['Florida', 'FL'],
        ['Georgia', 'GA'],
        ['Hawaii', 'HI'],
        ['Idaho', 'ID'],
        ['Illinois', 'IL'],
        ['Indiana', 'IN'],
        ['Iowa', 'IA'],
        ['Kansas', 'KS'],
        ['Kentucky', 'KY'],
        ['Louisiana', 'LA'],
        ['Maine', 'ME'],
        ['Maryland', 'MD'],
        ['Massachusetts', 'MA'],
        ['Michigan', 'MI'],
        ['Minnesota', 'MN'],
        ['Mississippi', 'MS'],
        ['Missouri', 'MO'],
        ['Montana', 'MT'],
        ['Nebraska', 'NE'],
        ['Nevada', 'NV'],
        ['New Hampshire', 'NH'],
        ['New Jersey', 'NJ'],
        ['New Mexico', 'NM'],
        ['New York', 'NY'],
        ['North Carolina', 'NC'],
        ['North Dakota', 'ND'],
        ['Ohio', 'OH'],
        ['Oklahoma', 'OK'],
        ['Oregon', 'OR'],
        ['Pennsylvania', 'PA'],
        ['Puerto Rico', 'PR'],
        ['Rhode Island', 'RI'],
        ['South Carolina', 'SC'],
        ['South Dakota', 'SD'],
        ['Tennessee', 'TN'],
        ['Texas', 'TX'],
        ['Utah', 'UT'],
        ['Vermont', 'VT'],
        ['Virginia', 'VA'],
        ['Washington', 'WA'],
        ['West Virginia', 'WV'],
        ['Wisconsin', 'WI'],
        ['Wyoming', 'WY']
      ]
  end
end 
```

这工作得很好，并在`new`和`edit`视图上填充列表。但是，它不会设置选定的选项。如何`edit`使用此部分视图为视图执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:33:37.240

我认为在您的情况下，您不需要 options_for_select 调用。只需这样做：

```
<%= f.select :state, us_states %> 
```

# asp.net-mvc-4 - asp.net mvc4 客户端验证不起作用

> ID：14695961
> 
> 赞同：3
> 
> 时间：2013-02-04T21:26:53.087
> 
> 标签：asp.net-mvc-4, jquery-validate, unobtrusive-validation

我在我的配置中启用了客户端验证，并且我还包括了适当的 jquery 文件进行验证，但是每次我提交时，页面都会在没有先进行客户端验证的情况下发布到服务器。我已经粘贴了在下面的源代码中生成的标记。它似乎可以很好地生成数据验证消息。只是以某种方式不触发验证。

我正在使用 Nuget 上提供的 BeginCollection 库来构建我的动态表单。这可能是我的客户端验证以某种方式不起作用的原因吗？

```
 <input class="text-box single-line valid" data-val="true" 
data-val-number="The field DaysAbsent must be a number." 
data-val-required="The DaysAbsent field is required." 
id="students_471abdc8-b190-42da-9f72-ed30a1e33b10__DaysAbsent" 
name="students[471abdc8-b190-42da-9f72-ed30a1e33b10].DaysAbsent" 
type="text" value="0"> 
```

* * *

我的 web.config：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

* * *

_Layout.cshtml：

```
 @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
    @Scripts.Render("~/bundles/jqueryval")
    @RenderSection("scripts", required: false) 
```

* * *

BundleConfig.cs：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T16:10:17.863

你提到了动态表单，所以如果你动态加载你的输入 jquery.validate 不知道它们在那里。您必须“刷新”您的表单验证以验证您的新输入。

添加新输入后，使用此代码“刷新”表单的验证：

```
$('form').removeData('validator');
$('form').removeData('unobtrusiveValidation');
$.validator.unobtrusive.parse($('form')); 
```

# increment - SASS - 增加一个类并选择列表中的下一个变量

> ID：14695965
> 
> 赞同：2
> 
> 时间：2013-02-04T21:27:19.947
> 
> 标签：increment, sass

我正在尝试进行设置，它将类从 1 增加到 12，并根据变量列表（也是 12 个变量）设置背景颜色。

我很接近，但没有得到我希望的结果。这是我第一次涉足 SASS 中的控制指令，所以请原谅我的无知。

目前，我正在成功地增加课程。这是选择我错过的增量变量的一部分。

```
@mixin colors {
        $colors: $orange, $blue, $lightBlue, $teal, $lightTeal, $green, $lightGreen, $darkOrange, $orange, $lightOrange, $yellow, $lightYellow;
        @each $color in $colors {
            background-color:#{$color};
        }       
    }

@for $i from 1 through 12 { 
    .block-#{$i} {
        span {
            @include colors;
        }
    }
} 
```

这是输出类似的东西：

```
.block-10 span {
    background-color: #faa21b;
    background-color: #005ca8;
    background-color: #0079c3;
    background-color: #0088a8;
    background-color: #009386;
    background-color: #00a05e;
    background-color: #589c45;
    background-color: #d4772b;
    background-color: #faa21b;
    background-color: #f7971f;
    background-color: #f9cc2a;
    background-color: #f6ee32;
} 
```

理想情况下，我希望有一个背景颜色声明，而不是 12 个。不过，我认为这可能是我所缺少的一些简单的东西。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T22:00:44.370

像这样的东西？（不知道你为什么使用mixin）：

```
$orange: #faa21b;
$blue: #005ca8;
$lightBlue: #0079c3;
$teal: #0088a8;
$lightTeal: #009386;
$green: #00a05e;
$lightGreen: #589c45;
$darkOrange: #d4772b;
$orange: #faa21b;
$lightOrange: #f7971f;
$yellow: #f9cc2a;
$lightYellow: #f6ee32;
$i: 1;

@each $color in $orange, $blue, $lightBlue, $teal, $lightTeal, $green, $lightGreen, $darkOrange, $orange, $lightOrange, $yellow, $lightYellow {
    .block-#{$i} {
        span {
            background-color:#{$color};
        }
    }
    $i: $i + 1;
} 
```

输出：

```
.block-1 span {
  background-color: #faa21b; }

.block-2 span {
  background-color: #005ca8; }

.block-3 span {
  background-color: #0079c3; }

.block-4 span {
  background-color: #0088a8; }

.block-5 span {
  background-color: #009386; }

.block-6 span {
  background-color: #00a05e; }

.block-7 span {
  background-color: #589c45; }

.block-8 span {
  background-color: #d4772b; }

.block-9 span {
  background-color: #faa21b; }

.block-10 span {
  background-color: #f7971f; }

.block-11 span {
  background-color: #f9cc2a; }

.block-12 span {
  background-color: #f6ee32; } 
```

# c# - 预言机变更通知

> ID：14695970
> 
> 赞同：2
> 
> 时间：2013-02-04T21:27:45.233
> 
> 标签：c#, oracle

我正在尝试使用带有 C# 的 Oracle 更改通知让测试应用程序工作，但我没有在我的应用程序中收到回调通知。Oracle 数据库版本为 11.2.0.1.0。Oracle.DataAccess v.2.112.30。我可以通过查看 SYS.USER_CHANGE_NOTIFICATION_REGS 和 SYS.USER_CQ_NOTIFICATION_QUERIES 来确认查询已在 Oracle 中注册。但是，SYS.DBA_CHANGE_NOTIFICATION_REGS 中从未出现任何内容。

注册一直持续到我在表上提交事务。提交后几秒钟后注册消失，我的应用程序没有收到通知。

我已确保我的计算机正在侦听正确的端口，甚至尝试关闭任何可能阻止该端口的防火墙。

我确实有 GRANT CHANGE NOTIFICATION 到 MYSCHEMA，GRANT EXECUTE ON DBMS_CHANGE_NOTIFICATION 到 MYSCHEMA，并且 JOB_QUEUE_PROCESSES 设置为 1。

问题：

1) 注册是否应该在 SYS.DBA_CHANGE_NOTIFICATION_REGS 中可见，如果是，是什么导致它在 SYS.USER_CHANGE_NOTIFICATION_REGS 和 SYS.USER_CQ_NOTIFICATION_QUERIES 中可见时不可见？

2）什么可能导致提交后注册消失？

3) 什么可能导致我的应用程序通知失败？

这是我正在使用的 C# 代码，它与 Oracle 网站上的基本相同：

```
using System;
using System.Threading;
using System.Data;
using Oracle.DataAccess.Client;

namespace NotifyTest
{
    public class Program
    {
        public static bool IsNotified = false;

            public static void Main(string[] args)
        {
            string constr = "User Id=mySchema;Password=myPassword;Data Source=myOracleInstance";

            OracleDependency dep = null;

            try
            {
                using (var con = new OracleConnection(constr))
                {
                    Console.WriteLine("Registering query...");
                    var cmd = new OracleCommand("select * from mySchema.NOTIFY_TEST", con);
                    con.Open();

                    OracleDependency.Port = 1005;
                    dep = new OracleDependency(cmd);
                    dep.OnChange += OnMyNotificaton;

                    int queryRegistered = cmd.ExecuteNonQuery();

                    // If oracle returns -1, then the query is successfully registered
                    if (queryRegistered == -1)
                    {
                        Console.WriteLine("Query Registered...");
                        Console.WriteLine("Listening for Callback...");
                    }
                    else
                    {
                        Console.WriteLine("There was an error...");
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }

            // Loop while waiting for notification       
            while (IsNotified == false)
            {
                Thread.Sleep(100);
            }
        }

        public static void OnMyNotificaton(object sender, OracleNotificationEventArgs arg)
        {
            Console.WriteLine("Table change notification event is raised");
            Console.WriteLine(arg.Source.ToString());
            Console.WriteLine(arg.Info.ToString());
            Console.WriteLine(arg.Source.ToString());
            Console.WriteLine(arg.Type.ToString());
            IsNotified = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:17:25.967

只是想提供有关我如何解决此问题的更新。我将我的 Oracle.DataAccess.dll 从 v.2.112.3.0 更改为 v.2.112.1.2，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-05T18:59:51.683

在 SYS.CHNF$_REG_INFO 属性 QOSFLAGS 中有 QOS_DEREG_NFY，它指定数据库应该在第一次通知时取消注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:07:35.553

不确定，但 job_queue_processes (1) 的值有点低。Oracle 在内部执行各种维护和事件处理任务。为此，他们还使用 Job slave。提高 job_queue_processes（默认 1000）并检查[故障排除 CQN 注册](https://docs.oracle.com/cd/E11882_01/appdev.112/e41502/adfns_cqn.htm#ADFNS1020)

# mysql - MySQL从不同表复制列，插入表顶部

> ID：14695971
> 
> 赞同：1
> 
> 时间：2013-02-04T21:27:53.880
> 
> 标签：mysql, sql, insert

我正在尝试将几个表合并在一起以合并数据，但是当我尝试将一列从一个表插入到另一个表时，我正在使用的查询会在表中当前存在的最后一条记录之后插入记录。关于复制列有很多问题，但它们似乎都是从一个空表开始的。

```
INSERT INTO newTable( newColumn ) SELECT oldColumn FROM oldTable 
```

如何修改此查询以在表的开头而不是结尾插入行？

正在发生的事情（左）与我想要发生的事情（右）的视觉表示：

```
+--------+--------+------------+    +--------+--------+------------+
| ID     | Column |  newColumn |    | ID     | Column |  newColumn |
+--------+--------+------------+    +--------+--------+------------+
| 1      | 12345  |            |    | 1      | 12345  |    12345   |
| 2      | 12345  |            |    | 2      | 12345  |    12345   |
| 3      | 12345  |            |    | 3      | 12345  |    12345   |
| 4      |        |    12345   |    +--------+--------+------------+
| 5      |        |    12345   |
| 6      |        |    12345   |
+--------+--------+------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:38:27.513

如评论中所述，您需要 UPDATE 语句**而不是**INSERT 语句：

```
UPDATE newTable 
    JOIN oldTable
    ON newTable.id = oldTable.id
SET newcolumn = oldcolumn; 
```

可以在这里看到一个经过测试的示例：[http ://sqlfiddle.com/#!2/77724/1](http://sqlfiddle.com/#!2/77724/1)

# javascript - 由于 TinyMCE 删除名称，Django 表单未发布

> ID：14695974
> 
> 赞同：2
> 
> 时间：2013-02-04T21:28:00.963
> 
> 标签：javascript, python, django, tinymce

我正在尝试发布我的文本区域。如果没有 TinyMCE RichText，表单会发布。但是，在添加 RichText 时，iframe 似乎从名为“描述”的文本区域中删除了名称。

我知道 TinyMCE 不是文本区域，而是 iframe。当我提交时，缺少“描述”。无论如何要发布和获取后端的“描述”数据吗？还是我做错了什么？

```
<script language="javascript" type="text/javascript">
tinyMCE.init({
        theme : "advanced",
        mode : "textareas",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_buttons1 : "bold,italic,underline,bullist,numlist",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        width: "100%"
});

...

<div>
    <label for="id_description">Description</label>
    <textarea class="required input-text full-width" id="id_description" rows="4" name="description"></textarea>
</div> 
```

在我的views.py中之前的工作：

```
description = request.POST.get('description','')
..and more stuff 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:14:32.300

也许你应该使用这个包：[django-tinymce](https://github.com/aljosa/django-tinymce)，安装它（[django-tinymce docs](http://django-tinymce.readthedocs.org/en/latest/)）并将表单字段（用于模型文本字段）声明为休闲：

```
description = forms.CharField(widget=TinyMCE(attrs={'cols': 80, 'rows': 30}), required=False, label="Description") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:52:25.923

提交时您可以使用

```
tinymce.get('description').getContent(); 
```

获取编辑器内容。您可以选择调用 tinymce.triggerSave() - 它应该使用编辑器内容更新您的文本区域。

`tinyMCE.activeEditor.getContent()`仅当您使用一个编辑器并且已被点击时才有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:39:37.623

您可以使用获取内容`tinyMCE.activeEditor.getContent()`

# .htaccess - 重写 .htaccess 以删除 .php GET 方法

> ID：14695975
> 
> 赞同：0
> 
> 时间：2013-02-04T21:28:05.600
> 
> 标签：.htaccess, get

我计划从我的网页中删除 .php 扩展名。我已经有了要使用的 .htaccess 文件的代码；

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

在我开始编辑文件之前，我有一个问题；

当我这样做时，使用 GET 方法的页面会发生什么情况？例如 index.php?mode=logout

这仍然有效吗？如果没有，是否有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:30:51.680

您可以包含[QSA](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)以保持查询字符串的完整性。

```
RewriteRule ^([^\.]+)$ $1.php [NC,L,QSA] 
```

# c++ - 如何在 Visual Studio 2012 中查看断言失败的 C++ 堆栈跟踪？

> ID：14695977
> 
> 赞同：4
> 
> 时间：2013-02-04T21:28:07.363
> 
> 标签：c++, visual-c++, visual-studio-2012, assert

当我的断言在 Visual Studio 2012 中失败时，如何查看堆栈跟踪？如果我附加到一个进程，它会按预期工作，但是当我只使用 F5（调试）构建时，我的断言会发生，给我“中止，重试，忽略”提示，但我没有看到我的调用堆栈在调试器。

有什么方法可以在调试构建期间启用它，还是我总是必须构建然后附加到进程？

我的断言只是一个简单的断言(1 == 2) 让它失败并查看调用堆栈。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:17:43.853

[（转自评论）]

按下`Retry`按钮将激活调试器，允许您查看调用堆栈、本地变量等。

# c# - 使用母版页时更改 ct100 clientID 前缀

> ID：14695978
> 
> 赞同：0
> 
> 时间：2013-02-04T21:28:13.767
> 
> 标签：c#, asp.net, vb.net, .net-3.5, master-pages

我正在 C# 中寻找一种在.Net 3.5 中使用母版页时更改 ct100 前缀客户端 ID 的方法。我已经在 VB 中使用后面的母版页代码中的以下代码段成功地完成了这项工作......

```
Private Sub InitSub(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
  ID = "master"
End Sub 
```

我知道`clientIDMode="Static"`哪个在.Net 3.5 中不起作用。

[这篇文章](https://stackoverflow.com/questions/3441141/what-is-ct100-and-how-do-i-rename-it)很有帮助，但我似乎无法将它有效地翻译成 C#。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:32:05.790

物有所值：

```
protected void Page_Init(object sender, EventArgs e)
{

      ID = "master";

} 
```

使用[`AutoEventWireup=true`](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup%28v=vs.110%29.aspx)（默认），您可以在遵循命名约定时使用页面方法：`Page_EventName`.

# javascript - 背景图像悬停类适用于 Firefox，但不适用于 Chrome/Safari

> ID：14695983
> 
> 赞同：0
> 
> 时间：2013-02-04T21:28:59.233
> 
> 标签：javascript, jquery, html, css

我的菜单需要一些帮助。

我的链接有一个图像按钮类，这包括`a`

```
.myButton:hover {
    background-image:url(assets/images/button2.png);
} 
```

此图像悬停更改不适用于 Google Chrome 或 Safari 浏览器，但它在 Firefox 中完美运行！

请问有人能弄清楚这是为什么吗？我该如何解决？

这是网站（暂时在线）

[http://zeendesign.co.uk/smiledental.co.uk/SmileDental/SmileDental/](http://zeendesign.co.uk/smiledental.co.uk/SmileDental/SmileDental/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:34:52.450

这是因为你正在制作锚点`display:inline-block;` 将显示更改为`display:block;`

# html - Twitter Bootstrap 中的全宽拆分下拉按钮

> ID：14695985
> 
> 赞同：14
> 
> 时间：2013-02-04T21:29:02.400
> 
> 标签：html, css, twitter-bootstrap

我在我的网站上有一个地方，它使用了一堆`button`样式的元素`btn-block`（来自 Twitter Bootstrap Docs 的[示例）。](http://jsfiddle.net/TQSk6/1/)我现在想将其中一些切换为拆分按钮（[示例](http://jsfiddle.net/eBJGW/2/)），但我似乎无法让拆分按钮和普通按钮的长度相同。

我已经尝试过各种各样的东西，但我似乎无法找到一种方法来做到这一点。有没有人设法做到这一点？请记住，如果不需要，我不想硬编码任何元素的宽度。（请注意，这也包括不使用硬编码百分比。）如果绝对必要，我可以为按钮的切换部分定义宽度（因为我知道那里只有一个箭头字符）但是希望指定尽可能少的“幻数”，以保持代码在未来的可维护性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T12:32:33.147

将下拉引线包装在容器中：

*（注意：此示例适用于 Bootstrap 2.x）*

```
.dropdown-lead {
  width: 100%;
}

.leadcontainer {
  left: 0;
  position: absolute;
  right: 30px;
}

.dropdown-toggle {
  width: 30px;
  float: right;
  box-sizing: border-box;
}

.fillsplit {
  position: relative;
}
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

<button class="btn btn-block btn-primary" type="button">Block level button</button>
<div class="btn-group btn-block fillsplit">
  <div class="leadcontainer">
    <a class="btn btn-primary dropdown-lead" href="#"><i class="icon-user icon-white"></i> User</a>
  </div>
  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
  <ul class="dropdown-menu">
    <li><a href="#"><i class="icon-pencil"></i> Edit</a>
    </li>
    <li><a href="#"><i class="icon-trash"></i> Delete</a>
    </li>
    <li><a href="#"><i class="icon-ban-circle"></i> Ban</a>
    </li>
    <li class="divider"></li>
    <li><a href="#"><i class="i"></i> Make admin</a>
    </li>
  </ul>
  <div>
  </div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-06T16:02:25.843

我正在寻找同样的行为并找到了这个 flexbox 解决方案：[http ://codepen.io/ibanez182/pen/MwZwJp](http://codepen.io/ibanez182/pen/MwZwJp)

这是一个优雅的实现，它利用了该`flex-grow`属性。

只需将`.btn-flex`类添加到`.btn-group`您的 HTML 中。这就是您需要的所有 CSS：

```
.btn-flex {
    display: flex;
    align-items: stretch;
    align-content: stretch;
}

.btn-flex .btn:first-child {
    flex-grow: 1;
} 
```

归功于笔的作者：[Nicola Pressi](http://codepen.io/ibanez182/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:52:00.073

如果您将类 btn-block 添加到 .btn-group 元素并为下拉按钮元素提供 % 宽度，那么就可以了。

```
.dropdown-lead{
    width: 96%;
    box-sizing: border-box;
}
.dropdown-toggle{
    width: 4%;
    box-sizing: border-box;
} 
```

这是一个例子：http: [//jsfiddle.net/eBJGW/5/](http://jsfiddle.net/eBJGW/5/)

# javascript - DOM Exception 5 INVALID CHARACTER 错误在 javascript 中的有效 base64 图像字符串上

> ID：14695988
> 
> 赞同：23
> 
> 时间：2013-02-04T21:29:13.020
> 
> 标签：javascript, image, base64, decode

我正在尝试将图像的 base64 字符串解码回二进制文件，以便操作系统可以在本地下载和显示它。

将字符串作为带有数据 URI 前言（数据：img/png;base64，）的 HTML IMG 元素的 src 时成功呈现的字符串，但在使用 atob 函数或 goog 闭包函数时失败。

然而，解码成功时放在这里：[http ://www.base64decode.org/](http://www.base64decode.org/)

有任何想法吗？

编辑：我成功地使用内置 JS 函数以外的另一个库对其进行解码。但是，它仍然无法在本地打开 - 在 Mac 上说它已损坏或格式未知且无法打开。

代码是这样的：

```
imgEl.src = 'data:img/png;base64,' + contentStr; //this displays successfully
decodedStr = window.atob(contentStr); //this throws the invalid char exception but i just
//used a different script to get it decode successfully but still won't display locally 
```

base64 字符串本身太长，无法在此处显示（限制为 30,000 个字符）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-19T22:07:22.250

我只是在这个墙上撞了一会儿。

这个问题有几个可能的原因。1) UTF-8 问题。[这里](http://web.archive.org/web/20200220161900/http://monsur.hossa.in:80/2012/07/20/utf-8-in-javascript.html)有一个很好的文章+解决方案。

在我的例子中，我还必须确保在将字符串传递给 atob 之前所有的空格都在字符串之外。例如

```
function decodeFromBase64(input) {
  input = input.replace(/\s/g, '');
  return atob(input);
} 
```

真正令人沮丧的是，base64 在 python 中使用 base64 库正确解析，但在 JS 中却没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T06:13:05.683

我不得不删除`data:audio/wav;base64,`b64 前面的，因为这是 b64 的一部分。

`var data = b64Data.substring(b64Data.indexOf(',')+1);`

`var processed = atob(data);`

# d3.js - IE 中的图形布局呈现错误，Chrome 工作正常

> ID：14695990
> 
> 赞同：1
> 
> 时间：2013-02-04T21:29:27.627
> 
> 标签：d3.js

首先是 jsfiddle 的链接：http: [//jsfiddle.net/HotFrost/RnNX3/6/](http://jsfiddle.net/HotFrost/RnNX3/6/) 您可以在 chrome 中看到 svg 元素内的图形布局，平移和缩放都可以。而对于 IE (v9.0)，它完全无视边界。

基本上对于这个简单的布局：

```
<div id="wrapper">
    <div id="content-col"> graph 
        <div id="graphwidget_graphContainer" style="border: 4px solid purple;" ></div>
    </div>
    <div id="right-col"> menu </div>
</div> 
```

IE 和 Chrome 呈现图形的方式不同。

我尝试对宽度/高度/删除它们使用不同的设置。我试图用表格单元格替换 div。仍然存在同样的问题 - 在 IE 图形节点中呈现在 svg 元素上方，然后（当平移/缩放时）也越过 svg 元素边界。

任何人都可以提供一些想法如何解决它？提前致谢！

高频

# css - 创建一个有 5 片叶子的 CSS 花

> ID：14695992
> 
> 赞同：0
> 
> 时间：2013-02-04T21:29:31.430
> 
> 标签：css, styles, overlay, indicator

我正在尝试创建一朵有 5 片叶子的 CSS 花 - 没有任何有希望的尝试。我正在尝试创建：带有 5 片叶子的 CSS 花，每片叶子都可以有三种不同的状态（小、中、大）。到目前为止，我已经找到了[http://rossmcneil.com/create-a-simple-css-raindrop/ - 但我很难覆盖 5 个形状并更改大小。](http://rossmcneil.com/create-a-simple-css-raindrop/)也许我有人可以给我一个建议如何实现这一目标。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:46:04.077

您可以为每个矩形添加一个 skewX 和 skewY。

```
 transform: skewX(value);  /* e.g. skewX(25deg) */ 
```

这是它的样子：

[http://jsfiddle.net/SKbAz/2/](http://jsfiddle.net/SKbAz/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:58:51.037

为什么不呢，这很有趣：

[http://jsfiddle.net/v5WxW/](http://jsfiddle.net/v5WxW/)

随心所欲地弄乱角度

```
@-webkit-keyframes spin {
    from{
        -webkit-transform : rotate(0deg);
    }
    to{
        -webkit-transform : rotate(360deg);
    }
}

.drops {
    -webkit-animation: spin 10s linear infinite;
    width            : 376px;
    height           : 294px;
}

.raindrop{
    background                      : lightblue;
    width                           : 80px;
    height                          : 80px;
    position                        : absolute;

    border-radius                   : 100px;
    -webkit-border-radius           : 100px;
    -moz-border-radius              : 100px;

    border-top-right-radius         : 0;
    -webkit-border-top-right-radius : 0;
    -moz-border-radius-topright     : 0;

    transform                       : rotate(-45deg);
    -webkit-transform               : rotate(-45deg);
    -moz-transform                  : rotate(-45deg);
    -o-transform                    : rotate(-45deg);
    -ms-transform                   : rotate(-45deg);

    transition                      : all 2s;
    -webkit-transition              : all 2s;
    -moz-transition                 : all 2s;
    -o-transition                   : all 2s;
    -ms-transition                  : all 2s;
}

.raindrop.sm {
    width                           : 60px;
    height                          : 60px;
    position                        : absolute;

    border-radius                   : 75px;
    -webkit-border-radius           : 75px;
    -moz-border-radius              : 75px;

    border-top-right-radius         : 0;
    -webkit-border-top-right-radius : 0;
    -moz-border-radius-topright     : 0;
}

.raindrop.lg {
    width                           : 100px;
    height                          : 100px;
    position                        : absolute;

    border-radius                   : 125px;
    -webkit-border-radius           : 125px;
    -moz-border-radius              : 125px;

    border-top-right-radius         : 0;
    -webkit-border-top-right-radius : 0;
    -moz-border-radius-topright     : 0;
}

.raindrop.green  { background : lightgreen; }
.raindrop.yellow { background : yellow;     }
.raindrop.orange { background : orange;     }
.raindrop.teal   { background : teal;       }
.raindrop.pink   { background : pink;       }

.raindrop:nth-child(1){
    transform                       : rotate(-72deg);
    -webkit-transform               : rotate(-72deg);
    -moz-transform                  : rotate(-72deg);
    -o-transform                    : rotate(-72deg);
    -ms-transform                   : rotate(-72deg);
    top                             : 159px;
    left                            : 159px;
}
.raindrop:nth-child(2){
    transform                       : rotate(-144deg);
    -webkit-transform               : rotate(-144deg);
    -moz-transform                  : rotate(-144deg);
    -o-transform                    : rotate(-144deg);
    -ms-transform                   : rotate(-144deg);
    top                             : 110px;
    left                            : 188px;
}
.raindrop:nth-child(3){
    transform                       : rotate(-216deg);
    -webkit-transform               : rotate(-216deg);
    -moz-transform                  : rotate(-216deg);
    -o-transform                    : rotate(-216deg);
    -ms-transform                   : rotate(-216deg);
    top                             : 27px;
    left                            : 136px;
}
.raindrop:nth-child(4){
    transform                       : rotate(-288deg);
    -webkit-transform               : rotate(-288deg);
    -moz-transform                  : rotate(-288deg);
    -o-transform                    : rotate(-288deg);
    -ms-transform                   : rotate(-288deg);
    top                             : 98px;
    left                            : 108px;
}
.raindrop:nth-child(5){
    transform                       : rotate(0deg);
    -webkit-transform               : rotate(0deg);
    -moz-transform                  : rotate(0deg);
    -o-transform                    : rotate(0deg);
    -ms-transform                   : rotate(0deg);
    top                             : 147px;
    left                            : 76px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T15:21:40.333

基本的 5 片叶子花的另一种实现：

```
<i><i><i><i><i></i></i></i></i></i>
<style>
i {
  display: inline-block;
  width: 0; height: 0;
  padding: 40px 20px;
  background: rgba(0,0,0,.2);
  transform: rotate(72deg);
  border-top-left-radius: 99px;
  border-bottom-right-radius: 99px;
}
</style> 
```

你绝对可以摆弄角度。看看这个**[6 叶花演示](http://codepen.io/arnley/full/EaQRGV/)**的结果。

# plugins - 如何显示 Atlassian 插件的配置屏幕？

> ID：14695994
> 
> 赞同：4
> 
> 时间：2013-02-04T21:29:37.767
> 
> 标签：plugins, configuration, bitbucket-server

我正在构建一个插件，以在我打开或编辑 atlassian stash 中的拉取请求时向服务器发送 http 请求。我已经让插件使用硬编码值（如 url、各种 url 参数等），但现在我需要显示一个配置屏幕，以便可以在安装插件后设置这些值。我只需要配置几个文本字符串和字符串到字符串的键值映射。没什么复杂的！

不幸的是，stash 和 atlassian api 有点模糊：有用于链接到 servlet 或其他东西的信息，并描述了一旦你有配置对象来连接它，但这就是我能找到的全部。他们还指出了一些例子，比如谷歌地图和 webdav 插件，但如果没有任何评论，它也可能是拉丁文。

有人可以向我指出一个示例或教程，该示例或教程显示了如何为存储（或 atlassian）插件提供配置面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:28:20.247

Atlassian 插件框架是一个相当广泛的话题，特别是因为各种具体产品（JIRA、Confluence、FishEye、Stash 等）之间的功能存在细微差别，因此，网络上到处都有资源可以帮助理解，与可用的框架组件和 API 端点进行交互和编程。我自己正在完成添加配置的过程，并发现以下资源非常有用（尽管它们可能对 Atlassian 插件框架是通用的，但大多数概念仍然适用）：

[https://developer.atlassian.com/display/DOCS/Creating+an+Admin+Configuration+Form](https://developer.atlassian.com/display/DOCS/Creating+an+Admin+Configuration+Form)

[https://developer.atlassian.com/stash/docs/latest/reference/plugin-module-types/plugin-modules.html](https://developer.atlassian.com/stash/docs/latest/reference/plugin-module-types/plugin-modules.html)

# php - 如何修复此相对路径以跨多个 URL 工作？

> ID：14695997
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:29:51.930
> 
> 标签：php, .htaccess, mod-rewrite

我有一个问题，与我的重写和相对路径有关。

在我的 .htaccess 中：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /school
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?page=$1 
```

这意味着我可以输入 www.example.com/school/contact，它会带我进入 index.php?page=contact。

这一切都很好！但是现在如果我使用：

```
<link href="css/main.css" rel="stylesheet" type="text/css" /> 
```

要访问我的 css，这是不行的。我不能在它之前添加../，因为它是一个也用于家庭的模板。我应该如何写这个，以便我可以相对访问我的 css 文件夹（和所有其他文件夹），无论我使用什么作为我的重写？

如果这很重要，我使用 smarty 作为我的模板管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:50:48.823

该`<base>`标签通常有效或添加文件的完整路径（css/img/js/etc），而不是使用相对路径。

我前段时间找到了这个答案，它很好地描述了我刚才提到的[重写 css/js 路径](https://stackoverflow.com/a/2579219/1700963)

# python - cvGetSubRect 没有放入框架

> ID：14695998
> 
> 赞同：1
> 
> 时间：2013-02-04T21:29:53.207
> 
> 标签：python, opencv

我是使用 OpenCV 人脸检测器的新手。面部检测工作正常，但我正在尝试使用生成的矩形围绕面部制作框架并将其剪切以将面部保存在新存档中。我一直在使用 getSubRect 和“haarcascade_frontalface_default”（左、上、宽、高）返回的值。假设 GetSubRect 的参数是（图像，（左，上，右，下）但它不起作用，因为生成的图像没有使脸部居中。我的错误是什么？

代码如下：

```
import sys
   import cv
   imcolor = cv.LoadImage('C:\\Temp\\camera_test2.jpg') # input image
   # loading the classifier
   haarFace = cv.Load('c:\opencv\data\haarcascades\haarcascade_frontalface_default.xml')
   # running the classifier
   storage = cv.CreateMemStorage()
   detectedFace = cv.HaarDetectObjects(imcolor, haarFace, storage, 1.1)
   if detectedFace:
     arg1 = detectedFace[0][0][0]
     arg2 = detectedFace[0][0][1]
     arg3 = detectedFace[0][0][2]
     arg4 = detectedFace[0][0][3]
     Izq = arg1 - arg3/10
     Sup = arg2 - arg4/6
     Der = arg1 + arg3 #+ (arg3/10)
     Inf = arg2 + arg4 +(arg4/6)
     print detectedFace
     print Izq
     print Sup
     print Der
     print Inf
   imcolor2 = cv.GetSubRect(imcolor,(Izq, Sup, Der, Inf))
   cv.SaveImage('C:\\temp\\test_1.JPG', imcolor2)
   cv.WaitKey() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:26:58.023

`cv.GetSubRect`期望`(x, y, width, height)`：

```
for face, neighbors in detectedFace:
    im_face = cv.GetSubRect(imcolor, face) 
```

另请参阅[文档](http://opencv.willowgarage.com/documentation/python/objdetect_cascade_classification.html#haardetectobjects)和[OpenCV Cookbook](http://opencv.willowgarage.com/documentation/python/cookbook.html#using-getsubrect)。

也就是说，你为什么不使用`cv2`？