# StackOverflow 问答 15913000-15913999

# javascript - jQuery UI Slider：从与幻灯片事件关联的函数中访问选项

> ID：15913001
> 
> 赞同：1
> 
> 时间：2013-04-09T21:35:31.117
> 
> 标签：javascript, jquery, jquery-ui, uislider

我有一个以这种方式定义的滑块：

```
$( "#myslider").slider({
    range: true,
    min: min_val,
    max: max_val,
    values: [ min_val, max_val ],
    slide: function(event, ui){
        $('#input_min').val(ui.values[0]);
        $('#input_max').val(ui.values[1]);
    },
}); 
```

在哪里`min_val`和`max_val`可以改变。

现在假设在与幻灯片事件关联的函数中，我想检查当前的最小值和最大值是否与初始值不同。

我知道我可以使用以下代码访问当前值，`ui.values`并且可以使用以下代码获取初始最小值和最大值：

```
var inital_min = $( "#myslider").slider("option", "min");
var inital_max = $( "#myslider").slider("option", "max"); 
```

但这对我来说看起来很愚蠢，因为我已经`ui`从回调中获得了对象。

我试图用萤火虫导航对象，但找不到我要找的东西。

那么，还有其他方法可以获取这些值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:44:46.597

您可以使用它来访问它。我把它小提琴给你。

[http://jsfiddle.net/dhQk/vr2Mg/](http://jsfiddle.net/dhQk/vr2Mg/)

```
var i_max = $(this).slider('option', 'max');
var i_min = $(this).slider('option', 'min'); 
```

不幸的是，根据官方参考资料，没有本地对象会拥有它。 [http://api.jqueryui.com/slider/#event-slide](http://api.jqueryui.com/slider/#event-slide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:47:21.163

min_val 和 max_val 变量可以在幻灯片回调中重复使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T10:10:18.000

这确实不是真的，您可以使用事件对象获取滑块对象并在方法中访问它们：

```
$(event.target).slider("option","max") 
```

# mysql - MYSQL：使更新查询更快？

> ID：15913008
> 
> 赞同：2
> 
> 时间：2013-04-09T21:35:59.900
> 
> 标签：mysql

我有一个简单的用户表：

```
userID | credits | name | etc | etc1 | etc2 
```

我做了一个简单的查询：

```
UPDATE users set credits = (credits - 10) where userid = 9 
```

该表有 2000 行。为什么这个查询需要 0.16 秒，我怎样才能让它更快？

userid 是主键，因此上面已经有一个索引。所以我想不出为什么这个查询可能很慢。尤其是在具有 16GB RAM 和杀手级处理器的服务器上执行的唯一查询 ONCE。服务器上几乎没有其他东西可以占用任何资源。

有任何想法吗？

*编辑*

我是这样计时的：

```
private function slowQueryEvaluator($startTime, $endTime, $identifier) {

    $MAX_TIME = 0.1;

    $IP = Controller::getRealIpAddress();
    $userID = -1;
    if (isset(YII::app()->user->id)) {
      $userID = YII::app()->user->id;
    }
    $seconds = $endTime - $startTime;
    if ($seconds > $MAX_TIME ) {
      YII::log($IP.' - '.$userID.' - '.$seconds.' seconds - '.$identifier);
    }

  } 
```

学分是一个INT。

这是用户表创建的导出：

```
CREATE TABLE IF NOT EXISTS `users` (
  `userid` int(11) NOT NULL AUTO_INCREMENT,
  `cell_nr` varchar(12) NOT NULL,
  `status` varchar(20) NOT NULL DEFAULT 'INACTIVE',
  `full_name` varchar(255) NOT NULL,
  `public_name` varchar(20) NOT NULL,
  `credits` int(11) NOT NULL DEFAULT '0',
  `national_id` varchar(20) NOT NULL,
  `email_address` varchar(255) NOT NULL,
  `OTP` int(5) NOT NULL,
  `OTP_count` int(11) NOT NULL DEFAULT '0',
  `password` char(32) NOT NULL,
  `created` int(11) NOT NULL,
  PRIMARY KEY (`userid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:50:08.343

您的数据库引擎提供表锁定或行级锁定这可能会改变速度并创建存储过程并仅传递参数可能更快我没有尝试另一方面您可以尝试批处理 crud。例如 20 次 sql 执行是一个提交。您可能尝试在您现有的旁边添加另一个字符串索引

# c - 设置双精度数组等于返回值而不声明维度

> ID：15913009
> 
> 赞同：0
> 
> 时间：2013-04-09T21:36:04.193
> 
> 标签：c, arrays, declaration, multidimensional-array

我正在编写一个使用维度数组的程序。我有一个函数将返回一个二维浮点数组。该函数如下所示：

```
float[][] convert() {
    //do stuff
} 
```

然后，在 main 方法中，我想设置一个等于该数组的表，但我不确定在不知道我想要的维度的情况下如何做到这一点。理想情况下，我会有这样的一行：

```
float table[][] = convert(); 
```

有没有办法避免在 main 方法中知道表格的尺寸？我的程序只跟踪转换函数内的长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:40:58.733

您可以使用带有指针的二维数组双指针

```
float **table = convert(); 
```

进入函数`convert()`，您可以分配所需大小的内存（二维数组）并在函数中返回

# jquery - 更改主干中单击事件的 CSS 可见性

> ID：15913010
> 
> 赞同：0
> 
> 时间：2013-04-09T21:36:12.407
> 
> 标签：jquery, css, backbone.js

有一个小提琴在这里展示了我的问题[http://jsfiddle.net/mjmitche/RRXnK/232/](http://jsfiddle.net/mjmitche/RRXnK/232/)

在我使用 Backbone 的 Rails 应用程序中，我有一些像这样设置的 html

```
<div class="row category">

  <div class="editcategory">edit category</div>  

  <div class="span10 category">blah</div>
</div> 
```

.span10.category 的 css 默认是隐藏的

```
.span10.category {

    visibility: hidden;
} 
```

在主干视图中，我将 el 设置为

```
 el: '.row.category', 
```

这样它里面的任何东西（我假设）都在视图的范围内，即它可以由视图中的javascript操作。然后我在 .editcategory 类上放置了一个点击事件

```
'click .editcategory': 'editCategory' 
```

并尝试使默认情况下隐藏的类在触发点击事件后可见

```
editCategory: function(){
    console.log("edit Category");
     $('.span10 category').css('visiblity', 'visible');

   } 
```

但是，它不起作用（即使触发了控制台日志）。我也尝试像这样设置选择器

```
 $('.span10.category') 
```

因为 .span10 .category 类在`.row category`div 内，所以我假设我可以更改其上的 css，但不知何故我做错了。我也尝试过`fadeIn();`代替`css`方法，但没有区别。

谁能解释我如何更改点击事件的可见性。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:59:43.957

```
$('.span10 category').css('visiblity', 'visible'); 
```

你拼写`visibility`错误。您在 b 之后忘记了 i。

```
$('.span10 category').css('visibility', 'visible'); 
```

# android-graphview - GraphView 和 resetData

> ID：15913017
> 
> 赞同：2
> 
> 时间：2013-04-09T21:36:29.150
> 
> 标签：android-graphview

请帮助我，我使用 GraphView 库（[http://www.jjoe64.com/p/graphview-library.html](http://www.jjoe64.com/p/graphview-library.html)），它可以工作。但我不明白如何重置以前的数据。

方法`redrawAll()`不起作用。

这是我的代码：

```
 public class MainActivity extends Activity implements OnClickListener{
   private final static int DIALOG_ID=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btnDialog=(Button)findViewById(R.id.btnDialog);
    btnDialog.setOnClickListener(this);

}

    @Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
      case R.id.btnDialog:
          createGraph();
    break;

    }

}   

//graph create method       
void createGraph(){

    // draw sin curve
    int num = 100;
    GraphViewData[] data = new GraphViewData[num];
    GraphView graphView;

    double  v=0;
    for (int i=0; i<num; i++) {
        v += 0.50;
        data[i] = new GraphViewData(i, Math.random()*v);
       }

    // graph with dynamically genereated horizontal and vertical labels
   graphView = new LineGraphView(
            getBaseContext()
            , "myGraph"
    );

   graphView.redrawAll();

  ((LineGraphView) graphView).setDrawBackground(true);

    // add data
    graphView.addSeries(new GraphViewSeries(data));
    // set view port, start=2, size=10
    graphView.setViewPort(2, 40);
    graphView.setScalable(true);

    LinearLayout layout = (LinearLayout)findViewById(R.id.lvGraphView);
    layout.addView(graphView);  

}

 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-15T20:39:34.610

I guess by reset you mean to clear all the graph and then draw something new again? Then you could use `graphView.removeAllSeries();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:55:39.407

一种方法是删除 graphview 视图并完全重新创建它。

另一种方法是使用实​​时功能。您应该直接从 github 使用最新版本的 graphview。`resetData`您可以使用或更改系列中的数据`appendData`。看看 github 上的 GraphView-Demo 项目。

```
exampleSeries1.resetData(new GraphViewData[] {
        new GraphViewData(1, getRandom())
        , new GraphViewData(2, getRandom())
        , new GraphViewData(2.5, getRandom()) // another frequency
        , new GraphViewData(3, getRandom())
        , new GraphViewData(4, getRandom())
        , new GraphViewData(5, getRandom())
}); 
```

# javascript - 如何将 getJSON 结果传递到输入框中

> ID：15913024
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:36:46.527
> 
> 标签：javascript, jquery, json

我正在尝试使用 $.getJSON 填充我数据库中最后一条记录中的数据。GET 返回 JSON，但我无法获取数据来填充字段。我完全是新手。

```
$.getJSON("loadloads.php", function (data) {
    document.getElementById("LoadNumber").innerHTML = data.LoadNumber
}); 
```

这是返回的 JSON，从 firebug 复制。

```
[{
    "value": {
        "LoadNumber": "227303",
        "OrderDate": "2013-04-09",
        "ShipDate": "2013-04-09",
        "ShipTime": "12:00:00",
        "DeliveryDate": "2013-04-10",
        "DeliveryTime": null,
        "PurchaseOrderNumber": "0002323803",
        "CustomerId": "200540",
        "Rate": "801.08",
        "EmployeeId1": "1",
        "EmployeeId2": "1",
        "CarrierId": "201383",
        "CarrierRate": "700",
        "Tarp": "NO",
        "Status": "Dispatched",
        "Notes": "Pls check in as an All Points Inc. carrier.  V-boards reg.  Shipper tracking we need Proof of delivery faxed or called in A.S.A.P (within 24 hours)  Need printed name of person signing for load.  Must haul 48K min.",
        "LoadTypeId": "1",
        "LoadType": "Flatbed",
        "BillingNotes": "608.48 + 192.60",
        "InvoiceDate": null,
        "PayDate": null,
        "DestinationNext": null,
        "Covered": "0",
        "CompanyName": "GAF Materials Corp.",
        "CarrierName": "Daniel Zamora",
        "FN1": "Craig",
        "FN2": "Craig"
    }
}] 
```

这是输入框

```
<label for="LoadNumber">Load Number :
    <input type="text" size="12" id="LoadNumber" Name="LoadNumber" tabindex="-1" />
</label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:38:54.337

JSON 定义了一个数组，它有一个条目，它是一个对象，它有一个属性，`value`，它是一个具有一堆属性的对象，其中一个属性`LoadNumber`。另外，因为`LoadNumber`是一个`input`元素，你会使用`.value`而不是`.innerHTML`.

所以而不是

```
document.getElementById("LoadNumber").innerHTML = data.LoadNumber 
```

它应该是：

```
document.getElementById("LoadNumber").value = data[0].value.LoadNumber; 
```

（分号不是绝对必要的，但我强烈建议不要依赖分号插入的恐怖。）

`data`指的是整个数组，所以`[0]`给了我们第一个条目，然后`.value`给了我们`value`那个对象的属性，然后给了我们*那个*`.LoadNumber`对象的`LoadNumber`属性。更详细地说：

 *```
var firstEntry = data[0];
var valueObject = firstEntry.value;
document.getElementById("LoadNumber").value = valueObject.LoadNumber; 
```

当然，由于您使用的是 jQuery，因此您可以[`val`](http://api.jquery.com/val)改用：

```
$("#LoadNumber").val(data[0].value.LoadNumber); 
```*

# .htaccess - mod重写规则的问题

> ID：15913027
> 
> 赞同：1
> 
> 时间：2013-04-09T21:36:54.250
> 
> 标签：.htaccess

我在一个 htaccess 文件中重写了规则，除了一个奇怪的问题没有像它应该的那样重定向到 index.php 之外。

在 Debian 上运行的 apache2

site.com/abc/xyz 通过 site.com/index.php 处理它应该

site.com/somethingelse/folderx/1234 通过 site.com/index.php 处理它应该

site.com/accounts/ 通过 site.com/index.php 处理它应该但是 site.com/accounts/orders/1234 直接处理到 site.com/accounts/orders.php 而不像它那样去 root/index.php应该。

在 htaccess 中重写规则：

```
RewriteRule \. - [L]
RewriteRule (.*)$ index.php [L] 
```

我没有看到一个简单的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:02:53.967

看起来好像你已经`Multiviews`打开了。这是内容协商的一部分，可能会导致 apache 做一些意想不到的事情，比如你用`/orders/`->描述的事情`/orders.php`。尝试关闭它：

```
Options -Multiviews
RewriteRule \. - [L]
RewriteRule (.*)$ index.php [L] 
```

# angularjs - ClojureScript 的客户端 MVC 框架

> ID：15913031
> 
> 赞同：18
> 
> 时间：2013-04-09T21:37:12.623
> 
> 标签：angularjs, backbone.js, clojurescript, pedestal

我正在尝试在 ClojureScript 中为客户端 MVC 选择一个库。以下是我目前发现的 ClojureScript 库：

1.  WebFUI ( [https://github.com/drcode/webfui](https://github.com/drcode/webfui) )
2.  聚焦：（[http://ckirkendall.github.io/enfocus-site/](http://ckirkendall.github.io/enfocus-site/)）
3.  基座（[http://pedestal.io](http://pedestal.io)）
4.  管道胶带（[https://github.com/hozumi/ducttape.cljs](https://github.com/hozumi/ducttape.cljs)）
5.  C2 ( [http://keminglabs.com/c2/](http://keminglabs.com/c2/) ) 看来这可以用作 DOM 框架。

我应该如何选择它们？此外，它们与使用来自 ClojureScript 的 AngularJS 或 Backbone 相比如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-07T17:11:52.037

这不是一个完整的框架，可能只是客户端 MVC 的 V，但值得关注。

[https://github.com/swannodette/om](https://github.com/swannodette/om)

Facebook 的[React的 ClojureScript 接口](http://facebook.github.io/react/ "反应")

Om 允许用户将他们的 UI 简单地表示为 EDN。因为 ClojureScript 数据是不可变数据，所以 Om 总是可以从根目录快速重新渲染 UI。因此 Om UI 是开箱即用的可快照和可撤销的，并且这些操作没有实现复杂性和很少的开销。

请不要错过阅读[http://swannodette.github.io/2013/12/31/time-travel/](http://swannodette.github.io/2013/12/31/time-travel/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:22:02.190

[Ganelon](http://ganelon.tomeklipski.com)（我是其作者）是基于 Ring/Compojure 构建的 Clojure Web 微框架。

它不完全是客户端 MVC，因为通常它提供了一个简单的机制，允许我们：

1.  从薄 JavaScript 层调用 XHR 请求（例如在链接单击或表单提交时）
2.  返回包含要执行的操作的 JSON 响应（例如更新 DIV、显示模式等）
3.  通过薄 JavaScript 层执行步骤 2 中的操作

文档和演示可在此处获得：http: [//ganelon.tomeklipski.com](http://ganelon.tomeklipski.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T07:30:36.387

我是另一个客户端 Clojure 框架 Coils 的作者：

[https://github.com/zubairq/coils](https://github.com/zubairq/coils)

# c# - 如何从网站获取数据并在 C# 中进行处理

> ID：15913033
> 
> 赞同：1
> 
> 时间：2013-04-09T21:37:27.340
> 
> 标签：c#, web, webclient, streamreader

我想做一个控制台应用程序，可以查询网站的数据，处理它，然后显示它。即 - 访问[http://data.mtgox.com/](http://data.mtgox.com/)然后显示货币 X 对货币 Y 的汇率。

我能够通过 WebClient 和 StreamReader 获得一大串文本（尽管我不太了解它们），我想我可以将字符串修剪成我想要的，然后延迟循环查询以启用更新数据，而无需再次运行程序。但是我只是在推测，似乎会有比这更有效的数据访问方式。我错过了什么吗？

编辑 - 普遍的共识似乎是使用 JSON 来做到这一点；这正是我正在寻找的！多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:43:12.923

看起来该站点提供了一个提供 JSON 数据的 API。如果你不知道 JSON 是什么，你需要研究一下，但基本上你可以创建代表这个 JSON 的对象模型。如果您有最新版本的 VS2012，您可以复制 JSON 并右键单击，点击特殊粘贴，然后粘贴为类。这将自动为您生成模型。然后，您联系 API，检索 JSON，将其反序列化到您的模型中，然后从那里做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:43:33.660

更好的方法：

```
string url = "http://data.mtgox.com/";
HttpWebRequest myWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
myWebRequest.Method = "GET"; // This can also be "POST"
HttpWebResponse myWebResponse = (HttpWebResponse)myWebRequest.GetResponse();
StreamReader myWebSource = new StreamReader(myWebResponse.GetResponseStream());
string myPageSource = string.Empty;
myPageSource= myWebSource.ReadToEnd();
myWebResponse.Close();

// Do something with the data in myPageSource 
```

获得数据后，查看[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)来解析它

# .net - Active Directory 更改密码 C# 代码 PrincipleContext 导致 ComException

> ID：15913042
> 
> 赞同：2
> 
> 时间：2013-04-09T21:38:09.373
> 
> 标签：.net, active-directory

我正在开发一个简单的程序，允许用户输入他们的用户名、旧密码和新密码来更新他们的 Active Directory 帐户。Stack Overflow 上有很多代码示例，但每次我尝试

```
var context = new PrincipalContext(ContextType.Domain, domainName) 
```

我收到一个 ComException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:09:30.613

一旦我将域名和其他属性传递给 PrincipalContext 对象，我就能够让它工作。

```
new PrincipalContext(ContextType.Domain, domainName, "OU=OrganizationName,OU=Users,OU=!OrgSiteName,DC=OrgSite,DC=com") 
```

# content-management-system - 在 Sitecore 中查看 Weblog 包内容时出现问题

> ID：15913046
> 
> 赞同：0
> 
> 时间：2013-04-09T21:38:29.520
> 
> 标签：content-management-system, sitecore, sitecore6

我在我的 sitecore 实例中安装了来自 sitecore 市场 ( [http://marketplace.sitecore.net/en/Modules/WeBlog.aspx ) 的 WeBlog 包。](http://marketplace.sitecore.net/en/Modules/WeBlog.aspx)最初我在安装软件包时遇到了麻烦，但是我再次尝试删除 weblog.config 文件。它安装时没有任何问题，但是当我查看内容编辑器时，我在模板、系统或布局部分下看不到任何博客模块。

有谁知道为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:01:14.150

您使用的是哪个版本的 Sitecore？模块兼容吗？博客显示它兼容以下版本：CMS 6.2、CMS 6.3、CMS 6.3.1、CMS 6.4、CMS 6.4.1、CMS 6.5。

假设您使用的是兼容版本，我会检查以确保 weblog 包中的布局和子布局实际安装在您的实例上。打开 zip 文件并检查应该安装的文件。

如果做不到这一点，请查看日志文件以查看是否有任何明显的错误。

最后，您可能想尝试发布。这在您的内容编辑器视图中并不重要，但我认为 Sitecore 的“发布”功能就像 Windows 的“重启”功能一样。

# odbc - microsoft odbc drivermanager SQLColAttribute SQL_INVALID_HANDLE

> ID：15913047
> 
> 赞同：2
> 
> 时间：2013-04-09T21:38:32.580
> 
> 标签：odbc

从应用程序调用 SQLColAttribute 时出现 SQL_INVALID_HANDLE 错误（尝试与自行开发的 odbc 驱动程序通信）我不知道为什么句柄被声明为无效句柄，因为它是一个简单的结构，在运行时仍然有效，我检查了它。该驱动程序是非 unicode 驱动程序，我从非 unicode 测试应用程序中使用它。

驱动程序还设法设置（来自驱动程序的日志）

```
SQLGetStmtAttr called:
Attribute to set is: SQL_ATTR_APP_ROW_DESC
SQLGetStmtAttr called:
Attribute to set is: SQL_ATTR_APP_PARAM_DESC
SQLGetStmtAttr called:
Attribute to set is: SQL_ATTR_IMP_ROW_DESC
SQLGetStmtAttr called:
Attribute to set is: SQL_ATTR_IMP_PARAM_DESC 
```

在调用 sqlprepare 之前正确

驱动程序管理器日志：

```
ODBC_Test       2210-151c   ENTER SQLAllocHandle 
    SQLSMALLINT                  1 <SQL_HANDLE_ENV>
    SQLHANDLE           0x00000000
    SQLHANDLE *         0x002EFCC0

ODBC_Test       2210-151c   EXIT  SQLAllocHandle  with return code 0 (SQL_SUCCESS)
    SQLSMALLINT                  1 <SQL_HANDLE_ENV>
    SQLHANDLE           0x00000000
    SQLHANDLE *         0x002EFCC0 ( 0x003541C8)

ODBC_Test       2210-151c   ENTER SQLSetEnvAttr 
    SQLHENV             0x003541C8
    SQLINTEGER                 200 <SQL_ATTR_ODBC_VERSION>
    SQLPOINTER                 3 <SQL_OV_ODBC3>
    SQLINTEGER                   0 

ODBC_Test       2210-151c   EXIT  SQLSetEnvAttr  with return code 0 (SQL_SUCCESS)
    SQLHENV             0x003541C8
    SQLINTEGER                 200 <SQL_ATTR_ODBC_VERSION>
    SQLPOINTER                 3 <SQL_OV_ODBC3>
    SQLINTEGER                   0 

ODBC_Test       2210-151c   ENTER SQLAllocHandle 
    SQLSMALLINT                  2 <SQL_HANDLE_DBC>
    SQLHANDLE           0x003541C8
    SQLHANDLE *         0x002EFCA8

ODBC_Test       2210-151c   EXIT  SQLAllocHandle  with return code 0 (SQL_SUCCESS)
    SQLSMALLINT                  2 <SQL_HANDLE_DBC>
    SQLHANDLE           0x003541C8
    SQLHANDLE *         0x002EFCA8 ( 0x00354250)

ODBC_Test       2210-151c   ENTER SQLConnectW 
    HDBC                0x00354250
    WCHAR *             0x00352EB8 [       5] "dsn01"
    SWORD                        5 
    WCHAR *             0x55128B34 [      -3] "******\ 0"
    SWORD                       -3 
    WCHAR *             0x55128B34 [      -3] "******\ 0"
    SWORD                       -3 

ODBC_Test       2210-151c   EXIT  SQLConnectW  with return code 0 (SQL_SUCCESS)
    HDBC                0x00354250
    WCHAR *             0x00352EB8 [       5] "dsn01"
    SWORD                        5 
    WCHAR *             0x55128B34 [      -3] "******\ 0"
    SWORD                       -3 
    WCHAR *             0x55128B34 [      -3] "******\ 0"
    SWORD                       -3 

ODBC_Test       2210-151c   ENTER SQLAllocHandle 
    SQLSMALLINT                  3 <SQL_HANDLE_STMT>
    SQLHANDLE           0x00354250
    SQLHANDLE *         0x002EF6F8

ODBC_Test       2210-151c   EXIT  SQLAllocHandle  with return code 0 (SQL_SUCCESS)
    SQLSMALLINT                  3 <SQL_HANDLE_STMT>
    SQLHANDLE           0x00354250
    SQLHANDLE *         0x002EF6F8 ( 0x00355790)

ODBC_Test       2210-151c   ENTER SQLPrepare 
    HSTMT               0x00355790
    UCHAR *             0x00DB89C8 [      72] "select COUNTRYFR,CITYFROM,CITYTO from SPFLI where CITYFROM EQ 'NEW YORK'"
    SDWORD                    72

ODBC_Test       2210-151c   EXIT  SQLPrepare  with return code 0 (SQL_SUCCESS)
    HSTMT               0x00355790
    UCHAR *             0x00DB89C8 [      72] "select COUNTRYFR,CITYFROM,CITYTO from SPFLI where CITYFROM EQ 'NEW YORK'"
    SDWORD                    72

ODBC_Test       2210-151c   ENTER SQLColAttribute 
    SQLHSTMT            0x00355790
    SQLSMALLINT                  1 
    SQLSMALLINT                 14 <SQL_DESC_TYPE_NAME>
    SQLPOINTER         0x002EF6B0
    SQLSMALLINT                 50 
    SQLSMALLINT *       0x002EF6A4
    SQLPOINTER          0x00000000 (NYI) 

ODBC_Test       2210-151c   ENTER SQLColAttribute 
    SQLHSTMT            0x00C05200
    SQLSMALLINT                  1 
    SQLSMALLINT                 14 <SQL_DESC_TYPE_NAME>
    SQLPOINTER         0x002EF6B0
    SQLSMALLINT                 50 
    SQLSMALLINT *       0x002EF6A4
    SQLPOINTER          0x00000000 (NYI) 

ODBC_Test       2210-151c   EXIT  SQLColAttribute  with return code -2 (SQL_INVALID_HANDLE)
    SQLHSTMT            0x00C05200
    SQLSMALLINT                  1 
    SQLSMALLINT                 14 <SQL_DESC_TYPE_NAME>
    SQLPOINTER         0x002EF6B0
    SQLSMALLINT                 50 
    SQLSMALLINT *       0x002EF6A4
    SQLPOINTER          0x00000000 (NYI) 

ODBC_Test       2210-151c   EXIT  SQLColAttribute  with return code -2 (SQL_INVALID_HANDLE)
    SQLHSTMT            0x00355790
    SQLSMALLINT                  1 
    SQLSMALLINT                 14 <SQL_DESC_TYPE_NAME>
    SQLPOINTER         0x002EF6B0
    SQLSMALLINT                 50 
    SQLSMALLINT *       0x002EF6A4
    SQLPOINTER          0x00000000 (NYI) 
```

测试程序非常简单：

```
SQLHANDLE hEnv ;

SQLAllocHandle( SQL_HANDLE_ENV, SQL_NULL_HANDLE, &hEnv ) ;

SQLSetEnvAttr( hEnv, SQL_ATTR_ODBC_VERSION, (void*)SQL_OV_ODBC3, 0 ) ; 

SQLHANDLE hConn ;

SQLAllocHandle( SQL_HANDLE_DBC, hEnv, &hConn );

SQLCHAR* dsnName = (SQLCHAR*)"dsn01" ;  // MUST BE THE SAME
SQLCHAR* userid = (SQLCHAR*)"nodata\0";
SQLCHAR* password = (SQLCHAR*)"nodata\0"; 

SQLConnect(

hConn,
dsnName, 
5, 
userid, 
SQL_NTS,
password, 
SQL_NTS);

HSTMT hStmt ;
SQLAllocHandle( SQL_HANDLE_STMT, hConn, &hStmt ) ;

SQLCHAR* query = (SQLCHAR*)"select COUNTRYFR,CITYFROM,CITYTO from SPFLI where CITYFROM EQ 'NEW YORK'";

SQLPrepare(hStmt,query,strlen((const char*)query));

SQLCHAR TypeName[50];
SQLSMALLINT TypeNameLen;

SQLColAttribute((SQLHSTMT)hStmt,1,SQL_DESC_TYPE_NAME,TypeName, sizeof(TypeName),&TypeNameLen,NULL); 
```

任何人都知道什么会导致 SQLColAttribute 返回 SQL_INVALID_HANDLE ？我读过 msdn 但没有什么有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:56:26.680

您分配了一个语句句柄，它是 0x00355790。你准备好了。正如您在调用 SQLColAttribute 时所说的那样，这一切都出错了。该日志表明使用语句句柄正确调用了 SQLColAttribute，但随后（您的驱动程序？）使用不同的句柄再次调用了 SQLColAttribute。我的猜测是您的驱动程序中存在函数名称冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T16:42:15.657

请参阅 sqlucode.h 中的此声明：

```
// UNICODE versions
#ifdef _WIN64
SQLRETURN SQL_API SQLColAttributeW
(
    SQLHSTMT        hstmt,
    SQLUSMALLINT    iCol,
    SQLUSMALLINT    iField,
    _Out_writes_bytes_opt_(cbDescMax)
    SQLPOINTER      pCharAttr,
    SQLSMALLINT     cbDescMax,
    _Out_opt_
    SQLSMALLINT     *pcbCharAttr,
    _Out_opt_
    SQLLEN          *pNumAttr
);
#else
SQLRETURN SQL_API SQLColAttributeW(
    SQLHSTMT        hstmt,
    SQLUSMALLINT    iCol,
    SQLUSMALLINT    iField,
    _Out_writes_bytes_opt_(cbDescMax)
    SQLPOINTER      pCharAttr,
    SQLSMALLINT     cbDescMax,
    _Out_opt_
    SQLSMALLINT     *pcbCharAttr,
    _Out_opt_
    SQLPOINTER      pNumAttr);
#endif 
```

并了解这有多困难

*   >（对我来说）避免两种情况下的*函数名冲突*（x64/x86）
*   > (for microsoft) 编写正确的文档

# mysql - 我正在对一个 ruby 站点进行工作备份，但不知道如何部署它

> ID：15913052
> 
> 赞同：1
> 
> 时间：2013-04-09T21:38:45.440
> 
> 标签：mysql, ruby-on-rails, capistrano, rubber

主要的“它可以工作” index.html 文件显示。我不知道我还需要做什么。我复制了整个代码库和数据库并建立了一个新的子域。

它是 MySQL 和 ruby​​-on-rails，带有橡胶（[wr0ngway](https://github.com/wr0ngway/rubber/wiki/Quick-Start)）和[capistrano](http://kris.me.uk/2011/10/28/rails-rvm-passenger-capistrano-git-apache.html)。

我做了什么：

*   在我的 Dreamhost 帐户中使用“乘客”选项设置一个新的子域。
*   创建一个新的 MySQL 服务器并迁移所有数据。
*   上传所有文件。

而已。它应该可以正常工作？！？

我知道某处必须有一些 ruby​​ 配置文件需要自定义，以便 ruby​​ 可以

*   欣赏它的新家
*   指向正确的数据库

我知道我需要更好地了解 ruby​​ 以及 RTM 和 STFW。Ruby 不是我的背景，我的“加速时间”可能会激怒我的新雇主。在我记录我的第 45 小时发现学习之前，是否有一种快速而简单的方法可以让这个工作同时进行。gems是否应该在不卸载和重新安装的情况下工作？

任何/所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:20:28.337

查看 Hartl 的[教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。第 1 章。从零到部署。尽管他正在谈论部署到 Heroku，但这让我第一次在不同的主机上启动并运行。

# java - 我做错了什么？静态错误 [Java]

> ID：15913053
> 
> 赞同：0
> 
> 时间：2013-04-09T21:38:47.583
> 
> 标签：java, static

当我使用函数 generatecode() 时，它引用了一个错误，我想看看我是否正确地进行了拆分。我是新手，仍然需要一些帮助。在这种情况下，我通过以下方式创建了一个新类：TestFile variable = new TestFile(); 我不知道这意味着什么。谢谢！

```
 public class TestFile {

String[] preps = {
    "about", "above", "across", "after", "against",
    "along", "among", "around", "at", "before",
    "behind", "below", "beneath", "beside", "between",
    "by", "concerning", "down", "during", "except",
    "for", "from", "in", "inside", "into",
    "like", "near", "of", "onto", "out",
    "over", "through", "to", "toward", "under",
    "up", "upon", "with", "within", "without"
};

String[] errorpreps = {
    "will", "would", "shall", "should", "can",
    "could", "may", "might", "must", 
};

String[] question = {
};

public static void main(String[] args) {

    generatecode("hi");

};

public generatecode(String code){

    String prep = "";

    for (int i=0; i<preps.length; i++){

        prep = prep + preps[i];

    }

    System.out.println(prep);

    return prep;

}

public String printcode(String code){

    return "";

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:40:47.790

您的方法具有错误的访问修饰符：

```
public generatecode(String code){ 
```

应该

```
public static String generatecode(String code){ 
```

**只是要注意**

您也没有该方法的返回类型，因此这确实不应该编译。

**为什么会这样？**

`main(String[] args)`好吧，当没有对象实例时，可以运行静态方法。所以你可以打电话：

```
ClassName.method(); 
```

当您尝试从静态方法调用实例方法时，这意味着您正在尝试使用需要对象实例存在的代码功能。回顾一下：

```
ClassName c = new ClassName();
c.instanceMethod(); // This is an instance method.

ClassName.staticMethod(); // This is a static method. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:41:52.700

在您的`static` `main`方法中，您还没有`TestFile`类的任何实例。要引用任何非`static`，您需要一个类的实例。这正是该行`TestFile variable = new TestFile();`所做的——它创建了一个`TestFile`.

然后你可以在你的实例上调用你的方法：

```
variable.generatecode("hi"); 
```

正如@ChrisCooney 已经指出的那样，您没有该方法的返回类型。所有方法都需要返回类型。在这种情况下，您需要声明您的方法返回 a `String`，因为这是该方法返回的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:43:14.820

`generate`是一个实例方法，而您正试图从 调用它`main`，这是一个静态方法。要解决它，您可以这样做。-

`(new TestFile()).generatecode("hi");`

# c# - 更多动态状态机的.net方法

> ID：15913055
> 
> 赞同：5
> 
> 时间：2013-04-09T21:38:53.237
> 
> 标签：c#, .net, winforms, design-patterns, state-machine

我写了一个简单的动态 FSM。`Dynamic`表示状态转换是动态的，而不是静态的，如图所示`ConcreteStateB`。

```
namespace FSM_Example
{
    using System;

    class Program
    {
        static void Main()
        {
            var context = new Context(new ConcreteStateA());
            context.Run();
            Console.Read();
        }
    }

    abstract class State
    {
        public abstract void Execute(Context context);
    }

    class ConcreteStateA : State
    {
        public override void Execute(Context context)
        {
            context.State = new ConcreteStateB();
        }
    }

    class ConcreteStateB : State
    {
        public override void Execute(Context context)
        {
            Console.Write("Input state: ");
            string input = Console.ReadLine();
            context.State = input == "e" ? null : new ConcreteStateA();
        }
    }

    class Context
    {
        private State _state;

        public Context(State state)
        {
            State = state;
        }

        public State State
        {
            get { return _state; }
            set
            {
                _state = value;
                Console.WriteLine("State: " + _state.GetType().Name);
            }
        }

        public void Run()
        {
            while (_state != null)
            {
                _state.Execute(this);
            }
        }
    }
} 
```

这实现了一个状态机，如 中所述`GoF305`。

由于我是 C# 和 .net 的新手：是否有更好的方法可以使用来自`.net`or的更具体的功能来实现这一目标`C#`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:41:54.650

Outcoldman 的回答提供了许多不错的选择。

现在，我知道根据模式，下面的代码不是正确的 FSM，但对于非常简单的实现，它可以帮助您避免编写大量额外的子类。这只是决定适合工作的工具的问题。这个主要关注`Action<T>`泛型委托的使用：

```
public class Context
{
    public Action<Context> State { get; internal set; }

    public Context(Action<Context> state)
    {
        State = state;
    }

    public void Run()
    {
        while (State != null)
        {
            State(this);
        }
    }
} 
```

并将“状态机”设置为：

```
public static class SimpleStateMachine
{
    public static void StateA(Context context)
    {
        context.State = StateB;
    }
    public static void StateB(Context context)
    {
        Console.Write("Input state: ");
        var input = Console.ReadLine();
        context.State = input == "e" ? (Action<Context>)null : StateA;
    }
} 
```

为了启动您将使用的过程：

```
var context = new Context(SimpleStateMachine.StateA);
context.Run();
Console.Read(); 
```

此外，对于不相关的状态，您也可以使用 Lambda 表达式，例如：

```
Action<Context> process = context =>
    {
        //do something
        context.State = nextContext =>
            {
                //something else
                nextContext.State = null;
            };
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:13:06.613

您可以应用很多方法，但主要取决于您需要完成的任务。

1.  您可以使用接口而不是抽象类。在 C# 中，您不能继承多个类，因此最好不要从实现中采用此选项。

    ```
    interface IState
    {
         void Handle(Context context);
    } 
    ```

2.  您可以使用泛型，因此您可以为状态模式编写一次基接口/类并在任何地方使用它：

    ```
    abstract class IState<T>
    {
         void Handle(T context);
    } 
    ```

3.  接下来的事情取决于你想隐藏或不想隐藏什么。例如，您可能可以隐藏属性状态的设置器，以确保没有人可以在您的 dll 之外使用，因此您可以制作此属性的设置器`internal`。

4.  您可以使用 Async 进行状态更改，例如

    ```
    interface IState
    {
         Task HandleAsync(Context context);
    }

    class Context
    {
        // ...

        public async Task RunAsync()
        {
            while (_state != null)
            {
                await _state.HandleAsync(this);
            }
        }
    } 
    ```

5.  我敢打赌，有人已经用[Rx实现了它](http://msdn.microsoft.com/en-us/library/hh242985%28v=VS.103%29.aspx)

# html - URL 未更改，文档源代码“隐藏”

> ID：15913059
> 
> 赞同：0
> 
> 时间：2013-04-09T21:39:03.680
> 
> 标签：html, url

我在看这个网站： http: [//fitzfitzpatrick.com/](http://fitzfitzpatrick.com/) 源代码很少，可以看到这是通过框架完成的。当我单击页面上的链接时，URL 没有改变，框架 src 也没有改变，那么内容有何不同？

任何指向阅读材料的指针，或对这种巫毒诡计如何发生的基本解释都非常棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:59:34.540

没有巫毒诡计；这就是框架的工作原理。该页面基本上只是将另一个网站拉入该框架，因此任何请求实际上都是在框架本身内发生的。同样的事情发生在 iframe 中，您可以在 iframe 中单击以查看您的内容，并且 URL 中的任何内容都不会改变，因为它发生在框架内。

在这个特定的例子中，[http://www.cargocollective.com/fitzfitzpatrick](http://www.cargocollective.com/fitzfitzpatrick)被拉入一个跨越[http://fitzfitzpatrick.com/](http://fitzfitzpatrick.com/)上整个窗口的框架，所以它基本上就像一个独立的窗口，如果它位于它自己的窗口中那讲得通。

# django - postgresql 与 django（和 gunicorn+gevent）的空闲连接

> ID：15913060
> 
> 赞同：6
> 
> 时间：2013-04-09T21:39:10.940
> 
> 标签：django, psycopg2, gevent, gunicorn, django-postgresql

我的堆栈包括 django (1.4.3)、psycopg2 (0.0.3) 和 postgres (9.1)。此外，我正在使用 psycogreen.gevent.patch_psycopg，因为我正在使用 gunicorn 和 gevent 为我的 django 提供服务。

一切似乎都很开心，但我得到了很多（约 40 个）开放的数据库连接。直到我在我的 django 数据库设置中将 'autocommit' 设置为 True，它们都是“事务中的空闲”。现在他们都只是“闲置”。

这是我的 pg_top 输出的示例。

```
last pid: 22043;  load avg:  0.09,  0.05,  0.05;       up 6+21:49:58                                                    16:21:08
45 processes: 45 sleeping
CPU states:  3.0% user,  0.9% nice,  0.2% system, 96.0% idle,  0.0% iowait
Memory: 871M used, 130M free, 32M buffers, 530M cached
Swap: 10M used, 246M free, 2192K cached

  PID USERNAME PRI NICE  SIZE   RES STATE   TIME   WCPU    CPU COMMAND
10035 postgres  39   19   51M 6668K sleep   0:00  0.00%  0.00% postgres: user production 127.0.0.1(41309) idle                  
16783 postgres  39   19   51M 6652K sleep   0:00  0.00%  0.00% postgres: user production 127.0.0.1(42426) idle                  
10034 postgres  39   19   51M 6640K sleep   0:00  0.00%  0.00% postgres: user production 127.0.0.1(41308) idle                  
12690 postgres  39   19   51M 6604K sleep   0:00  0.00%  0.00% postgres: user staging 127.0.0.1(36931) idle                   
10293 postgres  39   19   51M 6704K sleep   0:00  0.00%  0.00% postgres: user staging 127.0.0.1(36931) idle 
```

... 和上面类似的 36 行。

这是我为 psycogreen 设置的 gunicorn.conf：

```
def post_fork(server, worker):
    from psycogreen.gevent import patch_psycopg
    patch_psycopg() 
```

两个问题：

1.  所有这些打开的连接都好吗？对我来说，这似乎浪费了很多内存。
2.  这与 gevent 或 psycogreen 有关吗？我没有在任何 greenlets 中明确使用数据库。

我已经阅读了很多关于从 django 保持打开状态的数据库连接，但这一切似乎都来自大约 2 年前，当时 django 中仍然存在一个打开的错误（[https://code.djangoproject.com/ticket/9964#comment： 51](https://code.djangoproject.com/ticket/9964#comment:51) )。

非常感谢任何见解。

# xpath - XSLT 三元“如果”运算符？

> ID：15913061
> 
> 赞同：6
> 
> 时间：2013-04-09T21:39:15.243
> 
> 标签：xpath, xslt-1.0

我正在使用 XSLT 和 XML 来生成输出文档。

我在数据中拥有的内容（以我无法控制的 XML 形式）如下：

```
<ea type="null"/>
<pa type="null"/>
<perf>4</perf> 
```

我需要在计算中使用这些。我看到为这些提供默认值需要对文档执行转换以提供一个有点冗长的默认值。

所以我想，在 XPath/XSLT 中是否存在三元运算，类似于 PHP：

```
$result = ($var == null ? true:false) 
```

以便以下提供结果（即使它为零）

```
<xsl:value-of select="ea + pa + perf" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:45:19.257

XPath 不支持条件表达式运算符。但是，如果您碰巧有 XSLT 2.0 处理器，它确实支持 if/then/else 语法。（请注意，大多数 XSLT 处理器不支持此功能）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T02:19:33.160

**使用这个 XPath 单线**：

```
sum(((ea|pa)/@type | perf)[number()= number()]) 
```

**基于 XSLT 1.0 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:copy-of select="sum(((ea|pa)/@type | perf)[number()= number()]) "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的片段，包装在单个顶部元素中）时：

```
<t>
    <ea type="null"/>
    <pa type="null"/>
    <perf>4</perf>
</t> 
```

评估 XPath 表达式（使用顶部元素作为初始上下文节点），并将此评估的结果复制到输出：

```
4 
```

**如果所有元素的值都是非数字，例如：**

```
<t>
    <ea type="null"/>
    <pa type="null"/>
    <perf>I am a string</perf>
</t> 
```

**结果再次正确：**

```
0 
```

**请注意**：

当前选择的答案不包含语法上有效的 XSLT 1.0 转换，并且任何 XSLT 1.0 处理器（不是 XSLT 2.0 处理器）都会产生如下错误（使用 Saxon 6.5.4）：

```
SAXON 6.5.4 from Michael Kay
Java version 1.6.0_31
Error at xsl:copy-of on line 12 of file:/(Untitled):
  Error in expression sum(   (     //ea[not(@type eq 'null')],     //pa[not(@type eq 'null')],     //perf[not(@type eq 'null')]   ) ) : expected ")", found "<name>"
Transformation failed: Failed to compile stylesheet. 1 error detected.
Press any key to continue . . . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T20:05:52.660

根据您需要的复杂程度，有几种很好的方法（第二种方法来自[这里](http://www.tkachenko.com/blog/archives/000156.html)）。

**方法 #1** `exslt:node-set('default value') | @IfThisNodeExists`表示如果第二个节点存在，则返回它的值，否则返回默认值。这实际上与 js 相同`var foo='bar'; return (foo ? foo : 'default')`；

我可能会离开，但从我目前看到的行为来看，订单确实需要起作用，以便右侧是变量侧，因为如果双方都为真，则返回右侧。

**方法 #2** 如果您需要更多控制，例如当您想要返回的值和您需要评估的值不同时，那么您可能会这样做：`@defaultValue[not(true_condition)] | @ValueYouNeed[true_condition]`将其与`exslt:node-set()`技巧结合起来，以获得默认的字符串值而不是另一个节点评估。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:07:16.720

这可以使用 来`fn:sum(...)`实现，它使您能够进行标准的 XPath 2.0 查询。它总结了一个序列中的所有数字，如果它为空，则返回 0。你所要做的就是添加所有数字元素，在你的情况下没有属性`@type='null'`。

```
sum(
  (
    //ea[not(@type eq 'null')],
    //pa[not(@type eq 'null')],
    //perf[not(@type eq 'null')]
  )
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T22:29:00.917

抱歉，如果出现两次，今天早些时候发布的问题！

从上面看，似乎公平地说不存在用于评估表达式的三元运算符，所以我做了一个两阶段转换，一次填充空元素，然后一个执行我想要的操作。

谢谢您的回答。

# python - 用平均值替换 nan

> ID：15913064
> 
> 赞同：3
> 
> 时间：2013-04-09T21:39:26.067
> 
> 标签：python

我想用python用文本中每一列的平均值替换缺失的数据点。

所以，我的想法是：

1.  从文本文件中读取每一列
2.  计算每列的平均值
3.  用每列中的计算平均值替换 nan
4.  将它们写回一个新的文本文件

我认为在第 2 步之前我还可以，但是第 3 步和第 4 步有问题。我的代码如下；

```
for columns in ( raw.strip().split() for raw in f ):
    a.append(columns[c])
    x = np.array(a, float)
    y = np.ma.masked_array(x,np.isnan(x))
    y1 = np.mean(y)
    a1 = ' '.join(a)
    a1.replace("nan", "y1")
    f1 = open("practice.txt", "w")
    f1.write(a1) 
```

如您所见，这里的问题与用“replace”命令将nan替换为mean有关，因为它只处理字符串。我将非常感谢任何帮助或建议。我的部分数据如下所示

```
1.60566 nan 2.00755 2.32407
1.502   nan 1.36522 1.555
0.63333 nan 1.56102 2.08929
nan nan 0.87451 1.06667
2.5 nan 1.88889 1.0661
3.88197 nan 3.0875  2.75909
4.02692 nan 3.36154 3.92895
5.9907  nan 5.29535 5.82245
6.16111 2.67317 6.04074 6.25588
6.88269 2.62241 5.43958 6.07
5.92    2.48627 5.91818 6.75862
6.93429 6.17333 7.34    7.76538
8.25143 7.925   7.8087  8.725
8.1025  8.19429 8.11563 8.80937
8.12105 8.145   7.83889 8.37576
7.47292 8.65    8.35536 8.61081
8.10392 8.66032 8.74082 9.65484
10.03036    10.74727    10.634  10.50961 
```

我想用每列中的平均值替换那些 nans。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:07:02.600

您可以使用掩码数组[填充方法](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ma.MaskedArray.filled.html)：

```
import numpy as np

filename = '/tmp/data'
with open(filename, 'w') as f:
    f.write('''
1 2 nan
2 nan 3
nan 3 4
nan nan nan
''')

arr = np.genfromtxt(filename)
print(arr)
# [[  1\.   2\.  nan]
#  [  2\.  nan   3.]
#  [ nan   3\.   4.]
#  [ nan  nan  nan]]

mask = np.isnan(arr)
masked_arr = np.ma.masked_array(arr, mask)
means = np.mean(masked_arr, axis=0)

print(means)
# [1.5 2.5 3.5] 
```

通过以上设置，

```
print(masked_arr.filled(means)) 
```

产量

```
[[ 1\.   2\.   3.5]
 [ 2\.   2.5  3\. ]
 [ 1.5  3\.   4\. ]
 [ 1.5  2.5  3.5]] 
```

然后，要将数组写入文件，您可以使用[np.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)：

```
np.savetxt(filename, masked_arr.filled(means), fmt='%0.2f') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:44:18.223

你的问题是 y1 不是字符串？你可以：`a1.replace("nan", str(y1))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:49:49.420

请记住，`replace`它*不会*就地替换字符串，您必须执行以下操作：

```
a1 = a1.replace("nan", str(y1)) 
```

# javascript - 如何包装对接受无限参数的 Google Apps 脚本函数的调用

> ID：15913071
> 
> 赞同：2
> 
> 时间：2013-04-09T21:39:46.897
> 
> 标签：javascript, google-apps-script, rhino

某些 Google Apps 脚本函数（例如 Logger.log() 和 Utility.formatString()）接受无限参数。

我想包装对 Logger.log() 或 Utility.formatString() 的调用，以便在最里面的函数调用中，我可以在结果字符串前面加上时间戳和我自己的文本。通常，您只会`.apply`将当前模块的 ags 用于该功能，但在我的测试中，这并没有按预期工作。它会导致`TypeError: Cannot find default value for object. (line 14, file "Code")`看起来[来自](https://stackoverflow.com/questions/5863810/error-trying-to-access-class-members-using-rhino "看起来")java/server 端的错误。

这是我用于测试的代码。问题：

1.  这是这些 Apps 脚本方法中的错误吗？
2.  是否有解决方法或替代方法来实现我的目标？

如果这是一个错误，我也会将其归档在问题跟踪器跟踪器上

```
function testMyLogger() {
  myLogger('Testing %s %s %s', 'one', 2, 'three'); 
}

function myLogger()  {
  // do common things like prefix a timestamp to the first arg
    var logdate = Utilities.formatDate(new Date(), Session.getTimeZone(), "yyyy-MM-dd HH:mm:ss");
    arguments[0]= logdate + " " + arguments[0]; 

  Logger.log.apply(this, arguments); 
  // At the above line I get error "TypeError: Cannot find default value for object. (line 14, file "Code")"
  // but I expected '<timestamp> Testing one 2.0 three' to the log (View > Logs...)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:40:40.763

尝试`Logger.log.apply(Logger, arguments);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T00:52:22.583

不幸的是，这不起作用，但通常不能很好地与主机对象上的函数一起使用（有时在浏览器中也是如此）`apply`。`map`然而，这个可怕的丑陋黑客会为你解决问题。将您的替换`Logger.log.apply`为：

```
for (var i = 0, arr = []; i < arguments.length; ++i)
  arr.push('arguments[' + i + ']');
eval('Logger.log(' + arr.join() + ')'); 
```

或者，如果一个人更喜欢简洁而不是可读性：

```
eval('Logger.log(' + [].slice.call(arguments, 0)
    .map(function(x, y){ return 'arguments[' + y + ']'; }).join() + ')'); 
```

**更新**：

或者我们可以，你知道，只是修复错误 :)

我夸大了原始错误的严重性：`call`实际上`apply`现在可以处理应用程序脚本宿主对象上 95% 的方法，但是您碰巧遇到了当前无法使用的方法之一。不幸的是，我无法向您解释这种模式，因为我知道哪些模式可以在不参考我们内部代码的情况下工作。幸运的是，我的一位优秀同事诊断出问题并已解决。`Logger.log.apply(Logger, ...)`将在一两个版本中开始工作。密切关注发行说明。

# java - 如何从作为类的链表中的通用节点获取信息

> ID：15913073
> 
> 赞同：0
> 
> 时间：2013-04-09T21:39:55.380
> 
> 标签：java, linked-list, queue

我正在处理一个问题，要求我们根据帮助客户所需的时间将客户添加到队列中。花费最少时间的客户是最先得到帮助的客户（这并没有真正的意义，但哦，好吧）。

我已经创建了一个通用的“公共类 MyQueue”，问题的主要思想是将 MyQueue 继承到我们的 ServiceQueue 类中，基本上就在我们的 push 方法上。这不是完整的代码，我知道它不起作用：

```
void push(CustomerRequest request){
       if (head == null)
   {
        Node newHead = new Node(request);
        head = newHead;
   }
       else {

        Node newCustomer = new Node(request);
        Node node = head;
        int count;

        while(request.requiredServiceTime > node-->*(I need the service time)*)
        {
            node = node.next;
        }
        ///insert node here
       }
    } 
```

还有 CustomerRequest 类：

```
public class CustomerRequest {

String name;
int requiredServiceTime;

public CustomerRequest(String name, int requiredServiceTime){
    this.name = name;
    this.requiredServiceTime = requiredServiceTime;

}
} 
```

我的问题是：如何从我创建的节点中获取 requiredServiceTime 信息并且需要将其放入队列中？

添加：

```
public class Node<T> {

    Node<T> next;
T data;

public Node(T data)
{
    this.data = data;
}

public Node(T data, Node<T> next)
{
    this.data = data;
    this.next = next;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:02:42.990

您是否考虑过使用`PriorityQueue`, 而不是您自己的队列实现？优先队列是一种非常有效的选择最小值的方法。*很*长一段时间以来，这些都是标准 JRE 的一部分。请参阅[PriorityQueue javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)。

诀窍是然后更新您的类，以便它们的默认排序是您想要的顺序。您还可`Comparator`以为您的队列定义一个`CustomerRequest`按您想要的顺序排序的。

我将 a`PriorityQueue`用于您的队列，然后进行更新`CustomerRequest`，以便它`Comparable<CustomerRequest>`以这样一种方式实现，即自然排序按所需的服务时间排序。下面是一个非常幼稚的实现：

```
public class CustomerRequest implements Comparable<CustomerRequest> {
    // existing code
    ...
    // Implement Comparable
    public int compareTo(CustomerRequest obj) {
        // Sort by required service time ascending
        if (this.requiredServiceTime > obj.requiredServiceTime)
            return 1;
        else if (this.requiredServiceTime < obj.requiredServiceTime)
            return -1;
        else
            // Sort by name to break ties
            return this.name.compareTo(obj.name);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:48:36.077

为什么它必须是一个链表？我会将 CustomerRequests 放入 SortedSet 并将自定义 Comparator（比较 requiredeServiceTimes）传递给 SortedSet 的构造函数。详细信息记录在这里： [http ://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)

一旦元素在 SortedSet 中，您可以使用“first()”从集合的前面获得最快的客户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:10:08.770

声明一个类似 Comparable ( [http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html) ) 的接口。如果不允许，则不必导入，只需自己制作即可：

```
public interface Comparable<T> {
     int compareTo(T other);
} 
```

让您的 CustomerRequest 实现 Comparable：

```
public class CustomerRequest implements Comparable {
    ... 
```

让您的 LinkedList 需要实现 Comparable 的数据：

```
public class Node<T extends Comparable> {
    ... 
```

然后您可以在插入排序中使用 compareTo。

# jquery - 如何使用 jQuery 检测特定的 HTML 组件类？

> ID：15913077
> 
> 赞同：2
> 
> 时间：2013-04-09T21:40:08.960
> 
> 标签：jquery

使用 jQuery，我试图找出我的 HTML 组件的一类是否是“btnLecture”。它适用于 Firefox，但不适用于 Chrome 或 Safari。

代码：

```
btnP.on('click', function (event) {
    event.preventDefault();
    var currentLine = event.currentTarget;

    var elementClass = $(this).attr("class");

    if (elementClass.contains("btnLecture")) {
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:42:45.847

我相信你正在寻找这个来修复你的代码：

```
if (elementClass.indexOf("btnLecture") > -1) 
```

但你可能会更好：

```
if($(this).hasClass("btnLecture")) 
```

# jquery - Superfish：箭头或子菜单未显示

> ID：15913079
> 
> 赞同：0
> 
> 时间：2013-04-09T21:40:15.240
> 
> 标签：jquery, css, expressionengine, superfish

根据我初始化 Superfish 的方式，我会在悬停时看到箭头或子菜单，但不能同时显示两者。

**箭头将显示：（**但没有子菜单）

```
<script>

jQuery(document).ready(function(){
    jQuery('#spice2011').superfish();
}); 
```

**子菜单将显示：（**但没有箭头）

```
<script>

jQuery(document).ready(function(){
    jQuery('ul.spice2011').superfish();
}); 
```

这是css，一定是罪魁祸首，但我看不到。我所做的只是添加 ul#spice2011 来定义导航宽度，但即使没有它，结果也与上述相同。我为箭头设置了绝对图像路径：

```
/*** ESSENTIAL STYLES ***/
ul#spice2011 {
width: 953px;   
}

.sf-menu, .sf-menu * {
margin: 0;
padding: 0;
list-style: none;
}
.sf-menu li {
position: relative;
}
.sf-menu ul {
position: absolute;
display: none;
top: 100%;
left: 0;
z-index: 99;
}
.sf-menu > li {
float: left;
}
.sf-menu li:hover > ul,
.sf-menu li.sfHover > ul {
display: block;
}

.sf-menu a {
display: block;
position: relative;
}
.sf-menu ul ul {
top: 0;
left: 100%;
}

/*** DEMO SKIN ***/
.sf-menu {
float: left;
margin-bottom: 1em;
}
.sf-menu ul {
box-shadow: 2px 2px 6px rgba(0,0,0,.2);
min-width: 12em; /* allow long menu items to determine submenu width */
*width: 12em; /* no auto sub width for IE7, see white-space comment below */
}
.sf-menu a {
border-left: 1px solid #fff;
border-top: 1px solid #dFeEFF; /* fallback colour must use full shorthand */
border-top: 1px solid rgba(255,255,255,.5);
padding: .75em 1em;
text-decoration:none;
zoom: 1; /* IE7 */
}
.sf-menu a {
color: #13a;
}
.sf-menu li {
background: #BDD2FF;
white-space: nowrap; /* no need for Supersubs plugin */
*white-space: normal; /* ...unless you support IE7 (let it wrap) */
-webkit-transition: background .2s;
transition: background .2s;
}
.sf-menu ul li {
background: #AABDE6;
}
.sf-menu ul ul li {
background: #9AAEDB;
}
.sf-menu li:hover,
.sf-menu li.sfHover {
background: #CFDEFF;
/* only transition out, not in */
-webkit-transition: none;
transition: none;
}

/*** arrows **/
.sf-menu a.sf-with-ul {
padding-right: 2.25em;
min-width: 1px; /* trigger IE7 hasLayout so spans position accurately */
}
.sf-sub-indicator {
position: absolute;
display: block;
right: .75em;
top: .9em;
width: 10px;
height: 10px;
text-indent: -999em;
overflow: hidden;
background: url(http://www.sea.edu/images/sea_images/arrows-ffffff.png) no-repeat 0 -100px;
}

li:hover > a .sf-sub-indicator,
li.sfHover > a .sf-sub-indicator {
background-position: -10px -100px;
}

/* point right for anchors in subs */
.sf-menu ul .sf-sub-indicator {
background-position: 0 0;
}
.sf-menu ul li:hover > a .sf-sub-indicator,
.sf-menu ul li.sfHover > a .sf-sub-indicator {
background-position: -10px 0;
} 
```

这是代码，菜单是使用表达式引擎 2.4.0 动态创建的。因为它自动将列表项的内容包装在一个 div 中（我为第一个 li ul 模仿的，它不是动态创建的），我是否需要对 CSS 做一些激烈的事情来适应？

```
<nav>       
        <ul class="sf-menu" id="spice2011">
        <li>
            <a href="{site_url}spice_2011">2011</a>
                <ul>
                <li><a href="{site_url}spice_2012"><div>2012</div></a></li>
                <li><a href="{site_url}spice_2013"><div>2013</div></a></li>
                </ul>
            </li>
            <li><a href="{site_url}spice_2011/tahiti">Tahiti</a>
                <ul>
            {exp:channel:entries channel="spice_tahiti" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}         
            <li><a href="{url_title_path='spice_2011/tahiti_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>
            </li>
            <li><a href="{site_url}spice_2011/moorea">Moorea</a>
                <ul>
            {exp:channel:entries channel="spice_moorea" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}         
            <li><a href="{url_title_path='spice_2011/moorea_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>
            </li>
            <li><a href="{site_url}spice_2011/rangiroa">Rangiroa</a>
                <ul>
            {exp:channel:entries channel="spice_rangiroa" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}           
            <li><a href="{url_title_path='spice_2011/rangiroa_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>
            </li>
            <li><a href="{site_url}spice_2011/nuku_hiva">Nuku Hiva</a>
                <ul>
            {exp:channel:entries channel="spice_nuku_hiva" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}          
            <li><a href="{url_title_path='spice_2011/nuku_hiva_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>
            </li>               
            <li><a href="{site_url}spice_2011/kiritimati">Kiritimati</a>
                <ul>
            {exp:channel:entries channel="spice_kiritimati" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}         
            <li><a href="{url_title_path='spice_2011/kiritimati_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>
            </li>
            <li><a href="{site_url}spice_2011/hawaii">Hawaii</a>
                <ul>
            {exp:channel:entries channel="spice_hawaii" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}         
            <li><a href="{url_title_path='spice_2011/hawaii_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>   
            </li>
            <li><a href="{site_url}spice_2011/ship">Ship</a>
                <ul>
            {exp:channel:entries channel="spice_ship" category="not 268" disable="member_data|pagination" sort="desc" orderby="date"}           
            <li><a href="{url_title_path='spice_2011/ship_atlas'}">{alternate_title}</a></li>
            {/exp:channel:entries}
                </ul>   
            </li>
        </ul>
    </nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:58:43.473

```
jQuery(document).ready(function(){
    jQuery('ul#spice2011').superfish();
}); 
```

# android - 使用本机活动时关闭软键盘时崩溃

> ID：15913080
> 
> 赞同：5
> 
> 时间：2013-04-09T21:40:16.557
> 
> 标签：android, android-layout, android-ndk, native-activity

我们正在为安卓开发一款独立游戏，并希望用户选择他的昵称。我们选择使用 NDK 提供的 Native Activity，因为这似乎是最简单的方法。

我们在键盘上遇到的第一个问题是函数 ANativeActivity_showSoftInput() 似乎什么都不做（如此处所述[）](https://stackoverflow.com/questions/5864790/how-to-show-the-soft-keyboard-on-native-activity)，所以我们使用 JNI 调用函数来调出键盘：

```
static void showKeyboard(Activity activity) {
  String s = Context.INPUT_METHOD_SERVICE;
  InputMethodManager m = (InputMethodManager)activity.getSystemService(s);
  View w = activity.getWindow().getDecorView();
  m.showSoftInput(w, 0);
} 
```

这可以很好地调出键盘，并且在某些设备上都可以正常工作。但是在其他设备（例如 Nexus 7）上，当用户尝试通过点击“隐藏键盘”按钮来关闭键盘时，应用程序会冻结并显示以下调试输出：

```
I/InputDispatcher(  453): Application is not responding: AppWindowToken{429b54a8 token=Token{42661288 ActivityRecord{41bb0b00 u0 com.example.project/android.app.NativeActivity}}} - Window{420d6138 u0 com.example.project/android.app.NativeActivity}.  It has been 5006.7ms since event, 5005.6ms since wait started.  Reason: Waiting because the focused window has not finished processing the input events that were previously delivered to it.
I/WindowManager(  453): Input event dispatching timed out sending to com.example.project/android.app.NativeActivity 
```

然后用户会看到一个对话框，上面写着：

```
Project isn't responding. Do you want to close it? [Wait]/[OK] 
```

有什么我们做的明显错误的事情吗？或者这可能是一个错误？像[这样](https://code.google.com/p/android/issues/detail?id=35991)的问题似乎表明键盘功能从未在本机胶水中正确实现。

附带说明一下，我们还没有在许多设备上进行测试，但不会崩溃的设备是具有较旧 Android 操作系统的设备。此外，在它确实崩溃的地方，当键盘出现时，它会将*后退*按钮从一个看起来像这样![后退箭头形按钮](https://i.stack.imgur.com/8eWJb.png)变成一个看起来像这样 ![V形按钮](https://i.stack.imgur.com/7fjK3.png)。也许这对应于他们第一次开发原生胶水时没有考虑的不同输入事件？我只是猜测。

无论如何，如果有人在使用本机活动时让软键盘工作，请告诉我们你是如何做到的。

干杯

**更新**

它已在[此处](https://code.google.com/p/android/issues/detail?id=43817&thanks=43817&ts=1359632204)报告为 Android 中的错误，但我们仍然很高兴听到有关解决方法的信息。如果您也受到它的影响，您可能想对该问题进行投票（按星号）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T18:50:22.457

彼得的解决方案效果很好。但是，如果您不想修改 native_app_glue 文件：请注意 process_input 被分配为函数指针。在您的实现文件中，创建您自己的 process_input 函数，如 Peter 所述：

```
static void process_input( struct android_app* app, struct android_poll_source* source) {
    AInputEvent* event = NULL;
    if (AInputQueue_getEvent(app->inputQueue, &event) >= 0) {
        int type = AInputEvent_getType(event);
        LOGV("New input event: type=%d\n", AInputEvent_getType(event));

        bool skip_predispatch
              =  AInputEvent_getType(event)  == AINPUT_EVENT_TYPE_KEY
              && AKeyEvent_getKeyCode(event) == AKEYCODE_BACK;

        // skip predispatch (all it does is send to the IME)
        if (!skip_predispatch && AInputQueue_preDispatchEvent(app->inputQueue, event)) {
            return;
        }

        int32_t handled = 0;
        if (app->onInputEvent != NULL) handled = app->onInputEvent(app, event);
        AInputQueue_finishEvent(app->inputQueue, event, handled);
    } else {
        LOGE("Failure reading next input event: %s\n", strerror(errno));
    }
} 
```

在您的**android_main**函数的开头，将您的**process_input**版本分配给**android_app->inputPollSource.process**。

在您的事件处理程序中，确保您检查后退键（**AKEYCODE_BACK**）并拦截它以隐藏您的键盘（如果可见）。

请注意，此问题似乎存在于 Android 4.1 和 4.2 中 - 在 4.3 中已解决

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:59:41.727

好的，正如我在原始问题的更新中提到的，这是 Android 操作系统内部的一个错误。我们找到了一种解决方法，它真的很难看，但它确实有效，所以有人可能会觉得它有用。

首先你需要修改文件

```
<NDK>/sources/android/native_app_glue/android_native_app_glue.c 
```

通过将函数**process_input**更改为如下所示：

```
// When user closes the software keyboard, this function is normally not
// called at all. On the buggy devices, it is called as if AKEYCODE_BACK
// was pressed. This event then gets consumed by the
// AInputQueue_preDispatchEvent. There should be some mechanism that then
// calls the process_input again to finish processing the input.
// But it never does and AInputQueue_finishEvent is never called, the OS
// notices this and closes our app.
static void process_input( struct android_app* app
                         , struct android_poll_source* source) {
    AInputEvent* event = NULL;
    if (AInputQueue_getEvent(app->inputQueue, &event) >= 0) {
        int type = AInputEvent_getType(event);
        LOGV("New input event: type=%d\n", AInputEvent_getType(event));

        int skip_predispatch
              =  AInputEvent_getType(event)  == AINPUT_EVENT_TYPE_KEY
              && AKeyEvent_getKeyCode(event) == AKEYCODE_BACK;

        // TODO: Not sure if we should skip the predispatch all together
        //       or run it but not return afterwards. The main thing
        //       is that the code below this 'if' block will be called.
        if (!skip_predispatch) {
          if (AInputQueue_preDispatchEvent(app->inputQueue, event)) {
              return;
          }
        }

        int32_t handled = 0;
        if (app->onInputEvent != NULL) handled = app->onInputEvent(app, event);
        AInputQueue_finishEvent(app->inputQueue, event, handled);
    } else {
        LOGE("Failure reading next input event: %s\n", strerror(errno));
    }
} 
```

然后你应该在你自己的输入事件处理程序中有一个看起来像这样的代码：

```
static int32_t handle_input(android_app* app, AInputEvent* event) {
  int32_t handled = 0;

  struct engine* engine = (struct engine*) app->userData;
  switch (AInputEvent_getType(event)) {
    case AINPUT_EVENT_TYPE_KEY:
      switch (AKeyEvent_getAction(event)) {
        case AKEY_EVENT_ACTION_DOWN:
          int key = AKeyEvent_getKeyCode(event);
          if (os_version_major == 4 && os_version_minor == 2) {
            if (m_keyboard_is_visible && key == AKEYCODE_BACK) {
              // You should set this to true when showing the keyboard.
              m_keyboard_is_visible = false;
              hide_keyboard();
              handled = 1;
              break;
            }
          }
          ... // your own "key down" event handling code.
          break;
      }
      break;
    ...
  }
  return handled;  
} 
```

要获取操作系统版本号，我们使用另一个 JNI 调用从~~[android.os.Build.VERSION.RELEASE](http://developer.android.com/reference/android/os/Build.VERSION.html#RELEASE)~~ [android.os.Build.VERSION.SDK_INT](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT)获取它。要实现**show_keyboard**和**hide_keyboard ，请使用**[本文](https://stackoverflow.com/questions/5864790/how-to-show-the-soft-keyboard-on-native-activity)中 Ratamovics 答案中的信息。

**注意**要自动编译 android_native_app_glue.c 并避免直接对 NDK 树进行更改，您可能需要将文件复制到项目的 jni/ 目录并从 Android.mk 中删除这两行

```
LOCAL_STATIC_LIBRARIES := android_native_app_glue
$(call import-module,android/native_app_glue) 
```

# java - Java多维数组作为对象传递

> ID：15913081
> 
> 赞同：0
> 
> 时间：2013-04-09T21:40:22.657
> 
> 标签：java, oop, object, multidimensional-array

它只是我正在做的一个 OOP 测试，请你帮助我理解如何通过传递对象来设置多维数组值的概念。请检查以下代码；

```
 public class agnts {

 private int rate[][] = new int [4][5];

 public agnts(){
 rate[0][1] = new pric(25);
 rate[1][1]=new pric(30);
 rate[2][1]= new pric(45);
 rate[3][1]=new pric(55);
 }    
 }
 class pric {
 //int pric [][]= new int [4][5];
 int pric;
public pric(int p){

    this.pric=p;
}
 public int getPric(){
    return pric;
}
}
 public static void main(String[] args) {        

  agnts tz=  new agnts();
  } 
```

我收到类型不兼容的错误 required:int found:pric 我做错了吗？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:43:45.200

因此，您会遇到错误

```
private int rate[][] = new int [4][5];
// You declare a multi-dimensional integer array.

public agnts(){
  // you then attempt to assign objects to that array.
  rate[0][1] = new pric(25);
  rate[1][1]=new pric(30);
  rate[2][1]= new pric(45);
  rate[3][1]=new pric(55);
} 
```

您声明了整数矩阵，但您正在使用您的价格类对其进行初始化..

**更新 1：** 正如 bmorris591 建议的评论：

```
 public agnts(){
     rate[0][1] = new pric(25).getPric();
     rate[1][1]=new pric(30).getPric();
     rate[2][1]= new pric(45).getPric();
     rate[3][1]=new pric(55).getPric();
  } 
```

**更新2：** 如果你想为所有矩阵设置随机数：

```
for (int row = 0; row < rate.length; row ++ )
 for (int col = 0; col < col[row].length; ; col ++)
    rate[row][col] = (int)(Math.Random()*10+1); // this will generate number between 1 to 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:46:25.480

你已经声明了一个数组`int`

```
private int rate[][] = new int[4][5]; 
```

你有`pric`一个*包含*`int`.

您正在尝试将数组的成员设置为等于`new pric(X)`，这与

```
int i = new pric(X); 
```

如果您看不出有什么问题，那么也许可以从[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/)开始并逐步解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:46:30.140

您在这里调用 pric 的构造函数： `rate[0][1]=new pric(25);`

构造函数返回一个类 pric 的对象，但你想调用 getPric() 来代替： `rate[0][1]=new pric(25).getPric();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:45:33.900

`rate`是整数数组的数组：

```
private int rate[][] = new int [4][5]; 
```

`rate[0][1]`一个`int`. _

所以，因为它是一个`int`，给它分配一个实例是`pric`没有意义的：

```
rate[0][1] = new pric(25); 
```

您可能希望将其初始化为 int：

```
rate[0][1] = 25; 
```

或者您可能想要对价格数组进行 rate ：

```
private pric[][] rate = new pric[4][5]; 
```

请注意，Java 约定告诉类应该以大写字母开头。选择好的名称也使代码更具可读性。什么是`pric`? 什么是`agnts`?

# c# - Microsoft Report Viewer 仅部分显示

> ID：15913083
> 
> 赞同：0
> 
> 时间：2013-04-09T21:40:30.013
> 
> 标签：c#, .net, reporting-services, ssrs-2008, microsoft-reporting

Microsoft Report Viewer 只显示三个字段，其中两个被禁用。它应该显示一个功能齐全的大型报告。

sql server 配置已经过多次审核并在生产环境中运行这些相同的报告。我们还搜索了 web.config 并没有发现任何不合适的地方。

[这是（损坏的）报告的图像。](http://i.imgur.com/UB6WJVu.jpg)“结束日期”和“商店”字段被禁用。单击查看报告会打开加载微调器，然后关闭而不更改任何内容或引发错误。

我们在两种不同的 QA 环境中看到了这个问题，一种使用旧的 ASP.NET，另一种使用 ASP.NET MVC 4。

Web.config 亮点

```
<sessionState mode="SQLServer" sqlConnectionString="Integrated Security=SSPI;Data Source=-------;" timeout="30" />

<compilation debug="true" targetFramework="4.0" >
  <buildProviders>
    <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </buildProviders>
</compilation>

<pages enableViewState="true" clientIDMode="AutoID">
  <controls>
    <add tagPrefix="rsweb" namespace="Microsoft.Reporting.WebForms" assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </controls>
</pages>

<system.web>
  <httpHandlers>
    <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" />
  </httpHandlers>
</system.web>

<system.webServer>
  <handlers>      
    <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </handlers>
</system.webServer> 
```

以下是网页的相关部分：

```
<asp:ScriptManager ID='scriptManager' runat='server' AsyncPostBackTimeout="1800" EnablePartialRendering="false" />

<rsweb:ReportViewer ID="ReportViewer" runat="server" OnReportError="ReportError"
  Font-Names="Verdana" Font-Size="8pt" Height="685px" ProcessingMode="Remote" Width="985px"
  InternalBorderColor="White" InternalBorderWidth="0px" BackColor="White">
  <ServerReport />
</rsweb:ReportViewer> 
```

我们不知所措。有没有人见过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:11:51.987

如果您使用路由，则报表查看器控件依赖于 MVC 应用程序中不存在的回发。

我还看到您正在使用脚本管理器，如果您不使用 UpdatePanel，为什么会引用它。无论如何，超时可能小于报告允许的值，您会看到客户端超时或客户端断开连接错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:14:23.727

我也遇到了同样的问题，我将 RS 附加到我的 MVC 应用程序并得到了解决方案（Web 浏览器兼容性）。

我所做的只是在表单的标题部分添加元标记。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7;IE=EmulateIE8;"/> 
```

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:23:57.147

事实证明，报告毕竟配置错误。不过，感谢您的回复！

# xna - 一个地方二进制级别的数据在哪里

> ID：15913087
> 
> 赞同：1
> 
> 时间：2013-04-09T21:40:39.280
> 
> 标签：xna, binary, filestream

我正在使用带有二进制数据的文件流，我不想将我的二进制文件放在“c:\test.bin”中。看起来很业余。哪里是放置的好地方，或者更好的是，哪里可以以编程方式找到 xna 内容文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:54:33.903

将您的二进制文件放入 Content 项目中。在那里添加您的文件，在“复制到输出目录”下将它们标记为“如果较新则复制”，以便它们在运行时部署到您的内容目录中，并在“构建操作”下将它们标记为“内容”或“无”，否则他们将尝试编译为 xnb（并且可能会失败）。

使用它以编程方式访问它们：

[`TitleContainer.OpenStream("Content/test.bin");`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.titlecontainer.openstream.aspx)

这将返回 a `Stream`，将其传递给 a ，`BinaryReader`如下所示：

```
using (var r = new BinaryReader(TitleContainer.OpenStream("Content/test.bin")))
{
    r.ReadByte();
    //....
} 
```

# c# - 如何避免 VisualStudio 插件中的 UI 阻塞

> ID：15913089
> 
> 赞同：1
> 
> 时间：2013-04-09T21:40:44.030
> 
> 标签：c#, visual-studio, add-in

我有一个VisualStudio Add-in（插件），当这个Add-in的功能被触发时，需要几秒钟才能完成。在此期间，UI 被阻止。如何避免阻塞 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:46:06.893

在诸如[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)之类的线程中执行实际工作。这将使 UI 线程保持响应，因为它不处理昂贵的操作。

# direct3d - FXC 错误“超出最大温度寄存器索引”

> ID：15913098
> 
> 赞同：0
> 
> 时间：2013-04-09T21:41:00.687
> 
> 标签：direct3d, hlsl, direct3d9

我在 HLSL 中工作，我从我的一个着色器中得到了这个错误：

> 错误 X4505：超出最大临时寄存器索引

导致这种情况的行是：

```
int count = Passes[input.Tex.y].y; 
```

通行证定义为：

```
cbuffer Style  
{  
     float3 Passes[256];  
     ...  
} 
```

并且 input.Tex 是声明为 TEXCOORD 的 float2。

有人可以向我解释这个错误吗？它没有记录在 MSDN 上（或据我所知的任何其他地方），我不清楚这里有什么问题。

我正在使用着色器模型 4.0 级别 9_3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T09:35:47.590

如果这是在像素着色器中，则可能不支持数组索引，并且您的编译器可能会生成如下代码：

```
if (input.Tex.y == 0)
  count = Passes[0];
else if (input.Tex.y == 1)
  count = Passes[1];
...
else if (input.Tex.y == 255)
  count = Passes[255]; 
```

我相信 9_3 级代码不支持像素着色器中的数组索引。您应该检查反汇编代码以获取非常冗长的代码。您可能必须将 256 减少到 128 或 64 才能使其编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:55:00.687

现在它将浮点数作为整数索引读取到数组中。假设你的浮点数是 1.0f，这意味着十六进制的 3F80 0000 或十进制的 1,065,353,216。它现在尝试读取地址`Passes + 1065353216 * sizeof(float3)`考虑到单个常量保持 4096 最大常量，这很明显超出了注册表索引。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff476898(v=vs.85).aspx#Shader_Constant_Buffer](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476898(v=vs.85).aspx#Shader_Constant_Buffer)

# javascript - 为什么我的服务器代码 ajax 调用返回用双引号括起来的响应？

> ID：15913103
> 
> 赞同：12
> 
> 时间：2013-04-09T21:41:33.343
> 
> 标签：javascript, asp.net, ajax, response

我正在从我的 javascript 到 aspx 页面的 webmethod 进行 ajax 调用。由于某种原因，我返回的字符串用双引号括起来。我尝试将它们剥离，但由于某种原因，替换只替换了第一个。在服务器端没有包裹字符串的引号。

```
 var req = new XMLHttpRequest();
        var url = document.URL;
        // strip pound sign off the end
        var poundIndex = url.lastIndexOf('#');

        if (poundIndex === url.length - 1) {
            url = url.substring(0, poundIndex);
        }
        url += '/SignOn';
        req.open('post', url, false);
        req.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        req.send();

        var serverResponse = req.responseText.replace('"', ''); 
```

这就是我在服务器上所做的：

```
Return System.Configuration.ConfigurationManager.AppSettings("url").ToString + "?token=" + HttpContext.Current.Session("Token").ToString() + "&aid=ca" 
```

![在此处输入图像描述](https://i.stack.imgur.com/IASR1.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T22:03:11.540

首先，如果您担心看到的是 ""mystring"" 而不是 "mystring"（双引号而不是单引号），那是因为开发人员控制台会自动在字符串值周围显示引号，如果您的字符串实际包含“引号”字符。您在控制台中看到的外部引号不存在，只有内部引号存在。

接下来，根据 JSON 规范 ( [http://www.json.org/)，JSON](http://www.json.org/)字符串以引号开头和结尾。如果您想解析 json 字符串，请使用：

```
var str = JSON.parse(req.responseText); 
```

如果您只是想删除字符串中的所有引号，请尝试

```
var str = req.responseText.replace(/\"/g, ""); 
```

请注意，后者去掉了所有引号，包括字符串中间的（转义）引号。

如果您正在使用 JSON 对象，正如您的响应标头 (application/json) 所表明的那样，我强烈建议您使用 JSON.parse

# r - ggplot：根据条形图中的名称更改堆叠条形的顺序

> ID：15913106
> 
> 赞同：2
> 
> 时间：2013-04-09T21:41:48.530
> 
> 标签：r, ggplot2, bar-chart

```
ggplot(data,aes(x=ab,y=Freq/total,fill=Result))+
      geom_bar(stat="identity")+
     theme(strip.text.x = element_text(size=8, angle=0),
      strip.background = element_rect(colour="black", fill="#CCCCFF"))+
    ggtitle("H.somnus SIR %")+ylab("% SIR")+
    scale_y_continuous(labels=percent,breaks=seq(0,1,.1))+
    theme_set(theme_barplot()) 
```

以上是我正在使用的代码。数据是我已经融化的表格，但“结果”列按字母顺序排列，str（结果）是一个具有 4 个级别的因子：如 A、B、C、D。我想在底部显示最大条的条，顺序为 D、B、C、A

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:40:12.093

这是一个黑客修复，但它的工作原理。ggplot 将按照使用 stat = "identity" 时遇到的顺序绘制堆积条形图。要按 D、B、C、A 的顺序获取堆栈，请像这样重新排序您的 data.frame：

```
data <- data[c(data$Result == "D",
               data$Result == "B",
               data$Result == "C",
               data$Result == "A"),] 
```

[ggplot2](http://docs.ggplot2.org/current/geom_bar.html)帮助文件中的条目在这方面可能会更好。

# oauth-2.0 - 通过 Google plus 或 Google 登录

> ID：15913107
> 
> 赞同：1
> 
> 时间：2013-04-09T21:41:49.880
> 
> 标签：oauth-2.0, google-plus

Google 提供了 2 种类型的签名 Oauth。一个用于 google plus，另一个用于 google（gmail？）

在为我的网络应用程序选择一个之前。我对此有一些疑问。

用户是否可以在不激活 google plus 帐户的情况下使用 Google plus 登录进行登录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T00:28:48.407

澄清一下，如果尚未升级到 Google+ 帐户的 Google 用户单击“使用 Google+ 登录”按钮，打开的同一个同意对话框会将用户带入帐户升级流程。此流程非常简单和快速，并将用户返回到同意对话框，以便他们在完成升级后可以继续登录您的应用程序。如果您想查看此流程，您可以“降级”您的一个模拟账户，然后单击按钮查看升级流程是什么样的。请注意，降级会删除所有 Google+ 数据，因此请务必在演示帐户上进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:07:33.650

如果您使用的是 Google+ 登录，则用户需要升级其 Google 帐户才能包含 Google+。如果用户尝试登录、拥有 Google 帐户且尚未升级，则登录按钮会在他们登陆您的网站之前对其进行升级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-18T20:16:34.903

过去，您需要 Google Plus 才能登录。

现在你没有。

这是[Google 的官方公告](http://googleplusplatform.blogspot.com/2013/12/google-sign-in-improvements11.html)（2013 年 12 月 11 日）。

> Google+ 登录现在支持所有 Google 帐户类型，包括 Google Apps 用户和没有 Google+ 个人资料的用户。

您也可以查看[这个 StackOverflow 答案](https://stackoverflow.com/a/25813938/3345375)和[Google 的 OpenID Connect 页面](https://developers.google.com/accounts/docs/OpenIDConnect)。

# excel - 仅在满足某些条件时才粘贴到单元格中

> ID：15913110
> 
> 赞同：0
> 
> 时间：2013-04-09T21:41:56.567
> 
> 标签：excel, excel-formula

我正在尝试创建满足特定条件的电子邮件列表。所以，我有三张纸。在第一张表中，我有一个电子邮件列表。在第 2 页中，我有一个更大的电子邮件列表。现在，我需要确定表 1 中的电子邮件是否也在表 2 中。如果是，我想在表 3 中创建这些电子邮件的列表。

**尝试**。假设两个电子邮件列表位于 A（小列表）和 B（大列表）列中的同一张表中。首先，我确定来自较小列表的电子邮件是否也在较大列表中。我用

> =vlookup(A1,$B$1:$B$100,1,false)

现在，我很困惑如果来自较小列表的电子邮件也在较大列表中，如何设置将电子邮件粘贴到单元格中的功能。我想过尝试 COUNTIF 和 IFERROR，但无法产生任何有用的东西。我得到的最接近的是

> =if(vlookup(A1,$B$1:$B$100,1,false)=A1,1,0)

当来自较小列表的电子邮件位于较大列表中时，这给了我 1，而当没有因为 vlookup 没有任何内容时，这给了我 1。现在，我需要粘贴电子邮件本身而不是 1s 和 #N/As，并且 IF 函数不喜欢范围。请有任何建议。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:44:34.257

尝试以下

在工作表 1 单元格 A1 -

```
=if(iserror(vlookup(A1,$B$1:$B$100,1,false))=TRUE,0,1) 
```

在工作表 1 单元格 A2 和页面的其余部分 -

```
=if(iserror(vlookup(A1,$B$1:$B$100,1,false))=TRUE,A1,A1+1) 
```

确保不要对 A1 使用静态引用，因为我们希望它在工作表下更改为 A2 等等。

在工作表 3 单元格 A1 中 -

```
=if(iserror(vlookup(1, 'Sheet1'!A:B,2,false))=TRUE,"",vlookup(1, 'Sheet1'!A:B,2,false)) 
```

在工作表 3 单元格 A2 和页面的其余部分 -

```
=if(iserror(vlookup(2, 'Sheet1'!A:B,2,false))=TRUE,"",vlookup(2, 'Sheet1'!A:B,2,false))
=if(iserror(vlookup(3, 'Sheet1'!A:B,2,false))=TRUE,"",vlookup(2, 'Sheet1'!A:B,3,false)) 
```

隐藏工作表 1 列 A 中的列，您正在测试它是否在两个工作表中。这只是通过并测试它是否在两个列表中，如果不是，则您没有增加计数器，因此它们不会显示在表 3 上。

在表 2 中，您实际上只返回一个列表，其中 E-mail 符合这两个条件的顺序。这就是您需要增加查找值的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:44:13.863

为了便于说明，我假设小列表在 Sheet1 的 A1:A25 范围内，而大列表在 Sheet2 的 A1:A100 范围内。

下面的公式将被插入到工作表 3 的单元格 A1 中并向下复制到该工作表的单元格 A25（即小列表的长度）。

```
=IFERROR(INDEX(Sheet2!$A$1:$A$100,SMALL(IFERROR(MATCH(Sheet1!$A$1:$A$25,Sheet2!$A$1:$A$100,0),""),ROWS(A$1:A1)),1),"-") 
```

这是一个数组公式，需要用`Control`- `Shift`-`Enter`组合键输入。

# java - 如何声明其位置导致棋盘对象更新并将棋子存储在给定位置的棋子

> ID：15913111
> 
> 赞同：1
> 
> 时间：2013-04-09T21:42:08.617
> 
> 标签：java, object, location, chess

如果我正在设计一个简单的国际象棋游戏代码并且我已经创建了棋盘布局，我想知道我是如何实现棋子`(P, p, R, r, N, n, B, b, Q, q, K, k)`（大写代表白色棋子，小写字母是黑色棋子）以便 ChessBoard 对象更新以将作品存储在输入的位置？

我应该将这些片段声明为实例变量吗？还是我应该主要声明它们？

至于用户输入一个已经被占用的位置，我完全不知道如何将其转换为代码。

但是，我确实实现了一部分代码，如果用户的输入超出了板子范围，则会显示错误消息。

（顺便说一句，这都是在java中）

任何帮助将不胜感激！！提前致谢！让我知道查看我的一些代码是否会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:53:37.413

几年前，我为求职面试“实施”了一个国际象棋游戏。每个棋子都是一个实例变量，并且有一个 move() 方法来确定棋子的合法移动是什么。棋盘包含所有棋子所在位置的信息，棋子在确定其合法移动时会询问棋盘（例如，棋子会查询棋盘以查看是否有任何对角位置的对角棋子可以捕获） . `Piece`是一个抽象类（并且板子包含一个`Piece`对象网格），并且`Pawn`, `Knight`, 等扩展了`Piece`.

如果您需要实现过路人，那么您可能需要一个单独的规则引擎，碎片可以查询它们的合法移动 - 碎片将是无状态的，并且规则引擎将携带确定 pawn 是否可以捕获所需的状态信息过路人，或者如果由于三步重复而导致平局。

# mysql - 稍微复杂的多对多关系

> ID：15913112
> 
> 赞同：1
> 
> 时间：2013-04-09T21:42:15.457
> 
> 标签：mysql, sql, join, many-to-many

我有一个表，它与另一个表有 2 个多对多关系。例如：

```
main
====
id
leftOptions
rightOptions

options
=======
id
option 
```

我需要将 leftOptions 和 rightOptions 都连接到选项表，所以我无法制作通常的联结表，以 mainId 和 optionsId 作为键。

另外，我正在使用 mysql，所以我需要一些可以与该软件一起使用的东西。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:44:32.607

我看到两种方法：

```
main        mainToOptions        options
====        ============         =======
id          mainId               id
            optionId             option
            isLeft 
```

或者

```
main        mainToLeftOptions       mainToRightOptions       options
====        =================       ==================       =======
id          mainId                  mainId                   id
            optionId                optionId                 option 
```

但是，如果没有更大的图景，真的很难说你应该选择哪一个，

# html - Html 到 Pdf 宝石

> ID：15913113
> 
> 赞同：0
> 
> 时间：2013-04-09T21:42:17.380
> 
> 标签：html, ruby-on-rails, pdf, svg, gem

我有一个包含嵌入 svg 的 html 的视图，我想要做的是让用户能够将视图另存为 pdf 文件在他们的本地机器上，所以我需要一个可以从嵌入 svg 代码的 html 转换为 pdf 的 gem。有什么建议么 ？

# iphone - ios如何在我尝试注册我的应用程序时取消选择游戏中心和应用内购买

> ID：15913115
> 
> 赞同：39
> 
> 时间：2013-04-09T21:42:27.790
> 
> 标签：iphone, ios, ipad, itunes

我正在尝试在苹果开发者门户中注册我的应用程序，但您可以在那里选择您的应用程序将使用的服务。我的问题是我不会使用：“游戏中心”或“应用内购买”。我怎样才能取消选择这些？

![在此处输入图像描述](https://i.stack.imgur.com/HLtJT.png)

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T23:11:52.343

利用`Wildcard App ID`

如`Registering an App ID`页面所示：

> **应用 ID 后缀**
> 
> *显式应用 ID*
> 
> 如果您计划整合应用程序服务，例如游戏中心、应用内购买、数据保护和 iCloud，或者想要一个应用程序独有的配置文件，您必须为您的应用程序注册一个明确的应用程序 ID。
> 
> 要创建显式 App ID，请在 Bundle ID 字段中输入唯一字符串。此字符串应与您的应用的 Bundle ID 匹配。
> 
> *通配符应用 ID*
> 
> 这允许您使用单个 App ID 来匹配多个应用程序。要创建通配符 App ID，请在 Bundle ID 字段中输入星号 (*) 作为最后一位数字。

![在此处输入图像描述](https://i.stack.imgur.com/NV5aF.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-28T06:36:32.687

我找到了一种禁用 Game Center 和应用内购买的方法，但不确定其影响，也不确定这将工作多长时间。因此，使用它需要您自担风险。

基本上输入一个无效的包标识符，如果您有其他标识符（或类似 com.test.test），您可以使用它并单击继续。这会刷新显示错误的页面，但现在也允许取消选中 Game Center 和应用内购买。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-01-20T19:52:29.503

您必须先“启用限制”才能使用它们。禁用应用内购买被视为一种限制。

# javascript - 我无法让我的 jquery 选项卡调用任何 .tab 元素

> ID：15913116
> 
> 赞同：0
> 
> 时间：2013-04-09T21:42:40.547
> 
> 标签：javascript, jquery, html, css, tabs

我正在将 jquery 选项卡实现到我的网站中。我有标签功能并且可以正常工作，但是我无法让任何 .ui-tabs-selected 类正常工作。我总是以白色背景结束。我在下面包含了我的代码。

---------------------HTML 代码-------------------------- --------------------------

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Operational Services</title>
<script type="text/javascript" src="../../javaScript/jquery-1.9.1.js"></script> <!--Jquery library *****DO NOT EDIT*****-->
<script type="text/javascript" src="../../javaScript/jquery-ui-1.10.2/ui/jquery-ui.js"></script> <!--Jquery UI Library library *****DO NOT EDIT*****-->
<script type="text/javascript" src="../../javaScript/jquery-ui-1.10.2/ui/jquery.ui.tabs.js"></script> <!--Jquery UI Library library *****DO NOT EDIT*****-->
<script type="text/javascript" src="../../javaScript/jquery-ui-1.10.2/ui/jquery.ui.core.js"></script> <!--Jquery UI Library library *****DO NOT EDIT*****-->
<script type="text/javascript" src="../../javaScript/jquery-ui-1.10.2/ui/jquery.ui.widget.js"></script> <!--Jquery UI Library library *****DO NOT EDIT*****-->
<script type="text/javascript" src="../../javaScript/himLinks.js"></script><!--Links for top menu bar-->
<link rel="stylesheet" type="text/css" href="../../css/layout.css" /><!--Style Sheet for RCO Website layout-->
<link rel="stylesheet" type="text/css" href="../../css/IndexLayout.css" /><!--Style Sheet for top A-Z Index-->

<script type="text/javascript">
$(document).ready(
  function() {
    $('#tabNavigation').tabs();
  }
);
</script>

</head>

<body>
    <div id="wrapper">
        <div id="header" class="himCoding">
            <a href="#" onclick="himHome()" id="clickHIM"></a>
        </div><!-- Closes Header-->

        <iframe class="nav" src="../himNavigation/himNav.html" height="25px" width="910px" frameborder="0" scrolling="no"></iframe>

        <div id="title" class="himOperations">
          <img src="../../GlobalImages/IndexTitles/HIMcodingHome.png" alt="HIM Operations Heading with Intermountian Logo" />
        </div> 
        <!--Closses title-->

        <div id="tabNavigation">
            <ul>
                <li><a href="#tmpTab-1"><span>How To</span></a></li>
                <li><a href="#tmpTab-2"><span>A</span></a></li>
                <li><a href="#tmpTab-3"><span>B</span></a></li>
                <li><a href="#tmpTab-4"><span>C</span></a></li>
                <li><a href="#tmpTab-5"><span>D</span></a></li>
                <li><a href="#tmpTab-6"><span>E</span></a></li>
                <li><a href="#tmpTab-7"><span>F</span></a></li>
                <li><a href="#tmpTab-8"><span>G</span></a></li>
                <li><a href="#tmpTab-9"><span>H</span></a></li>
                <li><a href="#tmpTab-10"><span>I</span></a></li>
                <li><a href="#tmpTab-11"><span>J</span></a></li>
                <li><a href="#tmpTab-12"><span>K</span></a></li>
                <li><a href="#tmpTab-13"><span>L</span></a></li>
                <li><a href="#tmpTab-14"><span>M</span></a></li>
                <li><a href="#tmpTab-15"><span>N</span></a></li>
                <li><a href="#tmpTab-16"><span>O</span></a></li>
                <li><a href="#tmpTab-17"><span>P</span></a></li>
                <li><a href="#tmpTab-18"><span>Q</span></a></li>
                <li><a href="#tmpTab-19"><span>R</span></a></li>
                <li><a href="#tmpTab-20"><span>S</span></a></li>
                <li><a href="#tmpTab-21"><span>T</span></a></li>
                <li><a href="#tmpTab-22"><span>U</span></a></li>
                <li><a href="#tmpTab-23"><span>V</span></a></li>
                <li><a href="#tmpTab-24"><span>W</span></a></li>
                <li><a href="#tmpTab-25"><span>X</span></a></li>
                <li><a href="#tmpTab-26"><span>Y</span></a></li>
                <li><a href="#tmpTab-27"><span>Z</span></a></li>
            </ul>
            <div id="tmpTab-1" class="indexBorder"><!--How Tab-->
                <p>To view a specific topic, select the letter above that corresponds with the first letter of the desired topic. E.g., Display Screen select the letter “D” You may also search a topic or phrase by using the search field in the top right hand corner of this page.

</p>
            </div>
            <div id="tmpTab-2" class="indexBorder"><!--A Tab-->
                <p>A</p>
            </div>
            <div id="tmpTab-3" class="indexBorder"><!--B Tab-->
                <p>B</p>
            </div>
            <div id="tmpTab-4" class="indexBorder"><!--C Tab-->
                <p>C</p>
            </div>
            <div id="tmpTab-5" class="indexBorder"><!--D Tab-->
                <p>D</p>
            </div>
            <div id="tmpTab-6" class="indexBorder"><!--E Tab-->
                <p>E</p>
            </div>
            <div id="tmpTab-7" class="indexBorder"><!--F Tab-->
                <p>F</p>
            </div>
            <div id="tmpTab-8" class="indexBorder"><!--G Tab-->
                <p>G</p>
            </div>
            <div id="tmpTab-9" class="indexBorder"><!--H Tab-->
                <p>H</p>
            </div>
            <div id="tmpTab-10" class="indexBorder"><!--I Tab-->
                <p>I</p>
            </div>
            <div id="tmpTab-11" class="indexBorder"><!--J Tab-->
                <p>J</p>
            </div>
            <div id="tmpTab-12" class="indexBorder"><!--K Tab-->
                <p>K</p>
            </div>
            <div id="tmpTab-13" class="indexBorder"><!--L Tab-->
                <p>L</p>
            </div>
            <div id="tmpTab-14" class="indexBorder"><!--M Tab-->
                <p>M</p>
            </div>
            <div id="tmpTab-15" class="indexBorder"><!--N Tab-->
                <p>N</p>
            </div>
            <div id="tmpTab-16" class="indexBorder"><!--O Tab-->
                <p>O</p>
            </div>
            <div id="tmpTab-17" class="indexBorder"><!--P Tab-->
                <p>P</p>
            </div>
            <div id="tmpTab-18" class="indexBorder"><!--Q Tab-->
                <p>Q</p>
            </div>
            <div id="tmpTab-19" class="indexBorder"><!--R Tab-->
                <p>R</p>
            </div>
            <div id="tmpTab-20" class="indexBorder"><!--S Tab-->
                <p>S</p>
            </div>
            <div id="tmpTab-21" class="indexBorder"><!--T Tab-->
                <p>T</p>
            </div>
            <div id="tmpTab-22" class="indexBorder"><!--U Tab-->
                <p>U</p>
            </div>
            <div id="tmpTab-23" class="indexBorder"><!--V Tab-->
                <p>V</p>
            </div>
            <div id="tmpTab-24" class="indexBorder"><!--W Tab-->
                <p>W</p>
            </div>
            <div id="tmpTab-25" class="indexBorder"><!--X Tab-->
                <p>X</p>
            </div>
            <div id="tmpTab-26" class="indexBorder"><!--Y Tab-->
                <p>Y</p>
            </div>
            <div id="tmpTab-27" class="indexBorder"><!--Z Tab-->
                <p>Z</p>
            </div>

        </div><!--Closes DIV tabNavigation-->

        </div><!-- Closes Wrapper-->
</body>

</html> 
```

----------------------------------------END HTML 代码-------- ----------------------

--------------------------CSS------------------------ ------------------------------

```
.indexBorder{
    padding: 5px 5px 5px 5px;
    border:1px solid gray;
    width: 870px;
    margin-left:auto;
    margin-right:auto;

}

#tabNavigation{
    font-family: "Trebuchet MS", Trebuchet, Verdana, Helvetica, Arial, sans-serif;
    font-size:12px;
    width:910px;

}

#tabNavigation ul{
    list-style:none;
    padding:0;
    margin-left:7px;
    margin-right:auto;
    margin-top:5px;
    height:22px;
    font-size:12px;

}

#tabNavigation ul li{
    float:left;
    margin-left:4px;
    min-width:12px;
    min-height:18px;
    position:relative;
    border: solid 1px;
    background-image:url(../../pastrain/images/tab.png);
    background-position:bottom;
}

#tabNavigation ul li a{
     display: block;
    padding: 0 9px;
    text-decoration:none;

}

#tabNavigation ul li .ui-tabs-selected{
    background:red;
}

#tabNavigation ul li .ui-tabs-selected a{
    color:white;
}

.ui-tabs-hide {
    display:none;   
} 
```

------------------JavaScript----------------- ----------------------------

```
$(document).ready(
  function() {
    $('#tabNavigation').tabs();
  }
); 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:50:45.370

看起来您缺少 jquery-ui CSS。把它放在你的头部：

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" /> 
```

这将使用 jQuery UI 平滑 CSS 主题设置标签的样式。如果要覆盖所选选项卡的背景颜色，可以执行以下操作：

```
#tabNavigation ul li.ui-tabs-selected {
    background-color:red !important;
    background-image: none !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:52:06.173

从类声明中删除空格

```
#tabNavigation ul li.ui-tabs-selected{
                    ^
    background:red;
} 
```

# android - 如何以编程方式在 android 上打开和显示 jp2 文件？

> ID：15913120
> 
> 赞同：4
> 
> 时间：2013-04-09T21:42:57.070
> 
> 标签：android, jpeg2000

我是 android 开发的新手，我有一个 JP2 文件（jpeg 2000）图像，我想编写一个应用程序来加载并在 Android 设备上显示它。我从哪说起呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-18T15:02:36.313

您可以使用基于[OpenJPEG的金雅拓](https://github.com/uclouvain/openjpeg)[JP2 for Android](https://github.com/gemalto/JP2ForAndroid)库。

将依赖项添加到您的 build.gradle 文件中：

```
implementation 'com.gemalto.jp2:jp2-android:1.0' 
```

并使用以下代码将 JJ2000 字节转换为 Android 位图：

```
Bitmap bitmap = new JP2Decoder(jj2000Bytes).decode(); 
```

# mysql - 选择不相关的项目

> ID：15913121
> 
> 赞同：0
> 
> 时间：2013-04-09T21:43:06.703
> 
> 标签：mysql, select

我有3张桌子，

```
 user { id, name, email }
 games { id, name, icon } 
 user_games {id_user, id_game} 
```

我想选择用户还没有的游戏。

这是我最好的尝试，但什么也没返回。但最后不要给出错误消息XD

```
SELECT a.* 
FROM games a 
LEFT JOIN user_games b ON a.id IN (b.id_game) AND '1' IN (b.id_user) 
WHERE (b.id_game IS NULL) AND b.id_user <> '1' 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:48:21.357

看起来你大部分都拥有它。最后的 user_games.id_user<>1 可能不是您想要的，因为您正在寻找 id_user 为空且 null<>1 也为空的情况。

```
SELECT games.*
FROM games
   LEFT JOIN user_games on (
       games.id = user_games.id_game AND
       user_games.id_user = '1'
   )
WHERE user_games.id_user IS NULL 
```

# angularjs - ngHide 或 ngShow 基于孩子的数量

> ID：15913128
> 
> 赞同：30
> 
> 时间：2013-04-09T21:43:25.697
> 
> 标签：angularjs

我知道问这个问题绝对是愚蠢的，但我很好奇有没有办法做类似的事情：

```
<div ng-show='this.children.length > 0'> // shown
   <div>

   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-09T23:34:59.910

要添加到@Josh David Miller 的答案，以下值在角度上被认为是虚假的。

1）一个空数组

2)An Empty String //即使是空格也被认为是真的

3) 一个带有 false 的布尔值

4)未定义

5)空

6) 0

所以，大卫的答案可以写成，

```
<div ng-show="items.length">
  <div ng-repeat="item in items">
    <!-- ... -->
  </div>
</div> 
```

甚至更短，

```
<div ng-show="items">
  <div ng-repeat="item in items">
    <!-- ... -->
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-03-21T18:48:55.877

# AngularJS[在 1.3.0 版本中做出了重大改变](https://github.com/angular/angular.js/pull/7960)！

不幸的是，rajkamals 的答案不再正确。

从这个版本开始，只有这 6 个值被认为是虚假的：

1.  `false`
2.  `null`
3.  `undefined`
4.  `NaN`
5.  `0`
6.  `""`

值`'f'`, `'0'`, `'false'`,`'no'`和`'n'`( `[]`!) 变为真值。

所以使用

```
<div ng-show="items">
    <!-- ... --->
</div> 
```

`items`如果 div 仅在包含至少 1 个元素时才可见，则不再推荐使用，因为即使使用`items = []`它也会显示。

相反，您可以使用

```
<div ng-show="items.length > 0">
    <!-- ... --->
</div> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-09T21:50:08.687

在 AngularJS 中，我们不应该根据我们的视图来思考，而应该根据我们的模型来思考。

所以你应该问问自己是什么在你的元素中生成了内容。如果它是动态的，它来自您的模型。那么，您可以访问哪些模型属性来为您提供所需的信息？

这是一个 ngRepeat 示例：

```
<div ng-show="items.length > 0">
  <div ng-repeat="item in items">
    <!-- ... -->
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-10T08:45:53.923

看到您的大多数问题，您似乎没有以“正确”的方式使用 Angular，或者您可能无法使用 Angular（也许是因为项目限制！）。

一些一般的事情需要考虑。

1.  如果您使用的是 $compile - 这是一种代码味道。在 95% 的情况下，您不需要使用 $compile。如果您正在使用 $compile，您会意识到这一点，并且您找不到任何其他方法来做您需要做的事情。您正在非常谨慎地使用它。

2.  如果您正在“查询” DOM 以执行任何操作 - 这又是一种可能的气味。同样在 95% 的情况下，您不需要这样做。这里正确的做法是修改模型，让 Angular 处理 DOM。

例如，这些应该与您使用 setTimeout 0 的方式相同。每当你使用它时，它应该感觉就像一个黑客。

如果您没有完全（或至少部分）控制您的 HTML（可能是服务器？）它可能会与 Angular 混淆。也许这就是为什么你要尝试做所有这些 DOM 操作的东西。

```
<div ng-show='this.children.length > 0'> // shown
   <div>

   </div>
</div> 
```

这是一个我们不确定谁在控制的例子。如果您有权访问生成此 html 的构造，您也可以使用 ng-init 编写它！

```
<div ng-init="childElements = {{serverside variable}}" ng-show='childElements > 0'> // shown
   <div server-side-repeat>

   </div>
</div> 
```

如果你被迫在很多地方做这些事情，那么也许 Angular 不是适合你的解决方案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T07:54:58.663

AngularJS v1.3.3 =>`ng-show="items"`对我不起作用，因为它评估对象 true、false、null、undefined。万一`items=[]`，ng-show 仍然评估为真。相反，我不得不使用：

```
<div ng-show="items.length">
    <!-- ... --->
</div> 
```

并工作！感谢您的指导。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-24T11:12:08.093

这也完美无缺....

```
<div ng-show="items.length">
<div ng-repeat="item in items">
<!-- bind to your Dom element -->
</div>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-02T21:04:53.927

正如克里斯托弗指出的那样，公认的答案不再正确。因为空数组仍然评估为真。

```
obj.children = []
<div ng-show='obj.children'> 
  As of Angular 1.3 this always shows if children exists as part of obj. 
</div> 
```

## 当前解决方案

在这种情况下，数组存在。但是，如果您将要评估的数组的数组的零元素赋予 angular，并且没有这样的元素，它将评估为假。

```
<div ng-show='obj.children[0]'> 
  This will not show because there is no element in the array at 0
</div> 
```

您也可以将它与 [n] 一起用作数组中的任何编号元素，以仅在计数大于 n 时显示。如果您使用 obj.children[2]，它只会显示数组中是否有 3 个或更多元素。

# matlab - 具有特定强度的峰/谷检测

> ID：15913130
> 
> 赞同：0
> 
> 时间：2013-04-09T21:43:32.567
> 
> 标签：matlab

无论如何，我是否可以检测到具有特定强度的峰或谷。

我的意思是`A`当且仅当它的值高于前一个`N`元素并且高于下一个`M`元素时，如果是一个向量而不是一个值是峰值。

显然这可以通过循环来完成，但是有什么简单的方法可以通过向量操作来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:48:53.993

我觉得

```
[...] = findpeaks(data,'Name',value) 
```

可以帮助你。

# excel - 我的直到宏什么都不做

> ID：15913132
> 
> 赞同：0
> 
> 时间：2013-04-09T21:43:42.870
> 
> 标签：excel, vba, loops

我正在创建一个迭代循环来解决达西-魏斯巴赫闭管循环。有4个循环。我正在尝试对所有 4 个循环重复迭代，直到水头损失低于某个值（0.0001）。我录制了一个宏，然后尝试修改它以尽可能多地迭代以低于 0.0001。该宏基本上是从以前的迭代和循环中提取值并将它们放入新的迭代中。我对 vba 真的很陌生，我不确定这里有什么问题，但是宏根本不会运行。它没有说有任何错误，它只是不做任何事情。也许有人知道问题是什么？

```
Sub Iterate()
'
' Iterate Macro
'
'
Dim RowStart As Long
Dim HeadLoss As Long
Dim Count As Long
    RowStart = 19
    HeadLoss = 0
    Count = 2
Do Until HeadLoss <= 0.0001
' Copy Previous Iteration
    Range(Cells(RowStart, 1), Cells(RowStart + 32, 7)).Select
    Selection.Copy
    Range(Cells(RowStart + 34, 1)).Select
    ActiveSheet.Paste
    Range(Cells(RowStart + 34, 1)).Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "Iteration" & Count
' Loop 1
    Range(Cells(RowStart + 37, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 38, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-18]C[5]"
    Range(Cells(RowStart + 39, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 40, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-29]C[5]"
    Range(Cells(RowStart + 37, 7)).Select
    ActiveCell.FormulaR1C1 = "=RC[-5]-R61C5"
    Range(Cells(RowStart + 37, 7)).Select
    Selection.AutoFill Destination:=Range(Cells(RowStart + 37, 7), 
        Cells(RowStart + 40, 7)), Type:=xlFillDefault
' Loop 2
    Range(Cells(RowStart + 45, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-5]C[5]"
    Range(Cells(RowStart + 46, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 47, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 48, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-18]C[5]"
    Range(Cells(RowStart + 45, 7)).Select
    ActiveCell.FormulaR1C1 = "=RC[-5]-R69C5"
    Range(Cells(RowStart + 45, 7)).Select
    Selection.AutoFill Destination:=Range(Cells(RowStart + 45, 7), 
        Cells(RowStart + 48, 7)), Type:=xlFillDefault
' Loop 3
    Range(Cells(RowStart + 53, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 54, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-50]C[5]"
    Range(Cells(RowStart + 55, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-16]C[5]"
    Range(Cells(RowStart + 56, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-29]C[5]"
    Range(Cells(RowStart + 53, 7)).Select
    ActiveCell.FormulaR1C1 = "=RC[-5]-R77C5"
    Range(Cells(RowStart + 53, 7)).Select
    Selection.AutoFill Destination:=Range(Cells(RowStart + 53, 7), 
        Cells(RowStart + 56, 7)), Type:=xlFillDefault
' Loop 4
    Range(Cells(RowStart + 61, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-5]C[5]"
    Range(Cells(RowStart + 62, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 63, 2)).Select
    ActiveCell.FormulaR1C1 = "=R[-34]C[5]"
    Range(Cells(RowStart + 64, 2)).Select
    ActiveCell.FormulaR1C1 = "=-R[-16]C[5]"
    Range(Cells(RowStart + 61, 7)).Select
    ActiveCell.FormulaR1C1 = "=RC[-5]-R84C5"
    Range(Cells(RowStart + 61, 7)).Select
    Selection.AutoFill Destination:=Range(Cells(RowStart + 61, 7), 
        Cells(RowStart + 64, 7)), Type:=xlFillDefault

    HeadLoss = Cells(RowStart + 41, 5).Value + Cells(RowStart + 49, 5).Value +   
        Cells(RowStart + 57, 5).Value + Cells(RowStart + 65, 5).Value
    RowStart = RowStart + 34
    Count = Count + 1
Loop

End Sub 
```

* * *

谢谢你们的帮助，我肯定接近了。不过，我还有一个问题。我希望宏循环直到 HeadLoss 小于 0.0001。目前迭代只会运行一次，HeadLoss 约为 0.2058，明显大于 0.0001。为什么它只在一次迭代后停止？

```
Sub Iterate()
'
' Iterate Macro
'

'
Dim RowStart As Long
Dim HeadLoss As Long
Dim Count As Long
    RowStart = 19
    HeadLoss = 1
    Count = 2
Do While HeadLoss >= 0.0001
' Copy Previous Iteration
    With ActiveSheet
    Range(.Cells(RowStart, 1), .Cells((RowStart + 32), 7)).Copy 
          .Cells(RowStart + 34, 1)
    .Cells(RowStart + 34, 1).Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "Iteration" & Count
' Loop 1
    .Cells(RowStart + 37, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 38, 2).FormulaR1C1 = "=-R[-18]C[5]"
    .Cells(RowStart + 39, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 40, 2).FormulaR1C1 = "=-R[-29]C[5]"
    .Cells(RowStart + 37, 7).FormulaR1C1 = "=RC[-5]-R61C5"
    .Cells(RowStart + 37, 7).AutoFill Destination:=Range(Cells(RowStart + 37, 7),
        Cells(RowStart + 40, 7)), Type:=xlFillDefault
' Loop 2
    .Cells(RowStart + 45, 2).FormulaR1C1 = "=-R[-5]C[5]"
    .Cells(RowStart + 46, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 47, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 48, 2).FormulaR1C1 = "=-R[-18]C[5]"
    .Cells(RowStart + 45, 7).FormulaR1C1 = "=RC[-5]-R69C5"
    .Cells(RowStart + 45, 7).AutoFill Destination:=Range(Cells(RowStart + 45, 7), 
        Cells(RowStart + 48, 7)), Type:=xlFillDefault
' Loop 3
    .Cells(RowStart + 53, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 54, 2).FormulaR1C1 = "=-R[-50]C[5]"
    .Cells(RowStart + 55, 2).FormulaR1C1 = "=-R[-16]C[5]"
    .Cells(RowStart + 56, 2).FormulaR1C1 = "=-R[-29]C[5]"
    .Cells(RowStart + 53, 7).FormulaR1C1 = "=RC[-5]-R77C5"
    .Cells(RowStart + 53, 7).AutoFill Destination:=Range(Cells(RowStart + 53, 7), 
        Cells(RowStart + 56, 7)), Type:=xlFillDefault
' Loop 4
    .Cells(RowStart + 61, 2).FormulaR1C1 = "=-R[-5]C[5]"
    .Cells(RowStart + 62, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 63, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 64, 2).FormulaR1C1 = "=-R[-16]C[5]"
    .Cells(RowStart + 61, 7).FormulaR1C1 = "=RC[-5]-R84C5"
    .Cells(RowStart + 61, 7).AutoFill Destination:=Range(Cells(RowStart + 61, 7),     
        Cells(RowStart + 64, 7)), Type:=xlFillDefault
' Check to see if another iteration is needed
    HeadLoss = Abs(Cells(RowStart + 41, 5).Value) + 
        Abs(Cells(RowStart + 49, 5).Value) + 
        Abs(Cells(RowStart + 57, 5).Value)+       
        Abs(Cells(RowStart + 65, 5).Value)
    RowStart = RowStart + 34
    Count = Count + 1
    End With
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:03:46.277

```
Sub Iterate()
    '
' Iterate Macro
'
'
Dim RowStart As Long
Dim HeadLoss As Long
Dim Count As Long
    RowStart = 19
    HeadLoss = 0
    Count = 2
Do While HeadLoss <= 0.0001
' Copy Previous Iteration

   With ActiveSheet
    Range(.Cells(RowStart, 1), .Cells((RowStart + 32), 7)).Copy .Cells(RowStart + 34, 1)

    .Cells(RowStart + 34, 1).Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "Iteration" & Count

For i = 1 To 4
    .Cells(RowStart + 37, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 38, 2).FormulaR1C1 = "=-R[-18]C[5]"
    .Cells(RowStart + 39, 2).FormulaR1C1 = "=R[-34]C[5]"
    .Cells(RowStart + 40, 2).FormulaR1C1 = "=-R[-29]C[5]"
    .Cells(RowStart + 37, 7).FormulaR1C1 = "=RC[-5]-R61C5"
    .Cells(RowStart + 37, 7).AutoFill Destination:=Range(Cells(RowStart + 37, 7), Cells(RowStart + 40, 7)), Type:=xlFillDefault
Next i

    HeadLoss = .Cells(RowStart + 41, 5).Value + .Cells(RowStart + 49, 5).Value + .Cells(RowStart + 57, 5).Value + .Cells(RowStart + 65, 5).Value
    RowStart = RowStart + 34
    Count = Count + 1
   End With
Loop

End Sub 
```

# javascript - 水平滚动到锚点

> ID：15913135
> 
> 赞同：4
> 
> 时间：2013-04-09T21:43:48.687
> 
> 标签：javascript, jquery, html, css

我有一个水平导航的网站。

这是代码：

```
<ul>
    <li><a href="#box-1"></a></li>
    <li><a href="#box-2"></a></li>
    <li><a href="#box-3"></a></li>
    <li><a href="#box-4"></a></li>
    <li><a href="#box-5"></a></li>
    <li><a href="#box-6"></a></li>
    <li><a href="#box-7"></a></li>
    <li><a href="#box-8"></a></li>
    <li><a href="#box-9"></a></li>
    <li><a href="#box-10"></a></li>
</ul>
<div id="content">
    <div id="box-1"></div>
    <div id="box-2"></div>
    <div id="box-3"></div>
    <div id="box-4"></div>
    <div id="box-5"></div>
    <div id="box-6"></div>
    <div id="box-7"></div>
    <div id="box-8"></div>
    <div id="box-9"></div>
    <div id="box-10"></div>
</div> 
```

每个框的宽度为 300 像素。但是当我单击时，如果它在分辨率区域中可见，它不会滚动到该框。我想要做的是，例如，如果我单击`<a href="#box-3">`它会将我带到 div `#box-3`，但它将是左侧的第一个，其他 div 必须被隐藏。它只在分辨率很小的时候隐藏其他 div，它工作得很好，但如果分辨率很宽，它就不会工作..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:41:55.343

就像是：

```
$(document).ready(function() {

    $('ul>li>a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollLeft: $($anchor.attr('href')).offset().left
        }, 1000);
        event.preventDefault();
    });

}); 
```

如果您尝试在几个元素之间水平滚动，则应该这样做。

这是另一个参考：[链接](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-10T14:00:52.433

如果我理解得很好，您需要水平滚动，并且每个“屏幕”都有一个整页宽度。如果是这种情况，您不需要 javascript，但您只能使用 css 来制作，除非您需要在“屏幕”之间使用平滑滚动。

在不使用 js 的情况下，您只需将 each`box`的宽度设为 100% 并将内容包含在一个子项中。

[**检查这个小提琴**](https://jsfiddle.net/otinanaipali/tL54z2bm/)以获得这个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T14:51:35.940

根据 David Fariña 的回答，这个句柄也来到了页面

```
function horizontal_anchor(){
 var hash=decodeURIComponent(location.hash);/*decode special chars like spaces*/
 jQuery('html, body').stop().animate({
 scrollLeft: jQuery(hash).offset().left
 }, 1000);
}

jQuery(document).ready(function(){  
        //on load
        if(location.hash) horizontal_anchor();
        //on url change
        jQuery(window).on('hashchange',function(event){
            horizontal_anchor()
            event.preventDefault();
        });
}); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-09T22:45:56.787

如果我理解正确，你有一个固定宽度的区域，你想一次显示一个？像这样？

```
<ul>
    <li><a href="#box-1">menu item 1</a></li>
    <li><a href="#box-2">menu item 2</a></li>
    <li><a href="#box-3">menu item 3</a></li>
    <li><a href="#box-4">menu item 4</a></li>
</ul>

<div id="container">
    <div id="content">
        <div class="box-container" id="box-1">
            <div class="box-contents">stuff</div>
        </div>
        <div class="box-container" id="box-2">
            <div class="box-contents">stuff</div>
        </div>
        <div class="box-container" id="box-3">
            <div class="box-contents">stuff</div>
        </div>
        <div class="box-container" id="box-4">
            <div class="box-contents">stuff</div>
        </div>
    </div>
</div>

#container { width: 100%; overflow: hidden;}
#content { width: 400%; }   
.box-container { width: 25%; background-color: red; float: left; display: block;}
.box-contents { height: 300px; width: 300px; text-align: left; background-color: blue; } 
```

这里的jsfiddle示例：http: [//jsfiddle.net/8B3hL/](http://jsfiddle.net/8B3hL/)

显然你需要链接这些菜单项，但你明白了

# python - 在 django 中为继承的字段添加索引

> ID：15913136
> 
> 赞同：3
> 
> 时间：2013-04-09T21:43:53.197
> 
> 标签：python, django, django-models, django-inheritance

我有许多需要时间戳和缓存控制的模型，因此继承自我正在使用[`TimeTrackable`](https://github.com/ambv/kitdjango/blob/ba115ce2462b31cf78702faa045285ce78ff138f/src/lck/django/common/models.py#L158)的`lck.django`mixin 库。

但是，由于某种原因，其中定义的`created`和`modified`字段`TimeTrackable`没有被索引，即使同一个 mixin 库中的许多其他字段都被索引，并且我根据模型在不同程度上使用基于这些字段的排序，并且希望索引一个或两个它们在我的 postgres 数据库中。（我对这些字段上的索引并不是我真正需要的想法持开放态度，但我认为这是一个非常明确的索引用例。）

我的理解是，由于 Django 继承模型中的怪癖，如果我只是尝试用同名字段加上索引覆盖这些字段，系统将尝试创建两个同名字段并阻塞`syncdb`.

有什么好的方法来索引它们吗？我能想到几个选择：

*   将代码复制/粘贴`TimeTrackable`到我的应用程序中（不是 DRY，但至少后果是可预测的）
*   `south`在迁移或同步数据库钩子或其他东西中添加单独的索引步骤（看起来很脆弱，并且对于试图通过查看应用程序代码来判断哪些列被索引的人感到困惑，因为某些列确实在模型文件中明确索引）
*   应用程序初始化后在 postgres 中手动索引它（我必须将此应用程序交给客户端，所以我想尽量减少手动部署步骤）
*   以某种方式使用/滥用[“一起索引”元字段](https://docs.djangoproject.com/en/dev/ref/models/options/#index-together)来索引单个字段而不是其预期用途（不知道这样做的后果是什么，如果我尝试一下）

有没有其他好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T17:53:26.043

我最终得到的解决方案是滥用`index_together`子模型。丑陋与否，它是索引单个字段的最方便的方法（不检查`index_together`元组是否有多个成员），并且它是声明性的并且阅读起来相对清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T10:18:48.487

对于那些正在寻找 django<1.5 使用解决方案的人`uniqe_together`

# php - 在 While 循环中使用 While

> ID：15913137
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:43:54.233
> 
> 标签：php, sql, while-loop

我需要第二双眼睛。我有一个由数千个表组成的数据库，所有表都具有相同的结构。我选择每个表，然后从行中选择 URL 并检查 URL 是否返回良好的 HTML。整个事情运行良好，它运行一次 OK，然后对于 while 函数的后续实例，SQL 语句返回一个布尔值。

除了第一个实例之外，我都遇到了这个错误，它运行得非常好。

> 警告：mysql_fetch_array() 期望参数 1 是资源，在第 1272 行的 /home/toplist/public_html/config/index.php 中给出的布尔值

```
$result = mysql_query("SELECT `access_name` FROM `multiforums_forums`");
while ($names=mysql_fetch_array($result)) {
$acces = $names[access_name];
    $get_urls = mysql_query("SELECT * from `".$acces."_users`");
    while ($results=mysql_fetch_array($get_urls))
            {
              //this bit works fine
            }
} 
```

希望这是有道理的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:49:09.323

阅读手册页[`mysql_query()`](http://www.php.net/manual/en/function.mysql-query.php)。`false`如果查询失败，它将返回（布尔值）。在阅读您的问题时，很可能是这种情况。

您可以使用该功能[`mysql_error()`](http://www.php.net/manual/en/function.mysql-error.php)从 mysql 获取最新的错误消息。因此，将您的代码更改为类似这样以查看错误消息：

```
$result = mysql_query("SELECT `access_name` FROM `multiforums_forums`");
if(!$result) {
    die(mysql_error());
}
while ($names=mysql_fetch_array($result)) {
$acces = $names[access_name];
    $get_urls = mysql_query("SELECT * from `".$acces."_users`");
    if(!$get_urls) {
        die(mysql_error());
    }
    while ($results=mysql_fetch_array($get_urls))
            {
              //this bit works fine
            }
} 
```

您还应该注意，不推荐使用 PHP 的 mysql_* 扩展。如果您不想很快重写此代码，则不应将其用于新代码。请改用[PDO](http://www.php.net/manual/en/book.pdo.php)或[mysqli_*](http://www.php.net/manual/en/book.mysqli.php)扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:26:19.220

也许你的意思是

```
$acces = $names['access_name']; 
```

# java - 如何为包编写迭代器？（需要内部类）

> ID：15913141
> 
> 赞同：0
> 
> 时间：2013-04-09T21:44:10.083
> 
> 标签：java, map, project, computer-science

我的项目有问题，我要求在包的元素上创建一个迭代器，我需要使用内部类来为密集包定义我的迭代器

这是我到目前为止所得到的，我不确定其他方法是否正常工作，但这里有（见链接，在这里粘贴代码时遇到问题，第一个计时器=（）

```
public class DenseBag<T> extends AbstractCollection<T> {

    private Map<T, Integer> denseBagMap;
    private int size;  // Total number of elements in the bag
    transient int modCount;

    public DenseBag() { //DONE!
            size = 0;
            denseBagMap = new HashMap<T, Integer>();
    }

    public String toString() {
            throw new UnsupportedOperationException("YOU MUST IMPLEMENT THIS!");  
    }

    public boolean equals(Object o) {//DONE!
            if (o == this) {
                    return true;
            }
            if (!(o instanceof DenseBag)) {
                    return false;
            }
            DenseBag<T> dense = (DenseBag<T>) o;
            return size == dense.size;
    }

    public int hashCode() {//DONE!
            return this.denseBagMap.hashCode();
    }

    public Iterator<T> iterator() {
            throw new UnsupportedOperationException("YOU MUST IMPLEMENT THIS!");
    }

    public Set<T> uniqueElements() {
            throw new UnsupportedOperationException("YOU MUST IMPLEMENT THIS!");
    }

    public int getCount(Object o) {
            throw new UnsupportedOperationException("YOU MUST IMPLEMENT THIS!");
    }

    public T choose(Random r) {//DONE!
            ArrayList<T> keyArrayList = new ArrayList<T>();
            int index = 0;
            Iterator<T> it = denseBagMap.keySet().iterator();
            while (it.hasNext()){
                    T current = it.next();
                    while (index < denseBagMap.get(current)){
                            keyArrayList.add(current);
                            index++;
                    }
                    index = 0;
            }

            return keyArrayList.get(r.nextInt(keyArrayList.size())); }

    public boolean contains(Object o) {//DONE!
            return denseBagMap.containsKey(o);
    }

    public boolean add(T o) {//DONE!
            if (denseBagMap.containsKey(o)) {
                    denseBagMap.put(o, denseBagMap.get(o) + 1);
            } else {
                    denseBagMap.put(o, 1);
            }
            return true;
    }

    public boolean remove(Object o) {//DONE!
            if (o != null){
                    if (denseBagMap.containsKey(o)){
                            Integer newValue = denseBagMap.get(o)-1;
                            denseBagMap.put((T)o, newValue);
                            return true;
                    }
            }
            return false;
    }

    public int size() {//DONE?
            return size;
    } 
```

}

***我设法根据最初的评论和我得到的结果来解决这个问题：***

```
private final class DenseBagIterator<E> implements Iterator<T> {
    private Iterator<Entry<T, Integer>> entrySetIterator;
    private int count = 0;
    private int max = 0;
    private T current = null;
    private int expectedModCount;

    public DenseBagIterator() {
        entrySetIterator =  denseBagMap.entrySet().iterator();
        expectedModCount = modCount;
    }

    public boolean hasNext() {
        if (count < max) {
            return true;
        } else {
            return entrySetIterator.hasNext();
        }
    }

    public T next() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        if (count < max) {
            count++;
        } else {
            Entry<T, Integer> entrySet = entrySetIterator.next();
            current = entrySet.getKey();
            max = entrySet.getValue();
            count = 1;
        }
        return current;
    }

    @Override
    public void remove() {
        if (current == null)
            throw new IllegalStateException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        if (max > 1) {
            DenseBag.this.remove(current);
            count--;
        } else {
            entrySetIterator.remove();
            size--;
        }
        max--;
        expectedModCount = modCount;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:49:08.563

我不会为你写你的迭代器。但基本思想是：

```
public Iterator<T> iterator() {
    return new DenseBagIterator();
}

private class DenseBagIterator implements Iterator<T> {
    // your implementation of the Iterator interface methods goes here
} 
```

您的私有内部类可以访问所有私有数据和创建它的 DenseBag 对象的方法（`DenseBag.this.whatever`如果需要，使用 ），它也可以维护自己的状态数据（因此您可以让多个迭代器并行运行）。

开始编写所有必需的方法，并询问您何时遇到特定问题。:)

# c++ - 通过一个通用数据结构进行双向通信两个线程。设计问题

> ID：15913142
> 
> 赞同：4
> 
> 时间：2013-04-09T21:44:14.697
> 
> 标签：c++, multithreading, visual-studio-2010, boost, boost-thread

我目前有两个线程，一个生产者和一个消费者。生产者是一种静态方法，将数据插入到 Deque 类型的静态容器中，并通过`boost::condition_variable`在 deque 对象中插入对象来通知消费者。然后消费者从 Deque 类型中读取数据并将其从容器中移除。两个线程使用`boost::condition_variable`

这是正在发生的事情的摘要。这是消费者和生产者的代码

```
 //Static Method : This is the producer. Different classes add data to the container using this method
    void C::Add_Data(obj a)
    {
        try
        {       
            int a = MyContainer.size();
            UpdateTextBoxA("Current Size is " + a);
            UpdateTextBoxB("Running"); 
            MyContainer.push_back(a);
            condition_consumer.notify_one(); //This condition is static member
            UpdateTextBoxB("Stopped");                 
        }
        catch (std::exception& e)
        {
            std::string err = e.what();
        }
    }//end method

    //Consumer Method - Runs in a separate independent thread
    void C::Read_Data()
    {
        while(true)
        {
            boost::mutex::scoped_lock lock(mutex_c);
            while(MyContainer.size()!=0)
            {
                try
                {
                    obj a = MyContainer.front();
                    ....
                    ....
                    ....
                    MyContainer.pop_front();
                }
                catch (std::exception& e)
                {
                    std::string err = e.what();
                }
            }
            condition_consumer.wait(lock);
        }

    }//end method 
```

现在插入到`Deque`类型对象中的对象非常快，大约每秒 500 个对象。运行时我注意到 TextBoxB 始终处于“停止”状态，而我相信它应该在“运行”和“停止”之间切换。加上很慢。关于我可能没有考虑过并且可能做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:42:35.597

1）您应该`MyContainer.push_back(a);`在互斥锁下进行 - 否则您会得到**数据竞争**，这是未定义的行为（+您可能也需要`MyContainer.size();`通过互斥锁进行保护，具体取决于它的类型和您使用的 C++ISO/编译器版本）。

2)`void C::Read_Data()`应该是：

```
void C::Read_Data()
{
    scoped_lock slock(mutex_c);
    while(true) // you may also need some exit condition/mechanism
    {
        condition_consumer.wait(slock,[&]{return !MyContainer.empty();});
        // at this line MyContainer.empty()==false and slock is locked
        // so you may pop value from deque
    }
} 
```

3）您正在混合**并发队列**的逻辑与**生产/消费**的逻辑。相反，您可以将**并发队列**部分隔离到独立实体：

[**现场演示**](http://liveworkspace.org/code/2vnyTR)

```
// C++98
template<typename T>
class concurrent_queue
{
    queue<T> q;
    mutable mutex m;
    mutable condition_variable c;
public:
    void push(const T &t)
    {
        (lock_guard<mutex>(m)),
            q.push(t),
            c.notify_one();
    }
    void pop(T &result)
    {
        unique_lock<mutex> u(m);
        while(q.empty())
            c.wait(u);
        result = q.front();
        q.pop();
    }
}; 
```

* * *

> 感谢您的回复。你能解释一下条件等待语句中的第二个参数吗`[&]{return !MyContainer.empty();}`

有第二个版本的[condition_variable::wait](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref.condition_variable.wait_predicate)将谓词作为第二个参数。它基本上在谓词为假时等待，有助于“忽略”[虚假的唤醒](http://en.wikipedia.org/wiki/Spurious_wakeup)。

`[&]{return !MyContainer.empty();}`- 这是[lambda 函数](http://en.cppreference.com/w/cpp/language/lambda)。这是 C++11 的新特性——它允许“就地”定义函数。如果您没有 C++11，那么只需制作独立谓词或使用`wait`带有手动 while 循环的单参数版本：

```
while(MyContainer.empty()) condition_consumer.wait(lock); 
```

* * *

> 你的第三点中的一个问题是你建议我应该隔离整个队列，而我添加到队列的方法是静态的，并且消费者（队列阅读器）永远在一个单独的线程中运行。你能告诉我为什么这是我设计中的一个缺陷吗？

“永远运行”或`static`. `static concurrent_queue<T> member`如果您的设计需要，您甚至可以制作。

缺陷是多线程同步与其他类型的工作相结合。但是，当您拥有**concurrent_queue**时- 所有同步都在该原语中被隔离，并且**生成/**使用数据的代码不会被锁和等待污染：

```
concurrent_queue<int> c;
thread producer([&]
{
    for(int i=0;i!=100;++i)
        c.push(i);
});
thread consumer([&]
{
    int x;
    do{
        c.pop(x);
        std::cout << x << std::endl;
    }while(x!=11);
});
producer.join();
consumer.join(); 
```

如您所见，没有“手动”同步`push/pop`，并且代码更清晰。

此外，当您以这种方式解耦组件时 - 您可以单独测试它们。此外，它们变得更加可重用。

# java - 将 Hibernate Query.list() 转换为 List 的“正确”方法是什么 ?

> ID：15913150
> 
> 赞同：91
> 
> 时间：2013-04-09T21:44:34.707
> 
> 标签：java, hibernate, generics

我是 Hibernate 的新手，我正在编写一个简单的方法来返回与特定过滤器匹配的对象列表。`List<Foo>`似乎是一种自然的返回类型。

无论我做什么，我似乎都无法让编译器满意，除非我使用丑陋的`@SuppressWarnings`.

```
import java.util.List;
import org.hibernate.Query;
import org.hibernate.Session;

public class Foo {

    public Session acquireSession() {
        // All DB opening, connection etc. removed,
        // since the problem is in compilation, not at runtime.
        return null;
    }

    @SuppressWarnings("unchecked") /* <----- */

    public List<Foo> activeObjects() {
        Session s = acquireSession();
        Query   q = s.createQuery("from foo where active");
        return (List<Foo>) q.list();
    }
} 
```

**我想摆脱那个`SuppressWarnings`**。但如果我这样做，我会收到警告

```
Warning: Unchecked cast from List to List<Foo> 
```

（我可以忽略它，但我不想一开始就得到它），如果我删除泛型以符合`.list()`返回类型，我会收到警告

```
Warning: List is a raw type. References to generic type List<E>
should be parameterized. 
```

我注意到`org.hibernate.mapping` *确实*声明了一个`List`; 但它完全是一种不同的类型 -`Query`返回 a `java.util.List`, 作为原始类型。我觉得奇怪的是最近的 Hibernate (4.0.x) 不会实现参数化类型，所以我怀疑是我做错了什么。

它看起来很像[Cast Hibernate result to a list of objects](https://stackoverflow.com/questions/4864093/cast-hibernate-result-to-a-list-of-objects)，但在这里我没有“硬”错误（系统知道 Foo 类型，我没有使用 SQLQuery 而是直接查询）。所以没有快乐。

我也看过[Hibernate Class Cast Exception](https://stackoverflow.com/questions/10754777/hibernate-class-cast-exception)，因为它看起来很有希望，但后来我意识到我实际上并*没有*得到任何`Exception`......我的问题只是一个警告 - 一种编码风格，如果你愿意的话。

jboss.org 上的文档、Hibernate 手册和一些教程似乎没有*如此*详细地涵盖该主题（或者我没有在正确的地方搜索？）。当他们确实进入细节时，他们使用即时铸造 - 而这在官方 jboss.org 网站上没有的教程上，所以我有点谨慎。

代码，一旦编译，运行没有*明显*的问题......我知道......但是；结果是预期的。

所以：我这样做对吗？我错过了一些明显的东西吗？是否有“官方”或“推荐”*的方式来做到这一点*？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-09T21:51:03.497

简短的回答`@SuppressWarnings`是正确的方法。

长答案，Hibernate`List`从该`Query.list`方法返回一个原始值，请参见[此处](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Query.html#list())。这不是 Hibernate 的错误或可以解决的问题，查询返回的类型在编译时是*未知的。*

因此，当你写

```
final List<MyObject> list = query.list(); 
```

您正在从`List`to进行不安全的演员阵容`List<MyObject>`- 这是无法避免的。

您无法安全地进行演员阵容，因为其中`List` *可能*包含任何东西。

使错误消失的唯一方法是更加丑陋

```
final List<MyObject> list = new LinkedList<>();
for(final Object o : query.list()) {
    list.add((MyObject)o);
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-03-09T18:28:06.913

解决方法是改用 TypedQuery。当从 EntityManager 创建查询时，改为这样调用它：

```
TypedQuery<[YourClass]> query = entityManager.createQuery("[your sql]", [YourClass].class);
List<[YourClass]> list = query.getResultList(); //no type warning 
```

这也适用于命名查询、本机命名查询等。相应的方法与返回原始查询的方法具有相同的名称。只要您知道返回类型，只需使用它而不是查询。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-07T10:56:14.047

要回答您的问题，没有“正确的方法”可以做到这一点。现在，如果它只是困扰您的警告，避免其扩散的最佳方法是将`Query.list()`方法包装到 DAO 中：

```
public class MyDAO {

    @SuppressWarnings("unchecked")
    public static <T> List<T> list(Query q){
        return q.list();
    }
} 
```

这样你就可以`@SuppressWarnings("unchecked")`只使用一次。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T22:00:54.417

您可以使用以下解决方法避免编译器警告：

```
List<?> resultRaw = query.list();
List<MyObj> result = new ArrayList<MyObj>(resultRaw.size());
for (Object o : resultRaw) {
    result.add((MyObj) o);
} 
```

但是这段代码存在一些问题：

*   创建了多余的 ArrayList
*   对查询返回的所有元素进行不必要的循环
*   更长的代码。

而且区别只是表面上的，所以在我看来，使用这样的解决方法是毫无意义的。

您必须忍受这些警告或压制它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-15T20:05:09.650

唯一对我有用的方法是使用迭代器。

```
Iterator iterator= query.list().iterator();
Destination dest;
ArrayList<Destination> destinations= new ArrayList<>();
Iterator iterator= query.list().iterator();
    while(iterator.hasNext()){
        Object[] tuple= (Object[]) iterator.next();
        dest= new Destination();
        dest.setId((String)tuple[0]);
        dest.setName((String)tuple[1]);
        dest.setLat((String)tuple[2]);
        dest.setLng((String)tuple[3]);
        destinations.add(dest);
    } 
```

使用我发现的其他方法，我遇到了演员问题

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-11T08:23:35.397

```
List<Person> list = new ArrayList<Person>();
Criteria criteria = this.getSessionFactory().getCurrentSession().createCriteria(Person.class);
for (final Object o : criteria.list()) {
    list.add((Person) o);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-05T23:36:49.567

您使用这样的 ResultTransformer：

```
public List<Foo> activeObjects() {
    Session s = acquireSession();
    Query   q = s.createQuery("from foo where active");
    q.setResultTransformer(Transformers.aliasToBean(Foo.class));
    return (List<Foo>) q.list();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-20T07:41:36.183

只是使用**变形金刚**它对我不起作用我得到了类型转换异常。

`sqlQuery.setResultTransformer(Transformers.aliasToBean(MYEngityName.class))` 不起作用，因为我在返回列表元素中得到了对象数组，而不是列表元素的固定 MYEngityName 类型。

当我进行以下更改时，它对我有用当我添加了`sqlQuery.addScalar(-)`每个选定的列及其类型，对于特定的字符串类型列，我们不必映射它的类型。喜欢`addScalar("langCode");`

而且我已经将 MYEngityName 与 NextEnity 连接起来，我们不能只`select *`在查询中提供返回列表中的对象数组。

下面的代码示例：

```
session = ht.getSessionFactory().openSession();
                String sql = new StringBuffer("Select txnId,nft.mId,count,retryReason,langCode FROM  MYEngityName nft INNER JOIN NextEntity m on nft.mId  =  m.id where nft.txnId < ").append(lastTxnId)
                       .append(StringUtils.isNotBlank(regionalCountryOfService)? " And  m.countryOfService in ( "+ regionalCountryOfService +" )" :"")
                       .append(" order by nft.txnId desc").toString();
                SQLQuery sqlQuery = session.createSQLQuery(sql);
                sqlQuery.setResultTransformer(Transformers.aliasToBean(MYEngityName.class));
                sqlQuery.addScalar("txnId",Hibernate.LONG)
                        .addScalar("merchantId",Hibernate.INTEGER)
                        .addScalar("count",Hibernate.BYTE)
                        .addScalar("retryReason")
                        .addScalar("langCode");
                sqlQuery.setMaxResults(maxLimit);
                return sqlQuery.list(); 
```

它可能对某人有所帮助。以这种方式为我工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-21T18:39:21.037

正确的方法是使用 Hibernate Transformers：

```
public class StudentDTO {
private String studentName;
private String courseDescription;

public StudentDTO() { }  
...
} 
```

.

```
List resultWithAliasedBean = s.createSQLQuery(
"SELECT st.name as studentName, co.description as courseDescription " +
"FROM Enrolment e " +
"INNER JOIN Student st on e.studentId=st.studentId " +
"INNER JOIN Course co on e.courseCode=co.courseCode")
.setResultTransformer( Transformers.aliasToBean(StudentDTO.class))
.list();

StudentDTO dto =(StudentDTO) resultWithAliasedBean.get(0); 
```

遍历 Object[] 是多余的，并且会产生一些性能损失。您可以在此处找到有关变压器使用的详细信息： [HQL 和 SQL 的变压器](http://in.relation.to/2006/03/17/hibernate-32-transformers-for-hql-and-sql/)

如果您正在寻找更简单的解决方案，您可以使用开箱即用的地图转换器：

```
List iter = s.createQuery(
"select e.student.name as studentName," +
"       e.course.description as courseDescription" +
"from   Enrolment as e")
.setResultTransformer( Transformers.ALIAS_TO_ENTITY_MAP )
.iterate();

String name = (Map)(iter.next()).get("studentName"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-13T17:02:56.220

在一个项目中，我是一名顾问，我遇到了这个问题。查看解决方案：
首先，我创建了以下方法：

```
protected <T> MyTypedQuery<T> createNamedAliasQuery(final String queryName, final Class<T> type) {  
    final Query q = getSafeEntityManager().createNamedQuery(queryName);
    q.unwrap(org.hibernate.Query.class)
        .setResultTransformer(Transformers.aliasToBean(type));  
    return new MyTypedQuery<T>(q); 
} 
```

其次，我创建了一个 MyTypedQuery，它看起来像一个包装器，如下所示：

```
public class MyTypedQuery<R> implements TypedQuery<R> {
    private Query q;

    public MyTypedQuery(Query q) {
        this.q = q;
    }

    @Override
    public int executeUpdate() {
        return this.q.executeUpdate();
    }

    @Override
    public int getFirstResult() {
        return this.q.getFirstResult();
    }

    @Override
    public FlushModeType getFlushMode() {
        return this.q.getFlushMode();
    }

    @Override
    public Map<String, Object> getHints() {
        return this.q.getHints();
    }

    @Override
    public LockModeType getLockMode() {
        return this.q.getLockMode();
    }

    @Override
    public int getMaxResults() {
        return this.q.getMaxResults();
    }

    @Override
    public Parameter<?> getParameter(String arg0) {
        return this.q.getParameter(arg0);
    }

    @Override
    public Parameter<?> getParameter(int arg0) {
        return this.q.getParameter(arg0);
    }

    @SuppressWarnings("unchecked")
    @Override
    public <T> Parameter<T> getParameter(String arg0, Class<T> arg1) {
        return (Parameter<T>) this.q.getParameter(arg0);
    }

    @Override
    public <T> Parameter<T> getParameter(int arg0, Class<T> arg1) {
        return (Parameter<T>) this.q.getParameter(arg0, arg1);
    }

    @Override
    public <T> T getParameterValue(Parameter<T> arg0) {
        return (T) this.q.getParameterValue(arg0);
    }

    @Override
    public Object getParameterValue(String arg0) {
        return this.q.getParameterValue(arg0);
    }

    @Override
    public Object getParameterValue(int arg0) {
        return this.q.getParameterValue(arg0);
    }

    @Override
    public Set<Parameter<?>> getParameters() {
        return this.q.getParameters();
    }

    @Override
    public boolean isBound(Parameter<?> arg0) {
        return this.q.isBound(arg0);
    }

    @Override
    public <T> T unwrap(Class<T> arg0) {
        return this.q.unwrap(arg0);
    }

    @SuppressWarnings("unchecked")
    @Override
    public List<R> getResultList() {
        return (List<R>) this.q.getResultList();
    }

    @SuppressWarnings("unchecked")
    @Override
    public R getSingleResult() {
        return (R) this.q.getSingleResult();
    }

    @Override
    public TypedQuery<R> setFirstResult(int arg0) {
        this.q.setFirstResult(arg0);
        return this;
    }

    @Override
    public TypedQuery<R> setFlushMode(FlushModeType arg0) {
        this.q.setFlushMode(arg0);
        return this;
    }

    @Override
    public TypedQuery<R> setHint(String arg0, Object arg1) {
        this.q.setHint(arg0, arg1);
        return this;
    }

    @Override
    public TypedQuery<R> setLockMode(LockModeType arg0) {
        this.q.setLockMode(arg0);
        return this;
    }

    @Override
    public TypedQuery<R> setMaxResults(int arg0) {
        this.q.setMaxResults(arg0);
        return this;
    }

    @Override
    public <T> TypedQuery<R> setParameter(Parameter<T> arg0, T arg1) {
        this.q.setParameter(arg0, arg1);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(String arg0, Object arg1) {
        this.q.setParameter(arg0, arg1);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(int arg0, Object arg1) {
        this.q.setParameter(arg0, arg1);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(Parameter<Calendar> arg0, Calendar arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(Parameter<Date> arg0, Date arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(String arg0, Calendar arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(String arg0, Date arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(int arg0, Calendar arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }

    @Override
    public TypedQuery<R> setParameter(int arg0, Date arg1, TemporalType arg2) {
        this.q.setParameter(arg0, arg1, arg2);
        return this;
    }
} 
```

第三（也是最后一个），使用很简单，例如：

```
final List<Car> list = 
            createNamedAliasQuery("your-named-query", Car.class)
                .setParameter("idCar", idCar)
                .setParameter("idModel", idModel)
                .getResultList(); 
```

请注意，@SuppressWarnings("unchecked") 在我们的 MyTypedQuery 中出现一次，而不是在每次使用中。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-02-27T21:07:19.167

[我在这里](http://learningviacode.blogspot.com.uy/2013/04/sessioncreatesqlquery.html)找到了最好的解决方案，这个问题的关键是 **addEntity**方法

```
public static void testSimpleSQL() {
    final Session session = sessionFactory.openSession();
    SQLQuery q = session.createSQLQuery("select * from ENTITY");
    q.addEntity(Entity.class);
    List<Entity> entities = q.list();
    for (Entity entity : entities) {
        System.out.println(entity);
    }
} 
```

# mips - MIPS j & beq 指令的目标操作数代表什么？

> ID：15913151
> 
> 赞同：1
> 
> 时间：2013-04-09T21:44:36.440
> 
> 标签：mips

您能否告诉我以下两条 MIPS 指令的目标操作数代表什么：

```
j target  
beq $t0,$t1,target 
```

目标代表指令位移或字节位移的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:57:58.007

在汇编中，目标只是源代码的标签。汇编时，`j`无条件跳转到**指令 * 4**编码的有效地址。这是因为每条指令占用 4 个字节，并且每条指令都必须是字对齐的，所以指令的编码不会存储目标地址的两个低位（始终为 00）。

分支指令执行相对跳转。在机器代码中，指令存储（在 A2-compliment 中）要移动的字数，从要执行的下一条指令的地址开始计数。

用你的行话来说，它们都是“指令置换”。

# joomla - 如何将基本 target="_self" 添加到我的 Joomla 站点的标题中？

> ID：15913154
> 
> 赞同：0
> 
> 时间：2013-04-09T21:44:44.720
> 
> 标签：joomla, head

我正在尝试为`target="_self"`我的 Joomla! 添加一个简单的基础！2.5 站点的头部 HTML 文件。我在哪里可以找到那个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:48:55.870

Joomla！使用模板来格式化它的页面，它预装了几个模板，您可以从各种库中[安装新模板或通过](http://docs.joomla.org/Installing_a_template)[创建模板](http://docs.joomla.org/Creating_a_basic_Joomla!_template)来安装。

您需要查看活动模板名称`/templates/your-template/`所在的目录。`your-template`

根据模板的复杂性，您可能会在`index.php`文件或包含的子文件中找到 head 部分。

# sitecore - Sitecore 多层标记

> ID：15913156
> 
> 赞同：0
> 
> 时间：2013-04-09T21:44:46.763
> 
> 标签：sitecore, taxonomy

我正在为我的客户开发一些标记基础设施。需要对以下内容进行标记 - 地区、国家、城市和办公地点。

内容树中的项目只能标记为地区、国家或城市。但上述标签之间也需要存在如下关系

地区 --> 国家 --> 城市 --> 办公地点。

城市和办公地点之间的关系可以是多对多的。

我可以通过拥有 4 个单独的列表来追求上述关系——地区、国家、城市和办事处各一份。

然后我可以遵循两种标记模式

任何一个

在办公室标签项目上，可以有一个城市标签的多列表字段，并且可以为办公室选择多个城市。然后城市标签可以有一个用于选择国家的多列表字段，而国家标签可以有一个用于区域的多列表。区域项目将没有任何字段。

或者

一个地区标签可以有一个多列表字段来选择国家，一个国家标签可以有一个字段来选择城市，一个城市可以有一个用于办公室的多列表字段，而办公室不会有任何字段。

哪种方法更可取，为什么？

我不想做一个层次结构，因为这不适合多对多关系问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:55:07.987

如果我了解您的情况，感觉第二种（自上而下）方法是您应该采用的方法。

我会这样做有几个原因：

1.  在您的第一个选项中，您提到办公室将有多个城市的多列表。一个办公地点真的会有多个城市吗？我认为一个办公地点应该只有一个与之关联的城市，这将指向我自上而下的方法。
2.  自上而下的方法在逻辑上更有意义。查看您描述标记关系的方式：

> 地区 --> 国家 --> 城市 --> 办公地点。

您已经在以这种方式描述它，我认为以这种方式构建它会更有意义。

# c++ - 不运行 errorLNK1120: 1 unresolved externals VS

> ID：15913157
> 
> 赞同：0
> 
> 时间：2013-04-09T21:44:50.237
> 
> 标签：c++, visual-c++

我有这两个简单的类。我制作了一个 win32 应用程序，但是当我运行它时，它显示了这个错误：

> 错误 2 error LNK1120: 1 unresolved externals C:\Users\D\Documents\Visual Studio Projects\LR3 SYSPROG\Debug\LR3 SYSPROG.exe 1 1 LR3 SYSPROG

我已经尝试过在它正常工作之前运行它，即使没有触摸它，我是怎么搞砸的？

```
 class Liquid
{
private:
    char *name;
    int density;
public:
    void CLperenaznachenie();
    //virtual void spiling();
public:
    char* get_name() const;
    void set_name(char const* new_name);
    int get_density() const;
    void set_density(int new_density);
};
class Alcohol:public Liquid
{
private:
    int fortress; 
public:
    void CAperenaznachenie();
    //void spiling(){
    //new stuff
    //};
public:
    int get_fortress() const;
    void set_fortress(int new_fortress);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:06:07.553

我已经通过使其成为控制台应用程序并添加 main() 函数来解决它，这就是我所需要的。

# ruby-on-rails - 对我的 Rails 表进行排序

> ID：15913158
> 
> 赞同：0
> 
> 时间：2013-04-09T21:44:54.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的控制器：

```
def index
  @unique_bug = Rating.find_by_sql("SELECT bug FROM ratings WHERE bug <> '' GROUP BY bug")
end 
```

评级模型：

```
 def self.metrics_bug_count(bug)
    count = where(bug:"#{bug}").count
    total = Rating.find_by_sql("SELECT bug FROM ratings WHERE bug <> ''").count
    percentage = (count.to_f/total.to_f * 100)
    return count, percentage
  end 
```

我的观点：

```
 <table class="table table-bordered">
  <tr>
  <th><h3>Bug</h3></th>
  <th><h3>Total Occurrences</h3></th>
  <th><h3>Frequency</h3></th>  
  </tr>
  <tr>
  <%@unique_bug.each do |rating| %>
  <% count, percentage = Rating.metrics_bug_count(rating.bug)%>
  <td><p class="text-center"><h4><%= rating.bug.capitalize %></h4></p></td>
  <td><p class="text-center"><h4><%= count %></h4></p></td>
  <td><p class="text-center"><h4><%= number_to_percentage(percentage, :precision => 2)%></h4></p></td>
  </tr>
  <%end%>
  </table> 
```

如何使每一行（Bug、Total、Frequency）都可以排序？我在可排序表上观看[Railscast](http://railscasts.com/episodes/228-sortable-table-columns?view=asciicast)剧集，但是那里的排序是在控制器中完成的。如何使用在我的模型中执行的更复杂的查找对我的表进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:02:50.003

您可以使用 .order 例如，Rating.order("count DESC")。此外，我认为您可以避免使用 find_by_mysql 并使用一些 rails 方法来进行更易读和更容易的查询。您也可以使用 .uniq 获得唯一的 1。

尝试看看 [http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# javascript - VML中的Raphael js图像渲染很慢

> ID：15913169
> 
> 赞同：2
> 
> 时间：2013-04-09T21:45:20.223
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7, raphael, vml

我正在使用 Raphaeljs ( [http://raphaeljs.com/](http://raphaeljs.com/) ) 来渲染具有文本的图像。使用 SVG 在 IE9 和 Firefox 上渲染图像非常快，但在使用 VML 的 IE8 和 7 中，图像内容出现在纸上之前存在延迟。

在 IE8 和 7 中，它给人的印象是页面是空白的，并且在等待更多（有时 3-4 秒）之后，图像内容就会出现。

当图像完全渲染时，通过修改 Raphael 代码或其他方式，我能做些什么来获得回调？然后我可以使用这个回调来显示/隐藏持有人 div 上的微调器。

我试图在 VML 部分中的一些 Raphael 函数之后放置控制台输出语句，以查看是否有任何特定函数在完成时可以指示渲染完成。但是即使在所有这些都完成运行之后，图像的渲染也会发生。

以下是我正在使用的代码的大纲：

```
loadimg = new Image();
imgHolder = paper.image("", -1, -1, 1, 1 );
loadimg.onload = function(imgHolder, xpos, ypos, width, height) {
    return function() {
        imgHolder.attr({ x: xpos, y: ypos, width: width, height: height });
        imgHolder.attr( { src: this.src } );
    }
} ( imgHolder, 0, 0, imageWidth, imageHeight );
loadimg.src = pageurl; 
```

# javascript - Phantom JS 同步 AJAX 请求：NETWORK_ERR: XMLHttpRequest Exception 101

> ID：15913170
> 
> 赞同：21
> 
> 时间：2013-04-09T21:45:31.733
> 
> 标签：javascript, ajax, xmlhttprequest, phantomjs

我正在进行同步 ajax 调用（ ajax settings async: false ）。这很好用。

现在我正在尝试在 phantomJS 中为此编写一个自动化测试，但我收到了这个错误

```
NETWORK_ERR: XMLHttpRequest Exception 101 
```

我检查了我的服务日志，似乎服务没有收到任何请求。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T22:35:29.420

`--web-security=no`尝试在运行脚本时使用命令行选项禁用网络安全。( `phantomjs --web-security=no yourscript.js`)

从 PhantomJS 参考（[http://phantomjs.org/api/command-line.html](http://phantomjs.org/api/command-line.html)）：

"`--web-security=[true|false]`启用网络安全并禁止跨域 XHR（默认为 true）。也接受：`[yes|no]`

# c# - 如何进行基于货币的号码验证？

> ID：15913176
> 
> 赞同：0
> 
> 时间：2013-04-09T21:46:17.213
> 
> 标签：c#, currency, cultureinfo, culture, currency-formatting

我有一个 Winforms 应用程序，其中有一个组合框和一个文本框。组合框的货币符号如下：

```
USD
GBP
CAD
AUD
JPY
EUR
ISK
PLZ
TRL 
```

ETC ..

用户首先从上面选择一个货币符号，然后在文本框中输入一个值，例如`$32.50`, 等。

我需要根据他在组合框中选择的货币来验证他在文本框中键入的字符串。每种货币都有自己的货币价值书写方式。

例如，如果用户选择，`USD`那么所有这些类型的字符串都应该被报告为有效：

```
223.3
2244.44
$3,754.24 
```

但是，如果用户选择`TRL`（土耳其里拉），其中符号放在数值*之后（在其右侧），那么这些应该是有效的：*

```
223.3
2244.44
3,754.24 TL 
```

我怎样才能实现这种验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:35:27.453

由于您已经知道所选语言，因此最简单的解决方案是不验证符号。在文本框的每一侧放置一个空标签，并根据所选货币的符号分配它们。现在你只需要担心小数部分，这很容易。

# c# - 在控制台应用程序 C# 中捕获异常

> ID：15913177
> 
> 赞同：0
> 
> 时间：2013-04-09T21:46:17.737
> 
> 标签：c#, console

我有一个用 C# 编写的控制台应用程序。此应用程序作为自动化运行以测试 Web 服务。流动：

1.  登录网络共享（模拟用户）
2.  将 mp3 文件复制到本地磁盘
3.  将mp3转换为wav
4.  下采样
5.  修整波
6.  从 wav 中提取一些有用的数据
7.  发送http请求
8.  删除本地文件
9.  写一些东西到 tsv

该应用程序将运行好几个小时（通常需要大约 24 小时才能完成测试）。但每隔一段时间我会收到以下消息：“应用程序已停止工作。我一直在调试模式下运行这是 VS 2012，所以，我可以看到哪一行抛出任何错误。问题是，我无法捕捉抛出错误的行（或方法）。我最初认为域控制器由于电源设置而导致此问题。

我如何才能准确地捕捉到堆栈中冒泡的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:48:56.883

您可以转到运行控制台应用程序的操作系统上的事件查看器，然后单击“应用程序”。事件查看器记录并显示在操作系统上运行的任何应用程序上引发的所有异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:52:22.433

所有这些都在某种循环中运行吗？还是在计时器上？

也许在循环体或运行所有代码的方法周围放置一个 try-catch，添加您选择的日志框架（log4net 或 nlog 看起来不错），然后在 catch 日志中记录异常。大多数日志框架允许您包含异常并将包括堆栈跟踪等。

在整个过程中放置​​调试日志也有助于缩小发生的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:57:20.947

我建议您使用日志记录框架。

我几乎在所有应用程序中都使用[log4net](http://logging.apache.org/log4net/)。它的使用和配置非常简单。

```
private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

try
{
    // do whatever
}
catch(Exception ex)
{
     // Log an error with an exception
     log.Error("Exception thrown", ex);
} 
```

通过使用这些库，您可以将日志数据输出到文件、数据库，甚至写入 Windows 事件查看器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:02:11.450

```
try
{
   // your code
}
catch (Exception e)
{
   System.IO.File.WriteAllText(@"Z:\err.txt", e.ToString());
} 
```

请注意，非管理员拒绝访问 Windows 驱动器，因此请替换`Z:`为您的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T22:12:18.203

当您尝试使用已经被垃圾收集的东西时，您似乎会遇到异常代码。处理完之后你还在用吗？

[0xc0000005 的知识库文章](http://support.microsoft.com/kb/2640103)

# android - 多个构造函数和空值

> ID：15913183
> 
> 赞同：0
> 
> 时间：2013-04-09T21:46:39.920
> 
> 标签：android, constructor

1：从一个班级开始测验班：

```
Med.setQuiz(new Quiz(Cat, null)); 
```

测验类：

```
public Quiz(final String category, TextView outputTxt) {
        MyTxt = outputTxt; 
            StartAct(category);
} 
```

2：从另一个班级开始测验班：

```
Quiz MyNewQ = new Quiz(null, Txt); 
```

**首先：我开始使用****StartAct(category);**设置一些值的类。

 ****然后**我再次使用类： **Quiz(null, Txt);** 但是当我使用它时，**StartAct 值设置为 null**。

但我想使用我在第一类 [ *Quiz(Cat, null)* ]中设置的值

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:55:13.760

您可以使用这样的静态值：

```
public class Quiz{

    private static String category;

    public Quiz(final String category, TextView outputTxt) {

            // check category is not null or empty, don't set if it is
            // which means that we must call the constructor with a valid category
            // the first time or perhaps set a default value
            if(category!=null && !category.equals("")){
                Quiz.category = category;
            }
            MyTxt = outputTxt; 
            StartAct(Quiz.category);

    }
} 
```**

# matlab - 如何使用分类器

> ID：15913185
> 
> 赞同：0
> 
> 时间：2013-04-09T21:46:46.717
> 
> 标签：matlab

我想在我的数据特征上使用 svm、knn、adaboost 分类器。我构建了代码，在其中计算了帧差异并计算了特征（[特征值](http://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors)、应变能、势能）......构建了一个 [帧数、特征] 的数组。我尝试将 svm 用作：

```
 Features = data;  % Features array [40, 5]
 class = ones(numFrames-1, 1);  % numFrames=41
 class(1:(fix(numFrames/2))) = -1;
 SVMstruct = svmtrain(Features, class, 'Kernel_Function', 'rbf');
 newclass = svmclassify(SVMstruct, [40 5]);  %Test data 
```

我收到一个错误：

> TEST 和训练数据中的列数必须相等。
> 
> %classperf(cp,newclass); cp'`给出的类的％性能

这个错误的原因是什么？以及如何使用具有此功能集的更多分类器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:25:04.980

我可以从你得到的错误中推断出以下事情。

`svmtrain`这意味着没有错误`size(features)=[40 5]`。错误在最后一行。请参阅 的语法`svmclassify`。您传递了一个测试数据样本，其特征/列数与案例 5) 中的训练数据相同。相反，您传递的是`[40 5]`只有两列的大小。`n`通过行和`5`列的实际测试集。最后一行应该是

```
newclass= svmclassify(SVMstruct,testData); %where size(testData)=[n 5], n indicates how many test samples you have. 
```

# wso2 - 如何向我的客户发送 wso2 esb 错误消息或异常

> ID：15913188
> 
> 赞同：1
> 
> 时间：2013-04-09T21:46:54.677
> 
> 标签：wso2, wso2esb

我在 wso2ESB 中引发了一个错误，以便在客户端控制一些错误，而 esb 控制台显示：

```
ERROR {org.wso2.carbon.identity.entitlement.mediator.EntitlementMediator} -  Error occurred while evaluating the policy {org.wso2.carbon.identity.entitlement.mediator.EntitlementMediator}
org.apache.axis2.AxisFault: Access Denied. Authentication failed - Invalid credentials provided.
...
... 
```

客户端控制台显示：

```
org.apache.axiom.soap.SOAPProcessingException: Transport level information does not match with SOAP Message namespace URI 
```

我在控制台中看到不同的错误，我需要获取 esb 错误消息，以便客户端代码可以捕获相同的错误 esb

此刻，我的序列“故障”配置如下：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="fault" trace="enable">
   <makefault version="soap12">
     <code xmlns:soap12Env="http://www.w3.org/2003/05/soap-envelope" value="soap12Env:Receiver"/>
     <reason xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('ERROR_MESSAGE')"/>
   </makefault>
   <send/>
</sequence> 
```

和我的代理服务的顺序配置如下：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="InSequence" trace="enable">
   <entitlementService remoteServiceUrl="https://localhost:9443/services/" remoteServiceUserName="srxxx" remoteServicePassword="kiytr">
      <onReject/>
      <onAccept/>
      <advice/>
      <obligations/>
   </entitlementService>
   <header xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" name="wsse:Security" action="remove"/>
   <send/>
   <drop/>
</sequence> 
```

如果有人可以帮助我，我已经尝试了几种方法来让我的客户出现错误但没有成功，我将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T04:27:13.090

在您的代理服务中配置一个 faultSequence，如下所示。在您的情况下，您必须在 faultSequence 中使用故障调解器。

```
<faultSequence>
    <makefault version="soap12">
        <code xmlns:soap12Env="http://www.w3.org/2003/05/soap-envelope" value="soap12Env:Receiver"/>
        <reason xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('ERROR_MESSAGE')"/>
    </makefault>
    <send/>
</faultSequence> 
```

有关向客户端发送错误消息所需的更多信息，请使用以下文档

[1] [http://docs.wso2.org/wiki/display/ESB460/Error+Handling+and+Error+Codes](http://docs.wso2.org/wiki/display/ESB460/Error+Handling+and+Error+Codes)

[2] [http://docs.wso2.org/wiki/display/ESB460/Fault+Mediator](http://docs.wso2.org/wiki/display/ESB460/Fault+Mediator)

# internet-explorer - 如何使用 powershell 更改 Internet Explorer 中的设置？

> ID：15913189
> 
> 赞同：1
> 
> 时间：2013-04-09T21:46:57.880
> 
> 标签：internet-explorer, powershell, automation

我们需要能够更改数百台机器上的 Internet Explorer 设置。

我们需要做的改变是：

1.  前往设置
2.  连接
3.  局域网设置
4.  取消选中“自动检测设置”

![在此处输入图像描述](https://i.stack.imgur.com/PGXrR.png)

我知道可以通过以下方式更改设置：

```
set-itemproperty 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet
Settings' -name ProxyEnable -value 1 
```

**如何使用 powershell 更改局域网设置？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:46:52.063

配置此设置的正确方法是在 GPO 中进行配置。（顺便说一句，我认为这个问题更适合 serverfault 而不是 stackoverflow。）

账单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:20:26.100

这样做有点繁琐。您可以查看此链接，它可能会有所帮助：

[Windows 注册表中的哪个键禁用 IE 连接参数“自动检测设置”？](https://stackoverflow.com/questions/1674119/what-key-in-windows-registry-disables-ie-connection-parameter-automatically-det)

另一种方法是在一台服务器上手动进行设置，然后导出以下注册表项并将其导入所有服务器。这将进行所需的更改。

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\DefaultConnectionSettings 
```

# objective-c - 将 UIView 的内容渲染为 OpenGL ES 纹理，但结果只有黑色

> ID：15913190
> 
> 赞同：1
> 
> 时间：2013-04-09T21:47:04.367
> 
> 标签：objective-c, opengl-es

我正在使用 raywenderlich.com [http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures上的教程学习 OpenGL ES](http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures)

当我开始调整示例项目以获取 UIView 的内容作为要渲染的纹理时，结果只是黑屏： ![黑色视图是 OpenGL ES 视图](https://i.stack.imgur.com/m5gxK.png)

黑色视图是 OpenGL ES 视图。

我使用了 Tommy 在这篇文章中发布的代码：[将 UIView 的内容渲染为 OpenGL 纹理](https://stackoverflow.com/questions/4118778/render-contents-of-uiview-as-an-opengl-texture)，这是我的版本：

```
- (GLuint)createTexture:(UIView *)view
{
    size_t width = CGRectGetWidth(view.layer.bounds) * [UIScreen mainScreen].scale;
    size_t height = CGRectGetHeight(view.layer.bounds) * [UIScreen mainScreen].scale;

    GLubyte * texturePixelBuffer = (GLubyte *) calloc(width * height * 4,
                                   sizeof(GLubyte));

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(texturePixelBuffer,
                                                 width, height, 8, width*4, colorSpace, 
                                                 kCGImageAlphaPremultipliedLast | 
                                                 kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    [view.layer renderInContext:context];

    CGContextRelease(context);

    GLuint texName;
    glGenTextures(1, &texName);
    glBindTexture(GL_TEXTURE_2D, texName);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, 
                 GL_UNSIGNED_BYTE, texturePixelBuffer);

    free(texturePixelBuffer);
    return texName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:56:23.180

根据 Open GL ES 2.0 规范，纹理可以是 2 的幂，也可以不是。但是你必须使用

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

启用非二次幂纹理支持。

# .net - WCF ExceptionShielding 错误 ID 与传递给 Handler 的 handlingInstanceId 不匹配

> ID：15913197
> 
> 赞同：56
> 
> 时间：2013-04-09T21:47:19.187
> 
> 标签：.net, wcf, exception, enterprise-library, fault

我在我的服务上装饰了以下内容

```
<ExceptionShielding("MyExceptionPolicyName")> 
```

当抛出错误异常时，我的策略会发现错误并正常登录。它采用 handlingInstance Id 并将其与错误一起记录以供参考。我注意到的是，故障“错误 ID：”中返回的 Guid 与传递给处理 instanceId 的 Guid 不同。

我也尝试过像这样装饰操作

```
<FaultContract(GetType(ValidationFault))> 
```

但这会产生相同的结果。

我想做的是如何捕获“错误 ID：”传递回消费者，以便我可以将其与异常一起记录。*附加信息：异常策略处理程序是一种自定义处理程序，它接受异常，并将其各种属性和数据记录到特定的异常日志数据库模式中。

有谁知道如何做到这一点？

**更新：** 根据@Jay Patel 的评论，我将此添加到我的配置中以启用跟踪

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\Temp\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

然后我执行了一个请求，以获取由异常屏蔽屏蔽的故障响应。故障响应字符串的格式如下：“使用此服务时发生错误。有关详细信息，请联系您的管理员。错误 ID：{GUID}”

然后我查看了跟踪日志，没有发现 GUID 或这个字符串的证据。

这是跟踪日志的[pastebin](http://pastebin.com/jHcamwsW)链接，供任何想在使用 ExceptionShielding 时查看示例的人使用。

**更新2：**

同样，根据@Jay Patel 的评论，添加了这个。我为 maxMessageLog 尝试了 -1 和 max int 值，以确保我在该日志中获得最大量的数据。

```
<diagnostics>
  <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="2147483647" />
</diagnostics> 
```

日志没有帮助。它甚至不包括**任何**接近回答我的问题的内容。

*澄清*一下，以防上面不清楚......我希望能够在返回给客户端的消息中的“错误 ID：”之后捕获 GUID，以便我可以使用异常处理程序记录的异常记录它。通过这种方式，客户可以联系“管理员”，如消息中的错误 ID 所示，并且实际上能够找到一些东西。

这是启用了完整跟踪的[Pastbin](http://pastebin.com/QyAvczJE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T22:58:19.873

根据[http://msdn.microsoft.com/en-us/library/ff649012.aspx](http://msdn.microsoft.com/en-us/library/ff649012.aspx)：

您还可以指定“{Guid}”的来源，以将当前处理实例 ID 添加到故障合同属性。

在您的 .config 文件中：

```
<mappings>
    <add source="{Guid}" name="HandlingInstanceId" />
</mappings> 
```

在您的 ValidationFault FaultContract 中：

```
[DataMember]
public Guid HandlingInstanceId { get; set; } 
```

注意：“{Guid}”源似乎是处理实例 ID 的特殊标记。

另见：[http ://entlib.codeplex.com/discussions/232049](http://entlib.codeplex.com/discussions/232049)

而且，最后 2 个条目：[http ://entlib.codeplex.com/discussions/243558](http://entlib.codeplex.com/discussions/243558)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T10:45:54.090

消息记录会有帮助吗？如果是这样，我猜你的配置中需要这样的东西：

```
<source name ="System.ServiceModel.MessageLogging" 
      switchValue="Verbose, ActivityTracing">        
<listeners>
  <add name="xml" />
</listeners> 
```

请注意这里的源名称是“System.ServiceModel.MessageLogging”而不是“System.ServiceModel”。

有关完整示例，请参阅本文：http: [//msdn.microsoft.com/en-us/library/dd788183.aspx](http://msdn.microsoft.com/en-us/library/dd788183.aspx)

希望这会帮助你。

# javascript - 如何让 JSLint 扫描整个文件？

> ID：15913199
> 
> 赞同：20
> 
> 时间：2013-04-09T21:47:21.060
> 
> 标签：javascript, notepad++, jslint

我正在使用 JSLint 扫描一些 Javascript 代码以查找潜在错误。我正在使用带有 JSLint 插件的 Notepad++。问题是 - 它只是扫描`x%`文件，然后停止。我也取消了*第一个错误时停止*选项，但我得到了相同的结果。仅扫描 rhe 文件的一部分后它仍然停止。有没有办法让 JSLint 扫描整个文件而不是文件的某个*百分比*？

编辑：

我已将`maxerr`选项设置为 10000，但扫描仅在 41 个错误处停止并显示（1% 已扫描）

编辑2：

目前，我的 JSLint 选项如下所示：

`/*jslint indent: 50, maxerr: 10000, passfail: false, safe: true, adsafe: true, debug: true, evil: false, continue: true, css: false, on: false, fragment: false, es5: true, bitwise: true, regexp: false, eqeq: true */`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T21:51:57.617

最大错误数选项默认为 50

> 最大错误`maxerr` 数 报告的最大警告数。（默认为 50）

[您可以在jsLint 网站](http://www.jslint.com/help.html)上查看所有选项。

将它设置为几千，它应该没问题:)

### 更新

这似乎是[变量不在文件顶部的特殊情况](https://stackoverflow.com/questions/4646455/jslint-error-move-all-var-declarations-to-the-top-of-the-function)。您可以尝试设置`undef`或`vars`为真。如果您不喜欢这样，您可以考虑 jsHint，它是 jsLint 的一个分支，旨在更易于配置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-03T05:33:15.687

我遇到了同样的问题，它在达到 2% 左右后就停止了。

似乎 JSLint 不喜欢`for statements`. 在他们的“阅读说明”页面中，它甚至说你不应该使用 for 语句。我知道你不应该使用`for (var x in y)`语句，但我认为这`for (var x = 0; x < array.length; x++)`通常很好。但是 JSLint 不喜欢它，并且会给出“将 vars 移动到函数顶部错误”，然后停止扫描其余代码。

所以为了解决这个问题，我只是移动了我在代码中的两个 for 语句，然后它扫描得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T06:19:32.053

停止时的实际错误消息是什么？它完全有可能只是遇到无法通过的解析错误。在这种情况下，您的补救措施是在 JSLint 处理整个文件之前修复它所抱怨的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-05T17:36:24.777

**JSLint**通常会在检查整个文档之前停止。此外，当前版本的**JSLint**`maxerr`中不存在该选项。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T21:52:30.373

它停止是因为它达到了 maxerr JSLint 设置。您可以增加此设置。**

# google-chrome-extension - Facebook js sdk 未在我的 Chrome 扩展程序中执行

> ID：15913200
> 
> 赞同：2
> 
> 时间：2013-04-09T21:47:24.733
> 
> 标签：google-chrome-extension, facebook-javascript-sdk

截至this question [Can't load facebook js sdk from Chrome extension](https://stackoverflow.com/questions/13440882/cant-load-facebook-js-sdk-from-chrome-extension) 我尝试基本相同的事情

背景.js

```
(function(d, s, id, debug){
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) {return;}
js = d.createElement(s); js.id = id;
js.src = "facebook-all.js";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk', /*debug* / false));

window.fbAsyncInit = function() {
// init the FB JS SDK
alert('INIT SDK');
FB.init({
  appId      : 'xxxxxxxxxxx', // App ID from the App Dashboard
  //channelUrl : '', // Channel File for x-domain communication
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true,  // parse XFBML tags on this page?
});
FB.login(function(response) {
   if (response.authResponse) {
     alert('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
         alert('connected ' + JSON.stringify(response, null, 4));
     });
   } else {
     alert('User cancelled login or did not fully authorize.');
   }
 });
}; 
```

清单.json

```
{
"name": "A browser action with no icon",
"version": "1.0",
"background": { "scripts":["background.js"]},
"permissions": [
"tabs",
"https://*/*",
],
"content_security_policy": "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ chrome-extension-resource: 'self' 'unsafe-eval' ",
"manifest_version": 2
} 
```

但我在控制台上收到以下错误：

```
The "fb-root" div has not been created, auto-creating all.js:52

Refused to apply inline style because it violates the following Content Security Policy directive: "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ 'self' 'unsafe-eval'". Note that 'style-src' was not explicitly set, so 'default-src' is used as a fallback.

Refused to execute JavaScript URL because it violates the following Content Security Policy directive: "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ 'self' 'unsafe-eval'". Note that 'script-src' was not explicitly set, so 'default-src' is used as a fallback.

Refused to execute JavaScript URL because it violates the following Content Security Policy directive: "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ 'self' 'unsafe-eval'". Note that 'script-src' was not explicitly set, so 'default-src' is used as a fallback.

Refused to load the frame 'http://static.ak.facebook.com/connect/xd_arbiter.php?version=21#channel=f30…F_generated_background_page.html%3Ffb_xd_fragment%23xd_sig%3Df2c0b5eef8%26' because it violates the following Content Security Policy directive: "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ 'self' 'unsafe-eval'". Note that 'frame-src' was not explicitly set, so 'default-src' is used as a fallback.

Refused to load the frame 'https://www.facebook.com/dialog/oauth?client_id=xxxxxxxxxxx&response_type=…4%26domain%3D<extension-id>%26relation%3Dparent&sdk=joey' because it violates the following Content Security Policy directive: "default-src https://connect.facebook.net/ https://s-static.ak.facebook.com/connect/ 'self' 'unsafe-eval'". Note that 'frame-src' was not explicitly set, so 'default-src' is used as a fallback. 
```

我知道不再允许“不安全内联”，那么有没有办法让 chrome 扩展中的 fs-jssdk 工作？

任何帮助将不胜感激！

obs：我可以直接在浏览器中从 FB 获取结果，但不能在扩展中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T23:10:07.730

您可以通过以下方式启用样式和框架：

```
"content_security_policy": "default-src 'self' 'unsafe-eval' chrome-extension-resource: https://*.facebook.net https://*.facebook.com; style-src 'self' 'unsafe-inline' chrome-extension-resource: https://*.facebook.net https://*.facebook.com; frame-src 'self' 'unsafe-inline' chrome-extension-resource: https://*.facebook.net https://*.facebook.com", 
```

但我不知道如何摆脱`Refused to load the frame 'http://static.ak.facebook.com(...)`错误。Google chrome 的 CSP 不允许 http:// 域，没有它就没有框架内通信，因此例如自动调整大小将不起作用。

# php - 我无法使用 php 将我的数据发布到 web 服务

> ID：15913201
> 
> 赞同：0
> 
> 时间：2013-04-09T21:47:30.557
> 
> 标签：php, web-services, soap

我想使用下面的网络服务。

[http://www.ttmarkaindirimi.com:8063/DiscountIntegrationPointService](http://www.ttmarkaindirimi.com:8063/DiscountIntegrationPointService)

```
$options = array(
            'soap_version' => SOAP_1_1,
            'exceptions' => true,
            'trace' => 1,
            'cache_wsdl' => WSDL_CACHE_NONE
    );

$client = new SoapClient('http://212.175.9.207:8063/DiscountIntegrationPointService?wsdl',$options);

$validateData = array(
        'Amount'        => 1000,
        'ApplicationId'     => 6,
        'ChannelID'     => 5,
        'CurrencyCode'      => 949,
        'Date'          => '09.04.2013T12:00:00',
        'DiscountCode'      => 'XXX',
        'EmailAddress'      => 'YYY',
        'Password'      => 'ZZZ',
        'RefCode'       => 0,
        'RewardID'      => 1009
        );      

    try {
        $return = $client->DiscountCodeValidation($validateData);
            //$return = $client->__soapCall('DiscountCodeValidation', array('DiscountCodeValidation' => $validateData));

    } catch (SoapFault $exc) {

            pre($exc->getMessage());
            pre($client->__getLastRequestHeaders());
            pre($client->__getLastRequest());
            echo "Response:\n" . $client->__getLastResponse() . "\n";           
    } 
```

但是没有要求。

我应该如何发送请求？

谢谢你。

这些是函数、响应和请求。

```
Array
(
[0] => DiscountCodeValidationResponse DiscountCodeValidation(DiscountCodeValidation $parameters)
[1] => DiscountCodeConfirmedResponse DiscountCodeConfirmed(DiscountCodeConfirmed $parameters)
[2] => DiscountCodeInquiryResponse DiscountCodeInquiry(DiscountCodeInquiry $parameters)
)

stdClass Object
(
    [DiscountCodeValidationResult] => stdClass Object
    (
        [DiscountAmount] => 0
        [DiscountRate] => 0
        [ResponseCode] => 1
        [ResponseMessage] => -
    )

)

<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tempuri.org/"><SOAP-ENV:Body><ns1:DiscountCodeValidation/></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

POST /DiscountIntegrationPointService/http HTTP/1.1 主机：212.175.9.207:8063 连接：Keep-Alive 用户代理：PHP-SOAP/5.3.17 内容类型：text/xml；charset=utf-8 SOAPAction：“ [http://tempuri.org/IDiscountIntegrationPointService/DiscountCodeValidation](http://tempuri.org/IDiscountIntegrationPointService/DiscountCodeValidation) ”内容长度：230

001- HTTP/1.1 200 OK 内容长度：537 内容类型：文本/xml；charset=utf-8 服务器：Microsoft-HTTPAPI/2.0 日期：2013 年 4 月 9 日星期二 21:50:54 GMT

# c++ - 将应用程序添加到启动（注册表）

> ID：15913202
> 
> 赞同：4
> 
> 时间：2013-04-09T21:47:31.867
> 
> 标签：c++, c, windows, registry

我正在尝试将我的软件添加到注册表中，我发现了一些我可以使用的代码，但不是完整的工作代码 C/C++ 对我来说是新的，不能自己创建它。但这是基本思想：如果没有创建它，请检查是否设置了 reg 键。

我能够使用以下代码获取我的程序位置：

```
TCHAR szPath[MAX_PATH];
GetModuleFileName(NULL,szPath,MAX_PATH); 
```

并且能够通过以下方式创建密钥：（不确定是否正确）

```
HKEY newValue;
RegOpenKey(HKEY_CURRENT_USER,"Software\\Microsoft\\Windows\\CurrentVersion\\Run",&newValue);
RegSetValueEx(newValue,"myprogram",0,REG_SZ,(LPBYTE)szPath,sizeof(szPath));
RegCloseKey(newValue);
return 0; 
```

缺少什么，小检查一下钥匙是否还没有...

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T22:33:03.183

这是一些可能满足您需求的代码。调用`RegisterProgram`您的 EXE 自行注册，以便在用户登录时自动启动。此函数调用`GetModuleFileName`然后调用另一个辅助函数，该函数调用该函数`RegisterMyProgramForStartup`将写入注册表。

调用`IsMyProgramRegisteredForStartup(L"My_Program")`以检测注册是否确实存在并且是否有效。

一个速记。在实际再次写出之前检查密钥是否存在的性能影响可以忽略不计。您可以盲目地调用 RegisterProgram，如果它已经存在，它将覆盖密钥。检测注册是否存在对于初始化启用或禁用自动启动的 UI 复选框很有用。（你是在给你的用户一个选择，对吧？因为我讨厌那些自动安装并自动运行而不给我选择的应用程序。）

```
BOOL IsMyProgramRegisteredForStartup(PCWSTR pszAppName)
{
    HKEY hKey = NULL;
    LONG lResult = 0;
    BOOL fSuccess = TRUE;
    DWORD dwRegType = REG_SZ;
    wchar_t szPathToExe[MAX_PATH]  = {};
    DWORD dwSize = sizeof(szPathToExe);

    lResult = RegOpenKeyExW(HKEY_CURRENT_USER, L"Software\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_READ, &hKey);

    fSuccess = (lResult == 0);

    if (fSuccess)
    {
        lResult = RegGetValueW(hKey, NULL, pszAppName, RRF_RT_REG_SZ, &dwRegType, szPathToExe, &dwSize);
        fSuccess = (lResult == 0);
    }

    if (fSuccess)
    {
        fSuccess = (wcslen(szPathToExe) > 0) ? TRUE : FALSE;
    }

    if (hKey != NULL)
    {
        RegCloseKey(hKey);
        hKey = NULL;
    }

    return fSuccess;
}

BOOL RegisterMyProgramForStartup(PCWSTR pszAppName, PCWSTR pathToExe, PCWSTR args)
{
    HKEY hKey = NULL;
    LONG lResult = 0;
    BOOL fSuccess = TRUE;
    DWORD dwSize;

    const size_t count = MAX_PATH*2;
    wchar_t szValue[count] = {};

    wcscpy_s(szValue, count, L"\"");
    wcscat_s(szValue, count, pathToExe);
    wcscat_s(szValue, count, L"\" ");

    if (args != NULL)
    {
        // caller should make sure "args" is quoted if any single argument has a space
        // e.g. (L"-name \"Mark Voidale\"");
        wcscat_s(szValue, count, args);
    }

    lResult = RegCreateKeyExW(HKEY_CURRENT_USER, L"Software\\Microsoft\\Windows\\CurrentVersion\\Run", 0, NULL, 0, (KEY_WRITE | KEY_READ), NULL, &hKey, NULL);

    fSuccess = (lResult == 0);

    if (fSuccess)
    {
        dwSize = (wcslen(szValue)+1)*2;
        lResult = RegSetValueExW(hKey, pszAppName, 0, REG_SZ, (BYTE*)szValue, dwSize);
        fSuccess = (lResult == 0);
    }

    if (hKey != NULL)
    {
        RegCloseKey(hKey);
        hKey = NULL;
    }

    return fSuccess;
}

void RegisterProgram()
{
    wchar_t szPathToExe[MAX_PATH];

    GetModuleFileNameW(NULL, szPathToExe, MAX_PATH);
    RegisterMyProgramForStartup(L"My_Program", szPathToExe, L"-foobar");
}

int _tmain(int argc, _TCHAR* argv[])
{
    RegisterProgram();
    IsMyProgramRegisteredForStartup(L"My_Program");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T21:58:12.017

要检查该值是否存在，请调用[`RegQueryValueEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911.aspx).

```
LONG retval = RegQueryValueEx(hKey, "myprogram", NULL, NULL, NULL, NULL); 
```

请注意，您调用`newValue`的实际上是键而不是值。为避免混淆，您应该这样命名。我用的名字`hKey`。

然后检查该值是否存在，按照[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911.aspx)`retval`中`ERROR_SUCCESS`的描述进行比较。

您的代码的另一个问题是绝对没有错误检查。我会把这个留给你解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-03T15:15:58.257

你忘记写一个关于安全访问的论据

# vhdl - 如何在 VHDL 中合成流程中的循环？

> ID：15913205
> 
> 赞同：2
> 
> 时间：2013-04-09T21:48:10.753
> 
> 标签：vhdl, fpga

我正在用 VHDL 实现 FIR 滤波器，需要一些关于何时使用和不使用过程语句的建议。部分代码如下所示。具体来说，我想知道`resetCoeffs`循环将如何合成。它会是顺序重置，因此我假设的速度和面积都非常低效，还是会并行完成？如果是前者，我将如何编写它以便可以并行重置。

```
process (clk) is begin
    if rising_edge(clk) then
        if rst = '1' then
            -- Reset pointer
            ptr <= (others => '0');

            -- Reset coefficients
            resetCoeffs: for i in 0 to ORDER - 1 loop
                coeffs(i) <= (others => '0');
            end loop;
        else
            -- Increment pointer
            ptr <= ptr + 1;

            -- Fetch input value
            vals( to_integer(ptr) ) <= ival;

            -- Write coefficient
            if coeff_wen = '1' then
                coeffs( to_integer(ptr) ) <= ival;
            end if;
        end if;
    end if;
end process; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:14:39.960

这将是并行的。它基本上必须是因为整个循环（过程中的一切，真的）必须在硬件的单个时钟周期内运行。

不过我很好奇。既然你已经努力写出整个过程，为什么不直接用你最喜欢的合成器来合成呢？这就是我所做的，以检查我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:22:07.347

一旦一个进程开始执行（因为它的敏感列表中的一个信号发生了变化），它必须运行直到它挂起，或者到达结尾，或者到达一个`wait`语句。

由于这种定义的行为，循环将“执行”它们的所有代码，直到它们在允许时间在模拟器中继续前进之前退出。因此，合成器将通过展开所有循环并确保它“全部同时发生”（或至少在像您这样的时钟进程的时钟滴答内）来创建相同的行为。

# knitr - knitr + R3.0.0：总和错误（图）

> ID：15913207
> 
> 赞同：1
> 
> 时间：2013-04-09T21:48:22.647
> 
> 标签：knitr, lyx

由于 R (2.15.1>3.0.0) 的升级，在 file.Rhtml 和 Lyx 上使用 knitr 时出现错误。knitr 的版本是 1.1。

错误信息是：

```
Erreur dans sum(figs) : 'type' (list) de l'argument incorrect
Calls: knit ... <Anonymous> -> process_group.block -> call_block -> block_exec 
```

有什么办法解决这个问题吗？

阿兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:39.170

更新：knitr 1.2 现在在[CRAN](http://cran.r-project.org/package=knitr)上，其中已修复此问题。

* * *

[我想我已经在开发版](https://github.com/yihui/knitr#readme)中解决了这个问题，很快就会在 CRAN 上。现在，请尝试

```
install.packages('knitr', repos = 'http://www.rforge.net/', type = 'source') 
```

# vb.net - 逐行复制文本文件 vb.net 一半大小？

> ID：15913208
> 
> 赞同：0
> 
> 时间：2013-04-09T21:48:32.263
> 
> 标签：vb.net, streamreader, streamwriter, file-encodings

我正在尝试修改 6 gig 文本文件（SQL 脚本）中的特定行。所以我读了它`IO.StreamReader.ReadLine`并用`IO.StreamWriter.WriteLine`. 如果该行符合某个条件，我会在编写之前对其进行修改。

问题是，生成的文件正好是原始文件大小的一半（1.999582...）...

我正在尝试使用以下方法确保编码相同：

`sw = New IO.StreamWriter(NewFilepath, False, sr.CurrentEncoding)`

但这并没有什么区别，新文件的大小是旧文件的一半...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:49:24.400

您在哪里设置 StreamReader 的编码`sr`？如果您没有明确地执行此操作，并且如果您在执行任何文件读取之前设置 StreamWriter 的编码（我的最佳猜测），那么`CurrentEncoding`StreamReader 可能会更改（它从源文件中自动检测）。

从 MSDN 上`StreamReader.CurrentEncoding`

> 当前阅读器使用的当前字符编码。在第一次调用 StreamReader 的任何 Read 方法后，该值可能不同，因为在第一次调用 Read 方法之前不会进行编码自动检测。

要确定编码，您可以使用 StreamReader 读取文件的第一行，然后执行以下操作：

```
sw = New IO.StreamWriter(NewFilepath, False, sr.CurrentEncoding) 
```

# ruby - 取两个数组并从不唯一的值中创建第三个数组

> ID：15913212
> 
> 赞同：2
> 
> 时间：2013-04-09T21:48:49.373
> 
> 标签：ruby, duplicates, uniq

我正在尝试对庞大的电子邮件列表迁移进行重复数据删除，但是有一个问题。我想把重复的东西变成他们自己的数组（第三个）。

让这些数组变得非常简单和简短。

```
a = ["rich@aol.com", "ian@aol.com"]
b = ["rich@aol.com"] 
```

本质上，我正在尝试制作`c = ["rich@aol.com"]`，因为它是两个列表中唯一的电子邮件。

**到目前为止我所做的尝试：**

与 unqiq 有相反的含义吗？

```
ab = a + b
ab.uniq 
```

返回：["rich@aol.com", "ian@aol.com"]

我可以将 a + b 转储到第三个 c 数组中，并将 c 与 ab.uniq 进行比较以获得重复的内容吗？

我错过了一种更简单的方法吗？任何帮助都感激不尽！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:50:54.123

你想要数组的[交集](http://ruby-doc.org/core-2.0/Array.html#method-i-26)。

```
c = a & b 
```

# c# - Windows CE 窗体大小属性在最大化后未更新

> ID：15913213
> 
> 赞同：2
> 
> 时间：2013-04-09T21:48:53.713
> 
> 标签：c#, winforms, windows-ce, .net-cf-3.5

我正在用 C# 开发一个全屏 Windows CE 应用程序。一旦我将 WindowState 设置为最大化，窗体的高度和宽度属性保持不变，ClientRectangle 和 ClientSize 属性也是如此。在表单加载之前，属性不会更新。我需要知道加载时最大化表单的值，以便我可以重新定位和调整其上的控件大小。

我怎样才能让这些值更新？

# automaton - Java：元胞自动机中的索引出站

> ID：15913218
> 
> 赞同：0
> 
> 时间：2013-04-09T21:49:03.747
> 
> 标签：automaton

这是我正在研究的元胞自动机的代码：

**更新：**

```
public class Lif1ID {

private Rule rule;
private int stepCount;

public static void main (String [ ] args) {
        Lif1ID simulation = new Lif1ID ( );
        simulation.processArgs (args);
        simulation.producePBM ( ); LINE 9
}

// Print, in Portable Bitmap format, the image corresponding to the rule and step count
// specified on the command line.
public void producePBM ( ) {
        int width = (stepCount*2+1);
        System.out.println("P1 " + width + " " + (stepCount+1));
        String prev_string = "";
        // constructs dummy first line of rule
        for (int i = 0; i < width; i++){
                if (i == stepCount+1){
                        prev_string += "1";
                } else {
                        prev_string += "0";
                }
        }
        // contructs and prints out all lines prescribed by the rule, including the first
        for (int i = 0; i < stepCount; i++) {
                String next_string = "";
                for (int j = 0; j < width; j++) {
                    // prints next line, one character at a time

                        System.out.print(prev_string.charAt(j) + " ");
                        // specifies cases for the edges as well as for normal inputs to Rule
                        if (j == 0) { 

                                next_string += rule.output(0, Character.getNumericValue(prev_string.charAt(0)), Character.getNumericValue(prev_string.charAt(1)));
                        } else if (j == width-1) {
                                next_string += rule.output(Character.getNumericValue(prev_string.charAt(width-2)), Character.getNumericValue(prev_string.charAt(width-1)), 0);
                        } else {
                                String rule_input = prev_string.substring(j-1, j+2);
                                int first = Character.getNumericValue(rule_input.charAt(0));
                                int second = Character.getNumericValue(rule_input.charAt(1));
                                int third = Character.getNumericValue(rule_input.charAt(2));
                                next_string += rule.output(first, second, third); LINE 43
                        }
                }
                // sets prev_string to next_string so that string will be the next string in line to be printed
                prev_string = next_string;
                System.out.println();
        }
}

// Retrieve the command-line arguments, and convert them to values for the rule number
// and the timestep count.
private void processArgs (String [ ] args) {
        if (args.length != 2) {
                System.err.println ("Usage: java Life1D rule# rowcount");
                System.exit (1);
        }
        try {
                rule = new Rule (Integer.parseInt(args[0]));
        } catch (Exception ex) {
                System.err.println ("The first argument must specify a rule number.");
                System.exit (1);
        }
        try {
                stepCount = Integer.parseInt (args[1]);
        } catch (Exception ex) {
                System.err.println ("The second argument must specify the number of lines in the output.");
                System.exit (1);
        }
        if (stepCount < 1) {
                System.err.println ("The number of output lines must be a positive number.");
                System.exit (1);
        }
   }
}

 class Rule {

private int a, b, c;
private String rulebin;

public Rule (int ruleNum) {
        rulebin = convertToBinary(ruleNum);
}

private String convertToBinary(int input) // get the binary presentation as you want
{                                         // if the input is 2 you'll get "00000010"
    String binary = "";
    for (int i = 0; i < 8; i++){
      if ((1 << i & input) != 0)
        binary += "1";
      else 
          binary+= "0";
    }
    binary = new StringBuffer(binary).reverse().toString();
    return binary;
}

// Return the output that this rule prescribes for the given input.
// a, b, and c are each either 1 or 0; 4*a+2*b+c is the input for the rule.
public char output (int a, int b, int c) {    
    return rulebin.charAt(7 - 4*a + 2*b + c); LINE 106
} 
```

}

这是我在 3 个时间步输入规则 30 时收到的错误消息：

```
java Life1D 30 3 
```

**更新的**错误消息：

```
P1 7 4
0 0 0 0Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String       index      out of range: 151
at java.lang.String.charAt(String.java:686)
at Rule.output(Life1D.java:106)
at Life1D.producePBM(Life1D.java:43)
at Life1D.main(Life1D.java:9) 
```

代码中注明了相应的行。为什么我会收到此错误，我该如何解决？几个小时以来，我一直试图找出错误，如果我能得到帮助，那将是一件幸事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:15:23.880

问题是它`Rule.output()`需要三个 int 参数，但是你用它来调用它就行了

```
next_string += rule.output(0, prev_string.charAt(0), prev_string.charAt(1)); 
```

实际上是一个 int，然后是 2 个字符。现在，实际字符是“0”，但由于语言为您进行的隐式转换，您会得到“0”的 ASCII 码，即 48，这就是传递给函数的内容`Rule.output()`。

现在，要解决此问题，您需要使用如下方法`Character.getNumericValue()`：

```
next_string += rule.output(0, Character.getNumericValue(prev_string.charAt(0)), Character.getNumericValue(prev_string.charAt(1))); 
```

不要忘记更改其他两个调用`Rule.output()`

但是，请注意，这不是您的代码中唯一的问题，因为我仍然得到`String index out of range: 7`，因为调用该`Rule.output()`方法的参数现在都为 0，但我已经回答了您的原始问题。如果您需要更多帮助，请告诉我。

# java - Java 签名的 Applet 不能在浏览器上运行

> ID：15913221
> 
> 赞同：1
> 
> 时间：2013-04-09T21:49:11.617
> 
> 标签：java, process, jar, applet, runtime.exec

我使用这三个步骤创建了一个 java 小程序，jar 文件。我编写了一个打开 Windows 计算器的代码。它可以使用 ide 或从文件夹打开。在获得许可后在浏览器上它不起作用。我的问题是什么

3个简单的步骤：

```
keytool -genkey -keystore myKeyStore -alias me

keytool -selfcert -keystore myKeyStore -alias me

jarsigner -keystore myKeyStore jarfile.jar me 
```

这是我的代码

```
import java.applet.Applet;

public class Mi extends Applet {

        /**
         * @param args the command line arguments
         */
        public static void main(String[] args) {
        try {
          Runtime.getRuntime().exec("cmd /c calc");
        } catch(Exception exce){ 
          /*handle exception*/
          try {
            Runtime.getRuntime().exec("cmd /c notepad");
          } catch(Exception exc){
            /*handle exception*/

          }
        }
        }
} 
```

这是使用的 HTML

```
<applet archive="mi.jar" code="Mi"></applet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:53:46.690

我之前在 html 中使用了带有关键字或如下所示的小程序；

```
<applet code="mainclass.class" width="500" height="500">
my applet
</applet> 
```

你能试试这些吗

# php - 如何使用 htaccess 正确地将 POST 请求路由到新 URL

> ID：15913224
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:49:41.683
> 
> 标签：php, .htaccess, routing

我们正在新平台上推出新网站。由于我们无法在新平台上重写所有现有服务，我需要将所有服务请求路由到将移动现有站点的新 URL。

例如。我们当前的 URL 是`http://www.site.com`. 随着新站点的启动，此 URL 将服务于新站点，而旧站点将移至`http://old.site.com`. 假设我们现有的处理 post 请求的服务现在位于`http://www.site.com/service_one`但随后将移动到`http://old.site.com/service_one`.

如何正确路由所有将发送到`http://www.site.com/service_one`->的帖子请求`http://old.site.com/service_one`？

更新：这里真正的问题是 POST 请求甚至可以通过 .htaccess 路由到新 URL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:43:10.463

假设您正在谈论 HTTP 重定向，不幸的是，[您无法可靠地执行此操作。](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)根据 HTTP 1.1 规范，让客户端重做 POST 请求到新 URL 的代码是 307，但有些浏览器不遵守这一点。

如果您能够使用服务器端重写（例如使用 mod_rewrite）而不是客户端重定向，那么它将起作用。但是，这假设您的新站点与旧站点一起托管在同一服务器中。

# java - 如何从java中的Array Class类型对象中检索值？

> ID：15913230
> 
> 赞同：0
> 
> 时间：2013-04-09T21:49:52.717
> 
> 标签：java, arrays, oop, class, object

我有通过传递参数 ipadd 来调用 getSystem() 的方法，我有两个类，如下所述

```
SystemReport Class

public class SystemReport
{
    protected System[] system;

    public ComputerSystemResponse ()
    {
    }

    public void setSystems( System[] system )
    {
        this.system = system;
    }

    public System[] getSystem()
    {
        return system;
    }

} 
```

我感兴趣的站点详细信息所在的系统类，

```
public class System 
{

protected String site;

 public System()
  {
  }

  public System(String site)
  {
  this.site=site;
  }

  public void setSite(String site) 
  {
        this.site = site;
  }

    public String getSite() 
    {
        return site;
    }

} 
```

不同类中的方法 & 尝试通过循环检索站点的值

```
SystemReport rep = classInstance.getNames(ipadd);
System[] test = rep.getSystem(); 
```

getNames 的返回类型

```
protected SystemReport getNames (ipadd)
{
  SystemReport rep = new SystemReport();

  return rep;
} 
```

回答问题：
1\. classInstance.getNames(ipadd) 的返回类型为 SystemReport
2\. rep size is > 0

现在我想从代表那里获取网站，我尝试通过**test.length is 0**检查长度。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:07:52.200

我认为你需要这样做：

```
SystemReport rep = new SystemReport();
rep.setSystems((classInstance.getNames(ipadd)).getSystem()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:10:58.483

您的`getNames`函数返回一个新的、空白的 SystemReport 实例。您调用`new SystemReport()`但默认构造函数不会将任何内容添加到列表中，因此长度将为 0。

您需要调用`setSystems`您创建的报告并在您获得`System[] system`数组的任何地方传递。

# jquery - jQuery一次淡入/淡出两个div，循环和重复

> ID：15913231
> 
> 赞同：1
> 
> 时间：2013-04-09T21:49:57.217
> 
> 标签：jquery, fadein, fadeout, repeat

我正在使用 Wordpress 的 Advanced Custom Fields 插件，并激活了[Repeater Field](http://www.advancedcustomfields.com/add-ons/repeater-field/)，以使客户能够根据需要添加任意数量的推荐。每个推荐都显示在`.quote`前端的 div 中。但是，我只希望`.quote`一次显示两个 div（按连续顺序），并一次淡入/淡出两个。

像这样：

**页面加载**：显示引号 1 和 2。 **7 秒过去**：显示引号 3 和 4。 **又过了 7 秒**：显示引号 5 和 6。重复等，不依赖于引号的数量（可能有 20、5、18 等），一旦`.quote`达到最后两个 div，它将从头开始重新启动。

我已经拼凑了一个超级基本和可怕的代码来***尝试***在这里说明我的观点：http: [//jsfiddle.net/9kg6L/](http://jsfiddle.net/9kg6L/)

我确信有一个简单的解决方案，但我仍然是一个写 jQuery 的新手，所以我希望从这个小经验中学习:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:15:24.203

你可以这样做：

```
var quotes = $('#container .quote');

function cycleQuotes () {
    var current = quotes.filter(".active"), next;
    if (current.length == 0 || (next = current.next().next()).length == 0 ) {
        // first iteration or last, select first two
        next = quotes.slice(0,2);
    }
    current.removeClass('active').fadeOut(400).promise().done(function(){
        next.addClass('active').fadeIn(); 
    });
    setTimeout(cycleQuotes,7*1000);
}
cycleQuotes(); 
```

[http://jsfiddle.net/9kg6L/1/](http://jsfiddle.net/9kg6L/1/)

如果有奇数，它可能会改进为，而不是只显示最后一个，先显示最后一个 +，然后从那时起循环显示一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:11:30.970

有点靠近。

```
var interval=2000;
var j=4
for(var i=2;i<50;i++){  

setTimeout(function() {
    quote.slice(i,j).fadeOut();
}, interval);
interval=interval+2000;
      j=j+2;
      i++;
} 
```

你修好它

# c++ - 从随机数组中输出最大最小值和平均值？

> ID：15913234
> 
> 赞同：1
> 
> 时间：2013-04-09T21:50:12.517
> 
> 标签：c++, arrays, random

我想知道是否有人可以帮助我解决我整天都在努力的事情。

在下面的代码中，我指定了一组随机数字，我必须从中提取最大值、最小值和平均值。这一切看起来都很好（如此紧凑的软件！）但我得到了一个奇怪的输出。我相信我知道问题出在哪里（比如我正在找到第一个数字的最大值，但下一个数字更小，软件会认为这是最大的数字，即使整数 14 可能更大）但我不知道如何解决这个问题。最小值我不知道为什么它是错误的，它一直说它是零，平均值保持在 10-19 之间，考虑到随机数的范围从 1 到 1000，这是不可能的。我从来没有被教过如何组织随机数一个数组，所以我只是不知道如何解决这个问题。任何帮助都会非常棒！

感谢您抽出宝贵时间，希望您有美好的一天！

```
#include <cmath>
#include <iostream>
#include<cstdlib>
#include <ctime>
#include <time.h>
#include <iomanip>

using namespace std;
int main()
{

//Defining variables
//DEFINE SIZE
const int ARRAY_SIZE =20;
//Index variable
int i;
//For finding average
double sum=0;

double max_value;

double min_value;
//Keep all numbers sane
cout.precision(5);

srand((unsigned)time(0));

double main_array[ARRAY_SIZE];

//Header
cout << "Element number \t\t" << "Random Number\n\n" << endl;

//Assigning random values into array.
for (i=0; i< ARRAY_SIZE; i++)
{

max_value=0;
min_value=0;

//Randomizer
double ran = 0 + (rand()/((float)RAND_MAX/(1000-0)));

main_array[i] = ran;
cout << "\t" << i << "\t\t" << main_array[i] << endl;

//Find average
sum= (sum + main_array[i]);
sum= sum/(ARRAY_SIZE+1);

//Initalizing
for (int i = 0; i < ARRAY_SIZE; i++)
{

if ( min_value > ran) 
min_value = main_array[i];
if (max_value < ran)
max_value = main_array[i];
}

}
cout <<"Average Value is: "       << sum << endl;
cout <<"\nThe Minimum Value Is: " << min_value << endl;
cout <<"\nThe Maximum value Is: " << max_value << endl;

system ("pause");
return 0;

} 
```

一个输出示例是

元素编号 随机数

```
 0               791.62
    1               542.04
    2               879.57
    3               875.39
    4               38.057
    5               73.702
    6               973.27
    7               22.431
    8               830.26
    9               444.59
    10              276.89
    11              888.12
    12              827.17
    13              900.45
    14              883.72
    15              201.15
    16              317.64
    17              649.83
    18              443.98
    19              683

Average Value is: 33.603

The Minimum Value Is: 0

The Maximum value Is: 791.62
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:54:50.637

除非您*必须*这样做，否则请使用`std::min_element`求最小值、`std::max_element`求最大值和`std::accumulate`求和。

如果您绝对*必须*自己执行此操作，您通常希望将最小值和最大值初始化为集合中的第一个元素，然后寻找更小/更大的其他元素：

```
int mininum = array[0];
int maximum = array[0];

for (int i=1; i<array_size; i++) {
    if (array[i] < minimum)
        minimum = array[i];
    if (array[i] > maximum)
        maximum = array[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:00:14.687

在开始循环之前，请创建最小值、最大值和总计。然后在创建数组的每个元素时，还要检查它是小于最小值还是大于最大值。还要将该数字添加到您的总数中。最后，在循环之外，将总数除以元素数以获得平均值。

您绝对不应该在每次添加元素时遍历整个数组，也不应该在每次循环中都重置最小值和最大值。如果您的所有数字都将大于 0，您也不应该将 min 设置为 0，因为它永远不会被更新。

# python - 在python类之外调用方法

> ID：15913236
> 
> 赞同：0
> 
> 时间：2013-04-09T21:50:31.833
> 
> 标签：python, python-2.7

我对 Python 和 OOP 比较陌生，我正在尝试编写一个带有类的迷你冒险游戏，并且已经被我的 BattleEngine 类卡住了。这个想法是根据你的角色和对手的“力量”和“智慧”来选择与对手战斗或智胜对手。当我尝试在这里调用我的攻击方法时出现错误：

```
class Armory(Scene):

    def enter(self):
        print "This room appears to be some kind of armory. There are shelves full of weaponry lining"
        print "the walls. You walk around admiring the shiny weapons, you reach out to pick up a"
        print "massive battleaxe. Right as your fingers touch it you hear voices from behind the"
        print "next door. They sound like they're getting closer. As the voices grow nearer you must make"
        print "a decision. Will you stand and fight (enter 'fight') or will you use your wit to outsmart"
        print "your opponent(enter 'wit')?"
        decision = raw_input("> ")
        battle = BattleEngine()
        if decision == "fight":
            attack(self, Player.strength, 3)
            if player_wins:
                print "A man in light armour walks in and sees you with your sword drawn. A look of"
                print "shock and disbelief is on his face. You act quickly and lunge at him."
                print "The soldier struggles to unsheath his sword as you run him through."
                print "He collapses to the ground wearing the same look of disbelief."
                print "Your strength has increased by 1."
                Player.strength += 1
        elif decision == "wit":
            outwit(self, Player.wit, 3) 
```

这是我定义我的 BattleEngine 类的地方：

```
class BattleEngine(object):

    def attack(self, player_strength, nonplayer_strength):
        player_roll = randint(1,6)
        nonplayer_roll = randint(1,6)
        if (player_roll + player_strength) >= (nonplayer_roll + nonplayer_strength):
            return player_wins
        else: 
            return 'death'

    def outwit(self, player_wit, nonplayer_wit):
        player_roll = randint(1,6)
        nonplayer_roll = randint(1,6)
        if (player_roll + player_wit) >= (nonplayer_roll + nonplayer_wit):
            return player_wins
        else: 
            return 'death' 
```

一旦我在程序中到达这一点，就会收到错误消息：“未定义攻击全局名称”我不确定我到底做错了什么。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:52:41.070

您需要调用您的`attack` *实例*`BattleEngine`，并且*不需要*传入`self`：

```
battle = BattleEngine()
if decision == "fight":
    player_wins = battle.attack(Player.strength, 3) 
```

请注意，您需要接收`.attack()`方法的返回值。

这同样适用于`.outwit()`进一步的方法：

```
elif decision == "wit":
    player_wins = battle.outwit(Player.wit, 3) 
```

您可能需要修复`.attack()`and`.outwit()`方法中的返回值；而不是`return player_wins`and `return 'death'`，返回`True`或者`False`也许。

该`self`参数由 Python 为您处理，并将引用特定`BattleEngine`实例。

并不是说您真的*需要*这里的课程，例如，您的`BattleEngine()`课程目前没有每个实例的状态。您不会`self`在任何方法中使用，因为实例上没有任何东西*可以引用*。

# hibernate - Hibernate Criteria: Is it possible to access a database view with criteria?

> ID：15913238
> 
> 赞同：0
> 
> 时间：2013-04-09T21:50:39.557
> 
> 标签：hibernate, view, criteria

I have a criteria, which I'm trying to join to a database view. I'm wondering if it's possible and if so how to do it?

As I understand, `createAlias` and `createCriteria` only join to child objects of the root criteria. I read about `detachedCriteria`, but it seems that those need to be created on database entities, which the view is not.

The HQL equivalent would be something like this

```
 select * from root_criteria rc where rc.id in
(select view.id from DATABASE_VW view where view.field is not null) 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:35:26.513

You can try XML mapping to create an entity class pointing the database view. Each field in the entity will be mapped to the one selected from the view.

Excerpts from the documentation :

> *   There is no difference between a view and a base table for a Hibernate mapping. This is transparent at the database level, although some DBMS do not support views properly, especially with updates.
>     
>     
> *   subselect (optional): maps an immutable and read-only entity to a database subselect. This is useful if you want to have a view instead of a base table.

Below is the sample configuration, modify it accordingly.

```
 <class name="MappedClassName" mutable="false">
 <subselect>
 select view.id as viewId from DATABASE_VW view    
 </subselect>
 ...
 </class> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:09:20.040

Yes it is possible to use Views in Criteria.

Create View. Create Java Object(Persistent) which will have mapping member variable for every column you are selecting from view. Create hbm.

You can now use the Java Object in the criteria as you can do it for table.

# ios - 用于位置更新多个视图的单例

> ID：15913239
> 
> 赞同：2
> 
> 时间：2013-04-09T21:50:44.160
> 
> 标签：ios, singleton, cllocationmanager, nsnotificationcenter

在任何视图中按下导航栏中的 locateButton 后，我想在所有视图中更新用户位置。我从创建一个单例开始。

位置.h

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface Location : NSObject <CLLocationManagerDelegate>

@property (nonatomic, strong) CLLocationManager* locationManager;

+ (Location*)sharedSingleton;

@end 
```

位置.m

```
#import "Location.h"

@implementation Location {
    CLLocationManager *locationManager;
    CLGeocoder *geocoder;
    CLPlacemark *placemark;
}

@synthesize locationManager;

- (id)init {
    self = [super init];

    if(self) {
        self.locationManager = [CLLocationManager new];
        [self.locationManager setDelegate:self];
        [self.locationManager setDistanceFilter:kCLDistanceFilterNone];
        [self.locationManager setHeadingFilter:kCLHeadingFilterNone];
        [self.locationManager startUpdatingLocation];
        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        //do any more customization to your location manager
    }

    return self;
}

+ (Location*)sharedSingleton {
    static Location* sharedSingleton;
    if(!sharedSingleton) {
        @synchronized(sharedSingleton) {
            sharedSingleton = [Location new];
        }
    }

    return sharedSingleton;
}

#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError: %@", error);
    UIAlertView *errorAlert = [[UIAlertView alloc]
                               initWithTitle:@"Error" message:@"Failed to Get Your Location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);

    CLLocation *currentLocation = newLocation;

    if (currentLocation != nil) {
        latLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
        longLabel.text = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
    }

    // Stop Location Manager
    [locationManager stopUpdatingLocation];

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            addressLabel.text = [NSString stringWithFormat:@"%@, %@",
                                 placemark.locality,
                                 placemark.administrativeArea];
            addressLabel.numberOfLines = 0;

        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

}

@end 
```

当在当前视图中按下顶部导航栏中的 locationButton 时，我想使用它来更新每个视图上的用户纬度和经度。

```
- (IBAction)locationPressed:(id)sender { 

    [[Location sharedSingleton].locationManager startUpdatingLocation];

} 
```

NSNotifications 会是最好的吗？如果是这样，我将如何在 Location.m 和视图控制器中实现它们？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:12:52.483

我会做的是使用观察者模式。在你的单例中，保留`NSMutableArray`所有观察者中的一个。

```
NSMutableArray *observers; 
```

您需要一个所有观察者都遵守的协议：

```
@protocol LocationObserver <NSObject>

- (void)locationDidChange:(CLLocation *)updatedLocation;

@end 
```

然后当位置改变时就这样做

```
for (id<LocationObserver> observer in observers) {
    [observer locationDidChange:newLocation];
} 
```

您还应该有一个 addObserver 和 removeObserver 方法，`id<LocationObserver>`它们从数组中获取并添加/删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T01:19:17.927

这是我所做的，您可以在 github [https://github.com/irfanlone/CLLocationManager-Singleton-Swift上找到完整的示例](https://github.com/irfanlone/CLLocationManager-Singleton-Swift)

只需在您的项目中导入此文件，然后您可以选择实现 LocationUpdateProtocol 或收听位置更新通知

```
import MapKit

protocol LocationUpdateProtocol {
    func locationDidUpdateToLocation(location : CLLocation)
}

/// Notification on update of location. UserInfo contains CLLocation for key "location"
let kLocationDidChangeNotification = "LocationDidChangeNotification"

class UserLocationManager: NSObject, CLLocationManagerDelegate {

    static let SharedManager = UserLocationManager()

    private var locationManager = CLLocationManager()

    var currentLocation : CLLocation?

    var delegate : LocationUpdateProtocol!

    private override init () {
        super.init()
        self.locationManager.delegate = self
        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest
        self.locationManager.distanceFilter = kCLLocationAccuracyHundredMeters
        locationManager.requestAlwaysAuthorization()
        self.locationManager.startUpdatingLocation()
    }

    // MARK: - CLLocationManagerDelegate

    func locationManager(manager: CLLocationManager, didUpdateToLocation newLocation: CLLocation, fromLocation oldLocation: CLLocation) {
        currentLocation = newLocation
        let userInfo : NSDictionary = ["location" : currentLocation!]

        dispatch_async(dispatch_get_main_queue()) { () -> Void in
            self.delegate.locationDidUpdateToLocation(self.currentLocation!)
            NSNotificationCenter.defaultCenter().postNotificationName(kLocationDidChangeNotification, object: self, userInfo: userInfo as [NSObject : AnyObject])
        }
    }

} 
```

用法：

```
class ViewController: UIViewController, LocationUpdateProtocol {

    var currentLocation : CLLocation!

    override func viewDidLoad() {
        super.viewDidLoad()

        NSNotificationCenter.defaultCenter().addObserver(self, selector: "locationUpdateNotification:", name: kLocationDidChangeNotification, object: nil)

        let LocationMgr = UserLocationManager.SharedManager
        LocationMgr.delegate = self

    }

    // MARK: - Notifications

    func locationUpdateNotification(notification: NSNotification) {
        let userinfo = notification.userInfo
        self.currentLocation = userinfo!["location"] as! CLLocation
        print("Latitude : \(self.currentLocation.coordinate.latitude)")
        print("Longitude : \(self.currentLocation.coordinate.longitude)")

    }

    // MARK: - LocationUpdateProtocol

    func locationDidUpdateToLocation(location: CLLocation) {
        currentLocation = location
        print("Latitude : \(self.currentLocation.coordinate.latitude)")
        print("Longitude : \(self.currentLocation.coordinate.longitude)")
    }

} 
```

# java - 带有 Spring 的默认和用户提供的属性文件

> ID：15913241
> 
> 赞同：0
> 
> 时间：2013-04-09T21:50:45.483
> 
> 标签：java, spring, configuration, properties-file

我想允许我的 Spring 3.1.2 应用程序从我的 jar 中嵌入的默认属性文件加载配置属性，另外还允许用户将覆盖属性文件的路径指定为命令行参数。

我知道我可以`<context:property-placeholder>`用于从我的类路径加载属性的简单场景，但是我如何处理上面的场景，其中包含可能来自两个合并的属性文件的属性？

我试图复制的场景基本上是由`CompositeConfiguration`Apache Commons Configuration 解决的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:52:19.733

您可以通过系统属性添加属性文件名

检查这个

[如何在 Spring applicationContext 中读取系统环境变量](https://stackoverflow.com/questions/3965446/how-to-read-system-environment-variable-in-spring-applicationcontext)

[http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/](http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/)

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-beandef-xml-based)

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html)

**UPD**

1\. 第一种方法是将 PSPC 声明为

```
 <context:property-placeholder 
         location="classpath:app.properties, classpath:user.properties"
         ignore-resource-not-found="true" /> 
```

然后将您的 app.properties 包含到 jar 中。

用户在类路径中包含（或不包含）包含 user.properties 的文件夹。

user.properties 优先于 app.properties。

2\. 如果您需要用户指定确切的文件

```
 <context:property-placeholder
    location="classpath:app.properties, file:${userPropsPath}"
    ignore-resource-not-found="true" /> 
```

用户添加`-DuserPropsPath="<full path here>"`

* * *

这两种情况都在使用 spring-3.1.1 进行工作和测试。

# c++ - 尖括号被解释为模板函数中的模板类型

> ID：15913243
> 
> 赞同：1
> 
> 时间：2013-04-09T21:50:50.440
> 
> 标签：c++, templates

```
modes_[pos].variance = (sigmanew < 4) ? (4) : sigmanew > 5 * variance_ : sigmanew; 
```

我在模板类的模板函数中有一行。此行中的尖括号被解释为数据类型定义并引发错误。我该如何解决这样的问题？

错误是：

> /(foldername)/(part_filename)_templated_impl.tpp:312:89: 错误：在嵌套名称说明符中找到 ':'，预期为 '::'
> 
> /(foldername)/(part_filename)_templated_impl.tpp:312:79: 错误：'variance_' 不是类或命名空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:52:08.367

我不认为`<`或有任何问题`>`。您的三元运算符中有两个冒号。那可能是不对的。您正在尝试的是：

```
modes_[pos].variance = (sigmanew < 4) ? (4) 
                                      : (sigmanew > 5) ? variance_ 
                                                       : sigmanew; 
```

但是你打错了一个`?`s。为什么不在多行上执行此操作，而不是尝试以这种方式将它们全部塞满呢？

# javascript - 如何更改覆盖图类型的不透明度？

> ID：15913244
> 
> 赞同：5
> 
> 时间：2013-04-09T21:50:51.813
> 
> 标签：javascript, google-maps, google-maps-api-3

添加到地图后如何更改 overlayMapType 不透明度？

```
 var imgTypeOptions = {
            getTileUrl: function (coord, zoom) {                               
                return "myTile/" + f + ".png";        
            },
            tileSize: new google.maps.Size(256, 256),
            name: "Imagen",
            opacity: .5 //This is Ok, the first time set the opacity
            //but i want to change the opacity later
        };

...
        var imgMapType = new google.maps.ImageMapType(imgTypeOptions);
...
    map.overlayMapTypes.insertAt(0, imgMapType); 
```

我希望能够单击“25%”链接并将添加层的不透明度设置为 25%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-06T05:47:50.197

在 3.28 中你必须使用 getter。请尝试以下代码：

```
map.overlayMapTypes.getAt(0).setOpacity(0.25) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:58:49.610

查看 ImageMapType api 文档：

[https://developers.google.com/maps/documentation/javascript/reference#ImageMapType](https://developers.google.com/maps/documentation/javascript/reference#ImageMapType)

像这样的东西应该工作。

```
map.overlayMapTypes[0].setOpacity(.25) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T18:08:21.383

在 2018 年，这就是你如何处理我的工作示例。

我使用开放的街道地图图块，示例

```
 z= zoom  
 x= coord.x  
 y= coord.y

https://tile.openstreetmap.org/10/261/380.png

https://tile.openstreetmap.org/${z}/${x}/${y}.png 
```

对于平铺，您应该使用 ImageMapTypes，

然后使用

```
 map.overlayMapTypes.push(imageMapType); 
```

或者

```
 map.overlayMapTypes.insertAt(
        0, new CoordMapType(new google.maps.Size(256, 256))); 
```

在谷歌基础层上添加新的瓦片层。

您可以通过以下方式设置不透明度：

```
 // for old api

 //map.overlayMapTypes[0].setOpacity(0.25);

   //for 3.28 api  (in 2018)

   map.overlayMapTypes.getAt(0).setOpacity(0.5); 
```

[这是我的工作示例 jsfiddle，用于覆盖图块使用 ImageMapTypes](https://jsfiddle.net/hoogw/dtL147w2/1/)

另一种方法：

[示例：使用 coordMapType 而不是 ImageMapTypes](https://jsfiddle.net/hoogw/m94qy82z/)

# debugging - 手动跟踪具有多个变量的递归函数的好方法

> ID：15913251
> 
> 赞同：0
> 
> 时间：2013-04-09T21:51:38.770
> 
> 标签：debugging, recursion

为了清楚起见：这是一个与即将举行的考试相关的问题，但我认为答案可能会引起更大的群体的兴趣。

我需要跟踪类似于下面的代码，其中包含递归、数组的传递和重新排列等组件以及传递给递归函数的多个变量。

手动进行此类跟踪的最佳方法是什么？我所看到的方法的主要问题是要跟踪的变量太多。这使得使用函数调用树的方法立刻变得非常混乱。有没有一种结合表格和树木来追踪它的好方法？

## 示例代码

```
function f(array A, int i, int j)
repeat while i!= j
int m = (i+j)/2;
f(A, i, m);
f(A, m+1, j);
if (A[m] < A[j]) swap(A[m], A[j]);
j = j - 1
done
end; 
```

# java - 找不到合适的驱动程序 Postgres JDBC

> ID：15913253
> 
> 赞同：5
> 
> 时间：2013-04-09T21:51:44.347
> 
> 标签：java, sql, postgresql, tomcat, jdbc

当我在 tomcat 上测试我的 Web 服务时，我收到“找不到合适的驱动程序”错误。正如各种教程所说，我在 lib 文件夹中有 JDBC .jar。这是我的代码：

```
public class PostDBConnection {

 PreparedStatement st;
 ResultSet rs;
 Connection con;
 DataSource ds;
 InitialContext cxt;

 String url = "jdbc:postgresql://127.0.0.1:5432/UptonDB";
 String user = "*****";
 String password = "*******";
 String query = "";
 StringBuilder response = new StringBuilder();

@SuppressWarnings("unused")
public String getInfo(){

    int size = 0;  

    try {

        cxt = new InitialContext();     
        ds = (DataSource) cxt.lookup("java:comp/env/jdbc/UptonDB");

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try{

        try {

            Class.forName("org.postgres.Driver");

        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        con = DriverManager.getConnection(url, user, password);
        st =  con.prepareStatement("SELECT VERSION()");         
        rs = st.executeQuery();

        while(rs.next())
            {
                    response.append(rs.getString(1));

            }               
        }     

    catch(SQLException exc)
        {
            Logger lgr = Logger.getLogger(PostDBConnection.class.getName());
            lgr.log(Level.SEVERE, exc.getMessage(), exc);
        } 
    finally {
        try {
           if (rs != null) {
                rs.close();
            }
            if (st != null) {
                st.close();
            }
            if (con != null) {
                con.close();
            }

        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(PostDBConnection.class.getName());
            lgr.log(Level.WARNING, ex.getMessage(), ex);
        }
    }

    return response.toString();
} 
```

这里还有我按照 Tomcat 网站上的说明创建的 web.xml 和 context.xml 文件：

```
 <resource-ref>
<description>PostgreSQL Data Source </description>
<res-ref-name>jdbc/UptonDB</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?> 
   <Context>  
   <Resource name="jdbc/UptonDB" auth="Container" type="javax.sql.DataSource" 
    removeAbandoned="true" removeAbandonedTimeout="30" maxActive="80"   
    maxIdle="30" maxWait="10000" username="*****" password="*******"
    driverClassName="org.postgresql.Driver"
    url = "jdbc:postgresql://127.0.0.1:5432/UptonDB" useUnicode="true"
    characterEncoding="utf-8" characterSetResults="utf8"/>
   </Context> 
```

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T21:59:13.610

正确的驱动程序名称是：**org.postgresql.Driver**而不是 org.postgres.Driver

更新：

检查这个页面给它一​​点操作系统研究，你应该没问题:) [http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)

而不是使用 DriverManager，您应该只进行查找（您已经这样做了），然后从 DataSource 获取连接（您可以从代码中删除密码、用户和其他未使用的东西）：

```
Context initContext = new InitialContext();
Context envContext  = (Context)initContext.lookup("java:/comp/env");
DataSource ds = (DataSource)envContext.lookup("jdbc/UptonDB");
Connection conn = ds.getConnection(); 
```

# cron - 使用 crontab 执行使用 Rails 的脚本

> ID：15913269
> 
> 赞同：0
> 
> 时间：2013-04-09T21:53:02.010
> 
> 标签：cron, rvm

我正在尝试运行一个 ruby​​ 脚本，我可以使用我的主目录中的 Ruby 很好地运行该脚本，但使用 cron 会失败。脚本 autocheck.rb 的开头如下所示：

```
require 'rubygems'
require 'mechanize'
require 'json'
require "active_record"

ActiveRecord::Base.establish_connection(
  :adapter => "postgresql",
  :encoding => "utf8",
  :database => "depot_development",
  :pool => "5",
  :username => "depot",
  :password => "fake_pwd") 
```

crontab 如下所示：

```
*/15 08-17 * * 1-5 ruby /home/user/autocheck.rb 
```

我在这里检查了与 cron 和 rvm 相关的其他条目（假设这是问题所在；我使用的是 rvm 和 ruby​​ 版本 1.9.3），但我无法找出解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:19:46.263

RVM 有一个命令可以为您设置计划：

```
rvm cron command "*/15 08-17 * * 1-5" ruby /home/user/autocheck.rb 
```

# asp.net - 从 Active Directory 获取电子邮件地址

> ID：15913271
> 
> 赞同：2
> 
> 时间：2013-04-09T21:53:18.183
> 
> 标签：asp.net, vb.net, webforms

全部 -

我能够检索 FullName 值我试图从 Active Directory 中检索电子邮件地址，但在使用 Windows 身份验证的 ASP.Net Web 窗体项目中使用以下代码：

```
Dim wi As System.Security.Principal.WindowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent()
Dim a As String() = wi.Name.Split(New Char() {"\"c}) '' Context.User.Identity.Name.Split('\')

Dim ADEntry As System.DirectoryServices.DirectoryEntry = New System.DirectoryServices.DirectoryEntry(Convert.ToString("WinNT://" + a(0) + "/" + a(1)))
Dim Name As String = ADEntry.Properties("FullName").Value.ToString()
Dim Email As String = ADEntry.Properties("mail").Value.ToString() 
```

当我到达尝试检索电子邮件地址的代码行时，我得到一个“对象引用未设置为对象实例”。错误。我曾尝试使用电子邮件地址、电子邮件。我认为问题在于我只是使用了错误的关键字。我能够检索 FullName 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:12:29.663

感谢向我发送[此链接的](https://stackoverflow.com/a/1609417/559144)[Davide Piras](https://stackoverflow.com/users/559144/davide-piras)，我找到了一个合适的解决方案：

```
Dim wi As System.Security.Principal.WindowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent()
Dim a As String() = wi.Name.Split(New Char() {"\"c}) '' Context.User.Identity.Name.Split('\')

Dim dc As PrincipalContext = New PrincipalContext(ContextType.Domain, "DomainName")
Dim adUser As UserPrincipal = UserPrincipal.FindByIdentity(dc, a(1))
Dim Email As String = adUser.EmailAddress 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T07:05:19.230

此代码适用于我.. 参考`System.DirectoryServices.AccountManagement`

```
 static string GetADUserEmailAddress(string username)
    {
        using (var pctx = new PrincipalContext(ContextType.Domain))
        {
            using (UserPrincipal up = UserPrincipal.FindByIdentity(pctx, username))
            {
                return up != null && !String.IsNullOrEmpty(up.EmailAddress) ? up.EmailAddress : string.Empty;
            }
        }
    } 
```

使用它：

```
lblEmail.Text = GetADUserEmailAddress(Request.ServerVariables["AUTH_USER"]); 
```

# php - 自定义 PHP 脚本主页上的重复内容

> ID：15913273
> 
> 赞同：0
> 
> 时间：2013-04-09T21:53:28.890
> 
> 标签：php, html, css

我编写了一个简单的 php 博客。在主页上，它显示查看次数最多的帖子，并链接到帖子的实际页面，类似于 wordpress 博客的首页。

如何避免出于 SEO 目的的重复内容？搜索引擎是否有特定的 html 标签或代码来防止考虑主页上的帖子和实际页面重复？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:06:57.753

主页是 index.php 或 index.html 输出的页面，即使这是对内部文件的重定向。例如，如果您想使用管理面板制作 cms 并提供不同的模板、样式和插件，并决定将设计代码从引擎代码中转移出来，那么在功能上将模板包含在其他模板中是常识-文件夹（以保持文件系统干净、组织良好且易于从设计工作中访问）。这样，管理面板会将您的站点参数插入并更新到数据库中，根索引文件将从 db.xml 中读取这些参数。因此，对于 SEO 手段，您必须做的最好的事情是创建并保留所有 xml 文件（站点地图、提要、rss、原子），包括关键字（分类）、标签和元数据、内部和外部链接的连贯性，

# c# - BackgroundWorker 和剪贴板

> ID：15913275
> 
> 赞同：7
> 
> 时间：2013-04-09T21:53:39.653
> 
> 标签：c#, wpf, backgroundworker, clipboard

我对一个简单的代码感到疯狂，我在其中使用 BackgroundWorker 来自动化基本操作。我应该向剪贴板添加内容吗？

在BackgroundWorker的方法中执行这段代码后：

```
Clipboard.SetText (splitpermutation [i]); 
```

我收到一个错误，说明线程必须是 STA，但我不明白该怎么做。这里有更多代码：（不是全部）

```
private readonly BackgroundWorker worker = new BackgroundWorker();

private void btnAvvia_Click(object sender, RoutedEventArgs e)
{
    count = lstview.Items.Count;
    startY = Convert.ToInt32(txtY.Text);
    startX = Convert.ToInt32(txtX.Text);
    finalY = Convert.ToInt32(txtFinalPositionY.Text);
    finalX = Convert.ToInt32(txtFinalPositionX.Text);
    incremento = Convert.ToInt32(txtIncremento.Text);
    pausa = Convert.ToInt32(txtPausa.Text);

    worker.WorkerSupportsCancellation = true;
    worker.RunWorkerAsync();

    [...]
}

private void WorkFunction(object sender, DoWorkEventArgs e)
{
    [...]

    if (worker.CancellationPending)
    {
        e.Cancel = true;
        break;
    }
    else
    {
        [...]
        Clipboard.SetText(splitpermutation[i]);
        [...]
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T21:55:35.530

您可以将其编组到 UI 线程以使其工作：

```
else
{
    [...]
    this.Dispatcher.BeginInvoke(new Action(() => Clipboard.SetText(splitpermutation[i])));
    [...]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:00:36.577

在`BackgroundWorker`.NET 线程池上运行。线程池线程在 COM 多线程单元中运行。要使用剪贴板，您必须在单线程单元中运行。您可以创建自己的线程并将其设置为在 STA 中运行，但最好使用`Control.Invoke`(或`BeginInvoke`) 返回到用户界面线程（必须是 STA 线程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:01:43.363

你得到的例外是因为你试图从 UI 线程外部在 UI 线程上做一些事情（a `BackgroundWorker`，顾名思义，在后台做一些事情，为此它需要创建一个单独的线程）。

虽然 Reed 发布的答案（即使用`Dispatcher.BeginInvoke`）是避免此异常的一种方法，但我想知道为什么您首先要尝试从主要工作方法向剪贴板发送内容...

`BackgroundWorker`公开事件，例如（`ProgressChanged`您可以从您的工作方法定期调用）或`RunWorkerCompleted`（当主要工作方法完成时将触发）。

在这些事件中的任何一个中使用`Clipboard.SetText`都不应该导致您看到的异常，这似乎是在使用`BackgroundWorker`.

# c# - C# Linq 查询以获取日期范围的连续数据，尽管数据在 db 中不可用

> ID：15913278
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:53:52.470
> 
> 标签：c#, linq

我有一个数据库表，其中包含基于日期的数据

```
Date          sales
09/01/2012    20
09/04/2012    40 
```

我需要获取 20 天的数据，如下所示，获取当年的日期以及所有缺失的日期，如图所示。

```
Date         Day      Sales
09/01/2012   Mon      20
09/02/2012   Tue      0
09/03/2012   Wed      0
09/04/2012   Thu      40
09/05/2012   Fri      0..... 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:09:20.087

如果您有一个`Dates`包含所有日期的表，那么您可以将其用作您的源，然后针对您的分组事务查询进行左连接。这在 SQL 中比在 LINQ 中更容易做到，因此存储过程可能是代替 LINQ 查询的方式。

但是，如果您想在代码中完成所有操作，看起来您已经拥有除“零”天之外的分组数据，因此将其放入代码中很容易 - 定义 20 个键值对的集合（又名`Dictionary`) 代表 20 个日期，然后将您的数据放入该集合中。

```
// Very rough - double check the date logic:
var valuesByDate = new Dictionary<DateTime, int>();
for (DateTime dt = startDate; dt < startDate.AddDays(20); dt = dt.AddDays(1)) {
    valuesByDate[dt] = 0;
}

foreach (var record in recordsFromDb) {
    valuesByDate[record.Date] = record.Sales;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:06:31.167

使用`Enumerable.Range`获取日期范围并进行左连接应该可以帮助您：

```
DateTime start = new DateTime(2012,09,01);
DateTime end = new DateTime(2012,09,05);

var query = Enumerable.Range(0,(end-start).Days+1)  // range of ints 
        .Select(i => start.AddDays(i))              // range of dates
        .GroupJoin(data,
            d=>d,
            d=>d.Date,
            (d,g)=>new { Date = d, 
                         Day = d.ToString("dddd"), 
                         Sales = g.Any() ? g.Sum(i=>i.Sales) : 0 
                       }
            ); 
```

# parameters - move_node.jstree - 查找/理解操作结果参数

> ID：15913279
> 
> 赞同：4
> 
> 时间：2013-04-09T21:54:05.077
> 
> 标签：parameters, move, jstree

我正在使用`jsTree 1.0-rc3`. 我正在尝试查找操作结果参数，例如新位置父级，新位置顺序（给定父级的所有子级中元素的索引）等。我设法找到了：

*   `data.rslt.op.attr("id")`= 旧的父 ID
*   `data.rslt.np.attr("id")`= 新的父 ID

但不知道其余的。jstree 在这里缺少文档，我已经花了几个小时来处理它，但我已经没有想法了。顺便说一句，任何人都可以解码结果缩写，这些是：

*   `cop`
*   `cp`
*   `cr`
*   `np`- 新父母
*   `o`
*   `op`- 老父母
*   `or`
*   `ot`
*   `p`
*   `r`
*   `rt`

我喜欢 jstree，但这个命名约定让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T11:16:33.930

这实际上在 jstree 核心文档中。就在底部

```
 http://www.jstree.com/documentation/core.html 
```

在描述 ._get_move() 时提到它的地方！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T04:19:41.930

我知道什么是o。o - 代表 obj。当移动（拖动）一个节点时，被移动的对象在o中。

您可以使用访问该 obj

```
data.rslt.o.attr("id"); 
```

在哪里访问触发点击事件的对象，您必须使用

```
data.rslt.obj.attr("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T19:40:36.493

.o - 被移动的节点

.r - 移动中的参考节点

.ot - 源树实例

.rt - 参考树实例

.p - 要移动到的位置（可能是字符串 - “last”、“first”等）

.cp - 计算的要移动到的位置（总是一个数字）

.np - 新的父级

# php - 多服务器更新架构

> ID：15913283
> 
> 赞同：2
> 
> 时间：2013-04-09T21:54:36.777
> 
> 标签：php, svn, architecture, yii, amazon-web-services

我将 AWS 用于我的应用程序。当前的配置是：负载均衡器 --> 多个 EC2 实例（自动扩展） --> 全部使用 SVN 同步挂载 NFS 驱动器

每次我们想要更新应用程序时，我们都会登录 NFS 服务器（另一个 EC2 实例），然后对应用程序文件夹执行 svn update。

我想知道是否有更好的工作方式（架构），因为我有时会在 SVN 更新后获得权限更改，并且服务器需要一段时间才能更新。（考虑将 S3 安装为驱动器）。

我的应用程序是 PHP + Yii 框架 + 和 mysql DB。

谢谢你的帮助，丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:01:10.920

您可以使用稍微复杂的解决方案：

1.  将所有动态目录（`protected/runtime/`,`assets/`等）移出 SVN 目录（使用`svn:ignore`）并将它们符号链接到您的应用程序目录中。不过，这可能需要在您的网络服务器中进行一些配置更改才能遵循符号链接。

    ```
    /var/www/myapp/config
    /var/www/myapp/runtime
    /var/www/myapp/assets
    /var/www/myapp/htdocs/protected/config-> ../../config
    /var/www/myapp/htdocs/protected/runtime -> ../../runtime
    /var/www/myapp/htdocs/assets -> ../assets 
    ```

2.  在部署时从一个新的 SVN 副本开始`htdocs.new`，您可以在其中创建相同的符号链接并可以修复权限

    ```
    /var/www/myapp/htdocs.new/protected/config-> ../../config
    /var/www/myapp/htdocs.new/protected/runtime -> ../../runtime
    /var/www/myapp/htdocs.new/assets -> ../assets 
    ```

3.  移动`htdocs`to`htdocs.old`和`htdocs.new`to `htdocs`。您可能还需要`HUP`网络服务器。

这样您就可以完全避免 NFS 挂载，因为您有时间准备第 1 步和第 2 步。唯一的挑战是在所有机器上同步第 3 步。例如，您可以使用`at`同时在所有机器上安排更新。

作为奖励，如果出现问题，您始终可以撤消部署。

但是，如果您必须运行迁移，情况可能会更复杂。如果迁移不向后兼容您的应用程序，您可能无法避免一些停机时间。

# c# - 一些顺序 SignalR 调用被丢弃

> ID：15913292
> 
> 赞同：1
> 
> 时间：2013-04-09T21:55:02.017
> 
> 标签：c#, signalr, signalr.client

在我们的应用程序中，客户端软件使用 SignalR 的 .NET 客户端库。进行了两个几乎相同的调用，但只执行了第一个。

对象进行以下调用：

```
AddSubscription(typeof(ObjA).Name);
AddSubscription(typeof(ObjB).Name); 
```

AddSubscription() 在其父级上实现：

```
_subscribedTypes.Add(type);
_realtimeClient.Invoke("Subscribe", type); 
```

在这种情况下，客户端调用是 SignalR 客户端的 IHubProxy 包装器，它返回与 IHubProxy.Invoke() 相同的任务。_realtimeClient 本身最终是一个在整个应用程序中共享的静态客户端实例。在此之前，我们在调用或订阅服务器发送的事件方面没有问题。

无论出于何种原因，只有第一个 AddSubscription 通过。如果我交换它们，那么无论哪个现在先通过。如果我单步执行，它们都会执行。

什么可能阻止它们立即连续执行？

*编辑：我应该补充一点，虽然客户端实例是静态的，但它的方法或属性都不是。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:28:53.120

等待异步方法 Invoke 完成，看看是否有异常：_realtimeClient.Invoke("Subscribe", type).Wait();

确保您订阅了所有事件，您可能有一个错误事件

```
 var hubConnection = new HubConnection("http://url/");
        hubConnection.TraceWriter = Console.Out;
        hubConnection.Closed += () => Console.WriteLine("hubConnection.Closed");
        hubConnection.ConnectionSlow += () => Console.WriteLine("hubConnection.ConnectionSlow");
        hubConnection.Error += (error) => Console.WriteLine("hubConnection.Error {0}: {1}", error.GetType(), error.Message);
        hubConnection.Reconnected += () => Console.WriteLine("hubConnection.Reconnected");
        hubConnection.Reconnecting += () => Console.WriteLine("hubConnection.Reconnecting");
        hubConnection.StateChanged += (change) => Console.WriteLine("hubConnection.StateChanged {0} => {1}", change.OldState, change.NewState); 
```

# java - 坚持使用线程和更新图形

> ID：15913303
> 
> 赞同：2
> 
> 时间：2013-04-09T21:55:47.333
> 
> 标签：java, arrays, multithreading, swing, graphics

我试图通过画线制作一个排序算法，所以它看起来像一个图表。这里的问题是，当数组排序时，我无法将进度视为移动图。当我输入睡眠时间时，输出只显示长线，在睡眠线之后显示完整的排序图。所以我只需要在图表排序时做一些事情来查看进度。在这种情况下，我使用的是 bublesort。我非常感谢您的每一次帮助！

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class newClass extends JFrame {

public newClass() {
    final Thread hei = new Thread(new Runnable() {

        public void run() {
            bublesort();
        }
    });
    hei.start();
}
int[] array = { 400, 420, 380, 120, 340, 179, 454, 400, 420, 380, 120, 340, 179, 454, 400, 420, 380, 120, 340, 179 };

public void updateGraphic() {
    paint(this.getGraphics());
}

public void paint(Graphics g) {

    for (int i = 0; i < array.length; i++) {
        int tjue = 20;
        g.drawLine(i * tjue, 500, i * tjue, array[i]);
    }

    for (int j = 0; j < array.length - 1; j++) {
        for (int x = 0; x < array.length - 1; x++) {
            if (array[x] > array[x + 1]) {
                int temp = array[x];
                array[x] = array[x + 1];
                array[x + 1] = temp;
                updateGraphic();
                this.validate();
                try {
                    Thread.sleep(50);
                } catch (InterruptedException ex) {
                    Logger.getLogger(newClass.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:02:53.677

自定义绘制是通过覆盖`paintComponent()`JPanel（或 JComponent）的方法完成的，然后将面板添加到框架中。阅读[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)的 Swing 教程中的部分以获取工作示例。

如果你想为这幅画设置动画，那么你应该使用 Swing Timer 来安排动画。从教程中搜索目录以查找有关`How to Use Swing Timers`详细信息的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:17:18.947

通常，最好不要使用 Thread.sleep 或在绘制方法中执行性能密集型工作。这是因为paint 方法在事件分派线程上执行，Swing 依赖该线程来执行 GUI 更新。相反，在单独的线程中运行您的排序，并在该线程中调用`repaint()`而不是调用`updateGraphic()`。看起来您已经有了一个`bubbleSort()`方法，所以只需像这样调整它：

```
for (int j = 0; j < array.length - 1; j++) {
    for (int x = 0; x < array.length - 1; x++) {
        if (array[x] > array[x + 1]) {
            int temp = array[x];
            array[x] = array[x + 1];
            array[x + 1] = temp;
            repaint();
            try {
                Thread.sleep(50);
            } catch (InterruptedException ex) {
                Logger.getLogger(newClass.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

当然，您需要从您的paint 方法中删除此代码。

# html - 有没有办法让固定宽度 div 的子元素的宽度等于 body 元素？

> ID：15913304
> 
> 赞同：0
> 
> 时间：2013-04-09T21:55:47.940
> 
> 标签：html, css, position, positioning

我有一个固定宽度的容器 div。我希望其中一个子元素与浏览器窗口一样宽。我会将子元素从父容器中取出，但它会破坏功能。我试过这个：

```
.parent { width: 960px; position: relative; left: 50%; margin-left: -480px; }
.child { position: absolute; left: 0; right: 0; width: 100%; } 
```

对此：

```
<body>
    <div class="parent">
        <div class="other">This div's positioning is absolute but dependent on the parent element's relative positioning</div>
        <div class="child>This div wants to be centered and as wide as the browser window</div>
    </div>
</body> 
```

但这不起作用。有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:27:47.080

相对于任意容器/祖先（不一定是直接父级）设置块的大小是 CSS 不支持的必需功能之一。使用现有 CSS 功能的典型解决方案是将整个页面划分为具有自己居中子元素的多条水平线。

例如，在以下示例中，第二个块的宽度为 100%，而第一个和第三个块的宽度有限且居中：

```
<div class="line" id="first"><div>First line (centered)</div></div>
<div class="line" id="second">Second line (100% width)</div>
<div class="line" id="third"><div>Third line (centered)</div></div> 
```

```
.line > DIV {
    margin: 0 auto;
    width: 960px;
}

#first > DIV {background: #f00; }
#second      {background: #0f0; }
#third > DIV {background: #00f; } 
```

见[**现场演示**](http://jsfiddle.net/2fSZX/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:13:37.463

你到底想完成什么？using`position:relative`将导致 using 的任何子元素`position:absolute`从父元素的左上角像素开始。如果您删除它，则 div`position:absolute`内的任何元素`.parent`都将返回到从 div 的左上角像素开始`body`。

假设您使用`.parent`div 的相对定位来进行*放置*，而不是子元素定位（*应该*如何使用），您可以像这样完成同样的事情：

```
<body>
    <div class="parent">
        <div class="child">stuff</div>
    </div>
</body>

body { text-align: center; }
.parent { width: 960px; margin: 0 auto; text-align: left;}
.child { position: absolute; left: 0; right: 0; width: 100%; } 
```

带有大小和颜色属性的 jsfiddle 可帮助说明此处的内容：http: [//jsfiddle.net/Ncy5Y/](http://jsfiddle.net/Ncy5Y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:15:02.190

如果您想保留当前的 ​​CSS 配置，您应该尝试使用 JQuery 执行此操作：

```
$(function() {
    $('.child').width($(window).width());
}); 
```

编辑：

这应该可以工作并且还可以响应窗口宽度：

```
$(function() {
    $('.child').width($(window).width());
    $(window).resize(function(){
        $('.child').width($(window).width());
    });
}); 
```

如果需要，您可以创建一个包含重复行的函数。

编辑2：

要将元素向左对齐，请使用以下命令：

```
$(function() {
    position();
    $(window).resize(function(){
        position();
    });
})

function position() {
    $('.child').width($(window).width()).offset({left: 0, top: 0});
} 
```

# mysql - SWI Prolog ODBC 错误

> ID：15913305
> 
> 赞同：1
> 
> 时间：2013-04-09T21:55:48.190
> 
> 标签：mysql, odbc, swi-prolog

我正在尝试使用 SWI Prolog（使用 ODBC 驱动程序）连接到本地 MySQL 数据库，但收到以下错误

```
?- [family].
% family compiled 0.00 sec, 264 bytes
true.

?- open_db.
ERROR: ODBC: State S1090: [unixODBC][Driver Manager]Invalid string or buffer length 
```

数据库名称：prolog_test

Prolog 代码 (family.pl)

```
open_db :-
    odbc_connect('mysql:dbname=prolog_test;host=localhost', _,
                 [ user('prologuser'),
                   password('prologpass'),
                   alias(localhost),
                   open(once)
                 ]).

children(X) :-
    odbc_query(localhost, 'SELECT (lemma) FROM tableName',X). 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:09:56.330

我使用较弱的替代[odbc_driver_connect](http://www.swi-prolog.org/pldoc/doc_for?object=odbc_driver_connect/3)，它运行良好：

```
myodbc_connect_db(Db, Uid, Pwd, Cn) :-
    format(atom(S), 'driver=mysql;db=~w;uid=~w;pwd=~w', [Db, Uid, Pwd]),
    odbc_driver_connect(S, Cn, [encoding(utf8)]). 
```

根据应用程序的要求，不需要 DSN 可能是一个优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:42:30.337

按照[此处](https://help.ubuntu.com/community/ODBC)和[此处](http://www.1stbyte.com/2012/09/07/unixodbc-on-ubuntu-12-04-broken-and-unable-to-connect-error/)的说明进行操作。

创建文件：/etc/odbc.ini

```
[ODBC Data Sources]
odbcname     = MyODBC 3.51 Driver DSN

[prologtest]
Driver       = /usr/lib/odbc/libmyodbc.so
Description  = MyODBC 3.51 Driver DSN
SERVER       = my.database.server.com
PORT         =
USER         = USER
Password     = XXXXXX
Database     = DBNAME
OPTION       = 3
SOCKET       =

[Default]
Driver       = /usr/local/lib/libmyodbc3.so
Description  = MyODBC 3.51 Driver DSN
SERVER       = localhost
PORT         =
USER         = root
Password     =
Database     = test
OPTION       = 3
SOCKET       = 
```

在我的机器上，libmyodbc.so 位于 /usr/lib/x86_64-linux-gnu/odbc/libmyodbc.so

将 Prolog 代码更改为（更接近[文档](http://www.swi-prolog.org/pldoc/package/odbc.html)）

```
 1 open_wordnet :-
  2         odbc_connect('prologtest', _,
  3                      [ user('prologuser'),
  4                        password('prologpass'),
  5                        alias(prologa),
  6                        open(once)
  7                      ]). 
```

现在我可以查询数据库了

# javascript - 仅 IE 中的 InvalidCharacterError

> ID：15913308
> 
> 赞同：6
> 
> 时间：2013-04-09T21:55:51.740
> 
> 标签：javascript, html, internet-explorer, asp-classic

我们有一个使用 ziplookup 功能的订单，当邮政编码输入到字段中时，城市、县、州和邮政编码会输入到同一字段中。

```
 <tr>
        <td class="formLabel" id="<%=prefix%>.ZipCodeLookup.label">Zip Code</td>
        <td class="formColon">:&nbsp;</td>
        <td class="formData">
            <div id="zipOutput"></div>
            <input type="hidden" id="<%=prefix%>.city" name="<%=prefix%>.city" value="<%=City%>" />
            <input type="hidden" id="<%=prefix%>.county" name="<%=prefix%>.county" value="<%=County %>" />
            <input type="hidden" id="<%=prefix%>.state" name="<%=prefix%>.state" value="<%=State%>" />
            <input type="hidden" id="<%=prefix%>.zip" name="<%=prefix%>.zip" value="<%=Zip %>" />
        </td>
    </tr> 
```

仅在 IE 上的错误是：

lib.functions.dom.createInput// type=text name=shipping.ZipCodeLookup id=shipping.ZipCodeLookup // InvalidCharacterError

lib.objects.window.LookupWidget.createInputField() // 无法设置未定义或空引用的属性“值”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:19:21.567

这里的问题可能是您在HTML的`id`和字段中使用了句点。`name`IE 似乎认为那不是有效的 HTML。对于这种违规行为，大多数浏览器都比 IE 更宽容。另请注意，许多框架允许它通过自动转义。

如果您从这些字段中删除句点，那么一切都应该有效，前提是您的前缀变量中的所有字符都可以在这些字段中使用。

# c++ - 我应该像这样使用 constexpr 吗？

> ID：15913309
> 
> 赞同：5
> 
> 时间：2013-04-09T21:56:01.373
> 
> 标签：c++, c++11, constexpr

我有这个非常简单的函数，我有一些值需要计算但只计算一次，最好的时间是在编译时。这些值仅在此函数中很重要。这是对 constexpr 的一个很好的使用，还是我应该将它们声明为静态 const？

ps 我知道性能差异微乎其微，但我想以“正确的”c++11 方式来做。

```
void MainWindow::UpdateDateTimes()
{
// for some dumb reason DateTime only has add seconds method
    // so we have to calculate the seconds per hour and the number of hours
    // we do this with static constant values so that the calculations
    // only happen once.
    static constexpr const int secsPerHour = 60 * 60;
    static constexpr const int cdtOffsetHours = -5;
    static constexpr const int edtOffsetHours = -4;
    static constexpr const int cetOffsetHours = 2;
    static constexpr const int cdtOffsetSecs = secsPerHour * cdtOffsetHours;
    static constexpr const int edtOffsetSecs = secsPerHour * edtOffsetHours;
    static constexpr const int cetOffsetSecs = secsPerHour * cetOffsetHours;

    QDateTime time( QDateTime::currentDateTimeUtc() );

    ui->mTimeLocal->setDateTime( time.toLocalTime() );

    ui->mTimeCDT->setDateTime( time.addSecs( cdtOffsetSecs ) );
    ui->mTimeEDT->setDateTime( time.addSecs( edtOffsetSecs ) );
    ui->mTimeCET->setDateTime( time.addSecs( cetOffsetSecs ) );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:04:01.217

您的使用很好，即使不是有点冗长。在这种情况下`constexpr`和`const`意思完全一样。任何一个（甚至两者）都可以。

Fwiw，`std::chrono::hours::period::num`将是另一种指定方式`60*60`（如果您想炫耀一些 C++11 信誉:-)）。

或者实际上你可以这样做：

```
void MainWindow::UpdateDateTimes()
{
    constexpr std::chrono::seconds cdtOffsetSecs = std::chrono::hours(-5);
    constexpr std::chrono::seconds edtOffsetSecs = std::chrono::hours(-4);
    constexpr std::chrono::seconds cetOffsetSecs = std::chrono::hours(2);

    QDateTime time( QDateTime::currentDateTimeUtc() );

    ui->mTimeLocal->setDateTime( time.toLocalTime() );

    ui->mTimeCDT->setDateTime( time.addSecs( cdtOffsetSecs.count() ) );
    ui->mTimeEDT->setDateTime( time.addSecs( edtOffsetSecs.count() ) );
    ui->mTimeCET->setDateTime( time.addSecs( cetOffsetSecs.count() ) );
} 
```

我也很想放弃`static`. 在我的系统上，无论有没有`static`. 这一切都发生在编译时，因此不需要`static`“仅一次”初始化语义。

**更新**

为了清楚起见，我将原始示例编辑为：

```
void f(int);

void UpdateDateTimes()
{
    constexpr std::chrono::seconds cdtOffsetSecs = std::chrono::hours(-5);
    constexpr std::chrono::seconds edtOffsetSecs = std::chrono::hours(-4);
    constexpr std::chrono::seconds cetOffsetSecs = std::chrono::hours(2);

    f(cdtOffsetSecs.count());
} 
```

使用 clang++ 和 libc++ 使用 -O1 （几乎没有启用优化）编译它，程序集是：

```
 .globl  __Z15UpdateDateTimesv
    .align  4, 0x90
__Z15UpdateDateTimesv:                  ## @_Z15UpdateDateTimesv
    .cfi_startproc
## BB#0:
    pushq   %rbp
Ltmp2:
    .cfi_def_cfa_offset 16
Ltmp3:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp4:
    .cfi_def_cfa_register %rbp
    movl    $-18000, %edi           ## imm = 0xFFFFFFFFFFFFB9B0
    popq    %rbp
    jmp __Z1fi                  ## TAILCALL
    .cfi_endproc 
```

然后我用相同的设置编译了这个程序：

```
void UpdateDateTimes2()
{
    f(-18000);
} 
```

生成的程序集是：

```
 .globl  __Z16UpdateDateTimes2v
    .align  4, 0x90
__Z16UpdateDateTimes2v:                 ## @_Z16UpdateDateTimes2v
    .cfi_startproc
## BB#0:
    pushq   %rbp
Ltmp7:
    .cfi_def_cfa_offset 16
Ltmp8:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp9:
    .cfi_def_cfa_register %rbp
    movl    $-18000, %edi           ## imm = 0xFFFFFFFFFFFFB9B0
    popq    %rbp
    jmp __Z1fi                  ## TAILCALL
    .cfi_endproc 
```

所以恕我直言，这几乎是一个人得到[免费午餐](http://en.wikipedia.org/wiki/TANSTAAFL)的时候了。:-)

# ios - 在 iOS 中重新获取背景中的麦克风

> ID：15913312
> 
> 赞同：4
> 
> 时间：2013-04-09T21:56:06.713
> 
> 标签：ios, audiounit, avaudiosession, avaudiosessiondelegate

我正在尝试在应用程序处于后台时获取麦克风。我正在使用音频单元技术，并且能够在后台录制音频。但是一旦我的 AudioSession 被中断，我就无法在后台使用应用程序重新启动 AudioSession。注意：如果应用程序在前台，我可以重新启动 AudioSession。下面是中断对应的代码：

```
- (void) beginInterruption {
    [[AVAudioSession sharedInstance] setActive:NO error:&error];
    AudioOutputUnitStop(m_audioUnit);
}
- (void) endInterruptionWithFlags:(NSUInteger) flags{
    [[AVAudioSession sharedInstance] setActive:YES error:&error];
    AudioOutputUnitStart(m_audioUnit);
} 
```

AudioSession设置对应的代码

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryRecord error:&error];
[[AVAudioSession sharedInstance] setActive:YES error:&error]; 
```

AudioUnit对应的代码

```
// Describe audio component
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

// Get component
AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

// Get audio units
oserr = AudioComponentInstanceNew(inputComponent, &m_audioUnit);
checkStatus(oserr);

// Enable IO for recording
UInt32 flag = 1;
oserr = AudioUnitSetProperty(m_audioUnit,
                             kAudioOutputUnitProperty_EnableIO,
                             kAudioUnitScope_Input,
                             1,
                             &flag,
                             sizeof(flag));
checkStatus(oserr);

UInt32 enableOutput        = 0;    // to disable output
AudioUnitElement outputBus = 0;

// Disable output
oserr = AudioUnitSetProperty (
                              m_audioUnit,
                              kAudioOutputUnitProperty_EnableIO,
                              kAudioUnitScope_Output,
                              outputBus,
                              &enableOutput,
                              sizeof (enableOutput)
                              );
checkStatus(oserr);

oserr = AudioUnitInitialize(m_audioUnit);

oserr = AudioOutputUnitStart(m_audioUnit); 
```

大多数流行的录音应用似乎都不支持它，即使是 iOS 原生的“语音备忘录”在启动 Siri 时也会暂停。

这些是我在 EndInterruption 中遇到的错误：AUIOClient_StartIO failed (-12985) AURemoteIO::ChangeHardwareFormats: error -10875

有没有人在应用程序处于后台时成功重新获取麦克风？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:21:25.043

添加后我得到了这个工作

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

在`viewDidAppear`. 感谢[后台发布的 MPMoviePlayerController / AVAudioSession 在来电后不会重新开始播放](https://stackoverflow.com/questions/4668548/mpmovieplayercontroller-avaudiosession-in-background-doesnt-restart-play-afte)

我不清楚 beginReceivingRemoteControlEvents 是如何影响这里的 AudioSession 的。

我观察到的另一件重要的事情是与接听/拒绝电话无关，您确实会收到 endInterruption 事件。Apple 文档让您认为在接听电话的情况下您可能不会收到 endInterruption

# dart - 如何创建可以将位置子元素作为参数的组件（Dart）？

> ID：15913315
> 
> 赞同：4
> 
> 时间：2013-04-09T21:56:28.123
> 
> 标签：dart, dart-webui

我正在寻找有关如何制作可以采用位置子参数的 web 组件的资源。就像是：

```
<x-editable-component>
  <span>{{value}}</span> // this could be any uneditable element
  <textarea>{{value}}</textarea> //could be any editable element
</x-editable-component> 
```

上面的元素将在可编辑 == false 时显示一个跨度，在可编辑 == true 时显示一个文本区域。editable 是一个全局观察的静态变量。

我认为有可能通过继承获得这种组合行为。但是，我想知道是否有可能以上述可组合方式执行此操作。组件 (x-editable-component) 只需要两个子组件，一个子组件在可编辑时显示，另一个子组件在不可编辑时显示。

需要明确的是，我希望灵活地将任何两个孩子编写为 x-editable-component 的孩子，所以也许在更远的地方我有一个这样编写的 x-editable 组件。

```
<x-editable-component>
  <div>{{value}}</div> // this could be any uneditable element
  <input>{{value}}</input> //could be any editable element
</x-editable-component> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:50:22.367

这听起来对`<content>`标签很有用。

```
<element name="my-editable-component">
  <template>
    <div style="display: {{editing ? 'block' : 'none'}}">
      <content select=".editing"></content>
    </div>
    <div style="display: {{editing ? 'none' : 'block'}}">
      <content select=".normal"></content>
    </div>
  </template>
  <script type="application/dart">
    class MyEditableComponent extends WebComponent {
      bool editing = false;
      // ...
    }
  </script>
</element> 
```

这里我使用类，但你可以想出任何你想要的协议。`<content select="">`可以使用大多数 CSS 选择器。

这将像这样使用：

```
<my-editable-component>
  <div class="normal">{{value}}</div>
  <input class="editing">{{value}}</input>
</my-editable-component> 
```

有关“内容”的更多信息可以在[web-ui 文章](http://www.dartlang.org/articles/web-ui/#composition)中找到，或者您可以在[shadowdom 规范](https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html#shadow-dom-example)中查看示例。

请注意：我使用`display: none`而不是`<template if>`解决方法[https://github.com/dart-lang/web-ui/issues/228](https://github.com/dart-lang/web-ui/issues/228)

# c# - twitter bootstrap手风琴通过asp.net中的querystring参数扩展

> ID：15913317
> 
> 赞同：1
> 
> 时间：2013-04-09T21:56:50.167
> 
> 标签：c#, asp.net, jquery-ui, twitter-bootstrap, accordion

我有 twitter 引导手风琴控件，它有三行。我想要实现的是，例如，如果在 url 查询字符串中有参数，比如手风琴 = 1、手风琴 = 2 或手风琴 3，则在页面加载时扩展适当的手风琴。这是我的标记：

```
 <div class="accordion" id="accordion2">
                    <div class="accordion-group">
                      <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                  Accordion One
                        </a>
                      </div>
                      <div id="collapseOne" class="accordion-body collapse" style="height: 0px; ">
                        <div class="accordion-inner">                                                            
                            <!-- Content One Begin -->

                            <!-- Content One End -->
                        </div>
                      </div>
                    </div>
                    <div class="accordion-group">
                      <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                     Accordion Two
                        </a>
                      </div>
                      <div id="collapseTwo" class="accordion-body collapse" style="height: 0px; ">
                        <div class="accordion-inner">
                           <!-- Annuity Policy Content Begin -->                                      

                              <!-- Annuity Policy Content End -->
                        </div>
                      </div>
                    </div>
                    <div class="accordion-group">
                      <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
                    Accordion Three
                        </a>
                      </div>
                      <div id="collapseThree" class="accordion-body collapse" style="height: 0px; ">
                        <div class="accordion-inner">                                                    

                        </div>
                      </div>
                    </div>                                                         
                </div> 
```

欢迎任何建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:04:45.153

您可以创建一个 javascript 函数来解析查询字符串，如此 SO 答案所示：[Parse Querystring](https://stackoverflow.com/a/3855394/1036025)。然后，您可以调用折叠模块的显示操作。

```
// document ready
(function() {
    var qs = (function(a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i)
        {
            var p=a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'));

    var id = (qs[accordion] ? qs[accordion] : 1); // default = 1
    $('#accordion' + id).collapse('show');
})(); 
```

**编辑：**您可以简单地从服务器端放置 id，而不是在 javascript 中解析查询字符串（如果您不使用 ASP.NET MVC，否则使用**kadumel**答案）。

```
(function() {
    var id = <%= Request.QueryString["accordion"] %>;
    $('#accordion' + id).collapse('show');
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:07:04.163

在您的控制器中

```
Public ViewResult Index(int accordionId)
{
    ViewBag.AccordionId = accordionId;
    return View();
} 
```

在你看来

```
{
@Html.Title = ViewBag.Title;
var accrdId = ViewBag.AccordionId;
} 
```

然后在你的脚本中加载手风琴后使用类似 jpmorin 的东西说 -

```
$('#accordion' + accrdId).collapse('show'); 
```

# java - 如何在junit测试中停止cassandra嵌入式服务器

> ID：15913318
> 
> 赞同：2
> 
> 时间：2013-04-09T21:57:00.600
> 
> 标签：java, junit, cassandra

我在单元测试中使用嵌入式 cassandra 服务器。如果我单独运行 junit 测试，一切正常，并且测试不会失败。但是当我使用 maven (maven install) 构建应用程序时，我在第二个测试文件之前收到此错误

> 错误 me.prettyprint.cassandra.connection.HConnectionManager - HConnectionManager shutdown() 出现故障？：shutdown() 调用非活动池：：{127.0.0.1(127.0.0.1):9272}

我的意思是这是因为 cassandra 服务器没有关闭并且仍在运行。是这样的[https://github.com/jsevellec/cassandra-unit/pull/39](https://github.com/jsevellec/cassandra-unit/pull/39)

你能帮我解决这个问题吗？如何在测试文件之间正确关闭 cassandra 服务器？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:42:49.177

您应该尝试重新创建数据库，而不是关闭 Cassandra 服务器。这也是 Playorm 在测试中所做的。你可以看看

[https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestIndexes.java](https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestIndexes.java)

因此，您可以看到他们正在使用 @Before 和 @After 注释来创建和删除数据库。

# javascript - 在开始使用 Ember.js 时，Rails 或服务器端开发人员应该进行哪些思维模式转变？

> ID：15913324
> 
> 赞同：8
> 
> 时间：2013-04-09T21:57:35.753
> 
> 标签：javascript, ruby-on-rails, model-view-controller, ember.js

虽然我最近的大部分工作主要是使用 Ruby on Rails 和大量的 Javascript（主要是 jQuery），但我想构建一个单页应用程序并意识到 Ember.js 似乎是一个新兴的流行框架用于接近此类应用程序。

从各种文档和教程来源来看，Ember.js 似乎需要一种与 Ruby on Rails 或其他典型服务器端框架截然不同的思考方式来解决问题。使用诸如 Ruby on Rails 之类的框架随着时间的推移而开发的关于“事情应该如何工作”的某些假设甚至可能会妨碍真正理解和接受“Ember 方式”。

Ruby on Rails 开发人员在尝试学习 Ember 时需要消除哪些先入为主的观念？Ruby on Rails 开发人员应该尝试思考的最具创新性和最重要的 Ember 概念是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T14:47:04.997

我将通过列出 Ember 和 Rails 之间的一些主要技术差异，在 StackOverflow 的精神内尽力回答这个问题。[我将在programmers.stackexchange.com](https://softwareengineering.stackexchange.com/)上将更哲学的一面留给其他人。

如果可以帮助您可视化所有内容如何组合在一起，您可以在[工作的 jsFiddle](http://jsfiddle.net/ekidd/qNc3Q/)中找到下面的所有代码示例。

### 集合和对象的单独路由

Ember 和 Rails 之间的一个主要区别是集合路由（管理对象列表）和项目路由（管理单个对象）之间的关系。在 Rails 中，这些都由单个资源控制器处理。在 Ember 中，这些通常由两个单独的路由处理，因为它们操纵两种不同的数据结构：

```
App.Router.map(function () {
  this.route("posts", { path: "posts" });
  this.route("post", { path: "post/:post_id" });
});

App.PostsRoute = Ember.Route.extend({
  model: function (params) {
    return App.Post.find();  
  }
});

App.PostRoute = Ember.Route.extend({
  model: function (params) {
    return App.Post.find(params.post_id);  
  }
}); 
```

### 路由 vs. 控制器 vs. 视图 vs. 模板

在 Rails 中，您的代码分为三大类：

*   模型：对数据库行的面向对象抽象。
*   视图：可由控制器呈现的模板。
*   控制器：接受 HTTP 请求、加载和操作模型、渲染视图。

在 Ember 中，职责的划分有很大不同。

**楷模。**Ember 模型的工作方式与 Rails 模型非常相似。

```
App.Post = DS.Model.extend({
  title: DS.attr("string"),
  body: DS.attr("string"),
  comments: DS.hasMany("App.Comment")
}); 
```

**路线。**路由表示您的应用程序中用户可见的位置，它们对应于 URL，例如`/post/7`或`/about`。正如您在上面的代码示例中看到的，路由在 Ember 中做了更多的事情。最重要的是，他们查找与给定 URL 对应的模型。他们还负责连接适当的控制器和视图，稍后您将看到。

**控制器。**控制器与 Rails 完全不同！关于 Ember 控制器需要理解的两个最重要的事情是：（1）它们基本上是模型对象周围的智能代理，（2）它们通常是单例的。因此，您将只有一个`PostController`将连接到您现在正在查看的任何帖子。

一般来说，您使用 Ember 控制器来管理不属于 URL 或数据库的瞬态状态。这是一个例子：

```
App.PostController = Ember.ObjectController.extend({
  // This shared between all posts for as long as the app runs (because
  // this controller is a singleton), but it doesn't get saved in the database
  // (because this is a controller, not a model).
  lowRatedCommentsShown: false,

  // Called by PostView or its template in response to an HTML event.
  showLowRatedComments: function () {
    this.set("lowRatedCommentsShown", true);
  },

  // Called by PostView or its template in response to an HTML event.
  hideLowRatedComments: function () {
    this.set("lowRatedCommentsShown", false);
  } 
}); 
```

因为 Ember 控制器是模型的代理，它们也倾向于积累*几乎*属于模型的逻辑，但感觉与应用程序中的特定屏幕联系得太紧密了。

**视图和模板。**Ember 视图和模板一起工作。最好将它们视为 GUI 小部件。

```
App.PostView = Ember.View.extend({
  // This can be omitted when we're created by a route.
  templateName: 'post'

  // Any HTML event handlers would go here if we needed them.  Our job is to
  // map between HTML events and events understood by the controller.
  //doubleClick: function (evt) {
  //  // We'll actually bind this to a specific button, not a click event.
  //  this.get("controller").send("showLowRatedComments");
  //}
}); 
```

我们的帖子模板自由地混合了模型定义的字段和控制器定义的字段：

```
<script type="text/x-handlebars" data-template-name="post">
  <h2>{{title}}</h2>

  <div class="body">{{body}}</div>

  {{#if lowRatedCommentsShown}}
    <button {{action 'hideLowRatedComments'}}>Hide Low-Rated Comments</button>
  {{else}}
    <button {{action 'showLowRatedComments'}}>Show Low-Rated Comments</button>
  {{/if}}

  {{partial "comments"}}
</script> 
```

请注意，随着我们模型或控制器上的字段发生变化，视图将自动重新呈现 HTML 中需要更新的那些部分！

### 异步行为、计算属性和绑定

因为 Ember.js 在浏览器中运行，所以很多操作都是异步的。Ember 的许多基本设计都是基于使异步更新变得愉快和容易。这种情况的一个关键后果是对象异步加载。当你调用 时`find`，你会得到一个卸载的对象：

```
post = App.Post.find(params.post_id)
post.get("isLoaded"); // -> false
post.get("title");    // -> not yet available 
```

当服务器向您发送数据时，您将看到：

```
post.get("isLoaded"); // -> true
post.get("title");    // -> "Post #1" 
```

为了让这一切变得轻松，Ember 严重依赖于[计算属性](http://emberjs.com/guides/object-model/computed-properties/)、[观察者](http://emberjs.com/guides/object-model/observers/)和[绑定](http://emberjs.com/guides/object-model/bindings/)。在每种情况下，关键思想是数据的更改应该自动在系统中传播。例如，我们可以使用计算属性来确保在评论更改`isLowRated`时随时更新：`rating`

```
App.Comment = DS.Model.extend({
  post: DS.belongsTo("App.Post"),
  body: DS.attr("string"),
  rating: DS.attr("number"),

  isLowRated: function () {
    return this.get("rating") < 2;
  }.property("rating") // A list of properties we depend on.
}); 
```

请注意，Ember 的 Handlebars 模板与该系统深度集成。当您`{{title}}`在模板中编写代码时，您会建立一个绑定，该绑定将在 DOM 发生更改时自动更新`title`。在编辑字段的情况下，此绑定在两个方向都有效！对显示值的更改将直接推送回模型（尽管事务可能用于回滚）。

还值得记住的是，许多动态更新（尤其是绑定）在当前“运行循环”结束时异步运行。`Ember.run`这就是为什么你会经常在测试套件中看到调用：

```
Ember.run(function () {
  // Change some bindings here. Not all changes will propagate immediately.
});
// Test that the values have all propagated here, after the run loop is done. 
```

在实践中，Ember 感觉比 Rails 异步得多，但不如 Node.js 这样的事件系统异步。这是因为大多数异步更新都是由绑定自动管理的。

### 幸存的 Ember 数据

这是我将偏离严格的技术细节并提及一些实用建议的地方。Ember Data 提供`DS.Model`，见上。它不是 Ember.js 的唯一模型层——查看[ember-rest](https://github.com/cerebris/ember-rest)、[ember-resource](https://github.com/staugaard/ember-resource)和类似库以获取替代方案。目前，Ember Data 还没有正式发布，但如果您喜欢生活在最前沿，可以*非常谨慎地在生产应用程序中使用它。*一些技巧：

1.  几个主要的弱点包括验证、延迟加载和多个打开的事务。在提交 Ember Data 之前，请编写几个小型测试程序以确保它可以真正完成您需要它做的事情。
2.  不要与 RESTAdapter 争吵。准确地[提供它想要的 JSON](http://emberjs.com/guides/models/the-rest-adapter/)，即使这意味着构建一个代理。特别是，目前这意味着`hasMany`在序列化对象时为 Rails 中的每个关系序列化一个完整的 ID 列表。如果您使用的是 Rails，请参阅[active_model_serializers 。](https://github.com/rails-api/active_model_serializers)
3.  不要太专注于特定的设计。相反，要准备好偶尔绕过限制并做出妥协。

使用 Ember Data 可以获得非常好的结果。但它远不如 ActiveModel 成熟，因此需要这样对待。

# android - 使用来自 UI 的消息在循环时中断线程

> ID：15913325
> 
> 赞同：0
> 
> 时间：2013-04-09T21:57:51.497
> 
> 标签：android, multithreading, messaging, looper

我确信我的问题的解决方案将是那些“duh”时刻之一，但我被困住了，所以任何有用的提示都会被感激地收到。

问题：我有一个带有后台线程的 UI。UI 有一个启动/停止按钮，用于启动和停止线程中的进程。这是使用从 UI 到包裹在循环器中的线程中的消息处理程序的消息来实现的。线程进程处于依赖于线程消息处理程序设置的布尔值 true/false 的 while 循环中。但是，一旦开始，就不会再处理任何消息，并且循环会无限继续。

```
private class MyThread extends Thread{
    public void run() {
      Looper.prepare();
          MyThreadChildHandler = new Handler() {
              public void handleMessage(Message msg) {
                  switch(msg.arg1) {
                 case START:
                          boolLoop = true;
                          doWhileLoop();
                     case STOP:
                          boolLoop = false;
                     }
          };
      Looper.loop();
    }

    private void doWhileLoop(){
        while (boolLoop = true){
            stuff.do
        }
        finish.do
    }

} 
```

我在 UI 的 STOP 消息上收到了一条 logcat 消息，并且正在触发，但是线程永远不会拾取它，因为它卡在 while 循环中并且消息处理程序没有得到查看。

有没有办法让线程处理程序在各个点检查来自 while 循环内的消息？或者是否有另一种方法可以根据来自 UI 的消息来启动和停止基于线程的连续 while 循环？

干杯安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:00:37.037

改变：

```
 while (boolLoop = true){
            stuff.do
        } 
```

至：

```
 while (boolLoop == true){
            stuff.do
        } 
```

或者最好

```
 while (booloop){
          stuff.do
        } 
```

您需要检查相等性（==）而不是分配（=）。

还有一件事是你不需要一个活套对象。只需使用 while 循环来控制它。我会这样做：

我会让线程无限期地执行其进程，直到它超时或来自控制该线程的处理程序的消息通过在两个类之间共享的标志变量（如 Activity 和 Thread）停止执行该线程。活动的状态控制线程的位置。例如，假设应用程序进入后台，此时您将运行标志设置为 false，以便它停止。您的`Looper`执行是不必要的。消息传递的方式也是通过处理程序。

# javascript - 使用 createAudioPlayer 播放音频时出错

> ID：15913331
> 
> 赞同：1
> 
> 时间：2013-04-09T21:58:59.463
> 
> 标签：javascript, ios, audio, trigger.io

我想[在我的应用程序中播放音频](http://docs.trigger.io/en/v1.4/modules/media.html)。

运行以下命令时：

```
forge.file.getLocal("audio/it's time for your.mp3", function(file) {
  debug(null,file);
  forge.media.createAudioPlayer(file.uri, function(player) {
    debug(player);
    player.play();
  }, function(err) {
    error(err);
  });
}); 
```

我收到以下错误：

```
[FORGE] '{"message":"Failed to load audio file","type":"EXPECTED_FAILURE","subtype":null} 
```

`.m4a`（我真正想玩的）、`.aiff`和 也是如此`.ac3`。

我知道它正在查找文件：

```
{"uri":"/var/mobile/Applications/AC963D11-88EC-4559-9C2E-68F666AC44D5/Library/Application Support/Forge/assets-7CF461FB-5BE1-445E-A51E-CA69CFCFF122/src/audio/it\'s time for your.ac3"} 
```

这里有什么错误？我正在使用带有 iOS 6.1.3 的 iPhone 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:09:20.930

事实证明，您只需要使用`file`而不是`file.uri`作为参数。

# ruby-on-rails-3 - Sunspot solr 搜索只能从一页开始？

> ID：15913337
> 
> 赞同：0
> 
> 时间：2013-04-09T21:59:24.207
> 
> 标签：ruby-on-rails-3, search, sunspot, sunspot-rails

我正在按照此处提到的说明进行操作[Rails 3: sunspot solr : added search capability for each page](https://stackoverflow.com/questions/6005766/rails-3-sunspot-solr-adding-search-ability-for-every-page)

但是，它似乎对我不起作用。我正在尝试实现类似 twitter 的搜索功能，其中搜索栏位于导航栏中的顶部，并且可以通过应用程序中的任何页面进行搜索，并将它们带到搜索结果页面。

当我在帖子主页（views/posts/index.html.erb）中通过浏览器中的搜索查询时

```
http://localhost:3000/post?utf8=%E2%9C%93&search=test&commit=Search 
```

它返回所需的搜索结果。但是当我在应用程序的其他页面并尝试搜索它时，它会在地址栏中形成 url，如下所述，并且永远不会通过在视图/布局/中声明的顶部导航栏中的搜索框进行搜索application.html.erb 页面。

```
http://localhost:3000/users/1/following?utf8=%E2%9C%93&search=test&commit=Search

http://localhost:3000/posts/1/favorite?utf8=%E2%9C%93&search=test&commit=Search 
```

以下是详细信息：-

我的模特 **post.rb**

```
searchable do
    text :title, :tag_list 
  end 
```

我的控制器 - **posts_controller.rb**

```
def index

      if params[:search]

        @search = Post.search do
          fulltext params[:search]
          paginate :page => params[:page], :per_page => 5        
        end

        @posts = @search.results
      else

              @posts = @posts.plusminus_tally({:order => "vote_count ASC"}).page(params[:page]).per(6)   

       end

      respond_to do |format|
        format.html 
        format.json { render json: @posts}
      end
  end 
```

查看 - **layouts/application.rb**

```
 <%= form_tag posts_path, :method => :get do %>
                    <div class="input-append">
                      <%= text_field_tag :search, params[:search] , :class => "span2 search-query", :style => 'width:200px' %>
                      <%= submit_tag "Search", :post => nil , :class => "btn" %>
                    </div>  
                  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:00:39.280

我终于想通了。这需要在当前页面的每个控制器上调用，以将搜索帖子重定向到其搜索结果页面（在本例中为 Posts#index）

**最喜欢的控制器** 和**用户控制器**

```
 if params[:search]
             search_param = CGI::escapeHTML(params[:search])    

             redirect_to ("/posts?search=#{search_param}&commit=Search") 

            return
       end 
```

# php - 无法在 MySQL 中插入图像

> ID：15913338
> 
> 赞同：0
> 
> 时间：2013-04-09T21:59:29.737
> 
> 标签：php, mysql

我正在上传并请求 id 以在上传后检索图像。但是，在我检索之前，我什至可以将它插入到我的 MySQL 数据库中；

顺便说一句，问题出在第 19 行，即

```
"$query = "INSERT INTO profilepicture (`id`,`name`,`image`) VALUES ('','".$image_name."','".$image."')";" 
```

这是我使用的代码

```
<?php
 $con = mysqli_connect('127.0.0.1', 'root', '', 'test');
$files = $_FILES['uploadProfilePicture']['tmp_name'];

 if(!isset($files)){
echo("wrong file");
 }else
 {
$image = file_get_contents($_FILES['uploadProfilePicture']['tmp_name']);
$image_name = $_FILES['uploadProfilePicture']['name'];
$image_size = getimagesize($_FILES['uploadProfilePicture']['tmp_name']);

if($image_size == false) 
{
    echo("Thats is not an image");
}else
{
    $query = "INSERT INTO profilepicture (`id`,`name`,`image`) VALUES ('','".$image_name."','".$image."')";
    if(!$insert = mysqli_query($con, $query))
    {
    echo("problem uploading");  
    }else
    {

        $lastid = mysql_insert_id();
        echo "image uploaded.</p> Your Image</p> <img src=getImage.php?id=".$lastid.">";
    }
}
 }
 ?>

<div class="loginCheck">
        <div class="profilePicture">
            <form action="ProfileImages/FileUpload.php" method="POST" enctype="multipart/form-data">
                <input  type="file" name="uploadProfilePicture"/> <input type="submit" value="Upload" />
            </form>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:04:03.157

我敢打赌，您对这条线有疑问：

```
$image = file_get_contents($_FILES['uploadProfilePicture']['tmp_name']); 
```

试试这个：

```
$image = mysql_real_escape_string(file_get_contents($_FILES['uploadProfilePicture']['tmp_name'])); 
```

您需要转义该字符串。它可能有一个报价。您应该考虑使用[准备好的语句](https://stackoverflow.com/questions/9629328/how-to-use-mysqli-prepared-statements-in-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T22:34:35.037

这个字符串应该如何构造？

```
"$query = "INSERT INTO profilepicture (`id`,`name`,`image`) VALUES ('','".$image_name."','".$image."')";" 
```

如上？或者：

```
$query = "INSERT INTO profilepicture (`id`,`name`,`image`) VALUES ('','".$image_name."','".$image."')"; 
```

`$`注意到在和之前删除了引号`;`吗？

# ios - AvAudioRecorder 记录到 AsyncSocket NSData

> ID：15913341
> 
> 赞同：1
> 
> 时间：2013-04-09T21:59:38.803
> 
> 标签：ios, objective-c, avaudiorecorder, asyncsocket

嘿大家我有相当长的时间试图弄清楚什么（应该）非常直截了当。我有一个打开的套接字，我只想将从麦克风捕获的 AAC 音频数据传输到它。似乎使用 AV 录音机您必须指定一个文件，所以我指定了一个内存文件。如何捕获并仅通过管道连接到套接字？

我在想也许我需要设置一个计时器并每隔一段时间取出文件的内容，但这似乎是错误的方法。

我对 iOS 比较陌生，所以任何指针都会有所帮助。

再一次，**最终目标**是获取这些记录的数据并将其实时（伪）推送到套接字。

记录当前工作正常的音频的代码。

```
NSString *tempDir = NSTemporaryDirectory();
NSString *soundFilePath = [tempDir stringByAppendingPathComponent:@"sound.m4a"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
//NSString *path = [soundFileURL absoluteString];
//NSLog(path);

NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                [NSNumber numberWithFloat:16000.0], AVSampleRateKey,
                                [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                                nil];
NSError *error = nil;
recorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL settings:recordSettings error:&error];
if (!recorder) {
    NSLog(@"audioRecorder: %@ %d %@", [error domain], [error code], [[error userInfo] description]);
    return;
}

[recorder prepareToRecord];
session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
[session setActive:YES error:nil];
[recorder record]; 
```

使用 AsyncSocket 向套接字发送标准字符串的代码：

```
NSString *string = [NSString stringWithFormat:@"Lame thing passed%@"
                    "\r\n", standard_string];

string = [[NSString alloc] initWithString:string];

NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];
[string release];

NSLog(@"Sending HTTP Request.");
[socket writeData:data withTimeout:-1 tag:5]; 
```

# php - AWS SDK PHP (2) cURL 超时安全检查

> ID：15913347
> 
> 赞同：1
> 
> 时间：2013-04-09T22:00:14.430
> 
> 标签：php, curl, amazon-web-services, timeout

这段代码有一些问题：

```
$ec2 = Ec2Client::factory(array(
        'AWS_KEY' => AWS_KEY,
        'AWS_SECRET_KEY' => AWS_SECRET_KEY,
        'region' => 'us-east-1',
    )); 

echo "<pre>";
var_dump($ec2->describeInstances()); 
```

我经常收到这个：

```
Fatal error: Uncaught exception 'Guzzle\Http\Exception\CurlException' with message '[curl] 28: Connection time-out [url] http://169.254.169.254/latest/meta-data/iam/security-credentials/' in /**/**/**/htdocs/**/vendor/Guzzle/Http/Curl/CurlMulti.php:578 
```

如果我使用`$aws = AWS::factory()`后跟，我也会收到这个`$ec2 = $aws->get('ec2')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:41:51.417

例外情况是因为您没有正确指定密钥和秘密密钥，因此代码（自动）尝试从该 URL 获取 IAM 凭证。

你应该在你的数组中使用'key'和'secret'。

```
$ec2 = Ec2Client::factory(array(
        'key' => AWS_KEY,
        'secret' => AWS_SECRET_KEY,
        'region' => 'us-east-1',
    )); 
```

# spotify - 开发一个独立的应用程序

> ID：15913350
> 
> 赞同：0
> 
> 时间：2013-04-09T22:00:18.727
> 
> 标签：spotify

我想为 LG 电视开发一个 spotify 应用程序。这些电视只运行 JS Web 应用程序。我可以使用 Spotify Apps API 在该电视上开发独立应用程序吗？还是需要安装 Spotify 客户端本身？
作为替代方案，我一直在考虑使用 emscripten 将 libspotify 从 C 转换为 JS。你们中的一个人能否告诉我这些想法中的一个是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:58:49.877

Apps API 仅在 Spotify 桌面客户端中可用，Emscripten 不会将 libspotify 转换为 Javascript。

您可以使用 Spotify 的 Web API 来编写应用程序，但这仅限于搜索和执行元数据请求 - 没有播放或播放列表。

# php - PHP 正在生成多个会话

> ID：15913352
> 
> 赞同：0
> 
> 时间：2013-04-09T22:00:26.427
> 
> 标签：php, session

我不确定这里出了什么问题，但我已经尝试了一切来解决一个非常烦人的问题，这个问题现在一直困扰着我的网站，那就是 PHP 为每个用户生成多个会话。

目前，我是唯一使用该站点的人，所以我完全知道其他人不可能创建会话，但是，可以肯定的是，我在会话类中启动 session_start() 后立即存储了 IP 地址..低头看，这是我的IP地址不断生成。登录后，数据库中又添加了 5 或 6 条记录，每条记录都包含我的 IP 地址，只有一条包含会话信息。

现在，该网站运行良好，但我知道这是不正常的行为。我只调用 session_start() 一次，除了登录之外，我没有在站点上的任何地方调用 regenerate_id，但是即使在登录之前，只要我访问该站点，就会添加三个记录。

我想知道这是否是一个已知问题，以及是否有人可以梳理我的代码，看看他们是否能看到任何可能导致这种奇怪行为的东西，因为不幸的是，谷歌上的一个小时左右和搜索 SO 没有裁剪大部分结果（除了保存问题的未回答问题）

```
class Sessions {

private $life_time, $database;

public function __construct()
{
    $this->life_time = DatabaseConfig::read('SESSION_MAX_LIFETIME'); // Set within a config file, returns 1440
    $this->database = DatabaseCore::getInstance(); // Basically allows me to create only one instance of the database to avoid overhead from multiple persistent connections.

    session_set_save_handler( 
        array( &$this, "NewSession" ), 
        array( &$this, "CloseSession" ),
        array( &$this, "ReadSession" ),
        array( &$this, "WriteSession"),
        array( &$this, "DestroySession"),
        array( &$this, "CleanSessions" )
    );

    session_name("SESSION_GEEK_PANEL"); 
    session_start();
}

public function NewSession( $save_path, $session_name ) {

    $sess_save_path = $save_path;

    return true;

}

public function ReadSession( $id ) {

    $sth = $this->database->dbh->prepare("SELECT `session_data` FROM `sessions` WHERE `session_id` = :session_id ");
    $sth->execute(array(
        ':session_id'    => $id
    ));

    if( $sth->rowCount() > 0 )
    {
        $row = $sth->fetch();
        $data = $row['session_data'];
    }

    return $data;

}

public function WriteSession( $id, $data ) {

    $sth = $this->database->dbh->prepare("REPLACE `sessions` (`session_id`, `session_data`, `expires`) VALUES( :id, :data, :expires )");

    $sth->execute(array(
        ':id'    => $id,
        ':data' => $data,
        ':expires' => time() + $this->life_time
    ));

    return true;

}

public function DestroySession( $id ) {

    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );

    $sth = $this->database->dbh->prepare("DELETE FROM `sessions` WHERE `session_id` = :id");
    $sth->execute(array(
        ':id' => $id
    ));

    return true;

}

public function CleanSessions() {

    $sth = $this->database->dbh->prepare("DELETE FROM `sessions` WHERE `expires` < :time");
    $sth->execute(array(
        ':time' => time()
    ));

    return true;

}

public function CloseSession() {

    return true;

}
}
DatabaseConfig::write('SESSION_MAX_LIFETIME', MAX_SESSION_LIFE); 
```

非常感谢所有帮助，最后..这可能是主机或 PHP INI 文件的错误吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:08:26.883

你检查过 PHP INI 中的 session.auto_start 吗？

# php - HTML 表单不发布或检索值

> ID：15913358
> 
> 赞同：3
> 
> 时间：2013-04-09T22:00:54.290
> 
> 标签：php, html, forms

这是一个标准的 HTML/PHP 表单。我的代码看起来不错，但由于某种原因，echo 语句（标准调试措施）不起作用。任何想法为什么？

```
<html>
<head>
<title>Search</title>
</head>
<body>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="POST">
Symbol: <input type="text" name="symbol" />
<br />
Start Date:
<select name="month_start">
<option value="1">January</option>
<option value="2">February</option>
<option value="3">March</option>
<option value="4">April</option>
<option value="5">May</option>
<option value="6">June</option>
<option value="7">July</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select>

<br />

...
<input type="submit" value="Submit">
</form>

</body>
</html>

<?php
if(isset($_POST['submit'])) {

    $SYMBOL = $_POST['symbol'];
    echo "$SYMBOL";
    $MONTH_START = $_POST['month_start'] - 1;
    echo "$MONTH_START;

?> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:03:29.637

好吧，我注意到你错过了`"`最后一个回声的结束，而是改为：

`echo "$MONTH_START;"`（假设不是错字）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:08:41.813

3个问题-首先您的表单操作应该是`<?php echo $_SERVER['PHP_SELF'] ?>`，其次，您的第二个回显语句中有语法错误，应该是`echo "$MONTH_START";`（您缺少结束引号，尽管如果您只回显变量，则不需要引号.) 最后，`name="submit"`当您发布变量包含适合您的显示条件的正确提交键时，您需要添加到您的提交按钮

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T22:14:22.437

你没有设置`$_POST['submit']`，所以它永远不会回显任何东西。
测试是否设置了一个字段（您正在使用）：

```
<?php
 if(isset($_POST['symbol'])) {

   $SYMBOL = $_POST['symbol'];
   echo "$SYMBOL";
   $MONTH_START = $_POST['month_start'] - 1;
   echo "$MONTH_START";
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T22:40:51.457

为了获得`action`属性中的任何值，您必须在变量中添加回显，如下所示`<?php echo $_SERVER['PHP_SELF']; ?>`：但是，这无济于事，因为您可以这样做`<form method="post" action="">`，它仍然会 POST 到同一页面。

其次，您需要在最后一行添加额外`"`内容，使其`echo "$MONTH_START";`.

此外，您尝试捕获的变量永远不会被设置，因为它不是您表单的一部分。试试看`print_r($_POST);`。

您会得到两个变量：`$_POST['symbol']`并且`$_POST['month_start']`- 在采取任何行动之前，您应该检查是否设置了其中一个（或两个）。

希望能帮助到你！:)

# vba - If-Then-Else 语句未运行 Else 语句

> ID：15913366
> 
> 赞同：0
> 
> 时间：2013-04-09T22:01:20.953
> 
> 标签：vba, excel, if-statement

我需要第二双眼睛，我无法让这段代码正确运行。我试图让代码做的是，如果按下“复选框 47”然后根据单元格 E43 的值隐藏不同的行，但是如果没有按下复选框，那么无论什么都隐藏行 45:55单元格 E43 的值为。我让代码的第一部分完美运行，但是当未选中复选框时它不会隐藏行。这是代码

```
 Sub Toggle_Rows_Deisel()
 Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets("NSR FORM")

   If Sheet.Shapes("Check Box 47").OLEFormat.Object.Value = 1 Then
     Select Case CStr(Sheet.Range("E43").Value2)
     Case "1"
         Sheet.Rows("45:55").Hidden = True
         Sheet.Rows("43:44").Hidden = False
     Case "2"
         Sheet.Rows("47:55").Hidden = True
         Sheet.Rows("43:46").Hidden = False
     Case "3"
         Sheet.Rows("49:55").Hidden = True
         Sheet.Rows("43:48").Hidden = False
     Case "4"
         Sheet.Rows("51:55").Hidden = True
         Sheet.Rows("43:50").Hidden = False
     Case "5"
         Sheet.Rows("53:55").Hidden = True
         Sheet.Rows("43:52").Hidden = False
     Case "6"
         Sheet.Rows("55:55").Hidden = True
         Sheet.Rows("43:54").Hidden = False
     Case "7"
         Sheet.Rows("43:55").Hidden = False

     Case Else

     End Select
     Else
         Sheet.Rows("45:55").Hidden = True
         Sheet.Rows("43:44").Hidden = False
    End If

 End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:23:44.383

改变：

```
If Sheet.Shapes("Check Box 47").OLEFormat.Object.Value = 1 Then 
```

进入

```
If Sheet.Shapes("Check Box 47").OLEFormat.Object.Value = True Then 
```

但是，请不要问为什么，我只是坚持这一点，它的工作原理。

**编辑**在阅读了一些评论并分析了@Menelaos 的链接后，我非常非常惊讶（有人接受了从未满足我计算机条件的答案）。这似乎是一件非常令人困惑的事情。因此我做了一些测试：新工作表中的 1 个简单的 OLEObject ComboBox。我检查了 2007 年和 2010 年的值（发现结果相同）。这是代码和注释中的结果。我希望它会有所帮助。

```
Private Sub CheckBox1_Click()
With Sheet1.OLEObjects(1).Object

'1st type
If .Value = 1 Then
    MsgBox "1st Checked: " & .Value
Else
    '2007>Checked   >.Value =True
    '2007>UnChecked >.Value =False
    '2010>Checked   >.Value =True
    '2010>UnChecked >.Value =False
    MsgBox "1st UnChecked: " & .Value
End If

'2nd type
If .Value = True Then
    '2007>Checked   >.Value =True
    '2010>Checked   >.Value =False
    MsgBox "2nd Checked: " & .Value
Else
    '2007>UnChecked >.Value =False
    '2010>UnChecked >.Value =False
    MsgBox "2nd UnChecked: " & .Value
End If

'3rd
If .Value = -1 Then
    '2007>Checked   >.Value =True
    '2010>Checked   >.Value =True
    MsgBox "3rd -1: " & .Value
End If
If .Value = 0 Then
    '2007>UnChecked >.Value =False
    '2010>UnChecked >.Value =False
    MsgBox "3rd 0: " & .Value
End If
If .Value = -4146 Then
    MsgBox "3rd -4146: " & .Value
End If

End With
End Sub 
```

# python - 如何在不要求用户拥有 Python 运行时的情况下分发 Python 程序？

> ID：15913367
> 
> 赞同：8
> 
> 时间：2013-04-09T22:01:39.057
> 
> 标签：python, python-3.x

我计划创建一个 Python 程序并将其与 C# GUI 捆绑在一起分发。如何在不要求用户拥有 Python 的情况下分发程序的 Python 部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:03:40.220

尝试[py2exe](http://www.py2exe.org)或类似的工具。或者将 Python 运行时与您的软件捆绑在一起。为此，您可以使用[Pyinstaller](http://www.pyinstaller.org)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T22:03:55.697

过去，我使用 py2exe (windows)，这样我就不必要求他们安装 python。

py2exe 创建一个用户单击的 exe，它运行没有问题。

如果您想超越这一点，请将其与 innosetup 之类的东西打包在一起，它会添加一个更好的安装程序。

# jquery - 尝试在手风琴标题中使用样式复选框

> ID：15913370
> 
> 赞同：2
> 
> 时间：2013-04-09T22:01:48.797
> 
> 标签：jquery, css

**编辑** 我试图选择`$("#accordion input[type='checkbox']")`不起作用的复选框，因为我将复选框设置为`display:none;` 我最终不得不使用`$("#accordion .onoffswitch")`，因为这影响了包含花式切换开关的花式切换部分的 div。

* * *

我正在尝试创建一个客户端手风琴，其中 - 在标题中 - 你可以有一个切换开关。这样，我可以在我的应用程序中设置客户端是否处于活动状态，而无需用户打开手风琴，但仍然可以打开手风琴并与里面的元素进行交互。

我的问题是切换开关似乎不可点击。

很难描述，所以这[是我的问题的 JSFiddle](http://jsfiddle.net/samhuckaby/ZecVJ/)

基本上，我只需要让我的拨动开关能够改变。

我已经实现了一些传播 javascript，如下所示：

```
$( ".accordion" ).accordion();
$('.accordion input[type="checkbox"]').click(function(e) {
    e.stopPropagation();
}); 
```

所以我担心的是H3标签以某种方式阻止了复选框点击事件的触发。

如果您希望我发布与代码相关的任何其他内容，请告诉我（尽管 JSFiddle 几乎所有内容都在那里。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:43:33.053

尝试使用：

```
$('#accordion').accordion();
$('#accordion .onoffswitch').click(function(e) {
    e.stopPropagation();
}); 
```

因为只有在您选择隐藏的复选框时才会激活它。选择整个“开关”而不是隐藏的复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T17:44:16.670

关于使用`display:none;`复选框`visibility:hidden;`。

# javascript - 自动向导更新

> ID：15913371
> 
> 赞同：1
> 
> 时间：2013-04-09T22:01:49.023
> 
> 标签：javascript, jquery, jsp

我有一个 JSP 向导，它有 3 个选项卡。1st tab have some variable which are input of second tab's database function.The problem is that on page loaded all the page content is load with default parameter and when values of variable of tab 1 changes, second tabs content don't get updated accordingly.那么当第一个选项卡的变量自动更改第二个选项卡数据更新时，我该如何实现这一点。谢谢

# autohotkey - Windows 8 鼠标控制

> ID：15913373
> 
> 赞同：0
> 
> 时间：2013-04-09T22:01:55.500
> 
> 标签：autohotkey

我有一个自动热键脚本，可在按键时将光标位置重置为屏幕中心（Windows 7），但在 Windows 8 中，该功能不起作用。我需要对脚本进行更改以使其正常运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:04:34.207

最有可能的是，以管理员权限运行 AHK（启动 ahk 时右键单击图标并选择运行方式...）

# html - CSS 溢出和显示问题

> ID：15913377
> 
> 赞同：3
> 
> 时间：2013-04-09T22:02:19.403
> 
> 标签：html, css

我有 3 个 div 的问题。

我有一个是容器（`"position : absolute; z-index: -1"`），另外两个是子容器（`"position : absolute; z-index: *n*"`），用于动画目的。无论如何，这两个子容器都有一个 spans( `"position: relative; display: inline-block"`) 的“网格”。固定大小为 25x25 像素，跨度具有背景图像形式的精灵。他的问题是容器的溢出似乎并没有影响子容器（即应该隐藏的跨度仍然显示，似乎它不遵守元素的“高度”属性）。任何解决方案的想法？

我没有任何其他样式表，或者在文档样式中，一切都是使用 JS 和 jQuery 随时随地生成的。将在 8-10 小时后提供屏幕截图 =D

测试的浏览器是Ubuntu中的最新FF(20.0)

**编辑** 这是一个小提琴[jsFiddle](http://jsfiddle.net/D6Zzs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:43:12.623

通常，由于通常占据它们的文本大小，会出现问题`display:inline`或元素。`inline-block`对此的补救措施是玩弄`line-height`. 由于您根本没有任何文本，因此您可以安全地将其设置为`0`.

[jsFiddle](http://jsfiddle.net/Tyriar/cQkAh/)

![在此处输入图像描述](https://i.stack.imgur.com/Lv2M2.png)

```
#layer1 {
    line-height:0;
} 
```

我在 Chrome 26 和 Firefox 20 中对其进行了测试。

这是使用`vertical-align:top`CherryFlavourPez的替代解决方案

[jsFiddle](http://jsfiddle.net/Tyriar/4MUwc/)

```
#layer1 span {
    vertical-align:top;
} 
```

* * *

关于`overflow`. 您正在使用`overflow:hidden`的`#map`结构是这样的：

```
<div id="map">
    <div id="layer1">
    <div id="layer2">
</div> 
```

这一切都很好，除了`#layer1`和`#layer2`绝对定位这将它们从页面流中取出。`overflow:`如果需要，您可以通过对图层应用隐藏来切割底部，但不能在#map 上。

[jsFiddle](http://jsfiddle.net/Tyriar/G8uuY/)

```
#layer1,
#layer2 {
    overflow:hidden;
} 
```

# ruby-on-rails - 设计和根路径

> ID：15913378
> 
> 赞同：1
> 
> 时间：2013-04-09T22:02:26.397
> 
> 标签：ruby-on-rails, ruby, devise, routes

我第一次在 rails 应用程序中使用设计（2.1.2）。我已经按照安装过程进行并生成了一个用户模型。我的设置非常通用，我只有两个控制器。昨天，我已经启动并运行了几个小时，并且毫无问题地进行了身份验证。我正在登录和注销并停止并重新启动我的服务器而没有问题。生活很好。然后当我尝试访问 /main/index （受保护）时，它突然重定向到 users/sign_in ，这是有道理的，但我收到了这个错误

没有路线匹配 {:controller=>"devise/main"}

这是routes.rb

```
get "bid/index"
get "main/index"
get "main/feed"
get "main/admin"
get "main/fullday"
match "bid/bid/:id/:starttime/:endtime/:color" => "bid#bid"
match "bid/delete/:id" => "bid#delete"
match "main/bidfeed/:id" => "main#bidfeed"
match "main/attr/:id/:field/:value" => "main#attr"

devise_for :users
root :to => 'main#index' 
```

我真的不明白“设计/主要”来自哪里，我不明白为什么在我重新启动服务器后突然失败了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:26:22.373

这通常发生在您位于命名空间控制器中时（设计视图就是这种情况）。

在`link_to`导致错误的地方，尝试在控制器名称前加上斜杠。

[在 Github 的设计页面上检查这个问题](https://github.com/plataformatec/devise/issues/471)

*为什么会发生这种情况*：在引擎盖下，`devise_for`您的 routes.rb 上的方法实际上为您的“设计控制器”创建了一个命名空间。您创建的设计视图属于该“设计控制器”，因此，当您`link_to :controller => 'bla', Rails will try to find the controller`在不存在的设计名称空间内使用 bla` 时，kaboom！

理想情况下，您应该使用基于资源的路由或命名路由。这将最大限度地减少此类问题，并且附带使您的代码更易于阅读和维护（嗯，通常是这种情况，但这绝不是灵丹妙药 - 谨慎使用此建议）。

如果您仍然好奇，我建议您阅读[有关路由的指南页面](http://guides.rubyonrails.org/routing.html)（非常简单且直截了当），以及[url_for 的文档](http://apidock.com/rails/ActionController/Base/url_for)（如果您对 Rails 很认真，真的很有帮助）。

# php - TinyMCE 按钮插入顺序

> ID：15913379
> 
> 赞同：2
> 
> 时间：2013-04-09T22:02:32.827
> 
> 标签：php, tinymce

是否可以指定按钮出现在编辑器工具栏上的位置（第一个，最后一个）？也许通过传递一个可选参数？

```
function add_tinymce_button() {
   if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') )
     return;
   if ( get_user_option('rich_editing') == 'true') {
     //the function that adds the javascript
     add_filter('mce_external_plugins', array(&$this,'add_new_tinymce_plugin'));
     //adds the button to the tinymce button array
     add_filter('mce_buttons', array(&$this,'register_new_button'));
   }
}
/*
 * add the new button to the tinymce array
*/
function register_new_button($buttons) {
   array_push($buttons, $this->btn_arr["Seperator"],$this->btn_arr["Name"]);
   return $buttons;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:58:48.657

是的，这是可能的。按钮列表有一个名为 [theme_advanced_buttons](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_buttons_1_n)的配置选项。细看。它很容易使用。

# wpf - RadMenu 和 RadMenuItem Caliburn.Micro

> ID：15913380
> 
> 赞同：2
> 
> 时间：2013-04-09T22:02:37.323
> 
> 标签：wpf, telerik, caliburn.micro, radmenu

我使用 Caliburn.Micro 以编程方式加载一个没有问题的 radMenu，Xaml 看起来像这样：

```
<telerik:RadMenu ItemsSource="{Binding .MenuItems}"
                 VerticalAlignment="Top"
                 cal:Action.TargetWithoutContext="{Binding RelativeSource={RelativeSource Self}}"
                 cal:Message.Attach="[Event ItemClick] = [Action MenuItemClick($this)]">
  <telerik:RadMenu.ItemContainerStyle>
    <Style TargetType="telerik:RadMenuItem">
      <Setter Property="Tag"
              Value="{Binding .Tag}" />
      <Setter Property="Header"
              Value="{Binding .Text}" />
      <Setter Property="Icon"
              Value="{Binding .Image}" />
      <Setter Property="ItemsSource"
              Value="{Binding .SubItems}" />
      <Setter Property="Command"
              Value="{Binding .SubItems}" />
    </Style>
  </telerik:RadMenu.ItemContainerStyle>
</telerik:RadMenu> 
```

在我的 ViewModel 上，我有从数据库填充的相应 MenuItems 属性。代码如下所示：

```
Property MenuItems As New ObservableCollection(Of MenuItem)

Public Sub MenuItemClick(item As MenuItem)
    MessageBox.Show(item.Tag)
End Sub 
```

问题是 ItemClick 事件的接线，我需要接收 radMenuItem 对象，我的意思是，我需要知道单击了哪个 MenuItem。

我在 Action.TargetWithoutContext 属性上尝试了各种组合，到目前为止，我只得到了 MenuItems 集合。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:22:53.940

单击的项目将在`RadRoutedEventArgs`属性中的事件回调中`OriginalSource`。例如

```
void RadMenu_ItemClick(object sender, Telerik.Windows.RadRoutedEventArgs e)
{
    var menuItem = e.OriginalSource as RadMenuItem;
} 
```

由于`RadRoutedEventArgs`子类`System.Windows.EventArgs`你应该能够从中提取`OriginalSource`。

有几种方法（我认为其中一种是**更好**的方法）

**方法1（我喜欢在VM中工作但工作太多）：**

只需将事件参数传递给 VM 上的处理程序方法，然后您就可以在 VM 代码中提取所选项目

```
cal:Message.Attach="[Event ItemClick] = [Action MenuItemClick($eventargs)]"

public class ViewModel 
{
    public void MenuItemClick(System.Windows.EventArgs e) 
    {
        var menuItem = e.OriginalSource;
        // menuItem should be RadMenuItem, you can use FrameworkElement base type to get DataContext
        var fe = menuItem as FrameworkElement;
        var data = fe.DataContext; // (obviously do your null checks etc!)
    }
} 
```

然而，这有一个问题，它让 VM 担心如何从 eventargs 中获取选定的项目。我不太喜欢这种方法，因为如果您更改正在使用的控件等，它很容易中断。

**方法二：**

我假设您的`MenuItem`课程是自定义课程？您真的不想在您的 VM 代码中依赖 3rd 方类型（以防您更改为其他控件提供程序，例如 Infragistics 或您拥有的），因此您应该在单击时将实际绑定对象传递回您的视图模型. 如果不是，这种方法仍然有效（但你最终会`RadMenuItem`在你的虚拟机中得到一个引用）

您可以通过自定义 Caliburn.Micro 的集合来提取原始源或实际绑定的项目`MessageBinder.SpecialValues`，然后将选定的项目直接传递给 VM。（您可以将此代码放入您的`Bootstrapper`某处）

以下是获取绑定到所选菜单项的数据项的方法：

```
MessageBinder.SpecialValues.Add("$selecteditem", (context) =>
{
    if (context.EventArgs is EventArgs)
    {          
        var e = context.EventArgs as EventArgs;

        // If the control is a FrameworkElement it will have a DataContext which contains the bound item
        var fe = e.OriginalSource as FrameworkElement;

        if (fe != null)
            return fe.DataContext;
    }

    return null;
}); 
```

如果您想要实际的`RadMenuItem`本身，您可以将上述实现更改为：

```
MessageBinder.SpecialValues.Add("$selecteditem", (context) =>
{
    if (context.EventArgs is EventArgs)
    {          
        var e = context.EventArgs as EventArgs;
        return e.OriginalSource;
    }

    return null;
}); 
```

并在 XAML 中使用：

```
cal:Message.Attach="[Event ItemClick] = [Action MenuItemClick($selecteditem)]" 
```

这种方法的好处是 ViewModel 只接收绑定的项目，它不需要知道如何提取值：

```
public class ViewModel 
{
    public void MenuItemClick(TheActualTypeThatWasBound item) 
    {
        // Do stuff with item
    }
} 
```

除非您当然要传回实际的菜单项：

```
public class ViewModel 
{
    public void MenuItemClick(RadMenuItem item) 
    {
        // Do stuff with item
        var boundData = item.DataContext;
    }
} 
```

但我强烈建议不要这样做（我有一个使用 Rad 控件的相当大的项目，我从来不需要从 VM 中引用任何 Rad 控件）

抱歉，我不能真正使用 VB，因为我不使用 VB，但您可以在此站点上进行转换：

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

免责声明：

`$selecteditem`可能是一个坏名字 - 也许`$originalsourcedatacontext`但这有点拗口:)

# mysql - 如果相关数据保存在单独的表中，搜索速度会提高吗？

> ID：15913386
> 
> 赞同：1
> 
> 时间：2013-04-09T22:02:59.737
> 
> 标签：mysql, database, performance, database-design, innodb

我们有桌子

```
Article
(
    id, 
    user_id, 
    date_created, 
    date_from, 
    date_to, 
    title, 
    description, 
    latitude, 
    longitude
) 
```

如果我们像这样将标题和描述数据分离到另一个表中，如果我们有 10,000,000 篇文章，搜索的改进会有多显着。

文章内容（文章 ID、标题、描述）

这里会显着提高搜索速度的关键因素是什么？

** 更新 **

*   通过搜索我的意思是全文搜索
*   标题：varchar(50)，描述：TEXT

** 更新 **

*   mysql 版本 5.5
*   使用 innoDB 的存储引擎（因此不支持全文索引）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:10:55.590

根据我对数据库的了解，我认为这不会有任何区别。重要的是确保您要搜索的字段已编入索引。

我使用了一个具有相似行数的表，搜索速度非常快。（虽然没有一个领域像我想象的那样长`description`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:15:31.333

对于全文搜索，将数据存储在一个或两个表中不会有任何显着差异。

您将需要某种全文支持，例如索引关键字，以便在默认表扫描上获得任何显着的性能提升。我不知道 MySql 有多少这样的支持。

# jquery - 将 DIV 的 HTML 上传到数据库字段

> ID：15913388
> 
> 赞同：-2
> 
> 时间：2013-04-09T22:03:10.703
> 
> 标签：jquery, html, ajax

我想将 DIV 的 HTML 保存到数据库字段中，我想知道上传它的最佳方式。1) 将 DIV 的 html 放入表单输入或 textarea 并提交表单或 2) 使用 Ajax 做某事之间似乎没有太大区别。或者也许有一种专门用来做我想做的事情的技术。我只是想知道你们会如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:06:06.827

通常，您最好实际使用表单元素来捕获数据。例如，将内容放在 textarea 字段中。

此外，通过 ajax 或通过传统回发发送内容之间的区别实际上只是您所追求的用户体验问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:06:20.793

你可以通过简单的ajax调用来做到这一点，

```
 var d = $("#YourDivId").html();
    $.ajax({
          url:"saveDivHtml.php",
          type:"post",
          data : { DivHtml : d},
          success:function(){
            alert("html saved");
          }
    }); 
```

# jquery - jQuery 和 iFrame “ajax”图像上传器无法正常工作

> ID：15913401
> 
> 赞同：0
> 
> 时间：2013-04-09T22:04:00.507
> 
> 标签：jquery, html, ajax, forms, twitter-bootstrap

我正在使用 twitter bootsrap，更具体地说是 Jasny 的文件上传小部件。

[http://jasny.github.io/bootstrap/javascript.html#fileupload](http://jasny.github.io/bootstrap/javascript.html#fileupload)

我必须迎合较旧的浏览器，因此将它与 iframe 上传脚本结合使用，给 ajax 上传的用户带来错觉。

使用 jQuery 1.9.1，我的计划是将主要注册表单中的文件输入字段克隆到提交给 iframe 的辅助表单中。这是在更改文件输入时触发的。

我有一个带有文本字段的表单和一个图像上传器。有问题的 HTML 如下所示：

```
<div>
    <span class="btn btn-file">
        <span class="fileupload-new">Select image</span>
        <span class="fileupload-exists">Change</span>
        <input type="file" name="avatar"/>
    </span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
</div> 
```

我想将文件输入“头像”克隆到页面底部的另一个表单中，如下所示：

```
<form id="upload_image" name="upload_image" enctype="multipart/form-data" method="post" action="/index.php/ajax/avatar/upload" target="upload_target">
    <!-- just an empty form really -->
    <input id="sent" name="sent" type="submit"  value="Upload" />
</form> 
```

我的 JavaScript 目前看起来像这样：

```
 $("input[name='avatar']").on('change',function(){
      var $this = $(this);
      $clone = $this.clone();          
      $this.after($clone).appendTo("form#upload_image");
      $("form#upload_image").submit();
 }); 
```

第一次选择要上传的图像时，小部件工作并且脚本运行，但没有图像传递给脚本。

随后的尝试，小部件不再更新并且脚本不运行。

它似乎跌倒了： $this.after($clone).appendTo("form#upload_image");

有没有人有任何想法可能是问题的原因？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:24:12.400

据我所知，出于安全原因，您无法使用预选值克隆文件输入。我不得不使用稍微不那么漂亮的 iFrame 提交/上传。

# c++ - 垃圾收集器 C++

> ID：15913404
> 
> 赞同：5
> 
> 时间：2013-04-09T22:04:02.440
> 
> 标签：c++, garbage-collection

我一直在尝试在 C++ 中创建一个垃圾收集器，我将它设计为我所有人的基类，称为garbageCandidate，它包含一个静态向量，其中包含指向garbageCandidate 的指针，每个garbageCollector 实例都将“this”推到向量上.

然后一个静态函数来删除静态向量中的所有指针。

在删除函数的一开始（在第一个指针上删除）我得到一个错误，指出删除被用于无效指针......

这与静态/动态绑定有关吗？我的意思是：删除操作符是否无法按预期运行，因为我在“父亲”类上调用 delete 并且它实际上是一个孩子？

避免这种情况的方法是创建虚拟析构函数吗？（或虚拟删除功能）？

还是我完全错过了什么？

ps：用于测试的所有对象都是动态创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:37:47.197

您是否有理由使用自己的自定义垃圾收集器？如果您的所有对象都是动态创建的，那么您为什么不使用 boost 的智能指针（如[boost::shared_ptr](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)），它本质上使用[RAII](https://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c)为您提供经过良好测试的垃圾收集解决方案？

我问是因为通常在项目的软件开发生命周期过程中，您最终会修复自己编写的代码中的错误（至少在大多数情况下）。那么你有理由重新发明轮子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:59:13.453

我认为您应该使用[Boehm Conservative GC](http://en.wikipedia.org/wiki/Boehm_garbage_collector)或智能指针，而不是滚动您自己的 GC。两者都不完美：

*   Boehm 收集器要求您使用特殊的 allocate 和（如果您使用它）deallocate 方法，并且让现有的库一起使用可能需要一些努力：

    *   [C++ 标准库和 Boehm 垃圾收集器](https://stackoverflow.com/questions/8016945/c-standard-library-and-boehm-garbage-collector)

    *   [是否可以仅将 Boehm 垃圾收集器用于程序的一部分？](https://stackoverflow.com/questions/2937822/is-it-possible-to-use-boehm-garbage-collector-only-for-the-part-of-the-program)

*   每次将指针分配给变量时，智能指针都会增加开销。它们不处理其中包含指针循环的对象网络。您需要手动中断循环以允许收集可从它们到达的对象。

尽管如此，与滚动您自己的解决方案相比，Boehm GC 或智能指针的实施和维护工作量都更少。

# javascript - 性能 - String.charAt(0) 与 /^.{1}/

> ID：15913406
> 
> 赞同：2
> 
> 时间：2013-04-09T22:04:05.970
> 
> 标签：javascript, regex, string, performance

从概念上讲，哪个应该更快？

`String.charAt(0)`或`/^.{1}/`（正则表达式）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:06:46.160

`String.charAt(0)`, 正则表达式必须被处理和应用。

**速度测试资源：**

> [`Paul S.`](https://stackoverflow.com/users/1615483/paul-s)对于比较测试，[http://jsperf.com/charat-vs-regex-vs-prop](http://jsperf.com/charat-vs-regex-vs-prop)
> 
> [`joseph-the-dreamer`](https://stackoverflow.com/users/575527/joseph-the-dreamer)为测试添加更多内容，[http://jsperf.com/charat-vs-regex-vs-prop/3](http://jsperf.com/charat-vs-regex-vs-prop/3)

# visual-studio-2012 - 需要重新安装Web Tools 2012.2

> ID：15913407
> 
> 赞同：0
> 
> 时间：2013-04-09T22:04:06.500
> 
> 标签：visual-studio-2012, less

我的 Visual Studio LESS 编译器已停止工作，因此我打算尝试重新安装 Web Tools 2012.2 以查看它是否会恢复正常。但是，Web Platform Installer 4.5 告诉我它已经安装，没有重新安装、修复、卸载等选项。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:05:51.320

原来安装程序可以在 Hanselman 的博客上找到。

[http://www.hanselman.com/blog/ReleasedASPNETAndWebTools20122InContext.aspx](http://www.hanselman.com/blog/ReleasedASPNETAndWebTools20122InContext.aspx)

# android - ALERT_BOOT_COMPLETED 未在某些手机中收到，但在其他情况下运行良好

> ID：15913412
> 
> 赞同：0
> 
> 时间：2013-04-09T22:04:34.580
> 
> 标签：android, android-intent

```
public class AlertBootCompletedReceiver extends BroadcastReceiver {

    private PackageManager pm;
    private boolean isStoredExternally;

    @Override
    public void onReceive(Context context, Intent arg1) {
        // TODO Auto-generated method stub

        pm = context.getPackageManager();
        try {
            PackageInfo pi = pm.getPackageInfo(context.getPackageName(), 0);
            ApplicationInfo ai = pi.applicationInfo;
            isStoredExternally = (ai.flags & ApplicationInfo.FLAG_EXTERNAL_STORAGE) == ApplicationInfo.FLAG_EXTERNAL_STORAGE;

        } catch (NameNotFoundException e) {
            // do something
        }
        if (arg1.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {

            if (!isStoredExternally) {
                // I start a service here
            }
        }
        if (arg1.getAction().equals(
                Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE)
                && isStoredExternally) {

            // I start a service here ..
        }

    }

} 
```

我通过接收 ALERT_BOOT_COMPLETED 从我的 BroadCastReceiver 启动服务。此代码在三星 SII 等某些手机上适用于我，但不适用于索尼 Xperia Neo 等其他手机。任何人请告诉我在这里做什么。我有点卡住了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:07:15.190

工作设备可能是 3.1 之前的情况。如果我没记错的话，在 3.1`BOOT_COMPLETED`之后，只有在用户第一次打开应用程序之后才会处理广播。

检查[这篇博文](http://commonsware.com/blog/2011/07/05/boot-completed-regression.html)。

# dotnetnuke - DNN 模块版本

> ID：15913416
> 
> 赞同：1
> 
> 时间：2013-04-09T22:04:47.353
> 
> 标签：dotnetnuke

我正在使用 DotNetNuke 7 编译模块。我添加了 DotNetNuke 6.25 作为参考。如果我想将此模块用于 DNN 7，是否需要更改参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:40:58.617

您通常不需要为较新版本的 DNN 重新编译模块，除非您使用的是较新版本不支持的东西。例如，DNN 7 服务层从版本 6 中的内容发生了变化。

然而，相反的情况并非如此，您不能针对 DNN7 进行编译并让模块针对 DNN6 运行，除非您当然重新编译。

# r - 为什么 data.table 会通过引用更新名称（DT），即使我分配给另一个变量？

> ID：15913417
> 
> 赞同：46
> 
> 时间：2013-04-09T22:04:49.503
> 
> 标签：r, data.table

我已将 a 的名称存储`data.table`为 a `vector`：

```
library(data.table)
set.seed(42)
DT <- data.table(x = runif(100), y = runif(100))
names1 <- names(DT) 
```

据我所知，这是一个普通的香草字符向量：

```
str(names1)
# chr [1:2] "x" "y"

class(names1)
# [1] "character"

dput(names1)
# c("x", "y") 
```

但是，这不是普通的字符向量。这是一个神奇的字符向量！当我向 my 添加新列时`data.table`，此向量会更新！

```
DT[ , z := runif(100)]
names1
# [1] "x" "y" "z" 
```

我知道这与如何`:=`通过分配进行更新有关，但这对我来说仍然很神奇，因为我希望`<-`复制*的*名称`data.table`。

我可以通过将名称包含在以下内容中来解决此问题`c()`：

```
library(data.table)
set.seed(42)
DT <- data.table(x = runif(100), y = runif(100))

names1 <- names(DT)
names2 <- c(names(DT))
all.equal(names1, names2)
# [1] TRUE

DT[ , z := runif(100)]
names1
# [1] "x" "y" "z"

names2
# [1] "x" "y" 
```

我的问题有两个：

1.  为什么不`names1 <- names(DT)`创建名称的副本`data.table`？在其他情况下，我们被明确警告会创建s 和s 的`<-`副本。`data.table``data.frame`
2.  `names1 <- names(DT)`和有什么区别`names2 <- c(names(DT))`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-09T22:24:15.007

### 更新：现在添加到`?copy`版本 1.9.3 的文档中。来自[新闻](https://github.com/Rdatatable/data.table/blob/master/README.md)：

> 14.  移动`?copy`到它自己的帮助页面，并记录`dt_names <- copy(names(DT))`了`dt_names`由于引用更新而不能通过引用修改`DT`（例如：通过引用添加新列）。关闭[#512](https://github.com/Rdatatable/data.table/issues/512)。感谢 Zach 提出[这个 SO 问题](https://stackoverflow.com/q/15913417/559784)，感谢 user1971988 提出[这个 SO 问题](https://stackoverflow.com/q/18662715/559784)。

* * *

*您的第一个问题的一部分让我*有点不清楚您对运算符的真正含义`<-`（至少在 的上下文中`data.table`），尤其是以下部分：*在其他情况下，我们明确警告 <- 创建副本，两个.tables 和 data.frames。*

因此，在回答您的实际问题之前，我将在这里简要介绍一下。在`data.table`a `<-`(assignment) 的情况下，仅仅复制 a是*不够*`data.table`的。例如：

```
DT <- data.table(x = 1:5, y= 6:10)
# assign DT2 to DT
DT2 <- DT # assign by reference, no copy taken.
DT2[, z := 11:15]
# DT will also have the z column 
```

如果要创建`copy`，则必须使用`copy`命令明确提及它。

```
DT2 <- copy(DT) # copied content to DT2
DT2[, z := 11:15] # only DT2 is affected 
```

从 CauchyDistributedRV，我了解您的意思是`names(dt) <- .`会导致警告的分配。我就这样吧。

* * *

**现在，回答你的第一个问题：**它的行为似乎`names1 <- names(DT)`也相似。直到现在我才想到/知道这一点。该`.Internal(inspect(.))`命令在这里非常有用：

```
.Internal(inspect(names1))
# @7fc86a851480 16 STRSXP g0c7 [MARK,NAM(2)] (len=2, tl=100)
#   @7fc86a069f68 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] "x"
#   @7fc86a0f96d8 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] "y"

.Internal(inspect(names(DT)))
# @7fc86a851480 16 STRSXP g0c7 [MARK,NAM(2)] (len=2, tl=100)
#   @7fc86a069f68 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] "x"
#   @7fc86a0f96d8 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] "y" 
```

在这里，您会看到它们指向相同的内存位置`@7fc86a851480`。甚至`truelength`of`names1`也是 100（默认情况下分配在 中`data.table`，检查`?alloc.col`一下）。

```
truelength(names1)
# [1] 100 
```

所以基本上，分配`names1 <- names(dt)`似乎是通过引用发生的。也就是说，`names1`指向与 dt 的列名指针相同的位置。

**回答您的第二个问题：**该命令`c(.)`似乎创建了一个副本*，因为没有检查由于连接操作导致的内容结果是否不同*。也就是说，由于`c(.)`操作可以改变向量的内容，它会立即导致“复制”，*而不*检查内容是否被修改。

# ios - 从 10 个最早日期的核心数据中获取对象

> ID：15913420
> 
> 赞同：0
> 
> 时间：2013-04-09T22:05:07.230
> 
> 标签：ios, objective-c, core-data

我的 CoreData 数据库中有一个对象，这些对象具有 NSDate 类型的“日期”属性。如何获取 10 个最早日期的对象？

这是我到目前为止所拥有的：

```
NSFetchRequest *fetchRequest = [NSFetchRequest new];
fetchRequest.entity = [NSEntityDescription entityForName:NSStringFromClass([MyManagedObject class]) inManagedObjectContext:self.database.managedObjectContext];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
NSArray *result = [self.database.managedObjectContext executeFetchRequest: fetchRequest error: nil]; 
```

我相信这将使我所有的托管对象按排序顺序返回，但我真的只需要 10 个最新的对象。我怎样才能做到这一点？`NSFetchRequest`使用 a 对它们进行排序而不是全部获取它们然后以编程方式对它们进行排序会更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:08:25.960

按降序对记录进行排序，我们`fetchLimit`只得到最近的结果：

```
NSFetchRequest *fetchRequest = [NSFetchRequest new];
fetchRequest.entity = [NSEntityDescription entityForName:NSStringFromClass([MyManagedObject class]) 
                                  inManagedObjectContext:self.database.managedObjectContext];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" 
                                                               ascending:NO];
[fetchRequest setSortDescriptors:@[sortDescriptor]];
[fetchRequest setFetchLimit:10];
NSArray *result = [self.database.managedObjectContext executeFetchRequest:fetchRequest 
                                                                    error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:08:03.640

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
...
NSArray* tenSoonestElements = [result subarrayWithRange:NSMakeRange(0, 10)]; 
```

# database - 如何正确建立数据库

> ID：15913421
> 
> 赞同：0
> 
> 时间：2013-04-09T22:05:08.113
> 
> 标签：database, database-design, entity-relationship

我遇到了一个问题，想请教您一些方向。我有如下图所示的数据库。 ![在此处输入图像描述](https://i.stack.imgur.com/VJqSB.jpg)

**1** 在我的应用程序中，我预定义了产品，因此它们会在文本框中自动弹出，取决于第一个字母。我的问题是每种产品都有多种颜色可供选择。而且我不知道如何制作一张合适的桌子。我应该只用颜色制作一张桌子吗？

**2** 假设客户订购了 5 个显示器和 4 个键盘，它们都在同一个订单上。我应该在哪里有数量？在我的 OrderProduct 表中？

**3** 如果客户想要在所选商品上印上自定义贴纸或他的标志怎么办？如果我在我的应用程序中选择在项目或贴纸上打印，这应该存储在数据库中的什么位置？也在 OrderProduct 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:16:35.883

1.  添加一个名为 Colors 的表，并让它具有字段 ID、可行名称等。在产品中显示它支持的颜色的按位值。

2.  是的，您将在 OrderProduct 表中拥有 Quantity。

3.  这取决于他得到什么样的贴纸。贴纸是他可以选择的，还是他可以上传的？

如果您的客户需要能够自定义每个项目，那么您应该将每个项目作为单独的插入到 OrderProduct 表中，并且没有数量字段 - 一旦您这样做，只需引用贴纸 id 即可是预定义的或用户定义的。

回到颜色 - 就像我说的那样，如果您要能够自定义每个产品然后为每个产品创建一个新插入并删除一个数量列，然后只需将一个 ColorID 列添加到 OrderProduct 表中，您将在其中定义什么颜色或定制的特定产品将具有。

* * *

**对评论的回应**

应用程序需要知道每个项目的颜色，因此您可能在拥有黑色和红色显示器的同时拥有黑色和灰色键盘。位值就像一个标志系统，除了数字。可以说你有...

```
1 | Black
2 | Gray
3 | Red 
```

如果一个产品可以有黑色和灰色，你会做黑色，灰色到 1,2。如果一个产品有黑色和红色，你会做黑色，红色到 1,3。按位值所做的只是将其转换为计算机可以更容易理解的值。

因此，要获得 Black & Gray 的按位值，请将 ID 平方并将其相加（bor）。一旦获得该值（即按位值），您就可以对其运行 band 以查看它是否具有该颜色。

[这](http://www.litfuel.net/tutorials/bitwise.htm)是一个非常好的 PHP 逐位教程，我建议阅读它以获取有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:41:19.037

1.  您描述的问题-“产品”有多种颜色可供选择-很常见；标准解决方案是引入“产品变体”的概念。例如，T 恤有多种颜色和多种尺寸可供选择；鞋子有多种尺寸等可供选择。

数据库解决方案可能会有所不同；如果您事先不知道变体类型是什么，或者如果您知道的话，请参阅 SO 上的这个答案以获得[我](https://stackoverflow.com/questions/11602955/database-structure-for-product-variants)的[建议](https://stackoverflow.com/questions/7832495/products-and-variants-best-way-to-design-database)。

根据您使用的解决方案，您可以在 product_order 表中包含对变体的引用。

此解决方案允许您在不污染“product_order”表的情况下扩展未来产品类型的解决方案 - 如果您使用@Hans 的建议来包含一个位掩码来指示颜色，并且您将尺寸作为另一个维度引入，那么您的“product_order”表很快就会启动包含很多关于产品结构的知识，并且变得难以管理/验证。

2.  是的，数量通常包含在 order_product 表中（这通常称为“订单行”）。包含单价也是一个好主意 - 产品的价格可能会随着时间而变化，并且您希望记录客户在下订单时同意的价格。

3.  对于自定义，您可能希望创建一个“order_customization”表，其中包含指向 order_product 表的链接以及选定的自定义，例如

    OrderID ProductID 定制 1 2 蓝色贴纸 1 1 绿色贴纸

据推测，并非订单上的所有商品都有定制；如果数量 > 1 的单个 order_product 行可能对每个项目有不同的自定义，则您必须将其进一步拆分...

# c# - RT 应用程序中未触发的键盘事件

> ID：15913423
> 
> 赞同：7
> 
> 时间：2013-04-09T22:05:11.857
> 
> 标签：c#, .net, xaml, windows-runtime

所以我一直在为 Windows Store 开发一个宠物项目，并且遇到了一个绊脚石：键盘事件拒绝触发。我尝试将焦点强制到主页上，尝试将焦点强制到网格上，但似乎没有任何帮助。有人遇到过这样的问题吗？我的 google-fu 让我失望了。

相关代码：

XAML：

```
<Page
    x:Class="PlatformTD.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PlatformTD"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
          Name="LayoutRoot">
        <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Name="MainCanvas" x:FieldModifier="public"
                SizeChanged="MainCanvas_SizeChanged"
                Loaded="MainCanvas_Loaded" />
    </Grid>
</Page> 
```

C＃：

```
public MainPage()
{
    this.InitializeComponent();
    MainCanvas.KeyDown += MainPage_KeyDown;
    MainCanvas.KeyUp += MainPage_KeyUp;
    KeyDown += MainPage_KeyDown;
    KeyUp += MainPage_KeyUp;
    LayoutRoot.KeyDown += MainPage_KeyDown;
    LayoutRoot.KeyUp += MainPage_KeyUp;
}
private void MainPage_KeyUp(object sender, KeyRoutedEventArgs e)
{ // breakpoint here to catch when event fires
    // does stuff
}
private void MainPage_KeyDown(object sender, KeyRoutedEventArgs e)
{ // breakpoint here to catch when event fires
    // does stuff
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T23:32:38.657

像这样的东西怎么样：

```
public MainPage()
{
    this.InitializeComponent();
    Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;
    Window.Current.CoreWindow.KeyUp += CoreWindow_KeyUp;
}

void CoreWindow_KeyUp(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
{
    throw new NotImplementedException();
}

void CoreWindow_KeyDown(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
{
    throw new NotImplementedException();
} 
```

在我身边工作。解决方案[在这里找到](http://www.michielpost.nl/PostDetail_71.aspx)。

# javascript - 饼干。我究竟做错了什么？

> ID：15913424
> 
> 赞同：0
> 
> 时间：2013-04-09T22:05:14.217
> 
> 标签：javascript, html

假设这样做是用户输入他们的姓名（使用文本框），一旦他们刷新页面，它将在屏幕上显示他们的姓名，但由于某种原因，它永远不会进入 getCookie 中的 if 语句。（虽然它进入了 get cookie 函数。）

* * *

```
function setCookie() {
    alert(fName.value);
    var user = fName.value;
    alert(user);
    var expiry = new Date();
    expiry.setTime(expiry.getTime() + (1000 * 60 * 60));
    document.cookie = "mydata=" + user + ";" + "expires=" + expiry.toGMTString();
    alert();
} 
```

* * *

```
function getCookie() {
alert(document.cookie.indexOf("mydata") >= 0);
    if (document.cookie.indexOf("mydata") >= 0) {
        alert();
        var cookieString = unescape(document.cookie);
        var list = cookieString.split("=");

        if(list[0] === "myData") {
            var data = list[1].split(",");
            var fname = list[0];
        }

    divisionbar.innerHTML = "Welcome Back" + data;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:54:02.823

您是否在本地测试此代码？如果是这样，我相信您的问题是您的浏览器（很可能是 Chrome）不允许创建本地 cookie。请参阅：[Javascript 无法在 Chrome 上创建/识别 cookie](https://stackoverflow.com/questions/6449063/javascript-fails-to-create-recognize-cookies-on-chrome)

我在 JSFiddle 上以稍微修改的方式尝试了您的代码，它按预期工作：http: [//jsfiddle.net/dKjas/](http://jsfiddle.net/dKjas/)

```
function setCookie(user) {
    alert(user);
    var expiry = new Date();
    expiry.setTime(expiry.getTime() + (1000 * 60 * 60));
    document.cookie = "mydata=" + user + ";" + "expires=" + expiry.toUTCString();
    alert(document.cookie);
}

function getCookie() {

    if (document.cookie.indexOf("mydata") >= 0) {
        var cookieString = unescape(document.cookie);
        var cookies = cookieString.split(";");

        for (var i = 0, len = cookies.length; i < len; i++){
            var data = cookies[i].split('=');
            if (data[0] === 'mydata') {
                // Change divisionbar here.
                alert('Name: ' + data[1]);
            }
        }
    }
}

setCookie('foo');
getCookie(); 
```

我真诚地建议您不要使用全局变量来访问 DOM 的值和位，并为这些函数提供一些更具描述性的名称 :-)

# jquery - 有没有更好的方法在两个按钮之间切换？

> ID：15913431
> 
> 赞同：1
> 
> 时间：2013-04-09T22:06:00.967
> 
> 标签：jquery

在 JSFiddle 上查看：http: [//jsfiddle.net/Mm79v/](http://jsfiddle.net/Mm79v/)

**我的 jQuery**

```
$(".SupOrSubButton").click(function(e) {
    var child = $(this).children().attr('id');
    if (child == 'Superscript') {
        if ($(this).hasClass('ButtonActive')) {
            $(this).removeClass('ButtonActive');
        } else {
            $('#Subscript').parent().removeClass('ButtonActive');
            $(this).toggleClass('ButtonActive');
        }
    } else if (child == 'Subscript') {
        if ($(this).hasClass('ButtonActive')) {
            $(this).removeClass('ButtonActive');
        } else {
            $('#Superscript').parent().removeClass('ButtonActive');
            $(this).toggleClass('ButtonActive');
        }
    };
}); 
```

我很想知道是否有更好的方法来使用 JQuery 完成我上面所做的事情，因为我需要在未来的某个日期在其他地方实现类似的东西。我仍在学习 JQuery，我知道这很有效，但这是最好的方法，甚至是好方法吗？

此致

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:25:20.327

您的代码工作正常，但如果您想让它更短，您可以试试这个：

```
$(".SupOrSubButton").click(function(e) {
    var child = $(this).children().attr('id');
    $(this).toggleClass('ButtonActive');
    $(".SupOrSubButton:not(:has(#" + child +"))").removeClass('ButtonActive');
}); 
```

基本上作为您的代码，`ButtonActive`如果它不存在，它会添加类，如果存在则将其删除。`ButtonActive`并且还从未点击的`.SupOrSubButton`div中删除...

编辑：

稍微详细说明一下：

```
$(".SupOrSubButton:not(:has(#" + child +"))").removeClass('ButtonActive');` 
```

这段代码有 3 个部分，第一个选择与`.SupOrSubButton`类匹配的元素，第二个 ( `:not()`) 否定第三个 ( )，它在原始选择器`:has()`中查找与您的 id 匹配的元素。`child`

基本上，选择器作为一个整体意味着“查找具有特定类的元素，这些元素没有特定的 id 作为子元素”

演示：http: [//jsfiddle.net/darkajax/3bVJ6/](http://jsfiddle.net/darkajax/3bVJ6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:30:14.757

这是否完成了你想要做的事情？

[JSFiddle 链接](http://jsfiddle.net/rdown/Ejcca/13/)

```
$(".group-1 .SupOrSubButton div").click(function (e) {
$(".group-1 div").removeClass('ButtonActive');
$(this).parent().addClass('ButtonActive'); 
```

});

# c# - 无法通过代码访问控制

> ID：15913438
> 
> 赞同：0
> 
> 时间：2013-04-09T22:06:31.557
> 
> 标签：c#, listview, tabcontrol, splitpanel

我目前正在尝试将项目添加到列表视图。问题……它不是我正在研究的当前形式。

目标项目位于：

```
Form1
  TabControl1
    Tab2
      SplitPanel1
        Panel1
          listMain 
```

尝试从位置添加项目：

```
Form1
  TabControl1
    Tab2
      SplitPanel1
        Panel2
          UserControlForm 
```

我敢肯定我错过了一些简单的事情，但我似乎无法弄清楚如何从代码中访问它。

有没有人有什么建议？它们都在同一个命名空间下……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:09:03.680

这不是一个非常干净的方法，但可以做到。WinForms 中的 UI 控件默认是私有的，所以从技术上讲，您可以打开 Designer.cs 文件，找到控件并将其公开。但是，我建议采用比这种方式更好的设计。

# android - 科尔多瓦 Android 中的域白名单似乎被忽略了

> ID：15913439
> 
> 赞同：1
> 
> 时间：2013-04-09T22:06:38.020
> 
> 标签：android, cordova

我已经下载了 Phonegap 2.5 的新副本，并按照[此处](http://docs.phonegap.com/en/2.5.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)的说明创建了一个新项目。

然后我编辑 /res/xml/config.xml 以将所有域列入白名单：

```
<cordova>
  <access origin=".*" subdomains="true" />
  <log level="DEBUG"/>
... etc (nothing changed beyond this point) ... 
```

但是，当我尝试通过 jQuery 的 $.ajax() 函数检索任何外部页面时，该函数失败了。LogCat 甚至根本没有显示尝试下载。

Wifi 已启用，手机可以使用浏览器访问网站。

有任何想法吗？

更多信息

我在日志中注意到了这个错误：

```
04-10 12:37:28.007: E/dalvikvm(2074): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.getWhitelistResponse 
```

我发现其他地方的帖子说应该忽略“WebResourceResponse”错误，但这似乎与我的问题直接相关（请参阅 getWhitelistResponse 部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:33:01.257

该问题似乎与 Cordova 无关。Ajax 调用是作为包含在表单元素中的按钮上的单击事件启动的。因为我忘了“return false”；在事件中，点击事件冒泡并触发了表单上的提交。该表单没有目标，因此只需重新加载页面。整个过程是如此之快，以至于*看起来*好像 Ajax 请求完全失败了。

# nginx - 如果 nginx 中的 map 指令对同一个变量名重复，会有什么危害吗？

> ID：15913441
> 
> 赞同：1
> 
> 时间：2013-04-09T22:06:43.040
> 
> 标签：nginx

当我尝试时，后面的定义似乎生效了。问题是，这样做会产生意想不到的后果吗？

```
http {
    map $http_host $a {
        hostnames;
        default 1;
        example.com 1;
        *.example.com 2;
    }
    map $http_host $a {
        hostnames;
        default 3;
        example.com 3;
        *.example.com 4;
    }
    server {
        server_name example.com *.example.com
        location / {
            echo $a
        }
    }
} 
```

现在，如果我尝试使用此配置：

```
curl http://example.com
3
curl http://www.example.com
4 
```

背景：我们使用它来为可选包含文件中的地图提供覆盖。因此，在定义映射之后，我们有一个 *_override_map.conf 的包含指令。如果此文件存在并为同一地图提供了替代定义，那么这就是使用的内容，而不是原始地图定义。

# javascript - 使用嵌套的 Promise 编写干净的代码

> ID：15913448
> 
> 赞同：5
> 
> 时间：2013-04-09T22:06:58.313
> 
> 标签：javascript, node.js, promise

我正在编写一个与 Apple 对话以验证收据的应用程序。他们有一个沙盒和生产 URL，您可以发布到它们。

与 Apple 通信时，如果您收到 21007 状态，则表示您正在发布到生产 url，而您应该发布到沙盒一。

所以我写了一些代码来方便重试逻辑。这是我的代码的简化版本：

```
var request = require('request')
  , Q = require('q')
  ;

var postToService = function(data, url) {
  var deferred = Q.defer();
  var options = {
    data: data,
    url: url
  };

  request.post(options, function(err, response, body) {
    if (err) { 
      deferred.reject(err);
    } else if (hasErrors(response)) {
      deferred.reject(response);
    } else {
      deferred.resolve(body);
    }
  });

  return deferred.promise;
};

exports.verify = function(data) {
  var deferred = Q.defer();

  postToService(data, "https://production-url.com")
    .then(function(body) {
      deferred.resolve(body);
    })
    .fail(function(err) {
      if (err.code === 21007) {
        postToService(data, "https://sandbox-url.com")
          .then(function(body){
            deferred.resolve(body);
          })
          .fail(function(err) {
            deferred.reject(err);
          });
      } else {
        deferred.reject(err);
      }

    });

  return deferred.promise;
}; 
```

验证函数中的重试部分非常难看，嵌套的 Promise 很难阅读。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T00:05:43.643

您可以在拒绝处理程序中重新抛出错误以继续拒绝承诺，或者您可以返回新的承诺以替换拒绝。

```
exports.verify = function(data) {
  return postToService(data, "https://production-url.com")
    .fail(function(err) {
      if (err.code === 21007) {
        return postToService(data, "https://sandbox-url.com")
      } else {
        throw err
      }
    });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:33:27.210

这里有几种可能性。因为这个问题有个人品味的元素，你可能喜欢也可能不喜欢你看到的！

（*入场 - 我没有测试过这个代码*）

`resolve`选项 1 - 为和使用包装器`reject`。这会以辅助函数的形式添加“噪音”，但会整理其余部分。

```
var resolve = function (deferred, ob) {
  return function () {
    deferred.resolve(ob);
  };
};

var reject = function (deferred, ob) {
  return function () {
    deferred.reject(ob);
  };
};

exports.verify = function(data) {
  var deferred = Q.defer();

  postToService(data, "https://production-url.com")
    .then(resolve(deferred, body))
    .fail(function(err) {
      if (err.code === 21007) {
        postToService(data, "https://sandbox-url.com")
          .then(resolve(deferred, body))
          .fail(reject(deferred, err));
      } else {
        deferred.reject(err);
      }
    });

  return deferred.promise;
}; 
```

选项 2 - 使用绑定。这具有使用现有 JS 功能的优势，但是`deferred`在创建回调时您有重复的引用。

```
exports.verify = function(data) {
  var deferred = Q.defer();

  postToService(data, "https://production-url.com")
    .then(deferred.resolve.bind(deferred, body))
    .fail(function(err) {
      if (err.code === 21007) {
        postToService(data, "https://sandbox-url.com")
          .then(deferred.resolve.bind(deferred, body))
          .fail(deferred.reject.bind(deferred, err));
      } else {
        deferred.reject(err);
      }
    });

  return deferred.promise;
}; 
```

选项 3 - 使用绑定和“方法句柄”（#2 的细微变化）。

```
exports.verify = function(data) {
  var deferred = Q.defer();
  var resolve = deferred.resolve;
  var reject = deferred.reject;

  postToService(data, "https://production-url.com")
    .then(resolve.bind(deferred, body))
    .fail(function(err) {
      if (err.code === 21007) {
        postToService(data, "https://sandbox-url.com")
          .then(resolve.bind(deferred, body))
          .fail(reject.bind(deferred, err));
      } else {
        deferred.reject(err);
      }
    });

  return deferred.promise;
}; 
```

选项 4 - Monkey 补丁延迟。

```
function patch(deferred) {
  deferred.resolveFn = function (ob) {
    return function () {
      deferred.resolve(ob);
    };
  };
  deferred.rejectFn = function (ob) {
    return function () {
      deferred.reject(ob);
    };
  };
  return deferred;
}

exports.verify = function(data) {
  var deferred = patch(Q.defer());

  postToService(data, "https://production-url.com")
    .then(deferred.resolveFn(body))
    .fail(function(err) {
      if (err.code === 21007) {
        postToService(data, "https://sandbox-url.com")
          .then(deferred.resolveFn(body))
          .fail(deferred.rejectFn(err));
      } else {
        deferred.reject(err);
      }
    });

  return deferred.promise;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:33:20.097

您可能会考虑以下内容。我认为明智地使用空格有助于提高可读性。您可能希望找到一个合理的风格标准，让您的团队感觉良好并坚持下去！

```
exports.verify = function(data) {
  var deferred = Q.defer();

  postToService(data, "https://production-url.com")

    .then(deferred.resolve, function(err) {

      if (err.code === 21007) {

        postToService(data, "https://sandbox-url.com")

          .then(deferred.resolve, deferred.reject);

      } else { deferred.reject(err); }

    });

 return deferred.promise;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T17:12:02.250

斯图尔特的回答是对的，关键是要连锁承诺。我想澄清一下，不需要使用 Q.defer 来包装。它甚至被认为是一种反模式。在此处查看原因[延迟的反模式](https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern)

```
var request = require('request')
    , Q = require('q');

var PRODUCTION_URL = "https://production-url.com",
var SANDBOX_URL    = "https://sandbox-url.com",

export.verify = function() {

  return postToProduction(data)
         .fail( function(error) {
             if (error.code === 21007 ) return postToSanbox(data);
             throw error;
         });
}

function postToProduction(data) {
    return postToService(data, PRODUCTION_URL);
}

function postToSandbox(data) {
    return postToService(data, SANDBOX_URL);
}

function postToService(data, url) {
   var deferred = Q.defer();

   var options = {
      data: data,
      url: url
   };

  request.post(options, function(err, response, body) {
    if (err) return deferred.reject(err);
    if (hasErrors(response)) return deferred.reject(response);

    deferred.resolve(body);    
  });

  return deferred.promise;   
} 
```

# ios - 使用父 NSManagedObject 上的关系枚举子实体 VS 使用 NSFetchRequest

> ID：15913449
> 
> 赞同：1
> 
> 时间：2013-04-09T22:06:59.613
> 
> 标签：ios, core-data, nsfetchrequest

假设我有一个具有一对多关系属性的 NSManagedObject 子类的实例。性能方面，怎么样

```
for (id item in parent.children) {
   // do something with an item
} 
```

与使用新的 NSFetchRequest 来获取这些孩子的数组并枚举该数组相比？有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:25:04.700

如果您知道您将遍历所有 NSManagedObject 的关系，那么
您的原始 NSFetchRequest 应该使用 : 预取这些关系`setRelationshipKeyPathsForPrefetching:`。
在这种情况下，您已经支付了原始提取的成本（当时可能更低）。

如果您在访问每个时不预取，`object.relation`则必须转到核心数据以填充该关系。它可能比新的 Fetch 请求更好。
但是如果你真的想做一个新的 Fetch 请求，不要每次都从头开始创建一个，使用同一个。并使用谓词 with`predicateWithSubstitutionVariables:`不要每次都从头开始创建一个。从头开始创建新谓词是昂贵的。

# php - PHP：如何获取 HTML 元素的正确结束标记

> ID：15913457
> 
> 赞同：4
> 
> 时间：2013-04-09T22:07:20.810
> 
> 标签：php, regex, xpath, domdocument

假设我有一个 HTML 页面，如下所示：

```
<!-- This is the opening tag -->
<div class="content_text">
  <div>Title</div>
  <div>Author Name</div>
  <div>Some complicated HTML elements correctly validated</div>
  <b>Some more text</b>
  <img ... />
  <div> more and more text </div>
</div><!-- This is the correct closing tag --> 
```

如何获取 div 的开头`class="content_text"`和正确的结束标签之间的内容？

我尝试了正则表达式，但我找不到任何简单甚至困难的方法来做到这一点。

我尝试了[XPath](http://en.wikipedia.org/wiki/XPath)，但仍然无法获取内容。相反，我得到了外部 div 内的文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:22:06.027

您可以使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net)来解析 HTML，就像解析`DOMDocument`XML 一样。

> *注意：* [PHP 也直接支持 DOMDocument](http://php.net/DOMDocument)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T22:22:33.457

```
 $scrape_address = "http://www.al-madina.com/node/444862";
    $ch = curl_init($scrape_address);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, '1'); 
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_ENCODING, "");
    $data = curl_exec($ch);
    // I couldn't get an element by Attribute so I just replaced class to id
    $data = str_replace('class="content_text"','id="my_unique_id"',$data);

    $domd = new DOMDocument();
    libxml_use_internal_errors(true);
    $domd->loadHTML($data);
    libxml_use_internal_errors(false);
    $div = $domd->getElementById("my_unique_id");

    if ($div) {
      $dom2 = new DOMDocument();
      $dom2->appendChild($dom2->importNode($div, true));
      echo $dom2->saveHTML();
    } else {
      echo "Nothing found";
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T22:22:53.687

我建议使用 PHP 的[DOMDocument](http://www.php.net/manual/en/book.dom.php) - 除非内容的结构总是完全相同，否则正则表达式不会这样做，即使那样它也不会很漂亮。

另外，这里有一个[关于](https://stackoverflow.com/questions/6177987/php-xpath-how-to-return-string-with-html-tags)使用 SimpleXML 解决的类似情况的问题，也许可以提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:52:12.623

*您似乎已经能够成功运行 XPath 查询，所以我将省略 PHP 代码并直接进入 XPath 部分。*

不确定您所说的“内容”是什么意思，所以我提供了一些替代方案：

您希望所有文本节点都在`<div/>`：

```
//div[@class="content_text"]//text() 
```

您希望所有 XML 包括元素：

```
//div[@class="content_text"] 
```

两者都会返回一组结果，一定要循环它。

# python - Python中base64解码的问题

> ID：15913458
> 
> 赞同：0
> 
> 时间：2013-04-09T22:07:21.573
> 
> 标签：python, encoding, base64, decoding

您好，感谢您的阅读。我在使用 base64 解码以前编码的文件时遇到了一些问题。例如，假设我想使用 base64 编码一个 pdf 文件。结果是一个很好的 80 字符分隔的字符串系列。进行编码的代码（摘自此板）既好又简单：

```
 def encode_file_base64(bin_input):
      flag = 0
      try:
        with open(bin_input, 'rb') as fin, open('tmp.bin_hex', 'w') as fout:
        base64.encode(fin, fout)
      except:
        traceback.print_exc()
        flag = -1
      return flag 
```

现在解码功能：

```
 def decode_file_base64(bin_output):
      flag = 0
      try:
        with open('tmp.bin_hex', 'rb') as fin, open(bin_output, 'w') as fout:
          base64.decode(fin, fout)
      except:
          traceback.print_exc()
          flag = -1
      return flag 
```

它可以完成这项工作，但是当我尝试打开输出文件时，我无法打开并且文件似乎“损坏”。我一直在努力解决这个问题，我即将放弃。我想我可以使用其他类型的编码，但 BOSS 坚持使用 base64（他一定听说过它是最好的......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:12:44.147

我不知道这是否是您的问题（我什至不知道您的问题是什么），但是如果您在二进制模式有所不同的平台/版本/实现上，那么您做错了：

```
with open('tmp.bin_hex', 'rb') as fin, open(bin_output, 'w') as fout: 
```

您正在以二进制模式打开文本文件（您以文本模式编写的 b64 文件），并以文本模式打开二进制文件。尝试这个：

```
with open('tmp.bin_hex', 'r') as fin, open(bin_output, 'wb') as fout: 
```

* * *

同时，出于调试目的，您可能希望尝试将文件与编码和解码的结果进行比较。例如，如果您看到新文件稍长一些，而 hexdump 显示这是因为每个 0x0A 字节已被两个 0x0D 0x0A 字节替换，您就知道问题在于您正在翻译换行符，即反过来意味着您处于文本模式。

# jquery - 为什么在 jquery 中使用 bind 或 on 而不是直接事件触发器？

> ID：15913460
> 
> 赞同：1
> 
> 时间：2013-04-09T22:07:32.863
> 
> 标签：jquery

我见过很多人使用 bind 或 on 函数而不是直接事件触发器等

```
 $(document).bind('click', function(){
        alert('Fired');
    }); 
```

代替

```
 $(document).click(function(){
alert('Fired');
 }); 
```

功能相同

```
$('p').on('click', function()({
alert('fired');
 }); 
```

代替

```
 $('p').click(function()({
  alert('fired');
 }); 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:32:19.843

[.on() 的 jQuery 文档](http://api.jquery.com/on/)

`.click()`是`.on('click', handler)`. 完全没有区别。所以你不妨坚持`.on()`并保存那个额外的函数调用。

[.bind() 的 jQuery 文档](http://api.jquery.com/bind/)

从 jQuery 1.7开始`.bind()`，`.live()`和`.delegate()`方法已被`.on()`. 这些函数将在 jQuery 的未来版本中删除。该`.on()`方法是将事件处理程序附加到文档的首选方法。

在内部，jQuery 将所有这些方法和速记事件处理程序设置器映射到该`.on()`方法，进一步表明您应该从现在开始忽略这些方法并只使用`.on()`：

```
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
},
live: function( types, data, fn ) {
    jQuery( this.context ).on( types, this.selector, data, fn );
    return this;
},
delegate: function( selector, types, data, fn ) {
    return this.on( types, selector, data, fn );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:02:33.410

我几乎在任何地方都使用 .bind 或 .on 。我几乎从不使用.click。原因如下：

如果您想让您的网站或网络应用程序跨平台兼容，并且您希望用户在计算机上“单击”按钮并在 iPad 或其他移动设备上“点击”按钮，.click 可能对你不好。

我使用这样的东西：

```
$("#myButton").on(inputType(), functionHandler(){console.log("you have clicked or touched myButton!"});

function inputType(){
    if(getUserDevice != "computer"){
        return "touchend";
    }else{
        return "click";
    }
}

function getUserDevice(){
    //code in here determine if it's a computer or a "touch device"
    //return "computer";
} 
```

# c# - 作为 Windows 服务运行时应用程序的奇怪行为

> ID：15913463
> 
> 赞同：0
> 
> 时间：2013-04-09T22:07:44.730
> 
> 标签：c#, windows, service, windows-services, console

我创建`C#`了处理核心移植的项目`C++`- 核心只是完成这项工作 - 获取简单数据，处理它并再次返回一些结果作为简单数据。

作为控制台应用程序运行时，此项目可以正常工作：

```
MainProcess main = new MainProcess();
main.Run(); //starts thread with main
main.Join(); //prevent main thread from terminating 
```

当我将其更改为作为最简单的 Windows 进程运行时，`MainProcess main = new MainProcess();`在初始化、`main.Run()`启动和`main.Abort() \\ aborts thread with main`停止时，核心停止正常工作。

核心是一些确定性启发式，除了它自己什么都不知道。当整个应用程序作为服务运行时，它会获得相同的数据，但返回更差的结果。

我检查了，这不是一些权限问题。

你知道可能出什么问题吗？与这一小改动完全相同的代码。对于相同的数据，它总是返回相同的结果（所有控制台执行相同，所有 Windows 服务执行相同）。

所以我的问题是：当程序作为控制台应用程序或 Windows 服务运行时，它有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:25:10.943

问题出在一些相对路径上。

例如：

```
...
OpenFile("file.ext");
.. 
```

`file.ext`并存在于 bin 目录`Program.exe`中。

当您将其作为控制台应用程序运行时，它可以工作，但是当您尝试将其作为 Windows 服务运行时，根目录会有所不同，并且程序将找不到`file.ext`.

# java - 从 Cassandra 数据库获取指定的列数据，而不是所有列数据

> ID：15913464
> 
> 赞同：1
> 
> 时间：2013-04-09T22:07:45.650
> 
> 标签：java, cassandra, pelops

我正在使用 Cassandra 数据库。我创建了一个列族，其中有 10 列。

现在我有兴趣只检索我需要的列。我不需要从 Cassandra 数据库中检索所有列值。

假设我的列族中有以下列`users`。

```
colA
colB
colC
colD 
```

我只需`colA and colB`要从 Cassandra 数据库中获取数据。那我该怎么办？我不想从 Cassandra 获取所有列数据，然后循环获取所需的列。

就像是-

`SELECT colA, colB from table1;`

我正在与`Pelops client`.

下面是我的代码。

```
public void readTest() {
        // read back the data we just wrote
        Selector selector = Pelops.createSelector(poolName);
        List<Column> columns = selector.getColumnsFromRow(colFamilyName, rowKey, false, ConsistencyLevel.ONE);

        System.out.println("Name: " + Selector.getColumnStringValue(columns, "name"));
        System.out.println("Age: " + Selector.getColumnValue(columns, "age").toInt());

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:35:11.350

您需要使用 getColumnsFromRow 调用，该调用采用“SlicePredicate”来指定列名。如：

```
getColumnsFromRow(String columnFamily, Bytes rowKey, SlicePredicate colPredicate, ConsistencyLevel cLevel) 
```

# c++ - Qt：将数据库存储/创建到用户空间

> ID：15913466
> 
> 赞同：2
> 
> 时间：2013-04-09T22:07:51.623
> 
> 标签：c++, qt

我开发了一个使用 SQLite 数据库的小型应用程序。现在，我想以与使用 QSettings 存储设置相同的方式在用户空间（就硬盘而言）创建和存储该数据库。

我可以使用 QDir 和类似的类来查找用户主目录的位置，但我想避免创建隐藏目录，我正在寻找一个透明的解决方案和独立于操作系统的解决方案。

我可以使用 Qt 资源系统将数据库创建到用户主目录中（稍后再找到）吗？

我怎样才能让它变得容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:39.003

要真正回答您的问题，我们需要知道一些事情。首先，您希望如何将数据库实际存储在磁盘上？它是否需要采用特定的文件格式？二进制？.txt 文件？.txt/sql 文件，可以读入另一个数据库程序（即在 SQL 中重建数据库和表的命令）？

Qt 有一组对象可用于存储数据库。您可以使用 QFile 和 QTextStream/QDataStream 创建您自己的自定义文件。就用户交互而言，QDir 和 QFileDialog 类对此提供了极好的支持。

# python - Django：检查自动生成函数的源代码

> ID：15913468
> 
> 赞同：0
> 
> 时间：2013-04-09T22:07:55.180
> 
> 标签：python, django, django-models, django-forms

还记得如何使用 manage.py 来检查 manage.py syncdb 和 Django 的 ORM 生成的表的源 SQL 吗？

有没有什么办法可以实现类似的功能，但要看自动生成功能的源码？例如某种形式的 save() 和 clean() 函数。

访问此类源代码将使我在修改这些函数时具有很大的灵活性，这是我们有时需要的。

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:23:49.510

不——Djagno 不生成任何 Python 函数。

不过，要查看 Django 函数的源代码，您可以查看源代码（例如，[https://github.com/django/django/blob/master/django/forms/forms.py#L74](https://github.com/django/django/blob/master/django/forms/forms.py#L74)，正如@mipadi 建议的那样）。

您可以找到包含任何给定类的实现的文件，如下所示：

```
>>> from django.forms import forms
>>> forms.__file__
'…/django/forms/forms.pyc' 
```

# html - 交互式图像/图表，如 BBC 网站中使用的那些

> ID：15913470
> 
> 赞同：0
> 
> 时间：2013-04-09T22:07:57.540
> 
> 标签：html, image, dynamic, graphics, interactive

我的目标是建立一个非常互动和充满活力的网站。我想知道 BBC 如何经常将这些交互式图像和图表添加到其网站，例如：

[链接到 BBC 页面](http://www.bbc.co.uk/news/business-15748696)

经过一些初步研究，我被告知他们使用 HTML 5，但我不确定它是否正确。它似乎如此流少，就好像它的闪光一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:42:02.710

您展示的特定可视化可以使用[D3](http://d3js.org/)有效地完成，特别是这种流行的图表，称为[“和弦图”](http://bl.ocks.org/mbostock/4062006)

D3 特别针对交互式可视化，比纯 javascript 更容易。

# objective-c - 轻量级迁移

> ID：15913472
> 
> 赞同：0
> 
> 时间：2013-04-09T22:08:00.700
> 
> 标签：objective-c, cocoa, core-data

在设置基于文档的应用程序方面，我一直遵循 Marcus Zarra 的指南。到目前为止，它进展顺利，但是我正在尝试实施核心数据轻量级迁移，但我似乎遇到了障碍。模型的旧版本和新版本之间的唯一区别是其中一个实体的 NSString 属性。

在 NSDocument 中，我添加了以下代码：

```
 - (BOOL)configurePersistentStoreCoordinatorForURL:(NSURL *)url ofType:(NSString *)fileType modelConfiguration:(NSString *)configuration storeOptions:(NSDictionary *)storeOptions error:(NSError **)error
    {
        NSMutableDictionary *newStoreOptions;
        if (storeOptions == nil) {
            newStoreOptions = [NSMutableDictionary dictionary];
        }
        else {
            newStoreOptions = [storeOptions mutableCopy];
        }
        [newStoreOptions setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
        [newStoreOptions setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

        BOOL result = [super configurePersistentStoreCoordinatorForURL:url ofType:fileType modelConfiguration:configuration storeOptions:newStoreOptions error:error];
        NSLog(@"base url:%@ model:%@", [url baseURL], [self managedObjectModel]);
        return result;
  } 
```

只是为了看看发生了什么，我输出了从

```
[super configurePersistentStoreCoordinatorForURL:url ofType:fileType modelConfiguration:configuration storeOptions:newStoreOptions error:error]; 
```

这就是我从 Xcode 得到的：

```
 NSUnderlyingError = "Error Domain=NSCocoaErrorDomain Code=512 \"The file couldn\U2019t be saved.\" UserInfo=0x104521930 {NSUnderlyingException=Error validating url for store}";
reason = "Can't add destination store"; 
```

我在 SO 上看到了几篇文章，称一些用户在尝试同时读/写时遇到了这个问题，但我不相信我属于这一类。

另外我不知道这是否会有所不同，但我将我的应用程序设置为具有两个上下文。一个是写入persistentStore 的根上下文，第二个是子上下文，UI 的所有操作都发生在该子上下文中。根上下文被设置为孩子的父上下文。

谢谢！

**更新** 愚蠢的我......我想我有一个部分解决方案，但不确定这将如何在用户计算机上工作。因此，如果我在“摘要”选项卡中取消选中“启用应用沙盒”，一切似乎都可以正常工作。虽然这对我有用，但当我将它提交到 Mac App Store 时我将不得不打开它，并且不确定这将如何影响用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:12:38.133

查看文档`configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error`，特别是`NSError **`参数。您应该传递 a 的地址`NSError *`，即`&error`在您的情况下（假设您已`NSError *error`在省略的代码中定义）。但是`&error`成功的价值是不确定的。使用类似的东西

```
if (!result) {
    NSLog(@"%@", error.localizedFailureReason);
    // fix it
} 
```

# google-chrome-extension - Chrome pageAction 图标不显示，除非在调试时

> ID：15913474
> 
> 赞同：3
> 
> 时间：2013-04-09T22:08:07.593
> 
> 标签：google-chrome-extension

我试图让 Chrome pageAction 图标出现，但它只是在页面加载时短暂闪烁然后消失。

然而，让我感到困惑的是，当我使用开发工具调试器并在 chrome.pageAction.show() 调用上设置断点时，它可以完美运行！这是我的 manifest.json：

```
{
    "manifest_version": 2,
    "name": "20130409-test",
    "description": "Page action icons don't work!",
    "version": "0.1",
    "icons": {"16": "icon16.png", "48": "icon48.png", "128": "icon128.png"},
    "background": {
        "scripts": ["background.js"],
        "persistent": true
    },
    "permissions": [
        "<all_urls>",
        "webRequest",
        "webRequestBlocking"
    ],
    "page_action": {
        "default_icon": {
            "19": "icon19.png",
            "38": "icon38.png"
        },
        "default_title": "Page action title here!"
    }
} 
```

我的 background.js 页面是：

```
chrome.webRequest.onSendHeaders.addListener(
    function(details) {
        chrome.pageAction.show(details.tabId);
        chrome.pageAction.setTitle({
            "tabId": details.tabId,
            "title": "url=" + details.url
        });
    },
    {urls: ["<all_urls>"], types: ["main_frame"]},
    ["requestHeaders"]
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:00:27.890

A page action which is bound to a specific tab is removed when the tab's page unloads.

`chrome.webRequest.onSendHeaders`当一个新的请求即将开始时触发。这意味着上一页仍在显示中。当您调用 时`chrome.pageAction.show`，会为当前页面激活页面操作，并在加载请求的页面后立即消失。

通过使用开发人员工具设置断点（或使用`debugger;`语句），`chrome.pageAction.show`可以充分延迟，并且页面动作在新页面加载*后显示。*

使用[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)或[`chrome.tabs.onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)事件，除非您希望在发起请求后立即查看 URL。

## 方法一：内容脚本

内容脚本应仅在顶级框架中注入。最好尽快，这样用`"run_at":"document_start"`。

```
// PART of manifest.json
"background": {
    "scripts": ["background.js"]
},
"content_scripts": [{
    "matches": ["<all_urls>"],
    "js": ["contentscript.js"],
    "run_at": "document_start",
    "all_frames": false
}], ...........

// Content script: contentscript.js
chrome.extension.sendMessage({type:'showPageAction'});

// Background page: background.js
chrome.extension.onMessage.addListener(function(message, sender) {
    if (message && message.type === 'showPageAction') {
        var tab = sender.tab;
        chrome.pageAction.show(tab.id);
        chrome.pageAction.setTitle({
            tabId: tab.id,
            title: 'url=' + tab.url
        });
    }
}); 
```

这种方法的缺点是它不适用于受限制的 URL。例如，您将看不到数据 URI、Chrome 网上商店等的页面操作。此问题不会出现在下一个方法中。

## 方法二：`chrome.tabs.onUpdated`

```
// background.js
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    chrome.pageAction.show(tabId);
    chrome.pageAction.setTitle({
        tabId: tab.id,
        title: 'url=' + tab.url
    });
}); 
```

注意：[`onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)每个选项卡加载都会多次调用。最初在 URL 更改时执行一次，然后为每个（顶级/子）框架执行两次。减少不必要的调用次数会很好`chrome.pageAction`，但没有直接的方法。
如果您只检查 的值[`changeInfo.url`](https://developer.chrome.com/extensions/tabs.html#property-onUpdated-changeInfo)，则刷新页面时不会显示页面操作。

# c# - 如何让面板显示在 winform C# 的同一层？

> ID：15913480
> 
> 赞同：1
> 
> 时间：2013-04-09T22:08:50.570
> 
> 标签：c#, winforms

我将所有面板都停靠在窗框上，但不幸的是，其中一个面板出现在另一个面板上。相反，停靠所有面板会很好，因此它们共享同一层（z-index）并且不在彼此之上。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:58:50.800

你有几个选择：

*   您可以在所有四个侧面使用`Anchor`属性和`Anchor`最上面的面板`Left`，`Top`以及下面的面板`Right`
*   您可以放置​​另一个面板，然后将中间面板作为`Dock`，它将占用剩余空间`Bottom``Dock``Fill`
*   您可以使用`TableLayoutPanel`并制作 3 行

使用 View -> Other Windows -> Document Outline 更好地了解正在发生的事情

# url - Nginx（使用 mod_zip）非转义 URL 输入

> ID：15913483
> 
> 赞同：2
> 
> 时间：2013-04-09T22:09:11.863
> 
> 标签：url, nginx, escaping

# 背景

我使用带有 mod_zip 的 Nginx（[http://wiki.nginx.org/NgxZip](https://github.com/evanmiller/mod_zip) [，](http://wiki.nginx.org/NgxZip)在 Github 上）作为代理，将来自 Amazon S3 的数据流式传输到存档中。

mod_zip 采用空格分隔的参数清单。换行符分隔新文件。每行的格式为： `CRC[- for unknown] size location filename`

**两行清单示例**：

```
- 4 /pro-core.com/prostore/9228407_foobar.txt?AWSAccessKeyId=key&Expires=sometime&Signature=signed foo/foobar.txt
- 288134 /pro-core.com/prostore/9228400_38.png?AWSAccessKeyId=key&Expires=soon&Signature=signed bar/38.png 
```

这将创建一个包含 2 个目录的存档：

```
|- foo
|   |- foobar.txt
|- bar
    |- 38.png 
```

**我的 nginx.conf 文件**：

> 用户 nginx；
> 
> worker_processes 1；
> 
> error_log /usr/local/nginx/logs/error.log 调试；
> 
> 事件 {worker_connections 1024; }
> 
> http { 包括 mime.types; default_type 应用程序/八位字节流；
> 
> ```
> #access_log  logs/access.log  main;
> 
> keepalive_timeout  0;
> sendfile off;
> gzip  off;
> 
> server {
>     listen       8008;
>     server_name  localhost;
> 
>     #charset koi8-r;
> 
>     #access_log  logs/host.access.log  main;
> 
>     root html;
> 
>     location / {
>         internal;
>     }
> 
>     location /pro-core.com/ {
>         internal;
>         proxy_pass http://s3.amazonaws.com;
>         proxy_buffering off;
>         proxy_buffers 2 4m;
>         proxy_buffer_size 4m;
>         proxy_busy_buffers_size 4m;
>     }
> 
>     location /download/ {
>         proxy_pass  http://localhost:3000/utilities/s3_manifest_for_nginx_to_zip_and_stream/;
>         proxy_redirect off;
>         proxy_buffering off;
>         proxy_set_header        Host            $host;
>         proxy_set_header        X-Real-IP       $remote_addr;
>         proxy_set_header  Accept-Encoding identity;
>     }
> 
> } 
> ```
> 
> }

# 问题

mod_zip 似乎用括号做了一些有趣的事情。我的一些 S3 密钥中有括号，例如`9228403_foobar (1).txt`. 我无法更改 S3 密钥。在清单中，我有一行如下所示：

```
- 4 /pro-core.com/prostore/9228403_foobar%20%281%29.txt?AWSAccessKeyId=key&Expires=time&Signature=signed foo/foobar _1_.txt 
```

请注意，位置 URL 已转义。当我尝试打开生成的存档时，它已损坏。悲伤的熊猫。查看 nginx 错误日志，我从 S3 获得了一个 403 文件，该文件的键中有括号：

**从 nginx 日志**：

```
"GET /pro-core.com/prostore/9228403_foobar%20(1).txt?AWSAccessKeyId=key&Expires=time&Signature=signed HTTP/1.0
...
[debug] : *31 http proxy status 403 "403 Forbidden" 
```

请注意，位置 URL 中的括号不再被转义。我通过 curl 执行普通的“GET”来验证 URL 是问题所在。

```
$ curl -v http://s3.amazonaws.com/..._foobar%20(1).txt?...
=> 403 Forbidden -- SignatureDoesNotMatch

$ curl -v http://s3.amazonaws.com/..._foobar%20%281%29.txt?...
=> 200 OK -- contents of foobar (1).txt 
```

# 问题

有什么方法可以更改我的应用程序中的某些内容，或者告诉 nginx 或 mod_zip 不要取消转义我的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:04:42.500

对于我的问题，我有一个解决方法，即从我的 S3 密钥中删除括号。这并不理想，但它现在解决了我们的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-22T08:12:00.317

Nginx 将解码传递给代理通道的 uri，从而中断您对 s3 的调用。

# c++ - 关于 GET 和 sprintf 的 C++ 代码

> ID：15913487
> 
> 赞同：1
> 
> 时间：2013-04-09T22:09:36.147
> 
> 标签：c++, get

```
while(true)
{
    char *mybuf;
    if(getenv("windir") != NULL)
    {
        //mybuf = "GET /gbot/gate.php?page=ident&os=windows&username=%s\r\n\r\n";
        sprintf(mybuf, "GET /gbot/gate.php?page=ident&os=windows&username=%s\r\n\r\n", getenv("username"));
    }
    else
        mybuf = "GET /gbot/gate.php?page=ident&os=linux\r\n\r\n";
    send(Socket, mybuf, strlen(mybuf), 0);
    char buffer[10000];
    recv(Socket, buffer, 10000,0);
    cout << buffer;
    _sleep(60000);
} 
```

我有这段代码，sprintf 使程序崩溃。如何制作 mybuf，包含用户名 (getenv)，而不会使我的项目崩溃？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:12:55.210

`char *mybuf`只是给你一个`char`指针，没有别的。您需要实际分配`char`缓冲区，以便`sprintf`有一些地方可以将其结果写入。尝试将其改为数组（以避免进行手动内存管理）：

```
char mybuf[SIZE]; 
```

`SIZE`用你想要的缓冲区大小替换。

但是，我担心您认为您正在编写 C++。这看起来更像 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:17:44.230

除非您*真的*想创建另一个缓冲区溢出问题，否则根本不要使用`sprintf`。既然你已经标记了这个 C++，我建议更像：

```
std::string mybuf("GET /gbot/gate.php?page=ident&os=");

if(getenv("windir") != NULL) {
    mybuf += "windows&username=";
    mybuf += getenv("username");
    mybuf += "\r\n\r\n";
}
else
    mybuf += "linux\r\n\r\n";

send(Socket, mybuf.c_str(), mybuf.length(), 0); 
```

# python - python在列表列表中查找给定节点的所有邻居

> ID：15913489
> 
> 赞同：4
> 
> 时间：2013-04-09T22:09:46.473
> 
> 标签：python, list, gridview, nearest-neighbor

我正在尝试找到一种在列表列表中查找给定节点的所有邻居的方法。数组如下所示：

```
0,2,4,1,6,0,0
2,0,0,0,5,0,0
4,0,0,0,5,5,0
1,0,0,0,1,1,0
6,5,0,1,0,5,5
0,0,5,1,5,0,0
0,0,0,0,5,0,0 
```

到目前为止，我的代码是：

```
#!/usr/bin/python

#holds all source nodes
source = []

#read in and store the matrix
def create_matrix(file):
    with open('network.txt') as f:
        Alist = []
        for line in f:
            part = []
            for x in line.split(','):
                part.append(int(x))
            Alist.append(part)
    return Alist

def check_neighbours(Alist):
    i = iter(Alist)
    item = i.next()
    source.append(item)
    print source

file = ("F:/media/KINGSTON/Networking/network.txt")
Alist = create_matrix(file)
check_neighbours(Alist) 
```

显然，这只输出矩阵的第一行，但我想要一些不同的东西。例如，我将从节点 [0,0] 开始，它是 0，然后找到 [0,1] 和 [1,0]。但如果我不在矩阵的边缘，我还需要查看 3x3 半径。我知道如何找到当前节点右侧的下一个邻居，但我真的不确定如何在节点旁边找到任何东西，包括对角节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:40:01.450

您需要一个 8 邻居算法，它实际上只是从列表列表中选择索引。

```
# i and j are the indices for the node whose neighbors you want to find
def find_neighbors(m, i, j, dist=1):
    return [row[max(0, j-dist):j+dist+1] for row in m[max(0, i-1):i+dist+1]] 
```

然后可以通过以下方式调用：

```
m = create_matrix(file)
i = some_y_location
j = some_x_location
neighbors = find_neighbors(m, i, j) 
```

没有列表压缩的实现：

```
def find_neighbors(m, i, j, dist=1):
    neighbors = []
    i_min = max(0, i-dist)
    i_max = i+dist+1
    j_low = max(0, j-dist)
    j_max = j+dist+1
    for row in m[i_min:i_max]:
        neighbors.append(row[j_min:j_max])
    return neighbors 
```

您需要对 i/j_min 进行最大调用以避免负索引，但上限值太大由列表切片自动处理。

如果您希望将这些行列表作为单个元素列表，则需要添加：

```
neighbors = [elem for nlist in neighbors for elem in nlist] 
```

这会使列表列表变平。

如果您想要邻居的指标（可能有更清洁的解决方案）：

```
def find_neighbor_indices(m, i, j, dist=1):
    irange = range(max(0, i-dist), min(len(m), i+dist+1))
    if len(m) > 0:
        jrange = range(max(0, j-dist), min(len(m[0]), j+dist+1))
    else:
        jrange = []
    for icheck in irange:
        for jcheck in jrange:
            # Skip when i==icheck and j==jcheck
            if icheck != i or jcheck != j:
                neighbors.append((icheck, jcheck))
    return neighbors 
```

# java - 如何在 Java 中存储对？

> ID：15913492
> 
> 赞同：2
> 
> 时间：2013-04-09T22:09:51.803
> 
> 标签：java, types

我正在用 Java 编写一个小的 API 程序，它将验证 IP 地址。在最简单的迭代中`(1.2.3.4)`，我只是调用像 googles guava 这样的库并得到真或假。

我遇到的问题是输入可以包含ip范围，即`192-198.10.12.16-20/24`

由于 guava 不会将这种输入验证为有效的 IP 地址，因此我试图在调用 guava 之前处理 IP 地址。

我想我会做以下事情：

1.  如果有，请切断网络掩码（此处为 /24）。
2.  使用 split("\.") 方法将八位字节分成字符串数组（？）。
3.  将八位字节的 IP 范围提取到一个单独的字符串数组中，因此八位字节数组仅包含主 IP 地址，我现在可以将其传递给 guava 进行验证。
4.  作为最后一步，我将检查给定的 IP 范围是否大于它所属的八位字节并且小于 256。如果是，那么原始 IP 地址（见上文）就可以了。

如前所述，我需要一种数据类型，允许我存储主 IP 地址的八位字节和八位字节的 IP 范围（如果有）之间的原始关系，以便执行 4 中描述的检查并恢复原始 IP 地址表示法，即能够连接八位字节和 IP 范围。

为了可视化上述内容，我需要：

```
Octet 1 (192), IP Range 1 (198)
Octet 2 (10), IP Range 2 ()
Octet 3 (12), IP Range 3()
Octet 4 (16), IP Range 4 (20) 
```

像八位字节这样的数组会`String [][]`完成这项工作吗？如果是，我将如何填写？如果不是，还有什么其他数据类型适合这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:21:04.170

我建议使用一个自定义对象——一个可以在这里处理不同可能性的对象。

它会更加清晰和简单。最重要的是，它可以具有处理不同情况的方法（例如，它可以具有一个迭代器，该迭代器将返回 IP 地址对象所涵盖的任何范围。

配对只是一个坏主意（可读性），我只是建议找到更具表现力的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:37:38.990

比尔 K 是对的。这是一个简单的示例类：

```
 public class IPAddress {

        private IPOctet octet1;
        private IPOctet octet2;
        private IPOctet octet3;
        private IPOctet octet4;

        private static final String NETWORK_MASK_CHAR = "/24";

        public IPAddress(String value) throws Exception{
            value = cutOffNetworkMask(value);
            String[] octets = value.split("\\.");
            if (octets.length < 4) throw new Exception("Invalid input value. Too few octets.");
            octet1 = new IPOctet(octets[0]);
            octet2 = new IPOctet(octets[1]);
            octet3 = new IPOctet(octets[2]);
            octet4 = new IPOctet(octets[3]);
        }

        public boolean hasMatchOf(IPAddress another){
            if (!octet1.isMatching(another.getOctet1())) return false;
            if (!octet2.isMatching(another.getOctet2())) return false;
            if (!octet3.isMatching(another.getOctet3())) return false;
            if (!octet4.isMatching(another.getOctet4())) return false;
            return true;
        }

        public IPOctet getOctet1(){ return octet1; }
        public IPOctet getOctet2(){ return octet2; }
        public IPOctet getOctet3(){ return octet3; }
        public IPOctet getOctet4(){ return octet4; }

        private static String cutOffNetworkMask(String base){
            int index = base.indexOf(NETWORK_MASK_CHAR);
            try{
                if (index > -1) base = base.substring(0, index);
            }catch(IndexOutOfBoundsException ignored){}
            return base;
        }

    } 
```

IPOctet 类：

```
 public class IPOctet {

        private static final String RANGE_SYMBOL = "-";
        int max = 255;
        int min = 0;

        public IPOctet(String stringValue) throws Exception {
            int index = stringValue.indexOf(RANGE_SYMBOL);
            if (index < 0){
                // This octet is a single byte;
                max = str2int(stringValue);
                min = max;
            }else{
                // This octet has a range.
                String[] values = stringValue.split(RANGE_SYMBOL);
                if (values.length != 2) throw new Exception("Invalid Input. Range must be like xx-xx");
                min = str2int(values[0]);
                max = str2int(values[1]);
            }
        }

        public boolean isMatching(IPOctet another) {
            if (max < another.getMinValue()) return false;
            if (min > another.getMaxValue()) return false;
            return true;
        }

        public int getMinValue(){ return min; }
        public int getMaxValue(){ return min; }

        private static int str2int(String input) throws Exception{
            int result;
            try{
                result = Integer.parseInt(input);
            }catch(NumberFormatException nfe){
                throw new Exception("Invalid input. Input is not a number.");
            }
            validate(result);
            return result;
        }

        private static void validate(int input) throws Exception{
            if (input < 0 || input > 255) throw new Exception("Invalid input. Must be between 0 and 255");
        }

    } 
```

这里有一个简单的测试用例：

```
 public class Main {

        public static void main(String[] args){
            try{
                IPAddress adr1 = new IPAddress("192.168.1.0-255");
                IPAddress adr2 = new IPAddress("192.168.1.1/24");
                IPAddress adr3 = new IPAddress("1.2.3.4");
                System.out.println("adr2 matches adr1: " + adr1.hasMatchOf(adr2));
                System.out.println("adr3 matches adr1: " + adr1.hasMatchOf(adr3));
            }catch(Exception e){
                System.err.println(e.getMessage());
            }
        }
    } 
```

有了它，现在您可以将`IPAddress`es 存储在 a `ArrayList`or中`LinkedList`：

```
ArrayList<IPAddress> addresses = new ArrayList<>();
addresses.add(new IPAddress("8.8.8.8"));
addresses.add(new IPAddress("198.252.206.16"));

IPAddress mask = new IPAddress("20-200.200-255.100-255.0-255");
for (IPAddress addr : addresses){
    if (mask.hasMatchOf(addr)){
        ...
    }else{
        ..
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:39:59.780

您不必为简单的工作/程序使用外部框架。使用正则表达式，您将能够简化程序并使其非常高效。检查以下链接：[Regex to match Hostname or IP Address](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

# xml - 如何将当前属性值与标签内容相关联

> ID：15913497
> 
> 赞同：0
> 
> 时间：2013-04-09T22:10:24.197
> 
> 标签：xml, xsd

我正在解决我的 XML 文档中的问题。我的文档示例： `<Height unit="m">lala</Height>` 属性`unit`有两个值：`unit="m"`和`unit="ft"`. 我建议是否可以创建 XSD 来限制`Height`内容的子（文本）的数据类型。举个例子，那么`"m"`is set，height必须是float类型，那么`"ft"`is set，height必须是string。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:37:52.707

我不相信这在 XSD 1.0 中是可能的。但是，在 XSD 1.1 中可以使用称为“条件类型分配”的新功能。

# winforms - 当 MultiLine 属性为 True 时，全选快捷方式失败

> ID：15913498
> 
> 赞同：7
> 
> 时间：2013-04-09T22:10:29.517
> 
> 标签：winforms, visual-studio

我有一个 Windows 窗体应用程序，上面有一个标准的 TextBox。没有正在处理的事件，表单上也没有菜单。当我按`Ctrl`+`A`快捷方式选择所有文本时，我得到一个 ding，并且没有选择任何内容。

为了确认我没有无意中编写代码，我创建了一个新的 Windows 窗体应用程序，窗体上只有一个文本框。我用 C# 和 VB.Net 都试过了，两者都是一样的。我已经在 Windows 7 上运行的 Visual Studio 2012 Update 1 和 Windows XP 上运行的 Visual Studio 2008 中尝试过这个，并且在每个实例中它的行为都相同。

我可以很容易地在 KeyDown 事件中捕捉到击键组合，但即使在设置`e.Cancel = true`机器后仍然会发出“叮当”的声音。

有没有办法抑制声音，甚至更好的方法是让文本框像非多行文本框一样接受快捷方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T00:44:58.840

这对许多程序员来说是一个惊喜，但是当它处于多行模式时，本机 Windows 编辑控件实际上并没有实现 Ctrl+A 作为快捷方式。它必须由使用它的程序来实现。例如，您可以在记事本中看到这一点，这是一个使用多行编辑控件的程序。使用 File + Open + File，选择 c:\windows\notepad.exe，打开 Accelerator 节点并双击其中一个表。

实现起来并不难：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e) {
        if (e.KeyData == (Keys.Control | Keys.A)) {
            textBox1.SelectAll();
            e.Handled = e.SuppressKeyPress = true;
        }
    } 
```

* * *

更新：在 .NET 4.6.1 中进行了更改，System.Windows.Forms.TextBox 现在也为多行文本框实现了 Ctrl+A。

# java - 带有逻辑运算符的 Java 速记三元运算符

> ID：15913500
> 
> 赞同：0
> 
> 时间：2013-04-09T22:10:48.983
> 
> 标签：java, performance

我对java很陌生，所以请耐心等待。我正在尝试压缩我的一些代码，并且想知道如何使用 && 或 || 编写三元运算符。那么我如何将下面的代码变成速记三元运算符。

```
if(homePage != null && currentParentPage.getPath().equals(homePage.getPath())){
    isParent = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:25:12.847

实际上，要将您的代码转换为三元组，您必须编写代码

```
isParent = (homePage != null && currentParentPage.getPath().equals(homePage.getPath()))
           ? true : isParent; 
```

正在做

```
isParent = (homePage != null && currentParentPage.getPath().equals(homePage.getPath())); 
```

或者

```
isParent = (homePage != null && currentParentPage.getPath().equals(homePage.getPath()))
            ? true : false; 
```

修改假腿上的 isParent，这不是原始代码所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:17:52.810

三元运算符旨在表示 if-else 情况。您的案例仅包含一个 if 子句，因此您不需要一个。如果您明确想要将 isParent 设置为 false （如果失败），则可以使用一个，即

```
isParent = (homePage != null &&
  currentParentPage.getPath().equals(homePage.getPath()))  ? true  :  false; 
```

这意味着如果 ? 如果为真，则返回第一个值 (true)，否则返回第二个值 (false)。

根据下面的评论，您真的不需要使用三元数进行布尔赋值。这可以简化为：

```
 isParent = (homePage != null &&
  currentParentPage.getPath().equals(homePage.getPath())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T22:18:37.717

```
(homePage != null && currentParentPage.getPath().equals(homePage.getPath()))
        ? isParent = true
        : isParent = false; 
```

我建议以最简单的方式执行此操作 - 而不是使用三元运算

```
 isParent = (homePage != null && currentParentPage.getPath().equals(homePage.getPath())); 
```

# java - 从 sdcard 加载图像

> ID：15913502
> 
> 赞同：0
> 
> 时间：2013-04-09T22:10:55.603
> 
> 标签：java, android

我从我的服务器下载了大约 100 张图片，以便在列表视图中显示它们，

因此我将它们保存在我的 SD 卡中，这样我就不会收到 OutOfMemoryException。

但是，我看到即使我将它们下载到 SD 卡，我也必须将它们解码为占用大量内存的位图，然后显示它们，因此我也得到一个“OutOfMemory”异常。

有什么要处理的吗？

多谢

这是我从 sdcard 加载图像的代码：

```
Bitmap bmImg = BitmapFactory.decodeFile("path of img1");
imageView.setImageBitmap(bmImg); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:21:01.697

尝试使用此代码从文件加载图像：

```
 img.setImageBitmap(decodeSampledBitmapFromFile(imagePath, 1000, 700)); 
```

什么时候`decodeSampledBitmapFromFile`：

```
public static Bitmap decodeSampledBitmapFromFile(String path, int reqWidth, int reqHeight) 
{ // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(path, options);
  } 
```

您可以使用数字（在本例中为 1000、700）来配置图像文件的输出质量。

# mysql - MySQL 计数，求和，然后除

> ID：15913512
> 
> 赞同：1
> 
> 时间：2013-04-09T22:12:03.597
> 
> 标签：mysql

我浏览了这个论坛和其他人的许多帖子，我找不到与我需要的类似的解决方案。

我写了几个简单的查询，以便我们可以从我们的数据库中获得一些财务统计信息......但是，这个，我似乎无法确定......

从这个查询中，我从他们与我们一起放置的每个 InsuranceCarrier 和 NumberOfOrders 中获得 TotalRevenue ......但是在这个特定的查询中，我需要将 TotalRevenue 除以 NumberOfOrders，并给“ORDER BY”一个 AverageTicket 否则回声'd list 的顺序不正确，即使我可以在查询后进行除法计算...

这是我的查询...

```
SELECT OrderTickets.InsuranceCarrierID, 
       COUNT(OrderTickets.OrderTicketPayoutAmount) as NumberOfOrders, 
       SUM(OrderTickets.OrderTicketPayoutAmount) as TotalRevenue, 
       InsuranceCarriers.InsuranceCarrier 
  FROM OrderTickets
  LEFT JOIN InsuranceCarriers 
          ON OrderTickets.InsuranceCarrierID = InsuranceCarriers.InsuranceCarrierID 
 GROUP BY OrderTickets.InsuranceCarrierID
 ORDER BY TotalRevenue DESC 
```

我尝试了一些更改，但没有成功，我没有发布它，因为它不起作用，但如果有人想看到我的尝试，我会很乐意发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:45:49.453

`AVG()`像这样使用：

```
SELECT OrderTickets.InsuranceCarrierID, 
       COUNT(OrderTickets.OrderTicketPayoutAmount) as NumberOfOrders, 
       SUM(OrderTickets.OrderTicketPayoutAmount) as TotalRevenue, 
       AVG(OrderTickets.OrderTicketPayoutAmount) as AverageRevenue, 
       InsuranceCarriers.InsuranceCarrier 
  FROM OrderTickets
  LEFT JOIN InsuranceCarriers 
          ON OrderTickets.InsuranceCarrierID = InsuranceCarriers.InsuranceCarrierID 
 GROUP BY OrderTickets.InsuranceCarrierID
 ORDER BY AverageRevenue DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:40:15.187

使用临时表，您将能够轻松地做到这一点。

获取总收入、承运人和订单数量，并将其放入临时表中，然后在下一步进行计算

我认为这比尝试单个复杂查询更好！！！！

[http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm](http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm)

# asp.net-mvc - 从 jQuery 链接单击的 Razor 视图中调用类的静态方法并传递强类型视图包

> ID：15913513
> 
> 赞同：0
> 
> 时间：2013-04-09T22:12:05.693
> 
> 标签：asp.net-mvc, static-methods, void, viewbag, strongly-typed-view

我正在尝试将强类型 ViewBag 从 Controller 传递到 View，然后从 View 调用 jquery 链接单击上的静态方法，该方法使用 View bag 属性作为参数。

在控制器中，我有

```
public ActionResult LoginUser(string userName, string password)
{
    MyMembershipUser myUser = runtime.MyMembership.GetUser(userName);
    **ViewBag.MyUser = myUser;** //Here I assign user to ViewBag so I can pass it to                            
    return View("Login");        // View and from there as paramater to static method.

} 
```

在我的“登录”视图下面，我有在脚本中调用我的 SendEmail 静态方法的代码。

```
 <div id="login">
            <p>    
          <span class="link" id="link">Generate Email.</span><br />
            </p>
        </div>  

<script type="text/javascript">
    $('#link').click(function () {           
        @SendEmailClass.SendEmail(ViewBag.MyUser);// Here I pass User from ViewBag to       
                                                  // static Method
    });
</script> 
```

下面是我使用静态方法的静态类。

```
public static class SendEmailClass
 {
      public static void SendEmail(MyMembershipUser myUser)
      {
        SendEmail(myUser, string.Empty, string.Empty, string.Empty, string.Empty);
      }
} 
```

由于控件尝试从 View 调用静态方法。它失败，异常为“无法将类型 'void' 隐式转换为 'Object'”。

即使我尝试在方法调用中强制转换它，类似这样的东西也会`@SendEmailClass.SendEmail((MyMembershipUser)ViewBag.MyUser)`给出同样的错误。

我的操作方法返回类型有问题吗？我不想在这里返回任何东西。我只想发邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:29:39.510

您不能直接从 javascript 调用用 C# 编写的静态方法。

它抛出异常“无法将类型 'void' 隐式转换为 'Object'”，因为方法 SendEmail 返回“void”，并且当您使用 @ 后跟方法时，razor 期望打印一个对象。

您可以在控制器中创建另一个操作，在其中调用 SendMail 方法，在您的链接中，您可以使用 ajax 调用此操作并从 MyMembershipUser 对象传递您需要的参数。

要将 ajax 与 Jquery 一起使用，您可以开始阅读以下内容： http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# java - 有没有办法将 Java 7 安装到 USB 上并将其用于 Eclipse 中的项目？

> ID：15913515
> 
> 赞同：-6
> 
> 时间：2013-04-09T22:12:16.517
> 
> 标签：java, eclipse, usb, installation, java-7

我有一台电脑和一台笔记本电脑。因为我在两者上都进行了编码，所以我将我的 Eclipse 工作区放在了 USB 上。但是我的电脑有 Java 7 和 6，但我的笔记本电脑只有 Java 6。我也想在我的笔记本电脑上使用 Java 7。有没有办法把它放在USB上并指向它使用。我进行了研究，发现了一些关于将 JAR 添加到库中的信息，但是当我下载 Java 7 JDK 时，它位于一大堆文件夹中。我是做错了还是在谈论完全不同的事情。

正如一些人所提到的。它完全不是我的笔记本电脑。他从工作中得到的是我的爸爸。但是他不允许在上面安装任何东西。包括java 7。这让我很恼火，但这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:14:09.043

将java安装到eclipse目录（使用文件夹jre/jdk而不是jre7），eclipse会选择它（或者它在windows上为我做）。

或者编辑 eclipse.ini（有一个 -VM 参数来指定 java 所在的位置）。

另请查看[http://portableapps.com/node/929](http://portableapps.com/node/929)或[http://www.codeproject.com/Articles/417140/Eclipse-on-a-USB-flashdrive](http://www.codeproject.com/Articles/417140/Eclipse-on-a-USB-flashdrive)

* * *

由于对这种方法存在一些疑问。我使用的是Windows Eclipse版本（1.4.1.2），将jre7目录复制到eclipse下的jre。eclipse.ini 没有变化。

不幸的是，Java 安装在我正在使用的机器上，但是如果我查看 Eclipse 配置（**帮助 >> 关于 >> 配置**选项卡），Eclipse 说它正在使用 F 驱动器（USB）上的 jre。如果我重命名 jre，它会恢复为机器上的 java。

```
-vm
F:\eclipse\jre\bin\client\jvm.dll
eclipse.home.location=file:/F:/eclipse/
eclipse.launcher=F:\eclipse\eclipse.exe
eclipse.launcher.name=Eclipse
eclipse.p2.data.area=@config.dir/../p2/
eclipse.p2.profile=epp.package.java
eclipse.product=org.eclipse.epp.package.java.product
eclipse.startTime=1365550480114
eclipse.vm=F:\eclipse\jre\bin\client\jvm.dll
eclipse.vmargs=-Dosgi.requiredJavaVersion=1.5

   ......

sun.boot.class.path=F:\eclipse\jre\lib\resources.jar;F:\eclipse\jre\lib\rt.jar;F:\eclipse\jre\lib\sunrsasign.jar;F:\eclipse\jre\lib\jsse.jar;F:\eclipse\jre\lib\jce.jar;F:\eclipse\jre\lib\charsets.jar;F:\eclipse\jre\classes
sun.boot.library.path=F:\eclipse\jre\bin

   ......

java.endorsed.dirs=F:\eclipse\jre\lib\endorsed
java.ext.dirs=F:\eclipse\jre\lib\ext;C:\Windows\Sun\Java\lib\ext
java.home=F:\eclipse\jre
java.io.tmpdir=C:\Users\mum\AppData\Local\Temp\
java.library.path=F:\eclipse;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;F:/eclipse/jre/bin/client;F:/eclipse/jre/bin;F:/eclipse/jre/lib/i386;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Dell\DW WLAN Card;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;C:\Program Files (x86)\Roxio\OEM\AudioCore\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Bruce\jEdit;C:\Program Files (x86)\QuickTime\QTSystem\;c:\Regina;C:\Program Files\TortoiseSVN\bin;;F:\eclipse;;. 
```

重命名 jre 目录后，我得到

```
-vm
C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll
eclipse.home.location=file:/F:/eclipse/
eclipse.launcher=F:\eclipse\eclipse.exe
eclipse.launcher.name=Eclipse
eclipse.p2.data.area=@config.dir/../p2/
eclipse.p2.profile=epp.package.java
eclipse.product=org.eclipse.epp.package.java.product
eclipse.startTime=1365550310914
eclipse.vm=C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll
eclipse.vmargs=-Dosgi.requiredJavaVersion=1.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:19:39.253

我只想在您的~~台式~~笔记本电脑上安装 Java 7，但这里是在您的棒上安装和使用 Java 的分步说明： [http ://www.dreamincode.net/forums/topic/42544-putting-java-on -你的闪存驱动器/](http://www.dreamincode.net/forums/topic/42544-putting-java-on-your-flash-drive/)

# android - 自定义标题栏在较新版本的 Android 操作系统上导致异常

> ID：15913522
> 
> 赞同：2
> 
> 时间：2013-04-09T22:12:41.803
> 
> 标签：android, android-layout

我需要帮助。我已经到了那个我尝试了很多事情的地方，我要么：

A) 有学习障碍。B）我在做一些根本错误的事情。

我有一个应用程序，它有一个没有标题栏的主要活动和一堆带有自定义标题栏的其他活动。在 Android 2.3.3 上，一切正常。在最新版本的 Android (4.2) 上，我得到了这个：

`cannot combine custom titles with other title features`

我正在添加我的自定义标题栏，如下所示：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.activity_about_us);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    TextView title = (TextView) findViewById(R.id.title);
    title.setText(R.string.title_activity_about_us);
    title.setGravity(Gravity.CENTER);
    title.setTypeface(Typeface.SANS_SERIF, Typeface.BOLD);
} 
```

我正在禁用主屏幕上的标题栏，如下所示：

```
<style name="MainTableTheme" parent="AppBaseTheme">
    <item name="android:windowNoTitle">true</item>
</style> 
```

我调查了 ActionBarSherlock，但对于看起来如此简单的事情来说，这似乎有点矫枉过正。我还尝试了各种基于阅读 20 多篇 stackoverflow 帖子的“隐藏”栏的方法。最重要的是，它似乎完全不喜欢设置自定义标题栏。

我想做的就是有一个没有标题栏的主要活动和一些其他有标题栏的活动，其中设置了一些简单的东西，比如背景颜色和文本。我该怎么做才能让它在 2.3.3 及更高版本上运行？我对我拥有的所有东西都进行了核对 - 我只需要一些有用的东西。

帮我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:02:00.340

更改`<item name="android:windowNoTitle">true</item>`为`<item name="android:windowNoTitle">false</item>`（因为您确实需要标题栏）并确保`AppBaseTheme`继承自`.NoActionBar`-flavored`Holo`主题（例如，`Theme.Holo.NoActionBar`），至少在 API 级别 11+ 上。因此，例如，对于你的`onCreate()`和这个主题，它可以工作：

```
<style name="MainTableTheme" parent="android:Theme.Holo.NoActionBar">
    <item name="android:windowNoTitle">false</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:32:44.550

我永远无法弄清楚主要问题，所以我最终创建了一个自定义布局，然后将其包含在每个主要布局中。

自定义布局（window_title.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear_layout"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="35dip"
    android:gravity="center_horizontal"
    android:paddingLeft="5dip"
    android:background="#fab41e"
    android:layout_alignParentTop="true">

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:paddingRight="5dip"
        android:typeface="sans"
        android:textStyle="bold"
        style="@style/OverlayText"/>
</LinearLayout> 
```

我如何将它包含在每个`Activity`布局中而无需复制 XML：

```
<include  layout="@layout/window_title" /> 
```

这解决了整个运行时异常问题，我可以在每个`Activity`我认为合适的地方对其进行修改。

# python - 使用 mod_wsgi 在 Windows XAMPP 中设置 Python 路径

> ID：15913529
> 
> 赞同：1
> 
> 时间：2013-04-09T22:13:15.587
> 
> 标签：python, apache, xampp, mod-wsgi

我正在尝试将 Python2.6 与 XAMPP1.7.3 结合使用。但是当我尝试运行我的 Apache 服务器时，它不会启动。我去了我的日志文件，它告诉我：

“ httpd.exe：C:/xampp/apache/conf/httpd.conf 的第 133 行的语法错误：无法将 C:/xampp/apache/modules/mod_wsgi.so 加载到服务器中：找不到指定的模块。”

看起来 Apache 找不到 mod_wsgi.so 文件。

我的电脑（Windows7 64 位）上安装了 XAMPP1.7.3（32 位）和 Python2.6（32 位）版本。我已经检查过我是否可以使用这个版本，通常它不应该有问题。

这是我做的事情：

1.  我下载并安装了XAMPP1.7.3（32位版本）

2.  我下载并安装了Python2.6（32位版本）

3.  我在 XAMPP 上测试了 apache 服务器并且它工作正常，之后我关闭了 XAMPP 并重新启动了我的计算机。

4.  我下载了专门针对Apache2.2和Python2.6组合的mod_wsgi文件

5.  我把 mod_wsgi 文件放在 C:\Xamp\Apache\modules

6.  我将以下行添加到 C:\xampp\apache\conf\httpd.conf

    *   LoadModule wsgi_module 模块/mod_wsgi.so
7.  我试图启动 Apache 但它失败了......

欢迎所有建议！

下载路径 mod_wsgi：[https ://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2](https://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:59:52.573

仔细检查目录 C:/xampp/apache/modules 中是否存在 mod_wsgi.so 并且没有隐藏的额外扩展。如果没问题，那么该错误可能意味着您缺少 mod_wsgi 所需的 DLL。

对于 DLL，您需要确保为所有用户安装了 Python，而不仅仅是您安装它的用户。在最坏的情况下，您可能会缺少用于构建 mod_wsgi 的编译器版本的编译器 SDK 库。

# excel - 在 Excel 中分配供应以匹配需求

> ID：15913533
> 
> 赞同：1
> 
> 时间：2013-04-09T22:13:31.120
> 
> 标签：excel, optimization, excel-2007, modeling, capacity-planning

这是我一直在研究的一个逻辑难题，我很想知道 SO 社区提出了什么样的解决方案。我有 24 个随机生成的需求值，一天中的每个小时一个。我有 15 名员工，每个人必须轮班工作 8 小时，但可以在一天中的任何时间开始工作。我正在寻找能够最小化 24 小时内供需总差异的公式。结果可能类似于下表，假设该公式为员工的最佳八小时班次中的每个小时分配一个“1”。

```
 Hour   Demand     Staff 1     Staff 2   ...  Staff 15    Total Staff   Difference
    0      4          1           1              0           4             0 
    1      3          1           1              0           4             0
    ...       
    23     6          0           0              1           5             1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:29:28.443

你可以试试遗传算法：

1.  为每个工作人员设置随机开始时间。
2.  通过随机选择工作人员并将他们的开始时间移动 1 小时来创建新的突变
3.  通过差异分数对每个突变进行评分并选择最佳的。

这可能会导致局部最小值，因此最好使用其他随机选择多次启动它。

您还需要定义差异分数。这可能是差异的总和/平均值，但也可能是最大差异。

# ember.js - emberjs 嵌套路由返回未定义的对象但对象已定义

> ID：15913542
> 
> 赞同：1
> 
> 时间：2013-04-09T22:14:19.763
> 
> 标签：ember.js, handlebars.js

**[我在这个jsfiddle](http://jsfiddle.net/EgNkM/)**中有如下所示的路由结构。当显示此问题下方显示的**应用程序模板并单击帖子链接时，它会引发错误：**

```
Uncaught Error: assertion failed: Cannot call get with 'id' on an undefined object. 
```

此错误是由“发布”资源引起的，当我将其更改为下面的代码时，一切都会运行

```
 this.resource('post', function(){}); 
```

但我希望它采用如下所示的形式，它会抛出错误，未定义的对象：

```
 this.resource('post', {path: 'posts/:post_id/'}, function(){}) 
```

**这是整个路由器和[jsfiddle](http://jsfiddle.net/EgNkM/)**

```
EmBlog.Router.map(function() {
  this.resource("posts", {path: '/posts'}, function(){
    this.route('new');
    this.route('edit', {path: '/:post_id/edit'});

    this.resource('post', {path: 'posts/:post_id/'}, function(){
      this.resource('comments', {path:  '/comments'}, function(){
         this.route('new');
         this.route('edit', {path: ':post_id/comment/:comment_id'});
         this.route('comment', {path: ':post_id/comment'});
      });
    });

  });
}); 
```

**在我运行 EmBlog.Router.router.recognizer.names 的控制台中**

```
 Object {post.index: Object, posts.new: Object, posts.edit: Object, comments.new: Object, comments.edit: Object, comments.comment: Object…} 
```

**这是车把模板**

```
 <script type="text/x-handlebars" data-template-name="application">
  <h1>Hello from Application template</h1>
  <p>{{#linkTo posts.index}}Posts{{/linkTo}}</p>
  {{outlet}}
 </script>

 <script type="text/x-handlebars" data-template-name="posts">
  <h1>Hello from posts template</h1>
  <p>{{#linkTo post.index}} MyPost{{/linkTo}}</p>
  {{outlet}}
 </script>

 <script type="text/x-handlebars" data-template-name="post">
  <h1> Hello from a single post template</h1>
   <p>{{#linkTo comments.index}}  comments{{/linkTo}}</p>
  {{outlet}}
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:15:32.257

`post`您在资源上定义了一个动态段。这意味着如果要链接到它，则需要将`post`模型与它一起传递。

例子：

```
{{#each postRecord in model}}
  {{#linkTo "post.index" postRecord}}{{postRecord.title}}{{/linkTo}}
{{/each}} 
```

这是[更新的小提琴](http://jsfiddle.net/teddyzeenny/EgNkM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:30:06.310

除了 Teddy Zeeny 所说的，我还将路由器更改为

```
EmBlog.Router.map(function() {
  this.resource("posts", {path: '/posts'}, function(){
    this.route('new');

    this.resource('post', {path: '/:post_id'}, function(){
      this.route('edit', {path: '/edit'});
      this.resource('comments', {path:  '/comments'}, function(){
        this.route('new');
        this.resource('comment', {path: '/:comment_id'}, function() {
          this.route('edit', {path: '/edit'});
        });
      });
    });
  });
}); 
```

或者至少

```
EmBlog.Router.map(function() {
  this.resource("posts", {path: '/posts'}, function(){
    this.route('new');

    this.resource('post', {path: '/:post_id'}, function(){
      this.route('edit', {path: '/edit'});
      this.resource('comments', {path:  '/comments'}, function(){
        this.route('new');
        this.route('edit', {path: ':post_id/comment/:comment_id'});
        this.route('comment', {path: ':post_id/comment'});
      });
    });
  });
}); 
```

收拾东西。

（很抱歉将其发布为答案，但代码示例太长了，无法发表评论。）

# ruby-on-rails - Ruby on Rails 中的表单输入 type="date"

> ID：15913545
> 
> 赞同：12
> 
> 时间：2013-04-09T22:14:31.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-4

我想为表单输入日期。我知道这只适用于某些浏览器：

```
<input type="date" name="birth_day"/> 
```

在 Ruby on Rails 中有一个方便的方法吗？[各种表单元素](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)的文档列出了许多其他输入类型，但我没有看到任何日期：

*   电子邮件字段
*   number_field
*   电话字段
*   range_field
*   搜索字段
*   电话字段
*   文本域

我知道 date_select，这不是我想要的。我想要上面的 HTML 输出。我正在使用 Ruby on Rails 3.2.13。`date_field`Ruby on Rails 4中可能有一个吗？或者另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T22:54:41.220

您可以查看助手提供的最新[文档。](http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-date_field)`date_field`这似乎是 Rails 4 的功能。

来自文档的示例：

```
date_field("user", "born_on")
# => <input id="user_born_on" name="user[born_on]" type="date" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-13T19:56:19.883

对于旧版本的 Rails，我相信您可以使用：

```
.text_field(type: 'date') 
```

# caching - 网络浏览器如何缓存网页？

> ID：15913548
> 
> 赞同：1
> 
> 时间：2013-04-09T22:14:55.983
> 
> 标签：caching, browser, webbrowser-control, webpage, browser-cache

**第一个问题**

网络浏览器会默认缓存我访问过的网页吗？

**第二个问题**

如果网络浏览器缓存我访问的所有网页，它们会逐渐消耗越来越多的空间（磁盘和内存）。网络浏览器使用的空间有限制吗？因此，当它们到达时，最旧的网页将被删除。

**第三个问题**

Web 浏览器如何知道缓存的网页是否已过期？它必须与服务器对话，对吧？它会发送一些时间戳来检查吗？

**第四题**

Web 浏览器是否缓存字节流（原始数据）或 DOM 和渲染树（已处理的数据结构）？

**第五题**

有些网页非常具有交互性，例如 Gmail。这种网页会不会对缓存造成问题？

# mysql - 如何从数据透视表创建多个表

> ID：15913552
> 
> 赞同：0
> 
> 时间：2013-04-09T22:15:05.150
> 
> 标签：mysql, sql, sql-server, ssis, pivot

我有一个如下生成的数据透视表，名称包含列名，文本包含它们的值，因此需要根据相似的值生成多个表

输入表

```
ID  Name    text    
1   Name,DOB    John,02/02/1980 
2   FirstName,SSN,City  Ray,987898789,Chicago   
3   Name,DOB    Mary,12/21/1990 
4   FirstName,SSN,City  Cary,987000789,Dallas   
5   PersonID,Code,Zip,Gender,Maritial   1234,A456,23456,M,single    
6   PersonID,Code,Zip,Gender,Maritial   1235,A457,23233,M,single    
7   PersonID,Code,Zip,Gender,Maritial   1236,A458,67675,M,Married 
```

所以输出表应该是这样的

输出表1

```
ID  Name    DOB 
1   john    02/02/1980  
3   Mary    02/02/1980 
```

输出表 2

```
ID  FirstName   SSN City
2   Ray 987898789   Chicago
4   Cary    987000789   Dallas 
```

输出表 3

```
ID  PersonID    Zip Gender  Marital 
5   1234    A456    23456   M   Single  
6   1235    A457    23233   M   Single  
7   1236    A458    67675   M   Married 
```

有人可以帮我解决这个问题。这可以在 Sqlserver 或 MySQL 或 SSIS 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:20:30.727

我的建议是首先规范您的`input`表格。在 SQL Server 中，您可以使用递归 CTE 将逗号分隔列表中的数据拆分为行。

CTE 将类似于以下内容：

```
;with cte (id, col, Name_list, value, text_list) as
(
  select id,
    cast(left(Name, charindex(',',Name+',')-1) as varchar(50)) col,
         stuff(Name, 1, charindex(',',Name+','), '') Name_list,
    cast(left(text, charindex(',',text+',')-1) as varchar(50)) value,
         stuff(text, 1, charindex(',',text+','), '') text_list
  from input
  union all
  select id,
    cast(left(Name_list, charindex(',',Name_list+',')-1) as varchar(50)) col,
    stuff(Name_list, 1, charindex(',',Name_list+','), '') Name_list,
    cast(left(text_list, charindex(',',text_list+',')-1) as varchar(50)) value,
         stuff(text_list, 1, charindex(',',text_list+','), '') text_list
  from cte
  where Name_list > ''
    or text_list > ''
) 
select id, col, value
from cte; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/87f6f/25)。这将为您提供以下格式的数据：

```
| ID |       COL |      VALUE |
-------------------------------
|  1 |      Name |       John |
|  2 | FirstName |        Ray |
|  3 |      Name |       Mary |
|  4 | FirstName |       Cary |
|  5 |  PersonID |       1234 | 
```

一旦数据采用该格式，您就可以根据每个表中所需的列来透视数据。

例如，如果您想要数据，`Table1`您将使用：

```
;with cte (id, col, Name_list, value, text_list) as
(
  select id,
    cast(left(Name, charindex(',',Name+',')-1) as varchar(50)) col,
         stuff(Name, 1, charindex(',',Name+','), '') Name_list,
    cast(left(text, charindex(',',text+',')-1) as varchar(50)) value,
         stuff(text, 1, charindex(',',text+','), '') text_list
  from input
  union all
  select id,
    cast(left(Name_list, charindex(',',Name_list+',')-1) as varchar(50)) col,
    stuff(Name_list, 1, charindex(',',Name_list+','), '') Name_list,
    cast(left(text_list, charindex(',',text_list+',')-1) as varchar(50)) value,
         stuff(text_list, 1, charindex(',',text_list+','), '') text_list
  from cte
  where Name_list > ''
    or text_list > ''
) 
select *
-- into table1
from
(
  select id, col, value
  from cte
  where col in ('Name', 'DOB')
) d
pivot
(
  max(value)
  for col in (Name, DOB)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/87f6f/26)

然后，您将使用下一个表的值替换每个查询中的列名。

# c++ - std::array 和 lambda

> ID：15913557
> 
> 赞同：2
> 
> 时间：2013-04-09T22:15:36.193
> 
> 标签：c++, templates, c++11, lambda

```
#include <array>
#include <functional>

template<typename T, typename ... Args>
auto make_array(T&& t, Args&& ... args) -> std::array<T, sizeof...(Args)+1> {
    return {std::forward<T>(t), std::forward<Args>(args)...};
}

int main() {
    auto f = [](int i)->int { return i; };
    auto f2 = [](int i)->int { return i*2; };

    auto arr2 = make_array<std::function<int(int)>>(f, f2);

    return 0;
} 
```

有没有办法不在呼叫站点指定模板类型`make_array<std::function<int(int)>>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:24:34.403

可以推导出参数类型。使用[ecatmur](https://stackoverflow.com/users/567292/ecatmur)[这个巧妙的解决方案](https://stackoverflow.com/a/12283159/1932150)，您可以自动生成正确的对象：`std::function<>`

```
template<typename T, typename ... Args>
auto make_array(T&& t, Args&& ... args) -> 
    std::array<make_function_type<T>, sizeof...(Args)+1>
//             ^^^^^^^^^^^^^^^^^^^^^
{
    return {std::forward<T>(t), std::forward<Args>(args)...};
}

#include <iostream>

int main() 
{
    auto f = [](int i)->int { return i; };
    auto f2 = [](int i)->int { return i*2; };

    auto arr2 = make_array(f, f2);
    std::cout << arr2[1](21); // Prints 42

    return 0;
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/14AM9l$6)。

# php - 为什么这个 ajax 在 Facebook 登录期间不运行？

> ID：15913559
> 
> 赞同：0
> 
> 时间：2013-04-09T22:15:50.973
> 
> 标签：php, ajax, facebook, facebook-login

我在我的网站上运行一个特殊的 facebook 登录，当用户点击它时，必须发生以下情况：

*   连接FB
*   如果 facebook ID 已在用户数据库中识别，请执行 XXX
*   如果 facebook ID 无法识别，请执行 YYY

出于某种原因，我无法获得检查 facebook ID 以正常工作的 ajax 查询。我已经在这上面花了几个小时，但仍然没有运气（开始感觉像是一个真正的timesink）......即使我将查询设置为只返回0（例如，将第二个回声也更改为'echo 0'） ，它没有（除非我将整个函数剥离到字面上只是'echo 0'）。关于为什么会发生这种情况的任何想法？下面的代码：

函数中调用的 ajax 查询（输入 var fbid）：

```
<?php
    // configuration
    require("../html/includes/config.php"); 

    // connect to server
    $connect = mysql_connect(SERVER, USERNAME, PASSWORD);

    $fbid = $_POST["fbid"];

    $fbidcheck = query('SELECT * FROM usertable WHERE fbid = ?', $_POST["fbid"]);
    if (isset($fbidcheck[0]["fbid"]))
        echo 0;
    else
        echo 1;
?> 
```

当有人点击登录按钮时调用的 JS 函数：

```
// FB login function
function fblogin() {
    FB.login(function(response) {
        if (response.authResponse) {

            // Here, I want to test if the facebook ID is already in the table

            var fbid = response.authResponse.userID;
            $.post("check_fbid.php", {'fbid': fbid}, function(result)
            {    
               if(result == 0)
               {
                    // login in the user
                    // use fbid to call session, etc. for login
                    location.reload();
                    return true;
               }
               else
               {
                    // open new box on page to let user register
                    openRegisterBox();
                    return false;
               }
           });
        } else {
            // Login was cancelled or failed
            return false;
        }
    }, {scope: 'email'});
} 
```

同样，我已经将问题归结为 ajax 查询没有正常运行（我什至尝试重新创建它几次）。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:37:26.603

我用你的代码实现了它，它工作得很好。
这是 PHP 代码的所有期望：

```
 <html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript">
            function fblogin() {
                FB.login(function(response) {
                    if (response.authResponse) {
                        var fbid = response.authResponse.userID;
                        $.post("http://johnhiott.com/play/fbid.php", {'fbid': fbid}, function(result){    
                            if(result == 0){
                                alert("in");
                                return true;
                            }else{
                                alert("no");
                                return false;
                            }
                        });
                    }else {
                        return false;
                    }
                }, {scope: 'email'});
            }
        </script>
    </head>

    <body>
    <div id="fb-root"></div>
    <script>
      // Additional JS functions here
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '284563394889810', // App ID
          channelUrl : '//WWW.JOHNHIOTT.COM/play/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional init code here

      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script>

    </body>

    <a href="#" onClick="fblogin()">hi</a>
    </script>
    </html> 
```

# qbxml - QBXML 销售收据解析错误

> ID：15913560
> 
> 赞同：-1
> 
> 时间：2013-04-09T22:16:08.100
> 
> 标签：qbxml

我正在尝试通过“SDK Test Plus 3”提交以下 QBXML 销售收据，但出现错误。

“-2147220480 QuickBooks 在解析提供的 XML 文本流时发现错误。”

* * *

```
<?xml version="1.0" encoding="utf-8"?> 
<?qbxml version="7.0"?> 
<QBXML> 
   <QBXMLMsgsRq onError="stopOnError"> 
      <SalesReceiptAddRq requestID="0"> 
         <SalesReceiptAdd> 
            <CustomerRef> 
               <FullName>Test-Sales</FullName> 
            </CustomerRef>
        <ClassRef>
        <FullName>FUpscale</FullName> 
        </ClassRef>
            <TxnDate>2013-04-09</TxnDate> 
            <RefNumber>12</RefNumber> 
            <BillAddress> 
               <Addr1>amazon</Addr1> 
               <Addr2></Addr2> 
               <City></City> 
               <PostalCode></PostalCode> 
               <Country></Country> 
            </BillAddress> 
            <PaymentMethodRef> 
               <FullName></FullName>          
            </PaymentMethodRef> 
            <Memo>Test</Memo> 
            <IsToBePrinted>false</IsToBePrinted> 
            <SalesReceiptLineAdd> 
               <ItemRef> 
                  <FullName>AFANG-BK</FullName>          
               </ItemRef>
    <InventorySiteRef>
               <FullName>Roosevelt</FullName>
          </InventorySiteRef>
               <Quantity>1</Quantity> 
               <Rate>1.00</Rate> 
            </SalesReceiptLineAdd> 
         </SalesReceiptAdd> 
      </SalesReceiptAddRq> 
   </QBXMLMsgsRq> 
</QBXML> 
```

* * *

Win XP QB 企业版 13.0 R5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:54:00.443

刚刚找到将QBXML版本升级到12.0的解决方案

# ruby-on-rails - 应用程序控制器中的 before_filter 是否在 Rails 控制器中的任何代码之前执行？

> ID：15913561
> 
> 赞同：-1
> 
> 时间：2013-04-09T22:16:09.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我们`before_filter` `check_access_right`的`application controller`. 我们的理解是，`before_filter check_access_right`在调用for a`application controller`时应该先执行in 。这似乎是我们在 rails 3.2.12 应用程序中观察到的行为。`action``controller`

我们只是有点太好奇了，然后连接了调试（`rubymine 4.5`）。我们在调试中发现的是在启动应用程序时执行了`before_filter check_access_right`in 。`application controller`但是，当调用诸如 new 之类的操作时，调试将直接转到`action`控制器中的代码，而无需执行`before_filter check_access_right`. `before_filter`in是否仍然在for every`application controller`中的任何代码之前执行？`controller``action`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:55:40.890

我想这可以给你一些关于它是如何完成的线索。

[如何在 rspec 控制器测试期间记录 rails 控制器过滤器](https://stackoverflow.com/questions/4951902/how-to-log-rails-controller-filters-during-rspec-controller-tests/5660475#5660475)

这是关于跟踪和记录 before_filter 将调用您的调试

# python - Python 继承仅在 init 中工作

> ID：15913562
> 
> 赞同：0
> 
> 时间：2013-04-09T22:16:12.347
> 
> 标签：python, inheritance, maya

我最近发布了一个关于继承的问题，但它从来没有得到正确的答案，所以我再试一次。

我在这里有这段代码：

```
import maya.cmds as cmds
import jtAutoRigUI

class RigLegs(jtAutoRigUI.RigUI):
    def __init__(self, *args):
        jtAutoRigUI.RigUI.__init__(self)
        self.rigLegs()

    def rigLegs(self):
        self.items["side"] = "left"
        self.lIK = cmds.duplicate(self.lJoints["hip"], n = self.getName("hip_IK"))
        self.lIK = cmds.listRelatives(self.lIK, ad = True, type = "joint")
        for i in self.lIK:
            newName = i.replace("_JNT", "_IK")
            cmds.rename(i, newName) 
```

这很有效，`self.items["side"] = "left"`因为它是在 init 方法中声明的。但是在 init 方法之外声明的任何东西都不会被继承接收。因此，当它到达 self.lJoints["hip"] 时，它会出错。

```
class RigUI(object):
    def __init__(self):
        self.widgets = {}
        self.items = {}
        self.items["side"] = "center"
        self.interface() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:19:18.677

您开始的错误显然是`AttributeError`这一`lJoints`行中的一个：

```
self.lIK = cmds.duplicate(self.lJoints["hip"], n = self.getName("hip_IK")) 
```

让我们忘记您所做的任何模糊描述的更改导致的任何后续错误并解决此问题。

该错误告诉您`self`没有名为 的属性`lJoints`，但您正在尝试以`self.lJoints`某种方式进行修改。（特别是，您正在调用它的`__getitem__`方法，但这在这里并不重要。）

既然您已经向我们展示了足够多的代码来了解它是如何初始化的，那么原因就很清楚了：`self.lJoints`在调用此函数之前您从未进行过初始化。

让我们追溯一下：

首先，`RigJoint.__init__()`这样做：

```
jtAutoRigUI.RigUI.__init__(self) 
```

现在，`RigUI.__init__()`这样做：

```
self.widgets = {}
self.items = {}
self.items["side"] = "center"
self.interface() 
```

除非该`interface`方法设置`lJoints`，否则此时仍未设置。

因此，该函数返回，我们回到`RigJoint.__init__()`，它执行以下操作：

```
self.rigLegs() 
```

所以，现在我们进入`RigJoint.rigLegs()`：

```
self.items["side"] = "left" 
```

那不成立`self.lJoints`。

```
self.lIK = cmds.duplicate(self.lJoints["hip"], n = self.getName("hip_IK")) 
```

并且尝试使用`self.lJoints`不存在的 。因此`AttributeError`.

* * *

如果您不明白为什么会出现错误，请尝试将其分解为单独的行（调试时总是一个很好的步骤）：

```
lJoints = self.lJoints
hip = self.lJoints["hip"]
name = self.getName("hip_IK")
dup = cmds.duplicate(hip, name)
self.lIK = dup 
```

现在您可以看到哪个语句得到了异常，并且是第一个，这应该比原来的复杂语句更容易调试。

# java - Java中的数学表达式“通用”

> ID：15913563
> 
> 赞同：0
> 
> 时间：2013-04-09T22:16:14.460
> 
> 标签：java, math, expression

好吧，我在字符串中有一个数学表达式

```
String myExpression = "2-3*(cos(x)+sen(x)-exp(-x))*(sen(2x)+1/(cos(x)))"; 
```

我想知道如何获取表达式（在字符串中）：

```
2-3*cos(x)*sen(2x)-3*cos(x)/cos(x)-3*sen(x)*sen(2x)-3*sen(x)/cos(x)+3*exp(-x)*sen(2x)+3*exp(-x)/cos(x) 
```

即，应用分配属性，但没有计算值。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:41:59.333

如果您希望将数学表达式转换为另一种形式，我建议先将其更改为[**后缀/前缀表达式**](http://www.cs.man.ac.uk/~pjj/cs2121/fix.html)（< 链接还告诉您如何转换回“中缀”），然后尝试使用它（您可以对待您的函数（例如`sin(x)`）作为常量）。希望你可以自己做，有很多资源可以找到参考。

[链接到一个简单的中缀/后缀计算器](http://scriptasylum.com/tutorials/infix_postfix/infix_postfix.html) ，如果您以前没有尝试过，可以尝试一下。

接下来，您转换回中缀，但这次分配乘法和除法

例如。

```
 *
  / \
 A   +
    / \
   B   /
      / \
     C   D

Infix: A*(B+C/D)
Postfix: ABCD/+*

ABCD/+*
C and D division first (distribute)                >>> C/D
B and C/D addition(addition,nothing to distribute) >>> B+C/D
A and B + C/D multiplication (distribute)          >>> A*B+A*C/D 
```

所以，一般来说，你除了连接加法和减法字符串之外什么都不做。
但：

1.  当您乘以时，您在每个或之后`A` 添加一个`"A*"` 字符串`'+'``'-'`

2.  当您除以`B` 之后，您将一个`"/B"` 字符串添加到最后并且在每个`'+'`or之前`'-'`。

我相信这应该涵盖所有简单的表达方式。当表达式广泛扩展时，您可能（或可能不需要）需要更多的情况，还没有完全考虑清楚。我会很感激反馈。

# templates - 从通过 ui:include 包含的页面触发 bean 方法

> ID：15913565
> 
> 赞同：0
> 
> 时间：2013-04-09T22:16:33.770
> 
> 标签：templates, jsf, facelets

我想用 JSF 发送电子邮件。我创建了成功发送电子邮件的页面，但是当我从主菜单动态调用此页面时，它出现在我的页面中心，但有些框没有出现，最糟糕的是：Bean 根本不起作用。所以我的问题是我应该如何正确地包含这个页面，以便仍然使用 Beans 的所有功能，或者如何从这个页面调用 bean。注意：它有效，只是在主页内时停止。

因为我也有直接调用我的 Bean 的方法 sendMail2() 的问题，目前我调用了属性的 setter（因为它有效），并且在这个 setter 方法中我调用了 sendMail2()。

页：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">

    <h:body>
        <h3>JSF 2.0 + Ajax Hello World Example</h3>

        <h:form>

            <h:inputText id="namez" value="#{mySendBean.name}"></h:inputText>
            <h:commandButton value="Welcome Me">
                 <f:ajax execute="namez" render="outputz" />
            </h:commandButton>

            <h2><h:outputText id="outputz" value="#{helloBean2.sayWelcome}" /></h2>

        </h:form>

    </h:body>
</html> 
```

豆：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.mail.*;
import org.apache.commons.mail.DefaultAuthenticator;
import org.apache.commons.mail.Email;
import org.apache.commons.mail.EmailException;
import org.apache.commons.mail.SimpleEmail;

/**
 *
 * @author root
 */
@ManagedBean
@SessionScoped
public class mySendBean {

    private myEmailSend mE;
    /**
     * Creates a new instance of mySendBean
     */
    public mySendBean() {
        mE=new myEmailSend();
    }

    private static int j;

    /**
     * Get the value of j
     *
     * @return the value of j
     */
    public int getJ() {
        return j;
    }

    /**
     * Set the value of j
     *
     * @param j new value of j
     */
    public void setJ(int j) {
        this.j = j;
    }

        private String name="iop";

    /**
     * Get the value of name
     *
     * @return the value of name
     */
    public String getName() {
        return name;
    }

    /**
     * Set the value of name
     *
     * @param name new value of name
     */
    public void setName(String name) {
        this.name = name;
        sendMail2();
    }

    public String getSayWelcome(){
       //check if null?
       if("".equals(name) || name ==null){
        return "";
       }else{
        return "Ajax message : Welcome " + name;
       }
    }

    public void setSendMail(){
        sendMail2();
    }
    public void sendMail2(){

        Email email = new SimpleEmail();
        try {
            String authuser = "me@gmail.com";
            String authpwd = "pass";
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(authuser, authpwd));
            email.setDebug(true);
            email.setHostName("smtp.gmail.com");
            email.getMailSession().getProperties().put("mail.smtps.auth", "true");
            email.getMailSession().getProperties().put("mail.debug", "true");
            email.getMailSession().getProperties().put("mail.smtps.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.class",   "javax.net.ssl.SSLSocketFactory");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.fallback", "false");
            email.getMailSession().getProperties().put("mail.smtp.starttls.enable", "true");
            email.setFrom("me@gmail.com", "Agencja Ubezpieczeniowa");
            email.setSubject("TestMail");
            email.setMsg("This is a test mail 4");
            email.addTo("someone@gmail.com", "ToName");
            //email.setStartTLSRequired(false);
            email.send();
        } catch (EmailException e) {
            e.printStackTrace();
        }
    }
} 
```

以及我如何呈现菜单：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>

            </f:facet>
        </h:head>

        <h:body>
                <style type="text/css">
                @import url("myCss.css");
                </style>
            <p:layout fullPage="true">

                <p:layoutUnit styleClass="myLayoutStyleClass ui-layout-unit-content" position="north" size="200" resizable="true" closable="true" collapsible="true" border="0">
                    <h:form style="margin: 0; border:0" ><h1 style="color: white"><br>ubezpieczenia</br></h1></h:form>
                </p:layoutUnit>

                <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                    Zapraszamy do odwiedzania naszego biura!
                </p:layoutUnit>

                <p:layoutUnit style="background-color: white;color: white" position="west" size="175" header="Menu" collapsible="true">
                    <h:form style="background-color: white">
                    <p:menu style="background-color: white;border-width: 0" >
                            <f:ajax render=":content">
                            <p:menuitem value="O naszej agencji" action="#{helloBean.setName('/main_pages/onas.xhtml')}" update=":content" />
                            <p:menuitem value="Ubezpieczenia pojazdów" action="#{helloBean.setName('/main_pages/ubpoj.xhtml')}" update=":content" />
                            <p:menuitem value="Ubezpieczenia majątkowe" action="#{helloBean.setName('/main_pages/ubmaj.xhtml')}" update=":content" />
                            <p:menuitem value="Ubezpieczenia na życie" action="#{helloBean.setName('/main_pages/ubnaz.xhtml')}" update=":content" />
                            <p:menuitem value="Zapytaj" action="#{helloBean.setName('/main_pages/zapytaj.xhtml')}" update=":content" />
                            <p:menuitem value="Kontakt" action="#{helloBean.setName('/main_pages/kontakt.xhtml')}" update=":content" />
                            </f:ajax>
                    </p:menu>
                    </h:form>
                </p:layoutUnit>

                <p:layoutUnit position="center">

                    <br></br><br></br>
                    <p:panel id="content">
                                        <ui:include src="#{helloBean.name}" />
                    </p:panel>       

                </p:layoutUnit>

            </p:layout>

        </h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:34:21.493

正如 Luigi Mendoza 所说，解决方案是使用模板，`ui:insert`然后`ui:composition`. 这是我的工作解决方案：

子页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:body>
 <link type="text/css" rel="stylesheet" href="theme.css"/>
        <ui:composition template="index.xhtml">

            <ui:define name="centerContent">
                    <h:form>
                        <p:growl id="msg" showDetail="true" sticky="true" />
                        <p:panelGrid  styleClass="myPanel2" columnClasses="myColumnClasses" columns="2">

                        <p:column>
                           <p:row>
                                <ui:param name="mainTag" value="Z chęcią odpowiemy" />
                                <h2 align="left">Zapytaj</h2>
                                <h4 align="left">#{mainTag}</h4>

                                 <h:outputLabel styleClass="myTextArea">Twój email</h:outputLabel>
                            </p:row>
                            <p:row>
                                <p:inputText id="input1" title="Twój adres email" styleClass="myText" value="#{mySendBean.userMail}"/>
                                <p:watermark for="input1" value="Twój adres email" />
                                <p:inputTextarea id="input2" styleClass="myTextArea" title="Twoja wiadomość" autoResize="true" value="#{mySendBean.mailContent}" />
                                <p:watermark for="input2" value="Twoja wiadomość" />

                            </p:row>
                            </p:column>
                            <p:column styleClass="myColumnClasses">
                                <p:row>
                                    <div id="buttons" style="position: absolute !important; bottom: 50px !important; vertical-align: bottom !important;">
                                    <h:commandButton styleClass="mycommandButton" actionListener="#{mySendBean.sendMail2()}" value="Wyślij" update="msg">
                                    </h:commandButton>
                                    </div>
                                </p:row>
                         </p:column>

                        </p:panelGrid>
                    </h:form>
            </ui:define>

        </ui:composition>

    </h:body>

</html> 
```

主页，index.xhtml：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core">
<style type="text/css">
                @import url("myCss.css");
                </style>
                <style type="text/css">
                @import url("myCss2.css");
                </style>

        <h:head>
            <title>Dorota Gregor</title>
            <link type="text/css" rel="stylesheet" href="theme.css"/>
            <script src="http://maps.google.com/maps/api/js?sensor=false" 
              type="text/javascript"></script>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>

            </f:facet>
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit styleClass="myLayoutStyleClass1" position="north" size="170" resizable="true" closable="true" collapsible="true" >
                    <h:form style="margin: 0; border:0" ><h1 style="color: white">Dorota Gregor<br/><span class="mysection-title">ubezpieczenia</span><br></br></h1></h:form>
                </p:layoutUnit>

                <p:layoutUnit styleClass="myLayoutStyleClass2" position="south" size="50" closable="true" collapsible="true" >
                    <h:form style="margin: 0; border:0" ><span class="myfootter-title tab">Krosno Odrzańskie</span><span class="myfootter-title tab">Plac 11-ego Pułku</span><span class="myfootter-title tab">66-600 Krosno Odrzańskie</span><span class="myfootter-title tab">tel./fax 68 383 40 58</span><span class="myfootter-title tab">tel. 501 198 308</span><span class="myfootter-title tab">tel. 609 338 308</span>
                    </h:form>
                </p:layoutUnit>

                <p:layoutUnit style="background-color: white;color: white" position="west" size="190" header="Menu" collapsible="true">
                    <h:form style="background-color: white">
                    <p:menu style="background-color: white;border-width: 0" >

                            <p:menuitem value="O naszej agencji" action="onas.xhtml?faces-redirect=true" />
                            <p:menuitem value="Ubezpieczenia pojazdów" action="ubpoj.xhtml?faces-redirect=true" />
                            <p:menuitem value="Ubezpieczenia majątkowe" action="ubmaj.xhtml?faces-redirect=true"  />
                            <p:menuitem value="Ubezpieczenia na życie" action="ubnaz.xhtml?faces-redirect=true"  />
                            <p:menuitem value="Zapytaj" action="zapytaj.xhtml?faces-redirect=true" />
                            <p:menuitem value="Kontakt" action="kontakt.xhtml?faces-redirect=true" />

                    </p:menu>
                    </h:form>
                </p:layoutUnit>

                <p:layoutUnit position="center">

                    <br>
                    <div id="centerContent">
                        <img src="images/tablicakarnety/domek.png"/><br/>
        <ui:insert name="centerContent" >
                    <ui:param name="mainTag" value="" />
          <ui:include src="/template/commonContent.xhtml" />
        </ui:insert>

        </div>
                    </br><br></br>     

                </p:layoutUnit>
                <p:layoutUnit style="background-color: white;color: white" position="east" size="250" header="Są z nami" collapsible="true">
                    <h:form style="background-color: white">
                        <p:panelGrid styleClass="myPanel" columns="2">
                            <p:column>
                                <p:row><img src="images/tablicakarnety/warta_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/hestia_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/generali_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/concordia_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/liberty_40.png" /></p:row><br/>
                             </p:column>
                             <p:column>
                                <p:row><img src="images/tablicakarnety/inter_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/hdi_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/gothaer_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/mtu_40.png" /></p:row><br/>
                                    <p:row><img src="images/tablicakarnety/ptu_40.png" /></p:row><br/>
                            </p:column>
                        </p:panelGrid>

                    </h:form>

                </p:layoutUnit>

            </p:layout>

        </h:body> 
```

# ruby - 从正则表达式中转义匹配的结果

> ID：15913567
> 
> 赞同：1
> 
> 时间：2013-04-09T22:16:44.053
> 
> 标签：ruby, regex

在测试将嵌入式 soundcloud-track url 更改为 iframe 的方法时。转义结果时出现错误。

有人可以解释为什么在 CASE 2 中转义 +token+ 吗？**我可以按原样**使用结果并附**加到它**。

下面详细介绍这两种情况。

```
#ruby --version
# => ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.1] 
```

## 情况1

```
require 'cgi'

class String
  def embedda
    compiled = self
    compiled = soundcloud_replace(compiled)

    return compiled
  end

 private
  def soundcloud_replace(compiled)
    r = /(https?:\/\/(?:www.)?soundcloud.com\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*(?!\/sets(?:\/|$))(?:\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*){1,2}\/?)/i
    compiled.gsub!(r) { |match| soundcloud_player(match) }

    return compiled
  end

  def soundcloud_player(token)
    # return token # => +matched soundcloud url+ in pry
    # puts token   # => +matched soundcloud url+ in pry

    url_encoded_string = CGI::escape(token)

    # puts url_encoded_string # => +escaped matched soundcloud url+

    # "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{token}\"></iframe>"
    # => Correct interpolated string with non-encoded url

    "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{url_encoded_string}\"></iframe>"
    # => Correct interpolated string with encoded url
  end
end 
```

## 案例二

```
require 'cgi'

class String
  def embedda
    compiled = self
    compiled = soundcloud_replace(compiled)

    return compiled
  end

 private
  def soundcloud_replace(compiled)
    compiled.gsub!(/(https?:\/\/(?:www.)?soundcloud.com\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*(?!\/sets(?:\/|$))(?:\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*){1,2}\/?)/i, soundcloud_player("\\1"))

    return compiled
  end

  def soundcloud_player(token)
    # return token # => +matched soundcloud url+  in pry
    # puts token   # => /1                        in pry

    url_encoded_string = CGI::escape(token)

    # puts url_encoded_string = CGI::escape(token) # => %5C1  in pry

    # "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{token}\"></iframe>"
    # => Correct interpolated string with non-encoded url

    "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{url_encoded_string}\"></iframe>"
    # => Interpolated string with ...?url=%5C1
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:59:37.600

在第二种情况下，您在将“\1”提供给 gsub 之前对其进行转义。转义后“url_encoded_string”包含“%5C1”。由于“\1”不存在，因此不会插入任何内容。相反，内容将替换为“url_encoded_string”的内容。

尝试以下操作，看看案例 2 的区别：

```
url_encoded_string = token 
```

代替：

```
url_encoded_string = CGI::escape(token) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:54:44.627

用于显示问题的更简单版本：

**情况1：**

```
require 'cgi'

def soundcloud_player(token)
  url_encoded_string = CGI::escape(token)
  "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{url_encoded_string}\"></iframe>"
end

soundcloud_string = "https://soundcloud.com/theeconomist/money-talks-april-8th-2013"
r = /(https?:\/\/(?:www.)?soundcloud.com\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*(?!\/sets(?:\/|$))(?:\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*){1,2}\/?)/i
soundcloud_string.gsub!(r) { |match| soundcloud_player(match) }
puts soundcloud_string.inspect
# => Correct interpolated string with encoded url:
# "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Ftheeconomist%2Fmoney-talks-april-8th-2013\"></iframe>" 
```

**案例二：**

```
require 'cgi'

def soundcloud_player(token)
  url_encoded_string = CGI::escape(token)
  "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=#{url_encoded_string}\"></iframe>"
end

soundcloud_string = "https://soundcloud.com/theeconomist/money-talks-april-8th-2013"
soundcloud_string.gsub!(/(https?:\/\/(?:www.)?soundcloud.com\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*(?!\/sets(?:\/|$))(?:\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*){1,2}\/?)/i, soundcloud_player("\\1"))
puts soundcloud_string.inspect
# => Interpolated string with ...?url=%5C1:
# "<iframe width=\"100%\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=%5C1\"></iframe>" 
```

# vba - 当单元格失去焦点时，可以测试excel单元格文本的长度吗？

> ID：15913568
> 
> 赞同：3
> 
> 时间：2013-04-09T22:16:49.857
> 
> 标签：vba, excel

我正在研究一种解决方案，该解决方案将使用从标签读取信息的键盘仿真设备填充的数据填充 excel 单元格。读取数据后，键盘仿真设备将发送一个后缀字符（如 TAB 或 CR）以前进到不同的单元格

我正在尝试确定是否可以使用 VBA 来测试当单元格从 TAB/CR 失去焦点时填充的数据的长度。如果长度不正确，我希望可以选择删除前一个单元格的内容或显示一个消息框窗口，告诉用户有问题。

我真的不知道从哪里开始。

有任何想法吗？

编辑 - 这是对我有用的代码。

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim iLen As Integer

If Target.Cells.Count > 1 Then Exit Sub ' bail if more than one cell selected

iLen = Len(Target.Value)    ' get cell data length
If iLen = 0 Then Exit Sub   ' bail if empty data

If Target.Column = 1 Then ' if Col A
    If Target.Row = 1 Then Exit Sub ' bail if column header
    If iLen <> 3 Then 'Replace *Your Value* with your length
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False 'So we don't get an error while clearing
        Target.Offset(0, 0).Value = ""
        Target.Offset(0, 0).Select
        Application.EnableEvents = True ' So Excel while function normal again
    End If
ElseIf Target.Column = 2 Then ' if Col B
    If Target.Row = 1 Then Exit Sub ' bail if column header
    If iLen <> 7 Then
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False
        Target.Offset(0, 0).Value = ""
        Target.Offset(0, 0).Select
        Application.EnableEvents = True
    End If
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:39:44.057

使用`Worksheet_Change`事件

![查看代码](https://i.stack.imgur.com/qepYy.jpg)

![工作表](https://i.stack.imgur.com/yweOB.jpg)

![选择更改事件](https://i.stack.imgur.com/ceNbw.jpg)

![最终代码](https://i.stack.imgur.com/mZOIn.jpg)

使用的代码是：

```
If Target.Column = 1 Then
    If Len(Target.Value) <> 3 Then 'Replace *Your Value* with your length
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False 'So we don't get an error while clearing
        Target.Offset(-1, 0).Value = ""
        Target.Offset(-1, 0).Select
        Application.EnableEvents = True ' So Excel will function normal again
    End If
End If 
```

要测试不同列的不同长度，只需添加一个`else`例如

```
If Target.Column = 1 Then
    If Len(Target.Value) <> 3 Then 'Replace *Your Value* with your length
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False 'So we don't get an error while clearing
        Target.Offset(-1, 0).Value = ""
        Target.Offset(-1, 0).Select
        Application.EnableEvents = True ' So Excel will function normal again
    End If
Else If Target.Column = 2 then
    If Len(Target.Value) <> 7 Then 
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False 
        Target.Offset(-1, 0).Value = ""
        Target.Offset(-1, 0).Select
        Application.EnableEvents = True 
    End If

End If 
```

在您想测试更多列的事件中，更改周围的内容并将函数添加到您的程序中会很聪明，如下所示：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Select Case Target.Column

        Case 1 'If Target.Column = A
            Call TestValues(Target.Value, 3)
        Case 2 'If Target.Column = B
            Call TestValues(Target.Value, 7)
        Case 7 'If Target.Column = G
            Call TestValues(Target.Value, 1)

    End Select

End Sub

Function TestValues(CellValue As String, LengthLimit As Integer)

    If Len(CellValue) <> LengthLimit Then 'The value and length passed in from the Call Method
        MsgBox "You have entered an incorrect Value"
        Application.EnableEvents = False 'So we don't get an error while clearing
        Target.Offset(-1, 0).Value = ""
        Target.Offset(-1, 0).Select
        Application.EnableEvents = True ' So Excel will function normal again
    End If

End Function 
```

如果您要一次更改多个单元格，请使用以下命令：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim ChangedCell As Range
    For Each ChangedCell In Target.Cells
        Select Case ChangedCell.Column
            Case 1 'If Target.Column = A
                Call TestValues(ChangedCell, 3)
            Case 2 'If Target.Column = B
                Call TestValues(ChangedCell, 7)
            Case 7 'If Target.Column = G
                Call TestValues(ChangedCell, 1)
        End Select
    Next ChangedCell
End Sub
Function TestValues(curCell As Range, LengthLimit)
        If Len(curCell.Value) <> LengthLimit Then 'The value and length passed in from the Call Method
            MsgBox "You have entered an incorrect Value"
            Application.EnableEvents = False 'So we don't get an error while clearing
            curCell.Value = ""
            curCell.Select
            Application.EnableEvents = True ' So Excel will function normal again
        End If
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:25:23.390

下面的代码测试单元格中文本的长度是否不等于 8，如果是，它会向用户显示一个消息框。这是正在输入数据的工作表的 Worksheet_Change 事件。目标是刚刚编辑的范围：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Len(Target.Text) <> 8 Then MsgBox "Hey something's wrong!"
End Sub 
```

如果您想在同一张纸上进行其他数据输入时关闭此功能，我建议您在同一张纸上的某处使用一个单元格来告诉编码您处于“扫描仪模式”：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If [q1].value <> "" then 'if cell Q1 has any value in it, we are in "scanner mode"
        If Len(Target.Text) <> 8 Then MsgBox "Hey something's wrong!"
    End If
End Sub 
```

要测试不同的列：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If [q1].value <> "" then 'if cell Q1 has any value in it, we are in "scanner mode"
        If Target.Column = 1 then 'if column A do this:
            If Target.Row > 3 and Target.Row < 30 then 'between row 3 and 30
                If Len(Target.Text) <> 8 Then MsgBox "Hey something's wrong!"
            End If
        End If
        If Target.Column = 2 then 'if column B do this:
            If Target.Row > 5 and Target.Row < 50 then 'between row 5 and 50
                If Len(Target.Text) <> 10 Then MsgBox "Hey something's wrong!"
            End If
        End If
    End If
End Sub 
```

作为另一个增强功能，您可以询问用户是否要更正手动输入的内容：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim sNewValue As String
    If Target.Cells.Count <> 1 Then Exit Sub 'if more than 1 cell was changed
    If [q1].Value <> "" Then 'if cell Q1 has any value in it, we are in "scanner mode"
        If Target.Column = 1 Then 'if column A do this:
            If Target.Row > 3 And Target.Row < 30 Then 'between row 3 and 30
                If Len(Target.Text) <> 8 Then
                    sNewValue = InputBox("The scanned value seems invalid, " & _
                        "Press Ok to accept the value or enter different one.", _
                        "Verify Value", Target.Value)
                    Application.EnableEvents = False
                    Target.Value = sNewValue
                    Application.EnableEvents = True
                End If
            End If
        End If
        If Target.Column = 2 Then 'if column B do this:
            If Target.Row > 5 And Target.Row < 50 Then 'between row 5 and 50
                sNewValue = InputBox("The scanned value seems invalid, " & _
                        "Press Ok to accept the value or enter different one.", _
                        "Verify Value", Target.Value)
                    Application.EnableEvents = False
                    Target.Value = sNewValue
                    Application.EnableEvents = True
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:43:08.910

使用这样的东西可能会奏效。

```
Private PreviousSelection As Range

Private Sub Worksheet_SelectionChange(ByVal Target As Range)

If Not PreviousSelection Is Nothing Then
' you have a previous selection, do stuff to it here
End If

Set PreviousSelection = Target

End Sub 
```

如果您的键盘模拟器发送键的速度非常快，那么它可能会很困难！

如果您的模拟器即使在选项卡或 cr（多个单元格等）之后仍继续发送数据，那么您将无法让消息框显示错误，因为消息框将焦点从工作表上移开。

# java - 根据时间和数据库详细信息动态操作图像

> ID：15913575
> 
> 赞同：0
> 
> 时间：2013-04-09T22:17:46.573
> 
> 标签：java, php, image-manipulation

我有一个 JPEG 图像，它由包含各种房间的建筑物的一层组成。基于通过 PHP 从 SQL 数据库中检索到的数据以及当前时间，我希望操纵图像中的房间以根据一天中的时间以及房间当前是否在使用中来改变颜色（布尔值例如，从数据库中检查将用于实现此目的）。必须通过 PHP 访问数据库。这个平台将通过一个网站。

任何人都可以建议我可以使用哪些技术、库或其他方式来实现这一目标。我以前从未进行过诸如图像处理之类的任何事情，因此我正在寻求指导。我必须处理的第一个任务是以某种方式分隔图像上的每个房间。通过使用 Java 的解决方案将是首选。

任何建议表示赞赏，并在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:19:52.283

您正在寻找 PHP 的 GD 扩展。GD2 现在是标准的。

[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

我一直在使用这个库——有很多很好的功能。操纵愉快！

# php - php - 电子邮件表单

> ID：15913577
> 
> 赞同：1
> 
> 时间：2013-04-09T22:17:54.513
> 
> 标签：php, forms, email

艰难的一天，我确定我遗漏了一些明显的东西，但是有人可以浏览一下并解释为什么我收到一封空白的电子邮件吗？我已经尽可能地把它分解了，但似乎找不到它空白的原因

```
<?php
$to = 'blah@blah.com';
$name = $_POST['name'] ;
$subject = "Message from: $name";
$message = $_POST['comment'] ;
$robotest = $_REQUEST['robotest'];
$body = "From: $name \r\nMessage: $message";

/*
if (preg_match($match, $from) ||
preg_match($match, $subject) ||
preg_match($match, $body)) {
die("Header injection detected.");
}
*/

if ($sent == '0') {
mail($to, $subject, $body) or die("Error Bro!!!");
$sent = 1;
}

if ($robotest) {
$error = print("You are a gutless robot.");
}

 if ($name == ' '){
print("You have not entered a name, please go back and try again");
 } else {
$send = mail($to, $subject, $body);
print("Thank you for contacting us. We will be in touch with you very soon.");
 }
 ?> 
```

html:

```
 <form style="margin-left: 10%;" method="post" action="coming-soon/email.php" enctype="text/plain">
                <br>
                <input id="fName" name="name" type="text"  placeholder="Name (required)"><br><br>
                <p class="robotic" id="pot">
                    <label>If you're human leave this blank:</label>
                    <input name="robotest" type="text" id="robotest" class="robotest" />
                </p>
                <textarea id="fComment" name="comment" style="height: inherit; margin: 0 40% 1% 0;" rows="10" cols="50" placeholder="Place your Message here...."></textarea>
                <input type="submit" value="Send">
                <input type="reset" value="Reset">
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:32:16.827

删除它应该可以工作。看看这里[method="post" enctype="text/plain" 不兼容？](https://stackoverflow.com/questions/7628249/method-post-enctype-text-plain-are-not-compatible)

```
 enctype="text/plain" 
```

# mysql - R sqlSave 字符串变量循环问题

> ID：15913583
> 
> 赞同：2
> 
> 时间：2013-04-09T22:18:20.530
> 
> 标签：mysql, r, loops, rodbc

几年后，我刚刚回到 R 的领域，并且遇到了通过 sqlSave 循环传递变量的问题。我已经在 Win7 机器上启动了 RODBC 并使用 MySQL 顺利运行，但似乎无法让我的循环工作。这是我拥有的数据以及我想要完成的工作：

*   使用 pitchRX 库的 2012 年 MLB 逐场比赛数据保存为单个“值”，称为“mlb12”，具有多个表
*   “mlb12”里面有七张桌子（atbat、pitch、game、player、runner、umpire、coach）
*   我想创建一个循环，该循环将为 R 中的每个表创建一个数据框，这样我就可以使用 sqlSave 将它们通过一个循环将它们插入到我的 MySQL 数据库中
*   我已经将所有这些表插入到我的 MySQL 数据库中，但是我以“长”方式进行了操作（即声明每个 DF 并为每个插入创建一个 sqlSave 语句），并且希望在两个循环中执行它们以清理代码.
*   下面是我目前必须抓取这些数据并将其插入 MySQL 数据库的代码：

`library(RODBC)`

 ````
library(pitchRx)   

mlb12 <- scrapeFX(start = "2012-04-05", end = "2012-04-07",     
         tables=list(atbat=fields$atbat,pitch=fields$pitch,
         game=fields$game,player=fields$player,
         runner=fields$runner,umpire=fields$umpire,
         coach=fields$coach))

atbat <- mlb12$atbat
pitch <- mlb12$pitch
game <- mlb12$game
player <- mlb12$player
runner <- mlb12$runner
umpire<- mlb12$umpire
coach <- mlb12$coach

channel <- odbcConnect("db", uid = "cs", pwd = "pw")
sqlSave(channel,mlb12$atbat,tablename="atbat")
sqlSave(channel,mlb12$pitch,tablename="pitch")
sqlSave(channel,mlb12$game,tablename="game")
sqlSave(channel,mlb12$player,tablename="player")
sqlSave(channel,mlb12$runner,tablename="runner")
sqlSave(channel,mlb12$umpire,tablename="umpire")
sqlSave(channel,mlb12$coach,tablename="coach")
close(channel) 
````  `我尝试编写的用于设置数据帧和简化 sqlSave 语句的循环都未能正确执行。这是我尝试过的一个示例，我认为它会起作用：

```
i<-0
while (i<6) {
i<-i+1
a<-c("atbat","pitch","game","player","runner","umpire","coach")
b<-paste("mlb12$",a,sep="")
c[[i]]<-paste("test",i,sep="")
  } 
```

这个循环的问题是我不记得如何（或想出如何）使用 c[[i]] 增量字段来获取“b”值来为列表中的每个表创建数据框。我相当确定如果我能解决这个问题，我可以让一个循环为“sqlSave”部分工作。有没有办法用自动增量字段（或基于第二个列表的字段）做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:06:51.540

例如，您可以`lapply`像这样使用：

```
channel <- odbcConnect("db", uid = "cs", pwd = "pw")
a<-c("atbat","pitch","game","player","runner","umpire","coach")
lapply(a,function(x) 
     sqlSave(channel,mlb12[[x]],tablename=x)
close(channel) 
````

# batch-file - 如何批量移动句子中的空格

> ID：15913585
> 
> 赞同：0
> 
> 时间：2013-04-09T22:18:31.487
> 
> 标签：batch-file

这是我的问题。我做了一批，想从句子中移动单词之间的所有空格。我以一种方式做到了这一点。但我想将空间设置为变量，并在 set 命令中使用该变量。在检查了变量的定义，甚至对这个空间变量进行了很好的回响之后，我不能在最后一句中移动它。有人可以告诉我为什么吗？

```
@echo off

::why this doesnt work???

(set /p word2=i will make )<nul>textfile.txt

<nul (set/p word3=all strings be )>>textfile.txt

<nul (set/p word4=one longstring)>>textfile.txt

echo(

type textfile.txt

echo(

echo(

::seting space

set sp=a b

set sa=%sp:a=%

set space=%sa:b=%

if defined space (echo space is defined) else (echo space is not defined)

echo(

echo lets see:%space%%space%%space%something%space%something%space%%space%, ...works

echo(

set /p inputalltext=<textfile.txt

echo %inputalltext%...input from textfile

set noplaceforspace=%inputalltext: =% ...as you see as normal,no space

echo %noplaceforspace%

::so, problem starts here. why are here  places if space is defined and good echoing

::of space variable??

setlocal enabledelayedexpansion

set nogoodresult=%inputalltext:!space!=%

echo %nogoodresult%%space%%space% here i dont want space between words

echo(

pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:29:02.023

请看我的例子：

```
@echo off&setlocal
set "space= "
set "sentence=this is a long sentence with many words "

setlocal enabledelayedexpansion
set "sentence=!sentence:%space%=!"
echo "%sentence%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T21:22:24.880

如果你正在运行一个常规批次，只要你有“”围绕它，你应该能够做“句子”。系统应该进入一个空格

# spring-security - CAS登录后如何使用spring过滤器模拟用户

> ID：15913587
> 
> 赞同：0
> 
> 时间：2013-04-09T22:18:43.970
> 
> 标签：spring-security, cas

是否有一个弹簧过滤器对象允许我选择通过弹簧安全链传递哪个身份验证令牌。

我想检查 httpsession 并选择使用 CAS 过滤器生成的令牌还是我从 httpsession 生成的令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:57:18.167

请执行以下操作：

1) 覆盖 CasAuthenticationFilter

2）实现你自己的尝试认证方法（下）

3）配置你的过滤器

```
public Authentication attemptAuthentication(final HttpServletRequest request, final HttpServletResponse response)
       throws AuthenticationException, IOException {
    // Access to HTTP request
    if (it CAS authentication) {
        return  super.attemptAuthentication(request,response);
    } else {
        // provide username, password
       final UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password);
       authRequest.setDetails(authenticationDetailsSource.buildDetails(request));
       return this.getAuthenticationManager().authenticate(authRequest);
   }
} 
```

# eclipse - Eclipse：如何将所有子包构建在一个单独的包中

> ID：15913590
> 
> 赞同：0
> 
> 时间：2013-04-09T22:18:49.250
> 
> 标签：eclipse, package

在我的 Eclipse 项目资源管理器上，而不是获取这棵树：

```
-src
 -com.presentation.interfaces
 -com.presentation.schemas
 -com.presentation.generetedClasses 
```

我想像这样合并所有子包：

```
-src
 -com.presentation 
```

我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:20:48.040

eclipse中有包表示设置，您可以在其中选择嵌套或完整表示

[http://wiki.eclipse.org/Graphical_Eclipse_FAQs#How_do_I_alter_my_package_representation_so_that_parent_packages_are_housing_child_packages.3F](http://wiki.eclipse.org/Graphical_Eclipse_FAQs#How_do_I_alter_my_package_representation_so_that_parent_packages_are_housing_child_packages.3F)

# tsql - 为记录保留未插入的数据

> ID：15913592
> 
> 赞同：1
> 
> 时间：2013-04-09T22:19:03.237
> 
> 标签：tsql, c#-4.0, correlation, table-valued-parameters, output-clause

我正在试验表值参数 (TVP) 以及如何从 C# 代码中使用它们。TVP 的一个特定方面给我带来了麻烦：当将数据列表传递给存储过程并希望在数据从数据库返回后更新该列表时。

这是一个包含在列表中的示例类：

```
public class Phone
{
    int _phoneID;
    string _phoneNumber;
    Guid _correlationID;
} 
```

将此列表传递给使用 TVP 的存储过程时，我如何能够将 _phoneID 和 _phoneNumber 插入数据库，并在插入后根据 _correlationID 更新具有 _phoneID 的电话列表？

这是一个示例表、类型和存储过程：

```
Create Table PhoneTable
(
    PhoneID int identity(1,1),
    PhoneNumber varchar(20)
)
GO

Create Type PhoneType As Table
(
    PhoneNumber varchar(20),
    CorrelationID uniqueidentifier
)
GO

Create Procedure usp_Phone_Insert
    @Input PhoneType ReadOnly
AS
    Declare @Output Table (PhoneID int, PhoneNumber varchar(20))

    Insert Phone (PhoneNumber)
    Output
        inserted.PhoneID,
        inserted.PhoneNumber
    Into @Output
    Select 
        PhoneNumber
    From
        @Input

    Select PhoneID, PhoneNumber From @Output
GO 
```

关联 id 的原因是能够跟踪从应用程序到数据库并返回的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:34:24.043

根据我关于内部连接的问题下的评论，我找到了这个解决方案，它看起来工作得很好。只有当插入的数据在集合中是唯一的时，这种方法才有效。

修改表、类型和存储过程来满足我对相关 ID 的需求：

```
Create Table PhoneTable
(
    PhoneID int identity(1,1),
    PhoneNumber varchar(20)
)
GO

Create Type PhoneType As Table
(
    PhoneNumber varchar(20),
    CorrelationID bigint
)
GO

Create Procedure usp_Phone_Insert
    @Input PhoneType ReadOnly
AS
    Declare @Output Table (
        PhoneID int, 
        PhoneNumber varchar(20),
        CorrelationID bigint)

    Insert Phone (PhoneNumber)
    Output
        inserted.PhoneID,
        inserted.PhoneNumber
    Into @Output
    Select 
        PhoneNumber
    From
        @Input

    Select
        O.PhoneID,
        O.PhoneNumber,
        I.CorrelationID
    From
        @Output O
        Inner Join @Input I on I.PhoneNumber = O.PhoneNumber
GO 
```

# php - Drupal - 在提交之前验证表单/在发送之前加密密码

> ID：15913595
> 
> 赞同：0
> 
> 时间：2013-04-09T22:19:27.957
> 
> 标签：php, drupal, drupal-7, drupal-6, drupal-fapi

我想在 Drupal 中修改（加密）登录密码，然后再将其发送到服务器。我没有找到任何模块来做到这一点（提交前的验证），并且在将字段发送到服务器之前我找不到验证字段的方法。

有没有办法解决它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T06:32:37.147

这个模块将帮助你[加密](http://drupal.org/project/encrypt "加密")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T07:26:39.557

创建您的自定义模块并使用[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)添加新的自定义验证和提交回调：

```
function YOUR_MODULE_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "user_profile_form") {
        $form['#validate'][] = 'your_new_validation_callback';
        $form['#submit'][] = 'your_new_submission_callback';
    }
}

function your_new_validation_callback($form, &$form_state)
{
    // add your validation logic
}

function your_new_submission_callback($form, &$form_state)
{
    // add your submission logic
} 
```

希望这可以帮助。

# sql - 由于子查询，列定义不明确错误

> ID：15913597
> 
> 赞同：0
> 
> 时间：2013-04-09T22:19:29.017
> 
> 标签：sql, oracle, oracle10g, oracle11g

我是 SQL 的新手，并且在以下查询中遇到了困难。我正在尝试获取与我的角色 ID 相同的用户，但我不希望下面的查询返回我的姓名（因此我在 AND 条件中使用了 u.id<>0）。由于我是管理员用户，我有多个角色（R1、R2 和 R3）分配给我。我希望查询返回具有 ROLE R1 的所有其他用户。“列不明确定义..”错误是由于子查询而出现的。我的问题是——

1.  这个错误的解决方法是什么？
2.  如何拉取与我具有相同 role_id 的用户？谁能告诉我正确的查询？

提前致谢。

```
SELECT DISTINCT U.FIRST_NAME || ' ' || U.LAST_NAME AS USER_NAME,
    U.PHONE AS PHONE,
    U.EMAIL AS USER_EMAIL FROM USERS U
    INNER JOIN USR_ORG_DOM_ROLE_RELATIONS UODR ON U.ID=UODR.USER_ID
    INNER JOIN ROLES R ON R.ID=UODR.ROLE_ID
    WHERE
    U.DELETED='N'
    AND U.DISABLED='N'
    AND U.ID<>0
    AND R.ID=(SELECT ID FROM ROLES R 
    INNER JOIN USR_ORG_DOM_ROLE_RELATIONS UODR ON R.ID=UODR.ROLE_ID
    INNER JOIN USERS U ON U.ID=UODR.USER_ID
    WHERE U.ID=0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:28:33.380

`ID`在子查询中需要一个表别名...

此外，您不能在两个不同的表引用上使用相同的别名。即使它们是两个不同地方的同一张桌子。试试这个：

```
 Select Distinct u.FIRST_NAME || ' ' || u.LAST_NAME USER_NAME,
      u.PHONE, u.EMAIL USER_EMAIL 
 From Users u
    Join USR_ORG_DOM_ROLE_RELATIONS uodr
       On u.ID = uodr.USER_ID
    Join ROLES r 
       On r.ID = uodr.ROLE_ID
 Where u.DELETED='N'
    AND u.DISABLED='N'
    AND u.ID<>0
    AND r.ID = 
       (SELECT iR.ID FROM ROLES iR 
          JOIN USR_ORG_DOM_ROLE_RELATIONS iUODR 
             ON iR.ID=iUODR.ROLE_ID
          JOIN USERS iU 
             ON iU.ID=iUODR.USER_ID
        WHERE iU.ID=0); 
```

或者如果可以存在多个角色，（并且可以） UserId = 0

```
 Select Distinct u.FIRST_NAME || ' ' || u.LAST_NAME USER_NAME,
      u.PHONE, u.EMAIL USER_EMAIL 
 From Users u
    Join USR_ORG_DOM_ROLE_RELATIONS uodr
       On u.ID = uodr.USER_ID
    Join ROLES r 
       On r.ID = uodr.ROLE_ID
 Where u.DELETED='N'
    AND u.DISABLED='N'
    AND u.ID<>0
    AND r.ID In 
       (SELECT iR.ID FROM ROLES iR 
          JOIN USR_ORG_DOM_ROLE_RELATIONS iUODR 
             ON iR.ID=iUODR.ROLE_ID
          JOIN USERS iU 
             ON iU.ID=iUODR.USER_ID
        WHERE iU.ID=0); 
```

但我认为这与以下内容相同：

```
 Select Distinct u.FIRST_NAME || ' ' || u.LAST_NAME USER_NAME,
      u.PHONE, u.EMAIL USER_EMAIL 
 From Users u
    Join USR_ORG_DOM_ROLE_RELATIONS uodr
       On u.ID = uodr.USER_ID
    Join (Roles r Join USR_ORG_DOM_ROLE iuodr 
             On iuodr.Role_Id = r.Id
                And iuodr.UserId = 0)
        On r.ID = uodr.ROLE_ID
 Where u.DELETED='N'
    And u.DISABLED='N'
    And u.ID<>0 
```

# c# - 如何将 12 位图像加载到 System.Drawing.Bitmap 中？

> ID：15913605
> 
> 赞同：1
> 
> 时间：2013-04-09T22:20:13.477
> 
> 标签：c#, .net, bitmap, drawing, bit-manipulation

我有一个提供 12 位图像的服务器，我可以通过 http 访问图像，但由于它是 12 位图像，我无法加载到 System.Drawing.Bitmap(Stream 流)。

图片格式 PNG 位深 12

图像在这里是原始的 12 位之一![12 位图像](https://i.stack.imgur.com/cNTIV.png)

一旦您能够加载，这就是图像的外观。![在此处输入图像描述](https://i.stack.imgur.com/jI05e.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:48:36.120

您可以在使用 OpenCV 库时读取图像，因为它也支持 12 位。您可能还喜欢寻找适配器/包装器，以便在 c# 中使用它，因为它最初是一个 C++ 库

也看看那些帖子：

[OpenCV：处理 12 位灰度原始数据](https://stackoverflow.com/questions/11078748/opencv-working-with-12bit-gray-scale-raw-data)

[灰度图像的 BMP 格式是什么？](https://stackoverflow.com/questions/11086649/what-is-the-bmp-format-for-gray-scale-images)

[使用 OpenCV 将 12 位拜耳图像转换为 8 位 RGB](https://stackoverflow.com/questions/10403841/convert-12-bit-bayer-image-to-8-bit-rgb-using-opencv)

希望能帮助到你

# sql - 在 title.parameterize 中添加一个数字以通过唯一性验证

> ID：15913606
> 
> 赞同：1
> 
> 时间：2013-04-09T22:20:20.227
> 
> 标签：sql, ruby-on-rails-3, activerecord

我正在为`after_create`回调中的 Posts 创建一个 slug，如果 slug 已经存在，我不确定如何在末尾附加一个数字。

```
class Post < ActiveRecord::Base
  attr_accessible :body, :title, :slug
  after_create :create_slug
  validates_uniqueness_of :slug

  def create_slug
    existing = Post.where("slug LIKE ?", "#{title.parameterize}%").length
    existing > 0 ? slug = "#{title.parameterize}-#{existing+1}" : slug = title.parameterize
    self.update_attributes(slug: slug)
  end
end 
```

这不起作用，因为我的`where`子句匹配标题为“某些不同的标题”的帖子，例如。

一种解决方案是追加`post.id`而不是尝试枚举。如果帖子被删除，这也可能会更好。但我不希望删除任何帖子，而且不使用 ID 似乎更有意义。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:31:56.420

将

```
Post.where(title: title).count 
```

在你的情况下给你正确的号码？

对数据库中的 slug 列设置唯一约束也很重要，因为如果在相似时间创建具有相同标题的两个帖子，则此算法会受到竞争条件的影响。Rails 本身不能保证列的唯一性。

# android - 如何将文本视图显示的文本向左对齐？在 Eclipse 中的 android 应用程序中

> ID：15913609
> 
> 赞同：0
> 
> 时间：2013-04-09T22:20:46.900
> 
> 标签：android, eclipse, android-listview, android-xml, android-scrollview

我在滚动视图中有一个文本视图......在线性布局中：当我打开 avd 来测试应用程序时，我得到的文本的第一行向右对齐，段落的其余部分是正常的（开始从左起）。那是每一个段落。

这就是我所拥有的：

```
<LinearLayout>
<ScrollView
android:layout_width="match_parent"
android:layout_height="360dp"
android:addStatesFromChildren="true" >

    <TextView
        android:id="@+id/description_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="60dip"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:textColor="#000000" />

                  <!-- Description Label -->

</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:48:21.913

这不是关于代码..它是关于我在 xml 文件上的 TextView 上写文本的方式（在描述标记内）..它必须将文本一直写到左边（到第一列） .

# c# - Silverlight WCF 抛出远程服务器返回错误：NotFound

> ID：15913610
> 
> 赞同：4
> 
> 时间：2013-04-09T22:20:47.293
> 
> 标签：c#, .net, wcf, silverlight

我试图弄清楚为什么会这样。它超级奇怪

以下是我的确切电话。每当我在车辆数据合同的末尾添加那个额外的数据成员时，我都会得到远程服务器返回一个错误：NotFound。当调用 pick.SaveVehiclesAsync(infoKey, data);

## 从银光边

```
public void SaveVehicles(InfoKey infoKey, ObservableCollection<VehicleFullInfoModel> vehicleFullInfoCollection, EventHandler<SaveVehiclesEventArgs> callBack)
    {
        var pick = new **ProjectServiceClient**();
        pick.SaveVehiclesCompleted += (sender, e) =>
        {
            if (callBack != null)
                callBack(this, new SaveVehiclesEventArgs(e.Result, e.fault));
        };
        var data =
            new ObservableCollection<VehicleFullInfo>(vehicleFullInfoCollection.Select(rec => rec.Data).ToList());
        pick.SaveVehiclesAsync(infoKey, data);
    } 
```

------------- 来自 WCF 服务

```
public interface IProjectService
{
    [OperationContract]
    string SaveVehicles(InfoKey infoKey, IList<VehicleFullInfo> vehicleFullInfoCollection, out FaultContract fault);
}
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class ProjectService : IProjectService
{
    public string SaveVehicles(InfoKey infoKey, IList<VehicleFullInfo> vehicleFullInfoCollection, out FaultContract fault)
    {      
        return PickVehicles.SaveVehicles(infoKey, vehicleFullInfoCollection,  out fault);
    }
} 
```

--------- PickVehicles 类------

保存到文件

------------ 数据契约

```
[DataContract]
public class VehicleFullInfo
{
    [DataMember]
    public Vehicle Vehicle { get; private set; }
} 
```

------ 车辆数据合同

```
[DataContract]
public class Vehicle
{
    public Vehicle(Data vehicleData, int index)
    {

    }

    [DataMember]
    public string VehicleNumber { get; set; }

    [DataMember]
    public bool? IsVehicleFromPolicy { get; private set; }

    [DataMember]
    public bool? IsInclude { get; set; }

    [DataMember]
    public string VIN { get; set; }

    [DataMember]
    public VehicleTypeEnum Type { get; set; }

    [DataMember]
    public int? ModelYear { get; set; }

    [DataMember]
    public VehicleMake Make { get; set; }

    [DataMember]
    public string Model { get; set; }

    [DataMember]
    public bool? HasAntiTheft { get; set; }

    [DataMember]
    public AirBagTypeEnum AirBagType { get; set; }

    [DataMember]
    public int? GarageZip { get; set; }

    [DataMember]
    public VehicleUseTypeEnum VehicleUseType { get; set; }

    [DataMember]
    public int? Miles { get; set; }

    [DataMember]
    public int? TrailerValue { get; set; }

    [DataMember]
    public bool? IsMotorhomeSold { get; set; }

    [DataMember]
    public int? TrailerCamperLength { get; set; }

    [DataMember]
    public string TrailerDesc { get; set; }

    [DataMember]
    public int? TrailerGrossWeight { get; set; }

    [DataMember]
    public string ExtraField { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:36:20.543

`Not Found`是 Silverlight 上的一般错误，这可能意味着很多事情 - 跨域问题、来自网络的任何非 200 响应等。您可以做一些事情，例如在服务器端启用跟踪，或查看使用诸如 Fiddler 之类的工具来处理网络流量，这将为您提供有关错误的更多信息。

[http://blogs.msdn.com/b/silverlightws/archive/2008/04/16/debugging-web-service-usage-in-silverlight-2.aspx](http://blogs.msdn.com/b/silverlightws/archive/2008/04/16/debugging-web-service-usage-in-silverlight-2.aspx)上的帖子有一些在调试 WCF 调用时很有用的信息银光制作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:53:03.273

大多数情况下会发生此错误，只需右键单击每次在时钟附近运行应用程序时打开的 ASP.NET IIS 服务器图标并停止它。

然后再试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T22:36:49.023

尝试在服务器配置文件的端点设置绑定配置 - 示例：

```
 <endpoint
           address=""
           binding="pollingDuplexHttpBinding"
           bindingConfiguration="multipleMessagesPerPollPollingDuplexHttpBinding"
           contract="DuplexService.IDuplexService">
</endpoint> 
```

但当然，您必须配置相应的绑定 - 例如：

```
<bindings>
        <pollingDuplexHttpBinding>
          <binding name="multipleMessagesPerPollPollingDuplexHttpBinding"
                   duplexMode="MultipleMessagesPerPoll"
                   maxOutputDelay="00:00:07"/>
        </pollingDuplexHttpBinding>
</bindings> 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-30T15:00:44.000

[确保您的 wcf 已启用跟踪](http://devrecipeshb.blogspot.com/search/label/WCF)。这通常是导致我遇到问题的原因，这次也是如此。

# php - 什么是我的查询获得快速结果的好索引？

> ID：15913612
> 
> 赞同：4
> 
> 时间：2013-04-09T22:20:51.857
> 
> 标签：php, mysql, sql, query-optimization, query-performance

我有一个从许多表中提取的查询，但速度很慢，我想改进它。

```
SELECT 
    ph.phone_call_id AS id,
    ph.call_subject AS callSubject,
    ac.account_name AS accountName,
    ph.trigger_on AS triggerOn,
    ph.isAppointment,
    ph.status,
    ind.name AS industry,
    cc.call_code_name AS callCode,
    ac.account_id FROM phone_calls AS ph
INNER JOIN accounts AS ac ON ph.account_id = ac.account_id
INNER JOIN industries AS ind ON ind.industry_id = ac.industry_id
INNER JOIN call_codes AS cc ON ph.call_code_id = cc.call_code_id
WHERE 
    ac.status = 1 AND 
    ph.status = 1 AND 
    ph.owner_id = 1 AND 
    ac.do_not_call = 0 AND 
    ph.trigger_on BETWEEN '2012-10-09 00:00:00' AND '2013-04-09 23:59:59' 
LIMIT 0,25 
```

请注意，phone_Calls 表有大约 450 万条记录，帐户大约有 30 万条记录。

我现在有这样的索引

```
ph.trigger_on
ph.owner_id
ph.status

ac.status
ac.do_not_call
ac.account_id 
```

这是我解释查询时得到的

![在此处输入图像描述](https://i.stack.imgur.com/DlmaU.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:41:54.057

重要的是要记住，创建质量索引的列是具有高度唯一性的列。我不确定`status`您的系统中有多少值，但如果您的表只有 3 种可能的状态，这不是一个好的索引。

让您的索引位于您正在执行的连接操作的核心列上也会很有帮助。在这种情况下`ph.account_id`, `ac.account_id`, `ind.industry_id`, `ac.industry_id`, `ph.call_code_id`,`ph.owner_id`和`cc.call_code_id`所有看起来都像是好的索引候选（如果它们还不是索引）。请注意，如果您的任何表有很多索引（超过 5 个），这可能会减慢您的查询速度。此外，如果您所涉及的任何表有大量的写入或删除（与读取次数相当），那么对这些表进行大量索引是不明智的，因为每个索引文件在有很多表的表上被更频繁地重写对它们执行的写操作。根据我的经验，索引是一种艺术形式，而不是科学，因此您必须进行一些实验才能找到最适合您的系统的方法。如果可能，请离线进行实验，看看在给定数据集的情况下什么能提供最佳提升。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:13:12.193

就像其他人提到的那样，如果您的 INDEX 列都是 0 和 1 位，那么您不需要索引，并且 id 自动增量应该对主索引更有效。我猜 phone_call_id 是 INT 并且是唯一的？这是一个自动增量字段吗？

MySQL 在内部使用自动增量 id 索引，因此对于这样的表来说，拥有它是个好主意。

如果您使用 SHOW CREATE TABLE 帐户发布您的架构结构；显示创建表电话呼叫；等我们可以帮助你更多。

我将使用数据库 - 因为它只有 300k - 并在本地加载它，然后添加自动增量列，如果它不是 phone_call_id，删除所有其他索引，除了：phone_call_id、account_id、industry_id 和 call_code_id。

为了帮助你更多，我需要知道其他表的结构是什么，尤其是行的宽度和数量。

# c++ - 如何在 Qt 中使用顶点缓冲区对象渲染地形？

> ID：15913614
> 
> 赞同：0
> 
> 时间：2013-04-09T22:20:58.513
> 
> 标签：c++, qt, opengl, vbo

我正在尝试从高度图渲染地形。我目前加载高度图并可以使用顶点数组渲染它，`glBegin/glEnd`但我需要使用 VBO 来完成。由于我使用的是 Qt，建议的方法是 QGLBuffer。

我究竟做错了什么？vboV 是一个 QGLBuffer，我在 initializeGL() 函数中对其进行了初始化。

```
void GLWidget::initializeGL()
{
glEnable(GL_DEPTH_TEST);
glMatrixMode(GL_MODELVIEW);
glClearColor(0,0,0,0);

vboV=new QGLBuffer(QGLBuffer::VertexBuffer);
vboV->create();
vboV->bind();
vboV->setUsagePattern(QGLBuffer::StaticDraw);
vboV->allocate(img->height()*img->width()*18);
vboV->release();
}

void GLWidget::paintGL()
{

//the commented section is using vertex array which works fine
//    glEnableClientState(GL_VERTEX_ARRAY);
//    glEnableClientState(GL_COLOR_ARRAY);

//    glVertexPointer(3,GL_FLOAT,0,f);
//    glColorPointer(3,GL_FLOAT,0,colorf);
//    glDrawArrays(GL_TRIANGLES,0,img->height()*img->width()*6);

//    glDisableClientState(GL_COLOR_ARRAY);
//    glDisableClientState(GL_VERTEX_ARRAY);

vboV->bind();
glEnableClientState( GL_VERTEX_ARRAY);
glVertexPointer(3,GL_FLOAT,0,f);
glDrawArrays(GL_TRIANGLES,0,img->height()*img->width());
glDisableClientState(GL_VERTEX_ARRAY);
vboV->release();
} 
```

我不确定要进行哪些更改才能使其正常工作。程序运行，但地形不渲染（它只是黑色）。

`f`是一个浮点数组，包含 {x1, y1, z1, x2, y2, z2...}; 顶点的位置，逆时针设置。我不知道内存分配是否正确，也不确定glDrawArrays。

我正在使用 Qt 4.8.1，我的操作系统是 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T13:01:56.893

你必须添加

```
vboV->write(0, img->data(), img->width() * img->height() * 18); 
```

或者您只需使用重载的 allocate 方法：

```
vboV->allocate(img->data(), img->height() * img->width() * 18); 
```

当然，您需要更改`img->data()`依赖于您的 img 数据类型。

# c++ - 专业化在 C++ 中被视为重载

> ID：15913617
> 
> 赞同：-4
> 
> 时间：2013-04-09T22:21:00.637
> 
> 标签：c++, templates, opencv

我是模板编程的初学者。

我在模板类中有三个模板函数：

```
// initialize the model (generic template for any other type)
template <typename ImgDataType>
void GrimsonGMMGen<ImgDataType>::InitModel(const cv::Mat& data) // data is an rgb image
{ ... }

template<>
void GrimsonGMMGen<cv::Vec3b>::InitModel(const cv::Mat& data)
{...}

template<>
void GrimsonGMMGen<float>::InitModel(const cv::Mat& data)
{ ... } 
```

但是我收到一个错误，说有重新声明指向重新声明，我记得以前使用过这样的专业化并且效果很好。我在这里做错了什么？

我需要对它们进行专门化，因为我正在设置的一些数据结构需要我正在使用的图像类型的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:29:14.800

您在问题中尝试做的事情肯定有效：类模板的成员函数可以单独专门化（完全）。例如：

```
#include <iostream>

template <typename T> struct Foo
{
    void print();
};

template <typename T> void Foo<T>::print()
{
    std::cout << "Generic Foo<T>::print()\n";
}

template <> void Foo<int>::print()
{
    std::cout << "Specialized Foo<int>::print()\n";
}

int main()
{
    Foo<char> x;
    Foo<int>  y;

    x.print();
    y.print();
} 
```

[现场演示](http://ideone.com/5Rl5FQ)

# python - 扩展一个序列化的 django 模型

> ID：15913620
> 
> 赞同：0
> 
> 时间：2013-04-09T22:21:15.950
> 
> 标签：python, django, django-models

我想扩展一个序列化的 django 模型，以便 json/xml 输出包含一个自定义标签（正文中的任何地方都可以）。

目前我正在做这样的事情来序列化模型。

```
data = serializers.serialize('xml', SomeModel.objects.all(), fields=('name','size')) 
```

但是如何用say（或类似的）扩展它：

```
<field type="CharField" name="CustomString">Hello World</field> 
```

所以最终这就是我想做的事情：

```
custom_field = [{'notes':'Hello World'}]
data = serializers.serialize('xml', SomeModel.objects.all()+custom_field, fields=('name','size','notes')) 
```

这可能吗？如果我需要更多解释，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:02:53.003

就像是：

```
custom_field = [{'notes':'Hello World'}]
my_objects = SomeModel.objects.all()
exec (('each.%s = %s' % key, value)¨for key, value in custom_field.items()) for each in my_objects
data = serializers.serialize('xml', my_objects, 
    fields=('name','size','notes')) 
```

可能会奏效。

# java - 关于将运行时参数数组传递给新类的查询

> ID：15913622
> 
> 赞同：0
> 
> 时间：2013-04-09T22:21:19.060
> 
> 标签：java, arrays, class, object, runtime

我试图将 main 方法中给出的运行时参数数组传递给另一个名为 GPA 的类。我已经创建了对象，但我不确定如何发送它。我会使用“this”关键字吗？

```
 class TestGPA
    {

    public static void main(String[] args)
    {
        GPA gpa = new GPA;

        if (args.length == 0)
        {
            System.out.println("Please supply grades to find GPA");
            System.exit(0);
        }
        else
        {
            String[] courseIds = new String[args.length];
            char[] grades = new char[args.length];
            parseInput(args, courseIds, grades);
            displayResult(courseIds, grades, computeGPA(grades));
        }
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:35:03.930

您没有`GPA`正确实例化。它应该是：

```
GPA gpa = new GPA(); 
```

不是

```
GPA gpa = new GPA; 
```

你的`GPA`类可能有属性的getter/setter。例如：

```
//sorry for the indent, didn't write in IDE

class GPA{
 private String[] whatever;

public void setWhatever(String[] w){
  this.whatever = w;
}

public String[] getWhatever(){

return this.whatever;
}

} 
```

那么在你的`main`方法中，你可以

```
GPA gpa = new GPA();
gpa.setWhatever(args); 
```

使用`whatever`属性：

```
gpa.getWhatever() 
```

# java - 带有 ScrollPane java 的动态按钮

> ID：15913623
> 
> 赞同：0
> 
> 时间：2013-04-09T22:21:31.937
> 
> 标签：java, swing, button, jscrollpane

我想创建动态按钮（例如 15 个），但我可以在屏幕上看到它们（450,450），我尝试使用滚动窗格，但没有结果。这个想法很简单，创建 X 按钮并可以在屏幕中垂直滚动（按钮位于屏幕中心）

这是代码，但我不知道谁让滚动窗格运行良好.. 总是有相同的结果（我不包括滚动窗格代码）

```
public class Consulta2 extends JFrame {

    private JPanel contentPane;
    private JLabel label;
    private JButton boton;

    public Consulta2() {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(450, 450);  
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        int x=50;
        for (int i=0;i<10;i++){

         JButton boton = new JButton("oli");

            GroupLayout gl_contentPane1 = new GroupLayout(contentPane);
            gl_contentPane1.setHorizontalGroup(
                gl_contentPane1.createParallelGroup(Alignment.LEADING)
                    .addGroup(gl_contentPane1.createSequentialGroup()
                        .addGap(163)
                        .addComponent(boton)
                        .addContainerGap(172, Short.MAX_VALUE))
            );
            gl_contentPane1.setVerticalGroup(
                gl_contentPane1.createParallelGroup(Alignment.LEADING)
                    .addGroup(gl_contentPane1.createSequentialGroup()
                        .addGap(50+x)
                        .addComponent(boton)
                        .addContainerGap(229, Short.MAX_VALUE))
            );
            contentPane.setLayout(gl_contentPane1);

            x=x+50;
         //contentPane.add(boton);

         setVisible(true);  
        }

         label = new JLabel("New label");
        GroupLayout gl_contentPane = new GroupLayout(contentPane);
        gl_contentPane.setHorizontalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addGap(183)
                    .addComponent(label))
        );
        gl_contentPane.setVerticalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addGap(68)
                    .addComponent(label))
        );
        contentPane.setLayout(gl_contentPane);

        Dimension tamFrame=this.getSize();//para obtener las dimensiones del frame
        Dimension tamPantalla=Toolkit.getDefaultToolkit().getScreenSize();      //para obtener el tamanio de la pantalla
        setLocation((tamPantalla.width-tamFrame.width)/2, (tamPantalla.height-tamFrame.height)/2);  //para posicionar
        setVisible(true);  

    }

    public void mostrar()
    {
        setVisible(true);
    }

    public void setText(String string) {
        //JLabel label = new JLabel();
        label.setText(string);

    }
} 
```

[http://imageshack.us/photo/my-images/94/45985657.jpg/](http://imageshack.us/photo/my-images/94/45985657.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:45:33.850

我很快在**JFrame**中做了这个。这个对我有用。

```
 // the panel
    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new GridBagLayout());
    buttonPanel.setSize(new Dimension(400, 300)); // whatever

    // the scrollpane
    JScrollPane pane = new JScrollPane();
    pane.setSize(new Dimension(400, 300)); // whatever

    // GridBagConstraint for button
    GridBagConstraints constraint = new GridBagConstraints();
    constraint.anchor = GridBagConstraints.CENTER;
    constraint.fill = GridBagConstraints.NONE;
    constraint.gridx = 0;
    constraint.gridy = GridBagConstraints.RELATIVE;
    constraint.weightx = 1.0f;
    constraint.weighty = 1.0f;

    int sizeOfButtons = 50;
    for(int i = 0; i < sizeOfButtons; i++) {
        JButton button = new JButton();

        button.setText("Button #" + i);

        // other attributes you will set

        buttonPanel.add(button, constraint);
    }

    pane.setViewportView(buttonPanel);
    this.rootPane.add(pane); // or other panel etc.
    pane.updateUI(); 
```

# mongodb - 将数据建模为单个集合还是单独的集合更好？

> ID：15913628
> 
> 赞同：4
> 
> 时间：2013-04-09T22:22:15.127
> 
> 标签：mongodb

例如，想象一个简单的“帮助台”类型的应用程序，其中有支持工单，该应用程序支持多个公司登录并管理他们的工单。

鉴于公司不会相互交互“门票”....

拥有一组“Tickets”并进行查询更好，还是为每个公司创建 Tickets 集合更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:10:12.667

这里有几件事需要考虑。

首先是预先分配空间。您会在 mongodb-user 组中找到几个线程，因此 OP 对为什么他们的数据库占用如此多的空间而他们的数据占用如此少的空间感到困惑。这是因为当你到达集合中的某个预分配点时，它会默认创建 2GB 大小的文件，即使你只使用 100meg 的空间。

现在想象一下这种针对 1000 家公司的预分配模式；这很快就会造成磁盘空间的低效使用，并且在大多数线程中，还会造成性能和成本问题。

这里要考虑的第二件事是 nssize，最大为 2GB。这可能看起来很疯狂，但是如果您确实拥有超过 300 万会员（假设一家公司是“注册用户”）怎么办？您将很快用完 MongoDB 可以提供的最大命名空间文件大小。

此外，如果不将它们拆分到单独的数据库中，您将不会从锁定（在数据库级别）中获得任何好处，这当然会在维护每个公司的数据库连接时产生操作开销。

MongoDB 通常被设计为通过集群扩展而不是垂直扩展，垂直扩展通常被认为对于大型网站来说是个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:49:42.567

我没有太多时间使用 mongodb，但我会给出一些论据，以便我们讨论它。我认为您应该只创建一个门票集合，原因如下：

*   为每个公司创建一个集合似乎是多余的。
*   每次将新公司添加到系统以创建工单时，您都必须创建和配置集合，而另一方面，您只需创建公司。
*   我不知道您打算如何在您的公司文档与其相应的票证集合之间创建链接，但我认为使用公司文档的 id 和票证集合中的 idcompany 属性来创建链接更直接。

我认为可能让您考虑为每个公司创建票证集合的原因之一是，由于大量数据可能会降低您的查询速度（所有公司都插入同一个票证集合）。但是你可以解决这个问题的方法是创建一个分片集群，使用带有 idcompany 的复合分片键和门票文档中的一些有用属性，这种方式很可能给定公司的所有文档都保留在同一个分片中，所以常见查询将执行相对较快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T07:17:35.340

我的 0.02 美元：

通过将每家公司分成他们自己的集合，或者更好的数据库……它使客户迁移和个性化备份、恢复、导入和导出变得更加容易，但代价是让你的代码变得更糟糕。

隔离客户数据可能会降低您的数据存储要求，因为您不需要将客户 ID 嵌入到每个文档中。当然，对于单独的数据库，大多数驱动程序会将其视为单独的网络连接。

与所有事情一样，都有权衡。

# css - 暂停后 CSS3 动画卡顿/跳跃

> ID：15913637
> 
> 赞同：10
> 
> 时间：2013-04-09T22:23:04.613
> 
> 标签：css, css-animations

我的 CSS 动画声明了一个`animation-play-state: paused`on `div:hover`。问题是（至少在 Chrome 中），当鼠标悬停在元素上时，动画会卡住/跳跃。

这是一个 jsFiddle：http: [//jsfiddle.net/AHqLE/](http://jsfiddle.net/AHqLE/)

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T14:43:21.620

尝试添加`-webkit-transform: translateZ(0);`或`-webkit-transform: translate3d(0,0,0);`强制硬件加速。我将它添加到我使用的任何过渡或动画中，这样 Chrome 就不会留下痕迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T16:40:12.500

我可以确认这**现在适用**于最新的 Chrome 版本（版本 31.0.1650.63）

对此问题的附加说明：我相信我（当时）通过使用`top/bottom`值而不是`translateY`值来解决它

# django - 如何在带有 while 循环的 Django 包含标记中进行数学运算以显示基于过滤器的结果？

> ID：15913639
> 
> 赞同：0
> 
> 时间：2013-04-09T22:23:13.457
> 
> 标签：django

我正在尝试编写一个简单的包含标签，它将执行以下操作：

1.  获取按项目订购的用户的所有时间记录
2.  将所有项目的时间加在一起
3.  返回一个对象列表，该列表按花费的最多时间和总数对项目进行排序

第一项很简单。

```
@register.inclusion_tag('time/_total_time_per_project_ytd.html')
def show_total_time_by_project():
    time = Time.objects.all().order_by('project')
    return {'time': time} 
```

我认为这样的东西是我需要的：

```
@register.inclusion_tag('time/_total_time_per_project_ytd.html')
def show_total_time_by_project():
    time = Time.objects.all().order_by('project')
    while time.project = project
        # this is where I'm lost. How do I do the math?
        return time_total
    return {'time': time_total} 
```

然后我遍历时间，结果将是一个 object_list，其中包含三个项目的三个记录以及每个项目的总时间。如你所料，我是菜鸟，所以请用湿面条。谢谢！

# java - 使用默认表模型时重新调整 JTable 的大小

> ID：15913642
> 
> 赞同：2
> 
> 时间：2013-04-09T22:23:19.567
> 
> 标签：java, swing, jtable, defaulttablemodel, preferredsize

我有一个使用 DefaultModel 构建的 JTable，它显示在 JPane 中，但我想重新调整表格的大小以使其更大。谁能解释一下我该怎么做？我尝试了以下代码：

```
TableColumnModel colsize = t1.getColumnModel();

for(int i=0; i<cols; i++){

    colsize.getColumn(i).setPreferredWidth(200);
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:12:03.183

调整表格大小[#setPreferredSize()。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29)

```
table.setPreferredSize(new Dimension(500, 500)); 
```

调整列[table#getColumn() 的大小。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getColumn%28java.lang.Object%29)

```
table.getColumn(columnNames[0]).setPreferredWidth(100);
table.getColumn(columnNames[1]).setPreferredWidth(400); 
```

我希望这将有助于解决您的问题。如果您在执行此操作时遇到任何问题，请询问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T00:24:40.780

使用`setPreferredSize()`是[有问题](https://stackoverflow.com/q/7229226/230513)的。因为`JTable`implements `Scrollable`，覆盖`getPreferredScrollableViewportSize()`返回多个 of`getRowHeight()`可能是更好的方法。

# if-statement - Erlang：如何在 if 语句的真实分支中“什么都不做”

> ID：15913645
> 
> 赞同：14
> 
> 时间：2013-04-09T22:23:46.803
> 
> 标签：if-statement, erlang

我有这样的`if`声明：

```
if 
    A /= B -> ok;
    true   ->
end. 
```

我希望它什么也不做`A == B`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T23:12:20.467

Erlang 没有`nothing`like`void`或的概念`unit`。我建议返回另一个原子，例如`not_ok`（甚至`void`或`unit`。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T00:18:12.523

最好的答案是不要使用 if，只使用用例。

```
case A of
   B -> ok;
   C -> throw({error,a_doesnt_equal_b_or_whatever_you_want_to_do_now})
end 
```

通常`ok`或`undefined`或`noop`作为原子返回，这基本上意味着什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T07:56:30.027

如前所述，任何代码都会返回一些东西。

如果你只想在一种情况下做某事，那么你可以这样写：

```
ok =if 
    A /= B -> do_something(A,B); % note that in this case do_something must return ok
    true -> ok
end. 
```

如果你想获得 A、B 的新值，你可以这样写

```
{NewA,NewB} = if 
    A /= B -> modify(A,B); % in this case modify returns a tuple of the form {NewA,NewB}
    true -> {A,B} % keep A and B unchanged 
end.
% in the following code use only {NewA,NewB} 
```

或者以更“erlang方式”

```
%in your code
...
ok = do_something_if_different(A,B),
{NewA,NewB} = modify_if_different(A,B),
...

% and the definition of functions
do_something_if_different(_A,_A) -> ok;
do_something_if_different(A,B) ->
    % your action
    ok.

modify_if_different(A,A) -> {A,A};
modify_if_different(A,B) ->
    % insert some code
    {NewA,NewB}. 
```

最后，如果您希望它在 A == B 时崩溃

```
%in your code
...
ok = do_something_if_different_else_crash(A,B),
...

% and the definition of functions
do_something_if_different_else_crash(A,B) when A =/= B ->
    % your action
    ok. 
```

# java - JComboBox 卡住了

> ID：15913651
> 
> 赞同：1
> 
> 时间：2013-04-09T22:24:43.463
> 
> 标签：java, swing, click, jpanel, jcombobox

我对 JComboBox 有疑问。我有一个带有 JComboBox 的上部 JPanel 和下面的另一个带有 BufferedImage 的 JPanel，我可以在其中绘制一些椭圆（它有一个鼠标点击的侦听器）。正如您将在视频中看到的那样，问题是有时当我更改 JComboBox 中的选项时，它不会显示该更改。

例如，如果我选择“ALL”，然后选择“L4”，则“ALL”保持显示而不是更改为“L4”，但是当我单击 JComboBox、另一个绘图 JPanel 或桌面的另一个窗口时，它更改为“L4”（之前应该已经更改）。我认为问题与让 JPanel 监听 JComboBox 下方的鼠标点击有关，但我不确定。

**谁能告诉我该如何解决？**

这是我为显示问题而制作的**视频的链接：http:** [//youtu.be/8Gg2Uq3SCYw](http://youtu.be/8Gg2Uq3SCYw)

同样重要的是，当我使用 QuickTime Player 录制视频时，即使没有正常工作，所有内容都可以正常录制（我的意思是我看到了视频中的内容（链接），但 QuickTime 录制了它运行正常，非常非常奇怪......）

这是我为您制作的**示例 eclipse 项目**的链接，尝试多次选择不同的选项，您会看到我所说的：[https](https://app.sugarsync.com/iris/wf/D6421069_60887018_228038) **://app.sugarsync.com/iris/wf/D6421069_60887018_228038 查看 CircuitTracePlotView.java 的 LapPanel ，有JComboBox。**

我在 MacBookPro 10.8 (Mountain Lion) 上运行它

这是视图的代码（它也在示例的链接上）：

```
package view;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;

import java.awt.image.BufferedImage;
import java.util.LinkedList;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class CircuitTracePlotView extends JFrame {
    private static final long serialVersionUID = 5125304890914235274L;
    private int numberOfLaps;

    private CircuitTracePlot plot;
    private LapPanel lapPanel;

    public CircuitTracePlotView() {

        this.setVisible(false);

        this.plot = new CircuitTracePlot();
        this.lapPanel = new LapPanel();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.getContentPane().add(this.plot, BorderLayout.CENTER);
        this.getContentPane().add(this.lapPanel, BorderLayout.NORTH);
        this.pack();
        this.setLocationRelativeTo(null);       
    }

    public void init(CircuitTracePlotViewController circuitTracePlotViewController, int numberOfLaps) {
        this.setController(circuitTracePlotViewController);
        this.setNumberOfLaps(numberOfLaps);

        this.lapPanel.setLapSelection();
    }

    private void setController(CircuitTracePlotViewController circuitTracePlotViewController) {
        this.plot.init(circuitTracePlotViewController);
    }

    private int getNumberOfLaps() {
        return this.numberOfLaps;
    }

    public void setNumberOfLaps(int laps) {
        this.numberOfLaps = laps;
        System.out.println("NumberOfLaps" + this.numberOfLaps);
    }

    public void drawPoint(int x, int y) {
        this.plot.drawPoint(x, y);
        this.repaint();
    }

    public void drawLine(int x1, int y1, int x2, int y2) {
        this.plot.drawLine(x1, y1, x2, y2);
    }

    public Dimension getPlotDimension() {
        return this.plot.getPreferredSize();
    }

    //Drawing panel
    private class CircuitTracePlot extends JPanel {

        private static final long serialVersionUID = -7915054480476755069L;

        private final static short LINE = 0;
        private final static short OVAL = 1;

        private final static int OVALHEIGHT = 10;
        private final static int OVALWIDTH = 10;

        BufferedImage plot;
        Graphics2D plotGraphics;

        private int x1;
        private int x2;
        private int y1;
        private int y2;

        private int paintType;

        private CircuitTracePlot() {
            this.setBackground(Color.WHITE);

        }

        private void init(CircuitTracePlotViewController circuitTracePlotViewController) {
            this.addListeners(circuitTracePlotViewController);
            this.plot = (BufferedImage)this.createImage(this.getPreferredSize().width, this.getPreferredSize().height);
            this.plotGraphics = this.plot.createGraphics();
        }

        private void drawLine(int x1, int y1, int x2, int y2) {
            this.x1 = x1;
            this.y1 = y1;
            this.x2 = x2;
            this.y2 = y2;
            this.paintType = LINE;
            this.repaint();
        }

        private void drawPoint(int x1, int y1) {
            this.x1 = x1;
            this.y1 = y1;
            this.paintType = OVAL;
            this.repaint();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            switch (this.paintType) {
            case LINE:
                plotGraphics.drawLine(x1, y1, x2, y2);
                g.drawImage(this.plot,0,0, this);
                break;
            case OVAL:
                plotGraphics.fillOval(x1 - OVALWIDTH/2, y1 - OVALHEIGHT/2, OVALWIDTH, OVALHEIGHT);          
                g.drawImage(this.plot,0,0, this);
                break;
            }

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 500);
        }

        private void addListeners(CircuitTracePlotViewController circuitTracePlotViewController) {
            this.addMouseListener(circuitTracePlotViewController);
        }

    }

    private class LapPanel extends JPanel{

        private static final long serialVersionUID = -287427935273603789L;

        //private LinkedList<JIDButton> list_LapButtons;
        private JComboBox<String> JCB_Laps;

        private LapPanel() {

            this.setBorder(BorderFactory.createTitledBorder("Lap Selection"));
            //this.list_LapButtons = new LinkedList<JIDButton>();

            //JIDButton auxButton = new JIDButton(0, "<html><u>A</u>LL<html>");
            //this.list_LapButtons.add(auxButton);
            //this.add(auxButton);

            System.out.println("NumberOfLaps" + CircuitTracePlotView.this.numberOfLaps);

        }

        private void setLapSelection() {

            String[] auxLaps = new String[CircuitTracePlotView.this.getNumberOfLaps() + 1];

            auxLaps[0] = "<html>" + "<u>" + "A" + "</u>" +  "LL"  + "<html>";
            for (int i = 1; i <= CircuitTracePlotView.this.getNumberOfLaps(); i++) {
                auxLaps[i] = "<html>" + "L" + "<u>" +  i + "</u>" + "<html>";

            }
            this.JCB_Laps = new JComboBox<String>(auxLaps);

            this.add(JCB_Laps);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(700, 65);
        }

    }

} 
```

我已经发布了所有我认为相关的信息，如果有人需要更多信息，请询问。

# c++ - 在类本身中存储类的对象

> ID：15913653
> 
> 赞同：0
> 
> 时间：2013-04-09T22:24:54.623
> 
> 标签：c++

如何在类本身中存储类的对象？

我知道我必须使用 static 关键字来完成我想要的。因此，该类应如下所示：

```
class my_class {
public:
    static my_class instance;
    my_class() {
        my_class::instance = this
    }
}; 
```

下面是出现在类中的确切代码

```
namespace ArmISA {
    class ISA {
        protected:
            static ISA* isa;
            MiscReg miscRegs[NumMiscRegs];
            const IntRegIndex *intRegMap;
            .....
        public:
            ISA() {
                ISA::isa = this;
                ...
            }
        ...
    };
} 
```

我得到的错误是：

> 错误：无法将 'ArmISA::ISA::isa' 从 'ArmISA::ISA*' 转换为 'ArmISA::ISA'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:31:06.390

`my_class::instance = *this;`会起作用，但我希望您知道，每次创建该类的新实例时，您的`instance`成员都会被覆盖。此外，这意味着它`instance`是副本`*this`而不是参考 - 对一个的更改对另一个是不可见的。

另一种选择是声明`instance`为指针，在这种情况下，两个指针都引用同一个对象，然后`instance = this;`编译：

```
static my_class* instance; 
```

但是，我不确定您到底想达到什么目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:25:58.593

`this`是一个指针。使用`my_class::instance = *this`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:33:15.723

要初始化非整数类型的静态成员变量（或在 C++11 中为 non- `constexpr`），请在类外部执行此操作。

例如：

```
struct Foo
{
    static Foo bar;
    double x_;
    Foo( double x ): x_( x ) {}
};

// Preferably in an implementation file:
Foo Foo::bar( 3.14 ); 
```

类外的声明始终是正式的*定义*，它为变量提供存储（如果您获取地址则需要）。

* * *

如果您想提供仅头文件的模块，另一种方法是通过函数提供对静态变量的访问，如下所示：

```
struct Foo
{
    static Foo& bar()
    {
        static Foo theBar( 3.14 );
        return theBar;
    }

    double x_;
    Foo( double x ): x_( x ) {}
}; 
```

另一种技术是从提供静态变量的类模板继承。

# c# - 将各种格式化字符串解析为时间

> ID：15913654
> 
> 赞同：1
> 
> 时间：2013-04-09T22:24:56.327
> 
> 标签：c#, parsing, datetime

我想将字符串解析为时间，字符串可以是“hh:mm tt”或“hh:mmtt”“11:00am”、“11:00am”、“13:00”“5:00AM”“6 :00PM" , "6:00 pm", "6:00:01 pm" 等等。我想知道如何正确解析它。我的想法是枚举所有格式，如下所示。但我觉得这很尴尬，必须有更好的方法。谢谢

```
 DateTime ret = DateTime.MinValue;
        DateTime.TryParse(timeStr, CURRENT_CULTURE_FORMATPROVIDER,Style1, out ret);
        if(ret == DateTime.MinValue)
        {
            DateTime.TryParse(timeStr,CURRENT_CULTURE_FORMATPROVIDER,Style2, out ret);
        }
        if(ret == DateTime.MinValue)
        {
            DateTime.TryParse(timeStr,CURRENT_CULTURE_FORMATPROVIDER,Style3, out ret);
        }
        ...
        return ret; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:55:05.517

不是真正的答案，但不适合评论：拒绝不完全清楚的值，而不是可能猜错。

虽然很容易猜测特定字符串代表什么实际值，但这是非常危险的路线。您接受的输入“格式”越多，猜错值的可能性就越高。

如果数据来自某些计算机生成的来源 - 简单地拒绝意外数据可能是最佳选择。考虑是否要求一些固定的众所周知的文化不敏感格式有效（即 ISO8601 可选时区）

如果此数据直接来自用户，最好立即拒绝数据并让用户以更精确的格式重新输入日期。如果可能的话 - 只是不要让用户选择和强制特定格式。

如果您随机错误地猜测值，用户（如果他们关心并且必须经常使用您的工具）将学习以一种非常特殊的格式输入值并口头指示仅使用该格式（例如“小时两个空格冒号分钟，仅添加 PM下午的值")...

请注意，只有某些文化（在 .Net 意义上）具有 AM/PM 指示符，因此请确保也针对这些文化测试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:31:36.543

[DateTime.TryParse](http://msdn.microsoft.com/en-in/library/ch92fbc1.aspx)似乎可以解决您的问题。看一看

```
string myTime = "5:00AM";
DateTime dt = DateTime.Now;
DateTime.TryParse(ss, out dt); 
```

# php - 通过jquery模拟href post

> ID：15913655
> 
> 赞同：0
> 
> 时间：2013-04-09T22:24:57.607
> 
> 标签：php, jquery, html, codeigniter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:32:29.120

你似乎很困惑。单击 A 元素将发送 GET 请求，而不是 POST。要模拟单击链接，您可以使用`window.location = "<?php echo site_url('main/gmail_invite'); ?>"`. 要发送浏览器遵循的 POST，您需要使用适当的操作创建一个 FORM 并提交它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:17:45.723

只需使用 JQuery 的“单击”功能，您就可以操作任何元素并执行您需要执行的任何操作（可以是 GET、POST 或自定义操作）。例如，click 函数可用于提交表单、充当“链接”或简单地触发 Ajax 调用。

这是示例函数：

```
$('#gmailbutton').click(function(){

var form_data = 'WHATEVER DATA YOUR COLLECTING'
$.ajax({

    //the type of call it can be GET or POST 
    type:'POST',
    //If it is a static URL you dont need to echo with PHP 
    //just write it directly
    url:'main/gmail_invite/ajax.sample.call.php', //or whatever you php file is called

    //if you want to receive the data as html,json,xml
    dataType:'json',
    cache:false,

    beforeSend:function(x){
        //use this only if the response is a JSON object    
        if(x && x.overrideMimeType) {
            x.overrideMimeType("application/j-son;charset=UTF-8");
        }       

    }
}).done(function(response){

    //use "done" rather than "success", as "success" has been deprecated from JQUERY
    console.log( response );
    //no need to return, the ajax returns the call by default

}).fail(function(jqXHR, textStatus, errorThrown){

    console.log( jqXHR );
    console.log( textStatus );
    console.log( errorThrown );

}); 
```

});

# python - Django - 实例需要有一个主键值才能使用多对多关系

> ID：15913659
> 
> 赞同：1
> 
> 时间：2013-04-09T22:25:17.350
> 
> 标签：python, django

我了解它希望我在访问 M2M 字段之前进行保存。我不想保存模型。我正在使用一个名为 TaskSearchCriteria 的模型来搜索任务。用户可以选择将标准保存到数据库中以供将来搜索。但是应该可以在不保存条件的情况下进行一次性搜索。这是我的模型。

```
class TaskSearchCriteria(models.Model):
    name = models.CharField(max_length=256)
    task_name = models.CharField(max_length=256, blank=True, null=True)
    project = models.ForeignKey(Project, blank=True, null=True)
    sprint = models.ForeignKey(Sprint, blank=True, null=True)
    type = models.ForeignKey(TaskType, blank=True, null=True)
    priority = models.ForeignKey(Priority, blank=True, null=True)
    status = models.ForeignKey(Status, blank=True, null=True)
    description = models.CharField(max_length=1024, blank=True, null=True)
    owner = models.ForeignKey(User)
    users = models.ManyToManyField(User, related_name='a+')

    def get_param_dict(self):
        retval = dict()
        if self.task_name != None and len(self.task_name) > 0:
            retval["name__contains"] = self.task_name
        if self.project != None:
            retval["project__id"] = self.project.pk
        if self.sprint != None:
            retval["sprint__id"] = self.sprint.pk
        if self.type != None:
            retval["type__id"] = self.type.pk
        if self.priority != None:
            retval["priority__id"] = self.priority.pk
        if self.status != None:
            retval["status__id"] = self.status.pk
        if self.description != None and len(self.description) > 0:
            retval["description__contains"] = self.description
        if self.users != None and len(self.users) > 0: #**ERROR HERE**
            ids = [user.pk for user in self.users]
            retval["users__in"] = ids
        return retval 
```

我使用模型表单来创建模型并运行 get_param_dict() 方法来创建用于 model.object.filter() 的字典。是否可以在不保存到数据库的情况下使用 m2m 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T00:01:33.843

简而言之，不，您不能在不保存模型的情况下使用 m2m 字段。

这就是为什么。您必须记住 m2m 字段是如何工作的。与外键不同，m2m 关系需要一个中间表，该表有两个外键指向另外两个表，因此允许任一表（在外键中）有许多行，从而允许多对多行为。因此，为了`users`在您的模型中检索 ，您必须在数据库中查询`users`中间 m2m 表，其中外键`TaskSearchCriteria`是模型实例的主键。只有这样，您才能获得与您的模型关联的用户列表。但是如果你的模型没有保存，那是不可能的，因为你还不能查询中间表。

但是，您可以通过手动向该方法提供用户列表来提供未保存模型实例的解决`get_param_dict`方法：

```
def get_param_dict(self, users=[]):
    retval = dict()

    # ...

    # retreive users from the m2m relation
    if self.pk:
        ids = [user_id[0] for user_id in self.users.all().values_list('pk')]
        if ids:
            retval["users__in"] = ids

    # when model is not saved - get user ids from the parameter
    else:
        if users:
            retval["users__in"] = users

    return retval 
```

# gps - VAE-307 GSM GPS 寻呼机不响应 0008 命令

> ID：15913661
> 
> 赞同：1
> 
> 时间：2013-04-09T22:25:20.750
> 
> 标签：gps, sms, gsm

我的老板有 2 个用于 gps 的 gsm 设备，设备 2 很简单，它会接到一个电话并发送一条带有地理位置的短信（谷歌地球格式）。但是，它缺少其他一些功能，所以我的老板让我使用设备一：来自 Vision 的 VAE-307。到目前为止，看起来很简单： a) 使用手机将 7 个联系人写入 GSM sim 卡，每个联系人都有一个作为用户/ID，以及在有事件时要拨打的电话号码。那里没有谜团。字段#4 略有不同，它只是命令的密码，而“名称”字段保持空白。获得 7 个联系人后，将 sim 卡放入 gps 并打开电源。使用电话作为网关，我将开发一个软件来分页 gps 并生成带有答案的报告。

要请求操作，您只需键入并发送这样的短信：“# password # 000X”，其中 password 是位置 4 的 4 位密码，X 是从 1 到 8 的数字。到目前为止，我们的命令正在测试的是 0008，它将通过短信获取地理位置。

问题来了。我使用我的电脑通过蓝牙连接到普通手机，然后发出如下 AT 命令：

```
AT+CMGF=1 [ENTER]
OK
AT+CMGS="NUMBER" [ENTER]
> #PASS# 0008 [CTRL + Z]
+CMGS: 71
OK 
```

您可能知道，格式是第一行的文本，'number' 属于目的地，71 是确认号。我确认消息已发送/接收。我的担忧转到'#PASS# 0008 行。我可以看出消息已发送。我知道收到了。我不确定是否每个人都可以在 gps 上读取。然而，我没有收到回复。一个都没有。

这就是我到目前为止所做的：设备随附的手册的借口说（我正在引用）：

**名称：不适用**

**号码：#密码#**

**密码为 4 位阿拉伯数字代码，允许使用 SMS 控制车辆中的某些系统功能。**

所以，我不确定“#”或空格是否应该包含在密码中。该示例包含具有以下格式的“#”：“#5566#”，但不存在空格。稍后，提供了一个示例列表，我所追求的示例如下所示：

```
# Password # 0008 
```

因此，我不确定“#”是否是密码声明的一部分，或者是否是为了强调该字段是数字的事实，或者在发送消息时它是否必须存在。尽管如此，我的第一种方法（密码='#5566#'，命令='#5566#0008'）不起作用，我没有得到回复。所以我尝试了不同的组合：

```
#5566#0008
# 5566 # 0008
#5566 #0008
5566 0008
1 5566 1 0008 (assuming '#' meant I needed the number for the contact on memory) 
```

我还尝试了带有“#5566#”和“5566”的sim卡。请注意，手册上的格式在“#”和“密码”之间添加了一个空格，但是在 sim 卡上写数字时这是不可能的，手机不会让你，并尝试用AT 命令也不会这样做。此时我觉得可能是格式，于是尝试用PDU代替文本发送，gps将其转换为文本格式，所以说的和原来的消息一模一样。消息格式被丢弃为问题的根源。

所以我出去在制造商的网站上寻求帮助，毫不奇怪： http: [//www.visionsecurity.com.tw/](http://www.visionsecurity.com.tw/)没有列出软件下载或更新的手册，进一步的网络研究给了我[http://www.visionsecurity。 com.tw/upload/file/23_file_1_cht.pdf](http://www.visionsecurity.com.tw/upload/file/23_file_1_cht.pdf)（网站中未显示）这是手册......中文版。在谷歌翻译的帮助下，我设法发现这两个版本都包含几乎相同的信息缺失。我发现没有其他人有同样的问题。

最后的细节：该设备有一些电线来检查汽车报警器和车门状态，如果你给其中一些电线提供接地电压，短信将发送到正确的位置。如果按下警报开关，就会收到短信，并会打电话，所以我知道那里的gsm服务正在工作，如果你检查sim卡，你可以找到带有密码的短信，所以设备正在接收它们。

问题是：有没有人知道对这个 VAE-307 四频 GSM 和 GPS 寻呼机套件设备进行编程的正确方法，以便在我发送请求时让它发送带有其地理位置的 SMS 回复？

谢谢大家。

# javascript - 扩大下拉菜单的宽度

> ID：15913664
> 
> 赞同：1
> 
> 时间：2013-04-09T22:25:33.363
> 
> 标签：javascript, jquery, html, css

如何增加下拉菜单的宽度...当您将鼠标悬停在服务链接上时，会出现下拉菜单弹出....在此弹出窗口中，我已包含文本字段，因此我需要增加下拉菜单的宽度向下菜单....我尝试增加子类的宽度所有表单字段都变为内联但不起作用....在下面提供我的代码....

[http://jsfiddle.net/3VBQ6/1/embedded/result/](http://jsfiddle.net/3VBQ6/1/embedded/result/)

```
<ul class="sub">
    <li><a href="#nogo23"><span class='label'>Name</span>
        <span><input type="text" name="lastname" /></span></a>

    </li>
    <li><a href="#nogo24">Company <span><input type="text" name="lastname" /></span></a>

    </li>
    <li><a href="#nogo25">Email <span><input type="text" name="lastname" /></span></a>

    </li>
    <li><a href="#nogo25"><input type="submit" value="Submit" /></a>

    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:59:28.313

尝试将`ul`和`li`宽度更改为自动并添加一个`min-width:90px`

像这样：

```
#nav li:hover ul.sub {
   left:1px;
   top:38px;
   background: #bbd37e;
   padding:3px;
   border:1px solid #5c731e;
   white-space:nowrap;
   width: auto;
   min-width:90px;
   height:auto;
   z-index:300;
}
#nav li:hover ul.sub li {
   display:block;
   height:20px;
   position:relative;
   float:left;
   width: auto;
   min-width:90px;
   font-weight:normal;
}
#nav li:hover ul.sub li a {
   display:block;
   font-size:11px;
   height:18px;
   width: auto;
   min-width:90px;
   line-height:18px;
   text-indent:5px;
   color:#000;
   text-decoration:none;
   border:1px solid #bbd37e;
} 
```

我还为输入字段添加了一些样式

```
#nav li:hover ul.sub li a input {
   font-size:11px;
   height:18px;
   width: auto;
   min-width:90px;
   line-height:18px;
   color:#000;
   text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:02:24.500

所有不需要的子菜单都有硬编码的宽度。

如果您`float:left;`从不需要的“ul.sub li”中删除所有宽度和项目

您可以通过向其添加类来定位该特定菜单项，您可以通过 CSS 仅调整该项目。

```
#nav li:hover ul.sub.frm { width: 155px; }
.frm a .label { display: inline-block; width: 60px; }
.frm a input[type="text"] { width: 80px; } 
```

[**更新的小提琴**](http://jsfiddle.net/NotInUse/3VBQ6/3/)

# php - 转换 get 以在 php 中发布

> ID：15913666
> 
> 赞同：-1
> 
> 时间：2013-04-09T22:25:51.183
> 
> 标签：php

如何将此 PHP 代码从使用 $_GET 方法转换为 $_POST

```
<?php
if (isset($_GET['submit'])) {
if (checkCreditCard ($_GET['CardNumber'], $_GET['CardType'], $ccerror, $ccerrortext)) {
$ccerrortext = 'This card has a valid format';
} else {
 echo 'not working';
}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:27:47.763

这是在表单端处理的。不要将“方法”属性设置为 GET，而是将其设置为 POST。

这将告诉它将它作为 POST 变量传递，从而消除 GET 给您的限制。

就 PHP 而言，它不关心它是 GET 还是 POST，除了它需要知道在哪个数组中查找映射的事实。即使这样，$_REQUEST[] 关联数组也会在 GET 和 POST 数组中查找。

如果您好奇的 GET 不仅使 URL 中的数据易于阅读，它还会限制您可以传递的数据大小（最大 url 长度）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:33:18.033

将您的 PHP 代码更改为此（将 $_GET 的所有实例更改为 $_POST）：

```
<?php
if (isset($_POST['submit'])) {
    if (checkCreditCard ($_POST['CardNumber'], $_POST['CardType'], $ccerror, $ccerrortext)) {
        $ccerrortext = 'This card has a valid format';
    } else {
         echo 'not working';
    }
}
?> 
```

将您的 HTML 表单开始标记从更改`<form method="GET" ... >`为`<form method="POST" ... >`（“...”表示您可能在标记中具有的其他属性）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T22:35:25.170

你只是指的吗？

```
<?php
if (isset($_POST['submit'])) {
    if (checkCreditCard($_POST['CardNumber'], $_POST['CardType'], $ccerror, $ccerrortext)) {
        $ccerrortext = 'This card has a valid format';
    } else {
        echo 'not working';
    }
}
?> 
```

尽管您可能像其他人提到的那样在提交表单时遇到客户端问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:28:20.470

数据如何到达它不是 PHP 问题。您可能希望对 POST 方法请求使用表单或隐藏表单：

```
<form method="POST">
    <input type="hidden" name="CardNumber" value="value">
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T22:32:01.577

您可以简单地将脚本中的 $_GET 更改为 $_POST 。主要变化在于数据的输入方式。这应该在数据发送到此脚本的源页面中处理。

让我们考虑一个简单的例子：

```
<!-- Login.html -->
<form method='POST' action='yourscript.php'>
Email<input type='text' name='email'></input>
Password<input type='password' name='password'></input>
</form> 
```

这里唯一的变化是方法属性的“POST”参数代替了“GET”

# git - 带有 Git 的 IntelliJ 中的“无推送”错误

> ID：15913669
> 
> 赞同：10
> 
> 时间：2013-04-09T22:26:09.693
> 
> 标签：git, intellij-idea

所以我刚刚安装并设置了我的第一个 Git 存储库。

我在尝试推送更新时遇到了这个错误。我试图做的事情：

1.  查看错误 - 修复它
2.  点击顶部的“VCS”
3.  悬停“Git”
4.  单击“提交文件...”
5.  填写评论。确保选中我更改的文件
6.  单击屏幕底部的“提交并推送”
7.  突出显示我希望推送的所有文件
8.  点击新屏幕底部的“推送”

这里有什么问题，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-01T22:24:02.040

当您推送到空存储库时，您必须设置复选框*“将当前分支推送到替代分支”*并选择`master`该替代。这是因为`master`还没有创建（repo**真的**是空的）。但是这样做你可以假装初始化存储库。

虽然该复选框已关闭且存储库为空，但 IDEA 无法推送，因为它的接口必须是安全的，并且如果您上次推送的分支意外消失（或不存在），他不会创建新分支。您必须强制“创建分支”

**UPD** 顺便说一下，当前最新的 IntelliJ 版本可以推送到不存在的分支。现在它只显示在 origin 分支名称中添加前缀“+”。

在 Push Commits 对话框中，它看起来像

```
bugfix/PML-239 -> origin:+bugfix/PML-239 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-15T13:04:40.073

我通过打开复选框“将当前分支推送到替代分支”解决了这个问题。不确定，但我们需要它来首次推送到新分支，因为它的状态为“未跟踪”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T12:52:44.253

就我而言，在设置了我的远程存储库之后，我只是进行了一次提取，然后推送就可以正常工作了。

# jquery - 删除选择列表中的所有选项，第三个除外

> ID：15913670
> 
> 赞同：0
> 
> 时间：2013-04-09T22:26:17.550
> 
> 标签：jquery

标题说明了一切。

HTML：

```
<li class="mfieldtype_mnumber" id="modFilterField_29">
<label>From:</label>
<span class="filterinput">
<select size="1" class="inputbox text_area" name="cf29_2">
<option value=""></option>
<option value="1">COM_MTREE_EXACTLY</option>
<option value="2">COM_MTREE_MORE_THAN</option>
<option value="3">COM_MTREE_LESS_THAN</option>
</select>
<input type="text" placeholder="" size="30" class="inputbox text_area" name="cf29"></span></li> 
```

我尝试使用以下代码并实现 :not(nth-child) 但我无法让它工作。

```
$('li#modFilterField_29 select')
    .find('option')
    .remove(); 
```

所以总而言之，摆脱除第三个之外的所有选项（而不是通过使用它的值）

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:39:05.797

您可以使用这些组合的 Sizzle 选择器：

```
$('#modFilterField_29 option:not(:nth-child(3))').remove(); 
```

[**小提琴**](http://jsfiddle.net/dYHAf/1/)

*   [`:not()`选择器](http://api.jquery.com/not-selector/)
*   [`:nth-child()`选择器](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:34:20.947

你可以这样做：

```
var options = $('#modFilterField_29 select').find("option");
var keepOption = options.eq(2);
options.not(keepOption).remove(); 
```

1.  这将获得所有选项。
2.  然后，隔离第二个。
3.  然后从所有选项列表中删除第二个并删除其余选项。

工作演示：http: [//jsfiddle.net/jfriend00/JAxQu/](http://jsfiddle.net/jfriend00/JAxQu/)

或者，如果你想要更少的行，你可以这样做：

```
var options = $('#modFilterField_29 select').find("option");
options.not(options.eq(2)).remove(); 
```

# java - 为什么布尔值不切换？

> ID：15913671
> 
> 赞同：0
> 
> 时间：2013-04-09T22:26:19.480
> 
> 标签：java, swing, boolean

首先，我想说感谢您的帮助。我对 Java 编程比较陌生。我构建了一个简单的井字游戏，但遇到了一些麻烦。

每隔一段时间，“X”或“O”就会连续播放两次。我有一个布尔变量，当每个玩家轮流时，它应该从 true 切换为 false 以将“X”更改为“O”，但由于某种原因，它不会随机切换。

我认为这可能是 Eclipse 或其他问题，因为我不明白它为什么会这样做。

下面是游戏的代码：

```
public class gameMain {

    Boolean player = true;
    JPanel gameBoard;
    JButton[] b = new JButton[10];
    Font font = new Font("Arial", Font.BOLD, 99);
    ListenForButtons lfb = new ListenForButtons();

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new gameMain();
            }
        });
    }

    public gameMain() {
        JFrame j = new JFrame("TicTacToe");
        j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        j.setLocationRelativeTo(null);
        j.setSize(400, 400);

        gameBoard = new JPanel();
        gameBoard.setLayout(new GridLayout(3, 3));

        b[1] = new JButton("");
        b[1].addActionListener(lfb);
        b[1].setContentAreaFilled(false);
        b[1].setFont(font);
        b[1].setBorder(BorderFactory.createMatteBorder(0, 0, 2, 2, Color.BLACK));
        b[2] = new JButton("");
        b[2].addActionListener(lfb);
        b[2].setContentAreaFilled(false);
        b[2].setFont(font);
        b[2].setBorder(BorderFactory.createMatteBorder(0, 0, 2, 0, Color.BLACK));
        b[3] = new JButton("");
        b[3].addActionListener(lfb);
        b[3].setContentAreaFilled(false);
        b[3].setFont(font);
        b[3].setBorder(BorderFactory.createMatteBorder(0, 2, 2, 0, Color.BLACK));
        b[4] = new JButton("");
        b[4].addActionListener(lfb);
        b[4].setContentAreaFilled(false);
        b[4].setFont(font);
        b[4].setBorder(BorderFactory.createMatteBorder(0, 0, 0, 2, Color.BLACK));
        b[5] = new JButton("");
        b[5].addActionListener(lfb);
        b[5].setContentAreaFilled(false);
        b[5].setFont(font);
        b[5].setBorder(BorderFactory.createMatteBorder(0, 0, 0, 0, Color.BLACK));
        b[6] = new JButton("");
        b[6].addActionListener(lfb);
        b[6].setContentAreaFilled(false);
        b[6].setFont(font);
        b[6].setBorder(BorderFactory.createMatteBorder(0, 2, 0, 0, Color.BLACK));
        b[7] = new JButton("");
        b[7].addActionListener(lfb);
        b[7].setContentAreaFilled(false);
        b[7].setFont(font);
        b[7].setBorder(BorderFactory.createMatteBorder(2, 0, 0, 2, Color.BLACK));
        b[8] = new JButton("");
        b[8].addActionListener(lfb);
        b[8].setContentAreaFilled(false);
        b[8].setFont(font);
        b[8].setBorder(BorderFactory.createMatteBorder(2, 0, 0, 0, Color.BLACK));
        b[9] = new JButton("");
        b[9].addActionListener(lfb);
        b[9].setContentAreaFilled(false);
        b[9].setFont(font);
        b[9].setBorder(BorderFactory.createMatteBorder(2, 2, 0, 0, Color.BLACK));

        gameBoard.add(b[1]);
        gameBoard.add(b[2]);
        gameBoard.add(b[3]);
        gameBoard.add(b[4]);
        gameBoard.add(b[5]);
        gameBoard.add(b[6]);
        gameBoard.add(b[7]);
        gameBoard.add(b[8]);
        gameBoard.add(b[9]);

        j.add(gameBoard);
        j.setVisible(true);
    }

    public class ListenForButtons implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            if (e.getSource() == b[1]) {
                setSquare(b[1]);
            }
            if (e.getSource() == b[2]) {
                setSquare(b[2]);
            }
            if (e.getSource() == b[3]) {
                setSquare(b[3]);
            }
            if (e.getSource() == b[4]) {
                setSquare(b[4]);
            }
            if (e.getSource() == b[5]) {
                setSquare(b[5]);
            }
            if (e.getSource() == b[6]) {
                setSquare(b[6]);
            }
            if (e.getSource() == b[7]) {
                setSquare(b[7]);
            }
            if (e.getSource() == b[8]) {
                setSquare(b[8]);
            }
            if (e.getSource() == b[9]) {
                setSquare(b[9]);
            }
            checkForWin();
        }
    }

    public void setSquare(JButton button) {
        if (player) {
            button.setText("X");
            player = false;
            button.removeActionListener(lfb);
        } else {
            button.setText("O");
            player = true;
            button.removeActionListener(lfb);
        }
    }

    public void checkForWin() {
        if ((b[1].getText().equals("X") && b[2].getText().equals("X") && b[3].getText().equals("X"))
                || (b[4].getText().equals("X") && b[5].getText().equals("X") && b[6].getText().equals("X"))
                || (b[7].getText().equals("X") && b[8].getText().equals("X") && b[9].getText().equals("X"))
                || (b[1].getText().equals("X") && b[4].getText().equals("X") && b[7].getText().equals("X"))
                || (b[2].getText().equals("X") && b[5].getText().equals("X") && b[8].getText().equals("X"))
                || (b[3].getText().equals("X") && b[6].getText().equals("X") && b[9].getText().equals("X"))
                || (b[1].getText().equals("X") && b[5].getText().equals("X") && b[9].getText().equals("X"))
                || (b[3].getText().equals("X") && b[5].getText().equals("X") && b[7].getText().equals("X"))) {
            JOptionPane.showMessageDialog(null, "X WINS THE GAME!", "", JOptionPane.INFORMATION_MESSAGE);
            resetBoard();
        } else if ((b[1].getText().equals("O") && b[2].getText().equals("O") && b[3].getText().equals("O"))
                || (b[4].getText().equals("O") && b[5].getText().equals("O") && b[6].getText().equals("O"))
                || (b[7].getText().equals("O") && b[8].getText().equals("O") && b[9].getText().equals("O"))
                || (b[1].getText().equals("O") && b[4].getText().equals("O") && b[7].getText().equals("O"))
                || (b[2].getText().equals("O") && b[5].getText().equals("O") && b[8].getText().equals("O"))
                || (b[3].getText().equals("O") && b[6].getText().equals("O") && b[9].getText().equals("O"))
                || (b[1].getText().equals("O") && b[5].getText().equals("O") && b[9].getText().equals("O"))
                || (b[3].getText().equals("O") && b[5].getText().equals("O") && b[7].getText().equals("O"))) {

            JOptionPane.showMessageDialog(null, "O WINS THE GAME!", "", JOptionPane.INFORMATION_MESSAGE);
            resetBoard();
        } else if (!b[1].getText().equals("") && !b[2].getText().equals("") && !b[3].getText().equals("")
                && !b[4].getText().equals("") && !b[5].getText().equals("") && !b[6].getText().equals("")
                && !b[7].getText().equals("") && !b[8].getText().equals("") && !b[9].getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Cats Game!", "", JOptionPane.INFORMATION_MESSAGE);
            resetBoard();
        }
    }

    public void resetBoard() {
        for (int i = 1; i <= b.length - 1; i++) {
            b[i].setText("");
        }
        for (int i = 1; i <= b.length - 1; i++) {
            b[i].addActionListener(lfb);
        }
        player = true;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:42:28.227

当`ResetBoard()`被调用并且不是每个按钮都被按下时，你最终`ActionListeners`会为那些未使用的按钮分配多个。

这是一个示例`resetBoard()`方法：

```
 public void resetBoard() {
        // Fixed the loop index. Was: (int i = 1; i <= b.length - 1; i++)
        for (int i = 0; i < b.length; i++) {
            b[i].setText("");
            // Adding a listener only if there isn't one already
            if (b[i].getActionListeners().length < 1) 
                b[i].addActionListener(lfb);
        }
        player = true;
    } 
```

正如@MadProgrammer 建议的那样，我还重构了`setSquare()`方法：

```
 public void setSquare(JButton button) {
        if (player) {
            button.setText("X");
        } else {
            button.setText("O");
        }
        button.removeActionListener(lfb);
        player = !player;
    } 
```

# jquery - 移动设备上的单击和双击事件

> ID：15913675
> 
> 赞同：3
> 
> 时间：2013-04-09T22:26:27.910
> 
> 标签：jquery, mobile

我正在尝试让点击/双击的东西在移动浏览器上工作。我有以下代码：

```
$(function() {
  $(".vppop").mouseenter(function() { // Desktop browsers only
      $(".vppop").addClass("vppopscale");
  });
  $(".vppop").mouseleave(function() { // Desktop browsers only
      $(".vppop").removeClass("vppopscale");
  });
  $(".vppop").on('tap', function(e) { // Mobile browsers only
      e.preventDefault(); // Stop from following link
      $(".vppop").addClass("vppopscale").delay(300).removeClass("vppopscale");
  });
  $(".vppop").on('doubletap', function() { // Mobile browsers only
      // Go to Link
  });
}); 
```

使用手指插件进行移动事件： [https ://github.com/ngryman/jquery.finger](https://github.com/ngryman/jquery.finger)

无法获得点击事件以防止链接跟随，并且不确定双击事件需要什么才能使其跟随链接。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-13T03:09:22.363

我刚看到这个问题。这可能为时已晚，但如果您将*Finger*更新到最新版本，您将能够以这种方式防止默认行为。旧版本不支持此功能。

但是，如果您将事件侦听器`tap`和`doubletap`事件侦听器都附加到同一个元素，并且这`tap`会阻止默认行为，那么它也将适用于`doubletap`.

因此，您可能希望在`doubletap`侦听器中手动打开链接：

```
$(".vppop").on('doubletap', function() { // Mobile browsers only
    window.location = this.href;
}); 
```

希望这会有所帮助，即使有点晚了:)

# javascript - Unexpected token ) fault JS代码找不到错误？

> ID：15913676
> 
> 赞同：-4
> 
> 时间：2013-04-09T22:27:10.350
> 
> 标签：javascript, jquery

我在以下代码中不断收到错误**意外令牌“）” 。**谁能告诉我我的代码有什么问题？

```
function postFrom()
{
 /* contactform */
$.post('/contact_owner/send/', { 

customer_name: $('[name="customer_name"]').val(),
customer_phone: $('[name="customer_phone"]').val(),
customer_email: $('[name="customer_email"]').val(),

customer_message: $('[name="customer_message"]').val() +' \n-Adress: '+ $('[name="customer_address"]').val() +' -Postnummer: '+ $('[name="customer_zipcode"]').val() +' -Ort: '+ $('[name="customer_city"]').val() + ' -Markisvävar: '+ final,

subject:$('[name="customer_name"]').val() +' - '+ $('[name="sub"]').val()  },     function(data){
  if (data) {
    $('#status_notice').css('color', 'red');
    $('#status_notice').html(data);
  } else {
    $('#status_notice').css('color', 'green');
    $('#status_notice').html('Ditt meddelande skickades.');
    $('[name="customer_name"]').val('');
    $('[name="customer_phone"]').val('');
    $('[name="customer_email"]').val('');
    $('[name="customer_address"]').val('');
    $('[name="customer_zipcode"]').val('');
    $('[name="customer_city"]').val('');
    $('[name="customer_message"]').val('');
  $('input[type=checkbox]').each(function() 
  { 
    this.checked = false; 
  }); 

}
});
event.preventDefault();
});
});                                                       

/* contactform END */

}//end function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:29:08.313

您正在尝试使用`}):`来关闭该功能（您只需要使用`}`），而且您还有一些杂散的右括号。

**尝试这个：**

```
function postFrom()
{
 /* contactform */
$.post('/contact_owner/send/', { 

  customer_name: $('[name="customer_name"]').val(),
  customer_phone: $('[name="customer_phone"]').val(),
  customer_email: $('[name="customer_email"]').val(),

  customer_message: $('[name="customer_message"]').val() +' \n-Adress: '+ $('[name="customer_address"]').val() +' -Postnummer: '+ $('[name="customer_zipcode"]').val() +' -Ort: '+ $('[name="customer_city"]').val() + ' -Markisvävar: '+ final,

  subject:$('[name="customer_name"]').val() +' - '+ $('[name="sub"]').val()  },     function(data){
  if (data) {
    $('#status_notice').css('color', 'red');
    $('#status_notice').html(data);
  } else {
    $('#status_notice').css('color', 'green');
    $('#status_notice').html('Ditt meddelande skickades.');
    $('[name="customer_name"]').val('');
    $('[name="customer_phone"]').val('');
    $('[name="customer_email"]').val('');
    $('[name="customer_address"]').val('');
    $('[name="customer_zipcode"]').val('');
    $('[name="customer_city"]').val('');
    $('[name="customer_message"]').val('');
    $('input[type=checkbox]').each(function() 
  { 
    this.checked = false; 
}); 

}
});
event.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T22:29:25.460

格式化代码后，最后两`});`行似乎是多余的，应该删除。

格式化后：

```
function postFrom()
{
    /* contactform */
    $.post('/contact_owner/send/', {
        customer_name: $('[name="customer_name"]').val(),
        customer_phone: $('[name="customer_phone"]').val(),
        customer_email: $('[name="customer_email"]').val(),
        customer_message: $('[name="customer_message"]').val() + ' \n-Adress: ' + $('[name="customer_address"]').val() + ' -Postnummer: ' + $('[name="customer_zipcode"]').val() + ' -Ort: ' + $('[name="customer_city"]').val() + ' -Markisvävar: ' + final,
        subject: $('[name="customer_name"]').val() + ' - ' + $('[name="sub"]').val()}, function(data) {
        if (data) {
            $('#status_notice').css('color', 'red');
            $('#status_notice').html(data);
        } else {
            $('#status_notice').css('color', 'green');
            $('#status_notice').html('Ditt meddelande skickades.');
            $('[name="customer_name"]').val('');
            $('[name="customer_phone"]').val('');
            $('[name="customer_email"]').val('');
            $('[name="customer_address"]').val('');
            $('[name="customer_zipcode"]').val('');
            $('[name="customer_city"]').val('');
            $('[name="customer_message"]').val('');
            $('input[type=checkbox]').each(function()
            {
                this.checked = false;
            });
        }
    });
    event.preventDefault();
    /* contactform END */

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T22:31:07.197

打字错误，多余的括号

```
});
event.preventDefault();
}); // delete it
}); // delete it 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T22:32:44.650

更好的缩进可能会对你有很大帮助，但我认为 }); 假设 event.PreventDefault 应该在函数的末尾，则不需要第 (33、34) 行。

# c# - 从登录控制 inasp.net 访问登录名和登录状态

> ID：15913680
> 
> 赞同：1
> 
> 时间：2013-04-09T22:27:35.927
> 
> 标签：c#, asp.net, session, login-control

地狱每个人..我是asp.net的新手..我真的在尽我最大的努力来实现foll..我在asp.net中创建了一个登录控件。对于身份验证，我正在编写对用户进行身份验证的函数获取用户会话中的名称并重定向到另一个页面。我正在手动编写此功能，因为我需要用户名以供将来使用

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
    {
        Login Login1 = ((Login)LoginView1.FindControl("Login1"));
        string userName = Login1.UserName.ToString();
        Session["uname"] = userName;
        Response.Redirect("~/Project/Process/Process.aspx");
    } 
```

现在我想要的是当我将用户重定向到 Process.aspx ... 1）我想从登录控件和状态中显示用户名 ....如果用户已登录 ....然后显示页面内容和注销链接到注销用户.... 2）如果用户未通过身份验证，则将他重定向到登录页面...

请帮助我....任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:28:59.110

您可以简单地检查用户在您要隐藏的每个页面上是否经过身份验证 - 在`Page_Load()`这些页面的方法中。您不需要将值存储在中，`Session`也不一定需要您的`Login1_Authenticate`方法（除非您在身份验证时进行其他处理）。

在您的任何安全页面上，在`Page_Load()`方法中：

```
if (User.Identity.IsAuthenticated == false)
    Response.Redirect("~/YourLoginPage.aspx"); 
```

此外，要在成功登录后将用户重定向到特定页面，请使用控件的`DestinationPageUrl`属性，`Login`如下所示：

```
<asp:Login ID="Login1" runat="server" DestinationPageUrl="~/Project/Process/Process.aspx" /> 
```

显示当前登录（或未登录）用户的用户名和状态：

```
<asp:LoginView id="loginView" runat="server" >
    <LoggedInTemplate>
        <asp:LoginName id="loginName" runat="server" />&nbsp;
    </LoggedInTemplate>
</asp:LoginView>
<asp:LoginStatus ID="loginStatus" runat="server" LogoutText="Logout" LogoutAction="Redirect" LogoutPageUrl="~/YourHomePage.aspx" LoginText="Login" /> 
```

要在将来的任何时间从任何页面获取当前登录的用户名，请使用：

```
string userName = User.Identity.Name; 
```

让我们知道这是否能满足您的需求。

# r - R，ggplot2，跳过打印 x 值

> ID：15913682
> 
> 赞同：3
> 
> 时间：2013-04-09T22:27:41.623
> 
> 标签：r, plot, ggplot2

这可能相当简单，但我似乎不知道该怎么做。我得到了一个不错的情节，其中包含一组值线。`y`代表金额，代表`x`日期。

问题很简单，日期太多以至于它们被打印在彼此之上。

![问题](https://i.stack.imgur.com/AvYji.png)

编码 ：

```
sp = rbind(sp1,sp2,sp3,sp4)
pm = ggplot(data = sp, aes(x = date, 
                                 y = amount, 
                                 colour=sm, 
                                 group=sm)) + 
        geom_line() 
```

如何使 x 轴仅打印例如每 5 个日期而不是所有日期？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:15:17.767

```
library(scales)

sp = rbind(sp1,sp2,sp3,sp4)
pm = ggplot(data = sp, aes(x = date, y = amount, colour=sm, group=sm)) + 
    geom_line() +
    scale_x_date("x axis title", breaks = "5 years") 
```

scale_x_date 将为您整理 x 轴标签。要指定标签间隔，请使用上面的 scales 包。（ps你的日期需要是类日期，POSIXct或POSIXlt）

# c# - 从多个单独的列表中“配对”匹配项的最快非 LINQ 算法是什么？

> ID：15913683
> 
> 赞同：2
> 
> 时间：2013-04-09T22:27:45.200
> 
> 标签：c#, linq, list, union

## 重要的提示

对于将此标记为重复的人，请理解我们不想要基于 LINQ 的解决方案。我们的真实示例有数万个范围内的几个原始列表，而基于 LINQ 的解决方案的性能不足以满足我们的需求，因为它们必须多次遍历列表才能执行其功能，并随着每个新的源列表进行扩展。

这就是为什么我们专门寻找一种*非 LINQ*算法，例如下面这个答案中建议的算法，它们通过枚举器同时遍历所有列表，并且只遍历一次。这似乎是迄今为止最好的，但我想知道是否还有其他人。

现在回到问题...

为了解释我们的问题，考虑这个假设问题：

我有多个列表，但为了保持这个示例简单，我们将其限制为两个，ListA 和 ListB，它们的类型都是`List<int>`. 他们的数据如下：

```
List A    List B
  1         2
  2         3
  4         4
  5         6
  6         8
  8         9
  9        10 
```

...但是真正的列表可以有数万行。

我们接下来有一个名为 ListPairing 的类，其简单定义如下：

```
public class ListPairing
{
    public int? ASide{ get; set; }
    public int? BSide{ get; set; }
} 
```

其中每个 'side' 参数实际上代表一个列表。（即如果有四个列表，它也会有一个 Cside 和一个 Dside。）

我们试图做的是构造一个`List<ListPairing>`初始化数据如下：

```
A Side    B Side
  1         -
  2         2
  -         3
  4         4
  5         -
  6         6
  8         8
  9         9
  -        10

Again, note there is no row with '7' 
```

如您所见，结果看起来像一个完整的外部联接。但是，请参阅下面的更新。

现在开始，我们可以简单地这样做......

```
var finalList = ListA.Select(valA => new ListPairing(){ ASide = valA} ); 
```

哪个产生...

```
A Side    B Side
  1         -
  2         -
  4         -
  5         -
  6         -
  8         -
  9         - 
```

现在我们要回填列表 B 中的值。这需要首先检查是否存在与 BSide 匹配的 ASide 的现有 ListPairing，如果有，则设置 BSide。

如果不存在具有匹配 ASide 的现有 ListPairing，则仅使用 BSide 集实例化一个新的 ListPairing（ASide 为空白。）

但是，考虑到所有必需的“FindFirst”调用，我觉得这不是最有效的方法。（这些列表可能长达数万个项目。）

但是，将这些列表合并一次会产生以下值...

```
1, 2, 3, 4, 5, 6, 8, 9, 10 (Note there is no #7) 
```

我的想法是以某种方式使用值的有序联合，然后同时“遍历”两个列表，根据需要建立 ListPairings。这消除了对 FindFirst 的重复调用，但我想知道这是否是最有效的方法。

想法？

## 更新

人们建议这是使用 LINQ 获取完整外部联接的副本，因为结果是相同的......

我***不是***在*LINQ*完全外部连接之后。我追求高性能算法。

因此，我已经更新了这个问题。

我提出这个问题的原因是执行该功能所需的 LINQ 对我们的需求来说太慢了。在我们的模型中，实际上有四个列表，每个列表可以有数万行。这就是为什么我在最后建议使用 ID 的“联合”方法来获取要遍历的唯一“键”列表，但我认为发布的答案与您一样，但使用枚举器是一种更好的方法不需要预先提供 ID 列表。这将产生一次通过列表中所有项目的单次传递，这将轻松胜过基于 LINQ 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:48:34.820

结果并没有我希望的那么整洁，但是如果两个输入列表都已排序，那么您可以一起浏览它们，比较每个列表的头部元素：如果它们相等，则您有一对，否则发出最小的一个并推进该列表。

```
public static IEnumerable<ListPairing> PairUpLists(IEnumerable<int> sortedAList,
                                                   IEnumerable<int> sortedBList)
{
    // Should wrap these two in using() per Servy's comment with braces around
    // the rest of the method.
    var aEnum = sortedAList.GetEnumerator();
    var bEnum = sortedBList.GetEnumerator();
    bool haveA = aEnum.MoveNext();
    bool haveB = bEnum.MoveNext();

    while (haveA && haveB)
    {
        // We still have values left on both lists.
        int comparison = aEnum.Current.CompareTo(bEnum.Current);
        if (comparison < 0)
        {
            // The heads of the two remaining sequences do not match and A's is
            // lower. Generate a partial pair with the head of A and advance the
            // enumerator.
            yield return new ListPairing() {ASide = aEnum.Current};
            haveA = aEnum.MoveNext();
        }
        else if (comparison == 0)
        {
            // The heads of the two sequences match. Generate a pair.
            yield return new ListPairing() {
                    ASide = aEnum.Current,
                    BSide = bEnum.Current
                };
            // Advance both enumerators
            haveA = aEnum.MoveNext();
            haveB = bEnum.MoveNext();
        }
        else
        {
            // No match and B is the lowest. Generate a partial pair with B.
            yield return new ListPairing() {BSide = bEnum.Current};
            // and advance the enumerator
            haveB = bEnum.MoveNext();
        }
    }
    if (haveA)
    {
        // We still have elements on list A but list B is exhausted.
        do
        {
            // Generate a partial pair for all remaining A elements.
            yield return new ListPairing() { ASide = aEnum.Current };
        } while (aEnum.MoveNext());
    }
    else if (haveB)
    {
        // List A is exhausted but we still have elements on list B.
        do
        {
            // Generate a partial pair for all remaining B elements.
            yield return new ListPairing() { BSide = bEnum.Current };
        } while (bEnum.MoveNext());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:24:27.997

```
var list1 = new List<int?>(){1,2,4,5,6,8,9};
var list2 = new List<int?>(){2,3,4,6,8,9,10};

var left = from i in list1
            join k in list2 on i equals k
            into temp
            from k in temp.DefaultIfEmpty()
            select new {a = i, b = (i == k) ? k : (int?)null};

var right = from k in list2
            join i in list1 on k equals i
            into temp
            from i in temp.DefaultIfEmpty()
            select new {a = (i == k) ? i : (int?)i , b = k};

var result = left.Union(right); 
```

如果您需要与您的示例相同的顺序，那么您将需要提供一个索引和顺序（然后删除重复项）

```
var result = left.Select((o,i) => new {o.a, o.b, i}).Union(right.Select((o, i) => new {o.a, o.b, i})).OrderBy( o => o.i);

result.Select( o => new {o.a, o.b}).Distinct(); 
```

# ios - iOS - 按下按钮时未调用方法

> ID：15913687
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:02.220
> 
> 标签：ios, xcode, storyboard

我目前在我正在处理的应用程序中有一个按钮，当我按下按钮时，它似乎在按下时没有调用该方法。我以为添加了所有正确的代码，并正确连接了所有内容，但似乎并非如此。

**ViewControllerRootHome.h**

```
@property (weak, nonatomic) IBOutlet UIButton *btndev;

- (IBAction)showDev:(id)sender; 
```

**ViewControllerRootHome.m**

```
@synthesize btndev = _btndev;

- (IBAction)showDev:(id)sender {

    NSLog(@"dev button pressed");
    //dev button pressed
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    ViewControllerDev *dev = (ViewControllerDev *) [storyboard instantiateViewControllerWithIdentifier:@"dev"];
    [self presentModalViewController:dev animated:YES];
    NSLog(@"dev button press End");
} 
```

执行甚至没有到达方法中的第一个日志语句。

事情是这样安排的，

在旁注中，读取“日志”的按钮似乎可以正常加载场景，但无论出于何种原因，“开发”按钮都不想调用该方法/加载场景。

哦，一切的源代码都可以在这里找到，[https://github.com/ipatch/KegCop](https://github.com/ipatch/KegCop)

![接线](https://i.stack.imgur.com/La20D.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:07:05.197

该按钮工作正常，所以如果您遇到问题，我会向您推荐 AliSoftware 关于确保清理您的构建的评论。但是，如果您查看方法名称的左侧，当正确连接`showDev`时，您会看到一个实心的项目符号：`IBOutlet`

![在此处输入图像描述](https://i.stack.imgur.com/b5mEJ.png)

如果您将其与另一种方法（此方法）进行比较，`saveMasterEmail`则当前未正确连接，方法左侧的空圆圈证明了这一点：

![在此处输入图像描述](https://i.stack.imgur.com/U9fRO.png)

无关，您的代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewControllerDev *dev = (ViewControllerDev *) [storyboard instantiateViewControllerWithIdentifier:@"dev"];
[self presentModalViewController:dev animated:YES]; 
```

可以简化为：

```
UIViewController *dev = [self.storyboard instantiateViewControllerWithIdentifier:@"dev"];
[self presentModalViewController:dev animated:YES]; 
```

或者，更简单的是，为那个按钮定义一个 segue，你不需要对代码做任何事情。

最后，我会确保避免场景之间的循环引用。您不应该从to再从to进行模态搜索（或`presentViewController`or `presentModalViewController`）。如果您从to进行模态转换，您应该调用to return to 。否则，您将有两个浮动实例。`A``B``B``A``A``B``dismissViewControllerAnimated``A``A`

# java - 在 AlertDialog 中调用方法时出错

> ID：15913688
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:08.633
> 
> 标签：java, android, eclipse, variables, methods

我收到以下错误：“无法引用以不同方法定义的内部类中的非最终变量”

我应该具体改变什么来避免它？

我正在关注 AlertDialog：

```
new AlertDialog.Builder(view.getContext())
            .setIcon(android.R.drawable.ic_dialog_alert)
            .setTitle("Confirm")
            .setMessage("Are you sure?")
            .setPositiveButton("Yes", new DialogInterface.OnClickListener()
            {
            @Override
            public void onClick(DialogInterface dialog, int which) {
            //I need some actions to be done here
            }})
            .setNegativeButton("No", null)
            .show(); 
```

我需要在 AlertDialog 中完成此操作：

```
 String st = editTextSt.getText().toString();
        String sp = editTextSp.getText().toString();
        SQLiteDbHelper database2 = new SQLiteDbHelper(this);
        SQLiteDatabase database = database2.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(SQLiteDbHelper.COLUMN_NAME_SP, sp);
        values.put(SQLiteDbHelper.COLUMN_NAME_ST, st);
        long insertId = database.insert(SQLiteDbHelper.TABLE_NAME, null, values); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:30:30.967

将有问题的变量声明为 final。

您可能只需要进行最终的 EditText editTextSt ... 如果您有更多问题，请告诉我。此外，如果是这种情况，请附上完整的错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:30:57.233

这与 Android 无关，这是直接从匿名类中的另一个类中使用对象的特定问题。如果你要这样做，他们共享的对象**必须**声明为`final`.

```
class TypeA
{
 final Object t = new Object();
 new TypeB()
 {
   t ... blah
 }
} 
```

在上面的例子中，TypeA 是 TypeB 的匿名类的封装类，它们共享任何名为 t 的对象：

在这个匿名类中对 t（属于 TypeA）的任何引用都必须是`final`，因为 TypeB 类的当前上下文无法解析为对象，因为它是匿名的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T02:28:09.670

将变量声明为 as`final`意味着它的值将在其整个生命周期中固定。所以你不能改变`st`and的值`sp`。

还有另一种解决方案。

声明`st`和`sp`作为全局变量。然后可以在 AlertDialog 中访问它们，即使它们不是最终的。

全局变量是在类中的任何函数之外声明的变量。

例子：

```
public class Example
{

String sp,st;
SQLiteDatabase database, database2;
void func()
{
 new AlertDialog.Builder(view.getContext())
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setTitle("Confirm")
        .setMessage("Are you sure?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener()
        {
        @Override
        public void onClick(DialogInterface dialog, int which) {
          String st = editTextSt.getText().toString();
    String sp = editTextSp.getText().toString();
    database2 = new SQLiteDbHelper(this);
    database = database2.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(SQLiteDbHelper.COLUMN_NAME_SP, sp);
    values.put(SQLiteDbHelper.COLUMN_NAME_ST, st);
    long insertId = database.insert(SQLiteDbHelper.TABLE_NAME, null, values);
        }})
        .setNegativeButton("No", null)
        .show();

  } 
```

现在可以更改 sp 和 st 的值，即使它们不是最终的，仍然可以在对话框中访问它们。

# c# - 反序列化后对象引用似乎不同

> ID：15913690
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:23.927
> 
> 标签：c#, windows-phone-7, datacontractserializer, pass-by-reference

通过 DataContracts 序列化自定义数据对象并恢复它们时，我遇到了一个奇怪的问题。我有以下发生问题的类：

```
[DataContract]
public class ProjectManager
{
    // list of projects
    [DataMember]
    public List<Project> ProjectList { get; set; }

    // active project
    [DataMember]
    public Project ActiveProject { get; set; }

    // instance variable
    [DataMember]
    private static ProjectManager instance = null; 
```

ActiveProject 保存对 ProjectList 中一个对象的引用。问题是，在一种情况下，ActiveProject 中保存的引用似乎不等于 ProjectList 中的引用，尽管列表中只有一个。如果我更改我的 ActiveProject，我在 ProjectList 中的对象不会更改。

仅在反序列化数据后才会出现此问题，我不知道如何防止此错误发生。这种行为是否可能，或者我的代码中是否必须存在我尚未找到的交叉引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:42:52.803

通常反序列化不会处理引用相同对象的 2 个对象。相反，它可能会在每个参考位置创建一个新对象。

尝试二进制序列化/反序列化。

如果仍然失败，您可以创建自己的序列化，并创建对象引用列表。一旦你用一个引用序列化一个对象，你之前已经存储过（之前序列化），那么你可以添加一个特殊的标签，这样你就可以在反序列化过程中重建对同一对象的引用。

但这是我计划添加到我的序列化的下一件事，所以.. 自定义序列化的时间可能太长了。希望二进制序列化就足够了

另一种解决方法是使用列表并使用整数（引用正确的索引号）而不是第二个引用。或构建任何其他变量来帮助您重建双重引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:48:17.683

DataContractSerializer 支持保留对象引用；请参阅[此重载中](http://msdn.microsoft.com/en-us/library/aa344262.aspx)`preserveObjectReferences`的构造函数参数。您可能需要更改创建序列化程序的方式来支持这一点。

# c# - 选择 gridview 行并更改该行的颜色

> ID：15913692
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:44.377
> 
> 标签：c#, asp.net

我有一个gridview，我希望gridview的行在用户单击该行时变为蓝色，如果用户选择单击另一行则变为原始颜色。所以对于.e,g

```
Col1   Col2

1       Test1
2       Test2 
```

如果用户单击 row1，则第 1 行应为蓝色，但如果用户选择单击 row2，则第 1 行应返回其原始颜色，第 2 行变为蓝色。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:02:34.887

默认情况下，它将您单击的单元格设置为蓝色。所以要让整行变成蓝色，有一个简单的方法：

单击您的网格视图并转到屏幕右侧的属性。gridView将有一个*Selection Mode*属性将其设置为***FullRowSelect***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:32:52.427

我在 SelectedRowStyle BackColor 中。您可以在那里设置所选行的颜色。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:01:09.883

将`SelectedRowStyle`属性添加到您的`GridView`：

```
<asp:GridView ID="GridView1" runat="server">      
     <SelectedRowStyle BackColor="Blue" />  Add this in your Gridview markup
        <Columns>  
          //
        </Columns>          
</asp:GridView> 
```

# php - 无法在脚本函数中传递 php 变量

> ID：15913693
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:52.677
> 
> 标签：php, javascript, html, dreamweaver

我正在使用 id's-id1$i(when,$i=1) 和 id1$i(when,$i=2) 创建两个文本区域。我想要的是，只要用户更改其中任何一个的文本它应该在警报框中显示该文本的文本区域。这是我的代码：

```
<?php
$i=1;
while($i)
    {
    echo '<textarea id="id1$i" onchange=Display("id1$i")></textarea>';
    echo "id1$i..<br>";
        if($i==2){break;}
     $i=2;
     }
?>
<input name="Submit" type="submit" value="Submit"/>
<script>
function Display(id1$i)
         {
             alert(document.getElementById("id1$i").value);
             }
</script> 
```

现在当我尝试运行它时......问题是当我在第一个文本区域框中输入“one”时，它显示“one”，没关系......但是当我在第二个文本区域中输入“two”时框，它仍然显示“一个”...：mad：：mad：：mad：...

我能想到它为什么会发生 lyk dat 的唯一原因是函数 Display(id1$i) 没有采用 $i=2 的值...请帮助！！..

如果我使用像“id11”和“id12”这样的专有名称（即我不在我的代码中的任何地方使用变量$i，或者说我是否对所有内容都进行了编码）..那么代码工作正常..它同时显示“一”“二” “，分别..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:31:15.293

你不能像那样嵌入 PHP。您需要使用`<?php ?>`标签，因此您需要更改：

```
function Display(id1$i)
// ...
alert(document.getElementById("id1$i").value); 
```

至：

```
function Display(id1<?php echo $i; ?>)
// ...
alert(document.getElementById("id1<?php echo $i; ?>").value); 
```

要直接在字符串中使用变量，您只能使用`"`，因此您可以执行以下操作之一：

```
'<textarea id="id1'. $i .'" onchange=Display("id1'. $i .'")></textarea>'
// or
"<textarea id=\"id1$i\" onchange=Display(\"id1$i\")></textarea>" 
```

# symfony-2.1 - Symfony 2：显示表格？

> ID：15913694
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:54.513
> 
> 标签：symfony-2.1, symfony-2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:15:45.803

第三方建议“写一个 Twig 扩展而不是使用 Symfony 控制器怎么样？”

[http://symfony.com/doc/current/cookbook/template/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

# neo4j - [topic neo4j REST API]无法删除给定节点的所有条目

> ID：15913695
> 
> 赞同：1
> 
> 时间：2013-04-09T22:28:59.703
> 
> 标签：neo4j

我创建节点

> 节点[16]{name:"test01",key01:"value01",key02:"value02"}

当我执行

```
curl -i -H "Accept: application/json" -X DELETE http://127.0.0.1:7474/db/data/index/node/kvnode/16 
```

我仍然看到节点信息：

> 节点[16]{name:"test01",key01:"value01",key02:"value02"}

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:06:32.760

您的 REST 调用不正确，它只删除索引，而不是节点。如果要删除节点，请使用以下命令：

```
curl -i -H "Accept: application/json" -X DELETE http://127.0.0.1:7474/db/data/node/16 
```

# python - 如何在 django 中获取模型的本机类型

> ID：15913702
> 
> 赞同：0
> 
> 时间：2013-04-09T22:29:27.993
> 
> 标签：python, django, django-models

我需要在应用程序中动态检查模型中所有字段的 python 类型，也就是说，假设我有：

```
class MyModel(model.Model):
    field1 = model.CharField(max_length=20)
    field2 = modelf.IntegerField()
    ...
    fieldn = models.BooleanField() 
```

我需要完成类似的事情：

```
>>> for field in MyModel._meta.fields:
•••     field.type
•••
<type 'str'>
<type 'int'>
... 
```

显然`field.type`是不存在的东西，但我需要检索模型在创建/更新时应该接受的内置类型。ForeignKeys 和 M2M 是这个问题可以忽略的特殊情况。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:41:37.610

抱歉，`Field`s 不包含此类信息。该`to_python`方法用于将值转换为预期的 Python 数据类型，并且可以自由地返回它喜欢的任何内容。

您可以自己构建类型映射，显然仅限于您知道的字段类型：

```
FIELD_PYTHON_TYPES = {
    'AutoField': int,
    'BooleanField': bool,
    'CharField': unicode,
    'DateField': datetime.date,
    'DateTimeField': datetime.datetime,
    'DecimalField': decimal.Decimal,
    'FloatField': float,
    'IntegerField': int,
    'BigIntegerField': int,
     ... # etc.
} 
```

并从中查找类型`get_internal_type`：

```
for field in MyModel._meta.fields:
    FIELD_PYTHON_TYPES[field.get_internal_type()] 
```

但即使，例如，内置`NullBooleanField`可以使用两种类型（`bool`和`NoneType`），所以它远不是一个通用的解决方案。

# c# - 在 WinRT 应用程序中处理来自外部编辑器的退出/更改/等

> ID：15913714
> 
> 赞同：1
> 
> 时间：2013-04-09T22:30:32.937
> 
> 标签：c#, windows-runtime, windows-store-apps

我有一个 WinRT 应用程序，它部分地从在线服务下载文件并管理文件的本地副本。当存储在本地时，文件需要加密，但在编辑/查看期间，就像在外部编辑器（office、pdf 等）中发生的那样，它们需要被解密。

WinRT API 设置中有没有办法启动外部浏览器（即 Windows.System.Launcher.LaunchFileAsync）并在该应用程序关闭时以某种方式获得通知？

现在，我可以很好地下载和加密文件，但是当我想查看它时，我必须解密它并启动外部编辑器，而无法知道（甚至必须再次运行）何时完成，以便我可以重新 -加密文件。

理想情况下，我想以某种方式将外部应用程序绑定到我的应用程序，以便在关闭外部编辑器之前我的应用程序不可用，但会在应用程序关闭或任何其他创造性解决方案时接受通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:49:26.020

您的应用场景类似于 Microsoft 的 skydrive 应用。它从 skydrive 服务下载文件，与文件打开和文件保存选择器集成。

尝试与文件选择器合同集成。

你可以从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465174.aspx)开始。还有一些示例代码可用于实现文件选择器合同。

# c# - c# 位图记录到字节

> ID：15913735
> 
> 赞同：0
> 
> 时间：2013-04-09T22:32:20.970
> 
> 标签：c#, bitmap

我正在用 c# 创建一个程序来记录屏幕并通过套接字连接将其发送到服务器。我的问题是我需要将其转换为字节才能发送。这是我来自客户端的代码，因此正在录制屏幕的计算机：

```
 public Form1()
    {
        InitializeComponent();
    }

    static int port = 443;
    static IPAddress IP;
    static Socket server;

    private Bitmap bm;
    private string PCname = SystemInformation.ComputerName;
    private string UserName = SystemInformation.UserName;

    private void btnStart_Click(object sender, EventArgs e)
    {
        // Connect to server
        IP = IPAddress.Parse("127.0.0.1");
        server = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        server.Connect(new IPEndPoint(IP, port));

        // Record the screen
        timer1.Start();

        // Send screen to server
        byte[] sdata = Encoding.Default.GetBytes(pictureBox1);
        server.Send(sdata, 0, sdata.Length, 0);
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        // Take screenshot
        bm = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
        Graphics graphics = Graphics.FromImage(bm as Image);
        graphics.CopyFromScreen(0, 0, 0, 0, bm.Size);
        pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;

        // Show it in picturebox
        pictureBox1.Image = bm; 
    }

    private void btnStop_Click(object sender, EventArgs e)
    {
        timer1.Stop();
        server.Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:39:40.357

我不完全确定这是否是您要找的东西，但是...

这是一种将 a 转换为`Bitmap`PNG 格式的“文件字节”的方法。

```
byte[] BitmapToBytes(Bitmap bitmap)
{
    using (var stream = new MemoryStream())
    {
        bitmap.Save(stream, ImageFormat.Png);
        return stream.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:30:41.913

这是您提供的代码的基本操作顺序：

```
用户单击“开始”按钮
连接到服务器
启动计时器
将图像控件的内容发送到服务器
...
启用计时器时重复：
    定时器间隔到期
    计时器处理程序将屏幕图像捕获到图像控制

```

这有几个问题：

1.  在您将图像控件的内容发送`pictureBox1`到服务器时，它还没有被捕获的屏幕图像填充。

2.  您只向服务器发送一次数据，这似乎不是您的目标。

如果您的目标是只发送一次屏幕内容，那么您不需要计时器。将计时器处理程序中的代码`timer1_Tick`放入您的`btnStart_Click`方法中以代替`timer1.Start()`调用。

如果要多次发送，则需要将发送代码放入计时器处理程序中。在这种情况下，将发送代码`btnStart_Click`从`timer1_Tick`.

此外，您需要某种方式让服务器识别特定图像的数据已完成，以便它可以处理该图像。换句话说，您需要某种方式来构图图像 - 保证**不会**出现在图像本身的数据中的数据序列，或者至少是一个标头，告诉您的服务器要读取多少数据作为要处理的有效图像.

我强烈建议您采纳 Timothy Shields 的建议，并在发送之前使用 PNG 压缩数据。只要服务器知道需要压缩数据，它就可以在接收到它时轻松地将其解压缩回位图。使用 PNG 将在不丢失任何信息的情况下为您节省**大量**网络时间，而压缩和解压缩阶段只会增加一点开销。

# git - Git rebase - 远程删除一个文件，本地 rebase 将更改应用于另一个文件

> ID：15913737
> 
> 赞同：2
> 
> 时间：2013-04-09T22:32:38.080
> 
> 标签：git, rebase, git-rebase

简单场景：

偏僻的：

```
git init
touch a.py && git add a.py && git commit -am "Add a.py"
touch b.py && git add b.py && git commit -am "Add b.py" 
```

当地的：

```
git clone REMOTE_URL
echo "Bob Loblaw" >> a.py && git commit -am "Append to a.py" 
```

偏僻的：

```
git rm a.py && git commit -am "Remove a.py" 
```

当地的：

```
git fetch origin
git rebase origin/master 
```

输出：

```
$ cat b.py
Bob Loblaw 
```

为什么我对 a.py 的本地更改应用于 b.py 而不是发生 rebase 冲突，例如

```
CONFLICT (delete/modify): a.py deleted in HEAD and modified in Append to a.py. Version Append to a.py of a.py left in tree. 
```

如果它有所作为，我使用的是 git 版本 1.7.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:07:24.417

我以前听说过这个奇怪的问题。

问题源于其内容相同的`a.py`事实`b.py`。

Git使用基于内容的启发式方法来检测文件重命名，在您的情况下，启发式方法将删除`a.py`与重命名为相同的 to混淆了`b.py`，因为它们都是空的并且应用的更改非常小。

`recursive`发生这种情况是因为根据[文档](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html)，默认的合并策略，

> 可以检测和处理涉及重命名的合并

显然，这在现代版本的 git 中已得到修复/改进，因为在我的机器上我无法重现 Git v1.8.1.3 的问题。

您可以更新您的 Git（强烈建议）或尝试使用不处理重命名的不同合并策略，例如`resolve`（尽管它有一些缺点，请阅读文档以获取更多信息）。

**编辑**

另一种选择是使用合并策略的`--rename-threshold`选项，将其设置为，根据will的文档`recursive``M100%`[`git-diff`](https://www.kernel.org/pub/software/scm/git/docs/git-diff.html)

> 将检测限制为精确重命名

git 命令将是

```
git rebase -Xrename-threshold=M100% origin/master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:46:58.617

按照您的步骤操作时，我在变基期间确实遇到了合并冲突（应该是这样）：

```
gittest/loc$ git rebase origin/master
[...]
CONFLICT (modify/delete): a.py deleted in HEAD and modified in Append to a.py.
Version Append to a.py of a.py left in tree.
Failed to merge in the changes. 
```

您可能做了一些微妙的不同 - 或者您的 git 安装有问题或 git 中的错误（尽管这似乎不太可能）。

我在 Debian Linux 上使用了 git 1.8.1.1。

# jquery - 在 Ajax 请求之前取消绑定 ASP UpdatePanel 中的事件以防止内存泄漏

> ID：15913738
> 
> 赞同：1
> 
> 时间：2013-04-09T22:32:38.563
> 
> 标签：jquery, asp.net, updatepanel, unbind, teardown

ASP UpdatePanel 中的 jQuery 小部件需要在 ajax 请求后重新初始化是一个常见问题，但是我的问题是在替换 UpdatePanel 中的 HTML 之前事件没有解除绑定。每当您调用 .html("...") 或 .remove() 时，jQuery 都会为您解决这个问题，但 UpdatePanel 不使用 jQuery。

我有弹出元素（在 UpdatePanel 内部），当用户在它们外部单击时需要隐藏这些元素，因此我制作了一个 jQuery 特殊事件来检测何时发生这种情况，但是在 Ajax 请求之后永远不会调用 Teardown 函数。因此，随着时间的推移，不再附加到文档的元素上的事件处理程序越来越多。

我可以让我的小部件初始化函数（在每个 Ajax 请求之后运行），检查分离的元素并取消绑定它们的事件，但我担心这可能会导致其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:21:23.083

虽然我用之前的答案解决了这个问题，但这篇关于代码项目的文章可能会对其他有类似问题的人有所帮助：http: [//www.codeproject.com/Articles/34348/jQuery-Memory-Leak-in-UpdatePanel](http://www.codeproject.com/Articles/34348/jQuery-Memory-Leak-in-UpdatePanel)

首先它建议使用`Sys.Application.add_load`which 在页面加载和 ASP Ajax 请求之后运行，尽管它不会解决您的内存泄漏。

其次，注意如何通过 javascript 闭包绑定事件。但是，这可能无法完全解决 UpdatePanel 的特定问题。

第三，您可以`dispose`向 HTML 元素添加一个函数，该函数在 ASP 使用 ajax 请求销毁 HTML 时执行。dispose 函数应该取消绑定事件处理程序，任何删除对该元素的任何其他引用。这应该是 ASP UpdatePanel 内存泄漏的最后一根钉子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:01:10.847

似乎有一个简单的解决方案，即在弹出窗口显示时绑定“clickout”事件，在弹出窗口隐藏时取消绑定。由于 ajax 请求，这仍然可能导致单个事件不会被解除绑定，但这是可以容忍的。

# jquery - 在 jQuery 中发出 parent()

> ID：15913741
> 
> 赞同：4
> 
> 时间：2013-04-09T22:32:48.087
> 
> 标签：jquery, asp.net, html, csquery

想象一些 HTML 代码：

```
<div class="container">  
   <div class="first">
     <a class="result"> </a> 
   </div>

   <div class="second">
      <a class="result"> </a> 
  </div>
</div> 
```

和

```
$("a.result:first").parent().select('a'); 
```

我认为它必须在 div.first 中返回一个，对吗？

因为当我在 CsQuery 中执行此逻辑时，它会在 div.first 和 div.second 中返回 a。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:50:06.710

这就足够了：

```
$("a.result:first")   // will return a in div.first 
```

`.parent().select('a')`似乎是不必要的。

[**小提琴**](http://jsfiddle.net/mohammadAdil/BRDqV/1/)

# javascript - Raphael 在屏幕上拖动文本和 tspan dy

> ID：15913742
> 
> 赞同：1
> 
> 时间：2013-04-09T22:32:48.627
> 
> 标签：javascript, raphael

这是我在画布上移动文本的代码：

```
paper
    .text(self.x, self.y, "Jeaaaaaaaaaaaaaaah")
    .attr({
      fill: "#000",
      dy: 0,
      dx: 0,
      font: "italic 20px Helvetica"
    })
    .drag(
    function(dx, dy) {
      this.attr({x: self.x + dx, y: self.y + dy, dy:0, dx:0});
    },
    function () {
      this.attr({x: self.x, y: self.y, dy:0, dx:0});
    },
    function () {
      self.x = this.attr("x");
      self.y = this.attr("y");
    }
  ); 
```

它的工作原理是我可以拖动文本，但前两次我拖动它的位置完全错误。

这是由这个给出的：

```
<text ....><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="120">Jeaaaaaaaaaaaaaaah</tspan></text> 
```

前两个拖放后变成

```
<text ....><tspan style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" dy="8.9734">Jeaaaaaaaaaaaaaaah</tspan></text> 
```

它现在是可拖动的，并且它进入了确切的位置。有人知道如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:21:08.177

我遇到了类似的问题，最终手动更改了 tspan 的 dy 属性：

$('tspan').removeAttr('dy').attr('dy', 9);

当然，它会改变所有 tspan ty 属性。

# perl - Perl 和 Cron 用户拥有的文件的权限被拒绝

> ID：15913745
> 
> 赞同：2
> 
> 时间：2013-04-09T22:32:54.483
> 
> 标签：perl, apache, logging, cron, permission-denied

我进行了广泛搜索，找不到任何特别像这样的东西。

我在一个目录中拥有一个由“apache”拥有和可写的日志文件，该目录也由“apache”拥有和可写：

```
-rw-rw-r-- 1 apache apache 0 Apr  9 16:43 /var/log/apache2/load.log 
```

我有一个带有以下内容的 Perl 程序“load.pl”：

```
my $log = "/var/log/apache2/load.log";
my $error = "";

#...doing useful stuff here, where $error might get set

if ($error && $log)
{
    if (open (LOG, '>>$log'))
    {
            print LOG "[".localtime(time)."] ".$error."\n";
            close (LOG);
    }
    else
    {
            my $reason = $!;
            $error .= "Could not open log file as ".getpwuid($>)." (really ".getpwuid($<)."): $reason";

            my $subject = "load.pl could not write to $log";
            $error .= email($mailto, $replyto, $subject, $error);
    }
} 
```

其中 $mailto、$replyto 和 email() 子例程已定义并正常工作。

我通过 crontab 运行这个程序，如下所示：

```
*/1 * * * *     apache  flock -x -w 10 /home/web/load.txt -c "perl /home/web/load.pl> /home/web/load.txt 2>&1" 
```

Load.txt 获取 STDOUT，这是一些从 JavaScript 调用的 JSON 格式的网站负载统计信息，而任何捕获的错误都应该写入 load.log。一切正常，除了日志写入。

我收到以下输出的电子邮件...

```
Subject: load.pl could not write to /var/log/apache2/load.log
Could not open log file as apache (really apache): Permission denied 
```

很明显，Perl 将这个程序作为“apache”执行——既有效又真实的 UID。但是我在 apache 拥有的目录中获得了 apache 拥有的文件的权限被拒绝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:13:10.190

使用单引号不会扩展变量：

```
if (open (LOG, '>>$log')) 
```

请改用双引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:02:26.583

还有两件事要尝试：

```
lsattr /var/log/apache2/load.log 
```

这将检查您的日志文件的扩展属性。其中一个属性是不可变的，它使您的文件无论用户权限如何都是只读的。

和

```
ls -Z /var/log/apache2/load.log 
```

这将向您显示 SELinux 上下文，并且仅与基于 RedHat / Hardened Gentoo 的发行版相关（在这种情况下，您还应该在系统日志中收到更多错误和警告）

# ruby - 在所有测试完成后，应该使用什么 RSpec 挂钩来执行清理任务？

> ID：15913747
> 
> 赞同：3
> 
> 时间：2013-04-09T22:32:58.790
> 
> 标签：ruby, rspec, rake, rspec2

我的项目中有这种情况 - 我有一个代表测试期间使用的浏览器的 Singleton 类：

```
class Browser
  include Singleton
  def initialize
    @browser = Watir::Browser.new :ff
  end

  def goto url
    @browser.goto url
  end

  def close
    @browser.close
  end
end 
```

有了这个 rakefile，我想确保在测试完成后浏览器关闭：

```
desc "default test task"
task :test_all do
  Rake::Task[:all_rspec_tests].invoke
  Rake::Task[:close_browser].invoke
end

desc "runs all rspec tests"
RSpec::Core::RakeTask.new(:all_rspec_tests) do |t|
  # run all rspec tests according to pattern for filename
  # tests make use of Singleton class representing browser
end

desc "closes browser used during tests"
task :close_browser do
  Browser.instance.close
end 
```

但这并没有按预期工作 - RSpec 运行程序实例化它自己的单例对象实例，而 close_browser 任务没有看到。因此，当 close_browser 任务被安排时，另一个浏览器实例被实例化并立即关闭，但在测试期间使用的浏览器实例保持打开状态。在所有 RSpec 测试运行浏览器关闭后，我该如何实现？我想这必须通过 RSpec 全局挂钩的一些配置来完成？有人会给我举一个这样的钩子的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T23:26:46.940

你不想在 Rake 任务中做这些事情。如果您只想让一个浏览器实例从头开始并持续进行所有测试，您可以`spec/spec_helper.rb`使用`before :suite`钩子来实现。就像是：

```
RSpec.configure do |config|
  # (other RSpec config)

  config.before(:suite) do
    Browser.initialize # or whatever
  end

  config.after(:suite) do
    Browser.close
  end

end 
```

这将在开始时启动浏览器一次并在结束时关闭它。您更有可能只对某些测试文件或测试集合使用 before 和 after 挂钩。从[RSpec 文档](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/hooks/before-and-after-hooks!)开始。

您可能要考虑使用[Capybara](https://github.com/jnicklas/capybara)代替 Watir；它与 RSpec 很好地集成，您不必手动执行这些操作。还有[watir-rspec](https://github.com/watir/watir-rspec)，但我自己从未使用过。无论如何，这是一个已解决的问题。找到可以帮助您的东西比自己设置要容易得多。

# ios - iOS 应用，相同的功能和代码库，不同的 UI

> ID：15913749
> 
> 赞同：0
> 
> 时间：2013-04-09T22:33:02.523
> 
> 标签：ios, user-interface, app-store, submit

我有一种情况，许多客户端所需的应用程序功能相同。出于营销目的，客户希望将应用程序完全重新命名为各自公司的颜色——这意味着不同的启动图标、显示名称、皮肤等。

从代码的角度来看，这很容易处理，但从 App Store 的角度来看，我有点不确定是否每个版本都需要作为单独的应用程序提交给 Apple，或者有没有办法将单个版本提交给体现不同 UI 变化的应用商店

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:42:07.160

唯一不可行的是图标。App Store 上的应用程序不允许更改其图标。

# grails - Grails Tomcat 空白页

> ID：15913750
> 
> 赞同：0
> 
> 时间：2013-04-09T22:33:10.137
> 
> 标签：grails, tomcat7, gsp

嗨，我已经部署了我的 grails webapp，我认为一切都很好，但似乎任何未从应用程序内请求的 GSP 页面都只会在我部署的 tomcat 7 上显示一个黑色页面。

我可以登录并使用 90% 的功能，但不能使用该页面。

```
 http:somewebsite.co.uk/app/invite/index 
```

我可以从 webapp 中访问

```
 http:somewebsite.co.uk/app/invite/index 
```

但我无法访问它，只能在浏览器中输入 URL。

但是，这在我的 IDE 中确实有效。

在我拥有的控制器的顶部。

```
 static allowedMethods = [index: 'GET'] 
```

我不需要登录即可访问。

像任何人一样解决了这个问题？

我没有进行大量测试，问题与这段代码有关：

```
 def index() {
            def em   =   params.email
    if (em){

    println("params.email : " + em)
    if (User.findByEmail(em)){

        redirect controller:"public", action:"index"

      }
    }
      [email: em]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:23:05.517

错误出现在 index.gsp 页面中，我使用布局并且名称设置为 oneBlock，而不是 oneblock。

# backbone.js - Backbone.js：禁止主干历史

> ID：15913752
> 
> 赞同：0
> 
> 时间：2013-04-09T22:33:17.770
> 
> 标签：backbone.js, backbone-relational, backbone-routing

我来到这个网站是为了研究一个关于否定 Backbone.js 对某些元素的历史的问题。谢天谢地，我遇到了这个答案：[here](https://stackoverflow.com/questions/9338207/how-do-i-disable-backbone-history-but-still-allow-hash-based-routing)。

虽然它为我提供了解决方案，但最终的结果是部分的。

**问题：**

我正在使用 Backbone.js 进行导航。我导航到一条名为“投资组合”的路线，然后显示一些图像，然后可以再次单击以查看信息。为了呈现这些信息，我让它通过另一条路线。上述决议让我分配以下代码来否定这些投资组合链接成为历史的一部分：

```
$(this).bind('click', function(e){
    theSiteController.navigate('portfolio/portfolioSelection/' + i, {trigger:true, replace: true }); 
}); 
```

我已将**replace: false**应用于**.navigate**并且它起作用了：每当我点击“后退”按钮时，我都会跳回到我来自的原始页面。但是，当我在浏览器中点击“前进”按钮时，它会将我指向我之前点击过的投资组合链接，如下所示：

```
#portfolio/portfolioSelection/4 
```

我将它设置为不同的视图，所以我想知道这是否与它有关。

**问题：**

当我在浏览器中单击“转发”按钮时，我将如何重新路由它以使其到达

`#portfolio`

代替

```
#portfolio/portfolioSelection/4 
```

要查看该网站，请单击[此处](http://www.tsaconas.com/html5/bootstrap/)。

如果这个问题已经得到解答，我深表歉意，但我似乎找不到合适的解决方案。

预先感谢您的帮助！

# ruby-on-rails - Rails 中的 HABTM 或 HM/HMT 自联接

> ID：15913758
> 
> 赞同：0
> 
> 时间：2013-04-09T22:33:46.553
> 
> 标签：ruby-on-rails, has-many, self-join, has-and-belongs-to-many

我有一个`Users`模型，希望用户在发布内容时能够`Subscribe`向另一个模型`User`发送通知。

这是一种 has_many 自连接和 many_to_many 自连接。

我需要能够输入`@user.subscribers`和`@user.subscriptions`。

因此，从某种意义上说，默认情况下，这种关系是双向的。但是，如果to `@user1` `subscribes`，那`@user2`并不意味着可以通过找到。`@user2``subscribed``@user1``@user2``@user1``@user.subscribers`

我看过 Ryan Bates [Railscast on Self-Referential Associations](http://railscasts.com/episodes/163-self-referential-association)。但是，这会创建 1 种方式的自联接。但我认为这并没有留下双方之间可能存在两种关系的事实。

但是，我也看过[有关关联外键的 Rails 指南。](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association_foreign_key)

我意识到我可能可以采用 Ryan Bates 的方式，并建立两个关系，但这似乎是错误的，但我担心第二种方式不会允许一个成为订阅者，一个成为提供者。解决此问题的最“正确”方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:26:00.283

不要把事情复杂化

```
class Subs < ActiveRecord::Base

    belongs_to :subscriber, :class_name => 'User'
    belongs_to :user

end

class User < ActiveRecord::Base

    has_many :subs
    has_many :subscribers, :through => :subs, :source => :subscriber
    has_many :subscriptions, :through => :subs, :source => :user
end 
```

显然，您必须在数据库中设置连接模型。那应该这样做。

# android - Pydev+Eclipse（带有 SL4A）编写完整的 android 应用程序？

> ID：15913767
> 
> 赞同：1
> 
> 时间：2013-04-09T22:34:40.987
> 
> 标签：android, python, eclipse, pydev, sl4a

我正在尝试开发一些 android 应用程序，而我所做的只是使用 PyDev 在 Eclipse 上编写脚本，然后使用 SL4A 将它们传输到我的 Android 手机上。这些工作运行良好并且工作得很好，但我想要一个完整的应用程序（比如你可以从“桌面”单击的应用程序）。我找不到有关如何执行此操作的任何信息。有人可以扔骨头吗？

情人节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:16:05.697

您可以使用 AIDE+sl4a 创建 apk 文件，但它们需要 Python 库 [how-to-create-an-android-app-and-apk-on-android-with-python](http://clusterbleep.net/blog/2012/07/31/how-to-create-an-android-app-and-apk-on-android-with-python/)

# javascript - 如何在Javascript中将日期前滚到指定日期？

> ID：15913769
> 
> 赞同：0
> 
> 时间：2013-04-09T22:34:52.480
> 
> 标签：javascript, jquery, date, date-arithmetic

我正在处理一个表单，该表单需要自动计算以格式（'MMDDYYYY'）提交表单的日期，然后单击两个链接中的一个链接，计算下个月最接近的第一天，以及最近的下个月的第 15 天。

我已经创建了一个脚本，它可以提取日期并将其输出到我需要的格式的变量中，但我需要帮助来计算前滚。

这是我认为需要的逻辑示例：

如果当前日期是 04092013，则在按下标有“即将到来的 1st of Month”的按钮时，将计算变量值 05012013。

如果当前日期是 04092013，则在按下标记为“即将到来的 15 日”的按钮时，将计算变量值 04152013。

如果当前日期为 04162013 或截至当前月末的任何日期，则在按下标记为“即将到来的 15 日”的按钮时，将计算变量值 05152013。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:42:50.403

查看 Date 对象，它应该提供您需要的内容：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

例如，您的前 2 个按钮是这样的：

```
$(function() {
    var date = new Date(2013, 10, 24);

    $("#date").html(date.toString());
    $("#date1").html((new Date(date.getYear(), date.getMonth()+1, 1)).toString());
    $("#date2").html((new Date(date.getYear(), date.getMonth()+1, 15)).toString());
}); 
```

（虽然我确信如果您查看日期文档，有更简单的方法可以做到这一点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:49:32.703

这是一个例子。如果您希望将其作为字符串返回，则必须在最后根据需要对其进行格式化（使用*UTC*）。

如果您输入的日期与您要求的日期相同，它会返回同一天，而不是前进一个月。

```
var date_string = '04092013';
                // MMDDYYYY

function nextNthOfMonth(date_string, n) {
    var date;
    // n to Int, default 1
    n = (+n || 1);
    // date_string to ISO 8601
    date_string = // "yyyy-MM-ddTHH:mm:ssZ"
          date_string.slice(4)
        + '-' + date_string.slice(0, 2)
        + '-' + date_string.slice(2, 4)
        + 'T00:00:00Z';
    // construct date object
    date = new Date(date_string);
    // fix to desired date
    if (n < date.getUTCDate()) { // adjust for month if req.
        date.setUTCMonth(date.getUTCMonth() + 1);
    }
    date.setUTCDate(n);
    return date; // or format as desired
}

nextNthOfMonth(date_string, 1);
// Wed May 01 2013 01:00:00 GMT+0100 (GMT Daylight Time)
nextNthOfMonth(date_string, 15);
// Mon Apr 15 2013 01:00:00 GMT+0100 (GMT Daylight Time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:51:08.250

尝试

```
function getDate() {
    var s = document.getElementById('date').value;
    if(s){
        return new Date(s.substring(4), parseInt(s.substring(2, 4), 10) - 1, s.substring(0, 2))
    }
}

function comingDate(date, day){
    date = new Date(date);
    var cday = date.getDate();
    date.setDate(day);
    if(cday >= day){
        date.setMonth(date.getMonth() + 1)
    }
    return date
}

function f15(){
    var d = getDate();
    var next = comingDate(d, 15);
    console.log(next)
}

function f1(){
    var d = getDate();
    var next = comingDate(d, 1);
    console.log(next)
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/avmca/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:03:40.443

由于您知道日期的格式，请将输入分成几部分：

```
var dateStr = '04092013'
var month = dateStr.substr(0,2);
var day = dateStr.substr(2,2);
var year = dateStr.substr(4,4); 
```

根据您要设置的规则构造一个新的日期：

```
var newDate;
switch(rule)
{
  case 'rule1':
  newDate = new Date(year, month, 1);//first month is 0
  break;
  case 'rule2':
  newDate = new Date(year, month, 15);//first month is 0
  break;
} 
```

*   记得检查一天是否大于 15。

# file-io - VB脚本更新现有文本文件中的现有数字

> ID：15913774
> 
> 赞同：0
> 
> 时间：2013-04-09T22:35:23.257
> 
> 标签：file-io, vbscript

我确信这很简单，但我的编程技能几乎没有。

我有一个包含数字且始终包含数字的文本文件，例如`1`. 我需要一个 VBScript 来始终`1`在该文本文件中添加该数字，更新，保存，然后关闭。新文件应包含`2`.

下次我执行脚本时，文件应该包含`3`等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:03:17.913

假设您指的是 VBScript 而不是 VB.NET，这就是我拼凑的内容：

```
Option Explicit

Dim filename
filename = "C:\Path\To\Your\file.txt"

Dim fso, f, num

Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile(filename, 1) ' for reading
num = CInt(f.ReadAll)
f.Close

Set f = fso.OpenTextFile(filename, 2) ' for writing
f.Write num + 1
f.Close 
```

请记住，该代码中没有错误处理。

# php - 使用 AJAX 打开 JSON 文件

> ID：15913780
> 
> 赞同：0
> 
> 时间：2013-04-09T22:35:45.353
> 
> 标签：php, ajax, json

我想使用 AJAX ASP/PHP 打开和解析一个 JSON 文件，但由于我真的是网络编程的初学者，我很难将他们的基本原理联系起来。

我尝试[w3schools.com](http://www.w3schools.com)获取[此](http://www.w3schools.com/ajax/ajax_aspphp.asp)示例，并且尝试更改 open 方法 ( `xmlhttp.open("GET","gethint.asp?q="+str,true);`) 的内部。我尝试的是在方法的第二个参数中输入完整的 URL 地址并尝试接收文件并解析它。但是我无法解析任何文件，或者我不明白我是否得到它。当我尝试使用浏览器打开该 URL 时，它会下载一个可解析的文本文件，我可以理解这些数据。我怎样才能使它自动化？

我当前的代码可以在下面找到：

```
<!DOCTYPE html>
<html>
<head>
<script>
function showHint(str)
{
    var xmlhttp;

    if (str.length == 0)
    { 
          document.getElementById("txtHint").innerHTML = "";
          return;
    }

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }

    var url = "https://www.google.com.tr/complete/search?client=hp&hl=en&sugexp=ernk_ir&gs_rn=8&gs_ri=hp&tok=VepIjB5Y4hHneLHcIO5AsQ&cp="+str.length+"&gs_id=1sy&xhr=t&q="+str+"&tch=1&ech=1&psi=FW9kUZu1J6Sw0QXLyIHgBg.1365536538389.1";

    xmlhttp.open("GET",url,true);
    xmlhttp.send();
}
</script>
</head>

<body>

<h3>Start typing a name in the input field below:</h3>
<form action=""> 
    Search Word: <input type="text" id="txt1" onkeyup="showHint(this.value)" />
</form>
<p>Suggestions: <span id="txtHint"></span></p> 

</body>
</html> 
```

我知道它不完整，我只是想知道如果我走错了路还是应该添加一些其他东西？

# c# - 向 SRGS 语法添加通用占位符

> ID：15913781
> 
> 赞同：0
> 
> 时间：2013-04-09T22:35:50.517
> 
> 标签：c#, windows-phone-8, voice-recognition

我试图将语音识别添加到我的应用程序中。但不幸的是，我找不到添加通用占位符的方法。例如，我想说“我正在寻找 stackoverflow”，然后我使用以下语法：

```
<grammar root="start" {...}>
  <rule id="start" scope="public">
    I am       
    <one-of>         
      <item> looking for</item>
      <item> listening to</item> 
    </one-of>
  </rule>

<!-- here could be any word -->

</grammar> 
```

我的问题是，如何实现对“stackoverflow”的搜索。如果我使用这个语法，识别器总是会找到“我正在寻找”。很好，但缺少重要的词。如果我没有使用任何语法，那么我会得到类似“我看着四块牛排溢出”的信息。在这里，我得到了重要的词，但不能使用规则来限制“我是”和“寻找”。

我的需要当然是“我正在寻找牛排溢出”。

我怎么能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:17:46.237

仅仅因为您不能严格定义“任何单词”，就无法识别“任何单词”。“fasdfewqrqew”是否算作您要识别的单词？我确定不是。

我确定您想识别某个单词列表，可能很大。然后你可以在 SRGS 语法中列出所有这些。[您可以在此处](http://www.keithv.com/software/wlist/)找到包含常用词的单词列表，然后将列表转换为语法。

如果您想增加列表覆盖率，您还可以在语法中放置音节序列而不是单词列表。您可以从[CMUSphinx 项目](http://cmusphinx.sourceforge.net)中的 CMUDict 等语音词典中提取音节列表。这将为您提供更少变体的更多变体，但准备在结果中获得无意义的单词。

# linux - 在 NASM 中实现 cat>fileName 命令

> ID：15913785
> 
> 赞同：1
> 
> 时间：2013-04-09T22:36:26.583
> 
> 标签：linux, assembly, x86, nasm, i386

我尝试`cat>filename`使用系统调用在 Ubuntu 11.04 的 NASM 中实现命令。我的程序编译成功并成功运行（似乎如此）。但是，每当我尝试触发`cat filename`命令时，它都会显示“没有这样的文件或目录”，但我看到该文件位于目录中。如果我尝试通过双击打开文件，它会显示“您没有打开文件所需的权限”。你能帮我找出我的代码中的错误吗？

代码如下：

```
section .data
   msg:     dd "%d",10,0    
   msg1:    db "cat>",0
   length:  equ $-msg1
section .bss
   a    resb 100
       len1 equ $-a
   b    resd 1
   c    resb 100       
   len2 equ $-c
section .txt
  global main
main:
  mov eax,4   ;;it will print cat>
  mov ebx,1
  mov ecx,msg1
  mov edx,length
  int 80h
start:
  mov eax,3   ;;it will take the file name as input
  mov ebx,0
  mov ecx,a
  mov edx,len1
  int 80h

  mov eax,5   ;;it will create the file by giving owner read/write/exec permission
  mov ebx,a
  mov ecx,0100  
  mov edx,1c0h
  int 80h

  cmp eax,0
  jge inputAndWrite
  jmp errorSegment

inputAndWrite:
  mov [b],eax   

  mov eax,3   ;;take the input lines
  mov ebx,0
  mov ecx,c
  mov edx,len2
  int 80h

  mov edx,eax   ;;write the input lines in the file
  mov eax,4
  mov ebx,[b]
  mov ecx,c
  int 80h   

  jmp done  
errorSegment:   
  jmp done
done:   
  mov eax, 1 
  xor ebx, ebx 
  int 80h 
```

ps 以上代码是根据RageD的建议重新编辑的。然而，我创建的文件不包含从“inputAndWrite”段给出的任何输入行。我正在寻找你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:35:12.757

您的权限的主要问题是权限在`octal`并且您已将它们列出在`decimal`. 您正在寻找以`0700`8 为底，而不是 10 为底。因此，您可以尝试使用`1c0h`（`0700`十六进制的八进制）。因此，以下代码修复应该可以解决您的权限问题：

```
;; This is file creation
mov eax, 5
mov ebx, a
mov ecx, 01h ; Edited here for completeness - forgot to update this initially (see edit)
mov edx, 1c0h 
```

供您参考，Linux 系统调用的快速指南（可能有些过时，但大部分是正确的）是使用[Linux 系统调用表](http://docs.cs.up.ac.za/programming/asm/derick_tut/syscalls.html)。这对于记住需要如何设置寄存器等非常有帮助。

另一个关键问题是写入文件。我认为你在一些问题上有点困惑。首先，小心你的长度变量。组装是“在线”完成的，也就是说，当您计算 len1 时，您会计算 之间的距离`a`加上之间的所有内容`a`to `len1`。也就是说，您的长度值应如下所示：

```
.section bss
a resb 100
len1 equ $ - a
b resd 1
c resb 100
len2 equ $ - c 
```

这样做应该确保你有正确的读取（尽管重要的是要注意你在这里输入的缓冲区大小受到限制）。

我发现的另一个关键问题是您如何尝试写入文件。你翻转了系统调用寄存器。

```
;; Write to file
mov edx, eax ;; Amount of data to write
mov eax, 4 ;; Write syscall
mov ebx, [b] ;; File descriptor to write out to (I think this is where you stored this, I don't remember exactly)
mov ecx, c ;; Buffer to write out 
```

从这里开始，我会再做一些调整。首先，为了很好地结束（没有段错误），我建议简单地使用`exit`. 除非这是在另一个程序中，`ret`否则可能并不总是正常工作（特别是如果这是一个独立的 x86 程序）。退出系统调用的代码如下：

```
;; Exit
mov eax, 1 ;; Exit is syscall 1
xor ebx, ebx ;; This is the return value
int 80h ;; Interrupt 
```

另外，至于清洁度，我假设您正在接受由换行符缓冲的输入。如果是这种情况，我建议去掉文件名后的换行符。最简单的方法是在最后一个字符（将是新行）之后简单地以空终止。因此，在读取文件名的输入后，我将放置一些类似于此的代码：

```
;; Null-terminate the last character - this assumes it directly follows the read call
;; and so the contents of eax are the amount of bytes read
mov ebx, eax ;; How many bytes read (or offset to current null-terminator)
sub ebx, 1 ;; Offset in array to the last valid character
add ebx, a ;; Add the memory address (i.e. in C this looks like a[OFFSET])
mov BYTE [ebx], 0 ;; Null-terminated 
```

最后，在大型项目中，完成后关闭文件描述符是有礼貌的。由于您将立即退出，因此此处可能没有必要，但这看起来像：

```
;; Close fd
mov eax, 6 ;; close() is syscall 6
mov ebx, [b] ;; File descriptor to close
int 80h 
```

**编辑**

对不起，我错过了写作问题。您正在使用 value 打开文件`100`。您想要的是`1`（`O_RDWR`读取和写入功能）。此外，您可能需要考虑简单地使用`sync`系统调用（`0x24`不带参数的系统调用号）来确保正确刷新缓冲区；但是，在我的测试中，这是不必要的，因为输入数据的换行符在技术上应该这样做，我相信。因此，正确打开文件的更新代码应如下所示：

```
; Open file
mov eax, 5
mov ebx, a
mov ecx, 01h
mov edx, 1c0h
int 80h 
```

希望这可以帮助。祝你好运！

# ruby-on-rails - 如何在 Mongoid 中从 belongs_to 迁移到 embedded_in？

> ID：15913786
> 
> 赞同：9
> 
> 时间：2013-04-09T22:36:28.647
> 
> 标签：ruby-on-rails, mongoid

如果一个人首先使用belong_to 和has_many 关联构建他们的模型，然后意识到他们需要移动到embedded_in 和embeds_many 关联，那么如何在不使数千条记录失效的情况下做到这一点？需要以某种方式迁移它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T07:53:47.677

我不太确定我的解决方案是否正确。这是您可能会尝试完成的事情。

假设你有模型 - 像这样

```
#User Model
class User
  include Mongoid::Document
  has_many :books
end

#Book Model
class Book
  include Mongoid::Document
  field :title
  belongs_to :user
end 
```

第一步，我将创建另一个与上面的 Book 模型类似的模型，但它是嵌入的而不是引用的。

```
#EmbedBook Model
class EmbedBook
  include Mongoid::Document
  field :title
  embedded_in :user
end

#User Model (Update with EmbedBook Model)
class User
  include Mongoid::Document
  embeds_many :embed_books
  has_many :books
end 
```

然后为上面的示例创建一个类似这样的 Mongoid 迁移

```
class ReferenceToEmbed < Mongoid::Migration
  def up
    User.all.each do |user|
      user.books.each do |book|
        embed_book = user.embed_books.new
        embed_book.title = book.title
        embed_book.save 
        book.destroy
      end
    end
  end
  def down
    # I am not so sure How to reverse this migration so I am skipping it here
  end
end 
```

运行迁移后。从这里可以看到嵌入了参考书，但是嵌入模型的名称是 EmbedBook，模型 Book 仍然存在

因此，下一步是将模型书制作为嵌入的。

```
class Book
  include Mongoid::Document
  embedded_in :user
  field :title
end

class User
  include Mongoid::Document
  embeds_many :books
  embeds_many :embed_books
end 
```

所以接下来就是将 embedbook 类型迁移到 book 类型

```
class EmbedBookToBook < Mongoid::Migration
  def up
    User.all.each do |user|
      user.embed_books.each do |embed_book|
      book = user.books.new
      book.title = embed_book.title
      book.save 
      embed_book.destroy
    end
  end
  def down
    # I am skipping this portion. Since I am not so sure how to migrate back.
  end
end 
```

现在，如果您看到 Book 从引用更改为嵌入。您可以移除 EmbedBook 模型以完成更改。

*   这只是建议。在尝试生产之前在您的开发中尝试此操作。因为，我认为我的建议可能有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:27:30.720

10gen 有几篇关于数据建模的文章可能很有用：

*   [MongoDB 应用程序的数据建模注意事项](http://docs.mongodb.org/manual/core/data-modeling/)

*   [嵌入式一对多关系](http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-many-relationships-between-documents/)

*   [引用的一对多关系](http://docs.mongodb.org/manual/tutorial/model-referenced-one-to-many-relationships-between-documents/)

*   [MongoDB 数据建模和 Rails](http://docs.mongodb.org/ecosystem/tutorial/model-data-for-ruby-on-rails/)

请记住，在嵌入方面，MongoDB 有两个限制：

*   文档大小限制为 16MB - 这意味着嵌入文档的最大数量，即使您只是嵌入它们的 object-id
*   如果您想从顶层搜索所有嵌入的文档，那么不要嵌入，而是使用引用的文档！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T16:40:57.540

尝试以下步骤：

1.  在`User`模型中离开`has_many :books`关系，并添加具有不同名称的嵌入关系以不覆盖该`books` 方法。

    ```
     class User
           include Mongoid::Document

           has_many :books
           embeds_many :embedded_books, :class_name => "Book"
        end 
    ```

    现在，如果您`embedded_books`从`User`实例调用方法 mongoid 应该返回一个空数组。

2.  在不向模型添加任何嵌入关系的情况下`Book`，编写您自己的迁移脚本：

    ```
    class Book 
       include Mongoid::Document

       field :title, type: String
       field :price, type: Integer
       belongs_to :user

       def self.migrate
          attributes_to_migrate = ["title","price"] # Use strings not symbols, 
                                                    # we keep only what we need. 
                                                    # We skip :user_id field because 
                                                    # is a field related to belongs_to association.
          Book.all.each do |book|
             attrs = book.attributes.slice(*attributes_to_migrate)
             user = book.user // through belong_to association
             user.embedded_book.create!(attrs)
          end
       end 
    end 
    ```

    打电话给`Book.migrate`您应该将所有书籍复制到与 belongs_to 关系相关联的每个用户中。

3.  现在您可以删除`has_many`和`belongs_to`关系，最后切换到干净的嵌入式解决方案。

    ```
    class User
       include Mongoid::Document

       embeds_many :books
    end

    class Book 
       include Mongoid::Document

       field :title, type: String
       field :price, type: Integer
       embedded_in :user
    end 
    ```

我没有测试过这个解决方案，但理论上应该可以，让我知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T15:07:49.913

我有一个更简洁的答案：

假设您有相同的模型：

```
#User Model
class User
  include Mongoid::Document
  has_many :books
end

#Book Model
class Book
  include Mongoid::Document
  field :title
  belongs_to :user
end 
```

所以将其更改为嵌入：

```
#User Model
class User
  include Mongoid::Document
  embeds_many :books
end

#Book Model
class Book
  include Mongoid::Document
  field :title
  embedded_in :user
end 
```

并像这样生成一个 mongoid 迁移：

```
class EmbedBooks < Mongoid::Migration
  @@attributes_to_migrate = [:title]
  def self.up
    Book.unscoped.where(:user_id.ne => nil).all.each do |book|
      user = User.find book[:user_id]
      if user
        attrs = book.attributes.slice(*@@attributes_to_migrate)
        user.books.create! attrs
      end
    end
  end

  def self.down
    User.unscoped.all.each do |user|
      user.books.each do |book|
        attrs = @@attributes_to_migrate.reduce({}) do |sym,attr|
          sym[attr] = book[attr]
          sym
        end
        attrs[:user] = user

        Book.find_or_create_by(**attrs)
      end
    end
  end
end 
```

这是有效的，因为当您从类级别查询时，它正在寻找顶级集合（即使您更改关系仍然存在），并且这`book[:user_id]`是访问文档属性而不是自动生成的方法的技巧，这些方法也存在没有做任何事情来删除它们。

所以你有它，从关系到嵌入式的简单迁移

# python - 使用 python，如何使用 for 循环制作金字塔？

> ID：15913788
> 
> 赞同：0
> 
> 时间：2013-04-09T22:36:49.407
> 
> 标签：python, for-loop

我在我的一堂课上遇到了这个问题，我不太明白。这是我们被要求做的。

“编写一个在 FOR 循环中只有一个打印命令和一个打印命令的程序，以提供以下输出。您可以在 FOR/NEXT 循环之外使用另一个 PRINT 命令。字母 'Y' 只能使用一次你的程序。”

它应该看起来像这样

Y
YY
YYY
YYYY
YYYYY
YYYYYY

我很想知道怎么做，整个星期都在困扰我，但这只是一个额外的学分问题，所以我的老师从来没有解释过怎么做！:(

非常感谢您的帮助！-亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:44:29.330

你可以做一些像这样简单的事情。

```
def create_pyramid(rows):
    for i in range(rows):
        print('Y' * ( i + 1))

create_pyramid(6) 
```

基本上，您使用所需的行数设置了一个[for 循环。](http://docs.python.org/2/reference/compound_stmts.html#for)如果您使用[range](http://docs.python.org/2/library/functions.html#range) (number_of_rows)，您将得到一个从 0 开始并进入 1、2 等的循环，直到它循环了 6 次。然后，您可以通过使用[乘以](http://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex)`Y`每行上所需的字符数来使用它`'Y' * i`，但请记住，for 循环从零开始计数，因此您需要[添加](http://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex) `+ 1`到`i`变量中。最后，您使用[print](http://docs.python.org/2/library/functions.html#print)`Y`将每行的字符数输出到屏幕。

**其输出将是：**

```
Y
YY
YYY
YYYY
YYYYY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T08:52:14.230

尝试：

```
for i in range(1,10):                    
    for j in range(0+i):        
    print 'y',        
 print '\n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T13:22:26.887

```
for x in range(1,6+1):
    print ('Y'*x) 
```

您可以将 6 替换为行数。

# html - 使用引导程序调整动态内容大小和滚动

> ID：15913791
> 
> 赞同：0
> 
> 时间：2013-04-09T22:37:10.547
> 
> 标签：html, razor, twitter-bootstrap

我有一个我正在尝试设计的网站，我有一个通用布局页面，所有内容都将放置在其中，即来自我制作的其他页面的内容，我遇到了我的内容溢出并且没有出现滚动条的问题；我环顾四周，尝试了几种方法来调整我的内容大小，但都没有奏效，所以我决定临时修复并让窗口大小保持静态，谁能帮助我根据运行的屏幕调整页面大小。我正在使用 webmatrix，这些页面中会有一些 C# 代码，所以扩展名是 cshtml。我对网络开发也很陌生，如果我的代码很乱，我很抱歉。

```
<!DOCTYPE html>
<html>
<head>
<title>My Page</title>

<link rel="stylesheet" type="text/css" href="/Shared/css/bootstrap.css" />
<style type="text/css">
.body
{     

    padding-top: 60px;
    padding-bottom: 40px;    

}
.renderBody {

        height: 462px;
        overflow: auto;
        padding-top: 60px;
        padding-left: 440px;
        margin: initial;
    }    
    #login{

        padding-right: 0px;
    }
</style>
<link rel="stylesheet" type="text/css" href="/Shared/css/bootstrap-responsive.css"/>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/latest/js/bootstrap.min.js"></script>
  <script src="/downloads/twitter-bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.js?view=1"></script>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="navContainer">
            <img src="/Shared/Images/Logo.png" alt="LogoImage"></img>
                <form class="navbar-form pull-right">
                    <ul class="breadcrumb" id="login">
                       <li> <a href="#">Login</a>
                        <span class="divider"> /
                        <a href="#">Register</a></span></li>
                      </ul>
            </form>
            </div>
       <div class="container">
       <button type="button" class="btn btn-navbar" data-toggle="collapse">
         <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a class="brand" href="http://www.facebook.com">Some Information</a>
          <div class="nav-collapse collapse">
          <ul class="nav">
          <li class="active"><a href="/Login/LoginPage.cshtml">More Information</a></li>

    <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li class="nav-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
          <li class="active"><a href="">Traveling</a></li>
          <li class="active"><a href="#">Moving</a></li>
          <li class="active"><a href="#">Sports</a></li>
          </ul>

            <!--<form class="navbar-form pull-right">
                         <ul class="nav"><li class="active"><a href="#" class="active">Register</a></li></ul>
             </form>
             </div>-->
        </div>
      </div>
    </div>

            <div class="renderBody">
                @RenderBody()
            </div>
                </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T19:26:26.767

在您在脚本中进行屏幕测量之前，您可以尝试布局方面的一些事情：

首先，一定要使用视口元标记（[https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)）：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

接下来，使用引导容器类包装 RenderBody：

```
<div id="main" class="container">
    @RenderSection("featured", required: false)
    <section>
        @RenderBody()
    </section>
</div> 
```

此外，如果您还不熟悉它，您可能需要阅读引导程序中的流体网格系统 ( [http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem) )

最后，如果一切都失败了，您可以在内容容器上使用溢出 CSS 属性：

```
.renderBody {
    overflow-x: scroll;
} 
```

# c - Arduino：将 ASCII 字符打印到 LED/指针怪异

> ID：15913796
> 
> 赞同：2
> 
> 时间：2013-04-09T22:37:53.243
> 
> 标签：c, arduino, bit-manipulation, led

我使用 TLC5940 和移位寄存器制作了一个 24 x 15 LED 矩阵，在 Arduino Due 上运行。

首先，我想打印一个 ASCII 字符，例如。'A' 直接显示。

[因此，我使用找到的链接](https://stackoverflow.com/questions/2912961/ascii-7x5-side-feeding-characters-for-led-modules)在 PROGMEM 中存储了一个字体数组：

```
 PROGMEM prog_uchar font[][5] = {
    {0x00,0x00,0x00,0x00,0x00},   //   0x20 32
    {0x00,0x00,0x6f,0x00,0x00},   // ! 0x21 33
                ...
    {0x08,0x14,0x22,0x41,0x00},   // < 0x3c 60
    {0x14,0x14,0x14,0x14,0x14},   // = 0x3d 61
    {0x00,0x41,0x22,0x14,0x08},   // > 0x3e 62
    {0x02,0x01,0x51,0x09,0x06},   // ? 0x3f 63
                etc. 
```

现在，奇怪的是，一切几乎都可以正常工作，但略有变化。例如，'>' 变成这样：

```
00000000      -->     00001000    
01000001      -->     00000000
00100010      -->     01000001
00010100      -->     00100010
00001000      -->     00010100 
```

所以我认为这是一个指针边界问题。也许我只是看了太久，但我不知道！

这是相关代码，我在其中硬编码了“<”的值。我做了一个 Serial.println，它显示了“b”的正确值。x 和 y 分别为 0 和 0，将字符放在角落。'b' 的注释掉分配是我通常做的，而不是硬编码。charWidth = 5 和 charHeight = 7。 setRainbowSinkValue(int led, int brightness) 一直有效，所以不是这样。

```
 unsigned char testgt[]   = {0x00,0x41,0x22,0x14,0x08};

  for (int iterations = 0; iterations < time; iterations++)
  {

    unsigned char indexOfWidth = 0;
    unsigned char indexOfHeight = 0;

    for (int col = x; col < x + charWidth; col++) 
    {
        openCol(col);      
        Tlc.clear(); 
        unsigned char b = testgt[indexOfWidth];//pgm_read_byte_near(font[ch] + indexOfWidth );

          //Serial.println(b);

        indexOfHeight = 0;
        for (int ledNum = y; ledNum < y + charHeight; ledNum++)
        {
          if (b & (1 << indexOfHeight))
          {
            setRainbowSinkValue(ledNum, 100);
          }
          indexOfHeight++;
        }

        indexOfWidth++;
        Tlc.update(); 
    }
  } 
```

你能看出有什么不对吗？最可能的问题是位操作，但它是有道理的... b & 1... b & 2... b & 4... b & 8... b & 16... b & 32。 .. b & 64... b & 128...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:00:16.790

好的，我解决了... 74hc595 和 TLC5940s 的速度之间似乎存在细微的时序差异，所以发生的情况是，由于 TLC 没有被清除，所以有残留的闪烁转移到下一列74hc595 打开新列的时间。所以我切换了 Tlc.clear() 和 openCol(col) 并在两者之间添加了一个 delay(5) ，这很有帮助。不能完全解决它，但 delay(15) 会伤害眼睛，这是一个可以接受的折衷方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:08:15.233

基本上，您从中提取的值`testgt[]`会进入显示屏上的错误列。呈现的代码看起来不错。这是你没有展示的东西。也许，您的电路对输入的索引与您期望的不同。

# php - 在表单php上多次提交

> ID：15913800
> 
> 赞同：0
> 
> 时间：2013-04-09T22:38:02.090
> 
> 标签：php, forms, submit

在我的表单上，我有 3 个提交，我想知道处理这些按钮的最佳方式，因为默认操作是相同的表单：

```
<form method="POST" action="file_where_form_is.php">
      Name:<input type='text' name='name'>
      <input type='submit' name='add' value='Add Names' ONCLICK='window.location.href="file_where_form_is.php">
      <input type='submit'name='Preview'value='Preview'ONCLICK='window.location.href="file_where_form_is.php">
      <input type='submit' name='submit'value='Submit' ONCLICK='window.location.href="send.php">                                           

</form> 
```

这似乎不能完全工作，只是第 2 个工作，最后一次提交什么都不做（名称='submit'）有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:43:55.533

我终于发现在标题部分添加了这样的内容：

```
 if(isset($_POST['submit'])){
      header("location: somefile.php");
 }
 elseif(isset($_POST['Preview'])){
       header("location: anotherfile.php");
 }
 elseif(isset($_POST['add'])){
       header("location: anotheronefile.php");
 } 
```

# html - 每个版本的 IE 在新窗口中打开链接

> ID：15913804
> 
> 赞同：2
> 
> 时间：2013-04-09T22:38:32.820
> 
> 标签：html, internet-explorer, hyperlink, window, target

我一直在设计一个网站，并且一直在使用 Safari 和 Chrome 进行大部分测试。我刚刚尝试测试 Firefox，也很顺利。把它留给 IE 扔扳手。

出于某种原因，对于从 IE 6 到 IE 10 的每个版本，每个链接都会打开一个新窗口。在 IE 10 的 Metro 版本中，它们会在新选项卡中打开。

我唯一的想法是我没有指定目标 =“_self”，但不应该暗示吗？有没有在我网站的每个链接中添加 target="_self" 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T15:20:32.687

我的链接也有同样的问题。问题`/`是`/basedir/controller/action`. 解决方案是在您的 HTML 头中定义一个`<base>`标签。

如果你使用 YII，你可以自动化这个标签来测试 => 生产环境：

```
<?php echo '<base href="'.$this->createAbsoluteUrl('/').'/" />'.PHP_EOL; ?> 
```

你甚至可以在你的`<base>`标签中定义一个目标：`target="_self"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:33:13.200

感谢您的所有建议。我能够跳上物理计算机的 IE 版本，虽然某些链接仍然断开，但它们不会在新窗口中打开。

我想这只是 browserstack.com 的一个问题。但是考虑到 browserstack 是一个专门设计用于在本机操作系统上测试浏览器的网站，这确实是他们应该研究的东西。

# arrays - 如何在 Lua 中对多数据类型数组中的值进行索引？

> ID：15913805
> 
> 赞同：1
> 
> 时间：2013-04-09T22:38:42.687
> 
> 标签：arrays, lua, coordinates, null

这是一个奇怪的问题，但让我感到困惑。我希望能够在基于 id 的系统上存储 x 和 y 坐标，例如：id.1.x = 10, id.1.y = 15: id.2.x = 50, id.2.y = 42，我正在尝试为我创建一个函数，但我遇到了问题。这是我的代码

```
a = { p = {x,y}}
function box(xpos,ypos,id)
a[id].x = xpos
a[id].y = ypos
end
box(25,30,1)
box(45,10,2)
print(a[1].x.." "..a[1].y)
print(a[2].x.." "..a[2].y) 
```

我想打印：

```
25 30
45 10 
```

但是我得到了错误：

```
attempt to index global '?' (a nil value) 
```

我真的筋疲力尽，想休息一下，所以如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:08:40.140

```
function box(xpos,ypos,id)
  a[id] = {x = xpos, y = ypos}
end 
```

# c++ - “getline”的初学者错误

> ID：15913808
> 
> 赞同：0
> 
> 时间：2013-04-09T22:39:05.260
> 
> 标签：c++, getline

这是我第一次发布问题，所以我希望我做对了。无论如何，我正在尝试创建一个程序来向用户询问字符串，计算字母的类型和数量，然后输出字母的频率。到目前为止，即使获得正确的输入，我也遇到了错误，只是无法弄清楚问题所在。我的（相关）代码是：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <vector>

using namespace std;    

string getPhrase(const string & phrase);  //Function for gathering string input
int main()
{
     const string phrase;
     getPhrase(phrase);
     ...
}

string getPhrase(const string &phrase)
{
   cout<<"Enter phrase: "
   getline(cin, phrase);

   return (phrase);
} 
```

当我运行时，我得到了错误：

```
freq.cpp: In function ‘std::string getPhrase(const std::string&)’:
freq.cpp:21: error: no matching function for call to ‘getline(std::istream&, const
std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)’ 
```

我不知道我做错了什么，而且似乎无法在网上找到与我正在做的事情相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:40:53.417

你`getPhrase`应该是这样的：

```
std::string getPhrase()
{
    std::string result;
    std::cout << "Enter phrase: ";
    std::getline(std::cin, result);
    return result;
} 
```

然后：

```
int main()
{
    std::string phrase = getPhrase();

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:40:20.083

```
 const string phrase; 
```

删除`const`函数参数和局部变量声明，否则您不能接受用户对`const`变量的输入，这意味着不可更改/不可修改。

如下所示：

```
string getPhrase(string & phrase);  //Function for gathering string input
int main()
{
     string phrase;
     getPhrase(phrase);
     //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:40:57.127

请注意，这`phrase`是一个`const string`. 这意味着它是恒定的，无法修改。因此，您不能使用`getline`设置`phrase`为用户的输入。

您应该声明`phrase`，`string phrase;`然后将参数`getPhrase`设为非`const`引用。

```
string getPhrase(string& phrase);  //Function for gathering string input
int main()
{
     string phrase;
     getPhrase(phrase);
     ...
} 
```

# mysql - MySQL 按多个 COALESCE(CAST

> ID：15913813
> 
> 赞同：0
> 
> 时间：2013-04-09T22:39:25.423
> 
> 标签：mysql

我有一个包含 4 个 varchar 字段的表，我需要根据列是否为空来排序。

所以我的表结构是：

```
start_price     reserve_price     buy_now_price    current_bid_amount
---------------------------------------------------------------------
50.00           50.00             empty (not null) (Null)
190             190               empty (not null) (Null)
150             150               empty (not null) (Null)
20              150               empty (not null) (Null)
550             600               empty (not null) (Null) 
```

我在下面有一个订单条款，但似乎没有正确订购。目前，结果按 190、150、50、20、550 排序。

> ORDER BY COALESCE(CAST( `al`. `current_bid_amount`AS SIGNED), CAST( `al`. `buy_now_price`AS SIGNED), CAST( `al`. `start_price`AS SIGNED), CAST( `al`. `reserve_price`AS SIGNED)) ASC

基本上我需要根据 current_bid_amount、buy_now_price、start_price、reserve_price 按最低价排序。因此，如果 current_bid_amount AND buy_now_price 为空，则使用 start_price。如果 current_bid_amount 为空但 buy_now_price 不是，则使用 buy_now_price。如果 current_bid_amount 中有一个值，请使用该值进行订购。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:45:19.787

好吧，将空字符串转换为有符号的是 0。因此，您的 buy_now_price 可能会覆盖所有内容，因为它为空但不为空。然后，您基本上不会进行排序，因为您的合并将始终对您的所有项目评估为 0。

```
mysql> select cast('' as signed);
+--------------------+
| cast('' as signed) |
+--------------------+
|                  0 |
+--------------------+
1 row in set, 1 warning (0.00 sec)

mysql> select cast(null as signed);
+----------------------+
| cast(null as signed) |
+----------------------+
|                 NULL |
+----------------------+
1 row in set (0.00 sec) 
```

# css - 无限的 CSS3 动画随着时间的推移随机停止或变得有问题

> ID：15913815
> 
> 赞同：0
> 
> 时间：2013-04-09T22:39:40.683
> 
> 标签：css, animation

估计是烟雾效果。代码如下。在 iPad 上，动画会随机停止或变成 bug。在桌面 chrome/firefox/safari 上，如果您在网页上停留几分钟，动画可能会停止或出现错误。我不确定为什么，因为它都设置为无限。代码如下。Jfiddle 链接在这里：http: [//jsfiddle.net/44u23/](http://jsfiddle.net/44u23/)

```
.smoke,.smoketwo,.smokethree {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-transform-style: preserve-3d;
    position: absolute;
    z-index: 0;
    width: 1px;
    height: 120px;
    left: 70%;
    bottom: 30px;
}

.smoketwo {
    left: 72.5%;
}

.smokethree {
    left: 75%;
}

.smoke span,.smoketwo span,.smokethree span {
    display: block;
    position: absolute;
    bottom: 35px;
    left: 50%;
    margin-left: -20px;
    height: 0;
    width: 0;
    border: 35px solid rgba(255,255,255,0.6);
    border-radius: 35px;
    left: -14px;
    opacity: 0;
    transform: scale(0.5);
}

.smokethree .s1,.smokethree.s2,.smokethree .s3,.smokethree .s4,.smokethree .s5,.smokethree .s6,.smokethree .s7,.smokethree .s8,.smokethree .s9 {
    margin-left: -15px;
}

.smoke .s1,.smoke .s2,.smoke .s3,.smoke .s4,.smoke .s5,.smoke .s6,.smoke .s7,.smoke .s8,.smoke .s9 {
    margin-left: -25px;
}

@-webkit-keyframes smokeL {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(0,130px);
        -moz-transform: scale(1) translate(0,130px);
        -o-transform: scale(1) translate(0,130px);
        transform: scale(1) translate(0,130px);
    };
}

@-moz-keyframes smokeL {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(0,130px);
        -moz-transform: scale(1) translate(0,130px);
        -o-transform: scale(1) translate(0,130px);
        transform: scale(1) translate(0,130px);
    };
}

@-o-keyframes smokeL {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(0,130px);
        -moz-transform: scale(1) translate(0,130px);
        -o-transform: scale(1) translate(0,130px);
        transform: scale(1) translate(0,130px);
    };
}

@keyframes smokeL {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(0,130px);
        -moz-transform: scale(1) translate(0,130px);
        -o-transform: scale(1) translate(0,130px);
        transform: scale(1) translate(0,130px);
    };
}

@-webkit-keyframes smokeR {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(5px,130px);
        -moz-transform: scale(1) translate(5px,130px);
        -o-transform: scale(1) translate(5px,130px);
        transform: scale(1) translate(5px,130px);
    };
}

@-moz-keyframes smokeR {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(5px,130px);
        -moz-transform: scale(1) translate(5px,130px);
        -o-transform: scale(1) translate(5px,130px);
        transform: scale(1) translate(5px,130px);
    };
}

@-o-keyframes smokeR {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(5px,130px);
        -moz-transform: scale(1) translate(5px,130px);
        -o-transform: scale(1) translate(5px,130px);
        transform: scale(1) translate(5px,130px);
    };
}

@keyframes smokeR {
    0% {
        -webkit-transform: scale(0.5) translate(0,0);
        -moz-transform: scale(0.5) translate(0,0);
        -o-transform: scale(0.5) translate(0,0);
        transform: scale(0.5) translate(0,0);
    }

    10% {
        opacity: 1;
        -webkit-transform: scale(0.5) translate(0,15px);
        -moz-transform: scale(0.5) translate(0,15px);
        -o-transform: scale(0.5) translate(0,15px);
        transform: scale(0.5) translate(0,15px);
    }

    100% {
        opacity: 0;
        -webkit-transform: scale(1) translate(5px,130px);
        -moz-transform: scale(1) translate(5px,130px);
        -o-transform: scale(1) translate(5px,130px);
        transform: scale(1) translate(5px,130px);
    };
}

.smoke .s0,.smoketwo .s0,.smokethree .s0 {
    -webkit-animation: smokeL 10s 0s infinite;
    -moz-animation: smokeL 10s 0s infinite;
    -o-animation: smokeL 10s 0s infinite;
    animation: smokeL 10s 0s infinite;
}

.smoke .s1,.smoketwo .s1,.smokethree .s1 {
    -webkit-animation: smokeR 10s 1s infinite;
    -moz-animation: smokeR 10s 1s infinite;
    -o-animation: smokeR 10s 1s infinite;
    animation: smokeR 10s 1s infinite;
}

.smoke .s2,.smoketwo .s2,.smokethree .s2 {
    -webkit-animation: smokeL 10s 2s infinite;
    -moz-animation: smokeL 10s 2s infinite;
    -o-animation: smokeL 10s 2s infinite;
    animation: smokeL 10s 2s infinite;
}

.smoke .s3,.smoketwo .s3,.smokethree .s3 {
    -webkit-animation: smokeR 10s 3s infinite;
    -moz-animation: smokeR 10s 3s infinite;
    -o-animation: smokeR 10s 3s infinite;
    animation: smokeR 10s 3s infinite;
}

.smoke .s4,.smoketwo .s4,.smokethree .s4 {
    -webkit-animation: smokeL 10s 4s infinite;
    -moz-animation: smokeL 10s 4s infinite;
    -o-animation: smokeL 10s 4s infinite;
    animation: smokeL 10s 4s infinite;
}

.smoke .s5,.smoketwo .s5,.smokethree .s5 {
    -webkit-animation: smokeR 10s 5s infinite;
    -moz-animation: smokeR 10s 5s infinite;
    -o-animation: smokeR 10s 5s infinite;
    animation: smokeR 10s 5s infinite;
}

.smoke .s6,.smoketwo .s6,.smokethree .s6 {
    -webkit-animation: smokeL 10s 6s infinite;
    -moz-animation: smokeL 10s 6s infinite;
    -o-animation: smokeL 10s 6s infinite;
    animation: smokeL 10s 6s infinite;
}

.smoke .s7,.smoketwo .s7,.smokethree .s7 {
    -webkit-animation: smokeR 10s 7s infinite;
    -moz-animation: smokeR 10s 7s infinite;
    -o-animation: smokeR 10s 7s infinite;
    animation: smokeR 10s 7s infinite;
}

.smoke .s8,.smoketwo .s8,.smokethree .s8 {
    -webkit-animation: smokeL 10s 8s infinite;
    -moz-animation: smokeL 10s 8s infinite;
    -o-animation: smokeL 10s 8s infinite;
    animation: smokeL 10s 8s infinite;
}

.smoke .s9,.smoketwo .s9,.smokethree .s9 {
    -webkit-animation: smokeR 10s 9s infinite;
    -moz-animation: smokeR 10s 9s infinite;
    -o-animation: smokeR 10s 9s infinite;
    animation: smokeR 10s 9s infinite;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:05:23.370

我的直接想法是内存使用。经过一番研究，我发现了一个指向“堆栈”上另一个问题的链接，可以回答你的问题。事实证明，CSS3 动画可以在某些浏览器中利用 GPU 加速。查看下面的链接，看看是否有帮助。祝你好运。

[CSS3 动画和性能：有基准吗？](https://stackoverflow.com/questions/7866423/css3-animations-and-performance-are-there-any-benchmarks)

# javascript - GM_xmlhttpRequest 的响应文本缺少一些 HTML

> ID：15913817
> 
> 赞同：0
> 
> 时间：2013-04-09T22:39:51.927
> 
> 标签：javascript, xmlhttprequest, greasemonkey, gm-xmlhttprequest

如果我转到[此*Google Maps*页面](https://maps.google.com/?q=1093%20W%203090%20S,Syracuse,%20UT)，*查看源代码*中缺少一些 HTML ，但会显示在 Firebug 中。

同样，当将相同的 URL 传递给我的函数时，以下 HTML 不会显示在 中`responseText`，但是当我打开页面时它会显示在 Firebug 中。

```
<a id="mapmaker-link" class="kd-button mini left" style="" href="https://www.google.com/mapmaker?ll=41.06877,-112.047203&spn=0.038696,0.132093&t=h&z=14&vpsrc=0&q=1093+W+3090+S,Syracuse,+UT&utm_medium=website&utm_campaign=relatedproducts_maps&utm_source=mapseditbutton_normal"> 
```

这是我正在使用的功能：

```
function updateMap(url) {
     GM_xmlhttpRequest(
    {
        method: 'GET',
        url: url,
        onload: function(resp) {
            var ll = resp.responseText.split("mapmaker?")[1];
            ll     = ll.split("&")[0];
            document.getElementById('googlemap').href = url+"&"+ll;
        }
    });
} 
```

我在[pastebin.com/Tt8nrzG8](http://pastebin.com/Tt8nrzG8)`responseText`放置了一个示例值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:55:24.633

响应是“缺少”HTML，因为被调用的页面通过 AJAX 加载了该 HTML（以及几乎所有页面的内容）。
`GM_xmlhttpRequest`（以及所有其他当前的 AJAX 方法）仅获取给定页面的静态源。此类 XHR 请求无法处理请求页面的 javascript，就像您浏览页面时浏览器所做的那样。

实际上，如果您将[链接的](http://pastebin.com/Tt8nrzG8)[那个示例`responseText`](http://pastebin.com/Tt8nrzG8)保存为 HTML 文件；你会看到它看起来像这样：

[![OP的样本响应](https://i.stack.imgur.com/RUQ3P.gif "点击查看大图。")](https://i.stack.imgur.com/RUQ3P.gif "点击查看大图。")

* * *

请参阅[“如何获取 AJAX 获取请求以在返回响应之前等待页面呈现？”](https://stackoverflow.com/a/11489451/331508) , 对于同一类型的问题。但请注意，答案建议您使用**API（如果可用）。**

因此，使用[Google Maps API](https://developers.google.com/maps/)获取您想要的 URL 的纬度/经度。

**或者，**最简单的方法仍然是让脚本也在 Google 地图页面上运行，并使用您的特殊 URL 参数对链接进行一次性缩放——就像我在[您之前的问题](https://stackoverflow.com/a/15843725/331508)中推荐的那样。这有一个额外的优势，即在您真正决定点击您的 Google 地图链接之前，不需要/拨打 Google 电话。

如果您*确实*选择了 iframe 方法（同样，不推荐用于任何 Google 网站），请注意您需要[调整 URL 以告诉 Google 允许 iframe](https://stackoverflow.com/a/7469997/331508)，并且纬度/经度信息将位于页面的不同部分。

# python - 有没有像 Python 对象的 jQuery 选择器之类的东西？

> ID：15913822
> 
> 赞同：1
> 
> 时间：2013-04-09T22:40:03.100
> 
> 标签：python

选择器，如 jQuery 选择器、CSS 选择器和 XPATH 都很酷。

**问题**有没有人为表示为嵌套基元（列表、字典、元组等）的 Python 对象写过类似的东西？

（注意：如果此类对象需要是非循环的，对于大多数情况，我不会认为这是一个过于极端的限制。）

**简单的例子**如果我们有这样的数据，

```
x = [
  {'xyz': 3},
  {'xyz': 4}
] 
```

`sel("[].xyz", x)`那么，如果有人能写出类似的东西并返回（也许是对）的引用，那就太好了`[3, 4]`。

**第二个简单的例子**如果我们有这样的数据，

```
x = [{'a': {'b': [1, 2]}}] 
```

然后，也许我们可以写一些类似`sel("[].a.b[]", x)`和 get的东西`[1, 2]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:04:45.683

“jQuery 选择器、CSS 选择器和 XPATH”之所以存在，是因为在其他方面很难查询 DOM、CSS 和 XML。

然而，Python 在提供清晰简洁的重新组织/查询数据结构的方法方面通常非常出色。

您的示例 ,`sel("[].xyz", x)`会习惯性地写成：

```
[d['xyz'] for d in x] 
```

它只长了五个字符，并且可以说更清晰。你的第二个例子，`sel("[].a.b[]", x)`，会习惯性地写成

```
list(itertools.chain(*[d['a']['b'] for d in x])) 
```

尽管更冗长，但不那么模棱两可（在您的示例中，我们如何知道列表需要展平）。

我认为您期望从类似语言的查询中获得的功能完全存在于以下功能集中：

1.  字典
2.  列表理解（和字典/集合理解）
3.  列表切片
4.  `itertools`模块_

# wordpress - Wordpress - 将自定义字段输出为 ul 列表

> ID：15913825
> 
> 赞同：0
> 
> 时间：2013-04-09T22:40:32.210
> 
> 标签：wordpress, custom-fields

我有一个自定义字段，我想将其内容输出为 ul 列表。

自定义字段包含用空格分隔的单词。

我正在尝试在这里使用此代码，但它不起作用。

```
 <?php
    $list_items = get_post_meta($post->ID, 'idid');

         if($list_items){
            $list_items = explode(" ", $list_items) {
                echo '<ul>';
                    foreach($list_items as $list_item)
                        echo '<li>' . $list_item . '</li>';
                echo '</ul>';
            }
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:17.477

*   1-添加`;` 前爆炸功能，并删除荣誉。
*   2-声明第二个变量，该变量不同于`$list_items`放置爆炸结果的位置。
*   get_post_meta() 的 3-second 参数应该是您的自定义字段的 slug（在您的情况下是 idid 吗？），还添加 true 参数。

您的代码将如下所示：

```
 <?php
    $list_items = get_post_meta($post->ID, 'idid', true);

         if($list_items){
            $list_items2 = explode(" ", $list_items);
                echo '<ul>';
                    foreach($list_items2 as $list_item)
                        echo '<li>' . $list_item . '</li>';
                echo '</ul>';

        }

    ?> 
```

# c - 找不到静态库

> ID：15913827
> 
> 赞同：1
> 
> 时间：2013-04-09T22:40:38.733
> 
> 标签：c, gcc, static-libraries, header-files

让我先解释一下上下文。我有一个带有函数声明的标头、一个带有函数主体的 .c 程序和主程序。

**foo.h**

```
#ifndef _FOO_H_
#define _FOO_H_

void foo();

#endif 
```

**foo.c**

```
 #include<stdio.h>
 #include "include/foo.h"

 void foo()
 {
     printf("Hello\n");

 } 
```

**mainer.c**

```
#include <stdio.h>
#include "include/foo.h"
int main()
{       foo();
        return 0;
} 
```

为了这个程序的目的，头文件和静态库都需要在不同的文件夹中，所以头文件是打开`/include/foo.h`的，生成的静态库是打开的`/lib/libfoo.a`，两个.c程序都在主目录下。思路是先生成目标程序，然后生成静态库，再链接静态库创建可执行文件，最后执行程序。

我在创建目标程序和静态库时都没有问题。

```
$ gcc -c foo.c -o foo.o

$ ar rcs lib/libfoo.a foo.o 
```

但是当我尝试链接静态库时......

```
$ gcc -static mainer.c -L. -lfoo -o mainfoo 
```

它给了我一个错误，声称找不到静态库

```
/usr/bin/ld: cannot find -lfoo
collect2: ld returned 1 exit status 
```

这很奇怪，考虑到[我之前问过如何在单独的文件夹中使用静态库和头文件，在这种情况下找到了静态库](https://stackoverflow.com/questions/15906286/static-libraries-and-headers-in-another-directories-with-gcc)。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:47:32.563

更改`-L.`为`-Llib`您在此处创建 .a 文件的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:47:18.820

我不完全确定我了解您的目录结构，但也许您需要的是：

```
gcc -static mainer.c -L./lib -lfoo -o mainfoo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T22:48:12.973

基本上链接器告诉你它找不到库 foo。它通常在默认库目录 + 任何您使用 -L 选项提供的目录中搜索。你告诉它在当前目录中查找，而不是在 libfoo.a 所在的 lib 中，这就是它找不到它的原因。您需要更改`-L.`为`-Llib`.

# r - data.table 中的 eval 和 quote

> ID：15913832
> 
> 赞同：20
> 
> 时间：2013-04-09T22:41:09.573
> 
> 标签：r, data.table

我在这里想念什么？

```
d = data.table(a = 1:5)

d[, a]                   # 1 2 3 4 5
d[, sum(a)]              # 15

d[, eval(quote(a))]      # 1 2 3 4 5
d[, sum(eval(quote(a)))] # 15

quoted_a = quote(a)
d[, eval(quoted_a)]      # 1 2 3 4 5
d[, sum(eval(quoted_a))] # Error in eval(expr, envir, enclos) : object 'a' not found 
```

到底是怎么回事？我正在跑步`R 2.15.0`和`data.table 1.8.9`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T22:53:59.257

**更新（eddi）：**从[版本 1.8.11](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable&pathrev=991)开始，这已得到修复，并且`.SD`在可以就地评估表达式的情况下不需要，例如在 OP 中。由于当前存在`.SD`触发器构建 full `.SD`，因此在某些情况下这将导致更快的速度。

* * *

发生的情况是调用`eval()`的处理方式与您在实现`[.data.table()`. 具体来说，包含以符号 开头的和表达式的`[.data.table()`特殊评估分支。当您将调用包装到调用内部时，不再是已解析/替换表达式的第一个元素，并且会跳过特殊评估分支。`i``j``eval``eval``sum()``eval`

这是通过键入显示的怪物函数`getAnywhere("[.data.table")`中的一段代码，它特别允许`eval()`通过`[.data.table()`'s `j`-argument 传入的调用：

```
jsub = substitute(j)
    ...
    # Skipping some lines
    ...
jsubl = as.list.default(jsub)
if (identical(jsubl[[1L]], quote(eval))) {  # The test for eval 'on the outside' 
    jsub = eval(jsubl[[2L]], parent.frame(), parent.frame())
    if (is.expression(jsub)) 
        jsub = jsub[[1L]]
} 
```

作为一种解决方法，要么遵循 data.table FAQ 1.6（[此处为 pdf](http://datatable.r-forge.r-project.org/datatable-faq.pdf)）中的示例，要么明确指向`eval()`保存`.SD`您正在操作的任何 data.table 列的局部变量（此处`d`）。（有关 ' 角色的更多解释，请参阅[此答案](https://stackoverflow.com/questions/15667984/can-sd-be-viewed-from-a-browser-within-data-table/15668311#15668311)`.SD`的前几段）。

```
d[, sum(eval(quoted_a, envir=.SD))] 
```

# html - 使按钮的宽度与 Firefox 中的文本输入字段相同

> ID：15913841
> 
> 赞同：4
> 
> 时间：2013-04-09T22:42:26.007
> 
> 标签：html, css

我正在尝试使文本输入元素的宽度与提交输入元素的宽度相同，出于某种原因，我正在为此苦苦挣扎。（我可能遗漏了一些非常明显的东西）。

在 Chrome、Opera、IE9 和 IE10 中，这可以解决问题：

```
input {
    box-sizing:border-box;
} 
```

但是在 Firefox 中，这*并*不能解决问题，因为文本输入仍然比提交输入长（并且最终比任何声明的宽度都长）。

**Chrome、Opera、IE9 和 IE10：**

![工作示例](https://i.stack.imgur.com/5JRqG.png)

**火狐问题：**

![火狐问题](https://i.stack.imgur.com/AtqwM.png)

*请注意，我在每个周围添加了一个 1px 边框，以使差异更加清晰。*

这是一个[JSFiddle 示例](http://jsfiddle.net/DmQcw/3/)来说明这一点。请注意，我在 Windows 7 上使用的是最新版本的 Chrome、Opera 和 Firefox。

我该怎么做才能确保所有浏览器的大小都相同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:46:57.303

Firefox 仍然不支持普通版本`box-sizing`- 你必须使用 mozilla css 扩展。

```
-moz-box-sizing: border-box; 
```

# java - 在 HttpURLConnection 中设置 setChunkedStreamingMode 无法将数据传递到服务器

> ID：15913844
> 
> 赞同：7
> 
> 时间：2013-04-09T22:42:41.800
> 
> 标签：java, android, apache, httpurlconnection

我的服务器版本在我的开发机器上如下：

> Apache/2.2.21 (Win32) mod_fcgid/2.3.6

我一直在测试`HttpURLConnection`，因为我的项目需要简单的流媒体功能。我已经阅读了@BalusC 关于如何使用该课程的精彩概要。

> [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/q/2793150/317889)

我目前遇到的麻烦是在设置`setChunkedStreamingMode`. 无论我将它设置为~~我的流什么，似乎都没有将它发送到服务器~~，当我的服务器 api 方法/连接被调用/创建时，数据流是空的。但是，如果我删除它，它工作正常。

我见过另一个有类似问题的人：

> [Java/Android HttpURLConnection setChunkedStreamingMode 不适用于所有 PHP 服务器](https://stackoverflow.com/q/12249885/317889)

但没有真正的解决方案。我无法将其设置为`setFixedLengthStreamingMode`仅仅因为内容（json）的长度是可变的。

这不行。我可能会传输大量数据，因此无法将数据存储在内存中。

我的问题是，我怎样才能让 setChunkedStreamingMode 玩得很好？这是服务器设置问题还是可以在代码中修复？

**编辑** 我现在已经在我的生产服务器上测试了我的代码，它没有问题。但是，我仍然想知道为什么我的本地机器上的 Apache 服务器会失败。任何帮助仍然非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:26:38.850

尝试添加此 HTTP 标头：

```
urlConnection.setRequestHeader("Transfer-Encoding","chunked"); 
```

我遇到了这样的问题：虽然我设置了分块 HTTP 流模式（urlConnection.setChunkedStreamingMode(0)），但它不起作用，但将 HTTP 标头放在它上面可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T23:45:00.897

我在使用`HttpURLConnection`. 只需添加：

```
conn.setRequestProperty("connection", "close"); // disables Keep Alive 
```

到您的连接或为所有连接禁用它：

```
System.setProperty("http.keepAlive", "false"); 
```

从关于disconnect()的API：

> 释放此连接，以便其资源可以被重用或关闭。与其他 Java 实现不同，这不一定会关闭可重用的套接字连接。您可以通过在发出任何 HTTP 请求之前将 http.keepAlive 系统属性设置为 false 来禁用所有连接重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T16:55:32.360

我有一个类似的问题。在我的情况下，它是安装了病毒扫描程序的客户端系统。这些扫描仪有时具有身份盗用模块，可以拦截`POST`s，扫描身体，然后将其传递。

在我的情况下`BitDefender`，在传递之前缓存了大约 5MB。

如果整个有效负载较少，则`POST`作为非分块固定长度请求交付。

# python - 什么是更 Pythonic 的方式根据长度生成一个新的列表列表？

> ID：15913851
> 
> 赞同：1
> 
> 时间：2013-04-09T22:43:18.977
> 
> 标签：python

我有一个列表列表，对于列表中的每个列表，我想将其拆分为两个列表，以便每个列表的长度最大为 30，否则我会丢弃无法放入 30 且不包含的剩余部分t 大约接近 30。

例如：列表 1 的长度为 64 -> 将其拆分为 30、30 的两个列表，并丢弃剩余的 4 个。

或列表 2 的长度为 41，我生成一个 30 的新列表并丢弃 11。

或列表 3 的长度为 58，我生成两个 30 和 28 的列表。

我正在使用我发现的列表拆分功能：[https ://stackoverflow.com/a/1751478/2027556](https://stackoverflow.com/a/1751478/2027556)

现在我的代码是这样的：

```
new_list = []
for list_ in cluster:
    if len(list_) < 31 and len(list_) > 24:
       new_list.append(list_)
    elif len(list_) >= 31:
       chunks_list = chunks(list_, 30)
       for item in chunks_list:
          if len(item) > 25:
             new_list.append(item) 
```

正如你现在所看到的，我只是在制作一个新列表并浏览旧列表，但我认为有一个更优雅的 pythonic 解决方案可能使用列表理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:51:13.837

无需太聪明，您可以使用以下`step`参数`range()`：

```
cluster = list(range(100))
chunk_size = 30
result = [cluster[start:start+chunk_size] 
          for start in range(0, len(cluster), chunk_size)]
# discard last chunk if too small - adjust the test as needed
if len(result[-1]) < chunk_size:
    del result[-1] 
```

的值`result`将是一个列表列表：

```
[ [0, 1, ..., 29],
  [30, 31, ..., 59],
  [60, 61, ..., 89] ] 
```

（也就是说你还没有真正描述过输入和输出的内容——即没有给出具体的例子。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:53:57.320

首先，我会使用[文档](http://docs.python.org/2/library/itertools.html#recipes)`grouper`中的配方来获取组：[`itertools`](http://docs.python.org/2/library/itertools.html#recipes)

```
new_list = list(grouper(30, cluster)) 
```

然后过滤最后一组以删除`fillvalue`条目，如果结果不是“大约接近 30”，则将其删除。

```
new_list[-1] = list(filter(None, new_list[-1]))
if len(new_list) < chunk_size:
    del result[-1] 
```

如果`None`是一个有效的元素，使用其他东西作为哨兵：

```
sentinel = object()
new_list = list(grouper(30, cluster, fillvalue=sentinel)
new_list[-1] = [element for element in new_list[-1] if element is not sentinel]
if len(new_list[-1]) < chunk_size:
    del result[-1] 
```

同时，有一些关于添加`zip_strict`to的讨论`itertools`，这将允许`grouper`返回一个简短的最终组的配方，而不是用`fillvalue`. 如果这发生在 3.4 中，您可以将其简化为：

```
new_list = list(grouper(30, cluster, strict=True))
if len(new_list[-1]) < chunk_size:
    del result[-1] 
```

或者，当然，您可以使用 python-ideas 列表中的“严格分组器”实现之一，或者只是编写自己的来包装上面的`grouper`and`filter`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:55:36.013

如果你真的想要一个列表理解..

```
new_list = [cluster[i:i+30] for i in xrange(0, len(cluster), 30) if len(cluster[i:i+30]) > 25] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:16:36.853

修改[`grouper`](http://docs.python.org/2/library/itertools.html#recipes)from python itertools，您可以执行以下操作：

```
def grouper(n, iterable, max_chunks):
    args = [iter(iterable)] * n
    chunks = []

    for zipped in zip_longest(fillvalue=None, *args):
        chunks.append([x for x in zipped if x is not None])
        if(len(chunks) == max_chunks):
            break

    return chunks

new_lists = [grouper(10,li,2) for li in list_list] 
```

这将返回一个块列表，即您的拆分列表。
如果你想让它更扁平一点，你可以这样称呼它：

```
new_lists = []
for li in list_list:
    new_lists.extend(grouper(10,li,2)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T22:51:24.253

像下面这样的东西应该可以工作：

```
tmp = ((x[i:i+30] for i in range(0, len(x), 30)) for x in cluster)
new_list = [x for lst in tmp for x in lst if len(x) > 25] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T22:52:00.110

`new_list = [[lst[i*30:(i+1)*30] for i in xrange(len(lst)/30)] for lst in cluster]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T22:57:29.787

您可以使用生成器函数以及`itertools.islice`：

```
In [11]: from itertools import islice

In [12]: lis=[range(64),range(41),range(58)]

In [13]: def solve(lis):
    for x in lis:
        it=iter(x)
        q,r=divmod(len(x),30)
        if r>25:
            for _ in xrange(q+1):
               yield list(islice(it,30)) 
        else:        
            for _ in xrange(q):
                yield list(islice(it,30))
   ....:                 

In [14]: map(len,list(solve(lis))) #use just `list(solve(lis))` to get the desired answer
Out[14]: [30, 30, 30, 30, 28] # (30,30) from 64, (30) from 41, and (30,28) from 58 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T23:03:23.560

对于两个列表，只需写 2 个切片

```
new_list = [cluster[:30], cluster[30:60]] 
```

# posix - 如何将 SUA 从不区分大小写更改为区分大小写

> ID：15913852
> 
> 赞同：0
> 
> 时间：2013-04-09T22:43:22.270
> 
> 标签：posix, case-sensitive, sua

在安装基于 Unix 的应用程序 (SUA) 的子系统时，我错误地取消了“区分大小写”复选框。现在，当我尝试在[此链接](http://www.suacommunity.com/bundles.aspx)上安装“来自 Interop Systems 的附加包”时，它会发出警告，不区分大小写可能会导致问题。（很抱歉，我关闭了提示并且没有复制原点它说的句子）

我想知道如何将我的 SUA 更改为区分大小写？通过修改配置文件或注册表或是否有控制面板？[这个网站](http://answers.microsoft.com/en-us/windows/forum/windows_7-files/configure-case-sensitivity-for-files-and-folders/aff2d548-edc3-4353-b804-af31b163bd44 "为文件和文件夹配置区分大小写")会有帮助吗？

PS：我的母语不是英语（可能你发现了很多语法错误），请用简短的英语好吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:26:33.970

[我在这个网站](http://www.suacommunity.com/faqs.aspx#113)上自己找到了解决方案

> 我们始终建议您在安装期间打开文件系统区分大小写。如果您没有（或由于无人值守安装而不能），您现在可以通过编辑注册表来打开它。前往地点
> 
> ```
>  HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\kernel 
> ```
> 
> 并且键“obcaseinsensitive”应设置为 0x0 以打开区分大小写。现在重新启动系统。

# wordpress - WordPress隐藏类别特定的html

> ID：15913855
> 
> 赞同：1
> 
> 时间：2013-04-09T22:43:41.310
> 
> 标签：wordpress, categories, woocommerce

我正在寻找一种方法来隐藏 WooCommerce 中的“表单”下拉菜单，但仅限于特定类别页面。我们将其称为“大理石”，下拉菜单用于选择我不想出现的项目的顺序，但在“苹果”类别和其他页面上，我希望它保持可见。我试过使用类似的代码，`#category-id-15 form.woocommerce-ordering {display: none;}`但这似乎没有奏效。这可以仅使用 CSS 来完成，还是我需要为它创建一个操作？
这是我试图隐藏下拉菜单的页面 -
[类别页面](http://kdrosaries.com/product-category/rosary-czech-crystals/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:12:49.950

您可以使用 CSS 隐藏它。但 Wordpress 提供了`is_category()`执行此类操作的功能。

在您的 category.php 文件中，尝试使用这个：

```
 if (!(is_category('marbles'))){
        include(TEMPLATEPATH.'/part.php'); 
    } 
```

`part.php`下拉菜单的 php 代码在哪里。

我来这里是为了提供更多支持。

# c++ - std::set.insert 不会用自定义类编译

> ID：15913857
> 
> 赞同：5
> 
> 时间：2013-04-09T22:43:50.873
> 
> 标签：c++, class, insert, compilation, set

我有一个类 Record，它具有三个私有整数字段、getter 和 setter，以及一个默认和特定的构造函数。我打算用记录填充一组，但在使代码正常工作时遇到问题。

```
#include <set>
using namespace std;

class Record
{
    int a, b, c;
    public:
    //getters and setters
    Record(){a = -1; b = -1; c = -1;};
}

int main()
{
    set< Record > s;
    s.insert(Record());
} 
```

尝试编译会导致此错误：

> C:\Users\Denton\Documents\Indiana University\Class Documents\Spring 2013\CSCI-H2 12\Assignment9>g++ a9.cpp -o a9 在包含在 c:\mingw\bin../lib/gcc/mingw32 的文件中/4.6.2/include/c++/string:5 0:0，来自 c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/loc ale_classes.h:42，来自c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/ios _base.h:43，来自 c:\mingw\bin../lib/gcc/mingw32/4.6。 2/include/c++/ios:43, 来自 c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/ostream: 40, 来自 c:\mingw\bin../lib/ gcc/mingw32/4.6.2/include/c++/iostream :40，来自 a9.cpp:3: c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_function。 h：在成员函数中'bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _ Tp = Record]': c:\mingw\bin../lib/gcc/mingw32/4.6.2/include /c++/bits/stl_tree.h:1267:4: 从 'std::pair, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(const _Val&) [with _Key =记录，_Val = 记录，_KeyOfValue = std::_Identity，_Compare = std::less，_Alloc = std::allocator]' c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/ c++/bits/stl_set.h:410:29: 从 'std::pair, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator, bool> std::set <_Key, _Compare, _Alloc>::insert(const value_type&) [with _Key = Record, _Compar e = std::less, _Alloc = std::allocator, typename std::_Rb_tree<_ Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other> ::const_iterator = std::_Rb_tree_const_iterator, std::set<_Key, _Compare , _Alloc>： :value_type = Record]' a9.cpp:72:28: 从这里实例化 c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_function.h:236:22:错误：在 '__x < __y' c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_function.h:236:22 中与 'operator<' 不匹配：否te：候选人是：c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_pair.h:207:5：注意：t emplate bool std::operator<(const std::pair<_T1, _T2>&, 常量 std::pair<_T1, _T2>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_iterator .h:291:5:不是 e: 模板 bool std::operator<(const std::reverse_iterator<_It erator>&, const std::reverse_iterator<_Iterator>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2 /include/c++/bits/stl_iterator.h:341:5: not e: template bool std::operator<(const std::r everse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&) c:\ mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2510:5：注意：模板 bool std::operator<(cons t std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _ Traits, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h: 2522:5：注意：模板 bool std::operator<(cons t std::basic_string<_CharT, _Traits, _Alloc>&,const _CharT*) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/basic_string.h:2534:5：注意：模板 bool std::operator<(cons t _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_vector.h:1290:5:注意：模板 bool std::operator<(const std::vector<_Tp, _ Alloc>&, const std::vector<_Tp, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/ 4.6.2/include/c++/bits/stl_list.h:1593:5：注意：模板 bool std::operator<(const std::list<_Tp, _Alloc>&, const std::list<_Tp, _Alloc >&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:856:5: 注意：t emplate bool std::operator<(const std: :_Rb_tree<_Key, _Val, _KeyOfValue, _Compare,_All oc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_set。 h:713:5: 注意：模板 bool std::operator<(const std:: set<_Key, _Compare, _Alloc>&, const std::set<_Key, _Compare, _Alloc>&) c:\mingw\ bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_multiset.h:696:5: not e: template bool std::operator<(const std::multiset<_Key, _Compare, _Alloc >&, const std::multiset<_Key, _Compare, _All oc>&)const std::set<_Key, _Compare, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_multiset.h:696:5: 不是 e:模板 bool std::operator<(const std::multiset<_Key, _Compare, _Alloc>&, const std::multiset<_Key, _Compare, _All oc>&)const std::set<_Key, _Compare, _Alloc>&) c:\mingw\bin../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_multiset.h:696:5: 不是 e:模板 bool std::operator<(const std::multiset<_Key, _Compare, _Alloc>&, const std::multiset<_Key, _Compare, _All oc>&)

当我制作 set s 和 s.insert(1) 时插入工作正常 编译这段代码需要做什么？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T22:52:34.467

您需要重载`operator<`: ，如下所示：

```
bool operator<(const Record& rhs) const 
{
   return a < rhs.a;  //assume that you compare the record based on a
} 
```

原因是 STL 集维护元素的顺序。std::set 支持指定比较函数。默认值`less`将用于`operator <`检查相等性。

同时，你必须结束你的类定义，`;`否则编译错误。

```
class Record
{
   int a, b, c;
   public:
   //getters and setters
   Record(){a = -1; b = -1; c = -1;};
}; //<---Cannot miss this ; 
```

# sql - SQL Server 约束（基于外键的限制位字段）

> ID：15913860
> 
> 赞同：0
> 
> 时间：2013-04-09T22:44:11.910
> 
> 标签：sql, sql-server, constraints

我需要有关 SQL Server 约束的帮助。情况是对于表上的每个OrderID=1（外键不是主键所以有多个具有相同ID的行），其中一个行的位字段只能为1，并且对于OrderID=2的每一行，位字段只能为 1 一行，依此类推。对于具有相同 OrderID 的所有其他行，它应该为 0。如果已经有一行具有该 OrderID 且位字段设置为 1 的行，则位字段中带有 1 的任何新记录都应拒绝。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:36:19.990

```
CREATE UNIQUE INDEX ON UnnamedTable (OrderID) WHERE UnnamedBitField=1 
```

它被称为[过滤索引](http://msdn.microsoft.com/en-gb/library/ms188783.aspx)。如果您使用的是 2008 之前的 SQL Server 版本，则可以使用索引视图实现过滤索引的穷人等效项：

```
CREATE VIEW UnnamedView
WITH SCHEMABINDING
AS
    SELECT OrderID From UnnamedSchema.UnnamedTable WHERE UnnamedBitField=1
GO
CREATE UNIQUE CLUSTERED INDEX ON UnnamedView (OrderID) 
```

您不能真正将其作为约束来执行，因为 SQL Server 仅支持列约束和行约束。没有（非伪造）方法可以编写处理表中所有值的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:51:28.603

您可以更全面地规范模式，这将帮助您不必寻找已经设置的位，而是使用连接。您需要删除位字段并创建一个新表，例如 X，其中包含 OrderID 和表的主键，X 的主键是所有这些字段。

这意味着当您插入时，您需要插入到原始表和 X f 中，并且只有在您将表上的位设置为 1 的情况下。如果 X 中已经有一行，则插入将失败，就好像已经有一个原始行的位设置为 1。

缺点是这比您的架构占用更多空间，但更容易维护，因为您无法达到将位设置为 1 的两行的等价物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:12:48.737

我同意其他答案，如果您可以更改架构，那么就这样做，但如果不是，那么我认为这样的事情会做。

```
CREATE FUNCTION fnMyCheck
    (@id INT)
RETURNS INT
AS
BEGIN
    DECLARE @i INT

    SELECT @i = COUNT(*)
    FROM MyTable 
    WHERE FkCol = @id 
    AND BitCol = 1

    RETURN @i
END

ALTER TABLE YourTable
ADD CONSTRAINT ckMyCheck CHECK (fnMyCheck(FkCol)<=1) 
```

但是在检查约束中使用 udf 可能会出现问题，[例如](http://sqlserverpedia.com/blog/sql-server-bloggers/check-constraints-that-call-functions/)

编辑以添加有关此“解决方案”问题的评论：

*有比您链接到的更直接的问题。*

```
INSERT INTO YourTable(FkCol,BitCol) VALUES (1,1),(1,0) 
```

*其次是*

```
UPDATE YourTable SET BitCol=1 
```

*成功并留下两行 FkCol=1 和 BitCol=1*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:54:39.783

唯一的方法是对父表进行子类化。您没有提到它，但这种模式的一个常见原因是从具有相同公共键值的所有行的集合中表示一个唯一的活动行。假设您的位字段表示***活动***订单...。然后我将创建一个名为***ActiveOrders***的单独表，该表将仅包含位字段设置为 1 的一行

```
Create Table ActiveOrders(int Orderid Primary Key Null) 
```

和另一个包含***所有***行的表，它有自己唯一的主键 OrderId

```
Create Table AllOrders
(OrderId Integer Primary Key Not Null, ActiveOrderId Integer Not Null,
 [All other data fields]
 Constraint FK_AllOrders2ActiveOrder
    Foreign Key(ActiveOrderId) references ActiveOrders(OrderId)) 
```

您现在甚至不再需要位字段，因为 ActiveOrders 表中的行将其标识为活动订单...仅获取活动订单（在您的方案中将位字段设置为 1 的那些） ，只需加入两个表。

# entity-framework - 如何使用 ASP.NET MVC 4 中的实体框架？

> ID：15913861
> 
> 赞同：0
> 
> 时间：2013-04-09T22:44:13.277
> 
> 标签：entity-framework, asp.net-mvc-4

我开始使用 ASP.NET，但我遇到了问题。我在 Visual Studio 中创建了一个 MVC4 应用程序。然后在模型中，我使用 Database first 方法添加了一个 ADO.NET 实体数据模型。一切正常，直到我收到错误消息时尝试添加新控制器：`'Projectname.Models.Tablename' is not part of specified 'Projectname.Models.Contextname' class and the 'Projectname.Models.Contextname' class could not be modified to add a DbSet<Projectname.Models.Tablename> property to it.` 我的错误是什么？

这是我生成的模型：

```
 public partial class Example
    {
        public int ID { get; set; }
        public string Name { get; set; }
    } 
```

在这里结束是我生成的上下文：

```
public partial class TestEntities : DbContext
    {
        public TestEntities()
            : base("name=TestEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Example> Example { get; set; }
    } 
```

# arrays - Java 的级联和显示

> ID：15913867
> 
> 赞同：0
> 
> 时间：2013-04-09T22:44:34.897
> 
> 标签：arrays, methods, recursion, char, minesweeper

我正在制作一个 Java Mine Sweeper 程序。到目前为止，除了级联和显示之外，一切都很顺利。我不断收到 StackOverFlowError。有人可以看看并帮助我吗？谢谢！

```
public static char[][]revealCell(int xbox, int ybox, char blankboard [] [], char     RevealedBoard [][]){

if( RevealedBoard[ybox][xbox]== 'B'){
blankboard[ybox][xbox]= 'B';
return blankboard;

}else if( RevealedBoard[ybox][xbox]== '1'){
blankboard[ybox][xbox]= '1';
return blankboard;
}

else if( RevealedBoard[ybox][xbox]== '2'){
blankboard[ybox][xbox]= '2';
return blankboard;

}else{
blankboard[ybox][xbox]= '-';

    if( xbox== 0){ // left of the grid 

        if(ybox==0){
        blankboard= revealCell(xbox+1, ybox, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox+1, ybox+1, blankboard, RevealedBoard);
        return blankboard;
        }else if( ybox== 7){
        blankboard= revealCell(xbox+1, ybox, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox+1, ybox-1, blankboard, RevealedBoard);              
        return blankboard;
        }else{
        blankboard= revealCell(xbox+1, ybox, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox +1, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox+1, ybox+1, blankboard, RevealedBoard);
        return blankboard;
        }

    }else if(xbox== 7){// right of the grid
    blankboard= revealCell(xbox-1, ybox, blankboard, RevealedBoard);

        if(ybox== 7){
        blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox-1, ybox-1, blankboard, RevealedBoard);
        return blankboard;
        }else if( ybox==0){                                                             
        blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox-1, ybox+1, blankboard, RevealedBoard);
        return blankboard;
        }else{
        blankboard= revealCell(xbox-1, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox-1, ybox+1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
        return blankboard;
        }

    }else{
        if(ybox== 0){
        blankboard= revealCell(xbox-1, ybox, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox-1, ybox+1, blankboard, RevealedBoard);
        return blankboard;
        }else if( ybox==7){
        blankboard= revealCell(xbox-1, ybox, blankboard, RevealedBoard);
        blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
        blankboard= revealCell(xbox-1, ybox-1, blankboard, RevealedBoard);
        return blankboard;
        }else{
    blankboard= revealCell(xbox, ybox-1, blankboard, RevealedBoard);
    blankboard= revealCell(xbox-1, ybox-1, blankboard, RevealedBoard);
    blankboard= revealCell(xbox+1, ybox-1, blankboard, RevealedBoard);
    blankboard= revealCell(xbox-1, ybox+1, blankboard, RevealedBoard);
    blankboard= revealCell(xbox, ybox+1, blankboard, RevealedBoard);
    blankboard= revealCell(xbox-1, ybox, blankboard, RevealedBoard);
    blankboard= revealCell(xbox+1, ybox, blankboard, RevealedBoard);
    blankboard= revealCell(xbox+1, ybox+1, blankboard, RevealedBoard);

    }
    }

}
return blankboard;
}

} 
```

revealCell 是我的方法，对于我在学校的实际课程，我们必须使用递归。我认为这是我们应该做的，但我遇到了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:44:20.363

检查递归的停止条件，你确定你只能得到'B'，'1'或'2'，当一个单元格有3个地雷时会发生什么？顺便说一句，我认为如果每个单元格显示您检查所有邻居（包括越界）并且在函数开始时检查是否是有效单元格（(xbox >=0 && xbox <=7) ||(ybox>=0 && ybox<=7))，如果它不是有效单元格，则按原样返回数组。

# python - 尝试在 Python 3.3 上“repo init”时出现 TypeError

> ID：15913868
> 
> 赞同：6
> 
> 时间：2013-04-09T22:45:06.717
> 
> 标签：python, git, python-3.x, repository

我有 Arch Linux Python 3.3.0 我已经下载了最新的 repo，如果我尝试从 Google 示例中执行 repo init，我会收到以下错误：

```
 [username@otp-username-l2 teste]$ repo init -u https://android.googlesource.com/platform/manifest
 Traceback (most recent call last):
 File "/home/username/bin/repo", line 738, in <module>
main(sys.argv[1:])
File "/home/username/bin/repo", line 705, in main
_Init(args)
 File "/home/username/bin/repo", line 234, in _Init
_CheckGitVersion()
 File "/home/username/bin/repo", line 274, in _CheckGitVersion
if not ver_str.startswith('git version '):
TypeError: startswith first arg must be bytes or a tuple of bytes, not str 
```

我被迫做一个新的 repo init 的原因是我必须从一个已经初始化的 repo 进行提交，但是我已经从任何地方更改了 git 用户，我仍然得到这个：

```
Writing objects: 100% (12/12), 966 bytes, done.
Total 12 (delta 11), reused 0 (delta 0)
o ssh://new.username@128.224.0.74:29418/stelvio/mm
![remote rejected] branchname -> refs/for/main_dev (you are not committer  oldusername@email.com)
 error: failed to push some refs to 'ssh://new.username@128.224.0.74:29418/project/one' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T23:39:15.463

Repo 尚未完全支持 Python 3。一些工作已经完成，例如[使用该`print`函数](https://gerrit.googlesource.com/git-repo/+/cecd1d864fc3cf02cf50d367111e0d0e173c5dc6)并[导入正确的 urllib](https://gerrit.googlesource.com/git-repo/+/1f7627fd3ccab0fbab88ad2d082b67f5719af92c)，但这项工作似乎还没有完成。

现在，您需要在 Python 2 中使用它。您可以`repo`通过替换来编辑可执行文件顶部的 shebang `python`，`python2`或者您可以运行：

```
python2 `which repo` 
```

假设您在路径中安装了 Python 2 版本，即`python2`.

您可以轻松地重现该问题：

```
Python 3.2.3 (default, Nov  7 2012, 19:36:04) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> b'asd'.startswith('asd')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: startswith first arg must be bytes or a tuple of bytes, not str 
```

这是相关的代码`_CheckGitVersion()`：

```
def _CheckGitVersion():
  cmd = [GIT, '--version']
  try:
    proc = subprocess.Popen(cmd, stdout=subprocess.PIPE)

   ...

  ver_str = proc.stdout.read().strip()
  proc.stdout.close()
  proc.wait()

  if not ver_str.startswith('git version '): 
```

`read`调用的返回，因此传递给`stdout`的内容也必须是（原始数据字节）而不是（一系列 Unicode 代码点）。`Popen``bytes``startswith``bytes``str`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-11T09:12:49.543

在尝试恢复我的 P990 时偶然发现了这个错误。

第一个修复是修改 repo 命令（在你的情况下在 ~/bin 中，否则检查哪个 repo 找到它在哪里）并将第一行从

```
#!/usr/bin/env python 
```

至

```
#!/usr/bin/env python2 
```

这允许您 repo init，但您会遇到 klauspeter 提到的消息：

```
error: Python 3 support is not fully implemented in repo yet.
Please use Python 2.6 - 2.7 instead. 
```

我不建议更改系统范围的符号链接。相反，导航到新创建的 .repo 文件夹。

如果您在 $basedir 中启动 repo init，您需要检查 $basedir/.repo/repo。在里面你会发现一个本地 repo 安装，同样有一个带有普通“python”的 shebang（我们想要 python2）。

因此，根据上述第一步编辑包含该行的所有文件（**main.py、repo 和 wrapper.py ），一切顺利。**对我来说，repo 现在甚至要求我更新我的全局安装（即，将 $basedir/.repo/repo/repo 复制到 ~/bin），您可以随意执行此操作（该版本现在已“修复”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T17:19:41.103

我遇到了同样的问题，agf 的解决方案使 repo-script 工作，但它仍然退出说明它不适用于 python 3：

> 错误：Python 3 支持尚未在 repo 中完全实现。
> 请改用 Python 2.6 - 2.7。

对我来说，解决这个问题的（诚然相当肮脏）的方法是将 python bin 的符号链接从 python3 更改为 python2。

完成后请记住将其还原！

# javascript - 无法为 Sencha Touch 双滑块设置正确的值

> ID：15913870
> 
> 赞同：1
> 
> 时间：2013-04-09T22:45:31.030
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

由于性能原因，我正在尝试实现 Sencha Touch 双范围滑块来替换当前具有相同功能的 jQuery Mobile 实现。

我似乎无法正确设置滑块上的值 / maxValue。鉴于我几个小时前第一次看到 Sencha，我不确定我是否遗漏了什么。

这是一个演示我遇到的问题的[小提琴。](http://jsfiddle.net/sZ96p/)

在这种情况下，第二个句柄似乎不会显示超过中间标记，使用：

```
minValue: 0,
maxValue: 200,
values: [30, 165] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T11:55:57.023

Sliderfield 仅支持 0 - 100 范围内的值。我不知道为什么会这样（可能是 Sencha 的错误或缺陷）。如果您使用滑块而不是滑块字段，则不会出现此问题。所以你应该像这样重新校准你的滑块

```
{
xtype: 'selectfield',
increment: 0.5
} 
```

希望能帮助到你

# c# - 将图像作为流发送 (Android)

> ID：15913882
> 
> 赞同：2
> 
> 时间：2013-04-09T22:46:30.620
> 
> 标签：c#, android, rest

我设置了一个 REST 服务来接收数据流以将其保存为图像。

```
[OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "UpImage/{path}")]
    void UpImage(string path, Stream filecontents);

public void UpImage(string path, Stream filecontents)
    {
        Image img = System.Drawing.Image.FromStream(filecontents);
        img.Save(System.Web.Hosting.HostingEnvironment.MapPath("~/attachments/test/") + "SrvTest.jpg", ImageFormat.Jpeg);
    } 
```

我想通过 android 上的 AsyncTask 来连接到服务并收集它的响应。

我的问题是我不确定如何将图像作为流发送，我看到很多信息将它们作为字节数组发送。这可能吗？如果可以，如何？

# asp.net - Winform浏览器控件“附件”按钮

> ID：15913883
> 
> 赞同：0
> 
> 时间：2013-04-09T22:46:36.690
> 
> 标签：asp.net, ajax, winforms

我们有一个带有浏览器控件的 winform 应用程序。以前这些文件（总是非常小的 10kb 等）存储在 unc 位置。我们将生成一些 html 并将 html 加载到浏览器中。如果我们想让这些小文件之一可用，我们将在 HTML 中包含一个锚标记 () 当 html 显示在浏览器控件中时，链接也会显示。用户可以单击链接，将出现文件另存为对话框。

我们现在将这些文件作为 varbinary 存储在数据库中，因此不再有锚标记指向的物理位置。我有几个想法，但希望比我聪明得多的 SO 成员插话。

在我看来，选项 1 是在 html 中添加一个图像按钮、锚标记、可单击的内容。我会在 javascript 中或作为回发处理“onclick”。这对于我的知识水平似乎是可行的，除了我不知道如何将字节 [] 转换为用户的另存为对话框......我是否先将其渲染到磁盘？

我的另一个想法是有一个**不在**浏览器控件中的按钮。如果 biz 规则要求显示文件，则此按钮将隐藏/可见。单击该按钮将生成 byte[]，它很容易变成一个文件，并保存为 winform 应用程序中显示的对话框。

所以任何想法或所有不同的建议都欢迎TIA JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:46:53.293

我了解您可以控制 Windows 窗体 Web 浏览器控件中显示的 ASP.NET 网页，因此您可以编辑该页面并按照您想要的方式构建它。

如果这是真的，托管网络浏览器或普通 IE 会话中的行为是相同的，我建议在 asp.net 网页表单页面中创建一堆超链接或按钮，每个都有一个特定的 ID，比如 ID要下载的文件。然后您可以创建一个处理程序或 button_click 事件处理程序，您可以在其中通过单击的按钮/链接关联的文件 ID 获取文件的字节 []，或者如果您启动了处理程序调用，则从查询字符串中获取文件的字节 []，然后开始向下流式传输到浏览文件内容，浏览器会为你做所有需要的事情。

例如，作为起点，从这里获取的一些代码：http: [//social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/d6a5087f-43b1-4782-95f1-d1376130d2c8](http://social.msdn.microsoft.com/Forums/en-US/silverlightnet/thread/d6a5087f-43b1-4782-95f1-d1376130d2c8)

向您展示了一种从页面加载中执行此操作的可能方法，诀窍是调用为`GetDocument`您获取正确的文件内容（在这种情况下来自查询字符串，想象一下如果我们在处理程序处理方法中）并返回一个`DocumentInfo`包含字节的类。你也不需要这个 DocumentInfo，你可以有一个方法，`byte[]`例如通过 File Id 返回...

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        string queryString = this.Request.QueryString.ToString();
        if (string.IsNullOrEmpty(queryString)) return;

        DocumentInfo documentInfo = GetDocument(queryString);

        if (!documentInfo.HasValue) return;

        Response.ClearHeaders();
        Response.ClearContent();

        Response.AppendHeader("Content-Length", documentInfo.Value.Content.Length.ToString());

        Response.ContentType = "application/octet-stream";

        Response.AppendHeader("Content-Disposition", "attachment; filename=Test.doc");

        Response.BinaryWrite(documentInfo.Value.Content);

        Response.End();
    }
} 
```

# javascript - 性能 - 在初始化时完成字符串连接

> ID：15913888
> 
> 赞同：0
> 
> 时间：2013-04-09T22:47:14.543
> 
> 标签：javascript, underscore.js

Underscore.js 做了这个很酷的事情。这是他们修改的代码。

```
NS.as(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
    NS['is' + name] = function(obj) {
        return toString.call(obj) == '[object ' + name + ']';
    };
}); 
```

这些函数是在第一次通过时创建的，然后可供开发人员使用。

```
NS.isFunction()
NS.isString(),
etc. 
```

但是，我想要这个值

```
'[object ' + name + ']'; 
```

硬编码，因此不会为每个调用计算。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:51:31.280

您可以在创建函数之前创建字符串，并将其放入局部变量中。由于它是函数中的局部变量，因此每次迭代都有自己的值：

```
NS.as(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {

  var objName = '[object ' + name + ']';

  NS['is' + name] = function(obj) {
    return toString.call(obj) == objName;
  };

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:51:44.730

```
NS.as(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
    var typeId = '[object ' + name + ']';
    NS['is' + name] = function(obj) {
        return toString.call(obj) == typeId;
    };
}); 
```

# mysql - 子查询是解决这个问题的方法吗？

> ID：15913892
> 
> 赞同：0
> 
> 时间：2013-04-09T22:47:39.953
> 
> 标签：mysql, database, subquery

这是表结构和一些示例数据：

```
pID.....month.....year

27 .....3    .....2008

27 .....12   .....2012

31 .....6    .....2008

99 .....1    .....2006

42 .....1    .....2009 
```

pID 是 practiceID，月份和年份表示他们输入数据的日期。我需要获取 2012 年 10 月、2012 年 11 月、2012 年 12 月等第一次输入数据的实践数量。我在 2012 年 10 月尝试了以下查询：

```
SELECT *
FROM
    IPIPKDIS
where
    practiceID NOT IN (
         SELECT practiceID
         from
             IPIPKDIS
         where
             year < 2012 and month < 10
    )
    and year = 2012
    and month = 10
    and measureCatRecID = 2
ORDER BY year, month; 
```

但它比 10/2012 少了几个月和一年。

如果我单独运行查询（而不是子查询），它们都可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:12:56.013

此摘要查询将为每个 practiceID 值生成表中的第一个（最小）日期。

```
SELECT practiceID,
       MIN(STR_TO_DATE( CONCAT(year, ' ', month), '%Y %m')) first_date 
  FROM IPIPKDIS 
 GROUP BY practiceID 
```

如果您想检索第一个报告月份的整行，您将执行如下嵌套查询：

```
SELECT *
  FROM IPIPKDIS I
  JOIN (
    SELECT practiceID,
           MIN(STR_TO_DATE( CONCAT(year, ' ', month), '%Y %m')) first_date 
      FROM IPIPKDIS 
     GROUP BY practiceID
       ) first ON (    first.practiceID = I.practiceID 
               AND STR_TO_DATE( CONCAT(I.year, ' ', I.month), '%Y %m') = first.first_date) 
```

第二个查询的技巧是使用 JOIN 从表中提取第一个月的行。我们使用日期算术来进行日期比较。

# java - 在释放按钮之前不要单击

> ID：15913893
> 
> 赞同：0
> 
> 时间：2013-04-09T22:47:45.760
> 
> 标签：java, button, lwjgl, slick

您好，我现在正在制作一个简单的游戏，当您在播放屏幕上时，您可以按 esc 打开菜单。有一个主菜单按钮可将您从播放屏幕带到主菜单屏幕，问题是它会将它们带到主菜单屏幕，然后单击与游戏相同的主屏幕上的按钮菜单，因此它会在您释放按钮之前单击主菜单上的按钮。这是我的一些课程

这是我的菜单类（主屏幕）[http://pastebin.com/kc5Dx2bp](http://pastebin.com/kc5Dx2bp)

这是我的游戏课（游戏画面）[http://pastebin.com/Gr3y9Amj](http://pastebin.com/Gr3y9Amj)

有没有办法让它在释放鼠标按钮之前不能单击另一个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:33:40.470

基本上，您可以使用`ButtonModel`来跟踪按钮状态的更精细更改，然后`ActionListener`为您提供。

此示例监控模型的状态`armed`和`pressed`状态，并根据特定条件采取行动。

这是一个小技巧，因为您正在寻找的状态不仅会在释放按钮时出现，而且会在第一次按下按钮时出现。我们所做的是等到之前的状态是按下按钮并且按钮`pressed`状态是`false`，然后我们知道我们有一个按钮释放

```
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.ButtonModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestButton05 {

    public static void main(String[] args) {
        new TestButton05();
    }

    public TestButton05() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JButton btn = new JButton("Clicked");
                btn.getModel().addChangeListener(new ChangeListener() {
                    private boolean wasPressed = false;
                    @Override
                    public void stateChanged(ChangeEvent e) {
                        ButtonModel model = (ButtonModel) e.getSource();
                        if (model.isArmed() && !model.isPressed() && wasPressed) {
                            System.out.println("Released");
                        } else {
                            wasPressed = model.isPressed();
                        }
                    }
                });

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(btn);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:17:20.097

1.  在您的类中创建一个名为 canClick 的布尔值。
2.  创建一个鼠标监听器。
3.  将 MouseListener 添加到每个按钮 (button.addMouseListener(...);)
4.  在 MouseListener 中，实现所有需要的方法。
5.  在每个方法中根据需要将布尔值设置为 true 或 false。
6.  单击按钮 (ActionListener) 时，检查布尔值。
7.  如果为假，则取消它（或仅禁用所有按钮直到为真）

类似的东西。

# sql-server-2008 - 具有可变属性列表的应用程序的良好架构

> ID：15913894
> 
> 赞同：1
> 
> 时间：2013-04-09T22:47:52.120
> 
> 标签：sql-server-2008, database-design, asp.net-mvc-4, architecture

我们正在将一个大型的 asp.net Web 表单应用程序分成多个块，其中一个块将使用 asp.net mvc 重建。有两种主要类型的订单（假设类型 A 和 B）。每个订单都有次要类型（比如说 A1、A2、B1、B2 等），每个订单都有属性。A* 类订单几乎共享所有属性，B* 类订单共享所有属性的一半。从订单历史中，我们发现大部分订单都是 A 类。当前的设计对每个二级订单类型的订单表单使用用户控件，因此 A1 有用户控件，A2 有另一个用户控件，等等。属性是这些用户控件。

作为重新设计的一部分，我们想看看我们是否可以摆脱用户控制，而是动态生成具有必要属性的订单，同时保持应用程序的轻量级，并且能够以最小的努力添加新的二级订单类型。

设计 1：创建一个包含所有可能属性的表并将它们映射到每个次要类型并打开/关闭属性？它可能会变得非常细化，并包含有关应如何呈现属性的信息。优点：添加二级订单类型很容易，只需要为新订单类型添加映射。缺点：添加新属性将需要更改映射表，可能还需要更改所有图层。可能需要一个管理部分来管理映射。

设计2：使用jquery模板替换用户控件，向上发送json到服务器。优点：易于为新的二级订单类型添加新表单。缺点：一些逻辑可能必须进入模板（视图）

关于其中哪一个是好的设计有什么建议吗？有没有更好的办法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:27:52.280

您的数据库设计与 ASP.Net 或 JQuery 无关。您需要担心构建可靠的数据模型。

表继承和良好的 ORM 将在这里有所帮助。

[http://martinfowler.com/eaaCatalog/singleTableInheritance.html](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)

[https://community.jboss.org/wiki/NHibernateForNET](https://community.jboss.org/wiki/NHibernateForNET)

# opencv - 在 OpenCV 中检测颜色的深浅

> ID：15913895
> 
> 赞同：4
> 
> 时间：2013-04-09T22:47:57.027
> 
> 标签：opencv, image-processing, hsv

我有很多不同颜色的纸卡图像。就像所有的蓝色，或所有的红色等一样。在图像中，它们被支撑在具有该颜色的不同物体上。

我想编写一个程序来将颜色与卡片上的阴影进行比较，并选择最接近对象的阴影。

但是我意识到，对于未来的图像，我的相机将受到许多不同的照明。我想我应该转换成 HSV 空间。

我也不确定我应该使用哪种距离测量方法。给定卡片中的某种斑点，我可以对 HSV 进行平均，然后简单地查看哪个斑点的平均值最接近。

但我欢迎任何和所有建议，我想了解更多关于我可以用 OpenCV 做什么。

编辑：一个样本

![在此处输入图像描述](https://i.stack.imgur.com/RMZ4y.png)

在这里，我想比较第 6 个点的填充红色，看看它实际上是第 3 个纸矩形的阴影。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:23:44.580

我认为一种可能性是执行以下操作：

**色相和饱和度通道的颜色直方图**

1.  计算实心圆的颜色直方图。
2.  计算纸条的颜色直方图。
3.  使用直方图距离度量计算距离。这里的可能性包括：卡方、推土机距离、巴塔查里亚距离、直方图交叉点等。

检查此 opencv 链接以获取有关[计算直方图的详细信息](http://docs.opencv.org/modules/imgproc/doc/histograms.html)

检查此 opencv 链接以获取有关[直方图比较的详细信息](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html)

请注意，在计算颜色直方图时，请按照您自己的建议将图像转换为 HSV 颜色空间。然后，这里有两点需要注意。

1.  [**编辑**将此作为建议而不是必须做的，因为我相信 V 通道*可能*是区分阴影所必需的。无论如何，尝试两者并使用效果更好的那个。抱歉，如果这让您偏离轨道。] 一种可能性是仅使用色调和饱和度通道，即您构建一个 2D 直方图，而不是由色调和饱和度通道的值组成的 3D 直方图。这样做的原因是在 V 通道中最能感受到照明的变化。这与直方图的使用一起，有望使您的比较对照明变化更加稳健。这里有一些关于在构建颜色直方图时忽略 V 通道的[讨论](https://stackoverflow.com/questions/8593091/robust-hand-detection-via-computer-vision/8598434#8598434)。您可能会发现其中的参考资料很有用。
2.  使用 opencv 函数对直方图进行归一化。这是为了解释不同大小的材料块（你的小圆圈与巨大的彩条有不同的像素数）。

您可能还希望考虑执行某种形式的预处理来“拉伸”图像中的颜色，例如使用直方图均衡或“S 曲线”映射，以便更好地分离不同的颜色阴影。然后计算此处理后图像的颜色直方图。在计算颜色直方图之前，保留映射信息并在新测试样本上执行。

**使用 ML 进行分类**

除了简单地计算距离并取最近的距离（即 1 个最近邻分类器）之外，您可能还需要考虑训练一个分类器来为您进行分类。这样做的一个原因是分类器的训练有望学习一些方法来区分不同的色调，因为它在训练阶段可以访问它们并且需要区分它们。请注意，简单地计算距离，即您建议的方法，可能没有此属性。希望这将提供更好的分类。

训练中使用的特征仍然可以是我上面提到的颜色直方图。也就是说，您为训练样本计算如上所述的颜色直方图，并将其与它们的类（即它们是哪个阴影）一起传递给分类器。然后，当您希望对测试样本进行分类时，您同样计算颜色直方图并将其传递给分类器，它将返回测试样本颜色所属的类（在您的情况下为颜色阴影）。

训练分类器时的潜在问题，而不是像您建议的那样使用基于距离比较的简单方法，部分原因是程序的复杂性增加，并且在训练数据不好时可能会得到不好的结果。还需要进行大量参数调整才能使其正常工作。

[有关更多详细信息，请参阅此处](http://docs.opencv.org/doc/tutorials/ml/table_of_content_ml/table_of_content_ml.html)的 opencv 机器学习教程。请注意，在链接中的示例中，分类器仅区分 2 个类别，而您有超过 2 种颜色。这不是问题，因为分类器通常可以处理超过 2 个类。

希望这可以帮助。

# algorithm - 为什么图灵机的数量是有限的？

> ID：15913898
> 
> 赞同：4
> 
> 时间：2013-04-09T22:48:16.627
> 
> 标签：algorithm, theory, turing-machines, computation

在 Michael Sipser 的《计算理论导论》中，他说：

> “有些语言是不可判定的，甚至是图灵无法识别的，因为语言有无数种，**而图灵机只有**无数种。因为每台图灵机只能识别一种语言，而且语言比图灵机多，所以有些语言无法识别通过任何图灵机”（178）。

图灵机不是可以模拟任何计算机算法的假设机器吗？理论上你能想出无数种算法吗？我很难理解这个概念。非常感谢“像我 5 岁一样解释”的答案，但当然，任何帮助总比没有好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T22:54:06.240

有*无数*的图灵机。这并不意味着有一个有限的数字。图灵机的集合是可数无限的，这意味着图灵机可以使用自然数进行编号。也就是说，您可以在自然数和图灵机之间创建一对一的映射。

# iphone - 没有输入switch语句？

> ID：15913905
> 
> 赞同：2
> 
> 时间：2013-04-09T22:48:45.647
> 
> 标签：iphone, ios, objective-c, cocoa-touch

有一个我想不通的最奇怪的问题。在下面的方法中，没有输入 switch 语句。当我打印出 的值时`warningAlertViewType`，它是正确的，但 switch 语句由于某种原因没有激活。我以前使用过同样的方法进行切换，效果很好。

有谁知道可能会导致这种情况？

```
+ (WarningAlertView*) warningAlertViewWithType:(WarningAlertViewType)warningAlertViewType
    {
        WarningAlertView *warningAlertView = nil;
        NSLog(@"WarningAlertViewType1: %d", warningAlertViewType);
        switch (warningAlertViewType)
        {
                NSLog(@"Test1");
            case WarningAlertViewTypeExit:                  warningAlertView = [[ExitWarningAlertView alloc] init]; break;
            case WarningAlertViewTypeFacebook:              warningAlertView = [[FacebookWarningAlertView alloc] init]; break;
            case WarningAlertViewTypeDelete:                warningAlertView = [[DeleteWarningAlertView alloc] init]; break;
            case WarningAlertViewTypePhotoLibrary:          warningAlertView = [[PhotoLibraryWarningAlertView alloc] init]; break;
            case WarningAlertViewTypeBack:                  warningAlertView = [[BackWarningAlertView alloc] init]; break;
            default: break;
        }
        NSLog(@"Test2");
        return [warningAlertView autorelease];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:58:26.103

将您的 switch 语句更改为如下所示

```
switch (warningAlertViewType) {

 case WarningAlertViewTypeExit:
   NSLog(@"WarningAlertViewTypeExit");
   warningAlertView = [[ExitWarningAlertView alloc] init];
   break;

 case WarningAlertViewTypeFacebook:
   NSLog(@"WarningAlertViewTypeFacebook");
   warningAlertView = [[FacebookWarningAlertView alloc] init];
   break;

 case WarningAlertViewTypeDelete:
   NSLog(@"WarningAlertViewTypeDelete");
   warningAlertView = [[DeleteWarningAlertView alloc] init];
   break;

 case WarningAlertViewTypePhotoLibrary:
   NSLog(@"WarningAlertViewTypePhotoLibrary");
   warningAlertView = [[PhotoLibraryWarningAlertView alloc] init];
   break;

 case WarningAlertViewTypeBack:
   NSLog(@"WarningAlertViewTypeBack");
   warningAlertView = [[BackWarningAlertView alloc] init];
   break;

 default:
   NSLog(@"default");
   break;
} 
```

我实际上是这样严格命名的粉丝。然后可以使用宏（我知道有些讨厌）来大大缩短它。

```
switch (warningAlertViewType) {

#define CASE(_type) \
case WarningAlertViewType ## _type: \
  NSLog(@"WarningAlertViewType" #_type); \
  warningAlertView = [[_type ## WarningAlertView alloc] init]; \
  break

CASE(Exit);
CASE(Facebook);
CASE(Delete);
CASE(PhotoLibrary);
CASE(Back);

default:
  NSLog(@"default");
  break;

#undef CASE

} 
```

# python - python数值求解一个上下界之间没有符号变化的方程

> ID：15913908
> 
> 赞同：0
> 
> 时间：2013-04-09T22:48:58.890
> 
> 标签：python, numpy, python-3.x

我正在尝试求解一个方程，但我无法使用`brentq`，因为没有符号变化。我怎样才能找到 的价值`r`？

```
>>> import numpy as np
>>> 
>>> def f(r):
    return 0.1 + 1 / (2 * r ** 2) - 2 / (3 * np.sqrt(r ** 3)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:02:54.440

我认为有符号变化，但你可以通过以下方式解决它`fsolve`：

```
from scipy.optimize import fsolve
import numpy as np

def f(r):
    return 0.1 + 1 / (2 * r ** 2) - 2 / (3 * np.sqrt(r ** 3))

r = fsolve(f, 1)
f(r) 
```

结果：

```
r = 2.22213541 
```

**编辑**

有两种解决方案：

```
import numpy as np

def f(r):
    return 0.1 + 1 / (2 * r ** 2) - 2 / (3 * np.sqrt(r ** 3))

r = np.linspace(0.6, 3, 1000)
plot(r, f(r)) 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/n0t3D.png)

# php - 未定义的变量

> ID：15913909
> 
> 赞同：-2
> 
> 时间：2013-04-09T22:49:22.907
> 
> 标签：php, mysql, undefined

我在这里有这段代码：

```
 $conn = db_connect();
    $username = $_POST['username'];
    $result = $conn->query("select * from where username='".$username"'");
    if (!$result) throw new Exception ("Could not excecute query");
    } 
```

我遇到问题的错误消息是说其中一行中有一个未定义的变量。`$result = $conn->query("select * from where username='".$username"'");`即使一切似乎都已定义，它只是为这条线说这个。如果有人知道如何解决此错误，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:50:54.903

将代码更改为：

```
 $conn = db_connect();
$username = $_POST['username'];
$result = $conn->query("select * from table_name where username='".$username."'");
if (!$result) throw new Exception ("Could not excecute query");
} 
```

您忘记了用户名后面的结束时间。正如上面提到的评论之一。您还需要指定一个表名，因此您需要将 table_name 替换为您的表名。

# javascript - 恢复插入符号位置

> ID：15913913
> 
> 赞同：0
> 
> 时间：2013-04-09T22:49:48.083
> 
> 标签：javascript, parsing, range

在突出显示某些文本之前，我正在尝试使用 rangy 来保存插入符号的位置。但是，我认为因为我插入了 html，所以它在恢复插入符号时遇到了问题。这是代码：

```
var saved_selection = rangy.saveSelection( );

$( "#code" ).html( code_hl.highlight(   $( "#code" ).text( ),
                                        -1,
                                        -1 ) );

rangy.restoreSelection( saved_selection ); 
```

它一直说标记元素已被删除。它不工作，因为我正在插入 html 吗？

~~另外，我想知道是否可以通过单独使用插入符号的索引来设置插入符号。我编写了另一个对象 kb_input，它跟踪插入符号的位置、当前行中的偏移量和当前行号。所以，我想知道这是否也有帮助。~~

如果有人可以帮助我理解 contenteditable 标记中的插入符号位置和范围之间的关系，那足以让我继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:57:04.947

如果您使用 Rangy 1.3（仍处于 alpha 版本，但我正在研究它），您可以使用基于字符索引的方法，从而避免插入标记元素的需要：

```
// Save the selection by character index
bookmark = rangy.getSelection().getBookmark(editableEl);

// Do stuff that changes the editable content...

// Restore the selection
rangy.getSelection().moveToBookmark(bookmark); 
```

演示：[http ://rangy.googlecode.com/svn/trunk/demos/bookmark.html](http://rangy.googlecode.com/svn/trunk/demos/bookmark.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:11:19.420

您的问题的一部分答案是`jQuery.html`删除以前在元素内的所有内容（就像`innerHTML`DOM 元素的属性一样）。[来自jQuery 文档的`jQuery.html(htmlString)`](http://api.jquery.com/html/)片段：

> 当 .html() 用于设置元素的内容时，该元素中的任何内容都会被新内容完全替换。此外，在用新内容替换这些元素之前，jQuery 从子元素中删除了其他结构，例如数据和事件处理程序。

# android - Android edittext 随文本自动增长并将内容向下推

> ID：15913917
> 
> 赞同：7
> 
> 时间：2013-04-09T22:50:01.697
> 
> 标签：android, android-layout, android-edittext

是的，这是关于 SO 的另一个 edittext 增长问题。是的，我已经解决了所有那些 edittext 增长问题。但这有点具体。

用户界面：

![在此处输入图像描述](https://i.stack.imgur.com/6zEc3.png)

一个简单的 android 布局，其下方带有 edittext 和按钮。当文本较少时，edittext 视图仍然覆盖整个屏幕，为下面的按钮留出空间。

一旦用户开始输入文本，edittext 会垂直增长以适应文本。同时，按钮也应该一直向下推动，让edittext增长。

用户可以垂直滚动屏幕以查看全文。

输入重要文本后的 UI：

![在此处输入图像描述](https://i.stack.imgur.com/QTFb0.png)

这是下面带有edittext和按钮的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/background"
    android:clipToPadding="false"
    android:fadingEdge="none"
    android:fillViewport="true"
    android:padding="13dp"
    android:scrollbarStyle="outsideOverlay" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">

        <!-- some fixed width image  -->
        <ImageView
            android:id="@+id/someimage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:src="@drawable/page_white_text" />

        <EditText
            android:id="@+id/some"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/someimage"
            android:background="@null"
            android:gravity="top"
            android:minLines="10"
            android:minHeight="50dp"
            android:textColor="#222222"
            android:textSize="15dp"
            android:typeface="serif" >
            <requestFocus />
        </EditText>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:baselineAligned="true"
            android:layout_marginTop="5dp"
            android:padding="10dp"
            android:orientation="vertical" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

        </LinearLayout>
    </RelativeLayout>

</ScrollView> 
```

这或多或少有效。但是当我输入很多文本时，而不是向下按下按钮。它像下面这样：

![在此处输入图像描述](https://i.stack.imgur.com/iQ92f.png)

非常感谢这里的任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T21:31:50.230

这是我的建议：在 ScrollView 中，放置一个 RelativeLayout，您可以使用 android:layout_below 将每个元素按特定顺序放置在其中。对于 EditText 的自动增长，请使用此[解决方案](https://snipt.net/orastem/android-multiline-edittext-that-dynamically-increases-height-to-always-display-whole-text/)。

让我们看一个例子：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:layout_gravity="center">
<RelativeLayout
    android:id="@+id/general2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_margin="20sp" >

    <TextView
        android:id="@+id/textFirstOpinion"
        android:layout_height="wrap_content"  
        android:layout_width="wrap_content"
        android:text="@string/titleFirstOpinion"
        android:textStyle="bold"
        android:textSize="23sp"
        android:textColor="#FFFFFF"
        android:layout_marginTop="10dp" />

    <EditText
        android:id="@+id/fieldFirstOpinion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/textFirstOpinion" 
        android:minHeight="80sp"
        android:isScrollContainer="true"
        android:inputType="textMultiLine"
        android:textSize="20sp"
        android:gravity="top|left" />

    <Button
        android:id="@+id/button"
        android:layout_width="110dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/fieldFirstOpinion"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="37sp"
        android:textSize="23sp"
        android:text="@string/textSendButton"
        android:gravity="center_horizontal"
        android:padding="10dp" />

</RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:52:12.940

try adding android:layout_below="@id/some" in your LinearLayout like

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:baselineAligned="true"
        android:layout_marginTop="5dp"
        android:padding="10dp"
        android:orientation="vertical"
        android:layout_below="@id/some" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:04:38.533

由于您希望按钮位于页面底部，因此添加以下行

```
android:layout_below="@+id/some"
android:layout_centerHorizontal="true" 
android:layout_alignParentBottom="true" 
```

在您的 LinearLayout 代码中，例如

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/some"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" 
        android:layout_alignParentBottom="true"
        android:baselineAligned="true"
        android:layout_marginTop="5dp"
        android:padding="10dp"
        android:orientation="vertical" > 
```

还要确保`layout:height`EditText 的参数设置为`wrap_content` Try this 并告诉我它是否有效

# php - 是否可以将 Google Drive API 与电子表格 API 一起使用

> ID：15913920
> 
> 赞同：3
> 
> 时间：2013-04-09T22:50:28.823
> 
> 标签：php, google-drive-api, google-spreadsheet-api

有没有办法将电子表格 API 与 Drive API 联系起来？我的意思是，如果我有来自 Google Drive 的文件 ID，我是否可以使用相同的 ID 和相同的 oAuth 凭据切换到电子表格 API？

我正在使用 php，特别是电子表格 api 的资源很少 - 我很惊讶周围的资源如此之少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:13:23.690

您还需要为以下范围的用户授予权限：

```
https://spreadsheets.google.com/feeds 
```

两个 API 上的资源 ID 相同。我在 Drive 上的电子表格文件以`0AifSjdPVs9MZdE10eXZTVHVneW9aYjJGVFMxV0VYUEE`相同的 ID 可在 Spreadsheets API 上访问：

[https://spreadsheets.google.com/feeds/spreadsheets/0AifSjdPVs9MZdE10eXZTVHVneW9aYjJGVFMxV0VYUEE](https://spreadsheets.google.com/feeds/spreadsheets/0AifSjdPVs9MZdE10eXZTVHVneW9aYjJGVFMxV0VYUEE)

注意：我使电子表格公开可读，您可以使用此文件试用电子表格 API 后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:09:15.663

这是我想出的解决方案：

1.  获取 google-api-php-client 库和 Zend GData 库（Zend Framework 1.2，具有依赖项）。
2.  使用 Google API Google_Oauth2Service 类来处理登录和身份验证。确保您的“范围”包括`https://www.googleapis.com/auth/drive` AND `https://spreadsheets.google.com/feeds`。
3.  一旦 oauth2 握手完成（您可以找到相关文档的详细信息），您将拥有一个令牌，它是一个 json 编码的字符串。把它变成一个 PHP 对象：`$tok = json_decode([token string])`
4.  神奇之处在于：只需将令牌的访问部分提供给 Zend 库

$authsub = Zend_Gdata_AuthSub::getHttpClient($tok->access_token);
$spreadsheet_service = new Zend_Gdata_Spreadsheets($authsub);

现在您可以使用 Zend 库中记录的电子表格服务。效果很好。

# php - 传递给 php 文件的 HTML 文本字段值为空

> ID：15913921
> 
> 赞同：-3
> 
> 时间：2013-04-09T22:50:33.863
> 
> 标签：php, html

我有一个将文本字段的值传递给 php 文件的 html 代码。为了检查这些变量的值，我使用 echo 打印这些值，但没有打印任何内容。

这是我的html代码：

```
 <form action="connect.php" type="post">
   Username: <input type="text" name = "uname"><br>
   Confirm Username: <input type="text" name = "cuname"><br>
   Password: <input type="password" name = "pword"><br>
   Confirm Password: <input type="password" name="cpword"><br>
   <input type="submit" value="Sign up">
 </div>
 </form> 
```

这是我的 connect.php 代码：

```
<?php
  $info1 = isset($_POST['uname']);
  $info2 = isset($_POST['cuname']);
  $info3 = isset($_POST['pword']);
  $info4 = isset($_POST['cpword']);

  echo $info1;
  echo $info2;
  echo $info3;
  echo $info4;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:01:00.433

a) 正确：

> ```
> <form action="connect.php" type="post"> 
> to   <form action="connect.php" method="post"> 
> ```

b）大多数情况下，您不会“将文本字段的值传递给 php 文件”，而是尝试在屏幕上输出输入。如果要保存和重复使用它们，则必须使用数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:04:41.273

```
<form action="connect.php" method="POST">
   Username: <input type="text" name = "uname"><br>
   Confirm Username: <input type="text" name = "cuname"><br>
   Password: <input type="password" name = "pword"><br>
   Confirm Password: <input type="password" name="cpword"><br>
   <input type="submit" value="Sign up">
 </div>
 </form> 
```

php....

```
 <?php
  if (isset($_POST['submit'])) //if form submitted...
    {
  $info1 = $_POST['uname']; // Get POST value
  $info2 = $_POST['cuname'];
  $info3 = $_POST['pword'];
  $info4 = $_POST['cpword'];

  echo $info1;
  echo $info2;
  echo $info3;
  echo $info4;
  }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:52:05.577

`isset()`是一个布尔函数，它告诉您是否设置了变量。如果要打印值本身，请尝试：

```
$info1 = $_POST['uname'];
echo $info1; 
```

如果您想查看该函数的内容，请尝试使用以下命令进行调试：

```
print_r($_POST); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T23:24:18.957

为避免错误，`Undefined index`您始终可以使用[at 符号 (@)](http://php.net/manual/en/language.operators.errorcontrol.php)

```
<?php
  $info1 = @$_POST['uname'];
  $info2 = @$_POST['cuname'];
  $info3 = @$_POST['pword'];
  $info4 = @$_POST['cpword'];

  echo $info1;
  echo $info2;
  echo $info3;
  echo $info4;
?> 
```

# c# - 改进文本框 C# 中的条码搜索

> ID：15913924
> 
> 赞同：1
> 
> 时间：2013-04-09T22:50:40.210
> 
> 标签：c#, sql, winforms, textbox

在 WinForm C# 应用程序中，我有一个 Barcode_textbox。如果`TextChanged`我有一个 SQL 查询来检查数据库中的 TextBox.Text 值，即条形码。问题是对于每个输入的数字都会触发 SQL 查询，因此如果条码长度为 13，它将在数据库中检查 13，并且速度非常慢。

那么，什么是仅当用户停止在 TextBox 中写入（或条形码阅读器停止阅读）时触发的 TextBox 事件，或者检查数据库中的条形码的最佳解决方案是什么。请注意，bacode 的长度不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:12:00.000

计时器是一个可怕的解决方案。

使用`KeyUp`事件`TextBox`并检查回车。大多数条形码扫描仪在代码后提交回车。如果默认情况下不这样做，他们会附带条形码来配置它。

您可以通过打开记事本并在条码后扫描条码来测试这一点。每一个都将在一个新的行上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:54:48.290

我记得我是如何成功地做到这一点的。

我将 Timer 控件放在我的应用程序中，间隔为一秒（1000 毫秒）。然后我将 Form.KeyPreview 属性设置为 True。

在 Form Key Press 事件中，我存储击键。在 Timer.Tick 事件中检查记录的击键长度是否超过 12 个字符左右。

然后触发对 SQL 的调用，一次。当您成功返回记录时（或者如果文本框包含超过 20 个字符）清除存储的击键。

* * *

**请参阅截至 2019 年 3 月的更新：** [https ://stackoverflow.com/a/55411255/495455](https://stackoverflow.com/a/55411255/495455)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:10:32.947

以这种方式使用计时器，当用户在给定的一小段时间内停止在您的文本框中输入时说 1 秒，然后从数据库中获取数据......

您还可以使用计数器检查用户键入的字符，以便当它超过最小值（您的密钥可以是的最小大小）时获取数据......将节省很多时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:57:02.460

您可以使用 Validating 事件来检查 TextBox 的内容。
您的用户将需要按 TAB 键将当前焦点从 TextBox 更改为 taborder 之后的下一个控件，并且将触发验证事件

```
private void textBox_BarCode_Validating(object sender, CancelEventArgs e)
{
     // Code to check the barcode on the SQL database....       
     if(!ValidBarCode(textBox1.Text))
     {
           // Cancel the event and select the text to be corrected by the user.
           e.Cancel = true;
           textBox1.Select(0, textBox1.Text.Length);
     } 
```

}

假设下一个控件是使用插入的条形码（添加）（或用于插入条形码描述的项目数量的文本框）执行某些操作的命令。过了一会儿所有的操作就变成了一个很自然的数据录入处理

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T23:00:16.757

异步查询呢？

如果您不能或想要一个简单的肮脏解决方案，那么我会坚持使用计时器

# java - 无法让我的哈希算法正常工作

> ID：15913926
> 
> 赞同：1
> 
> 时间：2013-04-09T22:50:46.533
> 
> 标签：java, hashtable

**问题已解决（尚不能接受答案，我更改了我的 while 循环，现在它可以工作了，我在下面为任何未来的观众回答了它）：**我的散列算法让我头疼。我从文件中读取键的输入，并且使用少量键，我的代码就可以工作，一旦我把它写成 300 个字，我就有问题了。散列函数在底部，而这个 while 循环在我的 main 函数的主体中，它是用 java 编写的。散列函数运行良好，主体也运行良好，直到我愚蠢地更改了主体并丢失了原始代码。我想我涵盖了溢出问题，但任何帮助将不胜感激，谢谢！

如何计算 tSize：

```
//Calcking tSize
tSize = (int)(items*tSizeFactor);

//Making tSize prime
while(!isPrime((int)tSize))
    tSize++; 
```

当我从文件中读取时循环：

```
while(line != null) {
                //Getting the address to place the value in
                position = hash(line.toCharArray(), (int)tSize);

                //If there is something there we enter the if statement
                if(hashTable[position][0] != null) {
                    //while we haven't found a spot and i < tableSize we update the last position we were at and move through the array
                    for(int i = 1; i < (int)tSize && hashTable[position][0] != null; i++) {
                        //prevPosition is used to update the link in the spot just before our final destination, allows wrap around in the array
                        prevPosition = position;
                        //we add +i to the original position and modulo the table size allowing wrap around in the array
                        position = (position+i)%(int)tSize;
                    }
                    //finally when we found a spot we update the previous position to link to the new item
                    hashTable[prevPosition][1] = Integer.toString(position);
                }

                //Adding the values to the hash table and setting the link to -1
                hashTable[position][0] = new String(line);
                hashTable[position][1] = new String(Integer.toString(-1));

                line = reader.readLine();
            }

public static int hash(char ch[],final int TSIZE) {
        int sum = 7;
        for(int i = 0; i < ch.length; i++) {
            sum = sum*31+ch[i];
            sum <<= 3;
        }

        if(sum < 0)
            sum *= -1;

        return sum%TSIZE;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:17:55.870

1.  new String(line) 没用。

2.  for(int i = 1; i < (int)tSize && hashTable[position][0] != null; i++)

    没有使用位置 0？

3.  prevPosition 可以在本地进行`if(hashTable[position][0] != null) {`阻止。

4.  将 Prev 位置存储到哈希表中看起来毫无用处。

    **UPD**

5.  位置 = (位置+i)%(int)tSize;

试试这个 [http://en.wikipedia.org/wiki/Quadratic_probing](http://en.wikipedia.org/wiki/Quadratic_probing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:18:23.527

首先，一个问题，为什么不使用内置哈希表？

通过阅读您的代码，我发现了一些问题。它们可能不正确，因为从您当前的代码中无法知道更多信息。例如`tSize`.

*   你有一个`tSize`，我认为它是哈希表的容量。但我没有看到你什么时候增加它。这将是一个问题，至少是性能问题。但在您的实施中，这是功能问题。例如，如果您的 tSize 为 100。那么您的哈希表中最多可以有 100 个元素。

*   看看这个 for 循环：

    ```
    for(int i = 1; i < (int)tSize && hashTable[position][0] != null; i++) {
        prevPosition = position;
        position = (hash(line.toCharArray(), (int)tSize)+i)%((int)tSize);
    } 
    ```

这将在发生碰撞时执行。（我不明白，为什么你再次调用哈希函数。你可以循环找到一个空闲槽。）你想保留原来的`key`，并让它引用一个空闲位置。但是，如果在更糟糕的情况下，在您再次调用哈希函数后，新`position`的仍然被占用（再次发生冲突），您会覆盖`prePosition`原来的`key`. 当您从哈希表中获取数据时，这将是一个问题。

*   由于以上两点。当您的哈希表已满时，您的代码只是不断覆盖最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:29:32.740

我改变的while循环解决了这个问题：

```
while(line != null) {
                    //Getting the address to place the value in
                    position = hash(line.toCharArray(), (int)tSize);

                    //If there is something there we enter the if statement
                    if(hashTable[position][0] != null) {

                        //Go to the end of the chain
                        while(hashTable[position][1].compareTo("-1") != 0)
                            position = Integer.parseInt(hashTable[position][1]);

                        //Save the position of the end of the chain
                        prevPosition = position;

                        //while we haven't found a spot and i < tableSize we update the last position we were at and move through the array
                        for(int i = 1; i < (int)tSize && hashTable[position][0] != null; i++) {
                            //we add +i to the original position and modulo the table size allowing wrap around in the array
                            position = (position+i)%(int)tSize;
                            System.out.println("Position: " + position);
                        }

                        //finally when we found a spot we update the previous position to link to the new item
                        hashTable[prevPosition][1] = Integer.toString(position);
                    }

                    //Adding the values to the hash table and setting the link to -1
                    hashTable[position][0] = new String(line);
                    hashTable[position][1] = new String(Integer.toString(-1));

                    line = reader.readLine();
                } 
```

# java - onActivityResult 未调用

> ID：15913928
> 
> 赞同：3
> 
> 时间：2013-04-09T22:50:54.710
> 
> 标签：java, android, android-intent

这里有很多与我有完全相同问题的人提出的问题，我已经看了一百万，现在尝试了 2-3 个小时不同的东西，但我仍然无法让它工作。

儿童活动：

```
Intent resultIntent = new Intent(myColorPicker.this, WidgetConfig.class);
resultIntent.putExtra("key", appwidget_notecolor);
setResult(RESULT_OK, resultIntent);
finish(); 
```

家长活动：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  // Toast does not show
  Toast.makeText(getApplicationContext(), "onActivityResult fired", Toast.LENGTH_SHORT).show();

  if (resultCode == RESULT_OK ) {
        // Toast does not show
        Toast.makeText(getApplicationContext(), "Result Recieved", Toast.LENGTH_SHORT).show();
    }
} 
```

我从父活动启动子活动，如下所示：

```
Intent myColorPickerIntent = new Intent(WidgetConfig.this, myColorPicker.class);
myColorPickerIntent.putExtra("appwidget_notecolor", appwidget_notecolor);
WidgetConfig.this.startActivity(myColorPickerIntent); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T22:56:49.943

当然你不会得到结果，你调用的是 startActivity() 而不是 startActivityForResult()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T22:54:41.013

创建 Intent 后，您似乎没有调用 startActivityForResult() 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T22:55:04.873

您是否将意图传递给 startActivityForResult() 方法？

# php - 处理接口致命错误

> ID：15913931
> 
> 赞同：-1
> 
> 时间：2013-04-09T22:51:00.970
> 
> 标签：php, oop, interface, error-handling, fatal-error

当实现接口的类不包含请求的方法时，如何自定义错误消息？

实际上我得到：

```
Fatal error: Interface function X cannot contain body in Y on line Z 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:55:00.530

假设您无法在错误发生之前拦截错误并引发异常或触发自定义错误，那么您唯一的机会就是尝试[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)并尝试捕获致命错误并解析出现致命错误时出现的[`error_get_last()['message']`](http://php.net/manual/en/function.error-get-last.php)字符串[`error_get_last()['type']`](http://php.net/manual/en/function.error-get-last.php)。

*注意：作为关闭函数传递的注册回调在脚本成功结束时也会被调用，因此您必须检查是否`error_get_last`不为空。*

* * *

显然[你甚至不能](http://viper-7.com/3HK5J2)走注册关闭函数路径，因此你所问的在 PHP 中是不可能的。

# c++ - 在 Mac OS X 上使用 clang 编译错误提升 1.53

> ID：15913932
> 
> 赞同：1
> 
> 时间：2013-04-09T22:51:02.087
> 
> 标签：c++, macos, boost, compilation

我想用 clang 构建 boost，我安装了最新的 xcode 和命令行工具。编译`b2`现在我尝试：

```
-mac:boost_1_53_0 tim$ ./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" --prefix="./install-dir" debug release install 
```

并获得下一个作为输出：

```
Performing configuration checks

    - 32-bit                   : no
    - 64-bit                   : yes
    - x86                      : yes
    - has_icu builds           : no
warning: Graph library does not contain MPI-based parallel components.
note: to enable them, add "using mpi ;" to your user-config.jam
    - iconv (libc)             : no
    - iconv (separate)         : yes
    - icu                      : no
    - icu (lib64)              : no
    - gcc visibility           : yes
    - long double support      : yes
warning: skipping optional Message Passing Interface (MPI) library.
note: to enable MPI support, add "using mpi ;" to user-config.jam.
note: to suppress this message, pass "--without-mpi" to bjam.
note: otherwise, you can safely ignore this message.
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/build/virtual-target.jam:1079: in virtual-target.register-actual-name from module virtual-target
error: Duplicate name of actual target: <pinstall-dir/lib>libboost_atomic.dylib
error: previous virtual target { clang-darwin%clang-darwin.link.dll-libboost_atomic.dylib.SHARED_LIB { clang-darwin%clang-darwin.compile.c++-lockpool.o.OBJ { lockpool.cpp.CPP } } }
error: created from libs/atomic/build/boost_atomic
error: another virtual target { clang-darwin%clang-darwin.link.dll-libboost_atomic.dylib.SHARED_LIB { clang-darwin%clang-darwin.compile.c++-lockpool.o.OBJ { lockpool.cpp.CPP } } }
error: created from libs/atomic/build/boost_atomic
error: added properties: <debug-symbols>off <define>NDEBUG <inlining>full <optimization>speed <runtime-debugging>off <variant>release
error: removed properties: <debug-symbols>on <inlining>off <optimization>off <runtime-debugging>on <variant>debug
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/build/virtual-target.jam:490: in actualize-no-scanner from module object(file-target)@67176
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/build/virtual-target.jam:135: in object(file-target)@67176.actualize from module object(file-target)@67176
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/build-system.jam:749: in load from module build-system
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/kernel/modules.jam:283: in import from module modules
/Users/tim/Desktop/Work/boost_1_53_0/tools/build/v2/kernel/bootstrap.jam:142: in boost-build from module
/Users/tim/Desktop/Work/boost_1_53_0/boost-build.jam:17: in module scope from module 
```

所以我有一个基本问题：如何解决此类错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T04:17:16.880

如果不构建调试版本，错误就会消失。看起来您无法在同一目录中安装调试库和发布库。

此命令有效

```
./b2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" --prefix="./install-dir" release install 
```

顺便说一句，可以在 mac（和 linux）上的应用程序的调试版本中链接 release boost 库。你不需要调试版本，除非你想调试提升。

这与 Windows 上的 VisualStudio 不同，您需要 boost 的调试版本才能链接到应用程序的调试版本。

# php - 如何让 ajax 间歇性地调用我的 php？

> ID：15913937
> 
> 赞同：1
> 
> 时间：2013-04-09T22:51:14.150
> 
> 标签：php, ajax, twitter

我有 ajax 与 php 通信以接收来自 Twitter 帐户的推文。代码工作正常。唯一的事情是我希望 ajax 间歇性地调用 php，以便任何更新的推文自动返回并打印到我的页面，而无需刷新或重新输入推特 ID。我需要继续调用 getStatuses() 函数吗？或者我是否需要使用我已经开始制作的 getUpdates() ？这是我的ajax函数：

```
 // the setInterval function added in the getStatusesX function
function getStatusesX()
{
setInterval(getStatuses(),300000);
}

  //Create a cross-browser XMLHttp Request object
function getXMLHttp() {

    var xmlhttp;
    if (window.ActiveXObject) {
        XMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else if (window.XMLHttpRequest) {
       XMLHttp = new XMLHttpRequest();
    } else {
        alert("Your browser does not support XMLHTTP!");
    }
    return XMLHttp;
}

 //function that searches for the tweets via php
function getStatuses(){

      XMLHttp1 = getXMLHttp();
      var userID = document.getElementById("userid").value;

      //ajax call to a php file that will extract the tweets
      XMLHttp1.open( 'GET', 'twitterTest2.php?userid='+userID, true);

      // Process the data when the ajax object changes its state
      XMLHttp1.onreadystatechange = function() {
         if( XMLHttp1.readyState == 4 ) {
            if( XMLHttp1.status ==200 ) {  //no problem has been detected

         document.getElementById("tweetbox").innerHTML=XMLHttp1.responseText;

            }
         }
       }
       XMLHttp1.send(null);
}

//function to intermittently call php to check for updated tweets?
function updateInfo() { 
    if(XMLHttp1.readyState == 4) { 

        document.getElementById("tweetbox").innerHTML=XMLHttp1.responseText;

    } 
}

</script> 
```

然后我将 getStatusesX() 函数添加到我的表单中，如下所示：

```
<form>
Input Twitter ID: <input type="text" name="userid" id="userid">  
<button type="button" onClick="getStatusesX()";>Get recent  tweets</button>
</form> 
```

它仍然无法正常工作。我是否以错误的方式使用 setInterval？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:52:39.900

使用`setTimeout`或`setInterval`功能。

从我在你的代码中可以看到，`getStatuses`有太多的责任，因为除了获取数据之外，它还修改了`DOM`.

我会建议类似：

```
function getStatuses(callback) {
    //...
    XMLHttp1.onreadystatechange = function () {
        //...
        callback && callback(XMLHttp1); //execute callback if any
    };
}

function updateStatuses(callback) {
    getStatuses(function (xhr) {
        document.getElementById("tweetbox").innerHTML = xhr.responseText;
        callback && callback;
    });
}

//this function update the statuses and as soon as it's finished, it sets
//a timeout to redo the process in ~10 seconds.
function startUpdatingStatuses() {

    updateStatuses(function () {
        setTimeout(startUpdatingStatuses, 10000);
    });
}

startUpdatingStatuses(); //kick-start everything 
```

# jquery - jQuery 动画变换平移 x,y

> ID：15913941
> 
> 赞同：3
> 
> 时间：2013-04-09T22:51:26.947
> 
> 标签：jquery

我需要为图像设置动画，但我想使用 CSS 变换。我发现了一个以前的问题，解决方案是这样的：

[jsFiddle](http://jsfiddle.net/ryleyb/ERRmd/)

我这样修改它：

[jsFiddle](http://jsfiddle.net/7JH3r/2/)

我不知道如何传递 x 和 y 值，因为我需要 translate(x,y) 两者。

这种方式行不通：

```
$('#box').animate({  fake: [100,50] }, {
    step: function(now,fx) {
       $(this).css('-webkit-transform','translate(' + now[0] + 'px,' + now[1] + 'px)'); 
    },
    duration:'slow'
},'linear'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T11:16:55.203

```
;(function($) {
            var delay = 0;
            $.fn.translate3d = function(translations, speed, easing, complete) {
                var opt = $.speed(speed, easing, complete);
                opt.easing = opt.easing || 'ease';
                translations = $.extend({x: 0, y: 0, z: 0}, translations);

                return this.each(function() {
                    var $this = $(this);

                    $this.css({ 
                        transitionDuration: opt.duration + 'ms',
                        transitionTimingFunction: opt.easing,
                        transform: 'translate3d(' + translations.x + 'px, ' + translations.y + 'px, ' + translations.z + 'px)'
                    });

                    setTimeout(function() { 
                        $this.css({ 
                            transitionDuration: '0s', 
                            transitionTimingFunction: 'ease'
                        });

                        opt.complete();
                    }, opt.duration + (delay || 0));
                });
            };
        })(jQuery); 
```

这样你也可以使用 translateZ;

来源[http://cameronspear.com/blog/animating-translate3d-with-jquery/](http://cameronspear.com/blog/animating-translate3d-with-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:31:42.427

```
$('#box').animate({  fake: 200, fake2: 10 }, {
    step: function(now,fx) {
      $(this).css('-webkit-transform','translate('+now+'px,'+now+'px )'); 
    },
    duration:'slow'
},'linear'); 
```

[jsFiddle](http://jsfiddle.net/asantarissy/NBM6g/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T08:00:31.013

这种方式似乎可行，但它可能存在更好的解决方案

[jsfiddle 示例](http://jsfiddle.net/hPtjf/1/)

```
var offX, offY;

$('#box').animate({  fake1: 150, fake2: 100 }, {
  step: function(now,fx) {

    if (fx.prop === "fake1") {
      offX = now;
    } else if (fx.prop === "fake2") {
      offY = now;
      $(this).css('-webkit-transform','translate('+ offX +'px,'+ offY +'px)');
    }
  },
  duration:300
},'linear'); 
```

# php - 根据位置显示日期和时间

> ID：15913945
> 
> 赞同：0
> 
> 时间：2013-04-09T22:51:31.360
> 
> 标签：php, mysql, datetime

我正在开发一个招聘网站，我们的客户（雇主）​​可以在其中“保留”候选人（潜在雇员）7天，这样客户A感兴趣的候选人就不会出现在搜索结果中（候选人会在7天后自动释放）但客户也可以手动将它们释放回系统中）。当客户 A 查看他/她预订的候选人列表时，每条记录都包含每个候选人的基本信息，包括他/她被预订和将被释放（即可供所有客户搜索）的日期和时间。

那部分很容易。当我想根据客户端使用的子域本地化这个日期和时间时，问题就出现了。我们在两个不同的国家、两个不同的时区、两个不同的半球、两个不同的时间系统有两个分支机构（一个位于英国，它使用夏令时，另一个位于南非，它不使用夏令时） . 除此之外，还有计划在其他国家开设其他分支机构，这无疑将进一步加剧问题。

我可以使用以下方法调整时间戳（我使用 time() 来设置日期）：

```
$domExplode = explode('.', $_SERVER['HTTP_HOST']);
$subdom = $domExplode[0];

switch($subdom) {
  case "uk":
    $timeadjust = 0;
  break;
  case "za":
    $timeadjust = 2*60*60;
  break;
  default:
    $timeadjust = 0; //Head Office is in South Africa so GMT+2 is the standard.
  break;
}

$datereserved = $row_rescand['resdte'] + $timeadjust;
$releasedate  = $row_rescand['reldte'] + $timeadjust; 
```

但这并没有考虑夏令时。此外，这意味着每次添加新国家/地区时我都必须手动更新代码。有没有更好的方法来做到这一点，最好是自动化这个过程，也许是通过使用我为每个国家/地区拥有的 MySQL 数据库条目？

使用该网站的条款和条件是必须允许使用 cookie 和 javascript，因此我对 PHP 或 JS/JQuery 解决方案持开放态度。我只是空白。

提前致谢。

# ruby - 具有多个指向相同值的键的 Ruby 哈希

> ID：15913950
> 
> 赞同：2
> 
> 时间：2013-04-09T22:51:46.777
> 
> 标签：ruby

我正在寻找一种方法，我会说哈希中的同义词键。

我希望多个键指向同一个值，所以我可以通过这些键中的任何一个读/写一个值。

例如，它应该像这样工作（假设 :foo 和 :bar 是同义词）

```
hash[:foo] = "foo"
hash[:bar] = "bar"
puts hash[:foo] # => "bar" 
```

**更新 1**

让我补充几个细节。我需要这些同义词的主要原因是，我从外部源接收键，这是我无法控制的，但多个键实际上可以与相同的值相关联。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T23:48:47.377

## 重新思考你的数据结构

根据您想要访问数据的方式，您可以通过将键或值设为数组来使它们成为同义词。无论哪种方式，您都需要做更多的工作来解析同义词而不是它们共享的定义词。

### 作为定义的键

例如，您可以使用键作为同义词的定义。

```
# Create your synonyms.
hash = {}
hash['foo'] = %w[foo bar]
hash
# => {"foo"=>["foo", "bar"]}

# Update the "definition" of your synonyms.
hash['baz'] = hash.delete('foo')
hash
# => {"baz"=>["foo", "bar"]} 
```

### 作为定义的价值观

您也可以反转此结构，并将您的键数组改为同义词。例如：

```
hash = {["foo", "bar"]=>"foo"}
hash[hash.rassoc('foo').first] = 'baz'
=> {["foo", "bar"]=>"baz"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T23:24:23.033

您可以继承 hash 并覆盖`[]`and `[]=`。

```
class AliasedHash < Hash
  def initialize(*args)
    super
    @aliases = {}
  end

  def alias(from,to)
    @aliases[from] = to
    self
  end

  def [](key)
    super(alias_of(key))
  end

  def []=(key,value)
    super(alias_of(key), value)
  end

  private
  def alias_of(key)
    @aliases.fetch(key,key)
  end
end

ah = AliasedHash.new.alias(:bar,:foo)

ah[:foo] = 123
ah[:bar] # => 123
ah[:bar] = 456
ah[:foo] # => 456 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:13:32.253

只要您将相同的对象分配给两个键，您可以做的事情是完全可能的。

```
variable_a = 'a'
hash = {foo: variable_a, bar: variable_a}

puts hash[:foo] #=> 'a'
hash[:bar].succ!
puts hash[:foo] #=> 'b' 
```

这是有效的，因为`hash[:foo]`和`hash[:bar]`都引用了字母`a`via的同一个实例`variable_a`。但是，如果您使用分配，这将不起作用，`hash = {foo: 'a', bar: 'a'}`因为在这种情况下`:foo`并`:bar`引用不同的实例变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-17T01:34:51.210

你原来的帖子的答案是：

```
hash[:foo] = hash[:bar] 
```

和

```
hash[:foo].__id__ == hash[:bar].__id__it 
```

只要该值是参考值 (String, Array ...) ，它就会成立。

* * *

**您的更新 1**的答案可能是：

```
input.reduce({ :k => {}, :v => {} }) { |t, (k, v)| 
        t[:k][t[:v][v] || k] = v;
        t[:v][v] = k;
        t
    }[:k] 
```

其中 «input» 是输入数据的抽象枚举器（或数组），因为它来自 [key, value]+，«:k» 您的结果，«:v» 是用于查找键的反向哈希，如果它的价值已经存在。

# ruby-on-rails - Rails http 缓存尝试写入 tmp/cache。为什么？

> ID：15913953
> 
> 赞同：2
> 
> 时间：2013-04-09T22:51:54.040
> 
> 标签：ruby-on-rails, http

我的理解是，要在 Rails 3 中使用 http 缓存，我所要做的就是在操作中添加类似这样的内容

```
expires_in(10.seconds, :public => true) 
```

但是当我这样做时，除了在浏览器中执行 http 缓存之外，它还会尝试写入 tmp/cache（正如预期的那样，对该操作的相同用户请求不会命中服务器）

为什么是这样？如何阻止 Rails 写入缓存目录以进行 http 缓存？

PS：我用的是nginx+passenger

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:43:02.770

写入 /tmp/cache 的内容是[Rack::Cache::FileStore](http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-filestore)，可通过 config.cache_store 进行配置；这是一个 rails3 原生代理缓存；
如果你想禁用它：

```
config.action_dispatch.rack_cache =  nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:38:43.863

另一种解决方案是不使用 expires_in 中的 :public => true 设置。看来此设置是 Rack::Cache 将响应写入缓存的原因。如果您将其设置为 private => true （默认值），则不会发生这种情况

# ruby - 客户端和服务器之间的 sqs 消息

> ID：15913957
> 
> 赞同：0
> 
> 时间：2013-04-09T22:52:05.890
> 
> 标签：ruby, amazon-web-services, amazon-s3, amazon-sqs

我需要设置一个将 sqs 发送到服务器的客户端：

客户端：

...
sqs = AWS::SQS.new
q = sqs.queues.create("q_name")
m = q.send_message("meta")
...

但是服务器如何读取客户端的消息？
先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:03:35.507

首先你需要让你的服务器连接到 SQS 然后你可以得到你的队列。在您的队列上执行 get_messages。转到[boto 文档](http://boto.readthedocs.org/en/latest/ref/sqs.html)以获取有关属性的更多信息。这将根据您的参数为您提供 1 到 10 个消息对象。然后在每个对象上执行 get_body() 然后您将获得消息的字符串。

这是python中的一个简单示例。抱歉不知道红宝石。

```
sqsConn = connect_to_region("us-west-1", # this is the region you created the queue in
                        aws_access_key_id=AWS_ACCESS_KEY_ID,
                        aws_secret_access_key=AWS_SECRET_ACCESS_KEY)

QUEUE = sqsConn.get_queue("my-queue") # the name of your queue

msgs = QUEUE.get_messages(num_messages=10, # try and get 10 messages
                          wait_time_seconds=1, # wait 1 second for these messages
                          visibility_timeout=10) # keep them visible for 10 seconds

body = msgs[0].get_body() # get the string from the first object 
```

希望这可以帮助。

# file-upload - 共享 dashlet 中的 Alfresco 文件上传表单

> ID：15913958
> 
> 赞同：1
> 
> 时间：2013-04-09T22:52:06.237
> 
> 标签：file-upload, share, alfresco

我有时会在需要文件上传功能的 Alfresco dashlets 上工作。我不想编造东西，而是想使用 Alfresco 提供的 YUI Uploader。对于我构建的新页面，很简单，只需列出组件并将它们放入页面模板中即可。但是对于仪表板，我总是必须将上传组件放在所有仪表板中的dashboard-1-column*、dashboard-2* ...等中。

我认为这是页面上不必要的 HTML，尤其是对于那些不使用相关 dashlet 的网站或用户。

是否有一种巧妙的方法可以仅在 dashlet 中包含 Alfrescos 的文件上传表单（classes/alfresco/site-webscripts/org/alfresco/components/upload/* 组件）？

# arm - 为 Thumb OR Arm 编译的 ARM ELF 的脚本/工具谓词

> ID：15913964
> 
> 赞同：3
> 
> 时间：2013-04-09T22:52:24.233
> 
> 标签：arm, binutils

我有**rootfs**和**klibc**文件系统。我正在创建`make`规则，一些开发人员有一个没有联网的旧编译器。^(note1) 我正在尝试验证是否只有在检测到特定版本的编译器时才使用**arm构建所有文件。**我已经多次重建了这棵树。我正在使用`readelf -A`和寻找`Tag_THUMB_ISA_use: Thumb-1`，但这似乎是仅在**arm**代码（但使用互通编译器构建）以及`thumb`代码。我可以手动运行`objdump -S`并检查汇编程序以确定正在使用的指令集。

但是，如果我有一个脚本/工具谓词，这样会更容易，这样`find`就可以使用 , etc 来搜索*影子*文件系统以查找可能丢失的二进制文件。我认为其中一些信息会在`ELF`标题中，并且可以通过`objdump`or访问`readelf`，但我没有找到任何可靠的信息。

具体来说，我正在寻找，

1.  `CONFIG_ARM_THUMB`编译的“C”在没有Linux 系统的情况下无法运行。
2.  `make`使用“C”编译器标志的规则会阻塞非拇指编译器。

**注意1：**`thumb`互通允许在和模式之间轻松切换`arm`，编译器将自动生成代码以支持从任一模式调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:19:27.917

`readelf -A`输出没有描述**精灵**的内容。它只是描述了*处理器*和/或*系统*的能力，这些能力是预期的或提供给编译器的。由于我有一个作为处理器的`ARM926`CPU `ARMV5TEJ`，gcc/ld 将始终设置`Tag_THUMB_ISA_use: Thumb-1`为它只是意味着它`ARMV5TEJ`被认为是有`Thumb-1`能力的。它没有说明代码本身。

检查 Linux [arch/arm/kernel/elf.c](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/kernel/elf.c)例程`elf_check_arch()`显示检查`x->e_entry & 1`. 这导致以下脚本，

```
readelf -h $1 | grep -q Entry.*[13579bdf]$ 
```

即，只需查看初始**ELF**条目值并查看是否设置了低位。这是一个快速检查，符合我正在寻找的精神。 [unixsmurf](https://stackoverflow.com/users/563188/unixsmurf)有一个优点，即任何**ELF**中的代码都可以混合和匹配**ARM**和**Thumb**。如果程序动态*识别*CPU 并选择适当的例程，这可能没问题。即，仅存在**Thumb**指令并不意味着该代码将执行。

只需查看该`entry`值就可以确定使用了哪些`gcc`编译器标志，至少对于`gcc`4.6 到 4.7 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T12:12:05.037

由于拇指和手臂序列可以在目标文件中自由互换，即使在同一部分中，简单的 ELF 标头检查也无法帮助您确定文件是否包含 Thumb 指令。

一个稍微迂回但仍然不是 100% 万无一失的方法是使用`readelf -r`并检查输出是否包含“R_ARM_THM”，表示拇指的重定位。

# objective-c - @property 指令可以用于原始数据类型吗？

> ID：15913968
> 
> 赞同：-1
> 
> 时间：2013-04-09T22:52:50.377
> 
> 标签：objective-c, properties

在我见过的所有示例程序中，@property 指令用于对象类型。例如：

```
 @property NSArray *myArray; 
```

我的问题是，我可以在 int 等原始数据类型上使用和/或应该使用 @property 吗？例如：

```
@property int myNumber; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T22:55:45.077

是的你可以：

```
@property (nonatomic, assign) BOOL myBool;
@property (nonatomic, assign) NSInteger myCount; 
```

`assign`是告诉编译器和运行时您的属性不需要内存管理的指令，并且可以直接将值分配给 ivar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T22:55:05.983

是的你可以。但是对于原始数据类型，您不能使用与内存相关的选项，例如保留/强/弱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:55:23.537

是的。@property 只是 getter 和 setter 方法的简写，适用于任何类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:55:34.153

是的，但请确保为它使用属性（分配）。

# excel - 将 Azure 移动服务数据库连接到 Excel

> ID：15913970
> 
> 赞同：1
> 
> 时间：2013-04-09T22:52:59.880
> 
> 标签：excel, azure-mobile-services

我有一个使用 Azure 移动服务后端的 Windows 应用商店应用程序。我希望能够对我需要将数据导入 Excel 的数据库表中的数据进行一些分析。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:38:45.457

你有几个选择。首先，Azure 移动服务中的数据存储在“常规”SQL Azure 数据库中。因此，您可以使用 SQL Server Management Studio 等工具连接到它，并导出数据。

另一种选择是使用命令行界面 (CLI) 在本地保存数据。[MSDN 上的此文档](http://www.windowsazure.com/en-us/develop/mobile/tutorials/command-line-administration/)讨论了使用 CLI 管理移动服务。CLI 还具有从表中读取数据的选项，因此您也可以使用它 - 但结果不会采用与 Excel 兼容的格式。它支持基于文本的格式和 JSON；您可能需要 JSON 选项，该选项更易于解析并创建一些对 Excel 友好的格式，例如 CSV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:22:06.317

您可以在此处找到使用 Excel 访问您的移动服务数据的演练：http: [//thejoyofcode.com/Using_excel_to_access_your_Mobile_Services_data.aspx](http://thejoyofcode.com/Using_excel_to_access_your_Mobile_Services_data.aspx)

# c# - 用于创建 ICollection 的 EditorTemplate

> ID：15913973
> 
> 赞同：1
> 
> 时间：2013-04-09T22:53:17.693
> 
> 标签：c#, asp.net, asp.net-mvc-4

使用[此处](https://stackoverflow.com/questions/15896978/create-multiple-parts-of-complex-model-in-the-main-view)建议的方法，我设法为我的大多数类型创建了一个视图。但是，有 2 个集合我遇到了问题。

```
public class BuildingPermit
{
    public int ApplicationID { get; set; }
    public virtual Person Applicant { get; set; }
    public virtual Area ApplicantArea { get; set; }
    public virtual ICollection<Owner> Owners { get; set; }
    /...
} 
```

正如我在链接问题中提到的那样，我使用脚手架为我的自定义类型创建了控制器和所有视图，并且我想在同一页面（视图）中注册所有详细信息，这意味着在`BuildingPermit`Create 视图中，为`Owners`与类型`ICollection<Owner>`。其他类型的行为应有尽有，但不是`ICollection`。

我想让用户能够以某种方式在的创建视图中注册几个`Owner`s 。`BuildingPermit`如果不可能，至少创建 1、2 或 3。

提前致谢。

# php - Zend Framework 2 如何访问控制器中的类？

> ID：15913976
> 
> 赞同：0
> 
> 时间：2013-04-09T22:53:23.490
> 
> 标签：php, zend-framework2

我创建了一个包含类的文件夹。我正在尝试访问控制器中该文件夹中类的返回。

提前致谢

模型类**GetUserPersonalData**及其位于此处：

E:\wamp\www\ZendEbayApp\module\Application\src\Application\models

**我的控制器位于此处：**

E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller

**后端用户管理控制器.php**

```
 <?php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class BackendUserAdministrationController extends AbstractActionController {

    public function indexAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddAdditionalUserAcountsAction() {
        $this->layout('layout/BackendAdministrationLayout');

        $GetUserPersonalDataClassObject = new \Application\models\GetUserPersonalDataClass();
        $theoutputarray = $GetUserPersonalDataClassObject->GetUserPersonalDatafunction();
        echo $theoutputarray[1];
    }

    public function AddCompanyDetailAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddUserAccountAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddUserPersonalAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddUserPlanDetailAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddUserPreferencesAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

    public function AddUserTransactionsAction() {
        $this->layout('layout/BackendAdministrationLayout');
    }

} 
```

**获取用户个人数据.php**

```
 <?php

class GetUserPersonalDataClass {

    public function GetUserPersonalDatafunction() {

        $GetUserPersonalDataArray = array();

        $OpenedUserPersonalFile = fopen("E:/wamp/www/ZendEbayApp/data/usersinformation/userPersonal.txt", "r");
        while (!feof($OpenedUserPersonalFile)) {
            $OpenedUserPersonalFileSingleRow = fgets($OpenedUserPersonalFile);

            array_push($GetUserPersonalDataArray, "$OpenedUserPersonalFileSingleRow");
        }
        fclose($OpenedUserPersonalFile);

        return $GetUserPersonalDataArray;
    }

}

$GetUserPersonalDataClassObject = new GetUserPersonalDataClass();
$theoutputarray =  $GetUserPersonalDataClassObject->GetUserPersonalDatafunction();

echo $theoutputarray[1];
?> 
```

当我使用 betbeans 调试 BackendUserAdministrationController.php 时，它还说：

```
 E:\wamp\bin\php\php5.4.3\php.exe E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller\BackendUserAdministrationController.php

    Fatal error: Class 'Application\Controller\AbstractActionController' not found in E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller\BackendUserAdministrationController.php on line 7

    Call Stack:
        0.0013     130104   1\. {main}() E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller\BackendUserAdministrationController.php:0

    PHP Fatal error:  Class 'Application\Controller\AbstractActionController' not found in E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller\BackendUserAdministrationController.php on line 7
    PHP Stack trace:
    PHP   1\. {main}() E:\wamp\www\ZendEbayApp\module\Application\src\Application\Controller\BackendUserAdministrationController.php:0
    Done. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:24:05.987

您的类似乎没有命名空间，这可能会解释问题，请尝试添加一个

```
<?php
// add this line to your model class
namespace Application\models;

class GetUserPersonalDataClass
{
    // <snipped/>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:46:34.967

而不是类，创建一个库文件，也许这可以帮助：

[如何访问自定义文件的数据库](https://stackoverflow.com/questions/15896557/how-to-access-database-for-custom-files)

# python - 如何计算半径为 35 和 65 的 2 个圆之间有多少个坐标？

> ID：15913977
> 
> 赞同：0
> 
> 时间：2013-04-09T22:53:28.473
> 
> 标签：python, arrays, loops, counter

我知道答案应该是我的坐标的大约 60% 在这个范围内，但我只得到大约 20%

```
import random
import pylab
import numpy
pylab.close("all")                                              #all import statements
x = [(random.randint(0,100)) for i in range(3000)]      #creating list of x coordinates
y = [(random.randint(0,100)) for j in range(3000)]      #creating list of y coordinates
array=zip(x,y)                                                  #creating an array by combining the x and y coordinates
counter = 0
for i, j in array:
        if 35**2 <= (i**2+j**2) <= 65**2:
                counter+= 1
print counter 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:01:33.340

问题是这一行：

```
if 35**2 <= (i**2+j**2) <= 65**2: 
```

这是检查坐标是否在以原点为中心的半径为 35 的圆和以原点为中心的半径为 65 的圆之间。

但由于您要测试的坐标始终位于正-正象限中，因此只有 1/4 的坐标会落在您预期的圆圈内。

最简单的解决方法是将`randint`调用更改为使用`(-50, 50)`而不是`(0, 100)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:04:44.780

你的区域是 10000，在第一象限。您正在查看面积为

```
pi(65**2 - 35**2)/4 
```

这是2356 ...或总面积的23.56％。所以，你得到了正确的答案。

顺便说一句，您的代码不需要那些 pylab 和 numpy 导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:11:12.910

您可以通过以下方式对此进行可视化`pylab.imshow()`：

```
import numpy as np
import pylab as pl
y, x = np.mgrid[:100, :100]
d = x**2 + y**2
mask = (35**2 <= d) & (d <= 65**2)
pl.imshow(mask, origin="lower") 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/x8gDM.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T23:04:18.207

不，你应该得到少于 30%。你只是填满了第一象限！

这是一个情节：

![在此处输入图像描述](https://i.stack.imgur.com/JuwBx.png)

# javascript - JSF 使用 Keystorokes 导航页面控件

> ID：15913985
> 
> 赞同：1
> 
> 时间：2013-04-09T22:54:01.680
> 
> 标签：javascript, html, jsf, web-applications

我正在使用带有 Primefaces 的 JSF 开发 Web 应用程序。必须在大多数 JSF 页面中使用键进行导航，尽可能避免使用鼠标。Return 键比 Tab 键更适合向前导航。导航路径大多是预先确定的，但在某些情况下，它是在运行时决定的。例如，在 txtItemQuantity 输入框按回车键，光标必须转到 dtpExpiry，如果项目有到期日，或者如果没有到期日则需要点击添加按钮。我怎样才能实现这个功能？

# git - 排除一个名为 components 的文件夹，但不排除另一个文件夹

> ID：15913996
> 
> 赞同：0
> 
> 时间：2013-04-09T22:55:00.717
> 
> 标签：git, github

我想排除我的基本文件夹中的组件目录，但不排除任何其他组件目录：

```
/components --- WANT EXCLUDED
/client/components --- WANT INCLUDED 
```

我的 .gitignore 应该是什么样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:59:54.157

只需在 .gitignore 中执行 /components

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:00:07.723

您可以通过在前面添加例外`!`

因此，对于您的情况， .gitignore 文件看起来像

```
components
!/client/components 
```