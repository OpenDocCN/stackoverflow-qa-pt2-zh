# StackOverflow 问答 14649000-14649999

# ruby-on-rails - delay_job 类中的 send_file

> ID：14649000
> 
> 赞同：1
> 
> 时间：2013-02-01T14:57:09.347
> 
> 标签：ruby-on-rails, delayed-job, sendfile

我在 delay_job gem 的帮助下在后台生成 xls 文件。在此之后，我想将文件发送给用户。有没有办法在 delay_job 类的控制器之外调用 send_file 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:20:22.397

如果您将任务后台处理到delayed_job，则用户的请求将不再存在。如果它仍然存在，那么您根本不需要后台任务（因为它破坏了后台的整个目的）。

我的建议是在 delay_job 生成文件后将文件与相应的数据库记录一起保存到磁盘。当用户等待时，让 Ajax 偶尔询问服务器文件是否准备好。准备就绪后，使用 Ajax 对文件发出新请求、显示下载链接或任何最有效的方式。

# html - 使用 jquery 将文件内容加载到 div 中

> ID：14649002
> 
> 赞同：0
> 
> 时间：2013-02-01T14:57:13.150
> 
> 标签：html, jquery

我希望当单击特定链接时，文件的内容将加载到 div 中。这很好用，但是当我单击另一个文件时，我希望将另一个文件的内容加载到该 div 中的 ul 元素中，但它不起作用。

这是我做的：

```
$(document).on('click', 'a.link2', function() {
  var value = $(this).attr("href");
  value=value.replace("#","");

   var linkName = {'href':value};

          $.ajax({

  type: "POST",
  url: 'pp.php',
  data :linkName,
  success: function(response){
      if(value=="login")
    $('#div1').html(response); 
      }
    });
     }); 

 $(document).on('click', 'a.link', function() {
  var value = $(this).attr("href");
  value=value.replace("#","");

   var linkName = {'href':value};
  // alert(value+"dd");
  $.ajax({

  type: "POST",
  url: 'make.php',
  data :linkName,
  success: function(response){

  $('#target').html(response);

      }
  });
  }) ; 
```

html代码：

```
<div id="div1">

<ul id="target">
 .
 .
 .
      </ul></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:04:10.583

发生这种情况是因为您覆盖了`#div1`( *with`$('#div1').html(response);`* ) 的内容，因此您删除了该`ul`元素。因此，当进行下一个 ajax 调用时，`ul`找不到..

您可以将您的 html 更改为

```
<div id="div1">
    <div id="ajaxresult"></div>
    <ul id="target"></ul>
</div> 
```

并使用`$('#ajaxresult').html(response);`而不是`$('#div1').html(response);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:02:57.820

您的问题是第一个 ajax 调用覆盖了内部的 html `#div1`，`$('#div1').html(response)`因此`#target`当涉及到第二个 ajax 调用时不再存在。

要绕过它，您可以将 html 更改为：

```
<div id="div1"></div>
<ul id="target"></ul> 
```

# c# - 将 C# 字符串发送到 .PHP 页面

> ID：14649007
> 
> 赞同：2
> 
> 时间：2013-02-01T14:57:28.587
> 
> 标签：c#, php, mysql

环顾四周后，我来到了[这个页面](https://stackoverflow.com/questions/5036136/sending-a-string-to-a-php-page-and-having-the-php-page-display-the-string)。在这里，我找到了一些将 C# 字符串发送到 PHP 页面的代码。

但是，在我自己的程序中实现它后，它不起作用。这是我的代码：

```
 private void executesend()
        {  
            using (WebClient client = new WebClient())
            {
                client.UploadString(url,"POST",keys);
            }
        } 
```

对于 PHP 部分，我有：

```
 <?php 
    mysql_connect("localhost", "", "") or die(mysql_error()); // Connect to database server(localhost) with username and password.
            mysql_select_db("dimittv89_dayz") or die(mysql_error()); // Select registration database.
            $name = $_GET["message"];
 if ( $_SERVER['REQUEST_METHOD'] == 'POST' )
{
    $name = file_get_contents('php://input');

    $opdracht = "INSERT INTO 'keys', (`key`) VALUES ('$name')";
    print $name;
}

if (mysql_query($opdracht)){ 
echo "succesfully registerd to the melloniax u wil now be returned to our main page";
 }
 else{
 echo "hey something went wrong there ! please try again in a minute";
 }

 ?> 
```

在同一主题中，一位用户还说试试这个：

```
php?fmessage=testtesttest" 
```

并使用写下输出

```
$name = $_GET["message"];
print $name; 
```

这也不起作用。难道我做错了什么？

感谢您的帮助

到目前为止，我发现它不是错误的发送值，而是获取值：

```
Username = Registry.CurrentUser.OpenSubKey("Username", true);
Name = "" + Username.GetValue("Uid"); 
```

在 regedit 菜单中它说该值是 REG_BINARY，这些可以用 getvalue 读取吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T10:15:54.493

将此代码用于 c# 和 php ：

```
private void executesend()
    {  

                HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);

                req.Method = "POST";
                string Data = "message="+keys;
                byte[] postBytes = Encoding.ASCII.GetBytes(Data);
                req.ContentType = "application/x-www-form-urlencoded";
                req.ContentLength = postBytes.Length;
                Stream requestStream = req.GetRequestStream();
                requestStream.Write(postBytes, 0, postBytes.Length);
                requestStream.Close();

                HttpWebResponse response = (HttpWebResponse)req.GetResponse();
                Stream resStream = response.GetResponseStream();

                var sr = new StreamReader(response.GetResponseStream());
                string responseText = sr.ReadToEnd();

            }
            catch (WebException)
            {

                MessageBox.Show("Please Check Your Internet Connection");
            } 
```

}

和php

```
<?php 
    mysql_connect("localhost", "", "") or die(mysql_error()); // Connect to database server(localhost) with username and password.
            mysql_select_db("dimittv89_dayz") or die(mysql_error()); // Select registration database.

 if (isset($_POST['message']))
{
    $name = $_POST['message'];

    $opdracht = "INSERT INTO keys (key) VALUES ('$name')";
    print $name;
    if (mysql_query($opdracht)){ 
     echo "succesfully registerd to the melloniax u wil now be returned to our main page";
    }
    else{
     echo "hey something went wrong there ! please try`enter code here` again in a minute";
    }

}

?> 
```

# regex - HTML5 正则表达式模式：允许字母数字和最多 3 个空格、下划线和连字符

> ID：14649015
> 
> 赞同：1
> 
> 时间：2013-02-01T14:57:43.793
> 
> 标签：regex, html

```
^[a-zA-Z0-9]*[a-zA-Z0-9 _][a-zA-Z0-9]{2,24}$ 
```

这就是我现在所拥有的。

我想先要求一个字母数字；允许使用字母数字、下划线、连字符、句点和空格；要求它以字母数字结尾。但我只想允许多达 3 个这些特殊字符。

我主要对如何限制特殊字符的数量感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:28:10.857

你也可以使用这个正则表达式：

```
/^(?!(?:[a-z\d]*[_. -]){4})[a-z\d][\w. -]{0,22}[a-z\d]$/i 
```

前瞻`(?!(?:[a-z\d]*[_. -]){4})`是检查出现的无效字符少于 4 次。如果有 4 个或更多，则负前瞻内的模式将匹配，并使前瞻失败。

由于字符串必须以字母数字开头和结尾，并且长度至少为 2，因此可以指定`[a-z\d]`为字符串的开头和结尾。中间的其余字符可以包含`[a-zA-Z0-9_. -]`重复 0 到 22 次中的任何一个，因为 2 个字符已经用于开始结束的字母数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:07:08.717

**好的，这应该是最后一次编辑：**没有考虑总字符数限制。添加了前瞻（假设您的正则表达式支持它）。

可能有比这更好的方法，但它不会来找我（也许使用前瞻）。这是我能想到的：

```
^(?=^.{2,24}$)[a-zA-Z0-9]+([a-zA-Z0-9]*[_\-. ]){0,3}[a-zA-Z0-9]+$ 
```

它不是太漂亮，但它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:36:49.470

```
^[a-zA-Z0-9]+[ _.-]?[a-zA-Z0-9]*[ _.-]?[a-zA-Z0-9]*[ _.-]?[a-zA-Z0-9]+$ 
```

可能有更好的方法来做到这一点，但我认为你可以让无效字符是可选的，最多出现 3 次，而其他有效字符在它们之间出现 0 次或更多次

# php - 将值从单击的按钮传递给函数 PHP（不使用 JS）

> ID：14649021
> 
> 赞同：1
> 
> 时间：2013-02-01T14:57:58.077
> 
> 标签：php, function, variables, onclick

所以这是我的问题。我是否可以在不使用 javascript 的情况下将这个 Onclick 事件从 Php 提供 Javascript 函数变量 $i，因为我想获得点击按钮的数量。我知道它与按钮名称有关，但是对于该按钮名称，我只知道如何查看是否使用 isset 单击按钮（如果单击它以起作用，我不知道如何传递值），我想做这完全在 php 中，但我被困在这里，因为我不知道该怎么做，任何帮助将不胜感激。

```
 <?PHP   
 $i=0; 
 foreach($test2 as $test)
  {
       $delete ="<INPUT TYPE=BUTTON OnClick='submit_btn(" . $i. ")' NAME='delete".$i."'VALUE='delete'>";

    $i++;

  }
 ?>

<script type="text/javascript"> 

    function submit_btn(btnClick) // < -- How to do this in PhP
       {        
           alert(btnClick); // echo would go here 
       }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:58:24.443

```
<?php
  if(isset($_POST['delete']) && is_array($_POST['delete'])) {
    echo 'Button ' . $_POST['delete'][0] . ' was clicked.';
  }

  $test2 = array(1, 2, 3, 4, 5, 6);
?>  

<!doctype html>
...
<html>
  <form method="post">
    <?php
    $i=0; 
    foreach($test2 as $test) {
      echo "<button type='submit' name='delete[]' value='button_{$i}'>
              Delete-Button #{$i}
            </button>";
      $i++;
    }
    ?>
  </form>
</html> 
```

这是一个工作示例：[http ://codepad.viper-7.com/LQpHvp](http://codepad.viper-7.com/LQpHvp)

请注意（与 JavaScript 和 Ajax 技术不同）这总是需要刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:13:51.873

试试这个（把它放在一个 test.php 文件中进行测试）

```
<form method="post"><?php
$i=0; 
$test2 = array(1,2,3,4,5,6,7,8);
foreach($test2 as $test)
{
    echo '<input type="submit" name="delete" value="'.$i.'" />';

    $i++;

}
?></form>

<p><?php
// get result

if (isset($_POST['delete']))
{
    echo $_POST['delete'];
}
?></p> 
```

# php - CodeIgniter 中的完全动态 URL

> ID：14649023
> 
> 赞同：2
> 
> 时间：2013-02-01T14:58:06.760
> 
> 标签：php, codeigniter

我正在建立一个基于 CodeIgniter 的在线商店。我希望 URL 看起来像这样？

```
http://example.com/[product-category]/[product-name] 
```

问题是也有非产品页面`/checkout/step-1`，这些仍然必须工作。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:14:38.320

您在路由配置文件 (application/config/routes.php) 中定义的路由按照定义的顺序执行。如果您首先输入更具体的路线，那么最后可以采用通用的包罗万象的路线。

```
$routes['checkout/step_(\d+)'] = 'checkout/step_$1';
// calls the checkout class, step_x method

$routes['(.*)/(.*)'] = 'product_class/product_method/$1/$2';
// calls the product class, and product method, passing category and name as parameters 
```

这种方法的缺点是您必须在此文件中定义所有路由，即使是直接映射到控制器/动作的路由。更好的方法可能是让您的产品路线以“产品”开头，以便它们看起来像这样：

> http://example.com/products/[产品类别]/[产品名称]

使用这种方法，您可以定义一个仅适用于如下产品的路由规则：

```
$routes['products/(.*)/(.*)'] = 'product_class/product_method/$1/$2'; 
```

这更好，因为它不会强制您为站点中的每个控制器/动作组合定义创建路由。

[http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:14:44.380

在 application/config/routes.php 中，例如

```
$route['checkout/(:any)'] = "checkout/test_controller_method/$1"; 
```

# django - 子类化资源，但使用 1 url 来存储美味派中的资源

> ID：14649026
> 
> 赞同：0
> 
> 时间：2013-02-01T14:58:02.717
> 
> 标签：django, rest, tastypie

假设我有 MediaResource 和两个相关（子类）资源，如下所示。

```
class PopularMediaResource(MediaResource):
 def get_object_list(self, request):
  return self.Meta.queryset.order_by('-num_hits')

class UserMediaResource(MediaResource):
 def get_object_list(self,request):
  return self.Meta.queryset.filter(mediahit__user__id=request.user.id) 
```

[（从https://groups.google.com/forum/?fromgroups=#!topic/django-tastypie/JGmY8tUzlX0](https://groups.google.com/forum/?fromgroups=#!topic/django-tastypie/JGmY8tUzlX0)借来的示例）
这很好用，但我必须为这些资源中的每一个使用不同的 URL

```
eg, /api/v1/MediaResource/
/api/v1/PopularMediaResource/
/api/v1/UserMediaResource/ 
```

等等..

那么`having multiple resource classes`当你想归还`different set`资源时，典型的使用方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:12:55.960

我认为你应该使用过滤和排序机制。

这是文档：

[http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering](http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering)

# sitecore - 通过 API 向 Sitecore 域添加和更改用户和角色

> ID：14649027
> 
> 赞同：0
> 
> 时间：2013-02-01T14:58:26.223
> 
> 标签：sitecore, sitecore6

我必须创建一个单独的 Web 项目来访问 sitecore 域的角色和用户 API，因此我可以以编程方式添加具有自定义访问树以及自定义语言访问的新角色。我找到了安全 API 的文档， [http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf](http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf)

但是我不确定如何添加新角色，我可以创建任何类型的项目，例如 MVC4 还是必须在 WebForms 中？这甚至可以通过添加新角色并通过 API 为他们分配新用户来向树添加自定义权限，这样他们就可以通过 SiteCore 域正常登录？另外，我应该使用什么数据库，我看到有 3 个不同的数据库（核心、主控、网络），我是否必须手动连接到数据库并在那里添加角色，或者 API 会为我做这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:38:49.150

我最终创建了一个类，让我可以在需要时添加新的语言（地区）。这是我的想法。

```
using(new Sitecore.Security.Accounts.UserSwitcher(user) //To switch to any user you want, in my case it was the "sitecore/admin"

System.Web.Security.Roles.CreateRole(roleName) //To create roles
var role = Sitecore.Security.Accounts.Role.FromName(roleName) //To retrieve the role.
//Get a list of the permissions that you would like to set
//For every item in that list
AccessRuleCollection accessRule = Item.Security.GetAccessRules();
acessRule.Helper.AddAccessPermission(role,AccessRight,PropagationType,AccessPermission);

//Write the Rules back to the item
Item.Editing.BeginEdit();
Item.Security.SetAccessRules(accessRules);
Item.Editing.EndEdit(); 
```

希望有帮助。

# php - Phalcon\Mvc\Model::beforeCreate() 方法

> ID：14649030
> 
> 赞同：3
> 
> 时间：2013-02-01T14:58:29.690
> 
> 标签：php, phalcon

如果我尝试使用 beforeCreate() 方法中定义的 date_created 字段保存模型，它不会保存它：

```
class TestEntity extends Phalcon\Mvc\Model
{

    public function beforeCreate()
    {
        $this->date_created = date('Y-m-d H:i:s');
    }

    /**
     * Returns source table name
     * @return string
     */
    public function getSource()
    {
        return 'test_entity';
    }
} 
```

控制器动作上下文：

```
$test = new TestEntity();
$test->name = 'test';
var_dump($contact->save()); // gives false
var_dump($contact->getMessages()); // says date_created is not defined 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T20:33:25.160

您需要在执行空验证之前指定创建日期：

```
<?php

class TestEntity extends Phalcon\Mvc\Model
{

    public function beforeValidationOnCreate()
    {
        $this->date_created = date('Y-m-d H:i:s');
    }

    /**
     * Returns source table name
     * @return string
     */
    public function getSource()
    {
        return 'test_entity';
    }
} 
```

# jira - Jira 快速过滤器以显示所有任务以及分配给当前用户的子任务

> ID：14649036
> 
> 赞同：14
> 
> 时间：2013-02-01T14:58:53.720
> 
> 标签：jira, jql

目前，我有一个快速过滤器来向我展示我的任务：

```
assignee = currentUser() 
```

这可以正常工作，但不会显示分配给其他人的任务，而是分配给我的子任务。是否可以让它显示分配给我的任务和分配给我的子任务的任务？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T16:50:06.643

从以下 JQL 为您的所有子任务创建一个过滤器：

```
issuetype in subtaskIssueTypes() and assignee = currentUser() 
```

然后，使用[Craftforge JQL Functions Plugin](https://marketplace.atlassian.com/plugins/org.craftforge.jira.craftforge-jql-functions-plugin)，使用以下 JQL 查找其父级：

```
issue in parentIssuesFromFilter("filter name or its id") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-23T12:00:38.360

以下查询将返回**所有父任务**，其中有分配给当前用户的子任务。（父任务不需要分配给当前用户）

```
issueFunction in parentsOf("assignee = currentUser() ") 
```

注意：`issueFunction`需要 ScriptRunner 插件并且它不是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:36:08.883

除了@Kuf 的回答之外，有时在一个查询中编写整个内容要简单得多，尤其是使用 Greenhopper 中的 Swimlanes 或 Quick-Filters，而不是创建和保存自定义过滤器。

例如，在 Greenhopper 上的一个快速过滤器中显示未完成的问题或子任务：

```
status!=Closed or issue in parentIssuesFromQuery("issuetype in subtaskIssueTypes() AND status!=Closed ") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-21T08:02:52.713

导航到问题（在标题中）> 搜索问题，然后输入您的搜索条件。

# css - 用于拥抱漂浮物的流体宽度容器

> ID：14649039
> 
> 赞同：6
> 
> 时间：2013-02-01T14:59:02.067
> 
> 标签：css, css-float, containers, fluid, contain

我有一个最大宽度：80% 的容器（图片库）。在内部，图像向左浮动，形成列和行。当您缩小/展开浏览器窗口时，每行可容纳更多或更少的图像，并且当没有足够的空间容纳另一个完整图像时，通常在每行的末尾有一个“剩余部分”：

[http://jsfiddle.net/vladmalik/DRLXE/1/](http://jsfiddle.net/vladmalik/DRLXE/1/)

我希望容器能够扩展或收缩以完全拥抱，但许多浮子都适合一列（所以右边永远不会有黄色的余数）。这可以用 CSS 完成吗？

HTML：

```
<section>  
   <div></div>  
   <div></div>  
   <div></div>  
   <div></div>  
   <div></div>  
</section> 
```

CSS：

```
div {  
   width: 100px;  
   height: 100px;  
   float:left;  
   background: red;  
}  

section {  
   margin: 0 auto;  
   max-width: 80%;  
   background:yellow;  
   overflow: hidden;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:58:09.133

我想你也许可以用一个 jQuery 来做到这一点，`.length()`它会`div`根据窗口大小不断地重新计算所需的宽度和高度。因此，如果...

```
div {
  width: 100px;
  height: 100px;
  float: left;
} 
```

然后...

```
$(document).ready(function(){
    changeSize();
});

function changeSize(){
    var length = $('div').length(); //let's say is 12 

    var windowwidth = $(window).width(); //let's say it's 1000px, 

    if (length >= 10 && windowwidth >= 600px){ 
        $('section').css('width', '300px'); 
        $('section').css('min-height', '400px'); 
    }
    else if {
        //Some more sizing code...
    }
}

$(window).resize(function() {
    changeSize();
}); 
```

您需要根据需要在 if 语句中设置条件，但是这种方法应该可以做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:20:23.623

它不能纯粹在 CSS 中完成（特别是如果它必须是跨浏览器兼容的），你可以做的最好的是以百分比设置 div 宽度，然后像那里一样设置它们的 css 背景：

```
div {
    width:25%;
    height: 100px;
    float:left;
    background: transparent url('http://1.bp.blogspot.com/_muMRp22Klwo/SuGeqr4TeII/AAAAAAAAAVY/afpIYqkyPkM/s400/sad-dog.jpg') center center no-repeat;
} 
```

[http://jsfiddle.net/DRLXE/3/](http://jsfiddle.net/DRLXE/3/)

虽然离完美还差得很远。

# php - PHP如何检测段落并添加 HTML 输出的标签

> ID：14649046
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:24.990
> 
> 标签：php, bbcode, geshi, paragraphs

如何让 PHP 检测段落并添加和解析

HTML 输出的标签？

我正在制作一个支持 bbcode 的博客，但我仍然缺少

博客文章的 HTML 输出中的标签。如何让 PHP 检测并添加

输出上的标签？

我目前有这段代码来解析一些基础的 bbcode 和 GeSHi 代码：

```
<?php
function code($match) {
    require_once './class/geshi/geshi.php';
    $geshi = new GeSHi($match[2], $match[1]);
    return $geshi->parse_code();
}
function bbcode($input) {

    $input  = strip_tags($input);
    $input  = htmlentities($input);

    $bbcodes = array(        
        "/\[b\](.*?)\[\/b\]/is" => "<b>$1</b>",
        "/\[u\](.*?)\[\/u\]/" => "<u>$1</u>",
        "/\[i\](.*?)\[\/i\]/" => "<i>$1</i>",
        "/\[d\](.*?)\[\/d\]/" => "<del>$1</del>",
        "/\[url=(.*?)\](.*?)\[\/url\]/" => "<a href='$1'>$2</a>"
    );
    $input  = preg_replace(array_keys($bbcodes), array_values($bbcodes), $input);

    //Check for code and add GeSHi:
    $input  = preg_replace_callback('~\[code=(.*?)\](.*?)\[\/code\]~is', 'code', $input);

    return $input;

}
?> 
```

如果用户在 textarea 中提交以下示例：

```
This is [b]bold and [i]italic[/i][/b].

This is some [u]PHP[/u] code:
[code=php]
echo 'Hello world!';
[/code]

That's all folk! 
```

HTML 输出为：

```
This is <b>bold and <i>italic</i></b>.

This is some <u>PHP</u> code:
<pre class="php" style="font-family:monospace;">&nbsp;
<span style="color: #b1b100;">echo</span> <span style="color: #0000ff;">'Hello world!'</span><span style="color: #339933;">;</span>
&nbsp;</pre>

That's all folk! 
```

...没有 p 标签。那么如何添加这个功能呢？

# php - MySQL 查询的 PDO 错误

> ID：14649048
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:29.373
> 
> 标签：php, mysql, pdo

我一直盯着下面的代码一个多小时，看不到任何问题。

```
 public function add($data){
        $sql = 'INSERT INTO ' . $this->name . '(fbid, userAccessToken, name, location, story, gender, email, email_md5, referrer, date, use, optin) VALUES (:fbid, :userAccessToken, :name, :location, :story, :gender, :email, :email_md5, :referrer, :date, :use, :optin)';

        $mysqldate = date('Y-m-d G:i:s');
        $result = $this->dbh->prepare($sql);

        if($result->execute(array(
            ':fbid' => $data['fbid'],
            ':userAccessToken' => $data['userAccessToken'],
            ':name' => $data['name'],
            ':location' => $data['location'],
            ':story' => $data['story'],
            ':gender' => $data['gender'],
            ':email' => $data['email'],
            ':email_md5' => md5($data['email']),
            ':referrer' => $data['referrer'],
            ':date' => $mysqldate,
            ':use' => $data['use'],
            ':optin' => $data['optin']
        ))){

            $return = $this->dbh->lastInsertId();  
        }
    } 
```

错误是

> PHP 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[42000]: 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“使用，选择”附近使用的正确语法 VALUES（“517371547”、“no-auth”、“Shane Jones”、“Manchest”在第 1 行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:03:07.260

`USE`是[mySQL 中的保留字。](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

您需要将其放在反引号中，或使用不同的列名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:05:33.303

`use`是 MySQL 中的关键字。如果要将其用作列标识符，请将其括在反引号中：

```
$sql = 'INSERT INTO `' . $this->name . '` ( `fbid`, `userAccessToken`, `name`, `location`, `story`, `gender`, `email`, `email_md5`, `referrer`, `date`, `use`, `optin`) VALUES (:fbid, :userAccessToken, :name, :location, :story, :gender, :email, :email_md5, :referrer, :date, :use, :optin)'; 
```

无论如何，您应该始终将所有标识符括在反引号中，以防止此类错误！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T15:06:19.090

`USE`是必须用反引号括起来的保留关键字```（[请参阅文档](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:09:39.247

您的问题来自您*手动*构建查询的事实。
虽然使用任何健全的数据库抽象库来为您构建**语法正确的查询**，但代码变得只有几行*短*：

```
public function add($data){
    global $db;
    $data['date'] = date('Y-m-d G:i:s');
    $db->query('INSERT INTO ?n SET ?u',$this->name,$data);
    return $db->insertId();
} 
```

即使您一个都不知道，也不会对近百个保留字中的任何一个提出错误。

# cocoa - 解析 NSURL 中的所有符号链接

> ID：14649049
> 
> 赞同：1
> 
> 时间：2013-02-01T14:59:30.300
> 
> 标签：cocoa, path, nsurl, symlink, symlink-traversal

我正在编写一小段代码，我应该在其中检测是否`NSURL`包含符号链接（即，还应检测除最后一个之外的符号文件组件）。为此，我将`NSURL`自身与`NSURL`返回的`-URLByResolvingSymlinksInPath`. 问题是这个方法似乎返回所有小写的符号链接。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:22:49.953

您可以手动遍历符号链接：

1.  `-[NSFileManager attributesOfItemAtPath:error:]`使用和 键`NSFileType`搜索值来检测符号链接`NSFileTypeSymbolicLink`。

2.  `-[NSFileManager destinationOfSymbolicLinkAtPath:error:]`使用并附加它们获取目标路径。

对每个路径组件重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:34:42.883

要么我真的做错了什么，要么这个错误已通过最新的 Mountain Lion 更新修复。现在所有符号链接都已正确解析。

# facebook-graph-api - 如何使用 Graph API 访问我在其他用户页面或粉丝页面上的用户活动？

> ID：14649051
> 
> 赞同：1
> 
> 时间：2013-02-01T14:59:35.113
> 
> 标签：facebook-graph-api, relationship, fan-page

我想在另一个用户的页面或粉丝页面上找到我自己的任何活动（发布、评论、分享等）。也就是说，*获取我在用户 XYZ 的页面或 SOMETVSHOW 的页面上所做的所有评论、帖子和其他内容的列表*。

这有可能吗？我查看了使用 Graph API 可访问的不同关系，但似乎没有直接的方法来获取这些数据。

一种方法是收集我自己的所有活动，然后通过过滤器运行这些数据，该过滤器将仅提取我在某个用户页面或粉丝页面上留下的评论、帖子等。但这并不是很有效，尤其是如果您（像我一样）首先要捕获大量数据。

此外，我可以采取另一种方式，获取该用户或粉丝页面的所有活动，并过滤掉我自己的帖子和评论，但同样，这将需要很长时间并产生大量需要处理的数据。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:40:58.537

您应该可以通过 FQL 轻松做到这一点：

```
SELECT post_id, type, message, created_time, attachment FROM stream 
  WHERE source_id = PAGE_ID AND actor_id = me() LIMIT 200 
```

您将需要`stream`处理表格的正常限制，因此您可能必须翻页查看这些结果以获取您要查找的所有内容。

# logging - 防止 joomla api 记录已弃用的警告

> ID：14649052
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:35.877
> 
> 标签：logging, joomla, warnings, joomla2.5

我有 joomla 2.5，它记录了许多不推荐使用的警告，比如`Error::raiseNotice() is deprecated.` 所以我导致了一个大日志文件的宽度。我可以关闭这个选项，只记录我自己的异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:53:19.390

您始终可以在 index.php 中放置错误报告条件，例如：error_reporting(E_ALL ^ E_DEPRECATED);

欲了解更多信息： http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

或者您可以在您的 joomla 目录中编辑 error.php，然后

```
public static function raiseNotice($code, $msg, $info = null)
{
    // Deprecation warning.
    JLog::add('JError::raiseNotice() is deprecated.', JLog::WARNING, 'deprecated');

    //return JError::raise(E_NOTICE, $code, $msg, $info);
} 
```

禁用此功能以引发不推荐使用的警告...

# heroku - 如何获取可用的“heroku run”命令列表？

> ID：14649054
> 
> 赞同：7
> 
> 时间：2013-02-01T14:59:39.177
> 
> 标签：heroku

有几个本地 Linux 命令无法使用`heroku run`，例如`heroku run less filename`和`heroku run apropos`。**如何获取所有可用`heroku run`命令的列表？**

顺便说一句，我只是想从我的应用程序中查看一些目录和文件，但由于某种原因，我无法使用可用命令查看它们。我试过`cd my_project/my_application && ls`了，但它只是出于某种原因显示`ls`了。`my_project`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T20:13:44.303

`ls`您可以在`/bin` *Heroku*文件夹中获取命令列表。请按照以下步骤操作：

*   通过 bash登录*Heroku ：*`heroku run bash`
*   列出 bin 命令：`ls /bin`

请记住，您是在克隆实例中。您在文件系统中所做的所有更改都将退出 shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:54:39.380

`heroku run bash`您可以使用并运行以下命令bash 进入测功机：

```
echo -n $PATH | xargs -d : -I {} find {} -maxdepth 1 -executable -type f -printf '%P\n' | sort -u 
```

（来源：[列出所有可用命令和别名的 Linux 命令](https://stackoverflow.com/questions/948008/linux-command-to-list-all-available-commands-and-aliases)）

# vb.net - 如何使用 system.drawing.printing.printdocument vb.net 打印副本编号

> ID：14649056
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:48.063
> 
> 标签：vb.net, printing

例如，我有一个标签要打印，如下例所示，现在如果我想制作 3 个副本，如何在我正在打印的标签的某处打印副本编号？

示例代码：

```
Private Sub btnPrintProcLabel_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPrintProcLabel.Click
        If ValidateData() Then
            AddHandler PrintDocument1.PrintPage, AddressOf PrintProcLabel

            Try
                PrintDocument1.PrinterSettings.PrinterName = SinglePrinter.PrinterSettings.PrinterName
                PrintDocument1.PrinterSettings.Copies = CInt(txtCopies.Text)
                PrintDocument1.Print()
            Catch ex As Exception
                MsgBox(ex.Message)
            End Try
        End If
    End Sub

Public Sub PrintProcLabel(ByVal sender As Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs)
        Dim g As Graphics = e.Graphics
        Dim br As Brush = New SolidBrush(Color.Black)
        Dim pn As Pen = New Pen(br)

        g.DrawString(Today.Month & "/" & Today.Day & "/" & Today.Year, Arial, br, 250, 3)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:17:47.250

```
 PrintDocument1.PrinterSettings.Copies = CInt(txtCopies.Text) 
```

这告诉打印机驱动程序生成副本，它们都是相同的。如果你想给它们编号，那么你需要自己创建“副本”。它们不再是真正的副本，因为它们都会略有不同。只需重复调用 Print() 方法，使用您在 PrintPage 事件处理程序中的 DrawString() 值的计数器。

# c# - 为什么 Visual Studio 2010 C# 调试器显示的顺序与类定义中的顺序不同？

> ID：14649057
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:49.700
> 
> 标签：c#, visual-studio-2010

我们正在构建一个字节缓冲区，以通过 .Net Socket *Send()*方法发送到某些工厂设备，因此字节顺序很重要。但我注意到，即使我使用“[StructLayout( **LayoutKind.Sequential** ”，Visual Studio 2010 调试器显示的序列与我指定的序列不同。例如，

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
  public class K_NEWFILEGET_START
  {
      public K_HEADER Header = new K_HEADER();
      [System.Runtime.InteropServices.MarshalAs(UnmanagedType.ByValArray, SizeConst = 32)]
      public byte[] fileName = new byte[32];
      public globals.INT2_Type crc = new globals.INT2_Type();
  } 
```

然后我做一个

```
 K_NEWFILEGET_START msg = new K_NEWFILEGET_START(); 
```

在调试器中显示 . . .

```
-    msg      {xxxxx.yyy.K_NEWFILEGET_START}        
+    crc      {xxxxx.globals.INT2_Type}     
+    fileName {byte[32]}                        
+    Header   {xxxxx.yyy.K_HEADER} 
```

（专有的东西 xxx'ed out）在这个例子中，它是相反的顺序，但我还有其他例子，调试器中的显示顺序以不同的方式加扰。

如果我更进一步并使用网络嗅探器检查网络上的实际输出，它似乎是我指定的正确顺序，所以调试器似乎是问题，但我想正确地看到它。顺便说一句，我**确实**在调试器选项中设置了“在变量窗口中显示对象的原始结构”。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:05:34.840

调试器按字母顺序向您显示成员。

在调试包含大量内容的大型结构时，这通常更方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:05:15.627

当然看起来它是按字母顺序排列的......

如果网络嗅探器正确显示它，那么调试器很可能只是试图通过按字母顺序排列变量名称来“帮助”您，以便您可以更轻松地找到它们。

# android - 如何更正从 getMetrics 报告的错误 DPI

> ID：14649058
> 
> 赞同：2
> 
> 时间：2013-02-01T14:59:50.597
> 
> 标签：android

我做了一个应用程序 - StribogECG，它显示 ECG 和其他一些文件类型。在那里，我创建了背景，它是“图形”纸，每毫米有一个点，每 5 毫米有虚线，每 25 毫米有一条线。问题是在某些设备上 25 毫米等于 25 毫米，但在其他设备上 25 毫米等于 30 毫米。

然后我做了一些计算，发现设备可以报告 DPI=160，但实际尺寸为 150 甚至某些平板电脑的 133。

Acer Iconia Tab A500 是 10 英寸和 1280/800。我所拥有的是：

```
metrics.xdpi = 160;
metrics.densityDpi = 160;
metrics.density=1;
metrics.scaledDensity=1; 
```

在这种情况下，设备的直径必须为 9.4 英寸，如果直径为 10 英寸，则 DPI 必须为 150。

当然，我用普通测量线测量，而不是 25 毫米，我有 26.5 毫米。一些 7 英寸平板电脑的问题要大得多。此时，我只能看到一种解决方案——要求用户进行额外的校准——在屏幕上打印两行并要求用户将第二行放在 50 或 100 毫米之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:20:38.990

您将需要检查`metrics.xdpi`并`metrics.ydpi`获得准确的密度数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T10:39:55.643

不幸的是，您只知道设备告诉您什么，并且 DPI 值设置错误是很常见的。这通常是作为一种技巧来完成的，以使界面中的视觉元素更大。

有关更多详细信息，请参阅此帖子：[https ://rschilling.wordpress.com/2011/02/03/android-screen-density-inaccuracies/](https://rschilling.wordpress.com/2011/02/03/android-screen-density-inaccuracies/)

如果您的应用需要准确度，您将需要添加手动校准步骤。

# batch-file - 需要批处理文件来分隔和移动文本文件中的字符和数字

> ID：14649060
> 
> 赞同：0
> 
> 时间：2013-02-01T14:59:51.480
> 
> 标签：batch-file

第一次在这里发帖，因为通常我可以通过使用谷歌找到我的解决方案。但这一次，不行。首先，操作系统是 Windows 7，它肯定必须在批处理文件中完成 - 但附加脚本没问题，只要它不是需要安装的软件。

我得到的文件总是看起来像这样，但值永远不会相同。

```
Example\Example\Example\examplefile.ext
1 0
4 16 7 5 3 9
46215
0
20689
20656
20667
6125
33585
46213
10256
20661
40189
21650
49792
31776
2101
(blank line)
(blank line) 
```

最后两行“（空白行）”实际上是-*空白行*。

现在，我需要的输出文件是这样的：

```
<A:Example\Example\Example\examplefile.ext>
<B:1 0>
<C:4>
<D:16>
<E:7>
<F:5>
<G:3>
<H:9>
<I:46215>
<J:0>
<K:20689>
<L:20656>
<M:20667>
<N:6125>
<O:33585>
<P:46213>
<Q:10256>
<R:20661>
<S:40189>
<T:21650>
<U:49792>
<V:31776>
<X:2101> 
```

所以，这就是我需要输出的方式。所有的帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:32:51.023

这将做你想要的。

## 笔记

1.  这将仅支持最多包含 26 个项目的文件。(亚利桑那州)
2.  第二行永远不会分开。

## 脚本

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion
>output.txt <nul set /p "="
set "A=ABCDEFGHIJKLMNOPQRSTUVWXYZ"
for /f "tokens=*" %%A in (Example\Example\Example\examplefile.ext) do (
    if "!A:~0,1!" equ "B" (
        echo ^<B:%%A^>>>output.txt
        set "A=!A:~1!"
    ) else (
        for %%B in (%%A) do (
            echo ^<!A:~0,1!:%%B^>>>output.txt
            set "A=!A:~1!"
        )
    )
)
endlocal 
```

# spring - 如何在我的 Spring 身份验证成功处理程序方法中访问我的原始 HttpServletRequest 对象？

> ID：14649061
> 
> 赞同：2
> 
> 时间：2013-02-01T15:00:03.460
> 
> 标签：spring, authentication, spring-security, request

我正在使用 Spring 3.1.1.RELEASE。如何在身份验证成功处理程序方法中访问原始请求对象？当我提交我的 spring 安全表单时，我提交了三个参数，用户名、密码和第三个令牌（param name = "token"）。这个我试过了……</p>

```
@RequestMapping(value = "/authenticate")
public String authenticate() 
{
    final HttpServletRequest origRequest = 
                ((ServletRequestAttributes) RequestContextHolder.
                        currentRequestAttributes()).getRequest();
    String token = origRequest.getParameter("token"); 
```

但是，“token”的值始终为空，即使我在提交请求时知道它不是。以下是我配置 Spring 安全性的方法……</p>

```
<beans:bean id="springboardUsernamePasswordUrlAuthenticationFilter" 
    class="org.collegeboard.springboard.dido.security.SpringboardUsernamePasswordUrlAuthenticationFilter">
    <beans:property name="filterProcessesUrl" value="/j_spring_security_check"/>
    <beans:property name="authenticationManager" ref="authenticationManager"/>
    <beans:property name="authenticationFailureHandler">
        <beans:bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
            <beans:property name="defaultFailureUrl" value="/login/failure"/>
        </beans:bean>
    </beans:property>
    <beans:property name="authenticationSuccessHandler">
        <beans:bean
            class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
            <beans:property name="defaultTargetUrl" value="/pdregistration/authenticate" />
        </beans:bean>
    </beans:property>
</beans:bean> 
```

感谢您的帮助，-戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:51:50.803

为时已晚。成功验证后，您的用户被SimpleUrlAuthenticationSuccessHandler**重定向**到 /authenticate。如果您需要访问以前的 HTTP 请求，那么只需为**authenticationSuccessHandler**提供您自己的实现。此时您将能够获得您的令牌：

```
public class CustomAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {
    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {
        // grab your token here from request
        super.onAuthenticationSuccess(request, response, authentication);
    }
}

<beans:property name="authenticationSuccessHandler">
    <beans:bean
        class="com.domain.security.CustomAuthenticationSuccessHandler">
        <beans:property name="defaultTargetUrl" value="/pdregistration/authenticate" />
    </beans:bean>
</beans:property> 
```

# android - 在 Phonegap 中获取蓝牙输入

> ID：14649069
> 
> 赞同：0
> 
> 时间：2013-02-01T15:00:37.627
> 
> 标签：android, ios, cordova, bluetooth

我正在尝试在我的 phonegapo 应用程序中与蓝牙条码扫描仪交互，在 android 和 IOS 中，android 是目前的优先事项。我打算使用这个插件： [https ://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth)

我不反对切换插件甚至编写自己的插件。在查看了这个插件的代码后，我没有看到任何类似于扫描仪会生成的事件。也许我错过了什么？谢谢，我对android开发和phonegap还很陌生。

此外，如果有人对从哪里开始使用 IOS 有任何意见，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T21:36:55.703

将蓝牙条码扫描仪与 cordova 结合使用应该不是问题。我在 Android 4.x 上使用 KDC 扫描仪测试了相同的场景

最简单的解决方案是将扫描仪设置为 HID 键盘。然后更改 Android 中的设置以不使用物理键盘（ Juat 保留屏幕键盘）。

在您的应用程序中，只需为 keyUp/Down 事件的主体添加一个侦听器。

扫描仪尽快发送一个条形码（字符序列），附加的侦听器将被调用。

要将扫描仪的呼叫与常规输入区分开来，请将您的条形码扫描仪配置为使用后缀和前缀，这将永远不会作为常规输入出现，例如 $#++ 作为前缀和 ++#$ 作为后缀。

在您的听众内部，只需跟踪输入。如果出现前缀模式，则开始记录所有字符，直到出现后缀模式。

希望这可以帮助

问候

# c# - 如果它是销售收据的一部分，您如何从 Quickbooks 交易中找到付款行的 TxnLineID？

> ID：14649072
> 
> 赞同：15
> 
> 时间：2013-02-01T15:00:48.647
> 
> 标签：c#, quickbooks, intuit-partner-platform

我可以查询 SalesReceipt 对象：

```
 public bool GetSalesReceipt(string sRefNum, string sAccount, out ISalesReceiptRet ret)
    {
        ret = null;

        IMsgSetRequest msr = sm.CreateMsgSetRequest("US", 4, 0);
        msr.Attributes.OnError = ENRqOnError.roeStop;

        ISalesReceiptQuery q = msr.AppendSalesReceiptQueryRq();
        q.metaData.SetValue(ENmetaData.mdMetaDataAndResponseData);
        q.ORTxnQuery.TxnFilter.ORRefNumberFilter.RefNumberFilter.RefNumber.SetValue(sRefNum);
        q.ORTxnQuery.TxnFilter.ORRefNumberFilter.RefNumberFilter.MatchCriterion.SetValue(ENMatchCriterion.mcContains);
        q.ORTxnQuery.TxnFilter.AccountFilter.ORAccountFilter.FullNameList.Add(sAccount);
        q.IncludeLineItems.SetValue(true);

        IMsgSetResponse resp = sm.DoRequests(msr);
        if (resp.ResponseList.Count == 0)
            return false;

        IResponseList rl = resp.ResponseList;
        if (rl.Count == 1)
        {
            IResponse r = rl.GetAt(0);
            if (r.Detail == null)
                return false;

            if (r.StatusCode != 0)
                return false;

            if (r.Type.GetValue() == (short)ENResponseType.rtSalesReceiptQueryRs)
            {
                ISalesReceiptRetList crl = (ISalesReceiptRetList)r.Detail;
                if (crl.Count == 1)
                    ret = crl.GetAt(0);
            }
        }

        if (ret == null)
            return false;

        return true;
    } 
```

SalesReceipt 在 ORSalesReceiptLineRetList 中有一个 SalesReceipt 行列表，但这些行都不是付款行。无法从付款行的 SalesReceipt 对象中获取 TxnLineID（我可以找到）。

我要做的是从 SalesReceipt 中找到一个特定的 TxnLineID，以便我可以将其标记为已清除。当我进行搜索时，我可以看到有一条交易行（信用卡批次：Visa/MC 账户中的以下行）。如何找到该特定行的 TxnLineID？

![qb交易](../Images/5b4c338d3b36c045bb2cc571f9c1a677.png)

这是一个屏幕截图，显示了标记为已清除的交易，我通过单击已清除列中的框通过 UI 完成。

![在此处输入图像描述](../Images/26d9fd63a7cab884697649a3a1506b86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:52:49.327

根据我所看到的研究，这可能是您的答案：

[https://idnforums.intuit.com/messageview.aspx?catid=7&threadid=12760&highlight_key=y&keyword1=TxnLineID](https://idnforums.intuit.com/messageview.aspx?catid=7&threadid=12760&highlight_key=y&keyword1=TxnLineID)

“恢复了一些使用旧版本引用 ("US",1,1) 调用 SDK 的旧代码，而我应该一直在使用 ("US",7,0)。"

或者

[https://idnforums.intuit.com/messageview.aspx?catid=7&threadid=10776](https://idnforums.intuit.com/messageview.aspx?catid=7&threadid=10776)

至少他们可能能够进一步帮助您解决问题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:31:59.477

日记账分录和销售收据是 QuickBooks 中两种*完全不同的对象类型*。

所以这：

```
Unfortunately, if the transaction I'm querying for is part of a SalesReceipt, 
```

与您发布的代码（完全与日记条目有关）结合起来**根本没有任何意义**。

如果您要查找销售收据，则需要查询*销售收据*。如果您正在寻找 Journal Entries，那么您需要查询*Journal Entries*。你不能查询一个，并期望得到另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:53:24.687

据我了解，销售收据没有单独的付款行。对于发票，您会在稍后的某个时间点收到带有行的付款，但对于销售收据，付款已经发生，因此该信息被捕获为销售收据本身的一部分。然后，您在屏幕截图中看到的付款行是根据销售收据上存储的信息生成的。

这也可以解释为什么销售收据只允许单一的支付方式以及为什么不能拆分支付 - 销售收据的全部金额被视为已收到，因此只存储有关支付方式本身的信息。

查看返回的`PaymentMethodRef`、`CheckNumber`和属性；我能找到的最接近的可链接文档是[添加销售收据](https://member.developer.intuit.com/qbSDK-Current/doc/html/QBSDK%20Programmers%20Guide/18_SalesReceipt.22.2.html)，但这足以列出可用属性（他们的[OSR 工具](http://dev.developer.intuit.com/qbSDK-current/OSR/OnscreenRef/index-QBFC.html)更漂亮，但无法链接到特定的一组结果）。`DepositToAccountRef``CreditCardTxnInfo``ISalesReceiptRet`

您可能还会发现`Interop.QBFC5Lib.dll`在 Reflector（或您首选的等效项）中进行检查很有帮助。对我来说，这通常比尝试查阅官方文档要快。

* * *

~~当您说要使用 TxnLineID 将付款行标记为已清除时，我不确定您的意思。如果您的意思是销售收据显示未结余额，那么这似乎是一个[已知问题](http://www.sleeter.com/blog/2012/10/why-does-quickbooks-treat-sales-receipts-as-open/)。~~

或者，如果您想确认信用卡交易的状态，您可以查看`ResultCode`和`ResultMessage`上的属性`ISalesReceiptRet.CreditCardTxnInfo.CreditCardTxnResultInfo`。

请记住，修改具有信用卡付款的销售收据有一些限制。从[程序员指南](http://developer.intuit.com/qbSDK-current/QBSDK7.0/doc/PDF/QBSDK_ProGuide.pdf)：

> 如果原始 SalesReceipt 中使用的付款方式是信用卡，使用 QBMS 通过 qbmsXML 请求和响应提供的信用卡交易数据，您不能更改客户、付款方式或总交易金额，包括任何行项目更改这将改变交易的总金额。

* * *

**更新：**在我的测试中，您在清除销售收据时似乎不需要 TxnLineID。从你的代码继续，一旦你已经填充`ret`，以下应该做你想要的：

```
msr.ClearRequests();

IClearedStatusMod csm = msr.AppendClearedStatusModRq();
csm.TxnID.SetValue(ret.TxnID.GetValue());
// Leave TxnLineID null
csm.ClearedStatus.SetValue(ENClearedStatus.csCleared);

resp = sm.DoRequests(msr);
// Confirm status here 
```

# google-api - 如何使用 Google Contacts API 过滤联系人

> ID：14649074
> 
> 赞同：2
> 
> 时间：2013-02-01T15:00:54.520
> 
> 标签：google-api, contacts

我可以通过[Google Contacts API](https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters)获取完整的联系人列表。这是代码：

```
$accessToken = $this->getAccessToken($sso, $authCode);
if (!$accessToken) {
  return null;
}

$contacts = array();
$max_results = 100;
$get = array('max-results' => $max_results, 'oauth_token' => $accessToken, 'alt' => 'json');
$c = curlOutGet('https://www.google.com/m8/feeds/contacts/default/full', array('get'=>$get,'timeout'=>10),__FILE__.':'.__LINE__.':'.__FUNCTION__);
if ($c['c'] == 200) {
  $jsonContacts = json_decode($c['r']);
  foreach ($jsonContacts->feed->entry as $contact) {
    $email = $contact->{'gd$email'}[0]->{'address'};
    $email = testEmail($email) ? $email : null;
    $contacts[] = array('email' => $email,
            'title' => $contact->{'title'}->{'$t'},
    );
  }
} 
```

但我想过滤给定的联系人。如何仅获取“我的联系人”列表中的联系人（显示在 Gmail 的联系人界面中）？我想过滤掉“其他联系人”列表中的联系人。

提前致谢！

# c - 在 ubuntu 上使用 C 进行分段故障核心转储

> ID：14649077
> 
> 赞同：1
> 
> 时间：2013-02-01T15:01:03.680
> 
> 标签：c, ubuntu, segmentation-fault

我用纯 C 编写的一些代码行有问题。它在 Windows 上运行良好，但在 ubuntu 上出现“分段错误（核心转储）”的错误。我已经搜索了答案，但是有太多问题可能导致该错误。

```
char line[80];
char sett[50][80];
int index=0;
static const char filename[] = "squid.conf";
FILE *file = fopen ( filename, "r" );

while ( fgets ( line, sizeof line, file ) != NULL ) 
{
    strcpy(sett[index],line);
    index++;
} 
```

我只是想将整个文件逐行写入一个二维数组。如果我引用该`//strcpy(sett[index],line);`程序运行良好，没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:46:36.207

正如其他人所说，也许你的 squid.conf 有超过 50 行，（我的 squid.conf 有 4948 行）

您可以在 malloc(nlines * 80) 之前计算行数，也可以使用链表：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

typedef struct sett {
    char value[80];
    struct sett *next;
} sett;

int main(void)
{
    char line[80];
    sett *curr, *first = NULL, *prev = NULL;
    static const char filename[] = "squid.conf";
    FILE *file = fopen(filename, "r");

    while (fgets(line, sizeof line, file) != NULL) {
        curr = malloc(sizeof(sett));
        if (curr == NULL) {
            perror("malloc");
            exit(EXIT_FAILURE);
        }
        if (prev) {
            prev->next = curr;
        } else {
            first = curr;
        }
        strcpy(curr->value, line);
        curr->next = NULL;
        prev = curr;
    }
    fclose(file);
    curr = first;
    while (curr) {
        printf("%s", curr->value);
        prev = curr;
        curr = curr->next;
        free(prev);
    }
    return 0;
} 
```

# ormlite - Ormlite中的一对一关系

> ID：14649078
> 
> 赞同：2
> 
> 时间：2013-02-01T15:01:12.123
> 
> 标签：ormlite

我得到了以下要使用 Ormlite 保存在数据库中的类：

```
public class Quantity {
    private int normalisedAmount; 
    private String unit;
    ....
}

public class Article {
    private String name;  
    private Quantity q;
    ....
} 
```

问题是数量和文章之间存在一对一的关系。使用 Ormlite 的一种方法是使 q 像这样：

```
@DatabaseField(foreign = true)
private Quantity q; 
```

缺点是数据库不会被[规范化](http://en.wikipedia.org/wiki/Database_normalization)。

另一种解决方案是[通过创建 Persister 来制作自定义数据类型](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_5.html#SEC57)。问题是您要么必须序列化 Quantity 对象，要么将文件“name”和“q”放入同一个 DB 列。他们都不好看。

如何制作漂亮的独奏曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:39:15.147

要获得一对一的关系，您可以对字段进行`unique`约束。`q`我没有尝试过，但它应该将`q.name`字段的行数限制为 1。

这*将*创建一个`Quantity`表（我相信）其他 ORM 是如何做到的。我不认为这违反了数据库“规范化”。您的`Article`表中有一个字段，它代表 id `Quantity`- 不确定 id 字段是什么。来自的所有其余字段`Quantity`都将在另一个表中。

[另一种方法](http://ormlite.com/)是嵌入`Quantity`ORMLite不支持的`Article`内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:36:47.057

我最终让 Quantity 对象混合到文章中并添加了一个 getQuantity 方法。现在数据库中没有一对一的关系。

```
public class Article {
    private String name;  
    // Quantity
    private int normalisedAmount; 
    private String unit;
    ....

    Quantity getQuantity() {
         return new Quantity(normalisedAmount, unit);
    }
} 
```

# java - 为什么 .readUTF() over socket 会因文件小而失败？

> ID：14649080
> 
> 赞同：2
> 
> 时间：2013-02-01T15:01:24.200
> 
> 标签：java, sockets

我正在通过套接字将文件从客户端传输到基本服务器。当我传输小文件（1kb）时，它会失败，`String fileName = clientData.readUTF();`但对于大文件（31mb），它可以完美运行。

在我看来，它没有足够的时间。有人可以澄清一下吗？蒂亚

服务器

```
public void receiveFile() 
{
    System.out.println("in receive file");
    try {
        int bytesRead;

        DataInputStream clientData = new DataInputStream(clientSocket.getInputStream());

        String fileName = clientData.readUTF();
        OutputStream output = new FileOutputStream(("received_from_client_" + fileName));
        long size = clientData.readLong();
        byte[] buffer = new byte[1024];
        while (size > 0 && (bytesRead = clientData.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {
            output.write(buffer, 0, bytesRead);
            size -= bytesRead;
        }

        output.close();
        clientData.close();

        System.out.println("File " + fileName + " received from Client " + clientID);
    } catch (IOException ex) {
        System.err.println("ERROR Connection closed Client " + clientID);
    }
} 
```

痕迹

```
java.io.EOFException
    at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:340)
    at java.io.DataInputStream.readUTF(DataInputStream.java:589)
    at java.io.DataInputStream.readUTF(DataInputStream.java:564)
    at example3.CLIENTConnection.receiveFile(CLIENTConnection.java:75)
    at example3.CLIENTConnection.run(CLIENTConnection.java:50)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:52:37.833

对等方已关闭连接。没有更多的数据了。结束你的结局，忘记它。

# c# - 记录和调试消息

> ID：14649082
> 
> 赞同：0
> 
> 时间：2013-02-01T15:02:42.563
> 
> 标签：c#, visual-studio

在打印如下消息时，我的调试消息会评估昂贵的字符串操作：

`Log.Debug("here it is" + obj.ExpensiveToString())`

现在，即使日志级别未设置为`Debug`，它仍会评估昂贵的字符串操作。

所以不必这样做：

`if(debugMode) Log.Debug("here it is" + obj.ExpensiveToString())`

或者有很多复杂的`Log.Debug()`方法，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:08:49.600

使用编译器指令

```
#if DEBUG
  Log.Debug("Here it is: "+obj.ExpensiveToString());
#endif 
```

因为这些指令增加了代码的冗长性，所以将它们用于昂贵的部分。

另一种选择是修改或补充您的日志系统以接受`Func<string>`

```
public void LogDebug(Func<string> evalMe){

#if DEBUG
    if (evalMe!=null)
      Log.Debug(evalMe);
#endif

} 
```

然后这样称呼它：

```
LogDebug(()=>"Here it is: "+obj.ExpensiveToString()); 
```

# sql - JOIN 两个 SELECT 语句结果

> ID：14649083
> 
> 赞同：1
> 
> 时间：2013-02-01T15:01:49.343
> 
> 标签：sql, select, join

是否可以将 2 个 sql SELECT 语句的结果作为一个语句加入，其中两个都查询相同的表，并在同一列中查找值？

我想要一个任务的 id（这很好），但是我想将某些值过滤到 2 个单独的列中。

目前我分别得到2中的数据：

```
 SELECT id, string_value as Station FROM table WHERE datatype= 'station' 
```

（不需要查看列数据类型）

返回类似：

```
id            Station
task1         station1
task2         station2 
```

然后我有

```
SELECT id, string_value as RespondingAction FROM table 
 WHERE datatype='RespondingAction' 
```

返回：

```
id             RespondingAction
task1          Approve
task2          Decline 
```

我想基本上将这两个查询结合起来，但我不确定它们是如何在同一列中查找数据的。希望最终结果是这样的：

```
id            Station           RespondingAction
task1         station1          Approve
task2         station2          Decline 
task3         station1          Decline
task4         station3          Pending (if null) 
```

对不起，如果这不是太清楚; 我对此很陌生，并尽我所能解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:04:51.287

```
SELECT id, MAX(Station), NVL(Max(RespondingAction), 'Pending')
FROM
  (SELECT id, 
    string_value as Station,
    NULL as RespondingAction
   FROM table
   WHERE dataType = 'station'

   UNION

   SELECT id,
    NULL as Station,
    string_value as RespondingAction
   FROM table
   WHERE dataType = 'RespondingAction')
GROUP By id 
```

**编辑**

你也可以尝试更换

```
NVL(Max(RespondingAction), 'Pending') 
```

经过

```
 COALESCE(MAX(RespondingAction), CAST('Pending' AS <the type of column string_value>)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:25:44.787

使用`CASE`

```
SELECT id, 
   case dataType when 'station' 
                 then string_value else 'Pending' end Station,
   case dataType when 'RespondingAction' 
                 then string_value else 'Pending' end RespondingAction
FROM table WHERE datatype IN ('station','RespondingAction') 
```

# maven - 如何使用 maven 运行基于 junit4 的协和测试？

> ID：14649084
> 
> 赞同：1
> 
> 时间：2013-02-01T15:01:56.563
> 
> 标签：maven, concordion

我的 pom.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.demo.DemoTestSteps</groupId>
<artifactId>DemoTestSteps</artifactId>
<version>1.0-SNAPSHOT</version>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.11</version>
            <configuration>
                <includes>
                    <include>**/*.java</include>
                </includes>
                <systemPropertyVariables>
                    <propertyName>concordion.output.dir</propertyName>
                    <buildDirectory>target/concordion</buildDirectory>
                </systemPropertyVariables>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencies>
    <dependency>
        <groupId>org.concordion</groupId>
        <artifactId>concordion</artifactId>
        <version>1.4.3</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

这是我的测试课：

```
package application;

import org.concordion.integration.junit3.ConcordionTestCase;

public class Application extends ConcordionTestCase {
    public void runTest() {
    } 
} 
```

因此，当我使用 运行测试时`mvn clean test`，将执行测试。但是，如果我稍微修改一下测试类，使其使用juni4，则运行前面的命令不会执行任何操作。

```
package application;

import org.concordion.integration.junit4.ConcordionRunner;

@RunWith(ConcordionRunner.class)
public class Application {
    public void runTest() {
    } 
}

-------------------------------------------------------
T E S T S
-------------------------------------------------------
Running TestSuite
Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.412 sec

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5 seconds
[INFO] Finished at: Fri Feb 01 16:58:18 EET 2013
[INFO] Final Memory: 26M/62M
[INFO] ------------------------------------------------------------------------ 
```

有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:03:09.980

我刚刚尝试使用您的 pom.xml 和 java 类，它对我有用。

在 JUnit 4 案例中，我确实需要修复缺少的 RunWith 导入。您可能想检查为什么您没有收到编译错误？

它正在使用的版本：

*   阿帕奇 Maven 3.0.4 (r1232337; 2012-01-17 21:44:56+1300)
*   Java 版本：1.6.0_30，供应商：Sun Microsystems Inc.

# android - 使用通配符或正则表达式访问资产文件夹的文件

> ID：14649088
> 
> 赞同：0
> 
> 时间：2013-02-01T15:02:54.923
> 
> 标签：android, android-assets

有什么方法可以使用正则表达式按名称将文件访问到*资产文件夹中？*

只选择了一个文件，但名称中的后缀很明显

就像是：

```
 aFD =SessionManager.getAppContext().getAssets().openFd("box*.png"); 
```

案子：

```
 /assets/box_1223.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:13:04.390

只需浏览列表...

```
for( String fileName : getAssets().list( "" ) ) {
    if( fileName.endsWith( ".png" ) ) {
        // here's your image
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:13:38.623

您应该从 assets 文件夹中获取所有文件

```
AssetManager amgr = getAssets();
    String[] list = amgr.list("./");
    for(String s : list){
        Log.d("File:", s);
        //check if filename is what you need
        if (s.contains(what you need OR regex pattern)){
            //do staff
        }
    } 
```

您可以查看所有文件并仅获取您需要的文件，方法是使用`REGEX`或`contains()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:38:03.330

我编写了这段代码，用于通过正则表达式从资产目录中获取文件路径名：

```
public String getFileNameFromAssetsByExpresion(String dirFrom, String nameExp) {
AssetManager am = SessionManager.getAppContext().getAssets();
String nameRetExp = null;
try {
    for (String s : am.list(dirFrom)) {
    // check if filename is what you need
    if (Pattern.matches(nameExp, s)) { nameRetExp = s; break;}
    }
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
return nameRetExp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-02T16:32:27.920

如果您在其中创建了目录，我发现您需要通过 assets 文件夹进行递归。

```
private void listAssets(String startPath, int level) {
    try {
        for(String s : getAssets().list(startPath)){
            Log.d(TAG, "Level " + level + " asset found: " + s);
            if (Pattern.matches(nameExp, s)) { 
               // TODO: Handle the asset matching the regex here!
            }    

            // Recursively call ourself, one level deeper
            String newPath = s;
            if(startPath.length() > 0) {
                newPath = startPath + "/" + s;
            }
            listAssets(newPath, level + 1);
        }
    } catch (IOException e) {
        Log.d(TAG, "No assets for: \"" + startPath + "\"");
    }
} 
```

然后我通过传递一个空字符串来搜索顶级资产

```
listAssets("", 1); 
```

# python - 以计算成本最低的方式编译字典

> ID：14649089
> 
> 赞同：0
> 
> 时间：2013-02-01T15:02:12.227
> 
> 标签：python, dictionary

假设我有两个列表`tokens_e_set`，`tokens_f_set`并且我想将两者中每个元素的每个可能组合映射为字典中的键`t_e_f`。这些键中的每一个也必须具有一个值，即`1/len(tokens_e_set)`. 我一直在寻找一种以最快的方式完成它的方法，因为我必须处理非常长的令牌列表。代码如下：

```
init_value=1/len(tokens_e_set)
t_e_f=collection.defaultdict(float)
for word_e in tokens_e_set:
    for word_f in tokens_f_set:
        t_e_f[(word_e,word_f)]=init_value 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:08:14.213

使用`product`而不是嵌套的 for 循环。

由于您正在使用许多键初始化 dict，所有键都具有相同的值，因此`dict.fromkeys`似乎是最好的方法。

```
from itertools import product
t_e_f = dict.fromkeys(product(tokens_e_set,tokens_f_set),1.0/len(tokens_e_set)) 
```

（比较时间留作 OP 的练习。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:03:45.130

比较时间：

```
C:\Python27>python lib\timeit.py -s "tokens_e_set=tokens_f_set=range(100)" -s "import collections" "t_e_f=collections.defaultdict(float);init_value=1/len(tokens_e_set)" "for word_e in tokens_e_set:" " for word_f in tokens_f_set:" "  t_e_f[word_e,word_f]=init_value"
100 loops, best of 3: 2.61 msec per loop

C:\Python27>python lib\timeit.py -s "tokens_e_set=tokens_f_set=range(100)" -s "from itertools import product" "t_e_f = dict.fromkeys(product(tokens_e_set,tokens_f_set),1.0/len(tokens_e_set))"
1000 loops, best of 3: 1.88 msec per loop 
```

这些规模如何作为提问者的练习。

# cakephp - cakephp 1.3 和 2.x 应用程序的一个用户表？

> ID：14649094
> 
> 赞同：0
> 
> 时间：2013-02-01T15:02:25.143
> 
> 标签：cakephp, authentication

正如标题所说，我有 2 个不同的 cakePHP 应用程序，但两者的用户是相同的。我希望两个应用程序都有一个登录/通行证，但我不确定如何去做。当他们登录一个时，如果他们在同一浏览器的不同选项卡中登录另一个，它会注销另一个。我会使用 Cookie 吗？是否可以像 1.3 应用程序一样告诉 cake 2.x 应用程序解密或任何密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:12:11.977

您需要创建另一个数据库配置`/config/database.php`

并在`UserModel`添加`useDbConfig`属性。

有关更多信息，请参阅[文档](http://book.cakephp.org/2.0/en/models/model-attributes.html#usedbconfig)

编辑：

两个应用程序的`Security.salt`设置`/config/core.php`应该相同： `Configure::write('Security.salt', 'same for app A as for app B');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:49:12.293

确保将散列函数添加到用户模型中。他们在 2.x 中删除了自动哈希以使其更加灵活。在你的 2.x user.php 模型文件中有这样的东西......

```
public function beforeSave($options = array()) {
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
    return true;
} 
```

`pr($this->data);`通过添加appController来帮助自己调试问题，`beforeFilter()`然后尝试登录并比较每个应用程序中请求的用户名和密码。

# string - 如何仅将 tstringlist 中的特定项目保存到文件中

> ID：14649096
> 
> 赞同：1
> 
> 时间：2013-02-01T15:02:32.693
> 
> 标签：string, delphi, file, split, delphi-7

这是我的代码。

```
var
  filehan : Textfile;
  i : Integer;
  LineOfText   : String;
  tsl : TStringList;
  Name, Emp_id : string;
begin
  stf := TStringList.create;
  Assignfile ( filehan, 'EMP.txt');
  Reset ( filehand );
  While not EOF(filehan) do
  begin
    inc(i);
    ReadLn  ( filehan, LineOfText );
    tsl :=substrings(LineOfText, ':' );
    Name := tsl[1];
    Emp_id := tsl[0];

    tsl.SaveToFile('FSTRING.txt');
  end;

  CloseFile (FFile);
end;

function SubStrings(AString: String; ADelimiter: Char): TStringList;
var
  sList       : TStringList;
  curPos      : Integer;
  subString   : String;
  { DelimiterPos : Integer}
begin
  curPos := 1;
  sList := TStringList.Create;
  while (curPos <= Length(AString)) do 
  begin
    subString := '';
    While (AString[curPos] <> ADelimiter) and
          (curPos <= Length(AString)) do 
    begin
      subString := subString + Copy(AString,curPos,1);
      curPos := curPos + 1;
    end;
    sList.Add(subString);
    curPos := curPos + 1;
  end;
  Result := sList;
end; 
```

该文件由大约 2000 行组成。一行看起来像这样

```
300: rani : joseph: 210: 500 : 700 
```

如果该行在第 3 位有数字 210，我必须检索存储在数据库中的员工的更多详细信息。我该怎么做？

我想读取文件中的所有行。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:42:20.393

**不要忘记从 tsl 回收内存，这样它就不会泄漏。**

看来您来自某种垃圾收集语言，懒惰的语言，您根本不考虑内存，例如 PHP 或 Python。

因此，您最好阅读有关对象及其生命的 Delphi 帮助，或者阅读一些类似于 Delphi Foundations 的书。

在那之前... 变体 3：由于您似乎没有控制和管理对象生命周期所需的技能，因此请使用引用计数类型，如数组或接口，Delphi 或多或少地控制它们的生命周期。

[从将字符串拆分为基于分隔符的字符串数组中](https://stackoverflow.com/questions/2625707/split-a-string-into-an-array-of-strings-based-on-a-delimiter/14454831#14454831)的答案进行详细说明，您可以起草一些变体，例如：

```
var sda: TStringDynArray; 
begin
  sda := SplitString(LineOfText, ':' );
  Assignfile ( filehan2, 'FSTRING.txt');
  Rewrite ( filehand2 );
  try
    WriteLN (filehan2, sda[0]);   WriteLN (filehan2, sda[1]);
  finally
    CloseFile(filehan2);
  end;
end; 
```

好的 - 既然你告诉过你有旧的 Delphi 7 - 你那里没有 SplitString 功能。但是你可以花几分钟时间做一个。[http://pastebin.ca/2309695](http://pastebin.ca/2309695)

您还可以从[http://jcl.sf.net获得有用的 Jedi CodeLib 库](http://jcl.sf.net)

```
var isl1, isl2: IJclStringList;
begin
  isl1 := TJclStringList.Create;
     isl1.LoadFromFile('EMP.txt');
  isl2 := TJclStringList.Create.Split(isl1[0], ':');
  isl1.Clear.Add( [ isl2[0], isl2[1] ] ).SaveToFile('FSTRING.txt');
end; 
```

* * *

对于像这样的示例`300: rani : joseph: 210: 500 : 700`，您似乎在真实数据周围有很多空间。然后你应该*修剪*这些空间。喜欢`WriteLN (filehan2, Trim( sda[0] ));`或喜欢`isl1.Clear.Add( [ Trim( isl2[0] ),.....` 阅读有关`Trim`功能的手册；

* * *

> 如果该行有数字 210

然后检查它，只需使用“if”语句；

```
var isl1, isl2, isl3: IJclStringList; 
    EveryLine: string; i: integer;
begin
  isl1 := TJclStringList.Create;
  isl2 := TJclStringList.Create;
  isl3 := TJclStringList.Create;

  isl1.LoadFromFile('EMP.txt');

// for EveryLine in isl1 do begin 
//    - this works in free Lazarus or modern Delphi, but not in D7 }
  for i := 0 to isl1.Count - 1 do begin;
      EveryString := isl1[i];

      isl2.Split(EveryString, ':').Trim;
      if isl2.Count >= 4 then // does 3rd element even exist ???
         if StrToIntDef( isl2[3], -1 ) = 210 then
            CallSomeProcedureToRetrieveMoreDetails; 
      isl3.Clear.Add( [ isl2[0], isl2[1] ] ).SaveToFile('FSTRING.txt');
  end; // for
end;  // function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:05:46.293

我知道还有更优雅的变体，但这些变体应该简单易懂。

试试你的变量不要混淆

```
 Assignfile ( filehan, 'EMP.txt');
  Reset ( filehand );
  CloseFile (FFile); 
```

一个`filehan`和另一个`filehand`和`FFile`

一个 TStringList 的特殊特性，你的 SubStrings 函数只需要一行代码。

```
sList.text:=StringReplace(AString,ADelimiter,#13#10,[rfReplaceAll]); 
```

*   只有4个变量。
*   只有 1 个 TStringList 。

用德尔福 5 测试

```
var
  LineOfText   : String;
  sList : TStringList;
  filehand,Outfilehand: text;

function SubStrings(AString: String; ADelimiter: Char; var sList: TStringList):Boolean;
begin
  sList.text:=StringReplace(AString,ADelimiter,#13#10,[rfReplaceAll]);
end;

begin
  sList := TStringList.Create;
  Assignfile ( filehand, 'EMP.txt');
  Assignfile ( Outfilehand, 'FSTRING.txt');
  Reset ( filehand );
  Rewrite(Outfilehand);
  try
  While not EOF(filehand) do
  begin
    ReadLn  ( filehand, LineOfText );
    LineOfText:=StringReplace(LineOfText,': ',':',[rfReplaceAll]);
    LineOfText:=StringReplace(LineOfText,' :',':',[rfReplaceAll]);
    if pos(':210:',LineOfText)>0 then begin
       substrings(LineOfText, ':' ,sList);
        if (sList.Count=6) then
           if (sList[3]='210') then writeln(Outfilehand,sList[0]+';'+sList[1]);
    end;
  end;
  finally
  sList.Free;
  CloseFile (filehand);
  CloseFile (Outfilehand);
  end; 
```

**更新：**

我理解了这个问题，因此您只对具有`210`字段值的行感兴趣。如果您想要新文件中的所有行，请替换 .

```
if pos(':210:',LineOfText)>0 then begin
        substrings(LineOfText, ':' ,sList);
            if (sList.Count=6) then
               if (sList[3]='210') then writeln(Outfilehand,sList[0]+';'+sList[1]);
end; 
```

和

```
substrings(LineOfText, ':' ,sList);
   if (sList.Count=6) then
         if (sList[3]='210') then 
         writeln(Outfilehand,sList[0]+';'+sList[1]+';'+sList[4]+';'+sList[5]);
   if (sList.Count=3) then
         writeln(Outfilehand,sList[0]+';'+sList[1]); 
```

基于 sList[3] 的大小或值：

*   您可以自行定义写入哪些字段`FSTRING.txt`。

**更新2：**

我会怎么做。

```
var
  ParsedText   : String;
  inList,outList,sList : TStringList;
  i:integer;

function SubStrings(lineText: String; var sList: TStringList):String;
begin
  result:='ERROR';
  lineText:=StringReplace(lineText,': ',':',[rfReplaceAll]);
  lineText:=StringReplace(lineText,' :',':',[rfReplaceAll]);
  sList.text:=StringReplace(lineText,':',#13#10,[rfReplaceAll]);
    if (sList.Count=6)    then
      if (sList[3]='210') then result:=sList[0]+';'+sList[1]+';'+sList[4]+';'+sList[5] else
                               result:=sList[0]+';'+sList[1];
    if (sList.Count=3)    then result:=sList[0]+';'+sList[1];
end;

begin
  inList  := TStringList.Create;
  outList := TStringList.Create;
  sList   := TStringList.Create;
  try
  inList.LoadFromFile('EMP.txt');
    for i:= 0 to inList.Count-1 do begin
     ParsedText := SubStrings(inList[i],sList);
     if ParsedText <> 'ERROR' then outList.Add(ParsedText);
    end;
  outList.SaveToFile('FSTRING.txt');
  finally
  inList.Free;
  outList.Free;
  sList.Free;
  end;
end; 
```

# c# - C# winforms - 管理两个列表中的两个对象的更好方法

> ID：14649098
> 
> 赞同：0
> 
> 时间：2013-02-01T15:02:57.600
> 
> 标签：c#, list

在我的 Windows 窗体中，我通过业务逻辑将两个对象（订单和项目）作为参数传递，并使用这两个对象的不同成员变量在自定义网格中显示一条线。与删除一行类似，业务逻辑传递 UI、订单和项目对象，我使用这两个对象在 Windows 窗体中定位一行并删除它们。order 对象始终是唯一的，但 item 对象可能是也可能不是唯一的。

仅当满足某些条件时才在网格上显示一条线，并且即使未显示线但未满足这些条件但两个对象（订单和项目）保留在列表中，因此当条件满足时，该线被展示。一旦显示该行，如果某些条件为真，该行将再次隐藏，但像以前一样，订单和项目对象都被存储以供将来显示。

目前，我将订单对象保留在订单通用列表中，并将项目对象保留在项目通用列表中。当我必须添加或删除一行时，我在订单列表中查找订单对象，找到索引，使用相同的索引从项目列表中检索项目并使用这两个对象显示一行。我觉得这种逻辑本质上是有风险的，因为我使用一个列表中的索引来访问另一个列表中的项目，并假设两个列表大小始终相同。有没有更好的实现方式？？

```
class BusinessLogic
{
    internal void UpdateUI()
    {
        OrderGrid.AddLine(order,item, bAddLine);
    }
}

public class OrderGrid : System.Windows.Forms
{
    ArrayList OrderList = new ArrayList()//This contains unique orders only
    ArrayList ItemList = new ArrayList() //This list can have duplicates

    public void DrawLine(Order order, Item item, bool bAddLine)
    {
        if(bAddLine)
        {
            if(currDisplayedLines <= MaxLinestoDisplay)
            {
                DrawLine(order,item);
            }
            else
            {
                OrderList.Add(order);
                ItemList.Add(item);
            }
        }
        else//remove line
        {
            int idx = OrderList.IndexOf(order);
            if(idx < 0)
                return;
            OrderList.RemoveAt(idx);
            ItemList.RemoveAt(idx);//not a good idea to use another list's index here)
        }
    }

    private void ClockTick()
    {
        if (currDisplayedLines < MaxLinestoDisplay)
        {
            for(int i = 0; i <OrderList.Count; i++)
            {
                while(currDisplayedLines < MaxLinestoDisplay)
                {
                    order = (Order)OrderList[i];
                    item = (Item)ItemList[i];
                    DrawLine(order,item)
                    currDisplayedLines++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:17:44.990

每当您有两个列表，其中两个列表的相同索引处的项目“属于”在一起时，您可以将其转换为具有两个属性的新类型的单个列表，一个代表每个类型类型。听起来在这里进行这种转变是合适的。只需创建一个具有`Order`and`Item`属性的新类型，每个类型都是适当的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:17:33.487

为什么不创建另一个包含两个引用的类：

```
class ItemOrderContainer
{
    public Item Item { get; set; }
    public Order Order { get; set; }
    public bool Show { get { return /*some condition*/; }
} 
```

也许我误解了这个问题，但把属于一起的东西放在一起是个好习惯。您仍然可以有多个`ItemOrderContainer`对象引用相同的`Item`.

# html - 使用 jcf 插件选择（下拉菜单）

> ID：14649099
> 
> 赞同：7
> 
> 时间：2013-02-01T15:03:17.537
> 
> 标签：html, css

我有一个国家和州的下拉菜单。我们的 UI 设计师使用了 jcf 插件，它隐藏了真实的选择框并转换成一个看起来和行为都像下拉菜单的控件。当我不必从客户端动态填充这些选择框时，它运行良好。

我有一个国家下拉列表，并根据所选列表填充我的州下拉列表。使用 jcf，我可以看到填充了真正的下拉列表（位于左侧 -9999px），但只有第一个选项显示在替换它的控件中。有谁知道如何显示/填充修改后的控件。

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T19:43:46.850

编辑：这似乎在我更改后重建了选择。

```
$('#myselectbox')[0].jcf.buildDropdown(); // Rebuild based on options
$('#myselectbox')[0].jcf.refreshState(); // Updates to current selected 
```

我有完全相同的问题，并且正在从源头获取答案。

这个 jcf.customForms “插件”似乎没有很多文档。您可能使用过相同的服务 (psdtohtml) 或类似的公司将您的设计分割成 HTML。这似乎是一些与该服务相关的自定义 javascript。

通过查看源或使用可以找到很多，`console.debug(jcf.customForms);`但我还没有找到解决方案。当我弄清楚时会更新。

我尝试了很多东西，比如

```
//jcf.customForms.setOptions(states[0]);
//jcf.customForms.refreshAll();
//jcf.customForms.refreshElement(states[0]);
//states.refreshState(); 
```

`initTabs();`至于上一个答案，当您只想重新加载选择时似乎很奇怪。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-25T07:26:49.243

这是对我有用的代码。代码设置一个`select`字段值，然后`refresh`使用 更改值`jcf`，`select`将使用值为 42 的选项选择字段

```
jQuery("#select-element").val("42");

jcf.getInstance(jQuery("#select-element")).refresh() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:50:40.947

填充状态时，您需要再次定义以下函数：

```
jcf.customForms.replaceAll();
initSlideShow();
initInputs();
initSameHeight();
initTabs();
fixSelect();initCounter();
initOpenClose(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T10:53:12.277

对我来说只有一条线。及其通用解决方案。

```
$(document).ajaxComplete(function() {
  jcf.customForms.replaceAll();
}); 
```

干杯！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-04T14:50:38.933

您只需要在选择框值更改时调用刷新方法

```
jcf.getInstance($("#select-box")).refresh() 
```

# mongodb - 将 MongoDB 中的前 1000 条和后 1000 条记录导出为 JSON

> ID：14649100
> 
> 赞同：3
> 
> 时间：2013-02-01T15:03:00.367
> 
> 标签：mongodb

我需要从我的 mongo 集合中获取前 1000 条和最后 1000 条记录并将它们导出到 json。但是，由于导出实用程序非常有限，而且我的记录集有数百万条记录，所以这并不容易。我似乎真的找不到为这个特定函数创建查询字符串的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:11:23.897

count =`db.collection.count()`总计数
前 1000 =`db.collection.find().limit(100)`前 1000
后 1000 =`db.collection.find().skip(count-1000).limit(1000)`最后 1000

然后只需加入结果并序列化为 json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-23T02:15:30.507

```
mongoexport --uri='mongodb+srv://..../DBNAME' --collection='COLLECTION_NAME' --query='{FIELD_NAME: {EXPRESSION}}' --limit=100 --skip=1000 --out='FILENAME.json' 
```

# python - 在 Windows 7 64 位上运行 python 和扭曲

> ID：14649103
> 
> 赞同：1
> 
> 时间：2013-02-01T15:03:04.240
> 
> 标签：python, twisted

尝试使用 pip 安装的 twisted 时出现错误。我只是使用扭曲主页上提供的示例：

```
from twisted.web import server, resource
from twisted.internet import reactor

class HelloResource(resource.Resource):
    isLeaf = True
    numberRequests = 0

    def render_GET(self, request):
        self.numberRequests += 1
        request.setHeader("content-type", "text/plain")
        return "I am request #" + str(self.numberRequests) + "\n"

reactor.listenTCP(8080, server.Site(HelloResource()))
reactor.run() 
```

我得到的错误是：

```
no module named twisted.internet 
```

我没有在任何虚拟环境中运行。

# c# - C# 将长 if 语句转换为更合适的语句

> ID：14649104
> 
> 赞同：1
> 
> 时间：2013-02-01T15:03:52.723
> 
> 标签：c#, refactoring

我有`MDI form`一些儿童表格需要在关闭之前显示一个消息框，而其他表格可以在不询问的情况下关闭。由于`application.Exit()`从`close event`子窗体调用时出现问题，我处理`close event`父窗体并检查它的触发位置。如果它是在需要消息框的表单中触发的，我会调用它，否则只需关闭应用程序。所有这些都在这段代码中实现：

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            SEdit se       = this.ActiveMdiChild as SEdit;
            SoEdit soleEdit = this.ActiveControl as SoEdit;
            UppEdit ue      = this.ActiveControl as UpEdit;
            MEdit mat  = this.ActiveControl as MEdit;
            LEdit lse      = this.ActiveControl as LEdit;
            CEdit cle    = this.ActiveControl as CEdit;

            if (se != null || soleEdit != null || ue != null || mat != null || lse != null || cle != null)
            {
                if (MessageBox.Show("Do you want to save before exit?", "Closing",
                      MessageBoxButtons.YesNo,
                      MessageBoxIcon.Information) == DialogResult.Yes)
                {
                    MessageBox.Show("To Do saved.", "Status",
                              MessageBoxButtons.OK,
                              MessageBoxIcon.Information);
                }
            }
         } 
```

我还在学习，但我知道这么长的 if 语句是错误代码的标志，但我不知道如何改进它。处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:10:06.873

提取条件到分离方法：

```
private bool AnyChildAlive()
{
   return (this.ActiveMdiChild is SEdit) ||
          (this.ActiveControl is SoEdit) ||
          ...
          (this.ActiveControl is CEdit);
} 
```

然后调用这个方法（也使用保护条件来避免嵌套 if 语句）：

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{          
    if (!AnyChildAlive())
       return;

    if (MessageBox.Show("Do you want to save before exit?", "Closing",
           MessageBoxButtons.YesNo, 
           MessageBoxIcon.Information) != DialogResult.Yes)
       return;

   MessageBox.Show("To Do saved.", "Status",
        MessageBoxButtons.OK, MessageBoxIcon.Information);     

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:10:24.863

可能最好的方法是创建一个接口，如：

```
public interface IFormActions {
  bool AskBeforeClosing();
  void SaveData();
} 
```

然后，为每个表单实现该接口，并在 MainForm_FormClosing 方法中执行以下操作：

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
  IFormActions se = this.ActiveControl as IFormActions;
  if ((se != null) && se.AskBeforeClosing()) {
    if (MessageBox.Show("Do you want to save before exit?", "Closing", MessageBoxButtons.YesNo,  MessageBoxIcon.Information) == DialogResult.Yes) {
      se.SaveData();
      MessageBox.Show("Saved", "Status", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }
  }
} 
```

由于这是如何编写的，您不必为所有表单实现接口，只需为您真正想要询问结束问题的那些表单实现接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:09:57.057

为了使其更具吸引力或重复使用，您可能需要考虑将验证转移到不同的方法。

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
    if (FormIsValid())
    {
        if (MessageBox.Show("Do you want to save before exit?", "Closing",
              MessageBoxButtons.YesNo,
              MessageBoxIcon.Information) == DialogResult.Yes)
        {
            MessageBox.Show("To Do saved.", "Status",
                      MessageBoxButtons.OK,
                      MessageBoxIcon.Information);
        }
    }
}

private bool FormIsValid()
{
    return 
    (this.ActiveMdiChild as SEdit) != null ||
    (this.ActiveControl as SoEdit) != null ||
    (this.ActiveControl as UpEdit) != null ||
    (this.ActiveControl as MEdit)  != null ||
    (this.ActiveControl as LEdit)  != null ||
    (this.ActiveControl as CEdit)  != null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:16:41.460

不是最好的方法，但您可以将`Tag`表单的属性设置为 1 或 0 并检查：

```
 if (this.ActiveControl.Tag == 1)
            {
                if (MessageBox.Show("Do you want to save before exit?", "Closing",
                      MessageBoxButtons.YesNo,
                      MessageBoxIcon.Information) == DialogResult.Yes)
                {
                    MessageBox.Show("To Do saved.", "Status",
                              MessageBoxButtons.OK,
                              MessageBoxIcon.Information);
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:11:05.143

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
  var objects = new List<object>
                {
                    this.ActiveMdiChild as SEdit,
                    this.ActiveControl as SoEdit,
                    this.ActiveControl as UpEdit,
                    this.ActiveControl as LEdit,
                    this.ActiveControl as CEdit
                };

        if (objects.Any(x => x != null))
        {
            if (MessageBox.Show("Do you want to save before exit?", "Closing",
                  MessageBoxButtons.YesNo,
                  MessageBoxIcon.Information) == DialogResult.Yes)
            {
                MessageBox.Show("To Do saved.", "Status",
                          MessageBoxButtons.OK,
                          MessageBoxIcon.Information);
            }
        }
     } 
```

# android - Phonegap - 通过 Eclipse 构建时，Android https 请求不起作用

> ID：14649105
> 
> 赞同：0
> 
> 时间：2013-02-01T15:03:57.437
> 
> 标签：android, cordova, ssl, https, request

我正在为 Android 上的 https 请求而苦苦挣扎。

我们有一个众所周知的由 CA 签名的**有效 SSL 证书**，并且 https 请求不起作用，它们返回错误。以前我使用 Phonegap 构建应用程序并且没有问题，现在我需要包含一个通知插件（用于工具栏通知），因此需要通过 Eclipse 构建应用程序。相同的 url 适用于 http，但一旦使用 https，所有请求都会失败。

同样，当我第一次尝试手机浏览器中的链接时，它会弹出一个关于证书无效的警告，但我 100% 确定证书有效且签名正确。

**有没有一种简单的方法可以在不影响安全性的情况下使这些 https 请求正常工作？**

**有谁知道 phonegap build 与 Eclipse 有什么不同？**

我做了更多的研究，似乎没有安装[中间证书](https://stackoverflow.com/questions/11340298/certificate-trusted-on-pc-but-not-in-android)可能有问题。我仍在尝试找出我们是否安装了它。我想我会提供更新，以防万一有人遇到同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:43:09.950

如果有人遇到同样的问题，那就是没有安装中间证书。我们重新安装它，现在一切正常。

# c# - 可移植类库中的资源名称

> ID：14649107
> 
> 赞同：1
> 
> 时间：2013-02-01T15:04:12.413
> 
> 标签：c#, .net, windows-phone-8, windows-phone, portable-class-library

我正在尝试从可运动的类库（从 WP8 应用程序引用）加载 BitmapImages。我需要先检查资源是否是程序集的一部分，如果不是，则回退到从应用程序目录加载它们。如果图像在同一个程序集中，这很好用，但当它们在可移植类库中时就不行了。

这是我用来获取可移植类库中所有资源名称的代码：

```
public static IEnumerable<object> GetResourcePaths(Assembly assembly) {
    var culture = System.Threading.Thread.CurrentThread.CurrentCulture;
    var mrn = assembly.GetManifestResourceNames();
    // mrn contains all of my image resources
    foreach (var resource in mrn) {
        var rm = new ResourceManager(resource.Replace(".resources", ""), assembly);

        //When I call either of the next two lines, I get a 'System.Resources.MissingManifestResourceException'
        var NOT_USED = rm.GetStream("app.xaml"); // without getting a stream, next statement doesn't work - bug?
        var rs = rm.GetResourceSet(Thread.CurrentThread.CurrentUICulture, false, true);

        var enumerator = rs.GetEnumerator();
        while (enumerator.MoveNext()){
            yield return enumerator.Key.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:40:45.113

看看这篇关于如何从 PCL 访问资源的文章： [http ://www.irisclasson.com/2012/11/01/example-windows-store-app-portable-class-library-how-to-access-和-使用-pcl-资源/](http://www.irisclasson.com/2012/11/01/example-windows-store-app-portable-class-library-how-to-access-and-use-pcl-resources/)

但请注意，本文是关于从 PCL 读取文本内容，而不是图像。我还没有设法从另一个程序集加载作为嵌入式资源存储在 PCL 中的位图。也不鼓励在 PCL 中存储位图等特定于平台的内容，因为您处理甚至加载它们的方式非常特定于平台。

# jquery - jQuery取消绑定按键事件并在成功调用ajax后重新绑定

> ID：14649108
> 
> 赞同：0
> 
> 时间：2013-02-01T15:04:13.663
> 
> 标签：jquery, keypress

我目前正在开发一个带有 ajax 的小型评论系统。我想在按下回车键时取消绑定 keypress 事件（以避免重复注释）并在成功的 ajax 调用后重新绑定它。

```
jQuery(".commentDiv textarea").keypress(function(event) {
    if(event.which == 13  && !event.shiftKey) {
        event.preventDefault();

        var textarea = jQuery(this);
        var comment = jQuery.trim(textarea.val());

        if (!comment.length) {
            alert("No valid comment.");
            return false;
        }
        var the_data =
        {
            ...
        };
        textarea.attr( "disabled", "disabled" );
        textarea.val("Saving comment. Please wait...");
        textarea.off('keypress.disabled');
        // or textarea.unbind('keypress'); which also works

        jQuery.post(ajaxurl, the_data, function(sp_response) {
            textarea.attr( "disabled", false);
            textarea.val("");
            textarea.on('keypress.disabled', false); // not working
        });
    }
}); 
```

`keypress.disabled`代码取自[How to bind, unbind and rebind (click) events in JQuery](https://stackoverflow.com/questions/13940591/how-to-bind-unbind-and-rebind-click-events-in-jquery)。

**将按键事件重新绑定到元素的最简单方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:08:51.607

而不是绑定和取消绑定，只需使用一个标志来跳过不需要的执行。在事件开始时设置变量值并在回调后重置它以准备下一个事件。

```
var isAlreadyPressed = false;
jQuery(".commentDiv textarea").keypress(function(event) {
   if(isAlreadyPressed) return;
   isAlreadyPressed = true;    
...
...

 jQuery.post(ajaxurl, the_data, function(sp_response) {
           isAlreadyPressed = false;
           //your code here
 }); 
```

# json - Apache Camel 使用 jackson 将 Java String/ArrayList 序列化为 JSON 对象

> ID：14649110
> 
> 赞同：3
> 
> 时间：2013-02-01T15:04:20.237
> 
> 标签：json, apache, serialization

我目前正在使用 Apache Camel，我正在创建一个路由，我在其中解析 XML 并使用 JSON 字符串丰富它。到目前为止，一切都很好。丰富后，我加入 JSON 字符串。第一个想法是使用 ArrayList，另一个是使用逗号分隔的字符串。这没问题，但我需要返回 JSON 对象，然后由 REST 使用

这是我的课：

```
public class MyBean {

private String jsonStrings;
List<String> jsonStringsArray = new ArrayList<String>();

public void addEnrichSourceToString(Exchange exchange) {
    Boolean isCompleted = (Boolean) exchange.getProperty("CamelSplitComplete");
    String incomingString = exchange.getIn().getBody(String.class);

    this.jsonStringsArray.add(exchange.getIn().getBody(String.class));
    this.jsonStrings += incomingString + ",";

    if (isCompleted) {
        this.jsonStrings = "{\"MyNode\": [" + this.jsonStrings.substring(4, this.jsonStrings.length() - 1) + "]}";
        exchange.getOut().setBody(this.jsonStrings);
    }
}
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T04:50:27.860

我在这里看不到任何问题。如果您想知道如何解组到 POJO，只需阅读[camel json 页面](http://camel.apache.org/json.html)。它有足够的细节。

另外，[请参阅 stackoverflow 上的此线程。](https://stackoverflow.com/questions/6509859/apache-camel-and-jackson)

# android - 缺少带有 libGDX 的库？[智能]

> ID：14649111
> 
> 赞同：0
> 
> 时间：2013-02-01T15:04:20.510
> 
> 标签：android, game-engine, libgdx

我想开始开发安卓游戏，所以我试图用 IntelliJ 设置 libGDX。我使用wiki 中的[此链接](http://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx)来设置所有内容，但它不起作用。

它说我缺少一个库，但它们存在于类路径中，并且所有模块依赖项都已正确设置。

我错过了什么吗？

这是堆栈跟踪：

```
Exception in thread "main" com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load shared library 'libgdx.dylib' for target: Mac OS X, 32-bit
at com.badlogic.gdx.utils.SharedLibraryLoader.load(SharedLibraryLoader.java:104)
at com.badlogic.gdx.utils.GdxNativesLoader.load(GdxNativesLoader.java:34)
at com.badlogic.gdx.backends.lwjgl.LwjglNativesLoader.load(LwjglNativesLoader.java:46)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.<init>(LwjglApplication.java:76)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.<init>(LwjglApplication.java:64)
at it.enrichman.game.DesktopStarter.main(DesktopStarter.java:20)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NullPointerException
at com.badlogic.gdx.utils.SharedLibraryLoader.load(SharedLibraryLoader.java:102)
... 10 more 
```

这些模块中的类：

安卓：

```
public class MySimpleGameTest extends AndroidApplication {

  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
      cfg.useAccelerometer = true;
      cfg.useCompass = false;
      cfg.useWakelock = true;
      cfg.useGL20 = true;
      initialize(new TestGame(), cfg);
  }
} 
```

桌面：

```
public class DesktopStarter {
  public static void main(String[] args) {
      LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
      cfg.title = "Title";
      cfg.useGL20 = true;
      cfg.width = 800;
      cfg.height = 480;
      new LwjglApplication(new TestGame(), cfg);
  }
} 
```

和主要：

```
public class TestGame extends Game {

Texture carImage;

  @Override
  public void create() {
      carImage = new Texture(Gdx.files.internal("car.png"));
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T12:39:31.927

你必须在导入 gdx.jar 之后导入库 gdx-natives.jar，我遇到了同样的问题。

# php - 使用 PHP 每 12 小时在网站上交换图像的最简单方法

> ID：14649113
> 
> 赞同：0
> 
> 时间：2013-02-01T15:04:26.370
> 
> 标签：php, html

我有一段时间没有编码了，我正在尝试找到解决这个问题的最简单的方法。

我在服务器上有 20 多个图像（标记为 1.png、2.png、3.png 等），我正在使用 PHP 一次将其中三个呈现到我的网站。

我想要的只是让它每十二小时有一个新图像替换一个旧图像。例如，它首先渲染图像 1、2 和 3，然后在 12 小时后切换到 2、3 和 4。

达到这种效果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:14:36.257

您不需要 cronjob，您可以使用该`time()`功能并使用`mod`电源来转换每 12 小时看到的图像。

试试这个脚本

```
$now = time(); // you can simulate adding 12 hours +3600*12

$base = round( $now/(3600*12) ); // this number change every 12 hours

$n_images = 20; // number of your images

$start_from = $base % $n_images; // start from $start_from image

// loop for get your 4 images (3,4,5,6 or 4,5,6,7 or ,18,19,20,1,2 etc.)
for($i = 0; $i < 4; $i++) {
    $image = ($start_from+$i) % $n_images + 1;
    echo "get image " . $image.".jpg<br/>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:28:06.790

这可以在简单的 PHP 中完成（因为您提到了 PHP）。

```
$numOfImages = 20;
$unit = date('j') * 2; // Day of the month, doubled to simulate chunks of 12 hours.
if (date('G') < 12) { // Hours 0 - 23
    $unit--;
}

$image1 = $unit % $numOfImages;
$image2 = ($unit + 1) % $numOfImages;
$image3 = ($unit + 2) % $numOfImages;

var_dump($image1);
var_dump($image2);
var_dump($image3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:14:59.310

我不会运行cron。这是我的做法：

```
$num_images = 20;
$images_display = 3;
$hours = 12;
$time_block = 60 * 60 * $hours;
$time_now = strtotime('now');
$block_num = floor($time_now / $time_block) % $num_images;

$images = array();
for($x=1;$x<=$images_display;$x++) {
        $image_num = $block_num + $x;
        if($image_num > $num_images) $image_num = $image_num % $num_images;
        $images[$x] = $image_num . '.png';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:06:47.837

最好的方法是编写 php 脚本，该脚本将进行替换，并将由 cron 每 12 小时执行一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:08:13.180

您可以使用 cron 作业来运行将增加图像 URL 上的索引的脚本。

`php * */12 * * * root/to/updateImage.php`

更新图像脚本中的只是更改数据库中的一个值，该值引用您当前使用的图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T15:10:28.353

如果您可以使用 cron 作业，那么我将创建一个符号链接“current.jpg”，并且每 12 小时触发一个脚本，该脚本执行一个命令以将符号链接更改为另一个。另一种选择是有一个文件“img_config.php”的值：

```
$current_image = 3; 
```

每次 cron 命中时：

```
include "img_config.php"
$current_nr = (++$current_image)%20+1;
file_put_contents("img_config.php",'$current_image = '.$current_nr.';'); 
```

当然，您还有许多其他选项，例如将其存储在数据库中的值中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T15:11:06.657

在 PHP 中，从 中选择要显示的图像`config file`，可能如下所示：

```
1.png
2.png
3.png 
```

然后使用 shell 脚本编写一个 cron 作业，该脚本将修改`config file`. 您可以使用`sed`或`awk`为它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T15:11:08.577

Cron，或在您的应用程序顶部具有此逻辑的函数，如果“确切时间”不是问题：

```
Read content of last_change.txt

If the content *plus* 12 hours *is less than* current time

    Change images

    Put current time to last_change.txt

Done 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-01T15:11:20.933

我对一个应该从一组图像中选择的图像有同样的问题，我没有 cron 访问权限。所以我想出了：

```
function changeStartpageImage() {
    // change the image every x hours
    $hours = 170;
    $fileinfo = stat("images/startseite/startseitenbild.jpg");
    if (time() - $fileinfo['mtime'] < ($hours * 60* 60)) {
        return;
    }

    $handler = opendir("images/startseite/");
    $results = array();

    while ($file = readdir($handler)) {
        if (substr($file, 0, 1) != "." && $file != "startseitenbild.jpg" ) {
            $results[] = $file;
        }
    }
    $newFile = $results[array_rand($results)];
    copy("images/startseite/".$newFile, "images/startseite/startseitenbild.jpg");

    closedir($handler);
} 
```

我认为您可以详细说明此示例并使其变得更好，但是有可能无需处理 Cronjobs 即可处理该问题:-)

# actionscript-3 - 为什么编译器应该允许函数中参数的超类

> ID：14649115
> 
> 赞同：1
> 
> 时间：2013-02-01T15:04:27.710
> 
> 标签：actionscript-3

```
public class ChildClass extends MovieClip
{
   public function ChildClass()
   {
   }

    public function aChildClassFunction()
     {
     }

}

 public class AnotherChildClass extends MovieClip
{
   public function ChildClass()
   {
   }

    public function aChildClassFunction()
     {
     }

} 
```

一些要求 childClass 的随机函数（但懒惰的程序员只使用 MovieClip 类）

```
 public function setChildClassInstance(var mc:MovieClip) 
    {
// How come "mc" represent and be allowed as parameter ??? It's a super-class.. ie. structurally a sub-set of child-class.

          mc.aChildClassFunction(); //<< Would generate run-time error for 2nd function call. 

    } 
```

上述函数也可用于任何 MovieClip 实例

```
 var childClassInstance:ChildClass ;
 var anotherChildClassInstance:AnotherChildClass ; 

 setChildClassInstance( childClassInstance )   // <<<<<VALID,  .... NO COMPILER ERROR 

 setChildClassInstance( anotherChildClassInstance )  
  //<<< VALID, NO COMPILER ERROR ..  BUT WILL CAUSE RUNTIME ERROR !!!! 
//
//
// 
```

我想知道，为什么允许超级类（此处为电影剪辑）并将自己表示为子类的参数（此处：ChildClass、AnotherChildClass）。特别是因为，“SUPERCLASSES”实际上是其 PARENT-SET 的“SUB-SET”，即。他们的孩子班。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:49:45.313

使用以下类，您可以假设 Animal 继承了 MovieClip 的所有属性。

```
package  {
    import flash.display.MovieClip;
    public class Animal extends MovieClip{
        public function Animal(){
            // constructor code
        }
        public function growl():void{
            trace('growl')
        }
    }
} 
```

那么让我们看看MovieClip的继承树

```
MovieClip->Sprite->DisplayObjectContainer->InteractiveObject->DisplayObject->EventDispatcher->Object 
```

现在我们可以说

```
Animal->MovieClip->Sprite->DisplayObjectContainer->InteractiveObject->DisplayObject->EventDispatcher->Object<br> 
```

当我们键入将 Animal 的实例转换为 Sprite 时。

```
var sprite:Sprite = new Animal() 
```

我们丢失了 Animal IE:growl 中定义的方法，
只要我们不尝试访问上面在继承树中定义的任何内容，这一切都很好。
请记住，我们可以键入从树向下投射而不是向上投射。

使用上面的类

```
var sprite:Sprite = new Animal()
sprite.growl() // this will error since sprite does not contain 
```

现在这里是规则的一个例外。
MovieClip 是动态的，因此类型转换为 MovieClip 不会丢失添加的方法（咆哮）。

```
var mc:MovieClip = new Animal()
mc.growl() // traces growl 
```

根据定义，动态类不能有与之关联的接口，因为接口是实现它们的类的契约。

# delphi - delphi字符串处理类型转换

> ID：14649118
> 
> 赞同：1
> 
> 时间：2013-02-01T15:04:36.113
> 
> 标签：delphi, type-conversion, lazarus

无论如何，是否可以安全地将 TEdit 中的字符串（例如 00010C10 的实际窗口句柄）转换/类型转换为我在 Delphi/Lazarus 中假定的句柄 LONGWORD 数据类型。

这里推荐的方法[Pascal - String to LongWord](https://stackoverflow.com/questions/13142037/pascal-string-to-longword)是 IntToStr 但编译器会抛出以下错误：

带有消息“00010C10”的异常类 EConvertError 不是有效的整数值

也尝试过 IntToStr64 但没有运气....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:09:27.403

这是因为默认情况下[`StrToInt`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils.StrToInt)期望字符串采用十进制表示法。要将十六进制表示法字符串转换为整数前缀`$`，即

```
intVal := StrToInt('$'+Edit1.Text); 
```

# html - 为什么一些主要的、复杂的网站的 HTML 类写成看似毫无意义的字符串？

> ID：14649125
> 
> 赞同：7
> 
> 时间：2013-02-01T15:04:52.433
> 
> 标签：html, css

例如，我刚刚检查 Google 的一个页面，看到一个类写为`Yj Fg Ws IY fW Zf`. 这会让任何想了解谷歌如何做的人感到困惑吗？如果您是 Google 的开发人员，您应该如何记住这一点，尤其是在您的所有其他课程中？或者将来需要更改该代码的其他人呢？

以这种方式编码有好处吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T15:07:10.997

为了使页面更小，从而更快地发送给用户，大多数主要网站都会缩小文件，尤其是 javascript 和 css 文件。这种操作通常

*   连接文件以减少请求数量
*   删除评论
*   删除无用的空格和 CR
*   将长变量名更改为较短的变量名

Google 提供了执行此操作的工具之一：[Closure 编译器](https://developers.google.com/closure/compiler/)。这很容易做到，一旦您开始关注显示速度或带宽，就没有理由忽略它。

一些开发人员可能会使用它来保护他们的一些源代码，但这不是最常见的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:08:17.133

它适用于较小的页面尺寸。当您提供谷歌提供的页面数量时，减少几个字节会对您使用的带宽产生巨大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:13:35.067

这样做有两个原因。通常是为了减小网站的大小。所有站点代码都被缩短，名称被替换我更短的版本，例如`tellMeTheStuffFromThatServer(serviceABC, parameterABC);`替换为`a(b,c);`. 如果有人想阻止访问者阅读他的代码，你也很少看到这种做法，尽管这显然不是很有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:08:31.550

节省字节，从而节省带宽？我认为甚至有一些程序可以缩小您的源代码，因此作为开发人员，您不必记住甚至知道短名称。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-01T15:24:33.777

> 这样你就不会从类的名称中了解他们的设计。它可能会回来伤害他们。类的名称不仅仅是该死的东西，它们是想法。它们是框架。
> 
> [http://www.ebay.com/itm/ws/eBayISAPI.dll?ViewItem&item=111005600551](http://www.ebay.com/itm/ws/eBayISAPI.dll?ViewItem&item=111005600551)
> 
> 你还能发现多少。你可以立即发现 Ebay 的所有产品都有相同的处理程序类，并且处理程序是一个 Win 处理程序，它有 2 个属性传递给它。当然，这并不是缩小的确切刻板印象，但大多数网站都会将其编码为哈希，以避免安全威胁和设计泄漏。
> 
> 它会像 [http://www.ebay.com/itm/ws/_ylt=AouAU5ULtZy2c38mrOUIQJGuitIF](http://www.ebay.com/itm/ws/_ylt=AouAU5ULtZy2c38mrOUIQJGuitIF)；
> 
> 在网址上放入无意义的东西

# vb.net - 拆分字符串并将值分配给变量

> ID：14649128
> 
> 赞同：3
> 
> 时间：2013-02-01T15:05:12.337
> 
> 标签：vb.net, split

我正在尝试拆分字符串并获取拆分部分并将它们分配给变量。这适用于第一个变量，但我无法让第二个变量工作。

```
For Each columnQuarter As DataColumn In dt.Columns
            Dim s As String = columnQuarter.ColumnName
            Dim words As String() = s.Split("-")
            Dim Year As String = words(0)
            Dim Quarter As String = words(1)
            Debug.WriteLine(Year)
            Debug.WriteLine(Quarter) 
```

在“Dim Quarter As String = words(1)”行，我收到错误代码“IndexOutofRangeException 未处理。索引超出了数组的范围。”

ColumnName 的一个示例是 2012-Q1。

附加信息：

这是我用来将列添加到数据表的代码。如您所见，我的前两列不包含“-”。

```
tickerColumn = New DataColumn("Ticker", Type.GetType("System.String"))
consistencyColumn = New DataColumn("Consistency", Type.GetType("System.Int32"))
dt.Columns.Add(tickerColumn)
dt.Columns.Add(consistencyColumn)

    With Me
        lr = Now.Year - 1901
        For i = 1 To lr
            column = New DataColumn
            column.DataType = System.Type.GetType("System.Int32")
            column.ColumnName = Now.Year - i & "-Q4"
            dt.Columns.Add(column)

            column = New DataColumn
            column.DataType = System.Type.GetType("System.Int32")
            column.ColumnName = Now.Year - i & "-Q3"
            dt.Columns.Add(column)

            column = New DataColumn
            column.DataType = System.Type.GetType("System.Int32")
            column.ColumnName = Now.Year - i & "-Q2"
            dt.Columns.Add(column)

            column = New DataColumn
            column.DataType = System.Type.GetType("System.Int32")
            column.ColumnName = Now.Year - i & "-Q1"
            dt.Columns.Add(column)
        Next i
    End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:26:37.743

由于您的前两列没有破折号，请尝试将它们过滤掉：

```
For Each columnQuarter As DataColumn In dt.Columns
  Dim s As String = columnQuarter.ColumnName
    If s.Contains("-") Then
      Dim words As String() = s.Split("-")
      Dim Year As String = words(0)
      Dim Quarter As String = words(1)
      Debug.WriteLine(Year)
      Debug.WriteLine(Quarter)
    End If
Next 
```

# php - 致命错误：在第 0 行 session_start 的 Unknown 中抛出没有堆栈帧的异常

> ID：14649133
> 
> 赞同：0
> 
> 时间：2013-02-01T15:05:25.923
> 
> 标签：php, mysql, session, exception, pdo

**另一个更新！2/2/13 将** PHP 更新到 5.3 版，现在它给了我这个消息，

致命错误：未捕获的异常“PDOException”与消息“您无法在 [无活动文件] 中序列化或反序列化 PDO 实例”：0 堆栈跟踪：#0 [内部函数]：抛出 PDO->__sleep()#1 {main} [无活动文件] 第 0 行

但是，我没有使用序列化或反序列化功能......

**更新！**

这可行，但这是不正确和最丑陋的做法。我不想这样做，但我认为这可能会有所帮助

```
$db    = new PDO("mysql:host=127.0.0.1;dbname=dbname;", "user", "pass");
public function login($user, $pass) {
    global $db;
    //stuff
} 
```

**原帖**

我刚刚将我的项目文件切换到我的网络主机（它在本地完美运行）。

我收到此错误，致命错误：在第 0 行的 Unknown 中抛出没有堆栈帧的异常。

哦，太有帮助了。我现在只包含一个文件，它是一个具有一个函数的类，它计算输入的用户名和密码的 ID，然后根据找到的内容返回 true 或 false。（1 = 真，除 1 以外的任何东西 = 假）。

我正在使用 PDO (mysql)，如果我没有连接到我的数据库，我不会收到错误，但如果我删除 session_start(); 从我的文档顶部我也没有得到错误。私人 $db;

```
public function __construct() {
    $this->db = new PDO("mysql:host=127.0.0.1;dbname=dbname;", "user", "pass");
    $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} 
```

这是我设置会话的地方，

```
if(isset($_POST["submit"])) {
    $errors = array();
    if($user->login($_POST["user"], $_POST["pass"]) === false) {
        $errors[] = "Username or password is incorrect";
    }
    if(empty($errors)) {
        $_SESSION["user"] = $_POST["user"];
        header("Location: index.php");
    }
} 
```

我实际上并没有在任何地方抛出异常。我不知道这个错误是什么意思。我正在运行 PHP 版本 5.2.17

这是我的登录功能，

```
public function login($user, $pass) {
    $sql = $this->db->prepare("SELECT COUNT(`id`) FROM `users` WHERE `username` = :user AND `password` = :pass");
    $sql->bindParam(":user", $user);
    $sql->bindParam(":pass", $pass);
    $sql->execute();

    return ($sql->fetchColumn() == 1) ? true : false;
} 
```

索引页面（使用 session_start、索引页面和登录页面的每个页面都会发生错误）

```
session_start();
if(!isset($_SESSION["user"])) {
    header("Location: login.php");
}else {
    //begin HTML, no more php after this (except the closing bracket) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T01:01:04.787

我将会话重命名为“用户名”而不是“用户”，然后它开始工作。我为 $user 调用了我的用户类，所以我想当我尝试将会话命名为相同时，出现了严重错误。这仍然非常奇怪，因为 $user 是一个变量，而“user”是一个字符串 >_>

无论如何，问题已经解决了，感谢 PHP 有时相当愚蠢。

**更新**

整个过程的罪魁祸首是 PHP.ini 中的 register_globals。它在我的本地服务器上已关闭，但在我的主机上已打开。

不过现在到处都关了。我想我可能会添加这个，以防将来遇到这个问题。

# ipad - WebKit (iPad) CSS3：背景过渡闪烁

> ID：14649134
> 
> 赞同：0
> 
> 时间：2013-02-01T15:05:30.710
> 
> 标签：ipad, css, background, transition, flicker

在 iPad 上通过 Safari/WebKit 中的 CSS3 对背景颜色的变化进行动画处理时遇到了问题。

附上两个屏幕截图来向您展示问题。

1.  [图 1](http://imageshack.us/a/img198/8530/bildschirmfoto20130201u.png)
2.  [图 2](http://imageshack.us/a/img401/8530/bildschirmfoto20130201u.png)

如果我选择一种颜色，内圈应该从当前颜色淡化为新选择的颜色。

但是你可以看到在动画过程中有非常奇怪的方块。

最重要的是整个应用程序的背景颜色（背景 DIV）也以所选颜色着色。但这里并非完全不透明。通过以下方式非常轻松：

```
$('#bgWrapper').css('background','rgba(XX,XX,XX,0.1)'); 
```

这个元素完美地淡化了颜色——当我切换到完全不透明时也是如此。

圆圈元素 ( `div#centerRing`) 一直闪烁。即使我附加与 on 相同的 CSS 样式`div#bgWrapper`或通过 RGBA 更改颜色。

我尝试过的没有任何效果。

`div#bgWrapper`完美地淡化背景。

`div#centerRing`没有。

有谁已经和这个打过架了吗？最好的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:32:29.360

**好的，伙计们，明白了！**

iPad 在大元素的动画（空间背景颜色）方面遇到了问题。我的元素是 1600 像素 x 1600 像素，如果将大小更改为 800 像素 x 800 像素并通过 CSS3 将其放大一点（缩放（2）），它就可以工作。同样，当元素通过 CSS3 再次放大时。

希望有帮助。

# azure - Azure 作为本地计算机上的装载驱动器

> ID：14649140
> 
> 赞同：11
> 
> 时间：2013-02-01T15:05:40.760
> 
> 标签：azure

我想知道是否有办法让我安装一个（或多个）驱动器，为其分配一个驱动器号，例如 G:（在我的本地计算机上），然后将其指向 Azure 存储帐户。

我还希望能够在多台计算机上安装驱动器（让它有点像保管箱）。

什么是实现这一目标的好方法？

**编辑**：Windows Azure Drive 看起来很有趣，但据我了解，它只能安装在云/服务器系统上，而不是本地计算机上？无法找到有关此的任何其他信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-28T11:17:17.517

做这种事情是一项艰巨的任务。您需要了解 Azure API 和 Windows API 才能做到这一点。看看我在下面提到的工具的历史，看看你必须以这种方式解决哪些挑战。有些提供 CLI - 如果您开发产品并且时间和预算有限，这可能是定制的方式。

我成功使用并推荐[CloudBerry Drive Desktop](http://www.cloudberrylab.com/amazon-cloud-storage-online-hard-drive.aspx)将 Azure Blob 容器挂载为网络共享。该产品具有很大的重点并提供同步策略。然而，这些工具的价值在很大程度上取决于你没有提到的用例。许多 Azure Explorer 工具不会将 Azure 存储实体映射到网络共享或外部驱动器的概念，它们只是使您能够浏览 Azure 资源并读取和写回数据。基于引用项目目录中其他文件的项目文件的桌面应用程序通常不起作用。这就是我所经历的。

Windows Azure 存储团队博客概述了市场上可用的工具，甚至最近在 2014 年 5 月进行了更新。

*   [Windows Azure 存储资源管理器 (2014)](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/03/11/windows-azure-storage-explorers-2014.aspx)

我尝试并喜欢 Cerebrata 的这两种工具，它们设计得很好，但它们与我上面提到的基于项目文件的桌面应用程序的用例不匹配。

该概述还包含 Windows Azure 存储资源管理器，它是 Codeplex 的一个开源项目。这对于查看一些代码可能很有用，但该产品无法在概述中与其他产品竞争。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:41:59.357

[disibox](http://code.google.com/p/disibox/issues/searchtips)是使用 Windows Azure 的 Dropbox 的简单实现。还有[适用于 Windows Azure 的 CloudBerry Explorer，](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)它提供拖放功能但没有驱动器映射。在 BETA 中是[CloudBerry Drive](http://www.cloudberrylab.com/virtual-drive-amazon-s3-azure.aspx)，它将您的云存储映射为本地磁盘，以直接从 Windows 资源管理器界面访问和编辑云中的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T08:48:52.297

您最好探索 OneDrive for Business ( [http://office.microsoft.com/en-au/office365-sharepoint-online-enterprise-help/what-is-onedrive-for-business-HA102822076.aspx](http://office.microsoft.com/en-au/office365-sharepoint-online-enterprise-help/what-is-onedrive-for-business-HA102822076.aspx) )，它可以为本地机器提供文件夹同步。

Azure 文件服务 ( [http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx) ) 可以提供应该（理论上）可以访问的标准共享通过 VPN 或 ExpressRoute 的本地计算机（但我怀疑不是）。

Azure 文件服务可能会提供与您将来想要的服务类似的服务，但您的本地环境的延迟将始终是一个挑战（并且是 OneDrive 旨在管理的内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-03T18:02:52.853

使用 Azure 文件共享，这现在是开箱即用的东西。我知道 SO 不喜欢“链接答案”，但在这里重复真的太多了，所以去访问[https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-how-to-use -files/](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-how-to-use-files/)以获得完整的演练。

# json - 如何在 Play 中替换 JSON 值

> ID：14649141
> 
> 赞同：19
> 
> 时间：2013-02-01T15:05:40.730
> 
> 标签：json, scala, playframework-2.0, playframework-2.1

如何在 Play 中替换 JSON 值中的值？
代码说明：

```
def newReport() = Action(parse.json) { request =>
    var json = request.body
    if((json \ "customerId").as[Int] == -1){
      // replace customerId after some logic to find the new value
    }
    json.validate[Report](Reports.readsWithoutUser).map {
      case _: Report => 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-08-05T23:36:34.243

根据[Play Documentation](http://www.playframework.com/documentation/api/2.0.x/scala/play/api/libs/json/JsObject.html)，JsObjects 有一个方法`++`可以合并两个 JsObjects。因此，当您拥有新的整数值时，您只需要：

```
val updatedJson = json.as[JsObject] ++ Json.obj("customerId" -> newValue) 
```

从 Play 2.4.x 开始，您可以使用`+`：

```
val updatedJson = json.as[JsObject] + ("customerId" -> newValue) 
```

（注意：该`+`方法已在 2.1.x 中添加，但向对象添加了重复字段，而不是替换 2.4.x 之前版本中的现有值）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-25T22:01:01.740

正如 Marc B 所说，一种方法是将 JSON 转换为类似案例类的东西，对其进行操作，然后创建一个新的 JSON。

但是，您也可以使用 JSON“转换器”。实际上，您所做的是构建一个 Reads[SomeThing] 对象。该对象被传递给您在 JSON 对象上调用的转换方法。它将更改 JSON 对象并返回 Success(result) 或 Failure(error)，其中 result 是新修改的 JSON。这是一个（比较）*非常*简单的例子：

使用 json 格式：{key -> value}

```
def jsonXForm(value: String) = (__ \ "customerId").json.update(
  (__ \ "customerId").json.put(JsString(value))
)
json.transform(jsonXForm(yourNewValue)) match {...}` 
```

[这里](https://www.playframework.com/documentation/2.5.x/ScalaJsonTransformers)有一个*不错的*指南

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-21T10:44:58.137

我正在考虑放弃所有那些不可变的“JSON”解决方案。它只是使代码变得一团糟。这就是它在[JSON 的 SON 中的](http://github.com/wspringer/sonofjson)样子：

```
import nl.typeset.sonofjson._

val json = …
if (json.customerId.as[Int] == -1) {
  json.customerId = 987938
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T00:31:04.867

类似于以下内容：

```
val updatedJson = if((request.body \ "customerId").as[Int] == -1){
  val newId = JsObject(Seq(("customerId",JsString("ID12345"))))
  (request.body ++ newId).as[JsValue]
} else request.body

updatedJson.validate[Report](Reports.readsWithoutUser).map {
  case _: Report => 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-03T04:34:25.380

使用隐式转换的 Zeimyth 答案的美化版本

```
implicit class JsObjectEnhancer(jsObject: JsObject) {
  def update(args: (String, Json.JsValueWrapper)*): JsObject = {
    jsObject ++ Json.obj(args: _*)
  }
} 
```

**用法**（json 必须是 JsObject 类型并且隐式类应该在范围内）

```
json.update("customerId", 1000) 
```

# intuit-partner-platform - 如何发送零价值交易

> ID：14649145
> 
> 赞同：1
> 
> 时间：2013-02-01T15:05:52.617
> 
> 标签：intuit-partner-platform, qbfc

我正在研究使用 QBFC 将发票从自定义应用程序导出到 QB 的代码。我的代码在所有情况下都有效，除非自定义应用程序中的发票总额为 0 美元。（这可能是因为发票中有抵消项目。）

我已经尝试将这些发票作为发票和贷项通知单发送，但无论哪种情况，它都会失败，并显示“交易金额必须为正数”。

以交互方式使用 QB，我可以创建和保存总额为零的发票或贷项通知单。如何通过 QBFC 完成这项工作？

# pascal - 如何将 Double 类型的变量分配给 Integer 类型的变量？

> ID：14649146
> 
> 赞同：2
> 
> 时间：2013-02-01T15:05:52.980
> 
> 标签：pascal

我想在使用 Pascal 的 Scar Divi 上分配一个`Double`变量`Integer`。
这是一个例子：

```
program Test;       
var
  dou: Double;
  int: Integer; 
begin
  int := 1;
  dou := 2.5;

  dou := Trunc(dou);

  int := int + dou;
end. 
```

控制台给了我一个`Type mismatch`. 如何将类型变量分配给`Double`类型`Integer`one ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T20:49:12.810

代替

```
dou := Trunc(dou); {dou is still a variable of type double}

int := int + dou;  {adding double to integer returns double,
                    which cannot be assigned to integer -> ERROR} 
```

类型：

```
int := int + Trunc(dou); {adding integer to integer gives integer -> OK} 
```

另请注意，在某些情况下`Round`，它返回最接近的整数，可能比`Trunc`.

# c# - 为什么在 Oracle DB 上插入 XML 需要很长时间？

> ID：14649148
> 
> 赞同：0
> 
> 时间：2013-02-01T15:05:57.183
> 
> 标签：c#, .net, oracle, ado.net, insert-update

我在具有以下架构的表中插入了许多行：

```
TABLE "SPACE"."WORKTABLE" 
   (    "ID" NUMBER, 
    "AUTHOR" VARCHAR2(20 BYTE), 
    "INSERTION_DATE" DATE, 
    "XML_DOCUMENT" "SYS"."XMLTYPE" 
   ) 
```

插入是使用 ADO.NET ( `OracleXmlType`) 完成的。第一个插入的行需要两分钟以上才能完成；但是在插入完成后，以下所有操作所花费的时间都比第一个要少得多。

1.  为什么会这样？
2.  这仅与插入 XML 时所做的 XML 解析有关吗？为什么（如果是）它只发生在第一次插入时？
3.  这个时间可以缩短吗？

（如果可能，请记录您的答案）

更新：正在执行的代码是最多 10 行的简单插入，其 XML 长度为 5500 个字符。此外，我已经消除了打开连接所花费的时间作为延迟的原因。

```
string sql = "INSERT INTO WORKTABLE VALUES ( " + rowID + ",'JBALVIN',1,'01-JAN-12',:xmldocument)";
using (OracleCommand comm = new OracleCommand(sql, con))
{
    comm.Parameters.Add(":xmldocument", OracleDbType.XmlType);
    OracleXmlType xmlType = new OracleXmlType(con, entidadXML);
    comm.Parameters[0].Value = xmlType;
    comm.ExecuteNonQuery();
} 
```

更新：

我们注意到导致延迟的线路是`OracleXmlType xmlType = new OracleXmlType(con, entidadXML);`。是否可以通过停止 Oracle 检查 XML 有效性来解决？如果是这样……怎么办？通过使用连接的直接命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:09:30.570

嗯……经过一番猜测和谷歌搜索，我发现如果删除了 XML 上使用的架构的 URL（属性`xmlns:xsi`和`xsi:noNamespaceSchemaLocation`），则插入是以毫秒为单位完成的。[遗憾的是，Oracle OracleXmlType 文档](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleXmlTypeClass.htm)中没有记录这种行为。

# python - python 漂亮打印 parse_and_eval

> ID：14649155
> 
> 赞同：1
> 
> 时间：2013-02-01T15:06:23.223
> 
> 标签：python, gdb

当从 gdb 调用漂亮的打印机时，有谁知道如何判断给定变量是否有效。

例如，我的一台漂亮的打印机使用 gdb.parse_and_eval 这会导致 gdb 崩溃，除非变量已被初始化。

```
TestPrettyPrint::TestPrettyPrint(QWidget *parent)
    : QMainWindow(parent)
{
    ui.setupUi(this);
    QFile f("C:/Log.txt");
} 
```

如果我在第一行设置一个断点并尝试检查“f”gdb 崩溃。如果我在创建“f”之后放置一个断点，一切都很好。

任何信息都会非常有帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T17:07:08.600

没有办法判断变量是否有效。

首先，此信息在调试信息中不可用。准确地说，有一个 DWARF 的 GCC 扩展来提供这些信息，但是它没有很好地指定并且并没有真正起作用；在任何情况下，它都不会暴露给 GDB 中的 Python。

第二，即使有信息，也不能解决问题。任何内存都可能被错误破坏。

答案是漂亮的打印机具有适应性。您可以使用现有的“打印”设置来限制发出的垃圾量。

如果 gdb 崩溃，那么这是一个应该报告的 gdb 错误。我知道 bugzilla 中已经有类似的东西了，尽管 IIRC 它没有复制说明。这是修复错误最重要的事情。

# java - 碰撞检测教程

> ID：14649161
> 
> 赞同：2
> 
> 时间：2013-02-01T15:06:45.130
> 
> 标签：java, awt, collision-detection, java-2d

我应该使用 AWT 开发 Java 游戏。我坚持“碰撞检测”的概念。如果你能帮助我解释这个概念（它是如何工作的）或给出例子（源代码）的任何教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:14:38.227

[在metanetsoftware (makes of N)](http://www.metanetsoftware.com/technique/tutorialA.html)上可以找到关于 2d 碰撞检测的强大教程

作者写了有关理论基础和挑战的文章。他们也给你一些代码（不是基于 awt，但它的过程相同，代码很容易翻译）。他们在他们的页面上也涵盖了更高级的主题（例如[基于图块的碰撞检测](http://www.metanetsoftware.com/technique/tutorialB.html)）

更新#2：这里给出了一个很好的概念背景：[GDC 2010 关于联系生成的演示文稿](https://code.google.com/p/bullet/downloads/detail?name=GDC10_Coumans_Erwin_Contact.pdf)

[更新：这个 RUST 库](http://www.ncollide.org/index.html)中给出了一个很好的例子，说明了不同的碰撞检测方法是如何工作的。文档描述了一些技术，源代码很容易理解。从这个资源中学习会让你有很多理解。

附带说明：询问这些内容的正确位置是在 gamedev stackexchange。既然你刚刚开始在那个领域看看[这篇文章](https://gamedev.stackexchange.com/questions/10373/java-game-in-a-day-or-two/10377#10377)

# linq - 不同的查询？

> ID：14649163
> 
> 赞同：2
> 
> 时间：2013-02-01T15:07:04.263
> 
> 标签：linq

我有一个表，其中包含一个带有客户名称的列。它有大约 10-15 个不同的客户，在列中多次出现。有没有一种方法可以运行一个查询来列出所有不同的客户端并对每个客户端进行计数，以便显示每个客户端在列中出现的次数？我知道在 SQL 中您可以使用 as 来分配临时列，但我是 LINQ 的新手，不知道这是否可能。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:09:50.240

就像使用`GROUP BY`and的 SQL 一样`COUNT`，如下所示：

```
SELECT name, COUNT(*)
FROM customers
GROUP BY name 
```

在 LINQ 中，您将使用`GroupBy(...)`and `Count()`，如下所示：

```
var res = src.Clients
    .GroupBy(c => c.Name)
    .Select(g => new {
        Name = g.Key
    ,   Count = g.Count()
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:08:54.867

我假设`items`包含具有`ClientName`

使用 Linq`GroupBy`方法。

```
var result = (from item in items
              group item by item.ClientName 
              into g  // g is the group
              select new 
              {
                  ClientName = g.Key,  // g.Key contains the key of the group ;) -> here the common "ClientName"
                  Count = g.Count()  // g is an enumerable over the elements of the group, so g.Count() gives you the number of elements in the group
              }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T15:09:11.180

像这样的东西？

查询语法：

```
from r in someTable
group r by r.ClientId into grp
select new
    {
        ClientId = grp.Key,
        Occurrences = grp.Count(),
    } 
```

作为方法语法：

```
someTable
    .GroupBy(r => r.ClientId)
    .Select(grp => new
        {
            ClientId = grp.Key,
            Occurrences = grp.Count(),
        }); 
```

`ClientId`您要区分的列在哪里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T15:14:02.303

你可以这样做：

纯**linq**：

```
var query = from item in list
            group by item.name into gr
            let count=gr.Count()
            orderby count
            select new {Value = gr.Key, Count=count } 
```

使用**lambda 表达式**：

```
var query= entity.GroupBy(s=>s.Name).
                  Select(x=> new {Value = x.Key,Count=x.Count()}).
                  OrderBy(s=>s.Count); 
```

在此处阅读有关 linq 的更多信息：[`Linq Samples`](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b).

顺便说一句，您应该在询问之前进行更多搜索。

# php - 如何使用 PHP 将数组中的 2 个对象自动传递给构造函数

> ID：14649164
> 
> 赞同：1
> 
> 时间：2013-02-01T15:07:03.757
> 
> 标签：php, dependency-injection

我有这个问题：

```
<?php

class A {
}

class B {
}

$objectsInArray = array();
$objectsInArray[] = new A();
$objectsInArray[] = new B();

class C {
    private $a;
    private $b;
    public function __construct(A $a, B $b) {
        $this->a = $a;
        $this->b = $b;
    }
} 
```

如何像这样直接将**$objectInArray**传递给 C() 类：

```
$c = new C($objectsInArray); 
```

没有此错误消息：

```
Catchable fatal error: Argument 1 passed to C::__construct() must be an instance of A, array given... 
```

我不想要这个理由：

```
class C {
    private $a;
    private $b;
    public function __construct(array $arguments) {
        foreach ($arguments as $argument) {
            if ($argument instanceof A) {
                $this->a = $argument;
            } elseif ($argument instanceof B) {
                $this->b = $argument;
            } else {
                throw new exception('Arguments are bad!');
            }
        }
    }
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:14:27.430

您可以像已经声明的那样声明类 C，但我也建议您实现 A 和 B，它们将具有数组属性，该属性将保存所有需要的值。因此，您可以创建 A 和 B 的实例并获取适当的值，例如： $a->getElements()

```
 class A {
     private $a;
     public addElement($element) {
         // add element to the array $a
     }
     public getElements() {
          return $a;
     }
 } 
```

B级也一样。甚至您可以为 A 和 B 创建具有通用功能的父类。

所以 A 和 B 将只封装数组功能，您可以只通过这些实例而不是数组进行操作。

然后，您可以毫无问题地将 A 和 B 的实例传递给 C 的构造函数。

# javascript - Javascript通过Id获取元素并设置值

> ID：14649173
> 
> 赞同：86
> 
> 时间：2013-02-01T15:07:27.300
> 
> 标签：javascript, default-value

我有一个向其传递参数的 javascript 函数。该参数代表我网页中一个元素（隐藏字段）的 id。我想改变这个元素的值。

```
function myFunc(variable){
  var s= document.getElementById(variable);
  s.value = 'New value'
} 
```

当我这样做时，我收到一个错误，因为对象为空，所以无法设置该值。但我知道该对象不为空，因为我在浏览器生成的 html 代码中看到了它。无论如何，我尝试了以下代码进行调试

```
function myFunc(variable){
  var x = variable;
  var y  = 'This-is-the-real-id'
  alert(x + ', ' + y)
  var s= document.getElementById(x);
  s.value = 'New value'
} 
```

当警报消息出现时，两个参数相同，但我仍然收到错误消息。但是当我这样做时一切正常

```
 var s= document.getElementById('This-is-the-real-id');
  s.value = 'New value' 
```

请问我该如何解决这个问题

编辑

我正在为其设置值的元素是隐藏字段，并且随着页面加载，id 是动态的。我已经尝试在 $(document).ready 函数中添加它，但没有奏效

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-01T15:28:42.323

如果 myFunc(variable) 在 textarea 渲染到页面之前执行，你会得到 null 异常错误。

```
<html>
    <head>
    <title>index</title>
    <script type="text/javascript">
        function myFunc(variable){
            var s = document.getElementById(variable);
            s.value = "new value";
        }   
        myFunc("id1");
    </script>
    </head>
    <body>
        <textarea id="id1"></textarea>
    </body>
</html>
//Error message: Cannot set property 'value' of null 
```

因此，请确保您的 textarea 确实存在于页面中，然后调用 myFunc，您可以使用 window.onload 或 $(document).ready 函数。希望它有帮助。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-01T15:12:28.290

给定

```
<div id="This-is-the-real-id"></div> 
```

然后

```
function setText(id,newvalue) {
  var s= document.getElementById(id);
  s.innerHTML = newvalue;
}    
window.onload=function() { // or window.addEventListener("load",function() {
  setText("This-is-the-real-id","Hello there");
} 
```

会做你想做的

* * *

给定

```
<input id="This-is-the-real-id" type="text" value=""> 
```

然后

```
function setValue(id,newvalue) {
  var s= document.getElementById(id);
  s.value = newvalue;
}    
window.onload=function() {
  setValue("This-is-the-real-id","Hello there");
} 
```

会做你想做的

```
function setContent(id, newvalue) {
  var s = document.getElementById(id);
  if (s.tagName.toUpperCase()==="INPUT") s.value = newvalue;
  else s.innerHTML = newvalue;

}
window.addEventListener("load", function() {
  setContent("This-is-the-real-id-div", "Hello there");
  setContent("This-is-the-real-id-input", "Hello there");
})
```

```
<div id="This-is-the-real-id-div"></div>
<input id="This-is-the-real-id-input" type="text" value="">
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-05T03:10:01.740

```
<html>
<head>
<script>
function updateTextarea(element)
{
document.getElementById(element).innerText = document.getElementById("ment").value;
}
</script>
</head>
<body>

<input type="text" value="Enter your text here." id = "ment" style = " border: 1px solid grey; margin-bottom: 4px;"  

onKeyUp="updateTextarea('myDiv')" />

<br>

<textarea id="myDiv" ></textarea>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-04T06:56:08.987

遇到这个问题，没有答案提出了使用`.setAttribute()`除了`.value()`

```
document.getElementById('some-input').value="1337";
document.getElementById('some-input').setAttribute("value", "1337"); 
```

虽然对最初的提问者不太有帮助，但这个附录实际上改变了页面源中值的内容，这反过来使值更新`form.reset()`证明。

我希望这可以帮助其他人。

*(Or me in half a year when I've forgotten about js quirks...)*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-02T16:38:58.953

对于每种元素类型，您可以使用特定的属性来设置值。例如：

```
<div id="theValue1"></div>
window.document.getElementById("theValue1").innerText = "value div";

<input id="theValue2"></input>
window.document.getElementById("theValue2").value = "value input"; 
```

[您可以在这里尝试示例！](https://codepen.io/anon/pen/rbVvvW?editors=1010)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-01T15:15:56.783

尝试像下面它会工作......

```
<html>
<head>
<script>
function displayResult(element)
{
document.getElementById(element).value = 'hi';
}
</script>
</head>
<body>

<textarea id="myTextarea" cols="20">
BYE
</textarea>
<br>

<button type="button" onclick="displayResult('myTextarea')">Change</button>

</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-21T10:37:07.323

我认为问题在于您调用 javascript 函数的方式。你的代码是这样的：

```
<input type="button" onclick="javascript: myFunc(myID)" value="button"/> 
```

myID 应该用引号括起来。

# ruby-on-rails - 如何实现对 gem“acts_as_votable”的依赖？

> ID：14649174
> 
> 赞同：0
> 
> 时间：2013-02-01T15:07:22.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用`acts_as_votable`这个 gem 真的很有用。但我想要的一件事。

那就是依赖。

当用户被删除时，相关的投票记录也应该被删除。

但是，这个 gem 没有创建名为“models/vote.rb”的模型

所以我不能写这个

**用户.rb**

> has_many :votes, :dependent => :destroy

如果可能的话，我还想在这个模型中添加 deleted_at 属性，以便我可以使用逻辑删除。

我在使用这个 gem 时如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:07:59.503

简单的方法：叉宝石。应用你的补丁。将您的 Gemfile 指向您自己的存储库。奖励：向所有者提供代码的拉取请求。

愚蠢的方式：查看acts_as_votable 并检查该方法适用于您的模型。交换模型中的两者并更正关联以包含依赖：：destroy

# c++ - #define 在宏体中

> ID：14649175
> 
> 赞同：0
> 
> 时间：2013-02-01T15:07:33.177
> 
> 标签：c++, macros, c-preprocessor

我有以下用例

```
#define ConstantDouble( T )\
 T( Alert, c_alert )

 // I want to generate #define macro's dynamically
#define T( x, y ) #define #x y   <-- Error
ConstantDouble( T )
#undef T 

#define Constant( x ) Constants::x ;   <-- x is Alert and I want the prev #define to     kick in and convert this to c_alert

// Want to generate members variables directly 
class Constants
{
    #define T( x, y ) static double y;
    ConstantDouble( T )
    #undef T
}; 
```

这有解决方法吗？

我想以我的名义拥有这样的东西

`Constant( "Alert" )`这被转换为`Constants::c_alert;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-29T12:18:14.783

不，没有解决方法。只有一个预处理器通道。

如评论中所述，C++ 模板要容易得多。它们由真正的编译器编译，它支持更复杂的语法，可以进行数学运算，并且可以进行 255 级嵌套。

# java - 如何在 Java 中将 ArrayList 转换为 Array

> ID：14649177
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:07:35.957
> 
> 标签：java, arrays, arraylist

> **可能重复：**
> [如何将arrayList存储到java中的数组中？](https://stackoverflow.com/questions/5244268/how-to-store-arraylist-into-an-array-in-java)

我想知道如何将 ArrayList 转换为 Array。

在Java中有什么方法可以做到这一点吗？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:08:48.043

是的，可以查看 List API：

[**List.toArray(T[])**](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)

**例子：**

```
List<Integer> list = new ArrayList<>();
list.add(1);
list.add(2);
list.add(3);
Integer[] arr = list.toArray(new Integer[list.size()]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:08:52.320

有一个数组列表的 .toArray() 函数可以实现这一点。

# regex - EditPad RegEx ...我迷路了

> ID：14649181
> 
> 赞同：1
> 
> 时间：2013-02-01T15:07:55.220
> 
> 标签：regex, replace, backreference, editpad

我正在尝试用正则表达式进行另一个查找/替换，并且我有一些奇怪的字符，我被绊倒了。

**摘要：**
某些行*（在此克拉分隔的文件中）*在 peren 的零件号后面有一个或两个特定标记*（“（S）”或“（N）”）*，我需要将其移至 PN 之前。
**注意：**对于同时带有 (S) 和 (N) 的行，它将始终按以下顺序排列：(S)(N)

**学科：**

> ^901A-123^DESC,OF,PROD,AND,STUFF^$28.87^$23.10^--^--^--^--^^
> ^123B-C45(N)^DESC,OF,PROD,AND,STUFF^ $1,224.87^$1,041.10^--^--^--^--^^
> ^333-11(S)(N)^DESC,OF,PROD,AND,STUFF^$510.67^$459.50^$382.90^2^$357.40^4^ ^
> ^333-987M-88(S)^DESC,OF,PROD,AND,STUFF^$608.77^$547.90^$456.50^2^$426.10^4^^

**我试过**
的东西：我开始尝试像`^(.+)\(N\)^`and之类的东西`^([A-Za-z0-9]+)\(N\)^`，但很快就开始怀疑 ^(carat) 是否使事情复杂化，所以我*试图*逃避它。
这似乎没有什么区别 :)
所以接下来我尝试将所有克拉改为管道：

> |901A-123|DESC,OF,PROD,AND,STUFF|$28.87|$23.10|--|--|--|--||
> |123B-C45(N)|DESC,OF,PROD,AND,STUFF|$1,224.87|$1,041.10|--|--|--|--||
> |333-11(S)(N)|DESC,OF,PROD,AND,STUFF|$510.67|$459.50|$382.90|2|$357.40|4||
> |333-987M-88(S)|DESC,OF,PROD,AND,STUFF|$608.77|$547.90|$456.50|2|$426.10|4||

...并搜索`|([A-Za-z0-9]+)\(N\)|`，现在我得到...等待它..... *什么都没有*:)

**目标：**
虽然现在我对找出 Find 的小胜利感到高兴，但最终目标是用反向引用替换（PN）。
目标是使主题看起来像这样：

> ^901A-123^DESC,OF,PROD,AND,STUFF^$28.87^$23.10^--^--^--^--^^
> (N)^123B-C45^DESC,OF,PROD,AND,STUFF^ $1,224.87^$1,041.10^--^--^--^--^^
> (S)(N)^333-11^DESC,OF,PROD,AND,STUFF^$510.67^$459.50^$382.90^2^$357.40^4^ ^
> (S)^333-987M-88^DESC,OF,PROD,AND,STUFF^$608.77^$547.90^$456.50^2^$426.10^4^^

欢迎任何和所有指针/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:14:55.987

*   `^`两者`|`都是需要转义的元字符。
*   您的角色类`[A-Za-z0-9]+`不包括破折号。

所以，试试这个：搜索

```
(\^[A-Za-z0-9-]+)((?:\(S\))?(?:\(N\))?) 
```

并替换为

```
\2\1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:19:10.883

搜索：

```
^(.*?)(\((S\)\(N|S|N)\))(.*?)$ 
```

用。。。来代替：

```
$2$1$4 
```

由于我使用 and 锚定了模式`^`，因此`$`您必须分别在每一行上应用此正则表达式或使用多行标志。

这是一个[工作演示](http://regexr.com?33kgh)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:18:14.887

不幸的是，您正在与特殊字符战斗：`^`, `()`, `|`。您需要逃脱所有这些。所以你可以使用这个正则表达式（见实际[操作](http://regexr.com?33kg8)）：

```
\^([^\^]+?)(\(S\))?(\(N\))?(\^.*) 
```

并替换为：

```
$2$3^$1$4 
```

我假设你有`(S)`并且`(N)`只有在第一个标签之后。输出如下所示：

```
^901A-123^DESC,OF,PROD,AND,STUFF^$28.87^$23.10^--^--^--^--^^
(N)^123B-C45^DESC,OF,PROD,AND,STUFF^$1,224.87^$1,041.10^--^--^--^--^^
(S)(N)^333-11^DESC,OF,PROD,AND,STUFF^$510.67^$459.50^$382.90^2^$357.40^4^^
(S)^333-987M-88^DESC,OF,PROD,AND,STUFF^$608.77^$547.90^$456.50^2^$426.10^4^^ 
```

## 解释

正则表达式：

```
\^               #            match '^' character
([^\^]+?)        # group 1  : match any char other than '^' one or more times, non-greedy
(\(S\))?(\(N\))? # group 2-3: match "(S)" and/or "(N)" or none of them
(\^.*)           # group 4  : match '^' and then everything 
```

替换：

```
$2$3^$1$4        # concatenate group 2, then 3 and 1 and 4 after a '^' character 
```

# c++ - 使“类模板”成为类朋友的正确语法

> ID：14649182
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:07:57.053
> 
> 标签：c++, syntax, class-template

我只需要：

使“类模板”成为类朋友的正确语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:12:53.420

如果你想要一个不同类型的朋友类：

```
template<typename,typename> friend class ClassName; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:19:13.363

例如，给定一个类模板

```
template <typename> class Template; 
```

您可以与模板的特定专业化成为朋友：

```
friend class Template<int>; 
```

或所有专业：

```
template <typename> friend class Template; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:09:49.950

在 C++11 中，您可以这样做：

```
template<typename T>
class C
{
    friend T;
}; 
```

# redirect - 我需要使用 web.config 将旧目录重定向到新目录

> ID：14649185
> 
> 赞同：0
> 
> 时间：2013-02-01T15:08:01.947
> 
> 标签：redirect, asp-classic, web-config, iis-7.5

我正在尝试 使用 web.config 文件将**Example.com/thepage/** 301 重定向到**Example.com/web/thepage/ 。**

我使用 IIS 7.5，我正在使用 asp。

我试过谷歌搜索和浏览论坛，但我是新手，还没有找到答案。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:17:04.590

看看[这里](http://www.iis.net/configreference/system.webserver/httpredirect)这是 IIS 的文档，这里是 web.config 中的 httpRedirect 选项。

# java - hadoop中哪种压缩格式适合大图输出？

> ID：14649190
> 
> 赞同：0
> 
> 时间：2013-02-01T15:08:18.140
> 
> 标签：java, hadoop, compression, mapreduce

我是 hadoop 的新手，我正在使用一个程序，它的地图输出与输入文件的大小相比非常大。

我安装了 lzo 库并更改了配置文件，但它对我的程序没有任何影响。如何压缩地图输出？lzo是最好的情况吗？

如果是，我如何在我的程序中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:30:13.103

To compress the intermediate output (your map output), you need to set the following properties in your mapred-site.xml:

```
<property>
    <name>mapred.compress.map.output</name>
    <value>true</value>
</property>

<property>
    <name>mapred.map.output.compression.codec</name>
    <value>org.apache.hadoop.io.compress.LzoCodec</value>
</property> 
```

If you want to do it on a job per job basis, you could also directly implement that in your code in 1 of the following ways:

```
conf.set("mapred.compress.map.output", "true")
conf.set("mapred.map.output.compression.codec", "org.apache.hadoop.io.compress.LzoCodec"); 
```

or

```
jobConf.setMapOutputCompressorClass(LzoCodec.class); 
```

Also it's worth mentioning that the property `mapred.output.compression.type` should be left to the default of `RECORD`, because `BLOCK` compression for intermediate output causes bad performance.

When choosing what type of compression to use, I think you need to consider 2 aspects:

*   **Compression ratio**: how much compression actually occurs. The higher the %, the better the compression.
*   **IO performance**: since compression is an IO intensive operation, different methods of compression have different performance implication.

The goal is to balance compression ratio and IO performance, you can have a compression codec with very high compression ratio but poor IO performance.

It's really hard to tell you which one you should use and which one you should not, it also depends on your data, so you should try a few ones and see what makes more sense. In my experience, Snappy and LZO are the most efficient ones. Recently I heard about LZF which sounds like a good candidate too. I found a post proposing a benchmark of compressions [here](http://blog.erdemagaoglu.com/post/4605524309/lzo-vs-snappy-vs-lzf-vs-zlib-a-comparison-of), but I would definitely advise to not take that for ground truth and do your own benchmark.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-15T23:28:03.610

如果您使用的是 Hadoop 0.21 或更高版本，则必须在 mapred-site.xml 中设置这些属性：

```
<property>
  <name>mapreduce.map.output.compress</name>
  <value>true</value>
</property>
<property>
  <name>mapreduce.map.output.compress.codec</name>
  <value>com.hadoop.compression.lzo.LzoCodec</value>
</property> 
```

并且不要忘记在更改后重新启动 hadoop。还要确保您同时安装了 32 位和 64 位 liblzo2。有关如何设置的详细帮助，您可以参考以下链接：

[https://github.com/toddlipcon/hadoop-lzo](https://github.com/toddlipcon/hadoop-lzo)

[https://code.google.com/a/apache-extras.org/p/hadoop-gpl-compression/wiki/FAQ?redir=1](https://code.google.com/a/apache-extras.org/p/hadoop-gpl-compression/wiki/FAQ?redir=1)

除了查尔斯先生提出的观点外，您还应该记住另外一个方面：

*   **CPU 周期**：您要使用的压缩算法应该消耗更少的 CPU 周期。否则，压缩成本会抵消或逆转速度优势。

Snappy 是另一种选择，但它主要针对`64-bit`机器进行了优化。如果您使用的是 32 位计算机，则最好小心。

基于最近的进展`LZ4`似乎也不错，最近已经集成到Hadoop中。它速度很快，但对内存的要求更高。你可以去[这里](http://fastcompression.blogspot.in/p/lz4.html)找到更多关于 LZ4 的信息。

但正如查尔斯爵士所说，只有经过一些实验才能做出公平的决定。

# r - 如何通过分隔符拆分 r 中的字符串并丢弃最后两项？

> ID：14649192
> 
> 赞同：3
> 
> 时间：2013-02-01T15:08:21.063
> 
> 标签：r, stringr

我有一个分隔的字符串`_`，我想摆脱最后两个元素。例如，从`A_B_C_D`我想要返回`A_B`，从`A_B_C_D_E`我想要`A_B_C`。我尝试`str_split_fixed`过`stringr`：

```
my_string <- "A_B_C_D"
x <- str_split_fixed(my_string,"_",3) 
```

但它返回`"A" "B" "C_D"`而不是 `"A_B" "C" "D"`，否则我本可以`head(x,-2)`做得到`A_B`

有没有比这更好的方法

```
paste(head(unlist(strsplit(my_string,"_")),-2),collapse="_") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:13:09.587

如何使用正则表达式：

```
sub('(_[A-Z]){2}$', '', 'A_B_C_D') 
```

其中数字`2`是您要删除的长度。

# php - 显示登录我网站的用户名

> ID：14649203
> 
> 赞同：1
> 
> 时间：2013-02-01T15:08:49.730
> 
> 标签：php, database, wampserver

我有这段代码将检查用户名和密码是否与数据库中的用户名和密码匹配，并授予用户访问我的网站的权限。

```
<?php
$host="localhost"; // Host name 

$username=""; // Mysql username 

$password=""; // Mysql password 

$db_name="bfp6"; // Database name 

$tbl_name="station"; // Table name

// Connect to server and select database.

mysql_connect("localhost", "root", "")or die("cannot connect");

mysql_select_db("bfp6")or die("cannot select DB");

// username and password sent from form 

$mystations=$_POST['mystations']; 

$mypassword=$_POST['mypassword'];

// To protect MySQL injection

$mystations = stripslashes($mystations);

$mypassword = stripslashes($mypassword);

$mystations = mysql_real_escape_string($mystations);

$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE stations='$mystations' and password='$mypassword'";

$result=mysql_query($sql);

// Mysql_num_row is counting table row

$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){

// Register $mystations, $mypassword and redirect to file "login_success.php"

session_register("mystations");

session_register("mypassword");

header("location:main.html");

}

else {

echo "Wrong Username or Password";

}

?> 
```

但是我真的很难过，因为我不知道如何将登录我网站的用户的用户名插入到新数据库中。我想将该代码插入到这个数据库中。我有一个名为“log”的新表，其中包含“id”、“user”、“time”字段。我想要发生的是，每当一个人成功登录到我的网站时，他/她的用户名将被插入到表“日志”中。也许使用 $_POST 但我想确保访问权限被授予。我也已经有一个代码，将显示表的内容“日志：如果有的话。另一个问题是时间如何根据用户登录的时间自动插入数据库。伙计们，请帮帮我。我的论文截止日期是2月16日：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:17:57.120

为用户名设置一个会话变量，然后在每个页面上，启动会话并回显该变量。如果变量不存在，请注销用户。

至于制作表格，我建议使用 SQL 客户端，例如 heidisql 或 navicat。

看起来很简单？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:20:26.030

尝试这个：

```
if ($count == 1) {

    // logging the user

    mysql_query("INSERT INTO log (user, time) VALUES ('" . $mystations . "', now())");

    // setting the username as the name the user entered when logging in

    $_SESSION['username'] = $mystations;

    // Register $mystations, $mypassword and redirect to file "login_success.php"

    session_register("mystations");

    session_register("mypassword");

    header("location:main.html");

} else {

    echo "Wrong Username or Password";

} 
```

此外，您需要`session_start();`在使用会话变量的任何页面的顶部。

# parameters - iOS RestKit 参数查询

> ID：14649211
> 
> 赞同：5
> 
> 时间：2013-02-01T15:09:18.700
> 
> 标签：parameters, mapping, request, restkit

我正在尝试使用 RestKit 从服务器获取一些东西。

假设我有 A 类，我想将返回的数据映射到对象，但是我需要在请求 url 中附加三个参数，例如：

[http://example.com/someobject/?param1=value1¶m2=value2¶m3=value3](http://example.com/someobject/?param1=value1&param2=value2&param3=value3)

我一直在阅读 Github 上关于如何执行返回对象映射的 RestKit 指南，看起来很简单，但我根本找不到任何关于如何向查询添加参数的内容，大多数内容都是关于过时的 0.10.x 库。

谁能解释一下这个过程？

编辑：

我的意思是不使用 RKClient 的普通流程，而是 RKObjectRequestOperation。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:28:07.830

在这种情况下使用 RKObjectManager 非常容易，因为可以传入一个 NSDictionary 作为`parameters`参数。

```
NSDictionary *params = @{@"param1" : @"value1",
                         @"param2" : @"value2",
                         @"param3" : @"value3"};

[[RKObjectManager sharedManager] getObject:someObject path:nil parameters:params success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

    // success

} failure:^(RKObjectRequestOperation *operation, NSError *error) {

    // failure

}] 
```

# css - 打破 CSS 中内联块的水平布局

> ID：14649224
> 
> 赞同：2
> 
> 时间：2013-02-01T15:09:59.420
> 
> 标签：css

我有很多 LI，我使用 inline-block 水平放置。

它工作得很好，我明白了

```
| [LI1]-[LI2]-[LI3] |
| [LI4   ]-[LI5]    |
| [LI6]-[LI7]-[LI8] | 
```

在我的浏览器上，取决于窗口宽度和单个 LI 的宽度。

我希望在一些 LI 之后，“换行符”。例如，在 LI2 之后放置一个“换行符”，我会看到

```
| [LI1]-[LI2]       |
| [LI3]-[LI4   ]    |
| [LI5]-[LI6]-[LI7] |
| [LI8]             | 
```

当然，也有可能是 LI3 打破了界限。

我可以完全控制每个 LI 的 CSS。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:21:51.430

我不会使用 CSS 技巧来做到这一点——我会修改我的 HTML 以反映您要显示的列表的结构。

在这里你可以说每个水平的集合`<li>`都是它自己的`<ul>`。所以你有一个列表列表。

检查[这个 JsFiddle](http://jsfiddle.net/ustVW/)。通过这种方式，您可以获得结果，而不会隐藏在某些 CSS 中的行为，并且很容易看到您的标记中发生了什么。

编辑：好的，因为您无法触摸 HTML，您可以将所有内容浮动到左侧，然后在每一行中`<li>`制作第一个。请参阅[对 JsFiddle 的此编辑](http://jsfiddle.net/ustVW/1/)...`<li>``clear:left`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:30:26.033

If you want a specific element to "line break" you just need to add a clear.

```
.myelement {
  clear: both;
}

<li>Hi</li>
<li>There</li>
<li class="myelement">Neighbor!</li> 
```

Elements naturally migrate to the left. If all the elements are set to float: left, they will all migrate to the left and then break each time they run out of room. `clear:both;` makes them be the only item on that line.

# html - 让背景颜色覆盖网站的整个区域

> ID：14649225
> 
> 赞同：0
> 
> 时间：2013-02-01T15:10:00.340
> 
> 标签：html, css

我真的不知道如何表达这个问题，但无论如何，我的网站目前看起来很奇怪。我让它看起来非常好，但是我改变了它，因为页脚占据了页面的整个主要部分（我想在页脚和主要部分之间添加颜色变化）。

所以我想知道的是如何让主区域文本背景颜色覆盖从导航栏到页脚的所有内容（也与导航栏一样宽）？我会将其更改为使用像素，但这是否意味着您决定更改它时需要进行太多猜测？当然有更简单的方法！

感谢提供的任何帮助

代码：

```
.mainsection{
float:left;
width: 660px;
margin:30px;
background-color:#999;

}

.center{
background-color:#999;  
} 
```

HTML：

```
<div class="center">

            <section class="mainsection">
                <p>Main Area</p>
            </section>

            <aside class="sidenews">
                This is the side news
            </aside>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:34:21.100

怎么样：

```
html {
   background: #999;
} 
```

或者

```
body {
   background: #999;
} 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:58:02.187

您可以尝试的另一件事是将您想要某种背景颜色的所有区域包装在 div 中，然后设置该 div 的类并在该类中执行背景颜色属性。您必须从其余类中删除背景颜色属性才能使其正常工作。您可以使用 !important 进一步控制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:43:22.597

尝试这个 ; 为所有主页创建一个新类，如 .center 并添加以下样式，希望对您有所帮助。

```
body{background:#999;width:100%;height100%;}
.center{margin:auto; width:960px;} 
```

# elasticsearch - Logstash grok 过滤器标记退回的消息

> ID：14649230
> 
> 赞同：4
> 
> 时间：2013-02-01T15:10:29.243
> 
> 标签：elasticsearch, logstash, logstash-grok

摘要：我有一些出站 smtp 服务器和通过 rsyslog 将邮件日志集中到我正在使用 logstash 的服务器，输出到 elasticsearch，使用 kibana 搜索。

我想将 Postfix 邮件日志条目标记为“BOUNCED”，例如：

```
2013-02-01T16:50:14+02:00 XXSMTPXX postfix/smtp[10879]: BC54A65BD4: to=<xxxx.yyyyyy@zzzz.com.t>, relay=none, delay=0.3, delays=0.01/0/0.29/0, dsn=5.4.4, status=bounced (Host or domain name not found. Name service error for name=gozdesigorta.com.t type=AAAA: Host not found) 
```

我在 logstash.conf 中使用的 grok 过滤器是这样的：

```
grok {
    patterns_dir => "/etc/logstash/patterns"
    tags    => "postfix/bounce"
    pattern => "%{POSTFIXBOUNCE}"
    add_tag => "BOUNCED"
    named_captures_only => true
} 
```

我正在使用的模式文件是[https://gist.github.com/4691822](https://gist.github.com/4691822)

我无法将这些日志行标记为 BOUNCED ......我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:23:22.190

我将模式更改为：

```
%{TIMESTAMP_ISO8601} %{HOST} %{SYSLOGPROG}: %{QUEUEID}: to=<%{EMAILADDRESS:to}>, relay=%{RELAY}, delay=%{POSREAL:delay}, delays=%{DELAYS}, dsn=%{DSN}, status=%{STATUS} %{GREEDYDATA:reason} 
```

现在我可以摸索了；）

# php - 如何在 php 中将变量传递给我的视图

> ID：14649232
> 
> 赞同：0
> 
> 时间：2013-02-01T15:10:31.400
> 
> 标签：php, templates, scope

我有一个包含加载视图的方法的类。这工作完美，页面加载正确！我遇到的问题是我似乎无法找到将变量传递给我的方法当前尝试加载的视图的方法。如何将变量传递给页面？有没有办法可以操纵我当前的代码来完成这项工作？还是我会朝着完全相反的方向前进？

控制器类：

```
<?php
    class Controller {

        private $args = array();

        public function view($page, $args = null) {

            if ($args !== null) {
                $this->args = $args;
                extract($this->args);
            }

            $page = VIEWS . $page . '.php';
            $template = $this->getTemplate($page);

            echo $template;
        }

        private function getTemplate($file) {
            ob_start();
            include($file);
            $template = ob_get_contents();
            ob_end_clean();
            return $template;
        }
    }
    ?> 
```

控制器：

```
<?php
    class Page extends Controller {

        public function person($age) {
            $data['age'] = $age;
            $this->view('person', $data);
        }

    }
?> 
```

查看内容：

```
</h1>My name is Dennis. My age is: <?php echo $age; ?></h1> 
```

最终结果是一个未定义的变量 ($age)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:13:58.967

您提取的变量在`view()`中不可用`getTemplate()`。这是一个不同的范围。您应该使用与渲染相同的方法来提取它们。

此外，您所拥有的不是 MVC 视图。它只是一个[模板](http://codeangel.org/articles/simple-php-template-engine.html)。MVC 中的视图是负责 UI 逻辑的实例。它应该从模型层请求它需要的信息，然后，如果响应不仅仅是 HTTP 位置标头，则使用多个模板创建 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:13:05.623

试试这个：

```
</h1>My name is Dennis. My age is: <?php echo $data['age']; ?></h1> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:16:39.167

最简单的方法是将$args变量传给getTemplate，在getTemplate方法中做extract方法

```
private function getTemplate($file, $args = null) {
    if ($args !== null) {
        extract($args);
    }
    ob_start();
    include($file);
    $template = ob_get_contents();
    ob_end_clean();
    return $template;
} 
```

当您包含并捕获输出时，将执行该 php 文件，因此在包含之前必须存在所有变量

If you dont want to pass down variables you can use $this->args inside of the template

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:13:31.503

您提取变量的方法与包含模板的方法不同。如果您想在模板中使用普通变量，请确保将它们提取到相同的范围内。

# zend-framework - 如何创建和实施像素跟踪代码

> ID：14649234
> 
> 赞同：14
> 
> 时间：2013-02-01T15:10:40.083
> 
> 标签：zend-framework, tracking, pixel

好的，这是我一直在寻找的目标。

众所周知，大多数广告和分析公司使用所谓的“像素”代码来跟踪网站浏览量、交易、转化等。

我确实对它的工作原理有一个大致的了解，问题是如何实现它。跟踪代码由几个部分组成。

1.  跟踪代码本身。这是用户在该`<head>`部分的网页上插入的代码。此代码的主要目标是设置一些客户特定的变量并调用该`*.js`文件。

2.  `*.js`文件。该文件包含 CRUD（创建/读取/更新/删除）cookie 的所有魔力，跟踪用户事件和与网页的交互。

3.  像素代码。这是一个`<img>`标签，其`src`属性指向一个图像`*.gif`（例如）文件，该文件获取页面上收集的所有参数，并将它们存储在数据库中。

例子：

WordPress像素代码：`<img id="wpstats" src="http://stats.wordpress.com/g.gif?host=www.hostname.com&amp;list_of_cookies_value_pairs;" alt="">`

谷歌分析： `http://www.google-analytics.com/__utm.gif?utmwv=4&utmn=769876874&etc`

现在，很明显，`*.gif`请求必须到达服务器端脚本语言才能读取参数数据并将它们存储在数据库中。

有谁知道如何在 Zend 中实现它？

**更新** 我感兴趣的另一件事是：如何避免用户的浏览器加载缓存`*.gif`？随机参数值会起作用吗？示例：每个请求`src="pixel.gif?nocache=random_number"`的`nocache`参数值都不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T00:05:09.747

由于 Zend 是使用 PHP 构建的，因此可能值得阅读以下问答：[开发跟踪像素](https://stackoverflow.com/questions/13079666/developing-a-tracking-pixel)。

除了这个答案之外，当您正在寻找一种避免缓存跟踪图像的方法时，最简单的方法是向其附加一个唯一/随机字符串，该字符串是在运行时生成的。

例如，在服务器端和创建每个图像时，您可能会添加一个随机 URL id：

```
<?php

  // Generate random id of min/max length
  $rand_id = rand(8, 8);

  // Echo the image and append a random string
  echo "<img src='pixel.php?a=".$vara."&b=".$varb."&rand=".$rand_id."'>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:13:35.167

首先，`*.gif`不需要是那种文件类型，唯一感兴趣的是`Content-Type`http头。在开始时将其设置为`image/gif`（或任何其他适当的类型），执行您的代码并将某种图像呈现给响应正文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T23:33:09.617

好吧，上面所有的代码都是正确的并且很好，但是可以肯定的是，上面的那个人提到了“g.gif”

您只需添加一个简单的 php 代码即可写入 sql 或 fwrite("file.txt",$opened) 其中 var $opened 充当计数器 ++，如果有人打开您的邮件...然后将其保存为“g.gif”

要完成所有这些，只需添加以下内容：

```
<Files "/thisdirectory">
 AddType application/x-httpd-php .gif
</Files> 
```

到您的“.htaccess”文件，但请务必为该 g.gif 或任何.gif 创建一个新目录，其中该目录仅包含 g.gif 和 .htaccess

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-10T07:56:29.393

只需将我的 2 美分添加到此线程，因为我认为缺少一个重要且经常使用的选项：您不一定需要脚本语言来捕获请求。一种更有效的方法是使用 Web 服务器访问日志（例如 apache 访问日志）来记录请求，然后使用您认为合适的任何工具处理该日志，例如 ELK 堆栈。

这使得为​​请求提供服务变得更加轻松，因为没有加载脚本语言来准备响应，只加载本机 apache 响应，这通常效率更高。

# c++ - 指向引用/地址参数的指针

> ID：14649235
> 
> 赞同：1
> 
> 时间：2013-02-01T15:11:00.620
> 
> 标签：c++, pointers, memory

抱歉标题混乱，不知道取什么标题。我有这个功能：

```
static void smooth5(IntVector*& v)
{
    IntVector* tmp = new IntVector();
    for(int i=0; i<v->size(); i+=2)
        tmp->push_back(v->at(i));
    delete v;
    v = tmp;
} 
```

主要是我这样做：

```
IntVector* v = new IntVector();

v->push_back(0);
v->push_back(1);
v->push_back(2);
v->push_back(3);

smooth5(v);

//print the contents of v 
```

当我打印v的内容时，输出是0 2。但是我不明白什么

```
IntVector*& v 
```

实际上意味着当 v 是指向堆上对象的指针时。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:12:47.170

`IntVector*&`声明对指针的引用。使用 this 作为函数参数允许`smooth5`修改调用者的`v`.

它类似于但比将指针传递给指针 - 更具可读性`IntVector**`。

在您的示例中，`smooth5`删除调用者`IntVector`并将其指向其`tmp`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:14:39.160

这不是指向引用的指针，而是对指针的引用。这意味着不是将指针的副本传递给函数，而是传递对它的引用。因此，您对函数中的指针所做的任何修改`smooth5`都会影响您传递给它的参数，在这种情况下是指针`v`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:27:36.913

您`IntVector*& v`的代码中的含义取决于谁在阅读它。当编译器读取它时，这意味着它`v`是对一个指针的引用`IntVector`（它是一个 typedef 到 `std::vector<int>`？）。当我阅读它时，这意味着代码的作者可能不了解 C++ 的工作原理，并且正在尝试改编不合适的 Java 或 C# 习惯用法。写这个的惯用方式是：

```
void smooth5( IntVector& v )
{
    IntVector results;
    for ( int i = 0; i < v->size(); i += 2 ) {
        results.push_back( v[i] );
    }
    v.swap( results );
} 
```

任何涉及向量指针的代码都是高度可疑的。

# artificial-intelligence - 推荐系统中的模糊逻辑应用

> ID：14649244
> 
> 赞同：0
> 
> 时间：2013-02-01T15:11:27.117
> 
> 标签：artificial-intelligence, recommendation-engine, fuzzy-search, fuzzy-logic

我想知道如何在推荐系统中使用模糊逻辑来获得某种优势？

我的系统基本上通过以下方式计算用户之间的相似度：

*   谷本系数
*   余弦距离
*   离散距离

然后将所有相似度组合成一个从 0 到 1 的度量值。这样我们就可以得到用户 1 的相似用户，然后向他推荐与他相似的用户购买的商品。

我了解模糊理论的基础知识，只是想不出这里有什么用法，但想尝试一下想听听对此的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:08:51.547

我在现实生活中还没有看到太多模糊逻辑的成功应用，所以我不会对它抱有太大的期望。

想不出有什么用处，为什么还要尝试呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:51:39.287

如果您的相似度值从 0 到 1，您可以使用模糊逻辑来形式化您的系统。就像拥有一个返回真/假的系统并尝试用双值逻辑将其形式化。你只是得到形式化。

唯一的优点是对数字进行去模糊化（使用模糊词，例如非常相似，不太相似，......），但你也可以在没有模糊逻辑的情况下做到这一点......

# android - 如何保存和恢复listview的当前适配器

> ID：14649247
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:11:37.977
> 
> 标签：android, listview, screen, adapter

在android上，¿我可以在旋转屏幕时保存和恢复当前的listview适配器吗？为了做到这一点，我必须将适配器保存在方法 onSaveInstanceState 中，但是如何获取列表活动的当前适配器？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:26:32.343

如果您在旋转时不需要在活动中使用不同的布局，则可以通过添加以下内容来防止在清单中旋转后重新创建它：

```
android:configChanges="orientation|screenSize" 
```

在清单中的活动描述中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:26:58.970

要么（您可能不喜欢）禁用屏幕旋转

```
<activity android:name="YOUR ACTIVITY"
            android:configChanges="keyboardHidden|orientation"
            android:screenOrientation="portrait" >
</activity> 
```

或者，从 Web 获取数据后，将数据保存在 ArrayList 中，然后（屏幕旋转后）将其再次传递给适配器。既然你做过一次，你应该已经在某个地方拥有你的数据......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:30:16.747

使您的适配器成为一个类范围的变量，并检查它是否在每次方向更改时设置（或出于任何原因您的活动正在重新启动）。如果已设置，请使用此数据适配器。如果没有，请再次下载数据并将下载的内容保存到类范围的适配器。

# ios - 使用手势识别器 (LongPress) 从地图视图中获取 GPS 坐标

> ID：14649250
> 
> 赞同：1
> 
> 时间：2013-02-01T15:11:49.777
> 
> 标签：ios, gps, mkmapview, coordinates, uigesturerecognizer

当用户在视图中长按时，我想从地图视图中获取 GPS 坐标。

目前我正在使用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    mapView.showsUserLocation =YES;
    UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(mapLongPress:)];
    longPressGesture.minimumPressDuration = 1.5;
    [mapView addGestureRecognizer:longPressGesture];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)mapLongPress:(UILongPressGestureRecognizer *)gestureRecognizer{
    if(gestureRecognizer.state == UIGestureRecognizerStateBegan){
        CGPoint touchLocation = [gestureRecognizer locationInView:mapView];

        CLLocationCoordinate2D coordinate;
        coordinate = [mapView convertPoint:touchLocation toCoordinateFromView:mapView];// how to convert this to a String or something else?
        NSLog(@"Longpress");
    }
} 
```

但是我如何获得坐标？从坐标 = `[mapView convertPoint:touchLocation toCoordinateFromView:mapView];`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:28:10.497

用代码回答你的问题：

“如何将其转换为字符串或其他内容？”

```
NSLog(@"LongPress coordinate: latitude = %f, longitude  = %f", coordinate.latitude, coordinate.longitude); 
```

地理坐标由纬度和经度表示。
使用您使用`CLLocationCoordinate2D`的 ios，其中包含坐标组件纬度和经度。

纬度范围 [-90.0, 90.0]
经度范围 [-180.0, 180.0]

您可以使用`CLLocationCoordinate2D`或您自己的结构来存储它。

# javascript - 带有 JQuery-Slider 的 IE-Bug

> ID：14649251
> 
> 赞同：0
> 
> 时间：2013-02-01T15:12:02.677
> 
> 标签：javascript, jquery, css, internet-explorer, bxslider

我已经在我的页面（BXSlider）中添加了一个 JQuery 滑块，除了 IE（7 和 8）中的这个页面之外，它几乎在每个页面（在每个浏览器中）都可以正常工作。

滑块中的图像被加载但它显示一个大的空白区域而不是滑动表（是的，此时它需要是一个表）！

很抱歉发布的链接，但我无法弄清楚这个，我不知道我应该在这里添加哪些代码......它是 CSS 问题还是 JQuery/Javascript 相关？

我希望有人能给我指出正确的方向……</p>

非常感谢， Jochen

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:04:28.983

正如我在上面的评论中提到的。您实现滑块的方式会产生不正确的 html。bxslider 在包含您的图像的 td 之外包装了两个 div，因此您会得到这样的 HTML 结构：**table > tr > div > div > td**，这就是 IE 出现问题的原因 - 浏览器是正确的. 如果您无法摆脱桌子（我更喜欢），请执行以下操作：

像这样修改滑块表的 HTML：

```
<table border="0">
    <tbody>
        <tr>
            <td>
                <div class="bx-box">[.. YOUR LINKS AND IMAGES .. ]</div>
            </div>
        </tr>
    </tbody>
</table> 
```

在 JS 中这样做：

```
$(function(){
    // change your your selector to the nested div container
    // and tada it works in ie too.
    $('td .bx-box').bxSlider({
        infiniteLoop: true,
        hideControlOnEnd: true
    });
}); 
```

现在，在 bxSlider 在其周围添加包装器 div 并且滑块显示跨浏览器之后，代码仍然有效。你会在[这里找到一个演示](http://jsfiddle.net/EYnAM/)。帮自己一个忙，验证你的代码，里面有更多的错误（双重关闭标签和其他），这可能会导致最奇怪的布局行为。

# c# - C# 肥皂网络服务 WSDL

> ID：14649252
> 
> 赞同：4
> 
> 时间：2013-02-01T15:12:03.927
> 
> 标签：c#

我已经从 asp.net Web 应用程序中的 wsdl 文件生成了存根。我的问题是如何将这些函数调用添加到 httpwebrequest？我已经做到了这一点，但不知道如何完成它并将肥皂放在电线上。

```
public HttpWebRequest CreateWebRequest(string webMethod)
{
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("");
        webRequest.Headers.Add(@"SOAPAction", "\"http://www.multispeak.org/Version_3.0/"+ webMethod +"\"");
        webRequest.ContentType = "text/xml;charset=\"utf-8\"";
        webRequest.Accept = "text/xml";
        webRequest.Method = "POST";
        return webRequest;
}

protected void Button1_Click(object sender, EventArgs e)
    {
        MR_ServerSoapClient soapClient = new MR_ServerSoapClient(endPoint,uri);
        PingURLRequest request = new PingURLRequest();
        PingURLResponse response = new PingURLResponse();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:17:17.323

我不确定您为什么不使用为您生成的客户端方法，但是：

```
using (var response = (HttpWebResponse)webRequest.GetResponse())
{
   var reader = new StreamReader(response.GetResponseStream());
   var result = reader.ReadToEnd();
} 
```

# svn - svn checkout 只有最新的文件？

> ID：14649253
> 
> 赞同：1
> 
> 时间：2013-02-01T15:12:04.953
> 
> 标签：svn, tortoisesvn

我想在我的本地目录中签出一个项目。该项目文件的大小不是很大，但 .svn 文件夹中的文件是项目大小的巨大补充。有没有办法只下载项目文件，但我仍然可以提交和更新代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:21:09.753

这是不可能的。如果您使用 1.7，它只会在工作副本的根目录中保留一个 .svn 目录。它需要 .svn 目录来包含每个文件的元数据，以及文件的原始版本以允许您在没有网络访问的情况下执行差异还原和其他操作。

如果不需要所有目录，可以使用[稀疏目录](http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html)

正如 Lazy Badger 所解释的，您可以使用 svn export，但您将无法从导出的工作副本提交或更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:37:33.993

如果你签出 repo，你总是会得到 .svn 目录。

但是如果你想获得**未版本化的存储库树**，你可以使用`export`

`svn export URL PATH`

# dynamics-gp - 如何通过 eConnect 或 Web 服务在 Dynamics GP 中退回发票？

> ID：14649261
> 
> 赞同：2
> 
> 时间：2013-02-01T15:12:37.000
> 
> 标签：dynamics-gp, econnect

我们在 GP 10.0 中有发票文件。最近，会计部门决定，当错误的客户被开票时，我们将退回发票并创建一个新的。（以前，我们会向错误的客户发出贷项通知单，向新客户发出借项通知单）。

我被指向 taSopHdrIvcInsert，但我不确定如何处理它或如何将其保存回来。因为我从来没有 100% 确定 GP 真正需要哪些字段，所以我希望我可以使用 eConnect 或 Web 服务按编号获取文档，将 SOPTYPE 更改为 4-Return 并将其保存回来，因为看起来其他所有内容都应该是相同的。

然后，我可以为新客户开具发票，并使用现有流程将其保存到 GP 中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:20:00.073

我在 Dynamics GP 论坛上得到了答案。Web 服务确实有一种方法供我使用，称为 CreateSalesReturn。我使用 Web 服务拉回发票，然后从发票的数据中填充一个 SalesReturn 对象，并使用 CreateSalesReturn 将其导入 GP。

# arrays - 填充数组但在 Google Apps 脚本中获取值“null”

> ID：14649262
> 
> 赞同：0
> 
> 时间：2013-02-01T15:12:41.927
> 
> 标签：arrays, variables, google-apps-script

我很困惑。我有一个“键”数组，其中每个键都有一个数字。我有一个当前数据行的数组。

现在我需要填充一个新数组，我们在其中匹配键和值，如下所示：

```
var template = HtmlService.createTemplateFromFile('box');   //MAAK FORMULIER KLAAR, HIER ALLE VARIABELEN DIE UIT DE RECORD KOMEN

template.action = ScriptApp.getService().getUrl();
template.ID=data[keys.key_ID];
template.AccountManager=data[keys.key_AccountManager];
template.Status=data[keys.key_Status];
template.Terugbeldatum=data[keys.key_Terugbeldatum];
template.Schoolnaam=data[keys.key_Schoolnaam];
template.Bezoekadres=data[keys.key_Bezoekadres];
template.Huisnr=data[keys.key_Huisnr];
template.Postcode=data[keys.key_Postcode];
template.Plaats=data[keys.key_Plaats];
template.Telefoon=data[keys.key_Telefoon];
template.Website=data[keys.key_Website];
template.Voorletters=data[keys.key_Voorletters];
template.Voornaam=data[keys.key_Voornaam];
template.VVAS=data[keys.key_VVAS];
template.Achternaam=data[keys.key_Achternaam];
template.Functie=data[keys.key_Functie];
template.Vakantieregio=data[keys.key_Vakantieregio];
template.LAS=data[keys.key_LAS];
template.LASDatum=data[keys.key_LASDatum];
template.ZelfstandigeInkoop=data[keys.key_ZelfstandigeInkoop];
template.Gespreksverslag=data[keys.key_Gespreksverslag];
template.SeminarDatum=data[keys.key_SeminarDatum];
template.AfspraakDatum=data[keys.key_AfspraakDatum];
template.Statushistorie=data[keys.key_Statushistorie];
template.Gesprokenmet=data[keys.key_Gesprokenmet];
template.Verantwoordelijke=data[keys.key_Verantwoordelijke];
template.TelefoonnummerV=data[keys.key_TelefoonnummerV];
template.row=row;
template.Emailadres=data[keys.key_Emailadres];
template.EmailadresV=data[keys.key_EmailadresV];
template.welkom = false; 
```

结果：

[http://imm.io/UP5b](http://imm.io/UP5b)

只有几个变量将其放入模板数组中，其余为“空”？？？

当我做一个

```
 Logger.log(data[keys.key_Exxx]); 
```

价值就在那里。

我不能以这种方式将这么多变量分配给模板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:57:13.560

看起来使用复制粘贴有问题，template.TelefoonnummerV=data[keys.key_TelefoonnummerV]; _ 后面好像多了一个字符？？？我一直在使用正则表达式工具来替换一些文本。奇怪的。——瑞尔昨天

# c# - 在按钮上制作的不仅仅是一个事件

> ID：14649271
> 
> 赞同：-3
> 
> 时间：2013-02-01T15:12:58.323
> 
> 标签：c#, events, button

拜托，我想知道如何在一个按钮上制作两个事件，例如：当我第一次单击按钮时显示一个图像，而第二次仍处于调试模式时，我单击显示另一个图像。有哪些方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:17:51.617

你可以做这样的事情：

```
protected void Button1Click(object sender, EventArgs e)
{
  if (Img1.Visible == false)
  {
     Img1.Visible = true;
  }
  else
  {
    Img2.Visible = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:16:06.783

我认为您不需要两个（或更多）事件来执行您想要的操作，您只需要跟踪单击按钮的次数，例如使用实例变量。

```
private int clicks = 0;

 protected void myButton_Click(object sender, EventArgs e)
 {
    if(clicks == 1)
    {
        // do something
    }
    if(clicks == 2)
    {
        // do other things
    }
    if(clicks > 2)
    {
        // something else
    }

    clicks++;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:18:35.567

像这样的东西怎么样：只要确保在按钮之外声明计数器

```
 int clickedCount = 0;

        private void button1_Click(object sender, EventArgs e)
        {
            clickedCount++;
            if (clickedCount % 2 == 0) { pictureBox1.ImageLocation = @"path"; } else { pictureBox1.ImageLocation = @"path"; }

        } 
```

# javascript - 为什么我的带有关联的简单 ExtJS 数据示例不起作用？

> ID：14649272
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:01.157
> 
> 标签：javascript, extjs, proxy, associations, has-one

从我的角度来看，我用 ExtJS 中的关联构建了最简单的模型方法。

模型： **发布***--hasOne* -- >**用户**

我做了什么：

*   使用内存代理
*   遵循规则：模型中的代理
*   通过 加载帖子对象`Post.load(...)`。

但是当我尝试获取用户对象时，它没有正确加载：（
此处为完整来源：http: [//jsfiddle.net/7XRw4/4/](http://jsfiddle.net/7XRw4/4/)）

```
Ext.define('Post', {
    extend: 'Ext.data.Model',
    fields: ['user_id', 'content'],
    hasOne: 'User',
    proxy: {
        type: 'memory',
        data: {
            posts: [
                {id:1, user_id:1, content:'foo'},
                {id:2, user_id:1, content:'bar'}
            ]
        },
        reader: {
            type: 'json',
            root: 'posts'
        }
    }
});

Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['name'],
    proxy: {
        type: 'memory',
        data: {
            users: [
                {id:1, name:'hans'},
                {id:2, name:'klaus'}
            ]
        },
        reader: {
            type: 'json',
            root: 'users'
        }
    }
});

Ext.onReady(function() {
    console.log("Ext.onReady() invoked...");

    Post.load('1', {
        success: function(record, operation) {
            thePost = record;

            console.log('thePost:', thePost);
            theUser = thePost.getUser();
            console.log('theUser:', theUser);

            alert('The user name: ' + theUser.get('name'));
            // The user object will not be right loaded! Why?
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:39:52.163

.getUser 不是异步的吗？这意味着您应该为其提供一个成功函数并在该成功函数中提醒用户名？

但是我在 Ext 中的 hasOne 关系上有很多问题。文档、教程、对文档的评论 - 如果您不在 json 中发送完整的关系，它们永远不会同意并且没有任何效果。

# ruby-on-rails - 未初始化的常量 Page::PagesController

> ID：14649273
> 
> 赞同：1
> 
> 时间：2013-02-01T15:13:02.030
> 
> 标签：ruby-on-rails

我有以下路线

```
namespace :page do
  match '/about' => 'pages#show', slug: 'page_about'
  match '/contact' => 'pages#show', slug: 'page_contact'
end 
```

在开发和登台中，进入页面/关于进入正确的页面。但是在生产中，我收到一个`uninitialized constant Page::PagesController`错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:15:11.150

当您只有一个 PagesController 时会发生该错误。在路由中使用命名空间希望您拥有，使用您的案例，Page::PagesController。将您的路线更改为

```
match '/page/about' => 'pages#show', slug: 'page_about'
match '/page/contact' => 'pages#show', slug: 'page_contact' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:15:48.623

您不应该在这里使用命名空间，而且我不知道您为什么要传递“slug”。对于像这样的简单路线，您只需要这样：

```
get "/page/about"
get "/page/contact" 
```

这些产生以下内容`rake routes`：

```
pages_about   GET /pages/about(.:format)      pages#about
pages_contact GET /pages/contact(.:format)    pages#contact 
```

# django - Django - 用户会话显示用户数据

> ID：14649279
> 
> 赞同：2
> 
> 时间：2013-02-01T15:13:07.103
> 
> 标签：django, django-models, django-views

我想显示 user.username foreignKey 等于会话用户名的条目列表。我只想显示与会话用户相关的特定数据。

模型.py：

```
from django.db import models

class User(models.Model):
    username = models.CharField(max_length=10)
    email = models.EmailField(verbose_name='e-mail')
    date_signed = models.DateTimeField('date signed')

class ezMap(models.Model):
    map_name = models.CharField(max_length=50, )
    user = models.ForeignKey(User) 
```

视图.py：

```
from django.shortcuts import *
from ezmapping.models import *

def listEzMap(request):
    #really not sure how to do it...
    username = request.session['username']
    user_list = ezMap.objects.get(map_name = username)
    return render_to_response("map_list.html", {'user_list': user_list}) 
```

map_list.html 模板：

```
{% extends "base.html" %}
{% block content %}
<div class="list">
  <h2> Map list </h2>
    {% for object in user_list %}
<li>{{ object.map_name }}</li>
{% endfor %}
</div>
{% endblock %} 
```

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:29:42.330

视图.py：

```
def listEzMap(request):
    user_list = ezMap.objects.filter(user=request.user)
    return render_to_response("map_list.html", {'user_list': user_list}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:15:32.723

您始终可以从 request as 访问已登录的用户`user = request.user`，然后使用该用户信息根据用户做出决定：

```
user = request.user
user_list = ezMap.objects.get(map_name = user.username) 
```

您应该检查评论中提到的[django 身份验证](https://docs.djangoproject.com/en/dev/topics/auth/)`dm03514`系统。

# android - Android - 数据库查询排序不好？

> ID：14649281
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:11.363
> 
> 标签：android, sqlite, sorting

我的查询有问题

```
public ArrayList<String> getUniqueYears(String TABLE_NAME) {

      ArrayList<String> content = new ArrayList<String>();
      final String[] cat = new String[] {KEY_YEAR};

      Cursor cursor = myDatabase.query(true, TABLE_NAME, cat, null, null, null, null, KEY_YEAR, null);

              if (cursor.moveToFirst()) {
                 do {

                      content.add(cursor.getString(0));
                 } while(cursor.moveToNext());
            }

      cursor.close();
      return content;
} 
```

当我调用该函数时，我会返回这个：

[111、1111、124、1242、1345、1943、2345、345]

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:15:17.563

它目前正在排序，`KEY_YEAR`就好像那些字符串：

1.  111 在 1111 之前，因为`111`和`111`1 相等，但第二个有一个额外的字符，因此 i 在“数值上大于”第一个。
2.  1111 在 124 之前，因为`1`111 和`1`24 相等，但是 1 `1`11 “数值上低于” 1 `2`4。其余的不用于对这对进行排序

某某某某……

你是怎么储存的`KEY_YEAR`？它应该是一个`NUMBER`

# ios - MonoTouch 以编程方式为 ContainerView 实例化 ViewController

> ID：14649288
> 
> 赞同：1
> 
> 时间：2013-02-01T15:13:21.900
> 
> 标签：ios, xamarin.ios

我正在尝试在 MonoTouch 中使用容器视图，并且正在在线学习一些教程。他们谈论以编程方式从容器中添加和删除视图控制器。我在项目的故事板中创建了一个视图控制器和视图，并附加了一些出口和一个动作（分别用于标签和按钮）。我创建了一个重载的构造

这是我试图将 viewControllers 添加到容器视图中的视图控制器中的代码。

```
public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        ContainerView.AutoresizingMask = UIViewAutoresizing.FlexibleHeight;
        _controllerOne = new IngredientsController("Perishables");
        _controllerTwo = new IngredientsController("Spices");
        AddChildViewController(_controllerOne);
        ContainerView.AddSubview(_controllerOne.View);
        _controllerOne.DidMoveToParentViewController(this)
    } 
```

当我为 _controllerOne 添加子视图时，我收到一个错误，因为我的控制器上的元素被标记为空。如果控制器是在 Interface Builder 中制作的，MonoTouch 是否无法以编程方式创建视图控制器？下面是成分控制器的两个构造函数。使用 segue 时，所有 UI 控件都会正确初始化。我是否需要以编程方式创建控制器，然后以这种方式实例化它？任何帮助，将不胜感激。

```
//This ctor does not work
public IngredientsController (string title) : base(NSObjectFlag.Empty)
{
_ingredientTitle = title;
}

//This ctor works
public IngredientsController (IntPtr handle) : base (handle)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:12:55.627

尝试交换`AddSubView()`和`DidMoveToParentViewController()`方法，如下所示：

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();
    ContainerView.AutoresizingMask = UIViewAutoresizing.FlexibleHeight;
    _controllerOne = new IngredientsController("Perishables");
    _controllerTwo = new IngredientsController("Spices");
    this.AddChildViewController(_controllerOne);        // Root child controller.
    _controllerOne.DidMoveToParentViewController(this); // Confirm the rooting.
    ContainerView.AddSubview(_controllerOne.View);      // Access the view.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T05:44:50.180

尝试像这样实例化视图控制器：

```
public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        this.ContainerView.AutoresizingMask = UIViewAutoresizing.FlexibleHeight;

        var newController = this.Storyboard.InstantiateViewController("IngredientsController");

        this.AddChildViewController (newController);        
        this.ContainerView.AddSubview (mapController.View);
    } 
```

**确保在 ViewController 的属性面板中设置 Storyboard Id**

# java - 无法应用父类中的构造函数

> ID：14649291
> 
> 赞同：2
> 
> 时间：2013-02-01T15:13:27.347
> 
> 标签：java

我正在尝试编写一个程序，该程序采用不同形状的地毯并创建一个带有子类中定义的某些变量的地毯对象。我的代码是

```
public abstract class Carpet{

protected int area = 0;
protected double unitPrice = 0;
protected double totalPrice = 0.0;
protected String carpetID;

public Carpet(String id, double thisPrice){
    carpetID = id;
    unitPrice = thisPrice;
}

public String getCarpetId(){
    return carpetID;
}

public String toString(){
    String carpet = new String("\n" + "The CarpetId:\t\t" + getCarpetId() + "\nThe Area:\t\t" + area + "\nThe Unit Price\t\t" + unitPrice + "\nThe Total Price\t" + totalPrice + "\n\n");
    return carpet;
}

public abstract void computeTotalPrice();

} 
```

子类是

```
public class CircleCarpet extends Carpet{

private int radius;

public CircleCarpet(String id, double priceOf, int rad){
    radius = rad;
    super.unitPrice = priceOf;
    computeTotalPrice();

}

public void computeTotalPrice(){
    super.area = radius * radius * 3;
    super.totalPrice = area * unitPrice;
}

public String toString(){
    String forThis = new String("\nThe Carpet Shape:\tCircle\nThe radius:\t\t" + radius + "\n");
    return forThis + super.toString();
}

} 
```

但是每当我尝试编译子类时，我都会收到错误

```
11: error: constructor Carpet in class Carpet cannot be applied to given types;
public CircleCarpet(String ID, double priceOf, int rad){
                                                       ^

 required: String,double
  found: no arguments
  reason: actual and formal argument lists differ in length
1 error

Tool completed with exit code 1 
```

我不知道该怎么做才能修复它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T15:14:20.637

由于您的超类没有，因此您需要使用[**super()**](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)`no-args default constructor,`从子类构造函数中显式调用超类构造函数。并不是说这必须是子类构造函数中的第一行。[](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

 **```
 public CircleCarpet(String ID, double priceOf, int rad){
    super(ID, priceOf)
    radius = rad;
    super.unitPrice = priceOf;
    computeTotalPrice();

} 
```

**一个建议：**

遵循 Java 命名约定，变量名应为驼峰式。i.，在这种情况下`id`比 更合适`ID`。**

# wcf - WCF BufferManager ReturnBuffer 与 Clear

> ID：14649293
> 
> 赞同：1
> 
> 时间：2013-02-01T15:13:33.477
> 
> 标签：wcf, buffer-manager

我在我的 WCF 服务中使用 BufferManager。我创建了自己的类来包装实现 IDisposable 的 BufferManager。现在我的 Dispose 方法如下所示：

```
public void Dispose()
    {
        this.bufferManager.Clear();
    } 
```

**我的问题：**这是否与在经理已占用的所有缓冲区上调用 ReturnBuffer 完成相同的事情？

只是为了一些背景：我在以下方法中使用 BufferManager：

```
public byte[] ReadAllBufferedBytes(string filePath)
    {
        using (var fileStream =
            new FileStream(filePath, FileMode.Open, FileAccess.Read))
        {
            byte[] buffer = this.bufferManager.TakeBuffer((int)fileStream.Length);

            fileStream.Read(buffer, 0, buffer.Length);

            return buffer;
        }
    } 
```

我这样做的原因是因为我不断收到 OutOfMemory 异常，这会破坏服务。

主机服务器有 3 GB 内存。该服务处于 InstanceContextMode.Single 模式，因此一次处理一个图像。图像以字节数组的形式接收 - 最大的可能是 100MB，但通常要小得多 - 转换，然后作为字节数组返回。大对象堆上有很多内容，并且图像大小变化很大。

我想知道问题是否是堆碎片。

随着文档的每一页被转换，它被附加到磁盘上的临时文件中。转换后，我将整个转换后的文件从磁盘读取到一个字节数组中并返回给客户端。

标准的 File.ReadAllBytes 方法在从文件中读取时会创建一个新的字节数组，由于我正在使用的图像大小，这不可避免地会出现在 LOH 上（我假设这就是发生的情况）。我创建了 ReadAllBufferedBytes 方法来做同样的事情，但缓冲字节数组并让 BufferManager 在释放缓冲区时返回它。

另一个问题是：我什至需要做这一切吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:10:35.007

The BufferManager is normally used in scenarios where you must prevent GC pressure - where there are **a lot** of small `byte[]` assignments, like when receiving or sending data on a very low level (e.g. sockets). The emphasis here is on a lot, otherwise the GC should be able to handle the memory allocations just fine.

To prevent the loading of the entire converted document file into memory you should use the FileStream directly (without reading it's entire content into memory - a byte[]) in combination with the [streamed (response)](http://msdn.microsoft.com/en-us/library/ms731913.aspx) [TransferMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.transfermode.aspx), if possible.

# charts - 缺少表格行的自定义轴标签

> ID：14649297
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:44.593
> 
> 标签：charts, google-apps-script, axis-labels

有一个包含两列的电子表格：日期、整数。并且缺少一些行。
当我手动*插入图表*时，我看到长的水平线而不是丢失的行。
但是当我这样做时：

```
 var sheet = SpreadsheetApp.openById(id).getSheets()[0];
  var table = Charts.newDataTable().
    addColumn(Charts.ColumnType.STRING, "Date").
    addColumn(Charts.ColumnType.NUMBER, "asd");
  sheet.getSheetValues(sheet.getLastRow() - 9, 1, 10, 2).forEach( function(line) {
    var date = new Date(line[0]);
    table.addRow( [
      date.getDate() + " " + ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][date.getMonth()],
      line[1]
    ] );
  } );
  var chart = Charts.newLineChart().
    setDataTable(table).
    setXAxisTitle("Date").
    setYAxisTitle("asd").
    setTitle("asd").
    build();
  var temp = "<img src=\'cid:asd\'/>";
  MailApp.sendEmail("asd@gmail.com", "asd", temp, {
    htmlBody: temp,
    inlineImages: { asd: chart }
  } ); 
```

X 轴被折叠，因为它的值实际上不是日期，因为我重新格式化了它们。

![在此处输入图像描述](../Images/9cc56219852b832fa8719272a45386a8.png) （红线是在 mspaint 中制作的，以集中您的注意力）

使用水平线（如电子表格）和自定义格式的日期（如电子邮件图像）的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:45:58.473

无论何时执行此操作，在这种情况下都会采用常规行为在可用值之间建立连接。

如果您更改图表的类型，它将更恰当地说明缺失值；条形图或其他类型的图表可以更好地说明缺失值。

# perl - 文件中的唯一元素 - perl

> ID：14649298
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:44.400
> 
> 标签：perl

我想从我将通过电子邮件进一步发送的文件中获取独特的元素（行）。我尝试了两种方法，但都不起作用：

第一种方式：

```
my @array = "/tmp/myfile.$device";
my %seen = ();
my $file = grep { ! $seen{ $_ }++ } @array; 
```

第二种方式：

```
my $filename = "/tmp/myfile.$device";
cat $filename |sort | uniq > $file 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:17:47.067

您似乎忘记阅读文件了！

```
open(my $fh, '<', $file_name)
   or die("Can't open \"$file_name\": $!\n");

my %seen;
my @unique = grep !$seen{$_}++, <$fh>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:16:53.180

您需要打开文件并阅读它。

"cat" 是一个 shell 命令而不是 perl

尝试这样的事情

```
my $F;
die $! if(!open($F,"/tmp/myfile.$device"));
my @array = <$F>;
my %seen = (); my $file = grep { ! $seen{ $_ }++ } @array; 
```

如果文件未正确打开，`die $!`将停止程序并显示错误； `@array=<$F>`将上面打开的文件中的所有数据读取`$F`到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:45:09.253

如果你装配参数列表，你可以让 Perl 自动打开文件，使用：

```
perl -n -e 'BEGIN{@ARGV=("/tmp/myfile.device");} print if $count{$_}++ == 0;' 
```

# android - Android Preference Screen 看起来像设备管理员

> ID：14649299
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:13:46.940
> 
> 标签：android, preference

我想在我的偏好屏幕中实现设备管理员的主题，请参见下图以显示我的意思。

[http://i.stack.imgur.com/TZHnF.png](http://i.stack.imgur.com/TZHnF.png)

我遵循了 sdk 中的示例，但最终得到了这样的结果

[http://i48.tinypic.com/b4xkl0.png](http://i48.tinypic.com/b4xkl0.png)

我怎样才能获得第一张图片？

**编辑：**我发现它实际上是一个设备默认主题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:53:35.913

我认为要获得第一个视图，您需要使用 MasterDetail View。左边的片段是一个列表视图（类别），右边的视图是一个详细的视图，又是一个带有类别详细项目的 ListView。

查看[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)上的 MasterDetailView 示例。

我不确定 Preferences API 是否直接支持这一点。

# java - 如何在JPanel中的特定位置绘制一条垂直线？

> ID：14649301
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:53.117
> 
> 标签：java, swing, jpanel, paintcomponent, japplet

我正在尝试使用`JPanel`. 为了提供相对于时间线的当前视频帧的指示，我需要能够在此类`TimeLinePanel`扩展的特定 x 坐标处绘制一条垂直线`JPanel`。到目前为止，我在使用 paint() 函数或覆盖`paintComponent()`. 当我尝试在我的`NewJApplet`（此类扩展`JApplet`）类中使用 paint() 函数时，会绘制垂直线，但`JPanel`我正在使用的时间线消失（边框不再可见）。此外，我听说使用这种`paint()`方法并不可取。结果，我尝试覆盖`paintComponent()`方法，`JPanel`并尝试从`NewJApplet`，但它不会`timeLinePanel1`随垂直线更新。

任何帮助，将不胜感激。

以下是我到目前为止的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package helloworld;

import java.awt.GridLayout;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/**
 *
 * @author Justin
 */
public class NewJApplet extends javax.swing.JApplet {

    /**
     * Initializes the applet NewJApplet
     */
    @Override
    public void init() {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */

        try {
            /*
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
            * */
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        //</editor-fold>

        /* Create and display the applet */
        try {
            java.awt.EventQueue.invokeAndWait(new Runnable() {
                public void run() {
                    initComponents();
                    timeLinePanel1.paintComponent(timeLinePanel1.getGraphics());
                    timeLinePanel1.repaint();
                }
            });
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /**
     * This method is called from within the init() method to initialize the
     * form. WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        myPanel = new javax.swing.JPanel();
        timeLinePanel1 = new helloworld.TimeLinePanel();

        myPanel.setBackground(new java.awt.Color(51, 51, 51));

        javax.swing.GroupLayout myPanelLayout = new javax.swing.GroupLayout(myPanel);
        myPanel.setLayout(myPanelLayout);
        myPanelLayout.setHorizontalGroup(
            myPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(myPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(timeLinePanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 600, Short.MAX_VALUE)
                .addContainerGap())
        );
        myPanelLayout.setVerticalGroup(
            myPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, myPanelLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(timeLinePanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(myPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(0, 0, 0))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(myPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JPanel myPanel;
    private helloworld.TimeLinePanel timeLinePanel1;
    // End of variables declaration
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package helloworld;

import java.awt.GridLayout;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/**
 *
 * @author Justin
 */
public class TimeLinePanel extends javax.swing.JPanel {

    /**
     * Creates new form TimeLinePanel
     */
    public TimeLinePanel() {
        initComponents();
    }

    @Override
    protected void paintComponent(Graphics g) {
        Rectangle r = new Rectangle(3, 0, 1, 25);
        g.fillRect(25, 0, 1, 25);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 200, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 25, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JPanel jPanel1;
    // End of variables declaration
} 
```

这是我尝试运行小程序时得到的。理想情况下，我想在白框`timeLinePanel1`（在 JPanel 中绘制垂直线。

![在此处输入图像描述](../Images/c40e8cb9005c31cf66da29bfb7167783.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:27:21.327

您需要调用 super.paintComponent 来绘制面板中的所有内容：

```
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.fillRect(25, 0, 1, 25);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:31:13.233

我不确定这是正确的答案，但您可能忘记设置颜色？

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.red);
    Rectangle r = new Rectangle(3, 0, 1, 25);
    g.fillRect(25, 0, 1, 25);
} 
```

# android - 测量从安卓手机屏幕到用户面部的距离

> ID：14649302
> 
> 赞同：6
> 
> 时间：2013-02-01T15:13:55.610
> 
> 标签：android, distance, face-detection

是否可以测量您的 android 手机屏幕和用户面部之间的距离？

我想根据你的脸和手机屏幕之间的距离来改变你的安卓应用屏幕的缩放比例。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-09-04T10:17:50.920

是的，只要您的设备中有前置摄像头，这是可能的。这或多或少是我的学士论文。

这是代码 [https://github.com/philiiiiiipp/Android-Screen-to-Face-Distance-Measurement](https://github.com/philiiiiiipp/Android-Screen-to-Face-Distance-Measurement)

以及结果视频[https://www.youtube.com/watch?v=-6_pGkPKAL4](https://www.youtube.com/watch?v=-6_pGkPKAL4)

和论文[A new context - Screen to Face distance 1 1.pdf](https://github.com/philiiiiiipp/Android-Screen-to-Face-Distance-Measurement/blob/master/A%20new%20context%20-%20Screen%20to%20Face%20distance%201%201.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-07T20:41:44.933

我在博客上的一篇文章中描述了如何计算屏幕到面部的距离。该算法基于眼睛之间的距离。脸部越远，相机上出现的眼睛之间的距离就越小。

[https://ivanludvig.github.io/blog/2019/07/20/calculating-screen-to-face-distance-android](https://ivanludvig.github.io/blog/2019/07/20/calculating-screen-to-face-distance-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:33:05.433

我不相信这是可能的。

1.  并非所有 Android 设备都配备接近传感器
2.  这些传感器仅用于检测您的脸颊是否靠近手机。

*编辑以下 OP 评论*：从技术上讲，您确实可以使用一些图像识别算法来根据来自前置摄像头的输入来计算屏幕面部距离。

但：

1.  并非所有 Android 设备都有前置摄像头。
2.  如果您没有图像处理方面的背景，从头开始实现这一点将非常复杂。

# rally - 413 错误 FULL HEAD 查询 URL 太大 Rally

> ID：14649305
> 
> 赞同：2
> 
> 时间：2013-02-01T15:13:59.583
> 
> 标签：rally

我正在使用应用程序 SDK 2.0。我有以下代码来检索项目的前 100 名团队成员的任务，以进行特定的迭代

```
 //getting the first 100 elements of the owners Array
                owners = Ext.Array.splice(owners,0,100);

                //Initial configuration of the filter object
                var ownerFilter = Ext.create('Rally.data.QueryFilter', {
                    property: 'Owner.DisplayName',
                    operator:'=',
                    value: owners[0]
                });

                /*Creating the filter object to get all the tasks for 100 members in that project*/
                 Ext.Array.each(owners,function(member){
                 ownerFilter = ownerFilter.or(
                 Ext.create('Rally.data.QueryFilter',{
                 property: 'Owner.DisplayName',
                 operator:'=',
                 value: member

                 }));
                 });

                //Iteration Filter for the Object
                var iterationFilter = Ext.create('Rally.data.QueryFilter', {
                    property: 'Iteration.Name',
                    operator:'=',
                    value: 'Iteration 4.2'
                });

                var filter = ownerFilter.and(iterationFilter);

                Rally.data.ModelFactory.getModel({
                type: 'Task',
                success: function(model) {
                    var taskStore = Ext.create('Rally.data.WsapiDataStore', {
                        model: model,
                        fetch:true,
                        limit:Infinity,
                        pageSize:200,
                        filters:[filter],
                        autoLoad:true,
                        projectScopeDown:true,
                        listeners:{
                            load:function(store,data,success) {
                                Ext.Array.each(data, function(record){
                                   console.log(record.data);
                                });
                            }
                        }

                    });

                }
            }); 
```

此代码给我一个 413 错误，因为查询的 URL 太大。请求 URL 包含项目所有 100 个成员的名称。我该如何解决这个问题？是否有任何有效的过滤选项可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:08:17.177

Team Membership 是一个难以过滤 Artifacts 的属性，因为它作为属性驻留在 Users 上，并且是一个不能在 Queries 中使用的集合。

在这种情况下，您最好做更多的过滤客户端。由于团队成员“近似”或关联到项目，您可能希望从过滤项目上的任务开始，即 (Project.Name = "My Project")。然后通过循环并确保每个任务由所有者集合中的团队成员拥有来缩小客户端的范围。

或者，您可能希望在您的任务上使用标签来反映团队名称。然后，您可以通过执行以下查询来过滤您的任务服务器端：

（Tags.Name 包含“我的团队”）

我知道这些不是理想的选择，也可能不是您正在寻找的答案，但是，它们是避免构建大量基于用户名的查询的一些想法。

# ftp - psftp 批处理脚本不起作用

> ID：14649306
> 
> 赞同：0
> 
> 时间：2013-02-01T15:13:59.453
> 
> 标签：ftp, batch-file, windows-xp, sftp, putty

我正在尝试使用 putty sftp 从 windows xp 运行 .bat 文件。我的代码如下。出于某种原因，我不断收到“拒绝访问”。

烦人的是，当我将这些内容逐行复制>粘贴到 cmd 提示符中时，它工作正常！我不确定我的代码是否还有一些错误，或者 ftpsite.com 是否可能不接受来自批处理文件的传入消息？

```
 @echo off  
    psftp user@ftp.ftpsite.com -pw abc#!123  
    cd Data/out  
    get file.csv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:57:51.593

PSFTP 的命令必须放在一个 SCRIPT 文件中，如下所示：

文件名：myscript.scr

```
cd Data/out
get file.csv
exit 
```

然后你调用它：

```
@echo off
psftp user@ftp.ftpsite.com -pw abc#!123 -b myscript.scr 
```

# jquery - 在两个不同的类中切换一个数据值

> ID：14649310
> 
> 赞同：0
> 
> 时间：2013-02-01T15:14:13.480
> 
> 标签：jquery, css

我正在开发一个演示面板，它应该切换两个不同的背景图像。您单击一个链接并更改了两个 CSS 类。该链接包含 data-field="bg1" 并且此值需要更改 css 类：top-bg0 和 bottombg0。

这是一个小提琴设置：http: **[//jsfiddle.net/wpcustoms/ktD3f/](http://jsfiddle.net/wpcustoms/ktD3f/)**

有人可以帮我处理javascript吗？

到目前为止，这就是我想出的：

```
$('.panel ul li a').click(function(){
    var bgname = $(this).data('bg');
    $('#headerbar').removeClass('top-bg0').toggleClass(bgname);
    $('#footerbar').removeClass('bottom-bg0').toggleClass(bgname);
}); 
```

它当前删除了 top-bg0 部分并将其替换为数据字段 (bg1,2,3) 单击另一个链接会添加另一个类，因此它最终以 class="bg1 bg2 bg3" 而不是更改 top-X 和底部 X 值。有没有办法在类字符串中找到一些东西并替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:21:41.333

如果您的两个元素每个只有一个类，那么您可以简单地使用无参数版本的`.removeClass()`来删除当前类是什么，然后添加正确的类：

```
$('.settings-panel .bg_pattern ul li').click(function(){
    var bgname = $(this).data('bg');
    $('#headerbar').removeClass().addClass('top-' + bgname);
    $('#footerbar').removeClass().addClass('bottom-' + bgname);
}); 
```

[更新了 jsFiddle 演示](http://jsfiddle.net/ktD3f/1/)

# c# - 如何仅获取文件路径名的一部分？

> ID：14649318
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:14:25.363
> 
> 标签：c#

这是行：

```
string t = Path.GetDirectoryName(file1); 
```

结果是：

```
C:\\Users\\bout0_000\\AppData\\Local\\Extracting_Frames\\Extracting_Frames\\dat file\\converted.avi\\histogramValues.dat 
```

我希望它只包含：`converted.avi`。

PS：`converted.avi`不是文件名而是路径名。我想获取路径的最后一部分，即没有文件名的最后一个子目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:16:01.877

如果`converted.avi`是文件名然后使用这个

```
string t = Path.GetFileName(file1); 
```

文档：http: [//msdn.microsoft.com/en-gb/library/system.io.path.getfilename.aspx](http://msdn.microsoft.com/en-gb/library/system.io.path.getfilename.aspx)

但是，如果这是目录的名称，您可以从已有的结果中提取最后一个反斜杠之后的所有内容。例如

```
var path = Path.GetDirectoryName(fileName);
var parentFolder = path.Substring(path.LastIndexOf('\\')+1); 
```

现场示例：[http ://rextester.com/RYPMI91227](http://rextester.com/RYPMI91227)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:16:09.417

你想要 FileInfo.Name：

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo.name(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.name(v=vs.80).aspx)

所以像：

```
var fileInfo = new FileInfo(file1);
var fileName = fileInfo.Name; // this will only contain converted.avi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:16:50.293

使用[Path.GetFilename](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)将返回文件名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:16:58.950

使用文件信息

```
FileInfo info = new FileInfo(yourFilePath);
var filename = info.Name; 
```

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:17:39.827

使用 Path 类的 GetFileName() 函数

# c# - 在第一个中继器项目上触发 Click 事件

> ID：14649321
> 
> 赞同：0
> 
> 时间：2013-02-01T15:14:35.527
> 
> 标签：c#, asp.net, click, repeater, eventtrigger

我正在制作一个画廊网站。它还绘制了数据库中可用的摄影会话。

但是当用户第一次打开页面时，没有选择任何摄影会话。所以页面是空的。我想自动为用户选择第一个会话。我通过选择数据库中的第一条记录来做到这一点。但我真的希望我可以在`Page_load`自动点击中继器内的第一个项目的内部编写代码。

转发器项目当然是动态生成的。所以我不知道我是否可以使用 JavaScript 来实现这一点。

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    DataSet dst = new DataSet();
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString))
    {
        SqlDataAdapter adbtr = new SqlDataAdapter();                
        adbtr.SelectCommand = new SqlCommand("SELECT * FROM dbo.Select_gallery_names_FN()", con);
        try
        {
            int result = adbtr.Fill(dst);
            if (result == 0)
            {
                return;
            }
            cat_repeater.DataSource = dst;
            cat_repeater.DataBind();
        }
        catch(Exception ex)
        {
            Response.Write(ex.Message);
        }

    }

    using (SqlConnection img_con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString))
    {
        SqlDataAdapter img_adbtr = new SqlDataAdapter();
        img_adbtr.SelectCommand = new SqlCommand("select * from dbo.Select_gallery_cat_FN(@img_cat)", img_con);
        img_adbtr.SelectCommand.Parameters.Add("@img_cat",SqlDbType.NVarChar,8000).Value = dst.Tables[0].Rows[0][0].ToString();
        DataSet img_dst = new DataSet();                
        try
        {
            img_adbtr.Fill(img_dst);
            slider_repeater.DataSource = img_dst;
            slider_repeater.DataBind();
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }                
    }            
}

protected void cat_repeater_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString))
    {
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandText = "select * from dbo.Select_gallery_cat_FN(@img_cat)";
        cmd.Parameters.Add("@img_cat", SqlDbType.NVarChar,8000).Value = ((LinkButton)e.CommandSource).Text;
        con.Open();
        slider_repeater.DataSource = cmd.ExecuteReader();
        slider_repeater.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:43:25.880

你可以做这样的事情。

```
<script>
    $(document).ready(function() {
       $('#cat_repeaterId').find('tr:first').click();
    });
</script> 
```

根据您是否要单击第一行内的按钮，可能不得不弄乱javascript。

# c++ - reinterpret_cast - 奇怪的行为

> ID：14649332
> 
> 赞同：4
> 
> 时间：2013-02-01T15:14:50.507
> 
> 标签：c++, casting, constants, reinterpret-cast

我遇到了与 reinterpret_cast 相关的奇怪错误。只需看下面的代码：

```
int* var;
reinterpret_cast<void const **>(&var); 
```

VSC++2010 中的错误：错误 C2440：“reinterpret_cast”：无法从“int **”转换为“const void **”

gcc 4.1.2 中的错误：从类型“int**”到类型“const void**”的 reinterpret_cast 抛弃了 constness

gcc 4.6.2 中的错误：从类型“int**”到类型“const void**”的 reinterpret_cast 丢弃了限定符

有谁知道为什么编译器说我正在抛弃 const 。我和我的几个同事都不知道这是怎么回事。

感谢帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T15:45:19.097

C++03 标准的第 5.2.10 节讨论了 reinterpret_cast 可以做什么。它明确指出“reinterpret_cast 运算符不应抛弃 constness”。

C++03 标准的第 5.2.11 节定义了弃用 constness。那里使用的表示法有点令人困惑，但它基本上表明，如果给定的限定没有隐式转换，则两种类型之间的强制转换会“抛弃常量”。

在您的情况下，您正在尝试将 a 转换`int **`为 a `void const**`。编译器问“我可以在`T **`和之间隐式转换`T const**`吗？”，答案是否定的，所以它说你正在抛弃常量。

这里的逻辑是 reinterpret_cast 用于处理更改类型，而不是更改限定符（这就是 const_cast 的用途）。因此，如果您要求它做一些您需要 const_cast 的事情，它会拒绝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:46:46.363

要添加/删除`const`，请使用`const_cast`。

要处理令人困惑的转换错误，请一步一步做：

```
int* var;
int** v2 = &var;
int const** v3 = const_cast<int const**>(v2);
void const** v4 = reinterpret_cast<void const**>(v3); 
```

请注意， a`int const**`和 a`int**`是非常不同的类型，在它们之间进行转换是危险的——比`void*`<->更危险`int*`。

假设你有一个`int** bob`. `int const** alice`然后你将它传递给一个接受 a到a 的函数`const_cast`。

在该函数中，他们将指向存储在只读内存中的 int 的指针分配给`*alice`-- 完全合法。

在函数之外，您检查`bob`并且`*bob`是否有效，然后分配给`**bob`，并且您只是尝试写入只读内存。

# javascript - checking image existance from client side

> ID：14649333
> 
> 赞同：1
> 
> 时间：2013-02-01T15:14:52.990
> 
> 标签：javascript, jquery, file-exists

I am developing one image gallery website, which may have thousands of photos in future. All the images comes from other Website / API or user uploads.

User uploaded images

`<img src="../images/example.jpg" alt="" />`

External Images

`<img src="http://example.com/xyz.jpg" alt="" />`

Let say, image deleted from external website. Is there a way to check photo exists from client side using jQuery / JavaScript etc?

What I think is

i) I hotlink the image from external website

ii) Image deleted from external website, when website first load, jquery will send me the dead link info to server using ajax etc

iii) I will fix the link.

Thanks in advance...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:19:24.103

You could use the "onerror" event on your external images and create a server side script to handle the error and return a generic "image not found" image while you fix the issue.

Something like ...

```
onerror="this.src='/fiximage.php?q='+this.src;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:20:54.940

You could do something like this...

```
$(function() {
    $(document).on("error", "img", function() {
        // do something with $(this) here
    });
}); 
```

That would detect broken images and allow you to do something about it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:13:31.030

You can use `onerror` event in this case.

```
var imgs = document.getElementsByTagName("img"),
    img, i = 0;
while (img = imgs[i++]) {
    img.onerror = function() {
        // just an example for error reporting
        Ajax.send("POST /image_error.php", {src:img.src});
        // change img src
        img.src = "images/error.jpg";
    };
} 
```

# c# - 程序不要求管理员权限，而已经使用清单

> ID：14649338
> 
> 赞同：1
> 
> 时间：2013-02-01T15:15:04.940
> 
> 标签：c#, .net, manifest, administrator

我的程序没有要求管理员权限，而我的项目中确实包含清单文件，我正确加载了它，它只是不想修复我的代码中的错误。我会发布清单文件，但我几乎可以肯定它很好：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <!-- If your application is designed to work with Windows 7, uncomment the following supportedOS node-->
  <!--<supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>-->

</application> 
```

</dependentAssembly> </dependency>-->

这些是我在项目中使用的设置：

![设置](../Images/6997e57367b73ae1cd730a22dd795c58.png)

我得到的错误：

![错误](../Images/afd86c7c0befe4bb2625caf91ba0c924.png)

翻译它说：“Win32 异常未处理，并非所有引用的权限或组都分配给调用者。”

我可以有任何帮助，以便我可以让我的程序要求管理员权限，以便它可以正确运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:54:33.730

你需要修改`<requestedExecutionLevel>`

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

请参阅此处：[如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)

# jquery - 如何在页面加载后立即显示本地存储中的变量。JQuery/JQuery Mobile

> ID：14649339
> 
> 赞同：0
> 
> 时间：2013-02-01T15:15:08.067
> 
> 标签：jquery, jquery-mobile

我已成功在本地存储中放置了一个变量我现在正试图在下一页加载后立即显示该变量，我不确定如何在页面转换后立即执行此脚本。

我的代码如下

```
 <script type="text/javascript">
  $("#home").on('pageinit ', function() {

            //alert('pageinit');
            document.getElementById("output").innerHTML="Name: " +localStorage.userName;            

      });

  </script>
  </head><!-- Main Page -->

  <div id="home" data-role="page" data-title="home">
    <div data-role="header">
      <h1>Home Page</h1>
    </div>
  <!-- /header -->

  <div data-role="content">

    <div id='customer'> Customer Name </div>
    <p id="output"></p>
    <a href="index.html" data-role="button">Alarm</a> <a href="index.html" data-role="button">Reports</a> <a href="index.html" data-role="button">Summary</a> </div>
  <!-- /content -->

  <div data-role="footer" data-position="fixed" class="ui-bar"> <a href="index.html" data-role="button" >Logout</a> <h4>&copy;Home Page</h4> </div>

  <!-- /footer -->

  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:08:51.577

[您可以使用此处](http://jquerymobile.com/test/docs/api/events.html)记录的 pageChange 事件。

> 在 changePage() 请求完成将页面加载到 DOM 并且所有页面转换动画都完成后触发此事件。

# silverlight - 将多个 IQueryable 合并在一起 - Silverlight

> ID：14649343
> 
> 赞同：0
> 
> 时间：2013-02-01T15:15:19.300
> 
> 标签：silverlight, ria, iqueryable, domainservices

偷看，

我是 Silverlight 的重生处女，所以请多多包涵。我有两个单独的 DomainServices，指向两个不同的 SQL 数据库服务器。在这些域服务中，我在每个域服务中设置了一些 IQueryable。

我需要将两个 IQueryables 从单独的 DomainServices 合并在一起。我确信这必须是可行的。

下面是两个域服务。

我想将 GetCustomCallLogs（来自 HEATLiveDomainService）与 GetTblCallsLogged（来自 HeatDomainService）合并。GetCustomCallLogs 中的键是 CallID，GetTblCallsLogged 中的键是 RecID。

如果可能的话，我知道我需要创建一个新类型来考虑两个连接表中的任何字段。

希望我已经解释了我的情况，并且我不是愚蠢的。

提前致谢

```
 public class HEATLIVEDomainService : LinqToEntitiesDomainService<HeatIT9_LiveEntities>
{

    // TODO:
    // Consider constraining the results of your query method.  If you need additional input you can
    // add parameters to this method or create additional query methods with different names.
    // To support paging you will need to add ordering to the 'Assignees' query.
    public IQueryable<Assignee> GetAssignees()
    {
        return this.ObjectContext.Assignees;
    }

    // TODO:
    // Consider constraining the results of your query method.  If you need additional input you can
    // add parameters to this method or create additional query methods with different names.
    // To support paging you will need to add ordering to the 'CallLogs' query.
    public IQueryable<CallLog> GetCallLogs()
    {
        //            return this.ObjectContext.CallLogs.Where(c => DateTime.Parse(c.ClosedDate).Year == 2012 && c.CallStatus == "Closed" && c.ClosedBy.Length > 0);
        return this.ObjectContext.CallLogs.Where(c => c.CallStatus == "Closed" && c.ClosedDate.Substring(0, 4).Equals("2013"));
    }

    public IQueryable<CallLog> GetCallLogsLastThisYear()
    {
        return this.ObjectContext.CallLogs.Where(c => c.CallStatus == "Closed" && (c.ClosedDate.Substring(0, 4).Equals("2012") || c.ClosedDate.Substring(0, 4).Equals("2013")));
    }

    public IQueryable<CustomCallLog> GetCustomCallLogs(string year)
    {
        var result = from i in this.ObjectContext.CallLogs  
        join p in this.ObjectContext.Assignees on i.ClosedBy equals p.LoginID  
        where i.CallStatus == "Closed" && i.ClosedDate.Substring(0, 4) == year
        select new CustomCallLog
        { 
            Score = 
            CallLog = i.CallID, 
            Name = p.Assignee1, 
            Yr = year,
            Mth = i.ClosedDate.Substring(5, 2), 
            GroupName = p.GroupName
        };
        return result;
    }

    public IQueryable<CustomClosedJobs> GetCustomClosedJobs()
    {
        var result = from i in this.ObjectContext.CallLogs
                     where i.CallStatus == "Closed" && i.ClosedDate.Substring(0, 4) =="2012"
                     group i by i.ClosedDate.Substring(5,2) into y
                     select new CustomClosedJobs
                     {
                         Type = "heat",
                         ClosedCalls = y.Count(),
                          Mth =y.Key
                     };
        return result;
    }

    // TODO:
    // Consider constraining the results of your query method.  If you need additional input you can
    // add parameters to this method or create additional query methods with different names.
    // To support paging you will need to add ordering to the 'Subsets' query.
    public IQueryable<Subset> GetSubsets()
    {
        return this.ObjectContext.Subsets;
    }
}

 public class HEATDomainService : LinqToEntitiesDomainService<FEEDBACKPRDEntities1>
{

    // TODO:
    // Consider constraining the results of your query method.  If you need additional input you can
    // add parameters to this method or create additional query methods with different names.
    // To support paging you will need to add ordering to the 'qryStoringLogs' query.
    public IQueryable<qryStoringLog> GetQryStoringLogs()
    {
        return this.ObjectContext.qryStoringLogs.OrderBy(e => e.monthno);
    }

    public IQueryable<tblStoringLog> GetTop100Logs()
    {
        return this.ObjectContext.tblStoringLogs.OrderByDescending(e => e.responsetime).Take(100);
    }

    public IQueryable<tblStoringLog> GetLogCount(DateTime s, DateTime e)
    {
        return this.ObjectContext.tblStoringLogs.Where(x => x.responsetime >= s &&  x.responsetime <= e);
    }

    public IQueryable<qryStoringLog> GetLogs(int year, int mth)
    {
        return this.ObjectContext.qryStoringLogs.Where(e => e.Month.Equals(mth) && e.yr.Equals(year));
    }

    public IQueryable<qryStoringLog> GetLogsForYear(int year)
    {
        return this.ObjectContext.qryStoringLogs.Where(e => e.yr.Equals(year)).OrderBy(e => e.monthno);
    }

    public DateTime GetFirstDate()
    {
        return (DateTime)this.ObjectContext.tblStoringLogs.OrderBy(e => e.responsetime).First().responsetime;
    }

    public DateTime GetLastDate()
    {
        return (DateTime)this.ObjectContext.tblStoringLogs.OrderByDescending(e => e.responsetime).First().responsetime;
    }

    public IQueryable<tblCallLogged> GetTblCallLoggeds()
    {
        return this.ObjectContext.tblCallLoggeds;
    }

    public IQueryable<tblStoringLog> GetTblStoringLogs()
    {
        return this.ObjectContext.tblStoringLogs;
    }

    [Query(IsComposable = false)]
    public IQueryable<qryStoringLog> GetTblStoringLogsStatus(int statusid)
    {
        return this.ObjectContext.qryStoringLogs.Where(e => e.statusid == statusid);
    }

    public IQueryable<stResponsesLife_Result> LifeTimeResponses()
    {
        return this.ObjectContext.stResponsesLife().AsQueryable();
    }

    public IEnumerable<CustomLifetime> GetCustomLifeTime()
    {
        var result = from i in this.ObjectContext.stResponsesLife().ToList()
                     select new CustomLifetime
                     {
                         Dates = i.Dates,
                         Vals = (int)i.Vals
                     };
        return result;
    }

    public int GetAllResponses()
    {
        return this.ObjectContext.qryStoringLogs.Count();
    }

} 
```

警告：不能有链接的服务器，所以在源（SQL Server）上这样做是不可能的。无法创建 SP 并使用 OpenQuery（我可以，但我想学会正确地做到这一点），因为我确信这不是正确的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:46:36.277

您可能需要第三种类型来包装从每个服务返回的两种不同类型，但这取决于您希望如何使用它。

ItemsControl 不会关心集合中的类型（列表框、组合框等），但 GridView 类型控件可能很挑剔。

使用 linq，可以简单地合并两个列表。像下面这样的东西应该可以解决问题：

```
collection1.Select(o => (object)o).Concat(collection2.Select(o => (object)o)); 
```

Select and Cast 是为了让查询创建适当的通用集合。

这也可以调整为将转换合并到您的包装器类型。即，不要强制转换为对象，而是返回包装类的新实例。

如果合适，您甚至可以使用联合。

把它们放在一起：

```
collection1.Select(o => new MyWrapperType(o))
    .Union(collection2.Select(o => new MyWrapperType(o))); 
```

# android - 画线固定坐标

> ID：14649346
> 
> 赞同：0
> 
> 时间：2013-02-01T15:15:31.293
> 
> 标签：android, android-canvas

我有一个问题，我已经尝试解决这个问题，但我还没有找到解决方案。

我有两列图像。我想通过每个图像的中点加入他们。我遇到的问题是附着点向下移动，就像图像一样 ![我的问题的例子](../Images/fe98bf067f04c93a6ad1895d5d3d3b53.png)

我有一个“主”类，我有一个内部类：公共类 DrawView 扩展了具有属性的 LinearLayout：private Paint paint = new Paint(); 我设置了下一个值：paint.setColor(Color.BLACK); 油漆.setStrokeWidth(6);

我使用下一个代码来绘制线条：

```
public void onDraw(Canvas canvas) {
    }

    @SuppressLint("UseValueOf")
    @Override
    public void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if (activateDraw) {
            for (int i = 0; i < 5; i++) {
                             //I not include the color selection.
                    x1= Image[i].x + Image[i].width;
                    y1=Image[i].y+ (new Double(Image[i].height / 2).intValue()));

                    x2=ImagePr[i].x;
                    y2=ImagePr[i].y + (new Double((ImagePr[i].height) / 2).intValue()));
                    canvas.drawLine(x1, y1, x2, y2, paint);
            }
            activateDraw = false;
        }
    } 
```

要设置 x 和 y 值，我使用以下方法：

```
public void setData(ImageView img) {
    image = img;
    int[] values = new int[2];
    image.getLocationInWindow(values);
    x = values[0];
    y = values[1];
    width = image.getWidth();
    height = image.getHeight();
} 
```

在主类中，我有属性： Canvas auxCanvas = new Canvas(); 当我想画线时，我执行 onDraw(auxCanvas) 方法。为什么线条不绘制连接“中点”？

任何人都可以帮助我吗？谢谢！

@Shaunak 抱歉，失败了。我已经删除了它并没有影响，问题仍然存在。谢谢！

@anthropomo 我尝试了您的更改，但问题仍然存在。

我不明白为什么在模拟器中似乎可以正常工作，但在设备上却不行。

解决方案：

（我以为我已经写了答案，对不起）解决方案很简单。该应用程序的目标用户是 6-8 岁的学生，所以我决定隐藏状态栏，上面的代码可以完美运行，无需做任何更改！隐藏状态栏： [隐藏通知栏](https://stackoverflow.com/questions/4222713/hide-notification-bar)

[如何使用现有的自定义主题在 XML 中隐藏 Activity 的标题栏](https://stackoverflow.com/questions/2591036/how-to-hide-the-title-bar-for-an-activity-in-xml-with-existing-custom-theme)

如果其他人想显示状态栏，我想你需要减去状态栏高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:20:06.327

参考：http: [//developer.android.com/reference/android/util/DisplayMetrics.html#density](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)

这样的事情对你有用吗？：

```
float d = getResources().getDisplayMetrics().density;
canvas.drawLine(x1*d, y1*d, x2*d, y2*d, paint); 
```

*注意：如果乘法不起作用，请尝试除以`d`...我永远不记得该怎么做。*

# python - urllib2 错误没有给出主机

> ID：14649347
> 
> 赞同：2
> 
> 时间：2013-02-01T15:15:39.500
> 
> 标签：python, string, urllib2

编辑：（已解决）当我从我的文件中读取值时，一个换行符被添加到末尾。（\n）这是在那个时候分割我的请求字符串。我认为这与我最初将值保存到文件中的方式有​​关。非常感谢。

我有以下代码：

```
results = 'http://www.myurl.com/'+str(mystring)
print str(results)
request = urllib2.Request(results)
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0)')
opener = urllib2.build_opener()
text = opener.open(request).read() 
```

这是一个循环。在循环运行几次 str(mystring) 更改后，会给出一组不同的结果。我可以尽可能多地循环脚本，因为我喜欢保持 str(mystring) 的值不变，但是每次我更改 str(mystring) 的值时，我都会收到一个错误，提示当代码尝试构建开启程序时没有给出主机。

```
opener = urllib2.build_opener() 
```

有人可以帮忙吗？

TIA,

保罗。

编辑：

更多代码在这里......

```
import sys
import string
import httplib
import urllib2
import re
import random
import time

def StripTags(text):
    finished = 0
    while not finished:
        finished = 1
        start = text.find("<")
        if start >= 0:
            stop = text[start:].find(">")
            if stop >= 0:
                text = text[:start] + text[start+stop+1:]
                finished = 0
    return text
mystring="test"

d={}

    with open("myfile","r") as f:
        while True:
            page_counter=0
            print str(mystring)

            try:
                while page_counter <20:
                    results = 'http://www.myurl.com/'+str(mystring)
                    print str(results)
                    request = urllib2.Request(results)
                    request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0)')
                    opener = urllib2.build_opener()
                    text = opener.open(request).read()
                    finds = (re.findall('([\w\.\-]+'+mystring+')',StripTags(text)))
                    for find in finds:
                        d[find]=1
                        uniq_emails=d.keys()
                    page_counter = page_counter +1
                    print "found this " +str(finds)"
                    random.seed()
                    n = random.random()
                    i = n * 5
                    print "Pausing script for " + str(i) + " Seconds" + ""
                    time.sleep(i)
                mystring=next(f)
            except IOError:
                print "No result found!"+"" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T07:56:56.407

我找到了答案。如下....

mystring 的值是从文件中读取的。在我为编写文件而编写的脚本中，我用“w”而不是“wb”打开它。

文件中的每一行都以换行符“/n”结尾。

当 mystring 添加到字符串请求时，新行正在请求字符串的中间创建。[1]

这从我的代码中永远不会明显，因为我将其更改为在此处发布以隐藏我用来获取结果的真实网址。[2]

我的实际网址看起来更像这样......

Myurl.com/mystring/otherstuff/page_counter/morestuff.htm

从文件中读取的 /n 拼接了我的 url 并给了 urllib 问题......

[1] 我使用窗户。它在文本文件中添加了许多看不见的东西。如果我用“wb”而不是“w”打开要写入的文件，则内容将在没有看不见的 /n 的情况下写入

[2] 总是发布你的完整代码孩子。stackoverflow 的好人帮不了你，除非他们能看到你在做什么......

非常感谢大家，我希望这可以帮助某人。

保罗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:41:55.843

在 while 循环中，您将结果设置为不是 url 的内容：

结果 = 'myurl+str(mystring)'

应该是 `results = myurl+str(mystring)`

顺便说一句，您似乎不需要所有转换为字符串 ( `str()`) ：（*根据要求扩展*）

*   `print str(foo)`: 在这种情况下， str() 是不必要的。Python 将始终打印`foo's`字符串表示
*   `results = 'http://www.myurl.com/'+str(mystring)`. 这也是不必要的；`mystring`已经是一个字符串，所以`'http://www.myurl.com/' + mystring`就足够了。
*   `print "Pausing script for " + str(i) + " Seconds"`. 在这里你会得到一个错误，`str()`因为你不能做 string + int。但是，`print "foo", 1, "bar"`确实有效。`print "foo %i bar" % 1`和`print "foo {0} bar".format(1)`（见[这里](http://docs.python.org/2/library/string.html#format-examples)）一样

# objective-c - 根据 iPad 中的方向查找对应的原点

> ID：14649348
> 
> 赞同：0
> 
> 时间：2013-02-01T15:15:41.293
> 
> 标签：objective-c

我正在开发一个 iPad 应用程序，它支持四个方向。假设在这个应用程序中我有一张图像，它的原点位于横向 (20, 20)，如果应用程序旋转为纵向，是否有一个数学公式可以找出其对应的原点？

我可以为原点硬编码所有可能的原点，但这将是一个黑客，我正在寻找一个简单的公式来进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:02:19.037

这取决于您所说的“对应来源”是什么意思。我怀疑你的意思是这个，但是如果你的意思是你希望你的视图在它们和它们的超级视图边缘之间保持相同的空间，你可以设置`autoresizingMask`. 例如，以下效果和蒙版。

```
//Same spacing relative to the lower left corner
myImageView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin;
//Same spacing relative to the upper left corner
myImageView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleBottomMargin;
//Same spacing relative to the lower right corner
myImageView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin;
//Same spacing relative to the upper right corner
myImageView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

*如果您希望视图保持相对于所有*边缘的相对百分比，那么就可以了。

```
 myImageView.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

因此，例如，如果对象位于 {20,20} 且屏幕为 {320,480}，则旋转后 {480,320} 的新原点大致为 {30,13}。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:46:37.813

如果您的意思是相对于屏幕百分比定位，它看起来像这样（伪代码）：

```
widthRelationship= oldScreenWidth/x; // x = horizontal position
heightRelationship= oldScreenHeight/y; // y = vertical position
newX = newScreenWidth/widthRelationship;
newY = newScreenHeight/heightRelationship; 
```

上面没有考虑图像的大小，只考虑了实际的原点。因此，即使百分比数学是正确的，它也可能无法提供您期望的视觉结果。

如果您使用的是 UIKit，那么很可能有很多更好的方法来实现您正在寻找的结果......

# iphone - 如何确定 NSManagedObjectID 是否是永久的？

> ID：14649357
> 
> 赞同：0
> 
> 时间：2013-02-01T15:16:11.873
> 
> 标签：iphone, ios, objective-c, core-data, nsmanagedobject

我想确保我正在使用的 NSManagedObject 具有永久的 NSManagedObjectID。我知道它只在 [NSManagedObjectContext save:] 或 [NSManagedObjectContext gainPermanentIDsForObjects:error:] 上永久保存。但是，在我保存上下文以获取永久 ID 之前，有没有办法确定对象是否具有永久 ID？这样我就不会不必要地保存商店。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:22:49.817

`NSManagedObjectID`有一个`isTemporaryID`方法指示对象ID是否是临时的，所以你可以检查

```
BOOL isTemporary = [[myObject objectID] isTemporaryID]; 
```

但是，我只会调用`obtainPermanentIDsForObjects`有问题的对象，因为我*假设*如果对象 ID 已经是永久的，这不会导致额外的开销。

# c++ - boost::gregorian::date 没有 `set-type` 功能？

> ID：14649358
> 
> 赞同：2
> 
> 时间：2013-02-01T15:16:22.213
> 
> 标签：c++, date, boost, setter, gregorian-calendar

例如我有一个日期对象：

```
boost::gregorian::date date1(2013,1,31); 
```

现在我想将日期更改为 1。如何将日期设置为 1？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:25:22.213

日期类型是不可变的，除了赋值，所以你需要创建一个新的日期：

```
date1 = boost::gregorian::date(date1.year(), date1.month(), 1); 
```

# asp.net - asp.net gridview 编辑按钮不更新

> ID：14649360
> 
> 赞同：3
> 
> 时间：2013-02-01T15:16:37.253
> 
> 标签：asp.net, gridview, edit

当我输入新数据并按下更新按钮时，它会保存旧数据（我希望它更新的数据）。

```
public void fill()
{
    SqlCommand cmd = new SqlCommand("select * from school ",con );
    con.Open();
    SqlDataReader rd = cmd.ExecuteReader();

    GridView1.DataSource = rd;
    GridView1.DataBind();
    con.Close();
}

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    fill();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{

    int id = int.Parse(((TextBox)GridView1.Rows[e.RowIndex].Cells[1].Controls[0]).Text);
    string  stu =((TextBox)GridView1.Rows[e.RowIndex].Cells[2].Controls[0]).Text;
    int age = int.Parse(((TextBox)GridView1.Rows[e.RowIndex].Cells[3].Controls[0]).Text);

    SqlCommand cmd = new SqlCommand("UPDATE school SET  stu_name=@stu_name,age=@age where id=@id ", con);
    cmd.Parameters.Add(new SqlParameter("@id", id));
    cmd.Parameters.Add(new SqlParameter("@stu_name", stu));
    cmd.Parameters.Add(new SqlParameter ("@age",age));

    con.Open();
    cmd.ExecuteNonQuery();
    con.Close();

    GridView1.EditIndex = -1;
    fill();
} 
```

他的问题是分配给 name,age 的值是数据库中的现有值，而不是我在运行时输入的新值，任何人都可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:28:32.317

每次编辑网格时都会重新填充网格。

改为调用`fill();` 网格初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:42:51.107

这是有关Web 表单[生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)的一些信息。我认为您所需要的只是将您`fill();`的`if`声明包装起来。因为`page_load`发生在您的事件处理程序之前，您从数据库中重新加载输入的值。

```
if(!PostBack)
{
  fill();
} 
```

# javascript - 当我使用子路径时，Express 加载控制器无限时间和浏览器窗口崩溃

> ID：14649369
> 
> 赞同：0
> 
> 时间：2013-02-01T15:16:54.257
> 
> 标签：javascript, node.js, express, angularjs

我目前正在使用 angularJS，并尝试建立一个主页。我的路由配置如下所示：

```
var app = angular.module('mml-annie', ['mmlServices']);

app.config(['$locationProvider', function($location) {
  $location.html5Mode(true); //now there won't be a hashbang within URLs for browers that     support HTML5 history
}]);

app.config(['$routeProvider', function($routeProvider) {
$routeProvider.
when('/team', {
    templateUrl: 'partials/team', 
    controller: TeamCtrl
}).

otherwise({
        redirectTo: '/home'
    });
}]); 
```

出于测试目的，我的控制器如下所示：

```
function TeamCtrl($scope, Team) {

console.log("TEST");
} 
```

除了当我的路径得到添加/字段时，我的一切工作都很好。当我更改`"/team"`为`"/team/team/test"`我的应用程序时，会调用控制器，直到应用程序崩溃。不使用 html5 模式可以解决问题。但我宁愿使用没有 hashbang 的漂亮 HTML5 模式。

该应用程序使用 express 运行，`node.js`它为除 API 调用之外的所有请求提供角度应用程序。

你知道发生了什么吗？我不知道......
当然，如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:34:42.300

解决方法如下：

我的部分没有相对路径前缀`"/"`。因此，每当我尝试在路径中前进时，服务器都会查找不存在的部分，例如：/team/partials/team

然后 Node 发送了基本布局，该布局再次具有自身的 ng-view div 并重新开始。

为什么我总是摆弄 2 个小时——然后决定写一个问题，2 分钟后我找到了答案....

# oop - ZF2 中每个控制器的分页器相同

> ID：14649373
> 
> 赞同：1
> 
> 时间：2013-02-01T15:16:59.497
> 
> 标签：oop, zend-framework2

我正在 ZF2 中编写我的第一个应用程序，我想创建分页系统。

目前，我的控制器中有这样的东西：

```
$pagLimit = $this->params()->fromQuery('limit', 1000);
$pagPage = $this->params()->fromQuery('page', 1);
$orderDir = $this->params()->fromQuery('dir', 'ASC');
$orderBy = $this->params()->fromQuery('column', 'id');

$result = $this->getMapper()->getList($orderDir, $orderBy);

$paginator = new Paginator(new ArrayAdapter($result));
$paginator->setItemCountPerPage($pagLimit);
$paginator->setCurrentPageNumber($pagPage); 
```

我认为我的解决方案不太好..

如果我想更改例如每页项目的默认限制，我必须修改我的所有控制器。另外，我必须记住为所有获取数据列表的映射器方法发送两个参数。

我的第一个想法是使用继承（“MyController”，方法如下：setPaginationParams() 和 setPaginator($data)）。

然后我必须记住在每个控制器中调用“我的控制器”方法。

但是也许有更好的方法来为我的模块中的每个控制器实现相同的分页器？MVC 事件？创建自定义类并使用 DI？

实现此功能的最佳方法是什么？

你能给我一些提示吗？

我是 ZF2 和 OOP 概念的新手。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:20:32.403

您始终可以使用自己的分页器扩展分页器，并设置默认值。您甚至可以只传入请求对象或参数对象，然后让分页器在内部为您处理一些事情，以节省设置默认值等。

# iphone - 调整 UIImage 大小并更改 UIImageView 的大小

> ID：14649376
> 
> 赞同：26
> 
> 时间：2013-02-01T15:17:04.830
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiimageview

我有这个`UIImageView`，我有它的最大高度和最大宽度的值。我想要实现的是我想要拍摄图像（具有任何宽高比和任何分辨率）并且我希望它适合边框，所以图片*不会超过*它们，但它可以根据需要缩小它们。（图中红色标注）：

![在此处输入图像描述](../Images/a6b21ae87065a4465e372c69881485a1.png)

现在图像适合必要的大小，但我有两个担心：1.`UIImageView`不等于调整大小的图像的大小，因此留下红色背景（我不想要那个）2\. 如果图像更小我的高度`UIImageView`没有调整为更小，它保持相同的高度。

这是我的代码，我知道它错了：

```
UIImage *actualImage = [attachmentsArray lastObject];
UIImageView *attachmentImageNew = [[UIImageView alloc] initWithFrame:CGRectMake(5.5, 6.5, 245, 134)];
attachmentImageNew.image = actualImage;
attachmentImageNew.backgroundColor = [UIColor redColor];
attachmentImageNew.contentMode = UIViewContentModeScaleAspectFit; 
```

那么我如何不仅动态地改变 的大小`UIImageView.image`，而且改变整体`UIImageView`的大小，从而使其大小完全适应其内容。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-01T15:48:54.710

[当你在 UIViewContentModeScaleAspectFit 之后获取调整后](https://stackoverflow.com/questions/14647891/get-width-of-a-resized-image-after-uiviewcontentmodescaleaspectfit)图像的宽度和高度时，你可以调整你的 imageView 的大小：

```
imageView.frame = CGRectMake(0, 0, resizedWidth, resizedHeight);
imageView.center = imageView.superview.center; 
```

我还没有检查它是否有效，但我认为一切都应该没问题

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-01T16:32:07.250

```
- (UIImage *)image:(UIImage*)originalImage scaledToSize:(CGSize)size
{
    //avoid redundant drawing
    if (CGSizeEqualToSize(originalImage.size, size))
    {
        return originalImage;
    }

    //create drawing context
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0f);

    //draw
    [originalImage drawInRect:CGRectMake(0.0f, 0.0f, size.width, size.height)];

    //capture resultant image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return image
    return image;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-20T03:08:56.513

这是 Rajneesh071 的答案的 Swift 等价物，使用扩展

```
UIImage {
  func scaleToSize(aSize :CGSize) -> UIImage {
    if (CGSizeEqualToSize(self.size, aSize)) {
      return self
    }

    UIGraphicsBeginImageContextWithOptions(aSize, false, 0.0)
    self.drawInRect(CGRectMake(0.0, 0.0, aSize.width, aSize.height))
    let image = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    return image
  }
} 
```

用法：

```
let image = UIImage(named: "Icon")
item.icon = image?.scaleToSize(CGSize(width: 30.0, height: 30.0)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-01T17:19:50.270

使用下面的类别，然后将 Quartz 的边框应用到您的图像中：

```
[yourimage.layer setBorderColor:[[UIColor whiteColor] CGColor]];
[yourimage.layer setBorderWidth:2]; 
```

类别：UIImage+AutoScaleResize.h

```
#import <Foundation/Foundation.h>

@interface UIImage (AutoScaleResize)

- (UIImage *)imageByScalingAndCroppingForSize:(CGSize)targetSize;

@end 
```

UIImage+AutoScaleResize.m

```
#import "UIImage+AutoScaleResize.h"

@implementation UIImage (AutoScaleResize)

- (UIImage *)imageByScalingAndCroppingForSize:(CGSize)targetSize
{
    UIImage *sourceImage = self;
    UIImage *newImage = nil;
    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;
    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;
    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;
    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO)
    {
        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor > heightFactor)
        {
            scaleFactor = widthFactor; // scale to fit height
        }
        else
        {
            scaleFactor = heightFactor; // scale to fit width
        }

        scaledWidth  = width * scaleFactor;
        scaledHeight = height * scaleFactor;

        // center the image
        if (widthFactor > heightFactor)
        {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
        }
        else
        {
            if (widthFactor < heightFactor)
            {
                thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
            }
        }
    }

    UIGraphicsBeginImageContext(targetSize); // this will crop

    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();

    if(newImage == nil)
    {
        NSLog(@"could not scale image");
    }

    //pop the context to get back to the default
    UIGraphicsEndImageContext();

    return newImage;
}

@end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-01T15:21:16.867

如果您有图像的大小，为什么不`frame.size`将图像视图的大小设置为这个大小？

编辑 - -

好的，所以看到你的评论，我建议：

```
UIImageView *imageView;
//so let's say you're image view size is set to the maximum size you want

CGFloat maxWidth = imageView.frame.size.width;
CGFloat maxHeight = imageView.frame.size.height;

CGFloat viewRatio = maxWidth / maxHeight;
CGFloat imageRatio = image.size.height / image.size.width;

if (imageRatio > viewRatio) {
    CGFloat imageViewHeight = round(maxWidth * imageRatio);
    imageView.frame = CGRectMake(0, ceil((self.bounds.size.height - imageViewHeight) / 2.f), maxWidth, imageViewHeight);
}
else if (imageRatio < viewRatio) {
    CGFloat imageViewWidth = roundf(maxHeight / imageRatio);
    imageView.frame = CGRectMake(ceil((maxWidth - imageViewWidth) / 2.f), 0, imageViewWidth, maxHeight);
} else {
    //your image view is already at the good size
} 
```

此代码会将您的图像视图调整为其图像比例，并将图像视图定位到与您的“默认”位置相同的中心。

PS：我希望你设置`imageView.layer.shouldRasterise = YES` 和`imageView.layer.rasterizationScale = [UIScreen mainScreen].scale;`

如果您使用的是 CALayer 阴影效果 ;) 它将大大提高您的 UI 的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T15:28:47.040

我想你想要的是不同的`content mode`。尝试使用`UIViewContentModeScaleToFill`. 如有必要，这将通过更改内容的纵横比来缩放内容以适合您的 UIImageView 的大小。

查看[`content mode`](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)官方文档上的部分，以更好地了解可用的不同内容模式（用图像说明）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-23T12:10:13.857

```
 if([[SDWebImageManager sharedManager] diskImageExistsForURL:[NSURL URLWithString:@"URL STRING1"]])
   {
       NSString *key = [[SDWebImageManager sharedManager] cacheKeyForURL:[NSURL URLWithString:@"URL STRING1"]];

       UIImage *tempImage=[self imageWithImage:[[SDImageCache sharedImageCache] imageFromDiskCacheForKey:key] scaledToWidth:cell.imgview.bounds.size.width];
       cell.imgview.image=tempImage;

   }
   else
   {
       [cell.imgview sd_setImageWithURL:[NSURL URLWithString:@"URL STRING1"] placeholderImage:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL)
        {
            UIImage *tempImage=[self imageWithImage:image scaledToWidth:cell.imgview.bounds.size.width];
            cell.imgview.image=tempImage;
//                [tableView beginUpdates];
//                [tableView endUpdates];

        }];
   } 
```

# css - -webkit-box-orient 和 --webkit-box-flex 浏览器竞争力

> ID：14649377
> 
> 赞同：0
> 
> 时间：2013-02-01T15:17:08.977
> 
> 标签：css, html, web, webkit, cross-browser

我有一个跨浏览器兼容性问题，我正在尝试为 IE9/IE10 和 Firefox 寻找解决方案。

```
nav {
    -webkit-box-orient: horizontal;
}
nav a {
    -webkit-box-flex:1;
} 
```

上面的代码似乎只适用于 Chrome。Mozilla 是否为此提供了特定于浏览器的代码？IE 是否为此提供了特定于浏览器的代码？

此代码来自的网站是[http://www.daven.nl/](http://www.daven.nl/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:41:27.200

IE9 根本不支持 flexbox。基本上，不同的浏览器供应商已经实现了 3 种不同的规范。

*   2012 年 9 月候选人推荐 ( [http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/) )
*   2012 年 3 月工作草案 ( [http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/](http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/) )
*   2009 年 7 月工作草案 ( [http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/](http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/) )

从 Firefox 20 开始，您只需要关心 2012 年的规范：IE10 遵循 3 月的规范，其他所有人都遵循 9 月的规范。如果您希望在 2009 草案之后支持浏览器，请注意 Mozilla 不支持`flex-wrap`. 我知道这在最近的 Firefox 版本中仍然是一个抱怨，这些版本对新草稿具有实验性支持（默认禁用）。不确定这是否应该在版本 20 中修复。

我在 Sass 中编写了一系列 mixin（取决于 2 Compass mixins），涵盖了所有规范。有评论显示给定草稿不存在哪些属性或值。

[https://gist.github.com/4461470](https://gist.github.com/4461470)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:22:24.943

Firefox 使用 -moz 并且 IE 使用 -ms 作为其供应商前缀。但是，大多数版本都不支持 -ms 我相信 IE 10 是唯一支持 -ms 的版本。

[http://www.w3schools.com/cssref/css3_pr_box-orient.asp](http://www.w3schools.com/cssref/css3_pr_box-orient.asp)

[http://www.w3schools.com/cssref/css3_pr_box-flex.asp](http://www.w3schools.com/cssref/css3_pr_box-flex.asp)

```
 /* Firefox */
 display:-moz-box;
 -moz-box-orient:horizontal;

-moz-box-flex:2.0; 
```

我会在 IE 10 中尝试一下，看看它是否有效。根据 w3，它看起来在 IE 中没有太多支持。但值得一试。

```
 display:-ms-box;
 -ms-box-orient:horizontal;

-ms-box-flex:2.0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:11:00.087

我在 IE10 上试了一下，好像还不错。

```
-ms-flex:1 0 auto; 
```

# android - 在异步任务执行期间锁定屏幕

> ID：14649394
> 
> 赞同：0
> 
> 时间：2013-02-01T15:17:54.753
> 
> 标签：android

我想在执行异步任务时锁定手机或平板电脑的屏幕。对于 android 版本 2.3，我使用了进度对话框来执行此操作，但在 android 版本 4.1 上它似乎不起作用（如果我在执行异步任务期间触摸屏幕，进度对话框将进入后台）。异步任务的执行将在后台继续执行，但这可能会使用户感到困惑，因为在异步任务执行完成之前您无法看到正在发生的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:19:44.590

您应该使您的对话框无法通过触摸`ProgressDialog`.

```
dialog.setCanceledOnTouchOutside(false); 
```

请参阅：[对话框 Javadocs](http://developer.android.com/reference/android/app/Dialog.html#setCanceledOnTouchOutside%28boolean%29)

# php - 在 PHP 中验证 Windows Phone 8 应用内购买

> ID：14649396
> 
> 赞同：1
> 
> 时间：2013-02-01T15:17:59.433
> 
> 标签：php, windows-phone-8, ssl, openssl, xmlseclibs

在过去的两天里，我一直在研究如何在 PHP 中验证 WP8 应用内购买。在没有找到任何样本后，我找到了名为“xmlseclibs”的库。虽然他们的示例签名 XML 运行良好，但它似乎总是无法在 validateReference 验证 Microsoft 收据，其中计算的摘要与 Microsoft XML 响应中的摘要不匹配。

我发现了一个关于同一主题的问题，但似乎从未得到解决： [Verifying windows 8 purchase (receipts) using PHP](https://stackoverflow.com/questions/13672076/verifying-windows-8-purchases-receipts-using-php)

有没有人对这个话题有任何经验？我真的很感激。

# networking - 如何在 OSX 中浏览网络摄像机？

> ID：14649397
> 
> 赞同：0
> 
> 时间：2013-02-01T15:18:08.950
> 
> 标签：networking, camera, avfoundation, qtkit, imagekit

我正在编写一个将使用一些网络摄像机（基于 IP）的 Objective C 软件。我检查了很多 api，但我能够检测到我的 TP-Link TL-SC3171 相机。我正在使用 Mac Book Pro。

这是我见过的api：

1-AV基础：使用AVCaptureDevice，我唯一能检测到的设备是内置iSight

2-QTkit：使用QTCaptureDevice，只有iSight摄像头（外置和内置）；可以检测到 USB 和 FireWire 网络摄像头。

3-使用 ImageKit 和 ImageCapture，我应该能够动态检测通过 USB 连接或通过网络可用的所有相机和扫描仪，但我看不到我的 TP-Link SC3171。

你知道我必须使用哪个 api 来浏览任何网络摄像机吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:49:50.507

我不认为任何 OS X 图像捕获 API 都声称支持网络摄像机——它们都是关于本地连接的设备。

查看该设备的文档，由于您通过 Web 界面配置和预览它，它看起来更像是一个网络流媒体设备。如果您可以获得 MPEG-4 流的 URL，也许您可​​以使用 AVPlayer 或 QTMovie 打开它。

基本上，你的想法是错误的。从您的应用程序的角度来看，它不是相机，而是服务器。

# java - 如何分析在 Maven Surefire 中运行的测试的挂钟时间

> ID：14649399
> 
> 赞同：3
> 
> 时间：2013-02-01T15:18:16.873
> 
> 标签：java, profiling, maven-surefire-plugin

我正在尝试分析一组从[maven surefire](http://maven.apache.org/surefire/maven-surefire-plugin/)运行的测试。我发现了诸如此类的相关问题，[而这](https://stackoverflow.com/questions/4434860/how-to-profile-application-startup-with-visualvm)并不是[我](https://stackoverflow.com/questions/7096121/profile-entire-java-program-execution-in-visualvm)想要的。

有人可以推荐一个分析器，它可以让我测量测试套件的方法调用的挂钟持续时间（也就是说，我没有尝试将分析器附加到已经运行的应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:03:13.713

[这个答案](https://stackoverflow.com/a/2566109/150884)对我有帮助。我已将以下内容添加到我的`pom.xml`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <argLine>-agentpath:/home/jshaw/yjp-12.0.2/bin/linux-x86-64/libyjpagent.so=tracing,onexit=snapshot,disablej2ee</argLine>
    </configuration>
</plugin> 
```

然后，您可以在 maven 完成运行后从[YourKit profiler](http://www.yourkit.com/)加载快照。

# json - 属性文件到 json

> ID：14649400
> 
> 赞同：-3
> 
> 时间：2013-02-01T15:18:19.523
> 
> 标签：json, properties

是的，我很懒 .. =) 你知道一个工作属性文件到 json 转换器吗？

我有类似的东西

道具1=bla

pro2=bla bla

并想神奇地从中得到一个 json =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:22:25.127

`sed -e 's/^\([^=]*\)\s*=\s*\(.*\)/"\1": "\2",/'`假设它的格式如您上面所说，它将让您大部分时间到达那里。

# asp.net - 为顶部和底部分页器显示不同的分页器模板

> ID：14649403
> 
> 赞同：0
> 
> 时间：2013-02-01T15:18:31.807
> 
> 标签：asp.net

我有一个带有自定义分页器模板的普通 ASP.NET 网格视图，并且希望在顶部分页器中显示与在底部分页器中不同的内容。

成像您要在底部寻呼机中显示普通寻呼机以及顶部寻呼机内的记录总数。

现在，我能想到几个解决方案：

*   检测当前 Row 的 RowIndex 或 RowType。（这不起作用，因为我在模板中）
*   不知何故为顶部/底部分页器设置了不同的模板。（这甚至可能吗？）

我还能尝试什么？有没有人做过类似的事情？

干杯，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:37:27.600

您可以覆盖网格视图的初始化寻呼机方法来创建不同的顶部/底部寻呼机。但是这样做会涉及在代码隐藏中生成 HTML，这很痛苦。

```
protected override void InitializePager(GridViewRow row, 
                                            int columnSpan, 
                                            PagedDataSource pagedDataSource)
{
//if (this.TopPagerRow == null && 
if (this.Controls[0].Controls.Count == 0 && 
   (this.PagerSettings.Position == PagerPosition.Top || 
    this.PagerSettings.Position == PagerPosition.TopAndBottom))
{
    InitializeTopPager(row, columnSpan, pagedDataSource);
}
else
{
    base.InitializePager(row, columnSpan, pagedDataSource);
    InitializeBottomPager(row, columnSpan, pagedDataSource);
} 
```

}

参考： http: [//www.codeproject.com/Articles/28910/Custom-GridView-with-Paging-and-Filtering](http://www.codeproject.com/Articles/28910/Custom-GridView-with-Paging-and-Filtering)

我不确定您是否可以使用顶部/底部寻呼机模板做到这一点

# linux - 为自定义 Linux 2.6.18 生成 C 工具链的问题

> ID：14649410
> 
> 赞同：0
> 
> 时间：2013-02-01T15:18:52.020
> 
> 标签：linux, cross-compiling, toolchain

我有一个由硬件供应商根据版本**2.6.18修改的自定义****Linux**内核。我需要使用最新版本的 uClibc 为**MIPS**架构生成一个新的工具链。

 ****我选择了[crosstool-ng](http://crosstool-ng.org/)工具来简化这个过程，但它在生成过程中失败了。这是错误部分的日志：

```
[INFO ]  =================================================================
[INFO ]  Installing kernel headers
[DEBUG]    Using kernel's headers_install
[EXTRA]    Installing kernel headers
[DEBUG]    ==> Executing: 'make' '-C' '/home/myuser/sources/custom-linux/toolchain/.build/src/linux-custom' 'O=/home/myuser/sources/custom-linux/toolchain/.build/mipsel-unknown-linux-uclibc/build/build-kernel-headers' 'ARCH=mips' 'INSTALL_HDR_PATH=/home/myuser/x-tools/mipsel-unknown-linux-uclibc/mipsel-unknown-linux-uclibc/sysroot/usr' 'V=0' 'headers_install' 
[ALL  ]    make[1]: Entering directory `/home/myuser/sources/custom-linux/stblinux-2.6.18'
[ALL  ]      CHK     include/linux/version.h
[ALL  ]      UPD     include/linux/version.h
[ALL  ]    *** Error: Headers not exportable for this architecture (mips)
[ERROR]    make[2]: *** [headers_install] Error 1
[ERROR]    make[1]: *** [headers_install] Error 2
[ALL  ]    make[1]: Leaving directory `/home/myuser/sources/custom-linux/stblinux-2.6.18'
[ERROR]  
[ERROR]  >>
[ERROR]  >>  Build failed in step 'Installing kernel headers'
[ERROR]  >>        called in step '(top-level)'
[ERROR]  >>
[ERROR]  >>  Error happened in: CT_DoExecLog[scripts/functions@257]
[ERROR]  >>        called from: do_kernel_install[scripts/build/kernel/linux.sh@112]
[ERROR]  >>        called from: do_kernel_headers[scripts/build/kernel/linux.sh@91]
[ERROR]  >>        called from: main[scripts/crosstool-NG.sh@632]
[ERROR]  >>
[ERROR]  >>  For more info on this error, look at the file: 'build.log'
[ERROR]  >>  There is a list of known issues, some with workarounds, in:
[ERROR]  >>      '/home/myuser/.local/share/doc/crosstool-ng/ct-ng.hg+default-20f2459b97bf/B - Known issues.txt'
[ERROR]  
[ERROR]  (elapsed: 41:41.63) 
```

该问题似乎与 *headers_install* 规则有关。我认为它是在特定版本的内核中引入的。有趣的事实是，如果我跑

```
make ARCH=mips INSTALL_HDR_PATH=... headers_install 
```

标头将安装得很好。该问题似乎与使用**O=**参数有关。有谁知道它是干什么用的？这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T21:39:34.003

构建一个交叉编译器/binutils 通常非常困难，而且它不允许您测试您的程序。
虚拟机速度非常慢，并且会产生很强的分离性，这使得主机和虚拟机之间难以共享文件。

最简单的解决方案是[Qemu-User-static](https://wiki.debian.org/QemuUserEmulation "只需用 mips 替换 arm")：系统调用和指令以用户模式包装到本机内核。

下载或解压rootfs。
将其复制到您的真实根目录的子文件夹中。
将 qemu-user- *（你的 mips 架构的名称）* -static 复制到目标目录的根目录。
通过执行 /bin/bash 将 /etc/resolv.conf 复制到 /your_path_to_target/etc/resolv.conf Chroot 到它。
使用 rootfs，就好像您使用的是基于 mips 的真实文件一样。机器。

事情变得非常简单：由于硬编码路径之类的原因，许多库没有被编译*（你会遇到很多；很多问题，比如你在交叉编译时遇到的问题）*。就像您在本地构建包一样，这一切都发生了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T23:18:23.030

问题是这个 Linux 内核版本中不存在**headers_install规则。**它包含在**2.6.19.1**中：

> 现代 Linux 内核（基于 2.6.19.1 和更新版本）通过“make headers_install”命令导出内核头文件。

[https://www.kernel.org/doc/index-old.html#3.2.2.3.1](https://www.kernel.org/doc/index-old.html#3.2.2.3.1)

由于*buildroot*期望这个规则存在，我猜想如果没有自定义补丁它就行不通。****

# c# - 为什么 MouseEventArgs 在方程式中使用时不起作用

> ID：14649424
> 
> 赞同：3
> 
> 时间：2013-02-01T15:19:50.033
> 
> 标签：c#, winforms

Windows 窗体应用程序：

这让我困惑了好几个小时。我正在尝试做的是当我按住标签时，它会移动表格。

```
 private void label1_MouseUp(object sender, MouseEventArgs e)
    {
        KeepMoving = false;
    }

    private void label1_MouseDown(object sender, MouseEventArgs e)
    {
        KeepMoving = true;
    }

    private void label1_MouseMove(object sender, MouseEventArgs e)
    {
        if (KeepMoving == true)
            this.Location = new Point(MousePosition.X - (e.X + SystemInformation.FrameBorderSize.Width + label1.Left), MousePosition.Y - (e.Y + SystemInformation.CaptionHeight + label1.Top));

    } 
```

是我正在使用的（当然是公共布尔值 KeepMoving。）

如果我删除 eX 和 eY，一切正常，但它是相对于标签左上角的位置，但是我想要标签本身的位置。

当我使用消息框在标签上显示 eX 和 eY 的坐标时，数字是正确的，显示了我点击标签的位置。当我使用上面代码中的点时，无论我点击标签上的哪个位置，数字都不会改变，当我尝试移动它时，它会上升到 30k+ 范围。

为什么 MouseEventArgs 在我的方程式中不起作用？抱歉，如果我描述得不好，我会尽力而为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:54:06.010

跟踪标签左上角的初始偏移量，并相应地调整表单的位置。

```
 public bool KeepMoving = false;
    private Point offset;

    private void label1_MouseDown(object sender, MouseEventArgs e)
    {
        KeepMoving = true;
        offset = new Point(e.X, e.Y);
    }

    private void label1_MouseUp(object sender, MouseEventArgs e)
    {
        KeepMoving = false;
    }

    private void label1_MouseMove(object sender, MouseEventArgs e)
    {
        if (KeepMoving)
        {
            Left += e.X - offset.X;
            Top += e.Y - offset.Y;
        }
    } 
```

# android - 强制用户使用特定的键盘

> ID：14649425
> 
> 赞同：0
> 
> 时间：2013-02-01T15:19:57.187
> 
> 标签：android, keyboard

如何强制用户在我的 App 中使用特定键盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:32:46.463

你想要的有一些问题。

1.  不允许应用程序指定必须使用的键盘。键盘是一种用户设置，您可以提示用户更改它，但最终如果他们这样做，以及选择由他们决定。

2.  一个应用程序不能安装另一个应用程序，你能做的最好的就是提示用户安装它，但他们是否真的安装它取决于他们。

如果您想将用户放入键盘（我建议您不应该这样做），您唯一的选择实际上是在应用程序布局中的视图中创建自己的键盘，并在必要时显示/隐藏它并连接所有允许它将文本插入 EditTexts 的功能。不过，这将是一项有些艰巨的任务，如果您尝试以这种方式执行此操作，它很可能无法完美运行，并且会让用户感到不安（尤其是已经拥有他们选择在*其*设备上使用的特定键盘的用户）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:34:28.213

除非您将其编码到应用程序中（即不是已发布的应用程序），否则无法强制用户使用特定键盘。这是关于为应用程序构建自定义键盘的 stackoverflow 对话：[如何制作 Android 自定义键盘？](https://stackoverflow.com/questions/9577304/how-to-make-a-android-custom-keyboard)

# jquery - accordion menu with nested flyouts

> ID：14649428
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:20:09.987
> 
> 标签：jquery, css, accordion, flyout

I'm trying to figure out how to integrate an accordion type of menu and a flyout menu together. Ideally, I'd like to have a vertical menu showing manufacturers that, when clicked, acts as an accordion to show Product Series for that manufacturer. When an individual Product Series is clicked, a flyout menu pops out to the side to show individual products in that series.

Has anyone seen any existing code like this or better yet, can anyone show me how to achieve this effect? Thanks in advance.

```
<ul>
  <li>Manufacturer 1 (drops product lines in accordion)
    <ul>
      <li>Product Line 1
        <ul>
          <li>Product 1</li> (flyout menu for products)
          <li>Product 2</li>
         </ul>
       </li>
       <li>Product Line 2
         <ul>
           <li>Product 1</li>
           <li>Product 2</li>
         </ul>
       </li>
     </ul>
   </li>
   <li>Manufacturer 2
   etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:32:07.217

This should be easy with JqueryUI.

Use an [Accordion](http://jqueryui.com/accordion/) with a [Menu](http://jqueryui.com/menu/) inside.

[Link to JSFiddle](http://jsfiddle.net/WwBm8/)

```
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>jQuery UI Accordion - Default functionality</title>
    <link rel="stylesheet"
    href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
        $(function() {
            $("#menu").menu();
            $("#accordion").accordion();
        });
    </script>
</head>

<body>
    <div id="accordion">
         <h3>Section 1</h3>

        <div>
            <ul id="menu">
                <li class="ui-state-disabled"><a href="#">Aberdeen</a>

                </li>
                <li><a href="#">Ada</a>

                </li>
                <li><a href="#">Adamsville</a>

                </li>
                <li><a href="#">Addyston</a>

                </li>
                <li> <a href="#">Delphi</a>

                    <ul>
                        <li class="ui-state-disabled"><a href="#">Ada</a>

                        </li>
                        <li><a href="#">Saarland</a>

                        </li>
                        <li><a href="#">Salzburg</a>

                        </li>
                    </ul>
                </li>
                <li><a href="#">Saarland</a>

                </li>
                <li> <a href="#">Salzburg</a>

                    <ul>
                        <li> <a href="#">Delphi</a>

                            <ul>
                                <li><a href="#">Ada</a>

                                </li>
                                <li><a href="#">Saarland</a>

                                </li>
                                <li><a href="#">Salzburg</a>

                                </li>
                            </ul>
                        </li>
                        <li> <a href="#">Delphi</a>

                            <ul>
                                <li><a href="#">Ada</a>

                                </li>
                                <li><a href="#">Saarland</a>

                                </li>
                                <li><a href="#">Salzburg</a>

                                </li>
                            </ul>
                        </li>
                        <li><a href="#">Perch</a>

                        </li>
                    </ul>
                </li>
                <li class="ui-state-disabled"><a href="#">Amesville</a>

                </li>
            </ul>
        </div>
         <h3>Section 2</h3>

        <div>
            <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
                purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
                velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit
                faucibus urna.</p>
        </div>
    </div>
</body> 
```

# android - 从多任务菜单中选择应用程序会使应用程序消失

> ID：14649432
> 
> 赞同：1
> 
> 时间：2013-02-01T15:20:28.383
> 
> 标签：android

在多个场合我一直在测试应用程序，通过按主页按钮离开应用程序，稍后当我返回我的设备时，我按多任务按钮并从最近应用程序列表中选择 MyAPP，应用程序就消失了。

```
ActivityManager(270): Permission denied: checkComponentPermission() owningUid=10095 
```

只有在上面我发现这让我很奇怪。我也在我的设备上选择后退按钮时，应用程序没有加载（没有在堆栈中显示以前的活动）。是否有 android 操作系统导致它从堆栈中退出？我怎么能忽略这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:30:57.910

也许那个活动有标志 `android:excludeFromRecents=["true" | "false"]`

# mysql - MySQL 从数据库中选择周范围

> ID：14649434
> 
> 赞同：0
> 
> 时间：2013-02-01T15:20:33.157
> 
> 标签：mysql, sql, week-number

在我的数据库中，我存储周数和相关年份。例如这样的：

```
id | week | year | text
---+------+------+-----------
 1 |  23  | 2012 | hello
 2 |  27  | 2012 | something
 3 |  39  | 2012 | more text
 4 |  43  | 2012 | more text 
```

然后在前端，用户可以选择一周和一年，然后我希望能够返回该范围之间的所有记录。例如，在 25 - 2012 周和第 50 - 2012 周之间选择将返回最后 3 条记录。

我不确定是否也保留一周的第一个日期并搜索它是否会更容易，或者是否有一种方法可以轻松地搜索几周。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:32:38.793

大概，你想要连续几周，即使年份不同。为此，一些算术有助于：

```
select text
from dates
where year*100 + week between $weekmin+$yearmin*100 and $weekmax+$yearmax*100 
```

出于比较目的，这会将 2012 年的第 7 周转换为“201207”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:26:20.643

好吧，因为 MySQL 支持[比较运算符](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html)，所以这个任务非常简单：

```
SELECT text FROM `dates` WHERE week>=$weekmin AND week<=$weekmax AND year>=$yearmin AND year<=$yearmax ORDER BY year DESC, month DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:27:23.763

```
SELECT * 
FROM yourtable
WHERE week >= User_input1_week
AND week <= User_input2_week
AND year >= User_input1_year
AND year <= user_input2_year 
```

这可能会奏效。

> 我不确定是否也保留一周的第一个日期并搜索它是否会更容易，或者是否有一种方法可以轻松地搜索几周。

为您的列使用 DATE 类型可能是一个更好的举措。

# c# - 保存多个文件

> ID：14649436
> 
> 赞同：2
> 
> 时间：2013-02-01T15:20:44.557
> 
> 标签：c#

我有以下代码：

```
 [HttpPost]
    public ActionResult FileUploadMultiple(IEnumerable<HttpPostedFileBase> files)
    {

        foreach (var file in files)
        {
            if (file != null)
            {
                var fileName = Path.GetFileName(file.FileName);
                string extension = Path.GetExtension(file.FileName);

                var path = Path.Combine("C://Reports//36000", fileName);

                file.SaveAs(path);

            }

        }

        return RedirectToAction("Index");
    } 
```

我有 2 个正在测试的文件 - 因此它应该循环两次。第一个可以很好地保存到给定的路径。当代码运行并尝试执行第二个文件时，我收到以下消息：

*该进程无法访问文件“C:\Reports\36000\Report #36028.pdf”，因为它正被另一个进程使用。*

我认为我需要进行处置，但是当我尝试这样做时，`file.Dispose()`在`Intellisense`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:32:44.183

在保存之前，您可以尝试删除现有文件：

```
if (System.IO.File.Exists(path))
 System.IO.File.Delete(path);
file.SaveAs(path); 
```

# php - 根据星期几获取价格

> ID：14649441
> 
> 赞同：2
> 
> 时间：2013-02-01T15:21:09.923
> 
> 标签：php, mysql, sql, pdo

如果我有一个存储一周中不同日期价格的表格，我将如何根据当天使用适当的列？

表结构：

```
room_id | mon   | tue   | wed   | thu   | fri   | sat   | sun
1       | 50.00 | 40.00 | 50.00 | 55.00 | 60.00 | 60.00 | 40.00 
```

如果我需要今天（2013 年 2 月 1 日 - 星期五）的价格`room_id#1`，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:23:50.950

首先，您在 PHP 中度过了美好的一天。今天或在表单中选择的日期。

```
$date = date(); // this grabs today, but you can enter any date you want
$day = date('D', $date); // this gets Mon / Tue / ...
$day = strtolower($day);

$query = "SELECT `{$day}` as price FROM `table` WHERE room_id = 1"; 
```

这应该只选择正确的价格。

这是新的（ish）[DateTime](http://www.php.net/manual/en/datetime.construct.php)类的类似代码

```
$date = new DateTime();
$day = strtolower($date->format('D')); 
```

**参考：**

*   [http://php.net/manual/ro/function.date.php](http://php.net/manual/ro/function.date.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T15:26:10.817

这里是纯sql版本。

```
SELECT  room_ID,
        CASE DAYOFWEEK(CURDATE())
            WHEN 1 THEN sun
            WHEN 2 THEN mon
            WHEN 3 THEN tue
            WHEN 4 THEN wed
            WHEN 5 THEN thu
            WHEN 6 THEN fri
            WHEN 7 THEN sat
        END price
FROM    tableName
// WHERE .... 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b2f51/1)
*   [星期几](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)

另一个是使用`PreparedStatement`它可以包装在存储过程中，

```
SET @dayName = DATE_FORMAT(CURDATE(),'%a');
SET @sql = CONCAT('SELECT room_ID, `', @dayName, '` FROM tableName');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b2f51/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:53:22.950

从长远来看，您可以通过重组数据来避免悲伤 - 有一个 Day 列（可以是 enum('Mon','Tue','Wed','Thu','Fri','Sat','Sun ') 以便于使用和阅读），其中包含您的价格适用于一周中的哪一天，并且查询变为（例如星期五）：

```
select price where room_id = 1 and day = 'Fri'; 
```

这使您的第一个查询变得容易，但是由于您稍后可能会进行报告和其他工作，因此它也将使所有后续查询变得容易。

对于快捷方式，如果您使 enum('Sun','Mon','Tue','Wed','Thu','Fri','Sat') 符合 ODBC 标准，则可以使用：

```
select price where room_id = 1 and day = dayofweek(now()); 
```

（因为枚举的第一个值是 1，第二个是 2，等等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:29:12.523

```
$weekDays = array('sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat');
$day = $weekDays[date('w')];
mysql_query("SELECT ".$day." FROM table WHERE room_id = 1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:30:50.337

你可能会做类似的事情

```
$day = date('D',time());
$day = strtolower($day); 
```

然后 SELECT {$day} FROM table WHERE room_id = '1'

# java - Android 日历显示错误时间

> ID：14649447
> 
> 赞同：2
> 
> 时间：2013-02-01T15:21:23.470
> 
> 标签：java, android, database, calendar, milliseconds

我有一个警报应用程序，并将警报存储到数据库中。所有警报都运行良好，并且值（毫秒）存储为正确的数字。现在我正在尝试从我的数据库中显示这些时间。我正在使用日历以时间格式检索时间：

```
Calendar calendar = Calendar.getInstance();
SimpleDateFormat timeformat = new SimpleDateFormat("HH:mm");

milis = c.getInt(2);
calendar.setTimeInMillis(milis);
vreme = timeformat.format(calendar.getTime());
listavreme.add(vreme); 
```

Milis 从（已测试）中检索为正确的数字，`Cursor`但是当我`getTime()`以 HH:mm 格式显示时，它总是显示一个额外的小时。因此，如果 milis 值为：61200000 (17:00)，则日历显示为 18:00。我想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:36:51.420

我认为您必须将 TimeZone 设置为您的位置尝试

```
timeformat.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:40:27.240

Calendar.getInstance() 将绑定到 TimeZone。如果您没有特别指定它，它将使用 JRE 的默认值。我猜你的是GMT+1。因此，因为您（正确地）在没有时区的情况下保存原始毫秒，所以它正在失去那个小时。尝试：

```
    TimeZone utc = TimeZone.getTimeZone("UTC");
    日历日历 = Calendar.getInstance(utc);

```

# c# - 在没有 Reg.exe 的 C# 中备份注册表项

> ID：14649449
> 
> 赞同：0
> 
> 时间：2013-02-01T15:21:27.183
> 
> 标签：c#, pinvoke

我需要在 C# 中备份一个注册表项。我一直在尝试 P/Invoke RegSaveKey 无济于事。由于无法关闭组策略设置，我无法使用“Reg.exe”备份注册表。

这是所有代码：

```
private static UIntPtr GetKey(string registryPath)
{
  UIntPtr hKey = UIntPtr.Zero;

  if (RegOpenKeyEx(HKEY_LOCAL_MACHINE, registryPath, 0, KEY_READ, out hKey) != 0)
  {
     throw new Exception("Error getting key!");
  }

  return hKey;
}

private static void ExportRegistry(string registryPath)
{
  UIntPtr key = UIntPtr.Zero;
  try
  {
    key = GetKey(registryPath);
  }
  catch (Exception ex)
  {
    Console.WriteLine(ex.Message);
    return;
  }

  if (key == UIntPtr.Zero)
  {
    Console.WriteLine("Not key to export!");
    return;
  }

  try
  {
    RegSaveKey(key, "c:\\temp\\test.reg", IntPtr.Zero);
  }
  catch (Exception ex)
  {
    Console.WriteLine(ex);
  }

  if (key != UIntPtr.Zero)
  {
    RegCloseKey(key);
  }
}

private static int KEY_READ = 131097;
private static UIntPtr HKEY_LOCAL_MACHINE = new UIntPtr(0x80000002u);

[DllImport("advapi32.dll", SetLastError = true)]
private static extern int RegCloseKey(UIntPtr hKey);

[DllImport("advapi32.dll", SetLastError = true)]
private static extern int RegOpenKeyEx(UIntPtr hKey, string subKey, int ulOptions, int samDesired, out UIntPtr hkResult);

[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern uint RegSaveKey(UIntPtr hKey, string lpFile, IntPtr lpSecurityAttributes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:26:43.107

您似乎没有检查 RegOpenKeyEx 或 RegSaveKey 的返回值是否有错误。我怀疑你得到的返回值是 ERROR_PRIVILEGE_NOT_HELD。Registry 函数不使用 SetLastError 他们直接返回它。与几乎每个 Win32 API 调用一样，**必须**检查返回值。

无论您的 ACL 访问级别如何，RegSaveKey 都需要启用 SE_BACKUP_NAME 权限。因此，您需要在调用 RegSaveKey 之前添加代码以启用此权限，然后在调用完成后禁用它。

这是另一个包含更多信息的[问题](https://stackoverflow.com/questions/381055/regsavekey-returns-error-privilege-not-held)，我相信还有其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:08:55.263

首先，我想评论一下，您的问题遗漏了一些非常重要的细节。也就是说，您实际上并没有提供有关代码如何失败的任何信息。你只说：

> 我一直在尝试 P/Invoke RegSaveKey 无济于事。

像这样的问题都是关于细节的。我们需要看到精确而详细的错误诊断。请记住，我们看不到您的屏幕。

您需要更加注意 API 调用的返回值。您正在检查`RegOpenKeyEx`0 的返回值，但仅此而已。您需要捕获并检查`RegOpenKeyEx`. 那是一个错误代码。`Win32Exception`如果错误代码不等于零，您可以抛出 a 。

```
int err = RegOpenKeyEx(...);
if (err != 0)
    throw new Win32Exception(err); 
```

将代码更改为 throw `Win32Exception`，当错误发生时，您至少会得到一些信息性文本。所以，如果`RegOpenKeyEx`失败了，你至少会找出原因。

而且您根本没有检查其他 API 调用。给予他们同样的待遇。

您调用的失败模式确实很少`RegOpenKeyEx`。我可以编造的唯一合理的解释是注册表项不存在。我希望你已经检查过了。但请注意[注册表重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384232.aspx)。如果您的进程是在 64 位操作系统上运行的 32 位进程，那么重定向器会将您带到`WOW6432Node`注册表部分，即 32 位视图。也许您所说的“无济于事”是指将信息保存到文件中，但这是错误的信息。这与使您感到困惑的注册表重定向器一致。

如果那是什么在咬你，那么`KEY_WOW64_64KEY`在调用`RegOpenKeyEx`. 或以 x64 为目标。

`RegistryKey`使用它来打开钥匙会容易得多。我知道你不能轻易打电话`RegSaveKey`，所以你仍然需要 p/invoke 。但是`RegistryKey`暴露了一个`Handle`你可以传递给`RegSaveKey`. 有一个附带条件。如果您确实需要使用该`KEY_WOW64_64KEY`标志，则需要 .net 4 和`RegistryView`.

至于`RegSaveKey`，我听从斯蒂芬在回答中给出的信息。

# html - 里面有一个标签

> ID：14649450
> 
> 赞同：0
> 
> 时间：2013-02-01T15:21:28.527
> 
> 标签：html, standards

> **可能重复：**
> [我们可以根据 Web 标准将 `<img>` 放在 `<h1>` 中吗？](https://stackoverflow.com/questions/1605454/can-we-place-img-inside-h1-according-to-web-standards)

我想在每个 H1 标题的末尾添加一个小图像，最简单的方法是创建图像并简单地

```
<h1>Title <img src="image.png" ></h1> 
```

我不想使用背景图像，因为我希望图像位于 h1 标题的末尾，这意味着它会有所不同，并且只能固定背景。

在任何 html 标准中，标题标签中的 img 标签是无效代码吗？

我通过 HTML5 的 W3 标记验证运行了这个：

```
<h1>Hello <img src="smiley.gif" alt="Smiley face" height="42" width="42"></h1> 
```

我收到以下错误：

第 1 行，第 19 列：元素头缺少子元素标题的必需实例。

有谁知道那是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:26:02.153

根据[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Heading_Elements) ，标签的内容`<h1>`应该是“短语内容”，其中也包括`<img>`标签。

另一方面，您可以使用[CSS 样式`background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position)来对齐您想要的背景图像：

```
background-image: url( image.png );
background-position: right; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:23:29.260

让您的页面从 w3c 验证，他们会告诉您。[http://validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T15:26:15.183

我不认为这是无效的，但正如@Ekonion w3.org 所建议的那样，这是检查它的正确选项。

除此之外，您还可以根据需要使用 css`background-position`将图像定位在背景中。反正只是一个替代品:)

希望能帮助到你。

# sql - NULL 时需要包含 SQL 查询

> ID：14649451
> 
> 赞同：0
> 
> 时间：2013-02-01T15:21:33.033
> 
> 标签：sql, sql-server, sql-server-2008

此查询完美运行，并创建了包含所有必要列的临时表，但我也希望它在第 3 列时包含行`NULL`（目前它只在第 3 列中有数据时才给我行）。

```
 SELECT column1
        ,column2
        ,column3
        ,column4
        ,column5
  FROM Table1 
  INNER JOIN Table2
  ON table1.column3 = table2.column3 
```

我尝试了不同的语句，例如 AND、OR，但都不起作用。由于我是初学者，我可能只是没有正确应用该语句。每当我尝试某些东西时，它要么给我 0 行，要么比它应该给我的行数多数十万。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:28:02.687

即使没有匹配项，您也可以使用`LEFT`JOIN 从 中返回所有行：`Table1``Table2`

```
SELECT column1
    ,column2
    ,column3
    ,column4
    ,column5
FROM Table1 
LEFT JOIN Table2
ON table1.column3 = table2.column3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:24:16.440

这是一个如此简短的答案，它可能应该是一个评论，但是.....改变你`INNER JOIN`的`LEFT JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:24:37.187

您正在寻找的是 a`LEFT JOIN`而不是您的`INNER JOIN`：

```
 SELECT column1
        ,column2
        ,column3
        ,column4
        ,column5
  FROM Table1 
  LEFT JOIN Table2
  ON table1.column3 = table2.column3 
```

# c - 'c'中的for循环

> ID：14649452
> 
> 赞同：-5
> 
> 时间：2013-02-01T15:21:34.130
> 
> 标签：c

```
#include<stdio.>
#include<conio.h>

void main()
{
    for(;;);
    getch();
} 
```

编译时为 getch() 提供错误无法访问的代码。如果编译时没有分号

```
void main()
{
    for(;;)
    getch();
} 
```

然后错误被删除。你能解释一下这是如何工作的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:24:57.190

缩进你的代码以避免这种混淆。我个人总是使用`{}`来避免此类错误。

```
for(;;); // Infinite for loop
getch(); // Runs after the for loop (thus unreachable)

for(;;)
   getch();  // Calls getch() for each iteration 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:23:57.363

`for(;;);`应该被认为是

```
for(;;)
    ; 
```

即不断执行空语句的无限循环。超出此循环的任何代码都无法访问，因此会发出警告。

你的第二个版本应该被认为是

```
void main()
{
    for(;;)
        getch();
} 
```

这也是一个无限循环，但它后面没有代码，因此没有无法访问的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T15:24:17.447

```
for(;;); 
```

不同于：

```
for(;;) 
```

在第一种情况下，仅在for 循环完成执行`for`后才执行***后面***的语句。
这使得`getch()`确实无法访问，您的编译器会通过诊断来抱怨：

*无法访问的代码`getch()`。*

`for`在第二种情况下，在 for 循环的每次迭代中执行之后的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:25:59.303

`for(;;);` 什么都不做无限。因此，此语句之后的其余代码无法访问，因此您的错误。

```
for(;;)
    getch(); 
```

无限从标准输入中获取字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:26:03.880

```
for(;;); 
```

要求 ';' 的无限循环 空指令。

因此，这个循环之后的任何代码都不会被执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T15:25:14.530

因为`for(;;)`是无限循环。因此，如果您将 the`;`放在最后，`fetch();`则永远不会到达，因为它在循环之外。

# jquery - 在 JQuery 中的拖放事件之后返回元素的新顺序

> ID：14649453
> 
> 赞同：5
> 
> 时间：2013-02-01T15:21:35.280
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-sortable

我已将样品放在以下位置：http: [//jsbin.com/axegem/1](http://jsbin.com/axegem/1)

这是场景。当我将 div 拖放到另一个地方时，我需要检索 div 的新顺序。**例如，假设（关于我的示例），我在DIV 6**之后拖放了**DIV 3**。现在我正在尝试获取 div 的新顺序。为了进行测试，我在以下代码中提醒他们的 html 文本：

 **```
$(".draggable").each(function(){
  alert($(this).html());
}); 
```

我期望警报顺序为：**DIV 1, DIV 2, DIV 4, DIV 5, DIV 6, DIV 3, DIV 7, DIV 8, DIV 9**。但我在样本中得到的是**DIV 1, DIV 2, DIV 3, DIV 4, DIV 5, DIV 6, DIV 7, DIV 8, DIV 9**。

将 div 放到新位置后，如何获得新的 div 顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T16:18:18.797

我已经更改了一些代码以满足您的需求。

我已经更改为使用[**Sortable**](http://jqueryui.com/sortable/#default)功能，那是因为您使用了**可拖动**的唯一药物而不是排序元素。

当您使用 Sortable 时，很容易得到排序的元素

```
$(document).ready(function() {
    $('#divOuter2').css("margin","-540px 0 0 400px");
    $('#divOuter3').css("margin","-540px 0 0 800px");

    $(".droppable").sortable({
      update: function( event, ui ) {
        Dropped();
      }
    });

  });

    function Dropped(event, ui){
      $(".draggable").each(function(){
        //var p = $(this).position();
        alert($(this).html());
      });
      refresh();
    } 
```

我已将带有类的 DOM 元素设置`.droppable`为可排序的。

然后在[更新](http://api.jqueryui.com/sortable/#event-update)事件我调用你的函数`Dropped`

[查看示例](http://jsbin.com/axegem/10/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:14:54.013

draggable 的问题在于它所做的只是在空闲空间中移动项目，而不关心排序。Droppable 可以提供帮助，但更关心的是确定对象是否在容器内。

**尝试使用sortable**，而不是使用 draggable 和 droppable 。它使诸如设置项目排序顺序之类的事情变得非常简单。这样，您也不必再担心它是否符合正确的顺序。

看看这个：http: [//jsbin.com/axegem/6/](http://jsbin.com/axegem/6/)**

# php - 如何获得调色板

> ID：14649458
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:21:52.853
> 
> 标签：php, c++, colors, color-palette

我怎样才能在我的网站上上传调色板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:27:33.957

如果您发现不使用 C++ 就无法获得它们，您可以在 C++ 中使用 GDI+。其中有 Bitmap 或 Image 类。您只需要获取像素，通过它们并获取 RGB。如果我理解你的问题。

# sql - 报表生成器创建新列而不是页面

> ID：14649459
> 
> 赞同：1
> 
> 时间：2013-02-01T15:21:55.267
> 
> 标签：sql, reportbuilder

我正在使用报告生成器来生成信件。我想要做的是有一列值，但是当它到达页面末尾时，我希望它溢出到第一列右侧的新列，而不是创建一个新页面。或者，如果它在创建新行之前跨多个列填充数据，它会起作用。

这是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:34:23.153

您必须从 sql 存储过程区域中找到解决方法，因为 SSRS 中的 tablix 基于检索到的数据集，这不是报表生成器中的功能或解决方法。

我建议您尝试创建一个存储过程，为您对一组或多列进行此操作，并针对设置的行数进行测试。这必须针对您的 sql 平台进行定制。

祝你好运，我喜欢你的要求和问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:52:52.780

我会寻求解决方法：基本上解决方案是定义查询以在列中显示您的数据（例如列 A - 值 1-60，列 B - 值 61-120 ...）。

然后您可以将每一列定义为不同的数据集。

在 SSRS 中，您可以定义表的数量（每个表将仅包含一列）并将它们彼此相邻放置。（使用表格可见性隐藏`null`表格）

**让我们开始吧：**

首先，您需要知道有多少行适合一页（对于此示例，假设为 60）。

接下来，您需要知道您可以拥有的最大值是多少（对于此示例，假设为 180）。

根据以下内容定义您的查询：

```
WITH NumberedMyTable AS
(
    SELECT
        Id,
        Value,
        ROW_NUMBER() OVER (ORDER BY Id) AS RowNumber
    FROM
        MyTable
)
SELECT
    Id,
    Value
FROM
    NumberedMyTable
WHERE
    RowNumber BETWEEN @From AND @To 
```

对每一列重复此查询（对于此示例，您需要定义此查询 3 次）。

然后定义 3 个表 - 每个表一列，并相应地将每个数据集定义为它们的值。

定义 tablix 可见性表达式，如下所示： `=IIf(CountRows("MyDataset") = 0,false,true)`

**那它！**

# android - RingShapeDrawable 的半径设置为父级的高度而不是宽度

> ID：14649461
> 
> 赞同：3
> 
> 时间：2013-02-01T15:22:09.320
> 
> 标签：android, xml, layout, drawable

我目前正在使用可绘制对象来获得环形图像视图。

问题是：我在一行中有两个这样的图像视图，它们的权重=1，所以它们都具有相同的宽度。形状环drawable的xml标签属性“innerRadiusRatio”依赖于drawable的宽度。因此，如果 imageview 的宽度变得大于高度，则将裁剪环形。有什么办法可以让 innerRadiusRatio 依赖于高度而不是宽度？甚至将其 scaleType 设置为“fitCenter”或类似的东西？

这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_height="64dip"
          android:layout_width="match_parent">
<ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/ring_shape_drawable"
    android:src="@drawable/test_button_drawable"/>

<ImageView        
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/ring_shape_drawable"
    android:src="@drawable/test_button_drawable"/>
</LinearLayout> 
```

这是形状drawable的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:innerRadiusRatio="2.8"
    android:thicknessRatio="30"
    android:useLevel="false"
    android:shape="ring" >

    <solid android:color="@color/custom_red" />

</shape> 
```

这是结果（我不想要裁剪的 ringShapeDrawable）： ![在此处输入图像描述](../Images/1c8496788491e8c15c566c9fc06dd2b8.png)

这将是期望的结果： ![在此处输入图像描述](../Images/0c3476b60c21a0f8e017812a56396d0e.png)

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:23:44.537

由于您在 LinearLayout 中指定了一个恒定的高度，因此您应该能够使用[innerRadius](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html#attr_android%3ainnerRadius)属性。您可能还希望将 thicknessRatio 切换为具有设定尺寸的厚度。

我查看了 GradientDrawable 的源代码，似乎没有一种简单的方法可以让它使用高度，所以如果 innerRadius 不合适，你可能不得不将每个 ImageView 包装在另一个 LinearLayout 和以 android:gravity 为中心。这样做需要drawable确定ImageView的大小或手动指定它，所以innerRadius可能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:04:11.543

如果将 ImageViews 的 height 和 weight 属性设置为 ，您应该会得到您想要的结果`wrap_content`。

# ios - (AFNetworking) APIClient 工作到第二次

> ID：14649462
> 
> 赞同：0
> 
> 时间：2013-02-01T15:22:11.847
> 
> 标签：ios, objective-c, afnetworking

我正在使用这种方法：

```
- (void)reload:(id)sender {
    mutableImagenes=[[NSMutableArray alloc]init];
     NSMutableArray *arrayImagenes=[[NSMutableArray alloc] init];
    [Inicio ConexionInicio:^(NSArray *imagenesArray, NSError *error) {
        if (error) {
            [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", nil) message:[error localizedDescription] delegate:nil cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"OK", nil), nil] show];
        } else {
            _ArrayInicio = imagenesArray;
            for(Inicio *i in _ArrayInicio){
                [mutableImagenes addObject:i];
            }
        }
    }];
} 
```

它工作正常，但直到第二次，我的意思是，当我第一次调试它时，它会转到“Inicio ConexionInicio：...”，它会下降，即：我调用`[reload:nil]`，`ViewDidLoad`所以在它之后我立即需要数组“ reload" 加载，但没有发生，reload 将数组返回给我，直到`ViewDidLoad`完成，我要问的是：有谁知道 AFNetworking 是否总是在第二次之前执行该方法？，让我告诉你什么是`ConexionInicio`：

```
+ (void)ConexionInicio:(void (^)(NSArray *imagenesArray, NSError *error))block {
    [[APIClient sharedClient] getPath:@"/WebConnection/ServletInicioJSON" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON) {
        NSArray *imagenesFromResponse = [JSON valueForKeyPath:@"Inicio"];
        NSMutableArray *mutableImagenes = [NSMutableArray arrayWithCapacity:[imagenesFromResponse count]];
        for (NSDictionary *attributes in imagenesFromResponse) {
            Inicio *i = [[Inicio alloc] initWithAttributes:attributes];
            [mutableImagenes addObject:i];
        }

        if (block) {
            block([NSArray arrayWithArray:mutableImagenes], nil);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        if (block) {
            block([NSArray array], error);
        }
    }];
} 
```

第一次加载失败`[[APIClient sharedClient] getPath:@"/WebConnection/ServletInicioJSON" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON)]`然后退出

# jquery - 换行时使用 Jquery 调整 div 宽度

> ID：14649464
> 
> 赞同：0
> 
> 时间：2013-02-01T15:22:13.673
> 
> 标签：jquery

有没有办法改变 div 的宽度（我将它用作内联块）以使其某些内容包装时恰好成为所需的必要宽度？

我在 Jquery 方面不是太有经验..

另外，我使用的是 1.8.3 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:25:40.530

```
width:auto 
```

或者

```
$("#yourid").css("width", "auto"); 
```

[这里](http://jsfiddle.net/YsjsS/3/)

# sql - 针对大型表优化带有范围 WHERE 子句的 SQL 查询

> ID：14649465
> 
> 赞同：1
> 
> 时间：2013-02-01T15:22:15.277
> 
> 标签：sql

我有一个包含三列的数据库表：ID、时间戳和字符串。每天大约插入 14,000 行，所以表非常大。它目前有 130 万行。

表定义：

```
CREATE TABLE readings (
  id int primary key auto_increment,
  ts datetime not null, --the timestamp
  json text not null --the string
); 
```

我正在运行的查询是：

```
SELECT * FROM readings WHERE ts >= 'TIME_START' AND ts <= 'TIME_END' ORDER BY ts 
```

执行查询大约需要 45 秒。如何修改表和/或查询以使其更快？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:23:55.517

`ts`在表上添加一个新索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:32:17.557

我唯一想到的是[分区](http://www.openlogic.com/wazi/bid/195905/Tips-and-Tricks-to-Optimize-MySQL)，假设你把一切都设置好了。您可能还想尝试不同的数据库引擎（例如 InnoDB）。或者在 ts 列中设置索引。

除此之外 - 使用 >= <= vs BETWEEN 不会对性能产生任何影响，所以不用担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:30:43.420

试试下面的查询..如果索引在 id 上，这可能会更快

```
declare @min_id as int
declare @max_id as int

select @min_id = min(id)
from readings WHERE ts = 'TIME_START' 

select @max_id = max(id)
from readings WHERE ts = 'TIME_END'

SELECT * FROM readings  
id between @min_id and @max_id order by id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:24:54.870

您可以使用自动增量的主 ID 对结果进行排序。

# wcf-data-services - 什么是 ResourceTypeKind.ComplexType？

> ID：14649467
> 
> 赞同：1
> 
> 时间：2013-02-01T15:22:19.660
> 
> 标签：wcf-data-services

正如我[在上一个问题中提到的](https://stackoverflow.com/questions/14639514/how-do-i-expose-related-data-through-a-wcf-data-service/)，我阅读了 Alex D. James 的优秀的三年前的 WCF 数据服务自定义提供程序博客。当我进入有关相关数据的部分时，我们盲目地将所有数据描述为`ResourceTypeKind.EntityType`. [我查了文档](http://msdn.microsoft.com/en-us/library/system.data.services.providers.resourcetypekind.aspx)，没有关于使用的定义或指导`ResourceTypeKind.ComplexType`。

我假设它是一种始终包含在我的查询中的非原始类型，但找不到任何可以证实这一点的东西。这将是用于 EF 的模型。我认为这就是为什么它甚至存在的原因。

如果我的假设是正确的，我是否`ComplexTypes`以与我相同的方式定义 my `ResourceTypeKind.EntityTypes`？我可以为 WCF 数据服务 ComplexTypes 假设与 EF ComplexTypes 相同的规则吗？

**[编辑]**跨 WCF 数据服务（又名 OData）进行查询有什么影响？我应该使用 .Expand(complex) aka $expand 吗？在使用 LInQ 和 WCF 数据服务客户端的客户端中，我是否应该创建匿名类型以获取复杂类型？客户是否知道他们是 ComplexType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:29:51.617

OData 中的复杂类型与 EF 中的复杂类型非常相似。通过 OData，它们被视为原子“值”类型。所以响应总是包含整个值（即使它是嵌套的，即在层次结构中包含多个复杂类型等等）。

至于查询支持，客户端只有在请求单个值时才能寻址到复杂类型。（假设 Address 是 Customer 的一个属性，类型是复杂类型）。因此，例如 ~/Customers(1)/Address/City 是一个有效的查询，它只返回 Address 复杂值的 City 属性。

由于该值被视为原子值，因此 $expand 对其不起作用（它将失败，因为它仅适用于导航属性）。$select 确实有效，但仅适用于整个复杂属性。所以我可以做 ~/Customers?$select=Address 这将返回我所有的客户，但只有 Address 属性。我不能做 ~/Customers?$select=Address/City - 这是无效的。

以某种方式，您可以将复杂属性视为“始终扩展”，但最好不要将它们视为实体/导航，而是将它们视为单独的事物。

# reporting-services - 从报告向多个电子邮件地址发送电子邮件

> ID：14649470
> 
> 赞同：0
> 
> 时间：2013-02-01T15:22:28.107
> 
> 标签：reporting-services

我有一份包含客户信息（包括电子邮件地址）的 SSRS 报告。我可以确保在单击电子邮件地址时打开 Outlook：

```
="MailTo:" & Fields!Email.Value) 
```

但是，现在我想在报表标题中有一个链接，它可以打开带有报表中*所有*电子邮件地址的 Outlook。我可以像这样创建一个存储过程：

```
DECLARE @_Email varchar(MAX)

SELECT @_Email = COALESCE(@_Email + '; ', '') + EmailAddress
FROM   MyTable

SELECT @_Email 
```

但是，报告已经有很多参数，这将是另一个大程序。有没有更简单的方法可以使用 vbscript 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:27:29.630

这是一种可能的解决方案：

1.  使用如下查询创建数据集“EmailAddresses”`SELECT EmailAddress FROM MyTable`
2.  [创建*多值*文本参数](http://msdn.microsoft.com/en-us/library/dd220464.aspx) `@EmailAddresses`
3.  设置要从“EmailAddresses”数据集中检索的默认值
4.  将您的表达式更新为`="Mailto:" & Join(Parameters!EmailAddresses.Value, "; ")`

根据您的选择，您可以保持参数可见，或使其内部/隐藏。

# android - HTTP/1.1 415 不支持的媒体类型

> ID：14649473
> 
> 赞同：1
> 
> 时间：2013-02-01T15:22:44.907
> 
> 标签：android, rest, video, upload

我想通过我的 android 应用程序使用以下代码上传视频。

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(uri);
MultipartEntity entity = new MultipartEntity();
ContentBody input = new FileBody(file);
ContentBody name  = new StringBody("VID_20130201_162220.3gp");
ContentBody description = new StringBody("Test Description");
entity.addPart("input",input);
entity.addPart("name",name);
entity.addPart("description",description);
httpPost.setEntity(entity);
HttpResponse response = httpClient.execute(httpPost);
HttpEntity httpEntity = response.getEntity(); 
```

当 httpClient.execute() 方法返回响应时，它显示“HTTP/1.1 415 Unsupported Media Type”

我也尝试过从 HttpPost 中删除 MultipartEntry，但它仍然给出了同样的错误。

有人可以建议我可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T12:19:04.823

试试这个解决方案：它适用于大多数类型的文件。

```
private DefaultHttpClient mHttpClient;
Context context;
public String error = "";

//Contrutor para que metodos possam ser usados fora de uma activity
public HTTPconector(Context context) {
    this.context = context;
}

public HTTPconector() {
    HttpParams params = new BasicHttpParams();
    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
    mHttpClient = new DefaultHttpClient(params);
}

public void FileClientPost(String txtUrl, File file){
    try
    {
        error = "";
        HttpPost httppost = new HttpPost(txtUrl);
        MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        multipartEntity.addPart("Image", new FileBody(file));
        httppost.setEntity(multipartEntity);
        mHttpClient.execute(httppost, new PhotoUploadResponseHandler());
    }
    catch (Exception e)
    {
        Log.e(HTTPconector.class.getName(), e.getLocalizedMessage(), e);
        e.getStackTrace();
        error = e.getMessage();
    }
}

//Verifica se a rede esta disponível
public boolean isNetworkAvailable() {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = cm.getActiveNetworkInfo();
    // if no network is available networkInfo will be null
    // otherwise check if we are connected
    if (networkInfo != null && networkInfo.isConnected()) {
        return true;
    }
    return false;
}

public String Get(String txtUrl){
    try {
        URL url = new URL(txtUrl);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setReadTimeout(10000);
        con.setConnectTimeout(15000);
        con.setRequestMethod("GET");
        con.setDoInput(true);
        con.connect();

        return readStream(con.getInputStream());

    }  catch (ProtocolException e) {
        e.printStackTrace();
        return "ERRO: "+e.getMessage();
    } catch (IOException e) {
        e.printStackTrace();
        return "ERRO: "+e.getMessage();
    }
}

public String Post(String txtUrl){
    File image;

    try {
        URL url = new URL(txtUrl);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setRequestMethod("POST");
        con.setDoInput(true);
        con.setDoOutput(true);
        con.connect();

        //con.getOutputStream().write( ("name=" + "aa").getBytes());

        return readStream(con.getInputStream());
    } catch (ProtocolException e) {
        e.printStackTrace();
        return "ERRO: "+e.getMessage();
    } catch (IOException e) {
        e.printStackTrace();
        return "ERRO: "+e.getMessage();
    }
}

//Usado para fazer conexão com a internet
public String conectar(String u){
    String resultServer = "";
    try {
        URL url = new URL(u);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        resultServer = readStream(con.getInputStream());
    } catch (Exception e) {
        e.printStackTrace();
        resultServer = "ERRO: "+ e.getMessage();
    }

    Log.i("HTTPMANAGER: ", resultServer);
    return resultServer;
}

//Lê o resultado da conexão
private String readStream(InputStream in) {
    String serverResult = "";
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader(in));
        String line = "";
        while ((line = reader.readLine()) != null) {
            System.out.println(line);
        }

        serverResult = reader.toString();
    }   catch (IOException e) {
        e.printStackTrace();
        serverResult = "ERRO: "+ e.getMessage();
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
                serverResult = "ERRO: "+ e.getMessage();
            }
        }
    }
    return  serverResult;
}

private class PhotoUploadResponseHandler implements ResponseHandler<Object>
{
    @Override
    public Object handleResponse(HttpResponse response)throws ClientProtocolException, IOException {

        HttpEntity r_entity = response.getEntity();
        String responseString = EntityUtils.toString(r_entity);
        Log.d("UPLOAD", responseString);
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:47:47.483

您需要告诉服务器允许 3gp 媒体类型。如果您使用的是 Apache，您可以通过添加`AddType video/3gpp .3gp`到服务器的配置文件中来做到这一点。（我认为这是正确的语法）。

# mysql - MySQL：从查询中计算空值

> ID：14649478
> 
> 赞同：1
> 
> 时间：2013-02-01T15:22:59.837
> 
> 标签：mysql

我有一个像这样的查询：

```
SELECT * FROM table WHERE id = 1 
```

结果是`YES | null | null | NO | null`等等。

我想知道我得到了多少 NULL 值，有 3 个。如果可能的话，不告诉每个列名。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:37:26.787

试试这个

```
SELECT *, ((col1 IS NULL) + (col2 IS NULL) + (col3 IS NULL)...) AS sum_null
FROM table WHERE id = 1 
```

# file - 在批处理文件中使用 mvn dependency:tree 从树中隐藏 maven 输出

> ID：14649486
> 
> 赞同：1
> 
> 时间：2013-02-01T15:23:46.987
> 
> 标签：file, maven, batch-file, dependencies

我编写了一个运行的批处理包装脚本

```
mvn dependency:tree 
```

在大量的Maven项目上。

我希望输出只显示树，我不需要 maven 打印的所有其他内容，例如

```
[INFO] Scanning for projects 
```

我尝试过**安静模式**，但因为树不是错误，我看不到任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:29:20.220

您可以使用[outputFile](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#outputFile)属性将其输出到文件中。如果您需要将输出全部附加到一个文件中，还请查看[appendOutput 。](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#appendOutput)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-02T15:34:16.920

您可以使用 grep 过滤掉不需要的元素：

```
function mvndeps {
    mvn dependency:tree -Dincludes="$1" | grep '^[^\[]\|ERROR\|\] B\|\]net\|\][[:space:]]*\\';
} 
```

# html - 现有模板 - Minecraft 服务器信息页面

> ID：14649491
> 
> 赞同：0
> 
> 时间：2013-02-01T15:24:01.107
> 
> 标签：html, minecraft

**背景：**最近我为 Minecraft 创建了一个游戏服务器。现在我想创建包含一些信息的网页，并在未来创建带有游戏记录的视频博客。

**问题：**这些页面的 HTML 5（<video>，将来可能是 canvas）模板是否已经完成并准备好重用？

例如[Starcraft 2 的 Fansite 套件](http://eu.battle.net/sc2/en/media/downloads/)（下载过滤器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:08:09.827

Enjin.com 是一个 CMS，可让您注册并拥有相关主题。如果您正在运行 Bukkit 或其任何分支，则有一个插件可以让 Enjin 查询您的服务器。

如果您有一点编码经验，我建议您从引导程序开始并使用 JSONAPI 插件来查询您的服务器。

# caching - Drupal 7 缓存破坏

> ID：14649493
> 
> 赞同：0
> 
> 时间：2013-02-01T15:24:08.250
> 
> 标签：caching, drupal-7, browser-cache

我有一个外部非 Drupal 网站 members.example.com，如果受众成员登录该网站，它会设置一个 cookie。它设置了一个对 Drupal 站点可见的 cookie，即：

$_COOKIE['name'] = '约翰·史密斯';

我想知道 members.example.com 登录用户可以访问 Drupal 站点 www.example.com 上的高级内容。我还想在网站的眉毛部分按名称显示已登录的会员。

问题是，在登录非 Drupal 站点 members.example.com 并返回 Drupal 站点 www.example.com 后，Drupal 仍在缓存很多内容，并且无法识别用户现在拥有$_COOKIE['name'] 设置。

我有：

将 settings.php 中的 cookie 域设置为“example.com”

试图破坏同样拥有 cookie 的匿名 Drupal 用户的缓存：

```
 /**
  * Implements hook_init()
  */
function caplogin_init() {

  // Check for cookie if it's set to 'loggedout':
  if (isset($_COOKIE['name'])) {
    if (strpos($_COOKIE['name'],'loggedout') !== FALSE) {
      // Log them out on the www site too:
      setcookie('name', '', 1, '/', '.example.com');
      global $user;
      if ($user->uid > 0) {
        user_logout();
      }
      $reason = 'Members server logout.';
      _caplogin_no_cache($reason);
      drupal_set_message(t('You have been logged out of the site. Thanks for visiting!'));
    }
    else {
      $reason = 'Member logged in internal server.';
      _caplogin_no_cache($reason);
    }
  }
} 
```

和...

```
function _caplogin_no_cache($reason) {
    if (!$reason) {
      $reason = 'no-cache called by site functionality.';
    }
    drupal_add_http_header('X-DRCC-No-Cache-Reason', $reason);
    drupal_add_http_header('Pragma', 'no-cache');
    drupal_add_http_header('Last-Modified', gmdate('D, d M Y H:i:s') . ' GMT');
    drupal_add_http_header('Cache-Control', 'no-store, no-cache, must-revalidate, pre-check=0, post-check=0, max-age=0');
    drupal_add_http_header('Expires', 'Sat, 02 Jan 1971 00:00:00 GMT');
 } 
```

我还安装了 Devel 模块并（用于测试）选中了 ON 复选框，以便在每次页面加载时重建主题缓存。没运气。

如果您添加虚假查询字符串，它会破坏缓存，例如[http://www.example.com/?sdjaSDH](http://www.example.com/?sdjaSDH)

但客户端需要 Drupal 识别用户已登录外部 members.example.com 站点的功能。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:46:15.080

做这个

```
$GLOBALS['conf']['cache'] = FALSE; 
```

帮助 ？

您可能需要将此代码添加到 hook_boot() 或 hook_init() 并根据您的需要进行一些开关。

# java - 正确对齐控制台输出表中的列并从零开始计数

> ID：14649498
> 
> 赞同：3
> 
> 时间：2013-02-01T15:24:21.020
> 
> 标签：java, netbeans, console, console-application

所以我得到了这个 Java 代码，我试图在其中输出所有 128 个可能的 ASCII 代码、它们的十六进制值和十进制值。这是我现在拥有的代码。

```
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {

            Scanner Number = new Scanner(System.in);
            System.out.println("How many groups: ");
            int usernumber = Number.nextInt();

            int counter = 0;

            for (int i = 0; i < 1; i++) {
                for (int j = 0; j < 128; j++) {
                   String output = "";
                    if (j == 7 | j == 8 | j == 9 | j == 10 | j == 13){
                      output += " ";
                    } else {
                       output += (char) j;
                    }
                    output += " " + j + " " + Integer.toHexString(j);

                    if (Integer.toHexString(j).length() < 2){
                        output += "     ";
                    } else {
                        output += "\t";
                    }

                    if (counter == usernumber) {
                        output += "\n";
                        counter = 0;
                    }

                    System.out.print(output);
                    counter++;
                }
                System.out.println("\n ");
            }
    }
} 
```

我正在努力实现**这一**目标：

![期望的输出](../Images/00470530264e54771742cc82653d6509.png)

但是，我的控制台输出格式不正确，并且我的表格被严重误解，如您所见**[here]**：

![电流输出](../Images/3cf3d700c8a45a88618a6e618cf65581.png)

关于我做错了什么的任何帮助或想法？在我的代码中，由于某些数字被分配给无法在控制台中正确输出的声音或其他字符，我试图弥补留空的空间等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:36:32.000

而不是添加不同类型的字符，如：

```
if (Integer.toHexString(j).length() < 2){
    output += "     ";
} else {
    output += "\t";
} 
```

您应该尝试设置应显示的值的正确字符数，您可以使用 String.format 来完成，尝试更改以下语法。

```
String.format("%-2s - %-2d", stringValue, intValue); 
```

您可以将您的 for 更改为以下代码，这将完成这项工作

```
for (int j = 0; j < 128; j++) {
        counter++;
        char firstChar = (char) j;
        if (j == 7 || j == 8 || j == 9 || j == 10 || j == 13) {
            firstChar = ' ';
        }
        String output = String.format("%-3s %-3d %-4s", firstChar, j, Integer.toHexString(j));

        if (counter == usernumber) {
            System.out.println(output);
            counter = 0;
        }else{
            System.out.print(output);
        }
    } 
```

此外，计数器设置在错误的位置存在问题 - 您可以尝试将其更改为模数。

# vb.net - VB.net 在按下空格的同时按住 Ctrl 键

> ID：14649500
> 
> 赞同：0
> 
> 时间：2013-02-01T15:24:33.150
> 
> 标签：vb.net

您好，第一次发布海报我在查找在按下空格时按住 Ctrl 键的代码时遇到问题。我到处都是，但找不到任何可以帮助我以我需要的方式的例子。以下是我检查过的一些主题：

[http://www.a1vbcode.com/vbforums/Topic25861-5-1.aspx](http://www.a1vbcode.com/vbforums/Topic25861-5-1.aspx)

[http://www.mpgh.net/forum/33-visual-basic-programming/391580-vb-hold-key-down.html](http://www.mpgh.net/forum/33-visual-basic-programming/391580-vb-hold-key-down.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:43:18.990

显然，只有*用户*才能真正按住一个键。但是，您可以模拟按住控制键的效果。Windows API 具有`SendInput()` 您可以从 VB.Net 调用来完成您想要的功能：

[http://msdn.microsoft.com/en-us/library/ms646310%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms646310%28v=vs.85%29.aspx)

# php - ruby on rails 注册模块中没有路由匹配

> ID：14649507
> 
> 赞同：0
> 
> 时间：2013-02-01T15:25:01.610
> 
> 标签：php, ruby-on-rails

我开发了一个包含注册模块的php应用程序（这个应用程序记录在www文件下）

这个应用程序使用了一个用 ruby​​ on rails 开发的应用程序

但是当我测试这个应用程序时（我谈论的是 php 应用程序）

我在 ruby​​ on rails 的控制台中有这个错误

```
 Parameters: {"_"=>"1359731468907", "mobile"=>"22222222", "idcard"=>"01256321", "callback"=>"jQuery17103156804504705649_1359731205632"}

ActionController::RoutingError (No route matches "/cui/public/inscription/m.php" with {:method=>:get}):
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/routing/recognition_optimisation.rb:67:in `recognize_path'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/routing/route_set.rb:384:in `recognize'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:148:in `handle_request'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:107:in `dispatch'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:104:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:104:in `dispatch'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:120:in `dispatch_cgi'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/dispatcher.rb:35:in `dispatch'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:76:in `process'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `process'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel/configurator.rb:282:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel/configurator.rb:281:in `each'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel/configurator.rb:281:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:128:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/lib/mongrel/command.rb:212:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:502:in `load'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:502:in `load'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:354:in `new_constants_in'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:502:in `load'
    /usr/lib/ruby/gems/1.8/gems/rails-2.1.0/lib/commands/servers/mongrel.rb:64
    /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:509:in `require'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:354:in `new_constants_in'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.1.0/lib/active_support/dependencies.rb:509:in `require'
    /usr/lib/ruby/gems/1.8/gems/rails-2.1.0/lib/commands/server.rb:39
    /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3

Rendering /usr/lib/ruby/gems/1.8/gems/actionpack-2.1.0/lib/action_controller/templates/rescues/layout.erb (not_found) 
```

在配置下的 router.rb 中，我有以下代码：

```
 ActionController::Routing::Routes.draw do |map|
      # The priority is based upon order of creation: first created -> highest priority.

      # Sample of regular route:
      #   map.connect 'products/:id', :controller => 'catalog', :action => 'view'
      # Keep in mind you can assign values other than :controller and :action

      # Sample of named route:
      #   map.purchase 'products/:id/purchase', :controller => 'catalog', :action => 'purchase'
      # This route can be invoked with purchase_url(:id => product.id)

      # Sample resource route (maps HTTP verbs to controller actions automatically):
      #   map.resources :products

      # Sample resource route with options:
      #   map.resources :products, :member => { :short => :get, :toggle => :post }, :collection => { :sold => :get }

      # Sample resource route with sub-resources:
      #   map.resources :products, :has_many => [ :comments, :sales ], :has_one => :seller

      # Sample resource route within a namespace:
      #   map.namespace :admin do |admin|
      #     # Directs /admin/products/* to Admin::ProductsController (app/controllers/admin/products_controller.rb)
      #     admin.resources :products
      #   end

      # You can have the root of your site routed with map.root -- just remember to delete public/index.html.
      map.root :controller => "login"

      # See how all your routes lay out with "rake routes"
      map.connect '/send', :controller => 'transaction', :action => 'send_transaction'
      map.connect '/admin/users/:action', :controller => 'admin_users'
      map.connect '/admin/users/:action/:login/', :controller => 'admin_users'
      map.connect '/admin_admins/:action/:role/', :controller => 'admin_admins'
      map.connect '/admin_accounts/:action/:login/:account_id', :controller => 'admin_accounts'
      map.connect '/admin_admins/:action/', :controller => 'admin_admins'
      map.connect '/add_admin', :controller => 'admin_admins', :action => 'add_confirm'
      map.connect '/archidoc/:date', :controller => 'archidoc'
      map.connect '/reporting/:date', :controller => 'reporting'
      map.connect '/approve_pay', :controller => 'approve_pay'

      # Activating email address.
      map.connect '/activation/:code', :controller => 'user', :action => 'activation'
      map.connect '/activate/:activation_code', :controller => 'admin', :action => 'activate'
      # Resend confirmation.
      map.connect '/confirm_email', :controller => 'user', :action => 'confirm_email'

     #  map.connect '/link_account/:login', :controller => 'admin_users', :action => 'link_account'
     #  map.connect '/admin_admin_account/:login', :controller => 'admin_admin', :action => 'link_account'

      # Install the default routes as the lowest priority.
      map.connect ':controller/:action/:login'
      map.connect ':controller/:action/:login.:format'
      map.connect ':controller/:action/'

    #  map.connect '/setmeup/:login', :controller => 'login', :action => 'test_setup'
      # random requests to a null stylesheet clutter up the logs
      map.connect '/stylesheets/null', :controller => 'login', :action => 'null'
    end 
```

也许我应该在这个文件中添加另一行以使 ruby​​ 能够回答 /cui/public/

正如我所说的 php 应用程序被命名为 public 我在 apache 的 www 下创建它

我也在 ruby​​ on rails 的源代码下制作了这个应用程序

在 www 下的 php 应用程序中，我有以下文件：

mdinar.js

```
var idtype;
var mobile;
var idtype ;
var mobile;
var idcard ;
var firstname; 
var lastname ;
var formid;
var email;
var gender;
var ip_access;
var step = 1;
var dom = "http://0.0.0.0:3000/cui/public/inscription";

jQuery(document).ready( function () {

    jQuery("ul#bottom-menu.menu li:last").css({"border":"0px"});

    jQuery("a[rel='grille']").click(function(){ jQuery("div.accordionButton[id='grille']").trigger('click'); });

    jQuery("#page_nav a:first").addClass("selected");

    jQuery('#page_slider').cycle({ 
        fx:     'scrollHorz', 
        speed:   300
    })

    jQuery('#page_slider').cycle('pause');
    jQuery("#page_nav a[rel]").click(function() {
        jQuery("#page_nav a[rel]").removeClass("selected");
        jQuery(this).toggleClass("selected");

        var arr = jQuery(this).attr('rel').split('cycle-') ;
        var i = arr[1];

        jQuery('#page_slider').cycle('resume');
        jQuery('#page_slider').cycle(parseInt(i));
        jQuery('#page_slider').cycle('pause');
    });

    jQuery("input:text[id='mobile']").keyup(function(e) {
        if ( jQuery(this).val().length > 8 )  {
            jQuery(this).val( jQuery(this).val().substr(0, 8) );
            return false;
        }
    });

    jQuery("input:text[id='cin']").keyup(function(e) {
        if ( jQuery(this).val().length > 10 )  {
            jQuery(this).val( jQuery(this).val().substr(0, 10) );
            return false;
        }
    });

    jQuery("input:text[id='mobile'],input:text[id='cin']").keydown(function(e) {
        key = parseInt(e.keyCode);

        // white tab
        if (key == 32 )
            return false;

        if ( key >= 48 ) if ( key <= 57 )
            return true;

        if ( key >= 96 ) if ( key <= 105 )
            return true;

        if ( key >= 13 ) if ( key <= 46 )
            return true;

        // delete 
        if (key == 8 )
            return true;

        // tab
        if (key == 9 )
            return true;

        return false;
    });

    if ( jQuery("#formSignup").length ) {
        jQuery("#formSignup").submit(function() {

            if ( !jQuery("input[id='cgu']").is(":checked") && ( jQuery('#bToStep1').length <= 0 ) ) {
                alert('Vous devez lire et approuver les Conditions Générales d\'Utilisation');
                return false;
            }

            if ( jQuery("#mobile").val() == "" ) {
                    alert('Le numéro de téléphone est obligatoire');
                    return false;
            }

            if ( jQuery("#idcard").val() == "" ) {
                    alert('Le numéro de la CIN/CS est obligatoire');
                    return false;
            }

            if ( jQuery("#lastname").val() == "" ) {
                    alert('Le nom est obligatoire');
                    return false;
            }

            if ( jQuery("#firstname").val() == "" ) {
                    alert('Le prénom est obligatoire');
                    return false;
            }

            if ( jQuery("#email").val() == "") {
                    alert('L\'email est obligatoire');
                    return false;
            }

            if ( (jQuery("#email").val() != "") && (jQuery("#email").val() != jQuery("#email2").val()) ) {
                    alert('Veuillez confirmer votre email');
                    return false;
            }

            if ( jQuery("#address").val() == "" ) {
                    alert('L\'adresse est obligatoire');
                    return false;
            }

            if ( jQuery("#city").val() == "" ) {
                    alert('La ville est obligatoire');
                    return false;
            }

            if ( jQuery("#zipcode").val() == "" ) {
                    alert('Le code postal est obligatoire');
                    return false;
            }

            /*if ( jQuery("input[id='bank_account:yes']").attr("checked") == "checked" ) {
                if ( jQuery("#bank").val() == "" ) {
                        alert('La banque est obligatoire');
                        return false;
                }

                if ( jQuery("#agency").val() == "" ) {
                        alert('L\'agence est obligatoire');
                        return false;
                }
            }*/

            return true;

        });

    }

    jQuery("a[rel='inscription']").click(function() {
        jQuery.colorbox({href:"#media_inscription", width:"960px", height:"370px", inline:true});
    });

    jQuery("a[rel='demande']").click(function() {
        jQuery.colorbox({href:"#media_demande", width:"960px", height:"370px", inline:true});
    });

    jQuery("a[rel='transfert']").click(function() {
        jQuery.colorbox({href:"#media_transfert", width:"960px", height:"370px", inline:true});
    });

    jQuery("a[rel='demo']").click(function() {
        jQuery.colorbox({href:"#media_demo", width:"960px", height:"370px", inline:true});
    });

    if ( jQuery("#media_inscription").length ) {
        var flashvars = {};
        var params = {"wmode":"transparent"};
        var attributes = {};

        swfobject.embedSWF(dom + "swf/mdinar_inscription_v1.swf", "media_inscription", "900", "300", "9.0.0","swf/expressInstall.swf", flashvars, params, attributes);

    }

    if ( jQuery("#media_demande").length ) {
        var flashvars = {};
        var params = {"wmode":"transparent"};
        var attributes = {};

        swfobject.embedSWF(dom + "swf/mdinar_demande_v1.swf", "media_demande", "900", "300", "9.0.0","swf/expressInstall.swf", flashvars, params, attributes);

    }

    if ( jQuery("#media_transfert").length ) {
        var flashvars = {};
        var params = {"wmode":"transparent"};
        var attributes = {};

        swfobject.embedSWF(dom + "swf/mdinar_transfert_v1.swf", "media_transfert", "900", "300", "9.0.0","swf/expressInstall.swf", flashvars, params, attributes);

    }

    if ( jQuery("#media_demo").length ) {
        var flashvars = {};
        var params = {"wmode":"transparent"};
        var attributes = {};

        swfobject.embedSWF(dom + "swf/mdinar_demo_v1.swf", "media_demo", "900", "300", "9.0.0","swf/expressInstall.swf", flashvars, params, attributes);

    }

    jQuery("input#bToStep3").click(function(){
        var b = jQuery("#mobile").val();
        var c = jQuery("#idcard").val();

        jQuery.colorbox({href:"#msgContent", width:"400px", height:"200px", inline:true, onClosed: function() {
            if (step == 2) {
                //jQuery("input#bToStep3").val("Terminer l'inscription");           
            }
        }});

        jQuery.post(dom + "/m.php?callback=?", {mobile:b,idcard:c}, function(data) {

            jQuery("#msgContent").html("<h1>" + data.message + "</h1>");

            if (data.status == "1") {
                if (data.go == "1") {
                    step = 2;

                    var t = jQuery("#idtype").val();
                    var f  =jQuery("#firstname").val(); 
                    var l = jQuery("#lastname").val();
                    var e = jQuery("#email").val();
                    var g = jQuery("#gender").val();

                    // added
                    var birthdate_d = jQuery("#birthdate_d").val();
                    var birthdate_m = jQuery("#birthdate_m").val();
                    var birthdate_y = jQuery("#birthdate_y").val();
                    var address = jQuery("#address").val();
                    var city = jQuery("#city").val();
                    var gouv = jQuery("#gouv").val();
                    var profession = jQuery("#profession").val();
                    var field = jQuery("#field").val();
                    var bank_account = jQuery("#bank_account").attr('checked');
                    var bank = jQuery("#bank").val();
                    var agency = jQuery("#agency").val();
                    var fb = jQuery("#fb").attr('checked');
                    var twitter = jQuery("#twitter").attr('checked');
                    var blog = jQuery("#blog").attr('checked');
                    var friends = jQuery("#friends").val();
                    var followers = jQuery("#followers").val();
                    var blog_url = jQuery("#blog_url").val();
                    var website = jQuery("#website").val();
                    var civil_status= jQuery("#civil_status").val();
                    var nickname= jQuery("#nickname").val();
                    var zipcode = jQuery("#zipcode").val();
                    var deliv_lieu = jQuery("#delivrance_lieu").val();
                    var deliv_d = jQuery("#delivrance_d").val();
                    var deliv_m = jQuery("#delivrance_m").val();
                    var deliv_y = jQuery("#delivrance_y").val();
                    var expir_d = jQuery("#expiration_d").val();
                    var expir_m = jQuery("#expiration_m").val();
                    var expir_y = jQuery("#expiration_y").val();

                    jQuery("#msgContent").html("<h1>Création de votre compte...</h1>" + jQuery("div#vlr").html() );

                    jQuery.post(dom + "/c.php?callback=?", {idtype:t,mobile:b,idcard:c,firstname:f,lastname:l,email:e,gender:g,deliv_lieu:deliv_lieu, deliv_d:deliv_d, deliv_m:deliv_m, deliv_y:deliv_y, expir_d:expir_d, expir_m:expir_m,expir_y:expir_y, birthdate_d:birthdate_d, birthdate_m:birthdate_m,birthdate_y:birthdate_y, address:address, city:city, gouv:gouv, profession:profession, field:field, bank_account:bank_account, bank:bank, agency:agency, fb:fb, friends:friends, twitter:twitter, followers:followers, blog:blog, blog_url:blog_url, website:website, civil_status:civil_status, nickname:nickname, zipcode:zipcode}, function(data2) {

                        //alert(data2);
                        step = 3;

                        jQuery("#msgContent").html("<h1>" + data2.message + "</h1>");
                        //jQuery.colorbox.resize({width:'400px',height:'300px'});

                        if (data2.status == "0") { 
                            /*
                            setTimeout(function (){ 
                                   jQuery.colorbox.close(); 
                                    //window.location.href = "http://www.xilionlabs.com/tmp/mdinar/inscription-terminee/";
                            }, 1000);
                            */
                        }
                        else if (data2.status == "1") {

                            setTimeout(function (){ 
                                   jQuery.colorbox.close(); 
                                    window.location.href = dom + "/signup-done.php?";
                            }, 5000);

                        }                       
                    }, "json");
                }
                else {

                }
            }
        }, "json");
    });

    jQuery("input#bToStep4").click(function(){
        var t = jQuery("#idtype").val();
        var b = jQuery("#mobile").val();
        var c = jQuery("#idcard").val();
        var f  =jQuery("#firstname").val(); 
        var l = jQuery("#lastname").val();
        var m = jQuery("#formid").val();
        var e = jQuery("#email").val();
        var g = jQuery("#gender").val();

        jQuery.colorbox({href:"#msgContent", width:"400px", height:"200px", inline:true});

        jQuery.post(dom + "c.php", {idtype:t,mobile:b,idcard:c,firstname:f,lastname:l,formid:m,email:e,gender:g}, function(data) {
            //alert(data);
            if (data.mdinar_mdinar_validate_cin.status == "error") {
                jQuery("#msgContent").html(data.register_online.reason);
            }
            else if (data.register_online.status == "ok") {
                jQuery("#msgContent").html("OK");
            }
        });
    });

    jQuery("#gouvernorats table[id='tunis']").show();
    jQuery("#gouvernorats h3").html("Tunis");

    jQuery("#mapgouv area[alt]").click(function(){
        jQuery(this).css({"background-color":"#ccffff"});
        jQuery("#gouvernorats h3").html(jQuery(this).attr("alt"));  
        jQuery("#gouvernorats table").hide();
        jQuery("#gouvernorats table[id='" + jQuery(this).attr("id") + "']").show();
    });

}); 
```

我也有 m.php ：

```
<?php
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    $mobile = urlencode($_POST["mobile"]);
    $idcard = urlencode($_POST["idcard"]);

    $url = "0.0.0.0:3000/mdinar_validate_cin/validate_cin?" ;
    $url .= "mobile=" . $mobile . "&idcard=" . $idcard . "&callback=?";

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_HEADER, 0); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    $data = curl_exec($ch); 
    curl_close($ch); 

    $data = json_decode($data, true);
    $result = array();
    //print_r($data);
    if ( $data["mdinar_mdinar_validate_cin"]["status"] == "error" ) {
        $result["status"] = 0;

        switch($data["mdinar_mdinar_validate_cin"]["reason"]) {
            case "must_be_tunisiana_num" :
                $result["message"] = "Le format du numéro de téléphone est incorrect";
                break;

            case "incorrect_phone_format":
                $result["message"] = "Le format du numéro de téléphone est incorrect";
                break;

            case "phone_format_digits_only":
                $result["message"] = "Lé numéro de téléphone doit être numérique";
                break;

            default:
                $result["message"] = "Erreur inattendue";
        }
    }
    else {
        if ( $data["mdinar_mdinar_validate_cin"]["status"] == "ok" ) {
            $result["status"] = 1;

            if ( $data["mdinar_mdinar_validate_cin"]["response"] == "true" ) {
                $result["message"] = "Compte valide";
                $result["go"] = 1;
            }
            elseif ( $data["mdinar_mdinar_validate_cin"]["response"] == "false" ) {
                $result["message"] = "Compte invalide";
                $result["go"] = 0;
            }   
        }
    }

    echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;
    exit;
}
$result["status"] = 0;
$result["message"] = "Erreur inattendue #2";

echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;
exit; 
```

c.php

```
<?php
session_start();

$formid = date("YmdHis");

if (true || $_SERVER['REQUEST_METHOD'] == "POST") {

    $idtype = urlencode(str_replace("\r\n", "", trim($_REQUEST["idtype"])));
    $mobile = urlencode(str_replace("\r\n", "", trim($_REQUEST["mobile"])));
    $idcard = urlencode(str_replace("\r\n", "", trim($_REQUEST["idcard"])));
    $firstname = urlencode(str_replace("\r\n", "", trim($_REQUEST["firstname"]))); 
    $lastname = urlencode(str_replace("\r\n", "", trim($_REQUEST["lastname"])));
    $email = urlencode(str_replace("\r\n", "", trim($_REQUEST["email"])));
    $gender = urlencode(str_replace("\r\n", "", trim($_REQUEST["gender"])));
    $alias = urlencode(str_replace("\r\n", "", trim($_REQUEST["nickname"])));
    $dob_d = urlencode(str_replace("\r\n", "", trim($_REQUEST["birthdate_d"])));
    $dob_m = urlencode(str_replace("\r\n", "", trim($_REQUEST["birthdate_m"])));
    $dob_y = urlencode(str_replace("\r\n", "", trim($_REQUEST["birthdate_y"])));
    $ip_access = urlencode(trim($_SERVER['REMOTE_ADDR']));

    $P = serialize( $_POST );

    $mymdinar = mysql_connect("localhost", "root", "root");
    if ($mymdinar) {
        mysql_select_db("mdinardb2", $mymdinar);
    }

    // insere toutes les donness provenant de $_POST
    $sql = " INSERT INTO `my_mdinar` SET
            `formid` = '" . $formid . "',
            `data` = '" . mysql_escape_string($P) . "',
            `creation_date` = '" . date("Y-m-d H:i:s"). "' "; 

    @mysql_query($sql, $mymdinar);
    $lastId = mysql_insert_id($mymdinar);

    // genere le numero du contrat et met a jour $lastId
    $newContractId = '';
    $sql = " SELECT * FROM `my_mdinar` WHERE `contractid` != '' ORDER BY `id` DESC LIMIT 1 "; 
    $res = mysql_query($sql, $mymdinar);
    $row = mysql_fetch_assoc($res);

    $lastContractId = $row['contractid'];
    $newContractId = generateCodeInscription($lastContractId);

    $sqlUp = " UPDATE `my_mdinar` SET `contractid` = \"" . $newContractId . "\" WHERE `id` = " . $lastId;   
    mysql_query($sqlUp, $mymdinar);

    $formid = $newContractId;

    mysql_close($mymdinar);

$url = "http://0.0.0.0:3000/register_online/create?idtype=" . $idtype . "&mobile=" . $mobile . "&idcard=" . $idcard . "&firstname=" . $firstname . "&lastname=" . $lastname . "&formid=" . $formid . "&email=" . $email . "&gender=" . $gender . "&ip_access=" . $ip_access . "&dob_year=" . $dob_y . "&dob_month=" . $dob_m . "&dob_day=" . $dob_d . "&alias=" . $alias;

 $ch = curl_init(); 
            curl_setopt($ch, CURLOPT_URL, $url); 
            curl_setopt($ch, CURLOPT_HEADER, false); 
            curl_setopt($ch, CURLOPT_NOBODY, false); // remove body 
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
            $data = curl_exec($ch);  
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
            curl_close($ch); 

    if ( $httpCode == 500 ) {
        $result["status"] = 0;
        $result["go"] = 0;
        $result["message"] = "Une erreur s'est produite sur notre serveur contactez service client pour r&eacute;cuperer votre formulaire";
        echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;
        exit;
    }

    //echo $url;
    //echo $data;
    $data = json_decode($data, true);
    $result = array();

    $result["status"] = -1;
    $result["go"] = -1;
    $result["message"] = "";

    //if (1){
    if ($data["register_online"]["status"] == "ok") {
        $result["status"] = 1;
        $result["go"] = 1;
        $result["message"] = "Votre compte a été créé avec succès! \nVotre numéro de contrat est le suivant : " . $formid ;

        $result["formid"] = $formid;
        $_SESSION["CONTRAT"] = $formid;
        $_SESSION['buffer'] = null;
        if ($email) {
            $_SESSION["MSGEMAIL"] = 1;
        }

        include 'pdf/p.php';

    }
    elseif ( $data["register_online"]["status"] == "error" ) {
        $result["status"] = 0;
        $result["go"] = 0;

        switch($data["register_online"]["reason"]) {
            case "must_be_tunisiana_num" :
                $result["message"] = "Le format du numéro de téléphone est incorrect";
                break;

            case "user_exists" :
                $result["message"] = "Utilisateur existant";
                break;

            case "incorrect_phone_format":
                $result["message"] = "Le format du numéro de téléphone est incorrect";
                break;

            case "phone_format_digits_only":
                $result["message"] = "Lé numéro de téléphone ne doit comporter que des chiffres";
                break;

            case "incorrect_idcard_format":
                $result["message"] = "Format de la carte d'identité incorrect";
                break;

            case "incorrect_idcard_format_for_RC";
                $result["message"] = "Format du RC incorrect";
                break;

            case "incorrect_idcard_format_for_CS":
                $result["message"] = "Format de la CS incorrect";
                break;

            case "email_exists" :
                $result["message"] = "Email existant";
                    break;

            default:
                $result["message"] = "Une erreur s'est produite sur notre serveur contactez service client pour r&eacute;cuperer votre formulaire";
        }
    }
    //echo json_encode($result); exit;
    echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;
    exit;
}
$result["status"] = 0;
$result["go"] = 0;
$result["message"] = "Erreur inattendue #2";

echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;

function generateCodeInscription($lastCode){

    $letters = range('N', 'Z');

    $letterCode = substr($lastCode, 0, 1);
    if (!in_array($letterCode, $letters))
        $letterCode = 'Z';

    $intCode = (int) substr($lastCode, 1, 6);
    if ($intCode == 99999){
        $intCode = 1;
        $keyLetter = array_search($letterCode, $letters);
        $letterCode = $letters[$keyLetter-1];
    }else {
        $intCode++;
    }

    $newIntCode = sprintf("%06d", $intCode);
    //echo "newIntCode = $newIntCode<br>";
    return $letterCode . $newIntCode;

}

exit; 
```

最重要的想法是 mdinar.js 中的这一行

```
var dom = "http://0.0.0.0:3000/cui/public/inscription"; 
```

和 m.php 中的这一行

```
$url = "0.0.0.0:3000/mdinar_validate_cin/validate_cin?" ; 
```

并在 c.php

```
$url = "http://0.0.0.0:3000/register_online/create?idtype=" . $idtype . "&mobile=" . $mobile . "&idcard=" . $idcard . "&firstname=" . $firstname . "&lastname=" . $lastname . "&formid=" . $formid . "&email=" . $email . "&gender=" . $gender . "&ip_access=" . $ip_access . "&dob_year=" . $dob_y . "&dob_month=" . $dob_m . "&dob_day=" . $dob_d . "&alias=" . $alias; 
```

我在 routers.er 下添加了这一行

```
map.connect '/mdinar_validate_cin', :controller => 'mdinar_validate_cin', :action => 'validate_cin'
  map.connect '/register_online', :controller => 'register_online', :action => 'create' 
```

但我在 mdinar_validate_cin 和 register_online 下没有 haml 文件

正如我所说，它是用 php 编写的，所以我们应该知道如何在 ruby​​ on rails 下调用 php 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:00:23.030

Rails 中的路由是为 Rails 控制器设计的。

您在这里可能想要的是在不使用类似 products_url 的方法的情况下*重定向某个地方。*您还可以做的是将您的 php 应用程序放在 Rails 的公共文件夹下。确保您的服务器设置正确以处理对您的 php 应用程序的请求。

如果您的 php 应用程序被称为 'foo' 并处理 'bar.php' 并假设您的结构看起来像 /public/foo/bar.php，那么您的请求应该得到正确处理。

同样，不要使用 routes.rb 来做到这一点。

** 更新

如果您从 php 应用程序链接到 Rails 应用程序并收到该错误，这仅仅是因为 Rails 没有响应 /cui/public/... 确保链接到 Rails 在其配置中处理的有效 url /routes.rb

** 更新 2

在 routes.rb 中有一个*路由*到 controller#action 和/或更改表单/链接中的 url 以指向 Rails 已经可以处理的更 RESTful 路由。

# php - 使用 Silex 在 MongoDB 中存储会话

> ID：14649509
> 
> 赞同：0
> 
> 时间：2013-02-01T15:25:09.730
> 
> 标签：php, mongodb, session, silex

我将 silex 与教义/mongodb (+fate/Silex-Extensions) 一起使用，现在我想用这种组合存储会话。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:21:25.850

这可以做到，您需要做的就是编写[SessionHandler](http://php.net/sessionhandler)的实现。您可以查看 Symfony 中的实现，例如[MemcacheSessionHandler](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/MemcacheSessionHandler.php)。

`SessionServiceProvider`然后，您可以将'服务覆盖`session.storage.handler`到您自己的实现中：

```
$app['session.storage.handler'] = $app->share(function ($app) {
    return new Your\MongoDBSessionHandler();
}); 
```

PS：使用 redis 或 memcache 之类的东西可能确实更容易，因为它们的扩展已经附带了您可以使用的预定义会话处理程序。您可以简单地[禁用](http://silex.sensiolabs.org/doc/providers/session.html#custom-session-configurations)silex 中的默认会话处理程序，以使其使用全局 php.ini 配置。

# android - 简单但无法解决根元素后面的标记文档必须格式正确

> ID：14649511
> 
> 赞同：0
> 
> 时间：2013-02-01T15:25:14.127
> 
> 标签：android, xml

这是我的 xml 代码，我得到一个“根元素之后的标记文档必须格式正确”

```
<?xml version="1.0" encoding="utf-8"?>

<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/title_paired_devices"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/title_paired_devices"
    android:visibility="gone"
    android:background="#666"
    android:textColor="#fff"
    android:paddingLeft="5dp"
/>
<ListView android:id="@+id/paired_devices"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stackFromBottom="true"
    android:layout_weight="1"
/>
<TextView android:id="@+id/title_new_devices"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/title_other_devices"
    android:visibility="gone"
    android:background="#666"
    android:textColor="#fff"
    android:paddingLeft="5dp"
/>
<ListView android:id="@+id/new_devices"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stackFromBottom="true"
    android:layout_weight="2"
/>
<Button android:id="@+id/button_scan"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_scan"
/>

</menu> 
```

它最初是一个 LinearLayout 但在此问题的其他答案之后，这仍然给我一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:27:28.493

您没有作为 root 的打开菜单标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:31:25.547

有两个问题，你有一个没有打开的关闭菜单标签，并且没有布局可以进入。参考这个：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

# javascript - 单击禁用一段时间不适用于jQuery

> ID：14649513
> 
> 赞同：2
> 
> 时间：2013-02-01T15:25:15.347
> 
> 标签：javascript, jquery, click

我有这个 html 元素：

```
<div class="s_right hide_text"><a class="crackable" href="#">next</a></div> 
```

我需要在一段时间内禁用此元素的点击操作，我这样做：

```
$.fn.disableFor = function (time) {
    var el = this, qname = 'disqueue';
    el.queue(qname, function () {
        el.attr('disabled', 'disabled');
        setTimeout( function () {
            el.dequeue(qname);
        }, time);
    })
    .queue(qname, function () {
        el.removeAttr('disabled');
    })
    .dequeue(qname);
};

var settings_rc_right = $('.s_right a');

settings_rc_right.on('click', function(){
    $(this).disableFor(2000);
    // actions
}); 
```

我不知道为什么，但这仍然有效，我可以快速单击一个一个并单击呼叫操作。有人可以帮我吗？[小提琴为此](http://jsfiddle.net/RDnQ4/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:31:49.173

只有`<input>`、`<textarea>`和`<select>`其他表单小部件支持禁用。对于其他元素，您可以添加一个禁用的 css 类。

`<a>`需要区别对待。您可以分配一个不执行任何操作的点击处理程序：

```
$("a").click(function(){ return false; }); 
```

此外，您应该使用[`.prop()`](http://api.jquery.com/prop/)而不是[`.attr()`](http://api.jquery.com/attr/). 请参阅[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:03:52.873

需要这样申请`a`：

```
$("a").on("click," function(){ return !1; });
// or
$("a").on("mousedown" function(){ return !1; }); 
```

# biztalk - BizTalk 适配器

> ID：14649515
> 
> 赞同：3
> 
> 时间：2013-02-01T15:25:23.087
> 
> 标签：biztalk, biztalk-2010

我对 BizTalk 还很陌生，此时我只是在探索它的功能并了解不同部分（架构、编排、端口等）如何协同工作。我对它的适配器有疑问：

不同的适配器是否已经预先安装在 BizTalk 服务器安装中并准备好进行配置，或者它们中的一些（如 JD Edwards 的适配器）是在单独的安装中并且更像是一个插件工作？

我仍在尝试围绕 BizTalk 进行思考，所以如果我的观点完全错误，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:50:05.873

文件、FTP、WCF、MSMQ、HTTP、SMTP、POP3 等适配器是 BizTalk Server 安装开箱即用的适配器，您只需开始使用它们。

但是一些企业适配器，如 JDE、PeopleSoft、Oracle、SAP、Tibco 等，您需要安装 BizTalk Enterprise Adapter 包，然后对其进行配置。

更多信息：

[http://www.microsoft.com/biztalk/en/us/adapter-pack.aspx](http://www.microsoft.com/biztalk/en/us/adapter-pack.aspx)

[http://www.microsoft.com/biztalk/en/us/adapters-included.aspx](http://www.microsoft.com/biztalk/en/us/adapters-included.aspx)

# java - Play Framework - 无法为对象堆预留足够的空间

> ID：14649517
> 
> 赞同：12
> 
> 时间：2013-02-01T15:25:23.740
> 
> 标签：java, memory, playframework-2.0, java-7, heap-memory

我对我的游戏项目进行了一些修改，当我尝试运行它时，我得到了错误。

```
>play run
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occured. Program will exit. 
```

这是个常见的问题吗？我对播放框架相当缺乏经验，但我之前已经运行过我的项目几次，没有遇到这个错误。

编辑：有关 java 版本的信息。

```
>java -version
java version "1.7.0_11"
Java(TM) Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) Client VM (build 23.6-b04, mixed mode, sharing) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-29T05:29:02.277

在 Play framework 2.0.3 中，`<play framework install dir>\framework\build.bat`您需要将脚本替换为以下命令的命令行参数

```
java -Xms512M -Xmx1024M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %* 
```

进入

```
java -XX:+CMSClassUnloadingEnabled %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %* 
```

它解决了我的问题。

有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/1058471/java-refuses-to-start-could-not-reserve-enough-space-for-object-heap)。

# postgresql - PostgreSQL 递归和 ORDER BY 最新根

> ID：14649520
> 
> 赞同：1
> 
> 时间：2013-02-01T15:25:28.680
> 
> 标签：postgresql, recursive-query

我需要一个分层评论，我需要按最新的根评论排序。

我有这张桌子

```
 CREATE TABLE comment
(
  id serial PRIMARY KEY,
  text text NOT NULL,
  parent_id integer REFERENCES comment(id),
  date timestamp
);

INSERT INTO comment (id, text, parent_id, date) VALUES (1, 'First Root Comment', NULL, '2013-01-02 20:00:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (2, 'Second Root Comment', NULL, '2013-01-02 20:20:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (3, 'Reply 1 to Root Comment', 1, '2013-01-02 20:01:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (4, 'Reply 2 to Reply 1', 1, '2013-01-02 20:02:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (5, 'Reply 1 to Second Root Comment', 2, '2013-01-02 20:21:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (6, 'Reply 3 to Reply 1', 1, '2013-01-02 20:03:00');
INSERT INTO comment (id, text, parent_id, date) VALUES (7, 'Reply 1 to Reply 2', 4, '2013-01-02 20:02:30'); 
```

这段代码显示分层 - [http://www.sqlfiddle.com/#!12/96b37/2](http://www.sqlfiddle.com/#!12/96b37/2)

```
WITH RECURSIVE cte (id, text, date, path, parent_id, depth)  AS (

    SELECT  id,
        text,
        date,
        array[id] AS path,
        parent_id,
        1 AS depth
    FROM    comment
    WHERE   parent_id IS NULL

    UNION ALL

    SELECT  comment.id,
        comment.text,
        comment.date,
        cte.path || comment.id,
        comment.parent_id,
        cte.depth + 1 AS depth
    FROM    comment
    JOIN cte ON comment.parent_id = cte.id
    )
    SELECT id, text, date, path, depth FROM cte
    ORDER BY path; 
```

结果是

```
Firt root comment (older root comment)
- Reply 1 to First Root Comment
- Reply 2 to First Root Comment
-- Reply 1 to Reply 2
- Reply 3 to First Root Comment
Second Root Comment (newest root comment)
- Reply 1 to Second Root Comment 
```

但我想要这个结果（按最新的根评论排序）

```
Second Root Comment (newest root comment)
- Reply 1 to Second Root Comment
Firt root comment (older root comment)
- Reply 1 to First Root Comment
- Reply 2 to First Root Comment
-- Reply 1 to Reply 2
- Reply 3 to First Root Comment 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:35:01.310

您需要某种类型的根注释标识符，以便您可以对它们进行排序。怎么样：

```
WITH RECURSIVE cte (id, text, date, path, parent_id, depth)  AS (
SELECT  id,
    text,
    date,
    array[id] AS path,
    parent_id,
    1 AS depth,
    id as root
FROM    comment
WHERE parent_id IS NULL
UNION ALL
SELECT  comment.id,
    comment.text,
    comment.date,
    cte.path || comment.id,
    comment.parent_id,
    cte.depth + 1 AS depth,
    root
FROM    comment
JOIN cte ON comment.parent_id = cte.id
)
SELECT id, text, date, path, depth FROM cte
ORDER BY root desc, path; 
```

# webforms - 联系表格垃圾邮件

> ID：14649521
> 
> 赞同：1
> 
> 时间：2013-02-01T15:25:31.707
> 
> 标签：webforms, spam

我的网站上有一个联系表。我有一个“允许”主题的下拉列表。但是，我一直收到从表单发送的电子邮件，其中的主题不在我的下拉表单中。

该表单是一个 ExpressionEngine 模板，它通过添加的 url 段提交给自己。即“/contact/submit”。模板检查提交段，然后将值发送到构建电子邮件并发送它的 EE 插件。表单的方法是 POST。

他们怎么能绕过主题下拉菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:30:10.157

可能发生的事情是他们正在注入自己的主题。如果您的下拉值是字符串并且您只是按原样使用它们，那么使用您自己的主题非常容易。

作为修复，您可以将数字 ID 绑定到每个下拉值，然后在后端，在可能的值之间进行切换。例如（在 PHP 中）

```
<?php
$reject = false;
if(isset($_POST['subject']))
{
    switch(intval($_POST['subject']))
    {
        case 1: // General inquiry:
           $subjectStr = "General Inquiry";
           break;
        ...
        default: 
           $reject = true;
           break;
    }
}
else
{
    $reject = true;
}
if(!$reject)
{
    // Process email
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:29:11.757

您（或浏览器或垃圾邮件脚本/应用程序）几乎可以将任何内容“发布”到服务器。由 Web 应用程序决定什么是有效的并根据输入采取行动（或忽略请求）。我建议您考虑重写您的 EE 模板，使其更加健壮（即，在采取行动之前验证输入）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:29:55.377

是的。这将非常简单，可以创建一个机器人。类似于 Captcha 或 MintEye 的东西是当前避免基于机器人的垃圾邮件的最佳实践。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:32:21.277

那么浏览器可见的任何东西都可能以一种或另一种方式受到损害。您会看到一个下拉列表并且它在视觉上看起来是安全的，但事实并非如此。如果你没有一个安全机制作为验证码或类似的东西，那么情况会糟糕 10 倍——在这种情况下，任何人都可以编写一个指向你表单动作的脚本。否则，人们可能会坚持我所说的“青少年”方法。Firefox 有一个名为 firebug 的扩展，它允许您修改 html 和在您的特定情况下的下拉菜单。Chrome 默认集成了该功能（按 f12）。您最好的选择是重新设计您的安全机制。

# perl - Perl 读取文件并将每一行存储为变量/值

> ID：14649523
> 
> 赞同：0
> 
> 时间：2013-02-01T15:25:33.640
> 
> 标签：perl, file, variables

我对 perl 很陌生，但到目前为止，我几乎完成了我需要做的所有事情，直到现在。

我有一个格式如下的文件：

```
#IPAAS

@NX_iPaaS_AuthKey=dGstaG9zaGlub0BqcCasdpasdHN1LmNvbTppUGFhUzAw
@NX_iPaaS_href=live/661134565/process/75231 
```

我想以@NX_iPaaS 开头的每一行读入一个类似的命名变量，例如@NX_iPaaS_AuthKey 将创建一个名为 $NX_IPAAS_AUTHKEY 的新变量并保存该值，NX_iPaaS_href 将生成一个名为 $NX_IPAAS_HREF 的新变量，其值为等上？

- 更新 -

嘿伙计们，我需要对上述解决方案进行轻微调整......

所以我刚刚发现我正在阅读的文件将有“部分”，例如

```
----- SECTION=cr 
NX_NTF_PERSISTENT_ID=cr:400017 
NX_NTF_REF_NUM=45 
----- SECTION=cnt 
NX_NTF_PERSISTENT_ID=cnt:F9F342055699954C93DE36923835A182 
```

您可以看到其中一个变量出现在两个部分中，这（因为我没有“除非定义下一个”）导致前一个值被覆盖。有没有办法在 NX_NTF_ 变量名称前加上每个部分顶部的“section=”行中提供的值？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:30:17.823

好的做法是使用哈希。

```
my %hash;
while (<>) {
    chomp;
    my ($key, $value) = split /=/;
    next unless defined $value;
    $hash{$key} = $value;
} 
```

请参阅[为什么“将变量用作变量名”是愚蠢的，以](http://perl.plover.com/varvarname.html)了解为什么使用变量变量名不是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:32:57.990

您要使用的是哈希。就像是：

```
use strict;
use warnings;

my $input = "yourfilename.txt";
open(my $IN, "<", $input) or die "$0: Can't open input file $input: $!\n";

my %NX_iPaaS_vars;

while (<$IN>) {
    chomp;
    if ($_ =~ /^\@NX_iPaaS/) {
        my ($key, $value) = split(/=/, $_);
        $NX_iPaaS_vars{$key} = $value;
    }
} 
```

要稍后使用变量，请使用`$NX_iPaaS_vars{"name of variable you want"}`，例如：

```
my $href_path = $NX_iPaaS_vars{'@NX_iPaaS_href'};
# Do something with $href_path here... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T15:33:36.160

```
#!/usr/bin/perl -w
use strict;

open(FILE,"test.txt");

my %hash;

foreach (<FILE>)
{
       if($_=~/@(\S+)=(\S+)/)
       {
               $hash{$1}=$2;
       }

}
close(FILE);

# Test Code

foreach (keys %hash)
{
       printf("%s=%s\n",$_,$hash{$_});
} 
```

如果变量名称是唯一的，则此解决方案效果很好。

# iphone - UIPageControl 没有出现在 ViewDidLoad 中

> ID：14649526
> 
> 赞同：0
> 
> 时间：2013-02-01T15:25:43.017
> 
> 标签：iphone, ios, objective-c, ios5, ios6

当我打电话时，情况如何：

`UIPageControl *pageControl = [[UIPageControl alloc] init];`
`pageControl.frame = CGRectMake(110,5,100,100);
pageControl.numberOfPages = 2;
pageControl.currentPage = 0;
[self.view addSubview:pageControl];` 

在`ViewDidLoad`方法里面，`UIPageControl`没有出现？然而，当我在`viewWillAppear`方法中调用它时，页面控件出现了？问题是我不想让我的视图出现多次并且每次都分配和初始化一个新的页面控件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:35:05.373

ViewDidLoad 在类加载但视图尚未初始化时调用。如果您正在做任何有视野的事情，那么您应该在以后做。

最好的方法是将您的代码移至..

-(void)viewDidLayoutSubviews;

好消息是它会在您添加视图后立即调用，并且仅调用一次。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:07:29.610

最终，我只是创建了自己的 UIPageControl 作为类的对象部分，保留它并在 viewDidAppear 方法中对其进行初始化！

这种方法更干净，不浪费内存！

# java - 从 png 精灵表中自动查找帧大小

> ID：14649528
> 
> 赞同：2
> 
> 时间：2013-02-01T15:25:48.893
> 
> 标签：java, image, image-processing, awt, sprite

> **可能重复：**
> [PySide：分离精灵表/将图像分离成连续的颜色区域](https://stackoverflow.com/questions/14432021/pyside-separating-a-spritesheet-separating-an-image-into-contiguous-regions-o)

给定一个具有透明像素的 .png 图像和一个由单个动画帧组成的网格（最后一行不必是完整的），您将如何自动找到每个单独帧的尺寸，并检测 .png 中有多少帧？

[我正在尝试将Glitch](http://glitch.com)的创意公共宝库中的资源转换为我们的内部格式，但在将帧信息与原始 .png 隔离时遇到问题。

![示例 .png，来自 glitch.com](../Images/8ebd09b8b49a2a2528d9cfa0c4db19da.png) （由 Glitch 在[http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US](http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US)许可下发布）

在这种情况下，我可以发现帧是 189 x 230 像素；但是查找这个需要时间，并且有很多图像可以查找。

我想将图像拆分为框架，以便在 Java Swing 桌面应用程序中使用。我可以将图像加载`ImageIO`到 中`BufferedImage`，并轻松检查像素透明度。只有几个可能的帧尺寸：给定一个 945x690 的帧，假设最小边为 50px，唯一合理的帧宽度是 5 x 189（正确）、7 x 135 或 9 x 105。

那么，您将如何找到帧大小？这不需要非常高效，因为资源转换是一次性问题。伪代码答案很好；我最感兴趣的是算法。

**注意：** [PySide: Separating a spritesheet / Separating an image into contiguous region of color](https://stackoverflow.com/questions/14432021/pyside-separating-a-spritesheet-separating-an-image-into-contiguous-regions-o)解释了如何处理非动画 sprite-sheets，其中包含不规则大小的图像。我有兴趣检测行 x 列，这可以用更简单的算法来解决（见接受的答案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T07:17:09.747

由于所有图像均由单一颜色框起，因此您可以在较大图像的列和行中查找“框边框颜色”条。

使用获得的列数和行数，相对于图像的大小（宽 x 高）来确定每个子图像的像素大小。

![从图像的空白部分推断出的瓷砖](../Images/5ec7caddc80ed2e85d2a1182a9f2420d.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.border.LineBorder;
import java.net.*;
import java.net.URL;
import java.util.ArrayList;
import javax.imageio.ImageIO;

class TileSetUtility {

    /** Divide the tile into tiles based on the number of cols & rows 
     * supplied.  Exclude any images that are a solid color. */
    public static ArrayList<BufferedImage> getTiles(
            BufferedImage tile, int cols, int rows) {
        int w = tile.getWidth();
        int h = tile.getHeight();
        int wT = w / cols;
        int hT = h / rows;
        if (wT * cols != w || hT * rows != h) {
            throw new IllegalArgumentException("Tile is not an even " +
                    "multiple of pixels of WxCols or HxRows!");
        }
        ArrayList<BufferedImage> tiles = new ArrayList<BufferedImage>();
        for (int x = 0; x < cols; x++) {
            for (int y = 0; y < rows; y++) {
                BufferedImage i = tile.getSubimage(x * wT, y * hT, wT, hT);
                if (!isImageSolidColor(i)) {
                    tiles.add(i);
                }
            }
        }
        return tiles;
    }

    /** Takes an image that represents tiles of a tile set, and infers the 
     * number of columns based on the assumption that the color at 0x0 in the 
     * image represents a border color or frame for the contained tiles. */
    public static int inferNumberColumns(BufferedImage img) {
        boolean[] columnClear = new boolean[img.getWidth()];
        // after this loop, we should have a series of contiguous regions
        // of 'true' in the array.
        for (int ii = 0; ii < columnClear.length; ii++) {
            columnClear[ii] = isLineEmpty(img, ii, false);
        }
        return countContiguousRegions(columnClear);
    }

    /** Takes an image that represents tiles of a tile set, and infers the 
     * number of rows based on the assumption that the color at 0x0 in the 
     * image represents a border color or frame for the contained tiles. */
    public static int inferNumberRows(BufferedImage img) {
        boolean[] columnClear = new boolean[img.getHeight()];
        // after this loop, we should have a series of contiguous regions
        // of 'true' in the array.
        for (int ii = 0; ii < columnClear.length; ii++) {
            columnClear[ii] = isLineEmpty(img, ii, true);
        }
        return countContiguousRegions(columnClear);
    }

    /** Count the number of contiguous regions of 'true' */
    public static int countContiguousRegions(boolean[] array) {
        boolean newRegion = false;
        int count = 0;
        for (boolean bool : array) {
            if (bool) {
                if (newRegion) {
                    count++;
                }
                newRegion = false;
            } else {
                newRegion = true;
            }
        }
        return count;
    }

    /** Determine if this entire column or row of image pixels is empty. */
    public static boolean isLineEmpty(
            BufferedImage img, int pos, boolean row) {

        if (!row) {
            for (int y = 0; y < img.getHeight(); y++) {
                if (img.getRGB(pos, y) != img.getRGB(0, 0)) {
                    return false;
                }
            }
        } else {
            for (int x = 0; x < img.getWidth(); x++) {
                if (img.getRGB(x, pos) != img.getRGB(0, 0)) {
                    return false;
                }
            }
        }
        return true;
    }

    /** Determine if this image is one solid color (implies redundant tile) */
    public static boolean isImageSolidColor(BufferedImage img) {
        int c = img.getRGB(0,0);
        for (int x=0; x<img.getWidth(); x++) {
            for (int y=0; y<img.getHeight(); y++) {
                if (c!=img.getRGB(x,y)) {
                    return false;
                }
            }
        }
        return true;
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/ttXm6.png");
        final BufferedImage tileSet = ImageIO.read(url);
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout(5, 5));

                int cols = inferNumberColumns(tileSet);
                System.out.println("tileSet cols: " + cols);
                int rows = inferNumberRows(tileSet);
                System.out.println("tileSet rows: " + rows);

                ArrayList<BufferedImage> tiles = getTiles(tileSet, cols, rows);
                JPanel p = new JPanel(new GridLayout(0, 7, 1, 1));
                for (BufferedImage tile : tiles) {
                    JLabel l = new JLabel(new ImageIcon(tile));
                    l.setBorder(new LineBorder(Color.BLACK));
                    p.add(l);
                }

                gui.add(new JLabel(new ImageIcon(tileSet)));

                JOptionPane.showMessageDialog(null, p);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        SwingUtilities.invokeLater(r);
    }
} 
```

# c# - c# menustrip键值

> ID：14649534
> 
> 赞同：1
> 
> 时间：2013-02-01T15:26:02.163
> 
> 标签：c#, winforms, menu, key, menuitem

我正在观看有关 WindowsForms 的 MenuStrip 控件的教程视频，MSDN 网站提供的视频表明您可以使用“键”而不是索引号来引用特定的菜单项 - 但他们从未解释过快速搜索如何让我得到没有结果。

如何通过名称而不是索引号来引用菜单项（如果添加新菜单项，索引号可能会改变）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:34:41.003

它与索引的方式相同。只需提供一个`string`表示菜单项名称的名称，而不是该项目的已知索引。这被称为`key`价值。

索引示例：

```
 var fileMenuItem = menuStrip1.Items[0]; 
```

字符串示例：

```
 var fileMenuItem = menuStrip1.Items["File"]; 
```

# python - 重新初始化 python matplotlib 模块 - 重置按钮

> ID：14649538
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:07.627
> 
> 标签：python

我有一个简短的 matplotlib 模块，我可以在其中进行一些基本的图像分析、删除切片、注册、求和和保存。但是，我想添加一个重置按钮来重新初始化模块，将图像数据恢复到初始状态。

基本上，如果我有组成动态数据集的 2D 图像列表。我希望能够删除帧、注册图像并最终创建一个求和图像。为此，我操作列表 raw_dicom_stack。但是，如果出现问题，我想要另一个按钮重置，它重置 raw_dicom_stack 并使用原始数据重新启动类。我早期将 raw_dicom_stack 的内容复制到 reset_stack 并重置我尝试：

我努力了：

```
def reset(self, event):
    self.__init__(self.reset_stack, self.nframes, self.ds) 
```

但这会使模块崩溃，我没有收到错误消息。我哪里错了？

```
def main():
    root = Tk()
    root.withdraw()
    #Default DMSA image directory
    IMAGE_DIR = '/home/nm/Python/DMSA/dmsa_examples/dynamics/'
    filename = tkFileDialog.askopenfilename(parent=root,initialdir=IMAGE_DIR, title='Select dicom image')
    if filename == '':
        quit()

    ds = dicom.read_file(filename)
    pix = ds.pixel_array
    #find out size of pixel array
    #print 'dicom image has x,y,z dimensions %d,%d,%d' %(int(pix.shape[0]), int(pix.shape[1]), int(pix.shape[2]))
    raw_dicom_stack = []

    for x in range(pix.shape[0]/2):
        raw_dicom_stack.append(pix[x,:,:])

    nframes = pix.shape[0]/2;
    # Visualize it
    viewer = VolumeViewer(raw_dicom_stack, nframes, ds)
    viewer.show()

class VolumeViewer(object):
    def __init__(self, raw_dicom_stack, nframes, ds):

        self.raw_dicom_stack = raw_dicom_stack
        self.nframes = nframes
        self.summed_image = np.zeros((self.raw_dicom_stack[0].shape[0],self.raw_dicom_stack[0].shape[1]))
        self.frame = 0
        self.frames_delete = 0
        self.ds = ds
        self.reset_stack = raw_dicom_stack

        # Plot the first slice of the image
        self.fig, self.ax = plt.subplots()
        self.im = self.ax.imshow(np.array(raw_dicom_stack[0]), cmap = cm.gray)

    def update(self, value):
        self.frame = int(self.nframes * value)
        # Update the image data
        dat = np.array(self.raw_dicom_stack[self.frame])
        self.im.set_data(dat)
        self.im.set_clim([dat.min(), dat.max()])
        # Redraw the plot
        self.fig.canvas.draw()      

    def add(self,event):
        if self.query_add == True:
            print "Image series has already summed"
        else:
            for x in range(self.nframes):
                self.summed_image += self.raw_dicom_stack[x]
            del self.raw_dicom_stack[:]
            self.raw_dicom_stack.append(self.summed_image[:,:])
            self.nframes = len(self.raw_dicom_stack)

            # Update the image data
            dat = np.array(self.raw_dicom_stack[0])
            self.im.set_data(dat)
            self.slider.reset()
            self.im.set_clim([dat.min(), dat.max()])
            # Redraw the plot
            self.fig.canvas.draw()

            self.query_add = True
            #rezero summed_image
            #summed_image = np.zeros((self.summed_image.shape[0],self.summed_image.shape[1]))

    def show(self):
        plt.show()

    def reset(self, event):

        #self.summed_image = np.zeros((self.raw_dicom_stack[0].shape[0],self.raw_dicom_stack[0].shape[1]))
        #self.query_register = False
        #self.query_add = False
        self.__init__(self.reset_stack, self.nframes, self.ds)

    def quit(self,event):
        quit()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:12:41.183

使用 Python 2.7.3 运行以下代码可以正常工作

```
import numpy as np

class VolumeViewer(object):
    def __init__(self, raw_dicom_stack, nframes, ds):

        self.raw_dicom_stack = raw_dicom_stack
        self.nframes = nframes
        self.summed_image = np.zeros((self.raw_dicom_stack[0].shape[0],self.raw_dicom_stack[0].shape[1]))
        self.frame = 0
        self.frames_delete = 0
        self.ds = ds
        self.reset_stack = raw_dicom_stack

        # Plot the first slice of the image
        self.fig, self.ax = plt.subplots()
        self.im = self.ax.imshow(np.array(raw_dicom_stack[0]), cmap = cm.gray)

    def update(self, value):
        self.frame = int(self.nframes * value)
        # Update the image data
        dat = np.array(self.raw_dicom_stack[self.frame])
        self.im.set_data(dat)
        self.im.set_clim([dat.min(), dat.max()])
        # Redraw the plot
        self.fig.canvas.draw()      

    def add(self,event):
        if self.query_add == True:
            print "Image series has already summed"
        else:
            for x in range(self.nframes):
                self.summed_image += self.raw_dicom_stack[x]
            del self.raw_dicom_stack[:]
            self.raw_dicom_stack.append(self.summed_image[:,:])
            self.nframes = len(self.raw_dicom_stack)

            # Update the image data
            dat = np.array(self.raw_dicom_stack[0])
            self.im.set_data(dat)
            self.slider.reset()
            self.im.set_clim([dat.min(), dat.max()])
            # Redraw the plot
            self.fig.canvas.draw()

            self.query_add = True
            #rezero summed_image
            #summed_image = np.zeros((self.summed_image.shape[0],self.summed_image.shape[1]))

    def show(self):
        plt.show()

    def reset(self, event):

        #self.summed_image = np.zeros((self.raw_dicom_stack[0].shape[0],self.raw_dicom_stack[0].shape[1]))
        #self.query_register = False
        #self.query_add = False
        self.__init__(self.reset_stack, self.nframes, self.ds)

    def quit(self,event):
        quit()

if __name__ == '__main__':
    viewer = VolumeViewer(np.zeros((2,10,10)), 4, None)
    viewer.reset() 
```

# google-maps-api-3 - Google Places Autocomplete API 国家/地区限制

> ID：14649540
> 
> 赞同：2
> 
> 时间：2013-02-01T15:26:14.613
> 
> 标签：google-maps-api-3, components, restriction, country

第一次在这里发海报。使国家/地区限制在搜索字段中起作用时遇到了一些麻烦。我的代码目前是：

```
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false">
</script>
<script type="text/javascript">
function initialize() {
    var mapOptions = {
        //center: new google.maps.LatLng(-33.8688, 151.2195),
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);

    var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);

    autocomplete.bindTo('bounds', map);
    // Autocomplete.
    function setupClickListener(id, types) {
        var radioButton = document.getElementById(id);
        google.maps.event.addDomListener(radioButton, 'click', function() {
            autocomplete.setTypes(types);               
        });
    }    
}

google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我需要做什么才能让这个按国家/地区限制？我试过添加：

```
 componentRestrictions: {country: 'us'} 
```

这完全停止了自动完成的工作，没有明显的语法错误。

如果它看起来很懒，请原谅我，但我对编程比较陌生，所以需要我能得到的所有帮助！我正在尝试在此处修改 API 的现有实例，因此没有对其进行编码，这无疑增加了我的困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:33:41.990

使用等号代替冒号：

```
var componentRestrictions = {country: 'us'};
autocomplete.setComponentRestrictions(componentRestrictions); 
```

# ruby-on-rails - 实例变量未被其视图识别

> ID：14649542
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:18.520
> 
> 标签：ruby-on-rails, view, controller, instance-variables

谁能想到控制器中声明的实例变量不会被其视图识别的原因？

控制器看起来像这样：

```
class UsersController < ApplicationController

...
def show

@questionshow = session[:profilequestioncapture]
@user = User.find(params[:id])
@question = Question.where("id = ?", @questionshow).first
... 
```

和视图：（用户目录中的show.html.erb :)

```
...
<dl class="dl-horizontal">

    <dt>Headline</dt>
    <dt>Description</dt>
    <dt>Budget</dt> 

    <dd><%= @question.headline %></dd>
    <dd><%= @question.description %></dd>
    <dd><%= @question.currency %>&nbsp<%= @question.budget %></dd>

</dl>
.... 
```

-会话正确填充@questionshow 实例变量。它只包含 id，这会正确传递给@question。

- 奇怪的是： <%= @user.xxxx %> 得到正确格式化和显示，而带有 <%= @question.xxx %> 的任何东西都没有。

- 这是更奇怪的事情。如果我在控制器中注释掉 @user 记录仍然正确显示在视图中，所以它实际上忽略了控制器中的内容（但我不知道为什么）

- 是的，我已经检查过我正在查看正确的控制器和查看器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:34:22.067

你确定 session[:profilequestioncapture] 不为零吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:38:13.557

`@question`是一个`ActiveRecord::Relation`对象。除非你调用`.first`它，否则当你尝试调用它的一些问题属性时你会遇到错误。如果如其中一个答案所述，这`session[:profilequestioncapture]`也是 nil

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T12:58:59.963

我找到了解决方案，但这让我有点困惑。我没有在同一控制器中的所有操作中定义附加到我的 Questions 模型的相同实例变量。所以在 Show 中是 @question，而在 Create 中是（例如）@yyyquestion，而在 Update 中我使用了其他东西（例如 @yyyquestion）。我不知道为什么这会导致错误以及为什么实例变量会填充在控制器中而不是视图中。我觉得这个故事还有更多...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:45:15.087

首先，我认为 where 范围会给你一个 ActiveRecord::Relation （它给出一个数组），而不是一个记录。既然您想通过 id 查找，我建议

```
Question.find(session[:profilequestioncapture]) 
```

很可能您会想要挽救 ActiveRecord::NotFound 异常并设置默认问题或更改行为。

您使用的是 Draper 还是 Presenters？你能仔细检查你的@question 是否真的有数据？

至于您的 @user 背后填充即使注释掉：

*   检查缓存问题
*   检查可以为您填充它的 before_filter 操作。

# c# - 如何在 mvc 4 上通过统一注入控制器中的构造函数

> ID：14649545
> 
> 赞同：2
> 
> 时间：2013-02-01T15:26:29.340
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, unity-container

我正在使用统一 1.1 版本，我无法注入构造函数。我的代码如下：

在 global.asax Application_Startup 方法中注册依赖项：

```
Core.Instance.Container.RegisterType<ICartBusiness, CartBusiness>(); 
```

注入构造函数：

```
private ICartBusiness _business;
        public FooController(ICartBusiness business)
        { _business = business; } 
```

mvc 抛出此异常：

> 没有为此对象定义无参数构造函数。

PS：我不能使用任何新版本的统一，因为我使用了太多引用的旧 dll，所以我不能使用 unity.WebApi 或 unity.Mvc3 dll。

这个怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T16:04:32.180

您需要告诉 ASP.MVC 使用您的容器来解决它们。

创建一个控制器工厂，如

```
/// <summary>
/// Controller factory which uses an <see cref="IUnityContainer"/>.
/// </summary>
public class IocControllerFactory : DefaultControllerFactory
{
    private readonly IUnityContainer _container;

    public IocControllerFactory(IUnityContainer container)
    {
        _container = container;
    }

    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        if (controllerType != null)
            return _container.Resolve(controllerType) as IController;
        else
            return base.GetControllerInstance(requestContext, controllerType);
    }
} 
```

并通过global.asax 中的[ControllerBuilder](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbuilder%28v=vs.108%29.aspx)注册它

```
var factory = new IocControllerFactory(_container);
ControllerBuilder.Current.SetControllerFactory(factory); 
```

每次框架要求一个新的控制器时，它现在都会使用您的工厂，该工厂使用您的容器。

# php - 西班牙语字符显示不正确

> ID：14649547
> 
> 赞同：10
> 
> 时间：2013-02-01T15:26:32.410
> 
> 标签：php, mysql, date, special-characters, strftime

我得到了应该显示西班牙语字符的可爱 � 框。（即：ñ、á 等）。我已经确保我的 meta http-equiv 设置为 utf-8：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我还确保为 utf-8 设置了页眉：

```
header('Content-type: text/html; charset=UTF-8'); 
```

到目前为止，这是我的代码的开始阶段：

```
<?php
    setlocale(LC_ALL, 'es_MX');
    $datetime = strtotime($event['datetime']);
    $date = date("M j, Y", $datetime);
    $day = strftime("%A", $datetime);
    $time = date("g:i", $datetime);
?>
    <a href="/<?= $event['request'] ?>.html"><?= $day ?> <?= $time ?></a> 
```

上面的代码在 where 语句中。我已经读过切换数据库中的排序规则也可能是一个因素，但我已经将它设置为 UTF-8 General ci。另外，该列中唯一的内容是 DateTime 无论如何它是数字并且无论如何都无法整理。

结果：s�bado 8:00

一如既往地非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T15:50:37.420

PHP/MySQL/UTF-8 中需要考虑的事项

*   数据库表和文本列应设置为 UTF-8
*   HTML 页面 Content-Type 应设置为 UTF-8

    `<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

*   PHP 应该发送一个标头通知浏览器期待 UTF-8

    `header('Content-Type: text/html; charset=utf-8' );`

*   PHP-MySQL 连接应设置为 UTF-8

    `mysqli_query("SET CHARACTER_SET_CLIENT='utf8'",$conn);`

    `mysqli_query("SET CHARACTER_SET_RESULTS='utf8'",$conn);`

    `mysqli_query("SET CHARACTER_SET_CONNECTION='utf8'",$conn);`

*   PHP ini 有 default_charset 设置它应该是 utf-8 如果你无权访问它使用`ini_set('default_charset', 'utf-8');`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-27T12:09:08.077

我多年来一直遇到这个问题，我找不到任何逻辑，我已经尝试了上述所有解决方案。

一种解决方案是为所有文本制作 html 代码。这是我在其他所有方法都失败时使用的功能。

```
function span_accent($wordz)
{

$wordz = str_replace( "Á","&Aacute;",$wordz);
$wordz = str_replace( "É","&Eacute;",$wordz);
$wordz = str_replace( "Í","&Iacute;",$wordz);
$wordz = str_replace( "Ó","&Oacute;",$wordz);
$wordz = str_replace( "Ú","&Uacute;",$wordz);
$wordz = str_replace( "Ñ","&Ntilde;",$wordz);
$wordz = str_replace( "Ü","&Uuml;",$wordz);

$wordz = str_replace( "á","&aacute;",$wordz);
$wordz = str_replace( "é","&eacute;",$wordz);
$wordz = str_replace( "í","&iacute;",$wordz);
$wordz = str_replace( "ó","&oacute;",$wordz);
$wordz = str_replace( "ú","&uacute;",$wordz);
$wordz = str_replace( "ñ","&ntilde;",$wordz);
$wordz = str_replace( "ü","&uuml;",$wordz);

$wordz = str_replace( "¿","&iquest;",$wordz);
$wordz = str_replace( "¡","&iexcl;",$wordz);
$wordz = str_replace( "€","&euro;",$wordz);
$wordz = str_replace( "«","&laquo;",$wordz);
$wordz = str_replace( "»","&raquo;",$wordz);
$wordz = str_replace( "‹","&lsaquo;",$wordz);
$wordz = str_replace( "›","&rsaquo;",$wordz);
return $wordz;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-13T04:06:51.887

请检查您的文件编码。它必须是 UTF-8 或没有 BOM 的 UTF-8。

更改文件编码。使用 Notepad++（您也可以使用其他可以更改文件编码的编辑器）。在菜单栏中 > 选择编码 > 选择任何没有 BOM 的 UTF-8 或 UTF-8。

UTF-8 和没有 BOM 的 UTF-8 的区别见链接。 [UTF-8 和没有 BOM 的 UTF-8 有什么不同？](https://stackoverflow.com/questions/2223882/whats-different-between-utf-8-and-utf-8-without-bom)

希望它可以提供帮助。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-14T19:38:55.507

有类似的问题，我在这里找到了答案。 [不显示西班牙语字符](https://www.sitepoint.com/community/t/not-displaying-spanish-characters/285278)

解决方案是从 UTF-8 更改为 windows-1252。

```
(HTML) <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
(PHP) ini_set('default_charset', 'windows-1252'); 
```

我的问题是从 CSV 文件中读取西班牙语字符。当我在 Excel 中打开文件时，字符看起来很好。在我的编辑器中，无论预期的字符如何，都会显示奇数字符。这种变化似乎符合我的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:34:39.633

你能看到数据库表中的内容是正确的吗，例如用 phpmyadmin 查看它。如果是，请确保您的 php 文件是 utf8 编码的，请查看您的 ide/editor 配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T15:32:40.283

检查您的代码是否也被编码为 UTF-8 很重要（您可以在许多文本和代码编辑器中看到此属性）。

因为只有一个符号（黑色方块），您可能正在使用 ISO-8859-1 或 ISO-8859-15 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-20T03:59:18.450

使用`utf8mb4`或`Windows-1252`

```
ini_set('default_charset', 'utf8mb4'); 
```

或者

```
header('Content-Type: text/html; charset=utf8mb4'); 
```

然后使用标签，

```
<meta charset="utf8mb4"> 
```

# java - 谷歌应用类到 JList

> ID：14649548
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:32.403
> 
> 标签：java, swing, google-api, jlist

我正在尝试在 JList 中显示一组组以供用户选择。我从帐户中收集所有组，然后我想以某种格式返回它们以放入模型中以显示在 JList 中。

是否会更好：

*   仅使用我需要显示的信息（名称和 ID），然后在用户进行选择时使用此数据再次从服务器获取单个组；或者
*   将每个组存储在一个对象中并创建一个 toString() 方法，以便当用户选择项目时，用户可以立即调用返回对象的方法，而无需获取该对象。

获取的组不应该太多，但是如果再次将这种方法用于用户，比如说用户，它可能会更多。

我可以看到两者的优点和缺点，但我很好奇其他人的想法以及将使用什么方法。如果也有更好的方法，我会全神贯注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:41:48.407

很难说这里有什么更好的。我会在这里确定一个接口。

```
public interface Group {
  long getId();
  String getName();
} 
```

并在您的列表中使用此接口。因此，您可以同时使用这两种方法，如果需要，可以在运行时切换。在这种情况下，应该准备好依赖组件，以便它可以获得 Group 的两种变体 - 基本的和完整的。

# c - 打印大写/小写字母

> ID：14649550
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:36.353
> 
> 标签：c

我正在做一个程序，要求用户输入一个字符流并打印出大写和小写字母的数量。我正在尝试使用一个函数来执行此操作，但是在打印它时遇到了一些麻烦..对于我输入的每个字符输入，我`0, 0` 会得到您的帮助以了解我做错了什么：

```
#include <stdio.h>
#include <ctype.h>

int case_letters(int ch);

int main(void)

{
    int x;
    printf("please enter a some characters, and ctrl + d to see result\n");

    case_letters(x);

    return 0;
}

int case_letters(int ch)

{
    int numOfUpper = 0;
    int numOfLower = 0;

    while ((ch = getchar()) != EOF)
    {
        if ((ch = isdigit(ch)) || ch == '\n')
        {
            printf("please enter a valid character\n");
            continue;
        }

        else if ((ch = isupper(ch)))
        {
            numOfUpper++;
        }

        else if ((ch = islower(ch)))
        {
            numOfLower++;
        }

    }

    return  printf("%d, %d", numOfUpper, numOfLower);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:28:25.160

您的所有`if`语句都为 ' 值分配不同的值`ch`并且不检查`ch`'s 值。

例如，如果您输入一个正确的`char`，这

```
if ((ch = isdigit(ch)) || ch == '\n') 
```

将分配`0`给`ch`，因为`isdigit(ch)`将返回`0`。我猜你需要

```
if ( isdigit(ch) || ch == '\n') 
```

`islower`和相同`isupper`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:29:49.347

```
 if ((ch = isdigit(ch)) || ch == '\n')
            ^-- assignment, not equality test. 
```

您正在`ch`使用 isdigit()、isupper() 和 islower() 的返回值丢弃 的值，以便在执行 isdigit 测试后立即破坏用户输入的原始值。

尝试

```
 if (isdigit(ch) || ch == '\n')
    else if (isupper(ch))
    else if (islower(ch)) 
```

反而。无需保留 iswhatever 值。

# android - 在 InputMethod 和 Application 之间进行接口的 Android TextService

> ID：14649551
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:36.873
> 
> 标签：android, android-service

在阅读了一些 TextServicesManager 文档 (android.view.textservice.TextServicesManager) 之后，我似乎能够创建一个新的文本服务，它可以处理从输入法传递到应用程序的信息（但不是拼写检查器）。根据 TextServicesManager 文档...“拼写检查器会话是文本服务之一”。这是否意味着还有其他类型的文本服务？

TextServicesManager 显然是一个不能扩展的最终类。该管理器只有一个 newSpellCheckerSession () 方法，它返回一个拼写检查会话......显然我无法创建一个与拼写检查完全无关的新文本服务（会话）。我觉得文档可能会误导我对这位经理的看法......

我觉得输入法和将内容发送到服务器的应用程序/服务之间的媒介将是一个有用的工具，原因有很多。

有人可以澄清一下文本服务管理器是否可以做到这一点，如果没有，我应该转向不同的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:42:46.897

你看过这些链接吗？他们解释了如何为 Android 创建拼写检查器。

[http://developer.android.com/guide/topics/text/spell-checker-framework.html](http://developer.android.com/guide/topics/text/spell-checker-framework.html)

[http://android-developers.blogspot.com/2012/08/creating-your-own-spelling-checker.html](http://android-developers.blogspot.com/2012/08/creating-your-own-spelling-checker.html)

# c# - 在 C# 中的 DateCompare 就像在 SQL 中一样

> ID：14649555
> 
> 赞同：0
> 
> 时间：2013-02-01T15:26:46.017
> 
> 标签：c#, .net, sql, datetime

C# 中是否有一种方法可以像 SQL`DateDiff`方法一样比较日期，包括时间部分参数？

例如我有两个日期：

```
DateTime early = "2013.02.01 07:31:15";
DateTime soon = "2013.02.01 23:48:35";

if (Compare(early, soon, DAY) == true)
{
   //I want to be here
} 
```

我想获得这两个对象在年月日相等的信息；其余的对我来说并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:29:04.327

您可以使用`DateTime.Date`：

```
if(early.Date == soon.Date)
{
} 
```

如果你想要小时的准确性：

```
if(early.Date == soon.Date && early.Hour == soon.Hour)
{
} 
```

但是，使用此解决方案，您将拥有“12/03/1857 23:59”！=“13/03/1857 00:00”。如果你想检查他们的“距离”：

```
if(early.Substract(soon).Duration() <= TimeSpan.FromHours(1))
{
} 
```

`.Duration()`获取时间跨度的“绝对”值（因为`early.Substract(soon)`可以是“正”或“负”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T15:28:43.607

您可以使用 s 的[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)属性`DateTime`来获取日期部分。

在您的情况下，您可以使用：

```
if (early.Date == soon.Date)
{
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:27:45.983

您可以使用[DateTime.Subtract](http://msdn.microsoft.com/en-us/library/system.datetime.subtract.aspx)方法来找出差异。

```
System.TimeSpan diff1 = date2.Subtract(date1); 
```

**编辑**

如果你想比较相等，你可以简单地使用相等运算符 ==

```
if(date1 == date2)
{
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:30:58.863

如果您想明确说明如何比较两个日期，我认为有点冗长没有什么问题：

```
public static bool YearMonthDayHourDateCompare(DateTime one, DateTime two)
{
    return (one.Year  == two.Year  &&
            one.Month == two.Month &&
            one.Day   == two.Day   &&
            one.Hour  == two.Hour  && 
            ...);
} 
```

以描述您的比较的方式命名方法。更好的是，这可能是一种扩展方法：

```
public static bool CompareDateAndHour(this DateTime one, DateTime two)
{
    return (one.Date == two.Date &&
            one.Hour == two.Hour && 
            ...);
} 
```

可以这样使用：

```
bool datesAreEqual = soon.CompareDateAndHour(two); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T15:31:30.480

如果你想知道是否是同一天，你不能使用日期差异......

试试这个代码：

```
if(new TimeSpan(early.Ticks).TotalDays() == new TimeSpan(soon.Ticks).TotalDays()){
     // Equal
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T15:29:18.570

```
var diff=soon-early;
diff.TotalHours or diff.TotalMinutes etc... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T15:31:27.943

要将两个日期与小时的准确性进行比较，请使用以下内容：

```
bool match = (soon - early).TotalHours < *your diff limit*; 
```

# javascript - 在每个函数上创建一个对象数组

> ID：14649559
> 
> 赞同：0
> 
> 时间：2013-02-01T15:27:06.577
> 
> 标签：javascript, jquery, object

最终我希望得到一个像这样显示的对象：

```
'0': {
       '0': {
              label: 'Book:',
              content: 'a book name',        
       }, 

       '1': {
              label: 'Video:',
              content: 'a video name',        
       }, 

       '2': {
              label: 'Audio:',
              content: 'an audio name',        
       },              
  }, 

'1': {
       '0': {
              label: 'Book:',
              content: 'another book name',        
       }, 

       '1': {
              label: 'Video:',
              content: 'another video name',        
       }, 

       '2': {
              label: 'Audio:',
              content: 'another audio name',        
       },              
  } 
```

我在 [http://jsfiddle.net/ScbjL/4/](http://jsfiddle.net/ScbjL/4/)中的代码结果不正确，我很困惑为什么 objDL 未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:31:30.517

您不应该分别迭代`.container`s、`dt`s 和`dd`s - 您忘记了 objDT/DD 来自哪个容器。还可以使用数组而不是对象来获取结果。

```
var objDL = [];
$("dl").each(function(i) {
    objDL[i] = [];
    $(this).children("dt").each(function(j) {
        var $this = $(this);
        objDL[i][j] = {
            title: $this.text(),
            description: $this.next("dd").text();
        };
    });
}); 
```

# c - 这些类型和声明在 C 中的含义是什么？

> ID：14649560
> 
> 赞同：-3
> 
> 时间：2013-02-01T15:27:06.850
> 
> 标签：c

```
int (*is_space)(unsigned char);
int (*is_term)(unsigned char);
size_t blk_size;
void *(*malloc_func)(size_t);
void *(*realloc_func)(void *, size_t); 
```

我不太清楚这些类型和声明指的是什么。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:29:26.323

这些是[函数指针](http://en.wikipedia.org/wiki/Function_pointer)。

例如，`is_space`是一个指向函数类型的指针，该函数类型`unsigned char`作为参数并返回一个`int`

这些对于定义[回调函数](http://www.linuxforu.com/2012/02/function-pointers-and-callbacks-in-c-an-odyssey/)很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:31:29.997

`int (*is_space)(unsigned char);`- 指向`integer`接受`无符号的函数的指针

`char`int (*is_term)(unsigned char);` - 相同

`void *(*malloc_func)(size_t);`并且`void *(*realloc_func)(void *, size_t);`是指向`void*`函数的指针。

另请[参阅](http://c-faq.com/decl/spiral.anderson.html)

# objective-c - 将图像从缓存加载到细节视图控制器

> ID：14649563
> 
> 赞同：1
> 
> 时间：2013-02-01T15:27:21.113
> 
> 标签：objective-c, image, dropbox-api

我正在将 Dropbox 应用程序集成到我的应用程序中。通过执行以下操作，我已将 Dropbox 应用程序中的图像下载到我的缓存中。

```
cachePathArray = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
cachePath = [cachePathArray lastObject]; 
```

现在我必须在我的详细视图控制器中显示我在 cachePath 中下载的这个文件。此外，当我下载其他文件时，缓存中的前一个文件被覆盖。有什么方法可以维护用户下载的所有文件吗？我的工作是将 Dropbox 文件夹中的用户图像下载到我的 iPad 中，然后在详细视图控制器中显示它。

我尝试使用 UIImage 的 imageWithFileContents 加载图像并给它路径。但是，它对我有用。

# exchangewebservices - EWS - 将查询字符串与搜索过滤器对象相结合

> ID：14649567
> 
> 赞同：6
> 
> 时间：2013-02-01T15:27:31.250
> 
> 标签：exchangewebservices

Exchange Web 服务`FindItems()`调用有一些采用`SearchFilter`对象的重载，而另一些采用高级查询语法 (AQS) 中的查询字符串。目前，我接受来自调用者对我的代码的 AQS 查询，例如“subject:Foo OR subject:Bar”，并将它们传递给 EWS。

但现在我也想使用 a 进行一些过滤`SearchFilter`，以限制日期范围。尽管可以在 AQS 语法中将其设置为“date:>11/05/04”，但我觉得以编程方式指定过滤器更简洁：

```
new SearchFilter.IsGreaterThanOrEqualTo(ItemSchema.DateTimeReceived, d); 
```

所以我想做的是*同时*查询a`SearchFilter`和查询字符串。为此，我想将收到的查询字符串转换为一个`SearchFilter`对象，以便我可以将其与我自己的过滤一起“和”。

有没有办法`SearchFilter`在给定 AQS 查询字符串的客户端上构造一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:05:05.577

部分回答我自己的问题：我怀疑这是不可能的，因为 EWS 不支持公用文件夹上的查询字符串，但它支持`SearchFilter`公用文件夹上的对象。因此，a`SearchFilter`无法提供查询字符串的功能，除非此 EWS 限制毫无意义。

# visual-studio-2010 - 创建新的 WebAPI 项目时出现 VS 错误

> ID：14649581
> 
> 赞同：3
> 
> 时间：2013-02-01T15:28:18.047
> 
> 标签：visual-studio-2010, visual-studio-2012, asp.net-web-api

当我创建一个新的 WebAPI 项目 (MVC4) 时，我收到以下错误。

EntityFramework.5.0.0：无法初始化 Powershell 主机。如果您的 powershell 执行策略设置设置为 AllSigned，请先打开包管理器控制台以初始化主机。

jQuery.1.7.1.1：无法初始化 Powershell 主机。如果您的 powershell 执行策略设置设置为 AllSigned，请先打开包管理器控制台以初始化主机。

谷歌搜索后，我找到了一些答案，但还没有任何效果。

[创建新的 MVC 项目时出错 - EF 和 JQuery](https://stackoverflow.com/questions/14538441/error-creating-new-mvc-project-ef-and-jquery) 这个答案似乎对我有用，因为我的上一个项目是一个 7z 命令行应用程序，我可能用 7zip 做了一些愚蠢的事情。但是我将 7-Zip 目录从 Program Files 复制粘贴到 Program Files (86)，但没有成功。

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/c934fed4-e44e-4a06-9e3b-eccb9c8aa8d6](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/c934fed4-e44e-4a06-9e3b-eccb9c8aa8d6) 这里有一个可能有效的答案（我没有尝试过），但即使它确实有效，我每次创建新项目时都不想这样做。

有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T19:34:04.323

我通过以管理员身份使用命令运行 PowerShell `Set-ExecutionPolicy Unrestricted`、重新启动 Visual Studio 并在我想做的操作之前打开包管理器控制台解决了类似的错误。

确保您首先了解这样做的安全含义。

[http://technet.microsoft.com/en-us/library/ee176961.aspx](http://technet.microsoft.com/en-us/library/ee176961.aspx)

*   **受限**- 不能运行任何脚本。Windows PowerShell 只能在交互模式下使用。
*   **AllSigned** - 只能运行由受信任的发布者签名的脚本。
*   **RemoteSigned** - 下载的脚本必须由受信任的发布者签名才能运行。
*   **不受限制**- 没有限制；可以运行所有 Windows PowerShell 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T01:54:58.307

我最近遇到了这个问题，重新安装VS并安装最新的VS更新2后，一切顺利。这至少对我有用。

# iphone - iOS 设备上的物理像素密度是否存在差异？

> ID：14649584
> 
> 赞同：-3
> 
> 时间：2013-02-01T15:28:29.723
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我发现如果我硬编码 10 像素的视图高度，iPhone 4S 和 iPhone 5 之间的物理高度会略有不同。在 iPhone 5 上，它的物理高度看起来要短一些。我知道两者都应该是 326 PPI 显示器。

在 Android 上，我们有具有不同物理像素密度的设备。因此，高度为 10 px 的视图在像素密度较高的设备上会比在像素密度较低的设备上看起来更短。为了解决这个问题，Android 提供了 DIP（Density Independent Pixels）。

我在我的代码中做错了什么来生成这些不同高度的视图，还是在 iOS 中有一种方法来解释不同的像素密度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:36:39.960

如果您的问题基本上是关于如何确定设备是否是 iPhone 5，您可以使用以下宏：

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

然后在您的代码中分支：

```
if (IS_IPHONE_5) {
... handle big screen ...
} else {
... handle small screen ...
} 
```

# javascript - 如何捕获 socket.io 错误并防止它们出现在控制台中？

> ID：14649590
> 
> 赞同：5
> 
> 时间：2013-02-01T15:28:44.380
> 
> 标签：javascript, node.js, error-handling, socket.io

我在 node.js 上运行 socket.io，在 Apache 网站上运行 socket.io 客户端。如果我不启动 node.js 服务器并加载客户端页面，则会触发错误事件并显示一条空错误消息，从而导致以下控制台输出：

```
GET http://example.com:1337/socket.io/1/?t=1359731838906  socket.io.js:1659
Socket.handshake socket.io.js:1659
Socket.connect socket.io.js:1699
Socket socket.io.js:1551
io.connect socket.io.js:94
(anonymous function) general.js:7
(anonymous function) 
```

我能做些什么来阻止这个错误被写入控制台？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-08-18T21:00:13.823

您无法“捕获”这些错误，因为它们没有出现在控制台中，但您仍然可以通过侦听`'connect_error'`,`'connect_failed'`和`'disconnect'`套接字来处理它们，然后直接处理它们或将它们重定向到自定义函数，例如`handleErrors()`：

```
const socket = io.connect(url, { reconnection: false })
socket.on('update', data => console.log(data))

socket.on('connect_error', err => handleErrors(err))
socket.on('connect_failed', err => handleErrors(err))
socket.on('disconnect', err => handleErrors(err)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T17:18:04.050

隐藏该错误的唯一方法是`io.connect`一开始就不要调用——这当然意味着即使服务器已启动，您的应用程序的套接字函数也无法工作。

重要的是要了解您看到的错误消息既不是 socket.io 本身（通过`console.error()`）放置在那里的东西，也不是未捕获的 JS 异常。

错误消息由浏览器的 XHR 对象本身放置在您的控制台中。它告诉您 XHR 请求失败（因为您的服务器没有运行）。堆栈跟踪告诉您是什么代码发起了 XHR 请求；它不是实际异常的痕迹。

由于 socket.io*必须*向服务器发出请求，因此如果服务器没有响应，它（或您）无法阻止该错误消息出现在控制台中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:04:03.457

尝试

```
socket.on('connect_failed', function(){
    console.log('Connection Failed');
}); 
```

没有测试过这个。在这里找到它[Node.js socket.io-client connect_failed / connect_error 事件](https://stackoverflow.com/questions/8588689/node-js-socket-io-client-connect-failed-event)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T14:51:15.943

如果您使用的是 Socket.io v4 并且需要捕获中间件错误，请尝试

```
// client-side
socket.on("connect_error", (err) => {
  console.log(err.message); // prints the message associated with the error
});
```

来源[https://socket.io/docs/v4/middlewares/#handling-middleware-error](https://socket.io/docs/v4/middlewares/#handling-middleware-error)

# localization - 具有多种目标语言的 XLIFF？

> ID：14649593
> 
> 赞同：4
> 
> 时间：2013-02-01T15:28:51.657
> 
> 标签：localization, language-translation, xliff

我们希望使用 XLIFF 格式作为将某些文本从德语翻译成法语和意大利语的基础。（将使用 SDL Trados 执行翻译。）

从规范来看，每个 XLIFF 文件似乎恰好有一种目标语言，但另外还可以指定其他“替代语言”。因此，可以从规范中指定两种目标语言：

```
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.2" version="1.2">
  <file source-language="de" target-language="it">
    <body>
      <trans-unit id="hi">
        <source>Betrieb</source>
        <target>Divisione</target>
        <alt-trans>
          <target xml:lang="fr">Site</target>
        </alt-trans>
      </trans-unit>
    </body>
  </file>
</xliff> 
```

这是在预期的意义上使用 XLIFF 吗？或者生成两份文件会更好吗，一份是目标语言`fr`，另一份是目标语言`it`？（我不喜欢重复）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T06:15:11.950

`<alt-trans>`不打算`<target>`在每个跨单元中使用多于一种语言的 s；它更适合[翻译匹配](http://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html#alt-trans)，无论是翻译记忆库、机器翻译匹配还是简单的过时目标字符串，需要根据源字符串中的最新更改进行更新。话虽如此，在某些情况下，`<alt-trans>`它被认为是一种[解决方法](http://www.opentag.com/xliff.htm#WhyBilingual)，用于翻译业界所谓的“自适应语言”（加拿大的法语通常改编自法语翻译）而无需单独的文件。作为必须处理来自各种来源并以各种模式呈现的 Xliffs 的本地化从业者，我建议避免这种黑客攻击。使用`<file>`标记以在一个 Xliff 文件中嵌入多种语言的 trans-units：

```
<?xml version="1.0" encoding="utf-8" ?>
<xliff version="1.1" xml:lang='en'>
 <file source-language='en' target-language='de' datatype="plaintext" original="Sample.po">
  ...
   <body>
    <trans-unit id="1" restype="button" resname="IDC_TITLE">
     <source>Title</source>
    </trans-unit>
    <trans-unit id="2" restype="label" resname="IDC_STATIC">
     <source>&amp;Path:</source>
    </trans-unit>
  ...
 </file>
 <file source-language='en' target-language='fr' datatype="plaintext" original="Sample.po">
    <trans-unit id="1" restype="button" resname="IDC_TITLE">
  ...
   </body>
 </file>
</xliff> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T16:40:59.283

我在一家翻译公司工作。我还没有看到多语言 xliff 文件。因此，为了让您和您的代理机构的生活更轻松，我会建立单独的文件。其他工具（例如 CenShare）也可以创建单独的文件。

并且更容易将其交给不同的翻译人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T12:17:56.413

根据 OASIS 维基：

> XLIFF 文档通常是双语文件。它有一种源语言（原始提取文件的语言）和一种目标语言。但是，`<alt-trans>`元素可以是源语言或目标语言以外的语言。

[资料来源：我可以在 XLIFF 文档中放入多少种语言？](https://wiki.oasis-open.org/xliff/FAQ)

# c++ - unique_ptr，移动构造函数，以及为什么总是尝试访问私有成员

> ID：14649595
> 
> 赞同：1
> 
> 时间：2013-02-01T15:28:57.307
> 
> 标签：c++, c++11, copy-constructor, unique-ptr, move-constructor

我经常遇到这个问题，我相信移动构造函数是有序的，但我认为复制构造函数是问题，隐藏它似乎不起作用。

编码：

```
template <class T>
class LinkedList{
public:
    //
    LinkedList() {}
    LinkedList(const T &data);
    LinkedList(const T &data, const LinkedList &node);
    LinkedList(const LinkedList &object);
    LinkedList &operator=(const LinkedList &object);

    ~LinkedList() {}

    std::shared_ptr<LinkedList> push_back(const T& data);

private:
    T data;
    std::unique_ptr<LinkedList> link;

    std::unique_ptr<LinkedList> LinkFactory(const LinkedList &node);

    std::shared_ptr<LinkedList> CreateStartNode(const T &data);
    std::shared_ptr<LinkedList> CreateNode(const T &data, const LinkedList &node);
}; 
```

发生错误的特定行是：

```
LinkedList<T>::LinkedList(const LinkedList<T> &object) : data(object.data),  
link(std::move(object.link)) {} 
```

我试图移动而不是复制复制构造函数中的链接无济于事。如果移动构造函数是设计而不是合成的，那会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:35:48.507

您不能移动常量对象，并且由于`object`声明为 const，`object.link`因此也是 const。

这看起来像是一个损坏的设计，因为通常该构造函数是一个*复制*构造函数，但是您试图*将*链接移出参数，这意味着您试图窃取它拥有的资源。您有一个 LinkFactory 方法，看起来您应该使用该方法，如果它符合名称的承诺。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:38:14.840

获取`lvalue`引用的构造函数是复制构造函数而不是移动构造函数。如果引用是`const`，则无法修改现有对象，因此无法从中移动。（你不应该删除`const`，因为这会给你一个奇怪的破坏性复制语义，并且移动语义被添加到语言中以避免这种奇怪）。

由于`unique_ptr`成员，您的类不可复制，因此您根本不应该提供复制构造函数。您可以提供一个移动构造函数：

```
LinkedList<T>::LinkedList(LinkedList<T> && object) : 
    data(object.data), link(std::move(object.link)) {} 
```

但没有必要这样做，因为隐式生成的移动构造函数会这样做（唯一的区别是数据被移动而不是复制）。

请记住，通常不能移动命名变量，除非您明确这样做：

```
LinkedList<int> l1;
LinkedList<int> l2(l1);             // ERROR: tries to copy
LinkedList<int> l3(std::move(l1));  // OK: explicit move 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:38:33.133

您要实现的语义是什么？在您的复制构造函数中，被复制的对象是`const`（通常是正确的）；试图在其中移动任何东西都需要它是非常量的。这看起来像是一个设计缺陷，但如果不是，那么制作链接`mutable`可能就是答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:21:13.847

我按如下方式定义了我的复制构造函数，并且使用 unique_ptr 没有编译时或链接错误：

```
LinkedList<T>::LinkedList(const LinkedList &other){
data = other.data;
link(std::move(other.link.get()));
} 
```

我感谢大家回答这个问题。

# android - Android：proguard 不会混淆源代码

> ID：14649596
> 
> 赞同：5
> 
> 时间：2013-02-01T15:28:58.940
> 
> 标签：android, proguard

我在 project.properties 中启用了 proguard：

proguard.config=proguard.cfg

我的 proguard.cfg 没有禁用混淆。但没有什么是模糊的。

我运行项目构建

蚂蚁释放。

有铃声响起吗？

* * *

> -optimizationpasses 5 -dontusemixedcaseclassnames -dontskipnonpubliclibraryclasses -dontpreverify -verbose -optimizations !code/simplification/arithmetic,!field/ *,!class/merging/*
> 
> -keep 公共类 * 扩展 android.app.Activity -keep 公共类 * 扩展 android.app.Application -keep 公共类 * 扩展 android.app.Service -keep 公共类 * 扩展 android.content.BroadcastReceiver -keep 公共类 * 扩展android.content.ContentProvider -keep 公共类 * 扩展 android.app.backup.BackupAgentHelper -keep 公共类 * 扩展 android.preference.Preference -keep 公共类 com.android.vending.licensing.ILicensingService
> 
> -keepclasseswithmembernames class * { native ; }
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet); }
> 
> -keepclasseswithmembers 类 * { public (android.content.Context, android.util.AttributeSet, int); }
> 
> -keepclassmembers 类 * 扩展 android.app.Activity { public void *(android.view.View); }
> 
> -keepclassmembers enum * { public static * *[] values(); 公共静态 ** valueOf(java.lang.String); }
> 
> -keep 类 * 实现 android.os.Parcelable { public static final android.os.Parcelable$Creator *; }

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:31:14.097

您应该确保您的项目已针对您的 Android SDK 进行了配置：

```
android update project -p MyProjectDirectory 
```

从 Android SDK r20 开始，ProGuard 配置文件被分成几个部分，具体`project.properties`如下：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

简短的项目特定配置定义在`proguard-project.txt`（不再在 proguard.cfg 中，就像在旧版本的 SDK 中一样）。在这方面，SDK 文档可能并不完全是最新的。

当您运行时`ant release`，您应该会看到来自 ProGuard 的一些日志记录输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:30:19.160

这比我想象的要简单得多：我们（在我们的 manifest.xml 文件中）启用了

```
android:debuggable="true" 
```

多哈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T09:06:17.183

@Thanks Danail，今天我刚刚克服了这个问题。只是详细说明

**`android:debuggable`** 是否可以调试应用程序，即使在用户模式下在设备上运行时也是如此——*`"true"`*如果可以，如果不能，则为“假”。默认值为“假”。

有关更多详细信息，您可以访问

> [http://www.vogella.com/tutorials/AndroidDebugging/article.html](http://www.vogella.com/tutorials/AndroidDebugging/article.html)

# jquery-datatables - 当 Jquery 数据表中的 aaData 为空或为空时重定向到错误页面

> ID：14649597
> 
> 赞同：1
> 
> 时间：2013-02-01T15:29:00.470
> 
> 标签：jquery-datatables

我正在使用 jquery 数据表。在数据为空/空（aaData）的情况下，我想重定向到错误页面，而不是在“表中没有可用数据”表中显示标准错误消息。我怎样才能做到这一点。数据表是否提供任何标准的处理方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:09:35.177

据我所知，没有一个标准的数据表功能可以为您做到这一点。由于数据表在数据来源方面很灵活，因此放置逻辑的位置可能会因您的设置而异，我们几乎总是通过 ajax 调用获取数据，因此对我们来说，放置它的最佳位置是 fnServerData功能。

```
 fnServerData: function(sSource, aoData, fnCallback) {
        $.getJSON( sSource, aoData, function(json) {

    //warning: (its been months since I've worked with this so forgive me if syntax or naming is off)
            if (json == null || json.aaData == null) {
                //redirect here
            } else {
                fnCallback(json);
            }
        });
    } 
```

如果需要，我将使用更具体的代码进行更新。

# c# - WPF ComboBox 在下拉菜单中更改大小

> ID：14649598
> 
> 赞同：0
> 
> 时间：2013-02-01T15:29:02.257
> 
> 标签：c#, wpf, combobox

我想知道，是否有办法在打开下拉列表时更改组合框的大小。

我有一个带有标签和组合框的 StackPanel，包装在一个网格中。

```
<StackPanel x:Name="stackPanel">
    <Grid>
        <Label Content="A:"/>
        <ComboBox x:Name="cbA"/>
    </Grid>
    <Grid>
        <Label Content="B:"/>
        <ComboBox x:Name="cbB"/>
    </Grid>
</StackPanel>

Looks like:
Label ComboBox
Label ComboBox 
```

如果我打开一个组合框，它不应该重叠并且看起来像：

```
Label ComboBox
      DropDown
      DropDown
      DropDown
Label ComboBox 
```

我希望你能理解我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:19:28.593

在两个组合框之间放置一个间隔网格或其他元素？您需要设置`MaxDropDownHeight`on `cbA`。如果元素比默认高度允许的少，空间将太大。

```
 <StackPanel x:Name="stackPanel">
            <StackPanel.Resources>
                <BooleanToVisibilityConverter x:Key="VisibilityConverter"/>
            </StackPanel.Resources>
            <Grid>
                <Label Content="A:"/>
                <ComboBox x:Name="cbA" MaxDropDownHeight="100" ItemsSource="{Binding Path=ComboTest}"/>
            </Grid>
            <Grid x:Name="Spacer" Height="{Binding ElementName=cbA, Path=MaxDropDownHeight}" 
                  Visibility="{Binding ElementName=cbA, Path=IsDropDownOpen, Converter={StaticResource VisibilityConverter}}"/>
            <Grid>
                <Label Content="B:"/>
                <ComboBox x:Name="cbB"/>
            </Grid>
        </StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:36:42.393

你想要这样 ![在此处输入图像描述](../Images/e573ee963c1ba182327e108f048dedad.png)

这是 ListPicker 控件。组合框不是这样工作的。

# php - Kohana 3.2 规则失败

> ID：14649601
> 
> 赞同：1
> 
> 时间：2013-02-01T15:29:10.007
> 
> 标签：php, kohana, validationrules

定义规则时，字段名称是否必须与数据库中的列名称匹配？

我遇到了一个问题，如果字段名称和列名称不匹配，则会显示规则并且不会将任何内容保存到数据库中。

什么有效：

数据库

```
user_id | username 
```

场地

```
<?php echo Form::input('username', $username, array('id' => 'username')); ?><?php echo Arr::get($errors, 'username');?> 
```

模型

```
class Model_User extends ORM {

    protected $_primary_key = 'user_id';

    public function rules()
    {
        return array(
            'username' => array(
                array('not_empty'),
            ),
        );
    }
} 
```

留言

```
return array(
    'username' => array(
        'not_empty' => 'You must provide a username.',
    ),
); 
```

什么不起作用：

数据库

```
user_id | username 
```

场地

```
<?php echo Form::input('membername', $username, array('id' => 'username')); ?><?php echo Arr::get($errors, 'membername');?> 
```

模型

```
class Model_User extends ORM {

    protected $_primary_key = 'user_id';

    public function rules()
    {
        return array(
            'membername' => array(
                array('not_empty'),
            ),
        );
    }
} 
```

留言

```
return array(
    'membername' => array(
        'not_empty' => 'You must provide a username.',
    ),
); 
```

如果我将字段名称更改为用户名以外的其他名称，则规则功能似乎无法正常工作。

如果我不应用任何规则，将用户名更改为其他名称不会导致将数据保存到数据库中出现任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:34:54.167

无法将数据库中的列名映射到不同的内部名称。相同的列名也用于设置规则、标签等。我不明白您为什么要更改列名，这对开发人员的期望不利。我的建议是在这种情况下重命名您的表格列。

Kohana ORM 提供的控制表列的唯一可能性是将要使用的列名数组列入白名单。在你的 ORM 模块中使用这个变量：

```
protected $_table_columns = array('column1','column2'); 
```

# git - git-apply 神秘地失败了，我该如何排除/修复？

> ID：14649605
> 
> 赞同：39
> 
> 时间：2013-02-01T15:29:12.943
> 
> 标签：git, patch

我目前正在尝试对（github）存储库的 PR 进行代码样式检查，并且我想向提交者提供补丁，他们可以使用这些补丁轻松修复代码样式。为此，我正在拉下他们的 PR，在其上运行我们的 uncrustify 脚本以修复任何样式错误，并希望创建一个他们可以轻松应用的 .patch 文件。但是，它始终会在某些文件上中断。

我愿意（带有`core.autocrlf=input`,的 git 版本 1.7.10.4 `core.filemode=false`）：

```
$ git checkout pr-branch
$ git log -1 (shows: commit dbb8d3f)
$ git status (nothing to commit, working directory clean)
$ <run the code styler script, which modifies some files>
$ git diff > ../style.patch (so the patch file lands outside the repo)
$ git reset --hard HEAD (to simulate the situation at the submitter's end)
$ git log -1 (shows: commit dbb8d3f)
$ git status (nothing to commit, working directory clean, so we are where we started)
$ git apply ../style.patch
error: patch failed: somefile.cpp:195
error: somefile.cpp: patch does not apply (same output using the --check option) 
```

这仅适用于某些文件，而不是所有文件。我不知道如何解决这个问题，即如何让 git 准确地告诉我哪里出错了——当我挖掘时它只会告诉我一个大块头，但这仍然是相当大的。

到目前为止我尝试过的（没有成功）：

1.  `apply --reverse`,`apply --whitespace=nowarn`
2.  `diff HEAD`而不是一个`diff`人
3.  进行虚拟提交（提交工作没有问题！），使用`format-patch`，删除虚拟提交，应用`git-am`带有或不带的补丁`-3`，或应用 `git-apply`
4.  将补丁文件放在本地目录而不是一个目录中（抓住稻草，在这里）
5.  检查 git-diff、-apply、-format-patch、-am 的手册页是否有用
6.  `patch`用linux命令打补丁
7.  ……

我不知道差异可能有什么问题。空白的东西应该只警告，对吧？在任何情况下，我都不想忽略它们，因为它是一种显然涉及空格的样式修复。

我怎样才能修复/诊断这个，甚至找出它到底在哪里？如果我发布其中一个罪魁祸首文件的差异会有帮助吗？让我感到困惑的是，提交工作没有问题，但从提交创建的补丁却没有？

在与这个搏斗了几个小时之后，我的知识已经走到了尽头......

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-01T15:48:14.567

**更新：**

您可以使用`git apply -v`来查看有关正在发生的事情的更详细信息，`git apply --check`仅验证操作或`git apply --index`重建本地索引文件。

根据您的评论，您的本地索引似乎已损坏，因此`index`解决了它。

我将留下我最初的答案和评论，主要是为了让人们了解正在发生的事情，因为我怀疑其他人会跳到我根据问题描述得出的相同初步结论。

**------**

差异很可能没有任何问题。而是查看目标 git 存储库。当你在做的时候`git reset --hard HEAD`，没有什么能保证你`HEAD`在那个其他存储库上的 与你的相同`HEAD`。

在目标 repo 上执行`git log`并查看顶部的提交。它与您制作差异的那个相同吗？很可能不是。查看历史记录并检查您需要的提交是否存在。如果是，那么目标 repo 就在你之前，你必须回去，做`git pull`（或`git rebase`）并产生一个新的差异。如果不是，那么目标 repo 就在您的后面，您需要在目标 repo 上执行`git pull`（或`git rebase`）以使其加快速度。

请记住，如果您有其他人提交到您的“主”存储库（您的机器人和目标存储库从中提取的那个），您可能必须同时访问`git pull`两个存储库，以使它们获得合理的近期共同提交。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-18T12:09:11.990

尝试检查您的补丁文件 - 示例：

```
git apply --reject mypatch.patch 
```

如果有任何差异，这将向您显示差异 - 这是它的外观示例：

```
error: patch failed: <filename>:<linenumber>
error: while searching for :
    cout << "}" << endl; // example of a line in your patch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T16:17:12.810

在这种情况下，如果您已经尝试了下面列出的所有选项：

1.  调查文件中潜在的不可打印/不可见字符
2.  用于`dos2unix`转换
3.  更改 git 配置以调整处理行尾的方式，例如：

```
git config --global core.autocrlf input 
```

在这种情况下，另一个邪恶的根源可能是您的 IDE。

例如，像 PHPStorm 这样的一些 JetBrains IDE 具有以下选项：

[![在此处输入图像描述](../Images/a5d69d3922f11fd4753e8253ff1731ab.png)](https://i.stack.imgur.com/pWBup.png)

今天在一个奇怪的补丁问题上花费了超过 4 个血腥小时后，最终出现以下错误：

```
git apply < my.git.patch --verbose
...
error: patch failed: plugins/some/file.php:74 
```

我意识到我是我的编辑器的受害者（我不确定这是否是默认行为）。

我正在使用 PHPStorm 检查补丁文件，它默默地从补丁文件中删除了一个空格，该空格实际上存在于需要修补的目标文件中。

这是超级偷偷摸摸的，我最终设置了不再遇到此类问题的`Strip trailing spaces on Save for`选项。`None`

还要记住，与平台相关的差异，如底层文件系统（例如 MacOS/Linux）的区分大小写也可能是问题所在。

# c++ - 即使 QCloseEvent 被忽略，窗口也被隐藏

> ID：14649606
> 
> 赞同：12
> 
> 时间：2013-02-01T15:29:17.213
> 
> 标签：c++, macos, qt, qt5

我目前正在尝试将我的 Qt 应用程序移植到 Mac OSX 并遇到以下问题：

我的一个窗口类（从 QMainWindow 派生）在按下关闭按钮时显示一个对话框，您可以在其中保存/放弃更改或中止。这是通过重新实现 closeEvent 来完成的，如下所示：

```
void ResultsWindow::closeEvent(QCloseEvent* event)
{
    if (isWindowModified())
    {
        activateWindow();
        QMessageBox::StandardButton button = QMessageBox::warning(
                this,
                APPLICATION_NAME,
                "Warning: data have been modified. Do you want to save the "
                    "changes?",
                QMessageBox::Save | QMessageBox::Discard | QMessageBox::Abort,
                QMessageBox::Abort);
        switch (button)
        {
            case QMessageBox::Save:
                if (!Save())
                {
                    event->ignore();
                    return;
                }
                break;
            case QMessageBox::Discard:
                break;
            case QMessageBox::Abort:
            default:
                event->ignore();
                return;
        }
    }
    event->accept();
} 
```

预期的行为如下：如果单击“Abort”，则忽略该事件并且窗口保持打开状态。这在 Linux 和 Windows 上按预期工作。然而，在 OSX 上，该窗口是隐藏的，但在后台仍处于活动状态。我在这里想念什么？如何确保窗户保持打开状态？

**更新：** 我不知何故认为这是 Qt5 的问题。如果该`closeEvent`方法不包含任何内容，但`event->ignore();`窗口仍处于关闭状态。我不认为这是预期的行为。也许我应该将此问题发布到 Qt 邮件列表...</p>

**更新：这是 Qt 中的一个错误，自 5.1 版起已解决。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:55:59.160

与 Qt 5.0.0 或 Qt 5.0.1 相同。但是，如果您将 WindowModality 设置为 ApplicationModal 或 WindowModal，则它可以工作。按 Cmd+Q 退出并获取消息框。

![Qt Creator 中的 windowModality](../Images/d2e1477f26e1d21d5ead3d8d8de10e5c.png)

我认为问题是由 Mac OS X UI 和其他 UI 之间的差异引起的。也许在 Qt 上的一些额外工作将使他们能够解决问题。

即使您重新实现 QMainWindow::event() ，您也会获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:16:46.713

我在 Mac 10.7 上安装了 Qt 4.7，但无法重现此错误。

我相信每次你忽略应该做的伎俩时，只需在宏`show()`之间放置。像这样的东西：`Q_OS_MAC``event`

```
event->ignore();
#ifdef Q_OS_MAC
     show();
#endif 
```

这可能不是完美的解决方案，但肯定是解决此问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T06:24:49.413

代替

```
case QMessageBox::Abort:
                default:
                        event->ignore();
                        return; 
```

尝试做

```
case QMessageBox::Abort:
                       event->ignore();
                       return;
 default:
         break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T09:57:52.857

当我也遇到这个错误时，我在这里创建了一个错误报告：[https ://bugreports.qt-project.org/browse/QTBUG-30899](https://bugreports.qt-project.org/browse/QTBUG-30899)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T16:31:49.507

丑陋的解决方法（经过测试和工作），在 event->ignore() 之后添加：

```
QTimer::singleShot(0,this,SLOT(hide()));
QTimer::singleShot(100,this,SLOT(show())); 
```

# ruby-on-rails - 尽管明确指定了选择，但渴望加载会获取所有字段

> ID：14649608
> 
> 赞同：2
> 
> 时间：2013-02-01T15:29:16.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, eager-loading

我有一个这样的查询，

```
company.users.select("users.id, users.state").includes(:organization) 
```

在这里，我渴望加载关联`organization`。我期待在对象中获取属性 id 和 user_id ，但随后我获取了所有字段。

当我们急切加载时，rails 的行为是这样，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:33:24.260

在您的情况下，您将获得所有公司**用户**而不是组织。

急切加载意味着预加载数据库行。它不会只获取属性。它加载所有关联的行。

例如：

```
 comments = Comment.all(:select => "users.name,comment_text", :include => :user) 
```

在这里，它不仅会从用户表中加载名称。它将从数据库中获取所有用户行。因此，您不必触发额外的查询。还有一件事是，`include`当您具有包含表的属性时，会忽略使用 select 子句。有关更多信息，请通过 ryan bates riascast 了解加入与包括：[http ://railscasts.com/episodes/181-include-vs-joins](http://railscasts.com/episodes/181-include-vs-joins)

# hibernate - Grails 非空属性在验证期间引用空值或瞬态值

> ID：14649610
> 
> 赞同：1
> 
> 时间：2013-02-01T15:29:20.733
> 
> 标签：hibernate, validation, grails

我有一个带有一堆不可为空字符串的域类。对于其中一个域属性，我调用了一个自定义验证器来进行数据库检查。当我的原始域对象中有一个字段为空时，在自定义验证期间域对象会尝试刷新。这会导致“非空属性引用空值或瞬态值”错误。我将休眠刷新模式设置为手动，所以我不知道它为什么要尝试刷新。

```
 String id
String name
String type
String description

static constraints =
{
    id unique: true, nullable:false
    type unique:false, nullable: false
    name(unique:['type'] nullable: false, blank:false,
        validator:{val, obj ->
            if(val != null)
            {
                    def result = OtherDomain.findByType(val)
                    if(result == null)
                    {
                        return 'foreignkey'
                    }

            }

        })

    description unique:false,nullable: false

}

static mapping =
{
    table 'track'
    id column:'id', type: 'string', generator: 'assigned'
    version false
} 
```

没有其他域修改正在进行。这是此交易期间唯一编辑的域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:12:50.653

Grails 通常会在任何查询之前刷新休眠会话，因此`OtherDomain.findByType(val)`会导致刷新。您可以通过在单独的休眠会话中执行查询来解决此问题，如下所示：

```
OtherDomain.withNewSession { session ->
    def result = OtherDomain.findByType(val)
    if (result == null) {
        return 'foreignkey'
    }
} 
```

# sql-server - 带有额外的“其他/默认/后备”列的 PIVOT？

> ID：14649615
> 
> 赞同：3
> 
> 时间：2013-02-01T15:29:29.160
> 
> 标签：sql-server, tsql, pivot

是否可以为 PIVOT 操作定义“回退”或“其他”情况？让我玩一下 MSDN 中的示例：

```
-- Pivot table with one row and five columns
SELECT
    'AverageCost' AS Cost_Sorted_By_Production_Days, 
    [0], [1], [2], [3], [4],
    [??magicalELSEkeyword??] as 'too many days'

FROM
(
    SELECT DaysToManufacture, StandardCost 
    FROM Production.Product
) AS SourceTable

PIVOT
(
    AVG(StandardCost)
    FOR DaysToManufacture IN
    (
        [0], [1], [2], [3], [4],
        [??magicalELSEkeyword??]
    )
) AS PivotTable; 
```

枢轴行为非常明显 - 它在指定值列表的出现上选择/案例/组。我想看到的是一个“后备”案例。在上面的查询中，我想获取：

*   “即时” 0 天流程的平均成本
*   1天流程的平均成本
*   ...
*   4天流程的平均成本
*   **所有其他人的**平均成本

 **请注意，“通缉”案件列表是不变的并且是已知的。我不想产生未知列数的枢轴。我只想将所有不匹配的值分组为名为“其他”的简单结果

我在[MSDN](http://msdn.microsoft.com/pl-pl/library/ms177634%28SQL.105%29.aspx)上的 T-SQL 语法参考中没有看到任何这种可能性，我只是觉得很难相信这是不可用的。它似乎是一个非常有用的功能并且实现起来微不足道，省略它只是很痛苦..

是的，我知道它可能会引入讨论是否以及如何处理出现在“其他”中的 NULL 值，但这只是两种特殊情况..它们可以像在任何聚合函数中一样被忽略——这对实现，并且 100% 良好并且与 SQL 的其余部分保持一致——或者可以由两个不同的备用关键字处理，例如 ELSE-NOT-NULL 与 ELSE-OR-NULL..

这个功能真的没有了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:35:26.997

不幸的是，不可能将`other`放在`ELSE`语句中，所以我会将 放在`CASE`您的子查询中。然后，您将`PIVOT`使用这些新值：

```
select *
from
(
  select StandardCost,
    case DaysToManufacture
      when 0 then '0'
      when 1 then '1'
      when 2 then '2'
      when 3 then '3'
      when 4 then '4'
      else 'Others' end as DaysToManufacture
  from Product
) src
pivot
(
  avg(StandardCost)
  for DaysToManufacture in ([0], [1], [2], [3], [4], [Others])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/c8846/4)**

# javascript - javascript全局变量和jQuery的奇怪行为

> ID：14649616
> 
> 赞同：2
> 
> 时间：2013-02-01T15:29:31.480
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery：ajax调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)

首先，我对 JS 或 jQuery 不是很有经验，但就我的编程技能而言，我似乎找不到任何我的方法有问题的地方。

```
var subtree;

$.post("addTreeServlet",
    {
        term:clickedNode,
        max:maxId,
        id:clickedId
    },
    function(jsonResponse){

        subtree = eval('(' + jsonResponse + ')');

    }
);

$jit.json.prune(subtree, level);
return {
     'id': nodeId,
     'children': subtree.children
}; 
```

我用调试器检查了代码，结果如下：程序从 addTreeServlet 返回并传输一个表示 JSON 数据的字符串。eval() 函数接受这个字符串并将其转换为 JSON 对象（同样，它在调试器中看起来非常好）。但是一旦我离开函数（jsonResponse），var 子树就会显示为未定义，我不知道为什么。

那是因为jQuery方法吗？我不知道...

如果我只输入 subtree =“whatever”，这也是相同的行为。一旦我退出函数，它就会变得未定义..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:54:44.720

它正在等待发布响应，但您的闲置脚本会立即被浏览器解析。所以你需要在收到回复后对 ajax 响应做你想做的事情。

```
function(jsonResponse){
    var subtree = eval('(' + jsonResponse + ')');
    doSomthingWithResponse(subtree);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:00:43.080

问题是 $.post 异步为您完成工作，而 $.post 下的代码在调用返回之前执行......您使用 $.ajax 与同步调用代替

```
 var subtree;
        $.ajax({
            type: 'POST',
            url: "addTreeServlet",
            data: {
                term: clickedNode,
                max: maxId,
                id: clickedId
            },
            success: function (jsonResponse) {

                subtree = eval('(' + jsonResponse + ')');

            },
            async: false
        });

        $jit.json.prune(subtree, level);
        return {
             'id': nodeId,
             'children': subtree.children
        }; 
```

# powershell-2.0 - 如何将连接添加到 Powershell 脚本

> ID：14649617
> 
> 赞同：0
> 
> 时间：2013-02-01T15:29:38.980
> 
> 标签：powershell-2.0

我有一个名为 PostPro.ps1 的 powershell 脚本。我想为这个脚本提供一个连接，以便在需要时可以在执行 PostPro.ps1 脚本之前和之后添加功能。

在此先感谢您的帮助！

拉玛尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:56:54.663

带参数的另一种方式：
postpro.ps1：

```
[CmdletBinding()]
Param(
   [ScriptBlock]$before,
   [ScriptBlock]$after
    )

if($before -ne $null){
Invoke-Command $before
}

write-host "hello"

if($after -ne $null){
Invoke-Command $after
} 
```

然后可以提供脚本来执行：

```
$b={write-host "before"}
$a={write-host 'after' }
PS>.\postpro.ps1 -before $b -after $a
before
hello
after 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T15:43:07.977

一种方法是使用模块。如果你把你所有的扩展函数都放在某个文件夹中的某个模块中，以某种名称格式，那么每个模块都需要一个runBefore和一个runAfter函数。

在 PostPro.ps1 脚本中，您可以像这样加载模块：

```
$modules = ls $(Join-Path $hookDir "postPro-extension-*.psm1") | 
    % { import-Module $_.FullName -AsCustomObject } 
```

这将加载 $hookDir 中所有名称类似于 postPro-extension-doSomething.psm1 的文件。每个模块都将存储在一个对象中，使您可以访问每个模块的功能。要运行这些函数，您可以在每个对象上调用它们，如下所示。

您可以在脚本的主要部分之前像这样

```
$modules | % { $_.runBefore } 
```

这在脚本的主要部分之后

```
$module | % { $_.runAfter } 
```

# oracle - Oracle INSERT INTO SELECT(...) DUP_VAL_ON_INDEX 异常行为

> ID：14649622
> 
> 赞同：1
> 
> 时间：2013-02-01T15:30:03.373
> 
> 标签：oracle, exception

我有一个如下所示的存储过程：

```
BEGIN
  INSERT INTO result_table
  (SELECT (...) FROM query_table);
EXCEPTION
  WHEN DUP_VAL_ON_INDEX THEN
    NULL;
END; 
```

我在将多个参数传递给 SELECT 语句的循环中执行此操作，在某些情况下，某些值可能会重复，这就是我必须捕获 DUP_VAL_ON_INDEX 异常的原因。

我的问题是，如果 SELECT 语句返回更多行并且其中只有一个已经存在于 *result_table*, f. 前任。

```
1 'A'
2 'B'
3 'C' 
```

并且第一行（1'A'）已经在表中，是否会插入其他不存在的行（上面的第二个和第三个）？或者根本不会插入它们？

恐怕它们都不会被插入（我的测试用例部分证实了这一点）......如果是这样，我必须有什么选择来实现所需的行为？有没有使用上面的结构插入不违反主键的行的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:54:43.700

您可以使用该`MERGE`语句。如果记录不存在则插入记录，如果记录已存在则不执行任何操作。

[http://psoug.org/reference/merge.html](http://psoug.org/reference/merge.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:38:43.387

您是对的，如果一条记录违反约束，则不会插入任何记录。我会做

```
INSERT INTO result_table
(SELECT (...) FROM query_table a WHERE NOT EXISTS
(SELECT NULL FROM result_table b WHERE b.b_unique_key = a.b_unique_key)
) 
```

另一种选择是使用[错误记录](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php)

```
INSERT INTO result_table
SELECT ... FROM query_table 
LOG ERRORS INTO err$_dest ('INSERT') REJECT LIMIT UNLIMITED; 
```

注意：您必须在运行此查询之前创建错误表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:43:30.610

如果您使用的是 11g，那么您可以使用`ignore_row_on_dupkey_index`提示来抑制错误：

```
create table tab (id integer);

alter table tab add constraint tab_pk primary key (id);

insert into tab
  select rownum from dual connect by level <= 1;

1 rows inserted.
        ID
----------
         1 

SELECT * FROM tab;

insert into tab
  select rownum from dual connect by level <= 3;

SQL Error: ORA-00001: unique constraint (CAM_OWNER.TAB_PK) violated

insert /*+ ignore_row_on_dupkey_index(tab, tab_pk) */into tab
  select rownum from dual connect by level <= 3;

SELECT * FROM tab;

2 rows inserted.
        ID
----------
         1 
         2 
         3 
```

# php - 使用 jQuery 和 PHP/MySQL 表

> ID：14649623
> 
> 赞同：1
> 
> 时间：2013-02-01T15:30:04.280
> 
> 标签：php, jquery, mysql

我有一个使用 PHP/MySQL 结果创建的表，[http://www.fsma.co.uk/help/table.jpg](http://www.fsma.co.uk/help/table.jpg)。

当用户单击重新发送确认按钮时，我有一个运行 PHP 脚本的 jQuery 脚本来向该客户发送电子邮件。

我需要的是该按钮然后更改为文本并从 PHPscript 提供返回的消息，或者在下面添加一个新行以显示返回的消息。

我让它工作，但无论您单击哪个按钮，它都使用同一行。但是，由于玩弄了很多想法，我不再拥有该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:38:34.827

像这样的东西：

```
$(".buttonClass").click(function(event) {
    event.preventDefault();
    $.post(url, data, function(response) {
        // hide the clicked button
        $(this).hide(); 

        // insert content from the called php function after the button
        $(this).after(response);
    });
}); 
```

您的 php 函数必须回显您要显示的内容，而不是按钮。

# visual-studio - 由于nuget已关闭，无法再编译

> ID：14649625
> 
> 赞同：0
> 
> 时间：2013-02-01T15:30:10.097
> 
> 标签：visual-studio, nuget

看起来 Nuget 目前已关闭。不幸的是，我现在也不能编译我的项目了。
有什么好办法解决这个问题？卸载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:41:58.937

我们目前也无法访问 NuGet.org。

如果您正在访问已下载的软件包。您可以按照 Scott Hanselman 在此处提供的说明进行操作：[http ://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx)

# php - MYSQL/PHP 选择相同的值

> ID：14649626
> 
> 赞同：1
> 
> 时间：2013-02-01T15:30:14.580
> 
> 标签：php, mysql, sql, select

我有一张桌子，上面有我可以订购的产品。

```
╔═════════╦═════════╗
║ ORDERID ║ INSTORE ║
╠═════════╬═════════╣
║       1 ║       0 ║
║       1 ║       1 ║
║       1 ║       1 ║
║       1 ║       1 ║
║       1 ║       0 ║
║       2 ║       1 ║
║       2 ║       1 ║
║       2 ║       1 ║
╚═════════╩═════════╝ 
```

现在我需要获取所有 instore 的订单，所有订单的值都为 1，比如 orderid2。这怎么可能？

期望的结果

```
╔═════════╗
║ ORDERID ║
╠═════════╣
║       2 ║
╚═════════╝ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:37:05.197

```
SELECT  orderID
FROM    tableName
GROUP   BY orderID
HAVING  COUNT(*) = SUM(instore = 1) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/79bb0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:37:58.707

```
SELECT * FROM products p WHERE not exists (select 1 from products where orderid = p.orderid and instore != 1 limit 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:39:25.113

不确定我是否完全理解你的问题，但

```
select * from products where instore=1 and orderid=2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:34:03.973

```
SELECT DISTINCT ( 
```

OrderID ) FROM `products` WHERE Instore =1 且 OrderID 不在 (

SELECT OrderID FROM products WHERE `Instore`=0 )

# java - Java JPA：条件谓词，如何根据布尔值省略一个

> ID：14649636
> 
> 赞同：2
> 
> 时间：2013-02-01T15:30:49.237
> 
> 标签：java, jpa

我有一些布尔值，基于这些布尔值，我需要`Predicate`在`CriteriaQuery`. 但是，给定示例 1 中的方法不起作用，因为对该函数的第二次调用`where()`将覆盖任何先前的属性。这意味着只有最后一个`Predicate`会被执行。

通常你会堆叠`Predicates`如示例 2 中所示。

但是，由于布尔值给出的条件，这是不可能的。我试图防止出现示例 3 中的情况。有什么建议吗？

**示例 1**

```
function(boolean a, boolean b, boolean c) {
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Product> query = cb.createQuery(Product.class);
    Root product = query.from(Product.class);

    query.select(product);

    if(a) {
        query.where(cb.equal(...));
    }
    if(b) {
        query.where(cb.equal(...));
    }
    if(c) {
        query.where(cb.equal(...));
    }

    return em.createQuery(query).getResultList();
} 
```

**示例 2**

```
query.where(cb.equal(...), cb.equal(...), cb.equal(...)); 
```

**示例 3**

```
if(a && b && c) { query.where(cb.equal(...), cb.equal(...), cb.equal(...)); }
if(a && b && !c) { query.where(cb.equal(...), cb.equal(...)); }
if(a && !b && c) { query.where(cb.equal(...), cb.equal(...)); }
if(a && !b && !c) { query.where(cb.equal(...)); }
(...) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:53:09.920

您可以将它们收集在一个列表中，然后在最后设置 where 子句，例如：

```
private final List<Predicate> predicates = new ArrayList<Predicate>(3);
...
if(a) {
    predicates.add(cb.equal(...));
}
if(b) {
    predicates.add(cb.equal(...));
}
if(c) {
    predicates.add(cb.equal(...));
}
...
query.where(predicates.toArray(new Predicate[predicates.size()]));
... 
```

# php - Codeigniter -- _render_page() 未定义

> ID：14649641
> 
> 赞同：2
> 
> 时间：2013-02-01T15:30:54.507
> 
> 标签：php, codeigniter, ion-auth

我将[ion auth 与 CI 一起](https://github.com/benedmunds/CodeIgniter-Ion-Auth)使用。是什么`_render_page()`？我一直在使用`$this->load()`和重定向。我收到此错误：

`Fatal error: Call to undefined method Profile::_render_page()`

我没有通过 ion auth 更改页面代码，所以我想我必须调用一些库或助手，但我不知道是哪一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:48:01.247

这是私有方法，用于默认身份验证ion_auth，在您的控制器配置文件中不存在此功能，您可能仅从身份验证（登录/注销用户的方法）复制并忘记它..

**默认 Auth.php**

```
function _render_page($view, $data=null, $render=false)
    {

        $this->viewdata = (empty($data)) ? $this->data: $data;

        $view_html = $this->load->view($view, $this->viewdata, $render);

        if (!$render) return $view_html;
    } 
```

在此处发布您的代码...现在在这里就像成对烹饪一样

# php - 在 PHP 中调整图像大小

> ID：14649645
> 
> 赞同：110
> 
> 时间：2013-02-01T15:31:12.153
> 
> 标签：php, image-processing, image-resizing, image-upload

我想编写一些 PHP 代码，自动将通过表单上传的任何图像调整为 147x147px，但我不知道如何去做（我是一个相对的 PHP 新手）。

到目前为止，我已经成功上传了图像，识别了文件类型并清理了名称，但我想将调整大小功能添加到代码中。例如，我有一个 2.3MB 的测试图像，尺寸为 1331x1331，我希望代码缩小它的大小，我猜这也会显着压缩图像的文件大小。

到目前为止，我有以下内容：

```
if ($_FILES) {
                //Put file properties into variables
                $file_name = $_FILES['profile-image']['name'];
                $file_size = $_FILES['profile-image']['size'];
                $file_tmp_name = $_FILES['profile-image']['tmp_name'];

                //Determine filetype
                switch ($_FILES['profile-image']['type']) {
                    case 'image/jpeg': $ext = "jpg"; break;
                    case 'image/png': $ext = "png"; break;
                    default: $ext = ''; break;
                }

                if ($ext) {
                    //Check filesize
                    if ($file_size < 500000) {
                        //Process file - clean up filename and move to safe location
                        $n = "$file_name";
                        $n = ereg_replace("[^A-Za-z0-9.]", "", $n);
                        $n = strtolower($n);
                        $n = "avatars/$n";
                        move_uploaded_file($file_tmp_name, $n);
                    } else {
                        $bad_message = "Please ensure your chosen file is less than 5MB.";
                    }
                } else {
                    $bad_message = "Please ensure your image is of filetype .jpg or.png.";
                }
            }
$query = "INSERT INTO users (image) VALUES ('$n')";
mysql_query($query) or die("Insert failed. " . mysql_error() . "<br />" . $query); 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-02-01T15:33:26.653

您需要使用 PHP 的[ImageMagick](http://php.net/manual/en/book.imagick.php)或[GD](http://php.net/manual/en/book.image.php)函数来处理图像。

以 GD 为例，它就像...

```
function resize_image($file, $w, $h, $crop=FALSE) {
    list($width, $height) = getimagesize($file);
    $r = $width / $height;
    if ($crop) {
        if ($width > $height) {
            $width = ceil($width-($width*abs($r-$w/$h)));
        } else {
            $height = ceil($height-($height*abs($r-$w/$h)));
        }
        $newwidth = $w;
        $newheight = $h;
    } else {
        if ($w/$h > $r) {
            $newwidth = $h*$r;
            $newheight = $h;
        } else {
            $newheight = $w/$r;
            $newwidth = $w;
        }
    }
    $src = imagecreatefromjpeg($file);
    $dst = imagecreatetruecolor($newwidth, $newheight);
    imagecopyresampled($dst, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

    return $dst;
} 
```

你可以调用这个函数，像这样......

```
$img = resize_image(‘/path/to/some/image.jpg’, 200, 200); 
```

从个人经验来看，GD 的图像重采样确实也大大减小了文件大小，尤其是在重采样原始数码相机图像时。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-05-15T13:31:51.653

只需使用 PHP 的 GD 函数（如**imagescale**）：

**句法：**

```
imagescale ( $image , $new_width , $new_height ) 
```

**例子：**

步骤： 1 读取文件

```
$image_name =  'path_of_Image/Name_of_Image.jpg|png|gif'; 
```

步骤：2：加载图像文件

```
 $image = imagecreatefromjpeg($image_name); // For JPEG
//or
 $image = imagecreatefrompng($image_name);   // For PNG
 //or
 $image = imagecreatefromgif($image_name);   // For GIF 
```

步骤：3：我们的救生员出现在'_' | 缩放图像

```
 $imgResized = imagescale($image , 500, 400); // width=500 and height = 400
//  $imgResized is our final product 
```

注意：imagescale 适用于 (PHP 5 >= 5.5.0, PHP 7)

步骤： 4：将调整大小的图像保存到所需的目录。

```
imagejpeg($imgResized, 'path_of_Image/Name_of_Image_resized.jpg'); //for jpeg
imagepng($imgResized, 'path_of_Image/Name_of_Image_resized.png'); //for png 
```

来源：[点击阅读更多](https://www.php.net/manual/en/function.imagescale.php)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-03-31T07:13:55.183

~~[该资源](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)~~（断开的链接）也值得考虑 - 一些使用 GD 的非常整洁的代码。但是，我修改了他们的最终代码片段以创建满足 OPs 要求的函数......

```
function store_uploaded_image($html_element_name, $new_img_width, $new_img_height) {

    $target_dir = "your-uploaded-images-folder/";
    $target_file = $target_dir . basename($_FILES[$html_element_name]["name"]);

    $image = new SimpleImage();
    $image->load($_FILES[$html_element_name]['tmp_name']);
    $image->resize($new_img_width, $new_img_height);
    $image->save($target_file);
    return $target_file; //return name of saved file in case you want to store it in you database or show confirmation message to user

} 
```

您还需要包含此 PHP 文件...

```
<?php

/*
* File: SimpleImage.php
* Author: Simon Jarvis
* Copyright: 2006 Simon Jarvis
* Date: 08/11/06
* Link: http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details:
* http://www.gnu.org/licenses/gpl.html
*
*/

class SimpleImage {

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {
      $new_image = imagecreatetruecolor($width, $height);
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-08-22T15:45:29.743

如果您不关心纵横比（即您想将图像强制为特定尺寸），这是一个简化的答案

```
// for jpg 
function resize_imagejpg($file, $w, $h) {
   list($width, $height) = getimagesize($file);
   $src = imagecreatefromjpeg($file);
   $dst = imagecreatetruecolor($w, $h);
   imagecopyresampled($dst, $src, 0, 0, 0, 0, $w, $h, $width, $height);
   return $dst;
}

 // for png
function resize_imagepng($file, $w, $h) {
   list($width, $height) = getimagesize($file);
   $src = imagecreatefrompng($file);
   $dst = imagecreatetruecolor($w, $h);
   imagecopyresampled($dst, $src, 0, 0, 0, 0, $w, $h, $width, $height);
   return $dst;
}

// for gif
function resize_imagegif($file, $w, $h) {
   list($width, $height) = getimagesize($file);
   $src = imagecreatefromgif($file);
   $dst = imagecreatetruecolor($w, $h);
   imagecopyresampled($dst, $src, 0, 0, 0, 0, $w, $h, $width, $height);
   return $dst;
} 
```

现在让我们处理上传部分。第一步，将文件上传到您想要的目录。然后根据文件类型（jpg、png 或 gif）调用上述函数之一，并传递您上传文件的绝对路径，如下所示：

```
 // jpg  change the dimension 750, 450 to your desired values
 $img = resize_imagejpg('path/image.jpg', 750, 450); 
```

返回值`$img`是一个资源对象。我们可以保存到新位置或覆盖原始位置，如下所示：

```
 // again for jpg
 imagejpeg($img, 'path/newimage.jpg'); 
```

希望这可以帮助某人。检查这些链接以获取有关调整 [Imagick::resizeImage](http://php.net/manual/en/imagick.resizeimage.php)和 [imagejpeg()大小的更多信息](http://us3.php.net/manual/en/function.imagejpeg.php "imgejpeg()")

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-05-08T11:20:47.503

（**重要提示**：在动画（动画 webp 或 gif）调整大小的情况下，结果将是从第一帧开始调整大小的非动画图像！（原始动画保持不变......）

我在我的**php 7.2**项目中创建了这个（示例 imagebmp 肯定（PHP 7 >= 7.2.0）：[php/manual/function.imagebmp](https://www.php.net/manual/en/function.imagebmp.php)）关于[techfry.com/php-tutorial](https://www.techfry.com/php-tutorial)，使用 GD2，（所以没有第 3 方库）和与 Nico Bistolfi 的答案非常相似，但适用于所有五种基本图像 mimetype（**png、jpeg、webp、bmp 和 gif**），创建一个新的调整大小的文件，而不修改原始文件，以及一个函数中的所有内容和准备使用（复制并粘贴到您的项目）。（您可以使用第五个参数设置新文件的扩展名，或者如果您想保留原始文件，请保留它）：

```
function createResizedImage(
    string $imagePath = '',
    string $newPath = '',
    int $newWidth = 0,
    int $newHeight = 0,
    string $outExt = 'DEFAULT'
) : ?string
{
    if (!$newPath or !file_exists ($imagePath)) {
        return null;
    }

    $types = [IMAGETYPE_JPEG, IMAGETYPE_PNG, IMAGETYPE_GIF, IMAGETYPE_BMP, IMAGETYPE_WEBP];
    $type = exif_imagetype ($imagePath);

    if (!in_array ($type, $types)) {
        return null;
    }

    list ($width, $height) = getimagesize ($imagePath);

    $outBool = in_array ($outExt, ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp']);

    switch ($type) {
        case IMAGETYPE_JPEG:
            $image = imagecreatefromjpeg ($imagePath);
            if (!$outBool) $outExt = 'jpg';
            break;
        case IMAGETYPE_PNG:
            $image = imagecreatefrompng ($imagePath);
            if (!$outBool) $outExt = 'png';
            break;
        case IMAGETYPE_GIF:
            $image = imagecreatefromgif ($imagePath);
            if (!$outBool) $outExt = 'gif';
            break;
        case IMAGETYPE_BMP:
            $image = imagecreatefrombmp ($imagePath);
            if (!$outBool) $outExt = 'bmp';
            break;
        case IMAGETYPE_WEBP:
            $image = imagecreatefromwebp ($imagePath);
            if (!$outBool) $outExt = 'webp';
    }

    $newImage = imagecreatetruecolor ($newWidth, $newHeight);

    //TRANSPARENT BACKGROUND
    $color = imagecolorallocatealpha ($newImage, 0, 0, 0, 127); //fill transparent back
    imagefill ($newImage, 0, 0, $color);
    imagesavealpha ($newImage, true);

    //ROUTINE
    imagecopyresampled ($newImage, $image, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);

    // Rotate image on iOS
    if(function_exists('exif_read_data') && $exif = exif_read_data($imagePath, 'IFD0'))
    {
        if(isset($exif['Orientation']) && isset($exif['Make']) && !empty($exif['Orientation']) && preg_match('/(apple|ios|iphone)/i', $exif['Make'])) {
            switch($exif['Orientation']) {
                case 8:
                    if ($width > $height) $newImage = imagerotate($newImage,90,0);
                    break;
                case 3:
                    $newImage = imagerotate($newImage,180,0);
                    break;
                case 6:
                    $newImage = imagerotate($newImage,-90,0);
                    break;
            }
        }
    }

    switch (true) {
        case in_array ($outExt, ['jpg', 'jpeg']): $success = imagejpeg ($newImage, $newPath);
            break;
        case $outExt === 'png': $success = imagepng ($newImage, $newPath);
            break;
        case $outExt === 'gif': $success = imagegif ($newImage, $newPath);
            break;
        case  $outExt === 'bmp': $success = imagebmp ($newImage, $newPath);
            break;
        case  $outExt === 'webp': $success = imagewebp ($newImage, $newPath);
    }

    if (!$success) {
        return null;
    }

    return $newPath;
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-10-23T05:37:18.597

我希望对你有用。

```
/**
         * Image re-size
         * @param int $width
         * @param int $height
         */
        function ImageResize($width, $height, $img_name)
        {
                /* Get original file size */
                list($w, $h) = getimagesize($_FILES['logo_image']['tmp_name']);

                /*$ratio = $w / $h;
                $size = $width;

                $width = $height = min($size, max($w, $h));

                if ($ratio < 1) {
                    $width = $height * $ratio;
                } else {
                    $height = $width / $ratio;
                }*/

                /* Calculate new image size */
                $ratio = max($width/$w, $height/$h);
                $h = ceil($height / $ratio);
                $x = ($w - $width / $ratio) / 2;
                $w = ceil($width / $ratio);
                /* set new file name */
                $path = $img_name;

                /* Save image */
                if($_FILES['logo_image']['type']=='image/jpeg')
                {
                    /* Get binary data from image */
                    $imgString = file_get_contents($_FILES['logo_image']['tmp_name']);
                    /* create image from string */
                    $image = imagecreatefromstring($imgString);
                    $tmp = imagecreatetruecolor($width, $height);
                    imagecopyresampled($tmp, $image, 0, 0, $x, 0, $width, $height, $w, $h);
                    imagejpeg($tmp, $path, 100);
                }
                else if($_FILES['logo_image']['type']=='image/png')
                {
                    $image = imagecreatefrompng($_FILES['logo_image']['tmp_name']);
                    $tmp = imagecreatetruecolor($width,$height);
                    imagealphablending($tmp, false);
                    imagesavealpha($tmp, true);
                    imagecopyresampled($tmp, $image,0,0,$x,0,$width,$height,$w, $h);
                    imagepng($tmp, $path, 0);
                }
                else if($_FILES['logo_image']['type']=='image/gif')
                {
                    $image = imagecreatefromgif($_FILES['logo_image']['tmp_name']);

                    $tmp = imagecreatetruecolor($width,$height);
                    $transparent = imagecolorallocatealpha($tmp, 0, 0, 0, 127);
                    imagefill($tmp, 0, 0, $transparent);
                    imagealphablending($tmp, true); 

                    imagecopyresampled($tmp, $image,0,0,0,0,$width,$height,$w, $h);
                    imagegif($tmp, $path);
                }
                else
                {
                    return false;
                }

                return true;
                imagedestroy($image);
                imagedestroy($tmp);
        } 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-02-16T19:01:56.353

我创建了一个易于使用的图像调整库。它可以[在 Github](https://github.com/Oberto/php-image-magician)上找到。

如何使用该库的示例：

```
// Include PHP Image Magician library
require_once('php_image_magician.php');

// Open JPG image
$magicianObj = new imageLib('racecar.jpg');

// Resize to best fit then crop (check out the other options)
$magicianObj -> resizeImage(100, 200, 'crop');

// Save resized image as a PNG (or jpg, bmp, etc)
$magicianObj -> saveImage('racecar_small.png'); 
```

如果您需要，其他功能包括：

*   快速轻松地调整大小 - 调整为横向、纵向或自动
*   轻松收割
*   添加文字
*   质量调整
*   水印
*   阴影和反射
*   透明度支持
*   读取 EXIF 元数据
*   边框、圆角、旋转
*   滤镜和效果
*   图像锐化
*   图像类型转换
*   支持 BMP

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-13T09:45:36.893

我找到了一种数学方法来完成这项工作

Github 回购 - [https://github.com/gayanSandamal/easy-php-image-resizer](https://github.com/gayanSandamal/easy-php-image-resizer)

现场示例 - [https://plugins.nayague.com/easy-php-image-resizer/](https://plugins.nayague.com/easy-php-image-resizer/)

```
<?php
//path for the image
$source_url = '2018-04-01-1522613288.PNG';

//separate the file name and the extention
$source_url_parts = pathinfo($source_url);
$filename = $source_url_parts['filename'];
$extension = $source_url_parts['extension'];

//define the quality from 1 to 100
$quality = 10;

//detect the width and the height of original image
list($width, $height) = getimagesize($source_url);
$width;
$height;

//define any width that you want as the output. mine is 200px.
$after_width = 200;

//resize only when the original image is larger than expected with.
//this helps you to avoid from unwanted resizing.
if ($width > $after_width) {

    //get the reduced width
    $reduced_width = ($width - $after_width);
    //now convert the reduced width to a percentage and round it to 2 decimal places
    $reduced_radio = round(($reduced_width / $width) * 100, 2);

    //ALL GOOD! let's reduce the same percentage from the height and round it to 2 decimal places
    $reduced_height = round(($height / 100) * $reduced_radio, 2);
    //reduce the calculated height from the original height
    $after_height = $height - $reduced_height;

    //Now detect the file extension
    //if the file extension is 'jpg', 'jpeg', 'JPG' or 'JPEG'
    if ($extension == 'jpg' || $extension == 'jpeg' || $extension == 'JPG' || $extension == 'JPEG') {
        //then return the image as a jpeg image for the next step
        $img = imagecreatefromjpeg($source_url);
    } elseif ($extension == 'png' || $extension == 'PNG') {
        //then return the image as a png image for the next step
        $img = imagecreatefrompng($source_url);
    } else {
        //show an error message if the file extension is not available
        echo 'image extension is not supporting';
    }

    //HERE YOU GO :)
    //Let's do the resize thing
    //imagescale([returned image], [width of the resized image], [height of the resized image], [quality of the resized image]);
    $imgResized = imagescale($img, $after_width, $after_height, $quality);

    //now save the resized image with a suffix called "-resized" and with its extension. 
    imagejpeg($imgResized, $filename . '-resized.'.$extension);

    //Finally frees any memory associated with image
    //**NOTE THAT THIS WONT DELETE THE IMAGE
    imagedestroy($img);
    imagedestroy($imgResized);
}
?> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-11T05:58:14.103

这是@Ian Atkin'给出的答案的扩展版本。我发现它工作得非常好。对于更大的图像是:)。如果您不小心，您实际上可以将较小的图像放大。更改： - 支持 jpg、jpeg、png、gif、bmp 文件 - 保留 .png 和 .gif 的透明度 - 仔细检查原始大小是否已经更小 - 覆盖直接给出的图像（这是我需要的）

所以就在这里。该函数的默认值是“黄金法则”

```
function resize_image($file, $w = 1200, $h = 741, $crop = false)
   {
       try {
           $ext = pathinfo(storage_path() . $file, PATHINFO_EXTENSION);
           list($width, $height) = getimagesize($file);
           // if the image is smaller we dont resize
           if ($w > $width && $h > $height) {
               return true;
           }
           $r = $width / $height;
           if ($crop) {
               if ($width > $height) {
                   $width = ceil($width - ($width * abs($r - $w / $h)));
               } else {
                   $height = ceil($height - ($height * abs($r - $w / $h)));
               }
               $newwidth = $w;
               $newheight = $h;
           } else {
               if ($w / $h > $r) {
                   $newwidth = $h * $r;
                   $newheight = $h;
               } else {
                   $newheight = $w / $r;
                   $newwidth = $w;
               }
           }
           $dst = imagecreatetruecolor($newwidth, $newheight);

           switch ($ext) {
               case 'jpg':
               case 'jpeg':
                   $src = imagecreatefromjpeg($file);
                   break;
               case 'png':
                   $src = imagecreatefrompng($file);
                   imagecolortransparent($dst, imagecolorallocatealpha($dst, 0, 0, 0, 127));
                   imagealphablending($dst, false);
                   imagesavealpha($dst, true);
                   break;
               case 'gif':
                   $src = imagecreatefromgif($file);
                   imagecolortransparent($dst, imagecolorallocatealpha($dst, 0, 0, 0, 127));
                   imagealphablending($dst, false);
                   imagesavealpha($dst, true);
                   break;
               case 'bmp':
                   $src = imagecreatefrombmp($file);
                   break;
               default:
                   throw new Exception('Unsupported image extension found: ' . $ext);
                   break;
           }
           $result = imagecopyresampled($dst, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
           switch ($ext) {
               case 'bmp':
                   imagewbmp($dst, $file);
                   break;
               case 'gif':
                   imagegif($dst, $file);
                   break;
               case 'jpg':
               case 'jpeg':
                   imagejpeg($dst, $file);
                   break;
               case 'png':
                   imagepng($dst, $file);
                   break;
           }
           return true;
       } catch (Exception $err) {
           // LOG THE ERROR HERE 
           return false;
       }
   } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-31T15:47:31.537

采埃孚蛋糕：

```
<?php

class FkuController extends Zend_Controller_Action {

  var $image;
  var $image_type;

  public function store_uploaded_image($html_element_name, $new_img_width, $new_img_height) {

    $target_dir = APPLICATION_PATH  . "/../public/1/";
    $target_file = $target_dir . basename($_FILES[$html_element_name]["name"]);

    //$image = new SimpleImage();
    $this->load($_FILES[$html_element_name]['tmp_name']);
    $this->resize($new_img_width, $new_img_height);
    $this->save($target_file);
    return $target_file; 
    //return name of saved file in case you want to store it in you database or show confirmation message to user

  public function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
  public function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
  public function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
  public function getWidth() {

      return imagesx($this->image);
   }
  public function getHeight() {

      return imagesy($this->image);
   }
  public function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

  public function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

  public function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

  public function resize($width,$height) {
      $new_image = imagecreatetruecolor($width, $height);
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }

  public function savepicAction() {
    ini_set('display_errors', 1);
    ini_set('display_startup_errors', 1);
    error_reporting(E_ALL);

    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender();
    $this->_response->setHeader('Access-Control-Allow-Origin', '*');

    $this->db = Application_Model_Db::db_load();        
    $ouser = $_POST['ousername'];

      $fdata = 'empty';
      if (isset($_FILES['picture']) && $_FILES['picture']['size'] > 0) {
        $file_size = $_FILES['picture']['size'];
        $tmpName  = $_FILES['picture']['tmp_name'];  

        //Determine filetype
        switch ($_FILES['picture']['type']) {
            case 'image/jpeg': $ext = "jpg"; break;
            case 'image/png': $ext = "png"; break;
            case 'image/jpg': $ext = "jpg"; break;
            case 'image/bmp': $ext = "bmp"; break;
            case 'image/gif': $ext = "gif"; break;
            default: $ext = ''; break;
        }

        if($ext) {
          //if($file_size<400000) {  
            $img = $this->store_uploaded_image('picture', 90,82);
            //$fp      = fopen($tmpName, 'r');
            $fp = fopen($img, 'r');
            $fdata = fread($fp, filesize($tmpName));        
            $fdata = base64_encode($fdata);
            fclose($fp);

          //}
        }

      }

      if($fdata=='empty'){

      }
      else {
        $this->db->update('users', 
          array(
            'picture' => $fdata,             
          ), 
          array('username=?' => $ouser ));        
      }

  } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-10T20:49:53.180

```
private function getTempImage($url, $tempName){
  $tempPath = 'tempFilePath' . $tempName . '.png';
  $source_image = imagecreatefrompng($url); // check type depending on your necessities.
  $source_imagex = imagesx($source_image);
  $source_imagey = imagesy($source_image);
  $dest_imagex = 861; // My default value
  $dest_imagey = 96;  // My default value

  $dest_image = imagecreatetruecolor($dest_imagex, $dest_imagey);

  imagecopyresampled($dest_image, $source_image, 0, 0, 0, 0, $dest_imagex, $dest_imagey, $source_imagex, $source_imagey);

  imagejpeg($dest_image, $tempPath, 100);

  return $tempPath; 
```

}

这是基于[这个](https://blogs.oracle.com/oswald/scaling-images-in-php-done-right)很好的解释的改编解决方案。这家伙一步一步解释。希望大家喜欢。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-07T11:07:45.990

我建议一个简单的方法：

```
function resize($file, $width, $height) {
    switch(pathinfo($file)['extension']) {
        case "png": return imagepng(imagescale(imagecreatefrompng($file), $width, $height), $file);
        case "gif": return imagegif(imagescale(imagecreatefromgif($file), $width, $height), $file);
        default : return imagejpeg(imagescale(imagecreatefromjpeg($file), $width, $height), $file);
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-07T13:19:03.253

你可以试试 TinyPNG PHP 库。使用此库，您的图像会在调整大小过程中自动优化。您只需要安装库并从[https://tinypng.com/developers](https://tinypng.com/developers)获取 API 密钥。要安装库，请运行以下命令。

```
composer require tinify/tinify 
```

之后，您的代码如下。

```
require_once("vendor/autoload.php");

\Tinify\setKey("YOUR_API_KEY");

$source = \Tinify\fromFile("large.jpg"); //image to be resize
$resized = $source->resize(array(
    "method" => "fit",
    "width" => 150,
    "height" => 100
));
$resized->toFile("thumbnail.jpg"); //resized image 
```

我写了一篇关于同一主题的博客[http://artisansweb.net/resize-image-php-using-tinypng](http://artisansweb.net/resize-image-php-using-tinypng)

# ruby-on-rails - Scala（任何框架）中是否有 CRUD 生成器实用程序，例如 Rails 中的脚手架？

> ID：14649648
> 
> 赞同：3
> 
> 时间：2013-02-01T15:31:18.893
> 
> 标签：ruby-on-rails, scala, crud, scaffolding

请参阅：[Java（任何框架）中是否有 CRUD 生成器实用程序，例如 Rails 中的脚手架？](https://stackoverflow.com/questions/414583/is-there-a-crud-generator-utility-in-javaany-framework-like-scaffolding-in-rai)

我有同样的问题，但关于 Scala。我知道 Play framework 1.x 有生成器，但 2.x 删除了它们，是否有任何基于 Scala 的 Web 框架的工作 CRUD / Scaffolding 生成器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-26T15:08:40.397

我也在寻找一个脚手架工具（它弹出了你的问题）并找到了这个：[http ://skinny-framework.org/documentation/scaffolding.html](http://skinny-framework.org/documentation/scaffolding.html)

我**还没有**尝试过，但是文档看起来可以完成这项工作：

`./skinny g model tweet userId:Long text:String user:Option[User]` 将创建

```
package model

import skinny.orm._, feature._
import scalikejdbc._
import org.joda.time._

// If your model has +23 fields, switch this to normal class and mixin scalikejdbc.EntityEquality.
case class Tweet(
  id: Long,
  userId: Long,
  text: String,
  user: Option[User] = None,
  createdAt: DateTime,
  updatedAt: DateTime
)

object Tweet extends SkinnyCRUDMapper[Tweet] with TimestampsFeature[Tweet] {

  override lazy val defaultAlias = createAlias("t")

  lazy val userRef = belongsTo[User](User, (t, u) => t.copy(user = u))

  /*
   * If you're familiar with ScalikeJDBC/Skinny ORM, using #autoConstruct makes your mapper simpler.
   * (e.g.)
   * override def extract(rs: WrappedResultSet, rn: ResultName[Tweet]) = autoConstruct(rs, rn)
   *
   * Be aware of excluding associations like this:
   * (e.g.)
   * case class Member(id: Long, companyId: Long, company: Option[Company] = None)
   * object Member extends SkinnyCRUDMapper[Member] {
   *   override def extract(rs: WrappedResultSet, rn: ResultName[Member]) =
   *     autoConstruct(rs, rn, "company") // "company" will be skipped
   * }
   */
  override def extract(rs: WrappedResultSet, rn: ResultName[Tweet]): Tweet = new Tweet(
    id = rs.get(rn.id),
    userId = rs.get(rn.userId),
    text = rs.get(rn.text),
    createdAt = rs.get(rn.createdAt),
    updatedAt = rs.get(rn.updatedAt)
  )
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T04:56:29.720

Copying the answer from the comments in order to remove this question from the "Unanswered" filter:

> No, was some talk on the play user group about this, nothing planned. Twitter Bootstrap + DAO implementation + RESTful routing is your best bet; i.e. roll your own.
> 
> ...
> 
> Check the docs on integrating TB [Twitter Bootstrap], pretty awesome, gives you a great headstart, CRUD with Play is fairly easy.

~ answer per [virtualeyes](https://stackoverflow.com/users/185840/virtualeyes)

# oracle - 从存储过程中检索出参数？

> ID：14649657
> 
> 赞同：14
> 
> 时间：2013-02-01T15:31:32.543
> 
> 标签：oracle, plsql

我 在 oracle中创建了一个**存储过程：**

```
PROCEDURE string_opp(input_string IN varchar2,output_string OUT varchar2) 
```

现在的问题是如何执行这个存储过程并检索输出参数。我在 sql developer 中遵循了：

```
SET SERVEROUTPUT ON
DECLARE
  outputString VARCHAR;
BEGIN
  EXEC string_opp('input String',:outputString);
END; 
```

当我尝试这个时，我没有得到任何东西，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:37:18.820

只是几个问题：

```
SET SERVEROUTPUT ON
DECLARE
   outputString VARCHAR(20);
BEGIN
  string_opp('input String', outputString);
  dbms_output.put_line(outputString);
END; 
```

您可以使用相同的变量：

```
SET SERVEROUTPUT ON
DECLARE
   outputString VARCHAR(20);
BEGIN
  outputString := 'input String';
  string_opp(outputString);
  dbms_output.put_line(outputString);
END; 
```

只需将您的过程参数定义为 IN OUT 而不是 OUT。

检查此资源：

[http://psoug.org/snippet/FUNCTIONS-IN-OUT-parameter_873.htm](http://psoug.org/snippet/FUNCTIONS-IN-OUT-parameter_873.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:22:34.123

让我们说：

如果您有带有输出参数的存储过程：

```
Create procedure test(name out varchar2(50))
as
begin
name:='testing output parameter';
-- dbms_output.put_line('Output parameter value ' || name );
end; 
```

现在执行上述程序：

```
declare
l_name varchar2(50);
begin
test(l_name);
dbms_output.put_line( 'name = ' || l_ename );
end; 
```

# c - int 和 char 指针如何影响我的打印输出？

> ID：14649660
> 
> 赞同：0
> 
> 时间：2013-02-01T15:31:38.623
> 
> 标签：c, pointers

所以这是代码，直到第 4 次打印出来我很容易遵循它，但是在第 5 次打印出来时，我不明白

为什么`"5: a[0] = 200, a[1] = 128144, a[2] = 256, a[3] = 302 "`？

我已经注释了代码中我不理解的行。我期待着您的回复。

```
"#include <stdio.h>
#include <stdlib.h>

void
f(void)
{
    int a[4];
    int *b = malloc(16);
    int *c = 0;
    int i;

    printf("1: a = %p, b = %p, c = %p\n", a, b, c);

    c = a;
    for (i = 0; i < 4; i++)
    a[i] = 100 + i;

    c[0] = 200;
    printf("2: a[0] = %d, a[1] = %d, a[2] = %d, a[3] = %d\n",
       a[0], a[1], a[2], a[3]);

    c[1] = 300;
    *(c + 2) = 301;

    3[c] = 302;
    printf("3: a[0] = %d, a[1] = %d, a[2] = %d, a[3] = %d\n",
       a[0], a[1], a[2], a[3]);

    c = c + 1;
    *c = 400;

    printf("4: a[0] = %d, a[1] = %d, a[2] = %d, a[3] = %d\n",
       a[0], a[1], a[2], a[3]);

    //I DONT UNDERSTAND WHAT THIS LINE BELOW DOES
    c = (int *) ((char *) c + 1);

    *c = 500;
    printf("5: a[0] = %d, a[1] = %d, a[2] = %d, a[3] = %d\n",
       a[0], a[1], a[2], a[3]);

    b = (int *) a + 1;
    c = (int *) ((char *) a + 1);
    printf("6: a = %p, b = %p, c = %p\n", a, b, c);
}

int
main(int ac, char **av)
{
    f();
    return 0;
}

output:
1: a = 0x7fff65fdcb90, b = 0x1065007e0, c = 0x0
2: a[0] = 200, a[1] = 101, a[2] = 102, a[3] = 103
3: a[0] = 200, a[1] = 300, a[2] = 301, a[3] = 302
4: a[0] = 200, a[1] = 400, a[2] = 301, a[3] = 302
5: a[0] = 200, a[1] = 128144, a[2] = 256, a[3] = 302
6: a = 0x7fff65fdcb90, b = 0x7fff65fdcb94, c = 0x7fff65fdcb91 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:43:26.303

让我们从基础开始。

`c`是指向 s 数组的指针`int`。

让它成为`a`：

```
[00000000][00000000][00000000][00000000] 
```

每两位数字是一个字节，我们假设`sizeof(int)`在我们的示例中是 4，​​因此其中的每个元素`a`都有 4 个字节，即 8 位数字。

现在，`c`是指向 中第一个元素的指针`a`。

让我们看一下有问题的表达式：

```
c = (int *) ((char *) c + 1); 
```

显然，`c`这里发生了变化，但究竟发生了什么：

1.  `c`从`int*`到`char*`
2.  强制转换的结果递增，结果`sizeof(char)`被添加到`c`. 因为`sizeof(char)`is `1`,`c`增加 1 并指向 中元素的**第二个字节**`a`。
3.  结果被转换回`int*`，并重新分配给`c`。实际上不需要第二次演员表。

所以，忽略所有其他代码，我们从这里开始：

```
a : [00000000][00000000]...
     ^
  c -| 
```

去这个：

```
a : [00000000][00000000]...
       ^
  c ---| 
```

正如丹尼尔在下面指出的那样，如果 c 没有正确对齐 type 的指针`int*`，则会出现**未定义的行为**，应该避免这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:39:01.283

`c`是一个指向 int 的指针，所以通常`c+1`指的是`sizeof(int)`在内存中更远的地址——在 32 位系统上通常是 4 个字节。

但是您`c`转换为`char*`- 即指向字符的指针。现在，`char`只有 1 个字节长，所以`(char *)c + 1`指的是比;更远*1 个字节的内存位置。*`c`它位于at*的中间*。`int``c`

然后将结果转换回 a`int*`并将 500 写入其中。所以你正在做的是（可能）在最后 3 个`a[1]`字节和`a[2]`. 究竟会产生什么影响取决于系统的字节顺序，但这基本上就是正在发生的事情。

# ios - 将 Objective-C 块定义为属性 - 最佳实践

> ID：14649661
> 
> 赞同：16
> 
> 时间：2013-02-01T15:31:40.313
> 
> 标签：ios, objective-c, automatic-ref-counting, objective-c-blocks

我最近遇到了一份[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html)，其中显示了以下块的属性声明：

```
@interface XYZObject : NSObject
@property (copy) void (^blockProperty)(void);
@end 
```

此外，这篇文章指出：

> 注意：您应该将 copy 指定为 property 属性，因为需要复制块以跟踪其在原始范围之外捕获的状态。这不是您在使用自动引用计数时需要担心的事情，因为它会自动发生，但最好让 property 属性显示结果行为。有关更多信息，请参阅块编程主题。

我还阅读了建议的[Blocks Programming Topics](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Blocks/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40007502)，但没有找到任何相关的内容。

我仍然很好奇为什么将块属性定义为“副本”是最佳实践。如果您有一个好的答案，请尝试区分 ARC 和 MRC 差异（如果有）。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-01T16:10:15.753

默认情况下，块是在堆栈上创建的。这意味着它们只存在于它们被创建的范围内。

如果您想稍后访问它们，则必须通过向`copy`块对象发送消息来将它们复制到堆中。一旦 ARC 检测到一个块需要在其创建的范围之外访问，它就会为您执行此操作。作为最佳实践，您将任何块属性声明为副本，因为这是它应该在自动内存管理下的方式。

阅读Mike Ash 的[Objective-C 中的堆栈和堆对象，了解有关堆栈与堆的更多信息。](http://www.mikeash.com/pyblog/friday-qa-2010-01-15-stack-and-heap-objects-in-objective-c.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T16:11:54.490

默认情况下，块在堆栈上分配。这是一种优化，因为堆栈分配比堆分配便宜得多。堆栈分配意味着，默认情况下，当声明它的范围退出时，块将不再存在。因此，具有`retain`语义的块属性将导致指向不再存在的块的悬空指针。

要将块从堆栈移动到堆（从而赋予其正常的 Objective-C 内存管理语义和延长的生命周期），您必须通过`[theBlock copy]`、`Block_copy(theBlock)`等复制块。一旦在堆上，块的生命周期可以管理为需要保留/释放它。（是的，这也适用于 ARC，您不必自己打电话。`-retain`）`-release`

因此，您希望使用`copy`语义声明块属性，以便在设置属性时复制块，避免指向基于堆栈的块的悬空指针。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-01T16:27:37.793

您所指的“最佳实践”只是简单地说，“因为无论您在这里写什么，ARC 都会神奇地复制您的块，最好您明确地写出‘复制’，以免让后代在查看您的代码时感到困惑。”

解释如下：

> 通常，您不需要复制（或保留）块。仅当您希望在声明它的范围内销毁块后使用该块时，您才需要制作一份副本。复制将块移动到堆中。
> *–Blocks 编程主题：使用 Blocks，复制 Blocks*

显然，将块分配给属性意味着它可以在声明它的范围被破坏后使用。因此，根据*Blocks Programming Topics*应该将块复制到堆中`Block_copy`。

但是 ARC 会为您解决这个问题：

> 当您在 ARC 模式下将块向上传递到堆栈时，块“正常工作”，例如在返回中。您不必再调用 Block Copy。
> *–<a href="https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html" rel="noreferrer">过渡到 ARC*

请注意，这与块的语义*无关。*`retain`如果不将块的上下文移出（即将弹出的）堆栈并移至堆，则根本无法存在块的上下文。所以不管你有什么属性`@property`，ARC仍然会复制这个块。

# regex - SED 仅修改文件中的子匹配项

> ID：14649662
> 
> 赞同：0
> 
> 时间：2013-02-01T15:31:44.710
> 
> 标签：regex, sed

我有这个：

```
sed -i "s/PID:\([0-9]*\)/PID:${$}/" "${ARCHIVO_INFO_SESION}" 
```

`PID:`这将修改单词后保存在文本文件中的PID 。

我的问题是，是否可以仅引用之间的子匹配，`( )`而不必在替换部分中再次写入`PID:`，例如：

```
sed -i "s/PID:\([0-9]*\)/\1${$}/" "${ARCHIVO_INFO_SESION}" 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:36:38.617

尝试

```
sed "s/\(PID:\)[0-9]*/\1${$}/" "${ARCHIVO_INFO_SESION}" 
```

希望这可以帮助，

# java - ZeroMQ：在线程“Timer-0”org.zeromq.ZMQException 中获取异常：重试时无法在当前状态（0x9523dfb）中完成操作

> ID：14649666
> 
> 赞同：0
> 
> 时间：2013-02-01T15:32:07.260
> 
> 标签：java, zeromq

我有这个场景：客户端尝试发送到服务器，但服务器处于脱机状态。socket.send(request, 0); 在 java Timer 线程内部：

这是 ZMQ.Socket m_socket 在线程外启动的线程 run()

```
public void run() {

  m_socket.send(request, 0);
 byte[] reply = m_socket.recv(0);
 //get seperator
 byte[] empty1 = m_socket.recv(0);
 //get secound frame
  byte[] byteFileStruct = m_socket.recv(0);  
  if(null!=reply)  // this is indication that the server is offline , is there better way to check ? 
  {
    ......
  }

} 
```

现在 Timer 再次触发 run() 方法，当它执行 m_socket.send(request, 0); 在第二轮我得到：

```
Exception in thread "Timer-0" org.zeromq.ZMQException: Operation cannot be accomplished in current state(0x9523dfb)
    at org.zeromq.ZMQ$Socket.send(Native Method)
    at com.agent.core.Poller$PollarWorker.run(Poller.java:155)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source) 
```

我需要每轮创建新的套接字吗？就是这样：

```
 m_context = ZMQ.context(1);
        m_socket = m_context.socket(ZMQ.REQ);
        m_socket.setReceiveTimeOut(2000);
        m_socket.setSendTimeOut(2000);
        m_socket.connect (sControllerDomain); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:56:52.417

从代码中不清楚，但看起来您正在一个线程上创建套接字，并在另一个线程上使用它。

ZeroMQ 套接字**必须**在创建它的线程上使用。另一方面，一个 ZeroMQ 上下文对于应用程序来说**通常**就足够了。

在消息循环中使用 ZeroMQ 套接字要方便得多：套接字在循环之前创建并在循环之后立即销毁。真的，不需要计时器/监视器等，ZeroMQ 本身提供同步原语。

我建议查看 ZeroMQ 指南中的这些章节：

> [ØMQ的多线程](http://zguide.zeromq.org/page:all#toc45 "ØMQ的多线程")
> 
> [第 3 章 - 高级请求-回复模式](http://zguide.zeromq.org/page:all#toc52 "第 3 章 - 高级请求-回复模式")

# php - 电子邮件发送服务

> ID：14649671
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:32:35.907
> 
> 标签：php, html-email, email

我想使用电子邮件服务从我的 CMS 发送电子邮件。

我有电子邮件地址的 php 数组，我想将带有主题和消息的数组发布到电子邮件服务，它会向所有人发送电子邮件。

有时我只会发送一封电子邮件（用户注册）。也应该可以提供一个 html 时事通讯。

那么，该使用哪种服务呢？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:36:13.777

我会推荐[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)或[Swift Mailer](http://swiftmailer.org/)。[PHP mail()](http://php.net/manual/en/function.mail.php)函数也是一个选项。

# sql - 使用串行主键列安全地重命名表

> ID：14649682
> 
> 赞同：20
> 
> 时间：2013-02-01T15:33:05.003
> 
> 标签：sql, postgresql, database-design, ddl

我知道使用`SERIAL`主键的 PostgreSQL 表最终会由 PostgreSQL 创建一个隐式索引、序列和约束。问题是在重命名表时如何重命名这些隐式对象。下面是我试图通过最后的具体问题来解决这个问题。

给定一个表格，例如：

```
CREATE TABLE foo (
    pkey SERIAL PRIMARY KEY,
    value INTEGER
); 
```

Postgres 输出：

> 注意：CREATE TABLE 将为串行列“foo.pkey”创建隐式序列“foo_pkey_seq”
> 注意：CREATE TABLE / PRIMARY KEY 将为表“foo”创建隐式索引“foo_pkey”
> 查询成功返回，52 毫秒内没有结果。

pgAdmin III SQL 窗格显示了表的以下 DDL 脚本（整理后）：

```
CREATE TABLE foo (
  pkey serial NOT NULL,
  value integer,
  CONSTRAINT foo_pkey PRIMARY KEY (pkey )
);
ALTER TABLE foo OWNER TO postgres; 
```

**现在重命名表：**

```
ALTER table foo RENAME TO bar; 
```

> 查询成功返回，17 毫秒内没有结果。

pgAdmin 三：

```
CREATE TABLE bar (
  pkey integer NOT NULL DEFAULT nextval('foo_pkey_seq'::regclass),
  value integer,
  CONSTRAINT foo_pkey PRIMARY KEY (pkey )
);
ALTER TABLE bar OWNER TO postgres; 
```

请注意， **`DEFAULT nextval('foo_pkey_seq'::regclass),`**这意味着重命名表不会重命名主键的序列，但现在我们有了这个明确`nextval()`的 .

**现在重命名序列：**

我想保持数据库命名一致，所以我尝试了：

```
ALTER SEQUENCE foo_pkey_seq RENAME TO bar_pkey_seq; 
```

> 查询成功返回，17 毫秒内没有结果。

pgAdmin 三：

```
CREATE TABLE bar (
  pkey serial NOT NULL,
  value integer,
  CONSTRAINT foo_pkey PRIMARY KEY (pkey )
);
ALTER TABLE bar OWNER TO postgres; 
```

没了**`DEFAULT nextval('foo_pkey_seq'::regclass),`**。

### 问题

1.  为什么`DEFAULT nextval('foo_pkey_seq'::regclass)`语句出现又消失？
2.  有没有办法重命名表并同时重命名主键序列？
3.  在客户端连接到数据库时重命名表然后排序是否安全，是否存在任何并发问题？
4.  postgres 如何知道使用哪个序列？内部是否使用了数据库触发器？除了表格和序列之外，还有什么要重命名的吗？
5.  主键创建的隐式索引呢？应该改名吗？如果是这样，那该怎么做？
6.  上面的约束名称呢？它仍然是`foo_pkey`。约束如何重命名？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-01T17:29:03.013

`serial`不是实际的数据类型。[手册指出](https://www.postgresql.org/docs/current/datatype-numeric.html#DATATYPE-SERIAL)：

> 数据类型`smallserial`和不是真正的类型，而仅仅是创建唯一标识符列的符号`serial`方便`bigserial`

伪数据类型被解析为所有这些：

*   创建一个名为的序列`tablename_colname_seq`

*   创建具有类型的列`integer`（或`int2`/`int8`分别用于`smallserial`/ `bigserial`）

*   做专栏`NOT NULL DEFAULT nextval('tablename_colname_seq')`

*   使列拥有序列，以便自动删除它

系统不*知道*您是手动还是通过伪数据类型完成了所有这些操作`serial`。pgAdmin 检查列出的功能，如果所有功能都满足，则反向工程 DDL 脚本将使用匹配`serial`类型进行简化。如果不满足其中一个特征，则不会发生这种简化。这就是 pgAdmin 所做的事情。对于基础目录表，它都是一样的。没有`serial`这样的类型。

无法自动重命名拥有的序列。你可以运行：

```
ALTER SEQUENCE ... RENAME TO ... 
```

像你一样。系统本身并不关心*名称*。该列`DEFAULT`存储一个[`OID`](https://www.postgresql.org/docs/current/datatype-oid.html)( `'foo_pkey_seq'::regclass`)，您可以更改序列的名称而不会破坏它 - OID 保持不变。数据库内的外键和类似引用也是如此。

主键的隐式索引与PK约束的名称绑定，如果更改表名，该名称*不会改变。*[在 Postgres 9.2 或更高版本中，您可以使用](https://www.postgresql.org/docs/current/sql-altertable.html)

```
ALTER TABLE ... RENAME CONSTRAINT .. 
```

纠正这一点。

还可以有参考表名命名的索引。[类似的程序](https://www.postgresql.org/docs/current/sql-alterindex.html)：

```
ALTER INDEX .. RENAME TO  .. 
```

您可以对表名进行各种非正式引用。系统无法强制重命名可以命名的对象。它不在乎。

当然，您不想使引用这些名称的 SQL 代码无效。显然，您不想在应用程序逻辑引用它们时更改名称。通常这对于索引、序列或约束的名称不会有问题，因为它们通常不会被名称引用。

Postgres 在重命名对象之前也会获取对象的锁定。因此，如果有打开的**并发事务**对相关对象具有任何类型的锁定，则您的`RENAME`操作将停止，直到这些事务提交或回滚。

### 系统目录和 OID

数据库模式存储在系统模式的系统目录表中`pg_catalog`。[手册中的所有详细信息都在这里。](https://www.postgresql.org/docs/current/catalogs.html)如果您不确切知道自己在做什么，**则根本不应该弄乱这些表**。一个错误的举动，你可以打破你的数据库。[使用 Postgres 提供的 DDL 命令。](https://www.postgresql.org/docs/current/sql-commands.html)

对于一些最重要的表，Postgres 提供[对象标识符类型](https://www.postgresql.org/docs/current/datatype-oid.html)和类型转换来快速获取 OID 的名称，反之亦然。喜欢：

```
SELECT 'foo_pkey_seq'::regclass 
```

如果架构名称在 中`search_path`并且表名称是唯一的，那么您将获得相同的结果：

```
SELECT oid FROM pg_class WHERE relname = 'foo_pkey_seq'; 
```

大多数目录表的主键是`oid`并且在内部，大多数引用使用 OID。

# sql-server - 检查 sp_send_dbmail 是否成功

> ID：14649685
> 
> 赞同：37
> 
> 时间：2013-02-01T15:33:20.570
> 
> 标签：sql-server, tsql

我正在寻找一种方法来检查排队使用的特定电子邮件`sp_send_dbmail`是否最终从我们的 Exchange 服务器成功发送。我查看了系统表`msdb.dbo.sysmail_mailitems`和`msdb.dbo.sysmail_log`. `msdb.dbo.sysmail_log`似乎两者中更有帮助；具体来说，它的`description`专栏。从我到目前为止进行的测试来看，似乎每当发生错误时，`description`列中都会出现以下格式的消息：

> 由于邮件服务器故障，无法将邮件发送给收件人。（使用帐户 3 (2012-11-01T11:28:04) 发送邮件。异常消息：无法将邮件发送到邮件服务器。（邮箱不可用。服务器响应为：5.7.1 无法为 thisemail@email.com 中继） . )

这包含在共享相同的其他行中`process_id`。随附记录的描述是

> DatabaseMail 进程已启动

和

> DatabaseMail 进程正在关闭

如果成功发送电子邮件，则表中记录相同的 2 行，但它们之间没有封闭的行。

因此，如果我发送成功，表格中会出现以下内容

![在此处输入图像描述](../Images/8adeb3c9d489be2dd8584ae62ef29af8.png)

如果我发送失败，日志会记录这个

![在此处输入图像描述](../Images/df32ed4463eb10ace5945dd3433fc614.png)

如果发送失败或发送成功，是否还有其他记录条目的实例？例如，是否有可能有 4 行用于发送的条目（2 行说明它何时启动和何时关闭，2 行说明电子邮件已成功发送）。我没有发现任何与上面列出的模式不同的日志记录，但在我根据这个假设编写逻辑之前想确定一下。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-09-26T21:45:56.730

`sysmail_faileditems`只会为您提供失败的电子邮件列表。如果您需要查看您需要使用的成功电子邮件列表`sysmail_mailitems`。

使用以下查询获取同一日期发送的所有电子邮件的详细信息：

```
SELECT * FROM msdb..sysmail_mailitems WHERE sent_date > DATEADD(DAY, -1,GETDATE()) 
```

这是获取过去 24 小时内所有失败电子邮件的完整查询：

```
SELECT items.subject ,
       items.recipients ,
       items.copy_recipients ,
       items.blind_copy_recipients ,
       items.last_mod_date ,
       l.description
FROM   msdb.dbo.sysmail_faileditems AS items
       LEFT OUTER JOIN msdb.dbo.sysmail_event_log AS l 
                    ON items.mailitem_id = l.mailitem_id
WHERE  items.last_mod_date > DATEADD(DAY, -1,GETDATE()) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T18:38:52.663

这个来自 Microsoft 的链接似乎很有用 - [How to: Check the Status of E-Mail Messages Sent With Database Mail (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms191278%28v=sql.105%29.aspx)。另请参阅有关数据库邮件日志记录和审计、数据库邮件故障排除的相关主题。

# algorithm - 旧 Word 文件格式 *.doc，MS 在其旧文档格式中使用了哪种压缩算法？

> ID：14649686
> 
> 赞同：1
> 
> 时间：2013-02-01T15:33:21.490
> 
> 标签：algorithm, serialization, ms-word, ms-office, data-compression

我的工作中有任务。用证书签署一些 *.doc 文件，因为工作流程与银行账户接近，所以我们需要签署文件。

有关客户/银行/他们的联系人等的一些信息包含在表中的 *.doc 文件中。

众所周知，新的 Word 格式使用 OpenXML，不使用二进制序列化，但不是旧的。

在这个项目中选择了 *.doc 格式，因为在俄罗斯（仍然是现在），并非不同城市的所有办公室（不是主要的）都使用旧的 Microsoft Office，那里不支持 *.docx 文字格式。

所以，这就是我们不使用 *.docx 的原因

问题是关于这种格式的二进制序列化/压缩算法的方法。由于法律规则，我需要了解确切的算法。

在俄罗斯，ISO 标准等产品有一种内部格式，其名称为 GOST (ГОСТ)，有些算法是允许的，有些是不允许的。

如果我们使用不允许用于银行文件交换的算法，我们可能会受到一些罚款，因为法律不仅允许将其用于商业目的。您可以在开发过程中使用它或用于个人使用，但不能用于商业。

这就是为什么我要询问在旧 Word 文档文件格式 *.doc 中使用的二进制序列化/压缩算法的确切方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:37:31.973

答案可能在[本文档](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=2&cad=rja&ved=0CEEQFjAB&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F0%2Fb%2Fe%2F0be8bdd7-e5e8-422a-abfd-4342ed7ad886%2Fword97-2007binaryfileformat%28doc%29specification.pdf&ei=AuELUc6mG4uL0QGj6oCwCw&usg=AFQjCNH-sNCWRkTjsIU_FsSWDNObQGiUTA&sig2=EmcnVvEaTXMsktiAR7shGw&bvm=bv.41867550,d.dmQ)中- 在 Google 中作为搜索词的第二次点击找到`Word file format specification`

# javascript - 尝试在调用 AJAX 函数时显示加载图像——在 Firefox 中效果很好

> ID：14649687
> 
> 赞同：0
> 
> 时间：2013-02-01T15:33:23.660
> 
> 标签：javascript, ajax, cross-browser, loading

我有这个代码

```
<script>
$(document).ready(function () {
    $('#loading').hide().ajaxStart(function() {
            $(this).show();
         }).ajaxStop(function() {
            $(this).hide();
        });
});
</script> 
```

当我最初执行正在进行 AJAX 调用的操作时，加载图像会显示并开始旋转，但在该 AJAX 调用中，我会调用多个其他 AJAX 调用，并且加载图像会根据浏览器表现出不同的行为。

**Firefox** = 按预期工作。当我执行执行 AJAX 的操作时，它会显示加载图像，直到 AJAX 调用完成。

**Google Chrome** = 开始工作，加载图像加载，但一旦执行其他 AJAX 调用（从初始调用开始，在成功阶段），加载图像冻结并且不再动画。

**IE9 / Safari** = 根本不渲染加载图像。

我希望其他浏览器像 Firefox 一样工作。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:25:45.177

所以是的，问题肯定出在 async 上：false，谢谢大家。

# ios - 石英 2D 绘图崩溃

> ID：14649690
> 
> 赞同：0
> 
> 时间：2013-02-01T15:33:28.317
> 
> 标签：ios, objective-c, core-graphics, quartz-2d

我不知道为什么它停止工作，但是当我尝试绘制它的任何部分时，这段代码正在使我的设备崩溃。我是核心图形的新手，所以任何指针或建议都会有很大帮助。谢谢！

```
// Style
CGContextRef context = UIGraphicsGetCurrentContext();

// Colors
CGColorRef fillBox = [UIColor colorWithRed:250.0/255.0 green:250.0/255.0 blue:250.0/255.0 alpha:1.0].CGColor;
CGColorRef fillBoxShadow = [UIColor colorWithRed:77.0/255.0 green:77.0/255.0 blue:77.0/255.0 alpha:1.0].CGColor;

CGRect box = CGRectMake(5, 5, self.frame.size.width - 10, self.frame.size.height - 10);
// Shadow
CGContextSetShadowWithColor(context, CGSizeMake(0, 0), 1.0, fillBoxShadow);
CGContextAddRect(context, box);
CGContextFillPath(context);
// Box
CGContextSetFillColorWithColor(context, fillBox);
CGContextAddRect(context, box);

CGContextFillPath(context); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:37:34.027

如果您的项目使用 ARC，那么这两行可能是您的问题的一部分：

```
CGColorRef fillBox = [UIColor colorWithRed:250.0/255.0 green:250.0/255.0 blue:250.0/255.0 alpha:1.0].CGColor;
CGColorRef fillBoxShadow = [UIColor colorWithRed:77.0/255.0 green:77.0/255.0 blue:77.0/255.0 alpha:1.0].CGColor; 
```

ARC 正在释放 UIColor 对象，从而释放 CGColorRef。您需要保留 CGColorRef，然后在完成后释放它。

我会写这样的代码：

```
UIColor *fillBox = [UIColor colorWithRed:250.0/255.0 green:250.0/255.0 blue:250.0/255.0 alpha:1.0];
UIColor *fillBoxShadow = [UIColor colorWithRed:77.0/255.0 green:77.0/255.0 blue:77.0/255.0 alpha:1.0]; 
```

然后稍后在该方法中使用 fillBox.CGColor 和 fillBoxShadow.CGColor 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:37:30.083

而不是做

```
CGContextAddRect(context, box);
CGContextFillPath(context); 
```

尝试使用`CGContextFillRect`.

您无法填充未事先添加到上下文中的路径。

注意：你可以做

```
CGContextAddPath(context, [UIBezierPath pathWithRect:box].CGPath);
CGContextFillPath(context); 
```

但这与仅仅填充一个矩形相比有点过分了。

（不确定`pathWithRect:`语法，但它存在。）

# openssl - 证书中的 OpenSSL 错误

> ID：14649692
> 
> 赞同：0
> 
> 时间：2013-02-01T15:33:37.823
> 
> 标签：openssl, certificate

我尝试按照以下方法使用 openssl 创建客户端/服务器 SSL： [http ://www.asafety.fr/projects-and-tools/c-client-serveur-ssl-tls-multiplateformes-avec-openssl/](http://www.asafety.fr/projects-and-tools/c-client-serveur-ssl-tls-multiplateformes-avec-openssl/)

我在服务器上获得：

```
[+] Use TLSv1 method.
[*] Server's certificat and private key loaded from file.
[+] Server's private key match public certificat !
[+] Server listening on the 1337 port...
[+] Connection [127.0.0.1:60237]
[+] Cipher used : AES256-SHA
[-] No client's certificates
[+] Client data received : ClientName 
```

在客户端：

```
[+] Use TLSv1 method.
[+] Cipher used : AES256-SHA
[+] Server certificates :
        Subject: /C=AU/ST=Some-State/O=Internet Widgits Pty Ltd
        Issuer: /C=AU/ST=Some-State/O=Internet Widgits Pty Ltd
[-] Server certificates X509 is not trust...
[+] Server data received : Enchante ClientName, je suis ServerName. 
```

你知道为什么我会收到这些消息：

“没有客户的证书”

“服务器证书 X509 不受信任...”

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:34:39.327

“没有客户的证书”意味着客户代码不共享客户的证书。客户端身份验证很少在客户端和使用 SSL/TLS 的服务器之间实现；这不是强制性的。

“服务器证书 X509 不受信任...”表示客户端收到的服务器证书未使用证书颁发机构签名。您的计算机不知道整个可信证书服务器链，但它不是致命的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:48:39.540

“没有客户的证书”

您在代码中看到任何客户端证书吗？

“服务器证书 X509 不受信任...”

OpenSSL 版本？您尝试加载的证书是什么？

# gmail - 我想从 gmail 帐户检索已发送的邮件。我能够检索收件箱邮件，但不能检索已发送的邮件

> ID：14649695
> 
> 赞同：0
> 
> 时间：2013-02-01T15:33:47.073
> 
> 标签：gmail, imap, jakarta-mail

我试过这段代码

```
Folder[] folderList = store.getDefaultFolder().list();
    for (int i = 0; i < folderList.length; i++) {
        System.out.println(folderList[i].getFullName());
    } 
```

在我的 gmail 文件夹中查找文件夹。它刚刚显示：

```
INBOX
[Gmail] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:50:23.253

“[Gmail]”是一个包含其他文件夹的文件夹，您需要继续向下文件夹层次结构。或使用 list("*") 一次获取所有内容，但请注意这可能很昂贵。我相信您要查找的文件夹是“[Gmail]/Sent”。

# c# - 使用 Method=POST 重定向到 Uri 并从 ASP.NET MVC 控制器操作结果提交表单数据

> ID：14649697
> 
> 赞同：1
> 
> 时间：2013-02-01T15:33:49.290
> 
> 标签：c#, asp.net, asp.net-mvc, redirect

我有一个表单，我需要用户在我的网站上提交，该表单将发布到我的控制器。`action="~/Home/FormCapture/"`表单动作在控制器动作中看起来像这样我将执行一些验证规则。

我目前正在做的工作是执行我的验证，并返回一个 HTML 视图，该视图由完全相同的表单和不同的表单组成`action="https://otherServer/cgi?-submit"`，填写用户提交的数据，以及在页面加载时提交表单的 javascript .

虽然上述方法确实有效，但我想避免返回加载时提交的表单的中间步骤，我似乎无法让它工作，但我想我想做类似的事情

```
return Redirect("https://otherServer/cgi?-submit", 
           FormMethods.Post, "value1=abc&val2=123"); 
```

注意：虽然这可能看起来像捕获系统的网络钓鱼/驱动器（因为它是），但我被一些不允许我共享身份验证 cookie/令牌的黑盒网络发布技术所困扰。我的app中有一些资源需要黑匣子系统的用户访问，所以我需要从我的站点登录两个站点，所以当黑匣子系统链接到我的app时，已经有一个认证token了并且不会提示用户登录两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:32:53.333

好的，假设两台服务器在同一个域上，这是一个可能有效的解决方案：

1.  用户将表单提交到您的站点。

2.  在您的控制器代码中，您使用`WebClient`该类将相同的数据发布到另一台服务器。

3.  据推测，另一台服务器会将 cookie/sessionid/auth 令牌作为 cookie 传回。从 WebClient 中提取该 cookie 并将其传递到您的响应中。

用户现在应该拥有您的身份验证 cookie 和其他站点的身份验证 cookie。假设他们在同一个域中，当用户转到另一个站点时，他们应该已经过身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T11:38:52.457

您可能已经尝试`TempData`避免在视图中使用 GET 参数。

```
TempData["your_key"] = your_model_data;
TempData.Keep();
RedirectToAction("Another_action"); 
```

现在开始行动，检索值：

```
Model your_model_data = TempData["your_key"] AS Model ; 
```

# vim - 如何按比例调整 Vim 中拆分窗口的大小？

> ID：14649698
> 
> 赞同：7
> 
> 时间：2013-02-01T15:33:58.443
> 
> 标签：vim, macvim

好的，首先，这**不是**我要寻找的答案：

```
autocmd VimResized * :wincmd = 
```

让我解释一下：假设我有 2 个垂直分割的窗口，一个大小为 30%，一个大小为 70%。当我调整窗口大小时，我希望该百分比保持不变。如果没有这个命令，右边的分割会慢慢塌陷，最终你在窗口中什么也看不到。使用上面的命令，一旦你开始调整窗口大小，窗口大小立即变为 50%/50%。

我使用很多分割（垂直和水平），我不希望上面的命令只是让一切都相等，但同时我确实希望它们调整大小，只是按比例调整到窗口......我想要调整窗口大小时，窗口中所有拆分的百分比高度/宽度保持不变。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:04:03.963

我试图在我的[ProportionalResize 插件](http://www.vim.org/scripts/script.php?script_id=4462)中实现这一点，基本上遵循 romainl 的答案中概述的方法。您可以将调整大小命令包装在`:ProportionalResize`包装器中；该插件还挂钩到各种事件，以允许在调整 Vim 窗口大小时自动适应，例如使用鼠标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:51:55.720

如果你问的是“vim-官方”的方式来做到这一点，答案是**NO**。(Vim 7.3)

证明它：

打开vim，输入 `:h todo<Enter>`然后输入`/proportionally[Enter]`你会看到：

```
-   When resizing the whole Vim window, the windows inside should be resized
    proportionally (Webb). 
```

所以它在 vim 的待办事项列表中。在这种窗口类型`gg`中，您可以看到前导减号的`"-"` 意思。`Priority classification:`

```
-   unclassified 
```

如果你想这样做，你可以自己编写一个函数，`VimResized`根据你的逻辑调整所有窗口的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T23:12:21.773

您可以创建一个函数来记录窗口大小并将它们绑定到一堆事件，例如`WinEnter`/`WinLeave`和另一个绑定到`VimResized`使用这些值来调整窗口大小的事件。

这听起来不像是一项微不足道的任务。

或者甚至喜欢一个好主意。

# php - 使用 PHP 和 MySQL 的阿拉伯语和类似语言的问题概述

> ID：14649699
> 
> 赞同：2
> 
> 时间：2013-02-01T15:34:01.007
> 
> 标签：php, html, mysql, arabic

也许对于stackoverflow来说这个问题太宽泛了，但是，我会问它：

在使用阿拉伯语和类似语言等语言时，您应该能够处理哪些问题？你能给我一些他们的清单吗？

我最近在信德开始了一个项目。我不会说阿拉伯语、信德语或类似的语言，我写的是“从左到右”。但是，我有一个针对信德用户的项目。我想知道在创建这个项目时我应该处理哪些问题。

所以，基本上使用我的系统用户可以在信德语中添加一些文章，上传图片等。我需要从 MySQL 数据库中创建/编辑/删除这些东西并获取所有数据。目前，我不需要在文本或类似内容中进行一些搜索，只需要简单的 CRUD 操作。

1) 我知道这是 rtl 语言，我需要在 HTML 中使用 dir="rtl" 。

2) 对于那些语言类，应该有必要在数据库中使用 UTF-8 编码和 ut8_general_ci 排序规则。

3) 用PHP查询数据时，应使用mysql_query("SET NAMES 'utf8' ");

4）在mysql中使用CRUD操作时，还有其他特殊问题需要处理吗？我发现 mysql 中的文本搜索可能存在问题。我找到了[http://www.ar-php.org/en_index-php-arabic.html](http://www.ar-php.org/en_index-php-arabic.html)网站关于 php 中阿拉伯语的特殊类集，但是，我现在只需要 CRUD 操作，我真的需要一些特殊类吗或者我可以像在“基于英语的”PHP / MySQL 中一样工作？

你还有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:04:16.493

除了不能使用全文搜索之外，MYSQL 中没有其他内容。

在 PHP 中，您需要使用 mb_string 函数对文本进行任何操作。

[http://php.net/manual/en/book.mbstring.php](http://php.net/manual/en/book.mbstring.php)

CRUD 也没有问题。

我是伊朗人，我的语言是波斯语，在写作上与阿拉伯语相似，我可以确认您不需要任何特别的东西。:)

*编辑：忘了说，你需要在你的 html 中使用这个元标记：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

也不要忘记将您的 php 和 html 文件保存在 utf8 中，但您可以使用此工具以防万一您无法在某处执行此操作：http: [//www.mikezilla.com/exp0012.html](http://www.mikezilla.com/exp0012.html)

# php - 如何将垂直选项卡（如产品页面）添加到自定义 magento 管理表单

> ID：14649700
> 
> 赞同：1
> 
> 时间：2013-02-01T15:34:03.830
> 
> 标签：php, magento

有很多教程可以向产品页面添加额外的选项卡，但我很难找到有关如何从头开始在新表单上创建选项卡的信息。我查看了以下资源，但提供的信息似乎不是很清楚，或者我的 magento 还不足以理解它：

1.  [http://www.excellencemagentoblog.com/module-development-series-magento-admin-module-part3](http://www.excellencemagentoblog.com/module-development-series-magento-admin-module-part3)
2.  [如何在 magento 自定义模块中创建多个选项卡？](https://stackoverflow.com/questions/12952766/how-to-create-multiple-tab-in-magento-custom-module)

我正在尝试模拟在产品部分左侧垂直向下但在自定义表单上运行的选项卡系统。

是否有任何关于如何做到这一点的参考资料（类似于官方的 magento 解释如何创建管理模块）？

ps 我没有发布代码，因为我所拥有的任何东西都直接来自教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:03:15.523

我最终完成了excellentmagentoblog版本的工作，并成功地让标签工作了。除非您非常了解 magento 结构，否则给出的示例并不完全直截了当，但文章中的信息足以完成工作。

# php - 从我的路由器通过 SSH CLI 从 php 页面获取信息

> ID：14649706
> 
> 赞同：0
> 
> 时间：2013-02-01T15:34:21.690
> 
> 标签：php, ssh, command-line-interface

全部，

我对 php 很陌生（简单的表格和你好世界的东西）

我正在尝试创建一个页面，该页面在加载时会从路由器上的 SSH 会话中获取一些文本信息，并将其解析并显示出来

一般的想法是

连接到（IP 地址，端口）发送线路（登录用户 + 密码）发送线路（su 到 root + 密码）发送线路（命令）从命令接收文本（字符串 X）

解析 x 并将统计信息显示为页面上的 html

我看过一些关于如何从 ubuntu 安装库的教程，但我的主机是 Godaddy，所以我无法以这种方式安装任何东西（我只有简单的 ftp 访问权限）

我正在寻找一个简单的简单 ssh 客户端，并希望有一个关于如何使用它的小例子（发送命令和检索文本）

谢谢如果你能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:09:21.817

好的，仅出于学习目的，您可以在您的机器上执行 shell_exec 以使用 ssh 连接到远程主机，运行命令并返回响应，评估并制作一些不错的统计信息：

shell_exec("ssh user@yourhost.com run_your_command"); [http://www.php.net/manual/en/function.shell-exec.php](http://www.php.net/manual/en/function.shell-exec.php)

我会使用 phpseclib ( [http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/) )，一个纯 PHP SSH 实现，或者如果在您的主机上可用，则使用 SSH2 扩展。[http://www.php.net/manual/en/function.ssh2-exec.php](http://www.php.net/manual/en/function.ssh2-exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:41:52.137

在我看来，PHP 不是正确的工具，你可以通过 expect 和一些 bash 的东西来获得更好的结果。

[expect](http://expect.sourceforge.net/)是一个很好的命令行活动工具。[试试看](http://oreilly.com/catalog/expect/chapter/ch03.html)

# php - 如何使用杂货店 set_relation 函数在不同列中显示来自两个不同表的内容

> ID：14649709
> 
> 赞同：4
> 
> 时间：2013-02-01T15:34:28.650
> 
> 标签：php, codeigniter, join, datatable, grocery-crud

我必须使用这些架构的表：

```
users(id, name, email) 
user_details (id, user_id, physical_address, otherinfo) 
```

当我尝试在第一个表上使用 set 关系时，我想在一个网格中显示两个表的所有内容，如图所示： 注意：我已经减少了渲染视图的部分；

```
$crud = new grocery_CRUD();
$crud->set_table('users');
$crud->set_relation('id', 'user_details', '{physical_address} + {otherinfo}'); 
```

id 字段的值以及引用的表没有出现在网格中，因此在使用主键时它似乎不起作用。

所以我决定从第二个表的内容开始，如下所示：

```
$crud = new grocery_CRUD();
$crud->set_table('user_details');
$crud->set_relation('user_id', 'users', '{name} + {email}'); 
```

这可行，但问题是这些值出现在网格的一列中。我想知道如何将它们分成不同的列，并使它们在单独的输入字段中可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T05:36:15.673

我的方式有点荒谬，
如果我真的需要分隔字段，我可能会使用[callback_column](http://www.grocerycrud.com/documentation/options_functions/callback_column)然后使用活动记录使用返回值`$row->user_id`，并回调每个记录

就像：
`return $this->some_model->get_name($row->user_id);`对于名称字段
和
`return $this->some_model->get_name($row->user_id);`电子邮件字段

但是，当我用一些虚拟记录测试时，它无法排序，（我不知道是否有人可以）

# android - 带有 Android NDK 未定义参考的 OpenCV

> ID：14649710
> 
> 赞同：7
> 
> 时间：2013-02-01T15:34:32.823
> 
> 标签：android, c++, opencv, android-ndk

我正在尝试在 android 上使用 opencv（仅限 ndk）。我为 armeabi 编译了 git 存储库的最新源代码。（基于：[Building_OpenCV4Android_from_trunk](http://code.opencv.org/projects/opencv/wiki/Building_OpenCV4Android_from_trunk)）

但是我收到了这个错误（使用 ndk-build）：

```
error: undefined reference to 'cv::Mat::deallocate()'
error: undefined reference to 'cv::fastFree(void*)'
error: undefined reference to 'cv::_OutputArray::_OutputArray(cv::Mat&)'
error: undefined reference to 'cv::Mat::copyTo(cv::_OutputArray const&)'
error: undefined reference to 'cv::Mat::inv(int) const' 
```

简单的测试代码：

```
cv::Mat testMat = cv::Mat(cv::Matx44d
(
    1.0, 0.0, 0.0, 0.0,
    0.0, 1.0, 0.0, 0.0,
    0.0, 0.0, 1.0, 0.0,
    0.0, 0.0, 0.0, 1.0
));
cv::Mat testMatInv = testMat.inv(); 
```

我的安卓.mk：

```
LOCAL_C_INCLUDES :=  $(LOCAL_PATH)/../../../../libs/opencv/include
LOCAL_LDLIBS += -L../../../../libs/opencv/lib/android/armeabi
LOCAL_LDLIBS += -llog -lGLESv2 –lz
LOCAL_STATIC_LIBRARIES := libzip libpng libjpeg freetype
LOCAL_STATIC_LIBRARIES += libopencv_calib3d libopencv_contrib libopencv_core libopencv_features2d libopencv_flann libopencv_highgui libopencv_imgproc libopencv_legacy libopencv_ml libopencv_nonfree libopencv_objdetect libopencv_photo libopencv_stitching libopencv_ts libopencv_video libopencv_videostab 
```

有人有任何线索吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:49:29.203

我现在开始工作了。我忘记在 Android.mk 中添加预构建库，如下所示：

```
#same for all other openCV Libs
LOCAL_MODULE := libopencv_calib3d
LOCAL_SRC_FILES := ../../opencv/lib/android/$(TARGET_ARCH_ABI)/libopencv_calib3d.a
include $(PREBUILT_STATIC_LIBRARY)
include $(CLEAR_VARS)

.....
LOCAL_STATIC_LIBRARIES += libopencv_contrib libopencv_legacy libopencv_ml libopencv_stitching libopencv_nonfree libopencv_objdetect libopencv_videostab libopencv_calib3d libopencv_photo libopencv_video libopencv_features2d libopencv_highgui libopencv_androidcamera libopencv_flann libopencv_imgproc libopencv_ts libopencv_core 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:03:31.350

图书馆的顺序很重要。

尝试：

```
LOCAL_STATIC_LIBRARIES += libopencv_contrib libopencv_legacy libopencv_ml libopencv_stitching libopencv_nonfree libopencv_objdetect libopencv_videostab libopencv_calib3d libopencv_photo libopencv_video libopencv_features2d libopencv_highgui libopencv_androidcamera libopencv_flann libopencv_imgproc libopencv_core 
```

推荐的方法不是硬编码 .mk 文件中的所有名称，而是使用 OpenCV SDK 中的 OpenCV.mk 将 OpenCV 添加到您的项目中。（如果您从源代码进行自定义构建，则 OpenCV.mk 在 cmake（和 make install）步骤生成。）

# regex - 电话 (555) 555-9087 的正则表达式

> ID：14649713
> 
> 赞同：0
> 
> 时间：2013-02-01T15:34:42.220
> 
> 标签：regex, html

我正在为我使用模式属性，`<input type="tel" />`并且我在使用正则表达式时遇到了困难。我尝试了 pattern=`"d{10]"`和 pattern=`"d{3}[\)]\d{3}[\-]\d{4}"`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:36:19.050

改用这个：

```
pattern="\(\d{3}\) \d{3}-\d{4}" 
```

这是小提琴： http: [//jsfiddle.net/ZMaXA/](http://jsfiddle.net/ZMaXA/)
尝试弄乱`input`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:45:39.690

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> str='(777) 777-9087'
>>> r=re.search('\(([^\)]+)\)\s*(\d+-\d+)',str)
>>> r.groups()
('777', '777-9087') 
```

# ruby-on-rails-3 - 在rails 3上的ruby中找不到没有ID的UserSession

> ID：14649718
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:34:56.477
> 
> 标签：ruby-on-rails-3

ActiveRecord::RecordNotFound in UsersController#index

找不到没有 ID Rails.root 的 UserSession：C:/Sites/login_app

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/application_controller.rb:9:in `current_user_session' app/controllers/application_controller.rb:14:in`current_user' app/views/layouts/application.html.erb:12:in `_app_views_layouts_application_html_erb__233847886_33215772' app/controllers/users_controller.rb:7:in`index'

*   class ApplicationController < ActionController::Base
    protect_from_forgery
    helper_method :current_user private
    def current_user_session
    如果定义返回@current_user_session？（@current_user_session）
    @current_user_session = UserSession.find
    end
    def current_user
    如果定义返回@current_user？（@current_user）
    @current_user = current_user_session && current_user_session。记录
    结束
    结束

*   类 HomeController < ApplicationController
    def index
    end
    end

*   类用户会话控制器 < 应用控制器

    def new
    @user_session = UserSession.new
    respond_to do |format|
    format.html # new.html.erb
    format.xml { render :xml => @user_session }
    end
    end

    def create
    @user_session = UserSession.new(params[:user_session])
    respond_to do |format|
    if @user_session.save format.html
    { redirect_to(:users, :notice => '登录成功') }
    format.xml { 渲染 :xml => @user_session, :status => :created, :location => @user_session }
    else
    format.html { render :action => "new" }
    format.xml { render :xml => @user_session.errors, :status => :unprocessable_entity }
    end
    end
    end
    def destroy
    @user_session = UserSession.find
    @user_session.destroy
    respond_to 做 |格式|
    format.html { redirect_to(:users, :notice => '再见！') }
    格式。
    结束
    结束
    结束

*   类用户控制器 < 应用控制器

    def index
    @users = User.all
    respond_to do |format|
    format.html # index.html.erb
    format.json { 渲染 json: @users }
    end
    end

    def show
    @user = User.find(params[:id])
    respond_to do |format|
    format.html # show.html.erb
    format.json { 渲染 json: @user }
    end
    end

    def new
    @user = User.new
    respond_to do |format|
    format.html # new.html.erb
    format.json { 渲染 json: @user }
    end
    end
    def edit
    @user = User.find(params[:id])
    end

    def create
    @user = User.new(params[:user])
    respond_to do |format|
    if @user.save format.html
    { redirect_to(:users, :notice => '注册成功') }
    format.xml { render :xml => @user, :status => :created, :location => @user }
    else
    format.html { render :action => "new" }
    format.xml { render :xml => @user.errors, :status => :unprocessable_entity }
    end
    end
    end

def update
@user = User.find(params[:id])
respond_to do |format|
if @user.update_attributes(params[:user])
format.html { redirect_to @user, notice: '用户已成功更新。' }
format.json { head :no_content }
else format.html
{ 渲染动作：“编辑” }
format.json { 渲染 json：@user.errors，状态：：unprocessable_entity }
end
end
end

def destroy
@user = User.find(params[:id])
@user.destroy
respond_to do |format|
format.html { redirect_to users_url }

format.json { head :no_content }
end
end
end

*   layout/

    apllication.html LoginApp
    <%= stylesheet_link_tag :all %>
    <%= javascript_include_tag :defaults %>
    <%= csrf_meta_tag %>

    <% if current_user %>
    <%= link_to "Edit Profile", edit_user_path(current_user.id)% >
    <%= link_to "注销", :logout%>
    <% else %>
    <%= link_to "注册", new_user_path%>
    <%= link_to "登录", :login %>
    <% end %>

    <%= yield %>

*   user_seesion/_form.html
    <%= form_for(@user_session) 做 |f| %>
    <% if @user_session.errors.any? %>

    ## <%= 复数(@user_session.errors.count, "error") %> 禁止保存此 user_session：

    *   <%= 消息 %>

    <% 结束 %>

    <%= f.label :username %>

    <%= f.text_field :username %>

    <%= f.label :password %>

    <%= f.password_fields :password %>

    <%= f.submit %>

    <%结束%>

*   user_sessions/edit.html

    # 编辑 user_session

    <%= render 'form' %>
    <%= link_to 'Show', @user_session %>
    | <%= link_to '返回', user_sessions_path %>

*   user_sessions/index.html ：

    # 列出 user_sessions

用户名
密码

<% @user_sessions.each 做 |user_session| %>

<%= user_session.username %>
<%= user_session.password %>
<%= link_to '显示'，user_session %>
<%= link_to '编辑'，edit_user_session_path(user_session) %>
<%= link_to '销毁' , user_session, method: :delete, data: { confirm: 'Are you sure?' } %>

<% 结束 %>

<%= link_to '新用户会话', new_user_session_path %>

*   user_sessions/new.html

    # 登录

<%= 渲染'表格' %>

<%= link_to '返回', user_sessions_path %>

*   user_sessions/show.html

    <%= 通知 %>

    **用户名：**
    <%= @user_session.username %>

**密码：**
<%= @user_session.password %>

<%= link_to '编辑', edit_user_session_path(@user_session) %>
| <%= link_to '返回', user_sessions_path %>

-users/_form.html
<%= form_for(@user) 做 |f| %>
<% 如果@user.errors.any? %>

## <%= 复数(@user.errors.count, "error") %> 禁止保存该用户：

```
 <ul><br/>
  <% @user.errors.full_messages.each do |msg| %><br/>
    <li><%= msg %></li><br/>
  <% end %><br/>
  </ul><br/>
</div><br/> 
```

<% 结束 %>

<%= f.label :username %>

<%= f.text_field :username %>

<%= f.label :email %>

<%= f.text_field :email %>

<%= f.label :password %>

<%= f.password_field :password %>

<%= f.label :password_confirmation %>

<%= f.password_field :password_confirmation %>

<%= f.submit 'create user'%>

<% end %>

*   用户/edit.html

    # 编辑用户

<%= 渲染'表格' %>

<%= link_to '显示', @user %>
| <%= link_to '返回', users_path %>

*   用户/index.html ：

    # 列出用户

    <%= 通知 %>

    用户名
    电子邮件

<% @users.each 做 |user| %>

<%= user.username %>
<%= user.email %>
<%= link_to '显示'，用户 %>
<%= link_to '编辑'，edit_user_path(user) %>
<%= link_to '销毁' , user, :confirm => 'Are you sure?', :method => :delete %>

<% end %>

<%= link_to '新用户', new_user_path %>

*   用户/new.html ：

    # 新用户

<%= render 'form' %>
<%= link_to 'Back', users_path %>

*   users/show.html :
    <%= 通知 %>

**用户名：**
<%= @user.username %>

**电子邮件：**
<%= @user.email %>

**加密密码：**
<%= @user.crypted_pa​​ssword %>

**密码盐：**
<%= @user.password_salt %>

**持久性令牌：**
<%= @user.persistence_token %>

<%= link_to '编辑', edit_user_path(@user) %>
| <%= link_to '返回', users_path %>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:52:59.473

在 user_session.rb 中，需要将继承的类改为 Authlogic::Session::Base，如下所示：

```
class UserSession < Authlogic::Session::Base
...
end 
```

此外，下次使用 gist 或类似的东西来粘贴大块代码，或至少对其进行格式化。希望有帮助！

# java - 不确定从 parseStringTo 类返回什么

> ID：14649720
> 
> 赞同：0
> 
> 时间：2013-02-01T15:35:03.720
> 
> 标签：java

我正在尝试编写一个程序，该程序可以获取有关地毯的用户输入数据，将字符串解析为必要的信息片段，并根据形状创建地毯对象。我的代码是

```
 public class CarpetParser{

    public static Carpet parseStringToCarpet(String lineToParse)
    {
        String delims = "[/]";
        String[] info = lineToParse.split(delims);
        if(info[0].equalsIgnoreCase("rectangle")){
            double priceFor = Double.parseDouble(info[2]);
            int height = Integer.parseInt(info[3]);
            int width = Integer.parseInt(info[4]);
            RectangleCarpet theCarpet = new RectangleCarpet(info[1], priceFor, height, width);
            return theCarpet;

        }else if(info[0].equalsIgnoreCase("circle")){
            double priceFor = Double.parseDouble(info[2]);
            int radius = Integer.parseInt(info[3]);
            CircleCarpet theCarpet = new CircleCarpet(info[1], priceFor, radius);
            return theCarpet;

        }

    }
} 
```

对于解析器，

```
 public abstract class Carpet{

    protected int area = 0;
    protected double unitPrice = 0;
    protected double totalPrice = 0.0;
    protected String carpetID;

    public Carpet(String ID, double thisPrice){
        carpetID = ID;
        unitPrice = thisPrice;
    }

    public String getCarpetId(){
        return carpetID;
    }

    public String toString(){
        String carpet = new String("\n" + "The CarpetId:\t\t" + getCarpetId() + "\nThe Area:\t\t" + area + "\nThe Unit Price\t\t" + unitPrice + "\nThe Total Price\t" + totalPrice + "\n\n");
        return carpet;
    }

    public abstract void computeTotalPrice();

} 
```

对于地毯，

```
 public class RectangleCarpet extends Carpet{

    private int height;
    private int width;

    public RectangleCarpet(String ID, double priceOf, int h, int w){
        super(ID, priceOf);
        height = h;
        width = w;
        computeTotalPrice();
    }

    public void computeTotalPrice(){
        super.area = height * width;
        super.totalPrice = unitPrice * area;
    }

    public String toString(){
        String forThis = new String("\nThe Carpet Shape:\tRectangle\nThe Height:\t\t" + height + "\nThe Width:\t\t" + width +"\n");
        return forThis + super.toString();

    }

} 
```

对于其中一种地毯形状和

```
 public class CircleCarpet extends Carpet{

    private int radius;

    public CircleCarpet(String ID, double priceOf, int rad){
        super(ID, priceOf);
        radius = rad;
        computeTotalPrice();

    }

    public void computeTotalPrice(){
        super.area = radius * radius * 3;
        super.totalPrice = area * unitPrice;
    }

    public String toString(){
        String forThis = new String("\nThe Carpet Shape:\tCircle\nThe radius:\t\t" + radius + "\n");
        return forThis + super.toString();
    }

} 
```

对于其他形状。问题是`parseStringToCarpet`缺少返回值，我无法弄清楚它需要返回什么，因为如果我尝试返回`theCarpet`它说它是错误的类型。

调用类是

```
`import java.io.*;         //to use InputStreamReader and BufferedReader
import java.util.*;       //to use ArrayList

public class Menu
 {
  public static void main (String[] args)
   {
     char input1;
     String inputInfo = new String();
     String line = new String();
     boolean found;

     // ArrayList object is used to store carpet objects
     ArrayList carpetList = new ArrayList();

     try
      {
       printMenu();     // print out menu

       // create a BufferedReader object to read input from a keyboard
       InputStreamReader isr = new InputStreamReader (System.in);
       BufferedReader stdin = new BufferedReader (isr);

       do
        {
         System.out.println("What action would you like to perform?");
         line = stdin.readLine().trim();
         input1 = line.charAt(0);
         input1 = Character.toUpperCase(input1);

         if (line.length() == 1)
          {
           switch (input1)
            {
             case 'A':   //Add Carpet
               System.out.print("Please enter a carpet information to add:\n");
               inputInfo = stdin.readLine().trim();
               carpetList.add(CarpetParser.parseStringToCarpet(inputInfo));
               break;
             case 'C':   //Compute Total Price For Each Carpet
               for (int i=0; i<carpetList.size();i++)
                     ((Carpet) carpetList.get(i)).computeTotalPrice();
               System.out.print("total prices computed\n");
               break;
             case 'D':   //Search for Carpet
               System.out.print("Please enter a carpetID to search:\n");
               inputInfo = stdin.readLine().trim();
               found = false;
               for (int i=0; i<carpetList.size();i++)
                {
                 if (inputInfo.equals(((Carpet)carpetList.get(i)).getCarpetId()))
                  {
                   found = true;
                  }
                }
                if (found == true)
                 System.out.print("carpet found\n");
                else
                 System.out.print("carpet not found\n");
               break;
             case 'L':   //List Carpets
               if (carpetList.isEmpty())
                System.out.print("no carpet\n");
               else
                for (int i=0; i < carpetList.size(); i++)
                  System.out.print(carpetList.get(i).toString());
               break;
             case 'Q':   //Quit
               break;
             case '?':   //Display Menu
               printMenu();
               break;
             default:
               System.out.print("Unknown action\n");
               break;
            }
         }
        else
         {
           System.out.print("Unknown action\n");
          }
        } while (input1 != 'Q'); // stop the loop when Q is read
      }
     catch (IOException exception)
      {
        System.out.println("IO Exception");
      }
  }

  /** The method printMenu displays the menu to a use **/
  public static void printMenu()
   {
     System.out.print("Choice\t\tAction\n" +
                      "------\t\t------\n" +
                      "A\t\tAdd Carpet\n" +
                      "C\t\tCompute Total Price For Each Carpet\n" +
                      "D\t\tSearch for Carpet\n" +
                      "L\t\tList Carpets\n" +
                      "Q\t\tQuit\n" +
                      "?\t\tDisplay Help\n\n");
  }
} 
```

` 我不允许编辑调用类的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:41:25.760

您始终必须确保具有返回值的方法中的所有路径都包含一个`return`或抛出异常。在这种情况下，您可以添加：

```
 else {
            return null;
        } 
```

到方法的最后一部分`parseStringToCarpet`，或者只是写`return null`在方法的末尾。

返回的问题`null`是调用此函数的方法应该知道它可能会返回`null`，因此您应该记录它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:42:38.290

最后返回一个**空**对象，当`if-else`条件不满足时将调用它，但请确保在调用它时进行非空检查

公共类 CarpetParser{

```
public static Carpet parseStringToCarpet(String lineToParse)
{
    String delims = "[/]";
    String[] info = lineToParse.split(delims);
    if(info[0].equalsIgnoreCase("rectangle")){
        double priceFor = Double.parseDouble(info[2]);
        int height = Integer.parseInt(info[3]);
        int width = Integer.parseInt(info[4]);
        RectangleCarpet theCarpet = new RectangleCarpet(info[1], priceFor, height, width);
        return theCarpet;

    }else if(info[0].equalsIgnoreCase("circle")){
        double priceFor = Double.parseDouble(info[2]);
        int radius = Integer.parseInt(info[3]);
        CircleCarpet theCarpet = new CircleCarpet(info[1], priceFor, radius);
        return theCarpet;

    }

    return null;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:43:19.693

当您将函数声明为返回 a`Carpet`时，您的类**必须**返回 a `Carpet`（即使`null`）。

当`info[0]`既不是`circle`or`rectangle`时，您的函数不返回任何内容。

快速解决方法是`return null;`在末尾添加 a 或抛出异常（即 create `InvalidArgumentException`）。

在第二种情况下，您必须编辑调用类以处理异常或将其进一步抛出堆栈。

# ios - 每当 admob 收到广告时 cocos2dx 动画就会滞后

> ID：14649724
> 
> 赞同：3
> 
> 时间：2013-02-01T15:35:26.367
> 
> 标签：ios, cocos2d-iphone, admob

我在 cocos2dx(v2.0.4) 游戏场景中运行流畅的 CCScaleTo 动作。将 admob(v6.2.1) 添加到 cocos2dx 的 openGLView 后，每当 admob 收到新广告时，动作就会滞后。

我测试了两种情况：

1.  从视图层次结构中移除广告视图。admob 时动画滞后`loadRequst:`
2.  注释掉 admob`loadRequest:`并将广告视图添加回视图层次结构。动画在游戏场景加载的前几秒内滞后。

它似乎与 UIKit & cocos2dx 集成问题有关。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:47:07.867

想到的技巧是：不要让 AdMob 处理自己的显示（因为它会坚持做那个动画）。相反，构建 Adview，并仅在正常动画完成后将其添加到您的视图层次结构中，使用 ie `dispatch_after`。

理想情况下，您会将 包装`UIView`在一个`cocos2d`对象中，以便`CCDirector`可以制作动画而不是`UIKit`. 这可能比它的价值更多的工作，但它肯定会阻止动画线程阻塞。

# reporting-services - SQL Server 报表生成器 - 仅显示运行总计

> ID：14649725
> 
> 赞同：0
> 
> 时间：2013-02-01T15:35:26.197
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008, report, reporting

我在报表生成器中有一个表格，其中包含特定分支在特定程序中服务了多少客户。

分支 -> 程序 -> 服务的客户

我保留了一个运行总数，但这就是我需要显示的全部内容，而不是每条记录的总数。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:55:26.160

目前还不太清楚需要什么-您是否查看过该`RunningValue`功能，即类似的东西？

```
=RunningValue(Fields!CustomersServed.Value, Sum, Nothing) 
```

任何更多信息，例如示例数据集以及您希望看到的结果将是最有帮助的。

# regex - 使用 Regex 验证文本区域中的单词数

> ID：14649728
> 
> 赞同：1
> 
> 时间：2013-02-01T15:35:31.113
> 
> 标签：regex, asp.net-mvc, vb.net

我正在尝试编写一个 MVC 模型验证来验证字符串中是否有 10 个或更多单词。该字符串已正确填充，因此我没有包含 HTML。我已经进行了相当多的研究，似乎我所尝试的某些东西应该有效，但是，无论出于何种原因，我的似乎总是失败。关于我在这里做错了什么的任何想法？

（使用 System.ComponentModel.DataAnnotations，在 mvc 4 vb.net 环境中）

已经尝试过`([\w]+){10,}`, `((\\S+)\s?){10,}`, `[\b]{20,}`, `[\w+\w?]{10,}`, `(\b(\w+?)\b){10,}`, `([\w]+?\s){10}`, `([\w]+?\s){9}[\w]`, `([\S]+\s){9}[\S]`,`([a-zA-Z0-9,.'":;$-]+\s+){10,}`以及更多关于同一基本思想的变体。

```
<Required(ErrorMessage:="The Description of Operations field is required"), RegularExpression("([\w]+){20,}", ErrorMessage:="ERROZ")>
Public Property DescOfOperations As String = String.Empty 
```

正确的解决方案是`([\S]+\s+){9}[\S\s]+`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:52:18.490

**编辑将接受的版本移到顶部，删除未使用的版本。**除非我错了并且整个序列需要匹配，否则类似（也考虑双空格）：

```
([\S]+\s+){9}[\S\s]+ 
```

或者：

```
([\w]+?\s+){9}[\w]+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:11:38.623

试试这个：

`([a-zA-Z0-9,.'":;$-]+\s){10,}`

# qml - 如何从listview bb10 qml中的listitemcomponents访问外部组件？

> ID：14649732
> 
> 赞同：3
> 
> 时间：2013-02-01T15:35:56.933
> 
> 标签：qml, blackberry-10, blackberry-cascades

我无法从 ListItemComponent 内部访问数据源 ID。任何人都可以在这方面帮助我吗？

```
ListItemComponent {
    type: "item"
    Container {
        id: listviewcontainer
        Container {
            preferredWidth: 768
            layout: StackLayout {
                orientation: LayoutOrientation.LeftToRight
            }
            CustomImageView {
                leftPadding: 10
                rightPadding: 10
                url: ListItemData.from_image
                horizontalAlignment: HorizontalAlignment.Left
                verticalAlignment: VerticalAlignment.Center
            }
            Container {
                preferredWidth: 538
                layout: StackLayout {
                    orientation: LayoutOrientation.TopToBottom
                }
                Container {
                    layout: StackLayout {
                        orientation: LayoutOrientation.LeftToRight
                    }
                    Label {
                        text: ListItemData.from
                        textStyle {
                            base: SystemDefaults.TextStyles.TitleText
                            color: Color.create("#2db6ff")
                        }
                    }
                    ImageView {
                        imageSource: "asset:///Home/img.png"
                        verticalAlignment: VerticalAlignment.Center
                    }
                }//Container
                Label {
                    text: ListItemData.message
                    multiline: true
                    textStyle {
                        base: SystemDefaults.TextStyles.SubtitleText
                    }
                    content {
                        flags: TextContentFlag.Emoticons
                    }
                }
                Label {
                    id: time
                    text: ListItemData.time
                    textStyle {
                        base: SystemDefaults.TextStyles.SmallText
                        color: Color.create("#666666")
                    }
                }
            }//Container
            ImageButton {
                id: delete_btn
                defaultImageSource: "asset:///Icon/delete.png"
                pressedImageSource: "asset:///Icon/delete.png"
                verticalAlignment: VerticalAlignment.Center
                horizontalAlignment: HorizontalAlignment.Right
                onClicked: {
                    deleteMessage(ListItemData.tid, ListItemData.uid);
                }
                function deleteMessage(tid, uid) {
                    var request = new XMLHttpRequest()
                    request.onreadystatechange = function() {
                        if (request.readyState == 4) {
                            var mResponse = request.responseText
                            mResponse = JSON.parse(mResponse)
                            var mResponseStatus = mResponse.response[0].receive.status;
                            var mMsg = mResponse.response[0].receive.message;
                            if (mResponseStatus == 1) {
                                msg_DataSource.source = "newurl.com" //   This line not works here..
                                msg_DataSource.load();              //   This line not works here..
                            } else if (mResponseStatus == 0) {
                            }
                        }
                    }// end function
                    request.open("GET", "myurl.com", true);
                    request.send();
                }// deleteMessage
            }//ImageButton
        }//Container
    }//Container
}//ListItemComponent 
```

这里无法解决以下两行

```
msg_DataSource.source = "newurl.com" 
msg_DataSource.load(); 
```

我已经尝试如下，但这也不起作用

```
listviewcontainer.ListItem.view.dataModel.message_DataSource.source = "myurl.com";
listviewcontainer.ListItem.view.dataModel.message_DataSource.load(); 
```

或这个

```
listviewcontainer.ListItem.view.dataModel.source = "myurl.com"; 
listviewcontainer.ListItem.view.dataModel.load(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:43:45.897

使用以下代码将对象存储到全局变量的另一种最简单的方法对我来说很好用。

```
 onCreationCompleted: {
         Qt.tabbedPane = tabbedPane;
         Qt.homeTab = homeTab;
        } 
```

在这里，我在页面创建完成时将 tabbedPane 存储在全局变量 Qt.tabbedPane 中。现在我可以使用 Qt.tabbedPane 从 ListItemComponent 访问它。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:54:41.300

使数据模型可访问的最简单方法[`property alias`](https://developer.blackberry.com/cascades/reference/propertybinding.html#property-aliases)是在定义数据模型的任何地方声明 a ，例如在`ListView`QML 文件中。这将使 QML 中的顶级组件可以从此访问您的数据模型`property alias`。实际上，它为您提供了从 QML 中其他任何地方对您的数据模型的全局引用。

例如，如果您的数据模型被调用`msg_DataSource`，那么在定义它的 QML 文件中，您可以像这样创建属性别名：

```
property alias myDataModel: msg_DataSource 
```

然后在你的`ListItemComponent deleteMessage`函数中，你可以`myDataModel`这样使用：

```
myDataModel.source = "newurl.com" 
myDataModel.load(); 
```

注意：我相信您也可以使用信号和插槽以更优雅的方式执行此操作，但这种方式应该更快更容易理解。

# php - Wordpress 从短代码回调中附加到 HEAD

> ID：14649733
> 
> 赞同：6
> 
> 时间：2013-02-01T15:35:58.033
> 
> 标签：php, html, wordpress

我正在制作一个插件来注册一个简码，当这样使用它时：`[append_css mycss]`它会查找一个名为的自定义字段`mycss`并将内容添加到`head`文档中。一切都很好，除了代码被添加到正文中，我不知道如何将它添加到头部。

我尝试添加一个动作`wp_head`，但我不知道如何在执行此操作时传递变量，而且它似乎并没有从短代码回调中触发。

```
function append_css_short($params){
  global $post;
  if(sizeof($params)){
    $key = $params[0];
  } else {
    $key = 'css';
  }
  return '<style type="text/css">'.
  get_post_meta($post->ID, $key, true)
  .'</style>';
}
add_shortcode('append_css','append_css_short'); 
```

我怎样才能让这个写到头部而不是身体？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:13:23.943

如果你想在文档的头部打印一些东西，你需要使用`add_action`hook `wp_head`。

更好的方法可能是根本不使用简码。简码旨在添加内容或修改内容。而是创建一个可以附加的函数，该函数`wp_head`将打印您的 css。您可能希望强制用户保持自定义字段名称一致。或者更好的是让您的插件为他们可以输入自定义 CSS 的帖子添加一个元框。然后，您将始终确定该字段的名称。

```
function append_css() {

   global $post;

   if ( ! get_post_meta( $post->ID, 'mypluginname_css', true ) ) {
      return;
   }

   return '<style type="text/css">'. get_post_meta($post->ID, $key, true) .'</style>';

}

add_action( 'wp_head', 'append_css' ); 
```

我唯一不确定的是`$post`自定义字段数据是否在循环之外可用。因此，您可能必须在其中添加一些额外的查询才能在`wp_head`触发时提取自定义数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:46:31.767

对@Jrod 提供的答案进行了一些小的调整，这是完整的工作插件，用法如下：

1.  使用所需代码创建名为`append_css`（或）的自定义字段`append_js`
2.  ...当然，没有数字 2 ;)

# 代码

```
<?php
/**
 * @package Append_CSS_JS
 * @version 0.1
 */
/*
Plugin Name: Append CSS JS
Plugin URI: http://itaccess.org/wordpress-plugins/append-css-js/
Description: Append Css or Js to any page using Custom Fields
Author: Billy Moon
Version: 0.1
Author URI: http://billy.itaccess.org/
*/

function append_css() {

  global $post;

  if ( ! get_post_meta( $post->ID, 'append_css', true ) ){
    return;
  }

  echo '<style type="text/css">'. get_post_meta($post->ID, 'append_css', true) .'</style>';

}

add_action( 'wp_head', 'append_css' );

function append_js() {

   global $post;

   if ( ! get_post_meta( $post->ID, 'append_js', true ) ) {
      return;
   }

   echo '<script type="text/javascript">'. get_post_meta($post->ID, 'append_js', true) .'</script>';

}

add_action( 'wp_head', 'append_js' );

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:40:25.433

我认为这是不可能的，因为短代码将在 之后调用`wp_head()`，因此您无法使用它。

这是所有 wordpress 钩子的列表[http://adambrown.info/p/wp_hooks](http://adambrown.info/p/wp_hooks)

**编辑：**

这是一个解决方法：

在您的模板中：

```
<?php
//get the content of your post:
if(have_posts()) while(have_posts()) the_post();
    $pcontent = get_the_content();
endwhile;
?>
<html>
<head>
...
</head>
<body>
...
<?php echo $pcontent; ?>

</body>
</html> 
```

# c# - 从 AD 获取组子组和用户（质量检查

> ID：14649740
> 
> 赞同：1
> 
> 时间：2013-02-01T15:36:26.883
> 
> 标签：c#, active-directory

我正在检索所有组、子组和用户

我正在使用以下代码

```
ResultPropertyValueCollection resultCollection = result.Properties["member"];
                foreach (var oneResult in resultCollection)
                {

                    if (oneResult.ToString().IndexOf("OU=Groups") > -1)
                    {
                        group.SubGroupsNames.Add(GetCN(oneResult.ToString()));
                    }
                    else if (oneResult.ToString().IndexOf("OU=Users") > -1)
                    {
                        group.UsersNames.Add(GetCN(oneResult.ToString()));
                    }
                }
private string GetCN(string line)
    {
        return line.Substring(line.IndexOf("CN=") + 3, line.IndexOf(",") - line.IndexOf("=")-1);
    } 
```

它工作正常，但由于我将由代码质量控制器控制，有没有更好的方法来编写它？或者你觉得可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:01:49.683

I am not totally clear on what you are trying to do but I see some wheel reinventing going on here.

Take a look at `System.DirectoryServices.AccountManagement`, particularly the `GroupPrincipal` [class](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.groupprincipal.aspx).

You will find some great methods there such as `getMembers()` (with recursion), `IsMemberOf()` and plenty of other useful stuff.

# ruby-on-rails - 设计：多个注册表单的多个重定向

> ID：14649741
> 
> 赞同：0
> 
> 时间：2013-02-01T15:36:31.797
> 
> 标签：ruby-on-rails, devise, routes

我有两个要设计的注册表单，我想在注册时将用户重定向到两个不同的页面，具体取决于他们使用的注册表单。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:44:32.457

尝试添加到 application_controller.rb：

```
 def after_sign_up_path_for(user)
    user.something? ? dashboard_path : root_path
  end 
```

不确定这是否会起作用，但如果不起作用，您可以覆盖`Devise::RegistrationsController`。

# jquery - 如何让表格过滤器插件忽略 url 中的哈希？

> ID：14649744
> 
> 赞同：0
> 
> 时间：2013-02-01T15:36:36.130
> 
> 标签：jquery, hash, filter

我正在使用[PicNet 表过滤器](http://www.picnet.com.au/picnet-table-filter.html)来过滤表中的数据。它工作得很好。然而，我遇到的一个问题是它与我的内部选项卡导航冲突。选项卡导航 (jQuery UI) 使用例如 www.url.com#1 或 www.url.com#2 在选项卡之间导航。第 2 页上的表格过滤器选择了这个并将 2 添加到过滤器的输入字段。

我尝试了很多技巧来清除它，但我还没有找到可行的解决方案。有没有办法可以修改脚本以完全忽略散列，或者以某种方式使散列不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:00:26.003

我通过使用在过滤发生之前运行的函数（filteringRows）解决了这个问题，并检查了来自 url 的哈希值，如果它是罪魁祸首，我刚刚删除它并将标准文本作为文本字段的值，直到用户单击它以输入他自己的值。

# android - Android - requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS) 做什么？

> ID：14649745
> 
> 赞同：30
> 
> 时间：2013-02-01T15:36:36.833
> 
> 标签：android, window, android-progressbar

几乎在标题中。

已经看到了这一点，经过一番搜索后似乎无法找出它的实际作用或不确定的进展是什么。

`requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS)`

例如，它被[RoboSpice samples](https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-core-fragment/src/com/octo/android/robospice/sample/basic/fragment/MainActivity.java)使用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-01T15:46:01.873

更新：目前此功能已弃用，当前设备不支持，请查看[官方文档](https://developer.android.com/reference/android/view/Window.html#FEATURE_INDETERMINATE_PROGRESS)。

原答案：

简单地在 Actionbar 的右上角旋转圆圈，代表一些背景动作。

![在此处输入图像描述](../Images/706cad2b3b655d1ade9fe87b00f5a9b8.png)

屏幕截图来自[Sherlock Actionbar 演示](http://actionbarsherlock.com/samples.html)。

# apache - 根据响应而不是请求重写 URL

> ID：14649755
> 
> 赞同：1
> 
> 时间：2013-02-01T15:36:57.900
> 
> 标签：apache, rewrite, websphere, portal

我需要重写一个 URL，以便在 IBM WebSphere Portal 网站上有一个好看的 URL。
目前，该 URL 如下所示：
`http://www.mydomain.com/wps/portal/Internet/home/!ut/p/b1/jZDRCoIwFIafpRfYji5JLqULdZVDYWK7iSGHGLgpeRJ6-_QBJP-7D77v5ueGN9wEO7mXJdcH2y1sjk99r6S6phHEl0pALtICSn0TquzlaKwLsdhv68UZDnIRlMxOkEtQoq7qKI029rCyBP71khs7OuYC4TsgMeqH-QBmW_rYzhGODGcM6DHQyIus98gHr3XzTXY_xAz1IQ!!/dl4/d5/L2dJQSEvUUt3QS80SmtFL1o2X1VNkUpPS0cxMDhDUjMwSTNHTjBRVUwzOEww/`

我希望将这种 URL 返回给访问者： `http://www.mydomain.com/wps/portal/Internet/home/`

**但是**我需要在发送到门户的请求中保留“！ut”之后的部分，因为我们需要这些参数。
所以，我的想法是在门户完成处理**后重写 URL。**

我认为 Apache URL 重写是这样工作的：

1.  用户发送请求：`www.mydomain.com/wps/portal/?vs=Internet&page=home`
2.  Apache 获取请求并像这样重写它：`www.mydomain.com/wps/portal/Internet/home/`
3.  应用程序（在我的例子中是一个门户）获取请求`www.mydomain.com/wps/portal/Internet/home/`并处理它
4.  应用程序用 URL 发回响应`www.mydomain.com/wps/portal/Internet/home/!ut/p/b1/jZDRCoIwF...Eww/`
5.  WebBrowser 在其地址栏中显示新 URL

我怎样才能让它像这样工作：

1.  用户发送请求：`www.mydomain.com/wps/portal/?vs=Internet&page=home`
2.  Apache 获取请求并将其原封不动地传递给应用程序
3.  应用程序（在我的例子中是一个门户）获取请求`www.mydomain.com/wps/portal/?vs=Internet&page=home`并处理它
4.  应用程序用 URL 发回响应`www.mydomain.com/wps/portal/Internet/home/!ut/p/b1/jZDRCoIwF...Eww/`
5.  Apache 得到响应并像这样重写它：`www.mydomain.com/wps/portal/Internet/home/`
6.  WebBrowser 在其地址栏中显示新 URL

你知道这是否可能吗？

您可能知道没有 Apache URL 重写的解决方案：我也很感兴趣。

# android - 应用程序中所有对话框的自定义主题

> ID：14649757
> 
> 赞同：1
> 
> 时间：2013-02-01T15:37:04.403
> 
> 标签：android, styles, android-dialog, android-theme

是否有任何与[HoloColors](http://android-holo-colors.com/)或[Action Bar Style Generator](http://jgilfelt.github.com/android-actionbarstylegenerator/)类似的主题生成器可以帮助我们更改应用程序中 Dialogs 和 AlertDialogs 的主题？

我的应用程序使用 Holo 主题，并且我设法更改了诸如 EditTexts 和 Buttons 之类的视图样式，但是当它们出现在对话框中时它们保持不变。我还想更改标题下蓝线的颜色。

我发现了一些与该主题相关的问题和答案，但他们实际上说这甚至是不可能的。我不敢相信它不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:44:30.283

至少对于 AlertDialog 是可能的。在这里，我发布了一个函数的解决方案，该函数在您的代码中的某个时间点（例如按钮单击）被调用，并在您的屏幕上创建一个警报对话框自己的布局。布局是一个普通的 layout.xml，您可以定义您的方式想。非常适合我！

```
private void showAddUserGeneratedStationDialog() {

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                AmplifyActivity.this);

        LayoutInflater inflater = getLayoutInflater();

            //inflate your layout.xml
        alertDialog
                .setView(inflater.inflate(R.layout.dialog_add_station, null));

            //show dialog over activity screen
        final AlertDialog ad = alertDialog.show();

            //put actions to your ui-elements
        Button cancelBtn = (Button) ad
                .findViewById(R.id.list_user_generated_cancelBU);
        cancelBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                ad.cancel();
            }
        });

        Button doneBtn = (Button) ad
                .findViewById(R.id.list_user_generated_doneBU);
        doneBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                            //get sth from your layout f.e. some textInput
                String stationUrl = ((TextView) ad
                        .findViewById(R.id.list_user_generated_stationURLInput))
                        .getText().toString();

                    // did some other things

                ad.dismiss();

            }
        });

    } 
```

和我的 layout.xml

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_user_generated_addStationDialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#99000000"
    android:clickable="true"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="300dp"
        android:layout_height="200dp"
        android:padding="10dp"
        android:background="#000"
        android:orientation="vertical" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/list_user_generated_cancelBU"
                style="@style/ButtonStyle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center|right"
                android:text="@string/cancel" />

            <TextView
                style="@style/AmplifyHeadlineElement"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="@string/list_userGenerated_addStation" />

            <Button
                android:id="@+id/list_user_generated_doneBU"
                style="@style/ButtonStyle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center|right"
                android:text="@string/done" />
        </LinearLayout>

        <EditText
            android:id="@+id/list_user_generated_stationURLInput"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:layout_marginTop="10dp"
            android:background="#FFF"
            android:ems="10"
            android:hint="@string/list_userGenerated_addUrlExample"
            android:inputType="textNoSuggestions" >
        </EditText>

        <!-- MORE BUT I DELETED  IT FOR BETTER OVERVIEW -->
    </LinearLayout>
</LinearLayout> 
```

# sql - 从 Excel 2010 导入 SQL Server 2008R2 时出错

> ID：14649762
> 
> 赞同：2
> 
> 时间：2013-02-01T15:37:12.777
> 
> 标签：sql, database, excel, import

我正在使用 SQL Server 导入和导出向导尝试将特定的 xlsx 电子表格导入到 SQL 中的现有表中。现有表包含电子表格中列的子集，我忽略了许多不匹配的列。

该电子表格有 123 列和 238 行数据。

最初，当我导入电子表格时，向导挂在“执行”上，我不得不终止该进程。我以前从未遇到过的东西。

将数据复制并粘贴到新电子表格后，现在出现以下错误：

> > 错误 0xc020901c：数据流任务 1：输出“Excel 源输出”(9) 上的输出列“机密性条款注释”(108) 存在错误。返回的列状态为：“文本被截断或一个或多个字符在目标代码页中不匹配。”。（SQL Server 导入和导出向导）
> > 
> > 错误 0xc020902a：数据流任务 1：“输出列“保密条款注释”(108)”由于发生截断而失败，并且“输出列“保密条款注释”(108)”上的截断行处置指定了截断失败。指定组件的指定对象发生截断错误。（SQL Server 导入和导出向导）

我对此感到困惑，“保密条款评论”列是被忽略的列之一 - 它没有被导入数据库！

我尝试将 "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Jet 4.0\Engines\Excel\TypeGuessRows" 设置为 0 和更高的数字，例如 238 和 1000，以增加样本量。（尽管该表已经存在，其中的字段足够大以供导入的数据使用）。我还将“截断（全局）”和“错误（全局）”设置为忽略（但此设置似乎被“忽略”）。

我也尝试将数据导入新表，并得到相同的截断错误消息（但在不同的字段上取决于数据排序）。

我考虑过导入为 CSV 文件，但在许多字段中都嵌入了逗号，这完全搞砸了数据。

关于如何导入数据的任何想法？我已经在这上面花了 3 个多小时，但一无所获。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:44:37.913

而不是 CSV，您可以另存为`Text (Tab delimited) (*.txt)`- 这样您就不会遇到逗号问题。

此外，如果您只需要这样做一次，并且由于数据集并不十分庞大，我会考虑只从 excel 复制并直接粘贴到 sql server management studio。

# javascript - 刷新 URL 时收到两次 onbeforeunload 确认警报？

> ID：14649764
> 
> 赞同：2
> 
> 时间：2013-02-01T15:37:18.580
> 
> 标签：javascript, jsp, internet-explorer, dom-events

当用户离开页面时，我正在使用`window.onbeforeunload`用户确认，但确认警报仅在 IE 中发生两次。

我的代码是：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>User confirmation</title>

<script type="text/javascript">
    /* Used for confirmation , to closing the window */
    window.onbeforeunload = function() {

        return "Are you sure want to LOGOUT the session ?";
    };
</script>
</head>
<body>
<p>Folow the steps which I said in Stack overflow</p>
</body>
</html> 
```

情景是，

第 1 步：运行我的代码并在 IE 中打开它。

第 2 步：应用程序加载后，关闭浏览器窗口。您将收到确认警报。

第 3 步：在确认警报中**取消。**

第 4 步：然后按地址栏中的**ENTER 按钮**刷新 URL 。

第 5 步：在警报中给出**确定。**

第 6 步：现在您将再次收到确认警报。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:59:57.720

这是 IE 设计的。

阅读列出引发该事件的所有事情的备注。

[http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx)

您可以使用计时器来避免这种情况：

[window.onbeforeunload 可能会触发多次](https://stackoverflow.com/questions/4126820/window-onbeforeunload-may-fire-multiple-times)

# javascript - 什么是 'defaultValue' 的等价物菜单？可能重复：从选择字段 Javascript 中获取默认值 我使用 javascript 函数和“window.beforeunload”属性来检查用户在离开页面之前是否对我的 Web 表单进行了任何更改。在此函数中，我将文本字段的 defaultValue 与值进行比较。但是，我在表单中添加了两个 ListBox，而 defaultValue 方法对它们不起作用。我可以用什么来代替 Selects？文本字段示例：if(document.f

> ID：14649766
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:37:19.970
> 
> 标签：javascript, forms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:47:35.893

它`defaultSelected`用于选择的选项元素。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/HTMLOptionElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLOptionElement)

# c# - LUA - '・ 附近的意外符号

> ID：14649767
> 
> 赞同：3
> 
> 时间：2013-02-01T15:37:21.280
> 
> 标签：c#, lua, luainterface

我正在尝试`Lua`在运行时将脚本加载到我的项目中。但是，每当我尝试这样做时，在加载文件时都会收到以下错误：

```
Items\food.lua:1: unexpected symbol near '・ 
```

文件本身很简单，但我看不出原因：

```
config = {
    itemtype = 2,
    name = "Food",
    basevalue = 1,
    inventorytexture = 0,
    red = 255,
    green = 255,
    blue = 255,
    inventorywidth = 1,
    inventoryheight = 1
} 
```

这是我用来运行它的代码，`C#`以防这与它有关：

```
// In main initialisation
public void ItemSetup()
{
    itemTemplates.Add(new ItemTemplate("Items\\food.lua"));
}

// constructor for ItemTemplate class
Lua LuaLoader = new Lua();

public ItemTemplate(string filename)
{
    LuaLoader.DoFile(filename); // here is where the error comes up
} 
```

我已经尝试更改文件本身的设置，但是这些似乎都没有帮助。以下是我对此文件的设置：

```
Build Action: None
Copy to Output Directory: Copy of newer
Custom Tool: <blank>
Custom Tool Namespace: <blank>
File Name: food.lua
Full Path: [...]\Items\food.lua 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:06:08.057

看起来它可能是一个字节顺序标记。请参阅：[如何从我的 xml 文件](https://stackoverflow.com/questions/295472/how-do-i-remove-the-bom-character-from-my-xml-file)和[XML 中删除 BOM 字符 - 根级别的数据无效](https://stackoverflow.com/questions/291455/xml-data-at-root-level-is-invalid)

我以前在一些 XML 文件中处理过它，所以如果这是同一个问题，我不会感到惊讶。正如在一些链接问题中所指出的那样，作为工作流程的一部分，有一些实用程序可以轻松删除/避免它们。

# c++ - 确定重载成员函数的签名

> ID：14649777
> 
> 赞同：0
> 
> 时间：2013-02-01T15:37:41.653
> 
> 标签：c++, template-meta-programming, overloading, function-signature

给定`some_type`一个成员函数`f`，可以`f`像这样确定 's 的签名（比如说让我们把它放在一个元组中）：

```
template <typename R, typename T, typename... A>
std::tuple<R, A...> signature_of_impl(R (T::*)(A...));

template <typename T>
using signature_of_member_f = decltype(signature_of_impl(&T::f));

struct some_type
{
    int f(char, float);
};

using some_type_f_signature = signture_of_member_f<some_type>; 
```

`f`如果超载，这显然会失败。是否可以确定`f`within的所有现有重载的签名`some_type`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:43:06.213

您可以向编译器“询问”特定函数的类型。

但是在 C++ 中没有**[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)**，你不能查询一个类中存在哪些函数，甚至是同一个函数的重载。

# c - 使用#define 将值转换为字符串

> ID：14649778
> 
> 赞同：-2
> 
> 时间：2013-02-01T15:37:45.807
> 
> 标签：c, c-preprocessor

我的任务是将浮点或整数值转换为**C**中的字符串。因为我在嵌入式平台上工作，所以我不能使用 sprintf。所以我想用这样的东西。

```
#define CURRENT(STRING,S_NO,VALUE) (str = "S"#S_NO#VALUE"A") 
```

并像这样调用它

```
int a=10,b=20;
CURRENT(str,a,b); 
```

所以 str 应该是`S1020A`. 但我越来越`SabA`。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:43:57.510

宏在编译之前进行评估，因此`CURRENT(str,a,b);`使用变量名称而不是它们的值进行扩展，`a`这些`b`值可能仅在运行时可用。

要在运行时将 an 转换`int`为`char`数组而不使用[`sprintf`](http://en.cppreference.com/w/c/io/fprintf)etc。如果可用，请使用[itoa](http://www.cplusplus.com/reference/cstdlib/itoa/)，或者您可以编写如下函数（未经测试！）

```
#define MAX_INT_STRING_BYTES (11)

void IntToString(int val, char* str)
{
    char reversed[MAX_INT_STRING_BYTES]
    int index, i = 0;
    bool negative = false;
    if (val == 0) {
        *str++ = '0';
        *str = '\0';
        return;
    }
    if (val < 0) {
        negative = true;
    }
    while(val != 0) {
        reversed[index++] = (char)('0' + abs(val % 10));
        val /= 10;
    }
    if (negative) {
        *str++ = '-';
    }
    for (i = index; i > 0; i--) {
        *str++ = reversed[i - 1]);
    }
    *str = '\0';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:41:57.683

它只知道 a 和 b 在运行时的值是什么，而预处理器指令在编译时被解析。因此，您尝试做的事情将行不通。

但是，您可以执行以下操作：

```
#define CURRENT(STRING,S_NO,VALUE) sprintf(STRING, "S%i%iA", S_NO, VALUE) 
```

或者只是让它成为一个功能。

或者直接调用 sprintf 而不是 CURRENT。

# schema - 我应该如何记录 HBase 架构？

> ID：14649779
> 
> 赞同：2
> 
> 时间：2013-02-01T15:37:49.220
> 
> 标签：schema, hbase

这可能是我过度思考问题的一个案例，但我应该如何记录 HBase 模式？在关系数据库领域，通常使用 UML 或类似的图表技术来记录模式。这些方法似乎不太适合 HBase。对我来说，最简单的方法是使用电子表格（或任何其他表格）来记录列和列族。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:21:31.030

目前没有通用的方法。你可以用任何你觉得最清楚的方式来做。我使用过实体图（通常比它们的价值更麻烦）、`XML`/`JSON`和伪`CREATE TABLE`语句。几件事可能会有所帮助：

*   [我在 HBaseCon 2012 上做的](http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html)关于理解 HBase 模式设计的演讲，其中提出了一些简单的指导方针。
*   [一个名为scoot](https://github.com/ivarley/scoot)的简单开源工具，它接收`XML`文件并输出`JRuby`用于创建所述模式的脚本

如果您正在研究诸如“实体嵌套”（即在运行时使用可变列）之类的高级内容，那么目前就建模而言，您有点靠自己。

# android - 如何读取/写入使用 android.util.Base64 编码的字符串

> ID：14649780
> 
> 赞同：1
> 
> 时间：2013-02-01T15:37:52.293
> 
> 标签：android, io, base64, fileinputstream, fileoutputstream

我想将一些字符串存储在一个简单的 .txt 文件中，然后读取它们，但是当我想使用 Base64 对它们进行编码时，它不再起作用：它写得很好，但读取不起作用。^^

写法：

```
private void write() throws IOException {
    String fileName = "/mnt/sdcard/test.txt";
    File myFile = new File(fileName);

    BufferedWriter bW = new BufferedWriter(new FileWriter(myFile, true));

    // Write the string to the file
    String test = "http://google.fr";
    test = Base64.encodeToString(test.getBytes(), Base64.DEFAULT);

    bW.write("here it comes"); 
    bW.write(";");
    bW.write(test);
    bW.write(";");

    bW.write("done");
    bW.write("\r\n");

    // save and close
    bW.flush();
    bW.close();
} 
```

读取方法：

```
private void read() throws IOException {
    String fileName = "/mnt/sdcard/test.txt";
    File myFile = new File(fileName);
    FileInputStream fIn = new FileInputStream(myFile);

    BufferedReader inBuff = new BufferedReader(new InputStreamReader(fIn));
    String line = inBuff.readLine();
    int i = 0;
    ArrayList<List<String>> matrice_full = new ArrayList<List<String>>();
    while (line != null) {
        matrice_full.add(new ArrayList<String>());
        String[] tokens = line.split(";");

        String decode = tokens[1];
        decode = new String(Base64.decode(decode, Base64.DEFAULT));

        matrice_full.get(i).add(tokens[0]);
        matrice_full.get(i).add(tokens[1]);
        matrice_full.get(i).add(tokens[2]);
        line = inBuff.readLine();
        i++;
    }
    inBuff.close();
} 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:27:02.557

您的代码中有几个错误。

首先对您的代码有几点说明：

1.  在此处发布时，附加[SSCCE](http://sscce.org/)有助于其他人调试您的代码。这不是 SSCEE，因为它不能编译。它缺少几个定义的变量，所以你必须猜出你的真正意思。此外，您在代码中粘贴了关闭评论标记：`*/`但没有一个开始评论标记。
2.  除非您真的知道自己在做什么，否则捕获并仅抑制异常（例如在`read`方法中的 catch-block 中）*确实是个坏主意。*它大部分时间所做的就是向您隐藏潜在的问题。至少写一个异常的stacktrace是一个`catch`块。
3.  为什么不直接调试它，检查输出到目标文件的确切内容？您应该学习如何做到这一点，因为这将加快您的开发过程，尤其是对于具有难以发现的问题的大型项目。

回到解决方案：

1.  运行程序。它抛出一个异常：

    ```
    02-01 17:18:58.171: E/AndroidRuntime(24417): Caused by: java.lang.ArrayIndexOutOfBoundsException 
    ```

    由此处的行引起：

    ```
    matrice_full.get(i).add(tokens[2]); 
    ```

    检查变量`tokens`表明它具有`2`元素，*而不是`3`*.

2.  因此，让我们打开该`write`方法生成的文件。这样做会显示此输出：

    ```
    here it comes;aHR0cDovL2dvb2dsZS5mcg==
    ;done
    here it comes;aHR0cDovL2dvb2dsZS5mcg==
    ;done
    here it comes;aHR0cDovL2dvb2dsZS5mcg==
    ;done 
    ```

    注意这里的换行。这是因为`Base64.encodeToString()`在编码字符串的末尾附加了额外的换行符。要生成单行，而不需要额外的换行符，请添加`Base64.NO_WRAP`为第二个参数，如下所示：

    ```
    test = Base64.encodeToString(test.getBytes(), Base64.NO_WRAP); 
    ```

    请注意，您必须删除之前创建的文件，因为它具有不正确的换行符。

3.  再次运行代码。它现在创建一个具有正确内容的文件：

    ```
    here it comes;aHR0cDovL2dvb2dsZS5mcg==;done
    here it comes;aHR0cDovL2dvb2dsZS5mcg==;done 
    ```

4.  打印`matrice_full`now 的输出给出：

    ```
    [
        [here it comes, aHR0cDovL2dvb2dsZS5mcg==, done],
        [here it comes, aHR0cDovL2dvb2dsZS5mcg==, done]
    ] 
    ```

    请注意，您没有`decode`对代码中的变量值做任何事情，因此第二个元素是从文件中读取的该值的 Base64 表示。

# php - Magento 设置新的属性值

> ID：14649783
> 
> 赞同：2
> 
> 时间：2013-02-01T15:38:00.373
> 
> 标签：php, magento

我为所有产品创建了一个 textarea 类型的新 IMEI 属性，如图所示。谁能指出一个函数来更新它的值。我有如下代码。

$this 属于 Mage_Sales_Model_Order。

```
 foreach ($this->getAllItems() as $item) {

                 $item->setImei('123');

             $item->save();
             echo $item->getImei();
    } 
```

我从最后一条语句中得到 123，但是当我从管理员查看时。它在那里没有改变。属性和值也将存储在哪个表中，所以我可以从那里调试。

![在此处输入图像描述](../Images/623a3684b3698ecbdc547aeec0f8f869.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:47:23.350

`$this->getAllItems()`这是什么课`Mage_Catalog_Model_Product`？

如果不是`Mage_Catalog_Model_Product`，则按 id 加载产品并保存产品

```
foreach ($this->getAllItems() as $item) {
     $product = Mage::getModel('catalog/product')->load($item->getId() or $item->getProductId())
     $product->setImei($product->getImei() . '123');

     $product->save();   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:46:58.767

文本类型的目录产品属性的值存储在表中`catalog_product_entity_text`。SQL将是

```
select * from catalog_product_entity_text where attribute_id = {insert your attribute id} and entity_id = {insert your product id} 
```

该查询将返回系统中每个商店视图的结果。

您看不到后端属性更改的原因可能是因为新值是为与后端加载的不同的网站/商店设置的。

假设 $item 的类型为 Mage_Catalog_Model_Product，您已经在使用正确的方法来设置属性值：

```
$item->setImei('123');
$item->save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T11:06:49.137

继承人如何以不同的方式进行操作：（颜色 = 属性名称，红色 = 属性值 id）

开始假设您已经有 $product 可用。

```
$attr = $product->getResource()->getAttribute('color');

            if ($attr->usesSource()) {

               $avid = $attr->getSource()->getOptionId('red');

               $product->setData('color', $avid);
               $product->save();
            } 
```

# bash - 如何将列标题添加到 csv 文件

> ID：14649789
> 
> 赞同：0
> 
> 时间：2013-02-01T15:38:23.417
> 
> 标签：bash, shell, unix, csv

我正在编写不同服务器上的监控脚本。

我的要求是每 30 分钟从两台服务器收集一次日期，合并数据并通过邮件发送。

现在，我卡住的地方是将数据获取到 csv 文件时，我需要添加我无法执行的列标题。

srv1 上的代码片段

```
#!/bin/bash 

EAI=`netstat | grep 16001 | wc -l` 
Date=`date` 
DM=`psme | grep -i DM_EAI | wc -l`        

while true; do
     echo $Date $EAI
     sleep 1800 done  > eai_js_srv1.csv   
while true; do
     echo $Date $DM
     sleep 1800 done  > dm_eai_srv1.csv 
```

srv2 上的代码片段

```
#!/bin/bash  
EAI=`netstat | grep 16001 | wc -l`  
Date=`date`  
DM=`psme | grep -i DM_EAI | wc -l`   

while true; 
    do echo $Date $DM sleep 1800 
done > eai_js_srv2.csv   

while true; 
    do echo $Date $EAI sleep 1800 
done > dm_eai_srv2.csv 
```

在此之后，我组合了来自 2 个服务器的文件，如下所示：

```
join -a1 -a2 eai_js_srv1.csv eai_js_srv2.csv > eai_js_counts.csv  
join -a1 -a2 dm_eai_srv1.csv dm_eai_srv2.csv > dm_eai_counts.csv 
```

由于我使用 while 循环，所以数据将每 30 分钟附加到同一个文件，所以现在我需要所需的输出为：

eai_js_counts.csv：

```
Timestamp                           BRM Servers 
                                    611       610   
1/28/2013 02:00 AM PST              176       99   
1/28/2013 06:00 AM PST              150       115 
```

dm_eai_counts.csv：

```
Timestamp                           BRM Servers 
                                    611       610  
1/28/2013 02:00 AM PST              4         5  
1/28/2013 06:00 AM PST              4         5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:08:08.280

```
#!/bin/bash  

F=eai_js_srv2.csv
D=dm_eai_srv2.csv
cat > $F << EOF # Write a header to the file $F
Timestamp                           BRM Servers 
                                    611       610
EOF

cat > $D << EOF # Write a header to the file $D
Timestamp                           BRM Servers 
                                    611       610
EOF

# Write data every 1800 seconds.  
while sleep 1800; do
    exec >> $F  # Direct output to file $F
    date | tr '\n' ' '
    netstat | grep 16001 | wc -l
    exec >> $D # Direct output to $D
    date | tr '\n' ' '  
    psme | grep -i DM_EAI | wc -l
done 
```

# php - 如何仅从类别列表中删除可配置产品

> ID：14649796
> 
> 赞同：1
> 
> 时间：2013-02-01T15:39:00.297
> 
> 标签：php, magento, catalog

我只需要在类别页面中显示简单的产品，但我无法将“不可见”设置为可配置项，因为我需要可配置项中的活动产品页面。

我发现这段代码从清单中删除了可配置项：

```
 $_productCollection=$this->getLoadedProductCollection();
  $_productCollection = clone $this->getLoadedProductCollection();
  $_productCollection->clear()
                     ->addAttributeToFilter('type_id', 'simple')
                     ->load();

  $_helper = $this->helper('catalog/output'); 
```

它有效，但是，在分层导航中，可配置产品仍在计数。它就像“颜色：红色（2）”，但我只有 1 个红色（简单）。如何完全删除可配置产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:07:15.287

分层导航使用单独加载的集合对象。

确保导航过滤器旁边的正确计数的一种可能方法是覆盖模型`Mage_Catalog_Model_Layer`并将过滤器添加到其功能`Mage_Catalog_Model_Layer::prepareProductCollection`

```
public function prepareProductCollection($collection)
    {
        $collection
            ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
            ->addMinimalPrice()
            ->addFinalPrice()
            ->addTaxPercents()
            ->addUrlRewrite($this->getCurrentCategory()->getId())
            ->addAttributeToFilter('type_id', 'simple');

        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($collection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection);

        return $this;
    } 
```

为此，请在**本地**代码池中创建一个模块。在`config.xml`文件中将以下节点添加到`global`节点中

```
<models>
        <catalog>
            <rewrite>
                <layer>YourPackage_YourModule_Model_Rewrite_Layer</layer>
            </rewrite>
        </catalog>
</models> 
```

在您的模块中，在文件夹“模型”下添加一个目录“重写”并`Layer.php`在其中创建一个文件。在创建的文件中`Model/Rewrite/Layer.php`添加一个具有以下定义的类：

```
class YourPackage_YourModule_Model_Rewrite_Layer extends Mage_Catalog_Model_Layer {
} 
```

将上面的函数添加到这个类中，清除缓存。

# html - 用于标记的“lang”属性是什么？

> ID：14649798
> 
> 赞同：37
> 
> 时间：2013-02-01T15:39:02.340
> 
> 标签：html

在 HTML 中，最好有一个`lang`属性`<html>`，例如`<html lang="en">`.

这有什么用？

如果这是用于翻译，即使语言设置为英文并且文档中的所有中文文本*谷歌翻译*都会将其检测为中文，而不是英文*（这意味着谷歌会忽略该`lang`属性）*。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-01T15:40:54.270

我从[W3C](http://www.w3.org/International/questions/qa-html-language-declarations)引用这个：

> [**在 HTML 中声明语言**](http://www.w3.org/International/questions/qa-html-language-declarations)
> 
> 始终使用`html`标签上的语言属性来声明页面中文本的默认语言。当页面包含另一种语言的内容时，将语言属性添加到围绕该内容的元素。
> 
> `lang`对作为 HTML 的页面使用该属性，`xml:lang`对作为 XML 的页面使用该属性。对于 XHTML 1.x 和 HTML5 多语言文档，请一起使用。
> 
> 使用*[IANA 语言子标签注册表](http://www.iana.org/assignments/language-subtag-registry)*中的语言标签。

还有一个很好的阅读是*[为什么使用语言属性？](http://www.w3.org/International/questions/qa-lang-why.en)*.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-01T15:41:47.430

你问“这有什么用”。

> “该`<lang=>`属性可用于声明网页或网页的一部分的语言。这是为了协助搜索引擎蜘蛛、页面格式化和屏幕阅读器技术”

来源：http://symbolcodes.tlt.psu.edu/web/tips/langtag.html（[Wayback Machine 链接](https://web.archive.org/web/20161122070120/http://symbolcodes.tlt.psu.edu/web/tips/langtag.html)）

没有提到翻译——但搜索引擎蜘蛛通常不想“用错误的语言”解析文档——它的索引文件会增长（很多新词），结果对用户没有用（谁无法阅读该语言，以及谁使用了错误的搜索词）。

智能翻译技术（如上面提到的谷歌）的出现意味着一些搜索引擎可以看到一种语言的页面，翻译它，并找出搜索“cow”的人可能对这个提到“vache”的页面感兴趣“并且有`<lang="fr">`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-19T21:05:00.593

该`lang`属性告诉客户端文档（或文档的一部分）是用什么语言编写的。这对于任何关心语言的软件都很有用。

一个关键用途是可访问性。[WCAG](https://www.w3.org/WAI/WCAG21/Understanding/language-of-page.html)中提到：

> 此成功标准有助于：
> 
> *   使用屏幕阅读器或其他将文本转换为合成语音技术的人；
> *   难以流畅准确地阅读书面材料的人，例如识别字符和字母或解码单词；
> *   使用文字转语音软件的有一定认知、语言和学习障碍的人
> *   依赖字幕同步媒体的人。

[Adrian Roselli](https://adrianroselli.com/2015/01/on-use-of-lang-attribute.html)描述了一些好处：

> **连字符**
> 
> 通过使用 lang，您可以在（现代）浏览器中获得连字符支持的好处，否则您将无法获得（假设您在 CSS 中使用连字符：auto）。
> 
> **可访问性**
> 
> 至少，语言对屏幕阅读器用户来说是一个好处，尤其是当您的用户没有与您的网站相同的主要语言时。当页面被读出时，它允许正确的发音和变形。

…以及引用 WCAG 并指向[W3C 的这份文档，](https://www.w3.org/International/questions/qa-lang-why)其中列出了一些好处，例如能够编写 CSS 样式元素基于它们所用的语言（因此不同的字体可以用于不同的语言），自动选择字体为一种语言提供正确的字形版本，帮助搜索引擎、拼写检查和翻译工具，帮助语音合成器和盲文翻译，以及自定义脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T16:47:40.233

据我所知，对于单语言网站（希望您能推测出它对多语言网站的实用性），唯一真正、实际、切实的用途是它使“[连字符](http://w3.org/tr/css-text-3/#hyphens-property)”CSS 属性按预期工作。 . 这不是很多，但比没有更多。（不过，恐怕我还没有在浏览器中实际测试过这个，这是我们都应该做的事情*来确定*事情。）

通过：[http](http://blog.adrianroselli.com/2015/01/on-use-of-lang-attribute.html) ://blog.adrianroselli.com/2015/01/on-use-of-lang-attribute.html （这也充满了使用它的不相关的“理由”，除了提到的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-01T21:53:01.613

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-06-15T08:32:21.517

`lang`和自定义属性的区别在于`lang`继承，因此即使是具有属性的元素的子元素`lang=en`也可以使用选择器选择`div:lang(en){}`。

# c# - 将 UI 组件动态添加到我的 Winform

> ID：14649799
> 
> 赞同：1
> 
> 时间：2013-02-01T15:39:11.030
> 
> 标签：c#, winforms

我正在尝试动态创建组件，所以，我知道如何制作，但是，我怎样才能动态访问这个组件？

例如：

```
 public Form1
    {
        Label label1 = new Label();
        label1.AutoSize = true;
        label1.Location = new System.Drawing.Point(e.X, e.Y);
        label1.Name = string.Format("label{0}", labelsCount.ToString());
        label1.Size = new System.Drawing.Size(35, 13);
        label1.TabIndex = 2;
        label1.Text = string.Format("Label -> {0}", labelsCount.ToString());
        label1.Click += new System.EventHandler(this.label1_Click);
        this.Controls.Add(label1);
        label1.BringToFront();
        label1.Show();
        labelsCount++;
    } 
```

当我点击标签时，我想获取标签的信息（如位置、文本和名称）

我怎么能做到这一点？或者，最好的方法是什么？

而且，要根据面板的位置访问组件，在表单内部，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:41:07.553

事件的发送者是您的标签。只需将发件人对象转换为`Label`类型：

```
void label1_Click(object sender, EventArgs e)
{
    Label label = (Label)sender;
    // use
    // label.Name
    // label.Location
} 
```

# json - 使用 Java 的 Play 框架中的动作组合

> ID：14649803
> 
> 赞同：1
> 
> 时间：2013-02-01T15:39:22.923
> 
> 标签：json, security, playframework-2.0

我正在为 Play 开发一个具有动作组合的安全实现。

出于安全原因，在 JSON 请求负载中发送了一个访问令牌，而不是在请求的标头中。我要做的是，在一个动作（SecureAction）中提取令牌并继续下一个动作......因为可以修改Http.Context中的请求吗？一些代码..

```
@With(SecureAction.class)
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD})
@Inherited
@Documented
public @interface Secured {
    //TODO ver parametros de acceso ..... al metodo

}

public class SecureAction extends Action.Simple {

    @Override
    public Result call(Http.Context ctx) throws Throwable {
        //TODO extract token of request "ctx.request().body()"
        //TODO change request with new body witout token and delegate to the next action
        return delegate.call(ctx);
    }
 }

 @actions.security.Secured
 public static Result addAccount() {

     Form<Account> f = form(Account.class).bindFromRequest();
        if (f.hasErrors()) {
            return badRequest();
        }

        .....
 } 
```

问候！！！！

# c# - 在 ASP.NET MVC 中处理错误的布尔数据

> ID：14649808
> 
> 赞同：2
> 
> 时间：2013-02-01T15:39:42.677
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个 MVP 应用程序，它使用 EntityFramework 从 SQL DB 读取数据。该数据是从外部 CMS 网站数据库复制的，因此数据并不总是可靠的。

我读到的字段之一是 SQL 中的“位”数据类型，并且是 1 或 0，并且 ASP.NET MVC 希望它作为布尔值，否则我会收到关于将布尔值转换为 int 的错误。

问题是有时数据库中的位值可能为 NULL，这会使我的 MVC 应用程序崩溃。我无法检查 NULL，因为我收到布尔数据类型只能为真或假的错误。

### 例子

**模型**

```
namespace Foo.Models
{
    [Table("provider")]
    public class Bar
    {
        //can't check for null here, getter and setter only allow boolean
        public Boolean FooBar { get; set; }
    }
} 
```

**控制器**

```
namespace Foo.Controllers
{
    public ActionResult BarList()
    {
         //Can't check for null here, because if(Boolean == null) will always evaluate to false
         List<Bar> bars = db.Bar.ToList();
         return View(bars);
    }
} 
```

如果 FooBar 曾经为 NULL，则会在视图中抛出一个错误，即我不能在布尔值中包含 NULL。我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:41:43.880

你可以让你的 boolean `NULLABLE`。这意味着您的 bool 可以有一个值，也可以没有：

`public Boolean? FooBar { get; set; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:43:08.457

你可以我们`Nullable<T`>。 [可空的](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

```
public Boolean? FooBar { get; set; } 
```

> Nullable 结构的两个基本成员是 HasValue 和 Value 属性。如果 Nullable 对象的 HasValue 属性为 true，则可以使用 Value 属性访问该对象的值。如果 HasValue 属性为 false，则对象的值未定义，访问 Value 属性的尝试会引发 InvalidOperationException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:43:56.493

您可以使用泛型[`Nullable<bool>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)（也可以表示为`bool?`）：

```
Nullable<bool> nullableBool; 
```

然后按如下方式使用它：

```
bool realBool = (nullableBool.HasValue && nullableBool);

// or

if (nullableBool == true) { ... } // true
else { ... } // false or null 
```

# matlab - matlab 2012b 的类是否向后兼容？

> ID：14649810
> 
> 赞同：0
> 
> 时间：2013-02-01T15:39:45.607
> 
> 标签：matlab, matlab-class

我刚刚发现 Matlab 已经实现了类，但是我找不到任何关于这个功能存在多长时间的信息。有谁知道由定义的类`classdef`是否向后兼容旧版本的matlab？

如果有，回溯多远？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:45:51.857

看起来它始于 2008a：

[http://www.mathworks.com/company/newsletters/articles/introduction-to-object-oriented-programming-in-matlab.html](http://www.mathworks.com/company/newsletters/articles/introduction-to-object-oriented-programming-in-matlab.html)

并且

[http://www.cs.ubc.ca/~murphyk/Software/matlabTutorial/html/objectOriented.html](http://www.cs.ubc.ca/~murphyk/Software/matlabTutorial/html/objectOriented.html)

# c# - DocumentViewer WPF 控件未加载

> ID：14649813
> 
> 赞同：3
> 
> 时间：2013-02-01T15:39:55.160
> 
> 标签：c#, .net, wpf-controls

似乎 DocumentViewer 控件可能不喜欢 Windows 8。只需将它放在表单上（所有默认值，而不是对其设置的数据或任何东西，它甚至还没有完成 InitializeComponent）我收到此错误：

**检测到绑定失败**

> 显示名称为“PresentationUI.Aero2”的程序集未能在 ID 为 1 的 AppDomain 的“加载”绑定上下文中加载。失败的原因是：System.IO.FileNotFoundException：无法加载文件或程序集“PresentationUI.Aero2” , Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。

如果我摆脱控制，问题就会消失。奇怪的是，设计师完全没有问题。

我尝试添加对名称中包含 Aero2 的唯一框架程序集的引用，但什么也没做。并且在谷歌的任何地方都没有提到这个错误。我正在尝试组装一个文档分页器，我不得不使用 pdf 打印机来解决这个问题，但我最终需要一个工作查看器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T04:52:51.213

我在 wpf 4.5 解决方案中遇到了同样的问题。

我最终做的是：

1.  创建一个新的空白解决方案
2.  然后将现有项目从“旧”解决方案添加到新解决方案。（对我来说，我的解决方案中有 5 个项目，所以我必须全部添加）。
3.  然后我构建并运行了新的解决方案。

这解决了错误，并且在我的任何项目中都没有对 Aero2 的引用。

我不知道为什么这会解决它，但我很高兴它做到了。

编辑：

> 似乎 .suo 文件是这一切的原因。我遇到过这几次 - 制作一个新项目不起作用，但新的解决方案有效 - 最后我意识到（感谢下面的评论）它取决于 .suo 文件。删除后它工作正常。

# ios - FMDB & SQLCipher 未加密

> ID：14649814
> 
> 赞同：3
> 
> 时间：2013-02-01T15:40:02.860
> 
> 标签：ios, fmdb, sqlcipher

在 Xcode 中，我试图让 FMDB 使用 SQLCipher 来加密数据库。在我的项目中，我已经有一个 SQLCipher 的编译版本，我已经证明它可以通过 sqlite3 调用工作。我有一个创建数据库和 1 个表然后插入一行的单元测试。除了数据库仍未加密外，一切都使用 FMDB。

```
-(id)initWithDatabaseFilename:(NSString*)filename{
NSString *databasePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]
                          stringByAppendingPathComponent: filename];

self.databasePath = databasePath;
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:databasePath]) {
    database = [FMDatabase databaseWithPath:databasePath];
    [database setLogsErrors:YES];
    [database setTraceExecution:NO];
    BOOL keyCheck = [database setKey:@"B!GSecret"];
    NSLog(@"Database is encrypted: %d",keyCheck);
    NSLog(@"database created");
} else {
    NSLog(@"Didnt need to create database");
}
   [self createTable];

return self; 
```

}

```
-(void)createTable{

BOOL tableExists = [self.database tableExists:kTASKTableName];

if(!tableExists){
    [database open];
    [database executeUpdate:@"CREATE TABLE TEST(TEST_PK integer primary key autoincrement, TITLE text, OTHERTITLE text, TESTVAL text, COMPLETED integer, CREATION_DATE double)"];

    [database close];
} 
```

}

```
-(BOOL) addTasks:(NSArray*) tasks{
BOOL insertSuccess = NO;

if([self.databasePath isEqualToString:@""]){
    NSLog(@"Database has not yet been initialized");
}
[database open]; 
for(TESTOBJ *to in tasks){

    [database executeUpdate:@"insert into TEST(TITLE, OTHERTITLE, TESTVAL) VALUES (?,?,?)",
     to.title,to.otherTitle,to.testVal,nil];
}
[database close];

return insertSuccess; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:45:51.360

通过添加对问题进​​行排序

```
[database setKey:@"B!GSecret"]; 
```

在每个数据库打开语句之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T01:07:27.983

由于这是谷歌通常带人去的地方，如果有人在加密已经存在的未加密数据库时遇到问题，经过痛苦的研究，我能够弄清楚如何做到这一点并创建了一个教程：

[http://www.guilmo.com/fmdb-with-sqlcipher-tutorial/](http://www.guilmo.com/fmdb-with-sqlcipher-tutorial/)

但最重要的部分是，打开您现有的数据库并附加一个新的加密数据库。然后在您的 FMDB 连接中设置密钥。

**SQLCipher - 加密数据库**

```
// Import sqlite3.h in your AppDelegate
#import <sqlite3.h>

// Set the new encrypted database path to be in the Documents Folder
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDir = [documentPaths objectAtIndex:0];
NSString *ecDB = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"];

// SQL Query. NOTE THAT DATABASE IS THE FULL PATH NOT ONLY THE NAME
const char* sqlQ = [[NSString stringWithFormat:@"ATTACH DATABASE '%@' AS encrypted KEY 'secretKey';",ecDB] UTF8String];

sqlite3 *unencrypted_DB;    
if (sqlite3_open([self.databasePath UTF8String], &unencrypted_DB) == SQLITE_OK) {

    // Attach empty encrypted database to unencrypted database
    sqlite3_exec(unencrypted_DB, sqlQ, NULL, NULL, NULL);

    // export database
    sqlite3_exec(unencrypted_DB, "SELECT sqlcipher_export('encrypted');", NULL, NULL, NULL);

    // Detach encrypted database
    sqlite3_exec(unencrypted_DB, "DETACH DATABASE encrypted;", NULL, NULL, NULL);

    sqlite3_close(unencrypted_DB);
}
else {
    sqlite3_close(unencrypted_DB);
    NSAssert1(NO, @"Failed to open database with message '%s'.", sqlite3_errmsg(unencrypted_DB));
}

self.databasePath = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"]; 
```

请注意，我们在 SQL Query 中设置了 2 个参数，即 DATABASE 和 KEY。DATABASE 应该是您要创建的加密数据库的**完整路径，在本例中为字符串 ecDB，而 KEY 参数是将用于加密您的数据库的密钥，因此请选择一个强大的**

现在在您的 FMDB 函数上，每次打开数据库后调用**[db setKey:@"strongKey"] 。**

```
// FMDatabase Example
FMDatabase *db = [FMDatabase databaseWithPath:[self getDatabasePath]];
[db open];
[db setKey:@"secretKey"];

// FMDatabaseQueue Exmple
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:[self getDatabasePath]];

[queue inDatabase:^(FMDatabase *db) {
    [db setKey:@"secretKey"];
    ...
}]; 
```

如果您有任何问题，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T21:53:22.327

除了来自@gmogames 的出色回答之外，请参见下面的 Swift 示例，该示例展示了如何从头开始创建加密的 SQLCipher 数据库，而无需转换现有的未加密数据库。

诀窍是使用适当的*sqlite3_open*（或*sqlite3_open_v2*）命令创建文件，使用 sqlite3_key 设置密钥*并*在关闭数据库之前填充数据库（例如添加一个表就足够了）。如果在关闭数据库之前没有创建表或内容，则文件将为空（大小为 0）且未加密。

然后，您可以使用 FMDB 打开新加密的数据库并使用*customerDB.setKey(secretKey)*设置密钥。

一个常见的错误是尝试使用 FMDB 从头开始​​创建加密数据库并使用*customerDB.setKey(secretKey)*设置其密钥。此类程序适用于打开现有的加密 SQLCipher 数据库，但不适用于创建一个。SQLCipher 加密数据库只能使用如下 sqlite3 命令创建，然后使用 FMDB 打开。

```
var rc: Int32
var db: OpaquePointer? = nil
var databasePath: String = ""    // Initialize to your database path
var secretKey: String = "Thisisasecretkey"

rc = sqlite3_open_v2((databasePath as NSString).utf8String, &db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_FULLMUTEX, nil)
if (rc != SQLITE_OK) {
    let errmsg = String(cString: sqlite3_errmsg(db))
    NSLog("Error opening database: \(errmsg)")
    return
}
rc = sqlite3_key(db, secretKey, Int32(secretKey.utf8.count))
if (rc != SQLITE_OK) {
    let errmsg = String(cString: sqlite3_errmsg(db))
    NSLog("Error setting key: \(errmsg)")
}
// create a table to populate database and ensure it is saved in encrypted form
let sql = "CREATE TABLE IF NOT EXISTS TEST_TABLE (ID INTEGER PRIMARY KEY AUTOINCREMENT, INFO_TEXT TEXT default '');"
if (sqlite3_exec(db, sql, nil, nil, nil) != SQLITE_OK) {
   print("error")
}
sqlite3_close(db)
print("encrypted db created")
// Now, we open the newly created encrypted database
customerDB = FMDatabase(path: databasePath)
if customerDB.open() {
    // We set secret key
    customerDB.setKey(secretKey)
    // We perform needed operations on the database using FMDB requests
    // ...
} 
```

# bash - 使用 openssl s_client 静音 HTTP 标头

> ID：14649817
> 
> 赞同：0
> 
> 时间：2013-02-01T15:40:14.963
> 
> 标签：bash, automation, openssl

我有一个单行 bash 命令，它通过 SSL 加密的 HTTPS 连接为我提供了一个 HTML 站点：

`echo "GET / HTTP/1.1\nHost: www.example.com\n\n" | openssl s_client -connect www.example.com:443 -quiet 2> /dev/null`

该站点正在加载，但带有 HTTP 标头，例如：

> HTTP/1.1 200 OK
> 日期：2013 年 2 月 1 日星期五 13:15:59 GMT
> 服务器：Apache/2.2.20 (Ubuntu)

和更多这样的。有了`2> /dev/null`我可以隐藏错误 SSL 证书的输出等等。我不想使用另一个脚本，因为 curl 不是我想做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:50:30.517

这是不可能的，因为它的性质`openssl s_client`为您提供了在连接端口后面运行的服务的直接和普通输出（在我的示例中为 443，来自我想在使用 SSL 的网络服务器上获取 / 的问题）。

`telnet`还会为您提供 HTTP 协议的纯输出，并向`curl`我显示没有标题和使用 HTTPS 但不允许向 Web 服务器发送自写命令的 HTML 站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:03:59.213

您可以使用 expect 命令与 openssl 进行交互。我不确定它会起作用，但值得一试。

# java - Java中的多级映射

> ID：14649819
> 
> 赞同：11
> 
> 时间：2013-02-01T15:40:21.467
> 
> 标签：java, tree

在 Java 中将值（“o”）保存在这样的树结构中的最佳方法是什么：

```
 obj1                 
                     /\
                    /  \
                   /    \
              obj2        obj3
              /\            /\
             /  \          /  \
            /    \        /    \
          obj4  obj5    obj6   obj7
          /\     /\     /\      /\
         /  \   /  \   /  \    /  \
        o8   oN... 
```

它看起来像一棵树，但我不需要任意深度。我宁愿需要强大的数据类型和预定义的好看的方法来处理最终结构。

我需要能够通过键获得某种值列表 - 就像我的图片一样。换句话说，结构不应该**以**任何方式变成平面的。

我需要`.get(obj3)`返回`{obj6, obj7}, .get(obj1) - {obj2, obj3}`。

现在我使用 Map ，但是膨胀这样的地图是丑陋的，因为我需要检查结构的每一层。看起来像那样（**数据**是地图）：

```
if(data.get(somedouble) == null) {
    Map<Integer, Data> inm = new TreeMap<>();
    inm.put(someint, obj);
    Map<Double, Map<Integer, Data>> m = new TreeMap<>();
    m.put(somedouble2, inm);
    data.put(somedouble, m);
}
else {
    if(data.get(somedouble).get(somedouble2) == null) {
        Map<Integer, Data> inm = new TreeMap<>();
        inm.put(someint, obj);
        data.get(somedouble).put(somedouble2, inm);
    }
    else
        data.get(somedouble).get(somedouble2).put(someint, obj);
} 
```

性能不是问题，但代码美感才是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:48:00.777

您可以使用您的特定密钥：

```
class MyKey {
    Double beta;
    Double yaw;
    int minute;

    public int hashCode() {
        /* Returns hash code from a combination of hash of the key members. */
    }

    @Override
    public boolean equals(Object obj) {
        /* Returns true if obj is a MyKey with same members. */
    }
} 
```

然后简单地说：

```
data.put(myKey, obj); 
```

这样，“多级检查”都隐藏在`MyKey.equals()`. 它保持客户端代码干净，关键复杂性在一个安全的地方。

### 需求更改后编辑：

如果在此之上，您希望能够从您的替身映射`beta`到您的对象，那么我仍然会保持这样的平面。

您真正想要的是为您的数据拥有多个“索引”，例如在数据库中，这样您就可以查询具有相同“beta”或“yaw”的对象。为此，最好的方法是使用多个 Map（实际上是 Multimap），每个“索引”一个。

使用[Guava 的 Multimap](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Multimap.html)：

```
ListMultimap<Double, Data> mapForBeta;
ListMultimap<Double, Data> mapForYaw; 
```

您可以将所有多图和`Map<MyKey, Data>`您的特定类。实际上最好的方法是子类`Map<MyKey, Data>`：

```
public class MyMap extends HashMap<MyKey, Data> {

    ListMultimap<Double, Data> mapForBeta;
    ListMultimap<Double, Data> mapForYaw;

    public Data put(MyKey key, Data value) {
        super.put(key, value);
        mapForBeta.add(key.beta, value);
        mapForYaw.add(key.yaw, value);
    };

    public List<Data> getFromBeta(Double beta) {
        return mapForBeta.get(beta);
    }

    public List<Data> getFromYaw(Double yaw) {
        return mapForYaw.get(yaw);
    }
} 
```

### 具有更好解决方案的新编辑：

实际上，这让我开始思考，我意识到您的地图的默认值确实存在问题，这就是您的代码有点混乱的原因。

您可以通过使用生成器创建基础地图的默认地图来解决此问题：

```
public class DefaultMap<K, V> extends TreeMap<K, V> {

    static abstract class Generator<V>{
        abstract V create();
    }

    final Generator<V> generator;

    DefaultMap(Generator<V> generator) {
        this.generator = generator;
    }

    @Override
    public V get(Object key) {
        V val = super.get(key);
        if (val == null) {
            val = generator.create();

            put((K)key, val);
        }

        return val;
    }
} 
```

现在您可以使用实用程序树类来存储所有数据：

```
public class MyTree {
  private final Map<Double, Map<Double, Map<Integer, Data>>> data;

  public MyTree() {
    data = new DefaultMap<>(new Generator<Map<Double, Map<Integer, Data>>>() {
      @Override
      Map<Double, Map<Integer, Data>> create() {
        return new DefaultMap<>(new Generator<Map<Integer, Data>>() {

          @Override
          Map<Integer, Data> create() {
            return new TreeMap<>();
          }

        });
      }
    });
  }

  void add(MyKey d, Data obj) {
    data.get(d.beta).get(d.yaw).put(d.minute, obj);
  }
} 
```

现在您可以使用 data.get(beta).get(yaw) 访问您的数据，并且您没有意大利面条代码来存储您的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:01:47.993

二叉树呢？

*节点.java*

```
public class Node {

    private Node leftChild;
    private Node rightChild;

    public Node(Node leftChild, Node rightChild) {
        this.leftChild = leftChild;
        this.rightChild = rightChild;
    }

    public boolean isLeaf() {
        return this instanceof Leaf;
    }

} 
```

*叶.java*

```
public class Leaf extends Node {

    private Data data;

    public Leaf(Data data) {
        super(null, null);
        this.data = data;
    }

} 
```

例如，如果要构建到以下树：

```
 root
          /\
         /  \
        /    \
   node1     node2
   /\           /\
  /  \         /  \
leaf1 leaf2  leaf3 leaf4 
```

利用：

```
Leaf leaf1 = new Leaf(new Data());
Leaf leaf2 = new Leaf(new Data());
Leaf leaf3 = new Leaf(new Data());
Leaf leaf4 = new Leaf(new Data());

Node node1 = new Node(leaf1, leaf2);
Node node2 = new Node(leaf3, leaf4);

Node root = new Node(node1, node2); 
```

# vim - 无论如何动态启用/禁用 Vim 中的突出显示？

> ID：14649823
> 
> 赞同：2
> 
> 时间：2013-02-01T15:40:30.670
> 
> 标签：vim, macvim

好的，所以基本上 Vim 突出显示搜索的方式让我不高兴。基本上你做一个搜索，然后你必须输入 /asdf 或在你的 vimrc 中有这样的快捷方式：

```
nn <silent> <leader><space> :noh<CR> 
```

这就是我所拥有的。但这仍然是太多的脑力劳动。基本上，当我进行搜索时，我希望启用高亮显示（就像现在一样），但如果我做的不是循环搜索（使用 n/N），那么我希望高亮显示关闭。这基本上是我的工作流程，所以我想知道我是否可以自动化它。此外，如果我搜索，请执行 n/N 以外的操作（应该关闭突出显示），然后再次按 n/N，它应该重新启用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:25:28.037

这很难。一个想法是

```
:autocmd CursorHold * call feedkeys(":noh\<CR>") 
```

（需要使用`feedkeys()`，因为`:nohlsearch`在函数和自动命令中无效。）每当您将光标暂停几秒钟时，这都会清除突出显示。您可以添加其他触发器，例如`InsertEnter`或`CursorHoldI`。

不起作用的是`CursorMoved`，因为搜索和`n`/`N`跳转也是如此。您需要重载这些命令，在跳转后存储光标位置，并修改 autocmd 以仅在位置不同时清除突出显示。

我做什么：我已经`Enter`映射到`:nohlsearch`；它既快速又容易到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:31:52.870

您可以使用以下方法打开或关闭它：

`:set hls`

或者

`:set nohls`

我已`F7`映射到`set hls!`：

```
noremap <F7>    :set hls!<CR> 
```

# mysql - 和 = MYSQL 的区别

> ID：14649825
> 
> 赞同：-4
> 
> 时间：2013-02-01T15:40:35.163
> 
> 标签：mysql, sql, database

> **可能重复：**
> [MYSQL OR vs IN 性能](https://stackoverflow.com/questions/782915/mysql-or-vs-in-performance)

我想知道有什么区别：

```
SELECT * FROM table WHERE cat = 'cat1' OR cat = 'cat2' OR cat = 'cat3' 
```

和：

```
SELECT * FROM table WHERE cat in ('cat1', 'cat2', 'cat3') 
```

有什么区别吗？当我尝试时，他们都给出了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:41:27.367

它们是相同的，只是使用列出所有语句`IN()`的速记版本。`OR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:41:28.170

`IN()`只是使语法更短，更容易阅读，尤其是当您有很多`OR`子句时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:44:09.787

还有一件事你可以很容易地做到，`IN`但你不能用`=`.

```
SELECT * 
FROM `table`
WHERE `column` IN (
    SELECT col_name
    FROM `table2` -- or the same table
    WHERE `some_column` = 5
) 
```

所以基本上你搜索另一个表的子集，这有时会派上用场。

**现实生活中的使用：**

*   您在另一个表中有一个可管理用户类型的列表（每个都有自己的权限），并且您希望强制用户类型实际存在。

# sql-server - 在 Group By Query 中包含缺失的周数

> ID：14649827
> 
> 赞同：0
> 
> 时间：2013-02-01T15:40:40.607
> 
> 标签：sql-server, group-by

已经有类似的问题[，](https://stackoverflow.com/questions/11479918/include-missing-months-in-group-by-query)但我似乎无法让它为我工作。也许是因为我有几张桌子要加入。

无论哪种方式，这是我的查询：

```
 DECLARE     @StartDate datetime2, @EndDate datetime2;
SET     @StartDate = DateAdd(day, -7, GETDATE());
SET     @EndDate = DateAdd(year, 1, GETDATE());

WITH    Weeks AS
(
        SELECT  @StartDate AS WeekDate
        UNION   ALL
        SELECT  DATEADD(day, 7, WeekDate)
        FROM    Weeks
        WHERE   DATEADD(day, 7, WeekDate) <= @EndDate
)
SELECT      WeekDate AS WeekOfSRUs
            ,ISNULL(COUNT(i.incident_id), 0) AS SRUCount
            --,i.incident_id
            ,ic.inc_cat_sc
FROM        Weeks
            ,incident i
            ,JPTSYS_WEB_CUST_PROP_CONT
            ,JPTSYS_WEB_CUST_PROP
            ,JPTSYS_WEB_LKUP_DATA
            ,JPTSYS_WEB_LKUP
            ,JPTSYS_WEB_CUST_PROP_MULT
            ,inc_cat ic
WHERE       (i.INCIDENT_ID=JPTSYS_WEB_CUST_PROP_CONT.ENTITY_ID AND
            JPTSYS_WEB_CUST_PROP_CONT.JPTSYS_WEB_CUST_PROP_ID=JPTSYS_WEB_CUST_PROP.JPTSYS_WEB_CUST_PROP_ID AND  
            JPTSYS_WEB_CUST_PROP_CONT.SINGLE_SEL_VAL_ID=JPTSYS_WEB_LKUP_DATA.JPTSYS_WEB_LKUP_DATA_ID AND
            JPTSYS_WEB_CUST_PROP.JPTSYS_WEB_LKUP_ID=JPTSYS_WEB_LKUP.JPTSYS_WEB_LKUP_ID AND
            JPTSYS_WEB_LKUP_DATA.JPTSYS_WEB_LKUP_DATA_ID=JPTSYS_WEB_CUST_PROP_MULT.JPTSYS_WEB_LKUP_DATA_ID AND
            JPTSYS_WEB_CUST_PROP.JPTSYS_WEB_CUST_PROP_ID =59) AND
            (JPTSYS_WEB_CUST_PROP_CONT.DATE_VAL >= WeekDate AND JPTSYS_WEB_CUST_PROP_CONT.DATE_VAL < DATEADD(day, 7, WeekDate)) AND
            (inc_cat_sc = 'R1A DESKTOPMIN' OR inc_cat_sc = 'R1B DESKTOPMAJ' OR inc_cat_sc = 'R8A CRTPATCH-DT') AND i.inc_cat_id = ic.inc_cat_id
GROUP BY    ic.inc_cat_sc, Weeks.WeekDate
ORDER BY    Weeks.WeekDate 
```

结果：

```
WeekOfSRUs                  SRUCount   inc_cat_sc
2013-01-25 10:06:57.2370000    4       R1A DESKTOPMIN
2013-01-25 10:06:57.2370000    1       R1B DESKTOPMAJ
2013-02-01 10:06:57.2370000    4       R1A DESKTOPMIN
2013-02-08 10:06:57.2370000    2       R1A DESKTOPMIN
2013-02-08 10:06:57.2370000    1       R1B DESKTOPMAJ
2013-02-15 10:06:57.2370000    3       R1A DESKTOPMIN
2013-02-15 10:06:57.2370000    2       R1B DESKTOPMAJ
2013-02-15 10:06:57.2370000    2       R8A CRTPATCH-DT
2013-02-22 10:06:57.2370000    3       R1A DESKTOPMIN
2013-02-22 10:06:57.2370000    4       R1B DESKTOPMAJ
2013-03-01 10:06:57.2370000    5       R1A DESKTOPMIN
2013-03-08 10:06:57.2370000    4       R1A DESKTOPMIN
2013-03-15 10:06:57.2370000    2       R8A CRTPATCH-DT
2013-03-22 10:06:57.2370000    1       R1A DESKTOPMIN
2013-03-29 10:06:57.2370000    1       R1B DESKTOPMAJ
2013-05-03 10:06:57.2370000    1       R1B DESKTOPMAJ
2013-05-10 10:06:57.2370000    1       R1A DESKTOPMIN 
```

至于引用的所有表，这是我们被迫使用的合同产品，无法控制数据库设计/架构。我被告知这些连接对于获取我正在寻找的特定字段是必要的，因为它是安装后添加的自定义字段。

从我上面发布的链接中，我修改了对`LEFT JOIN`所有这些表的查询，但我仍然得到相同的结果。

我对中级/高级 SQL 相当陌生，所以请善待。如果我遗漏了任何信息，我很乐意添加它以使其正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:09:18.313

您能否澄清一下您期望的结果，即您每周对每个inc_cat_sc 的期望是什么？如果是这样，您将需要交叉加入您正在查看的日期期间的所有周，并使用 where 子句来产生计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:32:35.280

您必须使用“inc_cat ic”进行外部连接

如果您希望每周为每个“ic.inc_cat_sc”

包括计数（i.incident_id）是否为 0

尝试改变

```
AND i.inc_cat_id = ic.inc_cat_id 
```

为了

```
AND i.inc_cat_id =* ic.inc_cat_id 
```

inc_cat_sc 是 ic.inc_cat_sc 的一个列，对吗？

# c# - StringBuilder 每行写入的字符数

> ID：14649830
> 
> 赞同：1
> 
> 时间：2013-02-01T15:40:55.430
> 
> 标签：c#, stringbuilder, maxlength

您好，我创建了一些`C#`使用 .txt 文件写入的代码`StringBuilder` `object`，一切似乎都很好，但问题是我每行需要正好 200 个字符。例如，当程序在一行中设置 10 个字符的字符串变量值（该值因字符数而异）时，该行必须包含 190 个空格。这是我拥有的代码示例：

```
if (File.Exists(DLFile))
{
  using (StreamWriter sw = new StreamWriter(DLFile))
    {
      StringBuilder stringBuilder = new StringBuilder();
      stringBuilder.Append("001" + partNumber + " ").AppendLine(); 
      String innerString = stringBuilder.ToString();
      sw.WriteLine(innerString);
      sw.Close();
    }
} 
```

有一个`variable`名为“partNumber”的字符串，其长度会有所不同。有时长度可以是 15 或 14 或 10，但这个长度和空格的总和可能是 200（精确数量）。谁能帮我这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T15:43:26.577

只需使用`PadRight`（或`PadLeft`如果合适的话），因为它旨在做到这一点。

```
sw.WriteLine(("001" + partNumber).PadRight(200)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:44:32.450

当然。只需看一下[String.format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法，并指定实现此目的的格式。

在您的情况下，这意味着执行以下操作：

```
string line = String.Format("{0,-200}", input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:53:34.190

使用带有 200 个空格的已定义字符串，然后执行如下所示的子字符串

```
string space200 = "                                                                                                                                                                                                                                                                                                                                                                                    ";
      if (File.Exists(DLFile))
      {
        using (StreamWriter sw = new StreamWriter(DLFile))
        {
          StringBuilder stringBuilder = new StringBuilder();
          stringBuilder.Append("001").Append(partNumber).Append(space200.Substring(stringBuilder.ToString().Length, space200.Length - stringBuilder.ToString().Length)).AppendLine();

          String innerString = stringBuilder.ToString();
          sw.WriteLine(innerString);
          sw.Close();
        }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:43:50.050

简单地计算然后[使用这个重载](http://msdn.microsoft.com/en-us/library/yxyxbz2e%28v=vs.80%29.aspx)怎么样？：

```
...

var h = "001" + partNumber;
stringBuilder.Append( h );

stringBuilder.Append( ' ', 200 - h.Length );

... 
```

为了使它（有点）更防错：

```
...

var h = "001" + partNumber;
stringBuilder.Append( h );

var a = 200 - h.Length;
if ( a > 0 )
{
    stringBuilder.Append( ' ', a );
}

... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:44:02.470

您可以使用[此字符串构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)来重复空格：

```
int whiteSpacesLength = 200 - partNumber.Length; // assuming partNumber is never > 200
string whiteSpaces = new String(' ', whiteSpacesLength);
string innerString = partNumber + whiteSpaces; 
```

[**演示**](http://ideone.com/JIWgA6)

（所以我认为没有理由在`StringBuilder`这里使用 a ）

# listbox - Wix 填充列表框

> ID：14649833
> 
> 赞同：0
> 
> 时间：2013-02-01T15:41:11.190
> 
> 标签：listbox, wix

我正在尝试用 CustomAction 填充 ListBox，但进展不顺利。我试图弄清楚`session.Database.Tables`但不知道如何开始。

我创建了一个这样的列表框

```
<Control Id="ListBox1" Type="ListBox" Sorted="no"  Indirect="no" Property="LISTBOXVALUESONE" X="10" Y="50" Width="150" Height="180">
      <ListBox Property="LISTBOXVALUESONE">
        <ListItem Text="ARGHH!" Value="1"/>
      </ListBox>
    </Control> 
```

但是我在详细日志中看不到该属性或有关表的任何内容，所以我想我必须在 customAction 中创建一个表并填充它？我`ARGHH!`在列表中看到我的所以它应该存在但我如何访问这些值？并添加新的？

在 C++ 中找到了更多示例和内容，但我想在 C# 中制作 CustomAction

编辑

```
Database db = session.Database;
string sqlInsertTemp = db.Tables["ListBox"].SqlInsertString + " TEMPORARY";
View view = db.OpenView(sqlInsertTemp );
view.Execute( new Record( new object[] { "LISTBOXVALUESONE", 2, "2", "One" } ));
view.Close(); 
```

多亏了克里斯托弗，我让它能够增加价值。

`db.Tables["ListBox"]`应该保持不变并命名类型而不是我教的 id 在这一行上`view.Execute( new Record( new object[] { "LISTBOXVALUESONE", 2, "2", "One" } ));` ，您放置您的列表框属性，然后放置我们插入的值“一”

两个“2”是我认为我们想要它的位置，我已经在我的“ARGHH！”1 上有一个测试值。所以我把新的放在2上，不知道细节但是......

我收到一个表更新错误，如果我在自定义操作中输入 2,1 或 1,2，则会出现一个重复值错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:13:18.033

大约 5 年前，我写了一篇博客文章，可能会对您有所帮助：

[DTF 将如何帮助我成为更好的 .NET 开发人员](http://blog.iswix.com/2008/05/how-dtf-is-going-to-help-me-become.html)

你要确保你构建的 MSI 有一个 ListBox 表，否则当它试图在运行时动态生成临时行时，SQL 将无法工作。如果 ListBox 元素不为您执行此操作，则 EnsureTable 元素将为您执行此操作。

实际的 C# 看起来像：

```
Database db = session.Database;
string sqlInsertTemp = db.Tables["ListBox"].SqlInsertString + " TEMPORARY";
View view = db.OpenView(sqlInsertTemp );
view.Execute( new Record( new object[] { "TESTPROP", 1, "1", "One" } ));
view.Close(); 
```

请注意，这是一个旧代码示例，并没有正确利用 using 语句和 IDisposable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T10:10:38.217

向列表框中添加一条记录：

```
private void AddRecordToListBox(string listBoxPropertyName, int index, string text, string value)
{
    View view = session.Database.OpenView("SELECT * FROM ListBox");
    view.Execute();

    Record record = session.Database.CreateRecord(4);

    record.SetString(1, listBoxPropertyName);
    record.SetInteger(2, index);
    record.SetString(3, value);
    record.SetString(4, text);

    view.Modify(ViewModifyMode.InsertTemporary, record);
    view.Close();
} 
```

填充列表框：

```
private void FillListBox()
{
    var dict = SomeDict();

    int index = 1;
    foreach (var element in dict)
    {
        AddRecordToListBox(ListBoxName, index, element.Key, element.Value);
        index++;
    }
} 
```

清除列表框

```
private void ClearListBox(string listBoxPropertyName)
{
    var command = String.Format("DELETE FROM ListBox WHERE ListBox.Property='{0}'", listBoxPropertyName);
    View view = session.Database.OpenView(command);
    view.Execute();
    view.Close();
} 
```

# c# - 在 LINQ 中使用字典键作为字段名

> ID：14649843
> 
> 赞同：0
> 
> 时间：2013-02-01T15:41:37.280
> 
> 标签：c#, linq

所以，我想在`C#`.

首先，我使用以下方式加载数据`LINQ`：

```
 var query = (from c in customer
                where c.id.Equals(customer_id)
                orderby c.id
                select c).FirstOrDefault(); 
```

然后我使`dictionary`包含数据库中的字段名称和标签。

```
 Dictionary<string, string> list = new Dictionary<string, string>();
            list.Add("name", "Full Name");
            list.Add("address", "Address");
            list.Add("phone", "Customer Phone");
            list.Add("email", "Customer Email"); 
```

基本上我想迭代整个`dictionary`并使用`key`作为字段名称标识符：

```
foreach (var pair in list)
            {
                graphic.DrawString(pair.Value, font, brush, startX, startY + offset);
                graphic.DrawString(":", font, brush, semicolonPos, startY + offset);
                graphic.DrawString(query.[pair.Key], font, brush, semicolonPos, startY + offset); // This is not working, any suggestion?
                offset += 40;
            } 
```

所以我的问题是，是否有可能有类似的东西`**query.[pair.Key]**`，或者你对这种情况有什么建议？

我基本上是一名`PHP`程序员，所以也许我的心态仍然在网络编程上：D。对不起，如果我的问题令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:51:47.740

```
foreach (var pair in list)
{
    graphic.DrawString(pair.Value, font, brush, startX, startY + offset);
    graphic.DrawString(":", font, brush, semicolonPos, startY + offset);  

    var pi=typeof(Customer).GetProperty(pair.key);
    var val= pi.GetValue(query,null);
    graphic.DrawString(val, font, brush, semicolonPos, startY + offset);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:46:49.987

您可以使用 pair.Key 而不是 query.[pair.Key]

```
 graphic.DrawString(pair.Key , font, brush, semicolonPos, startY + offset);query.[pair.Key] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:54:40.460

您尝试做的并不是最佳实践，因为它使用魔术字符串来尝试访问客户对象的属性值。您也没有任何关注点分离 - 视图与数据访问等混合在一起。

您尚未显示“客户”变量是什么类型，但理想情况下，您将拥有一个`Customer`类型，然后您的“视图”将以强类型方式访问属性。如果您描述您使用的 UI 技术，我可以添加一个示例。

# c++ - 三元运算符中的 Cout String 和 int

> ID：14649845
> 
> 赞同：0
> 
> 时间：2013-02-01T15:41:38.460
> 
> 标签：c++, string, int

我的`c++`代码中有一行写着：

```
cout<<(i%3==0 ? "Hello\n" : i) ;//where `i` is an integer. 
```

但我得到这个错误：

```
operands to ?: have different types 'const char*' and 'int 
```

如何修改代码（最少字符）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:43:22.373

丑陋的：

```
i%3==0 ? cout<< "Hello\n" : cout<<i; 
```

好的：

```
if ( i%3 == 0 )
   cout << "Hello\n";
else
   cout << i; 
```

您的版本不起作用，因为两边的表达式的结果类型`:`需要兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:44:39.523

如果两个备选方案的类型不兼容，则不能使用条件运算符。最清楚的是使用`if`：

```
if (i%3 == 0)
    cout << "Hello\n";
else
    cout << i; 
```

尽管在这种情况下您可以将数字转换为字符串：

```
cout << (i%3 == 0 ? "Hello\n" : std::to_string(i)); 
```

一般来说，你应该尽量提高清晰度而不是尽量减少字符；当您将来必须阅读代码时，您会感谢自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:10:29.957

```
std::cout << i % 3 == 0 ? "Hello" : std::to_string(i); 
```

但是，正如所有其他答案所说，您可能不应该这样做，因为它很快就会变成意大利面条代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:45:09.833

`operator<<`被重载，并且两个执行路径不使用相同的重载。因此，您不能`<<`在条件之外。

你想要的是

```
if (i%3 == 0) cout << "Hello\n"; else cout << i; 
```

这可以通过反转条件来缩短一点：

```
if (i%3) cout << i; else cout << "Hello\n"; 
```

并且使用三进制保存了更多字符：

```
(i%3)?(cout<<i):(cout<<"Hello\n"); 
```

# servicestack - Servicestack 如何让 jsonserviceclient 使用自定义身份验证

> ID：14649847
> 
> 赞同：2
> 
> 时间：2013-02-01T15:41:45.340
> 
> 标签：servicestack

查看 ServiceStack.UseCases 示例项目。在调用身份验证服务后，我正在尝试使用 jsonserviceclient 调用 HelloRequest 服务。无论我做什么，它似乎都失败并返回 Not Found 错误消息。有人知道我在做什么错吗？

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        var baseUrl = Request.Url.GetLeftPart(UriPartial.Authority) + "/api";
        var client = new JsonServiceClient(baseUrl);
        client.UserName = "admin";
        client.Password = "123";
        client.SetCredentials("admin", "123");
        client.AlwaysSendBasicAuthHeader = true;
        client.Send(new HelloRequest { Name = "Mike" });
    } 
```

服务器的服务配置如下

```
 public class AppHost : AppHostBase
{
    public AppHost() : base("Custom Authentication Example", typeof(AppHost).Assembly) { }

    public override void Configure(Container container)
    {
        // register storage for user sessions 
        container.Register<ICacheClient>(new MemoryCacheClient());

        // Register AuthFeature with custom user session and custom auth provider
        Plugins.Add(new AuthFeature(
            () => new CustomUserSession(), 
            new[] { new CustomCredentialsAuthProvider() }
        ));
    }
} 
```

我真正想要的是对我遇到的以下问题的一个很好的解决方案。我有一个具有现有用户数据库和自定义身份验证过程的现有系统。我现在正在尝试使用 servicestack 将系统的功能公开为 Web 服务。我使用沼泽标准网络表单进行编程，因此 MVC 示例对我来说效果不佳。我只是在为我的特定场景寻找最佳解决方案，我可以使用 .NET 中的大多数客户对我的 web 服务的调用者进行身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:47:24.817

您还需要在您尝试进行身份验证的服务器上启用基本身份验证。有关示例，请参阅[SocialBootstrapApi AppHost](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/AppHost.cs#L171)：

```
Plugins.Add(new AuthFeature(
    () => new CustomUserSession(), //Use your own typed Custom UserSession type
    new IAuthProvider[] {
        new BasicAuthProvider(),                    //Sign-in with Basic Auth
    })); 
```

# javascript - 一个超出我想象的简单画布

> ID：14649857
> 
> 赞同：-3
> 
> 时间：2013-02-01T15:41:59.313
> 
> 标签：javascript, html, html5-canvas

```
 <html>
<head>
<script>
  function draw() {
    var canvas = document.getElementById('draw');
    if (canvas.getContext) {
      var ctx = canvas.getContext('2d');
      for (i=0,i<=700,i+=10){
      ctx.beginPath();
      ctx.moveTo(i,700-i);
      ctx.lineTo(700-i,i);
      ctx.stroke();
      }
    } else {
      document.write("Hey idiot, whhich idiot browser you are using? No IE clan here!");
    }
  }
</script> 
</head>
<body onload="draw();"> 
<canvas id="draw" width="700" height="700"></canvas>
</body></html> 
```

谁能告诉我这个简单的代码不起作用的问题是什么？.....................................

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:43:52.067

因为您的 for 循环使用逗号，所以它需要分号：

`for (i=0;i<=700;i+=10){`

这也不行：

> document.write("你好白痴，你用的是哪个白痴浏览器？这里没有IE家族！");

不要侮辱你的用户！

# python - Python中的元组错误怎么办？

> ID：14649858
> 
> 赞同：1
> 
> 时间：2013-02-01T15:42:06.697
> 
> 标签：python, numpy

我正在尝试学习一点机器学习（和 python），现在用 k-Nearest Neighbors 进行分类。我收到此错误（发生了什么？）：

```
dataSetSize = dataSet.shape[0]
TypeError: 'tuple' object is not callable 
```

**检查可调用：**

```
>>> callable(group)
False
>>> callable(labels)
False
>>> g = group() 
```

它们是假的，但如何使它们成为真呢？

**数据：**

```
>>> group
array([[ 1\. ,  1.1],
       [ 1\. ,  1\. ],
       [ 0\. ,  0\. ],
       [ 0\. ,  0.1]])
>>> labels
['A', 'A', 'B', 'B'] 
```

当我对我的组变量执行此操作时，我得到以下信息：

```
group.shape[0]
4 
```

我对这个函数的调用：

```
>>> kNN.classify0([0, 0], group, labels, 3)

def classify0(inX, dataSet, labels, k):
     dataSetSize = dataSet.shape[0]
     diffMat = tile(inX, (dataSetSize,1)) - dataSet
     sqDiffMat = diffMat**2
     sqDistances = sqDiffMat.sum(axis=1)
     distances = sqDistances**0.5
     sortedDistIndices = distances.argsort()
     classCount = {}
     for i in range(k):
       voteIlabel = labels[sortedDistIndices[i]]
       classCount[voteIlabel] = classCount.get(voteIlabel, 0) + 1
     sortedClassCount = sorted(classCount.iteritems(), key=operator.itemgetter(1), reverse=True)
     return sortedClassCount[0][0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:44:51.780

这意味着它不可调用。如果您尝试从整数中调用某些内容，则会得到相同的错误。你`dataSet[0].shape`最有可能打电话。很难知道，因为我不知道 dataSet[0] 中的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:47:20.110

使用内置`callable`函数检查对象是否可调用：
`callabe(object)`=>`True`如果对象可调用，则返回

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-25T19:53:51.320

您没有正确传递变量。

```
kNN.classify0([2,2], group, labels, 3) 
```

未设置组

# sql - 如何使用数据流组件解密 OpenPGP 文件而不将文件保存到磁盘？

> ID：14649859
> 
> 赞同：3
> 
> 时间：2013-02-01T15:42:09.897
> 
> 标签：sql, ssis

我想知道是否有人知道 SSIS 中的数据流源组件（免费或付费），它将动态解密 OpenPGP 文件（将其全部保存在内存中）并将其输出到源。

我见过执行此操作的任务（控制流组件），但我不希望 OpenPGP 文件以解密状态写入磁盘。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:54:27.897

CozyRoc 有一个工具。我不确定它是否在内存中加密/解密，但我从未注意到磁盘上的临时文件。

请参阅链接页面底部的[CozyRoc OpenPGP 示例。](http://cozyroc.com/ssis/openpgp-task)它似乎表明你可以做你想做的事。

# java - JSF 全局异常处理程序让异常冒泡

> ID：14649864
> 
> 赞同：2
> 
> 时间：2013-02-01T15:42:35.560
> 
> 标签：java, jsf, jsf-2, exception-handling, jboss

我的 JSF 2.0 Web 项目中有一个异常处理程序，它扩展了 ExceptionHandlerWrapper。我遇到的问题是，在调用 handle() 方法之前，异常出现在服务器日志中。

知道为什么会发生这种情况，以及如何解决这个问题吗？

我正在使用 jBoss 7.1.2。异常处理程序 handle() 方法如下所示：

```
 @Override
    public void handle() {

        if (getUnhandledExceptionQueuedEvents() == null || !getUnhandledExceptionQueuedEvents().iterator().hasNext()) {         
            getWrapped().handle();
            return;
        }

        FacesContext fc = FacesContext.getCurrentInstance();
        ExternalContext externalContext = fc.getExternalContext();

        Outcome outcome = Outcome.GENERAL_ERROR;

        for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();) {

            ExceptionQueuedEvent event = i.next();
            ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
            Throwable throwable = context.getException();

            logger.warn("Intercepting exception before it bubbles to the UI", throwable);

            outcome = determineOutcome(throwable);

            populateMessageForOutcome(outcome);

            i.remove();

        }

        try {
            logger.warn("GeneralUiExceptionHandler is redirecting to " + outcome.value() + " as a result of an exception");
            externalContext.redirect(outcome.value());
        } catch (IOException e) {
            logger.error("Error while handling exceptions", e);
        }

  //        fc.renderResponse();
  //        getWrapped().handle();

    } 
```

服务器日志中的异常示例

```
10:00:52,422 SEVERE [javax.enterprise.resource.webcontainer.jsf.application] (http-localhost/127.0.0.1:8080-6) Error Rendering View[/disbursement.xhtml]: javax.faces.FacesException: javax.el.ELException: /disbursement.xhtml @23,97 value="#{disbursementBean.cashValueDisbursement.effectiveDate}": java.lang.ArrayIndexOutOfBoundsException: 3
    at javax.faces.component.UIComponentBase$AttributesMap.get(UIComponentBase.java:2364) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.el.CompositeComponentAttributesELResolver$ExpressionEvalMap.get(CompositeComponentAttributesELResolver.java:345) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.el.MapELResolver.getValue(MapELResolver.java:196) [jboss-el-api_2.2_spec-1.0.1.Final.jar:1.0.1.Final]
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169) [jbossweb-7.0.16.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.16.Final.jar:]
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at com.sun.faces.facelets.el.ContextualCompositeValueExpression.getValue(ContextualCompositeValueExpression.java:156) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:63) [primefaces-3.4.jar:]
    at org.primefaces.component.inputmask.InputMaskRenderer.encodeMarkup(InputMaskRenderer.java:94) [primefaces-3.4.jar:]
    at org.primefaces.component.inputmask.InputMaskRenderer.encodeEnd(InputMaskRenderer.java:52) [primefaces-3.4.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:55) [primefaces-3.4.jar:]
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43) [primefaces-3.4.jar:]
    at org.primefaces.component.fieldset.FieldsetRenderer.encodeContent(FieldsetRenderer.java:89) [primefaces-3.4.jar:]
    at org.primefaces.component.fieldset.FieldsetRenderer.encodeMarkup(FieldsetRenderer.java:71) [primefaces-3.4.jar:]
    at org.primefaces.component.fieldset.FieldsetRenderer.encodeEnd(FieldsetRenderer.java:45) [primefaces-3.4.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:55) [primefaces-3.4.jar:]
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:198) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:115) [primefaces-3.4.jar:]
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55) [primefaces-3.4.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.company.dept.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:127) [cdi-0.1.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final.jar:]
    at com.company.dept.log.filter.LoggingFilter.doFilter(LoggingFilter.java:74) [com.company.dept.logging.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final.jar:]
    at com.company.dept.security.filter.LoggedInFilter.doFilter(LoggedInFilter.java:135) [security-0.1.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.16.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.2.Final.jar:7.1.2.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679) [jbossweb-7.0.16.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931) [jbossweb-7.0.16.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_37]
Caused by: javax.el.ELException: /disbursement.xhtml @23,97 value="#{disbursementBean.cashValueDisbursement.effectiveDate}": java.lang.ArrayIndexOutOfBoundsException: 3
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase$AttributesMap.get(UIComponentBase.java:2362) [jboss-jsf-api_2.1_spec-2.0.2.Final.jar:2.0.2.Final]
    ... 79 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 3
    at com.company.dept.system.bean.DisbursementBean.initialPageLoad(DisbursementBean.java:129) [com.company.dept.system-beans.jar:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_37]
    at org.jboss.weld.interceptor.proxy.SimpleMethodInvocation.invoke(SimpleMethodInvocation.java:32) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:70) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.executeInterception(InterceptorMethodHandler.java:112) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.invoke(InterceptorMethodHandler.java:76) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.bean.proxy.CombinedInterceptorAndDecoratorStackMethodHandler.invoke(CombinedInterceptorAndDecoratorStackMethodHandler.java:55) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at com.company.dept.system.bean.DisbursementBean$Proxy$_$$_WeldSubclass.lifecycle_mixin_$$_postConstruct(DisbursementBean$Proxy$_$$_WeldSubclass.java) [com.company.dept.system-beans.jar:]
    at org.jboss.weld.interceptor.util.InterceptionUtils.executePostConstruct(InterceptionUtils.java:56) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.interceptor.util.InterceptionUtils.executePostConstruct(InterceptionUtils.java:68) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.postConstruct(ManagedBean.java:172) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:294) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at com.company.dept.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:69) [cdi-0.1.jar:]
    at com.company.dept.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.createNewBeanInstance(AbstractConversationBeanEntry.java:140) [cdi-0.1.jar:]
    at com.company.dept.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.getBeanInstance(AbstractConversationBeanEntry.java:85) [cdi-0.1.jar:]
    at com.company.dept.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:101) [cdi-0.1.jar:]
    at com.company.dept.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:83) [cdi-0.1.jar:]
    at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at com.company.dept.system.bean.DisbursementBean$Proxy$_$$_WeldClientProxy.getCashValueDisbursement(DisbursementBean$Proxy$_$$_WeldClientProxy.java) [com.company.dept.system-beans.jar:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_37]
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:302) [jboss-el-api_2.2_spec-1.0.1.Final.jar:1.0.1.Final]
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169) [jbossweb-7.0.16.Final.jar:]
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.16.Final.jar:]
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.7-jbossorg-2.jar:]
    ... 80 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:57:55.133

这不是由冒泡引起的。它只是由 JSF 实现的内部日志记录引起的。在异常处理程序被命中之前，这已经被记录了，所以没有冒泡的方法。在您的特定示例中，它是按`FaceletViewHandlingStrategy#renderView()`方法记录的。

在您的特殊情况下，使用正在使用的 Mojarra `java.util.logging`，您可以`logging.properties`在运行时类路径中调整日志记录。要关闭特定日志，请添加以下条目：

```
javax.enterprise.resource.webcontainer.jsf.application.level = OFF 
```

它将关闭所有由`javax.enterprise.resource.webcontainer.jsf.application`logger 使用的日志记录`FaceletViewHandlingStrategy`。请注意，您可能会错过为其他目的而记录的日志。`java.util.logging`不允许对日志进行细粒度控制。

# loops - mousePressed 事件在 keyPressed 处理之前执行

> ID：14649870
> 
> 赞同：0
> 
> 时间：2013-02-01T15:43:02.373
> 
> 标签：loops, processing, keypress, mousepress

这个错误严重毁了我的一周。我正在尝试创建一个交互式排行榜，其中包含三个数组：1 个带有图像，2 个带有我写为字符串的整数。我正在尝试制作一个 keyPressed 事件，当他们上下梯子时，数字会随着代表团队的图像而变化，并且我有一个 mousePressed 事件来执行循环以将窗口恢复到其原始状态。

我的问题是，当我尝试运行代码时，keyPressed 事件不会执行，只有在我单击鼠标后才会执行。然后图像移动，但字符串数组不会与第一组图像一起循环返回。我已经包含了下面的代码......我知道它很长并且相信我一直在折射和缩短。现在我想要帮助的是确保 keyPressed 事件首先执行，并且当循环执行时，positions1 字符串数组恢复到其原始位置。

我在下面包含了我的代码，并且正在使用 Macbook Pro OSX Processing 2.0b7。

我重构了我的代码并使用循环来放置图像和文本。现在我遇到的问题是，当我启动 keyPressed 事件时，图像和文本不会改变。你能看看我的代码：

```
PImage[] teams;
int n = 24;
PImage[] teams2;
int m = 16;
PImage quarterFinalWinners = new PImage();
float damping = 0.1;
PFont font;
String[] positions1 = {"18", "26", "32", "45", "58", "56", "59", "61", "66", "69", "71", "85", "98", "100", "116", "133"};
String[] positions2 = {"14", "19", "25", "30", "34", "45", "52", "69", "71", "72", "87", "84", "89", "105", "107", "110"};
float x;
float y;

/**----------------------------------------------------------------------------------------------------------------------------**/

void setup() {
  size(600, 1600);
  frameRate(60);
  smooth();

  font = loadFont("Calibri-Bold-48.vlw");
  textFont(font);

  frame.setResizable(true);

  teams = new PImage[n];
    for (int i = 0; i < teams.length; i++) {
      teams[i] = loadImage(i + ".png");
    }

  teams2 = new PImage[m];
    for (int i = 0; i < teams2.length; i++) {
      teams2[i] = loadImage(i + ".jpg");
    }
}

/**----------------------------------------------------------------------------------------------------------------------------**/

void draw() {
  //noLoop();
  background(0);

  if ((x < width) && (y < height)) {
for (int i = 0; i < 16; i++) {
  image(teams[i], 150, 60*i);
  text(positions1[i], 100, 72*i);
     }
    }

 if (keyPressed) {
if((key == 's') || (key == 'S') && (x < width) && (y < height)) {
  for (int i = 0; i < 16; i++) {
  image(teams[i], 150, 60*i);
  text(positions1[i], 100, 72*i);
  }

   for (int i = 0; i >= 16; i++) {
  text(positions2[i], 100, 72*i); 
    }
   }
  }
}

/**----------------------------------------------------------------------------------------------------------------------------**/

/**void keyPressed () {
if((key == 's') || (key == 'S') && (x < width) && (y < height)) {
   for (int i = 0; i > 16; i++) {
  image(teams[i], 150, 60*i);

}

   for (int i = 0; i >= 16; i++) {
  text(positions2[i], 100, 72*i); 
    }
}
}**/

     /**image(images[10], 150, 290);
  image(images[19], 150, 50);
  image(images[17], 150, 230);
  image(images[2], 150, 110);
  image(images[22], 150, 410);
  image(images[20], 150, 470);
  image(images[16], 150, 650);
  image(images[6], 150, 350);
  image(images[7], 150, 590);
  image(images[18], 150, 770);
  image(images[21], 150, 170);
  image(images[12], 150, 830);
  image(images[13], 150, 530);
  image(images[23], 150, 950);**/

void mousePressed () {
      if (mousePressed) {
      positions2 = positions1;
      }
     loop();
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:51:14.897

首先减少你的代码。为了演示问题以便其他人可以提供帮助，可以删除大部分代码。例如，两个图像和两个整数应该足够了，具有最少的 keyPressed 和 mousePressed 函数。

也就是说，您的代码中也存在实际问题。例如，在 mousePressed 中，您无需测试是否 (mousePressed)。这就是为什么调用 mousePressed() 的原因。您还调用 loop()，它什么也不做。loop() 和 noLoop() 函数仅确定在 draw() 完成后是否再次调用 draw()。loop() 会将草图模式从“基于事件”更改为“恒定帧率”，noLoop() 则相反 - 您真正想要做的只是在必要时触发重绘，在事件处理结束时使用 redraw() .

默认处理帧率是 60，所以 frameRate(60) 不会做任何事情。您还使用了 .vlw 字体，它实际上不是一种字体，而是一种图像格式。font = createFont("Calibri.ttf", 16); 更安全，因为它将在拒绝 .vlw 字体的系统上运行（例如在浏览器中运行草图时）。

您的代码也不会交换数组，它会重新分配数组变量以指向同一事物。在 keyPressed 上，"positions1 = Position2" 表示 position2 是 position2，当然，但是 position1 也是 position2。您现在有两个变量指向同一个数组。您通过位置1 或位置2 所做的任何更改现在都将更改**相同的数组**，并且任何进一步的键或鼠标按下“位置2 = 位置1”现在都不会做任何事情，因为它们已经指向相同的东西，所以重新分配将保留它。

所以为了最好地帮助你，这里有一些代码可以大致完成你想要的，让你开始，但我强烈建议你在编程时可以问问题的地方闲逛（比如处理 IRC 频道或论坛），因为现在你的代码中有很多使用了错误的函数和想法，这意味着你还不理解这门语言，你想让其他人看片段来判断你是否在做一些明智的事情，或者什么非常错误。

```
String[] positions, prevPositions;

void setup() {
  // setup two identical-content arrays
  positions = new String[]{"1","a","b","c"};
  prevPositions = new String[]{"1","a","b","c"};
  // don't draw at a constant framerate. we'll redraw
  // based on key/mouse events
  noLoop();
}

void draw() {
  // white background, black text
  background(255);
  fill(0);
  // just draw the first thing in "position"
  text(positions[0], width/2, height/2);
}

void keyPressed () {
  // cache what the array looks like
  arrayCopy(positions,0,prevPositions,0,positions.length);
  // modify the positions list
  positions[0] = ""+ (int(positions[0])+1);
  // redraw now that our state has changed
  redraw();
}

void mousePressed () {
  // revert to previous array. We can only do this once.
  // if someone pressed the key seven times, we can't revert
  // seven times, because the code only has one history state
  // that is updated every time a key is pressed
  arrayCopy(prevPositions,0,positions,0,positions.length);
  // redraw now that our state has changed
  redraw();
} 
```

# javascript - 通过javascript下载文件

> ID：14649871
> 
> 赞同：0
> 
> 时间：2013-02-01T15:43:03.337
> 
> 标签：javascript, jquery

我正在尝试通过单击按钮下载一些 csv 内容。

单击时，我有一个 javascript 函数，可以使用

```
window.location='data:application/webcsv;charset=utf8,' + encodeURIComponent(csvData); 
```

但是这个文件没有任何名称和扩展名。如何使用 javascript 分配文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:48:24.060

没有办法使用我所知道的纯 JS 下载具有指定文件名的文件 - 但是可以使用 JS 和 Flash 的组合。

查看[Downloadify](http://davidwalsh.name/downloadify)库——我最近用它来做同样的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:49:42.503

您不能通过[数据 uri](http://en.wikipedia.org/wiki/Data_URI_scheme)指定文件名或扩展名。但是如果你使用一个`<a>`元素，你可以使用[`[download]`属性](http://www.w3.org/html/wg/drafts/html/master/single-page.html#downloading-resources)：

```
<a href="data:..set dynamically.." download="filename.extension">Download</a> 
```

并非每个浏览器都支持它，但它是一个开始。

# android - Android 数据库文件访问

> ID：14649894
> 
> 赞同：0
> 
> 时间：2013-02-01T15:44:16.477
> 
> 标签：android, sqlite

我有我的 sqlite 数据库文件 nhl.db，我把它放在我项目的 assets 目录中。然后我从 Eclipse 运行模拟器并加载程序，但是当我调用数据库时，我得到一个“没有这样的表”错误。我检查了 data/data/myapp/databases/ 目录，有一个带有我的数据库名称的文件，但是打开检查它，它是一个空的数据库文件，显然是由 SqLiteOpenHelper 创建的，因为它找不到我的数据库.

我的问题是我应该把我的 sqlite 数据库文件放在哪里，以便它被打开而不是创建？

```
public class DatabaseHandlerSimple extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "nhl";

// Contacts table name
private static final String TABLE_PLAYERS = "players";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_TEAM = "team";
private static final String KEY_NUMBER = "number";
private static final String KEY_FNAME = "firstname";
private static final String KEY_LNAME = "lastname";
private static final String KEY_POSITION = "position";

public DatabaseHandlerSimple(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Getting All Contacts
public List<Player> getAllPlayers() {
    List<Player> playerList = new ArrayList<Player>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_PLAYERS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Player player = new Player();
            player.setID(Integer.parseInt(cursor.getString(0)));
            player.setTeam(Integer.parseInt(cursor.getString(1)));
            player.setNumber(Integer.parseInt(cursor.getString(2)));
            player.setFirstName(cursor.getString(3));
            player.setLastName(cursor.getString(4));
            player.setPosition(Integer.parseInt(cursor.getString(5)));
            // Adding contact to list
            playerList.add(player);
        } while (cursor.moveToNext());
    }

    // return contact list
    return playerList;
}

@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:54:01.250

看看这个：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

您可以删除 .db 扩展名，只需在 assets 文件夹中将其命名为 nhl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:52:20.343

[Vogella](http://www.vogella.com/articles/AndroidSQLite/article.html)有一个关于 SQLite 的非常好的教程，试试这个来修复它。对我来说，您似乎没有在这里创建数据库。

# sql - SQL Server 选择没有匹配的有效记录的错误记录

> ID：14649901
> 
> 赞同：0
> 
> 时间：2013-02-01T15:44:36.397
> 
> 标签：sql, sql-server, not-exists

我们有一个问题，我们的一张表中有 100,000 条错误记录。这些错误记录很容易识别，因为它们的主键只有 8 位而不是 10 位长。

我遇到的问题是有 2,000 条有效记录具有匹配的错误记录（即一个人有一个有效的地址记录和一个错误的地址记录）。因此，我只想选择没有匹配有效记录的错误记录。

例如，一个人的地址记录包含该人的 ID 及其地址类型。因此，有效记录的主键是`1234567HOM`该人的家庭住址。错误记录的主键为`1234567H`（请理解我们遇到此问题的真实表不是地址表。我正在使用地址表示例来保护我们的信息。）

因此，我能够使用以下 SQL 选择所有也具有有效记录的错误记录：

```
SELECT ERRONEOUS.PERSON_ADDRESS_ID
  FROM PERSON_ADDRESS AS ERRONEOUS
  LEFT OUTER JOIN PERSON_ADDRESS AS VALID
    ON LEFT(ERRONEOUS.PERSON_ADDRESS_ID, 8) = LEFT(VALID.PERSON_ADDRESS_ID, 8)
 WHERE LEN(VALID.PERSON_ADDRESS_ID) = 10
   AND LEN(ERRONEOUS.PERSON_ADDRESS_ID) = 8 
```

这为我们提供了包含有效记录的 2,000 条错误记录的列表。然而，我们真正需要的是一个没有有效记录的错误记录列表。我试图通过添加`NOT EXISTS`代码来获取它们：

```
SELECT PERSON_ADDRESS_ID
  FROM PERSON_ADDRESS
 WHERE LEN(PERSON_ADDRESS_ID) = 8
   AND NOT EXISTS
       (SELECT ERRONEOUS.PERSON_ADDRESS_ID
          FROM PERSON_ADDRESS AS ERRONEOUS
          LEFT OUTER JOIN PERSON_ADDRESS AS VALID
            ON LEFT(ERRONEOUS.PERSON_ADDRESS_ID, 8) = LEFT(VALID.PERSON_ADDRESS_ID, 8)
         WHERE LEN(VALID.PERSON_ADDRESS_ID) = 10
           AND LEN(ERRONEOUS.PERSON_ADDRESS_ID) = 8
       ) 
```

不幸的是，这完全没有为我提供任何记录。如果我将“AND NOT EXISTS”更改为“AND EXISTS”，我会得到所有 100,000 条错误记录，包括我不想要的 2,000 条记录。

有谁知道我如何选择所有没有有效记录的错误记录？

编辑

问题澄清：只有一个 Person_Address 表，其中包含错误和有效记录。我选择了同一个 Person_Address 表两次，只是给它不同的名称，因为我想找到与有效记录不对应的错误记录。

例如，John Smith 有两条地址记录，1234567HOM（这是一条有效记录）和 1234567H（这是一条错误记录）。Judith Roger 只有一个有效记录 2222222HOM。赛斯亚当斯只有一个错误记录，3333333H。我想创建一个只检索 Seth Adams 记录的查询。

因此，即使 John Smith 有错误记录，我也不想检索他的错误记录，因为他也有有效记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:47:14.147

您想要与地址表不匹配的记录。试试这个：

```
SELECT ERRONEOUS.PERSON_ADDRESS_ID
FROM PERSON_ADDRESS ERRONEOUS LEFT OUTER JOIN
     PERSON_ADDRESS VALID
     ON LEFT(ERRONEOUS.PERSON_ADDRESS_ID, 8) = LEFT(VALID.PERSON_ADDRESS_ID, 8) and
        ERRONEOUS.PERSON_ADDRESS_ID <> VALID.PERSON_ADDRESS_ID
WHERE valid.Person_Address_Id is null and
     LEN(ERRONEOUS.PERSON_ADDRESS_ID) = 8 
```

您的查询的问题是您在`where`子句中有地址表。这会取消`left outer join`. 此外，我添加到联接中，以便有效记录 ID 与错误记录 ID 不同。

# conditional-statements - EDI x12 段条件

> ID：14649905
> 
> 赞同：2
> 
> 时间：2013-02-01T15:44:48.757
> 
> 标签：conditional-statements, requirements, edi, x12

请记住，我几天前才开始处理 EDI 标准，所以仍然有很多模糊不清的东西。

在 EDI 段（如 CUR）中，当声明一个条件 (P0304) 时，它表明如果使用一个条件，则另一个也应该使用。

他们所说的“使用”是什么意思？

这是否意味着该字段必须存在于段中，还是必须在其中具有值？它可以是空的但仍然“使用”吗？

即：CUR*SE*CAD**01

它是否有效，因为 CUR03 在该段中？还是因为 CUR03 为空而无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:48:42.987

在 ANSI X12 标准中，某些元素是有条件的，基于存在的其他元素。例如，在 PID 段中，如果发送 PID01，则必须发送 PID04 或 PID05。

元素的“状态”可能因版本而异（尽管并不常见）。在 3060 中可选的元素在 4010 中**可能**是强制性的。您没有说明您正在使用的版本。EDI 记事本中的快速查看似乎表明您发布的段结构符合 ANSI 标准。您的实施指南（您的合作伙伴实际想要的）可能会提出其他建议。

如果您有示例 EDI 数据，请从 Liaison下载[EDI Notepad 。](http://liaison.com/products/integrate/edi-notepad)它是完全免费的，并且会为你做一些基本的标准语法检查。他们还出售 Dictionary Viewer，它很有帮助，但不是免费的。这是您所描述的带有 CUR 的 810 文档的开头（在版本 4010 中）。EDI 记事本不报告错误。CUR03 只是一个空元素。

```
BIG*20130131*746331*20130130*0026074***DI
CUR*SE*TES**01
N1*BS*KEYSOURCE MEDICAL INC*11*RK0236403 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:27:03.250

使用意味着元素中有数据。

未使用表示“空”或“无数据”。

# symfony1 - Apache2：2 个虚拟主机 1 个服务器名称 2 个服务器路径

> ID：14649909
> 
> 赞同：1
> 
> 时间：2013-02-01T15:45:04.510
> 
> 标签：symfony1, symfony-1.4, virtualhost, server-name

我正在安装一个 symfony 项目`/var/www/`

我在这里存储了一个特殊的登录页面`/var/www/web/landingpage`

我希望访问者访问`http://www.mydomain.com`我的登录页面，访问者访问`http://www.mydomain.com/foo`我的 symfony 项目。

我创建了 2 个不同`ServerPath`的虚拟主机，并且登录页面正在运行，但 symfony 项目却没有。

这是我的conf：

```
<VirtualHost *:80>
    ServerAdmin admin@mydomain.com
    ServerName www.mydomain.com
    ServerPath /
    DocumentRoot /var/www/web/landingpage
    ErrorLog ${APACHE_LOG_DIR}/mydomain.com.error.log
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin admin@mydomain.com
    ServerName www.mydomain.com
    ServerAlias mydomain.com sf.mydomain.com
    ServerPath /sf/

    DocumentRoot /var/www/web

    DirectoryIndex frontend.php

    <Directory /var/www/web>
            Order allow,deny
            Allow from all
            AllowOverride none

            <IfModule mod_rewrite.c>
                    RewriteEngine On

                    # we check if the .html version is here (caching)
                    RewriteRule ^$ index.html [QSA]
                    RewriteRule ^([^.]+)$ $1.html [QSA]
                    RewriteCond %{REQUEST_FILENAME} !-f

                    # no, so we redirect to our front web controller
                    RewriteRule ^(.*)$ frontend.php [QSA,L]
            </IfModule>
    </Directory>

    Alias /sf /var/www/lib/vendor/symfony/data/web/sf

    ErrorLog ${APACHE_LOG_DIR}/mydomain.sf.error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/mydomain.sf.access.log combined
</VirtualHost> 
```

注意：我的第二个没有第一个且没有`ServerPath`指令的虚拟主机运行良好

我在浏览器中遇到的错误：

> 未找到
> 
> 在此服务器上找不到请求的 URL /foo/。

# php - 如何为 filter.default 指定选项？

> ID：14649917
> 
> 赞同：1
> 
> 时间：2013-02-01T15:45:16.787
> 
> 标签：php

我想在表单输入上添加一个通用过滤器，以阻止 XML 中所有无效的字符。

即任何不适合的东西：/[\x{0009}\x{000a}\x{000d}\x{0020}-\x{D7FF}\x{E000}-\x{FFFD}\x{ 10000}-\x{10FFFF}]+/u

filter.default[配置变量](http://php.net/manual/en/filter.configuration.php)似乎是一个不错的选择，但似乎我只能指定过滤器的名称和一些标志。似乎没有现有的过滤器/标志组合可以实现我的目标。我想使用[回调过滤器](http://us3.php.net/manual/en/filter.filters.misc.php)并简单地运行[preg_match()](http://php.net/manual/en/function.preg-match.php)，但这需要一种指定回调方法的方法。有没有办法指定默认过滤器的选项参数的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:29:49.360

After looking at [http://www.php.net/manual/en/ini.list.php](http://www.php.net/manual/en/ini.list.php) it appears that filter.default cannot be set at runtime (only in php.ini, .htaccess, httpd.conf or .user.ini). This tells me that a callback wouldn't work as filter.default since the callback function doesn't exist by the time the variable is set.

# listview - 是否可以反转 GroupDataModel 中的分组

> ID：14649918
> 
> 赞同：4
> 
> 时间：2013-02-01T15:45:23.323
> 
> 标签：listview, blackberry-10, blackberry-cascades

我有一个`GroupDataModel`项目并使用它来填充一个`ListView`. 每个项目都有一个类别，可以是“TV”或“Cinema”。我将“类别”设置为排序键，并`ListView`显示分组为类别的项目。

但是，类别的顺序是“电影”然后是“电视”。我需要它们按另一个顺序排列：“TV”然后是“Cinema”。

这可能吗？

代码：

```
GroupDataModel* results = new GroupDataModel();
results->setGrouping(ItemGrouping::ByFullValue);
QStringList sortingKeys;
sortingKeys.append("category");
results->setSortingKeys(sortingKeys); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:57:15.820

您可以使用方法反转排序[`setSortedAscending(bool ascending)`](https://developer.blackberry.com/cascades/reference/bb__cascades__groupdatamodel.html#setsortedascending)。如果设置为`false`，则项目按降序排序，如果设置为 ，则项目`true`按升序排序。

# css - 是否可以在水平面上制作 CSS3 列？

> ID：14649919
> 
> 赞同：6
> 
> 时间：2013-02-01T15:45:29.140
> 
> 标签：css, multiple-columns

我想知道是否可以水平生成 CSS3 列。

例如。如果我有段落 a、b、c 和 d，并且我给它们“column-count: 2”，那么输出将是

交流

BD

我想创建列，以便输出变为

抗体

光盘

有谁知道这在使用 css3 列时是否可行？

我希望我的页面具有可扩展性，这就是为什么我宁愿使用列，以便与屏幕大小相比，列数会自动生成正确数量的列。

原始页面主要使用 3-4 列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:55:31.250

如果您为段落指定最小/最大宽度，则为段落提供宽度和向左浮动应该可以工作。它应该与可变宽度的包装元素一起使用，但如果您不允许段落在有限的宽度下缩放太多，它可能会中断。

```
p {
    float: left;
    max-width: 160px;
    min-width: 100px;
    margin: 20px;
}

div { //wrapper
    width: 480px;
} 
```

[jsFiddle](http://jsfiddle.net/kj8JU/)

不要忘记在列之后清除元素中的浮动。

# c++ - 如何在 C++ 中重载 cout 行为？

> ID：14649920
> 
> 赞同：2
> 
> 时间：2013-02-01T15:45:41.823
> 
> 标签：c++, operator-overloading, cout

我想让 cout 在我调用它时总是打印额外的字符串（上面和下面）。这对我来说很奇怪，因为我主要在 Java 和 C# 中使用。

## 编辑

也许我们可以为“y”字符串或类似的东西定义其他值？

## 例子

代码：

```
#include <iostream>
int main(){std::cout<<"y\n";} 
```

结果（打印）：

```
x
y
z 
```

我不想改变`int main()`方法只是可能覆盖`<<`字符串类型？

或者也许让 cout 调用其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T15:49:21.537

我不认为你可以用 cout 做到这一点。您可以做的是创建一个简单的 I/O 包装器来执行额外的打印，然后调用 cout 来完成真正的工作。

# javascript - 按属性值搜索原型

> ID：14649925
> 
> 赞同：3
> 
> 时间：2013-02-01T15:45:50.370
> 
> 标签：javascript, prototypejs, javascript-framework

我想拥有 jquery 的等价物，`$("element[attribute='value']");`或者`$("element").find("[attribute='value']");`在 Prototype 中。
这将搜索具有特定属性值的元素。
这一定很容易，但我对 Prototype 了解不多，而且我在任何地方都找不到任何答案。
感谢你的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:46:55.477

`$$`在原型中使用

```
$$("element[attribute='value']") 
```

# sql - oracle提高查询性能

> ID：14649928
> 
> 赞同：8
> 
> 时间：2013-02-01T15:46:19.737
> 
> 标签：sql, performance, oracle, select

我是甲骨文的新手，我必须解决这个问题。

我有一张桌子，里面有大约 5.2 亿行。我必须获取所有行并将它们导入（非规范化）到 NoSQL 数据库中。

该表有两个整数字段 C_ID 和 A_ID 以及 3 个索引，一个在 C_ID 上，一个在 A_ID 上，一个在两个字段上。

我一开始就尝试过这种方式：

```
SELECT C_ID, A_ID FROM M_TABLE; 
```

这从来没有在合理的时间内给我任何结果（我无法测量时间，因为它似乎永远不会完成）。

我以这种方式更改了查询：

```
SELECT /*+ ALL_ROWS */ C_ID, A_ID FROM (SELECT
    rownum rn, C_ID, A_ID
FROM
    M_TABLE WHERE rownum < ((:1 * :2 ) +1 )) WHERE rn >= (((:1 -1) * :2 ) +1 ); 
```

我使用 3 个线程并行运行此查询，并使用大小为 1000 的页面进行分页。

我尝试引入三个优化：

1）我在表格上创建了​​统计信息：

```
ANALYZE TABLE TABLE_M ESTIMATE STATISTICS SAMPLE 5 PERCENT; 
```

2）我将表划分为 8 个分区。

3）我用并行选项创建了表。

现在我能够每秒获取 10000 行，因此整个过程大约需要 15 个小时才能完成（数据库在 4 核、8 GB 机器上运行）。

问题是我需要在最多 5 小时内完成所有工作。

我没有想法，所以在我要求新机器之前，你知道在这种情况下提高性能的任何方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T15:55:13.740

甲骨文非常聪明地告诉我们它把时间花在了哪里。您可以通过使用 Oracle 的扩展 SQL 跟踪（即 10046 跟踪）跟踪会话来做到这一点。您的查询正在从一个包含大量数据的表中提取数据。检查您的 IO 速率 (db_file_scattered_read)，这可能是查询的最重要的等待事件之一。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T16:47:51.163

你如何处理你的结果？它是使用 PL/SQL 直接获取到文件还是使用另一个应用程序来处理数据？是通过网络发送的吗？（这可能是唾手可得的果实）。

我问的原因是通常 a `FULL SCAN`(没有 ORDER BY) 会**立即返回第一行**。如果您将结果输出到文件，您应该会看到它立即开始填满。如果你不这样做，这意味着在段的开头有很多空白空间，这可以解释为什么查询永远不会返回（至少在合理的时间内）。

所以当你说你的查询没有返回时，我有点担心，你怎么知道？以下块是否返回？

```
DECLARE
  l NUMBER := 0;
BEGIN
  FOR cc IN (SELECT C_ID, A_ID FROM M_TABLE) LOOP
    l := l + 1;
    EXIT WHEN l >= 100000;
  END LOOP;
END; 
```

如果是，则表示您的 FULL SCAN 正在处理中。通过对上述查询进行计时，您应该能够计算出完整的单个 SCAN 需要多少时间，假设该段是均匀密集的。

读取 500M 行的工作量很大，但行很小，所以如果表段压缩得很好，Oracle 应该在合理的时间内返回所有行。`INSERT /*+APPEND*/`例如，如果重复删除然后加载表段，则其空间配置可能会效率低下。重建表 ( [`ALTER TABLE MOVE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#i2081902)) 将删除段中所有空的无用空间。顺便说一句，当您对表进行分区时，您确实重建了它，所以这可能是您的查询现在返回的原因！

无论如何，我建议您重试 FULL TABLE SCAN，可能在重建表以重置任何空白空间和高水位标记之后。迄今为止，单次全表扫描是访问大量数据的最可靠的方法（也是最有效的方法之一）。

如果需要进一步提升性能，建议看一下ROWID partitioning（[DIY并行处理](https://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:39946845137685)方案）或者内置包[`DBMS_PARALLEL_EXECUTE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_parallel_ex.htm#CHDIJACH)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T23:06:46.433

尝试这可能是一个激进的解决方案，但您可以查看表压缩。在 Oracle 10g 中，这仅对只读表真正有用，因为在完成写操作时块是未压缩的。我发现压缩对于数据仓库环境中的大表很有用。

也可以只压缩某些分区，以便将数据添加到按日期分区的表的末尾，您可以压缩历史分区，同时不压缩最近的分区。

表压缩的优势在于它减少了所需的 I/O 数量，这有助于 I/O 受限的系统。我经常从表中得到 10:1 的压缩率，尽管这取决于表中存储的内容以及插入数据时使用的排序。

对于现有表，我认为您可以使用以下命令：

```
ALTER TABLE M_TABLE COMPRESS MOVE; 
```

请注意，这可能有助于解决您的问题，但更改表的底层结构可能有点激烈。此外，将表重建为压缩表可能会使某些索引无效。

在 Oracle 11g 下，您还可以进行高级压缩，允许更新数据，但这涉及昂贵的许可成本。

[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14220/schema.htm#i36181)有一些文档，[此 PDF 文档](http://www.oracle.com/technetwork/database/options/partitioning/twp-data-compression-10gr2-0505-128172.pdf)中有更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:01:57.077

是的，正如 user2033072 所说，您应该使用`SQL Trace`并`TkProf`了解更多关于查询的信息。您可以查看[官方文档](http://docs.oracle.com/cd/B10500_01/server.920/a96533/sqltrace.htm)。

此外，您可以更简单地使用[`explain plan`](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm)，这样 Oracle 将显示它打算做什么。

# git - 从其他分支拉取时 Git 要求提交消息

> ID：14649929
> 
> 赞同：4
> 
> 时间：2013-02-01T15:46:23.717
> 
> 标签：git, version-control, terminal

我们公司的 git 工作流程是这样的：每个团队成员都有自己的分支，并从一个名为 develop 的主分支中提取和推送。

每当我去`git pull develop`git 时，它会自动打开一个文本编辑器（我心爱的 vim）并询问`Explain why this merge is necessary`.

为什么会这样，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:30:12.683

默认情况下，该`git pull`命令是 a`git fetch`后跟 a `git merge`。合并将检查是否可以“快进”，这只是将要合并的分支中的提交添加到您的分支中；但是，当您的分支发生更改时，通常是不可能的。

在这种情况下，合并将创建一个合并提交，以将正在拉入的分支上的更改与您的分支上的更改一起累积。此提交需要一条消息，可以将其默认（使用 --no-edit 参数）为类似于 'merged into' 的内容；但通常被认为没有帮助。调用编辑器以允许为合并输入有意义的消息。

无论您是编辑消息还是使用默认值，都会创建“额外”提交并混淆历史记录，因为它不是您在分支上进行的工作所需的提交。它只是为了“赶上”您的分支与另一个分支上发生的事情

不向您的分支添加不需要的提交的替代方法是使用`git pull --rebase`. 这将允许您赶上另一个分支中的提交，而无需额外提交的麻烦。这是一篇更详细地讨论它的文章：[pull with rebase](http://gitready.com/advanced/2009/02/11/pull-with-rebase.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:02:46.883

你可以看到这个[`git-merge`](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

> - 编辑
> 
> --no-edit
> 
> 在提交成功合并之前调用编辑器以进一步编辑默认合并消息。--no-edit 选项可用于在合并带注释的标签时接受自动生成的消息（通常不鼓励这样做），在这种情况下 git merge 会自动生成编辑器，以便标签的 GPG 验证结果可以可见。
> 
> 较旧的脚本可能取决于不允许用户编辑合并日志消息的历史行为。当他们运行 git merge 来合并一个带注释的标签时，他们会看到一个打开的编辑器。为了更容易地调整这些脚本以适应更新的行为，环境变量 GIT_MERGE_AUTOEDIT 可以在它们的开头设置为 no。

我通过添加我的来解决`export GIT_MERGE_AUTOEDIT=no`它`.bash_profile`

# jquery - 如何聚焦动态创建的“a”标签？

> ID：14649930
> 
> 赞同：3
> 
> 时间：2013-02-01T15:46:24.587
> 
> 标签：jquery, html, ajax

我试图让一个“a”标签在由 ajax 调用创建后聚焦。

代码如下：

```
 <form method="post" id="submitrow">
        <table>
            <tr>
                <td>
                    <input name="quantity" id="id_quantity" />
                </td>
                <td>$
                    <input name="price" id="id_price" />
                </td>
                <td><span id="add_row"></span>

                </td>
            </tr>
        </table>
    </form>

    <script>
    jQuery("#id_quantity").change(function () {
        jQuery('#add_row').html('<a onclick="document.forms[\'submitrow\'].submit();" id="sbmbtn">click me</a>');

        jQuery('#sbmbtn').focus(); // I want to focus the new link, it does not works

        alert(jQuery('#sbmbtn').is(':focus')); // it should be True!

        jQuery('#sbmbtn').live("keyup", function (e) {
            if (e.keyCode == 13) {
                alert('whoot whoot!');
            }
        });
    });

    jQuery("#id_quantity").focus();
    </script> 
```

似乎 html 替换后 DOM 没有正确更新。也许我必须以不同的方式替换代码？

我用我的代码的简化版本创建了一个[小提琴，它重现了这个问题。](http://jsfiddle.net/S6zz4/)

提前感谢您提供的任何提示！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:55:33.117

**只需在**标签上设置 tabindex

```
jQuery("#id_quantity").change(function () {
    jQuery('#add_row').html('<a tabindex="11" onclick="document.forms[\'submitrow\'].submit();" id="sbmbtn">click me</a>');

    jQuery('#sbmbtn').focus(); // I want to focus the new link, it does not works

    alert(jQuery('#sbmbtn').is(':focus')); // it should be True!

    jQuery('#sbmbtn').live("keyup", function (e) {
        if (e.keyCode == 13) {
            alert('whoot whoot!');
        }
    });
});

jQuery("#id_quantity").focus(); 
```

# c# - ItemsControl 项目不在 Windows Phone 应用程序的 ScrollViewer 中呈现

> ID：14649931
> 
> 赞同：0
> 
> 时间：2013-02-01T15:46:28.903
> 
> 标签：c#, windows-phone

我正在尝试在 Windows Phone 应用程序中创建滚动页面。此页面有一些静态内容，后跟项目的 ItemsControl。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">            
  <ScrollViewer>
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition />
      </Grid.RowDefinitions>

      <TextBlock Text="Static text line 1" />
      <TextBlock Grid.Row="1" Text="Another lineof static text" />

      <ItemsControl Grid.Row="2" ItemsSource="{Binding Path=MyItems}" ItemTemplate="{StaticResource myTemplate}"></ItemsControl>
    </Grid>
  </ScrollViewer>
</Grid> 
```

奇怪的是，当我使用这种方法时，ItemsControl 项不会呈现。但是，如果我将 ScrollViewer 移动到静态文本项下方，并将 ItemsControl 放置在 ScrollViewer 中，我的项目就会呈现得很好。

我究竟做错了什么？我觉得必须有一些我忽略的小而微不足道的东西。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:05:18.470

将行替换`<RowDefinition />`为`<RowDefinition Height="*" />`。* 表示它将占用所有可用空间。

# sip - 确定呼叫是否处于保持状态

> ID：14649935
> 
> 赞同：0
> 
> 时间：2013-02-01T15:46:39.843
> 
> 标签：sip, asterisk, pbx

有没有办法（无论是在拨号计划中，还是通过一些 AMI 操作）来确定通道是否处于保持状态？

`ChanIsAvail(<some channel ID>)`可以使用，但没有“保留”状态。保持呼叫的状态为`AST_STATE_UP`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:46:34.053

不，没有办法。

但是您可以通过 AMI 设置事件侦听器并使用它将此类状态保存在某处（数据库）。

[http://www.voip-info.org/wiki/view/asterisk+manager+events](http://www.voip-info.org/wiki/view/asterisk+manager+events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:42:16.993

看看 Asterisk func device_State

> DEVICE_STATE(device) 此函数的两种用途的可能值为： UNKNOWN | 未使用 | 使用 | 忙 | 无效 | 不可用 | 响铃 | 铃音 | 等候接听

[http://www.voip-info.org/wiki/view/Asterisk+func+device_State](http://www.voip-info.org/wiki/view/Asterisk+func+device_State)

如果您可以从频道中提取设备名称（应该可行），则可以检查相关设备的状态。

希望这会有所帮助。如果没有，如果您可以提供有关您的用例的更多信息，我可能会提出不同的解决方案。

# windows - 如何编写软件来播放路由到录音设备的声音片段？

> ID：14649943
> 
> 赞同：3
> 
> 时间：2013-02-01T15:46:59.593
> 
> 标签：windows, winapi, audio, audio-capture

我想编写一个程序，允许用户在他们的麦克风（录音设备）中播放声音片段，以便他们可以在他们的 PC 上使用 VOIP 软件（例如 Ventrillo 或 Skype）时将片段与他们的声音混合。当我说在他们的麦克风中播放声音片段时，我的意思是用户按下一个按钮，声音片段就会播放，用户和 VOIP 连接另一端的人都能听到。在 Windows 上可以使用哪些 API 函数来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:11:34.583

没有“将声音播放到麦克风”的标准 API。也就是说，当应用程序想要捕获音频并使用 API 来获取音频源时，没有定义标准方法来挂钩此过程并即时更新捕获的音频。除此之外，还有几个音频 API 存在很大差异。

因此，将声音播放到播放设备很容易，并且是典型的音频 API 任务，在这个问题的上下文中甚至不值得特别注意。更改捕获的音频馈送通常是捕获应用程序的任务。一旦它捕获了数据，应用程序就可以自由地对其进行修改，特别是在其中混合额外的馈送。

现在，如果您的请求是更改第三方支持音频的应用程序（例如 Skype）的行为，但无法直接连接到音频管道，您通常希望实现一个虚拟音频捕获设备，该设备可以灵活地自行生成提要混合真实捕获的数据和其他内容。如果第三方应用程序设置为从此类虚拟设备记录，它会直接从您的设备/组件开始有效地获取数据。由于存在多个 API，并且各种应用程序使用不同的 API 来捕获音频，因此创建虚拟音频设备的任务变得复杂，根据 API，创建虚拟设备可能或多或少困难。

# properties - 如何在 ccnet 属性中包含双引号？

> ID：14649950
> 
> 赞同：0
> 
> 时间：2013-02-01T15:47:16.380
> 
> 标签：properties, cruisecontrol.net

我想像这样在 CCNET 中定义一个属性

```
 <cb:define build.any.args = "/p:Configuration=SkipTestsRelease;Platform=Any CPU /v:n" /> 
```

但我需要引用“Platform=Any CPU”部分。

我怎样才能在该属性中包含双引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:55:26.190

您可以使用`&quot;`代替`"`：

```
<cb:define build.any.args = "/p:Configuration=SkipTestsRelease;&quot;Platform=Any CPU&quot; /v:n" /> 
```

[来源](http://build.nauck-it.de/doc/CCNET/Configuration%20Preprocessor.html)

# haskell - Haskell 中的音频和信号处理

> ID：14649954
> 
> 赞同：15
> 
> 时间：2013-02-01T15:47:24.833
> 
> 标签：haskell, signal-processing, audio-processing

你知道在 Haskell 中进行音频合成/信号处理的活跃尝试吗？是用于现场表演还是仅用于离线处理？我不是在寻找依赖外部工具的库（比如绑定到 SuperCollider）。

我找到了[合成器](http://hackage.haskell.org/package/synthesizer)，但是很久没有更新了。

[dsp](http://hackage.haskell.org/package/dsp)也很有趣。但它被维护了吗？

对于纯信号处理，还有长石。它得到维护和发展。也许它可以作为未来构建面向音频的信号处理库的基础。

有没有类似的包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:00:36.167

我已将“合成器”拆分为合成器核心、-Dimension、-midi、-alsa、-llvm。LLVM 部分旨在进行非常高效的处理。您可以在 YouTube 上看到几个示例： [http ://www.youtube.com/playlist?list=PL51EB5843B3980883](http://www.youtube.com/playlist?list=PL51EB5843B3980883)

我还将在下周的 LLVM 会议上就该主题发表演讲：http: [//llvm.org/devmtg/2013-04/#ltalkabstract](http://llvm.org/devmtg/2013-04/#ltalkabstract)

另见： [http ://www.haskell.org/haskellwiki/Synthesizer](http://www.haskell.org/haskellwiki/Synthesizer)

我还保持 dsp 包运行，但到目前为止还没有扩展它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:56:19.307

有一本名为[Haskell School of Music](http://haskell.cs.yale.edu/euterpea-2/haskell-school-of-music/)的教科书，它似乎可以在线免费获得。它使用一个名为[euterpea-2的库](http://haskell.cs.yale.edu/euterpea-2/)

> Euterpea 是一种广谱语言，适用于高级音乐表示、算法作曲和分析；中级概念，例如 MIDI；低级音频处理、声音合成和乐器设计。

# jquery - SP 例程 ClientContext 失败，但在编辑模式下除外

> ID：14649959
> 
> 赞同：1
> 
> 时间：2013-02-01T15:47:48.050
> 
> 标签：jquery, sharepoint, editor, spservices

当它在编辑模式下工作时，我在正常模式下遇到 Javascript 错误（预期对象）的问题。它在下面显示的最后一行失败。

```
 $(document).ready(function() { updateListItem(); });

      function updateListItem() {

        var siteUrl = ‘/sites2/sppwgrqy/DashboardTest/’; alert(‘now to get siteUrl’ + siteUrl );

        var clientContext = new SP.ClientContext(siteUrl ); //fails hereNo hidden components.

   } 
```

在编辑模式下工作正常。我升级到 jquery 1.8.3，然后升级到 1.9.0，没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:49:02.363

好吧，老实说，我从来没有发现为什么这种方法只适用于编辑模式。所以我使用了 SPServices 选项：

```
<script type="text/javascript">
//Wrapping your script in $(document).ready(function()means 
//that the calls will be made once the page is fully loaded,
// i.e., the page is "ready". 

$(document).ready(function() {
   updateReleaseSelected();
});

function updateReleaseSelected()
{    
   var relID = document.getElementById('ReleaseID').value;
   //  alert('RelID:' +  relID );
   updateItems(relID );
};

function updateItems(relID)
{  
  $().SPServices(
  {
      operation: 'UpdateListItems',
      webURL: '/sites2/sppwgrqy/DashboardTest/',
      listName: 'ReleaseSelected',
      updates: '<Batch OnError="Continue" PreCalc="True">' + 
         '<Method ID="1" Cmd="Update">' +
         '<Field Name="ReleaseValue">' + relID + '</Field>' +
         '<Field Name="ID">2</Field>' +
         '</Method>' +
         '</Batch>',
      completefunc: function(xData, Status)
      {
          //alert('successfully updated');      
      }
  });
}
</script> 
```

# c# - NCron 默认记录器写入事件日志，抛出 SecurityException

> ID：14649961
> 
> 赞同：2
> 
> 时间：2013-02-01T15:47:49.937
> 
> 标签：c#, .net, event-log, securityexception, ncron

简单的 Ncron 服务：

```
class Program
{
    static void Main(string[] args)
    {
        var schedService = new SchedulingService();
        schedService.At("* * * * *").Run<MyTask>(); // run every minute
        schedService.Start();

        Console.ReadLine();
    }
}

public class MyTask : NCron.ICronJob
{
    public void Execute()
    {
        Console.WriteLine("executing");
    }

    public void Initialize(NCron.CronContext context)
    {
    }

    public void Dispose()
    {
    }
} 
```

在到达第一分钟但在执行 MyTask 之前，NCron 似乎想要写入 Windows 事件日志，但失败并显示

```
Unhandled Exception: System.Security.SecurityException: The source was not found, but some or all event logs could not be searched.  To create the source, you need permission to read all event logs to make sure that the new source name is unique.  Inaccessible logs: Security.
   at System.Diagnostics.EventLogInternal.FindSourceRegistration(String source, String machineName, Boolean readOnly, Boolean wantToCreate)
   at System.Diagnostics.EventLogInternal.SourceExists(String source, String machineName, Boolean wantToCreate)
   at System.Diagnostics.EventLogInternal.VerifyAndCreateSource(String sourceName, String currentMachineName)
   at System.Diagnostics.EventLogInternal.WriteEntry(String message, EventLogEntryType type, Int32 eventID, Int16 category, Byte[] rawData)
   at System.Diagnostics.EventLog.WriteEntry(String message, EventLogEntryType type)
   at NCron.ExceptionHelper.LogUnhandledException(Object exception)
   at NCron.Service.SchedulingService.WaitCallbackHandler(Object data)
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()` 
```

NCron 写入事件日志的内容和原因是什么？这是默认行为，所以我想任何使用 NCron 的人都必须处理过这个问题，但我找不到任何关于这个问题的文档或问题/答案。我尝试了设置`schedService.LogFactory = null;`，这并没有改变任何东西。

缺少创建自定义日志工厂（我不想这样做），或摆弄注册表（我*真的*不想这样做，有时*不能*在生产机器上），我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:10:27.863

如果您不想写入事件日志，则需要提供备用记录器和工厂。[如https://code.google.com/p/ncron/wiki/Logging](https://code.google.com/p/ncron/wiki/Logging)页面底部所述，有一个可用的 log4net 实现，其最新版本似乎位于[https://github.com/ schourode/ncron/tree/master/src/Ncron.Integration.log4net](https://github.com/schourode/ncron/tree/master/src/NCron.Integration.log4net)。如果您不想使用 log4net，编写替代实现将非常简单。

如果您愿意允许 NCron 写入事件日志，您可以通过在运行服务之前在管理员帐户下创建目标事件日志来避免运行时 SecurityException。这通常可以通过在安装程序中创建事件日志（假设您有）来完成，例如使用[EventLogInstaller](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventloginstaller.aspx)。

# php - 合并 2 个数组交换索引 PHP

> ID：14649965
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:00.793
> 
> 标签：php, arrays, merge

不确定我是否在标题中正确描述了它，但我希望在 php 中合并 2 个数组，尽管我不希望新数组首先有第一个数组，然后是第二个数组，而是我想要它具有第一个数组的第一项，第二个数组的第一项，第一个数组的第二项等

所以本质上

```
Array 1
     A - 1
     A - 2
     A - 3

Array 2
     B - 1
     B - 2
     B - 3 
```

合并两者后，结果数组将是

```
Array Merged
     A - 1
     B - 1
     A - 2
     B - 2
     A - 3
     B - 3 
```

按照这个顺序，谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:49:42.630

合并和排序它们，同时保留键

```
$array1 = array(/* values here */);
$array2 = array(/* values here */);

$mergedArray = array_merge($array1, $array2);
ksort($mergedArray); // this also keeps the keys 
```

**笔记：**

您的数组无法工作，因为您不能有 2 个具有相同键的条目:)

基本上`$array2 = array('B' => 1, 'B' => 2, 'B' => 3);`会产生以下数组：

```
Array
(
    [B] => 3
) 
```

# c - 如何使用 VC++ 复制闪存驱动器中的每个文件以粘贴到文件夹中并格式化闪存驱动器？

> ID：14649967
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:02.750
> 
> 标签：c, visual-c++, command-line

我想在闪存驱动器中构建易于清理的病毒首先，将闪存驱动器中的每个文件复制到另一个文件夹中。之后，格式化闪存驱动器并将文件从文件夹复制回闪存驱动器。我使用 VC++ MFC。我尝试查找有关复制和格式化驱动器功能的信息，但找不到复制所有文件的代码。所以，我尝试在 system() 函数中运行命令行，但是当我运行时

> system("格式 f: /Q");

它需要按回车。**我想用VC++格式的驱动，不按任意键，不显示DOS窗口就好了。**请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:06:25.087

几年前我也有同样的需求，而且 Windows 没有提供 API 来轻松格式化磁盘，您必须自己执行所有低级操作。[AutoFormat for Windows](http://neosmart.net/blog/2013/autoformat-for-windows/)是一个不需要用户干预的修补命令行格式实用程序。

不幸的是，您不能使用`SHFileOperation`and co。以静默方式将文件复制到外部 USB。如果您在 Windows XP SP3 上使用`FOF_SILENT`或`FOF_NO_UI`复制到 USB，该操作[将无声且莫名其妙地失败](http://osronline.com/showthread.cfm?link=214368)。如果您的目标不是 Windows XP，那么无论如何，这里有一个示例，说明如何在无需用户干预的情况下递归`SHFileOperation`地[将目录内容复制到外部驱动器。](https://gist.github.com/1290539)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:58:16.417

*   要复制文件，可以使用 ShFileOperation 函数。
*   要格式化，可以使用 SHFormatDrive；但也会警告用户。

我认为没有“高级”API 可以让您静默格式化磁盘；这是出于安全原因，您不希望恶意人员在代码中添加“复活节彩蛋”来格式化用户的磁盘。

祝你好运。

# c# - 打开内部浏览器来处理请求

> ID：14649969
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:48:13.240
> 
> 标签：c#, http, oauth, windows-runtime

在 Oauth 过程中，我检索如下授权 URL，

[https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth)？范围=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile& redirect_uri=urn:ietf:wg:oauth:2.0:oob& response_type=code&client_id=812741506391-h38jh0j4fv0ce1krdkiq0hfvt6n5amrf.apps.googleusercontent.com

这个链接只是打开一个带有显示授权代码的文本框的窗口。我想知道在 WinRT 中是否可以打开一个允许我与链接交互的内部浏览器或使用某种 HTTP 请求来获取数据？

是否有可能或者我必须启动 IE 并让用户复制和粘贴？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:12:04.983

您可以使用 WebView 控件并使用它进行导航。

# sql - 使用选择更新

> ID：14649970
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:13.623
> 
> 标签：sql, sql-server-2008-r2, sql-update

我有以下表格：

`TARIF_COURANT`

```
CODE_TARIF   NO_CLIENT   ZONE  UNITE
  A_0_300       8585      1      8
  A_0_300       8585      1      5 
```

`T_TARIF_ZONE`

```
NO_ID   LIBELLE
  1       A
  2       B 
```

`T_UNITE`

```
NO_ID   LIBELLE
  8       MOT
  5       FUT 
```

我怎样才能让`Update`我的表`TARIF_COURANT`得到这个结果：

```
 CODE_TARIF     NO_CLIENT   ZONE   UNITE
 A-MOT_0_300       8585      1       8
 A-FUT_0_300       8585      1       5 
```

我试过这样：

```
UPDATE
    TARIF_COURANT
SET
    TARIF_COURANT.CODE_TARIF =  T_TARIF_ZONE.LIBELLE +'-'
       + RTRIM(LTRIM( T_UNITE.LIBELLE) )+'_'
       +CONVERT(varchar, [TR_DEB]) 
       +'_'+CONVERT(varchar, [TR_FIN])
FROM
    TARIF_COURANT
     left join T_UNITE on TARIF_COURANT.unite = T_UNITE.NO_ID
     left join T_TARIF_ZONE on TARIF_COURANT.zone = T_TARIF_ZONE.NO_ID
      where no_client = '850673' and unite != 1
ON
    TARIF_COURANT.CODE_TARIF = TARIF_COURANT.CODE_TARIF 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:30:59.023

```
UPDATE t
SET t.CODE_TARIF = ttz.LIBELLE 
  + '-' + RTRIM(LTRIM( tu.LIBELLE) )
  + '_' + CONVERT(VARCHAR(32), [TR_DEB]) -- what table does this come from? 
  + '_' + CONVERT(VARCHAR(32), [TR_FIN]) -- what table does this come from?
--------------------------^^ don't be lazy! Specify a length!
FROM
  dbo.TARIF_COURANT AS t -- use aliases and proper schema prefixes
LEFT OUTER JOIN
  dbo.t_UNITE AS tu
  ON t.unite = tu.NO_ID
LEFT OUTER JOIN
  dbo.T_TARIF_ZONE AS ttz
  ON t.zone = ttz.NO_ID
WHERE
  no_client = '850673' -- what table does this come from?
  and unite <> 1;      -- what table does this come from? 
```

# c# - 如何在 C# 中为类中的结构设置不同的保护级别？

> ID：14649972
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:18.017
> 
> 标签：c#, oop, class, struct

我有一个有 6 个属性的类，它们基本上是 3 对属性，每对包含关于一件事的数据。所有这些属性都是公开的，但设置它们是受保护的。它显示在下面的代码中：

```
public class MyClass
{
    public Data1Type Item1Data1 { get; protected set; }
    public Data2Type Item1Data2 { get; protected set; }
    public Data1Type Item2Data1 { get; protected set; }
    public Data2Type Item2Data2 { get; protected set; }
    public Data1Type Item3Data1 { get; protected set; }
    public Data2Type Item3Data2 { get; protected set; }
} 
```

因为每一对属性基本上都被视为一个项目，所以我决定制作一个如下所示的结构：

```
struct Item
{
    Data1Type Data1;
    Data2Type Data2;
} 
```

`Item`所以我用一个结构替换了每一对属性。

我现在面临的问题是，我无法找到一种方法来获得与以前相同的保护级别，并具有 3 对属性。我希望外部`MyClass`的所有内容都能够获取`Item`结构内部的属性，但只有`MyClass`从它派生的类才能更改`Item`结构内部的属性。

我怎么能做这样的事情？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:55:02.530

您可以将结构设为只读以保留对值的控制。这是 .NET 中使用的一种模式：

```
struct MyStruct
{
    public readonly int Field1;
    public readonly int Field2;

    public MyStruct(int i, int j)
    {
        Field1 = i;
        Field2 = j;
    }
} 
```

然后，您可以像以前一样创建属性，知道结构内的值将保持不变，除非您通过属性设置器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:51:21.247

只需使用受保护的 setter 创建结构类型的属性：

```
public class MyClass
{
    public Item Item1 { get; protected set; }
    public Item Item2 { get; protected set; }
    public Item Item3 { get; protected set; }
} 
```

Struct 是一种值类型，因此客户端无法从 MyClass 更改项目`Data1`的`Data2`属性（客户端将拥有项目的副本）。使用受保护的 setter，只有 MyClass 及其继承者可以为 item 设置新值。如果您希望为某个项目更新项目的数据，请使用`class`而不是`struct`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:59:02.800

您可能应该阅读更多关于`struct`- 它意味着是**immutable**，这意味着您不应该能够更改 an`Item`的属性，无论是`MyClass`从其他任何地方还是从其他任何地方。

如果您查看[Stan Petrovs 的答案](https://stackoverflow.com/a/14650082/26479)，您可以了解应该如何制作结构。

然后你`MyClass`应该有类似的东西：

```
protected void SetItem1Data1(DataType1 newValue) 
{
    this.Item1 = new Item(newValue, this.Item1.Data2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:29:51.390

只有两种方式可以使用以下构造：

```
someThing.someMember.nestedMember = someValue; 
```

可以是合法的：要么`someMember`返回对类实例的引用，在这种情况下`someThing`，一旦引用返回， 的参与就会停止，或者`someThing.someMember`必须是 class 的字段`someThing`。即使`someMember`返回一个结构，它在 C# 中也是合法的，以允许`someMember`可能执行以下操作：

```
public class Thing { ...
    private nestedType member_nestedMember;
    public struct MemberProxy {
        Thing _owner;
        internal MemberProxy(Thing owner) {_owner = owner;}
        nestedType nestedMember {
            get {return _owner.member_nestedMember;}
            set {_owner.member_nestedMember = value; }
        }
    }
    public MemberProxy someMember {get {return new MemberProxy(this);} }
} 
```

在这种情况下，`MemberProxy`实际上并不保存 的数据`nestedMember`，而是保存对它所包含的实际位置的引用。因此，即使 的实例`MemberProxy`不可写，尝试设置其`nestedMember`属性也是可行的。不幸的是，即使在某些情况下，在只读结构值上调用属性设置器会有所帮助（`ArraySegment`将提供另一个这样的示例），但目前还没有定义属性来告诉编译器何时应该或应该这样做不被允许。

回到您目前的情况，我建议如果您的类型或派生类型可能希望更改项目的一部分而不更改两者，那么您最好的选择可能是声明您的复合材料的开放字段结构-项目类型并包含在`protected`该类型的类字段中，以及返回它们的公共属性。这样做可以让你的派生类说：

```
item1.Data1 = whatever; 
```

虽然外部代码必须使用该`Item1`属性，即使`Data1`是一个暴露的可写类型字段`Item`，尝试说：

```
item1.Data1 = whatever; 
```

不会编译[请注意，如果`Data1`是读/写属性，即使是旧的编译器也会接受这样的声明，理论上它可能有用，当它`Data1`是一个字段时会正确地拒绝它]。如果您决定不公开公共可变结构，您可以随时执行以下操作：

```
public struct Item
{
   privateItem Value;
   public Type1 Data1 {get {return Value.Data1; }}
   public Type1 Data2 {get {return Value.Data2; }}
   Item(privateItem src)
   {
     Value = src;
   }
 } 
```

我个人认为添加额外的包装层没有任何价值，但它可能有助于安抚“公共可变结构是邪恶的”人群。

# vb.net - vb.net调用datagridview列大小调整方法

> ID：14649976
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:26.490
> 
> 标签：vb.net, datagridview, resize, datagridviewcolumn

我为 datagridview 构建了一个自定义标题，使我可以轻松地搜索数据。在这个自定义标题中，我创建了允许您单击并拖动以调整 datagridview 列大小的控件。我的列大小调整代码工作得很好，但我真的很想看看是否可以调用在 datagridview 本身中单击并拖动分隔线时使用的方法。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:49:13.670

最简单的解决方案是使用 3rdpaty datagrid 控件和开源代码。[datagridview 有许多免费的替代品](http://bit.ly/WZpF91)。其中一些比标准数据网格视图更简单、更快。**无论如何，我找不到一个理由成为一个**工作良好的编译代码的挖掘者。

# php - 从 php 和 mysql 构建 json 的最有效方法

> ID：14649979
> 
> 赞同：1
> 
> 时间：2013-02-01T15:48:37.873
> 
> 标签：php, mysql, json

我的目标 JSON 对象看起来像这样的结构

```
[
   {
  "categories":[
     {
        "CATEGORY_ID":"Drinks",
        "subcategorys":[
           {
              "subcateory_ID":"beer",
              "items":[
                 {
                    "item_NAME":"yuengling",
                    "item_id":1
                 },
                 {
                    "item_NAME":"miller lite",
                    "item_id":2
                 }
              ],
              "subcateory_ID":"wine",
              "items":[
                 {
                    "item_NAME":"white zin",
                    "item_id":3
                 }
              ]
           }
        ]
     },
     {
        "CATEGORY_ID":"food",
        "subcategorys":[
           {
              "subcateory_ID":"sandwiches",
              "items":[
                 {
                    "item_NAME":"hamburger",
                    "item_id":1
                 },
                 {
                    "item_NAME":"ham & cheese",
                    "item_id":2
                 }
              ],
              "subcateory_ID":"sides",
              "items":[
                 {
                    "item_NAME":"fries",
                    "item_id":3
                     }
                  ]
               }
            ]
         }
      ]
   }
] 
```

我的sql查询是这样的

```
SELECT categories.id, category_name FROM categories WHERE site_id = 1

SELECT sub_categories.id, sub_category_name FROM sub_categories WHERE site_id = 1 AND category_id = 1

SELECT items.id, item_name FROM items WHERE site_id = 1 AND sub_category_id = 1 AND site_id = 1 
```

我一直在努力寻找在每次选择后使用嵌套循环在 php 中创建此 json 的最有效方法。

这是我开始的道路

```
 $query1 = "SELECT categories.id, category_name FROM categories WHERE site_id = ".$siteId;

  $result1 = mysqli_query ($dbc, $query1) or trigger_error("Query: $query1\n<br />MySQL Error: " . mysqli_error($dbc));

 if($result1 === FALSE)
{
echo(mysqli_error()); // TODO: better error handling
} else
{

$categoriesJson = ' [ {"categories":[{'

while( $row = mysqli_fetch_array($result1) )
{
    $category = $row['category_name'];
    $categoriesJson = $categoriesJson.'"CATEGORY_ID":"'.$category.'","subcategorys":[{';

    // Make the query:
    $query2 = "SELECT sub_categories.id, sub_category_name FROM sub_categories WHERE site_id = ".$siteId . " AND category_id = ". $row['id'];
    $result2 = mysqli_query ($dbc, $query2) or trigger_error("Query: $query2\n<br />MySQL Error: " . mysqli_error($dbc));
    if($result2 === FALSE)
    {
        echo(mysqli_error());
    }
    else
    {
        while( $row2 = mysqli_fetch_array($result2) )
        {
            $subcategory = $row2['sub_category_name'];
            $categoriesJson = $categoriesJson.'"subcateory_ID":"'.$subcategory.'","items":[{';

            $query3 = "SELECT items.id, item_name FROM items WHERE site_id = ".$siteId . " AND sub_category_id = ". $row2['id'] . " AND site_id = ".$siteId;
            $result3 = mysqli_query ($dbc, $query3) or trigger_error("Query: $query3\n<br />MySQL Error: " . mysqli_error($dbc));
            if($result3 === FALSE)
            {
                echo(mysqli_error());
            } else
            {

                while( $row3 = mysqli_fetch_array($result3) )
                {
                $itemname = $row3['item_name'];
                $itemid = $row3['id'];
                $categoriesJson = $categoriesJson.'"itemName":"'.$itemname.'","itemId":"'.$itemid.'"';

                }
                $categoriesJson = $categoriesJson.'}]';
            }

        }

        $categoriesJson = $categoriesJson.'}]';

    }
    $categoriesJson = $categoriesJson.'}]';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:46:07.333

这个特定的代码未经测试，但总体思路已经过很好的测试，我希望它不会太难理解。这个想法是以正确的方式构建数组，然后使用 json_encode。如果我们已经拥有该类别/子类别，则通过检查每一行，我们确保我们获得了正确的格式。由于您不在 json 中使用标识符（例如`Drinks: {...}`，我们必须使用临时数组并在填充后添加它们。

您还可以寻找更通用的代码，在 google 中搜索 php pivot 函数。

```
<?php
$sql = "SELECT categories.category_name AS CATEGORY_ID, sub_categories.sub_category_name AS subcategory_ID, items.id, items.item_name 
        FROM categories
        LEFT JOIN sub_categories ON (categories.id = sub_categories.category_id and sub_categories.site_id = 1)
        LEFT JOIN items ON (sub_categories.id = items.sub_category_id and items.site_id = 1)
        WHERE categories.site_id = 1";
// ...

$tempCategoryArray = array();
$tempSubCategoryArray = array();
$categoriesArray = array("categories" => array());
$category = $sub_category = "";
while($row = mysqli_fetch_array($result1)) {
    // If we have a new category, let's start anew
    if($row['CATEGORY_ID'] != $category) {
        // Add the temporary array to the main one
        if(!empty($tempCategoryArray)) {
            $categoriesArray['categories'][] = $tempCategoryArray;
        }
        $tempCategoryArray = array();
        $tempCategoryArray['CATEGORY_ID'] = $row['CATEGORY_ID'];
        $tempCategoryArray['subcategorys'] = array();
    }
    // Same here, if a new sub, let's start fresh
    if($row['subcategory_ID'] != $sub_category) {
        // Add it to the tempCategory
        if(!empty($tempSubCategoryArray)) {
            $tempCategoryArray['subcategorys'] = $tempSubCategoryArray;
        }
        $tempSubCategoryArray = array();
        $tempSubCategoryArray['subcategory_ID'] = $row['subcategory_ID'];
        $tempSubCategoryArray['items'] = array();
    }

    // Finally, no need for temporary arrays with items, since they have no sub-array
    $tempSubCategoryArray['items'][] = array('item_NAME': $row['item_name'], 'item_id': $row['id']);
}

$categoryJson = json_encode($categoryArray); 
```

# php - 一个表格，一个按钮，一个mysql行

> ID：14649982
> 
> 赞同：0
> 
> 时间：2013-02-01T15:48:52.453
> 
> 标签：php, html, mysql

这是我的表单代码：

```
<?php
            $b = 0;
            $stmtb = $conn->prepare('SELECT * FROM picture WHERE id = :id');
            $stmtb->bindValue(':id', $id, PDO::PARAM_STR);
            $stmtb->execute();

            while($sb = $stmtb->fetch(PDO::FETCH_ASSOC)) {
            $pic = $sb["pic"];
            $picid = $sb["picid"];
            ?>

            <img src="/pibgcarta/<?php echo $pic; ?>" height="10%" width="45%" />

            <form method="post" enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']."?dm=".$sch; ?>" id="picform">

            <input type="hidden" name="picid" id="picid" value="<?php echo $picid; ?>" class="input_field" role="input" aria-required="true" />

            <input type="hidden" name="pic" id="pic" value="<?php echo $pic; ?>" class="input_field" role="input" aria-required="true" />

            <input type="submit" value="Padam" class="submit_btn" name="deletepic" id="deletecarta" />

            <?php ++$b; } ?> 
```

这是我的邮政编码：

```
if(isset($_POST['deletepic'])) {

    $picid = $_POST["picid"];
    $pic = $_POST["pic"];

    include "connection.php";
    $query = "DELETE FROM picture WHERE picid = :id";
            $statement = $conn -> prepare($query);
            $statement -> BindParam('id', $picid, PDO::PARAM_INT);
            $result = $statement -> execute();

    $dpic = "/pibgcarta/".$pic;

    unlink($dpic); 

} 
```

现在我的问题是，假设有 3 张图片。我按下了第二张照片的删除按钮，但第三张照片被删除了。当我按下第一张照片的删除按钮时，第二张照片被删除。有人可以帮我解决我的问题吗？非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:53:09.873

你似乎没有关闭你的表格。因此，在 html 中，您将有几个名为 pickid 的隐藏输入。您的脚本中只有最后一个可供您使用。

所以在你的提交按钮之后，添加`</form>`

# eclipse - 如何配置 Eclipse 和 Maven 来检测 jdk.tools？

> ID：14649986
> 
> 赞同：2
> 
> 时间：2013-02-01T15:49:14.380
> 
> 标签：eclipse, m2eclipse, tools.jar

我在 Eclipse 中有一个 maven 项目，我在其中使用了一些 hadoop 库（hadoop-common、hadoop-auth、hadoop-hdfs），这些库引入了对 jdk.tools 的依赖。当我在另一台机器上检查这个项目时，它工作正常，但在我的 pom.xml 上抱怨“缺少工件 jdk.tools:jdk:tools:jar:1.6”。我可以通过手动添加依赖项并在我的本地驱动器上指定文件（例如“${JAVA_HOME}/../lib/tools.jar”）来解决此问题，但我想了解为什么它可以在一台计算机上运行而不是在另一个 - 我假设我的设置有问题？

我尝试了以下方法：

通过将“-vm C:\Program Files\Java\jdk1.6.0_25\bin\javaw.exe”添加到我的 eclipse.ini 文件中，确保 Eclipse 在 JDK 中运行。在 Eclipse 首选项 Java -> Installed JREs 下列出的唯一 JRE 是相同的 JDK。尝试在 Eclipse 首选项 Maven -> Installations between "Embedded (3.0.4)"、"External (3.0.4)" 和 "External (2.2.1)" 中切换 maven 版本

也许我需要在我的 maven settings.xml 文件中添加/更改一些东西？

任何建议，将不胜感激！

仅供参考，我正在使用 Eclipse Java EE Juno SR1 和 M2E 1.2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:45:56.757

JAVA_HOME 应该指向在 settings.xml 文件中安装 java 的文件夹，确保你有 JAVA_HOME 属性并且它指向正确的文件夹

${JAVA_HOME}/../lib/tools.jar 不正确。它应该是 ${JAVA_HOME}/lib/tools.jar，因为 tools.jar 在 /lib 文件夹下，而 /lib 文件夹直接在 ${JAVA_HOME} 文件夹下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T22:42:19.310

我还在我的 eclipse.ini 文件中添加了以下内容：

```
-vm
${JAVA_HOME}/bin 
```

这似乎解决了我的问题。

注意：我正在运行 Eclipse 4.3 (Kepler)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T18:02:56.553

似乎有三个选项。前两个确保首先找到的 java 是 JDK 的 java，它们导致 eclipse 正确地将系统依赖项转换为 JDK 下的 jar。最后一种方法可以不要求每个用户通过特殊方式运行 eclipse，但如果您的开发环境与生产环境不是 100% 同步，则可能会产生影响。如果您希望 jdk.tools 1.6 存在，但您使用 1.7 或 1.8 进行了测试，您可能会感到惊讶。

*   通过 eclipse.ini

`--launcher.appendVmargs -vm
c:/code/Java/jdk1.8.0_40/jre/bin/server/jvm.dll -vmargs -Dosgi.requiredJavaVersion=1.6`

*   通过路径

`set PATH=PATH-TO-JDK\bin;%PATH% PATH-TO-ECLIPSE\eclipse.exe`

*   通过 pom

`add tools.jar as jdk.tools:jdk.tools:<JDK version> to your local or private shared repo (nexus/artefactory etc) add dependency to your project`

# .net - .net 程序集依赖链

> ID：14649991
> 
> 赞同：0
> 
> 时间：2013-02-01T15:49:40.647
> 
> 标签：.net, .net-assembly

我有以下情况。我们正在开发一个多层应用程序，因此我为每一层制作了不同的组件。让我们称它们为 Top、Middle 和 Base。它们是依赖的，例如：

Top->Middle->Base，因为 Top 使用来自 Middle 和 Middle 从 base 的类。

现在我们将有一个 secong Applikation Top2，它只需要 Middle 中的一些类，它们不使用 Base 中的任何东西。

有没有办法不将 Base 包含在 Top2 的部署中？

尝试编译时，VS 告诉我我还需要对程序集 Base 的引用。

最佳托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:59:42.093

听起来“Middle”的靴子有点大了。

程序集不应引用它不需要的任何内容。因此，因此您的情况听起来像是拆分程序集的好人选。

**当前的**

```
Application One -> "Middle.dll" -> "Base.dll" 
```

**你的建议**

```
Application One -> "Middle.dll" -> "Base.dll"

Application Two -> "Middle.dll" -> "(Redundant) Base.dll" 
```

这是一个典型的问题，当一些真正常用的对象本质上不必要地与业务逻辑混为一谈时，就会出现这种问题。即，您可能在 Middle.dll 中有对应用程序有用的实用程序类，但它们并不真正需要在其中。使用单独的实用程序 dll 可能会更好。

**建议**

```
Application One -> "Middle1.dll" -> "Base.dll"
                -> "Middle2.dll"

Application Two -> "Middle2.dll" 
```

所有需要使用 Base.dll 的功能（当前存在于 Middle.dll 中）都应移至 Middle1.dll。这样如果你只需要使用非依赖代码，你可以参考Middle2.dll

这可能是一个很大的重构，取决于您的代码库，但稍后您会欣赏它！

**这样做的好处**

*   测试将得到改进。
*   如果您需要将这两个应用程序完全分开，那么您需要做的重构工作就更少了。
*   如果您出于某种原因只需要更改“Middle1”，则破坏这两个应用程序的可能性较小
*   更清晰地分离关注点
*   没有像您目前遇到的编译器问题
*   每个程序都不需要程序集总代码
*   更小、更易于管理的组件
*   改进的智能感知
*   Middle1 和 Middle2 可以共享相同的命名空间，因此对于您的应用程序，他们不会知道区别。

**注意：**显然我并不是建议您将它们称为 Middle1 和 Middle2。但你明白了。

# c# - 如何配置 IronPython.StdLib 2.7.3

> ID：14649994
> 
> 赞同：2
> 
> 时间：2013-02-01T15:49:42.247
> 
> 标签：c#, python, c#-4.0, std, ironpython

我无法让 StdLib 的编译版本正常工作。

我创建了一个空的 Visual Studio 项目（称为 StdLib）并使用加载了最新 (v2.7.3)IronPython.StdLib 的 NUGET，它在我的项目中创建了一个包含所有 .py 脚本的 Lib 文件夹。这些文件的构建操作默认设置为“内容”，但尝试使用该设置和“嵌入式资源”进行编译。

在我的 py 脚本中，我有：

```
import clr
clr.AddReference("StdLib")

import os 
```

它找到了程序集，但抛出“找不到 os 模块”错误。

如果我将标准库文件打包为构建文件夹中的松散文件并执行以下操作。

```
var runtime = Python.CreateRuntime();

var engine = Python.GetEngine(runtime);
engine.SetSearchPaths(new string[] { Path.GetDirectoryName(
    Assembly.GetExecutingAssembly().Location) + @"\Lib" });

////load the script
dynamic script = runtime.UseFile(ParserScriptPath);

//execute the script
var result = script.main("result"); 
```

我的问题是

1.  您可以通过 Visual Studio 将标准库编译成 .Net 程序集吗？

2.  如果是这样，Lib 文件夹中的 .py 代码文件的构建操作应该是什么？

3.  那么在尝试导入标准库模块时引用程序集以免失败的正确方法是什么？

我查看了以下帖子：[IronPython：使用 pyc.py 编译的 EXE 无法导入模块“os”](https://stackoverflow.com/questions/6195781/ironpython-exe-compiled-using-pyc-py-cannot-import-module-os/6205193#6205193)

但实际上并没有安装 IronPython 并且不太确定这是否是解决方法。我使用 NUGET 将 IronPython 和 IronPython.StdLib 直接添加到我的项目中。我假设因为我可以通过 NUGET 将 IronPython.StdLib 直接添加到我的项目中，所以我可以编译它并引用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:10:43.883

不，您将无法通过 Visual Studio 编译它（还）。如果您愿意，您必须[下载 IronPython](http://ironpython.codeplex.com/releases/view/81726)并使用 pyc.py 从命令行执行此操作。

Eventually I'll have NuGet packages for pre-zipped and pre-compiled version of the stdlib, but I just haven't got to it yet.

# algorithm - 使用插入排序对部分排序的数组进行排序

> ID：14649997
> 
> 赞同：-1
> 
> 时间：2013-02-01T15:50:07.230
> 
> 标签：algorithm, sorting

我有一个数组，第一个直到 N 元素被排序，N+1 直到元素 N+M 未排序（数组由 N+M 元素组成）。使用插入排序对该数组进行排序的复杂性是多少？我认为是 (N+M)^2，是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:17:21.757

如果要使用插入排序，则需要 O(M*(M+N)) 操作。但是，更好的方法是在 O(M*lgM) 中对未排序的部分进行排序，然后在 O(N+M) 中合并两个已排序的部分。

# excel - range.value 上的 Excel 1004 错误

> ID：14649998
> 
> 赞同：0
> 
> 时间：2013-02-01T15:50:07.437
> 
> 标签：excel, vba

VBE 调试器不断给我

`1004 error (Application-defined or object-defined error)`

在线的 `"Worksheets("General").Cells(cur_index, 2).Value = cur_time"`

或我尝试真正修改单元格值的任何尝试。

该函数是从同一工作表中的单元格调用的。但是当我打字的时候？

在即时窗口中的活动表，没有任何显示。怎么了？

有人可以告诉我如何解决它以及有什么问题吗？谢谢。

**更新：**这是我的代码的一部分，我的代码开头确实有明确的选项。

```
Function collectdata(cur_time)

Dim row_num As Integer, start_index As Integer, end_index As Integer, cur_index As Integer, col_num As Integer

row_num = 1
start_index = total_record * num_it + 21
end_index = start_index + total_record - 1

Dim rg As String
rg = "A" & start_index & ":A" & end_index

On Error GoTo err1

If cur_time > 0 And num_it < 10 Then

    cur_index = cur_time + 1200 * num_it

    Worksheets("General").Cells(cur_index, 2).Value = cur_time

    Worksheets("General").Range(rg).Value = num_it + 1

    For col_num = 3 To 12

        Worksheets("General").Cells(cur_index, col_num).Value = Cells(7, col_num).Value

    Next col_num

ElseIf cur_time = 1200 Then
    num_it = num_it + 1

End If

err1:
    Debug.Print Err.Description

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:57:56.620

这可能无法准确回答您的问题，但我希望帮助您稍微修复一下代码。

放在`Option Explicit`代码的顶部。此选项将帮助您以更“强类型”的方式编写代码。

此外，您的`num_it`变量未定义，因此为空。这一行：

`cur_index = cur_time + 1200 * num_it`

Turns `cur_index`= 0。然后，该`Cells(row, column)`方法给出错误，因为没有工作表的行为 0。行和列从 1 开始。

此外，为参数设置数据类型`cur_time`。例如，如果您将字符串传递给它，您的代码将出错。