# StackOverflow 问答 14382000-14382999

# c# - Word 2010 互操作：更改默认文档的名称

> ID：14382009
> 
> 赞同：3
> 
> 时间：2013-01-17T15:08:30.710
> 
> 标签：c#, interop

当从我的应用程序启动 Word 文档时，我需要能够将默认文档的名称从 Document1 更改为 Report。问题是 Document 对象中的 name 属性是只读的。关于我可以在启动时调用更改名称的方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:53:44.077

您可能对这段代码感兴趣：

```
 Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();

    object missing = System.Reflection.Missing.Value;
    object fileName = "Report";
    object isReadOnly = false;
    object isVisible = true;

    Microsoft.Office.Interop.Word.Document doc = wordApp.Documents.Add(ref missing, ref missing, ref missing, ref isVisible);

    doc.SaveAs2(ref fileName, ref missing, ref missing, ref missing, ref missing, ref missing, ref isReadOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);          
    wordApp.Visible = true; 
```

这将弹出一个您指定的名为“报告”的新 Word 文档。请注意，这使用了我在评论中提到的概念，即它首先使用新名称保存文件，然后打开它。在这种情况下，默认位置可能是您用户的“文档”文件夹，但您可以根据需要指定路径。

不要忘记根据需要关闭和释放 COM 对象“doc”和“wordApp”。有时 GC 不会适当地清理它，特别是如果应用程序意外关闭或者您在完成后忘记关闭它们中的任何一个。

# html - HTML + CSS 标签栏

> ID：14382010
> 
> 赞同：0
> 
> 时间：2013-01-17T15:08:32.267
> 
> 标签：html, css, tabs

如何干净地设置 HTML + CSS 水平选项卡栏的样式，以便选项卡栏在底部有一条线，对于活动选项卡隐藏或抑制？

换句话说，我正在尝试做与 StackOverflow 对其标签所做的相同的事情： ![在此处输入图像描述](../Images/7d3d7a6043ffe6e78e479c7ea701b687.png)

我的标签栏设置为有序列表

```
ul
{
  list-style: none;
}
li
{
  float: left;
} 
```

**更新**：我已经用 Firebug 浏览了网站，看看他们是如何做到的，但我觉得我很快就会陷入细节的困境。例如，StackOverflow 的版本在整个 div 的底部有一个边框（这很有意义），在活动选项卡的底部有一个白色边框（这是有道理的），但是它使活动选项卡的边框与 div 的边框重叠（而且我不太清楚它是如何做到的）。看起来[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#navs)做了类似的事情。我试图了解容器边框的重叠部分与内容边框的重叠部分如何工作的一般概念，而不是复制和修补 CSS，直到我得到一些似乎可以工作的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:54:32.810

您需要做的就是在 ' 上放置一个底部边框`<ul>`（以便它延伸），然后给`<li>`'sa 选定的类，并使该类的高度高 1 像素。

这是一个非常简单的例子：http: [//jsfiddle.net/V6gzS/](http://jsfiddle.net/V6gzS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:34:08.657

据我了解，您可以自己制作带有水平底线的按钮。

如果是这种情况，请确保将这条水平线作为`border-bottom: solid 1px #CCC`每个按钮的属性（颜色可能不同）。然后，在每个页面上，您将 id 添加`id="current"`到作为活动页面的那个按钮。在 CSS 中你写：

```
#current {
  border: solid 1px #CCC;
  border-bottom: 1px solid white;
} 
```

如果您有任何问题，可以通过添加`!important`以下内容来解决：

```
 border-bottom: 1px solid white !important; 
```

因此，这只是 CSS 中的四行额外代码和每个文件中的一个额外 HTML 属性。

**如果是动态菜单**

如果您的菜单不是在每个页面上都是静态的，而是可能动态生成或放置在包含的文件中，那么上述内容将是不可能的。因为那样你就不能轻易地在每个单独的页面上添加新的 id。

在这种情况下，您可能会对属性进行一些动态添加。如果使用服务器端语言，例如 PHP，那么您可能能够轻松设置`if{...}`检查 URL 或 GET 请求等的命令。`id`否则，如果按钮文本等于页面上的某个标题，您可能会使用一些 javascript 来检查每个按钮并添加属性。

我希望你明白。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:15:03.570

可以为您指出正确的方向，使用 firebug 或 chromes 元素检查器，只需选择您需要的位，例如，在此站点上，您要查找的内容称为选项卡，它们的样式如下

```
#tabs a.youarehere {
background: #fff;
border: 1px solid #ccc;
border-bottom-color: #ffffff;
color: black;
font-size: 120%;
height: 30px;
line-height: 28px;
margin-top: 3px;
padding: 0px 11px 0px 11px;
 } 
```

这只是其中的一部分，但是您可以通过查看一些代码来学到很多东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T21:29:26.863

我是这样做的：

```
ul {
    list-style-type:none;
}
li{
    float: left;
    border-bottom: 1px solid #CCC;
}
li:hover{
    float: left;
    border: solid 1px #CCC;
    border-bottom:none;
} 
```

# zend-framework2 - zf2 中的 loadModules.post 是函数吗？

> ID：14382011
> 
> 赞同：2
> 
> 时间：2013-01-17T15:08:34.453
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-modules

当我在 zf2 中跟踪代码时，我找不到应用程序服务注册的位置。这是application.php中的代码

```
public static function init($configuration = array())
{
    $smConfig = isset($configuration['service_manager']) ? $configuration['service_manager'] : array();
    $serviceManager = new ServiceManager(new Service\ServiceManagerConfig($smConfig));
    $serviceManager->setService('ApplicationConfig', $configuration);
    $serviceManager->get('ModuleManager')->loadModules();
    return $serviceManager->get('Application')->bootstrap();
} 
```

代码“$serviceManager->get('Application')”用于获取Application服务。但是应用服务在哪里注册呢？

然后我发现Application服务与ZF2/library/Zend/MoudleManager中的代码行“$this->getEventManager()->trigger(ModuleEvent::EVENT_LOAD_MODULES_POST, $this, $this->getEvent())”相关/MoudleManager.php

```
public function loadModules()
{
    if (true === $this->modulesAreLoaded) {
        return $this;
    }

    $this->getEventManager()->trigger(ModuleEvent::EVENT_LOAD_MODULES, $this, $this->getEvent());

    /**
     * Having a dedicated .post event abstracts the complexity of priorities from the user.
     * Users can attach to the .post event and be sure that important
     * things like config merging are complete without having to worry if
     * they set a low enough priority.
     */
    $this->getEventManager()->trigger(ModuleEvent::EVENT_LOAD_MODULES_POST, $this, $this->getEvent());

    return $this;
} 
```

另一个问题是“ModuleEvent::EVENT_LOAD_MODULES_POST，即loadModules.post。触发函数的第一个参数是函数名。那么loadModules.post是函数吗？它是在哪里定义的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:31:30.927

我先解决最后一个问题。trigger 方法的第一个参数*不是*函数，它只是一个名称；按照惯例，该名称通常反映触发它的方法，可以选择带有后缀以提供更多上下文（例如“.pre”、“.post”等）。

`ModuleManager::loadModules()`“loadModules.post”是一个在所有模块都被加载后触发的事件。当一个事件被触发时，该事件上的任何监听器都会被提供的参数触发。事件对象本身也有一个“目标”，在这种情况下是 ModuleManager。

关于“应用程序”服务，您必须查看 MVC 层的内部结构。大多数 MVC 服务在`Zend\Mvc\Service\ServiceListenerFactory`. 如果您查看该类，您会看到它分配`Application`给使用`Zend\Mvc\Service\ApplicationFactory`来创建应用程序实例。`ServiceListenerFactory`被检索为创建 ModuleManager 的工厂的一部分。这有点间接，但关系是由操作顺序和对象之间的关系定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:39:07.003

Zend\ServiceManager\ServiceManager 注册的服务大部分是由ServiceListener 工厂`Zend\Mvc\Service\ServiceListenerFactory`在创建ServiceListener 实例时配置的。

默认配置实际上存储在`ServiceListenerFactory::defaultServiceConfig`. （如果您浏览代码，您会看到那里定义了“应用程序”别名）

对于第二个问题， ModuleEvent::EVENT_LOAD_MODULES 只是用于标识不同模块加载事件的 ModuleEvent 常量之一。

实际上，应用程序在不同阶段触发了四个模块事件。我还没有机会使用这些事件，我认为它们主要由框架本身使用。到目前为止，我有机会只使用 Zend\Mvc\MvcEvent 相关事件。

# java - 不兼容的类型使用 list.addElement(JOptionPane.showInputDialog();

> ID：14382012
> 
> 赞同：1
> 
> 时间：2013-01-17T15:08:37.100
> 
> 标签：java, joptionpane

我正在尝试将此部分存储在一个变量中，以便我可以使用取消按钮..（使用 java、netbeans）

```
String a = list.addElement(JOptionPane.showInputDialog(null,"your name",JOptionPane.OK_CANCEL_OPTION)); 
```

这部分代码采用用户想要插入的名称并将其添加到`Jlist`. 但我遇到了错误`"incompatible types required String found void"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:19:04.170

只需添加对来自的返回值的检查`showInputDialog`：

```
String result = JOptionPane.showInputDialog(null,"your name",JOptionPane.OK_CANCEL_OPTION);
if (result != null) {
   list.addElement(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:11:07.447

您期望`addElement()`返回什么？对我来说看起来像一个`void`（即什么都没有）。

添加一些东西不太可能`list`返回一些东西（取决于`list`实际情况）。我怀疑您只需在添加后查看列表中的最后一个元素即可获得附加值（或者在添加之前存储对元素的引用）

（是`list`？`JList`我怀疑你那里有一个[DefaultListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html#addElement%28E%29)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:11:47.887

该`addElement`方法可能不会返回`String`.

您可能想要没有`list.addElement()`. 这样它就会编译。

# jquery - 如何在 jQuery Mobile 中使用按钮刷新页面

> ID：14382013
> 
> 赞同：0
> 
> 时间：2013-01-17T15:08:41.093
> 
> 标签：jquery, html, mobile

我要做的就是让我的“刷新”按钮在点击时简单地刷新页面，但我下面的编码不允许我这样做，我不知道为什么。任何帮助将不胜感激。

```
 <!DOCTYPE HTML> 
<html>
<head>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'/>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <link href='style.css' rel='stylesheet'/>

<script>
function swapButton() {
    var b = $('#button');
    b.text('Done');
    b.buttonMarkup({ icon: "check" });
    b.button('refresh');
}
</script>

</head>
<body>

    <div data-role="header" data-posiition="fixed" id="header" data-theme="a">
    <a data-icon="refresh" data-iconpos="right" data-theme="c" id="button" onclick="swapButton()">Refresh</a>
    <h1>&copy; 2013 | EHU</h1>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:20:54.013

.button('刷新'); 以下方法仅适用于表单按钮，基于链接的按钮没有任何关联方法。

[http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-methods.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-methods.html)

所以唯一的解决方案是使用表单按钮（

# rounding - 发票中的瑞典四舍五入

> ID：14382021
> 
> 赞同：0
> 
> 时间：2013-01-17T15:09:01.553
> 
> 标签：rounding, invoice

我正在为我的网络应用程序设计一个发票功能，并且我被介绍给瑞典、瑞士、新西兰等某些国家的数字四舍五入问题。

让我感到困惑的是，我不确定是否应该将发票总金额或每个发票行的总金额四舍五入。

谢谢。

# javascript - 使用多个变量制作函数以传递 javascript/jquery

> ID：14382022
> 
> 赞同：0
> 
> 时间：2013-01-17T15:09:03.740
> 
> 标签：javascript, jquery

我有一个小片段我想做成一个函数。但我是 javascript 新手。显然，我传递变量的方式或调用它们的方式有问题......

所以简而言之，这有效：http: [//jsfiddle.net/kkvbz/](http://jsfiddle.net/kkvbz/) 但这不是：http: [//jsfiddle.net/PrtD4/](http://jsfiddle.net/PrtD4/)

问题是我需要它作为一个函数，所以我必须让 1 个版本工作。

完整片段：

```
function cutandMakeslides (containerid,liperslide) {
//This is for footer slider, it rewrites 1 ul into several uls that contain 4 li max.
    // get the container, useful for later too...
    var container = $(containerid);

    // get all available UL and LI elements...
    var li_elements = container.find("> UL > LI").clone();

    // remove the current content so that we can rebuild it for the slider...
    container.find("> UL").remove();

    // build the slider container...
    var slide_container = $("<div />");

    // tricky part: looping through the LI's and building each of the slides...
    // first create some helpful variables...
    var li_elements_per_slide = liperslide;
    var li_counter = 0;

    // create the first slide, with a UL to hold the LI's...
    var current_li_div = $("<div />");
    current_li_div.append($("<ul />"));

    // loop through the LI's...
    li_elements.each(function(index, element){

        li_counter++;
        var current_li = $(element).clone();
        current_li_div.find("> UL").append(current_li);

        if (li_counter % li_elements_per_slide == 0)
        {
            // we've hit 4 in this list, so add the slide and make
            // a new one, using same code as before...
            container.append(current_li_div);
            current_li_div = $("<div />");
            current_li_div.append($("<ul />"));
        }

    });

    // we might have an uneven number of LI's, so we need to check for this...
    if (li_counter % li_elements_per_slide != 0)
        container.append(current_li_div);
} // end function cutandMakeslides

    //activate function above
    $(function() { cutandMakeslides(".fproductslides",3); }); 
```

有问题的部分：

```
function cutandMakeslides (containerid,liperslide) {
var container = $(containerid);
var li_elements_per_slide = liperslide;
}
$(function() { cutandMakeslides(".fproductslides",3); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:23:50.687

因此，经过大量测试并将代码移至小提琴后，问题似乎在将其移至小提琴期间自行解决，因此我们认为存在轻微的拼写或语法错误......但是使用代码比较工具我无法找到任何东西...

有问题的部分似乎都没有错误：

```
function cutandMakeslides (containerid,liperslide) {
var container = $(containerid);
var li_elements_per_slide = liperslide;
}
$(function() { cutandMakeslides(".fproductslides",3); }); 
```

[这是工作小提琴](http://jsfiddle.net/DrCord/PrtD4/2/)的副本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:13:52.407

从您的“有问题的部分”部分看来，您正在尝试传递一个类（“.fproductslides”是一个类，类以“。”开头，Id 以“#”开头）而不是 Id，因为您的变量名引导我相信你想做...

# python - Jinja active_page 在包含的文件中不起作用

> ID：14382026
> 
> 赞同：1
> 
> 时间：2013-01-17T15:09:06.417
> 
> 标签：python, templates, flask, jinja2

所以我有一个工作布局`_layout.html`（使用 Jinja2 v2.6 和 Flask），其中包括我的标题`{% include 'header.html' %}`和正文内容`{% block content %}{% endblock %}`（按此顺序）。

header.html

```
<ul>
    <li><a href="/about" {% if active_page == 'about' %} class="selected" {% endif %}>ABOUT</a></li>
</ul> 
```

about.html

```
{% extends "_layout.html" %}
{% set active_page = 'about' %}

{% block content %}
    ...
{% endblock %} 
```

问题是，由于子模板是全局的，并且在评估布局模板之前执行，因此`class="selected"`没有添加模板，因为`header.html`模板在其上下文中没有 active_page。

如果我将 header.html 内容放在主布局中一切正常，我怎样才能使用我拥有的包含和结构来让它工作？

编辑：

我也试过了`{% include 'header.html' with context %}`，`{% from 'header.html' import input with context %}`两者都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T12:17:35.407

最简单的解决方法可能是只使用 JavaScript（在这种情况下为 JQuery）：

**查询：**

```
var currentPage = window.location.pathname;

$('nav ul li a').each(function(){
    if($(this).attr('href') == currentPage){
        $(this).addClass('selected');
    }
}); 
```

此函数会将选定的类添加到`<a>`与当前窗口位置匹配的标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:18:37.473

我就是这样做的：

在我的 _mainlayout

```
 {% block stylesheets %}
    Links to stylesheets go here
 {% endblock %}

 {% block main_body_area %}
        Replace with your html body
 {% endblock %}

 {% block scripts %}
    Add js scripts here
 {% endblock %} 
```

然后在子模板中简单地执行以下操作：

```
{% extends "_mainlayout.html" %}

 {% block stylesheets %}   
    <style sheets go here/>
 {% endblock %}

 {% block main_body_area %}
    <your page content here/>
 {% endblock %}

 {% block scripts %}
    add any js scripts here
 {% endblock %} 
```

然后，您可以在 head 部分添加您的 active_page，在我给您的示例中，我保存样式表。我这样做是因为在我的 _mainlayout 文件中，我有一个标准的 css 样式表，它用于所有页面，然后如果我需要额外的页面特定布局，我将它包含在该特定页面中，如果不只是将其留空。

js 文件也是如此，我不想在不需要它们的页面上加载脚本，因此可以轻松地将它们包含在需要特定 js 文件的页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T01:03:24.820

我刚刚在 Jinja2 **2.8 版**中遇到了同样的问题。将其升级到**2.9 版**解决了这个问题。

# php - 无法通过索引获取数组对象

> ID：14382029
> 
> 赞同：0
> 
> 时间：2013-01-17T15:09:23.673
> 
> 标签：php, arrays

**编辑：** 我正在生成一个二维数组并将其作为 json 字符串存储在 db 中。当我需要修改数组中的任何内容时，我会获取 json 字符串并将其解码为

`$myarray = (array)json_decode($jsonString);`

数组的转储为

![在此处输入图像描述](../Images/ec7375332a109b05a9ad4bb798ab95f9.png)

```
$index = 2; 
```

当我想访问索引“2”处的对象时，`$myarray[$index]`我得到`null`. 请指导我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:35:16.063

在您的评论中，您说这个“数组”是从 JSON 解码的。使用时，作为第二个参数`json_decode`发送。`true`这告诉它在解码时制作数组而不是对象。

您遇到了麻烦，因为数组被解码为一个对象，您使用`->`而不是`[]`.

```
$newArray = json_decode($jsonString, true); 
```

**更新**：你试图这样做`(array)json_decode($jsonString)`，但没有奏效。那是因为 PHP 在类型转换方面很愚蠢。

这是 PHP 文档的引述：

> 如果将*对象转换为数组*，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：**整数属性是不可访问的**；私有变量在变量名前面加上类名；受保护的变量在变量名前有一个“*”。这些前置值在两边都有空字节。这可能会导致一些意外行为。

[来源： http: [//php.net/manual/en/language.types.array.php#language.types.array.casting](http://php.net/manual/en/language.types.array.php#language.types.array.casting)]

所以，它不起作用，因为 PHP 是这么说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:14:55.387

尝试

```
$index = '2'; 
```

我认为您将数组定义为关联的。

# php - php代码/公式用2位小数加密2位数值..，

> ID：14382035
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:09:29.837
> 
> 标签：php, encryption

所以，我想为收银员创建一个授权码系统，

现在，我用第 2 个数字加在一起形成一个和...然后第 3 个数字是一个乘数...

所以 342 = 3+4=7 和 7 * 2 = 14...所以对于数字 14，我发送 auth 342... 或 432，或 612 或 162 等...

我的问题是如何获得质数.. 示例 25 ..... 另一个问题是如何创建 php 代码来进行反转... 从数字中获取数字...

从 14.. 到 342 或 432 等......

有任何想法吗 ？主要目的是能够在路上思考和说出授权码......

系统将应用结果作为 perc 折扣....

所以我可以使用 915 代码创建 50% 的折扣... 9+1=10 * 5 = 50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-06T13:30:31.733

您所描述的内容类似于[format-perserving encryption](https://blog.cryptographyengineering.com/2011/11/10/format-preserving-encryption-or-how-to/)，这是一项安全实施的重要任务。

当您使用密码学时，您通常需要以下内容：

*   直截了当的推理
*   易于实施，没有大量警告和出错机会
*   学者和行业专家研究得非常透彻，以至于*无聊到了极点*

相反，保留格式的加密是：

*   复杂情况的泥潭
*   充满实施错误的机会
*   行业专家相对未经研究
*   学者们感兴趣的领域（阅读：*不无聊）*

但是，您所描述的内容听起来像是试图将保留格式的加密与**教科书 RSA**（也称为“未填充”或“无装甲”RSA）混合在一起。如果您希望您的方案安全，*请不要这样做*。

您是否考虑过 HMAC-SHA256？

# php - PHP多维数组操作

> ID：14382037
> 
> 赞同：3
> 
> 时间：2013-01-17T15:09:32.037
> 
> 标签：php, arrays, multidimensional-array

`AllUsers`我有一个数组

```
Array AllUsers
(
    [0] => Array
         (
             [0] => Array
                  (
                      [0] => Tim
                      [1] => tim@gmail.com
                  )
             [1] => Array
                  (
                      [0] => John
                      [1] => john@gmail.com
                  )
         )
    [1] => Array
         (
             [0] => Array
                  (
                      [0] => Mike
                      [1] => mike@gmail.com
                  )
             [1] => Array
                  (
                      [0] => Aron
                      [1] => aron@gmail.com
                  )
         )
) 
```

我有另一个`FilteredUsers`数组

```
Array FilteredUsers
(
    [0] => Array
         (
             [0] => John
             [1] => john@yahoo.com
         )
    [1] => Array
         (
             [0] => Mike
             [1] => mike@yahoo.com
         )
    [2] => Array
         (
             [0] => Mike
             [1] => mike@outlook.com
         )
) 
```

现在我想要的是添加`FilteredUsers[]`in`AllUsers[]`这样的每个元素 -

1.  `FilteredUsers[0]`应该添加到*Batch* `AllUsers[1]`中，因为*Batch* `AllUsers[0]`中已经有元素名称为 John 的数组
2.  同样`FilteredUsers[1]`应该添加到*批处理* `AllUsers[0]`
3.  任何*批次*（如`AllUsers[0]`, `AllUsers[1]`）都不能超过 3 个元素。如果所有*批次*都已满，则应创建一个新批次，但其中的每个元素`FilteredUsers[]`都应容纳在某个*批次*中。

所以更新后的`AllUsers`数组应该是这样的 -

```
Array AllUsers
(
    [0] => Array
         (
             [0] => Array
                  (
                      [0] => Tim
                      [1] => tim@gmail.com
                  )
             [1] => Array
                  (
                      [0] => John
                      [1] => john@gmail.com
                  )
             [2] => Array
                  (
                      [0] => Mike
                      [1] => mike@yahoo.com
                  )
         )
    [1] => Array
         (
             [0] => Array
                  (
                      [0] => Mike
                      [1] => mike@gmail.com
                  )
             [1] => Array
                  (
                      [0] => Aron
                      [1] => aron@gmail.com
                  )
             [2] => Array
                  (
                      [0] => John
                      [1] => john@yahoo.com
                  )
         )
    [2] => Array
         (
             [0] => Array
                  (
                      [0] => Mike
                      [1] => mike@outlook.com
                  )
         )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:11:48.383

这是工作代码：

我还为您创建了一个代码 pastebin：http: [//codepad.org/iyZUpYxc](http://codepad.org/iyZUpYxc)

```
<?php

//PHP Multidimensional Array Manipulation

$allUsers = array();
$allUsers[] = array(array('name'=>'Tim', 'email'=>'tim@gmail.com'), array('name'=>'John','email'=>'john@gmail.com'));
$allUsers[] = array(array('name'=>'Mike', 'email'=>'mike@gmail.com'), array('name'=>'Aron','email'=>'aron@gmail.com'));

$filteredUsers = array();
$filteredUsers[] = array('name'=>'John', 'email'=>'john@yahoo.com');
$filteredUsers[] = array('name'=>'Mike', 'email'=>'mike@yahoo.com');
$filteredUsers[] = array('name'=>'Mike', 'email'=>'mike@outlook.com');

//RULE: one batch cannot have duplicate user names

//print_r($allUsers);
//print_r($filteredUsers);

foreach ($filteredUsers as $filteredUser) {
  //$filteredUser is a single dimensional arrray.

  $filteredUserAdded = 0;
  foreach ($allUsers as &$allUser) {
     //$allUser is a muldimentional array.

     //Check whether the current batch contains $filteredUser['name'] value
     $intersect = array_uintersect(array($filteredUser), $allUser, 'compareName');
     if (empty($intersect) && count($allUser) < 3) {
         //We can add filtereduser here
         $allUser[] = $filteredUser; 
         $filteredUserAdded = 1;
     }

  } // end foreach $allUsers

  if ($filteredUserAdded == 0) {
      //This filtered user was not added in any existing batch.
      //Hence add it in a new batch
      $allUsers[] = array($filteredUser);       
  }
} // end foreach $filteredUsers

//function to compare the 'name' column value of two arrays
function compareName($array1, $array2)
{
   return strcmp($array1['name'], $array2['name']);
}

//Note: http://in1.php.net/array_uintersect is the key used here for comparison

print_r($allUsers);
print_r($filteredUsers);

?> 
```

注意：您在上面的输出中错过了数组（ [0] => John [1] => john@yahoo.com ）。

但我的代码输出也正确。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:35:53.373

接受挑战！！！

```
##### BORROWED FROM OMG
//PHP Multidimensional Array Manipulation

$allUsers = array();
$allUsers[] = array(array('name'=>'Tim', 'email'=>'tim@gmail.com'), array('name'=>'John','email'=>'john@gmail.com'));
$allUsers[] = array(array('name'=>'Mike', 'email'=>'mike@gmail.com'), array('name'=>'Aron','email'=>'aron@gmail.com'));

$filteredUsers = array();
$filteredUsers[] = array('name'=>'John', 'email'=>'john@yahoo.com');
$filteredUsers[] = array('name'=>'Mike', 'email'=>'mike@yahoo.com');
$filteredUsers[] = array('name'=>'Mike', 'email'=>'mike@outlook.com');

# using PHP's unique continue statement!    

# loop through filtered users
foreach($filteredUsers as $fUser) {
     #loop through all users batches
     foreach($allUsers as $key=>$aUsers) {
        # is it full?
        if(isset($aUsers[2]))continue;
        # any user with same name?
        foreach($aUsers as $aUser)
            if($aUser['name']==$fUser['name'])continue 2;
        # push in current batch
        $allUsers[$key][]=$fUser;
        continue 2;
    }
    # new batch needed
    $allUsers[]=$fUser;
}
var_dump($allUsers); 
```

如果您不知道，[continue](http://php.net/manual/en/control-structures.continue.php)接受一个“参数”，表示要冒泡的控制流的数量。

工作代码可以在[这里](http://sandbox.onlinephpfunctions.com/code/8570f51d7ef3543de2816295ca2ec0b41c9fd8ea)找到。

# python - 将 [0] 附加到 python 中的方法有什么作用？

> ID：14382038
> 
> 赞同：2
> 
> 时间：2013-01-17T15:09:39.243
> 
> 标签：python

将 [0] 附加到 python 中的方法有什么作用？例如，在下面的 [0] 被附加到一个方法。

```
print "Unexpected error:", sys.exc_info()[0] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:14:32.960

它调用该方法并从返回值中获取第 0 个元素。

```
>>> def test():
...   return ['item0', 'item1']
...
>>> test()
['item0', 'item1']
>>> test()[0]
'item0'
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T15:11:03.570

这意味着`sys.exc_info()`返回一些集合（例如列表、元组或带有 int 键的字典）并打印它的第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:21:14.183

如果一个方法返回一个[可迭代/可索引的集合](http://docs.python.org/2/library/collections.html)，那么它将从该[集合](http://docs.python.org/2/library/collections.html)中检索第一个结果（位于位置 0 的结果）

例如：

```
print sys.exc_info()
> ['item1', 'item2','item3']

print sys.exc_info()[0]
> 'item1'

print sys.exc_info()[2]
> 'item3' 
```

# php - 如何将表单提交存储到文本文件中

> ID：14382039
> 
> 赞同：0
> 
> 时间：2013-01-17T15:09:40.007
> 
> 标签：php, html, radio-button, text-files

我有一个多行的文本文件。我必须将每一行的内容显示为一个单独的单选按钮，然后将用户的选择存储在另一个文本文件中。我使用 PHP 完成了“读取文件并显示为单选按钮”部分。

```
<?php
         $file = fopen("XYZ.txt", "r");
         //Output a line of the file until the end is reached
         echo "ABC" . "<br>";
         while(!feof($file))
         {
              $f = fgets($file);
              if (strpos ($f, ".abc") !== false)
              {
                 echo "<input type='radio' name='abc'/>";
                 echo "<a href = \"ftp://blah/".$f."\">" .$f. "</a><br>";
              }
         }
         fclose($file); 
?> 
```

我使用`<a>`是因为我必须将每个单选按钮链接到一个站点。我不知道如何将选择存储在文本文件中。:(

# playframework - Play Framework 上的任何 Jython 教程

> ID：14382041
> 
> 赞同：3
> 
> 时间：2013-01-17T15:09:43.760
> 
> 标签：playframework, jython

我喜欢 jython 而我不喜欢 Django。所以我在想是否可以使用播放框架运行基于 jython 的应用程序。它确实支持 groovy 和 scala，所以理论上它似乎是合理的。有没有我可以遵循的文件。因为我google的时候没有找到。我在看 play framework 的另一个原因是因为我也不喜欢 servlet 容器！

# qt - 如何使单击 QTreeView 部分选中的节点取消选中该节点？

> ID：14382050
> 
> 赞同：1
> 
> 时间：2013-01-17T15:09:58.037
> 
> 标签：qt, checkbox, treeview, tri-state-logic

我有一个`QTreeView`由子类填充的`QAbstractItemModel`，允许用户检查叶节点。如果检查了非叶节点的后代叶节点的适当子集，则该节点被部分检查（`Qt::CheckStateRole`is `Qt::PartiallyChecked`）。

当前，如果用户单击部分选中的节点，则检查状态将更改为`Qt::Checked`；我希望它改为清除节点（`Qt::Unchecked`）。有没有办法自定义这种行为？为了控制它，`QCheckBox`我会覆盖[`QAbstractButton::nextCheckState()`](http://doc.qt.digia.com/qt/qabstractbutton.html#nextCheckState)，但我找不到任何类似的东西`QTreeView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:16:41.650

在您的模型 setData 中实现所需的行为

```
bool QAbstractItemModel::setData ( const QModelIndex & index, const QVariant & value, int role = Qt::EditRole )

For Qt::CheckStateRole 
```

因此，当您收到 Qt::PartiallyChecked 的价值时。您遍历项子项以设置为 Qt::Unchecked，并更改当前项。

# active-directory - 拿到token后怎么办？

> ID：14382054
> 
> 赞同：1
> 
> 时间：2013-01-17T15:10:07.037
> 
> 标签：active-directory, wif, single-sign-on, adfs, sts-securitytokenservice

这是情况，我现在应该做什么

*   我已将 CustomSTS 作为 Home 领域发现页面中的默认选择（已将 Custom STS 配置为 Claims Provider Trust ）

*   添加到 ADFS 2.0 的任何依赖方现在都将返回自定义 STS 以进行单点登录

*   对于自定义身份验证存储，我使用用于 Active Directory 的 CustomSTS 我尝试通过链接[http://msinnovations.wordpress.com/2011/03/28/some-tips-on-active-federation-with-adfs-2-中的代码0/](http://msinnovations.wordpress.com/2011/03/28/some-tips-on-active-federation-with-adfs-2-0/)

效果很好，我得到了令牌。但是现在，我如何设置 ADFS 2.0 设置的单点登录 cookie `FedAuth`，`FedAuth1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:35:43.707

您最终需要在传递 AD 帐户的令牌或用户名/密码的基类上调用 SignIn。这就是你所能做的。

# javascript - GMail 上下文小工具 - 匹配多个条件的多个模式

> ID：14382059
> 
> 赞同：1
> 
> 时间：2013-01-17T15:10:21.707
> 
> 标签：javascript, gmail, text-extraction, gmail-contextual-gadgets

我正在开发一个简单的 GMail 上下文小工具（现在，如果满足 2 个条件，则 gmail 页面中有一个简单的“hello world”）。但我需要匹配一个双重条件，而不仅仅是一个。正因为如此，我不能使用预设提取器（如果我在清单中使用两个提取器，使用预设提取器，它们在 OR 条件下工作）。

根据[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/google-apps-developer-blog/JWrEdxBMfvU)，有一种方法可以匹配双重条件：

> 自定义提取器允许开发人员在满足一系列条件时触发他们的小工具。例如，开发人员可以编写一个提取器，仅当“Hello world”出现在主题中**并且**“jo...@example.com”是电子邮件的发件人时触发小工具。这允许开发人员更精细地调整他们的小工具，并提供更多相关的上下文信息。

这正是我需要的，如果发件人是“xxx@xx.com”并且主题是“zzz”，我需要**匹配**。

[问题是我在google api 页面](https://developers.google.com/google-apps/gmail/contextual_gadgets#writing_a_custom_extractor)中找不到有关此问题的任何参考资料

如何在自定义提取器中定义*双重 AND 条件*？

谢谢再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T04:32:54.053

尝试在您的一个字段的自定义提取器中使用搜索模式，并在清单中的另一个字段上应用过滤器。

# powershell - 从 TFS 销毁已删除的文件/文件夹

> ID：14382060
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:25.013
> 
> 标签：powershell, tfs, tf-cli

如何销毁所有 TFS 文件和文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:10:25.013

使用以下 Powershell + TF.exe 脚本销毁 TFS 中所有已删除的文件和文件夹

```
$tfsServer = Get-TfsServer -name http://YOURTFSSERVER:PORT    
$destroyList = get-tfschilditem -item $/Root/ -server $tfsServer -Deleted -recurse | Where {$_.DeletionId -ne 0} 
foreach($item in $destroyList)
{
    $itemPath = '"' + $item.ServerItem + ";X" + $item.DeletionId + '"'
    tf destroy $itemPath /i /startcleanup
} 
```

# java - 如何使用套接字编程在两个 android 手机之间创建实时音频流..？

> ID：14382061
> 
> 赞同：7
> 
> 时间：2013-01-17T15:10:25.527
> 
> 标签：java, android, sockets, io, audio-streaming

我正在尝试开发一个 android 应用程序，该应用程序将允许通过使用套接字编程在两个 android 手机之间进行音频流式传输。我应该使用什么来传输音频数据？我正在使用 api 10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:19:46.160

如果您想在局域网内链接，那么就有希望；但是，如果您想通过 Internet 连接，那就算了，[NAT](http://en.wikipedia.org/wiki/Network_address_translation)和[CGN](http://en.wikipedia.org/wiki/Carrier-grade_NAT)之类的东西不会让您这样做（好吧，除非您为您的应用程序提供第三方中继服务器）。

# java - Java - 如何更改“本地”？事件侦听器中的变量

> ID：14382064
> 
> 赞同：4
> 
> 时间：2013-01-17T15:10:28.393
> 
> 标签：java, variables, event-handling

有一个快速的问题，我希望有人能回答。基本上我有一个字符串变量，它需要根据组合框中的值进行更改，该组合框中附加了一个事件侦听器。但是，如果我将字符串设为 final，则无法更改，但如果我不将其设为 final，则 eclipse 会抱怨它不是最终的。什么是最好的（也是最简单的）解决方法？

代码如下

```
final String dialogOutCome = "";

//create a listener for the combo box
Listener selection = new Listener() {

    public void handleEvent(Event event) {
    //get the value from the combo box
    String comboVal = combo.getText();

    switch (comboVal) {
         case "A": dialogOutCome = "a";
         case "B": dialogOutCome = "b";
         case "C": dialogOutCome = "c";
         case "D": dialogOutCome = "d";
    }
   }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:15:06.607

你不能。

考虑一下：

*   只要在运行中声明的方法，局部变量就存在。
*   一旦该方法调用结束（通常是因为该方法存在），变量就会消失
*   听众可以（而且通常确实）活得更久

那么当方法已经返回并且侦听器尝试修改局部变量时会发生什么？

因为这个问题没有一个很好的答案，他们决定通过不允许访问非`final`局部变量来使这种情况变得不可能。

有两种方法可以解决这个问题：

*   尝试更改字段而不是局部变量（这可能也更适合侦听器的生命周期）*或*
*   使用`final`局部变量，您可以更改其中的*内容*（例如 a`List`或`String[]`带有单个元素的 a）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:20:58.207

These answers are all telling you how to make a flawed approach "work" at a superficial level.

The real *problem* is that you're trying to apply traditional, synchronous, "call/return" coding patterns to a library that doesn't support it. The real *answer* is that when the event you're waiting for happens asynchronously, the stuff you want to *do* after the event has to happen asynchronously as well. Understanding the event-driven nature of Swing is vital to being effective in it.

In other words, think of what piece of code will read `dialogOutCome`. Will some action be performed? If so, perform that action *from the handler* (or as a result of the handler) instead.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:15:24.107

另一种方法是使用这种方法。

```
public class ReturnValueListener implements Listener {

    private String dialogOutCome;

    public void handleEvent(Event event) {
        //get the value from the combo box
        String comboVal = combo.getText();

        switch (comboVal) {
            case "A": dialogOutCome = " gay";
            ase "B": dialogOutCome = " ugly";
            case "C": dialogOutCome = " smelly";
            case "D": dialogOutCome = " great";
        }
    }

    public String getDialogOutCome() {
        return dialogOutCome;
    }
}

Listener selection = new ReturnValueListener();
//Set my listener somewhere,
....registerListener(selection);
//After my handleEvent is called
String dialogOutCome = selection.getDialogOutCome(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T15:14:39.313

只需创建简单的`StringWrapper`对象：

```
static class StringWrapper {
       String value;

       StringWrapper(String value) {
           this.value = value;
       } 
} 
```

并在字段类型中使用它`dialogOutCome`：

```
final StringWrapper dialogOutCome = new StringWrapper("");

Listener selection = new Listener() {

    public void handleEvent(Event event) {
        String comboVal = combo.getText();

        switch (comboVal) {
          case "A": dialogOutCome.value = " gay";
          case "B": dialogOutCome.value = " ugly";
          case "C": dialogOutCome.value = " smelly";
          case "D": dialogOutCome.value = " great";
        }
   }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T15:18:12.470

您可以使用 setter 进行间接寻址。这将消除最后的限制（因为您访问的字段是“this”而不是“dialogOutcome”。

```
String dialogOutCome = "";

void setOutcome(String value){
  dialogOutCome = value;
}

//create a listener for the combo box
Listener selection = new Listener() {

    public void handleEvent(Event event) {
    //get the value from the combo box
    String comboVal = combo.getText();

    switch (comboVal) {
         case "A": setOutcome(" gay");
         case "B": setOutcome(" ugly");
         case "C": setOutcome(" smelly");
         case "D": setOutcome(" great");
    }
   }
}; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-17T15:20:19.523

解决方法：使用**StringBuilder**而不是`String`. 当然，`StringBuilder`不能改变 中的引用`handleEvent`，但我们可以调用它的方法。

```
 final StringBuilder sb = new StringBuilder();

    Listener selection = new Listener() {

        public void handleEvent(Event event) {
        ...
        switch (comboVal) {
             case "A": sb.delete(0, sb.length()).append("a");
             case "B": sb.delete(0, sb.length()).append("b");
            ...
        }
       }
    };

...
System.out.println(sb.toString()); 
```

然后你可以通过`StringBuilder.toString();`

*编辑：请提供否决这个答案的原因。*

# sqlite - SQLite 存储以零开头的字符串，例如“001”

> ID：14382065
> 
> 赞同：2
> 
> 时间：2013-01-17T15:10:28.963
> 
> 标签：sqlite, types

我在 SQLite 中选择哪种数据类型来在数据库中存储诸如“001”之类的字符串。

我试过使用*文本*，但是当我输入字符串 001 时，它会删除 00，只输入 1。

我什至尝试过使用“blob”数据类型，但仍然没有运气。他们都在数字前去掉零。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:16:19.020

对我来说没问题：

```
sqlite> create table sotest
   ...> (
   ...> col1 varchar(20)
   ...> );
sqlite>
sqlite> select * from sotest;
sqlite>
sqlite> insert into sotest values ('001');
sqlite> select * from sotest;
001
sqlite> 
```

也许你没有引用你的字符串？例如：

```
sqlite> insert into sotest values ('001');
sqlite> select * from sotest;
001
sqlite> insert into sotest values (001);
sqlite> select * from sotest;
001
1
sqlite> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T06:27:38.857

列类型应设置为 varchar，而不是字符串，如果类型为字符串零，将自动删除。

# xaml - 网格列按内容宽度调整大小，但受网格宽度限制

> ID：14382066
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:30.417
> 
> 标签：xaml, resize, grid, windows-phone-8

我有以下标记：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>

    <TextBlock x:Name="Col1" Text="Text1" Grid.Column="0" />
    <TextBlock x:Name="Col2" Text="Text12" Grid.Column="1" />
</Grid> 
```

如果我在里面放了很多文字，`Col1`就会超出屏幕，`Col2`根本看不到。我想改变这种行为，如果文本太多，`Col1`那么它的宽度就会减小，这样`Col2`就可以完全看到了。

另一方面，如果我将标记更改为此：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>

    <TextBlock x:Name="Col1" Text="Text1" Grid.Column="0" />
    <TextBlock x:Name="Col2" Text="Text12" Grid.Column="1" />
</Grid> 
```

以下是说明我希望 TextBlocks 如何表现的图像：

两个 TextBlock 的组合宽度小于屏幕，因此它们一个接一个。 ![在此处输入图像描述](../Images/3150ca1f18f599ecc22e5200965e484b.png)

第一个文本块很长，因此被裁剪以在屏幕内包含第二个文本块。 ![在此处输入图像描述](../Images/2535b40294ad006d9aab2e0114f6009e.png)

然后，当有很多文本时一切正常，但是当文本量很小时，和`Col1`之间存在间隙。我应该怎么做才能在这两种情况下获得所需的行为？`Col1``Col2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:19:53.663

修改;

```
<Grid HorizontalAlignment="Left">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>    
    <TextBlock x:Name="Col1" Text="Text1" />
    <TextBlock x:Name="Col2" Text="Text12" Grid.Column="1" TextWrapping="Wrap" />
</Grid> 
```

然后请记住限制它们的整体大小，这将像另一个一样放置在父面板容器中`Grid`

# twitter-bootstrap - 将 Bootstrap Javascript 函数应用于 Knockout 模板中的项目

> ID：14382067
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:31.080
> 
> 标签：twitter-bootstrap, knockout.js

我正在同时使用 Knockout 和 Bootstrap。不在剔除模板内的锚标记显示出很好的工具提示效果，但模板内的锚标记却没有。给定模板外部的 html（这有效：一个样式化的工具提示出现在锚点下方）

```
<a data-original-title="Setup" href="'Setup" class="tip-bottom"><i class="icon-th"></i>Setup</a> 
```

给定一个淘汰赛模板

```
<tbody data-bind="foreach: {data: providers, afterRender: KoAfterRender}">
  <tr class="">
    <td class="taskOptions">
      <a href="#" class="tip-top" data-original-title="Update"><i class="icon-ok"></i></a>
    </td>
  </tr>
</tbody> 
```

以及我的 ViewModel 中的一个函数

```
function koAfterRender(element, index, data) {
  $('.taskOptions a').popover();
}
obj.KoAfterRender = koAfterRender; 
```

我希望能够按照[本文](http://www.w3resource.com/twitter-bootstrap/popover-tutorial.php)`.popover`手动应用该功能，但应用该功能没有效果（也没有错误）。

我怎么了？

谢谢。

编辑：我已经意识到我的代码（以及 Paul Manzotti 添加的自定义绑定代码）实际上都可以工作 - 问题是即使我应用`.popover()`到模板中的锚点，它仍然没有显示工具提示。

EDIT2：我是个白痴。`.popover()`是错误的功能。我想`.tooltip()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:21:07.867

我没有使用模板，但是查看它的[页面](http://knockoutjs.com/documentation/template-binding.html)，你不应该像这样使用它：

```
template: { name: 'person-template', foreach: providers, afterRender: KoAfterRender } 
```

或者，您可以尝试使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)来添加弹出框代码。您应该能够将其添加到每个 a 元素

```
<a data-bind="KoAfterRender: val">

ko.bindingHandlers.KoAfterRender = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called when the binding is first applied to an element
        // Set up any initial state, event handlers, etc. here
        $(element).popover();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:36:51.580

因此，要回答我自己的问题：要将[引导工具提示](http://twitter.github.com/bootstrap/javascript.html#tooltips)应用于 Knockout 模板中的项目，一种解决方案是使用自定义绑定（谢谢 Paul）。

所以给定一个模板：

```
<tbody data-bind="foreach: {data: providers}">
    <tr class="">
        <td><a data-bind="KoAfterRender:null" href="#" class="tip-top" data-original-title="Update"><i class="icon-ok"></i></a></td>                                    
    </tr>
</tbody> 
```

和自定义绑定：

```
ko.bindingHandlers.KoAfterRender = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {                                                       
        $(element).tooltip();
    }
}; 
```

应显示数据绑定元素上的工具提示。

# batch-file - 批量移动和重命名文件（来源不明）

> ID：14382069
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:33.323
> 
> 标签：batch-file, rename, move

我制作了一个批处理脚本，通过将文件拖放到脚本上来移动和重命名文件。这将假设文件的源是未知的，但目标目录是。

我的解决方案是 CD 到目标目录，反转源文件名，使用带有反斜杠的 for 命令作为分隔符来获得文件名，然后再次反转它，最后重命名它。

只是想知道是否有更简单的解决方案。

```
@echo off

echo %1
set newSong=%1

cd "C:\Riot Games\League of Legends\RADS\projects\lol_air_client\releases\0.0.0.230\deploy\assets\sounds\ambient"

if not exist LoginScreenIntro.mp3.bak rename LoginScreenIntro.mp3 LoginScreenIntro.mp3.bak
del LoginScreenIntro.mp3

copy %newSong% "%CD%"

Call :ReverseString %newSong%
Set ReverseString.Result="%ReverseString.Result%"
for /f "tokens=1 delims=\" %%a in (%ReverseString.Result%) do set reversesong=%%a
Call :ReverseString "%reversesong%"
set newSong=%ReverseString.Result%

rename "%newSong%" LoginScreenIntro.mp3
pause

:ReverseString
  Set ReverseString.TempVar=%~1
  Set ReverseString.Result=
  :ReverseString.Loop
    Set ReverseString.Result=%ReverseString.TempVar:~0,1%%ReverseString.Result%
    Set ReverseString.TempVar=%ReverseString.TempVar:~1,999%
    if not "%ReverseString.TempVar%"=="" goto ReverseString.Loop
Goto :Eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:28:09.103

这个怎么样？

```
ren %1 NewName.ext
move %~dp1\NewName.ext NewDir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:15:49.047

呵呵，我所需要的只是

```
set newsong=%~n1%~x1 
```

# javascript - 创建一个 facebook likebox

> ID：14382072
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:35.657
> 
> 标签：javascript, facebook, facebook-graph-api

我的一个客户（一家设计工作室）要求我在他们的网站上设计类似框社交插件的样式。据我所知，现在无法通过弃用 fbml 标记上的“css”参数来完成此操作。

所以我必须采取的路线是使用 js SDK（或 php SDK）自己重新创建类似框，但问题是我找不到喜欢我的页面的用户（和他们的照片）。我正在搜索 opengraph 资源管理器参数，但找不到任何东西。

*   有谁知道我必须在图形 api 中遵循哪个 url 才能得到我想要的？
*   我是否必须拥有访问令牌才能执行此类操作？我注意到如果您没有 Facebook 帐户（它显示图片），likebox 插件会起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:29:16.677

您无法自行重新创建点赞框。Facebook API 不会返回喜欢您的对象的用户列表。这样做是为了阻止人们获取喜欢的用户列表并向他们发送垃圾邮件。

目前，您只能查询特定的、经过身份验证的用户或他们的哪些朋友喜欢您的对象。

你可以通过用最近海报的图像填充你的假盒子来构建类似的东西。您需要处理过滤掉重复项和页面本身发布的问题，但这应该可以帮助您开始：`/PAGE_ID/feed?fields=from.name,from.picture&limit=10`

您将需要一个`access_token`来获取此数据。我会作为一个应用程序进行身份验证来做到这一点。

# drupal-7 - 在自定义模块中添加权重参数

> ID：14382074
> 
> 赞同：0
> 
> 时间：2013-01-17T15:10:47.957
> 
> 标签：drupal-7

我创建了一个内容类型，它有很多节点。并编写自定义模块以在首页上显示。

我的节点顺序：

```
 $themeurl = '/drupal/'.path_to_theme().'/images';
    $sql = "SELECT * FROM `node`
            LEFT JOIN `field_data_field_anasayfa_catwalk` ON `field_data_field_anasayfa_catwalk`.`entity_id` = `node`.`nid`
            WHERE type = 'designers_albums'
            AND `node`.`status` = 1
            AND `node`.`language` = '".$language->language."'
            AND `field_data_field_anasayfa_catwalk`.`field_anasayfa_catwalk_value` = 1
            ORDER BY `node`.`created` ASC"; 
```

但是现在，安装了权重模块并希望按重量排序。如何更改此选项？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:52:35.697

实体（节点）权重存储在`weight_weights`数据库表中。你可以试试那个查询

```
 $sql = "SELECT * FROM `node`
        LEFT JOIN `field_data_field_anasayfa_catwalk` ON `field_data_field_anasayfa_catwalk`.`entity_id` = `node`.`nid`
        LEFT JOIN `weight_weights` AS w ON w.entity_id=`node`.`nid`
        WHERE type = 'designers_albums'
        AND `node`.`status` = 1
        AND `node`.`language` = '".$language->language."'
        AND `field_data_field_anasayfa_catwalk`.`field_anasayfa_catwalk_value` = 1
        ORDER BY w.weight, `node`.`created` ASC"; 
```

顺便说一句，将来您应该考虑学习 Drupal 数据库抽象层或 EntityFieldQuery。

# jquery - jQuery dataTables 自定义按钮

> ID：14382076
> 
> 赞同：2
> 
> 时间：2013-01-17T15:11:00.327
> 
> 标签：jquery, button, datatable

创建两个自定义按钮的任何方式：`Edit`和`Delete`，然后我可以使用`.click()`或任何其他方式捕获它，然后执行`$.post()`for`Delete`并重定向到`http://site.com/admin/news/edit/1212`for `Edit`？

这是我刚刚实现`dataTables()`的，并且在初始版本中缺少一些东西，这些按钮就是其中之一。

例如，这是我之前为该`Delete`活动所做的：

```
$('.delete_item').click(function(){
    $("input[name^='selector']:checked:enabled").each(function(index, value){
        var block = $(this).parent().parent();
        var id = $(this).parent().parent().find('.id').text();
        $.post(base_url+'admin/articles/delete/'+id,function(data) {
            if (data == true)
            {
                block.fadeOut('slow');
            }
            else
            {
                alert('there was an error, please try again');
            }
        }, 'json');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T15:34:08.640

你想告诉我们每一行都有一个有两个按钮的列：编辑和删除，当你点击它们时，你会按照你的描述进行操作？

如果是，

## [演示](http://jsfiddle.net/sThGk/101/)jsFiddle

你应该做这样的事情：

首先，使用您的按钮创建一个表单，在您的表单中，您就是您的数据表：

前任：

### html

```
<form type="post">
   <div><input id="button" type="button" value="delete" /></div>
   <div class="container">

     <table cellpadding="0" cellspacing="0" border="0" class="dataTable" id="example">
       <thead>
          <tr>
            <th>Select</th>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
          </tr>
       </thead>
       <tbody>
          <tr>
            <td><span><input name="row_1" type="checkbox" value="id1" /></span></td>
            <td>Trident</td>
            <td>Internet
                   Explorer 4.0</td>
            <td>Win 95+</td>
            <td> 4</td>
            <td>X</td>
          </tr>
       </tbody>
     </table>

   </div>
</form> 
```

### javascript

```
var oTable = $('#example').dataTable();
$('#button').click(function() {
  alert(JSON.stringify($('form').serialize()));
  //do you post here example :
  //$.ajax({
  //    url:base_url+'admin/articles/delete/',
  //    data: $('form').serializeArray(), // or $('form').serialize()
  //    type:'POST',
  //    dataType:'json'
  //}).done(function(data){
  //if (data)
  //{
  //   block.fadeOut('slow');
  //}
  //else
  //{
  //   alert('there was an error, please try again');
  //}
  //});
}); 
```

那对你有帮助吗？

# c# - 在没有兼容模式的情况下，事件不会在实时站点上呈现

> ID：14382081
> 
> 赞同：0
> 
> 时间：2013-01-17T15:11:11.420
> 
> 标签：c#, asp.net, iis-6, windows-server-2003

我在 ASP.NET (.NET 4) 中有一个项目，并且它会丢弃我的事件 ( `SelectedIndexChanged`)

我的本地主机使用 IIS 8.0，而网络服务器使用的是 IIS 6.0

我的标记中有这段代码：

`<asp:DropDownList runat="server" ID="ddlUsers" EnableViewState="True" AutoPostBack="True" Style="width: 120px;" OnSelectedIndexChanged="ddlUsers_SelectedIndexChanged" />`

并在`localhost`其上呈现为：

```
<select name="ctl00$cphPages$ddlUsers" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$cphPages$ddlUsers\&#39;,\&#39;\&#39;)&#39;, 0)" id="cphPages_ddlUsers" style="width: 120px;">
    <option selected="selected" value="">-- Choose user --</option>
    <option value="1">Test 1</option>
    <option value="2">Test 2</option>
    <option value="3">Test 3</option>
    <option value="4">Test 4</option>
    <option value="5">Test 5</option>
    <option value="6">Test 6</option>
</select> 
```

在生产服务器上，它呈现为：

```
<select name="ctl00$cphPages$ddlUsers" id="cphPages_ddlUsers" style="width: 120px;">
    <option selected="selected" value="">-- Choose user --</option>
    <option value="1">Test 1</option>
    <option value="2">Test 2</option>
    <option value="3">Test 3</option>
    <option value="4">Test 4</option>
    <option value="5">Test 5</option>
    <option value="6">Test 6</option>
</select> 
```

因此我的问题是，当我在下拉列表中选择某些内容时，它不会触发事件。如果我使用`Width`-property 设置宽度，它也会消失。

更新：它在兼容模式下工作，但不是其他方式（在 IE10 中）

更新 #2：Live 它在 Windows Server 2003 上运行。

# android - 列表视图 OnItemClickListener 不起作用？

> ID：14382082
> 
> 赞同：1
> 
> 时间：2013-01-17T15:11:12.830
> 
> 标签：android, listview, onitemclicklistener

我有一个可能很简单的问题，但我不太明白我做错了什么。我有一个列表视图，它作为文件浏览器加载。这是当我单击任何项​​目时应该发生的事情。

```
protected void onListItemClick(ListView l, View v, int position, long id) {

File file = new File(path.get(position));

if (file.isDirectory())
{

if(file.canRead())
getDir(path.get(position));
else
{
new AlertDialog.Builder(this)
.setIcon(R.drawable.ic_launcher)
.setTitle("[" + file.getName() + "] folder can't be read!")
.setPositiveButton("OK", 
  new DialogInterface.OnClickListener() {   
   public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub
   }
  }).show();
}

}
else
{
new AlertDialog.Builder(this)

.setIcon(R.drawable.ic_launcher)

.setTitle("[" + file.getName() + "]")

.setPositiveButton("OK", 

  new DialogInterface.OnClickListener() {

   public void onClick(DialogInterface dialog, int which) {

    // TODO Auto-generated method stub

   }

  }).show();

}

} 
```

但是当我点击这些项目时，什么也没有发生。我什至检查了 logcat 以查看单击时是否有任何活动，但绝对没有。我是否需要以某种方式将此侦听器链接到我的特定列表视图？另外，如果我需要发布更多信息，请告诉我。非常感谢您的帮助！

新问题

```
AlertDialog show = new AlertDialog.Builder(this)
.setIcon(R.drawable.ic_launcher)
.setTitle("[" + file.getName() + "] folder can't be read!")
.setPositiveButton("OK", 
  new DialogInterface.OnClickListener() {   
   public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub
   }
  }).show();
}

}
else
{
new AlertDialog.Builder(this)
.setIcon(R.drawable.ic_launcher)
.setTitle("[" + file.getName() + "]")
.setPositiveButton("OK", 
  new DialogInterface.OnClickListener() {

   public void onClick(DialogInterface dialog, int which) {

    // TODO Auto-generated method stub

   }

  }).show();

} 
```

在这两个上，我都收到一个错误，即 alertDialog 未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:51:02.423

是的，您需要`ListView`注册`OnItemClickListener`

比如像这样：

```
myListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> list,
        View view, int position, long id) {
        // Your code goes here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:33:04.027

将上下文从“this”更改为“YourActivityName.this”

例如，新的 AlertDialog.Builder(YourActivityName.this);

# c# - 如何根据用户访问允许的数据库来选择数据库？

> ID：14382086
> 
> 赞同：1
> 
> 时间：2013-01-17T15:11:22.050
> 
> 标签：c#, sql, sql-server-2008-r2

当您以具有 Windows 身份验证权限的 SQL Server 2008 R2 管理员身份登录时，我会执行以下命令。

```
var sqlAdapter = 
    new SqlDataAdapter(@"select dtb.name as [Name],
                                CAST(case when dtb.name in ('master','model','msdb','tempdb') then 1 
                                          else dtb.is_distributor end AS bit) AS [IsSystemObject]
                         from model.sys.databases dtb", connection);
sqlAdapter.Fill(table); 
```

但是，当我尝试以只有 sp_datareader 权限的 datareader 身份登录时，出现异常：

> *服务器主体“datareader”无法在当前安全上下文下访问数据库“模型”。*

现在有没有办法在创建适配器之前检查用户权限？例如，如果用户只能访问特定数据库或数据库仅显示（或加载）这些数据库？如果用户具有完全权限，则执行我在此处编写的适配器命令。如果我的问题不是那么容易理解，请告诉我，我会尽可能地澄清它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:30:25.650

用户需要在“**用户映射**”下对您的数据库（模型）拥有“ **db_datareader** ”权限。

 ***安全*->*登录*-> 右键单击​​“ *datareader* ”（您的用户）->*属性*->*用户映射*

选择数据库（在您的情况下为模型），然后在下方检查 db_datareader 角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:53:34.760

好的，我已将命令更改为：

```
select dtb.name as [Name],
CAST(case when dtb.name in ('master','model','msdb','tempdb') then 1 
else dtb.is_distributor end AS bit) AS [IsSystemObject]
from sys.databases dtb 
```

删除了模型，现在它只有 sys.databases。这是有效的，因为我现在不必去在模型上进行用户映射。但是，如果查询只能返回当前用户具有权限的数据库，那就太好了。**

# c - 在分配的内存范围之外写入时没有错误

> ID：14382094
> 
> 赞同：-4
> 
> 时间：2013-01-17T15:11:43.367
> 
> 标签：c, pointers, memory, malloc

我的`main.c`内容：

```
int main(int argc, char **argv)  
{  
    void * tmp = malloc(8);  
    ((double *)tmp)[0] = 100;  
    ((double *)tmp)[1] = 102;  
    printf("tmp %p\n", tmp);  
    printf("tmp[0] %d %f %p\n", sizeof(((double *)tmp)[0]), ((double *)tmp)[0], &((double *)tmp)[0]);  
    printf("tmp[1] %d %f %p\n", sizeof(((double *)tmp)[1]), ((double *)tmp)[1], &((double *)tmp)[1]);  
    return EXIT_SUCCESS;  
} 
```

* * *

```
=========================OUTPUT=========================  
tmp 0xee8010  
tmp[0] 8 100.000000 0xee8010  
tmp[1] 8 102.000000 0xee8018  
======================================================== 
```

首先，我确实在变量 tmp 中分配了 8 个字节的内存，并将数字 100 分配给地址 0xee8010。

```
((double *)tmp)[0] = 100; 
```

我还将数字 102 分配给未分配的内存 0xee8018。

```
((double *)tmp)[1] = 102; 
```

但是我在构建时和运行时都没有看到任何错误消息。为什么不？

请帮助我理解这一点。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:13:27.057

写入未分配的内存或写入超出分配内存的范围会导致**[未定义的行为（UB）](http://en.wikipedia.org/wiki/Undefined_behavior)**，这不一定会导致崩溃。未定义的行为意味着可以观察到任何行为，当发生 UB 时
，编译器实现不需要执行任何特定的操作（*如您所期望的分段错误）。*

> **但是我在构建时和运行时没有看到任何错误消息。**

对于不遵守语言标准的代码，您会收到编译时错误。在这种情况下，代码遵守语言标准，但会执行语言标准未定义的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T08:31:57.887

一个好习惯是始终将 malloc() 调用与 free() 匹配。另一个容易出错的习惯是选角。如果指针被声明为双精度，您可以在 malloc() 中自动获得其大小，并减少意外将指针转换为变量的风险，反之亦然。

c 中没有缓冲区溢出的运行时警告，因为它被设计为有效地映射到机器代码。要捕获内存泄漏和缓冲区溢出，您可以使用外部工具 valgrind [http://valgrind.org/](http://valgrind.org/)来分析您的代码。当您访问内存以捕获这种未定义的行为时，它将插入额外的指令。

```
 int main(int argc, char **argv)
    {
            double *tmp;
            if( tmp = malloc(2*sizeof(tmp)) ){
                    tmp[0]=100;
                    tmp[1]=102;
                    printf("tmp %p\n", tmp);
                    printf("tmp[0] %d %f %p\n", (int)tmp[0], tmp[0], &tmp[0]);
                    printf("tmp[1] %d %f %p\n", (int)tmp[1], tmp[1], &tmp[1]);
                    free(tmp);

                    //return EXIT_SUCCESS;  
                    return(0);
            }else{
                    //Malloc failed
                    return(-1);
            }
    } 
```

# git - Git 看不到新文件，只有文件夹

> ID：14382103
> 
> 赞同：3
> 
> 时间：2013-01-17T15:12:02.787
> 
> 标签：git, file, commit

在我的项目中添加一个包含一些新文件的文件夹并执行 git status 时，git 只告诉我该文件夹而不是文件。当我添加 -A 时，只添加了文件夹，没有添加任何文件，当我推拉时，只有文件夹而不是文件通过。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-02T09:34:31.730

假设您有以下未跟踪的文件夹：

```
./fruits/
./fruits/apples.txt
./fruits/kiwis.txt 
```

如果您想查看未跟踪文件夹中的文件：

```
git status -u 
```

如果要暂存未跟踪的文件夹以及其中的文件：

```
git add fruits/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:17:11.133

由于 git 只跟踪文件而不是文件夹，因此有关推送和拉取的行为是不可能的。给 git 添加一个空目录是不可能的。
然而，这`git status`是预期的行为，因为文件夹中的所有文件都是新的，因为 git 尚未跟踪此文件夹中的任何文件。

另外，检查[git school，挑战 7](http://try.github.com/levels/1/challenges/7)。如果你`git status`在那里输入，你会看到这个输出，虽然`octofamily`包含两个文件：

```
$ git statu­s
# On branch master
# Untracked files:
#   (use "­git add <file>..." to­ include i­n what wil­l be commi­tted)
#
# blue_octocat.txt
# octofamily/
# red_octocat.txt 
```

这只是 UI 中的简化，您仍然可以这样做`git add octofamily/baby_octocat.txt`（但是，不是在 git 学校，因为它不是真正的 git 客户端）。

随后`git status`将反映这一点：

```
$ git statu­s
# On branch master
# Changes to be committed:
#      new file: octofamily/baby_octocat.txt
#         
# Untracked files:
#   (use "­git add <file>..." to­ include i­n what wil­l be commi­tted)
#
# blue_octocat.txt
# octofamily/momma_octocat.txt
# red_octocat.txt 
```

请注意，它现在如何显示里面的文件`octofamily`，因为现在该文件夹是已知的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-12T02:03:42.367

请注意，git 现在会将包含隐藏文件夹的`.git`文件夹视为子模块。您可以通过这种方式检查它们，将文件夹内容作为单独的存储库访问，仅在父存储库中存储一个引用。

1）您可以保持这种方式，如果您愿意，只需单独使用两个存储库，通过引用链接。

2）如果保留文件夹内容的git历史不重要，删除`.git`里面的文件夹会导致正常的git行为返回。

3）如果您想保留历史记录，您可以改为使用`git subtree`将分支复制到新存储库中。这使得文件可以在本地编辑，并且仍然可以访问历史记录。

* * *

以下命令会将另一个本地 repo 的当前分支的内容和历史记录复制到您当前的本地分支中。

`git subtree add --prefix=[newFolderName] [/path/to/other/repo] HEAD`

（用您选择的名称和路径替换方括号部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T17:33:59.940

尝试`git add`目录中的现有文件之一。`git status`它会像往常一样显示那里的所有文件。这对我有用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-04T17:22:06.597

就我而言，子目录中隐藏着 .git 目录文件夹。删除它为我解决了这个问题。

# java - 使用 JNI 检索 jint 值时的随机值

> ID：14382106
> 
> 赞同：1
> 
> 时间：2013-01-17T15:12:04.373
> 
> 标签：java, c++, java-native-interface

我正在使用 JNI 将“属性”类型的 java 对象传递给 c++。

我使用以下语句检索插入到 Properties 对象中的 int 值。

```
int intVal = 1;
Properties propObj = new Properties();
propObj.put("KEY_FOR_INT", intVal); 
```

当我尝试通过以下语句使用 JNI 检索 c++ 中的值时，我得到随机值。

```
jint intValueFromJava = env->CallIntMethod(propObj, propGetID, env->NewStringUTF("KEY_FOR_INT")); 
```

如果我尝试检索字符串值或 ArrayList，我能够正确获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:40:48.373

尝试查看调用后是否发生异常

```
jint intValueFromJava = env->CallIntMethod(propObj, propGetID, env->NewStringUTF("KEY_FOR_INT"));
jthrowable exc = env->ExceptionOccurred(); 
```

您调用的方法可能返回一个 Object 而不是一个 int，如果它是

```
public synchronized V get(Object key); 
```

有一段时间没有使用 jni，但拆箱可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:52:54.703

最后，我通过在 Properties 对象中添加 Integer 类型的 Object 并使用 Integer 类的 intValue 方法解析值来使其工作。这是我使用的代码。

爪哇：

```
int intVal = 1;
Properties propObj = new Properties();
propObj.put("KEY_FOR_INT", new Integer(intVal)); 
```

C++：

```
jobject intObjVal = env->CallObjectMethod(propObj, propGetID, env->NewStringUTF("KEY_FOR_INT"));
jint intVal = env->CallIntMethod(intObjVal, intValueID);
int myRequiredVal = (int)intVal; 
```

# java - 当我有一个以特定扩展名（如 .xml）结尾的 URL 时，有关 Accept Header 的一些信息

> ID：14382107
> 
> 赞同：0
> 
> 时间：2013-01-17T15:12:05.590
> 
> 标签：java, php, http, header, http-headers

我有一个关于接受 HTTP 标头的问题。

如果我有一个以特定扩展名结尾的链接，例如在这种情况下我的 URL 以**.xml**结尾：

```
<a id="writeXmlExt" class="writeXmlLink" href="<c:url value="/messageconverters/xml.xml" />">Write XML via ".xml"</a> 
```

我会知道如果使用以扩展名结尾的 URL，我会自动设置与使用的扩展名相关的 Accept 标头值。

例如，在上一个链接中自动将 Accept Header 设置为值：**application/xml** ?

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:40:27.523

不，Accept 标头字段不会根据 href 更改。

# google-chrome - Chrome 用户代理样式表 h1

> ID：14382110
> 
> 赞同：0
> 
> 时间：2013-01-17T15:12:14.513
> 
> 标签：google-chrome

我`font-weight:bold`在用户代理样式表中有一个。但我不想要那个，有什么解决方案可以解决这个问题吗？

亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:14:31.550

在您网站的样式表中添加`font-weight: normal`适当的选择器。

# java - 为什么当变量已经被实例化时，在 Map 上调用 put 方法会导致 NullPointerException？

> ID：14382112
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:12:25.373
> 
> 标签：java, map, nullpointerexception, put

1.  在 for 循环的第一次迭代中，为什么该方法在第 15 行抛出 NPE，但在下一次迭代中，它仍然显示第一次迭代的键和值已添加到映射中？

2.  为什么甚至会抛出 NPE？根据 API，如果我传入的指定键/值为空，则抛出 NPE。我似乎没有承诺列出的 2 个场景中的任何一个。

![错误截图](../Images/38f8028cb3d8e85ea8cda9444a0fcc68.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:43:05.707

你`NullPointerException`的实际发生在线上

```
(int) integer = mapper.put(x,1); 
```

这样做的原因是您将一个值放入 M​​ap 中，但之前没有映射到那里，因此从 put 方法返回 null。通过自动装箱，我们尝试将此`Integer`对象转换为`int`原语并获得`NullPointerException`.

# macos - WebKit (Mac OS X) 上不显示滚动条

> ID：14382115
> 
> 赞同：0
> 
> 时间：2013-01-17T15:12:37.790
> 
> 标签：macos, google-chrome, safari, webkit

由于某种我不知道的原因，有一天我的应用程序 DIV 中的滚动条消失了。

我决定最终调查这个问题，但已经好几天了，没有运气。

基本上，您可以滚动浏览这些 div，但是，OS X 滚动条不会出现。如果有人可以看看我缺少什么，我将非常感激！

要复制这个：

*   使用 Safari 或 Chrome访问[http://objectsapp.com/ 。](http://objectsapp.com/)
*   使用搜索栏搜索：Inception
*   将指针放在电影海报上。
*   滚动！（它会工作，但滚动条不会显示）。

知道为什么滚动条可能会丢失吗？（必须仅在 OS X 上测试）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:31:46.103

您没有提及您正在测试的 OS X 上的 Safari 版本，因此很难确定您遇到了什么问题。

在 Safari 6.0 中有一个[WebKit 错误](https://bugs.webkit.org/show_bug.cgi?id=90052)，它会导致设置了“溢出：滚动”的元素不显示新的滚动条覆盖样式。此问题已在 Safari 6.0.1 中得到解决。如果您使用的是更新版本的 Safari，但仍然遇到此问题，则您可能会看到不同的 WebKit 错误。如果是这样，您可以测试[最新的 WebKit nightly build](http://nightly.webkit.org/)，看看问题是否已经解决。如果您仍然在 WebKit nightly build 中看到它，我建议您[提交一份错误报告](http://www.webkit.org/quality/reporting.html)。

# php - 如何使用 PHP/Codeigniter 从单个表单中检索多个文本框值？

> ID：14382121
> 
> 赞同：0
> 
> 时间：2013-01-17T15:12:50.537
> 
> 标签：php, html, codeigniter

我在一个电子商务网站上工作。我有一个产品页面，我有一个表单可以使用按钮同时添加多个产品数量。在我的产品页面上，在我的单一表单中，我使用循环将单个产品值发送到下一页，如下所示：

```
<?
$query_data=$this->db->get('products');
foreach($query_data->result() as $product)
 {
?>
  <input name="productname[]" value="<?=$product->Name?>" type="hidden" />
 <input type = "hidden" id = "product_id" name = "product_id[]" value = "<?=$product->Code?>" />
  <input name="num_pallets[]" id="num_pallets" value="<?=$pallet?>" type="hidden" />
 <input type = "hidden" id = "num_packs" name = "num_packs[]" value = "<?=$packet?>" />
 <input type="text" name="quantity[]" id="quantity" size="2" />
<input type = "hidden" id = "product_price" name = "product_price" value = "<?=$number?>" />    
<? 
 }
 ?> 
```

在哪里 ：

1）“数量”字段是客户将订购的产品数量。

2）“num_pallets”字段是产品在数据库中的托盘数量。

3）“num_packs”字段是产品在数据库中的包装数量。

现在，我想在购物车页面上检索相应的值，以便我可以进行相应的计算。

我遇到的另一个问题是，当我提交表单时，它会提交所有值，包括我未在文本框中输入数量的产品值。

**我的问题：**

我如何在我的页面上循环浏览产品（我在文本框中输入“数量”），以便它可以只给我订购产品的相应值，即如果我填写产品的数量文本框（11760）然后我想处理 11760 的值，而不是其他产品。

如何仅检索 1 个或多个订购产品的相应值？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:34:36.977

如果我理解正确，您想检查是否为任意数量的产品填写了数量，如果是，请进行相应处理，对吗？

```
// controller method that receives posted form data
$quantity = $this->input->post('quantity');
foreach($this->input->post('product_id') as $key => $id){
    if($quantity[$key]){
        //there's a quantity for this product
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:31:03.147

这是解决方案。我已经解决，测试并发现为了将相应的索引与单个产品保持在一起，我需要以多维数组的形式传递产品代码，如下所示：

```
 <?
   if (isset($_POST['quantity']) && is_array($_POST['quantity']))  
  {

    $field_array = array();
     foreach($_POST['quantity'] AS $itemID => $value) 
     {  
            if ($_POST['quantity'][$itemID]>0)
          { 

         if (isset($_POST['product_id'][$itemID])&& (isset($_POST['product_price'][$itemID])) && (isset($_POST['counter'][$itemID]))&& (isset( $_POST['quantity'][$itemID])))

              {

                $productid=$_POST['product_id'][$itemID];
                $this->load->model('m_shopping_cart');
           $pricehead=($_POST['quantity'][$itemID])*($_POST['product_price'][$itemID]);
           $this->m_shopping_cart->add_to_cart($_POST['product_id'][$itemID],$_POST['product_price'][$itemID],$_POST['quantity'][$itemID],$_SESSION['cart_id'],$pricehead,false,false,false);
               }
         } 
      }

}
?> 
```

# bootloader - 如何创建可引导磁盘

> ID：14382123
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:12:59.133
> 
> 标签：bootloader, bootable

我正在尝试从可引导的 ISO 创建可引导磁盘。我应该可以烧掉它，它会启动没有操作系统的机器，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:17:48.883

您是否正在尝试创建可启动的 win7/8 安装程序？如果是，请获取 UltraISO，然后使用该程序打开您的 ISO，然后转到可引导->写入磁盘映像，之后您将能够启动您的闪存驱动器

# drag - Safari ipad 中的 getIntersectedShapes

> ID：14382125
> 
> 赞同：1
> 
> 时间：2013-01-17T15:13:05.887
> 
> 标签：drag, kineticjs

我有最新的 kineticjs(4.3.1)，我使用hammerjs 来处理在 kineticjs 包装器（div 元素）中启动的触摸事件。我需要在“onDrag”事件上调用 getIntersectedShapes。在这样做并检查 ipad 上的拖动事件之后，我只得到了 dragstart 事件（我无法调试，所以我不知道我是否有错误）。在桌面（safari + chrome）或 iPad chrome 上执行相同的操作就像魅力一样。只有 iPad 上的 safari 是个问题。我在 iPad 和台式机上都使用最新的浏览器版本。

希望你能帮助... thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:56:31.373

我不知道你的代码是什么样的，但如果一个事件没有触发并且你想要它，你可以这样做：

```
 .simulate(); 
```

例如：

```
 shape.simulate('dragmove'); 
```

请注意，对于新的 kineticjs 4.3.1 及更高版本，您应该设置

```
 'dragOnTop: false' //default is true 
```

如果您打算在其上模拟拖动事件，则作为形状的属性。

让我知道这是否对您有所帮助。

# r - 如何在格子图中绘制刻度线

> ID：14382127
> 
> 赞同：4
> 
> 时间：2013-01-17T15:13:18.150
> 
> 标签：r, lattice

如何在格子图内部绘制刻度线，而不是在外部。“tcl = 0.5”似乎适用于正常情节；但不适用于我的格点图。

我想在 Lattice 中复制的示例：

![我想在 Lattice 中复制的示例](../Images/a09ef45ad8fc4f1b97822d48418c592a.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:22:11.180

刻度长度由`tck=`参数控制，需要通过参数传递给更高级别的绘图函数`scales=`。设置`tck=0`禁止绘制刻度，而将其设置为负数会导致在绘图内绘制刻度：

```
library(lattice)

xyplot(1:10 ~ 1:10, 
       scales = list(y = list(tck=0), 
                     x = list(tck=c(-1, 0)))) 
```

![在此处输入图像描述](../Images/19c29a7a7e462938916905d249cc6ce8.png)

# java - 从控制器（Spring Portlet MVC）访问 PortletSession 属性（由拦截器设置）

> ID：14382128
> 
> 赞同：1
> 
> 时间：2013-01-17T15:13:19.787
> 
> 标签：java, session, liferay, spring-portlet-mvc

我是 Spring Portlet MVC 的新手，但最近几天我一直在努力学习。我的问题的上下文如下

1.  我有一个带有单个控制器的 Spring Portlet MVC portlet。
2.  Portlet 被配置为在用户想要访问资源的任何时候**调用 HandlerInterceptor （方法“preHandleRender”）。**
3.  拦截器检查用户是否经过身份验证，如果没有，它会检索用户的 Liferay 凭据以管理许多其他 Web 服务的身份验证（现在不感兴趣）。
4.  此后，**拦截器将用户数据存储在 PortletSession**中。

**现在，我应该如何从控制器内部通过拦截器检索存储在 PortletSession 中的用户数据？**

**sessionInterceptor.preHandleRender**

```
@Override
public boolean preHandleRender(RenderRequest request, RenderResponse response, Object handler) throws Exception {

    PortletSession session = request.getPortletSession(true);
              .
              .
              .
    session.setAttribute("userProfile", userProfileDomain,PortletSession.APPLICATION_SCOPE);
              .
              .
              .
    return true;
} 
```

**视图控制器类**

```
@Controller("viewController")
@RequestMapping(value = "view")
public class ViewController {

    //@Autowired
    private WebServiceTemplate webServiceTemplate = new WebServiceTemplate();

    @RenderMapping
    public String setModelAndView(RenderRequest request, ModelMap tgtModel) {
        logger.debug("<<  |  >> Starting.");

        PortletConfiguration conf = PortletConfiguration.getInstance();
              .
              .
    }
} 
```

如果需要，我准备提供有关我的代码的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:35:52.067

我能够解决问题并找出我的错误。

在拦截器中，正如我在问题中所展示的，我**在 PortletSession.APPLICATION_SCOPE 中设置了会话属性“userProfile”。**

```
session.setAttribute("userProfile", userProfileDomain,PortletSession.APPLICATION_SCOPE); 
```

至于控制器，我知道您有多种选择：

*   将请求（在我的情况下为 RenderRequest）作为参数传递，从请求中获取会话（在我的情况下为 PortletSession），然后从会话中检索属性。
*   直接将会话作为参数传递，然后从中检索属性。

但是，无论走第一路还是第二路，**如果在控制器中使用如下指令**

```
session.getAttribute("userProfile"); 
```

**你不会得到任何东西，因为属性是在 PortletSession.APPLICATION_SCOPE 中设置的。**

正确的指令是：

```
session.getAttribute("userProfile",PortletSession.APPLICATION_SCOPE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:58:38.757

如果您将 PortletSession 指定为参数，Spring MVC 将连接它。

```
 @RenderMapping
 public String setModelAndView(RenderRequest request, PortletSession session, ModelMap tgtModel) {
    logger.debug("<<  |  >> Starting.");

    PortletConfiguration conf = PortletConfiguration.getInstance();
          .
          .
 } 
```

有关支持的类型，请参阅[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/portlet.html#portlet-ann-requestmapping-arguments 。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/portlet.html#portlet-ann-requestmapping-arguments)

# php - 从原始图像路径获取缩略图

> ID：14382129
> 
> 赞同：1
> 
> 时间：2013-01-17T15:13:20.567
> 
> 标签：php, codeigniter, thumbnails

上传图像时，我将原始图像路径（包含的文件名）存储在 db 中。

```
For example:
img/uploaded/photo.jpg 
```

然后我生成它的缩略图并存储在下面的目录中，而不是在 db 中。

```
/img/uploaded/thumbs/photo_thumb.jpg 
```

而且我有以下功能，但不知道如何获取属于 db 中 url 的拇指。

```
//ie: $file is img/uploaded/photo.jpg
public function get_thumb($file)
{
    //get the path without filename
    $get_path = dirname($file) . "/thumbs/";

    //result img/uploaded/thumbs/  (how can i get the photo_thumb.jpg) here?
    return $get_path; 
} 
```

编辑 basename($file) 以从路径获取文件名，但如何添加 _thumb.jpg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:43:52.217

对 PHP 没有太多经验，但[以此](http://php.net/manual/en/function.preg-replace.php)为起点，我得到：

```
$pattern = '/^.*\/(.*)$/'; // match everything after the last slash and store it in $1
$replacement = '$1';
$filename = preg_replace($pattern, $replacement, $file);

$get_path = $file . '/thumbs/' . $filename; 
```

正如我所说，没有太多的 PHP 经验，但是应该这样做......

一个更简单的方法可以是：

1.  找到最后`/`一个`$file`
2.  在它之后插入`thumbs/`或替换为`/thumbs/`
3.  `.`在已编辑的 $file 中找到最后一个
4.  `_thumb`在它之后插入

您可以找到函数的位置`/`和`.`使用`strrchr`函数（[在此处记录](http://php.net/manual/en/function.strrchr.php)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T01:25:55.287

你可以这样做 ：

```
 public function get_thumb($file) {

      $infos = pathinfo($file);
      $path = $infos['dirname'] . '/thumbs/' . $infos['filename'] . '_thumb.' . $infos['extension'];
      return $path;

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:47:40.370

通常，我这样做的方式是仅将文件名存储在 db.xml 中。（假设它们都在同一个目录中）。

然后查询数据库并获取文件名，存储在：

```
$filename; 
```

然后我只是回显出类似的东西

```
 echo base_url('images/thumbs/' . $filename); 
```

希望这可以帮助！

# php - 如果她在函数中创建，如何打印字符串？

> ID：14382134
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:13:31.157
> 
> 标签：php

字符串`$test1`, `$test2`,`$test3`和`$test4`在函数中创建`test()`。我怎样才能打印她？

我的代码：

**配置文件**

```
<?php
function test(){
    $test1 = 'test1 string';
    $test2 = 'test2 string';
    $test3 = 'test3 string';
    $test4 = 'test4 string';
}
?> 
```

**测试.php**

```
<?php 
require_once("conf.php");

test();
echo $test1;
echo $test2;
echo $test3;
echo $test4;
?> 
```

为什么代码不起作用？

为什么没有`$test1`, `$test2`, `$test3`, 和`$test4`打印。

PS：最好没有全局参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:16:36.383

您实际上从未检索过`test()`函数的返回值，这应该可以：

**配置文件**

```
<?php
function test(){
    $test='test string';
    return $test;
}
?> 
```

**测试.php**

```
<?php 
    require_once("conf.php");

    $test_value = test();
    echo $test_value;
?> 
```

此外，文本`require_once`不是`requare_once`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:16:59.117

检查这种方式：

```
$test=test();
echo $test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:21:42.863

对于您必须使用数组的多个实体。
所以，这是一个通用的解决方案。
对于确定的答案，我们需要一个特定的问题

```
function test() {
    $test[] = 'test1 string';
    $test[] = 'test2 string';
    $test[] = 'test3 string';
    $test[] = 'test4 string';
    return $test;
}

require_once "conf.php";

$test = test();
echo $test[0];
echo $test[1];
echo $test[2];
echo $test[3]; 
```

# ios - 使用 UIWebView 切换到下一个视图

> ID：14382139
> 
> 赞同：0
> 
> 时间：2013-01-17T15:13:42.610
> 
> 标签：ios, login, sdk

当您使用 Facebook 应用程序并转到条款和条件视图时，会出现一个 WebView。当您在 WebView 中选择一个选项时，您将转到一个新视图。

现在我想用 PHP 做一个登录系统。当用户登录成功时，他将转到一个网页。例如，我该如何设置：当 UIWebView 在 www.myserver.com/ok 上时，我的应用程序中的新视图将显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:27:18.110

设置您`UIWebView`的委托并检查：-

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   NSLog(@"Loading: %@", [request URL]); //if url matches www.myserver.com/ok open your view
   return YES;
} 
```

希望对你有帮助。。

# session - 在打开另一个嵌入式 IWebBrowser2 以进行 NewWindow3 处理时，嵌入式 IWebBrowser2 中的会话到期

> ID：14382142
> 
> 赞同：0
> 
> 时间：2013-01-17T15:13:44.513
> 
> 标签：session, popup, iwebbrowser2

我正在开发一个基于多线程 WTL 的应用程序，它可以打开多个浏览器窗口，每个窗口都有自己的嵌入式 IWebBrowser2 实例用于浏览，每个窗口都在一个单独的 UI 线程中。

作为对 NewWindow3 的响应，我打开一个新的浏览器窗口，并返回新窗口`IWebBrowser2->get_Application()`，它返回一个`IDispatchPtr`.

虽然弹出窗口确实打开了所需的站点，但打开此弹出窗口的原始窗口中的会话 EXPIRES - 该原始窗口中的任何进一步导航都将返回登录页面！

我认为可能对任何人帮助我很重要的一些要点-

1.  仅当`NewWindow3`触发时才会发生这种情况，并且非空`bstrUrlContext`（包含原始 URL 的第三个参数）
2.  作为 NewWindow3 处理的一部分，完成以下操作 -
    *   创建新的 IWebBrowser2 嵌入窗口，`Create()`设置`zWindowName`为`bstrUrlContext`参数的值
    *   返回的`IDispatch`指针是从`IWebBrowser2->get_Application()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:55:19.833

此问题已得到解决。

我必须使用空字符串 (_T("")) WindowName 创建嵌入 IWebBrowser2 的窗口。并且必须通过在窗口的 OnCreate() 处理程序中调用 CAxWindow::CreateControl() 来确保创建 IWebBrowser2 控件（对于 WM_CREATE）

谢谢

# jquery - 如何在回调函数之外继续执行代码？

> ID：14382144
> 
> 赞同：0
> 
> 时间：2013-01-17T15:13:58.537
> 
> 标签：jquery

我希望我用正确的词来描述这个问题......在这里我定义了一个名为 TK 的对象，它带有一个属性和方法。

```
var TK = {
    List: [],
    getSectionA: function(listName) {
        var arrayList = [];
        TK.returnList = $.get(
            'ajax/test.html', 
            { sendName: listName }, 
            function(data) {
            }
        );       
    }
}; 
```

调用函数

```
$("#dropDownList").change(function() {
    TK.getSectionA(fileName); 
```

// 这里我试图跳出下面的这个回调函数并在将回调返回数据（resultLists）分配给一个变量（TK.List）之后继续正常的代码执行但是当我警告数组变量TK.List时，什么都没有显示。

```
TK.List = TK.returnList.done(function(data) {
    var resultLists = [];
    $.each(data, function(index, value) {
        if (value == "false") {
            return false;
        }
        else if (value == "") {
            return false;
        }
        else {
            resultLists[index] = value;
        }
    });
    return resultLists;   
});
alert(TK.List.join("")) // not displaying 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:20:18.457

就像`var resultLists = [];`全球一样。

然后在调用 AJAX 后设置一个计时器。一旦定时器到期，做

```
TK.List = resultsLists; 
```

或者做这样的事情：

```
while(true){
    if(resultLists.length > 0) {
        break;
    }
}
TK.List = resultLists; 
```

但请确保在循环内部使用了一个局部变量，并且仅在循环结束时`$.each`分配给它。`resultLists`

# html - 仅使用 css 悬停另一个 div 时显示 div

> ID：14382149
> 
> 赞同：20
> 
> 时间：2013-01-17T15:14:03.123
> 
> 标签：html, css

我已经在网上搜索了这个，但没有找到类似的东西。

假设我们有 div A 和 div B。当将鼠标悬停在 div A 上时，div b 应该是可见的（应该看起来像覆盖）div A 而不是放在下面。

看起来只有 div A 的内容已更改为 div B 的内容。

这如何在纯 CSS 和 HTML 中完成？

```
#container > div {
    display: none
}
#container > div:first-child {
    display: block
}
#container > div:hover + div {
    display: block

<div id="container">
    <div>A</div>
    <div>B</div>
</div> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-17T15:19:14.013

这将起作用，但*前提*是两个 div 相邻并且 b 跟在 a 之后。

```
#a:hover + #b {
    background: #f00
}

<div id="a">Div A</div>
<div id="b">Div B</div> 
```

如果您在使用之间有 div 〜

```
#a:hover ~ #b {
    background: #f00
}

<div id="a">Div A</div>
<div id="c">Div C</div>
<div id="b">Div B</div> 
```

反过来，不幸的是，您将需要 Javascript

```
// Pure Javascript
document.getElementById('b').onmouseover = function(){
    document.getElementById('a').style.backgroundColor = '#f00';
}
document.getElementById('b').onmouseout = function(){
    document.getElementById('a').style.backgroundColor = '';
}

// jQuery
$('#b').hover(
  function(){$('#a').css('background', '#F00')}, 
  function(){$('#a').css('background', '')}
); 
```

完整的小提琴[http://jsfiddle.net/p7hLL/5/](http://jsfiddle.net/p7hLL/5/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-17T15:20:29.460

如果您不想使用选择器`+`或`~`与某些浏览器不兼容，则只有当`<div />`to show (eg `div#b`) 是`<div />`to hover (eg `div#a`) 的子项时才有可能。

```
<div id="a">
    <div id="b"></div>
</div>

<style>
    div#b {
        display: none;
    }

    div#a:hover div#b {
        display: block;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-11T11:05:32.487

它的作品，但你的CSS应该是这样的

```
<style>
#b{display:none;}
div#a:hover div#b{display:inline}
</style> 
```

# bash - bash，提示输入数字

> ID：14382150
> 
> 赞同：1
> 
> 时间：2013-01-17T15:14:03.743
> 
> 标签：bash, sed, while-loop, grep

d 是我使用的内部服务器查找工具。

我希望允许用户输入 0（或 1）和 9999 之间的任何数字（我们称之为 userinput）并让它显示结果：

d $用户输入（例如 1234）

然后操纵该查找的结果（下面删除了除 IP 地址之外的所有内容以便稍后 ping）：

```
 grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)'` 
```

我知道我需要使用 while true；请阅读 $blah 等。我只是不熟悉 read 足以正确格式化它，更重要的是：

**让它提示输入 0-9999 之间的数字**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-22T17:49:44.497

其他答案有很多缺陷，因为**他们检查用户没有输入超出他们想要的范围的数字**。但是如果用户输入的不是数字怎么办？他们的策略从一开始就被打破了。

相反，最好只有在我们确定用户输入的数字在所需范围内时才放手。

```
while :; do
    read -ep 'Enter server number: ' number
    [[ $number =~ ^[[:digit:]]+$ ]] || continue
    (( ( (number=(10#$number)) <= 9999 ) && number >= 0 )) || continue
    # Here I'm sure that number is a valid number in the range 0..9999
    # So let's break the infinite loop!
    break
done 
```

正则表达式`[[ $number =~ ^[[:digit:]]+$ ]]`确保用户只输入数字。

笨拙的`(number=(10#$number))`部分在这里，如果用户输入一个以 a 开头的数字`0`，bash 会尝试以基数解释它，`8`我们会得到错误的结果（例如，如果用户输入`010`），甚至在以下情况下会出错用户输入，例如`09`（尝试不使用此防护）。

* * *

如果您只想在用户输入无效术语时提示一次并退出，您的逻辑是：

```
read -ep 'Enter server number: ' number
[[ $number =~ ^[[:digit:]]+$ ]] || exit 1
(( ( (number=(10#$number)) <= 9999 ) && number >= 0 )) || exit 1
# Here I'm sure that number is a valid number in the range 0..9999 
```

如果您想向用户解释脚本退出的原因，您可以使用 die 函数：

```
die() {
    (($#)) && printf >&2 '%s\n' "$@"
    exit 1
}
read -ep 'Enter server number: ' number
[[ $number =~ ^[[:digit:]]+$ ]] ||
    die '*** Error: you should have entered a number'
(( ( (number=(10#$number)) <= 9999 ) && number >= 0 )) ||
    die '*** Error, number not in range 0..9999'
# Here I'm sure that number is a valid number in the range 0..9999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:20:20.770

如果您只想要两个值之间的数字，则可以测试它们的值：

```
 read x
 while [[ $x -lt 0 || $x -gt 9999 ]]; do
    echo "bad value for x"
    read x
 done
 echo "x=$x" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:31:28.287

<--编辑-->

如果你想要的只是提示机制，试试这个：

```
echo -n "Enter server number:"
read userinput 
```

然后像这样对输入运行验证检查：

```
if [[ $userinput -lt 0 || $userinput -gt 9999 ]]   # checks that the input is within the desired range
 then
  echo "Input outside acceptable range."
else
  # insert your grep and ping stuff here
fi 
```

<--结束编辑-->

在第一次阅读时，我认为您的问题对于包装脚本来说听起来很理想，所以我建议这样做：

```
$ cat wrapper.sh
#!/usr/bin/bash

userinput=$1

if [[ $# != 1 ]]   # checks that number of inputs is exactly one
 then
  echo "Too many inputs."
  exit 2
elif [[ $userinput -lt 0 || $userinput -gt 9999 ]]   # checks that the input is within the desired range
 then
  echo "Input outside acceptable range."
  exit 3
fi

output=`d "$userinput"`

ping_address=`grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' <("$output")`

ping "$ping_address" 
```

然后像这样调用脚本：

```
$ wrapper.sh 1243 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:18:34.387

该`read`命令不会提示自己。`echo`在实际显示提示之前使用法线。用于`echo -n`不添加换行符。

# java - TabHost 不在 Nexus 7 上呈现图像，而是在其他所有设备上呈现图像

> ID：14382154
> 
> 赞同：0
> 
> 时间：2013-01-17T15:14:15.733
> 
> 标签：java, android, android-tabhost

多亏了 TabSpec，我想在我的 TabHost 中显示一个视图，它确实适用于除 Nexus 7 之外的所有设备。

```
Drawable img = getResources().getDrawable(R.drawable.tab_info_icon);
Intent intent = new Intent(context, Actus.class);
setupTab(img, intent);

private void setupTab(final Drawable image, final Intent intent) {
    View tabview = createTabView(mTabHost.getContext(),image, intent);
    TabSpec setContent = mTabHost.newTabSpec("").setIndicator(tabview).setContent(intent);
    mTabHost.addTab(setContent);
}  

private static View createTabView(final Context context, final Drawable image,final Intent intent) {  
    View view = LayoutInflater.from(context).inflate(R.layout.onglet, null);  

    LinearLayout ll = (LinearLayout)view.findViewById(R.id.fondOnglet);
    ll.setBackgroundResource(R.drawable.tab_bg);

    ImageView iv = (ImageView)view.findViewById(R.id.imgOnglet);
    iv.setImageDrawable(image);
    return view;
} 
```

R.drawable.tab_info_icon 是一个 xml 选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:17:54.643

这很奇怪，但 Nexus 7 不是 hdpi 或 xhdpi，它是 tvdpi，所以我创建了一个 drawable-tvdpi 目录并将我的图像放在那里，它可以工作。

# symfony-2.1 - Symfony2.1 FOSUserBundle 覆盖验证

> ID：14382161
> 
> 赞同：0
> 
> 时间：2013-01-17T15:14:34.080
> 
> 标签：symfony-2.1, fosuserbundle

我在覆盖表单验证时遇到问题。

我已经覆盖了用户类和 RegisterFormType 类。在 RegisterFormType 类中，我使用 setDefaultOptions 函数来使用其他验证组

```
public function setDefaultOptions(OptionsResolverInterface $resolver) {
    $resolver->setDefaults(array(
        'data_class' => 'Clickstorm\Geruest\UserBundle\Entity\User',
        'intention' => 'register',
        'validation_groups' => array('register')
    ));
} 
```

但是当我提交表单时，会执行默认验证。但是最让我困惑的是，当我试图通过创建自己的validation.xml 文件来覆盖验证时，验证被触发了两次（错误消息在schon 两次）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:28:51.850

我不知道这是否是正确的解决方案。但它在覆盖配置文件中的 validation_groups 时有效。

# ruby - Puppet 的 ERB 模板中的 for 循环导致语法错误

> ID：14382170
> 
> 赞同：3
> 
> 时间：2013-01-17T15:14:47.660
> 
> 标签：ruby, erb, puppet

我正在尝试在木偶模板中的数组上包含一个 for 循环。我一直在关注[http://docs.puppetlabs.com/guides/templating.html](http://docs.puppetlabs.com/guides/templating.html)上的信息，但是在 puppet-client 上它没有说：

```
 Could not retrieve catalog from remote server: wrong header line format 
```

据我所知，这与 ERB 解析问题有关。

erb验证

```
#erb -P -x -T '-' /etc/puppet/modules/apache2/templates/site-config.erb  | ruby -c
-:22: syntax error, unexpected '.'
 ;  alias.each do |val|
         ^ 
```

欢迎任何线索。谢谢。

站点配置.erb：

```
# Virtual Host <%= name %>
NameVirtualHost <%= listen_config %>
<VirtualHost <%= listen_config %>>
    ## allgemeine Einstellungen wie für HTTP-<VirtualHost>
    ServerAdmin      <%= admin_mail %>
    ServerName       <%= server_name %>
    DocumentRoot     <%= document_root %>
    CustomLog        <%= custom_log %> 
    ErrorLog         <%= error_log %> 

    # Let Apache httpd serve static web application content
    <% alias.each do |val| -%>
    Alias <%= val %>
    <% end -%>

    ... 
```

初始化.pp：

```
...
  define site (
    $ensure = 'present',
    $listen_config = "*:80",
    $admin_mail = "nobody@example.com",
    $server_name = "example.local",
    $document_root = "/var/www/",
    $custom_log = "/var/log/apache2/$name.log combined",
    $error_log = "/var/log/apache2/error_$name.log",
    $alias = [],
    $tomcat ="false",
    $jk_logfile ="/var/log/apache2/jk_$name.log",
    $jk_mount =["/$name worker1", "/$name/* worker1"],
    $jk_unmount = [],
    $tls = "false",
    $tls_priorities = "",
    $tls_certificate = "/etc/ssl/certs/apache2_$name.crt",
    $tls_key ="/etc/ssl/certs/apache2_$name.key,
    ) {
  case $ensure {
     'present' : {
        file { "/etc/apache2/sites-available/$name":
           owner   => root,
           group   => root,
           mode    => 644,
           content => template("site-config.erb"),
        }
        exec { "/usr/sbin/a2ensite $name":
           unless => "/bin/readlink -e ${apache2_sites}-enabled/$name",
           notify => Exec["reload-apache2"],
        }
     }
     'absent' : {
        exec { "/usr/sbin/a2dissite $name":
           onlyif => "/bin/readlink -e ${apache2_sites}-enabled/$name",
           notify => Exec["reload-apache2"],
           require => Package["apache2"],
        }
     }
     default: { err ( "Unknown ensure value: '$ensure'" ) }
  }
 }
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:01:11.217

唉，`alias`是 Ruby 中的一个[语法关键字](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-alias)。您不能创建或引用名为 的词法变量`alias`：

```
pry(main)> alias = 1
SyntaxError: unexpected '='
alias = 1
       ^ 
```

来自[Puppet 文档](http://docs.puppetlabs.com/guides/templating.html)

> 引用变量
> 
> Puppet 在评估时将所有当前设置的变量（包括事实）传递给模板。有几种方法可以访问这些变量：
> 
> 当前作用域中可见的所有变量都可以作为 Ruby 实例变量使用——即@fqdn、@memoryfree、@operatingsystem 等。这种引用方式与在 Puppet 清单中使用短（本地）变量名相同：@ fqdn 完全等同于 $fqdn。
> 
> 当前作用域中可见的所有变量也可以作为 Ruby 局部变量使用——即 fqdn、memoryfree、操作系统等，没有前置 @ 符号。当变量名与 Ruby 方法名冲突时，这种引用风格有时会导致问题；通常最好使用@ 样式。

因此，我认为您的解决方案是遵循他们的建议，并始终使用实例变量形式`@alias`而不是词法变量形式。

# javascript - d3.json() 是否支持身份验证？如果没有，还有哪些其他 JavaScript 选项可用于 JSON 检索？

> ID：14382176
> 
> 赞同：1
> 
> 时间：2013-01-17T15:14:56.343
> 
> 标签：javascript, jquery, json, authentication, d3.js

我正在开发一个需要从 GitHub 收集信息的应用程序，所以我开始研究他们的 API。我最初的想法是使用 d3.json() 函数来获取数据（因为它很简单并且过去为我做了好事），但我似乎没有办法使用该函数进行身份验证. 例如，`$ curl -u "username" https://api.github.com`作为基本身份验证的示例给出（来自[GitHub](http://developer.github.com/v3/#authentication) API——显然他们使用 curl 作为示例）。

那么，有没有办法使用 d3.json() 函数进行身份验证？如果没有，我还有哪些其他选择可以使用 JavaScript 获取 JSON？

谢谢！

**编辑：**

我现在正在尝试使用 jQuery 的 getJSON 方法，如此处所示[，](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)因为我开始收到错误“XMLHttpRequest cannot load *url* Origin *url* is not allowed by Access-Control-Allow-Origin”。当然，开关对身份验证的能力没有帮助，但我至少可以获得公共数据（这是最多的）。

**编辑#2：**

有没有人尝试过[michael/github](https://github.com/michael/github)或[fitzgen/github-api](https://github.com/fitzgen/github-api)？我将开始研究这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:14:56.777

如果您有一个[回显 JSON](http://php.net/manual/en/function.json-encode.php)的 PHP 脚本，您可以在服务器端执行所有身份验证。请注意，您还可以向 PHP 脚本发送 GET 请求，因此您调用脚本的方式可以是动态的。

# unix - 可以读取操作导致 .lock 在 unix 中吗？

> ID：14382184
> 
> 赞同：0
> 
> 时间：2013-01-17T15:15:36.063
> 
> 标签：unix, deadlock

在 unix 中，何时`ProcessA`从 读取`FileX`，如果`ProcessB`尝试删除`FileX`. 这会导致死锁`FileX`吗？

[维基](http://en.wikipedia.org/wiki/File_locking#In_Unix-like_systems)说了一些东西..我无法为这个简单的问题找到答案..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:18:06.917

不可以。您可以在另一个进程正在读取文件时删除它。默认情况下没有锁定。

例如

```
$ touch a
$ tail -f a 
```

在另一个提示中

```
$ rm a 
```

# module - D 开发过程

> ID：14382187
> 
> 赞同：7
> 
> 时间：2013-01-17T15:15:46.870
> 
> 标签：module, d, packages, libraries, dmd

对于使用从 github 克隆并单独构建的包的 D 程序，推荐的开发过程是什么？

通常与如何使用 make、autotools、cmake 等构建 C/C++ 项目有关。

大多数其他构建规范都有一个安装目标。构建中是否应该有一个安装目标，或者我们应该直接从构建时放置它的位置链接一个库并添加注册它的包含，`D_INCLUDE_PATH`然后使用直接指向它们`DFLAGS=-I<D_INCLUDE_PATH>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:21:54.800

我意识到我的评论实际上可以回答这个问题，所以这里是：

D 开发过程不能与 C 或 C++ 世界中的类似。真的很难看吗？几乎所有 C 和 C++ 编译器都会生成“本机”代码。D也不例外。有一个 D.NET 项目可以针对 .NET，但它多年来一直处于非活动状态......

此外，在基于 C/C++ 的项目中使用的所有工具都可以轻松用于其他任何事情。CMake 也可用于 Java 或 .NET 项目。Make 和/或 Autotools 也是如此。为什么 Maven 和 Ant 在 Java 世界中更受欢迎是另一回事。

说到他们，在D开发过程中可以使用Maven或者Ant！放下手，您需要编写自己的 Maven 插件以使其更加简单和灵活，但它是可行的，实际上是一个非常好的项目。

据我所见，D 程序员坚持使用好的、旧的 Make 或编写 BASH 脚本来完成整个工作。但是，我看到[Lycus](http://www.lycus.org)基金会的人使用[WAF](http://code.google.com/p/waf/)。如果你是 Python 程序员，你一定会喜欢 WAF。如果没有，请尝试类似的事情——我见过人们使用 SCons、Remake、Premake 等......

[DSSS+Rebuild](http://www.dsource.org/projects/dsss)是最接近用 D 制作的非常有用的此类工具的东西。不幸的是，它们是死项目。:(

我正在开发一个 maven 风格的工具，但考虑到我所拥有的时间——它将在 2014 年可用。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:07:05.590

感谢 Russel Winder，我会选择支持 D 的 scons：

[http://scons.tigris.org/ds/viewMessage.do?dsForumId=1268&dsMessageId=2959039](http://scons.tigris.org/ds/viewMessage.do?dsForumId=1268&dsMessageId=2959039)

如果没有，那么 POM（普通老牌）。

# knockout.js - 淘汰赛数据绑定重置

> ID：14382188
> 
> 赞同：3
> 
> 时间：2013-01-17T15:15:48.060
> 
> 标签：knockout.js

我在网络表单上使用淘汰赛数据绑定。目前我有一个重置功能，用于在重新加载原始数据之前清除表单。我有 60 多个领域需要清除，而做每一个人都很痛苦。有没有办法一次清除所有的淘汰赛绑定？目前我使用的如下：

```
self.parentObject.somefield('');
self.parentObjectAddress.street1('');
etc 
etc 
```

-- 更新 1--

为了澄清一下，我的所有字段都是 parentObject 的一部分。例子

```
self.parentObject.fieldName 
```

我要做的是清除父对象的所有子对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:08:51.277

我会考虑一种不同的方法。与其“重置”对象本身，不如创建一个新对象并丢弃旧对象？您应该已经有了创建对象的代码。如果您`data-bind="with: someObject"`在顶层有 a （可能是`<form>`标签？），则将 someObject （假设它是可观察的）替换为该对象的新的“干净”实例。

# java - 删除所有接触给定顶点的边

> ID：14382194
> 
> 赞同：1
> 
> 时间：2013-01-17T15:15:56.040
> 
> 标签：java, graph, java.util.concurrent, jgrapht

所以我试图删除 SimpleGraph（无向图，JGraphT）的所有边，但由于某种原因，我不断收到 ConcurrentModificationException。

这是我正在尝试做的事情：

首先，我有一个类点如下：

```
class Point
{
   private int x;
   private int y;

   public Point(int x, int y)
   {
      this.x = x;
      this.y = y;
   }

   //getters and setters 

   public boolean equals (Object rhs)
   {
      if (rhs == null || !(rhs instanceof Point))
         return false;
      else
      {
         Point rhsPoint = (Point) rhs;
         return rhsPoint.x == this.x && rhsPoint.y == this.y;
      }
   }

   public int hashCode()
   {
      int hash = 3;
      hash = 83 * hash + (int) (this.col ^ (this.col >>> 32));
      hash = 83 * hash + (int) (this.row ^ (this.row >>> 32));
      return hash;
   }
} 
```

还有一个图 g，其顶点是 Point 的实例并存储在二维数组中

```
Point[][] pointContainer = new Point[100][100];
SimpleGraph<Point, DefaultEdge.class> g = new SimpleGraph<Point, DefaultEdge.class>();

public void initGraph()
{
   for (int row = 0; row < 100; ++row)
     for (int col = 0; col < 100; ++col)
     {
        Point p = new Point(col, row);
        pointContainer[row][col] = p;
        g.addVertex(p);
     }

   //Then I added edges between any adjacent vertices
   //so except for those vertices near the edges of the grid, each vertex has 8 edges

}

public void removeEdges(int row, int col)
{
   Set edges = g.edgesOf(pointContainer[row][col]);
   g.removeAllEdges(edges);  
} 
```

谁能告诉我我在这里做错了什么？为什么我不断收到 ConCurrentModificationException？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:26:04.840

`ConCurrentModificationException`表示您正在尝试修改项目为什么不允许它，即当您尝试在迭代时修改 Collection 时发生

尝试检查您的堆栈跟踪以帮助您检测错误，很可能它发生在您未附加的代码中。我认为你调用的地方`removeEdges()`可能会导致一些问题

第二件事，在你的`Point.equal()`方法中，你能解释一下为什么你要把点投射到细胞上吗？

# svn - Tortoisesvn 中的自动更新

> ID：14382196
> 
> 赞同：1
> 
> 时间：2013-01-17T15:15:57.860
> 
> 标签：svn, tortoisesvn, visualsvn-server, post-commit, svn-hooks

（我英语不好。由懂的人赞助我会编辑它！）

Windows 7版本的源码控制，我使用以下程序：VisualSVN Server tortoisesvn

我有一个 PHP 项目，团队正在网络上做。对于每次提交，在服务器上运行的版本和在存储库挂钩目录文件中自动更新的功能 post-commit.bat 编写了以下代码。但是在每次提交之后，文件夹锁定就无法完成了！

但是如果我手动运行 post-commit.bat 文件更新完成

问题是什么？

```
@ echo off

echo == Initiating system instance variables ...
echo. - Setting the variables ...

:: Here you need to make some changes to suit your system.
set SOURCE = E: \ xampp \ htdocs \ mycode
set SVN = C: \ Program Files \ TortoiseSVN \ bin

:: Unless you want to modify the script, this is enough.

echo. % SOURCE%
echo. % SVN%
echo. + + Done setting variables.
echo.
echo == Updating source from SVN
echo. - Running update ...
"% SVN% \ TortoiseProc.exe" / command: update / path: "% SOURCE%" / closeonend: 2
echo. + + Done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:57:15.360

TortoiseProc 无法在没有用户干预的情况下工作，您必须在更新时手动按下至少一个按钮。这对于钩子来说是不可能的——它们没有任何 GUI 和两侧的通信渠道。

您**必须***仅*使用SVN 客户端的 CLI 版本从挂钩更新您的 WC

# ruby-on-rails - 使用 rails-money gem 格式化货币

> ID：14382202
> 
> 赞同：1
> 
> 时间：2013-01-17T15:16:25.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, money-format

我正在尝试通过money rails gem 格式化货币，但这似乎没有按预期工作。

这就是我所拥有的

```
pry(main)> Money.new(100, "USD").format(no_cents: true, symbol: nil)
=> "$1.00" 
```

如您所见，格式化根本不起作用。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:26:40.227

看看money-rails [helpers](https://github.com/RubyMoney/money-rails#helpers)：

> *   获得没有美分部分的货币价值：
>     <%= money_without_cents @money_object %>
> 
> **这将呈现一个没有货币符号**和**美分部分**的格式化货币值。

# statistics - 如何在SPSS和STATA中选择性输出P值小于0.05的ttest结果

> ID：14382204
> 
> 赞同：1
> 
> 时间：2013-01-17T15:16:28.163
> 
> 标签：statistics, spss

有谁知道如何仅（有选择地）使用 Sig 输出/报告配对的 ttest 结果。<0.05，使用 SPSS 或 STATA 语法？

# php - 为什么 PHP 在对象上下文中使用静态方法？

> ID：14382206
> 
> 赞同：14
> 
> 时间：2013-01-17T15:16:32.553
> 
> 标签：php, static-methods, magic-methods

我有以下代码（实际上，这是我的真实代码）：

```
<?php
class Foobar
{
  public static function foo()
  {
    exit('foo');
  }
} 
```

当我运行`$foobar = new FooBar; $foobar->foo()`它时显示`foo`.

为什么 PHP 会尝试在对象上下文中使用静态方法？有没有办法避免这种情况？

* * *

好的，你们没有得到我的问题：我知道静态和非静态方法之间的区别以及如何调用它们。这就是我的全部观点，如果我打电话`$foobar->foo()`，为什么 PHP 会尝试运行静态方法？

* * *

注意：我运行 PHP 5.4.4，错误报告到`E_ALL`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T15:21:18.040

要调用静态方法，请不要使用：

```
$foobar = new FooBar;
$foobar->foo() 
```

你打电话

```
FooBar::foo(); 
```

PHP手册说...

> 将类属性或方法声明为静态使它们无需实例化即可访问。声明为静态的属性不能用实例化的类对象访问（尽管静态方法可以）。

这就是为什么您可以在实例上调用该方法的原因，即使这不是您想要做的。

无论您是静态调用静态方法还是在实例上调用静态方法，都无法`$this`在静态方法中访问。

[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

您可以检查您是否处于静态上下文中，尽管我会质疑这是否是矫枉过正......

```
class Foobar
{
  public static function foo()
  {
    $backtrace = debug_backtrace();
    if ($backtrace[1]['type'] == '::') {
      exit('foo');
    }
  }
} 
```

另外一点 - 我*相信*该方法始终在静态上下文中执行，即使它是在实例上调用的。如果我错了，我很高兴得到纠正。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T15:30:15.710

由于 PHP 是一种非常宽容的语言，您可以通过重载来防止这种默认行为，`__callStatic`也可以使用反射来验证方法范围。

[http://php.net/manual/en/language.oop5.overloading.php#object.call](http://php.net/manual/en/language.oop5.overloading.php#object.call)

[http://php.net/ReflectionClass](http://php.net/ReflectionClass)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-21T11:36:45.830

我们可能需要更多关于 FooBar 声明的信息。显然，你不能声明两个方法 foo() ，即使一个是静态方法而另一个是实例方法：

```
class FooBar
{
  public static function foo()
  {
    return 'I am FooBar::foo().';
  }
  public function foo()
  {
    return 'I am FooBar->foo().';
  }
}
// result to Fatal error: Cannot redeclare FooBar::foo() 
```

所以，我想你想达到一个神奇的`__call()`方法，就像这样：

```
class FooBar
{
  public $foo = 'I am FooBar->foo().'; 
  // yes we can have a property with the same name than a method

  // this is the static method that we want to avoid
  public static function foo()
  {
    return 'I am FooBar::foo().';
  }

  // this is the method that should be call
  public function __call( $method , $arguments = array() )
  {
    if( isset( $this->$method ) ) // or anything else
    {
      return $this->$method; // or anything else
    }
    else
    {
      // restore fatal error
      trigger_error( sprintf( 'Call to undefined method %s::%s()' , get_class( $this ) , $method ) , E_USER_ERROR );
    }
  }

} 
```

为此，请查看以下代码：

```
$foobar = new FooBar;

try
{
  // safe way to detect if a method is static
  // @see http://php.net/manual/en/class.reflectionmethod.php
  $rfx = new ReflectionMethod( get_class( $foobar ).'::foo' );
  if( $rfx->isStatic() )
  {
    // the method exists and is static
    // but we do not want to call it directly
    // why not involving the magic public method `__call()`?
    // sounds like a plan...
    echo $foobar->__call( 'foo' );
  }
  else
  {
    // the method exists and is not static
    echo $foobar->foo();
  }
}
catch( ReflectionException $e )
{
  // the method does not exist, let's do some kind of magic
  echo $foobar->foo();
} 
```

# android - 什么是 glVertexAttribPointerData

> ID：14382208
> 
> 赞同：1
> 
> 时间：2013-01-17T15:16:37.407
> 
> 标签：android, opengl-es, opengl-es-2.0, trace

我用谷歌搜索了它，但找不到任何有用的信息。这是什么功能？我在使用 Tracer for OpenGL ES（Android SDK 中可用的工具，需要 Android 4.1（API 级别 16）或更高版本）创建的跟踪文件中看到了这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:14:06.443

是的，这是跟踪器用来发送对应的数据的辅助函数`glVertexAttribPointer`。`glVertexAttribPointer`提供指向用户内存的指针，并且无法在调用时确定应从该客户端内存中读取多少数据。这只有在随后的`glDraw`调用中才能知道，因此此时跟踪器读取数据并将其发送到主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:16:37.407

我敢打赌，这只是一个辅助函数，它提供了有关在没有 VBO 的情况下调用 glVertexAttribPointer 之前使用的数据的信息。

如果是这样，这是一种奇怪的行为，因为跟踪器应该只显示 OpenGL 函数（至少我只看到了标准的 OpenGL 函数调用，除了有问题的函数调用）。

谁能确认或否认我的提示？

# r - R install.packages 返回“未能创建锁定目录”

> ID：14382209
> 
> 赞同：88
> 
> 时间：2013-01-17T15:16:38.037
> 
> 标签：r, package, rcpp

下载 Rcpp 包时出现此错误：

```
> install.packages("Rcpp", dependencies=TRUE)
Installing package(s) into ‘/home/me/src/Rlibs’ (as ‘lib’ is unspecified)
trying URL 'http://cran.us.r-project.org/src/contrib/Rcpp_0.10.2.tar.gz'
Content type 'application/x-gzip' length 2380089 bytes (2.3 Mb)
...
Warning in dir.create(lockdir, recursive = TRUE) :
  cannot create dir '/home', reason 'Permission denied'
ERROR: failed to create lock directory ‘/home/me/src/Rlibs/00LOCK-Rcpp’
... 
```

由于我的机器在计算机集群上，所以我在不同的节点上尝试过，我很小心地删除了/tmp中下载的临时文件。奇怪的是我有权在 /home/me/src/Rlibs/ 中写入。所以我的问题是：

1.  为什么 R 想要在 /home 中拥有写入权限，而它只需要 /home/me/ 中的写入权限？
2.  我该如何解决这个错误？

* * *

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-redhat-linux-gnu (64-bit)
locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
 [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base
loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-01-17T22:09:04.363

在 NFS 文件系统上，您必须关闭哪些内容有时并不明显。

避免这种情况的最好方法是`--no-lock`在命令行上使用参数，即：

```
R CMD INSTALL --no-lock <pkg> 
```

在 R 中，您可以使用以下命令在命令中执行此操作：

```
install.packages("Rcpp", dependencies = TRUE, INSTALL_opts = '--no-lock') 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-02-25T13:43:40.063

当您的最后一个软件包安装异常中断时，就会发生这种情况。要解决此问题，您应该删除锁定的文件。例如在 R 控制台中执行此命令：

```
unlink("/home/me/src/Rlibs/00LOCK-Rcpp", recursive = TRUE) 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-02-22T07:37:13.407

避免此问题的最简单方法是在安装任何软件包之前运行以下行

```
options("install.lock"=FALSE) 
```

然后尝试 install.packages("name_of_package") 安装包。00LOCK 错误不会出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-06T12:06:55.133

当您升级到 R 的主要版本时，也会发生这种情况。一些主要的升级需要你重新构建你的包，例如，R 4.0。就我而言，我使用 Homebrew 安装了 R，`brew install R`并维护了很长时间，但是当我升级到 4 时，我不得不再次构建包并遇到了这个问题。

要解决它，您需要确保 Homebrew 删除了旧 R 安装的剩余部分。在默认设置中，您可以在此处找到它们，`/usr/local/lib/R`. 我有 的实例`3.5`，`3.6`除了 R 内部的其余部分。您可以删除那里的所有内容，然后再次安装 R，一切都应该可以正常工作。或者只是删除旧版本的 R，然后清空`4.0`. 不过，我建议进行全新安装。

因此，**如果您使用 Homebrew 维护您的 R**并遇到此问题，您可以通过以下方式解决它：

```
brew uninstall R
rm -r /usr/local/lib/R
brew install R 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-12-18T15:39:43.180

我在运行 Windows 7 时遇到了类似的问题：

> install.packages 中的错误：错误：无法锁定目录 'D:\Program Files\R\R-3.6.2\library' 以进行修改。

我在 R 控制台中使用以下命令解决了这个问题：

`unlink("D:\\Program Files\\R\\R-3.6.2\\library/00LOCK", recursive = TRUE)`

希望这有助于Windows用户...

# wpf - 如何获得 devexpress pivotgrid 的总价值？

> ID：14382216
> 
> 赞同：0
> 
> 时间：2013-01-17T15:16:49.103
> 
> 标签：wpf, vb.net, xaml, devexpress

如何使用 vb.net 从 Devexpress pivotgrid 中获得总计值？

```
Dim dsAccountingCube As New DevExpress.XtraPivotGrid.PivotGridAdomdDataSource
dsAccountingCube.ConnectionString = m_strOLAPConnection

m_pgCircularGauge.DataSource = dsAccountingCube

m_pgCircularGauge.BeginUpdate()
m_pgCircularGauge.RetrieveFields()

For Each f In m_pgCircularGauge.Fields
    Select Case f.Name
        Case "fieldBalance1122"
            f.Caption = "$"
            f.Area = DevExpress.Xpf.PivotGrid.FieldArea.DataArea

        Case Else
            f.Visible = False
        End Select
Next 
```

我想将总计值分配给 Circulargauge 的针值。如下

```
Me.CircularGaugeControl1.Scales(0).Needles(0).Value = m_pgCircularGauge.GetCellValue(0, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:07:11.860

我使用[了](http://help.devexpress.com/#WPF/DevExpressXpfPivotGridPivotGridControl_GetCellValuetopic).`PivotGridControl`

```
m_pgCircularGauge.GetCellValue(0, 0) 
```

它对我有用。

# visual-studio - 强制 Visual Studio 在调试和发布模式之间具有相同的包含目录

> ID：14382217
> 
> 赞同：6
> 
> 时间：2013-01-17T15:16:54.747
> 
> 标签：visual-studio, visual-c++, projects-and-solutions

我想知道是否有办法在项目/解决方案的调试和发布配置之间同步包含和链接目录的设置？

更准确地说，有什么方法可以告诉 Visual Studio 我想要项目属性

*   C/C++ -> 常规 -> “附加包含目录”
*   链接器 -> 常规 -> “其他库目录”
*   链接器 -> 输入 -> “附加依赖项”

调试和发布配置是否相同，或者以某种方式有效/自动地将这些设置从一个配置转发到其他配置？也许有任何插件/脚本，因为只需要更改项目文本文件中的几行来做我想要的？

我目前使用的是visual studio 2005，但我认为这个功能不应该过多地依赖于工作室的版本，所以请为任何版本的visual studio发布答案/解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:32:40.650

使用[属性表](http://msdn.microsoft.com/en-us/library/a4xbdz1e%28v=vs.80%29.aspx)：创建一个包含通用属性的属性表，然后将其包含在每个构建配置中。通过`Property Manager`窗口做所有事情；现在要小心：您要对公共属性进行的任何更改都必须在属性表中进行，而不是在项目属性中进行！

# r - R 曲线中 X 轴和 Y 轴上的相同刻度

> ID：14382219
> 
> 赞同：3
> 
> 时间：2013-01-17T15:17:05.130
> 
> 标签：r, plot

当我使用 R 的`curve()`函数时，有没有办法强制它在 X 和 Y 轴上使用相同的比例？

例如，考虑这个 R 代码

```
mean <- 5
variance <- 0.05
curve(exp((((x - mean) / variance)^2) * -0.5), mean - 2, mean + 2) 
```

这会给我这个情节：

![曲线图](../Images/c23d32ecd98c4099adfcf59f407f9676.png)

如您所见，X 轴和 Y 轴使用不同的刻度。我怎样才能解决这个问题？

注意：我知道我可以手动指定 Y 轴的范围（通过`ylim=`），但我不想使用它（因为这需要在函数更改时采用它）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T15:21:16.120

您需要`asp`绘图参数，用于纵横比。`asp = 1`在调用中设置`curve()`：

```
mean <- 5
variance <- 0.05
curve(exp((((x - mean) / variance)^2) * -0.5), mean - 2, mean + 2, asp = 1) 
```

这样就可以了。

`xlim == ylim`如果您想要或者如果您想要更好地标记轴，它并不完美，但`asp`在两个轴上获得相同的比例。

# javascript - 下拉列表索引更改后无法更改 CssClass

> ID：14382220
> 
> 赞同：0
> 
> 时间：2013-01-17T15:17:10.570
> 
> 标签：javascript, drop-down-menu, datepicker, rating, selectedindex

我遇到了这个问题，在我更改我的 asp:dropdownlist 选项后，我需要在 asp:textbox 上启用 datepicker 功能。

这是我的 asp:dropdownlist 控件，我在其中以编程方式从后面的代码中分配了值：

```
<asp:DropDownList ID="ddlHORating" runat="server" CssClass="ctlControl" /> 
```

但这是稍后的示例：

```
 <asp:DropDownList ID="ddlHORating" runat="server" CssClass="ctlControl">
                <asp:ListItem Value="OK" Text="6" />
                <asp:ListItem Value="OK" Text="5" />
                <asp:ListItem Value="OK" Text="4" />
                <asp:ListItem Value="OK" Text="3" />
                <asp:ListItem Value="WORST" Text="2" />
                <asp:ListItem Value="WORST" Text="1" />
                <asp:ListItem Value="WORST" Text="0" />
            </asp:DropDownList> 
```

我确实在我的代码后面的 asp:dropdownlist 控件上重新设置了 javascript 函数：

```
ddlHORating.Attributes.Add("onchange", "JavaScript: ICRESDateEnabler();"); 
```

这是我的 asp:textboxt 控件，一旦我在下拉列表中选择项目，它应该启用 datepicker 功能，目前 datepicker 功能只有在值为“watermarkText”时才会通过它 CssClass 启用，它需要更改为“watermarkDate “：

```
<asp:TextBox ID="txtICRESRevDate" runat="server" CssClass="watermarkText" Text="Select a date from calendar button only" Tooltip="Select a date from calendar button only" /> 
```

这是我使用的脚本：

```
 <script type="text/javascript">
    $(document).ready(function ICRESDateEnabler() {
        var ddl = document.getElementById('<%= ddlHORating.ClientID %>');
        var ddlID = ddl.selectedIndex;
        alert("Selected Index is : " + ddl.selectedIndex);
        if (parseInt(ddlID) >= 4) {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkText";
            alert("It's working");//Testing
        }
        else {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkDate";
            alert("Failed!");//Testing
        }
    });
</script> 
```

无论选择什么，我的脚本都会继续运行并提示警报“失败”。它假设我的 asp:textbox 右侧有 datepicker 图标，但它不会。

有人可以指出我实现这一目标的正确方向吗？

更新 ：

我现在设法通过将 ddlID 更改为 parseInt(dllID) 来更改 asp:textbox 的类名，但仍然无法使日期选择器图标可见

更新：2013 年 1 月 18 日 ~ 添加真实代码（仅相关）

好的，这里是我已经为这个问题修剪的代码，希望它可以让你检查它：

```
 .body
    {
        width: 1100px;
        table-layout: auto;
        border-style: none;
        border-width: 1pt;
        vertical-align: central;
        background-color: white !important;
        font-family:verdana,arial,helvetica,sans-serif;
        color:#000000;
    }

    .lblDesc 
    {
        color: #ed1b24;
        font-size: 14pt !important;
        border-bottom-width: 1px; 
        border-bottom-style: solid; 
        border-bottom-color: #fabea6;
        padding-left: 5px;
    }

    .tblBody
    {
        width: 100%;
        table-layout: auto;
        border-style: none;
        border-width: 1pt;
        vertical-align: central;
    }

    .trRow
    {
        height: 35px !important;
        text-align: left !important;
        background-repeat: no-repeat;
    }

    .tdLabel
    {
        font-size: 8pt;
        font-weight: bold;
        color: #525252;
        padding-left: 10px;
    }

    .tdControl
    {
        border-color: inherit;
        border-width: 1px;
        width : 35%;
        border-style: none;
        background-color: rgb(249, 249, 249);
        margin-left: 40px;
    }

    .tdButton
    {
        text-align: right !important;
        padding-right: 40px;
    }

    .ctlButton 
    {
        border-style: solid;
        border-top-style: solid;
        border: 1px;
        width: 120px;
    }

    .ctlControl
    {
        width: 89%;
        padding-left: 5px;
    }

    .tdSplitter
    {
        width: 2%;
        border-style: none;
    }

    .watermarkDate
    {
        color:#999;
        width: 89%;
        padding-left: 5px;
        font-style:italic;
        font-family:verdana,arial,helvetica,sans-serif;
    }

    .watermarkText
    {
        color:#999;
        width: 89%;
        padding-left: 5px;
        font-style: italic;
        font-family:verdana,arial,helvetica,sans-serif;
    }

    .currenciesOnly 
    {
        color:#999;
        text-align: left;
        width: 89%;
        padding-left: 5px;
        font-style: italic;
    }

    .numeric 
    {
        color:#999;
        width: 89%;
        padding-left: 5px;
        font-style: italic;
    }
</style>
<script type="text/javascript" src="~/_layouts/script/jquery-1.8.2.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery-ui.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery.ui.widget.js"></script>
<script type="text/javascript" src="~/_layouts/script/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery.autocomplete.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery.ui.datepicker.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery-currency.js"></script>
<script type="text/javascript" src="~/_layouts/script/jquery.numeric.js"></script>
<script type="text/javascript" src="~/_layouts/script/moment.js"></script>
<script type="text/javascript">
    $(function () {
        $(".watermarkDate").each(function () {
            $txt = $(this).datepicker({
                showOn: "button",
                buttonImage: "_layouts/EAR/images/Calendar.png",
                buttonImageOnly: true,
                dateFormat: "dd-MM-yy",
                showButtonPanel: true,
                onClose: function (e) {
                    var ev = window.event;
                    if (ev.srcElement.innerHTML == 'Clear')
                        this.value = "Select a date from calendar button only";
                },
                closeText: "Clear",
                buttonText: ""
            });
            $txt.addClass("watermarkDate");
            CalculateDay();
        });
        $(".watermarkDate").focus(function () {
            $txt = $(this).datepicker({
                showOn: "button",
                buttonImage: "_layouts/EAR/images/Calendar.png",
                buttonImageOnly: true,
                dateFormat: "dd-MM-yy",
                showButtonPanel: true,
                onClose: function (e) {
                    var ev = window.event;
                    if (ev.srcElement.innerHTML == 'Clear')
                        this.value = "Select a date from calendar button only";
                },
                closeText: "Clear",
                buttonText: ""
            });
            $txt.addClass("watermarkDate");
            CalculateDay();
        });
        $(".watermarkDate").blur(function () {
            $txt = $(this).datepicker({
                showOn: "button",
                buttonImage: "_layouts/EAR/images/Calendar.png",
                buttonImageOnly: true,
                dateFormat: "dd-MM-yy",
                showButtonPanel: true,
                onClose: function (e) {
                    var ev = window.event;
                    if (ev.srcElement.innerHTML == 'Clear')
                        this.value = "Select a date from calendar button only";
                },
                closeText: "Clear",
                buttonText: ""
            });
            $txt.addClass("watermarkDate");
            CalculateDay();
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        $(".watermarkText").each(function () {
            $txt = $(this);
            if ($txt.val() != this.title) {
                $txt.removeClass("watermark");
            }
        });
        $(".watermarkText").focus(function () {
            $txt = $(this);
            if ($txt.val() == this.title) {
                $txt.val("");
                $txt.removeClass("watermark");
            }
        });
        $(".watermarkText").blur(function () {
            $txt = $(this);
            if ($.trim($txt.val()) == "") {
                $txt.val(this.title);
                $txt.addClass("watermark");
            }
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".numeric").numeric(false, function () {
            alert("Integers only");
            this.value = "0 month";
            this.focus();
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function CalculateDay() {
        var m, n, d, e, f, months, dtCurrDate, dtCurrDate_unixtime, ctlHORevDate, ctlCasLineExpDate, ctlMonthOverDue, newHORevDate, newCasLineExpDate, newMonthOverDue, newHORevDate_unixtime, newCasLineExpDate_unixtime, newMonthOverDue_unixtime, diffCountDayHORevDate, diffCasLineExpDate, diffCountDayMonthOverDue;
        var months = new Array(12);
        months[0] = "January";
        months[1] = "February";
        months[2] = "March";
        months[3] = "April";
        months[4] = "May";
        months[5] = "June";
        months[6] = "July";
        months[7] = "August";
        months[8] = "September";
        months[9] = "October";
        months[10] = "November";
        months[11] = "December";

        ctlHORevDate = document.getElementById('<%= txtHORevDate.ClientID %>').value;
        ctlCasLineExpDate = document.getElementById('<%= txtCasLineExpDate.ClientID %>').value;

        if (ctlCasLineExpDate != "Select a date from calendar button only") {
            ctlCasLineExpDate = ctlCasLineExpDate.split('-');
            var i = 0;
            while (i <= 12) {
                if (ctlCasLineExpDate[1] == months[i])
                    ctlCasLineExpDate[1] = i + 1;
                i++;
            }

            f = moment(new Date(ctlCasLineExpDate[2], ctlCasLineExpDate[1] - 1, ctlCasLineExpDate[0])).subtract('months', 4).format("DD-MMMM-YYYY");

            document.getElementById('<%= txt4MontBefExpDate.ClientID %>').value = f;//Get date 4 month before Cash Line Expiry Date
        }

        if (ctlHORevDate != "Select a date from calendar button only") {
            ctlHORevDate = ctlHORevDate.split('-');
            var i = 0;
            while (i <= 12) {
                if (ctlHORevDate[1] == months[i])
                    ctlHORevDate[1] = i + 1;
                i++;
            }

            newHORevDate = ctlHORevDate[2] + "-" + ctlHORevDate[1] + "-" + ctlHORevDate[0];
            newHORevDate = newHORevDate.split('-');

            d = new Date(newHORevDate[0], (newHORevDate[1] - 1), newHORevDate[2]);
            e = moment().format('YYYY-MM-DD');
            e = e.split('-');
            e = new Date(e[0], (e[1] - 1), e[2]);

            m = d.getMonth();
            n = e.getMonth();

            months = (e.getMonth() + 1) - d.getMonth() + (12 * (e.getFullYear() - d.getFullYear()));

            document.getElementById('<%= txtMonthOverDue.ClientID %>').value = months + " month";//Get month overdue
        }
    });
</script>
<script type="text/javascript">
    $(document).ready(function ICRESDateEnabler() {
        var ddl = document.getElementById('<%= ddlHORating.ClientID %>');
        var ddlID = ddl.selectedIndex;
        alert("Selected Index is : " + ddl.selectedIndex + "\nAnd it's really : " + ddlID + "\nAfter convert to int is : " + parseInt(ddlID));//Testing
        if (parseInt(ddlID) <= 26) {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkText";
            alert("It's working, ICRES rating is below 13E & class is : \n" + document.getElementById('<%= txtICRESRevDate.ClientID %>').className);//Testing
        }
        else {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkDate";
            alert("It's working!, ICRES rating is 13E above & class is : \n" + document.getElementById('<%= txtICRESRevDate.ClientID %>').className);//Testing
        }
    });
</script>
</head>
<body>
<table ID="tblBody" class="body">
    <tr ID="tr04" class="trRow">
        <td class="tdSplitter">
                  </td>
        <td class="tdLabel">Business Centre</td>
        <td class="tdControl">
            <asp:DropDownList ID="ddlBusinessCentre" runat="server" CssClass="ctlControl" />
        </td>
        <td class="tdSplitter">
                  </td>
        <td class="tdLabel">Rating</td>
        <td class="tdControl">
            <asp:DropDownList ID="ddlHORating" runat="server" AutoPostBack="true" CssClass="ctlControl" />
        </td>
        <td class="tdSplitter">
                  </td>
    </tr>
    <tr ID="tr05" class="trRow">
        <td class="tdSplitter">
                  </td>
        <td class="tdLabel">Zone</td>
        <td class="tdControl">
            <asp:DropDownList ID="ddlZone" runat="server" CssClass="ctlControl">
                <asp:ListItem Enabled="true" Text="Please select..." Selected="True" />
                <asp:ListItem Enabled="true" Value="0" Text="Zone 1" />
                <asp:ListItem Enabled="true" Value="1" Text="Zone 2" />
                <asp:ListItem Enabled="true" Value="2" Text="Zone 3" />
            </asp:DropDownList>
        </td>
        <td class="tdSplitter">
                  </td>
        <td class="tdLabel">ICRES 13A Or Worse (New Review Date)</td>
        <td class="tdControl">
            <asp:TextBox ID="txtICRESRevDate" runat="server" CssClass="watermarkText" Text="Select a date from calendar button only" Tooltip="Select a date from calendar button only" />
        </td>
        <td class="tdSplitter">
      </td>
    </tr>
</table> 
```

这是我的代码，也仅针对此问题进行了修剪：

```
protected void Page_Load(object sender, EventArgs e)
{
    SetAttribute();
}

protected void Page_Init()
{
    LoadRatingList();
}

public void LoadRatingList()
{
    try
    {
        using (SPSite spSite = SPContext.Current.Site)
        {
            using (SPWeb spWeb = spSite.OpenWeb())
            {
                SPList spListOpen = spWeb.Lists["Rating"];

                SPQuery spQuery = new SPQuery();

                spQuery.Query = "<Where><Eq><FieldRef Name='Activator' /><Value Type='Boolean'>1</Value></Eq></Where>";
                SPListItemCollection spItemCollection = spListOpen.GetItems(spQuery);

                if (!spItemCollection.Count.Equals(0))
                {
                    ddlHORating.Items.Add("Please select...");
                    ddlHORating.SelectedItem.Attributes.CssStyle.Add("color", "Red");
                    int i = 0;
                    foreach (SPListItem spItem in spItemCollection)
                    {
                        string statAct = spItem["Activator"].ToString();
                        string statVal = spItem["Title"].ToString();

                        if (statAct.Equals("True"))
                        {
                            ddlHORating.Visible = true;
                            ddlHORating.Items.Add(spItem["Title"].ToString());
                            i++;
                            ddlHORating.SelectedValue = null;
                        }
                    }
                }
                else
                {
                    ddlHORating.BackColor = System.Drawing.Color.Red;
                    Page.ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('Data not available in Rating dropdown list!');", true);
                }
            }
        }
    }
    catch (Exception ex)
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('Error at populate Rating value : " + ex.Message + "');", true);
    }
}

public void SetAttribute()
{
    ddlHORating.Attributes.Add("onchange", "JavaScript: ICRESDateEnabler();");

}
} 
```

抱歉，它可能与以前有点不同，只是添加了一些测试。谢谢你的帮助。这是它的样子：

![我的程序界面](../Images/98d71eae163d6128eb46fc890584b520.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:50:44.107

我想我接近我现在正在寻找的东西。我做了一些更改，现在我可以自动弹出日期选择器了！请参阅下面的更新脚本： * 稍后需要将日期格式调整为“DD-MMMM-YYYY”

```
<script type="text/javascript">
    $(document).ready(function ICRESDateEnabler() {
        var ddl = document.getElementById('<%= ddlHORating.ClientID %>');
        var ddlID = ddl.selectedIndex;
        alert("Selected Index is : " + ddl.selectedIndex + "\nAnd it's really : " + ddlID + "\nAfter convert to int is : " + parseInt(ddlID));
        if (parseInt(ddlID) <= 26) {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkText";
            alert("It's working, ICRES rating is below 13E & class is : \n" + document.getElementById('<%= txtICRESRevDate.ClientID %>').className);//Testing
            $(document.getElementById('<%= txtICRESRevDate.ClientID %>')).value = "Select a date from calendar button only";
        }
        else {
            document.getElementById('<%= txtICRESRevDate.ClientID %>').className = "watermarkDate";
            alert("It's working!, ICRES rating is 13E above & class is : \n" + document.getElementById('<%= txtICRESRevDate.ClientID %>').className);//Testing
            $(document.getElementById('<%= txtICRESRevDate.ClientID %>')).datepicker().datepicker("show");
        }
    });
</script> 
```

见下图：

![成功的图片](../Images/2b4fcb0f634d8dc05d19054f053adf3b.png)

*** 非常感谢 stackoverflow 和所有成员！

# mysql - MySQL从与数组匹配的表中获取所有相关ID

> ID：14382224
> 
> 赞同：2
> 
> 时间：2013-01-17T15:17:19.480
> 
> 标签：mysql, select, group-by, relational-division

如果它们与数组中的所有项目匹配，我在尝试从表中检索所有产品 ID 时遇到问题，在这种情况下，仅当产品包含用户搜索的所有成分时才返回产品。

表看起来像这样

```
 ID  produktID   ingredientID
    ----------------------------
    1      418           1
    2      418           2
    3      418           3
    4      416           4
    5      411           1
    6      411           5
    7      411           6 
```

我从存储主要信息的产品表中加入此表。查询的目的应该是仅在所有成分 ID 与给定数组匹配时才检索产品 ID。我试过使用`WHERE ingredientID IN(1,5,6)`，但结果总是一个 OR 语句，返回匹配任何成分的每个 ID。例如，如果我通过 (1,5,6) 或 (5,6) 产品 ID 411 应该返回，但如果我通过 (2,5,6) 它不应该返回。

我尝试的查询看起来像这样（简化，它是 5 方式连接到其他关系（如品牌和类别）的一部分）

```
SELECT productID FROM products_ingredients_mm WHERE ingredientID IN (1,5,6) GROUP BY productID 
```

但结果也包含 418。我如何让它匹配？我希望我能够以一种可以理解的方式描述这个问题，我真的很难绕着它问一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:19:05.073

这称为关系除法。

```
SELECT  produktID
FROM    tableName
WHERE   ingredientID IN (1,5,6)
GROUP   BY produktID
HAVING  COUNT(*) = 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1cfe8/3)

`ingredientID`如果没有对每个强制执行唯一约束`produktID`，那么您需要使用`DISTINCT`

```
SELECT  produktID
FROM    tableName
WHERE   ingredientID IN (1,5,6)
GROUP   BY produktID
HAVING  COUNT(DISTINCT ingredientID) = 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1cfe8/4)

其他来源

*   [关系部](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:24:12.017

试试这个：

```
SELECT pi.productID, p.productName
FROM products_ingredients_mm pim 
INNER JOIN products p ON pim.productID = p.productID 
WHERE ingredientID IN (1,5,6)
GROUP BY productID
HAVING COUNT(DISTINCT ingredientID) = 3 
```

# c++ - 最后插入是否等同于 std::copy()？

> ID：14382228
> 
> 赞同：8
> 
> 时间：2013-01-17T15:17:31.150
> 
> 标签：c++, stl-algorithm

考虑以下两种将元素附加到向量中的方法

```
std::vector<int> vi1(10,42), vi2;

vi2.insert(vi2.end(),vi1.begin(),vi1.end());
<OR>
std::copy(vi1.begin(),vi1.end(),std::back_inserter(vi2)); 
```

`std::copy`版本看起来更干净，我不必输入`vi2`两次。但是由于它是一个通用算法，而 insert 是一个成员函数，它可以比它`insert`执行得更好`std::copy`还是做同样的事情？

我可以对自己进行基准测试，但我必须对每种模板类型的每个向量都进行基准测试。有人已经做过了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T15:23:48.307

有一些细微的差别。在第一种情况 ( `std::vector<>::insert`) 中，您为容器提供了一个范围，因此它可以计算距离并执行单个分配器以增长到最终所需的大小。在第二种情况下`std::copy`（

请注意，即使需要多次重新分配，插入的摊销成本仍必须保持不变，因此这并不意味着渐近成本变化，但可能很重要。另请注意，该库的一个特别智能的实现具有通过专门`std::copy`处理反向插入迭代器的行为来使第二个版本高效的所有必需信息（尽管我没有检查任何实现是否确实这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:22:38.070

`vector::insert`在大多数情况下，在 C++ 标准库的大多数主流实现上可能会表现得更好。原因是`vector`对象对当前分配的内存缓冲区具有内部知识，并且可以预先分配足够的内存来执行整个插入，因为可以使用随机访问迭代器预先计算元素的数量。但是，`std::copy`with`std::back_inserter`会一直调用`vector::push_back`，这可能会触发多次分配。

`std::vector::insert`例如，在 libstdc++ 中的 GNU 实现，如果迭代器类别是`RandomAccessIterator`. 使用输入迭代器，`vector::insert`可能等价于`std::copy`，因为您无法提前确定元素的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:24:26.430

您会认为这`vector::insert`可能能够优化一次插入多个项目的情况，但它比看起来更难。例如，如果迭代器是输出迭代器怎么办 - 无法提前知道您将执行多少次插入。`insert`just的代码很可能`push_back`与`back_inserter`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:18:27.803

它不等同于`std::copy`。它相当于`push_back`（在某种意义上）。

是的，`std::back_inserter`做同样的事情，`std::copy`如果你使用它也可以插入前面[`std:front_inserter`](http://en.cppreference.com/w/cpp/iterator/front_inserter)（尽管你*不能*使用它`std::vector`）。如果您改用它，它也可以在指定的迭代器处插入[`std::inserter`](http://en.cppreference.com/w/cpp/iterator/inserter)。所以你看，`std::copy`根据你作为第三个参数传递的内容来做事。

现在回到问题的本质。我认为您应该使用`insert`，因为它可以更好地执行，因为它可能会发现要插入的元素*数量*，因此它可能会一次分配那么多内存（如果需要）。在您的情况下，它可能会表现得更好，因为`v1`这`std::vector`意味着在 O(1) 时间内很容易计算元素*的数量*。

# django - Django REST框架中的可为空的ForeignKey字段

> ID：14382230
> 
> 赞同：21
> 
> 时间：2013-01-17T15:17:37.553
> 
> 标签：django, null, foreign-key-relationship, django-rest-framework

在 Django REST 框架（2.1.16）中，我有一个带有可为空 FK 字段的模型`type`，但 POST 创建请求给出了`400 bad request`该字段是必需的。

我的模型是

```
class Product(Model):
    barcode = models.CharField(max_length=13)
    type = models.ForeignKey(ProdType, null=True, blank=True) 
```

序列化器是：

```
class ProductSerializer(serializers.ModelSerializer):
    class Meta:
        model = Product
        exclude = ('id') 
```

我试图`type`明确添加到序列化程序中

```
class ProductSerializer(serializers.ModelSerializer):
    type = serializers.PrimaryKeyRelatedField(null=True, source='type')
    class Meta:
        model = Product
        exclude = ('id') 
```

它没有效果。

从[http://django-rest-framework.org/topics/release-notes.html#21x-series](http://django-rest-framework.org/topics/release-notes.html#21x-series)我看到有一个错误，但它已在 2.1.7 中修复。

我应该如何更改序列化程序以正确处理我的 FK 字段？

谢谢！

* * *

更新：从它给出的外壳

```
>>> serializer = ProductSerializer(data={'barcode': 'foo', 'type': None})
>>> print serializer.is_valid()
True
>>> 
>>> print serializer.errors
{} 
```

但没有类型=无：

```
>>> serializer = ProductSerializer(data={'barcode': 'foo'})
>>> print serializer.is_valid()
False
>>> print serializer.errors
{'type': [u'This field is required.']}
>>> serializer.fields['type']
<rest_framework.relations.PrimaryKeyRelatedField object at 0x22a6cd0>
>>> print serializer.errors
{'type': [u'This field is required.']} 
```

在这两种情况下，它都给出

```
>>> serializer.fields['type'].null
True
>>> serializer.fields['type'].__dict__
{'read_only': False, ..., 'parent': <prodcomp.serializers.ProductSerializer object at   0x22a68d0>, ...'_queryset': <mptt.managers.TreeManager object at 0x21bd1d0>, 'required': True, 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-08-04T17:23:31.697

`allow_null`在初始化序列化程序时添加 kwarg ：

```
class ProductSerializer(serializers.ModelSerializer):
    type = serializers.PrimaryKeyRelatedField(null=True, source='type', allow_null=True) 
```

正如@gabn88 的评论中已经提到的，但我认为它需要自己的答案。（花了我一些时间，因为我只是在自己发现后才阅读该评论。）

见[http://www.django-rest-framework.org/api-guide/relations/](http://www.django-rest-framework.org/api-guide/relations/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T16:13:32.013

我不确定那里发生了什么，我们已经覆盖了那个案例，类似的案例对我来说很好。

也许尝试进入 shell 并直接检查序列化程序。

例如，如果您实例化序列化程序，会`serializer.fields`返回什么？怎么样`serializer.field['type'].null`？如果您直接在 shell 中将数据传递给序列化程序，您会得到什么结果？

例如：

```
serializer = ProductSerializer(data={'barcode': 'foo', 'type': None})
print serializer.is_valid()
print serializer.errors 
```

如果您得到了一些答案，请更新问题，我们将看看是否可以对其进行排序。

**编辑**

好的，这更好地解释了事情。'type' 字段可以为空，所以它可能是`None`，但它仍然是必填字段。如果您希望它为 null，则必须将其显式设置为`None`.

如果您确实希望能够在 POST 数据时排除该字段，您可以`required=False`在序列化器字段中包含该标志。

# java - 尝试运行单元测试时出现 Junit 错误

> ID：14382235
> 
> 赞同：0
> 
> 时间：2013-01-17T15:17:48.950
> 
> 标签：java, junit, classnotfoundexception

我收到此错误：

```
 Class not found com.apache.camel.example.tests.ReportIncidentRoutesTest
java.lang.ClassNotFoundException: com.apache.camel.example.tests.ReportIncidentRoutesTest
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是我收到的新错误的更新堆栈跟踪。在运行配置中，我确实让它指向这个类，所以我不确定为什么我仍然会收到这个错误。

编辑： - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------------ 我的测试课程的副本：

```
package com.apache.camel.example.tests;

import org.apache.camel.CamelContext;
import org.apache.camel.example.reportincident.InputReportIncident;
import org.apache.camel.example.reportincident.OutputReportIncident;
import org.apache.camel.example.reportincident.ReportIncidentEndpoint;
import org.apache.camel.example.reportincident.ReportIncidentRoutes;
import org.apache.camel.impl.DefaultCamelContext;
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
import org.jvnet.mock_javamail.Mailbox;

import junit.framework.Test;
import junit.framework.TestCase; 
```

/** * 我们的路线的单元测试 */

```
 public class ReportIncidentRoutesTest extends TestCase {

private CamelContext camel;

// should be the same address as we have in our route
private static String ADDRESS = "http://localhost:8080/part-five/webservices/incident";

protected void startCamel() throws Exception {
    camel = new DefaultCamelContext();
    camel.addRoutes(new ReportIncidentRoutes());
    camel.start();
}

protected static ReportIncidentEndpoint createCXFClient() {
    // we use CXF to create a client for us as its easier than JAXWS and works
    JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
    factory.setServiceClass(ReportIncidentEndpoint.class);
    factory.setAddress(ADDRESS);
    return (ReportIncidentEndpoint) factory.create();
}

public void testRendportIncident() throws Exception {
    // start camel
    startCamel();

    // assert mailbox is empty before starting
    Mailbox inbox = Mailbox.get("blah@blah.com");
    assertEquals("Should not have mails", 0, inbox.size());

    // create input parameter
    InputReportIncident input = new InputReportIncident();
    input.setIncidentId("123");
    input.setIncidentDate("2008-08-18");
    input.setGivenName("Patrick");
    input.setFamilyName("joe");
    input.setSummary("Blah");
    input.setDetails("Blah blah");
    input.setEmail("blah@blah.com");
    input.setPhone("845 2962 7576");

    // create the webservice client and send the request
    ReportIncidentEndpoint client = createCXFClient();
    OutputReportIncident out = client.reportIncident(input);

    // assert we got a OK back
    assertEquals("0", out.getCode());

    // let some time pass to allow Camel to pickup the file and send it as an email
    Thread.sleep(3000);

    // assert mail box
    assertEquals("Should have got 1 mail", 1, inbox.size());

    // stop camel
    camel.stop();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:24:11.923

编译时似乎 junit 3 在类路径中（假设您没有因任何使用 junit api 而出现编译错误），但在运行时却没有，因此涉及到一些类路径不匹配。

似乎您通过 eclipse 测试运行器运行测试，是否配置为与编写测试相同的 junit 版本？

# mysql - MySQL 获取列平均值的问题

> ID：14382237
> 
> 赞同：2
> 
> 时间：2013-01-17T15:17:50.707
> 
> 标签：mysql, database, select, average

我有一个 MySQL 表，它有三列 id、name 和 height。

我想运行一个查询来返回所有条目的名称和高度，以及所有条目的平均高度。所有这些事情都必须在一个查询中完成。

这是我尝试过的。

```
SELECT name, height, avg(height) as average_height FROM mytable 
```

此查询仅返回一行，但平均高度是正确的。

```
name    height    average_height
--------------------------------
Harry   165       169.5 
```

然后我尝试了这个查询

```
SELECT name, height, avg(height) as average_height FROM mytable GROUP BY name 
```

然后它返回所有行，但平均值不正确

```
name    height    average_height
--------------------------------
Harry   165       165
Tom     170       170
George  180       180
Raj     163       163 
```

如何在单个查询中获取平均值以及所有行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:22:15.300

这是一种方法：

```
SELECT name, height, average_height FROM mytable CROSS JOIN (
   select avg(height) as average_height FROM mytable
) as avg; 
```

[SQLFiddle 示例](http://www.sqlfiddle.com/#!2/e4feb/4)（更新示例以反映使用建议`CROSS JOIN`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:20:32.897

试试这个：

```
SELECT name, height, average_height 
FROM mytable, (SELECT AVG(height) average_height FROM mytable) A 
```

**或者**

```
SELECT name, height, (SELECT AVG(height) FROM mytable) AS average_height 
FROM mytable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:32:23.783

在第一次查询期间，您要询问平均高度，并且它正在针对第一条记录（Harry）打印平均高度。在第二个查询中，您要询问按姓名分组的组中所有学生的平均身高。现在，在您的情况下，您有四个组，每个组仅包含一条记录，因为没有重复的名称，因此一条记录的平均高度将作为该记录本身的高度。

您要做的是打印每条记录并针对它打印平均高度。

```
SELECT name, height, (SELECT AVG(height) FROM mytable) AS average_height 
FROM mytable; 
```

# macos - 使用ffmpeg时编译错误

> ID：14382239
> 
> 赞同：0
> 
> 时间：2013-01-17T15:18:00.937
> 
> 标签：macos, gcc, ffmpeg

我在 Qt Mac 中编译 ffmpeg 的示例时发现了一个奇怪的问题。

我已经安装了ffmpeg库，并在终端上用cc和gcc编译器测试了这个例子，在编译运行的情况下我没有任何问题。

但是当我在 Qt 中调用库（ffmpeg 是 C 库）来编译示例的相同代码时，g++ 编译器给了我很多错误。

我在 main.cpp 代码中使用了这个结构：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QFileDialog>

extern "C" {
#include <libavutil/imgutils.h>
#include <libavutil/samplefmt.h>
#include <libavutil/timestamp.h>
#include <libavformat/avformat.h>
}

#include <QDebug> 
```

编译输出给了我：

```
In file included from ../audvid/main.cpp:7:
/opt/local/include/libavutil/timestamp.h: In function 'char*
av_ts_make_string(char*, int64_t)':
/opt/local/include/libavutil/timestamp.h:48: warning: comparison
between signed and unsigned integer expressions
/opt/local/include/libavutil/timestamp.h:49: error: expected `)'
before 'PRId64' /opt/local/include/libavutil/timestamp.h:49: warning:
spurious trailing '%' in format
/opt/local/include/libavutil/timestamp.h:49: warning: too many
arguments for format /opt/local/include/libavutil/timestamp.h: At
global scope: /opt/local/include/libavutil/timestamp.h:68: error:
'AVRational' has not been declared
/opt/local/include/libavutil/timestamp.h: In function 'char*
av_ts_make_time_string(char*, int64_t, int*)':
/opt/local/include/libavutil/timestamp.h:70: warning: comparison
between signed and unsigned integer expressions
/opt/local/include/libavutil/timestamp.h:71: error: 'av_q2d' was not
declared in this scope ../audvid/main.cpp: In function 'int
decode_packet(int*, int)': ../audvid/main.cpp:50: error: cannot
convert 'AVRational*' to 'int*' for argument '3' to 'char*
av_ts_make_time_string(char*, int64_t, int*)' ../audvid/main.cpp:73:
error: cannot convert 'AVRational*' to 'int*' for argument '3' to
'char* av_ts_make_time_string(char*, int64_t, int*)'
../audvid/main.cpp:75: error: 'struct AVFrame' has no member named
'channels' ../audvid/main.cpp:84: error: 'struct AVFrame' has no
member named 'channels' ../audvid/main.cpp:90: error: 'struct AVFrame'
has no member named 'channels' ../audvid/main.cpp: In function 'int
open_codec_context(int*, AVFormatContext*, AVMediaType)':
../audvid/main.cpp:112: error: 'av_get_media_type_string' was not
declared in this scope ../audvid/main.cpp:123: error:
'av_get_media_type_string' was not declared in this scope
../audvid/main.cpp:129: error: 'av_get_media_type_string' was not
declared in this scope ../audvid/main.cpp: In function 'int
get_format_from_sample_fmt(const char**, AVSampleFormat)':
../audvid/main.cpp:152: warning: comparison between signed and
unsigned integer expressions ../audvid/main.cpp: In function 'int
main(int, char**)': ../audvid/main.cpp:239: error: invalid conversion
from 'void*' to 'uint8_t**' make: *** [main.o] Error 1 make: Leaving
directory
`/Users/polin/Desktop/audvid/audvid-build-    Qt_4_8_0_qt_everywhere_opensource_src_4_8_0_tp-Release'
10:44:37: The process "/usr/bin/make" exited with code 2\. Error while
building/deploying project audvid (target: Qt 4.8.0
(qt-everywhere-opensource-src-4.8.0-tp)) When executing step 'Make' 
```

我不明白我是否在代码中犯了错误，或者我是否必须更改 Qt 编译器？（我不知道该怎么做）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:16:02.470

您需要`libavutil/avutil.h`在`#include <libavutil/imgutils.h>`. 您还需要添加`#include <libavcodec/avcodec.h>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-30T04:16:13.960

因为 ffmpeg 是用纯 C 编写的。一些 C99 设计与 g++ 编译器不兼容。所以解决它的一种方法是找到“错误”的源代码在哪里，并用 C++ 设计风格替换它们。例如

```
av_get_bytes_per_sample( static_cast<AVSampleFormat>(format) )
#undef av_err2str
#define av_err2str(errnum) \
av_make_error_string((char*)__builtin_alloca(AV_ERROR_MAX_STRING_SIZE), AV_ERROR_MAX_STRING_SIZE, errnum)
#undef av_ts2timestr
#define av_ts2timestr(ts, tb) \
av_ts_make_time_string((char*)__builtin_alloca(AV_TS_MAX_STRING_SIZE), ts, tb) 
```

# sql - SQL SELECT 字段包含（单词）不起作用

> ID：14382247
> 
> 赞同：0
> 
> 时间：2013-01-17T15:18:34.107
> 
> 标签：sql, select, sql-like

我有这个查询：

```
SELECT *
FROM
  (SELECT ' ' + REPLACE(Title,' ','  ') + ' ' AS Title
   FROM MyTable) t
WHERE Title LIKE '% Samsung %'
  AND Title LIKE '% Galaxy %'
  AND Title LIKE '% Axiom %'
  AND REPLACE(REPLACE(REPLACE(Title,' Samsung ',''),' Galaxy ',''), ' Axiom ','') = '' 
```

此查询应在 MyTable 字段 Title 中搜索并显示包含 LIKE 中指定的单词的所有行。

我没有收到任何错误，但字段标题包含一行带有以下字符串“Samsung Galaxy Axiom R830”，我的查询没有返回它（它应该返回）。

这是我最初的问题，它适用于某些记录，但不适用于所有[仅包含特定单词的 SQL SELECT LIKE](https://stackoverflow.com/questions/14291060/sql-select-like-containing-only-specific-words/14291100#14291100)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:20:54.637

可能是因为您正在寻找 " `Samsung`" 前后有一个空格，而字符串在 " " 之前没有空格`Samsung`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:21:25.087

如果标题为“Samsung Galaxy Axiom R830”，则以下条件不成立。

```
REPLACE(REPLACE(REPLACE(Title,' Samsung ',''),' Galaxy ',''),' Axiom ','') = '' 
```

写入的替换将输出

```
SamsungAxiom R830 
```

这将不匹配空白字符串。

如果您从替换中删除了空格，则会留下 R830（可能还有一些空格）。正如 Hellion 在他的评论中所说，这是一个要求“Samsung”、“Galaxy”和“Axiom”作为标题中唯一单词的查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:23:00.267

你有类似的空间。也许你想要类似的东西：

```
WHERE (Title LIKE '% Samsung %' or title like '%Samsung' or title like 'Samsung%')
  AND (Title LIKE '% Galaxy %' or title like '%Galazy' or title like 'Galaxy%')
  AND (Title LIKE '% Axiom %' or title like '%Axiom' or title like 'Axiom%')
  AND replace(REPLACE(REPLACE(REPLACE(Title,'Samsung',''),'Galaxy',''), 'Axiom',''), ' ') = '' 
```

实际上，当我考虑到它时，我认为最终的替换就足够了：

```
where replace(REPLACE(REPLACE(REPLACE(Title,'Samsung',''),'Galaxy',''), 'Axiom',''), ' ') = '' 
```

# ruby - 如何格式化 ruby 记录器？

> ID：14382252
> 
> 赞同：34
> 
> 时间：2013-01-17T15:18:56.550
> 
> 标签：ruby, logging

你如何格式化红宝石记录器？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-17T15:37:39.257

```
logger = Logger.new('nice.log')

logger.formatter = proc do |severity, datetime, progname, msg|
   "NICE: #{msg}\n"
end

logger.info("I like cheese.")

# nice.log:
NICE: I like cheese. 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-01-20T13:56:34.710

如果您只想格式化时间，可以使用[datetime_format](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#method-i-datetime_format)和标准[格式规范](http://man7.org/linux/man-pages/man3/strftime.3.html)轻松完成。例如，如果您这样做：

```
# Set the logger:
logger = Logger.new($stdout)
logger.level = Logger::DEBUG
logger.datetime_format = "%Y-%m-%d %H:%M:%S"

logger.info("This is an info log...")
logger.error("This is an error log...") 
```

您最终会得到以下日志：

```
I, [2015-01-20 14:02:29#17329]  INFO -- myProg: This is an info log...
E, [2015-01-20 14:02:29#17329] ERROR -- myProg: This is an error log... 
```

相反，如果你想完全自定义你的日志，你可以使用[logger.formatter](http://www.ruby-doc.org/stdlib-2.0/libdoc/logger/rdoc/Logger/Formatter.html)。例如，如果您这样做：

```
# Set the logger:
logger = Logger.new($stdout)
logger.level = Logger::DEBUG
logger.formatter = proc do |severity, datetime, progname, msg|
    date_format = datetime.strftime("%Y-%m-%d %H:%M:%S")
    if severity == "INFO" or severity == "WARN"
        "[#{date_format}] #{severity}  (#{progname}): #{msg}\n"
    else        
        "[#{date_format}] #{severity} (#{progname}): #{msg}\n"
    end
end

logger.info("This is an info log...")
logger.error("This is an error log...") 
```

您最终会得到以下日志：

```
[2015-01-20 14:48:04] INFO  (myProg): This is an info log...
[2015-01-20 14:48:04] ERROR (myProg): This is an error log... 
```

# ruby-on-rails - 如何使用 Javascript 加载 CKEditor？

> ID：14382264
> 
> 赞同：3
> 
> 时间：2013-01-17T15:19:22.843
> 
> 标签：ruby-on-rails, ckeditor

我已将 CKEditor 集成到我的博客评论系统中，当我加载新页面时它显示良好。

但是，对于回复评论，我有一个 javascript 操作，可以从每个评论下方的“回复此评论”链接打开一个新的评论表单。在这种情况下，CKEditor 不会加载（我只是得到一个基本的非 CKEditor 文本区域）。我是否需要在我的 javascript 文件中添加一些内容以便 CKeditor 正确加载？

**帖子/show.html.erb**

```
<%= @post.content %>
<%= render 'comments/form' %> #this CKEditor form renders fine when the page loads
<%= @post.comments %> 
```

**评论/_form.html.erb**

```
<%= simple_form_for(@comment, remote: true) do |f| %>
  <%= f.hidden_field :parent_id %>
  <%= f.cktext_area :content, :input_html => { :ckeditor => { :toolbar => 'Basic' } }, :class => "comment_input" %>
<%= f.button :submit %> 
```

**评论/new.js.erb**

```
$('#comment_<%= @comment.parent.id %>').append("<%= escape_javascript(render 'form') %>"); 
```

**评论/_comment.html.erb**

```
<div id="comment_<%= comment.id %>">
  <%= comment.content.try(:html_safe) %>
  <%= link_to "reply to this comment", new_comment_path(:parent_id => comment), remote: true %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:46:34.200

您必须创建编辑器的新实例。在 comments/new.js.erb 中附加表单后：

```
CKEDITOR.replace('id_of_textarea',{
    :toolbar => 'Basic'
}); 
```

我不确定是否可以使用任何选择器代替“id_of_textarea”。如果不是，则 textarea 必须具有唯一 ID。还有[另一种](http://ckeditor.com/blog/CKEditor-for-jQuery)创建编辑器实例的方法，但我自己没有尝试过

# php - 使用 codeigniter 将文件从本地服务器上传到 Web 服务器

> ID：14382265
> 
> 赞同：0
> 
> 时间：2013-01-17T15:19:25.487
> 
> 标签：php, codeigniter, amazon-ec2, codeigniter-2

我有一个客户端数据库，可以在本地服务器上生成和存储报告，我希望这些报告能够被可公开访问的远程服务器访问。

本地服务器运行 windows，我在远程服务器上运行 unix 安装。

公共端是用codeigniter构建的，本地端是专有的php代码。我将如何将文件传输到远程服务器？

我不是在找人为我编写代码，但如果你能提供一个一般性的例子，或者指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:59:01.490

您可以使用 CURL 在后台将文件发送到本地服务器到其他服务器，这是一个很好的例子。

[如何在 php 中使用 curl 将上传文件发送到其他网站？](https://stackoverflow.com/questions/3706311/how-to-send-upload-file-to-other-website-by-using-curl-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:50:30.073

我最终在我的本地 Windows 服务器上安装了 winSCP，然后从 php 文件中使用 shell_exec 调用带有命令的批处理文件来传输文件。

# perl - 从 Perl 脚本调用一个 URL

> ID：14382269
> 
> 赞同：0
> 
> 时间：2013-01-17T15:19:52.920
> 
> 标签：perl, shell, servlets

我有一个 Perl 脚本，其中包含一些调用一个 URL 的代码。基于通过 url 传递的参数，指向用于在数据库中存储一些数据的 servlet 的 URL。我正在使用下面的代码，但未能调用 url 并且无法将数据存储在数据库中。

```
#!/appl/teamsite/iw-perl/bin/iwperl

for (@ARGV) { printf "%d %s\n", $i++, $_};
my $environment=$ARGV[0];
my $jobid = $ARGV[1];
my $taskID = $ARGV[2];
my $workArea= $ARGV[3];
my $jobDocument = $ARGV[4];

my $url = "http://localhost:7001/JCreationServlet?command=build"."&environment=".$ARGV[0]."&jobID=".$ARGV[1]."&taskID=".$ARGV[2]."&workArea=".$ARGV[3]."&jobDocument=".$ARGV[4];

print "Url is $url\n";

'wget '.$url; 
```

请帮助我，以便我能够调用该 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:24:48.493

```
'wget '.$url; 
```

应该是反引号，如果你希望它被执行

```
`wget $url` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:38:31.220

您可以使用 ` `wget $url``，而不是您所拥有的，这将解决它。但是，我建议使用[系统](http://perldoc.perl.org/functions/system.html)调用，因为它是更好的做法：

`system("wget",$url);`

但是，如果您出于某种原因需要输出，那么最好使用反引号并像这样捕获它：

```
my $response = `wget $url`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:07:46.990

在您的代码中：

```
'wget '.$url; 
```

只是一个字符串。

请参考[this](http://www.perlhowto.com/executing_external_commands)来执行外部命令。

# java - 在浏览器外运行 Oracle Forms 11g

> ID：14382272
> 
> 赞同：2
> 
> 时间：2013-01-17T15:20:01.580
> 
> 标签：java, applet, oracleforms, appletviewer

我们有一个可以通过浏览器启动的 Oracle Forms 11g 应用程序。这会留下一个空的浏览器窗口，因为 Forms 会打开自己的窗口。但是，如果您关闭空的浏览器窗口，表单窗口也会关闭。

我喜欢这种安装是服务器安装的事实，我可以轻松更新它。

但我更喜欢桌面上的图标（快捷方式），它只打开没有浏览器窗口的表单应用程序。我希望用 Java SDK 中的 AppletViewer 解决这个问题。

但是，当我使用起始页的 URL 启动它时，我收到：

```
Warning: <embed> tag requires code attribute.
Exception in thread "main" java.lang.NullPointerException
    at sun.applet.AppletViewer.parse(AppletViewer.java:1129)
    at sun.applet.AppletViewer.parse(AppletViewer.java:1074)
    at sun.applet.Main.run(Main.java:156)
    at sun.applet.Main.main(Main.java:98) 
```

有谁知道我如何在没有浏览器（并且没有本地安装应用程序）的情况下直接打开 Forms 应用程序？

PS：我知道[Run Oracle Forms as Standalone without browser](https://stackoverflow.com/questions/2361807/run-oracle-forms-as-standalone-without-browser)，但这对我没有帮助，因为引用的链接不再在线。

**更新1：**链接已被替换，所以这可能是我将尝试的解决方案。
**更新 2：**我们设法通过 Webstart 像任何其他桌面应用程序一样运行我们的 Forms 应用程序。欢呼！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:51:07.120

[您可以从此](http://oracleformsinfo.wordpress.com/2011/12/19/how-can-i-close-the-parent-browser-window-while-running-forms-on-the-web/)博客文章中使用 Javascript 签出解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:12:31.950

您可以在启动它的同一浏览器窗口中打开 Forms 应用程序，只需将其放在 formsweb.cfg 中：

```
separateFrame=false 
```

# jquery - jQuery 交换视频源，然后 .load() 在 IE8 /Chrome 中不起作用

> ID：14382276
> 
> 赞同：1
> 
> 时间：2013-01-17T15:20:09.957
> 
> 标签：jquery, google-chrome, video, internet-explorer-8

我有一个视频库，需要我能够通过单击换出 mp4 的 href 和替代 ogv 视频文件，然后将新源加载到页面。

我编写的脚本在 Firefox 中完美运行，但在 IE 或 Chrome 中却不行。

我检查了变量是否正在填充，我尝试将缓存设置为 false 并使用随机字符串附加 url，但仍然没有乐趣。

这是脚本：

```
//Click and Hover events for thumbnail list
$(".video_thumb ul li:first").addClass('active'); 

$(".video_thumb ul li").click(function(){ 
    //Set Variables
    var vidAlt = $(this).find('img').attr("alt"); //Get Alt Tag of Image
    var vidSrc = $(this).find('a').attr("href"); //Get video link href
    var vidAltSrc = vidSrc.replace(".mp4", ".ogv"); //Create 2nd variable with alternate source

    if ($(this).is(".active")) {  //If it's already active, then...
        return false; // Don't click through
    } else {
        //Swap out video links  
    $('#vid video source#video1').attr('src', vidSrc);
        $('#vid video source#video2').attr('src', vidAltSrc);
        $('#vid video').attr('title', vidAlt);
        $('#vid video').load(); 

    };

    $(".video_thumb ul li").removeClass('active'); //Remove class of 'active' on all lists
    $(this).addClass('active');  //add class of 'active' on this list only
    return false;

}) .hover(function(){
    $(this).addClass('hover');
    }, function() {
    $(this).removeClass('hover');
}); 
```

这是页面的html：

```
<div class="main_image">
  <div id="vid">
    <video width="600" controls title="Video Title" style="z-index:1000;">
                <source id="video1" src="videos/video.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
                <source id="video2" src="videos/video.ogv" type='video/ogg; codecs="theora, vorbis"'>
            </video>
  </div>
</div> 
```

任何帮助都会非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:27:47.380

您应该使用 $(".video_thumb ul li").each(function(){$(this).click(function(){ .... 代替 $(".video_thumb ul li").click(function (){

# ruby-on-rails-3 - RailsAdmin has_many 直接创建

> ID：14382278
> 
> 赞同：1
> 
> 时间：2013-01-17T15:20:12.593
> 
> 标签：ruby-on-rails-3, has-many, rails-admin

我有一个简单的`has_many`附件情况：

```
class Project < ActiveRecord::Base
    has_many :images, :class_name => 'ProjectImage', :dependent => :destroy

class ProjectImage < ActiveRecord::Base
    has_attached_file :image
    belongs_to :project 
```

创建/编辑项目时是否可以（通过 Rails Admin）直接添加图像？

现在有两种方法（都很糟糕！）：

1）创建/编辑一个 ProjectImage 实例并将其添加到项目中（您必须搜索它）。

2)`Add a new Project image`创建一个模态，然后与 1) 相同

![在此处输入图像描述](../Images/f0b42b16ae50cfc236c09d2250f88520.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:49:55.847

关键是：**嵌套属性**使用`accepts_nested_attributes_for`.

例如：

```
has_many :images, :class_name => 'ProjectImage', :dependent => :destroy, :inverse_of => :project
accepts_nested_attributes_for :images, :allow_destroy => true 
```

# sql - 用于添加比较数据行的计算字段的 SQL 查询

> ID：14382279
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:20:15.637
> 
> 标签：sql, tsql

这个问题的标题可能措辞不佳，因为除了提供一些演示数据之外，我发现很难简明扼要地解释我想要什么。

我有一个查询，它从 sql 表中返回以下数据：

```
ID    Job    User    Amount

1     101    Bob     100
2     101    Pete    500
3     102    Bob     400
4     102    Pete    200
5     101    Pete    850
6     102    Bob     650 
```

我想要的是查询还返回一个名为（差异）的附加字段，其中包含同一用户和作业的连续条目中的金额之间的差异。因此，我希望返回的数据如下：

```
ID    Job    User    Amount   Diff

1     101    Bob      100     100
2     101    Pete     500     500
3     102    Bob      400     400
4     102    Pete     200     200
5     101    Pete     850     350
6     102    Bob      650     250 
```

在前四行中，Diff 与 Amount 相同，因为每行都是每个用户每个作业的第一个条目（因此，差异是参考有效的 nil 起始 Amount 计算的）。

最后两行包含先前出现在表中的用户和作业组合的信息，因此 Diff 计算如下：

```
Job 101    User Pete    850 - 500 = 350
Job 102    User Bob     650 - 400 = 250 
```

我以前从来没有在 SQL 查询中比较过这样的行中的数据，所以我真的不知道从哪里开始。任何帮助将非常感激。

添加

请注意，金额不是运行总计。它是定期对用户在每个特定工作中输入的价值进行的主观评估。实际上，金额可能会从一个评估下降到下一个评估。我想要的是一个返回连续评估“金额”之间差异的查询。

替代解释

我希望返回评估金额的历史变动轨迹。另一个例子，查看单个 Job 和 User 如下：

```
Job    User    Amount    Movement

101    Bob      100       100
101    Bob      500       400
101    Bob      400      (100)
101    Bob    1,000       600 
```

但是，根据原始示例，需要从包含许多混合的作业和用户的表中提取此信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:40:03.427

对于 SQL Server 2012，试试这个

这假设 ID=5 值在您的示例中是错误的

每对的“先前值”

```
DECLARE @t TABLE (ID int, Job int, Username varchar(10), Amount int);
INSERT @t
VALUES
    (1, 101, 'Bob', 100), (2, 101, 'Pete', 500), (3, 102, 'Bob', 400),
    (4, 102, 'Pete', 200), (5, 101, 'Pete', 850), (6, 102, 'Bob', 650);

SELECT
    t1.*,
    t1.Amount - ISNULL(LAG(Amount) OVER (PARTITION BY Job, Username ORDER BY ID), 0) AS DiffAmount
FROM
    @t t1
ORDER BY
   t1.ID 
```

每对“第一个值”

```
SELECT
    t1.*,
    CASE
        WHEN FIRST_VALUE(t1.ID) OVER (PARTITION BY Job, Username ORDER BY ID) = t1.ID THEN t1.Amount
        ELSE t1.Amount - FIRST_VALUE(t1.Amount) OVER (PARTITION BY Job, Username ORDER BY ID)
    END AS DiffAmount
FROM
    @t t1
ORDER BY
    t1.ID 
```

# xml - 哪个 DITA 元素可用于嵌入 YouTube 视频？

> ID：14382288
> 
> 赞同：3
> 
> 时间：2013-01-17T15:20:27.843
> 
> 标签：xml, video, xml-documentation, dita

我正在使用 DITA 生成用户文档并生成 PDF 和 XHTML 可交付成果。我可以使用哪个 DITA 元素嵌入 YouTube 视频？

理想情况下，我更愿意使用样式表生成嵌入代码，并以某种方式将视频链接添加到文档中。下面是我设想这样一个元素使用伪标记的样子：

```
<fig audience="web">
    <title>YouTube 101: How to Find What's Hot on YouTube</title>
    <video href="http://www.youtube.com/watch?feature=player_embedded&v=FEyRza0rJyI">
        <alt>This video explains how to tap into the cultural zeitgeist happening on YouTube right now.</alt>
    </video>
</fig> 
```

如果可能的话，我更愿意使用标准 DITA 元素之一来实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T20:44:06.180

你建议的覆盖非常好，Lea。您显示的属性映射适用于它们通过的数据类型。您可以通过专门与当前 YouTube 界面更接近的匹配来过度设计它，但由于它们可能会再次更改，因此这种方法的简单文档是可以的。实际上，您也许可以在 XML Mind 编辑器中使用 CSS before: 伪元素（例如，参见[Insert special character using :before pseudo class in css](https://stackoverflow.com/questions/4146933/insert-special-character-using-before-pseudo-class-in-css?rq=1)）来通知用户将哪些数据放在哪里（这些行为类似于字段标签对于表格，实际上）。您在 Ditac 中覆盖这种用法的示例密切模拟了某人可以适应 DITA OT 转换的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T23:34:53.117

DITA for Publishers 项目 ( [http://dita4publishers.sourceforge.net](http://dita4publishers.sourceforge.net) ) 提供了一个专门化的域，以便它`<video>`在 DITA 专门化的约束下尽可能接近地与 HTML5 元素平行。标记如下所示：

```
<fig
  outputclass="image">
  <d4p_video
    id="E5123_026.mp4"
    width="300"
    height="300">
    <d4p_video_poster
      value="../images/E5123_026_poster.png"/>
    <d4p_video_source
      value="../images/E5123_026.mp4"
      type="video/mp4"/>
  </d4p_video>
</fig> 
```

标记在 d4p_mediaDomain 中定义。DITA for Publishers 项目支持从此标记生成 HTML5 视频标记，用于基于 HTML 的输出（HTML、EPUB 等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T13:32:44.387

以下标记在 DITA-OT 1.5.4 和 1.7.2 中正常工作（可能介于两者之间）：

```
<object width="640" height="360" data="//www.youtube.com/embed/vwh93zo7_oU?rel=0">
    <param name="src" value="//www.youtube.com/embed/vwh93zo7_oU?rel=0"/>
    <param name="movie" value="//www.youtube.com/embed/vwh93zo7_oU?rel=0"/>
    <param name="allowFullScreen" value="true"/>
    <param name="allowscriptaccess" value="always"/>
</object> 
```

显然，在所有三个位置替换您的视频 ID — 我使用了一个视频，它是我们文档的一部分，因此您将有一个工作示例。

*   @width 和 @height 属性定义了显示视频的框的大小。
*   @data 属性和前两个`<param>`元素指定视频的链接。为了跨浏览器的兼容性，包括所有三个。
*   最后两个`<param>`元素指定您希望允许视频的可选行为。你可能不需要它们。

可以创建一个专业化来减少所需的标记，但在我们的例子中，我们没有包含足够的视频来证明这一努力是合理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T17:14:09.127

我不确定这是否是正确的方法，但这似乎确实有效并且很容易使用。进一步阅读后，该元素似乎`<object>`是为嵌入视频、媒体和 ActiveX 控件而设计的。

在初步检查中，嵌入 YouTube 视频的过程似乎相当复杂。一些博客/论坛提到复制（旧式）YouTube 嵌入代码并放弃与 DITA 不兼容的部分。不幸的是，据报道这种技术在某些情况下会导致播放问题。

*   [http://flowwrite.blogspot.co.uk/2008/08/how-to-embed-youtube-video-into-dita.html](http://flowwrite.blogspot.co.uk/2008/08/how-to-embed-youtube-video-into-dita.html)
*   [http://code.google.com/p/jallib/issues/detail?id=109](http://code.google.com/p/jallib/issues/detail?id=109)

因此，我决定尝试使用该`<object>`元素，但使用自定义样式表使整个过程更容易。我不确定这种方法在技术上是否有效，在这一点上将不胜感激。

*   **@type** - 指定值“youtube”以触发自定义 XSL 呈现。
*   **@data** - YouTube 视频 ID 可以从嵌入代码中复制。
*   **@width**（可选）- 浏览器中 YouTube 视频的宽度，默认为 600 像素。
*   **@height**（可选）- 浏览器中 YouTube 视频的高度，默认为 450 像素。

以下是使用此技术嵌入视频的示例：

```
<!-- DITA markup -->
<fig audience="web">
    <title>YouTube 101: How to Find What's Hot on YouTube</title>
    <object type="youtube" data="FEyRza0rJyI">
        <desc>This video explains how to tap into the cultural zeitgeist happening on YouTube right now.</desc>
    </object>
</fig> 
```

为了完成这项工作，有必要改变生成 XHTML 输出的方式。[幸运的是，使用XML Mind的](http://www.xmlmind.com/)[DITA 转换器](http://www.xmlmind.com/ditac/)（又名 Ditac）非常容易。我只是将以下内容添加到我的 XSL 自定义样式表中：

```
<!-- Customize html output (works with DITA Converted by XML Mind) -->
<xsl:template match="*[contains(@class,' topic/object ') and @type='youtube']">
    <iframe src="http://www.youtube-nocookie.com/embed/{@data}?rel=0" frameborder="0" allowfullscreen="allowfullscreen">
        <xsl:attribute name="width" select="if (@width) then @width else '600'"/>
        <xsl:attribute name="height" select="if (@height) then @height else '450'"/>
        <xsl:call-template name="commonAttributes"/>
        <xsl:call-template name="namedAnchor"/>
    </iframe>
</xsl:template> 
```

就我而言，我只对嵌入基于 Web 的内容的视频感兴趣，因此添加该`@audience`属性就足够了。但是很容易为印刷媒体创建一个替代输出，可能带有一个 URL 和描述文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T23:07:25.133

Lea - 只需一个注释，您还可以在 PDF 中嵌入 Flash 内容（例如，用 Flash 编写的带有视频链接的 youtube 视频播放器）。我没有寻找候选人，但我确信他们存在。如果您使用的 PDF 渲染引擎支持在 PDF 中嵌入 RichMedia Annotations，您可以将交互式 Flash 直接放入 PDF。

# ruby - 怎么做`？ :`、`?:` 和 ` : 正则表达式不同？

> ID：14382295
> 
> 赞同：0
> 
> 时间：2013-01-17T15:20:42.843
> 
> 标签：ruby, regex

我正在从文档[Grouping](http://ruby.runpaint.org/regexps#groups)`grouping`中阅读Regex 中的主题。我在那里找到了一个示例并开始使用它来了解 in 的行为/角色。该代码用于undersatnd它如下：`?<option>:``Regex`

```
%w{CASE case CAse caSE cASe casE}­.grep /(?i:­ca)se/
# => ["case", "CAse"] 
%w{CASE case CAse caSE cASe casE}­.grep /(?:c­a)se/
# => ["case"]
%w{CASE case CAse caSE cASe casE}­.grep /(:ca­)se/
# => []
%w{CASE case CAse caSE cASe casE}­.grep /(i:c­a)se/
# => [] 
```

现在我对`(?i:­ca`, `(?:c­a)se`, `(:ca­)`,执行的操作完全感到困惑`(i:c­a)`。根据输出，每种语法都是有效的，否则我可能会从控制台收到错误。

谁能帮我理解上面的代码是如何生成输出的，以及其中的特殊角色是`?<option>:`什么`grouping of Regex`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:43:07.163

```
> %w{CASE case CAse caSE cASe casE}­.grep /(?i:­ca)se/
=> ["case", "CAse"] 
```

非捕获组`(?<option>:pattern)`，带有不区分大小写的标志`i`。模式是`ca`。不区分大小写标志仅在非捕获组内有效，因此`ca`匹配不区分大小写，而`se`匹配区分大小写。这是一个有用的构造，可以仅激活部分正则表达式的某些效果。

非捕获组不会存储组内与模式匹配的文本的位置，而不是捕获`(pattern)`不以`?`after开头的组`(`。

```
> %w{CASE case CAse caSE cASe casE}­.grep /(?:c­a)se/
=> ["case"] 
```

这只是一个普通的非捕获组，没有任何选项，带有`ca`as 模式。如文档所述，`<option>`in`(?<option>:pattern)`可以为空。这里没有什么特别的，只是区分大小写匹配。

```
> %w{CASE case CAse caSE cASe casE}­.grep /(:ca­)se/
=> [] 
```

这是一个捕获组，具有`:ca`as 模式（冒号`:`，`c`然后`a`）。当然，找不到匹配项。

```
> %w{CASE case CAse caSE cASe casE}­.grep /(i:c­a)se/
=> [] 
```

同样，一个捕获组，具有`i:ca`as 模式 ( `i`, 冒号`:`, `c`, then `a`)。也找不到匹配项。

# web - how to convert web project to a web application

> ID：14382296
> 
> 赞同：2
> 
> 时间：2013-01-17T15:20:43.310
> 
> 标签：web, visual-studio-2012, project

In Visual Studio 2010 there used to be an option to where you right-click on a project and convert it to a web application. I want to do that and I cant seem to find that option to convert a web project to a web application with visual studio 2012

# c# - 如何将嵌套泛型转换为从第一个继承的另一个嵌套泛型？

> ID：14382297
> 
> 赞同：1
> 
> 时间：2013-01-17T15:20:48.567
> 
> 标签：c#, generics

这段代码：

```
public interface IInter { }
public class Concrete : IInter { /*... body ...*/ }
var t = (List<IInter>)new List<Concrete>(); 
```

产生此错误：

`Cannot convert type 'System.Collections.Generic.List<Concrete>' to 'System.Collections.Generic.List<IInter>'`

为什么 ？我该如何克服它？我的目标是：

```
var t = new List<List<IInter>>()
{
    new List<ConcreteA>(){/* ... data ... */},
    new List<ConcreteB>(){/* ... data ... */},
    // ...
    new List<ConcreteX>(){/* ... data ... */},
}; 
```

### 编辑：

感谢你的帮助。啊，我有点抽象的东西，使它更容易阅读......但我真正的问题是：

```
public class SingletonFactory<T> where T : IToken
{
    private SingletonFactory() { }
    private static SingletonFactory<T> _instance = new SingletonFactory<T>();
    public static SingletonFactory<T> Instance { get { return _instance; } }

    public T Produce(int position) { return (T)Activator.CreateInstance(typeof(T), position); }
    public T Produce(int position, string token) { return (T)Activator.CreateInstance(typeof(T), position, token); }
} 
```

进而：

```
var keywords = new Dictionary<string, SingletonFactory<IToken>>()
{
    { "abc", SingletonFactory<Abc>.Instance },
    { "xyz", SingletonFactory<Xyz>.Instance },
    { "123", SingletonFactory<Num>.Instance }
}; 
```

所以我想它要复杂得多......

我正在使用 c# 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:22:53.293

```
var res = new List<Concrete>().Cast<IInter>().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:23:19.243

A`List<Concrete>` *不是*`List<IInter>`虽然 `Concrete`implements `IInter`。_

您可以使用：

```
List<IInter> t = ConcreteList.Cast<IInter>().ToList(); 
```

[**协变和逆变常见问题解答**](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:26:02.190

这称为*[协变](https://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)*，C# 支持泛型接口而不是泛型类的协变（和逆变）。这是以下作品，但您的示例没有：

```
IEnumerable<IInter> e = new List<Concrete>();
ICollection<IInter> c = new List<Concrete>(); 
```

数组也支持协方差：

```
IInter[] a = new Concrete[3]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T15:27:57.837

因为您不能将 a 分配`List<ConcreteA>`给 a `List<IInter>`，否则您可以这样做：

```
concreteAList = newList<ConcreteA>();
List<Inter> interList = concreteAList as List<Inter>;  // seems harmless
interList.Add(new ConcreteB());                        // not allowable 
```

你*可以*这样做：

```
var t = new List<List<IInter>>()
{
    new List<IInter>(){/* ... fill with ConcreteAs ... */},
    new List<IInter>(){/* ... fill with ConcreteBs ... */},
    // ...
    new List<IInter>(){/* ... fill with ConcreteXs ... */},
}; 
```

但我不知道这是否能实现你想要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T15:23:29.617

一种方法是：

```
IEnumerable<IInter> t = new List<Concrete>(); 
```

另一个是：

```
List<IInter> t = new List<Concrete>().ConvertAll(x => (IInter) x); 
```

编辑，添加更好的样本以表明它有效（测试通过）：

```
[Test]
public void CovarianceTest()
{
    var concrete = new Concrete();
    IEnumerable<IInter> t = new List<Concrete> { concrete };
    Assert.IsTrue(new[] { concrete }.SequenceEqual(t));

    List<IInter> t2 = new List<Concrete> { concrete }.ConvertAll(x => (IInter)x);
    Assert.IsTrue(new[] { concrete }.SequenceEqual(t2));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T05:06:52.773

为您需要从`SingletonFactory<T>`. 这将确保您的类型 T 是输出类型安全的。

```
public interface IToken { }
public class Abc : IToken { }
public class Xyz : IToken { }
public class Num : IToken { }

public interface ISingletonFactory<out T> where T : IToken
{
    T Produce(int position);
    T Produce(int position, string token);
}

public class SingletonFactory<T> : ISingletonFactory<T> where T : IToken
{
    private SingletonFactory() { }
    private static SingletonFactory<T> _instance = new SingletonFactory<T>();
    public static SingletonFactory<T> Instance { get { return _instance; } }

    public T Produce(int position) { return (T)Activator.CreateInstance(typeof(T), position); }
    public T Produce(int position, string token) { return (T)Activator.CreateInstance(typeof(T), position, token); }
}

var keywords = new Dictionary<string, ISingletonFactory<IToken>>()
{
    { "abc", SingletonFactory<Abc>.Instance },
    { "xyz", SingletonFactory<Xyz>.Instance },
    { "123", SingletonFactory<Num>.Instance }
}; 
```

# java - 在 JFrame 中输出整个循环

> ID：14382304
> 
> 赞同：1
> 
> 时间：2013-01-17T15:20:55.057
> 
> 标签：java, while-loop, jframe, joptionpane

当按下“1-10”按钮时，我想从我的while循环中获取整个输出，而不必单击“确定”按钮来显示每个数字。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Testgui1 extends JFrame implements ActionListener 
{
    int i = 1;
    JLabel myLabel = new JLabel();
    JPanel mypanel = new JPanel();
    JButton mybutton = new JButton("1-10");
    Testgui1()
    {
        super("Meny");
        setSize(200,200);//Storlek på frame
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Container con = this.getContentPane();
        con.add(mypanel); 
        mybutton.addActionListener(this);
       mypanel.add(myLabel); mypanel.add(mybutton);
        setVisible(true);
    }
    public void actionPerformed(ActionEvent event)
    {  
    // Object source = event.getSource();
    //if (source == mybutton)
    {
            while (i < 11){
                        System.out.print(+i);
       {
            JOptionPane.showMessageDialog(null,i,"1-10",
                   JOptionPane.PLAIN_MESSAGE);
                    setVisible(true);
                     ++i;
       }
    }
        }
            }
    public static void main(String[] args) {new Testgui1();}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:28:22.717

我认为你想要做的是在你的 while 循环中建立一个 String （或 StringBuilder 最好），然后在循环完成后输出一次。所以像：

```
StringBuilder s = new StringBuilder();
while(i < 11) {
    s.append(" ").append(i);
    i++;
}
System.out.println(s);
JOptionPane.showMessageDialog(null, s, "1-10", 
             JOptionPane.PLAIN_MESSAGE); 
```

这至少应该让你更接近。

请注意，如果您希望消息对话框是模态的，请将“this”作为第一个参数（而不是 null）传递给 showMessageDialog。

# nsuserdefaults - Is it possible to save to NSUserDefault before first run?

> ID：14382307
> 
> 赞同：0
> 
> 时间：2013-01-17T15:20:58.100
> 
> 标签：nsuserdefaults, nsdata

I want to save a custom object array as NSData to NSUserDefaults that will be available at first run, is it possible? if so, how?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:17:13.000

您应该使用 -registerDefaults: 方法来设置您希望在用户设置任何内容之前可用的任何默认值。

# iframe - localstorage and iframe issue

> ID：14382308
> 
> 赞同：0
> 
> 时间：2013-01-17T15:20:58.143
> 
> 标签：iframe, local-storage

I am creating a preview for users entering html but I am having problems sharing the html across an iframe.

I have the following javascript

```
$(function () {
    var pathname =  "https://" + document.domain + "/newspreview.aspx";
    localStorage.contents = $("#<%=Content.ClientID%>").val();
    $("#preview").attr("src", pathname);
}); 
```

and the html is

```
<iframe id="preview" style="border:2px solid; width:880px;height:600px;" >

  </iframe> 
```

on the newspreview.aspx page I have the javascript below, all I get displayed is undefined. Has anybody got any ideas why this is the case. (BTW both pages are using https)

```
 <script type="text/javascript" language="javascript">
         var result = localStorage.contents;
         document.write(result);
         localStorage.removeItem("contents");
</script> 
```

Regards

Podge

# c# - 问题将 ListBox 行拆分回 3 个值

> ID：14382315
> 
> 赞同：1
> 
> 时间：2013-01-17T15:21:13.753
> 
> 标签：c#, listbox, split

我有三个值（名称、课程和平均值），它们分配给 3 个数组。我不得不将它们组合起来并将它们放在一个列表框中。现在，我需要能够选择同一行并将其分成 3 个变量。

我的列表框输出如下所示：

```
Lastname, firstname     SEC360    93.5 
```

我试图用空格进行拆分，但这打破了我的姓氏和名字，它们需要是一个包含逗号的组合变量（我需要对照放置它的数组检查它）。我也不能做子串，因为我没有设定值。有任何想法吗？

编辑：对不起大家。我是一个没有经验的程序员（至少可以说）并且是这个网站的新手。

这是我加载数组的地方：

```
studentNamesAr[studentCount] = studentNameTxtBox.Text;
courseAr[studentCount] = courseNumTxtBox.Text;
gradesAr[studentCount, 0] = Convert.ToInt32(grade1TxtBox.Text);
gradesAr[studentCount, 1] = Convert.ToInt32(grade2TxtBox.Text);
gradesAr[studentCount, 2] = Convert.ToInt32(grade3TxtBox.Text);
gradesAr[studentCount, 3] = Convert.ToInt32(grade4TxtBox.Text); 
```

这是我将数组加载到列表框的地方：

```
for (int i = 0; i != studentCount; i++)
        {
            studentAvg = ((gradesAr[i, 0] + gradesAr[i, 1] + gradesAr[i, 2] + gradesAr[i, 3]) / 4);
            studentListBox.Items.Add(string.Format("{0, -20} {1, 20} {2, 20:F1}", studentNamesAr[i], courseAr[i], studentAvg));
        } 
```

是的，这是 Windows 窗体。

数组中的数据不会丢失。当程序运行时，我应该有 5 个条目。我需要将它们拆分回来，以便当我从列表框中选择一个（删除它）时，我会在 3 个数组中找到值并删除它们，然后将剩余的数组值向上移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:59:39.720

如果您保留列表框中项目的顺序，则列表框的 SelectedIndex*应*与原始数组中的索引匹配。所以一旦你有了它，你就可以开始移动你的阵列（这很乏味）。

作为记录，有更好的结构可以用来解决这个问题，但我假设使用数组的规定是家庭作业的一部分。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:40:19.097

您可以在 .Tag 属性中保存由其他分隔符分隔的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:40:26.197

我建议您将“，”（注意“，”后面的空格）替换为其他内容（例如“;”），然后使用带有空格作为参数的拆分方法。

```
string s = "Lastname, firstname SEC360 93.5";
string[] result = s.Replace(", ", ";").Split(' '); 
```

那么您可以通过替换“;”来更改结果 [0] 和 ”， ”

# c++ - 从 .docx 中读取 theme1.xml，没有命名空间的属性

> ID：14382319
> 
> 赞同：2
> 
> 时间：2013-01-17T15:21:21.380
> 
> 标签：c++, docx, libopc

我正在制作一个 docx 阅读器（libopc 和 C++），当我想从 theme1.xml 获取次要和主要字体时遇到问题。问题是我不知道如何在没有它的情况下为属性编写名称空间：

```
<a:latin typeface="Calibri"/> 
```

我尝试过：

```
mce_start_attribute(&reader, _X(""), _X("typeface")) {//type
    _majorFont = (char*) xmlTextReaderConstValue(reader.reader);
}mce_end_attribute(&reader); 
```

和：

```
mce_start_attribute(&reader, _X("http://www.3w.org/2000/xmlns"), _X("typeface")) {//type
    _majorFont = (char*) xmlTextReaderConstValue(reader.reader);
}mce_end_attribute(&reader); 
```

我得到了同样的结果：什么都没有。

任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:42:32.467

我自己回答。在 ckeck libopc 源代码之后，解决方案将 mce_start_attribute 宏中的命名空间值设置为 NULL：

```
mce_start_attribute(&reader, NULL, _X("typeface")) {//type
    _majorFont = (char*) xmlTextReaderConstValue(reader.reader);
}mce_end_attribute(&reader); 
```

# iphone - 如何显示自定义 UITableViewCellAccessoryCheckmark

> ID：14382322
> 
> 赞同：2
> 
> 时间：2013-01-17T15:21:23.747
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个需要自定义 UITableViewCellAccessoryCheckmark 的表格视图。复选标记在选择一行时显示，在选择另一行时消失，然后出现在最后一个最常选择的视图上。这很好用。

当我使用这条线时出现问题：

```
 cell.accessoryView = [[ UIImageView alloc ]
                            initWithImage:[UIImage imageNamed:@"icon-tick.png" ]]; 
```

添加自定义 UITableViewCellAccessoryCheckmark。在该代码之后， UITableViewCellAccessoryCheckmark 保留在所有行上，并且在触摸另一行时不会消失。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

int index = indexPath.row; id obj = [listOfItems objectAtIndex:index];

   UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

NSLog(@"%d",indexPath.row);
if (rowNO!=indexPath.row) {
    rowNO=indexPath.row;
    [self.tableView cellForRowAtIndexPath:indexPath].accessoryType=UITableViewCellAccessoryCheckmark;

    cell.accessoryView = [[ UIImageView alloc ]
                            initWithImage:[UIImage imageNamed:@"icon-tick.png" ]];

    [self.tableView cellForRowAtIndexPath:lastIndexPth].accessoryType=UITableViewCellAccessoryNone;
    lastIndexPth=indexPath;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T15:36:09.480

一种更干净、更酷的方法是像这样覆盖 UITableViewCell：

```
- (void)setAccessoryType:(UITableViewCellAccessoryType)accessoryType
{
    // Check for the checkmark
    if (accessoryType == UITableViewCellAccessoryCheckmark)
    {
        // Add the image
        self.accessoryView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"YourImage.png"]] autorelease];
    }
    // We don't have to modify the accessory
    else
    {
        [super setAccessoryType:accessoryType];
    }
} 
```

如果你已经这样做了，你可以继续使用`UITableViewCellAccessoryCheckmark`，因为你的类会自动用图像替换它。

您应该只在您的`cellForRowAtIndexPath`方法中设置样式。像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // [init subclassed cell here, dont forget to use the table view cache...]

    cell.accessoryType = (rowNO != indexPath.row ? nil : UITableViewCellAccessoryCheckmark);

    return cell;
} 
```

`rowNO`然后，您只需`didSelectRowAtIndexPath`更新数据并重新绘制单元格，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (rowNO != indexPath.row)
    {
        rowNO = indexPath.row;
    }

    [self.tableView reloadData]; 

} 
```

`[self.tableView reloadData]`此外，您只能使用 重新加载更改其样式（例如复选标记）的两个单元格，而不是重新加载整个表格`reloadRowsAtIndexPaths`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T13:23:04.173

嗯不知道为什么，但我不能添加评论，所以我写这个作为答案。[Blauesocke](https://stackoverflow.com/users/301277/blauesocke)答案的问题是 AccessoryType 不会设置为 UITableViewCellAccessoryCheckmark，因此您无法检查单元格 AccessoryType。有什么方法可以做到这一点，所以单元格 AccessoryType 将是正确的类型，只是另一个图像。

我正在使用这样的方法：

```
- (void)setAccessoryType:(UITableViewCellAccessoryType)newAccessoryType
{
    [super setAccessoryType:newAccessoryType];
    // Check for the checkmark
    switch(newAccessoryType)
    {
        case UITableViewCellAccessoryCheckmark:
            self.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yorCheckmark.png"]];
            break;
        case UITableViewCellAccessoryNone:
            self.accessoryView = nil;
            break;
        default:
            break;
    }

} 
```

# iphone - Reachability graphic overlay

> ID：14382330
> 
> 赞同：0
> 
> 时间：2013-01-17T15:21:48.113
> 
> 标签：iphone, ios, reachability

The app I'm writing depends on having a network connection (both to the internet in general and to a specific host). The app works completely offline but the user needs to know it's offline.

I am using Reachability to watch for changes to the connection.

I was thinking of using a traffic light type system...

*   Red = no connection to the internet.
*   Yellow = connection to the internet but no connection to the host.
*   Green = connection to host.

At the moment I am changing the tint colour of the UINavigationBar (until I can get something better). I was thinking of putting a coloured circle into the UIStatusBar to show red, yellow, green but I'm not sure if this is possible?

I don't want to hide anything on the status bar, just add my own graphic.

Is that possible? Could anyone explain how to do this? Or is there a better way of doing this that anyone could suggest?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:28:00.893

您不能向状态栏添加任何内容，但是您可能对这个项目感兴趣：[https](https://github.com/myell0w/MTStatusBarOverlay) ://github.com/myell0w/MTStatusBarOverlay和这个问题及其答案：[在 UIStatusBar（或在）上写一些文本](https://stackoverflow.com/questions/4328664/write-some-text-in-or-on-uistatusbar)

# php - 如何在 Symfony2 中的表单中设置值？

> ID：14382332
> 
> 赞同：1
> 
> 时间：2013-01-17T15:21:54.653
> 
> 标签：php, forms, symfony

要使用 Symfony2 以编程方式在表单中设置值，在创建表单后，我发现以下方式有效：

```
$form_data = $form->getData();
$form_data['name'] = 'new value';
$form->setData($form_data); 
```

这很尴尬，没有更简单的方法`$form->set('name', 'new value');`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:37:14.040

```
$form->get('name')->setData('new value'); 
```

# maven - Maven Mercurial based Continuous Release process

> ID：14382334
> 
> 赞同：1
> 
> 时间：2013-01-17T15:22:02.670
> 
> 标签：maven, mercurial, continuous-integration, continuous-deployment

I want some "Maven with Mercurial release" knowledgeable opinion.

I already saw [this thread](https://stackoverflow.com/questions/9107755/maven-mercurial-release-process) and a few others.

We want to be agile and fast. We want to build **once**. Not one build for **testing** and one for **release**.

We have setup a continuous release process where we do the following:

1.  Jenkins checks for SCM changes on "server" repository (every 30 minutes). Also can be triggered manually
2.  Jenkins clones "server" repository
3.  Jenkins increments version in pom (example: 1.0.1 -> 1.0.2). **NO Snapshots**
4.  Start build, package, automatic deployments and tests
5.  If all is good, commit changed pom, tag and push back to "server" repository (merge if needed)
6.  Release good version to a "releases" system, where it's available for QA for further testing
7.  Developers will pull back changes from "server" repository and get new versiond poms

If a hot fix is needed for a good release

*   A developer will clone the relevant tag from "server" repository
*   Do the fix, push back to a "server+fix" repository
*   Jenkins will build as before
*   If good, the fix will also be pushed to the main "server" repository

We found this process to be very quick and clean.

I want your opinion on the flow, with ideas to improve. Remember - **Fast**, **Continuous** and **Build once**.

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:54:47.023

+1 无快照规则。我认为这一切都很好。

> 将好的版本发布到“发布”系统，供 QA 进行进一步测试

什么是“发布”系统。它是一个 Maven 存储库吗？新构建是否会自动部署到 QA 环境？它是如何从存储库中提取的？[您可以使用dependency:get](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html)从 maven repo 中提取一个 jar 。但是，如果想在部署方面使用 Chef 或 Puppet 等基础设施自动化工具，最好将 rpm 发布到 maven 存储库（使用[maven-rpm-plugin发布并使用](http://mojo.codehaus.org/rpm-maven-plugin/)[nexus-yum-plugin](https://github.com/sonatype/nexus-yum-plugin)启用拉取例如）或简单地设置您自己的[yum 存储库](http://www.techrepublic.com/blog/opensource/create-your-own-yum-repository/609)。

# c# - Determine if a user will have access to a given Controller Action based on Role

> ID：14382336
> 
> 赞同：9
> 
> 时间：2013-01-17T15:22:12.203
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-membership

I am trying to build a dynamic menu for my `ASP.NET MVC4 web application`. As I am constructing the menu I want to make sure that menu items for which a user should not have access are not displayed in the menu.

I am using forms authentication and the `[Authorize]` attribute with each page requiring a given a role.

Given two strings `(Controller and Action)`, and a logged in user, how can I determine if a user will have access to that Controller Action?

* * *

All of my menu data is stored in a database. My plan to render the menu is to construct a JSON object of the menu data and embed that into the View. Then client side I will use `Handlebars.js` and plug the menu `JSON object` into a template.

* * *

What I am trying to do is check permissions on a given Controller/Action for a user as I am rendering the menu data. My initial thought was to use reflection and look up the controller action method and check for the existence of an Authorize attribute and check to see if the current logged in user has the necessary role access that page. If not, then the menu item would not be rendered.

I am always reluctant to use `reflection` however, there usually tends to be an easier way of doing things.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T11:18:54.463

```
public static IEnumerable<MethodInfo> GetActions(string controller, string action)
{
    return Assembly.GetExecutingAssembly().GetTypes()
           .Where(t =>(t.Name == controller && typeof(Controller).IsAssignableFrom(t)))
           .SelectMany(
                type =>
                type.GetMethods(BindingFlags.Public | BindingFlags.Instance)
                    .Where(a => a.Name == action && a.ReturnType == typeof(ActionResult))
             );

} 
```

然后

```
var roles = ((AuthorizeAttribute) (GetActions("ControllerName" + "Controller", "ActionName").First().GetCustomAttributes(typeof (AuthorizeAttribute), false)[0])).Roles;
if(roles.Contains("admin or smth"))
{
        doSomsing();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T07:41:47.150

创建名为 Rolevalidation 的类并添加如下代码

```
public class AuthorizeRoles : AuthorizeAttribute
{
    List<string> roles = new List<string>(“your list of roles”);
    bool isAuthenticated = false;
    for (int i = 0; i < roles.Count(); i++)
    {
        if (u.Role.Name == roles[i])
        {
            isAuthenticated = true;
            break;
        }
    }

    if (isAuthenticated)
    {
        SetCachePolicy(filterContext);
    }
    else
    {
        filterContext.Result = new RedirectResult("~/Error");
    }
} 
```

在每个控制器的开头添加此代码* [AuthorizeRoles(Roles = "SuperAdmin")]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T08:12:00.083

我已经实现了一个非常相似的场景。唯一的区别是我的菜单存储在 XML 文件中。

由于您将菜单数据存储在数据库中，我建议您在每个菜单记录中添加一个包含安全信息的 xml 字段；或者，有一个将菜单项映射到用户的新表。该表可能如下所示：

```
MenuItemName (id)             User
---------------------------------------
ViewVacationHistory (12)      firstuser
ViewVacationHistory (12)      seconduser
ApproveVacationRequest (10)   seconduser 
```

现在，当您的控制器接收到将导致显示菜单项的请求时，并且由于您的控制器使用 Authorize 属性进行装饰，它将在 HttpContext 中接收用户。在这里，您只需在数据库中查询匹配的菜单项，然后相应地呈现菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T14:05:16.790

假设您有一个包含所有菜单 html 代码的视图，使用以下方法可能会更好：

```
<ul class="menu">
    <li>
        @Html.ActionLink("Home", "Index", "Home")
    </li>
    @if (System.Web.Security.Roles.IsUserInRole(User.Identity.Name, "Administrator"))
    {
        <li>
            @Html.ActionLink("Statistics", "Index", "Stats")
        </li>
    }
</ul> 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-01T09:21:37.817

使用 ActionFilter 属性根据角色过滤用户 [http://www.asp.net/mvc/tutorials/hands-on-labs/aspnet-mvc-4-custom-action-filters](http://www.asp.net/mvc/tutorials/hands-on-labs/aspnet-mvc-4-custom-action-filters)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-03T10:09:17.447

链接将由来自动作和控制器的 json 对象生成。

json 对象应该有一个链接列表（或实现菜单项所需的内容），该列表应该由存储在数据库中的各种设置生成，告诉每个用户要显示哪些链接。

除此之外，如果用户有 URL 那么在这种情况下你需要使用

[https://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.users(v=vs.118).aspx](https://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.users(v=vs.118).aspx)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-17T15:39:42.660

您可以使用 Authorize 属性来装饰控制器的操作，`[Authorize(AuthorizationContext)]`也可以扩展 authorize 属性以进行自定义授权；

您还可以在字典中定义一些约定，在其中定义控制器的 Create 操作需要创建类型授权 aso

```
Dictionary<string, Right> actionConventions = new Dictionary<string, Right>
    {
        { "Index", Right.View },
        { "List", Right.View },
        { "Open", Right.View },
        { "Create", Right.Create},
        { "Edit", Right.Edit },
        { "Delete", Right.Delete }
} 
```

如果操作遵守字典中定义的约定，则覆盖`OnAuthorization`和`Authorize`方法，或者检查约定，或者检查您为操作或.`AuthorizeAttribute``Authorize(AuthorizationContext)``HandleUnauthorizedRequest(AuthorizationContext)`

处理菜单，您可以创建一个授权服务，在该服务中返回当前用户的权限并添加一个包含用户权限的类，并在渲染模型时检查模型，是否应该渲染菜单项。

[授权属性 MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)

# mysql - Input text onkeyup ajax insert to mysql

> ID：14382342
> 
> 赞同：0
> 
> 时间：2013-01-17T15:22:27.530
> 
> 标签：mysql, ajax, forms

I have a form, and i want to post it to mysql, without submit. I found out to post the values with ajax on every values. If i click on the one text field it inserts a new row to mysql and if i move to the next field it updates the mysql with my values. Is it possible?

My form:

```
 <input type="text" maxlength="50" size="50" value="" name="name">
 <input type="text" maxlength="50" size="50" value="" name="level">
 <input type="text" maxlength="50" size="50" value="" name="pass"> 
 <input type="text" maxlength="50" size="50" value="" name="date"> 
```

etc.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:25:45.990

使用 id 创建一个隐藏的输入并且不给它任何值，然后在每个 keyup 事件上提交，如果 id 字段为空，则运行插入查询并返回 id，并使用值更新 id 字段。如果该值不为空，请使用表单数据运行更新查询。我提供了一个使用 jQuery 的示例，但没有它你也可以做同样的事情。Ajax 使用 jQuery 或任何其他库更容易。

```
<input type='hidden' id='id' name='id' value=''/>

$('input').keyup(function(){
  var data = $('#myform').serialize();
  $.ajax({
    type:'post',
    data:data,
    url:'...',
    dataType:'json',
    success:function(response){
       var id = response.id;
       if(typeof(id) != 'undefined'){
          $('#id').val(id);
       }
    }
  });
}); 
```

# java - Error in Hadoop Example

> ID：14382343
> 
> 赞同：0
> 
> 时间：2013-01-17T15:22:31.973
> 
> 标签：java, hadoop

**I am using hadoop1.1.1, while i am trying to execute wordcount example then i am getting eof exception while file in present on specified location.**

> Exception in thread "main" java.io.IOException: Call to localhost/127.0.0.1:9100 failed on local exception: java.io.EOFException at org.apache.hadoop.ipc.Client.wrapException(Client.java:1144) at org.apache.hadoop.ipc.Client.call(Client.java:1112) at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:229) at $Proxy1.getProtocolVersion(Unknown Source) at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:411) at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:135) at org.apache.hadoop.hdfs.DFSClient.(DFSClient.java:276) at org.apache.hadoop.hdfs.DFSClient.(DFSClient.java:241) at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:100) at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1411) at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66) at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1429) at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254) at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123) at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:238) at org.apache.hadoop.fs.Path.getFileSystem(Path.java:187) at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.setInputPaths(FileInputFormat.java:352) at WordCountDriver.main(WordCountDriver.java:32) Caused by: java.io.EOFException at java.io.DataInputStream.readInt(DataInputStream.java:392) at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:848) at org.apache.hadoop.ipc.Client$Connection.run(Client.java:786)

```
Please help. 
```

# javascript - 强制 Javascript 数字在 MongoDB 文档中翻倍？

> ID：14382346
> 
> 赞同：1
> 
> 时间：2013-01-17T15:22:35.290
> 
> 标签：javascript, node.js, mongodb

我想将任意 Javascript 对象保存到 MongoDB 文档中，但我希望数据库中的所有数字都是 Double 类型。所有不是数组或对象的字段都是字符串或数字。

例如：

```
{ "things": [ 1.0, 1.1, [ { "item": 6 }, 5.5, "test" ] ],
  "other things": { "thing": 2.0, "other thing" : [ 4.4, 5.0 ] },
  "another thing": 6.0 }
} 
```

nodejs-mongodb-native 驱动程序将可以保存的数字（例如 5.0）保存为 Int32。

我可以通过用 Double 对象替换它们来强制数字为双精度：

```
var mongo = require('mongodb');
new mongo.Double(number); 
```

有没有比递归遍历整个 Javascript 对象用 mongo.Double 对象替换每个数字更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:42:09.133

您不必在整个代码中用 mongo.Double 替换变量。当您创建存储在数据库中的文档时，这样做就足够了。使用对象关系映射框架也可以帮助您。

当您想将 Javascript 对象原样存储在数据库中并且没有对象的中间数据库版本时，您可以创建一个包装函数来将对象保存到 MongoDB，从而创建对象的深层副本，但是将源文档中的所有整数存储在目标文档中的 mongo.Double 中。然后将目标文档保存到数据库中。

# acl - G-WAN 4.1.17 可以找到它的 /csp 脚本，但找不到我的旧 /csp 脚本

> ID：14382352
> 
> 赞同：0
> 
> 时间：2013-01-17T15:22:46.760
> 
> 标签：acl, file-permissions, g-wan, selinux

在文件夹中提取gwan（4.1.17）后，我在此文件夹中执行gwan。它工作正常。
当我从这个提取的文件夹中替换我的项目文件夹中的所有旧 gwan 文件和文件夹时，gwan 找不到 c servlet，但仍然可以在 www 文件夹中找到文件。

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:16:50.197

检查权限问题的一种快速方法是以 root 身份启动 gwan，如果尚未这样做的话。如果它以 root 身份运行，但不是以其他方式运行，则可能是权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:00:20.453

我只在我的一个虚拟主机中遇到了这个问题，而其余的都可以正常工作。我已经联系了皮埃尔，他应该很快就能解决这个问题，但目前只有一天，所以他必须提供更详细的答案。

当我使用 vanilla g-wan 4.1.17 安装时，这并没有发生，所有这些脚本都运行良好。我很想知道您是否一直在使用默认侦听器/IP 主机配置或正在使用的虚拟主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T08:05:28.697

> 在文件夹中提取gwan（4.1.17）后，我在此文件夹中执行gwan。它工作正常。

证明这不是 G-WAN 错误：当您*“在其文件夹中执行 gwan”*时一切正常。

> 当我从这个提取的文件夹中替换我的项目文件夹中的所有旧 gwan 文件和文件夹时，gwan 找不到`c servlets`，但仍然可以在文件`www`夹中找到文件。

这个问题很可能与访问权限有关：要么`C servlets`无法读取（由用于运行 gwan 的帐户），要么无法从您的`/tmp`or`$TMPDIR`目录使用已编译的对象，请参阅[http://gwan.ch/faq #错误8246](http://gwan.ch/faq#error8246)。

文件权限是出了[名的棘手问题](http://old.nabble.com/Friendlier-EPERM---Request-for-input-td34878750.html)：

*“在用户空间中获得 EPERM/EACCES 确实有点打击。作为用户，你不知道为什么得到它。它可能是 SELinux，可能是文件上的 rwx 位，可能是缺少的功能，它可能是 ACL，它可能是谁知道的。[...] 将 SELinux、ACL 和功能添加到系统使它们更容易理解，不是吗？（​​我对“安全”的定义包括理解系统是什么正在做。疯了，我知道。）[...] -EPERM 是关于文件权限的。对于 SELinux 和残疾位以及本周他们所谓的 OS/2 扩展属性，你需要 -EBUREAUCRACY。*

# regex - 谁能解释为什么这个正则表达式失败？

> ID：14382361
> 
> 赞同：0
> 
> 时间：2013-01-17T15:23:23.523
> 
> 标签：regex

正则表达式

```
[a-z0-9]{1,10}_([0]?[1-9]|[1][0-2])([0]?[1-9]|[1|2][0-9]|[3][0|1])([2000-2099]{4}).cta$ 
```

此字符串失败

```
abscriprod_01152013.cta 
```

这个字符串有效

```
abscriprod_11152012.cta 
```

似乎任何以 3-8 结尾的年份都失败了，但我不明白为什么。

PS我很讨厌RegEx，所以如果这里有明显的错误，请不要笑:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:38:27.743

您需要阅读一些正则表达式手册，例如[perlretut](http://perldoc.perl.org/perlretut.html)。您使用的正则表达式包含多个缺陷：

1.  一个只包含一个字符的字符类`/[0]/`最好写成`/0/`.
2.  A`/./`将匹配任何字符（换行符除外）。要匹配文字点，您必须对其进行转义：`/\./`.
3.  应该匹配 '1' 或 '2' 的字符类可能不会被写入`/[1|2]/`，而是`/[12]/`中间没有管道。如果将管道放在那里，它将匹配 3 个字符“1”、“2”或“|”之一。
4.  要匹配 2000 到 2099 范围内的数字，您可能不会使用`/[2000-2099]/`这样的字符类将匹配字符“0”、“1”（因为 0-2）、“2”或“9”之一。相反，您可以使用`/20\d\d/`.

h2h

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:33:08.767

由于这一点而失败：

```
[2000-2099]{4} 
```

这真的是在说：

字符 2 或 0 之一`200`

0 到 2 范围内的字符`0-2`

然后是字符 0 或 9 之一`099`

为了匹配我怀疑你想要从 2000 到 2099 的 4 位数年份，请使用：

```
20\d\d 
```

# vb.net - 如何从事件中删除所有处理程序？

> ID：14382368
> 
> 赞同：1
> 
> 时间：2013-01-17T15:23:29.160
> 
> 标签：vb.net, crystal-reports-2010

```
Private Sub SetupToolStrip(ByVal ControlCollection As Control.ControlCollection)
        For Each aControl As Control In ControlCollection
            If TypeOf aControl Is System.Windows.Forms.ToolStrip Then
                Dim ToolBar As System.Windows.Forms.ToolStrip = DirectCast(aControl, System.Windows.Forms.ToolStrip)
                For Each Item As System.Windows.Forms.ToolStripItem In ToolBar.Items
                    If Item.ToolTipText = "Print Report" Then
                           AddHandler Item.Click, AddressOf VerificDacaPrintam
                    End If
                Next
           End If
          If Not aControl.Controls Is Nothing Then SetupToolStrip(aControl.Controls)
       Next
 End Sub 
```

但我想`Item.Click`在我做之前删除所有事件：

```
AddHandler Item.Click, AddressOf VerificDacaPrintam 
```

以下不起作用：

```
Item.Click = Nothing       

Dim del As [Delegate]() = Item.Click.GetInvocationList() 
```

它说“点击是一个事件，不能直接调用。使用'RaiseEvent'语句来引发事件。”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T15:30:05.773

你可以使用这个：

```
RemoveHandler Obj.Ev_Event, AddressOf EventHandler 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/3xz97kac%28v=vs.80%29.aspx)

# javascript - Javascript 验证下拉菜单和文本输入

> ID：14382369
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:23:43.840
> 
> 标签：javascript, validation, textinput

我已经搜索了所有内容，但找不到一个好的解决方案，或者是否可以通过客户端验证。

我的客户要求根据下拉列表中的选择将用户限制为固定长度的数字组合。

**示例：**
*下拉选择*
实用程序 A
实用程序 B
实用程序 C

*文本输入*
如果用户选择实用程序 A，他们必须提供一个 8 位数的帐号。
如果用户选择实用程序 B，他们必须提供 10 位数的帐号。
如果用户选择实用程序 C，他们必须提供 12 位数的帐号。

任何人都知道一个简单的javascript解决方案可以提供答案吗？为此我已经把自己打死了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:37:31.213

干得好！

HTML

```
<select id="Select" onchange="checkText()">
  <option value="8"> A</option>
  <option value="10"> B</option>
  <option value="12"> C</option>
</select>

<input id="Enter" type="text" onchange="checkText()" />

<div id="Message"></div> 
```

JavaScript

```
function checkText(input) {
  if(document.getElementById("Enter").value.length != document.getElementById("Select").selectedOptions[0].value) {
    document.getElementById("Message").innerHTML = "Your ID has to be " + document.getElementById("Select").selectedOptions[0].value + " digits long";
  } else {
    document.getElementById("Message").innerHTML = "";
  }
} 
```

这一点都不精彩。但我不会为你做你的工作。您可以从这里轻松取货。

我还创建了一个[jsFiddle](http://jsfiddle.net/BWY7g/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:43:28.883

`select`您的下拉菜单在哪里，`input`您的输入字符串在哪里，您可以使用：

```
if ( !/^\d+$/.test(input) ||
    input.length != [ 8, 10, 12 ][ select.selectedIndex ] ) {
    // Input invalid
} 
```

除了@Amberland 的反馈：

或者，对于更通用的解决方案，将所需位数存储为每个选项元素的值，例如`<option value=8>Utility A</option>`，并使用：

```
if ( !/^\d+$/.test(input) || input.length != select.value ) {
    // Input invalid
} 
```

# java - 不能在 GWT 中使用 GWTquery

> ID：14382375
> 
> 赞同：1
> 
> 时间：2013-01-17T15:23:56.707
> 
> 标签：java, javascript, eclipse, gwt, gwtquery

我正在尝试在我的 GWT 项目中使用 GWTQuery。为此，我`jar`从官方来源下载了该文件。然后我将它添加到`lib`文件夹中的`WEB-INF`文件夹中，并配置构建路径以包含它。之后，我做了所有必要的导入，没有显示错误，从而证明它们已经成功导入。

但是，在使用类似的简单选择器功能`$("#child").text('foo');`时，我收到一条错误消息**No source code is available for type com.google.gwt.query.client.GQuery; 你忘了继承一个必需的模块吗？**. 谁能告诉我为什么会发生这种情况，我该如何纠正？

这不是 Maven 设置，所以请不要推荐一个！（这是 XML 文件：）

![在此处输入图像描述](../Images/97c64a3b4a04fc2ed6cc3c4cc369a6b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:25:27.187

您忘记了要包含在 .gwt.xml 文件中的继承标签

```
<inherits name='com.google.gwt.query.Query'/> 
```

确保您遵循指南 wiki 中的每个步骤 - [http://code.google.com/p/gwtquery/wiki/GettingStarted#Introduction](http://code.google.com/p/gwtquery/wiki/GettingStarted#Introduction)

**如果您对设计选项卡视图**不满意，您应该使用**源选项卡视图来编辑 XML 文件**

 **![在此处输入图像描述](../Images/11c348888f99fdf28e12ee2794641995.png)**

# php - 在 Web 浏览器中使用 OpenCV 输出

> ID：14382378
> 
> 赞同：1
> 
> 时间：2013-01-17T15:24:02.650
> 
> 标签：php, opencv

感谢您花时间阅读我的帖子。

我编写了一个小应用程序，它使用 OpenCV 进行一些图像跟踪，我对此感到相当满意。这不是开创性的，它只是计算光流。

我的问题是，有没有办法让 opencv 在我的服务器上运行并通过网络浏览器控制它？

我有一个 1&1 linux 托管订阅，在我看来，我想知道是否可以重定向 cvShowImage("Window",img) 命令以将图像显示回窗口。我在想也许上传整个 .exe 并从浏览器执行它 - 但我不知道。

如您所知，我在服务器编程和 Web 开发等方面拥有绝对的 zip 经验。

任何输入将不胜感激和接受。

谢谢，凯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:19:33.153

如果您了解 PHP，则可以做到。您可以在浏览器中看到输出，因为 php 是一种脚本语言。

[OpenCV for PHP](https://github.com/mgdm/OpenCV-for-PHP)是一个 PHP 扩展，包装了用于图像处理的 OpenCV 库。它允许您使用 OpenCV 库来完成图像识别和修改任务。

它需要 PHP 5.3 和 OpenCV 2.0 或更高版本。

# jquery - jquery悬停淡入淡出同时

> ID：14382381
> 
> 赞同：1
> 
> 时间：2013-01-17T15:24:12.013
> 
> 标签：jquery, fadein, effects, fadeout

我有圆形菜单，它必须淡入淡出。工作示例在这里：

```
http://93.103.24.208:8080/sagita/ 
```

（只有“参考”和“故事”）

第一个问题是每个衰落都等到最后一个停止。那么，如果我从“reference”跨越到“storitve”，我该如何做到这一点，两个褪色同时工作？

第二个问题是 Firefox 中非常奇怪的行为 - 它以圆圈运行，或停止或..

这是代码：

```
$(function(){
    $('#areastoritve').hover(
        function(){
            $imgURL = "fileadmin/template/images/index/storitve.png";
                $("#ozadje")
                .fadeOut(0, function() {$("#ozadje").attr('src',$imgURL);})
                .fadeIn({ duration: 800, queue: true })
        },
        function(){
          $imgURL = "fileadmin/template/images/index/ozadjeKrog.png";
                $("#ozadje")
                .fadeOut(800, function() {$("#ozadje").attr('src',$imgURL);})
                .fadeIn({ duration: 0, queue: true })
        }
    ); 

    $('#areareference').hover(
        function(){
            $imgURL = "fileadmin/template/images/index/reference.png";
                $("#ozadje")
                .fadeOut(4, function() {$("#ozadje").attr('src',$imgURL);})
                .fadeIn(800);
        },
        function(){
          $imgURL = "fileadmin/template/images/index/ozadjeKrog.png";
                $("#ozadje")
                .fadeOut(800, function() {$("#ozadje").attr('src',$imgURL);})
                .fadeIn(4);
        }
    );  });

HTML:

<div style="width:602px; position:relative;" class="imageMap">
        <img src="images/index/ozadjeKrog.png" id="ozadje" width="602" height="602"  usemap="#image_map" border="0">

                <map name="image_map" id="image_map">
                    <area id="areastoritve" shape="poly" coords=" 300,302, 299,302, 297,301, 453,38, 491,64, 519,90, 546,123, 569,158, 585,196, 596,231, 601,258, 601,280, 601,301, 302,301" href="http://93.103.24.208:8080/sagita/storitve" alt="Storitve" title="Storitve"/>
                    <area id="areaonas" shape="poly" coords=" 296,300, 150,39, 184,23, 212,14, 237,6, 264,2, 267,0, 331,1, 385,11, 418,22, 451,38, 298,297" href="http://93.103.24.208:8080/sagita/o_nas" alt="O nas" title="O nas"/>
                    <area shape="poly" coords=" 296,303, 0,306, 5,250, 18,196, 40,149, 71,104, 108,70, 136,47, 148,40, 294,302" href="http://93.103.24.208:8080/sagita/posamezniki" alt="Posamezniki" title="Posamezniki"/>
                    <area shape="poly" coords=" 296,307, 0,310, 0,336, 6,365, 14,396, 31,439, 58,484, 89,519, 125,549, 147,568, 292,311" href="http://93.103.24.208:8080/sagita/kontakt" alt="Kontakt" title="Kontakt"/>
                    <area shape="poly" coords=" 300,308, 453,567, 419,583, 369,598, 347,601, 265,601, 208,590, 153,568, 297,310" href="http://93.103.24.208:8080/sagita/galerija" alt="Galerija" title="Galerija"/>
                    <area id="areareference" shape="poly" coords=" 303,307, 458,566, 522,511, 560,462, 589,397, 601,345, 601,305, 302,305" href="http://93.103.24.208:8080/sagita/reference" alt="Reference" title="Reference"/>
                </map>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:09:57.517

更新：根据与您的交谈，请参阅底部以获取更新的解决方案。

* * *

为您工作的代码：http: [//jsfiddle.net/SymN8/](http://jsfiddle.net/SymN8/)

您需要向您的and中添加`stop`方法。在此可用于清除您正在执行操作的元素上的当前动画队列。通过向您添加操作，这将清除队列并仅执行最后一个操作。`fadeIn``fadeOut``jQuery``stop(true,true)`

更多信息在这里：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

这是更新代码。请注意，我添加了一个额外的 DIV 来保存悬停图像。

`Javascript`

```
$(function(){
   $('#areastoritve').hover(
    function(){
        $imgURL = "http://93.103.24.208:8080/sagita/fileadmin/template/images/index/storitve.png";
            $("#ozadje2").stop(true, true)
            .fadeOut(0, function() {$("#ozadje2").attr('src',$imgURL);})
            .fadeIn({ duration: 800})
    },
          function(){
            $imgURL = "http://93.103.24.208:8080/sagita/fileadmin/template/images/index/ozadjeKrog.png";
            $("#ozadje2").stop(true)
            .fadeOut(800, function() {$("#ozadje2").attr('src',$imgURL);})
            .fadeIn({ duration: 0})
    }
); 

$('#areareference').hover(
    function(){
        $imgURL = "http://93.103.24.208:8080/sagita/fileadmin/template/images/index/reference.png";
            $("#ozadje2").stop(true)
            .fadeOut(4, function() {$("#ozadje2").attr('src',$imgURL);})
            .fadeIn(800);
    },
    function(){
      $imgURL = "http://93.103.24.208:8080/sagita/fileadmin/template/images/index/ozadjeKrog.png";
            $("#ozadje2").stop(true)
            .fadeOut(800, function() {$("#ozadje2").attr('src',$imgURL);})
            .fadeIn(4);
    }
);  }); 
```

HTML

```
<div style="width:602px; position:relative;" class="imageMap">
 <img src="http://93.103.24.208:8080/sagita/fileadmin/template/images/index/ozadjeKrog.png" id="ozadje2" width="602" height="602"  usemap="#image_map" border="0" style="position:absolute" usemap="#image_map">
    <img src="http://93.103.24.208:8080/sagita/fileadmin/template/images/index/ozadjeKrog.png" id="ozadje" width="602" height="602"  border="0">
<map name="image_map" id="image_map">
                <area id="areastoritve" shape="poly" coords=" 300,302, 299,302, 297,301, 453,38, 491,64, 519,90, 546,123, 569,158, 585,196, 596,231, 601,258, 601,280, 601,301, 302,301" href="http://93.103.24.208:8080/sagita/storitve" alt="Storitve" title="Storitve"/>
                <area id="areaonas" shape="poly" coords=" 296,300, 150,39, 184,23, 212,14, 237,6, 264,2, 267,0, 331,1, 385,11, 418,22, 451,38, 298,297" href="http://93.103.24.208:8080/sagita/o_nas" alt="O nas" title="O nas"/>
                <area shape="poly" coords=" 296,303, 0,306, 5,250, 18,196, 40,149, 71,104, 108,70, 136,47, 148,40, 294,302" href="http://93.103.24.208:8080/sagita/posamezniki" alt="Posamezniki" title="Posamezniki"/>
                <area shape="poly" coords=" 296,307, 0,310, 0,336, 6,365, 14,396, 31,439, 58,484, 89,519, 125,549, 147,568, 292,311" href="http://93.103.24.208:8080/sagita/kontakt" alt="Kontakt" title="Kontakt"/>
                <area shape="poly" coords=" 300,308, 453,567, 419,583, 369,598, 347,601, 265,601, 208,590, 153,568, 297,310" href="http://93.103.24.208:8080/sagita/galerija" alt="Galerija" title="Galerija"/>
                <area id="areareference" shape="poly" coords=" 303,307, 458,566, 522,511, 560,462, 589,397, 601,345, 601,305, 302,305" href="http://93.103.24.208:8080/sagita/reference" alt="Reference" title="Reference"/>
            </map>
    </div> 
```

* * *

这与我可以带您了解您当前的`DOM`结构一样接近。 [http://jsfiddle.net/SymN8/22/](http://jsfiddle.net/SymN8/22/)

请注意，我已经删除了您的一些方法，最后选择的图像在删除鼠标时保持选中状态（不需要），但也许这对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:32:18.723

对于您的第一个问题，您需要在应用新动画之前停止（true，true）动画，这将停止抖动效果。

# javascript - 多个同步动画，模拟“动画”缓动和一个“步骤”调用 jQuery 集合

> ID：14382387
> 
> 赞同：0
> 
> 时间：2013-01-17T15:24:31.907
> 
> 标签：javascript, jquery

这是问题所在，我有一个 html 块的树结构，全局容器具有固定的宽度（X）和高度（Y）。当我单击一个级别上的一个块时，所有其他块都会缩小到一定大小，而单击的块会放大到剩余空间，并且子级别会显示在它的位置上。

对于所有缩小我使用`animate`具有缓动效果的默认功能，**当缩小 1 级时**，为了避免放大错误，我必须做这样的事情：

```
$tabs.not($obj).animate({height:32<<$obj.getVerUp().length+"px"},{duration:300,
    step:function() {
        $obj.height(function(){
            var sum = 0;
            $tabs.not($obj).each(function(){
                sum += $(this).height();
            });
            return $obj.getCont().height()-sum+"px";
        });
    }
}); 
```

`$tabs`是当前级别的所有选项卡，`$obj`- 是我要放大的一个选项卡

主要**问题**是：当我打开一个更深层次的选项卡时，我必须为更高层次的所有选项卡设置动画以缩小一点，因此`$obj`X 和 Y 会改变，所以当前动画必须使用新值，但是如果我在不同级别调用 3 个不同的动画，我一定会遇到错误，当**更深级别的动画之一提前完成 1 步**时，而上一级的动画会将对象放大 5 -10 更多像素，并且该空间不会被用完。

第二**个问题**是必须有大约 50 个对象同时使用缓动进行动画处理，这有点矫枉过正。

最后**一个问题**是当我`step`如上所示调用动画回调时，我有一种奇怪的感觉，它为集合的每个动画单独调用步骤，**而**`$tabs`我**需要为**列表中的所有选项卡执行 1 个步骤（以避免不必要的脚本)

可能有其他方法可以解决所有这些问题，但我还没有发现所有 jQuery 函数，所以据我所知，唯一的方法是模拟缓动，并在一个动画中完成所有操作。

如果有一种简单的方法，我真的不想使用`setInterval`并确定何时需要清除它并计算每个缓动值。

jQuery 是否有某种空动画缓动，例如

```
$().css("height":starth+"px").animate({height:endh},{duration:300,
    step:function(fn) {

        // all the animation actions here via fn end value
    }
}); 
```

提前致谢。

* * *

我需要的 - 不是一个完全有效的代码解决方案，只是对这些主题的一些启示：

1.  是否有一种合法的方法可以为一组动画元素调用一步函数，或者，当我在集合中`step`使用一个时，它可能会调用一次。`.animate`

2.  如果有人能阐明 jquery 如何处理多个`.animate`，我将不胜感激，它们会被用于一个有效的全局函数`.setInterval`吗？或者他们是否会拥有大量`.setIntervals`相当于 setTimeout 的内容（大多数浏览器无法大量处理）；

3.  有没有办法模拟“动画”缓动，可能是一些函数名称，或者实现这一点的特殊技巧（我唯一看到的是隐藏元素或“窗口”属性可能会改变）

或者一些我应该学习的功能的定向推送，这可以帮助我实现我的目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:36:05.777

我猜我几乎找到了我的问题的答案：http: [//james.padolsey.com/javascript/fun-with-jquerys-animate/](http://james.padolsey.com/javascript/fun-with-jquerys-animate/)

这是上面链接中的空动画，带有 1 个带有所需值的步骤函数，如果一切正常，稍后将发布结果。

```
var from = {property: 0};
var to = {property: 100};

jQuery(from).animate(to, {
    duration: 100,
    step: function() {
        console.log( 'Currently @ ' + this.property );
    }
}); 
```

* * *

是的，这一切都很好，没有不同步，而且速度很好，因为只有 1 个动画，发现为动画制作了一个通用功能 - 浪费资源，所以它非常具体，但仍然是：

```
animate: function($obj) {
    var T = this;
...

    T.arr = new Array();
    // gathering the array
    $obj.each(function(i){
        var size;
        T.arr[i] = {obj:$(this), rest:$(this).getSibl(), cont:$(this).getCont()}
        if($(this).hasClass("vert"))
        {
            size = "height";
            T.arr[i].to = yto;
        }
        else
        {
            size = "width";
            T.arr[i].to = xto;
            T.arr[i].children = $(this).getChld();
        }
        T.arr[i].rest.each(function(){
            $(this).attr("from",$(this)[size]());
        });
    });     

    // animating prop
    jQuery({prop:0}).animate({prop:1}, {
        duration: 300,
        step: function() {
            var i;
            var P = this;
            var newval;
            var sum;
            var size;
            for(i = 0; i < T.arr.length; i++)
            {
                size = T.arr[i].obj.hasClass("vert") ? "height":"width";
                sum = 0;
                T.arr[i].rest.each(function(){
                    // new value of width/height, determined by the animation percentage
                    newval = parseInt($(this).attr("from")) + (T.arr[i].to-$(this).attr("from"))*P.prop;
                    $(this)[size](newval);
                    sum += newval;
                });
                T.arr[i].obj[size](T.arr[i].cont[size]()-sum);
            }
        }
    });
}, 
```

# .net - .NET WebBrowser 控件 - 关闭不受支持的文件格式的表单

> ID：14382388
> 
> 赞同：0
> 
> 时间：2013-01-17T15:24:39.560
> 
> 标签：.net, winforms, browser

我首先要提到的是，我坚持使用现有的`WebBrowser`.NET 控件，因此不能选择使用 Gecko 或任何其他替代方法。

我目前有一个带有嵌入式`WebBrowser`控件的简单表单。在另一个屏幕中，用户选择要打开的文件，此表单会弹出并以`WebBrowser`. 问题是，如果此控件支持文件格式（例如 JPEG 文件），它会正确显示；如果它不受支持（例如 TIFF 文件），我会收到通常的“您要打开还是保存此文件？” 对话框，然后`WebBrowser`显示“导航到网页已取消”页面。我不想要这个。

我想要实现的是，*仅*在第二种情况下，当用户做出选择并且外部程序打开文件时，我的表单只是关闭而不是显示该页面。有没有我可以处理的事件来实现这一目标？有没有可能的解决方法？这甚至可能吗？

非常感谢大家的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:01:31.743

也许你可以抓住 FileDownload-Event 然后关闭它

# c# - 按行排列的网格视图格式

> ID：14382389
> 
> 赞同：0
> 
> 时间：2013-01-17T15:24:41.080
> 
> 标签：c#, asp.net

我想知道是否可以像下面的模式那样格式化网格视图

```
Usual Grid View:

Name     Address     Age     Gender  <---  Fields Name
Example  Example     Example Example <---  Values

What I want to look like

"Fields"      "Values"
Name          Example
Address       Example
Age           Example
Gender        Example 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:29:53.913

你应该考虑使用[中继器](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:32:27.720

我认为这`GridView`根本不应该以这种方式使用。通常，您会在其中显示几个项目，如果这些项目太多，您最终会出现[水平滚动错误](http://www.nngroup.com/articles/top-ten-web-design-mistakes-of-2002/)（还有一些不错的论点[）](https://stackoverflow.com/a/2501930/674700)。

如果您只显示一条记录，则应使用一个[`DetailsView`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.aspx)控件，该控件：

> 在表中显示来自数据源的单个记录的值，其中每个数据行代表记录的一个字段。DetailsView 控件允许您编辑、删除和插入记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:48:18.393

我使用以下代码得到了答案：

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" AutoGenerateColumns="False"  >

<Columns>

<asp:TemplateField HeaderText="">
<ItemTemplate>

Name: <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label><br />

Address: <asp:Label ID="Label2" runat="server" Text='<%# Eval("Address") %>'></asp:Label><br />

Postcode: <asp:Label ID="Label3" runat="server" Text='<%# Eval("Postcode") %>'></asp:Label><br />

</ItemTemplate>

</asp:TemplateField>
</Columns>

</asp:GridView> 
```

# php - php iis 7.5 500 错误

> ID：14382390
> 
> 赞同：0
> 
> 时间：2013-01-17T15:24:45.280
> 
> 标签：php, iis-7

[我按照指南http://www.peterguy.com/php/install_IIS6.html#phpConfigure](http://www.peterguy.com/php/install_IIS6.html#phpConfigure)手动安装了 PHP 。我正在尝试在 IIS 7.5 上运行

我收到此错误：

```
Module: IsapiModule

Notification:   ExecuteRequestHandler

Handler:    PHP

Error Code: 0x8007007f 
```

而且我不能对它做出正面或反面。我制作了一个名为 test.php 的空白文件，它给出了错误，一个名为 test.html 的类似文件，也是空白的，没有给出错误。

我做了一个应用程序池，允许 php5isapi.dll 等。

注意：虽然我将 php.ini 配置为在特定文件夹中创建日志，但不会创建错误日志。

# html - 允许用户输入 HTML 实体是否危险？

> ID：14382395
> 
> 赞同：1
> 
> 时间：2013-01-17T15:24:59.440
> 
> 标签：html, security, xss

我试图弄清楚保护网站免受 XSS 攻击的*最小*编码量是多少。

我确定我需要在标签内编码 < (<) 和 > (>)，在属性内编码 " (") 和 ' (')。

我还需要编码 & (&) 吗？当用户保存数据时，我遇到了双重编码问题（因为 & 会变成 &amp;）。如果我没有对 & 符号进行编码，是否有任何安全漏洞或缺点会让人高兴？这意味着他们将能够输入他们想要的任何 HTML 实体。

通过 HTML 实体，我特别指的是与实体相对应的带有 & 前缀的序列（如 © ™）。

这个问题与语言无关（当然，HTML 部分除外）。

编辑：呵呵，stack-overflow 让我可以保留我的 html 编码实体 :) 这可能会说明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:29:13.670

如果您在页面上显示这些实体，您只需要对它们进行编码（并且 & 需要像 > 和 < 一样被转义，因为它是转义序列标识符）。

如果您在使用 & 符号的双重编码时遇到问题，听起来您在将数据插入存储机制（数据库？）之前就已经这样做了。停止。您应该只在页面上显示时转义页面的数据。

# android - 将xml文件从站点下载到android，编码错误

> ID：14382396
> 
> 赞同：0
> 
> 时间：2013-01-17T15:25:05.040
> 
> 标签：android, encoding

在远程 http 服务器上，我在 Sublime text2 中创建 test.xml 文件，并使用编码 utf-8 保存它。

```
<?xml version='1.0' encoding='Utf-8' ?>
<Shops>
 <Shop name="one"></Shop>
 <Shop name="two" ></Shop>
 <Shop name="three"></Shop>
</Shops> 
```

然后我将它下载到我的设备上：

```
String str="";
            URL url = new URL(Server+urls);
            URLConnection ucon = url.openConnection();
            InputStream is = ucon.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            ByteArrayBuffer baf = new ByteArrayBuffer(50);
            int current = 0;
            while ((current = bis.read()) != -1) 
            {
                baf.append((byte) current);
            }
            str = new String(baf.toByteArray(),"Utf-8");
            DataOutputStream out = null;
            out = new DataOutputStream(openFileOutput(filename, Context.MODE_PRIVATE));
            out.writeUTF(str);
            out.close(); 
```

之后，我通过 DDMS 文件资源管理器将其下载到我的 macbook 上，在 Sublime text2 中打开，然后看到：

```
008e 3c3f 786d 6c20 7665 7273 696f 6e3d
2731 2e30 2720 656e 636f 6469 6e67 3d27
5574 662d 3827 203f 3e0d 0a3c 5368 6f70
733e 0d0a 203c 5368 6f70 206e 616d 653d
226f 6e65 223e 3c2f 5368 6f70 3e0d 0a20
3c53 686f 7020 6e61 6d65 3d22 7477 6f22
203e 3c2f 5368 6f70 3e0d 0a20 3c53 686f
7020 6e61 6d65 3d22 7468 7265 6522 3e3c
2f53 686f 703e 0d0a 3c2f 5368 6f70 733e 
```

然后我选择使用编码 utf-8 重新打开，并看到（顺便说一句，我无法复制/过去我看到的内容）：

![在此处输入图像描述](../Images/61544ebfbc24a4a138c899b46ab292b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:37:08.340

我不太确定您为什么要从/转换为字节，但这个问题可能是[StAX](http://today.java.net/pub/a/today/2006/07/20/introduction-to-stax.html#reading-xml)的一个很好的候选者。

查看阅读和写作部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:48:12.563

`.writeUTF`使用[修改后的 UTF-8](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeUTF%28java.lang.String%29)，而不是 UTF-8。

XML的`0x00 0x8e`长度是 142 的大端无符号短，并且与 142 的实际长度相匹配。

用这个：

```
str = new String(baf.toByteArray(),"UTF-8");
OutputStreamWriter osw = new OutputStreamWriter(
    openFileOutput(filename, Context.MODE_PRIVATE),
    Charset.forName("UTF-8").newEncoder()
);
osw.write(str); 
```

# sql - 使用户能够查询数据库而无需更改数据的工具

> ID：14382397
> 
> 赞同：1
> 
> 时间：2013-01-17T15:25:15.377
> 
> 标签：sql, sql-server, sql-server-2008

我们有一位非常了解数据库的高级用户，自从我们授予他使用 SQL Server Management Studio 的访问权限以来，他已成为一项重要资产。不幸的是，我们还给了他一个所有开发人员都使用的用户/密码，它具有更改数据的能力。

如果不考虑拥有这样一个特权 db-user 并给予最终用户这样的访问权限背后的所有错误，是否有一种工具可以让用户在没有任何更新/插入/删除/或其他任何能力的情况下进行查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:42:05.967

我的猜测是用户可能不想更改数据库——为了保护他/她以及您的。

只需使用 Window 启用此用户的登录权限即可获得只读访问权限。或者，设置另一个只读用户并将其提供给超级用户。在极端情况下，您可能需要更改您的超级用户帐户的密码。

同时，我建议您建立一个开发组，授予该组权限，并将开发人员分配给该组。然后，他们可以通过该 ID 登录。也许有一天，您将能够禁用您的超级用户帐户。现在，您应该考虑解决它的方法。

# arrays - 从数组中删除具有子字符串的元素，该子字符串本身就是数组的元素

> ID：14382399
> 
> 赞同：2
> 
> 时间：2013-01-17T15:25:20.203
> 
> 标签：arrays, perl

在 Perl 中，我想从数组中删除所有元素，其中同一数组的另一个元素是所述元素的非空子字符串。

说我有数组

```
@itemlist = ("abcde", "ab", "khi", "jklm"); 
```

在这种情况下，我希望`"abcde"`删除该元素，因为`"ab"`它是`"abcde"`.

我可以制作数组的副本（也许作为哈希？），对其进行迭代，尝试使用原始数组的每个元素进行索引并将其删除，但必须有一种更优雅的方式，不是吗？

谢谢你的帮助！

*为清楚起见进行了一些编辑。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:53:29.237

您可以从所有项目构建一个正则表达式并丢弃任何匹配的内容：

```
$alternation = join('|', map(quotemeta, @itemlist));
@itemlist = grep !/($alternation).|.($alternation)/, @itemlist; 
```

事情只是确保一个项目与`().|.()`自己不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:47:37.763

好吧，我不会称之为优雅，但这里有：

```
#!usr/bin/perl
use strict;
use warnings;

my @itemlist = ("abcde", "ab", "khi", "jklm");

@itemlist = grep { 
    @itemlist ~~ sub {$_ !~ /(?:.\Q$_[0]\E|\Q$_[0]\E.)/} 
} @itemlist;

print "@itemlist"; 
```

它依赖于[智能匹配](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)的一个相当模糊的行为：如果左参数是一个数组，而右参数是一个 sub，它会为每个元素调用 sub，并且只有当 sub 为每个元素返回 true 时，最终结果才为 true。

解释：对于数组的每个元素，它检查没有其他元素是该元素的子字符串（需要至少一个额外的字符，以便元素不会匹配自己）。

**注意：** wdebeaum 的答案可能是我在现实世界中更喜欢的答案。尽管如此，使用智能匹配可以做一些奇怪的事情还是很有趣的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:15:23.727

wdebeaum 的答案是使用的解决方案，而不是下面的解决方案，但我通过这样做学到了一些东西，也许其他人也会这样做。在我写完我的之后，我决定在几千个元素的列表上测试它。

b.pl：

```
#!/usr/bin/perl

use strict;
use warnings;

my @itemlist = <>;
for(@itemlist) { chomp; }
my $regex;

if(defined $ENV{wdebeaum}) {
    # wdebeaum's solution
    my $alternation = join('|', map(quotemeta, @itemlist));
    $regex = qr/(?:$alternation).|.(?:$alternation)/;
} else {
    # my solution
    $regex = join "|", map {qq{(?:\Q$_\E.)|(?:.\Q$_\E)}} @itemlist;
}

my @result = grep !/$regex/, @itemlist;
print scalar @itemlist, "\t", scalar @result, "\n"; 
```

我生成了一个包含 5000 个随机单词的列表。

```
sort -R /usr/share/dict/american-english|head -5000 > some-words 
```

对于小型列表，两种解决方案似乎都很好。

```
$ time head -200 some-words | wdebeaum=1 ./b.pl
200 198

real    0m0.012s
user    0m0.004s
sys     0m0.004s

$ time head -200 some-words | ./b.pl
200 198

real    0m0.068s
user    0m0.060s
sys     0m0.004s 
```

但对于较大的列表，wdebeaum 显然更好。

```
$ time cat some-words | wdebeaum=1 ./b.pl 
5000    1947

real    0m0.068s
user    0m0.064s
sys     0m0.000s

$ time cat some-words | ./b.pl 
5000    1947

real    0m8.305s
user    0m8.277s
sys     0m0.012s 
```

我认为差异的原因是，即使两个正则表达式具有相同数量的可能路径，我的正则表达式也有更多路径需要尝试，因为它与`.`路径具有相同数量的 s，而 wdebebaum 只有两个.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:19:03.047

您可以使用哈希来计算所有单词的子字符串。列表中计数高于一个的任何单词都是另一个单词的子字符串。在此示例中，子字符串的最小长度为 2：

```
use strict;
use warnings;
use feature 'say';

my @list = qw(abcde ab foo foobar de oba cd xs);

my %count;

for my $word (@list) {
    my $len = length $word;
    $count{$word}++;
    for my $start (0 .. $len - 2) {
        for my $long (2 .. $len - 2) {
            my $sub = substr($word, $start, $long);
            $count{$sub}++;
        }
    }
}
say for grep $count{$_} == 1, @list; 
```

**输出：**

```
abcde
foobar
xs 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T12:19:59.387

以下将从数组中删除子字符串。

```
#!/usr/bin/perl
use strict;
use warnings;

my @ar=("asl","pwe","jsl","nxu","sl","baks","ak");
foreach my $i (@ar){
  my $p = grep /$i/, @ar;
  if ( $p == 1 ){
    print "$i" , "\n";
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-25T18:03:08.467

我遇到了相反的问题：从列表中删除其他字符串的子字符串。这是我不太优雅的解决方案。

```
sub remove_substrings_from_list {
    my @list = @_;
    my @vals_without_superstrings;

    my %hash_of_others;
    for ( 0 .. $#list ) {
        my $a = shift @list;
        $hash_of_others{$a} = [ @list ];
        push @list, $a;
    }
    foreach my $k ( keys %hash_of_others ) {
        push @vals_without_superstrings, $k unless grep { index( $_, $k ) != -1 } @{ $hash_of_others{$k} };
    }
    return @vals_without_superstrings;
} 
```

# iphone - 如何列出所有调用的方法？

> ID：14382404
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:25:30.073
> 
> 标签：iphone, ios

有什么方法可以列出所有调用的方法，就像一个接一个地调用一样？例如，现在我正在做同样的事情，我把 NSLog(@"MethodName"); 我每一个方法。我想通过 NSLog 中的自动方式来做到这一点。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:42:49.157

如果你没有太多的方法，你可以使用

```
NSLog(@"%@" , NSStringFromSelector(_cmd)); 
```

记录他们的名字。这样您就不必每次都手动复制签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:07:11.610

我想你想要：

```
printf("%s\n", __PRETTY_FUNCTION__ ) ; 
```

哪个产生（例如）

> -[AppDelegate 应用程序：didFinishLaunchingWithOptions：]

或者，您可以使用 dtrace。这个答案应该会有所帮助：[https](https://stackoverflow.com/a/3874726/210171) ://stackoverflow.com/a/3874726/210171 。

还要检查[https://stackoverflow.com/a/4604249/210171](https://stackoverflow.com/a/4604249/210171)（相同的链接问题）。似乎有一个环境变量`NSObjCMessageLoggingEnabled`可以设置...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:45:24.097

创建一个属性'NSMutableArray * calledMethods;`

并在您的每种方法中使用

`[self.calledMethods addObject:NSStringFromSelector(_cmd)]`;

并且每当你想打印它时 NSLog 它。

# java - Akka 如何处理消息版本？

> ID：14382406
> 
> 赞同：5
> 
> 时间：2013-01-17T15:25:33.103
> 
> 标签：java, serialization, ipc, akka, actor

[Akka](http://akka.io/)是如何处理同类型消息的不同版本的序列化，但版本不同的呢？例如，期望消息 A 的版本 1 的 Actor X 是否可以从具有额外字段的 Actor Y 接收和处理消息 A 的版本 2？它如何处理消息 A 的版本 3 可能已删除或重命名字段的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:40:13.577

这取决于使用的序列化程序。Akka 具有可配置的序列化，因此您有很多选择（请参阅文档：[http](http://doc.akka.io/docs/akka/2.1.0/scala/serialization.html) ://doc.akka.io/docs/akka/2.1.0/scala/serialization.html ）。

通常，建议使用使您能够设计向后和向前兼容性的序列化程序，例如 Protobuf。

# python - Python：使用 yelps MRJOB 增加 EMR 中的超时值

> ID：14382410
> 
> 赞同：1
> 
> 时间：2013-01-17T15:25:49.647
> 
> 标签：python, hadoop, mapreduce, elastic-map-reduce, mrjob

我正在使用 yelp MRjob 来编写一些 mapreduce 程序。我在 EMR 上运行它。我的程序有减速器代码，需要很长时间才能执行。我注意到由于 EMR 中的默认超时期限，我收到此错误

```
Task attempt_201301171501_0001_r_000000_0 failed to report status for 600 seconds.Killing! 
```

我想要一种增加 EMR 超时的方法。我阅读了同样的 mrjobs 官方文档，但我无法理解该过程。有人可以提出解决此问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:18:14.283

我过去处理过与 EMR 类似的问题，**如果任务既不读取输入、不写入输出也不更新其状态字符串，**`mapred.task.timeout`您正在寻找的属性对应于任务终止前的毫秒数。

 **使用 MRJob，您可以添加以下选项：

```
--jobconf mapred.task.timeout=1800000 
```

**编辑**：似乎某些 EMR AMI 似乎不支持在运行时使用 jobconf 设置超时等参数。相反，您必须像这样使用引导时配置：

```
--bootstrap-action="s3://elasticmapreduce/bootstrap-actions/configure-hadoop -m mapred.task.timeout=1800000" 
```

我仍然会尝试第一个开始，看看你是否可以让它工作，否则尝试引导操作。

要运行这些参数中的任何一个，只需创建从 扩展的作业`MRJob`，此类有一个`jobconf`方法可以读取您的`--jobconf`参数，因此您应该在命令行上将这些指定为常规选项：

```
python job.py --num-ec2-instances 42 --python-archive t.tar.gz -r emr --jobconf mapred.task.timeout=1800000 /path/to/input.txt 
```**

# unit-testing - Dll、消息框和单元测试

> ID：14382411
> 
> 赞同：1
> 
> 时间：2013-01-17T15:25:49.240
> 
> 标签：unit-testing, dll, messagebox

好的......我正在开发一个管理一些配置设置的dll（我不会在这里为您提供详细信息和推理，因为这不适用）。我有一个用于引用程序集的类，用于与该系统交互。这个类有一个 Load() 方法。当出现读取或验证错误时，我目前让它显示一个消息框。我不认为引用程序集应该负责管理这个？还是我错了？目前这对创建单元测试造成了严重破坏，所以我正在考虑添加一个属性来抑制消息，但仍然允许抛出异常。我阅读了另一篇 SO 帖子，建议有人使用 IoC 和对话结果助手类。插图是使用构造函数注入... 但这将再次将该责任交到参考大会手中。在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:29:28.883

就个人而言，我认为你错了 - 对不起。DLL 的职责是通知错误，调用代码的职责是确定如何处理该通知。如果是图形用户界面，那么它可以显示一个对话框。如果是单元测试，它可以适当地测试。如果它是一个网站，它可以将通知以 HTML 格式写给用户。如果它是某种服务，它可以记录它。等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:41:12.763

您可以使用委托发送要在其他地方处理的消息。我在下面使用单元测试做了一个例子：

```
 public delegate void ErrorHandlingDelegate(Exception exception);  //The delegate 

    public class AsseblymRefClass //Your class doing the business logic 
    {
        public void DoStuff(ErrorHandlingDelegate errorHandling) //Passing the delegate as argument
        {
            try
            {
                //Do your stuff
                throw new Exception();
            }
            catch (Exception ex)
            {
                errorHandling(ex); //Calling the delegate
            }
        }
    }

    //Another class that can handle the error through its method 'HandleErrorsFromOtherClass()'
    public class ErrorHandlingClass
    {
        public void HandleErrorsFromOtherClass(Exception exception)
        {
            MessageBox.Show(exception.Message);
        }

    }

    [Test]
    public void testmethod() //The test that creates your class, and a class for the errorhandling, and connects the two
    {
        ErrorHandlingClass errorHandling = new ErrorHandlingClass();

        AsseblymRefClass assemblyRef = new AsseblymRefClass();

        assemblyRef.DoStuff(errorHandling.HandleErrorsFromOtherClass);
    } 
```

可以使用任何适合委托的方法。因此，您可以用单元测试时不显示消息框的内容替换您的生产代码。

# asp.net-mvc-3 - knockout.validationvalidatedObservable 总是返回 false

> ID：14382416
> 
> 赞同：1
> 
> 时间：2013-01-17T15:26:05.627
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-validation

所以我正在尝试为我的部分视图设置 ko 验证。我几乎实现了与另一个具有 ko 验证的局部视图相同的设计。它在那里完美地工作，但在这个局部视图中它不起作用。

这就是我在 javascript 中所拥有的：

```
ko.validation.configure({
  insertMessages: false,
  decorateElement: true,
  errorElementClass: 'error'
});

function Reference(referenceId, id, firstName, lastName, title, email, company, phone) {
    this.ReferenceId = ko.observable(referenceId);
    this.Id = id;
    this.FirstName = firstName;
    this.LastName = lastName;
    this.Title = title;
    this.Company = company;
    this.Email = email;
    this.Phone = phone;
}

var viewModel = function () {
        var self = this;

        self.FirstName = ko.observable().extend({ required: true });
        self.LastName = ko.observable().extend({ required: true });
        self.Title = ko.observable();
        self.Email = ko.observable().extend({ required: true, email: true });
        self.Phone = ko.observable().extend({ required: true });
        self.Company = ko.observable().extend({ required: true });

        addReferenceValidationGroup = ko.validatedObservable({
            FirstName: self.FirstName,
            LastName: self.LastName,
            Phone: self.Phone,
            Email: self.Email,
            Company: self.Company
        });

        self.addReference = function () {

            if (!addReferenceValidationGroup.isValid()) {
                console.log(addReferenceValidationGroup.errors());
                addReferenceValidationGroup.errors.showAllMessages();
                return false;
            } else {
                var newReference = new Reference(0, this.CandidateId(), self.FirstName(), self.LastName(), self.Title(), self.Email(), self.Company(), self.Phone());
                console.log(newReference);
                $.ajax({
                    url: '@Url.Action("AddReference")',
                    type: "POST",
                    data: ko.toJSON(newReference),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        newReference.ReferenceId(result.message); //Sets the InterviewId to the new one
                    },
                    error: function (result) {

                    }
                });
                this.References.push(newReference);

                self.FirstName('');
                self.LastName('');
                self.Title('');
                self.Email('');
                self.Phone('');
                self.Company('');

                self.FirstName.isModified(false);
                self.LastName.isModified(false);
                self.Email.isModified(false);
                self.Phone.isModified(false);
                self.Company.isModified(false);
            }
        };

        self.goNext = function () {
            $.ajax({
                url: '@Url.Action("JobDepartures")',
                type: "POST",
                data: ko.toJSON(this),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (result) {
                    ko.removeNode(document.getElementById("referencesDiv"));
                    $("#dynamicData").html(result.message);
                }
            });
        };
    };
var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
var mvcModel = ko.mapping.fromJSON(jsonModel);

var myViewModel = new viewModel();
var g = ko.mapping.fromJS(myViewModel, mvcModel);

ko.applyBindings(g, document.getElementById("referencesDiv")); 
```

这就是我在 HTML 中的内容：

```
<input data-bind="value: FirstName, validationElement: FirstName" class="input" type="text" />
<input data-bind="value: LastName, validationElement: LastName" class="input" type="text" /> 
```

等等。

注意：这是始终返回 FALSE 的代码行。

```
addReferenceValidationGroup.isValid() 
```

此行也不向任何控件添加“错误”类。所以它也不会变成红色：

```
addReferenceValidationGroup.errors.showAllMessages(); 
```

请帮忙！

编辑：这是模型属性：

```
public int CandidateId { get; set; }    
public string FirstName { get; set; }    
public string LastName { get; set; }    
public string Title { get; set; }    
public string Email { get; set; }   
public string Phone { get; set; }   
public string Company { get; set; }    
public List<ReferenceViewModel> References
{
   get;
   set;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:04:40.297

我认为问题在于以下陈述：

```
var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
var mvcModel = ko.mapping.fromJSON(jsonModel);

var myViewModel = new viewModel();
var g = ko.mapping.fromJS(myViewModel, mvcModel);

ko.applyBindings(g, document.getElementById("referencesDiv")); 
```

## VS。

```
var viewModel = @Html.Raw(Json.Encode(Model));
ko.applyBindings(viewModel, document.getElementById("referencesDiv")); 
```

在某个地方与 JsonConvert.SerializeObject 一起尝试将两个视图模型映射在一起。

# git - 不知道如何将提交合并到 origin/master

> ID：14382417
> 
> 赞同：1
> 
> 时间：2013-01-17T15:26:08.090
> 
> 标签：git

我创建了 3 个提交。之后我尝试将我的更改推送到 origin/master 但后来我检测到我目前不在任何分支中。之后，我尝试将新提交合并到 origin/master，但失败了。这是当前的 git reflog：

```
e664a6d HEAD@{0}: checkout: moving from e664a6d3a47e7036f61d47e69f91bd20235d59b0 to master
e664a6d HEAD@{1}: merge master: Fast-forward
9f5948d HEAD@{2}: checkout: moving from master to origin/master
e664a6d HEAD@{3}: merge HEAD@{3}: Fast-forward
9f5948d HEAD@{4}: checkout: moving from dc325aeb1866e54d068c103cbc75910d4c464d59 to master
dc325ae HEAD@{5}: commit: remove debug from app.php
f5f2d7b HEAD@{6}: commit: add new results to listing 
```

任何人都可以告诉我我必须做什么将 HEAD@{4}-HEAD@{6} 合并到我的 origin/master 并返回分支使用它。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:35:49.730

您可以尝试重置`master`：`HEAD@{4}`

```
git checkout -B master dc325aeb186 
```

然后尝试推动。

注意：在所有测试中，不要忘记保存（或至少`git stash`）任何未跟踪的文件。

# regex - 如何在 Sublime Text 中选择（或简单地删除）每隔一行？

> ID：14382421
> 
> 赞同：4
> 
> 时间：2013-01-17T15:26:38.090
> 
> 标签：regex, sublimetext2

如果我在 WordPress 编辑器中编辑后在 Sublime Text 2 中编辑 WordPress 模板，则每隔一行都是空白的。我想删除那些...`↓</kbd> `del` `↓</kbd> `del` `↓</kbd> `del` `↓</kbd> `del` is getting really annoying.````

*请注意，这与删除所有空行不同（即[Sublime Text 2: How to delete blank/empty lines](https://stackoverflow.com/questions/12008986/sublime-text-2-how-to-delete-blank-empty-lines)）。有些行是故意空白的。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T15:52:01.750

找什么：`\n\n`

用。。。来代替：`\n`

如果空行是奇数，则将光标放在第 2 行。否则，将光标放在第 1 行。

点击`Replace All`

# c# - 在 Visual Studio 2012 中显示未构建的更改

> ID：14382423
> 
> 赞同：4
> 
> 时间：2013-01-17T15:26:38.260
> 
> 标签：c#, visual-studio-2012

我正在寻找一个用于 VS 2012 的插件，它可以显示自上次构建以来哪些代码行已被修改或创建。有人知道这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:11:42.023

您可以使用[Visual Studio SVN](http://visualstudiogallery.msdn.microsoft.com/DBD60715-FE57-44B5-ABEA-F18618068C1E)插件在 Visual Studio 中直观地查看更改。

编辑：正如我在下面的评论中提到的，下一个最接近您所寻求的东西是[更改跟踪](http://www.drdobbs.com/windows/enhanced-track-change-features-in-visual/229300243)。当您在评论中提出时，如果您唯一保存的时间是构建时，它只会用于您的目的。不过，我倾向于尽可能多地保存。

是的，VS 的默认行为是在构建时自动保存。

# sqlite - 如何检查 SQLite 中的总和特定表？

> ID：14382428
> 
> 赞同：0
> 
> 时间：2013-01-17T15:26:46.637
> 
> 标签：sqlite, checksum

在 MySQL 中，我可以获得表的校验和，例如：

```
CHECKSUM TABLE 'TableName' 
```

如何计算 SQLite 中表的校验和？有没有其他选择？

编辑：SQLite 校验和（手动计算）是否等于 MySQL 校验和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:41:23.633

SQLite 没有内置的校验和功能。

您可以从表中读取所有数据并自己计算数据的哈希值，或者在每个表上安装触发器以更新表校验和。

# python - Python - 黑杰克计划

> ID：14382436
> 
> 赞同：-3
> 
> 时间：2013-01-17T15:27:39.847
> 
> 标签：python

我正在用 python 创建一个黑杰克游戏。当函数循环时，如何将结束货币变量移动到函数的顶部？

```
print "Welcome to BlackJack"

def run():

    import random
    from random import choice
    import sys
    money = 500 
```

变量“金钱”根据游戏的输赢而变化。当播放再次选择播放时，我希望结束变量成为开始变量。

```
 raw_input("Press <ENTER> To Begin")
    print "You have $",money,"in your bank."
    bet = raw_input("How much would you like to bet?")

    b = int(bet)

    cards = [1,2,3,4,5,6,7,8,9,10,10,10,10]*4

    c1 = choice(cards)
    cards.remove(c1) 

    c2 = choice(cards)
    cards.remove(c2)

    psum = c1 + c2

    print "You were dealt a",c1,"and a",c2,"for a sum of",psum,
    print "\n"
    hs = " "

    while psum < 21 and "s" not in hs:
        hs = raw_input("Hit or Stand (h or s): ").lower()
        if "h" in hs:
            c3 = choice(cards)
            cards.remove(c3)
            psum = psum + c3
            print "You were dealt a",c3,"for a sum of",psum,
            print "\n"
        elif "s" in hs:
            print "Your final sum is",psum,

    print "\n"

    if psum > 21:
        print "Bust!" "\n" "You lose." "\n"
        money = money - b
        print "You now have $",money,"in your bank."
    elif psum == 21:
        print "You got a BlackJack!" "\n" "You win!" "\n"
        money = money + b
        print "You now have $",money,"in your bank."   
    else:
        print "Dealer's turn"

    if psum < 21:   
        c4 = choice(cards)
        cards.remove(c4) 

        c5 = choice(cards)
        cards.remove(c5)

        dsum = c4 + c5

        while dsum < 17:
            c6 = choice(cards)
            cards.remove(c6)
            dsum = dsum + c6

        if dsum > 21:
            print "Dealer's final sum is",dsum,"\n"
            print "Dealer bust! You win!" "\n"
            money = money + b
            print "You now have $",money,"in your bank."
        elif dsum < psum:
            print "Dealer's final sum is",dsum,"\n"
            print "You win!" "\n"
            money = money + b
            print "You now have $",money,"in your bank."
        elif dsum == psum:
            print "Dealer's final sum is",dsum,"\n" 
            print "Draw." "\n"
            print "You have $",money,"in your bank."
        else:
            print "Dealer's sum is",dsum,"\n"
            print "You lose." "\n"
            money = money - b
            print "You now have $",money,"in your bank."

    yn = raw_input("Would you like to play again? (y or n): ")

    if "y" in yn:
        print "\n" * 5
        run()
    else:
        print "\n" "Your total winnings is $",money,
        sys.exit()          

run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:31:52.547

`run()`与其在玩家每次选择再次玩时都调用，不如将所有代码放在一个循环中，当玩家选择“否”时该循环会中断。这样，`money`变量将继续保持其值。

**编辑：**将代码移动到一个单独的方法中，例如`deal_a_hand()`，并且`money`每次都将变量传递给它（您可能需要该方法），这绝对是有利的（就干净和可维护的代码而言`return money`），但最好调用它从 main 方法中的循环而不是使用不必要的递归。通常，您不希望方法调用自身，除非它使程序更高效或更容易编写，即使那样您也必须考虑递归的深度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:32:20.490

最简单的方法是将参数添加到`run`：

```
def run(money): 
```

删除线`money = 500`，在循环中和`run`第一次调用。`run(money)``run(500)`

我建议从中删除“再玩一轮”的`run`逻辑

```
def run_single_hand(money):
    # <code to run hand, change value of money>
    return money

def play_hands():
     starting_money = 500
     money = starting_money
     money = run_single_hand(money)
     while True:
         # <code to ask if they would like to play again
         if again:
             run_single_hand(money)
         else:
             print 'thank you, you made a profit of %d' % money - starting_money
             break 
```

因为这避免了递归问题（我建议的第一种方法最终会`run`在堆栈上调用 N 次）并且仍然很好地考虑您的代码。

例如，您可以修改它来做 poker my replacement `run_single_hand`。对于这个例子来说，这似乎微不足道，但对于更复杂的项目来说，这是一个很好的代码模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:31:15.877

像这样定义你的函数：

```
def run(startingFunds = None):

    <brilliant code>

    money = 500 if startingFunds is None else startingFunds

    <brilliant code>

    if "y" in yn:
        print "\n" * 5
        run(money) 
```

* * *

再想一想，按照 iamnotmaynard 的建议进行操作，并在其周围放置一个 while 循环。但我仍然会将startingFunds 作为函数的参数。

（PS：他得到了支票:)）

# ios - 自动化 iOS 应用程序部署和测试

> ID：14382443
> 
> 赞同：4
> 
> 时间：2013-01-17T15:27:58.747
> 
> 标签：ios, testing, deployment, command-line, installation

我正在构建一个移动设备测试平台，它将把我们创建的移动应用程序部署到**真正**的Android 和 iOS 设备上。我们有一堆设备、USB 电缆和 USB 集线器插入机器:)

移动应用程序将在部署时自动运行所有单元测试，并且我们为 android 和 iOS 构建了版本。部署到多个设备需要编写脚本并使用命令行工具进行安装。

对于 Android，这很容易 - 使用 Android 调试桥 (adb)。

对于 iOS，似乎没有什么可以从命令行将 iOS 应用程序安装到**真正的 iOS 设备。**

拜托，请那里的人让我知道一个工具来做到这一点！

非常感谢您的阅读！

# java - 启动 ATG 服务器时出现 Web 服务连接异常

> ID：14382447
> 
> 赞同：-4
> 
> 时间：2013-01-17T15:28:11.190
> 
> 标签：java, jboss, atg

启动 ATG - JBOSS 服务器时出现以下错误。请帮我解决问题。

```
ERROR [CDLS service] RemoteException testing binding ; nested exception is:
            java.net.ConnectException: Connection timed out: connect
    AxisFault
     faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
     faultSubcode:
     faultString: java.net.ConnectException: Connection timed out: connect
     faultActor:
     faultNode:
     faultDetail:
            {http://xml.apache.org/axis/}stackTrace:java.net.ConnectException: Connection timed out: connect
            at java.net.PlainSocketImpl.socketConnect(Native Method)
            at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)**
            at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
            at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
            at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
            at java.net.Socket.connect(Socket.java:519)
            at sun.reflect.GeneratedMethodAccessor213.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:585)
            at org.apache.axis.components.net.DefaultSocketFactory.create(DefaultSocketFactory.java:153)
            at org.apache.axis.components.net.DefaultSocketFactory.create(DefaultSocketFactory.java:125)
            at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:191)
            at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.java:404)
            at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)
            at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
            at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
            at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
            at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
            at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
            at org.apache.axis.client.Call.invoke(Call.java:2767)
            at org.apache.axis.client.Call.invoke(Call.java:2443)
            at org.apache.axis.client.Call.invoke(Call.java:2366)
            at org.apache.axis.client.Call.invoke(Call.java:1812)
            at com.philips.cdls.generated.CustomerCareServiceSoapBindingStub.getContactData(CustomerCareServiceSoapBindingStub.java:164)
            at com.philips.cdls.ContactDetailsService.testBinding(ContactDetailsService.java:130)
            at com.philips.cdls.ContactDetailsService.performScheduledTask(ContactDetailsService.java:165)
            at atg.service.scheduler.ScheduledJob.runJobs(ScheduledJob.java:441)
            at atg.service.scheduler.Scheduler$2handler.run(Scheduler.java:760)

            {http://xml.apache.org/axis/}hostname:D-12KGKY09300004

    java.net.ConnectException: Connection timed out: connect
            at org.apache.axis.AxisFault.makeFault(AxisFault.java:101)
            at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:154)
            at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
            at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
            at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)**
            at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
            at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
            at org.apache.axis.client.Call.invoke(Call.java:2767)
            at org.apache.axis.client.Call.invoke(Call.java:2443)
            at org.apache.axis.client.Call.invoke(Call.java:2366)
            at org.apache.axis.client.Call.invoke(Call.java:1812)
            at com.philips.cdls.generated.CustomerCareServiceSoapBindingStub.getContactData(CustomerCareServiceSoapBindingStub.java:164)
            at com.philips.cdls.ContactDetailsService.testBinding(ContactDetailsService.java:130)
            at com.philips.cdls.ContactDetailsService.performScheduledTask(ContactDetailsService.java:165)
            at atg.service.scheduler.ScheduledJob.runJobs(ScheduledJob.java:441)
            at atg.service.scheduler.Scheduler$2handler.run(Scheduler.java:760)
    Caused by: java.net.ConnectException: Connection timed out: connect
            at java.net.PlainSocketImpl.socketConnect(Native Method)
            at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
            at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
            at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
            at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
            at java.net.Socket.connect(Socket.java:519)
            at sun.reflect.GeneratedMethodAccessor213.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:585)
            at org.apache.axis.components.net.DefaultSocketFactory.create(DefaultSocketFactory.java:153)
            at org.apache.axis.components.net.DefaultSocketFactory.create(DefaultSocketFactory.java:125)
            at org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:191)
            at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.java:404)
            at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)
            ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:39:39.473

好吧，基于“Apache Axis”，您在这里处理 Web 服务。异常表明与某处的连接超时，这可能意味着

*   您的 Web 服务的端点无法连接或
*   无法连接您的 Web 服务所引用的架构

这可能是由于目标地址中某处的错误、网络连接问题或端点由于自身原因而没有响应。

除此之外，这是任何人的猜测。

# codeigniter - CodeIgniter 表单验证可选，基于值

> ID：14382448
> 
> 赞同：0
> 
> 时间：2013-01-17T15:28:14.510
> 
> 标签：codeigniter, validation

我正在使用 CI 设置一个表单，并且我正在使用表单验证来帮助我解决这个问题。

目前我有不同的规则设置，比如

```
$this->form_validation->set_rules('first_name', 'First Name', 'required|xss_clean'); 
```

但是在我的表单中，我有一个复选框，启用该复选框将显示选中该复选框时所需的一些新输入。当复选框未选中时，这些字段不是必需的。

在 CI 中执行此操作的最佳方法是什么？

```
// Set validation rules
$this->form_validation->set_rules('first_name', 'First Name', 'required|xss_clean');
$this->form_validation->set_rules('last_name', 'Last Name', 'required|xss_clean');
// Some more rules here

if($this->form_validation->run() == true) {
    // Form was validated
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:57:27.673

几个月前我遇到了这样的事情。我只是添加了一个简短的 if 语句。

它看起来像这样（例如使用地址）：

```
$this->form_validation->set_rules('home_address', '"Home Address"', 'required|trim|xss_clean|strip_tags');
$this->form_validation->set_rules('unit', '"Unit"', 'trim|xss_clean|strip_tags');
$this->form_validation->set_rules('city', '"City"', 'required|trim|xss_clean|strip_tags');
$this->form_validation->set_rules('state', '"State"', 'required|trim|xss_clean|strip_tags');
$this->form_validation->set_rules('zip', '"Zip"', 'required|trim|xss_clean|strip_tags');

//checkbox formatted like this in the view: form_checkbox('has_second_address', 'accept'); 
if ($this->input->post('has_second_address') == 'accept')
{
    $this->form_validation->set_rules('street_address_2', '"Street Address 2"', 'required|trim|xss_clean|strip_tags');
    $this->form_validation->set_rules('state_2', '"State 2"', 'required|trim|xss_clean|strip_tags');
    $this->form_validation->set_rules('city_2', '"City 2"', 'required|trim|xss_clean|strip_tags');
    $this->form_validation->set_rules('zip_2', '"Zip 2"', 'required|trim|xss_clean|strip_tags');
}

if($this->form_validation->run() == true) {
    //example
    //will return FALSE if empty
    $street_address_2 = $this->input->post('street_address_2');
    //and so on...
} 
```

我不确定这是否是 Codeigniter 方式，但上次我检查时找不到“*最佳方法*”方式。这绝对可以完成工作，并且至少允许您控制用户 $_POST 变量。

无论如何，我希望这会有所帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T15:54:35.633

```
if($this->input->post('checkbox_name')){
    // add more validation rules here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:53:23.650

您可以使用 javascript / jquery 将隐藏字段的值设置为 true 或 false，具体取决于复选框是否已被选中。

然后在您的控制器中使用条件检查

```
if ($hidden_field) {
   //run more validation.
} 
```

# visual-c++ - 在 OpenCV 中使用随机森林进行图像分类

> ID：14382454
> 
> 赞同：2
> 
> 时间：2013-01-17T15:28:26.303
> 
> 标签：visual-c++, opencv, machine-learning, computer-vision, random-forest

canyone 可以指导我如何在 OpenCV 中的相机输入视频上训练随机森林分类器吗？我想做的是：

1.  从 VideoCapture 对象中获取帧

2.  在框架中定位对象

3.  在对象周围绘制一个边界框并对其进行采样

4.  将样本存储在缓冲区中并在线训练随机森林分类器

5.  更新对象模型

6.  使用更新的对象模型跟踪下一帧中的对象

7.  返回第 2 步

这种方法的灵感来自 TLD 捕食者算法，我也在 openTLD 中获得了一些成果，但是，我不太了解 openTLD 的实现，并想自己创建它。

我已经使用基于 haar 的级联分类器完成了第 3 步，但我对随机森林上的图像分类和更新模型有点迷茫。

非常感谢您对此的任何帮助和指导！真诚的感谢！

# c# - 打字导师帮助 C#

> ID：14382455
> 
> 赞同：-3
> 
> 时间：2013-01-17T15:28:26.287
> 
> 标签：c#, winforms

我正在 C# 上键入导师简单项目

![在此处输入图像描述](../Images/b1e691e850bbe0957b2a3f34fd156f59.png)

请任何人帮助我我有一个问题..我在按钮后面编码

```
private void btnq_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyValue == 81)
        {
            i = Convert.ToInt16(rtb1.Text.IndexOf('q'));

            if (i == 0)
            {

                rtb1.Text = rtb1.Text.Remove(0, 1);
            }

        }
    } 
```

当我调试项目并从键盘按 Q 键时没有任何反应..但是当我用单击鼠标单击 Q 按钮时*（（我也为鼠标单击事件编写代码，但它工作））*它工作，如果我按下 Q 按钮，现在单击后从键盘然后它工作..为什么当我第一次从键盘按键时它不工作..

我哪里错了？请帮助..我会等待..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:34:39.877

看起来您的事件处理程序已附加到`Q`按钮。这意味着只有当您*在该按钮获得焦点*时按下某个键时才会调用它。

您应该做的是将事件处理程序添加到键盘组框，或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T05:16:58.007

我添加这个我的问题解决了，但我仍然面临一个问题。当我开始打字时，时钟时间开始和停止`Space`键。我应该怎么做？它在打字时产生问题。

```
 private void Form1_KeyPress(object sender, KeyPressEventArgs e)

    {  
       if (btnclock.Text == "Start")
            e.Handled = false ;
         else
        {
         i = Convert.ToInt16(rtb1.Text.IndexOf(e.KeyChar));

            if (i == 0)
            {

                rtb1.Text = rtb1.Text.Remove(0, 1);
            }
            else
                j++;
            textBox1.Text = Convert.ToString((j));
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:36:01.197

您正在输入的组件在应用程序启动时没有焦点。

您可以做的是在您的构造函数中设置焦点。

```
MyControl.Focus(); 
```

# perl - 如何在没有 uc() 函数的情况下将字母转换为大写？

> ID：14382459
> 
> 赞同：-4
> 
> 时间：2013-01-17T15:28:50.170
> 
> 标签：perl, uppercase, lowercase

我正在尝试编写一个脚本，它将所有字母从小写转换为大写而不使用该`uc()`函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:31:54.303

你可以使用类似的东西`$str =~ tr/a-z/A-Z/`，但`uc`如果它对你很重要的话，它可能更适合 Unicode 支持。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T15:31:38.520

使用正则表达式：

```
$str =~ s/(.)/\u$1/g; 
```

# r - 时间段桶

> ID：14382461
> 
> 赞同：3
> 
> 时间：2013-01-17T15:28:55.437
> 
> 标签：r, time-series

我有事件日志，其中包含：开始时间、结束时间、类别 ID 和计数。它们涵盖了几个月。

我想随着时间的推移聚合它们，以便能够在给定的一天、一周、一个月内追踪直方图。所以我认为最好的方法是把时间段放在桶里。我觉得5分钟就好了。

例如，如果一个事件在下午 1.01 开始并在下午 1.07 结束，我想为其获取 2 条记录，因为它涵盖 2 个 5 分钟的时段（0-5 和 5-10）并复制其余的原始数据这些新记录（类别和计数）

如果我的输入日志 (x) 是这样的：

```
start / end / catid / count     
2012-11-17 15:05:02.0,  2012-11-17 15:12:52.0,  1, 2    
2012-11-17 15:07:13.0,  2012-11-17 15:17:47.0,  2, 10   
2012-11-17 15:11:00.0,  2012-11-17 15:12:33.0,  3, 5    
2012-11-17 15:12:01.0,  2012-11-17 15:20:00.0,  4, 1 
```

我正在尝试以这种方式在 5 分钟 (b) 内获取输出：

```
start / catid / count   
2012-11-17 15:05:00.0   1, 2    
2012-11-17 15:10:00.0   1, 2

2012-11-17 15:05:00.0   2, 10   
2012-11-17 15:10:00.0   2, 10
2012-11-17 15:15:00.0   2, 10

2012-11-17 15:10:00.0   3, 5

2012-11-17 15:10:00.0   4, 1
2012-11-17 15:15:00.0   4, 1 
```

然后我可以轻松地将新数据框 (b) 聚合到我想要的时间段（小时、天、周、月）的类别 ID 上

我从 R 开始，我发现了很多关于如何存储时间值而不是时间段的解释。我看过 zoo 和 xts，但我找不到该怎么做。

希望这对你们中的一些人有意义。

编辑：

我稍微修改了 Ram 的建议，以使用四舍五入的结束时间而不是原始结束时间来正确计算块。（谢谢拉姆！）

```
mnslot=15 # size of the buckets/slot in minutes

#Round down the minutes of starttime to a mutliple of mnslot
st.str <- strptime(st, "%Y-%m-%d %H:%M:%S")
min_st <- as.numeric(format(st.str, "%M"))
roundedmins <- floor(min_st/mnslot) * mnslot
st.base <- strptime(st, "%Y-%m-%d %H")
rounded_start <- st.base + (roundedmins * 60)

#Round down the minutes of the endtime to a multiple of mnslot.
en.str <- strptime(en, "%Y-%m-%d %H:%M:%S")
min_en <- as.numeric(format(en.str, "%M"))
roundedmins <- floor(min_en/mnslot) * mnslot
en.base <- strptime(en, "%Y-%m-%d %H")
rounded_end<- en.base + (roundedmins * 60)

# calculate the number of blocks based on the rounded minutes of start and end
numblocks<- as.numeric(floor((rounded_end-rounded_start)/mnslot/60)+1)
# differenced of POSIXct values is in minutes
# but difference of POSIXlt seems to be in seconds , so have to divide by 60 as well

#Create REPLICATED Rows, depending on the size of the interval
replicated_cat = NULL
replicated_count = NULL
replicated_start =     NULL
for (n in 1:length(numblocks)){
  for (newrow in  1:numblocks[n]){
    replicated_start =   c(replicated_start, df$rounded_start[n]+(newrow-1)*300   )  
    replicated_cat = c(replicated_cat,    df$catid[n]) 
    replicated_count = c(replicated_count, df$count[n]) 
  }
}

#Change to readable format
POSIXT <- unix2POSIXct(replicated_start)

newdf <- data.frame(POSIXT, replicated_cat, replicated_count)
names(newdf) <- c("start", "CatId", "Count")
newdf 
```

这会产生所需的输出。虽然有点慢：p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:42:15.267

这是一个完整的工作版本。它涉及您所追求的逐步数据操作。

```
#storing the original data as a csv
df <- read.csv("tsdata.csv")
st<-as.POSIXlt(df$start)
en<-as.POSIXlt(df$end)

#a utility function to convert formats
unix2POSIXct  <-  function (time)   structure(time, class = c("POSIXt", "POSIXct") )

#For each row, determine how many replications are needed
numdups <- as.numeric(floor((en-st)/5)+1)

st.str <- strptime(st, "%Y-%m-%d %H:%M:%S")
min_st <- as.numeric(format(st.str, "%M"))

#Round down the minutes of start to 5 minute starts. 0,5,10 etc...
roundedmins <- floor(min_st/5) * 5
st.base <- strptime(st, "%Y-%m-%d %H")
df$rounded_start <- st.base + (roundedmins * 60)

#Create REPLICATED Rows, depending on the size of the interval
replicated_cat = NULL
replicated_count = NULL
replicated_start =     NULL
for (n in 1:length(numdups)){
  for (newrow in  1:numdups[n]){
    replicated_start =   c(replicated_start, df$rounded_start[n]+(newrow-1)*300   )  
    replicated_cat = c(replicated_cat,    df$catid[n]) 
    replicated_count = c(replicated_count, df$count[n]) 
  }
}

#Change to readable format
POSIXT <- unix2POSIXct(replicated_start)

newdf <- data.frame(POSIXT, replicated_cat, replicated_count)
names(newdf) <- c("start", "CatId", "Count")
newdf 
```

产生：

```
 start CatId Count
1 2012-11-17 15:05:00     1     2
2 2012-11-17 15:10:00     1     2
3 2012-11-17 15:05:00     2    10
4 2012-11-17 15:10:00     2    10
5 2012-11-17 15:15:00     2    10
6 2012-11-17 15:10:00     3     5
7 2012-11-17 15:10:00     4     1
8 2012-11-17 15:15:00     4     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:50:07.853

这不是一件容易的事......我也错过了整个问题的结构，所以我希望如果我限制自己概述基本方法是可以的，如果事情不清楚，你可以回来找我。首先（如果我是你）我会安装 ' **lubridate** ' 包，这使得玩弄日期/时间变得容易得多。然后也许尝试这样的事情：

```
z <- strptime("17/11/12 15:05:00.0", "%d/%m/%y %H:%M:%OS") 
```

这将定义您的起始时间点，如果应该由第一个 logs(x) 时间定义，那么有可用的分钟命令，例如

```
z <- strptime("17/11/12 15:05:02.0", "%d/%m/%y %H:%M:%OS")
minute(z)<-5;second(z)<-0.0 #I guess, you get the concept 
```

然后产生一个5分钟间隔的序列

```
z5s<-z+minutes(seq(0,100,5)) 
```

这将产生一个 20、5 分钟时间间隔的序列，在这里我不知道整个事情应该有多灵活。

最后，您可以使用例如模运算

```
z2<-z+minutes(2) 
```

z2 应该是结束时间，我只是在这里“手动”添加了 2 分钟来说明这个概念

```
(as.integer(z2-z))%%5 > 5 
FALSE 
```

或者，如果您想查看仅涵盖了多少 5 分钟跨度， `(as.integer(z2-z))%%5` 或者您希望在 z5s POSIXlt 间隔中匹配/分配日志时间的任何其他功能。

希望这会有所帮助，即给你一些方向。

# c# - 如何找出 ac# 的哪一部分 - 代码消耗最多的计算机功率来优化这部分？

> ID：14382465
> 
> 赞同：0
> 
> 时间：2013-01-17T15:29:05.343
> 
> 标签：c#, visual-studio-2010

> **可能重复：**
> [有没有像样的 C# 分析器？](https://stackoverflow.com/questions/10644/any-decent-c-sharp-profilers-out-there)

我用 c# 为 kinect 编写了一个应用程序。出于某种原因，该应用程序消耗了超过 100 MB 的内存和 14% 的处理能力。

在不详细说明的情况下，是否有适用于 Visual Studio 或外部的应用程序可以帮助我找出最大工作量的来源，从而知道在哪里进行优化？

我说的是可视化代码行的扩展或类似的东西，例如将那些在重负载下的红色染成红色，将那些未执行的蓝色染成蓝色。

# jsf - JSF - actionListener 标记调用不带 ActionEvent 参数的方法

> ID：14382466
> 
> 赞同：3
> 
> 时间：2013-01-17T15:29:05.657
> 
> 标签：jsf, methods, primefaces, arguments, el

我一直在阅读那些说 ActionListener 方法必须具有以下签名的帖子：

```
public void calledByActionListener(ActionEvent e) {
} 
```

像这样调用：

```
<p:commandButton value="Example" id="example" process="@this" ajax="false" 
    actionListener="#{exampleBean.calledByActionListener()}"> 
```

但是我有一个像这样的无参数方法：

```
public void calledByActionListener() {
} 
```

**有什么改变吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:56:02.457

是的，这是使用自定义参数调用方法的新[EL 2.2](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)功能。基本上，您是在显式调用无参数方法。这个结构是合法的。

请注意，这与 JSF2 无关。EL 2.2 恰好是 Java EE 6 的一部分，就像 JSF2 一样。所以它*看起来像是*一个新的 JSF2 特性。但实际上并非如此。作为证据，JSF2 与 Java EE 5 向后兼容，这意味着 EL 2.1，但这种构造在那里不起作用。

当没有在方法表达式中明确指定任何自定义参数时，JSF 将按照规范假定`ActionEvent`实际方法中的默认参数为 。

# jquery - 淘汰赛无法绑定 $root

> ID：14382467
> 
> 赞同：1
> 
> 时间：2013-01-17T15:29:10.393
> 
> 标签：jquery, knockout.js, knockout-2.0

在我的文档中，我已添加 `<div data-bind="text: ko.toJSON($root)"></div>`到我的 html5 页面中。不幸的是，IE8 给了我一个错误“无法将绑定应用到 $root”或类似的。

在 FF 和 Chrome 上没有问题。

我如何重新获取当前视图模型的 json 转储以满足调试需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:11:33.807

我能够重现您的问题：问题不在于您的绑定，而在于`ko.toJSON`通话。淘汰赛`JSON.stringify`在您的情况下使用内部失败的功能。

IE 8 是否支持JSON.stringify [()？](https://stackoverflow.com/questions/3326893/is-json-stringify-supported-by-ie-8?lq=1) 答案是**肯定**的。

但有时它只是不起作用：[在 Internet Explorer 8 中未定义 JSON 对象，](https://stackoverflow.com/questions/4715373/json-not-defined-internet-explorer-8)因为 IE 过于挑剔，如果您的 html 标记中有错误，它将退回到没有定义的兼容模式`JSON.stringify`。

你有两个选择：

*   检查您的 HTML 以使 IE8 满意并且不要以兼容模式呈现它
*   使用在旧浏览器中提供的[JSON2](http://www.json.org/js.html)库。`JSON.stringify`

# html - 背景图像停止出现在 IE8 中

> ID：14382479
> 
> 赞同：0
> 
> 时间：2013-01-17T15:29:48.063
> 
> 标签：html, css, internet-explorer, background-image

当我遇到这个问题时，我正在为客户工作：

背景图像在 26 个背景图像后停止加载（尝试更改 fakeimg.pl 图像的图像，我也尝试禁用灯箱）。

知道什么会导致这种情况吗？

我添加了一个 if GET test=stackoverflow 来显示图片。

这是链接：[http ://amenagementscomcept.com/index.php?page=realisations&test=stackoverflow](http://amenagementscomcept.com/index.php?page=realisations&test=stackoverflow)

编辑：这里忘了提，问题出在 IE8 和 IE9

Edit2: 把图删了，重新上传，第26张图还在bug

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:38:24.417

Internet Explorer 不支持 CMYK JPEG

如果你有 ImageMagick：

```
identify -verbose image.jpg 
```

将向您显示图像色彩空间。如果是 CMYK，您可以使用以下方法转换为 RGB：

```
convert broken.jpg -colorspace RGB fixed.jpg 
```

或尝试在 Photoshop 中，将 CMYK 文件转换为 RGB。RGB 文件由 IE 支持。

祝你好运 ！

# tuples - Apache pig如何解析元组以提取列

> ID：14382481
> 
> 赞同：1
> 
> 时间：2013-01-17T15:29:53.757
> 
> 标签：tuples

在 Apache pig 中，如何解析元组以提取列

```
{grp::group: (dt: chararray,ord_id: int),long,grp1::group: (chararray,ord_id1: int),double,l

group,dt,ord_id,long,double 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T16:55:39.007

我相信你可以使用 FLATTEN 来做到这一点。

# java - CREATE_LAYER_FUNC cocos 2dx -- 错误

> ID：14382483
> 
> 赞同：0
> 
> 时间：2013-01-17T15:30:09.533
> 
> 标签：java, android, c++, cocos2d-x

有人能告诉我如何解决这个错误吗？

```
jan@home:~/bin/cocos2dx/CocosTest/proj.android$ ./build_native.sh
NDK_ROOT = /home/jan/bin/android-ndk-r8d
COCOS2DX_ROOT = /home/jan/bin/cocos2dx/CocosTest/proj.android/../..
APP_ROOT = /home/jan/bin/cocos2dx/CocosTest/proj.android/..
APP_ANDROID_ROOT = /home/jan/bin/cocos2dx/CocosTest/proj.android
Using prebuilt externals
make: Entering directory `/home/jan/bin/cocos2dx/CocosTest/proj.android'
Compile++ thumb  : game_shared <= main.cpp
In file included from jni/hellocpp/main.cpp:6:0:
jni/../../Classes/DoYourJobScene.h:10:30: error: ISO C++ forbids declaration of 'LAYER_CREATE_FUNC' with no type [-fpermissive]
make: *** [obj/local/armeabi/objs/game_shared/hellocpp/main.o] Error 1
make: Leaving directory `/home/jan/bin/cocos2dx/CocosTest/proj.android'
jan@home:~/bin/cocos2dx/CocosTest/proj.android$ 
```

这里的来源：http: [//jandroid.ch/CocosTest.tgz](http://jandroid.ch/CocosTest.tgz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T01:55:14.990

LAYER_CREATE_FUNC 和 SCENE_CREATE_FUNC 可以用一个宏 CREATE_FUNC 代替 [看这个！](http://www.cocos2d-x.org/issues/1442)

所以你应该知道怎么做。

# facebook - 如何在 Facebook 上获取照片的分享次数

> ID：14382488
> 
> 赞同：1
> 
> 时间：2013-01-17T15:30:25.483
> 
> 标签：facebook, facebook-opengraph, social

有什么方法可以获取特定照片在 Facebook 上的分享数量。我发现了很多关于获取特定网址的共享数量但不是照片的信息。

任何帮助表示赞赏

谢谢

# mysql - 将数据类型从 bigint 更改为 tinyint 形成具有外键引用的现有表

> ID：14382492
> 
> 赞同：1
> 
> 时间：2013-01-17T15:30:33.213
> 
> 标签：mysql, sql

我必须优化有 212 个表的数据库。一个表主键充当 94 个表的外键。例如我有这张表：

```
create table CUSTOMER (
    CUSTOMER_ID BIGINT NOT NULL,
    CUSTOMER_NAME VARCHAR(255) NOT NULL UNIQUE,
    CONTACT_PERSON VARCHAR(255) NOT NULL,
    CUSTOMER_EMAIL VARCHAR(255) NOT NULL,
    ADDRESS VARCHAR(255),
    CITY VARCHAR(255),
    PHONE VARCHAR(255),
    FAX VARCHAR(255),

    constraint CUSTOMER_PK PRIMARY KEY (CUSTOMER_ID)
); 
```

这`CUSTOMER_ID`是作为 94 个表的外键的引用。下面以一张表为例：

```
create table CUSTOMER_STATUS (
    CUSTOMER_DETAILS_ID BIGINT NOT NULL,
    CUSTOMER_ID BIGINT NOT NULL,
    USER_ID BIGINT NOT NULL,
    TRIAL_PERIOD BIGINT NOT NULL,
    TRIAL_PERIOD_TYPE BIGINT NOT NULL,
    EXPIRY_DATE BIGINT NOT NULL,
    MAXIMUM_CLIENTS BIGINT NOT NULL,
    STATUS BIGINT NOT NULL,
    AUTO_AUTHORIZATION BIGINT NOT NULL,

    constraint CUSTOMER_STATUS_PK PRIMARY KEY (CUSTOMER_ID,CUSTOMER_DETAILS_ID),
    constraint CUSTOMER_STATUS_FK1 FOREIGN KEY (CUSTOMER_ID) references CUSTOMER(CUSTOMER_ID)
); 
```

我需要将所有表的`CUSTOMER_ID`数据类型从`BIGINT`更改`TINYINT`为，但由于外键约束而出现错误。

错误：

```
mysql> alter table CUSTOMER MODIFY CUSTOMER_ID TINYINT;
    ERROR 1025 (HY000): Error on rename of '.\uds7\#sql-670_cdd' to '.\uds7\customer' (errno: 150) 
```

我应该怎么做才能在不影响我的表数据的情况下进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:34:34.113

你不能直接这样做。

你会做的事情

*   删除所有引用表主键的约束（*外键）*`CUSTOMER`
*   您现在可以更改主键的数据类型
*   还更改外键的数据类型与将引用该键的数据类型相同
*   再次添加外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:50:34.953

您可以在进行架构更改时禁用外键约束检查：

```
SET foreign_key_checks = 0;
ALTER TABLE CUSTOMER        MODIFY CUSTOMER_ID TINYINT;
ALTER TABLE CUSTOMER_STATUS MODIFY CUSTOMER_ID TINYINT;
SET foreign_key_checks = 1; 
```

请注意，重新启用外键检查时，引用列和被引用列的数据类型（包括大小和符号）必须相同。

# python - Tkinter 中的 Python 计算器 - 函数自动运行

> ID：14382497
> 
> 赞同：0
> 
> 时间：2013-01-17T15:30:50.893
> 
> 标签：python, tkinter

我正在使用 Tkinter 在 Python 2.7.3 中制作图形计算器。我已经设置好了，所以当用户按下“b”按钮时，它会将“b”打印到控制台。我通过创建一个函数来做到这一点，该函数传递一个名为“key”的变量，然后将其添加到标签中。但是，当我第一次启动程序时，它会自动调用该函数并将“b”打印到控制台。每当我单击按钮时，它什么也不做。这是我的代码：

```
from Tkinter import *

class Application(Frame):
    def addkey(self,key):
        print str(key)

    def removekey(self):
        if len(self.displaytext) > 0:
            self.displaytext = self.displaytext[0:-1]

    def createWidgets(self):
        self.maxlength = 20
        self.displaytext = ""

        self.frame1 = Frame(self)
        self.display = Label(self.frame1,textvariable=self.displaytext,width=self.maxlength+3,bg="black",fg="white",height=2)
        self.frame1.pack()
        self.display.pack()

        self.frame2 = Frame(self)
        self.bksp = Button(self.frame2,text="b",width=4,height=2,command=self.addkey("b"))
        self.frame2.pack()
        self.bksp.pack()

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.pack()
        self.createWidgets()

app = Application()
app.mainloop()

try:
    root.destroy()
except:
    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:34:29.810

`command = ...`期望传递一个*函数*（接受 0 个参数）。实际上，您正在传递函数的*结果*（`None`在这种情况下）。

一种简单的方法是使用[匿名函数](http://www.secnetix.de/olli/Python/lambda_functions.hawk)来包装您的函数并适当地调用它：

```
command=lambda: self.addkey("b") 
```

或者您可以更详细地执行此操作：

```
def button_func():
    return self.addkey("b")
self.bksp = Button(self.frame2,text="b",width=4,height=2,command=button_func) 
```

但是，如果你有 15 个按钮，每个按钮调用相同的底层函数，参数略有不同，这就开始变得非常冗长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:33:01.657

您正在调用`self.addkey`并将其结果分配给`command`参数。相反，您需要传递一个可以调用的函数。

换句话说，改变

```
command=self.addkey("b") 
```

至

```
command=lambda: self.addkey("b") 
```

如果`self.addkey`不需要任何额外的参数，你可以这样做`command=self.addkey`，但因为情况并非如此，你需要`lambda`.

# android - 更改字体字体样式后的Android不起作用

> ID：14382499
> 
> 赞同：3
> 
> 时间：2013-01-17T15:30:56.073
> 
> 标签：android, fonts, styles, typeface

我在textview中应用了孟加拉语（一种语言）字体作为字体，文本样式设置为粗体，但文本的英文部分变为粗体，但孟加拉语部分不是粗体，我想加粗全文

> ```
>  TextView tv = (TextView)findViewById(R.id.textvie2);
> 
>     Typeface  mFace = Typeface.createFromAsset(this.getAssets(),"Siyamrupali_1_01.ttf");
>     tv.setTypeface(mFace); 
> ```

这是活动中的代码，在 xml 中是

```
<TextView
            android:id="@+id/textvie2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="10dp"
            android:textSize="25sp"
            android:textStyle="bold" > 
```

所以如果我设置一个孟加拉-英语混合文本，只有英语变得粗体，孟加拉字体没有变得粗体，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:33:57.500

更改您的代码如下

```
Typeface  mFace = Typeface.createFromAsset(this.getAssets(),"Siyamrupali_1_01.ttf");
    tv.setTypeface(mFace,Typeface.Bold); 
```

# actionscript-3 - 游戏画面问题

> ID：14382501
> 
> 赞同：0
> 
> 时间：2013-01-17T15:31:05.073
> 
> 标签：actionscript-3, flash

我的“游戏结束”屏幕有问题。我正在使用课程并且对他们来说相当新。这是我得到的错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 DocumentClass/onAvatarDeath() 在 flash.events::EventDispatcher/flash.events:EventDispatcher::dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 MethodInfo-31()

这是中的`onAvatarDeath()`方法`DocumentClass`：

```
public function onAvatarDeath( avatarEvent:AvatarEvent ):void
{
    var travelScore:Number = playScreen.getTravelScore();
    var coinScore:Number = playScreen.getCoinScore();
    gameOverScreen = new GameOverScreen();
    gameOverScreen.addEventListener( NavigationEvent.RESTART, onRequestRestart );
    gameOverScreen.x = 275;
    gameOverScreen.y = 125;
    gameOverScreen.setTravelScore( travelScore );
    gameOverScreen.setCoinScore( coinScore );
    addChild( gameOverScreen );

    playScreen = null;
} 
```

我的菜单屏幕的工作原理几乎相同，而且工作正常。当我追踪`playScreen`它时`null`，这很好。但是当我追踪〜游戏结束〜屏幕时，它不会追踪......有什么帮助吗？我迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:26:56.180

查看您的文件后，您的游戏即使在玩家死亡后仍会继续运行（特别是`avatarEnterFrame`不断被调用）。这意味着它`onAvatarDeath`会一遍又一遍地运行，但是因为您第一次设置为 null ，所以当 Flash 尝试执行or`playScreen`时找不到它。`getTravelScore``getCoinScore`

我通常有一个变量`var isGameRunning:Boolean = false;`，当游戏开始或玩家死亡（或获胜）时，我会保持更新，然后放置`if (gameRunning)`整个任何函数，如`avatarEnterFrame`.

或者，您可以在玩家死亡时移除`ENTER_FRAME`监听`avatar`器（但显然记得在玩家重新开始游戏时再次添加它）。

# php - K2 Joomla 额外字段：如何通过名称/ID 而不是键来引用额外字段？

> ID：14382504
> 
> 赞同：0
> 
> 时间：2013-01-17T15:31:17.087
> 
> 标签：php, joomla, joomla-k2

我正在尝试在 K2 中使用额外的字段。我一直都这样做——但在这种情况下，有时某些字段有值，而另一些则没有。所以key不一致。

有没有办法让我通过名称或 id 而不是通过自动数组的键来引用它们？

我试过这个，它似乎不起作用：

```
$streetaddress = $this->item->extra_fields->id[249]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:53:25.450

[在这里](http://getk2.org/community/New-to-K2-Ask-here-first/161676-Display-specific-extra-field-in-module-position-)找到了这个很棒的脚本，用于将额外的字段转换为使用 id 或 label 作为键：

```
<?php 
 //convertArray to use ids as key
      $extrafieldsid = array();
      foreach($this->item->extra_fields as $itemid)
      {    
      $extrafieldsid[$itemid->id] = $itemid->value;
      }   
      ?>
       <?php 
 //convertArray to use labels as key
      $extrafieldslabels = array();
      foreach($this->item->extra_fields as $itemlabel)
      {    
      $extrafieldslabels[$itemlabel->id] = $itemlabel->name;
      }   
      ?> 
```

# javascript - 使用 Jquery 检查时通过复选框更改背景颜色

> ID：14382505
> 
> 赞同：0
> 
> 时间：2013-01-17T15:31:20.690
> 
> 标签：javascript, jquery, html, css

我正在尝试使用其中的复选框更改 div 的背景颜色。我做了[这个](http://jsfiddle.net/trishfernan/Awy6c/)供参考。我正在尝试`<div>`用 'highlight'替换父级`<div>`，所以我认为切换`<div>`会起作用。取消选中该复选框时，我希望背景颜色恢复正常（或删除 'highlight' `<div>`）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:38:47.467

jsFiddle 中存在一些问题。

第一个是，尽管编写了 jQuery 代码，但您没有选择 jQuery 作为左侧的框架。这是一个特定于 jsFiddle 代码的小问题，但很容易解决。

第二个问题是`<div>`元素上有内联样式，包括`background-color`. 该内联样式将优先于任何`background-color`使用 CSS 类指定的样式（除非它被指定为be `!important`），因此即使您的代码正确地将`checked`类添加到元素，背景颜色也不会改变。

最简单的解决方案是简单地更改您的 CSS 声明：

```
.checked {
    background-color: #ff0000 !important;
} 
```

[这](http://jsfiddle.net/Awy6c/2/)是具有工作功能的 jsFiddle 的更新版本（使用上面的建议）。

但是，我建议您改为将内联样式和 JavaScript 事件处理程序移动到它们自己的 CSS 声明中，这样您就不必指定`!important`. 这将需要进行以下更改：

```
#holder > div {
    clear: both;
    padding: 0.5%;
    margin-bottom: 1px;
    border-bottom: 1px solid #eee;
    float: left;
    width: 96%;
    style: height: 16px;
    cursor: pointer;
    background-color: white; // added this to the existing CSS
}

#holder > div:hover { // this is new
    background-color: #fafafa; 
} 
```

然后将 CSS 声明移到这些声明的`.checked`下方，使其优先于该`background-color`属性。

[这](http://jsfiddle.net/Awy6c/4/)是您的 jsFiddle 的另一个更新版本，改为使用 CSS 声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:38:35.637

您正在`background-color`为 div 设置内联样式。这优先于您通过 CSS 规则设置的任何属性。

添加`!important`到css 文件中类的`background-color`值，如下所示：http: [//jsfiddle.net/KtsGs/1/](http://jsfiddle.net/KtsGs/1/)`checked`

# java - Hibernate：覆盖子类中的字段可选性

> ID：14382510
> 
> 赞同：3
> 
> 时间：2013-01-17T15:31:33.577
> 
> 标签：java, hibernate, jpa

有没有办法使用 Hibernate 或 JPA 注释来覆盖子类中字段的*可选性？*举个例子：

## 家长班

这是一个定义许多公共字段的基类。对于下面的示例，我只显示了一个我想在几个子类中覆盖的字段。在 中`@MappedSuperclass`，此字段为必填项（不允许为空）。

```
@MappedSuperclass
public abstract class GenericLog {
  protected String sessionId;

  @Basic(optional = false)
  @Column(name = FIELD__SESSION_ID__COLUMN, length = 50)
  public String getSessionId() {
    return sessionId;
  }

  public void setSessionId(String sessionId) {
    this.sessionId = sessionId;
  }
} 
```

## 儿童班

这是一个子类。它在父类中定义了相同的 sessionId 字段，唯一的区别是该字段应允许此类中的空值。

```
@Entity
@Table(name = LogError.TABLE_NAME)
@Cache(usage = CacheConcurrencyStrategy.NONE)
public class LogError extends GenericLog {
  @Basic(optional = true)
  @Column(name = FIELD__SESSION_ID__COLUMN, length = 50)
  @Override
  public String getSessionId() {
    return super.getSessionId();
  }

  @Override
  public void setSessionId(String sessionId) {
    super.setSessionId(sessionId);
  }
} 
```

我尝试使用`@AttributeOverride`注释，但这不起作用，甚至指定了`nullable`属性。

PS 我正在使用 Hibernate 4.1.9（JPA 2.0 注释）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-12T15:16:17.627

我认为 和 之间存在一些未记录的交互`@Basic`，`@Column`这会阻止`@AttributeOverride`.

删除`@Basic`并将注释移动到字段级别而不是方法级别对我来说是诀窍：

这是我的设置：

```
@MappedSuperclass
public abstract class GenericLog {

  @Column(name = "sessionId", length = 50, nullable = false)
  protected String sessionId;

  // getter setter here
}

@Entity
@Table(name = "child")
@AttributeOverride(column = @Column(name = "sessionId", length = 50, nullable = true), name = "sessionId")
public class ChildEntity extends SuperClass {

    @Id
    @Column
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    // getter setter here
}

@Entity
@Table(name = "child2")
public class ChildEntity2 extends SuperClass {

    @Id
    @Column
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    // Getter setter here
} 
```

结果如下：

[![表<code>子</code>](../Images/8f2342b24b84f4b81e9230791910ddf8.png)](https://i.stack.imgur.com/KoAcP.png) [![表 <code>child2</code>](../Images/a23860a483fb6988b18c9728b27d310c.png)](https://i.stack.imgur.com/zk375.png)

# node.js - Nodejs 任何文件系统提供者

> ID：14382512
> 
> 赞同：2
> 
> 时间：2013-01-17T15:31:38.600
> 
> 标签：node.js, io

是否有任何 nodejs 库，支持不同类型的存储，如 FTP、AmazonS3、Google 存储、文件系统。并通过代码透明使用？

例如，它只有一个列表，读，写文件的接口，独立工厂根据设置创建提供者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:03:58.287

你在寻找类似[pkgcloud](https://github.com/nodejitsu/pkgcloud)的东西吗？它是一个抽象出多个云提供商之间差异的模块。对于[存储](https://github.com/nodejitsu/pkgcloud#storage)它目前支持

*   天蓝色
*   机架空间
*   亚马逊

无论您使用哪个服务，该模块都使用`container`和`file`. 它是由[nodejitsu](http://nodejitsu.com/)的人编写的，我相信他们将来会添加更多服务（例如 Google 存储）。或者添加您自己的并提出拉取请求。

# java - Eclipse - 涉及 Maven 时“作为 Java 应用程序运行”

> ID：14382522
> 
> 赞同：3
> 
> 时间：2013-01-17T15:32:02.267
> 
> 标签：java, eclipse, maven, m2e

我有一个 Maven 项目。因为`activeByDefault`我有生产资料。除非我将其放入暂存配置文件中，否则我似乎找不到使用暂存配置文件在 Eclipse 中将其作为应用程序运行的方法`activeByDefault`。有没有办法配置它，所以我不必每次都编辑 pom？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:54:52.557

在 Eclipse 中从 Maven 项目运行 Java 应用程序唯一受到影响的是应用程序类路径的构造方式。通常在 Maven 中有几个不同的类路径作用域：编译、编译测试（这个实际上是用于在 Eclipse JDT 中构建类路径）和运行时。运行时类路径范围用于组装应用程序启动的类路径。m2e 实际上是使用 Maven 代码来解决它。

因此，您要么必须更改 pom.xml 中的配置文件激活设置，要么在 Eclipse 项目属性/Maven/Active Maven Profiles 中指定活动配置文件。

如果您希望运行时配置文件与 Eclipse 中的构建时配置文件不同，现在是不可能的。您必须提交 m2e 的增强请求，以允许在计算启动类路径时指定活动配置文件。

# amazon-s3 - Amazon S3分段上传ETag生成方法

> ID：14382524
> 
> 赞同：5
> 
> 时间：2013-01-17T15:32:05.907
> 
> 标签：amazon-s3

**编辑**：[艾默生法鲁贾](https://stackoverflow.com/users/614482/emerson-farrugia) 回答了这个问题：[为大于 5GB 的文件计算 Amazon-S3 Etag 的算法是什么？](https://stackoverflow.com/questions/12186993/what-is-the-algorithm-to-compute-the-amazon-s3-etag-for-a-file-larger-than-5gb/19896823#19896823)

您可能已经知道，当使用亚马逊分段上传 API 上传大文件时：

```
Initiate Multipart Upload -> Upload Part 1, Upload Part2 ... Upload Part n -> Complete Multipart Upload 
```

“完成分段上传”将返回具有以下格式的 ETag：

```
multiparthash-number 
```

其中数字是使用“上传部件”上传的部件**数量。**

现在我的问题是如何计算这个**multiparthash**。我在博客中发现了一些内容：

```
multiparthash = md5(L1:H1:L2:H2…:Ln:Hn:) 
```

其中 Ln 是索引，Hn 是第 n 部分的 ETAg。但这至少对我来说是行不通的。

是否有任何官方文档或任何专有技术？

# .net - 如何升级已部署的 sql 数据库？

> ID：14382529
> 
> 赞同：0
> 
> 时间：2013-01-17T15:32:22.557
> 
> 标签：.net, database, deployment

> **可能重复：**
> [ClickOnce 在更新时会删除我的本地数据库。如何不呢？](https://stackoverflow.com/questions/1690444/clickonce-deletes-my-local-database-when-it-updates-how-not-to)

我已经使用 clickonce 部署了一个应用程序，其中包含一个 sql 数据库管理模式。在应用程序启动时，应用程序尝试将本地数据库与服务器数据库同步。我已经部署了应用程序，并且效果很好，但是，由于我已经部署了应用程序，因此我对数据库架构和 wpf 应用程序进行了各种更改。我现在正在尝试部署升级，但无法正确部署新数据库。似乎发生了什么，是启动数据库同步失败，然后应用程序指向一个空数据库，让我什么都不做。我非常需要帮助。谢谢！

# android - Android DialogFragment 为空白

> ID：14382534
> 
> 赞同：9
> 
> 时间：2013-01-17T15:32:32.227
> 
> 标签：android, android-dialogfragment

我在创建对话框时遇到问题。它确实出现了，但里面是空的，只显示了一个空白框。

对话类：

```
public class SomeDialog extends DialogFragment{

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.somelayout, null));

    return super.onCreateDialog(savedInstanceState);
}
} 
```

在一个活动中，创建一个对象并调用 show 方法：

```
SomeDialog obj = new SomeDialog();
obj.show(getFragmentManager(), "randomtag"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:42:20.860

```
return super.onCreateDialog(savedInstanceState); 
```

您正在返回父方法。你应该返回你自己的 . 改成 ：

```
 return builder.create(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T19:21:49.790

就我而言，问题出在

```
public static DialogFragment newInstance(int param) {
    Bundle args = new Bundle();
    args.putInt(EXTRA_PARAM, param);

    DialogFragment fragment = new DialogFragment(); // Here is an error.
    fragment.setArguments(args);
    return fragment;
} 
```

错误的行应替换为

```
DialogFragment fragment = new YourDialogFragment();
// Or YourDialogFragment fragment = new YourDialogFragment(); 
```

# c++ - Richedit控件的奇怪行为，文本像旧日文一样水平书写

> ID：14382536
> 
> 赞同：2
> 
> 时间：2013-01-17T15:32:46.407
> 
> 标签：c++, winapi, richedit

所有这些都可以编译，没有错误，但是光标是垂直的并且显示在窗口的右上角，并且文本流就像日语从上到下的字符，从右到左的行。字符是不可见的，但可以复制。我有英文 Windows XP SP3，没有亚洲软件。

```
#include <windows.h>
#include <richedit.h>

int main() {
  LoadLibrary("Msftedit.dll");
  HINSTANCE hInstance = (HINSTANCE)GetModuleHandle(0);
  HWND richeditWindow = CreateWindowExW (
    WS_EX_TOPMOST,
    L"RichEdit50W",
    L"window text",
    WS_OVERLAPPEDWINDOW | ES_MULTILINE | WS_VISIBLE,
    0, 0, 500, 500,
    NULL, NULL, hInstance, NULL
  );

  MSG msg;
  while( GetMessageW( &msg, richeditWindow, 0, 0 ) ) {
    TranslateMessage( &msg );
    DispatchMessageW( &msg );
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:46:51.077

问题是你对`WS_OVERLAPPEDWINDOW`风格的使用。富编辑控件被设计为用作子窗口，不支持 WS_OVERLAPPEDWINDOW。

WS_OVERLAPPEDWINDOW 编译为 0x00CF0000。这与几种丰富的编辑样式重叠，即：

```
ES_VERTICAL         0x00400000
ES_NOIME            0x00080000
ES_SELFIME          0x00040000 
```

因此，将 WS_OVERLAPPEDWINDOW 宏应用于您的控件与应用这些样式相同。

# ember.js - Ember-Data：如何使用`DS.Adapter.findHasMany`

> ID：14382538
> 
> 赞同：10
> 
> 时间：2013-01-17T15:32:56.907
> 
> 标签：ember.js, ember-data

# 更新

请注意，这个问题适用于 Ember Data pre-1.0 beta，通过 URL 加载关系的机制在 1.0 beta 后发生了显着变化！

* * *

前段时间我问了一个更长的问题，但由于库从那时起发生了变化，我会问一个更简单的版本：

你怎么用`DS.Adapter.findHasMany`？我正在构建一个适配器，我希望能够`get`在关系属性上加载关系的内容，这*看起来*像是这样做的方式。但是，查看 Ember Data 代码，我看不出如何调用此函数（如果需要，我可以在注释中解释）。

我的后端没有一种简单的方法可以在我发送的 JSON 中的属性键中包含一个 id 数组——我正在使用的序列化程序不允许我挂钩任何可以改变它的地方，而且它也将是计算成本高。

曾几何时，Ember Data 的首页显示了一个执行此“延迟加载”的示例……这可能吗，或者路线图上列出的“处理部分加载的记录”，目前还不能完成.?

截至 1 月 15 日，我正在使用 API 修订版 11，主分支。

# 更新

好的，以下主要工作。`findHasMany`首先，根据测试用例的实现，我在适配器中创建了以下方法：

```
findHasMany: function(store, record, relationship, details) {
    var type = relationship.type;
    var root = this.rootForType(type);
    var url = (typeof(details) == 'string' || details instanceof String) ? details : this.buildURL(root);

    this.ajax(url, "GET", {
        success: function(json) {
            var serializer = this.get('serializer');
            var pluralRoot = serializer.pluralize(root);
            var hashes = json[pluralRoot]; //FIXME: Should call some serializer method to get this?
            store.loadMany(type, hashes);

            // add ids to record...
            var ids = [];
            var len = hashes.length;
            for(var i = 0; i < len; i++){
                ids.push(serializer.extractId(type, hashes[i]));
            }
            store.loadHasMany(record, relationship.key, ids);
        }
    });
} 
```

上述的先决条件是您的序列化程序中必须有一个运行良好的方法，但在大多数情况下`extractId`，内置的方法可能会做。`RESTAdapter`

这*行得通*，但有一个重大问题，我还没有真正解决过这种延迟加载方法的任何尝试：**如果从服务器重新加载原始记录，一切都会失败。**显示这一点的最简单用例是，如果您加载单个记录，然后检索`hasMany`，然后再加载*所有*父记录。例如：

```
var p = App.Post.find(1);
var comments = p.get('comments');
// ...later...
App.Post.find(); 
```

在仅上述代码的情况下，发生的情况是，当 Ember Data 重新实现记录时，它识别出记录上已经存在一个值 ( `posts/1`)，尝试重新填充它，并遵循不同的代码路径**来处理JSON 哈希中的 URL 字符串作为单字符 ID 的数组**。具体来说，它将 JSON 中的值传递给`Ember.EnumerableUtils.map`，这可以理解地将字符串的字符枚举为数组成员。

~~因此，我尝试通过“修补”来解决这个`DS.Model.hasManyDidChange`问题，发生这种情况的地方，如下所示：~~

 ~~```
// Need this function for transplanted hasManyDidChange function...
var map = Ember.EnumerableUtils.map;

DS.Model.reopen({

}); 
```~~ 

~~（^ 没关系，这是一个非常糟糕的主意。）~~

 ~~# 更新 2

当从服务器重新加载父模型时，我发现我必须（至少）再做一件事来解决上述问题。URL 被拆分为单个字符的代码路径位于`DS.Model.reloadHasManys`. 所以，我用下面的代码覆盖了这个方法：

```
DS.Model.reopen({

  reloadHasManys: function() {
    var relationships = get(this.constructor, 'relationshipsByName');
    this.updateRecordArraysLater();
    relationships.forEach(function(name, relationship) {
      if (relationship.kind === 'hasMany') {

        // BEGIN FIX FOR OPAQUE HASMANY DATA
        var cachedValue = this.cacheFor(relationship.key);
        var idsOrReferencesOrOpaque = this._data.hasMany[relationship.key] || [];
        if(cachedValue && !Ember.isArray(idsOrReferencesOrOpaque)){
          var adapter = this.store.adapterForType(relationship.type);
          var reloadBehavior = relationship.options.reloadBehavior;
          relationship.name = relationship.name || relationship.key; // workaround bug in DS.Model.clearHasMany()?
          if (adapter && adapter.findHasMany) {
            switch (reloadBehavior) {
              case 'ignore':
                //FIXME: Should probably replace this._data with references/ids, currently has a string!
                break;
              case 'force':
              case 'reset':
              default:
                this.clearHasMany(relationship);
                cachedValue.set('isLoaded', false);
                if (reloadBehavior == 'force' || Ember.meta(this).watching[relationship.key]) {
                  // reload the data now...
                  adapter.findHasMany(this.store, this, relationship, idsOrReferencesOrOpaque);
                } else {
                  // force getter code to rerun next time the property is accessed...
                  delete Ember.meta(this).cache[relationship.key];
                }
                break;
            }
          } else if (idsOrReferencesOrOpaque !== undefined) {
            Ember.assert("You tried to load many records but you have no adapter (for " + type + ")", adapter);
            Ember.assert("You tried to load many records but your adapter does not implement `findHasMany`", adapter.findHasMany);
          }  
        } else {
          this.hasManyDidChange(relationship.key);
        }
        //- this.hasManyDidChange(relationship.key);
        // END FIX FOR OPAQUE HASMANY DATA

      }
    }, this);
  }

}); 
```

加上这一点，使用基于 URL 的 hasManys*几乎*是可用的，但还有两个主要问题：

首先，反向`belongsTo`关系不能正常工作——你必须将它们全部删除。这似乎是使用 ArrayProxies 完成 RecordArrays 的方式的问题，但它很复杂。当父记录被重新加载时，两个关系都被处理为“删除”，所以当循环遍历数组时，belongsTo 解关联代码同时从数组中删除项目，然后循环因为它试图访问而崩溃不再存在的索引。这个我还没想好，太难了。

其次，它通常效率低下——我最终过于频繁地从服务器重新加载 hasMany ......但至少我可以通过在服务器端发送一些缓存头来解决这个问题。

任何尝试使用此问题中的解决方案的人，我建议您将上面的代码添加到您的应用程序中，它最终可能会让您到达某个地方。但我认为，这确实需要在 Ember Data 中修复才能正常工作。

我希望这最终会得到更好的支持。一方面，他们所采用的[JSONAPI](http://jsonapi.org/)方向明确表示这种事情是规范的一部分。但另一方面，Ember Data 0.13（或 rev 12？）更改了默认的序列化格式，因此如果您想这样做，您的 URL 必须位于名为...的 JSON 属性中`*_ids`......例如`child_object_ids`......在这种情况下您要发送的 ID！这似乎表明不使用 ID 数组在他们的用例列表中并不高。任何阅读此内容的 Ember Data 开发人员：请支持此功能！

欢迎对此提出进一步的想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:57:06.567

有效载荷需要包含“其他”而不是数组，而不是一个 id 数组。

对于 RESTAdapter，返回的 JSON 是这样的：

```
{blog: {id: 1, comments: [1, 2, 3]} 
```

如果你想手动/不同地处理关联，你可以返回一个这样的 JSON：

```
{blog: {id: 1, comments: "/posts/1/comments"} 
```

然后由您的适配器从指定的 URL 获取数据。

查看相关测试：[https ://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/has_many_test.js#L112](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/has_many_test.js#L112)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T02:57:05.277

我很高兴找到这篇文章，帮助了我。这是我的版本，基于当前的 ember-data 和您的代码。

```
findHasMany: function(store, record, relationship, details) {
    var adapter = this;
    var serializer = this.get('serializer');
    var type = relationship.type;
    var root = this.rootForType(type);
    var url = (typeof(details) == 'string' || details instanceof String) ? details : this.buildURL(root);
    return this.ajax(url, "GET", {}).then(function(json) {
            adapter.didFindMany(store, type, json);
            var list = $.map(json[relationship.key], function(o){ return serializer.extractId(type, o);});
            store.loadHasMany(record, relationship.key, list);
        }).then(null, $.rejectionHandler);
}, 
```

对于重新加载问题，我根据我在另一个地方找到的代码，在我覆盖的序列化程序中这样做了：

```
materializeHasMany: function(name, record, hash, relationship) {
    var type = record.constructor,
            key = this._keyForHasMany(type, relationship.key),
            cache = record.cacheFor('data');
    if(cache) {
        var hasMany = cache.hasMany[relationship.key];
        if (typeof(hasMany) == 'object' || hasMany instanceof Object) {
            record.materializeHasMany(name, hasMany);
            return;
        }
    }
    var value = this.extractHasMany(type, hash, key);
    record.materializeHasMany(name, value);
} 
```

我仍在努力解决分页问题，​​因为我正在使用的一些收藏品需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T14:02:59.587

我更接近于让它与第 13 版一起使用，并以 sfossen 的 findHasMany 实现为基础。

对于具有 hasMany 关系“blogPosts”的 Ember 模型“Author”，我的其余 api 看起来像“/api/authors/:author_id/blog_posts”。当查询 id 为 11 的作者的其余 api 时，blog_posts 字段显示为“/authors/11/blog_posts”。

我现在看到服务器返回了相关的博客文章，但是 Ember 仍然会抛出一个模糊的错误，即在渲染页面时它无法从未定义的模型对象中读取“id”。所以我还没有完全到那里，但至少相关数据是从其余服务正确请求的。

我的完整适配器：

```
App.Adapter = DS.RESTAdapter.extend({
    url: 'http://localhost:3000',
    namespace: 'api',
    serializer: DS.RESTSerializer.extend({
        keyForHasMany: function(type, name) {
            return Ember.String.underscore(name);
        },
        extractHasMany: function(record, json, relationship) {
            var relationShip = relationship + '_path';
            return { url : json[relationShip] }
        }
    }),
    findHasMany: function(store, record, relationship, details) {
        var type = relationship.type;
        var root = this.rootForType(type);
        var url = this.url + '/' + this.namespace + details.url;
        var serializer = this.get('serializer');

        return this.ajax(url, "GET", {}).then(
            function(json) {
                var relationship_key = Ember.String.underscore(relationship.key);
                store.loadMany(type, json[relationship_key]);
                var list = $.map(json[relationship_key], function(o){
                        return serializer.extractId(type, o);}
                );
                store.loadHasMany(record, relationship.key, list);
            }).then(null, $.rejectionHandler);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T06:36:55.117

这是我的解决方案，但它是在 Ember-data 0.14 上的，所以即使我们仍然在这个代码库上，世界也在前进：

```
 findHasMany: function(store, record, relationship, details) {
    if(relationship.key !== 'activities') {
      return;
    }

    var type = relationship.type,
        root = this.rootForType(type),
        url = this.url + details.url,
        self = this;

    this.ajax(url, "GET", {
      data: {page: 1}
    }).then(function(json) {
      var data = record.get('data'),
        ids = [],
        references = json[relationship.key];

      ids = references.map(function(ref){
        return ref.id;
      });

      data[relationship.key] = ids;

      record.set('data', data);

      self.didFindMany(store, type, json);
      record.suspendRelationshipObservers(function() {
        record.hasManyDidChange(relationship.key);
      });
    }).then(null, DS.rejectionHandler);
  }, 
```

我发现用 ID 替换数据对我有用。~~

# mysql - Bash mysql 查询：“字段列表”中的 ERROR 1054 (42S22)“文件名”

> ID：14382543
> 
> 赞同：1
> 
> 时间：2013-01-17T15:33:02.827
> 
> 标签：mysql, bash

我发现了许多类似的列名未知的问题，但没有一个报告与此相同，我迷路了：

第 1 行的错误 1054 (42S22)：“字段列表”中的未知列“tad.sh”

'tad.sh' 是 bash 脚本本身的名称。

编码：

```
#!/bin/sh
FPATH="/home/bermans/CHIT/"
DATE="$(date +"%d-%m-%Y")"
FNAME="transfer-authority.csv"
HEADS="\"Time\", \"Urgent\", \"Initials\", \"Transfer from\", \"From description\",    \"Transfer to\", \"To description\", \"Sum\", \"In respect of\""

params="-u #### -p#### chit"
s1="SELECT "
s2=" UNION"
s3=" SELECT *"
s4=" FROM \`transfer-authority\`"
s5=" WHERE Time > DATE_SUB( NOW( ) , INTERVAL 24 HOUR )"
s6=" INTO OUTFILE "
s7=" FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' ESCAPED BY '\"'"
s8=" LINES TERMINATED BY '\n'"
selectend=";"

echo $s1$HEADS$s2$s3$s4$s5$s6\'$FPATH$DATE$FNAME$\'$s7$s8$selectend | mysql $params 
```

我希望在过去 24 小时内每天创建一个带有标题的 CSV 文件。我将把它作为一个 cronjob 运行，然后通过电子邮件发送并删除该文件。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:54:56.960

删除`| mysql $params`echo 语句的部分，你会有一个令人讨厌的惊喜 ;-)

问题是它`s3=" SELECT *"`被注入到`echo`语句中`*`并被 shell 解释为通配符。就像你在控制台中输入这个一样：

```
echo * 
```

尝试双引号`echo`参数（您将不再需要转义单引号）：

```
echo "$s1$HEADS$s2$s3$s4$s5$s6'$FPATH$DATE$FNAME$'$s7$s8$selectend" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:46:30.263

尝试使用

```
mysql -u #### -p#### -e $s1$HEADS$s2$s3$s4$s5$s6\'$FPATH$DATE$FNAME$\'$s7$s8$ chit 
```

# javascript - 视频播放后添加一个div替换视频

> ID：14382551
> 
> 赞同：2
> 
> 时间：2013-01-17T15:33:21.897
> 
> 标签：javascript, jquery, html, video

如何编码视频；这将发挥作用；在它运行到最后之后。然后用**div**替换视频（特别是在该 #div 中是一个动画 gif）。

但无论如何；我怎么能写这个？

就像是; *（但我不想要一个新的 Window / URL；而是一个 div 来替换内联）*

```
$oVideo.bind('ended', function() {
window.location = 'http://coolurl.com';
$oVideo[0].pause();
$oPause.hide();
$oPlay.css('display', 'block');
}); 
```

**基本上; 视频播放 > 结束 > 视频消失 > 一个 div 替换它**（#div 中带有动画 gif）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:03:21.530

所以，如果我理解正确，您正在寻找视频播放然后视频消失并被包含一些任意内容的 div 替换。

在常规的 HTML/JS/CSS 中，这样的东西可以满足您的要求。应该很容易转换为 jQuery（而不是您在问题中设置的 window.location，只需将视频上的样式设置为 display:none 和要显示的 div 显示：block）

```
<!DOCTYPE html> 
<html> 
<head>
</head>
<body> 
<div class="vidBox" id="box">
    <video class="vid" poster="http://www.rufan-redi.com/assets/lizard_goldeye.jpg" preload="metadata" controls="true" id="video1" height="240" width="360">
        <source src="http://jcath-drg.s3.amazonaws.com/BigBuck.m4v" type="video/mp4">
    </video>
    <div id="other" style="display:none; width:400px; height:300px; background-color:#f0f0f0">
        This appears after the video ends
    </div>
</div>
<script>
    var vid=document.getElementById('video1');
    vid.addEventListener("ended", hideVideo, false);

    function hideVideo() {
        var vid=document.getElementById('video1');
        var other=document.getElementById('other');
        vid.removeEventListener("ended", hideVideo, false);
        vid.style.display='none';
        other.style.display='block';
    }
</script>
</body> 
</html> 
```

# java - 带 HashMap 的四叉树

> ID：14382554
> 
> 赞同：4
> 
> 时间：2013-01-17T15:33:35.607
> 
> 标签：java, algorithm, data-structures, quadtree

我正在考虑使用 HashMap 作为 QuadTree 的支持结构。我相信我可以使用 Morton 测序来唯一识别我感兴趣的区域的每个方格。我知道我的 QuadTree 的高度最多为 16。根据我的计算，这将导致一个 65,536 x 65,536 的矩阵，它最多应该给我 4,294,967,296 个单元格。有谁知道 HashMap 的元素是否太多？我总是可以使用 Tree 编写 QuadTree，但我认为使用 HashMap 可以获得更好的性能。

高度 1 == (2x2) == 4 的莫顿序列

高度 2 == (4x4) == 16 的莫顿序列

高度 3 == (8x8) == 64 的莫顿序列

最大高度为 3 的树的 Morton 测序示例。

![在此处输入图像描述](../Images/b2da6051531b5342ce6d4b20ab0c9c1b.png)

这是我所知道的：

*   我将在已知的矩形区域上获取纬度/经度的数据。
*   数据不会完全覆盖整个区域，并且可能会在该区域的某个地方合并成块。（更糟糕的情况是所有 4,294,967,296 个单元格中的数据）
*   数据的分辨率最终将该区域分解为 65k x 65k 的矩形。
*   我也知道我可能会收到 10 到 1 个查询来插入/更新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:52:49.890

Hashmap 不是一个好主意。有一个更好的解决方案，用于导航系统：

为每个四叉树单元分配一个字母：A（左，上）、B（右，上）、C 和 D。

现在您可以通过字符串对每个四边形单元格进行寻址：

ABACE：这标识了第 5 级中的单元格。（A->B->A->C->E）在互联网上搜索有关该特定四叉树编码的详细信息。

不要忘记：您决定细分规则（何时将一个单元格细分为较小的单元格），这决定了您获得多少个单元格。你给的数字太高了。这只是一个理论计算，它让我想起了谷歌地图四叉树上的 1:1。

此外，了解您的应用程序需要哪种类型的四叉树也很重要：

点四叉树、区域四叉树（边界框）、线四叉树。

如果您知道 java 中任何现有的 Quadtree 实现。请发表评论，或编辑此答案。

此外，您无法实施一个适用于所有解决方案的解决方案。
你必须知道你将支持多少元素。不等于预期最大值的理论最大值不是一个好方法。

您必须知道，因为您必须决定是将其存储在主存储器还是磁盘上，这也会影响四叉树的结构。“ABCD”解决方案适用于从磁盘动态加载。

谷歌方法将图像存储在四叉树中，这与您要存储的点不同，所以我怀疑您的计算是否现实。

如果你想存储世界上所有国家的所有街道，你可以估计这个数字，因为点的数量是已知的（OpenStreetMap、TomTom (Teelatlas) 或 (Nokia Maps) Navteq.

如果您意识到必须将四叉树存储在磁盘上，那么可能大小是开放的，并且仅受磁盘空间的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:44:36.293

我认为将四叉**树**实现为树会给你带来更好的结果。无论如何，实际上在 HashMap 中实现这么大的数据库是一个坏主意。因为如果你有很多冲突，HashMap 的性能会严重下降。

显然，您确切地知道您拥有多少数据。在这种情况下，HashMap 是完全多余的。HashMap 适用于您不知道有多少数据的情况。但是在这种情况下，您知道树的每个节点都有四个元素。那么，为什么还要费心使用 HashMap。？

此外，您的表显然至少有 4GB 大。在大多数系统上，这几乎不适合您的记忆。既然还有 Java VM 开销，为什么要把它存储在内存中呢？最好找到在磁盘上运行良好的数据结构。一种用于空间数据的数据结构（我假设您拥有，因为您使用的是四叉树），是[R-Tree](http://en.wikipedia.org/wiki/R-tree)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:44:44.343

哇，我们在这里一下子得到了许多概念。首先，你想达到什么目的？存储四叉树？细胞矩阵？哈希查找？

如果你想要一个四叉树，为什么要使用哈希映射？您知道每个节点最多可以有 4 个子节点。哈希映射对于需要快速查找的任意数量的键值映射很有用。如果您只有 4 个，那么哈希可能甚至都不重要。此外，虽然您可以嵌套地图，但它有点笨拙。您最好使用一些数据结构或编写自己的数据结构。

另外，你想用四叉树达到什么目的？快速查找矩阵中的单元格？一些坐标映射功能可能会更好地为您服务。

最后，我并不太担心哈希图中的节点数量，因为我只是担心数量本身。即使每个单元一个字节，65536² 个单元最终也会成为 4 GiB 的内存。

我认为最好一直回到“我对这些数据的目标是什么”这个问题，然后找出哪些数据结构可以帮助您解决这个问题（牢记查找等要求），同时设法适应它在记忆中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T02:21:32.187

出于空间和速度的原因，绝对使用直接链接的节点。

有了这么大的数据，我会完全避免使用 Java。您将不断受到垃圾收集器的摆布。选择更接近金属的语言：C 或 C++、Pascal/Delphi、Ada 等。

将四个子指针放在一个数组中，这样您就可以将叶子称为 2 位索引的打包数组（使用 Ada 的一个很好的理由，它可以让您定义这些东西，而无需任何摆弄）。我猜这是莫顿测序。我不知道那个词。

这种索引子项的方法本身就是避免使用 Java 的一个原因。在节点类实例中包含子数组将花费您一个指针加上一个数组大小字段：每个节点 8 或 16 个字节，这在某些其他语言中是不需要的。有 40 亿个细胞，这已经很多了。

事实上，你应该做数学。如果您使用隐式叶单元，您仍然有 10 亿个节点要表示。如果您使用 32 位索引来引用它们（以节省内存而不是 64 位指针），则每个节点的最小值为 16 个字节。说节点属性只有 4 个字节。那么即使*没有任何*Java 开销，你也有 20 GB 的空间来存储一棵完整的树。

最好有一个良好的 RAM 预算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T12:03:12.160

确实，大多数典型的四叉树将简单地使用具有四个子节点指针的节点并遍历它，而没有提及哈希图。但是，也可以编写一种高效的四叉树式空间索引方法，将其所有节点存储在一个大哈希图中。

好处是通过使用 Morton 序列（或另一个类似生成的值）作为键，您只需一个指针取消引用即可检索任何级别的节点。

在“传统”四叉树实现中，由于在查找节点时重复指针取消引用，我们会出现缓存未命中，这成为主要瓶颈。因此，如果编码坐标空间和获得哈希的成本低于沿搜索路径取消引用节点指针的成本，这样的实现可能会更快。特别是如果地图非常深（具有需要高精度的稀疏位置）。

您实际上并不需要 Morton 序列，并且在执行此操作时几乎不需要将其视为四叉树。一个非常简单的示例实现：

为了检索某个级别的四边形，请使用`{ x, y, level }`作为 hashmap 键，其中 x 和 y 被量化到该级别。如果您在同一个地图中存储多个级别，则只需在键中包含该级别。

这是否仍然是四叉树还有待讨论，但功能是相同的。

# excel - Excel-VBA 从 Outlook AddressList 中获取筛选的集合

> ID：14382557
> 
> 赞同：4
> 
> 时间：2013-01-17T15:33:41.527
> 
> 标签：excel, outlook, vba

**问题：** 在我看来，[AddressList](http://msdn.microsoft.com/en-us/library/office/aa210890%28v=office.11%29.aspx)没有内置过滤器功能，例如[C# DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.100%29.aspx) (DatTableObject.Select( *filter criteria* )，我正在寻找一种方法来做到这一点。

我正在访问的全球地址列表有大约一百万个条目，我需要搜索它多达 1000 次。

我正在使用交换用户名查找人们的电子邮件，使用以下代码：

```
Set olApp = CreateObject("Outlook.Application")
            Set myNamespace = olApp.GetNamespace("MAPI")
            Set aList = myNamespace.AddressLists.Item("Global Address List")
            Set aEntry = aList.AddressEntries("" + ExchangeName + "") 
            Set exUser = aEntry.GetExchangeUser 
```

但它只检索我一个 AddressEntry，当我有几个具有相同 Exchange 名称的人时，这是一个问题 - 经常发生。

**问题：**当我在 Outlook 中搜索全局地址列表时，所有内容都按字母顺序排序并且速度很快，所有匹配项都以我输入的字符串开头。如何在 VBA 中获得类似的集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-22T04:02:49.267

`AddressEntries`对象是对象的集合`AddressEntry`。
当您按原样直接索引到`AddressEntries`集合中时，您会根据提供的参数返回*单个对象。* 该参数可以是索引号，也可以是项目的默认属性。`AddressEntry``Index``Index`

由于`AddressEntry`项目的默认属性是`.Name`属性，因此返回集合中与该`.Name`属性匹配的第一个项目。

* * *

如果要返回`AddressEntry`集合中与属性匹配的所有对象，`.Name`则需要遍历集合。

现在，在 .Net 中，您可以使用 迭代集合`For...Next`，我相信您也可以在 VBA 中执行此操作，但我无法立即回忆。例如：

```
Set olApp = CreateObject("Outlook.Application")
            Set myNamespace = olApp.GetNamespace("MAPI")
            Set aList = myNamespace.AddressLists.Item("Global Address List")
            Set aEntries = aList.AddressEntries
            For each aEntry in aEntries
                if aEntry.Name="" + ExchangeName + "" Then
                    'Do something with aEntry object
                End If
            Next 
```

如果由于某种原因不起作用，您可以使用`GetFirst`and`GetNext`方法遍历集合。
例如：

```
Set olApp = CreateObject("Outlook.Application")
            Set myNamespace = olApp.GetNamespace("MAPI")
            Set aList = myNamespace.AddressLists.Item("Global Address List")
            Set aEntries = aList.AddressEntries
            Set aEntry = aEntries.GetFirst
            Do While Not aEntry is Nothing
                if aEntry.Name="" + ExchangeName + "" Then
                    'Do something with aEntry object
                End If
                Set aEntry = aEntries.GetNext
            Loop 
```

* * *

至于按字母顺序排序，请查看[Sort Method](https://msdn.microsoft.com/en-us/library/office/aa210304(v=office.11).aspx)。

* * *

就构建功能而言

> ...我会看到以我输入的字符串开头的所有匹配项。

我不确定你想如何“呈现”匹配项，或者你想在哪里输入字符串。但一般的想法是创建一个接受输入参数（例如`"MatchName" As String`）的函数并执行像上面这样的循环以查找该字符串上您想要查看的任何属性的所有匹配项，然后您将返回一个数组或其他内容您可以使用它来“呈现”信息。

如果您想让它动态化，以便“在您键入时”更新列表，您可以从`KeyPress`事件中运行更新过程。为了在键入单词时不遍历整个集合，您可能希望存储数组，然后在键入每个附加字母时，您可以遍历该数组并删除不匹配项（缩小结果）。在此之前，您可能需要进行某种检查以查看是否删除了一个字母（例如检查文本框中字符串的长度），这会告诉您的程序重新运行对`AddressEntries`集合的检查（扩大结果）。

无论如何，这是你可以做到的一种方式的一般想法。

# validation - Spring 的 PayloadValidatingInterceptor 评估 XML（不正确）无效

> ID：14382565
> 
> 赞同：2
> 
> 时间：2013-01-17T15:34:15.460
> 
> 标签：validation, xsd, spring-ws

我正在使用 Sping-WS (2.1) 开发一个 Spring 项目。

使用 PayloadValidatingInterceptor 我们通过 Spring Mock 或soapUI 发送的消息被评为无效。

我们多次检查了 XSD，我们确信数据和架构是正确的。我使用 springframework.xml-validator 引擎和 javax.xml.validation 类在我们的 SpringJUnit4ClassRunner 内部实现了两个测试用例，以根据模式验证 WS 外部的有效负载。在那里它们是有效的。

有谁知道为什么 WS 内部的验证行为与手动验证不同的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:43:06.277

我也遇到了一些问题`PayloadValidatingInterceptor`。根据我[在此处](http://blog.espenberntsen.net/tag/exception-handling/)阅读的内容，我创建了一个简单的替代方案。有时拦截器不会按预期工作 - 使其`StringReader`基于而不是`String`基于解决我的问题。也许这也有助于解决您的问题！

* * *

要详细说明那里给出的解决方案，您可以用这样的代理类替换拦截器：

```
import java.io.StringReader;
import java.io.StringWriter;

import org.springframework.ws.client.WebServiceTransformerException;
import org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor;

import javax.xml.transform.OutputKeys;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

import org.springframework.ws.WebServiceMessage;

public class PayloadValidatingInterceptorWithSourceFix extends
        PayloadValidatingInterceptor {

    @Override
    protected Source getValidationRequestSource(WebServiceMessage request) {
        return transformSourceToStreamSourceWithStringReader(request
                .getPayloadSource());
    }

    @Override
    protected Source getValidationResponseSource(WebServiceMessage response) {
        return transformSourceToStreamSourceWithStringReader(response
                .getPayloadSource());
    }

    Source transformSourceToStreamSourceWithStringReader(
            Source notValidatableSource) {
        final Source source;
        try {
            Transformer transformer = TransformerFactory.newInstance()
                    .newTransformer();

            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,
                    "yes");
            transformer.setOutputProperty(OutputKeys.INDENT, "no");
            StringWriter writer = new StringWriter();
            transformer.transform(notValidatableSource,
                    new StreamResult(writer));

            String transformed = writer.toString();
            StringReader reader = new StringReader(transformed);
            source = new StreamSource(reader);

        } catch (TransformerException transformerException) {
            throw new WebServiceTransformerException(
                    "Could not convert the source to a StreamSource with a StringReader",
                    transformerException);
        }

        return source;
    }
} 
```

并像使用它一样

```
<bean id="payloadValidatingInterceptorWithSourceFix"
    class="path.to.your.PayloadValidatingInterceptorWithSourceFix">
    <property name="schema"
        value="file:WebContent/WEB-INF/schemas/account-balance-service.xsd" />
    <property name="validateRequest" value="true" />
    <property name="validateResponse" value="true" />
</bean> 
```

# javascript - 我的 javascript 代码没有按正确的顺序执行

> ID：14382567
> 
> 赞同：1
> 
> 时间：2013-01-17T15:34:18.583
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [你如何让 javascript 代码*按顺序执行*](https://stackoverflow.com/questions/2637626/how-do-you-make-javascript-code-execute-in-order)

```
var cek = false;

function checkForm()
{
    var user = document.forms["LoginForm"]["user"].value;
    var pwd = document.forms["LoginForm"]["pwd"].value;
    AJAXfunc("checkidpass.php?id="+user+"&pass="+pwd,function()
    {
        if ((xmlhttp.readyState == 4) && (xmlhttp.status == 200))
        {
            $("#LoginRes").html(xmlhttp.responseText);
            if (xmlhttp.responseText == "")
                cek = true;
        }
    }); //---> 1

    return cek; //---> 2
} 
```

我想问为什么“返回cek；” （第 2 部分）在 AJAXfunc（第 1 部分）之前执行？我想知道如何让它以正确的顺序执行。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:40:03.280

要了解您的问题，您需要了解**异步**方法。一个简单的谷歌会给你大量的阅读材料。我建议从这里开始：

[精通 Ajax，第 2 部分：使用 JavaScript 和 Ajax 发出异步请求](http://www.ibm.com/developerworks/web/library/wa-ajaxintro2/)

**提示：**你现在所做的**永远不会**奏效——除非你选择使它成为一个同步函数（不推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:42:07.783

那是因为 AJAX 调用是异步的。

`AJAXfunc`调用在语句之前执行，但稍后调用您在调用中`return`提供的匿名函数。`AJAXfunc`

使回调在`return`语句之前运行的方法是使 AJAX 调用同步。但是，这通常不是一个好主意，因为这会使浏览器在等待响应时冻结。

处理这个问题的常用方法是在`checkForm`函数中使用回调：

```
function checkForm(callback) {
  var user = document.forms["LoginForm"]["user"].value;
  var pwd = document.forms["LoginForm"]["pwd"].value;
  AJAXfunc("checkidpass.php?id="+user+"&pass="+pwd,function() {
    if ((xmlhttp.readyState == 4) && (xmlhttp.status == 200)) {
      $("#LoginRes").html(xmlhttp.responseText);
      callback(xmlhttp.responseText == "");
    }
  });
} 
```

用法：

```
checkForm(function(cek) {
  if (cek) {
    // ok
  } else {
    // not ok
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:42:38.633

Javascript 是异步的，因此像您这样的异步功能`AJAXfunc`在程序完成之前不会阻塞您的程序。这就是为什么在 javascript 中大量使用事件和回调的原因。

例如，您的带有回调的代码将类似于：

```
function checkForm(callback)
{
    var user = document.forms["LoginForm"]["user"].value;
    var pwd = document.forms["LoginForm"]["pwd"].value;
    AJAXfunc("checkidpass.php?id="+user+"&pass="+pwd,function()
    {
        if ((xmlhttp.readyState == 4) && (xmlhttp.status == 200))
        {
            $("#LoginRes").html(xmlhttp.responseText);
            if (xmlhttp.responseText == "")
                return callback(true);
        }
        return callback(false);
    }); 
}

checkForm( function (result) { 
    var cek = result;
    // Rest of your code for manipulating DOM or something else where you need cek.
} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:44:34.227

您最好重新构建代码以在收到响应时触发回调。

IE。1\. 使 checkForm 有一个回调参数 2\. 使用结果激活该回调 3\. 将其余代码放在回调中，而不是跟随函数的返回

例如：

```
// before (wrong):
result = checkForm();
handleResult1(result);
handleResult2(result);

// after (correct):
checkForm(function(result) {
    handleResult1(result);
    handleResult2(result);
} 
```

# tomcat - 更改主机公共 IP 的 localhost 时无法访问 servlet

> ID：14382569
> 
> 赞同：0
> 
> 时间：2013-01-17T15:34:23.333
> 
> 标签：tomcat, servlets

我正在使用 Apache Tomcat 7.0.27。我只是在测试[这个](http://www.vogella.com/articles/EclipseWTP/article.html)servlet 示例教程，当我在 Eclipse 上启动它时它可以正常运行，它使用这个 URL：localhost/xxx/TestServlet。但是，如果我用 mi（公共）IP 或我为其注册的域更改 localhost，它会失败。无论我尝试使用 Eclipse 嵌入式浏览器还是独立浏览器。我也尝试过部署 WAR，但它都不起作用。

我发现了一些关于使用连接器和主机别名调整 Apache 安装上的 server.xml 文件的想法，但我似乎无法使其工作。我不知道还有什么可以尝试的，这就是我发布这个的原因。

如果它有助于解决我的问题，这里是我正在使用的 server.xml：

```
<?xml version='1.0' encoding='utf-8'?>

<Server port="8005" shutdown="SHUTDOWN">
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <Listener className="org.apache.catalina.core.JasperListener" />
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />

  <GlobalNamingResources>
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <Service name="Catalina">
    <Connector port="80" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />

    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <Engine name="Catalina" defaultHost="localhost">

      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"/>
      </Realm>

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />

      </Host>
    </Engine>
  </Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:40:42.473

您需要在`<Host>`示例中添加域：

```
 <Host name="localhost"  appBase="webapps"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false">
    <Alias>domain.com</Alias>
    <Alias>www.domain.com</Alias>

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="localhost_access_log." suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" />

  </Host> 
```

通常，它会成功！

# wpf - 带有 Return 的 TextBox 中的新行

> ID：14382570
> 
> 赞同：0
> 
> 时间：2013-01-17T15:34:26.837
> 
> 标签：wpf, xaml

我有一个文本框，但如果我按 RETURN，我就不会换行。有什么特殊的命令吗？谷歌返回带有 TextWrapping 的结果，但这不是我想要的

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:45:49.327

如果要在运行时编辑文本，则必须使用 TextBox 而不是 TextBlock。

多行文本框：

```
<TextBox TextWrapping="Wrap" AcceptsReturn="True" /> 
```

您还可以使用Extended [WPF Toolkit中的](http://wpftoolkit.codeplex.com/)[RichTextBox](http://wpftoolkit.codeplex.com/wikipage?title=RichTextBox&referringTitle=Home)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:53:12.980

假设您的意思`TextBox`是 TextBlock 而不是因为它不可写，您可以通过设置来实现`AcceptReturns = "true"`

# postgresql - 在 PostgreSQL 中基于瞬时时间前后 2 分钟创建每小时平均值

> ID：14382574
> 
> 赞同：0
> 
> 时间：2013-01-17T15:34:31.473
> 
> 标签：postgresql, average, temporal-database

我有一个采样频率为 2 分钟的时态数据库，我想将瞬时每小时值提取为每天 00:00、01:00、02、... 23。
所以，我想从平均值中得到平均值：

HH-1:58、HH:00 和 HH:02 = HH 点钟的平均值

或者

HH-1:59、HH:01 和 HH:03 = HH 点钟的平均值

样本数据1：

```
9/28/2007 23:51 -1.68
9/28/2007 23:53 -1.76
9/28/2007 23:55 -1.96
9/28/2007 23:57 -2.02
9/28/2007 23:59 -1.92
9/29/2007 0:01  -1.64
9/29/2007 0:03  -1.76
9/29/2007 0:05  -1.83
9/29/2007 0:07  -1.86
9/29/2007 0:09  -1.94 
```

预期结果：

对于 00 午夜：

(-1.92+-1.64+-1.76)/3

样本数据2：

```
9/28/2007 23:54 -1.44
9/28/2007 23:56 -1.58
9/28/2007 23:58 -2.01
9/29/2007 0:00  -1.52
9/29/2007 0:02  -1.48
9/29/2007 0:04  -1.46 
```

预期成绩：

(-2.01+-1.52+-1.48)/3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:17:53.843

```
SELECT  hr, ts, aval
FROM    (
        SELECT  *, ROW_NUMBER() OVER (PARTITION BY hr ORDER BY ts) rn
        FROM    (
                SELECT  *,
                        DATE_TRUNC('hour', ts) AS hr,
                        AVG(value) OVER (ORDER BY ts ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING) AS aval
                FROM    mytable
                ) q
        ) q
WHERE   rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:11:06.460

PostgreSQL 的[窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)使涉及相邻行的任何事情都比以前简单得多。未尝试但应该大致正确：

```
select
  date_trunc('hour', newest_time) as average_time,
  (oldest_temp + middle_temp + newest_temp) / 3 as average_temp
from (
  select
    date_trunc('hour', sample_time) as average_time,
    lag(sample_time, 2) over w as oldest_time,
    lag(sample_time, 1) over w as middle_time,
    sample_time as newest_time,
    lag(sample_temp, 2) over w as oldest_temp,
    lag(sample_temp, 1) over w as middle_temp,
    sample_temp as newest_temp
  from
    samples
  window
    w as (order by sample_time)
) as s
where
  oldest_time = newest_time - '4 minutes'::interval and
  middle_time = newest_time - '2 minutes'::interval and
  extract(minute from newest_time) in (2, 3); 
```

我已在`where`条款中将此限制为您所描述的场景 - 最新值：02 或 :03，前 2 个值在 2 分钟和 4 分钟前。以防万一您有一些丢失的数据，否则会产生奇怪的结果，例如在更长的时间间隔内进行平均。

# c# - 返回肥皂信封缺失值

> ID：14382575
> 
> 赞同：1
> 
> 时间：2013-01-17T15:34:32.280
> 
> 标签：c#, soap, wsdl, generic-collections

我有一个 Soap WSDL，在我的应用程序中设置为指向 .asmx 文件的服务引用。我的响应肥皂信封有问题。我有一个集合对象，当它在我的接收代码上创建时，值就在那里。当我单步执行代码时，soap 信封现在是一个内存流并且即将被发送回调用客户端时，集合被填充。但是，再按一次 F10，我会带着一个空集合回到调用客户端。

这是我正在使用的课程的 WSDL：

```
 <complexType name="Step">
    <complexContent>
      <extension base="tns:APIObject">
        <sequence>
          <element name="StepType" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="Name" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="Description" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="Automation" minOccurs="0" type="tns:Automation" />
          <element name="Sequence" minOccurs="0" type="xsd:int" />
          <element name="Activities" minOccurs="0" maxOccurs="1">
            <complexType>
              <sequence>
                <element name="Activity" type="tns:AutomationActivity" minOccurs="0"    maxOccurs="unbounded" />
              </sequence>
            </complexType>
          </element>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="StepInstance">
    <complexContent>
      <extension base="tns:Step">
        <sequence>
          <element name="StepDefinition" type="tns:Step" minOccurs="0" />
          <element name="AutomationInstance" type="tns:AutomationInstance" minOccurs="0" />
          <element name="ActivityInstances" minOccurs="0">
            <complexType>
              <sequence>
                <element name="ActivityInstance" type="tns:AutomationActivityInstance" minOccurs="0" maxOccurs="unbounded" />
              </sequence>
            </complexType>
          </element>
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="AutomationActivity">
    <complexContent>
      <extension base="tns:APIObject">
        <sequence>
          <element name="Name" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="Description" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="IsActive" minOccurs="0" maxOccurs="1" type="xsd:boolean" />
          <element name="Definition" minOccurs="0" maxOccurs="1" type="tns:APIObject" />
          <element name="Automation" minOccurs="0" type="tns:Automation" />
          <element name="Step" minOccurs="0" type="tns:Step" />
          <element name="Sequence" minOccurs="0" type="xsd:int" />
          <element name="ActivityObject" minOccurs="0" type="tns:APIObject" />
        </sequence>
      </extension>
    </complexContent>
  </complexType>
  <complexType name="AutomationActivityInstance">
    <complexContent>
      <extension base="tns:AutomationActivity">
        <sequence>
          <element name="ActivityID" type="xsd:string" minOccurs="0" maxOccurs="1"></element>
          <element name="AutomationID" minOccurs="0" maxOccurs="1" type="xsd:string" />
          <element name="SequenceID" minOccurs="0" maxOccurs="1" type="xsd:int" />
          <element name="Status" minOccurs="0" maxOccurs="1" type="xsd:int" />
          <element name="StatusLastUpdate" minOccurs="0" maxOccurs="1" type="xsd:dateTime" />
          <element name="StatusMessage" type="xsd:string" minOccurs="0" />
          <element name="ActivityDefinition" type="tns:AutomationActivity" minOccurs="0" />
          <element name="AutomationInstance" type="tns:AutomationInstance" minOccurs="0" />
          <element name="StepInstance" type="tns:StepInstance" minOccurs="0" />
          <element name="ScheduledTime" minOccurs="0" maxOccurs="1" type="xsd:dateTime" />
          <element name="StartTime" minOccurs="0" maxOccurs="1" type="xsd:dateTime" />
          <element name="CompletedTime" minOccurs="0" maxOccurs="1" type="xsd:dateTime" />
        </sequence>
      </extension>
    </complexContent>
  </complexType> 
```

这是序列化和转换为 MemoryStream 之前的响应信封

```
 <soap:Body xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<RetrieveResponseMsg xmlns="">   <OverallStatus>MoreDataAvailable</OverallStatus>
<RequestID>0216f0bb-9d4a-455f-8517-5856f2e6f65d</RequestID>
<Results xsi:type="AutomationInstance" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<PartnerKey xsi:nil="true" />
<CreatedDate>2013-01-11T12:18:20.453</CreatedDate>
<ModifiedDate>2013-01-11T12:18:25.27</ModifiedDate>
<ObjectID xsi:nil="true" />
<CustomerKey>0aeb9113-14ac-f480-cb35-efaf4439dd34</CustomerKey>
<IsPlatformObject>true</IsPlatformObject>
<Name></Name>
<Description/>
<InteractionObjectID>7c9a50f8-645d-48f2-a023-9aea4a31e294</InteractionObjectID>
<IsActive>false</IsActive>
<ScheduledTime>2013-01-11T12:01:53.543</ScheduledTime>
<AutomationID>7c9a50f8-645d-48f2-a023-9aea4a31e294</AutomationID>
<StepInstances>
    <StepInstance>
        <PartnerKey xsi:nil="true" />
        <ObjectID xsi:nil="true" />
        <StepDefinition>
            <PartnerKey xsi:nil="true" />
            <ObjectID xsi:nil="true" />
            <Name />
            <Description />
            <Sequence>0</Sequence>
            <Activities><Activity>
            <PartnerKeyxsi:nil="true"/>
            <PartnerProperties>     
                <Name>PartnerApiObjectTypeId</Name>  <Value>42</Value>  </PartnerProperties>
            <CreatedDate>2013-01-11T12:00:20.767</CreatedDate>
            <ObjectID>9e34164a-5089-4fe3-aee3-33f0a472de6f</ObjectID>
            <CustomerKey>ebf044ef-8266-433f-b424-cc0aeb3735bd</CustomerKey>
            <Name>test</Name>
            <Description />
            <IsActive>true</IsActive>
            </Activity></Activities>
        </StepDefinition>
    </StepInstance>
</StepInstances>
<StartTime>2013-01-11T12:18:20.447</StartTime>
<CompletedTime>2013-01-11T12:18:25.27</CompletedTime>
</Results>
</RetrieveResponseMsg>
    </soap:Body> 
```

StepInstances 是关注我的问题的集合。如您所见，它按预期填充。

这是转换回信封的 MemoryStream

```
 <?xml version=\"1.0\" encoding=\"utf-8\"?>
<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">    
<soap:Header>                           <wsa:Action>RetrieveResponse</wsa:Action>
<wsa:MessageID>urn:uuid:a470ddfb-e032-4291-90e2-ce8ffb2b6a12</wsa:MessageID>
<wsa:RelatesTo>urn:uuid:4b5f3202-2207-4691-b33c-36f8a8ff799f</wsa:RelatesTo>
<wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
<wsse:Security>     
<wsu:Timestampwsu:Id=\"Timestamp-4464e3e0-c473-45e8-865f-21b8a0134927\">
<wsu:Created>2013-01-16T22:04:18Z</wsu:Created>
<wsu:Expires>2013-01-16T22:09:18Z</wsu:Expires>
</wsu:Timestamp>
</wsse:Security>
</soap:Header>
<soap:Body>
<RetrieveResponseMsg xmlns=\"">
<OverallStatus>MoreDataAvailable</OverallStatus>
<RequestID>e25b58e1-5ad7-4cf6-862b-429354f92aca</RequestID>
<Results xsi:type=\"AutomationInstance\">
<PartnerKey xsi:nil=\"true\" />
<CreatedDate>2013-01-11T12:18:20.453</CreatedDate>
<ModifiedDate>2013-01-11T12:18:25.27</ModifiedDate>
<ObjectID xsi:nil=\"true\" />
<CustomerKey>0aeb9113-14ac-f480-cb35-efaf4439dd34</CustomerKey>
<IsPlatformObject>true</IsPlatformObject>
<Name></Name>
<Description/>
<InteractionObjectID>7c9a50f8-645d-48f2-a023-9aea4a31e294</InteractionObjectID>
<IsActive>false</IsActive>
<ScheduledTime>2013-01-11T12:01:53.543</ScheduledTime>
<AutomationID>7c9a50f8-645d-48f2-a023-9aea4a31e294</AutomationID>
<StepInstances>
    <StepInstance>
        <PartnerKey xsi:nil=\"true\" />
        <ObjectID xsi:nil=\"true\" />
        <StepDefinition>
            <PartnerKey xsi:nil=\"true\" />
            <ObjectID xsi:nil=\"true\" />
            <Name />
            <Description />
            <Sequence>0</Sequence>
            <Activities><Activity>
            <PartnerKey xsi:nil=\"true\" />
            <PartnerProperties>
            <Name>PartnerApiObjectTypeId</Name><Value>42</Value>
            </PartnerProperties>
            <CreatedDate>2013-01-11T12:00:20.767</CreatedDate>
            <ObjectID>9e34164a-5089-4fe3-aee3-33f0a472de6f</ObjectID>
            <CustomerKey>ebf044ef-8266-433f-b424-cc0aeb3735bd</CustomerKey>
            <Name>test</Name>
            <Description/>
            <IsActive>true</IsActive></Activity></Activities>       
            </StepDefinition>
            </StepInstance>
            </StepInstances>
            <StartTime>2013-01-11T12:18:20.447</StartTime>
            <CompletedTime>2013-01-11T12:18:25.27</CompletedTime>
            </Results>
    </RetrieveResponseMsg>
</soap:Body> 
```

在它进入 MemoryStream 之后，它会被发送回调用客户端。我在其中查看对象并且 StepInstances 为空。

另请注意，我发布的 WSDL 是一部分，主要是违规类。返回的信封是一个更大的类，其中包含这些类，并且太多而无法发布。

但是我从接收客户端进入的最后一个代码填充了内存流。我击中的下一个 f10 我带着我的对象回到了调用客户端，并且集合为空。

希望这是有道理的，有人可以对此有所了解。您需要的任何更多数据我都会尝试发布。

另外值得注意的是，我只能访问 .wsdl 文件，而不是实际的 WCF 项目或类。

为了配置我的服务参考：对于集合类型，我选择了 Generic.List，而字典类型我选择了 Generic.Dictionary。

更新： wsdl 中的 APIObject 看起来像这样

```
 <complexType name="APIObject">
    <sequence>
      <element name="Client" type="tns:ClientID" minOccurs="0" maxOccurs="1"></element>
      <element name="PartnerKey" type="xsd:string" nillable="true" minOccurs="0" maxOccurs="1"></element>
      <element name="PartnerProperties" type="tns:APIProperty" minOccurs="0" maxOccurs="unbounded"></element>
      <element name="CreatedDate" type="xsd:dateTime" minOccurs="0" maxOccurs="1"></element>
      <element name="ModifiedDate" type="xsd:dateTime" minOccurs="0" maxOccurs="1" nillable="true"></element>
      <element name="ID" type="xsd:int" minOccurs="0" maxOccurs="1"></element>
      <element name="ObjectID" type="xsd:string" nillable="true" minOccurs="0" maxOccurs="1"></element>
      <element name="CustomerKey" type="xsd:string" minOccurs="0" maxOccurs="1"></element>
      <element name="Owner" type="tns:Owner" minOccurs="0" maxOccurs="1"></element>
      <element name="CorrelationID" minOccurs="0" type="xsd:string" />
      <element name="ObjectState" type="xsd:string" minOccurs="0" maxOccurs="1"></element>
      <element name="IsPlatformObject" minOccurs="0" maxOccurs="1" type="xsd:boolean" />
    </sequence>
  </complexType> 
```

更新 #2：我误以为它是 WCF，我只能访问 .wsdl 文件，编译后我将服务引用指向 .asmx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:54:34.397

当被序列化到 SOAP 响应中的原始类是直接对象引用并且不使用 Getter/Setter 属性时，我已经看到了与您描述的各种 SOAP 客户端应用程序有关的问题。因此，如果您正在执行以下操作：

```
[Serializable()]
public List<StepInstance> StepInstances = new List<StepInstance>;

...

[Serializable()]
public class StepInstance {
    public string PartnerKey = "";
    public string ObjectID = "";
} 
```

...这有时似乎不适用于某些类型的客户。相反，请确保对象使用公共 getter/setter 方法，并且在客户端上反序列化对象时似乎不会发生的问题很可能会消失。不知道为什么会这样，但似乎对某些类型的 SOAP 客户端有所不同。所以我们上面的例子可能看起来更像：

```
[Serializable()]
public List<StepInstance> StepInstances { get { return mStepInstances; } { set { mStepInstances = value; } }

private List<StepInstance> mStepInstances = new List<StepInstance>;

...

[Serializable()]
public class StepInstance {
    private string msPartnerKey = "";
    private string msObjectID = "";

    public string PartnerKey { get { return msPartnerKey; } set { msPartnerKey = value; } }
    public string ObjectID { get { return msObjectID; } set { msObjectID = value; } }
} 
```

# java - 条件错误

> ID：14382576
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:34:32.903
> 
> 标签：java, if-statement, conditional-statements

我正在尝试检查是否 value 为 null 然后不显示消息并调用构造函数，我做了以下方式但它不起作用。

```
if (title == null) {

        JOptionPane.showMessageDialog(null, "Please Enter All Values");
        new InfoFrame();

    } 
    else {

        try {
            System.out.println(title+""+date);
            System.out.println(title+""+date);

            s.execute("INSERT INTO task ([title],[deadline],[priority],[time]) VALUES ('"+ title+ "','"+ date+ "','"+ priority  + "','"+ time + "')");
            JOptionPane.showMessageDialog(null,"Your Task has been added to the Database:");
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } 
```

*编辑了`var Title`类似愚蠢的命名约定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:45:38.463

```
if (Title.isEmpty()) { 
```

会成功的。

如果你想同时检查 null 或 empty

```
if (Title == null || Title.isEmpty()) { 
```

最好用简单的字母开始你的变量。

# powershell - Import-Module 中的相对路径

> ID：14382579
> 
> 赞同：49
> 
> 时间：2013-01-17T15:34:36.167
> 
> 标签：powershell, powershell-2.0

我的目录结构如下所示：

```
C:\TFS\MasterScript\Script1.ps1
C:\TFS\ChildScript\Script2.ps1 
```

我想要做的是在 Script2.ps1 中指定相对路径以在目录hirearchy 中查找 Script1.ps1。

这是我在 Script2.ps1 中尝试过的：

```
Import-Module ../MasterScript/Script1.ps1 
```

但它不起作用，并说它找不到模块。

如果我说`Import-Module C:\TFS\MasterScript\Script1.ps1`，它工作正常。我在这里想念什么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-17T16:06:53.290

当您使用相对路径时，它基于当前位置（通过 Get-Location 获得）而不是脚本的位置。试试这个：

```
$ScriptDir = Split-Path -parent $MyInvocation.MyCommand.Path
Import-Module $ScriptDir\..\MasterScript\Script.ps1 
```

在 PowerShell v3 中，您可以在脚本中使用自动变量`$PSScriptRoot`将其简化为：

```
# PowerShell v3 or higher

#requires -Version 3.0
Import-Module $PSScriptRoot\..\MasterScript\Script.ps1 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-12-27T17:13:45.390

新的方法是`$PSScriptRoot`

```
Import-Module $PSScriptRoot\Script1.ps1 
```

漂亮的小班轮。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-20T11:08:55.677

这对我有用：

```
$selfPath = (Get-Item -Path "." -Verbose).FullName
$dllRelativePath = "........"
$dllAbsolutePath = Join-Path $selfPath $dllRelativePath
Import-Module $dllAbsolutePath 
```

# wpf - 绑定路径中的括号是什么意思？

> ID：14382581
> 
> 赞同：10
> 
> 时间：2013-01-17T15:34:38.263
> 
> 标签：wpf, xaml, data-binding, syntax, parentheses

最近我在 MSDN 上阅读了“数据绑定概述”文章，并且有这样的示例代码：

```
<TextBox.ToolTip>
  <Binding RelativeSource="{RelativeSource Self}" Path="(Validation.Errors)[0].ErrorContent"/>
</TextBox.ToolTip> 
```

我知道这`{}`意味着标记扩展，但`()`这里的括号是什么意思？有人分享解释这种语法的链接会很好。谢谢！

```
Path="(Validation.Errors)[0].ErrorContent" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T15:47:18.137

括号是`()`指附加属性。

[绑定到附加属性](http://geekswithblogs.net/NewThingsILearned/archive/2008/01/15/binding-to-an-attached-property.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T15:48:46.867

引用[MSDN 库](http://msdn.microsoft.com/en-us/library/ms742451.aspx#singleattached)（我在这里引用 MSDN 是因为我写得再好不过了）：

> 此语法通常用于以下情况之一：
> 
> *   该路径是在 XAML 中指定的，其样式或模板中没有指定的`TargetType`. 合格的用法通常对除此之外的情况无效，因为在非样式、非模板情况下，属性存在于实例上，而不是类型上。
> *   该物业为附属物业。
> *   您正在绑定到静态属性。
> 
> 要用作情节提要目标，指定为的属性`propertyName`必须是`DependencyProperty`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-17T15:45:43.243

`(Validation.Errors)``Errors`引用类中的附加属性`Validation`。由于绑定有一个`RelativeSource = Self`，它将查找该附加属性相对于 TextBox 本身的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:45:30.867

下面这个 msdn 链接巧妙地解释了验证规则和序列以及如何使用。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.errors.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.errors.aspx)

# java - 在 Struts 1.1 中的 jsp 上隐藏一行

> ID：14382593
> 
> 赞同：0
> 
> 时间：2013-01-17T15:35:27.437
> 
> 标签：java, jsp, struts

鉴于以下情况，

```
<logic:notEqual name="ABCForm" property="externalFactor" value="true">
    <tr>
    <td width="20%" class="label"  height="14"><bean:message key="factorDefault"/></td>
    <td class="label">
        <html:radio property="defaultState" value="Y"><bean:message key="Yes"/></html:radio>
        <html:radio property="defaultState" value="N"><bean:message key="No"/></html:radio>
    </td>
    </tr>
  </logic:notEqual> 
```

如何在不删除数据库中与该行关联的数据的情况下始终隐藏页面上的这一行？

我尝试替换`logic:notEqual`为该`logic:empty`div 的 jsp 为空白。我试过简单地删除整个代码块，当然可以。我只是担心这是否会影响数据库，或者是否有任何页面依赖于与代码片段关联的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:39:51.017

Mr.gabybaby 你只做一件事...

在您的数据库表中，您添加另一列`status` ，默认`status`值是`active`如果任何用户想通过您的 JSP 删除任何记录，只需更改该记录`status`= `inactive`..

你应该只显示`active`jsp中的记录...

我认为这是您要求的解决方案

# java - 如何使用套接字编程向另一个 android 手机发送消息？

> ID：14382596
> 
> 赞同：3
> 
> 时间：2013-01-17T15:35:54.883
> 
> 标签：java, android, sockets

我正在使用 API 10 并尝试开发一个应用程序，用于使用套接字编程将文本和多媒体消息发送到另一个 android 手机。我应该怎么做才能获取手机的IP地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-23T08:26:34.843

让我们先探索这个概念..

## 开始了 ：

> 我应该怎么做才能获取手机的IP地址？

哪个IP地址...？哪个在一段时间内不断变化，哪个不保存任何静态 IP...？你必须阅读和学习..

1.  网络系统
2.  操作系统
3.  数据结构
4.  数据库系统
5.  软件开发生命周期和范式
6.  信息系统
7.  面向过程的语言
8.  OOPS 语言

然后，您必须具有分析和推理事物必须如何开发以及如何与上述知识一起实施的能力。

互联网上的每个人都`device`可能是移动`phone`的或`computer`持有动态 IP 地址。

> 我正在使用 API 10 ..??

这并不重要你用什么..!!

> 尝试开发一个应用程序，用于使用套接字编程将文本和多媒体消息发送到另一个 android 手机。

套接字编程..!! 请先做一些基本的`socket programming`实现一些示例代码。

> 我都做了... :(

然后是时候把所有的书都重新摆上桌面来重新理清概念了，因为我们什么都不知道……或者推理能力很差……！！

## 事情怎么样 ：

让我们以任何主要的社交媒体为例，`whatsapp`不仅是whatsapp，而且它是每个开发人员都可以告诉您或遵循以开发您所说的内容的非常基本的概念。

1.  编程你的通过`app`与你的沟通`web-server``sockets`
2.  每个 App 用户都必须注册才能在服务器上创建帐户。
3.  如果任何用户发送消息将其保存到服务器上的帐户发送箱
4.  检查收件人是否在此网络服务器上有帐户？
5.  如果是，则将该消息复制到他的帐户收件箱中
6.  如果他在网络服务器上的帐户发生变化，则使应用程序通过套接字获取数据
7.  这些是可以通过一些技巧扩展到`IsSent`的基础知识`IsReceived`
8.  诡计..？通过用户在哪个屏幕上的应用程序获取用户数据？并将其发送到服务器。
9.  可以共享相同的数据以显示`IsSent`和`IsReceived`..!!

## 简而言之 ：

每个应用程序都执行套接字编程并与修复服务器通信。它具有固定的静态 IP 地址或 Web 服务器。作为不了解编程和软件工程基础知识的最终用户：

> 让两部手机彼此靠近并询问另一部...我已向您的手机发送了一条whatsapp消息..，看看它是否收到...？还没收到...？？？！！！让两部手机靠近 - 彼此..，这样它就会很快被发送和接收......哦......看......我说..让手机靠近以更快地接收消息..！！:)

# ios - 2 个开发人员可以在启用 APNS 的 iOS 应用上工作吗？

> ID：14382601
> 
> 赞同：0
> 
> 时间：2013-01-17T15:36:06.843
> 
> 标签：ios, apple-push-notifications

我和另一个开发人员正在开发一个带有 Apple Push Notification Service 的 iOS 应用程序。我们正在开发应用程序的单独分支，现在我已经完成了 APNS 的所有工作，我们正在尝试合并并让他将其构建到他的代码中。问题是 APNS 配置文件与我的帐户和设备相关联，因此当他编译和运行时，他没有有效的配置文件来执行 APNS。

是否有任何选项或解决方法可以与其他开发人员一起开发应用程序？我似乎找不到其他人试图这样做，所以我认为这要么真的很容易，要么不可能。我们都有个人开发账户，但我认为如果我们必须成立一家公司并重新购买团队开发账户只是为了一起开发一个应用程序，那就太疯狂了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:30:46.077

您必须在相同的配置文件中。两个设备也必须在其中。

如果您将设备添加到配置文件中，这有时不能直接工作，我已经体验过，您有时必须再次更新配置文件而不更改某些内容。

例如：

```
ProvisioningProfile_V1
your DeveloperAcc and your device

updating to ProvisioningProfile_V2
your DeveloperAcc and your device
other dev DeveloperAcc and his device

updating to ProvisioningProfile_V3 //(no changes)
your DeveloperAcc and your device
other dev DeveloperAcc and his device 
```

# xslt - xsl fo 页面大小/方向

> ID：14382603
> 
> 赞同：3
> 
> 时间：2013-01-17T15:36:12.757
> 
> 标签：xslt, pdf-generation, xsl-fo, documents

我正在设计一个将提供 pdf 输出的 xsl。我的 pdf 输出是横向格式。即使我按如下方式更改简单的页面主文件，我也无法获得横向格式的输出，

我的 pdf 输出的高度仍然大于宽度。

嗨 mzjn，我没有任何链接。附上预期和结果的 pdf 输出，![结果 pdf - 顺时针旋转](../Images/a4b138579a828e34ddf9e890f804714e.png) ![预期的](../Images/9e151e82c1ab183f270c380466b004b3.png)还需要知道如何使用边框图像。尝试作为区域主体的背景图像并失败。

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.1"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format"
exclude-result-prefixes="fo">
<xsl:output method="xml" version="1.0" omit-xml-declaration="no"
    indent="yes" />
<xsl:param name="versionParam" select="'1.0'" />
<xsl:template match="@*|node()">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
        <!-- Start of page layout -->
        <fo:layout-master-set>
            <fo:simple-page-master master-name="A4"
                page-width="8.27in" page-height="11.69in" margin-top="5mm"
                margin-bottom="5mm" margin-left="5mm" margin-right="5mm"
                reference-orientation="90">
                <fo:region-body margin-top=".5cm" margin-bottom=".5cm"
                    margin-left=".5cm" margin-right=".5cm">
                    <xsl:if test="isPreview='true'">
                        <xsl:attribute name="background-image">file:///<xsl:value-of
                            select="pdfimagepath" />Preview Only1.JPG</xsl:attribute>
                    </xsl:if>
                </fo:region-body>
                <fo:region-before extent="0mm" />
                <fo:region-after extent="0mm" />

            </fo:simple-page-master>
        </fo:layout-master-set>
        <!-- End of page layout -->

        <fo:page-sequence master-reference="A4">
            <fo:static-content flow-name="xsl-region-before">
                <fo:block>
                    <fo:leader></fo:leader>
                </fo:block>
                <fo:block text-align="right" font-size="9pt" font-weight="bold">
                    <xsl:value-of select="num" />
                </fo:block>
            </fo:static-content>
            <fo:static-content flow-name="xsl-region-after">
                <fo:block font-size="9pt" font-family="times" text-align="left">

                    <xsl:value-of select="xxx" />
                </fo:block>
            </fo:static-content>

            <fo:flow flow-name="xsl-region-body">
                <fo:block>
                    <fo:table table-layout="fixed" width="100%">
                        <fo:table-header>
                            <fo:table-row>
                                <fo:table-cell>
                                    <fo:block></fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-header>
                        <fo:table-body>
                            <fo:table-row>
                                <fo:table-cell width="100%">
                                    <fo:block text-align="center" padding-top="2pt">
                                        <fo:external-graphic content-height="85%"
                                            content-width="65%" scaling="uniform">
                                            <xsl:attribute name="src">
                                <xsl:value-of select="pdfimagepath" />LogoCert.jpg
                                </xsl:attribute>
                                        </fo:external-graphic>
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell width="100%">
                                    <fo:block text-align="center">
                                        <fo:external-graphic content-height="45%"
                                            content-width="55%" scaling="non-uniform">
                                            <xsl:attribute name="src">
                                    <xsl:value-of select="pdfimagepath" />title.jpg
                                    </xsl:attribute>
                                        </fo:external-graphic>
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell width="100%">
                                    <fo:block font-size="15.5pt" font-family="Arial"
                                        color="Black" text-align="center" padding-before="5pt"
                                        start-indent="10pt">
                        </fo:block>
                                    <fo:block font-size="15.5pt" font-family="Arial"
                                        color="Black" text-align="center" start-indent="5pt">xxxxxx:
                        </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell width="100%">
                                    <fo:block font-size="16.5pt" font-family="Arial"
                                        color="red" text-align="center" padding-before="8pt">
                                        <xsl:value-of select="custname" />

                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell width="100%">
                                    <fo:block font-size="13.5pt" font-family="Arial"
                                        color="black" text-align="center" padding-before="10pt"
                                        start-indent="10pt">
                                        <fo:inline background-color="yellow">xxxx</fo:inline>xxxx
                                    </fo:block>
                                    <fo:block font-size="13.5pt" font-family="Arial"
                                        color="black" text-align="center" start-indent="10pt"> xxxx
                        </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell padding-start="140pt" padding-end="140pt">
                                    <fo:block font-size="10pt" font-family="Arial" color="black"
                                        text-align="center" border-bottom="solid">
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell display-align="after"
                                    padding-after="12pt" padding-before="2pt">
                                    <fo:block font-size="15.5pt" font-family="Arial"
                                        color="black" text-align="center"> xxxx
                        </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell padding-start="160pt" padding-end="160pt">
                                    <fo:block font-size="10pt" font-family="Arial" color="black"
                                        text-align="center" border-bottom="solid">
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>

                            <fo:table-row>
                                <fo:table-cell padding-before="2pt"
                                    display-align="before">
                                    <fo:block font-size="15.5pt" font-family="Arial"
                                        color="black" text-align="center"> 
                                                </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell padding-before="10pt">
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center"> xxxx
                                                </fo:block>
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center">
                                                </fo:block>
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center"> 
                                                </fo:block>
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center"> 
                                                </fo:block>
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center">
                                                </fo:block>
                                    <fo:block font-size="8.5pt" font-family="Arial"
                                        color="black" text-align="center"> 
                                                </fo:block>
                                </fo:table-cell>
                            </fo:table-row>

                            <fo:table-row>
                                <fo:table-cell padding-before="5pt"
                                    padding-start="60pt" padding-end="60pt">
                                    <fo:block font-size="20pt" font-family="Arial" color="black"
                                        text-align="center" border-bottom="solid">
                                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-body>
                    </fo:table>
                    <fo:table table-layout="fixed" width="100%">
                        <fo:table-column column-width="40%" />
                        <fo:table-column column-width="60%" />
                        <fo:table-header>
                            <fo:table-row>
                                <fo:table-cell>
                                    <fo:block></fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-header>
                        <fo:table-body>
                            <fo:table-row>
                                <fo:table-cell padding-before="5pt">
                                    <fo:block font-size="9.5pt" text-align="left"
                                        font-weight="normal">
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell padding-before="5pt">
                                    <fo:block font-size="9.5pt" text-align="center"> 
                                    </fo:block>
                                    <fo:block font-size="9.5pt" text-align="center"
                                        end-indent="10pt"> 
                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-body>
                    </fo:table>
                    <fo:table table-layout="fixed" width="100%">
                        <fo:table-column column-width="50%" />
                        <fo:table-column column-width="50%" />
                        <fo:table-header>
                            <fo:table-row>
                                <fo:table-cell>
                                    <fo:block></fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-header>
                        <fo:table-body>
                            <fo:table-row>
                                <fo:table-cell padding-before="5pt"
                                    display-align="after" border="">
                                    <fo:block font-size="10pt" text-align="left"
                                        font-weight="normal">
                                    </fo:block>
                                    <fo:block font-size="13.5pt" text-align="center"
                                        font-weight="normal"> 
                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell padding-before="5pt"
                                    display-align="after" border="">
                                    <fo:block text-align="center">
                                        <fo:external-graphic content-height="60%"
                                            content-width="40%" scaling="uniform">
                                            <xsl:attribute name="src">
                                <xsl:value-of select="pdfimagepath" />sign.jpg
                                </xsl:attribute>
                                        </fo:external-graphic>
                                    </fo:block>
                                    <fo:block padding-bottom="1pt" font-size="15pt"
                                        text-align="center" font-weight="bold">
                                        _____________________________
                    </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                            <fo:table-row>
                                <fo:table-cell display-align="after" border="">
                                    <fo:block font-size="8pt" text-align="left"
                                        font-weight="normal">
                                    </fo:block>
                                </fo:table-cell>
                                <fo:table-cell display-align="after" border=""
                                    padding-before="1pt">
                                    <fo:block font-size="8.5pt" text-align="center"
                                        font-weight="normal">xxxxx
                                </fo:block>
                                    <fo:block font-size="8.5pt" text-align="center"
                                        font-weight="normal">yyyyy
                                </fo:block>
                                </fo:table-cell>
                            </fo:table-row>
                        </fo:table-body>
                    </fo:table>
                </fo:block>
            </fo:flow>
        </fo:page-sequence>
</fo:root>
</xsl:template>
</xsl:stylesheet> 
```

附上代码示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T11:33:22.223

我正在使用 Apache FOP 1.1。首先你应该定义景观布局（A2）。例如

```
<fo:layout-master-set>
        <fo:simple-page-master master-name="A2"
                    page-height="594mm" page-width="420mm" margin-left="0.2cm"
                    margin-right="0.2cm">
        <fo:region-body margin-top="0.5cm" />
                </fo:simple-page-master>
</fo:layout-master-set>
<fo:page-sequence master-reference="A2">
                <fo:flow flow-name="xsl-region-body">

                 **//your design and logic**

                            </fo:flow>
</fo:page-sequence> 
```

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T22:11:15.407

我不确定如何设置背景，但下面是我如何能够更改页面宽度和高度以形成横向。

我正在为 DITA 开放工具包附带的 PDF2 编辑 xsl 文件。我不确定文件名是否相同，但我在 layout-masters-attr.xsl 中找到了以下代码块。请注意，我切换了 page-width 和 page-height 变量。

```
<xsl-attribute-set name="simple-page-master">
    <xsl-attribute name="page-width">
        <xsl:value-of select="$page-height"/>
    </xsl:attribute>
    <xsl:attribute name="page-height">
        <xsl:value-of select="$page-width"/>
    </xsl:attribute>
</xsl:attribute-set> 
```

这会将整个 PDF 文档设置为横向模式。此外，如果需要，您可以找到变量的定义位置并将它们更改为其他值。

# java - 如何使 JSONWriter XML 安全？

> ID：14382604
> 
> 赞同：0
> 
> 时间：2013-01-17T15:36:16.950
> 
> 标签：java, xml, json

> **可能重复：**
> [JSON：为什么正斜杠转义？](https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped)

在 Java 中使用`org.json.JSONWriter`时，如果我包含 XML 值，则结束标记会转义。例如：

```
<version>2.0<\/version> 
```

# sql-server - 像 Java 一样获取 SQL Server 2005 对 varchar 列进行排序

> ID：14382606
> 
> 赞同：5
> 
> 时间：2013-01-17T15:36:24.790
> 
> 标签：sql-server, sorting

我的问题很简单：我有一个字符串数组。在 Java 中对其进行排序会给出一个顺序，而在 Sql Server 2005 中的顺序略有不同。我发现的一个差异示例是在两个字符串的情况下： "jyl ; pagespro" ， "jyl" ，Java 按此顺序排序，Sql 按相反顺序排序。我试图通过 ascii(myColumn) 使 Sql Server 订单，但仍然没有效果。我该如何解决这个问题？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T19:18:46.827

为了扩展 DaveE 的答案，如果您已确定要用于排序的排序规则，则可以在 ORDER BY 子句中使用其名称，如下所示： `ORDER BY colA COLLATE SQL_Latin1_General_Cp437_CS_AS_KI_WI`。

请注意，这不会使用可能在 上定义的排序索引`colA`。您可以通过使用计算列来解决这个问题。

一般来说，我建议在一个地方进行所有排序：在 Java 中或在数据库中，但有时不是在这里，有时是那里。这只会导致混乱和复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:40:05.207

我怀疑它与有效的 SQL Server[排序规则](http://msdn.microsoft.com/en-us/library/ms144250%28v=sql.105%29.aspx)有关。这不仅会影响可用的字符集，还会影响字符相互排序的方式。即使在相当通用的 SQL_Latin1_General 系列中，也有许多特定的排序规则可用。

# php - 它的输出细节在 php/html 中不正确

> ID：14382607
> 
> 赞同：4
> 
> 时间：2013-01-17T15:36:38.350
> 
> 标签：php, html, mysqli

`All`当用户从问题下拉菜单中选择并在下面输出时，我想显示下拉菜单中的所有问题。问题是它没有这样做，更糟糕的是，它给了我未定义的偏移错误，说明：

```
Notice: Undefined offset: ... in .... on line 605 
```

第 605 行是：

```
echo '<p><strong>Question:</strong> ' .htmlspecialchars($arrQuestionNo[$key]). ': ' .htmlspecialchars($arrQuestionContent[$key]). '</p>' . PHP_EOL; 
```

我的问题是如果用户选择`All`选项，如何修复错误并显示所有问题？

我有一个演示，你可以通过：[DEMO](http://helios.hud.ac.uk/u0867587/Mobile_app/Text29.php)

请按照以下步骤操作：

*   在模块下拉菜单中，选择系统策略并提交
*   当评估下拉菜单出现时，选择 POKUB1 并提交
*   您将看到学生和问题下拉菜单。如果打开下拉菜单，您会看到有 3 个学生和 2 个问题。请选择一个学生和`All`问题并提交。当我真的想在此处显示所有问题的详细信息时，您将在这里看到错误。

代码：

问题下拉菜单：

```
<select name="question" id="questionsDrop">
<option value="0">All</option>
<option value=23">1</option>
<option value=32">1</option>
</select> 
```

下面是根据从问题下拉菜单中选择的选项确定显示的代码。

```
 function StudentAnswers()
        {

        $selectedstudentanswerqry = "
            SELECT
            sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
            QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
            GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
            GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
            FROM Student st
            INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
            INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
            INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
            INNER JOIN Answer an ON q.QuestionId = an.QuestionId
            LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
            LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
            ";

            // Initially empty
            $where = array('q.SessionId = ?');
            $parameters = array($_POST["session"]);
            $parameterTypes = 'i';

            // Check whether a specific question was selected
            $p_question = empty($_POST["question"])?'':$_POST["question"];

            switch($p_question){
            case 0:
                //dont' add where filters
                break;
            default:
                $where[] = 'q.QuestionId = ?';
                $parameters[] .= $_POST["question"];
                $parameterTypes .= 'i';
            }

            // If we added to $where in any of the conditionals, we need a WHERE clause in
            // our query
            if(!empty($where)) {
                $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
                global $mysqli;
                $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
                // You only need to call bind_param once

                if (count($where) == 1) {
                $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
            }
            else if (count($where) == 2) {
                $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
            }

            }

            $selectedstudentanswerqry .= "
              GROUP BY sa.StudentId, q.QuestionId
              ORDER BY StudentAlias, q.SessionId, QuestionNo
            ";

        // get result and assign variables (prefix with db)
        $selectedstudentanswerstmt->execute(); 
        $selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
        $detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
        $detailsMouseClick,$detailsStudentMark);    

        $selectedstudentanswerstmt->store_result();
        $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 

            $question = array();

            while ($selectedstudentanswerstmt->fetch()) {

            $arrQuestionNo = array();
            $arrQuestionContent = array();

            $arrQuestionNo[ $detailsStudentId ] = $detailsQuestionNo;
            $arrQuestionContent[ $detailsStudentId ] = $detailsQuestionContent;

            $questions[] = $arrQuestionNo;
            $questions[] = $arrQuestionContent;

        }

        $selectedstudentanswerstmt->close();

        ?>

...........................................................................................

    <h2>STUDENT'S ANSWERS</h2>

    <?php   

              foreach ($questions as $key=>$question) {

    echo '<p><strong>Question:</strong> ' .htmlspecialchars($arrQuestionNo[$key]). ': ' .htmlspecialchars($arrQuestionContent[$key]). '</p>' . PHP_EOL;

    }
    }
    ?> 
```

**更新：**

学生表结构：

```
CREATE TABLE `Student` (
 `StudentId` int(10) NOT NULL AUTO_INCREMENT,
 `StudentForename` varchar(25) NOT NULL,
 `StudentSurname` varchar(25) NOT NULL,
 `StudentAlias` varchar(15) NOT NULL,
 `StudentEmail` varchar(50) NOT NULL,
 `StudentUsername` varchar(20) NOT NULL,
 `StudentPassword` varchar(50) NOT NULL,
 `StudentDOB` date NOT NULL,
 `Year` int(2) NOT NULL,
 `CourseId` int(6) NOT NULL,
 `Active` tinyint(1) NOT NULL DEFAULT '1',
 PRIMARY KEY (`StudentId`),
 KEY `FK_Course` (`CourseId`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8 
```

问题表结构：

```
CREATE TABLE `Question` (
 `QuestionId` int(10) NOT NULL AUTO_INCREMENT,
 `SessionId` int(10) NOT NULL,
 `QuestionNo` int(3) NOT NULL,
 `QuestionContent` varchar(5000) NOT NULL,
 `NoofAnswers` int(2) NOT NULL,
 `ReplyId` int(1) NOT NULL,
 `QuestionMarks` int(4) NOT NULL,
 `OptionId` int(2) NOT NULL,
 PRIMARY KEY (`QuestionId`)
) ENGINE=InnoDB AUTO_INCREMENT=357 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:40:41.083

试试这个......

```
$question = array();

while ($selectedstudentanswerstmt->fetch()) {
    // assuming you don't need the StudentId
    $questions[] = array('no' => $detailsQuestionNo,
                         'content' => $detailsQuestionContent);
} 
```

和

```
foreach ($questions as $key => $question) {
    echo '<p><strong>Question:</strong> ' . 
         htmlspecialchars($question['no']) .
         ': ' . 
         htmlspecialchars($question['content']) . 
         '</p>' . 
         PHP_EOL;
} 
```

# 已编辑

或者，如果您按问题分组，您可以试试这个：

```
$question = array();

while ($selectedstudentanswerstmt->fetch()) {
    if (true === isset($questions[$detailsQuestionId])) {
        $questions[$detailsQuestionId]['students'][] = $detailsStudentId;
    } else {
        $questions[$detailsQuestionId] = array();
        $questions[$detailsQuestionId]['no'] = $arrQuestionNo;
        $questions[$detailsQuestionId]['content'] = $arrQuestionContent;
        $questions[$detailsQuestionId]['students'] = array();
        $questions[$detailsQuestionId]['students'][] = $detailsStudentId;
    }
}

foreach ($questions as $questionId => $question) {
    // $question['no']
    // $question['content']

    foreach($question['students'] AS $key => $studentId) {
        // $studentId
    }
} 
```

# 或者，如果您按用户 ID 分组...

```
$students = array();

while ($selectedstudentanswerstmt->fetch()) {
    if (false === isset($students[$detailsStudentId])) {
        $students[$detailsStudentId] = array();
    }
    $students[$detailsStudentId][$detailsQuestionId] = 
                                       array('no' => $arrQuestionNo,
                                             'content' => $arrQuestionContent;
}

foreach ($students AS $studentId => $questions) {
    // $studentId
    foreach ($questions AS $questionId => $question) {
        // $questionId
        // $question['no']
        // $question['content']
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:04:26.570

您的`foreach`循环正在遍历`questions`数组，其中填充了：

```
 $questions[] = $arrQuestionNo;
        $questions[] = $arrQuestionContent; 
```

这意味着它是一个索引数组，而不是关联数组；键是 0 和 1。

但是然后你回应`$arrQuestionNo[$key]`和`$arrQuestionContent[$key]`。这些是关联数组，其键是学生 ID，而不是从 0 开始的索引（除非您碰巧有具有这些 ID 号的学生）。

此外，您每次都通过 fetch 循环初始化`$arrQuestionNo`和到一个空数组。`$arrQuestionContent`因此，当您在最后回显结果时，这些仅包含提取的最后一行中的问题。

您应该使用多维数组：

```
while ($selectedstudentanswerstmt->fetch()) {
  $questions[$detailsStudentId][$detailsQuestionNo] = $arrQuestionContent;
} 
```

那么你的打印循环应该是：

```
foreach ($questions as $studentId => $studentQuestions) {
  echo '<h2>Student '.htmlspecialchars($studentId).' Answers</h2>'. PHP_EOL;
  foreach ($studentQuestion as $questionNo => $content) {
    echo '<p><strong>Question:</strong> ' .htmlspecialchars($questionNo). ': ' .htmlspecialchars($content). '</p>' . PHP_EOL;
  }
} 
```

# javascript - 为什么 jQuery.unique 不能处理字符串或数字数组？

> ID：14382608
> 
> 赞同：4
> 
> 时间：2013-01-17T15:36:42.477
> 
> 标签：javascript, jquery, arrays

在官方文档中的方法描述中，[`jQuery.unique()`](http://api.jquery.com/jQuery.unique/)我发现：

> ...这仅适用于 DOM 元素数组，而不适用于字符串或数字。

但是，如果我们尝试一些带有字符串或数字的测试数组的方法，它似乎工作正常：

```
$.unique(["Alex", "Andrew", "Maria", "Alex", "Nick", "Andrew", "Eugene"]);
// ["Eugene", "Nick", "Maria", "Andrew", "Alex"]

$.unique([1, 3.5, -1e5, 2, 3.5, 1, 1000, -1e5]);
// [1000, 2, -100000, 3.5, 1] 
```

重点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:39:58.670

通过限制文档说明它可以做什么的范围，他们可以在必要时灵活地在以后更改它，而不必担心支持超出文档功能的范围。

当前的实现（实际上只是对`Sizzle.uniqueSort`jQuery 内置的 Sizzle 选择器引擎的引用）大多只是将事物与 进行比较`===`，这解释了为什么它也适用于字符串和数字。但是通过限制范围，如果他们以后发现有一些更有效的方法（但仅适用于 DOM 元素），他们可以在未来改变它。

请注意，它主要是一种内部方法，正如文档中所说：

> 这个函数……主要是jQuery内部使用的。

# css - IE中的HTML DIV高度

> ID：14382610
> 
> 赞同：0
> 
> 时间：2013-01-17T15:36:44.513
> 
> 标签：css, html

这是一小段 HTML。

```
<html>
<body>
    <div id="containerDiv" style="background-color:red; height: 200px">
        <div id="topDiv" style="background-color:green">
            <input type="button">1</input>
        <div>
        <div id="textAreaDiv" style="background-color:blue;width:100%; height:100%;">
            <textarea style="width:100%; height:100%;">123</textarea>
        </div>
        <div id="bottomDiv" style="background-color:purple">
            <input type="radio" name="Milk" value="Milk">Milk</input>
            <input type="radio" name="Butter" value="Butter">Butter</input>
        </div>
    </div>
</body>
</html> 
```

我正在尝试使 textAreaDiv.height 成为 containerDiv.height - (topDiv.height + bottomDiv.height)。这在 Chrome 中完美运行，但在 IE9 中却不行。在 IE9 中，textarea 的高度大约是两个字符的高度。知道如何让它在 IE9 中像在 Chrome 中一样工作吗？

这是我得到的屏幕截图：http: [//postimage.org/image/bfn6bsalv/](http://postimage.org/image/bfn6bsalv/)

**更新** 这是一个使用 javascript 的解决方案，但我仍然想要一个纯 CSS 解决方案

```
<html>
<head>
    <script type="text/javascript" src="JQuery-1.7.2.min.js"></script>
</head>
<body>
    <script>
        $(document).ready(function() {          
            var textHeight = $('#containerDiv').height() - ($('#topDiv').height() + $('#bottomDiv').height());          
            $('#textBox').height(textHeight);
        });
    </script>
    <div id="containerDiv" style="background-color:red; height: 400px">
        <div id="topDiv" style="background-color:green;height:25px;">
            <input type="button">1</input>
        </div>
        <div id="textAreaDiv" style="background-color:blue;width:100%;">            
            <textarea id="textBox" style="width:100%;">123</textarea>           
        </div>
        <div id="bottomDiv" style="background-color:purple;height:25px;">
            <input type="radio" name="Milk" value="Milk">Milk</input>
            <input type="radio" name="Butter" value="Butter">Butter</input>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:25:09.033

我很高兴你找到了一些有用的东西。我想让你知道我明白为什么它不起作用。您的代码无效。的结束标记`topdiv`缺少正斜杠。

# c++ - 在最小大小的队列中排队

> ID：14382612
> 
> 赞同：0
> 
> 时间：2013-01-17T15:36:55.803
> 
> 标签：c++, loops, queue, task

我有一个范例，每个线程有一个队列。我希望在队列数量中找到最小大小的队列，我使用以下代码进行了操作。

```
std::vector<std::queue<task> > q;

int min_value = INT_MAX;
std::size_t size = q.size();
for( i=1; i<size; i++){ //accessing loop of queues
  if(min_value > q[i].size())
    min_value = q[i].size();
} 
```

现在我希望在此做一个额外的操作，每次只有最小大小的队列（从上面的代码中找到）应该将任务排入队列。

```
q.get (min_value)
q.push(task) // will this one, does the required operation? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:44:27.927

我认为您正在寻找的是 vector 中最小的队列`q`。如果是这样，您可以这样做：

```
auto cmp = [](std::queue<task> const & a, std::queue<task> const & b) {  
               return a.size() < b.size(); 
           };

//note q is a std::vector of std::queue
auto min_queue = std::min_element(q.begin(), q.end(), cmp);

min_queue->push(item);//min_queue is the iterator to the smallest queue 
```

另外，我相信您的代码是一个错误，如果您想搜索整个向量，即`i=1`从头到尾，我认为应该是这个错误。`i=0`如果你真的是说`i=1`，那么你必须这样做：

```
auto min_queue = std::min_element(q.begin() + 1, q.end(), cmp); 
```

希望有帮助。

# android - 单击后如何将新项目添加到弹出菜单

> ID：14382614
> 
> 赞同：3
> 
> 时间：2013-01-17T15:37:09.473
> 
> 标签：android, onclick, menuitem, android-menu, popupmenu

我有一个按钮：

```
<Button
        android:id="@+id/bot_button1"
        android:layout_width="120dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:textSize="24sp"
        android:text="@string/bot_button1_tx" /> 
```

这是我的主要活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    activity = this;

    setContentView(R.layout.activity_main);

    button1 = (Button) findViewById(R.id.bot_button1);
    button1.setOnClickListener(onClickListener);

    Log.d(className, "onCreate");  

private OnClickListener onClickListener = new OnClickListener() {
    @Override
    public void onClick(final View v) {
        switch(v.getId()){
        case R.id.bot_button1:
            showPopupMenu(v, 1);
            break;
        }
    }
};  

private void showPopupMenu(final View v, Integer i){
    PopupMenu popupMenu = new PopupMenu(MainActivity.this, v);
    switch (i) {
    case 1:
        popupMenu.getMenuInflater().inflate(R.menu.menu1, popupMenu.getMenu());
        break;
    }

    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {

            new AlertDialog.Builder(activity).
                setTitle("TITLE").
                setMessage("MESSAGE").
                setAdapter(adapter, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO: user specific action
                        dialog.dismiss();
                    }
              }).create().show();
        return true;
        }
    });
    popupMenu.show();
} 
```

选择（单击）PopupMenu 中的项目时，如何显示更多项目？理想情况：PopupMenu 在选择后仍然可见，并且新的 PopupMenu 出现在所选项目旁边。或弹出菜单展开以显示子项。

我试图引入第二个PopupMenu onMenuItemClick()，但它只替换了第一个PopupMenu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:14:57.177

我使用了一个新的弹出菜单来解决这个问题

```
public OnMenuItemClickListener listener = new OnMenuItemClickListener() {
    @Override
    public boolean onMenuItemClick(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.menu2_3_3:  
            popupMenu2.getMenuInflater().inflate(R.menu.menu2_3_3, popupMenu2.getMenu());
            popupMenu2.show();
            popupMenu2.setOnMenuItemClickListener(listener2); 
```

# javascript - 需要滑出动画的简单导航菜单

> ID：14382615
> 
> 赞同：0
> 
> 时间：2013-01-17T15:37:10.183
> 
> 标签：javascript, navigation

我有一个非常简单的导航菜单，可以在点击时打开。然而，它只是弹出到屏幕上，我希望它“滑动”下来。我的 JavaScript 经验很少，但我正在努力学习。如果可能的话，我真的很想避免使用 JQuery。有没有一种方法可以简单地添加到我拥有的 JavaScript 中，这样我就不必大量更改 html 和 CSS 并且它会滑动？预先感谢您的任何帮助。

这是我目前使用的代码：

**HTML：**

```
<table id="nav_menu">
<tr>
<td><a href="index.html" class="no_submenu">Home</a></td>
<td onmouseover="showmenu('about_us_menu')" onmouseout="hidemenu('about_us_menu')"><a class="with_submenu">About Us <img src="images/menu_down.png" /></a>
<table class="sub_menu" id="about_us_menu">
<tr><td><a href="about_us/link1.html">link1</a></td></tr>
<tr><td><a href="about_us/link2.html">link2</a></td></tr>
<tr><td><a href="about_us/link3.html">link3</a></td></tr>
</table>
</td>
</tr>
</table> 
```

**CSS：**

```
 table.sub_menu {
    position: absolute;
    visibility: hidden;} 
```

**JAVASCIPT：**

```
 function showmenu(elmnt) {
    document.getElementById(elmnt).style.visibility="visible";
}

function hidemenu(elmnt) {
    document.getElementById(elmnt).style.visibility="hidden";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:38:25.477

您可以使用 jQuery slideDown 函数。

[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

```
function showmenu(elmnt) {
    $('#' + elmnt).slideDown("slow");
}

function hidemenu(elmnt) {
    $('#' + elmnt).slideUp("slow");
} 
```

编辑：刚刚注意到您想避免使用 jQuery，在这种情况下，请参阅上一个问题。 [没有 jQuery 的 JavaScript 向下滑动](https://stackoverflow.com/questions/3795481/javascript-slidedown-without-jquery)

# c++ - 如何检查 CString 是否包含 CarriageReturn + Line Feed \r\n

> ID：14382617
> 
> 赞同：2
> 
> 时间：2013-01-17T15:37:20.450
> 
> 标签：c++, mfc

再见

我是 Visual C++ 6 的新手

如果我有一个包含多行字符串的 CString，一个包含“\r\n”的字符串我如何检查这个字符串是否包含“\r\n”？我如何检查是否是多行？

以下代码不起作用；CString::Find 不起作用，总是返回 -1

```
CString myString;
.......
bool found = false;
if( myString.Find(_T("\r\n")) != -1)   
  found = true;
...... 
```

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:33:41.060

你的内容可能没有`\r\n`。

我尝试了一个示例，它起作用了：

```
 CString myString;

   myString ="Today is a good day \r\n Tomorrow too";

   bool found = false;
   if( myString.Find(_T("\r\n")) != -1)   
      found = true; 
```

# sql - rails sql匹配

> ID：14382619
> 
> 赞同：-2
> 
> 时间：2013-01-17T15:37:28.040
> 
> 标签：sql, ruby-on-rails, where

```
customer = Feedback.includes(:user).where("('created_at' >= ? and 
'created_at' < ? and how_did_you_hear = ? and 
users.user_type = ? )",date_start,date_end,value,"customer").count 
```

此代码不仅与所有反馈匹配 Feedback.user.user_type = "customer"

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:44:58.473

这可以工作：

```
customer = Feedback.includes(:user).where("feedbacks.created_at >= ? AND feedbacks.created_at < ? AND how_did_you_hear = ? AND users.user_type = 'customer'", date_start, date_end, value).count 
```

# gwt - GWT - Internet Explorer 8 中无效日期的 DateBox / DatePicker 问题

> ID：14382622
> 
> 赞同：1
> 
> 时间：2013-01-17T15:37:34.370
> 
> 标签：gwt, internet-explorer-8, datepicker

我使用的 DatePicker/DateBox 有一个年份的文本字段。如果我将光标放在框中并开始输入，它会在最后连接（即，它从 2013 开始并变成 20132012）。如果我然后选择一个日期并提交，年份会自动更改为 1969 年。大概这是因为日期超出范围。但是，当我尝试再次编辑年份以修复它时，无论我输入什么，它都会自动恢复到 1969 年。这只发生在 Internet Explorer 8 中。

这是一个已知的问题？我能做些什么来使体验更加用户友好吗？

感谢您的时间。

# data-structures - 图形实现提前知道边

> ID：14382624
> 
> 赞同：0
> 
> 时间：2013-01-17T15:37:45.907
> 
> 标签：data-structures, graph, hashtable, adjacency-list

我正在寻找一种有效的方法来实现加权无向图，只知道提前的边数。

样本输入：
N（边数）
AB x（x 是从 A 到 B 的距离）
。
.

我曾考虑使用 Node* 的邻接列表（我需要知道邻居）并将节点存储在动态哈希表中（我不知道我将采用多少个节点，所以我需要一个动态 - 搜索/插入 - 容器）。

有更好的方法吗？

对不起，我的英语不好！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:55:53.150

给定您输入的格式，一个非常合理的方法是使用列表的哈希表，其中键是节点，值是（节点，距离）对的列表。或者，如果您有一个密集图并且希望能够快速确定从一个节点到另一个节点的距离，最好有一个哈希表的哈希表，其中顶级哈希表将节点映射到第二个哈希表，然后将原始节点具有边缘的每个节点映射到其成本。这仍然可以让您遍历节点的传出边，但可以更快地查找距离。

另一个想法（取决于用例）是从构建第一个数据结构（列表的哈希表）开始，然后通过构建邻接矩阵对其进行后期处理。如果您不需要遍历节点的传出边并且需要快速随机访问节点之间的距离，这将很有用。它类似于哈希表的哈希表，但可能更节省空间。

希望这可以帮助！

# json - 如何在 Windows 8 应用程序中无缝反序列化 JSON

> ID：14382626
> 
> 赞同：0
> 
> 时间：2013-01-17T15:37:53.630
> 
> 标签：json, windows-runtime, asp.net-web-api, nuget

Web API 客户端库 NuGet Packag 引入了 JSON.NET 和一些方便的扩展方法，用于反序列化 JSON，如下所示：

```
response.Content.ReadAsAsync<IEnumerable<Product>>().Result 
```

但是这个包与 Windows 8 App 项目不兼容。如果没有此 NuGet 包，我如何以相同的通用方式反序列化我的 JSON 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:16:59.547

你说“与Win 8不兼容”是什么意思？

已`Microsoft.AspNet.WebApi.Client`开发用于支持 Win8。

```
Install-Package Microsoft.AspNet.WebApi.Client 
```

只安装这个包，而不是整个 Web API。

您可以在 Henrik Frystyk Nielsen 的博客文章中查看发行说明 - [http://blogs.msdn.com/b/henrikn/archive/2012/08/15/asp-net-web-api-released-and -a-preview-of-what-s-next.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/08/15/asp-net-web-api-released-and-a-preview-of-what-s-next.aspx)

```
The Microsoft ASP.NET Web API Client Libraries package adds support for formatting 
 content negotiation to System.Net.Http when writing Windows Store Apps. 
It includes support for JSON, XML, form URL encoded data, as well as MIME multipart. 
This package requires Visual Studio 2012 and Windows 8. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:54:07.560

至少有 2 个可用于 Windows 应用商店应用的 JSON 序列化程序：

*   [`DataContractJsonSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)是 .NET 框架的一部分。
*   也支持 Json.NET。如果仅安装此包，则可以将其添加到 Windows 应用商店应用项目中：`Install-Package Newtonsoft.Json`

“以相同的通用方式反序列化我的 JSON 对象”到底指的是什么？

# c# - 网络摄像头控制找不到新的视频设备

> ID：14382628
> 
> 赞同：1
> 
> 时间：2013-01-17T15:38:02.890
> 
> 标签：c#, wpf, webcam

我在 C# 中实现这个，就像它在这里实现一样 [http://www.codeproject.com/Articles/285964/WPF-Webcam-Control](http://www.codeproject.com/Articles/285964/WPF-Webcam-Control) 但是 FindDevice() 找不到我连接的外部网络摄像头 usb 2.0。但它会看到我笔记本电脑的网络摄像头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:42:49.493

问题已经解决了。我的笔记本电脑的网络摄像头和外部网络摄像头都具有相同的名称“usb 2.0”。这就是为什么它没有看到外部网络摄像头。我试图从设置中阻止我的笔记本电脑的网络摄像头，所以我只有一个外置网络摄像头。现在它找到了。

# unit-testing - FakeItEasy 深嵌套类型伪造

> ID：14382630
> 
> 赞同：5
> 
> 时间：2013-01-17T15:38:11.133
> 
> 标签：unit-testing, mocking, fakeiteasy

我有一个想要伪造的复杂对象。

```
interface IContext
{
    User User { get; }
}

A.CallTo(
    () => _fakeContext.User.Subscription.Attributes)
    .Returns(new List<Attribute>()); 
```

但我得到了下一个例外：

`The current proxy generator can not intercept the specified method for the following reasons: - Non virtual methods can not be intercepted`

所有嵌套类型都是属性，它们是带有`get; set;`属性修饰符的简单贫血类型。当我查看调试器时，它们都是假的。

**有没有办法设置**链的最后一个属性并避免设置所有以前的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:20:10.247

如果您的对象足够贫血，您可能想尝试[一下 AutoFixture](https://github.com/AutoFixture)：

```
var fake = A.Fake<>();
var fixture = new Fixture();
// If it's possible [1], AutoFixture will generate entire object graph
var user = fixture.CreateAnonymous<User>();
// Since data will be random [2], you can overwrite properties as you like
user.User.Subscription.Attributes = new List<Attributes>();
A.CallTo(() => fake.User).Returns(user); 
```

1.  为了使其工作，您的自定义对象需要具有公共构造函数，并且最好避免使用接口（但这可以通过*自动模拟*扩展来缓解，例如 AutoFakeItEasy）。
2.  该`.Build`方法提供了fluent API来自定义对象自动生成，因此可以控制*随机性*

# c# - 如何在 OnPaint() 事件中获取需要绘制的确切区域？

> ID：14382631
> 
> 赞同：5
> 
> 时间：2013-01-17T15:38:14.057
> 
> 标签：c#, winforms, gdi+, paint

在`WinForm`应用程序中，订阅`OnPaint()`事件时，`PaintEventArgs`提供`ClipRectangle`定义要绘制的区域的属性。

当窗体垂直或水平调整大小时，它会给出要绘制的最小矩形。

![在此处输入图像描述](../Images/9f475c011dde7aa7c7654403cc5577e1.png)

但是当窗口在两个方向上调整大小时，需要绘制几个区域（一个在右侧，一个在底部）并且`OnPaint`事件将它们合并。它会产生一个与大小相同的矩形`Form`（因此一切都被重绘）。我想要的是单独的区域（图片上的两个矩形）

![在此处输入图像描述](../Images/d76433b31c2a03276896c2d90c77702c.png)

我知道会`GDI+`自动剪辑不需要绘制的内容（东西在两个矩形之外，而不仅仅是`ClipRectangle`），但我想最大限度地减少调用（由于调用很多，`GDI+`我在绘制事件时已经遇到了性能问题，这个不是过早的优化）`OnPaint``GDI+`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:13:38.003

Windows 中的绘画由 WM_PAINT 消息处理程序启动。它必须调用 BeginPaint() 以获取有关需要绘制的内容的信息。它返回一个 PAINTSTRUCT 类型的结构，它看起来像这样：

```
typedef struct tagPAINTSTRUCT {
  HDC  hdc;
  BOOL fErase;
  RECT rcPaint;              // <=== here
  BOOL fRestore;
  BOOL fIncUpdate;
  BYTE rgbReserved[32];
} PAINTSTRUCT, *PPAINTSTRUCT; 
```

rcPaint 成员是您从 Graphics.ClipRectangle 获得的成员。Graphics.Clip 和 Graphics.ClipBounds 属性不相关，它们仅在您通过分配 Clip 属性有意剪辑自己时才起作用。

显然，Windows 本身并不能让您找出您所要求的内容。rcPaint 是一个 RECT，一个简单的矩形。Windows 只跟踪脏矩形，而不是区域。由 InvalidateRect() 添加的新矩形与现有矩形合并，您确实很容易得到整个客户区。

解决此问题的唯一合理方法是注意 ResizeBegin 和 ResizeEnd 事件。当您获得 ResizeBegin 时，您就知道用户正在拖动窗口边缘或角落。可用于优化绘画的知识，跳过使模态调整大小循环效果不佳的昂贵位。

# c# - 如何将 webclient 代理设置为 null？

> ID：14382633
> 
> 赞同：0
> 
> 时间：2013-01-17T15:38:20.430
> 
> 标签：c#, webclient, windows-phone-8

我试过这段代码

```
WebClient wc = new WebClient();
wc.Proxy = null; 
```

但我得到 System.Net.Webclient 不包含代理的定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:44:02.250

那`System.Net.WebClient`不包含代理的定义。
如果您查看[MSDN](http://msdn.microsoft.com/en-us/library/system.net.webclient_properties%28v=vs.95%29.aspx)，您会发现 webclient 没有名为 Proxy 的属性。

如果您查看[MSDN](http://msdn.microsoft.com/en-us/library/system.net.webclient_properties%28v=vs.110%29.aspx)页面的普通 web 客户端（非 Silverlight/非电话）版本，您会看到 Proxy 属性。但这不包含在 Windows Phone 的精简版中，因为在您的手机中您无法设置代理。

因此无需将其设置为空。由于该属性不存在。只需删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:45:11.627

WebClient 类实际上不包含 Silverlight 代理的定义。您可以查看参考： http: [//msdn.microsoft.com/en-us/library/system.net.webclient (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.95).aspx)

# html - 如何强制 IE10 以 IE9 文档模式呈现页面

> ID：14382636
> 
> 赞同：24
> 
> 时间：2013-01-17T15:38:26.607
> 
> 标签：html, browser, internet-explorer-10

我有两个问题：

1.  如何强制 IE10 以 IE9 文档模式呈现？目前它以标准文档模式呈现我的页面。

2.  在IE10的开发者工具栏中，看不到IE10的文档模式选项。是没有实现，还是我的浏览器版本过时了？

感谢你的帮助。

* * *

编辑：感谢大家提供的解决方案。之前我使用元标记 `<meta http-equiv="x-ua-compatible" content="IE=edge" >` 只是为了确保 IE 将以最高文档模式呈现页面，但我在 IE10 标准模式下遇到了一些问题，所以我更改了元标记以在 IE9 模式下呈现页面： `<meta http-equiv="x-ua-compatible" content="IE=9" >`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-17T15:45:30.460

您应该可以使用[X-UA 元标记](http://acidmartin.wordpress.com/2009/03/21/using-the-ie8-x-ua-compatibility-meta-tag/)来做到这一点：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

**但是**，如果您发现自己必须这样做，那么您可能做错了什么，应该看看您在做什么，看看您是否可以用不同/更好的方式来做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T15:50:21.390

您的意思是要告诉您的 IE 10 副本以 IE 9 模式呈现它查看的页面吗？

还是您的意思是您希望您的网站强制 IE 10 以 IE 9 模式呈现它？

对于前者：

> 要强制您在 Internet Explorer 10 中查看的网页进入特定的文档兼容模式，请先按 F12 键打开 F12 工具。然后，在**Browser Mode**菜单上，单击**Internet Explorer 10**，然后在**Document Mode**菜单上，单击**Standards**。
> 
> [http://msdn.microsoft.com/en-gb/library/ie/hh920756(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/hh920756(v=vs.85).aspx)

对于后者，其他答案是正确的，但我不建议这样做。IE 10 比 IE 9 更符合标准（即更类似于其他浏览器）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-16T09:01:50.073

如果您只想对自己的系统进行更改，您可以调整注册表。如果您有 IE10 并且您访问的许多网站在 IE10 中无法正常呈现，那么您可以调整您的注册表以强制 IE 在 IE9 模式下打开。

```
HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION 
```

创建一个 DWORD as`iexplore.exe`并赋予 value `9999`。重新启动您的 IE，它将以 IE9 模式打开 :)

感谢我的同事 Sreejith D :)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-17T15:44:37.537

我以前从未见过这样做，但这是在使用 IE 9 时模拟 IE 8/7 的方式：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

如果没有，那么试试这个：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

将这些与其他元标记一起添加到您的标题中。这应该强制 IE10 呈现为 IE9。

您可以做的另一个选择（假设您使用的是 PHP）是将其添加到您的`.htaccess`文件中：

```
Header set X-UA-Compatible "IE=9" 
```

这将普遍执行该操作，而不必担心将元标记添加到所有标题中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T15:54:42.123

按照[这个](http://xn--mlform-iua.no/blog/ie10-and-x-ua-compatible)说法，IE10（无论如何，这篇文章是指预览版）它`X-UA-Compatible` **只能**在文档处于怪癖模式（否`DOCTYPE`）时使用，否则 IE10 不会对请求做出反应。

这是一段摘录：

> 因此，要使 IE10 对 X-UA-Compatible 指令做出反应，必须根据 HTML5 的规则创建一个触发 quirks-mode 的页面（即：一个没有 doctype 的页面）。也可以将指令作为 HTTP 标头发送，但是：如果您使用 HTTP 发送的指令来降级渲染，它似乎没有效果——它只能用于升级渲染

因此，您必须使用开发人员工具或使用 quirks 模式手动完成（但我建议保持 IE10 模式，这是**第一次**与其他浏览器的标准保持一致）

编辑：以下是一些有用的阅读链接：

[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx)

[http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T15:45:24.167

您可以通过添加以下内容强制 IE10 以 IE9 模式呈现：

`<meta http-equiv="X-UA-Compatible" content="IE=9">`

在你的`<head>`标签中。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx) ...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-27T05:38:52.750

有很多方法可以做到这一点：

将 X-UA-Compatible 标记添加到头部 http 响应标头

使用 IE 工具 F12

更改窗口注册表

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-05T10:02:41.717

我在为我的 DNN6 网站寻找解决方案时发现了这篇文章。错误是

> SCRIPT5007：无法获取未定义或空引用的属性“documentElement”

但我需要相同的解决方案：强制兼容模式为 IE9。因此，让我与您分享我为解决此问题所做的工作。

因此，对于 DotNetNuke 6 用户，请尝试[StyleHelper SkinObject](http://www.40fingers.net/WeblogsNews/Weblogs/tabid/58/ID/123/language/nl-NL/DotNetNuke-6-and-Internet-Explorer-10.aspx)

对我来说很棒！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-25T21:10:44.027

hack是递归的。就像 IE 本身使用的组件被许多其他需要“Web 组件”的进程使用。因此在注册表中我们添加`IEXPLORE.exe`. 实际上，它是一种递归破解。

# sql - 如何使用“ON DELETE CASCADE”选项检查外部列是否是约束的一部分？

> ID：14382645
> 
> 赞同：3
> 
> 时间：2013-01-17T15:39:00.287
> 
> 标签：sql, sql-server

从数据库中删除行时，我正在执行查询以避免违反约束。我尽可能使用`ON DELETE CASCADE`选项，但有时我不想允许执行删除。

例如：

案子：

1.  我有一个带有列 ID 的 DEPT 表
2.  我有一个 CUSTOMER 表，其中 DEPTID 列引用了 DEPT 表，没有任何 ON DELETE CASCADE 选项。
3.  我有一个 AREA 表，其中包含一个 DEPTID 列，它使用 ON DELETE CASCADE 选项引用了 DEPT 表。

下面的查询将列出引用 DEPT 表的两个表（CUSTOMER 和 AREA）：

```
SELECT *
FROM sys.foreign_key_columns fkc
JOIN sys.columns col ON
     fkc.parent_object_id = col.object_id 
     AND fkc.parent_column_id = col.column_id
WHERE object_name(referenced_object_id) = 'DEPT' 
```

但是我想在我的查询中只显示具有外键**而没有**选项的`ON DELETE CASCADE`表，在上面的示例中只是表 CUSTOMER。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:00:34.777

```
select ao.name,ao.type_desc,delete_referential_action_desc,*
from sys.foreign_keys fk 
inner join sys.all_objects ao 
on fk.parent_object_id = ao.object_id     
where delete_referential_action_desc <> 'CASCADE' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:00:03.590

```
SELECT *
FROM sys.foreign_key_columns fkc
JOIN sys.columns col ON
     fkc.parent_object_id = col.object_id 
     AND fkc.parent_column_id = col.column_id
WHERE object_name(referenced_object_id) = 'DEPT'
AND  objectproperty(fkc.constraint_object_id , 'CnstIsDeleteCascade')=1 
```

# jsp - 计算jstl中每列的总数

> ID：14382657
> 
> 赞同：0
> 
> 时间：2013-01-17T15:40:06.113
> 
> 标签：jsp, collections, html-table, jstl

我有这样的报告

```
 01 jan  02 jan  03 jan  ...  total

 user1   3       5       10           18
 user2   5       6       9            20
 .
 .
 .
 total   ?       ?       ?            38 
```

最后，我可以使用我的 JSTL 代码计算每一行的总数。我找不到用“？”计算结束标记处的列总数的方法。

对于行总数，我使用的是

```
<c:forEach var="colNames" items="${listOfRecords}">
    <tr>
        <td>${colNames.key}</td>
        <c:set var="htotal" value="0" />
        <c:forEach var="noOfTasks" items="${colNames.value}" varStatus="status">
            <td>${noOfTasks.value}</td>
            <c:set var="htotal" value="${htotal+noOfTasks.value}" />
        </c:forEach>
        <td class="foo">${htotal}</td>
    </tr>
</c:foreach> 
```

这里`${listOfRecords}`是`HashMap<String, HashMap<String, Integer>>`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:56:40.590

这就是我所能想到的：

```
<jsp:useBean id="column_totals" class="java.util.LinkedHashMap" scope="page"/>
<c:forEach var="row" items="${listOfRecords}">
    <tr>
        <td>${row.key}</td>
        <c:set var="row_total" value="0"/>
        <c:forEach var="column" items="${row.value}">
            <td>${column.value}</td>
            <c:if test="${empty column_totals[column.key]}">
                <c:set target="${column_totals}" property="${column.key}" value="0"/>
            </c:if>
            <c:set target="${column_totals}" property="${column.key}" value="${column_totals[column.key] + column.value}"/>
            <c:set var="row_total" value="${row_total + column.value}" />
        </c:forEach>
        <td class="foo">${row_total}</td>
    </tr>
</c:foreach>
<tr>
  <td>total</td>
  <c:forEach var="column_total" items="${column_totals}">
     <td>${column_total.value}</td>
  </c:forEach>
</tr> 
```

不得不更改一些名称，因为我无法理解您的抱歉。

我认为它应该工作。

# css - 在网格系统/引导网格中的范围内放置边框或线

> ID：14382658
> 
> 赞同：0
> 
> 时间：2013-01-17T15:40:14.973
> 
> 标签：css, twitter-bootstrap, grid, border

你们都知道 960/940px 网格系统。我必须在一些跨度元素之间做一个带有边框的布局，即

```
[margin | span2] [mar... + border + ...gin][span2] 
```

我的意思是，边框/分割线应该在两个跨度的中间，但*在*间距边距内。

如果可能的话，它应该是一个没有图像的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:13:32.960

这个想法如何寻找初学者？
[http://jsfiddle.net/panchroma/8FEap/](http://jsfiddle.net/panchroma/8FEap/)

如果你想在它的左边有一个边框，你可以将类 .borderLeft 应用于一个跨度

```
<div class="row">
<div class="span6">span6</div>
<div class="span3 borderLeft">span3</div>
<div class="span3 borderLeft">span3</div>
</div><!-- end row --> 
```

并使用这个 CSS

```
.borderLeft { 

/* use border-box so border is applied inside the span and doesn't break the grid */

-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */

/* define your border */
border-left: 2px solid red;

/* remove the default bootstrap padding */
margin-left:10px !important;

/* make final adjustments to restore padding to span */
padding-left:10px;
margin-right:10px !important;

} 
```

# python - 在 Python 中将推文转换为字符串

> ID：14382662
> 
> 赞同：1
> 
> 时间：2013-01-17T15:40:24.573
> 
> 标签：python, twitter, unicode, tweets, tweepy

我正在使用 tweepy 收集随机推文，并且我想过滤掉非字母数字推文。

但为了进行检查，我首先需要将推文转换为字符串。例如，

```
from tweepy import StreamListener
....

class sListener(StreamListener):
       def on_status(self,status):
            ....
            text = str(status.text)
            if not isAlphanumeric(text):
                ...... 
```

但是，使用 str() 将推文转换为字符串本身会导致错误，如果推文是非 ascii 并带有以下消息：

```
UnicodeEncodeError: 'ascii' codec can't encode character 
```

所以我陷入了一个循环，我需要转换为字符串来过滤非ascii，但由于非ascii，我无法转换为字符串......

我什至不知道推文是什么数据类型...

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:42:59.067

看来您的推文编码不是`ascii`

尝试

```
text = unicode(status.text) 
```

代替

```
text = str(status.text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T20:13:09.227

我过去也遇到过类似的问题。看看这是否有效：

```
tweetText = status.text.encode("utf-8")
tweetText = unicode(tweetText, errors='ignore') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T13:05:08.653

尝试

```
text = status.text.encode('utf8') 
```

# apache - $_SERVER["CONTENT_LENGTH"] 未设置

> ID：14382672
> 
> 赞同：1
> 
> 时间：2013-01-17T15:41:20.317
> 
> 标签：apache, php

是否有任何 php.ini 设置可能导致`isset($_SERVER["CONTENT_LENGTH"])`永远不会在一台服务器上设置，但在另一台服务器上工作正常，其中应用程序代码相同且 php.ini 上传设置相同？在我使用的上传库中，由于这个问题，内容长度检查总是失败。在 PHP5.3、CentOS 和 Apache 上。谢谢你的帮助

编辑：我应该在请求标头中添加它， Content-Length:33586 - 但是在尝试处理时`$_SERVER["CONTENT_LENGTH"]`，它没有设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:04:53.050

Content-Length 由服务器应用程序发送，它不是 HTTP 请求的一部分。

您的应用程序将进行设置，但是您不应该在 PHP 中执行此操作，因为 PHP 会自动执行此操作。

* * *

如果您正在处理来自上传之类的输入，那么您只会在 HTTP 请求不是时获得 Content *-* Length `CHUNKED`。发送分块请求时，接收方不知道数据长度，直到所有块都发送完毕。

# vba - 为什么我的 Excel VBA 代码在关闭表单后仍然运行？

> ID：14382677
> 
> 赞同：1
> 
> 时间：2013-01-17T15:41:34.353
> 
> 标签：vba, excel, excel-2007

我正在使用我编写的几个自定义类创建一个相当广泛的 Excel 用户表单。目前事情似乎按预期工作，但有时当我关闭表单时，一个进程似乎仍在后台运行。

我知道这一点是因为在关闭所述表单后，有时 CPU 内核会继续满负荷运行，当我单击电子表格中的一个单元格时，公式栏中显示的值会快速闪烁，就好像电子表格被反复刷新一样。

我尝试在每个类（或至少所有大类）的 Class_Terminate 函数中插入中断和调试语句，它们似乎都可以巧妙地解构。此外，当我在代码中断时休息时，一切都会按预期停止。

那么，什么给了？有没有更好的方法来隔离问题？关闭用户窗体后，如何找出仍在运行的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T19:09:09.977

好吧，在一些激进的评论和取消评论之后，我的错误似乎与 VBA 的析构函数 Class_Terminate() 有关。

我在“WellCollection”类中有一个“WellReader”类，所以当我终止我的 WellCollection 类时，它会连同它一起破坏 WellReader。但是，如果我为这两个类定义了 Class_Terminate()，它会将我的程序抛出一个循环（字面意思）。简单地*定义*函数会导致错误，即使其中没​​有代码。

（这是[一个相关的 StackOverflow 帖子](https://stackoverflow.com/questions/1631321/vb6-collection-remove-doesnt-fire-class-terminate)，对这个问题有一定的了解。）

所以，虽然我不确定为什么这两个析构函数都不起作用，但现在我将不使用一个。感谢大家的帮助！

# php - IE 的条件语句

> ID：14382678
> 
> 赞同：0
> 
> 时间：2013-01-17T15:41:35.330
> 
> 标签：php, html, conditional-statements

我对一些条件语句有一个小问题。为了简化问题，我在下面展示了一个小示例。我有一种感觉，我可能以错误的方式处理这个问题，有人为我解释一下吗？

基本上我想在 IE7 及更低版本上显示 iframed 视频，并在 > IE7 上显示对象视频

```
<!--[if lte IE 7]>
     <iframe></iframe>
<![endif]-->

<!--[if (gt IE 7)|!(IE)]><!-->
    <object></object>
<!--<![endif]--> 
```

但是，IE6 两者都输出，我担心其他浏览器可能不输出。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:04:18.423

既然你已经满足了 <=IE7 的需求，你只需要为 >=IE8 做其他事情，所以这将起作用：

```
<!--[if lte IE 7]>
  <iframe></iframe>
<![endif]-->

<!--[if gte IE 8]>
  <object></object>
<![endif]--> 
```

而且语法更容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:47:49.857

世界上大多数主要网站都不支持 IE6，所以这绝对不是您需要担心的事情。

[这里](http://www.ie6countdown.com/)有一些关于全球 IE6 使用情况的不错的统计数据。这基本上意味着，如果您的网站不是专门为中国人制作的，那么您不应该打扰 - 并且（正如@Alec 在评论中所说） - 通知您的客户也很重要，因为它可以节省时间您和客户（以及聪明的客户都会欣赏来自消息灵通的开发人员的提示）。

顺便说一句，谷歌几个月前放弃了对 IE 8 ( !!! ) 的支持。[在这里](http://www.webmonkey.com/2012/09/google-drops-support-for-ie-8-windows-xp/)阅读更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:43:05.267

最后我用下面的代码解决了我自己的问题。

```
<!--[if IE 7]>

<![endif]-->

<!--[if (lt IE 7)|!(IE)]><!-->

<!--<![endif]--> 
```

# php - 如果他在函数中创建如何打印数组？

> ID：14382680
> 
> 赞同：1
> 
> 时间：2013-01-17T15:41:49.183
> 
> 标签：php, arrays

在函数 test() 中创建的数组。

然后我想在页面**test.php**上打印他们。

我的代码下来：

**配置文件**

```
function test(){
$str= array(
        'items' => array(
                0 => array(
                        'title' => 'Title',
                        'category' => 'Category name',
                        ),
                1 => array(
                        'title' => 'Title',
                        'category' => 'Category name',
                        ),
        ),
        'details' => array(
                'firstname' => 'firstname',
                'lastname' => 'lastname',
        ),
        'Id' => $Id,
        'OrderId' => 'fsdfsfdsrew'
);

$json = json_encode($str);
$base64 = base64_encode($json);

$sig = signMessage($base64, $secretPhrase);
} 
```

**测试.php**

```
require_once("conf.php");

test();
print_r($str);
print_r($json);
print_r($base64);
print_r($sig); 
```

请告诉我为什么代码不起作用？

请告诉我为什么不打印`$str`, `$json`,`$base64`和`$sig`?

怎么做？

最好没有全局参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:44:15.043

您不能不将它们作为函数返回值返回。在 PHP 中，函数中声明的变量（在这种情况下是您尝试 print_r 的数组）仅在该函数的范围内可用，除非您使用 global 关键字将它们声明为全局。

以下是 PHP 中变量范围的详细信息：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

您可以构造一个更大的数组来包含这些数组并从 test() 函数中返回它们：

```
 function test(){
     //function code here....
     ////...

     $results = array('str'=> $str, 
                      'json'=> $json, 
                      'base64'=>$base64, 
                      'sig' => signMessage($base64, $secretPhrase)
                  ) ;

      return $results;
  } 
```

然后像这样调用它：

```
 $results = test();
  print_r($results['str']);
  print_r($results['sjson']);
  print_r($results['base64']);
  print_r($results['sig']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:46:21.597

有很多方法可以做到这一点：首先，如果要在其他类上使用，则必须返回该值。在您的测试中，您可以执行以下操作：

```
$something = new Conf();
$someelse = $something->test();
echo $someelse; 
```

# javascript - 将 `undefined` 传递给 bind() 是什么意思？

> ID：14382682
> 
> 赞同：10
> 
> 时间：2013-01-17T15:41:53.703
> 
> 标签：javascript, bind

我正在阅读一些关于[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)javascript 中的函数的文档。

其中一个例子是这样开始的：

```
function list() {
  return Array.prototype.slice.call(arguments);
}

var list1 = list(1, 2, 3); // [1, 2, 3]

//  Create a function with a preset leading argument
var leadingZeroList = list.bind(undefined, 37);

var list2 = leadingZeroList(); // [37] 
```

所以我的问题是：

`(undefined, 37)`传到这里到底是什么意思`bind()`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T15:45:27.113

这意味着您不想`this`在生成的绑定函数中引用任何内容。换句话说，它确保当您调用绑定函数时，`this`将是`undefined`. 您为什么要这样做当然取决于代码。许多功能不使用`this`，所以这是一种整洁的方式。

请注意，在非严格模式下，运行时*可能*会用全局对象（`window`在浏览器中）替换`undefined`，但我找不到规定该行为的规范。在严格模式下，不执行此类替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:46:15.573

第一个参数`bind`指定`this`函数内部的值。它可用于将其转换为作用于对象的“方法”。但是，如果你通过`undefined`它意味着它仍然是一个函数。因此，在您上面提到的示例中，没有区别。

# google-plus - Google+ .Net API - 获得身份验证和检索个人资料

> ID：14382685
> 
> 赞同：0
> 
> 时间：2013-01-17T15:42:05.373
> 
> 标签：google-plus, google-api-client

我正在尝试通过 .NET API 获取 google+ 的用户个人资料信息，但遇到了问题。

1.  有谁知道他们是否改变了特殊 ID“我”的工作方式？

在文档中，它说这可以用作特殊 ID 来获取当前经过身份验证的用户信息，但是这会从我的代码中的 API 和 Google 自己的测试页面[https://developers.google.com/+/中引发 404 api/最新/人/获取](https://developers.google.com/+/api/latest/people/get)。尝试此操作时我已登录。

1.  有谁知道如何获取用户 ID，因为我很乐意使用它而不是我，但据我所知，在用户进行身份验证后它不会返回（只是一个身份验证码）？

我还尝试使用在使用标准 .net Oauth 内容时返回的用户 ID，但它不是正确的 ID，我认为它是用于其他用途。

至于我进入这个阶段的方法，我首先在这里下载了示例文件：[http ://code.google.com/p/google-api-dotnet-client/wiki/GettingStarted](http://code.google.com/p/google-api-dotnet-client/wiki/GettingStarted)

他们没有加号示例，因此我采用了 Tasks.ASP.NET.SimpleOAuth2 示例并将任务（工作正常）换成加号等效项。

我也尝试将其纳入我自己的项目中。

都没有奏效。我将用户转发到谷歌，在那里他们给了我很好的访问权限，然后当我返回时，就我所见，他们已成功通过身份验证，但是当我调用 service.People.Get("me") 时，它返回 404。

如果有人可以帮助解决上述问题（使用我，或获取用户 ID），我将不胜感激。

对于关闭此问题初始版本的版主，我已尝试将其作为一个尽可能直接的问题，因此请不要关闭它。这是一个合理的问题，我真的很想帮助他深入了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:05:53.977

看来你需要使用：

人员测试 = service.People.Get("me").Fetch();

并不是

req = service.People.Get("我"); 人员测试 = req.Fetch();

尽管它们似乎相同，但第一个有效，第二个无效。

仍然不确定为什么谷歌自己的页面不起作用。现在来了解如何将东西添加到范围内，例如生日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:56:42.437

鉴于最近的平台更新，这现在已经过时了。尽管 plus.me 范围仍然存在并且此代​​码可以工作，但您应该使用 plus.login 范围在 C# 中检索配置文件数据。要获得开始检索和呈现配置文件信息的好方法，请从此处提供的 Google+ C# 快速入门开始：

*   [https://developers.google.com/+/quickstart/csharp](https://developers.google.com/+/quickstart/csharp)

* * *

首先，'me' id 仍然有效并且没有改变。它的工作方式是：

1.  您使用标准 OAUTH2 流程对用户进行身份验证
2.  您使用该库执行具有特殊值“我”的 People.get

404 错误代码有点麻烦，这意味着客户端没有找到端点。要对此进行调试，您可能需要使用像 fiddler 这样的数据包嗅探器来查看它查询的实际 URL 是什么。

无论如何，一些 C# 代码怎么样。下面的例子展示了如何使用 plus 服务来获取当前认证的用户（假设你已经认证了某人）。与您的代码段不同的是，您需要为 API 调用形成一个 get 请求，然后在 get 请求上运行 fetch。我已经包含了以下示例，用于获取“我”，并且以下代码有效：

```
var auth = CreateAuthenticator();
plusService = new PlusService(auth);
if (plusService != null)
{
  PeopleResource.GetRequest prgr = plusService.People.Get("me");
  Person me = prgr.Fetch();                                           
} 
```

服务器的所有配置和让客户端工作都非常困难，在此处粘贴所有代码将不如仅提供示例有用。

所以...我编写了一个示例应用程序来演示如何执行此操作，并且还包含一个包装器，可以更轻松地使用 C# 中的 Google+ API 进行开发。在此处获取： [Google+ C# 服务器端演示和库](http://wheresgus.com/CS_SSFlow.zip)

# .net - 有没有办法将连接字符串存储在 machine.config 以外的中心位置

> ID：14382690
> 
> 赞同：2
> 
> 时间：2013-01-17T15:42:10.180
> 
> 标签：.net, configuration, connection-string, app-config

我目前正在尝试缓解我们的客户端服务器上存在的配置地狱。我们有大约 8 个应用程序，每个应用程序都有自己的连接字符串信息，我们希望将连接字符串存储在一个中心位置，以使我们可怜的支持团队的生活更轻松。但是，我被要求避免在 machine.config 中执行此操作，因为（1）我们通常不是客户端站点服务器上的唯一第三方，而且显然（只要我们合理命名，这个问题应该无关紧要，但那是我必须打一场不同的斗争）（2）有几个客户不希望我们接触 machine.config （我认为这是无效的原因，但我没有得到报酬来担心这样事物）。

不幸的是，除非外部文件位于应用程序配置文件所在的目录中或目录下，否则通过 configSource 属性链接到外部文件不起作用。

有什么方法不会让我在应用程序启动时将连接字符串信息复制到配置文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:56:33.750

您可以将其存储在活动目录中，然后使用查询检索它。或者你可以试试这个： http: [//www.codeproject.com/Articles/66569/How-to-store-shared-app-settings-and-connection-st](http://www.codeproject.com/Articles/66569/How-to-store-shared-app-settings-and-connection-st)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:44:19.777

您可以将它们存储在注册表中。

# r - barplot() 基于列中类别数的条的不同灰色颜色

> ID：14382697
> 
> 赞同：3
> 
> 时间：2013-01-17T15:42:26.577
> 
> 标签：r

我在 R 中有一个数据框。每个数据框中有 8 个变量。

我想制作一个条形图，在其中我想根据一个特定变量中的值为条形分配不同的灰色阴影。

这就是我制作条形图的方式：

```
barplot(x$cov, names.arg = x$exon, 
    xlab = x$gene[1],
    ylab = "read depth" , 
    border = gray.colors(???)) 
```

变量 exon 由整数组成。例如：

```
0 0 0 0 1 1 1 2 2 3 3 3 3 4 4 4 
```

所以我希望所有的条都`$exon = 0`处于一种灰色阴影中 所有的条形都`$exon = 1`处于另一种灰色阴影中，依此类推......

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T16:12:30.140

`cov`首先，定义包含和`exon`值的样本数据框。

```
x<-data.frame(cov=sample(1:20,20),exon=rep(0:4,each=4)) 
```

使用参数`col=`而不是`border=`因为它在示例中更明显。

灰色向量由 的唯一值的长度制成`exon`。然后`[]`用于根据`exon`值选择每个条的颜色。

```
barplot(x$cov, names.arg = x$exon, 
        ylab = "read depth" , 
        col = gray.colors(length(unique(x$exon)))[as.factor(x$exon)]) 
```

![在此处输入图像描述](../Images/4bb1e50edcef851d63a20b367ace3f83.png)

# css - CSS 伪 a:link 覆盖 a:visited 的文本装饰

> ID：14382698
> 
> 赞同：2
> 
> 时间：2013-01-17T15:42:29.883
> 
> 标签：css, text-decorations, visited

对于以下 CSS：

```
a:link {color: blue; text-decoration:underline;}
a:visited {color: red; text-decoration:none;}
a:hover {color: red; text-decoration:none;}
a:active {color: red; text-decoration:none;} 
```

已访问状态变为红色字体，但下划线并未消失。它似乎被 的`a:link`定义覆盖了`text-decoration`。

目前，确保访问状态没有下划线的唯一方法是给所有状态都没有下划线。它一定是新的东西，因为在过去，这个 CSS 是有效的。有没有办法设置`a:link`下划线和`a:visited`不下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:03:09.937

我相信浏览器已经将其作为一种安全措施来实现。以前，人们可以对访问的链接进行不同的样式设置，人们使用它来找出访问者访问过的网站。他们只是简单地列出了网站上数千个流行的 URL（很可能是隐藏的），并用 JS 检查了哪些 URL 的样式与其他 URL 不同。通过这种方式，网站所有者可以知道他的访问者经常访问哪些网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:57:40.423

您必须对所有链接进行相同的文本装饰...

替代文本装饰不起作用

这是演示： http: [//phihag.de/2011/so/visited.html](http://phihag.de/2011/so/visited.html)

祝你好运 ！

# lync - 无法捕捉 Lync 关闭的时刻

> ID：14382701
> 
> 赞同：0
> 
> 时间：2013-01-17T15:42:45.263
> 
> 标签：lync

我正在开发一个应用程序来捕捉所有的对话并做一些事情，所以我使用

```
_lyncClient.ConversationManager.ConversationAdded += ConversationManagerConversationAdded; 
```

但是，即使重新启动 Lync，我也希望我的应用程序能做一些事情。所以我使用计时器来检查 Lync 是否正在运行。

```
public static bool LyncPresented
{
    get
    {
        try
        {
            _lyncClient = LyncClient.GetClient();
            return true;
        }
        catch(ClientNotFoundException)
        {
            Trace.WriteLine("Can't found a working Lync instance.");
            return false;
        }

    }
} 
```

我第一次在没有运行 Lync 的情况下启动我的应用程序，我可以看到 Lync 没有启动。然后我运行 Lync，现在我可以找到它。然后我关闭了 Lync，但`LyncClient.GetClient()`不再抛出异常，我的应用程序仍然认为 Lync 可用。

我究竟做错了什么？确定 Lync 是否正在运行的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:18:01.637

不知道为什么，但下面的代码正在工作

```
public static bool LyncPresented
{
    get
    {
        try
        {
            _lyncClient = LyncClient.GetClient();
            bool dummy = _lyncClient.InSuppressedMode;
            return true;
        }
        catch(ClientNotFoundException)
        {
            Trace.WriteLine("Can't found a working Lync instance.");
            return false;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T16:47:58.083

我建议使用 ClientDisconnected 事件而不是您的循环。

# css - 通过萤火虫即时更改CSS？

> ID：14382703
> 
> 赞同：0
> 
> 时间：2013-01-17T15:42:49.207
> 
> 标签：css

是否可以在使用 firebug 调试 css 问题、更改 css 规则的值，然后查看它如何动态/动态地更改页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:53:07.990

是的，只需在萤火虫面板中单击要更改的变量。该变量应该显示为一个文本框，您可以立即编辑该文本框，但不能永久编辑，以向您展示样式将如何影响元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:02:24.930

**是的，您可以**即时动态编辑和查看更改。**但是 Firebug 不会保存对主题**的更改，您需要复制在 Firebug 中所做的更改并将它们粘贴到主题的 style.css 中的适当位置。这些链接会有所帮助：

[http://www.tutorial9.net/tutorials/web-tutorials/quick-easy-css-development-with-firebug/](http://www.tutorial9.net/tutorials/web-tutorials/quick-easy-css-development-with-firebug/)

[http://www.studiopress.com/tips/using-firebug.htm](http://www.studiopress.com/tips/using-firebug.htm)

# perl - perl 脚本中的 Bash 数组

> ID：14382704
> 
> 赞同：0
> 
> 时间：2013-01-17T15:42:50.530
> 
> 标签：perl, bash, ini

我有一个 bash 脚本，其中包含唯一的内容（一个数组），例如

### bash_array.sh

```
locDbList=(default default_test) 
```

我需要在 Perl 脚本中使用这个数组。

是否可以以某种方式将 bash 文件中的数组定义加载到 Perl 中？

如果不是，那么我如何定义具有相同数组的 Perl 文件并将其加载到第二个 Perl 脚本中？

在第二种情况下：

### perl_array.pl

```
second_perl_file.sh ( load the perl_array in here ). 
```

最后一个选项是将数组信息以我可以从 Perl 和 bash 中读取的格式放置，例如 ini 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:18:24.817

如果您在 perl 中运行，您无法从`%ENV`事件中看到它`declare -a`，它仍然不会提取在直接外部范围中定义的数组。

为此，您可能必须在两端工作。这并不容易，但这是一个开始。

### 传递给 Perl

*   首先，我创建了一个 bash 函数来准备传递这个值。

    ```
    function pass_array
    {
        # get the array name 
        declare array_name=$1;
        # get all declarations for defined arrays.
        # capture the line that corresponds with the array name
        declare declaration=$(declare -a | grep --perl-regex --ignore-case "\\b$array_name\\b");
        # - At this point this should look like:
        #   declare -a* array_name='([0]="value1", [1]="value2", [2]="value3")'
        # - Next, we strip away everything until the '=', leaving:
        #   '([0]="value1", [1]="value2", [2]="value3")'
        echo ${declaration#*=}; 
    } 
    ```

*   你可以像这样将它传递给 perl：

    ```
    perl -Mstrict -Mwarnings -M5.014 -MData::Dumper -e 'say Data::Dumper->Dump( [ \@ARGV ], [ q[*ARGV] ] )' "$(pass_array locDbList)" 
    ```

*   在 Perl 方面，您可能有一个这样的便利函数：

    ```
    sub array_from_bash {
        return shift =~ m/\[\d+\]="([^"]*)"/g;
    } 
    ```

### 命名数组

当然，您可能希望保留数组的名称，以允许传递多个，或者动态定位它，例如使用其他环境变量。( `export DB_LIST_NAME=locDBList`)

在这种情况下，您可能想要更改`pass_array`bash 函数的回声。

```
 echo echo ${declaration#*-a[b-z]* }; 
```

并且可能希望有这样的 Perl 函数：

```
sub named_array_from_bash {
    return unless my $array_name = ( shift // $_ );
    my $arr_ref = [ @_ ? @_ : @ARGV ];
    return unless @$arr_ref 
               or my ( $array_decl ) = 
                    grep { index( $_, "$array_name='(" ) == 0 } @$arr_ref
                    ;
    return array_from_bash( substr( $array_decl, length( $array_name ) + 1 ));
} 
```

### 环境变量

然而，另一个想法是简单地导出具有相同信息的变量：

```
declare decl=$(declare -a | grep --perl-regex --ignore-case "\\b$array_name\\b");
export PERL_FROM_BASH_LIST1=${decl#*-a[a-z]* }; 
```

并从 Perl 中阅读。

```
my @array = array_from_bash( $ENV{PERL_FROM_BASH_LIST1} ); 
```

# python - 如何模拟超类的 __init__ 创建包含用于单元测试的模拟对象的属性？

> ID：14382706
> 
> 赞同：11
> 
> 时间：2013-01-17T15:42:58.427
> 
> 标签：python, mocking

我正在尝试为类的编写单元测试`__init__`：

```
def __init__(self, buildNum, configFile = "configfile.txt"):
        super(DevBuild, self).__init__(buildNum, configFile)

        if configFile == "configfile.txt":
            self.config.MakeDevBuild() 
```

config 属性由 super 的`__init__`. 我正在使用[mock](http://mock.readthedocs.org/en/latest/index.html)，我希望 config 属性是一个模拟对象。但是，我一直无法弄清楚如何真正做到这一点。这是我能想到的最好的测试：

```
def test_init(self):
        with patch('DevBuild.super', create=True) as mock_super:
            mock_MakeDevBuild = MagicMock()
            mock_super.return_value.config.MakeDevBuild = mock_MakeDevBuild

            # Test with manual configuration
            self.testBuild = DevBuild("42", "devconfigfile.txt")
            self.assertFalse(mock_MakeDevBuild.called)

            # Test with automated configuration
            self.testBuild = DevBuild("42")
            mock_MakeDevBuild.assert_called_once_with() 
```

但是，这不起作用——我收到一个错误：

```
Error
Traceback (most recent call last):
  File "/Users/khagler/Projects/BuildClass/BuildClass/test_devBuild.py", line 17, in test_init
    self.testBuild = DevBuild("42")
  File "/Users/khagler/Projects/BuildClass/BuildClass/DevBuild.py", line 39, in __init__
    self.config.MakeDevBuild()
AttributeError: 'DevBuild' object has no attribute 'config' 
```

显然我没有正确设置配置属性，但我不知道我应该在*哪里设置它。*或者就此而言，如果我想要做的甚至是可能的。谁能告诉我我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T20:44:41.793

您不能通过`__init__`直接设置来模拟 - 请参阅[mock.py 中的 _unsupported_magics](http://mock.googlecode.com/hg/mock.py)。

至于你能做什么，你可以`__init__`通过将它传递给补丁来模拟，如下所示：

```
mock_makeDevBuild = MagicMock()
def mock_init(self, buildNum, configFile):
    self.config = MagicMock()
    self.config.MakeDevBuild = mock_makeDevBuild

with patch('DevBuild.SuperDevBuild.__init__', new=mock_init):
    DevBuild("42")
    mock_makeDevBuild.assert_called_once_with() 
```

DevBuild`SuperDevBuild`的基类在哪里。

如果你真的想模拟`super()`，你也许可以创建一个类，然后`__init__`手动绑定到对象，比如

```
mock_makeDevBuild = MagicMock()
def get_mock_super(tp, obj):
    class mock_super(object):
        @staticmethod
        def __init__(buildNum, configFile):
            obj.config = MagicMock()
            obj.config.MakeDevBuild = mock_makeDevBuild
    return mock_super
with patch('DevBuild.super', create=True, new=get_mock_super):
    DevBuild("42")
    mock_makeDevBuild.assert_called_once_with() 
```

这有效，但很丑陋..

# python-sphinx - 在 sphinx autodoc 的文档字符串中包含模块概要

> ID：14382708
> 
> 赞同：3
> 
> 时间：2013-01-17T15:43:00.397
> 
> 标签：python-sphinx, autodoc

我正在使用 Sphinx`autodoc`从源代码中的文档字符串生成 python 模块的文档。我知道我可以`:synopsis:`在`automodule`指令中包含 a ，但这违背了 using 的目的，`autodoc`即将所有文档放在文档字符串中。

所以我尝试向`module`文件中添加一个指令，如下所示：

```
.. module:: MyModule
    :platform: Unix, Windows
    :synopsis: A simple module to provide frobnication functions. 
```

但随后我收到关于重复模块的“严重”警告，因为我正在声明它并且`autodoc`也在声明它。此外，这样做也有点违背了使用的目的，`autodoc`因为我必须指定模块名称，而不是`autodoc`从文件名中找出它（没什么大不了的，但如果我决定更改模块，我也需要在这里更改它）。

我希望我可以为此使用类似于`moduleauthor`指令的东西，比如`modulesynopsis`或`synopsis`单独作为指令，但 Sphinx 似乎无法识别其中任何一个。

有谁知道使用时是否可以在文档字符串中包含概要`autodoc`？

# c# - 如何将f#文件添加到c#类库

> ID：14382709
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:43:02.583
> 
> 标签：c#, f#, visual-studio-2012

> **可能重复：**
> [是否可以在单个 Visual Studio Windows 控制台项目中混合 .cs (C#) 和 .fs (F#) 文件？（。网）](https://stackoverflow.com/questions/466298/is-it-possible-to-mix-cs-c-and-fs-f-files-in-a-single-visual-studio-wind)

我有 ac# 类库项目。让 f# 文件在同一个项目中工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:44:59.633

你不能。您需要将它们创建为单独的项目。但是，可以使用[ILMerge](http://www.microsoft.com/downloads/details.aspx?FamilyID=22914587-B4AD-4EAE-87CF-B14AE6A939B0&displaylang=en)合并以在构建时创建单个程序集。

# java - XML文件到数据库表+模型类生成器

> ID：14382713
> 
> 赞同：0
> 
> 时间：2013-01-17T15:43:14.077
> 
> 标签：java, database, spring

我有一个要求如下。假设我有一个包含以下内容的 XML 文件。

```
<?xml version="1.0"?>
<items>
<item id="1" class="Company" interface="true">
</item>
<item id="2" class="MyCompany" implements="Company">
<attribute name="name" value="CompanyB"/>
<attribute name="vatNumber" value="5678"/>
<reference name="CEO" ref_id="11"/>
<reference name="address" ref_id="19"/>
<collection name="contractors">
  <reference ref_id="4"/>
  <reference ref_id="3"/>
</collection>
<collection name="departments">
  <reference ref_id="7"/>
  <reference ref_id="6"/>
</collection>
<collection name="oldContracts">
  <reference ref_id="4"/>
  <reference ref_id="3"/>
</collection>
<collection name="secretarys">
  <reference ref_id="14"/>
  <reference ref_id="15"/>
</collection>
</item>
</items> 
```

我想有一个转换器直接将这个项目文件转换成数据库表，同时为每种类型的项目生成模型类。所以我可以有一个模型服务来控制它们。此外，当我向类型添加更多属性时，它应该能够自动更新数据库表和模型代码。

以更好的方式，我需要某种模型代码生成器来创建数据库表并以精心策划的方式映射它们？

是否已经有某种工具可以执行这种类型的业务逻辑。？？？我不喜欢重新发明轮子。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:21:21.870

实际上，经过一番谷歌搜索后，我发现了 Apache Torque，从我的需求来看，它看起来很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:31:49.017

我建议您开发将 XML 转换为 Hibernate HBM 文件的代码。然后使用 Hibernate 作为持久层。

您甚至可以创建从您的格式到 HBM 的 XSLT 转换。

# android - Android：NoClassDefError 发生在 <4.0 但不是 >=4.0？

> ID：14382714
> 
> 赞同：1
> 
> 时间：2013-01-17T15:43:20.347
> 
> 标签：android

我正在尝试从我的 Activity 启动一个新意图，但我得到了 NoClassDefFoundError。异常发生解决`MyClassB.class`。奇怪的是我可以解析其他类，并且该错误仅发生在 android 版本 2.2 和 2.3 中，它在 4.0+ 中运行良好。

导致错误的类和其他成功解析的类都与正在执行代码的 Activity 在同一个包中。基本上，下面的代码在 2.2/2.3 上给出了以下错误，但在 4.0+ 上工作正常。我也尝试过使用完整的包名，例如：`com.me.MyClassB.class`，但得到相同的错误。

我意识到这个问题很模糊，但我非常困惑，希望有人能提供帮助。

```
package com.me;

public class MyActivity extends Activity
{
     protected onCreate(Bundle bundle)
    {
       super.onCreat(bundle);

        Class a = MyClassA.class;
        Class b = MyClassB.class;
    }
}

01-17 10:37:36.473: E/AndroidRuntime(1976): java.lang.NoClassDefFoundError: com.me.MyClassB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:44:47.227

我不确定这是否是问题，但在您的 onCreate 方法中，您需要`super.onCreate(bundle`在开头添加 ) 例如

```
protected onCreate(Bundle bundle)
{
        super.onCreate(bundle);
        Class a = MyClassA.class;
        Class b = MyClassB.class;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:09:17.987

这是因为`MyClassB.class`实现`ActionBar.OnNavigationListener`. 似乎如果类包含用于更高 api 级别的某些代码，它们在运行时无法正确设置，从而导致这些错误。我预计`MyClassB.class`会在 2.3 上崩溃，但这`NoClassDefFoundError`特别令人费解。

# android - Android Market - 不同的签名证书

> ID：14382715
> 
> 赞同：0
> 
> 时间：2013-01-17T15:43:20.730
> 
> 标签：android, certificate

我想使用相同的包名称但不同的签名证书更新我的应用程序（顾问制作了第一个版本，我没有他们的证书信息）。如果我取消发布然后上传新的 apk，现有用户可以轻松更新还是必须卸载并下载新应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:52:38.790

这是不可能的。密钥库包含一个证书，用于对您的 apk 进行数字签名。每个证书都是完全唯一的，不能从旧的 apk 重新生成或恢复。

谷歌依赖它，因为它非常安全，并允许他们真正减少有人可以破解您的开发者帐户详细信息并上传恶意 apk 作为现有应用程序更新的机会。

现在，您必须使用不同的密钥在不同的包名称下重新上传应用程序，并以某种方式通知用户您已更改应用程序的详细信息。

当您取消发布该应用时，新用户将无法再看到它，但老用户仍会安装它，并且能够在 Google Play 中看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:44:26.543

他们将不得不下载一个新的应用程序。

只有当您拥有原始证书时，才能让用户更新现有应用程序。

请参阅：[在 Android Market 上发布更新](http://developer.android.com/distribute/googleplay/publish/preparing.html#marketupgrade)

> 在上传更新的应用程序之前，请确保您已在清单文件的元素中增加了 android:versionCode 和 android:versionName 属性。此外，包名称必须相同，并且**.apk 必须使用相同的私钥签名。如果软件包名称和签名证书与现有版本不匹配，Market 将认为它是一个新应用程序，不会将其作为更新提供给用户**。

另见[这篇](https://stackoverflow.com/questions/4843212/the-apk-must-be-signed-with-the-same-certificates-as-the-previous-version)文章：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:46:29.720

不怕。Play 商店要求更新的应用程序具有相同的包名称和相同的证书。

如果您需要创建一个新证书，您必须将其发布为具有不同包名称的新证书，并将此版本上传到市场。

然后，您必须告诉现有用户，为了获得更新，他们应该从 Play 商店下载新版本并从设备中删除现有应用程序。

# database - HTML5，关于本地数据库的问题

> ID：14382717
> 
> 赞同：0
> 
> 时间：2013-01-17T15:43:26.823
> 
> 标签：database, html, local

我正在学习 HTML 5/本地数据库。当我尝试使用它时，我遇到了奇怪的错误。请在这里帮忙。提前致谢

```
 <script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript">

    var db = openDatabase("DB_Comments", "", "", 102400);
    db.transaction(function (tx) {
        tx.executeSql("CREATE TABLE IF NOT EXISTS Comments(name TEXT, msg TEXT, time INTEGER)", []);
    });

    function SaveComments() {
        var name = jQuery("#txtName").val();
        var comments = jQuery("#txtComments").val();
        var time = new Date().toGMTString();

        db.transaction(function (tx) {
            tx.executeSql("INSERT INTO Comments VALUES (?,?,?)", [name, comments, time], function (tx, rs) { alert("DONE!"); }, function (tx, error) { alert(error); });
        });

        LoadComments();
    }

    function LoadComments() {
        var result = "";
        db.transaction(function (tx) {
            tx.executeSql("SELECT * FROM Comments", [], function (tx, rs) {
                for (var i = 0; i < rs.rows.length; i++) {
                    result = result + "<tr><td>" + rs.rows[i].time + "</td><td>" + rs.rows[i].name + "</td><td>" + rs.rows[i].comments + "</td></tr>";
                }
            });
        });
        jQuery("#commentslist").html(result);
    }

    jQuery(document).ready(function () {

    });
</script> 
```

然后我在 Chrome 版本 24.0.1312.52 m 中运行它；我无法上传 IMG，所以只需将 errr msg 放在这里：“tx: Exception: ReferenceError: tx is not defined”

# http - HTTP PUT 的比较和交换？

> ID：14382719
> 
> 赞同：2
> 
> 时间：2013-01-17T15:43:31.033
> 
> 标签：http, put, compare-and-swap, preconditions

有没有办法让[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)风格的机制成为修改某些资源的*唯一方法，同时遵循 HTTP 标准？*

有一个[`If-Match`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24)实现正确行为的标头，但是这个标头是可选的：据我所知，如果`If-Match`没有提供，服务器应该尊重`PUT`. （也就是说，由客户端决定是否要进行比较和交换，或者只是交换。）`412 Precondition Failed`如果客户端尝试提供`PUT`或`POST`不提供`If-Match`标头，是否可以接受响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:26:41.230

不，但您*可以*使用状态代码 428 Precondition Required（请参阅[http://greenbytes.de/tech/webdav/rfc6585.html#status-428](http://greenbytes.de/tech/webdav/rfc6585.html#status-428)）。

# android - 有什么方法可以对所有级别的 api 进行安全的摄像头意图吗？

> ID：14382720
> 
> 赞同：2
> 
> 时间：2013-01-17T15:43:34.237
> 
> 标签：android, android-intent, camera, android-4.2-jelly-bean

从 Froyo 到冰淇淋三明治是这样的：

```
Intent intent = new
Intent(MediaStore.ACTION_IMAGE_CAPTURE);
File file = new File(Environment.getExternalStorageDirectory(), "test.jpg");
tempUriCameraDeviceNotSuported = Uri.fromFile(file);
intent.putExtra(MediaStore.EXTRA_OUTPUT,
tempUriCameraDeviceNotSuported);
startActivityForResult(intent, 0); 
```

但是对于果冻豆它不起作用，你必须做这样的事情：

```
Intent takePicture = new Intent(
MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePicture, 0); 
```

我不确定这个错误是否只发生在果冻豆中，或者它也取决于硬件模型。谷歌对这个问题只字未提（为什么？为什么？）。有人知道我在哪里可以找到所有设备及其正确相机实现的列表？有人知道最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:54:07.787

> 从 Frojo 到 Icre cream 就是这样

请理解，您对代码所做的是要求随机应用为您拍照。该随机应用程序可能是：

*   AOSP 相机应用程序，或
*   设备制造商的替换相机应用程序，或
*   用户安装的相机应用程序，或
*   任何其他选择支持`MediaStore.ACTION_IMAGE_CAPTURE`恰好驻留在设备上的东西

> 但是对于果冻豆它不起作用

有才华的程序员会解释“它不起作用”是什么意思。

> 我不确定这个错误是否只发生在果冻豆中

有才华的程序员会解释什么是“错误”。

除此之外，Android 本身与它几乎没有关系。该错误很可能存在于您在“果冻豆”设备上使用的任何相机应用程序中。

> 谷歌对这个问题只字未提（为什么？，为什么？）。

有才华的程序员会比“它不起作用”更详细地解释“问题”是什么。

> 有人知道我在哪里可以找到所有设备及其正确相机实现的列表？

有超过 1,000 台 Android 设备。我有理由相信 Play 商店和其他地方有 1,000 多个应用程序是“相机应用程序”或其他支持`MediaStore.ACTION_IMAGE_CAPTURE`。这意味着您的列表中有超过 1,000,000 种设备和应用程序组合。欢迎您自己制定这样的清单。

如果您觉得这`MediaStore.ACTION_IMAGE_CAPTURE`对您的情况不可靠，欢迎您自己使用`android.hardware.Camera`.

此外，FWIW，[这个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/Content)，它使用与您的第一个代码片段中的代码大致相同的代码，在运行 Android 4.2.1 的 Galaxy Nexus 和运行 Android 4.1.2 的 Nexus S 上运行良好，两者都是“果冻豆” ”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:46:54.400

您可以随时检查操作系统版本：

```
 if (android.os.Build.VERSION.SDK_INT >= 17) {
        Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(takePicture, 0);
    } else {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File file = new File(Environment.getExternalStorageDirectory(),
                "test.jpg");
        tempUriCameraDeviceNotSuported = Uri.fromFile(file);
        intent.putExtra(MediaStore.EXTRA_OUTPUT,
                tempUriCameraDeviceNotSuported);
        startActivityForResult(intent, 0);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T12:30:28.317

检查我的示例，实际上它适用于 2.3.3 和 4.1 和 4.2 试一试！

[画廊相机演示在 Github](https://github.com/nicolasjafelle/GalleryCameraDemo)

# png - 无法让 PNG 透明度在 JOGL 中工作

> ID：14382721
> 
> 赞同：1
> 
> 时间：2013-01-17T15:43:37.107
> 
> 标签：png, textures, jogl

我正在尝试在 jogl 中使用透明 png 编写文本，但我无法终生弄清楚如何使它工作。我在互联网上到处都是，但是关于 JOGL 的适当文档很少。

这是我加载纹理的方式：

```
private void loadTEXTure()    //Har har, get it?
{
    File file = new File(fontMap);

    try 
    {
        TextureData data = TextureIO.newTextureData(file, GL.GL_RGBA, GL.GL_SRGB8_ALPHA8, false, TextureIO.PNG);
        textTexture = TextureIO.newTexture(data);
    }
    catch (GLException e) { e.printStackTrace(); } 
    catch (IOException e) { e.printStackTrace(); }
} 
```

这就是 png 的显示方式：

```
public void displayCharacter(GL gl, int[] textureBounds, int x1, int y1, int x2, int y2)
{
    float texCordsx1 = ((float) textureBounds[0])/((float) textTexture.getWidth());
    float texCordsy1 = ((float) textureBounds[1])/((float) textTexture.getHeight());
    float texCordsx2 = ((float) textureBounds[2])/((float) textTexture.getWidth());
    float texCordsy2 = ((float) textureBounds[3])/((float) textTexture.getHeight());

    gl.glEnable(GL.GL_BLEND);
    gl.glBlendFunc(GL.GL_SRC_ALPHA, GL.GL_ONE_MINUS_SRC_ALPHA);

    textTexture.enable();
    textTexture.bind();

    gl.glBegin(GL.GL_QUADS);
    gl.glTexCoord2f(texCordsx1, texCordsy1);
    gl.glVertex2f(x1, y1);
    gl.glTexCoord2f(texCordsx1, texCordsy2);
    gl.glVertex2f(x1, y2);
    gl.glTexCoord2f(texCordsx2, texCordsy2);
    gl.glVertex2f(x2, y2);
    gl.glTexCoord2f(texCordsx2, texCordsy1);
    gl.glVertex2f(x2, y1);
    gl.glEnd();

    textTexture.disable();
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:25:06.173

Your blending configuration seems to be fine. They are exactly like mine, which actually work. However the error I think lies on the newTextureData(GLProfile glp... method. Your method says newTextureData(file... the newtexturedata() method doesn't accept File objects instead it is expecting a GLProfile profile instead as the first argument. As I read in the documentation [http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/opengl/util/texture/TextureIO.html](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/opengl/util/texture/TextureIO.html)

I suggest you change that lines:

```
TextureData data = TextureIO.newTextureData(file, GL.GL_RGBA, GL.GL_SRGB8_ALPHA8,    false, TextureIO.PNG);
textTexture = TextureIO.newTexture(data); 
```

to

```
textTexture = TextureIO.newTexture(file,mipmap); 
```

or

```
textTexture = TextureIO.newTexture(cl.getResource("/my/file/path/myimage.png"), false, null); 
```

instead. If your file variable is correct, it should work.

For further JOGL readings you should consider these tutorials: [http://www3.ntu.edu.sg/home/ehchua/programming/opengl/JOGL2.0.html](http://www3.ntu.edu.sg/home/ehchua/programming/opengl/JOGL2.0.html)

For JOGL documentation you should consider reading: [http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc)

# jquery - 仅悬停子元素

> ID：14382722
> 
> 赞同：0
> 
> 时间：2013-01-17T15:43:42.923
> 
> 标签：jquery

我有 p 标签，里面有图片，我希望用户只能悬停图片标签。目前，当用户悬停图像时，它会触发段落`mouseenter`并且图像`mouseenter`永远不会触发。

```
<p>Some text.. <img src="(URL)" /></p> 
```

我目前正在使用鼠标输入。

```
 // Hover over a paragraph
    $("article p").mouseenter(function () {
        window.console.log("paragraph trigger");
        self.showControls(this, "p");
    });

    // Hover over an image in a paragraph
    $("article p img").mouseenter(function (e) {
        e.stopPropagation();
        window.console.log("image trigger");
        self.showControls(this, "img");
    }); 
```

如何进行设置，以便用户可以将鼠标悬停在段落或其中的图像上，而不会相互影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:54:05.860

向文本添加一个跨度并锁定它，以分隔事件处理程序。：

```
<p><span>Some text..</span> <img src="(URL)" /></p> 
```

如果您希望`img`mouseenter 也触发`span`事件，您可以`$("span").mouseenter();`在`img`事件处理程序中调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:51:18.257

我建议在运行其中的任何内容之前在 mouseenter() 上稍作延迟，并要求鼠标在触发前一秒钟*停留在该区域内。*

因此，如果用户将鼠标悬停在图像之前的段落上，他们需要悬停一秒钟才能看到该段落的任何内容。

* * *

[从这里开始](https://stackoverflow.com/questions/14382722/hover-child-element-only)的 jQuery 示例......您可能希望将其用于您的问题。

```
$("#paragraph").hover(function() {
  $.data(this, "timer", setTimeout($.proxy(function() {
     $(this).click();
  }, this), 2000));
}, function() {
   clearTimeout($.data(this, "timer"));
}); 
```

看起来它在触发事件之前等待了两秒钟（在这种情况下单击）。无论哪种方式，这都是我对编码的期待；触发点击每个元素之前的延迟。

# asp.net - 如何在 ASP.NET 跟踪中查看当前用户的声明？

> ID：14382723
> 
> 赞同：1
> 
> 时间：2013-01-17T15:43:45.630
> 
> 标签：asp.net, asp.net-mvc-4, wif, trace

我正在尝试调试一个使用 .NET 4.5 版本的 WIF 来提供用户身份的 ASP.NET MVC 应用程序。由于这些声明是由特定于该用户的远程 STS 生成的，因此很难测试在开发环境中为给定用户接收了哪些声明。

我想要的是一种机制，它允许我在用户使用系统时通过查看他们的肩膀来查看他们的声明。我立即想到了 ASP.NET WebForms 跟踪系统作为跟踪信息的来源和显示它的方便机制，但我不知道 ASP.NET MVC 中的等效项。

在使用测试仪进行调试时，是否有任何内置机制可以向我公开这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:18:31.120

选项

[一瞥](http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx)- 就像类固醇上的 webform inpage trage/trace.axd。适用于 MVC 应用程序，但几乎没有提供 web 表单（尽管团队一直在承诺大事，但这是一个值得关注的领域）。

trace.axd - Trace.Write 输出应该出现在这里，我从未尝试在繁忙的服务器上运行它。访问 trace.axd 应该适用于 mcv 应用程序，不确定 inpage 跟踪是否适用于 mvc - 我猜不是，但我从未尝试过。

<% "Some trace" %> -- 我有时会将诊断信息转储到所有屏幕并将其放在页脚中，或者将其放在页脚中然后将文本设置为白底白字，这样我就可以指导用户如何查看和复制它，但他们通常不会看到它。

System.Diagnostics TraceSource 和相关的类——它比 Trace.Write 更好，但如果你经常使用 trace，它会有一些*缺陷*。不过，在某些情况下，您不能假设您最喜欢的跟踪/日志库将可用。如果我要使用它，我会编写一个自定义侦听器并将用户的诊断数据写入数据库或文件，文件的侦听器已经存在。

Log4Net——一个跟踪/日志框架。支持写入各种位置——控制台、数据库、文件等。与 System.Diagnostics 相比，设计缺陷更少，但不需要向您的应用程序添加更多依赖项。与 System.Diagnostics 使用相同 - 登录到文件或数据库并在那里检查您的用户 STS 值。

我从来没有幸运地使用过 WIF 或 STS，但我想漂亮地打印一个对象及其属性对于任何对象都是相同的。如果您需要知道如何从中提取特定信息，您可能需要单独发布 WIF/STS 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:00:00.987

好吧 - Trace.Write 数据在调试时显示在 VS 的输出窗口中。也许那已经足够好了。您还可以为 System.IdentityModel 跟踪源添加跟踪侦听器，以更深入地了解令牌/声明处理。

# node.js - 如何将客户端的正确 IP 地址获取到 Heroku 上托管的 Node socket.io 应用程序中？

> ID：14382725
> 
> 赞同：6
> 
> 时间：2013-01-17T15:43:54.447
> 
> 标签：node.js, heroku, socket.io

我最近在 Heroku 上使用 Express 和 socket.io 托管了我的第一个 Node 应用程序，并且需要找到客户端的 IP 地址。到目前为止，我已经尝试过`socket.manager.handshaken[socket.id].address`,`socket.handshake.address`和`socket.connection.address`，两者都没有给出正确的地址。

应用程序：http: [//nes-chat.herokuapp.com/](http://nes-chat.herokuapp.com/)（还包含指向 GitHub 存储库的链接）

查看已连接用户的 IP：http: [//nes-chat.herokuapp.com/users](http://nes-chat.herokuapp.com/users)

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T15:56:58.543

客户端 IP 地址在`X-Forwarded-For`HTTP 标头中传递。我还没有测试过，但看起来 socket.io在确定客户端 IP 时[已经考虑到了这一点。](https://github.com/LearnBoost/socket.io/pull/397)

你也应该能够自己抓住它，这里有一个[指南](http://catapulty.tumblr.com/post/8303749793/heroku-and-node-js-how-to-get-the-client-ip-address)：

```
function getClientIp(req) {
  var ipAddress;
  // Amazon EC2 / Heroku workaround to get real client IP
  var forwardedIpsStr = req.header('x-forwarded-for'); 
  if (forwardedIpsStr) {
    // 'x-forwarded-for' header may return multiple IP addresses in
    // the format: "client IP, proxy 1 IP, proxy 2 IP" so take the
    // the first one
    var forwardedIps = forwardedIpsStr.split(',');
    ipAddress = forwardedIps[0];
  }
  if (!ipAddress) {
    // Ensure getting client IP address still works in
    // development environment
    ipAddress = req.connection.remoteAddress;
  }
  return ipAddress;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T17:58:36.843

您可以在一行中完成。

```
function getClientIp(req) {
    // The X-Forwarded-For request header helps you identify the IP address of a client when you use HTTP/HTTPS load balancer.
    // http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/TerminologyandKeyConcepts.html#x-forwarded-for
    // If the value were "client, proxy1, proxy2" you would receive the array ["client", "proxy1", "proxy2"]
    // http://expressjs.com/4x/api.html#req.ips
    var ip = req.headers['x-forwarded-for'] ? req.headers['x-forwarded-for'].split(',')[0] : req.connection.remoteAddress;
    console.log('IP: ', ip);
} 
```

我喜欢将它添加到中间件并将 IP 作为我自己的自定义对象附加到请求中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T02:35:03.013

以下对我有用。

```
Var client = require('socket.io').listen(8080).sockets;

client.on('connection',function(socket){ 
var clientIpAddress= socket.request.socket.remoteAddress;
}); 
```

# c++ - static_cast 和对指针的引用

> ID：14382730
> 
> 赞同：4
> 
> 时间：2013-01-17T15:44:04.733
> 
> 标签：c++, pointers, reference, const-cast

谁能告诉我为什么这不能编译：

```
struct A { };
struct B : public A { };

int main()
{
  B b;
  A* a = &b;
  B* &b1 = static_cast<B*&>(a);
  return 0;
} 
```

现在，如果您将静态转换替换为：

```
B* b1 = static_cast<B*>(a); 
```

然后它会编译。

**编辑：**很明显，编译器将`A*`and`B*`视为独立类型，否则这将起作用。问题更多是关于为什么这是可取的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T16:03:41.740

`B`派生自`A`，但`B*`不派生自`A*`。指向 a`B`的指针不是指向 a 的指针`A`，它只能转换为一个。但是类型仍然不同（并且转换可以而且经常会改变指针的值）。A`B*&`只能引用 a `B*`，不能引用任何其他指针类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:47:38.833

非常量左值引用 (B*&) 不能绑定到**不相关**的类型 (A*)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:55:06.863

您正在尝试将 an`A*`转换为`B*`. 这是错误的方法，不是很有用。您可能希望将派生的指针存储在指向基址的指针中，这很有用，甚至不需要强制转换。

我想 a`dynamic_cast`可能在这里工作，但如果我没记错的话，结果是实现定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:04:59.010

处理引用是编译器为你做的事情，不需要强制转换为引用。

如果我们将代码重构为：

```
B b;
A* a = &b;
B* b_ptr = static_cast<B*>(a);
B*& p1 = b_ptr; 
```

它会编译。

# delphi - 将 TIDCookieManager 中的 Cookie 保存到文件

> ID：14382732
> 
> 赞同：4
> 
> 时间：2013-01-17T15:44:13.017
> 
> 标签：delphi, delphi-xe2, indy, indy10, delphi-xe3

如何将 cookie 保存`TIdCookieManager`到文件中以便以后使用？像浏览器cookies。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T18:24:42.737

`TIdCookieManager`对在文件中持久化 cookie 数据没有任何本机支持。您必须手动实现。使用该`TIdCookieManager.CookieCollection`属性访问 cookie 对象的列表。例如：

```
uses
  ..., IdCookie, IdCookieManager;

var
  Cookies: TIdCookieList;
  Cookie: TIdCookie;
  I: Integer;
begin
  Cookies := IdCookieManager.CookieCollection.LockCookieList(caRead);
  try
    for I := 0 to Cookies.Count-1 do
    begin
      Cookie := Cookies[I];
      // save Cookie properties as needed...
    end;
  finally
    IdCookieManager.CookieCollection.UnlockCookieList(caRead);
  end;
end; 
```

.

```
uses
  ..., IdCookie, IdCookieManager;

var
  Cookies: TIdCookies;
  Cookie: TIdCookie;
begin
  Cookies := IdCookieManager.CookieCollection.LockCookieList(caReadWrite);
  try
    for (each saved cookie) do
    begin
      Cookie := IdCookieManager.CookieCollection.Add;
      try
        // read Cookie properties as needed...
        Cookies.Add(Cookie);
      except
        Cookie.Free;
        raise;
      end;
    end;
  finally
    IdCookieManager.CookieCollection.UnlockCookieList(caReadWrite);
  end;
end; 
```

或者：

```
uses
  ..., IdCookie, IdCookieManager;

var
  Cookies: TIdCookieList;
  Cookie: TIdCookie;
  I: Integer;
  S: string;
begin
  Cookies := IdCookieManager.CookieCollection.LockCookieList(caRead);
  try
    for I := 0 to Cookies.Count-1 do
    begin
      Cookie := Cookies[I];
      S := Cookie.ServerCookie;
      // save S as needed...
    end;
  finally
    IdCookieManager.CookieCollection.UnlockCookieList(caRead);
  end;
end; 
```

.

```
uses
  ..., IdCookie, IdCookieManager, IdURI;

var
  S: string;
  Cookies: TIdCookies;
  Cookie: TIdCookie;
  Uri: TIdURI;
begin
  Cookies := IdCookieManager.CookieCollection.LockCookieList(caReadWrite);
  try
    for (each saved cookie) do
    begin
      // read S as needed
      S := ...;
      Uri := TIdURI.Create(URL where cookie came from);
      try
        Cookie := IdCookieManager.CookieCollection.Add;
        try
          Cookie.ParseServerCookie(S, Uri);
          Cookies.Add(Cookie);
        except
          Cookie.Free;
          raise;
        end;
    finally
      Uri.Free;
    end;
  finally
    IdCookieManager.CookieCollection.UnlockCookieList(caReadWrite);
  end;
end; 
```

# php - php如何知道开始一个新会话

> ID：14382738
> 
> 赞同：2
> 
> 时间：2013-01-17T15:44:23.637
> 
> 标签：php, session

如果浏览器关闭并重新打开，PHP 将启动一个新会话。

旧会话文件仍保存在会话保存目录中，但会启动一个新会话。

php 在浏览器中查找什么来知道它必须启动一个新会话？

我想我真正要问的是， session_start() 到底做了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:53:03.263

会话 ID ( [PHPSESSID](http://php.net/manual/en/session.configuration.php#ini.session.name) ) 保存在用户浏览器的 cookie 中。如果没有找到/一个无效，它会创建一个。下图可能有助于了解您想了解的内容（来自 Chrome）。

![在此处输入图像描述](../Images/380491968db9df0e65c27b43e2cf63f0.png)

一旦 PHP 得到这个会话 ID，它就会寻找存储在会话[save_path](http://php.net/manual/en/session.configuration.php#ini.session.save-path)中的对应会话（通常`/tmp`在 unix 机器上）。然后，它使您能够使用[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)超全局访问存储在该会话文件中的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:53:40.267

`session_start()`只有在调用之前 PHP 页面上没有任何输出时才会存储 cookie 。如果输出了某些内容，则不会存储 cookie，您需要另一种方法（如前所述，`SQLite`或`MySQL`）来存储这些`UNIQUE`值并识别和分离每个用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:50:49.123

默认情况下，包含会话 ID 的 cookie 设置为没有过期时间。这意味着它会在浏览器关闭时过期。因此会话将在此时丢失，因为客户端不再拥有旧的会话 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:51:18.400

为了简单地回答您的问题，它会查找名为[PHPSESSID](http://php.net/manual/en/session.configuration.php#ini.session.name)的 cookie ，如果请求中未提供 cookie，则会调用[session_regenerate_id](http://php.net/manual/en/function.session-regenerate-id.php)来初始化 cookie 值。

然后在浏览器的整个生命周期中持续使用 cookie。

除非应用其他设置，否则这是默认行为的精简版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T15:52:06.417

你想知道的都已经写在这里了：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

> session_start() 根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。
> 
> 当 session_start() 被调用或会话自动启动时，PHP 将调用打开和读取会话保存处理程序。这些将是默认提供的内置保存处理程序或由 PHP 扩展（例如 SQLite 或 Memcached）提供；或者可以是 session_set_save_handler() 定义的自定义处理程序。读取回调将检索任何现有的会话数据（以特殊的序列化格式存储）并将被反序列化并用于在读取回调将保存的会话数据返回给 PHP 会话处理时自动填充 $_SESSION 超全局变量。

基本上，PHP 在文件系统中写入一个特殊文件（通常在 /tmp 目录中）并从那里获取数据。

# android - 如何在 Android 中覆盖 ACRA 的设置

> ID：14382750
> 
> 赞同：4
> 
> 时间：2013-01-17T15:44:51.873
> 
> 标签：android, acra

在我的应用程序类上，我用这些注释定义了一个 ACRA

```
@ReportsCrashes(formKey = "",
            mailTo = "my@email.de",
            mode = ReportingInteractionMode.DIALOG,
            //resToastText = R.string.crash_toast_text, // optional, displayed as soon as the crash occurs, before collecting data which can take a few seconds
            resDialogText = R.string.crash_dialog_text,
            resDialogIcon = android.R.drawable.ic_dialog_info, //optional. default is a warning sign
            resDialogTitle = R.string.crash_dialog_title, // optional. default is your application name
            resDialogCommentPrompt = R.string.crash_dialog_comment_prompt, // optional. when defined, adds a user text field input with this text resource as a label
            resDialogOkToast = R.string.crash_dialog_ok_toast // optional. displays a Toast message when the user accepts to send a report.
)
public class AttachApplication extends Application implements OnSharedPreferenceChangeListener{ 
```

这工作正常，但我的应用程序中有按钮，用户可以手动发送错误报告。为此，我想更改模式，以便只发送一封电子邮件而不是一个对话框。

```
public void startSendErrorAction(View view) {
    Log.d( TAG, "sending error to srs" );
    ACRAConfiguration config = ACRA.getConfig();
    int prevDialogTitle = config.resDialogTitle();
    int prevDialogText = config.resDialogText();
    config.setResDialogTitle( R.string.manual_error_title );
    config.setResDialogText( R.string.manual_error_text );

    ACRA.setConfig( config );
    ACRA.getErrorReporter().handleException(null);

    config.setResDialogText( prevDialogText );
    config.setResDialogTitle( prevDialogTitle );
    ACRA.setConfig( config );
} 
```

我试图只更改对话框的文本和标题，但这不起作用。它总是使用注释中配置的那些。

是否可以覆盖这些值？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:03:41.790

我认为你想要像[ACRA 这样的东西：有时是对话报告，有时是无声报告](https://stackoverflow.com/questions/14359485/acra-sometimes-dialog-report-and-other-times-silent-report/14361157#14361157)，但在“相反”的方向。所以首先在配置中使用 SILENT 并在设置配置之前用 DIALOG 重置它。

# mysql - 我应该如何构建我的架构以便正确保存数据？

> ID：14382751
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:44:53.920
> 
> 标签：mysql, cakephp

我正在创建一个商店应用程序，其中商店有类别。

`sizes`并且`products`属于`category`

如果我创建一个新`product`的，`Categories`则显示为一个选择框，我可以从可用选项中选择所需的类别。这工作正常。

由于`sizes`属于`category`，我想将`sizes`与所选类别相关联的内容显示为输入框。我想输入每个的`size`价格`product`

我有一个 Ajax 请求，它以 json 格式返回大小。现在我不确定如何在产品添加模板中显示尺寸。我应该把它放在同一个表格中吗？我将在哪里保存价格？

价格表结构应该如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:38:05.567

在不知道要求的情况下，这会有点困难，因为您的问题非常广泛，而且我不确定架构是否正确。如果架构不正确，它会解释你为什么挣扎。

有些专栏对我来说不太有意义。例如，您有一个`category_id`on the`product`和 the `size`。然后你有一个`price`链接`product`和的表`size`，但是你需要一个`size.category_id`匹配的约束`product.category_id`吗？

了解了我对数据库和购物车的了解，这就是我编写模式的方式：

```
Categories
    id
    name
    description
    active
    created
    modified

Sizes
    id
    name

Products
    id
    name
    description
    price
    active
    offered
    created
    modified

Categories_Products
    id
    category_id
    product_id

Products_Sizes
    id
    product_id
    size_id
    price

Toppings
    id
    name
    description
    price
    active
    created
    modified

Categories_Toppings
    id
    category_id
    toppings_id

Sizes_Toppings
    id
    size_id
    topping_id
    price 
```

**解释**

*   初始`Product`将有一个基本价格。
*   每个`Product`都可以`Categories`通过 HABTM 关系与 N 相关联。
*   每个`Product`都可以`Sizes`通过 HABTM 关系与 N 相关联。
*   HABTM`Product_Size`表将存储尺寸的价格调整。
*   初始`Topping`将有一个基本价格。
*   每个`Topping`都可以`Categories`通过 HABTM 关系与 N 相关联。
*   每个`Topping`都可以`Sizes`通过 HABTM 关系与 N 相关联。
*   HABTM`Size_Topping`表将存储尺寸的价格调整。

# ios - 从 URL 获取图像后图像视图未更新

> ID：14382755
> 
> 赞同：0
> 
> 时间：2013-01-17T15:45:00.530
> 
> 标签：ios

我正在使用`AFNetworking`类别`UIImageView+AFNetworking.h`从 S3 下载图像。我得到一个预签名的 URLRequest 并继续获取图像。这是在一个仅用于显示照片的控制器中：

```
- (void)viewWillAppear:(BOOL)animated
{
    NSURLRequest *request = [BFAWSUploader downloadPhotoWithFileName:[NSString stringWithFormat:@"%@.jpg", _topicMessage.attachment_s3_name]];
    MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    [_imageView setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"Default.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        NSLog(@"Pulled down image successfully");
        [hud hide:YES];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        NSLog(@"Failed to pull down image");
    }];
} 
```

我看到日志条目“成功下拉图像”，但之后我没有看到图像视图更新。相反，我必须离开视图控制器，然后再返回，我会看到缓存的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:26:54.650

来自`UIImageView+AFNetworking.h`：

“如果指定了成功块，则该块负责在返回之前设置图像视图的图像。如果未指定成功块，`self.image = image`则执行设置图像的默认行为。”

所以，你需要`_imageView.image = image`在你的成功块内。

# concatenation - 自定义 DBMS 中的字符串连接产生奇怪的结果

> ID：14382756
> 
> 赞同：1
> 
> 时间：2013-01-17T15:45:03.150
> 
> 标签：concatenation, database

当尝试一个简单的`CONCAT`我得到语法错误。该连接使用专有的 ODBC 驱动程序，我确定这是问题所在，但想知道我是否可以做任何事情。以下是我最初尝试的查询：

```
SELECT CONCAT('DF', '01', ServiceCode) AS RecordID
FROM ServiceCodes 
```

但是，这会在 附近引发语法错误`, ServiceCode`，没有其他信息。所以我尝试了：

```
SELECT 'DF' + '01' + ServiceCode AS RecordID
FROM ServiceCodes 
```

但这会返回错误`term_expr type not supported`，我认为这是来自驱动程序的特定错误。

所以我尝试了：

```
SELECT CONCAT(CONCAT('DF', '01'), ServiceCode) AS RecordID
FROM ServiceCodes 
```

这似乎奏效了！返回一个字符串，如`DF01MOT`. 这适用于所有服务器，因此我添加了额外的字段来生成查询：

```
SELECT CONCAT(CONCAT('DF', '01'), ServiceCode) AS RecordID, 'DF' AS Environment 
FROM ServiceCodes 
```

这似乎也有效，除了在 1 台服务器上。在这台服务器上运行上述查询时，它现在将返回`DF0DFMO`而不是`DF01MOT`，每行中的最后 2 个字符根据 更改`ServiceCode`，添加更多字段会再次更改，例如：

```
SELECT CONCAT(CONCAT('DF', '01'), ServiceCode) AS RecordID, 'DF' AS Environment, '01' AS SO
FROM ServiceCodes 
```

这将返回`DF0DF01`所有行中的该字段。

那么为什么会发生这种情况呢？为什么它只在一台服务器上？所有服务器上的驱动程序都相同，但这是驱动程序的问题吗？我能做些什么来绕过它？

编辑：为避免混淆，我修改了标题和标签。这实际上是通过 SQL Server 企业管理器中的 DTS 包访问第三方提供的自定义 DBMS。我相信联系第三方是唯一的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:55:25.317

看过您的评论后，SQL Server 标记在这里实际上有点误导。您正在使用他们的驱动程序在供应商数据库上运行。显然，他们的数据库支持一个`CONCAT`只需要两个参数的函数，而不是可以接受更多参数的 SQL Server 2012 函数。这解释了你的第一个问题。

至于您看到的其他结果，您需要向供应商提出。您用于 DTS 的 SQL Server 版本在这里实际上没有任何相关性。

# wso2 - WSO2 ESB Web 破坏了良好的突触 XML 结构

> ID：14382760
> 
> 赞同：1
> 
> 时间：2013-01-17T15:45:26.787
> 
> 标签：wso2, wso2esb

我们使用 XML 编辑器开发了我们的代理、序列等，并且具有非常好的突触配置结构，但是当我们使用 Web 界面打开组件时，整个代码会重新对齐和更改。

有没有办法在**不破坏整个结构**的情况下通过网络查看组件的内容？

这是我们的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="patient_toMPI_pJMS_qToMPIXml" statistics="disable" trace="disable" transports="jms">
<parameter name="transport.jms.Destination">queueName</parameter>
<parameter name="transport.jms.ConnectionFactory">queueBlocking</parameter>
<parameter name="transport.jms.DestinationType">queue</parameter>
<parameter name="transport.jms.ContentType">
    <rules>
        <jmsProperty>contentType</jmsProperty>
        <default>application/xml</default>
    </rules>
</parameter>
<target faultSequence="rollbackSequence">
    <inSequence>
        <property name="frameworkContext" expression="get-property('default', 'frameworkContext')" scope="transport"/>
        <property name="frameworkMessageId" expression="get-property('default', 'frameworkMessageId')" scope="transport"/>
        <property name="frameworkTransactionId" expression="get-property('default', 'frameworkTransactionId')" scope="transport"/>          
    </inSequence>
</target> 
```

使用 Web 界面打开一次后，它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
   name="patient_toMPI_pJMS_qToMPIXml"
   transports="jms"
   startOnLoad="true"
   trace="disable">
<target faultSequence="rollbackSequence">
  <inSequence>
     <property xmlns:urn="urn:hl7-org:v2xml"
               xmlns:hl7="http://wso2.org/hl7"
               name="frameworkContext"
               expression="get-property('default', 'frameworkContext')"
               scope="transport"/>
     <property xmlns:urn="urn:hl7-org:v2xml"
               xmlns:hl7="http://wso2.org/hl7"
               name="frameworkMessageId"
               expression="get-property('default', 'frameworkMessageId')"
               scope="transport"/>
     <property xmlns:urn="urn:hl7-org:v2xml"
               xmlns:hl7="http://wso2.org/hl7"
               name="frameworkTransactionId"
               expression="get-property('default', 'frameworkTransactionId')"
               scope="transport"/>         
  </inSequence>
</target>
<parameter name="transport.jms.ContentType">
  <rules>
     <jmsProperty>contentType</jmsProperty>
     <default>application/xml</default>
  </rules>
</parameter>
<parameter name="transport.jms.ConnectionFactory">queueBlocking</parameter>
<parameter name="transport.jms.DestinationType">queue</parameter>
<parameter name="transport.jms.Destination">queueName</parameter>
</proxy> 
```

这是 WSO2 中的错误吗？是否可配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:04:05.953

我没有看到您的配置有太大变化。属性被推到底部（这是我看到的唯一变化），这是 WSO2 ESB 中的正常行为。

如果不使用 Web 控制台，就无法查看源代码（除非您从文件系统中查看）。

# visual-studio-2008 - 如何清除 System::Windows::Forms::PictureBox^ cpp 的内存

> ID：14382762
> 
> 赞同：2
> 
> 时间：2013-01-17T15:45:28.463
> 
> 标签：visual-studio-2008, memory, c++-cli, picturebox

你好，我做了一个非常简单的程序，通过 TCP-IP 获取一些图片地址并将它们显示在屏幕上。我的问题是，每次我更新一张图片时都会留下记忆，这基本上让我记忆超载。

我一直在寻找一个 awnser 并得出结论，我可能需要使用函数 Dispose，我的问题是当我尝试实现它时出现以下错误

错误 C2039: 'Dispose' : is not a member of 'System::Windows::Forms::PictureBox' 请注意，我使用的是 Visual Studio 2008，它实际上对我有用。

我正在寻找的是当我想加载新图片时清除内存的正确方法。

这是我的代码，感谢那里的任何人花时间查看我的问题

```
 using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    ///
    /// WARNING: If you change the name of this class, you will need to change the
    ///          'Resource File Name' property for the managed resource compiler tool
    ///          associated with all .resx files this class depends on.  Otherwise,
    ///          the designers will not be able to interact properly with localized
    ///          resources associated with this form.
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {

            InitializeComponent();
            pictureBoxArrayLeft->Resize(pictureBoxArrayLeft,15);
            pictureBoxArrayRight->Resize(pictureBoxArrayRight,15);
            IPAddress^ listenInterface = IPAddress::Any;//Parse("127.0.0.1");
            int listenPort = 12000;
            int bufferSize = 4096;
            sendBuffer = gcnew array<Byte>(bufferSize);
            receiveBuffer = gcnew array<Byte>(bufferSize);
            tcpServer = gcnew TcpListener(listenInterface, listenPort);
            // Start listening for connections
            tcpServer->Start();
            incomeText = "";
            connection_active = false;
            readyToRead = true;

            System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(Form1::typeid));
            int loopRunner;
            loopRunner = 0;
            while(loopRunner < 15)
            {
                pictureBoxArrayLeft[loopRunner] = (gcnew System::Windows::Forms::PictureBox());
                (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBoxArrayLeft[loopRunner]))->BeginInit();
                // 
                // pictureBox1
                // 
                this->pictureBoxArrayLeft[loopRunner]->BackColor = System::Drawing::Color::Black;
                this->pictureBoxArrayLeft[loopRunner]->Location = System::Drawing::Point(0, (73*loopRunner));
                this->pictureBoxArrayLeft[loopRunner]->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"pictureBox1.Image")));
                this->pictureBoxArrayLeft[loopRunner]->Size = System::Drawing::Size(73,73);
                this->pictureBoxArrayLeft[loopRunner]->SizeMode = System::Windows::Forms::PictureBoxSizeMode::Zoom;
                this->pictureBoxArrayLeft[loopRunner]->TabIndex = 1;
                this->pictureBoxArrayLeft[loopRunner]->TabStop = false;
                this->pictureBoxArrayLeft[loopRunner]->Visible = true;

                this->Controls->Add(this->pictureBoxArrayLeft[loopRunner]);
                pictureBoxArrayLeft[loopRunner]->BringToFront();
                loopRunner++;
            }
            loopRunner = 0;
            while(loopRunner < 15)
            {
                pictureBoxArrayRight[loopRunner] = (gcnew System::Windows::Forms::PictureBox());
                (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBoxArrayRight[loopRunner]))->BeginInit();
                // 
                // pictureBox1
                // 
                this->pictureBoxArrayRight[loopRunner]->BackColor = System::Drawing::Color::Black;
                this->pictureBoxArrayRight[loopRunner]->Location = System::Drawing::Point((1342-73), (73*loopRunner));
                this->pictureBoxArrayRight[loopRunner]->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"pictureBox1.Image")));
                this->pictureBoxArrayRight[loopRunner]->Size = System::Drawing::Size(73,73);
                this->pictureBoxArrayRight[loopRunner]->SizeMode = System::Windows::Forms::PictureBoxSizeMode::Zoom;
                this->pictureBoxArrayRight[loopRunner]->TabIndex = 1;
                this->pictureBoxArrayRight[loopRunner]->TabStop = false;
                this->pictureBoxArrayRight[loopRunner]->Visible = true;

                this->Controls->Add(this->pictureBoxArrayRight[loopRunner]);
                pictureBoxArrayRight[loopRunner]->BringToFront();
                loopRunner++;
            }
        }
        void pictures(String^ incomeText)
        {
            readyToRead = false;
            int counter;
            for(counter = 0; counter < 15; counter++)
            {
                pictureBoxArrayLeft[counter]->Visible = false;
                pictureBoxArrayRight[counter]->Visible = false;
            }

            System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(Form1::typeid));
            String^ tempstring;
            String^ tempstring2;

            counter = 0;
            pictureBox1->Image = pictureBox1->Image->FromFile(incomeText->Substring(0,incomeText->IndexOf(L"#",0)));
            tempstring = incomeText->Substring(incomeText->IndexOf(L"#",0)+1);

            while(tempstring != L"")
            {
                tempstring2 = tempstring->Substring(0,tempstring->IndexOf(L"#",0));

                pictureBoxArrayLeft[counter]->Image = (cli::safe_cast<System::Drawing::Image^  >(Image::FromFile(tempstring2)));
                pictureBoxArrayRight[counter]->Image = (cli::safe_cast<System::Drawing::Image^  >(Image::FromFile(tempstring2)));

                pictureBoxArrayLeft[counter]->Visible = true;
                pictureBoxArrayRight[counter]->Visible = true;

                tempstring = tempstring->Substring(tempstring->IndexOf(L"#",0)+1);
                counter++;
            }   
            readyToRead = true;
        }
        void Send(String^ outgoing)
        {
            if(connection_active == true)
            {
                sendBuffer = System::Text::Encoding::ASCII->GetBytes(outgoing);
                tcpStream->Write(sendBuffer,0,sendBuffer->Length);
            }
        }
        void StartIfPending()
        {
                if(tcpServer->Pending())
                {
                    // Wait for a client connection
                    tcpClient = tcpServer->AcceptTcpClient();
                    // Get the NetworkStream so we can do Read and Write on the client connection
                    tcpStream = tcpClient->GetStream(); 
                    connection_active = true;
                    IPEndPoint^ ep = safe_cast<IPEndPoint^>(tcpClient->Client->RemoteEndPoint);
                }
                else
                {
                }
        }
        void Service()
        {
            StartIfPending();

            String^ incomeText = Recieve();
            if(incomeText != "" && incomeText != "<<") //check for empty String^ or empty command
            {
                if(readyToRead == true)
                {
                    pictures(incomeText);
                }
            } 
        }
        String^ Recieve()
        {
            if(connection_active == true)
            {
                try
                {   
                    // Receive the data
                    if(tcpStream->DataAvailable)
                    {
                        // Read some data
                        count = tcpStream->Read(receiveBuffer, 0, 4096);//nextReadCount);

                        // Display what we read
                        String^ inBufferString = System::Text::Encoding::ASCII->GetString(receiveBuffer, 0, count);
                        return inBufferString;
                    }
                    else
                    {
                        return "";
                    }
                }
                catch (SocketException^ err)
                {
                    // Exceptions on the TcpListener are caught here
                }

                catch (IO::IOException^ err)
                {
                    // Exceptions on the NetworkStream are caught here
                }
            }
            else
            {
                return "";
            }
        }
    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: array<System::Windows::Forms::PictureBox^>^  pictureBoxArrayLeft;
    private: array<System::Windows::Forms::PictureBox^>^  pictureBoxArrayRight;
    private: TcpListener^ tcpServer;
    private: TcpClient^ tcpClient;
    private: NetworkStream^ tcpStream;
    private: array<Byte>^ sendBuffer;
    private: array<Byte>^ receiveBuffer;
    private: array<Byte>^ byteCount;
    private: int count;
    private: bool connection_active;
    private: String^ incomeText;  
    private: bool readyToRead;  
    private: System::Windows::Forms::Timer^  timer1;
    private: System::Windows::Forms::PictureBox^  pictureBox1;
    private: System::ComponentModel::IContainer^  components;

    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->components = (gcnew System::ComponentModel::Container());
            System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(Form1::typeid));
            this->timer1 = (gcnew System::Windows::Forms::Timer(this->components));
            this->pictureBox1 = (gcnew System::Windows::Forms::PictureBox());
            (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox1))->BeginInit();
            this->SuspendLayout();
            // 
            // timer1
            // 
            this->timer1->Enabled = true;
            this->timer1->Tick += gcnew System::EventHandler(this, &Form1::timer1_Tick);
            // 
            // pictureBox1
            // 
            this->pictureBox1->BackColor = System::Drawing::Color::Black;
            this->pictureBox1->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"pictureBox1.Image")));
            this->pictureBox1->Location = System::Drawing::Point(2, -1);
            this->pictureBox1->Name = L"pictureBox1";
            this->pictureBox1->Size = System::Drawing::Size(1342, 730);
            this->pictureBox1->SizeMode = System::Windows::Forms::PictureBoxSizeMode::Zoom;
            this->pictureBox1->TabIndex = 1;
            this->pictureBox1->TabStop = false;
            // 
            // Form1
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(1344, 730);
            this->Controls->Add(this->pictureBox1);
            this->Name = L"Form1";
            this->Text = L"Form1";
            (cli::safe_cast<System::ComponentModel::ISupportInitialize^  >(this->pictureBox1))->EndInit();
            this->ResumeLayout(false);

        }
#pragma endregion
    private: System::Void timer1_Tick(System::Object^  sender, System::EventArgs^  e) 
             {
                 Service();
             }
};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:16:53.180

在 C++/CLI 中，您不会显式调用 Dispose。相反，`delete`对对象执行 a 操作，就像对任何 C++ 对象执行的操作一样。编译器在后台调用 Dispose 将其转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:33:19.653

C++/CLI 设计者为试图挽救 C++ 中的 RAII 模式付出了很大的努力。不是很成功，很难用托管语言解决问题。他们通过将 IDisposable 接口封装在语言本身中来做到这一点。并且完全*隐藏*它，当您尝试使用它时会出现编译错误。如果类对象实现它，则托管对象的**删除**运算符调用 IDisposable::Dispose() 方法。ref 类的 ~destructor 实现 Dispose() 方法，GC::SuppressFinalize() 调用是自动生成的。!finalizer 是在垃圾收集器到达对象时实际销毁对象时运行的对象。

分配给 Image 属性的正确咒语应如下所示：

```
 delete pictureBox1->Image;   // Dispose the existing bitmap, if any
    pictureBox1->Image = pictureBox1->Image->FromFile(...); 
```

And if you want to clear the image then you should write it like this:

```
 delete pictureBox1->Image;
    pictureBox1->Image = nullptr; 
```

# jquery - 位置：固定溢出的父级

> ID：14382764
> 
> 赞同：0
> 
> 时间：2013-01-17T15:45:32.337
> 
> 标签：jquery, html, css, overflow, css-position

任何帮助将非常感激。

下面是一个简化的代码片段。我遇到的问题是“徽标”类的位置完全符合我的要求，即相对于整个页面/窗口。因此，当我向下滚动页面时，“logo”元素会在父元素中向下移动。

问题在于，尽管“logo”元素是“page”元素的子元素，但“logo”始终可见，即使在父元素边界之外，尽管将父元素“溢出”设置为“隐藏”。

如果有人知道如何用 CSS 纠正这个问题，那将是非常棒的和首选的。jQuery (JavaScript) 也是一种选择，但如果可以的话，我宁愿避开它，因为我非常清楚一旦完成，该网站将非常依赖 JavaScript。

```
<style>
.page{
    width:100%;
    height:1000px;
    overflow:hidden;
}
.logo{
    position:fixed;
    margin:20px;
}
</style>

<div class="page">
    <div class="logo"></div>
<div>
<div class="page">
    <div class="logo"></div>
<div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:50:03.660

无法完成。取自[这里](https://stackoverflow.com/questions/12463658/parent-child-with-position-fixed-parent-overflowhidden-bug)：

因为固定位置元素相对于视口是固定的，而不是另一个元素。因此，由于视口没有将其切断，溢出变得无关紧要。

根据要求，完全理论上可能的 jQuery 解决方案：

```
$(window).scroll(function(){
    if($(this).scrollTop()>=1000){
        $('#ItemToHide').hide();
    } else {
        $('#ItemToHide').show();
    }
}); 
```

这是超级草率，显然可以改进，但这样的事情可能会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:48:56.823

您可能想要绝对定位。绝对定位元素基于其父元素。因此，带有 top: 20px 的徽标绝对位置会将其放置在距页面元素顶部 20 像素处。固定为 20px 的顶部，使其距窗口顶部 20px。但是，要使绝对定位起作用，您的页面元素至少需要一个相对位置。

[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

# c# - 决定在运行时使用用户控制

> ID：14382766
> 
> 赞同：0
> 
> 时间：2013-01-17T15:45:37.413
> 
> 标签：c#, asp.net

我在页面上定义了 2 个用户控件：

```
<%@ Register Src="Foo.ascx" TagName="FooControl" TagPrefix="acme" %>
<%@ Register Src="Bar.ascx" TagName="BarControl" TagPrefix="acme" %>
.
.
.
<acme:FooControl ID="myFoo" runat="server" Visible="false" />
<acme:BarControl ID="myBar" runat="server" Visible="false" /> 
```

在运行时，我想在页面代码的不同位置设置用户控件的属性之一。例如：

```
protected void SomeMethod()
{
     if (isSomeCondition) 
     {
         myFoo.Visible = true;         
     }
     else
     {
         myBar.Visible = true;
     }

     // ...

     if (somethingElse) 
     {
         if (isSomeCondition) 
         {
             myFoo.Prop1 = 123;         
         }
         else
         {
             myBar.Prop1 = 123;
         }
     }

     // ...
} 
```

我知道我可以让 2 个用户控件从一个通用接口继承，但是还有另一种（可能更好）的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:56:22.730

**编辑：**我刚刚意识到我的大部分答案已经被对同一问题的评论所涵盖。向评论的人道歉，我不是故意“窃取”你的内容...... :)

不，我可以想出*不同*的方法来实现相同的结果（通过反射调用属性或使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)解决问题），但我想不出比让两个控件实现相同的接口*更好的方法。*

然后，您可以通过另一个属性访问活动控件，例如：

```
public IMyControl ActiveControl 
{
  get 
  {
    return (isSomeCondition)? myFoo : myBar; 
  }
} 
```

# c++ - python sys.stdout 和 C++ iostreams::cout

> ID：14382772
> 
> 赞同：5
> 
> 时间：2013-01-17T15:45:52.500
> 
> 标签：c++, python, stdout, stringio

我假设 sys.stdout 将引用与在同一进程中运行的 iostreams::cout 相同的物理流，但情况似乎并非如此。以下代码使用名为“write”的 python 包装器调用 C++ 函数，并写入 cout：

```
from cStringIO import StringIO 
import sys 
orig_stdout = sys.stdout 
sys.stdout = stringout = StringIO() 
write("cout") # wrapped C++ function that writes to cout 
print "-" * 40 
print "stdout" 
sys.stdout = orig_stdout 
print stringout.getvalue() 
```

立即将“cout”写入控制台，然后是分隔符“---...”，最后，作为 stringout.getvalue() 的返回值，字符串“stdout”。我的意图是在 stringout 中捕获从 C++ 写入 cout 的字符串。有谁知道发生了什么，如果是这样，我如何才能捕获写入 python 字符串中的 cout 的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T15:47:49.253

`sys.stdout`是一个写入标准输出的 Python 对象。它*实际上*不是标准输出文件句柄；它*包装*了该文件句柄。更改`sys.stdout`Python 领域中指向的对象不会以任何方式影响 C++ 中的`stdout`句柄或`std::cout`流对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:41:26.640

在 comp.lang.python 的帮助下并在此站点上进行了一些搜索后：正如 cdhowie 指出的那样，必须在较低级别访问标准输出文件句柄。其实它的文件描述符可以获取为sys.stdout.fileno()（应该是1），然后就可以使用os.dup和os.dup2了。

我发现[this answer](https://stackoverflow.com/a/8825434/919305) to a similar question非常有帮助。

我真正想要的是以字符串而不是文件的形式捕获输出。然而，python StringIO 类没有文件描述符，不能用来代替实际文件，所以我想出了一个不完全令人满意的解决方法，即写入并随后读取临时文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:58:39.393

它不可能是同一个流，因为 Python 是用 C 而不是 C++ 编写的，并且无法访问`std::cout`. 我不知道它是使用`stdout`还是基于 fd 1 实现自己的流，但无论如何，建议您使用两个对象（Python 和 C++）在写入之间刷新。

# html - 如何通过 url 传递变量，根据变量更改 dd 和 li 的类？

> ID：14382773
> 
> 赞同：0
> 
> 时间：2013-01-17T15:45:53.307
> 
> 标签：html, tabs, zurb-foundation

我正在尝试在基础中建立一个站点。我正在为下一部分而苦苦挣扎。

首先让我展示一部分代码：

```
<dl class="contained tabs">
    <dd class="active"><a href="#contactForm">Neem contact op</a></dd>
    <dd><a href="#hoofdleiders">Hoofdleiders</a></dd>
    <dd><a href="#leiders">Leiders</a></dd>
    <dd><a href="#staf">Staf</a></dd>
  </dl>

<ul class="tabs-content contained">

    <li id="contactFormTab" class="active">
      <div class="row collapse">
        <div class="two columns"><label class="inline">Naam</label></div>
        <div class="ten columns"><input type="text" name="naam" id="naam" placeholder="Naam" value="' . (isset($_POST['naam']) ? htmlspecialchars($_POST['naam']) : '') . '" />
      </div>
      <div class="row collapse">
        <div class="two columns"><label class="inline">Email</label></div>
        <div class="ten columns"><input type="text" name="mail" id="mail" placeholder="jouwnaam@jouwadres.nl" value="' . (isset($_POST['mail']) ? htmlspecialchars($_POST['mail']) : '') . '" />
      </div>
      <div class="row collapse">
        <div class="two columns"><label class="inline">Onderwerp</label></div>
        <div class="ten columns"><input type="text" name="onderwerp" id="onderwerp" placeholder="onderwerp" value="' . (isset($_POST['mail']) ? htmlspecialchars($_POST['onderwerp']) : '') . '" />
      </div>

      <label>Wat wilt u zeggen?</label>

      <textarea id="bericht" name="bericht" rows="3">' . (isset($_POST['bericht']) ? htmlspecialchars($_POST['bericht']) : '') . '</textarea><br />

      <button type="submit" name="submit" class="radius button">Verstuur</button>

    </li>

<li id="hoofdleidersTab">
      <ul class="block-grid five-up">
        <li><a href="mailto:mal@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 1</a></li>
        <li><a href="mailto:zoe@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 2</a></li>

      </ul>
    </li>
    <li id="leidersTab">
      <ul class="block-grid five-up">
        <li><a href="mailto:mal@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 1</a></li>
        <li><a href="mailto:zoe@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 2</a></li>

      </ul>
    </li>
    <li id="stafTab">
      <ul class="block-grid five-up">
        <li><a href="mailto:mal@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 1</a></li>
        <li><a href="mailto:zoe@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 2</a></li>

      </ul>
    </li> 
```

因此 dd 类“活动”和 li 类“活动”，使选项卡突出显示。

我的问题是，如何`<dd>`使用 URL 中传递的变量将课程更改为另一个项目（比如说第二个）和另一个 li id（也可以说第二个）（hoofdleiders）？

这是联系表格的一部分，我希望能够将人们带到他们需要的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:52:47.350

如果你不想渲染页面，你可以使用 PHP，如：

```
<? if ($_GET['param_name'] == 'somecondition'):?>
<html do something>
<?endif;?> 
```

或者您可以在页面呈现与用户操作交互后使用 jquery 进行：

```
function getURLParameter(name) {
return decodeURI(
    (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
);
} 
```

你可以使用这个函数来获取url中的参数，并在javascript/jquery上做一些逻辑来做一些很酷的事情。如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:03:49.357

我不建议以这种方式实施。您应该使用像 MVC 这样的框架或模式来更好地管理您的代码。但是，就您而言，这可能是一个简单而清晰的解决方案。

将每个选项卡存储在与选项卡同名的单独 php 文件中，例如，`staf.php`文件将如下所示：

```
 <ul class="block-grid five-up">
    <li><a href="mailto:mal@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 1</a></li>
    <li><a href="mailto:zoe@serenity.bc.reb"><img src="http://placehold.it/200x200&text=[persoon]" /><br />Naam 2</a></li>
 </ul> 
```

主要`contact.php`会是这样的

```
<?php 
# list all available tabs
$tabs = array(
   'contactform' => 'Contact form', 
   'hoofdleiders' => 'Hoofdleiders', 
   'leiders' => 'Leiders', 
   'staf' => 'Staf',
);

# get the selected Tab from the url, if no tab is specified use the first tab
$selectedTab = filter_input(INPUT_GET, 'tab');
if (!in_array($selectedTab, $tabs))
    $selectedTab = $tabs[0];
?>   
<dl class="contained tabs">
    <?php foreach($tabs as $name => $label):?>
    <dd <?php echo ($tabName == $selectedTab ? "class='active'" : ""; ?>><a href="#<?php echo $name ?>"><?php echo $label ?></a></dd>
    <?php endforeach; ?>
</dl>

<ul class="tabs-content contained">
<?php foreach($tabs as $tabName): ?>
    <li id="<?php echo $tabName; ?>" <?php echo ($tabName == $selectedTab ? "class='active'" : ""; ?>>
        <?php require_once ($tabName . ".php"); ?>
    </li>
<?php endforeach; ?>
</ul> 
```

在这种情况下，`contact.php`每个的 php 文件和所有 php 文件`li`必须在同一个文件夹中，并且可以`contact.php`像这样在 URL 中调用该文件`contact.php?tab=staf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:49:46.507

如果您不想遍历项目，可以使用 IF 子句添加活动状态：

```
<dl class="contained tabs">
 <dd<?php if(!isset($_GET['tab']) || $_GET['tab']=='contactform') echo ' class="active"'; ?>>
      <a href="#contactForm?tab=contactform">Neem contact op</a>
 </dd>
 <dd<?php if($_GET['tab']=='hoofdleiders') echo ' class="active"'; ?>>
      <a href="#hoofdleiders?tab=hoofdleiders">Hoofdleiders</a>
 </dd>
 <dd<?php if($_GET['tab']=='leiders') echo ' class="active"'; ?>>
      <a href="#leiders?tab=leiders">Leiders</a>
 </dd>
 <dd<?php if($_GET['tab']=='staf') echo ' class="active"'; ?>>
      <a href="#staf?tab=staf">Staf</a>
 </dd>
</dl> 
```

我添加`!isset($_GET['tab']) ||`到第一个选项卡，以便此选项卡是默认选项卡（如果`$_GET['tab']`未设置）。

然后为每个`LI`添加相同的 PHP：

```
<li id="contactFormTab"<?php if(!isset($_GET['tab']) || $_GET['tab']=='contactform') echo ' class="active"'; ?>>

...

<li id="hoofdleidersTab"<?php if($_GET['tab']=='hoofdleiders') echo ' class="active"'; ?>>

...

<li id="leidersTab"<?php if($_GET['tab']=='leiders') echo ' class="active"'; ?>>

...

<li id="stafTab"<?php if($_GET['tab']=='staf') echo ' class="active"'; ?>> 
```

# .net-4.0 - XSockets.NET windows 服务无法启动

> ID：14382778
> 
> 赞同：0
> 
> 时间：2013-01-17T15:46:12.893
> 
> 标签：.net-4.0, windows-services, xsockets.net

我无法让 xsockets.net Windows 服务工作。目前，我正在使用[这个来源](http://xsockets.net/api/hosting)，因为我找不到更好的来源

*   该解决方案内置于VS2012Express版中，

*   使用 .NET v4 框架 InstallUtil.exe 安装它

*   当试图在 Windows 服务对话中启动服务时，它会给出一个对话：`"The XSockets.NET service on Local Computer started and then stopped." The Windows event viewer just lists: "The XSockets.NET service entered the stopped state."`

我都是 .NET 和 C# 的新手，只是试图让 websockets 工作并且在这个问题上有点疯狂:-)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:12:44.190

如果所有 XSockets 的插件 (dlls) 都已就位，并且您的 Windows 服务的 app.config 正常，则不应出现此类错误。

在以下 repo 中，您可以找到一个模板，它可能是您正在审阅的那个？

[https://github.com/MagnusThor/XSockets.Windows.Service](https://github.com/MagnusThor/XSockets.Windows.Service)

确保此处列出的所有 DLL ' [https://github.com/MagnusThor/XSockets.Windows.Service/tree/master/Dependencies](https://github.com/MagnusThor/XSockets.Windows.Service/tree/master/Dependencies) ' 在“托管” XSockets.NET 的项目（创建服务的项目） 如下所示

```
 protected override void OnStart(string[] args)
        {
            new XSockets.Windows.Service.Host.Instance();
        } 
```

<-

希望这会有所帮助！

马格努斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:10:09.847

确保项目的所有 DLL（包括依赖项）都在此文件夹 C:\Chocolatey\lib\XSockets.Windows.Service.2.5.2\tools

我有同样的问题，我解决了将依赖项放在该文件夹中，即：EntityFramework.dll ...

我希望这对你有帮助。

# asp.net - 如何将我的 xml 文件排列到数据表中，然后绑定到 gridview

> ID：14382783
> 
> 赞同：0
> 
> 时间：2013-01-17T15:46:25.313
> 
> 标签：asp.net, web-services

我正在制作网络应用程序。我将 httpresponse 放入 xml 文件中，所以我希望首先将这个 xml 文件排列在数据表中，然后绑定到网格视图中。

这是我的代码：-

```
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{

     StreamReader responsereader = new StreamReader(response.GetResponseStream());

     var responsedata = responsereader.ReadToEnd();
     xmldoc = (XmlDocument)JsonConvert.DeserializeXmlNode(responsedata);
     xmldoc.Save(@"C:\New folder\myfile.xml");

         DataTable dt = new DataTable();
         DataRow dr;
         dt.Columns.Add("hotelId");
         dt.Columns.Add("name");
         dt.Columns.Add("address1");
         dt.Columns.Add("address2");
         dt.Columns.Add("city");
         dt.Columns.Add("postalCode");
         dt.Columns.Add("countryCode");
         dr = dt.NewRow();

         XmlSerializer serializer = new XmlSerializer(typeof(HotelListResponse));
         HotelListResponse hx = new HotelListResponse();
         hx.Items = new hoteltype[7];

       Stream reader = new FileStream(@"C:\New folder\myfile.xml", FileMode.Open);

       HotelListResponse hlist = (HotelListResponse)serializer.Deserialize(reader);

           dt.ReadXml(@"C:\New folder\myfile.xml");
           //foreach(hoteltype ht in hlist.htype){
           this.GridView1.Visible = true;
           GridView1.DataSource = dt;
           GridView1.DataBind();
           //} 

          //responsereader.Close();
           //request.GetResponse().Close();

       }
   }
     catch (WebException ex)
     {
         if (ex.Response == null)
             throw new NullReferenceException("WebException response");
         throw ex;
     }

} 
```

这里 HotelListResponse 我的类文件。实际上在程序中我正在使用自定义属性。我正在发布 Pastbin 链接，它也包含我的整个代码。

[http://pastebin.com/C2q4JYYt](http://pastebin.com/C2q4JYYt)

# mysql - 转储文件中的特殊字符

> ID：14382788
> 
> 赞同：1
> 
> 时间：2013-01-17T15:46:40.843
> 
> 标签：mysql

当我使用 mysqldump 时，我得到如下的 sql 语句。而且没有问题。

```
INSERT INTO `route_s` VALUES (120,3,'AKJ','AKLU',27,'O-',63.0,63.0,0.0,11,'','MHR','N','Y','Y',''); 
```

有时我会得到类似以下的内容（注意最后的回车 \r ）

```
INSERT INTO `route_s` VALUES (713497,29195,'NVS','NEVA',1,'OO',0.0,0.0,0.0,1,'','MHR','N','Y','Y','\r'); 
```

如何避免在转储文件中获取此（和其他）特殊字符？

我正在使用 Linux 并且 -r（原始文件）选项不起作用。

# sql - 使用标识列而不是唯一键的好处

> ID：14382792
> 
> 赞同：1
> 
> 时间：2013-01-17T15:46:55.750
> 
> 标签：sql, database

我想知道在唯一键上使用标识列的优点。我一直使用标识列，并且知道它比唯一键更好。但我想知道身份密钥相对于唯一密钥的好处。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:05:29.213

您是否试图在使用标识列和唯一标识符列作为主键之间做出决定？

Uniqueidentifier (Guids) 的优点是在整个环境中都是唯一的，从而更容易在给定表的上下文之外唯一标识一条记录。它们还提供了一个密钥，您可以在不易迭代的应用程序中公开这些密钥。

标识列使用更少的存储空间，因此更快、更高效。

他们的使用没有正确的答案。这真的取决于上下文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T15:50:29.197

主键可以用作另一个表中的外键，标识列不能。在没有看到您尝试存储的数据类型的情况下，我建议您使用标识列，但也将其设置为主键。

# asp.net - 如何解释来自信号器连接请求的 json 响应

> ID：14382797
> 
> 赞同：0
> 
> 时间：2013-01-17T15:47:18.667
> 
> 标签：asp.net, signalr

我正在尝试将信号器与现有的 asp.net 表单网络应用程序集成。

在最初连接成功并且服务器端然后回调客户端 js 函数后，signalr 似乎无法维持连接。我正在 Windows 7 机器上开发，因此 10 个连接的限制使得调试起来有些困难。然而，当网站部署到 2003 Enterprise Ed 时，我看到了同样的*问题*。服务器，所以我认为我没有看到连接限制问题（尽管我已准备好进行更正）

看着提琴手，我最终得到了 200 的连接请求，但我得到的唯一 JSON 是这样的：

```
{"C":"B,0|7,4|8,0|9,0","T":1,"M":[]} 
```

我不知道这代表什么。最初，当连接成功时，我得到了这个（包括我期望的数据有效负载）：

```
"C": "B,0|BK,1|BL,0|BM,0",
"M": [{
    "H": "notifyHub",
    "M": "notificationReceived",
    "A": ["[{\"TransitionNotificationId\":527,\"AuthorizationJobId\":53,\"TransitionType\":2,\"IsWorkShop\":true},
            {\"TransitionNotificationId\":528,\"AuthorizationJobId\":53,\"TransitionType\":12,\"IsWorkShop\":true},
            {\"TransitionNotificationId\":580,\"AuthorizationJobId\":61,\"TransitionType\":2,\"IsWorkShop\":true}]"]
    }] 
```

如果我能正确解释“失败”请求中的 JSON，我就会知道在哪里寻找问题。

提前喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:21:58.150

T:1 表示您的连接超时。使用长轮询时，连接将每 120 秒超时一次（默认情况下）。这是因为大多数负载均衡器/代理会在一段时间后终止空闲连接。其他传输发送保持活动以阻止这种情况发生。

至于有效载荷的其余部分：

```
C: Cursor
M: Messages
   H: Hubname
   M: Method name
   A: Method args
T: Timeout
D: Disconnect 
```

# scala - 从 Scala 中的选项内的选项中提取值

> ID：14382800
> 
> 赞同：6
> 
> 时间：2013-01-17T15:47:36.457
> 
> 标签：scala, slick

鉴于以下情况：

```
val x = Some(Some(1)) 
```

获得 1（如果不存在则为 -1）的最干净的方法是什么？

我正在从数据库查询返回的元组创建一个对象实例。元组中的一个值看起来像这样，所以我想要一个漂亮的短“单线”来获取值或将参数设置为 -1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T15:53:31.927

`x.flatten`就是你要找的。这里会给你`Some(1)`。如果您真的想解决`-1`“*不存在*”的情况，请执行以下操作`x.flatten.getOrElse(-1)`：

```
scala> Some(Some(1)).flatten.getOrElse(-1)
res1: Int = 1
scala> Some(None).flatten.getOrElse(-1)
res2: Int = -1
scala> None.flatten.getOrElse(-1)
res3: Int = -1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T17:49:40.317

for-comprehensions 通常是使用这些嵌套结构的一种非常易读的方式：

```
 val x = Some(Some(1))
  val result = for {
    firstLevel <- x
    secondLevel <- firstLevel
  } yield {
    // We've got an int, now transform it!
    (secondLevel * 100).toString
  } 
```

结果是一个 Option[String]，只有当你有两个 Some(s) 时才会发生转换。

您还可以使用模式匹配：

```
 val result2 = for {
    Some(v) <- x
  } yield {
    // We've got a int, now transform it!
    (v * 100).toString
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:16:36.430

虽然不是“单线”，但您可以创建一个函数来提取值。如果您将其设为通用并传入默认值，它可能会非常方便。

```
scala> def fetchFromOptions[A](default: A)(x: Option[Option[A]]) = x match {
     | case Some(Some(a)) => a
     | case _ => default
     | }
fetchFromOptions: [A](default: A)(x: Option[Option[A]])A

scala> fetchFromOptions(-1)(Some(Some(1)))
res0: Int = 1

scala> fetchFromOptions(-1)(Some(None))
res1: Int = -1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T16:04:08.153

这就是我想出的：

```
scala> val x = Some(Some(1))
x: Some[Some[Int]] = Some(Some(1))

scala> val y = x.map(_.getOrElse(-1)).get
y: Int = 1

scala> val x = Some(None)
x: Some[None.type] = Some(None)

scala> val y = x.map(_.getOrElse(-1)).get
y: Int = -1 
```

这仅在您的第一级*Some*不是*None时有效*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T17:03:40.720

如果您确实知道它`Some(Some(1))`，那么您可以使用无可辩驳的模式匹配表示法：

```
scala> val ssi1 = Some(Some(1))
ssi1: Some[Some[Int]] = Some(Some(1))

scala> val Some(Some(i1)) = ssi1
i1: Int = 1 
```

如果混合中可能存在任何可能`None`，那么您必须使用其他人建议的更谨慎和详细的形式。

对于那些觉得这是一个奇怪的符号的人，可以把它想象成你`case`在一个`match`结构或`PartialFunction`文字中写的内容，以匹配一个被审查的`Some(Some(1))`.

# http-headers - IIS 6 不返回我的自定义 http 标头

> ID：14382805
> 
> 赞同：1
> 
> 时间：2013-01-17T15:47:48.350
> 
> 标签：http-headers, iis-6

运行 IIS 6，我希望我的网站有

```
"Access-Control-Allow-Origin: *" 
```

在响应的标题中。我确实将它添加到我的网站属性 > HTTP 标头中并将其添加到那里。我已经回收了 AppPool，重新启动了 IIS，但响应中仍然没有出现标题。

我已经能够通过将 IIS 7 添加到 web.config 的 httpProtocol>customHeaders 部分来实现这一点，但我读过它不适用于 IIS 6。

我错过了什么？

# asp.net-mvc - 从 MVC razor 视图访问会话变量提供变量类型而不是值

> ID：14382809
> 
> 赞同：0
> 
> 时间：2013-01-17T15:48:02.377
> 
> 标签：asp.net-mvc, session, razor

我正在尝试访问 MVC razor 视图中的会话变量，会话变量的类型为 User ，它具有属性 UserID，代码如下所示：

```
<h3>@((User)Session["LoggedOnUser"]).UserID</h3> 
```

它只打印属性的完全限定类型而不是其值。我还尝试了以下方法：

```
@{User loginUser = (User)Session["LoggedOnUser"];}
<h3>@loginUser.UserID</h3> 
```

这次有效。谁能告诉我这两者有什么区别以及为什么第一个不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:38:37.193

这是因为您为`Response.Write`(@) 代码块放置了右括号。您正在对 User 对象而不是 UserID 属性调用 Response.Write。我相信在用户 ojbect 上调用 Response.Write 只会使用 ToString() 方法并返回完全限定的类型名称。

以下将起作用：

```
@((User)Session["LoggedOnUser"].UserID) 
```

请注意，右括号在属性之后，而不是在会话字典的返回值之后。

# c# - 从解析的字符串构建多级数组数组/锯齿状数组

> ID：14382811
> 
> 赞同：3
> 
> 时间：2013-01-17T15:48:05.290
> 
> 标签：c#, regex, string, parsing, jagged-arrays

我一直在尝试扩展我的代码以合并基于一些字符串的第三级数组，这是我一直在尝试做的，但我只能根据我对代码的理解将它变成第二级数组。

```
string a = "{50,8,10} Grade 1; {70,10,45} Grade 2; {80,20,65} Grade 3: {90,100,23} Grade 4; {98,99,32} Grade 5; {100,1000,7} Grade 6";

        int[][][] test =
            a.Split(':')
             .Select(t => Regex.Matches(t, @"(?<={).*?(?=})"))
             .Cast<MatchCollection>()
             .Select(m => m.Cast<Match>()
                 .Select(n => n.ToString().Split(',')
                     .Select(int.Parse))
                     .ToArray())
                 .ToArray()
             .ToArray(); 
```

所以数组的每个部分看起来像这样

```
 //int[][][] { {50,8,10} Grade 1; {70,10,45} Grade 2; {80,20,65} Grade 3 }
        //    int[][] { {50,8,10},{70,10,45},{80,20,65} }
        //        int[] {50,8,10} 
```

无论如何，我对编程还是很陌生，我一直在潜心研究它并边走边学。如果除了使用数组之外还有更有效的方法来处理这个问题，我愿意接受建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:46:13.557

您的代码实际上几乎是正确的。我认为这只是一个`)`不合适的地方（我也清理了一些格式）。

```
int[][][] test = a.Split(':')
                  .Select(t => Regex.Matches(t, @"(?<={).*?(?=})"))
                  .Cast<MatchCollection>()
                  .Select(m => m.Cast<Match>()
                                .Select(n => n.ToString().Split(',')
                                              .Select(int.Parse)
                                              .ToArray())
                                .ToArray())
                  .ToArray(); 
```

但是，An`int[][][]`并不是最有效的数据结构 - 您可能需要考虑`Dictionary<string, List<int>>`。

# javascript - for 循环，无法加载给定的 URL

> ID：14382817
> 
> 赞同：0
> 
> 时间：2013-01-17T15:48:29.597
> 
> 标签：javascript, jquery

我是 js 新手，我正在玩一个 for 循环，该循环使用 .append() 将图像放入#div

totalSlides 是一个动态 int 并且可以更改，我想显示与 totalSlides 数量相同数量的图像。

我很确定 for 循环逻辑是正确的，但由于某种原因，图像没有显示。当我在 firebug 中检查时，我收到错误“无法加载给定的 url”。我知道那个 url 是正确的，我什至尝试了完整的 url 路径 C:/complete/folder/path 等。

我确信这是一个我应该得到的简单修复，但现在我只是不明白为什么它不会加载我的图像。

```
for(i=0;i<totalSlides;i++){ // Loads all number images into html
    $('#numbers').append("<img src='images/numbers/number"+i+".png'/>");
}; 
```

提前致谢。

杰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:06:00.240

一个原因可能是如果 JavaScript 位于其他文件夹中（例如 /js/myfile.js），那么相对路径将失败，因为它会*在 JS 文件夹中查找 images 文件夹*。

尝试从根开始给出路径：

```
$('#numbers').append("<img src='/images/numbers/number"+i+".png'/>"); 
```

（注意图片源开头添加的“/”）

# ant - hudson build 中的运行时构建配置

> ID：14382821
> 
> 赞同：0
> 
> 时间：2013-01-17T15:48:31.700
> 
> 标签：ant, configuration, hudson

我的项目使用 ANT 构建系统。目前，我正在通过 shell 命令为我的项目提供构建。假设当我从 cmd 提示符给出“ant dev deploy”（参见下图以通过 cmd 提示符成功构建）**时，构建开始并在其之间停止以供用户确认**。在下图中，我突出显示了传递给“dev”的运行时值，它作为确认变量传递，然后根据传递的值继续构建。这就是它应该的样子，并且到目前为止它工作正常。

![通过 cmd 提示符成功构建 ANT][1] 目前我正在通过 hudson 自动执行此构建。我在 hudson 的 Build 属性的目标中给出了值“ant dev deploy”。但是，现在我不知道如何配置以在构建进度之间获取值“dev”。在我的试验中，我得到了错误。下面，我给出了哈德逊的日志。

无论如何我可以在运行时传递值。？

抱歉，我无法发布图片。如有问题可以澄清。

哎呀！您的问题无法提交，因为：

•我们很抱歉，但作为垃圾邮件预防机制，不允许新用户发布图像。赚取超过 10 名声望发布图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:53:35.090

您不能在构建过程中将值传递给 Hudson。您需要在触发构建时提供它。Hudson 不是交互式的，因此您当前流程中需要用户在中途提示的任何内容都需要重新设计。

您的所有用户提示都需要在构建开始时通过**构建参数**完成。在作业配置中，勾选**This build is parameterized**。如果要限制可能的值，最好使用“Choice”参数。给它一个名字，例如`CHOICE1`，给它一个可能的选择列表。当手动触发构建时，用户可以从下拉列表中选择一个选项，然后开始构建。请注意，这不适用于自动触发的构建。

接下来，您需要将此值传递给您的 ANT 脚本。在您的**Invoke Ant**构建步骤中，单击“高级”按钮，然后在“属性”下，您可以将变量传递给您的 ANT 脚本：

```
antScriptVar=$CHOICE1 
```

上面`$CHOICE1`是对 Hudson 构建参数的引用，它将包含用户在开始构建时从下拉列表中选择的值。这`antScriptVar`是您在 ANT 脚本中的变量，它将具有此值。您可以在 ANT 脚本中定义空变量

```
<property name="antScriptVar" value="" /> 
```

当 Hudson 触发 ANT 脚本时，它将使用构建变量填充此变量。从那时起，像使用 ANT 中的任何其他变量一样使用它

# java - 重定向或转发维护 BindingResults

> ID：14382823
> 
> 赞同：2
> 
> 时间：2013-01-17T15:48:37.290
> 
> 标签：java, spring-mvc

我正在寻找一种方法来从一个控制器请求映射到另一个进行重定向或转发。

情况是我有一个控制器，它具有三个阶段：用户输入数据 -> 预览页面 -> 提交。在预览请求映射中，我有模型属性及其 BindingResult。如果我在绑定中有错误，我想使用重定向将用户推回新表单，但是当我这样做时，Spring 会重新评估 ModelAttribute，从而重新创建 BindingResult。

一些代码：

```
@RequestMapping(value = "\new", method = RequestMethod.GET)
@ApplicationUserCreated
public String formNew(
        @ModelAttribute("formBean") FormBean formBean,
        BindingResult bindingResults,
        Model uiModel) {
    // Do some stuff

    // Send the "new form" view
    return "new.jsp";
}

@RequestMapping("/preview", method = RequestMethod.POST)
@ApplicationUserCreated
public String formPreview(
        @ModelAttribute("formBean") FormBean formBean,
        BindingResult bindingResults,
        Model uiModel) {
    // TODO: Validate the form
    if(bindingResults.hasErrors()) {
        // Redirect them back to the "New" form
        return "redirect:" + "/new";
    } else {
        return "preview.jsp";
    }
} 
```

请原谅任何拼写错误，因为我不得不尝试简化一些代码。我尝试从 formNew() 方法中删除 BindingResults，但是当 Preview 重定向到 New 时，它似乎仍然会覆盖 BindingResults。我也尝试过“前进”，但结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:58:12.167

当我需要将用户发送回 new.jsp 时，我最终只是从*formPreview()调用了**formNew() 。*我没有得到重定向，所以浏览器中的 URL 显示为“/preview”，但至少它可以工作，我觉得我没有浪费时间复制代码。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:58:32.000

您可以将 BindingResult 存储在 Session 中，或者您可以尝试使用[Spring Flash Attributes](http://www.javacodegeeks.com/2012/02/spring-mvc-flash-attributes.html)发送该数据，如果您至少有 spring 3.1 的话。

** 如果 ManagementMovesFormBean 扩展或实现您是 FormBean，您应该在 flash 属性中发送该 bean。

** 顺便说一句，为了验证你的表单，你应该在 @ModelAttribute(".....

不要忘记将 BindingResult 分配给单个类，在您的示例中，您有 2 个具有不同预期对象的方法，因此这两个 BindingObjects 是不同的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T21:21:09.580

我不确定预览页面的目的是什么，但我建议在同一页面上执行验证，并且只有在输入有效时才能继续使用重定向进行预览。*

# performance - 使用 AS3 在特定时间调用与类链接的多个函数

> ID：14382824
> 
> 赞同：0
> 
> 时间：2013-01-17T15:48:38.113
> 
> 标签：performance, actionscript-3

我正在为游戏开发一个随机波系统。这个想法是，每 1000 个点，就会从大约 50 个可能性中选择一个运动模式。这会影响所选项目的速度、方向和图像。我设计了一种我认为可行的方法，但我不确定这是否会花费太多内存来运行。

```
public class engine extends MovieClip {

    private var countK:Number = 0;
    private var newWave:Boolean = true;

    public function engine() {
        stage.addEventListener(Event.ENTER_FRAME, update);
    }

    private function update():void {
        checkCount();
        checkNew();
    }

    private function checkCount():void {
        if (count => 1000) {
            newWave=true;
            count = 0;
        }
    }

    private function checkNew():void {
        if(newWave) {
            randomNumber();
            newWave=false
        }
    } 
```

以上是我的快速想法，即每 1000 个点生成一个随机数。可以以您想要的任何方式添加分数（只需将 20 加到“分数”，将 20 加到“计数”）。我可以在 checkNew 中使用随机数函数，我不会拉另一个函数，它只是为了便于阅读而存在。

```
 var newEnemy:mEnemy =new mEnemy();
            stage.addChild(newEnemy);
            EnemyArray.push(newEnemy);
            trace(EnemyArray.length); 
```

上面是一些可以在舞台上添加一个 mEnemy 实例的代码。现在我开始放松它了，我怎样才能将随机数转换为改变 mEnemy 行为的可行方法？

在 menemy 类中有 50 个函数是否明智，就在我 addChild 之前，我做了类似 newEnemy.WAVEfuncton1(); ? 如果是这种情况，我可以通过让它选择函数而不编写一大堆 if 语句来保存代码吗？

代替;

```
if (randomN==1) {
newEnemy.WAVEfunction1();
}
if (randomN==2) {
newEnemy.WAVEfunction2();
}
.... 
```

我可不可以做;

```
newEnemy.WAVEfunction[randomN](); 
```

这也是假设在敌人内部使用函数是最好的主意。将行为放在引擎类中会更好吗？

如您所见，我不是程序员。我对这种想法很陌生，我不想制造一个会破坏游戏性能的错误（更不用说养成坏习惯了！）。

如果您花时间阅读此问题，谢谢！如果你能容忍我的无知，那就更谢谢你了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:04:48.317

如果波函数只是创建某种类型的单个敌人，那么使用每个类型的详细信息制作一个数组可能更有意义：（我猜你的敌人是如何工作的）

```
private const ENEMY_TYPES:Array = [
    {speed:1, direction:90, image:1},
    {speed:2, direction:45, image:2}
    ] 
```

然后更改 mEnemy() 以根据您提供的详细信息进行设置：

```
public function mEnemy(details:Object) {
    mySpeed = details.speed;
    ... 
```

这样，你就可以写`new mEnemy(ENEMY_TYPES[randomN]);`

或者，如果您确实需要许多单独的波函数，您可以使用[[ ] 数组访问运算符](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#array_access)来访问对象的属性，例如`newEnemy`按名称（或`this`引用当前对象）：

```
var exampleProperty:String = "Hello.";
this["exampleProperty"]; 
```

所以你可以通过编写来运行你的波函数：

```
newEnemy["WAVEfunction" + String(randomN)](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T15:05:00.730

一个有 2 年历史的问题，而且已经相当不实际，但让我在这里尝试一下，因为我刚刚注册。

据我了解，您在这里打算做的是为每种 Enemy 编写所有 50 种行为方法，这当然不好。

首先，您可以添加“行为”实体。所以现在每个敌人都有一个行为属性。

接下来，您必须创建一个单独的 Behavior 类或接口，它将有 50 个子类 (Behaviour1...Behaviour50)，每个子类都实现自己的 run() 方法。请注意，通过这种方式，您将能够添加或删除行为而无需触及任何其他内容。基本实现如下所示：

```
public class Behaviour() {
    public function run(e:Enemy):void {
       e.y += 10;
    }
} 
```

所以你看，这不像是敌人在做某事。它是对传递给它的敌人做某事的行为。

接下来，您需要一种机制来从给定的随机数中获取正确的子类。

你需要的是一个工厂——一个静态类，它将根据输入参数返回不同类型的行为。像这样的东西：

```
public class BehaviourFactory {
   public static getBehaviour(n:int):Behaviour {
     switch(n) {
        case 1: return new Behaviour1();
        case 2: return new Behaviour2();
        // etc.
     }
   }
} 
```

您还可以使用类定义，而不是在 switch 中有 50 个选项：

```
var c:Class = getDefinitionByName('Behaviour' + your_random_number) as Class;
return new c; 
```

（在进一步的实现中，它可以被缓存，存储在数组中等。）拥有工厂后，您只需执行以下操作：

```
var b:Behaviour = BehaviourFactory.getBehaviour(your_random_number); 
```

接下来，您可以根据行为变化的确切程度使用不同的方法。例如，如果敌人出生时具有特定的当前行为，并且在敌人的生命周期内没有改变，则可以将 Behavior 子类之一分配给 Enemy 的 behavior 属性：

```
public class Enemy {
    public var behaviour:Behaviour;
    public function Enemy(b:Behaviour) {
        this.behaviour = b;
    }
}

var e:Enemy = new Enemy(BehaviourFactory.getBehaviour(random_number));
e.behaviour.run(e); 
```

当然，这个属性也可以动态改变，所以下次运行时敌人的行为会有所不同。

如果行为对所有敌人都是全局的并且同时对所有敌人进行更改，则您不需要在 Enemy 对象中具有属性。你只有一个全局 Behavior 对象并传递一个 Enemy 实例：

```
var e:Enemy = enemy_list[i];
current_behaviour.run(e); 
```

它将根据当前选择的行为处理每个活跃的敌人。

最后，还有更有趣的方式来实现行为。假设您有几种没有共同点的行为类型。比如说，敌人可以是爬行的、飞行的、射击的和有毒的。因此，假设您正在尝试实现所有可能的组合：Flying、FlyingShooting、FlyingPoisonous、FlyingShootingPoisonous 等。尽管它们具有非常常见的基本部分，但您必须为每个组合创建一个 Behavior 子类。

还有另一种方法，称为装饰器模式。您只需为每个单一质量编写一个方法。每当您需要质量组合时，您只需创建具有第一质量的对象并将其包装到具有第二质量的对象中并将其包装到具有第三质量的对象中等等。因此您的基本 Behavior 类需要添加一个：

```
public class Behaviour {
    private var parent_bhv: Behaviour;

    public function Behaviour(bhv:Behaviour = null) {
        if (bhv) this.parent_bhv = bhv;
    }

    public function run(e:Enemy):void {
       e.y += 10; // do what we need to do
       if (this.parent_bhv) this.parent_bhv.run(e); // pass to a next bhv.
    }
} 
```

让我们创建数字 1、3 和 15 的复合行为：

```
var decorated_behaviour:Behaviour = BehaviourFactory.getDecoratedBehaviour([1, 3, 15]); 
```

让我们也添加相应的 BehaviourFactory 方法：

```
public class BehaviourFactory {
    public static function getDecoratedBehaviour(bhv_list:Array):Behaviour {
       var b:Behaviour = null;
       for (var i:int = 0; i < bhv_list.length; i++) {
          var c:Class = getDefinitionByName('Behaviour' + bhv_list[i]) as Class;
          b = new c(b);
       }
       return b;
    }
} 
```

现在您已经准备就绪，无需编写所有可能的组合！

# python - python mechanize空白下载或如何在casperjs中进行

> ID：14382826
> 
> 赞同：0
> 
> 时间：2013-01-17T15:48:44.843
> 
> 标签：python, mechanize, casperjs

我正在从使用 ajax 加载 URL 并且不允许串行下载的站点下载研究项目的信息。我正在将 url 转储`casperjs`到我阅读并用于`browser.retrieve(url,dump_filename)`下载信息的文件中`mechanize`。我主要下载空白文件，但它们会定期填充内容。有没有办法修改标题，以便我始终可以获取数据。此外，`casperjs`欢迎下载替代方案。我试过`casperjs`download() 但它也保存了一个空白文件。我认为这与标题有关。文件下载始终在浏览器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:57:42.950

当涉及到使用 AJAX、JS 等的更“复杂”的网站时，我更喜欢[Selenium而不是 Mechanize。](http://pypi.python.org/pypi/selenium)

你说下载作品，当你使用你的浏览器。Selenium 做同样的事情——它在你的桌面上使用 Firefox 来完成它的任务

# mysql - 如何在 SSIS 中定义 MySQL 变量

> ID：14382829
> 
> 赞同：1
> 
> 时间：2013-01-17T15:48:53.793
> 
> 标签：mysql, ssis

我正在从 MySQL 数据表中加载数据。该表有一个大文本列，当记录数超过 15,000 时，SSIS 连接超时。所以我想我会尝试将数据以块的形式提供。我创建了一个查询以从源表中获取记录数，并创建一个包含开始和结束记录号的对象，直到所有记录都被计算在内。然后我设置了一个 For-Each 控件来读取数据。我使用了一个表达式来定义查询，它创建了一个包含我需要的开始和结束记录号的查询。我可以评估表达式并将其粘贴到 MySQL 中，它可以按预期工作。

除了我必须在查询中使用 MySQL 变量之外，一切都会很棒。即使变量名在引号之间，当 SSIS 实际尝试执行查询时，它也会告诉我`@curRow`必须定义参数，但该变量是在 MySQL 中使用的。任何人都知道如何解决这个问题？我的第一个想法是在名为的包中创建一个字符串变量`curRow`

我使用的表达式是：

```
"SELECT id,
        report_html,
        CASE
          WHEN `TimeStamp` < '1900-01-01 00:00:00'
            OR `TimeStamp` IS NULL THEN
                 CAST('1900-01-01' AS DATETIME)
          ELSE `TimeStamp`
        END AS `TIMESTAMP`,
        @curRow := @curRow + 1 AS row_number
 FROM   corp_inv, (SELECT @curRow := 0) AS r
 HAVING row_number BETWEEN " + (DT_STR, 6, 1252) @[User::LoVal]  + "
                       AND " + (DT_STR, 6, 1252) @[User::HiVal]  + ";" 
```

由表达式创建的查询（它确实提取了 MySQL 中的 3,999 条记录）是：

```
SELECT id,
       report_html,
       CASE
         WHEN `TimeStamp` < '1900-01-01 00:00:00'
           OR `TimeStamp` IS NULL THEN
                CAST('1900-01-01' AS DATETIME)
         ELSE `TimeStamp`
       END AS `TIMESTAMP`,
       @curRow := @curRow + 1 AS row_number
FROM   corp_inv, (SELECT @curRow := 0) AS r
HAVING row_number BETWEEN 1
                      AND 3999; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:18:20.403

[这个 SO post](https://stackoverflow.com/questions/958953/is-it-possible-to-use-a-mysql-user-defined-variable-in-a-net-mysqlcommand)建议添加

```
;Allow User Variables=True 
```

到连接字符串。

（还可以查看[MySQL 的 .Net 连接字符串文档，](http://dev.mysql.com/doc/refman/5.1/en/connector-net-connection-options.html)了解所有可能的属性。）

另一个建议是使用 Script Component Source 去纯 .NET 并避免使用 MySQL 变量阻碍的任何怪癖。

# php - datetimepicker 不想要我的 php 变量

> ID：14382833
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:00.677
> 
> 标签：php, javascript, jquery, html

我有一个大问题，在过去的五个小时里让我很困惑。

我使用日期时间选择器。

```
<?php
$tabname = "frequency";
$datumstart = "'#datumstart".$tabname."'";
?>
<script type ="text/javascript">
$(function(){$(<?php echo $datumstart; ?>).datetimepicker();
</script>
<input type="text" name="datumstart<?php echo $tabname; ?/> 
```

我想用

```
$(function load() {
var datumstart = $(<? php echo $datumstart; ?>).val(); }); 
```

所以每次我想用这一行运行文件

```
var datumstart = $(<? php echo $datumstart; ?>).val(); }); 
```

var datumstart 的警报输出为空白。

但是有了这个

```
var datumstart = $('#datumstartfrequency').val(); }); 
```

我得到了价值！

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:50:51.240

您缺少撇号：

```
$('<?php echo $datumstart; ?>') 
```

# bash - Bash：在一次操作中分配多个变量

> ID：14382835
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:10.120
> 
> 标签：bash

我有一个像

```
line1 word1 word2 word4 etc..
line2 word1 word2 word4 etc.. 
```

我知道我可以使用`cut -d ' ' -fx`命令提取单词，但我想在一次操作中提取和分配许多单词。

```
while read line;do
  echo $line | awk '{ word1=$1; word2=$2 }'
  # usage $word1, $word2, etc.
done < $file 
```

这可能吗？

### 更好的例子

文件

```
jose  1234 2011/12/01
maria 2345 2010/04/10 
```

脚本

```
while read line;do
  echo $line | awk '{ name=$1; counter=$2, date=$3 }'
  # usage $name, $counter, $date, etc
done < $file 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:56:42.310

如果一行中的单词数是固定的（简单的情况），那么：

```
while read name number date
do
    # ...use $name, $number, $date
done <<'EOF'
jose  1234 2011/12/01
maria 2345 2010/04/10
EOF 
```

请注意，如果该行中有 4 个或更多单词，`$date`将获取名称和编号之后的所有剩余单词。如果少于三个，`read`则将起作用，但没有值（或什至）的变量`date`将`number`是`name`空字符串。

如果一行中的单词数是可变的，那么您可能希望使用`bash` [数组](http://www.gnu.org/software/bash/manual/bash.html#Arrays)[`read`](http://www.gnu.org/software/bash/manual/bash.html#index-read)：

```
while read -a array
do
    # ...process "${array[@]}"...
    echo "${array[@]}"
done <<'EOF'
one
two three
four five six
seven eight
nine
EOF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:03:47.583

可以使用 awk

```
root@server$ vars=$( awk '{for(i=1;i<=NF;i++){ print "word" i "=" $i }}' file )
root@server$ echo $vars
word1=one word2=two word3=three
root@server$ declare $vars
root@server$ echo $word1 
one 
```

所以崩溃

awk 有内部变量 NF，它是行中的字段数。因此，我们运行一个快速的 for 循环遍历所有字段，跳过字段 0，因为这就是整行。对于每次迭代，我们打印出一个 bash 变量赋值语句并将输出捕获到 vars 变量中。

然后我们使用 declare 来声明变量。如果我们不使用声明，那么我们将在文件中执行一些任意代码。

希望这是有用的。

# wordpress - 插件域图像未加载 Htaccess Wordpress

> ID：14382836
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:12.733
> 
> 标签：wordpress, .htaccess, redirect, cpanel, addon-domain

我的插件域有问题，在我的主域上一切正常，我安装了 wordpress 并使用以下 htaccess 完美运行：

```
RewriteCond %{HTTP_HOST} ^(www\.)?addon-domain\.com
Rewriterule .* - [L]
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

在插件域子文件夹上它可以像我希望的那样像单个域一样工作和加载站点，但没有加载图像，以下插件域 htaccess 文件：

```
Options -MultiViews -Indexes +FollowSymlinks
<IfModule mod_security.c>
    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/x-javascript text/css text/html text/xml
</IfModule>

RewriteCond %{HTTP_HOST} ^addon\-domain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.addon\-domain\.com$
RewriteRule ^/?$ "http\:\/\/domain\.com\/addon\-domain\.com" [R=301,L] 
```

现在...我尝试禁用热链接，启用每个域和插件的规则，而不是处理...尝试删除域 htaccess 并且没有任何事情发生。

我在插件域中运行 videoscript 和视频缩略图工作正常，当我上传图像时它正常加载，但所有 css 图像和子文件夹图像，如 logo 不是。:-(

我可以使用直接地址访问 css、js 和其他模板文件，但没有一个图像文件打开...在 firefox 上我收到此错误消息：

```
The image "http://addon-domain.com/templates/frontend/default/images/videozoom.png" cannot be displayed because it contain errors. 
```

并且不同文件夹中的所有其他图像都显示相同的消息...我在根域和 addondomain 文件夹中只有 Htacces 文件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:08:25.717

只需将您的网站添加到热链接保护中，一切都会正常工作=D

# php - 相当于 wordpress/php 中的 ExpressionEngine 开关标记？

> ID：14382839
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:21.187
> 
> 标签：php, wordpress, expressionengine

在 ExpressionEngine 而在他们的“循环”版本中，我可以将标签添加到任何元素，如下所示：

```
<li class="{switch='one|two|three|four|five|six'}"> 
```

li 的第一次迭代将有一个类，下一个是 2 个，并且在 6 个之后再次循环。我在 wordpress 网站中需要这种类似的功能，但不知道如何实现。是否有内置的 wordpress 函数或者我需要在 php 中编写某种函数？

目前，使用它来尝试使用@Leonard 的解决方案，但是“四”类正在一遍又一遍地重复，而不是循环

```
<?php

$argsGallery = array(
    'post_type' => 'gallery',
    'orderby'       => 'menu_order',
    'order'         => 'ASC'
);
$the_query = new WP_Query( $argsGallery );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();?>

            <div class="<?php cycle('four|three|five|two|six|four'); ?> columns">
                <div class="thumb">

                    <a class="jackbox" 
                        data-group="images" 
                        data-thumbnail="<?php the_field('image'); ?>" 
                        data-title="Image One" 
                        data-description="#description_1" 
                        href="<?php the_field('image'); ?>"
                    >
                        <div class="jackbox-hover jackbox-hover-black">
                            <p><?php the_field('image_description'); ?> </p>
                        </div>
                        <img 
                            src="<?php the_field('image'); ?>" 
                            alt="responsive lightbox" 
                        />
                    </a>
                </div>
            </div>

<?php
    endwhile;
    wp_reset_query();
    wp_reset_postdata();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:23:41.210

在寻找完全相同的东西时发现了这个问题......在你发布它 20 分钟后谷歌顶部。疯了……不管怎样！

我想出了一个我已经测试过的函数（虽然很快），你可以将它放入你的functions.php，它可以与标准的Wordpress循环一起使用。它可能需要适应某些需求，但希望这是一个好的起点。

它使用 $wp_query 数组中的 current_post 计数并计算出它需要在循环值中的位置。

```
function cycle($input, $delimiter = '|', $query = false) {

    if($query == false):
        global $wp_query ;
        $current_post = $wp_query->current_post + 1;
    else:
        $current_post = $query->current_post + 1;
    endif;

    $switches = explode($delimiter, $input);

    $total_switches = count($switches) ;
    $current_set = ceil( $current_post / $total_switches)  ;

    $i = (($current_post - ($current_set * $total_switches)) + $total_switches) - 1 ;

    echo $switches[$i];

} 
```

然后你可以像这样在标准循环中使用它：

```
 <?php cycle('first|second|third|fourth'); ?> 
```

或者，如果需要，您可以自定义分隔：

```
 <?php cycle('first*second*third', '*'); ?> 
```

或者，如果您将它与 CUSTOM wp_query 一起使用，则必须像这样将它与作为第三个参数输入的查询一起使用：

```
 <?php cycle('first|second|third', '|', $the_query); ?> 
```

我确信有一种更简洁的方法可以输入该自定义查询，如果/当我找到方法时，我会继续寻找和更新！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:10:55.717

我知道足够多的 WP，但我从未见过这样的事情。也许这`ExpressionEngine`就是付费的原因（已经内置了类似的解决方案。在 WP 中，您必须手头上做）。这里有一个自己制作的想法：

**更新**：@jason-mccreary 的回答我知道我错了。我对此一无所知`cycles`。但在这里我有一个片段似乎是这样工作的：

```
function cycle($chunks)
{   
    if ( ! is_array($array = explode('|', $chunks)))
        return;

    static $i    = 0;
    echo $array[$i ++];
    if ($i >= count($array))
        $i   = 0;
}
?>

<?php for ($i = 0; $i < 9;  ++ $i) : ?>
    <li class="<?php echo cycle('one|two|three|four|five|six'); ?>"></li>
<?php endfor; ?> 
```

**输出**：

```
<li class="one"></li>
<li class="two"></li>
<li class="three"></li>
<li class="four"></li>
<li class="five"></li>
<li class="six"></li>
<li class="one"></li>
<li class="two"></li>
<li class="three"></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:36:12.720

这被称为*循环*函数。不幸的是，PHP 本身并没有这样的功能。

您将需要通过以下方式自定义编写一个：

*   创建一个函数。这是一个[很好的例子](http://baylorrae.com/creating-a-cycle-function-in-php/)。
*   直接在您的循环中使用*计数器*和[模数](http://php.net/manual/en/language.operators.arithmetic.php)。下面是一个人为的例子：

    ```
    $cycles = array('one', 'two', 'three');
    for ($i = 0; $i < 9; ++$i) {
      echo $cycles[$i % 3];
    } 
    ```

# linux - 来自文件的子字符串

> ID：14382842
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:35.413
> 
> 标签：linux, string, shell, grep

我需要使用正则表达式从文件中提取重合线：

这是文件的内容：

```
netbios-ns      137/tcp                         # NETBIOS Name Service
netbios-ns      137/udp
hkp             11371/tcp                       # OpenPGP HTTP Keyserver
hkp             11371/udp                       # OpenPGP HTTP Keyserver
bprd            13720/tcp                       # VERITAS NetBackup
bprd            13720/udp
vopied          13783/udp 
```

我需要使用`137`with过滤`grep`：

```
grep -n -e "137" file 
```

输出必须是：

```
netbios-ns      137/tcp                         # NETBIOS Name Service
netbios-ns      137/udp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:52:29.110

如果你总是有前面的空格和一个斜杠，那么：

```
$ grep " 137/" file
netbios-ns 137/tcp # NETBIOS Name Service
netbios-ns 137/udp 
```

或者更稳健，检查两边的非数字：

```
$ grep "[^[:digit:]]137[^[:digit:]]" file
netbios-ns 137/tcp # NETBIOS Name Service
netbios-ns 137/udp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:43:33.393

使用 grep 的单词边界：`grep '\<137\>' file`

# c# - 没有插入实际设备的 Kinect 仿真

> ID：14382843
> 
> 赞同：6
> 
> 时间：2013-01-17T15:49:37.757
> 
> 标签：c#, emulation, kinect, virtualization, kinect-sdk

当 Kinect 本身没有插入时，是否可以模拟 Kinect 传感器（用于 Kinect SDK）？

首先我认为 Kinect Studio 完全符合我的要求，但现在看来 Kinect Studio 记录数据流并可以将它们“提供”给应用程序，但无法模拟与传感器的连接。所以目前我有几个用 Kinect Studio 录制的 .xed 文件，如果没有收到“Kinect 传感器未插入”或任何消息，我无法启动任何支持 Kinect 的应用程序。

有没有办法解决？我可以访问 Kinect，但它不在我打算编写大部分代码的地方（我非常想用记录的数据运行/调试它）..

我真的很感激任何帮助。

PS 也许我只是在使用 Kinect Studio 时出了点问题，它实际上可以模拟 Kinect 连接（实际上这是最好的情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T04:29:52.597

您需要将记录的数据提供给 NUI 驱动程序才能执行此操作。

NUI-Natural User Interface - 这个东西是从 Kinect 获取输入并给出骨骼映射的输出的。

如果我没记错的话——你很幸运，因为 NUI 是开源的。搜索 OPEN-NI。

您所要求的绝对是可能的，但要进入位和字节，您将必须投入相当多的时间才能成为 Open-Ni 社区的一员，这不是一两天内可以即时学习的东西。

回到你的问题 - 是的，如果你修补驱动程序，可以让 Kinect 工作室“认为”有一个 Kinect 连接。我自己试过了吗？不 ：）

# asp.net - 如何在后面的代码中处理 ASPxGridView 的 OnRowClick 事件？

> ID：14382844
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:41.327
> 
> 标签：asp.net, devexpress, aspxgridview

我正在使用带有 VB 的 ASP.Net 在网格视图中显示记录。在普通的 ASP GridView 中，我可以简单地从后面的代码中处理 SelectedIndexChanged 事件，如下所示：

```
Sub mySub(ByVal sender as Object, ByVal e As EventArgs) 
          Handles GridView1.SelectedIndexChanged
  Dim id as String = GridView1.SelectedRow.Item(0).ToString
  Response.Redirect("Customer.aspx?ID=" & id) 'Or Whatever
End Sub 
```

现在我正在尝试做同样的事情，但使用 DevExpress 附带的 ASPxGridView。显然，没有可以直接从后面的代码处理的内置事件。我必须使用 javascript 进行客户端点击，我不介意，但我所有尝试将点击事件从客户端传递到背后的服务器代码的尝试都失败了。

这是我的 ASP 页面

```
<dx:ASPxGridView ID="ASPxGridView1" runat="server" AutoGenerateColumns="False"
     KeyFieldName="id" Width="550px" OnSelectionChanged="row_selected" >
    <SettingsBehavior AllowFocusedRow="True" />
    <SettingsText Title="Customers" />
    <Columns>
        <dx:GridViewDataTextColumn FieldName="id" ReadOnly="True" VisibleIndex="1">
            <EditFormSettings Visible="False" />
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn FieldName="Name" VisibleIndex="2">
        </dx:GridViewDataTextColumn>
    </Columns>
    <Settings ShowTitlePanel="True" />
    <ClientSideEvents FocusedRowChanged="function(s, e) {
        row_selected();
        }" />
</dx:ASPxGridView> 
```

这是我背后的代码（永远不会被调用）

```
Sub row_selected()
    Dim id as String = ASPxGridView1.SelectedRow.Item(0).ToString
    Response.Redirect("Customers.aspx?ID=" & id) 
End Sub 
```

如何通过单击 ASPxGridView 行上的一行从代码后面调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:43:49.147

试试这个：
1\. 将[ASPxGridView1.SettingsBehavior.ProcessFocusedRowChangedOnServer](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridViewBehaviorSettings_ProcessFocusedRowChangedOnServertopic)设置为 true。
2\. 处理服务器端[FocusedRowChanged](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FocusedRowChangedtopic)事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T18:41:08.273

这会做你想要的..

就我而言，

当用户单击行时，我想从 ASPxGridView 获取字段（'ID'）的内容......

为行单击创建 ClientSideEvent 并放置“RowClick(s, e);” 在函数中。

创建事件将调用的实际函数，如下所示 - 这是棘手的部分；

不要使用 GetFocusedRowIndex() 来获取索引，因为它是 FOCUSED 索引。

使用 e.visibleIndex

```
function RowClick(s, e) {
    // Do callback to get the row data for 'ID' using current row.
    MyAspxGridView.GetRowValues(e.visibleIndex, 'ID', OnGetRowId);
} 
```

创建您的回电以获取您想要的字段。我得到'ID'。

```
function OnGetRowId(idValue) {
    alert('ID: ' + idValue.toString());
} 
```

# puppet - Puppet：根据参数要求包

> ID：14382847
> 
> 赞同：1
> 
> 时间：2013-01-17T15:49:52.813
> 
> 标签：puppet

对这里的木偶很陌生。

认为：

```
define add_user ($shell) {
    $username = $title
    user { $username:
        shell = $shell,
    }
    group { $username:
        require => User[$username]
    }
} 
```

和：

```
class zsh {
    package { 'zsh': ensure => 'installed' }
}

class bash {
    package { 'bash': ensure => 'installed' }
} 
```

最后：

```
node default {
    add_user { 'foo':
        shell => '/bin/zsh'
    }
} 
```

如何设置从用户到 shell 的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:26:11.273

尝试将这样的内容添加到您的 add_user 函数中：

```
define add_user ($shell) {
  case $shell {
      '/bin/zsh':          { include zsh }
      '/bin/bash':         { include bash  }
      default:             { fail('Unknown Shell') }
  }
...
} 
```

# javascript - 创建像面包屑这样的场景

> ID：14382848
> 
> 赞同：0
> 
> 时间：2013-01-17T15:49:54.797
> 
> 标签：javascript, jquery, html

您好，我需要在 html 中创建类似面包屑的场景。我有一个页面有导航，如主页->部门->计算机->第1学期如果我在计算机页面上，那么它应该给面包屑作为

首页->>部门->>电脑

但我得到的概念是javascript：

```
function breadcrumbs(home,name){
    sURL = new String; 
    bits =  new Object;
    var x = 0;
    var stop = 0;
    var output = "<b><font color=\"darkgreen\">You are here:\<\/font\></b>                           <a href=\"http\:\/\/"+home+"\">Home</a> \<b\>→\<\/b\>  ";
    sURL = location.href;
    sURL = sURL.slice(8, sURL.length);
    chunkStart = sURL.indexOf("/");
    sURL = sURL.slice(chunkStart+1, sURL.length)
    while(!stop){
        chunkStart = sURL.indexOf("/");
        if (chunkStart != -1){
             bits[x] = sURL.slice(0, chunkStart)
             sURL = sURL.slice(chunkStart + 1, sURL.length);
        } else {
             stop = 1;
        }
        x++;
    }
    for(var i in bits){
        output += "<a href=\"";
        for(y= 1; y < x - i; y++){
              output += "../";
        }
        output += bits[i] + "/\">" + bits[i] + "</a>  \<b\>→\<\/b\>  ";
    }
    document.write(output + name);
} 
```

Html文件是：

```
<html>
    <head> 
        <script language="JavaScript" src="crumb.js"></script> 
        <script language="JavaScript">
            <!--                 
            breadcrumbs('www.celtnet.org.uk/info/info.html','Current Page');
            -->
        </script>
    </head>
    <body>
    </body>
</html> 
```

它的输出是：

```
You are here: Home >> Documents%20and%20Settings >> a >> Desktop >> Current Page 
```

但我不需要页面名称我需要我点击的链接名称然后它应该被重定向到它分配的页面所以你能给我建议吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:50:54.267

这是一个例子，我希望它符合您的需求。

**面包屑.js**

```
/**
 * Create the breadrumbs HTML.
 *
 * @param [Array] crumbs An array containing a list of crumbs the array must be
 *                       sorted according to their hierarchy.
 * @param [String] separator The string that will be used to separate each 
 *                           breadcrumb tag.
 * 
 * @return A string containing the HTML for the breadcrumb.
 */ 
function breadcrumbsHTML(url, separator) {
   var LINK_TEMPLATE = '<a href="{{href}}">{{crumb}}</a>';

   // Here we remove the protocol and obtain the crumbs.
   var crumbs = url.replace(/https?:\/\//g, '').split('/');
   var href= 'http://', html= '', crumb;

   for(var i in crumbs) {
      crumb = crumbs[i]; 

      // if it is the last crumb do not append the '/'
      href += crumb + (i === crumbs.length - 1 ? '' : '/');

      html += LINK_TEMPLATE
        .replace('{{crumb}}', crumb)
        .replace('{{href}}', href);

      if (i < crumbs.length - 1)  
          html += separator;
   }   

   return html;
}

var URL = 'http://stackoverflow.com/questions/14382848/create-scenario-like-breadcrumb';

console.log(breadcrumbsHTML(URL, ' >> ')); 
```

你可以像这样使用它：

```
<html>
    <head> 
        <script language="JavaScript" src="crumb.js"></script> 
        <script language="JavaScript">
            <!--                 
            document.getElementById('breadcrumbs').innerHTML = breadcrumbsHTML(location.href, ' >> ');
            -->
        </script>
    </head>
    <body>
        <div id="breadcrumbs"></div>
    </body> 
```

正如您可能注意到的那样，我已经从面包屑链接标签中删除了样式，应该使用针对`#breadcrumbs`div 标签内元素的 CSS 规则来应用样式。

# php - Http_Request2 POST 请求不起作用

> ID：14382850
> 
> 赞同：3
> 
> 时间：2013-01-17T15:50:08.087
> 
> 标签：php, httprequest

各位早安。我正在使用 Http_Request2 lib 做一些工作，我正面临这种情况。我试图向某个 URL 发出 POST 请求。如果我在url的查询字符串上添加参数，即

```
$request->setUrl('127.0.0.1/something.php?parm1=x&parm2=y');
$request->setMethod(HTTP_Request2::METHOD_POST); 
```

它工作正常，但我想使用 addPostParameter 方法设置参数：

```
$request->setUrl('127.0.0.1:8888/something.php');
$request->addPostParameter('parm1', $somevariable);
$request->addPostParameter($some_array_with_parms); 
```

这种方式行不通。该 URL 确实是 localhost 端口 8888。

有什么我想念的吗？POST请求的某种类型的配置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:59:04.897

这是一个示例代码：

```
try {

    $request = new HTTP_Request2('http://127.0.0.1:8888/something.php');
    $request->setMethod(HTTP_Request2::METHOD_POST)
        ->addPostParameter('parm', 'value1') //single param
        ->addPostParameter(array('parmType' => 'val11','parm2' => 'val12')); //multiple
    $response = $request->send()->getBody();

} catch (Exception $exc) {
    echo $exc->getMessage();
} 
```

注意：确保端口 8888 已打开。

# zend-framework - Zend Session 网上商店有些项目没有存储

> ID：14382854
> 
> 赞同：0
> 
> 时间：2013-01-17T15:50:21.007
> 
> 标签：zend-framework, zend-session

我有一个奇怪的问题，我想在会话中存储我商店的产品。这很好用，除了某些产品。该商店是 cms 的一部分，所有产品都以相同的方式呈现。当有人向商店添加产品时，这将被序列化并使用 ajax 发送到脚本。

几乎所有项目都被存储，但由于某种原因，有些项目没有被存储。我找不到连接或任何东西，也没有返回任何错误。

所以这是在会话中存储产品的代码：

```
$storeItemNumber = (string)$post['itemcode'];
                $storeItem = array($storeItemNumber => array(
                        'title' => $post['title'],
                        'price' => $post['price'],
                        'quantity' => $post['quantity']
                    )
                );
                $shopSession->$storeItemNumber = $storeItem; 
```

这是存储的产品示例：

```
 array('010101000' => array(
  'title' => 'Product title - 15',
 'price' => '28.95',
 'quantity' => '1',
)); 
```

这是未存储的产品示例：

```
 array('400002001' => array(
  'title' => 'Product title - Pink',
 'price' => '5.50',
 'quantity' => '1',
)); 
```

我已经检查了数据是否可以正常通过，并且在将其保存在会话中之前它是否正常。

可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:13:04.930

和我的一个朋友一起看了看，我们都认为这与数字有关。所以我将功能更改为以下，现在我可以毫无问题地添加所有产品。

我将暂时保留这个问题，因为我真的很好奇为什么有些数字被存储而其他数字不被存储，什么是比我的更好/更清洁的解决方案。

# toggle - 在 jQuery > 1.8 中使用什么来代替 `toggle(...)`？

> ID：14382857
> 
> 赞同：11
> 
> 时间：2013-01-17T15:50:32.203
> 
> 标签：toggle, jquery

现在它在 jQuery 1.8 中已`toggle(...)`被[弃用](http://api.jquery.com/category/deprecated/deprecated-1.8/)，然后[在 jQuery 1.9 中](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)[**被删除**](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)

*通常*可以使用什么（除了使用 jQuery 迁移脚本）而不是`toggle(fn, fn2);`那些具有相同类型的功能？

相关问题（询问具体案例）：[使用什么来代替切换？](https://stackoverflow.com/q/12579667/561731)

* * *

我**知道**功能**没有**`toggle()`被删除，只是添加自定义切换功能的能力（除了显示/隐藏默认功能）。

 *** * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T16:08:49.187

这是一个简单的实现：

```
$.fn.toggleClick = function() {
    var methods = arguments;    // Store the passed arguments for future reference
    var count = methods.length; // Cache the number of methods 

    // Use return this to maintain jQuery chainability
    // For each element you bind to
    return this.each(function(i, item){
        // Create a local counter for that element
        var index = 0;

        // Bind a click handler to that element
        $(item).on('click', function() {
            // That when called will apply the 'index'th method to that element
            // the index % count means that we constrain our iterator between 0
            // and (count-1)
            return methods[index++ % count].apply(this, arguments);
        });
    });
}; 
```

并将其用作

```
$('selector').toggleClick( function1, function2, ... ); 
```**

# java - 为什么 Java 不抱怨保留词 Float？

> ID：14382858
> 
> 赞同：2
> 
> 时间：2013-01-17T15:50:33.997
> 
> 标签：java, reserved-words

我在 Eclipse 中输入了它，并希望它是错误的语法，但它是允许的。有人可以解释一下这里发生了什么吗？不应该保留`Float`and关键字吗？`Integer`这是什么类型的任务？

```
Number Float = 99.455f;
Number Integer = 2; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:52:15.353

不，`Float`不是保留字。`float`是保留字。这是java[中的保留字列表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T15:52:48.973

您正在创建一个名为 的变量`Float`。就这样。它不是保留字。由于语句的语法，编译器不会尝试将其解释为类名。它不是无效的，即使它是错误的形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:51:43.290

因为那不是保留的，所以它是自动装箱的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T15:52:39.143

Float（它是一个包装类）不是 Java 保留关键字，但 float（它是一个原始关键字）是。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T15:52:45.947

Java 区分大小写，`float`是保留关键字，但`Float`不是。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-17T15:54:08.397

`Float`不是保留字。它只是 java.lang.Float 类的名称，系统库类名（甚至 from `java.lang`）不保留。`float`是保留字。你也可以拥有

```
int String = 1; 
```

但我不建议。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-17T16:02:49.670

这些怎么样，这些也编译。不尊重 Float 或 Integer，它们不是保留关键字，而是类名

```
 String String = "";
            Math Math = null;
            Object Object = null; 
```

# php - 带有TCPDF的HTML2PDF未在最终PDF文档中呈现中文字符

> ID：14382868
> 
> 赞同：1
> 
> 时间：2013-01-17T15:51:23.730
> 
> 标签：php, fonts, tcpdf, html2pdf, asianfonts

我正在为此启动一个新线程，将尝试尽可能具体。

这是我们的销售人员应用程序的一部分，允许他们使用他们的联系信息自定义页面，在他们点击提交后，会创建一个 PDF 页面，然后将其附加到较大文档的末尾。

文档的第一页也是从他们填写的同一个表单动态创建的。在他们按下提交后，会创建 2 个 PDF 文件，一个首页和一个后页，然后将两个页面都附加到一个更大的文档中，从而创建一个报告。

除非他们输入汉字，否则一切都很好，那么我得到的只是像这样的垃圾字符 - (è´¨é‡•ä¿•è¯•æμ•ç¨‹)。即使在与更大的文档合并之前，文档仍然看起来像这样。

我已经尝试了所有可能的场景（似乎），从使用 Unicode 字体，到使用我自己创建的字体，并逐个尝试 TCPDF 文件夹中的每种字体。我完全不知所措，而且已经有一段时间了。我觉得我几乎去过所有提到 TCPDF 的网站。

这是创建后页的代码，回到我开始使用的基本命令。我希望这是一个我缺少的简单命令：

```
require_once(dirname(__FILE__).'/html2pdf.class.php');
try
{
    $html2pdf = new HTML2PDF('L','LETTER','en', false, 'ISO-8859-15', array(mL, mT, mR, mB)); 
    $html2pdf->setDefaultFont('Arial');
    $html2pdf->writeHTML($html, isset($_GET['vuehtml']));

//Line below saves PDF to file
    $html2pdf->Output('created/'.$lastname[1].'_html2pdf.pdf', 'F');

}

catch(HTML2PDF_exception $e) {
    echo $e;

} 
```

值得一提的是，运行 Centos 5.5 服务器来创建文档。先感谢您。

* * *

在用 HTML2PDF 对这个问题进行了一些调查后，我被告知字体 arialuni.ttf 应该支持我需要的所有字符。话虽如此，当我在下面看到的脚本中使用它时，HTML2PDF 将不会加载此字体。

```
require_once(dirname(__FILE__).'/html2pdf.class.php');
try
{

    $html2pdf = new HTML2PDF('L','LETTER','en', false, '', array(mL, mT, mR, mB));      
    $html2pdf->pdf->AddTTFFont('ARIALUNI.TTF');
    $html2pdf->pdf->setFont('arialuni');
    $html2pdf->writeHTML($html, isset($_GET['vuehtml']));

    //Line below sends output to the screen only
    //$html2pdf->Output('exemple00.pdf');

    //Line below saves PDF to file
   $html2pdf->Output('created/'.$lastname[1].'_html2pdf.pdf', 'F');

}

catch(HTML2PDF_exception $e) {
    echo $e;

} 
```

*我能想到的只是语法不是 100% 正确的。我已经运行了 tt2fm 和 makefont 来获取文件，但不觉得这些例程是 100% 成功的。

请帮忙 - 我已经断断续续地研究这件事几个月了。我几乎准备把它报废然后敲门。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:34:43.513

您可以使用以下方法在 PDF 文档中呈现中文字符

**TCPDF 中的cid0jp**字体。

**供你参考 ：-**

PHP 代码：-

[http://www.tcpdf.org/examples/example_038.phps](http://www.tcpdf.org/examples/example_038.phps)

生成的PDF：-

[http://www.tcpdf.org/examples/example_038.pdf](http://www.tcpdf.org/examples/example_038.pdf)

请确保文件**cid0jp.php**应该在字体目录中。

```
tcpdf/fonts/cid0jp.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-29T08:36:25.657

根据您的代码：

```
require_once(dirname(__FILE__).'/html2pdf.class.php');
try
{
    $html2pdf = new HTML2PDF('L','LETTER','en', false, 'ISO-8859-15', array(mL, mT, mR, mB));
    //$html2pdf->setDefaultFont('Arial');  //Please remove this
    $html2pdf->setDefaultFont('stsongstdlight'); //And change with this, it works 101% for me
    $html2pdf->writeHTML($html, isset($_GET['vuehtml']));

//Line below saves PDF to file
    $html2pdf->Output('created/'.$lastname[1].'_html2pdf.pdf', 'F');

}

catch(HTML2PDF_exception $e) {
    echo $e;

} 
```

...这是我 101% 的工作代码，在 pdf 输出中包含中文字符：

```
<?php
require_once ROOT_DIRECTORY.'/{it's your own location where you put the class at}/html2pdf-4.4.0/html2pdf.class.php'; //ROOT DIRECTORY is my own "defined" so do not use this line.
/* or use this:
* require_once(dirname(__FILE__).'/html2pdf.class.php');
* it depends on what you need
*/ 
try
{
    $html2pdf = new HTML2PDF('L', 'A6', 'en', true, 'UTF-8', 0); //I'm using UTF-8 //Also I'm working on A6 page in my project here, so if you need to have A4 size change A6 back to A4 or change to the size you need
    $html2pdf->pdf->SetDisplayMode('fullpage');
    $html2pdf->setDefaultFont('stsongstdlight'); //this is all you need to have the CHINESE character.
    $content = ob_get_clean();
    $html2pdf->writeHTML($content);

    $html2pdf->Output('Sticker-'.$this->invNumber.'-'.$this->custCode.'.pdf');
    exit;
}
catch(HTML2PDF_exception $e) {
    echo $e;
    exit;
} 
```

希望它在您的代码中也能正常工作！

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T07:31:36.130

```
$html2pdf = new HTML2PDF('L','LETTER','en', true, 'UTF-8', array(mL, mT, mR, mB)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-07T18:19:32.113

所以`html2pdf`是基于 的`tcpdf`，但它们有点不同： [html2pdf](https://github.com/spipu/html2pdf)不支持中文。

但是，您可以`javiergb.php`从包含目录中获取`/tcpdf/fonts/`。然后将此文件复制到`html2pdf/_tcpdf5.xxxx/fonts/`目录中。

之后，您只需将该行添加`$html2pdf->setDefaultFont('javiergb');`到您的 html2pdf 设置中，如下所示：

```
$html2pdf = new HTML2PDF('P', 'A4', 'en');
$html2pdf->setDefaultFont('javiergb');
$html2pdf->writeHTML($html);
$html2pdf->Output('example_zh_cn.pdf'); 
```

你可以看看我的叉子：[https ://github.com/cychai/html2pdf](https://github.com/cychai/html2pdf)

# python - 从 CamelCase 生成详细名称

> ID：14382869
> 
> 赞同：1
> 
> 时间：2013-01-17T15:51:26.553
> 
> 标签：python, string, camelcasing

我正在尝试从 Python 中的 CamelCase 字符串中获取详细名称，但不知道如何解决该问题。

这是用例：

```
class MyClass(object):
    def verbose_name(self, camelcase):
        return "my class"
        # ^-- here I need a way to calculate the
        #     value using the camelcase argument

    def __str__(self):
        return self.verbose_name(self.__class__.__name__) 
```

我试图实现一个解决方案，其中生成块`my`并`class`检测从小写字母到大写字母的转换，但它非常程序化，不起作用，而且对于这样一个简单的任务来说变得太复杂了。

对解决问题的简单实施有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:56:14.140

如果我正确理解您的要求，您想在 Case 边界上拆分骆驼大小写字符串。正则表达式在这里可以很方便

尝试以下实现

```
>>> ' '.join(re.findall("([A-Z][^A-Z]*)","MyClass")).strip()
'My Class' 
```

如果名称不符合 CamelCase，则上述实现将失败。在这种情况下，使`caps`可选

```
>>> test_case = ["MyClass","My","myclass","my_class","My_Class","myClass"]
>>> [' '.join(re.findall("([A-Z]?[^A-Z]*)",e)) for e in test_case]
['My Class ', 'My ', 'myclass ', 'my_class ', 'My_ Class ', 'my Class '] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:58:21.187

基于 Abhijit 的回答

```
def verbose_name(self, camelcase):
    return '_'.join(re.findall("([A-Z][^A-Z]*)", camelcase)).lower() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:57:57.057

这个怎么样：

```
def verbose_name(self, camelcase)
    return re.sub(r'([a-z])([A-Z])',r'\1 \2', camelcase).lower() 
```

# android - Android：通过代码更改线性 GradientDrawable 的中心

> ID：14382872
> 
> 赞同：3
> 
> 时间：2013-01-17T15:51:32.683
> 
> 标签：android, android-layout, android-drawable

**编辑：看看上面的解决方案**

我吓坏了。我只想做的就是设置一个线性 GradientDrawable，它会改变渐变的垂直中心......绘制渐变效果很好，但我怎样才能改变它的中心？！？

```
RelativeLayout bgScreen = (RelativeLayout) findViewById(R.id.player_screen);

GradientDrawable gd = new GradientDrawable(
     GradientDrawable.Orientation.TOP_BOTTOM,
     new int[] {startColor,endColor});

gd.setCornerRadius(0f);
gd.setAlpha(200);
bgScreen.setBackground(gd); 

public void redrawOrChangeBackgroundGradient(){
    //??? either change center of existing
    gd.setGradientCenter(float x, float y) //ONLY works in RADIAL_GRADIENT or SWEEP_GRADIENT.

    //??? or complete redraw Gradient with different center

} 
```

这是我想如何通过代码更改渐变的图片示例

![在此处输入图像描述](../Images/7a4853c6249952b1bf5f31705461ee6a.png)

不可能那么难，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:47:31.997

缺乏以编程方式为线性`GradientDrawable`s 设置中心的能力已经是一个[已注册的问题](http://code.google.com/p/android/issues/detail?id=28482)。

但是这里[描述了](https://stackoverflow.com/a/2762454/1140682)一种解决方法。基本上，您应该`PaintDrawable`从 a创建一个[`LinearGradient`](http://developer.android.com/reference/android/graphics/LinearGradient.html)并将其设置为视图的背景可绘制对象。按照此解决方案，您可以`LinearGradient`通过将颜色映射到`positions`数组来在构造函数中设置中心：

> ***浮动 [] 位置***
> 
> 可能为空。颜色数组中每个对应颜色的相对位置 [0..1]。如果为空，则颜色沿渐变线均匀分布。

*（未经测试，但它应该为您解决问题）*

# c# - 文本块数据触发器未触发

> ID：14382873
> 
> 赞同：2
> 
> 时间：2013-01-17T15:51:37.660
> 
> 标签：c#, wpf, xaml, datacontext, textblock

我正在尝试将一些数据绑定到 TextBlock。TextBlock 是显示一个滑块值，当滑块值发生变化时，我希望 TextBlock 文本将颜色更改为红色。

我的 XAML 是这样的：

```
<Grid Height="227">
    <TextBlock Margin="114,60,112,150" Name="textBlock1" Text="{Binding Path=DispVal}" Width="42" Grid.Column="1" HorizontalAlignment="Center" TextAlignment="Center" FontWeight="Bold">
        <TextBlock.Style>
            <Style TargetType="{x:Type TextBlock}"> 
                <Setter Property="Foreground" Value="Black"/>

                <Style.Triggers> 
                    <DataTrigger Binding="{Binding Path=IsChanged}" Value="true"> 
                        <Setter Property="TextBlock.Foreground" Value="Red" /> 
                    </DataTrigger> 
                    <DataTrigger Binding="{Binding Path=IsChanged}" Value="false"> 
                        <Setter Property="TextBlock.Foreground" Value="Black" /> 
                    </DataTrigger> 
                </Style.Triggers> 
            </Style> 
        </TextBlock.Style>            
    </TextBlock> 
</Grid> 
```

我已经使用 DataContext 绑定了 TextBlock：

```
texBlock1.DataContext = m_slider; 
```

当我的滑块更新处理程序触发时，我更新 m_slider 对象。

但是，我没有得到任何文本或颜色更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:24:43.963

您可以用文本框替换文本块，并通过应用以下属性使其外观和感觉相似

```
<Setter Property="IsReadOnly" Value="True"/>
<Setter Property="Background" Value="Transparent"/>
<Setter Property="BorderThickness" Value="0"/> 
```

然后，您可以使用 TextChanged 事件，以便在您的绑定更改文本时更新其样式

# android - 将参数传递给广播接收器

> ID：14382877
> 
> 赞同：7
> 
> 时间：2013-01-17T15:51:55.917
> 
> 标签：android, variables, broadcastreceiver

我正在尝试将一个 int 值从我的 Service 传递给 CallReceiver 类，不幸的是 CallReceiver.value 始终等于 0，即使在设置了另一个值之后也是如此。当我试图将它作为参数传递给构造函数时，情况完全相同，因此使用从服务调用的 setter 方法。真的没有办法传递任何数据吗？

服务：

```
SharedPreferences settings = getSharedPreferences("SETTINGS", 0);
    int value = settings.getInt("value1", 0); // here the correct value is present, not 0.
    CallReceiver mCallReceiver = new CallReceiver();
    CallReceiver.value = value; 
```

接收者：

```
public class CallReceiver extends BroadcastReceiver  {

public int value;

public CallReceiver(int value)  {
    this.value = value;
}

public CallReceiver()   {

}

@Override
public void onReceive(Context context, Intent intent) {

            Log.v("value", String.valueOf(value)); // here "value" = 0.

        }

     } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T15:58:32.800

您的`CallReceiver mCallReceiver=new CallReceiver();`实例不用于接收意图。相反，Android 每次都会创建新实例。0 是未初始化整数变量的默认值。

为确保发生这种情况，请为您的`value`字段分配一些默认值：

```
public class RReceiver extends BroadcastReceiver {
    public int value=5;
    //...
} 
```

并且您的值将始终等于 5。

至于将数据传递给`BroadcastReceiver`，请将其作为额外内容添加到`Intent`您正在广播的内容中：

```
//in your service
Intent broadcastedIntent=new Intent(this, CallReceiver.class);
broadcastedIntent.putExtra("VALUE", 100500);
sendBroadcast(broadcastedIntent); 
```

然后，在你的`CallReceiver`：

```
@Override
public void onReceive(Context context, Intent intent) {
    int value=intent.getIntExtra("VALUE", 0);
} 
```

# sql - 当另一列中的值发生变化时，如何增加计数器？

> ID：14382878
> 
> 赞同：-2
> 
> 时间：2013-01-17T15:51:59.703
> 
> 标签：sql, sql-server, tsql, row-number

我有下表

```
ID      
12     
12    
25    
25    
78    
78    
78 
```

而且我需要能够在`ID`更改时增加计数器值。

```
ID    **COUNTER**  
12     1
12     1
25     2
25     2
78     3
78     3
78     3 
```

如何才能做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T15:54:17.310

您可以使用[`dense_rank()`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)：

```
select id,
  dense_rank() over(order by id)  Counter
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/02442/2)

结果：

```
| ID | COUNTER |
----------------
| 12 |       1 |
| 12 |       1 |
| 25 |       2 |
| 25 |       2 |
| 78 |       3 |
| 78 |       3 |
| 78 |       3 | 
```

# javascript - 带有 Pkcs5 填充的 ECB 模式中的 Javascript AES

> ID：14382883
> 
> 赞同：2
> 
> 时间：2013-01-17T15:52:07.757
> 
> 标签：javascript, aes, ecb, pkcs#5

是否可以在 javascript 中使用带有 Pkcs5 填充方案的 ECB 模式中的 AES？

我想使用 ECB 模式的原因是因为它是客户想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:20:11.403

[http://code.google.com/p/crypto-js](http://code.google.com/p/crypto-js)看起来有 AES、ECB 模式和 PKCS5 填充。

请参阅[http://code.google.com/p/crypto-js/source/browse/branches/3.x/src/cipher-core.js](http://code.google.com/p/crypto-js/source/browse/branches/3.x/src/cipher-core.js)第 369 行和[http://code.google.com/p/ crypto-js/source/browse/branches/3.x/src/mode-ecb.js](http://code.google.com/p/crypto-js/source/browse/branches/3.x/src/mode-ecb.js)。

免责声明：我对这个库的测试、审计或维护的好坏一无所知，所以在将它用于任何重要的事情之前，你应该对它进行自己的研究。

# jquery - KendoUI 和 jQuery 1.9.0 的问题

> ID：14382884
> 
> 赞同：0
> 
> 时间：2013-01-17T15:52:08.533
> 
> 标签：jquery, kendo-ui

遇到 KendoUi 和最新版本的 jQuery 的问题......我有一个简单的 ASP.NET MVC 项目，它有一个呈现如下的视图：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="/Content/site.css" rel="stylesheet"/>
    <script src="/Scripts/modernizr-2.5.3.js"></script>
</head>
<body>   
<h2>Index</h2>
    <script src="/Scripts/jquery-1.9.0.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js" type="text/javascript"></script> 
</body>
</html> 
```

当我查看该页面时，我在我的 javascript 控制台中收到以下错误：

```
Uncaught TypeError: Object function ( selector, context ) {
        // The jQuery object is actually just the init constructor 'enhanced'
        return new jQuery.fn.init( selector, context, rootjQuery );
    } has no method 'sub' 

kendo.all.min.js:10 
```

还有其他人遇到这个问题吗？我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T16:18:56.670

jrummell 所说的——我们还没有正式支持 jQuery 1.9.0，因为它与我们的服务包在同一天发布。jQuery 1.9.0 自 1.8.x 以来有许多重大更改，如果您需要它与 1.8 的 API 兼容，还请包括[jQuery Migrate](https://github.com/jquery/jquery-migrate/)插件。

更新：Kendo UI Q1 2013 支持并附带 jQuery 1.9.1。

# django - 使用 Apache 和 mod_wsgi 在同一台服务器上部署 Django 站点和 PHP 站点

> ID：14382888
> 
> 赞同：1
> 
> 时间：2013-01-17T15:52:20.400
> 
> 标签：django, apache, mod-wsgi

我目前在**cinepass.com.ec**有一个 Django 站点，我想在**mobile.cinepass.com.ec的同一服务器上部署一个额外的 PHP 站点**

我当前的**httpd.conf**（来自[DjangoFoo](http://www.djangofoo.com/17/django-mod_wsgi-deploy-exampl)）：

```
<Directory "/home/ec2-user/cinepass/media">
   Order deny,allow
   Allow from all
</Directory>

<Directory "/home/ec2-user/cinepass/cinepass">
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>

Alias /media/ /home/ec2-user/cinepass/media/
ServerAdmin smansfield@palapa.com.ec
ErrorLog "logs/cinepass.com-error_log"
CustomLog "logs/cinepass.com-access_log" common

# mod_wsgi configuration is here
# we are running as user/group 'deamon', if you don't have those you need to change or create.
WSGIDaemonProcess cinepass python-path=/home/ec2-user/cinepass:/home/ec2-user/cinepass/venv/lib/python2.6/site-packages user=daemon group=daemon processes=2 threads=25
WSGIProcessGroup cinepass
# this is our WSGI file.
WSGIScriptAlias / /home/ec2-user/cinepass/cinepass/wsgi.py 
```

我当前的**wsgi.py**：

```
import os, sys
sys.path.append('/home/')
sys.path.append('/home/ec2-user/cinepass/')

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "cinepass.settings_production.py")
os.environ['PYTHON_EGG_CACHE'] = '/tmp'

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

我将如何编辑我的 Apache 配置，以便我还可以在**mobile.cinepass.com.ec**上运行一个 php 站点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:07:40.890

使用apache 的[virtualhosts](http://httpd.apache.org/docs/2.2/vhosts/)，在这里我在我的服务器中放置了一个类似的示例，其中我在主域中有一个 djangp 应用程序，在子域中有一个 joomla。这两个文件都位于`/etc/apache2/sites-enabled`

Joomla 的 apache 配置文件（命名为 /etc/apache2/sites-enabled/manual.domain.com）：

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin dsanabria@domain.com
    ServerName manual.domain.com

    DocumentRoot "/home/ubuntu/manual/"

    <Directory /home/ubuntu/manual/>
        Order deny,allow
        Allow from all
    </Directory>

    ErrorLog /var/log/apache2/manual.domain-error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel debug

    CustomLog /var/log/apache2/manual.domain-access.log combined

</VirtualHost> 
```

还有 django 应用程序（名为 /etc/apache2/sites-enabled/www.domain.co）：

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerAdmin diego@diegue.us
    ServerName domain.co
    ServerAlias machete.anotherdomain.com
    Alias /admin/media/ /home/ubuntu/webapps/machete/lib/python2.7/site-packages/grappelli/media/
    Alias /media/ /home/ubuntu/webapps/machete/machete/media/
    Alias /static/ /home/ubuntu/webapps/machete/machete/collected/

    <Directory /home/ubuntu/webapps/machete/lib/python2.7/site-packages/grappelli/media/>
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /home/ubuntu/webapps/machete/lib/python2.7/site-packages/django/contrib/admin/media/ >
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /home/ubuntu/webapps/machete/machete/media/>
        Order deny,allow
        Allow from all
    </Directory>

    <Directory /home/ubuntu/webapps/machete/machete/collected/>
        Order deny,allow
        Allow from all
    </Directory>

    WSGIScriptReloading On
    WSGIDaemonProcess machete python-path=/home/ubuntu/webapps/machete/lib/python2.7/site-packages
    WSGIProcessGroup machete
    WSGIApplicationGroup machete
    WSGIPassAuthorization On

    WSGIScriptAlias / /home/ubuntu/webapps/machete/machete/machete/wsgi.py
    ErrorLog /var/log/apache2/machete-error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel debug

    CustomLog /var/log/apache2/machete-access.log combined

</VirtualHost> 
```

首先，告诉 apache，如果用户访问 manual.domain.com，只需使用 php 应用程序 (joomla) 进行响应。第二个文件对 apache 说，如果用户使用 python wsgy (django) 调用带有 www.domain.com 响应的服务器。

这是在 ubuntu 服务器中，redhat/centos/fedora 将文件夹 sites-enabled 定位在另一个我不记得的位置，但无论如何你可以使用虚拟主机。

通常，我避免弄乱 httpd.conf 文件并更喜欢使用虚拟主机。

# excel - Excel 中显示的 OLAP 多维数据集连接

> ID：14382904
> 
> 赞同：1
> 
> 时间：2013-01-17T15:53:04.250
> 
> 标签：excel, vba, ssas, olap

我正在使用与 OLAP 多维数据集的连接在 Excel 2010 中创建数据透视表。

我试图弄清楚如何将多维数据集的路径和文件名以及上次刷新的日期/时间显示并打印到 Excel 表中。

基本上，显示在工作簿连接（在数据选项卡下）中的相同信息将打印在数据透视表所在的工作表中。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:47:00.390

这会将所有连接名称打印到调试窗口。

```
Dim conn As WorkbookConnection
For Each conn In ActiveWorkbook.Connections
   Debug.Print conn.Name
Next conn 
```

同样，您可以在工作表上显示信息。

# android - 安卓日期和时间

> ID：14382919
> 
> 赞同：0
> 
> 时间：2013-01-17T15:53:58.673
> 
> 标签：android, date

我想使用日历显示当前日期和时间。我的代码是

```
 LinearLayout lview=new LinearLayout(this);
    myText=new TextView(this);
    strText=new TextView(this);

    Calendar c=Calendar.getInstance();
    int seconds=c.get(Calendar.SECOND);

    myText.setText("Your current seconds are:");
    strText.setText(seconds);

     lview.addView(strText);
     lview.addView(myText);

    setContentView(lview); 
```

但它显示该应用程序不幸停止工作而不显示日期..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:01:34.053

**为每个视图设置布局参数将解决您的问题**

```
lview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));\\Linear Layout
strText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); \\TextView
myText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));\\TextView 
```

# spring - Spring MVC 中的会话管理

> ID：14382923
> 
> 赞同：0
> 
> 时间：2013-01-17T15:54:02.233
> 
> 标签：spring, model-view-controller, session, rest

我正在尝试做一个与 Spring 服务器通信的简单 android 应用程序。

我想使用 Sessions 来存储每个登录用户的数据。我的 App 与服务器交换 Json 对象，请求映射如下：

```
@Controller
public class LoginController {

@Autowired
private IUserDao userDao;

@RequestMapping( value = "/loginJson",method = RequestMethod.POST)
public @ResponseBody loginResponse login(@RequestBody loginModel login) {
    loginResponse response=userDao.checkCredentials(login.getUsername(),login.getPassword());
    System.out.println("Result="+response.isSuccess());
    System.out.println("Received:"+login.getUsername()+" "+login.getPassword());

    return response;

}
} 
```

控制器工作正常，但我不知道如何存储会话变量。我发现了许多解释 Spring Sessions 的文档，但每个文档都各不相同。

有人可以建议我一些简单的方法来做到这一点或某种好的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:08:53.960

不确定你所说的 Spring session 是什么意思，但你可以在你的方法中声明额外的 HttpSession 参数，然后在方法中做任何你喜欢的事情。这是你想知道的吗？

# eclipse - 增加 Eclipse 的 JVM 最大堆大小

> ID：14382932
> 
> 赞同：17
> 
> 时间：2013-01-17T15:54:25.057
> 
> 标签：eclipse, jvm, heap-memory

我正在尝试增加我的 Eclipse 的最大堆大小。我尝试在命令行中`eclipse.ini`或通过命令行指定，但没有工作。

`System.out.println(java.lang.Runtime.getRuntime().maxMemory());`我的最大堆大小在启动 Eclipse之前（运行 jconsole）和之后（）具有完全相同的限制。1.8G

1.  有没有办法在启动之前修改 JVM 堆大小（例如配置文件？）
2.  为 Eclipse 指定堆大小时我会做错什么？

这是命令：

```
./eclipse/eclipse -debug -consoleLog -vmargs -Xms1000m -Xmx6000m -XX:-UseGCOverheadLimitcl 
```

这是我的`eclipse.ini`（哪些值被指定的 eclipse 启动参数覆盖）：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=6000m
-Xms1000m
-Xmx6000m 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T16:54:58.170

可以使用命令行选项增加 Java 虚拟机 (JVM) 分配的堆大小。

```
-Xms<size>        set initial Java heap size
-Xmx<size>        set maximum Java heap size
-Xss<size>        set java thread stack size 
```

如果您使用的是 tomcat 服务器，则可以通过转到 Eclipse/Run/Run Configuration 并选择 Apache Tomcat/your_server_name/Arguments 并在 VM arguments 部分下使用以下内容来更改堆大小：

```
-XX:MaxPermSize=256m
-Xms256m -Xmx512M 
```

如果您不使用任何服务器，则可以在运行代码之前在命令行中键入以下内容：

```
java -Xms64m -Xmx256m HelloWorld 
```

有关增加堆大小的更多信息，请参见[此处](https://stackoverflow.com/questions/6452765/how-to-increase-heap-size-of-jvm)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-05T12:02:11.093

您可以使用此配置：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120913-144807
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms512m
-Xmx1024m
-XX:+UseParallelGC
-XX:PermSize=256M
-XX:MaxPermSize=512M 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T23:33:48.523

尝试修改 ，`eclipse.ini`使两者`Xms`和`Xmx`具有相同的值：

```
-Xms6000m
-Xmx6000m 
```

这应该强制 Eclipse 的 VM 从一开始就分配`6GB`堆。

但要小心使用`eclipse.ini`或 命令行`./eclipse/eclipse -vmargs ...`。它应该在这两种情况下都有效，但选择一种并尝试坚持下去。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T18:02:24.730

`--launcher.XXMaxPermSize`

`256m`

试着提高这个价值！

# java - 使用推土机映射对象列表

> ID：14382939
> 
> 赞同：13
> 
> 时间：2013-01-17T15:54:51.970
> 
> 标签：java, mapping, dozer

我为 ClassA 到 ClassB 创建了一个推土机映射。

现在我想将 a 映射`List<ClassA>`到 a `List<ClassB>`。

是否有可能只是

```
mapper.map(variableListClassA, variableListClassB) 
```

还是我必须遍历一个循环，例如

```
for (ClassA classA : variableListClassA) {
    variableListClassB.add(mapper.map(classA, ClassB.class))
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T15:59:36.070

您需要使用循环，因为列表的类型在运行时被擦除。

如果两个列表都是类的字段，则可以映射拥有的类。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T17:40:26.863

您也可以使用 A helper 类一步完成

```
public class DozerHelper {

    public static <T, U> ArrayList<U> map(final Mapper mapper, final List<T> source, final Class<U> destType) {

        final ArrayList<U> dest = new ArrayList<U>();

        for (T element : source) {
        if (element == null) {
            continue;
        }
        dest.add(mapper.map(element, destType));
    }

    // finally remove all null values if any
    List s1 = new ArrayList();
    s1.add(null);
    dest.removeAll(s1);

    return dest;
}
} 
```

你上面的电话就像

```
List<ClassB> listB = DozerHelper.map(mapper, variableListClassA, ClassB.class); 
```

# java - Java Servlet 向浏览器传输数据

> ID：14382942
> 
> 赞同：0
> 
> 时间：2013-01-17T15:54:55.710
> 
> 标签：java, http, jsp, http-headers, servlet-3.0

关于 Java Servlet 有几个问题：

> 1) 当浏览器第一次请求 servlet 时会发生什么？
> 
> 2) response.setContentType(text,html) 是发送给浏览器的第一条指令吗？

一直在网上搜索答案，但不太确定。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:03:40.263

不，首先要发送的是 HTTP 版本 :)

```
 HTTP/1.1 200 OK
   Date: Thu, 17 Jan 2013 21:31:11 GMT
   Server: Apache/1.3.3.7 (Unix) (Red-Hat/Linux)
   Last-Modified: Wed, 01 Jan 2013 21:11:25 GMT
   Content-Type: text/html; charset=UTF-8   

   <HTML>website contents
   here</HTML> 
```

内容之前的最后一行是您正在谈论的内容类型。这些标题可能以不同的顺序出现，并且通常有更多。他们的顺序没有严格定义，可能内容类型会在日期之前出现。然而，HTTP 版本号和响应代码（在我的示例中为 200 - OK）始终排在第一位。[在此处](http://www.w3.org/Protocols/rfc2616/rfc2616.html)阅读有关 HTTP 字段的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:42:19.280

关于你的问题2）：

Servlet 并不真正向浏览器发送“指令”，它们以某种方式构建响应。他们可能（但可能不会）立即发送标头，或者在您第一次尝试写入响应正文时发送标头，当您填充一些内部缓冲区时，或者他们可能会缓冲整个响应直到你完成。已发送标头的术语是响应已“提交”，虽然您可以确定给定响应是否已发生这种情况，但您无法真正从 API 中阻止它发生。（我尝试查看 Jetty 6 的实现以了解会发生什么，但代码一点也不简单，这似乎意味着容器实现在这里有一些余地。）

Also, when a servlet is requested for the first time, the servlet is probably instantiated by the container. (Unless it was instantiated before because you set `<load-on-startup>1</load-on-startup>` in `web.xml`, or maybe because the container chose to do so - I'm not sure if implementations are allowed to do that.)

# meteor - Win7新建项目无反应

> ID：14382948
> 
> 赞同：2
> 
> 时间：2013-01-17T15:55:09.563
> 
> 标签：meteor

我刚刚通过 0.5.4.msi 在我的 Win7 上安装了 Meteor 并重新启动它。我可以在环境路径中找到 Meteor 文件夹。但是当我尝试在 cmd 中创建我的第一个应用程序时，什么也没发生，没有成功或失败信息。![在此处输入图像描述](../Images/6ac38781f44c23e02b34a163e9267fd8.png)有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:28:52.330

尝试在 D:\ .. 上运行命令。有时用户无权在根驱动器中创建文件夹。

# ios - iOS 6 中的 UIImagePickerController 无法正常工作

> ID：14382954
> 
> 赞同：1
> 
> 时间：2013-01-17T15:55:21.590
> 
> 标签：ios, ipad, ios6, uiimagepickercontroller

我有一个非常奇怪的行为：

1.  在 iOS 5 中，我`UIImagePickerController`以这种方式呈现：

`imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;` `imagePicker.modalPresentationStyle = UIModalPresentationFullScreen;` `imagePicker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;`

`[self presentModalViewController:imagePicker animated:YES];`

现在在 iOS 6 中，这会导致崩溃。我通过在以下位置编写类别解决了崩溃`UIImagePickerController`：

```
@implementation UIImagePickerController (NonRotating)

- (BOOL)shouldAutorotate
{
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

@end 
```

问题是现在`UIImagePickerController`不旋转并且它显示在上方。此外，当我按下“取消”按钮并且选择器被关闭时，应用程序再次崩溃。

1.  如果我使用`UIImagePickerController`内部 a `UIPopoverController`，一切正常（属于弹出框不旋转的事实）但是当我关闭弹出框时**，我的应用程序中的所有视图控制器停止响应旋转事件**，这导致所有应用程序都被阻止在此方向。要恢复正确的行为，我需要从后台退出应用程序并再次打开。

这是我用来显示弹出框的代码

```
_cameraPopoverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
[_cameraPopoverController presentPopoverFromRect:_takeFromCamera.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

这个问题把我逼疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:26:35.457

虽然我不建议使用类别来覆盖图像选择器的默认行为，但在实现中存在一个导致上述崩溃的错误：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
                                 ~~~~
} 
```

返回值不应该是一个方向掩码，它应该是一个方向，例如 UIInterfaceOrientationPortrait。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:39:55.790

你的选择器源类型是什么？照片库/相册或相机胶卷？

假设您使用的是照片库/相册源，在 iPad 上，您必须使用弹出框：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)（查看概述，第 4 点）

不支持全屏显示。

关于另一个问题（关闭 popOver 后，其他 VC 停止旋转）检查您是否有对您的 popover 的 STRONG 引用（强属性）。粘贴您用于呈现弹出框的代码。

# c# - 不使用“空格”添加记录

> ID：14382959
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:55:33.153
> 
> 标签：c#, asp.net

我正在使用直接 url 指向我的数据库中的记录，但我的问题是，当记录包含“”或“空格”时，它没有保存。例如：

> name = "Lebron" 这是有效的。
> 
> 名称=“勒布朗詹姆斯”

由于名字和姓氏之间有空格，这将不起作用。有没有人遇到过这种类型的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:57:54.883

您将需要对您的 URL进行[UrlEncode 。](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

例如

```
string url = "http://myserver/mypage/?name=Lebron James";
url = HttpServerUtility.UrlEncode(url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:56:42.217

您可能需要对 URL 进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:59:04.893

该空间需要变成 %20

# php - 无法使用 PHP FTP 下载某些文件

> ID：14382960
> 
> 赞同：0
> 
> 时间：2013-01-17T15:55:33.527
> 
> 标签：php, windows, apache, ftp

我编写了一个 php 脚本来通过 FTP 下载文件和文件夹，这样我就可以在某些条件下进行备份。但是，它不是下载所有文件。它正在从我们的服务器下载一些图像。我无法理解其他图像有什么问题。它们都是各国国旗的小图像。它们大小相同。如果我从更多根级别下载，它会下载其他文件。但是，它恰好从 co.png 文件停止。

这是下载我尝试使用 PHP FTP 下载的图像文件的[链接](http://robi123.com/flags.zip)( [http://robi123.com/flags.zip )。](http://robi123.com/flags.zip)

我知道这个脚本在下载其他大文件时可能需要其他改进或陷入其他步骤。我现在需要帮助来解决这个问题。我的脚本没有下载其他图像是什么？这个问题附有php的警告。我还有一个想法可以尝试执行 RAW FTP 命令。忽略 RAW FTP 命令的代码。但是 ftp 下载的所有其他方法（ftp_get、ftp_nb_get 和）都卡在同样的事情和同样的警告中。但是您可以提供任何建议。

这是我的代码：

```
<?php
set_time_limit(0);
ini_set('xdebug.max_nesting_level', "100000000000000000000000");

$ftp_server = "";
$ftp_user    = "";
$ftp_pass = "";

$ftp_conn   = ftp_connect($ftp_server);
$ftp_login   = ftp_login($ftp_conn, $ftp_user, $ftp_pass);

ftp_set_option($ftp_conn, FTP_TIMEOUT_SEC, 10000000);

ftp_set_option($ftp_conn, FTP_AUTOSEEK, true);

ftp_pasv($ftp_conn, true);

if ((!$ftp_conn) || (!$ftp_login)) {
    echo "FTP connection has failed!";
    echo "Attempted to connect to $ftp_server for user $ftp_user<br />";
} else {
    echo "Connected to $ftp_server, for user $ftp_user<br />";
}

echo getcwd()."<br />" ;

function download($ftp_conn,$local_folder,$remote_folder){

     if($local_folder !=""){
     chdir($local_folder);
     }
     echo getcwd()."<br />" ;

     ftp_chdir($ftp_conn,$remote_folder);

     $files_folders = ftp_nlist($ftp_conn, ".");

     foreach($files_folders as $temp){

      if ($temp == '.' OR $temp == '..'){ 
      continue;
      }
      if(ftp_is_dir($ftp_conn,$temp)){
      //echo "$temp<br>";

      @mkdir($temp);

      echo "Folder: ".$remote_folder."/".$temp."<br />";

      download($ftp_conn,$temp,$remote_folder."/".$temp);

      }else{
      ftp_get($ftp_conn, $temp, $temp, FTP_BINARY);
      //ftp_nb_get($ftp_conn, $temp, $temp, FTP_BINARY); 

      /*

        $ret = ftp_nb_get($ftp_conn, $temp, $temp, FTP_BINARY);
        while ($ret == FTP_MOREDATA) {

        $ret = ftp_nb_continue($ftp_conn);
        }
        if ($ret != FTP_FINISHED) {
        echo "There was an error downloading the file";
        exit(1);
        }

      $command = "RETR $remote_folder/$temp";
      $result = ftp_raw($ftp_conn, trim($command));  
      print_r($result);
       */
      echo "File: $temp<br />";

      }

     }

     chdir("..");
     ftp_chdir($ftp_conn, "..");

     return;

}

function ftp_is_dir($ftp_conn,$dir) {
  if (@ftp_chdir($ftp_conn, $dir)) {
    ftp_chdir($ftp_conn, '..');
    return true;
  } else {
    return false;
  }
}

download($ftp_conn,"data","/public_html/c4smod/traffic/Img/Flags/");

?> 
```

![错误截图](../Images/edededdc7da5e8a5636f7214916689ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:30:46.277

我发现了问题。在我下载了几张图片后，我的脚本只需要重新连接到服务器并下载其余的图片。所以，我只是添加了额外的条件来检查 ftp 功能是否失败并且它们被重新连接并重试以继续下载文件和图像。我没有试图进一步寻找并知道 ftp 会话或超时存在多长时间，或者这些问题是否与我的脚本有关。

# javascript - 添加/删除与编辑 DOM 的 Javascript 基准？

> ID：14382961
> 
> 赞同：1
> 
> 时间：2013-01-17T15:55:35.463
> 
> 标签：javascript, dom, benchmarking

> **可能的重复：**
> [通过 DOM 函数附加新元素或附加带有 HTML 标记的字符串，哪个更好？](https://stackoverflow.com/questions/8461851/what-is-better-appending-new-elements-via-dom-functions-or-appending-strings-w)

我需要改变一千个`<div>`——只有两个属性。删除/添加整体会“*便宜*`<div>`” ，还是只更改属性？以及使用 Javascript 执行此操作的最便宜的方法是什么（没有泄漏，并且使用尽可能少的 GC）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:59:16.340

[在您的目标浏览器中测试它](http://jsperf.com/)，但考虑到更改属性通常不需要重排（显然取决于属性是什么，它们如何影响样式的应用方式等）并且不需要更改之间的链接DOM 节点，我倾向于期望更改属性更快。*替换*内容需要拆除旧的 DOM 节点，创建新节点，将它们挂接到 DOM 中……

至于如何做，这取决于您如何识别 div，但无论如何这将是一个简单的循环。例如，在任何现代浏览器上：

```
var divs = document.querySelectorAll("selector for the divs");
var index;
var div;
for (index = 0; index < divs.length; ++index) {
    div = divs[index];
    div.setAttribute(/*...*/);
    div.setAttribute(/*...*/);
} 
```

如果属性被反射为属性，您可能希望使用反射属性来避免`setAttribute`函数调用。例如，`div.id = "value";`而不是`div.setAttribute("id", "value");`. 但我敢打赌，这是过早的优化。

# jqplot - jqplot水平堆积条形图，条形从右到左

> ID：14382964
> 
> 赞同：1
> 
> 时间：2013-01-17T15:55:50.190
> 
> 标签：jqplot

我的**水平堆积条形图**效果很好，但我希望水平条的**DIRECTION来自****RIGHT-TO-LEFT**，而**不是**来自**LEFT-TO-RIGHT**。这包括希望线标签在右边，而不是在左边。

有什么想法吗？

是）我有的： ![0在左边，18在右边......](../Images/60b423717cc29ad765be80e9149b77ae.png)

我想要的是： ![右边是 0，左边是 18（对不起，它颠倒了，把这张图片拼凑在一起......）....](../Images/b6eb09f5cf11375fe3c4f256c7f33322.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:12:34.243

只是一个快速的答案（我没有测试过）：

为了在左边有 18 和在右边有 0，您可以指定 xaxis 的最小值和最大值。

如果您希望线标签位于右侧，请尝试通过指定 seriesDefaults 将您的系列放在 y2axis 上：{yaxis: 'y2axis'}

请让我知道它是否有效。

# ios - 在 iOS 上使用 RNCryptor 异步解密大文件

> ID：14382969
> 
> 赞同：2
> 
> 时间：2013-01-17T15:56:12.707
> 
> 标签：ios, encryption, rncryptor

我需要在 iOS 上使用 RNCryptor 异步解密一个大文件（以便显示进度条）。我在任何地方都找不到示例，因此尝试了我猜对的方法，但是...我想出的方法不起作用：从未调用解密器的处理程序，并且线程在发送所有数据后因 EXC_BAD_ADDRESS 而崩溃在函数的最后。

```
NSOutputStream *decryptedStream = [NSOutputStream outputStreamToFileAtPath:decryptedPath append:NO];
[decryptedStream open];

NSUInteger totalBytesToRead = [[[NSFileManager defaultManager] attributesOfItemAtPath:tempPath error:nil] fileSize];
__block NSUInteger totalBytesRead = 0;

LOG("I've got %d bytes to decrypt.", totalBytesToRead);

RNDecryptor *decryptor = [[RNDecryptor alloc] initWithPassword:SNCatalogPassword handler:^(RNCryptor *cryptor, NSData *data) {
    totalBytesRead += data.length;
    [decryptedStream write:data.bytes maxLength:data.length];

    LOG("Decrypted %d bytes : %d / %d bytes treated", data.length, totalBytesRead, totalBytesToRead);

    if (cryptor.isFinished)
    {
        //proceed
        LOG("Done with decrypting.");

        [decryptedStream close];

    }
}];

// Feed data to the decryptor
NSInputStream *cryptedStream = [NSInputStream inputStreamWithFileAtPath:tempPath];
[cryptedStream open];
while (cryptedStream.hasBytesAvailable)
{
    uint8_t buf[4096];
    NSUInteger bytesRead = [cryptedStream read:buf maxLength:4096];
    NSData *data = [NSData dataWithBytes:buf length:bytesRead];
    LOG("Sending %d bytes to decryptor...", bytesRead);

    dispatch_async(dispatch_get_main_queue(), ^{
        [decryptor addData:data];
    });
}

LOG("Sent everything.");
[decryptor finish];
[cryptedStream close]; 
```

（显然，`tempPath`是加密文件`decryptedPath`的路径；是应该写入解密数据的路径）。

我也是 ARC 的新手，所以这可能是与内存或调度相关的问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:13:35.550

我今天遇到了同样的问题，这似乎是由于最近在 iOS6 中弃用了 dispatch_get_current_queue() 所致。

通过更改 [RNCryptor initWithHandler:] 来创建一个新队列，解密工作正常。

```
NSString *responseQueueName = [@"net.robnapier.response." stringByAppendingString:NSStringFromClass([self class])];
_responseQueue = dispatch_queue_create([responseQueueName UTF8String], NULL); 
```

您可以在 github 上我的 fork 的 async_decrypt 分支上找到修复程序和相关的单元测试（基于您的代码）。

[提交](https://github.com/csteynberg/RNCryptor/commit/7e012b777b3890cb6a392de576dc96743eb42c1e "犯罪")csteynberg [/RNCryptor](https://github.com/csteynberg/RNCryptor/tree/async_decrypt "csteynberg/RNCryptor")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:00:29.067

您的行为是由于异步执行引起的：您在调用 addData 之前调用**[decryptor finish]** **：** 要解决此问题，您应该替换

```
while (cryptedStream.hasBytesAvailable)
{
  //... 
```

经过

```
while (YES) {
  if (!cryptedStream.hasBytesAvailable) {
    dispatch_async(dispatch_get_main_queue(), ^{
      [decryptor finish];
    });
    break;
  }
  //... 
```

（当然删除对**[decryptor finish]**的现有调用）这种方式总是在发送所有数据**后调用完成。**

问候

# android - 关于为任何安卓设备设置足够大的图像

> ID：14382973
> 
> 赞同：0
> 
> 时间：2013-01-17T15:56:26.797
> 
> 标签：android

据我搜索，一般来说，您提供了几张不同比例的图像，并将每张图像放入 ldpi、mdpi、hdpi 等文件夹中。
问题是如果我提供的图像只有一个足够大的比例尺有什么问题。
使用“dip”它可以将图像的大小调整为更小，以适应多种设备分辨率。

希望我的问题有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:58:38.560

不，只要是矢量图就可以了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:07:42.400

如果您使用位图图像，是的，您应该提供几个具有不同分辨率的图像，但是如果您在被迫拉伸到大分辨率时对质量差的图像没有任何问题，那么您不需要提供它。

为了在设备中显示图像，我更喜欢测量设备尺寸（宽度和高度），然后以编程方式对其进行缩放

我认为这应该足够了，但是如果您对此主题有其他问题，请随时在评论中提问：)

# c# - 如何在没有 Visual Studio 的情况下将新文件添加到 .csproj 文件

> ID：14382974
> 
> 赞同：16
> 
> 时间：2013-01-17T15:56:28.970
> 
> 标签：c#, .net, visual-studio

如何`.csproj`从命令提示符添加新文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:10:09.750

我认为没有任何工具可以响应命令行上的“add-project”命令来执行此操作，但我认为您可以创建一个程序/脚本来直接操作 csproj 文件的 XML 内容。

csproj 文件的结构如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="...">
    <PropertyGroup>
        <!-- Properties which affect the build process -->
    </PropertyGroup>
    <ItemGroup>
        <!-- Groups of items to process -->
    </ItemGroup>
</Project> 
```

要将 C# 代码文件添加到项目中，只需将`Compile`元素添加到`ItemGroup`元素：

```
<Compile Include="{relative path to file}" /> 
```

如果您使用现有的项目文件作为模板，那么使用非常简单的 XSLT 应该可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T20:22:02.790

这是一个使用 Linq2Xml 的简单方法。我已经包含了一个基于列表的方法。哦，就像 Casper 所说的那样：您需要先从 VS 卸载项目，然后您的程序才能对其进行编辑。然后在完成后重新加载它。

```
 private static void AddFilesToUnitTestProject(FileInfo[] files, string measureBaseDirPath, string measureDataDirSuffix)
    {
        var unitTestProjectPath = measureBaseDirPath + _unitTestProjectFile;
        var unitTestProjectFile = XDocument.Load(unitTestProjectPath);
        var itemGroup = unitTestProjectFile.Nodes()
                          .OfType<XElement>()
                          .DescendantNodes()
                          .OfType<XElement>().First(xy => xy.Name.LocalName == "ItemGroup");

        foreach (var fileInfo in files)
        {
            var xelem = AddProjectContent(measureDataDirSuffix + fileInfo.Name, unitTestProjectFile);
            itemGroup.Add(xelem);
        }
        unitTestProjectFile.Save(unitTestProjectPath);
    }

    private static void AddFileToUnitTestProject(string pathToAdd, string measureBaseDirPath, string measureDataDir)
    {
        var unitTestProjectPath = measureBaseDirPath + _unitTestProjectFile;
        var unitTestProjectFile = XDocument.Load(unitTestProjectPath);
        var itemGroup =
        unitTestProjectFile.Nodes()
                           .OfType<XElement>()
                           .DescendantNodes()
                           .OfType<XElement>().First(xy => xy.Name.LocalName == "ItemGroup");
        var xelem = AddProjectContent(pathToAdd, unitTestProjectFile);
        itemGroup.Add(xelem);
        unitTestProjectFile.Save(unitTestProjectPath);
    }

private static XElement AddProjectContent(string pathToAdd, XDocument doc) 
{ 
    XNamespace rootNamespace = doc.Root.Name.NamespaceName; 
    var xelem = new XElement(rootNamespace + "Content"); 
    xelem.Add(new XAttribute("Include", pathToAdd)); 
    xelem.Add(new XElement(rootNamespace + "CopyToOutputDirectory", "Always")); 
    return xelem; 
} 
```

*   使用 AddProjectContent 方法更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:07:39.593

.csproj 文件可用作 MSBuild 命令行工具的输入。

请参阅 MSBuild 参考：

[MS 构建参考](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)

例如，这个问题。

[MSBuild — 使用 .csproj 文件还是自己创建？](https://stackoverflow.com/questions/220075/msbuild-use-the-csproj-file-or-roll-your-own)

您可以简单地使用文本编辑器来编辑它们并执行 MSBuild 允许的任何操作。如果您插入自定义生成操作，Visual Studio 可能会在加载项目时警告开发人员它包含自定义操作，具体取决于您执行的操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-17T16:06:20.343

通过在解决方案资源管理器中右键单击项目来卸载项目。通过右键单击编辑项目。添加 f.ex：

```
<Compile Include="Properties\AssemblyInfo.cs" /> 
```

# android - 将我自己的 Fragment 实现为 DialogFragment

> ID：14382976
> 
> 赞同：0
> 
> 时间：2013-01-17T15:56:31.670
> 
> 标签：android, android-fragments

当我使用警报对话框时，我可以使用以下方法添加一个“取消”按钮：

```
AlertDialog.Builder builder = new Builder(getActivity());
builder.setTitle("Students").setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog,int id) {
    // if this button is clicked, just close
    // the dialog box and do nothing
    dialog.cancel();
  }
});; 
```

现在我正在实现我自己的片段。如何设置相同的取消按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:04:04.520

您可以简单地覆盖`DialogFragment`的`onCreateDialog()`方法：

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new Builder(getActivity());
builder.setTitle("Students").setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog,int id) {
    // if this button is clicked, just close
    // the dialog box and do nothing
    dialog.cancel();
  }
});;
        return builder.create();
    } 
```

希望这可以帮助。

# node.js - 在 ZMQJS 中绑定时检查地址的可用性

> ID：14382983
> 
> 赞同：0
> 
> 时间：2013-01-17T15:56:43.807
> 
> 标签：node.js, zeromq

我正在使用一个用 nodeJS 编写的自动化系统，它通过 nodeJS 的 ZMQ 绑定在云中创建连接它们的动态节点。有时我会收到错误`Error: Address already in use`，这是我的错，因为我在某处有一些错误。我想知道ZMQ的nodeJS绑定是否可以在绑定之前检查地址的可用性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:52:36.427

这并不是我真正要寻找的，但最后我决定采用“简单”解决方案并使用`try-catch`块来检查绑定到`host:port`. 在实践中，这就是我所做的：

```
try {
    receiver.bindSync("tcp://"+host+":" + port);
}
catch (e) {
    console.log(e);
} 
```

这是愚蠢而直接的。我正在寻找一种更准确的方法来执行此操作（例如，如问题中所述，一个检查地址可用性的功能，而不是捕获错误）。

# javascript - 如何在 Meteor 应用程序中获取上传文件的内容？

> ID：14382984
> 
> 赞同：3
> 
> 时间：2013-01-17T15:56:44.267
> 
> 标签：javascript, ajax, meteor

我不想存储二进制文件，我只需要将其 Base-64 值加载到页面上。

使用 PHP，我可以让服务器脚本回显已发布文件的 Base-64 值。但是 Meteor 中的工作流程真的让我难以理解。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:21:46.140

抱歉回复晚了。我刚刚使用了 filepicker.io

FileReader API 实际上在浏览器兼容性方面非常有限。( [http://caniuse.com/filereader](http://caniuse.com/filereader) )

filepicker.io 的免费计划目前允许每月上传 5000 个文件，这对我来说很好。

# tfs - 我们可以从 VS 2012 的项目和源代码控制中排除 Web 应用程序的 PublishProfies 文件夹吗？

> ID：14382986
> 
> 赞同：3
> 
> 时间：2013-01-17T15:56:50.660
> 
> 标签：tfs, visual-studio-2012, web-application-project

在新的 Visual Studio 2012 中，有一个所谓的目录“PublishProfies”，它位于“Properties”文件夹下。

每次我们为 Web 应用程序创建发布配置文件时，它都会存储到该目录中，然后自动添加到项目和源代码管理中（我们使用的是 TFS 2012）。对于我们的开发环境，这不是一个期望的行为。我们希望每个开发人员的机器都能够拥有自己的发布配置文件。

是否可以以某种方式告诉 Visual Studio 将这些配置文件存储在其他地方，或者至少不要将它们添加到项目结构和源代码控制中？

# jquery - 在网格中放置搜索下拉菜单

> ID：14382988
> 
> 赞同：0
> 
> 时间：2013-01-17T15:56:57.613 元素？
> 
> 标签：jquery, jqgrid

我有一个带有用于搜索的文本框的网格。对于客户，我想添加一个下拉而不是文本框。有什么建议么？谢谢

```
 <table id="customer_list" class="scroll jqTable" cellpadding="0" cellspacing="0"></table>
        <!-- pager will hold our paginator -->
        <div id="customer_list_pager" class="scroll" style="text-align:center;"></div>
<script type="text/javascript">
        /* when the page has finished loading.. execute the follow */
        $(document).ready(function () {
            jQuery("#customer_list").jqGrid({
              url:'jq_customer_list',
              datatype: "json",
              colNames:['Customer','Application','Location','Product','id'],
              colModel:[
                {name:'Customer'},
                {name:'Application'},
                {name:'Location'},
                {name:'Product'},
                {name:'id', hidden:true}
              ],
              rowNum:1,
              rowList:[1,2,3,4],
              pager: jQuery('#customer_list_pager'),
              viewrecords: true,
              gridview: true
            });
            $("#customer_list").jqGrid('filterToolbar',{autosearch:true});
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:28:32.590

只需添加

```
{name:'location',stype:'select', searchoptions:   {value:':All;USA:USA;Canada:Canada;Carribean:Carribean;USPacific:USPacific;'}}, 
```

你得到你的下拉菜单

# java - 图像 Servlet 不工作

> ID：14382991
> 
> 赞同：0
> 
> 时间：2013-01-17T15:56:59.743
> 
> 标签：java, jsp, servlets

嘿，任何人都可以帮助我使用我的 servlet，该 servlet 旨在在从数据库中获取图像后将图像显示到我的 jsp 页面。我下面的图像 servlet 似乎根本没有在我的浏览器中显示图像，只有一个损坏的图像图标：

```
@WebServlet(name = "ImageServlet", urlPatterns = {"/Image"})
public class ImageServlet extends HttpServlet {

private DatabaseConnector dataManager;
BufferedInputStream input = null;
BufferedOutputStream output = null;

@Override
public void init() {
    dataManager = new DatabaseConnector();
}

@Override
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // Prepare.
    String name = request.getPathInfo().substring(1); // Returns "foo.gif". You may want to do nullchecks here to avoid NPE's.
    ResultSet resultSet = null;

    try {
        // Query DB.
        resultSet = dataManager.getPhotos(1);

        if (resultSet.next()) {
            // Image found, prepare response and send it.
            response.setContentType(resultSet.getString("contentType"));
            response.setContentLength(resultSet.getInt("contentLength"));
            response.setHeader("Content-Disposition", "inline;filename=\"" + name + "\"");
            input = null;
            output = null;

            try {
                input = new BufferedInputStream(resultSet.getBinaryStream("content"));
                output = new BufferedOutputStream(response.getOutputStream());
                byte[] buffer = new byte[1024];

                for (int length; (length = input.read(buffer)) > -1;) {
                    output.write(buffer, 0, length);
                }
            } finally {
                if (output != null) {
                    try {
                        output.close();
                    } catch (IOException logOrIgnore) {
                    }
                }
                if (input != null) {
                    try {
                        input.close();
                    } catch (IOException logOrIgnore) {
                    }
                }
            }
        } else {
            // No image found, send HTTP 404.
            response.sendError(HttpServletResponse.SC_NOT_FOUND);
        }
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(ImageServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalArgumentException ex) {
        Logger.getLogger(ImageServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SQLException e) {
        throw new ServletException("Something failed at SQL/DB level.", e);
    } finally {
        if (resultSet != null) {
            try {
                resultSet.close();
            } catch (SQLException logOrIgnore) {
            }
        }
    }
}
} 
```

我的 jsp 页面中的图像如下所示：

```
<img src="/Image/<%= h.getHomeID() %>"> 
```

最后，我的结果集来自的数据库连接器类是：

```
public ResultSet getPhotos(String photoID) throws
        IllegalArgumentException, SQLException, ClassNotFoundException {

    createConnection();

    ResultSet rs = null;
    PreparedStatement preparedStatement = null;

    String strQuery = "SELECT home_photo.photo "
            + "FROM home_photo "
            + "WHERE home_photo.home_id = ?";

    try {
        preparedStatement = conn.prepareStatement(strQuery);
        preparedStatement.setString(1, photoID);
        rs = preparedStatement.executeQuery();

    } catch (SQLException e) {
        throw new SQLException(e);
    } finally {
        closeConnection();
        return rs;
    }
} 
```

我的 web.xml 也是这样的：

```
<servlet>
    <servlet-name>ImageServlet</servlet-name>
    <servlet-class>DB.ImageServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ImageServlet</servlet-name>
    <url-pattern>/Image/*</url-pattern>
</servlet-mapping> 
```

如果有人知道为什么没有显示图像，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:23:09.640

有2个潜在问题。

1.  图片网址错误。查看您的网络浏览器开发工具集的 HTTP 流量监视器（在 Chrome/IE9/Firebug 中按 F12 并查看*网络（工作）*部分）。HTTP 响应代码必须是 2nn/3nn 而不是 404。adarshr 的答案涵盖了这一点。

    ```
    <img src="${pageContext.request.contextPath}/Image/<%= h.getHomeID() %>"> 
    ```

    ### 也可以看看：

    *   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)

    * * *

2.  您在返回结果集之前关闭了数据库连接，但之后仍尝试访问结果集。这会抛出一个`SQLException`应该显示为 HTTP 500 错误页面的内容。这在 HTTP 流量监视器中也应该是可见的，甚至当您直接在浏览器的地址栏中指定图像的 URL 时也是如此。

    您需要重写不返回 a 的代码`ResultSet`，而只是将图像的内容返回为`byte[]`，或者将 DB 作业移动到 servlet 内部。在任何情况下，您都不应该创建接受或返回`ResultSet`实例的公共方法。

    ### 也可以看看：

    *   [如何在 JSP 页面中从数据库中检索和显示图像？](https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page/2341322#2341322)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:03:26.290

看起来图像 servlet 的 URL 是错误的。如果您以 开头`/`，它会将您带到上下文的根目录。

```
<img src="${pageContext.request.contextPath}/Image/<%= h.getHomeID() %>"> 
```

# java - Java：访问动作侦听器内的变量

> ID：14382992
> 
> 赞同：0
> 
> 时间：2013-01-17T15:57:00.740
> 
> 标签：java, swing, constructor, actionlistener

我已经尝试了一段时间来访问我的主类中的一个变量：

```
public class Results extends JFrame {
     public static void main(String[] args) 
     {
        System.out.println(doble);
     }} 
```

它在一个动作监听器中，像这样

```
public Results ()
{
 // Create a JPanel for the buttons DOUBLE AND NOT DOUBLE
    JPanel duplicate = new JPanel(
    new FlowLayout(FlowLayout.CENTER));
    JButton doblebutton = new JButton("DOUBLE");
    doblebutton.addActionListener(new ActionListener(){
    private int doble;
    public void actionPerformed(ActionEvent ae){
                doble++;
                System.out.println("Doubles: " + doble);
                }
  });
} 
```

我已经尝试了 5 种方法来做到这一点，但似乎不可能。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:06:39.997

尝试将**doble**的声明移到构造函数之外，使其成为一个字段，如下所示：

```
public class Results extends JFrame {

    private int doble;

    public Results() {
        // Create a JPanel for the buttons DOUBLE AND NOT DOUBLE
        JPanel duplicate = new JPanel(new FlowLayout(FlowLayout.CENTER));
        JButton doblebutton = new JButton("DOUBLE");
        doblebutton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                doble++;
                System.out.println("Doubles: " + doble);
            }
        });
    }

    public static void main(String[] args) {
        Results results = new Results();
        System.out.println(results.doble);
    }

} 
```

一些评论：

*   由于**doble**是一个非静态字段，因此您需要使用 Results 的具体实例来访问它。看看我对您的 main() 方法所做的更改。
*   像这样直接访问私有字段并不表示封装非常干净，实际上会产生编译器警告。
*   使用非字**doble**来避免保留字**double**上的编译器错误可能不如**count这样更有意义的东西好**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:01:31.713

current`doble`是在您的构造函数中声明的**局部变量，因此它的****范围**仅为`confined to constructor`，将其声明为在`insatnce level`其他地方访问它。

```
public class Results extends JFrame {
    private int doble;
      //cons code
   public static void main(String[] args) 
     {
        System.out.println(new Results().doble);
     }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:01:37.380

`main()`是静态的，是`doble`实例变量。您必须实例化，或使变量静态。

# sqlalchemy - 附加到 association_proxy 不会发出事件：

> ID：14382993
> 
> 赞同：1
> 
> 时间：2013-01-17T15:57:01.450
> 
> 标签：sqlalchemy

我有以下 ORM 类：

```
class Video(Base):
    ...
    public_tag_entries = relationship("VideoTagEntry")
    tags = association_proxy("public_tag_entries", "value") 
```

此外，我在 append 上关联了一个事件：

```
def video_tag_added(target, value, initiator):
    print "tag added"

event.listen(Video.public_tag_entries, 'append', video_tag_added) 
```

当我附加到 public_tag_entries 时，会发出事件

```
video.public_tag_entries.append(VideoTagEntry(value = "foo")) 
```

但是，当我添加使用时：

```
video.tags.append("foo") 
```

没有发出事件。

我试图在 video.tags 关联代理上注册一个事件，但这似乎不起作用。

问题：这是预期和正确的行为，还是这是一个错误？是否有解决方法，或者我只是做错了什么。

我希望关联代理触发底层属性的 orm 事件。

谢谢， 杰科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:52:08.533

无法重现（使用 0.7.9）：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.associationproxy import association_proxy
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import event

Base = declarative_base()

class VideoTagEntry(Base):
    __tablename__ = 'vte'
    id = Column(Integer, primary_key=True)
    video_id = Column(Integer, ForeignKey('video.id'))
    value = Column(String)

    def __init__(self, value):
        self.value = value

class Video(Base):
    __tablename__ = 'video'
    id = Column(Integer, primary_key=True)

    public_tag_entries = relationship("VideoTagEntry")
    tags = association_proxy("public_tag_entries", "value")

canary = []
def video_tag_added(target, value, initiator):
    print "tag added"
    canary.append(value)

event.listen(Video.public_tag_entries, 'append', video_tag_added)

video = Video()

video.public_tag_entries.append(VideoTagEntry(value="foo"))

video.tags.append("foo")

assert len(canary) == 2 
```

输出：

```
tag added
tag added 
```

所以你需要改变这个测试用例，让它看起来更像你的代码，看看有什么区别。

# jquery - JQuery 修改所以它切换

> ID：14382994
> 
> 赞同：2
> 
> 时间：2013-01-17T15:57:03.723
> 
> 标签：jquery

我有这些功能来显示和隐藏隐藏 div 中的内容。我怎样才能做到这一点，所以我只需要使用一个可以打开和关闭的按钮？

```
<script type="text/javascript" src="js/jquery.js"></script>
    <script> 
    jQuery(document).ready(function() { 
        $('.pagesplit').click(function() { 
            $('.page-split-wrap').css({'display': 'block'}) 
            $('.page-split-wrap').animate({height: '250px'}, 500);
        });  

        $('.pagemerge').click(function() { 
            $('.page-split-wrap').animate({height: '0px'}, 500, function() { 
                $('.page-split-wrap').css({'display': 'none'}); 
            }); 
        }); 
    }); 
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:00:53.547

使用[`.toggle`](http://api.jquery.com/toggle-event/)事件，而不是`.click`.

```
jQuery(document).ready(function() { 
    $('.pagetoggle').toggle(function() { 
        $('.page-split-wrap').css({'display': 'block'}) 
        $('.page-split-wrap').animate({height: '250px'}, 500);
    }, function() { 
        $('.page-split-wrap').animate({height: '0px'}, 500, function() { 
            $('.page-split-wrap').css({'display': 'none'}); 
        }); 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:12:07.503

如果您不想使用 deprecated `.toggle()`，您可以让您的点击处理程序交替使用它们使用的函数，如下所示：

```
jQuery(document).ready(function() {
    var showContent = function() { 
        $('.page-split-wrap').css({'display': 'block'}) 
        $('.page-split-wrap').animate({height: '250px'}, 500);
        // Switch handlers
        $('.pagesplit').unbind('click');
        $('.pagesplit').click(hideContent);
    };  

    var hideContent = function() { 
        $('.page-split-wrap').animate({height: '0px'}, 500, function() { 
            $('.page-split-wrap').css({'display': 'none'}); 
        }); 
        // Switch handlers
        $('.pagesplit').unbind('click');
        $('.pagesplit').click(showContent);
    };  

    $('.pagesplit').click(showContent);
}); 
```

# windows-8 - 我们可以将 TileTemplateType.TileWideImageAndText01 上的前景色设置为我选择的颜色吗

> ID：14382998
> 
> 赞同：0
> 
> 时间：2013-01-17T15:57:08.963
> 
> 标签：windows-8, windows-store-apps

只是想知道是否有任何方法可以在 TileWideAndText01 平铺模板上设置文本的前景色，还是我们仅限于深色或浅色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:05:57.627

你仅限于黑暗或光明。从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.startscreen.secondarytile.foregroundtext.aspx)：

> 只有两种文本颜色可用 - 默认深色和默认浅色 - 由 Windows 设置。选择最适合您选择的背景颜色和徽标图像不透明度的文本颜色。

# git - 这么多未使用的分支。如何清理？

> ID：14382999
> 
> 赞同：12
> 
> 时间：2013-01-17T15:57:16.093
> 
> 标签：git

我有以下分支：

```
* master
newbranch
remotes/origin/HEAD -> origin/master
remotes/origin/api-notes
remotes/origin/event-creation-validation
remotes/origin/master
remotes/origin/organizerlocation-bug-demo
remotes/origin/ticket-180 
```

1.  当前的分支 master 是否与 origin/master 不同，或者这些分支是否一起工作？

2.  如何检测不同分支中的最后更改以及如何删除它们以进行清理？

非常感谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:22:30.217

你没有任何理由担心或清理任何东西。这就是为什么：

# 当前的分支 master 是否与 origin/master 不同，或者这些分支是否一起工作？

如果您将 master 创建为跟踪分支，或者您克隆了它（默认情况下克隆创建跟踪 master），那么是的，有点。跟踪仅仅意味着 git 将使用这个分支映射作为推送和合并的默认目标。它还将显示状态消息，例如“branch master 比 origin/master 早 2 次提交”。

# 如何检测不同分支的最后更改？

我会简单地使用

```
git branch -av 
```

这显示了所有分支（本地和远程）的简短提交 ID 和简短摘要。

最重要的是，您可能需要使用 git log 。 `git log --decorate`查看哪些分支指向哪些提交非常有帮助。在最新的 git 版本（1.7.11+）中，您可以使用以下命令永久启用它：

```
git config --global log.decorate short 
```

# 如何删除它们以进行清理？

你没有 - 远程分支不是你的。远程分支仅反映上次`git fetch`执行时远程的状态。您无法创建它们，即使您使用 删除它们`git branch -rd`，下次您执行`git fetch`这些远程分支指针时也会立即返回。

但是如果你完全移除这个遥控器：

```
git remote rm origin 
```

那么这个遥控器的所有远程分支将立即消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:05:39.017

1/ 当前分支 master 与 origin/master 不同还是这些分支一起工作？

它是不同的（即使它是从`origin/master`克隆之后开始的），并且没有跟踪`origin/master`（请参阅“[如何更改 git 分支正在跟踪的远程？](https://stackoverflow.com/a/4879224/6309) ”）。

2/我怎样才能删除它们进行清理

您可以使用以下命令从远程命名空间中删除分支：

```
git branch -rd origin/api-notes 
```

（更多内容请参见“[如何从 Git 中删除无效的远程分支引用？](https://stackoverflow.com/a/1072198/6309) ”）

您可以 git diff 或 git log 两个分支来查看您没有的提交：
请参阅“ Git diff .. ？有[和没有点](https://stackoverflow.com/questions/7251477/git-diff-whats-the-difference-between-having-and-no-dots/7256391#7256391)[有什么区别`..`](https://stackoverflow.com/questions/7251477/git-diff-whats-the-difference-between-having-and-no-dots/7256391#7256391)？ ”。
另请参阅“ [Git：将所有本地提交与远程回购版本进行比较](https://stackoverflow.com/questions/5734722/git-compare-all-local-commits-to-remote-repo-version)”。