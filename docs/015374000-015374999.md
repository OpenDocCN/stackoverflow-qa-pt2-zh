# StackOverflow 问答 15374000-15374999

# asp.net-mvc - 属性初始值参考Guid

> ID：15374000
> 
> 赞同：1
> 
> 时间：2013-03-12T23:06:43.537
> 
> 标签：asp.net-mvc, f#

我正在构建一个 F# ASP.NET MVC 应用程序，其中我的一个模型如下所示：

```
namespace MyApp.Models

open System
open System.ComponentModel.DataAnnotations

type ProductCategory() = 
    [<Key>] member val Id = Guid.NewGuid() with get, set
    [<Required>] member val Name = "" with get, set
    member val ParentCategory = Guid.Empty with get, set 
```

产品类别的简单类型，其中每个类别都可以有一个父级（由它的 Guid 引用）。这是声明 ParentCategory 属性的正确方法吗？我曾尝试将其设为可空或可选项，但没有成功，但由于我对这一切都不熟悉，所以我真的迷失了所有这些细节。我试过搜索，但我得到的最远的是人们将其声明为 Guid？在 C# 中，我无法做到。

任何有关声明这一点的正确方法的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:56:29.107

因此，根据@ildjarn 的回答，这就是最后的工作方式：

```
namespace MyApp.Models

open System
open System.ComponentModel.DataAnnotations

type ProductCategory() = 
    [<Key>] member val Id = Guid.NewGuid() with get, set
    [<Required>] member val Name = "" with get, set
    member val ParentCategory = Nullable<Guid>() with get, set 
```

非常感谢您的帮助！

# java - 由 JSF Bean 支持的 HighChart 组合列样条

> ID：15374002
> 
> 赞同：0
> 
> 时间：2013-03-12T23:06:46.347
> 
> 标签：java, json, highcharts, gson

在 HighChart 页面的支持 bean 中，我查询数据库并将图表数据设置为：

```
 series.add(new Series("Series1", chartDao.getData1()));
    series.add(new Series("Series2", chartDao.getData2()));
    setChartData(new Gson().toJson(series)); //For HighCharts 
```

`name`系列是具有和`data`属性的pojo 。

在 HighChart 部分的 chart.xhtml 中，我有

```
 chart: { type: column,
    ...
    series: $.parseJSON(${chartController.chartData}) 
```

这可行，但现在我想发送另一组作为样条覆盖的系列。

我修改了我的 Series 对象以包含颜色和类型，然后在我的支持 bean 中执行

```
 series.add(new Series("Series1", chartDao.getData1(), "blue", "column"));
    series.add(new Series("Series2", chartDao.getData2(), "red", "column"));
    series.add(new Series("Series3", chartDao.getData3(), "yellow", "spline"));
    series.add(new Series("Series4", chartDao.getData4(), "green", "spline")); 
```

这也有效，但它是正确的方法吗？我想知道是否有更好的方法，因为每当我想调整图表时，似乎我必须修改我的 Series 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:13:55.387

您的解决方案对我来说看起来不错。我认为您担心的问题是您必须修改您的 Series 构造函数，因为您想调整其中一个系列设置。

另一种方法是在您的 Series 对象上添加方法以修改各种设置：

```
Series s = new Series("Series1", chartDao.getData1());
s.setColor("blue");
s.setType("column");
s.setYAxis(0);
...
series.add(s); 
```

这样，您只需为需要它的那些系列调用新方法，而不是修改每个系列的构造函数（例如，列可以是默认类型）。

或者，您可以在此处查看一些现有的 highcharts 包装器：[http](http://www.highcharts.com/download) ://www.highcharts.com/download 。那里至少列出了一个 java 包装器。

# php - PDO 插入 if 语句

> ID：15374004
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:06:54.990
> 
> 标签：php, pdo

我想知道如何检查插入语句是否执行。

我目前的检查代码是这样的：

```
$query = $conn->prepare("INSERT INTO editlog VALUES('',:whoadd,:doing,NOW())");
$query-> execute(array(':whoadd'   => $whoadd,':doing'   => $doing));
if ($query->rowCount() > 0) {
// insert statement have been executed 
}
else 
{
// something went wrong
} 
```

有没有比使用更好的方法`$query->rowCount() > 0`？我听说它`rowCount()`本身运行对 mysql 数据库的查询..那么，有什么好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:56:38.740

正如 Mark Parnell 建议的那样，将`execute`调用包装在`if`语句中就可以了。稍后设置数据库对象的一些属性可能也很有用：

```
 $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

导致 PDO`PDOException`在查询失败时抛出异常 ( )。您可以通过将数组作为第四个参数传递给构造函数来设置这些属性：

```
$pdo = new PDO('mysql:dbname=foobar;host=127.0.0.1','your','pass',
                      array(PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
                            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_OBJ')); 
```

例如，[这里是可以指定的所有属性的完整列表](http://www.php.net/manual/en/pdo.setattribute.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:10:05.903

检查调用的返回值`execute`：

```
if ($query->execute(array(':whoadd' => $whoadd,':doing' => $doing))) {
    // insert statment have been excuted 
}
else 
{
    // something went wrong
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:11:38.373

PDOStatement::execute() 本身将在成功时返回 true 或在失败时返回 false。

# java - android相机代码错误

> ID：15374005
> 
> 赞同：0
> 
> 时间：2013-03-12T23:06:57.323
> 
> 标签：java, android, camera

每当我在我的实际或虚拟 android 设备上运行此代码时，程序首先打开一个带有按钮和图像视图小工具的屏幕，按下按钮后，它会转到相机应用程序并允许我拍照。图片已保存，但之后图片应该打开并应该绘制一个矩形，但程序却关闭了。它说“压力分析已停止工作”，任何人都可以帮助我。我是android的新手，所以一个简单的解释将不胜感激。

## 主要活动

```
 package com.example.stressanalysis;

       import android.app.Activity;
    import android.content.Intent;
     import android.graphics.Bitmap;
     import android.graphics.Canvas;
      import android.graphics.Paint;
     import android.graphics.Rect;
      import android.os.Bundle;
     import android.view.View;
     import android.widget.Button;
     import android.widget.ImageView;

    public class MainActivity extends Activity {
private static final int CAMERA_REQUEST = 1888;
ImageView imageView;
Button button1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    imageView = (ImageView) this.findViewById(R.id.imageView1);
    button1 = (Button) this.findViewById(R.id.button1);
    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        Rect r = new Rect(0,0,50,50); 
        Paint paint = new Paint();
        imageView.setImageBitmap(photo);
        Canvas canvas = new Canvas(photo);
        canvas.drawRect(r, paint);

    }
}

    } 
```

## 主要活动 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/ic_launcher" />

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="66dp"
    android:text="Button" />

    </RelativeLayout> 
```

## 日志猫

```
 03-12 19:19:11.380: D/AndroidRuntime(11368): Shutting down VM
03-12 19:19:11.380: W/dalvikvm(11368): threadid=1: thread exiting with uncaught exception (group=0x4107e2a0)
03-12 19:19:11.388: E/AndroidRuntime(11368): FATAL EXCEPTION: main
03-12 19:19:11.388: E/AndroidRuntime(11368): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1888, result=-1, data=Intent { act=inline-data dat=content://media/external/images/media/5291 (has extras) }} to activity {com.example.stressanalysis/com.example.stressanalysis.MainActivity}: java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3179)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3222)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread.access$1100(ActivityThread.java:140)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1276)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.os.Looper.loop(Looper.java:137)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread.main(ActivityThread.java:4895)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at java.lang.reflect.Method.invokeNative(Native Method)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at java.lang.reflect.Method.invoke(Method.java:511)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at dalvik.system.NativeStart.main(Native Method)
03-12 19:19:11.388: E/AndroidRuntime(11368): Caused by: java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.graphics.Canvas.<init>(Canvas.java:127)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at com.example.stressanalysis.MainActivity.onActivityResult(MainActivity.java:42)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.Activity.dispatchActivityResult(Activity.java:5347)
03-12 19:19:11.388: E/AndroidRuntime(11368):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3175)
03-12 19:19:11.388: E/AndroidRuntime(11368):    ... 11 more
03-12 19:19:20.755: I/Process(11368): Sending signal. PID: 11368 SIG: 9 
```

## 安慰

```
 [2013-03-12 18:26:10 - StressAnalysis] ------------------------------
[2013-03-12 18:26:10 - StressAnalysis] Android Launch!
[2013-03-12 18:26:10 - StressAnalysis] adb is running normally.
[2013-03-12 18:26:10 - StressAnalysis] Performing com.example.stressanalysis.MainActivity activity launch
[2013-03-12 18:26:10 - StressAnalysis] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'AndroidTablet1'
[2013-03-12 18:26:10 - StressAnalysis] Uploading StressAnalysis.apk onto device 'emulator-5554'
[2013-03-12 18:26:13 - StressAnalysis] Installing StressAnalysis.apk...
[2013-03-12 18:26:18 - StressAnalysis] Success!
[2013-03-12 18:26:18 - StressAnalysis] Starting activity com.example.stressanalysis.MainActivity on device emulator-5554
[2013-03-12 18:26:20 - StressAnalysis] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.stressanalysis/.MainActivity }
[2013-03-12 18:48:23 - StressAnalysis] ------------------------------
[2013-03-12 18:48:23 - StressAnalysis] Android Launch!
[2013-03-12 18:48:23 - StressAnalysis] adb is running normally.
[2013-03-12 18:48:23 - StressAnalysis] Performing com.example.stressanalysis.MainActivity activity launch
[2013-03-12 18:48:23 - StressAnalysis] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-03-12 18:48:33 - StressAnalysis] Uploading StressAnalysis.apk onto device 'c1607cb047e457f'
[2013-03-12 18:48:34 - StressAnalysis] Failed to install StressAnalysis.apk on device 'c1607cb047e457f': Local path doesn't exist.
[2013-03-12 18:48:34 - StressAnalysis] com.android.ddmlib.SyncException: Local path doesn't exist.
[2013-03-12 18:48:34 - StressAnalysis] Launch canceled!
[2013-03-12 18:48:38 - StressAnalysis] ------------------------------
[2013-03-12 18:48:38 - StressAnalysis] Android Launch!
[2013-03-12 18:48:38 - StressAnalysis] adb is running normally.
[2013-03-12 18:48:38 - StressAnalysis] Performing com.example.stressanalysis.MainActivity activity launch
[2013-03-12 18:48:38 - StressAnalysis] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-03-12 18:48:44 - StressAnalysis] Uploading StressAnalysis.apk onto device 'c1607cb047e457f'
[2013-03-12 18:48:44 - StressAnalysis] Installing StressAnalysis.apk...
[2013-03-12 18:48:47 - StressAnalysis] Success!
[2013-03-12 18:48:47 - StressAnalysis] Starting activity com.example.stressanalysis.MainActivity on device c1607cb047e457f
[2013-03-12 18:48:48 - StressAnalysis] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.stressanalysis/.MainActivity }
[2013-03-12 18:52:54 - AndroidTest] ------------------------------
[2013-03-12 18:52:54 - AndroidTest] Android Launch!
[2013-03-12 18:52:54 - AndroidTest] adb is running normally.
[2013-03-12 18:52:54 - AndroidTest] Performing com.example.androidtest.MainActivity activity launch
[2013-03-12 18:52:57 - AndroidTest] Uploading AndroidTest.apk onto device 'c1607cb047e457f'
[2013-03-12 18:52:57 - AndroidTest] Installing AndroidTest.apk...
[2013-03-12 18:52:59 - AndroidTest] Success!
[2013-03-12 18:52:59 - AndroidTest] Starting activity com.example.androidtest.MainActivity on device c1607cb047e457f
[2013-03-12 18:53:00 - AndroidTest] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.androidtest/.MainActivity }
[2013-03-12 19:15:36 - StressAnalysis] ------------------------------
[2013-03-12 19:15:36 - StressAnalysis] Android Launch!
[2013-03-12 19:15:36 - StressAnalysis] adb is running normally.
[2013-03-12 19:15:36 - StressAnalysis] Performing com.example.stressanalysis.MainActivity activity launch
[2013-03-12 19:15:36 - StressAnalysis] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-03-12 19:15:40 - StressAnalysis] Application already deployed. No need to reinstall.
[2013-03-12 19:15:40 - StressAnalysis] Starting activity com.example.stressanalysis.MainActivity on device c1607cb047e457f
[2013-03-12 19:15:41 - StressAnalysis] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.stressanalysis/.MainActivity }
[2013-03-12 19:15:41 - StressAnalysis] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:27:04.883

您的日志中有此错误：

```
03-12 19:19:11.388: E/AndroidRuntime(11368): java.lang.RuntimeException: Failure delivering result 
        ResultInfo{who=null, request=1888, result=-1, data=Intent { 
        act=inline-data dat=content://media/external/images/media/5291 (has extras) }}
        to activity {com.example.stressanalysis/com.example.stressanalysis.MainActivity}: 
java.lang.IllegalStateException: Immutable bitmap passed to Canvas constructor 
```

然后，这个答案可能会有所帮助： [不可变位图崩溃错误](https://stackoverflow.com/questions/13119582/android-immutable-bitmap-crash-error)

# networking - 远程获取公网IP

> ID：15374006
> 
> 赞同：3
> 
> 时间：2013-03-12T23:07:07.527
> 
> 标签：networking, ip

我正在考虑一种远程查找家中路由器公共IP的方法。

例如，如果我在上大学，我需要连接到家庭网络中的机器。如何让公共 IP 连接到它？

要从那台机器获取 IP，我可以使用类似这个网站的东西 - [http://api.exip.org/?call=ip](http://api.exip.org/?call=ip)

但是我怎样才能远程发送给自己呢？

其中一个想法是编写某种脚本来检查我的电子邮件地址是否有传入消息。因此，当我需要知道 IP 时，我只需向自己发送一些带有特定文本（或主题）的电子邮件。当脚本找到该特定文本时，它会将 IP 发送到同一封电子邮件。

另一个想法是编写一个脚本，每次更改公共 IP 时都会将新文件上传到服务器（例如 DropBox）。

或者我可以将这两者结合起来，并在每次更改时通过电子邮件发送新 IP（不是那么频繁，但它仍然是垃圾邮件）。

还有哪些其他解决方案，以及我如何实施它们（或我拥有的解决方案）？

我有可以使用的 Linux/Unix 和 Windows 机器。我在用不同语言编写代码或寻找任何可能的方法方面没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:26:58.573

大多数家用路由器都有动态 DNS 功能，你会在你的路由器配置中找到它作为 DDNS 和配置页面，你会找到支持的 DDNS 服务列表，最流行的 DDNS 服务是 dyndns.org 你必须在那里订阅，他们会给你拖像 example.dyndns.org 这样的免费子域，在您的路由器上配置后，您可以轻松地从任何位置 ping example.dyndns.org 了解您的路由器 IP

# python - GAE Python - CSV Writer 给出 ascii 编解码器错误

> ID：15374009
> 
> 赞同：1
> 
> 时间：2013-03-12T23:07:14.413
> 
> 标签：python, google-app-engine, csv, codec

我有一个 Google App Engine 应用程序，它以多种语言存储数据，例如德语和俄语。为此，我需要将字符串存储为 UTF-8，幸运的是，这是自动完成的，因为我使用了 webapp2.request 处理程序。作为一个初级程序员，这让我避免了编码和解码数据的复杂性。

但是现在我正在尝试将内容写入 CSV 文件，而且对于 csv.writer 命令来说，无论如何编码都是必要的。现在我不确定是否应该解码或编码，但目前我得到的错误如下：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128) 
```

我正在使用的代码是：

```
import csv, webapp2, codecs

class AdminShopExport(webapp2.RequestHandler):
  def get(self):
    shops = Shop.all()
    shops.order('name')
    self.response.headers['Content-Type'] = 'application/csv'
    writer = csv.writer(self.response.out)
    writer.writerow(["id", "name", "domain", "category"])
    for shop in shops:
      writer.writerow([shop.keyname, shop.name, shop.url, shop.category]) 
```

关于内容，该错误当前来自以俄语给出的类别。但是如上所述，这些字段中的任何一个都可以包含 UTF-8 字符。处理这个问题的最佳方法是什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:27:08.600

python 2x csv 不支持 unicode

尝试这个

[https://github.com/jdunck/python-unicodecsv](https://github.com/jdunck/python-unicodecsv)

# .net - 如果另一个应用程序的 bin 目录中的 .net 程序集不在 GAC 中，我该如何使用它？

> ID：15374010
> 
> 赞同：2
> 
> 时间：2013-03-12T23:07:17.623
> 
> 标签：.net, dll, assemblies, gac, managed

我正在开发一个托管 C++ 应用程序，它将与另一家公司的产品交互。他们的产品是基于 .net 的，使用的主要 API 来自一个名为 foo.dll 的 .net 程序集。

我的应用程序需要先安装他们的产品。安装他们的产品会产生三个不同的应用程序，每个应用程序都在自己的目录中，每个都有自己的 /bin 目录，每个都有相同 .dll 文件的本地副本，因此您可以找到：

```
C:\company\product1\bin\foo.dll  
C:\company\product2\bin\foo.dll  
C:\company\product3\bin\foo.dll 
```

当您安装他们的产品时，该公司告诉我们要使用哪些 .dll，以及哪些他们没有放入 GAC。目前，我可以通过在构建后将它们的 .dll 复制到我的 bin 目录中来运行我的应用程序。但是，现在我正在为我的产品创建一个安装程序，但我很难找到一种优雅的方式来处理这个问题。假设他们的 API 没有改变，我应该能够针对他们产品的大多数版本运行，只要我拥有的 .dll 与他们的产品在该机器上使用的那个相匹配。

显然，理想的解决方案是让他们在安装他们的产品时将这些程序集放在 GAC 中，特别是因为他们自己共享它们，但这不太可能发生，因为他们的产品仍然不成熟，还有很多更重要的问题，以及他们所做的事情对他们有用。

因此，我遇到了安装产品时如何查找和使用所需的 .dll 的问题。到目前为止，我提出的选项如下：

1.  在我的安装程序中包含他们的 .dll

    *   不好，因为这将我锁定在他们软件的特定版本中，而且无论如何我们都从他们那里获得增量开发版本，这与他们的公开发布不匹配。
2.  让我的安装程序找到他们的安装目录并运行 gacutil.exe 以及将 .dll 放入 GAC 所需的任何其他内容。

    *   不好，因为 gacutil.exe 应该只用于开发，这意味着我们必须将它包含在我们的安装程序中，并将它与我们自己的产品一起安装。它还可能会干扰他们的产品查找组件。
3.  让我的安装程序找到他们的安装目录并将我需要的 .dll 复制到我自己的目录中。

    *   很简单，它可以工作，但不优雅，这意味着如果他们的产品在复制新的 .dll 之前对其进行了微小的更新，我的应用程序可能会崩溃。我还想避免复制文件的需要。
4.  使用我在[http://www.roelvanlisdonk.nl/?p=713](http://www.roelvanlisdonk.nl/?p=713)找到的代码在运行时以编程方式将它们的安装目录添加到我的应用程序的 .net 搜索路径中。

    *   如果它有效，原因很简单，但需要维护更多代码。到目前为止，这似乎是从其目录中自动加载 dll 的唯一途径。

托管 C++ 和 .net 对我来说仍然相对较新，我的大部分编码都是基于 linux 的 C++。我的感觉是，这将是非常困难的，因为如果其他公司希望其他人能够针对他们进行开发，他们没有正确管理他们如何使用他们的 .net 程序集。

有没有更多经验的人不得不处理这样的事情并找到解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:24:06.760

也许您可以通过对有问题的 .dll 建立符号链接来解决这个问题？这样，您的应用程序将能够查看和使用这些文件，并且您正在使用它们在磁盘上的物理文件。如果他们更新了文件（纠正了一些错误）但仍然向后兼容，您将能够自动使用他们的新代码/.dll。

这里的主要问题是，如果有问题的程序集是要从其他应用程序使用的？他们的 API 会稳定吗？如果没有，基本上你无能为力。

此外，如果您将它们的目录添加到程序集搜索加载路径中，您可能会无意加载错误的程序集，因为将来可能会有多个名为 X.dll 的程序集。

# javascript - 使用 javascript 仅基于 src 值单击所有图像

> ID：15374011
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:07:24.083
> 
> 标签：javascript, jquery, html

我想单击页面上具有特定图像 src 的所有链接。

如果我知道 id，我知道我可以执行以下操作：

```
alert(document.getElementById('image').src); 
```

但我知道知道 src 并且没有其他内容。没有 id、alt 或标题，只有 src。

任何人都知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:10:25.333

简单..虽然请在有机会时阅读 jquery 的文档：

```
$("img[src='src_goes_here']").trigger("click"); 
```

假设您要单击具有特定来源的子图像的链接..

```
$("a img[src='src_goes_here']").parent().trigger("click"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:12:38.787

我不确定“单击具有特定图像源的链接”是什么意思，因为单击将是用户交互，并且链接不倾向于具有`src`- 属性，如`<img>`-tag

无论如何，以jQuery为例，有一个叫做“属性选择器”的东西，在你的情况下，[属性等于选择器（jQuery-API）](http://api.jquery.com/attribute-equals-selector/)应该可以解决问题：

```
var yourSource = "/path/to/image.jpg";
var myImages = $('img[src="'+ yourSource +'"]'); 
```

因此，例如，如果您的图片*在*链接内，您需要做的就是：

```
myImages.parent().trigger('click'); 
```

但我真的不知道那应该有什么好处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:10:43.767

```
$('img[src="' + yourKnownSrc +  '"]').click(); 
```

如果您想单击“拥有”图像的链接：

```
$('a').has('img[src="' + yourKnownSrc +  '"]').click(); 
```

# maven - 使用 maven 在 IntelliJ Idea 12 Ultimate 项目中添加新依赖项

> ID：15374012
> 
> 赞同：1
> 
> 时间：2013-03-12T23:07:25.087
> 
> 标签：maven, intellij-idea

在我尝试使用 IntelliJ Idea 在休眠项目中手动添加 ehcache 依赖项失败后，我决定使用 maven 并向项目添加 maven 框架支持。现在我有一个现有的 pom.xml 文件，我想添加 pom（它的依赖项）从这个位置（[http://repo1.maven.org/maven2/org/hibernate/hibernate-ehcache/4.1.9.Final/](http://repo1.maven.org/maven2/org/hibernate/hibernate-ehcache/4.1.9.Final/)）。我怎么做？我可以在一个项目中拥有多个 pom.xml 文件吗？谢谢你。

这是我正在使用的当前 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>groupId</groupId>
    <artifactId>HibernateProject1</artifactId>
    <version>1.0-SNAPSHOT</version>

    <dependencies>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    </dependencies>

</project> 
```

现在我收到以下错误：

线程“主”org.hibernate.HibernateException 中的异常：/hibernate.cfg.xml 未找到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:27:43.057

每个 IDEA 窗口只能打开一个 IDEA 项目。但是一个 Maven 项目可以由[多个模块](http://maven.apache.org/guides/mini/guide-multiple-modules.html)组成，每个模块都有自己的`pom.xml`。您还可以在同一个 IDEA 项目中导入多个 Maven 项目。

`pom.xml`如果您有一个现有的 Maven 项目，只需使用打开根目录`File > Open`，IDEA 会询​​问您是否应该将其[作为 Maven 项目打开](http://wiki.jetbrains.net/intellij/Creating_and_importing_Maven_projects)（前提是您已在 IDEA 中启用了 Maven 插件）。当您对 a 进行更改时`pom.xml`，IDEA 会建议您重新导入项目，从而添加/删除库以使 IDEA 项目与 Maven 项目同步。

要将依赖项添加到 hibernate，请添加以下代码：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.9.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-ehcache</artifactId>
    <version>4.1.9.Final</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:34:39.597

您可以在一个 IDEA 窗口中拥有多个 maven 项目。

您始终可以从它的 pom.xml 文件中打开一个项目（如果它是一个多模块项目：所有子模块将自动包含在您的 IDEA 窗口中）。

当您打开一个 Maven 项目（单模块或多模块）时，您可以转到“Maven 项目”选项卡（通常在窗口的右侧）。在此选项卡中，您可以单击“绿色 +”按钮：“添加 maven 项目”，然后浏览到另一个 pom.xml 并选择它：在另一个 pom.xml 中定义的所有模块都将**添加**到您当前的 IDEA 窗口中。

# logging - 日志服务 ala splunk、papertrail 等

> ID：15374015
> 
> 赞同：0
> 
> 时间：2013-03-12T23:07:31.477
> 
> 标签：logging, splunk, paper-trail-gem, loggly

Papertrail 是同类服务中唯一允许您通过 webhook 对记录的事件做出反应的服务吗？

我正在寻找一个托管的日志记录解决方案，例如 Splunk Storm 或 Papertrail。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:03:59.770

[Logentries](https://logentries.com/)通过 HMAC 身份验证提供实时 POST 通知：[https ://logentries.com/doc/webhookalert/](https://logentries.com/doc/webhookalert/)

使您能够匹配正则表达式，设置每小时/天的最小匹配数和每小时/天的最大警报数。

格式为（在文档中）：

```
{
"alert": {
    "name": "500 error" // Alert name
},
"host": {
    "name": "Web", // Host name
    "hostname": "web.example.com" // Host DNS name
},
"log": {
    "name": "access.log" // Log name
},
"event": Event, // Trigerring event
"context": [ // Events in context
    Event[]
]
} 
```

事件在哪里：

```
{
"t": 1346202355889, // Timestamp
"s": 40634540484, // Sequence
"m": "[26/Aug/2012:10:58:50 +0100] POST /api..." // Message
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:11:31.210

Splunk 可以使用 curl 及其 API 来实现。 [http://dev.splunk.com/view/saved-searches-and-alerting/SP-CAAADRK](http://dev.splunk.com/view/saved-searches-and-alerting/SP-CAAADRK)

# jquery - jQuery scrollTop 不等于 div 底部的 scrollHeight

> ID：15374022
> 
> 赞同：3
> 
> 时间：2013-03-12T23:07:58.983
> 
> 标签：jquery

我在 div 中动态添加组件。我想加载更多内容，为什么滚动条在最后（现在社交媒体网站通常会这样做）。我为此编写了以下代码：

```
$('.tabs-body-container #tbody-0 .feeds').scroll(function () {
    if (!invoked_next) {
        cont_height = $(this).get(0).scrollHeight;
        scrl_pos = $(this).scrollTop();
        if (scrl_pos / cont_height >= .70) {
            invoked_next = true;
            loadData();
        }
    }
}); 
```

但是当我向下滚动条并将其结束时， scrl_pos 和 cont_height 的值有很大的不同。我加载的内容越少，百分比差异就越大。任何人都可以帮我找到所有可能性来检查并找到原因吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-24T18:15:30.637

```
$('.scrollableDiv').on('scroll', function () {
var scrollableDivHeight = $('.scrollableDiv').height(),
    scrollTop = $('.scrollableDiv').scrollTop(),
    windowHeight = $(window).height();

if (scrollableDivHeight - (scrollTop + windowHeight) <= 100) {
    console.log(scrollableDivHeight - (scrollTop + windowHeight));
} 
```

});

添加窗口高度以滚动顶部对我有用

# c# - 32feet.net：如何通过 BluetoothClient 连接到特定的 COM 端口

> ID：15374025
> 
> 赞同：0
> 
> 时间：2013-03-12T23:08:16.877
> 
> 标签：c#, visual-studio-2010, bluetooth, 32feet

我正在尝试使用 C#/Visual Studio 2010 构建一个 Windows 应用程序，它将执行以下功能（按顺序）： 对于蓝牙操作，我正在使用 32feet.Net 库函数。

1.  找到蓝牙设备并将它们列在列表/组合框中供用户选择。（我想允许用户选择多个设备，因此不去`SelectBluetoothDeviceDialog`上课选项。）。我可以通过 获取设备列表`BluetoothClient.DiscoverDevices()`，但是，它不是异步操作。如果可能的话，我想进行异步操作。我阅读了有关`BluetoothComponent`事件`DiscoverDevicesProgress`和`DiscoverDevicesComplete`方法的类，`DiscoverDevicesAsync`但无法使其正常工作。如果可能，请为此分享示例代码。

2.  用户从列表中选择设备并单击“配对”按钮。到目前为止，我可以通过`BluetoothSecurity.PairRequest`. 这里没有问题。

3.  用户现在从“配对”列表中选择一个/多个设备并单击“连接”。在这里，我尝试使用`BeginConnect`（用于异步操作）和类`Connected`的方法连接到设备，`BluetoothClient`但出现以下异常。

> System.Net.Sockets.SocketsException：{“提供的参数无效 000319002CC6:0000110100001000800000805f9b34fb”}。

上述异常中的数字是`Connected`我使用传递的方法所需的 GUID 号`BluetoothService.SerialPort`。这将失败，因为我的设备预计将连接到 COM7 端口。我不确定如何在特定的 COM 端口连接/配对设备？32feet.Net 库函数甚至可以实现吗？如果是这样，请提供代码示例。

参考注意事项：我已经阅读并尝试实现下面关于 StackOverflow 的文章中解释的代码。但是，由于我的要求（允许用户在 COM 端口配对并连接到多个设备），我无法运行相同的代码。但是，它确实有助于理解这个概念。 [32feet.net 如何在 c# 中异步发现附近的蓝牙设备](https://stackoverflow.com/questions/7773000/32feet-net-howto-discover-nearby-bluetooth-devices-async-in-c-sharp)

请您建议处理这种情况的最佳方法。如果我应该尝试使用 32feet.Net 以外的任何其他库/函数，请告诉我。

我的最终目标是从连接的设备读取和写入数据。所以，到目前为止，我只是想通过蓝牙连接到特定的 COM 端口。

问候， 鲁米特

============================ 编辑：答案1的更新信息：

我收到了一个蓝牙设备（补丁），它应该连接到 TOSHIBA VIRTUAL BT COM 端口。如果需要东芝信息以更好地回答问题，我深表歉意。我不熟悉与端口的通信。到目前为止，我知道我需要使用 COM7。我有一个用 C++ 构建的应用程序，它通过蓝牙连接到 COM7 上的同一个补丁。但是，我没有源代码，我被要求在 C# 中实现相同的实用程序。从您的回复中，我可以假设 C++ 应用程序可能正在使用 Windows Sockets 2 吗？

此外，我可以看到一个选项来指定端口（整数值）值，`BluetoothEndClient`但这也不起作用。因此，我假设该端口不是 COM，而是某种其他类型的端口。

问候， 鲁米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:36:09.740

刚才就简单介绍一下。你似乎大部分都在正确的路线上。

1）该错误可能是名称为“InvalidArgument”且代码为 10022（检查`SocketException.SocketErrorCode`）的错误。

因此，对于 MSFT 蓝牙堆栈，它具有意义（参见[http://32feet.codeplex.com/wikipage?title=Errors](http://32feet.codeplex.com/wikipage?title=Errors)）：

```
"Plug and Play, driver-stack event, or other error caused failure." 
```

因此，这意味着连接的硬件级别出现问题，无论是加密狗本身还是这对设备通信错误。你连接的不是Parani模块，是吗？

在蓝牙 UI 中手动配对，然后查看连接是否正常。

2) 你*真的*想要一个 COM 端口吗？我非常喜欢使用 Sockets 和 System.IO.Streams。COM 端口很难设置，很难维护，也很难使用。*只有当您有一个仅*使用 COM 端口的第三方程序时，您才需要使用它们。

BluetoothClient 不创建 COM 端口，它使用 Sockets 并返回一个 Stream 来读取和写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:11:20.857

我找到了一个使用 WCL 库成功连接到蓝牙设备的解决方案，如下所述。

Step1：将wclClient 的Transpport 属性设置为ctSerial。

```
client.Transport = wclClientTransport.ctSerial; //This makes the wclClient to listen to the COM ports. 
```

Step2：通过设置client.SerialParams.Port属性指定COM端口号。例如，

```
client.SerialParams.Port = 5; // For COM5 
```

问候， 鲁米特

# rest - SpringMVC REST access_token 和 session

> ID：15374034
> 
> 赞同：0
> 
> 时间：2013-03-12T23:09:11.260
> 
> 标签：rest, authentication, spring-mvc, spring-security

我正在为需要用户身份验证的应用程序设计 rest api。身份验证基于用户名/密码，登录后，服务器返回一个 access_token 以放入所有未来请求的 http 标头中。

对于每个请求，我创建了一个过滤器来检查 http 标头中的 access_token 参数： - 如果存在，我必须检查参数是否与系统创建的相同 - 如果不存在，过滤器将返回 401 Unauthorized。

RESTful ws 是无状态的，所以我想了解有关 access_token 管理的最佳实践。我正在考虑将 access_token 存储在数据库中，但登录后的请求数量可能很大，所以我认为每个请求对数据库的查询过于昂贵。

您建议采用哪种方法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:14:19.130

在我的应用程序中，我使用数据库来存储 access_token，因为我没有看到任何其他方式。您还可以查看[spring-security-oauth](https://github.com/SpringSource/spring-security-oauth)和[数据库模式](https://github.com/SpringSource/spring-security-oauth/blob/master/spring-security-oauth2/src/test/resources/schema.sql)

# objective-c - Iphone uitextfield 自动格式，如联系人应用程序标签问题

> ID：15374036
> 
> 赞同：0
> 
> 时间：2013-03-12T23:09:32.063
> 
> 标签：objective-c, ios6, uitextfield

我的 iphone 上有一个表单屏幕，我正在尝试复制 Iphone 联系人应用程序，它将自动完成以下电话号码格式：(233)323-2323。

我非常接近我能够在文本字段中看到格式更新，但其他 4 个文本字段现在不起作用。我无法编辑它们。我将其缩小到 shouldchangecharactersinrange 函数。

请看下面的代码。

谢谢。

```
 quick look at the method:
            - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    if(([textField tag] == 2)){
    int length = [self getLength:textField.text];
    //NSLog(@"Length  =  %d ",length);

    if(length == 10)
    {
    if(range.length == 0)
    return NO;
    }

    if(length == 3)
    {
    NSString *num = [self formatNumber:textField.text];
    textField.text = [NSString stringWithFormat:@"(%@) ",num];
    if(range.length > 0)
    textField.text = [NSString stringWithFormat:@"%@",[num substringToIndex:3]];
    }
    else if(length == 6)
    {
    NSString *num = [self formatNumber:textField.text];
    //NSLog(@"%@",[num  substringToIndex:3]);
    //NSLog(@"%@",[num substringFromIndex:3]);
    textField.text = [NSString stringWithFormat:@"(%@) %@-",[num  substringToIndex:3],[num substringFromIndex:3]];
    if(range.length > 0)
    textField.text = [NSString stringWithFormat:@"(%@) %@",[num substringToIndex:3],[num substringFromIndex:3]];
    }
    return YES;

    }else if([textField tag] != 1){

    return NO;

    }

    }

    -(NSString*)formatNumber:(NSString*)mobileNumber
    {

    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    NSLog(@"%@", mobileNumber);

    int length = [mobileNumber length];
    if(length > 10)
    {
    mobileNumber = [mobileNumber substringFromIndex: length-10];
    NSLog(@"%@", mobileNumber);

    }

    return mobileNumber;
    }

    -(int)getLength:(NSString*)mobileNumber
    {

    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    int length = [mobileNumber length];

    return length;

    }

    Firstcontroller.h

    @interface FirstTVContoller : UIViewController <UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate, UIPickerViewDataSource,UIPickerViewDelegate>{
    NSMutableArray *items;
    NSMutableArray *titles;
    NSMutableArray *section2items;
    NSMutableArray *dataArray;
    UITableView *table;
    contactTitle *title;

    //launch title picker
    UIPickerView *titlePicker;
    UILabel *titleLabel;
    UITextField *titleField;
    UIActionSheet *actionSheet;
    UIPickerView *pickerView;
    UITextField *textField;

    UITextField *FirstnameTextfield;
    UITextField *LastnameTextfield;
    UITextField *CompanyTextfield;

    UITextField *phoneTextfield;

    //the scrollview
    UIScrollView *scrollview;

    }
    //attributes for title picker
    @property (strong, nonatomic) NSArray * titlecategories;
    @property (strong, nonatomic) NSArray * titleidSlot;

    @end

    FirstTVController.m
    //
    //  FirstTVContoller.m
    //  TwoTableViews

    @implementation FirstTVContoller
    @synthesize titleidSlot;
    @synthesize titlecategories;

    - (BOOL) connectedToNetwork
    {
    // Create zero addy
    struct sockaddr_in zeroAddress;
    bzero(&zeroAddress, sizeof(zeroAddress));
    zeroAddress.sin_len = sizeof(zeroAddress);
    zeroAddress.sin_family = AF_INET;

    // Recover reachability flags
    SCNetworkReachabilityRef defaultRouteReachability = SCNetworkReachabilityCreateWithAddress(NULL, (struct sockaddr *)&zeroAddress);
    SCNetworkReachabilityFlags flags;

    BOOL didRetrieveFlags = SCNetworkReachabilityGetFlags(defaultRouteReachability, &flags);
    CFRelease(defaultRouteReachability);

    if (!didRetrieveFlags)
    {
    //NSLog(@"Error. Could not recover network reachability flags");
    return NO;
    }

    BOOL isReachable = flags & kSCNetworkFlagsReachable;
    BOOL needsConnection = flags & kSCNetworkFlagsConnectionRequired;
    BOOL nonWiFi = flags & kSCNetworkReachabilityFlagsTransientConnection;

    NSURL *testURL = [NSURL URLWithString:SERVERNAME];
    NSURLRequest *testRequest = [NSURLRequest requestWithURL:testURL  cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:20.0];
    NSURLConnection *testConnection = [[NSURLConnection alloc] initWithRequest:testRequest delegate:self];

    return ((isReachable && !needsConnection) || nonWiFi) ? (testConnection ? YES : NO) : NO;

    }

    -(void)viewDidLoad{
    [super viewDidLoad];

    //    scrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 300, 500)];
    //    scrollview.pagingEnabled = YES;
    //    
    //    //[scrollview addSubview:self.view];
    //    [self.view addSubview:scrollview];

    table.scrollEnabled = YES;
    dataArray = [[NSMutableArray alloc] init];
    titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 290, 30)];

    //dropper
    titleField = [[UITextField alloc] initWithFrame:CGRectMake(10, 2, 300, 30)];
    titleField.layer.cornerRadius = 8;
    titleField.backgroundColor = [UIColor clearColor];

    NSArray *firstItemsArray = [[NSArray alloc] initWithObjects:@"1",@"2", nil];

    NSDictionary *firstItemsArrayDict = [NSDictionary dictionaryWithObject:firstItemsArray forKey:@"data"];
    [dataArray addObject:firstItemsArrayDict];

    //Second section dat
    NSArray *secondItemsArray = [[NSArray alloc] initWithObjects:@"1", nil];
    NSDictionary *secondItemsArrayDict = [NSDictionary dictionaryWithObject:secondItemsArray forKey:@"data"];
    [dataArray addObject:secondItemsArrayDict];

    NSArray *thirdItemsArray = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
    NSDictionary *thirdItemsArrayDict = [NSDictionary dictionaryWithObject:thirdItemsArray forKey:@"data"];
    [dataArray addObject:thirdItemsArrayDict];

    NSLog(@"the dataArray%@",dataArray);

    if([self connectedToNetwork]){

    dispatch_async(kBgQueue, ^{

    //build the url of strings
    FULLURL = [SERVERNAME stringByAppendingFormat:ushTitleLink];
    //create the url
    NSURL *url = [[NSURL alloc] initWithString:FULLURL];
    //NSLog(@"here title url%@",url);

    //get the data from the url
    NSData* data = [NSData dataWithContentsOfURL: url];
    NSLog(@"here%@",data);

    //get the data from the url
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    NSLog(@"titleid:%@",TITLEID);
    NSLog(@"title categories:%@",titlecategories);

    });

    [table setBounces:NO];

    }else{

    dispatch_async(dispatch_get_main_queue(), ^ {
    UIAlertView *alert = [[UIAlertView alloc]
    initWithTitle: @"Please Check your internet connection"
    message:@"Enable your internet connection"
    delegate: nil
    cancelButtonTitle:@"OK"
    otherButtonTitles:nil];
    [alert show];
    });
    }

    }

    -(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
    {
    return [dataArray count];
    }

    -(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
    {
    //Number of rows it should expect should be based on the section
    NSDictionary *dictionary = [dataArray objectAtIndex:section];
    NSArray *array = [dictionary objectForKey:@"data"];
    return [array count];

    }

    - (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    if(indexPath.section == 1){
    cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"longdropper300.png"]];

    }
    else{
    cell.backgroundColor = [UIColor whiteColor];
    }
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    textField = [[UITextField alloc] initWithFrame:CGRectMake(15, 10, 290, 30)];

    static NSString *cellValue = @"Cell";
    UITableViewCell *cell =nil;

    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellValue];
    }
    cell.selectionStyle = UITableViewCellSelectionStyleGray;

    if ([indexPath section] == 0) {

    //cellValue=[items objectAtIndex:indexPath.row];
    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.selectionStyle= UITableViewCellSelectionStyleNone;
    //textField.tag = 1;
    textField.adjustsFontSizeToFitWidth = YES;
    textField.textColor = [UIColor blackColor];

    if(indexPath.section == 0){
    //textfield for email
    if ([indexPath row] == 0) {
    textField.tag = 1;
    textField.text = EMAIL;
    textField.textColor= [UIColor blackColor];
    textField.placeholder = @"Email: example@gmail.com";
    textField.keyboardType = UIKeyboardTypeEmailAddress;
    textField.returnKeyType = UIReturnKeyNext;

    }
    //textfield for phone number
    else {
    textField.tag = 2;

    if ([PHONENUMBER isEqual: [NSNull null]] && PHONENUMBER == nil && PHONENUMBER == NULL && [PHONENUMBER isEqual: @""]){
    NSLog(@"phone is empty%@",PHONENUMBER);
    //[PHONENUMBER isEqual:@"frank"];

    }else{
    NSLog(@"phone is not empty%@",PHONENUMBER);
    textField.text = PHONENUMBER;

    }

    textField.placeholder = @"Phone: (xxx)xxx-xxxx";
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDefault;
    textField.secureTextEntry = NO;
    }
    textField.backgroundColor = [UIColor whiteColor];
    //textField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    //textField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    textField.textAlignment = UITextAlignmentLeft;
    //textField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [textField setEnabled: YES];
    textField.delegate = self;
    [cell addSubview:textField];

    }
    }
    if(indexPath.section == 1){

    [titleField setTextColor:[UIColor whiteColor]];
    titleField.tag = 3;
    titleField.placeholder = @"Select Contact Title";
    titleField.returnKeyType = UIReturnKeyNext;

    //titleField == textField.tag = 3;
    if ([TITLENAME isEqual: [NSNull null]]){
    NSLog(@"titlename is empty%@",TITLENAME);

    }else{
    NSLog(@"titlename is not empty%@",TITLENAME);
    titleField.text = TITLENAME;
    }

    titleField.keyboardType = UIKeyboardTypeDefault;
    titleField.returnKeyType = UIReturnKeyDone;
    titleField.secureTextEntry = NO;
    titleField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    titleField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    titleField.textAlignment = UITextAlignmentCenter;
    titleField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [titleField setEnabled: NO];
    titleField.delegate = self;

    [cell addSubview:titleField];

    NSLog(@"here is the titlename%@",TITLENAME);

    }

    if(indexPath.section == 2){

    if ([indexPath row] == 0) {

    textField.tag = 4;
    textField.placeholder = @"First Name";
    cell.selectionStyle= UITableViewCellSelectionStyleNone;

    if ([FIRSTNAME isEqual: [NSNull null]]){
    NSLog(@"firstname is empty%@",FIRSTNAME);
    textField.text = @"";

    }else{

    textField.text = FIRSTNAME;

    }

    textField.keyboardType = UIKeyboardTypeEmailAddress;
    textField.returnKeyType = UIReturnKeyNext;
    }

    if([indexPath row] == 1){
    textField.tag = 5;
    textField.placeholder = @"Last Name";

    if ([LASTNAME isEqual: [NSNull null]]){
    NSLog(@"lastname is empty%@",LASTNAME);
    textField.text = @"";

    }else{
    textField.text = LASTNAME;

    }
    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyNext;
    //textField.secureTextEntry = NO;

    }

    if([indexPath row] == 2){

    textField.tag = 6;
    textField.placeholder = @"Company";

    if ([COMPANY isEqual: [NSNull null]]){
    NSLog(@"company is empty%@",COMPANY);
    textField.text = @"";
    }
    else{
    textField.text = COMPANY;
    }

    textField.keyboardType = UIKeyboardTypeDefault;
    textField.returnKeyType = UIReturnKeyDone;
    textField.secureTextEntry = NO;

    }

    //]textField.backgroundColor = [UIColor whiteColor];
    textField.autocorrectionType = UITextAutocorrectionTypeNo; // no auto correction support
    textField.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support
    textField.textAlignment = UITextAlignmentLeft;
    textField.clearButtonMode = UITextFieldViewModeNever; // no clear 'x' button to the right
    [textField setEnabled: YES];
    textField.delegate = self;
    [cell addSubview:textField];

    }

    return cell;
    }

    //Change the Height of title cell drop down
    -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*)indexPath
    {
    if (indexPath.section == 1) {
    if (indexPath.row == 0) {
    return 30;
    }
    }
    return 45;
    }

    - (BOOL)textFieldShouldEndEditing:(UITextField *)textField{

    if(([textField tag] == 1)){

    NSString *emailRegEx = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];
    //Valid email address

    if ([emailTest evaluateWithObject:textField.text] == YES)
    {

    EMAIL = [textField.text copy];
    NSLog(@"here is the email%@",EMAIL);
    }
    else
    {

    UIAlertView *alert = [[UIAlertView alloc]

          initWithTitle: @"Bad Email"
          message: @"Please Re-enter the email address with a valid email"
          delegate: nil
          cancelButtonTitle:@"OK"
          otherButtonTitles:nil];
    [alert show];
    textField.text =  nil;
    NSLog(@"email not in proper format");
    }

    }

    if(([textField tag] == 2)){

    //NSString *phoneRegex = @"[235689][0-9]{6}([0-9]{3})?";
    //NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex];
    //valid email address

    //if ([phoneTest evaluateWithObject:textField.text] == YES)
    // {
    //if(PHONENUMBER != nil){

    NSString *tempString = [textField.text copy];

    NSString *unformatted = tempString;
    NSLog(@"unformatted phonenumber%@",unformatted);

    NSArray *stringComponents = [NSArray arrayWithObjects:[unformatted substringWithRange:NSMakeRange(0, 3)],
                 [unformatted substringWithRange:NSMakeRange(3, 3)],
                 [unformatted substringWithRange:NSMakeRange(6, [unformatted length]-6)], nil];

    NSString *formattedString = [NSString stringWithFormat:@"(%@)%@-%@", [stringComponents objectAtIndex:0], [stringComponents objectAtIndex:1], [stringComponents objectAtIndex:2]];
    NSLog(@"Formatted Phone Number: %@", formattedString);

    PHONENUMBER = formattedString;

    NSLog(@"here is the phone number %@",PHONENUMBER);
    // }
    //        else
    //        {
    //            NSLog(@"Phone Number Invalid");
    //            UIAlertView *alert = [[UIAlertView alloc]
    //                                  initWithTitle: @"xxx-xxx-xxxx"
    //                                  message: @"Please enter a valid phone number"
    //                                  delegate: nil
    //                                  cancelButtonTitle:@"OK"
    //                                  otherButtonTitles:nil];
    //            [alert show];
    //            textField.text =  nil;
    //        }
    }

    if(([textField tag] == 4)){

    FIRSTNAME = [textField.text copy];
    NSLog(@"here is the firstName%@",FIRSTNAME);
    }
    if(([textField tag] == 5)){

    LASTNAME = [textField.text copy];
    NSLog(@"here is the Last Name%@",LASTNAME);
    }

    if(([textField tag] == 6)){

    COMPANY = [textField.text copy];
    NSLog(@"here is the Company%@",COMPANY);
    }

    return YES;

    }

    -(BOOL)textFieldShouldReturn:(UITextField*)textField;
    {
    NSInteger nextTag = textField.tag + 1;
    // Try to find next responder
    UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];
    if (nextResponder) {

    // Found next responder, so set it.
    [nextResponder becomeFirstResponder];
    } else {
    // Not found, so remove keyboard.
    [textField resignFirstResponder];
    }
    return NO; // We do not want UITextField to insert line-breaks.
    }

    - (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                 options:kNilOptions
                                   error:&error];

    title = [[contactTitle alloc] initWithDictionary:json];

    //NSLog(@"here is the dictionary from json: %@", json);
    NSLog(@"here is title that was the json %@", title);
    NSLog(@"here is the title from json: %@", title.cTitle);
    NSLog(@"here is the title id from json %@", title.cTitleID);
    }

    //PickerViewController.m
    - (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    dispatch_queue_t downloadQueue = dispatch_queue_create("data loader", NULL);

    dispatch_async(downloadQueue, ^{

    TITLENAME =  [title.cTitle objectAtIndex:row], row;
    //NSLog(@"here is the selected title%@", TITLENAME);

    TITLEID =  [title.cTitleID objectAtIndex:row], row;
    //NSLog(@"here is the selected title%@", TITLEID);

    });

    //thePickerView.hidden = YES;

    }

    //PickerView
    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

    return 1;
    }

    - (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

    return [title.cTitle count];
    }

    - (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [title.cTitle
    objectAtIndex:row];
    }

    - (void)fetchedContactIDData:(NSData *)responseData {
    //parse out the json data

    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                 options:kNilOptions
                                   error:&error];

    NSLog(@"here is the login info from json: %@", json);
    // NSString *FALSELOGIN;

    CONTACTID = [json valueForKey:@"contactid"];
    NSLog(@"CONTACT ID: %@", CONTACTID);

    // LOGINID = [json valueForKey:@"login"];
    // NSLog(@"LOGIN ID: %@", LOGINID);

    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    //get the country selected
    //NSString *selectedCell = nil;

    if(indexPath.section == 1){

    titleField.text = @"Select Contact Title";
    NSLog(@"you selected:%@",TITLENAME);

    actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                          delegate:nil
                 cancelButtonTitle:nil
            destructiveButtonTitle:nil
                 otherButtonTitles:nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

    pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];

    pickerView.showsSelectionIndicator = YES;
    pickerView.dataSource = self;
    pickerView.delegate = self;

    [actionSheet addSubview:pickerView];

    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Cancel"]];
    closeButton.momentary = YES;
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blackColor];
    [closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];
    [actionSheet addSubview:closeButton];

    //[actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];
    [actionSheet showInView:self.view];
    [actionSheet setBounds:CGRectMake(0, 0, 320, 485)];

    }else{

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    }

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    }

    - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    if(([textField tag] == 2)){
    int length = [self getLength:textField.text];
    //NSLog(@"Length  =  %d ",length);

    if(length == 10)
    {
    if(range.length == 0)
    return NO;
    }

    if(length == 3)
    {
    NSString *num = [self formatNumber:textField.text];
    textField.text = [NSString stringWithFormat:@"(%@) ",num];
    if(range.length > 0)
    textField.text = [NSString stringWithFormat:@"%@",[num substringToIndex:3]];
    }
    else if(length == 6)
    {
    NSString *num = [self formatNumber:textField.text];
    //NSLog(@"%@",[num  substringToIndex:3]);
    //NSLog(@"%@",[num substringFromIndex:3]);
    textField.text = [NSString stringWithFormat:@"(%@) %@-",[num  substringToIndex:3],[num substringFromIndex:3]];
    if(range.length > 0)
    textField.text = [NSString stringWithFormat:@"(%@) %@",[num substringToIndex:3],[num substringFromIndex:3]];
    }
    return YES;

    }else if([textField tag] != 1){

    return NO;

    }

    }

    -(NSString*)formatNumber:(NSString*)mobileNumber
    {

    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    NSLog(@"%@", mobileNumber);

    int length = [mobileNumber length];
    if(length > 10)
    {
    mobileNumber = [mobileNumber substringFromIndex: length-10];
    NSLog(@"%@", mobileNumber);

    }

    return mobileNumber;
    }

    -(int)getLength:(NSString*)mobileNumber
    {

    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    int length = [mobileNumber length];

    return length;

    }

    - (void)dismissActionSheet:(id)sender{
    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
    //pickerButton.titleLabel.text = TITLENAME;
    //titleLabel.text= TITLENAME;
    titleField.text = TITLENAME;
    [titleLabel reloadInputViews];
    }

    - (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    [titlePicker removeConstraints:titlePicker];
    [titlePicker removeFromSuperview];

    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:17:31.740

查看您的代码后，我发现下面看到的一件事是问题所在

```
 if(([textField tag] == 2)){

    //something
    return YES;
    }
    else if([textField tag] != 1){

    return NO;

    } 
```

在 else if block 你保持返回 NO 这意味着它不需要任何输入文本，将其更改为返回 YES 它会工作。

# c# - 检查 ExecuteScalar 结果是否存在的最有效方法是什么？

> ID：15374038
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:09:44.067
> 
> 标签：c#, sql-server-ce

我看到了这段代码：

```
object objvalid = cmd.ExecuteScalar();
//made it this far - must not have thrown an exception
retVal = true; 
```

...但我认为其中一个可能会更好：

```
object objvalid = cmd.ExecuteScalar();
retVal = (null != objvalid); 
```

...

```
Int32 anybodyThere = (Int32) cmd.ExecuteScalar();
retVal = anybodyThere > 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:16:23.180

我想你回答了你自己的问题。你不能比这更好

```
object objvalid = cmd.ExecuteScalar();
retVal = (null != objvalid); 
```

但是，从您的评论看来，您真正想要的是知道表上是否存在列名。为此，我建议您考虑使用[`DbDataAdapter.FillSchema`](http://msdn.microsoft.com/en-us/library/152bda9x.aspx)or[`DbConnection.GetSchema`](http://msdn.microsoft.com/en-us/library/22936zd1.aspx)代替。这两个选项都允许您针对所有列对数据库执行单个查询，而不是为每一列重新查询数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:23:26.527

首先，您的方法在效率方面没有任何（可衡量的）差异，在这种情况下它是无关紧要的。

你想检查什么？

*   If it can return `null` and you want to know that, check that. Then your second aproach is the best.
*   If the query returns a numeric value (e.g. from `COUNT`) and you want to know if it's greater than zero, just check that. Then the last approach is fine.

However, you first approach is not good practise, [don't rely on exceptions](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control) in your normal flow of control.

# html - Chrome 中的 SVG 路径剪切问题

> ID：15374044
> 
> 赞同：1
> 
> 时间：2013-03-12T23:10:14.407
> 
> 标签：html, css, svg, clipping

我遇到了一个似乎影响 Chrome 但不影响 Firefox 的剪辑问题。

火狐：

![工作的 Firefox 图像](../Images/447e7fee93cedcfc69d095fcc2eefbd5.png)

铬合金：

![非工作 Chrome 图像](../Images/1d783b704bb641f471076fac2b5233d0.png)

这是我的带有定义的 SVG 标签：

```
<svg width="0" height="0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">

    <g>
        <clipPath id="c3">
            <polygon points="64.405,221.5 1.207,111.5 64.405,1.5 190.802,1.5 254,111.5 190.802,221.5"/>
        </clipPath>
    </g>

    <defs>
        <g id="fullHex">
            <polyline points="64.405,221.5 1.207,111.5 64.405,1.5 190.802,1.5 254,111.5 190.802,221.5 64.405,221.5" style="fill:none; stroke:rgba(60,158,194,.9); stroke-width:10" />
        </g>
    </defs>
</svg> 
```

这是我的六边形容器的 html：

```
<div id="hexImageContainer">

    <div id="ProfileImg1Container" class="ProfileImgContainer">
        <div id="ProfileImg1" class="imgHolder clip3">
            <svg width="100%" height="100%">
                <use xlink:href = "#fullHex"/>
            </svg>
        </div>
    </div>

    <div id="ProfileImg2Container" class="ProfileImgContainer">
        <div id="ProfileImg2" class="imgHolder clip3">
            <svg width="100%" height="100%">
                <use xlink:href = "#fullHex"/>
            </svg>
        </div>
    </div> 

    <div id="ProfileImg3Container" class="ProfileImgContainer">                       
        <div id="ProfileImg3" class="imgHolder clip3">
            <svg width="100%" height="100%">
                <use xlink:href = "#fullHex"/>
            </svg>
        </div>
    </div>

</div> 
```

还有我的 CSS：

```
.clip3
{ 
    clip-path: url(#c3); 
    -webkit-clip-path: url(#c3); 
}

#ProfileImg1Container
{
    left: 200px;
    top: 28px;
}

.ProfileImgContainer
{
    width: 256px;
    height: 222px;
    position: absolute;
}

#hexImageContainer 
{
    background: url("HexShadow.png") no-repeat 0 0 scroll;
    position:relative;
    display:block;
    width: 461px;
    height: 495px;
    top:-228px;
    left:-11px;
} 
```

如您所见，六边形图像根本不会出现在 Chrome 中。还值得注意的是 A、B 和 C 框的内容也没有显示出来。

哇！所以我只是缩小了 Chrome 并发生了这种情况：

![缩小铬](../Images/e70c060941c359cf10d51ffc33795290.png)

有谁知道我需要做什么才能让这种剪辑效果在 Chrome 中正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:28.297

好吧，由于这篇文章的浏览量并不多，我决定从不同的角度来解决这个问题，并看到了一种使用 CSS3 旋转创建这些形状的方法。

[http://jsfiddle.net/kizu/bhGn4/](http://jsfiddle.net/kizu/bhGn4/)

CSS

```
.hexagon 
{
    overflow: hidden;
    visibility: hidden;
    -webkit-transform: rotate(120deg);
       -moz-transform: rotate(120deg);
         -o-transform: rotate(120deg);
            transform: rotate(120deg);
    cursor: pointer;
}
.hexagon-in1 
{
    overflow: hidden;
    width: 100%;
    height: 100%;
    -webkit-transform: rotate(-60deg);
       -moz-transform: rotate(-60deg);
         -o-transform: rotate(-60deg);
            transform: rotate(-60deg);
}
.hexagon-in2 
{
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-position: 50%;
    background-image: url(http://placekitten.com/240/240);
    visibility: visible;
    -webkit-transform: rotate(-60deg);
       -moz-transform: rotate(-60deg);
         -o-transform: rotate(-60deg);
            transform: rotate(-60deg);
} 
```

HTML：

```
<div class="hexagon hexagon1">
    <div class="hexagon-in1">
        <div class="hexagon-in2">
        </div>
    </div>
</div> 
```

# javascript - 如何在 CouchDB/Node.js 中使用 Cradle 删除键值对？

> ID：15374045
> 
> 赞同：0
> 
> 时间：2013-03-12T23:10:18.547
> 
> 标签：javascript, node.js, couchdb, cradle

我一直在与couchDB 客户端Cradle 合作很多。但是，我有一个充满键值对的文档，我试图删除其中的特定行。

在[文档中，](https://github.com/cloudhead/cradle)我找不到不包括删除整个文档或使用空值更新它的删除方法。谁能指出我正确的方向？我觉得这很可能是很多人遇到的一个非常简单的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:49:29.257

在 CouchDB 中，不支持部分文档更新（对此的支持每隔一段时间就会讨论一次，但由于没有公认的修补 JSON 的方法，所以它永远不会走得太远），所以你必须更新整个文档删除不需要的键/值对的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:03:17.263

好的，我找到了一个可以解决这个问题的解决方案。

与其制作一个包含键值对列表的文档，不如制作一个包含一个字段的文档，并为它的值插入键值对的 JSON。这样，您可以提取值、删除字段并将其保存回原始值，而无需重新创建整个文档。

下面是一个使用 Cradle 的示例：

```
db.get('document', function (err, doc) {
  var inside_key_values = doc.key_value_pair;

  delete inside_key_values[key_to_delete];

  db.merge("document", {
        key_value_pair: inside_key_values
      }, function (err, res) {
        console.log('New key value pairs saved')
    });

}); 
```

这一切都是基于@djc 对 couchDB 端缺乏支持的强烈回应。希望那里的其他人发现这种解决方法很有价值。

# java - 如何覆盖另一个实例的注入

> ID：15374050
> 
> 赞同：1
> 
> 时间：2013-03-12T23:10:31.300
> 
> 标签：java, inversion-of-control, guice

我有一门我无法更改的课程：

```
class SomeBean
{
   @Inject private Dep1 dep1;
   @Inject private Dep2 dep2;
   ...
   @Inject private DepN depN;
} 
```

我有我的课：

```
class MyBean
{
   @Inject@Named("bean1") private SomeBean bean1;
   @Inject@Named("bean2") private SomeBean bean2;
} 
```

如何进行模块配置，以便由具有不同 dep2 实例`bean1`的`bean2`不同实例注入，但所有其他依赖项都相同？

如果我使用的是 spring，我可以在上下文文件中创建一个 bean，例如：

```
 <bean class="MyBean">
     <property name="bean1">
       <bean class="SomeBean">
         <property name="dep2" ref="dep2InstanceA"/>
       </bean>
     </property>
     <property name="bean2">
       <bean class="SomeBean">
         <property name="dep2" ref="dep2InstanceB"/>
       </bean>
     </property>
   </bean> 
```

这样我就明确地覆盖了一个属性，所有其他属性都是自动装配的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:22:41.190

您需要使用[PrivateModules](https://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/PrivateModule.html)阅读有关[如何构建两个相似但略有不同的对象树？](http://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions).

一些伪代码给你一个感觉：

```
class Bean1Module extends PrivateModule
   bind(Dep2.class).to(Dep2A.class)
   bind(SomeBean.class)
   expose(SomeBean.class).annotatedWith("bean1")

class Bean2Module extends PrivateModule
   bind(Dep2.class).to(Dep2B.class)
   bind(SomeBean.class)
   expose(SomeBean.class).annotatedWith("bean2") 
```

它的代码行数可能比 Spring xml 行多一点，但这是类型安全的，代码完整，无需任何插件，您甚至可以在模块中放置一些逻辑等；）

# ios - 使 UIView 适合屏幕

> ID：15374051
> 
> 赞同：2
> 
> 时间：2013-03-12T23:10:32.033
> 
> 标签：ios, uiview, uikit

我想为应用程序添加纵向。有没有办法将 UIView（在 xib 中创建）缩小或适合屏幕？

我在 xib 文件中有横向大小的视图，现在想将它们设置为与使用 Interface Builder 拉伸（中心块）相反。

![在此处输入图像描述](../Images/8c028aedd1a25780e0b60b17ff2aaead.png)

或者这在代码中是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:14:00.263

在代码中，您可以使用`self.myView.frame = self.view.bounds;`. 坚持就是这样，`self.myView.autoresizingMask = UIViewAutoresizingStretchableWidth | UIViewAutoresizingStretchableHeight;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:48:47.083

## 如果您将此视图添加到`self.view`XIB 中，则有两种可能性，

* * *

1.  如果您在 XIB 中创建了全尺寸视图，那么您必须打开所有自动调整大小的蒙版以适合屏幕。
2.  如果您没有在 nib 中创建全尺寸视图，那么您必须将此视图的原点设置为 x=0 和 y=0。像您所做的那样设置自动调整大小的蒙版。

## 如果您将此视图添加到`self.view`使用代码中，那么您必须手动设置框架。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T07:20:25.340

Swift 3 的解决方案：

```
//define view size
self.mTableView.frame = self.view.bounds
//define resizing
self.mTableView.autoresizingMask = [UIViewAutoresizing.flexibleWidth, UIViewAutoresizing.flexibleHeight] 
```

# css - 用 HTML 修复页面中间的图像

> ID：15374057
> 
> 赞同：0
> 
> 时间：2013-03-12T23:10:45.767
> 
> 标签：css, html

我通常不处理 HTML，我认为这应该很容易，但似乎并非如此。我想要的只是在页面中间显示的图像和一些文本。我可以将图像和文本水平对齐到中间，但我不能垂直对齐。我终于找到了一个解决方案，我想知道为什么这是有效的，是否有更好的方法。

代码版本 1（不工作）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">   
<body>
    <div style="width:100%; height:100%; text-align:center">
      <img src="http://dummyimage.com/100x50/fc0/000000.png"
        style="float:middle">
        <br>
        Hello World!
     </div>    
   </body> 
 </html> 
```

虽然我读到只有在我尝试过的表格时才使用表格：

代码版本 2（不工作）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <body>
  <table width="100%" border="0" height="100%" align="CENTER">
    <tr><td align="CENTER">  
        <img src="http://dummyimage.com/100x50/fc0/000000.png"
        style="float:middle">
        <br>
        Hello World!
    </td></tr> 
     </table>
   </body>
</html> 
```

代码版本 3（工作，为什么？）：

```
<html>
 <body>
  <table width="100%" border="0" height="100%" align="CENTER">
    <tr><td align="CENTER">  
        <img src="http://dummyimage.com/100x50/fc0/000000.png"
        style="float:middle">
        <br>
        Hello World!
    </td></tr> 
     </table>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:23:22.897

以下是垂直和水平居中的好方法。

[http://demo.tutorialzine.com/2010/03/centering-div-vertically-and-horizo​​ntally/demo.html](http://demo.tutorialzine.com/2010/03/centering-div-vertically-and-horizontally/demo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:12:20.707

为您的图像设置宽度并使用：

```
<img width:"900px" style="margin:0 auto"> 
```

这意味着顶部和底部的边距为 0，两侧的边距为自动。

编辑：不要使用表格。就用这个：

```
<div style="width:900px;margin:0 auto">
<img width:"900px">
your text
</div> 
```

如果你想把整个事情放在中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:20:48.713

第三个版本没有 doctype 声明，在大多数浏览器中会触发“[怪癖模式](http://gutfeldt.ch/matthias/articles/doctypeswitch.html)”。这意味着它们不像在“标准模式”中那样严格遵循规范，这会导致您看到的行为。虽然它可能是你想要得到的，但它在技术上并不正确。

简而言之，没有*标准*的方法可以在 HTML/CSS 中垂直居中。

# meteor - 在 Meteor 中导入 JSON 文件

> ID：15374066
> 
> 赞同：37
> 
> 时间：2013-03-12T23:11:38.637
> 
> 标签：meteor

我有一个要加载的 data.json 文件，并且已放在 lib/ 文件夹中。我应该怎么做才能将该 JSON 加载到服务器中的变量中？谢谢

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-13T00:15:12.967

您可以通过三种方式来解决此问题，这取决于您最熟悉的方式和您的用例。

**第一种是将其存储为 JS 对象**

如果您的 json 数据是`{ "name":"bob" }`您可以`myjson = {"name":"bob"}`在`.js`文件`/lib`夹中的文件中使用并在需要时调用`myjson`它。

**使用 http 调用**

您需要`Meteor http`通过`meteor add http`.

*服务器端代码*

```
myobject = HTTP.get(Meteor.absoluteUrl("/myfile.json")).data; 
```

*客户端代码*

```
HTTP.get(Meteor.absoluteUrl("/myfile.json"), function(err,result) }
    console.log(result.data);
}); 
```

另一种方法是获取 json 文件 ajax 样式（尽管您必须将它放在您的`/public`文件夹中并使用`Meteor.http`它来调用它。

**直接读取文件**

最后，您可以直接读取文件，将您的文件存储`myfile.json`在`private`项目根目录中的目录中：

```
var myjson = {};
myjson = JSON.parse(Assets.getText("myfile.json")); 
```

如果您想在客户端访问它，则必须将其与 Meteor.methods 和 Meteor.call 接口

所以无论你想要哪种方式，第一种是最简单的，但我不太确定你想如何使用它或者你是否想选择文件或其他东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:14:40.333

由于我对这一切都不熟悉，我怀疑这不是*正确*的方法，但这对我有用......

三个coffee脚本文件，两个在server目录下：

服务器.咖啡：

```
Meteor.startup ->
    insertSample = (jsondata) ->
      Fiber(->
        Documents.insert
          name: "Sample doc"
          data: jsondata
      ).run()        
    if Documents.find().count() is 0
      insertJSONfile("tests/test.json", insertSample) 
```

并插入JSONfile.coffee：

```
fs = __meteor_bootstrap__.require("fs")

insertJSONfile = (file, insert) ->
  jsondata = undefined
  fs.readFile file, (err, data) ->
    throw err  if err
    jsondata = JSON.stringify(JSON.parse(data))
    insert(jsondata) 
```

和根目录中的model.coffee：

```
@Documents = new Meteor.Collection("documents") 
```

在启动时，这应该加载并将 JSON 文件（在我的情况下，我将其存储在测试目录中）插入到文档集合中的一个字段中。

我很想听听其他人应该如何正确地做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:51:30.207

我假设您希望将 json 内容表示为一个对象，而不是一个简单的字符串。

我使用 js-yaml ( [https://github.com/nodeca/js-yaml](https://github.com/nodeca/js-yaml) )，假设你安装了 npm 包。您也可以手动复制它。

```
yaml = __meteor_bootstrap__.require('js-yaml')
fs = __meteor_bootstrap__.require('fs')
content = fs.readFileSync(file, 'utf8')
object = yaml.load(content) 
```

就是这样！我个人将我的 json 保存到流星集合中。

# java - 尝试在 3 个单独的按钮上打开菜单时，OnClick 会导致强制关闭

> ID：15374070
> 
> 赞同：0
> 
> 时间：2013-03-12T23:12:07.527
> 
> 标签：java, android, eclipse

我已经被几个人指出了正确的方向，但如果没有持续的强制关闭问题，我似乎无法实施建议的源代码。我知道我忽略了一些简单的事情——我真的很感激任何和所有的建议！

（我真正想要做的就是在单击它们时为 3 个按钮显示相同的菜单 - 我觉得我已经在思考/编码这个并且有一种更简单的编码方式 - 或者至少有一个类似的方式我已经完成了下面的实际工作！）

* * *

## 资源

[https://docs.google.com/document/d/1bGpvLHii9G6uFgMMYxeSGGL9_5YiRBp3EgnHZjQgwD8/edit?usp=sharing](https://docs.google.com/document/d/1bGpvLHii9G6uFgMMYxeSGGL9_5YiRBp3EgnHZjQgwD8/edit?usp=sharing)

# php - 将数组数据发布到 Mysql 数据库

> ID：15374077
> 
> 赞同：0
> 
> 时间：2013-03-12T23:12:55.077
> 
> 标签：php, html, mysql

我在会话中有一组成员数据

```
$session_mem_id = $_SESSION['mem_id'];
$member_data  = member_data($session_mem_id, 'mem_id', 'mem_email', 'mem_password', 'mem_address', 'mem_city', 'mem_postcode', 'mem_county', 'mem_country', 'mem_first_name', 'mem_last_name', 'password_recover', 'allow_email', 'admin', 'mem_tel'); 
```

如果我

```
var_dump($member_data);
die(); 
```

它输出

```
array(14) { ["mem_id"]=> string(2) "11" ["mem_email"]=> string(26) "j.hfdfd2@gmail.com" ["mem_password"]=> string(8) "password" ["mem_address"]=> string(16) "41 fdrel Drive" ["mem_city"]=> string(9) "Maifdfd" ["mem_postcode"]=> string(8) "df14 4fS" ["mem_county"]=> string(4) "dfdf" ["mem_country"]=> string(14) "United Kingdom" ["mem_first_name"]=> string(4) "Bert" ["mem_last_name"]=> string(12) "dgfdgd" ["password_recover"]=> string(1) "0" ["allow_email"]=> string(1) "1" ["admin"]=> string(1) "1" ["mem_tel"]=> string(11) "07900186785" } 
```

现在我如何将这些信息解析到我的函数中，因为我可以解析的只有 mem_id、order_id 和 orderdate，其他都是空白的

```
function createTransaction(){
    // Insert into the transactions table
    $query1 = mysql_query("INSERT INTO transactions (mem_id, OrderDate, Ship_Phone, Ship_Address, Ship_City, Ship_County, Ship_PostCode, Ship_Country) VALUES('{$_SESSION['mem_id']}', NOW(), '{$member_data["mem_tel"]}', '{$member_data['mem_address']}', '{$member_data['mem_city']}', '{$member_data['mem_county']}', '{$member_data['mem_postcode']}', '{$member_data['mem_country']}')") or die(mysql_error());
} 
```

# c++ - C++ 链接器错误（LNK 2019：未解析的外部符号）/特定于项目

> ID：15374081
> 
> 赞同：1
> 
> 时间：2013-03-12T23:13:26.393
> 
> 标签：c++, linked-list, linker-errors, visual-studio-debugging, lnk2019

## 主要问题

我正在尝试构建一个涉及链接列表和一些自定义类的家庭作业项目，但是当我构建项目时，我收到以下 3 个链接器错误...

```
1>customerImp.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class linkedListType<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > const &)" (??6@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV01@ABV?$linkedListType@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@@@Z) referenced in function "public: void __thiscall customerType::printRentedVideo(void)" (?printRentedVideo@customerType@@QAEXXZ)
1>testVideoStore.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class linkedListType<class videoType> const &)" (??6@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV01@ABV?$linkedListType@VvideoType@@@@@Z) referenced in function _main
1>testVideoStore.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class linkedListType<class customerType> const &)" (??6@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV01@ABV?$linkedListType@VcustomerType@@@@@Z) referenced in function _main 
```

我做了很多编程，但直到现在还没有遇到过链接器错误，所以我在破译和调试错误时遇到了麻烦。我在下面的链接中的公共 DropBox 中放置了一个带有原始源代码的 zip 文件以及带有“构建”项目的解决方案文件。我在 64 位 Windows 8 计算机上使用 Visual Studio 2012。Build Specs 设置为 Debug / Win32 平台。

[https://dl.dropbox.com/u/101002796/Rinehart-P07v2.zip](https://dl.dropbox.com/u/101002796/Rinehart-P07v2.zip)

### 补充说明：

*   大部分来源是书籍来源，似乎没有错误
*   没有导师的想法。他和我一样一无所知
*   我尝试在 Windows 7 Dev 环境中构建，但没有成功。
*   我已经尝试将所有实现添加到头文件中，仍然是同样的错误
*   我已经尝试了论坛/博客/等中的许多其他解决方案步骤，但 nada 有效

快速帮助将不胜感激，因为我在这个编程项目到期之前完成了大量的微积分，我兼职工作，并且已婚（已婚的人应该理解），所以像这样令人讨厌的小调试问题是一个祸根生产率。

提前一百万谢谢，~Sean R.

# android - Android proguard 错误 com.google.ads.util.i: 和 setMediaPlaybackRequiresUserGesture(boolean)

> ID：15374085
> 
> 赞同：4
> 
> 时间：2013-03-12T23:13:56.380
> 
> 标签：android, proguard, ads

我正在尝试创建一个 APK 文件，但是当我在导出对话框上按 Finish 时，出现错误，并且没有创建 APK。到目前为止在网上找不到任何东西，也许这里有人可以帮忙？错误：

```
Proguard returned with error code 1\. See console
Warning: com.google.ads.util.i: can't find referenced method 'void setMediaPlaybackRequiresUserGesture(boolean)' in class android.webkit.WebSettings
      You should check if you need to specify additional program jars.
Warning: there were 1 unresolved references to program class members.
         Your input classes appear to be inconsistent.
         You may need to recompile them and try again.
         Alternatively, you may have to specify the option 
         '-dontskipnonpubliclibraryclassmembers'.
java.io.IOException: Please correct the above warnings first.
    at proguard.Initializer.execute(Initializer.java:321)
    at proguard.ProGuard.initialize(ProGuard.java:211)
    at proguard.ProGuard.execute(ProGuard.java:86)
    at proguard.ProGuard.main(ProGuard.java:492) 
```

我试图添加

```
-dontskipnonpubliclibraryclassmembers 
```

但没有帮助。我正在使用广告，这是一个普通的 android 应用程序，在模拟器中运行良好。

我的 proguard.config 默认为空

```
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#} 
```

还有我的 project.properties：

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
# 
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

# Project target.
target=android-16 
```

谢谢

ps：这些默认的 android proguard 设置是否足够安全以防止基本的“黑客攻击”？（如果我能让它可行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T11:58:41.117

正如警告消息所示，Google Ads 库引用了您的目标运行时 (android-16) 中不存在的方法。此方法仅存在于 android-17 中。您应该指定 android-17 或更高版本的目标，以便 ProGuard 可以找到方法并正确分析代码。

如果应用程序仍然可以在其他目标上运行，您仍然可以在 AndroidManifest.xml 中指定其他目标。

ProGuard 提供了一些针对静态分析的基本保护：它混淆了标识符并修改了代码的结构。要获得更多保护，您可以考虑其商业兄弟[DexGuard](http://www.saikoa.com/dexguard)，它通过字符串加密、类加密和篡改检测等技术增加了针对静态分析和动态分析的更多保护。没有什么是牢不可破的，所以最终对你和潜在的黑客来说，这是一个经济上的权衡，时间、精力、金钱、收益、专业知识……

（我是 ProGuard 和 DexGuard 的开发者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T23:12:20.367

我已经解决了添加：

```
 -dontwarn com.google.ads.** 
```

之后`-verbose`。例如

```
-optimizationpasses 5                                                                                          -dontusemixedcaseclassnames                                                      
-dontskipnonpubliclibraryclasses                                                 
-dontpreverify                                                                   
-verbose                                                                         
-dontwarn com.google.ads.**                                                      
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
... 
```

# facebook - Facebook FB.api('/me/accounts') 未返回应用程序列表

> ID：15374090
> 
> 赞同：1
> 
> 时间：2013-03-12T23:14:22.857
> 
> 标签：facebook, facebook-php-sdk, facebook-apps

我已经编写了一个检索用户页面列表和应用程序列表的代码，因此我可以制作一个页面选项卡连接器。为此，我使用了 FB.api(/me/accounts)。那是几个月前的事了，而且效果很好。

[https://www.facebook.com/WEBLAB54/app_337216453020586](https://www.facebook.com/WEBLAB54/app_337216453020586)

但突然间，Facebook api 将只显示页面列表，而不是应用程序列表。我已经尝试在网上找到解决方案，但似乎没有人有这个问题？我还去了 facebook 页面以获得 manage_pages 权限，并且文档没有任何变化。

有谁知道是什么问题？

我会放一个 PHP 代码以防万一，但这段代码直到几天前都运行良好。

```
function get_user_applications(){
    $accounts_data =  $this->facebook->api('/me/accounts');
    $accounts_data = $accounts_data["data"];
    for($i=0;$i<sizeof($accounts_data);$i++){
        if($accounts_data[$i]['category'] == "Application")
            $users_apps[]=$accounts_data[$i];
    }
    return  $users_apps;    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:25:25.170

你必须跟上 Facebook 的最新动态 :-)

这一变化早在 12 月就已宣布，自 3 月 6 日起生效：

> 从 /me/accounts/ 中删除应用程序
> 
> 我们将不再在 Graph API 的 /me/accounts/ 下显示应用程序。您可以通过点击 /me/applications/developer/ 访问用户作为开发人员的应用程序列表。

[https://developers.facebook.com/blog/post/2012/12/05/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/12/05/platform-updates--operation-developer-love/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T07:40:00.583

默认情况下，我们将只获得 25 个页面，您必须像下面这样调用 api 来获取所有页面

```
me/accounts/?type=pages&limit=200 
```

这里 200 是一个假设，但您必须指定限制才能获得超过 25 个。

# grep - 使用模式文件和管道中的数据 grepping 不匹配的模式

> ID：15374092
> 
> 赞同：1
> 
> 时间：2013-03-12T23:14:32.013
> 
> 标签：grep, cygwin

我有一个 ignore.txt 文件：

```
cat ignore.txt
clint 
```

当我做：

```
pip freeze | grep -v -f ignore.txt 
```

我得到：

```
GitPython==0.3.2.RC1  
Markdown==2.2.1  
async==0.6.1  
clint==0.3.1  
gitdb==0.5.4  
legit==0.1.1  
push-to-wordpress==0.1  
python-wordpress-xmlrpc==2.2  
smmap==0.8.2 
```

但是当我这样做时：

```
pip freeze | grep -v clint 
```

我确实得到了正确的输出：

```
GitPython==0.3.2.RC1
Markdown==2.2.1
async==0.6.1
gitdb==0.5.4
legit==0.1.1
push-to-wordpress==0.1
python-wordpress-xmlrpc==2.2
smmap==0.8.2 
```

如何使用 grep 和命令行工具实现这一点？

**澄清编辑：**我在 cygwin 中使用 windows，所以我相信这是 GNU grep 2.6.3（来自 grep --version）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:51:08.817

您的语法看起来正确并且适用于我的系统。`ignore.txt`您的文件可能有问题。特别是，检查：

*   您要过滤的单词周围没有前导或尾随空格、制表符等（如上面 Kent 所建议的那样）
*   该文件具有 Unix 行结尾
*   该文件由一个换行符终止

关于后者，[Single Unix Specification](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html)说：

> *pattern_file*中的模式应以`<newline>`.

这意味着没有终止符或具有不同终止符（例如 CR LF）的文件可能会出现意外行为（尽管这可能与系统相关）。

# java - 使用 InetAddress 获取自己的 IP

> ID：15374104
> 
> 赞同：1
> 
> 时间：2013-03-12T23:15:44.000
> 
> 标签：java, android, network-programming, inetaddress

我有一个问题，如果我尝试 InetAddress.getLocalHost() 甚至 InetAddress.getByName(String host) 它每次都会抛出异常，即使对于像 nba.com 这样的已知网站我有点困惑仅供参考，目标设备是一个 android 4.1.1 GS3 和 wifi 和移动网络都打开了。下面的代码

```
 try{
        InetAddress ownIP=InetAddress.getLocalHost();
        System.out.println("IP of my Android := "+ownIP.getHostAddress());
        }catch (Exception e){
            System.out.println("Exception caught ="+e.getMessage());
            String t =  e.getMessage() + "yes";
        } 
```

下面是 System.out

03-12 18:59:52.636: I/System.out(18996): 异常捕获 =null

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:34:06.900

我使用一种棘手的方法来获取自己的 IP。你可以看看它是否对你有帮助

```
String getIP() {
    try {
        Socket socket = new Socket("google.com", 80);
        return socket.getLocalAddress().getHostAddress();
    } catch (Exception e) {

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:02:31.540

我相信我已经发现我的问题基本上是我猜你不允许在 android 的主线程中执行任何网络操作，这以前是可选的，现在是 Honeycomb (API 11) 所必需的，下面是根据谷歌规格。

“为防止阻塞主用户界面线程，Google 建议使用 android.os 包中的 AsyncTask 类：”

所以我只是创建了一个新类 NetTask，它扩展了 AsyncTask 并执行所有网络应用程序，所以现在我的代码可以工作了。IDK 如果其他人都知道，但我想我会发布这个，以防像我这样的新手仍在寻找解决方案:) !!!

谢谢

# xpages - XPages - 从客户端刷新 JDBC 数据

> ID：15374107
> 
> 赞同：1
> 
> 时间：2013-03-12T23:15:54.687
> 
> 标签：xpages, xpages-extlib

我想刷新由客户端 Javascript 触发的重复控件。有趣的是，我的数据源是一个 JDBC 查询，这就是我不只是进行部分刷新的原因。我已经看到有关使用 XHR 请求执行此操作的页面，但我看不到如何刷新 JDBC 数据以捕获新信息。我可以用旧数据刷新重复控件，而不是新数据。

我看到[重复控制刷新错误](https://stackoverflow.com/questions/10517284/repeat-control-refresh-error) ，它谈到可能需要超时，因为运行时不知道新数据。在手动更改数据库中的某些内容并等待一分钟后，我已经运行了 XHR，但仍然有过时的信息。

我可以在 RPC 调用中更新变量（jdbcPendingSummary）吗？如果不能，我可以回调服务器以触发 CSJS 函数内部的刷新吗？

```
<xp:this.data>
    <xe:jdbcQuery connectionName="testDB"
        sqlQuery="EXEC ptoGetPendingRequests #{sessionScope.userID}"
        var="jdbcPendingSummary" />
</xp:this.data>

<xe:jsonRpcService id="ptoRPC" serviceName="ptoRPC">
    <xe:this.methods>
        <xe:remoteMethod name="createNewRequest">
            <xe:this.script><![CDATA[
                javaBeanObject.ptoCreateRequest(#{sessionScope.userID}, startDate, endDate, comment, d1,....,d15);
// Can I update the datasource var here?
            ]]></xe:this.script>
            <xe:this.arguments>
                <xe:remoteMethodArg name="startDate" type="string"></xe:remoteMethodArg>
                ..........
                <xe:remoteMethodArg name="d15" type="number"></xe:remoteMethodArg>
            </xe:this.arguments>
        </xe:remoteMethod>
    </xe:this.methods>
</xe:jsonRpcService>

<xp:scriptBlock id="scriptBlock1">
    <xp:this.value><![CDATA[
    function createNewRequest(startDateID, endDateID, commentID, hiddenDivID, requestID) {

        ptoRPC.createNewRequest(dojo.byId(startDateID).value, dojo.byId(endDateID).value, ........).addCallback( function(response) {
            //  ????? Refreshes the Repeat Control, but has the stale data.
            setTimeout(
                function() {
                    XSP.partialRefreshGet(requestID, {onComplete: function(responseData) {    } })
// Or how about updating the datasource var here?

                }, 8000);
        });
    }
    ]]></xp:this.value>
</xp:scriptBlock> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:55:18.950

虽然这可能不是一个完美的解决方案，但在下面的 JDBC 代码中添加 scope="request" 会导致在 AJAX 调用完成时刷新变量。

```
<xp:this.data>
   <xe:jdbcQuery connectionName="testDB"
       sqlQuery="EXEC ptoGetPendingRequests #{sessionScope.userID}"
       var="jdbcPendingSummary"  scope="request" />
</xp:this.data> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:28:16.607

您可以使用特定数据源的 refresh() 方法来实现。因此，如果您有一个配置了一些 JDBC 查询数据源的面板 - 那么在内部视图面板中，您可以通过以下语法引用和刷新数据：

getComponent('some_panel_id_containing_your_datasource').getData().get(0).refresh();

虽然您可以为面板配置多个数据源 - 对它们的引用从 0 索引开始。

演示该技术的代码片段可能是这样的（如果查询将使用一些计算参数在刷新时呈现不同的数据，则可能更有意义）：

```
<xp:panel id="outerContainer">
    <xp:this.data>
        <xe:jdbcQuery var="jdbcQuery1"
            connectionName="derby1">
            <xe:this.sqlQuery><![CDATA[#{javascript:"select * from users";
            }]]></xe:this.sqlQuery>
        </xe:jdbcQuery>
    </xp:this.data>

    <xp:viewPanel rows="10" id="viewPanel1"
        value="#{jdbcQuery1}" indexVar="idx">
        <xp:viewColumn id="viewColumn1" columnName="id"
            displayAs="link">
            <xp:this.facets>
                <xp:viewColumnHeader xp:key="header"
                    id="viewColumnHeader1" value="ID">
                </xp:viewColumnHeader>
            </xp:this.facets>
            <xp:eventHandler event="onclick"
                submit="true" refreshMode="partial" refreshId="outerContainer">

                <xp:this.action><![CDATA[#{javascript:
                    getComponent('outerContainer').getData().get(0).refresh();
                    }]]>
                </xp:this.action>
            </xp:eventHandler>
        </xp:viewColumn>
    </xp:viewPanel>
</xp:panel> 
```

# directory - 在处理 Directory 类时如何识别 Dart 中的符号链接？

> ID：15374108
> 
> 赞同：0
> 
> 时间：2013-03-12T23:15:56.593
> 
> 标签：directory, dart, symlink

当我在 Dart 中实例化一个目录并且该文件存在时，我如何检查该目录是一个真正的文件夹，还是只是一个符号链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:00:03.183

您可以识别符号链接的方式是路径是否与完整路径不同。Directory 没有`fullPath()`or `fullPathSync()`，但`File.fullPathSync()`适用于目录。所以你可以这样做：

```
bool maybeIsSymlink(String path) {
  var fullPath = new File(path).fullPathSync();
  return path != fullPath;
} 
```

然而，这只在`path`绝对的情况下才能正常工作，并且它的祖先都不是符号链接。要解决这个问题，您可以获取目录父级的完整路径，附加目录名称并进行比较：

```
bool isSymlink(String pathString) {
  var path = new Path(path);

  var parentPath = path.directoryPath;
  var fullParentPath = new File.fromPath(parentPath).fullPathSync();
  var expectedPath = new Path(fullParentPath).append(path.filename).toString();

  var fullPath = new File.fromPath(path).fullPathSync();

  return fullPath != expectedPath;
} 
```

请注意，我没有对此进行测试，但我在 Dart 中处理了很多符号链接，这应该可以工作。如果`pathString`以“/”结尾，则必须将其删除。我通常最终从目录列表中获取路径，因此我在递归目录结构时跟踪预期路径。

您可以在 buildtool 的一个分支中看到`listDirectory()`检测符号链接并将`Symlink`实例与`File`s 和s 一起发送到流的特殊实现： [https ://github.com/dart-lang/buildtool/blob/m4/lib/src/util/](https://github.com/dart-lang/buildtool/blob/m4/lib/src/util/io.dart) [io.dart](https://github.com/dart-lang/buildtool/blob/m4/lib/src/util/io.dart)`Directory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T06:59:03.037

在最前沿，现在有一个静态 FileSystemEntity.isLinkSync(path) 方法可以告诉您某物是否是符号链接；当它是一个损坏的符号链接时也是如此。

[http://api.dartlang.org/docs/bleeding_edge/dart_io/FileSystemEntity.html](http://api.dartlang.org/docs/bleeding_edge/dart_io/FileSystemEntity.html)

对于链接上的操作，我们添加了一个 Link 类。代码现在可供审查：

[https://codereview.chromium.org/12691002](https://codereview.chromium.org/12691002)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:21:43.333

如果您想从命令行检查以验证正在发生的事情，请 ls -al DIRNAME 并在权限部分检查“l”，并检查输出右侧“指向”的内容。

另见人 1 统计

如果您想从 Dart 内部进行检查，我不知道该怎么做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T08:39:33.787

```
FileSystemEntity.typeSync(path) 
```

`FileSystemEntityType`使用其中一个值返回一个

*   `FileSystemEntityType.DIRECTORY`
*   `FileSystemEntityType.FILE`
*   `FileSystemEntityType.LINK`
*   `FileSystemEntityType.NOT_FOUND`

# javascript - JS：确定字符串中出现的次数

> ID：15374114
> 
> 赞同：0
> 
> 时间：2013-03-12T23:16:33.867
> 
> 标签：javascript, arrays, string

有没有办法确定一个字母在另一个字符串中出现的次数？

如果不是，你能确定一个字符串在数组中的次数吗

如果你可以用数组做到这一点，你怎么能拆分2个单词，例如：**你好，世界！**成 2 个单词的数组，如下所示：

```
["Hello", "World"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:18:19.283

当然。想到的一个简单的衬里是

```
var numOccurrences = str.split("<char>").length -1 
```

where 可以替换为您要测试的任何字符（或字符串）

这将在每次出现时拆分字符串，然后将结果数组的长度取为 -1。这会告诉你出现的次数。

如果你想在忽略大写/小写的情况下这样做，你可以使用正则表达式

```
str.match(/<char>/gi).length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:22:08.303

### 一个字母在字符串中出现的次数

这可以找到如下：

```
"Hello World Hello World!".match(/e/g).length    // Will result in 2 
```

/e/g 是匹配字母“e”的[正则表达式。](http://en.wikipedia.org/wiki/Regular_expression)'g' 代表“全局”并获取字符串中的所有出现。

### 数组中的字符串

这可以找到如下：

```
var arrayOfStrings = ["Hello", "World", "Hello", "World"],
    wordCount = 0,
    i;

for (i = 0; i < arrayOfStrings.length; i += 1) {    // Remember to optimise length call
    if (arrayOfStrings[i] === "Hello") {
        wordCount += 1;
    } 
}

console.log(wordCount) // This will log 2 
```

# logging - 事件溯源和记录/重放命令

> ID：15374119
> 
> 赞同：2
> 
> 时间：2013-03-12T23:16:52.033
> 
> 标签：logging, cqrs, event-sourcing, replay

我从未听说过在 CQRS/ES 架构中存储/重放命令，我想问这是一种常见的做法吗？我了解命令和事件之间的区别，但是，可以说，从 QA 的角度来看，重播生产环境中发生的崩溃可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:42:08.063

老实说，怀疑这很常见。

通过在执行命令处理的组件中拥有一些日志基础设施，您可以很容易地重现处理命令的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:25:23.403

我认为在可以从不同子系统发出命令的系统中更常见，并且由于与基础设施相关的问题/效率低下，到达相应命令处理程序的时间顺序与发出它们的时间顺序相反。在这种情况下，命令通常应该以正确的时间顺序重新处理。一个示例可以是停车/房间预订系统，其中用户可以从 Web 客户端或通过发送 SMS 进行预订。

# c++ - c++程序崩溃链表？

> ID：15374123
> 
> 赞同：0
> 
> 时间：2013-03-12T23:17:16.603
> 
> 标签：c++, linked-list

```
 if(tmpPtr->number<tmpPtr->next_number->number)
                {
                    int tmpV1=tmpPtr->next_number->number;
                    int tmpV2=tmpPtr->number;
                    tmpPtr->next_number->number=tmpV2;
                    tmpV2=tmpPtr->number=tmpV1;
                } 
```

这是我到目前为止所尝试的，这应该是对链表进行排序，因为每次都添加成员。但是当我尝试放入第二个节点时编译器崩溃。断点是 if 语句`if(tmpPtr->number<tmpPtr->next_number->number)`。我真的很努力地想弄清楚问题是什么，但不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:25:26.313

您的问题是，在第二次运行时`tmpPtr`指向您的第一个元素，其`next_number`值为`NULL`. 因此，一旦您尝试取消引用它，它基本上会将自身缩减为`NULL`指向`SIGSEGV`.

第一次运行后

```
n->number = input
n->next_number = NULL
h = n
t = n
counter2 = 1 
```

所以从第二个输入开始

```
n->number
n->next_number = NULL
tmpPtr = h // which is the previous n and therefor h->next_number = NULL
tmpPtr->next_number == NULL // this is your problem since you do not check if next_number is a valid pointer 
```

[更新：如果在https://gist.github.com/sahne/c36e835e7c7dbb855076](https://gist.github.com/sahne/c36e835e7c7dbb855076)上传解决方案的（hackish）版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:25:43.153

对于第二次添加，h->next_number 为 NULL，因此在内部 while 循环的第一次迭代中，您取消引用 NULL（h->next_number->number 的别名）。

**编辑**
当您插入第二个项目时：
head == tail，所以 head->next == NULL。
您开始内部循环：
head->number == 第一个插入的项目。
头->下一个 == NULL。
head->next->number == 取消引用 NULL。

# ssl - Windows 8 Phone 客户端证书 HTTPS 身份验证

> ID：15374124
> 
> 赞同：9
> 
> 时间：2013-03-12T23:17:22.033
> 
> 标签：ssl, https, windows-phone-8, wireshark, client-certificates

我正在尝试使用正在开发的 Windows 8 Phone 应用程序中的客户端证书访问安全的 HTTPS 服务器。这根本不起作用，这让我尝试从标准 Web 浏览器访问 HTTPS 服务器，但它也不起作用。我不知道 Internet Explorer 是否可以处理客户端证书。如果它不能处理它们，我会对在 Windows 8 Phone 上运行的 c# .NET 的一些示例代码非常感兴趣，并且能够通过 HTTPS 向 Web 服务提供客户端证书。使用的证书必须存储在 Windows 8 Phone 证书存储中。

它对我不起作用，无论是从我构建的应用程序还是从 Internet Explorer 中。我在 Apache 中设置了客户端身份验证，如下所示：

```
<VirtualHost _default_:443>
DocumentRoot /var/www/htdocs
ServerName norrweb
ServerAdmin you@your.address
ErrorLog logs/error_log
TransferLog logs/access_log
SSLEngine on
SSLCertificateFile    /etc/ssl/server.crt
SSLCertificateKeyFile /etc/ssl/private/server.key
#SSLCACertificatePath    /var/www/conf/ssl.crt
SSLCACertificateFile    /var/www/conf/ssl.crt/ca-bundle.crt
SSLVerifyClient require
SSLVerifyDepth  10
</VirtualHost> 
```

这很好用，在 OSX 中，我可以通过 SSLCACertificateFile 中指定的 CA 选择我的客户端证书问题，其中包含一个自签名的根 CA 和一个中间 CA，而中间 CA 又签署了我在我的 mac 上使用的客户端证书。

我在 Windows 8 Phone (Nokia Lumia 900) 上安装了根 CA、中间 CA 和客户端 CA。电话告诉我每个证书它已成功安装。在我看来，如果手机从不向服务器发送任何证书。是否需要指定哪个证书用于哪个服务器？

可以在 Apache 的 error_log 中读取以下内容：

```
# tail -f /var/www/logs/error_log                                                                                                                                  
[Tue Mar 12 23:46:30 2013] [error] mod_ssl: SSL handshake failed (server norrweb:443, client 10.0.83.232) (OpenSSL library error follows)
[Tue Mar 12 23:46:30 2013] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?]
[Tue Mar 12 23:48:45 2013] [error] mod_ssl: SSL handshake failed (server norrweb:443, client 10.0.83.232) (OpenSSL library error follows)
[Tue Mar 12 23:48:45 2013] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?]
[Tue Mar 12 23:48:45 2013] [error] mod_ssl: SSL handshake failed (server norrweb:443, client 10.0.83.232) (OpenSSL library error follows)
[Tue Mar 12 23:48:45 2013] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?]
[Tue Mar 12 23:52:23 2013] [error] mod_ssl: SSL handshake failed (server norrweb:443, client 10.0.83.232) (OpenSSL library error follows)
[Tue Mar 12 23:52:23 2013] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?]
[Tue Mar 12 23:52:23 2013] [error] mod_ssl: SSL handshake failed (server norrweb:443, client 10.0.83.232) (OpenSSL library error follows)
[Tue Mar 12 23:52:23 2013] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?] 
```

下面可以在Wireshark中看到

```
No.     Time           Source                Destination           Protocol Length Info
      1 0.000000000    10.0.83.232           10.0.83.132           TCP      66     49160 > https [SYN] Seq=0 Win=65535 Len=0 MSS=1460 WS=256 SACK_PERM=1

Frame 1: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 0, Len: 0

No.     Time           Source                Destination           Protocol Length Info
      2 0.000177000    10.0.83.132           10.0.83.232           TCP      66     https > 49160 [SYN, ACK] Seq=0 Ack=1 Win=16384 Len=0 MSS=1460 SACK_PERM=1 WS=8

Frame 2: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49160 (49160), Seq: 0, Ack: 1, Len: 0

No.     Time           Source                Destination           Protocol Length Info
      3 0.004240000    10.0.83.232           10.0.83.132           TCP      60     49160 > https [ACK] Seq=1 Ack=1 Win=262144 Len=0

Frame 3: 60 bytes on wire (480 bits), 60 bytes captured (480 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 1, Ack: 1, Len: 0

No.     Time           Source                Destination           Protocol Length Info
      4 0.006430000    10.0.83.232           10.0.83.132           TLSv1    162    Client Hello

Frame 4: 162 bytes on wire (1296 bits), 162 bytes captured (1296 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 1, Ack: 1, Len: 108
Secure Sockets Layer
    TLSv1 Record Layer: Handshake Protocol: Client Hello
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 103
        Handshake Protocol: Client Hello
            Handshake Type: Client Hello (1)
            Length: 99
            Version: TLS 1.0 (0x0301)
            Random
            Session ID Length: 0
            Cipher Suites Length: 24
            Cipher Suites (12 suites)
            Compression Methods Length: 1
            Compression Methods (1 method)
            Extensions Length: 34
            Extension: renegotiation_info
            Extension: status_request
            Extension: elliptic_curves
            Extension: ec_point_formats
            Extension: SessionTicket TLS

No.     Time           Source                Destination           Protocol Length Info
      5 0.006753000    10.0.83.132           10.0.83.232           TLSv1    1086   Server Hello, Certificate, Certificate Request, Server Hello Done

Frame 5: 1086 bytes on wire (8688 bits), 1086 bytes captured (8688 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49160 (49160), Seq: 1, Ack: 109, Len: 1032
Secure Sockets Layer
    TLSv1 Record Layer: Handshake Protocol: Server Hello
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 53
        Handshake Protocol: Server Hello
            Handshake Type: Server Hello (2)
            Length: 49
            Version: TLS 1.0 (0x0301)
            Random
            Session ID Length: 0
            Cipher Suite: TLS_RSA_WITH_AES_128_CBC_SHA (0x002f)
            Compression Method: null (0)
            Extensions Length: 9
            Extension: renegotiation_info
            Extension: SessionTicket TLS
    TLSv1 Record Layer: Handshake Protocol: Certificate
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 810
        Handshake Protocol: Certificate
            Handshake Type: Certificate (11)
            Length: 806
            Certificates Length: 803
            Certificates (803 bytes)
    TLSv1 Record Layer: Handshake Protocol: Multiple Handshake Messages
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 154
        Handshake Protocol: Certificate Request
            Handshake Type: Certificate Request (13)
            Length: 146
            Certificate types count: 3
            Certificate types (3 types)
            Distinguished Names Length: 140
            Distinguished Names (140 bytes)
        Handshake Protocol: Server Hello Done
            Handshake Type: Server Hello Done (14)
            Length: 0

No.     Time           Source                Destination           Protocol Length Info
      6 0.035066000    10.0.83.232           10.0.83.132           TLSv1    387    Certificate, Client Key Exchange, Change Cipher Spec, Finished

Frame 6: 387 bytes on wire (3096 bits), 387 bytes captured (3096 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 109, Ack: 1033, Len: 333
Secure Sockets Layer
    TLSv1 Record Layer: Handshake Protocol: Multiple Handshake Messages
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 269
        Handshake Protocol: Certificate
            Handshake Type: Certificate (11)
            Length: 3
            Certificates Length: 0
        Handshake Protocol: Client Key Exchange
            Handshake Type: Client Key Exchange (16)
            Length: 258
            RSA Encrypted PreMaster Secret
    TLSv1 Record Layer: Change Cipher Spec Protocol: Change Cipher Spec
        Content Type: Change Cipher Spec (20)
        Version: TLS 1.0 (0x0301)
        Length: 1
        Change Cipher Spec Message
    TLSv1 Record Layer: Handshake Protocol: Finished
        Content Type: Handshake (22)
        Version: TLS 1.0 (0x0301)
        Length: 48
        Handshake Protocol: Finished
            Handshake Type: Finished (20)
            Length: 12
            Verify Data

No.     Time           Source                Destination           Protocol Length Info
      7 0.035543000    10.0.83.132           10.0.83.232           TLSv1    61     Alert (Level: Fatal, Description: Handshake Failure)

Frame 7: 61 bytes on wire (488 bits), 61 bytes captured (488 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49160 (49160), Seq: 1033, Ack: 442, Len: 7
Secure Sockets Layer
    TLSv1 Record Layer: Alert (Level: Fatal, Description: Handshake Failure)
        Content Type: Alert (21)
        Version: TLS 1.0 (0x0301)
        Length: 2
        Alert Message
            Level: Fatal (2)
            Description: Handshake Failure (40)

No.     Time           Source                Destination           Protocol Length Info
      8 0.037140000    10.0.83.132           10.0.83.232           TCP      54     https > 49160 [FIN, ACK] Seq=1040 Ack=442 Win=17520 Len=0

Frame 8: 54 bytes on wire (432 bits), 54 bytes captured (432 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49160 (49160), Seq: 1040, Ack: 442, Len: 0

No.     Time           Source                Destination           Protocol Length Info
      9 0.037374000    10.0.83.232           10.0.83.132           TCP      60     49160 > https [FIN, ACK] Seq=442 Ack=1040 Win=260864 Len=0

Frame 9: 60 bytes on wire (480 bits), 60 bytes captured (480 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 442, Ack: 1040, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     10 0.037491000    10.0.83.132           10.0.83.232           TCP      54     https > 49160 [FIN, ACK] Seq=1040 Ack=443 Win=17520 Len=0

Frame 10: 54 bytes on wire (432 bits), 54 bytes captured (432 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49160 (49160), Seq: 1040, Ack: 443, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     11 0.038866000    10.0.83.232           10.0.83.132           TCP      66     49161 > https [SYN] Seq=0 Win=65535 Len=0 MSS=1460 WS=256 SACK_PERM=1

Frame 11: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49161 (49161), Dst Port: https (443), Seq: 0, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     12 0.038987000    10.0.83.132           10.0.83.232           TCP      66     https > 49161 [SYN, ACK] Seq=0 Ack=1 Win=16384 Len=0 MSS=1460 SACK_PERM=1 WS=8

Frame 12: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49161 (49161), Seq: 0, Ack: 1, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     13 0.042720000    10.0.83.232           10.0.83.132           TCP      60     49160 > https [ACK] Seq=443 Ack=1041 Win=260864 Len=0

Frame 13: 60 bytes on wire (480 bits), 60 bytes captured (480 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49160 (49160), Dst Port: https (443), Seq: 443, Ack: 1041, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     14 0.045063000    10.0.83.232           10.0.83.132           TCP      60     49161 > https [ACK] Seq=1 Ack=1 Win=262144 Len=0

Frame 14: 60 bytes on wire (480 bits), 60 bytes captured (480 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49161 (49161), Dst Port: https (443), Seq: 1, Ack: 1, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     15 0.046585000    10.0.83.232           10.0.83.132           SSLv3    112    Client Hello

Frame 15: 112 bytes on wire (896 bits), 112 bytes captured (896 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49161 (49161), Dst Port: https (443), Seq: 1, Ack: 1, Len: 58
Secure Sockets Layer
    SSLv3 Record Layer: Handshake Protocol: Client Hello
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 53
        Handshake Protocol: Client Hello
            Handshake Type: Client Hello (1)
            Length: 49
            Version: SSL 3.0 (0x0300)
            Random
            Session ID Length: 0
            Cipher Suites Length: 10
            Cipher Suites (5 suites)
            Compression Methods Length: 1
            Compression Methods (1 method)

No.     Time           Source                Destination           Protocol Length Info
     16 0.047039000    10.0.83.132           10.0.83.232           SSLv3    1113   Server Hello, Certificate, Certificate Request, Server Hello Done

Frame 16: 1113 bytes on wire (8904 bits), 1113 bytes captured (8904 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49161 (49161), Seq: 1, Ack: 59, Len: 1059
Secure Sockets Layer
    SSLv3 Record Layer: Handshake Protocol: Server Hello
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 81
        Handshake Protocol: Server Hello
            Handshake Type: Server Hello (2)
            Length: 77
            Version: SSL 3.0 (0x0300)
            Random
            Session ID Length: 32
            Session ID: f49316c9deb37720a0af8fe4bd7d3feb9a289930d502de9d...
            Cipher Suite: TLS_RSA_WITH_RC4_128_SHA (0x0005)
            Compression Method: null (0)
            Extensions Length: 5
            Extension: renegotiation_info
    SSLv3 Record Layer: Handshake Protocol: Certificate
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 810
        Handshake Protocol: Certificate
            Handshake Type: Certificate (11)
            Length: 806
            Certificates Length: 803
            Certificates (803 bytes)
    SSLv3 Record Layer: Handshake Protocol: Multiple Handshake Messages
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 153
        Handshake Protocol: Certificate Request
            Handshake Type: Certificate Request (13)
            Length: 145
            Certificate types count: 2
            Certificate types (2 types)
            Distinguished Names Length: 140
            Distinguished Names (140 bytes)
        Handshake Protocol: Server Hello Done
            Handshake Type: Server Hello Done (14)
            Length: 0

No.     Time           Source                Destination           Protocol Length Info
     17 0.058398000    10.0.83.232           10.0.83.132           SSLv3    397    Alert (Level: Warning, Description: No Certificate), Client Key Exchange, Change Cipher Spec, Finished

Frame 17: 397 bytes on wire (3176 bits), 397 bytes captured (3176 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49161 (49161), Dst Port: https (443), Seq: 59, Ack: 1060, Len: 343
Secure Sockets Layer
    SSLv3 Record Layer: Alert (Level: Warning, Description: No Certificate)
        Content Type: Alert (21)
        Version: SSL 3.0 (0x0300)
        Length: 2
        Alert Message
            Level: Warning (1)
            Description: No Certificate (41)
    SSLv3 Record Layer: Handshake Protocol: Client Key Exchange
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 260
        Handshake Protocol: Client Key Exchange
            Handshake Type: Client Key Exchange (16)
            Length: 256
    SSLv3 Record Layer: Change Cipher Spec Protocol: Change Cipher Spec
        Content Type: Change Cipher Spec (20)
        Version: SSL 3.0 (0x0300)
        Length: 1
        Change Cipher Spec Message
    SSLv3 Record Layer: Handshake Protocol: Finished
        Content Type: Handshake (22)
        Version: SSL 3.0 (0x0300)
        Length: 60
        Handshake Protocol: Finished
            Handshake Type: Finished (20)
            Length: 36
            MD5 Hash
            SHA-1 Hash

No.     Time           Source                Destination           Protocol Length Info
     18 0.058791000    10.0.83.132           10.0.83.232           SSLv3    61     Alert (Level: Fatal, Description: Handshake Failure)

Frame 18: 61 bytes on wire (488 bits), 61 bytes captured (488 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49161 (49161), Seq: 1060, Ack: 402, Len: 7
Secure Sockets Layer
    SSLv3 Record Layer: Alert (Level: Fatal, Description: Handshake Failure)
        Content Type: Alert (21)
        Version: SSL 3.0 (0x0300)
        Length: 2
        Alert Message
            Level: Fatal (2)
            Description: Handshake Failure (40)

No.     Time           Source                Destination           Protocol Length Info
     19 0.059728000    10.0.83.132           10.0.83.232           TCP      54     https > 49161 [FIN, ACK] Seq=1067 Ack=402 Win=17520 Len=0

Frame 19: 54 bytes on wire (432 bits), 54 bytes captured (432 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49161 (49161), Seq: 1067, Ack: 402, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     20 0.061094000    10.0.83.232           10.0.83.132           TCP      60     49161 > https [FIN, ACK] Seq=402 Ack=1067 Win=260864 Len=0

Frame 20: 60 bytes on wire (480 bits), 60 bytes captured (480 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49161 (49161), Dst Port: https (443), Seq: 402, Ack: 1067, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     21 0.061351000    10.0.83.132           10.0.83.232           TCP      54     https > 49161 [FIN, ACK] Seq=1067 Ack=403 Win=17520 Len=0

Frame 21: 54 bytes on wire (432 bits), 54 bytes captured (432 bits) on interface 0
Ethernet II, Src: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a), Dst: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4)
Internet Protocol Version 4, Src: 10.0.83.132 (10.0.83.132), Dst: 10.0.83.232 (10.0.83.232)
Transmission Control Protocol, Src Port: https (443), Dst Port: 49161 (49161), Seq: 1067, Ack: 403, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     22 0.062308000    10.0.83.232           10.0.83.132           TCP      66     49162 > https [SYN] Seq=0 Win=65535 Len=0 MSS=1460 WS=256 SACK_PERM=1

Frame 22: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0
Ethernet II, Src: Nokia_c9:bd:a4 (b0:35:8d:c9:bd:a4), Dst: Vmware_b3:cc:5a (00:0c:29:b3:cc:5a)
Internet Protocol Version 4, Src: 10.0.83.232 (10.0.83.232), Dst: 10.0.83.132 (10.0.83.132)
Transmission Control Protocol, Src Port: 49162 (49162), Dst Port: https (443), Seq: 0, Len: 0

No.     Time           Source                Destination           Protocol Length Info
     23 0.062449000    10.0.83.132           10.0.83.232           TCP      66     https > 49162 [SYN, ACK] Seq=0 Ack=1 Win=16384 Len=0 MSS=1460 SACK_PERM=1 WS=8 
```

[编辑] 这是一些新信息，我已经使用 openssl s_client 做了一些未来的调试，见下文：

```
imac:test jens$ openssl s_client -showcerts -connect norrweb:443 -CAfile CCRootCA.pem -prexit
CONNECTED(00000003)
depth=1 /CN=CCRootCA/C=SE/emailAddress=<mail hidden>
verify return:1
depth=0 /CN=norrweb/emailAddress=<mail hidden>
verify return:1
45636:error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure:/SourceCache/OpenSSL098/OpenSSL098-47/src/ssl/s3_pkt.c:1102:SSL alert number 40
45636:error:140790E5:SSL routines:SSL23_WRITE:ssl handshake failure:/SourceCache/OpenSSL098/OpenSSL098-47/src/ssl/s23_lib.c:182:
---
Certificate chain
 0 s:/CN=norrweb/emailAddress=<mail hidden>
   i:/CN=CCRootCA/C=SE/emailAddress=<mail hidden>
-----BEGIN CERTIFICATE-----
MIIDHDCCAgSgAwIBAgIBAjALBgkqhkiG9w0BAQswPDERMA8GA1UEAwwIQ0NSb290
<snip>
IEPe9OMviQ+yxlJKnalvha8yL5ULzYFIkRfvUZTUd8M=
-----END CERTIFICATE-----
---
Server certificate
subject=/CN=norrweb/emailAddress=<mail hidden>
issuer=/CN=CCRootCA/C=SE/emailAddress=<mail hidden>
---
Acceptable client certificate CA names
/CN=NorrIntermediateCA/C=SE/emailAddress=<mail hidden>
/CN=NorrRootCA/C=SE/emailAddress=<mail hidden>
---
SSL handshake has read 1599 bytes and written 210 bytes
---
New, TLSv1/SSLv3, Cipher is DHE-RSA-AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : DHE-RSA-AES256-SHA
    Session-ID: C3B4CC8BF5D88DE76E0DDEE4A24499B9F391D8B7AE93C84CE25DA58218181313
    Session-ID-ctx: 
    Master-Key: C98F2A12F7A796BD380507544A25FBEFCFEC1270F14A5705E6FFC4C841403F35C244E39F71FBA5407C27AC406D1058B7
    Key-Arg   : None
    Start Time: 1364065589
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
---
imac:test jens$ 
```

在服务器的日志中打印以下内容：

```
[23/Mar/2013 20:06:24 25734] [info]  Connection to child 3 established (server norrweb:443, client 10.0.83.145)
[23/Mar/2013 20:06:24 25734] [info]  Seeding PRNG with 1160 bytes of entropy
[23/Mar/2013 20:06:24 25734] [error] SSL handshake failed (server norrweb:443, client 10.0.83.145) (OpenSSL library error follows)
[23/Mar/2013 20:06:24 25734] [error] OpenSSL: error:140890C7:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:peer did not return a certificate [Hint: No CAs known to server for verification?] 
```

因为它打印以下内容，我猜服务器正在做正确的事情？：

可接受的客户端证书 CA 名称

/CN=NorrIntermediateCA/C=SE/emailAddress=

/CN=NorrRootCA/C=SE/emailAddress=

我确定我已经在 /CN=NorrIntermediateCA/C=SE/emailAddress= 签名的诺基亚设备上安装了客户端证书

任何人还有什么建议吗？Windows 8 Phone 坏了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-30T16:02:12.063

我知道这已经很晚了，但是根据[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402533#BKMK_SecureSocketsLayerSSLcertificates)，Windows Phone 8 不支持客户端证书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:32:39.427

看看第 6 帧。诺基亚没有发送证书。这对应于显示证书丢失的 error_log 消息：*对等体没有返回证书*。

当服务器缺少颁发客户端证书的证书链时，我已经看到了这个问题。我相信 error_log 说了这么多：*[提示：服务器不知道用于验证的 CA？]*

服务器向客户端发送它信任的 CA。客户端使用这些 CA 颁发的客户端证书发回消息。

# javascript - 使用 javascript 检测并重定向到另一个域

> ID：15374126
> 
> 赞同：0
> 
> 时间：2013-03-12T23:17:24.167
> 
> 标签：javascript

任何方式将（“ [http://domain1.com](http://domain1.com) ”，“ [https://mydomain1.com](https://mydomain1.com) ”）重定向到“ [http://mynewsite.com](http://mynewsite.com) ” whit javascript？我不知道。

**结构是这样的：**

**列出域：** domain1.com、domain2.com、domain3.com

**如果位置是**domain1.com**或**domain2.com**或**domain3.com **（http 和 https <-- 重要）**

**重定向**到 mynewsite.com（<- 仅 http）

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:19:19.077

我不使用JS，而是使用PHP。你能用PHP吗？见下文（稍微调整一下）。祝你好运！

```
if($_SERVER["HTTPS"] != "on") {    
   header("HTTP/1.1 301 Moved Permanently");
   header("Location: https://" . $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"]);
   exit(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:27:01.333

你可以使用

```
window.location.hostname 
```

和

```
window.location.protocol 
```

识别您当前的位置，然后使用

```
window.location = window.location.protocol + "//newSite.com" 
```

重定向

# asp.net-mvc - 带有 ASP.NET MVC 的 F# 类型或系统类型？

> ID：15374127
> 
> 赞同：2
> 
> 时间：2013-03-12T23:17:26.000
> 
> 标签：asp.net-mvc, f#

在使用 VisualStudio 库中的 C#/F# 模板构建 F# ASP.NET MVC 4 应用程序时，一个疑问袭击了我。我有以下模型类：

```
namespace MyApp.Models

open System
open System.ComponentModel.DataAnnotations
open System.Collections.Generic

type Product() = 
    [<Key>] member val Id = Guid.NewGuid() with get, set
    [<Required>] member val Name = "" with get, set
    member val Iban = "" with get, set
    member val Categories = new List<ProductCategory>() with get, set 
```

由于 F# 有自己的类型，在最后一种情况下，我们应该使用 F# 等价物（F# 列表、序列......）还是应该使用系统类型？如果是这样，原因是什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:47:13.510

根据经验，我会根据正在使用您的模型的语言来判断。如果它一直是 F#，那就去吧。如果它是混合的，你需要更加明智。顺便说一句，`Option<>`并且`List<>`可以很好地使用 C#（尽管我发现我需要类型别名来“清理”一些代码）。F# 序列也只是一个`IEnumerable<>`，所以不用担心。`ResizeArray<>`此外，在 F# 中使用数组和(aka )并没有错`System.Collections.Generic.List<>`——您只需要注意状态突变。

# node.js - 如何遍历全局和本地 npm 包的 package.json 文件？

> ID：15374129
> 
> 赞同：1
> 
> 时间：2013-03-12T23:17:28.050
> 
> 标签：node.js, npm

我想通过 npm 查看全局和本地安装的所有包的 package.json 文件，但不确定如何全局执行？

我知道`process.execPath`会给我全局安装的可执行文件的目录，但不确定从那里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:44:22.127

可能最简单的方法是使用 NPM api。项目中的第一个“npm link npm”。然后你可以调用 NPM 对象来枚举模块。例如：

```
var npm = require('npm');
npm.load({}, function(err, npm) {
  npm.config.set("global", true);
  npm.commands.list([], true, function(err, pkgInfo) {
    console.log(pkgInfo);
  });
}); 
```

# java - 图形不出现

> ID：15374131
> 
> 赞同：0
> 
> 时间：2013-03-12T23:17:32.183
> 
> 标签：java

无论我做什么，我都无法在屏幕上显示矩形/线条/椭圆形。我检查了他们绘制图形的其他来源，但是当我什至执行这些代码时，我没有在窗口上显示任何图形。下面是教科书上的例子。

```
import java.awt.*;
import javax.swing.*;

class PlotGraph
{
   public static void main (String [] args) {
    JFrame win;
    Container contentPane;
    Graphics g;

    win = new JFrame("testing");
    win.setSize(300,200);
    win.setLocation(100,100);
    win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    win.setVisible(true);

    contentPane = win.getContentPane();
    g = contentPane.getGraphics();

    g.drawRect(10, 30, 50, 50); 

   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:25:59.157

哎哟。你应该改变你的教科书。首先，所有对 Swing 组件的访问都必须在[事件派发线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中完成。

其次，您不应该获取组件的图形并在其上进行绘制。相反，您应该扩展 JComponent 或 JPanel，覆盖其`paintComponent(Graphics)`方法，并使用作为参数传递的 Graphics 对象（实际上是一个`Graphics2D`实例）进行绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:29:50.353

这不是图形在 Swing 中的工作方式。

您需要将*组件*添加到框架中，而不仅仅是在其上绘制。你永远不想直接在框架上绘图。它没有做任何事情的原因是因为您的绘图代码被覆盖了。

如果您希望您的组件具有自定义绘图代码，请创建一个子类`JComponent`并覆盖该`paintComponent(Graphics)`方法。*您应该*如何执行此操作的示例如下：

```
import java.awt.*;
import javax.swing.*;

class PlotGraph {
    public static void main(String[] args) {
        JFrame win;

        win = new JFrame("testing");
        win.setSize(300, 200);
        win.setLocation(100, 100);
        win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        win.setVisible(true);
        win.setContentPane(new MyComponent());
    }

}

class MyComponent extends JComponent {

    @Override
    public void paintComponent(Graphics g) {
        g.drawRect(10, 30, 50, 50);
    }
} 
```

我*强烈*建议您在线查看[Java GUI 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)。

# javascript - 监听向上滑动手势的代码不起作用

> ID：15374136
> 
> 赞同：1
> 
> 时间：2013-03-12T23:17:49.053
> 
> 标签：javascript, jquery, multi-touch, gesture, hammer.js

当文档上的任何位置出现向上滑动手势时，我正在尝试发出警报；并且，最终也发生在 2 个手指滑动手势时。

我以前使用过hammer.js 来监听手势，这段代码对我来说似乎是有效的，但由于某种原因，警报没有发生。

任何想法为什么？

这是代码：

```
<!Doctype HTML>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Two Swipe!</title>
    </head>
    <body>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript" src="http://raw.github.com/EightMedia/hammer.js/master/dist/jquery.hammer.min.js"></script>
        <script type="text/javascript">
        var hammer = $(document).hammer();
        hammer.on('swipeup', function(event) {
            alert("swiped-up!");
            if( event.gesture.touches.length == 2 )
                alert("two swiped!");
        });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:46:15.743

检查了来源。如果您查看第 208 行的滑动手势[，](https://github.com/EightMedia/hammer.js/blob/master/src/gestures.js)您会发现它的最大触摸数设置为 1。我的猜测是这会限制您看到多次触摸。您可能可以修改此代码以满足您的需要，或者为多点触控滑动编写自定义侦听器。

# ruby - 关闭 SASS / Compass 中指定文件的哈希精灵命名

> ID：15374137
> 
> 赞同：0
> 
> 时间：2013-03-12T23:17:57.167
> 
> 标签：ruby, sass, compass-sass

我正在尝试为谷歌地图制作一些精灵我需要关闭该哈希标签`maps-s6f45423a37.png`以获取`maps.png`下面的代码并尝试制作循环，但由于我不知道 ruby​​ 它不起作用:)

```
on_sprite_saved do |filename|
test=filename.gsub(%r{-s[a-z0-9]{10}\.png$}, '.png')
  if test=='maps.png'
    FileUtils.cp filename, filename.gsub(%r{-s[a-z0-9]{10}\.png$}, '.png')
  end
end 
```

怎么做谢谢:)

# if-statement - if..else if 语句在 receive..end 语句中？

> ID：15374142
> 
> 赞同：1
> 
> 时间：2013-03-12T23:18:22.193
> 
> 标签：if-statement, process, erlang

我试图在语句中`if..else if`的 Erlang 中创建一个条件，`receive..end.`以便传递两个变量 A 和 B 以便可以测试它们的等价性。

在外壳中，我尝试输入：

```
6> Pid = spawn(ifelse,receiving,[]).
** exception error: no match of right hand side value <0.54.0>
7> 
```

我想要的是使用`Pid ! {self(), 1,2}.`并`Pid ! {self(), 2,2}.`测试这两种情况，但是出了点问题。

```
-module(ifelse).
-export([receiving/0]).

receiving() ->
    receive
        {Pid,A,B}->
        if  
            A =:= B ->
                io:format(" B equals A ~n"),
                Pid ! "True";
            A =/= B ->
                io:format(" B does not equal A ~n"),
                Pid ! "False";
            true -> {error, wrong_value}
        end     
    end. 
```

顺便说一句，如果我有`receiving(A,B)`两个变量，我将如何产生类似于`Pid = spawn(ifelse,receiving,[]).`？我尝试使用`Pid = spawn(ifelse,receiving(1,2),[]).`但出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:10:59.560

正如@rvirding 评论的那样，Erlang 是单一分配。您的问题可能与您已经将一个值绑定到变量 Pid 的事实有关，因此您不能将任何新值绑定到它。

只有在 shell 中（不推荐在实际代码中使用）才能使用 f(Variable) 取消绑定单个变量：

```
1> A = 4.
4
2> f(A).
ok
3> A = 5.
5 
```

或使用取消绑定所有变量`f()` 注意，这仅用于测试目的。

据我所知，您的代码是正确的，即使我建议您使用`case`模式匹配而不是`if`语句。

所以我会重写你的代码如下：

```
-module(ifelse).
-export([receiving/0]).

receiving() ->
    receive
        {Pid, A, B} ->
            case A =:= B of
                true ->
                    Pid ! "True";
                false ->
                    Pid ! "False"
            end
     end. 
```

您可以按如下方式对其进行测试：

```
1> Pid = spawn(ifelse,receiving,[]).
<0.34.0>
2> ShellPid = self().
<0.32.0>
3> Pid ! {ShellPid, 4, 5}.
{0.32.0, 4, 5}
4> flush().
Shell got "False" 
```

另一件事是我不明白为什么你应该为“True”和“False”使用字符串值，因为你实际上可以使用原子。此外，您的代码只能工作一次，因为在 if-else 或 case 之后，该过程就结束了。您可以使用递归函数来解决此问题。

这是一个包含两个修改的模块：

```
-module(ifelse).
-export([receiving/0]).

receiving() ->
    receive
        {Pid, A, B} ->
            Pid ! A =:= B
    end,
receiving(). 
```

这里是如何测试它（在一个新的外壳，所以你不必使用 f() ）：

```
1> Pid = spawn(ifelse,receiving,[]).
<0.34.0>
2> ShellPid = self().
<0.32.0>
3> Pid ! {ShellPid, 4, 5}.
{0.32.0, 4, 5}
4> flush().
Shell got false
5> Pid ! {ShellPid, 4, 4}.
{0.32.0, 4, 4}
6> flush().
Shell got true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:47:24.890

如果您在文件中定义了函数接收/2，则意味着您具有以下内容：

```
-module(ifelse).
-export([receiving/0,receiving/2]).

receiving() ->
    some_code.

receiving(A,B) ->
    other_code. 
```

你可以用

> Pid = spawn(ifelse,receiving,[1,2])。

顺便说一句，在erlang中写if语句是不常见的，原因是如果一个case不匹配任何条件，代码就会崩溃。

```
5> F=fun(X) -> if (X rem 2) == 0 -> X+1 end end.
#Fun<erl_eval.6.82930912>
6> F(4).
5
7> F(5).
** exception error: no true branch found when evaluating an if expression
8> 
```

如果你想避免这种情况，你必须有一个默认的守卫（然后它看起来像一个案例）。

```
8> F1=fun(X) -> if (X rem 2) == 0 -> X+1;         
8> true -> X end end.
#Fun<erl_eval.6.82930912>
9> F1(4).                                         
5
10> F1(5).
11> 
```

编写函数的常用方法更像是这样：

```
receiving() ->
    receive
        {Pid,_A,_A} when is_pid(Pid) -> 
                % use the pattern matching to verify that the 2 elements are equal
                % and a guard test to check that the first element is a pid.
                % Note that in this case it is a strict equals. I use _A because the code doesn't
                % care of the value itself
                io:format(" B equals A ~n"),
                Pid ! "True";
        {Pid,_,_} when is_pid(Pid) -> 
                % use pattern maching to verify the that message is a tupple of 3 elements
                % and a guard test to check that the first element is a pid.
                % For the 2 last elements I use _, so the data is not bound to any variable,
                % only the structure is tested
                io:format(" B does not equal A ~n"),
                Pid ! "False";
        _ -> {error, wrong_value}    
    end. 
```

我在 shell 中对此进行了测试：

```
14> F = fun() ->                                        
14>     receive                                         
14>         {Pid,_A,_A} when is_pid(Pid) ->             
14>                 io:format(" B equals A ~n"),        
14>                 Pid ! "True";                       
14>         {Pid,_,_} when is_pid(Pid) ->               
14>                 io:format(" B does not equal A ~n"),
14>                 Pid ! "False";                      
14>         _ -> {error, wrong_value}                   
14>     end                                             
14> end.                                                
#Fun<erl_eval.20.82930912>
15> Pid = spawn(F).
<0.58.0>
16> Pid ! {self(),1,2}.
 B does not equal A 
{<0.51.0>,1,2}
17> % the returm value of "proc ! Mess" is Mess. It is what we get on the console on previous line
17> flush(). % use flush() to get the messages received by the shell
Shell got "False"
ok
18> Pid ! {self(),test,test}. % the process Pid is terminated now. when we send a message to it, 
18> % it is simply "lost".
{<0.51.0>,test,test}
19> % it is necessary though to use a new variable Pid1 and spawn a new process 
19> % (see rvirding message and user601836 answer)
19> Pid1 = spawn(F).         
<0.63.0>
20> Pid1 ! {self(),test,test}.
 B equals A 
{<0.51.0>,test,test}
21> flush().
Shell got "True"
ok
22> Pid2 = spawn(F).          
<0.68.0>
23> Pid2 ! {hello,test,test}. 
{hello,test,test}
24> flush(). 
ok
25> % of course there is no message sent back, no io:format to print something on the console,
25> % the returned value of the function in the error case is "lost".
25> % if you want to have a permanent process you must have a recursive loop, 
25> % calling receiving() were needed. 
```

# java - 双重 if 语句

> ID：15374145
> 
> 赞同：0
> 
> 时间：2013-03-12T23:18:25.473
> 
> 标签：java

这里涉及 if 语句的真正基本问题。

```
If a=b and c=d
    System.out.println ("True"); 
```

我将如何在 Java 代码中编写这些 if 语句？

两个语句都必须为真，控制台才能输出“真”语句。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T23:19:48.093

```
if((a == b) && (c == d))
    System.out.println("True"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:22:47.607

如果 a、b、c 和 d 是对象，您应该这样做

```
if ((a.equals(b) && c.equals(d)) {
  System.out.println("True");
} 
```

如果它们是原语，例如（int、long 等。字符串不是原语！），那么使用 AliBZ 的解决方案

（空值检查留给读者练习）

# python - 为什么当管道命令在一起时 shell=True 工作？

> ID：15374146
> 
> 赞同：2
> 
> 时间：2013-03-12T23:18:29.797
> 
> 标签：python, io, subprocess, io-redirection

我有几个`subprocess`实例我想串成一个管道，但我被卡住了，想征求意见。

例如，模仿：

```
cat data | foo - | bar - > result 
```

或者：

```
foo - < data | bar - > result 
```

...我首先尝试了以下，它挂起：

```
import subprocess, sys

firstProcess = subprocess.Popen(['foo', '-'], stdin=subprocess.PIPE,
                                stdout=subprocess.PIPE)
secondProcess = subprocess.Popen(['bar', '-'], stdin=firstProcess.stdout,
                                 stdout=sys.stdout)

for line in sys.stdin:
    firstProcess.stdin.write(line)
    firstProcess.stdin.flush()

firstProcess.stdin.close()
firstProcess.wait() 
```

我的第二次尝试使用`subprocess`带有参数的一个实例，该实例`shell=True`有效：

```
import subprocess, sys

pipedProcess = subprocess.Popen(" ".join(['foo', '-', '|', 'bar', '-']),
                                stdin=subprocess.PIPE, shell=True)

for line in sys.stdin:
    pipedProcess.stdin.write(line)
    pipedProcess.stdin.flush()

pipedProcess.stdin.close()
pipedProcess.wait() 
```

`subprocess`第一种链式方法我做错了什么？我读到最好不要使用`shell=True`，我很好奇我在第一种方法中做错了什么。谢谢你的建议。

**编辑**

我修正了我的问题中的一个错字并修正`stdin`了`secondProcess`. 它仍然挂起。

我也尝试删除`firstProcess.wait()`解决挂起的问题，但随后我得到一个 0 字节文件作为`result`.

我会坚持使用`pipedProcess`，因为它工作正常。但是，如果有人知道为什么第一个设置挂起或生成一个 0 字节文件作为输出，我也很想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:50:06.537

`shell=True`之所以有效，是因为您要求外壳程序解释您的整个命令行并自行处理管道。就好像您`foo - | bar -`直接在 shell 中键入一样。

（这也是使用它可能不安全的原因`shell=True`；有很多方法可以欺骗 shell 做坏事，如果您直接将命令和参数作为不受任何解析的列表传递，则不会发生这种情况中介。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:17:26.397

要修复第一个示例，请`foo_process.stdout.close()`按照[文档建议](http://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline)添加. 以下代码模拟`foo - | bar -`命令：

```
#!/usr/bin/python
from subprocess import Popen, PIPE

foo_process = Popen(['foo', '-'], stdout=PIPE)
bar_process = Popen(['bar', '-'], stdin=foo_process.stdout)
foo_process.stdout.close() # allow foo to know if bar ends
bar_process.communicate()  # equivalent to bar_process.wait() in this case 
```

除非它们与 , 不同，否则您不需要在此处显式使用`sys.stdin`, 。`sys.stdout``sys.__stdin__``sys.__stdout__`

模拟`foo - < data | bar - > result`命令：

```
#!/usr/bin/python
from subprocess import Popen, PIPE

with open('data','rb') as input_file, open('result', 'wb') as output_file:
    foo = Popen(['foo', '-'], stdin=input_file, stdout=PIPE)
    bar = Popen(['bar', '-'], stdin=foo.stdout, stdout=output_file)
    foo.stdout.close() # allow foo to know if bar ends
bar.wait() 
```

如果您想将修改后的输入逐行提供给`foo`进程，即模拟`python modify_input.py | foo - | bar -`命令：

```
#!/usr/bin/python
import sys
from subprocess import Popen, PIPE

foo_process = Popen(['foo', '-'], stdin=PIPE, stdout=PIPE)
bar_process = Popen(['bar', '-'], stdin=foo_process.stdout)
foo_process.stdout.close() # allow foo to know if bar ends
for line in sys.stdin:
    print >>foo_process.stdin, "PY", line, # modify input, feed it to `foo`
foo_process.stdin.close() # tell foo there is no more input
bar_process.wait() 
```

# c# - 是否可以将 ID 更改为模型中的属性？

> ID：15374147
> 
> 赞同：0
> 
> 时间：2013-03-12T23:18:34.057
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

Html.TextBox 输出 name 和 id 属性。我知道可以通过添加一些参数来更改 id。但是，是否可以在模型中注释 ID？

例子：

```
class Foo {

    [HtmlAttributes(Id = "NameId")]
    public string Name { get; set; }
}

Now TextBox() will print
<input id="NameId" name="Name" ... 
```

谢谢！

MVC 4，C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:25:21.063

你可以使用这样的东西：

```
@Html.TextBox("name", "1", new { id = "id" }) 
```

要进行自定义注释，您可能必须编写自己的 Html.TextBoxCustom 方法，该方法将从模型和设置 ID 中读取元数据。

# python - django内存消耗

> ID：15374148
> 
> 赞同：0
> 
> 时间：2013-03-12T23:18:34.523
> 
> 标签：python, django, memory, ram

django 1.3、uwsgi、python 2.7

我有一个观点，这是公认的做一些大型查询和低效的事情。太糟糕了，当请求对应于该视图的 url 时，内存消耗会增加 200-300MB。

我决定尝试使用 pympler 来尝试查明是什么消耗了这么多内存。但是检查各种元素我无法弄清楚 ram 消耗是如何跳跃 200-300MBs 的。

由于大部分内容都发生在 get_context_data 函数中，我主要在这里尝试过。但最大的对象是 11MB。甚至最后当我在上下文变量上运行 asizeof 时，它也只有 12-15MB。

我如何确定为什么调用该视图会导致 RAM 使用量跃升 200-300MB？

# linux - 我如何以编程方式知道我是否在 VM 中？

> ID：15374154
> 
> 赞同：0
> 
> 时间：2013-03-12T23:18:51.697
> 
> 标签：linux, windows, kernel, virtualization

我希望能够在 Windows 和 Linux 上这样做。我知道有一些方法可以通过获取 sysinfo 并使用与硬件标识符相关的拇指规则。

我想知道是否有更基本的方法，比如查看内存地址/发出中断等。

顺便说一句，我正在尝试在 Intel 硬件上执行此操作，而我使用的虚拟化软件是 Vmware Workstation 和 Windows HyperV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:29:17.890

至少其中一个应该可以检测您是否在 Linux 上的 VMware（或其他一些常见的虚拟环境）下运行：

在系统启动时检查内核检测到的虚拟设备。

`dmesg | grep -i virtual`

另一种检测虚拟化硬件设备的方法，如果`dmesg`没有说任何有用的话。

`dmidecode | egrep -i 'manufacturer|product|vendor|domU'`

您还可以检查虚拟磁盘：

`cat /proc/ide/hd*/model`

Virtuozzo 通常可以通过查找`/proc/vz`或来检测`/dev/vzfs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T19:28:31.717

这是一个更有用的命令：

```
$ lscpu | grep -E 'Hypervisor vendor|Virtualization type'
Hypervisor vendor:     KVM
Virtualization type:   full 
```

其他命令的示例输出：

```
$ sudo virt-what
kvm

$ dmesg | grep -i virtual
[    0.000000] Booting paravirtualized kernel on KVM
[    0.029160] CPU0: Intel QEMU Virtual CPU version 1.0 stepping 03

$ sudo dmidecode | egrep -i 'manufacturer|product|vendor|domU'
    Vendor: Bochs
    Manufacturer: Bochs
    Product Name: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs
    Manufacturer: Bochs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T00:58:57.970

大多数软件检查管理程序 CPUID 叶 - Leaf 0x40000000，管理程序 CPUID 信息

EAX：管理程序 CPUID 信息 (0x40000010) 的最大输入值。

EBX、ECX、EDX：管理程序供应商 ID 签名。例如“KVMKVMKVM”

叶 0x40000010，时序信息。

EAX：（虚拟）TSC 频率，以 kHz 为单位。

EBX：（虚拟）总线（本地 apic 定时器）频率，以 kHz 为单位。

ECX、EDX：保留

当然，您仍然依赖虚拟机管理程序向您提供这些信息。它很可能决定根本不报告 0x40000000，从而导致客人相信它实际上是在真实硬件上运行

# php - Magento 客户仪表板跟踪号

> ID：15374162
> 
> 赞同：0
> 
> 时间：2013-03-12T23:19:28.523
> 
> 标签：php, magento

我正在 sales/order/recent.phtml 编辑客户仪表板的模板文件。我希望跟踪号和跟踪链接显示在最近的订单下。我已经尝试了以下但 getAllTracks 没有抓住任何东西。想法？

```
 <?php foreach ($_orders as $_order): ?>
                <tr>
                    <td><?php echo $_order->getRealOrderId() ?></td>
                    <td><span class="nobr"><?php echo $this->formatDate($_order->getCreatedAtStoreDate()) ?></span></td>
                    <td><?php echo $_order->getShippingAddress() ? $this->htmlEscape($_order->getShippingAddress()->getName()) : '&nbsp;' ?></td>
                    <td><?php echo $_order->formatPrice($_order->getGrandTotal()) ?></td>
                    <td><em><?php echo $_order->getStatusLabel() ?></em></td>
                    <td class="a-center">
                        <span class="nobr">
                        <a href="<?php echo $this->getViewUrl($_order) ?>"><?php echo $this->__('View Order') ?></a>
                        <?php if ($this->helper('sales/reorder')->canReorder($_order)) : ?>
                            <span class="separator">|</span> <a href="<?php echo $this->getReorderUrl($_order) ?>" class="link-reorder"><?php echo $this->__('Reorder') ?></a>
                        <?php endif ?>
                        </span>
                    </td>
                </tr>
                <tr>

                <?php $collection = Mage::getResourceModel('sales/order_shipment_collection');
                $collection->addAttributeToFilter('order_id', $_order->getRealOrderId()); ?>

                <?php foreach($collection as $_ship): ?>
                <?php var_dump($_ship->getAllTracks())?>
                    <?php $i=0; foreach ($_ship->getAllTracks() as $_item): $i++ ?>
                        <?php $url = $this->helper('shipping')->getTrackingPopupUrlBySalesModel($_order) ?>
                        <?php echo "URL is". $url ?>
                        <?php if ($url): ?>
                        <td align="center" valign="top" style="padding:3px 9px"><a href="<?=$url?>"><?php echo $_item->getNumber() ?></a></td>
                        <?php else: ?>
                        <td align="center" valign="top" style="padding:3px 9px"><?php echo $_item->getNumber() ?></td>
                        <?php endif; ?> 
                    <?php endforeach ?>
                    <!---<a href="" class="link-track">Track</a> --->
                <?php endforeach; ?>

                </tr>
            <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:41:54.777

最终成为将链接放在那里的非常短的代码行。我没有费心继续努力获取跟踪号码。我把链接放在倒数第二列。

```
<div class="box-account box-recent">
<?php $_orders = $this->getOrders(); ?>
    <div class="box-head">
        <h2><?php echo $this->__('Recent Orders') ?></h2>
        <?php if( sizeof($_orders->getItems()) > 0 ): ?><a href="<?php echo $this->getUrl('sales/order/history') ?>"><?php echo $this->__('View All') ?></a><?php endif; ?>
    </div>
<?php if( sizeof($_orders->getItems()) > 0 ): ?>
    <table class="data-table" id="my-orders-table">
    <col width="1" />
    <col width="1" />
    <col />
    <col width="1" />
    <col width="1" />
    <col width="1" />
        <thead>
            <tr>
                <th><?php echo $this->__('Order #') ?></th>
                <th><?php echo $this->__('Date') ?></th>
                <th><?php echo $this->__('Ship To') ?></th>
                <th><span class="nobr"><?php echo $this->__('Order Total') ?></span></th>
                <th><?php echo $this->__('Status') ?></th>
                <th><?php echo $this->__('Track') ?></th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($_orders as $_order): ?>
                <tr>
                    <td><?php echo $_order->getRealOrderId() ?></td>
                    <td><span class="nobr"><?php echo $this->formatDate($_order->getCreatedAtStoreDate()) ?></span></td>
                    <td><?php echo $_order->getShippingAddress() ? $this->htmlEscape($_order->getShippingAddress()->getName()) : '&nbsp;' ?></td>
                    <td><?php echo $_order->formatPrice($_order->getGrandTotal()) ?></td>
                    <td><em><?php echo $_order->getStatusLabel() ?></em></td>
                    <td>
                    <?php  if ($_order->getTracksCollection()->count()) : ?>
                    <a href="#" style="color:green; font-weight:bold" id="linkId" onclick="popWin('<?php echo $this->helper('shipping')->getTrackingPopupUrlBySalesModel($_order) ?>','trackorder','width=800,height=600,resizable=yes,scrollbars=yes')" title="<?php echo $this->__('Track Order') ?>"><?php echo $this->__('Track Order Shipment') ?></a>
                    <br/>
                    <?php endif; ?>
                    </td>
                    <td class="a-center">
                        <span class="nobr">
                        <a href="<?php echo $this->getViewUrl($_order) ?>"><?php echo $this->__('View Order') ?></a>
                        <?php if ($this->helper('sales/reorder')->canReorder($_order)) : ?>
                            <span class="separator">|</span> <a href="<?php echo $this->getReorderUrl($_order) ?>" class="link-reorder"><?php echo $this->__('Reorder') ?></a>
                        <?php endif ?>
                        </span>
                    </td>

                </tr>

            <?php endforeach; ?>
        </tbody>
    </table>
    <script type="text/javascript">decorateTable('my-orders-table')</script>
<?php else: ?>
    <p><?php echo $this->__('You have placed no orders.'); ?></p>
<?php endif; ?>
</div> 
```

# javascript - 使用 cookie 发出警报，从另一个函数内部调用变量？

> ID：15374163
> 
> 赞同：1
> 
> 时间：2013-03-12T23:19:36.317
> 
> 标签：javascript, function, variables, cookies, alert

我正在尝试使用 cookie 在 JavaScript 中创建一个警报，该 cookie 既可以通过名称向用户打招呼，也可以告诉他们他们在网站上赢得了特定游戏的次数。我的用户问候语工作正常，但我似乎无法让计数器正常工作。它涉及调用由先前函数更改的变量，我认为这就是我的问题所在，但我不知道如何解决这个问题。（这些变量称为“cardOnePoints”和“cardTwoPoints”。）谁能帮我解决这个问题，或者告诉我是否还有什么我做错了？

```
function getCookieOne(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if(x==c_name)
        {
            return unescape(y);
        }
    }
}

function setCookieOne(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 

var winnerCount;
var getCount = getCookieOne('getCount');

function winnerCount()
{
    if (cardOnePoints + cardTwoPoints === 21)
    {
        winnerCount = getCount + 1
    }
    else 
    {
        winnerCount = getCount
    };
}

function countWinner()
{
    return winnerCount
}

function checkCookie()
{
    var username=getCookieOne("username");
    var gamesWonCount=getCookieOne("gamesWonCount");

    function winnerCounter() 
    {
        var gamesWin
        if (cardOnePoints + cardTwoPoints === 21)
        {
            gamesWin=++winnerCount;
        }
        else 
        {
            gamesWin=winnerCount
        };
        return gamesWin
    }

    if (username!=null && username!="")
    {
        alert("Sup " + username+ "!!! Woah man, you've won "
            + countWinner() + " game(s)!!!");
    }
    else 
    {
        username=prompt("Please enter your name:","");
        if (username!=null && username!="")
        {
            setCookieOne("username",username,365);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:41:47.547

有很多事情正在发生。还有一些多余的代码。
我认为主要问题源于有一个名为“gamesWonCount”的 cookie 和另一个名为“getCount”的 cookie。您还有 2 个变量和一个跟踪该数字的函数（winnerCount、gamesWin、winnerCount()）。

第一件事是在一个地方跟踪该数字。我们称之为“winnerCount”。

现在让我们创建一个名为“calculateWinnerCount”的函数，它将根据您的卡片结果计算获胜次数。请注意，“winnerCount”的基本金额设置为您的 cookie 值。

由于我们一直在操作名为winnerCount 的变量，我们可以在警报函数中使用它。

这是代码：

```
function getCookieOne(c_name)
{
   var i,x,y,ARRcookies=document.cookie.split(";");
   for (i=0;i<ARRcookies.length;i++) {
     x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
     y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
     x=x.replace(/^\s+|\s+$/g,"");
     if (x==c_name)
     {
        return unescape(y);
     }
  }
}

function setCookieOne(c_name,value,exdays) {
  var exdate=new Date();
  exdate.setDate(exdate.getDate() + exdays);
  var c_value=escape(value) + ((exdays==null) ? "" : ";
    expires="+exdate.toUTCString());
  document.cookie=c_name + "=" + c_value;
} 

var winnerCount = getCookieOne('gamesWonCount') || 0;

function calculateWinnerCount() {
  if (cardOnePoints + cardTwoPoints === 21) {
    winnerCount = winnerCount + 1;
  }
}

function checkCookie()
{
  var username=getCookieOne("username");

  if (username!=null && username!="") {
    alert("Sup " + username+ "!!! Woah man, you've won "
        + winnerCount + " game(s)!!!"
        );
  } else {
    username=prompt("Please enter your name:","");
    if (username!=null && username!="") {
     setCookieOne("username",username,365);
    }
  }
} 
```

我不确定您如何使用或调用这些函数。但是，如果您在每次纸牌游戏结束时调用 calculateWinnerCount()，它应该将一个数字添加到您的 WinnerCount 变量中，该变量包含您存储在 cookie 中以及您今天赢得的总获胜次数。

您可能还想在每次像这样计算WinnerCount() 时设置 cookie 值：

```
function calculateWinnerCount() {
  if (cardOnePoints + cardTwoPoints === 21) {
    winnerCount = winnerCount + 1;
    setCookieOne("gamesWonCount", winnerCount, 14);
  }
} 
```

# c++ - 从不同线程在同一个套接字上发送和接收不起作用

> ID：15374165
> 
> 赞同：2
> 
> 时间：2013-03-12T23:19:44.417
> 
> 标签：c++, sockets, tcp, send, recv

我读到它应该同时不受不同线程的影响，但是我的程序有一些奇怪的行为，我不知道出了什么问题。

我有并发线程与客户端套接字通信

1.  一个正在发送到套接字
2.  一个做选择，然后从同一个套接字接收

由于我仍在发送，客户端已经收到数据并关闭了套接字。同时，我正在对该套接字进行选择和接收，它返回 0（因为它已关闭）所以我关闭了这个套接字。但是，发送尚未返回......并且由于我在此套接字上调用 close，发送调用因 EBADF 而失败。

我知道客户端已经正确接收到数据，因为我在关闭套接字后输出它并且它是正确的。但是，就我而言，我的发送调用仍然返回错误（EBADF），所以我想修复它以使其不会失败。

这并不总是发生。它可能发生在 40% 的时间里。我不在任何地方使用睡眠。我应该在发送或接收之间有暂停吗？

这是一些代码：

发送：

```
while(true)
{
    // keep sending until send returns 0
    n = send(_sfd, bytesPtr, sentSize, 0);

    if (n == 0)
    {
        break;
    }
    else if(n<0)
    {
        cerr << "ERROR: send returned an error "<<errno<< endl; // this case is triggered
        return n;
    }

    sentSize -= n;
    bytesPtr += n;
} 
```

接收：

```
 while(true)
{
    memset(bufferPointer,0,sizeLeft);
    n = recv(_sfd,bufferPointer,sizeLeft, 0);
    if (debug) cerr << "Receiving..."<<sizeLeft<<endl;
    if(n == 0)
    {
        cerr << "Connection closed"<<endl; // this case is triggered
        return n;
    }
    else if (n < 0)
    {
        cerr << "ERROR reading from socket"<<endl;
        return n;
    }
     bufferPointer += n;
     sizeLeft -= n;
     if(sizeLeft <= 0) break;

} 
```

在客户端，我使用相同的接收代码，然后在套接字上调用 close()。然后在我这边，我从接收调用中得到 0 并且还在套接字上调用 close() 然后我的发送失败。还没完结？！但是我的客户已经得到了数据！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:43:31.743

我必须承认我很惊讶你经常看到这个问题，但是当你处理线程时它总是有可能的。当您调用时`send()`，您最终会进入内核将数据附加到那里的套接字缓冲区，因此很可能会有上下文切换，可能会切换到系统中的另一个进程。与此同时，内核可能已经相当快地缓冲和传输了数据包。我猜您正在本地网络上进行测试，因此另一端接收数据并关闭连接并很快将适当的 FIN 发送回您的端。当发送机器仍在运行其他线程或进程时，这一切都可能发生，因为本地以太网网络上的延迟非常低。

现在 FIN 到了——你的接收线程最近没有做很多事情，因为它一直在等待输入。因此，许多调度系统将大大提高其优先级，并且很有可能接下来会运行它（您没有指定您正在使用的操作系统，但至少在 Linux 上可能会发生这种情况）。该线程由于其零读取而关闭套接字。在此之后不久的某个时刻，发送线程将被重新唤醒，但大概内核注意到套接字在从阻塞返回之前已关闭`send()`并返回`EBADF`。

现在这只是对确切原因的猜测——除其他外，它在很大程度上取决于您的平台。但你可以看到这是怎么发生的。

最简单的解决方案可能也是`poll()`在发送线程中使用，但要等待套接字变为可写而不是读就绪。显然，您还需要等到有任何缓冲数据要发送 - 您如何做到这一点取决于哪个线程缓冲数据。该`poll()`调用将让您通过使用 标记来检测连接何时关闭`POLLHUP`，您可以在尝试使用`send()`.

`send()`作为一般规则，在您确定发送缓冲区已完全刷新之前，您不应该关闭套接字 - 只有在调用返回并指示所有剩余数据都已用完时，您才能确定这一点。我过去通过在读取为零时检查发送缓冲区来处理这个问题，如果它不为空，我设置一个“关闭”标志。在您的情况下，一旦所有内容都被刷新，发送线程将使用它作为关闭的提示。这很重要，因为如果远程端半关闭，`shutdown()`那么即使它可能仍在读取，您也会得到零读数。但是，您可能不在乎半关闭，在这种情况下，您的上述策略是可以的。

最后，我个人会避免发送和接收线程的麻烦，并且只使用一个线程来完成这两者 - 这或多或少是 and 的要点`select()`，`poll()`以允许单个执行线程处理一个或多个文件句柄而不必担心执行阻塞和饿死其他连接的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T01:29:05.233

发现了问题。这是我的循环。请注意，这是一个无限循环。当我没有剩余要发送时，我的 sentSize 为 0，但我仍会循环尝试发送更多。此时，另一个线程已经关闭了这个线程，所以我的 0 字节发送调用返回错误。

我通过更改循环以在 sendSize 为 0 时停止循环来修复它，它解决了问题！

# jquery - jQuery幻灯片仅在计时器后显示导航

> ID：15374169
> 
> 赞同：0
> 
> 时间：2013-03-12T23:20:16.180
> 
> 标签：jquery, html, slideshow

如何制作 jQuery 幻灯片仅允许用户在一段时间后导航到下一张幻灯片？

我是否必须在某个地方放入 setTimeout 或者是否有具有此功能的现有幻灯片？

我找不到任何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:35:10.397

执行此操作的典型方法是前进到下一张幻灯片，隐藏导航控件以转到下一张幻灯片，然后在 setTimeout() 之后显示导航控件。

您没有向我们展示您的 HTML，所以这里有一些制造的 HTML 来说明：

HTML：

```
<button id="nextSlide">Next</button> 
```

jQuery：

```
$("#nextSlide").click(function() {
    var button = $(this);

    // go to next slide here

    // hide next button
    button.hide();

    // after 2 seconds, show the button again
    setTimeout(function() {
        button.fadeIn(500);
    }, 2000);

}); 
```

或者，它可以完全使用 jQuery 动画来完成，如下所示：

```
$("#nextSlide").click(function() {
    // go to next slide here

    // hide next button, delay, then dfade in
    $(this).fadeOut(200).delay(2000).fadeIn(500);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:46:28.380

您可以使用 $.Deferred 承诺方法来管理周期的结束

```
$('#myslidebutton').click(function () {
    mybutton = $(this);
    mybutton.hide(); //or whatever to not allow a click
    $('div').animate({ // whatever your slide show part is
        "opacity": "0"
    }, 1000).promise().done(function () {
        //after the animation
        mybutton.delay(1000).show();
    });
}); 
```

# iphone - iOS：如何防止在后台出现与位置相关的警报？

> ID：15374174
> 
> 赞同：1
> 
> 时间：2013-03-12T23:20:33.113
> 
> 标签：iphone, ios, background, alert, core-location

我的 iOS 应用在特定操作模式下会在后台使用定位服务。它工作得相当好，如果用户在设置/隐私中禁用 LocationServices - 全局或仅针对我的应用程序 - 而它在后台时，它会设法停止处理。

当用户仅为我的应用禁用定位服务时，一切正常。但是，当用户在全球范围内禁用定位服务时，我无法阻止显示“打开定位服务以允许“MyApp”确定您的位置”的标准警报（我的意思是，警报几乎立即显示，而我在设置应用程序中，而不是当我回到我的应用程序将其恢复到前台时）。

我似乎理解其他基于位置的应用程序能够避免这种情况：例如，MotionX-GPS 在后台记录轨迹时不会导致出现任何警报，即使用户在“设置”中禁用了全球定位服务。有谁知道如何实现这一目标？

谢谢，
狼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:43:29.740

`<CLLocationManagerDelegate>``locationManager:didChangeAuthorizationStatus:`看起来很有希望。`CLAuthorizationStatus`您可以在 CLLocationManager 委托中实现该方法，并根据新值关闭自己。

# json - 做一个 Cronjob 重复查询 MongoDB 自上次查询以来的新数据

> ID：15374179
> 
> 赞同：1
> 
> 时间：2013-03-12T23:21:06.420
> 
> 标签：json, mongodb, cron, crontab

我的数据提供者有一个带有我的数据的 MongoDB 远程实例，我可以通过 SSH 访问它。目前，我使用命令查询 MongoDB

`mongoexport -d database -c collection --csv --out result.csv --q '{"date":{"$gte":new Date(1338480000000),"$lte": new Date(1338915599000)}}'`

从那里我一直在使用 WinSCP 将生成的 JSON 文件的副本从远程 linux shell 传输到我的本地 Windows 笔记本电脑。

问题是，从现在开始，理想情况下，每次将新条目（“事件”）添加到 MongoDB 时，我都需要让它自动运行导出，*并且*它必须自动 SCP 或以其他方式将生成的 JSON 文件推送到公司 linux VPS。这就是我公司的 CS 人员所说的“事件驱动的导出”。我不知道如何做到这一点，数据提供者也不知道，我也无法通过 Google-ing 弄清楚。

如果不可能，那么我会满足于让 cronjob 每 1 分钟运行一次，并将最后 1 分钟的数据从 MongoDB 导出为 JSON 文件，然后将该文件 SCP 到我公司的 linux 服务器。我真的可以使用一些帮助来确定如何编写查询以及如何让 mongoexport 按顺序保存文件名（以避免覆盖同一个文件），然后告诉 SCP 发送一份最新的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:18:17.440

“事件驱动导出”将是一件相当复杂的事情，因为必须在数据提供者端检测到事件（数据已插入），然后将通知发送到您公司的 linux 系统。

事件检测可能意味着对 MongoDB 日志文件 (tail -f) 的调查，这不是很可靠 - 如果检测器失败并且必须重新启动怎么办？

可能最简单的解决方案是在您公司的 linux 系统上运行一个 MongoDB 客户端，该客户端连接到数据提供者的数据库并定期检查新数据（通过检查最新的“日期”条目）。然后它将直接获取新数据，而不是繁琐的导出机制。

该调查客户端程序可以在永久循环中等待（休眠），也可以由 cron 定期启动。

# c++ - Linux下调用semget()时的EINVAL

> ID：15374181
> 
> 赞同：1
> 
> 时间：2013-03-12T23:21:28.190
> 
> 标签：c++, linux, ipc, semaphore

为什么我不能为其信号量集打开带有 4 个信号量的 semget？IE。：

```
semget(key_t key, int nsems, int semflg); 
```

使用 nsms 作为 3 调用上述函数很好，但是使用 4 它返回负 1..

```
int sempahore = semget((key_t)key,4,IPC_CREAT | MY_PERMS); 
```

上面的代码仅在我将 4 更改为 3 时才有效

其他明智的 errno 返回无效参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:51:23.967

根据我的 Linux 机器上的手册页，如果“nsems 小于 0 或大于每个信号量集的信号量数量限制 (SEMMSL)，或者与 key 对应的信号量集已经存在，并且 nsems 更大，则可以`semget`返回`EINVAL`比那组信号量的数量还要多。”

我怀疑你遇到了第二种情况 - 检查你是否已经创建了一个具有相同键和 3 个信号量的集合。

# jquery - 根据内容大小动画和调整 div 动态高度

> ID：15374182
> 
> 赞同：3
> 
> 时间：2013-03-12T23:21:34.067
> 
> 标签：jquery, dynamic, resize, jquery-animate, height

有谁知道是否可以对 div 的调整大小进行动画处理，以使其完全适合内容的大小？高度必须是动态的，这意味着如果我调整浏览器窗口的大小，那么 div 将增加/减少高度。我已经有了 80% 的视口动态宽度。

这是我目前用来为容器的调整大小设置动画的方法，并且调整大小的部分有效，但动画不会为调整大小而播放。当我将高度设置为固定高度时，说：

```
$(".pagecontainer").animate({
    height: '700px'
}, 500); 
```

它动画了。但是如果我有 height: 'auto'，那么它就不会动画，只是捕捉到新的大小。

JS：

```
<script>

    function setContainerHeight() {
        $(".pagecontainer").animate({
            height: 'auto'
        }, 500);
    }

    $('.link').on('click', function(e){
        $('.pagecontainer>div').fadeOut(0);
        setContainerHeight();
        $(this.getAttribute("href")).fadeIn();
    });

</script> 
```

CSS：

```
.pagecontainer {
min-height:450px;
width:80%;
min-width:800px;
padding:50px 0;
margin: 0 auto;
}
.pagecontainer>div{
display: none; /*wait until page needs to be faded in*/
padding-left:50px;
padding-right:50px;
position:relative;
} 
```

HTML：

```
<div class="pagecontainer">

    <a href="#page1" class="link">page 1</a>
    <a href="#page2" class="link">page 2</a>
    <a href="#page3" class="link">page 3</a>

    <div id="page1">TONS OF TEXT HERE</div>

    <div id="page2">A BIT OF TEXT HERE</div>

    <div id="page3">BUNCH OF IMAGES</div>

</div> 
```

例如，第 1 页有大量文本，我不知道它会占用多少高度，因为高度本身是动态的，如果我扩大浏览器窗口，那么显然需要的高度会缩小。第 2 页可能只有一点文字，因此所需的高度会小得多。第 3 页有一堆图像，但我不知道适合所有图像所需的高度（这是我的问题的重点，让脚本计算需要多少高度）。

如何调整“.pagecontainer”的大小，使其高度**完全适合每个页面上的内容，即使我调整浏览器窗口的大小**？例如，如果我单击 page1，则容器会放大（使用 jQuery 的 .animate() 动画），然后如果我单击 page2，则容器会缩小。

这是图像描述：http: [//i.imgur.com/leOeJG0.png](http://i.imgur.com/leOeJG0.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:07:24.210

我没有理由计算高度 - 高度会自动为您改变。

**jQuery**

```
$('.pagecontainer>div').fadeOut(0);

$('.link').on('click', function(e){
    $('.pagecontainer>div').fadeOut(0);
    $(this.getAttribute("href")).fadeIn();
}); 
```

**HTML结构**

```
<a href="#page1" class="link">page 1</a>
<a href="#page2" class="link">page 2</a>
<a href="#page3" class="link">page 3</a>

<div class="pagecontainer">

    <div id="page1">Block One</div>
    <div id="page2"><img src="http://placehold.it/200x200" /></div>
    <div id="page3"><img src="http://placehold.it/300x400" /></div>

</div> 
```

[http://jsfiddle.net/daCrosby/tmuC2/](http://jsfiddle.net/daCrosby/tmuC2/)

# **编辑**

根据您的评论，您需要它上下动画，而不是淡入淡出。为此，请使用`animate([height:"show",speed)`和`animate([height:"hide",speed)`，如下所示：

```
 $('.pagecontainer>div').animate({height:"hide"},500);
    $(this.getAttribute("href")).animate({height:"show"},500); 
```

[http://jsfiddle.net/daCrosby/tmuC2/1/](http://jsfiddle.net/daCrosby/tmuC2/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:48:27.473

正如我所看到的，不需要该功能`expandPageContainer()`- 当没有容器可见并且您不需要计算高度的任何绝对值时会发生动画。

只需删除函数和函数调用`expandPageContainer()`并将您的容器 CSS 设置`height: auto`为您期望的行为就会发生。调整容器大小以适应其内容的高度是默认行为。（您可能想要删除`margin-bottom`规则）

调用`fadeOut(0)`也是一样的`hide()`。后者效率更高一些。

# google-app-engine - 如何在 NDB/DB 查询中忽略大小写

> ID：15374185
> 
> 赞同：4
> 
> 时间：2013-03-12T23:21:43.687
> 
> 标签：google-app-engine, app-engine-ndb

这似乎是一个简单的问题，但我在[类定义](https://developers.google.com/appengine/docs/python/ndb/queryclass?hl=en)中看不到任何内容。

如果我有查询

`Video.query(Video.tags.IN(topics))`

`topics`以小写 unicode 字符串的形式出现，但`Video.tags`大多是大写的。我可以`topics`在查询它们之前循环并大写它们，但是有没有办法完全忽略大小写？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T23:28:56.727

在查询中不能忽略大小写。

通常，如果您知道要进行不区分大小写的搜索，则可以以小写形式存储数据的“非规范化”副本。每当您想查询时，您都会在查询之前将文本小写。

为了降低写入成本，您可能只想索引小写版本，并且您可能不需要索引实际区分大小写的数据。

# gwt - 无法使 GWT 弹出面板玻璃效果起作用

> ID：15374187
> 
> 赞同：0
> 
> 时间：2013-03-12T23:21:59.013
> 
> 标签：gwt, popuppanel

我已经扩展了 PopupPanel 并试图让玻璃/透视效果起作用这是我的课

```
import com.google.gwt.user.client.Timer;
import com.google.gwt.user.client.ui.*;

public class MyPopup extends PopupPanel
{
private static Label label = new Label();

public MyPopup()
{
    super(true);
    setWidget(label);
}

public static void showToast(String message, int time)
{
    final MyPopup popup = new MyPopup();
    label.getElement().setId("mypopupID");
    popup.setGlassEnabled(true);
    label.setText(message);
    popup.show();

    Timer timer = new Timer()
    {
        @Override
        public void run()
        {
            popup.hide();
        }
    };

    timer.schedule(time);
}
} 
```

我只是调用 showToast 并且它按预期工作，但看起来像一个普通的旧面板，具有我在我的 CSS 中声明的任何颜色背景。这是我的 CSS

```
#mypopupID
{
background-color: yellow;
position:absolute;
left:130px;
top:50px;
width: 300px;
} 
```

任何想法如何让它发挥作用？梦想是让淡入/淡出动画工作，但首先要迈出一小步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:08:11.500

setGlassEnabled(true) 的“玻璃”效果不适用于弹出窗口本身，但适用于它背后的任何内容。如果您希望弹出窗口本身是透明的，也许您可​​以尝试使用“opacity”css 属性。

# ruby-on-rails - 为什么我的 rake 调用会导致“未定义方法 `source_index`”错误？

> ID：15374188
> 
> 赞同：3
> 
> 时间：2013-03-12T23:21:59.493
> 
> 标签：ruby-on-rails, gem, rake, ruby-1.9, ruby-on-rails-2

我正在尝试运行`bundle exec rake db:migrate`然后遇到以下错误。

```
bundle exec rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
undefined method `source_index' for Gem:Module
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/rails/gem_dependency.rb:21:in `add_frozen_gem_path'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/initializer.rb:298:in `add_gem_load_paths'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/initializer.rb:132:in `process'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/initializer.rb:113:in `run'
C:/Program Files/chiliproject-3.7.0/config/environment.rb:42:in `<top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `block in require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:547:in `new_constants_in'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `require'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rails-2.3.17/lib/tasks/misc.rake:4:in `block in <top (required)>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
C:/Ruby193/bin/rake:23:in `load'
C:/Ruby193/bin/rake:23:in `<main>'
Tasks: TOP => db:migrate => environment 
```

这是遇到错误的部分：

```
 def self.add_frozen_gem_path
      @@paths_loaded ||= begin
        source_index = Rails::VendorGemSourceIndex.new(Gem.source_index)
        Gem.clear_paths
        Gem.source_index = source_index
        # loaded before us - we can't change them, so mark them
        Gem.loaded_specs.each do |name, spec|
          @@framework_gems[name] = spec
        end
        true
      end
    end 
```

我知道这似乎是基本的，但我一直在互联网上搜索，似乎无法找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-23T22:18:27.520

*完美*解决[了 Gem:Module (NoMethodError) 的未定义方法 `source_index'](https://stackoverflow.com/questions/15349869/undefined-method-source-index-for-gemmodule-nomethoderror)的问题，只有简单的行

```
gem update --system 1.8.25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:16:06.447

好的，我整天都在搞砸这个问题，最后通过以下方式让事情对我有用：

1.  更新 RVM

    rvm 得到头

2.  将 ruby​​ 版本更改为 1.9.3

    *   在 Gemfile 中更新
    *   更新 .rvmrc 文件
3.  将 Rails 更新到最新的 2.3 版本

    *   在 Gemfile 中更新
    *   在environments.rb中更新

做了所有然后运行

bundle exec rake db:migrate

Rails 2.3 与最新的 ruby​​ gems 和未知的 x 因素发生了一些奇怪的冲突，这可能包括 ruby​​ 1.9.1 和 1.9.2 中的问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T06:52:52.160

这：[Gem:Module (NoMethodError) 的未定义方法 `source_index'](https://stackoverflow.com/questions/15349869/undefined-method-source-index-for-gemmodule-nomethoderror) 说

> Gem.source_index 已经被弃用了一段时间，但由于 Rails 2.3 除了关键的安全补丁之外没有任何更新，这永远不会得到修复。RubyGems v2.0 最终删除了该方法。降级到 2.0.0 之前的任何 ruby​​gems 版本，例如 1.8.25 以暂时恢复功能。

所以我现在的猜测是它与 Rails 2.3 与当前的 RubyGems 冲突有关。我这样做了：

1.  gem install ruby​​gems-update -v '1.8.25'
2.  gem uninstall ruby​​gems-update # 并删除了其他版本。

没有什么不同，只是分享我的发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T08:04:10.110

将您的宝石更新到 1.8.25

```
gem update --system 1.8.25 
```

[这](https://stackoverflow.com/questions/15349869/undefined-method-source-index-for-gemmodule-nomethoderror)可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T23:49:16.790

从[ApiDock](http://apidock.com/rails/Rails/VendorGemSourceIndex)：

> 此类已弃用或在最新的稳定版本上移动。此处显示了最新的现有版本 (v2.3.8)。

在这个问题中，使用了 Rails 版本 2.3.17，并且由于被弃用，它给出了一个错误。如果是 2.3.8，它可以工作。

# python - 在自定义 Django 上传处理程序中访问其他表单字段

> ID：15374190
> 
> 赞同：1
> 
> 时间：2013-03-12T23:22:12.250
> 
> 标签：python, django, file-upload

我为我当前的项目编写了一个自定义的 Django 文件上传处理程序。这是一个概念验证，它允许您计算上传文件的哈希值，而无需将该文件存储在磁盘上。可以肯定的是，这是一个概念证明，但如果我能让它发挥作用，我就能达到我工作的真正目的。

从本质上讲，这就是我到目前为止所拥有的，除了一个主要例外情况外，它运行良好：

```
from django.core.files.uploadhandler import *
from hashlib import sha256
from myproject.upload.files import MyProjectUploadedFile

class MyProjectUploadHandler(FileUploadHandler):
    def __init__(self, *args, **kwargs):
        super(MyProjectUploadHandler, self).__init__(*args, **kwargs)

    def handle_raw_input(self, input_data, META, content_length, boundary,
            encoding = None):
        self.activated = True

    def new_file(self, *args, **kwargs):
        super(MyProjectUploadHandler, self).new_file(*args, **kwargs)

        self.digester = sha256()
        raise StopFutureHandlers()

    def receive_data_chunk(self, raw_data, start):
        self.digester.update(raw_data)

    def file_complete(self, file_size):
        return MyProjectUploadedFile(self.digester.hexdigest()) 
```

自定义上传处理程序效果很好。哈希是准确的，无需将任何上传的文件存储到磁盘即可工作，并且每次仅使用 64kb 的内存。

我遇到的唯一问题是我需要在处理文件之前从 POST 请求访问另一个字段，即用户输入的文本盐。我的表格如下所示：

```
<form id="myForm" method="POST" enctype="multipart/form-data" action="/upload/">
    <fieldset>
        <input name="salt" type="text" placeholder="Salt">
        <input name="uploadfile" type="file">
        <input type="submit">
    </fieldset>
</form> 
```

“盐” POST 变量仅在处理请求并上传文件后才可供我使用，这不适用于我的用例。我似乎无法在我的上传处理程序中找到以任何方式、形状或形式访问此变量的方法。

有没有办法让我在遇到每个多部分变量时访问它，而不仅仅是访问上传的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:50:33.820

我的解决方案并不容易，但它是：

```
class IntelligentUploadHandler(FileUploadHandler):
    """
    An upload handler which overrides the default multipart parser to allow
    simultaneous parsing of fields and files... intelligently. Subclass this
    for real and true awesomeness.
    """

    def __init__(self, *args, **kwargs):
        super(IntelligentUploadHandler, self).__init__(*args, **kwargs)

    def field_parsed(self, field_name, field_value):
        """
        A callback method triggered when a non-file field has been parsed 
        successfully by the parser. Use this to listen for new fields being
        parsed.
        """
        pass

    def handle_raw_input(self, input_data, META, content_length, boundary,
            encoding = None):
        """
        Parse the raw input from the HTTP request and split items into fields
        and files, executing callback methods as necessary.

        Shamelessly adapted and borrowed from django.http.multiparser.MultiPartParser.
        """
        # following suit from the source class, this is imported here to avoid
        # a potential circular import
        from django.http import QueryDict

        # create return values
        self.POST = QueryDict('', mutable=True)
        self.FILES = MultiValueDict()

        # initialize the parser and stream
        stream = LazyStream(ChunkIter(input_data, self.chunk_size))

        # whether or not to signal a file-completion at the beginning of the loop.
        old_field_name = None
        counter = 0

        try:
            for item_type, meta_data, field_stream in Parser(stream, boundary):
                if old_field_name:
                    # we run this test at the beginning of the next loop since
                    # we cannot be sure a file is complete until we hit the next
                    # boundary/part of the multipart content.
                    file_obj = self.file_complete(counter)

                    if file_obj:
                        # if we return a file object, add it to the files dict
                        self.FILES.appendlist(force_text(old_field_name, encoding,
                            errors='replace'), file_obj)

                    # wipe it out to prevent havoc
                    old_field_name = None
                try: 
                    disposition = meta_data['content-disposition'][1]
                    field_name = disposition['name'].strip()
                except (KeyError, IndexError, AttributeError):
                    continue

                transfer_encoding = meta_data.get('content-transfer-encoding')

                if transfer_encoding is not None:
                    transfer_encoding = transfer_encoding[0].strip()

                field_name = force_text(field_name, encoding, errors='replace')

                if item_type == FIELD:
                    # this is a POST field
                    if transfer_encoding == "base64":
                        raw_data = field_stream.read()
                        try:
                            data = str(raw_data).decode('base64')
                        except:
                            data = raw_data
                    else:
                        data = field_stream.read()

                    self.POST.appendlist(field_name, force_text(data, encoding,
                        errors='replace'))

                    # trigger listener
                    self.field_parsed(field_name, self.POST.get(field_name))
                elif item_type == FILE:
                    # this is a file
                    file_name = disposition.get('filename')

                    if not file_name:
                        continue

                    # transform the file name
                    file_name = force_text(file_name, encoding, errors='replace')
                    file_name = self.IE_sanitize(unescape_entities(file_name))

                    content_type = meta_data.get('content-type', ('',))[0].strip()

                    try:
                        charset = meta_data.get('content-type', (0, {}))[1].get('charset', None)
                    except:
                        charset = None

                    try:
                        file_content_length = int(meta_data.get('content-length')[0])
                    except (IndexError, TypeError, ValueError):
                        file_content_length = None

                    counter = 0

                    # now, do the important file stuff
                    try:
                        # alert on the new file
                        self.new_file(field_name, file_name, content_type,
                                file_content_length, charset)

                        # chubber-chunk it
                        for chunk in field_stream:
                            if transfer_encoding == "base64":
                                # base 64 decode it if need be
                                over_bytes = len(chunk) % 4

                                if over_bytes:
                                    over_chunk = field_stream.read(4 - over_bytes)
                                    chunk += over_chunk

                                try:
                                    chunk = base64.b64decode(chunk)
                                except Exception as e:
                                    # since this is anly a chunk, any error is an unfixable error
                                    raise MultiPartParserError("Could not decode base64 data: %r" % e)

                            chunk_length = len(chunk)
                            self.receive_data_chunk(chunk, counter)
                            counter += chunk_length
                            # ... and we're done
                    except SkipFile:
                        # just eat the rest
                        exhaust(field_stream)
                    else:
                        # handle file upload completions on next iteration
                        old_field_name = field_name

        except StopUpload as e:
            # if we get a request to stop the upload, exhaust it if no con reset
            if not e.connection_reset:
                exhaust(input_data)
        else:
            # make sure that the request data is all fed
            exhaust(input_data)

        # signal the upload has been completed
        self.upload_complete()

        return self.POST, self.FILES

    def IE_sanitize(self, filename):
        """Cleanup filename from Internet Explorer full paths."""
        return filename and filename[filename.rfind("\\")+1:].strip() 
```

本质上，通过继承这个类，你可以拥有一个更...智能的上传处理程序。`field_parsed`根据我的目的，将使用子类的方法宣布字段。

我已将此作为[功能请求](https://code.djangoproject.com/ticket/20034)报告给 Django 团队，希望此功能成为 Django 常规工具箱的一部分，而不是像上面那样对源代码进行猴子修补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:03:44.230

根据`FileUploadHandler`第 62 行的代码：

[https://github.com/django/django/blob/master/django/core/files/uploadhandler.py](https://github.com/django/django/blob/master/django/core/files/uploadhandler.py)

看起来请求对象被传递到处理程序并存储为`self.request`

在这种情况下，您应该能够在上传处理程序中的任何时候访问盐，方法是

```
salt = self.request.POST.get('salt') 
```

除非我误解了你的问题。

# qt - 如何在 Qt5 中将动画图标设置为 QPushButton？

> ID：15374191
> 
> 赞同：21
> 
> 时间：2013-03-12T23:22:17.013
> 
> 标签：qt, animation, icons, qt5, qpushbutton

`QPushButton`可以有图标，但我需要为其设置动画图标。这该怎么做？我创建了实现的新类，`QPushButton`但如何将图标替换`QIcon`为`QMovie`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T04:34:30.880

这可以`QPushButton`通过简单地使用 Qt 的信号/槽机制来完成，而无需子类化。`frameChanged`将 的信号连接`QMovie`到包含 this 的类中的自定义插槽`QPushButton`。此函数将应用当前帧`QMovie`作为 的图标`QPushButton`。它应该看起来像这样：

```
// member function that catches the frameChanged signal of the QMovie
void MyWidget::setButtonIcon(int frame)
{
    myPushButton->setIcon(QIcon(myMovie->currentPixmap()));
} 
```

在分配您`QMovie`和`QPushButton`成员时...

```
myPushButton = new QPushButton();
myMovie = new QMovie("someAnimation.gif");

connect(myMovie,SIGNAL(frameChanged(int)),this,SLOT(setButtonIcon(int)));

// if movie doesn't loop forever, force it to.
if (myMovie->loopCount() != -1)
    connect(myMovie,SIGNAL(finished()),myMovie,SLOT(start()));

myMovie->start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-15T17:30:30.910

由于我今天必须为我的一个项目解决这个问题，所以我只想放弃我为未来的人找到的解决方案，因为这个问题有很多观点，我认为该解决方案非常优雅。解决方案已发布[here](https://forum.qt.io/topic/93659/how-to-apply-gif-to-qpushbutton/3)。每次设置 pushButton 的图标，QMovie 的帧都会改变：

```
auto movie = new QMovie(this);
movie->setFileName(":/sample.gif");
connect(movie, &QMovie::frameChanged, [=]{
  pushButton->setIcon(movie->currentPixmap());
});
movie->start(); 
```

这还有一个优点，就是图标不会出现，直到 QMovie 启动。这也是我为我的项目派生的python解决方案：

```
#'hide' the icon on the pushButton
pushButton.setIcon(QIcon())
animated_spinner = QtGui.QMovie(":/icons/images/loader.gif")
animated_spinner.frameChanged.connect(updateSpinnerAniamation)           

def updateSpinnerAniamation(self):
  #'hide' the text of the button
  pushButton.setText("")
  pushButton.setIcon(QtGui.QIcon(animated_spinner.currentPixmap())) 
```

一旦你想显示微调器，只需启动 QMovie：

```
animated_spinner.start() 
```

如果微调器应该再次消失，则停止动画并再次“隐藏”微调器。一旦动画停止，frameChanged 插槽将不再更新按钮。

```
animated_spinner.stop()
pushButton.setIcon(QtGui.QIcon()) 
```

# backbone.js - 视图不显示模板中的主干模型

> ID：15374192
> 
> 赞同：0
> 
> 时间：2013-03-12T23:22:31.797
> 
> 标签：backbone.js, model, laravel

我从 Backbone 和 Laravel 开始，我有几个问题，因为我在西班牙语中找不到任何东西（也许我不知道如何搜索，因此更容易问）。

这是我的模型：

```
window.mMateria = Backbone.Model.extend({
    defaults: {
        nombremateria: ""
    },
});

window.cMaterias = Backbone.Collection.extend({
    url: "materias",
    model: mMateria,
    initialize: function() {
        this.fetch();
    }
}); 
```

以下是我的看法：

```
window.vMaterias = Backbone.View.extend({
    tagName: 'ul',
    model: cMaterias,
    className:'list-materias',

    initialize: function () {
        _.bindAll(this, "render");
    },
    render: function(){
        $(this.el).append("Renderizando!"); //It appears
        _.each(this.model.models, function (aMater) {
            console.log(aMater); //HERE IT DOESN'T ENTER, doesn't show anything
            $(this.el).append(new vMateria({model:aMater}).render().el);
        }, this);
        return this;
    },
    el: $(".container-fluid")
});

window.vMateria = Backbone.View.extend({
    initialize:function () {
        _.bindAll(this, "render");
        this.model.bind("change", this.render(), this);
    },
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }, 
    className: "item-materia",
    el: $(".container-fluid"),

    template: _.template($('#pl_materia').val()),
}); 
```

然后初始化：

```
 cmaterias = new cMaterias(); 
    console.log(cmaterias); //it returns 41 signatures
    vmaterias = new vMaterias({model: cmaterias});
    console.log(vmaterias); //Shows child {cid: "view1", model: child, ... 
    vmaterias.render().el; 
```

请帮助我并原谅我的英语，我不知道 Laravel `return Response::eloquent(Materia::all());`是否是问题所在。尽可能具体。迪奥斯洛斯本迪加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:22:54.740

试试这些改变。

```
window.vMaterias = Backbone.View.extend({
    tagName: 'ul',
    className:'list-materias',
    render: function(){
        this.$el.empty();
        this.$el.append("Renderizando!"); //It appears
        this.collection.each(function (aMater) {
            console.log(aMater); //HERE IT DOESN'T ENTER, doesn't show anything
            this.$el.append(new vMateria({model:aMater}).render().el);
        }, this);
        return this;
    },
    el: $(".container-fluid")
});

cmaterias = new cMaterias(); 
console.log(cmaterias); //it returns 41 signatures
vmaterias = new vMaterias({collection: cmaterias}); 
```

# matlab - 在Matlab中删除向量中的极值？

> ID：15374193
> 
> 赞同：4
> 
> 时间：2013-03-12T23:22:34.907
> 
> 标签：matlab

所以说，我有一个 = [2 7 4 9 2 4 999]

我想从矩阵中删除 999 （这是一个明显的异常值）。

有没有一种*通用*的方法来删除这样的值？我有一组向量，但并非所有向量都有这样的极值。prctile(a,99.5) 将输出向量中的最大数字，无论它有多极端（或非极端）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T23:31:36.097

有几种方法可以做到这一点，但首先你必须定义什么是“极端”？它是否超过某个阈值？超过一定数量的标准偏差？或者，如果你知道你有`n`这些极端事件并且它们的值更大比其他的，你可以使用`sort`和删除最后的`n`元素。等等......

例如`a(a>threshold)=[]`，将处理类似定义的阈值，同时`a(a>mean(a)+n*std(a))=[]`处理丢弃`n`高于平均值的标准差的值`a`。

一种完全不同的方法是使用 的中值`a`，如果向量像您提到的那样短，您希望查看中值，然后您可以阈值高于该值的某个因子的任何值`a(a>n*median(a))=[]`。

最后，评估处理这些峰值的方法的一种方法是获取数据的直方图，然后从那里开始工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:28:12.903

我能想到两个：

*   对矩阵进行排序并从顶部和底部删除 n 个元素。
*   计算平均值和标准差并丢弃所有超出的值： `mean +/- (n * standard deviation)`

在这两种情况下，n 都必须由用户选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T23:44:25.847

过滤你的信号。

```
%choose the value
N = 10;
filtered = filter(ones(1,N)/N, 1, signal); 
```

找到噪音

```
noise = signal - filtered; 
```

去除嘈杂的元素

```
THRESH = 50;
signal = signal(abs(noise) < THRESH); 
```

它比`mean+-n*stddev`方法更好，因为它会查找本地更改，因此不会在缓慢变化的信号（例如`[1 2 3 ... 998 998]`.

# ruby-on-rails - 识别 Rails 查询结果

> ID：15374197
> 
> 赞同：1
> 
> 时间：2013-03-12T23:22:55.713
> 
> 标签：ruby-on-rails, ruby

我有三个模型用户，游戏和点，用户在玩游戏时获得积分。我正在尝试做的是在视图中显示最受欢迎的游戏得分最多的用户。

我用这个[问题](https://stackoverflow.com/questions/8696005/rails-3-activerecord-order-by-count-on-association)来确定最受欢迎的游戏。所以我现在在 Game.rb 中有这个范围：

```
scope :most_popular_games,
  select("games.id, name, count(points.id) AS points_count").
  joins(:points).
  group("games.id").
  order("points_count DESC").
  limit(5) 
```

在我的控制器中，我有这个：

```
@most_popular_games = Game.most_popular_games 
```

我的模型：

楷模

```
class Point < ActiveRecord::Base
  belongs_to :game
  belongs_to :user
end

class Game< ActiveRecord::Base
  has_many :points
end

class User < ActiveRecord::Base
  # no relationship for points or games
end

class GameRank < ActiveRecord::Base
  belongs_to :game
  belongs_to :user
end 
```

但是，我不知道该怎么做是创建一种方法来计算每个用户对这些游戏中的每一个的积分并使其能够以不同的方式识别每个游戏，因此我在视图中将它们分割出来（即显示每场比赛的结果分别）。

我尝试在代码中添加它，但我不确定让每个游戏的结果在视图中可识别的最佳方法：

```
@most_popular_games.each do |most_popular_game|
  most_points_for_popular_game = GameRank.where("game_id =?", most_popular_game.id).order('total_points desc').limit(10)
end 
```

**我的问题基本上是我如何重用“most_points_for_popular_game”的结果 - 这是给定游戏中得分最高的用户 - 对于五场比赛中的每场比赛（@mo​​st_popular_games = 五个结果）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:24:05.297

完全忽略 N+1 查询和附加标记：

将`:game_ranks`关系添加到`Game`：

```
class Game
  has_many :game_ranks
end 
```

将范围添加到`GameRank`：

```
class GameRank
  scope :top, order('total_points desc').limit(10)
end 
```

（我假设一个基于你的例子的`total_points`专栏）`GameRank`

在您看来：

```
<% @most_popular_games.each do |game| %>
   <%= game.name %>
   <% game.game_ranks.top.each do |rank| %>
      <%= rank.user.name %>,<%= rank.total_points %>
   <% end %>
<% end %> 
```

# javascript - 使用 javascript 在 div 中显示时间 am/pm

> ID：15374198
> 
> 赞同：0
> 
> 时间：2013-03-12T23:23:02.810
> 
> 标签：javascript, time

大家好，如果这个问题之前已经回答过，但我无法找到解决方案，我很抱歉。我对 js 完全陌生，所以请友好:)

我想问一下如何在 div 中显示时间？我无法在我的页面上显示此功能。当我在浏览器中启动页面时，它只是空白。

谢谢，我希望我的问题是有道理的。

```
document.getElementById("para1").innerHTML = formatAMPM(date);

function formatAMPM(date) {
  var elem = document.getElementById("para1");
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var ampm = hours >= 12 ? 'pm' : 'am';
  hours = hours % 12;
  hours = hours ? hours : 12; // the hour '0' should be '12'
  minutes = minutes < 10 ? '0'+minutes : minutes;
  var strTime = hours + ':' + minutes + ' ' + ampm;
  return strTime;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:24:44.200

你需要这个：

```
document.getElementById("para1").innerHTML = formatAMPM(new Date()); 
```

您可能还想将它包装在 jQuery 之类的东西中`ready()`，以确保 DOM 已加载：

```
$(document).ready(function() {
    // Handler for .ready() called.
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

jQuery 不是唯一的方法，而只是一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:25:11.560

```
document.getElementById("para1").innerHTML = formatAMPM();

function formatAMPM() {
var date = new Date();
var hours = date.getHours();
var minutes = date.getMinutes();
var ampm = hours >= 12 ? 'pm' : 'am';
hours = hours % 12;
hours = hours || 12;
minutes = minutes < 10 ? '0'+minutes : minutes;
var strTime = hours + ':' + minutes + ' ' + ampm;
return strTime;
} 
```

[演示视图](http://jsfiddle.net/SLRdj/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:58:50.893

您可以使用 toLocaleTimeString() 在用户熟悉的时间字符串中返回它。

替换将删除秒计数器-

```
function formatAMPM() {
  var d=new Date().toLocaleTimeString();
  return d.replace(/^(\d{2}:\d{2}):\d{2}(.*)/, '$1$2');
} 
```

或者您可以在计时器上调用此方法或您的方法-

```
onload= function(){
    window.showTimer= setInterval(function(){
        var date= new Date(),
        hours= date.getHours(),
        time= date.getMinutes();
        if(time<10) time= '0'+time;
        document.getElementById("para1").innerHTML=
        (hours%12 || 12)+':'+time+(hours>= 12? ' pm':' am');
    },1000);
} 
```

# wordpress - 不要设置 cookie 或在浏览器历史记录中显示

> ID：15374200
> 
> 赞同：0
> 
> 时间：2013-03-12T23:23:06.057
> 
> 标签：wordpress, cookies, browser-history

我目前正在为一个为受虐待妇女服务的非营利组织开发一个网站。该组织希望网站访问者没有设置 cookie，并且不希望他们的网站被记录在该人的浏览器历史记录中（这甚至可能吗）。

有谁知道我如何告诉 WordPress 不要为任何访问者设置 cookie，除非登录到管理部分？

# opera - 最新版本是否仍支持 Opera 的信息亭模式？

> ID：15374201
> 
> 赞同：1
> 
> 时间：2013-03-12T23:23:16.913
> 
> 标签：opera, kiosk-mode

我工作的组织已将 Opera 网络浏览器部署到许多 (Windows) 工作站；每个都使用信息亭模式。曾经，有一个非常详细的关于此功能的帮助页面。但是，我再也找不到它了。相反，这个链接：

[http://www.opera.com/support/mastering/kiosk/](http://www.opera.com/support/mastering/kiosk/)

...只需将我带到主要的 Opera 帮助页面...

[http://www.opera.com/help](http://www.opera.com/help)

Opera 是否停止支持此功能？或者，他们只是在重新整理他们的帮助文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:16.067

12.14 仍然支持 kiosk 模式。最近在过渡到新的发布系统期间，此链接似乎已被删除。已通知文档并将修复链接。同时，这应该工作：[http ://web.archive.org/web/20130223014915/http://www.opera.com/support/mastering/kiosk/](http://web.archive.org/web/20130223014915/http://www.opera.com/support/mastering/kiosk/)

# ruby-on-rails - Gemfile 语法错误

> ID：15374205
> 
> 赞同：2
> 
> 时间：2013-03-12T23:23:35.040
> 
> 标签：ruby-on-rails, syntax, gem

我收到以下错误：Gemfile 语法错误。

这是我的代码：

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

gem 'devise'

# Bundle bootstrap gems
group :development do
  gem 'thin'

  # Bundle edge Rails instead:
  # gem 'rails', :git => 'git://github.com/rails/rails.git'

  gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T23:27:06.897

你缺少一个`end`for the `do`in `group :development`。在 . 之后的行上添加一条`end`语句`gem 'sqlite3'`。

您可以运行`ruby -c Gemfile`以检查语法（它是常规的 Ruby 代码），它会让您了解错误所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:25:53.373

看起来你在`development`小组之后错过了一个结局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T02:15:17.510

我多次遇到错误，但我没有触摸rails生成的文件并`ruby -c Gemfile`说语法是Ok。在我的情况下，如果`rails`找不到命令，可能会报告 Gemfile 语法错误。

我使用 brew+rbenv+ruby 2.0+rails 4 并使用以下命令使事情恢复正常。

```
# new commands in brew-installed ruby might not be linked automatically 
brew unlink ruby && brew link ruby 
# fix "gem" itself
sudo gem update --system
# after installing executable with rbenv, you need rehash
rbenv rehash 
```

# svn - wso2esb 具有基于 scm 的注册表

> ID：15374206
> 
> 赞同：0
> 
> 时间：2013-03-12T23:23:42.887
> 
> 标签：svn, wso2esb

是否可以安装来自 scm 路径的外部注册表路径。我在注册表中使用 scm 将 svn 挂载到它的路径。现在我正在尝试使用 wso2esb 在注册表中挂载该点。

安装一切正常，文件夹结构存在，但 esb 中的任何文件中都没有内容。它在注册表中看起来不错，我可以查看文件，但不能在 esb 中查看。关于 scm 的文档很少。

谢谢如果你能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:52:06.767

这是由于 G-Reg 4.5.1 中的错误。

[1] [https://wso2.org/jira/browse/REGISTRY-1607](https://wso2.org/jira/browse/REGISTRY-1607)

谢谢

阿吉特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:19:17.757

这是另一个 wso2 错误。这适用于 esb 4.5.0 版和注册表 4.5.0 版。它不适用于 esb 的 4.5.1 或 4.6.0。

令人惊讶的是，当一个新版本发布时，有多少事情发生了

# c++ - 寄存器分配后的持续传播

> ID：15374207
> 
> 赞同：3
> 
> 时间：2013-03-12T23:23:43.013
> 
> 标签：c++, assembly, compiler-construction, llvm, compiler-optimization

我想知道为什么不建议在寄存器分配（RA）之后进行持续传播。经过几次优化（后 RA）之后，就有了窥视孔优化的空间，比如不断传播/死代码消除等。我只能想到两个原因，

1.  这些优化很容易在 SSA 表单上进行。
2.  窥视孔选择。post RA 将导致编译时间增加。

还有其他原因吗？

如果可以执行窥视孔选择。发布 RA 那么数据结构/算法应该是什么（任何论文、参考资料等都会有所帮助）。

编辑：响应 500 - Internal Server Error 的评论。在 phi 消除（例如，在 llvm-clang 中，与寄存器分配合并）等优化通过之后，全局调度如：将指令拉到父基本块等。

编辑2：

![通行证](../Images/ace84913394e1e23af3318be178e270b.png)

在图中所示的示例中：寄存器分配器计算出 v1 和 v2 具有相同的值，因此，将相同的寄存器 (r1) 分配给它们。在寄存器分配之后，公共子表达式消除过程可以`r2 = r1`从基本块#4 中消除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:51:23.667

请参阅：[恒定折叠](http://en.wikipedia.org/wiki/Constant_folding)

给出的例子，

```
 int x = 14;
 int y = 7 - x / 2;
 return y * (28 / x + 2); 
```

常量折叠后该值`x`完全未使用。如果首先使用*RA*，它将为`x`. *所以在运行RA*阶段之前有机会进行一些修剪，即使结果相同。如果有更多变量，则可以避免溢出。在分配寄存器后，这些将很难撤消。

我认为您正在考虑[降低强度](http://en.wikipedia.org/wiki/Strength_reduction)而不是不断传播？这更符合*窥视孔优化*的精神；或者我不明白你在*窥视孔阶段**持续传播*是什么意思，这通常是后端部分。

 **在寄存器分配*之前应用的任何*常量折叠*都应该是相同的，除非变量已被设为常量或代码被发现死了；即[CFG](http://en.wikipedia.org/wiki/Control_flow_graph)已经改变。^([每个神秘主义者](https://stackoverflow.com/users/922184/mysticial))

 *[寄存器分配后的 SSA 消除](http://www.cs.ucla.edu/~palsberg/paper/cc09.pdf)描​​述了 LLVM 结构。我相信 SSA 可以用常数值进行注释，以便在*Phi 消除*时避免不必要的移动。这可能是在 RA和其他编译器不会遇到此问题*之后消除 SSA的产物。*单独的传递会减慢编译速度，因此在现有传递中解决问题会更好。我认为下面的代码说明了这个问题，

```
 int foo(int a, int b)
 {
    int c;
    if(a > 0)
        c = 7;
    else
        c = a * b + 10;
    return a + c;
 } 
```

在*phi 消除*后，代码看起来像，

```
 int foo(int a, int b)
 {
    int c;
    if(a > 0) {
        c = 7;
        return a + c;  /* Should reduce to "a+7" */
    } else {
        c = a * b + 10;
        return a + c;
    }
 } 
```**

# python - 为什么 Popen.communicate() 返回 b'hi\n' 而不是 'hi'？

> ID：15374211
> 
> 赞同：111
> 
> 时间：2013-03-12T23:24:04.437
> 
> 标签：python, subprocess, popen

有人可以解释为什么我想要的结果“hi”前面有一个字母“b”，后面有一个换行符吗？

我正在使用**Python 3.3**

```
>>> import subprocess
>>> print(subprocess.Popen("echo hi", shell=True,
                           stdout=subprocess.PIPE).communicate()[0])
b'hi\n' 
```

如果我使用 python 2.7 运行它，则不会出现这个额外的“b”

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-12T23:33:50.767

`b`表示您拥有的是，[`bytes`](http://docs.python.org/3/library/stdtypes.html#bytes)它是字节的二进制序列，而不是 Unicode 字符的字符串。子进程输出字节，而不是字符，所以这`communicate()`就是返回的内容。

该`bytes`类型不能直接`print()`使用，因此您会看到`repr`您`bytes`拥有的类型。如果您知道从子进程收到的字节的编码，则可以使用`decode()`将它们转换为可打印的`str`：

```
>>> print(b'hi\n'.decode('ascii'))
hi 
```

当然，此特定示例仅在您实际从子进程接收 ASCII 时才有效。如果不是 ASCII，你会得到一个异常：

```
>>> print(b'\xff'.decode('ascii'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0… 
```

换行符是`echo hi`输出的一部分。 `echo`的工作是输出你传递给它的参数，后跟换行符。如果您对进程输出周围的空白不感兴趣，可以`strip()`这样使用：

```
>>> b'hi\n'.strip()
b'hi' 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2018-02-20T08:42:44.590

如前所述，`echo hi`实际上确实 return `hi\n`，这是一种预期的行为。

但是您可能只想以“正确”的格式获取数据，而不是处理编码。您需要做的就是通过`universal_newlines=True`选项来`subprocess.Popen()`喜欢这样：

```
>>> import subprocess
>>> print(subprocess.Popen("echo hi",
                           shell=True,
                           stdout=subprocess.PIPE,
                           universal_newlines=True).communicate()[0])
hi 
```

这种方式`Popen()`将自行替换这些不需要的符号。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-12T23:32:17.663

echo 命令默认返回换行符

与此比较：

```
print(subprocess.Popen("echo -n hi", \
    shell=True, stdout=subprocess.PIPE).communicate()[0]) 
```

至于字符串前面的*b*表示它是一个字节序列，相当于 Python 2.6+ 中的普通字符串

[http://docs.python.org/3/reference/lexical_analysis.html#literals](http://docs.python.org/3/reference/lexical_analysis.html#literals)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-06-24T15:26:09.030

b 是字节表示，\n 是 echo 输出的结果。

以下将仅打印结果数据

```
import subprocess
print(subprocess.Popen("echo hi", shell=True,stdout=subprocess.PIPE).communicate()[0].decode('utf-8').strip()) 
```

# python - UnboundLocalError：分配前引用的局部变量“r”

> ID：15374214
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:24:16.260
> 
> 标签：python, function

我遇到了变量和函数的问题。这是一个简单的代码：

```
r = 0
list = ['apple','lime','orange']
def list_list(x):
    for i in x:
        r +=1
        print r
list_list(list) 
```

## 错误：

```
UnboundLocalError: local variable 'r' referenced before assignment 
```

我知道这一定很简单。我开始使用函数而不是直接代码来编写脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:26:47.380

`r`如果你想在你的函数之外定义它，你应该重写你的函数作为参数：

```
def my_func(some_list, r=0):
    # do some stuff 
```

基本上，您的范围有问题。如果您需要 r 在函数之外，只需在元组中返回它的值：

```
def my_func(some_list, r=0):
    # do some stuff

    return new_list, r

my_list = [1,2,3,4,5]
different_list, my_outside_r = my_func(some_list, 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:26:55.320

函数内`r`和函数外不一样，所以还没有设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T23:26:28.570

你应该把`r = 0`函数放在里面。但是，如果您想要列表的长度，只需使用`len(list)`

还要尽量避免将变量命名为与 list 等内置名称相同的名称。

# iphone - UIView 的简单核心动画 3D 变换

> ID：15374215
> 
> 赞同：15
> 
> 时间：2013-03-12T23:24:18.027
> 
> 标签：iphone, ios, core-animation

我正在尝试使用 CA 制作简单的部分翻转动画，但我遇到了透视问题。我试过：

```
 [UIView animateWithDuration:1.0 animations:^{
    self.someView.layer.anchorPoint = CGPointMake(0.5, 0);
    self.someView.layer.transform = CATransform3DMakeRotation(M_PI*0.6,1.0,0.0,0.0);
} completion:^(BOOL finished){
    // code to be executed when flip is completed
}]; 
```

**如何获得这个美好的视角？**

![在此处输入图像描述](../Images/7bfd8efcf931e7bcf3d550065bf53198.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-12T23:46:01.483

这样的事情会做：

```
CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
rotationAndPerspectiveTransform.m34 = 1.0 / -1000.0;
rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, M_PI * 0.6, 1.0f, 0.0f, 0.0f);
[UIView animateWithDuration:1.0 animations:^{
    self.someView.layer.anchorPoint = CGPointMake(0.5, 0);
    self.someView.layer.transform = rotationAndPerspectiveTransform;
} completion:^(BOOL finished){
    // code to be executed when flip is completed
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:46:31.803

[如何将透视变换应用于 UIView？](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)

请参阅有问题的答案。

基本上你修改矩阵的 m34 来控制有多少对象收缩到背景中。

如果您更好奇，请查看： http: [//www.songho.ca/opengl/gl_projectionmatrix.html](http://www.songho.ca/opengl/gl_projectionmatrix.html)

# javascript - 如何使用正则表达式在驼峰式字符串中插入空格

> ID：15374217
> 
> 赞同：5
> 
> 时间：2013-03-12T23:24:21.907
> 
> 标签：javascript, regex

我正在使用以下正则表达式将空格插入驼峰式字符串

```
var regex = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g; 
```

示例用法

```
var str = "CSVFilesAreCoolButTXTRules";
str = str.replace( regex, '$1$4 $2$3$5' );
// "CSV Files Are Cool But TXT Rules" 
```

这很好用，但我也想在字符串中的任何数字之前和之后放置空格，尽管我不希望在单个数字之间插入空格，如果数字前面有 a`$`那么空格应该放在它之前，而不是数字。

我还想删除除数字、字母、`$`符号和数字中的点之外的任何字符`.`。

例如，

> MRRPLowPriceUSD$10.10HighPriceUSD$1998.59595CommentsNoChangeReportedNTPL1001KSE-100INDEX

应该成为

> MRRP 低价 10.10 美元 高价 1998.59595 美元 评论 无变化 报告 NTPL 1001 KSE 100 INDEX

请注意，`-`已删除。

任何援助将不胜感激。

相关：[put-space-in-camel-case-string-using-regular-expression](https://stackoverflow.com/questions/15369566/putting-space-in-camel-case-string-using-regular-expression)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T16:53:09.117

试试这个正则表达式并使用积极的前瞻替换：

```
var regex = /([^A-Za-z0-9\.\$])|([A-Z])(?=[A-Z][a-z])|([^\-\$\.0-9])(?=\$?[0-9]+(?:\.[0-9]+)?)|([0-9])(?=[^\.0-9])|([a-z])(?=[A-Z])/g;
var str = "CSVFilesAreCool123B--utTXTFoo12T&XTRules$123.99BAz";
str = str.replace(regex, '$2$3$4$5 ');
// CSV Files Are Cool 123 B ut TXT Foo 12 T XT Rules $123.99 B Az 
```

([正则表达式](http://regexr.com?3444a))

# android - 应用程序无法识别非 android jar 中的功能

> ID：15374219
> 
> 赞同：1
> 
> 时间：2013-03-12T23:24:51.627
> 
> 标签：android, eclipse, jar, ibm-midrange

我正在编写一个应用程序来连接到服务器上的数据库（使用 SQL 与数据库对话的 AS400 服务器）。IBM 提供了一个 java 工具箱来访问名为 jt400android 的 jar 中的服务器。

我有一个测试功能：

```
protected void ConnectionTest()
{
      AS400 system = new AS400("jc400"); 
      try
      {
        system.connectService(AS400.RECORDACCESS);
      }
      catch(Exception e)
      {
        e.printStackTrace();
        System.exit(0);
      }
} 
```

AS400 是 com.ibm.as400.access.* 中 jt400android.jar 中包含的一个函数，用于处理与 AS400 机器的套接字协议、连接和身份验证。（我采用了这种方法，因为 JDBC 显然不是一个好方法）。

代码编译得很好，没有错误或警告，但是当我在我的 AVD 上运行 apk 时，我得到了这个错误

```
03-12 22:44:30.300: E/dalvikvm(484): Could not find class 'com.ibm.as400.access.AS400', referenced from method jcpaper.android.jc400droid.MainActivity.ConnectionTest 
```

我搜索了论坛并尝试了以下建议：

1.  将 jar 添加到 Java Build Path > Libraries（这样做是为了使代码编译）
2.  检查 Java Build Path > Order and Export 上的 jar
3.  在 [项目文件夹]/libs 中包含 jar 的副本

每次我最终都会遇到同样的找不到类错误。

我在 Windows XP 上运行 Eclipse for mobile (Juno v1)，为 Android 2.3.3 构建。

关于这里发生的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:54:34.650

JTOpen Lite/JTLite 库可能会提供更好的连接服务器的方式。这些库是 IBM 的新库，专为 Android 设备上的特定用途而设计。

[JTOpen Lite - IBM Developer Works](https://www.ibm.com/developerworks/mydeveloperworks/wikis/home/wiki/IBM%20i%20Technology%20Updates/page/JTOpen%20Lite%20and%20JTLite%20%E2%80%93%20enabling%20mobile%20devices%20which%20use%20java?lang=en)

[JTOpen Lite Javadoc](http://javadoc.midrange.com/jtopen/com/ibm/jtopenlite/package-summary.html)

确保将 .jar 添加到构建路径并正确导出库。

您尝试使用的记录级访问方法是将应用程序连接到 DB2 数据库的较旧方法，因此您可能很难找到有关它的信息。

# php - 使用 AJAX / HTML 5 上传文件

> ID：15374223
> 
> 赞同：0
> 
> 时间：2013-03-12T23:25:22.000
> 
> 标签：php, javascript, jquery, html, file-upload

我正在尝试使用 AJAX 和 HTML5 来处理从客户端计算机上传到服务器上的文件夹的文件。

我正处于用户可以在他们的机器上浏览文件并选择它的地方。单击该`upload`按钮是为了执行完成文件上传所需的脚本，这就是我卡住的地方。我不确定如何使用`upload.php`脚本继续编码此文件上传功能的功能。

我的问题是，假设服务器上的文件夹名为`docs`. `docs`用户单击上传按钮后，如何将用户选择的文件下载到服务器文件夹？

我很感激任何建议。

提前谢谢了！

jQuery

```
 $.ajax({
        url: 'upload.php',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        success: function(data){
            alert("OK");
            $('body').html(data);
        },
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false

    }); 
```

HTML

```
 <form enctype="multipart/form-data">
    <input name="file" type="file" />
    <input type="button" value="Upload" />
    </form>
    <progress></progress> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:49:31.223

我相信这段代码应该适用于您的设置。基本上它会检查你是否在第一个 if 语句中上传了一些东西。然后它检查文件是否存在于第二个语句中。如果没有，则它将文件移动到上传文件夹中。

```
<?php
if ($_FILES["file"]["name"] != NULL) {
  if (file_exists("upload/" . $_FILES["file"]["name"]))
    echo $_FILES["file"]["name"] . " already exists. ";
  else
    move_uploaded_file($_FILES["file"]["tmp_name"], "uploads/" . $_FILES["file"]["name"]);
}
?> 
```

请记住，.php 脚本需要正确的权限以及您将其放入的任何文件夹。我相信`766`应该这样做。

您还应该在 ajax 中添加一个错误。成功后请添加以下内容

```
error : function(XMLHttpRequest, textStatus, errorThrown) {
  console.log('An Ajax error was thrown.');
  console.log(XMLHttpRequest);
  console.log(textStatus);
  console.log(errorThrown);
}, 
```

# c# - 使用 jquery 进行多次迭代的不同输入元素

> ID：15374226
> 
> 赞同：0
> 
> 时间：2013-03-12T23:25:35.740
> 
> 标签：c#, jquery

我正在使用带有以下标记的 MVC3 剃须刀：

```
<div class="budget">
<!--line item-->
<div class="budget-row">
    <div class="row">
        <div class="twelve columns">
            <div class="row">
                <div class="two mobile-one columns">
                <label class="right inline">Item:</label>
                </div>
                <div class="ten mobile-three columns">
                @Html.TextBox("description[]", "", new { @class = "expand" })
                </div>
            </div>
            <div class="row">
                <div class="two mobile-one columns">
                <label class="right inline">Cost:</label>
                </div>
                <div class="two mobile-one columns field-left">
                @Html.TextBox("amount[]", "0", new { @class = "expand" })
                </div>
                <div class="one mobile-one columns">
                <label class="right inline">Markup:</label>
                </div>
                <div class="one mobile-one columns field-left">
                @Html.TextBox("markup_amount[]", "0", new { @class = "expand" })
                </div>
                <div class="one mobile-one columns field-left">
                <select id="markup_type[]" style="display:none;">
                <option value="P" SELECTED>%</option>
                <option value="D">$</option>
                </select>
                </div>
            </div>
        </div>
    </div><!--row-->    
</div>
<!--end line item-->

    <a class="button radius small success middle" href="#" id="submit">Submit</a>
</div> 
```

“budget” div 是整体 div，“budget-row” div 可以是一行或多行。我正在寻找一个迭代捕获每个输入的值。我试过这个：

```
$("#submit").click(function() {
    $(".budget input[type=text]").each(function() {
        alert(this.value);
    });
    return false;
}); 
```

坦率地说，尝试了很多事情，在这一点上可能还没有接近。这也只会返回我的文本框。

谢谢

编辑这是添加输出代码：

```
<div class="budget">
<!--line item-->
<div class="budget-row">
    <div class="row">
        <div class="twelve columns">
            <div class="row">
                <div class="two mobile-one columns">
                    <label class="right inline">Item:</label>
                </div>
                <div class="ten mobile-three columns">
                    <input class="expand" id="description__" name="description[]" type="text" value="" />
                </div>
            </div>
            <div class="row">
                <div class="two mobile-one columns">
                    <label class="right inline">Cost:</label>
                </div>
                <div class="two mobile-one columns field-left">
                    <input class="expand" id="amount__" name="amount[]" type="text" value="0" />
                </div>
                <div class="one mobile-one columns">
                    <label class="right inline">Markup:</label>
                </div>
                <div class="one mobile-one columns field-left">
                    <input class="expand" id="markup_amount__" name="markup_amount[]" type="text" value="0" />
                </div>
                <div class="one mobile-one columns field-left">
                    <select id="markup_type[]" style="display:none;">
                        <option value="P" SELECTED>%</option>
                        <option value="D">$</option>
                    </select>
                </div>
            </div>
        </div>
    </div><!--row-->    
</div>
<!--end line item-->

<a class="button radius small success middle" href="#" id="submit">Submit</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:40:06.317

这就是我想出的获得您选择的价值的方法。不确定这是否是您所需要的全部，或者是否还有更多。

```
<div class="row">
    <div class="two mobile-one columns">
        <label class="right inline">Cost:</label>
    </div>
    <div class="two mobile-one columns field-left">
        <input type="text" value="1" class="first" />
    </div>
    <div class="one mobile-one columns">
        <label class="right inline">Markup:</label>
    </div>
    <div class="one mobile-one columns field-left">
        <input type="text" value="2" class="second" />
    </div>
    <div class="one mobile-one columns field-left">
        <select id="markup_type[]" class="first">
            <option value="A" SELECTED>%</option>
            <option value="B">$</option>
        </select>
    </div>
    <div class="one mobile-one columns field-left">
        <select id="test_type[]" class="second">
            <option value="Z" SELECTED>%</option>
            <option value="Y">$</option>
        </select>
    </div>
</div>

$(document).ready(function () {
    $("#submit").click(function () {
        $("select :selected").each(function(){
            alert($(this).val());
            //get the corresponding input for this select
            var cName = $(this).parent().attr("class");
            var div = $(this).closest(".row");
            var input = $("." + cName, div);
            alert($(input).val());
        });
        return false;
    });
}); 
```

你可以在这里查看[小提琴](http://jsfiddle.net/HUegP/33/)。

请注意，我们使用类将选择绑定到输入。在这个例子中，我用 class="first" 标记了输入，用 class="first" 标记了 select 以将它们联系在一起。

让我知道这是否适合您。

# couchdb - couchDB reduce：rereduce 是否保留地图结果的顺序？

> ID：15374228
> 
> 赞同：0
> 
> 时间：2013-03-12T23:25:50.377
> 
> 标签：couchdb

使用 couchdb 视图，我们得到按键排序的结果。我一直在使用它来获取与最高数字相关的值。例如，取这个结果（键：值形式）：

```
{1:'sam'}
{2:'jim'}
{4:'joan'}
{5:'jill'} 
```

couchDB 将根据键对它们进行排序。（将键视为“分数”可能会有所帮助。）我想找出谁的分数最高或最低。

我写了一个这样的reduce函数：

```
function(keys, values) {

var len = values.length;
return values[len - 1];

} 
```

我知道有 _stat 等，但这些在我的应用程序中是不可能的（这是一个精简的假设示例）。

通常当我运行这个reduce时，我会得到'sam'或'jill'，这取决于是否设置了descending。这就是我要的。但是，在大型数据集中，有时我会从列表中间找到某个人。

我怀疑这发生在 rereduce 上。我曾假设当 rereduce 运行时，结果的顺序会被保留。但是，我无法保证确实如此。我知道在 rereduce 时，键为空，所以按照正常的排序规则，它们不会被排序。是这样吗？

如果是这样，关于如何获得最高分的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:48:14.360

是的，我不认为排序顺序是有保证的，可能是因为在集群环境中不能保证排序。我怀疑你在这里使用 map/reduce 的方式有点不确定，但如果你真的想要一个好的答案，你应该发布你的视图代码。

# oauth - OAuth 规范：为什么有些实现返回一个 access_token + access_token_secret 而其他的只是一个访问令牌？

> ID：15374232
> 
> 赞同：1
> 
> 时间：2013-03-12T23:26:27.477
> 
> 标签：oauth, oauth-2.0

一个例子：

Facebook`https://graph.facebook.com/oauth/access_token`端点在传递访问令牌的代码时，返回`access_token`and `expires`。Instagram 似乎也是如此。

另一方面，Twitter`https://api.twitter.com/oauth/access_token`同时返回 an`access_token`和 an `access_token secret`。

随后，在访问 Facebook API 端点时，我只需将 access_token 与请求一起发送。另一方面，访问 Twitter 端点也需要使用密钥对请求进行签名。

我问的原因：我正在实现自己的 OAuth Web 应用 API，并希望确保我正确符合标准。我最初将它设计为像 Twitter 一样，但我不明白为什么 Facebook 和 Instagram 会以他们的方式行事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:33:02.097

Facebook 和 Instagram 使用 OAuth 2.0 协议，而 Twitter 使用 OAuth 1.0a 协议。[此处](https://stackoverflow.com/questions/4113934/how-is-oauth-2-different-from-oauth-1)和[此处](https://stackoverflow.com/questions/5643828/whats-the-difference-between-oauth-and-oauth-2-0)的帖子可能会帮助您了解差异。

# c++ - 如何使用 void printMatrix(ostream& os = cout) const？

> ID：15374234
> 
> 赞同：0
> 
> 时间：2013-03-12T23:26:30.127
> 
> 标签：c++

我正在尝试学习 C++，我有一个任务，用这个函数做一些打印，我不明白如何使用 ostream。任何人都可以帮助我吗？

```
 void Matrix::printMatrix( ostream& os = cout ) const{
    for(int i=0; i<n; i++)
      for(int j=0; i<m; j++)
        os<<elements[i][j]<<"\n";
    } 
```

我试过这样做，但它给我带来了一些错误，我不知道如何处理。错误：

Matrix.cpp:47:48：错误：为 'void Matrix::printMatrix(std::ostream&) const' [-fpermissive] 的参数 1 给出的默认参数在 Matrix.cpp:8:0: Matrix.h 中包含的文件中:25:10: 错误：在 'void Matrix::printMatrix(std::ostream&) const' [-fpermissive] 中的先前规范之后

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T23:31:22.497

您不应**在**声明和定义中指定函数的默认参数*：*

```
class Matrix
{
    // ...

    // Default argument specified in the declaration...
    void printMatrix( ostream& os = cout ) const;

    // ...
};

// ...so you shouldn't (cannot) specify it also in the definition,
// even though you specify the exact same value.
void Matrix::printMatrix( ostream& os /* = cout */ ) const{
//                                    ^^^^^^^^^^^^
//                                    Remove this

    ...
} 
```

或者，您可以在定义中保留默认参数规范并在声明中省略它。重要的是你两者都没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T23:28:00.847

该函数有一个输出流作为参数，并有标准输出 ( `std::cout`) 作为默认值（尽管在函数定义中没有正确指定，而不是在声明中应该是这样）。你可以这样做：

```
// use default parameter std::cout
Matrix m + ...;
m.printMatrix();

// explicitly use std::cout
m.printMatrix(std::cout);

// write to a file
std::ofstream outfile("matrix.txt");
m.printMatrix(outfile); 
```

# jquery - jQuery HTTP POST

> ID：15374235
> 
> 赞同：1
> 
> 时间：2013-03-12T23:26:37.040
> 
> 标签：jquery

我有将字段附加到表单中的 jquery 代码。当我提交该表单时，附加的字段对 PHP 不可用。我有什么特别需要做的才能选择这些字段吗？这是代码：

```
$(document).ready(function() {
   window.unique = 0;

    //hides alert
    $("hide").click(function(){
     $("#alert").hide();
    });

     $(document).on('click', '#toggle_header', function(){
         window.unique++
            $("#header_list").append("<li><input type='text' name='header_name" + unique  + "' placeholder='name'><input type='text' name='header_value" + unique  + "' placeholder='value'><a href='#' id='toggle_header_remove'><i class='icon-remove'></i></a></li>");
     });

     $(document).on('click', '#submit_query', function() {
        $.ajax({
            url: 'index.php',
            type: 'post',
            data: $(this).serialize(),
            cache: false,
            dataType: 'json',
            success: function(data) {
            }
            })
    })

});

<form method='post' action='index.php' id='main'>
                <input class="span5" id="appendedInputButtons" type="text" name='url'>
                <button class='btn btn-inverse' id='submit_query'>GET</button>

            </div>
            </br><a href='#' id='toggle_header'>add header<i class='icon-plus'></i></a>
            </br>
            <ol id='header_list'>
            </ol>
</form> 
```

php 中 POST 变量的转储将显示表单中输入的所有值，除了使用 jquery 添加的值。

# html - 如何在同一行中更改样式

> ID：15374240
> 
> 赞同：1
> 
> 时间：2013-03-12T23:26:55.960
> 
> 标签：html, css, layout

我有一个网页的一部分（包含 Bootstrap CSS），其中包含一个`<div>`ID 为“drop-zone”的网页，稍后我会在 javascript 中使用它来实现拖放功能：

```
<div id="drop_zone">
    <p style="color: darkgray">Drop</p>
    <p style="color: black">test.txt</p>
    <p style="color: darkgray"> here</p>
</div> 
```

我有`<p>`s 因为我想改变这一行的样式，但是如果我使用上面的代码，或者如果我将 s 交换`<p>`为`<div>`s，则代码会呈现在多行上，如下所示：

> 降低
> 
> **测试.txt**
> 
> 这里

当我真的希望它看起来像：

> 在此处删除**test.txt**

我确定这是一个简单的解决方法，但是这里有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T23:29:47.907

使用[`<span>`](http://www.w3.org/TR/1999/REC-html401-19991224/struct/global.html#h-7.5.4)而不是`<p>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T23:32:51.413

`<p>`并且`<div>`都是块元素，默认情况下将在单独的行上显示其内容。您最好使用`<span>`将内联显示其内容的 a 。

```
<div id="drop_zone"><span style="color: darkgray">Drop</span><span style="color: black">test.txt</span><span style="color: darkgray"> here</span></div> 
```

您真的应该考虑将所有样式也移动到样式表中，而不是`style`像您那样在属性中定义它们，因为这将使您的页面变得更加复杂时更容易更改样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T23:29:46.643

在您的 div 或 p 标签中尝试以下操作，或者更好地创建一个具有此属性的类：

```
display : inline; 
```

或者

```
display : inline-block;

<div id="drop_zone" style='display:inline;'><p style="color: darkgray; display:inline;"> Drop </p><p style="color: black; display:inline;"> test.txt </p><p style="color: darkgray;  display:inline;'"> here</p></div> 
```

这是[jsdfiddle](http://jsfiddle.net/5sVV3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T23:30:34.590

这是因为`<p>`它是块级元素，所以默认情况下会导致换行。你可以将其替换为内联元素（`<span>`）或将`<p>`显示设置为内联或内联块

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T23:31:00.403

我认为你可以使用`<span>`而不是`<p>`

```
<div id="drop_zone"><span style="color: darkgray">Drop </span><span style="color: black">test.txt</span><span style="color: darkgray"> here</span></div> 
```

# android - 即使在 Activity 中也找不到方法 onClick

> ID：15374242
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:27:04.863
> 
> 标签：android, onclick

我做了一个按钮：

```
 <Button 
        android:id="@+id/btn_dialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/showDig"
        android:onClick="onCLick"
        /> 
```

以及`onClick`主要活动中的方法

```
 public void onClick(View v){
        Log.d("click test", "log");
        this.showDialog(0);
    } 
```

但是当我单击按钮时，我得到：

```
03-12 16:37:24.995: E/AndroidRuntime(755): FATAL EXCEPTION: main
03-12 16:37:24.995: E/AndroidRuntime(755): java.lang.IllegalStateException: Could not find a method onCLick(View) in the activity class com.example.telefon.MainActivity for onClick handler on view class android.widget.Button with id 'btn_dialog'
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.view.View$1.onClick(View.java:2670)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.view.View.performClick(View.java:3110)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.view.View$PerformClick.run(View.java:11934)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.os.Handler.handleCallback(Handler.java:587)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.os.Looper.loop(Looper.java:132)
03-12 16:37:24.995: E/AndroidRuntime(755):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-12 16:37:24.995: E/AndroidRuntime(755):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 16:37:24.995: E/AndroidRuntime(755):  at java.lang.reflect.Method.invoke(Method.java:491)
03-12 16:37:24.995: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-12 16:37:24.995: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-12 16:37:24.995: E/AndroidRuntime(755):  at dalvik.system.NativeStart.main(Native Method)
03-12 16:37:24.995: E/AndroidRuntime(755): Caused by: java.lang.NoSuchMethodException: onCLick [class android.view.View]
03-12 16:37:24.995: E/AndroidRuntime(755):  at java.lang.ClassMembers.getConstructorOrMethod(ClassMembers.java:235) 
```

整个 xml 和 .java

```
package com.example.telefon;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String s;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void onClick(View v){
        Log.d("click test", "log");
        this.showDialog(0);
    }

   } 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />
    <Button 
        android:id="@+id/btn_dialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/showDig"
        android:onClick="onCLick"
        />   
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:28:18.113

问题是**onClick 属性**。更改您的财产

```
android:onClick="onCLick" 
```

到

```
android:onClick="onClick" 
```

不要忘记，它是区分大小写的，所以如果您的方法的签名是**onCLick**，它将与**onClick**不匹配。

```
public void onClick(View v){
        Log.d("click test", "log");
        this.showDialog(0);
    } 
```

现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T06:18:57.640

另外，如果有人遇到类似的问题，我发现找不到我的 XML onClick 方法 - 这是因为它位于附加到 XML / 按钮的 Fragment 中，而不是 Activity 中。所以我这样做了：

```
 /*
   *   onInlineClick passthrough
   */
   public void onInlineClicked(View v) {
       myFragment.onInlinePressed(v);
} 
```

# ruby-on-rails - 错误：“rake/rdoctask”已过时且不再受支持

> ID：15374249
> 
> 赞同：1
> 
> 时间：2013-03-12T23:27:43.433
> 
> 标签：ruby-on-rails, rake, mysql2, rdoc

出乎意料的是，我开始收到以下错误消息：

```
(in /Users/me/.rvm/gems/ruby-1.9.3-p125@mysql2/gems/rails-0.9.5)
rake aborted!
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead.
/Users/me/.rvm/gems/ruby-1.9.3-p125@mysql2/gems/rails-0.9.5/Rakefile:3:in `<top (required)>' 
```

当我做 rails s 时（在我的开发环境终端 - Mac Mountain Lion）。这个应用程序正在生产中，所以我去了生产环境，做了一个捆绑展示，并修改了我的 Gemfile，以对 gems 版本进行硬编码。

这是我现在在本地开发环境中拥有的内容（产生错误消息的原因）。

```
actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
annotate (2.4.1.beta1)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bootstrap-datepicker-rails (0.6.15)
bootstrap-sass (2.0.2)
builder (3.0.4)
bundler (1.1.3)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.1)
commonjs (0.2.6)
devise (2.0.4)
diff-lcs (1.1.3)
erubis (2.7.0)
execjs (1.4.0)
factory_girl (3.2.0)
factory_girl_rails (3.2.0)
hike (1.2.1)
i18n (0.6.4)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.1)
less (2.2.2)
less-rails (2.2.6)
libv8 (3.3.10.4)
mail (2.4.4)
mime-types (1.21)
multi_json (1.6.1)
mysql2 (0.3.11)
nokogiri (1.5.6)
orm_adapter (0.0.7)
polyglot (0.3.3)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.3)
railties (3.2.3)
rake (10.0.3)
rdoc (3.4)
rest-client (1.6.7)
rspec (2.6.0)
rspec-core (2.6.4)
rspec-expectations (2.6.0)
rspec-mocks (2.6.0)
rspec-rails (2.6.1)
sass (3.2.7)
sass-rails (3.2.5)
sprockets (2.1.3)
stripe (1.7.0)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.5)
tinymce-rails (3.4.8)
treetop (1.4.12)
twitter-bootstrap-rails (2.1.0)
tzinfo (0.3.37)
uglifier (1.2.4)
warden (1.1.1)
webrat (0.7.1) 
```

我研究了 Stackoverflow 和网络，但没有任何建议有效（将 rake gem 版本更改为不同的版本。如 0.8.7 等，编辑我的应用程序 Rakefile 以抑制弃用错误等）。我还添加了 rdoc，在我的 Rakefile 中，我需要 'rdoc/task'

仍然，同样的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-22T11:41:45.340

只是为了帮助遇到这种麻烦的其他人。如果您像我一样，那么您的问题是当前版本的 rails 是 4，而您想使用像 3.0.7 这样的旧版本

例如，如果您安装全新的 rails 来学习它，并且您使用的教程适用于 3.0.x 版本的 rails 或者您的工作需要使用旧版本的 rails ..那么您可以进入这个洞。

就我而言，我得到了一个 3.0.7 rails 项目，并被告知要学习 rails 并对这段代码进行一些改进。

所以，我刚开始学习 rails 并一直在学习教程，直到在执行“rake db:migrate”时出现此错误

```
rake aborted!
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead.
/Users/pj/.rvm/gems/ruby-1.9.3-p448/gems/railties-3.0.7/lib/rails/tasks/documentation.rake:1:in `require'
/Users/pj/.rvm/gems/ruby-1.9.3-p448/gems/railties-3.0.7/lib/rails/tasks/documentation.rake:1:in `<top (required)>'
/Users/pj/.rvm/gems/ruby-1.9.3-p448/gems/railties-3.0.7/lib/rails/tasks.rb:15:in `load'
/Users/pj/.rvm/gems/ruby-1.9.3-p448/gems/railties-3.0.7/lib/rails/tasks.rb:15:in `block in <top (required)>' 
```

发生这种情况是因为我使用的是旧版本的 rails .. 在我的情况下是 3.0.7 如果您像我当时那样运行“捆绑秀”，您可能会看到您使用的是 rake 版本 10.0.0 或类似的东西...并且您需要运行 rake 0.9.2 ...这就是问题的来源..

我的解决方案是（a）将 gem 添加到我的 gemfile 和（b）到捆绑安装

因此，在我的 gemfile 中，我添加了：

```
gem 'rake', '0.9.2' 
```

然后做了一个

```
'bundle install' 
```

收到这条消息：

```
You have requested:
  rake = 0.9.2

The bundle currently has rake locked at 10.1.0.
Try running `bundle update rake` 
```

所以我这样做了...

```
bundle update rake. 
```

一切顺利。

然后当我做'rake db：migrate'时它就起作用了。

希望这可以帮助某人。维达。

PS：如果您像我一样是 Rails 新手，并且继承了旧的 Rails 应用程序，那么看在上帝的份上，永远不要运行“捆绑更新”，否则您将进入一个痛苦的世界。该命令将您的所有 gem 更新到最新版本，最终您会遇到大量不兼容的问题。唯一的出路是如果你有幸安装了 git 并且可以执行“git checkout”返回...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T07:22:32.083

`rake gems:install`当我尝试通过我的 rails 版本是 rails2.3.2 并且我安装了 rvm的命令安装 gems 时，我遇到了同样的问题。我的宝石清单是，

```
actionmailer (2.3.2)
actionpack (2.3.2)
activerecord (2.3.2)
activeresource (2.3.2)
activesupport (2.3.2)
bundler (1.3.5)
rails (2.3.2)
rake (10.0.4)
rubygems-bundler (1.1.1)
rvm (1.11.3.7) 
```

所以通过命令卸载了rake

`rvm use ruby-1.8.7-p371@global && gem uninstall rake -v 10.0.4`

然后我安装了旧版本的 rake

`rvm use ruby-1.8.7-p371@global && gem install rake -v 0.8.7`

现在`rake gems:install`工作正常

希望它可以帮助一些人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T15:03:02.173

升级到`rails 4.0.0`我得到了同样的错误。

```
rails -v
(in /Users/oma/.rvm/gems/ruby-2.0.0-p247/gems/rails-0.9.5)
rake aborted!
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead.
/Users/oma/.rvm/gems/ruby-2.0.0-p247/gems/rails-0.9.5/Rakefile:3:in `<top (required)>'
(See full trace by running task with --trace) 
```

为了升级，我删除了 Gemfile 中的版本号

```
 source 'https://rubygems.org'
 gem 'rails'   # NO VERSION 
```

并`bundle update`按照我认为的那样做，这会选择最后一个。但不知何故，我得到了`rails 0.9.5`。感觉像个恶作剧，真的，哈哈

```
$ gem list rails
rails (4.0.1.rc2, 4.0.0, 0.9.5) 
```

我不能 100% 肯定地告诉你这是原因，但我们是两个人，在同一个分支上工作并看到相同的错误。该修复对我们俩都有效。简单地

**指定导轨版本！**

```
$gem uninstall rails -v 0.9.5
Gemfile
  source 'https://rubygems.org'
  gem 'rails', '4.0.0' 
```

然后捆绑，运行 rails -v，傻笑（或哭泣）并重新开始制作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:50:14.770

[在 StackOverflow 上](https://stackoverflow.com/questions/7993162/i-have-still-rake-rdoctask-deprecated-warning)查看类似的问题解决方案

另一种选择是使用（取自 Redmine Rakefile 的示例）

```
require 'rdoc'
require 'rdoc/task' 
```

代替

```
require 'rake/testtask'
require 'rake/rdoctask' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T21:51:20.570

以下适用于我使用 ruby​​ 1.9.3p448（2013-06-27 修订版 41675）：

1）使用 rake 版本 10.1.0（在您的 Gemfile 中放入以下内容）：

```
gem 'rake', '10.1.0' 
```

（请注意，您可能会使用其他版本，但下面的行号可能会更改。）

2) 注释 Rakefile 的第 54 行并将其替换如下：

```
#require 'rake/rdoctask'
gem 'rdoc', ">= 2.4.2"
require 'rdoc/task' 
```

3) 测试

```
$ bundle install
$ bundle exec rake 
```

# excel - Do-while 循环擦除 Excel 中具有特定值的单元格

> ID：15374255
> 
> 赞同：0
> 
> 时间：2013-03-12T23:28:10.190
> 
> 标签：excel, vba

我想删除 D 列中所有具有“+”和“-”的单元格。我尝试了以下宏，我认为它会起作用，但没有任何反应。

```
 Sub doWhile4()

'Replace blank spaces with underscores in a Range of Cells, using VBA loops; or 'Remove     
 blank spaces in a Range of Cells, using VBA loops.

 Dim iCell As Range
 Dim textString As String
 Dim n As Integer

'iCell is a Cell in the specified Range which contains the textString
'textString is the text in a Cell in which blank spaces are to be replaced with
'underscores. n is the position of blank space(s) occurring in a textString

 For Each iCell In ActiveSheet.Range("D2:D34")
     textString = iCell
     n = InStr(textString, "+")

    'The VBA InStr function returns the position of the first occurrence of a string within
    'another string. Using this to determine the position of the first blank space in the 
    'textString.

     Do While n > 0
         textString = Left(textString, n - 1) & Right(textString, Len(textString) - n)

        'This line of code is to remove all blank spaces in the   
        'textString

         n = InStr(textString, "+")
     Loop
     iCell = textString
 Next

 End Sub 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:54:31.640

如果单元格包含 + 或 - 尝试清除值

```
Option Explicit

Sub doWhile4()

'Replace blank spaces with underscores in a Range of Cells, using VBA loops; or
'Remove blank spaces in a Range of Cells, using VBA loops.

 Dim iCell As Range
 Dim textString As String
 Dim n As Integer
 Dim hasPlus As Boolean
 Dim hasMinus As Boolean

'iCell is a Cell in the specified Range which contains the textString
'textString is the text in a Cell in which blank spaces are to be replaced with
'underscores. n is the position of blank space(s) occurring in a textString

 For Each iCell In ActiveSheet.Range("D2:D34")
     textString = iCell
     'reset our boolean variables for each iteration
     hasPlus = False
     hasMinus = False
     If InStr(textString, "+") > 0 Then hasPlus = True
     If InStr(textString, "-") > 0 Then hasMinus = True

    'The VBA InStr function returns the position of the first occurrence of a string within
    'another string. Using this to determine the position of the first blank space in the
    'textString.

     If hasPlus Or hasMinus Then iCell.Value = vbNullString

 Next

 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:15:31.217

试试下面的。

本质上，它在 F 列中创建一个公式，在 D 列中搜索 + 或 - 并在找到时返回 NA# 错误，然后我们使用 Excels SpecialCells 函数返回并清除所有具有该错误的单元格...

```
Sub clearCells()
'
Dim sFormula As String
'
sFormula = "=IF(IF(OR(IF(ISERROR(FIND(""+"",A:A)),"""",IF(FIND(""+"",A:A)>0,1,0))=1,IF(ISERROR(FIND(""-"",A:A)),"""",IF(FIND(""-"",A:A)>0,1,0))=1),1,0)=1,NA(),"""")"

'
' put in formula to find the cells with the characters in them...
Range("F1:F" & Range("D1").End(xlDown).Row).Formula = sFormula
'
' now clear the cells returned by SpecialCells ...
Range("A1").Worksheet.UsedRange.SpecialCells(xlCellTypeFormulas, xlErrors).Offset(0, -2).Clear
'
' clean up the formula
Range("F1:F" & Range("D65536").End(xlUp).Row).clear
'
End Sub 
```

我希望这会有所帮助

菲利普

# python - 熊猫数据框按行数分组

> ID：15374261
> 
> 赞同：3
> 
> 时间：2013-03-12T23:28:23.313
> 
> 标签：python, numpy, pandas

如果你有一只熊猫`DataFrame({'a':[1,2,3,4,5,6,7,8,9]})`，有没有一种简单的方法可以将它分成 3 组或任意数量的组？

我知道这可以通过添加一个包含允许分组的值的额外列来完成，例如，您可以将上述 DataFrame 加入并按添加的`[1,1,1,2,2,2,3,3,3]`列分组。但似乎不需要为此操作添加额外的列。

我还可以创建一个索引`np.linspace(0,9,4)`数组并使用它们作为 DataFrame.ix[] 的参数循环遍历数组值，但这对于大型 DataFrame 来说似乎并不快。

我错过了更简单的方法吗？

**==解决方案==**

从下面的答案中，我首选的解决方案是使用[numpy.array_split](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_split.html)（如果与 numpy.split 不同，如果进行不相等的划分，它不会引发异常），您还可以传递要拆分的索引数组而不是结果的数量件所需的。使用下面的行，您可以将 DataFrame (df) 拆分为 x 行的较小 DataFrame

```
split_df = np.array_split(df, np.arange(0, len(df),x)) 
```

split_df 是一个列表，其中第一个对象是一个空的 numpy 数组，以下对象是拆分的 DataFrame。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T23:49:21.940

根据您的示例`DataFrame`：

```
In [25]: df.index/3
Out[25]: Int64Index([0, 0, 0, 1, 1, 1, 2, 2, 2], dtype=int64)

In [26]: for k,g in df.groupby(df.index/3):
    ...:     print k,g
    ...:     
0    a
0  1
1  2
2  3
1    a
3  4
4  5
5  6
2    a
6  7
7  8
8  9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T01:56:32.450

这是另一种使用`numpy.split`or的方法`numpy.array_split`：

```
df = pd.DataFrame({"A":np.arange(9), "B":np.arange(10, 19)}, 
                  index=np.arange(100, 109))
for tmp in np.split(df, 3):
    print tmp 
```

输出是：

```
 A   B
100  0  10
101  1  11
102  2  12
     A   B
103  3  13
104  4  14
105  5  15
     A   B
106  6  16
107  7  17
108  8  18 
```

# javascript - 使用 id 检查验证并分配自定义错误

> ID：15374262
> 
> 赞同：0
> 
> 时间：2013-03-12T23:28:25.563
> 
> 标签：javascript, jquery, html

（我没有使用 Jquery 验证）

如果该字段不正确或为空，我将尝试返回自定义错误。例如，如果该`#id_first_name`字段为空。将字符串“名字”附加`p#error`到结果：

```
Please fill in your first name 
```

我在这里做了一个[小提琴](http://jsfiddle.net/8YgNT/14/)来说明我的意思。所以在必填字段列表中......我如何能够获取/检查每个单独的必填ID并分配相应的错误？

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:36:23.080

你的小提琴应该尽可能基本，删除所有其他信息，但你可以尝试这样的事情，

```
$('form').on('submit',function(){
   $('input').each(function(){
      $this = $(this);
      if($this.val() == 'null')
      {
         $('p#error').append('Please enter your ' + $this.attr('placeholder'));
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:32:22.023

您可以执行以下操作

```
$('form input').on('blur', function() {
     var id = $(this).attr('id');
     var val = $(this).val();
     if(id == 'myInput') {
          if(!val.length) {
              $('#error').append('Please enter a value into the input');
          }
     }
}); 
```

这是一种进行表单验证的简单方法，只需根据您的需要定制示例即可。

**编辑**

如果您希望它在您的示例中工作，最好`div`使用 id`error`并附加`p`带有相应错误值的标签。

快乐编码:)

# objective-c - 如何将模型传递给 Core Data 中的控制器

> ID：15374268
> 
> 赞同：0
> 
> 时间：2013-03-12T23:29:09.297
> 
> 标签：objective-c, cocoa-touch, core-data, relationship

假设我有一个名为 RecipeBook 的核心数据类，它有一个名为 recipes 的属性（关系），即一个配方对象的 NSSet。

我在 UITableView 上显示食谱书，当用户点击一个单元格时，它应该在另一个 UITableViewController 上显示食谱。

我应该将什么作为模型传递给最后一个 UITableViewController：

*   一个上下文和一个 fetchRequest
*   还是配方对象的 NSSet？

如果数据库发生变化，NSSet 会“自动”更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:39:08.680

根据您的描述，我可能会通过所选`RecipeBook`实例。从中我可以（大概）获取书中包含的所有食谱并将它们显示在表格中。这假设存在一种关系`RecipeBook`——`Recipe`根据你的描述——应该是真实的。如果我需要对数据存储做任何其他工作，我可以询问`RecipeBook`它的托管对象上下文并使用它。

没有`NSSet`获取的对象会自动更新。但是从 a`RecipeBook`到它`Recipe`的 s 的关系将在任何时候从食谱书中添加或删除食谱时更新。

最后 - 将其中任何一个直接传递给 a`UITableView`没有多大意义。Apple 的 iOS 框架在设计时就考虑到了 MVC，而违背这一点会使事情变得比他们需要的要困难得多。如果你有一个`UITableViewController`，你可以将你的模型对象传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:37:15.583

通常，您不应将“模型”对象传递给视图对象。我最喜欢的思考方式是视图实际上是模型的另一种形式（将它们都视为数据的简单表示）。控制器的工作是确保两个表示都不需要知道对方如何存储它的表示。

所以基本上，您的控制器将成为您的数据委托，并负责使用它自己对核心数据模型的引用正确填充表格单元格。

自动问题取决于您的核心数据设置，但通常答案是肯定的。默认情况下，CD 使用键值编码，它只允许您使用`valueForKey:`. 更高级的设置包括让 Xcode 为您生成类，在这种情况下，只需单击几下鼠标，您就可以从更新的模型中重新生成“点符号”访问器方法。

# c - C中的矩阵乘法多进程

> ID：15374285
> 
> 赞同：0
> 
> 时间：2013-03-12T23:30:27.953
> 
> 标签：c, multiprocessing, matrix-multiplication

我想通过 fork 使用多个进程进行矩阵乘法，并使用共享内存，每个进程为小型矩阵计算一行，但对于较大的矩阵，不可能为每一行创建一个进程。所以它应该计算一个由大小决定的行块。例如，最多 10 行它应该计算每个进程的一行，然后说对于 20 行，一个进程应该计算每个进程 4 行。我无法对其进行编程，因为我可以将行号作为进程数。假设我将进程数设为 8，那么每个块将有 N/8 行。但是矩阵的大小应该是 8 的倍数，进程数应该是可变的。假设它有 6 个 CPU，我可以采用进程数吗保持不变，即 6。什么是正确的方法？我应该怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:37:37.630

这是一些演示矩阵 mult 的示例代码。在 pthreads 中。我几乎立即在搜索引擎中找到了它。它显示了一种执行您描述的方法。
[http://www.cs.arizona.edu/classes/cs422/spring13/examples/matmult-dyn.c](http://www.cs.arizona.edu/classes/cs422/spring13/examples/matmult-dyn.c)

您可能需要对其进行一些微调以确定最佳方法。

您可能还应该阅读这篇文章： [http ://aristeia.com/TalkNotes/PDXCodeCamp2010.pdf](http://aristeia.com/TalkNotes/PDXCodeCamp2010.pdf)

# class - 带有 2 个参数的 Property Let 有什么问题？

> ID：15374287
> 
> 赞同：0
> 
> 时间：2013-03-12T23:30:34.257
> 
> 标签：class, properties, vbscript, syntax-error

用于说明的示例代码：

```
Option Explicit
Dim obj: Set obj = New Foo
WScript.Echo "EnvFlags(0)=" & obj.EnvFlags(0) 'EnvFlags(0)=False
WScript.Echo Join(obj.EnvFlags(-1), ",")      'False,False,False

On Error Resume Next 'enabled just for facility's sake
obj.EnvFlags 0, True '<< Why this NOT work?...
If Err Then WScript.Echo Err.Number, Err.Description
'> 450 Wrong number of arguments or invalid property assignment
On Error Goto 0

Class Foo
    Private mEnvFlags

    Public Property Let EnvFlags(nIndex, bValue)
        If vbBoolean <> VarType(bValue) Then Exit Property
        If nIndex >= 0 And nIndex <= 2 Then
            mEnvFlags(nIndex) = bValue
        End If
    End Property

    Public Property Get EnvFlags(nIndex)
        If nIndex < 0 Or nIndex > 2 Then
            EnvFlags = mEnvFlags
        Else
            EnvFlags = mEnvFlags(nIndex)
        End If
    End Property

    Private Sub Class_Initialize
        mEnvFlags = Array(False, False, False)
    End Sub
End Class 
```

如何解决？（作为奖励 - 为什么会发生？）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:04:04.990

参考文档[`Property Let`](http://msdn.microsoft.com/en-us/library/77kezfet%28v=vs.84%29.aspx)。A`Property Let`与子程序调用不同。正确的语法是

```
obj.EnvFlags(0) = True 
```

# objective-c - 向 iPad 上的 Pages 文稿添加“保存到”位置

> ID：15374290
> 
> 赞同：0
> 
> 时间：2013-03-12T23:30:52.040
> 
> 标签：objective-c, uidocumentinteraction

我知道它可以`UIDocumentInteractionController`让用户有机会在 Pages 等应用程序中打开文档，比如 Word 文档。

是否可以以任何方式进行相反的操作：即允许用户将文档保存回我的应用程序可以访问新保存的文档的区域，或者在 Pages 中提供“保存到”选项？就像 Dropbox 如何与 Pages 集成一样。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:07:27.910

很不幸的是，不行。支持 Dropbox 的应用通过实现 Dropbox API 并在在线时同步到 Dropbox 服务器来实现这一点。另一个应用程序可以直接向您的应用程序提供文件的唯一方法是通过 UIDocumentInteractionController“打开方式”功能。[您可以像这样](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)注册接收您想要支持的格式的文件：这些文件将临时写入您的应用程序包的文档/收件箱中，您必须将它们保存在另一个目录中才能写入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:39:33.180

这是不可能的。由于需要应用沙盒，您无法将应用保存到其他应用的空间。

# python - 编写一个更快的 Python 物理模拟器

> ID：15374291
> 
> 赞同：16
> 
> 时间：2013-03-12T23:30:58.483
> 
> 标签：python, numpy, physics, scientific-computing, verlet-integration

我一直在尝试用 Python 编写自己的物理引擎，作为物理和编程的练习。我从遵循[此处](http://www.petercollingridge.co.uk/pygame-physics-simulation)的教程开始。进展顺利，但后来我发现了 thomas jakobsen 的文章“高级角色物理”，其中介绍了使用 Verlet 集成进行模拟，我觉得这很吸引人。

我一直在尝试使用 verlet 集成编写自己的基本物理模拟器，但结果比我最初预期的要困难一些。我正在浏览要阅读的示例程序，偶然发现了[这个用 Python 编写的](http://www.akeric.com/blog/?page_id=1123)程序，我还发现了这个使用处理的[教程。](http://gamedev.tutsplus.com/tutorials/implementation/simulate-fabric-and-ragdolls-with-simple-verlet-integration/)

Processing 版本让我印象深刻的是它的运行速度。仅布料就有 2400 个不同的模拟点，这还不包括身体。

python 示例只为布料使用了 256 个粒子，它以大约每秒 30 帧的速度运行。我尝试将粒子数增加到 2401（它必须是正方形才能使该程序工作），它以大约 3 fps 的速度运行。

* * *

这两种方法都通过将粒子对象的实例存储在列表中，然后遍历列表，调用每个粒子的“更新位置”方法来工作。例如，这是处理草图中计算每个粒子的新位置的代码部分：

```
for (int i = 0; i < pointmasses.size(); i++) {
    PointMass pointmass = (PointMass) pointmasses.get(i);
    pointmass.updateInteractions();
    pointmass.updatePhysics(fixedDeltaTimeSeconds);
} 
```

**编辑：**这是我之前链接的python版本的代码：

```
"""
verletCloth01.py
Eric Pavey - 2010-07-03 - www.akeric.com

Riding on the shoulders of giants.
I wanted to learn now to do 'verlet cloth' in Python\Pygame.  I first ran across
this post \ source:
http://forums.overclockers.com.au/showthread.php?t=870396
http://dl.dropbox.com/u/3240460/cloth5.py

Which pointed to some good reference, that was a dead link.  After some searching,
I found it here:
http://www.gpgstudy.com/gpgiki/GDC%202001%3A%20Advanced%20Character%20Physics
Which is a 2001 SIGGRAPH paper by Thomas Jakobsen called:
"GDC 2001: Advanced Characer Physics".

This code is a Python\Pygame interpretation of that 2001 Siggraph paper.  I did
borrow some code from 'domlebo's source code, it was a great starting point.  But
I'd like to think I put my own flavor on it.
"""

#--------------
# Imports & Initis
import sys
from math import sqrt

# Vec2D comes from here: http://pygame.org/wiki/2DVectorClass
from vec2d import Vec2d
import pygame
from pygame.locals import *
pygame.init()

#--------------
# Constants
TITLE = "verletCloth01"
WIDTH = 600
HEIGHT = 600
FRAMERATE = 60
# How many iterations to run on our constraints per frame?
# This will 'tighten' the cloth, but slow the sim.
ITERATE = 2
GRAVITY = Vec2d(0.0,0.05)
TSTEP = 2.8

# How many pixels to position between each particle?
PSTEP = int(WIDTH*.03)
# Offset in pixels from the top left of screen to position grid:
OFFSET = int(.25*WIDTH)

#-------------
# Define helper functions, classes

class Particle(object):
    """
    Stores position, previous position, and where it is in the grid.
    """
    def __init__(self, screen, currentPos, gridIndex):
        # Current Position : m_x
        self.currentPos = Vec2d(currentPos)
        # Index [x][y] of Where it lives in the grid
        self.gridIndex = gridIndex
        # Previous Position : m_oldx
        self.oldPos = Vec2d(currentPos)
        # Force accumulators : m_a
        self.forces = GRAVITY
        # Should the particle be locked at its current position?
        self.locked = False
        self.followMouse = False

        self.colorUnlocked = Color('white')
        self.colorLocked = Color('green')
        self.screen = screen

    def __str__(self):
        return "Particle <%s, %s>"%(self.gridIndex[0], self.gridIndex[1])

    def draw(self):
        # Draw a circle at the given Particle.
        screenPos = (self.currentPos[0], self.currentPos[1])
        if self.locked:
            pygame.draw.circle(self.screen, self.colorLocked, (int(screenPos[0]),
                                                         int(screenPos[1])), 4, 0)
        else:
            pygame.draw.circle(self.screen, self.colorUnlocked, (int(screenPos[0]),
                                                         int(screenPos[1])), 1, 0)

class Constraint(object):
    """
    Stores 'constraint' data between two Particle objects.  Stores this data
    before the sim runs, to speed sim and draw operations.
    """
    def __init__(self, screen, particles):
        self.particles = sorted(particles)
        # Calculate restlength as the initial distance between the two particles:
        self.restLength = sqrt(abs(pow(self.particles[1].currentPos.x -
                                       self.particles[0].currentPos.x, 2) +
                                   pow(self.particles[1].currentPos.y -
                                       self.particles[0].currentPos.y, 2)))
        self.screen = screen
        self.color = Color('red')

    def __str__(self):
        return "Constraint <%s, %s>"%(self.particles[0], self.particles[1])

    def draw(self):
        # Draw line between the two particles.
        p1 = self.particles[0]
        p2 = self.particles[1]
        p1pos = (p1.currentPos[0],
                 p1.currentPos[1])
        p2pos = (p2.currentPos[0],
                 p2.currentPos[1])
        pygame.draw.aaline(self.screen, self.color,
                           (p1pos[0], p1pos[1]), (p2pos[0], p2pos[1]), 1)

class Grid(object):
    """
    Stores a grid of Particle objects.  Emulates a 2d container object.  Particle
    objects can be indexed by position:
        grid = Grid()
        particle = g[2][4]
    """
    def __init__(self, screen, rows, columns, step, offset):

        self.screen = screen
        self.rows = rows
        self.columns = columns
        self.step = step
        self.offset = offset

        # Make our internal grid:
        # _grid is a list of sublists.
        #    Each sublist is a 'column'.
        #        Each column holds a particle object per row:
        # _grid =
        # [[p00, [p10, [etc,
        #   p01,  p11,
        #   etc], etc],     ]]
        self._grid = []
        for x in range(columns):
            self._grid.append([])
            for y in range(rows):
                currentPos = (x*self.step+self.offset, y*self.step+self.offset)
                self._grid[x].append(Particle(self.screen, currentPos, (x,y)))

    def getNeighbors(self, gridIndex):
        """
        return a list of all neighbor particles to the particle at the given gridIndex:

        gridIndex = [x,x] : The particle index we're polling
        """
        possNeighbors = []
        possNeighbors.append([gridIndex[0]-1, gridIndex[1]])
        possNeighbors.append([gridIndex[0], gridIndex[1]-1])
        possNeighbors.append([gridIndex[0]+1, gridIndex[1]])
        possNeighbors.append([gridIndex[0], gridIndex[1]+1])

        neigh = []
        for coord in possNeighbors:
            if (coord[0] < 0) | (coord[0] > self.rows-1):
                pass
            elif (coord[1] < 0) | (coord[1] > self.columns-1):
                pass
            else:
                neigh.append(coord)

        finalNeighbors = []
        for point in neigh:
            finalNeighbors.append((point[0], point[1]))

        return finalNeighbors

    #--------------------------
    # Implement Container Type:

    def __len__(self):
        return len(self.rows * self.columns)

    def __getitem__(self, key):
        return self._grid[key]

    def __setitem__(self, key, value):
        self._grid[key] = value

    #def __delitem__(self, key):
        #del(self._grid[key])

    def __iter__(self):
        for x in self._grid:
            for y in x:
                yield y

    def __contains__(self, item):
        for x in self._grid:
            for y in x:
                if y is item:
                    return True
        return False

class ParticleSystem(Grid):
    """
    Implements the verlet particles physics on the encapsulated Grid object.
    """

    def __init__(self, screen, rows=49, columns=49, step=PSTEP, offset=OFFSET):
        super(ParticleSystem, self).__init__(screen, rows, columns, step, offset)

        # Generate our list of Constraint objects.  One is generated between
        # every particle connection.
        self.constraints = []
        for p in self:
            neighborIndices = self.getNeighbors(p.gridIndex)
            for ni in neighborIndices:
                # Get the neighbor Particle from the index:
                n = self[ni[0]][ni[1]]
                # Let's not add duplicate Constraints, which would be easy to do!
                new = True
                for con in self.constraints:
                    if n in con.particles and p in con.particles:
                        new = False
                if new:
                    self.constraints.append( Constraint(self.screen, (p,n)) )

        # Lock our top left and right particles by default:
        self[0][0].locked = True
        self[1][0].locked = True
        self[-2][0].locked = True
        self[-1][0].locked = True

    def verlet(self):
        # Verlet integration step:
        for p in self:
            if not p.locked:
                # make a copy of our current position
                temp = Vec2d(p.currentPos)
                p.currentPos += p.currentPos - p.oldPos + p.forces * TSTEP**2
                p.oldPos = temp
            elif p.followMouse:
                temp = Vec2d(p.currentPos)
                p.currentPos = Vec2d(pygame.mouse.get_pos())
                p.oldPos = temp

    def satisfyConstraints(self):
        # Keep particles together:
        for c in self.constraints:
            delta =  c.particles[0].currentPos - c.particles[1].currentPos
            deltaLength = sqrt(delta.dot(delta))
            try:
                # You can get a ZeroDivisionError here once, so let's catch it.
                # I think it's when particles sit on top of one another due to
                # being locked.
                diff = (deltaLength-c.restLength)/deltaLength
                if not c.particles[0].locked:
                    c.particles[0].currentPos -= delta*0.5*diff
                if not c.particles[1].locked:
                    c.particles[1].currentPos += delta*0.5*diff
            except ZeroDivisionError:
                pass

    def accumulateForces(self):
        # This doesn't do much right now, other than constantly reset the
        # particles 'forces' to be 'gravity'.  But this is where you'd implement
        # other things, like drag, wind, etc.
        for p in self:
            p.forces = GRAVITY

    def timeStep(self):
        # This executes the whole shebang:
        self.accumulateForces()
        self.verlet()
        for i in range(ITERATE):
            self.satisfyConstraints()

    def draw(self):
        """
        Draw constraint connections, and particle positions:
        """
        for c in self.constraints:
            c.draw()
        #for p in self:
        #    p.draw()

    def lockParticle(self):
        """
        If the mouse LMB is pressed for the first time on a particle, the particle
        will assume the mouse motion.  When it is pressed again, it will lock
        the particle in space.
        """
        mousePos = Vec2d(pygame.mouse.get_pos())
        for p in self:
            dist2mouse = sqrt(abs(pow(p.currentPos.x -
                                      mousePos.x, 2) +
                                  pow(p.currentPos.y -
                                      mousePos.y, 2)))
            if dist2mouse < 10:
                if not p.followMouse:
                    p.locked = True
                    p.followMouse = True
                    p.oldPos = Vec2d(p.currentPos)
                else:
                    p.followMouse = False

    def unlockParticle(self):
        """
        If the RMB is pressed on a particle, if the particle is currently
        locked or being moved by the mouse, it will be 'unlocked'/stop following
        the mouse.
        """
        mousePos = Vec2d(pygame.mouse.get_pos())
        for p in self:
            dist2mouse = sqrt(abs(pow(p.currentPos.x -
                                      mousePos.x, 2) +
                                  pow(p.currentPos.y -
                                      mousePos.y, 2)))
            if dist2mouse < 5:
                p.locked = False

#------------
# Main Program
def main():
    # Screen Setup
    screen = pygame.display.set_mode((WIDTH, HEIGHT))
    clock = pygame.time.Clock()

    # Create our grid of particles:
    particleSystem = ParticleSystem(screen)
    backgroundCol = Color('black')

    # main loop
    looping = True
    while looping:
        clock.tick(FRAMERATE)
        pygame.display.set_caption("%s -- www.AKEric.com -- LMB: move\lock - RMB: unlock - fps: %.2f"%(TITLE, clock.get_fps()) )
        screen.fill(backgroundCol)

        # Detect for events
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                looping = False
            elif event.type == MOUSEBUTTONDOWN:
                if event.button == 1:
                    # See if we can make a particle follow the mouse and lock
                    # its position when done.
                    particleSystem.lockParticle()
                if event.button == 3:
                    # Try to unlock the current particles position:
                    particleSystem.unlockParticle()

        # Do stuff!
        particleSystem.timeStep()
        particleSystem.draw()

        # update our display:
        pygame.display.update()

#------------
# Execution from shell\icon:
if __name__ == "__main__":
    print "Running Python version:", sys.version
    print "Running PyGame version:", pygame.ver
    print "Running %s.py"%TITLE
    sys.exit(main()) 
```

* * *

因为这两个程序的工作方式大致相同，但是 Python 版本要慢得多，这让我想知道：

*   这种性能差异是 Python 本质的一部分吗？
*   如果我想从我自己的 Python 程序中获得更好的性能，我应该怎么做？例如，将所有粒子的属性存储在一个数组中，而不是使用单个对象等。

# **编辑：回答！**

@Mr E 在评论中链接了 PyCon 谈话，@A。Rosa 对链接资源的回答极大地帮助了我们更好地理解如何编写好的、快速的 python 代码。我现在将此页面添加为书签以供将来参考：D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T02:02:01.447

在 Python Wiki的[性能提示](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)部分中链接了[Guido van Rossum 的文章。](http://www.python.org/doc/essays/list2str.html)在其结论中，您可以阅读以下句子：

> 如果您觉得需要速度，请使用内置函数 - 您无法击败用 C 编写的循环。

本文继续列出循环优化的指南。我推荐这两种资源，因为它们提供了有关优化 Python 代码的具体实用建议。

benchmarksgame.alioth.debian.org 中还有一组著名的基准[测试](http://benchmarksgame.alioth.debian.org/)，您可以在其中找到不同机器中不同程序和语言之间的比较。可以看出，有很多变量在起作用，使得不可能的状态像*Java 比 Python 更快*。这通常被总结为*“语言没有速度；实现有”*这句话。

在您的代码中，可以使用内置函数应用更多 Pythonic 和更快的替代方案。例如，有几个嵌套循环（其中一些不需要处理整个列表）可以使用[`imap`](http://docs.python.org/2/library/itertools.html#itertools.imap)或[list comprehensions](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)重写。[PyPy](http://pypy.org/)也是提高性能的另一个有趣的选择。我不是 Python 优化方面的专家，但是有很多非常有用的技巧（注意[不要用 Python 编写 Java](https://plus.google.com/115212051037621986145/posts/HajXHPGN752)就是其中之一！）。

**关于 SO 的资源和另一个相关问题：**

*   [Python 和 C 之间的性能差异](https://stackoverflow.com/questions/3533759/performance-differences-between-python-and-c)
*   [将python与c集成以提高性能是否合理？](https://stackoverflow.com/questions/940982/is-it-reasonable-to-integrate-python-with-c-for-performance)
*   [http://www.ibm.com/developerworks/opensource/library/os-pypy-intro/index.html?ca=drs-](http://www.ibm.com/developerworks/opensource/library/os-pypy-intro/index.html?ca=drs-)
*   [http://pyevolve.sourceforge.net/wordpress/?p=1189](http://pyevolve.sourceforge.net/wordpress/?p=1189)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T00:13:38.957

如果像写 Java 一样写 Python，当然会慢一些，惯用的 java 不能很好地转换成惯用的 Python。

> 这种性能差异是 Python 本质的一部分吗？如果我想从我自己的 Python 程序中获得更好的性能，我应该怎么做？例如，将所有粒子的属性存储在一个数组中，而不是使用单个对象等。

很难说没有看到你的代码。

以下是 python 和 java 之间有时可能会影响性能的差异的不完整列表：

1.  处理使用立即模式画布，如果您想要在 Python 中获得相当的性能，您还需要使用立即模式画布。大多数 GUI 框架中的画布（包括 Tkinter 画布）都是保留模式，这种模式更易于使用，但本质上比即时模式慢。您需要使用 pygame、SDL 或 Pyglet 提供的即时模式画布。

2.  Python 是动态语言，这意味着实例成员访问、模块成员访问和全局变量访问在运行时解决。python中的实例成员访问、模块成员访问、全局变量访问，其实就是字典访问。在 java 中，它们在编译时就被解析了，而且速度更快。将经常访问的全局变量、模块变量和属性缓存到局部变量中。

3.  在 python 2.x 中， range() 产生一个具体的列表，在 python 中，使用迭代器完成的迭代，`for item in list`通常比使用迭代变量完成的迭代快`for n in range(len(list))`。您几乎应该总是直接使用迭代器进行迭代，而不是使用 range(len(...)) 进行迭代。

4.  Python 的数字是不可变的，这意味着任何算术计算都会分配一个新对象。这就是为什么普通 python 不太适合低级计算的原因之一；大多数希望能够编写低级计算而不必求助于编写 C 扩展的人通常使用 cython、psyco 或 numpy。但是，这通常只有在您进行数百万次计算时才会成为问题。

这只是部分的、非常不完整的列表，还有很多其他原因导致将 java 转换为 python 会产生次优代码。如果没有看到你的代码，就不可能知道你需要做什么不同的事情。优化的 python 代码通常看起来与优化的 java 代码非常不同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T08:26:28.963

我还建议阅读其他物理引擎。有一些开源引擎使用多种方法来计算“物理”。

*   牛顿游戏动力学
*   花栗鼠
*   子弹
*   Box2D
*   ODE（开放动态引擎）

大多数引擎也有端口：

*   皮芒克
*   PyBullet
*   PyBox2D
*   PyODE

如果您通读这些引擎的文档，您经常会发现声明它们针对速度进行了优化（30fps - 60fps）。但是，如果您认为他们可以在计算“真实”物理时做到这一点，那您就错了。大多数引擎计算物理到普通用户无法从光学上区分“真实”物理行为和“模拟”物理行为的程度。但是，如果您调查错误，如果您想编写游戏，则可以忽略不计。但如果你想做物理，所有这些引擎对你都没用。这就是为什么我会说，如果你在做一个真正的物理模拟，你会比那些设计的引擎慢，而且你永远不会超过另一个物理引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T01:40:09.903

基于粒子的物理模拟很容易转化为线性代数运算，即。矩阵运算。Numpy 提供了这样的操作，这些操作是在 Fortran/C/C++ 中实现的。编写良好的 python/Numpy 代码（充分利用语言和库）允许编写相当快的代码。

# objective-c - 如何使用 RestKit 删除对象？

> ID：15374293
> 
> 赞同：1
> 
> 时间：2013-03-12T23:31:05.840
> 
> 标签：objective-c, core-data, restkit

我想删除我的应用程序上的孤立项目。所以我这样做了：

```
for (Card *c in fetchedResultsController.fetchedObjects) {
   BOOL result = NO;
   for (Card * remove_card in remoteResultArray) {
      if ([remove_card.id intValue] == [c.id intValue]) {
          result = YES;
       }
   }
   if (!result) {
        NSLog(@"%@",c.id);
        [[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext deleteObject:c];
   }
 }
 [[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext save:&error]; 
```

实际上它有效，我的记录消失了，但是当我重新启动应用程序时，它们又在这里了。如何使用 restkit 删除记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:09:41.043

尝试改用 [RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext。

或在此处描述实现此行为：[http](http://restkit.org/api/0.20.0/Classes/RKManagedObjectRequestOperation.html) ://restkit.org/api/0.20.0/Classes/RKManagedObjectRequestOperation.html在“获取请求块和删除孤立对象”下。

# django - 表单提交时无法调用 Django 'str' 对象

> ID：15374301
> 
> 赞同：2
> 
> 时间：2013-03-12T23:31:58.410
> 
> 标签：django, django-views, django-urls

尝试为表单提交执行 ajax 请求，但不断收到上述错误。

我的网址.py

```
urlpatterns += patterns('',
    url(r'^register-me/$', 'registerMe', name='registerMe'),
) 
```

我的观点.py

```
def registerMe(request):
inviteeEmail = 'ryan@nenvy.com'
inviteeName = 'ryan' 
```

异常数据

```
 Traceback:
File "/Users/psdstaff/Projects/project/venv/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)

Exception Type: TypeError at /register-me/
Exception Value: 'str' object is not callable
Request information:
GET:
name = u'asdf'
email = u'asdf' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:37:17.197

在您的 URL 中，您需要指定视图函数的完整路径：

```
urlpatterns += patterns('',
    url(r'^register-me/$', 'app.views.registerMe', name='registerMe'),
) 
```

# php - 在搜索表单中将字段留空

> ID：15374302
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:32:06.283
> 
> 标签：php, mysql

我有一个搜索表单，您可以在其中搜索属性。现在它只有在你填写所有字段时才有效。但是，如果我想将一个字段留空而只搜索其余部分，或者只搜索一个字段并将其余部分留空，我该怎么办？

这是我今天查询的代码：

```
$sql = mysql_query("
SELECT * 
FROM property
WHERE (rooms LIKE '%$room%' OR '$room' = '')
AND (status LIKE '%$status%' OR '$status' = '')
AND (type LIKE '%$type%' OR '$type' = '')
AND (adress LIKE '%$county%' OR '$county' = '')
AND (area LIKE '%$area%' OR '$area' = '')
AND (price BETWEEN '$min' AND '$max')
") or die(mysql_error()); 
```

提前致谢！

也许您应该注意所有字段都是选择字段，而不是文本字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:51:14.903

我通常做这样的事情的方式是只将项目添加到实际具有值集的 WHERE 子句中：

```
$sql_stmt = 'SELECT * FROM property';
$where_items = array();

if ($room != '') {
  $where_items[] = "(rooms LIKE '%$room') ";
}
if ($status != '') {
  $where_items[] = "(status LIKE '%$status') ";
}
// ... repeat for all optional variables ...

if (count($where_items) > 0) {
    $sql_stmt .= ' WHERE ' . implode(' AND ', $where_items);
}

$result = mysql_query($sql_stmt);
// ... 
```

有几种方法可以构建查询，但这种方法基本上是创建一个项目数组，这些项目将被“与”一起进入最终查询。

# sql - 根据使用 Access 的其他表中的数字使用表中的 tekst

> ID：15374304
> 
> 赞同：1
> 
> 时间：2013-03-12T23:32:11.043
> 
> 标签：sql, ms-access

问这个问题我觉得很愚蠢，但我真的需要一个例子来说明如何根据 Access 中另一个表中的字段值获取一个表中的字段值（最后在我的报告中）。所以我有（例如）一个表：产品，在我的报告中我使用价格值（产品字段）做一个公式，并添加到我必须有字段增值税类型的值（一个数字变量，在表 VATS）取决于字段 VAT-Sort 中的记录（表 Products 中的记录）中的内容，也是一个数字变量，必须满足字段 VAT-Type 中使用的值之一）。所以在报告中我必须有这样的东西：产品：X 计数价格'=（价格+21%）'

其中 21% 来自 VAT-Type 和 VAT-Sort 字段之间的依赖关系。

我知道我可以执行类似**result** =select 'VAT-Sort' from 'VATS' WHERE 'VAT-Sort' = or equals 'VAT-type' 但如何在 Access 报告中使用它以获得正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:38:30.657

您可以使用[DLookUp](http://support.microsoft.com/kb/208786)：

```
Numeric data type:

DlookUp("Value","Vats","Vat_Type=" & Vat_Sort)

Text data type:

DlookUp("Value","Vats","Vat_Type='" & Vat_Sort & "'") 
```

或者，您可以将报告基于查询，例如：

```
SELECT Value, Other, Field, names FROM Products
LEFT JOIN Vats
ON Products.VAT_Sort = Vats.Vat_Type 
```

编辑重新评论

![更改报告记录源](../Images/278a2dca1ddddf7d51685f0d14897791.png)

# php - PHP中的变量

> ID：15374305
> 
> 赞同：0
> 
> 时间：2013-03-12T23:32:17.160
> 
> 标签：php

我想知道如何获得一个由字符串和另一个变量组合而成的变量。

例子：

$var1 ch1 我想要最终变量的名称，如下所示 $ch1var1

ID; 回声$nbr$id；?>

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:34:34.010

```
 $var1 = "Hello";
    $nbr = "var";
    $id = 1;
    echo ${$nbr.$id}; 
```

[演示视图](https://3v4l.org/o7oYp)

使用 var 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:34:10.447

```
echo ${$some . $combination . $of . $variables . "or" . "strings"}; 
```

# mysql - mysqli 选择 x AS y

> ID：15374307
> 
> 赞同：0
> 
> 时间：2013-03-12T23:32:21.890
> 
> 标签：mysql, select, mysqli

在 Codeigniter 中使用 Mysqli 并作为 Mysqli 的新手来自 Mysql。

以下 Mysql 查询使用 Mysqli 引发错误。我认为这可能与“SELECT x AS y”有关。

```
$sql = "SELECT uk_postcode_lat AS lat, uk_postcode_long AS long FROM uk_postcodes where uk_postcode_code = '$zip' LIMIT 1"; 
```

如何使这个查询与 Mysqli 一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:39:42.303

`long`是保留关键字。

试试这个

```
 $sql = "SELECT uk_postcode_lat AS lat, uk_postcode_long AS longitude FROM uk_postcodes where uk_postcode_code = '$zip' LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:46:49.300

我建议将您的字段名称包含在反引号中。这可以防止 MySQL 将它们视为 SQL 关键字——`long`是关键字。

```
$sql = "SELECT uk_postcode_lat AS `lat`, uk_postcode_long AS `long` FROM uk_postcodes where uk_postcode_code = '$zip' LIMIT 1"; 
```

只需添加反引号，您就可以`long`毫无问题地用作字段名。

# java - Java - 按第二项对包含 2 个项目的列表列表进行排序

> ID：15374311
> 
> 赞同：0
> 
> 时间：2013-03-12T23:32:37.890
> 
> 标签：java, python, sorting

我有 Python 代码：

```
self.sousedi_sorted = sorted(sousedi, key = lambda s: s[1]) 
```

我需要用Java写同样的东西。

我有一个包含两项（索引和分数）的元组（或列表）列表，我需要按分数对列表进行排序 - 第二项。我已经阅读了 Collections.sort 和 Arrays.sort，但我仍然不知道如何制作它。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:36:43.027

`lambda`Java 使用`Comparator<T>`类而不是表达式。这`<T>`意味着它是*通用*的 - 当您实现比较器时，您指定要比较的类型。

您可以`Comparator`按如下方式实现：

```
// This defines a class, MyComparator, that will compare objects
// of type SomeClass (because that's what's in the angle brackets)
public class MyComparator implements Comparator<SomeClass> {
    @Override
    public int compare(SomeClass o1, SomeClass o2) {
        // This method compares o1 and o2.
        // If o1 is "greater than" o2, it returns a positive number.
        // If they are equal, it returns 0.
        // If o1 is "less than" o2, it returns a negative number.

        // For example:
        return o1.someInt - o2.someInt;
    }
} 
```

从[文档中](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#compare%28T,%20T%29)：

> **`int compare(T o1, T o2)`**
> 比较它的两个参数的顺序。返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

然后，您可以使用`Collections.sort(listVariableName, new MyComparator())`对列表进行排序：

```
ArrayList<SomeClass> someListOfThings = new ArrayList<SomeClass>();
// add things to the list with someListOfThings.add(...)
Collections.sort(someListOfThings, new MyComparator());
// list is now sorted according to the `compare` method in MyComparator 
```

所以在你的情况下，你可能有：

```
class MyObject {
    public int index;
    public int score;
}
class MyObjectScoreComparator implements Comparator<MyObject> {
    public int compare(MyObject o1, MyObject o2) {
        return o1.score - o2.score;
    }
} 
```

然后使用`sort`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:36:06.037

您将需要使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)。它允许您定义一种比较两个对象的方法，然后可以使用 Collections.sort 对这些对象的集合进行排序。

# oracle - 编译更新其他用户表的包的权限不足

> ID：15374312
> 
> 赞同：0
> 
> 时间：2013-03-12T23:32:40.763
> 
> 标签：oracle, plsql

我在 USER A 中有一个对象，用于更新 USER B 架构中的表。运行包时，它使用 USER B 的登录名在 Oracle 中运行。

用户 A 没有更新用户 B 模式中的表的权限。当我尝试在 USER A 的架构中编译包时，我收到权限不足的错误消息，导致它无法编译。

有没有办法在 USER A 的模式中编译一个对象，即使他没有更新 USER B 的表的权限？如果包在 USER B 的上下文中运行，包会正确更新表吗？

我不想将包放入 USER B 的架构中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:06:38.220

你可以。但这可能不是最好的方法。该包需要被声明为调用者的权限包。并且该`UPDATE`语句需要使用动态 SQL。

在中创建表`B`

```
SQL> create table b.foo( col1 number );

Table created.

SQL> insert into b.foo values( 1 );

1 row created.

SQL> commit;

Commit complete. 
```

在 中创建包`A`。请注意，声明了包，`authid current_user`这意味着它依赖于调用用户的权限，而不是定义用户的权限。由于`A`看不到表，我们使用动态 SQL，以便将语法检查推迟到运行时

```
SQL> create package update_foo
  2    authid current_user
  3  as
  4    procedure set_val( p_new_val in number );
  5  end;
  6  /

Package created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace package body update_foo
  2  as
  3    procedure set_val( p_new_val in number )
  4    as
  5    begin
  6      execute immediate 'update b.foo set col1 = :new_val'
  7        using p_new_val;
  8    end;
  9* end;
SQL> /

Package body created.

SQL> grant execute on update_foo to b;

Grant succeeded. 
```

现在，`B`可以执行包并修改数据

```
SQL> exec a.update_foo.set_val( 2 );

PL/SQL procedure successfully completed.

SQL> select * from foo;

      COL1
----------
         2 
```

然而，总的来说，这不是一个特别明智的方法。一般来说，在一个模式中包含代码而在另一个模式中包含对象的全部意义在于提供职责分离和职责分离。如果您必须以`UPDATE`无论如何都可以对表发出 an 的用户身份登录，那么拥有一个包来执行它并不会增加太多安全性。在这种情况下，它只是增加了复杂性。

# dust.js - @content $key= vs @if 尘埃落定

> ID：15374316
> 
> 赞同：0
> 
> 时间：2013-03-12T23:32:58.497
> 
> 标签：dust.js

我有以下代码：

```
{#data.merchantModel}
<div class="address">
{@content $key="content:combinedAddr" merchantAddress1="{merchantAddress1}" merchantAddress2="{merchantAddress2}"/}
</div>
{:else}
<div class="address">{merchantAddress1}</div>
more code...
{/data.merchantModle} 
```

我正在使用 Webcore/NodeApp 但 {:else} 之后的所有内容都没有被渲染。如果我将其注释掉，一切都很好。不知道为什么 webcore 不喜欢 {:else} 但想知道是否有另一种方法来编写上述代码？仍然试图将我的头包裹在灰尘周围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:58:06.253

看起来您需要关闭内容标签，而模型在结束标签上拼写错误：

```
{#data.merchantModel}
<div class="address">
{@content $key="content:combinedAddr" merchantAddress1="{merchantAddress1}" merchantAddress2="{merchantAddress2}"/}
</div>
{:else}
<div class="address">{merchantAddress1}</div>
more code...
{/content}
{/data.merchantModel} 
```

# javascript - 如何在另一个公共方法下添加一个公共方法？

> ID：15374318
> 
> 赞同：1
> 
> 时间：2013-03-12T23:33:05.033
> 
> 标签：javascript, jquery

我正在开发一个包含大量 JavaScript 和 jQuery 代码库的网站，并且我正在尝试给它一个更有条理的类似插件的结构。我[阅读了一篇文章](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)，展示了如何使用自执行匿名函数来帮助处理范围，它还允许您的库使用“window.namespace = window.namespace || {}”技术跨文件增长。

例如：

```
//Self-Executing Anonymous Function:
(function( skillet, $, undefined ) {

    //Private Property
    var isHot = true;

    //Public Property
    skillet.ingredient = "eggs";

    //Public Method
    skillet.fry = function() {
        // do stuff...
    };

    //Private Method
    function addItem( item ) {
        // do stuff...
    }    
}( window.skillet = window.skillet || {}, jQuery )); 
```

演示：[jsFiddle](http://jsfiddle.net/elijahmanor/MVNBz/22/)

我的问题是，我将如何在skillet.fry() 下添加一个公共方法。所以我可以打电话给类似 Skillet.fry.cancel();

或者，如果有更好的方法可以做到这一点，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:07:00.637

你可以试试这样的。它将允许您声明`that`可在`cancel()`.

```
skillet.fry = (function() {
    var that = {};

    that.cancel = function() {
        //...
    }

    return that;
})(); 
```

# cron - Cron Job 的运行时间范围是多少分钟？

> ID：15374327
> 
> 赞同：1
> 
> 时间：2013-03-12T23:33:54.853
> 
> 标签：cron

好的，所以我看到所有这些关于每 10 分钟运行一次 crons 的问题，每分钟运行一次，但它是 SET。但是，我希望我的每 10-15 分钟随机运行一次。在这些范围之间，所以有时它会选择 13 分钟、12 分钟等。

有什么方法可以在共享服务器上做到这一点？或者我是否必须通过 PHP 对其进行编程，并在每次有人访问我要刷新的页面时运行该脚本？

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T11:38:29.287

我通常让 cronjob 每 10 分钟运行一次，并且在 cron 执行的脚本本身中，我在脚本的头部放置一个我需要的额外随机“窗口”的睡眠 + 随机数 - 即：在你的情况下 5min => 300sec

就像是：

```
#!/usr/bin/php

<?
sleep( rand(1, 300) );

print "starting job ! \n"
?> 
```

# c# - WebClient() 在 WPF 应用程序上从未达到 DownloadStringCompleted

> ID：15374328
> 
> 赞同：1
> 
> 时间：2013-03-12T23:34:10.070
> 
> 标签：c#, wpf, xml-parsing, webclient

所以我很困惑，为什么我`WebClient`没有访问它的`DownloadStringCompleted`. 在阅读了可能存在的问题之后`WebClient`，[`disposed`](https://stackoverflow.com/questions/7373172/webclients-downloadstringcompleted-event-handler-never-called)它才能完成下载。或者[`exceptions`](https://stackoverflow.com/questions/2792608/webclient-downloadstringcompleted-never-fired-in-console-application)在此期间没有被捕获，`DownloadData`或者根本[`Uri`](http://www.ncbi.nlm.nih.gov/pubmed/22918716?report=xml)无法访问。

我已经检查了所有这些问题，但我`WebClient`还没有访问过它的`DownloadStringCompleted`.

**PMID WebClient 类**

```
 /// <summary>
    /// Construct a new curl
    /// </summary>
    /// <param name="pmid">pmid value</param>
    public PMIDCurl(int pmid)
    {
        this.pmid = pmid;
        StringBuilder pmid_url_string = new StringBuilder();
        pmid_url_string.Append("http://www.ncbi.nlm.nih.gov/pubmed/").Append(pmid.ToString()).Append("?report=xml");
        this.pmid_url = new Uri(pmid_url_string.ToString());
    }
    /// <summary>
    /// Curl data from the PMID
    /// </summary>
    public void CurlPMID()
    {
        WebClient client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(HttpsCompleted);
        client.DownloadData(this.pmid_url);
    }
    /// <summary>
    /// Information to store in the class after the curl
    /// </summary>
    public string AbstractTitle { get; set; }
    public string AbstractText { get; set; }
    /// <summary>
    /// Retrieve the data from an xml file about a PMID
    /// </summary>
    /// <param name="sender">System Generated</param>
    /// <param name="e">System Generated</param>
    private void HttpsCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            PMIDCrawler pmc = new PMIDCrawler(e.Result, "/pre/PubmedArticle/MedlineCitation/Article");
            //iterate over each node in the file
            foreach (XmlNode xmlNode in pmc.crawl)
            {
                this.AbstractTitle = xmlNode["ArticleTitle"].InnerText;
                this.AbstractText = xmlNode["Abstract"]["AbstractText"].InnerText;
            }
        }
    } //close httpsCompleted 
```

**PMID NodeList 构造函数类**

```
 /// <summary>
    /// List initialized by crawer
    /// </summary>
    public XmlNodeList crawl { get; set; }

    /// <summary>
    /// Constructor for the HTML to XML converter
    /// </summary>
    /// <param name="nHtml"></param>
    /// <param name="nodeList"></param>
    public PMIDCrawler(string nHtml, string nodeList)
    {
        //parse it from e
        string html = HttpUtility.HtmlDecode(nHtml);
        XDocument htmlDoc = XDocument.Parse(html, LoadOptions.None);
        //convert the xdocument to an xmldocument
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(htmlDoc.CreateReader());
        //load the xmlDocument into a nodelist
        XmlElement xmlRoot = xmlDoc.DocumentElement;
        this.crawl = xmlRoot.SelectNodes(nodeList);
    } 
```

关于为什么`DonwloadStringCompleted`从未达到的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:09:49.717

您的`CurlPMID`代码有几个问题。我在下面的代码中添加了注释。

```
public void CurlPMID()
{
    // 1\. The variable 'client' loses scope when this function exits.
    //    You may want to consider making it a class variable, so it doesn't
    //    get disposed early.
    WebClient client = new WebClient();
    client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(HttpsCompleted);
    // 2\. You are calling the synchronous version of the download function.
    //    The synchronous version does not call any completion handlers.
    //    When the synchronous call returns, the download has completed.
    // 3\. You are calling the wrong function here.  Based on your completion handler, 
    //    you should be calling DownloadStringAsync(). If you want synchronous 
    //    behavior, call DownloadString() instead.
    client.DownloadData(this.pmid_url);
} 
```

简而言之，假设您想要异步行为，您的`CurlPMID`函数应该如下所示：

```
public void CurlPMID()
{
    WebClient client = new WebClient();
    client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(HttpsCompleted);
    client.DownloadStringAsync(this.pmid_url);
} 
```

# ruby-on-rails - 更新生产环境中的 ElasticSearch 映射（轮胎）

> ID：15374330
> 
> 赞同：2
> 
> 时间：2013-03-12T23:34:10.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

我想对如何处理以下情况有一个清晰的认识：

> 我正在从 activerecord 模型中添加或删除属性，因此我想在生产中更新其在 ElasticSearch 中的映射。

根据我的理解，我应该...

### 1-创建一个新索引并从mysql导入所有内容

这是正确的命令吗？`rake environment tire:import CLASS='Bow' INDEX='new-bows'` 为了创建正确的映射，我应该已经更新了模型中的映射，对吧？

### 2-删除旧映射并创建一个别名`bows`为`new-bows`

我会那样做，对吗？

```
old_index_name = Bow.tire.index.name
Bow.tire.index.delete
alias = Tire::Alias.new
alias.name(old_index_name)
alias.index('new-bows')
alias.save 
```

### 3-重启应用

* * *

**我错过了什么，或者有没有更简单的方法来实现我想要使用轮胎？**

**我应该在什么时候删除旧索引？在创建具有相同名称的别名之前，或者我可以在之后创建吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:04:19.660

您应该保留旧索引，直到您确定新索引 100% 是您想要的。如果不是这种情况，您可以将别名翻转回来。

Tire 测试套件中有一个针对“翻转别名”的集成测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-14T22:02:33.397

向索引添加新列：

```
index = Tire.index("articles")

index.mapping("article", :properties => { :pinterest_shares => {:type => 'integer', :index => 'not_analyzed', :include_in_all => false} }) 
```

# java - 如何为 JTree 上的各个节点设置自定义图标？

> ID：15374331
> 
> 赞同：0
> 
> 时间：2013-03-12T23:34:17.690
> 
> 标签：java, swing, jframe, jtree

我需要能够为 JTree 单个节点设置图标。例如，我有一个 JTree，我需要节点具有自定义图标来帮助表示它们是什么。

*   （扳手图标） 设置
*   （错误图标）调试
*   （笑脸图标）有趣的东西

...

等等。我已经尝试了几种来源并且得到了一些工作，但它搞砸了树事件，所以没有雪茄。提前致谢。

有人要求：

```
class Country {
    private String name;
    private String flagIcon;

    Country(String name, String flagIcon) {
        this.name = name;
        this.flagIcon = flagIcon;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getFlagIcon() {
        return flagIcon;
    }

    public void setFlagIcon(String flagIcon) {
        this.flagIcon = flagIcon;
    }
}

class CountryTreeCellRenderer implements TreeCellRenderer {
    private JLabel label;

    CountryTreeCellRenderer() {
        label = new JLabel();
    }

    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
        Object o = ((DefaultMutableTreeNode) value).getUserObject();
        if (o instanceof Country) {
            Country country = (Country) o;
            label.setIcon(new ImageIcon(country.getFlagIcon()));
            label.setText(country.getName());
        } else {
            label.setIcon(null);
            label.setText("" + value);
        }
        return label;
    }
} 
```

然后在哪里初始化：

```
DefaultMutableTreeNode root = new DefaultMutableTreeNode("Countries");
    DefaultMutableTreeNode asia = new DefaultMutableTreeNode("General");
    Country[] countries = new Country[]{
            new Country("Properties", "src/biz/jabaar/lotus/sf/icons/page_white_edit.png"),
            new Country("Network", "src/biz/jabaar/lotus/sf/icons/drive_network.png"),
    };

    for (Country country : countries) {
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(country);
        asia.add(node);
    } 
```

这行得通，只是我不想显示子根，只显示节点。此外，此代码使该项目在您单击它时不会突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:45:28.390

> 我不希望显示子根，只显示节点。

您的实现应该看到一个可以使用`getTreeCellRendererComponent()`的适当条件参数，如此[处所示](https://stackoverflow.com/a/8351850/230513)。`boolean leaf`

```
if (o instanceof Country && leaf) { ... } 
```

# ruby-on-rails - Model.new 方法在哪里定义？

> ID：15374332
> 
> 赞同：0
> 
> 时间：2013-03-12T23:34:24.240
> 
> 标签：ruby-on-rails, model

我试图找到模型`new`方法的来源。我尝试使用[`source_location`](http://ruby-doc.org/core-1.9.3/Method.html#method-i-source_location)ActiveRecord::Base.new 和 Widget.new（其中 Widget 是模型），然后执行

```
find . -name *rb -exec grep -il "def new$" {} \; 
```

在 activerecord gem 目录中，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:44:54.040

当一个 Ruby 对象通过 实例化时`.new`，它通常运行对象的`initialize`方法。这是`Class`默认定义的：

```
1.9.3p327 :002 > ActiveRecord::Base.method(:new)
=> #<Method: Class#new> 
```

如果您想为 Rails 模型创建自定义初始化程序，只需定义一个`initialize`方法。请注意，对此有一些警告，因为`initialize`ActiveRecord 不一定总是调用它。您最好添加一个[after_initialize](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)回调。

请参阅[如何查找在运行时定义方法的位置？](https://stackoverflow.com/questions/175655/how-to-find-where-a-method-is-defined-at-runtime)在 Ruby 中，“new”和[“initialize”之间有什么关系？初始化时如何返回零？](https://stackoverflow.com/questions/10383535/in-ruby-whats-the-relationship-between-new-and-initialize-how-to-return-n)有关查找定义方法的位置以及如何相关的更多有用`new`信息`initialize`。

# hibernate - onetomany 单向与使用 jpa 的可连接设置

> ID：15374334
> 
> 赞同：4
> 
> 时间：2013-03-12T23:34:35.857
> 
> 标签：hibernate, jpa, ejb, jboss7.x

我有两个实体，即客户和订单处于一对多关系中。一个客户可以有多个订单。因为我需要这种关系是单向的，所以我使用了 joinTable。

我可以使用 JPA 向我的客户实体添加条目。我可以使用 JPA 向我的订单实体添加条目。

我想知道如何将这两个数据连接在一起。假设我在客户表中有一个条目，在订单表中有两个条目。我想将订单表中的这两个条目与客户表中的一个条目相关联。

目前，我在可连接的 customer_order 中没有看到任何条目。我如何建立协会？我想当我将订单添加到订单表中时，我将不得不以某种方式提及客户 ID 号。不知道该怎么做。JPA中是否有条件查询？

谢谢。

客户类别 -

```
@Entity
public class Customer implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.TABLE, generator = "generatorCustomer")
    @TableGenerator(name = "generatorCustomer", allocationSize = 1)
    @Column(name="customer_id")
    private Long id;
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @OneToMany()
    @JoinTable (
        name="customer_order",
        joinColumns={ @JoinColumn(name="customer_id", referencedColumnName="customer_id") },
        inverseJoinColumns={ @JoinColumn(name="order_id", referencedColumnName="order_id", unique=true) }
    )
    private List<Order> orderList = new ArrayList<Order>();
    public List<Order> getOrderList() {
        if(this.orderList == null) {
            this.orderList = new ArrayList<Order>();
        }
        return this.orderList;
    }

    public void setOrderList(List<Order> orderList) {
        this.orderList = orderList;
    }

    public void addOrder(Order order) {
        this.orderList.add(order);
    }

    /* other logic follows......... */
} 
```

订单类别 -

```
@Entity
public class Order implements Serializable {
@Id
@GeneratedValue
@Column(name="order_id")
private Long id;
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

/* other logic follows......... */
} 
```

客户表说明：

```
jbossql=# \d customer
Column   |         Type          |                        Modifiers
-------------+-----------------------+---------------------------------------------------------------
customer_id | bigint                | not null default nextval('customer_customer_id_seq'::regclass)
name        | character varying(50) | 
Indexes:
"customer_pkey" PRIMARY KEY, btree (customer_id)
Referenced by:
TABLE "customer_order" CONSTRAINT "fk8ef2f420ec016855" FOREIGN KEY (customer_id) REFERENCES customer(customer_id) 
```

订单表说明：

```
jbossql=# \d order
Column   |  Type  | Modifiers 
------------+--------+-----------
order_id   | bigint | not null
value      | real   | 
Indexes:
"order_pkey" PRIMARY KEY, btree (order_id)
Referenced by:
TABLE "customer_order" CONSTRAINT "fk1e4828a98187660" FOREIGN KEY (order_id) REFERENCES order(order_id) 
```

customer_order 联表说明：

```
jbossql=# \d customer_order
Column       |  Type  | Modifiers 
--------------+--------+-----------
customer_id  | bigint | not null
order_id     | bigint | not null
Indexes:
"customer_order_order_id_key" UNIQUE CONSTRAINT, btree (order_id)
Foreign-key constraints:
"fk1e4828a98187660" FOREIGN KEY (order_id) REFERENCES order(order_id)
"fk1e4828adba386b8" FOREIGN KEY (customer_id) REFERENCES customer(customer_id) 
```

我可以在客户表中插入一个项目：

```
jbossql=# select * from customer;
customer_id | name 
-------------+-------------
1        | joe
(1 row) 
```

我也可以将项目插入到 oder 表中：

```
jbossql=# select * from order;
order_id | value 
----------+-----------
1       |  1.8
2       |  0.5
(2 rows) 
```

我在想customer_order 表会自动填充，即hibernate 会接受它。但似乎不是因为我的关节是空的：

```
jbossql=# select * from customer_order;
customer_id | order_id 
-------------+-----------
(0 rows) 
```

所以，我的意图是让这两个订单条目与客户 joe 相关联。

请帮忙。

1.  我是否必须向 customer_order 表显式添加记录？
2.  如果没有，我如何将项目插入订单表，以便我可以将该条目连接到特定客户？
3.  我的映射是否在 Java 文件中以使此 OneToMany [单向] 关系按预期工作
4.  我正在使用 JPA2 和 JBoss 和 Hibernate。您是否有任何代码引用来测试一对多关系？完整项目或阅读材料的任何参考资料都会有所帮助。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:09:24.017

这非常简单：

```
customer.addOrder(order); 
```

这就是你所需要的。这就是 ORM 的原理。您操作对象，ORM 使用您定义的映射将它们保存在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:55:50.060

您必须将级联属性添加到 @OneToMany 注释： `@OneToMany(cascade=CascadeType.ALL)`

您可以在此处查看可用于级联的所有操作类型：http: [//docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html](http://docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html)

在这里您可以阅读有关级联属性的更多信息：http: [//docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html)

您无需显式插入 customer_order。

# facebook-graph-api - facebook can_upload 是假的，除了一张专辑

> ID：15374336
> 
> 赞同：1
> 
> 时间：2013-03-12T23:34:57.517
> 
> 标签：facebook-graph-api

如果我使用图形资源管理器查询“me/albums?fields=can_upload,name”，我只能得到一张专辑的 can_upload true（来自总共 13 张专辑）

我的权限（来自访问令牌调试器）： create_note photo_upload publish_actions publish_stream share_item status_update user_photos video_upload

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:46:30.303

妈的，有办法了。

我最初将该应用程序的帖子可见性权限设置为只有我。

can_upload 为 true 的专辑也只有我可以看到。

# mysql - 带小数的 MySQL 订单

> ID：15374340
> 
> 赞同：3
> 
> 时间：2013-03-12T23:35:21.957
> 
> 标签：mysql, sql-order-by

我的mysql排序有问题。我的查询：

`SELECT * FROM versions ORDER BY version DESC`

它列出了一些这样的版本：

```
25.0.1364.86
25.0.1364.124
23.0.1271.100 
```

但是 0.124 高于 0.86。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T09:13:22.870

对@peterm 发布的查询的一个小改进（感谢！）

```
SELECT *
FROM `versions`
ORDER BY 1*SUBSTRING_INDEX(version, '.', 1) asc, 
     1*SUBSTRING_INDEX(SUBSTRING_INDEX(version, '.', -3),'.', 1) asc, 
     1*SUBSTRING_INDEX(SUBSTRING_INDEX(version, '.', -2),'.', 1) asc, 
     1*SUBSTRING_INDEX(version, '.', -1) asc,
     version asc # this will sort non-numeric strings 
```

我用更复杂的值、字母、数字、破折号和点进行了测试，因为版本可以用任何格式编写。

```
| version |
-----------
| a-b     |
| a-c     |
| ab      |
| b       |
| c       |
| c.a     |
| c.a.b   |
| c.b     |
| c.b.a   |
| c.b.b   |
| ca      |
| 1.2     |
| 1.2.1   |
| 2.1.1   |
| 2.1.2   |
| 3       |
| 10      |
| 123     | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T23:57:10.953

如果列的格式`version`是固定的，那么您可以将版本拆分为多个部分`ORDER BY`。

```
SELECT *
FROM versions
ORDER BY 1*SUBSTRING_INDEX(version, '.', 1) DESC, 
         1*SUBSTRING_INDEX(SUBSTRING_INDEX(version, '.', -3),'.', 1) DESC, 
         1*SUBSTRING_INDEX(SUBSTRING_INDEX(version, '.', -2),'.', 1) DESC, 
         1*SUBSTRING_INDEX(version, '.', -1) DESC 
```

输出：

```
|       VERSION |
-----------------
| 25.0.1364.124 |
| 25.0.1364.86  |
| 23.0.1271.100 | 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/d8a2c/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T16:30:18.920

聚会迟到了，但使用 INET_ATON() 函数有一个更简单的答案。

```
SELECT * FROM versions ORDER BY INET_ATON(version) 
```

将输出

```
23.0.1271.100
25.0.1364.86
25.0.1364.124 
```

在此处阅读有关 INET_ATON() 的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T00:32:27.500

这是我的方法（希望你不介意我[在博客上写过](http://www.jadito.us/2013/03/12/sorting-software-versions/)）：

```
SELECT v.version 
FROM   (SELECT version, 
               Cast(Substring_index(version, '.', 1) AS UNSIGNED INTEGER)  major, 
               Cast(Substring_index(Substring_index(version, '.' 
                   , 2 ), '.', -1) AS UNSIGNED INTEGER)                    minor, 
               Cast(Substring_index(Substring_index(version, '.' 
                   , -2 ), '.', 1) AS UNSIGNED INTEGER)                    patch, 
               Cast(Substring_index(version, '.', -1) AS UNSIGNED INTEGER) build 
        FROM   versions) v 
ORDER  BY v.major, 
          v.minor, 
          v.patch, 
          v.build 
```

**结果**

```
| 版本 |
-----------------
| 23.0.1271.100 |
| 25.0.1364.86 |
| 25.0.1364.124 |
```

[查看演示](http://sqlfiddle.com/#!2/55668/3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T23:40:25.643

在不知道如何`versions`定义表的情况下很难确定答案，但看起来它正在作为文本进行搜索，在这种情况下 86 大于 124（想想字典排序）。一种简单的解决方案可能是将数据以两种格式存储在表中 - 保留您似乎拥有的字符串，并具有等效的十进制数，例如 25.0.1364.86 作为字符串和 2501364.86 作为十进制。这将确保您的订购按预期工作。

# matlab - 在二次回归中使用奇异值分解 (svd)

> ID：15374342
> 
> 赞同：0
> 
> 时间：2013-03-12T23:35:41.753
> 
> 标签：matlab, regression, polynomial-math, svd

为了对相当大的数据集进行二次回归，我想使用 svd（奇异值分解）求解以下方程： B(nx1)=A(nx3)*X(3x1) 我正在考虑使用 matlab那，任何提示？目标是计算矩阵 X

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:05:56.623

看起来你所说的二次回归实际上是最小平方误差回归。在这种情况下，计算非常简单：

1) 两边乘以 A'(3xn) 到达

A'(3xn)B(nx1) = A'(3xn)A(nx3) X(3x1)

2) 现在将两边乘以 A'(nx1) A(nx3) 的倒数到达

inv(A'(3xn)A(nx3))A'(3xn)B(nx1) = X(3x1)

3) 现在使用 svd 来计算上面的逆矩阵，请参阅[在 MATLAB 中最有效的矩阵求逆](https://stackoverflow.com/questions/5004148/most-efficient-matrix-inversion-in-matlab)

另请参阅[最小化 MATLAB 中公式的误差（最小二乘？）](https://stackoverflow.com/questions/15235781/minimizing-error-of-a-formula-in-matlab-least-squares/15238828#15238828)

# r - 使用 rgl 进行颜色不匹配

> ID：15374346
> 
> 赞同：1
> 
> 时间：2013-03-12T23:36:21.270
> 
> 标签：r, rgl

我正在使用 rgl 从导入的 .csv 数据集创建点散点图。我希望点的颜色在数据集中设置。一切正常，除了显示散点图时点的颜色与数据中定义的颜色不匹配。例如，所有被指定为“蓝色”的点实际上可能是绿色的，而所有被指定为“黄色”的点可能实际上显示为红色。

```
data=read.csv("ExpLayout.csv", header = TRUE)
x=data$x
y=data$y
z=data$z
color=data$color
plot3d(x=x, y=y, z=z, type="s", col=color) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:45:38.903

这几乎可以肯定是由于`read.csv`将字符串转换为因子

查看此可重现示例中的差异

```
library(rgl)
x<-1:5
y=1:5
z <- 1:5
colors <- c('red','green','blue','orange','purple')
plot3d(x=x,y=y,z=z,col=colors, type = 's')
colorsf <- factor(c('red','green','blue','orange','purple'))
plot3d(x=x,y=y,z=z,col=colorsf, type = 's') 
```

`color`因此，要么使用作为字符列读入，要么使用或`stringsAsFactors=FALSE`强制转换为字符`as.character()``levels(colors)[colors]`

# css - 缩放精灵低于 100% 会改变它们的位置

> ID：15374352
> 
> 赞同：1
> 
> 时间：2013-03-12T23:36:53.087
> 
> 标签：css, scaling, css-sprites

我遵循了关于缩放精灵的教程[http://tobyj.net/responsive-sprites/](http://tobyj.net/responsive-sprites/) - 当我将图像设置为 100% 时，它们很好，但是当我在媒体查询中使用 35% 的值时，精灵图像是流离失所。

任何想法为什么？我的网站在这里[http://edharrisondesign.com/pocketpictograms/](http://edharrisondesign.com/pocketpictograms/)

这是我的CSS：

```
 #icon-container {
    position: absolute;
    top: 50%;
    margin-top: -225px;
    left: 50%;
    width: 400px;
    margin-left: -200px;
}

    .icon img{
       padding-bottom: 150%; 
}

    /*Set the max-width to the width of your individual sprites:*/
    .stretchy { display:block; position:relative; overflow:hidden; width: 100%; max-width:400px; margin: 0 auto; }

    .stretchy .spacer { width: 100%; height: auto; }
    .stretchy .sprite { position:absolute; top:0; left:0; max-width:none; max-height:100%; }
    .stretchy .sprite.s2 {left:-100%;}
    .stretchy .sprite.s3 {left:-200%;}
    .stretchy .sprite.s4 {left:-300%;}
    .stretchy .sprite.s5 {left:-400%;}
    .stretchy .sprite.s6 {left:-500%;}
    .stretchy .sprite.s7 {left:-600%;}
    .stretchy .sprite.s8 {left:-700%;}
    .stretchy .sprite.s9 {left:-800%;}
    .stretchy .sprite.s10 {left:-900%;}
    .stretchy .sprite.s11 {left:-1000%;}
    .stretchy .sprite.s12 {left:-1100%;}
    .stretchy .sprite.s13 {left:-1200%;}
    .stretchy .sprite.s14 {left:-1300%;}
    .stretchy .sprite.s15 {left:-1400%;}  
    .stretchy .sprite.s16 {left:-1500%;}
    .stretchy .sprite.s17 {left:-1600%;}
    .stretchy .sprite.s18 {left:-1700%;}
    .stretchy .sprite.s19 {left:-1800%;}
    .stretchy .sprite.s20 {left:-1900%;} 
```

和 HTML：

```
 <div id="icon-container">
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s2" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s3" alt="" src="images/assets/spritesheet2.png">
    </a>    
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s4" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s5" alt="" src="images/assets/spritesheet2.png">
    </a>    
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s6" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s7" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s8" alt="" src="images/assets/spritesheet2.png">
    </a>    
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s9" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s10" alt="" src="images/assets/spritesheet2.png">
    </a>        
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s11" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s12" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s13" alt="" src="images/assets/spritesheet2.png">
    </a>    
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s14" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s15" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s16" alt="" src="images/assets/spritesheet2.png">
    </a>    
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s17" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s18" alt="" src="images/assets/spritesheet2.png">
    </a>        
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s19" alt="" src="images/assets/spritesheet2.png">
    </a>            
    <a class="stretchy">
        <img class="spacer" alt="icon" src="images/assets/spacer.png">
        <img class="sprite s20" alt="" src="images/assets/spritesheet2.png">
    </a>            
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:47:40.797

看看这个小提琴：

[http://jsfiddle.net/7p8Ma/24/](http://jsfiddle.net/7p8Ma/24/)

[它提供了我对http://tobyj.net/responsive-sprites/](http://tobyj.net/responsive-sprites/)工作原理的见解。

```
/*
'stretchy' is a container div. What it does is relatively simple:

'float: left;' Simply floats it left. Change it to 'float:right' and it and its contents float right.

'position: relative;' Positions it relative to the browser window, meaning the sprites move as you move the window. Change this to absolute, and they both stay in the top left of the window, due to the float left.

'overflow: hidden;' Essential for sprites, as they are always smaller than their background image. Change this to 'show', and you'll see what's going on 'behind the scenes' as you resize the window. I'd recommend this, as it helped me a lot!

'max width: 160px' This prevents the sprite from becoming larger than 160px wide, as you can see with the sprite on the right. 

'width: 35%' This sets stretchy's width, dynamically. It will always be 35% of the browser window. Here's the awesome part. This number can be tweaked to anything. It also effects the height because the div is constrained.

'margin: 5%' This sets the margin width, which will always be 5% of the browser window. Notice how the gap between the two sprites grows and shrinks as you widen and narrow the window? Tweak also if needed.
*/
 .stretchy {
    float:left;
    position: relative;
    overflow: hidden;
    max-width:160px;
    width:35%;
    margin: 5px;
}
/*
'spacer' gives each sprite its dimensions, both in width and height. They are other methods of achieving this, but using a 'spacer' gives you solid, cross-compliant results.

'width: 100%' Sets the width of spacer to 100% of its parent div.
'display: block' Ensures the spacer takes up the full width available. This prevents the background image from sliding to the right when 'spacer' falls under 160px. By changing this to inline (meaning spacer takes up as little place as possible) the spacer shrinks slightly. The background image stays centered, but because stretchy's overflow is set to 'hidden' it gives the illusion that the background image is moving inexplicably to the right. Set display: to inline to see what I mean. 
*/
 .stretchy .spacer {
    width: 100%;
    display: block;
}
/*
'sprite' makes sure the sprites stay in the correct position, exactly ontop of the spacer. 

'position: absolute' makes them stay exactly ontop of their image, and doesn't let them move. It uses the next two classes to posistion the div.

'top:0' The top of the div is absolutely positioned to the top of the parent div, spacer.

'left:0' The left side of the div is absolutely positioned to the left of the parent div, spacer.

'max-height: 100%' This prevents the background-image from sliding when the div falls under 160px. It works in conjuction with 'spacer's display: block rule.
*/
 .stretchy .sprite {
    position:absolute;
    top:0;
    left:0;
    max-height:100%;
}
/* 
's2' and 's3' are simply sprite selectors.

'left: 0%' Change this to either 0%, 100%, 200%, 300% 400% or 500% to change the image. If you put in a number outside of this range, you will see the spacer image that gives the sprite its dynamically changing dimensions. Notice how they are percentages, rather than pixels. This is because percentages are a relative measurement. Moving the background image over 100% will always move the background-image over the same amount as the div, whether the div be 100px across or 1,000,000px across. It's all relative. Play around with it and I'm sure you'll get it.
*/
 .stretchy .sprite.s2 {
    left:0%;
}
.stretchy .sprite.s3 {
    left:-200%;
}
/*'no-limit' simply negates the effect of strechy, and when applied to a div allows it to stretch infinitely.*/
 .stretchy.no-limit {
    max-width: none;
}
.stretchy.no-limit .sprite {
    min-height: 100%;
} 
```

如果需要，这里没有评论：

[http://jsfiddle.net/7p8Ma/23/](http://jsfiddle.net/7p8Ma/23/)

有时最好从胡闹中学习！

# git - git - 如何克隆本地 svn 存储库？

> ID：15374353
> 
> 赞同：37
> 
> 时间：2013-03-12T23:36:56.647
> 
> 标签：git, clone, git-svn

我完全找不到任何解释我应该如何指定现有 svn 存储库的位置。

换句话说 - 应该使用什么作为 URL

```
git svn clone URL 
```

当svn存储库是本地的？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-01-13T14:09:04.297

你应该能够像这样成功：

```
git svn clone file:///e/svn_repo_on_E_drive 
```

类似于 svn checkout 命令：

```
svn co file:///e/svn_repo_on_E_drive 
```

`file://`对于执行 CMD 提示符的当前驱动器上的文件夹，`file:///d/some_folder`对于`D:\some_folder`.

注意：Windows 上文件链接中多余的`/`和已删除的冒号`:`。`file://e:/svn_repo_on_E_drive`→`file:///e/svn_repo_on_E_drive`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T01:18:06.920

对于本地存储库，您使用`file://`URL，与使用普通 svn 客户端进行检出相同。

如果您尝试复制整个历史记录，并且`git svn clone --stdlayout`只使用您将用于签出主干的 URL，其中 svn 减去`/trunk`末尾的部分。

# javascript - 格式化一个 json 对象

> ID：15374354
> 
> 赞同：0
> 
> 时间：2013-03-12T23:36:59.723
> 
> 标签：javascript, json

我试图使用 json 来存储页面中的一些值，然后稍后在 php 文件中访问这些值/变量。现在的问题是，我一般是 json 和 javascript 的新手，我努力了几个小时来找到一个问题的解决方案，对于有这方面经验的人来说，这个问题可能非常简单：现在我有了这个：

```
var invoice_data = {

"client":[
{
    "client-name" : "",
    "client-address" : "",
    "client-address-2" : "",
    "client-city-state" : "",
        "client-country" : ""
}
],

"shoppingcart":[ 
    {
    "1" : {"item-name":"", "qty":"", "price":"", "discount":"", "subtotal":""}
    }
],

}; 
```

所以这个继承的东西我并没有真正得到。因此，正如我创建了“客户”对象并创建了“购物车”一样，现在的问题是，当用户订购的商品超过一个项目时，应该创建另一个子对象来存储它的详细信息。所以我假设如下：

```
"shoppingcart":[ 

    {   
    "1" : { "item-name":"", "price":"", "discount":"" }
    "2" : { "item-name":"", "price":"", "discount":"" }
    }
], 
```

所以当我 console.log(invoice_data.shoppingcart); 我得到“shoppingcart”对象，但我无法访问 invoice_data.shoppingcart.1 或 invoice_data.shoppingcart.2，有什么方法可以像访问 invoice_data.shoppingcart 或 invoice_data.client 一样访问 1 或 2 个子对象？

谢谢你。

编辑：我可以将它作为一个数组访问，我对该选项不感兴趣。理想情况下，我想通过它的名称访问子对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:42:39.900

删除数组语法：

改变这个：

```
"client":[
{
    "client-name" : "",
    "client-address" : "",
    "client-address-2" : "",
    "client-city-state" : "",
    "client-country" : ""
}
] 
```

对此：

```
"client": {
    "client-name" : "",
    "client-address" : "",
    "client-address-2" : "",
    "client-city-state" : "",
    "client-country" : ""
} 
```

购物车也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:41:53.020

您无法访问`invoice_data.shoppingcart.1`，因为`1`它不是有效的 Javascript 变量名。如果对象的键不是有效的变量名，则必须使用数组表示法：`invoice_data.shoppingcart[1]`。

编辑：我没有看到它，但正如马特指出的那样，您也必须删除数组语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:45:37.203

您的 shopping_cart 是一个数组。

你不想要：

```
shopping_cart : {
    1 : { name : "...", price : "..." },
    2 : { ... }
} 
```

你要：

```
shopping_cart : [
    { name : "..." },
    { ... }
] 
```

然后您可以通过以下方式访问它：

```
shopping_cart[0].name;
shopping_cart[0].price; 
```

等等。

数组也是从 0 而不是 1 开始的。这不是继承：它只是事物的集合。

# objective-c - uisearchbar 在分组部分 uitable

> ID：15374359
> 
> 赞同：1
> 
> 时间：2013-03-12T23:37:43.343
> 
> 标签：objective-c, uitableview, uisearchbar

我拼凑了几个教程来创建一个带有部分的分组表，我现在正试图让一个 uisearchbar 工作。我遇到的问题是如何在分组部分中搜索。

我已经阅读了这篇文章建议的类似问题，但不能

这是创建分组部分的代码

```
#import "Job.h"      // A model for the data
#import "Address.h"  // Another model for the data

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.theTable.delegate = self;
    self.theTable.dataSource =self;

    _searchBar.delegate = (id)self;

    FMDBDataAccess *db = [[FMDBDataAccess alloc] init];

    jobs = [[NSMutableArray alloc] init];
    jobs = [db getJobs:1];

    _sections = [[NSMutableDictionary alloc] init];

    NSMutableArray *jobsTempArray = [db getJobsAsDictionary:1];

    BOOL found;

    // Loop through the books and create our keys
    for (NSDictionary *book in jobsTempArray)
    {
        NSString *cLong = [book objectForKey:@"addrAddress"];

        NSString *c = [cLong substringToIndex:1];

        found = NO;

        for (NSString *str in [_sections allKeys])
        {
            if ([str isEqualToString:c])
            {
                found = YES;
            }
        }

        if (!found)
        {
            [_sections setValue:[[NSMutableArray alloc] init] forKey:c];
        }

    }

    // Loop again and sort the books into their respective keys
    for (NSDictionary *book in jobsTempArray)
    {
        [[_sections objectForKey:[[book objectForKey:@"addrAddress"] substringToIndex:1]] addObject:book];
    }

    // Sort each section array
    for (NSString *key in [_sections allKeys])
    {
        [[_sections objectForKey:key] sortUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"addrAddress" ascending:YES]]];
    }

} 
```

这是搜索的代码

```
-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        _isFiltered = FALSE;
    }
    else
    {
        _isFiltered = true;
        _filteredjobs = [[NSMutableArray alloc] init];

        //for (Job* book in jobs)
        //for (Job* book in [_sections allKeys])
        //for (NSString *food in [_sections allKeys])
        for (NSDictionary* book in [_sections allKeys])
        {
            NSString *addrStr = [book objectForKey:@"addrAddress"];
            NSString *postStr = [book objectForKey:@"addrPostcode"];

            //NSRange nameRange = [book.jobAddress rangeOfString:text options:NSCaseInsensitiveSearch];
            NSRange nameRange = [addrStr rangeOfString:text options:NSCaseInsensitiveSearch];

            //NSRange descriptionRange = [book.jobPostcode rangeOfString:text options:NSCaseInsensitiveSearch];
            NSRange descriptionRange = [postStr rangeOfString:text options:NSCaseInsensitiveSearch];

            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [_filteredjobs addObject:book];
            }
        }
    }

    [self.theTable reloadData];
} 
```

我已经意识到我需要更改`for (Job* food in jobs)`为，`for (NSDictionary* book in [_sections allKeys])`但我被困在如何在 [_sections allKeys] 中搜索

特别是这一行

```
NSRange nameRange = [addrStr rangeOfString:text options:NSCaseInsensitiveSearch]; 
```

与

> -[__NSCFString objectForKey:]：无法识别的选择器发送到实例 0x692e200
> 
> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString objectForKey:]：无法识别的选择器发送到实例 0x692e200”：

有任何想法吗？PS把我当作菜鸟，我需要一些代码和解释——我还在学习obj-c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:06:24.137

检查[链接。](http://code-ninja.org/blog/2012/07/04/filtering-a-grouped-uitableview-with-a-search-bar/)它显示了带有分组部分 Tableview 的 UISearchBar。它是一个简单的教程。希望它对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:30:53.293

我在 UISearchBar 中找到了答案 [- 搜索对象数组的 NSDictionary](https://stackoverflow.com/questions/4635437/uisearchbar-search-a-nsdictionary-of-arrays-of-objects/4640853#4640853)并阅读所有键。

基本上循环遍历分组的 NSDictionary 并提取 NSArrays，然后再次循环搜索...

```
-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        _isFiltered = FALSE;
    }
    else
    {
        _isFiltered = true;
        _filteredjobs = [[NSMutableArray alloc] init];

        NSString *currentLetter = [[NSString alloc] init];

        for (int i=0; i<[_sections count]; i++)
        {
            currentLetter = [[_sections allKeys] objectAtIndex:i];

            NSArray *jobsForKey = [ [NSArray alloc] initWithArray:[_sections objectForKey:[[_sections allKeys] objectAtIndex:i]] ];

            for (int j=0; j<[jobsForKey count]; j++)
            {
                NSDictionary *book = [jobsForKey objectAtIndex:j];
                NSRange titleResultsRange = [[book objectForKey:@"addrAddress"] rangeOfString:text options:NSCaseInsensitiveSearch];

                if(titleResultsRange.location != NSNotFound)
                {
                    [_filteredjobs addObject:book];
                }
            }
        }

    }

    [self.theTable reloadData];
} 
```

# ios - Admob 崩溃但非常罕见

> ID：15374366
> 
> 赞同：2
> 
> 时间：2013-03-12T23:38:32.637
> 
> 标签：ios, exception, crash, admob

通常我的 iOS 应用程序运行良好。但有时它会崩溃。我附上了截图。我调用函数来显示 admob 插页式广告。它崩溃了。我不知道如何调试它以及为什么它当时崩溃了。该代码大部分时间都可以正常工作，但很少崩溃。

我的应用程序使用 ARC。

它是带有 Admob 和 iAd 的 iphone Open GL ES 2.0 游戏

我该如何调试它？应该做哪些步骤？

我不确定下次何时会看到这样的崩溃。崩溃会发生，但并不经常发生。因此，如果我将删除一些组件（例如 iAd）并进行测试，那么我不知道它何时会崩溃以及运行多少测试以确保删除的部分是否存在问题。

我不想提交有时会崩溃的应用程序。它可能当然是差评。

![xcode 截图](../Images/0e75ff75a3eaf7b9fd55c8e8d7f9c6e1.png)

更新崩溃

@try/@catch 没有帮助。

委托更新也无济于事。

我又遇到了这样的崩溃，不知道我能做什么或正在发生什么。

![ss 代码](../Images/08eb018769b778cfe984e12582df4c88.png)

![在此处输入图像描述](../Images/10ff02c927eded6d03d154f07a13d2cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:57:32.323

用 try/catch 包装那个调用。

# image - Smarty 文件存在语法

> ID：15374373
> 
> 赞同：0
> 
> 时间：2013-03-12T23:39:11.547
> 
> 标签：image, file, syntax, smarty, exists

你能告诉我我做错了什么吗？即使文件确实存在，它也默认为我​​的 else 语句。

{assign var="wine" value=" `$smarty.const.DOC_ROOT`/images/thumbs/ `$link.ID`-300x225.png"} {if file_exists($wine)} 文件存在！{else} 文件不存在！{/如果}

虽然你看不到代码，但我确实有反引号 (backtick)$smarty.const.DOC_ROOT(backtick) 和这里 (backtick)$link.ID(backtick)

当我像这样使用它时，它可以工作，但在上面的示例中却不行：

```
<img src="{$smarty.const.DOC_ROOT}/images/thumbs/{$link.ID}-300x225.png" alt="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:53:01.480

我替换了：$smarty.const.DOC_ROOT

使用绝对路径并且它有效。/home/user/public_html/等...

注意：$link.ID 我输入了反引号（``），否则它会抛出错误。

# authentication - 是否有提供罐装用户身份验证支持的 Go 框架或包？

> ID：15374374
> 
> 赞同：16
> 
> 时间：2013-03-12T23:39:12.403
> 
> 标签：authentication, go

我已经被 Python (Django/Flask) 中可用的成熟框架宠坏了，所以当我开始学习 Go 时，我想知道 Go 中是否已经存在任何类似的框架到 django.contrib.auth还是烧瓶登录？

主要用例是处理简单的用户身份验证，并能够对其进行扩展以适应应用程序内的一些基于权限的路由。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T06:21:49.367

据我所知，没有。您可能获得的最接近的开箱即用身份验证是通过 Google AppEngine，其中可以检索[用户的 Google 帐户，并且某些路径](https://developers.google.com/appengine/docs/go/users/reference)[仅适用于应用程序管理员](https://developers.google.com/appengine/docs/go/config/appconfig#Secure_URLs)。

在标准的 Go Web 服务器中，您通常需要滚动自己的身份验证，但这并不像听起来那么困难。许多框架将您与实际上非常重要的决策隔离开来；在典型的 Go 风格中，您需要根据应用程序的需求做出这些决定，然后选择适合您的现有库。

# 登录页面

无论您需要用户在何处登录，您都可能会使用 HTML 表单。这些通常会使用[html/template](http://golang.org/pkg/html/template/)包呈现。要在提交表单时检索值，请使用[request.FormValue](http://golang.org/pkg/net/http/#Request.FormValue)。

# 数据库

存储用户信息的方式有很多种；[在使用os](http://golang.org/pkg/os/)的文件系统或使用[database/sql](http://golang.org/pkg/database/sql/)的 SQL 数据库中。一些 NoSQL 数据库也有成熟的驱动程序，包括[MongoDB](http://labix.org/mgo)和[Redis](http://godoc.org/github.com/garyburd/redigo/redis)。

# 密码

要计算哈希值并将其与密码进行比较，您需要使用预先存在的机制，这样您就不必自己重新发明它。为此，[go.crypto](http://godoc.org/code.google.com/p/go.crypto)子存储库提供了一个[bcrypt](http://godoc.org/code.google.com/p/go.crypto/bcrypt)包。

# 会话

如果要存储会话数据，可以使用[gorilla/sessions 之](http://godoc.org/github.com/gorilla/sessions)类的解决方案。根据您的安全需求，您可以将会话数据直接存储在（可选[安全](http://godoc.org/github.com/gorilla/securecookie)的）cookie 中，也可以将其存储在后端并仅在 cookie 中存储会话 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T15:23:06.720

来自 READ.me

```
Allows your Martini application to support user login via an OAuth 2.0 backend. 
```

[https://github.com/martini-contrib/oauth2](https://github.com/martini-contrib/oauth2)

# jslint - 为什么 JSLint 将此行标记为错误

> ID：15374386
> 
> 赞同：0
> 
> 时间：2013-03-12T23:40:29.840
> 
> 标签：jslint

```
/*global THREE Coordinates $ document window*/ 
```

JSLint 说它期待 */ 但得到了 Coordinates 但是当我在 Eclipse javascript 项目中运行它时，该行通过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:48:54.400

Js lint 认为您正在使用该`/*global*/`指令。这用于指示变量是全局的并且在其他地方。

请参阅：[JS Lint 全局指令](http://www.jslint.com/lint.html#global)

# python - 如何根据输入为输出添加断线？

> ID：15374387
> 
> 赞同：0
> 
> 时间：2013-03-12T23:40:31.140
> 
> 标签：python

**问题**

如何编写代码，在输出中插入插入断行，输入*中有一个？*

**代码**

```
data1=[]
with open("FileInput1.txt") as file:
    for line in file:
        data1.append([float(f) for f in line.strip().split()])

data2=[]
with open("FileInput2.csv") as File2:
    for line in File2:
        data2.append([f for f in line.strip().split()]) 
```

**样本输入：**

1.  文件输入#1

    ```
    1223 32  (userID - int = 1223, work hours = 32)
    2004 12.2  
    8955 80 
    ```

    一个。电流输出

    ```
    1223 32 2004 12.2 8955 80 
    ```

2.  文件输入 2：

    ```
    UserName  3423 23.6  
    Name      6743 45.9 
    ```

    一个。电流输出

    ```
    UserName 3423 23.6 Name 6743 45.9 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:28:44.310

**排除**

根据上帝的神秘信息（*请*不要被冒犯），我已经破译了[阿米娜的](https://stackoverflow.com/q/15374387/1993598)问题。这是导致这一切的对话：

```
So... this is a programming exercise in which the output is exactly
the same as the input? 
– xxmbabanexx 12 mins ago 

@xxmbabanexx - lol yes – Amina 8 mins ago 
```

**回答**

要在输出中保留换行符，您只需将*确切的*文件打印出来。如果我没有进行上述对话，我会给出一个更复杂的答案。这是答案，一步一步给出。

```
"""
Task: Make a program which returns the exact same output as the input
Ideas:
print the output!!
""" 
```

^这有助于我理解问题

```
first_input = "Input_One.txt"
second_input = "Input_Two.txt"

Input_One = open(first_input, "r")
Input_Two = open (first_input, "r")

Output_One = open("Output_One.txt", "w")
Output_Two = open ("Output_Two.txt", "w") 
```

^我创建并打开我的两个文件。

```
x = Input_One.read()
y = Input_Two.read() 
```

^我阅读了信息，将其分配给变量`x`和`y`

```
print "OUTPUT 1:\n", x
print "\n"
print "OUTPUT 2:\n", y 
```

^我向用户显示输出

```
#Save "output"

Output_One.write(x)
Output_Two.write(y)

print"\nCOMPLETE!" 
```

^我保存输出并给出消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:26:33.163

您所做的只是将文件中的几行合并为一行。

```
def printer(filename, data):
  with open(filename, "w") as f:
    f.write(data.replace("\n", "  "))

for filename in ["FileInput1.txt", "FileInput2.csv"]:
  with open(filename) as f:
    printer("new" + filename, f.read()) 
```

# jquery - 动态更新输入文本值

> ID：15374391
> 
> 赞同：1
> 
> 时间：2013-03-12T23:40:56.180
> 
> 标签：jquery

我尝试制作 > 1.`input`在新图层中输入动态更新值 >
2\. 单击图层，输入中显示的值可以再次编辑。
[http://jsfiddle.net/8yZhf/3/](http://jsfiddle.net/8yZhf/3/)

但我被困在2.，如果用于`$('.input').off("focus")`避免添加新图层（不更新），
完成编辑`focusout`后，如何恢复`focus`像以前一样？还是有更好的主意？

```
var layer;
$('.input').focus(function(){
    layer = $('.input_insert').children('div').length + 1;
    $('<div class='+layer+'></div>').appendTo('.input_insert');// add layer

    $('.input_insert').children('div').click(function(e){
        $('.input').val($(e.target).html());
        // $('.input').off("focus");
    })
    return layer;// return layer count for keyup, focusout
})
$('.input').keyup(function(e){
    $('.'+layer).html(this.value);
})
$('.input').focusout(function(){
    $("input[class='input']").val('');
    if($('.'+layer).html() == ''){// check if empty
        $('.'+layer).remove();
    }
}) 
```

HTML

```
<input type="text" class="input">
<div class="input_insert"></div>// container 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:12:10.027

我会以稍微不同的方式做

```
$('input').on('keypressed', function(e) {
   $('.input_insert:last-child').text($(this).val())  
}).on('blur', function(e) {
   var val = $(this).val() 
   , lastInsert = $('.input_insert:last-child').text('')
   , newInsert = $('<div />').addClass('input_insert')
                             .text(val).insertBefore(lastInsert) 
   $(this).val('')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:01:56.650

TLDR：**[jsFiddle 演示](http://jsfiddle.net/8yZhf/4/)**

起初您的代码中有一个简单的问题。您在这里使用此代码为每个元素重新分配了一个点击事件

```
$('.input_insert').children('div').click(function(){
    $('.input').val($('.'+layer).html());
    // $('.input').off("focus");
}) 
```

所以第一个问题是解决只有将新元素连接到点击事件的问题。

下一个问题是，由于只有一个可变追踪图层，因此只使用了最新的图层。这可以通过实施额外的跟踪变量来解决。

html和上面一样

js

```
var layer;
var target = -1;//when not -1, this indicates a layer is being edited
$('.input').focus(function(){
 layer = $('.input_insert').children('div').length + 1;
 //save the value of the layer for use on click event
 var current = layer;
 $('<div class='+layer+'></div>').appendTo('.input_insert');// add layer
 //wire click only to the new layer
 $('.'+current).click(function(){
  $('.input').val($(this).html());
  //indicate that this layer is the edit target when clicked
  target = current;
 });
 return layer;// return layer count for keyup, focusout
});
$('.input').keyup(function(e){
 //check if there is a layer being edited
 if( target > -1 ){//layer edit
   $('.'+target).html(this.value);
 }else{//new layer
  $('.'+layer).html(this.value);
 }
});
$('.input').focusout(function(){
 //reset target because there is no current edit
 target = -1;
 $("input[class='input']").val('');
  if($('.'+layer).html() == ''){// check if empty
   $('.'+layer).remove();
  }
}); 
```

# javascript - jQuery从get方法获取输入框值

> ID：15374401
> 
> 赞同：0
> 
> 时间：2013-03-12T23:42:05.517
> 
> 标签：javascript, jquery, html

所以我的计划是让它显示输入框的值，就像它从 GET 方法获得的一样。如果我发布提交，我将获取 url**作为**[http://site.com/#search/test](http://site.com/#search/)。那么......我们怎样才能让这两个值连接起来呢？在我们的文本框中显示 GET 方法的结果？

 **```
<form name="input" action="" method="get">
Search: <input type="text" value="currentgetmethod" name="search">
<input type="submit" value="Submit">
  <div id="result"></div>
</form>

<script type="text/javascript">
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:54:39.517

在页面加载时，只需执行以下操作：

```
var values = window.location.hash.slice(1).split('/');
$("[name=" + values[0] + "]").val(values[1]); 
```**

# jquery - 使用jQuery将元素插入div，附加不起作用

> ID：15374403
> 
> 赞同：1
> 
> 时间：2013-03-12T23:42:38.410
> 
> 标签：jquery, asp.net

我有以下代码：

```
$('input[id$="txtTecnicas"]').bind('keypress', function (e) {
            //if user presses enter
            if (e.keyCode == 13) {
                //cancel asp.net postback
                e.preventDefault();

                //if value of textbox is not empty
                if ($(this).val() != "") {

                    //Save value into valueTec
                    var valueTec = $(this).val();
                    //Clear textbox value
                    $(this).val("");
                    //Create tag div to insert into div
                    var texthtml = '<span class="tag" title="' + valueTec + '">' + valueTec + ' <a>x</a><input type="hidden" value="1" name="tags"></span>';

                    //Append the new div inside tecTagHolder div
                    $('[id$="tecTagHolder"]').append(texthtml);
                }
            }
        }); 
```

但是，它没有将代码插入到 tecTagHolder div 中，并且由于它需要将许多 div 插入到 tecTagHolder 中，每次用户按下回车键时，我不能使用`.html()`命令，但附加它甚至不会附加“Hello”字符串！有什么问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:47:06.717

为什么不像这样选择 tecTag：

```
$("#<%=tecTagHolder.ClientID %>").append(texthtml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:52:10.923

你可以使用这样的东西：

```
$('[id$="tecTagHolder"]').html( $('[id$="tecTagHolder"]').html() + texthtml ); 
```

但我建议您像这样生成该元素：

```
var span = $('<span></span>').addClass('tag').attr('title', valueTec).text(valueTec);
var a = $('<a></a>').text('x');
.. and so on 
```

然后使用如下构造元素：

```
span.append(a).append(input); 
```

然后您可以将跨度附加到 $('[id$="tecTagHolder"]') 中。

让我知道这是否有帮助:)

# javascript - 单击子 div 时未调用父 onclick() 事件

> ID：15374406
> 
> 赞同：3
> 
> 时间：2013-03-12T23:42:46.827
> 
> 标签：javascript, html, dom, onclick, parent-child

我有嵌套 div 的情况。我有一个父 div（有一个 onclick() 事件）和一些动态填充的 div。我了解到，通过“冒泡”，onclick() 事件应该通过 DOM 向上传播，从而在所有父项中触发 onclick() 事件。我所做的所有研究都表明，有很多人正在努力防止这种情况发生，而我却无法让它发挥作用。我可以让 onclick() 工作的唯一方法是在 div 的边缘附近单击，大概是子 div 不存在的地方，我直接单击父级。

我在下面包含了适用的代码。页面上可以有多达 9 个，即所谓的“小部件”，但我已经删除了所有代码，除了引用第一个“小部件”。

更新：当我尝试从 JavaScript 函数中提取所有内容并将其直接放入 HTML 代码中时，它可以正常工作。但是，这样做会迫使我放弃所需的功能，因此我将尝试避免这种解决方法。

下面有一个新的小提琴，它基本上显示了我的目标，即使事件没有像我期望的那样调用 JS 函数。

更新#2：我创建了一个模仿我在代码中看到的响应的小提琴（下面的#5）。使用 fiddle 时，您会注意到在 div 的中心单击时没有发出警报，但是当您在 div 的外边界附近单击时，您最终会得到响应。

问题解决了：

根据 Racheet 在下面的回答，这个问题已经解决。我用功能齐全的代码创建了一个最终的小提琴以供参考：http: [//jsfiddle.net/v3MGX/8/](http://jsfiddle.net/v3MGX/8/)

JAVASCRIPT：

```
function initializeWidgets(){

var widget1 = "Professional";

widget1 = 
    "<div class='outer'><div class='middle'>
    <div class='inner'><h1>" + widget1 + "</h1></div></div></div>";

document.getElementById("widget1").innerHTML = widget1;
}

function hoverWidgets(widgetID){
var w = new Array();
w[0] = "Work Experience, Educational History, and Resume Download";

w[widgetID-1] = "<div class='outer'><div class='middle'>
    <div class='inner'><h2>" + w[widgetID-1] + "</h2></div></div></div>";

document.getElementById("widget"+widgetID).innerHTML = w[widgetID-1];

} 
```

适用的 HTML：

```
<div class="widget" id="widget1" onclick="alert(1);" onmouseover="hoverWidgets('1')"
onmouseout="initializeWidgets()"></div> 
```

当前小提琴：http: [//jsfiddle.net/v3MGX/5/](http://jsfiddle.net/v3MGX/5/)

最后的小提琴：http: [//jsfiddle.net/v3MGX/8/](http://jsfiddle.net/v3MGX/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:24:20.007

如果您的 on-click 没有以某种方式具体引用 DIV，则可以始终将 onclick 添加到其他嵌套的 div.... 否则，您需要发布更多的 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:50:18.013

我已经玩过你的例子并解决了这个问题。这是我的解决方案：

[http://jsfiddle.net/v3MGX/7/](http://jsfiddle.net/v3MGX/7/)

```
 window.initializeWidgets = (function() {
    /*THIS SECTION IS YOUR WIDGET CONSTRUCTOR*/

    //Set up your constants for this widget
    var widget1 = "Professional";
    var widget2 = "Work Experience, Educational History, and Resume Download";

    //first you grab your old element
    var widgetSmallElement = document.getElementById("widget1");

    //then you make your new elements
    var outer = document.createElement("div");
    outer.setAttribute('class','middleSmall');
    var inner = document.createElement("div");
    inner.setAttribute('class','innerSmall');
    var heading = document.createElement("h1");
    heading.innerHTML = widget1;
    var subHeading = document.createElement("h2");
    subHeading.innerHTML = widget2;

    //now you chain the above and then add them to the document
    inner.appendChild(heading);
    outer.appendChild(inner);
    widgetSmallElement.appendChild(outer);

    //This is your new, simplified hoverWidgets handler
    window.hoverWidgets = function (widgetID) {
        inner.replaceChild(subHeading,inner.firstChild);        
    };

    /*THIS SECTION IS THE RETURN VALUE FROM YOUR CONSTRUCTOR*/
    return function() {
        //this is the function actually given to the onClick and onMouseout handler as the initializeWidgets funciton.
        inner.replaceChild(heading,inner.firstChild);
    };

})(); 
```

您遇到的问题是由于您创建内部 div 的方式。当您通过将 html 作为字符串写入 DOM 节点的 innerHTML 属性在 javascript 中创建 html 元素时，将删除旧节点，并创建一个新节点来替换它。

当那个旧节点被删除时，附加到它的事件处理程序也会被删除，所以当你的鼠标悬停运行时，它们实际上是在删除和重新创建各种内部 div，*以及它们现有的事件处理程序*。因此，您在 html 中分配的 onclick 处理程序对于这些内部节点不存在。

通过直接写入 innerHTML 属性来将 html 添加到文档中通常是一个坏主意。

我重写了解决方案，以便它在 JavaScript 中本地创建节点，然后重新编写 initializeWidgets 和 hoverWidgets 函数以简单地在内部 div 内的 <h1> 和 <h2> 节点之间进行交换。

我已经把整个东西放在一个闭包中，以阻止它用除了 initializeWidgets 和 hoverWidgets 函数之外的任何东西污染全局范围。此实现仅在它注册为 onLoad 函数的处理程序时才有效，因为它的构造函数部分需要在 html 尝试将它们附加为事件处理程序之前运行并创建这两个函数。

如果您发现此解决方案对您的需求来说很复杂，您仍然应该能够通过使用 javascript 来创建自己的解决方案来本地创建和操作 div 和 h1/h2 标签，而不是直接写入 innerHTML 属性。

[这是有关如何执行此操作的指南](http://www.javascriptkit.com/javatutors/dom2.shtml)

# html - 全屏背景图像与页脚位置产生冲突

> ID：15374408
> 
> 赞同：0
> 
> 时间：2013-03-12T23:43:02.653
> 
> 标签：html, css, background-image, fullscreen, sticky-footer

因此，我正在尝试做两件单独运作良好的事情，但我无法将它们整合在一起。首先，这是该网站的链接： http: [//ericbrockmanwebsites.com/dev4](http://ericbrockmanwebsites.com/dev4)

使用创建全屏背景图像

```
html {
  min-height:100%;
  background-size: cover;
  background-image: url(images/bg.jpg);
  background-repeat: no-repeat;
  background-position: center bottom;
} 
```

创建一个留在页面底部的页脚，即使没有内容，这通常需要这样的东西：

```
html {
  height:100%;
}

body {
  height:100%;
}

.container {
  min-height:100%;
}

#footer {
  clear:both;
  position:relative;
} 
```

问题是，为了让页脚保持在底部，需要将 html / body 的高度定义为 100%，但除非我使用 min-height 值定义它们，否则背景图像只会覆盖屏幕负载。这意味着如果/当需要向下滚动时，背景图像只会下降到屏幕底部加载的位置。

我已经玩了几个小时，但似乎找不到解决办法。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:49:05.980

首先，`height`并不`min-height`相互排斥。没有理由不能同时使用两者。至于页面长于可用空间时的背景滚动，你试过`background-attachment: fixed`吗？

# build - 如何将 build.gradle 目录传递给 gradlew？

> ID：15374409
> 
> 赞同：56
> 
> 时间：2013-03-12T23:43:06.970
> 
> 标签：build, gradle

`./gradlew`可以在与`build.gradle`文件相同的目录中运行，但是如何`gradlew`从另一个目录运行（标准 Gradle 包装器）？对于 Make，可以将 " `-C DIRECTORY`" 传递给 "Change to DIRECTORY before doing anything."。Gradle中是否有等效参数？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-12T23:48:25.437

刚刚从[附录 D.Gradle 命令行](http://www.gradle.org/docs/current/userguide/gradle_command_line.html)中找到它。

答案是`-p <your project directory>`，默认为当前目录。

# objective-c - Objective-C 中的块语法问题 - 带有返回类型和参数的 typedef 块

> ID：15374411
> 
> 赞同：2
> 
> 时间：2013-03-12T23:43:08.207
> 
> 标签：objective-c, objective-c-blocks

我有一个块：

```
typedef id (^completionBlock)(id data, NSURLResponse *urlResponse, NSError *error); 
```

在一个类方法中，我尝试用一​​些代码填充这个块。

```
request.requestCompletedBlock = ^(id data, NSURLResponse *urlResponse, NSError *error){
  ...
return object;
}; 
```

requestCompletedBlock 显然是 completionBlock 类型。

我收到以下错误：

“从 'void *(^)(_ *strong* *id, NSURLResponse ** _strong, NSError * __强的）'”

显然我的语法在某个地方是错误的，但是在哪里呢？

非常感谢，

维生素B

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T23:47:38.370

无论出于何种原因，编译器都在推断您的内联块的返回类型是`void*`，而不是`id`。`id`您可以通过将返回类型放在类似的后面来强制它使用返回类型`^`：

```
request.requestCompletedBlock = ^id (id data, NSURLResponse *urlResponse, NSError *error) {
    //                           ~~
    //                        Return type
} 
```

有关块语法的详细说明，请参阅[此页面](http://thirdcog.eu/pwcblocks/#cblocks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:51:06.037

您的语法是正确的，这是您错误的数据类型。

你`object`的类型`void*`，但你的块期望你返回`id`。这意味着您应该换行`object`，比如说`NSData*`，

```
request.requestCompletedBlock = ^(id data, NSURLResponse *urlResponse, NSError *error){
    ...
    return (id)[NSData dataWithBytes:object length:numBytes];
}; 
```

或更改 的声明`completionBlock`以期望返回类型为`void*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T23:45:07.443

编译器正在为“对象”的类型推断“void*”。您可以像这样显式声明文字的返回类型：

```
^id(id data, ...) { ... } 
```

# python - 查找ASCII字符的范围

> ID：15374420
> 
> 赞同：2
> 
> 时间：2013-03-12T23:44:20.910
> 
> 标签：python

有没有办法在不导入任何内容的情况下使用一系列 ascii 字符？我试过了

```
chr(range(32,127)) and range(chr(32,127)) 
```

但这些有错误信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:46:23.393

您必须调用`chr`范围内的每个数字，而不是范围本身：

```
map(chr, range(32, 127)) 
```

或者

```
[chr(n) for n in range(32, 127)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:48:03.323

根据您想对它们执行的操作，您需要执行以下操作：

打印出字符而不存储它：

```
for i in range(32,127):
    print (chr(i)) 
```

将字符存储在列表中：

```
ascii = [chr(i) for i in range(32,127)] 
```

您在实现中遇到错误的原因是因为在第一种情况下您试图将 range 函数解析为一个字符，而在第二种情况下，该`chr`函数不接受 2 个参数，并且该`range`函数不接受 char 作为一个论点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:54:56.353

你可以这样做：

```
bytearray(range(32, 127)).decode() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T23:45:51.680

也许`map(chr, range(32, 127))`？

# php - 安装 Windows 2008 Server 的 AppServ 后 MySql 不工作

> ID：15374421
> 
> 赞同：0
> 
> 时间：2013-03-12T23:44:22.460
> 
> 标签：php, mysql, phpmyadmin, appserver

我已经在 Windows 2008 R2 上安装了 AppServ 2.6.0，但是当我转到 localhost/phpinfo.php 时，我没有在其中看到 mysql。我看到“mysqlnd”我不知道这是什么，但它就在那里。

此外，我去哪里 localhost/phpmyadmin 我得到一个红色的错误

```
phpMyAdmin - Error

Fatal error: Call to undefined function get_magic_quotes_gpc() in C:\AppServ\www\phpMyAdmin\error.php on line 63 
```

请注意，我在安装 AppServ 2.6.0 的过程中安装了 Innodb。

这有什么问题？为什么 MySQL 不工作？我已经为此工作了几天，所以我希望有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:52:14.067

根据这篇文章：[Using get_magic_quotes_gpc on PHP Version 5.2.14 or equivalent for PHP Version 6](https://stackoverflow.com/questions/4077543/using-get-magic-quotes-gpc-on-php-version-5-2-14-or-equivalent-for-php-version-6)

`get_magic_quotes_gpc`已在 PHP 6 中完全删除。

根据此，自 PHP 5.4 起已弃用它：http: [//php.net/manual/en/function.get-magic-quotes-gpc.php](http://php.net/manual/en/function.get-magic-quotes-gpc.php)

至于 MySQL，我对 AppServ 不太熟悉，但是需要在 php.ini 中启用 mysql 模块吗？另外，你可以从命令行工具连接到 mysql 吗？

# android - 合并 2 个 MP3 文件 Android

> ID：15374422
> 
> 赞同：2
> 
> 时间：2013-03-12T23:44:23.920
> 
> 标签：android, eclipse

我想知道有没有办法将 2 个 MP3 文件合并为一个。基本上，我有一首歌曲和雨声作为 mp3 文件，我想将它们合并，因此在背景中得到相同的歌曲和雨声。有没有办法做到这一点？或者在这种情况下可以使用某种外部 SDK？

# ios - 根据实际图像的比例动态改变单元格和 UIImage 的高度

> ID：15374424
> 
> 赞同：0
> 
> 时间：2013-03-12T23:44:36.287
> 
> 标签：ios, afnetworking

这是我迄今为止尝试过的

我定义了一个全局变量

```
float imgHeight; 
```

然后在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`我这样做

```
 size_t pixelsWide = CGImageGetWidth(scribbleImage.image.CGImage);
        size_t pixelsHigh = CGImageGetHeight(scribbleImage.image.CGImage);
        CGFloat ratio = 312/pixelsWide;
        pixelsHigh = pixelsHigh*ratio; 
```

然后在`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

```
return pixlesHeight; 
```

现在既然`heightForRowAtIndexPath`是以前叫过`cellForRowAtIndexPath`，我总是得到`pixelsHeight as 0`。

我想不出另一种方法来做到这一点。我是否应该在 heightForRow 中重新定义 UIImage 并执行此操作

```
[scribbleImage setImageWithURL: [NSURL URLWithString:scribble[@"scribble_image"]] placeholderImage:[UIImage imageNamed:@"Default.png"]]; 
```

也在里面？！应该有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:41:08.050

在 heightForRowAtIndexPath 中执行此操作。据我了解，您担心浪费处理和加载时间，只需将 UIImage 存储在处理后的项目数组中，以便在 cellForRowAtIndexPath 中使用相同的项目，然后避免创建一个新项目。

# css - css 媒体查询分辨率 dpi vs width vs device-width

> ID：15374429
> 
> 赞同：3
> 
> 时间：2013-03-12T23:45:09.447
> 
> 标签：css

在使用媒体查询时，我看到 max-width 和 max-device-width 经常用于定位“小屏幕”设备或智能手机，但为什么不使用媒体查询来解决问题呢？

例如，`@media screen and (min-resolution: 230dpi)`允许我针对某些智能手机编写 CSS，例如 Galaxy S Glide SGH I927R，它有 480 x 800 像素，4 英寸（~233 ppi 像素密度）

相反，我将不得不使用`@media screen and (max-device-width: 480px) and (orientation: portrait)`plus `@media screen and (max-device-width: 800px) and (orientation: landscape)`。

似乎最小分辨率可以节省我一些时间。我已经阅读了几篇文章和博客，但我没有看到有人提倡解决问题。

我一定有一个明显的问题——我不是专业的网页设计师——但是使用分辨率的方法有什么“错误”？是什么让宽度或设备宽度更适合定位“小屏幕”。

到目前为止，我最喜欢的关于宽度与设备宽度的网站是： [http ://www.javascriptkit.com/dhtmltutors/cssmediaqueries.shtml](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries.shtml)

也许我必须使用 800 像素的最大设备宽度，这对我来说对智能手机来说似乎“过大”的原因是因为我没有使用元标记视口。我在上面第 3 页的文章中读到以下内容：

“这意味着我们的 CSS 媒体查询将匹配“缩小”设备的尺寸，而不是其实际尺寸（即：iPhone 上的设备宽度为 980 像素而不是 320 像素）。因此，每当您优化移动网页时设备，第一步是在您的页面上定义一个特定的 META 标签，以更改/禁用移动浏览器的“放大”行为......”

也许在定义视口之后，最大设备宽度比在媒体查询中使用分辨率更有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:17:57.837

CSS-Tricks.com 的 Chris Coyier 和 Rentedsmile Web Design 的 Jamie Bicknell 在 CSS-Tricks 网站上撰写了一篇很棒的文章。

我将总结他们的主要观点并在底部发布文章的链接。

世界上最受欢迎的分析软件是谷歌分析，这就是为什么我们大多数人如此关注分辨率。不幸的是，这并没有考虑浏览器窗口大小，这是我们许多人使用 27 英寸屏幕、多屏幕、40 多种设备时唯一需要考虑的项目，坦率地说，有多少人曾经使用过全窗口？我知道我不。

Chris Coyier 指出，只有约 61% 的用户在 200 像素的全屏范围内查看，这意味着如果你是“像素完美”，那么在你的消费者眼中——你不是。您的网站很可能会损坏。（使用全屏时估计为 0.85%）

这意味着屏幕分辨率与我们最终用户的原因完全无关。

请参阅此处的完整文章，了解他们的完整细分和丰富的插图分析

[http://css-tricks.com/screen-resolution-notequalto-browser-window/](http://css-tricks.com/screen-resolution-notequalto-browser-window/)

# python - Python CSV 阅读器将 Row 作为列表返回

> ID：15374430
> 
> 赞同：6
> 
> 时间：2013-03-12T23:45:14.037
> 
> 标签：python, list, google-app-engine, parsing, csv

我正在尝试使用 python 解析 CSV，并希望能够连续索引项目，以便可以使用 访问它们`row[0]`，`row[1]`依此类推。

到目前为止，这是我的代码：

```
def get_bitstats():
    url = 'http://bitcoincharts.com/t/trades.csv?symbol=mtgoxUSD'
    data = urllib.urlopen(url).read()
    dictReader = csv.DictReader(data)
    obj = BitData()
    for row in dictReader:

        obj.datetime = datetime.datetime.fromtimestamp(int(row['0'])/1000000)
        q = db.Query(BitData).filter('datetime', obj.datetime)
        if q != None:
            raise ValueError(obj.datetime + 'is already in database')
        else:
            obj.price = row['1']
            obj.amount = row['2']
            obj.put() 
```

这会返回`KeyError: '0'`，我不知道如何设置它。我确实将其输入到交互式外壳中并在运行时

```
for row in dictReader:
    print row 
```

我得到这个作为输出：

```
{'1': '3'}
{'1': '6'}
{'1': '2'}
{'1': '6'}
{'1': '9'}
{'1': '8'}
{'1': '6'}
{'1': '4'}
{'1': '4'}
{'1': '', None: ['']}
{'1': '4'}
{'1': '2'}
{'1': '.'}
{'1': '0'}
{'1': '5'}
{'1': '7'}
{'1': '1'}
{'1': '6'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '', None: ['']}
{'1': '0'}
{'1': '.'}
{'1': '0'}
{'1': '1'}
{'1': '0'}
{'1': '0'}
{'1': '5'}
{'1': '4'}
{'1': '2'}
{'1': '5'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '0'}
{'1': '1'}
{'1': '3'}
{'1': '6'}
{'1': '2'}
{'1': '6'}
{'1': '9'}
{'1': '8'}
{'1': '6'}
{'1': '4'}
{'1': '4'} 
```

数以千计的行。（因为我确定 CSV 是数千位）

为什么我的 CSV 以这种方式打印，并且无论如何要将一行分成 3 个列表，`ints`例如 [130534543, 47.00009, 23001.9000]

编辑：

正如答案所述，我在上面的代码中使用了错误的 csv 函数，但即使修复它给了我一个列表，列表本身的格式与 dict 相同，因此：

```
['1']
['2']
['1']
['3']
['8']
['3']
['5']
.
.
. 
```

事实证明，我还必须删除`.read()`from `data = urllib.urlopen(url).read()`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T23:50:15.497

[`csv.reader`](http://docs.python.org/2/library/csv.html#csv.reader)将每一行作为列表返回

```
reader = csv.reader(data)

for line_list in reader:
   pass
   # line_list is a list of the data contained in a row so you can access line_list[0] 
```

# azure - Windows azure 移动服务脚本是否具有瞬态故障处理

> ID：15374435
> 
> 赞同：3
> 
> 时间：2013-03-12T23:45:34.050
> 
> 标签：azure, azure-sql-database, azure-mobile-services

当我通过服务器脚本访问 SQL 表时，sql azure 重试逻辑是否在 `request.execute();`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:31:27.237

是的，底层代码将在 30 秒的窗口内多次尝试使用 SQL Azure 完成操作。

# matlab - 大矩阵的Matlab逆

> ID：15374441
> 
> 赞同：4
> 
> 时间：2013-03-12T23:46:00.900
> 
> 标签：matlab, matrix-inverse

这是我要解决的方程式：

h = (X'*X)^-1*X'*y

其中 X 是矩阵，y 是向量（(X'X)^-1 是 X 转置乘以 X 的倒数）。我在 Matlab 中将其编码为：

```
h = (X'*X)\X'*y 
```

我认为这是正确的。问题是 X 大约是 10000x10000，即使是我能找到的最强大的计算机（16 核，24GB RAM），试图计算这个逆也会使 Matlab 崩溃。有什么方法可以将其拆分，或者有一个专为进行如此大的反转而设计的库吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:59:52.723

这看起来像一个伪逆。您是否正在寻找只是

```
h = X \ y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:07:12.053

我生成了一个随机的 10,000 x 10,000 矩阵 X 和一个随机的 10,000 x 1 向量 y。

我只是一步一步地分解了我的计算。（代码如下所示）

1.  计算转置并将其保存在矩阵 K 中
2.  然后我通过将 K 乘以 X 来计算矩阵 A
3.  通过将 K 乘以向量 y 来计算向量 b
4.  最后，我在 A 和 b 上使用了反斜杠运算符来解决

我的计算没有问题。这需要一段时间，但将操作分解为尽可能小的组有助于防止计算机不堪重负。但是，它可能是您正在使用的矩阵的组合（即稀疏、小数等）。

```
X = randi(2000, [10000, 10000]);
y = randi(2000, 10000, 1);
K = X';
A = K*X;
b = K*y;
S = A\b; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:22:03.223

如果您有多台机器可供使用，并且您可以将问题重新转换`h = X\y`为@Ben 提出的形式，那么您可以使用分布式数组。[这个演示](http://www.mathworks.com/products/parallel-computing/examples.html?file=/products/demos/shipping/distcomp/paralleldemo_backslash_bench.html)展示了如何做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T21:42:45.050

乔丹，你的方程正是“摩尔-彭罗斯矩阵逆”的定义。

检查： http: [//mathworld.wolfram.com/Moore-PenroseMatrixInverse.html](http://mathworld.wolfram.com/Moore-PenroseMatrixInverse.html)

直接使用`h = X \ y;`应该会有所帮助。或者查看 Matlab`pinv(X)*y`

# c++ - 浮点，我可以信任多少小于/大于比较？

> ID：15374444
> 
> 赞同：18
> 
> 时间：2013-03-12T23:46:06.077
> 
> 标签：c++, floating-point

假设我有两个浮点数，我想比较它们。如果一个大于另一个，程序应该采用一个 fork。如果情况正好相反，它应该走另一条路。并且它应该做同样的事情，如果被比较的值在一个仍然应该使它比较真实的方向上被轻轻推动。

这是一个很难表达的问题，所以我写了这个来证明它 -

```
float a = random();
float b = random();  // always returns a number (no infinity or NaNs)

if(a < b){
    if( !(a < b + FLOAT_EPISILON) ) launchTheMissiles();
    buildHospitals();

}else if(a >= b){
    if( !(a >= b - FLOAT_EPISILON) ) launchTheMissiles();
    buildOrphanages();

}else{
    launchTheMissiles();  // This should never be called, in any branch
} 
```

给定这段代码，`launchTheMissiles()`保证永远不会被调用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T23:56:26.347

如果您可以保证`a`并且`b`不是 NaN 或无穷大，那么您可以这样做：

```
if (a<b) {
    …
} else {
    …
} 
```

除无穷大和 NaN 之外的所有浮点值的集合构成了一个总排序（带有两个零表示的故障，但这对您来说并不重要），这与使用普通整数集没有什么不同——唯一的区别是后续值之间的间隔大小不是恒定的，就像整数一样。

事实上，IEEE 754 的设计使得相同符号的非 NaN 非无穷大值的比较可以通过与普通整数相同的操作来完成（同样，零故障）。因此，在这种特定情况下，您可以将这些数字视为“更好的整数”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T23:50:37.733

简短的回答，保证永远不会被调用。

如果`a<b`那么 a 将始终小于 b 加上一个正数，无论多么小。在这种情况下，测试 a 是否小于 b + a 量将是正确的。

第三种情况不会达成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T01:08:05.557

对不等式的测试是精确的，对等式的测试也是如此。人们感到困惑是因为他们没有意识到他们正在使用的价值观可能并不完全是他们认为的那样。所以，是的，对最终函数调用的评论是正确的。该分支将永远不会被占用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T00:08:37.817

IEEE 754（浮点）标准规定，加法或减法可导致正无穷或负无穷，因此如果 b 为 FLT_MAX 或 -FLT_MAX，则 b + FLOAT_EPSILON 和 b - FLOAT_EPSILON 可导致正无穷或负无穷。浮点标准还指出，无穷大的比较正如您所期望的那样，FLT_MAX < +infinity 返回 true 并且 -FLT_MAX > -infinity。

要从实际的角度仔细研究浮点格式和精度问题，我建议看一下 Christer Ericson 的书 Real Time Collision Detection 或 Bruce Dawson 关于该主题的博客文章，其中最新的（带有漂亮的目录！）位于[http://randomascii.wordpress.com/2013/02/07/float-precision-revisited-nine-digit-float-portability/](http://randomascii.wordpress.com/2013/02/07/float-precision-revisited-nine-digit-float-portability/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-20T16:14:56.760

用 epsilon 窗口检查不到呢？如果 a 小于 b 则 a 不能等于 b

```
/**
 * checks whether a <= b with epsilon window
 */
template <typename T>
bool eq(T a, T b){
    T e = std::numeric_limits<T>::epsilon();
    return std::fabs(a-b) <= e;
}
/**
 * checks whether a < b with epsilon window
 */
template <typename T>
bool lt(T a, T b){
     if(!eq(a,b)){ // if a < b then a != b
         return a < b;
     }
     return false;
}
/**
 * checks whether a <= b with epsilon window
 */
template <typename T>
bool lte(T a, T b){
     if(eq(a,b)){
         return true;
     }
     return a < b;
} 
```

# php - Magento 头部跳跃

> ID：15374446
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:46:12.973
> 
> 标签：php, css, magento

我有一个奇怪的错误，在浏览网上商店的 magento 网上商店标题上的类别时会改变不同页面上的高度（[http://shop.tvornica-snova.hr/index.php/](http://shop.tvornica-snova.hr/index.php/)）

即，如果您在主页上，然后单击标题扩展的某些类别以增加 10px 的高度，并且将内容向下推。

我似乎对主页和类别都有相同的 html 结构和布局，所以我无法弄清楚错误在哪里。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:48:55.350

查看`header-top`您的标记部分以获取普通页面和“跳跃”页面。

**普通的：**

```
<div class="logo">
    <strong>Magento Commerce</strong>
    <a href="http://shop.tvornica-snova.hr/index.php/" title="Magento Commerce" class="logo">
        <img src="http://shop.tvornica-snova.hr/skin/frontend/default/f002_yellow/images/logotvornica.png" alt="Magento Commerce">
    </a>
</div> 
```

**跳跃：**

```
<a href="http://shop.tvornica-snova.hr/index.php/" title="Magento Commerce" class="logo">
    <strong>Magento Commerce</strong>
    <img src="http://shop.tvornica-snova.hr/skin/frontend/default/f002_yellow/images/logotvornica.png" alt="Magento Commerce">
</a> 
```

第一个包含对 的两个引用`class="logo"`，其中定义了规则`margin-top: -10px;`。对于标题最接近页面顶部的任何页面都是这种情况 - 它被拉起`20px`

第二个的标记略有不同，只包含一个对类的引用——因此你看到了 10px 的偏移。

# android - Mvvmcross Android - 错误膨胀类：ClassNotFoundException

> ID：15374447
> 
> 赞同：2
> 
> 时间：2013-03-12T23:46:15.027
> 
> 标签：android, xamarin, mvvmcross, xamarin.android

尝试扩充 xml 文件时，我的 OnViewModelSet() 函数出现错误。

打电话时

```
LayoutInflater inflater = LayoutInflater.From(this);
View mainView = inflater.Inflate(Resource.Layout.Main, null); 
```

我收到“java.lang.ClassNotFoundException：Mvx.MvxBindableListView”

这是整个例外：

```
Android.Views.InflateException: Binary XML file line #1: Error inflating class Mvx.MvxBindableListView

 at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) [0x00024] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:145

at Android.Views.LayoutInflater.Inflate (int,Android.Views.ViewGroup) [0x0003e] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-12/src/generated/Android.Views.LayoutInflater.cs:543

at AndroidCornerstoneMobile.MainView.OnViewModelSet () [0x00010] in c:\Users\David\Documents\Work\AndroidXamarin\AndroidCornerstoneMobile\Views\MainView.cs:30

at at Cirrious.MvvmCross.Droid.Views.MvxActivityView`1<Core.ViewModels.MainViewModel>.set_ViewModel (Core.ViewModels.MainViewModel) <0x000bb>

at at Cirrious.MvvmCross.ExtensionMethods.MvxViewExtensionMethods.OnViewCreate<Core.ViewModels.MainViewModel> (Cirrious.MvvmCross.Interfaces.Views.IMvxView`1<Core.ViewModels.MainViewModel>,System.Func`1<Core.ViewModels.MainViewModel>) <0x00203>

at at Cirrious.MvvmCross.Droid.ExtensionMethods.MvxAndroidActivityExtensionMethods.OnViewCreate<Core.ViewModels.MainViewModel> (Cirrious.MvvmCross.Droid.Interfaces.IMvxAndroidView`1<Core.ViewModels.MainViewModel>) <0x00297>

at at Cirrious.MvvmCross.Droid.Views.MvxActivityView`1<Core.ViewModels.MainViewModel>.OnCreate (Android.OS.Bundle) <0x000d3>

at at Cirrious.MvvmCross.Binding.Droid.Views.MvxBindingActivityView`1<Core.ViewModels.MainViewModel>.OnCreate (Android.OS.Bundle) <0x000b7>

at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-lion-bigsplash/0e0e51f9/source/monodroid/src/Mono.Android/platforms/android-12/src/generated/Android.App.Activity.cs:1837

at at (wrapper dynamic-method) object.8c1f4311-41e4-4a0f-98f2-454a6152589a (intptr,intptr,intptr) <IL 0x00017, 0x00043>

at 

at --- End of managed exception stack trace ---

at android.view.InflateException: Binary XML file line #1: Error inflating class Mvx.MvxBindableListView

at  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)

at  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)

at  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)

at  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

at  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

at  at cirrious.mvvmcross.binding.droid.views.MvxBindingActivityView_1.n_onCreate(Native Method)

at  at cirrious.mvvmcross.binding.droid.views.MvxBindingActivityView_1.onCreate(MvxBindingActivityView_1.java:31)

at  at android.app.Activity.performCreate(Activity.java:4539)

at  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)

at  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2013)

at  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)

at  at android.app.ActivityThread.access$600(ActivityThread.java:134)

at  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)

at  at android.os.Handler.dispatchMessage(Handler.java:99)

at  at android.os.Looper.loop(Looper.java:137)

at  at android.app.ActivityThread.main(ActivityThread.java:4697)

at  at java.lang.reflect.Method.invokeNative(Native Method)

at  at java.lang.reflect.Method.invoke(Method.java:511)

at  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)

at  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)

at  at dalvik.system.NativeStart.main(Native Method)

at Caused by: java.lang.ClassNotFoundException: Mvx.MvxBindableListView

at  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

at  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)

at  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)

at  at android.view.LayoutInflater.createView(LayoutInflater.java:552)

at  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)

at  ... 20 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:47:39.963

要扩充 MvvmCross 类，您**必须**使用类`BindingInflate`提供的方法`MvxActivity`。最简单的方法是调用`SetContentView()`inside `OnCreate()`or `OnViewModelSet()`。

这些方法通过 MvvmCross 绑定代码路由膨胀，该代码知道如何解释`Mvx.`缩写名称空间并知道如何解包`MvxBind`绑定语句。

默认的 Android inflater 不知道这些事情中的任何一个 - 所以我们不能只使用它。

# gdb - 检索 gdb 选项值

> ID：15374451
> 
> 赞同：0
> 
> 时间：2013-03-12T23:46:38.683
> 
> 标签：gdb

gdb 中有没有办法检索（而不是打印）日志文件、日志重定向等选项的值？为什么他们提供了 set 命令但没有 get 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:53:52.590

> Why do they provide a set command but no get command?

[The GDB manual covers this](http://sourceware.org/gdb/onlinedocs/gdb/Logging-Output.html). The get command is usually called `show`, but sometimes `info`.

# visual-studio - 还原包时 NuGet 不执行脚本

> ID：15374458
> 
> 赞同：2
> 
> 时间：2013-03-12T23:46:56.973
> 
> 标签：visual-studio, nuget

在项目中恢复包时，Nuget 不执行脚本。

这是场景：我有一个安装了自定义 NuGet 包的项目。此项目已为解决方案启用 NuGet 包还原。这一切都完美无缺，我通过将项目从 TFS 放到一个空文件夹中进行了多次测试。

我已将 init.ps1 和 install.ps1 添加到 nuGet 包中，并且仍然可以正确获取和安装该包，但除非手动安装该包，否则脚本不会执行。

确切地说，如果我是第一次从 TFS 获取项目，init.ps1 和 install.ps1 都不会执行。

但是，如果我关闭解决方案并重新打开它，init.ps1 会执行（如预期的那样），但是当然 install.ps1 仍然没有执行，因为包已经恢复/安装。

当手动安装/卸载软件包时，这两个脚本都会正常执行（即，如果软件包“恢复”，它不会运行）。

我的互联网搜索没有发现任何关于这种行为的参考。我是否遗漏了一些明显的东西，或者在恢复包时这是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T20:46:39.553

使用包还原功能，以便并非所有包都签入源代码管理。因此，它唯一要做的就是将 NuGet 包下拉到您的`./solution/packages`文件夹中，以便可以在构建时正确解析程序集路径和引用。NuGet 不会在还原过程中重新安装，这意味着它不会在还原中执行任何 xml 文件转换或运行 PowerShell 安装/卸载脚本。

# ruby-on-rails - Rails .js 以模态渲染 html

> ID：15374459
> 
> 赞同：0
> 
> 时间：2013-03-12T23:47:00.353
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, twitter-bootstrap, modal-dialog

我将以下作为参数传递给模态：

```
"<iframe width="350" height="197" src="http://www.youtube.com/embed/jsExp2ebB4s?feature=oembed" frameborder="0" allowfullscreen></iframe>" 
```

然后，我尝试在我的 show.js 中以模态方式动态呈现它......

$("#modalpostvid").html("params[:vid]")

但它加载文本（即加载为字符串）而不是嵌入视频。

我怎样才能让它嵌入视频？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:49:17.633

尝试

```
$("#modalpostvid").html("<%= escape_javascript params[:vid].html_safe %>") 
```

# build - 在 Unity3d 独立播放器中设置图标

> ID：15374473
> 
> 赞同：2
> 
> 时间：2013-03-12T23:48:35.217
> 
> 标签：build, icons, unity3d

我正在尝试将 Unity 与构建脚本一起使用，该脚本通过最终从脚本调用 BuildPipeline 来创建我的应用程序。但是，我正在尝试弄清楚如何设置图标。调用 PlayerSettings.SetIconsForTargetGroup 并调用 BuildPipline.BuildPlayer 后，生成的可执行文件不会显示相应的图标，也不会在程序运行时显示。

我目前正在使用以下代码。

```
Texture2D texture = AssetDatabase.LoadMainAssetAtPath(iconFile) as Texture2D;               
int [] sizeList = PlayerSettings.GetIconSizesForTargetGroup(BuildTargetGroup.Standalone);
Texture2D[] iconList = new Texture2D[sizeList.Length];
for(int i=0;i<sizeList.Length;i++)
{
    int iconSize = sizeList[i];
    iconList[i] = (Texture2D)Instantiate(texture);
    iconList[i].Resize(iconSize,iconSize,TextureFormat.ARGB32,false);
}
PlayerSettings.SetIconsForTargetGroup(BuildTargetGroup.Standalone,iconList); 
```

我究竟做错了什么？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T01:38:35.507

使用`BuildTargetGroup.Unknown`对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T10:51:30.787

这也对我有用：

```
BuildTargetGroup.Unknown 
```

但是有一个不希望的结果：在设置一个 Texture2D PNG 时，Unity 不会覆盖所有图标大小，因此 Windows 资源管理器会在 Unity 默认图标和不同分辨率的图标之间交换我的应用程序 EXE 的图标。当然，这似乎是 Unity3D BuildPipeline.BuildPlayer(..) 或 SetIconsForTargetGroup(..) 中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T10:15:18.927

如果您为 OSX 调用 BuildPipline.BuildPlayer，则需要指定完整文件夹：

> /MyPath/MyApp.app

即不要遗漏“.app”部分，因为没有那个 Unity 会构建应用程序，但不会在分辨率对话框中包含图标或启动图像。

# json - MongoDB获取所有项目并标记收藏夹

> ID：15374474
> 
> 赞同：0
> 
> 时间：2013-03-12T23:48:42.050
> 
> 标签：json, mongodb

我想获取所有项目并将我的收藏夹列表中的那些标记为收藏夹。

假设我有这个：

```
{
    "user": {
        "favorites": [2]
    }
} 
```

和这个：

```
{
    "item": {
        "_id"= "1",
        "value": "myval"
    }
}

{
    "item": {
        "_id"= "2",
        "value": "myval"
    }
}

...  // Rest of documents 
```

我想得到这个

```
{
    "item": {
        "_id"= "1",
        "value": "myval"
    }
}

{
    "item": {
        "_id"= "2",
        "value": "myval",
        "isFavorite": "yes"  // I just want to mark my favorites somehow.
    }
}

... // Rest of documents 
```

我将如何在 MongoDB 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:40:41.273

给定一个具有收藏夹数组的用户，其中每个条目都是项目 id - 例如： { _id: 112233 "user": { "favorites": [2,7,13] } }

你会得到收藏夹数组 [2,7,13]

然后将更新写入您的**项目**集合（假设您的用户 ID 为 112233）

```
>db.items.update({"_id": {$in:[2,7,13]}}, {$set:{"isFavorite":true}},{ multi: true })
// yeilding
> db.items.find()
{ "_id" : 1, "value" : "myVal" }
{ "_id" : 3, "value" : "myVal" }
{ "_id" : 4, "value" : "myVal" }
{ "_id" : 2, "isFavorite" : true, "value" : "myVal" } 
```

在您的示例中，您的项目有些嵌套 - 不确定这是否是真的。

如果您的项目记录是

```
{ _id:999,item:{_id:1,value:"myValue"}} 
```

你真的打算更新“item._id”为1的项目（而不是文档强制_id 999），那么你会

```
db.items.update({"item._id": {$in:[2,7,13]}}, {$set:{"item.isFavorite":true}},{ multi: true }) 
```

正如@WiredPrairie 所指出的，它是一种特殊的文档结构。人们可能期望用户将他们的 _id 作为第一类字段——每条记录都有一个。

假设您的项目集合包含所有人共享的项目，您可能不想在项目上存储“isFavorite”，因为它不是每个人都喜欢的。另一种建模方法是向每个项目添加一个数组，其中包含喜欢他们的用户的 id。

就像是

```
>db.items.update({"_id": {$in:[2,7,13]}},{$addToSet:{"favoredByUserIds": "user1"}},{ multi: true })
// yeilding 'user1' in the favored by array
> db.items.find()
{ "_id" : 1, "value" : "myVal" }
{ "_id" : 3, "value" : "myVal" }
{ "_id" : 4, "value" : "myVal" }
{ "_id" : 2, "favoredByUserIds" : [ "user1" ], "value" : "myVal" } 
```

使用 $addToSet 可以确保操作可以重复，但“user1”只会添加一次。

# javascript - 幻灯片放映几分钟后图像源在错误的时间更改

> ID：15374476
> 
> 赞同：1
> 
> 时间：2013-03-12T23:48:53.063
> 
> 标签：javascript, slideshow, fadein, fadeout

我是一名设计师而不是程序员，但我正在尝试掌握 javascript，因此当涉及到插件之外的网页设计时，我有更多的设计选择。所以这就是我遇到的问题。

我有一个包含 4 个幻灯片的页面。现在我有了它，这样当单击 4 个按钮之一时，它会更改数组，它从中获取图像源并每 4 秒循环一次图像。

起初，幻灯片看起来很好，并且在图像隐藏时发生了变化，但几分钟后，源变化随着褪色效果而过时，并在其可见时发生。让节目切换没有问题也可以正常工作。

所有的时间和变量都会被重置，并且`onClick`-call 中的新参数会切换使用哪个数组。我尝试了一种解决方案，我将图像更改部分设为它自己的函数并从其他函数调用它以更多地控制时间，但由于某种原因`clearTimeout`停止工作以清除循环，它仍然会同时播放循环的一个实例时间作为另一个。

也许有人可以查看此代码并查看针对时间问题的简单修复。

```
i=0
var delay=4000
var fade=1000
var timer;

function play(showNum){
    var showNum = showNum; 
    $("#show").stop(true,true)
    newShow(); 
    changeInfo(showNum);
    $("#show").hide();
    change(showNum);
}

function change(showNum){
    $("#show").fadeIn(fade);
    $("#show").attr("src",showNum[i]);
    i = (i+1)% showNum.length;
    $("#show").delay(delay-(fade*2)).fadeOut(fade);
    timer=setTimeout (function(){change(showNum)},delay)
}

function newShow(){
    clearTimeout(timer);
    i=0;
} 
```

这是我发布后代码的更新。

```
function play(showNum){
var showNum = showNum; 
$("#show").stop(true,true);
newShow(); 
$("#show").hide();
changeInfo(showNum);
change(showNum);
$("#show").fadeIn(fade);
setTimeout(function(){loop(showNum);},fade*2);
}
function loop(showNum){
$("#show").fadeOut(fade);
setTimeout (function(){change(showNum);},fade);
$("#show").fadeIn(fade);
int=setTimeout (function(){loop(showNum);},delay);
}

function change(showNum){
$("#show").attr("src",showNum[i]);
i = (i+1)% showNum.length;
}

function newShow(){
 clearTimeout(int);
 i=0;
} 
```

我不再遇到时间问题了，但是如果我在新幻灯片处于淡出状态时单击新幻灯片，我确实会遇到奇怪的问题然后淡出并从那里开始正确的幻灯片放映。

# nginx - 使用 nginx 来自 /media/ 的服务器文件

> ID：15374478
> 
> 赞同：0
> 
> 时间：2013-03-12T23:48:54.920
> 
> 标签：nginx

如果这是一个非常愚蠢的问题，请先道歉。

好的 - 我正在使用 Flask + nginx 编写一个供个人使用的小应用程序。

我已经设置了 nginx 和烧瓶，并且 nginx 非常高兴地为 Flask 应用程序的静态资产提供服务。我现在要做的是从`/media/`Ubuntu 服务器盒上服务器所有媒体文件。

基本上我希望 nginx 能够访问和服务器任何可用的文件，`/media`这些文件可能是 USB 驱动器、SD 卡等。

我已经为 nginx 设置了静态和媒体的别名：

```
location /static {
    alias /path/to/my/app/static;
}

location /media {
    alias /media;
} 
```

而且我很确定 nginx 很高兴，因为如果我将静态路径复制到媒体别名，我就会得到我的静态文件。

在我指向 的那一刻`localhost/media`，我只是得到一个空页面（不是 nginx 403 禁止页面）。

我尝试将权限更改`/media`为 744 - 没有变化。是否有一些根本原因导致我无法“看到”该`/media`目录？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:43:43.893

这看起来像一个权限问题。可执行位需要通过目录，所以我想这`chmod -R 0755 /media`可以解决问题。有一种方法可以仅将其应用于更安全的目录，但即使在所有文件上，个人使用也不是问题。

# iphone - twitter/facebook ios 应用程序如何标记上次阅读位置？

> ID：15374481
> 
> 赞同：1
> 
> 时间：2013-03-12T23:49:11.883
> 
> 标签：iphone, ios, facebook, twitter

我一直在尝试通过谷歌/查看苹果开发者信息并在此处搜索来解决这个问题，但无法解决。

在当前的 Twitter 和 Facebook 应用程序中，它们会用“锯齿状单元格”（矩形单元格，不太高，顶部和底部）标记时间线中的最后读取位置（或者至少，刷新时时间线的顶部是什么）边缘呈锯齿状/锯齿状）

这是标准的 iOS 功能还是 3rd 方库/控件，有人知道如何在我自己的应用程序中使用它吗？

提前致谢！

格伦/别名

# jquery - 如何使用 JQuery 在 Codeigniter 中加载页面

> ID：15374482
> 
> 赞同：-6
> 
> 时间：2013-03-12T23:49:12.170
> 
> 标签：jquery, codeigniter, post

如何使用 JQuery 将新页面加载到浏览器，同时将一些数据发布到新的控制器索引函数？

我在考虑 window.location=url?foo=bar 但是有没有办法发布数据，所以 ?foo=bar 不会出现在 URL 中？

一些评论建议使用 Ajax，但它处理的 ajax 的全部意义不在于它在不离开或刷新它正在运行的当前页面的情况下处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:57:30.757

使用

```
 window.location.href 
```

无法发送**POST**请求。

你要做的就是设置一个带有数据字段的表单标签，将表单的action属性设置为URL，将方法属性设置为POST，然后在表单标签上调用提交方法。

或者您可以通过以下方式解决问题：

在 HTML 中添加一个表单，如下所示：

```
 <form style="display: hidden" action="/the/url" method="POST" id="form">
   <input type="hidden" id="var1" name="var1" value=""/>
   <input type="hidden" id="var2" name="var2" value=""/>
 </form> 
```

并使用 JQuery 来填充这些值（当然你也可以使用 javascript 来做类似的事情）

```
 $("#var1").val(value1);
 $("#var2").val(value2); 
```

然后最后提交表格

```
 $("#form").submit(); 
```

在服务器端，您应该能够通过检查 var1 和 var2 来获取您发送的数据，有关更多详细信息，请参阅[**此**](http://api.jquery.com/submit/)

希望它会有所帮助！

# asp.net-mvc-3 - 如何从数据库中的日期列表中获取最后一个日期，然后将其与当前日期进行比较？

> ID：15374488
> 
> 赞同：0
> 
> 时间：2013-03-12T23:49:38.577
> 
> 标签：asp.net-mvc-3, linq

我正在尝试从数据库中检索日期，然后使用它与当前日期进行比较。如何从数据库中的日期列表中获取最后一个日期，然后将其与当前日期进行比较？这是我尝试过的方法，但出现异常：“LINQ to Entities 无法识别方法 'System.DateTime Last...”</p>

```
 var manageDate= from d in db.Enrollments.Select(da=>da.Date) select d;
        var manageAssgnDate = from asgn in db.Enrollments.Select(asgn => asgn.Date) select asgn;
        List<DateTime> newDate = manageDate.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:18:39.930

找到了解决方法：

var stdAssgn= from sa in db.Assignments where sa.StudentId==currentId select sa.Date; var dt = stdAssgn.ToList().Last (); 字符串 a = dt.ToString(); 并在需要时转换为 DateTime... DateTime b=Convert.ToDateTime(a);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:12:27.757

我通常使用 lambda：

```
// This gets the max date in the table
var manageDate = db.Enrollments.Max(da => da.Date); 
```

这是你要求的吗？

# wordpress - 如何创建分页

> ID：15374490
> 
> 赞同：-4
> 
> 时间：2013-03-12T23:49:50.800
> 
> 标签：wordpress, pagination

谁能向我解释如何为我们在 WordPress 数据库中的内容实现分页？我们有大约 2000 条记录，我不想在单个页面中显示它们。

有人可以帮忙吗？这是我拥有的代码，我可以显示我的数据库的内容

```
<?php
require_once( dirname(__FILE__) . '/wp-load.php' );
global $wpdb;
$table = $wpdb->prefix."car_saver";  
$data = $wpdb->get_results("SELECT * FROM " . $table );
if(count($data))
{
?>
<table width="700" cellspacing="0" border="0">
  <thead>
     <tr>
        <th>id</th>
        <th>Make</th>
        <th>Model</th>
        <th>Sub Model</th>
        <th>MSRP</th>
        <th>Utility</th>  
        <th>Feature</th>            
        <th>Year</th>   
      </tr>
  </thead>
  <tfoot>
        <tr>
        <th>id</th>
        <th>Make</th>
        <th>Model</th>
        <th>Sub Model</th>
        <th>MSRP</th>
        <th>Utility</th>  
        <th>Feature</th>            
        <th>Year</th>   
      </tr>
  </tfoot>
  <tbody>
  <?php 
    foreach($data as $p): ?>
     <tr>
      <td align="center"><?php echo $p->car_id; ?></td>
      <td align="center"><?php echo $p->Make; ?></td>
      <td align="center"><?php echo $p->Model; ?></td>
      <td align="center"><?php echo $p->subModel; ?></td>
      <td align="center"><?php echo $p->MSRP; ?></td>
      <td align="center"><?php echo $p->Utility; ?></td>
      <td align="center"><?php echo $p->Feature; ?></td>
      <td align="center"><?php echo $p->Year; ?></td>
     </tr>
     <?php endforeach; ?>
  </tbody>
  </table>
<?php 
}
else echo "data not found";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:54:22.377

使用`<!--nextpage-->`编辑帖子/页面中的选项。但是您需要使用一个主题，该主题知道如何翻译`<!--nextpage-->`标签和为页面编号，并添加指向上一页和下一页的链接。

许多自定义主题不自动支持这一点。您可能必须添加它，或者选择一个已经支持它的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:19:39.673

你需要的不仅仅是试试这个尺寸::

```
$results_per_page = 10;
$current = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1;

global $wpdb;

$table = $wpdb->prefix."car_saver";  
$rows = $wpdb->get_results("SELECT * FROM " . $table );

if( !empty($wp_query->query_vars['s']) ):
 $args['add_args'] = array('s'=>get_query_var('s'));
endif;

$args = array(
  'base' => @add_query_arg('paged','%#%'),
  'format' => '',
  'total' => ceil(sizeof($rows)/$results_per_page),
  'current' => $current,
  'show_all' => false,
  'type' => 'plain',
  );

  echo paginate_links($args);
  $start = ($current - 1) * $results_per_page;
  $end = $start + $results_per_page;
  $end = (sizeof($rows) < $end) ? sizeof($rows) : $end;
  echo '<br />';

 for($i=$start;$i < $end ;++$i ):
  $row = $rows[$i];
 endfor; 
```

# sql - sql server 从步骤更新双舍入

> ID：15374492
> 
> 赞同：0
> 
> 时间：2013-03-12T23:50:04.873
> 
> 标签：sql, sql-server-2008, sql-update

我有这个问题：在我的数据库中有一个双值字段。我需要这个值按一个恒定步长四舍五入：例如，我设置一个步长为 20.0，我希望值 17.8 变为 20.0，值 31.2 变为 40.0 等等。

我如何通过查询来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:52:22.717

为此，您可以将值除以步长，将其四舍五入，然后乘以步长。大多数 SQL 方言都有算术函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:56:54.793

```
declare @stepsize float = 20.0

declare @val float = 17.6

select CEILING(@val / @stepsize) * @stepsize    -- Result 20.0

set @val = 31.2

select CEILING(@val / @stepsize) * @stepsize    -- Result 40.0 
```

从您的问题中不清楚 6.0 应该用 20.0 的 stepzie “四舍五入”到什么程度。它应该四舍五入到零吗？

# c# - 如何在标签中显示多行？

> ID：15374494
> 
> 赞同：1
> 
> 时间：2013-03-12T23:50:15.120
> 
> 标签：c#, asp.net, css

以下是我从数据库中获取的记录：

“亲爱的：感谢您申请学校。我们已收到您对该计划的申请。截至今天，我们收到以下申请：”

我正在尝试将上述值放入标签中。我的标签如下所示：

```
<div id="secondd" style="float:left;width:50%;background-color:#C0D5F2;">
       <asp:Label id="valueIntroduction" Cssclass="labelarea" runat="server">   </asp:Label>
       <div  class="line"></div> 
```

我的问题是价值没有融入标签。如何使其成为多行标签？

这是包含此 div 的 HTML：

```
<div id="first" style="float:left;width:50%;background-color:#C0D5F2"> 
    <div id="second" style="float:left;width:50%;background-color:#C0D5F2"> 
        <div id="Introduction" style="float:left;width:100%" class="wote">     
            Introduction: 
        </div> 
        <div class="line"></div> 
    </div>   
    <div id="secondd" style="float:left;width:50%;background-color:#C0D5F2;"> 
        <asp:Literal id="valueIntroduction" runat="server"> </asp:Literal> 
    <div class="line"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:59:54.550

如果您希望文本根据 outer 的内联样式换行`<div>`，您可以将 更改`<asp:label>`为 an`<asp:literal>`并使用 CSS 来设置 outer 的样式`<div>`。

不同之处在于 Literal 不呈现任何 HTML 标记，而 Label 将被包装在元素中。Literal 只是插入您拥有的确切文本，让您现有的 HTML 和 CSS 进行样式设置。

不同风格的一个例子是：

`width`减少百分比，注意属性的 20% 而不是 50% ：

```
<div id="secondd" style="float:left;width:20%;background-color:#C0D5F2;"> 
```

或者，使用像素的专用值（用 表示`px`）

```
<div id="secondd" style="float:left;width:150px;background-color:#C0D5F2;"> 
```

您甚至可以缩进文本，使用`text-indent`. 我建议谷歌一些基本的 CSS 并尝试不同的东西，这是最好的学习方式。

您只需使用它来查看它如何适合您的网页。一旦掌握了窍门，请注意以备将来参考，您可以为这些东西使用样式表，这将使您的代码更清晰，并允许您为应用程序创建可重用、易于编辑的样式。

# c++ - c++ 中的多重继承（Qt 示例）

> ID：15374496
> 
> 赞同：2
> 
> 时间：2013-03-12T23:50:23.220
> 
> 标签：c++, qt, multiple-inheritance

我有多重继承的问题。

我想要一个 IEdge 类来实现 QGraphicsItem“接口”，其中包含 boundindRect() 和 paint(...) 抽象方法。IEdge 还添加了一些新方法。

```
class IEdge : public QGraphicsItem
{
public:
virtual Vertex * getVertex1() = 0;
virtual Vertex * getVertex2() = 0;
} 
```

现在我想创建 UndirectedEdge，它扩展了 IEdge，但我不想自己实现 boundingRect() 和 paint(...)，我想使用 IQGraphicsLineItem 实现。

```
class UndirectedEdge : public IEdge, public IGraphicsLineItem
{
public:
virtual Vertex* getVertex1();
virtual Vertex* getVertex2();

} 
```

但这不起作用，编译器说 UndirectedEdge 是抽象的，因为 boundingRect() 和 paint(...) 没有实现（但我确信， IGraphicsLineItem 包含这些方法）。我不知道，为什么它不起作用。非常感谢您的解释。

**编辑：**

我可以解决这个问题，但我只是好奇。在我的主要语言 C# 中它会起作用，我错过了一些关于 C++ 继承的重要内容:-( ...一些提示将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:13:15.387

我假设您的意思是您继承自`QGraphicsLineItem`，而不是`IGraphicsLineItem`。（如果我错了，请更正。） `QGraphicsLineItem`继承自`QGraphicsItem`.

因为您**没有**使用*虚拟继承*，所以您的`UndirectedEdge`对象实际上包含以下**两个**实例`QGraphicsItem`：

```
UndirectedEdge::IEdge::QGraphicsItem // 1st instance of QGraphicsItem - abstract functions not defined!!
UndirectedEdge::QGraphicsLineItem::QGraphicsItem // 2nd instance - abstract items are defined just fine 
```

其中只有一个具有正确覆盖的抽象函数（那个`QGraphicsLineItem`）。编译器一定在抱怨另一个。

如果您希望我详细说明这个解释，请告诉我 - 我知道它很短！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:06:00.930

编译器是正确的：

IEdge::boundingRect() 没有实现，IGraphicsLineItem::boundingRect() 是。
IEdge::paint() 没有实现，IGraphicsLineItem::paint() 是。

正如 Ron 所说，您可以像这样委派这些任务：http: [//ideone.com/mfdr0p](http://ideone.com/mfdr0p)

```
#include <iostream>

class Base1
{
public:
  virtual void func1() = 0;
};

class Base2
{
public:
  virtual void func1();
};

void Base2::func1()   // This is the function you want to use
{
  std::cout << "Base2::func1()" << std::endl;
}

class Derived : public Base1
{
public:
  virtual void func1();   // Override as normal
private:
  Base2 m_base2;
};

void Derived::func1()
{
  m_base2.func1();   // Delegation happens here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:53:31.840

您应该使用[委托](http://en.wikipedia.org/wiki/Delegation_%28programming%29)。只需使用 IQGraphicsLineItem 实例构造您的 UndirectedEdge 以委托适当的调用。

# javascript - 绑定在使用 jQuery 的第一个 KeyPress 上不起作用

> ID：15374500
> 
> 赞同：5
> 
> 时间：2013-03-12T23:50:59.567
> 
> 标签：javascript, jquery, html

我有一个表单，当按下一个键或从文本区域粘贴和剪切文本时，会出现剩余的字符数量，但在第一次按键时该功能不起作用，但在第二次按键时，它确实如此。我的代码如下。

```
$('.Textarea').keypress(function (event) {
    if ($(this).is(':visible')) {
        $(this).bind('paste copy cut keypress', function () {
            var CharsLeft = $(this).parent('div').find('.CharsLeft');
            var Chars = $(this).val().length;
            $('.CharsLeft').text(5000 - Chars);
        });

        if (event.keyCode == 13) {
            var Value = $(this).val();

            $(this).parent('div').find('.SubMessages').append('<div style="border-top:1px solid #EEE; padding:10px 0;">' + 'You: ' + Value + '</div>');
            $(this).val('');

            event.preventDefault();
        }
    }
}); 
```

```
<div class="Message" style="width:100%; text-align:left;">
    <div class="MsgInfo" style="display:block; border-bottom:1px solid #EEE;">
        <span class="InnerMsg">From: Tera</span>
        <span class="InnerMsg">Subject: Welcome To Tera!</span>

        <span class="InnerMsg">When: 2 Hours Ago</span>
        <div style="clear:both;"></div>
    </div>
    <div class="UserMsgContent" style="display:block; padding:10px; line-height:1.5em;">
        <div class="SubMessages">
            <div style="padding:10px 0;">Hello</div>
        </div>
        <textarea style="width:930px;" class="Textarea" placeholder="Reply!" maxlength="5000"></textarea>
        <div style="margin-top:10px;">
            <div class="CharsLeft">5000</div>Characters Left
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:57:30.313

改为使用`keyup`，因为读取值的长度`keypress`并不能为您提供准确的文本长度。

当您按下该键时，该`keypress`事件会触发，但`textarea`直到释放该键后您的新文本才会更新。使用`keyup`，类似于以下内容：

```
$(this).bind('paste copy cut keyup', function() {
    var CharsLeft = $(this).parent('div').find('.CharsLeft');
    var Chars = $(this).val().length;

    $(CharsLeft).text(5000 - Chars);    
}); 
```

* * *

[**演示**](http://jsfiddle.net/jRzdP/)- 使用 keyup 代替

* * *

我在演示中唯一更改的是绑定选择器，`$('.Textarea').bind()`以使其在小提琴中工作，因为在小提琴中`$(this)`不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T23:58:48.727

奇怪的行为。
绑定`keyup keydown`而不是`keypress`修复它。[http://jsfiddle.net/np9w5/1/](http://jsfiddle.net/np9w5/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:55:05.167

```
$(this).on("keypress", function() {
    var CharsLeft = $(this).parent('div').find('.CharsLeft');
    var Chars = $(this).val().length;

    $(CharsLeft).text(5000 - Chars);    
}); 
```

尝试`.on`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T23:55:28.047

试试这个。

```
$(this).keypress(function() {
    var CharsLeft = $(this).parent('div').find('.CharsLeft');
    var Chars = $(this).val().length;

    $(CharsLeft).text(5000 - Chars);    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T23:57:00.260

为什么要将 CharsLeft 包装在另一个 $() 中？

它应该是：

```
CharsLeft.text(5000 - Chars); 
```

另外，我相信您应该使用 .on() 而不是 .bind() （已弃用）

这是带有解决方案的 jsFiddle：http: [//jsfiddle.net/FzWaD/](http://jsfiddle.net/FzWaD/)

那里还包含更多错误修复。

# .net - 存储在 MS Access 中时添加到日期的时间值

> ID：15374518
> 
> 赞同：1
> 
> 时间：2013-03-12T23:52:56.443
> 
> 标签：.net, vb.net, ms-access, oledbcommand

我正在使用 .NET 程序从分隔的文本文件中读取数据，然后以编程方式将数据添加到 Access 数据库（.mdb 文件）。该程序使用带有 .NET 3.5 框架的 VB.Net。

执行数据添加的例程使用带有如下`INSERT`语句的 OleDbCommand：

```
INSERT INTO myTable (secID, dataDate, salary ) VALUES (@secID, @dataDate, @salary) 
```

参数对应的OleDBCommand的参数值`@dataDate`通常有一个值，例如`"25-Nov-2011 00:00"`（一个字符串）。[如果我在将一行添加到数据库之前调试和检查 OleDBCommand，这就是我所看到的]。

通常，当在 Access 中检查数据时，日期会显示为没有时间值，如下所示`"25/11/2011"`：这是期望的结果。

但是，对于一台计算机，当将日期添加到 MS Access 时，它们会添加一个时间值（它们显示为：`"25/11/2011 12:00 p.m."`）。我知道如何在 Access 中解决这个问题（运行 dateValue 查询）。我的问题是我无法弄清楚为什么这只发生在这台机器上。它会导致此计算机上下游的数据查询问题。

问题计算机运行 Windows 7 并安装了 MS Access 2010（尽管这仅与检查数据有关，因为我们使用的是 .NET 的 oleDBCommand - 我认为？）。这是一台公司计算机，因此安全权限等非常严格。其他经过测试的计算机（我们自己的）具有相同的 Windows 和 Access 配置，但问题不同。

我们还检查了所有计算机上的区域日期/时间设置是否相同。只有这台电脑有问题。

我已经花了几天的时间，非常感谢以前遇到并解决过这个问题的人的帮助！非常感谢。

# java - 在 Java 中重写同步方法

> ID：15374521
> 
> 赞同：49
> 
> 时间：2013-03-12T23:53:24.427
> 
> 标签：java, overriding, synchronized

假设我在某个类上有一个同步方法：

```
abstract class Foo {
    public synchronized void foo() {  // synchronized!
        // ...
    };
} 
```

**我在不**使用同步修饰符的情况下覆盖了它：

```
class Bar extends Foo {
    @Override
    public void foo() {               // NOT synchronized!
        super.foo();
        // ...
    }
 } 
```

关于这种情况，我有几个具体问题：

1.  被覆盖的方法也会被隐式同步吗？
2.  如果没有，`super`-call 会被同步吗？
3.  如果没有`super`-call，是否会同步任何内容？
4.  有没有办法强制使用覆盖方法`synchronized`（我注意到接口内的抽象方法定义或方法定义不允许使用同步关键字）？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-12T23:56:49.753

```
public synchronized void foo() {  // synchronized!
    // ...
}; 
```

本质上是一样的：

```
public void foo() {
    synchronized (this) {  // synchronized!
        // ...
    }
}; 
```

后者更明确，所以我通常建议使用这种形式。或者更好地使用作为私有字段而不是“外部”对象的锁。

所以： 1\. 没有。 2\. 是的。3\. No. 4\. 标记方法`final`并调用`protected`可能被覆盖的方法。

```
public final void foo() {
    synchronized (this) {
        fooImpl();
    }
};
protected void fooImpl() {
    // ...
} 
```

与以往一样，使用委托而不是子类化可能会更好。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-13T00:13:19.157

在覆盖同步方法时未能使用同步有可能导致运行时错误。作为安全措施，您可以打开一个 Eclipse 检查器来检测这种情况。默认为“忽略”。“警告”也是一个有效的选择。 ![优先](../Images/0b55d005c82bd057142e276f9c4d764d.png)

这将产生此消息：

![在此处输入图像描述](../Images/ec90932447aa009fe881eaa61a85d0c8.png)

![在此处输入图像描述](../Images/e4183a5f481c4819727823ae3074e371.png)

# api - Astrid 请求返回空

> ID：15374523
> 
> 赞同：0
> 
> 时间：2013-03-12T23:53:41.287
> 
> 标签：api, http-post

我正在尝试使用[http://Astrid.com](http://Astrid.com) API，特别是使用此页面上“请求格式”部分下的方法获取数据 - [http://astrid.com/apidoc/file.README.html](http://astrid.com/apidoc/file.README.html)

我建立的网址是：https://astrid.com/api/7/task_list?app_id=[MY APP ID]&time=1&user_id=[MY USER ID]&sig=[MY REQUEST SIGNATURE]

它返回： {"list":[],"time":1363131562,"status":"success"}

似乎它有效，但有谁知道为什么“列表”数组可能返回空？我在我的个人资料中创建了一堆任务，因此它应该显示这些任务。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:26:52.500

您需要先使用 user_signin 方法登录。如果成功，您将获得一个令牌。

然后您需要调用提供令牌的 task_list 方法。您不需要使用 task_list 方法提供用户 ID。它仅用于选择您与该用户共享的任务。

登录示例： [https ://astrid.com/api/7/user_signin?provider=password&app_id=YOUR_APP_ID&secret=YOUR_ASTRID_PASSWORD&sig=SIGNATURE&time=1365715302.36&email=YOUR_EMAIL](https://astrid.com/api/7/user_signin?provider=password&app_id=YOUR_APP_ID&secret=YOUR_ASTRID_PASSWORD&sig=SIGNATURE&time=1365715302.36&email=YOUR_EMAIL)

获取任务的示例： [https ://astrid.com/api/7/task_list?active=true&token=THE_TOKEN&sig=SIGNATURE&app_id=YOUR_APP_ID&time=1365715304.41](https://astrid.com/api/7/task_list?active=true&token=THE_TOKEN&sig=SIGNATURE&app_id=YOUR_APP_ID&time=1365715304.41)

# c - 在反转字符串时交换指针值时出现分段错误

> ID：15374529
> 
> 赞同：-2
> 
> 时间：2013-03-12T23:54:51.747
> 
> 标签：c, pointers

我正在尝试反转字符串。我采用两个指针，一个指向字符串的开头，另一个指向字符串的结尾。然后我交换指针的值。

```
int main()
{

    char *string = "stack overflow";
    int len = strlen(string);
    char *end;
    char tmp; //temporary variable to swap values

    //pointer pointing at the end of the string
    end = string+len-1;

    printf(" value of start and end %c %c", *string , *end); //correct values printed
    while(string<end)
        {

                tmp = *string;
                *string = *end; //segmentation fault
                *end = tmp;
                *string++;
                *end--;

        }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:56:15.757

```
char *string = "stack overflow"; 
```

这将创建一个只读字符串文字。修改它是未定义的行为。改用数组：

```
char string[] = "stack overflow"; 
```

# dll - 不一致的dll链接

> ID：15374532
> 
> 赞同：4
> 
> 时间：2013-03-12T23:55:20.670
> 
> 标签：dll, linker, warnings

我收到几个警告说我有不一致的 dll 链接，尽管我像这样对我的 dll 的标题进行分类：

```
#ifdef MY_ENGINE_EXPORTS
#define ENGINE __declspec(dllexport)
#else
#define ENGINE __declspec(dllimport)
#endif 
```

当我将 MY_ENGINE_EXPORTS 添加到预处理器定义时，它可以很好地消除错误，但我的印象是这应该在构建/导出时自动完成。我的措辞有误吗？我包括了一个下划线，因为该项目是 2 个单词，例如“我的引擎”。我已经将它作为 MY_ENGINE_EXPORTS 和 MYENGINE_EXPORTS 进行了尝试，但似乎都不起作用。

正如我所说，我可以将它添加到预处理器定义中，但这让我很困惑，为什么它的行为不应该如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:26:04.437

> 我认为这是环境为 dll 项目创建的预定义宏

是的，当您使用 Win32 项目模板启动 DLL 项目时，确实会发生这种情况。该向导将自动为您添加 PROJECTNAME_EXPORTS 预处理器定义。

皱纹是它不能在符号中使用空格，因此不能使用“MY PROJECT_EXPORTS”。它将**删除**空间并使其成为 MYPROJECT_EXPORTS。哪个与您使用的 MY_PROJECT_EXPORTS 不匹配。当然，没有什么是快速编辑 + 替换无法解决的。

# actionscript-3 - #2007: 参数格式必须非空？

> ID：15374536
> 
> 赞同：0
> 
> 时间：2013-03-12T23:55:58.567
> 
> 标签：actionscript-3, flash, parameters, format

我的 as3 代码有问题，我尝试将影片剪辑链接到不同的场景（测验场景）。所以，我总共有 2 个测验，第一个测验使用外部脚本（as），第二个测验与第一个测验具有相同的脚本，但我将动作脚本放在 fla 中。它有不同的xml。但随后出现此错误消息：

```
TypeError: Error #2007: Parameter format must be non-null.
at flash.text::TextField/set defaultTextFormat()
at hiragana/createText()[E:\flash\!!!! FLASH JADI\PAK ASHAR FIX\hiragana.as:80]
at hiragana/kuisdua()[hiragana::frame209:48]
at hiragana/frame209()[hiragana::frame209:249] 
```

这是代码：

```
 // creates a text field
    public function createText(text:String, tf:TextFormat, s:Sprite, x,y:         Number, width:Number): TextField {
        var tField:TextField = new TextField();
        tField.x = x;
        tField.y = y;
        tField.width = width;
        tField.defaultTextFormat = tf; //looks like this is the source of problem (-.-)
        tField.selectable = false;
        tField.multiline = true;
        tField.wordWrap = true;
        if (tf.align == "left") {
            tField.autoSize = TextFieldAutoSize.LEFT;
        } else {
            tField.autoSize = TextFieldAutoSize.CENTER;
        }
        tField.text = text;
        s.addChild(tField);
        return tField;
    } 
```

这是完整的代码

```
import flash.display.*;
import flash.text.*;
import flash.events.*;
import flash.net.URLLoader;
import flash.net.URLRequest;

///*public class*/ kuisduaa extends MovieClip {

    // question data
    /*private*/ var dataXML2:XML;

    // text formats
    /*private*/ var questionFormat2:TextFormat;
    /*private*/ var answerFormat2:TextFormat;
    /*private*/ var scoreFormat2:TextFormat;

    // text fields
    /*private*/ var messageField2:TextField;
    /*private*/ var questionField2:TextField;
    /*private*/ var scoreField2:TextField;

    // sprites and objects
    /*private*/ var gameSprite2:Sprite;
    /*private*/ var questionSprite2:Sprite;
    /*private*/ var answerSprites2:Sprite;
    /*private*/ var gameButton2:GameButton;

    // game state variables
    /*private*/ var questionNum2:int;
    /*private*/ var correctAnswer2:String;
    /*private*/ var numQuestionsAsked2:int;
    /*private*/ var numCorrect2:int;
    /*private*/ var answers2:Array;

    /*public*/ function kuisdua() {

        // create game sprite
        gameSprite2 = new Sprite();
        addChild(gameSprite2);

        // set text formats
        questionFormat2 = new TextFormat("Arial",80,0xffffff,true,false,false,null,null,"center");
        answerFormat2 = new TextFormat("Arial",50,0xffffff,true,false,false,null,null,"left");
        scoreFormat2 = new TextFormat("Arial",30,0xffffff,true,false,false,null,null,"center");

        // create score field and starting message text
        scoreField2 = createText("",scoreFormat,gameSprite,-30,550,550);
        messageField2 = createText("Loading Questions...",questionFormat,gameSprite,0,50,550);

        // set up game state and load questions
        questionNum2 = 0;
        numQuestionsAsked2 = 0;
        numCorrect2 = 0;
        showGameScore2();
        xmlImport2();
    }

    // start loading of questions
    /*public*/ function xmlImport2() {
        var xmlURL:URLRequest = new URLRequest("kuis2.xml");
        var xmlLoader:URLLoader = new URLLoader(xmlURL);
        xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
    }

    // questions loaded
    /*public*/ function xmlLoaded2(event:Event) {
        dataXML  = XML(event.target.data);
        gameSprite.removeChild(messageField);
        messageField = createText("Tap Untuk Memulai",scoreFormat,gameSprite,-10,250,500);
        showGameButton("mulai");
    }

    // creates a text field
    /*public*/ function createText2(text:String, tf:TextFormat, s:Sprite, x,y: Number, width:Number): TextField {
        var tField2:TextField = new TextField();
        tField2.x = x;
        tField2.y = y;
        tField2.width = width;
        tField2.defaultTextFormat = tf;
        tField2.selectable = false;
        tField2.multiline = true;
        tField2.wordWrap = true;
        if (tf.align == "left") {
            tField2.autoSize = TextFieldAutoSize.LEFT;
        } else {
            tField2.autoSize = TextFieldAutoSize.CENTER;
        }
        tField2.text = text;
        s.addChild(tField2);
        return tField2;
    }

    // updates the score
    /*public*/ function showGameScore2() {
        scoreField2.text = "Soal: "+numQuestionsAsked2+"   Benar: "+numCorrect2;
    }

    // ask player if they are ready for next question
    /*public*/ function showGameButton2(buttonLabel:String) {
        gameButton = new GameButton();
        gameButton.label.text = buttonLabel;
        gameButton.x = 240;
        gameButton.y = 480;
        gameSprite2.addChild(gameButton);
        gameButton.addEventListener(MouseEvent.CLICK,pressedGameButton2);
    }

    // player is ready
    /*public*/ function pressedGameButton2(event:MouseEvent) {
        // clean up question
        if (questionSprite2 != null) {
            gameSprite2.removeChild(questionSprite2);
        }

        // remove button and message
        gameSprite2.removeChild(gameButton);
        gameSprite2.removeChild(messageField2);

        // ask the next question
        if (questionNum >= dataXML.child("*").length()) {
            gotoAndStop(6);
        } else {
            askQuestion2();
        }
    }

    // set up the question
    /*public*/ function askQuestion2() {
        // prepare new question sprite
        questionSprite2 = new Sprite();
        gameSprite2.addChild(questionSprite2);

        // create text field for question
        var question2:String = dataXML.item[questionNum].question2;
        if (dataXML.item[questionNum].question.@type == "text") {
            questionField2 = createText(question2,questionFormat2,questionSprite2,50,150,300);
        } else {
            var questionLoader2:Loader = new Loader();
            var questionRequest2:URLRequest = new URLRequest("triviaimages/"+question2);
            questionLoader2.load(questionRequest2);
            questionLoader2.y = 150;
            questionLoader2.x = 180;
            questionSprite2.addChild(questionLoader2);
        }

        // create sprite for answers, get correct answer and shuffle all
        correctAnswer2 = dataXML.item[questionNum2].answers.answer[0];
        answers2 = shuffleAnswers(dataXML.item[questionNum2].answers);

        // put each answer into a new sprite with a icon
        answerSprites2 = new Sprite();
        var xpos:int = 0;
        var ypos:int = 0;
        for(var i:int=0;i<answers2.length;i++) {
            var answerSprite2:Sprite = new Sprite();
            if (answers2[i].type == "text") {
                var answerField2:TextField = createText(answers2[i].value,answerFormat2,answerSprite2,30,-35,200);
            } else {
                var answerLoader2:Loader = new Loader();
                var answerRequest2:URLRequest = new URLRequest("triviaimages/"+answers2[i].value);
                answerLoader2.load(answerRequest2);
                answerLoader2.y = -22;
                answerLoader2.x = 25;
                answerSprite2.addChild(answerLoader2);
            }
            var letter:String = String.fromCharCode(65+i); // A-D
            var circle:Circle = new Circle(); // from Library
            circle.letter.text = letter;
            circle.answer = answers[i].value;
            answerSprite2.x = 100+xpos*250;
            answerSprite2.y = 350+ypos*100;
            xpos++
            if (xpos > 1) {
                xpos = 0;
                ypos += 1;
            }
            answerSprite2.addChild(circle);
            answerSprite2.addEventListener(MouseEvent.CLICK,clickAnswer); // make it a button

            // set a larger click area
            answerSprite2.graphics.beginFill(0x000000,0);
            answerSprite2.graphics.drawRect(-50, 0, 200, 80);

            answerSprites2.addChild(answerSprite2);
        }
        questionSprite2.addChild(answerSprites2);
    }

    // take all the answers and shuffle them into an array
    /*public*/ function shuffleAnswers2(answers:XMLList) {
        var shuffledAnswers2:Array = new Array();
        while (answers2.child("*").length() > 0) {
            var r:int = Math.floor(Math.random()*answers.child("*").length());
            shuffledAnswers2.push({type: answers2.answer[r].@type, value: answers2.answer[r]});
            delete answers2.answer[r];
        }
        return shuffledAnswers2;
    }

    // player selects an answer
    /*public*/ function clickAnswer2(event:MouseEvent) {

        // get selected answer text, and compare
        var selectedAnswer2 = event.currentTarget.getChildAt(1).answer;
        if (selectedAnswer2 == correctAnswer2) {
            numCorrect++;
            messageField2 = createText("Hai, kamu benar ! ",scoreFormat2,gameSprite2,-30,280,550);
        } else {
            messageField2 = createText("Iie, Jawabanmu Salah, yang benar adalah:",scoreFormat2,gameSprite2,53,280,370);
        }

        finishQuestion();
    }

    /*public*/ function finishQuestion2() {
        // remove all but the correct answer
        for(var i:int=0;i<4;i++) {
            answerSprites2.getChildAt(i).removeEventListener(MouseEvent.CLICK,clickAnswer);
            if (answers2[i].value != correctAnswer2) {
                answerSprites2.getChildAt(i).visible = false;
            } else {
                answerSprites2.getChildAt(i).x = 200;
                answerSprites2.getChildAt(i).y = 400;
            }
        }

        // next question
        questionNum2++;
        numQuestionsAsked2++;
        showGameScore2();
        showGameButton2("Lanjutkan");
    }

    // clean up sprites
    /*public*/ function CleanUp2() {
        removeChild(gameSprite);
        gameSprite2 = null;
        questionSprite2 = null;
        answerSprites2 = null;
        dataXML2 = null;
    } 
```

第一个测验完美地使用了该代码，我不知道为什么会出现这个错误，

我是as3的初学者，所以我在很多方面仍然缺乏，有人可以帮助我吗？我真的很感激它.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:00:59.673

您确定将非空`TextFormat`实例解析为 的第二个参数`createText()`吗？

该错误意味着您正在`null`为`tf:TextFormat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:59:59.927

除非我遗漏了什么，否则您的问题就在这里：

```
messageField2 = createText("Loading Questions...",questionFormat,gameSprite,0,50,550); 
```

&

```
messageField = createText("Tap Untuk Memulai",scoreFormat,gameSprite,-10,250,500); 
```

我看到`questionFormat2`并被`scoreFormat2`实例化，但我从未看到`questionFormat`or `scoreFormat`。您的错误表明`defaultTextFormat`（或`TextFormat`使用 提供`setTextFormat()`，以供将来参考）不能为空。Null 表示该对象尚未被实例化/创建。questionFormat 和 scoreFormat 永远不会被实例化。地狱，他们的变量甚至不存在。如果您使用的是适当的开发 IDE（FlashBuilder、FlashDevelop 等），您将永远无法编译此代码。

切换这两行以使用正确的格式，你应该没问题。

# mysql - 在 Play 中使用 Squeryl 将条目插入 MySQL！框架2.0

> ID：15374538
> 
> 赞同：0
> 
> 时间：2013-03-12T23:56:14.863
> 
> 标签：mysql, scala, playframework-2.0, squeryl

所以我是新手！框架，甚至更新到 Scala 和 Squeryl，但我正在尝试做一个简单的 REST 应用程序。现在我正在测试并尝试使用 Squeryl 进行设置。我按照[本教程](http://www.artima.com/articles/play2_scala_squeryl.html)进行了 Squeryl 的设置和 SQL 的演进。

现在模式演变工作了，并且设置了数据库，我创建了这样的 squeryl 模型：

```
case class App(
  name: String, 
  description: String, 
  website: String = "", 
  callback_url: String = "", 
  access_level: String = "", 
  consumer_key: String = "", 
  access_token: String = "",
  application_icon: String = "",
  organization_name: String = "",
  organization_website: String = "",
  created_on: Integer = 0,
  updated_on: Integer = 0) extends KeyedEntity[Long] {
  val id: Long = 0
}

case class Access_Token(
  token : String,
  token_secret : String,
  access_level : Integer) extends KeyedEntity[Long] {
  val id: Long = 0
}

object AppDB extends Schema {
  val applications = table[App]("applications")
  val access_tokens = table[Access_Token]
} 
```

所以在我的控制器中，我有这行代码，我认为它会插入一个新条目：

```
def create = Action { implicit request =>
        val entry = AppDB.applications.insert(new App("hello world", "just a test app", "http://www.com/"))
        Ok("New application entry made: " + entry.name)
    } 
```

但我只得到一个错误：[ExceptionInInitializerError: null]

我究竟做错了什么？我[在 squeryl 文档中基于此编写了](http://squeryl.org/inserts-updates-delete.html)

我一直在为此苦苦挣扎，我发现的每个示例都只显示了如何通过表单或他们拥有的某些表单助手来处理数据，但是 Play 中的 POST、PUT、GET、DELETE 请求呢！框架？我还没有看到任何与 REST 相关的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:01:56.580

我现在只是在使用 anorm，不是 squeryl，而是 Play！使集成对我来说很困难的框架。

# ios - 静态高度自定义单元格ListView

> ID：15374542
> 
> 赞同：1
> 
> 时间：2013-03-12T23:56:38.400
> 
> 标签：ios, xcode

我在计算自定义单元格行上的静态高度 (35) 时遇到了一些麻烦。当我尝试将返回高度从 120 降低到 35 时，我不断得到一个具有定义高度的重叠列表。

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 120;
} 
```

在此先感谢您的帮助。

# git - git：如何将我的工作文件与最新的文件合并

> ID：15374545
> 
> 赞同：4
> 
> 时间：2013-03-12T23:56:47.750
> 
> 标签：git, git-merge, git-pull

我是 git 新手，仍然遇到很多麻烦。

说我在工作`a.cpp`。我修改了一些代码`a.cpp`。而且，该更改还没有准备好提交或推送。

紧接着，其他人也做出了改变`a.cpp`。

在 SVN/CVS 中，签出要么是合并，要么是冲突。

我以为那`git pull`也是一样的。

但是，似乎`git pull`没有合并/冲突。这是正确的行为吗？

此外，`git checkout`只需简单地重写`a.cpp`，就会丢失我所有的更改。

有什么简单的方法可以提取最新版本并执行合并/冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:34:36.203

在你拉之前，把[你的更改藏起来](http://git-scm.com/book/en/Git-Tools-Stashing)。然后在拉取之后，您可以弹出隐藏的更改并将它们重新定位在最新的提交上。

首先存储所有更改

```
git stash 
```

您可以通过运行来查看您的存储`stash show`。如果您之前没有存储任何东西，那么您现在应该看到一个存储。您现在可以在不覆盖更改的情况下进行拉取：

```
git pull 
```

现在从存储中删除您的更改并将它们应用于当前签出的版本：

```
git stash pop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:46:29.660

另一种方法是提交 NOT push。然后从远程变基。

# sql - 我的 SCCM 2007 SQL Web 报告未显示结果

> ID：15374547
> 
> 赞同：2
> 
> 时间：2013-03-12T23:56:50.953
> 
> 标签：sql, sccm, sccm-2007

我使用 SQL Management Studio 创建了一个 SCCM SQL 报告。然后，我为我的 Asset Management Office 创建了以下提示，以在 Web 报告中使用：发布者、显示名称和版本。

显示名称和版本提示都是可选的。

我没有收到任何语法错误或任何东西，但是当我单击“显示”按钮生成 Web 报告时，我绝对没有收到任何结果。

这是我的 SQL 代码：

==================================================== =================================

**选择** dbo.v_R_System.Netbios_Name0、dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0、dbo.v_GS_ADD_REMOVE_PROGRAMS.Version0、dbo.v_GS_ADD_REMOVE_PROGRAMS.Publisher0

**从** dbo.v_R_System INNER JOIN dbo.v_GS_ADD_REMOVE_PROGRAMS ON dbo.v_R_System.ResourceID = dbo.v_GS_ADD_REMOVE_PROGRAMS.ResourceID

**其中dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0** = @DisplayName 和 dbo.v_GS_ADD_REMOVE_PROGRAMS.Version0 = @Version 和 dbo.v_GS_ADD_REMOVE_PROGRAMS.Publisher0 = @Publisher

**按**dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0 ASC 排序

==================================================== =================================

我运行我的报告并在 Publisher 提示符中输入类似 %Autodesk% 的内容，然后单击“显示”按钮，但绝对没有显示任何内容。我可以转到另一份报告并查找 Autodesk 产品，但不是这个。我不是一个精通 SQL 的人，所以如果有人能帮助我，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:08:40.637

% 符号通常表示通配符。它们与 like 关键字一起使用。你有等号。换句话说，

```
where DisplayName like '%fred%' 
```

将返回 fred、freddie、frederick 等。但是，

```
where DisplayName = '%fred%' 
```

只会返回 %fred%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:49:11.017

啊啊啊我明白你在说丹。

忽略我最后的声明/询问大家，我的代码现在可以工作了。我的 Prompt @variables 的 SQL 代码未正确配置为与“Like”常量一起使用，因此我将主 SQL 代码修改为：

==================================================== ================================ 选择不同的 dbo.v_R_System.Netbios_Name0、dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0、dbo.v_GS_ADD_REMOVE_PROGRAMS。 Version0, dbo.v_GS_ADD_REMOVE_PROGRAMS.Publisher0 FROM dbo.v_R_System Join dbo.v_GS_ADD_REMOVE_PROGRAMS On dbo.v_R_System.ResourceID = dbo.v_GS_ADD_REMOVE_PROGRAMS.ResourceID Where dbo.v_GS_ADD_REMOVE_PROGRAMS.Publisher0 Like @Publisher Or dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0 Like @DisplayName Or dbo.v_GS_ADD_REMOVE_PROGRAMS.版本 0 喜欢 @VersionOrder 由 dbo.v_GS_ADD_REMOVE_PROGRAMS.DisplayName0 ASC

==================================================== =================================

然后我不得不修改我的 Prompt SQL 代码以使用 Begin、If、Else 和 End 语句。我将只选择我的@Publisher 变量 Prompt SQL 代码，因为我的所有 Prompt @variables 的 SQL 代码基本相同。

这是我的发布者 (@Publisher) 提示的 SQL 代码：

==================================================== =================================

Begin
If(@__filterwildcard = '')
Select Distinct Publisher0
From v_Add_Remove_Programs Order By Publisher0
Else
Select Distinct Publisher0 From v_Add_Remove_Programs
Where Publisher0 Like @__filterwildcard
Order By Publisher0
End

==================================================== =================================

我之前用于 Prompt @variables 的代码是这样的，它不适用于我的主 SQL 代码中的“Like”常量：

==================================================== =================================

从 v_Add_Remove_Programs 中选择 Distinct Publisher0
按 Publisher0 排序，其中 Publisher0 喜欢 @__filterwildcard
按 Publisher0排序

==================================================== =================================

因此，显然使用 Begin、If、Else 和 End 语句在此查询过程中允许更多逻辑，因此允许我在报告的主要 SQL 代码中使用“Like”常量。

# javascript - html重复打印出来

> ID：15374548
> 
> 赞同：1
> 
> 时间：2013-03-12T23:56:52.293
> 
> 标签：javascript, html

我是使用 span 的新手。我正在尝试在同一页面上打印两次从 javascript 脚本中获得的信息。

我可以打印一次获得的信息，但是当我决定第二次打印信息时，它不会显示

**这个有效**

```
 <div id="layer4" class="auto-style10" style="position: absolute; width: 300px; height: 427px; z-index: 2; left: 1020px; top: 90px">
    <span class="auto-style8"><h4>Incident Details</h4><br />
        </span>
    <br />

&nbsp;<h6> Report ID : </h6> &nbsp; <span id="ReportID"></span> <br />

&nbsp;<h6> Description : </h6> &nbsp; <span id="Description"></span><br />

&nbsp;<h6> Category : </h6> &nbsp; <span id="Category"></span>  <br/>   

&nbsp;<h6> Date and Time : </h6> &nbsp; <span id="DateTime"></span> <br />

&nbsp;<h6> User Id/ Mobile Number : </h6> &nbsp; <span id="UserID"></span><br />
    <br />

<span id="ReportID"></span> 
    <form method="post" action="http://www.al-qarra.com/police_new/map2/changelevel.php" >

<select name="SelectCat" style="position: absolute; width: 60px; z-index: 2;">
<option>1</option>
<option>2</option>
<option>3</option>
</select>
<input name="reportno" type="hidden" value="<?php echo $_SESSION['incidentid']; ?>">

<input name="ChangeCat" id="SelectCat" type="submit" value="Change Status" style="position: absolute; left: 100px; width: 110px; z-index: 2;"/>

        </form>

</div> 
```

**但是当我将相同的 div 复制到同一页面但不同的位置时，它不会显示信息**

```
 <div id="layer44" class="auto-style10" style="position: absolute; width: 300px; height: 427px; z-index: 2; left: 1020px; top: 300px">
    <span class="auto-style8"><h4>Incident Details</h4><br />
        </span>
    <br />

&nbsp;<h6> Report ID : </h6> &nbsp; <span id="ReportID"></span> <br />

&nbsp;<h6> Description : </h6> &nbsp; <span id="Description"></span><br />

&nbsp;<h6> Category : </h6> &nbsp; <span id="Category"></span>  <br/>   

&nbsp;<h6> Date and Time : </h6> &nbsp; <span id="DateTime"></span> <br />

&nbsp;<h6> User Id/ Mobile Number : </h6> &nbsp; <span id="UserID"></span><br />
    <br />

</div> 
```

**这是我要求的 javascript**

```
</style>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

            $("#ReportID").text(nreportid);
            $("#Description").text(ndesc);
            $("#Category").text(ncat);

    }
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:06:09.127

到目前为止，我发现了几个问题：

*   您有重复的 id，这是不允许的。
*   您*认为*您添加的是在其他地方添加这些元素，但是您将它们*绝对*定位，因此它们必然会重叠
*   您将`<span>`元素留空，但`&nbsp;`在标签之间添加...看起来您正在制作标签汤
*   第一个代码末尾有一个表格，第二个没有。看到它们重叠，它们的第二组节点可能会永远隐藏起来。
*   您的 JavaScript 代码包含两个 ( *huuuge* ) 函数，它们不被称为 AFAIK。这可能会让人觉得粗鲁/傲慢，但请[按照常见问题解答中的](https://stackoverflow.com/faq#howtoask)建议*整理您的代码*
*   你在捣乱`z-index`，为什么？

但是，只要您不向我们展示您的 JavaScript 代码，这些猜测都几乎没有定论。例如，如果您正在使用`document.write('your-html');`，我们可以告诉您这是您的问题，然后继续我们的方式......所以请[设置一个像样的小提琴或其他东西](http://jsfiddle.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:59:02.497

尝试删除

```
style="position: absolute; width: 300px; height: 427px; z-index: 2; left: 1020px; top: 300px" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:59:40.087

该`id`属性必须是唯一的。如果您需要在页面上执行相同操作的多个项目，请改用 a `class`。

# android - 返回键代码不起作用

> ID：15374551
> 
> 赞同：1
> 
> 时间：2013-03-12T23:57:01.740
> 
> 标签：android

嘿，我的应用程序中有以下代码，但是当我使用后退按钮关闭我的音乐活动或主菜单时，它似乎不起作用，因为即使按下后退按钮退出应用程序，音乐仍在播放。但是，它确实适用于我的电影活动/电影剪辑，谁能解释可能是什么问题？

我没有收到任何错误：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK))
    {
        this.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:11:59.937

你可以在你的活动中使用它

```
 @Override
public void onBackPressed() {
    this.finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:19:45.943

Android API 5+ 的最佳解决方案是：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
} 
```

但是，这是默认行为。所以你的问题应该在其他地方。

显示一些代码以获取更多详细信息。

# ios - 如何更改作为 git 子模块的 Xcode 项目的构建设置

> ID：15374552
> 
> 赞同：0
> 
> 时间：2013-03-12T23:57:09.590
> 
> 标签：ios, git-submodules, workspace, projects

我有一个带有 iOS 应用程序的 Xcode 项目，该项目使用另一个项目，比如 Rest Kit，它实际上是一个 Git 子模块。

有充分的理由，当我构建调试版本时，我想改变 RestKit 的构建设置，但没有其他时间。我不想修改构建设置本身，因为它可能只是我需要对其进行更改的一个应用程序。所做的任何更改都将在 Git 中显示为已更改的文件。

# css - 单个样式表多个页面 Dreamweaver CS6

> ID：15374553
> 
> 赞同：0
> 
> 时间：2013-03-12T23:57:10.610
> 
> 标签：css, stylesheet, dreamweaver

我有 2 个页面共享相同的样式表。如何在不影响另一个的情况下对其中一个进行更改？我是编码新手，所以请尽可能具体。

例如：我在主页上有一个主图像，想在 PRACTICE AREAS 页面上删除它，但每当我这样做时，它会在所有页面上删除它。

请帮助，并提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:06:51.137

以不同方式设置页面样式的一个好做法是将类名应用于正文或对应于页面的封闭 div，例如：

```
<body class="home">
  <div>Content here</div>
</body> 
```

这为您提供了更大的特异性，因此在您的 CSS 中，您可以编写：

```
.home div {
  background-image: url('your-image.jpg') no-repeat left top;
} 
```

……或类似的。

但是，听起来您主页上的图像是**内容**，而不是其呈现。在这种情况下，您应该将它包含在 HTML 而不是 CSS 中。

```
<body class="home">
  <div><img src="your-image.jpg"> Content here</div>
</body> 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:06:52.543

据我所知，你不能用 CSS 做条件。我建议您为“练习区域”页面创建第二个样式表，并简单地覆盖显示主图像的样式元素。例如

/* 在主样式表上 */
`body { background-image: url(../graphics/main_page.jpg); }`

`/* On Practice Areas style sheet: */
body { background-image: none; }`

# rdf - Virtuoso 中的 STRAFTER SPARQL 1.1 函数

> ID：15374556
> 
> 赞同：2
> 
> 时间：2013-03-12T23:57:12.443
> 
> 标签：rdf, sparql, virtuoso

SPARQL 1.1是否`STRAFTER`可以在 Virtuoso（2012 年 6 月版本 6.04 版本）中工作？

试

```
PREFIX qb:  <http://purl.org/linked-data/cube#>
PREFIX iodp: <http://data.oceandrilling.org/core/1/>
PREFIX sdmx-dimension:  <http://purl.org/linked-data/sdmx/2009/dimension#>
SELECT ?p (strafter(str(?p), "http://data.oceandrilling.org/janus/") AS ?pshort)
FROM <http://data.oceandrilling.org/janus/>
WHERE {
   <http://data.oceandrilling.org/janus/ngr_section201_1226> qb:observation ?observation .
   ?observation ?p ?o .
   FILTER (regex(?p, "janus")) .
   FILTER (!regex(?p, "leg")) .
   FILTER (!regex(?p, "site")) .
   FILTER (datatype(?o) = <http://www.w3.org/2001/XMLSchema#decimal>) .
} 
```

在[http://data.oceandrilling.org/sparql](http://data.oceandrilling.org/sparql)会引发 SPARQL 编译错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:32:33.453

不，它不支持 straft，您需要构建 6.1.5，[请参阅发行说明](http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSNews#SPARQL%20and%20RDF)。

# c# - 动态指定 lambda 函数参数

> ID：15374558
> 
> 赞同：0
> 
> 时间：2013-03-12T23:57:14.083
> 
> 标签：c#, .net, c#-4.0, .net-4.0, lambda

假设我有以下代码行：

```
context.Load(itemCollection, item => item.Include(i => i["Title"], i => i["Name"])); 
```

有什么方法可以动态指定`item.Include()`函数的参数，而不是像上面那样对它们进行硬编码？

理想情况下，我希望允许用户选择他们想要检索对象的属性，例如`Title`, `Name`,`Description`等。

仅供参考，这是`ClientContext.Load`功能。该功能来自`Microsoft.SharePoint.Client.dll`

```
public void Load<T>(T clientObject, params Expression<Func<T, object>>[] retrievals) where T : ClientObject
{
  if ((object) clientObject == null)
    throw new ArgumentNullException("clientObject");
  ClientAction.CheckActionParameterInContext(this, (object) clientObject);
  DataRetrieval.Load<T>(clientObject, retrievals);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:47:53.297

我没有必要的设置来测试它，但是这样的东西会起作用吗？

```
String[] keys = ...;
context.Load(   itemCollection
              , item => item
                        .Include(keys
                        .Select(key => { i => i[key] })
                        .ToArray()
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:26:21.507

看看[这个问题](https://stackoverflow.com/questions/848415/linq-dynamic-where-clause)的答案。
我在创建动态 where 子句时遇到了类似的问题，这就是我解决它的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T23:19:18.720

使用以下语法（适用于 JavaScript，但尚未在 C# 中测试过）：

```
context.load(this.list, 'Include(Title, Name)'); 
```

`'Include(Title, Name)'`是一个字符串，更容易根据用户输入生成。

`this.list` *指的是之前加载的共享点列表。*

# visual-studio-2012 - 尝试使用 Web 部署发布时的 .DS 存储问题

> ID：15374559
> 
> 赞同：4
> 
> 时间：2013-03-12T23:57:18.260
> 
> 标签：visual-studio-2012, web-deployment

我正在尝试使用 web-deploy 但是在运行 web deploy 时得到这个

> 错误 4 将文件 Content\font\ui-fonts\Font - Logo, headings.DS_Store 复制到 obj\Release\Package\PackageTmp\Content\font\ui-fonts\Font - Logo, headings.DS_Store 失败。找不到文件 'Content\font\ui-fonts\Font - Logo, headings.DS_Store'。0 0 ui.WebUI

我的 ms 构建工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-17T21:28:56.360

我有同样的错误。

> ```
> Copying file style\.DS_Store to obj\Debug\Package\PackageTmp\style\.DS_Store failed.
> 
> Could not find file 'style\.DS_Store'. 
> ```

查找并删除项目包含的 .DS_STORE 文件。

[![.DS_Store](../Images/18a6afe493c0dc937114a4103460d57e.png)](https://i.stack.imgur.com/2U485.png)

# javascript - 匿名函数中的 Javascript 游戏循环状态

> ID：15374560
> 
> 赞同：1
> 
> 时间：2013-03-12T23:57:18.840
> 
> 标签：javascript, scope, html5-canvas, anonymous-function

我正在玩画布，首先阅读一堆游戏循环片段/帖子并将它们组合成最好的。

我今天看到了这个片段（它[是帖子](http://nokarma.org/2011/02/02/javascript-game-development-the-game-loop/index.html)的一部分，所以他们稍后会对其进行进一步的迭代。但我正在整合这些想法），但这让我有点困惑。

```
Game.run = (
    function() {
        var loops = 0;
        var skipTicks = 1000 / Game.fps;
        var maxFrameSkip = 10;
        var nextGameTick = (new Date).getTime();

        return function {
            loops = 0;

            while ((new Date).getTime() > nextGameTick && loops < maxFrameSkip) {
                Game.update();
                nextGameTick += skipTicks;
                loops++;
            }

            Game.draw();
        };
    }
)();

Game._intervalId = setInterval(Game.run, 1000 / Game.fps); 
```

所以`Game.run`被分配了外部函数的结果，也就是内部函数。但是内部函数依赖于`nextGameTick`外部函数中定义的...

那么这个游戏会在外部匿名函数中保持其状态吗？如果是这样，有什么想法他们为什么这样做？

至于 eg `loops`，每次调用都设置为 0 ，是否在外部声明以避免每次重新声明变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:12:24.110

这种类型的构造称为*立即调用的函数表达式*或*IIFE*。

此模式用于管理范围。在这种情况下，我们正在防止像`loops`和这样的变量`skipTicks`泄漏到全局范围内。更重要的是，它们被捕获在内部函数的闭包中，因此在对该内部函数的调用中持续存在。通过使用 IIFE，只有我们的内部函数可以看到这个状态，并且它在全局上下文中是隐藏的。

这是一篇关于模式的[不错的文章。](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)请特别参阅关于使用闭包保存状态的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:03:22.370

是的，它会。

`local frame`您返回的函数位于`local frame`Game.run 函数的内部。因此，在 Game.run 中围绕您返回的函数更改的任何变量都是持久的。每当您尝试引用 nextTick 变量时，该函数的父框架将在 Game.run 内部查看。

# html - 在 HTML 分段上传表单中指定字段序列化优先级

> ID：15374569
> 
> 赞同：0
> 
> 时间：2013-03-12T23:58:12.997
> 
> 标签：html, file-upload

我有一个文件上传表单，它需要在多部分请求中创建某些字段，然后再创建其他字段。如果我这样订购表格，效果会很好：

```
<form method="POST" enctype"multipart/form-data" action="/upload/">
    <input type="text" name="newFileName">
    <input type="file" name="file">
    <input type="submit">
</form> 
```

但是，如果我更改表单的顺序以使`newFieldName`字段出现*在*字段之后，`file`事情就会中断，因为`newFieldName`我的上传处理程序需要首先对其进行解析。有没有办法指定优先级，哪些字段按什么顺序序列化？

# magento - 在管理产品中，“库存”选项卡为空白

> ID：15374571
> 
> 赞同：1
> 
> 时间：2013-03-12T23:58:39.170
> 
> 标签：magento

在管理面板中，当我转到管理产品时，在所有单个产品上，“库存”选项卡都是空白的。

当我查看此控制面板页面的页面代码时，div 内没有任何内容：

```
<div style="" id="product_info_tabs_inventory_content"></div> 
```

所以任何应该加载库存数据的东西都失败了。另一方面，所有其他选项卡都正确显示了内容。

我正在使用 Magento 社区 1.7.0.2。我有几个插件，但它们与库存无关（例如一个用于邮件列表，另一个用于礼品卡）

我应该查看一段特定的代码来解决这个问题吗？

我已经清除了缓存、索引并重建了编译（并将其关闭）。

作为一个脚注，现在每当我对产品进行更改时，它都会导致缓存失效（具体来说是 Block HTML） - 但我不确定这是否相关或者是否是一个红鲱鱼。

# jquery - 禁用然后启用提交按钮

> ID：15374575
> 
> 赞同：-1
> 
> 时间：2013-03-12T23:59:14.797
> 
> 标签：jquery, ajax

我正在尝试使用 Ajax 验证表单。我使用以下代码检查每一行： 数据传递到 formValidate.php 文件：

```
$(document).ready(function(){
$("form").submit(function(event){
    stuId= $("input[name='stuId']").val();
    stuName= $("input[name='stuName']").val();
    stuDoB= $("input[name='stuDoB']").val();
    stuAdd= $("input[name='stuAdd']").val();

    $.get("formValidate.php?stuId="+stuId,function(data){
        $(".formCheck:eq(0) span").text(data);
        $.get("formValidate.php?stuName="+stuName,function(data){
            $(".formCheck:eq(1) span").text(data);
                $.get("formValidate.php?stuDoB="+stuDoB,function(data){
                $(".formCheck:eq(2) span").text(data);
                $.get("formValidate.php?stuAdd="+stuAdd,function(data){
                    $(".formCheck:eq(3) span").text(data);
                });
            });
        });
    });
    event.preventDefault(); 
    for(var i=0;i<=3;i++)   {
        var a= $(".formCheck:eq("+i+") span").text();
        if(!a)  
            break;
        if(i==3)
            $("form").unbind('submit').submit();
    }
       });
    }); 
```

在每次检查中，我都会禁用提交按钮。最后，如果任何验证跨度有任何文本，则提交不会被绑定；问题是我第一次单击带有空白字段的提交按钮，没关系，它显示验证。但是当我再次单击提交按钮时，当字段仍然为空时，表单已提交。我的问题是什么？请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:39:53.763

好的，首先进行此验证，您使用的确实应该只是“**馅饼上的樱桃**”。并帮助您实现更人性化的表单。你真的应该考虑使用一些预定义的表单检查库。最后但并非最不重要的一点是，始终在服务器端进行验证。

要解释什么是错的，请看这个jsfiddle：http: [//jsfiddle.net/JLySr/](http://jsfiddle.net/JLySr/)

文本中的每个小空格都将允许/禁止您通过验证。因此，在第一次验证之后，ajax 可能会返回一个空格或类似的东西......您可以通过修剪文本来改善这一点：

```
var a= $(".formCheck:eq("+i+") span").text().trim(); 
```

但这仍然**不是**真正的验证。您可能知道在客户端删除部分网页非常容易。

# ios - 动画 UIImageView 失去中心

> ID：15374578
> 
> 赞同：0
> 
> 时间：2013-03-12T23:59:27.693
> 
> 标签：ios, uiimageview, uiviewanimation

我在iOS中遇到了我无法弄清楚的问题。

我有一个 UIImageView 的动画效果很好。另外，我有一个 setCenter 可以将 UIImageView 放在屏幕上的正确位置，效果也很好。

问题是当我尝试设置 UIImageView 的中心然后启动动画时，动画可以工作但中心不会改变。

动画代码：

```
-(void)startMirror{

[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
                 animations:^{
                     self.transform = CGAffineTransformMakeScale(-1, 1);
                 }
                 completion:^(BOOL completed){}];
  } 
```

主要代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

 [self.face1 setCenter:CGPointMake(200, 300)];
 [self.face1 startMirror];
} 
```

我用我的问题做了一个迷你项目，你可以从这里下载 we.tl/0gPqkVDCKK 尝试评论和取消评论第 46 行，你会看到我的问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:27:54.823

我认为您需要在 startMirror 中进行转换后转换中心点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:25:42.120

我找到了解决方案，替换：

```
[self.face1 setCenter:CGPointMake(200, 300)]; 
```

和：

```
self.face1.transform = CGAffineTransformMakeTranslation(-11, 80); 
```

并且在动画中

```
self.transform = CGAffineTransformScale(self.transform, -1, 1); 
```

# matlab - 对列或行向量 MATLAB 中的元素进行编码

> ID：15374586
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:00:14.307
> 
> 标签：matlab, encoding

编写一个函数codedgt，它将具有整数条目的列或行向量作为输入，并产生一个行向量作为输出，其中每个整数都根据下表进行编码

整数编码 0 0 0 0 1 1 0 1 1 0 0 1 1 0 0 1 2 0 0 1 0 0 1 1 3 0 1 1 1 1 0 1 ...等

当 x < 0 时，规则 encodedgt(x) = 1 - encodedgt(-(x+1))。

例如，

> > 编码gt（[1 12 -3]）
> > 
> > [0 0 1 1 0 0 1 0 1 0 1 0 1 1 0 1 1 0 0]

* * *

所以我已经写了一个可以很好地处理正数的脚本，如下所示......

> > 函数 x = 编码gt(x)
> > 
> > 编码 = {0, '0 0 0 1 1 0 1'; 1 , '0 0 1 1 0 0 1'; 2, '0 0 1 0 0 1 1';... 3, '0 1 1 1 1 0 1'; 4、'0 1 0 0 0 1 1'；5, '0 1 1 0 0 0 1'; 6, ...'0 1 0 1 1 1 1'; 7、'0 1 1 1 0 1 1'；7、'0 1 1 1 0 1 1'；8, ...'0 1 1 0 1 1 1'; 9, '0 0 0 1 0 1 1'; 10, '0 0 0 0 1 0 1'; 11, ...'1 0 1 0 0 0 0'; 12, '0 1 0 1 0'};
> > 
> > y = str2num(cell2mat(arrayfun(@(v)enc{find([enc{:, 1}]) == v, 2}', x(:), 'UniformOutput',0)))'
> > 
> > 结尾

但是，我不完全确定如何让它与负数一起工作。正如问题告诉我的那样，当 x < 0 时，codedgt(x) = 1 - encodedgt(-(x+1))。所以我考虑过使用 if 语句，但是它并没有完全按照计划进行。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:03:09.070

您的问题不是很具体，因此很难确切知道您需要什么。您将需要的一些工具：

*   如何连接向量。为此，请使用 cat 或仅使用以下方法：

    > > 序列=[0 0 1 1 0 0 1]；
    > > 序列=[序列[0 0 1 0 0 1 1]]
    > > 
    > > 序列 = 0 0 1 1 0 0 1 0 0 1 0 0 1 1

*   如何遍历向量。为此，请用于：

    > function(x)
    > for i=x
    > % 做你需要的，比如查找 i 以获得它的编码向量 end

# html - 背景剪辑的随机背景图像

> ID：15374591
> 
> 赞同：0
> 
> 时间：2013-03-13T00:00:53.887
> 
> 标签：html, css, random, image, clip

在我的个人网站上：[http](http://pavelrozman.com/) : //pavelrozman.com/ 每次刷新时都会使用一些 javascript 重新加载背景照片。然后，我在网上偶然发现了一个很酷的剪贴蒙版教程。

```
h1 {
font-family: Arial;
font-size: 5em;
text-align: center;

background-image: url(Galaxy.jpg);

-webkit-background-clip: text;
background-clip: text;

color: rgba(0,0,0,0); 
```

}

我想使用一个随机图像，上面写着“Galaxy.jpg”，这样每次刷新都会有一个新图像被剪辑在文本上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:23:26.717

这就是我解决问题的方法，我能想到的唯一解决方案将需要使用 jquery 来更改背景图像。

首先，我将创建一个您想要为背景循环的图像名称数组。我称这个变量为背景。

jQuery代码：

```
 var background = ["Galaxy","Galaxy2","Galaxy3","Galaxy4","Galaxy5"];
   var randombackground = Math.floor((Math.random()*5)); 
   /*This will generate a random number between 0 and 4, which we will use to access our array, change the 5 to the number of wallpapers that you have*/

$(document).ready(function(){
   $("h1").css("background-image","url('" + background[randombackground] + ".jpg')");
}); 
```

上面的代码将生成一个随机数，该随机数将在每次页面加载时选择不同的壁纸。这是因为每次加载页面时随机数都会改变。请注意，您需要安装[http://jquery.com/](http://jquery.com/)才能使代码正常工作。

希望这可以帮助。

# javascript - jQuery 的 '.focus()' 不像我期望的那样表现

> ID：15374594
> 
> 赞同：2
> 
> 时间：2013-03-13T00:01:03.047
> 
> 标签：javascript, jquery, google-chrome

所以我编写了一些简单的PHP“合并标签”以在表单中使用。我希望他们可以“点击”输入到文本框中。

我有一些“有效”的基本代码。它将合并标签放入并重新聚焦框 - 但它将光标放在您输入的任何内容后面，但在所有合并标签的前面？

如果我输入：

```
[Howdy ] 
```

并点击`{firstname}`，我得到：

```
[Howdy {firstname}] 
```

这太棒了！

但是光标在“你好”之间，`{firstname}`就像这样：

```
[Howdy |{firstname}] 
```

我[设置了一个非常简单的小提琴](http://jsfiddle.net/demchak_alex/GCpvy/)来展示问题所在。我一直在尝试`.val()`和`.focus()`一起使用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:07:24.410

将该`selectionStart`属性设置为当前`selectionStart`字符串的长度和要添加的字符串的长度之和。

```
$("#test").prop('selectionStart', function (_, ss) {
    return ss + mtag.length;
}); 
```

[http://jsfiddle.net/ExplosionPIlls/GCpvy/1/](http://jsfiddle.net/ExplosionPIlls/GCpvy/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:13:16.370

**[jsFiddle 演示](http://jsfiddle.net/GCpvy/2/)**

只需像这样调整文本区域的`selectionStart`变量：

```
$('#test')[0].selectionStart = $('#test').val().length; 
```

# python - 将功能应用于熊猫 groupby

> ID：15374597
> 
> 赞同：57
> 
> 时间：2013-03-13T00:01:13.620
> 
> 标签：python, pandas

我有一个 pandas 数据框，其中有一列名为`my_labels`，其中包含字符串：`'A', 'B', 'C', 'D', 'E'`。我想计算每个字符串的出现次数，然后将计数除以所有计数的总和。我正在尝试在 Pandas 中这样做：

```
func = lambda x: x.size() / x.sum()
data = frame.groupby('my_labels').apply(func) 
```

此代码引发错误，'DataFrame 对象没有属性'size'。如何在 Pandas 中应用函数来计算这个？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-13T01:00:05.190

`apply`接受一个函数来应用于*每个*值，而不是系列，并接受 kwargs。所以，值没有`.size()`方法。

也许这会起作用：

```
from pandas import *

d = {"my_label": Series(['A','B','A','C','D','D','E'])}
df = DataFrame(d)

def as_perc(value, total):
    return value/float(total)

def get_count(values):
    return len(values)

grouped_count = df.groupby("my_label").my_label.agg(get_count)
data = grouped_count.apply(as_perc, total=df.my_label.count()) 
```

这里的`.agg()`方法采用一个函数，该函数应用于[groupby 对象的](http://pandas.pydata.org/pandas-docs/dev/groupby.html#groupby-object-attributes)*所有*值。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-01-04T08:03:05.450

[从 Pandas 版本 0.22 开始](https://pandas.pydata.org/pandas-docs/version/0.22.0/whatsnew.html#groupby-objects-now-have-a-pipe-method)，还存在`apply`:的替代方案[`pipe`](https://pandas.pydata.org/pandas-docs/version/0.22.0/groupby.html#groupby-pipe)，它可以比使用快得多`apply`（您也可以检查[这个问题](https://stackoverflow.com/q/47226407/1534017)以了解这两个功能之间的更多差异）。

对于您的示例：

```
df = pd.DataFrame({"my_label": ['A','B','A','C','D','D','E']})

  my_label
0        A
1        B
2        A
3        C
4        D
5        D
6        E 
```

`apply`版本_

```
df.groupby('my_label').apply(lambda grp: grp.count() / df.shape[0]) 
```

给

```
 my_label
my_label          
A         0.285714
B         0.142857
C         0.142857
D         0.285714
E         0.142857 
```

和`pipe`版本

```
df.groupby('my_label').pipe(lambda grp: grp.size() / grp.size().sum()) 
```

产量

```
my_label
A    0.285714
B    0.142857
C    0.142857
D    0.285714
E    0.142857 
```

所以值是相同的，但是，时间差异很大（至少对于这个小数据帧）：

```
%timeit df.groupby('my_label').apply(lambda grp: grp.count() / df.shape[0])
100 loops, best of 3: 5.52 ms per loop 
```

和

```
%timeit df.groupby('my_label').pipe(lambda grp: grp.size() / grp.size().sum())
1000 loops, best of 3: 843 µs per loop 
```

将它包装成一个函数也很简单：

```
def get_perc(grp_obj):
    gr_size = grp_obj.size()
    return gr_size / gr_size.sum() 
```

现在你可以打电话

```
df.groupby('my_label').pipe(get_perc) 
```

屈服

```
my_label
A    0.285714
B    0.142857
C    0.142857
D    0.285714
E    0.142857 
```

但是，对于这种特殊情况，您甚至不需要 a `groupby`，但您可以`value_counts`像这样使用：

```
df['my_label'].value_counts(sort=False) / df.shape[0] 
```

屈服

```
A    0.285714
C    0.142857
B    0.142857
E    0.142857
D    0.285714
Name: my_label, dtype: float64 
```

对于这个小数据框，它非常快

```
%timeit df['my_label'].value_counts(sort=False) / df.shape[0]
1000 loops, best of 3: 770 µs per loop 
```

正如@anmol 所指出的，最后一条语句也可以简化为

```
df['my_label'].value_counts(sort=False, normalize=True) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T01:04:34.580

尝试：

```
g = pd.DataFrame(['A','B','A','C','D','D','E'])

# Group by the contents of column 0 
gg = g.groupby(0)  

# Create a DataFrame with the counts of each letter
histo = gg.apply(lambda x: x.count())

# Add a new column that is the count / total number of elements    
histo[1] = histo.astype(np.float)/len(g) 

print histo 
```

输出：

```
 0         1
0             
A  2  0.285714
B  1  0.142857
C  1  0.142857
D  2  0.285714
E  1  0.142857 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-19T22:37:59.603

关于“大小”的问题，大小不是数据帧上的函数，而是一个属性。因此，与其使用 size()，不如使用普通大小

除此之外，这样的方法应该有效

```
def doCalculation(df):
    groupCount = df.size
    groupSum = df['my_labels'].notnull().sum()

    return groupCount / groupSum

dataFrame.groupby('my_labels').apply(doCalculation) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-04T16:29:38.607

我看到了一种嵌套函数技术，用于计算 SO 的加权平均值，改变该技术可以解决您的问题。

```
def group_weight(overall_size):
    def inner(group):
        return len(group)/float(overall_size)
    inner.__name__ = 'weight'
    return inner

d = {"my_label": pd.Series(['A','B','A','C','D','D','E'])}
df = pd.DataFrame(d)
print df.groupby('my_label').apply(group_weight(len(df)))

my_label
A    0.285714
B    0.142857
C    0.142857
D    0.285714
E    0.142857
dtype: float64 
```

以下是如何在组内进行加权平均

```
def wavg(val_col_name,wt_col_name):
    def inner(group):
        return (group[val_col_name] * group[wt_col_name]).sum() / group[wt_col_name].sum()
    inner.__name__ = 'wgt_avg'
    return inner

d = {"P": pd.Series(['A','B','A','C','D','D','E'])
     ,"Q": pd.Series([1,2,3,4,5,6,7])
    ,"R": pd.Series([0.1,0.2,0.3,0.4,0.5,0.6,0.7])
     }

df = pd.DataFrame(d)
print df.groupby('P').apply(wavg('Q','R'))

P
A    2.500000
B    2.000000
C    4.000000
D    5.545455
E    7.000000
dtype: float64 
```

# c# - 尽管设置了上限，但 WCF 客户端 ReaderQuota 错误

> ID：15374598
> 
> 赞同：0
> 
> 时间：2013-03-13T00:01:16.410
> 
> 标签：c#, .net, wcf, c#-4.0, wcf-binding

我们的应用程序通过 basicHttpBinding 使用 WCF 上的许多 Web 服务。XML 消息通常非常大 (>2mb)。

在运行时，我们间歇性地收到一个似乎与 ReaderQuotas 相关的反序列化错误，该错误已设置为 Int32.MaxValue。

堆栈的头部是（抱歉，必须从提供的图像中手动输入）：

```
System.ServiceModel.Dispatcher.NetDispatcherFaultException: The formatter threw an 
exception while trying to deserializat the message: There was an error while trying to
deserialize parameter [the namespace]. 

The InnerException message was 'There was an error deserializing the object of type 
[a type]. The maximum array length quota (5) or the maximum items in object graph 
quota has been exceeded while reading XML data. These quotas may be increased by
changing the MaxArrayLength property on XmlDictionaryReaderQuotas or the 
MaxItemsInObjectGraph setting. Line 1, position 3645191. 
```

客户端配置：

```
<client>
      <endpoint address="http://someUri/someSvc" binding="basicHttpBinding" bindingConfiguration="SomeSvcBindingConfiguration" contract="SomeSvc" name="SomeSvc" behaviorConfiguration="ClientObjectBehavior" />
</client>

<behaviors>
      <endpointBehaviors>
        <behavior name="ClientObjectBehavior">
          <dataContractSerializer maxItemsInObjectGraph="131072"  />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="SomeSvcBindingConfiguration" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:00:15" sendTimeout="00:00:15" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="10485760" maxBufferPoolSize="524288" maxReceivedMessageSize="10485760" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="false">
          <readerQuotas maxDepth="2147483647"
                              maxStringContentLength="2147483647"
                              maxArrayLength="2147483647"
                              maxBytesPerRead="2147483647"
                              maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding> 
```

...

任何人都可以提出为什么这个异常可能仍然发生？

没有工具可以将绑定从 basicHttpBinding 更改，除非它是自定义设置的某种等效组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:47:17.953

The number hinted in the exception message - the "(5)" - is actually the running value for the MaxArrayLength setting. Why it is five in this case, I cannot determine without further details.

However, having only a maximum of 131072 objects in the graph might be too small - the `maxItemsInObjectGraph="131072"` setting. Since the error happens at position 3645191 of the xml content, I'd assume that there might be more objects inside that xml than 131072.

# ruby-on-rails - Rspec for Devise：无法批量分配受保护的属性：user_password、user_password_confirmation

> ID：15374601
> 
> 赞同：0
> 
> 时间：2013-03-13T00:01:19.827
> 
> 标签：ruby-on-rails, rspec, devise, mass-assignment

我正在尝试使用 RSpec为[Devise 2.2.2编写](https://github.com/plataformatec/devise)**注册规范。**我像往常一样准备了模型。`User`

```
# app/models/user.rb
class User < ActiveRecord::Base
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me

  rolify

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable,
         :token_authenticatable

  after_create :add_default_role

  def add_default_role
    add_role :user
  end
end 
```

在规范中，我需要`user`使用`password`和进行注册，`password_confirmation`如下所示。

```
# spec/requests/users/sign_up_spec.rb
describe 'Sign up' do

  before(:each) do
    sign_out
  end

  it 'signs up a visitor with valid data' do
    user  = build(:user)

    click_link I18n.t('layouts.navigation.sign_up')
    fill_in I18n.t('devise.registrations.new.name'), with: user.name
    fill_in I18n.t('devise.registrations.new.email'), with: user.email

    find('.js-password').set user.password
    find('.js-password-confirmation').set user.password_confirmation

    click_button I18n.t('devise.registrations.new.submit')

    expect(page).to have_content I18n.t('layouts.navigation.sign_out')
    expect(page).not_to have_content I18n.t('layouts.navigation.sign_up')
    expect(page).not_to have_content I18n.t('layouts.navigation.sign_in')
  end
end 
```

这是用于呈现页面的设计视图模板：

```
<!-- app/views/devise/registrations/new.html.erb -->
<h2><%= t('.title', :default => "Sign up") %></h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :name, t('.name', :default => "Name" ) %><br />
  <%= f.email_field :name %></div>

  <div><%= f.label :email, t('.email', :default => "Email" ) %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :user_password, t('.user_password', :default => "Password" ) %><br />
  <%= f.password_field :user_password, class: 'js-password' %></div>

  <div><%= f.label :user_password_confirmation, t('.user_password_confirmation', :default => "Password confirmation" ) %><br />
  <%= f.password_field :user_password_confirmation, class: 'js-password-confirmation' %></div>

  <div><%= f.submit t('.submit', :default => "Submit") %></div>
<% end %> 
```

尽管我将这两个属性都添加到了`attr_accessible`这个错误消息中：

```
Sign up signs up a visitor with valid data
  Failure/Error: click_button I18n.t('devise.registrations.new.submit')
  ActiveModel::MassAssignmentSecurity::Error:
    Can't mass-assign protected attributes: user_password, user_password_confirmation
   # ./spec/requests/users/sign_up_spec.rb:20:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:59:12.257

表单中输入的名称错误，应该是`user[password]`& `user[password_confirmation]`，但错误是说你有`user_password`&`user_password_confirmation`

* * *

可以在这里看到视图模板中的相关更改：

```
<div><%= f.label :password, t('.password', :default => "Password" ) %><br />
<%= f.password_field :password, class: 'js-password' %></div>

<div><%= f.label :password_confirmation, t('.password_confirmation', :default => "Password confirmation" ) %><br />
<%= f.password_field :password_confirmation, class: 'js-password-confirmation' %></div> 
```

# javascript - 限定 XHTML 中的 KnockOutJS 属性（通过 XML 命名空间）

> ID：15374602
> 
> 赞同：0
> 
> 时间：2013-03-13T00:01:27.153
> 
> 标签：javascript, knockout.js, xml-namespaces

我希望能够限定我的 XHTML 文档中的 KnockOutJS 属性。

这是我想做的事情：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:ko="http://knockoutjs.com"> <!-- Supply the KnockOutJS namespace here -->
  <head>
    <script th:src="@{/js/lib/knockout-2.2.1.js}" src="../../js/lib/knockout-2.2.1.js"></script>
    <!-- Remainder omitted... -->
  </head>
  <body>
    <p>
      My name is:
      <span ko:data-bind="text: name"></span><!-- Problem line - KnockOut will ignore data-bind when it's qualified -->
    </p>
  </body>
</html> 
```

上面的示例不起作用，因为 KnockOutJS 忽略了合格的`ko:data-bind`. 显然，如果我删除它，`ko:`那么它就可以工作。

请问有没有办法告诉 KnockOutJS 它是合格的以及限定符是什么？

我想要限定 KnockOutJS 属性的原因是：

1.  验证。我收到很多关于未定义属性的验证警告（在 IDE 中）。
2.  明晰。我们（谨慎地）将 Thymeleaf 用于服务器端模板，Thymeleaf 的工作方式与 KnockOut 类似，因为它也被指定为 HTML 属性。最好让 Thymeleaf 符合 th，KnockOut 符合 ko，而标准 HTML 不符合标准。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:24:41.497

Knockout 支持自定义绑定提供程序，可用于根据需要检索绑定。这目前没有正式记录，但[在 Ryan Niemeyer 的网站上有所描述](http://www.knockmeout.net/2011/09/ko-13-preview-part-2-custom-binding.html)。

这是一个绑定提供程序，它扩展了内置提供程序以添加对`ko:data-bind`.

```
var originalNodeHasBindings = ko.bindingProvider.instance.nodeHasBindings;
var originalGetBindings = ko.bindingProvider.instance.getBindings;
ko.utils.extend(ko.bindingProvider.instance, {
    nodeHasBindings: function(node) {
        if (node.nodeType == 1 && node.hasAttribute('ko:data-bind'))
            return true;
        return originalNodeHasBindings.call(this, node);
    },
    getBindings: function(node, bindingContext) {
        if (node.nodeType == 1 && node.hasAttribute('ko:data-bind'))
            return this.parseBindingsString(node.getAttribute('ko:data-bind'), bindingContext, node);
        return originalGetBindings.call(this, node, bindingContext);
    }
}); 
```

使用示例：http: [//jsfiddle.net/mbest/vSQkW/](http://jsfiddle.net/mbest/vSQkW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:06:54.883

根据knockoutjs支持论坛的说法，这个不支持，预计以后也不会支持

[KO论坛](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/9M9vVLIEDvQ)

# c++ - 无锁链表中的插入和删除

> ID：15374605
> 
> 赞同：0
> 
> 时间：2013-03-13T00:01:58.400
> 
> 标签：c++, multithreading, concurrency, linked-list

我正在使用多线程程序中的共享链表。我没有使用锁存器（互斥体），而是依靠 CAS 操作来确保插入和删除的正确性。所有插入和删除都发生在链表（LIFO）的头部。该程序没有按预期工作，它随机导致分段错误并退出。有什么想法吗？这是我的程序的简化版本。大约 1% 的时间它会中断四个线程。

```
struct Node {
  unsigned long num;
  Node* next;
};

Node* head = NULL;

#define NUM_THREADS 4L
#define Rounds 10000L
#define Iterations 100L
#define SumPerRound ((Iterations-1)*Iterations/2)
#define SumPerThread (SumPerRound * Rounds)
#define ExpectedSum (SumPerThread * NUM_THREADS)

unsigned long totalSum = 0;
void* Worker(void*) {
  for (unsigned int r = 0; r < Rounds; r++) {
    for (unsigned int i = 0; i < Iterations; i++) {
      Node* n = new Node();
      n-> num = i;
      do {
        n->next = head;
      } while (!__sync_bool_compare_and_swap(&head, n->next, n));
    }

    for (unsigned int i = 0; i < Iterations; i++) {
      Node* n;
      do {
        n = head;
        assert(n);
      } while (!__sync_bool_compare_and_swap(&head, n, n->next));
      __sync_fetch_and_add(&totalSum, n->num);
      delete n;
    }
  }
  return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:08:16.860

我发现了问题。当两个并发线程试图删除头部的同一个节点时。他们都抓住了链表的头部（n = head）。其中一个被挂起，而另一个设法从链表中删除该节点，对其进行处理并删除它。当其他线程试图删除该节点时，它会执行 CAS 操作。CAS 操作的第三个参数 (n->next) 尝试取消引用已被另一个线程删除的指针。我有一个解决这个问题的方法，但是这里太复杂了，无法在这里讨论。

# c - 初始化时的 C 结构填充

> ID：15374606
> 
> 赞同：4
> 
> 时间：2013-03-13T00:02:01.333
> 
> 标签：c, struct, padding, calloc

我有一个结构，例如

```
typedef struct
{
    int a;  // Let's say this ends up being 4 bytes
    int b;  // 4 bytes
    char text[10]; // 10 bytes
} blah_t;

static blah_t myvar; 
```

1.  假设 中字段大小的总和为 18 个字节`blah_t`，但`sizeof(blah_t)`由于填充而为 20。
2.  这`myvar`是静态的，因此它将被零初始化。

问题：

1.  对于静态变量，填充字节 19 和 20 是否保证为 0？如果不是，我需要为`memset(&myvar, 0, sizeof(blah_t))`使任何`memcmp`结构有效——即使对于静态变量也是如此。
2.  怎么样`calloc(1, sizeof(blah_t))`？字节 19 和 20 是否保证为零？*我相信情况就是这样。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:05:10.080

来自 ISO C99 标准：“当一个值存储在结构或联合类型的对象中时，包括在成员对象中，对应于任何填充字节的对象表示的字节采用未指定的值。”

进一步看，这似乎讨论了一些其他问题： [Comparing structures in C vs C++](https://stackoverflow.com/questions/1020820/comparing-structures-in-c-vs-c)

编辑：不是这个问题本身的重复，而是许多常见问题的详细回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-14T20:10:04.690

兰迪霍华德接受的答案对于 C11 来说不再准确。

> 对于静态变量，填充字节 19 和 20 是否保证为 0？

1.  在 C11 中，是的，当静态变量未显式初始化时，填充位设置为零。[C11 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，子条款 6.7.9，第 10 段：

> . . . 如果具有*静态*或线程存储持续时间的对象未显式初始化，则：. . . 如果是聚合，则每个成员都根据这些规则（递归地）初始化，并且*任何填充都被初始化为零位*。. .

2.  是的，calloc 会将结构的整个 sizeof（包括填充）归零。

其他有用的相关链接：

*   [EXP42-C。不要比较填充数据](https://wiki.sei.cmu.edu/confluence/display/c/EXP42-C.+Do+not+compare+padding+data)。
*   [C是否将结构填充初始化为零？](https://stackoverflow.com/questions/37642026/does-c-initialize-structure-padding-to-zero)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:32:33.633

> 填充字节 19 和 20。对于静态变量，这些是否保证为 0？

请参阅兰迪霍华德的回答。

> calloc(1, sizeof(blah_t) ) 呢？字节 19/20 是否保证为零？

是的。calloc 将内存归零。

出于好奇，我想知道你为什么关心填充。可移植代码不必担心表示的任何方面（填充、字节顺序等）。

# c++ - 保存和打开文件对话框

> ID：15374607
> 
> 赞同：1
> 
> 时间：2013-03-13T00:02:17.410
> 
> 标签：c++, winforms, visual-c++, visual-studio-2012, event-handling

我正在使用 C++。我目前正在设计一个带有 Windows 窗体的程序。我在编写事件处理程序时遇到问题。特别是用于保存和打开文件的单击事件处理程序。我在网上搜索过，找不到关于如何编写这些事件处理程序的体面的解释。所以我要求一个定义明确的定义。

请不要将我发送给 Microsoft，因为他们仅提供部分已完成事件处理程序的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:48:58.090

由于 Visual Studio 2012 确实支持 C++/CLI Winform 应用程序一目了然并不明显，即使 OP 肯定知道这一点，对于其他读者来说，这就是我创建一个只是为了回答这个问题的方法：

1.  在 Visual Studio 2012 中，在“新建项目”对话框中，我选择了 [Visual C++ > CLR > CLR 空项目]。

2.  在新项目中，我添加了一个普通的 C++`main`函数和一个 Windows 窗体。

3.  在链接器设置中，我将其从控制台子系统更改为 GUI 子系统（并且由于 Microsoft 链接器的非标准行为，将入口点调整为`mainCRTStartup`）。

也就是说，下面显示了生成的 Winform 标头，其中仅包含手动添加的事件处理程序代码，该代码会触发打开文件对话框。

*   长注释行`------`显示了如何连接事件处理程序。

*   底部的代码显示了如何编写事件处理程序以及如何运行打开文件对话框。

```
#pragma once

namespace CppWindowsFormsApplication {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for MainWindow
    /// </summary>
    public ref class MainWindow : public System::Windows::Forms::Form
    {
    public:
        MainWindow(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~MainWindow()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->button1 = (gcnew System::Windows::Forms::Button());
            this->SuspendLayout();
            // 
            // button1
            // 
            this->button1->Location = System::Drawing::Point(149, 208);
            this->button1->Name = L"button1";
            this->button1->Size = System::Drawing::Size(75, 23);
            this->button1->TabIndex = 0;
            this->button1->Text = L"&Open file";
            this->button1->UseVisualStyleBackColor = true;

            // ---------------------------------------------------- !Adds event handler -------------------
            this->button1->Click += gcnew System::EventHandler(this, &MainWindow::button1_Click);
            // 
            // MainWindow
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(284, 262);
            this->Controls->Add(this->button1);
            this->Name = L"MainWindow";
            this->Text = L"MainWindow";
            this->ResumeLayout(false);

        }
#pragma endregion
    private:
        System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)
        {
            OpenFileDialog^ sfd = gcnew OpenFileDialog();
            sfd->Filter = "Text Files|*.txt|All Files|*.*";
            if( sfd->ShowDialog() != System::Windows::Forms::DialogResult::OK )
            {
                return;
            }
            //MessageBox::Show( sfd->FileName );
            MessageBox::Show( "OK" );
        }
    };
} 
```

我没有修复缩进等，因为我没有时间；几乎所有这些代码都是由 Visual Studio 2012 的 RAD（*Rabid 应用程序开发*）功能生成的。

* * *

与此问题的历史相关，现已删除：

我真的没有时间回答这个问题。我宁愿让其他人回答它（并从中获得一些声誉）。这是一个如此简单的问题，我敢肯定，如果不是这么快就结束了，任何数量的读者，比我有更多的时间，都会回答它。

但是回答它，将代码发布在其他地方，并放弃一些其他事项，是我看到重新打开它的唯一方法。

恳请各位读者，**不懂的请不要投票关闭**。

仅当您彻底了解主题并且可以向自己和他人*证明关闭问题后社区会变得更好时，才投票关闭问题。*

不能理解一个问题并不*一定*意味着这个问题不好。

# ruby-on-rails - API中可变情况的建议

> ID：15374609
> 
> 赞同：1
> 
> 时间：2013-03-13T00:02:41.760
> 
> 标签：ruby-on-rails, api, variables, naming-conventions

我目前正在 Web 服务器上构建外部可访问的 API。Web 服务器使用 Rails，因此内部变量以`snake_case`. 但是大多数对 api 的调用将通过 javascript 进行，这通常`lowerCamelCase`用于变量命名。

我的问题是：有人可以提出一个策略来绘制蛇案例变量和骆驼案例变量之间的界限吗？服务器是否应该接受以驼峰形式发布的变量，从而使服务器代码变得丑陋（特别是因为路由参数是由 rails 的“约定”部分处理的）。还是应该强制 javascript 客户端在蛇形案例中发布变量，从而丑化客户端？

欢迎任何和所有想法，但如果有人从具有 API 开发经验的来源获得一些文档或信息的链接，那将是理想的。Apigee 的人建议使用 JSON 作为默认值，并在他们的 Web Api 文档中使用 camelCase，但我很想看看是否有任何其他最佳实践类型建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:48:06.193

**快速而令人沮丧的答案：**没有人可以为您回答这个问题，因为这完全取决于您*希望*界面的外观。**这是一个设计决定**。

现在，如果您的客户总是使用 ajax 来访问您的 API，那么公开基于驼峰式的接口确实是明智的。

好消息是，没有什么能阻止您两全其美：只需创建一个 camelcase/snakecase 转换器类。它会在接收到请求时解析参数并返回规范化的参数散列，反之，您的模型会在其`as_json`方法中调用它以返回驼峰式键。

此解决方案增加了一些开销，但具有使您的命名约定和转换规则明确的优势，就像`ActiveModel::Naming`等一样。

# java - Servlet 无法识别 JSON？

> ID：15374612
> 
> 赞同：0
> 
> 时间：2013-03-13T00:03:14.917
> 
> 标签：java, json, servlets

我得到以下轨迹跟踪，但不知道为什么：

```
SEVERE: Servlet.service() for servlet [BuddyController] in context with path [/gbserver] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at com.mathanv.gb.dao.BuddyDao.registerBuddy(BuddyDao.java:50)
    at com.mathanv.gb.controller.BuddyController.doPost(BuddyController.java:53)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

上面的轨迹是由以下代码生成的：

```
JSONObject response = new JSONObject(); 
```

我有以下结构： ![结构](../Images/48e2e9157237d245dc77fe50dd7440ae.png)

任何想法为什么我会收到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:55:41.327

你需要在你的库中包含 Commons Lang；显然你的 JSON 库依赖于它。（具体来说，您看到的异常是因为`org.apache.commons.lang.exception.NestableRuntimeException`- 请参阅[http://commons.apache.org/proper/commons-lang//javadocs/api-2.6/org/apache/commons/lang/exception/NestableRuntimeException.html](http://commons.apache.org/proper/commons-lang//javadocs/api-2.6/org/apache/commons/lang/exception/NestableRuntimeException.html) -不在您的类路径中。）

# java - 动态将线性布局添加到另一个

> ID：15374614
> 
> 赞同：0
> 
> 时间：2013-03-13T00:03:18.617
> 
> 标签：java, android

这段代码有什么问题？它给了我这个错误：

> 指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

```
 final LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);

    final LinearLayout ll2 = new LinearLayout(this);
    ll2.setOrientation(LinearLayout.HORIZONTAL);

        for(int i = 0; i < 20; i++) {
             CheckBox cb = new CheckBox(getApplicationContext());
             TextView txt = new TextView(getApplicationContext());
                txt.setText("test!");
                ll2.addView(cb);
                ll2.addView(txt);
                ll.addView(ll2); //ERROR HERE
            }
        sc.addView(ll); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:10:31.990

由于它在循环中，因此您`ll.addView(ll2)`多次调用。将其移到 for 循环之外：

```
final LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);

final LinearLayout ll2 = new LinearLayout(this);
ll2.setOrientation(LinearLayout.HORIZONTAL);

for(int i = 0; i < 20; i++) {
    CheckBox cb = new CheckBox(getApplicationContext());
    TextView txt = new TextView(getApplicationContext());
    txt.setText("test!");
    ll2.addView(cb);
    ll2.addView(txt);
}

ll.addView(ll2);
sc.addView(ll); 
```

# drupal-6 - Google Analytics，跟踪非广告网络广告

> ID：15374616
> 
> 赞同：1
> 
> 时间：2013-03-13T00:03:33.043
> 
> 标签：drupal-6, google-analytics

我的网站是一个纯本地使用的小型网站，我不通过任何网络做广告。我手动联系当地企业并从他们那里获得广告。

我已将广告设置为旋转横幅，其中更改的触发器基于页面刷新。我想为我的广告商提供显示其广告效果的指标。如何跟踪每个广告（本质上是一张图片）的展示次数和点击率？

如果相关，我正在使用 Drupal 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:29:05.303

有可能的。使用事件，用于 onclick 和 onload：

```
<a href="http://localhost/someurl" onClick="_gaq.push(['_trackEvent', 'Banner', 'Click', 'BANNERNAME',1.00,true]);" > <img style="border: 0px" src="http://localhost/someurltoapic.jpg" alt="SOMEALTEXT" /></a>
<img width=0 height=0 src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" onload="_gaq.push(['_trackEvent', 'Banner', 'Impression', 'BANNERNAME',2.00,true]);"/></a> 
```

我在这里写了一个详细的解决方案：http: [//www.statstory.com/tracking-clicks-and-impressions-in-google-analytics/](http://www.statstory.com/tracking-clicks-and-impressions-in-google-analytics/)其中还包括一个广告轮播脚本。

# php - PHP 使用 mssql_fetch_array 返回 NULL 值

> ID：15374618
> 
> 赞同：0
> 
> 时间：2013-03-13T00:03:50.500
> 
> 标签：php, sql-server, freetds

好的，这对我来说很奇怪，但我希望这是一个已经发生的问题，我还没有在网上找到解决方案。

非常感谢您的帮助。

我正在调用 MS 2008 SQL 服务器上的存储过程。使用 SQL Server Management Studio，我们可以验证此过程是否正常工作。

我编写了一个基本脚本，它抓取每一行并对其进行 print_r。

现在是奇怪的部分。对于任何具有 NULL 条目的行（即使只有一列），PHP 根本无法获取它，该行被忽略，对于所有其他行它们都很好。因此，如果我返回并手动更改 NULL 条目并将文本放在那里，它们就会显示出来。

所以基本上，我拥有的这一列允许为 NULL，当它为 NULL 时，PHP 中该行（它被遗漏）的数据不会出现。但是，如果您随后进入并手动添加一些内容，则显示没有问题。

根据 phpinfo，我使用的连接器是 Free TDS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:15:35.150

这为我解决了这个问题：

将 ANSI_NULL_DFLT_ON 设置为 ON

在调用任何存储过程之前，我必须先查询这个

```
$result = mssql_query('set ANSI_NULL_DFLT_ON ON'); 
```

希望对遇到我问题的人有所帮助。这真的很令人沮丧，显然你需要这个，所以 PHP 将返回其中包含空列的行，并且它与存储过程中的比较有关。我相信在比较可能具有 NULL 值的东西时，PHP 会忽略整行，除非你先通过它。

# c# - 回发后我们可以更改浏览器网址但不重定向吗？

> ID：15374619
> 
> 赞同：1
> 
> 时间：2013-03-13T00:04:22.510
> 
> 标签：c#, asp.net, url, query-string, redirect

**上下文**：我有一个页面，我从另一个页面中的 gridview 中的链接导航到该页面。

这是当前页面的 url。

[http://somedomain.com/timesheet.aspx](http://somedomain.com/timesheet.aspx)？**tskey=0** &emplid=10068323&pnbr=10053911&pbdate=03182012&pedate=03312012&emprcd=0&scheduletype=BW

在这个页面上，我进行了一些编辑并点击了保存按钮。它被提交到为我生成**tskey**值的数据库。tskey 是一个查询字符串变量。

现在我在保存当前页面后有了 tskey 值，我可以更改当前页面的 url 以 在 Save click 事件结束时更新**tskey值而不重定向。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:42:34.723

想想你在问什么：

1.  您希望浏览器发布到某个 URL，这将生成一些值，并返回某种 HTTP 响应。
2.  ？？？
3.  浏览器现在指向不同的 URL。

第二步必须将 URL 从一个值更改为另一个值。无论您是使用服务器重定向还是使用 JavaScript 来更改 document.location，浏览器都必须获取该新页面的内容并呈现它。

如果你想回发到新的 URL，这很容易从 JavaScript 中完成，只需`Page.ClientScript.GetCallbackEventReference()`将函数放入你的页面，然后调用它。当然这会导致页面重新加载新的响应，但是没有办法解决这个问题。如果这不完全符合您的要求，您将不得不自己渲染和发布表单。

这听起来像是大量不必要的工作。你确定你需要这样做吗？

# java - 使用字符串填充字符串数组？(JAVA)

> ID：15374621
> 
> 赞同：0
> 
> 时间：2013-03-13T00:04:35.890
> 
> 标签：java, string, arrays

我在网站上四处寻找一些类似的答案，但到目前为止我还没有找到任何东西。我想知道如何用预先建立的字符串填充字符串数组。另外，如果我有一个单独的类，我会将这段代码包含在方法中还是构造函数中？

字符串：

```
String stateList = "Alabama^Alaska^Arizona^Arkansas^California^Colorado^Connecticut^Delaware^Florida^"
            + "Georgia^Hawaii^Idaho^Illinois^Indiana^Iowa^Kansas^Kentucky^Louisiana^Maine^Maryland^"
            + "Massachusetts^Michigan^Minnesota^Mississippi^Missouri^Montana^Nebraska^Nevada^"
            + "New Hampshire^New Jersey^New Mexico^New York^North Carolina^North Dakota^Ohio^Oklahoma^"
            + "Oregon^Pennsylvania^Rhode Island^South Carolina^South Dakota^Tennessee^Texas^Utah^"
            + "Vermont^Virginia^Washington^West Virginia^Wisconsin^Wyoming"; 
```

我的尝试（没有奏效）：

```
String[] stateArray = stateList.split(" ^ ");
    for(int i=0; i < stateArray.length; i++) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:06:17.397

该`^`字符[在正则表达式中具有特殊含义](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)；提供一个反斜杠字符（它本身需要在 Java 中转义），以便 split 将其解释为文字`^`：

```
String[] stateArray = stateList.split("\\^"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:05:57.490

尝试使用`split.("\\^")`. 此方法使用正则表达式，并且`^`在正则表达式中具有[特殊含义](http://www.regular-expressions.info/characters.html#special)（在这种情况下是输入数据的开始）。要逃避它，您需要传递`\^`给正则表达式引擎，因此您需要使用`\\^`form.

# c# - Mock 中的访问字段

> ID：15374624
> 
> 赞同：0
> 
> 时间：2013-03-13T00:04:54.090
> 
> 标签：c#, reflection

我很难想象这一点。

这是场景。

我的单元测试

```
 public void AddStudentTest()
    {
        StudentService target = new StudentService (new Mock1(),new Mock2(), new Mock3(), new Mock4(), new Mock5());
        string name  = "Sample Name";
        int actual = 0;
        string[] userNames = new string[] {"Sample User Name" };
        string[] roleName = new string[] {"Sample Role" };
        target.AddStudent (name, userNames, roleNames);            
        Assert.IsNotNull(actual);
    } 
```

我正在 Mock 3 中测试一个方法。不幸的是，方法返回类型是 VOID。我需要检查交易是否成功。我在此方法“AddStudent”上添加了一个字段 resultFlag，但是如何从单元测试中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:00:55.260

正如您所说，您确实在测试 Mock3 方法，您可以访问该代码，所以我相信您的测试用例可能会重写为类似

```
public void AddStudentTest()
{
    var dbMock = new Mock3()
    StudentService target = new StudentService (new Mock1(),new Mock2(), dbMock, new Mock4(), new Mock5());
    string name  = "Sample Name";
    int actual = 0;
    string[] userNames = new string[] {"Sample User Name" };
    string[] roleName = new string[] {"Sample Role" };
    target.AddStudent (name, userNames, roleNames);                    
    Assert.IsNotNull(dbMock.Students.FirstOrDefault())
} 
```

# go - 在 Go 中使用 JWT 授权 Google 服务帐户

> ID：15374625
> 
> 赞同：3
> 
> 时间：2013-03-13T00:04:59.577
> 
> 标签：go

如何在 Go 中使用 JWT 授权服务帐户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T00:04:59.577

使用[https://code.google.com/p/goauth2/](https://code.google.com/p/goauth2/)

`go get code.google.com/p/goauth2/oauth`

从 Google API 控制台获取您的服务电子邮件和 p12 私钥。目前它无法读取 p12 文件，因此使用 openssl 将它们剥离为 rsa 键， `openssl pkcs12 -in file.p12 -nocerts -out key.pem -nodes`然后删除多余的文本

然后：

```
package main

import (
  "code.google.com/p/goauth2/oauth/jwt"
  "flag"
  "fmt"
  "http"
  "io/ioutil"
)

var (
  serviceEmail = flag.String("service_email", "", "OAuth service email.")
  keyPath      = flag.String("key_path", "key.pem", "Path to unencrypted RSA private key file.")
  scope        = flag.String("scope", "", "Space separated scopes.")
)

func fetchToken() (string, error) {
    // Read the pem file bytes for the private key.
    keyBytes, err := ioutil.ReadFile(*keyPath)
    if err != nil {
        return "", err
    }

    t := jwt.NewToken(*serviceEmail, *scope, keyBytes)
    c := &http.Client{}

    // Get the access token.
    o, err := t.Assert(c)
    if err != nil {
        return "", err
    }
    return o.AccessToken, nil
}

func main() {
  flag.Parse()
  token, err := fetchToken()
  if err != nil {
    fmt.Printf("ERROR: %v\n", err)
  } else {
    fmt.Printf("SUCCESS: %v\n", token)
  } 
```

# html - 让 HTML5 & CSS3 网站与旧浏览器兼容？

> ID：15374628
> 
> 赞同：2
> 
> 时间：2013-03-13T00:05:16.657
> 
> 标签：html, css, asp.net-mvc-4, cross-browser

所以我在 ASP.NET MVC (HTML5 & CSS3) 中创建了一个网站。

现在，页面在 IE ≤ 8 中呈现非常糟糕，鼠标悬停的颜色无法正常工作，我也面临[这个](https://stackoverflow.com/q/15154704/75500)问题。

那么，采用 HTML5 和 CSS3 是不是一个坏主意？

从您的观点来看，如果您站在我的情况下，您将如何降级网站以使其至少与 IE6 兼容？

当然，我正在寻找最快最可靠的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:20:32.557

最简单的方法是优雅降级，为使用modernizr不支持的元素创建替代样式

[http://modernizr.com/](http://modernizr.com/)

您需要为所需的功能创建一个测试配置文件，modernizr 会为那些不支持的功能添加标签。您只需要创建一个简单的样式即可使其“工作”。

```
.glowy { /* ghosted letters */
    color: transparent;
    text-shadow: 0 0 10px black;
}
.no-textshadow {
    color: black;
} 
```

你必须权衡双方。你不能创建一个考虑到 IE6 的现代网站，同时你不能忽略它（也许你可以）。但你也不能停留在 1996 年。

此解决方案允许您使用最新功能，同时保持网站可供阿妈使用。

# json - 如何将 Zend 2 模型数据源从 MySQL 连接更改为 JSON REST API？

> ID：15374629
> 
> 赞同：0
> 
> 时间：2013-03-13T00:05:30.513
> 
> 标签：json, zend-framework2

我目前正在开发一个遵循 MVC 模式的 Zend 2 项目。

我的所有模型都使用直接连接从 MySQL 数据库中填充数据。

现在，在不破坏我的整个模型-视图-控制器关系的情况下，我想更改原始数据源。新的数据源将是 JSON Rest API。这个 JSON Web 服务包含与 MySQL 源基本相同的数据（只是以另一种格式），并用作我们移动应用程序的 Web 服务。

第一个问题是让我的 Zend2 应用程序连接到其余的 api。第二部分是评估这些数据并将其作为某种层，以便我仍然可以像以前一样使用我的“旧”算法。

执行这种数据源切换的最佳方法是什么？有什么方法可以存储从 Web 服务传递的信息以减少对该 Web 服务的查询量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:12:16.360

我将模型层编写为一组带有映射器的实体，这些映射器知道如何将实体保存和加载到数据库中。映射器通过服务类进行交互，应用程序的其余部分只使用服务类。

因为它是 ZF2，所以我使用 ServiceManager 将映射器加载到服务类中，以便服务类对映射器一无所知（除了要调用的方法名称）并且实体也不知道存储它们的映射器.

在这种情况下，我可以编写一组与 Web 服务 API 而不是数据库通信的新映射器，重新配置我的服务管理器，只要新的 Web 服务 API 映射器具有与数据库相同的方法，一切都会正常工作。

# javascript - 从同一页面上的 URL 链接到特定的 Twitter 引导选项卡

> ID：15374630
> 
> 赞同：2
> 
> 时间：2013-03-13T00:05:42.900
> 
> 标签：javascript, twitter-bootstrap

我是一个 javascript 菜鸟，我想知道如何实现这个问题的答案？

[Twitter Bootstrap 选项卡：在页面重新加载或超链接时转到特定选项卡](https://stackoverflow.com/questions/7862233/twitter-bootstrap-tabs-go-to-specific-tab-on-page-reload)

我想在选项卡所在的同一页面上使用此代码....

```
 <script type="text/javascript">
    // Javascript to enable link to tab
    var url = document.location.toString();
    if (url.match('#')) {
      $('.nav-tabs a[href=#'+url.split('#')[1]+']').tab('show') ;
    } 

    // Change hash for page-reload
    $('.nav-tabs a').on('shown', function (e) {
      window.location.hash = e.target.hash;
    })
  </script> 
```

我应该在包含选项卡的页面的哪个位置插入它。

再次，很抱歉成为这样的菜鸟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T00:53:22.810

[引导程序 3](http://getbootstrap.com/javascript/#tabs)解决方案：

```
<script type="text/javascript">
$(function() {
  // Javascript to enable link to tab
  var url = document.location.toString();
  if (url.match('#')) {
    $('.nav-tabs a[href=#'+url.split('#')[1]+']').tab('show') ;
  }

  // Change hash for page-reload
  $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
    window.location.hash = e.target.hash;
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:32:32.900

尝试将代码包装在`$(document).ready()`函数中

```
$(document).ready(function() {
 //your code here...
}); 
```

您上面的内容将不起作用，因为 DOM 在运行时不会准备好。使用该`$(document).ready()`函数将延迟执行，直到 dom 加载。它几乎可以在包含选项卡的页面中的任何位置出现。有些人认为它应该放在该`head`部分内，有些人认为它应该放在最后。但请阅读此处以获得更深入的答案：[我应该将 $(document).ready() 放在哪里？](https://stackoverflow.com/questions/6770234/where-do-i-put-the-document-ready)

参见：[http](http://docs.jquery.com/Tutorials:Introducing_) ://docs.jquery.com/Tutorials:Introducing_ $(document).ready()

# systemc - 使用带有 sc_signal 的 std::string 时调用 sc_trace 没有匹配的函数

> ID：15374631
> 
> 赞同：1
> 
> 时间：2013-03-13T00:05:44.773
> 
> 标签：systemc

我正在使用 systemc 进行模拟，我收到一条错误消息，告诉我

> g++ -I/opt/Xilinx-14.2/Vivado_HLS/2012.2/Linux_x86_64/tools/systemc/include/ -o testBench.exe testBench.cc -L/opt/Xilinx-14.2/Vivado_HLS/2012.2/Linux_x86_64/tools/systemc/lib -lsystemc -lm /opt/Xilinx-14.2/Vivado_HLS/2012.2/Linux_x86_64/tools/systemc/include/sysc/communication/sc_signal_ports.h：在成员函数 void sc_core::sc_in::end_of_elaboration() [with T = std: :basic_string, std::allocator >]: testBench.cc:126: 从这里实例化
> 
> /opt/Xilinx-14.2/Vivado_HLS/2012.2/Linux_x86_64/tools/systemc/include/sysc/communication/sc_signal_ports.h:285：错误：没有匹配函数调用 sc_trace(sc_core::sc_trace_file*&, const std:: basic_string, std::allocator >&, std::string&)

你们对这个错误是什么以及如何解决它有任何想法吗？

```
#include "systemc.h"
#include "multiChipModule.cc"
#include <vector>
#include <string>
#include <iostream>
int convertTime(std::string input){   
// then main invocator function
int timeInt=atoi(input.substr(0,11).c_str());
int output =0;
for(int i=0;timeInt >0;i++){
 if(timeInt % 10 ==1) {
    output += static_cast<int> (pow(2,i));
    }
    timeInt /=10;
 }
    return output;
}

// include string
int sc_main(int argc,char* argv[]){
sc_signal<bool> BCOclock;
sc_signal<bool> MCA;
sc_signal<bool> MCB;
sc_signal<bool> enable;
sc_signal<sc_uint<8> > BCONumber;
sc_signal<std::string > inputMessage;
// input message will have 24 bits. The first 11 bits are for time.
//The next three bits more moduleNo, three bits for chipNo, seven bits for 
//stripNo. So in total it is 24 bits.

sc_signal<bool> SCLK;
sc_signal<bool> RCLK;
sc_signal<bool> outCLK;

multiChipModule module1("module1");
module1.BCOclock(BCOclock);
module1.MCA(MCA);
module1.MCB(MCB);
module1.SCLK(SCLK);
module1.RCLK(RCLK);
module1.outCLK(outCLK);
module1.enable(enable);
module1.BCONumber(BCONumber);
module1.inputMessage(inputMessage);

sc_start(0);
/*
sc_trace_file *wf=sc_create_vcd_trace_file("testBench");
sc_trace(wf,BCOclock,"BCOclock");
sc_trace(wf,MCA,"MCA");
sc_trace(wf,MCB,"MCB");
sc_trace(wf,enable,"enable");
sc_trace(wf,BCONumber,"BCONumber");
//sc_trace wf,coreTalking
sc_trace(wf,SCLK,"SCLK");
sc_trace(wf,RCLK,"RCLK");
sc_trace(wf,outCLK,"outCLK");
*/
//initialize all variables
cout<<"@"<<sc_time_stamp()<<"Asserting Enable\n"<<endl;
enable=1;
SCLK=1;
RCLK=1;
outCLK=0;
BCOclock=1;
MCA=1;
MCB=0;
BCONumber=0;
std::vector<std::string> vec1;
std::vector<int> vec2;
std::vector<std::string>::iterator it1;
std::vector<int>::iterator it2;
it1=vec1.begin();
it2=vec2.begin();
std::string input ="000111101000010010000000";
int time= convertTime(input);
it1=vec1.insert(it1,input);
it2=vec2.insert(it2,time);
input="010000100110010011111111";
time=convertTime(input);
it1=vec1.insert(it1,input);
it2=vec2.insert(it2,time);
//sorting here
int minimum=vec2[0];
int index=0;
for(int i=0;i<vec2.size();i++){
  for (int j=i;j<vec2.size();j++){
  if(vec2[j]<minimum){
    minimum=vec2[j];
    index=j;
    }
  }
  int tempTime =vec2[i];
  vec2[i]=vec2[index];
  vec2[index]=tempTime;
  std::string tempString=vec1[i];
  vec1[i]=vec1[index];
  vec1[index]=tempString;

  minimum=vec2[i];
  index=i;
}

int t=0;
for(int i=0;i<1000;i++){
 for(int j=0;j<vec2.size();j++){
  if(i==vec2[j])
    inputMessage=vec1[j];
 }
if(i%10==0)
  MCA=!MCA;
if((i-5)%10==0)
  MCB=!MCB;
if(i%132==0)
  BCOclock=!BCOclock;

 sc_start(1);
}
cout<<"@"<<sc_time_stamp()<<"De-Asserting Enable\n"<<endl;
enable=0;

cout<<"@"<<sc_time_stamp()<<"Terminating Simulation\n"<<endl;
sc_close_vcd_trace_file(wf);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:56:03.257

错误来自`"sc_signal<std::string > inputMessage;"`. `"T = std::string"`没有为、`sc_in`、`sc_trace`、等定义一大堆模板类/函数`vcd_trace`。

但问题更根本：你为什么要使用`std::string`a `sc_signal`？从代码中的注释中，您最好使用`sc_uint<24>`可以使用二进制字符串（如`"0b1111..11"`.

```
Instead of 
   std::string input ="000111101000010010000000";
use
    sc_uint<24> input = "0b000111101000010010000000"; 
```

# ios - 无法识别的选择器发送到类。'在 ClientViewController.mm 中调用方法'

> ID：15374634
> 
> 赞同：0
> 
> 时间：2013-03-13T00:06:03.183
> 
> 标签：ios, objective-c, unrecognized-selector

我试图在我的**ClientViewController.mm**类中调用一个方法并不断收到此错误：由于未捕获的异常而终止应用程序

```
'NSInvalidArgumentException', reason: '+ [ClientViewController TestMethod]: 
 unrecognized selector sent to class 
```

我有另一个实现接口的类。

```
void AppleRecognitionStatusObserver::onRecognitionStatusChanged
                                       (RecognitionStatus newStatus) {
    switch(newStatus) {
        case kInProgress:
            [ClientViewController TestMethod];
            break;
        ....etc
    }
} 
```

如何从另一个 C++ 类调用**ClientViewController方法？**

客户端视图控制器.h

```
//imports UIKit etc
@interface ClientViewController : UIViewController <AVAudioRecorderDelegate>{
    IBOutlet UIButton *recoButton;
    // some other buttons
}
@end

// and the .mm
//#imports....
@interface ClientViewController ()
@end
@implementation ClientViewController
-(void)TestMethod{
    outLabel.text = @"Has been called!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:12:53.360

您应该确保您的 ClientViewController.m 具有 testMethod 的方法实现，如下所示：

```
+(void)TestMethod {
    // some code here
} 
```

您的 ClientViewController.h 应该有一个匹配的标头声明，如下所示：

```
+(void)TestMethod; 
```

如果您需要实例方法，而不是类方法，请确保将 + 更改为 - ，如下所示：

```
-(void)TestMethod {
    // some code here
} 
```

和

```
-(void)TestMethod; 
```

# c++ - c ++成员函数声明问题w / class

> ID：15374635
> 
> 赞同：0
> 
> 时间：2013-03-13T00:06:03.773
> 
> 标签：c++, class

下面是我当前正在使用的代码的摘录（其余的与我的问题无关。我在使用 Information combineInfo(information a1) 成员函数时遇到问题。我收到一个错误，它没有在范围内声明。所有我想做的是结合信息并设置新变量。我能够使用结构成功地做到这一点，现在我是自学班。

```
#include <iostream>
#include <string>

using namespace std;

struct Date
{
    int month;
    int day;
    int year;
};

class Information
{
public:
    Information(); 
    void printinformation(); 
    Information combineInfo(Information a1);
    //Setters and Getters Here
private:
    string a;  
    double b; 
    double c; 
    Date d;
    Date e;
};

void initializeDate(Date& d);
void printDate(Date& d);

int main()
{
    cout << endl << "Now please input Information #1" << endl;
    Information a1;  // prompts for all the inputs for a1
    cout << endl << "Now please input Information #2" << endl;
    Information a2;  // prompts for all the inputs for a2
    a2.combineInfo(a1);  // again prompts for info??
    cout << "The combined Information is: " << endl;
    info.printinformation();
    return 0;
}

Information::Information()
{
    string a;
    cout << "Please enter a"<<endl;
    getline(cin, a);
    cout <<"Please enter b?"<<endl;
    cin >> b;
    getline(cin, dummy);
    cout <<"Please enter c?"<<endl;
    cin >> c;
    getline(cin, dummy);
    cout << "Please input the info start dates."<< endl;
    initializeDate(start);
    cout << "Please input the info end dates."<< endl;
    initializeDate(finish);
}

Information Information::combineInfo(Information a1)
{
    Information a1;
    Information a2;
    Information info;
    a1.a = a2.a;
   //etc.
    return info;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:09:39.247

您的代码给出了很多编译错误，但最奇怪的部分在这里：

```
 Information a2;
    a2.:combineInfo(a1);
//    ^^ Remove the :

    cout << "The combined Information is: " << endl;
    info.printinformation();
//  ^^^^
//  You didn't declare info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:08:19.243

你有：

```
a2.:combineInfo(a1); 
```

它应该是：

```
a2.combineInfo(a1); 
```

错误地在那里有一个额外的'：'。

# c# - 在 html 正文中嵌入图像也希望显示

> ID：15374638
> 
> 赞同：0
> 
> 时间：2013-03-13T00:06:29.080
> 
> 标签：c#, html, email, email-attachments, document-body

我需要发送包含图片和文字的邮件。我的问题是无法在体内发送图像，它总是出现在底部操作体。

所以我的问题是**如何在电子邮件正文中发送写位置图片**？

这是不起作用的代码

```
using System;
using System.Collections.Generic;
using System.IO;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Net;
using System.Net.Mail;
using System.Threading;
using System.Web;
using System.Net.Mime;
using WindowsFormsApplication5.Properties;

namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        MailMessage msg = new MailMessage();

        string To;

        To = Properties.Settings.Default.To.ToString();

        msg.To.Add("some.name@gmail.com");
        msg.From = new MailAddress("your.adress@gmail.com");
        msg.Subject = "Subject";

        string path = "C:\\root.jpg"; // my logo is placed in images folder

        LinkedResource logo = new LinkedResource(path, MediaTypeNames.Image.Jpeg);
        logo.ContentId = "companylogo";
        logo.TransferEncoding = TransferEncoding.Base64;

        //now do the HTML formatting
        AlternateView av1 = AlternateView.CreateAlternateViewFromString(
              "<html><body>" + "<p>This will have to be before picture</p>" + "<img src=cid:companylogo/>" + "<p>This will have to be after pictures.</p>" +
              "<br></body></html>",
              null, MediaTypeNames.Text.Html);

        //now add the AlternateView
        av1.LinkedResources.Add(logo);

        //now append it to the body of the mail
        msg.AlternateViews.Add(av1);
        msg.IsBodyHtml = true;

        SmtpClient smtp = new SmtpClient();
        smtp.Host = "smtp.gmail.com";

        smtp.Port = 587;

        //for gmail
        smtp.EnableSsl = true;
        smtp.Credentials = new System.Net.NetworkCredential(
             "your.adress@gmail.com",
             "password");

        smtp.Send(msg);
    }
}
} 
```

我在 gmail 客户端上进行了测试，这是我得到的：

![在此处输入图像描述](../Images/baa2851f6ce1ddb18768a9334bd1a249.png)

# node.js - Node.JS 整合和 Swig

> ID：15374642
> 
> 赞同：7
> 
> 时间：2013-03-13T00:06:42.833
> 
> 标签：node.js, express, swig-template

我正在尝试使用节点（express v3.1.0）设置合并，以使用 Swig。我不断收到错误

> 错误：在 Module.require (module.js:362:17) 的 Function.Module._load (module.js:280:25) 的 Function.Module._resolveFilename (module.js:338:15) 中找不到模块“swig” ) 在 Function.exports.swig.render (/home/jamie/node_modules/consolidate/lib/consolidate.js:237:50) 在 /home/jamie/node_modules/consolidate/ 的 require (module.js:378:17) lib/consolidate.js:144:25 at /home/jamie/node_modules/consolidate/lib/consolidate.js:97:5 at fs.readFile (fs.js:176:14) at Object.oncomplete (fs.js: 297:15)

在顶部，我是这样设置的

```
var express = require('express');
var cons = require('consolidate');

// assign the swig engine to .html files
console.log(cons.swig);
app.engine('html', cons.swig);

// set .html as the default extension 
app.set('view engine', 'html');
app.set('views', __dirname + '/views'); 
```

然后我提出这样的要求：

```
app.get('/', function(req, res){
    res.render('home', {
        title: "home"
    });
}); 
```

我在根目录/视图中有一个模板 home.html

我的根目录是/home/jamie/hello-world。我在这里做错了什么？

**编辑** 顺便说一句，console.log(cons.swig) 确实返回了一些东西。

```
{ [Function] render: [Function] } 
```

所以它肯定*在那里*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T00:26:27.470

你安装`swig`包了吗？从自述文件：

> **注意**：您仍然必须安装您希望使用的引擎，将它们添加到您的 package.json 依赖项中。

# javascript - 解析从弹出窗口收集的数据

> ID：15374651
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:07:32.243
> 
> 标签：javascript, php, html, popup

我正在开发一个 Facebook 应用程序，但遇到了一点问题：我有我的 index.php 和一个 mypopup.php 文件。托管在 heroku 上，如果这有任何问题的话。现在我需要的是，当在我的 index.php 页面上按下按钮时，应该会出现一个弹出窗口，其中包含 mypopup.php 文件的内容，其中包含一个带有几个复选框和一个按钮的 html 表单。现在，问题是如何将弹出窗口中的数据（选中项）传递给我的 index.php，然后在我的 index.php 文件中使用该数据？

例如：

> Checkbox1 data1 [选中]
> Checkbox2 data2 [未选中]

与 checkbox1 相关的数据应该传递给 index.php 中的某个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:17:19.447

您可以使用 Javascript 来执行此操作。我用我在灯箱中显示的一些内容来做到这一点。当灯箱完成加载后，我将事件处理程序附加到我想在灯箱中观看的所有项目（`onchange`例如事件）。然后，您可以使用 AJAX 请求将数据传递给后端的 index.php。

另外，我刚刚意识到（我很傻），如果您有一个 HTML 表单，您可以更改表单的操作以将数据发送到 index.php 而不是 mypopup.php。

无论哪种方式都会奏效。这取决于数据的具体情况以及您需要对其进行的处理。

# python - 在 Python/MySQLdb 中检查空查询集

> ID：15374654
> 
> 赞同：2
> 
> 时间：2013-03-13T00:07:46.147
> 
> 标签：python, mysql, mysql-python

我似乎无法为这个问题找到一个简单的答案。我正在为 Python 使用 MySQLdb，并且正在运行一个 select 语句，我想检查是否返回了一个空的查询集。

```
get_port = db.cursor()
get_port.execute(""" SELECT port FROM nar_ports WHERE port=%s AND hostname=%s;""", (device_port,PE)) 
```

我努力了

```
if not get_port: 
```

这不匹配。所以我尝试了

```
for result in get_port.fetchall():
    existing_port = result[0]
if not existing_port: 
```

但它甚至似乎都没有进入循环。所以我试着检查长度

```
if len(get_port) == 0: 
```

但似乎你不能在 sql 对象上运行 len 。所以我检查对象是否有一个无值。

```
if get_port = None: 
```

但这似乎也不起作用。

我确定有一个简单的解决方案，但我似乎找不到它。任何帮助将不胜感激。提前致谢。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:09:38.373

这很简单，尽管您几乎有更长的路要走。

```
if get_port.fetchone():
    do_something_here() 
```

你也可以使用

```
if len(get_port.fetchmany()):
    do_something_here() 
```

但这更长，效率更低。

# c# - 如果 System.Enum 是一个类，它怎么可能也是一个 ValueType？

> ID：15374657
> 
> 赞同：1
> 
> 时间：2013-03-13T00:08:09.203
> 
> 标签：c#

System.ValueType 是一个类，从它派生的所有内容都是值类型，因此不能是类，因为类是引用类型。

System.Enum（继承 System.ValueType）怎么可能被定义为一个类呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:11:30.490

请参阅：http: [//msdn.microsoft.com/en-us/library/system.valuetype.aspx](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)

> 尽管 ValueType 是值类型的隐式基类，但您不能创建直接从 ValueType 继承的类。相反，各个编译器提供语言关键字或构造（例如 C# 中的 struct 和 Visual Basic 中的 Structure...End Structure）来支持值类型的创建。

针对您的问题：

> 那么说所有类都是引用类型是错误的吗？

您声明的任何类都将是引用类型。所以我不认为将所有类都视为引用类型是错误的。创建一个声明为类的值类型是不可能的。您必须使用 struct 关键字。如果您尝试模拟您在 enum 类中看到的内容：

```
 public class Test: ValueType
  {
      public string Text { get; set; }
  } 
```

...您将收到错误“测试”无法从特殊类“System.ValueType”派生。我不知道是什么魔法使“ValueType”类变得特别，但据我所知，所有 .NET 语言都要求您使用特殊关键字，例如`struct`定义自己的值类型。它令人困惑，但可能用于重要目的，例如优雅地处理装箱/拆箱、反射（.IsValueType？）和类似的事情。

> 如果你有一个抽象类，你不能实例化它，所以它永远不会在堆上，即。不会像引用类型一样？

是的，但这与 ValueTypes 完全不同。你可以声明一个像 int 这样的 ValueType，给它赋值，传递它，它可以被拆箱和装箱。这些东西都不适用于抽象类。

顾名思义，它是其他一些具体类的**抽象**。当你声明一个 SomeAbstractClass 类型的变量时，**你不能对它做任何事情，直到你初始化它对继承该抽象类的某个具体类的引用**。因此，与该变量的每个操作/交互都将针对具体类发生（尽管它可能会利用抽象类中的一些实现）。因此，每当您使用抽象类变量时，您实际上是在使用具体类，因此**它仍然是一个引用类型，并且所有像堆这样的东西都适用于它，就像任何其他引用类型一样**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T00:12:54.213

.NET 中的所有内容都派生自 System.Object：

> 引用类型和值类型都派生自最终的基类 Object。如果值类型必须表现得像对象，则在堆上分配一个使值类型看起来像引用对象的包装器，并将值类型的值复制到其中。包装器被标记以便系统知道它包含一个值类型。这个过程称为装箱，相反的过程称为拆箱。装箱和拆箱允许将任何类型视为对象。

[http://msdn.microsoft.com/en-us/library/system.valuetype(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.valuetype(v=vs.110).aspx)

# c++ - 堆栈模板 - 弹出函数返回地址而不是值

> ID：15374664
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:08:58.367
> 
> 标签：c++, templates, stack

我正在尝试使用 C++ 中的模板创建一个堆栈，对于 Pop 函数来说一切正常，它返回项目的地址而不是实际值，代码如下。

```
 template <typename T>
 class Stack {

const int size;
T* data;
int index;

public:
    Stack(){};
    Stack (const int S);
    ~Stack(){delete [] data;};
    bool Push (const T& info);
    T Pop ();
    bool is_empty();
};

 template <typename T>
 Stack <T> ::Stack (const int S) : size(S)  // Stack CTOR
 {
  this->data = new T [this->size];
  this->index=0;
 }

 template <typename T>
 bool Stack<T> ::Push (const T& info)
 {  

  if(index==(size-1))
            return false;
   else{
      this->data[index] = info;
      index++;
      return true;}
 }

template <typename T>
T Stack <T> ::Pop ()
{       
    index--;
    return (this->data[index+1]);
} 

 template <typename T>
 bool Stack<T> ::is_empty()
 {
  if(index==0){return true;}
        else
            return false;
  } 
```

main() 是：

```
Stack <int> Sint (10);
Sint.Push(6);
int X = Sint.Pop();
cout<<X;  // prints out the address and not the value 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:22:53.330

这里：

```
 template <typename T>
 bool Stack<T> ::Push (const T& info)
 {
     if (index == (size-1))
     {
         return false;
     }
     else
     {    
         this->data[index] = info;
         index++; // index becomes 1 after the first insertion...
         return true;
     }
 } 
```

如果堆栈为空，则将项目存储在索引 0 处并增加索引，索引变为 1。然后在这里：

```
template <typename T>
T Stack <T> ::Pop ()
{
    index--; // index becomes 0...
    return (this->data[index+1]); // returning the uninitialized item at
                                  // index 0 + 1 = 1...
} 
```

您正在减少索引，该索引变为 0，然后返回索引 1 处的项目，该项目从未分配过。您看到打印的不是第一个元素的地址，而是未初始化的第二个元素的值。

你应该做的是：

```
template <typename T>
T Stack <T> ::Pop ()
{
    if (index == 0)
    {
        // Maybe throw an exception?
        // You should handle the error condition somehow.
        return T();
    }
    else
    {
        index--;
        return (this->data[index]);
    }
} 
```

# .net - 图表区域轴长度不匹配

> ID：15374666
> 
> 赞同：0
> 
> 时间：2013-03-13T00:09:11.060
> 
> 标签：.net, vb.net, charts, data-visualization, finance

我在一个有两个区域的 Winforms 应用程序中创建了一个图表控件（以前称为 Dundas Chart，但这是自 4.0 以来的标准图表控件）。顶部区域是“股票”图，下部区域是“柱”图。此图表控件的两个区域在右侧均等排列，但在左侧有所不同。

下图有红色箭头显示两个区域之间的长度差异。

![在此处输入图像描述](../Images/83b9a9d84fabc430a53b62e8c9c10ba8.png)

要使这两个区域协同工作，它们必须沿 x 轴等长，以便顶部区域的每个标记与底部的标记对齐。虽然对于小型数据集它们之间的差异很小，但随着这种变化的变化更加明显。

我认为两者之间存在差异的原因是它们是不同的图表类型。我曾尝试获取上部区域的长度以希望缩放，但似乎没有办法获取轴长度。

对于解决此问题，我将不胜感激任何链接、建议甚至猜测。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:17:41.260

好的，所以经过一些研究，我能够隔离问题。在每个图表的图表区域中存在一个内部绘图位置结构，其中包含与 X 和 Y 轴以及高度、宽度和自动缩放相关的值。我将每个图表区域设置为不自动缩放并匹配内部绘图位置中每个图表区域的值。这正确地对齐了图表。

附带说明一下，由于它是有价值的和相关的，图表区域还具有允许图表区域定位的位置结构（例如相对于彼此提升图表）。

# php - Bootstrap Modal、IE7 和 PHP 的问题

> ID：15374667
> 
> 赞同：0
> 
> 时间：2013-03-13T00:09:12.303
> 
> 标签：php, twitter-bootstrap, internet-explorer-9, modal-dialog

为我工作的公司构建“仪表板”网络工具时遇到了一些麻烦。仪表板使用 DataTable 显示客户信息，使用 PHP`while`循环从 MySQL 数据库中提取数据。

我在表格的每一行都有一个按钮：

```
<a class="btn btn-info" data-toggle="modal" href="#job_info_" . $row['id'] . ""><i class="icon-question-sign icon-white"></i></a> 
```

这需要独特的模态框（例如：#job_info_42）

模态框的代码是：

```
<div class="modal hide fade" id="job_info_" . $row['id'] . "">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">×</button>
<h3>Project Details For ".$row['customer']."</h3>
</div>
<div class="modal-body">
<span><strong>Current Status:</strong> ".$status. $quote_notify ."</span> <br><br>

".$row['details']."

</div>
<div class="modal-footer">
<a href="#" class="btn" data-dismiss="modal">Close</a>
</div>
</div>" 
```

我已经使用 IE10、Chrome、Safari 和我的智能手机测试了这段代码。 **它工作得很好，除了在 IE9 中（没有测试过旧的 ie 版本）。** 代码无法调用模态框（它没有出现）。不幸的是，IE9 是我公司的官方浏览器。

我很乐意应要求发布任何其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:06:45.957

我要感谢大家对这个问题的帮助。

当我在 jsfiddle 上构建我的错误示​​例时，我注意到我的网站上有一些旧脚本来自我抓到的想法。当我删除那些未使用（但仍然链接）的 js 文件时，我的问题就消失了。后面肯定发生了一些没有被注意到的冲突。

我删除的文件是：

*   jquery.masonry.min.js
*   jquery.imagesloaded.js
*   jquery.uploadify-3.1.min.js
*   jquery.raty.min.js
*   jquery.elfinder.min.js

再次感谢大家。

# php - apc_add() 的 $values 参数有什么作用？

> ID：15374671
> 
> 赞同：1
> 
> 时间：2013-03-13T00:09:51.117
> 
> 标签：php, apc

[http://php.net/apc_add](http://php.net/apc_add)

我不明白`$values`参数的实际作用——它甚至没有显示在函数签名中。

有人可以帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:15:26.650

它不是第四个参数，而是替代的第一个参数。有2种使用方式`apc_add()`。

您可以通过传递键和值来设置单个项目：

```
apc_add('Key', 'Value'); 
```

或者您可以通过在数组中传递多个变量来同时设置它们：

```
$data = array('Key1' => 'Value1', 'Key2' => 'Value2');
apc_add($data); 
```

这相当于做：

```
apc_add('Key1', 'Value1');
apc_add('Key2', 'Value2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:13:18.977

没有第四个参数。该函数已重载，因此 $values 实际上以您可以调用它的第二种方式使用。

以下是从文档中调用它的两种方法：

> bool apc_add ( 字符串 $key [, 混合 $var [, int $ttl = 0 ]] )
> 
> 数组 apc_add ( 数组 $values [, 混合 $unused [, int $ttl = 0 ]] )

# android - Android - 查看是否按下主页键

> ID：15374673
> 
> 赞同：0
> 
> 时间：2013-03-13T00:10:03.757
> 
> 标签：android, basic4android

我正在制作游戏，如果用户以任何方式离开活动（按下返回键或主页键），则活动需要通过发布到脚本并结束活动来结束游戏。

我可以检测是否按下了返回键，但是，我找不到任何有效的方法来检测是否按下了主页键。我不能只在 Activity_Pause 方法中结束游戏，因为假设用户在游戏中途接到电话。

我知道您无法捕获该事件，但是，有没有人找到一种方法来查看该活动是否由用户留下，而不是像电话一样将其发送到后台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:27:58.067

好的，如果您坚持，这是解决方法。Android 下一个版本可能只是填补了这个漏洞。

```
boolean mKeyPress;  
boolean mUserLeaveHint;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    mKeyPress = true;
    return super.onKeyDown(keyCode, event);
} 

@Override
protected void onUserLeaveHint()
{
    super.onUserLeaveHint();
    mUserLeaveHint = true;
}

@Override
protected void onPause()
{
    super.onPause();
    if (!mKeyPress && mUserLeaveHint)
    {
        // HOME_KEY is pressed
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T00:13:41.633

看起来像这个的副本

[Android，如何通过广播接收器接收主页按钮点击？](https://stackoverflow.com/questions/13302167/android-how-to-receive-home-button-click-through-broadcast-receiver)

```
@Override
public boolean dispatchKeyEvent(KeyEvent keyevent) {

    if (keyevent.getKeyCode() == KeyEvent.KEYCODE_HOME) {
        //Do here what you want
        return true;
    }
    else
        return super.dispatchKeyEvent(event);
} 
```

# c++ - c++ - 在没有循环的情况下查找稀疏矩阵值

> ID：15374675
> 
> 赞同：2
> 
> 时间：2013-03-13T00:10:13.120
> 
> 标签：c++, hashtable, sparse-matrix

我有一个 C++ 程序，它需要以下格式的输入文件：

```
X    Y    Z
1    1    .642
1.1  1    .482
1.2  1    .394
1.3  1    .420
1.4  1    .948 
```

文本文件很长——大约 20,000 行左右。我现在需要将其读入我的 C++ 程序，以便对任何 (X,Y) 对进行 Z 查找。如果 (X,Y) 对与我的输入文件中的任何对不完全相同，我需要使用最接近的 X 和最接近的 Y 值。如果我有一个完整的矩阵而不仅仅是非零值，那么 X 和 Y 坐标将均匀分布。

我的问题是确定最快的方法来做到这一点。我想避免实际上通过向量搜索最接近的 X，然后通过向量搜索最接近的 Y。有没有办法在不循环和搜索的情况下完成此操作？某种哈希表可以用于查找值吗？

我是一个脚本专家和一个 c++ 新手，所以如果这看起来微不足道，我深表歉意。因此，作为参考，我需要快速的方法：

```
lookup(1.1,1)
    >>> .482

lookup(1.112, 1)
    >>> .482 // value corresponding to closest x and closest y

lookup(0,0)
    >>> .642 // value corresponding to closest x and closest y 
```

如果我有完整的矩阵，这直接是可能的，例如：

```
 1.1  1.2  1.3  1.4  1.5
1.1
1.3
1.5      (Z values)
1.7
1.9 
```

为了找到与 (1.5, 1.2) 相关的 Z 值，我可以简单地返回在索引 [1.5/(x_spacing), 1.2/(y_spacing)] 处找到的 Z 值。

当然，我还需要通过这个间距减去我的查找值，如果不存在确切的 (X,Y) 对，则四舍五入。然而，最重要的是，它允许我在不进行任何搜索的情况下获得适当的 Z 值。我想完成同样的事情，除了不占用巨大的完整矩阵所需的所有空间。这就是为什么文本文件只包含对应于非零 Z 值的对的原因。

您能提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:13:57.927

我建议将其存储在结构化树中。以四叉树为例。它将是稀疏存储以节省空间，并且搜索最近点也很容易。

C++ 中的四叉树教程在[这里](http://veeableful.wordpress.com/2012/02/07/algorithm-space-partitioning-using-quadtree/)。

# mysql - 解决mysql错误1064

> ID：15374680
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:10:34.533
> 
> 标签：mysql

我一直无法让 PHP 调用工作。我决定尝试通过命令提示符执行命令。

这是我尝试过的以及返回的内容：

```
mysql> -u setlist -p music -D setlist
    -> INSERT INTO main (name, orderno, midi)VALUES ("second", "third", "fourth");
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-u setlist -p music -D setlist
INSERT INTO main (name, orderno, midi)VALUES ("se' at line 1 
```

我已经尝试了所有我能想到的报价组合。有人对我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:19:13.800

您将 mysql 选项`-u setlist -p music -D setlist`作为命令的一部分，这就是它失败的原因。错误清楚地表明了这一点。因此，正确登录到 mysql 并确保您的 INSERT 是提示符中唯一的命令，然后再执行它。像这样

```
mysql> INSERT INTO main (name, orderno, midi) VALUES ("second", "third", "fourth"); 
```

要打开`mysql`并选择连接使用的数据库：

```
mysql -u username -p dbname
                    ^ no password specified mysql will prompt you for it 
```

或者

```
mysql -u username -ppassword dbname 
```

要在 mysql 中选择数据库，请使用

```
USE dbname; 
```

# ios - 如何设置 xcodebuild 存档名称和路径

> ID：15374686
> 
> 赞同：3
> 
> 时间：2013-03-13T00:11:36.477
> 
> 标签：ios, xcode, xcodebuild

我使用 xcodebuild 来自动化我的发布过程，并想先做一个：

```
xcodebuild -scheme MyScheme archive 
```

然后构建ipa。

问题是 xcodebuild 将 xcarchive 放在某个不起眼的位置，并且它包含日期。

我的问题：

我如何覆盖/强制 xcodebuild 在我想要它的时候命名和放置 acrhive (/tmp)？

我试过：

```
xcodebuild -scheme MyApp archive ARCHIVE_PATH='/tmp' 
```

但这并没有做任何事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-12T09:47:22.633

这应该可以解决问题：

```
xcodebuild -scheme MyScheme archive -archivePath "/tmp" 
```

# c# - 控制器中的实体框架枚举

> ID：15374688
> 
> 赞同：1
> 
> 时间：2013-03-13T00:11:58.573
> 
> 标签：c#, asp.net-mvc, entity-framework, enums

我在域模型中有一个枚举：

```
public enum MessageType
{
    Ad = 1,
    Ask = 2
} 
```

我使用 DTO 将数据从服务层传输到 UI 层。

在控制器中，我需要从服务层获取某种类型的所有消息：

```
_messageService.GetAllAds(MessageType.Ad); 
```

由于域模型未映射到 UI 中，我如何将其传递给 UI？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:21:04.897

不久前，我在我的一个项目中遇到了这个问题。我最终将枚举复制到 UI 层，并且基本上有两个（几乎）相同的枚举（名称略有不同以区分它们）。本质上，它就像枚举的视图模型。

这不是一个很好的解决方案，如果我想出更好的东西，我可能会在以后重构我的项目，但它确实有效。这样做的一个好处是，您可以使用与 UI 相关的属性来装饰您的 UI 层枚举，这些属性在域层中根本没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:21:14.020

你需要在你的控制器和服务之间提供一些共同的东西..无论是`MessageType`你当前使用的枚举还是其他东西..也许你想`string`在那里传递 a ，但我不推荐它。就我个人而言，我也不希望让控制器直接访问任何域实体（我使用视图模型代替），但对于枚举，我例外。

我的建议：允许控制器仍然使用该枚举。

# ios - iOS 检查视图是否仍然存在

> ID：15374690
> 
> 赞同：0
> 
> 时间：2013-03-13T00:12:02.257
> 
> 标签：ios, uiview, scrollview, tableview, uianimation

我有一个小的子类 UIView，用于在连接超时时向用户显示“连接超时”动画。我在方法中添加了一些代码：scrollViewDidScroll，这样当用户滚动表格时，我的子视图在呈现时不会滚动。但是，当连接超时视图完成动画并且从 superView 中删除视图时，每当滚动 tableview 时，我都会收到一条消息发送到 deallocated instance 错误。我检查了子视图是否为零，但这似乎不起作用。我将如何避免这种情况？

我如何呈现子视图：

```
// Show No Internet Message
noInternetView = [FCDataController presentNoInternetMessage:self.view];
noInternetViewOrigin = noInternetView.frame.origin; 
```

视图如何在我的 FCDataController 类中显示：

```
+ (NoInternetView *)presentNoInternetMessage:(UIView *)view {

    NoInternetView *internet = [[NoInternetView alloc] initWithFrame:CGRectMake(0, view.bounds.size.height, view.bounds.size.width, 30) andPosition:NoInternetPositionBottom];
    [view addSubview:internet];

    CGRect position = CGRectMake(0, view.bounds.size.height - 30, view.bounds.size.width, 30);

    [UIView animateWithDuration:0.4
                          delay:0.5
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         internet.frame = position;
                     }
                     completion:^(BOOL finished) {
                         NSLog(@"DONE");
                         [self performSelector:@selector(hideInternetMessageForView:) withObject:view afterDelay:2.0];
                     }];

    return internet;
}

+ (BOOL)hideInternetMessageForView:(UIView *)view {

    NoInternetView *internet = [self NoInternetForView:view];
    if (internet != nil) {

        CGRect remove = CGRectMake(0, view.bounds.size.height, view.bounds.size.width, 30);

        [UIView animateWithDuration:0.5
                              delay:1.0
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                             internet.frame = remove;
                         }
                         completion:^(BOOL finished) {
                             NSLog(@"DONE");

                             [internet removeFromSuperview];
                         }];
        return YES;
    }
    return NO;
}

+ (NoInternetView *)NoInternetForView:(UIView *)view {

    NoInternetView *internet = nil;
    NSArray *subviews = view.subviews;
    Class internetClass = [NoInternetView class];

    for (UIView  *aView in subviews) {
        if ([aView isKindOfClass:internetClass]) {
            internet = (NoInternetView *)aView;
        }
    }
    return internet;
} 
```

ScorllView 方法：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {

    if (noInternetView != nil) {

        noInternetView.frame = CGRectMake(self.noInternetViewOrigin.x, self.noInternetViewOrigin.y + self.tableView.bounds.origin.y, noInternetView.frame.size.width, noInternetView.frame.size.height);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:00:20.803

视图可能不会立即被释放。改为尝试： if ([noInternetView superview] != nil) {}

# javascript - 我可以使用 javascript 来制作等效的 Windows 窗体应用程序吗？

> ID：15374693
> 
> 赞同：1
> 
> 时间：2013-03-13T00:12:08.403
> 
> 标签：javascript, windows

我使用 Visual Studio 使用 C# 和 VB 制作 Windows 窗体应用程序，但我想开始学习另一种语言，最好是 javascript。我可以这样做吗？我刚刚下载了 Visual Studio 2012 Professional，我能找到的唯一选择是制作 Windows 8 应用程序。

抱歉，如果这是一个显而易见的问题，但我似乎无法在任何地方找到答案。如果我的想法（尝试使用 javascript 制作 Windows 桌面应用程序）是一个愚蠢的想法，我也很感兴趣，所以如果是的话，请加入。

谢谢！

我应该指出我将开发一个不能从浏览器运行的 UI；那就是技术人员将在远离 wifi 的现场使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:21:19.557

Windows 8 支持用 Javascript 编写的*桌面应用程序。*以前版本的 Windows 不会……至少不是天生的。

我建议，鉴于这是对 Javascript 的介绍......并且 Windows 8 桌面应用程序以与网页类似的方式工作，您专注于构建包含 Javascript 的常规网页。

这可以通过创建一个普通的旧 HTML 文件（使用任何编辑器......包括 Visual Studio）并将其加载到 Web 浏览器中来实现。

一旦您了解了 Javascript 在常规 Web 设置中的工作方式，就应该更容易处理从 Windows 8 应用程序到 ChromiumEmbedded 应用程序的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:17:50.330

它并不愚蠢——JavaScript 非常适合 GUI 编程。它不是 WinForms，但有 node.js 与 QT 的绑定，例如。[https://github.com/arturadib/node-qt](https://github.com/arturadib/node-qt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:43:56.987

是的，您可以编写一个[**HTML 应用程序**](http://msdn.microsoft.com/en-us/library/ms536496.aspx)，它是在本地运行的 Web 应用程序，与任何已编译的应用程序具有相同的权限。这些至少从 Windows 95 开始就已经存在，并且在 Windows 8 中仍然受支持。

要创建 HTML 应用程序，请使用 HTA 扩展名保存 HTML 文件。它将像任何其他 Web 应用程序一样运行，但没有安全限制。例如，您将有权访问文件系统。它不是在浏览器中运行，而是有自己的窗口和图标，两者都可以通过[`<hta:application>`标签](http://msdn.microsoft.com/en-us/library/ms536495.aspx)进行自定义：

```
<hta:application id="MyApp"
    icon="MyApp.ico"
    border="none"
    windowstate="maximize" /> 
```

确保包含一个`X-UA-Compatible`元标记，以免您的代码在 IE7 模式下运行：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

对于部署，使用您喜欢的方法创建一个安装程序，或者只是压缩所有需要的文件，然后让用户解压缩到他们计算机上的任何目录，并根据需要在桌面或开始菜单中创建快捷方式。

您需要开始的所有信息都[在 MSDN 的文档中](http://msdn.microsoft.com/en-us/library/ms536496.aspx)。

[**JScript.Net**](http://msdn.microsoft.com/en-us/library/72bd815a.aspx) is another option. This implementation (and extension) of JavaScript, allows you to actually write Windows Forms applications with JavaScript. Sadly, there's no IDE support that I know of. The last (and maybe only) version of Visual Studio to support JScript.Net was Visual Studio 2005\. You would have to write the code without the help of an IDE and use the command line compiler.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T00:18:51.020

这是网络世界，您不仅限于 Windows 表单，您所需要的只是 HTML、CSS、JavaScript 和嵌入式浏览器，例如[chromiumembedded](https://code.google.com/p/chromiumembedded/)（具有 .NET 绑定）或适用于[Node的](http://nodejs.org/)[App.js](http://appjs.org/)，我认为它也使用 CEF .

还有许多提供 UI 元素的框架，例如 jQuery UI、Extjs 等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T00:21:41.293

您可以使用 Visual Studio 构建“看起来像”Windows 应用程序的 JavaScript 应用程序。但是你应该意识到这个应用程序几乎肯定是一个 Web 应用程序，它必须托管在服务器上并在浏览器中运行。

因此，如果您想学习，我的建议是首先使用 Visual Studio 研究 Web 应用程序，以了解应用程序的结构。Javascrip 应用程序可以在 Visual Studio 中调试和编写，如果设计得当，它们的外观和感觉就像一个 Windows 应用程序，但有许多优点，主要是用户不需要在他们的计算机上安装它。

# java - Java Eclipse 项目中未绑定的 JavsSE 1.7 库

> ID：15374697
> 
> 赞同：4
> 
> 时间：2013-03-13T00:12:48.400
> 
> 标签：java, eclipse, static-libraries

我对 Java 和 Eclipse 很陌生。我正在开发一个使用 Jave SE 1.7 的 java 项目。我在 Mac OS 中安装了 Java 1.6 版。我现在已经安装了 Jave SE 1.7 来运行这个项目，但是在项目的库部分显示`JavaSE 1.7 (unbound)`. 该项目无法编译并显示大量错误。如何将 JavaSE 1.7 库与项目绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:25:30.207

在您实际安装 jdk 7 之后，您需要告诉 Eclipse。窗口 -> 首选项 -> Java -> 已安装的 JRE。
之后，如果新 JRE 不是默认 JRE，则告诉您的项目使用哪个 JRE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:35:47.897

检查这两个面板。移除无界的 1.6 JRE，然后配置新安装的 1.7 JRE。

![在此处输入图像描述](../Images/bc2422dd2d5748afbc02d68ed122d708.png)

![在此处输入图像描述](../Images/b2e40a4d0d24238044a5459992d082dc.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:56:57.327

要添加到上述答案，您还应该确认该项目正在使用 Java 1.7 编译器级别。 **右键单击**该项目，然后单击**Properties**。单击 Java Compiler 并检查编译器级别是否也设置为 Java 1.7。见下图![在此处输入图像描述](../Images/2110d026058b8343425eee44b56760c4.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-21T14:08:00.310

嗨，我也遇到了这个问题，但对我来说 1.8 JRE 是未绑定的。解决此问题的过程仍然相同。

1.  转到 Eclipse -> 首选项
2.  Java -> 已安装的 JRE
3.  您将看到 Java SE 6 已经存在并已检查。
4.  要查看您已安装的其他 JRE，请单击“搜索”按钮

![在此处输入图像描述](../Images/eba31429edc9b1066703345786b8601e.png) 5\. 您现在将看到已安装的其他 JRE，现在选中您要使用的 JRE 并重新启动 Eclipse。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T16:04:03.300

对于 Windows 中的 Eclipse：

选择 Windows->Preferences->Java->Installed JREs->Add。

![在此处输入图像描述](../Images/cd20cf8aa5fe85f382f9a65fd5286a10.png)

选择您的 JRE 类型，然后单击下一步。

![在此处输入图像描述](../Images/6883e695aa868d5b1173a3e6e22f9233.png)

选择“目录...”并找到通常位于**C:\Program Files\Java\jre下的***jre7*文件夹，单击完成。

 **![在此处输入图像描述](../Images/170812c9a47b4b9520fe79f135a4d8f0.png)

添加后，选择 jre7 并单击确定。

![在此处输入图像描述](../Images/ac7a50cd003246f1e5e60897a503b3da.png)**

# c# - 从多个插件加载程序集，但只加载一次

> ID：15374705
> 
> 赞同：2
> 
> 时间：2013-03-13T00:13:27.400
> 
> 标签：c#, .net, assemblies

我正在为另一个强命名的应用程序开发插件，因此任何引用它的插件都需要为每个版本重新编译。

因此，我有一个登录到我的网站的库（不引用主应用程序），并且我已将其编译为 .dll

这是我在每个插件中用于登录和检查更新的代码：

```
var managerAssemblyPath = "Path to the .dll assembly";
var assembly = AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a => a.FullName.Equals("AssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"));
if (assembly == null)
{
    var assemblyBuffer = File.ReadAllBytes(managerAssemblyPath);
    assembly = Assembly.Load(assemblyBuffer);
}
var t = assembly.GetType("Namespace.Class");
if (t == null)
{
    var assemblyBuffer = File.ReadAllBytes(managerAssemblyPath);
    assembly = Assembly.Load(assemblyBuffer);
    t = assembly.GetType("Namespace.Class");
}
var methods = t.GetMethods();
var method = methods.Where(m => m.Name.Equals("CheckForUpdates")).ToArray()[1];
method.Invoke(null, new object[] { this.Id }); 
```

它确实完成了工作。正在加载的第一个插件将在第一个“if”条件中具有 assembly == null 并加载文件。然后它将获取类型并调用 CheckForUpdates 方法。当调用 CheckForUpdates 时，加载的类缓存任何其他插件所需的所有信息，以最大限度地减少网站流量（作为静态类）。

下一个插件通过 FullName 找到程序集，但没有找到类型。因为它没有找到类型，所以它再次加载程序集。这就是问题所在。因为它再次加载程序集，所以它没有使用第一个插件缓存的信息，而是再次登录到网站。

所以安装了 5 个插件，它会登录网站 5 次，这并不是很理想。

我更喜欢从 dll 读取字节然后加载字节，因为这样文件不会被锁定，通常我会运行许多应用程序实例。

谁能帮助我如何确保程序集只加载一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T01:40:03.893

.Net 根据包括程序集路径的证据加载程序集。从字节流加载程序集绕过了验证过程的该步骤，因此 .Net 将每个加载的实例视为一个单独的沙盒实例，这会导致很多不愉快。

# python - WindowsError: [错误 193] %1 不是 Python 中的有效 Win32 应用程序

> ID：15374710
> 
> 赞同：4
> 
> 时间：2013-03-13T00:13:48.997
> 
> 标签：python, 64-bit, runtime-error, pyscripter

我希望在 64 位窗口上的 Python 2.7 中导入[liblas](http://www.liblas.org/tutorial/python.html)模块。如果我使用 IDLE (Python GUI) 导入模块，我没有问题。

如果我使用[PyScripter](https://code.google.com/p/pyscripter/downloads/detail?name=PyScripter-v2.5.3-x64-Setup.exe&can=2&q=) “PyScripter-v2.5.3-x64-Setup.exe”，我会收到此错误消息。

```
>>> import liblas
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\liblas\__init__.py", line 2, in <module>
    from core import get_version
  File "C:\Python27\lib\site-packages\liblas\core.py", line 138, in <module>
    las = ctypes.CDLL(os.path.join(local_dlls, lib_name))
  File "C:\Python27\Lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 193] %1 is not a valid Win32 application 
```

我在 PyScripter 中多次使用 liblas 没有问题，现在我可以加载所有标准模块（例如：numpy、GDAL 等），但是今晚（我需要完成分析！！！）我有这个不便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:41:04.960

请确保拥有 Python 2.7 64b 版本 :) 或者即使您正在使用 64b 操作系统，也请使用 PyScripter 的 x86 (AKA 32b) 版本

**编辑 1（与 Gianni 进行评论交流后）**

应该从 32b/64b 构建的意义上验证他/她的*整个*Python 进程是由相同实体“组成”的（例如，如果您的 Python 解释器是 32b 的，那么它必须使用来自编译为 32b 的 C dll Python 扩展的 C 类型dll）。

在我们的示例（liblas）中，应该去`C:\Python27\lib\site-packages\liblas`，找到扩展 dll 并通过[dumpbin](http://www.mohid.com/wiki/index.php?title=Dumpbin)查看它的类型，这是一些演示图片：

![在此处输入图像描述](../Images/ab335cf4c7cbd79154abb9fbbd3b4a7b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-24T14:01:40.290

由于 Python 尝试运行的 DLL 已在较新版本的 C++ 上编译，也可能导致此错误。确保您运行的是最新版本的 Microsoft C++ Distribution。

您可以在 Python 终端窗口中看到您正在运行的版本（以粗体突出显示）

Python 3.5.1 (v3.5.1:37a07cee5969, Dec 6 2015, 01:38:48) [ **MSC v.1900 32 bit (Intel)** ] on win32

在这里下载

[https://www.microsoft.com/en-us/download/details.aspx?id=48145](https://www.microsoft.com/en-us/download/details.aspx?id=48145)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-06T17:17:02.783

您可能正在使用 64 位 Python。您应该安装**32 位**版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-26T14:32:32.200

如果您也遇到此错误，请查看您的 python.exe 文件。

就我而言，它已损坏，如下所示：

[![在此处输入图像描述](../Images/3073fe87e4df6e467d285f8611bca49f.png)](https://i.stack.imgur.com/O2eJO.png)

所以我从另一个venv复制并重新安装了依赖项。

然后它起作用了:)

# objective-c - 如果应用程序启动时没有打开文档，如何在启动时显示欢迎屏幕？

> ID：15374711
> 
> 赞同：6
> 
> 时间：2013-03-13T00:13:51.870
> 
> 标签：objective-c, macos, cocoa

Xcode 有一个非常漂亮的屏幕，当您第一次启动它时会显示它；它会显示您最近的项目以及为您提供的资源，但仅当您在启动时没有打开文档时才会显示。我想要一个类似的（虽然不太复杂）欢迎屏幕。我已经设计了它并在一个 .nib 文件中，但我想知道当用户打开应用程序而没有以前打开的文档时，我将如何编写它。

这是我指的屏幕（显示我最近的项目）：

![Xcode 开始画面](../Images/635ce302bae9f6c0cd14f282e5730dee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:09:48.360

我假设 OS X 的`[NSUserDefaults standardUserDefaults]`工作方式与 iOS 相同，在这种情况下，您可以执行以下操作：

```
if (![[NSUserDefaults standardUserDefaults] objectForKey:@"opened"]) {
   //load your special view here; no documents have been opened;
}
else {
   //open up some previously opened document.
} 
```

打开文档后，您可以执行以下操作：

```
[[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"opened"]; //doesn't matter what you set as long as something is set. 
```

然后，如果您想重置它（例如，如果所有文档都已关闭），您可以这样做：

```
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"opened"]; 
```

# mysql - 执行这些 MySQL 查询的更好方法？

> ID：15374717
> 
> 赞同：0
> 
> 时间：2013-03-13T00:14:26.270
> 
> 标签：mysql, sql

好吧，让我解释一下我的问题：

我得到了这些表：

## 产品

*   product_id
*   产品名称

## 照片

*   照片网址
*   product_id

## 视频

*   视频网址
*   product_id

我想加入列出产品的所有照片和视频......好吧，我可以用两种方式来做：

第一的：

```
select b.photo_url,c.video_url from product a left join photo b using(product_id) left join video c using(product_id) where a.product_id=X; 
```

或执行两个查询，例如：

```
select b.photo_url from product a left join photo b using(product_id) where a.product_id=X;
select c.video_url from product a left join video c using(product_id) where a.product_id=X; 
```

好吧，第一个查询看起来更好，但是如果我有这个产品的 2 个视频和 3 张照片，我需要用 php 解析它，以免重复记录；无论如何，我想知道这些查询哪个更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:21:29.920

除了普通产品外，我看不到特定视频和特定照片之间的任何联系。你说的可能有多个。那么为什么不做工会呢？

```
SELECT photo_url FROM photo WHERE product_id=X
UNION
SELECT video_url FROM video WHERE product_id=X; 
```

如果您担心区分 URL 类型，请添加一列：

```
SELECT photo_url AS url, 'photo' AS url_type FROM photo WHERE product_id=X
UNION
SELECT video_url AS url, 'video' AS url_type FROM video WHERE product_id=X; 
```

# magento - Magento 翻译

> ID：15374722
> 
> 赞同：0
> 
> 时间：2013-03-13T00:14:52.563
> 
> 标签：magento, language-translation

我很难将 Magento 翻译成我的当地语言。

我看到 Magento 翻译位于 app/locale 下，我可以轻松找到该 CSV 翻译文件中的所有字段，但似乎我的前端实际上在某些部分显示了一些其他文本。

当我翻译一些短语时，大部分内容都发生了变化，但有些文本却没有。

即在购物车页面上，当我翻译有关优惠券的部分时

> 您已移除优惠券 - 已翻译 您已申请优惠券 - 已翻译不生效

很奇怪。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-10T09:04:39.463

如果您的网站需要翻译但翻译包没有完全翻译，那么内联翻译是非常好的功能。您可以按照以下步骤操作 -

1.  转到 Magento 管理系统 > 配置 > 开发人员。此处从 Translate Inline > Enabled for Frontend 设置为“是”。

2.  转到前端并从下拉列表中选择所需的语言。文本周围会出现红色矩形笔划，当您将鼠标悬停时，会出现小书图标。只需单击图标并插入所需的文本。

# android - 为什么安卓应用程序扩展名为 .apk？为什么不是 .jar 或 .jad？

> ID：15374731
> 
> 赞同：-4
> 
> 时间：2013-03-13T00:15:42.583
> 
> 标签：android, file-extension, apk

为什么谷歌使用`.apk`他们的应用程序文件扩展名？为什么他们不使用`.jar`，`.jad`或任何其他文件扩展名？

我尽可能远的唯一原因是

*   `.apk`表示 Android 应用程序包。

我知道他们像所有其他压缩器一样捆绑了应用程序包。但仍然必须有其他几个原因。

`APK`文件是基于`JAR`文件格式的 ZIP 文件格式的包。为什么谷歌当时没有使用`.jar`？

请告诉我这些谷歌`.apk`只选择android应用程序扩展？？为什么没有其他文件扩展名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T00:18:57.647

> 为什么谷歌使用 .apk 作为他们的应用程序文件扩展名？

他们需要使用一些文件扩展名。由于 APK 的结构与 JAR 或 JAD（不同的内容）不同，因此重用这些扩展对他们来说真的很愚蠢。因此，他们选择了更独特的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T00:33:50.337

`.jar`代表 Java Archieve，`.jad`代表 Java 描述，与`.apk`代表应用程序包相同

Android 应用程序包含完整的包，这就是为什么它的扩展是`.apk`应用程序包的缩写形式。

# .htaccess - htaccess 语言重定向

> ID：15374732
> 
> 赞同：0
> 
> 时间：2013-03-13T00:15:47.397
> 
> 标签：.htaccess, redirect, rewrite, multilingual

我一直在这里寻找答案，但我无法得到我需要的东西。我想将页面重定向到“l”语言变量。该网站是西班牙语和英语的。

所以我需要这样的模式：

```
mysite.com/page1/**?l=en**
mysite.com/page2/page2b**?l=en** 
```

重定向到：

```
mysite.com**/en/**page1
mysite.com**/en/**page2/page2b 
```

谁能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:07:44.233

这条规则：

```
RewriteCond %{QUERY_STRING} ^l=([^&]+)
RewriteRule ^(.*)$ /%1/$1? [L,R] 
```

或者这条规则：

```
RewriteCond %{THE_REQUEST} (GET|HEAD)\ /([^\?]+)\?l=([^&]+)
RewriteRule ^(.*)$ /%3/$1? [L,R] 
```

两者都会这样做，因此当有人`http://domain.com/blah?l=foo`在浏览器的 URL 地址栏中键入类似内容时，该规则会将*浏览器*重定向到，`http://domain.com/foo/blah`并且该 URL 将显示在地址栏中。

# c++ - 断言是错误的，用 cout 证明

> ID：15374736
> 
> 赞同：4
> 
> 时间：2013-03-13T00:16:01.593
> 
> 标签：c++, assert

当我运行它时，在 main() 中 cout 打印 5.395。但是断言说它失败了！这真是令人难以置信，为什么会发生这种情况？

```
#include <iostream>
#include <cassert>

using namespace std;

const float A = 1.6;
const float C = 1.55;
const float G = 2.2;
const float T = 1.23;

char empty[18];
int arraySize;

void copyArray(char sourceArray[], char targetArray[], int size) {
    for(int i=0;i<size;i++) {
        targetArray[i] = sourceArray[i];
        }
    }

double getAvgDensity(char aminoAcid) {

char aminoUpper = toupper(aminoAcid);
aminoToArray(aminoUpper);
    double counter = 0;
    int codonTotal = arraySize / 3.0;
    if (arraySize == 0)
        return 0;
    else
    {
    for (int i = 0; i < arraySize; i++) {
        counter += charToDouble(empty[i]);
        }

    return (counter / codonTotal);
    }

}

int main()
{
    cout << getAvgDensity('A') << endl;  // prints 5.395
    assert(getAvgDensity('A')==5.395);
    return 0;
} 
```

编辑：感谢所有答案，我只是乘以 1000，转换为 int，转换回 double 并除以 1000。:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T00:21:20.413

啊，浮点数。

比如说，实际的回报`getAvgDensity()`是`5.395000000000000000000000001`。这不是技术上的`== 5.395`，是吗？当然，打印会丢弃所有那些讨厌的尾随小数，但值仍然不同。

使用浮点数时，您必须自己决定什么是“相等”的可接受定义。手动舍入数字，或将其与`<=`/`>=`和合适的误差范围进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:16:47.087

这已经得到了回答，但我会加两分钱。如果您打算经常这样做，您可能会发现创建一个比较双精度数的函数很有用。这个想法是检查`fabs(a-b) < epsilon`哪里`epsilon`是一个代表可容忍错误量的小值。

```
bool is_equal( double a, double b, const double epsilon = 1e-5 )
{
    double c = a - b;
    return c < epsilon && -c < epsilon;  // or you could use fabs(c) < epsilon
} 
```

那么这只是一个例子：

```
assert( is_equal(getAvgDensity('A'), 5.395) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:24:50.537

原因是 cout 默认不会打印到那么高的精度。尝试以下操作：

```
int main()
{
    std::cout.precision(25);
    cout << getAvgDensity('A') << endl;  // prints 5.395
    assert(getAvgDensity('A')==double(5.395));
    return 0;
} 
```

# php - php中的MVC，类别模型？

> ID：15374743
> 
> 赞同：1
> 
> 时间：2013-03-13T00:17:05.400
> 
> 标签：php, model-view-controller, model

我正在用 PHP 构建我的第一个小应用程序并尝试做 MVC。

我的网站需要大量的城市和类别。

我的问题是一个相当简单的问题，但是由于数组是网站的数据，所以它只是 php 数组，应该将数组放入自己的模型中吗？

据我了解，模型用于业务逻辑和访问数据，因为城市和类别基本上是数据，是否有理由证明它们有模型？

如果答案是否定的，为什么，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:21:26.563

模型负责检索、编辑、删除和一般管理数据。数据通常来自一些静态源，例如数据库、XML 文件等。

您应该创建与这些数据交互的模型类。这就是模型应该做的事情。显然，您可以按照您想要的方式将数据保存在私有成员、数组、其他类等中。

您可能想知道为什么这是一个好主意？好吧，数据应该存储在类中，因为您可以设置类成员的可见性。数据项通常是私有的，因此您可以决定允许哪些操作，从而带来更好的设计和安全性。

此外，模型通常不包含任何逻辑。它是处理逻辑的控制器。在 MV（模型/视图）架构中，模型实现了一些逻辑。

您还可以查看流行的框架如何处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:27:59.670

老实说，在开始构建 MVC 表单之前，您需要学习更多的理论。MVC 不以任何方式连接到业务模型。这是软件架构。是的，控制器可能扮演业务层的角色，但这不是解释它的方式。

我强烈建议你这样做：

使用一段时间的框架，如 Symphony2 或 ZF。他们会默认强制你进入 mvc，这将提高你的实践知识。

阅读本书/圣经[设计模式](http://c2.com/cgi/wiki?DesignPatternsBook)

# java - 为什么引用传递不起作用？

> ID：15374745
> 
> 赞同：0
> 
> 时间：2013-03-13T00:17:18.377
> 
> 标签：java, reference

我知道一切都是在java中通过引用传递的。但为什么它在这种情况下不起作用？我原以为它应该打印出“Hate”而不是“Love”。

```
class Test {
    static class Str {
        public String str;

        public void set(String str) {
            this.str = str;
        }
    }

    public static void main(String[] args) {
        Str s = new Str();

        String str = "Love";

        s.set(str);
        str = "Hate";

        System.out.println(s.str);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:19:21.667

在`main`函数中，`str`只存储对字符串的引用。这样做`str = "hate"`时，引用会更改，但原始对象`"love"`已存储`s.str`并保留在那里。

请参阅[此](https://stackoverflow.com/a/40523/567555)以获得更多说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:20:00.383

使用`str = "Hate"`，您只更改了`str`对“仇恨”的本地引用；`s.str`仍然指的是“爱”，所以这就是印刷的内容。

# ruby-on-rails - 如何使用 RSpec 在范围内模拟 any_instance？

> ID：15374749
> 
> 赞同：2
> 
> 时间：2013-03-13T00:17:32.730
> 
> 标签：ruby-on-rails, ruby, rspec, mocking, bdd

我正在尝试编写一个规范，该规范期望在范围内的所有实例上调用一个方法。找不到优雅的方法来做到这一点。

这是我的代码的简化表示：

```
class MyClass < ActiveRecord::Base

scope :active, where(:status => 'active')
scope :inactive, where(:status => 'inactive')

def some_action
  # some code
end 
```

这个类被另一个调用的类`some_action`使用`MyClass.all`：

```
class OtherClass

def other_method
  MyClass.all.each do |item|
    item.some_action
  end
end 
```

我想将其更改为：

```
class OtherClass

def other_method
  MyClass.active.each do |item|
    item.some_action
  end
end 
```

为了测试这种行为，我可以简单地`MyClass.stub(:active)`返回一个存根数组并期望`some_action`每个存根。但我不喜欢这种方法，因为它暴露了太多的实现细节。

我喜欢的东西会更优雅一点`any_instance_in_scope`。然后我可以简单地将我的规范写为：

```
MyClass.any_instance_in_scope(:active).should_receive(:some_action) 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T01:48:50.683

首先，`MyClass.all.some_action`is not going to work since `MyClass#some_action`is an instance method，同时`MyClass#all`返回一个`Array`-- 所以当你这样做时，`MyClass.all.some_action`你实际上是在调用`Array#some_action`.

另外，注意`MyClass.all`并`MyClass.active`返回不同的类：

```
MyClass.active.class # => ActiveRecord::Relation
MyClass.active.all.class # => Array 
```

我不确定你`some_action`应该做什么......我想你可能想要做的一些选择：

# 选项#1：缩小数据库查询

如果`some_action`正在过滤数组，您应该将其转换为另一个范围，执行以下操作：

```
class MyClass < ActiveRecord::Base
  scope :active, where(:status => 'active')
  scope :inactive, where(:status => 'inactive')
  scope :some_action, ->(color_name) { where(color: color_name) }
end 
```

然后使用`MyClass.active.some_action('red').all`. 如果您只想要第一个结果，`MyClass.active.some_action('red').first`.

## 如何`scope`使用 RSpec进行测试

这是一个很好的答案（以及原因）：[使用 RSpec 测试命名范围](https://stackoverflow.com/questions/6485379/testing-named-scopes-with-rspec)。

# 选项 #2：在实例之上执行操作

假设您确实希望将其`MyClass#some_action`定义为实例方法。然后，您可以尝试这样做：

```
class MyClass < ActiveRecord::Base
  scope :active, where(status: 'active')
  scope :inactive, where(status: 'inactive')

  def some_action
    self.foo = 'bar'
    self
  end
end 
```

在这种情况下，您可以使用 执行它`MyClass.active.last.some_action`，仅仅是因为`#last`将返回一个实例，而不是整个数组。

## 如何`some_action`使用 RSpec进行测试

我相信你应该简单地用期望来测试它：

```
MyClass.should_receive(:some_action).at_least(:once)
MyClass.active.last.some_action 
```

对此的补充讨论：[How to say any_instance should_receive any numbered in RSpec](https://stackoverflow.com/questions/9800992/how-to-say-any-instance-should-receive-any-number-of-times-in-rspec)

## 选项#3：集体行动

假设你真的想跑步`MyClass.active.some_action`。我建议你先试试这个（与选项 #2 相同的例子）：

```
class MyClass < ActiveRecord::Base
  scope :active, where(status: 'active')
  scope :inactive, where(status: 'inactive')

  def some_action
    self.foo = 'bar'
    self
  end
end 
```

然后运行`MyClass.active.all.map{|my_class| my_class.some_action }`​​.

现在，如果你*真的*想实现`MyClass.active.some_action`——你想`some_action`在 ActiveRecord::Relation 的所有实例上执行（**我不推荐**），这样做：

```
class MyClass < ActiveRecord::Base
  scope :active, where(status: 'active')
  scope :inactive, where(status: 'inactive')

  def some_action
    # really do it
  end
end 
```

和...

```
class ActiveRecord::Relation
  # run some_action over all instances
  def some_action
    to_a.each {|object| object.some_action }.tap { reset }
  end
end 
```

同样，我**不建议这样做**。

## 如何`some_action`使用 RSpec进行测试

与选项 #2 相同的情况：

```
MyClass.should_receive(:some_action).at_least(:once)
MyClass.active.last.some_action 
```

* * *

*注意：所有代码都使用 Ruby 2.0.0-p0。安装使用，很好玩！:-)*

# linux - 在 Linux 上的 bash 中获取昨天的日期，DST 安全

> ID：15374752
> 
> 赞同：192
> 
> 时间：2013-03-13T00:17:51.107
> 
> 标签：linux, bash

我有一个在 Linux 上运行的 shell 脚本，并使用此调用以`YYYY-MM-DD`格式获取昨天的日期：

```
date -d "1 day ago" '+%Y-%m-%d' 
```

它在大多数情况下都有效，但是当脚本在昨天早上运行时`2013-03-11 0:35 CDT`它返回`"2013-03-09"`而不是`"2013-03-10"`.

据推测，夏令时（昨天开始）是罪魁祸首。我猜它的`"1 day ago"`实施方式减去了 24 小时，而 24 小时前`2013-03-11 0:35 CDT`是`2013-03-09 23:35 CST`，这导致了`"2013-03-09"`.

那么在 Linux 上以 bash 格式获取昨天日期的 DST 安全的好方法是什么？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2013-03-13T00:23:13.677

我认为这应该有效，无论您运行它的频率和时间如何......

```
date -d "yesterday 13:00" '+%Y-%m-%d' 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2014-03-13T09:23:37.670

在**Mac OSX**下，日期的工作方式略有不同：

对于昨天

```
date -v-1d +%F 
```

上周

```
date -v-1w +%F 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-13T00:24:25.637

这也应该有效，但也许太多了：

```
date -d @$(( $(date +"%s") - 86400)) +"%Y-%m-%d" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-13T00:30:25.243

如果您确定脚本在一天的前几个小时运行，您可以简单地执行

```
 date -d "12 hours ago" '+%Y-%m-%d' 
```

顺便说一句，如果脚本每天在 00:35 运行（通过 crontab？），您应该问问自己，如果 DST 更改在那一小时内会发生什么；脚本无法运行，或在某些情况下运行两次。不过，现代的实现在这方面`cron`非常[聪明。](https://stackoverflow.com/questions/13195999/daylight-savings-and-cron)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-19T13:20:04.367

```
date -d "yesterday" '+%Y-%m-%d' 
```

**以后要使用它：**

```
date=$(date -d "yesterday" '+%Y-%m-%d') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-01-22T12:55:43.933

这是一个同样适用于 Solaris 和 AIX 的解决方案。

操纵时区可以在几个小时内更改时钟。由于夏令时，24 小时前可以是今天或前天。

你确定昨天是 20 或 30 小时前。哪一个？好吧，最近的一个不是今天。

```
echo -e "$(TZ=GMT+30 date +%Y-%m-%d)\n$(TZ=GMT+20 date +%Y-%m-%d)" | grep -v $(date +%Y-%m-%d) | tail -1 
```

bash 需要 echo 命令中使用的 -e 参数，但不适用于 ksh。在 ksh 中，您可以使用不带 -e 标志的相同命令。

当您的脚本将在不同的环境中使用时，您可以使用#!/bin/ksh 或#!/bin/bash 启动脚本。您还可以将 \n 替换为换行符：

```
echo "$(TZ=GMT+30 date +%Y-%m-%d)
$(TZ=GMT+20 date +%Y-%m-%d)" | grep -v $(date +%Y-%m-%d) | tail -1 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-03-16T16:25:57.793

您可以使用

```
date -d "30 days ago" +"%d/%m/%Y" 
```

要获取 30 天前的日期，同样您可以将 30 替换为 x 天数

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-29T08:26:41.323

**只需使用`date`可靠的秒数：**

正如您正确指出的那样，如果您依赖英语时间算术，则有关基础计算的许多细节都将被隐藏。例如`-d yesterday`, 并且`-d 1 day ago`会有不同的行为。

相反，您可以可靠地依赖自 unix 纪元 UTC 以来的（精确记录的）秒数，并使用 bash 算法来获得您想要的时刻：

```
date -d @$(( $(date +"%s") - 24*3600)) +"%Y-%m-%d" 
```

[另一个答案](https://stackoverflow.com/a/15374823/5556676)中指出了这一点。这种形式在具有不同命令行标志的平台上更便携，与`date`语言无关（例如，法语语言环境中的“昨天”与“hier”），坦率地说（从长远来看）更容易记住，因为好吧，你已经知道了。否则，您可能会不断问自己：“是这样`-d 2 hours ago`还是`-d 2 hour ago`再次？” 或“是我想要的吗？”）`-d yesterday`。`-d 1 day ago`这里唯一棘手的地方是`@`.

**用 bash 武装，别无其他：**

仅在 bash 上进行 Bash，您还可以通过 printf 内置函数获取昨天的时间：

```
 %(datefmt)T
     causes printf to output the date-time string resulting from using
     datefmt as a format string for strftime(3).  The  corresponding  argu‐
     ment  is an integer representing the number of seconds since the
     epoch.  Two special argument values may be used: -1 represents the
     current time, and -2 represents the time the shell was invoked.
     If no argument is specified, conversion behaves as if -1 had
     been  given.
     This is an exception to the usual printf behavior. 
```

所以，

```
# inner printf gets you the current unix time in seconds
# outer printf spits it out according to the format
printf "%(%Y-%m-%d)T\n" $(( $(printf "%(%s)T" -1) - 24*3600 )) 
```

或者，等效地使用临时变量（外部子外壳可选，但保持环境变量清洁）。

```
(
  now=$(printf "%(%s)T" -1);
  printf "%(%Y-%m-%d)T\n" $((now - 24*3600));
) 
```

*注意：尽管手册页声明`%()T`格式化程序的任何参数都不会假定为默认值`-1`，但我似乎得到了一个 0 代替（谢谢，bash 手册版本 4.3.48）*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-18T07:14:07.540

## 因为这个问题被标记为[bash](/questions/tagged/bash "显示标记为“bash”的问题") *"DST safe"*

并且使用 fork 命令来暗示延迟，有一种使用**纯 bash**内置`date`的简单且更有效的方法：

 **```
printf -v tznow '%(%z %s)T' -1
TZ=${tznow% *} printf -v yesterday '%(%Y-%m-%d)T' $(( ${tznow#* } - 86400 ))
echo $yesterday 
```

这比必须***分叉***到更系统友好的方式要快得多`date`。

**从[bash](/questions/tagged/bash "显示标记为“bash”的问题") V>=5.0**开始，有一个新变量`$EPOCHSECONDS`

```
printf -v tz '%(%z)T' -1
TZ=$tz printf -v yesterday '%(%Y-%m-%d)T' $(( EPOCHSECONDS - 86400 ))
echo $yesterday 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-18T08:27:15.907

您可以使用：

```
date -d "yesterday 13:55" '+%Y-%m-%d' 
```

或者您想要检索的任何时间都将由 bash 检索。

月份：

```
date -d "30 days ago" '+%Y-%m-%d' 
```**

# eclipse - Eclipse UML2：获取配置文件中定义的属性的值

> ID：15374753
> 
> 赞同：1
> 
> 时间：2013-03-13T00:17:55.320
> 
> 标签：eclipse, uml, profile, emf, papyrus

我是 eclipse UML2 的新手，遇到了以下问题。

我定义了一个具有两个原型的配置文件：ServiceRequest 和 TransitionEdge。ServiceRequest 使用两个附加属性（cpu、内存）扩展了 Action 元类，TransitionEdge 使用称为“概率”的附加属性扩展了 ActivityEdge 元类。所有这些属性都是定义为 PrimitiveType 的 float 类型。

我创建了一个应用了配置文件和原型的活动图。在活动图中，每条边都是配置文件中定义的一个TransitionEdge，并且已经为概率属性分配了一个值。

有了配置文件和活动模型，我使用以下 Java 代码来加载它们。

```
// Load the profile
URI profileUri = URI.createURI(PROFILE_NAME);
ResourceSet profileSet = new ResourceSetImpl();
profileSet.getPackageRegistry().put(UMLPackage.eNS_URI, UMLPackage.eINSTANCE);
profileSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put(UMLResource.FILE_EXTENSION, UMLResource.Factory.INSTANCE);
profileSet.createResource(profileUri);
Resource profileResource = profileSet.getResource(profileUri, true);
Profile profile = (Profile)EcoreUtil.getObjectByType(profileResource.getContents(), UMLPackage.Literals.PROFILE);
Profile sopraProfile = (Profile)profile.getOwnedMember(PROFILE_NAME);
Stereotype serviceRequestStereotype = (Stereotype)sopraProfile.getOwnedMember(STEREOTYPE_SERVICE_REQUEST); 
Stereotype transitionEdgeStereotype = (Stereotype)sopraProfile.getOwnedMember(STEREOTYPE_TRANSITION_EDGE); 

// Load the model
URI modelUri = URI.createURI(MODEL_NAME);
ResourceSet modelSet = new ResourceSetImpl();
modelSet.getPackageRegistry().put(UMLPackage.eNS_URI, UMLPackage.eINSTANCE);
modelSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put(UMLResource.FILE_EXTENSION, UMLResource.Factory.INSTANCE);
modelSet.createResource(modelUri);
Resource modelResource = modelSet.getResource(modelUri, true);
Model model = (Model)EcoreUtil.getObjectByType(modelResource.getContents(), UMLPackage.Literals.MODEL);

EList<Element> elements = model.getOwnedElements();
for(Element e : elements){
     if(e instanceof Activity){
    Activity activity = (Activity)e;
    EList<ActivityEdge> edges = activity.getEdges();
    for(ActivityEdge edge : edges){
        System.out.println(edge.getValue(transitionEdgeStereotype, "probability"));
    }
     }
} 
```

对元素调用 getValue 方法时会引发异常。以下是错误信息：

```
org.eclipse.uml2.uml.internal.impl.PropertyImpl@7a6d6a3f (name: base_ActivityEdge, visibility: <unset>) (isLeaf: false) (isStatic: false) (isOrdered: false, isUnique: true, isReadOnly: false) (aggregation: none, isDerived: false, isDerivedUnion: false, isID: false)

org.eclipse.uml2.uml.internal.impl.PropertyImpl@255a8ce4 (name: probability, visibility: public) (isLeaf: false) (isStatic: false) (isOrdered: false, isUnique: true, isReadOnly: false) (aggregation: none, isDerived: false, isDerivedUnion: false, isID: false)

Exception in thread "main" java.lang.IllegalArgumentException: org.eclipse.uml2.uml.internal.impl.StereotypeImpl@442f4161 (name: TransitionEdge, visibility: <unset>) (isLeaf: false, isAbstract: false, isFinalSpecialization: false) (isActive: false)
    at org.eclipse.uml2.uml.internal.operations.ElementOperations.getValue(ElementOperations.java:527)
    at org.eclipse.uml2.uml.internal.impl.ElementImpl.getValue(ElementImpl.java:296)
    at test.Test.main(Test.java:68) 
```

我无法弄清楚发生了什么事。有什么建议么？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:06:05.890

Element.getValue(...) 方法期望传递实际的 Stereotype 实例，该实例与模型一起使用。

在第一个块中，您从一个单独的 ResourceSet 中检索您的 Stereotype 实例，而不是用于第二个块中的模型的资源集。因此，在加载模型时会再次加载配置文件，并创建另一个 Stereotype 实例。您需要将其传递给 Element.getValue(...)。

这是最安全的方法：

```
Activity activity = ...
Stereotype transitionEdgeStereotype = 
    activity.getAppliedStereotype(STEREOTYPE_TRANSITION_EDGE);
if (transitionEdgeStereotype != null) {
    System.out.println(edge.getValue(transitionEdgeStereotype, "probability"));
} 
```

**编辑：**在这种情况下，STEREOTYPE_TRANSITION_EDGE 需要是包含配置文件名称的构造型的完整限定名称，例如 ServiceProfile::TransitionEdge。

# php - jQuery插件验证电子邮件检查是否还有疯狂的怪异

> ID：15374755
> 
> 赞同：0
> 
> 时间：2013-03-13T00:18:08.743
> 
> 标签：php, ajax, validation, json, challenge-response

我已经成功实现了 Jquery 验证插件[http://posabsolute.github.com/jQuery-Validation-Engine/](http://posabsolute.github.com/jQuery-Validation-Engine/)但我现在正试图让 ajax 数据库电子邮件检查工作（电子邮件存在/电子邮件可用）并且我已经写了一些php 脚本来完成这项工作。它有点工作，但我从我的 IF ELSE 语句中得到了最意想不到的异端奇怪行为（对我来说似乎真的很疯狂）。观察###标记的评论

PHP 代码：查看 IF ELSE 语句

```
/* RECEIVE VALUE */
$validateValue = $_REQUEST['fieldValue'];
$validateId = $_REQUEST['fieldId'];

$validateError = "This username is already taken";
$validateSuccess = "This username is available";

/* RETURN VALUE */
$arrayToJs = array();
$arrayToJs[0] = $validateId;

$req = "SELECT Email
  FROM business
  WHERE Email = '$validateValue'";

$query = mysql_query($req);
while ($row = mysql_fetch_array($query)) {
  $results = array($row['Email']);
}

if (in_array($validateValue, $results)) {

   $arrayToJs[1] = false;
   echo json_encode($arrayToJs); // RETURN ARRAY WITH ERROR ### popup shows "validating, please wait" then "This username is already taken" when email typed is in database - i.e. Working
   file_put_contents('output.txt', print_r("1 in array - Email is Taken  " . $validateValue, true)); ### this runs!!

}else{

  $arrayToJs[1] = true; // RETURN TRUE
  echo json_encode($arrayToJs); // RETURN ARRAY WITH success ### popup shows "validating, please wait" when email typed is NOT in the database - i.e. not Working
  file_put_contents('output.txt', print_r("2 else - Email is available  " .   $validateValue, true)); 
  //### THIS RUNS TOO !!!!!!!!!!!!! i.e. echo json_encode($arrayToJs) wont work for both.. If I change (in_array()) to (!in_array()) i get the reverse when email is in database. 
  //i.e. only the else statements echo json_encode($arrayToJs) runs and the popup msg shows up green "This username is available" crazy right??? 
  //so basically IF ELSE statements run as expected (confirmed by output.txt) but only one echo json_encode($arrayToJs) will work.!!!! 
  //If i remove the json_encode($arrayToJs) statements and place it once after the IF ELSE statement i get the same problem.
  //both $arrayToJs[1] = false; and $arrayToJs[1] = true; can work separately depending on which is first run IF or ELSE but they will not work in the one after another;
  } 
```

这是代码的其余部分-->

1-HTML 表单输入代码：

```
 <tr>
        <td> <Label>Business Email</Label>
            <br>
            <input type="text" name="Email" id="Email" class="validate[required,custom[email],ajax[ajaxUserCallPhp]] text-input">
        </td>
    </tr> 
```

2-jquery.validationEngine.js 中的相关 JQUERY 代码：

```
$.ajax({
            type: type,
            url: url,
            cache: false,
            dataType: dataType,
            data: data,
            form: form,
            methods: methods,
            options: options,
            beforeSend: function() {
                return options.onBeforeAjaxFormValidation(form, options);
            },
            error: function(data, transport) {
                methods._ajaxError(data, transport);
            },
            success: function(json) {
                if ((dataType == "json") && (json !== true)) {
                    // getting to this case doesn't necessary means that the form is invalid
                    // the server may return green or closing prompt actions
                    // this flag helps figuring it out
                    var errorInForm=false;
                    for (var i = 0; i < json.length; i++) {
                        var value = json[i];

                        var errorFieldId = value[0];
                        var errorField = $($("#" + errorFieldId)[0]);

                        // make sure we found the element
                        if (errorField.length == 1) {

                            // promptText or selector
                            var msg = value[2];
                            // if the field is valid
                            if (value[1] == true) {

                                if (msg == ""  || !msg){
                                    // if for some reason, status==true and error="", just close the prompt
                                    methods._closePrompt(errorField);
                                } else {
                                    // the field is valid, but we are displaying a green prompt
                                    if (options.allrules[msg]) {
                                        var txt = options.allrules[msg].alertTextOk;
                                        if (txt)
                                            msg = txt;
                                    }
                                    if (options.showPrompts) methods._showPrompt(errorField, msg, "pass", false, options, true);
                                }
                            } else {
                                // the field is invalid, show the red error prompt
                                errorInForm|=true;
                                if (options.allrules[msg]) {
                                    var txt = options.allrules[msg].alertText;
                                    if (txt)
                                        msg = txt;
                                }
                                if(options.showPrompts) methods._showPrompt(errorField, msg, "", false, options, true);
                            }
                        }
                    }
                    options.onAjaxFormComplete(!errorInForm, form, json, options);
                } else
                    options.onAjaxFormComplete(true, form, json, options);

            }
        }); 
```

jquery.validationEngine-en.js 中 ajaxUserCallPhp 的 3-相关代码：

```
"ajaxUserCallPhp": {
                "url": "validation/php/ajaxValidateFieldUser.php",
                // you may want to pass extra data on the ajax call
                "extraData": "name=eric",
                // if you provide an "alertTextOk", it will show as a green prompt when the field validates
                "alertTextOk": "* This username is available",
                "alertText": "* This user is already taken",
                "alertTextLoad": "*Validating, please wait"
            }, 
```

我确定问题出在这个回声上。

回声 json_encode($arrayToJs)

请帮助我在这方面花了很长时间，它几乎可以完全正常工作。

澄清一下-我基本上是在尝试对其进行编码，以便如果我在数据库中键入一封电子邮件，它会显示红色“此用户名已被使用”，然后如果我将输入框编辑为不在数据库中的电子邮件，它会更改为绿色“用户名是可用”目前只有一个 json_encode 将在任何情况下运行，无论我如何更改 if else 语句 -</p>

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T16:22:44.713

我能够在不修改语言文件的情况下更改 ajaxusercallphp、ajaxnamecallphp 的 ajax url...您需要在 jaquery.validateEngine.js 中搜索此行

查找：_ajax:function(field,rules,I,options)

然后向下滚动到 ajax 请求 .ie $.ajax

并将 url:rule.url 更改为 options.ajaxCallPhpUrl

然后您所要做的就是将 url 作为一个选项包含在内，如下所示：

JQuery("#formid").validateEngine('attach', {ajaCallPhpUrl : "yoururl goes here", onValidationComplete:function(form,status){ }) 我能够在不修改语言文件的情况下更改 ajaxusercallphp、ajaxnamecallphp 的 ajax url ...您需要在 jaquery.validateEngine.js 中搜索此行

查找：_ajax:function(field,rules,I,options)

然后向下滚动到 ajax 请求 .ie $.ajax

并将 url:rule.url 更改为 options.ajaxCallPhpUrl

然后您所要做的就是将 url 作为一个选项包含在内，如下所示：

JQuery("#formid").validateEngine('attach', {ajaCallPhpUrl : "你的网址在这里", onValidationComplete:function(form,status){ })

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:16:23.393

好的，在小提琴之后终于明白了。我发现 json_encode() 在发布任何错误或警告时返回 false。使用 xampp/php/logs/error_logs 文件中的 php 错误日志文件，我意识到只有当查询结果为 null 时才会出现错误，从而使 $results = null。这导致了一个输出错误，阻止 json_encode() 回显真，这就是为什么我只得到一个响应。

为了解决这个问题，我在查询到数组部分后使用以下代码确保 $result 数组不为空。

```
if(empty($results)){
   $results [0]= ("obujasdcb8374db");
} 
```

整个代码现在

```
$req = "SELECT Email
FROM business
WHERE Email = '$validateValue'";

$query = mysql_query($req);
while ($row = mysql_fetch_array($query)) {
$results[] = $row['Email'];
}

if(empty($results)){
  $results [0]= ("obujasdcb8374db");
}

if (in_array($validateValue, $results)) {
  $arrayToJs[1] = 0;
  echo json_encode($arrayToJs); // RETURN ARRAY WITH ERROR

} else {

  $arrayToJs[1] = 1; // RETURN TRUE
  echo json_encode($arrayToJs); // RETURN ARRAY WITH success
  } 
```

# php - Can I specify which key I want in a foreach loop?

> ID：15374757
> 
> 赞同：1
> 
> 时间：2013-03-13T00:18:21.270
> 
> 标签：php, arrays, foreach

If I have an array called `$animalarray` with keys `dog`, `cat`, `bird`, can I specify which key I want to use in a foreach loop?

I'm doing something like this right now but it just returns all the values from the array

```
foreach($animalarray as $species=>$bird)
{   
    echo $bird;
} 
```

I'd like this to only echo out the value under the key Bird, but this returns all values under all the keys.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T00:19:56.427

Why don't you just do `echo $animalarray['bird'];`?

You could also do this, but it's unnecessary:

```
foreach($animalarray as $species=>$bird) {   
    if ($species == 'bird') {
        echo $bird;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:21:45.780

Do it like this:

```
$allowedKeys = array('dog');

foreach($animalarray as $species=>$bird)
{   
    if(array_key_exists($species, $allowedKeys)) {
        echo $bird;
    }
} 
```

It will output matches only for dogs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:24:09.867

*   If animal array is from database, then select it with aditional condition.
*   Or you can use simple IF statement [http://www.php.net/manual/en/control-structures.if.php](http://www.php.net/manual/en/control-structures.if.php)

# android - BroadcastReceiver onReceive() 被调用两次

> ID：15374767
> 
> 赞同：9
> 
> 时间：2013-03-13T00:19:21.477
> 
> 标签：android, broadcastreceiver, android-download-manager

在我的应用程序中，我使用 DownloadManager 来下载 PDF，下载完成后它会通过 BroadcastReceiver 通知应用程序。我的问题是 BroadcastReceiver 的 onReceive() 方法被调用了两次。代码如下：

在我的列表适配器中，运行一个 for 循环来下载选定的 pdf。下载代码写在另一个类中，如下：

```
 public static void downloadCheat(final SherlockFragmentActivity activity, final String cheatName, String pathOnServer){

    Request request = new Request(
            Uri.parse(ApplicationConstants.CHEAT_DOWNLOAD_SERVER_URL
                    + "/" + pathOnServer + cheatName + ".pdf"));

    if(Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD_MR1) {
        request.setShowRunningNotification(true);
    }
    else {
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
    }

    final DownloadManager dm = (DownloadManager) activity
            .getSystemService(Context.DOWNLOAD_SERVICE);
    final long enqueue = dm.enqueue(request);

    BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            long i = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1);
            System.out.println(i);
            if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                Query query = new Query();
                query.setFilterById(enqueue);
                Cursor c = dm.query(query);

                if (c.moveToFirst()) {
                    int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                    if (DownloadManager.STATUS_SUCCESSFUL == c.getInt(columnIndex)) {
                    }
                }
                                    //create custom notification
            }
        }
    };

    activity.registerReceiver(receiver, new IntentFilter(
            DownloadManager.ACTION_DOWNLOAD_COMPLETE));
} 
```

我正在尝试为每个 pdf 下载添加通知。这与下载管理器自己的 HoneyComb 及更高版本的内部通知完美配合，但对于 GingerBread 它不起作用，因此我必须推送我自己的自定义通知。所以我需要确定完整下载pdf的确切时间。截至目前，我可以推送我自己的自定义通知，但每次下载 pdf 时都会收到两次通知（因为 onReceive() 每个 pdf 都会收到两次）。谁能解释为什么 onReceive() 被调用两次（对于每个pdf）。有什么解决方法吗？也有人可以推荐如何在我的案例中取消注册广播接收器吗？上面的代码不是活动的一部分，所以我不确定如何取消注册接收器。

感谢您停下来阅读这篇文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:29:06.627

您通常`onResume()`在`onPause()`. 你这样做吗？

* * *

我想我最初可能误解了你想要做的事情。您应该可以`unregisterReceiver`从`onReceive`. 这是做你想做的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:15:33.490

你说你正在下载两个pdf。我在您的方法中只看到一个下载请求。所以我假设你所做的是调用该方法两次。如果这是真的，您实际上注册了两个接收器来接收`ACTION_DOWNLOAD_COMPLETE`事件。

您只需要在 onCreate 或 onStart 或其他一些方法中注册一次。出于通知目的，您可以使用`intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1)`获取下载 id，每次下载的 id 都是唯一的。您可以使用此 id 获取有关下载文件的信息并发出特定于文件的通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T19:58:06.753

这看起来与此处描述的错误相同： [https ://code.google.com/p/android/issues/detail?id=18462](https://code.google.com/p/android/issues/detail?id=18462)

# ios - UITextField 没有最大字符限制的空格

> ID：15374777
> 
> 赞同：0
> 
> 时间：2013-03-13T00:20:24.277
> 
> 标签：ios, uitextfield, whitespace, uitextfielddelegate, maxlength

我有两个 UITextField：usernameField 和 passwordField。对于这两个字段，我正在尝试实现下面的代码，以不允许用户输入任何空格（使用空格键）并限制每个文本字段的最大长度。空格的代码工作正常，但 Max Length 失败。

```
//Addressing White space and length in the form
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSString *resultingString = [textField.text stringByReplacingCharactersInRange: range withString: string];
NSCharacterSet *whitespaceSet = [NSCharacterSet whitespaceCharacterSet];
if  ([resultingString rangeOfCharacterFromSet:whitespaceSet].location == NSNotFound)      {
    return YES;
}  else  {
    self.title.text = @"No Spaces Allowed";
    self.title.textColor = [UIColor yellowColor];
    return NO;
}

if (textField == self.usernameField)
{
    NSInteger MAXLENGTH = 15;

    NSUInteger oldLength = [textField.text length];
    NSUInteger replacementLength = [string length];
    NSUInteger rangeLength = range.length;

    NSUInteger newLength = oldLength - rangeLength + replacementLength;

    BOOL returnKey = [string rangeOfString: @"\n"].location != NSNotFound;

    return newLength <= MAXLENGTH || returnKey;

if (textField == self.passwordField)
    {
        NSInteger MAXLENGTH = 10;

        NSUInteger oldLength = [textField.text length];
        NSUInteger replacementLength = [string length];
        NSUInteger rangeLength = range.length;

        NSUInteger newLength = oldLength - rangeLength + replacementLength;

        BOOL returnKey = [string rangeOfString: @"\n"].location != NSNotFound;
        return newLength <= MAXLENGTH || returnKey;   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:45:36.737

**允许最大字符和拒绝空格**

实现**`shouldChangeCharactersInRange`** 委托

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    BOOL _isAllowed = YES;

    NSString *tempString = [[textField.text stringByReplacingCharactersInRange:range withString:string] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if ([self.yourTextFeildName.text isEqualToString:tempString] || [tempString length] > 5)
    {
        _isAllowed =  NO;
    }

    return   _isAllowed;
} 
```

**对于最少字符**

实现**`textFieldDidEndEditing`** 委托

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
   if ([textField.text length] < 5)
   {
         //text field length is less than 5.
   }
} 
```

# javascript - 每 5 秒滑动一次图像

> ID：15374778
> 
> 赞同：-1
> 
> 时间：2013-03-13T00:20:24.320
> 
> 标签：javascript, jquery, html

这是我的幻灯片图片：

```
<section id="mainFooter">
            <div class="mainFooter">
                <p class="margRight">Jaafari Housseine &copy; 2013 <span>|</span> <a href="#!/page_privacy">Privacy Policy</a></p>
                <nav class="bgNav">
                    <ul>
                        <li class="active"><a href="images/picture1.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture2.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture3.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture4.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture5.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture6.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture7.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture8.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                        <li><a href="images/picture9.jpg"><img src="images/pagination_act.png" alt="" class="img_act"></a></li>
                    </ul>
                </nav>
                <p class="fright text"><img src="images/envelope.png" alt="" class="envelope">Résidence Harmonie N°19, Boulevard Abdelkarim Khattabi</p>
            </div>  
</section> 
```

我为此使用的 jQuery 脚本：

```
<script>
    $('ul li.active')(function(){$(this).removeClass("active")
        .delay(4500)
        .queue(function() {
            $(this).next('li').addClass("active");
            $(this).dequeue();
        });
    })
</script> 
```

什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:28:07.477

如果您只是想循环哪个`<li>`标签上有“活动”类，而您的 CSS 负责其余部分，那么您可以这样做：

```
<script>
    $(document).ready(function() {
        var items = $("nav.bgNav ul li");
        var index = -1;

        function next() {
            // if not the very first iteration, 
            // remove the active class from prev item
            if (index !== -1) {
                items.eq(index).removeClass("active");
            }
            // go to next item
            ++index;
            // if past end, wrap to beginning
            if (index >= items.length) {
                index = 0;
            }
            // add active class to next item
            items.eq(index).addClass("active");

            // schedule next iteration
            setTimeout(next, 4500);
        }

        next();
    });
</script> 
```

由于您的代码仅适用于活动类，因此此解决方案假定您有 CSS 可以在活动类在其上时显示图像，并且在没有活动类时不显示并处理图像之间您想要的任何转换。如果您没有，那么您将需要它，并且您将不得不披露相关页面 HTML/CSS 的其余部分。“活跃”类不是魔术。它仅在与 CSS 结合时才起作用。

工作示例：http: [//jsfiddle.net/jfriend00/UnuCL/](http://jsfiddle.net/jfriend00/UnuCL/)

* * *

基于对您正在尝试做的事情的新理解，这里有一段新代码将实际的 img.src 更改为包含标签的 href。默认情况下，它会循环遍历每个项目。当鼠标悬停在任何给定项目上时，循环停止并且该项目显示它的新图像。当鼠标离开该项目时，它会恢复该图像，然后循环再次开始。您可以悬停以停止并显示该项目，停止悬停以开始自动循环。

```
$(document).ready(function() {
    // save original image URL for each
    var items = $("nav.bgNav ul li img");
    items.each(function() {
        $(this).data("orig-src", this.src);
    });

    var index = -1;
    var timer;

    function stop() {
        clearTimeout(timer);
    }

    function restore(i) {
        var oldItem;
        // if not the very first iteration, 
        // remove the active class from prev item
        if (i !== -1) {
            oldItem = items.eq(i);
            oldItem.closest("a").removeClass("active");
            oldItem.attr("src", oldItem.data("orig-src"));
        }
    }

    function display(i) {
        var newItem = items.eq(i);
        // change image .src based on parent <a> href
        newItem.attr("src", newItem.closest("a").attr("href"));

    }

    function next() {
        // restore currently active item
        restore(index);

        // go to next item
        ++index;
        // if past end, wrap to beginning
        if (index >= items.length) {
            index = 0;
        }

        display(index);

        // schedule next iteration
        timer = setTimeout(next, 1000);
    }

    next();

    // now make hover do the same thing
    $("nav.bgNav ul li img").hover(function() {
        var hoverIndex = $(this).closest("li").index();
        stop();
        restore(index);
        display(hoverIndex);        
    }, function() {
        var hoverIndex = $(this).closest("li").index();
        index = hoverIndex;
        next();
    })

    $("nav.bgNav ul li a").click(function() {
        // ignore clicks
        return false;
    });

}); 
```

完整的工作演示：http: [//jsfiddle.net/jfriend00/ux2Cg/](http://jsfiddle.net/jfriend00/ux2Cg/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T00:25:50.833

有很多东西已经做到了这一点，你可能更容易使用其中之一。Bootstrap 有一个，[这里是它的链接](http://twitter.github.com/bootstrap/javascript.html#carousel)。

它的用法非常简单。

# javascript - json，试图访问数组

> ID：15374779
> 
> 赞同：0
> 
> 时间：2013-03-13T00:20:27.763
> 
> 标签：javascript, jquery, ajax, json

我试图访问 json 字符串的电子邮件部分

{"email":"请输入有效的电子邮件地址","pass":"请输入您的密码"}"

它传递给这样的函数

```
postActor: function(){
    var self = checkLogin;
        $.ajax({
        data: self.config.form.serialize(),
            success: function(results) {
            if(results){
                        console.log({results: email});      
            alert('this should worlk');
                } else {
                                   alert('this isn't working');
                }
            }
        });
    }, 
```

它让我发疯，有人可以指出我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:21:40.560

`{results: email}`将是创建对象的对象文字语法。您需要使用`results.email`或`results['email']`。

编辑：根据@TravisJ 所说，您可能需要解析结果。这不太可能，但您的选择包括：

1.  发出 JSON 时将设置`application/json`为标头`Content-type`
2.  用作参数`dataType: json`之一`$.ajax`
3.  在字符串上使用`$.parseJSON`或。`JSON.parse``results`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:21:52.200

使用点符号访问属性，`results.email`

```
postActor: function(){
    var self = checkLogin;
        $.ajax({
        data: self.config.form.serialize(),
            success: function(results) {
                if(results){
                    console.log(results.email);      
                    alert('this should worlk');
                } else {
                    alert('this isn't working');
                }
            }
        });
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:21:57.747

假设结果变量是一个 json 编码的字符串，您必须将其解析为 json。使用 JSON.parse(string)，或者如果指定了 dataType json.. 只需使用对象访问表示法：

```
results.email 
```

或者

```
results['email']. 
```

JSON 是**J** ava **s** cript Object Notation **，**您可以在此处阅读有关它的更多信息：[http :](http://www.json.org/) **//www.json.org/**

除此之外，您忘记在以下行中转义引号：

```
alert('this isn't working');
           //  ^ this should be escaped. 
```

这可能会导致您的其余功能中断。

# javascript - Html 和 CSS 中的 Javascript 冲突

> ID：15374792
> 
> 赞同：0
> 
> 时间：2013-03-13T00:21:37.840
> 
> 标签：javascript, html, css

我与我的 JS 发生冲突，因为其中一个脚本无法正常运行，我试图在我的文档中使用多个 javascript，我将使用三个并且我已经遇到冲突并且我只有两个到目前为止的文件中...... :(

首先在`head`：

```
<script type="text/javascript" src="javascript/jquery_1.3.2.js"></script>
<script type="text/javascript" src="javascript/jcarousel.js"></script>
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery('#jcarouselMetro').jcarousel({
        scroll: 1,
        wrap: 'both'
    });
    jQuery('#jcarouselInvites').jcarousel({
        scroll: 1,
        wrap: 'both'
    });
});
</script> 
```

第二个`body`：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="javascript/jquery-css-transform.js" type="text/javascript"></script>
<script src="javascript/jquery-animate-css-rotate-scale.js" type="text/javascript"></script>
<script>
$('.item').hover(
    function(){
        var $this = $(this);
        expand($this);
    },
    function(){
        var $this = $(this);
        collapse($this);
    }
);
function expand($elem){
    var angle = 0;
    var t = setInterval(function () {
        if(angle == 1440){
            clearInterval(t);
            return;
        }
        angle += 40;
        $('.link',$elem).stop().animate({rotate: '+=-40deg'}, 0);
    },10);
    $elem.stop().animate({width:'243px'}, 1000)
                .find('.item_content').fadeIn(400,function(){
                    $(this).find('p').stop(true,true).fadeIn(600);
                });
}
function collapse($elem){
    var angle = 1440;
    var t = setInterval(function () {
        if(angle == 0){
            clearInterval(t);
            return;
        }
        angle -= 40;
        $('.link',$elem).stop().animate({rotate: '+=40deg'}, 0);
    },10);
    $elem.stop().animate({width:'52px'}, 1000)
                .find('.item_content')
                .stop(true,true)
                .fadeOut()
                .find('p')
                .stop(true,true)
                .fadeOut();
}
</script> 
```

据我所知，可能是导致问题的“功能”。请帮忙......你怎么能避免这些问题，我敢肯定很多人一直在使用多个js，你只是希望并祈祷它不会搞砸吗？

编辑：

```
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.js"></script>
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery('#jcarouselMetro').jcarousel({
        scroll: 1,
        wrap: 'both'
    });
    jQuery('#jcarouselInvites').jcarousel({
        scroll: 1,
        wrap: 'both'
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:29:40.497

清理源代码可能有助于调试过程。您可以创建一个单独的 javascript 文件，而不是使用包含在文档正文/头部的脚本标签中的 javascript。将所有外部脚本标签放在文档的头部。您应该最后调用包含所有上述代码的自定义 javascript 文件。

您的点击/悬停功能应该包含/绑定在您的 document.ready 功能中。

此外，您正在调用重复的脚本，jcarousel.js 和 jcarousel.min.js 是相同的脚本。一个只是缩小版。因此，您可能会产生冲突，您的 jquery 调用也是如此。尝试只使用一个版本的 jQuery，即来自[scriptsrc.net的最新版本](http://scriptsrc.net/)

因此，您生成的 html 文档看起来像这样

```
<head>
<!-- jquery -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="javascript/jquery-css-transform.js"></script>
<script type="text/javascript" src="javascript/jquery-animate-css-rotate-scale.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>

<!-- your custom js -->
<script type="text/javascript" src="javascript/yourCustom.js"></script>
</head> 
```

然后您的自定义 js 文件将如下所示..

```
function expand($elem) {
    var angle = 0;
    var t = setInterval(function() {
        if (angle == 1440) {
            clearInterval(t);
            return;
        }
        angle += 40;
        $('.link', $elem).stop().animate({
            rotate : '+=-40deg'
        }, 0);
    }, 10);
    $elem.stop().animate({
        width : '243px'
    }, 1000).find('.item_content').fadeIn(400, function() {
        $(this).find('p').stop(true, true).fadeIn(600);
    });
}//end expand

function collapse($elem) {
    var angle = 1440;
    var t = setInterval(function() {
        if (angle == 0) {
            clearInterval(t);
            return;
        }
        angle -= 40;
        $('.link', $elem).stop().animate({
            rotate : '+=40deg'
        }, 0);
    }, 10);
    $elem.stop().animate({
        width : '52px'
    }, 1000).find('.item_content').stop(true, true).fadeOut().find('p').stop(true, true).fadeOut();
}//end collapse

$(document).ready(function() {

    //Carousel setup
    $('#jcarouselMetro').jcarousel({
        scroll : 1,
        wrap : 'both'
    });
    $('#jcarouselInvites').jcarousel({
        scroll : 1,
        wrap : 'both'
    });
    //end carousel

    //item hover function
    $('.item').hover(function() {
        var $this = $(this);
        expand($this);
    }, function() {
        var $this = $(this);
        collapse($this);
    });
    //end hover

});//end document ready 
```

除此之外，您可能需要定义一个 clearInterval 函数。除非它是您包含的众多库之一的一部分，因为它在您的展开和折叠函数中被调用。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:55:28.750

我可以看到两个冲突的 JavaScript 代码被包含两次的问题。首先，您在这里加载同一个轮播库的两个版本：

```
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.js"></script> 
```

第一个是相同代码的缩小版本。你只需要一个，所以删除上面的第二行，因为它不是必需的，它只是同一文件的更大版本。这可能不会导致问题，但这是不对的。

其次，您的代码中有两个版本的 jQuery，这也会导致严重的问题，因为您在页面中加载它们的时间非常不同，它们的功能也非常不同。您可以使用 noConflict 解决此问题：

```
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
    var jq142 = jQuery.noConflict();
    jq142(document).ready(function () {
        jQuery('#jcarouselMetro').jcarousel({
            scroll: 1,
            wrap: 'both'
        });
        jQuery('#jcarouselInvites').jcarousel({
            scroll: 1,
            wrap: 'both'
        });
    });
</script> 
```

第一行将`var jq142 = jQuery.noConflict();`确保您为轮播库加载了正确版本的 jQuery。阅读[noConflict 文档](http://api.jquery.com/jQuery.noConflict/)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:35:04.227

您可以使用它仅加载一个版本的库。IE6、7、8 上的 1.3.2 和所有其他浏览器上的 1.9.1。

```
<!--[if lt IE 9]>
    <script src="jquery-1.3.2.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="jquery-1.9.1.js"></script>
<!--[endif]--> 
```

# google-maps - 通过模板获取图像大小？

> ID：15374794
> 
> 赞同：2
> 
> 时间：2013-03-13T00:21:40.700
> 
> 标签：google-maps, mediawiki-templates, google-widget

我的 wiki 上有一个模板，用于将图像与位置图像并排放置。我遇到的问题是，如果图像（通常取自电影屏幕截图）具有不同的比例（比如它是 16:9 的宽屏幕），那么图像上方和下方会有一堆空白。有没有办法

1.  设置 Google Maps 小部件以根据所提供图像的尺寸获取其高度和宽度，或者...
2.  获取图像的纵横比？如果我能做到这一点，那么我可以运行一系列“#if”语句来设置小部件的高度和宽度。

基本上，我希望地图和图像在页面上显示时具有相同的高度。模板的代码如下。提前致谢。

```
{{{!}}style="border: 1px solid darkgray;"
{{!}}-
{{!}}{{#widget:Google Maps 
|height=270
|width=480
|lat={{{lat|}}}
|lng= {{{lng|}}}
|zoom={{{zoom|}}}
|}}
{{!}}|[[image:{{{image|}}}|none|480x270px]]}}
{{!}}-
{{!}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T09:54:23.573

有一个扩展（我自己没有尝试过）：[ImageSizeInfoFunctions](https://www.mediawiki.org/wiki/Extension%3aImageSizeInfoFunctions)。它将为您提供两个解析器功能（并且将一直工作到您的用户尝试将一个不是图片的文件放在那里的那一天......）

# codeigniter - 一对多保存，codeigniter DataMapper

> ID：15374800
> 
> 赞同：0
> 
> 时间：2013-03-13T00:22:00.857
> 
> 标签：codeigniter, codeigniter-2, codeigniter-datamapper

在用户可以添加视频的网站上工作。每个视频可以分为多个部分。它也可以有很多问题。Video 与 question 和 section 类具有一对多的关系。

我得到这样的部分和视频课程：

```
 $s = new Section();
    $s->where('section', $this->post->section)->get(); 
```

然后像这样保存：

```
 $v->save($u, $s, $q); 
```

其中 $v 是视频对象，$u 是用户对象，$q 是问题对象。

我想允许用户发布多个问题和部分。我如何保存这些关系。$s 和 $q 应该是对象数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:07:54.650

我不是 100% 确定我明白你的意思，但是是的，你可以同时保存多个关系。

像这样：

```
$s = new Section();
$s->where_in('section', $array_with_sections_ids)->get();

$v->save(array($u, $s->all, $q)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:21:49.877

您在数据库中使用不同的表。像 Video、Question 和 VideoQuestion 一样，您在其中存储具有不同 Question id 的视频 ID

然后 VideoExample 看起来像：

```
| video_id | question_id |
--------------------------
|    1     |      1      |
|    1     |      5      |
... 
```

要插入此数据，首先插入视频并获取其 ID

```
$videoId = $this->db->insert_id() 
```

对你的问题做同样的事情，你就得到了你的 ID ;) 对其他表也一样，你就完成了。祝你好运！

# xml - 如何将 NSArray 放入 XML 文件并上传到 URL

> ID：15374801
> 
> 赞同：0
> 
> 时间：2013-03-13T00:22:02.503
> 
> 标签：xml, xcode, nsarray

我在 xcode 工作；我有一个 NSArray 数据，我想将其转换为 XML 文件，然后上传到 Web 数据库。

数组的格式如下：

`555ttt Conor Brady testpass BC test Desc this is user timestamp this is location this is user location`

我希望它转换成 XML 文件，如下所示：

```
<plates>
<plate>
<plateno>555ttt</plateno>
<user>Conor Brady</user>
<username>cbrady</username>
<password>testpass</password>
<province>BC</province>
<description>test desc</description>
<usertimestamp>this is user timestamp</usertimestamp>
<location>this is user location</location>
<status>this is user status</status>
</plate>
<plate>
<plateno>333yyy</plateno>
<user>C Brady</user>
<username>cbrady</username>
<password>testpass</password>
<province>BC</province>
<description>This is a test description</description>
<usertimestamp>this is user timestamp</usertimestamp>
<location>this is user location</location>
<status>this is user status</status>
</plate>
</plates> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:26:33.360

您需要创建从数组中的数据到要生成的 XML 中的标记的映射。最简单的方法是为要添加到 XML 的每个印版创建一个字典。这样的事情应该可以解决问题：

```
// Encode the data in an array of dictionaries
// Each dictionary has a key indentifying the XML tag
NSDictionary *plate1 = @{@"plateno" : @"555ttt", @"user" : @"Conor Brady", @"password" : @"testpass", @"province" : @"BC", @"description" : @"test desc", @"location" : @"this is user location"};
NSDictionary *plate2 = @{@"plateno" : @"333yyy", @"user" : @"C Brady", @"password" : @"testpass", @"province" : @"BC", @"description" : @"test desc", @"location" : @"this is user location"};
NSArray *platesData = @[plate1, plate2];

// Build the XML string
NSMutableString *xmlString = [NSMutableString string];

// Start the plates data
[xmlString appendString:@"<plates>"];

for (NSDictionary *plateDict in platesData) {
    // Start a plate entry
    [xmlString appendString:@"<plate>"];

    // Add all the keys (XML tags) and values to the string
    [plateDict enumerateKeysAndObjectsUsingBlock:^(id key, id value, BOOL *stop){
        [xmlString appendFormat:@"<%@>%@</%@>", key, value, key];
    }];

    // End a plate entry
    [xmlString appendString:@"</plate>"];
}

// End the plates data
[xmlString appendString:@"</plates>"]; 
```

# jquery - JQUERY 传递的数据的奇怪 $_REQUEST 行为

> ID：15374804
> 
> 赞同：1
> 
> 时间：2013-03-13T00:22:33.473
> 
> 标签：jquery, request

我正在使用 Jquery 将数据传递给一个 php 文件，并且一切似乎都运行良好，除了 $_REQUEST 数组包含一个让我失望的附加项目。

这是表格：

```
<form id = "filter">
 <input class="hook1" type="checkbox" value="115" name="0"> bla blah <br >
 <input class="hook1" type="checkbox" value="116" name="1"> blah blah      <br >
 <input class="hook1" type="checkbox" value="107" name="2"> stil blah blah 
</form> 
```

这是jQuery：

```
 <script>
 $(document).ready(function(){  
 $("#filter").change(function()
 {
var str = $("#filter").serialize();

 alert( str );

 $.ajax({
        url: "filter_trim.php",
        type: "POST",
    dataType:"json",
       data: str,
       success: function(data){
            // do something with returned data
        }
 });
 });
 });
 </script> 
```

使用 Firebug 的 var_dump($_REQUEST) 正在使用来自 Firebug 的控制台为 2 个复选框的情况打印此内容。VAR_DUMP($_REQUEST)= array(3) { [1]=> 字符串(3) "116" [2]=> 字符串(3) "107" ["SQLiteManager_currentLangue"]=> 字符串(1) "2"

我不知道最后一个项目是从哪里来的。可能是正常的，我现在才看到它，因为这是我第一次传递数据数组。

php 文件 filter_trim.php 像这样启动。如您所见，我必须使用 array_pop() 来删除 $_REQUEST 数组上不需要的最后一项。

```
<?php
 $connect = mysql_connect("localhost", "root", "root");
 mysql_select_db("cars");
 $trimids = array();
 var_dump($_REQUEST);

 array_pop($_REQUEST);
 $trimids = $_REQUEST;
 $trimids = implode(",", $trimids); 
```

我很感激任何意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:04:11.223

您真的应该考虑为您的复选框分配一个名称，这样，当您序列化您的表单时，您将获得一个更易于使用的关联数组，如下所示：

```
<form id = "filter">
 <input name="hooks[0]" class="hooks0" type="checkbox" value="115">  bla blah <br >
 <input name="hooks[1]" class="hooks1" type="checkbox" value="116"> blah blah      <br >
 <input name="hooks[2]" class="hooks2" type="checkbox" value="107"> stil blah blah 
</form> 
```

然后，在您的 PHP 中：

```
 $connect = mysql_connect("localhost", "root", "root");
 mysql_select_db("cars");

 $trimids = is_array($_REQUEST['hooks']) ? $_REQUEST['hooks'] : array(); 
```

# sql - jqGrid 不使用 JSON 显示 SQL Server 数据

> ID：15374805
> 
> 赞同：0
> 
> 时间：2013-03-13T00:22:36.920
> 
> 标签：sql, vb.net, json, jqgrid

这几天我一直在搞砸这件事，我正在失去理智。我能够让 jqGrid 工作，使用“本地”数据类型，现在我正试图将它与我的 SQL 数据联系起来。我没有错误，只是一个空白网格。我在网上搜索并尝试了许多没有运气的例子。网格显示和列​​标题出现，只是没有数据。我也没有收到任何 js 错误。在这一点上，我对分页、排序、搜索等不感兴趣。只需要获取数据显示。有人可以指出我正确的方向吗？

```
VB.NET code:
============
Public Function GetGridData() As JqGridData
    Dim sql As String = "Select unit_number, product_code, blood_type, 'No Match' scan_result From product_header Where (product_id < 20) Order By 1, 2, 3"

    Dim dt As New DataTable()
    Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("conn").ConnectionString)
    Dim adapter As New SqlDataAdapter(sql, conn)
    adapter.Fill(dt)

    Dim result As New JqGridData()
    Dim gridRows As New List(Of TableRow)()
    Dim idx As Integer = 1

    For Each row As DataRow In dt.Rows
        Dim newrow As New TableRow()
        newrow.id = idx
        newrow.cell = New List(Of String)(4)
        newrow.cell(0) = row(0).ToString()
        newrow.cell(1) = row(1).ToString()
        newrow.cell(2) = row(2).ToString()
        newrow.cell(3) = row(3).ToString()
        gridRows.Add(newrow)
    Next

    result.total = 2
    result.page = 1
    result.records = gridRows.Count
    result.rows = gridRows

    Return result
End Function

Public Class TableRow

    Private m_id As Integer
    Private m_cell As List(Of String)

    Public Property id() As Integer
        Get
            Return m_id
        End Get
        Set(ByVal value As Integer)
            m_id = value
        End Set
    End Property

    Public Property cell() As List(Of String)
        Get
            Return m_cell
        End Get
        Set(ByVal value As List(Of String))
            m_cell = value
        End Set
    End Property

End Class

Public Class JqGridData

    Private m_total As Integer
    Private m_page As Integer
    Private m_records As Integer
    Private m_rows As List(Of TableRow)

    Public Property total() As Integer
        Get
            Return m_total
        End Get
        Set(ByVal value As Integer)
            m_total = value
        End Set
    End Property

    Public Property page() As Integer
        Get
            Return m_page
        End Get
        Set(ByVal value As Integer)
            m_page = value
        End Set
    End Property

    Public Property records() As Integer
        Get
            Return m_records
        End Get
        Set(ByVal value As Integer)
            m_records = value
        End Set
    End Property

    Public Property rows() As List(Of TableRow)
        Get
            Return m_rows
        End Get
        Set(ByVal value As List(Of TableRow))
            m_rows = value
        End Set
    End Property

End Class

js code:
========
$(document).ready(function(){
    $("#list").jqGrid({
        url: 'Display.aspx/GetGridData',
        datatype: 'json',
        mtype: "GET",
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function (data) {
            return JSON.stringify(data);
        },
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: true
        },
        colModel: [
            {name: 'unit_number', label: 'Unit Number', width: 100, align: 'center'},
            {name: 'product_code', label: 'Product Code', width: 200, align: 'center'},
            {name: 'blood_type', label: 'Blood Type', width: 200, align: 'center'},
            {name: 'scan_result', label: 'Scan Result', width: 200, align: 'center'}
        ],
        rowNum: 10,
        rowList: [10, 20, 30],
        sortname: 'id',
        sortorder: "asc",
        pager: "#pager",
        viewrecords: true,
        caption:  'My first grid'
    }).jqGrid('navGrid', '#pager', {edit: false, add: false, del: false, search: true});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:39:46.520

尝试拔出

```
 ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
    serializeGridData: function (data) {
        return JSON.stringify(data);
    },
    jsonReader: {
        root: "rows",
        page: "page",
        total: "total",
        records: "records",
        repeatitems: true
    }, 
```

并确保您传递 jqGrid 需要的所有数据。我不是 VB.Net 的人，所以我假设您有一个控制器/动作为您的网格提供数据？您也可以尝试手动为网格构建一行以测试该方面。

# c - 使用 Cairo 将曲线转换为对角线（在 Linux 上的 Avant Window Navigator 中）

> ID：15374806
> 
> 赞同：1
> 
> 时间：2013-03-13T00:22:40.693
> 
> 标签：c, linux, desktop, cairo, dock

我目前正在尝试修改 Avant Window Navigator 的“Lucido 模式”代码，以便用对角线替换分隔符/s' 曲线。

控制曲线的 (Cairo) 代码部分位于 GitHub 上以下文件的第 330 到 334 行：[link](https://github.com/Sprezzatech/avant-window-navigator/blob/7968e280cedc738f4b1bdada3a4af8c3e891a818/src/awn-background-lucido.c#L330-L334)

```
{ /* Oblique */
  gfloat xm = ( *xs + xf ) / 2.0;
  cairo_curve_to (cr, xm, *ys, xm, yf, xf, yf);
} 
```

为了使目标更容易理解，这里是 AWN Lucido 现在的样子以及我希望它看起来的样子：

![例子](../Images/9028a5ad8521ae9ecf0f282bc570027e.png)

如果有人能帮助我正确地编写代码以使分隔符成为一条直线，我将不胜感激。

非常感谢您的宝贵时间 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:55:33.247

可以在[此处](http://cairographics.org/manual/cairo-Paths.html#cairo-curve-to)找到有关使用 Cairo 绘制曲线的信息。

四点贝塞尔曲线如下所示：

![在此处输入图像描述](../Images/9fc1270eab90b9339936cbe69a9b1e13.png)

`cairo_curve_to`采用当前笔位置`p0`，其参数是接下来的 3 个点。

因此，您可以`cairo_curve_to`通过为每个参数传递相同的点来绘制一条直线。这有点浪费，但对你来说可能不是一个严重的问题。

看起来如果你传递它的两个参数的结束位置，`_line_from_to`它将退化为绘制一条直线，如你所愿。例如，如果对该函数的调用将其`_line_from_to(cr, &x, &y, x2, y2)`更改为`_line_from_to(cr, &x2, &y2, x2, y2)`.

或者，将代码更改`_line_from_to`为

```
static void 
_line_from_to ( cairo_t *cr,
                gfloat *xs,
                gfloat *ys,
                gfloat xf,
                gfloat yf)
{
  cairo_line_to (cr, xf, yf);
  *xs = xf;
  *ys = yf;
} 
```

如果您想了解更多信息`cairo_curve_to`，请参阅[此示例](http://cairographics.org/samples/curve_to/)。

# google-drive-api - 使用 CORS 上传 Google 云端硬盘

> ID：15374807
> 
> 赞同：3
> 
> 时间：2013-03-13T00:22:48.563
> 
> 标签：google-drive-api, cors

所以，去年夏天有一场关于 Google Drive API 的讨论（例如[Nivco](https://stackoverflow.com/users/1313169/nivco)写得很好的[回答](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript/10331393#10331393)），但距离上次有人说[“我们已经让我们的工程团队知道这个问题”之类的话已经有一段时间了](https://stackoverflow.com/a/11622305/1120220)[”](https://stackoverflow.com/a/11622305/1120220)。

那么，8 个月后，除了更新旧的 SO 问题之外，还有其他方法可以深入了解这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T22:36:05.420

现已启用使用 CORS 上传 :)

# image-processing - 钛图像处理

> ID：15374811
> 
> 赞同：0
> 
> 时间：2013-03-13T00:22:58.153
> 
> 标签：image-processing, titanium, appcelerator, titanium-modules, hue

我目前正在研究 Appcelerator (Titanium)，现在我想在 APP 中为图像着色。就像我有一张图像，我可以像在 Photoshop 中一样通过色调或饱和度来改变它的颜色。我搜索了太多东西，但在工作状态下仍然没有找到任何东西。任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-18T03:50:20.910

最好的架构可能是[创建一个 web 视图](http://docs.appcelerator.com/titanium/3.0/#!/guide/Integrating_Web_Content)，其中有一个画布标签，然后你就可以使用任何你想要的画布图像处理库。它们有很多，但[这里有一些。](https://stackoverflow.com/questions/3351122/what-is-the-best-javascript-image-processing-library)

# iphone - 有没有办法使用 Xcode 将 bit.ly 转换为完整的 url？

> ID：15374825
> 
> 赞同：0
> 
> 时间：2013-03-13T00:24:46.573
> 
> 标签：iphone, objective-c, xcode, hyperlink, bit.ly

我想知道这是否真的可行，因为我的问题已经没有解决方案了。bit.ly 短链接毁了我的一天，哈哈。下面的代码是我想要实现的，但这不适用于 bit.ly 链接。它总是先检测 bit.ly 链接，然后再检测 google 重定向链接。

```
 -(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
if ( inType == UIWebViewNavigationTypeLinkClicked ) {
 if ([[inRequest.URL absoluteString] rangeOfString:@"google"].location==NSNotFound){
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }
}
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T15:23:01.527

还有 Bitly API 的[扩展](http://dev.bitly.com/links.html#v3_expand)端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:40:32.240

为了展开 bit.ly 链接，您需要进行另一个 Web 服务调用。 [LongUrl](http://longurl.org)提供了扩展缩短 URL 的服务。他们提供了一个[API](http://longurl.org/api)来提供这个。

您只需要忍受第二个请求的额外延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T13:38:43.377

这是将任何短 URL 获取到原始 URL 的快速、简单且线程安全的方法

**链接：** [https ://github.com/emotality/ATURLExpander](https://github.com/emotality/ATURLExpander)

**例子：**

```
[[ATURLExpander urlEngine] expandURL:@"http://bit.ly/1dNVPAW" withBlock:^(NSError *error, NSString *longURL) {
    if (error) {
        NSLog(@"ATURLExpander ERROR : '%@'", error);
    } else {
        NSLog(@"ATURLExpander URL : '%@'", longUrl);
    }
}]; 
```

# objective-c - 在 WebView 中生成点击事件

> ID：15374828
> 
> 赞同：3
> 
> 时间：2013-03-13T00:24:54.333
> 
> 标签：objective-c, dom, webkit, dom-events

我正在尝试通过 Mac 上的菜单项在特定 DOMNode 上生成单击事件。我认为这很简单，但是，我似乎遇到了障碍，不知道哪里出错了。

```
DOMDocument* domDocument=[webView mainFrameDocument];

DOMEvent* event = [domDocument createEvent:@"HTMLEvents"];
[event initEvent:@"click" canBubbleArg:YES cancelableArg:NO];

[[[domDocument getElementsByClassName:@"logout clickable"] item:0] dispatchEvent:event]; 
```

DOMEvent 似乎缺少一些我期望看到的方法。我期待不得不像这样编码。

```
DOMEvent* event = [domDocument createEvent:@"MouseEvents"];
[event initMouseEvent:@"click" canBubbleArg:YES cancelableArg:NO]; 
```

但是，鼠标事件似乎不可用。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:06:44.667

这种方法过去对我有用：

```
DOMElement *el = // find element somehow
DOMDocument *doc = [el ownerDocument];
DOMAbstractView *window = [doc defaultView];
DOMUIEvent *evt = (DOMUIEvent *)[doc createEvent:@"UIEvents"];
[evt initUIEvent:@"click" canBubble:YES cancelable:YES view:window detail:1];
[el dispatchEvent:evt]; 
```

我相信这是所有标准的 DOM2 事件模块 API。[我想我是通过查看这篇MozDev`createEvent`文章](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)中的 JavaScript 找到了这个解决方案。

* * *

还要注意`-[DOMHTMLElement click]`WebKit 的*DOMHTMLElement.h*中标记为的方法`AVAILABLE_AFTER_WEBKIT_VERSION_5_1`。

* * *

最后，我偶尔不得不求助于一些更骇人听闻的东西来完全模拟用户“鼠标点击”以及通常伴随它的所有 DOM 事件。如果上面没有其他方法，我只会尝试这个（这很复杂，丑陋和脆弱）：

```
WebView *webView = // get web view
DOMElement *el = // find element somehow
id relatedTarget = [(DOMHTMLDocument *)[el ownerDocument] body];

[el dispatchMouseEventType:@"mouseover" clickCount:0 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:relatedTarget webView:webView];
[el dispatchMouseEventType:@"mousemove" clickCount:0 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:nil webView:webView];
[el dispatchMouseEventType:@"mousedown" clickCount:1 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:nil webView:webView];
[el dispatchMouseEventType:@"click" clickCount:1 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:nil webView:webView];
[el dispatchMouseEventType:@"mouseup" clickCount:1 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:nil webView:webView];
[el dispatchMouseEventType:@"mousemove" clickCount:0 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:nil webView:webView];
[el dispatchMouseEventType:@"mouseout" clickCount:0 ctrlKey:NO altKey:NO shiftKey:NO metaKey:NO button:0 relatedTarget:relatedTarget webView:webView]; 
```

* * *

我在 Google Code 上的开源项目[TDAppKit](https://code.google.com/p/tdappkit/source/browse/trunk/src/DOMElement%2BTDAdditions.m)中有很多这样的代码。

# haskell - Haskell 空间使用编译时间限制

> ID：15374829
> 
> 赞同：13
> 
> 时间：2013-03-13T00:25:01.440
> 
> 标签：haskell

我很喜欢 Haskell，但空间泄漏对我来说有点担心。我通常认为 Haskell 的类型系统比 C++ 更安全，但是使用 C 风格的循环我可以相当肯定它会在不耗尽内存的情况下完成，而 Haskell 的“折叠”可能会耗尽内存，除非你小心适当的字段是严格的。

我想知道是否有一个库使用 Haskell 类型系统来确保可以编译和运行各种结构，而不会产生 thunk。例如，`no_thunk_fold`如果有人以一种可以建立 thunk 的方式使用它，则会引发编译器错误。我知道这可能会限制我可以做的事情，但我想要一些我可以使用的功能作为一个选项，这会让我更有信心我没有不小心在某个地方留下一个重要的非严格字段并且我会用完的空间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T01:30:51.700

听起来您担心惰性评估的一些不利方面。你想确保你的折叠、循环、递归在常量内存中处理。

创建的 iteratee 库解决了这个问题， [管道](http://hackage.haskell.org/package/pipes)、 [管道](http://hackage.haskell.org/package/conduit)、 [枚举](http://hackage.haskell.org/package/enumerator)器、 [迭代器](http://hackage.haskell.org/package/iteratee)、 [迭代器](http://hackage.haskell.org/package/iterIO)。

最流行和最近的是 [管道](http://hackage.haskell.org/package/pipes)和 [导管](http://hackage.haskell.org/package/conduit)。两者都超出了迭代模型。

[管道](http://hackage.haskell.org/package/pipes)库专注于理论上的 合理性，以消除错误并允许设计的恒常性打开高效但高层次的抽象（我的话不是作者）。如果需要，它还提供双向流，这是迄今为止该库独有的优势。

[管道](http://hackage.haskell.org/package/conduit)在 理论上不如管道那么好，但它的巨大优势是目前在其上构建了更多相关库，用于解析和处理 http 流、xml 流等。在包页面上查看[hackage](http://hackage.haskell.org)中的导管部分。它被用于 [Haskell](http://hackage.haskell.org/package/yesod)较大且知名的 Web 框架之一。

我很喜欢使用管道库编写我的流应用程序，特别是能够制作代理转换器堆栈的能力。当我需要获取网页或解析一些 xml 时，我一直在使用管道库。

我还应该提到 [io-streams](http://hackage.haskell.org/package/io-streams)刚刚发布了它的[第一个正式版本](http://snapframework.com/blog/2013/03/05/announcing-io-streams)。它的目标特别是 IO，它的名字并不奇怪，它使用更简单的类型机制，更少的类型参数，然后是 [管道](http://hackage.haskell.org/package/pipes)或 [管道](http://hackage.haskell.org/package/conduit)。主要的缺点是你被困在 IO monad 中，所以它对纯代码不是很有帮助。

```
{-# language NoMonoMorphismRestriction #-}                                       
import Control.Proxy 
```

从简单的翻译开始。

```
map (+1) [1..10] 
```

变成：

```
runProxy $ mapD (+1) <-< fromListS [1..10] 
```

迭代者喜欢为简单的翻译提供更冗长的内容，但通过更大的示例提供更大的胜利。

以恒定空间生成斐波那契数的代理管道库示例

```
fibsP = runIdentityK $ (\a -> do respond 1                                       
                                 respond 1                                       
                                 go 1 1)                                         
  where                                                                          
    go fm2 fm1 = do  -- fm2, fm1 represents fib(n-2) and fib(n-1)                                                            
        let fn = fm2 + fm1                                                       
        respond fn -- sends fn downstream                                                              
        go fm1 fn 
```

这些可以通过 runProxy $ fibsP >-> printD 流式传输到标准输出 - printD 仅打印下游值，代理是管道包的双向提供。

你应该看看我刚刚发现的[代理教程](http://hackage.haskell.org/packages/archive/pipes/3.1.0/doc/html/Control-Proxy-Tutorial.html)和[管道教程](https://www.fpcomplete.com/user/snoyberg/library-documentation/conduit-overview)现在在 FP Complete 的 Haskell 学校。

找到平均值的一种方法是：

```
> ((_,l),s) <- (`runStateT` 0) $ (`runStateT` 0) $ runProxy $  foldlD' ( flip $ const (+1)) <-< raiseK (foldlD' (+)) <-< fromListS [1..10::Int]
> let m = (fromIntegral . getSum) s / (fromIntegral . getSum) l
5.5 
```

现在很容易添加地图或过滤代理。

```
> ((_,l),s) <- (`runStateT` 0) $ (`runStateT` 0) $ runProxy $  foldlD' ( flip $ const (+1)) <-< raiseK (foldlD' (+)) <-< filterD even <-< fromListS [1..10::Int] 
```

编辑：重写代码以利用状态单子。

更新：

关于以可比较的方式对大量数据流进行多次计算的更多方法，然后在博客文章[美丽折叠](http://squing.blogspot.fr/2008/11/beautiful-folding.html)中演示了编写直接递归。折叠转换为数据并在使用严格累加器时组合。我没有定期使用这种方法，但它似乎确实隔离了需要严格性的地方，使其更容易应用。您还应该查看[另一个类似问题的答案，该问题](https://stackoverflow.com/a/10810122/128583)使用应用程序实现相同的方法，并且可能更容易阅读，具体取决于您的偏好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T08:35:40.627

Haskell 的类型系统不能做到这一点。我们可以用一个完全多态的术语来证明这一点，以吃掉任意数量的 ram。

```
takeArbitraryRAM :: Integer -> a -> a
takeArbitraryRAM i a = last $ go i a where
  go n x | n < 0 = [x]
  go n x | otherwise = x:go (n-1) x 
```

做你想做的事需要[子结构类型](http://en.wikipedia.org/wiki/Substructural_type_system)。线性逻辑对应于 lambda 演算的一个高效可计算片段（尽管您还需要控制递归）。添加结构公理可以让您花费超指数时间。

Haskell 允许您伪造线性类型，以便使用索引单子管理某些资源。不幸的是，空间和时间都融入了语言，所以你不能为他们这样做。您可以按照评论中的建议进行操作，并使用 Haskell DSL 生成具有性能限制的代码，但此 DSL 中的计算项可能需要任意时间并使用任意空间。

不用担心空间泄漏。抓住他们。轮廓。证明复杂性界限的代码的原因。无论您使用哪种语言，您都必须这样做。

# css - 停止重复 CSS 代码

> ID：15374830
> 
> 赞同：3
> 
> 时间：2013-03-13T00:25:11.820
> 
> 标签：css

我有这个 3x 的 CSS 块为我的 3 个 HTML div 提供服务，实际的问题是代码重复了 3 次，只有一次更改，那当然是 div 的背景颜色：`background-color: #xxxxx;` 我的问题是，我该怎么做重复这个 3x 块，但只保留 1 个块，但我的每个 Div 上的颜色变化对于这些优惠中的每一个都是不同的。

这甚至可能吗，还是我目前正在以正确的方式进行？

```
.BlueOffer {
width: 300px;
height: 25px;
background-color: #0099ff;
opacity: 0.4;
font-size: 22px;
border-bottom: 1px SOLID #555555;
-webkit-border-top-right-radius: 15px;
-moz-border-radius-topright: 15px;
border-top-right-radius: 15px;
-webkit-border-top-left-radius: 15px;
-moz-border-radius-topleft: 15px;
border-top-left-radius: 15px;
}
.OrangeOffer {
width: 300px;
height: 25px;
background-color: #F90;
opacity: 0.4;
font-size: 22px;
border-bottom: 1px SOLID #555555;
-webkit-border-top-right-radius: 15px;
-moz-border-radius-topright: 15px;
border-top-right-radius: 15px;
-webkit-border-top-left-radius: 15px;
-moz-border-radius-topleft: 15px;
border-top-left-radius: 15px;
}

.GreenOffer {
width: 300px;
height: 25px;
background-color: #66FF00;
opacity: 0.4;
font-size: 22px;
border-bottom: 1px SOLID #555555;
-webkit-border-top-right-radius: 15px;
-moz-border-radius-topright: 15px;
border-top-right-radius: 15px;
-webkit-border-top-left-radius: 15px;
-moz-border-radius-topleft: 15px;
border-top-left-radius: 15px;
} 
```

唯一的变化是：`background-color: #0099ff;`

HTML 代码如下：

```
<div class='GreenOffer'>GREEN OFFER</div>
<div class='OrangeOffer'>ORANGE OFFER</div>
<div class='BlueOffer'>BLUE OFFER</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T00:35:18.883

不需要多个类。只需预先定义通用属性，然后单独指定唯一属性：

```
.BlueOffer, .OrangeOffer, .GreenOffer {
    width: 300px;
    height: 25px;
    opacity: 0.4;
    font-size: 22px;
    border-bottom: 1px SOLID #555555;
    -webkit-border-top-right-radius: 15px;
    -moz-border-radius-topright: 15px;
    border-top-right-radius: 15px;
    -webkit-border-top-left-radius: 15px;
    -moz-border-radius-topleft: 15px;
    border-top-left-radius: 15px;
}

.BlueOffer {
    background-color: #0099ff;
}
.OrangeOffer {
    background-color: #F90;
}

.GreenOffer {
    background-color: #66FF00;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T00:26:55.740

您可以在一个元素上使用多个类。

```
<div class='Offer GreenOffer'>GREEN OFFER</div>
<div class='Offer OrangeOffer'>ORANGE OFFER</div>
<div class='Offer BlueOffer'>BLUE OFFER</div>

.Offer {
    width: 300px;
    height: 25px;
    opacity: 0.4;
    font-size: 22px;
    border-bottom: 1px SOLID #555555;
    -webkit-border-top-right-radius: 15px;
    -moz-border-radius-topright: 15px;
    border-top-right-radius: 15px;
    -webkit-border-top-left-radius: 15px;
    -moz-border-radius-topleft: 15px;
    border-top-left-radius: 15px;
}

.BlueOffer {
    background-color: #0099ff;
}
.OrangeOffer {
    background-color: #F90;
}

.GreenOffer {
    background-color: #66FF00;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-06T18:45:57.140

除了其他很棒的答案之外，您还可以使用“以”结尾的选择器：

```
[class$=Offer] {
    width: 300px;
    height: 25px;
    opacity: 0.4;
    font-size: 22px;
    border-bottom: 1px SOLID #555555;
    -webkit-border-top-right-radius: 15px;
    -moz-border-radius-topright: 15px;
    border-top-right-radius: 15px;
    -webkit-border-top-left-radius: 15px;
    -moz-border-radius-topleft: 15px;
    border-top-left-radius: 15px;
}

.BlueOffer {
    background-color: #0099ff;
}
.OrangeOffer {
    background-color: #F90;
}

.GreenOffer {
    background-color: #66FF00;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T00:35:46.553

我更喜欢一种更分层的 CSS 选择器方法，它也试图避免不必要的更改：

```
.offer {
  width: 300px;
  height: 25px;
  /* ... etc ... */
}

.offer.blue{
  background-color: #0099ff;
}
.offer.green{
  background-color: #66ff00;
} 
```

你以同样的方式应用它：

```
<div class="offer">Standard Offer</div>
<div class="offer green">Green Offer</div> 
```

但是，不同之处在于，css 选择器选择*同时*具有the和class的`.offer.green`元素。*`offer``green`*

 *刚刚...

```
.green{ /*...*/ } 
```

如果您页面上的某些 OTHER 元素也希望为绿色，则可能会导致问题，但在某些方面略有不同。也许是绿色文本而不是绿色背景。哎呀，想象一下如果你有那个错误？绿色背景上的绿色文字？=)

你可以用...

```
.offerGreen{ /*...*/ } 
```

你的介绍比必要的要多。虽然相对微不足道，但它也会增加页面的大小，因为...

```
<div class="offer offerGreen"></div> 
```

是比...更多的字符

```
<div class="offer green"></div> 
```

尽管它只是文本并且使用 gzip 压缩，但除非您进行超级优化，否则实际影响不值得优化。

我希望这会有所帮助！

干杯!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T00:36:24.797

每个对象可以有多个类，也可以将一个块应用于多个类：

```
.OrangeOffer, .BlueOffer, .GreenOffer {
  width: 300px;
  height: 25px;
  opacity: 0.4;
  font-size: 22px;
  border-bottom: 1px SOLID #555555;
  -webkit-border-top-right-radius: 15px;
  -moz-border-radius-topright: 15px;
  border-top-right-radius: 15px;
  -webkit-border-top-left-radius: 15px;
  -moz-border-radius-topleft: 15px;
  border-top-left-radius: 15px;
}
.OrangeOffer {
  background-color: #F90;
}
.GreenOffer {
  background-color: #66FF00;
}
.BlueOffer {
  background-color: #0099ff;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T00:27:01.723

使用多个类

```
.offer{
    width: 300px;
    height: 25px;
    opacity: 0.4;
    font-size: 22px;
    border-bottom: 1px solid #555555;

    -webkit-border-top-right-radius: 15px;
        -moz-border-radius-topright: 15px;
            border-top-right-radius: 15px;

    -webkit-border-top-left-radius: 15px;
        -moz-border-radius-topleft: 15px;
            border-top-left-radius: 15px;

     /*or you could use
     border-radius: 15px 15px 0 0;
     */
}

.Blue{background-color: #0099ff;}
.Orange{background-color: #F90;}
.Green{background-color: #66FF00;} 
```

并应用它们

```
<div class='Green offer'>GREEN OFFER</div>
<div class='Orange offer'>ORANGE OFFER</div>
<div class='Blue offer'>BLUE OFFER</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T00:27:54.593

尝试使用多个`class`.

**CSS：**

```
.offer{    
width: 300px;
height: 25px;
opacity: 0.4;
font-size: 22px;
border-bottom: 1px SOLID #555555;
-webkit-border-top-right-radius: 15px;
-moz-border-radius-topright: 15px;
border-top-right-radius: 15px;
-webkit-border-top-left-radius: 15px;
-moz-border-radius-topleft: 15px;
border-top-left-radius: 15px;
}
.green {
background-color: #66FF00;
} 
```

**HTML**

`<div class='offer green'>Green OFFER</div>`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-13T00:37:10.527

为了防止重复 CSS 代码，可以使用 CSS 框架，例如`LESS`或`SASS`。你可以和它们一起使用**变量、嵌套、函数，**它们很好地进行了**继承**，你也可以使用**mixins**。

*   [http://lesscss.org/](http://lesscss.org/)
*   [http://sass-lang.com/](http://sass-lang.com/)

还有许多其他的 CSS 框架，所以它是你的选择。但我推荐 CSS FW。*

# jquery - 单击按钮时将容器添加到数组

> ID：15374832
> 
> 赞同：1
> 
> 时间：2013-03-13T00:25:35.230
> 
> 标签：jquery, arrays, html, button, push

好的，最初，我有一个程序，当我单击容器时，它会将整个容器添加到一个数组中，然后将其发布到侧边栏中。

现在我想要它，所以当我单击 div 内的按钮时，它会添加整个容器。虽然我似乎在让它工作时遇到了问题。

目前，它将按钮添加到数组中，因为我说`.push($(this))`

我会用什么来添加整个单独的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:29:49.107

克隆 [`.parent()`](http://api.jquery.com/parent/)元素。

```
favorites.push($(this).parent().clone()); 
```

[http://jsfiddle.net/zPMNV/](http://jsfiddle.net/zPMNV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:40:28.370

克隆`parent`然后在上调用remove`clone`

```
var clone = $(this).parent().clone();
$(clone.find("input")).remove();
favorites.push(clone);
$('.favorite').append(favorites); 
```

[http://jsfiddle.net/zPMNV/10/](http://jsfiddle.net/zPMNV/10/)

# signalr - SignalR 组通知在 IE9 上不起作用，除非 start({ transport: 'longPolling' })

> ID：15374838
> 
> 赞同：0
> 
> 时间：2013-03-13T00:26:07.533
> 
> 标签：signalr

我在 IE9 上测试了一个简单的 SignalR MVC 4 应用程序。该应用程序使用群组通知：

```
public class Booking
{
    public void BookFlight(String from, String to, string ConnectionId)
    {
        var hubContext = GlobalHost.ConnectionManager.GetHubContext<ProgressHub>();

        hubContext.Clients.All.addMessage("Started ... " + DateTime.Now.ToString());

        string groupName = "Z"; // "g" + ConnectionId;

        HttpContext.Current.Session["StartTime"] = DateTime.Now;
        // Book first leg
        hubContext.Clients.Group(groupName).addMessage(String.Format("Booking flight: {0}-{1} ...", from, to));
        Thread.Sleep(2000);

        // Book return 
        hubContext.Clients.Group(groupName).addMessage(String.Format("Booking flight: {0}-{1} ...", to, from));
        Thread.Sleep(3000);

        // Book car rent 
        hubContext.Clients.Group(groupName).addMessage(String.Format("Booking car rent: {0}-{1} ...", to, from));
        Thread.Sleep(2000);

        // Some return value
        hubContext.Clients.All.addMessage("Finished ... " + DateTime.Now.ToString());
        //hubContext.Clients.Group(groupName).addMessage("Flight booked successfully. Total Time = " + (DateTime.Now - (DateTime)HttpContext.Current.Session["StartTime"]).ToString());
    }
}

namespace SignalrProgressDemo.Common
{
   public class ProgressHub : Hub
   {
       public override Task OnConnected()
       {
          string groupName = "Z"; 
          return Groups.Add(Context.ConnectionId, groupName);
       }
... 
```

这是客户端代码：

```
 $(function () {

        $("#bookButton").click(function () {
            $.ajax("/Home/BookFlight?from=tlv&to=fco&connectionId=" + $.connection.hub.id);
        });

        var progressHub = $.connection.progressHub;
        $.connection.hub.logging = true;

        progressHub.client.addMessage = function (message) {
            $("#msg").html(message);
        };

        $.connection.hub.start(); //IE9 does NOT work
        //$.connection.hub.start({ transport: 'longPolling' }); //IE9 works OK
    }); 
```

如客户端代码所示，IE9 仅显示发送到 All 的消息，不显示发送到组“Z”的消息。

仅当 connection.hub 以 {transport: 'longPolling'} 开头时，它才能正常工作（=接收组消息）。

**问题/疑问**

1.  强制长轮询阻止在 Chrome、Opera 中使用 WebSocket。

2.  目前尚不清楚为什么显式强制长轮询会有所帮助，因为 IE9 无论如何都会使用长轮询（因为它是唯一有效的方法）。

我确实注意到了这种情况，它表明服务器中的 longpolling 和 WebSockets 之间可能存在关系：

一个。使用 $.connection.hub.start()

湾。打开IE9。

C。测试 - 工作正常

d。打开 Chrome（将使用 WebSockets） - 测试 - 工作正常

e. 测试 IE9 - 不起作用。

# jquery - 我究竟做错了什么？在 JSFiddle 中工作不在我的 html 页面中？

> ID：15374839
> 
> 赞同：0
> 
> 时间：2013-03-13T00:26:16.647
> 
> 标签：jquery, jquery-ui

所以，我一直在 jsfiddle 中摆弄这个重定向生成器，得到了我想要的。我正在尝试用它创建一个 html 页面，但我无法让它工作。 [http://jsfiddle.net/wVUhN/2/](http://jsfiddle.net/wVUhN/2/)

我对 jquery 还是很陌生。我的 redirect.html 页面代码。

```
<html>
<head>
<title>Redirect Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
<script type="text/javascript">
$("#submit").click(function(){
    theurl = $("#theurl").val();
    $("textarea#newvalue").val('<html><head><meta HTTP-EQUIV="Refresh" CONTENT="0; URL="'+theurl+'"></head><body>This page has been moved.<p><a href="'+theurl+'">IF YOU ARE NOT REDIRECTED, PLEASE CLICK HERE.</a></body></html>');    
});
</script>
</head>
<body>

<input type="text" id="theurl" placeholder="enter URL" /><button id="submit">Create Redirect</button>
<br>
<textarea id="newvalue"></textarea>

</body>
</html> 
```

直播网址：[http ://buildlinux.com/frontline/redirect.html](http://buildlinux.com/frontline/redirect.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:39:25.207

您应该将代码放在文档就绪处理程序中：

```
$(document).ready(function(){
  // ...
}) 
```

或者，更短的方法：

```
$(function () {
    $("#submit").click(function () {
        theurl = $("#theurl").val();
        $("textarea#newvalue").val('<html><head><meta HTTP-EQUIV="Refresh" CONTENT="0; URL="' + theurl + '"></head><body>This page has been moved.<p><a href="' + theurl + '">IF YOU ARE NOT REDIRECTED, PLEASE CLICK HERE.</a></body></html>');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:41:11.933

`<body>`只需在(before )的末尾添加自定义脚本 `</body>`，或者使用 .onload 来完成。它适用于 JSfiddle，因为默认设置了 onLoad 选项。

# c++ - c++模板偏特化成员函数

> ID：15374841
> 
> 赞同：39
> 
> 时间：2013-03-13T00:26:20.520
> 
> 标签：c++, templates, specialization

我是模板的新手，所以这可能是一件微不足道的事情，但我无法让它发挥作用。我正在尝试对类成员函数进行部分专业化。最短的代码是：

```
template <typename T, int nValue> class Object{
private:
    T m_t;
    Object();
public:
    Object(T t): m_t(t) {}
    T Get() { return m_t; } 
    Object& Deform(){ 
        m_t*=nValue; 
        return *this;
    }
};

template <typename T>
Object<T,0>& Object<T,0>::Deform(){
    this->m_t = -1;
    return *this;
}

int main(){
    Object<int,7> nObj(1);
    nObj.Deform();
    std::cout<<nObj.Get();
} 
```

我尝试了非成员函数，效果很好。还可以正常工作的是成员函数的完全专业化。

但是，每当我尝试使用部分规格时。的成员函数我得到形式的错误：

```
PartialSpecification_MemberFu.cpp(17): error: template argument
list must match the parameter list Object<T,0>& Object<T,0>::Deform(). 
```

将不胜感激任何帮助:-)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-13T00:36:35.137

您不能只部分专门化单个成员函数，您必须部分专门化整个类。因此，您将需要类似的东西：

```
template <typename T>
class Object<T, 0>
{
private:
    T m_t;
    Object();
public:
    Object(T t): m_t(t) {}
    T Get() { return m_t; } 
    Object& Deform()
    {
        std::cout << "Spec\n";
        m_t = -1;
        return *this;
    }
}; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-13T07:02:02.750

> 14.5.5.3.1。类模板偏特化成员的模板参数列表应与类模板偏特化的模板参数列表匹配。类模板偏特化成员的模板实参列表应与类模板偏特化的模板实参列表匹配。

换句话说：没有部分专业化的类就没有部分专业化的成员。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-02-13T14:13:57.390

不幸的是，您不能部分专门化模板类的成员函数。您可以部分专门化整个类或使用继承。您也可以同时使用：

```
template <typename T, int nValue>
class Object {
protected:
    T m_t;
public:
    Object() = delete;
    Object(T t): m_t(t) {}
    T Get() { return m_t; }
    Object& Deform() {
        m_t *= nValue; 
        return *this;
    }
};

template <typename T>
class Object<T,0> : public Object<T,1> {
public:
    using Object<T,1>::Object;

    Object& Deform() {
        this->m_t = -1;
        return *this;
    }
}; 
```

# javascript - 用新的或清除对象字段替换对象？

> ID：15374843
> 
> 赞同：0
> 
> 时间：2013-03-13T00:26:22.397
> 
> 标签：javascript, object

我被引导到这个问题是因为出于某种原因，我在将对象变量的值设置为 false 时遇到问题。

我有

```
变量我的对象{
     checkValid = 假，
     self.getCheckValid = 函数（）{
          返回校验有效；
     }
     self.setCheckValid = 功能（模式）{
          checkValid = 模式；
     }
}

objectVariable = new myObject;

```

当我跑步时`objectVarible.setCheckValid(true)`，我会得到真正的价值。但是当我运行`objectVariable.setCheckValid(false)`整个应用程序时会出错（除了我在移动设备上开发并且看不到返回的实际错误）。

但后来我想知道，如果我不能将模式设置为 false，我是否可以通过再次调用来重新启动整个对象`objectVariable = new myObject;`。这将用新对象覆盖旧对象并让我回到初始化状态，这正是我正在寻找的。

有理由不这样做吗？还是一种方法比另一种更好？为什么我不能将 checkValid 设置为 false？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T00:29:18.787

创建对象的语法使用`:`而不是`=`创建属性。也不需要使用`.self`来访问属性。此外，在将对象分配给变量时，您应该使用语法`var myObject = {/**properties**/};`

```
 var myObject = {
         checkValid:false,
         getCheckValid: function(){
              return this.checkValid;
         },
         setCheckValid: function(mode){
              this.checkValid = mode;
         }
    }; 
```

**工作示例：http:** [//jsfiddle.net/PSYSM/](http://jsfiddle.net/PSYSM/)

您放置在对象上的访问器是不必要的，您可以在没有访问器的情况下直接访问该`checkValid`属性。

```
 var myObject = {
         checkValid:false
    };

   alert(myObject.checkValid);
   myObject.checkValid = true;
   alert(myObject.checkValid); 
```

**工作示例：http:** [//jsfiddle.net/JtfaJ/](http://jsfiddle.net/JtfaJ/)

关于使用 new with `MyObject`，这是不可能的，因为您已经声明了一个对象文字。该对象仅存在一个实例，因此您无法创建该对象的实例。如果要创建实例，则需要创建对象构造函数。这可以按如下方式完成：

```
function MyObject(){
   this.checkValid = false;
}

var myObject1 = new MyObject();
myObject1.checkValid = true;
alert(myObject1.checkValid);

var myObject2 = new MyObject();
alert(myObject2.checkValid); 
```

**工作示例：http:** [//jsfiddle.net/PzhUV/](http://jsfiddle.net/PzhUV/)

# less - 你如何使用 LESS CSS isurl 保护？

> ID：15374844
> 
> 赞同：1
> 
> 时间：2013-03-13T00:26:23.920
> 
> 标签：less

我似乎无法让 LESS CSS 的 isurl 方法工作。

*   如果我将“ [http://www.google.com](http://www.google.com) ”传递给 mixin，则 isurl 不会评估为 true。
*   如果我传入[http://www.google.com](http://www.google.com)（不带引号），那么它不会编译。
*   我的 isnumber 警卫按我的预期工作。

制作了以下简单的测试工具。文字为蓝色。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>  
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <style type="text/less" media="screen">

        .testIsUrl(@i) when (isurl(@i)) { @textColor:red; }
        .testIsUrl(@i) when not (isurl(@i)) { @textColor:blue; }
        .testIsNum(@x) when (isnumber(@x)) { @fontSize: 30pt; }
        .testIsNum(@x) when not (isnumber(@x)) { @fontSize: 10pt; }

        .testIsUrl("http://www.google.com");
        //.testIsUrl(http://www.google.com); // results in error
        .testIsNum(32); // evaluates to true in isnumber
        //.testIsNum("32"); // evaluates to false in isnumber

        .text { color: @textColor; font-size: @fontSize;}
    </style>
    <script src="https://raw.github.com/cloudhead/less.js/master/dist/less-1.3.0.js" type="text/javascript"></script>
</head>
<body>
        <div id="main">
            <div class="text">This text should be red if isurl is true... and big font if isnum is true</div>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:23:36.570

似乎类型检查功能`url`只是检查您是否明确将其声明为 CSS`url`类型。换句话说，这使得它评估为`true`：

```
.testIsUrl(url("http://www.google.com")); 
```

它不会检查您传递的内容是否实际上是有效的 url 路径，也不会检查它是否是有效的 url 语法。

**更新：测试空字符串**

您提到需要测试空字符串。您可以使用 javascript 执行此操作。上面给出的代码是这样的：

```
.testIsUrl(@i) when ((`@{i} === '' ? 1 : 0`) = 1) { @textColor:red; }
.testIsUrl(@i) when not ((`@{i} === '' ? 1 : 0`) = 1) { @textColor:blue; } 
```

# visual-studio-2010 - 无法连接到 TFS 2010 分析服务

> ID：15374850
> 
> 赞同：0
> 
> 时间：2013-03-13T00:26:53.350
> 
> 标签：visual-studio-2010, sql-server-2008-r2, ssas

我正在尝试在 TFS 2010 中设置报告。

我无法连接到 Analysis Services 数据库，也无法重建 Analysis Services 数据库。

我尝试通过 TFS 管理控制台和 SSMS 进行连接，但在 SSMS 中出现此错误

## 连接到服务器

无法连接到 xxx.com,1031。

* * *

附加信息：

无法建立连接。确保服务器正在运行。(Microsoft.AnalysisServices.AdomdClient)

* * *

请求的名称有效，但未找到请求类型的数据（系统）

以及 TFS Admin 中的此错误

找不到或无法访问您指定的 SQL Server 实例。指定另一个服务器或实例。

sql server 分析服务服务正在运行。

我使用以下文章确定了 SSAS 服务的正确端口，但仍然无法连接。

[http://support.microsoft.com/kb/2466860](http://support.microsoft.com/kb/2466860)

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:22:37.703

这是端口号。

我通过使用上面的链接来识别端口号，然后使用 TFS 管理工具连接来修复它。

# naudio - NAudio 多个 WaveOut 对象

> ID：15374852
> 
> 赞同：0
> 
> 时间：2013-03-13T00:27:00.570
> 
> 标签：naudio

目前我正在构建一个合成器。我想知道是否有多个 waveOut() 对象，因为我希望我的合成器是复音的（同时按下多个键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:04:34.153

您不应打开多个 WaveOut 对象。相反，创建一个混音器，`MixingSampleProvider`用于将所有合成器声音的输出相加。它允许动态添加输入并在完成时自动删除它们。如果没有输入，您需要将其配置为产生无休止的静音流，否则 WaveOut 将假定没有更多内容可播放并自动停止。

# mysql - MySQL 加入让我感到困惑，我总是遇到语法错误

> ID：15374855
> 
> 赞同：1
> 
> 时间：2013-03-13T00:27:05.387
> 
> 标签：mysql, join

我需要从`MySQL`数据库中获取一些数据。我有使用两个单独的简单查询的功能，但我确信这可能可以通过一个使用`JOIN`. `SQL`不是我的强项，我在尝试时不断收到语法错误。当然，我可以保持原样，为什么不呢，它可以工作。但我更希望看到一个真实世界的示例，说明如何将它们连接起来，以便将来尝试将其应用于其他查询。

查询一是：

```
select manufacturers_id from products where products_name = product a 
```

然后将结果放入变量中并用于以下

```
select manufacturers_name from manufacturers where manufacturers id = $man_id 
```

因此，基本上，该`products`表包含`manufacturers_id`，我们需要为给定产品收集它，以从表中找出制造商名称`manufacturers`。 `manufacturers_id`是公共领域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:31:04.450

试试这个：

```
SELECT b.manufacturers_name 
FROM products a
LEFT JOIN manufacturers b ON a.manufacturers_id = b.manufacturers_id
WHERE a.products_name = 'PRODUCT NAME' 
```

下面是一张图`SQL Joins`

![SQL 连接](../Images/7984438b9ab714af74b4a61b0924b17f.png)

[图片来源](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:31:02.717

我相信这就是你要找的

```
SELECT manufacturers.manufacturers_name
FROM products
JOIN manufacturers on manufacturers_id=products.manufacturers_id
WHERE manufacturers_name='product a' 
```

使用连接，您只需要遵循此语法，并记住您必须将匹配的列设置为彼此相等，这样您就不会得到无效的行。

我将向您展示使用表连接的等效方法，但我真的不想鼓励使用该语法，即使是偶然的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:33:36.970

试试这个：

```
 select m.manufacturers_name from products p, manufacturers m
 where p.products_name = 'productA' and p.manufacturers_id = m.id 
```

# python - 所有 Python 类都应该扩展对象吗？

> ID：15374857
> 
> 赞同：137
> 
> 时间：2013-03-13T00:27:13.343
> 
> 标签：python, inheritance

我发现以下两项工作：

```
class Foo():
    def a(self):
        print "hello"

class Foo(object):
    def a(self):
        print "hello" 
```

所有 Python 类都应该扩展对象吗？不扩展对象是否有任何潜在问题？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-13T00:31:29.893

在 Python 2 中，不继承自`object`将创建一个旧式类，除其他效果外，它会导致`type`给出不同的结果：

```
>>> class Foo: pass
... 
>>> type(Foo())
<type 'instance'> 
```

对比

```
>>> class Bar(object): pass
... 
>>> type(Bar())
<class '__main__.Bar'> 
```

此外，多重继承的规则也[有所不同](http://www.python.org/download/releases/2.2.3/descrintro/)，我什至不会在这里总结。我看到的所有关于 MI 的优秀文档都描述了新式类。

最后，旧式类在 Python 3 中消失了，继承`object`变得隐含。因此，除非您需要与旧软件向后兼容，否则总是更喜欢新样式的类。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-13T00:29:55.510

`object`在 Python 3 中，无论你自己是否这么说，类都是隐式扩展的。

在 Python 2 中，有[旧式和新式的](http://docs.python.org/release/2.5.2/ref/node33.html)类。要表明一个类是新式的，你必须显式地继承自`object`. 如果不是，则使用旧式实现。

你通常想要一个新式的课程。显式继承`object`。请注意，这也适用于旨在与 Python 2 兼容的 Python 3 代码。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-06-16T11:57:23.237

在 python 3 中，您可以通过三种不同的方式创建一个类，并且它们在内部都是相等的（参见示例）。不管你如何创建一个类，python 3 中的所有类都继承自名为 **object**的特殊类。类**对象** 是python中的基础类，提供了很多功能，如双下划线方法、描述符、super()方法、property()方法等。

示例 1。

```
class MyClass:
 pass 
```

示例 2。

```
class MyClass():
 pass 
```

示例 3。

```
class MyClass(object):
  pass 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T00:29:15.430

是的，所有 Python 类都应该扩展（或者更确切地说是子类，这里是 Python）对象。虽然通常不会出现严重的问题，但在某些情况下（如多重继承树），这将很重要。这也确保了与 Python 3 更好的兼容性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-17T07:26:53.830

正如其他答案所涵盖的那样，Python 3 从 object 继承是隐式的。但他们没有说明你应该做什么以及什么是约定。

Python 3 文档示例都使用以下约定样式，因此我建议您在 Python 3 中的任何未来代码中都遵循此样式。

```
class Foo:
    pass 
```

来源：[https ://docs.python.org/3/tutorial/classes.html#class-objects](https://docs.python.org/3/tutorial/classes.html#class-objects)

引用示例：

> 类对象支持两种操作：属性引用和实例化。
> 
> 属性引用使用 Python 中所有属性引用的标准语法：obj.name。有效的属性名称是创建类对象时类名称空间中的所有名称。因此，如果类定义如下所示：
> 
> ```
> class MyClass:
>     """A simple example class"""
>     i = 12345
> 
>     def f(self):
>         return 'hello world' 
> ```

另一个引用：

> 一般来说，实例变量用于每个实例唯一的数据，类变量用于类的所有实例共享的属性和方法：
> 
> ```
> class Dog:
> 
>     kind = 'canine'         # class variable shared by all instances
> 
>     def __init__(self, name):
>         self.name = name    # instance variable unique to each instance 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T00:30:09.670

在 python3 中没有区别，但在 python2 中，不扩展`object`为您提供了旧式类；您想在旧式课程上使用新式课程。

# javascript - 使用 Javascript 更改预定义的样式属性

> ID：15374858
> 
> 赞同：0
> 
> 时间：2013-03-13T00:27:14.393
> 
> 标签：javascript

如果 style 属性已经设置为 display: none; 如何将其更改为显示：块；调用 toggleControls 函数时？

```
function toggleControls() {
    var leControls = document.getElementsByClassName('le-controls'); 
    for(var i = 0; i < leControls.length; i++) { leControls[i].style.display = 'none'; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:29:32.513

您可以检查它是否已经`none`：

```
var style, leControls = document.getElementsByClassName('le-controls');
for (var i = 0; i < leControls.length; i++) {
    if ('none' == leControls[i].style.display) {
        style = 'block';
    }
    else {
        style = 'none';
    }
    leControls[i].style.display = style;
} 
```

# asp.net-mvc - 如何将对象从ajax传递到MVC中的服务器？

> ID：15374860
> 
> 赞同：0
> 
> 时间：2013-03-13T00:27:19.283
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有两个模型，有。

```
public class CreateAssignmentViewModel {
    ...
    public List<CreateAssignmentSelectedItem> SelectedItems { get; set; }
}

public class CreateAssignmentSelectedItem {
    ...
} 
```

现在我有一个视图 where contains `CreateAssignmentViewModel`，正如您在上面看到的那样，这个类包含一个属性 where is a`List<CreateAssignmentSelectedItem>`

```
@model Contoso.MvcApplication.Models.Assignment.CreateAssignmentViewModel
@{
    ViewBag.Title = "Create Assignment";
    ...
}

@using (Html.BeginForm()) {
    ...
} 
```

在里面`Html.BeginForm`，我有一个局部视图。在其中我有一个使用 ajax 的按钮，用于更新部分视图。

查看以下事件。数据在哪里：我不知道要输入什么才能仅访问该属性`SelectedItems`

```
var addQuestionToAssignmentContent = function (questionId)
{
    $.ajax({
        url: "/Assignment/AddItemToAssignmentContent",
        type: "post",
        data: { model: $(this).serialize() /* HERE I DON'T KNOW TO ACCESS THE */, itemId: questionId },
        success: function (response) {
            var $target = $("#assignmentContent");
            var $newHtml = response;
            $target.replaceWith($newHtml);
        }
    });
};

    public ActionResult AddItemToAssignmentContent(List<CreateAssignmentSelectedItem> model, string itemId)
    {
        ...
        PartialView(..);
    } 
```

如何只传递方法中的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:36:26.307

首先，给你的表单一个 ID：

```
@using (Html.BeginForm("actionName", "controllerName", FormMethod.Post, new{id = "frmUpdate"})) { 
```

其次，将您的代码更改为：

```
var f = $("#frmUpdate");
    $.ajax({
        url: f.attr('action'),
        type: f.attr('method'),
        data: f.serialize(),
        //etc.. 
```

我在大多数情况下都使用它，效果很好。数据应自动绑定到您在更新操作中拥有的模型。所以，例如......如果你有一个`@model`类型，`MyModel`那么在更新操作中它应该看起来像这样：

```
[HttpPost]
public ActionResult Update(MyModel updatedModel) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:25:38.613

有时我和一个前端人员一起工作，他可能不遵守正确的模型，他可能会更改表单字段或其他任何东西。在这种情况下，我只是让他序列化表单并以他想要的任何方式将其传递给操作。

然后我使用 FormCollection 对象来获取我需要的数据。

你的 json 调用

```
var addQuestionToAssignmentContent = function (questionId)
{
    $.ajax({
        url: "/Assignment/AddItemToAssignmentContent",
        type: "post",
        data: { model: $(this).serialize() /* HERE I DON'T KNOW TO ACCESS THE */, itemId: questionId },
        success: function (response) {
            var $target = $("#assignmentContent");
            var $newHtml = response;
            $target.replaceWith($newHtml);
        }
    });
};
Get a form collection object

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddItemToAssignmentContent(FormCollection collection)
{
       vars someValue = collection.GetValue("somefield").AttemptedValue;
} 
```

但是，如果我像您一样控制前端，那么按照 Matt 的建议，您应该使用 pass a 模型；

# wordpress - Wordpress 大写评论

> ID：15374861
> 
> 赞同：0
> 
> 时间：2013-03-13T00:27:38.990
> 
> 标签：wordpress

我有人在我的 Wordpress 博客上发表评论。

有时他们不会将句子的第一个字母大写。

是否可以在将用户的评论添加到数据库之前将其大写？

有任何想法吗？

更新和回答：

我还不能在下面添加答案，但挂钩评论的答案在以下示例中：[http ://codex.wordpress.org/Plugin_API](http://codex.wordpress.org/Plugin_API)

# python - 使用 Python 进行字符控制

> ID：15374864
> 
> 赞同：3
> 
> 时间：2013-03-13T00:27:57.493
> 
> 标签：python

我想知道是否有人知道如何导入精灵并在 python 中按下箭头键时让它移动，而不使用 pygame 或其他库。这纯粹是出于好奇，因为我只是在考虑某种个人挑战，这就是我想到的：一个没有 pygame 或 libtcod 帮助的 python 游戏。这是可能的，还是你需要一个图书馆来为你做这件事？我很感激任何人对此的意见。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:31:20.780

我想到的是使用 Tkinter 的 Canvas 类。很可能使用此类上的绑定来执行类似描述的简单程序。

一个很好的例子可以在 Mark Lutz 的 Programming Python ( [http://shop.oreilly.com/product/9780596158118.do](http://shop.oreilly.com/product/9780596158118.do) ) 中找到，Moving Pics 示例。

如果您不拥有它，您仍然可以通过使用页面右侧的链接下载代码来查看它的代码作为参考。相应文件夹的路径是`/PP4E-Examples-1.3.1/Examples/PP4E/Gui/MovingPics/`.

# ios - 向教育机构分发试用版 iOS 应用程序

> ID：15374873
> 
> 赞同：1
> 
> 时间：2013-03-13T00:28:42.237
> 
> 标签：ios, ios6, distribution

我正在寻找将原型/试点应用程序分发给 K-12 机构的最佳方式，但我似乎不太明白。

使用常规 App Store 或批量购买计划商店似乎都不理想，因为该应用程序仅适用于教师已获得登录凭据的试点教室。其他人将无法以任何方式使用该应用程序，因此如果该应用程序通过审核，我们可能会获得最低评分。

看起来可行的两个选项是：

*   Enterprise Distribution：从技术上讲，它并不真正适用于这种情况，但我听说人们成功地使用了它。构建应用程序并通过企业分发流程分发它。问题是，从技术上讲，由于我们不隶属于我们正在试点的机构，我们必须让他们每年支付 300 美元，并将我们添加为他们的承包商开发人员，我不认为会发生这种情况。我听说的方法是开发人员注册企业帐户并使用机构设备，就好像他们是该公司的一部分一样。
*   自定义 B2B 应用程序：似乎也可以使用这条路线，尽管自定义 B2B 应用程序仍需通过 Apple 审核流程，因此我不清楚原型是否会通过该流程走得太远。此外，更新应用程序很可能会很痛苦，因为您必须等待审核过程完成。目前还不清楚是否允许教育机构使用这条路线。

我真的很想知道您对其中任何一种的体验是什么，以及您是否认为它们很适合这种情况。我还有其他选择吗？尤其重要的是，分发流程对于多个设备来说是简单的，并且允许应用程序的无痛更新，因为我们希望尽可能快地进行迭代。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:37:36.690

另一个可能满足您需求的选项是使用 TestFlight [http://www.testflightapp.com](http://www.testflightapp.com)。它允许您通过网络将应用程序的 beta 或原型版本发送到各个设备。但是，您仍然受限于使用 Apple 的配置，并且在给定的一年中最多只能分发 100 台设备。用户还需要向您提供他们的设备 UDID。如果您只希望拥有一些 beta 测试人员，这可能是一个很好的解决方案。

# blackberry - 黑莓应用程序版本更新删除了某些设备上的持久存储对象

> ID：15374875
> 
> 赞同：2
> 
> 时间：2013-03-13T00:28:48.553
> 
> 标签：blackberry, persistent-storage

我有一个将对象存储在持久存储中的黑莓应用程序。更新应用程序后，它应该从持久存储中读取现有值（如果有），并继续使用该值。这适用于某些设备，但不适用于其他设备。我在几台运行 OS 版本 7 的设备上进行了测试，所有这些设备都按预期工作。但是，在使用版本 5 的设备和使用版本 6 的设备上，对象在持久存储中不再可读。

即使我没有更改除版本号以外的应用程序的任何内容，情况也是如此。从持久存储中保存和加载相同的类/对象，以及用于访问它的相同对象 ID。

我正在遵循的重现此过程的过程是：

1.  使用命令行完全删除应用程序及其所有数据。
2.  通过从浏览器下载 .jad 文件来加载应用程序的版本，验证它是否将数据存储在持久存储中。
3.  当应用程序在后台运行时，通过浏览器下载 .jad 文件加载更高版本。
4.  下载高版本后，系统询问我是否要更换之前的版本，我确认我要更换。
5.  系统加载新版本，并提示我必须重新启动才能使更改生效。我选择“重启”。
6.  设备重新启动。更高版本正在运行，但无法从持久存储中读取对象。

我可以持续重现此问题的设备是运行 6.0 Bundle 2647 的 Blackberry 9800 (Torch)。

如上所述，这只发生在某些设备上，而不是所有设备上，这让我认为这里可能会发生编码错误以外的其他事情。

任何人都有关于这个问题的想法或如何进一步调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:50:01.873

奇案。

您确定正在提交持久性存储吗？当数据已存储在存储中但未提交时，我通常会发生类似的事情。如果是这种情况，并且您加载旧版本，存储一些数据并重新启动设备，则数据将不会持久存储。

您提到当您加载更高版本时，该应用程序仍在后台运行。您可能想检查是否`commit()`被执行。

# php - Ajax 表单有时只提交

> ID：15374876
> 
> 赞同：4
> 
> 时间：2013-03-13T00:28:48.707
> 
> 标签：php, javascript, jquery, mysql, ajax

SO上有几个这样的问题，但没有一个答案对我有用。我都试过了。

我试图最小化我粘贴的代码，但是这个脚本有点难

我有一个评论表单，它通过 ajax 提交到一个 php 脚本，该脚本保存评论，然后获取所有评论并重新显示它们，以便在不刷新页面的情况下显示新评论。

只有有时评论才能成功提交到数据库并正确重新显示。**通常**几乎**所有其他**提交的评论都会被保存。每隔一段时间似乎什么都没有发生。

我真正的问题是每次提交评论时都没有保存评论。

这是javascript和ajax调用：

```
$(document).ready(function(){
    var working = false;

    $('#commentForm').submit(function(e){

        if(working) return false;

        working = true;
        $('#submitComment').val('Working..');
        $('span.error').remove();

        $.post('/ajax/comment.process.php',$(this).serialize(),function(msg){

            working = false;
            $('#submitComment').val('Submit');

            if(msg.status){

                $('#commentArea').slideDown().$(msg.html).prepend('#commentArea');
            $('#blogComment').val('');
            }
            else {

                $.each(msg.errors,function(k,v){
                    $('label[for='+k+']').append('<span class="error">'+v+'</span>');
                });
            }
        },'json');
    });
}); 
```

这是提交评论的函数：

```
public function addComment($user_id) {

    $validate = new data_validation;

    $_POST = $validate->sanitize($_POST);

    $newCom = $_POST['blogComment'];
    $blog_id = intval($_POST['blogID']);
    $photoSubmit = $_POST['comPhoto'];

    $newComQuery = $this->mysqli->query("INSERT INTO b_comments (blog_id, user_id, date, content, photo) VALUES ('".$blog_id."', '".$user_id."', Now(), '".$newCom."', '".$photoSubmit."')");

    if($newComQuery === false) {
        echo "Query failed";
    }else{

        $returnCom = $this->comMarkup($blog_id);
        echo $returnCom;

    }           
} 
```

这是`comMarkup()`与评论相呼应的一部分功能（它只是重要的部分）：

```
//  This method outputs the XHTML markup of the comment
public function comMarkup($blog_id) {

    $sql = $this->mysqli->query("SELECT * FROM b_comments WHERE blog_id = '".$blog_id."' ORDER BY date DESC");

    while($d = $sql->fetch_assoc()) {

        $d = $validate->sanitize($d);

        echo "

            <div class='comment-block'>
                <span class='com-img'><img src='".$photo_path."' /></span>
                <h3 style='display: inline;'><a href='".$profile."'>".$userName."</a></h3>
                <div class='com-date'>".$d['date']."</div>
                <p>".$comContent."</p>
            </div>
        ";
    }
} 
```

**编辑：**这是所要求的 comment.process.php 代码：

```
 session_start();

include_once('../classes/comment.class.php');
include_once('../classes/db.class.php');
include_once('../classes/user.class.php');

$user_id = $_SESSION['user_id'];

$db = new DBConnection;
$comments = new Comment($db);
$user = new User($db);

$blogID = intval($_POST['blogID']);

$addCom = $comments->addComment($user_id);

echo json_encode(array('status'=>1,'html'=>$addCom)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:34:17.180

鉴于您的描述，我的猜测是它与您的`working`变量有关，并且它未设置为`false`您的`$.post()`.

但是，您制定流程的方式存在一些逻辑、效率和可管理性问题。我建议查看[$.post() 的官方 jQuery 文档](http://api.jquery.com/jQuery.post/)，特别是`.done()`,`.fail()`和`.always()`链式方法。

我还建议您将 PHP 变量命名为 以外的名称`$_POST`，这样它就不会与 PHP 超级全局变量混淆。

最后，我建议将您的评论视为一个对象并使用[PDO](http://www.php.net/manual/en/pdo.query.php)（这是指向 PDO:query 的链接，作为一种“沉浸式”方法，但请务必阅读所有文档）。它将为您节省大量数据库交互方面的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:16:33.650

看起来你有一个由`working`标志引起的竞争条件。由于您只是使用该标志来显示“工作...”消息并防止在处理请求时提交，因此我将只使用正常`$.ajax`调用并将“工作”逻辑放入`beforeSend`选项中。这是一个例子：

```
$(document).ready(function(){
    $('#commentForm').submit(function(e){
        $.ajax({
            type: 'POST'
            url: '/ajax/comment.process.php',
            dataType: 'json',
            beforeSend: function(jqXHR, settings) {
                $('#submitComment').val('Working..');
                $('span.error').remove();
            },
            data: $(this).serialize(),
            complete: function(jqXHR, textStatus) {
                var msg = jqXHR.responseText;
                $('#submitComment').val('Submit');

                if(msg.status){
                    $('#commentArea').slideDown().$(msg.html).prepend('#commentArea');
                    $('#blogComment').val('');
                }
                else {
                    $.each(msg.errors,function(k,v){
                        $('label[for='+k+']').append('<span class="error">'+v+'</span>');
                    });
                }
            };
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:06:03.853

如果用户发送评论`'`可能会发生错误。当您发送评论时，该字符串将破坏 mmysqli_query。它可以帮助你，也许。

公共函数 addComment($user_id) {

```
$validate = new data_validation;

$_POST = $validate->sanitize($_POST);

$newCom = htmlspecialchars($_POST['blogComment'], ENT_QUOTES);
$blog_id = intval($_POST['blogID']);
$photoSubmit = htmlspecialchars($_POST['comPhoto'], ENT_QUOTES);

$newComQuery = $this->mysqli->query("INSERT INTO b_comments (blog_id, user_id, date, content, photo) VALUES ('".$blog_id."', '".$user_id."', Now(), '".$newCom."', '".$photoSubmit."')");

if($newComQuery === false) {
    echo "Query failed";
}else{

    $returnCom = $this->comMarkup($blog_id);
    echo $returnCom;

} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T18:27:55.713

所以，如果我正确理解了这个问题，你提交的评论并没有插入数据库，它*也*可能没有显示数据库错误或打印出你的`Query failed`字符串？

好像您的 PHP 脚本根本没有被执行？

如果是这种情况，我*通常会说*像这样的间歇性错误最可能的罪魁祸首是您的浏览器缓存。您的浏览器正在查看 URL，认为它已经知道该 URL 附带的内容，并返回该内容，甚至无需将您的信息发送到服务器。最简单的方法是在文件调用中添加一个随机查询字符串，例如：

```
cachebuster = new Date();
'/ajax/comment.process.php?cachebuster='.cachebuster.getTime(); 
```

...我说“通常”，因为您使用的是 POST 并且在“正常”情况下，浏览器不会缓存 POST 请求。但这是可能的，而且战斗起来很简单，所以试一试。如果您使用 Chrome，也可以通过按 f12 键，转到“网络”选项卡，然后运行您的表单来诊断这种情况。它应该告诉您结果是否是从缓存中检索到的。

除此之外，如果您依赖于magic_quotes（或者更糟的是，您*不*依赖于magic_quotes），您需要学习处理SQL 注入的正确方法。您永远不应该将来自浏览器的不受信任的数据直接插入数据库。转义它或使用参数化查询。如果您的查询遇到间歇性问题，这可能与您的评论内容有关，在某些情况下会引发查询，如上所述，很可能是在缩略词中包含撇号。通过背靠背提交两个表格进行诊断：`trythis`然后`try'this`。如果第一个成功而第二个失败，您可能已经找到了答案。正确转义您的输入将解决此问题。

最终，上面已经给出了所有这些建议，但希望这提供了一些背景信息来帮助理解原因和原因。

* * *

编辑：我看到，现在我仔细观察，您实际上是在使用您未在此处共享的方法转义您的查询。假设它工作正常，那么这*不应该*是一个问题。

尝试在脚本开头回显有效响应，甚至不执行任何操作。如果总是返回，那么您至少知道脚本被成功调用。

如果ajax 调用返回错误，您的变量*可能*会出现问题。`working`在这种情况下，它永远不会将其设置回 false。

您的 #1 盟友是 Chrome 开发人员工具中的“网络”选项卡，或者在 Firefox Firebug 扩展程序的控制台选项卡中查看响应。

* * *

编辑2：

```
$.post('/ajax/comment.process.php',$(this).serialize(),function(msg){
    // post stuff, REMOVING the working variable set, cuz it won't be necessary here...
},'json').always(function() { working = false; }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T20:10:59.553

我想您应该使用`encodeURIComponent($('#blogComment').val())`somwhere 将您的 blogcomment 值传递给 PHP 文件以进行插入。

> 编辑1：

```
public function addComment($user_id) {

    $validate = new data_validation;

    $_POST = $validate->sanitize($_POST);

    $newCom = rawurlencode($_POST['blogComment']); 
```

如果`rawurlencode()`没有工作。使用以下功能：

```
function encodeURIComponentNew($str) {

    $revert = array('%21'=>'!', '%2A'=>'*', '%27'=>"'", '%28'=>'(', '%29'=>')');
    return strtr(rawurlencode($str), $revert);
} 
```

（函数来自[What is the equivalent of JavaScript's encodeURIcomponent in PHP?](https://stackoverflow.com/questions/1734250/what-is-the-equivalent-of-javascripts-encodeuricomponent-in-php)）

接着

```
public function addComment($user_id) {

    $validate = new data_validation;

    $_POST = $validate->sanitize($_POST);

    $newCom = encodeURIComponentNew($_POST['blogComment']); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:01:10.737

怀疑这是相关的，但我过去在函数内使用“echo”执行 ajax 时遇到问题，然后尝试再次回显返回的值。

尝试将所有函数中的回声更改为“返回”，而不是像这样：

```
public function addComment($user_id) {

    $validate = new data_validation;

    $_POST = $validate->sanitize($_POST);

    $newCom = $_POST['blogComment'];
    $blog_id = intval($_POST['blogID']);
    $photoSubmit = $_POST['comPhoto'];

    $newComQuery = $this->mysqli->query("INSERT INTO b_comments (blog_id, user_id, date, content, photo) VALUES ('".$blog_id."', '".$user_id."', Now(), '".$newCom."', '".$photoSubmit."')");

    if($newComQuery === false) {
        return "Query failed";
    }else{
        $returnCom = $this->comMarkup($blog_id);
        return $returnCom;
    }           
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T11:42:52.667

这可能是**浏览器 cookie**的原因。因此，在您的**URL**中，只需为唯一的 URL 模式添加额外的 queryString。

**例子：**

```
 $.post('/ajax/comment.process.php?random=randamnumber'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T01:21:42.440

你在使用 json_encode() 吗？如果不是所有的回声都将作为“文本”而不​​是作为您在 jquery 中访问的 json 对象接收

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-26T18:41:45.493

您的 PHP 代码中存在 SQL 注入漏洞，请确保正确转义变量或使用准备好的查询。

至于JS部分，一定要返回true；在 .submit() 函数的末尾。（对你来说，它会在 $.post() 调用之后）

此外，如果您的 php 脚本中存在错误，您的“工作”变量可以永远设置为 true，这**很可能**发生在 SQL 注入漏洞到位的情况下。

**说明**：*您将其设置为 true，由于来自 PHP 后端的错误 500，可能不会调用成功回调，因此您的回调永远不会将其设置为 false，然后您将无法再提交，直到下一页刷新*。

# r - 在 R 中，是否可以设置开罗窗口的标题？

> ID：15374881
> 
> 赞同：3
> 
> 时间：2013-03-13T00:29:26.273
> 
> 标签：r, cairo

我通过 R 中的 Cairo 包输出了几个绘图。但是有五个标题为“Cairo Graphics”的窗口使得在任务栏中很难找到正确的一个。

无论如何要更改标题栏中的文本吗？

**这些不起作用：**

*   `CairoWin(title="Hello")`
*   `windows.options(title="Hello"); CairoWin()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T14:02:28.113

不幸的是，窗口标题在 Cairo 源代码中是硬编码的（在 中`w32-backend.c`）：

```
window gawin = newwindow("Cairo Graphics", rect(20,20,width,height),
                         Document|StandardWindow); 
```

所以答案是否定的，除非你想打补丁并重新编译它的包。

# c# - 在单声道中搜索 android 或 c# 时自动滚动

> ID：15374885
> 
> 赞同：0
> 
> 时间：2013-03-13T00:30:00.720
> 
> 标签：c#, xamarin.android

我在列表视图中有一个名称列表，我也有一个搜索，当我搜索一个名称时，它会显示我搜索的那个。现在我只想自动滚动到我搜索的那个。我怎样才能在单声道中为 android 或在 c# 中做到这一点。如果您不知道什么是 android 单声道，请单击此链接： http: [//www.codeguru.com/csharp/sample_chapter/introduction-to-mono-for-android.htm](http://www.codeguru.com/csharp/sample_chapter/introduction-to-mono-for-android.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:35:58.873

如果我理解正确，您可以尝试：

```
listview.SmoothScrollToPosition(position); 
```

# php - 在 mysql 数据库字段中查找 URL 的变体

> ID：15374886
> 
> 赞同：1
> 
> 时间：2013-03-13T00:30:03.843
> 
> 标签：php, mysql

嗨，我有一个 MYSQL 查询，它计算 www.google.com 出现在数据库字段中的次数，效果很好，我试图找到一种识别 Google 的方法，无论它是 www.google.com , www.google.co.uk 等

下面是我的代码，

```
 $result = mysql_query("SELECT * FROM data WHERE referer='www.google.com' and  member ='$site_id'"); 
```

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:33:43.480

您可以使用`LIKE`通配符语法来搜索字符串：`%`对于零个或多个任意字符：

```
WHERE referer LIKE 'www.google.co%' 
```

您也可以使搜索更具体或更少。

* * *

顺便说一句，您的代码容易受到注入。您应该对 PDO 或 mysqli 使用正确的参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:33:04.070

您可以尝试一个简单的`LIKE`查询：

`SELECT * FROM data WHERE referer LIKE 'www.google.%' and member ='$site_id'`

`referer`这将匹配以字符串“www.google.”开头的任何值。

此外，强制建议您不要使用这些`mysql_*`功能......正在被弃用。使用`PDO`或`mysqli`代替。

# android - 如何在android中进行双面显示

> ID：15374887
> 
> 赞同：1
> 
> 时间：2013-03-13T00:30:05.363
> 
> 标签：android, android-layout, android-animation

我有一个 RelativeLayout 包含我想在屏幕上静态定位的信息（没有可察觉的移动）。但我需要从左侧大约 1/3 处对其“打开”进行动画处理。

例如，假设它包含文本“一只敏捷的棕色狐狸跳过了懒狗”

它应该动画如下：

```
 n
           wn fo
          own fox j
            ...
  quick brown fox jumped over the lazy
  quick brown fox jumped over the lazy d
A quick brown fox jumped over the lazy dog 
```

我该如何做到这一点？

我不能有两个块遮挡移开的内容，因为我需要能够看到布局后面的内容，直到它被动画遮挡。（除非您知道如何制作一个“隐形块”，使其覆盖的父级部分不可见。：P）

我尝试了一个剪辑线性布局容器，该容器在内容被翻译到右侧时向左更宽地进行动画处理，但这会导致缓慢的动画出现明显的抖动，并且在较短的持续时间内会出现多个像素的不同步。

我的猜测是我将不得不覆盖 onDraw，但我不清楚如何这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:36:04.150

无需覆盖`onDraw`. 您可以使用[片段](http://developer.android.com/guide/components/fragments.html)和/或[动画](http://www.vogella.com/articles/AndroidAnimation/article.html)。

# android - 我如何确定图像需要多大（以像素为单位）才能让 Android 跨设备正确显示该图像？

> ID：15374891
> 
> 赞同：13
> 
> 时间：2013-03-13T00:30:52.310
> 
> 标签：android, pixel, density-independent-pixel

我有两张图片要在我的应用程序中显示。

第一个图像是全屏的（作为应用程序的背景）。[我已经多次阅读developer.android.com](http://developer.android.com/guide/practices/screens_support.html)上的“支持多个屏幕”文章，但是对于每个 dpi 类别的图像大小，我仍然一头雾水。我尝试了我认为正确的尺寸，但是在大屏幕（即 1280x800@mdpi）上查看应用程序时，我发现背景出现像素化。这是可以理解的，因为我的 mpdi 图像是 320x480px。我该如何纠正？我应该使用什么尺寸的图像？

第二个图像是一个按钮。目前我的图像分辨率非常高，但是应用程序将其缩小，因此看起来不错。但是，我不希望在应用程序发布时是这样。对于这个图像，我需要知道图像应该是多少像素大小。目前，它`60dp x 50dp`在应用程序内。这将以像素为单位转换为什么？我知道使用公式`px = dp * (dpi / 160)`，但是在这种情况下， *dpi是多少？*我不能为此图像使用 NinePatch PNG。

我不明白让我的图像以什么尺寸（以像素为单位）开始，以便它们在 Android 设备上正确显示。如果您在 mdpi 设备上，是否 dp = px？

## 更新：

经过几个小时的努力，我想出了以下几点：

```
drawable-xlarge-xhdpi   2560x1920px
drawable-large-xhdpi    1920x1440px
drawable-normal-xhdpi   1280x960px

drawable-xlarge-hdpi    1920x1440px
drawable-large-hdpi     1440x1080px
drawable-normal-hdpi    960x720px

drawable-xlarge-mdpi    1280x960px
drawable-large-mdpi     960x720px
drawable-normal-mdpi    640x480px

drawable-xlarge-ldpi    960x720px
drawable-large-ldpi     720x540px
drawable-normal-ldpi    480x360px 
```

这些将是我的可绘制目录和我期望的每个目录的最大分辨率（我决定不支持小屏幕）。因此，我的图像将是这些尺寸。

在我的手机上看起来很棒。我没有看到任何文物。它似乎也适用于 1280x800@mpdi 屏幕的模拟器，因此希望它适用于所有设备......

有没有人认为这样做有问题？有一个更好的方法吗？我的计算看起来正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:42:40.823

给你，我把它弄下来了，我只是把它传过去

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp
Generalised Dpi values for screens:

ldpi Resources for low-density (ldpi) screens (~120dpi)
mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.)
hdpi Resources for high-density (hdpi) screens (~240dpi).
xhdpi Resources for extra high-density (xhdpi) screens (~320dpi).
Therefore generalised size of your resources (assuming they are full screen):

ldpi
Vertical = 426 * 120 / 160 = 319.5px
Horizontal = 320 * 120 / 160 = 240px
mdpi
Vertical = 470 * 160 / 160 = 470px
Horizontal = 320 * 160 / 160 = 320px
hdpi
Vertical = 640 * 240 / 160 = 960px
Horizontal = 480 * 240 / 160 = 720px
xhdpi
Vertical = 960 * 320 / 160 = 1920px
Horizontal = 720 * 320 / 160 = 1440px

px = dp*dpi/160 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:58:15.360

使用 JRowan 的答案中的方法，您可以将“特殊”屏幕所需的图像添加到 res 文件夹中，如下所示：

```
res/drawable-xlarge-mdpi/background.png 
```

或者

```
res/drawable-sw600dp-mdpi/background.png
... 
```

# f# - 如何检查变量是否为 F# 中的整数？

> ID：15374900
> 
> 赞同：2
> 
> 时间：2013-03-13T00:31:23.603
> 
> 标签：f#, c#-to-f#, f#-3.0

我是 F# 的新手。

如何检查变量是整数还是其他类型。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T02:54:38.237

@ildjarn 在评论中列出了一种方法：

```
let isInt x = box x :? int 
```

一种惯用的方法是使用模式匹配。首先，定义一个有区别的联合，它定义了可能的选项：

```
type Test =
| IsAnInteger of int
| IsADouble of double
| NotANumber of Object 
```

然后使用 match 语句来确定您获得了哪个选项。请注意，当您最初创建希望与 match 语句一起使用的值时，您需要将其放入可区分的联合类型中。

```
let GetValue x =
    match x with
    | IsAnInteger(a) -> a
    | IsADouble(b) -> (int)b
    | NotAnInteger(_) -> 0 
```

由于您可能会使用您的测试来确定控制流，因此您不妨习惯性地这样做。这也可以防止您丢失案例，因为如果您不处理所有可能的案例，匹配语句会给您警告。

```
>GetValue (NotAnInteger("test"));;
val it : int = 0

>GetValue (IsADouble(3.3))
val it : int = 3

>GetValue (IsAnInteger(5))
val it : int = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:43:32.593

考虑到您将此问题标记为“c#-to-f#”，我假设您是从 C# 背景来到 F#。因此，我认为您可能对类型推断有点困惑，因为您可能习惯于显式键入变量。

如果需要，您可以显式声明*值的类型。*

```
let x:int = 3 
```

但是让类型推断为您完成这项工作通常更容易更好。你会注意到我说的是*价值*——上面的声明不是一个变量，因为你不能对它进行破坏性的赋值。如果你想要一个变量，那么这样做：

```
let mutable x:int = 3 
```

然后，您可以通过此构造为 x 分配一个新值

```
x <- 5 
```

但是，作为一项规则，您需要避免可变值。

# sql - 如何编写 SQL 查询来识别特定字段中的重复值？

> ID：15374902
> 
> 赞同：6
> 
> 时间：2013-03-13T00:31:34.227
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我正在使用的表：

![桌子](../Images/ef5564041acad90c3944df683a7a4b69.png)

我想仅识别具有不同参数的重复扣除 ID 的 ReviewID。

例如，在上图中，ReviewID 114 有两个不同的参数 ID，但两条记录的扣除 ID 相同。

出于我的目的，这条记录 (ReviewID 114) 有一个错误。对于单个 ReviewID，不应有两个或多个具有相同扣除 ID 的唯一参数 ID。

我想编写一个查询来识别这些类型的记录，但我的 SQL 技能还没有。帮助？

谢谢！

**更新 1：**如果有帮助，我正在使用 TSQL (SQL Server 2008)
**更新 2：**我正在寻找的输出将与上图相同，减去与我描述的条件不匹配的任何记录。

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T00:43:28.827

```
Select ReviewID, deduction_ID from Table
Group By ReviewID, deduction_ID
Having count(ReviewID) > 1 
```

[http://www.sqlfiddle.com/#!3/6e113/3](http://www.sqlfiddle.com/#!3/6e113/3)有一个例子

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T01:14:19.927

```
SELECT * FROM table t1 INNER JOIN (
    SELECT review_id, deduction_id FROM table
    GROUP BY review_id, deduction_id
    HAVING COUNT(parameter_id) > 1
) t2 ON t1.review_id = t2.review_id AND t1.deduction_id = t2.deduction_id; 
```

[http://www.sqlfiddle.com/#!3/d858f/3](http://www.sqlfiddle.com/#!3/d858f/3)

如果可以有精确的重复并且没关系，您可以将 HAVING 子句修改为 COUNT(DISTINCT parameter_id)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T01:23:59.463

如果我理解标准：对于 and 的每种组合，`ReviewID`您`deduction_id`只能有一个 parameter_id，并且您希望查询产生的结果*没有*违反这些规则的 ReviewID（而不是识别那些违反这些规则的行）。这将做到这一点：

```
;WITH review_errors AS (
  SELECT  ReviewID
  FROM test
  GROUP BY ReviewID,deduction_ID
  HAVING COUNT(DISTINCT parameter_id) > 1
)
SELECT t.*
FROM test t
  LEFT JOIN review_errors r
    ON t.ReviewID = r.ReviewID
WHERE r.ReviewID IS NULL 
```

解释一下：`review_errors`是一个[通用表表达式](http://blog.sqlauthority.com/2011/05/10/sql-server-common-table-expression-cte-and-few-observation/)（将其视为一个命名的子查询，不会使主查询混乱）。它选择打破标准的 ReviewID。当您对其进行左连接时，它会选择左表中的所有行，无论它们是否与右表匹配，并且仅选择右表中与左表匹配的行。不匹配的行将在右侧表的列中包含空值。通过指定`WHERE r.ReviewID IS NULL`，您可以从左侧表中消除与右侧表匹配的行。

[SQL小提琴](http://www.sqlfiddle.com/#!3/4dc10/1)

# java - Java 在浮点运算中保持尾随 0

> ID：15374904
> 
> 赞同：0
> 
> 时间：2013-03-13T00:32:02.117
> 
> 标签：java, zero

编码：

```
Float f = Float.parseFloat("1.80");
System.out.println(f); 
```

`"1.8"`在屏幕上打印。我需要将 0 保留在浮点值 (Float f) 中以进行一些验证。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T00:35:42.787

您混淆了*数字值*及其*格式*。实际存储为浮点数是**不可能**`1.80`的，但是可以将数字*显示*`String`为强制两位小数的格式。您的选择是：

1.  保留用户输入的原始字符串，如果他们给出的小数位数很
    重要

2.  将数字存储为 a `float`，但在显示数字时强制它显示为两位小数，如下所示：

    `System.out.printf("%.2f\n", f);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T00:33:06.230

这只是一个格式问题：

```
System.out.printf("%.2f\n", f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:14:37.427

1.  浮点变量没有小数位。他们有二进制的地方。
2.  1.8 和 1.80 是同一个数字，它们在 a`float`或中的表示方式相同`double`。
3.  如果您希望它们*显示*一定数量的小数位数，则必须通过`BigDecimal`或转换为小数基数，`DecimalFormat`您可以在其中控制小数位数。

简而言之，提出的问题并没有真正的意义。

# jquery - 如何创建按钮来启动和停止 JQuery 新闻收录器

> ID：15374912
> 
> 赞同：2
> 
> 时间：2013-03-13T00:32:56.823
> 
> 标签：jquery, html, xml, ajax, ticker

我正在尝试使用 JQuery 制作一个自动循环消息的新闻自动收报机，但可以通过按钮停止和启动。到目前为止，我有`<li>`会循环和重复的消息。

我正在尝试使用以下代码来创建上面提到的按钮。按钮已创建，脚本功能对我来说很合适。

```
Is there something I'm missing below? 
```

另外，是否有一个功能可以让页面自行刷新？以防有人在页面使用时操纵消息。如果我不注意这一点，那很好，我真的被按钮难住了。

感谢您提供的任何帮助。

```
<!doctype html>

<head><meta charset="utf-8" />
<title>homework</title>
<link href="resources/css/global.css" rel="stylesheet" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">

</script>

<link href='http://fonts.googleapis.com/css?family=IM+Fell+DW+Pica+SC' rel='stylesheet' type='text/css'>

</head>
<body>

<div id="page">

<ul id="ticker_01" class="ticker">

<li>1st block</li>
<li>2nd Block</li>
<li>Should be nearly finished</li>
<li>Finally done</li>
</ul>
</div>
<input type="button" class="next" value="next" />
<input type="button" class="prev" value="prev" />
<script>

function tick()
{
$('#ticker_01 li:first').slideUp( function () { $(this).appendTo($('#ticker_01')).slideDown(); });
}

setInterval(function(){ tick () }, 5000);
(function(){
var $lis = $('ul li');
var index = 0, lastIndex = 0;
start(); // activate first, add event listeners to buttons
function next(){
lastIndex = index;
if(++index == $lis.length) index = 0; // if next is out of bounds go to first
    $lis.eq(index).addClass('active');
    $lis.eq(lastIndex).removeClass('active');
};

function prev(){
    lastIndex = index;
    if(--index < 0) index = ($lis.length - 1); // if prev is less than first go to last
    $lis.eq(index).addClass('active');
    $lis.eq(lastIndex).removeClass('active');
};
function start(){
    $lis.eq(0).addClass('active');
    $('.next').click(next);
    $('.prev').click(prev);
}
})();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:40:03.293

`Is there a built-in button feature with JQuery`?

几乎没有，但你必须看看[**jQuery UI**](http://jqueryui.com/)

```
Also, is there a feature that I can use to make the page refresh itself? 
```

**是的，当然** 那是 **AJAX**

AJAX 帮助您更新您想要的内容，而无需真正的刷新，只需更新您想要的内容

参考 [http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://www.w3schools.com/jquery/jquery_ajax_intro.asp](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)

# html - 如何将两个div并排放置

> ID：15374918
> 
> 赞同：62
> 
> 时间：2013-03-13T00:33:20.870
> 
> 标签：html, css

所以我对编写代码很陌生（大约几周），我在为我的网站编写代码时碰壁了。我想要这样的布局：

![图片](../Images/86db3701d4f774527ea02d419cffe631.png) 但我不知道如何将两个盒子并排放置。一个盒子是解释我的网站的视频，而另一个盒子是注册表格。我希望这些盒子彼此相邻，它们之间有大约一英寸的间隔。

我还需要有关网站标题宽度的帮助。现在看起来标题不适合页面，导致水平滚动。有点像这样：

![图片](../Images/98a5f28057efecd472d2f804f3fe8eb4.png) 我想让整个网站就像一个大盒子，所有的内容都在那个盒子里。有人可以帮帮我吗？非常感激。先感谢您。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-13T00:40:18.093

[http://jsfiddle.net/kkobold/qMQL5/](http://jsfiddle.net/kkobold/qMQL5/)

```
#header {
    width: 100%;
    background-color: red;
    height: 30px;
}

#container {
    width: 300px;
    background-color: #ffcc33;
    margin: auto;
}
#first {
    width: 100px;
    float: left;
    height: 300px;
        background-color: blue;
}
#second {
    width: 200px;
    float: left;
    height: 300px;
    background-color: green;
}
#clear {
    clear: both;
}
```

```
<div id="header"></div>
<div id="container">
    <div id="first"></div>
    <div id="second"></div>
    <div id="clear"></div>
</div>
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-13T00:39:25.023

这将起作用

```
<div style="width:800px;">
  <div style="width:300px; float:left;"></div>
  <div style="width:300px; float:right;"></div>
</div>
<div style="clear: both;"></div> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-30T11:13:52.287

```
<div style="display: inline">
    <div style="width:80%; display: inline-block; float:left; margin-right: 10px;"></div>
    <div style="width: 19%; display: inline-block; border: 1px solid red"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-07-08T05:29:58.653

我只是并排给出两个响应式 div 的代码

```
*{
  margin: 0;
  padding: 0;
}

#parent {
  display: flex;
  justify-content: space-around;
}

#left {
  border: 1px solid lightgray;
  background-color: red;
  width: 40%;
}

#right {
  border: 1px solid lightgray;
  background-color: green;
  width: 40%;
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="parent">
        <div id="left">
        lorem ipsum dolor sit emet
        </div>
        <div id="right">
        lorem ipsum dolor sit emet
        </div>
    </div>
</body>
</html>
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-06T12:39:14.210

这只是您提供的线框的简单（非响应式）HTML/CSS 翻译。

[![在此处输入图像描述](../Images/e4f7febb0a742a520d33bf0bb7d4089b.png)](https://i.stack.imgur.com/wDKBH.jpg)

**HTML**

```
<div class="container">

  <header>
    <div class="logo">Logo</div>
    <div class="menu">Email/Password</div>
  </header>

  <div class="first-box">
    <p>Video Explaning Site</p>
  </div>

  <div class="second-box">
    <p>Sign up Info</p>
  </div>

  <footer>
    <div>Website Info</div>
  </footer>

</div> 
```

**CSS**

```
.container {
  width:900px; 
  height: 150px;
}

header {
  width:900px; 
  float:left; 
  background: pink; 
  height: 50px;
}

.logo {
  float: left;
  padding: 15px
}

.menu {
  float: right;
  padding: 15px
}

.first-box {
  width:300px; 
  float:left; 
  background: green; 
  height: 150px;
  margin: 50px
}

.first-box p {
  color: #ffffff;
  padding-left: 80px;
  padding-top: 50px;
}

.second-box {
  width:300px; 
  height: 150px; 
  float:right; 
  background: blue;
  margin: 50px
}

.second-box p {
  color: #ffffff;
  padding-left: 110px;
  padding-top: 50px;
}

footer {
  width:900px; 
  float:left; 
  background: black; 
  height: 50px;
  color: #ffffff;
}

footer div {
  padding: 15px;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-11T16:04:49.240

你可以通过三种方式做到这一点：

**浮动法**

```
<div class="float-container">
  <div class="float-child">
    <div class="green">Float Column 1</div>
  </div>
  <div class="float-child">
    <div class="blue">Float Column 2</div>
  </div>
</div>

.float-container {
    border: 3px solid #fff;
    padding: 20px;
}

.float-child {
    width: 50%;
    float: left;
    padding: 20px;
    border: 2px solid red;
} 
```

**弹性盒方法**

```
<div class="flex-container">
  <div class="flex-child magenta">
    Flex Column 1
  </div>
  <div class="flex-child green">
    Flex Column 2
  </div>
</div>
.flex-container {
    display: flex;
}

.flex-child {
    flex: 1;
    border: 2px solid yellow;
}  

.flex-child:first-child {
    margin-right: 20px;
} 
```

**CSS 网格方法**

```
<div class="grid-container">
    <div class="grid-child purple">
        Grid Column 1
    </div>
    <div class="grid-child green">
        Grid Column 2
    </div>
</div>
.grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 20px;
} 
```

[资源](https://coder-coder.com/display-divs-side-by-side/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-13T00:38:36.310

深入了解 CSS 和 HTML，您就会明白这一点。它只是左右浮动框，这些框需要在同一个 div 内。[http://www.w3schools.com/html/html_layout.asp](http://www.w3schools.com/html/html_layout.asp)可能是一个很好的资源。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-13T02:51:14.880

关于您网站的宽度，您需要考虑使用包装类来包围您的内容（这应该有助于限制您的元素宽度并防止它们超出内容范围）：

```
<style>
.wrapper {
  width: 980px;
}
</style>

<body>
  <div class="wrapper">
    //everything else
  </div>
</body> 
```

就内容框而言，我建议尝试使用

```
<style>
.boxes {
  display: inline-block;
  width: 360px;
  height: 360px;
}
#leftBox {
  float: left;
}
#rightBox {
  float: right;
}
</style> 
```

我会花一些时间研究盒子对象模型和所有“显示”属性。他们将永远有帮助。特别关注“inline-block”，我几乎每天都在使用它。

# jquery - Blueimp jQuery 文件上传插件与 Codeigniter 一步一步？

> ID：15374919
> 
> 赞同：6
> 
> 时间：2013-03-13T00:33:34.147
> 
> 标签：jquery, codeigniter, blueimp, multifile-uploader

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) 我花了 2 天时间，但没有任何效果。我还从他们的网站（[https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1)）下载了示例，但它提供了我可以的语法t 修复，因为代码中的一切看起来都很正常，而且我的编辑器也没有发现任何语法错误......另一方面，示例页面上的代码与他们提供下载的 .zip 中的代码不同。

原始演示工作正常，但我无法将其集成到 CodeIgniter 中，我不知道如何处理我需要的一切。默认情况下，它会加载目录中的所有文件，我不需要。在管理员中添加产品时，列表应该是空的，文件应该上传到 /pictures/month/filename.ext 这样的目录中，在上传过程中应该创建 3 种大小的缩略图 /pictures/th1/month/ filename.ext 对于编辑产品，我需要从数据库中为特定产品加载先前加载的图像，而不是文件夹中的所有图片。最后，删除功能不会删除图像。

正如我所看到的，图像是在没有发送表单的情况下上传的，对吧？这很重要，因为我还有 10 个其他产品详细信息输入字段，这些输入字段需要与发送表单一起发送并存储在数据库中。除了带有此插件的图片库外，一切都已完成并正常工作。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T21:57:28.083

首先，对不起我的英语不好。我不知道你是否对这个话题仍然感兴趣。没关系，让这成为下一个访客的提示。

不要遵循有关 codeigniter 集成的教程，从不完整的代码中找出它会很复杂，而是从那里获取演示源并构建解决方案。我在 1 小时内完成了 :)

您必须根据文档制作一个 UploadHandler.php 的 Codeigniter[库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)。内部库 __construct() 函数将 script_url 值更改为您将创建的控制器的绝对路径。

然后，在索引函数中创建控制器并加载库。

编辑`main.js`文件，将函数中 url: "server/php" 的内容替换`$('#fileupload').fileupload()`为控制器的名称。

现在您可以创建另一个控制器并使用原始演示中的 index.php 内容加载视图。

如果你做了我指定的一切，你应该能够使用第一个控制器从第二个控制器进行 ajax 调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-03T13:23:14.420

@Sinisa 证明了有价值的指针。我可以相对轻松地使 Fileuploader 8.8.5 版本与 CI 2.1.3 一起使用。我已经更新了 wiki - 这是一个链接：

[https://github.com/blueimp/jQuery-File-Upload/wiki/Jquery-file-upload-8.8.5%2Cwith-codeigniter-2.1.x](https://github.com/blueimp/jQuery-File-Upload/wiki/Jquery-file-upload-8.8.5%2Cwith-codeigniter-2.1.x)

# android - 计算纬度/经度列表之间的距离

> ID：15374921
> 
> 赞同：1
> 
> 时间：2013-03-13T00:33:38.920
> 
> 标签：android, for-loop, geolocation

我有一个`List<List<Double>>`(example list) 的形式`[[1,2], [3,4], [5,6], [7,8], ...]`。这些基本上是纬度和经度列表，我想计算它们之间的距离。我有接受的距离计算方法`(Lat1, Lon1, Lat2, Lon2)`。

即它在第一次迭代中从上面的列表中获取 (1, 2, 3, 4) 并计算距离。在下一次迭代中，我需要通过 (3,4,5,6) 等等。然后我可以将所有迭代的距离相加来计算总距离。

所以我写了这个方法，它接受 4 个值。我在开发`for`循环时遇到问题，该循环会将正确的值传递给计算距离的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:44:36.183

你可以试试：

```
List<List<Double>> locations = ...
double totalDistance = 0;
for (int i = 0; i + 1 < locations.size(); i++) {
    List<Double> a = locations.get(i);
    List<Double> b = locations.get(i + 1);
    totalDistance += calcDistance(a, b);
} 
```

`calcDistance()`可以是计算您提到的两个位置之间的距离的方法。

# javascript - JavaScript：调用已在另一个函数中更改的变量？

> ID：15374922
> 
> 赞同：0
> 
> 时间：2013-03-13T00:33:39.570
> 
> 标签：javascript, function, variables, cookies, alert

我正在尝试使用 cookie 在 JavaScript 中创建一个警报，这些 cookie 既可以通过名称向用户打招呼，也可以告诉他们他们在网站上赢得了特定游戏的次数。我的用户问候语工作正常，但我似乎无法让计数器正常工作。它涉及调用由先前函数更改的变量，我认为这就是我的问题所在，但我不知道如何解决这个问题。（变量被称为“cardOnePoints”和“cardTwoPoints”。）谁能帮我解决这个问题或者告诉我是否还有什么我做错了？

```
function getCookieOne(c_name) {
var i, x, y, ARRcookies = document.cookie.split(";");
for (i = 0; i < ARRcookies.length; i++) {
    x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
    x = x.replace(/^\s+|\s+$/g, "");
    if (x == c_name) {
        return unescape(y);
    }
}
}

function setCookieOne(c_name, value, exdays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" +     exdate.toUTCString());
document.cookie = c_name + "=" + c_value;
}

var winnerCount = getCookieOne('gamesWonCount') || 0;

function calculateWinnerCount() {
if (cardOnePoints + cardTwoPoints === 21) {
    winnerCount = winnerCount + 1;
    setCookieOne("gamesWonCount", winnerCount, 365);
}
}

function checkCookie() {
var username = getCookieOne("username");

if (username != null && username != "") {
    alert("Sup " + username + "!!! Woah man, you've won " + winnerCount + " game(s)!!!");
} else {
    username = prompt("Please enter your name:", "");
    if (username != null && username != "") {
        setCookieOne("username", username, 365);
    }
}
} 
```

你可以在这里看到我的整个代码：http: [//jsfiddle.net/hayleyelisa/9padf/2/](http://jsfiddle.net/hayleyelisa/9padf/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:36:29.887

您在函数的上下文中声明这些变量。您只能在该功能范围内访问它们。您可以在两个函数的范围之外声明它们，并且可以在两个函数中访问它们。

Javascript 变量可以从它们在外部声明的函数内部访问，但在函数内声明的变量不能在这些函数外部访问

所以而不是

```
function dealHand() {
    ...
    var cardOnePoints;
    var cardTwoPoints;
    ...
}

function calculateWinnerCount() {
if (cardOnePoints + cardTwoPoints === 21) {
    ...
} 
```

你要

```
var cardOnePoints;
var cardTwoPoints;

function dealHand() {
    ...
}

function calculateWinnerCount() {
if (cardOnePoints + cardTwoPoints === 21) {
    ...
} 
```

# c++ - Visual Studio vs G++ 中的 Decltype 和友元函数

> ID：15374924
> 
> 赞同：6
> 
> 时间：2013-03-13T00:33:43.183
> 
> 标签：c++, c++11, friend, auto, decltype

我正在编写一些 C++ 代码来做向量数学。它只是一个围绕`std::array`实例的薄包装器是必不可少的。我想重载非成员`begin()`函数以将迭代器返回到后备数组的开头。为此，我编写了一个简单的友元函数，它有一个`auto`返回类型和一个尾随返回类型，使用`decltype`它只是将调用转发到成员变量。

它不会编译，我不知道为什么。我开始摆弄一个较小的示例，发现以下代码在 G++ 4.7 下编译，但在最新的 Visual Studio 2012 Professional 下编译不了。

```
#include <iostream>
#include <array>

template <typename T, size_t size>
class MyClass {

private:
    std::array<T, size> elts;

public:
    friend auto begin(MyClass &a) -> decltype (std::begin(a.elts)) {
        return std::begin(a.elts);
    }

};

int main(void) {
    MyClass<int, 8> instance;
    auto it = begin(instance);
    std::cout << *it << std::endl;
    return 0;
} 
```

奇怪的是，如果私有声明`elts`在`begin()`函数声明之前，则此代码仅在 G++ 中编译。

无论如何，哪个编译器就在这里？Visual Studio 还是 G++？

**编辑**：VS2012给出的编译错误是`error C2228: left of '.elts' must have class/struct/union`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T00:45:38.560

当你使用表达式时，类模板的定义`MyClass`并不完整`std::begin(a.elts)`，所以我猜VC有理由抱怨。您不能`operator .`在不完整的类型上使用。

在任何情况下，您都可以使用以下方法解决此问题：

```
#include <iostream>
#include <array>

template <typename T, size_t size>
class MyClass 
{
    // ...

    friend typename std::array<T, size>::iterator begin(MyClass &a)
    //     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    {
        return std::begin(a.elts);
    }
}; 
```

# plist - 通过蓝牙在 NSDictionaries 之间交换数据

> ID：15374927
> 
> 赞同：1
> 
> 时间：2013-03-13T00:33:55.657
> 
> 标签：plist, core-bluetooth, data-exchange

我想要做的是通过蓝牙从一台 iPad 到另一台，在 plist 之间交换数据。我的情况的简短摘要，我有字典，每个 plist 从每个 iPad 填充，它有点像这样：

iPad1 会有： MAINdictionary(dictionary1(dictionaryA, dictionaryB, dictionaryC), dictionary2(dictionaryD, dictionaryE, dictionaryF))

iPad2 会有： MAINdictionary(dictionary1(dictionaryG, dictionaryH, dictionaryI), dictionary2(dictionaryJ, dictionaryK, dictionaryL))

括号表示字典包含括号内的项目。我希望我的最终结果是两台 iPad 都是彼此的克隆，并包含一个包含所有数据的更新列表，如下所示：

MAINdictionary（dictionary1（dictionaryA，dictionaryB，dictionaryC，dictionaryG，dictionaryH，dictionaryI），dictionary2（dictionaryD，dictionaryE，dictionaryF，dictionaryJ，dictionaryK，dictionaryL））

我很可能会编写解决方案，但我很难想出一个策略。我对 Core Data 还很陌生，所以如果可以的话，请对我轻松一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:06:42.430

查看来自 Apple的[BTLE Transfer示例代码。](http://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)它只在一个方向上共享，但如果需要，您可以轻松地将其扩展到两个方向。

另外，如果您只想通过蓝牙合并字典，我认为您不需要核心数据！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T09:28:20.173

使用核心蓝牙：

在适当方法内的外围端（即 peripheralManager:didReceiveReadRequest:)

```
NSError *error = nil;
NSDictionary *dictionary = [NSDictionary dictionaryWithObject:anObject forKey:@"key"];
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error];
if (error) {
    //respond to error appropriately
}
request.value = jsonData;
[peripheral respondToRequest:request withResult:CBATTErrorSuccess]; 
```

在适当的方法中的中央端（即外围设备：didUpdateValueForCharacteristic：错误：）

```
NSError *error = nil;
NSData *jsonDataFromPeripheral = characteristic.value;
NSDictionary *theDictionary = [NSJSONSerialization JSONObjectWithData: jsonDataFromPeripheral options: NSJSONReadingAllowFragments error:&error];
if ([theDictionary objectForKey:@"key"]) {
    NSLog(@"Success!");
} 
```

如果您想将数据发送到外围设备，那么您可以像这样写入发现的特征：

```
NSError *error = nil;
NSDictionary *dictionary = [NSDictionary dictionaryWithObject:anObject forKey:@"key"];
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error];
[peripheral writeValue:jsonData forCharacteristic:characteristic type:CBCharacteristicWriteWithResponse]; 
```

* * *

确保设置了外围设备的特性，以便可以执行读取和写入。您在创建 CBMutableCharacteristic 时执行此操作。这是一个例子：

```
CBMutableCharacteristic *characterisitic = [[CBMutableCharacteristic alloc]initWithType:[CBUUID UUIDWithString:CHARACTERISTIC_STRING] properties:CBCharacteristicPropertyRead|CBCharacteristicPropertyWrite value:nil permissions:CBAttributePermissionsReadable|CBAttributePermissionsWriteable]; 
```

请注意，如果您希望您的中心实现读取和写入，则不必为外围服务创建单独的特征。

# java - Powermock 构造函数模拟对实例化对象没有影响

> ID：15374928
> 
> 赞同：1
> 
> 时间：2013-03-13T00:34:11.213
> 
> 标签：java, junit, mockito, stub, powermock

```
 Class  A{

    B objB = new B();
    objB.someBMethod();

    }

    Class B{

    public void someBMethof(){

    C objC = new C();

    }
    }

    class C{
    int a=1;
    public C(){}
    public C(int v){
    a=v;
    }
    }

@RunWith( PoswerMockRunner.class )
@PrepareForTest({ A.class, B.class, C.class})
Class TestApp{

    @Mock
    C mockC;

    PowerMockito.whenNew( C.class ).withNoArguments().thenReturn(mockC);

} 
```

上面的代码捕获了我试图做的事情。但是 whenNew() 似乎没有工作，当我尝试调试时，创建的 C 对象不是模拟的。不知道发生了什么。一些指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:23:27.163

您提供了一些代码，所以谢谢。但是下一次，考虑发布一个 sscce （正确（**可编译**）示例）。

我尝试了（并修复了您的代码）并且它有效。这是我的代码版本：

```
public class A {

    public int someAMethod() {
        B objB = new B();
        return objB.someBMethod();
    }
}

public class B {

    public int someBMethod() {
        C objC = new C();
        return objC.getA();
    }
} 
```

* * *

```
import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.when;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest({ A.class, B.class, C.class })
public class TestApp {

    @Mock
    C mockC;

    @Test
    public void shoudlReturnTheCValue() throws Exception {
        when(mockC.getA()).thenReturn(666);
        PowerMockito.whenNew(C.class).withNoArguments().thenReturn(mockC);
        assertEquals(666, new A().someAMethod());
    }
} 
```

我已经配置了一个具有以下依赖项的 Maven 项目：

```
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-api-mockito</artifactId>
    <version>1.5</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-module-junit4</artifactId>
    <version>1.5</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.9.5</version>
    <scope>test</scope>
</dependency> 
```

# algorithm - 路径跟随算法

> ID：15374930
> 
> 赞同：1
> 
> 时间：2013-03-13T00:34:14.687
> 
> 标签：algorithm, math

假设我有一个看起来像这样的形状：

```
 __ __
|__|__| 
```

有 7 条线段，每条线长 2 个单位。

每个都有一个 (x, y) 坐标用于行上的开始和结束段。

这些行可能存储在一个数组中，如下所示：

```
[
    [0, 0,  2, 0],
    [0, 0,  0, 2],
    [0, 2,  2, 2],
    [2, 0,  2, 2],
    [2, 0,  4, 0],
    [2, 2,  4, 2],
    [4, 0,  4, 2]
] 
```

所有这些线都是相连的。鉴于还有其他未连接的线路，我如何确定这些特定线路（全部）已连接。

基本上我想不出任何能得到所有线条的东西。

如果有人能在概念上或代码方面为我指出正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:06:28.957

一个天真的 Perl 版本：

```
use warnings;
use strict;

my $l = [ [0, 0,  2, 0],
          [0, 0,  0, 2],
          [0, 2,  2, 2],
          [2, 0,  2, 2],
          [2, 0,  4, 0],
          [2, 2,  4, 2],
          [4, 0,  4, 2] ];

my @f;
Segment:
while (my $line = shift @$l) {
        for my $set (@f) {
                push (@$set, $line), next Segment if is_conn($line, $set);
        }
        push @f, [$line];
}

for my $set (@f) {
        print "\n================\n";
        print join(",", @$_), "\n" for @$set;
}

sub is_conn {
        my ($line, $set) = (shift, shift);
        for my $cand (@$set) {
                return 1 if has_same_point($cand, $line);
        }
        return 0;
}

sub has_same_point {
        my ($l1, $l2) = @_;
        my @p11 = ($l1->[0], $l1->[1]);
        my @p12 = ($l1->[2], $l1->[3]);
        my @p21 = ($l2->[0], $l2->[1]);
        my @p22 = ($l2->[2], $l2->[3]);
        return is_same_point(@p11, @p21) ||
               is_same_point(@p12, @p21) ||
               is_same_point(@p11, @p22) ||
               is_same_point(@p12, @p22);
}

sub is_same_point {
        my ($x1, $y1, $x2, $y2) = (@_);
        return $x1 == $x2 && $y1 == $y2;
} 
```

# java - 使用 JConnect 对 Spring Web 应用程序进行单元测试

> ID：15374931
> 
> 赞同：0
> 
> 时间：2013-03-13T00:34:35.740
> 
> 标签：java, spring, maven, jar, buildpath

我在尝试在 webapp 中对我的 DAO 进行单元测试时遇到问题。我的 spring 配置全部设置为使用 Sybase JConnect JDBC 驱动程序创建一个 dataSource bean。我的问题是，当我将应用程序作为 web 应用程序运行时，我只能创建我的 bean。

在尝试运行单元测试时，我收到：

> java.lang.ClassNotFoundException：com.sybase.jdbc3.jdbc.SybDriver

为了进一步解释，这是我的目录结构：

```
src
   main
     -java
       - ...java files etc
    - resources
        -applicationContext.xml
        -other config files
    - webapp
        -WEB-INF
           -jconn3.jar   <---- putting it here works, but test doesn't have a WEB-INF folder!
   -test
     -java
     -resources 
```

那么如何让 jconn3.jar 在运行时为我的单元测试被识别呢？我已经尝试将它放在主/资源目录中，但这会导致失败，无论我是否将它作为 webapp 运行。我可以看到 jconn3.jar 在构建时被复制到 target/classes 目录，那么为什么在运行时找不到 jar？似乎让它工作的唯一方法是将它保存在 WEB-INF 目录中，但是我如何对依赖它的 DAO 进行单元测试。

我正在使用 Spring MVC 和 Maven。注意我无法添加 maven 依赖项，因为 jar 不在存储库中，我也没有将其添加到远程存储库的选项。

总而言之，我需要在我的构建路径上放置 jar 来运行 webapp 和进行单元测试，因为两者都需要用于 DAO 的 jar。将它放在资源文件夹中时如何实现这一点似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:49:08.287

您必须将 jconn3.jar 放在测试的执行类路径中。如果您正在使用 maven，您必须在 pom.xml 中添加与您的驱动程序相对应的依赖项。由于 Sybase JDBC 驱动程序在中央 Maven 中不可用，因此您必须使用如下命令将其上传到本地存储库：

[安装 3rd 方 JAR 的指南](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
    -DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
```

完成此操作后，您可以向此 jar 添加依赖项，就像在 maven Central 中为任何其他 jar 所做的一样

```
<dependency>
    <groupId>group-id></groupId>
    <artifactId>artifact-id</artifactId>
    <version>version</version>
</dependency> 
```

从那时起，您的 Sybase 驱动程序 jar 将包含在测试执行类路径中......

您还将 jar 添加到 WEB-INF 目录，您不需要这样做。Maven 足够聪明，可以从您的依赖关系中推断出需要进入您的战争的 jar 文件，因此您可以将其从该 WEB-INF 位置中删除。不用担心，当您执行 mvn package 时，带有驱动程序的 jar 将在您的 war 文件中结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:27:12.340

如果没有 Maven 和标准 eclipse，您需要确保它在构建路径中并标记为库，然后 eclipse 现在将做什么

# c# - 在运行时更改类属性中的值

> ID：15374934
> 
> 赞同：7
> 
> 时间：2013-03-13T00:34:40.587
> 
> 标签：c#, custom-attributes

如果我有这样的课

```
[Attr("Blah",
 Data = "Blah")]
public class Test : SuperClass{} 
```

有没有办法可以在运行时更改类实例的属性值？例如在伪代码中

```
SuperClass test = new Test();
test.Attr.Value = "blah1";
test.Attr.Data = "blah2"; 
```

（我有一个要更改属性的类的实例，将其转换为它扩展的类）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:50:55.460

属性和对象实例之间没有隐含的联系。只在类和属性之间。最好的办法是在构造函数中查找属性并“缓存”对象属性中的值。当然，如果您只查看`Test`类，那是没有意义的，但是如果构造函数`SuperClass`查找使用“this.GetType()”检索的类型的自定义属性，则它确实有意义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-05T11:49:14.887

您可以在运行时在类级别（不是对象实例级别）更改属性值：

```
var attr = TypeDescriptor.GetProperties(typeof(UserContact))["UserName"].Attributes[typeof(ReadOnlyAttribute)] as ReadOnlyAttribute;
attr.GetType().GetField("isReadOnly", BindingFlags.NonPublic | BindingFlags.Instance).SetValue(attr, username_readonly); 
```

# php - 代码从未执行，没有出现任何错误

> ID：15374949
> 
> 赞同：0
> 
> 时间：2013-03-13T00:36:30.113
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 AJAX 和 HTML5 来处理从客户端计算机上传到服务器上的文件夹的文件。

现在`alert`，除了`success`函数之外，下面的消息永远不会被执行，我不知道为什么。我没有收到任何 JS 错误。php 脚本和保存文件的文件夹都被授予完全读/写权限。

我很难在没有看到任何错误的情况下让它工作。

我感谢任何帮助确定此问题的原因，并获得一些错误或至少要执行的警报消息。

提前谢谢了！

jQuery

```
 $.ajax({
        url: 'upload.php',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        success: function(data){
            alert("OK");
            $('body').html(data);
        },
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false

    }); 
```

HTML

```
 <form enctype="multipart/form-data">
    <input name="file" type="file" />
    <input type="button" value="Upload" />
    </form>
    <progress></progress> 
```

上传.php

```
<?php
if ($_FILES["file"]["name"] != NULL) {
  if (file_exists("uploads/" . $_FILES["file"]["name"]))
    echo $_FILES["file"]["name"] . " already exists. ";
  else
    move_uploaded_file($_FILES["file"]["tmp_name"], "uploads/" . $_FILES["file"]["name"]);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:40:05.147

也添加一个错误处理程序。

```
$.ajax({
  success: function(data){
    console.log("OK");
    $('body').html(data);
  },
  error: function(xhr, textStatus, errorThrown){
    console.log('An error has occurred!');
    console.log(textStatus);
    console.log(errorThrown);
  }
}); 
```

Javascript 不会为失败的 ajax 请求抛出任何错误，因此您需要自己捕获它们。

# ruby - Ruby 中的模数每 10,000 次打印一次

> ID：15374954
> 
> 赞同：1
> 
> 时间：2013-03-13T00:37:09.890
> 
> 标签：ruby

我不确定为什么这不起作用。我想每 1000 或 10,000 次迭代做一些事情。可以说我想使用该`puts`命令。我怎样才能做到这一点？

```
(1..100000).each do |number|
  i = i+1
  if i%1000==0
    puts "finished: #{i}"
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T00:50:54.697

我知道您想使用模数，但我想分享一下，`step`在 ruby​​ 中有一种方法称为范围，您可以使用它

```
(0..100000).step(1000) do |number|
  puts number
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T00:38:32.017

转动

```
 if 1%1000==0 
```

到

```
 if i%1000==0 
```

此外，您还没有声明或最初定义 variable `i`。你是说变量`number`吗？如果是这样，那么做：

```
number= number + 1
if number % 1000 .. 
```

**清除事情：**

该声明：

```
(1..10000).each do |number| 
```

将从 1 到 10000 的范围内一次取每个数字一个。您可以使用您在括号内`number`定义的变量来获取该值。`| |`通过每次迭代，它将增加一个。因此，您应该在每个块中处理的变量是`number`而不是未定义的变量。网上有很多关于红宝石块和数组等的好教程，所以请查看它们（我正在阅读的很酷的博客：[http](http://ruby.bastardsbook.com/chapters/collections/) ://ruby.bastardsbook.com/chapters/collections/ ）希望这会有所帮助:) （还请查看其他两个答案，对 jvnill 大赞，我每天都学到一些东西:)）

# android - Android Phonegap/Webkit/Viewport 位置固定

> ID：15374959
> 
> 赞同：1
> 
> 时间：2013-03-13T00:37:14.320
> 
> 标签：android, css, html, cordova, css-position

我在使用phonegap制作的应用程序上固定位置有问题..直到现在我认为它应该正常运行，但我发现在特定情况下固定位置“中断”..我排在首位（ div）有几个选项卡和每个选项卡的 onclick 与一些 javascript 和 css 我使用显示属性更改主视图..

但是我发现，如果我在视图上向下滚动，然后选择更改选项卡，那么整个选项卡行而不是保持“固定”在顶部，它会向下移动，并在新的较低位置上“固定”比最高的位置..

我的代码的主要布局是

```
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<head>
</head>
<body>
<div id="tabwrap">a couple of divs for tabs blah blah</div>
<div id="content">main view with hide/show etc</div>
</body> 
```

（我包含元视口标签只是为了指出我也在使用它）如果主视图没有向下滚动，并且它在顶部，那么没有中断固定位置，并且按预期保持在顶部..我试图通过在此行的每个选项卡的 onclick 事件上添加来“欺骗”它

```
document.body.scrollTop = document.documentElement.scrollTop = 0; 
```

这样它会在加载相应div中的下一个内容之前返回顶部，但没有成功..

和CSS

```
#tabwrap {height:3em; position:fixed; width:100%; }
#content { padding-top:4em; width:100%; } 
```

这是来自 jsfiddle 的一个小演示，但不知道它是否有用.. [http://jsfiddle.net/B3Y5N/7/](http://jsfiddle.net/B3Y5N/7/) 我已经删除了一些代码以使其更简单

奇怪的是，在 2.3.5 (samsung s5570) 上它没有问题，我注意到 4.2.2 (nexus) 上的问题，而我期望相反..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T00:38:42.430

在这里，我所做的更改似乎已经解决了这个问题..

```
 #tabwrap {height:3em; position:fixed; width:100%; top:0; left:0; z-index:100;}

 #content {position absolute; top:4em; width:100%; height:100%} 
```

也从 html 文档中删除了

```
height:device-height 
```

从

```
meta name=viewport tag 
```

# chef-infra - Chef - 数据包查询

> ID：15374961
> 
> 赞同：2
> 
> 时间：2013-03-13T00:37:25.187
> 
> 标签：chef-infra, databags

查询数据包设置节点属性时，是否可以做如下操作？

我有一系列与我的本地节点 ['fqdn'] 属性匹配的数据包项。

是否可以将此属性动态插入到数据包查询字符串中，下面的示例不起作用，还有其他想法吗？

```
default['test']['attribute'] = Chef::DataBagItem.load('databagname', '<%= node[:platform_version] %>')['test']['bag']['location'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:56:17.103

The `DataBagItem.load` method returns a databag object. So, I usually store the returned databag object into a temp variable and then get the item I want from the databag, like with a a hash. For example:

```
temp = Chef::DataBagItem.load('databagname', node.platform_version)
node.default['test']['attribute'] = temp['id'] 
```

You can replace ***id*** with the required element of your databag.

On the other hand, if what you meant was to store the hole databag in a single attribute, I haven't tried it and I don't know if it is possible.

# python - 判断一个字符串是否包含一个单词

> ID：15374969
> 
> 赞同：5
> 
> 时间：2013-03-13T00:37:51.817
> 
> 标签：python, if-statement

在 Python 中，给定以下上下文的语句的语法是什么：

```
words = 'blue yellow' 
```

将是一个 if 语句，用于检查是否`words`包含单词“blue”？IE，

```
if words ??? 'blue':
    print 'yes'
elif words ??? 'blue':
    print 'no' 
```

在英语中，“如果单词包含蓝色，则说是。否则，打印否。”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T00:39:46.473

```
words = 'blue yellow'

if 'blue' in words:
    print 'yes'
else:
    print 'no' 
```

# 编辑

我刚刚意识到这`nightly blues`将包含`blue`，但不是一个完整的词。如果这不是您想要的，请拆分单词表：

```
if 'blue' in words.split():
    … 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T00:44:51.257

您可以使用`in`或执行显式检查：

```
if 'blue ' in words:
    print 'yes' 
```

或者

```
if words.startswith('blue '):
    print 'yes' 
```

编辑：只有当句子不以“蓝色”结尾时，这两个才有效。要检查这一点，您可以执行先前答案之一的建议

```
if 'blue' in words.split():
    print 'yes' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T00:51:24.820

您还可以使用`regex`：

`\bblue\b``True`仅当它可以找到确切的单词时才会返回`'blue'`，否则`False`。

```
In [24]: import re

In [25]: strs='blue yellow'

In [26]: bool(re.search(r'\bblue\b',strs))
Out[26]: True

In [27]: strs="nightly blues"

In [28]: bool(re.search(r'\bblue\b',strs))
Out[28]: False 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T01:01:30.753

最简单的方法可能如下：

```
words = set('blue yellow'.split())
if 'blue' in words:
    print 'yes'
else:
    print 'no' 
```

如果你的单词列表真的很大，你会通过包裹`words.split()`来提高速度，`set`因为测试集成员比测试列表成员在计算上更有效。

# javascript - 第二次点击 jQuery

> ID：15374974
> 
> 赞同：1
> 
> 时间：2013-03-13T00:39:01.770
> 
> 标签：javascript, jquery, events, toggle, flip

我想知道在这个翻转效果中将 .mouseleave 更改为 .click 的更简单方法是什么：

仅通过更改它是行不通的，我已经阅读了有关使用 .toggle 的信息，但不确定如何使用。

```
$('.flip').click(function(){
        $(this).find('.card').addClass('flipped').mouseleave(function(){
            $(this).removeClass('flipped');
        });
        return false;
    }); 
```

[http://jsfiddle.net/nicooprat/GDdtS/](http://jsfiddle.net/nicooprat/GDdtS/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:42:32.303

一样容易：

```
$('.flip').click(function(){
    $('.card', this).toggleClass('flipped');
    return false;
}); 
```

[http://jsfiddle.net/zerkms/GDdtS/2252/](http://jsfiddle.net/zerkms/GDdtS/2252/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:45:50.710

此外，您也可以使用悬停事件：

```
$('.flip').hover(
    function() {
        $(this).find('.card').addClass('flipped');
    },
    function() {
        $(this).find('.card').removeClass('flipped');
    }
); 
```

[在这里摆弄](http://jsfiddle.net/GDdtS/2253/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:49:46.523

看看 jQuery 的[.toggleClass()](http://api.jquery.com/toggleClass/)方法。

```
$('.flip').click(function(){
    $(this).find('.card').toggleClass('flipped');
}); 
```

# file - 无法从映射写入 hadoop 文件系统 (HDFS)

> ID：15374976
> 
> 赞同：1
> 
> 时间：2013-03-13T00:39:20.567
> 
> 标签：file, hadoop, hdfs, mapper

我正在尝试直接从映射器在 hadoop 文件系统中编写纯文本文件。

我这样做如下：

```
public void createFile(Configuration conf) throws IOException{    
    FileSystem fs = FileSystem.get(conf);

    Path filenamePath = new Path(conf.get("mapred.output.dir")+"/_"+conf.get("mapred.task.id"), "tree.txt");    

        try {

      if (fs.exists(filenamePath)) {        
        // remove the file first
        fs.delete(filenamePath);            
      }

      FSDataOutputStream out = fs.create(filenamePath);       
      out.writeUTF("hello, world!");        
      out.close();

    } catch (IOException ioe) {
        System.err.println("IOException during operation: " + ioe.toString());
        System.exit(1);
    }
} 
```

而且它不会在伪分布式模式下写任何东西。不过，在单机上写的很完美。

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:58:07.323

我使用的是 Amazon Elastic MapReduce (EMR)，我必须[通过 URI 获取 FileSystem](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/fs/FileSystem.html#get%28java.net.URI,%20org.apache.hadoop.conf.Configuration%29)才能使用 S3 中的文件。

```
FileSystem fs = FileSystem.get(uri, conf); 
```

那可能对你没有帮助。

# php - 从点数据库捕捉到最近的街道方向服务

> ID：15374982
> 
> 赞同：0
> 
> 时间：2013-03-13T00:39:39.357
> 
> 标签：php, javascript, mysql, google-maps

我有一个包含经度、纬度的点的 MYSQL 数据库，我正在读取数据库并为 javascript Google API 方向服务生成 XML，以将这些点捕捉到最近的街道上。这是从将起点和终点设置为自身。

问题：

只有一个点被捕捉到街道上，其余的根本不显示，地图也放大了这个点。我有一种感觉，这是因为方向服务是异步的，但我不确定如何纠正这个问题，所以它会将所有点捕捉到数据库中最近的街道。

如果我不尝试使用方向服务并将它们捕捉到街道上，则 db 代码可以工作并显示所有点

Javascript 源代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>PHP GOOGLE MAPS POINTS</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false"
            type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[

var directionsDisplay;
var directionsService = new google.maps.DirectionsService();

    function load() {

      directionsDisplay = new google.maps.DirectionsRenderer();

      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(40.06761, -79.9022),
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });

      directionsDisplay.setMap(map);

      // read in Long, lat from MYSQL DB from PHP file generated XML
      downloadUrl("phpmap.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");

        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));

          var request = {
          origin:point,
          destination:point,
          travelMode: google.maps.TravelMode.DRIVING
          };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });

           //

        }
      });

    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
  </script>
  </head>

 <body onload="load()">
<div style="width: 600px; height: 600px;" id="map"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:00:43.173

1.  除非您将 preserveViewport 选项设置为 true，否则方向渲染器将缩放地图以适应显示的方向。
2.  为什么需要将数据库中的所有点都捕捉到最近的道路？那不是路线服务的目的。它是异步的，受配额和速率限制（检查“状态”的值，它应该解释为什么你只得到一个结果）。如果您希望数据库中每个条目的点都捕捉到最近的道路，请离线捕获它们并将它们也保存在数据库中。

# javascript - 如何减慢进度条？

> ID：15374985
> 
> 赞同：1
> 
> 时间：2013-03-13T00:39:51.233
> 
> 标签：javascript, jquery, css, coldfusion, drag-and-drop

我有以下代码：

```
<td id="drop-files" ondragover="return false;" colspan="2">
    <br />Drag and drop files to be uploaded...<br /><br />
    <input type="hidden" id="iFile" value="" /><input type="hidden" id="numFiles" value="" />
   <div id="progressBar" style="width: 300px; height: 20px; border-radius: 20px; border: 1px solid rgb(0,0,0); opacity: 0; text-align: center; background: -moz-linear-gradient(left, rgb(32,96,160) 0%, rgb(32,96,160) 0%, rgb(255,255,255) 0%, rgb(255,255,255) 100%);">0%</div><br />
   <div id="fileCase"></div>
</td>

// Note: The double ## is not a mistake. The code is running under  
// ColdFusion where # is a is reserved character. So ## escapes the #
$(document).ready(function() {
    function pad(number, digits) {
        return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;
    }

    function processFile(file,num,arr){
        var inputRow = "<input type='hidden' value='' id='file_"+pad(arr,3)+"' name='file_"+pad(arr,3)+"' />";
        $("##fileCase").append(inputRow);
        var o = $("##file_"+pad(arr,3));
            var reader = new FileReader();
            reader.onload = function(e) {
                o.val(e.target.result.replace(/</g, "&lt;").replace(/>/g, "&gt;"));
            }
            reader.readAsDataURL(file);
    }

    function updateProgress(idx,tot){
        var midPt = Math.floor((idx)/tot*100);
        $("##progressBar").css("background","-moz-linear-gradient(left, rgb(32,96,160) 0%, rgb(32,96,160) "+midPt+"%, rgb(255,255,255) "+midPt+"%, rgb(255,255,255) 100%)");
        $("##progressBar").html(midPt+"%");
    }
    // Sets up dataTransfer event
    jQuery.event.props.push('dataTransfer');
    // File Array
    var nameArray = [];
    $("##fileCase").append("<input type='hidden' id='nameArray' value='' name='nameArray'>");

    // Bind drop to drop zone
    $('##drop-files').bind('drop', function(e) {
        var iFile = 0;
        // Prevents element from default function
        e.preventDefault();
        // Grabs list of files
        var files = e.dataTransfer.files;
        var numFiles = files.length;set("numFiles",numFiles);
        $("##progressBar").animate({opacity: 1},500);
        // Loop through files...
        updateProgress(0,numFiles);
        $.each(files, function(index, file) {
            nameArray.push(files[index].name);
            arr = nameArray.length;
            $("##nameArray").val(nameArray.join("|"));
            processFile(files[index],index+1,arr);
            iFile++;set("iFile",iFile);
            //setTimeout("updateProgress("+iFile+","+numFiles+");",250);
            setTimeout("var midPt = Math.floor(get('iFile')/get('numFiles')*100);$('##progressBar').css('background','-moz-linear-gradient(left, rgb(32,96,160) 0%, rgb(32,96,160) '+midPt+'%, rgb(255,255,255) '+midPt+'%, rgb(255,255,255) 100%)');$('##progressBar').html(midPt+'%');",500)
        });
    });
}); 
```

它工作得很好，除了一*点点*小东西。进度条似乎太快了 100%。我宁愿把它放慢一点，这样我就能得到一些看起来像是在彻底做某事的东西。

任何人都知道我可以如何放慢速度，以便我们可以真正看到进度条工作？

代码中的`set()`和`get()`函数只是我创建的快速函数，用于将变量存储在隐藏的输入表单元素中，以允许`setTimeout`函数工作。

欣赏你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:04:44.527

我不明白您为什么要这样做，以及为什么要通过渐变而不是为孩子的宽度设置动画，这将允许您使用 css3 过渡延迟，但是您可以轻松地实现延迟效果每次 updateProgress() 运行时添加一个小的 jquery-delay。

只需在更新 css 之前将其链接起来。

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# zend-form - 在抽象 Zend\Form 基类中注入和使用 ServiceLocator

> ID：15374987
> 
> 赞同：1
> 
> 时间：2013-03-13T00:39:55.663
> 
> 标签：zend-form, zend-framework2

我创建了一个名为`AbstractApplicationForm`. 我希望通过 将服务定位器注入其中`Zend\ServiceManager\ServiceLocatorAwareInterface`以访问翻译器：

```
namespace Application\Form;

use Zend\Form\Form;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

abstract class AbstractApplicationForm 
    extends Form 
    implements ServiceLocatorAwareInterface
{
    protected $serviceLocator;
    protected $translator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }       

    public function getTranslator()
    {
        if (!$this->translator) {
            $this->translator = $this->getServiceLocator()->get('translator');
        }

        return $this->translator;
    }
} 
```

我的申请表扩展了这个类，如下所示：

```
namespace Trade\Form;

use Zend\Captcha;
use Zend\Captcha\Image;
use Zend\Form\Element;
use Application\Form\AbstractApplicationForm;

class MemberForm extends AbstractApplicationForm
{
    public function init()
    {
        $this->setAttribute('method', 'post');

        // Add the elements to the form
        $id = new Element\Hidden('id');
        $first_name = new Element\Text('first_name');
        $first_name->setLabel($this->getTranslator('First Name')) 
```

这样，我就可以使用 getTranslator 来翻译标签了。

到现在为止还挺好。在我的控制器操作中，我创建了这样的表单：

```
public function joinAction()
{
    // Create and initialize the member form for join
    $formManager = $this->serviceLocator->get('FormElementManager');
    $form        = $formManager->get('Trade\Form\MemberForm'); 
```

结果是 ServiceManager 异常：

> Zend\ServiceManager\ServiceManager::get 无法为翻译器获取或创建实例

我没有在`Module.php`or中定义任何其他内容`module.config.php`，我认为我不需要。我有这样定义的翻译器`module.config.php`：

```
'translator' => array(
    'locale' => 'en_US',
    'translation_patterns' => array(
        array(
            'type'     => 'gettext',
            'base_dir' => __DIR__ . '/../language',
            'pattern'  => '%s.mo',
        ),
    ), 
```

当我在控制器中得到它时效果很好：

```
$sm               = $this->getServiceLocator();
$this->translator = $sm->get('translator'); 
```

所以翻译器配置实际上是正确的，但我无法在我的表单中检索它。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T02:02:03.157

这实际上是您在[ZF2 看到的相同问题，何时使用 getServiceLocator() 何时不使用](https://stackoverflow.com/questions/14911965/zf2-when-to-use-getservicelocator-and-when-not-to/14915156#14915156)

[`FormElementManager`](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/Form/FormElementManager.php)是一个，并且在的[`AbstractPluginManager`](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/ServiceManager/AbstractPluginManager.php)构造函数中`AbstractPluginManager`，添加了以下[服务初始化](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/ServiceManager/AbstractPluginManager.php#L60-L69)程序：

```
$this->addInitializer(function ($instance) use ($self) {
     if ($instance instanceof ServiceLocatorAwareInterface) {
        $instance->setServiceLocator($self);
    }
}); 
```

事实是`$self`，在这种情况下，指的是插件管理器本身。这意味着任何实现[`Zend\ServiceManager\ServiceLocatorAwareInterface`](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/ServiceManager/ServiceLocatorAwareInterface.php)并由插件管理器（在本例中为`FormElementManager`）生成的服务都会注入插件管理器本身。

插件管理器不是主要的服务定位器（再次，请参阅[ZF2 何时使用 getServiceLocator() 以及何时不使用](https://stackoverflow.com/questions/14911965/zf2-when-to-use-getservicelocator-and-when-not-to/14915156#14915156)）。

当您调用时，该`Zend\Form\FormElementManager`实例由主服务管理器生成：

```
$formElementManager = $this->serviceLocator->get('FormElementManager'); 
```

由于`Zend\Form\FormElementManager`implements `Zend\ServiceManager\ServiceLocatorAwareInterface`，它引用了实际的“主要”服务管理器。

因此，以您的形式：

```
$formElementManager = $this->getServiceLocator();

$mainServiceManager = $formElementManager->getServiceLocator();

$translator = $mainServiceManager->get('translator'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T01:24:48.807

你可能不得不做`getServiceLocator()->getServiceLocator()->get('translator')`

我不明白为什么有时你必须这样做，但它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T09:17:46.217

我有一个抽象字段集类和一个具体字段集类的相同构造。翻译器以完全相同的方式注入，但是当我尝试在字段集中“$this->getTranslator()”时，会引发以下异常：

**Zend\ServiceManager\ServiceManager::get 无法为翻译器获取或创建实例**

所以SM找不到翻译服务。我通过以下方式添加（配置）翻译器：

```
'service_manager' => array(
    'factories' => array(
        'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        'Navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory',
        'logger' => function ($sm) {
            $logger = new \Zend\Log\Logger();
            $config = $sm->get('Config');

            if ($config['logger']['writer'] == 'ChromePhp'):
                $logger->addWriter(new \Application\Log\Writer\ChromePhp()); else:
                $logger->addWriter('FirePhp');
            endif;
            return $logger;
        }
    ),
),
'translator' => array(
    'locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type' => 'gettext',
            'base_dir' => __DIR__ . '/../language',
            'pattern' => '%s.mo',
        ),
    ),
), 
```

在我看来，翻译工作完美。所以目前我不知道下一步该尝试什么。您能告诉我您是如何将翻译服务添加到您的应用程序中的吗？

编辑 ------------- 附加信息：在**字段集类中**

```
$this->getServiceLocator(); 
```

给我一个“Zend\Form\FormElementManager”类型的对象。这对于表单元素是正确的。

```
$this->getServiceLocator()->getServiceLocator(); 
```

但这给了我 NULL 而不是 ServiceLocator-Object ...

谢谢，迈克尔

# asp.net - 虚拟路径为空？

> ID：15374992
> 
> 赞同：0
> 
> 时间：2013-03-13T00:40:11.990
> 
> 标签：asp.net, asp.net-mvc-3, iis, iis-7, windows-server-2008

我有以下问题，我正在更新我的 MVC3 应用程序的 .dll、视图和 web.config（开发服务器，我已经这样做了很多次），突然服务器抛出

> “虚拟路径‘null’映射到另一个应用程序，这是不允许的。”

我已经复制了我在部署的应用程序（在网络上）中运行的文件并覆盖了它们，但仍然存在错误，我已经重新安装了 IIS 7.0，但什么也没有。

什么可能导致此错误？

虚拟机运行 Windows Server 2008、IIS 7.0 和 .NET Framework 4.0。

这是一个没有任何网络农场或 url 重写规则的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:00:53.227

事实证明，由于我在开发服务器中有另一个数据库实例，并且有一段时间没有移动 web.config，连接字符串指向另一个实例，它给了我这个错误。

# php - 默认文档

> ID：15374996
> 
> 赞同：0
> 
> 时间：2013-03-13T00:40:26.020
> 
> 标签：php, content-management-system

好的，我正在尝试将客户端的网站从 1and1 移动到他们拥有的服务器。这是一个PHP网站。我已经移动了所有文件，移动了数据库（包括指向新数据库的文件），并且首页工作正常（包括点击数据库）。

但是，这些链接都不起作用。它们都指向不存在的文件夹。该网站是某种 CMS，可能是 Wordpress，也可能不是。但很明显，链接中的文件夹并不是真正的文件夹，而是程序为了显示正确的内容而键入的东西。

我说 Wordpress 是因为有一个旧的 Wordpress DB，但据我所知，没有任何东西可以与之对话。

我可以在数据库中看到一个名为文件夹的表，其中包含所有不存在的文件夹名称。

估计是网站设置问题。也许在 PHP.ini 或其他一些配置中。

对不起，如果这听起来有点模糊。客户不知道它是什么软件，只知道如何使用它。如果您有任何问题，我可以告诉您更详细的信息，请告诉我。

谢谢

索引.php

```
<?php
/*
    Lite MVC Implementation

    HTTP requests should be redirected to this file if Apache can't find the page in the filesystem hierarchy.

    EDITING APP PAGES:
    PHP Page logic in /controller/
    HTML rendering in /views/
    Additional PHP classes autoloaded from /model/

    Edit URI path routes (mapping URL to page logic) by editing /application/router.class.php, function getController

    Hosting Requirements for CMS:
        * PHP 5.2.x and later as of February 2010
        * PECL Extension : HTTP (pecl_http) 
        * /protected/uploads should be writable by Apache
*/

    $site_path = realpath(dirname(__FILE__));
    define("__SITE_PATH__", $site_path);

    include("global/init.php");
    $registry->router = new Router($registry);
    $registry->router->setPath(__SITE_PATH__ . "/controller");
    $registry->router->loader();
?> 
```

示例文件夹将是“服务”。文件夹表中的记录是：

```
3   0   Services    services    Manage Services Content 0   2   2   1   0   2   0   2010-02-22 05:50:39 2010-03-09 13:26:13 
```

.htaccess

```
AddHandler x-mapp-php5 .php
#php_flag session.auto_start "On"
#php_flag display_errors "On"

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ /index.php?rt=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:04:52.473

这可能是由于

```
真实路径
```

线。旧主机是否是基于 Linux 的主机，可能带有 Apache，而新主机现在是 Windows？realpath 函数可能没有在新主机上返回正确的文件夹结构。

该站点是包含在主机上的 C:\inetpub\www 文件夹中还是在其他地方？如果在其他地方，请尝试将站点移到那里，或者至少移到 c:\inetpub 内的子文件夹中。

如果做不到这一点，请查看[http://david.steadson.com/2008/12/17/migrating-to-a-new-iis7-install-from-iis6/](http://david.steadson.com/2008/12/17/migrating-to-a-new-iis7-install-from-iis6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:59:40.660

好的，找到问题了。或者我应该说，其他人为我找到了它。

只是将 .htaccess 的规则导入网站。

我不知道 IIS 不使用 .htaccess，而是使用 web.config。我现在是。

感谢大家的帮助。