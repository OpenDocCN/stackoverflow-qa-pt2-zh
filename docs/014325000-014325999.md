# StackOverflow 问答 14325000-14325999

# mysql - 是否可以优化此 mysql 查询？

> ID：14325001
> 
> 赞同：3
> 
> 时间：2013-01-14T19:14:56.627
> 
> 标签：mysql, sql

我有一个包含几百万行的表，我正在查询该表并想知道是否可以通过添加索引或任何东西来优化查询。

表架构：

```
CREATE TABLE `aggregate_data` (
  `impressions` int(10) unsigned NOT NULL,
  `clicks` int(10) unsigned NOT NULL,
  `leads` int(10) unsigned NOT NULL,
  `date` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `country` varchar(2) COLLATE utf8_bin NOT NULL,
  `campaign_id` int(10) unsigned NOT NULL,
  `payout` decimal(12,6) NOT NULL,
  `revenue` decimal(12,6) NOT NULL,
  `creative_id` int(10) unsigned NOT NULL DEFAULT '0',
  `advertiser_id` int(11) unsigned NOT NULL DEFAULT '0',
  `offer_id` int(11) unsigned NOT NULL DEFAULT '0',
  `affiliate_id` int(11) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`country`,`campaign_id`,`date`),
  KEY `date_added` (`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

SQL查询：

```
SELECT 
    DATE_FORMAT(`date`, "%Y-%m-01 00:00:00") AS `date`, 
    offer_id,
    country,
    @sum_impressions := SUM(impressions), 
    @sum_clicks := SUM(clicks), 
    @sum_leads := SUM(leads), 
    @sum_payout := SUM(payout), 
    @sum_revenue := SUM(revenue)
FROM aggregate_data
WHERE `date` >= '2012-12-00 00:00:00'
GROUP BY country, offer_id, MONTH(`date`), YEAR(`date`) 
```

当我进行解释时，它总是告诉我它使用了表中的所有行。

```
+----+-------------+----------------+------+---------------+------+---------+------+--------+----------------------------------------------+
| id | select_type | table          | type | possible_keys | key  | key_len | ref  | rows   | Extra                                        |
+----+-------------+----------------+------+---------------+------+---------+------+--------+----------------------------------------------+
|  1 | SIMPLE      | aggregate_data | ALL  | date_added    | NULL | NULL    | NULL | 809715 | Using where; Using temporary; Using filesort |
+----+-------------+----------------+------+---------------+------+---------+------+--------+----------------------------------------------+ 
```

由于 WHERE 子句，它使用“使用 where”，由于 group by 和 filesort 因为 group by 也使用了“使用临时”（我认为）。

现在我应该添加什么其他索引或其他东西来优化这个查询。随着行变大，运行需要几秒钟。

使用“@sum_impressions”之类的变量是因为此 SELECT 语句是“INSERT INTO ... ON DUPLICATE KEY UPDATE”语句的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:22:25.993

嗯，在这种情况下，关于 where 的索引可能会使事情变得更糟。索引会使事情变得更糟，因为查询会扫描索引，然后读取原始数据，但会乱序。如果数据大于内存，那么您可能会遇到不必要的缓存未命中。

一种解决方案是按日期对数据进行分区。

一种想法是在日期、国家和offer_id（一个索引，三个部分）上放置一个索引。

我不确定这是否可行。它解决了`where`问题，但只解决了一半`group by`。

如果年份和月份是单独的列，则查询如下所示：

```
WHERE year >= 2012 and
GROUP BY country, offer_id, month, year 
```

然后（年，月，国家，offer_id）上的索引可以满足`where`并且`group by`仅使用该索引。我不确定混合不同粒度的日期会发生什么。这导致按日期（可能在月份级别）进行分区，然后根据计数、offer_id 和日期进行索引。（有些数据库实际上支持功能索引，您可以在索引中使用年份（日期）。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:31:16.007

只看表结构：

*   3 部分 由于 innodb 执行聚集索引的方式，主键使该表效率低下，而“id autoincrement not null primary key”可能会有所帮助。
*   然后，添加“唯一（`country`，，`campaign_id`）`date`”约束以保持唯一性。
*   此外，该组的索引：“key（国家，offer_id）”，可能还会将月份/年份添加到该索引中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:28:02.983

几种方法是可能的。

*   您可以使用`RANGE` [分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)来按年份划分表。

*   您可以运行一个批次并存储每个月的总数，然后在`totals`表上运行查询。从它的名字来看`aggregate_data`，它似乎已经是批量生成的，它可能不会太困难或太昂贵。

*   您可以尝试通过索引 on `date, country, offer_id`，但我认为`INSERT`如果您索引 on `date, country, offer_id, impressions, clicks, leads, payout, revenue`（这样，查询所需的所有数据都已经在索引中；不需要访问数据表。当然，这是有代价的——`INSERT`性能）。通过拆分`date`，`year`您`month`可以获得更好的结果，选择性能。

如果我遇到了你的问题，我会测试超级索引的性能（但要对整个应用程序进行良好的调整；不同的部分可能会遇到不同的性能影响）；然后我会尝试使用批处理解决方案，即使这意味着有两个表并处理同步。

# github - Git 拉取：EGit 与 GitHub

> ID：14325004
> 
> 赞同：3
> 
> 时间：2013-01-14T19:15:07.130
> 
> 标签：github, branch, egit, master

我按照教程[http://wiki.eclipse.org/EGit/User_Guide#GitHub_Tutorial](http://wiki.eclipse.org/EGit/User_Guide#GitHub_Tutorial)使用 GitHub 设置 EGit。当我想拉时，我遇到了这里描述的相同问题：[当前分支未配置为拉 配置中未找到键 branch.master.merge 的值](https://stackoverflow.com/questions/8820668/the-current-branch-is-not-configured-for-pull-no-value-for-key-branch-master-mer)

当我将以下内容添加到 .git/config

```
[branch "master"]
   remote = origin
   merge = refs/heads/master 
```

我得到另一个错误：

当前分支未配置为 pull 在配置中找不到 key remote.origin.url 的值

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:37:49.247

如[错误 352687](https://bugs.eclipse.org/bugs/show_bug.cgi?id=352687)中所述，这可能是因为您的 git 配置文件的远程部分不包含`origin`“远程”。

请参阅Egit 用户指南的[“添加远程配置”部分](http://wiki.eclipse.org/EGit/User_Guide#Adding_a_Remote_Configuration)
： 如果您没有远程“ `origin`”，您可以添加一个。

![添加遥控器](../Images/33532b05f88119b978e1136ce105f57b.png)

（这个例子定义了一个新的远程“ `pushtofile`”，但是，如果你还没有一个，你可以再次定义一个名为“origin”的远程。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T09:51:14.477

完整的 .git/config 文件应该是这样的：

```
[core]
    repositoryformatversion = 0
    filemode = false
    logallrefupdates = true
[remote "origin"]
    url = http://gitlab.funshion.com/gitlab/sandbox/try-conflict-resolution.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
        remote = origin
        merge = refs/heads/master 
```

# java - 一个罐子需要另一个罐子

> ID：14325005
> 
> 赞同：0
> 
> 时间：2013-01-14T19:15:14.433
> 
> 标签：java, jar

我创建了一个将连接到 oracle 数据库的类，它具有三个简单的函数`connect()`、`executeStatement()`和`disconnect()`。这个类需要一个 oracle “瘦” JDBC Jar 才能工作，因此它是“引用库”的一部分。

我现在要做的是将上面提到的类导出为 JAR 文件，以便其他程序可以使用它。但是，当我尝试这样做时，我会遇到以下问题。

```
Exception in thread "main" java.lang.NoClassDefFoundError: oracle/jdbc/driver/OracleDriver
Caused by: java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver 
```

我可以使用什么方法来制作它，以便 MY Jar 文件与 oracle Jar 文件一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:18:22.673

为了从多个 jar 中加载类，java 使用所谓的*classpath*。这是一个 jar 列表，也是与 jar 内容具有相同结构的目录。

此列表由以下参数`java`定义`-cp`。请参阅文档，例如此处。

```
java -cp jar1.jar;jar2.jar com.my.Class 
```

或者

```
java -cp jar1.jar;jar2.jar -jar main.jar 
```

此外，您可以研究 MANIFEST.MF 可以列出它的依赖 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:22:10.813

您必须将程序（包括您的代码）所需的所有 jar 添加到类路径中。例如：

java -cp jar1.jar;jar2.jar com.my.Class

类路径定义了 JVM 在加载代码时将在哪里查找代码。这是一个关于从命令行运行 Java 程序的快速而简单的教程：

[http://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/](http://www.sergiy.ca/how-to-compile-and-launch-java-code-from-command-line/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:24:17.237

如果您的意思是您希望您的 jar 文件完全自包含并且没有暴露给客户端代码的依赖项，那么您可以尝试[Jar Jar Links](http://code.google.com/p/jarjar/)，它将重命名依赖项并将它们包含在您的 jar 中。

[在这个类似问题](https://stackoverflow.com/questions/1832853/is-it-possible-to-create-an-uber-jar-containing-the-project-classes-and-the-pr)的答案中提到了其他可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:23:13.760

看看这个答案：[是否可以创建一个包含项目类和项目依赖项的“uber”jar 作为带有自定义清单文件的 jar？](https://stackoverflow.com/questions/1832853/is-it-possible-to-create-an-uber-jar-containing-the-project-classes-and-the-pr)

你也可以谷歌搜索“uberjar”。这描述了如何创建一个包含所有嵌入类的 jar。

您仍然可以使用类路径：

```
java -cp jar1.jar;jar2.jar com.my.Class 
```

# c# - 有没有办法限制网页视图中的网址数量

> ID：14325007
> 
> 赞同：0
> 
> 时间：2013-01-14T19:15:19.267
> 
> 标签：c#, windows, windows-8, microsoft-metro, winrt-xaml

我正在用 c# xaml 编写一个 Windows 8 应用程序，我正在使用 Web 视图，我想限制要在 Web 视图中加载的 URL，因为有些按钮不是必需的，我们为此目的提供了特定的 Web 应用程序. 那么我们可以限制可以在 Web 视图中加载的 URL 吗？

我想到的一种方法是检查一旦我们开始导航到新 URL 就会触发的事件。但我在 MSDN 文档中找不到。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:14:43.143

虽然不像拥有导航事件那么简单，但您可以利用 ScriptNotify 来解决问题。

[如何在 WebView 中模拟导航事件](http://blogs.msdn.com/b/priozersk/archive/2012/08/08/how-to-emulate-navigating-event-in-the-webview.aspx)

它基本上相当于遍历文档中的每个 a 标记，并添加一个自定义 Javascript 调用，让您知道正在发生的事情。然而，这并不是万无一失的，因为导航可能是通过 Javascript 触发的，而不是有人点击链接。

在使用 WebView 时，您可能会遇到一些其他问题。这是另一篇涵盖它们和一些解决方法的文章。

[Metro WebView 源解决方法](http://codesnack.com/blog/2012/01/05/metro-webview-source-workarounds/)

# javascript - Javascript 和自动分号插入

> ID：14325011
> 
> 赞同：0
> 
> 时间：2013-01-14T19:15:26.223
> 
> 标签：javascript, parsing

[test262](http://test262.ecmascript.org)测试套件具有包含源的[测试：](http://hg.ecmascript.org/tests/test262/file/927ea8563f7f/test/suite/ch07/7.9/S7.9_A5.7_T1.js)

```
var x=0, y=0;
var z=
x
++
++
y 
```

注释说：

> 由于后缀递增/递减运算符（I/DO）和操作数之间的LineTerminator（LT）是不允许的，自动分号插入后两个引用之间用[LT]分隔的两个IO（就像两个DO及其组合）导致语法错误

为什么这段代码会导致语法错误？我认为这是一个有效的代码片段。上面的代码等于`var z=x; ++ ++ y;`。javascript语法[允许](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4)表达式`++ ++ y`。所以有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:58:54.107

此代码将变为：

```
var z = x;
++ ++ y; 
```

`++ ++ y`是问题的根源。让我们看看为什么...

`++ ++ y`被评估为`++(++y)`. 第一步是评估`(++y)`。`++`运算符增加它旁边的变量引用的值，并返回增加的值。这里重要的部分是它*不返回一个引用，只是一个值*。所以第二步是`++(1)`, （或任何`++y`产生的），这是一个错误，因为只能增加引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T19:17:50.310

评估为：

```
var x = 0, y = 0;
var z = x ++ ++ y; //MAKES NO SENSE! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T19:57:46.267

语法不允许在`++`or`--`运算符之前使用换行符；这样的换行符必须转换为`;`. 因此，表达式必须被解析为好像它是：

```
var x = 0 , y = 0 ;
var z = x ;
++ ;
++ y ; 
```

第三行是非法的。

参考：

> 第 7.9.1 节，“自动分号插入规则”，规则 3
> 
> 第 11.3 节，“11.3 后缀表达式”。

# php - codeigniter 加载没有任何 html 标头的视图以进行打印

> ID：14325013
> 
> 赞同：0
> 
> 时间：2013-01-14T19:15:28.827
> 
> 标签：php, javascript, codeigniter, printing, codeigniter-2

php

```
function print(){
    $data=$this->session->userdata('print_data');
    $this->load->view('printer',$data);
} 
```

Html（打印机视图）

```
<div id='printerwrapper'>
......
</div>
<style>.....</style>
<script>windows.print();</script> 
```

当我查看并打印出来时，它会打印整个页面，并且 div 被调整大小以成为页面的一小部分，所以我检查了页面的 html 发现 ci 不仅呈现视图，而且还添加了所有元标记和基本html页面结构。

```
<html><head><title></title></head><body>......</body></html> 
```

这是我试图打印的页面示例， ![在此处输入图像描述](../Images/8874cae01079edc49a767b703ef8b293.png) 我想要打印的是这个 Div，而不是整个页面！

关于如何制作可打印页面，我应该知道些什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T03:40:35.433

您可以通过**JavaScript**轻松打印**Selected div**。看看下面的代码......

 **首先在头部添加这段 JavaScript 代码......

```
<script type="text/javascript">
function printDiv(divName) {
    var printContents = document.getElementById(divName).innerHTML;
    var originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    window.print();
    document.body.innerHTML = originalContents;
}
</script> 
```

然后查看页面如下...

```
<div id="printableArea">
       Your Content here.....
</div>

<input type="button" onclick="printDiv('printableArea')" value="Print Invoice" /> 
```

当您单击打印发票按钮时。然后它将使用选定的 DIV id **Printablearea打印出来**

尝试这个。希望它会奏效。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:53:30.873

我认为浏览器的目标是使打印看起来与其在屏幕上的外观相似，除非另有说明。话虽如此，也许您应该考虑只使用专门用于打印的 CSS 样式表，使用`@media print`. 我去为你[找到了一篇](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)我记得很久以前看过的关于印刷媒体查询的文章。

不过，这实际上取决于您的目标。如果您希望屏幕版本看起来像现在一样，但打印版本看起来不同，我认为这是要走的路。如果它在屏幕上的外观并不重要，也许你可以完全摆脱你的打印机包装器，只是左右浮动。**

# html - 替换第二页表单字段中 URL 传递变量中的“+”字符

> ID：14325014
> 
> 赞同：0
> 
> 时间：2013-01-14T19:15:36.257
> 
> 标签：html, forms, get, urlencode

我在主页上有一个表单，并试图将输入字段值传递到另一个仅在客户端使用的页面。问题是，我想在运行函数之前将传递的值重新显示回另一个表单字段，但我似乎无法使用 REGEX 替换“+”字符（也想保持间距）。知道如何在没有太多控制的情况下完成此任务吗？

**第 1 页表格：**

```
 <form id="dlrhpform" type="GET" action="/dealer-locator">
                <div id="hp-form-input">
                                <div style="padding-left:20px;">    
                                    <p>Enter address or zip code:</p>
                            <input style="float:left;" type="text" id="hpaddress" name="hpaddress"/>
                        </div>
            </div>
                <a href="javascript:;" onmouseover="MM_swapImage('hpsubmitbtn','','/btn_go_on.png',1)" onmouseout="MM_swapImgRestore()" />
                <input onClick="_gaq.push(['_setAccount', 'UA-XXXXXXX-1'],['_trackEvent','Dealer Locator','Input Parameter', document.getElementById('hpaddress').value]);" style="position:relative; z-index:9999;" type="image" id="hpsubmitbtn" src="/btn_go.png" border="0" width="20" height="21" alt="hpsubmitbtn"/>

            </form> 
```

**第二页表格：**

```
 <form name="user-location" id="user-location" method="post" action="#">
        <div id="form-input" name="form-input">
            <label for="address">Enter Address or Zip Code:</label>
            <input type="text" id="address" name="address" style="width:200px;"/>
        </div>
        <div id="submit-btn"><input name="fetch" type="image" src="/searchbutton.png" onclick="address.value=address.value.replace(/,/g,''); _gaq.push(['_setAccount', 'UA-XXXXXXX-1'],['_trackEvent','Dealer Locator','Input Parameter', document.getElementById('address').value]);"/></div>
    </form> 
```

**第二页脚本：**

```
//Return Home Page Address From URL
var urladdress;

if(document.URL.indexOf("hpaddress") >= 0)
{
    function getParams()
    {
        var idx = document.URL.indexOf('?');
        parent.params = new Array();
        if (idx != -1) 
        {
            var pairs = document.URL.substring(idx+1, document.URL.length).split('&');
            for (var i=0; i<pairs.length; i++)
            {
                nameVal = pairs[i].split('=');
                parent.params[nameVal[0]] = nameVal[1];
            }
        }
        return params;
    }
    params = getParams();
    urladdress = unescape(params["hpaddress"]);
}

window.onload = function()
{
    if(typeof urladdress !== 'undefined')
    {
        document.getElementById("address").value = urladdress;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:46:30.027

做了一些研究，我发现替换加号的难点在于，正则表达式中的加号用于表示还有更多的正则表达式要遵循。加号在 javascript 中用作运算符。但是，可以将其转义并替换如下。

```
var myString = "this+that+this+that++andthis++";
myString = myString.replace(/\+/g, " ");
alert(myString); 
```

# ios - 在 iOS 信号处理程序中可以轻松收集哪些原因信息？

> ID：14325019
> 
> 赞同：3
> 
> 时间：2013-01-14T19:16:03.760
> 
> 标签：ios, signals, error-logging

我正在尝试向应用程序添加一些崩溃日志记录，并且我`signal`设置了一个处理程序来捕获标准的“致命”信号。我可以在信号处理程序中实际/简单地收集哪些“原因”信息（如果有）以进行记录？

（我花了大约 2 个小时在谷歌上搜索东西，但我发现的大部分内容都是针对其他环境的，而且过于复杂而不可靠。我正在寻找简单易行的方法，特别是在 iOS 环境中。）

（我已经有一个 Objective-C 异常处理程序来捕获 Objective-C 异常。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:18:08.847

请不要这样做。正如 Landon Fuller 在这里强调的那样，进行正确和安全的崩溃报告非常困难：http: [//landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html](http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html)

简而言之：您只能在应用程序崩溃时使用异步安全代码，因此默认情况下调用任何 Objective-C 方法都是不安全的！

而是使用现有的崩溃报告库，如 PLCrashReporter 或其他一些已经存在的库或服务：[https ://code.google.com/p/plcrashreporter/](https://code.google.com/p/plcrashreporter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:25:49.860

您可以通过以下方式获取堆栈跟踪：

```
+ (NSArray *)backtrace {
    void* callstack[128];
    int frames = backtrace(callstack, 128);
    char **strs = backtrace_symbols(callstack, frames);

    int i;
    NSMutableArray *backtrace = [NSMutableArray arrayWithCapacity:frames];
    for (i = 0; i < XXX; i++) {
        [backtrace addObject:[NSString stringWithUTF8String:strs[i]]];
    }
    free(strs);

    return backtrace;
} 
```

# shell - 崇高文本 2 服务

> ID：14325020
> 
> 赞同：5
> 
> 时间：2013-01-14T19:16:04.473
> 
> 标签：shell, service, sublimetext2, automator

我正在尝试通过 Automator 在 Sublime Text 2 服务中打开。

我这样做是：

*   运行自动化
*   添加新服务
*   添加“运行Shell脚本”
*   将外壳设置为`/bin/zsh`
*   输入命令行：`/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl -n $@`
*   将“服务接收选定”设置为“文件或文件夹”
*   点击保存

截屏：

![在此处输入图像描述](../Images/37591e339849621b7861d13a4c553d70.png)

但是，每当我尝试通过右键单击 > 服务 > “在 Sublime 中打开”打开文件夹时，都会打开一个新的 ST2 窗口，但会打开一个随机命名的文本文件（即 subl stdin N188RN.txt），它的输出是打开的文件夹（即：/Users/me/Desktop/project）。

截屏：

![在此处输入图像描述](../Images/8d1bcb8e9ec83900027775d121c7c8b4.png)

有没有办法可以修改 automator 命令行来解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:21:32.900

尝试将`Pass input:`值设置为`as arguments`：

![在此处输入图像描述](../Images/58b5c6b67eb5f646106b343115844488.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T07:09:29.413

**启用 OSX Mountain Lion 上下文菜单启动：**

1.  打开自动机。添加新服务。
2.  搜索“运行 Shell 脚本”。拖动到右侧的面板（或双击它）。
3.  进入：

    `/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl -a $@`

4.  将“传递输入：”设置为“作为参数”
5.  将“外壳”设置为“bin/zsh”
6.  将“服务接收选择：”设置为“文件或文件夹”
7.  另存为“Open-in-Sublime”。

要使用：右键单击文件或文件夹，然后单击上下文菜单底部“服务”菜单中的“在 Sublime 中打开”。

**启用 OSX Mountain Lion 终端启动：**

1.  在命令行输入：

    `sudo mkdir /usr/local/bin`

2.  然后输入：

    `sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/sublime`

3.  `ln`创建一个链接。`-s`使其成为符号链接。
4.  `sudo`如果它不起作用，您可能需要在命令前面加上前缀。
5.  重启终端。

要使用：

user$ `sublime .`[这将在 Sublime 中打开当前文件夹结构]

user$ `sublime <filename>`[这将在 Sublime 中打开所需的文件]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T18:13:45.687

尝试将 Pass input: value 设置为参数。

并且`"/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl"`路径应该用双引号引起来。

# python - 在 Python 中使用 GDAL 库栅格化矢量图层

> ID：14325022
> 
> 赞同：1
> 
> 时间：2013-01-14T19:16:09.797
> 
> 标签：python, gdal, qgis

我正在尝试使用[Rasterizing a GDAL layer](https://stackoverflow.com/questions/2220749/rasterizing-a-gdal-layer)中的解释来栅格化矢量图层。我想从 DEM 创建一个栅格图层，其中包含矢量特定字段的数据。（该字段名为“索引”）。为此，我使用，

```
err = gdal.RasterizeLayer(
    target_ds,
    (3,2,1),
    source_layer,
    burn_values=(0,0,0),
    options=["ATTRIBUTE= Index"]
) 
```

但结果是一个全为零的栅格。

我确定这是参数的问题，但我不明白它们有什么问题或如何解决它。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T15:54:35.750

您正在将零烧到零背景上。将燃烧值更改为零以外的值。

# css - div 中的文本会自动移到底部

> ID：14325032
> 
> 赞同：2
> 
> 时间：2013-01-14T19:16:40.013
> 
> 标签：css, html

我的文字在底部，`div`但它需要在顶部`div`。

[问题的图片。](http://d.pr/i/eRpM+)

我的 CSS 代码：

```
#pagetitle
{
    float: left;
    width: 472px;
    height: 109px;
    font-size: 80px;
    font-family: 'CodePro';
    padding: 0px;
    margin: 0px;
}

html, body{
    margin:0 !important;
    padding:0 !important;
    opacity: 0.99;

    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;

    background-color: #cfcfcf;
} 
```

实时预览在[链接](http://www.random-radio.net/ "关联")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:21:18.207

试试这个：

```
#pagetitle
{
    line-height: 23px; /* or so, it depends on your need*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:34:48.927

似乎它与您使用的字体系列（CodePro）有关，如果您将字体系列更改为 Helvetica 之类的字体，您会看到您所期望的效果。您可以通过几种不同的方式调整文本的位置。

```
margin-top: -30px; 
```

或者

```
line-height: 40px; 
```

到**#pagetitle**，仅举几例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:28:27.467

它是字体的字体和大小。你可以给它一些负边距或一些行高。

```
#pagetitle {
   margin-top: -30px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:29:33.020

将此添加到您的CSS：

```
#pagetitle
{
    line-height: 10px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:46:43.557

如果使用 line-height 属性存在问题。我总是觉得使用安全...

```
position:relative;
top:-20px; 
```

在

```
#pagetitle
    {
        float: left;
        width: 472px;
        height: 109px;
        font-size: 80px;
        font-family: 'CodePro';
        padding: 0px;
        margin: 0px;
        position:relative;
        top:-20px;
    } 
```

玩弄`top:-20px`以获得所需的结果。

# php - 过去的字符串问题

> ID：14325046
> 
> 赞同：1
> 
> 时间：2013-01-14T19:17:06.463
> 
> 标签：php, payment

我有一个来自 Ogone 的测试帐户，我正在尝试测试支付系统。出于测试目的，我用最少的参数构建了一个字符串：

```
$ogoSHAstring = "AMOUNT=" . $amount . $signature . 
                "CURRENCY=" . $currency. $signature . 
                "LANGUAGE=" . $language . $signature . 
                "ORDERID=" . $orderId . $signature . 
                "PSPID=" . $pspId . $signature; 
```

它产生一个如下所示的字符串：

```
AMOUNT=990MySecretPassphrase!!CURRENCY=EURMySecretPassphrase!!LANGUAGE=nl_NLMySecretPassphrase!!ORDERID=67MySecretPassphrase!!PSPID=MyPSPIDMySecretPassphrase!! 
```

哪个是散列到

```
1B8B605EAEF8E2FD9350958C0B152E22FD61FADB 
```

发送的表格如下所示：

```
<form id='ogone' action='https://secure.ogone.com/ncol/test/orderstandard.asp' method='post'>
    <input type='hidden' name='AMOUNT' value='$amount' />
    <input type='hidden' name='CURRENCY' value='$currency' />
    <input type='hidden' name='LANGUAGE' value='$language' />
    <input type='hidden' name='ORDERID' value='$orderId' />
    <input type='hidden' name='PSPID' value='$pspId' />
    <input type='hidden' name='SHASIGN' value='$ogoSHAsign' />
</form> 
```

但我不断收到错误消息：

```
unknown order/1/r/ 
```

这些是我的设置：

![在此处输入图像描述](../Images/237ee515a36aadae550ba62c457b3499.png) ![在此处输入图像描述](../Images/d00be1c9c56929b02f46d9d7117d42a0.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T10:18:03.767

如果您收到错误，`unknown order/1/r/`这不是由于您的 SHA 计算。这是由于您的引用 URL。正如您在`Data and origin verification`选项卡中配置的那样，您的表单应该从 调用 Ogone `http://www.someurl.com/php/ogone.php`。

我猜你是从另一个 URL 调用它们。因此，我建议您在测试时从他们的配置屏幕中删除引荐来源网址。或者使用您实际使用的那个。

如果您遇到 SHA 错误，您将收到该`unknown order/1/s/`错误。

最后，您的表格也不正确。您只是在表单中编写您的 PHP 变量名，而不是真正地编写`echo`它们。将其更改为：

```
<form id='ogone' action='https://secure.ogone.com/ncol/test/orderstandard.asp' method='post'>
    <input type='hidden' name='AMOUNT' value='<?=$amount?>' />
    <input type='hidden' name='CURRENCY' value='<?=$currency?>' />
    <input type='hidden' name='LANGUAGE' value='<?=$language?>' />
    <input type='hidden' name='ORDERID' value='<?=$orderId?>' />
    <input type='hidden' name='PSPID' value='<?=$pspId?>' />
    <input type='hidden' name='SHASIGN' value='<?=$ogoSHAsign?>' />
</form> 
```

# linq - Monotouch中的Linq（在设备上调试）

> ID：14325048
> 
> 赞同：2
> 
> 时间：2013-01-14T19:17:08.983
> 
> 标签：linq, xamarin.ios, jit, aot, azure-mobile-services

我正在尝试运行 Windows Azure 移动服务查询（使用 SDK 的 xamarins monotouch 分支）。

此代码在模拟器上运行良好，但在设备上崩溃了：

```
this.table.Where (a => a.Sequence == sequence).Where (a => a.Week == week).ToListAsync()
                .ContinueWith (t =>
            {
                this.items = t.Result;
                this.tableView.ReloadData ();
                IsUpdating = false;
            }, scheduler); 
```

我得到的错误是：

> 调用的目标已引发异常。---> System.Exception：在使用 --aot-only 运行时尝试 JIT 编译方法“System.Linq.jvm.Runner:GetDelegate ()”。

我设法使它工作的唯一一件事就是删除 where 条件。这工作得很好，除了我（显然）没有根据需要过滤结果。

我应该如何重写我的代码以使其在实际的 iOS 设备上运行？

更新：表是类型的类变量 * *IMobileServiceTable < Activity > **

week 和 sequence 都是**int**类型。

Activity 是一个 POCO 类。

```
 public class Activity
{
        public int ID {
            get;
            set;
        }
        public string Name {
            get;
            set;
        }

        public int CaloricRequirementMin {
            get;
            set;
        }

        public int CaloricRequirementMax {
            get;
            set;
        }

        public string Difficulty {
            get;
            set;
        }

        public int PlanId {get;set;}

        public string Type {
            get;
            set;
        }

        public int Sequence {
            get;
            set;
        }
        public int Week {
            get;
            set;
        }

        public int SubscriptionActivityId {
            get;
            set;
        }
} 
```

我已经仔细检查以确保这些都已填充。

它在模拟器上完美无瑕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:47:24.583

MonoTouch Ahead Of Time (AOT) 编译器的全部意义在于避免 Apple 不允许在 iOS 中编译的问题。它是多个安全策略之一，还有签名的可执行文件、应用程序审查、沙盒等。不幸的是，某些 LINQ 表达式需要 JIT 编译，因此无法在设备上运行。

所有 LINQ 表达式都可以转换为非 LINQ（通常是迭代的）代码。在转换为迭代之前，您可以考虑一些可能有效的 LINQ 替代方法，例如 Any() 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:40:49.990

最后，我不得不修改我的代码以使用带有字符串查询的 ReadAsync 而不是 linq 表达式。

```
this.table.ReadAsync(query)
                .ContinueWith (t =>
            {
                    items = (from item in t.Result.GetArray()
                             let act = item.GetObject()
                    select new Activity{
                        ID= Convert.ToInt32(act.GetNamedNumber("id")),
                        Name= act.GetNamedString("Name"),
                        SubscriptionActivityId = act.ContainsKey("SubscriptionActivityId") ? Convert.ToInt32(act.GetNamedNumber("SubscriptionActivityId")) : 0
                    }).ToList();

                    this.tableView.ReloadData ();
                IsUpdating = false;
            }, scheduler); 
```

# sql - 唯一约束的 Liquibase 前提条件

> ID：14325050
> 
> 赞同：3
> 
> 时间：2013-01-14T19:17:10.560
> 
> 标签：sql, liquibase, preconditions

我想使用 Liquibase 向列添加唯一约束。当然，我想使用前提条件检查是否存在重复行。

我想出了这个：

```
<preConditions>
    <sqlCheck expectedResult="0">
        select count(*)
        from person
        having ( count(username) > 1 )
    </sqlCheck>
</preConditions> 
```

然而，这会`Empty set`在 MySQL 和可能的其他数据库上产生。

我尝试使用`expectedResult=""`，`expectedResult="null"`但两者都不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T19:29:46.913

你总是可以强制一个结果：

```
select 
  case when exists(
    select username, count(*)
    from person
    group by username
    having count(*) > 1 )
    then 1
    else 0
  end 
```

这也允许通过/拥有一个更正常的组

# ios - UIScrollView 使 UITextField 停止调用 UIPicker

> ID：14325055
> 
> 赞同：1
> 
> 时间：2013-01-14T19:17:28.820
> 
> 标签：ios, uiscrollview, uitextfield, uipicker

开始。我已经在 SO 和其他地方对此进行了研究，但没有找到问题的确切答案。我见过类似的问题，但不一样。我有一个功能齐全的应用程序，它使用选择器填充大约 5 个文本字段。当用户点击文本字段时，选择器就会出现，一切都很好。我最近想扩大文本字段之间的空间以使其看起来更好。但是我没有足够的空间。所以我想我可以将文本字段放入滚动视图中，这样就可以了。但是，当我连接我的操作“showYourPicker”时，选择器不再出现，常规键盘会出现。我什至尝试将视图设为 UITextfieldDelegate 并运行

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
{
[self showYourPicker:self];
return NO;  
} 
```

显示我的选择器并隐藏键盘，但这不起作用。我知道我已经正确连接了文本字段，因为如果我删除滚动视图并将其全部连接起来，一切都会恢复正常。那么，当文本字段位于滚动视图内时，我该怎么做才能显示选择器而不是默认键盘。提前致谢。如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:33:05.160

无论你在哪里做这个

```
UITextField *theTextField = [[UITextField alloc] init]; 
```

在那之后做这个

```
textField.inputView = yourPickerView; 
```

# wordpress - 除非我将 index.php 添加到查询字符串中，否则 URL 重写将不起作用？

> ID：14325058
> 
> 赞同：1
> 
> 时间：2013-01-14T19:17:37.243
> 
> 标签：wordpress, url-rewriting, iis-7.5, ape

我一直在努力理解为什么我不能让它工作。我安装了安装了 Helicon APE 的 Windows Server 2008 r2 并且有几个重写错误。

目前，首页和博客文章正在工作（即使有漂亮的永久链接），但单击任何其他页面/类别/或存档会将您重定向回博客的索引（主页）。我一直在与 helicon 人员联系，**他们告诉我的最新消息是：**

> 问题是以下 URL 也不起作用（尽管不涉及 Ape）：
> 
> example.com/rental-blog/?paged=2
> 
> example.com/rental-blog/?cat=4
> 
> 但是，如果您在查询字符串之前添加“index.php”，它们就会开始正常工作。请弄清楚为什么会发生这种情况。
> 
> 一旦您使这些链接正常工作，永久链接的 .htaccess 也可以正常工作。

有谁知道在哪里可以解决这个问题？是否有我可能错过的常见 IIS 设置？我几乎从头到尾阅读了互联网试图弄清楚。

值得一提的是，博客子目录中的 htaccess 是：

```
# Helicon Ape version 3.0.0.84
# BEGIN WordPress
RewriteEngine On
RewriteBase /rental-blog/
#RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /rental-blog/index.php/$1 [L]
# END WordPress 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:13:33.587

我个人建议您改用这些规则：

```
# BEGIN WordPress
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) index.php?$1 [L,QSA]
# END WordPress 
```

这些规则更简单、更快捷。您的原始规则不起作用的问题可能是因为 inxed.php 文件未列为您网站的默认文档。

# arrays - 如何从多个表创建数组

> ID：14325069
> 
> 赞同：0
> 
> 时间：2013-01-14T19:18:08.497
> 
> 标签：arrays, ruby-on-rails-3, multidimensional-array

我有 3 个模型：运营商、产品、费率。每个运营商`has_many :products`和每个产品`has_many :rates`。我正在尝试创建一个 html 表格，该表格将遍历每个产品并*仅显示最新汇率*。我假设我需要将它存储在一个数组（或哈希？）中，但不太确定如何（因为我是编程新手，但正在学习！）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:28:06.937

最新汇率是在您的数据库上创建的最后汇率。如果此信息属实，则意味着 SQL 查询仅获取`limit 1`按创建日期降序 ( ) 排序的 ( `created_at DESC`) 行将获得您想要的记录。了解这一点后，您可以在费率模型中创建范围：

```
scope :current_rate, order('rates.created_at DESC').limit(1).first
# As @AntohnyAlberto said, limit would bring an array, so you may use .first on the results
# Or you can use just .first, as it would bring only the first one
scope :current_rate, order('rates.created_at DESC').first 
```

并在您的视图中在您的产品循环中使用此范围：

```
 <%= product.rate.current_rate %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:43:50.443

我会做这样的模型：

```
class Product < ActiveRecord::Base
  def current_rate
    rates.order('created_at ASC').last
  end
end 
```

然后在视图中：

```
<%= product.current_rate %> 
```

# c++ - 控制台输入 - 按下回车后清除

> ID：14325070
> 
> 赞同：2
> 
> 时间：2013-01-14T19:18:08.847
> 
> 标签：c++, input, stream, console, cross-platform

我需要一种跨平台的方式来处理这个：

当我在“cin”行中按回车键时，我希望它清除所有已处理的内容，包括换行符。

甚至可能吗？还是我需要找到一些跨平台的 getch() 实现并这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:24:08.143

我能看到的唯一跨平台方式是完全放弃标准输入和输出流，并使用[ncurses](http://en.wikipedia.org/wiki/Ncurses)之类的东西（具有 Windows 端口）。

它可以直接处理阅读键，有或没有回声，并且可以清除屏幕。

# php - PHP返回与回声

> ID：14325077
> 
> 赞同：0
> 
> 时间：2013-01-14T19:18:34.230
> 
> 标签：php, string, return, wordpress-theming, echo

我有一系列功能，最终会创建一个表单。它们位于一个类中，例如以下示例：

```
class ExampleForm{
    protected $_html = '';

    protected $_element;

    public function __construct($element){
        $this->_element = $element;   

    protected function _open_form(){
       echo $this->_html .= '<form>';
    }

    public function create_form(){
       $this->_open_form()
       $this->_html .= $this->_element;
       echo "some content";
       $this->_close_form()
    }

    protected function _close_form(){
        echo $this->_html .= '</form>'
    }

    public function __toString(){
        return $this->_html;
} 
```

实例化为：

```
$element = 'some element';
new ExampleForm($element); 
```

可以在[Github 上的第 86 行](https://github.com/AdamKyle/Aisis-Framework/blob/dev1.2/AisisCore/Form/Form.php)看到一个更全面的示例， 此内容得到回显，但它在表单中的回显如何。

如果你想看这个的真人演示，[那么你会拒绝我。](http://adambalan.com/WordPressDev/uncategorized/more-content-2)一天结束时，如果您检查网页上的表单，您会在表单开始标记上方看到两个需要**位于表单标记内的**隐藏字段。

现在有人会认为这会创建一种形式，例如：

```
<form>
    element
    some conent
</form> 
```

然而，我得到的是：

```
some content
<form>
    element
</form> 
```

那么有人可以根据我上面的内容告诉我，为什么即使我已经回显了开始表单标签，我的“一些内容”也会在表单标签之外回显？

即使我不回显开头的表单标签，“一些内容”仍然出现在开头的表单标签之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:21:23.850

echo 立即执行输出，例如

```
function bar() {
   echo 'bar';
}

bar();
echo 'foo'; 
```

给出`barfoo`作为输出。但如果你有

```
function bar() {
    return 'bar';
}

$baz = bar();
echo 'foo';
echo $baz; 
```

你会得到`foobar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:26:14.353

Return 将简单地返回变量而不回显它，其中 echo 将在调用时回显它。所以如果你返回一个变量然后回显一些东西。所以在你的函数 create_form() 中，而不是`echo "some content";`仅仅做`$this->_html .= "some content";`

# perl - perl 中的 push 函数不向现有数组添加元素。为什么？

> ID：14325085
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:19:16.593
> 
> 标签：perl, push

我的程序是

```
#!\usr\bin\perl

@a = (1,2,3);
@b= ("homer", "marge", "lisa", "maria");
@c= qw(one two three);

print push @a, $b; 
print "\n";

@count_number= push @a, $b; 

print @count_number; 
print "\n"; 
print @a; 
```

我得到的输出为

```
4
5
123 
```

为什么我得到输出`4, 5, 123`？为什么我的数组没有扩展？而且输出不是`4, 4, 123`or `5, 5, 123`。为什么会有这样的行为？为什么我没有得到输出`1 2 3 homer marge lisa maria`？

我是初学者。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:36:25.557

首先`use strict`和`warnings` [pragma](http://perldoc.perl.org/strict.html)。您的脚本不起作用，因为您没有为`$b`变量分配任何内容，因此您将空值推送到数组，并且如前所述，您只是打印数组中的元素数。如果我没记错的话，push 函数只返回新元素被推送到数组后的数组数，所以返回应该始终是一个标量。

```
my @a = (1,2,3);
my @b= ("homer", "marge", "lisa", "maria");
my @c= qw(one two three);

#merge the two arrays and count elements
my $no_of_elements = push @a, @b;
print $no_of_elements;

#look into say function, it prints the newline automatically
print "\n";

#use scalar variable to store a single value not an array 
my $count_number= push @a, $b;

print @count_number; print "\n";

print @a; 
```

另一个有趣的事实是，如果您`print @array`将列出所有不带空格的元素，但如果您将数组用双引号括起来，`print "@array"`则它将在元素之间放置空格。哦，最后但同样重要的是，如果你是 perl 新手，你真的真的应该在[http://www.onyxneon.com/books/modern_perl/index.html](http://www.onyxneon.com/books/modern_perl/index.html)下载现代 perl 书，它每年更新一次，所以你会在那里找到最新的实践和代码；这绝对胜过任何过时的在线教程。此外，这本书的结构非常好，逻辑清晰，让学习 perl 变得轻而易举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:23:31.620

`$b`未定义。

`@b`并且`$b`是不同的变量。一个是列表，另一个是标量。

您正在打印数组的长度，而不是内容。

建议：

1.  使用“使用警告；”
2.  使用“使用严格；”
3.  使用“推@a，@b；”

你的脚本：

```
@a = (1,2,3);  # @a contains three elements
@b= ("homer", "marge", "lisa", "maria"); # @b contains 4 elements
@c= qw(one two three); # @c contains 3 elements
print push @a, $b;     # $b is undefined, @a now contains four elements 
                       #(forth one is 'undef'), you print out "4"
print "\n";

@count_number= push @a, $b; # @a now contains 5 elements, last two are undef, 
                            # @count_number contains one elements: the number 5

print @count_number;        # you print the contents of @count_number which is 5
print "\n";
print @a;                   # you print @a which looks like what you started with
                            # but actually contains 2 undefs at the end 
```

试试这个：

```
#!/usr/bin/perl
use warnings;
use strict;

my $b = 4;
my @a = (1,2,3);
my @b= ("homer", "marge", "lisa", "maria");
my @c= qw(one two three);

print "a contains " . @a . " elements: @a\n";

push @a, $b;
print "now a contains " . @a . " elements: @a\n";

my $count_number = push @a, $b;
print "finally, we have $count_number elements \n";
print "a contains @a\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:27:47.960

$array 返回数组的长度（数组中的元素数） 要将任何元素 ($k) 推入数组 (@arr)，请使用 push (@arr, $k)。在上述情况下，

使用推送（@b，@b）；

# jquery - 禁用类 onclick 直到单击另一个按钮

> ID：14325086
> 
> 赞同：1
> 
> 时间：2013-01-14T19:19:17.043
> 
> 标签：jquery, button

我有一个 div，其中有 4 个跨度：

```
<div id="text">
<span class="text_1" id="text1">text1 1</span>
<span class="text_2" id="text2">text2 2</span>
<span class="text_3" id="text3">text3 3</span>
<span class="text_4" id="text4">text4 4</span>
</div> 
```

我有两个按钮，buton1 允许类下划线

```
.underline
 { border-bottom:1px solid #000; } 
```

当我单击每个跨度时添加到每个跨度（因此，如果我单击 text1，则其他文本不应有下划线），以及另一个应取消下划线的 button2，直到再次单击 button1。

我所拥有的是：

```
$('#button1').click(function () {

    $(".text_1").click(function () {
     $(".text_2").removeClass("underline");
     $(".text_3").removeClass("underline");
     $(".text_4").removeClass("underline");
     $('.text_1').addClass("underline");
});

     $(".text_2").click(function () {

     $(".text_1").removeClass("underline");
     $(".text_3").removeClass("underline");
     $(".text_4").removeClass("underline");
     $('.text_2').addClass("underline");
});
$(".text_3").click(function () {

     $(".text_2").removeClass("underline");
     $(".text_1").removeClass("underline");
     $(".text_4").removeClass("underline");
     $('.text_3').addClass("underline");
});

     $(".text_4").click(function () {

     $(".text_2").removeClass("underline");
     $(".text_1").removeClass("underline");
     $(".text_3").removeClass("underline");
     $('.text_4').addClass("underline");
}); 
}); 
```

这意味着如果单击 button1，上述所有情况都会发生。

所以 button2，我希望它从所有内容中删除所有下划线，但我不想再次执行上述所有操作，因为最终我将拥有 100 个跨度标签！

我认为正确的是

```
$('#button2').click(function () {

        $('#text').removeClass("underline") });   }); 
```

但这不起作用。（#text 是 div id）

然后我尝试了

```
$('#button2').click(function () {
     $(".text_2").removeClass("underline");
     $(".text_1").removeClass("underline");
     $(".text_3").removeClass("underline");
     $('.text_4').removeClass("underline"); 
```

我想要它，以便在您单击 button2 后，在单击 button1 之前，我无法使跨度文本下划线。所以上面的那个删除了下划线类，但我仍然可以单击每个跨度元素并使其成为我不想要的下划线！

有人可以帮我解决这个问题吗？我对此有点陌生，所以如果你也能帮我清理 button1 的功能，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:24:34.053

这个怎么样 -[**演示**](http://jsfiddle.net/d4zNT/)

```
$("span").on("click", function() {
  $(this).siblings().removeClass('underline').end().addClass("underline");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:23:03.893

试试这个：

```
$('#button2').click(function () {
    $('.underline').removeClass('underline');
    $('#text span').unbind('click');
}); 
```

在此之后，只需打开`underline`你需要的东西。

此外，您可以`button1`像这样进行点击：

```
$('#button1').click(function () {
    $("#text span").click(function () {
        $('.underline').removeClass('underline');
        $(this).addClass('underline');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:24:10.933

你快到了。在这里尝试[**演示**](http://jsfiddle.net/hG4hM/1/)

```
var allowClick = true;

$('#text span').click(function () {
  if (allowClick == true) {
    $('#text span').removeClass("underline");
    $(this).addClass("underline");
  }
});

$('#button1').click(function () {
  allowClick = true;
});

$('#button2').click(function () {
  $('#text span').removeClass("underline");
  allowClick = false;
}); 
```

**更新：**

还有另一种解决方案，您可以在其中取消绑定跨度上的单击事件。但是使用变量会更简单更快。如果您无法创建全局变量，请考虑取消绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:31:58.900

Javascript：

```
$("#button1").click(function(){ 
  $("#text").removeClass("disable-underline");
});
$("#button2").click(function(){ 
  $("#text").addClass("disable-underline");
});

$("#text span").on("click", function(){
  $("#text span").removeClass("underline");
  $(this).addClass("underline");
}); 
```

CSS：

```
.underline { border-bottom:1px solid #000; }
.disable-underline .underline { border-bottom: 0;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:35:44.313

我不确定我的理解是否完全正确。

演示：http: [//jsfiddle.net/kYg8k/](http://jsfiddle.net/kYg8k/)

首先，让我们在一行中处理所有跨度点击。这将类添加到单击的跨度并从其兄弟姐妹中删除。

```
$("#text SPAN").click(function(){
  $(this).addClass("underline").siblings().removeClass("underline");
}); 
```

下一个按钮 2 从任何带下划线的跨度中删除下划线类

```
$(".bt2").click(function(){
    $("#text SPAN").removeClass("underline");
}); 
```

最后 button1 通过向 #text 添加一些标志类来启用下划线

```
$(".bt1").click(function(){
  $("#text").toggleClass("underlinable");
}); 
```

让我们在事件中使用这个标志

```
$("#text SPAN").click(function(){
  if ($(this).closest("#text").hasClass("underlinable")) {
    $(this).addClass("underline").siblings().removeClass("underline");
  }
}); 
```

（在演示中，我几乎没有带有标志指示的高级代码。）

# r - 带有由 grid.arrange() 扰动的图例的 ggplot2 图形

> ID：14325090
> 
> 赞同：2
> 
> 时间：2013-01-14T19:19:22.943
> 
> 标签：r, ggplot2

这是我的数据集：

```
> # my data --- copy and type  dd.RR <- read.table(file="clipboard")  to get it
> dd.RR 
        variance         vars
1 Op:Date:Sample 2.334140e-10
2    Date:Sample 0.000000e+00
3      Op:Sample 1.578744e-10
4        Op:Date 7.087561e-10
5         Sample 3.710173e-02
6             Op 5.429357e-01
7           Date 0.000000e+00
8         repeat 7.640778e-01 
```

我绘制了一个漂亮的饼图：

```
gg <- ggplot(dd.RR, 
        aes(x = factor(""), fill = variance, weight=vars)) + 
        geom_bar(width = 1) + coord_polar(theta = "y") +
        labs(title="Reproductibilité et répétabilité") +
        scale_x_discrete("", breaks=NULL) + scale_y_continuous("", labels=NULL) 
gg 
```

![饼形图](../Images/8e8bdb8f83813e6254429e2ad2c57adb.png)

但是`grid.arrange()`从`gridExtra`包中使用时会发生一些不好的事情：

```
grid.arrange(gg,gg,ncol=2) 
```

![饼图并排](../Images/ca6071a915ca33d89b755566f2dace5c.png)

请问当有这样的传说时，如何并排绘制两个 ggplot2 图形？（`grid.arrange()`如果可能的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:29:37.523

由于@baptiste 没有将其评论转换为答案，所以我这样做了：

使用更大的设备窗口（饼图具有固定的纵横比以保持圆形；当您将两个并排放置时，它们变得非常小，但图例和标题保持其大小并相互重叠）。使用例如`dev.new(width=10)`.

# excel - 创建一个可重复使用的宏来关闭 Excel 中的活动工作表？

> ID：14325094
> 
> 赞同：0
> 
> 时间：2013-01-14T19:19:42.447
> 
> 标签：excel, vba

我想在 excel 中创建一个宏，我可以在任何工作表上重复使用它来关闭工作表并将用户引导回“主页”工作表。

我在想这样的事情？但我在第 3 行遇到错误。

```
 Sub CloseCurrentTab()

    ' CloseCurrentTab Macro

    Dim strCurrentSheet As String
    strCurrentSheet = ActiveSheet.Name
    Sheets("strCurrentSheet").Visible = False
    Sheets("Home").Activate

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:34:09.753

我从您的问题中假设您想要创建一种隐藏除活动工作表之外的所有内容的导航。

如果这是您要查找的内容，则需要以下代码：

在一个模块中：

```
Global Const cStrHomeSheet As String = "Home"

公共子 subGotoSheet(strSheetName 作为字符串)
    On Error GoTo ErrorHandler
    将 wsActive 调暗为工作表

    Application.ScreenUpdating = False

    设置 wsActive = ActiveSheet

    Sheets(strSheetName).Visible = xlSheetVisible
    Sheets(strSheetName).Activate

    wsActive.Visible = xlSheetVeryHidden

    Application.ScreenUpdating = True

    退出子

错误处理程序：
    MsgBox "找不到工作表" & strSheetName
结束子

公共子 subGotoHomeSheet()
    subGotoSheet cStrHomeSheet
结束子

公共子 subGotoSheetFromCaller()
    subGotoSheet Application.Caller
结束子

公共子 subHideAll()
    暗淡为工作表

    Application.ScreenUpdating = False
    ActiveWindow.DisplayWorkbookTabs = False

    Sheets(cStrHomeSheet).Visible = xlSheetVisible
    表格（cStrHomeSheet）。激活
    对于表格中的每个 ws
        If ws.Name cStrHomeSheet Then _
            ws.Visible = xlSheetVeryHidden
    下一个

    Application.ScreenUpdating = True
结束子

公共子 subShowAll()
    暗淡为工作表

    Application.ScreenUpdating = False
    ActiveWindow.DisplayWorkbookTabs = True

    对于表格中的每个 ws
        ws.Visible = xlSheetVisible
    下一个

    Application.ScreenUpdating = True
结束子    

```

此外，将以下代码放入`ThisModule`模块中：

```
私有子 Workbook_Open()
    隐藏全部
结束子

```

**解释及用法：**

模块中的代码`ThisWorkbook`将隐藏除了加载工作簿的主工作表之外的所有内容。（为了隐藏您正在切换工作表的事实，它还隐藏了窗口左下方的工作表标签栏）。

通过调用 a`subGotoSheet "DestinationSheet"`您现在可以“激活”，即取消隐藏目标工作表 - 旧工作表将被隐藏。为了让您的生活更轻松，您还可以调用`subGotoHomeSheet`- 更重要的是，使用`subGotoSheetFromCaller`. 如果您将它与按钮（或任何形状）结合使用，这真的很整洁：如果您将按钮或形状插入工作表，请将此宏分配给它。您现在只需要根据您的目标表命名项目（使用公式字段左侧的名称框） - 该按钮将自动将您带到所需的表！

最后但并非最不重要的一点是，我假设您还需要一个“开发人员模式”，您可以在其中查看和编辑所有工作表。为此，运行`subShowAll`，返回，运行`subHideAll`。我建议您为这两个宏分配快捷键，这样您就可以在开发人员模式和用户模式之间快速切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:21:51.530

要让它*编译*将第 3 行更改为：

```
Sheets(strCurrentSheet).Visible = False 
```

然而，这只是隐藏工作表；它不会删除它。要（永久）删除它，请使用：

```
Sheets(strCurrentSheet).Delete 
```

# c++ - 将 uint64_t 转换为双精度时调整精度

> ID：14325096
> 
> 赞同：1
> 
> 时间：2013-01-14T19:19:53.947
> 
> 标签：c++, double, precision

我有一个方法以以下格式返回时间的字符串表示形式：_HH:MM:SS.sss 该方法以微秒为单位的 uint64_t 时间作为参数。我可以很容易地将小时和分钟分开，但是当涉及到秒时，我需要转换为双精度，这样我也可以获得秒的分数。

示例代码：

```
std::string getDurationTime(uint64_t time){

  std::string returnTime="";

   uint64_t tempTime = time;
   uint64_t hours = (tempTime / 3600000000);
   tempTime -= (hours * 3600000000);

   uint64_t minutes = (tempTime / 60000000);
   tempTime -= (minutes * 60000000);

   double seconds = (double(tempTime) / 1000000);

   stringstream timeOut;

   timeOut<<std::setw(2)<<std::setfill('0')<<hours<<":"<<std::setw(2)<<std::setfill('0')<<minutes<<":"<<std::fixed<<std::setw(6)<<std::setprecision(3)<<std::setfill('0')<<seconds;

  returnTime = "_" + timeOut.str();

  return returnTime;

} 
```

所以像 103566 这样的数字应该返回 _00:00:00:104 的值，但它返回的是 _00:00:00:103。当我在秒上设置一个断点时，值为 0.103499999。是否有针对此精度进行调整的标准技术？如果我将 .000001 添加到生成的秒数中，它是否会每次都为该精度解决问题？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:22:57.907

您可以使用`seconds = round(seconds * 1000.0) / 1000.0;`将您的数字四舍五入到每秒数千。

# django - 使用 Django 编写 iCalendar 文件，文件格式？

> ID：14325099
> 
> 赞同：0
> 
> 时间：2013-01-14T19:20:06.853
> 
> 标签：django, google-calendar-api, icalendar

我有一些来自我的网站的数据，我想手动写入 iCalendar 文件，然后导出到 Google 日历。由于我网站的其余部分都在 Django 中，因此我想使用 Django 来执行此操作。iCal 文件的格式是什么？我已经用 Google 搜索过，但并没有真正想出对格式和标题需求的非常精确的定义（尤其是对于经常性事件）。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:02:57.673

试试这个应用程序[https://github.com/statesofpop/django-cal](https://github.com/statesofpop/django-cal)

我过去曾将它用于 iCal 集成。很棒的小应用程序，非常易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:47:02.100

这是[RFC5545 规范](http://www.ietf.org/rfc/rfc5545.txt)。[此页面](http://www.kanzaki.com/docs/ical/)更易于使用以了解特定参数。

发布的 wikipedia 链接 dm03514 对于获取基本日历格式来模仿很有用，但您还应该继续制作 Google 日历，在其中填充一些事件，然后导出以查看它们使用的内容。广泛支持一些非标准值，例如 X-WR-CALNAME。

# c++ - 何时在 OpenGL 中执行 3D 碰撞检测？

> ID：14325105
> 
> 赞同：1
> 
> 时间：2013-01-14T19:20:45.620
> 
> 标签：c++, opengl, graphics, collision-detection

我正在制作一个使用各种高级图形方法的程序。目前，两个 Wavefront obj 模型被导入并呈现在屏幕上。我正在尝试在这两个对象之间实现蛮力三角-三角碰撞检测，但我担心何时执行这些操作。在这个程序中我不会有动画和运动，我想做的就是当我翻译（glTranslate）一个对象时，它会与另一个对象发生碰撞，从而为碰撞的三角形着色。

我的碰撞检测功能应该与我的初始模型顶点一起工作还是我需要以某种方式获取当前坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:24:32.383

最好将运动（如果你愿意的话，物理）与绘图分开。您可以使用空闲功能或计时器功能来移动波前并检查碰撞，只需将三角形标记为碰撞（或任何您想要指示它们碰撞的东西），然后强制重绘屏幕，您的绘图代码应该只是小心清除屏幕并重新绘制所有顶点并根据它们是否被标记为碰撞来适当地着色它们。

碰撞检测很可能适用于您的模型顶点，但您需要跟踪对象在“空间”中的位置以适当地进行数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:38:36.297

最好将这两个模块分开：渲染和物理/碰撞。

因此一个对象有两种表示：一种用于渲染（纹理、模型几何、材料等），另一种用于物理（边界框、字空间位置等）

*   物理学不必如此完美，通常只需要一些网格近似。因此，对于房屋对象，我们将仅使用边界框或边界球来测试碰撞。
*   另一件事是碰撞层次：从低分辨率到高分辨率。首先只测试边界球（便宜的测试），然后逐渐转向三角形到三角形的碰撞测试（相当昂贵）

# c#-4.0 - 处理 HtmlHelperClass 中的事件

> ID：14325107
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:21:00.100
> 
> 标签：c#-4.0, asp.net-mvc-4, event-handling, html-helper

使用：**ASP .NET MVC 4.0**，**vs2010**

我已经在互联网上搜索了所有可能的方法。但是没有找到任何有效的方法来处理htmlhelperclass中的事件。

在服务器控制中，我可以轻松使用事件。**button_click**，**listbox.SelectedIndexChanged**和更多类似的。

在不使用 JS/jquery 的情况下，如何使用 c# 轻松处理控件的事件？任何对有效文章或教程的引用将不胜感激（再次说，我正在使用**asp.net MVC 4.0 razor 视图**并尝试使用**htmlhelperclass设计****表单**）。

 **谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:49:35.910

在 MVC 中没有“服务器端”控件或事件的概念。您必须使用表单或 ajax 将信息 GET 或 POST 到服务器。

代替事件，您有控制器操作。因此，对于每个“button_click”，您都会将数据发布到控制器的操作中。

如果您不使用 jQuery 或 JavaScript，则唯一的其他方法是使用表单元素。**

# jquery - jquery prop 工作但现在不行

> ID：14325112
> 
> 赞同：-3
> 
> 时间：2013-01-14T19:21:17.570
> 
> 标签：jquery, version, prop

我使用 prop 编写了一个 jquery 函数来取消选中我页面中的所有复选框。它工作正常，但今天突然间，它不工作了。下面是我的代码

```
$(function() {
            $("#ctl00_ContentPlaceHolder1_chkSelectAll").click(function() {
                if (!$(this).is(":checked")) {
                    $("[id*=chkSelectionColumns] input:checkbox").prop('checked', false); // To uncheck all
                }
                else {
                    $("[id*=chkSelectionColumns] input:checkbox").prop('checked', true); //To check all
                }
            });
        }); 
```

我发现如果我使用指向 jquery 文件的链接，`<script src="jquery/js/jquery-1.8.1.min.js" type="text/javascript"></script>` 它在我使用的地方 `<script src="jquery/js/jquery-1.5.1.min.js" type="text/javascript"></script>`工作，它不起作用。

更令人困惑的是几天前它正在使用 1.5.1。任何机构都知道它是如何与 1.5.1 一起工作的吗？Prop 是 1.8.1 特有的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:24:09.663

根据这个[jQuery Docs 页面](http://api.jquery.com/prop/) `$.prop()`是在 1.6 中添加的。为了向后兼容，您可以尝试改用`$.attr()`（[此处的文档](http://api.jquery.com/attr/)）？

# zend-framework - 如何组织多语言 Zend 项目

> ID：14325114
> 
> 赞同：1
> 
> 时间：2013-01-14T19:21:19.647
> 
> 标签：zend-framework, structure, multilingual, zend-translate

我已经建立了一个多语言网站。可以通过单击站点上的标志来切换语言。单击其中任何一个时，请求将提交给具有以下代码的控制器：

```
<?php

class LanguageSwitchController extends Zend_Controller_Action
{
    protected $_redirector = null;
    public function init(){
        $this->_helper->layout->disableLayout;
        $this->_helper->viewRenderer->setNoRender();

        $this->_redirector = $this->_helper->getHelper('Redirector');
/*      $this->_redirector->setGotoUrl($this->getInvokeArg('referer'));
*/
    }
    public function switchAction(){
        $session = new Zend_Session_Namespace('language');
        $session->language = $this->_getParam('lang');

        $this->_redirector->gotoUrl($_SERVER['HTTP_REFERER']);
    }
} 
```

所有与 Zend_Session、Zend_Translate 和 Zend_Locale 相关的参数都在 Bootstripe 文件中定义。基本上一切正常。我正在使用阵列适配器。所有翻译都存储在 3 个 php 文件（ro、ru、en）​​中，根据所选语言，页面以各自的语言显示。问题是每个页面没有每种语言的唯一 URL。例如，如果用户在页面上`http://mysite.com/mycontroller/myaction`（假设页面以英语显示，因为它是用户浏览器的默认语言 - 站点会自动检测浏览器的默认语言）并决定将其转换为俄语通过单击相应的标志，该站点将以俄语显示，但 URL 将保持不变：`http://mysite.com/mycontroller/myaction`. 例如，以这种方式，我无法通过 Google 对其进行适当的索引。如果没有每种语言的每个页面的唯一 URL，我将只能为一种语言编制索引（我相信默认的一种）。是否有可能以某种方式调整项目，还是我必须完全改变网站的结构？一般来说，当网站被翻译成几种语言时，基于 Zend 框架组织项目结构的最有效方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:57:02.373

使用自定义路由怎么样？例如，通过以下方式为英语定义一条路线：

```
routes.english.route = "en/:controller/:action"
routes.english.defaults.lang = en 
```

# c# - 如何让 StringSize 返回有用的高度？

> ID：14325118
> 
> 赞同：8
> 
> 时间：2013-01-14T19:21:42.313
> 
> 标签：c#, ios, xamarin.ios

MonoTouch 通过 使这些`sizeWithFont`方法可用，但无论我传递给它的字符串多长`UIView`，它似乎都会返回字体。`LineHeight`

```
string someString = "test string";
UIFont someFont = UIFont.SystemFontOfSize(13f);
SizeF sizeToDisplay = someUIView.StringSize(someString, someFont, Bounds.Width, UILineBreakMode.WordWrap);
// sizeToDisplay = { Width: 58, Height = 16 }
someString = string.Join(" ", Enumerable.Repeat(someString, 500));
sizeToDisplay = someUIView.StringSize(someString, someFont, Bounds.Width, UILineBreakMode.WordWrap);
// sizeToDisplay = { Width: 304, Height = 16 } 
```

我应该使用其他方法来查找在 a 中显示任意文本块所需的高度`UITextView`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T19:21:42.313

这[不是 MonoTouch 特有的](https://stackoverflow.com/a/13304904/48700)，但您必须搜索本机`NSString.sizeWithFont`方法才能找到答案，因此这应该有助于将来的其他 MonoTouch 开发人员。

出于某种原因，您将需要为 打一个[不同的重载`StringSize`](http://iosapi.xamarin.com/?link=M%3aMonoTouch.Foundation.NSString.StringSize(MonoTouch.UIKit.UIFont%2cSystem.Drawing.SizeF))，它需要一个完整的`SizeF`参数而不是一个宽度值。在这种情况下，您只需“破解”一个非常大的高度即可获得包装文本的大小。

```
SizeF sizeToDisplay = someUIView.StringSize(someString, someFont, new SizeF(Bounds.Width, float.MaxValue), UILineBreakMode.WordWrap);
// For the larger string: sizeToDisplay = { Width: 307, Height = 1600 } 
```

对[本机](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40006893-CH3-SW7)[方法](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40006893-CH3-SW7)的调用的`forWidth`重载。出于某种原因，当您使用此重载时，它会截断您的字符串以进行测量。`StringSize`[`sizeWithFont:forWidth:lineBreakMode:` `NSString`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40006893-CH3-SW7)

> 此方法返回限制为指定宽度的字符串的宽度和高度。尽管它会计算出现换行符的位置，但此方法实际上并未将文本换行到其他行。如果字符串的大小超过给定的宽度，此方法会使用指定的换行模式截断文本（仅用于布局目的），直到它符合最大宽度；然后它返回生成的截断字符串的大小。

### 关于 UITextView 填充的注意事项

附带说明一下，使用`UITextView`带有返回值的 a`StringSize`将导致需要滚动才能看到的文本（`UITextView`继承自`UIScrollView`），因为它包含一些强制内容填充。您还需要[调整内容偏移量](https://stackoverflow.com/q/746670/48700)以获得您所期望的。

```
someUITextView.ContentInset = new UIEdgeInsets(-8, -8, -8, -8); 
```

# r - 使用多个参数、因子的多个箱线图

> ID：14325119
> 
> 赞同：0
> 
> 时间：2013-01-14T19:21:44.127
> 
> 标签：r, ggplot2, dataframe, boxplot

我正在寻求帮助，以使用下面的数据将多个箱线图创建到一个图中（请参阅保管箱链接）。

基本上，我希望能够使用因子“tradlib”作为参数，在所有“sres”场景中绘制特定区域（例如“Mor”）的选定变量（例如“ev”）的分布。因此，最终结果将是六个箱线图，每个箱线图代表所选变量和区域的“tradlib”场景。

数据链接 [https://www.dropbox.com/s/dt1nxnkhq90nea4/GTAP_Sims.csv](https://www.dropbox.com/s/dt1nxnkhq90nea4/GTAP_Sims.csv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:01:13.037

如果下一次，如果你也发布你所做的事情以及你卡在哪里，那就太好了。假设你`data.frame`是`df`，这应该让你开始：

```
# boxplot for region = Mor
require(ggplot2)
df.f <- subset(df, region == "Mor")
# convert factor to character
df.f$ev <- as.character(df.f$ev)
# remove "," from ev using gsub and then convert to number
df.f$ev <- as.numeric(gsub(",", "", df.f$ev))
p <- ggplot(data = df.f, aes(factor(tradlib), ev))
p + geom_boxplot() 
```

![在此处输入图像描述](../Images/6a868af43087ed9066260eeb5c78cc61.png)

# ios - 故事板] 如何先在 uiscrollview 上工作，然后再添加

> ID：14325122
> 
> 赞同：1
> 
> 时间：2013-01-14T19:21:47.747
> 
> 标签：ios, xcode, storyboard

我需要创建一个长的 uiscrollview ，其中嵌入了一堆子视图。但是，当我将 uiscrollview 添加到控制器时，Storyboard 给我的工作区域太小。有没有办法先在 uiscrollview 上工作，然后使用情节提要将其添加到控制器中？

就像本教程页面上的 #2（它不是故事板版本）：[http ://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/](http://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/)

版本是 4.5.2。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:08:10.627

使用故事板，您无法将控件拖出场景，但您可以通过更改场景本身的模拟指标来实现您想要的效果。因此，选择视图控制器本身并单击“属性检查器”，并将模拟大小度量更改为自由格式，如下所示：

![在此处输入图像描述](../Images/9aeb78af098fe9851b8a9f162cac9108.png)

然后单击该场景的主视图并为此打开“尺寸检查器”，并将尺寸更改为足以工作的尺寸：

![在此处输入图像描述](../Images/72398d4ff69a054653c3bd6d3f8e4d85.png)

您的故事板看起来很奇怪，但您现在可以添加/更改您的滚动视图，使其足够大以显示您想要的所有内容。运行应用程序后（假设您已正确设置自动布局约束或非自动布局自动调整大小的蒙版），它将正常工作：

![在此处输入图像描述](../Images/2512f204b39f5ec462f7bbab3e6793bf.png)

奇怪的是，我发现当不使用自动布局时，我必须以编程方式更改`contentSize`滚动视图，以确保它对于所有控件都足够大：

```
- (void)adjustContentSizeForScrollView:(UIScrollView *)scrollView
{
    CGFloat height = 0.0;

    for (UIView *subview in scrollView.subviews)
    {
        CGFloat viewBottom = subview.frame.origin.y + subview.frame.size.height;
        if (viewBottom > height)
            height = viewBottom;
    }

    scrollView.contentSize = CGSizeMake(scrollView.contentSize.width, height);
} 
```

# iis - ASP 响应被切断

> ID：14325124
> 
> 赞同：0
> 
> 时间：2013-01-14T19:21:57.537
> 
> 标签：iis, iis-7, asp-classic

我已经将一个经典的 ASP 网站迁移到 IIS 7。其中一个页面用于在旧的 IIS6 网站上发布 7MB 长的 HTML。现在响应是 2.7 MB，看起来好像响应的开头已被切断。响应从 HTML 中间开始。

我已将站点属性中的最大带宽增加到 10 MB。

缓冲在页面的开头打开，如果这很重要的话。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:29:16.150

这是一个已知问题，与解决方法一起记录在这里：http: [//support.microsoft.com/kb/925764](http://support.microsoft.com/kb/925764)

# android - ListView 中的 OnGlobalLayoutListener

> ID：14325125
> 
> 赞同：11
> 
> 时间：2013-01-14T19:22:02.077
> 
> 标签：android, android-layout

我希望能够用动画扩展 ListView 中的行。因此我需要知道正在扩展的视图的高度。我在我的`getView()`方法中使用它`ArrayAdapter`：

```
mDetailsView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        mDetailsView.getViewTreeObserver().removeGlobalOnLayoutListener(this);

        onClickListener.setHeight(mDetailsView.getHeight());
        mDetailsView.setVisibility(View.GONE);
    }
}); 
```

这适用于开始时在屏幕上可见的行，但是当我向下滚动时，`onGlobalLayout`不会为最初不可见的行调用该方法。

如何获得这些行的高度？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T19:37:29.630

的实现可能`ListView`不会执行整个布局，因此`ViewTreeObserver`永远不会真正看到正在进行的布局。

除非有一些我不知道的特定手机壳，否则您可以使用 Views 中的`post`方法在视图中执行 runnable 。

```
mDetailsView.post(new Runnable() {
  @Override
  public void run() {
    onClickListener.setHeight(mDetailsView.getHeight());
    mDetailsView.setVisibility(View.GONE);
  }
}); 
```

**编辑：**

~~我不知道整个`getView()`方法是如何布置的。如果我不得不猜测，问题是`ListView`根本没有请求布局。相反，它为每个视图自己做工作以加快速度。您可以尝试的是：~~

 ~~```
public void getView(int position, View convertView, ViewGroup parent) {

  /* 
   * set your view up
   */

  mDetailsView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        mDetailsView.getViewTreeObserver().removeGlobalOnLayoutListener(this);

        onClickListener.setHeight(mDetailsView.getHeight());
        mDetailsView.setVisibility(View.GONE);
       }
   });

   notifyDataSetInvalidated(); // Notify the ListView() and any other listeners that your views are invalid.
   return view;
} 
```~~  ~~*新编辑*：使用`notifyDataSetInvalidated()`in 通常是个坏主意，尤其是在`getView()`.

要预先测量布局，您可以使用它的布局参数，或者如果它们不存在则给它新的参数。

```
 LayoutParams params = newView.getLayoutParams();
    if (params == null) {
        params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    }
    final int widthSpec = MeasureSpec.makeMeasureSpec(parent.getWidth(), MeasureSpec.UNSPECIFIED);
    final int heightSpec = MeasureSpec.makeMeasureSpec(parent.getHeight(), MeasureSpec.UNSPECIFIED);
    newView.measure(widthSpec, heightSpec); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-27T22:19:22.853

在 ListView 或 RecyclerView 而不是使用`OnGlobalLayoutListener`我总是使用`OnPreDrawListener`. 在开始时也会为不可见的行触发此回调。来自官方文档：

> 此时，树中的所有视图都已被测量并给出了一个框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T19:32:35.973

好的，所以看起来我遇到了类似的问题。

出于某种原因，如果 ListView 在中间丢失了 convertView ，那么当重新膨胀视图时，如果设置了它，它就不会调用它的全局布局侦听器。

这是我想出的解决方法：

```
public class MyViewThatIsInList extends View {
  public MyViewThatIsInList (Context context) {
      super(context);
      ensureInited();
  }

  public MyViewThatIsInList (Context context, AttributeSet attrs) {
      this(context, attrs, 0);
  }

  public MyViewThatIsInList (Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);

      TypedArray a = context.getTheme().obtainStyledAttributes(attrs, R.styleable.MyViewThatIsInList , 0, 0);
      //...
      ensureInited();
  }

  boolean isViewInited = false;
  private void init() {
      getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
          @Override
          public void onGlobalLayout() {
              //my custom helper method
              Utils.safeRemoveLayoutListener(getViewTreeObserver(), this);
              initLogic();
          }
      });
  }

  private void initLogic() {
    //...
    isViewInited = true;
  }

   private void ensureInited() {
      init();
      postDelayed(new Runnable() {
          @Override
          public void run() {
              if (!isViewInited) {
                  initLogic();
              }
          }
      }, 500);
  }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-27T09:41:39.473

在 ListView 或 RecyclerView 中，我们总是使用 OnPreDrawListener 而不是使用 OnGlobalLayoutListener。在开始时也会为不可见的行触发此回调。来自官方文档：

private void makeTextViewResizable(final TextView tv, final int maxLine, final String expandText, final boolean viewMore) {

```
 try {
        if (tv.getTag() == null) {
            tv.setTag(tv.getText());
        }
        //OnGlobalLayoutListener
        ViewTreeObserver vto = tv.getViewTreeObserver();
        vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {

            @Override
            public boolean onPreDraw() {

                    ViewTreeObserver obs = tv.getViewTreeObserver();
                   // obs.removeGlobalOnLayoutListener((ViewTreeObserver.OnGlobalLayoutListener) mActivity);
                    obs.removeOnPreDrawListener(this);
                    if (maxLine == 0) {
                        int lineEndIndex = tv.getLayout().getLineEnd(0);
                        String text = tv.getText().subSequence(0, lineEndIndex - expandText.length() + 1) + " " + expandText;
                        tv.setText(text);
                        tv.setMovementMethod(LinkMovementMethod.getInstance());
                        tv.setText(
                                addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                        viewMore), TextView.BufferType.SPANNABLE);
                    } else if (maxLine > 0 && tv.getLineCount() >= maxLine) {
                        int lineEndIndex = tv.getLayout().getLineEnd(maxLine - 1);
                        String text = tv.getText().subSequence(0, lineEndIndex - expandText.length() + 1) + " " + expandText;
                        tv.setText(text);
                        tv.setMovementMethod(LinkMovementMethod.getInstance());
                        tv.setText(
                                addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                        viewMore), TextView.BufferType.SPANNABLE);
                    } else {
                        int lineEndIndex = tv.getLayout().getLineEnd(tv.getLayout().getLineCount() - 1);
                        String text = tv.getText().subSequence(0, lineEndIndex) + " " + expandText;
                        tv.setText(text);
                        tv.setMovementMethod(LinkMovementMethod.getInstance());
                        tv.setText(
                                addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                        viewMore), TextView.BufferType.SPANNABLE);
                    }

                return true;
            }

        });
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```~~

# c++ - C++ GNU 指定的结构初始化在 Eclipse 中无法识别

> ID：14325129
> 
> 赞同：10
> 
> 时间：2013-01-14T19:22:22.060
> 
> 标签：c++, eclipse, gcc, eclipse-cdt

CDT 解析器报告结构初始化的语法错误：

```
typedef struct MyStruct
{
    int a;
    float b;
};

int main( void )
{
    // GNU C extension format
    MyStruct s = {a : 1, b : 2};
    // C99 standard format
//    MyStruct s = {.a = 1, .b = 2};

    return 0;
} 
```

虽然[GCC 将该`:`表单列为 obsolete](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html#Designated-Inits)，但它似乎并未被弃用或删除。在 C99 中，我当然会使用标准`.<name> =`形式，但对于 C++，这`:`是我所知道的用于指定初始化的唯一选项。

我尝试将我的工具链设置为 MinGW 和 Cross GCC，但似乎都不起作用。

如何让 Eclipse 识别这种语法？这对一行来说没什么大不了的，但它会传递到变量的所有其他实例，因为 Eclipse 没有意识到它已被声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:35:10.303

该`.`表单仅在 C99 中可用，在任何 C++ 风格中均不可用。在 C++ 中，您唯一符合标准的选项是有序初始化或构造函数。

您*可以*使用带有适当引用返回方法的链接来创建类似的接口（这里 a 和 b 是方法而不是变量）：

```
MyStruct s;
s.a(1).b(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-29T02:29:17.160

我也遇到了这个问题，我使用下面的方法来解决它。

```
MyStruct s = {
 1,
 2,
} 
```

这需要程序员保证初始化的顺序。

# php - 日期/时间在 PHP 中显示奇数值

> ID：14325130
> 
> 赞同：0
> 
> 时间：2013-01-14T19:22:23.003
> 
> 标签：php, date, formatting

今年我在 PHP 中遇到了奇怪的时间/日期问题。代码根本没有改变，我的日期被窃听了。

代码例如：

```
$date = strtotime($order['date']);

$dateNew = date('Y-m-d h:i A', $date);

print $dateNew; 
```

`1969-12-31 07:00 PM`出于某种原因返回，尽管如此：

```
print $order['date']; 
```

退货`2013-01-12 18:25:43`

我很困惑，因为我很确定我的代码是正确的。

我敢让你解决这个混蛋！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:30:40.180

“1969-12-31 07:00 PM”的意外日期意味着 date() 出现问题。

您的 strototime($order['date']) 可能返回 false （未能将其解析为 unix 时间戳）。

试试这个并确保它返回一个 int （不是假的）

```
 var_dump($order['date'], strtotime($order['date'])); 
```

查看日期的错误状态：http: [//php.net/date](http://php.net/date) 查看strtotime的返回值：http: [//php.net/strtotime](http://php.net/strtotime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:29:02.720

函数 strtotime() 用于将英语转换为日期格式。

> 该函数期望得到一个包含英文日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），相对于现在给出的时间戳，或如果没有提供现在的当前时间。

由于我不知道您的 $order 变量的真正含义是什么，我将建议 2 个解决方案：

也许您可以避免使用 strtotime 函数并将其直接替换为 date() ，如下所示：

```
$order = ['date' => '2013-01-12 18:25:43'];
$date = date($order['date']); 
```

它在这里运行良好：http: [//codepad.viper-7.com/cbNA87](http://codepad.viper-7.com/cbNA87)

或者，如果它不起作用考虑使用[mktime()](http://php.net/manual/en/function.mktime.php)，它会将日期转换为自纪元以来的秒数。

Unix 纪元是所有时间戳的参考点。PHP 以秒为单位计算从该日期开始的时间。应该为空，`$date`并且您的服务器位于美国东海岸，因此它返回时代:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:30:06.970

当没有合适的日期时，PHP 返回日期 1969-12-31。所以如果你这样做了

```
$date = 0;
$dateNew = date('Y-m-d', strtotime($date)); 
```

您的结果将是 1969-12-31，因为那是默认的 Unix 纪元时间。[http://php.net/manual/en/function.time.php](http://php.net/manual/en/function.time.php)

# c# - 自动化 EF 迁移“更新数据库脚本”

> ID：14325137
> 
> 赞同：24
> 
> 时间：2013-01-14T19:22:42.373
> 
> 标签：c#, entity-framework, powershell, entity-framework-5, entity-framework-migrations

我正在使用 EF 迁移来跟踪对我们的 EF 代码优先数据库模型的更改。现在我需要为每次迁移生成一个 SQL 脚本，以便我可以将该组脚本传递给 DBA。

我能够生成 SQL 脚本`Update-Database -Script ...`

但是，我想自动化这个。我希望 -Script 开关能够接受一个参数，该参数指定将 SQL 写入何处，但事实并非如此。此外，输出重定向不起作用，因为 SQL 脚本不是写入 STDOUT，而是写入临时文件。我看不到从脚本中获取该临时文件的方法。

任何想法如何自动化迁移 - > SQL 脚本生成？也许有一些我不知道的神奇的powershell技巧？

编辑：顺便说一句，使用 migrate.exe 或任何其他“迁移感知”方法不是一个选项，交付 SQL 脚本是必须的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-15T14:01:32.393

最后我找到了解决方案。我不知道的是，可以从 C# 代码生成 SQL 脚本，如下所示：

```
using System.Data.Entity.Migrations;
using System.Data.Entity.Migrations.Infrastructure;

var migrator = new DbMigrator(new Configuration());
var scriptor = new MigratorScriptingDecorator(migrator);
var sql = scriptor.ScriptUpdate("Name-Of-Source-Migration", "Name-Of-Target-Migration"); 
```

与`migrator.GetLocalMigrations()`您一起完全控制生成脚本的粒度。

# c# - 避免 ReadAllText 中的硬编码路径

> ID：14325144
> 
> 赞同：0
> 
> 时间：2013-01-14T19:23:15.783
> 
> 标签：c#

我的确切文件路径如下。此 .txt 文件不应部署到 bin/debug

```
string str = File.ReadAllText(@"C:\development\slnfolder\projfolder\myfile.txt"); 
```

如何编写代码，这样我就不必硬编码完整路径来获取文件

我试图避免上述代码行中的硬编码路径，如下所示：

```
string file = @"myfile.txt";
string str = Path.GetFullPath(file); 
```

但 str 最终如下并且无法找到该文件。

> C:\development\slnfolder\projfolder\bin\debug\myfile.txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:26:45.907

您可以包含`myfile.txt`在您的 Visual Studio 解决方案中并转到其属性并将**构建操作**设置为**始终复制**（或者如果您想避免复制自上次构建以来没有更改的文件，则**复制如果较新...）。**

这样，您将在目标目录（即`bin\debug`）中拥有整个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:26:08.450

那是它应该映射的地方，因为那是你的可执行文件运行的地方。我强烈建议您确保将文本文件移动到`bin/debug`文件夹中（有一个 VS 选项可以将其复制到属性中），而不是尝试向上读取两个级别。一旦您最终部署您的应用程序而不是从 Visual Studio 运行它，这将容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:26:57.667

如果您使用的是 Visual Studio，则将 txt 文件添加到您的项目中

*   右键单击**属性**
*   将构建操作设置为**无**
*   并将副本设置为输出目录以**复制如果较新**

这将确保 txt 文件始终与可执行文件位于同一文件夹中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:27:12.817

为避免对某些内容进行硬编码，您应该：

*   “软编码”它（即使其成为产品配置的一部分）。您可以为此使用[配置设置 API](https://stackoverflow.com/q/132544/335858)。
*   将其作为命令行上的参数（从`arg`传递给`Main`方法的其中一个中读取目录位置），或
*   约定它的位置，例如，在`data`目录中，该目录是当前运行目录的子目录（从 读取`@"..\data\myfile.txt"`）。

您始终可以定义这些方法的组合，例如，在未指定配置/命令行选项时使用“按约定”位置。

# java - 在 Java 中验证时区并抛出异常

> ID：14325146
> 
> 赞同：1
> 
> 时间：2013-01-14T19:23:26.440
> 
> 标签：java, timezone, jodatime

joda.time 中是否有任何函数可以验证字符串是否代表正确的时区，如果格式不正确则抛出异常？

我知道 TimeZone.getAvalibaleIDs() 但只是想知道是否有任何预定义的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:25:30.713

[`DateTimeZone.forID()`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html#forID%28java.lang.String%29)如果 ID 无法识别，将引发异常。

如果您尝试获取实际区域，这是合适的 - 如果您*只是*尝试验证 ID 是否有效，我会使用[`getAvailableIDs()`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html#getAvailableIDs%28%29)：

```
boolean valid = DateTimeZone.getAvailableIDs().contains(id); 
```

这在避免使用异常进行流量控制方面更好，IMO。但是，它们*并不*等效 - 固定偏移时区 ID 在 中有效`DateTimeZone.forID()`，但可能不包含在可用 ID 集中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-23T18:38:46.700

# *java.time*

下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**处理并捕获无效时[`ZoneId.of`](https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html#of-java.lang.String-)区`try/catch`ID 的异常。

**演示：**

```
import java.time.ZoneId;
import java.time.zone.ZoneRulesException;
import java.util.stream.Stream;

public class Main {
    public static void main(String[] args) {
        Stream.of(
                "America/New_York",
                "GMT",
                "UTC",
                "UCT",
                "GMT+01:00",
                "UTC+01:00",
                "ABC"
        ).forEach(s -> {
            try {
                System.out.println(ZoneId.of(s));
            } catch (ZoneRulesException e) {
                System.out.println(e.getMessage());
            }
        });
    }
} 
```

**输出：**

```
America/New_York
GMT
UTC
UCT
GMT+01:00
UTC+01:00
Unknown time-zone ID: ABC 
```

[`ONLINE DEMO`](https://ideone.com/rimHnV)

我不推荐`ZoneId.getAvailableZoneIds().contains(time-zone-id)`，因为在某些情况下它可能会失败，如下所示：

```
import java.time.ZoneId;
import java.util.Arrays;
import java.util.Set;

public class Main {
    public static void main(String[] args) {
        String[] arr = { "America/New_York", "GMT", "UTC", "UCT", "GMT+01:00", "UTC+01:00", "ABC" };

        // Alternatively
        Set<String> allZones = ZoneId.getAvailableZoneIds();
        Arrays.stream(arr).forEach(s -> System.out.println(allZones.contains(s) ? s : ("Unknown time-zone ID: " + s)));
    }
} 
```

**输出：**

```
America/New_York
GMT
UTC
UCT
Unknown time-zone ID: GMT+01:00
Unknown time-zone ID: UTC+01:00
Unknown time-zone ID: ABC 
```

[`ONLINE DEMO`](https://ideone.com/R0zHAq)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T14:59:20.003

您可以编写如下所示的函数，而不是使用 Joda：

```
private boolean isTimeZoneValid(String givenTimeZone) {
    Set timeZoneSet = new HashSet(Arrays.asList(TimeZone.getAvailableIDs()));
    return timeZoneSet.contains(givenTimeZone); 
} 
```**

# java - 如果我们只需要缓存一个特定的对象，为什么要缓存整个 POJO

> ID：14325150
> 
> 赞同：0
> 
> 时间：2013-01-14T19:23:34.883
> 
> 标签：java, caching, ehcache

在此链接中：[http](http://code.google.com/p/ehcache-spring-annotations/wiki/UsingCacheable) ://code.google.com/p/ehcache-spring-annotations/wiki/UsingCacheable 他们说：

```
When the above POJO is defined as a bean in a Spring IoC container, the bean instance can be made 'cacheable' by adding merely one line of XML configuration. 
```

在不使用缓存框架的情况下，我只需将 Weather 和 List 声明为静态的，这将负责缓存。

所以我的问题是，如果我只想缓存`Weather` and `List<Location>`，那我为什么要缓存整个 DAO？
同样在幕后，注释是否会`@Cacheable`变成静态变量？`Weather``List<Location>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:33:27.650

这是有问题的代码：

```
public interface WeatherDao {

    public Weather getWeather(String zipCode);

    public List<Location> findLocations(String locationSearch);
}

public class DefaultWeatherDao implements WeatherDao {

    @Cacheable(cacheName="weatherCache")
    public Weather getWeather(String zipCode) {
        //Some Code
    }

    @Cacheable(cacheName="locationSearchCache")
    public List<Location> findLocations(String locationSearch) {
        //Some Code
    }
} 
```

我不太明白你关于`static`变量的观点。本质上，有一张from to和类似 from to的*地图*。此映射可以来自数据库、文件、外部 API 等。`zipCode``Weather``locationSearch``List<Location>`

你想创建一个所有可能的参数作为键和对应值的映射吗？当然可以，但它有几个缺点：

*   你给你的堆施加了很大的压力。在许多情况下，数据量可能永远无法放入内存，甚至无法放入磁盘（想想：通过存储每个可能的搜索查询和命中列表来缓存 Google 搜索引擎）

*   很可能您永远不会使用大多数密钥。为什么要将它们存储在内存中？

*   驱逐呢？我敢打赌，随着时间的推移，这些方法往往会为相同的邮政编码返回不同的天气......

由于我不完全理解您的论点，让我简要解释一下调用时幕后发生的情况`getWeather()`：

*   透明代理拦截`getWeather()`呼叫并查找`weatherCache`

*   在该缓存中，它使用`zipCode`参数作为缓存键

*   如果存在这样的条目（类型`Weather`），则立即返回

*   如果不是上述情况，则将控制权委托给真实`getWeather()`方法。它可以调用一些 API、运行数据库查询或进行一些冗长的计算

*   的结果`getWeather()`被放置在以`weatherCache`备将来参考。

这里不`static`涉及。

* * *

BTW [Spring 3.1 引入了缓存抽象层](http://static.springsource.org/spring/docs/3.1.0.RELEASE/spring-framework-reference/html/cache.html)，这可能会使这个 Google Code 项目过时。它看起来相同，并允许与不同的缓存实现无缝集成。

# jquery - JQuery 移动对话框未打开

> ID：14325154
> 
> 赞同：2
> 
> 时间：2013-01-14T19:23:50.530
> 
> 标签：jquery, jquery-mobile, mobile

我正在关注 Sams 在 24 小时内自学 jquery mobile。但是以下代码不起作用。

我试图调试 javascript 但没有 javascript。如果有一种方法可以调试 jquery mobile 那就太好了。伊苏鲁的简历

```
 <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="page">
        <div data-role="header">
            <h1>Isuru's R&#233;sum&#233;</h1>
        </div>

        <div data-role="content">
            <p>I'm a Mobile Developer with experience in web and android mobile app development. 
                My skills include HTML, CSS, Python, WAMP Development and Java. 
                I also have experience with SEO and Internet Advertising.</p>
            <a href="#contact" data-role="button" data-rel="dialog">Contact me!</a>
        </div>

        <div data-role="page" id="contact" data-theme="c">
            <div data-role="header"><h1>Clicked!</h1></div>
            <div data-role="content">
                <p>Clicked content!</p>
                <a href="#contact" data-rel="back" data-role="button">Go back</a>
            </div>
        </div>  

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:37:09.720

你的错误很少。

这是一个工作示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-role="header">
            <h1>Isuru's R&#233;sum&#233;</h1>
        </div>

        <div data-role="content">
            <p>I'm a Mobile Developer with experience in web and android mobile app development. 
                My skills include HTML, CSS, Python, WAMP Development and Java. 
                I also have experience with SEO and Internet Advertising.</p>
            <a href="#contact" data-role="button" data-rel="dialog">Contact me!</a>
        </div>
    </div>   

  <div data-role="dialog" id="contact" data-theme="c">
    <div data-role="header"><h1>Clicked!</h1></div>
    <div data-role="content">
      <p>Clicked content!</p>
      <a href="#contact" data-rel="back" data-role="button">Go back</a>
    </div>
  </div>   

</body>
</html> 
```

这是 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/w3ptm/](http://jsfiddle.net/Gajotres/w3ptm/)

你有这个错误：

1.  在对话框**中 data-role="page"**必须是**data-role="dialog"**

    ```
    <div data-role="dialog" id="contact" data-theme="c">
        <div data-role="header"><h1>Clicked!</h1></div>
        <div data-role="content">
            <p>Clicked content!</p>
            <a href="#contact" data-rel="back" data-role="button">Go back</a>
        </div>
    </div> 
    ```

2.  它还必须与主页处于同一级别。

# android - Android - 单独视图中的引用对象

> ID：14325156
> 
> 赞同：0
> 
> 时间：2013-01-14T19:23:52.887
> 
> 标签：android, button, textview

我正在做一个安卓应用程序。我想在一个视图中使用一个按钮来在另一个视图中设置文本视图的文本。如何引用另一个视图中的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:51:46.687

如果包含 button 和 textView 的视图与您在 onCreate() 方法中使用 setContentView(R.layout.layout) 膨胀的布局相同，那么您可以简单地使用：

```
 Button button = (Button)findViewById(R.id.button); 
```

否则，如果 textView/Button 视图不在 onCreate() 方法中膨胀的布局中，则需要先膨胀另一个视图，然后引用 textView/Button，如下所示：

```
 LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
   View view = (View)inflater.inflate(R.layout.layout2, null);
   Button button = (Button)view.findViewById(R.id.button1);
   //add code for button
  // or   TextView tv = (TextView)view.findViewById(R.id.textView); 
```

# java - 有没有比 Apacher River (Jini) 更好的远程过程调用技术？

> ID：14325157
> 
> 赞同：1
> 
> 时间：2013-01-14T19:24:00.497
> 
> 标签：java, websocket, distributed-computing, jini

我计划在网络上做一个简单的远程过程调用（RPM），我目前正在使用 WebSockets。我想知道 Jini 是否比 WebSockets 更好，或者是否有更新的 API 或 Java 框架来执行 RPC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:39:08.360

WebSockets 和 Jini 是*主要*的注意事项，它们各有优缺点。我会说 WebSockets 非常适合大量的示例和文档。Jini 与 WebSockets 有很大不同——因此，如果无意中听到学习如何使用它可能不值得；这取决于你来评估，我想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:48:36.840

我不会直接使用 WebSockets，因为较旧的浏览器和/或公司防火墙可能会出现问题。 [SocksJS](https://github.com/sockjs/sockjs-client) 是一个受人尊敬的包装器，如果需要，它会优雅地降级为另一种传输机制，同时仍然允许您使用 WebSockets 类型的 API。

客户端通常是用 JavaScript 编写的，但他们有许多服务器，其中两个是用 Java 编写的：[Vert.x](https://github.com/vert-x/vert.x)和[Netty](https://github.com/cgbystrom/sockjs-netty)。看起来 Vert.x 的实现在这个时间点上更成熟了一些。

# jquery - 将以下三元运算符转换为常规 if 语句？

> ID：14325159
> 
> 赞同：1
> 
> 时间：2013-01-14T19:24:05.787
> 
> 标签：jquery

我是网络编程的新手，对三元运算符的处理不多。我找到了一些 jquery 滑块的示例代码，但我需要对其进行编辑，以便当用户将鼠标移到横幅上时它会停止。我希望有人可以帮助我将下面的代码变成一组简单的 if 和 else if 语句，我更习惯于处理这些语句。提前致谢。

```
//Get next image, when it reaches the end, rotate it back to the first image 

var next = ((current.next().length) ? ((current.next().hasClass('show')) ? $('div.rotator ul li:first') :current.next()) : $('div.rotator ul li:first')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:27:31.053

不使用三元运算符的等价物是：

```
var next;
if (current.next().length) {
   if (current.next().hasClass('show')) {
      next = $('div.rotator ul li:first')
   }
   else {
      next = current.next();
   }
}
else {
   next = $('div.rotator ul li:first'));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:26:15.923

您应该知道三元运算符是这种格式：

```
condition ? if true : else 
```

这样写并尝试翻译它：

```
var next = ((current.next().length)
            ?
                ((current.next().hasClass('show'))
                ?
                    $('div.rotator ul li:first')
                :
                    current.next())
            :
                $('div.rotator ul li:first')); 
```

现在您可以将其可视化为 if/else 块，只需更改语法即可。

```
var next;
if (current.next().length) {
    if (current.next().hasClass('show')) {
        next = $('div.rotator ul li:first');
    } else {
        next = current.next());
    }
} else {
    next = $('div.rotator ul li:first');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:28:53.903

这是`if`/中的等价物`else`：

```
var next;
if (current.next.length) {
    if (current.next().hasClass('show')) {
         next = $('div.rotator ul li:first');
     } else {
        next = current.next();
    }
} else {
    next = $('div.rotator ul li:first');
} 
```

# javascript - jQuery单选按钮功能无法正常工作

> ID：14325160
> 
> 赞同：0
> 
> 时间：2013-01-14T19:24:07.673
> 
> 标签：javascript, jquery, jsp, radio-button

我有一个带有两个单选按钮和一个提交按钮的表单，该按钮根据用户的选择指向一个特定的表单。我想使用 jQuery 在两个按钮之间进行切换，但我有点迷失了。

这是来自项目中另一个文件的我的javascript：

```
function goTo()
{

var yesButton = $('#yesRad');
var noButton = $('#noRad');

if (yesButton[0].checked) 
{
submitForm('yesForm') && noButton.Checked==false;

}
else  (noButton[1].checked)
{
submitForm('noForm') && yesButton.Checked==false;
} 
```

在jsp里面我有以下代码：

```
<form:form action="interested" commandName="user" name="yesForm" id="yesForm">
    <input type="hidden"  name="state" value="<c:out value="${requestScope.state}"/>" />
    <input type="hidden"  id="address" name="address" value="${user.address}" />
    <input type="hidden"  name="mode" value="1" />
    <input type="radio"  name ="radio"id="yesRad" value="yesForm" checked="checked" />Yes<br>
</form:form>

<form:form action="notinterested" commandName="user" name="noForm" id="noForm">

    <input type="hidden"  name="state" value="<c:out value="${requestScope.state}"/>" />
    <input type="hidden"  id="address" name="address" value="${user.address}" />
    <input type="hidden"  name="mode" value="1" />
    <input type="radio" name="radio" id="noRad"  value="noForm" />No<br>
</form:form> 
```

提交

```
<script>
    $("#yesRad").change(function(){
        var $input = $("#yesRad");
        var $inputb = $("#noRad");

        if($inputb.is(':checked'))
            $("#yesRad").prop("checked", false);
        else  if($input.is(':checked'))
            $("#yesRad").prop("checked",true) && $("#noRad").prop("checked",false);

});
</script> 
```

我已经从我的 jQuery 中获得了一些功能，但它绝对不是正确的。我希望我的问题清楚而彻底。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:53:28.007

首先，不要使用 prop，使用 attr。道具较慢。您已经定义了变量，所以我们不要再查找它们了。在您的 if/else 语句中，只需使用变量。我不完全确定你想用 && 做什么。我怀疑您正在尝试设置两个输入的值。如果是这样，它们应该是单独的语句。如果 inputb 被选中，则没有理由将其设置为选中，因此我们可以删除该部分。

您可能希望此更改在两个输入上触发。

```
$("#yesRad, #noRad").change(function(){
    var $input = $("#yesRad");
    var $inputb = $("#noRad");
    if($inputb.is(':checked')){
        $input.attr("checked", false);
    } else if($input.is(':checked')){
        $inputb.attr("checked",false);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:12:44.830

已解决：使用 javascript 并将单选按钮从单独的表单元素中取出。首先我们来看一下涉及到的JSP表单元素：

```
<form:form action="interested" commandName="user" name="yesForm" id="yesForm">
    <input type="hidden"  name="state" value="<c:out value="${requestScope.state}"/>" />
    <input type="hidden"  id="address" name="address" value="${user.address}" />

</form:form>

<form:form action="notinterested" commandName="user" name="noForm" id="noForm">
    <input type="hidden"  name="state" value="<c:out value="${requestScope.state}"/>" />
    <input type="hidden"  id="address" name="address" value="${user.address}" />

</form:form>

<input name="radio" type="radio" id="Yes" value="yes" />Yes<br>
<input name="radio" type="radio" id="No" value="no"/>No<br> 
```

我在这里所做的只是将单选按钮从单独的表单中取出并将它们组合在一起......非常明显；现在让我们看一下javascript文件。

```
 function goHere()
    {
var yesButton = $('#Yes');
var noButton = $('#No');
var str ="Please select an option first then press the 'Submit' button";
if (yesButton[0].checked) 
{
    submitForm('yesForm');
}
else if (noButton[0].checked)
{
    submitForm('noForm');
}
else 
{
    document.write(str.fontcolor.font("red"));
}
    } 
```

如您所见，函数“goHere();” 将根据用户在单选按钮上的选择告诉以下代码中的提交按钮我们想要去哪里。这是表单上提交按钮中来自我们的 javascript 函数的调用...

```
 <div class="button-panel" id="Submit"><span class="buttons buttons-left"></span>
<button type="button" class="buttons buttons-middle"  name="submitBtn"  onClick="goHere();">Submit</button>
<span class="buttons buttons-right"></span> 
```

而已！！简单的说; 有时，虽然学习新东西是无价的，但如果它没有坏——等等。希望这对以后的人有所帮助！

# tomcat - 在tomcat 7中设置默认应用程序

> ID：14325171
> 
> 赞同：14
> 
> 时间：2013-01-14T19:24:37.500
> 
> 标签：tomcat, web-applications, tomcat7, war

我已经完成了描述如何将给定的 WAR（比如 abc.war）配置为 tomcat 中的默认 Web 应用程序的线程。

任何一个

> 将 abc.war 重命名为 ROOT.war

或者

> 在 ${tomcat.home}/conf/Catalina/localhost 中创建一个上下文 ROOT.xml，其中 path="" 和 docBase 设置为战争的相对/绝对路径（将 abc.war 保留在 webapps 之外以避免双重部署）。

这两种解决方案都会导致 webapps (appBase) 目录中的 ROOT.war。但是我想在 webapps 中保留 WAR 名称（abc.war），并且没有单独的 ROOT.war 来实现这一点。

在我的案例中有效的一种解决方案是在 server.xml 的 <Host> 标记下添加上下文。但是根据[Tomcat 7 Doc](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)，不建议直接在 server.xml 中添加上下文。

有人可以指出我的替代方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T07:36:55.173

***详细方法***

**第一种方法：**

> 首先关闭你的 tomcat [从 bin 目录 ( `sh shutdown.sh`)] 然后你必须删除你的 tomcat webapps 文件夹 ( `rm -fr *`) 的所有内容，然后重命名你的 WAR 文件以`ROOT.war`最终启动你的 tomcat [从 bin 目录 ( `sh startup.sh`)]

**第二种方法：**

> 将您的战争文件保留在`CATALINA_BASE/webapps`原始名称下 - 在 server.xml 文件的 Host 元素中关闭 autoDeploy 和 deployOnStartup。在 server.xml 中明确定义所有应用程序上下文，同时指定路径和 docBase。您必须这样做，因为您已禁用所有 Tomcat 自动部署机制，并且 Tomcat 将不再部署您的应用程序，除非它在 ​​server.xml 中找到它们的 Context。

**笔记：**

> 最后一种方法还意味着，为了对任何应用程序进行任何更改，您必须停止并重新启动 Tomcat。

**第三种方法：**

> 将您的战争文件放在外面`CATALINA_BASE/webapps`（它必须在外面以防止双重部署）。-放置一个名为`ROOT.xml`.
> `CATALINA_BASE/conf//`此上下文文件中的单个元素必须具有指向您的战争文件位置的 docBase 属性。不应设置 path 元素 - 在本例中，它源自 .xml 文件的名称`ROOT.xml`。有关详细信息，请参阅上面的上下文容器。

# titanium - Titanium Studio 有“即时窗口”吗？

> ID：14325175
> 
> 赞同：0
> 
> 时间：2013-01-14T19:25:09.193
> 
> 标签：titanium

我是 Titanium Studio 的新手，想知道它是否具有与 Visual Studio 的“即时窗口”等效的功能，以便我可以在运行时执行随机语句等？谢谢！

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:57:27.443

不，我认为有一个名为 TiShadow 的工具可能会对您有所帮助

# r - 从字符串的 data.frame 猜测正确的列存储模式

> ID：14325176
> 
> 赞同：7
> 
> 时间：2013-01-14T19:25:09.217
> 
> 标签：r

给定一个`data.frame`仅包含字符串（无因子）的包含列，其中一些应该保留字符串，其中一些是整数，其中一些是双精度数，我如何猜测将字符串转换为的最合适的存储模式？

```
fixDf <- data.frame(isChar=c("A", "B", "C"), 
  isDouble=c("0.01", "0.02", "0.03"), 
  isInteger=c("1", "2", "3"), stringsAsFactors=FALSE) 
```

我想知道是否有一种简单的方法可以确定需要执行以下操作，然后执行此操作：

```
mode(fixDf[, "isDouble"]) <- "double"
mode(fixDf[, "isInteger"]) <- "integer" 
```

理想情况下，当遇到错误时，处理该错误的函数会将数据保留为字符串形式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T19:32:39.023

您可以`colwise`从`plyr`包和`type.convert`功能中使用。

```
library(plyr)
foo = colwise(type.convert)(fixDf)

str(foo)

'data.frame':   3 obs. of  3 variables:
 $ isChar   : Factor w/ 3 levels "A","B","C": 1 2 3
 $ isDouble : num  0.01 0.02 0.03
 $ isInteger: int  1 2 3 
```

或使用基础 R：

```
as.data.frame(lapply(fixDf, type.convert)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-01T06:09:28.970

[`type_convert`](https://readr.tidyverse.org/reference/type_convert.html)from **readr**完全符合您的要求，对整个数据帧进行操作。它可以很好地处理逻辑、数字（整数和双精度）、字符串和日期/时间，而不会强制分解。

```
type_convert(fixDf) 
```

要单独解析列，请使用[`parse_guess`](https://readr.tidyverse.org/reference/parse_guess.html).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T19:35:32.700

单程：

```
foo <- read.table(text=capture.output(fixDf))
str(foo)
# 'data.frame':   3 obs. of  3 variables:
#  $ isChar   : Factor w/ 3 levels "A","B","C": 1 2 3
#  $ isDouble : num  0.01 0.02 0.03
#  $ isInteger: int  1 2 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T13:48:19.933

使用`dplyr`和`magrittr`管道范式，

```
library(dplyr)

fixDf <- fixDf %>% 
  mutate_each(
    funs(
      type.convert(as.character(.), as.is = TRUE, numerals = "warn.loss")
    )
  ) 
```

在您的情况下，`as.character`不需要强制函数，但最好包括以防万一您没有意识到您的一个或多个列不是字符变量 -`type.convert`需要字符变量作为输入。

`as.is = TRUE`防止从字符到因子的强制转换，并`numerals = warn.loss`在将变量转换为时发出警告`double`会导致原始值失去准确性（即丢失在分析上下文中重要的小数位）。

# mysql - CDbCommand - 三表连接和 IN 子句语法

> ID：14325178
> 
> 赞同：0
> 
> 时间：2013-01-14T19:25:30.510
> 
> 标签：mysql, sql, yii

在我的 Yii 应用程序中，我有以下数据库结构：

```
Table user (id, firstName, lastName)
Table category (id, categoryName)
Table item (id, categoryId, name)
Table usergroup(id, userId, groupName) 
```

我正在尝试运行以下查询：

```
$sql = 'SELECT a.id, a.firstName, a.lastName, b.id, b.categoryName, c.id, c.name
        FROM user AS a
        INNER JOIN (category AS b ON a.id = b.userId
        WHERE b.userId IN (SELECT f.id FROM usergroup f WHERE f.userId=:currentUserId))
        INNER JOIN item AS c ON b.id = c.categoryId
        WHERE c.name LIKE :listedName';

$command=$connection->createCommand($sql); 

$currentUserId = Yii::app()->user->id;
//binding :currentUserId  
$command->bindParam(":currentUserId", $currentUserId,PDO::PARAM_STR);

$listedItemName = $data->name;
//binding :listedItemName 
$command->bindParam(":listedName", $listedName,PDO::PARAM_STR);

$dataReader=$command->query(); 
```

但是，我得到以下例外：

CDb异常

> CDbCommand 执行 SQL 语句失败：SQLSTATE[42000]: Syntax error or access violation: 1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 'ON a.id = b.userId WHERE b.userId IN (SELECT f.id FROM usergroup' 附近使用正确的语法。

执行的 SQL 语句是：

```
SELECT a.id, a.firstName, a.lastName, b.id, b.categoryName, c.id, c.name FROM user AS a INNER JOIN (category AS b ON a.id = b.userId WHERE b.userId IN (SELECT f.id FROM usergroup f WHERE f.userId=:currentUserId)) INNER JOIN item AS c ON b.id = c.categoryId WHERE c.name LIKE :listedName. Bound with :currentUserId='2', :listedName='Oliver Twist' 
```

任何形式的帮助或建议将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:56:27.533

对于面临相同问题的任何其他人的更新/参考。后来我发现SQL WHERE CLAUSE只能用在语句末尾的问题，我把第一个WHERE子句改成了AND条件。这是工作查询：

```
$sql = 'SELECT a.id, a.firstName, a.lastName, b.id, b.categoryName, c.id, c.name
        FROM user AS a
        INNER JOIN (category AS b ON a.id = b.userId
        AND b.userId IN (SELECT f.id FROM usergroup f WHERE f.userId=:currentUserId))
        INNER JOIN item AS c ON b.id = c.categoryId
        WHERE c.name LIKE :listedName'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:38:01.327

您似乎在那里有一些括号问题以及可能是不必要的子选择。我猜你正在寻找的是：

```
SELECT a.id, a.firstName, a.lastName, b.id, b.categoryName, c.id, c.name
FROM user AS a
INNER JOIN category AS b ON a.id = b.userId
INNER JOIN usergroup AS f ON f.userID = a.id
INNER JOIN item AS c ON b.id = c.categoryId
WHERE c.name LIKE :listedName'
AND  f.userID=:currentUserId; 
```

但是，我不清楚项目表和类别表之间的连接。您似乎在项目表中没有外国类别，只是加入了项目 ID 和类别 ID。

我也不清楚你在用户表和类别表之间的连接，你说用户 id = 类别 id。我看不出这些有什么关系。

# android - Android 布局或按钮

> ID：14325180
> 
> 赞同：0
> 
> 时间：2013-01-14T19:25:37.510
> 
> 标签：android, xml, layout, android-tabhost

我遇到了一个似乎与布局相关的 Android APP 问题。附上图片，您会看到“警报”按钮突出，看起来与其他按钮不同。我已将图像替换为已知良好的图像，但问题仍然存在。

![截屏](../Images/97d61b1c708e72dd388debf6aeec30fc.png)

有人建议这是因为它是 tabhost 布局，但所有建议的更改都没有奏效。到目前为止，我已经尝试将属性从 android:height 和 width 更改为“wrap_content”、“fill_parent”和“match_parent”。匹配导致另一个奇怪的空白被纠正，但这个按钮是我最后一个明显的挑战。

这是布局代码，你能告诉我问题是什么吗？

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<Button
    android:id="@+id/btnSearch"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/job_tab_bar_search"
    android:focusable="false"
    android:freezesText="false"
    android:imeOptions="actionNext"
    android:longClickable="false"
    android:paddingLeft="17dp"
    android:text="Search"
    android:textColor="@color/color_text_default"
    android:textSize="12dp"
    android:visibility="visible" />

<Button
    android:id="@+id/btnHistory"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/job_tab_bar_history"
    android:paddingLeft="25dp"
    android:text="History"
    android:textColor="@color/color_text_default"
    android:textSize="12dp" />

<Button
    android:id="@+id/btnFavorites"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/job_tab_bar_favorites"
    android:paddingLeft="30dp"
    android:text="Favorites"
    android:textColor="@color/color_text_default"
    android:textSize="12dp" />

<Button
    android:id="@+id/btnAlerts"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/job_tab_bar_alerts"
    android:paddingLeft="12dp"
    android:text="Alerts"
    android:textColor="@color/color_text_default"
    android:textSize="12dp" />

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.32" >
    </FrameLayout>
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TabWidget>
</LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:27:30.417

你会认为有人会回答，最后它是愚蠢的简单。

答案是：

使用 tabactivity 的 Tabhost 如果重新调整大小，将通过菜单项显示背景。向模式添加颜色编码（html 符号）颜色，然后使用 android:border-background 构造调用它。

# mysql - Mysql计算来自不同行的团队排名

> ID：14325181
> 
> 赞同：4
> 
> 时间：2013-01-14T19:25:47.940
> 
> 标签：mysql, sql

我正在尝试制作一种 peddy 纸。为此，我有以下表格：

**团队**

```
CREATE TABLE `teams` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `creator_id` int(11) NOT NULL,
  `friend_id` int(11) DEFAULT NULL,
  `team_name` varchar(128) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

**团队日志**

```
CREATE TABLE IF NOT EXISTS `progress_tracker` (
  `id` int(8) NOT NULL AUTO_INCREMENT,
  `user_id` int(8) NOT NULL,
  `team_id` int(11) NOT NULL,
  `date` date NOT NULL,
  `clues_found` int(11) NOT NULL,
  `clues_to_find` int(11) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

1.  每个团队由两个用户组成；
2.  每个用户一开始都会找到数量不定的线索；
3.  线索_发现可以增加或减少。不保证最高的数字是最新的；

我需要根据用户加入后发现的线索数量的平均值（对于团队中的两个用户）来获得团队的排名（百分比） - 在最大日期的行上找到的线索减去在记录中找到的线索最低日期）。

例如，如果我对每个表都有以下数据：

**团队表数据**

```
+--------+------------+------------+---------------+
|     id | creator_id | friend_id  |   team_name   |
+--------+------------+------------+---------------+
|      1 |         25 |         28 |         Test1 |
|      2 |         31 |          5 |         Test2 |
+--------+------------+------------+---------------+ 
```

**team_log 表数据**

```
+--------+---------+---------+------------+-------------+---------------+
|     id | user_id | team_id |    date    | clues_found | clues_to_find |
+--------+---------+---------+------------+-------------+---------------+
|      1 |      25 |       1 | 2013-01-6  |           3 |            24 |
|      2 |      25 |       1 | 2013-01-8  |           7 |            24 |
|      3 |      25 |       1 | 2013-01-10 |          10 |            24 |
|      4 |      28 |       1 | 2013-01-8  |           5 |            30 |
|      5 |      28 |       1 | 2013-01-14 |          20 |            30 |
|      6 |      31 |       2 | 2013-01-11 |           6 |            14 |
|      7 |       5 |       2 | 2013-01-9  |           2 |            20 |
|      8 |       5 |       2 | 2013-01-10 |          10 |            20 |
|      9 |       5 |       2 | 2013-01-12 |          14 |            20 |
+--------+---------+---------+------------+-------------+---------------+ 
```

**期望的结果**

```
+-------------+---------------------+
|     team_id |   team_percentage   |
+-------------+---------------------+
|           1 |         39,58333333 |
|           2 |         30          |
+-------------+---------------------+ 
```

作为参考，这是一个中间表示，可能有助于理解：

```
+-------------+---------+---------------------+
|     user_id | team_id | precentage_per_user |
+-------------+---------+---------------------+
|          25 |       1 | 29,16666667         |
|          28 |       1 | 50                  |
|          31 |       2 | 0                   |
|           5 |       2 | 60                  |
+-------------+---------+---------------------+ 
```

到目前为止，我有以下 sql：

```
SELECT STRAIGHT_JOIN
      tl2.team_id, (tl2.weight - tl1.weight)*100/tl2.clues_to_find
   from 
       ( select
               team_id,user_id,clues_found
            FROM 
               `team_log` 
            where 1

            group by
               team_id, user_id
            order by
               `date` ) base
       join (select team_id, user_id, clues_found, clues_to_find from `team_log` where user_id = base.user_id and team_id = base.team_id group by team_id, user_id order by `date` desc) tl2 
```

但这会返回一个错误，因为我不允许在第二个查询中使用 base.user_id。我也不太确定我是否朝着正确的方向前进。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:52:16.280

这是另一个将产生正确结果的查询：

```
SELECT calc.team_id, AVG((calc.end_clues - calc.start_clues)/calc.total_clues*100) as team_percentage
FROM
    (SELECT log1.user_id, log1.team_id, log1.clues_found as start_clues, log2.clues_found as end_clues, log2.clues_to_find as total_clues FROM team_log log1
    JOIN
    (SELECT MIN(id) as start_id, MAX(id) as end_id FROM team_log GROUP BY user_id) ids
    ON ids.start_id = log1.id
    JOIN team_log log2 ON ids.end_id = log2.id) calc
GROUP BY team_id
ORDER BY team_id; 
```

[而 SQL Fiddle 链接...](http://sqlfiddle.com/#!2/9f769/18/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:49:47.043

# [SQLFiddle](http://sqlfiddle.com/#!2/0ffc3/18)

```
SELECT `team_id`,
  (SUM(CASE WHEN b.`date` IS NULL THEN 0 ELSE `clues_found` * 100 / `clues_to_find` END) -
  SUM(CASE WHEN c.`date` IS NULL THEN 0 ELSE `clues_found` * 100 / `clues_to_find` END)) / 2
FROM `team_log` a
  LEFT JOIN (
    SELECT `team_id`, `user_id`, MAX(date) AS `date`
    FROM `team_log`
    GROUP BY `team_id`, `user_id`) b
  USING (`team_id`, `user_id`, `date`)
  LEFT JOIN (
    SELECT `team_id`, `user_id`, MIN(date) AS `date`
    FROM `team_log`
    GROUP BY `team_id`, `user_id`) c
  USING (`team_id`, `user_id`, `date`)
  GROUP BY `team_id` 
```

既然你说总是有两个团队成员，我就用`/2`. 对于规模可变的团队来说，这会稍微复杂一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:30:30.410

请看看这个并发表评论：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/bc5bd/27)

团队pc：

```
select z.team_id, avg(z.pct) as teampct
from (
select x.user_id, y.team_id, x.mndate,
y.mxdate, x.mnclues_found,
y.mxclues_found, 
(((y.mxclues_found - x.mnclues_found)*100)
/y.mxclues_tofind) pct
from 
(select user_id, team_id, min(date) mndate, 
min(clues_found) as mnclues_found
from team_log
group by user_id, team_id) x
left join 
(select user_id, team_id, max(date) mxdate, 
max(clues_found) as mxclues_found, 
 max(clues_to_find) as mxclues_tofind
from team_log
group by user_id, team_id) y
on x.user_id = y.user_id and
x.team_id = y.team_id) z
group by z.team_id
; 
```

结果1：

```
| USER_ID | TEAM_ID |   MNDATE |   MXDATE | MNCLUES_FOUND | MXCLUES_FOUND |     PCT |
-------------------------------------------------------------------------------------
|       5 |       2 | 13-01-09 | 13-01-12 |             2 |            14 |      60 |
|      25 |       1 | 13-01-06 | 13-01-10 |             3 |            10 | 29.1667 |
|      28 |       1 | 13-01-08 | 13-01-14 |             5 |            20 |      50 |
|      31 |       2 | 13-01-11 | 13-01-11 |             6 |             6 |       0 | 
```

最终结果：

```
| TEAM_ID |  TEAMPCT |
----------------------
|       1 | 39.58335 |
|       2 |       30 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:32:54.790

这有点难看，但应该可以工作：

```
select
   team_id,
   AVG(percentage_per_user) as team_percentage
from (select
  team_id,
  user_id,
  ((select clues_found from progress_tracker as x
      where x.user_id = m.user_id order by x.date desc limit 0, 1)
    - (select clues_found from progress_tracker as y
      where y.user_id = m.user_id order by y.date asc limit 0, 1))
  / MAX(clues_to_find)
  as percentage_per_user
from progress_tracker as m
group by team_id, user_id
) as userScore
group by team_id
order by team_percentage desc; 
```

请注意，自行运行的内部查询将产生您的中间“每个用户”结果。

# c# - 带有对象聚合的 WPF 数据绑定

> ID：14325183
> 
> 赞同：1
> 
> 时间：2013-01-14T19:25:53.957
> 
> 标签：c#, wpf, data-binding

假设我有一个类 Person 具有以下属性和方法：

*   `public string FirstName`
*   `public string LastName`
*   `public House CurrentHouse`
*   `public void BuildHouse(string streetAddress)`

House 是一个单独的类，具有一些简单的属性，例如街道地址。

当我第一次创建一个`Person`对象时，我将一个 WPF 窗口数据绑定到它。Person 以`FirstName`and开头`LastName`，但它们`CurrentHouse`为空。（这是一个愚蠢的例子，但为了争论起见，假设这个人必须先建造一所房子才能住在里面。）数据绑定到`FirstName`并按`LastName`预期工作。

现在假设我想把这个人搬进一所房子。逻辑看起来像：

```
public void BuildHouse(string streetAddress)
{
    this.CurrentHouse = new House()
    {
        StreetAddress = streetAddress;
    };
} 
```

我的 WPF 窗口的数据上下文是这个人对象。我有一个显示此人地址的标签（`MyPerson.CurrentHouse.StreetAddress`与`UpdateSourceTrigger`of绑定`PropertyChanged`）。当我第一次显示屏幕时，`CurrentHouse`对象为空且标签为空白（预期行为）。但是，当我调用时`BuildHouse("123 anywhere st")`，我希望数据绑定标签的值更改为“123 任何地方”。

这不是正在发生的事情，我开始怀疑这是因为当窗口最初打开时，数据绑定`Person`对象的 CurrentHouse 属性为空。我的怀疑正确吗？如果是这样，一旦 CurrentHouse 对象不再为空，我需要做什么才能在标签上启用数据绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:33:01.570

> 这不是正在发生的事情，我开始怀疑这是因为当窗口最初打开时，数据绑定的 Person 对象的 CurrentHouse 属性为空。我的怀疑正确吗？如果是这样，一旦 CurrentHouse 对象不再为空，我需要做什么才能在标签上启用数据绑定？

这是可能的，但您`Person`和`House`类更有可能需要实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx).

实现这个接口（正确地）是让 WPF 知道你的对象上的一个属性已经改变了（比如新`House`的设置，或者房子里的地址改变等）。

# oracle11g - Websphere 应用服务器 - Oracle 11g 数据库兼容性问题

> ID：14325184
> 
> 赞同：1
> 
> 时间：2013-01-14T19:25:57.437
> 
> 标签：oracle11g, datasource, websphere-7

我从另一个人那里获得了一个临时报告工具，该工具已成功部署到现场。他使用 Web Logic 服务器和 Oracle 数据库。

我尝试在我的本地环境（WAS 7 和 Oracle）中部署相同的应用程序。第一份报告运行完美。但是，当我运行第二个（或第三个或第四个）报告时，我得到一个非常奇怪的错误：第二个报告附加到第一个报告。

代码中没有任何内容可以解释这一点。这个问题可以通过每次运行报表时停止和启动服务器来临时解决（显然不是真正的解决方案）。我认为这与数据源和缓存信息有关。然后我退后一步，尝试将其部署到 Tomcat 服务器。它完美地工作，就像它在现场一样。所以我的问题是：**WAS 7 和 Oracle 11g 之间是否存在任何可能导致此类问题的已知问题？** 任何信息都会非常有帮助。

请询问您可能想知道的任何细节，我会尽力提供这些信息。

感谢您的时间。

编辑：对于其他研究此问题的人来说，问题是由于与专有的 Oracle 调用和 Websphere 不兼容。将应用程序编辑为仅使用 JDBC 调用后，一切正常。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:25:37.817

这最终导致与使用专有的 Oracle 调用和 Websphere 不兼容。通过将所有专有调用更改为正常的 JDBC 调用来修复它。

# git - 将新文件夹/文件推送到共享仓库时，Git 将创建模式设置为 100664

> ID：14325186
> 
> 赞同：5
> 
> 时间：2013-01-14T19:26:02.283
> 
> 标签：git

我和我的同事有一个共享的网站回购。我们都在 Windows 7 64 位推送到 Ubuntu 10.04。以下是我们的设置，以防万一。

本地->集线器->网站

我们推送到集线器，这是一个裸仓库，然后使用集线器 cds 中的更新后挂钩到网站仓库，并将更改从集线器拉到网站。这样做是因为该网站是活动的，并且始终签出并且无法推送到。

当我在本地并提交一个新文件夹/文件时，它使用 100644 的创建模式说明以下内容

```
$ git commit -a -m "testing permissions"
[master 865b809] testing permissions
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 test.php 
```

当我将这些更改推送到存储库时，它会将文件夹创建为 755，当我需要它们为 775 和 664 时将文件创建为 644。只要我只编辑文件，权限至少保持不变。唯一的问题在于创作。

在我们拥有的共享存储库中`core.sharedrepository = 0660`，我认为这意味着它将根据需要设置权限。我们的`umask`in our`.bashrc`也设置为 002。

这是我的本地配置

```
[core]
repositoryformatversion = 0
filemode = false
bare = false
logallrefupdates = true
symlinks = false
ignorecase = true
hideDotFiles = dotGitOnly 
```

似乎我们的本地人正在确定权限并忽略我们共享存储库上的设置。如何将创建模式设为 100664。

## 编辑

集线器配置

```
[core]
repositoryformatversion = 0
filemode = true
bare = true
sharedrepository = 0660
[receive]
denyNonFastforwards = true 
```

网站配置

```
[core]
repositoryformatversion = 0
filemode = true
bare = false
logallrefupdates = true
sharedrepository = 1
[receive]
denyNonFastforwards = true 
```

## 编辑2

正如下面的 Kalle Pokki 在她的评论中指出的那样。这个问题是，当使用 GIT 并推送它时，它是以非交互方式运行的，所以我的 umask 设置不起作用。我已经更新了我的 repo 的更新后，以将 umask 设置为`0002`每次有人推送时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:20:31.743

据我所知，git 不会将文件权限存储在您想要的级别。拥有 644 或 664 个文件完全取决于 umask。

core.sharedrepository 只处理 git 数据库的文件权限，不处理存储在存储库中的文件的权限。

由于您已经有更新后挂钩来检查 Web 服务器中的存储库，我建议在那里添加一个 chmod 脚本。就像是

```
find /path/to/website -type d | xargs chmod 775
find /path/to/website -type f | xargs chmod 664 
```

编辑：我很有信心您的 ssh/git 服务器的 umask 与交互式登录时的不同。也许您应该在更新后挂钩的开头明确设置 umask。请参阅以下内容，其中我在主分支中不存在的 tmp 分支中有附加文件“1”：

```
$ umask 0022
$ git checkout tmp
Switched to branch 'tmp'
$ ls -l 1
-rw-r--r-- 1 kp kp 5 2013-01-15 15:53 1
$ git checkout master
Switched to branch 'master'
$ umask 0002
$ git checkout tmp
Switched to branch 'tmp'
$ ls -l 1
-rw-rw-r-- 1 kp kp 5 2013-01-15 15:53 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T05:53:01.603

这是由您的 filemode=false 引起的

参考[http://www.gelato.unsw.edu.au/archives/git/0609/28190.html](http://www.gelato.unsw.edu.au/archives/git/0609/28190.html)

> **如果 filemode=0，则添加文件时忽略可执行位。**
> 
> 如果用户配置了 core.filemode=0，那么我们不应该在添加新文件时在索引中设置执行位，因为用户已经表明本地文件系统不可信。
> 
> 这意味着当在 core.filemode=0 的存储库中添加应该标记为可执行的文件时，用户必须在提交添加之前对文件执行“git update-index --chmod=+x”。
> 
> 签字人：Shawn O. Pearce 签字人：Junio C Hamano

# matlab - 如何在 Matlab 中调用 Mathematica 函数？

> ID：14325191
> 
> 赞同：7
> 
> 时间：2013-01-14T19:26:13.847
> 
> 标签：matlab, interop, wolfram-mathematica

如何在 Matlab 中调用 Mathematica 函数？至少对我来说，在 Mathematica 中特别容易进行某些符号方程操作/简化，而且我想直接使用 Mathematica，而不必自己负担在 Matlab 中制作它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:22:05.840

一些 FEX 选项：

1.  [SMATLINK - 让 Matlab 与 Mathematica 共舞](http://www.mathworks.com/matlabcentral/fileexchange/20573)
2.  [MATLAB 的 Mathematica Symbolic Toolbox--Version 2.0](http://www.mathworks.com/matlabcentral/fileexchange/6044-mathematica-symbolic-toolbox-for-matlab-version-2-0)也由 Dennis Jaherudin 建议

# android - Android 签名策略：文档矛盾？

> ID：14325198
> 
> 赞同：1
> 
> 时间：2013-01-14T19:26:47.850
> 
> 标签：android, google-maps, signing

我在 Google Play 上发布了一款应用。我正在编写一个新应用程序，并试图确定是否需要一个新证书，或者我是否可以使用我在第一个应用程序上使用的相同证书。

我需要在这两个应用程序上使用 Google Maps API。[Google Maps API 文档](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key "谷歌地图 API 文档")说：

> “使用相同证书的应用程序可以使用相同的 API 密钥。但是，推荐的做法是使用不同的证书对每个应用程序进行签名，并为每个应用程序获取不同的密钥。”

但是，[Android 工具文档](http://developer.android.com/tools/publishing/app-signing.html#strategies "Android API 文档")说明如下：

> “一般来说，向所有开发人员推荐的策略是在应用程序的预期生命周期内使用相同的证书对所有应用程序进行签名。”

那么，这里有矛盾吗？我应该使用相同的证书还是创建一个新证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:42:32.147

同一页还说：

> Maps API 密钥基于应用程序数字证书的一种简短形式，称为 SHA-1 指纹。

这就是为什么您需要为每个单独的密钥提供单独的证书（如果您决定使用单独的 API 密钥）。

PS 像这样的情况可能就是为什么你的第二句话说“**一般来说**，推荐的策略......”。

# javascript - 循环通过多个 PHP 生成的 DIV，在悬停时显示/隐藏

> ID：14325205
> 
> 赞同：1
> 
> 时间：2013-01-14T19:27:10.053
> 
> 标签：javascript, jquery, loops

我刚刚设置了以下 jQuery 代码，它工作正常，但是我觉得它可以用计数器细化成一个更短的循环。我对 jQuery 足够熟悉，知道这是一种可能性，但在语法等方面遇到了困难。谢谢，如果您需要更多细节，请告诉我。

```
 $(".moviethumb:eq(0)").on("mouseover",
  function () {
    $(".moviedetail:eq(0), .hoverarrow:eq(0)").show();
    $(".moviedetail:eq(1), .moviedetail:eq(2)").hide();
  }
  );

  $(".moviedetail_wrapper:eq(0)").on("mouseleave", 
  function () {
    $(".moviedetail:eq(0), .hoverarrow:eq(0)").hide();
  }
  );

  $(".movieout:eq(0)").on("mouseout", 
  function () {
    $(".moviedetail:eq(0), .hoverarrow:eq(0)").hide();
  }
  );

  $(".moviethumb:eq(1)").on("mouseover",
  function () {
    $(".moviedetail:eq(1), .hoverarrow:eq(1)").show();
    $(".moviedetail:eq(0), .moviedetail:eq(2)").hide();
  }
  );

  $(".moviedetail_wrapper:eq(1)").on("mouseleave", 
  function () {
    $(".moviedetail:eq(1), .hoverarrow:eq(1)").hide();
  }
  );

  $(".movieout:eq(1)").on("mouseout", 
  function () {
    $(".moviedetail:eq(1), .hoverarrow:eq(1)").hide();
  }
  );

  $(".moviethumb:eq(2)").on("mouseover",
  function () {
    $(".moviedetail:eq(2), .hoverarrow:eq(2)").show();
    $(".moviedetail:eq(1), .moviedetail:eq(0)").hide();
  }
  );

  $(".moviedetail_wrapper:eq(2)").on("mouseleave", 
  function () {
    $(".moviedetail:eq(2), .hoverarrow:eq(2)").hide();
  }
  );

  $(".movieout:eq(2)").on("mouseout", 
  function () {
    $(".moviedetail:eq(2), .hoverarrow:eq(2)").hide();
  }
  ); 
```

HTML：

```
<ul class="movies-holder">

<li>

<a href="#">
<div class="movieout"></div>
<div class="moviethumb">
    <img src="theimage.jpg />
    </div>
</a>

<div class="moviedetail_wrapper">
<div class="hoverarrow"></div>
<div class="moviedetail">
<p>The movie details.</p>
</div>

</div>
</li>

<li>

<a href="#">
<div class="movieout"></div>
<div class="moviethumb">
    <img src="theimage.jpg />
    </div>
</a>

<div class="moviedetail_wrapper">
<div class="hoverarrow"></div>
<div class="moviedetail">
<p>The movie details.</p>
</div>

</div>
</li>

<li>

<a href="#">
<div class="movieout"></div>
<div class="moviethumb">
    <img src="theimage.jpg />
    </div>
</a>

<div class="moviedetail_wrapper">
<div class="hoverarrow"></div>
<div class="moviedetail">
<p>The movie details.</p>
</div>

</div>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:40:37.267

```
$(".moviethumb").on("mouseover",
   function () {
      var index = $(".moviethumb").index(this);
      $(".moviedetail, .moviedetail").hide();
      $(".moviedetail:eq(" + index + "), .hoverarrow:eq(" + index + ")").show();
   }
);

$(".movedetail_wrapper").on('mouseleave', function () {
   $(this).find('.moviedetail, .hoverarrow').hide();
}); 
```

`.movieout`可以以与第一个功能类似的方式处理。本质上，您可以获得要动态使用的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:36:34.260

我使用 CSS 解决了这个问题。

1) 给所有 div 一个唯一的 id="movie321"

2）为每个生成CSS规则。

```
ul.movies-holder li { display: block; }
ul.movies-holder.show320 li.movie320 { display: block; }
ul.movies-holder.show321 li.movie321 { display: block; } 
```

3）在鼠标悬停：

```
document.getElementById('movies-holder').className = 'movies-holder show321'; 
```

这比在 JavaScript 中循环**要快得多。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:38:50.483

尝试这样的事情：

```
$(".moviethumb").on("mouseover", function() {
    $(".moviedetail").hide();
    $(this).parents("li").find(".moviedetail").show();
});

$(".moviedetail_wrapper").on("mouseleave", function() {
    $(this).parents("li").find(".moviedetail, .hoverarrow").hide();
});

$(".movieout").on("mouseout", function() {
    $(this).parents("li").find(".moviedetail, .hoverarrow").hide();
}); 
```

使用`$(this).parents("li")`你正在寻找的祖先是

*   . 然后在该父级中找到该类。你不需要迭代。

# macos - 如果内容总计低于 4gb，则使用 BASH 复制文件夹

> ID：14325208
> 
> 赞同：0
> 
> 时间：2013-01-14T19:27:13.920
> 
> 标签：macos, bash, terminal

我有这个脚本复制目录

```
for dir in $(pwd)/*/
do
        dir=${dir%*/}
        dirsize=$(du -chk "${dir##*/}" | grep total)
        kbsize=${dirsize%total}
        if [[ "$kbsize" -lt 4194304 ]]
        then
                cp -rv * "$1"
        fi
done 
```

我试图让它只复制低于 4GB 的目录（因为 FAT32 限制）。问题是它会复制所有内容，而不仅仅是超过 4GB 的目录。

我确信这很愚蠢，因为我的 BASH 知识不是很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:35:11.080

问题出在你的`du`命令上。运行此命令会产生：

```
$ du -chk .
# ...
18M     total 
```

结果，您的`kbsize`变量包含`18M`. 并且`bash`不喜欢这样：

```
$  [[ 18M -lt 923898 ]]; echo $?
bash: [[: 18M: value too great for base (error token is "18M")
1 
```

将您的命令替换为`du -sk`：

```
$ kbsize=$(du -sk . | awk '{print $1}')
$ echo $kbsize
18196
$ [[ $kbsize -lt 4194304 ]]; echo $?
0 # Success!
$ [[ $kbsize -lt 10 ]]; echo $?
1 # Fails, but no errors 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:51:18.887

您的`*`cp 语句中的 正在扩展以包含`pwd`. 因此，如果任何目录小于 4gb，它将尝试复制每个目录。

我建议您使用该`-t`选项来`cp`指定应将文件复制到的目标目录，并从该命令中删除 *。

`-s`另外，正如其他人所提到的，请查看`du`.

# jquery - jQuery 模板，点击按钮 tmplItem() 读取数据

> ID：14325209
> 
> 赞同：0
> 
> 时间：2013-01-14T19:27:16.057
> 
> 标签：jquery, jquery-templates

我有一个 jQuery 模板（[https://github.com/jquery/jquery-tmpl](https://github.com/jquery/jquery-tmpl)）和一个包含两个列表的 Object()。

```
<!-- HTML -->
<table>
        <thead>
            <tr>
                <th>
                    Some value
                </th>
                <th>
                    A Button
                </th>
            </tr>
        </thead>
        <tbody id="results-body">
        </tbody>
    </table>
<!-- HTML -->

var templateHTML = "{{each list1FromTemplate}}<tr><td>{{= Value}}</td><td><input type='button' name='alert' value='Alert' class='alert'/></td></tr>{{/each}}";

 var results = new Object();
     results.list1 = list1Data; //Retrieved from an ajax call
     results.list2 = list2Data; //Retrieved from an ajax call

$.tmpl(templateHTML, { list1FromTemplate: results.list1, list2FromTemplate: results.list2 }).appendTo("#results-body");

//Here goes the question:

$(".alert").click(function () {

alert(
//Alert the value from {{= Value}} in the same row
);

}); 
```

一切正常，除了带有班级警报的按钮

单击具有类“警报”的按钮时，如何从**同一行中的**值“{{= Value}}”中检索数据？？？

**更新：**

有一种方法可以使用 tmplItem() 或其他方法检索值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:30:20.673

给 td 一个 class/id 或将 value 包装在一个带有 class/id 的 span 中，然后使用 jquery 访问它，例如`alert($(this).closest('tr').find('.value-wrapper').text())`（将评论提升为答案）。

另一种选择是在被点击的输入上设置一个属性（例如数据值），然后您可以使用它访问`alert($(this).attr('data-value'));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:35:34.307

为每个 td 提供 id（可能是循环计数器值作为 id）并像这样调用警报函数：

```
$(.alert).click(function(){
    $('#td_id').val();
}); 
```

# ios - UI界面动画消失了

> ID：14325213
> 
> 赞同：0
> 
> 时间：2013-01-14T19:27:35.207
> 
> 标签：ios, objective-c, xcode

我正在创建一个 iOS 项目并使用一些 UI，如警报弹出窗口。一开始，当激活警报时，它会以流畅的动画弹出。但是突然没有动画了……？即使当我激活网络视图时，它通常也会从顶部向下滚动，但现在它就在那里。有没有人经历过这个，如果是的话......如何解决？？？

提前致谢。

# c# - 使用 ToString("F1") 时浮点数舍入不正确

> ID：14325214
> 
> 赞同：11
> 
> 时间：2013-01-14T19:27:41.207
> 
> 标签：c#, string, floating-point, format

我有一个浮点值：12345.6489

当我使用以下格式格式化时：

(12345.6489f).ToString("F1")

然后我得到一个结果

12345.7

但这是不正确的，因为它应该是 12345.6。

有谁明白为什么会发生这种情况？另一个提示是，在我格式化返回正确结果之前强制转换为 double，如果我的浮点值小一点，例如 1234.6489，那么我也会得到正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:59:34.110

这似乎与我前段时间问的一个问题有关：[Round-twice error in .NET's Double.ToString method](https://stackoverflow.com/questions/11085052/)

请注意，如果您拨打`.ToString("G")`您的号码，它会正确四舍五入为`12345.65`。如果将四舍五入的数字四舍五入到小数点后一位，就会出现问题。

当我早些时候调查我自己的问题时，我还发现了一些无法解释为循环两次错误的示例，因此也请检查该线程。

*加法：*请注意，任何可以（精确）由 a 表示的数字，也可以由 a`float`表示（有很多零位）`double`。可以使用以下技巧（问题也提到了）：

```
float x = 12345.6489f;
string trick = ((double)x).ToString("F1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:19:45.123

谢谢这个问题！从事调查是非常有趣的课题。但我想说的是另一方的奖牌。你问了以下问题：

> (12345.6489f).ToString("F1")
> 
> 然后我得到一个结果
> 
> 12345.7
> 
> 但这是不正确的，因为它应该是 12345.6。

好吧，我想知道你是如何弄清楚这个字符串格式化例程***的正确******输出***是什么？这些格式化字符串不应该用于舍入目的。文档清楚地[说明](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)了这一点：

 *![http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#FFormatString](../Images/b16c9d074f1ff5eef273a081eeee52b9.png)

* * *

老实说，当我第一次从您的问题中查看数字时 - 第一个想法是关于 Hans Passant 在他的回答中提到的舍入算法。所以，我什至不会对选择这样的算法感到惊讶，它实际上非常直观:) 我什至不会惊讶他们会考虑将普通截断作为浮点数格式化的算法。它仍然非常准确和有效。

因此，尽管所有这些都非常有趣并且看起来像一个错误/悖论/奇迹，但这实际上只是我们对这个功能的错误期望，该功能旨在做（实际上做得很好）另一件事。*

# linux - bsd rc.d 的重生选项

> ID：14325223
> 
> 赞同：3
> 
> 时间：2013-01-14T19:28:24.093
> 
> 标签：linux, unix, freebsd, bsd

我运行一个小守护进程，并希望它在被杀死时重新生成。我在 linux 系统的 inittab 中使用“respawn”选项。（它是一个小型嵌入式平台。）。

现在我正在 BSD 上尝试相同的守护进程。我已将我的条目放在“rc.d”中。但我找不到 BSD 的重生选项。

我可以编写一个小程序来重生我的守护进程。但我想知道是否必须为 BSD 构建一些东西来重新启动被杀死的服务。

你知道我能用什么吗？

谢谢

PS我知道我可以在我的守护进程中做这件事。但目前我没有它的来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:32:22.617

/启动脚本约定不提供重生守护进程`rc.d`。[这就是为什么创建像upstart](http://upstart.ubuntu.com/)和[systemd](http://www.freedesktop.org/wiki/Software/systemd)`init.d`这样的替代品的主要原因之一。在您的嵌入式系统上，您最好的选择可能是一个小型包装器，它可以监视您的守护程序并在必要时重新启动它。

# ssh - 移动了一个 gitlab 实例，现在与 gitolite 交谈时遇到问题

> ID：14325224
> 
> 赞同：1
> 
> 时间：2013-01-14T19:28:25.090
> 
> 标签：ssh, gitolite, gitlab

我有一个 Gitlab 的工作实例，直到几周前，我们不得不将所有用户目录移动到另一个磁盘 b/c 的资源限制。我已经完成并修复了我能找到的所有路径，所以现在我的 gitlab 实例重新启动并运行。Git 似乎在工作，我通过了 gitlab 自我诊断测试。

但是，从以前工作过的远程客户端，系统提示我提供 git 用户的密码，这表明存在 ssh 问题。

查看我的 .gitolite 文件（conf/gitolite.conf 和 keydir），事情看起来井井有条。我的公钥在 keydir 中，并且在 gitolite.conf 中正确分配了权限。

编辑：gitolite 公钥位于 .ssh/authorized_keys 文件中，保护措施由 gitolite 设置创建。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:39:21.157

> 我的公钥在 keydir 中，并且在 gitolite.conf 中正确分配了权限。

这还不够。
为了让 ssh*不*要求您输入密码，您需要检查您的 ~gitlab/.ssh/authorized_keys 是否完整（[其中包含 gitolite 公钥](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work/13320256#13320256)，并且[具有正确的保护措施](https://stackoverflow.com/questions/13425811/git-ssh-authentication/13428529#13428529)）

查看[`gitolite setup`](http://sitaramc.github.com/gitolite/setup.html)命令（对于 gitolite V3）。

# sql - T-SQL：如何反转字符串中的值

> ID：14325227
> 
> 赞同：1
> 
> 时间：2013-01-14T19:28:37.570
> 
> 标签：sql, sql-server, tsql

使用 T-SQL，我试图找到最简单的方法来制作`"Test One"`become `"One, Test"`。

如果一列中只有 2 个单词并且它们之间有空格，则基本上切换“”和“,”。

例如：

```
Before             After
Test One           One, Test
Test Two One       Test Two One
Test, Three        Test, Three 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:40:00.593

这个怎么样：

```
select col Before,
  case 
    when col like '%,%' then col 
    when len(replace(col, ' ', '')) = len(col) -1 
      then reverse(substring(reverse(col), 1, charindex(' ', reverse(col))-1))+', '+substring(col, 1, charindex(' ', col)-1)
    else col
  end  After
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/a882a/11)。结果是：

```
|       BEFORE |        AFTER |
-------------------------------
|     Test One |    One, Test |
| Test Two One | Test Two One |
|  Test, Three |  Test, Three | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:43:02.723

**[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/7720)**

```
DECLARE @Tests TABLE (
    Before VARCHAR(50)
)

INSERT INTO @Tests Values ('Test One')
INSERT INTO @Tests Values ('Test Two One')
INSERT INTO @Tests Values ('Test, Three')

SELECT
    Before,
    CASE 
        WHEN 
            -- If there is no comma...
            CHARINDEX(',', Before) = 0
            -- And if there is only one space... 
            AND CHARINDEX(' ', RIGHT(Before, LEN(Before) - 
                CHARINDEX(' ', Before))) = 0
        THEN 
            -- Then perform the swap.
            RIGHT(Before, LEN(Before) - CHARINDEX(' ', Before)) + ', ' 
            + LEFT(Before, CHARINDEX(' ', Before))
        -- Otherwise, retain the "before" value.
        ELSE Before
    END AS After
FROM @Tests 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:37:00.283

这是我的看法：不是最好的，因为它使用了一些安静的字符串函数......

*   假设：

    1.  你只有两个字；）

    2.  有一个空格/或其他字符...

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/e9dcc/3)

代码：

```
SELECT CHARINDEX(' ',name) splitposition,
SUBSTRING(name, 1, CHARINDEX(' ',name)-1) firstword,
SUBSTRING(name, CHARINDEX(' ',name), len(name)) lastword,
(SUBSTRING(name, CHARINDEX(' ',name), len(name)) +
', ' + SUBSTRING(name, 1, CHARINDEX(' ',name)-1)) as swapped
from moneys; 
```

结果：

```
| SPLITPOSITION | FIRSTWORD | LASTWORD |   SWAPPED |
----------------------------------------------------
|             5 |      test |      one |  one, test | 
```

ps：我在 sql server 中使用了一个旧表进行演示..

# c++ - C++ 从内存中删除对象

> ID：14325229
> 
> 赞同：0
> 
> 时间：2013-01-14T19:28:52.000
> 
> 标签：c++, memory

假设我已经分配了一些内存并用一组相同类型的对象填充它，我们将调用这些组件。

假设需要删除其中一个组件，那么这样做的好方法是什么，以便可以通过循环遍历对象集来测试和跳过组件创建的“洞”？

反之亦然，我希望能够测试一个孔以便在空间中存储新组件。

我在想 menclear 并检查 0...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:55:16.003

`boost::optional<component>`似乎完全符合您的需求。把它们放在你的仓库里，不管是什么。例如，与`std::vector`

```
// initialize the vector with 100 non-components
std::vector<boost::optional<component>> components(100);

// adding a component at position 15
components[15].reset(component(x,y,z));

// deleting a component at position 82
componetnts[82].reset()

// looping through and checking for existence
for (auto& opt : components)
{
    if (opt) // component exists
    {
        operate_on_component(*opt);
    }
    else     // component does not exist
    {
        // whatever
    }
}

// move components to the front, non-components to the back
std::parition(components.begin(), components.end(),
    [](boost::optional<component> const& opt) -> bool { return opt; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:32:07.347

简短的回答是这取决于你如何将它存储在内存中。

例如，ansi 标准建议连续分配向量。

如果可以预测对象的大小，或许可以使用 size_of 和寻址等函数来预测内存中的位置。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:35:07.523

至少有两种解决方案：

1）用一些标志标记孔，然后在加工时跳过它。好处：'删除'非常快（只设置一个标志）。如果对象不是那么小，即使添加“bool alive”标志也不难做到。

2）在池的末端移动一个洞，并用一些“活”的物体代替它。

这个问题与存储和处理粒子系统有关，你可以在那里找到一些建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:35:23.160

如果无法向上移动“活动”组件，或重新排序它们以使序列中间没有孔，那么最好的选择是给组件对象一个“已删除”标志/状态，可以通过成员函数测试。
这种“已删除”状态不会*导致*对象从内存中删除（这在较大块的中间是不可能的），但它确实可以将点标记为未用于组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T19:39:52.010

当您说您“分配了一些内存”时，您可能是在谈论一个数组。数组很棒，因为它们几乎没有开销并且通过索引访问非常快。但是数组的坏处是它们对调整大小不是很友好。当您删除中间的元素时，所有后续元素都必须向后移动一个位置。

但幸运的是，您还可以使用其他数据结构，例如[链表](http://en.wikipedia.org/wiki/Linked_list)或[二叉树](http://en.wikipedia.org/wiki/Binary_tree)，它们可以快速删除元素。C++ 甚至在容器类[std::list](http://www.cplusplus.com/reference/list/list/)和[std::set](http://www.cplusplus.com/reference/set/set/)中实现了这些。

当您事先不知道需要多少元素时，列表非常有用，因为它可以动态收缩和增长，而不会在您删除或添加任何元素时浪费任何内存。此外，添加和删除元素非常快，无论是在开头、结尾还是中间某个位置插入它们。

一组非常适合快速查找。当你有一个对象并且你想知道它是否已经在集合中时，检查它会非常快。集合还会自动丢弃重复项，这在许多情况下非常有用（当您需要重复项时，有[std::multiset](http://www.cplusplus.com/reference/set/multiset/)）。就像列表一样，它会动态适应，但添加新对象的速度不如列表快（尽管不像数组那样昂贵）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T19:41:56.563

两个建议：

1）您可以使用[链接列表](http://en.wikipedia.org/wiki/Linked_list)来存储您的组件，然后不用担心漏洞。

或者，如果您需要这些孔：

2）您可以将组件包装到一个带有指向组件的指针的对象中，如下所示：

```
class ComponentWrap : public
{
   Component component;
} 
```

并用于`ComponentWrap.component == null`查找组件是否被删除。

异常方式：

3) 将代码放入 try catch 块中，以防遇到空指针错误。

# android - 带有对象的 Android ArrayAdapter 并从该对象获取一些数据

> ID：14325231
> 
> 赞同：1
> 
> 时间：2013-01-14T19:28:56.353
> 
> 标签：android, object, android-arrayadapter

我试图使用数组中的数据制作 ListView，但我需要获取点击行的 ID（未显示在该行中，但在创建该产品时使用）

我将此类用于对象：

```
package com.example.raidplanner;
public class RaidWpis {
private int id;
private int id_gildia;
private String nazwa;
private int schemat;
private int data_zapis;
private int data_start;
private int opis;
private int id_officer;
private int nick_officer;
private int typ;

public RaidWpis(int id,String nazwa) {
    setNazwa(nazwa);
    setId(id);
}

public int getId()                  { return id; }

public void setId(int id)           { this.id = id; }

public String getNazwa()            { return nazwa; }

public void setNazwa(String nazwa)  { this.nazwa = nazwa; }

public String toString() {
        return this.nazwa;
    }
    public String toString2() {
        return this.id+" - "+nazwa;
    }

} 
```

而Activity中的这段代码：

```
RaidWpis[] items = {
            new RaidWpis(1, "aaaa"),
            new RaidWpis(3, "bbbb"),
            new RaidWpis(6, "cccc"),
            new RaidWpis(11, "dddd"),
            new RaidWpis(17, "eeee"),
        };        
    mainListView = (ListView) findViewById( R.id.mainListView );  

    ArrayAdapter<RaidWpis> raidList = new ArrayAdapter<RaidWpis>(this, R.layout.simplerow, items);  

    // Create ArrayAdapter using the raid list.  
    mainListView.setAdapter(raidList);

    mainListView.setOnItemClickListener(new OnItemClickListener() {
          @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) 
          {
                String item = ((TextView)view).getText().toString();
                Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();   
          }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:32:02.977

> 我需要获取单击行的 ID（未显示在该行中，但在创建该产品时使用）

`onItemClick()`在你的方法中试试这个：

```
RaidWpis obj = parent.getAdapter().getItem(position); // or just raidList.get(position) if raidList is a field variable
Toast.makeText(getBaseContext(), obj.getID() + "", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:32:21.510

从位置，您可以使用 raidList.get(position) 获取 RaidWpis 对象。一旦你有了这个 RaidWpis 对象，你就可以调用 getId() 来获取 id

# shell - 为 gpg --gen-key 生成随机字节

> ID：14325234
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:29:13.170
> 
> 标签：shell, unix, putty, gnupg

我正在使用 putty 连接到我想要生成新 gpg 密钥的 unix 主机。密钥生成开始后，我收到此消息

```
Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 292 more bytes) 
```

这不是真正的问题。真正的问题是现在我不能再向 shell 发出任何命令了，它看起来像这样

```
dfjd
q
s
w
e
r
t
z
z
u
^_
^[[A^[[A 
```

为什么会这样，不再执行任何命令，为什么向上箭头键显示为 ^[[A? 我该如何解决这个问题并发出一些可以生成密钥的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:58:10.273

您的客户端系统可能在完成与远程服务器的连接之前等待随机性，因此您的命令将被忽略，直到它可以完成连接。

您是否尝试过按照消息中的说明进行操作？尝试打开一个大文件夹并查看其大小（在 Windows 上）或执行`du /`（unix）以生成一些基于磁盘的随机性。根据您的系统收集随机性的方式，某些类型的输入也可能有所帮助。

了解你的客户会有所帮助。

# fullcalendar - fullcalendar json 不工作

> ID：14325239
> 
> 赞同：1
> 
> 时间：2013-01-14T19:29:33.183
> 
> 标签：fullcalendar

我很难尝试在 fullcalendar 上填充事件，以下是我的代码，尝试从 mysql 获取数据

类 mycalendarleaves 扩展 Generic{ function calendar_LeaveDetails(){

```
$year = date('Y');
$month = date('m');
$this->user_id = $_SESSION['user_id'];
$params = array( ':user_id' => $this->user_id );
$stmt   = parent::query("SELECT * FROM messages WHERE TYPE = 'leave' AND leave_status='approved' AND sender_id = :user_id;", $params);

while($value = $stmt->fetch()) :    
    $_SESSION['cal_data']  = array(
            'id'    => $value['id'],
            'title' =>  $value['sender_name'],
            'start' =>  "$year-$month-10"
            );
    endwhile;
} 
```

}

echo json_encode($_SESSION['cal_data']);

$mycalendarleaves = 新的 mycalendarleaves();

这是脚本

```
<script type='text/javascript'>
$(document).ready(function() {
    $('#calendar').fullCalendar({
        editable: true,
        events: "calendar.php",
        eventDrop: function(event, delta) {
            alert(event.title + ' was moved ' + delta + ' days\n' +
                '(should probably update your database)');
        },
        loading: function(bool) {
            if (bool) $('#loading').show();
            else $('#loading').hide();
        }
    }); 
}); 
```

我没有收到任何错误，日历仍然显示为空白，没有数据。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:10:16.547

我让它工作，以防其他人遇到问题，这可能也会帮助他们。

以下是我从 mysql 获取数据的函数

```
 function calendar_EventDetails(){

$year = date('Y');
$month = date('m');
$this->id = $_SESSION['id'];
$params = array( ':id' => $this->id );
$stmt   = parent::query("SELECT * FROM TABLENAME WHERE TYPE = 'event' AND status='approved' AND id = :id;", $params);

unset($_SESSION['events']);
while($value = $stmt->fetch()) :

    $_SESSION['events'][]  = array(
            'id'    => $value['id'],
            'title' =>  $value['name'],
            'start' =>  "$year-$month-10"

            );
    endwhile;
} 
```

以下是调用放置上述函数的 php 文件的脚本

```
<script type='text/javascript'>
$(document).ready(function() {
    $('#calendar').fullCalendar({
        editable: true,
        events: "calendar.php",
        eventDrop: function(event, delta) {
            alert(event.title + ' was moved ' + delta + ' days\n' +
                '(should probably update your database)');
        },
        loading: function(bool) {
            if (bool) $('#loading').show();
            else $('#loading').hide();
        }
    }); 
}); 
```

# css - CSS3 - 使用 CSS3 过渡时，图像在 IE 中不显示

> ID：14325243
> 
> 赞同：3
> 
> 时间：2013-01-14T19:29:40.330
> 
> 标签：css, image, internet-explorer, transitions

CSS3 - 使用 CSS3 过渡时，图像不会在 IE 中显示。我不介意动画在 IE 中是否不起作用，但我至少希望图像在 IE 中正常显示。下面是我的代码：

**HTML：**

```
 <div id="bg">
    <img class="fadeIn fadeIn-3s fadeIn-Delay-3s" src="images/about-phil.jpg" alt="Phil Davel About Us Background Image">
</div> 
```

**CSS：**

```
.fadeIn {
opacity:0;
-webkit-animation:fadeIn ease-in 1;
-moz-animation:fadeIn ease-in 1;
-o-animation:fadeIn ease-in 1;
animation:fadeIn ease-in 1;
-webkit-animation-fill-mode:forwards;
-moz-animation-fill-mode:forwards;
-o-animation-fill-mode:forwards;
animation-fill-mode:forwards;
margin-bottom: -10px; 
```

}

```
.fadeIn-3s {
    -webkit-animation-duration:3s;
    -moz-animation-duration:3s;
    -o-animation-duration:3s;
    animation-duration:3s;
}

.fadeIn-Delay-3s {
    -webkit-animation-delay:1s;
    -moz-animation-delay:1s;
    -o-animation-delay:1s;
    animation-delay:1s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:42:40.090

IE 不支持 CSS3 动画。

如果用户使用 IE，您可以在 HTML 中使用条件语句来包含额外的 CSS 文件。通过这样做，您可以为 IE 以不同的方式显示图像。

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="ie.css" />
<![endif]--> 
```

# java - CollisionShape 飞离世界

> ID：14325244
> 
> 赞同：0
> 
> 时间：2013-01-14T19:29:43.983
> 
> 标签：java, collision, jmonkeyengine

我正在 JME3 中开发游戏，出于某种原因，我的空间播放器正在（向上）从我的世界飞走。我看不出我错过了什么，你能看看并告诉我如何让玩家留在世界上吗？

```
 public class Main extends SimpleApplication {

    private BulletAppState bulletAppState;

    public static void main(String[] args) {
        Main app = new Main();
        app.start();
    }

    Node playerNode = new Node("player");
    Spatial player;

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        stateManager.attach(bulletAppState);
        bulletAppState.getPhysicsSpace().setGravity(new Vector3f(0f,-9.81f,0f));
        speed = 10.0f;

        //World
        Spatial world = assetManager.loadModel("Scenes/city/sound_city.j3o");
        world.setLocalScale(2.0f);

        CollisionShape worldcshape = CollisionShapeFactory.createDynamicMeshShape(world);
        RigidBodyControl rworld = new RigidBodyControl(worldcshape);
        rworld.setMass(0f);
        bulletAppState.getPhysicsSpace().add(rworld);
        world.addControl(rworld);
        rootNode.attachChild(world);

        //Player
        player = assetManager.loadModel("Models/player/player.j3o");
        playerNode.attachChild(player);
        CollisionShape playerShape = CollisionShapeFactory.createDynamicMeshShape(player);
        RigidBodyControl plr = new RigidBodyControl(playerShape,123.0f);
        plr.setFriction(1f);

        plr.setMass(60f);
        bulletAppState.getPhysicsSpace().add(plr);

        player.addControl(plr);
        rootNode.attachChild(playerNode);

        //SoundModel
        Spatial sound = assetManager.loadModel("Models/sound/sound.j3o");
        sound.setLocalScale(0.3f);
        sound.setLocalTranslation(3.0f, 0, 5.0f);
        sound.rotate(0, FastMath.DEG_TO_RAD*-40, 0);
        rootNode.attachChild(sound);

        Spatial sound2 = sound.clone();
        sound.setLocalTranslation(3.0f, 0, 6.0f);
        rootNode.attachChild(sound2);

        //Light
        DirectionalLight sun = new DirectionalLight();
        sun.setDirection(new Vector3f(-0.1f, -0.7f, -1.0f));
        rootNode.addLight(sun);

        initCam(player);
        initKeys();
    }

    private void initCam(Spatial player) {
        cam.setLocation(player.getLocalTranslation().add(0, 30.0f, 0));
        cam.lookAt(playerNode.getLocalTranslation(), Vector3f.UNIT_Z.negate());
//        cam.lookAt(playerNode.getLocalTranslation(), Vector3f.UNIT_Y);
//        cam.setRotation(cam.getRotation().fromAngles(FastMath.DEG_TO_RAD*90, FastMath.DEG_TO_RAD*180, 0));

        // Disable the default flyby cam
        flyCam.setEnabled(false);
        // Enable a chase cam
        ChaseCamera chaseCam = new ChaseCamera(cam, player, inputManager);
//        chaseCam.setTrailingEnabled(false);

        chaseCam.setDefaultHorizontalRotation(FastMath.DEG_TO_RAD*(90));
        chaseCam.setDefaultVerticalRotation(FastMath.DEG_TO_RAD*(90));
    }

    private void initKeys() {
        //WASD
        inputManager.addMapping("Left", new KeyTrigger(keyInput.KEY_A));
        inputManager.addMapping("Right", new KeyTrigger(keyInput.KEY_D));
        inputManager.addMapping("Up", new KeyTrigger(keyInput.KEY_W));
        inputManager.addMapping("Down", new KeyTrigger(keyInput.KEY_S));

        //ArrowKeys
        inputManager.addMapping("Left", new KeyTrigger(keyInput.KEY_LEFT));
        inputManager.addMapping("Right", new KeyTrigger(keyInput.KEY_RIGHT));
        inputManager.addMapping("Up", new KeyTrigger(keyInput.KEY_UP));
        inputManager.addMapping("Down", new KeyTrigger(keyInput.KEY_DOWN));

        inputManager.addListener(analogListener, new String[]{"Left", "Right", "Up", "Down"});
    }

    private AnalogListener analogListener = new AnalogListener() {
        public void onAnalog(String name, float value, float tpf) {
            if (name.equals("Left")) {
                player.rotate(0, value*speed, 0);
            }
            if (name.equals("Right")) {
                player.rotate(0, -value*speed, 0);
            }
            if (name.equals("Up")) {
                Vector3f v = player.getLocalRotation().getRotationColumn(2).normalize().mult(speed*value*1.4f);;
                playerNode.move(v.negate());
            }
            if (name.equals("Down")) {
                Vector3f v = player.getLocalRotation().getRotationColumn(2).normalize().mult(speed*value);;
                playerNode.move(v);
            }
        }
    };

    @Override
    public void simpleUpdate(float tpf) {
        //TODO: add update code
    }

    @Override
    public void simpleRender(RenderManager rm) {
        //TODO: add render code
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:34:21.657

您的`y`坐标轴可能指向另一个方向，因此您实际上必须将重力设置为`9.81`而不是`-9.81`。

# javascript - OpenLayers Map BoundingBox 计算

> ID：14325250
> 
> 赞同：0
> 
> 时间：2013-01-14T19:30:07.183
> 
> 标签：javascript, extjs, gis, openlayers, geoserver

我正在使用 GeoServer 来保存一些地图，并且只是一个简单的 OpenLayers 应用程序来加载和显示数据（目前）。

我成功加载了演示数据（在 WGS84 中），但是当涉及到我的数据（在 Balkans Zone 7，EPSG:31277）时，当我查看请求时，BBOX 似乎完全没有了秩序。

我从 GeoServer 预览页面（由 openLayers 制作）检查了 BBOX，它看起来像这样，并且可以工作：

`http://127.0.0.1:2113/geoserver/GISHome/wms?LAYERS=GISHome%3ANis11Katastar&STYLES=&FORMAT=image%2Fjpeg&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG%3A31277&BBOX=7572000,4796000,7574000,4798000&WIDTH=512&HEIGHT=512`

唯一与我的要求不同的是 BBOX。将 BBOX 复制到我的请求中时，它可以工作。

`http://127.0.0.1:2113/geoserver/wms?LAYERS=Nis11Katastar&FORMAT=image%2Fpng&WIDTH=256&HEIGHT=256&PROJECTION=EPSG%3A31277&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&STYLES=&SRS=EPSG%3A4326&BBOX=-180,-90,0,90`

在 GeoServer 源中，边界以某种方式计算和硬编码。问题是，怎么做？有没有办法不对它们进行硬编码？我应该如何计算它们。我已经尝试添加边界、maxExtent、分辨率，我显然在这里错过了更多的东西。GeoServer 工作正常，我正在使用来自 QuantumGIS 的图层。

```
Ext.onReady(function() {
    var map = new OpenLayers.Map();
    var layer = new OpenLayers.Layer.WMS(
        "Global Imagery",
        "http://127.0.0.1:2113/geoserver/wms",
       {  
        LAYERS:'Nis11Katastar',
        format: 'image/png',
        width:600,
        height:400,
        projection: new OpenLayers.Projection("EPSG:31277"),
        }
    ); 
```

谢谢你。

哦，是的，我正在使用 GeoExt，但这并没有太大变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:52:03.447

似乎解决了。我正在设置正确的属性，但设置为 WMS 图层对象，而不是地图对象。至于边界问题，我只是从地理服务器控制面板复制边界。

# android - 设置相对布局的背景颜色

> ID：14325251
> 
> 赞同：0
> 
> 时间：2013-01-14T19:30:07.493
> 
> 标签：android, android-relativelayout, background-color

我正在尝试设置相对布局的背景，

```
relativeLayout1.setBackgroundColor(0x00000000); 
```

我的程序一直在崩溃。这是[logcat](http://pastebin.com/3YBGkLiP)。

代码：

```
RelativeLayout window=(RelativeLayout) findViewById(R.id.window);
window.setBackgroundColor(0x00000000); 
```

这是除了常规代码之外唯一的`setContentView(R.layout.something);`东西`super.onCreate(savedInstanceState);`

完整代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_invisible);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
    window=(RelativeLayout) findViewById(R.id.window);
        window.setBackgroundColor(0x00000000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:49:38.950

从随附的 logcat 中，我可以说您的`window`指针很可能是`null`在您尝试设置背景颜色时。它可能是由不同类型的问题引起的：

*   您的`something.xml`布局不**包含**具有`android:id="@+id/window"`属性的元素
*   您的`something.xml`布局**确实**包含具有`android:id="@+id/window"`属性的元素，但该元素不是`RelativeLayout`
*   您的项目资源数据搞砸了。尝试做 Project->Clean 来重建资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:49:05.310

有你`R.layout.something`的 id 布局`R.id.window`吗？

也许你错过了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:57:23.293

您可以使用它来代替相对 layout.setBackgroundDrawable(get resources().get drawable(R.drawable.bg);

或者你可以在 XML android 中定义它： background="@drawable/bg"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T04:08:59.897

这是 Eclipse 的另一个时刻。它没有编译我的代码，所以我正在执行旧代码。重新启动 Eclipse，我的应用程序现在可以正常工作了。

# c# - 单元测试 HQL 查询

> ID：14325253
> 
> 赞同：3
> 
> 时间：2013-01-14T19:30:12.240
> 
> 标签：c#, .net, hibernate, unit-testing, nhibernate

我有类似 HQL 查询工厂的东西，它产生纯字符串 HQL 查询。如何对语法错误进行单元测试，而无需通过实际执行查询来与数据库进行集成测试？

最好的选择是调用一些神奇的 VerifyHql() 方法，或者在某处使用它并捕获一些有意义的解析异常或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T01:00:13.807

在没有要查询的数据库的情况下测试查询没有多大意义，因此应该使用集成测试进行测试。但是，您可以[使用内存中的 SQLite 数据库](http://ayende.com/blog/3983/nhibernate-unit-testing)，而不是访问真实的服务器。有一个[NuGet SQLite 包](http://www.nuget.org/packages/System.Data.SQLite)可用。

# apache - apache重定向 - 条件不正确匹配

> ID：14325254
> 
> 赞同：0
> 
> 时间：2013-01-14T19:30:14.503
> 
> 标签：apache, mod-rewrite

我在 Apache (2.2) 配置的虚拟主机部分有以下简单的重写语句和条件

```
RewriteCond %{REQUEST_URI} !-d
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^([^\.]{2,})$ /bootstrap.php?url=$1 
```

所有请求都很好地重定向到 bootstrap.php，如果文件存在则执行。这很好用。但是，如果存在目录，我希望 Apache 为该目录运行 DirectoryIndex，或显示目录的内容（无论我选择什么设置），但 Apache 也将请求定向到 bootstrap.php。似乎第一个 rewriteCond 不正确。我究竟做错了什么？

在进行调试并尝试加载“localhost/img”（存在）时，我得到以下输出

```
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (2) init rewrite engine with requested uri /img/
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (3) applying pattern '^([^\.]{2,})$' to uri '/img/'
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (4) RewriteCond: input='/img/' pattern='!-d' => matched
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (4) RewriteCond: input='/img/' pattern='!-f' => matched
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (2) rewrite '/img/' -> '/bootstrap.php?url=/img/'
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (3) split uri=/bootstrap.php?url=/img/ -> uri=/bootstrap.php, args=url=/img/
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (2) local path result: /bootstrap.php
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (2) prefixed with document_root to C:/webroot/zippyshoot/bootstrap.php
127.0.0.1 - - [14/Jan/2013:20:18:14 +0100] [localhost/sid#4cd5a8][rid#14442c0/initial] (1) go-ahead with C:/webroot/zippyshoot/bootstrap.php [OK] 
```

加载 localhost/img/logo.png 时工作正常。然后是调试日志的输出

```
127.0.0.1 - - [14/Jan/2013:20:27:56 +0100] [localhost/sid#4cd5a8][rid#237d978/initial] (2) init rewrite engine with requested uri /img/logo.png
127.0.0.1 - - [14/Jan/2013:20:27:56 +0100] [localhost/sid#4cd5a8][rid#237d978/initial] (3) applying pattern '^([^\.]{2,})$' to uri '/img/logo.png'
127.0.0.1 - - [14/Jan/2013:20:27:56 +0100] [localhost/sid#4cd5a8][rid#237d978/initial] (1) pass through /img/logo.png 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:17:00.613

[我在这篇文章http://amandine.aupetit.info/135/apache2-mod_rewrite/](http://amandine.aupetit.info/135/apache2-mod_rewrite/)中找到了问题的答案

从 Apache 2.2 开始，rewriteCond 发生了变化。现在写它们的正确方法是

```
 RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
     RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
     RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-l 
```

# delphi - 来自我的 Delphi 控制台实用程序的假病毒阳性

> ID：14325257
> 
> 赞同：2
> 
> 时间：2013-01-14T19:30:22.233
> 
> 标签：delphi, console-application, virus, delphi-xe3

一位客户报告说，在安装我使用 Delphi XE3 编写的 Delphi 应用程序期间，McAfee 检测到“通用 BackDoor.add”。我已经通过使用[Virus Total](http://www.virustotal.com)复制了这个结果，它在我用 Delphi 作为控制台应用程序编写的一个小型实用程序 EXE 文件上返回了这个病毒阳性，并认为这是导致报告的文件（不是主应用程序 EXE）。

该实用程序调用服务控制管理器 (SCM) 在 Innosetup 的 [运行] 阶段安装“.sys”文件。我实际上部署了这个实用程序 EXE 的两个版本，一个作为控制台应用程序，另一个具有相同的 Delphi SCM 代码单元，但它添加了一个带有按钮的小型 GUI 表单。后一种实用程序不会显示为病毒阳性，仅显示控制台应用程序。我的应用程序需要提升才能使用“{$R uac_manifest.res}”包含运行。我的实用程序应用程序的 DPR 部分如下所示。（请注意，这不会显示服务控制管理器调用，因为它们在另一个单元中，但是这个另一个单元由我的 GUI 实用程序版本使用，它不会触发病毒检测，因此我断定问题出在我的 DPR 中 - 也许？ ):

```
 program ArtSCM;

uses
  SysUtils,
  Windows,
  UArtSysDriverInstaller;

{$APPTYPE CONSOLE}

{$R uac_manifest.res}
{$R *.res}

var
  sDriverName : string;

function CommandLineParamExistsWithArg(
     const ALookFor  : string;
     var   AArgument : string ) : boolean; overload;
{ Looks for the occurance of 'ALookFor' on the command line,
  of the form ALookFor=<AArgument>, where if found, AArgument returns
  the argument in upper case, AArgCaseAsIs returns the argument case as is. }
var
   I : integer;
   S : string;
begin
  Result := False;
  AArgument := '';

  For I := 1 to ParamCount do
    begin
    S := AnsiDequotedStr(ParamStr(I), '"');
    AArgument := UpperCase(S);
    Result := Pos( UpperCase(ALookFor)+'=', AArgument) = 1 ;
    If Result then
       begin
       Delete( AArgument, 1, Length(ALookFor)+1);
       Break;
       end;
    end;

  If not Result then
    AArgument := '';

end;

function PerformCommandLineAction : boolean;
var
  Installer : TArtSysDriverInstaller;

  procedure Install;
  begin
    Result := True;
    Installer := TArtSysDriverInstaller.Create( sDriverName );
    try
      Installer.InstallDriver;
    finally
      Installer.Free;
    end;
    Writeln( '  Driver installed OK.' );
  end;

  procedure Query;
  var
    S : string;
  begin
    Result := True;
    Installer := TArtSysDriverInstaller.Create( sDriverName );
    try
      If Installer.DriverIsInstalledAndRunning then
        begin
        S := Installer.DriverVersionString;
        S := Format('The driver is installed and running - Version %s.', [S] );
        end
       else
        S := 'The driver is *NOT* installed and running.';
    finally
      Installer.Free;
    end;
    Writeln( '  Status: ', S );
  end;

  procedure GetArtInfo;
  var
    S : string;
  begin
    Result := True;
    Installer := TArtSysDriverInstaller.Create( sDriverName );
    try
      If Installer.DriverIsInstalledAndRunning then
        begin
        S := Installer.ARTDriverInfoString;
        S := Format('Driver info string: %s', [S] );
        end
       else
        S := 'The driver is *NOT* installed and running.';
    finally
      Installer.Free;
    end;
    Writeln( '  Status: ', S );
  end;

  procedure Remove;
  begin
    Result := True;
    Installer := TArtSysDriverInstaller.Create( sDriverName );
    try
      Installer.RemoveDriver;
    finally
      Installer.Free;
    end;
    Writeln( '  Driver removed OK.' );
  end;

begin

  Result := False;

  try

    If not CommandLineParamExistsWithArg(
      '/DriverName',
      sDriverName )
       or (Length( sDriverName ) < 3) then
        Raise Exception.Create( 'Missing or invalid /DriverName=xxx parameter' );

    Writeln( '  Driver name: ', sDriverName );    

    If FindCmdLineSwitch(
      'QUERY' ) then
        Query
     else
    If FindCmdLineSwitch(
      'GETARTINFO' ) then
        GetArtInfo
     else
    If FindCmdLineSwitch(
      'REMOVE' ) then
        Remove
     else
    If FindCmdLineSwitch(
      'INSTALL' ) then
        Install
    else
      Raise Exception.Create( 'Missing command - QUERY, GETARTINFO, REMOVE or INSTALL required.' );

  except
    on E:Exception do
      begin
      Writeln( '  Error: ', E.Message );
      ExitCode := 1;
      end;
  end
end;

function IsRunningInDelphiIDE : boolean;
// Returns TRUE if the program is running in the IDE, FALSE otherwise.
begin
  Result := DebugHook <> 0;
end;

var
  dwVersion : DWORD;
begin
  dwVersion := GetFileVersion( ParamStr(0));

  Writeln( Format(
    'ArtDrvSC V%d.%d (c) Applied Relay Testing Ltd 2011',
    [HiWord(dwVersion), LoWord(dwVersion)] ));

  PerformCommandLineAction;

  If IsRunningInDelphiIDE then
    begin
    Writeln( 'Press a key ..' );
    Readln;
    end;
end. 
```

如您所见，如果我从命令行运行“{$R uac_manifest.res}”行，它会正确请求提升，清单为：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity type="win32" name="Applied Relay Testing Ltd" version="3.1.0.0" processorArchitecture="*"/> 
  <dependency> 
    <dependentAssembly> 
    </dependentAssembly> 
  </dependency> 
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3"> 
    <security> 
      <requestedPrivileges> 
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
        </requestedPrivileges> 
    </security> 
  </trustInfo> 
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1"> 
    <application> 
      <!--The ID below indicates application support for Windows Vista --> 
      <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
      <!--The ID below indicates application support for Windows 7 --> 
      <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/> 
    </application> 
  </compatibility> 
</assembly> 
```

任何人都可以评论我应该做些什么来消除这种病毒检测吗？

# sql - SQL Server 查找过去 2 个月的最后一周

> ID：14325261
> 
> 赞同：-3
> 
> 时间：2013-01-14T19:30:44.527
> 
> 标签：sql, sql-server, sql-server-2008

```
INSERT INTO @blah (ID, Date)
    VALUES (123, '11/12/2012')
    VALUES (124, '11/30/2012')
    VALUES (125, '11/28/2012')
    VALUES (126, '12/1/2012')
    VALUES (127, '12/30/2012')
    VALUES (128, '12/25/2012')
    VALUES (129, '12/26/2012') 
```

我想获取日期是两个月后相应月份的最后一周的行。这个月是 2013 年 1 月，所以我想要 2012 年 12 月和 2012 年 11 月的最后一周。

最终的选择是一个月的最后一个完整的一周，例如：2012 年 12 月 = 12/23-12/29，但现在我将在该月的最后 7 天休息。

我知道如何获得最后两个月，但不确定如何获得相应月份的最后一周..

```
select
    *
from
    @blah
where
    dateDiff(month,date,getdate()) < 2 ---only look at the last two months 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:03:14.283

这符合规定的要求（前两个月的最后一周）：

```
SET DATEFIRST 1;

DECLARE @s DATE = GETDATE(), @s1 DATE, @s2 DATE;
SET @s = GETDATE();

-- last day of last month:
SET @s1 = DATEADD(DAY, -DAY(@s), @s);

-- last day of previous month:
SET @s = DATEADD(MONTH, -1, @s);
SET @s2 = DATEADD(DAY, -DAY(@s), @s);

SELECT 
 @s1 = DATEADD(DAY, -7, DATEADD(DAY, -DATEPART(WEEKDAY, @s1) % 7, @s1)),
 @s2 = DATEADD(DAY, -7, DATEADD(DAY, -DATEPART(WEEKDAY, @s2) % 7, @s2));

SELECT col1, col2, etc. 
FROM dbo.table
  WHERE 
  (date_column >= @s1 AND date_column < DATEADD(DAY, 7, @s1)
  OR
  (date_column >= @s2 AND date_column < DATEADD(DAY, 7, @s2); 
```

为了使这更具动态性（您应该首先尽力说明这些要求，而不是在人们投入大量工作之后），您可以说：

```
DECLARE @NumberOfMonthsIReallyWanted INT = 3;

DECLARE @i INT = 1, @d DATE = GETDATE();
DECLARE @t TABLE(d DATE);

WHILE @i <= @NumberOfMonthsIReallyWanted
BEGIN
  SET @d = DATEADD(MONTH, -@i, @d)

  INSERT @t(s) SELECT DATEADD(DAY, -7, DATEADD(DAY,  
   -DATEPART(WEEKDAY, DATEADD(DAY, -DAY(@d), @d)) % 7, 
   DATEADD(DAY, -DAY(@d), @d)));

  SET @i += 1;
END

SELECT src.col1, src.col2, etc. 
  FROM dbo.table AS src
  INNER JOIN @t AS t
  ON src.date_column >= t.d AND src.date_column < DATEADD(DAY, 7, t.d); 
```

请不要让任何人说服您使用`LIKE`日期比较查询。这不仅会杀死 sargability（意味着不能使用索引），而且对于这样的问题，您如何确定要匹配的字符串模式？困难不在于构建`WHERE`子句，而在于为魔术`(Your Dates go here)`占位符填写什么。当你找到日期范围时，你真的想要 14 个单独的`LIKE`表达式吗？我不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:21:00.263

这适用于 Oracle - 可能会给您一些想法并希望对您有所帮助：

```
-- Last weeks of last two months -- 
SELECT mydate
  , TRUNC(mydate, 'iw') wk_starts
  , TRUNC(mydate, 'iw') + 7 - 1/86400 wk_ends
  , TO_NUMBER (TO_CHAR (mydate, 'IW')) ISO_wk#  
 FROM
  ( -- Last week = Last day of the year (hardcoded) - 1 week --
   SELECT(CASE WHEN start_date = To_Date('12/31/2012', 'mm/dd/yyyy') THEN start_date-7 ELSE start_date END) mydate 
     FROM
     ( -- Last 2 months --
      SELECT Add_Months(Last_Day(Trunc(SYSDATE)), - LEVEL) start_date
        FROM dual
     CONNECT BY LEVEL <= 2
    )
 )
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:06:41.700

```
declare @blah table (ID int, [Date] datetime)
INSERT INTO @blah (ID, [Date])
select 123, '20121112'
union select 124, '20121130'
union select 125, '20121128'
union select 126, '20121201'
union select 127, '20121230'
union select 128, '20121225'
union select 129, '20121226'

select ID, [Date], datepart(week, [Date])
from @blah
where
    datediff(month, [Date], getdate()) in (1,2)
    and
    datepart(week, [Date]) = datepart(
                                week, 
                                dateadd(
                                    day, 
                                    -datepart(day,dateadd(month, 1, [Date])), 
                                    dateadd(month, 1, [Date]))) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-14T19:41:32.370

这在某种程度上取决于您的 sql server。此示例类似于 Oracle。每个服务器都有自己的功能，例如 SYSDATE 和 NOW。

例如。

```
SELECT * from blah WHERE TO_CHAR(TRUNC(data), MM/DD/YYYY) < '01/14/2013' 
```

# android - 我的 android 应用程序在不同的设备上崩溃

> ID：14325264
> 
> 赞同：0
> 
> 时间：2013-01-14T19:31:02.810
> 
> 标签：android, eclipse, crash, manifest, device

我已经在我的手机（LG Optimus NET）和 Galaxy Mini 上测试了我的应用程序，一切正常。但是当我想在更大屏幕的设备上测试它时，它会在启动时崩溃。我试过 S3 和 AllView（我不太了解型号）。

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.swipefragments"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <supports-screens android:largeScreens="true"
        android:normalScreens="true" android:smallScreens="true"
        android:resizeable="true" android:anyDensity="true" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name="com.example.swipefragments.MainActivity"
            android:label="Stiai ca..." 
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

主要活动：

```
public class MainActivity extends SherlockFragmentActivity {
    static final int NUM_ITEMS = 550;

    MyAdapter mAdapter;

    ViewPager mPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getSupportActionBar().setDisplayShowTitleEnabled(false);
        getSupportActionBar().setDisplayShowHomeEnabled(false);
        setContentView(R.layout.fragment_pager);

        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        // Watch for button clicks.
        Button button = (Button)findViewById(R.id.goto_first);
//        button.getBackground().setColorFilter(0xFF0174DF, PorterDuff.Mode.MULTIPLY);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mPager.setCurrentItem(0);
            }
        });
        button = (Button)findViewById(R.id.goto_last);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 mPager.setCurrentItem(NUM_ITEMS-1);
            }
        });

        button = (Button)findViewById(R.id.goto_random);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                Random r = new Random();
                int i1=r.nextInt(529)+20;
                mPager.setCurrentItem(i1);
            }
        });

        button = (Button)findViewById(R.id.goto_about);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

             Toast.makeText(MainActivity.this, "Ciuboariu Florin, Ianuarie 2013", Toast.LENGTH_SHORT).show();
            }
        });
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return ArrayListFragment.newInstance(position);
        }
    }

    public static class ArrayListFragment extends SherlockListFragment {
        int mNum;

        /**
         * Create a new instance of CountingFragment, providing "num"
         * as an argument.
         */
        static ArrayListFragment newInstance(int num) {
            ArrayListFragment f = new ArrayListFragment();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
        }

        /**
         * When creating, retrieve this instance's number from its arguments.
         */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
//            Random r = new Random();
//          int i1=r.nextInt(70-1)+1;
//            mNum = i1;
            mNum = getArguments() != null ? getArguments().getInt("num") : 1;
        }

        /**
         * The Fragment's UI is just a simple text view showing its
         * instance number.
         */
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
            View tv = v.findViewById(R.id.text2);
            switch(mNum){
            IMENSE HERE- deleted
            }
            return v;
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList", "Item clicked: " + id);
        }
    } 
```

日志猫：

```
01-14 21:42:13.969: E/dalvikvm-heap(17739): Creating VM heap of size start:2097152 max:536870912 base:0x4000c000
01-14 21:42:14.089: E/Tethering(11125): <!>com.android.server.connectivity.Tethering 278<!> active iface (usb0) reported as added, ignoring
01-14 21:42:14.509: E/dalvikvm-heap(17750): Creating VM heap of size start:2097152 max:536870912 base:0x4000c000
01-14 21:42:14.749: I/ActivityManager(11125): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.swipefragments/.MainActivity } from pid 17750
01-14 21:42:14.769: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Launcher.java:1809:onPause()onPause
01-14 21:42:14.769: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:528:updateWallpaperOffset()1 firstEmptyScreen: 6
01-14 21:42:14.769: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:529:updateWallpaperOffset()1 getChildAt(firstEmptyScreen).getRight() 2240
01-14 21:42:14.769: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:536:updateWallpaperOffset()2 scrollRange: 1920, firstEmptyScreen: 6
01-14 21:42:14.779: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:542:updateWallpaperOffset()2 mCurDesktopState: 0, firstEmptyScreen: 6
01-14 21:42:14.779: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:547:updateWallpaperOffset()3 getScrollX: 960, mScrollX: 960
01-14 21:42:14.779: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:548:updateWallpaperOffset()3 getChildAt(firstEmptyScreen).getLeft(): 1920
01-14 21:42:14.779: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:554:updateWallpaperOffset()4 xOffset: 0.5
01-14 21:42:14.859: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:528:updateWallpaperOffset()1 firstEmptyScreen: 6
01-14 21:42:14.929: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:529:updateWallpaperOffset()1 getChildAt(firstEmptyScreen).getRight() 2240
01-14 21:42:14.929: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:536:updateWallpaperOffset()2 scrollRange: 1920, firstEmptyScreen: 6
01-14 21:42:14.929: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:542:updateWallpaperOffset()2 mCurDesktopState: 0, firstEmptyScreen: 6
01-14 21:42:14.929: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:547:updateWallpaperOffset()3 getScrollX: 960, mScrollX: 960
01-14 21:42:14.939: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:548:updateWallpaperOffset()3 getChildAt(firstEmptyScreen).getLeft(): 1920
01-14 21:42:14.959: I/#LGIME(11205): <!>com.jungle.android.utils.Glog 35<!> ### onFinishInput
01-14 21:42:14.959: I/#LGIME(11205): <!>com.jungle.android.utils.Glog 35<!> #### onStartInput restarting : false / inputType : 0
01-14 21:42:14.959: I/Flex(11205): <!>com.lge.provider.Andy_Flex 186<!> getMccCode numeric 22610
01-14 21:42:14.969: I/Flex(11205): <!>com.lge.provider.Andy_Flex 218<!> getMncCode numeric 22610
01-14 21:42:14.969: I/#LGIME(11205): <!>com.jungle.android.utils.Glog 35<!> updateSIMInfo -> Old MCC : 226,Old MNC : 3 MCC = 226 MNC = 10
01-14 21:42:14.999: D/LGEHome(11472): <!>com.lge.launcher.HLog 26<!> Workspace.java:554:updateWallpaperOffset()4 xOffset: 0.5
01-14 21:42:15.139: I/ActivityManager(11125): <!>com.android.server.am.ActivityRecord 444<!> Displayed com.example.swipefragments/.MainActivity: +329ms
01-14 21:42:16.119: E/Tethering(11125): <!>com.android.server.connectivity.Tethering 278<!> active iface (usb0) reported as added, ignoring
01-14 21:42:18.759: D/StatusBarPolicy(11197): [BRIGHTHY] 0\. mDataNetType: 8
01-14 21:42:18.759: D/StatusBarPolicy(11197): [BRIGHTHY] curNetwork=22610 curHPLMN=22610
01-14 21:42:18.759: D/StatusBarPolicy(11197): [BRIGHTHY]  getNationalRoaming=false Roaming=false
01-14 21:42:20.109: E/Tethering(11125): <!>com.android.server.connectivity.Tethering 278<!> active iface (usb0) reported as added, ignoring
01-14 21:42:22.109: E/Tethering(11125): <!>com.android.server.connectivity.Tethering 278<!> active iface (usb0) reported as added, ignoring
01-14 21:42:24.099: E/Tethering(11125): <!>com.android.server.connectivity.Tethering 278<!> active iface (usb0) reported as added, ignoring
01-14 21:42:30.759: D/StatusBarPolicy(11197): [BRIGHTHY] 0\. mDataNetType: 8
01-14 21:42:30.759: D/StatusBarPolicy(11197): [BRIGHTHY] curNetwork=22610 curHPLMN=22610
01-14 21:42:30.759: D/StatusBarPolicy(11197): [BRIGHTHY]  getNationalRoaming=false Roaming=false
01-14 21:42:30.829: V/DATA(11214): <!>com.android.internal.telephony.MMDataConnectionTracker 1820<!> [DCT] intent received :android.intent.action.SCREEN_OFF
01-14 21:42:30.839: V/FASTDORMANCTY(11214): <!>com.android.internal.telephony.LgeFastDormancyHandler 987<!> [UNKNOWN] intent received :android.intent.action.SCREEN_OFF
01-14 21:42:35.799: D/[Andy_Lock](11125): <!>com.android.internal.policy.impl.Andy_LockScreen 1556<!>  getCurrentStatus simStateREADY
01-14 21:42:35.869: I/#LGIME(11205): <!>com.jungle.android.utils.Glog 35<!> Action : android.intent.action.CLOSE_SYSTEM_DIALOGS
01-14 21:42:35.879: E/WindowManager(11125): <!>com.android.internal.policy.impl.PhoneWindowManager 2211<!> bwk  rotationForOrientationLw case return 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:56:31.140

在哪些文件夹中放置了以下布局？

*   R.layout.fragment_pager
*   R.layout.fragment_pager_list

在布局或布局-*??

**编辑：**

我认为问题出在这段代码中（与`SherlockFragmentActivity`：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

尝试改用 xml（将其添加到清单文件的活动中）：

```
 <activity
        android:name="com.example.swipefragments.MainActivity"
        android:label="Stiai ca..." 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

希望能帮助到你！如果是这样，你知道该怎么做;）

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:36:13.140

几乎不可能说没有看到任何代码或日志，但我会给出一些想法。

我在您的包名称中看到“swipefragments”。您是否在布局中使用片段？如果是这样，错误地实现它们可能会导致它仅在大屏幕设备上崩溃，因为片段在小屏幕设备上的处理方式不同。

另外，我有一个类似的问题，原来是我以非通用方式访问文件（查看特定位置）并且它在大多数设备上都可以工作，但在那些以不同方式实现其文件系统的设备上崩溃。

如果您至少为 提供代码`MainActivity`，那么准确地说出来会容易得多....

# sql-server - Excel 源中的错误数据不会在 SSIS 中生成错误

> ID：14325266
> 
> 赞同：0
> 
> 时间：2013-01-14T19:31:09.980
> 
> 标签：sql-server, excel, ssis

我有一个关于 SSIS 的快速问题。我正在开发一个包，它执行从 Excel 源到 OLE DB 连接的数据流任务。数据库中的列应该允许空值。但是有一个问题是，当我在 Excel 电子表格的数字列中输入错误数据时，它不会导致数据流任务像我希望的那样失败。我试图通过显式尝试转换派生列步骤中的任何数字列来解决这个问题，但是会发生同样的事情——如果我在 Excel 数字列中输入 abc，如果在包运行后在 db 中显示为 NULL。我确实想允许 NULLS，但如果数据损坏，我希望包失败。

任何意见，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:41:31.230

如果您在定义导入的位置编辑 SSIS 任务，则可以为每列选择错误处理。在那里，您可以选择将其设置为失败并停止、忽略并继续等。

此链接应该可以帮助您根据需要处理它：

[http://sqlblog.com/blogs/rushabh_mehta/archive/2008/04/24/gracefully-handing-task-error-in-ssis-package.aspx](http://sqlblog.com/blogs/rushabh_mehta/archive/2008/04/24/gracefully-handing-task-error-in-ssis-package.aspx)

和

[http://sqlserver360.blogspot.de/2011/03/error-handling-in-ssis.html](http://sqlserver360.blogspot.de/2011/03/error-handling-in-ssis.html)

和

[http://msdn.microsoft.com/en-us/library/ms141679.aspx](http://msdn.microsoft.com/en-us/library/ms141679.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:53:13.870

我刚刚试过这个，忽略/重定向/失败设置似乎没有任何效果，NULL 无论如何都会更新到数据库中。

如果您不想要 NULL，我建议您修改目标表的定义，以指定`NOT NULL`对您希望为数字的列的约束。这样数据库更新和包将失败。

但是由于您想要空列，我唯一可以建议的是您编写一个脚本任务或脚本组件来在接受数据之前读取和验证数据。

或者，将 Excel 文件读入所有列所在的暂存区域，`VARCHAR`然后通过 SQL 对其进行验证

# ios - 没有明显原因的“重复符号”链接器错误

> ID：14325267
> 
> 赞同：3
> 
> 时间：2013-01-14T19:31:10.493
> 
> 标签：ios, objective-c, xcode, compiler-errors

我`Duplicate symbols`在链接我的项目时看到。我不知道这意味着什么，也不知道如何解决它，所以任何帮助将不胜感激。

因为 shipNameText 似乎是错误的来源，所以我在这里使用它：在 .h 中：

```
@property (strong,nonatomic)IBOutlet  UILabel *shipNameText; 
```

米

```
@interface boatInfoViewController ()

@end

@implementation boatInfoViewController
@synthesize shipNameText, shipSizeText;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSUserDefaults *shipName = [NSUserDefaults standardUserDefaults];
    NSUserDefaults *shipSize = [NSUserDefaults standardUserDefaults];
    NSString *name = [[NSUserDefaults standardUserDefaults]
                                 objectForKey:@"shipName"];
    NSString *size = [[NSUserDefaults standardUserDefaults]
                      objectForKey:@"shipSize"];
    shipNameText.text = name;
    shipSizeText.text = size;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

![在此处输入图像描述](../Images/dd9a5b8b6d551c4b47b5e74749ce235a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T19:55:01.940

如果您导入实现文件“boatInfoViewController.m”而不是接口文件“boatInfoViewController.h”，则会发生这种情况，因为“boatInfoViewController.m”随后会编译两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:33:55.777

你有一个 ivar 声明了两次。它的名字是`shipNameText`并且它在`boatInfoViewController`其他地方被声明。`@implementation`您是否通过简单地在and之间声明某处来使用“本地”ivars `@end`？

# node.js - 如何让我的“之前”功能让其他测试等待其完成？

> ID：14325268
> 
> 赞同：0
> 
> 时间：2013-01-14T19:31:14.673
> 
> 标签：node.js, coffeescript, mocha.js

```
describe 'TheObject', ->
  before ->
    console.log 'loading text'
    fs.readFile('../data/data.json', 'utf8', (err, data) ->
      text = data
    )
  describe 'simple', ->
    it 'should pass a simple test', ->
      b = "1"
      b.should.equal "1" 
```

我想让它在`before`操作中读取的文件完成之前我的任何测试都不会运行。但这里是异步世界，所以我认为它的行为符合预期。我可以以某种方式将所有其他测试放入回调中吗？我可以强制 readFile 阻塞吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:45:08.600

当异步时，你的`before`函数应该接受一个`done`回调参数，它在完成处理时调用：

```
describe 'TheObject', ->
  before (done) ->
    console.log 'loading text'
    fs.readFile('../data/data.json', 'utf8', (err, data) ->
      text = data
      done()
    ) 
```

# java - 如何将 Android 图像上传到存储服务器

> ID：14325271
> 
> 赞同：1
> 
> 时间：2013-01-14T19:31:24.297
> 
> 标签：java, android

> **可能重复：**
> [如何将图像上传到服务器](https://stackoverflow.com/questions/4477629/how-to-upload-the-image-into-server)

我正在构建我的 Andriod 应用程序，到目前为止一切正常。我需要将图像（由 android cam 捕获）上传到服务器。我的问题是：有存储服务器提供 API 用于上传图像并接收图像的 url？或者也许我会将它上传到我自己的 servlet 并将其保存在某个地方？需要怎么做？

提前致谢。

PS：我搜索了很多这个问题并没有找到解决我的问题的方法。

# azure - Azure 上的 Hadoop 创建新集群

> ID：14325274
> 
> 赞同：3
> 
> 时间：2013-01-14T19:31:38.547
> 
> 标签：azure, hadoop, azure-hdinsight

我可以通过界面创建一个新的 Hadoop 集群，但需要根据请求创建一个新的集群。有谁知道是否存在用于创建新集群的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:21:50.723

还没有。截至目前（预览版），您必须使用 Windows Azure 管理门户界面在您的 Windows Azure 订阅中创建 Hadoop 集群。

由于 Powershell 上提供了大多数 Windows Azure 管理功能，因此可以将此类功能通过 REST 内置到 Powershell 中，如此处所述[，](https://github.com/WindowsAzure/azure-sdk-tools/issues?labels=&milestone=11&page=1&state=open)但我不知道任何近期计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T13:45:05.650

是的你可以。

例如，Azure CLI 允许您从批处理文件控制 HDInsight 群集。然后，您将获得一堆 HDInsight 控制功能。类型

```
azure hdinsight 
```

查看所有内置帮助。它涵盖了所有基础知识（列出、创建配置集群）和多存储帐户功能。

这是我相信基于nodejs sdk的。要开始，请安装 nodejs 和

```
npm install azure-cli 
```

这应该为您提供从命令行管理集群所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T17:26:37.023

通过询问“创建一个新的 Hadoop 集群”，我相信您的意思是 Hadoop HDInsight 集群。

如果是，那么我们可以创建一个 powershell(.ps1) 脚本，它可以为您完成这项工作。这是可能有用的示例脚本。

[http://mydailyfindingsit.blogspot.in/2016/01/create-script-hdinsight-cluster.html](http://mydailyfindingsit.blogspot.in/2016/01/create-script-hdinsight-cluster.html)

# asp.net-mvc - Asp.net mvc 重建 ViewModel 的最佳实践是什么？

> ID：14325281
> 
> 赞同：6
> 
> 时间：2013-01-14T19:32:15.793
> 
> 标签：asp.net-mvc

在 POST 上，如果验证失败并且在将 ViewModel 发送回具有模型状态错误的同一 View 之前，您是否为所有 SelectLists、ReadOnly 字段等重建 ViewModel？现在我有单独的方法来填充第一次（用于获取编辑方法）/从域对象重建视图模型，最佳实践是什么，这样我就可以干了，而且在我添加新的只读属性时也不必更改两种方法视图模型？

**我的解决方案：遵循这种模式**

遵循此处建议的模式：[https](https://stackoverflow.com/a/2775656/57132) : //stackoverflow.com/a/2775656/57132 在 IModelBuilder 实现中

```
Build(..)
{  
   var viewModel = new ViewModel();     
   // and Fill all Non-ReadOnly fields
   ...
   ...
   call CompleteViewModel(viewModel)     
}  

CompleteViewModel(ViewModel viewModel)
{
  //Fill all ReadOnly & SelectLists
  ...
} 
```

我采用此解决方案的原因是因为我不想将内容存储在服务器上以通过 HTTP 请求进行检索

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T19:52:01.953

我不重建它，因为我不留在 POST。我遵循 POST-REDIRECT-GET 模式，所以如果我使用 POST HTTP 方法发布到 /User/Edit/1，我会使用 GET 重定向到 /User/Edit/1。

`ModelState`被转移到`TempData`跟随 Post-Redirect-Get 并在 GET 调用时可用。视图模型在 GET 调用时构建在一个地方。例子：

```
 [HttpPost]
    [ExportModelStateToTempData]
    public ActionResult Edit(int id, SomeVM postedModel)
    {
        if (ModelState.IsValid) {
            //do something with postedModel and then go back to list
            return RedirectToAction(ControllerActions.List);
        }

        //return back to edit, because there was an error
        return RedirectToAction(ControllerActions.Edit, new { id });
    }

    [ImportModelStateFromTempData]
    public ActionResult Edit(int id)
    {
        var model = //create model here
        return View(ControllerActions.Edit, model);
    } 
```

这是属性导入/导出的代码`ModelState`：

```
public abstract class ModelStateTempDataTransferAttribute : ActionFilterAttribute
{
    protected static readonly string Key = typeof(ModelStateTempDataTransferAttribute).FullName;
}

public class ExportModelStateToTempDataAttribute : ModelStateTempDataTransferAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        //Only export when ModelState is not valid
        if (!filterContext.Controller.ViewData.ModelState.IsValid)
        {
            //Export if we are redirecting
            if ((filterContext.Result is RedirectResult) || (filterContext.Result is RedirectToRouteResult))
            {
                filterContext.Controller.TempData[Key] = filterContext.Controller.ViewData.ModelState;
            }
        }

        base.OnActionExecuted(filterContext);
    }
}

public class ImportModelStateFromTempDataAttribute : ModelStateTempDataTransferAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        ModelStateDictionary modelState = filterContext.Controller.TempData[Key] as ModelStateDictionary;

        if (modelState != null)
        {
            //Only Import if we are viewing
            if (filterContext.Result is ViewResult)
            {
                filterContext.Controller.ViewData.ModelState.Merge(modelState);
            }
            else
            {
                //Otherwise remove it.
                filterContext.Controller.TempData.Remove(Key);
            }
        }

        base.OnActionExecuted(filterContext);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:37:05.213

最简单的解决方案是将您的 viewModel 传递给该方法并考虑 null

```
private MyViewModel BuildViewModel(MyViewModel model = null)
{
    model = model ?? new MyViewModel();
    model.ReadOnlyList = new .....
    .
    .
    return model;
} 
```

对于创建：

```
 var model = BuildViewModel(); 
```

重建：

```
 model = buildViewModel(model); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:15:58.070

我喜欢上面@LukLed 的回答——看起来很有趣。如果您想要其他选择，这就是我目前所做的。

在我的服务层中，我有一种方法来构建我的视图模型。我在 GET 上调用它并将视图模型返回到视图。在 POST 上，我从传入的 ID 构建模型，然后是 TryUpdateModel(model)。从那里，您可以做任何您喜欢的事情（保存、检查模型状态等）。使用此方法，您只有 1 个构建方法，并且如果您的模型更改（即将来添加/删除属性等），则只需更新一次。

```
[HttpGet]
public ActionResult AssessFocuses(int apaID)
{
    var model = this.apaService.BuildAssessFocusesViewModel(apaID);
    return this.View(model);
}

[HttpPost]
public ActionResult AssessFocuses(int apaID, string button)
{
    var model = this.apaService.BuildAssessFocusesViewModel(apaID);
    this.TryUpdateModel(model);

    switch (button)
    {
        case ButtonSubmitValues.Back:
        case ButtonSubmitValues.Next:
        case ButtonSubmitValues.Save:
        case ButtonSubmitValues.SaveAndClose:
            {
                try
                {
                    this.apaService.SaveFocusResults(model);
                }
                catch (ModelStateException<AssessFocusesViewModel> mse)
                {
                    mse.ApplyTo(this.ModelState);
                }

                if (!this.ModelState.IsValid)
                {
                    this.ShowErrorMessage(Resources.ErrorMsg_WEB_ValidationSummaryTitle);
                    return this.View(model);
                }

                break;
            }

        default:
            throw new InvalidOperationException(string.Format(Resources.ErrorMsg_WEB_InvalidButton, button));
    }

    switch (button)
    {
        case ButtonSubmitValues.Back:
            return this.RedirectToActionFor<APAController>(c => c.EnterRecommendationsPartner(model.ApaID));

        case ButtonSubmitValues.Next:
            return this.RedirectToActionFor<APAController>(c => c.AssessCompetenciesPartner(model.ApaID));

        case ButtonSubmitValues.Save:
            this.ShowSuccessMessage(Resources.Msg_WEB_NotifyBarSuccessGeneral);
            return this.RedirectToActionFor<APAController>(c => c.AssessFocuses(model.ApaID));

        case ButtonSubmitValues.SaveAndClose:
        default: 
            return this.RedirectToActionFor<UtilityController>(c => c.CloseWindow());
    }
} 
```

# scala - 传递给 Scala 宏的自省参数

> ID：14325282
> 
> 赞同：12
> 
> 时间：2013-01-14T19:32:16.270
> 
> 标签：scala, macros, scala-macros

我想编写一个将案例类的实例作为参数的 Scala 宏。可以传递给宏的所有对象都必须实现特定的标记特征。

以下片段显示了标记特征和实现它的两个示例案例类：

```
trait Domain
case class Country( id: String, name: String ) extends Domain
case class Town( id: String, longitude: Double, latitude: Double ) extends Domain 
```

现在，我想使用宏编写以下代码，以避免运行时反射的繁重及其线程不安全：

```
object Test extends App {

  // instantiate example domain object
  val myCountry = Country( "CH", "Switzerland" )

  // this is a macro call
  logDomain( myCountry )
} 
```

该宏`logDomain`在不同的项目中实现，类似于：

```
object Macros {
  def logDomain( domain: Domain ): Unit = macro logDomainMacroImpl

  def logDomainMacroImpl( c: Context )( domain: c.Expr[Domain] ): c.Expr[Unit] = {
    // Here I would like to introspect the argument object but do not know how?
    // I would like to generate code that prints out all val's with their values
  }
} 
```

宏的目的应该是生成代码 - 在运行时 - 输出给定对象的所有值 (`id`和) 并打印它们，如下所示：`name`

```
id (String) : CH
name (String) : Switzerland 
```

为此，我必须动态检查传递的类型参数并确定其成员（vals）。然后我必须生成一个代表创建日志输出的代码的 AST。无论将实现标记特征“域”的特定对象传递给宏，宏都应该工作。

在这一点上，我迷路了。如果有人能给我一个起点或指向我一些文档，我将不胜感激？我对 Scala 比较陌生，在 Scala API 文档或宏指南中没有找到解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T22:44:53.060

当您使用宏时，列出案例类的访问器是一种常见的操作，我倾向于保留这样的方法：

```
def accessors[A: u.WeakTypeTag](u: scala.reflect.api.Universe) = {
  import u._

  u.weakTypeOf[A].declarations.collect {
    case acc: MethodSymbol if acc.isCaseAccessor => acc
  }.toList
} 
```

这将为我们提供 的所有 case 类访问器方法符号`A`（如果有的话）。请注意，我在这里使用的是通用反射 API——还没有必要将这个宏指定为特定的。

我们可以用其他一些方便的东西来包装这个方法：

```
trait ReflectionUtils {
  import scala.reflect.api.Universe

  def accessors[A: u.WeakTypeTag](u: Universe) = {
    import u._

    u.weakTypeOf[A].declarations.collect {
      case acc: MethodSymbol if acc.isCaseAccessor => acc
    }.toList
  }

  def printfTree(u: Universe)(format: String, trees: u.Tree*) = {
    import u._

    Apply(
      Select(reify(Predef).tree, "printf"),
      Literal(Constant(format)) :: trees.toList
    )
  }
} 
```

现在我们可以非常简洁地编写实际的宏代码：

```
trait Domain

object Macros extends ReflectionUtils {
  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  def log[D <: Domain](domain: D): Unit = macro log_impl[D]
  def log_impl[D <: Domain: c.WeakTypeTag](c: Context)(domain: c.Expr[D]) = {
    import c.universe._

    if (!weakTypeOf[D].typeSymbol.asClass.isCaseClass) c.abort(
      c.enclosingPosition,
      "Need something typed as a case class!"
    ) else c.Expr(
      Block(
        accessors[D](c.universe).map(acc =>
          printfTree(c.universe)(
            "%s (%s) : %%s\n".format(
              acc.name.decoded,
              acc.typeSignature.typeSymbol.name.decoded
            ),
            Select(domain.tree.duplicate, acc.name)
          )
        ),
        c.literalUnit.tree
      )
    )
  }
} 
```

请注意，我们仍然需要跟踪我们正在处理的特定案例类类型，但类型推断将在调用站点处理这一点——我们不需要显式指定类型参数。

现在我们可以打开一个 REPL，粘贴您的案例类定义，然后编写以下内容：

```
scala> Macros.log(Town("Washington, D.C.", 38.89, 77.03))
id (String) : Washington, D.C.
longitude (Double) : 38.89
latitude (Double) : 77.03 
```

或者：

```
scala> Macros.log(Country("CH", "Switzerland"))
id (String) : CH
name (String) : Switzerland 
```

如预期的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T22:49:28.950

据我所知，您需要解决两个问题：1）从宏参数中获取必要的信息，2）生成代表您需要的代码的树。

在 Scala 2.10 中，这些事情是通过反射 API 完成的。有没有关于Scala [2.10 的反射 API 的教程？](https://stackoverflow.com/questions/14322819/is-there-a-tutorial-on-scala-2-10s-reflection-api-yet)查看有哪些可用的文档。

```
import scala.reflect.macros.Context
import language.experimental.macros

trait Domain
case class Country(id: String, name: String) extends Domain
case class Town(id: String, longitude: Double, latitude: Double) extends Domain

object Macros {
  def logDomain(domain: Domain): Unit = macro logDomainMacroImpl

  def logDomainMacroImpl(c: Context)(domain: c.Expr[Domain]): c.Expr[Unit] = {
    import c.universe._

    // problem 1: getting the list of all declared vals and their types
    //   * declarations return declared, but not inherited members
    //   * collect filters out non-methods
    //   * isCaseAccessor only leaves accessors of case class vals
    //   * typeSignature is how you get types of members
    //     (for generic members you might need to use typeSignatureIn)
    val vals = typeOf[Country].declarations.toList.collect{ case sym if sym.isMethod => sym.asMethod }.filter(_.isCaseAccessor)
    val types = vals map (_.typeSignature)

    // problem 2: generating the code which would print:
    // id (String) : CH
    // name (String) : Switzerland
    //
    // usually reify is of limited usefulness
    // (see https://stackoverflow.com/questions/13795490/how-to-use-type-calculated-in-scala-macro-in-a-reify-clause)
    // but here it's perfectly suitable
    // a subtle detail: `domain` will be possibly used multiple times
    // therefore we need to duplicate it
    val stmts = vals.map(v => c.universe.reify(println(
      c.literal(v.name.toString).splice +
      "(" + c.literal(v.returnType.toString).splice + ")" +
      " : " + c.Expr[Any](Select(domain.tree.duplicate, v)).splice)).tree)

    c.Expr[Unit](Block(stmts, Literal(Constant(()))))
  }
} 
```

# javascript - 我是否需要查看主干中的每个元素

> ID：14325286
> 
> 赞同：0
> 
> 时间：2013-01-14T19:32:34.240
> 
> 标签：javascript, backbone.js

我有多达 63 个元素会在一个元素发生更改时更新，我是否需要为每个元素创建一个视图？处理这个问题的正确方法是什么？我的 html 中有一个树结构，其中节点与不同级别的其他节点相关。我编写了 js 代码来处理检查和更新，但那是 pre-backbone。我可以编写代码，只是不知道是否需要为每个元素提供不同的视图以及最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:47:11.553

Backbone 中的每个视图都是可视化界面单元的抽象，由业务数据（模型/集合）支持。将每个响应式元素包装为视图是可能的，但很少是最佳决策，因为这通常意味着抽象的粒度太细，这可能会导致效率和可维护性的下降。

为了有效地从 Backbone 中受益，设计师应该首先考虑全局。许多人倾向于先设计/编写静态 HTML 代码，然后再注入动态 JavaScript。我不认为这是一个好方法。最好将您的复杂系统划分为几个相对简单且定义明确的模块，将可视部分包装到视图中，将业务数据部分包装到模型/集合中。至于 DOM 元素，它们只是（视图）实现细节，自然会遵循视图的定义。

总而言之，与其决定如何用视图映射预先存在的 DOM 元素，不如决定如何用 DOM 元素实现预先设计的视图。

# web - 抓取一个所有数据都锁定在 XML 数据库中的网站？

> ID：14325287
> 
> 赞同：0
> 
> 时间：2013-01-14T19:32:37.357
> 
> 标签：web, download, screen-scraping

我正在尝试下载本网站 (http://www.afghanislamicpress.com/) 的完整存档文件。

我尝试使用 DeepVacuum（[http://www.hexcat.com/deepvacuum/index.html](http://www.hexcat.com/deepvacuum/index.html)），但该网站是动态的（我认为这是正确的词）。

因此，您提交了一个提供文章存档的表单，但它一次只能吐出 5 个（即每页），然后您必须单击通过。我想下载完整数据集的所有单篇文章，但不想手动点击。

我知道有一些简单的方法可以做到这一点，但不完全确定如何。

对新手进行数据抓取等有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:35:34.500

最直接的解决方案是联系网站所有者并请求他们允许重新发布他们的文章，并要求提供数字副本。

您当然可以自动下拉分页的内容，但这需要一些编程工作。恕我直言，最好的工具是[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

请确保并遵守您正在下载的内容的版权和许可条款。

# android - XML 问题：加载 ListView 的布局

> ID：14325291
> 
> 赞同：0
> 
> 时间：2013-01-14T19:32:43.643
> 
> 标签：android, listview

我可能只是在滥用 XML，但我正在尝试为列表视图行创建布局，但我似乎失败了。

我有这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:orientation="vertical"
    android:paddingLeft="20dp"
    android:paddingRight="20dp" >

    <TextView android:id="@+id/titleTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/detailsTextView"
        android:textSize="16sp"/>

    <TextView android:id="@id/detailsTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="12sp"/>

</RelativeLayout> 
```

希望我能够添加一个高度为 100dp 的布局，并在`ListView`其中包含两个`TextView`s。但是，当我尝试像这样设置它时：

```
public View getView(int position, View currentView, ViewGroup parent)
{
    View rowContents = LayoutInflater.from(mContext).inflate(R.layout.list_view_cell, null);
    TextView titleView = (TextView)rowContents.findViewById(R.id.titleTextView);
    titleView.setText(titles[position]);
    TextView detailsView = (TextView)rowContents.findViewById(R.id.detailsTextView);
    detailsView.setText(details[position]);

    return rowContents;
} 
```

它给了我一行，只有我的 detailsView`TextView`有一个`wrap_content`高度，似乎。titleView 无处可见，我会假设 rowContents 也没有设置，否则高度将为 100dp，对吗？

我知道我应该重用旧视图并设置其内容，但我只是快速将其作为测试。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:41:55.407

尝试设置较低的 TextView`layout_below`代替：

```
<TextView android:id="@+id/titleTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="16sp"/>

<TextView android:id="@+id/detailsTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/titleTextView"
    android:textSize="12sp"/> 
```

（否则您可能会“锁定”`titleTextView`到左上角，这可能会迫使`detailsTextView`您向下移动。）

但是您应该观看Android 的主要程序员之一的[Google Talk](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)，它提供了有关如何制作高效适配器的详细信息。

# css - ie8 css 可见性 - 固定 div 或 ul

> ID：14325293
> 
> 赞同：0
> 
> 时间：2013-01-14T19:32:58.807
> 
> 标签：css, internet-explorer-8, cross-browser, visibility

我的问题是，虽然该站点在 Chrome 中似乎运行良好，但在 IE8 版本中，固定栏（div 和 ul）是不可见的。我已经测试了 X-UA-COMPATIBLE 选项，IF IE 条件句，但我根本解决不了。我已经挣扎了大约1周，现在我很累。而且在 IE9 中，它比 chrome 慢很多。

我的网址是[http://kyuh.maddesign.co.kr](http://kyuh.maddesign.co.kr)

如果有一个我太愚蠢而无法发现的明显而简单的答案，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:32:22.103

最后，这个问题得到了解决。经过长时间的谷歌搜索和多次尝试，我找到了适合我的情况。它是.... {zoom: 1} css 选项。

```
.ie8 classname {zoom: 1} 
```

如果你有同样的问题，试试这个！

# c# - 将新属性添加到列表

> ID：14325299
> 
> 赞同：-2
> 
> 时间：2013-01-14T19:33:26.193
> 
> 标签：c#, asp.net, list

我有一个列表，并希望在填充列表后添加两个新属性。

可以这样做吗？

**C# 列表**

```
List<Usp_GetListItemsBySystemResult> PendingListOfItemsToControl = new List<Usp_GetListItemsBySystemResult>(); // Items to Control in Running memory 

// Get items to Control into running memory
FAItemsUnderControl fItemsUnderControl = new FAItemsUnderControl(ConfigurationManager.AppSettings["DatabaseConnectionString"]);
PendingListOfItemsToControl = fItemsUnderControl.getItemsUnderControl(DropDownListSystems.Text.ToString(), "ALL").ToList<Usp_GetListItemsBySystemResult>();

// Add new paramaters to the list here ???????? 
```

**要添加的 C# 新属性**

```
 public string ItemRequestStatus { get; set; } // Determines the change status if applicable
    public bool IsButtonEnabled { get; set; } // Determines if the delete button is enabled or disabled 
```

**C# 类**

```
public class Usp_GetListItemsBySystemResult
{
    public Usp_GetListItemsBySystemResult();

    public DateTime? Creation_DateTime { get; set; }
    public string Item_Backup_Location { get; set; }
    public string Item_Category { get; set; }
    public short? Item_Check_Interval_Time { get; set; }
    public DateTime? Item_Creation_DateTime { get; set; }
    public DateTime? Item_Last_Access_DateTime { get; set; }
    public DateTime? Item_Last_Modified_DateTime { get; set; }
    public string Item_Name { get; set; }
    public string Item_Path { get; set; }
    public int? Item_Size { get; set; }
    public string Item_Status { get; set; }
    public string Item_Value { get; set; }
    public string Item_Value_SHA256 { get; set; }
    public int? ItemUnderControl_ID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:16:10.117

您可以创建一个 expando 对象并添加您想要的任何内容：

```
var myx = new ExpandoObject() as IDictionary<string, Object>;
myx.Add("NewProp", string.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:40:10.277

您应该`MyList`使用继承自`List`. 像这样的东西：

```
public class MyList<T> : List<T>
{
    public string ItemRequestStatus { get; set; } // Determines the change status if applicable
    public bool IsButtonEnabled { get; set; } // Determines if the delete button is enabled or disabled

    public MyList()
    {

    }

    public MyList(IList<T> list)
        : base(list)
    {

    }
} 
```

用法：

```
FAItemsUnderControl fItemsUnderControl = new FAItemsUnderControl(ConfigurationManager.AppSettings["DatabaseConnectionString"]);
var list = fItemsUnderControl.getItemsUnderControl(DropDownListSystems.Text.ToString(), "ALL").ToList<Usp_GetListItemsBySystemResult>();
MyList<Usp_GetListItemsBySystemResult> PendingListOfItemsToControl = new MyList<Usp_GetListItemsBySystemResult>(list); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:50:17.483

您可以创建此类并使用 Linq 向此新属性添加值。

```
List<NewClass> = from x in GetListItemsBySystemResult 
                select new NewClass{
                  Creation_DateTime = x.Creation_DateTime ,
                  ...,
                  ItemRequestStatus = "Value",
                  IsButtonEnabled = "Value",
                  }; 
```

然后在这个新列表中，您已经填充了新值。

# ios - 使用 icloud 设置 magicRecord 不会重新加载持久数据

> ID：14325302
> 
> 赞同：2
> 
> 时间：2013-01-14T19:33:33.650
> 
> 标签：ios, magicalrecord

以下行无法保存任何数据，尽管 library/Application Support/Appname/Appname.sqlite 中有一个 sqlite 文件，其中包含模型中设置的标头信息。

```
 [MagicalRecord setupCoreDataStackWithiCloudContainer:@"128DBLAH422.com.company.appname.ubiquitycoredata" localStoreNamed:@"Appname.sqlite"]; 
```

*   iCloud 也被启动，因为 kMagicalRecordPSCDidCompleteiCloudSetupNotification 通知被触发。
*   我在下一次运行时丢失了所有数据，尽管我能够在整个运行时正确保存（主线程上的“完成保存”）并且所有（据我所见）数据都在内存中可用。

以下使用同一目录路径中的 sqlite 文件正确保存和持久化：

```
 [MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:@"Appname.sqlite"]; 
```

*   我想知道为什么启用 iCloud 时我会在“库/应用程序支持/应用程序名/”中看到数据库。那是对的吗？

在一个带 5.0.1 的设备上，我在第一次运行后运行时收到以下错误：

```
 Error: Can't resolve how to assign objects to stores; Coordinator does not have any stores 
```

在 iPad 和模拟器上，没有错误，但也没有数据。

另外...在使用 icloud 设置核心数据首次运行后（第一行完成启动）：

```
 [MagicalRecord setupCoreDataStackWithiCloudContainer:@"128DBLAH422.com.company.appname.ubiquitycoredata" localStoreNamed:@"Appname.sqlite"]; 
```

任何未来运行使用

```
 [MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:@"Appname.sqlite"]; 
```

而不是 icloud setup 将恢复下次运行时不会出现的数据。如果我在第一次使用 icloud 运行时添加数据，使用 icloud 重新运行并且不添加数据，然后在没有 icloud 的情况下运行，数据就在那里。

*   是否有一种在后续运行中加载商店的方法与第一次创建商店时不同？

# ruby-on-rails - Rails：如何将带有加号的参数从 url 传递到控制器？

> ID：14325305
> 
> 赞同：0
> 
> 时间：2013-01-14T19:33:44.210
> 
> 标签：ruby-on-rails, url, params, pg-search

我在轨道上并使用`pg_search`宝石。当我使用输入传递参数时，搜索工作正常。但是当我尝试将查询参数从 url 传递到我的控制器以进行一些高级过滤时，它失败了。url 类似于`http://localhost:3000/search?q=new+year`，我的控制器读取`params[:q]`为`new`而不是`new year`. 我一直在阅读文档并在谷歌上搜索了几个小时，但找不到解决我的问题的方法。如何将带有加号的参数从 url 传递到控制器？

编辑：我使用表单将参数作为隐藏字段传递。在我的视图文件中：

```
 <% if params[:q] %>
    <input name="q" type="hidden" value=<%= params[:q] %>>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:55:49.150

这与Rails和参数解析无关；您正在生成格式错误的 HTML。问题是您在`value`hidden 的属性值周围缺少引号`<input>`。

这：

```
value=<%= params[:q] %>> 
```

需要是这样的：

```
value="<%= params[:q] %>"> 
```

否则，您将产生类似`<input ... value=new year />`“年份”未作为`value`属性的一部分解析的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:01:15.710

你不应该建立这样的标签。而是使用内置的 Rails 输入标签助手。

例如：

```
<% if params[:q] %>
  <%= hidden_field_tag :q, :value => params[:q] %>
<% end %> 
```

# php - VDI 调整大小 api 不起作用

> ID：14325306
> 
> 赞同：1
> 
> 时间：2013-01-13T10:22:18.533
> 
> 标签：php, xen, api, sdk

我正在用 Php 开发一个 Xen 管理 webapp。VDI（虚拟磁盘映像）重命名 API 和调整 API 大小的用法非常相同。我还没有成功调整 VDI 的大小。你认为我在这里做错了什么。

重命名功能：

```
function xenapi_set_vdi_name($session, $ref, $name)
{
    $conn = $session[0];
    $sess = new xmlrpcval($session[1]);
    $vdi = new xmlrpcval($ref);
    $name = new xmlrpcval($name);
    $msg = new xmlrpcmsg("VDI.set_name_label", array($sess, $vdi, $name));

    $res = $conn->send($msg);

    if ($res->faultcode())
        return false;
    $val = $res->value();
    $status = $val->structmem("Status");
    if ($status->scalarval() != "Success")
        return false;

    $value = $val->structmem("Value");
    return $value->scalarval();
} 
```

重命名工作用法：

```
...
xenapi_set_vdi_name($session, $vdi, "NewNameToMyVDI");
... 
```

调整大小功能：

```
function xenapi_set_vdi_virtual_size($session, $ref, $size)
{
    $conn = $session[0];
    $sess = new xmlrpcval($session[1]);
    $vdi = new xmlrpcval($ref);
    $size = new xmlrpcval($size);
    $msg = new xmlrpcmsg("VDI.set_virtual_size", array($sess, $vdi, $size));

    $res = $conn->send($msg);

    if ($res->faultcode())
        return false;
    $val = $res->value();
    $status = $val->structmem("Status");
    if ($status->scalarval() != "Success")
        return false;

    $value = $val->structmem("Value");
    return $value->scalarval();
} 
```

无法调整大小使用：

```
...
$size = '27011707392';
settype($size, "integer");
xenapi_set_vdi_virtual_size($session, $vdi, $size);
... 
```

新的大小值适用于物理服务器上的 XEN 命令，如下所示：

```
xe vdi-resize uuid="91fe671c-93e1-4162-8128-96fedc3c215c" disk-size="27011707392" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:49:05.377

快速浏览一下：http: [//xen.org/files/XenCloud/ocamldoc/apidoc.html ?c=VDI](http://xen.org/files/XenCloud/ocamldoc/apidoc.html?c=VDI)

我认为您应该尝试使用“调整大小”或“在线调整大小”方法而不是“设置虚拟大小”。

# javascript - 缓存破坏不适用于Android浏览器

> ID：14325307
> 
> 赞同：0
> 
> 时间：2013-01-14T19:33:46.507
> 
> 标签：javascript, android, google-chrome, caching, browser-cache

缓存破坏（随机 javascript.js?1234123）在具有默认浏览器或 chrome 的 android 中不起作用。
旧文件版本仍在从缓存中加载。
我确认缓存破坏正在 PC / iPhone / iPad 上运行，但不适用于 android。

前任：

```
<script type="text/javascript" src="js/main.js<?php echo '?'.rand(); ?>"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:02:05.790

问题是我没有正确刷新移动开发工具

# linux - 如何将 Apache Ant 安装到 Linux (Redhat CentOS) 服务器？

> ID：14325308
> 
> 赞同：5
> 
> 时间：2013-01-14T19:33:49.933
> 
> 标签：linux, ant, centos

就像前言一样，如果我遗漏了一些明显的东西，对不起。我主要是一名 PHP/Python 程序员，但正在为朋友的启动做服务器配置。

我只需要在我朋友的 Linux VPS 服务器上安装 Apache Ant（他想在服务器上编译 Android 应用程序——只是我已经设法获得了必要的 JDK 和 LAMP）。

当我对如何获取 Ant 进行一些挖掘时，这就是我真正满足我需求的全部内容：http: [//ant.apache.org/manual/install.html#jpackage](http://ant.apache.org/manual/install.html#jpackage)

有人可以给我一些推动力吗？也许是带有适当链接的 wget？任何事情都值得赞赏。

在此先感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:26:42.477

您是否在 RPM 数据库中搜索过 apache-ant 包？

如果您不使用 RPM 来安装软件包（为什么不使用），您可以直接从[Apache](http://ant.apache.org/bindownload.cgi)下载 Ant 。（请注意，也有 JPackage RPM 的说明。以防万一您改变主意不使用 RPM。

Ant 是一个 Java 程序，因此您必须安装 Java JDK（Ant 将在 JRE 下运行，但您无法使用它构建 Java 应用程序），并确保该`java`命令位于您的路径中。但是，这也意味着每个平台都没有特殊版本的 Ant 二进制文件，因此安装起来要容易得多。

下载 Ant 存档并将其解压缩到合适的目录（`/opt`或`/usr/local`或`/usr/lib`或您使用的任何标准）。在档案中，解压后将是一个`bin`目录。下的那些文件`bin`主要是shell脚本（以Windows Batch文件结尾的`*.bat`，你可以忽略它们）。执行那些。

我喜欢将 Apache-Ant`bin`目录下的这些文件符号链接到目录下的类似名称`/usr/local/bin`。这样，您无需`/usr/local/apache-ant-1.8.3/bin`将`$PATH`.

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:40:34.213

只需按照您引用的页面顶部的“短篇故事”部分：

要快速启动并运行 Ant 的二进制版本，请执行以下步骤：

确保您已安装 Java 环境，有关详细信息，请参阅[系统要求](http://ant.apache.org/manual/install.html#sysrequirements)。

下载蚂蚁。有关详细信息，请参阅[二进制版本](http://ant.apache.org/manual/install.html#getBinary)。

将下载的文件解压缩到一个目录中。

将环境变量 JAVA_HOME 设置为您的 Java 环境，将 ANT_HOME 设置为您将 Ant 解压缩到的目录，并将 ${ANT_HOME}/bin (Unix) 或 %ANT_HOME%/bin (Windows) 添加到您的 PATH。有关详细信息，请参阅[设置](http://ant.apache.org/manual/install.html#setup)。

或者，从 ANT_HOME 目录运行 ant -f fetch.xml -Ddest=system 以获取大多数需要它们的 Ant 任务的库依赖关系。如果不这样做，许多依赖的 Ant 任务将不可用。有关 -Ddest 参数的详细信息和其他选项，请参阅[可选任务](http://ant.apache.org/manual/install.html#optionalTasks)。

（可选）添加任何所需的 Antlib。有关列表，请参阅[Ant 库](http://ant.apache.org/antlibs/proper.html)。请注意，如果您需要，上面列表中的链接将提供有关每个步骤的更多详细信息。或者您可以继续阅读本文档的其余部分。

# c# - 时间：2019-05-10 标签：c#boolean operator - normal vs. short-circuit

> ID：14325311
> 
> 赞同：8
> 
> 时间：2013-01-14T19:34:11.477
> 
> 标签：c#

关于布尔运算符'|'的问题 和'||'。我能发现这两个运算符之间的唯一区别是；使用“||”时 [如果左侧为真，则不会计算表达式的右侧。](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.71%29.aspx)

在个人偏好之外，为什么要使用“|” 在'||' 用于布尔测试？

```
if(true | false)
{
do something
}

vs 
if (true || false)
{
do something
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T19:38:06.243

如果操作有副作用，这主要是一个问题：

考虑以下：

```
using(IEnumerator iterator1 = args.GetEnumerator())
using (IEnumerator iterator2 = args.GetEnumerator())
{
    while (iterator1.MoveNext() | iterator2.MoveNext())
    {
        //do stuff
    }
} 
```

因为`MoveNext`操作会导致副作用，所以无论第一个是否为真，执行的*双方都*可能很重要。`|`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T19:36:49.550

> 为什么要使用'|' 在'||' 用于布尔测试？

如果（出于某种原因）右侧有您需要发生的副作用。

然而，这通常不是好的做法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:35:48.160

> 在个人偏好之外，为什么要使用“|” 在'||' 用于布尔测试？

正是因为您*可能*希望双方都被评估。无论哪种方式，您都可能需要发生副作用。

这很少见，但它是可行的。

# entity-framework - 您是否需要在 .Add() 之前加载实体框架集合的内容？

> ID：14325314
> 
> 赞同：2
> 
> 时间：2013-01-14T19:34:24.620
> 
> 标签：entity-framework, collections, orm

我有一个实体模型

```
class Package
{
...

    virtual ICollection<Owner> Owners { get; set; }
} 
```

并正在实施一项`AddOwner()`操作。

实体框架是否要求我检索我的包对象，*包括所有者*，`.Include(p => p.Owners)`以便我调用`p.Add(newOwner)`；并将更改保存回数据库？

**第二个问题**：直觉并没有引导我在这里找到答案，因为我不知道我的直觉是基于 CLR 集合还是基于实体框架的某些原则；是否有 EF 的原则可以帮助我更好地理解事物而不是思考 CLR 集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:47:57.927

只要您的`Package`对象附加到上下文，该`Owners`属性就会设置为`EntityCollection<Owner>`. 无论是否已加载，通过该属性进行的更改都将在您的上下文中标记为更改，`SaveChanges()`并将保存这些更改。

请记住，您的`Owner`对象已经需要成为上下文的一部分，如果它是现有所有者的话。如果不是，EF 将假定您正在尝试保存一个新的`Owner`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:39:44.303

业主迟早必须指出一些具体的东西，当然在你尝试添加任何东西之前。EF 知道通过 ICollection 接口查看此属性。

您可以执行以下操作：

```
var p = new Package { SomePackageProperty = "Some value",
Owners = new List<Owner>>() { new Owner { SomeOwnerProperty = "Some other value" } } };

yourContext.DbSet<Package>().Add(p); 
```

但这只是一个最好的猜测，考虑到问题中提供的小片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:42:56.967

我想你正在考虑包括 Owners .Include(p => p.Owners)，然后说 p.Owners.Add(new_owner) 添加一个新的 Owner，这将在 .SaveChanges 之后起作用。

# android - 如何在 XML 文件中设置选中/未选中按钮的背景

> ID：14325317
> 
> 赞同：12
> 
> 时间：2013-01-14T19:34:32.230
> 
> 标签：android, xml, button

我有自定义按钮，它们应该具有不同的背景，具体取决于它们是否被选中。我想知道是否有办法在 XML 文件中说明这一点。我有一个摄氏温度按钮和一个华氏温度按钮。我希望它可以在选择一个按钮的情况下工作，它保持“按下”状态并且无法单击，而可以按下另一个按钮。

```
 <Button
            android:id="@+id/celsiusButton"
            android:text="C"
            android:background="@drawable/button_unpressed_shape"
            android:layout_weight="3"
            android:layout_height="match_parent"
            android:layout_width="0dip"
            android:gravity="center" />

        <Button
            android:id="@+id/fahrenheitButton"
            android:text="F"
            android:background="@drawable/button_unpressed_shape"
            android:layout_weight="3"
            android:layout_height="match_parent"
            android:layout_width="0dip"
            android:gravity="center" /> 
```

摄氏度按钮默认为选中状态。我尝试在我的代码中像这样处理它，但它似乎很混乱：

```
 tempText = (TextView) findViewById( R.id.temperatureId );
    celsiusButton = (Button) findViewById( R.id.celsiusButton );
    celsiusButton.setBackgroundDrawable( getResources().getDrawable( R.drawable.button_pressed_shape ) );
    celsiusButton.setClickable( false );

    celsiusButton.setOnClickListener( new OnClickListener() {
        public void onClick(View v) {
            if( hasRead ) {
                    celsiusButton.setBackgroundDrawable( getResources().getDrawable( R.drawable.button_pressed_shape ) );
                    celsiusButton.setClickable( false );
                    fahrenheitButton.setBackgroundDrawable( getResources().getDrawable( R.drawable.button_unpressed_shape ) );
                    fahrenheitButton.setClickable( true );
                    temperature = ( ( ( temperature - 32 ) * 5 ) / 9 );
                    tempText.setText( Double.toString( temperature ).substring( 0, ( Double.toString( temperature ).length() - 2 ) ) + " C" );
            }
        }       
    });

    fahrenheitButton = (Button) findViewById( R.id.fahrenheitButton );
    fahrenheitButton.setOnClickListener( new OnClickListener() {
        public void onClick( View v ) {
            if( hasRead ) {
                fahrenheitButton.setBackgroundDrawable( getResources().getDrawable( R.drawable.button_pressed_shape ) );
                celsiusButton.setBackgroundDrawable( getResources().getDrawable( R.drawable.button_unpressed_shape ) );
                celsiusButton.setClickable( true );
                fahrenheitButton.setClickable( false );
                temperature = ( ( temperature * 9 ) / 5 ) + 32;
                tempText.setText( Double.toString( temperature ).substring( 0, ( Double.toString( temperature ).length() - 2 ) ) + "° F" );
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T19:38:04.993

如果选中或未选中，您应该使用切换按钮[https://developer.android.com/reference/android/widget/ToggleButton.html](https://developer.android.com/reference/android/widget/ToggleButton.html)

请注意，仍然有 4 个状态

您在这样的选择器中定义它们

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:state_pressed="true" android:drawable="@drawable/likeactivepressed" />
    <item android:state_pressed="true" android:drawable="@drawable/likeinitialpressed"/>
    <item android:state_checked="true" android:drawable="@drawable/likeon"/>
    <item android:drawable="@drawable/likeinitial"/>
</selector> 
```

然后像这样在你的按钮中定义它

```
 android:background="@drawable/like_button" 
```

**编辑**

您实际上可以只使用 1 个按钮供您使用。或者，您可以使用 2 个单选按钮

[https://developer.android.com/reference/android/widget/RadioButton.html](https://developer.android.com/reference/android/widget/RadioButton.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T19:48:28.733

这用于在按下或聚焦时更改按钮的颜色在您的可绘制文件夹中写入此代码

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Button Focused-->
    <item   android:state_focused="true"
            android:state_pressed="false"
            android:drawable="@drawable/login_hover"
            />
<!-- Button Focused Pressed-->
    <item   android:state_focused="true"
            android:state_pressed="true"
            android:drawable="@drawable/login_hover"
            />
<!-- Button Pressed-->
    <item   android:state_focused="false"
            android:state_pressed="true"
            android:drawable="@drawable/login_hover"
            />
<!-- Button Default Image-->
    <item   android:drawable="@drawable/login_bg"/>

</selector 
```

[http://nishantvnair.wordpress.com/2010/10/05/change-color-of-button-on-click-android/](http://nishantvnair.wordpress.com/2010/10/05/change-color-of-button-on-click-android/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T22:20:01.333

要更改背景图像：

```
public void onClick(View v) {
   if(v == ButtonName) {
     ButtonName.setImageResource(R.drawable.ImageName);
   }
} 
```

或者，使用 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true"
   android:drawable="@drawable/login_selected" /> <!-- pressed -->
  <item android:state_focused="true"
   android:drawable="@drawable/login_mouse_over" /> <!-- focused -->
  <item android:drawable="@drawable/login" /> <!-- default -->
</selector> 
```

在 OnClick 中，只需添加以下代码：

```
ButtonName.setBackgroundDrawable(getResources().getDrawable(R.drawable.ImageName)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:42:42.137

是的，您可以`Drawable`根据`View`呈现它的状态选择一个。

这是一种`Selector`可绘制对象的确切目的。在此处查看示例和指南：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

基本上，每个`item`选择器都定义了哪些状态具有哪些值。它还定义了哪个可绘制对象代表这组值。

接下来，您可以`View`从代码中设置 a 的状态，例如。

```
celsiusButton.setPressed(true); 
```

这在实践中非常有用，因为您将 UI 设置与模型/控制器分开。当代码不负责以直接方式更改应用程序的 UI 时，维护大量可绘制对象会变得更容易。

我的工作选择器的一个例子是：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/ic_background_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/ic_background_focused" android:state_focused="true"/>
    <item android:drawable="@drawable/ic_background_default" />

</selector> 
```

此示例根据其状态呈现按钮背景。

# polygon - 多边形重叠，具体情况

> ID：14325318
> 
> 赞同：1
> 
> 时间：2013-01-14T19:34:33.697
> 
> 标签：polygon, overlap

我已经实现了一个函数来检查两个多边形 p1 和 p2 的重叠，以验证 p1 是否与 p2 重叠，该函数获取 p1 的每个边缘并测试它的一个点是否在 p2 内部而不是 p2 的边缘（它们可以共享一条边）。

该函数工作得很好，问题是它被调用了一千次，它使我的程序非常慢，因为它必须逐点迭代每个边缘，我只检查 4 个多边形重叠的情况，它们是：

如果一个三角形与一个三角形重叠。

如果三角形与矩形重叠。

如果三角形与平行四边形重叠。

如果一个矩形与一个平行四边形重叠。

有没有更简单快捷的方法来检查这些重叠情况是否发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:04:55.143

我在想你真正要找的只是[线段相交](http://en.wikipedia.org/wiki/Line_segment_intersection)的地方。这可以在 O((N+k) log N) 中完成，其中 N 是线段的数量（大致是顶点的数量），k 是交点的数量。使用 Bentley-Ottmann 算法。这可能最好使用所有多边形来完成，而不是一次只考虑两个。

麻烦在于跟踪哪些线段属于哪个多边形。还有一个问题是，考虑所有线段可能比只考虑两个多边形更糟糕，在这种情况下，一旦你得到一个有效的交叉点，你就会停下来（有些交叉点可能不符合你的要求，不能算作重叠）。这种方法可能更快，尽管它可能需要您尝试不同的多边形组合。在这种情况下，最好简单地考虑所有线段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:46:27.230

您可以通过首先检查边是否与多边形的边界框相交来加快相交测试。查看 Line2D.interSects(Rectangle2D rect)。

如果您有一万个多边形，那么您可以通过将多边形存储在空间索引（区域四叉树）中来进一步加快速度。然后，这会将搜索限制为视图多边形，而不是蛮力搜索所有。但这可能只有在您经常需要搜索时才有意义，而不仅仅是在程序启动时搜索一次。

# scheme - 如何计算一对方案中的单个元素？

> ID：14325320
> 
> 赞同：1
> 
> 时间：2013-01-14T19:34:37.687
> 
> 标签：scheme, racket

```
(cons 2 (cons ( cons 2 3 ) (cons 4 5 ))) 
```

这给了我一个看起来像这样的列表：`(2 (2 . 3) 4 . 5)`当我尝试计算这个列表中的元素数量时，输出是`3`预期的。

如何计算一对中单个元素的数量？在这种情况下的输出应该是`5`例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:10:36.100

这是一个可能的解决方案，问题本质上是询问列表结构中的原子数（不一定是空终止的正确列表）：

```
(define (count-all seq)
  (cond ((null? seq) 0)
        ((not (pair? seq)) 1)
        (else (+ (count-all (car seq))
                 (count-all (cdr seq)))))) 
```

它适用于这样的元素序列：

*   如果序列为空，则它有零个元素
*   如果序列不是一个 cons 单元（一对元素），那是因为它是一个元素 - 一个原子
*   否则添加序列的`car`和的元素`cdr`

对于任意嵌套的列表结构，它可以按预期工作：

```
(count-all '(2 (2 . 3) 4 . 5))
=> 5

(count-all '(1 (2 . (3 (4 . 5) 6)) 7 . 8))
=> 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:24:19.197

对于任意深度嵌套的列表，我们可以递归地解决这个问题。

```
(define (atom? x) (not (pair? x)))

(define (count-atoms lst)
    (cond ((null? lst) 0) ; nothing to count, return 0
          ((atom? lst) 1) ; lst contains only one thing, return 1
          (else           ; otherwise, lst contains multiple elements
             (+ (count-atoms (car lst))       ; add the number of atoms in the first position
                (count-atoms (cdr lst))))))   ; to the number of atoms in the rest of the list 
```

**编辑：** 这是奥斯卡答案的重复。当我点击提交时，我没有看到他已经回答了，但是我觉得这些评论很有用，所以我会把它留在这里。

# javascript - JavaScript 模式和垃圾收集

> ID：14325323
> 
> 赞同：1
> 
> 时间：2013-01-14T19:34:56.040
> 
> 标签：javascript, memory-management, memory-leaks, garbage-collection

一段时间以来，我一直在使用两个版本的 JavaScript 模式，我从 Addy Osmani 那里学到了称为模块模式的模式。[在这里查看](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)

该模式的第一个版本使用对象字面量：

```
var x = {
  b: function() {
    return 'text';
  },
  c: function() {
    var h = this.b();
    h += ' for reading';
  }
}
alert(x.b()) // alerts text. 
```

而另一个版本使用自执行功能：

```
var y = (function() {
     var first = 'some value';
     var second = 'some other value';
     function concat() {
       return first += ' '+second;
     }

     return {
       setNewValue: function(userValue) {
         first = userValue;
       },
       showNewVal: function() {
         alert(concat());
       }
     }
})();

y.setNewValue('something else');
y.showNewVal(); 
```

鉴于上面的示例，这两种模式中的任何一种（不考虑任何事件侦听器）是否对垃圾收集友好（考虑到它们引用自己的方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:38:32.793

不，就什么时候变得无法访问而言没有区别。

两者都使用将 API 固定到位的全局变量，因此在框架被卸载并从历史记录中删除之前不会被收集。

第二个分配并保留一个额外的激活框架（用于模块本地`first`和`second`），但这是一个很小的成本。

# c# - .Net cookie 不断返回，到期时间为零

> ID：14325328
> 
> 赞同：2
> 
> 时间：2013-01-14T19:35:24.183
> 
> 标签：c#, asp.net, visual-studio-2012, cookies

我在使用 .Expires cookie 属性时遇到问题。当我读回 cookie 时，它​​一直在 01/01/0001 12:00 AM 回来。

这是代码。我在保存下方的检索中添加仅用于调试目的。保存和检索发生在同一文件的不同位置。我故意没有指定域，因为我希望 cookie 在站点范围内存在。

数据显示得很好，只是没有过期。

注意：我正在使用 .Net Framework 4 在本地主机下运行的 Visual Studio 2012 下进行测试。

```
System.Web.UI.Page oPage = this.Page;

HttpCookie oCookie = new HttpCookie("UserData");

// Set the cookie value.
oCookie.Secure = false;
oCookie["Field1"] = strField1;
oCookie["Field2"] = strField2;
oCookie.Expires = DateTime.Now.AddDays(1);

// Add the cookie.
oPage.Response.Cookies.Add(oCookie);

// Get the cookie.
oCookie = new HttpCookie("UserData");
oCookie = oPage.Request.Cookies["UserData"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:40:18.050

除了 cookie 名称和值之外，浏览器不会向服务器发送任何内容。设置 cookie 后，无法在请求中检索所有其他属性（过期、域、路径、httponly...）。

更普遍的处理方法是在用户尝试访问受保护的资源时将用户重定向到登录页面，并显示一些消息，如“您需要登录才能查看此页面。如果您以前登录过，您的会话可能已过期。”

（另请注意，您应该在每个请求上重新设置 cookie，以便用户在继续使用该站点时不会被注销。从您的代码中不清楚您是否这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:50:57.100

我只是对我的问题进行了更多的谷歌搜索，并看到了这个链接，这是 Stackoverflow 上的另一个帖子。

[Cookie 总是过期的](https://stackoverflow.com/questions/735836/cookies-are-always-expired)

我也在使用构造进行验证：

```
if (cookie != null && cookie.Expires > DateTime.Now)... 
```

正如一些人指出的那样，如果您无法再检索 cookie，则会发生过期检查。这对于建造这个架构的人来说是非常愚蠢的。是的，也许应该有 RequestCookie 和 ResponseCookie，区别在于 ResponseCookie 没有到期日期。

回复我的人告诉我，不仅仅是过期，其他领域也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T09:19:45.867

在 C# 代码中，如果使用表单身份验证，您可以使用以下代码查看 cookie 是否持久
`bool IsCookiePersistent = ((FormsIdentity)User.Identity).Ticket.IsPersistent;`

这里`Ticket`将返回`FormsAuthenticationTicket`具有`Expiration`DateTime 属性的那个。

# mysql - 加权转台设计

> ID：14325333
> 
> 赞同：0
> 
> 时间：2013-01-14T19:35:35.980
> 
> 标签：mysql

我在这个非常简单的项目上遇到了困难。也许是因为今天是星期一，我不确定。

我有一个看起来像这样的表：

```
id        |        weight        |    hits
------------------------------------------------
    1     |         4            |     0
    2     |         1            |     0
    3     |         2            |     0 
```

显然，每次选择特定记录时，命中列都会增加 1（我们将从 PHP 脚本中运行此更新）。

我怎样才能最好地按重量检索这些记录？我的意思是，如果我运行查询 15 次，我希望返回以下 ID：

```
1
1
1
1
3
3
2
1
1
1
1
3
3
2
1 
```

我们有一个简单的公式，我们在网上找到了一个随机加权的结果，但是我们没有运行足够的公式来统计平衡结果，所以我们需要像上面描述的那样做一个简单的旋转。

我知道这是一个很容易解决的问题，但我今天很难想出最好的方法。

我希望我对问题的描述已经足够清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:10:39.767

除非我遗漏了一些东西（毕竟这里也是星期一），否则你不能按`hits / weight`and排序`LIMIT 1`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:43:13.377

跑：

```
SELECT id FROM tbl WHERE weight - hits > 0 ORDER BY weight DESC LIMIT 0,1 
```

使用最后一个结果，运行：

```
UPDATE tbl SET hits = hits + 1, total_hits = total_hits + 1 WHERE id = (THE RESULT); 
```

然后运行

```
SELECT (Sum(weight-hits)) FROM tbl 
```

如果结果 = 0

```
UPDATE tbl SET hits = 0 
```

**编辑：**

可以通过两个查询来实现：

```
$query="SELECT id FROM tbl, weight - hits  AS diff  WHERE weight - hits > 0 ORDER BY weight DESC";
$result=mysql_query($query);
$num=mysql_numrows($result);

$i=0;
$id=mysql_result($result,$i,"id");
$diff =0;
while ($i < $num) {
$diff= $diff + mysql_result($result,$i,"diff");
++$i;
}

if( $diff = 1 and $i = 1);
$query2="UPDATE tbl SET hits = 0, total_hits = total_hits + IF(id='$id',1,0)";
else{ 
$query2="UPDATE tbl SET hits = hits + 1, total_hits = total_hits + 1 WHERE id = '$id'";
}

mysql_query($query2); 
```

# c# - 具有抽象类和接口的泛型类型

> ID：14325336
> 
> 赞同：0
> 
> 时间：2013-01-14T19:35:44.400
> 
> 标签：c#, generics, inheritance

我有三个类，一个基类采用必须是抽象类的子类的泛型类型，而抽象类又采用必须实现接口的泛型类型。

为了测试，我有一个表单，它将启动基类，给出抽象类的子类和接口的实现。这是我的类声明，并调用基类构造函数。

```
 public class BaseClass<AC_IC> where AC_IC : AbstractClass<InterfaceClass>

    public abstract class AbstractClass<IC> where IC: InterfaceClass

    public interface InterfaceClass

    public class ExtendsAbstractClass<II> : AbstractClass<InterfaceClass>

    public class ImplementsInterface : InterfaceClass

    vBC = new BaseClass<ExtendsAbstractClass<ImplementsInterface>>(); 
```

我相信我可以使用以下调用从 BaseClass 和 AbstractClass 中创建继承/实现类的实例（只有一个类在构造函数中有参数）

```
 (AC_IC) Activator.CreateInstance(typeof(AC_IC), new object[] { vParameter});
    (II) Activator.CreateInstance(typeof(II)); 
```

编辑：上述调用在 BaseClass 和 AbstractClass 内，因此不知道我随后将使用哪些类，因此不能通过类名指定，对于一系列实现，可能有许多不同的类对。

对于这两个构造函数调用，我都会收到错误“无法创建抽象类的实例”和“无法创建接口的实例”。如何让编译器知道我作为泛型类型传递的类是`where`子句中类的子类，因此可以创建。

任何想法社区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:41:24.613

错误不言自明：您不能创建抽象类型的实例。

您可以*将*结果类型转换回基本类型，但：

```
 (AC_IC) Activator.CreateInstance(
         typeof(BaseClass<ExtendsAbstractClass<ImplementsInterface>), 
         new object[] { vParameter}); 
```

编辑：

```
public TFinal MakeMeA<TOuter,TInner,TInnermost,TFinal>(params object[] additionalCrap)
{
    // figure out innermost type
    var innermostType = typeof(TInner).MakeGenericType(typeof(TInnermost));
    // work outwards
    var nextLevel = typeof(TOuter).MakeGenericType(innermostType);
    // figure out what the heck we're making
    var returnType = typeof(TFinal).MakeGenericType(nextLevel);

    // And make one of those    
    return (TFinal)Activator.CreateInstance(returnType, additionalCrap);
} 
```

# mysql - mysql试图用一对多表进行计数

> ID：14325339
> 
> 赞同：0
> 
> 时间：2013-01-14T19:35:55.573
> 
> 标签：mysql

我有像这样的桌子

```
products            product_attributes
==================  ========================================
| id | name      |  | id | product_id | attribute | value  |
==================  ========================================
| 1  | product 1 |  | 1  | 1          | min       | 2    |
| 2  | product 2 |  | 2  | 1          | max       | 5    |
| 3  | product 3 |  | 3  | 2          | min       | 10   |
| 3  | product 3 |  | 4  | 2          | max       | 15   |
| .. | ...       |  | 5  | 3          | min       | 1    |
==================  | 6  | 3          | max       | 100  |
                    | .. | ...        | ...       | ...  |
                    ======================================== 
```

我想获得一个范围内的所有产品我可以成功地获得一个范围内的ID列表

```
SELECT p.id 
  FROM `products` p INNER JOIN `product_attributes` AS pa ON p.id = pa.product_id   
  WHERE  pa.`min` <= 5 AND  pa.`max` >= 5 GROUP BY p.id 
```

这给了我需要的 id 列表。我无法开始工作的是获取 id 的总数而不是列表，所以我不能使用 group by 然后当我这样做时它会弄乱计数。

做到这一点的唯一方法是在子选择中使用上面的选择并计算结果吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:39:58.300

只需在查询中替换`p.id`为。`COUNT(1)`

```
SELECT COUNT(1)
FROM `products` p
INNER JOIN `product_attributes` AS pa
    ON p.id = pa.product_id   
WHERE  pa.`min` <= 5
    AND  pa.`max` >= 5
GROUP BY p.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:01:10.533

鉴于上面的结构，其中 min 和 max 在不同的行上，我会使用这个：

```
select count(id) from (
  select p.id
  from
    `products` p INNER JOIN `product_attributes` AS pa
    ON p.id = pa.product_id
  where (pa.attribute='min' and pa.value>=5) OR
        (pa.attribute='max' and pa.value<=5)
  group by p.id
  having count(*)=2
) s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T19:48:26.697

一种方法是在尝试从中提取任何信息之前对 eav 模型应用规范化的饰面。在这种情况下，可能看起来像这样：

```
 SELECT product_id
      , MAX(CASE WHEN attribute = 'min' THEN value END) `min` 
      , MAX(CASE WHEN attribute = 'max' THEN value END) `max` 
   FROM product_attributes
  GROUP   
     BY product_id;

 +------------+------+------+
 | product_id | min  | max  |
 +------------+------+------+
 |          1 |    2 |    5 |
 |          2 |   10 |   15 |
 |          3 |    1 |  100 |
 |        ... |  ... |  ... |
 +------------+------+------+ 
```

现在，你又问了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:52:28.537

从您的选择语句中尝试选择计数（*）。

# c# - Symfony2 (FOSUserBundle) SHA512 哈希与 C# SHA512 哈希不匹配

> ID：14325341
> 
> 赞同：4
> 
> 时间：2013-01-14T19:36:02.997
> 
> 标签：c#, asp.net, symfony, asp.net-mvc-4, fosuserbundle

我在我的网络应用程序（带有 FOSUserBundle 的 Symfony2）上创建了一个帐户，并使用密码“lolwut”（不带引号）注册。

这些是我的 security.yml 配置中的设置：

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface:
            algorithm:   sha512
            iterations: 1
            encode_as_base64: false 
```

结果数据：

```
Hashed password:
f57470574dbf29026821519b19539d1c2237e4315d881fa412da978af554740c6b284062a9a4af7d0295d18ebea8ef2e152cf674b283f792fe0b568a93f969cf
Salt:
kuc5bixg5u88s4k8ggss4osoksko0g8 
```

现在，由于迭代设置为 1，我假设在 C# 中的 SHA512 中编码“lolwut”会给我相同的结果，这是我的逻辑：

```
string salt = "kuc5bixg5u88s4k8ggss4osoksko0g8";
string input = "lolwut";
string passAndSalt = String.Concat(input, salt);

System.String Hashed = System.BitConverter.ToString(((System.Security.Cryptography.SHA512)new System.Security.Cryptography.SHA512Managed()).ComputeHash(System.Text.Encoding.ASCII.GetBytes(passAndSalt))).Replace("-", "");
return passAndSalt + "<br>" + Hashed; 
```

但是，这将返回与 FOSUserBundle 散列密码完全不匹配的以下值：

```
82E8CA0408B23DB50EB654EDB50A7926AC73613184054DB82FB6D67CD4186B7A045D265AEDE6E3852CD85B981F15F6615C1C0C6FBF443B1672DF59DE23557BD9 
```

我知道我一定在某个地方做错了什么，但我终其一生都无法弄清楚它是什么，这让我发疯了。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:43:15.927

Symfony 将密码和盐合并为`password{salt}`，因此这段代码将返回相同的哈希：

```
 string salt = "kuc5bixg5u88s4k8ggss4osoksko0g8";
  string input = "lolwut";
  string passAndSalt = String.Format("{0}{{{1}}}", input, salt);

  System.String Hashed = System.BitConverter.ToString(((System.Security.Cryptography.SHA512)new System.Security.Cryptography.SHA512Managed()).ComputeHash(System.Text.Encoding.ASCII.GetBytes(passAndSalt))).Replace("-", "");
  // Hashed.ToLower() 
```

# java - 如何在 Eclipse 中跳转到超级实现

> ID：14325343
> 
> 赞同：7
> 
> 时间：2013-01-14T19:36:12.653
> 
> 标签：java, eclipse

给定代码段：

```
@Override
public String someMethod()
{
  return "foo";
} 
```

Eclipse中有没有办法快速跳转到super中的实现？由于它用@Override 注释，我认为Eclipse 会知道如何做到这一点。

现在作为一个笨拙的解决方法，我将输入“super.someMethod();” 作为第一行（即使我不需要它），单击该行上的方法名称，然后按 F3。

我正在为 Solaris 使用 Eclipse 3.4.1 (Ganymede)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T19:43:21.817

可以使用快捷键：`Alt`+N、S

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T19:42:06.640

方法调用行左侧应该有一个小空心箭头，用于实现接口方法，方法调用行左侧应该有一个实心小箭头，用于实现方法覆盖。

左键单击空心箭头将带您进入界面方法。

左键单击实心箭头会将您带到被覆盖的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:54:51.630

我喜欢 Reimeus 写的 Alt+N, S。另一个不需要光标位于相关函数中的选项是使用弹出大纲视图：

*   `Ctrl-O`打开大纲
*   `Ctrl-O`显示继承的成员
*   键入方法名称以找到它

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T19:42:24.357

是：将鼠标悬停在方法名称上，按住 CTRL，然后从出现的菜单中选择“打开超级实现”

# java - 处理 ServletRequestWrapper 中 CharConversionException 的日志

> ID：14325351
> 
> 赞同：2
> 
> 时间：2013-01-14T19:36:51.640
> 
> 标签：java, servlets, tomcat6, catalina.out

我正在使用在 Tomcat 6 服务器中运行的 webapp。对于一些请求（来自特定类型的客户端）[，ServletRequestWrapper 的方法 getParameter 在](http://docs.oracle.com/javaee/1.4/api/javax/servlet/ServletRequestWrapper.html#getParameter%28java.lang.String%29)内部处理所有 CharConversionException 日志记录到我的东西是关于该异常的服务器活动信息的标准输出。问题是有时它可以记录敏感数据（作为密码）......例如，它可以记录如下内容：

```
INFO: Character decoding failed. Parameter [pw] with value [holaÃÂ£ÃÂ£%20%222522%2] has been ignored. Note that the name and value quoted here may be corrupted due to the failed decoding. Use debug level logging to see the original, non-corrupted values.
java.io.CharConversionException: EOF
    at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:80)
    at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:46)
    at org.apache.tomcat.util.http.Parameters.urlDecode(Parameters.java:410)
    at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:370)
    at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:217)
    at org.apache.catalina.connector.Request.parseParameters(Request.java:2647)
    at org.apache.catalina.connector.Request.getParameter(Request.java:1106)
    at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:355)
    at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:158)
    at myClasss (myClass.java:666) 
```

我不想解决服务器中的问题，因为我看到是客户端的问题，客户端必须解决。我期待“隐藏”与日志中输出的错误参数相关的值。我不是tomcat日志系统以及如何配置它的专家，我访问并阅读了一些材料（[this](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)和[this too](http://onjava.com/lpt/a/2406) ..）但找不到指向正确方向的线索（如果有的话.. ）。

我已经看过[生产中的这个 ServletRequestWrapper 或 ServletResponseWrapper 了吗？](https://stackoverflow.com/questions/2279165/servletrequestwrapper-or-servletresponsewrapper-in-production)，但没有关于如何修改此内部消息的线索。

好吧，谢谢你的一切！

问候

胜利者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:48:54.290

前两句注释：

1.  错误的编码严格来说*不是客户端问题；*只是设置不同。所以请允许我指出[一些服务器设置](http://tech.top21.de/techblog/20100421-solving-problems-with-request-parameter-encoding.html)。此外，搜索“servlet 过滤器字符编码”将产生一些 ServletFilters，它们为 getRequestParameter 设置请求编码权。（GET 功能不同于 POST！）

2.  最后的“%2”有点可疑，不是吗。

输出看起来像日志输出，实际上我在 Parameters.java 中找到`org.apache.juli.logging.Log`了。这又是一个[Tomcat 日志库](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)，似乎基于 java.util.logging，您可以在`WEB-INF/classes/logging.properties`for中将级别设置为 FATAL/ERROR `org.apache.tomcat.util.http.Parameters=SEVERE`。

# c# - DotNetOpenAuth ClaimsResponse 返回 Null 与统一库 v4.0 ++ Google OpenId

> ID：14325354
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:37:03.153
> 
> 标签：c#, asp.net-mvc-4, openid, dotnetopenauth

我对此感到非常困惑，我知道周围有几个类似的重复帖子，阅读了很多内容，并且我对使用 SREG 和 AX 信息、web.xml 的 ClaimsResponse （至少我认为我知道）有所了解。启用 AXFetchAsSregTransform 的配置配置，如何使用 ClaimsRequest 通过 DemandLevel.Require 获取 Google 电子邮件。我想要做的是让我的示例在 v4.0 之后使用统一的 DotNetOpenAuth.dll 库来工作（使用来自 [strathweb](http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/)的示例）作为对我的项目的单一引用而不是 nuget 包。示例适用于 DotNetOpenAuth-3.4.7.11121 版本。如果有人能给我一些关于这个问题的信息，我将不胜感激。当我创建请求并使用 DotNetOpenAuth.dll v3.4.7 时一切顺利：

> public IAuthenticationRequest ValidateAtOpenIdProvider(string openIdIdentifier, Realm realm, Uri returnurl)
> 
> {
> 
> IAuthenticationRequest openIdRequest = openId.CreateRequest(Identifier.Parse(openIdIdentifier), realm, returnurl);
> 
> ```
>  var fields = new ClaimsRequest()
>         {
>             Email = DemandLevel.Require,
>             FullName = DemandLevel.Require,
>             Nickname = DemandLevel.Require
>         };
>         openIdRequest.AddExtension(fields);
> 
>         return openIdRequest;
>     } 
> ```

并将用户重定向到服务提供商：

> var response = openidemembership.ValidateAtOpenIdProvider(identifier, realm, new Uri("DomainUrl or Localhost/GoogleCallback"));
> 
> ```
>  if (response != null)
>         {
>             return response.RedirectingResponse.AsActionResult();
>         } 
> ```

在用户被重定向回来之后，这两个方法被调用：

> 公共 OpenIdUser GetUser() {
> 
> ```
>  OpenIdUser user = null;
>         IAuthenticationResponse openIdResponse = openId.GetResponse();
> 
>         if (openIdResponse.IsSuccessful())
>         {
>             user = ResponseIntoUser(openIdResponse);
>         }
> 
>         return user;
>     } 
> ```
> 
> 私有 OpenIdUser ParseResponse(IAuthenticationResponse 响应) {
> 
> ```
>  OpenIdUser user = null;
>         var claimResponseUntrusted = response.GetUntrustedExtension<ClaimsResponse>();
>         var claimResponse = response.GetExtension<ClaimsResponse>();
>                   if (claimResponse != null)
>         {
>             user = new OpenIdUser(claimResponse, response.ClaimedIdentifier);
>         }
>         else if (claimResponseUntrusted != null)
>         {
>             user = new OpenIdUser(claimResponseUntrusted, response.ClaimedIdentifier);
>         }
> 
>         return user;
>     } 
> ```

控制器内部：

> 公共 ActionResult GoogleCallback() {
> 
> ```
>  var user = openidemembership.GetUser();
>         if (user != null)
>         {
>             //Create cookie and redirect the user back 
>             return new RedirectResult(Request.Params["ReturnUrl"] ?? "/");
>         }
> 
>         return View();
>     } 
> ```

网络配置

```
 <section name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection" requirePermission="false" allowLocation="true" />

<dotNetOpenAuth>
    <openid>
      <relyingParty>
        <behaviors>
          <add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth> 
```

仍然在使用 DotNetOpenAuth.dll v4.0 +++ 之后，在 ParseResponse 方法调用中我无法从 ClaimsResponse 获取任何值。我正在使用命名空间 DotNetOpenAuth.OpenId.Extensions.SimpleRegistration。使用 nuget 一切都很好，但是有没有其他方法可以让它与单个 dll 一起工作，我真的不会将所有这些来自 nuget 的引用添加到我目前正在为我的一位客户工作的现有项目中，谢谢你提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:10:59.027

更新您的 web.config 文件以使用`DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform`. （注意命名空间的变化添加了“RelyingParty”。在 v4.x 中，DotNetOpenAuth 移动了行为的命名空间以支持多程序集构建，它甚至影响了统一程序集版本。

```
<dotNetOpenAuth>
    <openid>
      <relyingParty>
        <behaviors>
          <add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth> 
```

此外，即使您想要统一的程序集，您仍然可以使用 NuGet 获取 DotNetOpenAuth：

> 安装包 DotNetOpenAuth.Ultimate

# html - 如何防止文本扩展到 div 之外？

> ID：14325360
> 
> 赞同：-2
> 
> 时间：2013-01-14T19:37:17.053
> 
> 标签：html, css

当您单击该站点主页上的 about 选项卡：[http](http://suncoastlaw.com/) ://suncoastlaw.com/并缩小浏览器大小时，文本会溢出到 div 之外。我四处搜索并尝试了`clear:both`,`overflow: hidden`和其他一些东西，但似乎无法让 div 流畅地扩展到包含内容的适当高度。如何使 div 扩展以包含内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:51:59.600

通过从“#tabedarea”选择器中删除“min-height”和“height”来修改样式表文件。

另外，删除高度：365px；来自下面的 DIV（这个值来自 JavaScript 插件）

```
<div class="list-wrap group" style="height: 365px;"> 
```

您可以将以下事件附加到重新调整大小的浏览器窗口以重置元素的高度：

```
$(window).resize(function() {
   $(".list-wrap").height("auto");
}); 
```

编辑：

或者只是在“functions.js”中评论以下行：

```
$allListWrap.height(curListHeight); 
```

# excel - 将值范围从一张纸移动到另一张纸

> ID：14325366
> 
> 赞同：0
> 
> 时间：2013-01-14T19:37:30.097
> 
> 标签：excel, vba

我有一系列不同的整数值，比如说 d7:o7 。我想将这些值移动到同一工作簿中的另一个位置（基于此问题范围之外的逻辑）。做这个的最好方式是什么？

我最初的（失败的）方法有点像这样：

创建一个变体

```
Dim myArray As Variant 
```

为数组赋值

```
myArray = Range("d7:o7") 
```

输出新范围内的整数数组

```
Range("d10:o10") = myArray 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:51:06.400

```
Range("D10:O10").Value = Range("d7:O7").Value 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:50:25.537

这将**复制**（不删除原始值），假设您停留在同一张纸上，但该列表示为一个数字（EG A=1，B=2 等）。此示例适用于 2 x 2 数组，但您可以轻松更改开始和结束行号和列号：

```
Sub CopyCells()

    Dim SrcBeginRowNum As Integer
    Dim SrcBeginColNum As Integer
    Dim SrcEndRowNum As Integer
    Dim SrcEndColNum As Integer

    Dim DstBeginRowNum As Integer
    Dim DstBeginColNum As Integer

    Dim ri As Integer
    Dim ci As Integer

    Dim dest_ri As Integer
    SrcBeginRowNum = 1
    SrcBeginColNum = 1
    SrcEndRowNum = 2
    SrcEndColNum = 2

    DstBeginRowNum = 34
    DstBeginColNum = 5

    dest_ri = DstBeginRowNum
    dest_ci = DstBeginColNum

    For ri = SrcBeginRowNum To SrcEndRowNum

        dest_ci = DstBeginColNum

        For ci = SrcBeginColNum To SrcEndColNum

            Cells(dest_ri, dest_ci).Value = Cells(ri, ci).Value
            dest_ci = dest_ci + 1

        Next
        dest_ri = dest_ri + 1

    Next

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:03:49.297

我相信上面给出了**最好的答案**:)你已经接受了。

所以我发布这个，以便对你开始做的事情有一些看法。您可以对`Transposing`从范围到数组的数据执行此操作，反之亦然。但是，输出时取决于您使用的是多维数组还是单维数组。我们以`Sheet1`示例代码为例。

```
Dim myArray As Variant
'--to array
myArray = WorksheetFunction.Transpose(WorksheetFunction_ 
            .Transpose(Sheets(2).Range("D7:O7").Value))
'--to sheet
Sheets(1).Range("D10").Resize(1, _ 
            UBound(Application.Transpose(myarray))) = myarray 
```

我使用了双重转置来防止多列创建二维数组。所以它将如下所示：

![在此处输入图像描述](../Images/dca1ae5c6462fc540247badd53e962a5.png)

# android - 在 android 文档中显示片段之间的箭头选择指示器

> ID：14325367
> 
> 赞同：3
> 
> 时间：2013-01-14T19:37:36.943
> 
> 标签：android, android-fragments

在此处看到的视觉示例中：

[http://developer.android.com/design/patterns/multi-pane-layouts.html#combining-views](http://developer.android.com/design/patterns/multi-pane-layouts.html#combining-views)

在此屏幕截图中看到的主片段中如何显示从详细片段指向所选记录的箭头：

![在此处输入图像描述](../Images/cf8c1d1f4a37095c7fc297096ab7f59c.png)

# android - Android：自启动完成后不断寻找特定的 WIFI 连接

> ID：14325370
> 
> 赞同：0
> 
> 时间：2013-01-14T19:37:52.887
> 
> 标签：android, broadcastreceiver, android-wifi

如何检查特定的 wifi 连接是否可用，例如 SSID：`Saaram01`可用。只要有空，我就会收到通知。

我已经通过一个按钮完成了所有这些工作，例如，如果您单击该按钮，它会通知它是否`Saaram01`可用，否则什么也不做。

问题或问题基本上是如何检查此 SSID 可用性 24/7 .. 显然为此我不能使用后台服务.. 那么还有其他可能的方法吗？喜欢使用广播接收器或其他任何东西？

任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:44:57.507

```
IntentFilter i = new IntentFilter();
i.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent i) {
        // TODO Auto-generated method stub
        ScanWiFiActivity a = ScanWiFiActivity.instance();
        WifiManager w = (WifiManager) context
                .getSystemService(Context.WIFI_SERVICE);
        List<ScanResult> l = w.getScanResults();
        a.Clear();
        for (ScanResult r : l) {

            if(r.SSID.equals("saaram01") {
               //Perform your logic here
              }
        }
    }
};
registerReceiver(receiver, i); 
```

当您通过 SSID 或 BSSID 识别网络时，FOR 块会发挥您的魔力并采取行动

# javascript - 为什么我的全局变量没有传递值？

> ID：14325380
> 
> 赞同：0
> 
> 时间：2013-01-14T19:38:42.303
> 
> 标签：javascript, cordova, scope

我正在尝试使用 Phonegap API 将相机拍摄的图像的路径保存到数据库中。我想我可能在范围上犯了一个错误，因为当我从用户中选择所有内容时，我不明白为什么 userPic 会未定义。我正在使用相同的方法尝试使用 getElement 等 .value 存储名称。我整天都在努力寻找解决方案。我就是想不通。

```
 var imagePath; // global variable 
```

在我的相机成功功能中

```
 var placeImage = document.getElementById('placeImage');//Gets the imageholder
placeImage.src = imageURI;//gives image source the 
    placeImage.style.display = 'block';
imagePath=placeImage.src;// assigns the imageURI to imagePath
console.log(imageURI);// this is logging a path to the image file// etc 
```

然后在我插入到 db 函数中

```
 var userPic=imagePath; 
```

...

```
 dbtx.executeSql(insertRec, [theName, userPic], queryDB, insFail); 
```

# multithreading - 阿尔格。MKL 螺纹 DGEMV

> ID：14325381
> 
> 赞同：0
> 
> 时间：2013-01-14T19:38:44.963
> 
> 标签：multithreading, algorithm, intel, blas, intel-mkl

众所周知，有很多不同的方法可以并行实现 DGEMV（按列或按块等），从而导致不同的通信开销。我一直在查看 MKL 和 BLAS 的所有参考手册，试图找出 cblas_dgemv 通常从 MKL(v.11) 调用哪种样式但没有成功。如果有人有参考文献记录了正在使用的算法或算法的开销，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:40:42.187

MKL 参考手册将 DGEMV 以及其他例程保留为黑匣子。

但我认为仍有一些方法可以估计开销/效率。

众所周知，DGEMV 是一个内存带宽有界的操作。对于 y += A*x，您可以通过实现的内存带宽来衡量其速度：

1.  测量一个 DGEMV 调用的运行时间为`t`；
2.  计算总内存读/写大小：`m = 2*len(y)+len(x)+len(A)`;
3.  实际带宽`bw = m/t`；
4.  检查整个系统 RAM 的峰值带宽`bw0`；

那么`bw/bw0*100%`可以看做算法的实际效率。

请注意，您可能需要足够大的矩阵/向量来进行测量。此外，如果您想重复测量以获得更准确的结果，您可能需要在开始新的迭代之前保持缓存冷。

# php - 通过 id 打开表单

> ID：14325387
> 
> 赞同：0
> 
> 时间：2013-01-14T19:39:05.540
> 
> 标签：php, postgresql

我想通过 id 使用 PHP URL 打开一个表单。URL 看起来像这样。

```
http://localhost/application/workordersystem/woformEditor.php?woid=4 
```

并像这样将 id 接收到 PostgreSQL 中。

```
if (isset($_GET['woid']))
{
  $query = "SELECT * FROM orders WHERE woid='$woid'";
  $result = pg_query($query) or die(pg_error());
  $row = pg_fetch_assoc($result);
} 
```

我需要通过数据库中的 id 用数据库数据填充表单输入字段。我错过了什么？

```
<input type="text" name="status" id="status" value="<?php echo $row['status']; ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:51:21.000

尝试像这样调试

```
echo print_r($row); 
```

此外，您可能想要添加限制。告诉我们你得到了什么。

```
$query = "SELECT * FROM orders WHERE woid='$woid' LIMIT 1"; 
```

但是您应该查看 pg_fetch_assoc($result); 返回的数据结构；

您需要将所需的键映射到应该通过 print_r 函数显示（或显示异常）的输入字段。

# javascript - 简单的 javascript 循环对网格列求和

> ID：14325393
> 
> 赞同：0
> 
> 时间：2013-01-14T19:39:43.497
> 
> 标签：javascript, loops

我需要创建一个 javascript 循环，它将添加表列的每一行 (rowCount) 的值并输出总数 (QT_BOX * rowCount = prodQty)。rowCountupdates 很好，但 prodQty 总是返回 50 的值。我想我一定忽略了一些东西，但似乎找不到它......

```
function updateCounters(){
    var gridObject = document.BoxesGrid.getGridObject();
    var rowCount = gridObject.getRowCount();
    for(var i=0; i <= rowCount; i++){
        var prodQty = gridObject.getCellValueByName(i, "QT_BOX");
        document.getElementById("QT_READ").value =prodQty;
        document.getElementById("QT_BOXES").value = rowCount;
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:55:13.633

我不知道“BoxesGrid”是什么。但是通过您的代码，我看到您在循环中的每次重复中都将“QT_BOXES”设置为相同的值“rowCount”。所以我猜 BoxesGrid 是一个有 50 行的网格，这就是为什么你总能得到 50 行的原因。

您应该对“for”子句中的每个值求和，然后在“for”子句之外设置“QT_BOXES”。

```
function updateCounters(){
    var gridObject = document.BoxesGrid.getGridObject();
    var rowCount = gridObject.getRowCount();
    var tot = 0;
    for(var i=0; i <= rowCount; i++){
        var prodQty = gridObject.getCellValueByName(i, "QT_BOX");
        document.getElementById("QT_READ").value =prodQty;
        tot += prodQty;
    }       
    document.getElementById("QT_BOXES").value = tot;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:50:12.313

在您的 FOR 循环中，您使用当前行的 prodQty（或 QT_BOX）更新“QT_READ”。但它永远不会添加到之前的数量，因此您将始终拥有最后一行的 prodQty！

下面是它的样子：

```
function updateCounters(){
    var gridObject = document.BoxesGrid.getGridObject();
    var rowCount = gridObject.getRowCount();
    for(var i=0; i <= rowCount; i++){
        var prodQty = gridObject.getCellValueByName(i, "QT_BOX");
        var total = document.getElementById("QT_READ").value;
        document.getElementById("QT_READ").value = prodQty + total;
        document.getElementById("QT_BOXES").value = rowCount;
    }       
} 
```

# javascript - 如何比较存储在数组中的单独字符串值的字符？Javascript

> ID：14325398
> 
> 赞同：0
> 
> 时间：2013-01-14T19:39:51.670
> 
> 标签：javascript, arrays, char, compare

我有一个包含三个不同字符串的数组，例如：

```
[ 'obtain wealth1', 'obtain dreams3', 'obtain discretion3' ] 
```

该数组是从我编写的函数创建的。

我接下来要做的是比较字符串的最后一个字符（数字），看看我是否产生匹配。

我该怎么做呢？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:42:52.800

首先循环遍历数组并确定（使用 if 语句）在数组中的位置保存的元素是否具有作为其最后一个字符的值，该值等于您希望的数字。您可以添加 else if 语句来检查多个条件。我们使用带有 -1 参数的 slice 方法来检查字符串中最右边的字符。

```
for (var i = list.length; i--;) {
    if (list[i].slice(-1) == the_number) {

    } else {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:44:17.883

以字符串函数为例：[http ://www.w3schools.com/jsref/jsref_obj_string.asp](http://www.w3schools.com/jsref/jsref_obj_string.asp)

```
var a = [ 'obtain wealth1', 'obtain dreams3', 'obtain discretion3' ];
var length = a.length;
var lastchar = a.charAt(length - 1); 
```

# c# - 添加文本框值

> ID：14325402
> 
> 赞同：0
> 
> 时间：2013-01-14T19:40:06.750
> 
> 标签：c#, asp.net

在使用 c# 的 Asp.net 中，我有

```
int sum = Convert.ToInt32(txtbox1.Text) + Convert.ToInt32(txtbox2.Text); 
```

当我有一个空文本框时，我收到错误“输入字符串的格式不正确”。

所以，我想知道是否有一种简单的方法来添加文本框值，只有它们是整数，如果没有将文本框值设为 0。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:42:14.400

您可以使用 Int32.TryParse 方法

文档[MSDN](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:45:22.967

您可以将默认值设置`TextBox`为`0`，或使用`TryParse`：

```
int val1, val2;
Int.TryParse(txtbox1.Text,out val1));
Int.TryParse(txtbox2.Text,out val2));
int sum =  val1 + val2; 
```

请注意，如果解析失败，则不需要将值设置为 0，因为它们无论如何都会为 0。但是，如果您想明确表示：

```
int val1, val2;
if(!Int.TryParse(txtbox1.Text,out val1))) val1 = 0;
if(!Int.TryParse(txtbox2.Text,out val2))) val2 = 0;
int sum =  val1 + val2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:46:14.133

```
int integer;
 Int32.TryParse(Textbox1.Text, out integer)

int integerSecond
 Int32.TryParse(Textbox2.Text, out integerSecond) 
```

它将返回一个布尔值，因此您可以查看他们是否输入了有效的整数

或者，您也可以使用一些验证器：

```
<asp:CompareValidator runat="server" Operator="DataTypeCheck" Type="Integer" 
 ControlToValidate="ValueTextBox" ErrorMessage="Value must be a whole number" /> 
```

如果存在特定范围的有效值（可能存在），那么您可以使用 RangeValidator，如下所示：

```
<asp:RangeValidator runat="server" Type="Integer" 
MinimumValue="0" MaximumValue="400" ControlToValidate="ValueTextBox" 
ErrorMessage="Value must be a whole number between 0 and 400" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:47:13.207

为此编写一个扩展方法

```
public static int NullOrEmptyToZero(this string s)
{
    return string.IsNullOrEmpty(s)? 0: ConvertToInt32(s);
} 
```

并像这样使用它：

```
int sum = txtbox1.Text.NullOrEmptyToZero() + txtbox2.Text.NullOrEmptyToZero(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T19:48:21.270

使用 try parse 确保文本框包含有效输入（或将输入限制为仅数字）。

```
 int x, y, result;
 if (int.TryParse(txtbox1.Text, x)
 {
     if (int.TryParse(txtbox2.Text, y)
     {
          result = x + y;
     }
     else
         //error message
 }
 else
     // error message 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T19:47:28.750

使用 TryParse ..

```
int iFirstVal= 0;
int iSecondVal= 0;

int.TryParse(txtbox1.Text, out iFirstVal))
int.TryParse(txtbox2.Text, out iSecondVal))

int sum = iFirstVal + iSecondVal 
```

# jquery - Twitter 引导选项卡中的表格

> ID：14325407
> 
> 赞同：5
> 
> 时间：2013-01-14T19:40:24.913
> 
> 标签：jquery, twitter-bootstrap

我似乎无法在 Bootstrap 选项卡中显示我的表格，这是一个小提琴，我认为我犯了一个小错误，有人愿意指出吗？[http://jsfiddle.net/NPpHm/](http://jsfiddle.net/NPpHm/)

```
<ul class="nav nav-tabs" id="product-table">
  <li><a href="#1" data-toggle="tab">Grade 1</a></li>
  <li><a href="#2" data-toggle="tab">Grade 2</a></li>
  <li><a href="#3" data-toggle="tab">Grade 3</a></li>
</ul>
<div class="tab-content">
  <div>
    <div class="tab-pane" id="1">
      <table class="table table-condensed table-bordered table-striped volumes">
        <thead>
          <tr>
            <th>Warehouse</th>
            <th>Grain Volume</th>
            <th>Trade Volume</th>
            <th>Direction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>NFRA MPANDA RUKWA</td>
            <td>487</td>
            <td>487.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>COTCORI Cooperative</td>
            <td>113</td>
            <td>113.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>ENAS GBC KIREHE</td>
            <td>131</td>
            <td>131.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Government Procurement and Supply Agent</td>
            <td>453</td>
            <td>453.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Nairobi(test)</td>
            <td>261</td>
            <td>250.00</td>
            <td>IN</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div>
    <div class="tab-pane" id="2">
      <table class="table table-condensed table-bordered table-striped volumes">
        <thead>
          <tr>
            <th>Warehouse</th>
            <th>Grain Volume</th>
            <th>Trade Volume</th>
            <th>Direction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>National Food Reserve Agency_Manyoni</td>
            <td>172</td>
            <td>172.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Sodea GBC</td>
            <td>471</td>
            <td>20.00</td>
            <td>OUT</td>
          </tr>
          <tr>
            <td>Kivu Maize Factory</td>
            <td>389</td>
            <td>389.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Mombasa Bulk Grain Handlers</td>
            <td>200</td>
            <td>200.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Zwii Enterprises-Muloza</td>
            <td>-47</td>
            <td>47.00</td>
            <td>OUT</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div>
    <div class="tab-pane" id="3">
      <table class="table table-condensed table-bordered table-striped volumes">
        <thead>
          <tr>
            <th>Warehouse</th>
            <th>Grain Volume</th>
            <th>Trade Volume</th>
            <th>Direction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>COTCORI Cooperative</td>
            <td>93</td>
            <td>93.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>SOSOMA GBC KICUKIRO</td>
            <td>-23</td>
            <td>23.00</td>
            <td>OUT</td>
          </tr>
          <tr>
            <td>Shabiby_Indivisual</td>
            <td>270</td>
            <td>270.00</td>
            <td>IN</td>
          </tr>
          <tr>
            <td>Silayo_Union Service Stores</td>
            <td>-38</td>
            <td>38.00</td>
            <td>OUT</td>
          </tr>
          <tr>
            <td>SGR/NFRA VWAWA</td>
            <td>-39</td>
            <td>39.00</td>
            <td>OUT</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> 
```

我尝试使用规定的布局，但是我注意到如果我删除表格，选项卡似乎工作正常，使用 jquery-1.8.3 和 Bootstrap v2.2.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T19:55:08.050

您没有遵循可选项卡内容的 Twitter Bootstrap 布局。

简化后，您的布局如下所示：

```
<div class="tab-content">
  <div>
    <div class="tab-pane" id="1"/>
  </div>
  <div>
    <div class="tab-pane" id="2"/>
  </div>
  <div>
    <div class="tab-pane" id="3"/>
  </div>
</div> 
```

它应该是这样的：

```
<div class="tab-content">
  <div class="tab-pane" id="1"/>
  <div class="tab-pane" id="2"/>
  <div class="tab-pane" id="3"/>
</div> 
```

[看这里。](http://jsfiddle.net/pSyex/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:48:14.053

问题是 .tab-content 和 .tab-pane 之间的 div，这显然破坏了 Bootstrap jQuery。此外，ID 不能以数字开头。（更正：HTML5 允许这样做。）

[http://jsfiddle.net/33Aby/](http://jsfiddle.net/33Aby/)

```
<div class="tab-content">
  <div class="tab-pane">
  ...
  </div>
</div> 
```

# php - yii ajaxLink 没有将变量传递给控制器

> ID：14325410
> 
> 赞同：0
> 
> 时间：2013-01-14T19:40:34.410
> 
> 标签：php, ajax, yii

我正在尝试将 ajaxLink 中的变量传递到我的控制器中，但我的控制器没有获取该变量。

//看法

```
$ids = Yii::app()->storedData->getIds();
    foreach($ids as $id) {
    echo 'ID '.$id .'<br />';

    echo CHtml::ajaxLink(   
     'remove',                                    
     array('/storedInfo/remove'), 
     array(
      'data' => array('removeItem' => $id),
    ));
    } 
```

//控制器

```
public function actionRemove() {
        var_dump($_GET['removeItem']);  // RETURNS string(0) ""
        die();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:31:01.640

您传递给[CHtml::ajaxLink](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxLink-detail)的 ajax 数组最终会获取整个数组并将其传递给[CJavaScript::encode()](http://www.yiiframework.com/doc/api/1.1/CJavaScript#encode-detail)。

正如您在评论中提到的那样，`$id`您用来构建数据数组的是一个 PHP 对象。当这涉及到 CJavaScript::encode 时，事情变得很不稳定，结果也不是你所期望的。从 $id 中提取字符串或数值，而不是传递整个对象应该处理这个问题，例如：

```
 'data' => array('removeItem' => $id->value) // obviously you'll need to use the proper key to get the value 
```

或者可能是这样的，具体取决于数据结构：

```
 'data' => array('removeItem' => settype($id, 'string'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:59:42.127

**我编辑了我的答案，因为我承认这不是最初的提问者想要的，但为了评论，我把我的代码留在这里**

```
 $ids = Yii::app()->storedData->getIds();
    foreach($ids as $id) {
        echo 'ID '.$id .'<br />';

        echo CHtml::ajaxLink(   
           'remove',                                    
            array('/storedInfo/remove', array('removeItem' => $id)), 
        );
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T19:47:25.693

看起来[`CHtml::ajaxLink`](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxLink-detail)需要的参数比您发送的要多。

```
public static string ajaxLink(string $text, mixed $url, array $ajaxOptions=array ( ), array $htmlOptions=array ( )) 
```

你需要在`$text`之前发送一些`$url`吗？

# php - Symfony 自定义错误消息

> ID：14325428
> 
> 赞同：0
> 
> 时间：2013-01-14T19:41:47.000
> 
> 标签：php, symfony, error-handling

我有一个使用 Symfony 安全系统的登录表单。

我现在想自定义错误消息，例如如果您输入无效凭据 Symfony 返回“错误凭据”。如何将该消息自定义为“无效的电子邮件/密码”之类的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:59:24.393

对于这个，并且仅对于这个，这不是验证错误，而是错误地发送到控制器的异常消息......

如果我记得很清楚，您可以在`messages.yml`文件中覆盖它（根据需要使用 .yml 或 .xliff 扩展名）：

```
"Bad credentials": "Invalid email/password" 
```

这真的很难看，但这是实现登录错误的唯一方法。“提供的密码不能为空”或“提供的密码无效”的相同修复...

而且，在 Twig 模板中，您必须应用翻译器：

```
{% if error %}
    <p class="error">{{ error.message|trans }}</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T20:20:29.527

你在使用 FOSUserBundle 吗？如果是这样，所有消息都存储在翻译文件中。

将翻译文件从 FOSUserBundle\Resources\translations 复制到覆盖 FOSUserBundle 的 UserBundle。

Symfony 是高度可定制的，只要您知道自己在做什么。

# asterisk - Asterisk (with FreePBX) & Openfire 电话映射配置

> ID：14325436
> 
> 赞同：0
> 
> 时间：2013-01-14T19:42:15.710
> 
> 标签：asterisk, openfire, pbx, candy

我在理解 FreePBX 配置和 Openfire 之间的参数匹配时遇到了一些问题（通过 SIP 插件）：

每个服务器的组件都在同一个服务器（vm.com）上，我插入我的设置（第二个屏幕），然后服务器仍然被标识为未注册（第一个屏幕）

在我点击“Apply Config”之前，在第 4 个屏幕中有 FreePBX 的配置

如果我单击第二个屏幕中的“测试”按钮，它会保持无限循环状态。我无法从中得到任何确认。

有什么建议吗？对不起我的英语，谢谢你的建议。

![开火](../Images/19e6e06d3e87bc17a6713dbc92d6e29d.png) ![开火](../Images/a2364459906331dbce9872a44678bc3d.png)

![开火](../Images/33c885bb06f52731cf888dad412057de.png)

![免费PBX](../Images/f083b0aae8b8ec4f293cf3102ad1ad58.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:40:17.493

您已将服务器名称而不是 vm.com 放在 openfire 设置中。

# android - 使用 NDK 对静态库中的函数的未定义引用

> ID：14325440
> 
> 赞同：5
> 
> 时间：2013-01-14T19:42:25.843
> 
> 标签：android, android-ndk

所以我试图在我的原生代码上使用 libopus 来运行一个 Android 应用程序。我的 Android.mk 文件如下所示：

```
PLATFORM_PREFIX := /opt/android-ext/
LOCAL_PATH := $(PLATFORM_PREFIX)/lib

include $(CLEAR_VARS)

LOCAL_MODULE := libopus
LOCAL_SRC_FILES := libopus.a

include $(PREBUILT_STATIC_LIBRARY)

# I have to redeclare LOCAL_PATH because the library is in /opt/android-ext/
# and my project is somewhere else. Not very elegant.

LOCAL_PATH := /home/sergio/workspace/Project/jni

include $(CLEAR_VARS)

LOCAL_MODULE := opusUtilsNative
LOCAL_SRC_FILES := opusUtilsNative.c
LOCAL_C_INCLUDES += $(PLATFORM_PREFIX)/include
LOCAL_STATIC_LIBRARIES := android_native_app_glue libopus

include $(BUILD_SHARED_LIBRARY) 
```

我在 opusUtilsNative.c 中的代码如下所示：

```
#include "opusUtilsNative.h"
#include <opus/opus.h>
#include <opus/opus_types.h>

JNIEXPORT jbyteArray JNICALL Java_Project_OpusUtils_encode
  (JNIEnv * je, jclass jc, jbyteArray data){

    int rc;
    opus_int16 * testOutBuffer;
    unsigned char* opusBuffer;

    OpusDecoder *dec;

    dec = opus_decoder_create(48000, 2, &rc);
    return data;
} 
```

当我尝试构建它时，它**只有在我删除使用“opus_decoder_create”函数的行时才能正常工作**。否则我会得到这个：

```
error: undefined reference to 'opus_decoder_create' 
```

我可以看到 opus_decoder_create 在 opus.h 上明确定义，显然包含在内，因为如果我排除该行，我将收到有关 opus_int16 和 OpusDecoder 声明的错误。为什么有些定义被包括在内而有些没有？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T21:57:17.643

这很棘手。经过一番挖掘，我意识到我没有正确交叉编译 opus 库，而且我根本没有 ARM 二进制文件。

验证您的库是否正确交叉编译的好方法：

```
cd /opt/android-ext/lib #Or wherever the .a file is
ar x libopus.a
file tables_LTP.o #Or any of the .o files generated by ar x 
```

输出应如下所示：

```
tables_LTP.o: ELF 32-bit LSB relocatable, ARM, version 1 (SYSV), not stripped 
```

否则，您可能需要仔细检查您的交叉编译过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:40:54.230

这是链接器的错误，而不是编译器的错误。您忘记在`Android.mk`文件中添加对对应库的引用，请像这样：

```
LOCAL_LDLIBS += -lopus 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T16:33:54.490

我忘了集成一个密钥库

# LOCAL_LDLIBS := -lGLESv2

这解决了我的问题。

# android - 调用 facebook.authorize 时出现 android.view.InflateException

> ID：14325441
> 
> 赞同：0
> 
> 时间：2013-01-14T19:42:30.500
> 
> 标签：android, facebook, exception, inflate-exception

* * *

**编辑 1/14/2013** - 我尝试重新下载 facebook SDK ......仍然是同样的错误。

* * *

当与 looper 一起调用 facebook.authorize 时，我得到了由 outOfMemoryException 引起的 android.view.InflateException。

**这是我调用 facebook.authorize 的代码片段：**

```
public void promptLogin(){
    if (! facebook.isSessionValid()) {
        loginAndContinue();
    }
    else {
        Continue();
    }
}
public void loginAndContinue(){
    new Thread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            Looper.prepare();
            openLoginDialog();
            Looper.loop(); // This is line 248
        }
    }).start();
}
public void openLoginDialog(){
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
}
public void Continue(){
    AsyncFacebookRunner myAsyncRunner = new AsyncFacebookRunner(facebook);
    myAsyncRunner.request("me", new meRequestListener(this));
} 
```

**这是日志错误：**

```
>     01-14 19:42:04.551: E/AndroidRuntime(890): FATAL EXCEPTION: Thread-105
>     01-14 19:42:04.551: E/AndroidRuntime(890): android.view.InflateException: Binary XML file line #107: Error
> inflating class <unknown>
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at com.android.internal.app.AlertController.installContent(AlertController.java:240)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.app.AlertDialog.onCreate(AlertDialog.java:336)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.app.ProgressDialog.onCreate(ProgressDialog.java:198)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.app.Dialog.dispatchOnCreate(Dialog.java:353)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.app.Dialog.show(Dialog.java:257)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at com.facebook.widget.WebDialog$DialogWebViewClient.onPageStarted(WebDialog.java:364)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:267)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.os.Handler.dispatchMessage(Handler.java:99)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.os.Looper.loop(Looper.java:137)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at com.COMPANYNAME.framework.impl.AndroidGame$6.run(AndroidGame.java:248)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at java.lang.Thread.run(Thread.java:856)
>     01-14 19:42:04.551: E/AndroidRuntime(890): Caused by: java.lang.reflect.InvocationTargetException
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at java.lang.reflect.Constructor.constructNative(Native Method)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    ... 20 more
>     01-14 19:42:04.551: E/AndroidRuntime(890): Caused by: java.lang.OutOfMemoryError
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.content.res.Resources.loadDrawable(Resources.java:1935)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.View.<init>(View.java:2785)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.view.ViewGroup.<init>(ViewGroup.java:385)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.widget.LinearLayout.<init>(LinearLayout.java:174)
>     01-14 19:42:04.551: E/AndroidRuntime(890):    at android.widget.LinearLayout.<init>(LinearLayout.java:170) 
```

它以前就像一个魅力，但现在，在添加一个按钮（以编程方式）之后，它不再起作用了。

**只是如果它可以帮助你帮助我，这里是我在其中存储 facebook 图片和 textview 名称的线性布局的代码：**

**爪哇：**

```
 setContentView(gameLayout);
    View.inflate(this, R.layout.facebook, gameLayout);
    facebookLayout = (LinearLayout)findViewById(R.id.facebookLayout);
    facebookName = (TextView)findViewById(R.id.facebookName);
    profilePicture = (ProfilePictureView)findViewById(R.id.profile_pic);
    profilePicture.setCropped(true);
    getNameAndId();
    facebookName.setText("Welcome, " + name + "!");
    showFacebook(false);
    checkState();
}

public void checkState() {
    if (! facebook.isSessionValid()) {
        facebookName.setVisibility(View.GONE);
        profilePicture.setVisibility(View.GONE);
    }
} 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:facebook="http://schemas.android.com/apk/res-auto"
    android:id="@+id/facebookLayout"
    android:orientation="vertical"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:layout_gravity="center"
    android:padding="100dp"
    android:layout_alignParentTop="true">
    <com.facebook.widget.ProfilePictureView
        android:id="@+id/profile_pic"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center"
        android:gravity="center_horizontal"
        facebook:preset_size="small" />
    <TextView android:id="@+id/facebookName"
        android:text="Welcome!"
        android:textColor="#0000FF"
        android:padding="5dp"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center"/>
</LinearLayout> 
```

我希望你能帮助我，因为我不知道如何从这里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:23:20.570

我现在设法让它工作！似乎我同时将太多图像加载到内存中。我试着注释掉一些大图，瞧！有效！

解决方案是，在不需要的屏幕之间切换时，您必须回收图像。这样，您将节省大量内存，而不必像我一样面临同样的问题。

**当您不再需要图像时执行此操作：**

```
 bitmap.recycle();
    bitmap = null; 
```

# jekyll - 自动重新生成不适用于 _config.yml？

> ID：14325445
> 
> 赞同：7
> 
> 时间：2013-01-14T19:42:47.637
> 
> 标签：jekyll

我安装了 jekyll 并从 cli 运行它：

```
jekyll --server --auto 
```

但是当我更改时`_config.yml`，我看不到我的更改已应用，我每次都必须重新启动服务器。

每次更改时我真的需要重新启动服务器`_config.yml`吗？还是有一些解决方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T19:53:23.217

我相信你是对的；更改为`_config.yml`始终需要重新启动服务器。

毕竟，`_config.yml`提供了可以在调用 Jekyll 时覆盖的选项。因此，如果在 jekyll 的命令行运行中调用覆盖某些`_config.yml`设置的选项，然后编辑配置，则尚不清楚 auto 应该如何表现。那么哪个会优先呢？或`_config.yml`原始命令行参数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T04:51:07.330

如果服务器正在运行，则无需重新启动它。一种（一点点）更快的方法是运行`jekyll build`或`bundle exec jekyll build`在编辑`_config.yml`文件之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-08T08:16:32.433

Jekyll 的维护者 Parker Moore 确认`_config.yml`更改不会自动生成或被正在运行的 Jekyll 服务器拾取。

> 不，我记得为什么我们不能这样做：如果你改变`source`or `destination`，你就会被淘汰，所以我们对这个建议说。`_data`如果您使用自定义数据，请务必使用。否则，`^C`应该快速重启
> 
> [https://github.com/jekyll/jekyll/issues/2302#issuecomment-43160557](https://github.com/jekyll/jekyll/issues/2302#issuecomment-43160557)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T12:51:19.250

> 每次更改_config.yml时，我真的需要重新启动服务器吗？还是有一些解决方法？

**有一些解决方法：**

1) 安装[watchy](https://github.com/caseywebdev/watchy)。

```
npm i -D watchy 
```

2）在配置更改时重新启动（例如作为`package.json`脚本）

```
"scripts": {
  "restart": "watchy -w _config.yml -- bundle exec jekyll serve --drafts --watch", 
```

（`--drafts`不相关，但我假设您在开发/创作模式下在本地执行此操作......）

# php - 我可以在此连接 $x->getTable1()->getTable2() 中添加 where 条件吗？

> ID：14325453
> 
> 赞同：0
> 
> 时间：2013-01-14T19:43:09.227
> 
> 标签：php, doctrine, symfony-1.4

我可以在此联接中添加 where 条件以`$x->getTable1()->getTable2()`得到与此查询相同的结果：

```
$y = Doctrine_Query::create()  
      ->from('Table0 t0')
      ->innerJoin('t0.Table1 t1')
      ->innerJoin('t1.Table2 t2')
      ->where('t2.status = "active"')
      ->execute->getLast(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:37:54.387

您需要构建一个自定义方法。我通常是这样做的。

在 Table1.class.php 中，创建一个自定义方法：

```
public function getTable2ByStatus($status = 'active')
{
  return Doctrine_Core::getTable('Table2')->retrieveByStatus($status);
} 
```

然后，在 Table2Table.class.php 中：

```
public function retrieveByStatus($status)
{
  return $this->createQuery('t2')
    ->where('t2.status = ?', $status)
    ->execute()
    ->getLast();
} 
```

现在你可以这样称呼它：

```
$x->getTable1()->getTable2ByStatus(); 
```

# c# - 如何将现有类添加到 CodeProvider.CompileAssemblyFromSource 生成的 DLL？

> ID：14325459
> 
> 赞同：0
> 
> 时间：2013-01-14T19:43:48.727
> 
> 标签：c#, compileassemblyfromsource

我正在使用 codeProvider.CompileAssemblyFromSource 创建一个 dll，并将我的代码作为字符串传递。

我希望生成的 dll 包含另一个已经在我的代码中并且不会更改的类。

即，而不是这一行：

```
compiledResults = codeProvider.CompileAssemblyFromSource(parameters,myCode); 
```

我想要一些谎言：

```
compiledResults = codeProvider.CompileAssemblyFromSource(parameters,myCode, typeof(anotherClass)); 
```

那可能吗？

# ruby-on-rails - Activerecord 检查值是否为真

> ID：14325469
> 
> 赞同：0
> 
> 时间：2013-01-14T19:44:53.297
> 
> 标签：ruby-on-rails, ruby

如何正确检查数据库中的值：在表中我有`add_after_sign_in`一个布尔字段，默认情况下它是假的......但是如何检查它是否不为空且不为真，然后选择这样的行：我尝试：

```
litem = LineItem.find(:all, :conditions => {:cart_id => cart_id && !:add_after_sign_in }) 
```

但实际上没有这样的记录......为什么？简单的如何检查非真表行值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:52:27.900

`conditions`是一个哈希。您只是在弄乱语法。试试这个：

```
litem = LineItem.find(:all, 
  :conditions => {:cart_id => cart_id, :add_after_sign_in => [nil, false]}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:55:22.603

您不能使用这样的符号（但请注意，您可以使用[squeel](https://github.com/ernie/squeel)和 Rails 3 做类似的事情）。

我会写（注意它是`line_items`，它是一个集合）：

```
line_items = LineItem.where(:cart_id => cart_id, :add_after_sign_in => false) 
```

但是，有了健全的模型结构和命名范围，您应该能够编写更多的声明性代码：

```
line_items = Cart.find(cart_id).line_items.without_add_after_sign_in 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:02:36.460

您还可以使用`where`更易读的语法：

```
litem = LineItem.where(cart_id: cart_id, add_after_sign_in: [nil, false]) 
```

或者，使用范围：

```
class LineItem
  scope :not_added_after_sign_in, where(add_after_sign_in: [nil, false])
  #...
end

litem = LineItem.where(cart_id: cart_id).not_added_after_sign_in 
```

**编辑：在**[tokland](https://stackoverflow.com/users/188031/tokland)的回答之后进行了调整。

# html - 哪个 html5 标签为跳过链接提供了最语义化的包装？

> ID：14325470
> 
> 赞同：1
> 
> 时间：2013-01-14T19:44:54.513
> 
> 标签：html, semantic-markup

一些现有的 html4 片段：

```
<body>
    <div id='skiplinks'>
        <ul>
            <li><a href='#content'>skip to main content</a></li>
        </ul>
    </div>
    <div id='bg'>
        <div id='container'>
            <div id='main'> 
```

语义免费包装器的最语义化 html5 替代品是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:32:08.037

[`nav`元素](http://www.w3.org/TR/html5/sections.html#the-nav-element)是正确的选择。

您在评论中引用的有关屏幕阅读器的部分意味着：屏幕阅读器可能会提供跳转到（或忽略）`nav`元素的功能。如果所有屏幕阅读器都实现这样的功能，您就不必再自己提供跳过链接（除非用于其他用例/用户代理，例如移动设备）。

是的，这也可能意味着屏幕阅读器可能会跳过您的跳过导航；）但显然这个屏幕阅读器具有跳过当时实现的能力，因此无论如何都不需要您的跳过导航。

用户拥有（并且应该拥有）控制权。如果他们将用户代理配置为忽略`nav`元素（并且仅在调用某个命令时跳转到它们，分别读取它们），这是他们的选择。您通过语义标记您的内容来尽力而为，并且用户配置他们的用户代理，以便他们完成每个用户用例所需的工作。

# java - 在 Android 中获取 WOEID

> ID：14325474
> 
> 赞同：2
> 
> 时间：2013-01-14T19:45:15.423
> 
> 标签：java, android, api, rss, yahoo-api

我正在开发一个应用程序，我想要包含的功能之一是能够获取用户位置并将其转换为 WOEID 值，然后从 Yahoo Weather RSS 提要获取天气数据。以下是说明 WOEID 值要求的文档：http: [//developer.yahoo.com/weather/](http://developer.yahoo.com/weather/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:49:30.070

您可以使用[Yahoo!获取 WOEID 地点查找器 API](http://developer.yahoo.com/geo/placefinder/)。首先，您需要请求一个 API 密钥，然后您可以像这样发送您的请求：

```
http://where.yahooapis.com/geocode?q=[search query]&appid=[yourappidhere] 
```

您将收到以下回复：

```
<ResultSet xmlns:ns1="http://www.yahooapis.com/v1/base.rng" version="2.0" xml:lang="en-US">
<Error>0</Error>
<ErrorMessage>No error</ErrorMessage>
<Locale>en-US</Locale>
<Found>1</Found>
<Quality>85</Quality>
<Result>
<quality>85</quality>
<latitude>38.898708</latitude>
<longitude>-77.036369</longitude>
<offsetlat>38.89719</offsetlat>
<offsetlon>-77.036537</offsetlon>
<radius>400</radius>
<name/>
<line1>1600 Pennsylvania Ave NW</line1>
<line2>Washington, DC 20500-0005</line2>
<line3/>
<line4>United States</line4>
<house>1600</house>
<street>Pennsylvania Ave NW</street>
<xstreet/>
<unittype/>
<unit/>
<postal>20500-0005</postal>
<neighborhood/>
<city>Washington</city>
<county>District of Columbia</county>
<state>District of Columbia</state>
<country>United States</country>
<countrycode>US</countrycode>
<statecode>DC</statecode>
<countycode>DC</countycode>
<uzip>20500</uzip>
<hash>4216F67AA1A143E9</hash>
<woeid>12766118</woeid> // This is what you need
<woetype>11</woetype>
</Result>
</ResultSet> 
```

您可以解析`<woeid>`标签的响应。

**编辑：**
如果你有一个 EditText 并且你想根据你从他的输入中得到的城市来获取天气，那么你必须这样做：

```
String searchQuery = Uri.encode(myEditText.getText().toString()); 
```

现在您将获得搜索查询。因此，例如，如果用户输入：

> 德国汉堡

那么这会将其转换为：

> 汉堡_德国

# ruby-on-rails - 调用关联之前的回调

> ID：14325477
> 
> 赞同：2
> 
> 时间：2013-01-14T19:45:22.510
> 
> 标签：ruby-on-rails, rails-activerecord

我必须设置关联模型（limesurvey）的表名，因为表名是动态的并且取决于模型（任务）的属性（survey_id）。

我当前的实现在任务初始化时设置表名：

```
class task < ActiveRecord::Base
  after_initialize :setTablename
  has_one :limesurvey

  def setTablename
    Limesurvey.table_name = "lime_survey_#{self.survey_id}"
  end
end 
```

这个实现是可行的，但它有一个缺点，即每个任务都会调用 setTablename 方法，尽管它不是必需的。

如何仅在加载关联石灰调查之前执行 setTablename？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:38:39.347

警告：我同意您正像评论者所提到的那样遇到一大堆麻烦。此外，这可能会更糟，因为之前至少每个任务都会调用 setTablename。

```
class Task < ActiveRecord::Base
  has_one :limesurvey

  def lime_survey
    @table_name || = (Limesurvey.table_name = "lime_survey_#{self.survey_id}")

    limesurvey
  end
end 
```

这定义了一个带有下划线的limesurvey 版本，但首先检查表名是否已设置。调用lime_survey而不是limesurvey，你就会得到你想要的效果。

类似于安迪建议的方法。但是，虽然关联只是一个方法，但我不确定您是否可以重新定义它并调用 super，因为它不是父类（或模块）中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:26:39.390

关联只是模型中包含的模块中定义的方法，因此您可以像使用其他方法一样覆盖它们

```
class Task < ActiveRecord::Base
  has_one :limesurvey

  def limesurvey
    # do something here...

    super
  end
end 
```

但是，正如人们在对该问题的评论中提到的那样，您正在做的是一个非常糟糕的主意。如果您同时有两个任务可用，并试图同时访问这两个任务会发生什么`limesurvey`？

```
t1 = Task.first
t2 = Task.last

l1 = t1.limesurvey
l2 = t2.limesurvey

l1.update_attributes(foo: "bar")
# Oops... saves into the wrong table... 
```

即使您设法避免在整个应用程序的任何地方显式执行此操作，如果您有两个并发请求，它也可能会意外发生！

# java - 如何在开关盒中使用枚举

> ID：14325481
> 
> 赞同：31
> 
> 时间：2013-01-14T19:45:45.133
> 
> 标签：java, enums, switch-statement

我正在尝试检查我的 VO 中设置了哪些值。

下面是我的课。我得到“**合格的案例标签 MyEnum.UserType.DOCTORS 必须替换为不合格的枚举常量 DOCTORS** ”

请帮助我确定我在这里做错了什么。

我的枚举.java

```
public MyEnum{
    private UserType userType;

    public UserType getUserType(){
        return userType;
    }

    public void setUserType(UserType userType){
        this.userType = userType;
    }

    public static enum UserType{
        DOCTORS("D"),
        PATIENT("P"),
        STAFF("S");
    }

} 
```

枚举测试.java

```
public EnumTest {

    .....
    public void onGoBack(MyEnum myEnum) {

        switch(myEnum.getUserType())
        {
            case UserType.DOCTORS: // this shows "The qualified case label MyEnum.UserType.DOCTORS must be replaced with the unqualified enum constant DOCTORS"
                break;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-14T19:47:19.077

由于编译器知道您在 switch 语句中评估的枚举类型，因此您应该按照错误提示（在您的情况下为：）删除“合格”部分，`MyEnum.UserType.`并简单地使用“不合格”枚举`DOCTORS`。见下文：

```
switch(myEnum.getUserType())
{
    case DOCTORS: 
        break;
} 
```

# android - 捏缩放ListView Android

> ID：14325483
> 
> 赞同：13
> 
> 时间：2013-01-14T19:45:51.817
> 
> 标签：android, listview, zooming

我正在尝试实现捏合以放大 Android 上的列表视图，当我单击并拖动缩放的列表视图时遇到问题。首先，这是代码：

```
public class ScaleListView extends ListView {

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;
private float x = 0;
private float y = 0;
private float startx = 0;
private float starty = 0;
private boolean canClick = true;
private float xtranslation = 0;

public ScaleListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
}
@Override
public boolean onTouchEvent(MotionEvent ev) {
    if (ev.getAction() == MotionEvent.ACTION_DOWN) {
        startx = ev.getX();
        starty = ev.getY();
    }

    if (ev.getPointerCount() > 1) {
        y = ev.getY();
        x = ev.getX();
    } else if (ev.getAction() == MotionEvent.ACTION_UP) {
        canClick = (ev.getX() - startx) == 0 && (ev.getY() - starty) == 0 && mScaleFactor == 1;
    } else if(ev.getAction() == MotionEvent.ACTION_MOVE){
        xtranslation = ev.getX() - startx;
    }       
    mScaleDetector.onTouchEvent(ev);
    return super.onTouchEvent(ev);
}   
@Override
public void onDraw(Canvas canvas) {
    canvas.scale(mScaleFactor, mScaleFactor, x , y);
    canvas.translate(xtranslation, 0);
    super.onDraw(canvas);
}
private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        canClick = false;
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        if (mScaleFactor <= 1) {
            mScaleFactor = 1;
            canClick = true;
        }

        xPos = ScaleListView.this.getWidth() - detector.getFocusX();

        ScaleListView.this.invalidate();
        return true;
    }
}   
public boolean canClick(){
    return canClick;
} 
```

问题在于翻译。它是无限的，我可以水平拖动它并将列表视图从视口中取出。所以我无法面对如何在翻译中占据优势......感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-29T17:12:20.790

我只是为此组建了一个工人阶级。请让我知道这对你有没有用。 [https://github.com/Xjasz/AndroidZoomableViewGroup](https://github.com/Xjasz/AndroidZoomableViewGroup)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T12:21:44.420

以下代码将我的文本视图限制在屏幕边缘。希望这会对您的列表视图有所帮助..我在 ACTION:Move 上完成了此代码

```
layoutParams.leftMargin = X - _xDelta;
                    layoutParams.topMargin = Y - _yDelta;
                    if (layoutParams.leftMargin < 0) {
                        layoutParams.leftMargin = 20;
                    } else if (layoutParams.leftMargin > mainimage.getWidth()) {
                        layoutParams.leftMargin = mainimage.getWidth() - 20;
                    }
                    if (layoutParams.topMargin < 0) {
                        layoutParams.topMargin = 20;
                    } else if (layoutParams.topMargin > mainimage.getHeight() - 100) {
                        text.setText(text2.getText().toString());
                        layoutParams.topMargin = mainimage.getHeight() - 90
                                - text.getHeight();
                        // layoutParams.leftMargin = 20;
                    }

                    text.setX(layoutParams.leftMargin);
                    text.setY(layoutParams.topMargin);

                    v.setLayoutParams(text.getLayoutParams()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T05:06:50.020

[请在此处](https://github.com/mayank1513/PinchZoomListViewAndroid)找到 zoomListView 类。您可以设置 pinchZoom 以及双击来缩放/取消缩放。

# c - 在 Arduino 中使用 PROGMEM 存储在闪存中的字符串数组

> ID：14325485
> 
> 赞同：10
> 
> 时间：2013-01-14T19:45:56.760
> 
> 标签：c, arduino

我正在使用 AVR-GCC 版本 4.7.0，当我尝试在闪存中创建字符串数组时，我收到错误：

> 变量 'menu' 必须是 const 才能通过 '<strong>attribute((progmem))' 放入只读部分</p>

我正在使用这段代码：

```
const char menu0[] PROGMEM = "choice0";
const char menu1[] PROGMEM = "choice1";
const char menu2[] PROGMEM = "choice2";
const char menu3[] PROGMEM = "choice3";
const char menu4[] PROGMEM = "choice4";
const char menu5[] PROGMEM = "choice5";

const char *menu[] PROGMEM = {menu0, menu1, menu2, menu3, menu4, menu5}; 
```

我已经阅读了 Stack Overflow 问题*[C - 如何使用 PROGMEM 存储和读取 char array](https://stackoverflow.com/questions/13093927/c-how-to-use-progmem-to-store-and-read-char-array)*，但我看到的所有答案都不包含`const`关键字，这让我相信它们是在需要之前编写的。

如何解决这个问题？

* * *

```
const char * const menu[] PROGMEM = {menu0, menu1, menu2, menu3, menu4, menu5}; 
```

是答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T19:48:00.280

尝试

```
const char* const menu[] PROGMEM... 
```

`const char*`因此，数组本身是常量，而不是像在原始代码中那样的可变指针数组。

# wpf - 如何在 WPF 中为特定 TreeViewItem 切换 ItemTemplate

> ID：14325486
> 
> 赞同：0
> 
> 时间：2013-01-14T19:45:56.857
> 
> 标签：wpf, treeview, itemtemplate

在我的场景中，我希望能够让用户双击 TreeViewItem 来“编辑它”。在这种情况下，我希望该项目就地展开（将其下方的 TreeViewItems 向下滑动，所以布局转换？），并显示和编辑表单以代替所选项目。所以，我的问题是，我可以通过为双击项目切换 ItemTemplate 来完成此操作吗？如果是这样，我不确定如何处理这个问题。

我双击了在 TreeViewItems 上工作的附加事件，并且我可以在回调中访问 TreeViewItem，此时我最好切换出该项目的 ItemTemplate。我的 TreeView 是使用静态资源中的 HierarchicalDataTemplate 构建的，以便 ItemTemplate 和 ViewModels 支持数据。

对此方法的任何指导或完成此方案的任何其他建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:49:24.137

您可以为 clicked 动态更改 ItemTemplate `TreeViewItem`。
调用它`DependencyObject.SetCurrentValue()`
并且不要忘记恢复在更改之前应该保存的原始本地值。用于`ReadLocalValue()`此。
您需要定义何时恢复原始模板的条件（可能在选择更改时。

您还可以尝试以更 MVVM 的方式完成任务。
只需添加一个附加属性`IsDoubleClicked`并将其设置为 True 对应的`TreeViewItem`.
并将 TreeViewItem`ItemTemplate`绑定到属性的触发器添加`IsDoubleClicked`。

# php - javascript 根据另一个多选框中的选择禁用多选框

> ID：14325490
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:16.663
> 
> 标签：php, javascript, jquery, html

我有两个多选框，一个用于国家列表，一个用于州列表

```
<select multiple="multiple" name="country[]" id="country" >
      <option value="0">Select a Country</option>

  <?php 
    foreach($country_list as $key=>$value){
    echo "<option value=\"$key\"";
      if($html['Country Name']==$key|| $row['Country Name']==$key){
       echo ' selected="selected"';
      }
    echo ">$value</option>\n";                                     
    }?>
</select>

<select multiple="multiple" name="state[]" id="state">
      <option value="">Select a State</option>
      <?php 
        foreach($state_list as $key=>$value){
        echo "<option value=\"$key\"";
          if($html['state']==$key|| $row['state']==$key){
            echo ' selected="selected"';
          }
        echo ">$value</option>\n";                                     

        }?>
    </select> 
```

I have this javascript which enables the state box when the country selected is USA.

```
window.onload = function() {
    var selectCountry = document.getElementById('country');
    selectCountry.onchange = function() {
        document.getElementById('state').disabled = (selectCountry.value != 'USA')? true : false;
    };
}; 
```

但是，我希望在第一个选择其他国家和美国时禁用状态框。请问有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:58:57.230

演示：http: [//jsfiddle.net/eBTgb/](http://jsfiddle.net/eBTgb/)

```
$("#country").on("click change", function(){
  var option_usa = $("option[value=6]", this);

  if (option_usa.is(":selected") && option_usa.siblings(":selected").length == 0) {
    $("#state").removeAttr("disabled");
  }
  else {
    $("#state").attr("disabled", "disabled");
  }
}); 
```

我希望你能正确理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:00:04.977

这可以使用 JQuery 来完成。

```
 $("#state").hide();
 $("#country").change( function () {  
    var countryName = $("#country").find("option:selected").html();
    if(countryName == 'USA'){
      $("#state").show(); 
    } else {
      $("#state").hide();
    }
  }); 
```

[这是JSFIDDLE](http://jsfiddle.net/UV9dB/1/)的链接

# c# - 服务器离线时的多客户端服务器通信

> ID：14325491
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:19.063
> 
> 标签：c#, client-server

所以我想创建一个多客户端/服务器应用程序。我知道多个客户端可以通过一个端口连接，并且我希望在服务器“离线”时允许将消息存储在列表中。我无法在线查找信息以帮助我了解服务器如何区分端口上的多个客户端。例如，如果有 2 个客户端在服务器离线时向服务器发送消息，并且我将它们存储在一个列表中，我如何能够告诉服务器该消息首先来自该客户端所以回答这个问题，然后这个消息来了下一个来自这个客户？网上有没有关于实现这一目标的简单方法的信息？任何帮助将不胜感激。

对不起，我没有说得很清楚。我会再尝试！好的，基本上我想要它们之间的中间件，以便客户端通过消息联系中间件，中间件检查服务器是否在线，如果在线，它会发送它，否则它将存储消息直到服务器连接再次。这更有意义吗？我不擅长解释自己，再次抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:49:46.650

这里的概念似乎有些混乱。当客户端未连接时，他们显然无法向服务器发送任何内容，也没有端口。相反，当服务器正在运行并且客户端连接到它时，服务器对每个连接都有一个对象，代表每个客户端。

# php - 一行中的有限字符

> ID：14325492
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:20.343
> 
> 标签：php

我正在设计一个小型应用程序，它会在五个最新的用户中发出类似状态的推文。为了让它成为一个小型应用程序，我需要它在一行上只接受这么多字符，并在它下面放一行。例如：

> 诺亚：Stackoverflow 最棒的地方
> 
> 是它充满了惊人的程序员。

类似于上面的东西。你能帮我写下下面的代码吗：

```
 echo "<div style='position:relative;top:-20px;padding-top:10px;padding-left:30px;padding-right:30px;'>";
  echo "<p> $first_name: $body. </p>"; 
  if (strlen($body <= 100)) {
      echo "\n";
  }
  echo "</div>";                                            
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:48:31.037

[wordwrap](http://php.net/manual/en/function.wordwrap.php)会为你做到这一点

```
string wordwrap ( string $str [, int $width = 75 [, string $break = "\n" [, bool $cut = false ]]] ) 
```

例子：

```
$text = "A very long woooooooooooord.";
$newtext = wordwrap($text, 8, "\n", true);

echo "$newtext\n";

A very
long
wooooooo
ooooord. 
```

# android - 捕获从 Android 模拟器到本地主机的流量？

> ID：14325494
> 
> 赞同：1
> 
> 时间：2013-01-14T19:46:27.593
> 
> 标签：android, android-emulator, fiddler

如何捕获从 Android 模拟器到本地网络服务器的流量？我可以使用提琴手吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:37:56.967

多亏了 EricLaws 的评论，我找到了一种捕获流量的方法。

我不得不使用反向代理并编写 FiddlerScript 规则。我添加了以下行

```
if (oSession.host.toLowerCase() == "10.0.2.2:8888") oSession.host = "localhost:8082"; 
```

在 OnBeforeRequest 函数中。在我的 Android 代码中，我使用地址 10.0.2.2:8888 来访问 localhost:8082。效果很好！

# java - 如何实现 LinkedLists 的二维数组

> ID：14325497
> 
> 赞同：3
> 
> 时间：2013-01-14T19:46:34.180
> 
> 标签：java, arrays, generics, collections

我正在从一篇论文中实现一个算法。该论文描述了使用网格，其中每个网格正方形都包含一个整数链表，这些整数表示该网格正方形中的对象。

我决定使用 来实现这个`LinkedList<Integer>[][]`，这当然给了我一个`generic array creation`错误。

我想不出更好的方式来表示链表网格的概念。我也明白 using`LinkedList[][]`会编译，但因为它是无类型的，所以这是不好的做法。但是，我宁愿不使用`ArrayList<ArrayList<LinkedList<Integer>>>`，因为这是不可读的，至少对我来说是这样。

有没有办法在`LinkedList`这里使用无类型？或者也许其他一些解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:55:07.017

列表版本

```
List<List<List<Integer>>> grid; 
```

不是不可读的。要访问网格正方形，只需

```
List<Integer> items = grid.get(x).get(y); 
```

对膜没那么难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:14:05.173

波西米亚人的答案是正确的。如果您使用的是[Guava](http://code.google.com/p/guava-libraries/)，则可能的替代方法是使用[`ArrayTable<Integer, Integer, List<Integer>>`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ArrayTable.html). 从文档中：

> [`Table`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)由二维数组支持的固定大小实现。
> 
> 创建表时必须提供允许的行键和列键。该表始终包含每个行键/列对的映射。除非提供了另一个值，否则对应于给定行和列的值为 null。
> 
> 表的大小是恒定的：提供的行键的数量和提供的列键的数量的乘积。表或其视图不支持 remove 和 clear 方法。可以改为使用和 `erase(java.lang.Object, java.lang.Object)`方法。`eraseAll()`

这是它的用法示例：

```
private static final int NUM_ROWS = 20; //for example
private static final int NUM_COLS = 20; //

private static final ArrayTable<Integer, Integer, List<Integer>> TABLE =
        ArrayTable.create(
                Ranges.closed(1, NUM_ROWS).asSet(DiscreteDomains.integers()),
                Ranges.closed(1, NUM_COLS).asSet(DiscreteDomains.integers())
        );

public static List<Integer> getGridQuareList(int row, int col) {
    @Nullable List<Integer> list = TABLE.at(row, col);
    if (list == null) {
        list = Lists.newArrayList(); //or newLinkedList() if you insist
        TABLE.set(row, col, list);
    }
    return list;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:59:01.377

我会使用嵌入式`ArrayList`/ `LinkedList`。既然您知道它们将拥有什么样的泛型类型，那么您可以做些什么来清理它，就是将它们包装在其他一些类中。像这样：

```
public class Grid {
    private List<List<List<Object>>> inner;

    public List<Object> objectsAtPosition(int x, int y) {
        return inner.get(x).get(y);
    }

    // etc
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:04:56.950

我不知道你到底为什么需要一个 3 维列表（列表的 2d 数组，考虑到 ArrayLists 实际上是一个 3d 列表/数组）。但如果你**确实**需要，那么你应该使用@Bohemian 写的：

```
List<List<List<Integer>>> grid; 
```

你应该考虑什么：

向接口声明变量，而不是实现，例如：

```
List<Integer> list = new ArrayList<Integer> 
```

代替

```
ArrayList<Integer> list = new ArrayList<Integer> 
```

此外，通常将泛型与数组混合**并不是一个好主意，它会变得很糟糕。**如果您不想在 java 中执行此操作，而这就是您需要以 java 方式执行的操作，正如其他人所说：

```
List<List<List<Integer>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-12T17:25:50.893

您可以按如下方式声明链表的数组..但不要忘记声明何时要使用链表，否则您将得到 nullpointeexception

```
 LinkedList<Integer>[][] ll = new LinkedList[24][24];
    ll[0][0] = new LinkedList<>();
    ll[0][0].addFirst(3);
    System.out.println(ll[0][0].removeFirst()); 
```

输出：3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T19:52:10.267

第一：您可能可以避免使用 LinkedList。在算法书籍中，他们不知道ArrayList，Linked List，更多的是动态列表的同义词。
在几乎所有情况下，ArrayList 都更快，尤其是对于 2D 数组，需要的内存要少得多。

我个人在拥有固定网格和动态内容时使用数组：

```
List grid[][];

// init with
grid = new ArrayList[numX][numY]; 
```

这样我就有了一个对象网格。这使用更少的内存。

这样在添加对象时会更方便：

```
 List list = grid[i][j];
 if (list == null) {
      list = new ArrayList();
      this.cells[i][j] = list;
 }
 list.add(obj); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T00:52:24.460

> 我决定使用 LinkedList[][] 来实现它，这当然会给我一个通用数组创建错误。
> 
> 我想不出更好的方式来表示链表网格的概念。我也明白使用 LinkedList[][] 可以编译，但由于它是无类型的，所以这是不好的做法。

简单的。要解决这些问题，只需

```
LinkedList<Integer>[][] grid = (LinkedList<Integer>[][])new LinkedList<?>[5][3]; 
```

# c# - vb.net mysql将文本框的值与表列中的单个值进行比较

> ID：14325499
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:37.450
> 
> 标签：c#, mysql, wpf, vb.net, email

我有一个用于注册新用户的注册表单。创建用户名（电子邮件）和密码并将其插入 mysql DB 没问题。但是，我想知道如何将插入到文本框中的值与名为 Email 的列的值进行比较。

示例我将电子邮件插入文本框：bee@gmail.com 并点击连接到 mysql DB 的下一步按钮。我想比较值，如果数据库表中存在电子邮件：bee@gmail.com，请让用户知道！这可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:51:25.487

第一步：

```
Create Procedure FindString(
@MyString nvarchar(50))
As
Begin
Select * From MyTable
Where Value = @MyString
End 
```

做一个类：

```
public class ReadData
{
    public bool FindString(string myString)
    {
        SqlConnection connection = new SqlConnection();
        connection.ConnectionString = "Server=..."; //Your connection string
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "FindString";
        command.Parameters.AddWithValue("@MyString", myString);
        try
        {
            connection.Open();
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                return true;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (connection.State == ConnectionState.Open)
                connection.Close();
        }                
        return false;
    }
} 
```

使用类。例如 ：

```
ReadData r = new ReadData();

if (r.FindString("Shahingg"))
    MessageBox.Show("I Found it!");
else
    MessageBox.Show("I can't Find it!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:30:42.623

我找到了答案：

```
 Private Sub Button7_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button7.Click

    con = New MySqlConnection("Database=;" & _
                            "Data Source=;" & _
                            "User Id=;Password=;")

    con.Open()
    Try

        Query = "SELECT Email FROM users WHERE Email='bee@gmail.com'"

        cmd = New MySqlCommand(Query, con)

        reader = cmd.ExecuteReader()

        If reader.HasRows Then
            MessageBox.Show("Email taken")
            '  While reader.Read
            'MysqlData.Text = MysqlData.Text & reader.Item("Email")
            ' End While
        Else
            MessageBox.Show("Email does not exist")
        End If
    Catch ex As Exception

    End Try

End Sub 
```

# c++ - 从 JavaScript (QTWebkit) 运行 c++ 方法

> ID：14325501
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:46.910
> 
> 标签：c++, qt, qt4

我可以像这样将 JavaScript 注入 qtwebkit：

```
view->page()->mainFrame()->evaluateJavaScript(); 
```

但这是一种进行倒置过程的方法吗？**从 JavaScript 运行 C++ 方法？**

我考虑过`*js`用 C++ 解析文件，并在 javascript 中包含一些前缀调用来检测调用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:12:09.967

Qt 内置了强大的集成 C++ 和 Javascript 代码的能力。很容易`QObject`在脚本引擎中提供。

只需看一下[使应用程序可编写脚本](http://doc.qt.digia.com/qt/scripting.html)。

# ruby-on-rails - 循环工作，但邮件不

> ID：14325502
> 
> 赞同：0
> 
> 时间：2013-01-14T19:46:47.843
> 
> 标签：ruby-on-rails

我有一种方法，它基本上会发出通知，告知有人在我的应用程序中提交了表单。我最近更改了我的模型，以便可以通过添加一个 user_designations 模型来通知多个人来处理所有作业（用户被分配到哪个学校等）

方法：

```
 def new_message(applicant)
    @applicant = applicant
    @applicant.school.users.each do |user|
        mail(:to => user.email, :subject => "Submitted Application")
    end
  end 
```

对象：

```
class Applicant
  belongs_to :school

class School 
  has_many :applicants
  has_many :user_designations
  has_many :users, :through => :user_designations

class User 
  has_many :schools, :through => :user_designations
  has_many :applicants, :through => :schools 
```

邮件功能仅适用于循环的最后一次迭代。我也收到一个错误：

> #School:0x007fe064700890 的未定义方法“用户”

基于这么少的信息有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:51:34.283

在 ActionMailer 子类中，每个 mailer 操作在被调用时构造邮件消息的内部表示，以便 Rails 传递。在您的循环中，您只是一遍又一遍地重建相同的邮件消息，因此只有循环的最后一次迭代仍然存在 - 这就是 ActionMailer 的编写方式。

如果您想向多个收件人投递，您有以下几种选择：

*   在调用邮件程序的地方使用循环 ( `Mailer.new_message(...).deliver`)
*   在您的邮件中使用 To/CC/BCC 中的多个地址

# iphone - 将对象序列化为 JSON

> ID：14325503
> 
> 赞同：1
> 
> 时间：2013-01-14T19:46:50.217
> 
> 标签：iphone, ios, objective-c, json, nsarray

我是 JSON 格式的新手，但它看起来非常适合我正在尝试的内容。我需要一个自定义`NSObject`（食谱）并通过电子邮件中的 URL 字符串发送。然后收件人将在我的应用程序中打开链接并解析 URL。

我现有的实现从配方的详细信息手动构建一个字符串，并在另一端对其进行解码。我更喜欢使用更标准的东西，比如 JSON。

到目前为止，我已将以下方法添加到我的`Recipe`课程中：

```
- (NSData *)jsonRepresentation
{
    NSDictionary *dictionary = @{@"name":self.name,
                         @"instructions":self.instructions};
    NSError* error;
    return [NSJSONSerialization dataWithJSONObject:dictionary
                                           options:NSJSONWritingPrettyPrinted
                                             error:&error];
} 
```

我可以`NSData`使用以下方法成功记录此对象：

```
 [[NSString alloc]initWithData:recipe.jsonRepresentation
                      encoding:NSUTF8StringEncoding]; 
```

但是，我还不能添加我的成分列表（一个`NSArray`）。我试图简单地使用它：

```
NSDictionary *dictionary = @{ @"name" : self.name,
                      @"instructions" : self.instructions,
                       @"ingredients" : self.orderedIngredients }; 
```

但在记录时，我收到此错误：

```
Invalid type in JSON write (Ingredient) 
```

如您所知，我对此很陌生。

`ingredients`在将数组添加到字典之前，我是否打算对数组做一些事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:03:56.247

尝试这个：

```
NSDictionary *dictionary = @{ @"name" : self.name,
                      @"instructions" : self.instructions,
                       @"ingredients" : [self.orderedIngredients valueForKey:@"name"] }; 
```

假设这`self.orderedIngredients`是一个包含对象的数组，`ingredients`并且其中`ingredients`有一个属性`name`，

```
[self.orderedIngredients valueForKey:@"name"] 
```

将返回所有名称的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:55:24.340

如果您的成分数组列表包含自定义类对象，您应该为该类创建一个序列化程序。

# linux - Linux 从零开始，Glibc-2.16 报错

> ID：14325504
> 
> 赞同：1
> 
> 时间：2013-01-14T19:46:57.470
> 
> 标签：linux, bash, makefile, glibc, linux-from-scratch

我一直在密切关注“从头开始的 Linux”7.2 版中的命令，并且像往常一样一切都很好，直到我到达第 6.9 章，问题是当我尝试通过“make”命令安装 glibc 时，它会抛出以下错误对我。

```
/bin/sh: command substitution: line 3: syntax error near unexpected token `)'
/bin/sh: command substitution: line 3: `/tools/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../i686-pc-linux-gnu/bin/ar t ../sunrpc/librpc_compat_pic.a | sed 's/^compat-//')'
make[1]: *** [/sources/glibc-build/linkobj/libc_pic.a] Error 1
make[1]: Leaving directory `/sources/glibc-2.16.0'
make: *** [all] Error 2 
```

所以我做了一些研究，令人惊讶的是，我并不孤单遇到这类问题，但不幸的是我找不到好的解决方案（每个线程都有不同的解决方案）。所以这是我到目前为止所知道的关于这个问题的事情。

Bash (4.2.36(1)-release) 显然无法处理括号，尤其是这种类型的语法 '$()'
它可能与 bash 版本有关，
其他使用 () 的命令也不能正常工作
而且因为这是我第一次如此深入地研究 linux，老实说，我不知道自己在做什么以及该做什么。所以我真的很感谢你的帮助。我也读过某处我可以从制作过程中删除所有 $() 但我不知道该怎么做

我正在使用 Ubuntu 12.10 来编译 LFS，是的，我已经检查了他们的脚本并且所有依赖项都得到了满足。并帮助这里的环境输出和简单的回声检查

```
TERM=xterm
PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin
PWD=/sources/glibc-build
PS1=\u:\w\$ 
SHLVL=1
HOME=/root
_=/tools/bin/env
OLDPWD=/bin
root:/sources/glibc-build# echo $(test)
bash: command substitution: line 38: syntax error near unexpected token `)'
bash: command substitution: line 38: `test)'
root:/sources/glibc-build# echo $test 
test 
```

来源： [http ://www.linuxfromscratch.org/lfs/view/stable/index.html](http://www.linuxfromscratch.org/lfs/view/stable/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:12:18.737

好的，所以为了修复这个问题，我不得不再次重建整个 LFS 系统，但是这次在我的主机上安装了上面提到的 bison 和 yacc，所以如果你遇到与我类似的问题，只需执行以下命令即可诡计。

```
sudo apt-get update && apt-get install bison* 
```

# c# - 优化数百万个 char* 到字符串的转换

> ID：14325505
> 
> 赞同：7
> 
> 时间：2013-01-14T19:47:09.750
> 
> 标签：c#, performance, algorithm, c++-cli, string-conversion

我有一个应用程序需要接收数百万个 char* 作为输入参数（通常是少于 512 个字符的字符串（在 unicode 中）），并将它们转换并存储为 .net 字符串。

事实证明，它是我的应用程序性能的真正瓶颈。我想知道是否有一些设计模式或想法可以使其更有效。

有一个关键部分让我觉得它可以改进：有很多重复。假设有 100 万个对象进入，可能只有 50 个独特的 char* 模式。

作为记录，这是我用来将 char* 转换为字符串的算法（该算法在 C++ 中，但项目的其余部分在 C# 中）

```
String ^StringTools::MbCharToStr ( const char *Source ) 
{
   String ^str;

   if( (Source == NULL) || (Source[0] == '\0') )
   {
      str = gcnew String("");
   }
   else
   {
      // Find the number of UTF-16 characters needed to hold the
      // converted UTF-8 string, and allocate a buffer for them.
      const size_t max_strsize = 2048;

      int wstr_size = MultiByteToWideChar (CP_UTF8, 0L, Source, -1, NULL, 0);
      if (wstr_size < max_strsize)
      {
         // Save the malloc/free overhead if it's a reasonable size.
         // Plus, KJN was having fits with exceptions within exception logging due
         // to a corrupted heap.

         wchar_t wstr[max_strsize];

         (void) MultiByteToWideChar (CP_UTF8, 0L, Source, -1, wstr, (int) wstr_size);
         str = gcnew String (wstr);
      }
      else
      {
         wchar_t *wstr = (wchar_t *)calloc (wstr_size, sizeof(wchar_t));
         if (wstr == NULL) 
            throw gcnew PCSException (__FILE__, __LINE__, PCS_INSUF_MEMORY, MSG_SEVERE);

         // Convert the UTF-8 string into the UTF-16 buffer, construct the
         // result String from the UTF-16 buffer, and then free the buffer.

         (void) MultiByteToWideChar (CP_UTF8, 0L, Source, -1, wstr, (int) wstr_size);
         str = gcnew String ( wstr );
         free (wstr);
      }
   }
   return str;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:54:46.557

您可以使用输入字符串中的每个字符来提供[trie](https://en.wikipedia.org/wiki/Trie)结构。在叶子上，有一个 .NET 字符串对象。然后，当`char*`您之前看到的 a 出现时，您可以快速找到现有的 .NET 版本，而无需分配任何内存。

伪代码：

*   从一个空的尝试开始，
*   通过搜索 trie 来处理 char* 直到你不能再继续
*   添加节点，直到您的整个 char* 已被编码为节点
*   在叶子上，附加一个实际的 .NET 字符串

这个其他 SO 问题的答案应该让你开始：[如何在 c# 中创建一个 trie](https://stackoverflow.com/questions/6416050/how-to-create-a-trie-in-c-sharp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:53:53.777

> 有一个关键部分让我觉得它可以改进：有很多重复。假设有 100 万个对象进入，可能只有 50 个独特的 char* 模式。

如果是这种情况，您可能需要考虑将“找到”模式存储在映射中（例如使用`std::map<const char*, gcroot<String^>>`[虽然您需要比较器来`const char*`），并使用它来返回先前转换的值。

存储映射、进行比较等会产生开销。但是，这可以通过显着减少的内存使用量（您可以重用托管字符串实例）以及节省内存分配（calloc/free）来缓解。此外，使用`malloc`代替`calloc`可能是一个（非常小的）改进，因为您不需要在调用之前将内存清零`MultiByteToWideChar`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T20:00:29.440

我认为您可以在这里进行的第一个优化是让您第一次尝试`MultiByteToWideChar`使用缓冲区而不是空指针调用 start。因为您指定`CP_UTF8`,`MultiByteToWideChar`必须遍历整个字符串以确定预期长度。如果有一些长度比绝大多数字符串长，您可能会考虑乐观地在堆栈上分配该大小的缓冲区；如果失败，则进行动态分配。也就是说，如果您的`if/else`块在`if/else`.

您还可以通过计算一次源字符串的长度并显式传递它来节省一些时间——这样 MultiByteToWideChar 就不必`strlen`每次调用它时都执行一次。

也就是说，如果您的项目的其余部分是 C#，您应该使用旨在执行此操作的 .NET BCL 类库，而不是在 C++/CLI 中使用并行程序集来转换字符串。这`System.Text.Encoding`就是为了。

我怀疑您可以在此处使用的任何类型的缓存数据结构都会产生重大影响。

哦，不要忽略 - 的结果`MultiByteToWideChar`- 你不仅不应该将任何东西投射到，而且在事件失败`void`时你会有未定义的行为。`MultiByteToWideChar`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:52:41.297

我可能会使用基于三叉树结构或类似结构的缓存，并在将单个字符转换为 .NET 表示之前查看输入字符串是否已经转换。

# java - 使用 Logback 但 Log4j 开始显示 WARN no Appenders

> ID：14325508
> 
> 赞同：18
> 
> 时间：2013-01-14T19:47:13.557
> 
> 标签：java, logging, log4j, slf4j, logback

我正在使用 logback 进行日志记录，但是它一直在工作；前几天我开始收到警告

log4j:WARN 找不到记录器 (org.apache.axis.i18n.ProjectResourceBundle) 的附加程序。log4j:WARN 请正确初始化 log4j 系统。

我没有使用 log4j，也没有使用过这个项目。我的资源文件夹中有一个 logback.xml。

关于为什么这个警告开始出现的任何想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-14T19:55:24.243

您必须使用确实使用 log4j 的库。你能发布更多关于你的项目的信息吗？

您可能应该将 log4j 桥放在类路径上。在这里阅读更多： [http ://www.slf4j.org/legacy.html](http://www.slf4j.org/legacy.html)

您要查看的 jar 是 log4j-over-slf4j。它将桥接 log4j API 以实际调用您的 slf4j API 实现（在您的情况下 - logback）。

如果你使用 Maven 来构建你的项目，那么它可能就像把

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>log4j-over-slf4j</artifactId>
    <version>1.7.7</version>
</dependency> 
```

在依赖项中。

排除库（如果需要）将以这种方式完成（假设我们正在谈论您提到的 jar 的传递依赖）：

```
 <dependency>
        <groupId>org.swift.common</groupId>
        <artifactId>jira-soap</artifactId>
        <version>4.4.0</version>
        <exclusions>
            <exclusion>
                <groupId>...</groupId>
                <artifactId>...</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-12T06:07:58.237

由于消息是 log4j:WARN No appenders can be found for logger，所以我花了一些时间才知道

我试图排除 log4j 并尝试了 log4j-over-slf4j。

然后我运行 mvn dependency:tree 最后发现 mye commons-configuration 实际上是在使用 commons-logging

```
[INFO] +- commons-configuration:commons-configuration:jar:1.9:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- ch.qos.logback:logback-classic:jar:1.0.13:compile
[INFO] |  +- ch.qos.logback:logback-core:jar:1.0.13:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.7.5:compile
[INFO] +- org.slf4j:log4j-over-slf4j:jar:1.7.6:compile
[INFO] \- org.apache.commons:commons-lang3:jar:3.1:compile 
```

这成为我的解决方案。

```
 <!-- logging with logback (and slf4j)-->
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.13</version>
    </dependency>

    <!-- had a dep in commons-configuration -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.7.6</version>
    </dependency> 
```

# php - 可排序的嵌套 ul li 如何保存到数据库？

> ID：14325509
> 
> 赞同：0
> 
> 时间：2013-01-14T19:47:14.693
> 
> 标签：php, javascript, jquery, mysql, jquery-ui

我需要一个包含一组页面的数据库：他们的 ID、父 ID（如果没有父母，则为 0）和订单。

```
+------+------------+-----------+-------------+
|  ID  |  parentID  |   order   |    Name     |
+------+------------+-----------+-------------+
|  1   |      0     |     1     |    page 1   |
|  2   |      1     |     1     |    page 2   |
|  3   |      1     |     2     |    page 3   |
|  4   |      0     |     2     |    page 4   |
|  5   |      0     |     3     |    page 5   |
+------+------------+-----------+-------------+ 
```

然后我有一个可`ul` `li`与 jQuery 一起使用的可排序嵌套，例如

```
<ul id="sortablenested">
  <li>page 1
  <ul>
     <li>page 2</li>
     <li>page 3</li>
  </ul>
  </li>
  <li>page 4
  <ul></ul>
  </li>
  <li>page 5
  <ul></ul>
  </li>
</ul> 
```

现在，如果它没有嵌套，我将只在每个`li`标签中使用隐藏输入传递一个数组，然后使用 foreach 遍历数组并将位置写入数据库中，但是当我将 a`li`从根移动到`ul`子时`ul`同样的方法它不会嵌套它，而只是通过数组忽略它是一个孩子。

将订单提交到数据库的最佳/正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:02:56.990

如果它很简单，我会发送列表树 ( `innerHtml`) 的整个 HTML，或者编写 JavaScript 函数将其转换为 JSON，然后发送。并在服务器上解析它。

[即使有循环引用，](https://stackoverflow.com/questions/2303713/how-to-serialize-dom-node-to-json)请参阅如何将 DOM 节点序列化为 JSON？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:31:44.573

在你的 foreach 中试试这个

`array('menu' => array(
array( father => 'page 1', link => 'url.php',
child=> array(
array(name=>'page 2', url=>'url.php'),
array(name=>'page 3', url=>'url.php'),)),
array( father => 'page 4', link => 'url.php'),
array( father => 'page 5', link => 'url.php'))
);`

# gwt - 拦截 GWT RPC 的异步代理服务异常

> ID：14325511
> 
> 赞同：2
> 
> 时间：2013-01-14T19:47:25.443
> 
> 标签：gwt, exception-handling, gwt-rpc

我的应用程序有很多 RPC 调用，它们都有一个 .onFailure(Throwable catch) 方法。我有一个在客户端和服务器代码 NotLoggedInException 之间共享的类。如果用户没有基于会话/cookies/权限等的相关权限，则由服务器抛出。

理想情况下，我希望在将其他异常传递给 .onFailure() 代码之前在一个地方处理此异常，因为这种处理无处不在，并且需要确保安全。有一个 GWT.setUncaughtExceptionHandler() 但这似乎是在不理想的处理之后调用的（以防 .onFailure 意外消耗太多）。

有人对此有优雅的解决方案吗？一个丑陋的解决方案是将延迟绑定的 .create() 代理包装在实现异步接口的同一个聚合类中。

旁注：服务器之前发出重定向，但我不喜欢这种范例，并且希望它由应用程序的事件总线处理。

更新：上面提到的丑陋答案

`public abstract class CustomAsyncCallback implements AsyncCallback{`

 ````
@Override
public CustomAsyncCallback(AsyncCallback<T> callback)
{
    this.wrap = callback ;
}

AsyncCallback<T> wrap ;

@Override
public void onFailure(Throwable caught) {
    if (!handleException())
{
    wrap.onFailure(caught) ;
}
}

@Override
public void onSuccess(T t) {
    wrap.onSuccess(t) ;
} 
```

}

public class WrapDeferredBinding implements RpcInterfaceAsync { RpcInterfaceAsync service = GWT.create(RpcInterface.class);

```
public void method1(int arg1, AsyncCallback<Boolean> callback)
{
    service.method1(arg1, new CustomAsyncCallback<Boolean>(callback)) ;
}

public void method2 ....
public void method3 .... 
```` 

`}`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-04T15:58:21.423

为了包装每一个`AsynCallback<T>`传递给任何`RemoteService`你需要覆盖的东西，`RemoteServiceProxy#doCreateRequestCallback()`因为每一个`AsynCallback<T>`都是在 RPC 调用发生之前提交的。

### 以下是执行此操作的步骤：

首先，您需要定义自己的代理生成器，以便在每次`RemoteService`生成代理时介入。从扩展`ServiceInterfaceProxyGenerator`和覆盖开始`#createProxyCreator()`。

```
/**
 * This Generator extends the default GWT {@link ServiceInterfaceProxyGenerator} and replaces it in the
 * co.company.MyModule GWT module for all types that are assignable to
 * {@link com.google.gwt.user.client.rpc.RemoteService}. Instead of the default GWT {@link ProxyCreator} it provides the
 * {@link MyProxyCreator}.
 */
public class MyServiceInterfaceProxyGenerator extends ServiceInterfaceProxyGenerator {
    @Override
    protected ProxyCreator createProxyCreator(JClassType remoteService) {
        return new MyProxyCreator(remoteService);
    }
} 
```

在您`MyModule.gwt.xml`使用延迟绑定来指示 GWT 在生成以下内容时使用您的代理生成器进行编译`RemoteService`：

```
<generate-with 
   class="com.company.ourapp.rebind.rpc.MyServiceInterfaceProxyGenerator">
    <when-type-assignable class="com.google.gwt.user.client.rpc.RemoteService"/>
</generate-with> 
```

扩展`ProxyCreator`和覆盖`#getProxySupertype()`. 使用它，`MyServiceInterfaceProxyGenerator#createProxyCreator()`以便您可以为所有生成的`RemoteServiceProxies`.

```
/**
 * This proxy creator extends the default GWT {@link ProxyCreator} and replaces {@link RemoteServiceProxy} as base class
 * of proxies with {@link MyRemoteServiceProxy}.
 */
public class MyProxyCreator extends ProxyCreator {
    public MyProxyCreator(JClassType serviceIntf) {
        super(serviceIntf);
    }

    @Override
    protected Class<? extends RemoteServiceProxy> getProxySupertype() {
        return MyRemoteServiceProxy.class;
    }
} 
```

确保你`MyProxyCreator`和你`MyServiceInterfaceProxyGenerator`都位于一个不会被 GWT 交叉编译成 javascript 的包中。否则你会看到这样的错误：

```
[ERROR] Line XX: No source code is available for type com.google.gwt.user.rebind.rpc.ProxyCreator; did you forget to inherit a required module? 
```

您现在已准备好扩展`RemoteServiceProxy`和覆盖`#doCreateRequestCallback()`！在这里，您可以做任何您喜欢的事情，并将其应用于发送到您服务器的每个回调。确保将此类以及您在此处使用的任何其他类（在我的情况下`AsyncCallbackProxy`）添加到要交叉编译的客户端包中。

```
/**
 * The remote service proxy extends default GWT {@link RemoteServiceProxy} and proxies the {@link AsyncCallback} with
 * the {@link AsyncCallbackProxy}.
 */
public class MyRemoteServiceProxy extends RemoteServiceProxy {
    public MyRemoteServiceProxy(String moduleBaseURL, String remoteServiceRelativePath, String serializationPolicyName,
                                 Serializer serializer) {
        super(moduleBaseURL, remoteServiceRelativePath, serializationPolicyName, serializer);
    }

    @Override
    protected <T> RequestCallback doCreateRequestCallback(RequestCallbackAdapter.ResponseReader responseReader,
                                                          String methodName, RpcStatsContext statsContext,
                                                          AsyncCallback<T> callback) {
        return super.doCreateRequestCallback(responseReader, methodName, statsContext, new AsyncCallbackProxy<T>(callback));
    }
} 
```

现在，你`AsyncCallbackProxy`可以看起来像这样：

```
public class AsyncCallbackProxy<T> implements AsyncCallback<T> {
    private AsyncCallback<T> delegate;

    public AsyncCallbackProxy(AsyncCallback<T> delegate) {
        this.delegate = delegate;
    }

    @Override
    public final void onFailure(Throwable caught) {
        GWT.log("AsyncCallbackProxy#onFailure() : " + caught.getMessage(), caught);

        if (caught instanceof NotLoggedInException) {
            // Handle it here
        }

        delegate.onFailure(proxy);
    }

    @Override
    public final void onSuccess(T result) {
        delegate.onSuccess(result);
    }
} 
```

* * *

参考：

*   [DevGuideCodingBasicsDeferred.html](http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsDeferred.html)
*   [应用于性能跟踪的示例](http://josephmarques.wordpress.com/2010/11/29/performance-monitoring-using-gwt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:44:28.337

您可以用抽象类包装`AsyncCallback`类：

```
public abstract class CustomAsyncCallback<T> implements AsyncCallback<T>{

    @Override
    public void onFailure(Throwable caught) {
        GWT.log(caught.getMessage());
        handleException();

        this.customOnFailure(yourDesireParam);
    }

    /**
     * this method is optional
     */
    public abstract void customOnFailure(Param yourDesireParam);
} 
```

然后将`CustomAsyncCallback`对象发送到您的 RPC 异步方法。

# java - 用于客户端通知的 AMQP 或 XMPP

> ID：14325515
> 
> 赞同：0
> 
> 时间：2013-01-14T19:47:43.297
> 
> 标签：java, javascript, c#, xmpp, amqp

我正在设计一个自定义消息系统的替代品，该系统目前用于通知 JavaScript Web 应用程序有关来自服务器端 (Java) 的更改内容。这个遗留的消息系统通过使用基于文本的自定义协议和纯 Java 套接字通过 Flash XMLSocket 工作。

替换将不仅由 Web 应用程序（通过 Web 套接字而不是 Flash）使用，而且由用 C# 编写的附加桌面客户端应用程序使用。

我的要求是：

*   用户认证
*   传输加密 (SSL/TLS)
*   双向消息交换
*   某种（自动）发布/订阅，以便用户只获得他们被允许接收的消息
*   基于既定协议的消息交换（以便我们可以在可能的情况下使用现有库）
*   可集群的服务器组件

此时消息系统将仅用于向客户端发布更新。客户端将对这些消息做出反应并直接从服务器获取更多信息（而不是通过消息传递系统）。如果这个新的消息传递系统成功建立，它可能会在未来用于更高级的用例。一些可能性可能包括用户聊天、文件交换和服务器组件的远程控制。

我对实现这些要求的可行技术做了一些研究，我认为我的选择归结为使用[ejabberd](http://www.ejabberd.im/) (XMPP) 或[RabbitMQ](http://www.rabbitmq.com/) (AMQP)。关于我的要求，这两个系统的主要优点和缺点是什么？我们已经将 RabbitMQ 用于系统基础设施的其他部分，所以这是我的自然选择。我只是不确定让客户端应用程序直接连接到这样一个关键的主要组件是否是个好主意。这可以通过只为客户端通知使用不同的 RabbitMQ 安装来缓解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:44:25.250

好吧，您可以使用这两种协议来满足您的需求，xmpp 是一种可扩展的协议，因此毫无疑问，您正在寻找的东西确实已经作为`plugin`协议的正确术语存在。然而，包括我在内的一些人实际上可能认为这是一个缺点，它们给协议增加了额外的复杂性。要记住的另一件事是 xmpp 主要设计为即时消息传递协议。例如，发布/订阅是 xmpp 的[扩展](http://xmpp.org/extensions/xep-0060.html)，而不是协议本身的一部分。

话虽如此，xmpp 得到了 Google 等组织的支持，这意味着有一些主要参与者在使用该协议，因此毫无疑问，其中一些扩展非常好，并且编写/经过深思熟虑。

另一方面，您拥有 AMQP，这是一种几乎专为您所追求的协议而设计的协议。它得到了 JP Morgan、Cisco、Credit Suisse 等组织的支持，因此毫无疑问，AMQP 是一个值得信赖的协议，尽管它的早期版本已受到[批评](http://www.imatix.com/articles:whats-wrong-with-amqp)

[在使用 RabbitMQ 时，内存](https://www.google.se/#hl=sv&sclient=psy-ab&q=RAbbit%20MQ%20memory%20spikes&fp=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&cad=b)似乎存在一些问题，但是我不能说太多，因为我只是收到有关此问题的通知，并且从未真正真正修复它甚至理解它。然而，似乎有不少人在不同版本的 RMQ 上遇到过这种情况。

但对我来说，RabbitMQ 从来没有崩溃过（嘿，如果 erlang 以一件事而闻名，那就是稳定性），设置起来很有趣，而且在集群中设置真的很容易，而且你可以轻松地将队列镜像到多个实例上的 RMQ 并且您可以通过让一个或多个实例将消息写入磁盘来获得额外的安全层。

所以我会说使用 RabbitMQ 和 AMQP，我相信它是一个非常适合您需求的协议，但是已经说过 xmpp 可能也可以很好地完成工作。

我读过[这本书](https://rads.stackoverflow.com/amzn/click/com/1935182978)，它很好地介绍了 AMQP 和 RabbitMQ，但我发现它在技术方面有所欠缺，它基本上是一个很好的教程。

PS：我觉得我应该说实话，我不太确定这`bidirectional message exchange`意味着什么，但如果这意味着发送和接收消息，那么你对 AMQP 也很清楚。:)

我希望这有助于阐明选择哪种协议。

**编辑**

RabbitMQ 有一个叫做 RabbitMQ`virtual hosts`的自己的实例，因此您不必为了处理单独的职责而开始设置集群。根据您设置队列和交换的方式，我认为客户端连接到 RabbitMQ 服务器没有问题，但集群无疑是个好主意。使用 HAProxy 设置 RabbitMQ 似乎也很容易，但这又是我没有经验的事情。

# mysql - 临时mysql表的范围或指定表是临时的

> ID：14325516
> 
> 赞同：0
> 
> 时间：2013-01-14T19:47:48.647
> 
> 标签：mysql, sql

在一组准备好的语句中，我想将在一个准备好的语句中找到的键传递到后面的准备好的语句中。

我可以这样做：

```
PREPARE get_Class_Session FROM
    "CREATE TABLE time_Table_Keys 
             (SELECT time_Table_Key,
                           date,
                           DATE_FORMAT(date, '%W') AS day,
                           slot,
                           class_Session 
                FROM `Time_Table` 
             WHERE (((date >=? && date <= ?) && DAYOFWEEK(date)=? && (slot >=? && slot <=?)) && class_Session ='0')
            )"; 
```

其次是：

```
PREPARE update_Time_Table FROM
    "UPDATE Time_Table SET class_Session='8888'
      WHERE time_Table_Key IN ( SELECT time_Table_Key FROM time_Table_Keys)"; 
```

最后：

```
PREPARE drop_Tmp_Table FROM
    "DROP TABLE time_Table_Keys"; 
```

然而：

我真的很想使用`CREATE TEMPORARY TABLE`，`DROP TEMPORARY TABLE`但是当我尝试这样做时，IN 子句找不到临时表，因为在解析准备时它当然不存在。

是否有某种方法可以指定临时文件的范围，或者是否有某种方法告诉准备 IN 子句中的表是临时的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:21:35.497

也许我遗漏了一些东西，但是对于这种特殊情况，您甚至需要临时表吗？像这样的东西会起作用吗？

```
UPDATE Time_Table 
SET class_Session='8888'
WHERE 
(
  (
     (date >=? && date <= ?) && 
     DAYOFWEEK(date)=? && 
     (slot >=? && slot <=?)
  ) 
  && class_Session ='0'
) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/03f54/1)。

# mysql - 从一个表中选择多行并计算另一个表

> ID：14325517
> 
> 赞同：0
> 
> 时间：2013-01-14T19:47:52.807
> 
> 标签：mysql

我在使用 select 语句时遇到问题。到目前为止我所拥有的是 -

```
SELECT COUNT(booked.desk_id), 
  name, 
  desk.desk_id, 
  phone, 
  fax, 
  dock, 
  pc 
FROM desk, booked 
WHERE desk.desk_id = booked.desk_id 
  AND booking_id >=1 
  AND location = "Cheltenham" 
```

哪个输出

```
"12" "Desk 1" "1" "1" "0" "0" "1" 
```

这和我想要的很接近，但是桌子上还有另一张桌子，叫做Desk 2，它完全忽略了它。事实上，如果有 2 号桌的预订，它会将它们的计数包括在显示为 1 号桌的计数中......

整个表结构如下：

```
table "booked"
INSERT INTO `booked` (`id`, `booking_id`, `desk_id`, `member_id`, `date_booked`) VALUES
(246, 1358121601, 1, 1, 'Monday 14th January at 4:40pm'),
(247, 1358121602, 1, 1, 'Monday 14th January at 4:40pm'),
(248, 1358121604, 1, 1, 'Monday 14th January at 4:40pm'),
(249, 1358121603, 1, 1, 'Monday 14th January at 4:40pm'),
(250, 1358121606, 1, 1, 'Monday 14th January at 4:40pm'),
(251, 1358121605, 1, 1, 'Monday 14th January at 4:40pm'),
(252, 1358121607, 2, 1, 'Monday 14th January at 4:40pm'),
(253, 1358121609, 2, 1, 'Monday 14th January at 4:40pm'),
(254, 1358121608, 2, 1, 'Monday 14th January at 4:40pm'),
(255, 1358121610, 2, 1, 'Monday 14th January at 4:40pm'),
(256, 1358121612, 2, 1, 'Monday 14th January at 4:40pm'),
(257, 1358121611, 2, 1, 'Monday 14th January at 4:40pm');

table "desk"
INSERT INTO `desk` (`location`, `desk_id`, `name`, `phone`, `fax`, `dock`, `pc`) VALUES
('Cheltenham', 1, 'Desk 1', 1, 0, 0, 1),
('Cheltenham', 2, 'Desk 2', 1, 1, 0, 1); 
```

我需要帮助的是如何正确构建语句，以便它将为每张桌子输出单独的行及其相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:50:15.077

您缺少一个`GROUP BY`与您的聚合函数一起使用的：

```
SELECT COUNT(booked.desk_id), 
  name, 
  desk.desk_id, 
  phone, 
  fax, 
  dock, 
  pc 
FROM desk
INNER JOIN booked 
    ON desk.desk_id = booked.desk_id 
WHERE booking_id >=1 
  AND location = "Cheltenham"
GROUP BY name; 
```

在 MySQL 中，您不必`GROUP BY`选择列表中的所有字段，但在其他 RDBMS 中，您必须使用：

```
SELECT COUNT(booked.desk_id), 
  name, 
  desk.desk_id, 
  phone, 
  fax, 
  dock, 
  pc 
FROM desk
INNER JOIN booked 
    ON desk.desk_id = booked.desk_id 
WHERE booking_id >=1 
  AND location = "Cheltenham"
GROUP BY name, desk.desk_id, phone, fax, dock, pc 
```

根据您的示例数据和评论，您可以使用：

```
SELECT coalesce(CountDesk, 0) Total, 
  name, 
  d.desk_id, 
  phone, 
  fax, 
  dock, 
  pc 
FROM desk d
LEFT JOIN
(
  select COUNT(booked.desk_id) CountDesk,
    desk_id
  from booked 
  WHERE booking_id >=1 
  GROUP BY desk_id
) b
    ON d.desk_id = b.desk_id 
WHERE location = "Cheltenham" 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/71000/17)

如果您想在没有子查询的情况下执行此操作：

```
SELECT 
  Coalesce(count(b.desk_id), 0) Total, 
  name, 
  d.desk_id, 
  phone, 
  fax, 
  dock, 
  pc 
FROM desk d
LEFT JOIN booked b
  ON d.desk_id = b.desk_id 
WHERE booking_id >=1 
  AND location = "Cheltenham"
GROUP BY name, d.desk_id, phone, fax, dock, pc ; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/71000/22)

# cocoa - 如何在不让拆分器消失的情况下使 NSSplitView 透明？

> ID：14325521
> 
> 赞同：0
> 
> 时间：2013-01-14T19:48:06.773
> 
> 标签：cocoa, transparent, nssplitview, nscolor

我已经扩展了我的窗口，使其具有按钮内容边框。问题是我的 NSSplitView 覆盖了边界。我的想法是我可以使拆分视图透明（但它上面的控件不透明）。

下图显示了我正在寻找的内容，但缺少拆分器：

![缺少拆分器的屏幕截图](../Images/f0897c3bb08653a6a7c0af640e889892.png)

看看窗口底部是如何有按钮的。这是我想要达到的效果，但没有任何运气。我尝试使用的代码是：

```
CALayer *transparentViewLayer = [CALayer layer];
[viewLayer setBackgroundColor:CGColorCreateGenericRGB(
                                                      256.0,
                                                      256.0,
                                                      256.0,
                                                      0)]; //RGB plus Alpha Channel
[splitView setWantsLayer:YES]; // view's backing store is using a Core Animation Layer
[splitView setLayer: transparentViewLayer]; 
```

如果我没有设置 transparentViewLayer，那么我最终会得到以下结果：

![分离器但隐藏的底栏](../Images/e0deff0a5c7aa0558c6251ca41b82362.png)

它显示了 spitter，但隐藏了窗口底部栏。我还尝试了子类`NSSplitView`化并添加以下内容：

```
- (void) drawRect: (NSRect) dirtyRect
{
    [[NSColor colorWithSRGBRed: 0.0 green: 255.0 blue: 0.0 alpha: 155.0] setFill];
    NSRectFill(dirtyRect);
} // End of drawRect 
```

这给我留下了一个绿色的分离器，并且没有用于 Windows 底栏的 alpha。关于如何达到我想要的效果的任何想法？（我希望底部栏带有我的按钮和拆分器可见）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:58:25.207

在您的子类中，不要覆盖`-[NSSplitView drawRect:]`. 相反，`-drawDividerInRect:`仅在该矩形中覆盖并绘制您的分隔线。当您想按照自己的意愿“弯曲”课程时，请**始终** *先*[查阅文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSplitView_Class/Reference/Reference.html)

# c# - 用于在不更改代码库的情况下使用不同本体的库

> ID：14325525
> 
> 赞同：5
> 
> 时间：2013-01-14T19:48:26.977
> 
> 标签：c#, python, rdf, semantic-web, ontology

我正在写我的毕业论文，我的项目包括从包含有关产品或服务的解析评论的文档中提取知识，使用本体来指示这些产品或服务的“特征”，因此每个都可以被评为正面或负面单独，而不是对整个评论进行单一评分。
虽然我可以，如果需要的话，我会绑定到一个本体并专门从事我的工作，主要想法是从中创建一个框架，所以我会收到一个文件的评论，并将本体放在另一个文件，OWL 或 RDF。

我见过的大多数库或框架的问题是它们依赖于代码生成，而我需要它是动态的，只需更改文件并读取它。
从我所见，即使是 SPARQL 也依赖于了解本体结构，所以这对我来说也是不行的，因为我需要为每个不同的本体创建专门的查询。

是否已经有任何库，无论是用于 .NET 还是 Python（我考虑使用用于编写代码的语言）都允许我以这种方式使用本体，还是由我来写这个？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:19:22.470

在我看来，.Net 最成熟和最积极开发的 RDF 库是[dotNetRDF](http://www.dotnetrdf.org)（*免责声明 - 我是主要开发人员*）

SemWeb 功能强大但已废弃软件，最近一次更新几乎是 3 年前，它不支持自那时以来出现的许多新标准，例如 SPARQL 1.1、RDF/JSON、RDFa 等。

如果您对运行 SPARQL 查询感兴趣，那么 SPARQL 1.1 是一个关键特性，因为它比旧的 SPARQL 1.0 规范更强大、更全面。

dotNetRDF 具有完整的 SPARQL 1.1 查询支持（请参阅W3C 的[SPARQL 1.1 实施报告](http://www.w3.org/2009/sparql/implementations/)） - 请注意，您被推荐的 Python 库 RDFLib 也具有几乎完整的 SPARQL 1.1 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:50:59.300

[RDFlib](https://github.com/RDFLib/rdflib)可能是在 python 中使用 RDF 的最成熟的库。我已经将它用于爱好项目，并且对于那些需求（即有点有限），它并没有让我失望。

```
easy_install rdflib 
```

获取最新的稳定版本。

在 C#-land 中，我会使用[SemWeb.NET](http://razor.occams.info/code/semweb/)（正如在对您的问题的评论中链接的 SO 帖子中也提到的那样）。我没有使用过该库，但作者[Joshua Tauberer](http://razor.occams.info/)是一个非常有能力的 IMO 人。

# vb.net - 协变返回类型和静态类

> ID：14325533
> 
> 赞同：1
> 
> 时间：2013-01-14T19:48:47.700
> 
> 标签：vb.net, design-patterns

请看下面的函数：

```
Public Function Test(ByVal i As Integer) As Animal
        If i = 1 Then
            Return New Dog
        Else
            Return New Cat
        End If

    End Function 
```

函数根据整数的值是否为 1 返回狗或猫。如果 Dog 和 Cat 是静态类，如何处理？即你不能创建一个静态类的实例。我今天下午在 MSDN 网站上阅读了一些关于静态类的网页，但我还没有找到具体问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:58:59.100

> 如果 Dog 和 Cat 是静态类，如何处理？

这不是。你不能“返回一个静态类”——你需要总是返回一个对象。您可以在类上*使用*静态/共享方法来生成或操作对象。例如，如果您在类型上有一个工厂创建方法，您可以执行以下操作：

```
Public Function Test(ByVal i As Integer) As Animal
    If i = 1 Then
        Return Dog.Create(i)
    Else
        Return Cat.Create(i)
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:03:15.573

术语“静态类”是一个 C# 概念，它在 VB.NET 中不存在。所以，不，这是不可能的。

在 C# 中也不可能，静态类只能从 Object 派生。与静态类最接近的 VB.NET 等效项是 Module。很不合适。

您当然可以返回一个类的静态*实例*。如果要在类中声明变量，请在模块中声明变量或使用 Shared 关键字。

```
Class Example 
    Private Shared theDog As Dog
    Private Shared theCat As Cat

    Public Shared Function Test(ByVal i As Integer) As Animal
        If i = 1 Then Return theDog Else Return theCat
    End Function
End Class 
```

# c - libfaac 编码奇怪的输出

> ID：14325537
> 
> 赞同：0
> 
> 时间：2013-01-14T19:49:06.123
> 
> 标签：c, audio, encoding, libfaac

我正在尝试在我的 C 程序中使用 libfaac 将 16 位 RAW PCM 文件编码为 MPEG-4 MAIN AAC 文件。我不知道我做错了什么，所以当我得到 2 倍长的文件和大胆时记录沉默看起来像这样_| _| _| _| _ 当原始文件看起来像这样时 _ _ _ _ _ _

你能告诉我我做错了什么吗？这是我的代码。

```
static void encodeAac( const char *infilename,const char *filename)
{
faacEncHandle codec;
faacEncConfigurationPtr conf;
SAMPLE* samples;
uint8_t*    outbuf;
unsigned long* one;
unsigned long* two;
int outsize;

one=new unsigned long;
two = new unsigned long;
codec=faacEncOpen(SAMPLE_RATE,NUM_CHANNELS,one,two);
if(!codec){
    error("Something went wrong");
    return;
}
conf=faacEncGetCurrentConfiguration(codec);
conf->mpegVersion=MPEG4;
conf->aacObjectType=MAIN;
faacEncSetConfiguration(codec,conf);
FILE *f = fopen(filename, "wb");
FILE *fin=fopen(infilename,"rb");
if (!fin) {
    error("could not open temporary file");
}
if (!f) {
    error("could not open output file");
}
samples = new SAMPLE[*one];
outbuf = new uint8_t[*two];
while(fread(samples,sizeof(SAMPLE),*one,fin)){
    outsize=faacEncEncode(codec,(int*)samples,*one,outbuf,*two);
    fwrite(outbuf,sizeof(uint8_t),outsize,f);
}
while(outsize != 0){
    outsize=faacEncEncode(codec,NULL,NULL,outbuf,*two);
    fwrite(outbuf,sizeof(uint8_t),outsize,f);
}

fclose(f);
fclose(fin);
delete outbuf;
delete samples;
faacEncClose(codec);

} 
```

# meteor - Meteor：如果已经登录，则重定向用户

> ID：14325540
> 
> 赞同：5
> 
> 时间：2013-01-14T19:49:14.793
> 
> 标签：meteor

我正在使用[meteor-router](https://github.com/tmeasday/meteor-router)`/user` ，如果他请求`/`并且他已经登录，我想将用户重定向到。

正如预期的那样，这只是呈现`user_index`模板而不是更改 URL：

```
Meteor.Router.add
  '/': -> if Meteor.userId() then 'user_index' else 'index' 
```

我想做这样的事情：

```
Meteor.Router.add
  '/': -> if Meteor.userId() then Meteor.Router.to '/user' else 'index' 
```

* * *

### 2014 年 6 月 4 日更新：

这个问题不再相关，应该改用[iron-router 。](https://github.com/EventedMind/iron-router)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-04T21:11:45.280

流星路由器现已[弃用](https://github.com/tmeasday/meteor-router#note)。而是使用可以根据登录状态重定向的[Iron-router使用：](https://atmospherejs.com/package/iron-router)

```
Router.configure({layoutTemplate: 'mainLayout'});

Router.map(function() {
  this.route('splash', {path: '/'});
  this.route('home');
});

var mustBeSignedIn = function(pause) {
  if (!(Meteor.user() || Meteor.loggingIn())) {
    Router.go('splash');
    pause();
  }
};

var goToDashboard = function(pause) {
  if (Meteor.user()) {
    Router.go('home');
    pause();
  }
};

Router.onBeforeAction(mustBeSignedIn, {except: ['splash']});
Router.onBeforeAction(goToDashboard, {only: ['splash']}); 
```

示例取自：[Meteor.js - 在渲染前检查登录状态](https://stackoverflow.com/questions/23139627/meteor-js-check-logged-in-status-before-render)

- 或者 -

使用[accounts-entry](http://atmospherejs.com/package/accounts-entry)包。从[他们的网站](http://github.differential.io/accounts-entry/)：

> **确保路由的登录用户**
> 
> 使用 AccountsEntry.signInRequired(this) 来要求登录用户的路由。将其粘贴在您的 before 钩子函数中，它将重定向到登录并停止任何渲染。Accounts Entry 还跟踪用户试图去的地方，并在登录后将它们路由回去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:22:51.727

您正在寻找- 这是来自[文档](https://github.com/tmeasday/meteor-router)`filter`的示例：

```
Meteor.Router.filters({
    'checkLoggedIn': function(page) {
        if (Meteor.loggingIn()) {
            return 'loading';
        } else if (Meteor.user()) {
            return page;
        } else {
            return 'signin';
        }
    }
});

// applies to all pages
Meteor.Router.filter('checkLoggedIn'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:51:47.453

根据[这个问题](https://github.com/tmeasday/meteor-router/issues/30)，看起来重定向不是流星路由器的一部分，也可能不是。现在我最终解决了这个问题。如果项目更改以适应重定向，我将更新我的答案，或者其他人可以发布另一个答案。

**2013 年 1 月 23 日更新：**

我转而使用[mini-pages](https://github.com/cmather/meteor-mini-pages)，它可以正确处理这种情况并包含许多很棒的功能，例如布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T16:49:50.870

Meteor Router 允许你直接访问响应对象，所以你可以做一个 302 重定向。像下面这样的东西会起作用：

```
Meteor.Router.add("/test/:_id", (id) ->
  this.response.writeHead '302', {'Location': '/blah/' + id}
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T15:59:27.887

您可以通过使用标准过滤器并将重定向包装在 defer 对象中来做到这一点。

```
Meteor.Router.filters({
requireLogin: function(page) {
    if(! (Meteor.loggingIn()|| Meteor.user()) ){
        Meteor.defer(function () {
            Meteor.Router.to('/login');
        });
    }
    return page;
}

Meteor.Router.filter('requireLogin', {except: 'login'}); 
```

# html - 使用 CSS 选择器遍历 HTML 标签树

> ID：14325542
> 
> 赞同：2
> 
> 时间：2013-01-14T19:49:18.693
> 
> 标签：html, css, css-selectors

```
<div>
  <div class="header">
    <div id="navbar" >
      <ul id="nav">
        <li><a id="trigger"><span><p></p></span></a></li>
        <li><a id="target"><span><p></p></span></a></li>
      </ul>
    </div>
  </div>
</div> 
```

嘿伙计们，我有一个问题，如果它不会给你们带来任何不便，与遍历 HTML 树有关。

我已经知道如何`<a id="trigger"></a>`使用以下语法进行选择：

`div>div.header>div#navbar>ul#nav>li>a#trigger:hover {CSS}`将触发更改。

但问题来了，我想定位`<a id="target""></a>`它下面的标签，但我还没有找到访问`<a id="affected"></a>`那里的正确语法。

我希望当我悬停 id="trigger" 时，id="target" 会受到影响。

我已经尝试使用 + 选择器来定位该 id，唉，试验以徒劳的方式结束。

是否有可能影响该ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:58:29.103

您可能需要相邻的兄弟选择器：

```
#trigger:hover + #target {} 
```

或者可能是兄弟组合器，它不需要第二个元素直接相邻：

```
#trigger:hover ~ #target {} 
```

[http://css-tricks.com/child-and-sibling-selectors](http://css-tricks.com/child-and-sibling-selectors)

更新：正如下面评论中所述，选择器实际上必须是兄弟姐妹。在原始结构中，它们不是。

```
<div>
  <div class="header">
    <div id="navbar" >
      <ul id="nav">
        <li class="one"><a id="trigger">Trigger</a></li>
        <li class="two"><a id="target">Target</a></li>
      </ul>
    </div>
  </div>
</div>

.one:hover + .two {color: red} 
```

[http://jsfiddle.net/5Gmz9/1/](http://jsfiddle.net/5Gmz9/1/)

这是另一种不需要 li 元素上的类或 ID 的方法：

```
#nav li:first-child:hover + li {color: red} 
```

[http://jsfiddle.net/5Gmz9/2/](http://jsfiddle.net/5Gmz9/2/)

每种方法都有其缺陷。

* * *

顺便一提，

```
div>div.header>div#navbar>ul#nav>li>a#trigger:hover {} 
```

可能写得很好

```
#navbar #trigger:hover {} 
```

为您和浏览器节省一些工作。

# silverlight - Silverlight MVVM 将 DataGrid 绑定到 DynamicObject，重新评估动态成员

> ID：14325543
> 
> 赞同：1
> 
> 时间：2013-01-14T19:49:19.490
> 
> 标签：silverlight, binding, dynamicobject

我有一个 ViewModel，它公开了一个 DataSource，它是 DynamicObjects 的 ObservableCollection。绑定后，DataGrid 对第一个 DataSource 项调用 GetDynamicMemberNames() 以获取它需要自动生成和绑定到的列。到目前为止，一切都很好。

但是，当我将 DataSource 更改为包含具有完全不同属性的项目并为 DataSource 引发 PropertyChanged 时，Grid 不会重新评估动态成员！

我的问题是，如何让 DataGrid 重新评估 DynamicObject 的成员？如何在初始绑定后强制它调用 GetDynamicMemberNames？

一些代码：

```
 private ObservableCollection<dynamic> _dataSource;
    public ObservableCollection<dynamic> DataSource
    {
        get 
        { 
           if(_dataSource == null)
           {
               _dataSource = new ObservableCollection<dynamic>();
               foreach(var model in SourceModels)
               {
                   var row = new DynamicDataRow()  // Inherits from DynamicObject ...
                   row["SomeProperty"] = model.GetType().GetProperty("SomeProperty").GetValue(model, null);
                   _dataSource.Add(row);
               }
           }
           return _dataSource; 
         }
    } 
```

如果我在 ViewModel 构造函数中填充 SourceModels 集合，这将起作用。

我正在寻找的是在更改 SourceModels 集合后以调用 GetDynamicMemberNames() 的方式重新绑定网格的某种方法。最好以MVVM方式...

有人可以帮帮我吗？

# javascript - 如果在 jQuery 中选择了选项，则显示 div

> ID：14325548
> 
> 赞同：10
> 
> 时间：2013-01-14T19:49:32.367
> 
> 标签：javascript, jquery, css, html

如果在我的页面上选择了 2 个选项之一，我正在尝试显示一个 div。这是选择菜单：

```
<select id="graph_select">
<option id="pilot_form">Pilot Hours</option>
<option id="client_form">Client Hours</option>
</select> 
```

这是我第一个选项的第一个 div：

```
<div id="pilot_graph_form" align="center" style="margin:0 auto; display:none;">
        <form action="?page=reporter" method="POST" name="graph_form">
            <p>From:</p>
            <select name="start_date">
                <cfloop query="date_worked_menu">
                    <option>#date_worked_menu.date_worked#</option>
                </cfloop>
            </select>
            <br />
            <br />
            <p>To:</p>
            <select name="end_date">
                <cfloop query="date_worked_menu">
                    <option>#date_worked_menu.date_worked#</option>
                </cfloop>   
            </select>
            <br />
            <input class="btn btn-success" type="Submit" name="submit_to_graph" value="Submit" id="submit_to_graph">
        </form>
    </div> 
```

这是我的第二个选项的 div：

```
<div id="client_graph_form" align="center" style="margin:0 auto; display:none;">
        <form action="?page=reporter" method="POST" name="graph_form_clients">
            <p>From:</p>
            <select name="client">
                <cfloop query="client_menu">
                    <option value="#client_menu.id#">#client_menu.name#</option>
                </cfloop>
            </select>
            <input class="btn btn-success" type="Submit" name="submit_to_graph" value="Submit" id="submit_to_graph">
        </form>
    </div> 
```

这是我到目前为止的 jQuery 函数：

```
<script type="text/javascript">
$(function() {
    $("#graph_select").change(function() {
        if($("#pilot_form").is(":selected")) {
            $("#pilot_graph_form").css({"display":"block"});
        }
        else {
            $("#pilot_graph_form").css({"display":"none"});
        }
        if($("#client_form").is(":selected")) {
            $("#client_graph_form").css({"display":"block"});
        }
        else {
            $("#client_graph_form").css({"display":"none"});
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T20:01:11.500

首先，您应该将“选项”上的“id”更改为“值”。

然后你可以使用这个：

```
$(function () {
  $("#graph_select").change(function() {
    var val = $(this).val();
    if(val === "pilot_form") {
        $("#pilot_graph_form").show();
        $("#client_graph_form").hide();
    }
    else if(val === "client_form") {
        $("#client_graph_form").show();
        $("#pilot_graph_form").hide();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T19:58:36.633

```
$(function() {
  $("#graph_select").change(function() {
    if ($("#pilot_form").is(":selected")) {
      $("#pilot_graph_form").show();
      $("#client_graph_form").hide();
    } else {
      $("#pilot_graph_form").hide();
      $("#client_graph_form").show();
    }
  }).trigger('change');
}); 
```

[***演示***](http://jsfiddle.net/a6C7F/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:54:34.710

更改选择框时，您可以淡入您想要的元素：

```
$('#graph_select').change(function(){
   var divID = $(this).children('option:selected').attr('id');
   if(divID == 'pilot_form'){
       $('#client_graph_form').fadeOut(1000,function(){
           $('#pilot_graph_form').fadeIn(500);
       });
   }else{
       $('#pilot_graph_form').fadeOut(1000,function(){
           $('#client_graph_form').fadeIn(500);
        });
   }
}); 
```

 ****以其他方式****更新**： 如果您在选项中使用与 div 的 id 名称相同的名称会更好：**

 **```
<select id="graph_select">
    <option class="pilot_graph_form">Pilot Hours</option>
    <option class="client_graph_form">Client Hours</option>
</select> 
```

为每个添加相同的类`<div>`

```
<div id="client_graph_form" class="forms"
...
<div id="pilot_graph_form" class="forms" 
```

**jQuery :**

```
$('#graph_select').change(function(){
   var divID = $(this).children('option:selected').attr('class');
   $('.forms').fadeOut(1000,function(){
        $('#'+divID).fadeIn(500);
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T20:02:45.023

代码没问题，加载jquery可能有问题，建议你使用

```
 $(window).load(function(){
        //Code
    }); 
```**

# android - SimpleCursorAdapter 返回空数据

> ID：14325553
> 
> 赞同：0
> 
> 时间：2013-01-14T19:49:56.190
> 
> 标签：android, listview, android-listview, simplecursoradapter

当我试图通过 SimpleCursorAdapter 将数据从数据库放入 ListView 时，ListView 的行显示但它们是空的。

像：

[ ***_* __ *_* __ *_* ____** ]

[ ***_* __ *_* __ *_* ____** ]

[ ***_* __ *_* __ *_* ____** ]

代替：

[文本]

[文本]

[文本]

我的代码：

```
 db = provider.getReadableDatabase();
    String[] columns = {"_id", "Title"};
    Cursor cursor = db.query(NotificationsProvider.TABLE_NAME, columns, null, null, null, null, null);
    Log.d(TAG, "COUNT: "+cursor.getCount());
    String[] clm = {"Title"};
    int[] to = {android.R.id.list};
    cursorAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_1,
            cursor, clm, to, 0);

    setListAdapter(cursorAdapter); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:56:29.857

您只是使用了错误的ID，请尝试：

```
int[] to = {android.R.id.text1}; 
```

（您可以自行检查[`simple_list_item_1.xml`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.4_r1/frameworks/base/core/res/res/layout/simple_list_item_1.xml)以验证相应的身份。）

# javascript - Javascript requirejs 在开发中但在生产中编译

> ID：14325554
> 
> 赞同：14
> 
> 时间：2013-01-14T19:50:01.600
> 
> 标签：javascript, requirejs, modularity

我开始评估 RequireJS 之类的 javascript 模块工具来实现 javascript 模块化。`mylib-<version>.js`这似乎很有用，尤其是在开发过程中，因此每当我更改依赖文件之一时，我都不需要重新编译所有 js文件。

我的应用程序与 html 和 javascript 文件一起分发，在生产中，我想使用 javascript 文件的编译版本。

所以在开发中，我的 html 文件可能看起来像

```
<html>
  <head>
    <script data-main="scripts/main" src="scripts/require.js"></script>
  </head>
</html> 
```

但在生产中，我希望它看起来更像

```
<html>
  <head>
    <script src="mylib-1.0.js"></script>
  </head>
</html> 
```

如果我分发已编译的文件，我不认为它应该有任何需要引用 requirejs 的生产。

有没有办法在分发应用程序之前不必手动更改我的 html 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T20:31:01.303

RequireJs 有一个[优化工具](http://requirejs.org/docs/optimization.html)，可以帮助你缩小和连接你的模块。它有很多选项，并且可能难以使用，但是使用像[GruntJs](http://gruntjs.com/)或（尤其是）使用 GruntJs 构建的[Yeoman这样的构建工具会变得更容易。](http://yeoman.io/)

在这两种情况下，您都可以使用`rjs`任务（优化模块），但**Yeoman**还是更容易一些，因为它有生成器，可以为您配置它：

```
// usemin handler should point to the file containing
// the usemin blocks to be parsed
'usemin-handler': {
  html: 'index.html'
},
// rjs configuration. You don't necessarily need to specify the typical
// `path` configuration, the rjs task will parse these values from your
// main module, using http://requirejs.org/docs/optimization.html#mainConfigFile
//
// name / out / mainConfig file should be used. You can let it blank if
// you're using usemin-handler to parse rjs config from markup (default
// setup)
rjs: {
  // no minification, is done by the min task
  optimize: 'none',
  baseUrl: './scripts',
  wrap: true,
  name: 'main'
}, 
```

在`index.html`您只需使用注释行来指定哪些 js 文件应该被缩小/连接到哪个输出文件：

```
 <!-- build:js scripts/amd-app.js -->
    <script data-main="scripts/main" src="scripts/vendor/require.js"></script>
    <!-- endbuild --> 
```

在上面的示例中，模块将连接到一个名为`amd-app.js`.

**编辑：**

这将通过`grunt`从命令行执行来完成。这将启动许多有用的任务，这将在一个文件夹中构建项目`dist`，但这又是高度适应性的。

生成的`index.html`文件（in `dist`）只有（如果需要）一个 javascript 文件：

```
<script src="scripts/15964141.amd-app.js"></script> 
```

**我的建议：使用 Yeoman 让生活更轻松（至少在处理缩小/连接时）。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:34:39.263

首先，您必须使用[r 编译器](http://requirejs.org/docs/optimization.html#onejs)将您的依赖树编译成一个文件。之后，您可以像[almond](https://github.com/jrburke/almond)这样的精简 AMD 加载程序。至少您必须找到一种方法来更改索引 html 中的 url。

看看[gruntjs](http://gruntjs.com/)，它可以使整个事情自动化，有一堆任务喜欢[usemin](https://github.com/yeoman/grunt-usemin)来帮助你完成这个过程。

# sqlite - sqlite3 - SQLite3 shell 遇到问题

> ID：14325556
> 
> 赞同：0
> 
> 时间：2013-01-14T19:50:06.180
> 
> 标签：sqlite

我是 SQLite3 的新手。

我正在尝试在 shell 中创建一个数据库。当我运行 shell 时，它已经显示：

> SQLite 版本 3..
> 
> 输入“.help”以获取说明..
> 
> 输入 SQL...
> 
> 输入以“;”结尾的 SQL 语句

我在某处读到应该可以输入“$”和“$ sqlite3 mynotes.db”之类的代码

现在，我需要能够命名我的数据库（如“mynotes.db”）并能够决定我希望将其保存在哪个文件夹中。

有人能帮我吗？干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:02:29.423

`$`某处应该是某个shell（命令处理器）的提示，您可以在其中启动并`sqlite3`指定数据库名称（如果不存在则创建）。

如果您在`sqlite3`没有外壳的情况下运行（通过单击`sqlite3.exe`？），是时候尝试另一种方式了。`CMD.EXE`在 Windows 上与典型的 Unix shell 一样适合这项工作。

从数据库所在的文件夹开始：`cd`在运行之前到此文件夹`sqlite3 mynotes.db`，或指定数据库的完整路径名：（`sqlite3 "C:\Users\Me\Documents and Settings\mynotes.db"`当参数包含空格时需要双引号）。

无参数启动时`sqlite3`，数据库将在内存中。Sqlite3 支持“附加”其他数据库（参见[ATTACH DATABASE](http://www.sqlite.org/lang_attach.html)描述）。这样，即使`sqlite3`由于某种原因（或太难）无法使用参数启动，您也可以创建和打开磁盘数据库。

# gwt - GWT 2.5.0 mvn 安装错误“重新绑定结果 必须是一个类”

> ID：14325562
> 
> 赞同：2
> 
> 时间：2013-01-14T19:50:17.277
> 
> 标签：gwt, maven, maven-war-plugin, gwt-maven-plugin

**问题**：我在使用[gwt-maven-plugin](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/archetype.html)`mvn install`构建的 GWT 2.5.0 项目上运行并得到错误。`Rebind result 'c3gw.fwk.gui.client.ClientFactory' must be a class`

这是我的 pom.xml 的片段：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>2.5.0</version>
    <executions>
      <execution>
         <goals>
             <goal>compile</goal>
             <goal>test</goal>
             <goal>i18n</goal>
             <goal>resources</goal>
             <goal>generateAsync</goal>
         </goals>
      </execution>
     </executions>
     <configuration>
       <runTarget>C3gwGui.html</runTarget>
       <hostedWebapp>${webappDirectory}</hostedWebapp>
       <i18nMessagesBundle>c3gw.fwk.gui.client.Messages</i18nMessagesBundle>
     </configuration>
  </plugin>

  <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-war-plugin</artifactId>
      <version>2.1.1</version>
      <executions>
          <execution>
              <phase>compile</phase>
              <goals>
                  <goal>exploded</goal>
              </goals>
          </execution>
      </executions>
      <configuration>
          <webappDirectory>${webappDirectory}</webappDirectory>
      </configuration>
  </plugin> 
```

这是我的 C3gwGui.gwt.xml 的片段：

```
<replace-with class="c3gw.fwk.gui.client.ClientFactoryImpl">
    <when-type-is class="c3gw.fwk.gui.client.ClientFactory" />
</replace-with> 
```

这是引发错误的行的片段：

```
public void onModuleLoad() {
    ClientFactory clientFactory = GWT.create(ClientFactory.class);

    ...
} 
```

ClientFactory 是一个接口，ClientFactoryImpl 实现了该接口。

**到目前为止我发现**：当我运行调试时，代码在 Eclipse 中运行良好，但当我执行 mvn install 时它就不起作用了。我已经运行了 gwt-maven-plugin 可用的所有目标（清理、编译、源代码等），它们都可以工作，所以我现在唯一能得出的结论是在 maven-war 期间发生了一些事情-plugin 阶段或更晚。

我还从以下[google 教程](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)中获取了此代码的基础知识，他们使用了一个接口，因此它应该可以工作，假设示例项目也可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-16T14:45:01.353

消除战争：正如托马斯所说，爆炸解决了这个问题。

# iphone - 将 GameCenter 用于并行回合制游戏？

> ID：14325565
> 
> 赞同：4
> 
> 时间：2013-01-14T19:50:31.693
> 
> 标签：iphone, ios, objective-c, ipad, game-center

我玩过使用 GameCenter 制作回合制游戏。我理解默认情况下，GameCenter 假定在任何给定时间，在众多参与者中，只有一名玩家持有“接力棒”，并且该玩家是唯一可以影响当前游戏状态的玩家。游戏玩法是异步的，即轮到谁都可以慢慢来，一旦轮到其他玩家就会收到通知。

到目前为止，一切都很好。

现在我想使用 GameCenter 来实现一种类似但略有不同的回合制游戏：一种异步游戏，其中玩家不是连续的玩家连续，而是并行地进行回合，然后将它们合并为一个新的游戏状态一次所有玩家都“上交”了他们的动作。

一个很好的模型游戏是**Rock, Paper, Scissors**：两个玩家都秘密决定他们的动作（“ *rock* ”，或“ *paper* ”，或“scissors”）。然后将它们提交到服务器的顺序是任意的；即，当玩家尝试在正在进行的回合中提交移动时，任何玩家都不应该出现“不轮到你”类型的错误。一旦他们都上交了他们的动作，所有玩家的选择都会被揭示，并确定/宣布当前回合的获胜者。

问题是：是否有可能通过设计或变通方法将 GameCenter 基础设施用于此类游戏？如果是这样，什么是好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:58:15.447

无法按照您建议的方式使用 Game Center 来实现这一点，但您可以采取一种看起来好像您确实设法做到这一点的方法。

当您开始回合制比赛时，总是轮到本地玩家。游戏中心要么为您提供空白比赛，要么您将收到一场已经轮到其他人参加的比赛。没有办法控制这一点，因此您需要为两者做好准备。

您可以采取的方法是让玩家在向他们展示其他人的动作之前总是轮到他们。只有这样，您才能检查在您当地的情况下，每个人现在是否都轮到他们了，并且您会显示结果。这将提供您所要求的错觉。在石头剪刀布的情况下，您现在可以决定比赛结果。将通知其他玩家。

但是，如果不是每个人都轮到了这一轮，不要显示任何东西，也更新游戏状态，但告诉用户你现在正在等待其他人轮到他们。当您被通知再次轮到您时，您将能够显示结果，并且游戏状态已经指示结果。

# c++ - IWbemClassObject->Put 方法返回 WBEM_E_NOT_FOUND 错误

> ID：14325567
> 
> 赞同：0
> 
> 时间：2013-01-14T19:50:50.210
> 
> 标签：c++, wmi, wbem

我有一个 C++ 代码块，我试图在其中调用公司指定的 WMI 方法。在尝试构建表示参数的 IWbemClassObject 时，我收到 WBEM_E_NOT_FOUND 错误消息。根据 [MSDN 站点](http://msdn.microsoft.com/en-us/library/windows/desktop/aa391455%28v=vs.85%29.aspx "MSDN 网站")，这不应该是有效的 HRESULT。

```
/* pSvc has been setup already, all calls returned S_OK. Ugly Debugging statements have been sprinkled throughout the code. */
HRESULT hres;
IWbemClassObject* DataInClass;
IWbemClassObject* DataOutClass;
IWbemClassObject* CallingObject;
/* Grab the types of parameters we will be using for Input and Output.
DataIn and DataOut are set to the classes we will  be using */
hres = pSvc->GetObject(
    _bstr_t("ObjectName"),
    WBEM_FLAG_RETURN_WBEM_COMPLETE,
    NULL,
    &CallingObject,
    NULL
    );
cout << "GetObject:" << hres << endl;

string function_type = "MethodName";

hres = CallingObject->GetMethod(
    _bstr_t(function_type.c_str()),
    0,
    &DataInClass,
    &DataOutClass
    );
cout << "GetMethod:" << hres << endl;
if(hres == WBEM_S_NO_ERROR) cout << "No Error" << endl;
if(hres == WBEM_E_NOT_FOUND) cout << "Not found" << endl;
if(hres == WBEM_E_OUT_OF_MEMORY) cout << "OOM" << endl;
/* Create an instance of DataIn and DataOut and populate the parameters */
IWbemClassObject* DataIn;
IWbemClassObject* DataOut;
hres = DataInClass->SpawnInstance(0, &DataIn);
hres = DataOutClass->SpawnInstance(0, &DataOut);

/* NOTE: up to this point, all HRESULTS have been returning S_OK. I'm getting appropriate pointer values, so it appears that the code can connect to WMI. */

/* Set all of the parameters needed for DataIn */
VARIANT var;
// Active: true
_variant_t varActive(true);
var = varActive.Detach();
hres = DataIn->Put(_bstr_t("Active"), 0, &var, 0);
VariantClear(&var);
switch(hres){
case WBEM_E_FAILED: cout << "Failed" << endl; break;
case WBEM_E_INVALID_PARAMETER: cout << "ip" << endl; break;
case WBEM_E_INVALID_PROPERTY_TYPE: cout << "ipt" << endl; break;
case WBEM_E_OUT_OF_MEMORY: cout << "oom" << endl; break;
case WBEM_E_TYPE_MISMATCH: cout << "typem" << endl; break;
case WBEM_S_NO_ERROR: cout << "ok" << endl; break;
case WBEM_E_NOT_FOUND: cout << "WHAT!?" << endl; break; // This is the error code being returned from DataIn->Put
default: cout << "nota?" << endl; break;
} 
```

有谁知道为什么会发生这种情况，以及我该如何解决？

非常感谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T17:44:13.520

通常，此错误出现在“GET”命令中。在大多数情况下，错误的具体原因取决于您尝试访问的 WMI 类。例如，当尝试连接到性能计数器时， [WMIDiag](http://www.microsoft.com/en-us/download/details.aspx?id=7684)说明了何时返回此错误：

> 当缺少 WMI 性能类（即“Win32_PerfRawData_TermService_TerminalServices”）时，通常是由于 WMI 类提供程序缺乏缓冲区刷新而暴露了 WMI 性能计数器。
> 您可以使用以下命令刷新 WMI 类提供程序缓冲区：
> 'WINMGMT.EXE /SYNCPERF'

在其他情况下，此错误似乎最常由损坏的存储库引起。有关示例，请参阅[此MS 知识库文章。](http://support.microsoft.com/kb/2465990)

由于您提到了“公司指定”的 WMI 方法，我假设您已经注册了自己的 WMI 提供程序。在我重建存储库之前，我怀疑此提供程序未正确注册到 WMI。

你问这个问题已经快一年了，我想你可能想通了。如果是这样，我认为社区会感谢您在此处发布您的结果，以便其他用户可以从中受益。

# join - Apache Pig：通过移位加入记录

> ID：14325571
> 
> 赞同：1
> 
> 时间：2013-01-14T19:51:02.203
> 
> 标签：join, apache-pig

我有以下类型的记录：

```
time | url
==========
34 google.com 
42 cnn.com
54 yahoo.com
64 fb.com 
```

我想在这些记录中添加另一列，`time_diff`它基本上取当前记录与上一条记录的时间差。输出应如下所示：

```
time | url | time_diff
======================
34 google.com -- <can drop this row>
42 cnn.com    08
54 yahoo.com  12
64 fb.com     10 
```

如果我可以以某种方式添加另一列（与 相同`time`）将`time`42 与 34 对齐，54 与 42 对齐，依此类推，那么我可以利用这些列之间的差异来计算`time_diff`列。

我可以将`time`列投影到一个新变量`T`，如果我可以删除原始数据中的第一条记录，那么我可以加入它`T`以获得所需的结果。

我很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:26:28.167

例如，请参阅[这个问题](https://stackoverflow.com/questions/13984701/pig-get-index-in-nested-foreach)。您需要将元组放在一个袋子中（`GROUP ... ALL`在您的情况下使用），然后在嵌套的`FOREACH`,`ORDER`它们中并调用 UDF 对它们进行排名。获得此等级后，您可以`FLATTEN`再次将袋子放回一组元组中，您将拥有三个字段：`time`、`url`和`rank`。一旦你有了这个，创建第​​四列即`rank-1`，对后两列进行自连接，你将拥有计算`time_diff`.

由于多条记录可以具有相同的`time`，因此最好也进行排序，`url`以保证每次都得到相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T02:03:20.447

我认为您可以使用 PiggyBank 的“引导”功能。像下面这样的东西可能会起作用。

```
 A = LOAD 'T';

 B = GROUP A ALL

 C = FOREACH B {
     C1 = ORDER A BY d;
     GENERATE FLATTEN(Stitch(C1, Over(C1.time, 'lead')));
 }

 D = FOREACH C
    GENERATE stitched::time AS time,
            stitched::url AS url,
            stitched::time - $3 AS time_diff; 
```

[https://pig.apache.org/docs/r0.12.0/api/org/apache/pig/piggybank/evaluation/Over.html](https://pig.apache.org/docs/r0.12.0/api/org/apache/pig/piggybank/evaluation/Over.html)

# vim - 如何为 Vim 的 SnipMate 启用 SCSS 片段？

> ID：14325574
> 
> 赞同：1
> 
> 时间：2013-01-14T19:51:07.407
> 
> 标签：vim, sass, snipmate

我已经为 Vim 7.3安装了[garbas 的 snipMate fork](https://github.com/garbas/vim-snipmate)和[honza 的代码片段存储库。](https://github.com/honza/snipmate-snippets)我正在运行 OS X Lion 10.7.5。

正如预期的那样，我能够使一切正常工作-尝试添加时出现问题`scss.snippets`（我尝试将其作为插件和手动添加到片段文件夹中，结果相同）。我知道我的新片段文件已被识别，因为我通过将 CSS 片段添加到新创建的`scss.snippets`文件中对其进行了测试。我知道这会导致碰撞，实际上它确实提出了碰撞提示（如[snipmate docs 中所述](https://github.com/davidhalter/vim-snipmate/blob/master/doc/snipMate.txt)）。

具体问题：键入触发器，然后`Tab`删除触发器并且不返回扩展的片段。

我已经尝试设置文件类型以及Vim 和 snipMate（插件）`scope.alias`中提出的解决方案[- 添加新片段不起作用](https://stackoverflow.com/questions/4488786/vim-and-snipmate-plugin-adding-new-snippet-wont-work)并且在文档中，但我得到相同的结果。`.vimrc`最后，我尝试通过针对干净文件尝试上述解决方案来消除所有潜在的 n00b 错误。同样，我得到相同的结果。

1000 万次虚拟击掌，献给任何可以帮助我的人——在那之前，我会从桌子上跳起来等待我的救赎……或者可能重新安装 TextMate。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T05:59:49.610

可能是您使用的片段没有正确缩进，或者这些片段的语法存在一些错误，Snipmate 然后无法自动完成尝试查看该特定的片段文件，看看它是否以某种方式突出显示。

这可能只是源代码的错误缩进。

因为我通过在片段文件上重新缩进或使用不正确的语法在我的 scss.snippets 文件中*重现了该问题。*

**注意：**片段使用**制表符**而不是**空格**，因此请务必禁用 expandtab

```
:set noet or :set noexpandtab 
```

我自己，不知道这背后的原因。

# c++ - 通过套接字多路复用数据

> ID：14325575
> 
> 赞同：1
> 
> 时间：2013-01-14T19:51:10.667
> 
> 标签：c++, sockets, networking, protocols, multiplexing

基本上，我试图从同一个套接字同时传输 2-3 个文件，**但**不中断发送回客户端/服务器的消息。

类似于 2 个人和 3 个文件传输之间的聊天程序。

我试图避免打开 2 个或更多流。

我希望一切都异步发生 - 仍然同时通话和传输所有 3 个**文件**；不是一个接一个。

我的协议会是什么样子？我想不出这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:58:24.860

如果你真的想自己做数据包交换，我推荐一个队列：将需要发送的数据包放在一端，另一端取数据包并进行实际的电汇。

对于通过网络传输的数据包，您需要一个类型（文件传输或聊天）、一个目的地（将文件放在哪里，或者您正在与谁聊天）以及实际的数据包数据。

在接收方，您需要跟踪所有收件人、聊天和文件传输。当接收到目的地 X 的文件传输时，您将其保存到文件 X，如果您收到 Y 的聊天消息，则将消息发送给 Y。

# java - 在java中传输二进制文件（数据）

> ID：14325576
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:51:11.580
> 
> 标签：java, c, file

> **可能重复：**
> [使用 Java 读取结构化二进制文件的最佳方法](https://stackoverflow.com/questions/277944/best-way-to-read-structured-binary-files-with-java)

我曾经是一名交流程序员。在c中，如果我想从std io传输二进制数据（不仅仅是文本文件），我可以通过一遍又一遍地调用`getchar()`and来完成，直到到达. 我的问题是，在 Java 中可以这样做吗？我可以一遍又一遍地打电话吗？如果没有，我该怎么办？ 谢谢！`putchar()``EOF``readline()``writeline()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:53:42.487

不，你绝对*不*`readLine()`应该在and`writeLine()`调用中使用任何东西。这些用于*文本*数据。如果您正在传输二进制数据，您应该使用`InputStream`and `OutputStream`- 名称中没有`Reader`或没有`Writer`。如果将二进制数据转换为文本，几乎肯定会丢失数据。

但是你可以一次只复制数据块：

```
public static void copy(InputStream input, OutputStream output)
    throws IOException {
   byte[] buffer = new byte[16 * 1024]; // For example...
   int bytesRead;
   while ((bytesRead = input.read(buffer)) > 0) {
     output.write(buffer, 0, bytesRead);
   }
} 
```

# iphone - iPhone 5 屏幕尺寸 VS CSS 媒体查询

> ID：14325577
> 
> 赞同：5
> 
> 时间：2013-01-14T19:51:12.850
> 
> 标签：iphone, css, layout, media-queries, screen-resolution

> **可能重复：**
> [iPhone 5 CSS 媒体查询](https://stackoverflow.com/questions/12539697/iphone-5-css-media-query)

iPhone 5 技术规格规定屏幕尺寸为 1136 x 640

我的问题是这样的

对于横向，ff 我将使用**568px 的最大设备宽度，** 请参阅[http://www.stephentgilbert.com/mediaqueries/#iPhone](http://www.stephentgilbert.com/mediaqueries/#iPhone)

你能解释一下为什么当 iPhone 5 网站上规定的尺寸说宽度是 1136 像素时它会起作用吗

我知道我在这里混淆了一些基础知识。如果您能为我提供适当的解释，并可能将我链接到相关的在线资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T19:54:26.063

iPhone 的 Retina 显示屏意味着 1136x640 屏幕使用 568x320 虚拟像素。每个 CSS 像素由四个物理像素 (2x2) 组成。

由于没有人在 CSS 中说“给我一个 100px 宽的 div”，因此没有人希望它在像 Retina 显示器这样的高分辨率设备上以一半大小显示，因此它不使用物理像素作为 CSS 像素。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T19:55:26.830

Retina 显示屏包含的像素是标准显示屏的两倍，但 iOS 将分辨率视为用于测量和屏幕输出的标准显示屏。如果不是这样，网站看起来都非常小并且缩小了。

# symfony - Symfony 2.1 Doctrine 过滤器（启用/禁用）

> ID：14325589
> 
> 赞同：4
> 
> 时间：2013-01-14T19:52:08.270
> 
> 标签：symfony, configuration, filter, doctrine-orm, symfony-2.1

我目前正在我的 Symfony2.1 项目中使用以下设置 实现 Doctrine[过滤器：](http://docs.doctrine-project.org/en/latest/reference/filters.html)

```
<?php

namespace Acme\Bundle\Entity;

class Article {
    /**
     * @ORM\Column(type="string")
     */
    private $status;
    ...
}

//app/config/config.yml
doctrine:
    orm:
        filters:
            status:
                class:   Acme\Bundle\Filter\StatusFilter
                enabled: false
        ....

//src/Acme/Bundle/Filter/StatusFilter.php
namespace Acme\Bundle\Filter;

use Acme\Bundle\Entity\Status;

class StatusFilter extends SQLFilter {

    public function addFilterConstraint(ClassMetadata $target, $alias)
    {
        $filter =
            $target->reflClass->implementsInterface('Acme\Bundle\Entity\Status')?
                $alias . '.status = ' . Status::PUBLISHED : '';

        return $filter;
    }
} 
```

Acme\Bundle\Entity\Status 只是一个接口。
当在 中启用过滤器时，代码按预期工作`config.yml`。

问题是我无法检索所有文章进行管理！
有没有办法为某个捆绑包启用此过滤器？
ps 我知道如何使用 EntityManager 启用和禁用过滤器，
我只是找不到为前端 Bundle 执行此操作的合适位置。

我的管理部分可以通过路由前缀访问`myadmin`

www.example.com/myadmin/ -> 管理部分 = 禁用过滤器（在配置中默认禁用） www.example.com/... -> 其他任何东西 = 启用过滤器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-28T23:32:54.637

查看 Doctrine 代码，有一些方法可以启用和禁用过滤器。

在 config.yml 文件中定义过滤器后，您可以在控制器或服务中启用/禁用：

```
// 'status' is the unique name of the filter in the config file
$this->getDoctrine()->getManager()->getFilters()->enable('status');

$this->getDoctrine()->getManager()->getFilters()->disable('status'); 
```

*注意：这是取自 Symfony 2.3。你需要用以前版本的 Symfony/Doctrine 来测试它。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T15:43:27.347

在 Doctrine 级别没有捆绑的概念。`kernel.request`我看到的唯一方法是通过在事件或事件期间解析其类名（反射，...）来检测使用了哪个控制器`kernel.controller`。

你可以从这个例子中启发自己：

[https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/EventListener/ParamConverterListener.php#L46](https://github.com/sensio/SensioFrameworkExtraBundle/blob/master/EventListener/ParamConverterListener.php#L46)

然后，如果您检测到您的控制器在 中`FrontendBundle`，只需禁用/启用您的学说过滤器。

如果您更喜欢使用路由来检测何时禁用/启用，只需使用`kernel.request`event. 例如，您将可以访问所有请求参数`$event->getRequest()->attributes->get('_controller')`。

# bash - 使用 Hadoop：本地主机：错误：未设置 JAVA_HOME

> ID：14325594
> 
> 赞同：29
> 
> 时间：2013-01-14T19:52:27.530
> 
> 标签：bash, hadoop, ubuntu-12.04, java-home

我正在使用 Ubuntu 12.04 LTS。

我正在阅读 hadoop 快速入门手册来进行伪分布式操作。它看起来简单明了（容易！）。

但是，当我尝试运行时，`start-all.sh`我得到：

```
localhost: Error: JAVA_HOME is not set. 
```

我已阅读有关此问题的所有其他关于 stackoverflow 的建议，并已执行以下操作以确保`JAVA_HOME`已设置：

在`/etc/hadoop/conf/hadoop-env.sh`我已经设置

```
JAVA_HOME=/usr/lib/jvm/java-6-oracle
export JAVA_HOME 
```

在`/etc/bash.bashrc`我已经设置

```
JAVA_HOME=/usr/lib/jvm/java-6-oracle
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin
export PATH 
```

`which java`返回：

```
/usr/bin/java 
```

`java –version`作品

`echo $JAVA_HOME`返回：

```
/usr/lib/jvm/java-6-oracle 
```

我什至尝试成为 root 并在终端中明确编写：

```
$ JAVA_HOME=/usr/lib/jvm/java-6-oracle
$ export JAVA_HOME
$ start-all.sh 
```

如果您能告诉我如何解决此错误，将不胜感激。我在想我`JAVA_HOME`的不知何故被覆盖了。如果是这样，您能否向我解释如何使我的出口全球化？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-22T15:54:23.563

我正在使用 hadoop 1.1，并且遇到了同样的问题。

我通过将`JAVA_HOME`变量更改`/etc/hadoop/hadoop-env.sh`为：

```
export JAVA_HOME=/usr/lib/jvm/<jdk folder> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-28T13:14:08.840

解决这个问题的方法是在 conf/hadoop-env.sh 文件中导出 JAVA_HOME 变量。

**不管你是否已经在 ~/.bashrc 中导出了该变量，它仍然会显示错误。**

因此，*编辑* **conf/hadoop-env.sh**并取消注释“export JAVA_HOME”行并为其添加适当的文件系统路径，即 Java JDK 的路径。

> # 要使用的 Java 实现。必需的。
> 导出 JAVA_HOME="/path/to/java/JDK/"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-10T16:34:29.453

在 ubuntu LTS 16.04 上遇到了同样的问题。运行`bash -vx ./bin/hadoop`显示它测试了 java 是否是一个目录。所以我将 JAVA_HOME 更改为一个文件夹并且它有效。

```
++ [[ ! -d /usr/bin/java ]]
++ hadoop_error 'ERROR: JAVA_HOME /usr/bin/java does not exist.'
++ echo 'ERROR: JAVA_HOME /usr/bin/java does not exist.'
ERROR: JAVA_HOME /usr/bin/java does not exist. 
```

所以我将 JAVA_HOME 更改`./etc/hadoop/hadoop-env.sh`为

```
export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/ 
```

hadoop 开始正常。[这篇文章](https://poweruphosting.com/blog/install-hadoop-ubuntu/)中也提到了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:34:53.850

调试的方法是在 start-all.sh 中放置一个“echo $JAVA_HOME”。您是在使用不同的用户名还是以您自己的身份运行 hadoop 环境？如果是前者，很可能没有为该用户设置 JAVA_HOME 环境变量。

另一个潜在的问题是您错误地指定了 JAVA_HOME，并且您提供的值没有指向 JDK/JRE。请注意，“which java”和“java -version”都可以工作，即使 JAVA_HOME 设置不正确。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-16T21:29:37.997

从 etc/hadoop/hadoop-env.sh 中提取

唯一需要的环境变量是 JAVA_HOME。所有其他都是可选的。运行分布式配置时，最好在此文件中设置 JAVA_HOME，以便在远程节点上正确定义它。

这意味着它更好，建议在此处设置 JAVA_HOME.. 即使现有定义读取 JAVA_HOME 变量。也许它没有从先前设置的值中获取 JAVA_HOME 的值......标准的 apache 手册并没有说明这一点 :( :(

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-02T23:18:01.657

无论 debian 或任何 linux 风格，只知道`~/.bash_profile`属于特定用户而不是系统范围。在伪分布式环境中，hadoop 可以正常工作，`localhost`因此`$JAVA_HOME`in .bash_profile 不再有用。

只需导出 JAVA_HOME`~/.bashrc`并在系统范围内使用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-26T09:05:13.190

**我在hadoop 1.1**中也遇到过类似的问题， 我没有注意到在`JAVA_HOME`中评论：`hadoop/conf/hadoop-env.sh`

它是

```
/#JAVA_HOME=/usr/lib/jvm/java-6-oracle 
```

不得不将其更改为

```
JAVA_HOME=/usr/lib/jvm/java-6-oracle 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-20T08:42:18.430

此错误来自第 180 行

```
if [[ -z $JAVA_HOME ]]; then
   echo "Error: JAVA_HOME is not set and could not be found." 1>&2
   exit 1
fi 
```

在`libexec/hadoop-config.sh`.

`$JAVA_HOME`在该脚本中尝试回显。如果它不认识，

找到你`JAVA_HOME`使用这个：

`$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")`

并更换线路

`export JAVA_HOME=${JAVA_HOME}``/etc/hadoop/hadoop-env.sh`使用您从上面的命令获得的 JAVA_HOME 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-21T10:17:10.183

我把它放在文件的第一行`~/.bashrc`，然后效果很好！

`export JAVA_HOME=/usr/lib/jvm/default-java`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-03T16:07:26.593

```
echo "export JAVA_HOME=/usr/lib/java" >> $HADOOP_HOME/etc/hadoop/hadoop-env.sh 
```

**注意：请勿使用`export JAVA_HOME=${JAVA_HOME}`！**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-13T14:33:41.120

改变`JAVA_HOME`变量`conf/hadoop-env.sh`

```
export JAVA_HOME=/etc/local/java/<jdk folder> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-19T00:07:35.493

检查您的替代方案是否指向正确的，您实际上可能指向不同的版本并试图在另一个已安装的版本上更改 hadoop-env.sh。

-alternatives --install /etc/hadoop/conf [generic_name] [你的正确路径]优先级{进一步检查替代品手册页}

手动设置替代方案，

替代品 --set [通用名称] [您的当前路径]。

# android - 如何在他们的用户个人资料页面中重新创建动画，如“PATH android app”中的？

> ID：14325597
> 
> 赞同：2
> 
> 时间：2013-01-14T19:52:43.560
> 
> 标签：android, drag, android-animation

在路径应用程序中，用户可以向下拖动配置文件信息以显示用户的图像。我需要在我们的应用程序中使用相同的动画。谁能指导我如何在android中创建这个动画？

我说的是[http://cl.ly/MBQh中的动画](http://cl.ly/MBQh)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T13:53:12.270

我认为您需要查看[PullToRefresh Library](https://github.com/chrisbanes/Android-PullToRefresh)。在这里你可以配置你的ListView的HeaderView。然后它会出现然后你下拉。此外，如果您拉得足够多，则会导致事件完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T23:04:44.113

你基本上有两个视图，一个用户可以拖动，一个隐藏在下面，它们都是 a 的子级`RelativeLayout`。

棘手的部分是顶视图的拖动/动画。请以我之前写的这个片段为例，在 x 轴上实现类似的效果。请注意，此逻辑位于扩展的`View`.-

```
final RelativeLayout wrapperDraggable = (RelativeLayout) findViewById(R.id.viewWrapperDraggable);
wrapperDraggable.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                initPoint = new Point((int) event.getRawX(), (int) event.getRawY());
            break;
            case MotionEvent.ACTION_MOVE:
                // Disable parent scrolling if user is dragging the view
                if (dragging || Math.abs(initPoint.x - event.getRawX()) > Math.abs(initPoint.y - event.getRawY()) * 2) {
                    dragging = true;                          
                    getParent().requestDisallowInterceptTouchEvent(true);
                } else {                                    
                    getParent().requestDisallowInterceptTouchEvent(false);
                }

                int offset = (int) Math.max(Math.min(0, event.getRawX() - initPoint.x), -CurrentViewClass.this.getWidth() * 0.45f);

                if (offset != lastOffset) {
                    TranslateAnimation anim = new TranslateAnimation(lastOffset, offset, 0, 0);
                    anim.setFillAfter(true);
                    anim.setFillEnabled(true);
                    anim.setDuration(0);                                         
                    wrapperDraggable.startAnimation(anim);

                    lastOffset = offset;
                }
            break;
            case MotionEvent.ACTION_UP:
                if (!dragging) {
                    // The user clicked the view
                }
            break;
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_OUTSIDE:
                dragging = false;
                TranslateAnimation anim = new TranslateAnimation(lastOffset, 0, 0, 0);
                anim.setFillAfter(true);
                anim.setDuration(300);
                wrapperDraggable.startAnimation(anim);
                lastOffset = 0;
            break;
        }

        return true;
    }
}); 
```

希望你觉得它有用。

# java - 将 Comparable 从 Comparator 转换为 Comparator？

> ID：14325598
> 
> 赞同：3
> 
> 时间：2013-01-14T19:52:43.623
> 
> 标签：java

我经常有一个`Comparator`类型，而我需要一个`Comparable`，反之亦然。是否有一种可重用的 JDK API 可以相互转换？类似于以下内容：

```
 public static <C> Comparable<C> toComparable(final Comparator<C> comparator) {
        // does not compile because Hidden can not extend C, 
        // but just to illustrate the idea
        final class Hidden extends C implements Comparable<C> {
            @Override
            public int compareTo(C another) {
                return comparator.compare((C) this, another);
            }
        };
        return new Hidden();
    }

    public static <C extends Comparable<C>> Comparator<C> toComparator(final Class<C> comparableClass) {
        return new Comparator<C>() {
            @Override
            public int compare(C first, C second) {
                assert comparableClass.equals(first.getClass());
                assert comparableClass.equals(second.getClass());
                return first.compareTo(second);
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:04:44.773

[`ComparableComparator`](http://commons.apache.org/collections/api-release/org/apache/commons/collections/comparators/ComparableComparator.html)来自 Apache Commons Collections 似乎解决`Comparable<T>`了`Comparator`问题（不幸的是它不是通用类型友好的）。

反向操作不太可能，因为`Comparator<T>`表示算法同时`Comparable<T>`表示实际数据。您将需要某种组合。快速而肮脏的解决方案：

```
class ComparableFromComparator<T> implements Comparable<T> {

    private final Comparator<T> comparator;
    private final T instance;

    public ComparableFromComparator(Comparator<T> comparator, T instance) {
        this.comparator = comparator;
        this.instance = instance;
    }

    @Override
    public int compareTo(T o) {
        return comparator.compare(instance, o);
    }

    public T getInstance() {
        return instance;
    }
} 
```

说你有课`Foo`，`Comparable<Foo>`但你有`Comparator<Foo>`。你像这样使用它：

```
Comparable<Foo> comparable = new ComparableFromComparator<Foo>(foo, comparator); 
```

正如您所看到的（尤其是没有 mixins），它非常丑陋（而且我什至不确定它是否会工作......）另外请注意，`comparable`它不会 extend `Foo`，您必须调用`.getInstance()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T00:26:31.243

自 Java 8 以来，该[`Comparator`](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html)接口添加了一些实用程序默认方法，这些方法有助于从可比较对象中派生比较器。

考虑以下按名字对用户进行排序的示例。

```
class Person {
    String firstName;
    String lastName;
}

List<Person> people = ...
people.sort(Comparator.comparing(Person::firstName)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:11:36.253

可比较的项目可以排序，因为它们有`compareTo`：

```
Collection<Comparable> items;
Collections.sort(items); 
```

如果项目*不是*Comparable，它们需要一个 Comparator 对象来进行比较：

```
Collections<T> items;
Collections.sort(items, comparator); 
```

桥接比较器是微不足道的，你已经做到了。

`T item`用一些具有 Comparator 的 Comparable 适配器包装每一个，似乎没用。首先不是继承，而是作为字段需要包装项目。

```
public class CatorComparable<T> implements Comparable<CatorComparable<T>> {
    public T value;
    private Comparator<T> cator;

    public CatorComparable(T value, Comparator<T> cator) {
        this.value = value;
        this.cator = cator;
    }

    @Override
    public int compareTo(CatorComparable<T> other) {
        return cator.compareTo(value, other.value);
    }
} 
```

开销太大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-08T17:10:54.377

您可以获得 Comparator 的实例，该实例能够简单地与 Comparable 类型的实例进行比较

```
java.util.Comparator.naturalOrder() 
```

见[Comparator.naturalOrder()](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#naturalOrder--)

这是一种从 Comparable 到 Comparator 的转换

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T20:05:36.860

我认为您不能真正在它们之间进行转换，也没有任何意义，因为`Comarable`它是类本身的属性，`Comparator`而是外部类。

最好的办法是编写某种包含底层比较逻辑的实用程序类（并且可能具有该实现`Comparator`），然后将该类用作`Comparable`该类本身的实现逻辑的一部分。

# php - JSON_encode 不适用于 GROUP_CONCAT 数据库选择

> ID：14325604
> 
> 赞同：0
> 
> 时间：2013-01-14T19:53:15.353
> 
> 标签：php, javascript

我在想传递给 javascript 数组的 MYSQL 中的查询中打破了我的大脑。

在查询中，我选择带有 GROUP CONCAT 的数组，结果如下所示：

```
1358121600,1,1,0,0,0,0,0,0,1358380800,2,2,0,0,0,0,0,0,1358640000,1,1,0,0,0,0,0,0,1360454400,3,3,0,0,0,0,0,0,1360972800,1,1,0,0,0,0,0,0 
```

但是如果我像这样使用 JSON_Encode：

```
<?php echo 'var prijzen = new Array('.json_encode($array_prijzen).');'; ?> 
```

我看起来数组已满，我也可以提醒数组，但如果我提醒 prijzen[0]，它会给出“未定义”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:01:25.043

以下代码应该可以解决您的问题：

`<?php echo 'var prijzen = ['.$array_prijzen.'];'; ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:09:53.893

以@datasages 的回答为基础。如果`$array_prijzen`是真正的 php 数组，那么以下将起作用。我认为 datasages 的答案是基于这样一个事实，即您的变量命名`$array_prijzen`实际上是一个字符串（似乎是这种情况）。但如果它是一个数组，那么请执行以下操作（我创建了一个五元素数组作为示例）：

```
<?php $array_prijzen = array(1358121600,1,1,0,0); echo 'var prijzen = ['.implode(",",$array_prijzen).'];'; ?> 
```

# symfony - Symfony2 - 异常控制器 - NotFoundHttpException

> ID：14325606
> 
> 赞同：0
> 
> 时间：2013-01-14T19:53:25.523
> 
> 标签：symfony

我正在尝试创建一个自定义异常错误页面，并且我一直在关注[Mike 的教程](https://stackoverflow.com/a/14286165/1277607)。我已将以下代码插入 config.yml，并在`StoreBundle\Controller\ExceptionController.php`. 当我尝试通过 go 测试我的 404 错误页面时`local.store.com/fake-page`，出现`NotFoundHttpException: No route found for "GET /fake-page"`错误。我认为如果找不到页面，我的 ExceptionController 应该重定向所有用户，所以我在其中添加了一个`var_dump('testing')`，但它从未转储。我试图删除我注入的代码`config.yml`，然后得到默认的 Symfony 错误页面。我在做错`config.yml`什么吗？

插入`app/config/config.yml`：

```
twig:
    exception_controller: StoreBundle\Controller\ExceptionController::showAction 
```

**编辑**

我现在认为我的问题出在我的控制器上。这就是我所拥有的`StoreBundle\ControlleExceptionController.php`。我的错误页面在`StoreBundle\Resources\views\Pages\Errors\404.html.twig`和`StoreBundle\Resources\views\Pages\Errors\500.html.twig`

```
<?php
namespace StoreBundle\Controller;

use Symfony\Component\HttpKernel\Exception\FlattenException;
use Symfony\Component\HttpKernel\Log\DebugLoggerInterface;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Bundle\TwigBundle\Controller\ExceptionController as BaseExceptionController;

class ExceptionController extends BaseExceptionController
    {
        public function showAction(FlattenException $exception, DebugLoggerInterface $logger = null, $format = 'html')
        {
            $template = $this->container->get('kernel')->isDebug() ? 'exception' : 'error';
            $code = $exception->getStatusCode();

        return $this->container->get('templating')->renderResponse(
            'StoreBundle:Exception:Pages/Errors:' . $code . '.html.twig', array(
                'status_code'    => $code,
                'status_text'    => Response::$statusTexts[$code],
                'exception'      => $exception,
                'logger'         => null,
                'currentContent' => '',
            ));

        }
    }
} 
```

# jquery - 查找类时如何使用 jquery.index()

> ID：14325608
> 
> 赞同：0
> 
> 时间：2013-01-14T19:53:33.140
> 
> 标签：jquery

我有一个简单的[jquery.index()](http://api.jquery.com/index/)用法，旨在返回具有类的元素的值：

的HTML：

```
<ul>
  <li>foo</li>
  <li class='on'>bar</li>
  <li>roo</li>
</ul> 
```

JS：

```
var idx = $('li').index('.on'); 
```

`-1`如果类在**除第一个**元素之外的任何元素上，则返回。我错过了什么？

[JSFIDDLE](http://jsfiddle.net/R6mjG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:54:58.503

我认为您需要的是`$('.on').index('li')`以下定义。

> `.index( selector )` A`selector`表示要在其中查找元素的 jQuery 集合。

[http://jsfiddle.net/R6mjG/2/](http://jsfiddle.net/R6mjG/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T19:57:26.983

当与选择器一起使用时，`.index`返回 jQuery 对象中第一个元素（即 first `<li>`）在选择器匹配的集合中的位置（在这种情况下`.on`）。

由于第一个`<li>`不是由`.on`（仅与第二个匹配`<li>`）匹配的集合的一部分，因此该元素被视为未找到，并`.index`按照记录返回 -1。

如果`.on`是第一个`<li>`则`.index`返回集合中仅包含该元素的元素的索引，因此结果将为`0`.

相反，如果您想在您将使用`.on`的所有元素中找到元素的索引 - 只要任何具有 class ，它将始终返回一个索引。`<li>``$(".on").index("li")``<li>``on`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T19:56:34.957

使用以下内容。

```
var idx = $('li.on').index(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:56:09.713

你需要做`$('.on').index()`

# java - 如何检测图像的缩放因子

> ID：14325613
> 
> 赞同：0
> 
> 时间：2013-01-14T19:53:56.883
> 
> 标签：java, image, image-processing, imagemagick

我在这里阅读了有关此主题的相关问题：[如何检测主观图像质量](https://stackoverflow.com/questions/560316/how-to-detect-subjective-image-quality)

我想检测用户上传的图像是否可以以高百分比（例如 500%）放大并且仍然是或良好的图像质量。我理解“良好的图像质量”是主观的，但出于我的目的，我会说它的意思是“图像是否像素化？”。我试图找到如何做到这一点的方法？

*   我应该计算上传图片的大小吗？尺寸越大，放大的越多可以吗？
*   我应该计算图像的总像素数吗？
*   我应该阅读上传图片的元标签吗？
*   多种事物的结合？

是否有确定图像[像素化不良](http://umagowrishankar.files.wordpress.com/2012/11/spot_pixelated_new.gif)的解决方案/库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:06:08.933

使用水平和垂直像素数。

只要图像的像素多于您显示的像素，您就可以缩放。一旦显示像素多于图像像素，就必须对像素进行插值。插值越高，图片越模糊。

假设您有一张 4000 x 3000 像素的图片，并且您正在显示 640 x 480 像素。

您可以水平放大 625% (4000 / 640) 和垂直放大 625% (3000 / 480)。较小的缩放数字将是 625%。四舍五入到偶数缩放数字，这张图片可以放大到 600% 而不会出现像素化。

现在，如果您愿意插入像素，您甚至可以放大 600% 以上。你能放大多高？这将取决于您认为可接受的插值。

我的猜测会高出 25%。对于此示例图片，您可以在图片变得太模糊之前转到 800%。

如果您想安全起见，请将其保持在计算的缩放大小以下。如果没有，请随心所欲地走高，让用户确定多高是不是太高了。

# javascript - 处理javascript库之间冲突的通用方法

> ID：14325622
> 
> 赞同：-1
> 
> 时间：2013-01-14T19:54:40.593
> 
> 标签：javascript, namespaces

一些 javascript 库作为完全连接的文件分发，包括所有依赖库。如果正在使用多个版本的库，一些库（如 JQuery）提供了一种处理冲突的方法。但是，如果编译/连接的 javascript 文件包含一个没有内置处理冲突的库，并且我使用的是同一个库（但版本不同），那么是否有一种通用方法来包装我正在使用的版本和向它添加自定义命名空间？或者这取决于正在使用的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:33:08.810

这取决于图书馆。如果它在一个命名空间下提供所有函数，您可以首先包含您的版本，将对其的引用存储在不同的变量/名称下（如果可能发生冲突，请取消设置原始版本），然后再包含另一个库。

它看起来像这样：

```
<script src="MyLibraryV1.js"></script>

<script>
    // Assuming all functions are available under `$`
    var MyLibraryV1 = $;
    // Now the next script can overwrite `$`. 
    // Optionally we can also delete/undefine this symbol:
   delete window.$;
</script>

<script src="OtherLibraryWithDependencies.js"></script>

<script>
    // For easy access, you can use an immediate function to still let `$` 
    // refer to your library version. It should not affect the other code
    // (but if it does you obviously have to use the other name)
    (function($) {
        // put all code that needs `MyLibraryV1` here
    }(MyLibraryV1));
</script> 
```

* * *

当然，更好的事情是如果`OtherLibraryWithDependencies`能够正确封装所有依赖项，以便它们不会泄漏到全局范围内。

# visual-studio - 代码覆盖结果中缺少类文件

> ID：14325623
> 
> 赞同：2
> 
> 时间：2013-01-14T19:54:41.190
> 
> 标签：visual-studio, unit-testing, c#-4.0, code-coverage

我的项目中有很多课程。当我在运行单元测试用例后检查代码覆盖率结果时，它没有显示所有类。我不确定代码覆盖率处理类文件的标准是什么。

我在某处读到，如果您没有在测试项目中为类文件创建测试用例，它将不会被代码覆盖。但对我来说，这似乎并不正确，因为我可以看到类文件，即使它们不在测试项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:00:45.400

有几种方法可以将文件排除在代码覆盖范围之外，最流行的是属性：

```
[ExcludeFromCodeCoverage] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-02T11:54:33.143

有点晚了，但是如果你有一个完全由自动属性组成的类，那么这个类将不会包含在代码覆盖率统计中。

**包括**

```
private int _seq;

public int InvoiceSequenceNumber 
{
    get
    {
        return _seq;
    }

    set
    {
        _seq = value;
    }
} 
```

**不包含**

```
public int InvoiceSequenceNumber { get; set; } 
```

# email - Microsoft Exchange 2010 电子邮件格式

> ID：14325627
> 
> 赞同：0
> 
> 时间：2013-01-14T19:54:49.093
> 
> 标签：email, networking, exchange-server

我的公司使用 Exchange server 2010，升级后，一些用户的电子邮件格式有问题，如果用户向其他人发送内容，他们收到的邮件带有 Plaing 文本，并且包含 HTML 标签。

我如何在 Exchange 2010 中解决这个问题。

请检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:51:27.143

问题可能是因为您已经升级了这些用户，所以您没有创建新的配置文件，如果是这种情况，请查看此链接

[创建个人资料](http://www.emailsignature.eu/phpBB2/how-to-create-and-verify-a-new-outlook-profile-t768.html)

否则您将需要解决您的 HTML 和 Exchange Sever 2003 注意！来自 Outlook 2010（和 2007）的 HTML 电子邮件可以在所有主要电子邮件客户端中完美呈现。如果您使用电子邮件客户端通常支持的 HTML 编码，您的 Outlook 2010 电子邮件在收件人收件箱中的外观也会相同。问题通常是由通常不受支持的 CSS 引起的。

# php - pdo_oci 64bit fedora 17 - 找不到包含目录

> ID：14325629
> 
> 赞同：0
> 
> 时间：2013-01-14T19:54:51.483
> 
> 标签：php, oracle, pdo

我在 64 位 Fedora 17 机器上，PHP5.4.8。我安装了 Oracle Instant Client 11.2。我正在尝试安装 pdo_oci 包，但遇到了一些问题。

我有最新的 PDO_OCI 包。我将其解压缩并执行以下操作：

```
~$ > cd ../PDO_OCI-1.0
~$ > phpize 
~$ > ./configure --with-pdo-oci=instantclient,/usr/lib/oracle/11.2/client64/lib 
```

我收到错误消息：“我太笨了，无法弄清楚包含目录在您的即时客户端安装中的位置”

正如 php.net 中的 pdo_oci 手册所建议的那样，我使用 OIC 的次要版本创建了几个路径

```
ln -s /usr/bin/include/oracle/11.2 /usr/include/oracle/11.2.0.1 
```

我仍然收到相同的错误消息。有人知道吗？

我运行它的机器没有连接到互联网，所以我必须使用以前下载的包来运行安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T17:26:34.430

我遇到了同样的问题。我运行centos 6.5 64bits，但fedora 很相似。

假设您已经安装了基本包和开发包：

oracle-instantclient11.2-basic-11.2.0.4.0-1.x86_64.rpm oracle-instantclient11.2-devel-11.2.0.4.0-1.i386.rpm

您应该只指定“/usr”目录，因为 configure 在 configure 中以这种方式查找 oci.h：

$PDO_OCI_IC_PREFIX/lib/oracle/$PDO_OCI_IC_VERS/client/include/oci.h

因此，在编辑 config.m4 以便能够进行 11.2 安装（最后的 url 参考）之后，执行以下操作：

./configure --with-pdo-oci=instantclient,/usr,11.2

我遵循了本教程：

[http://shiki.me/blog/installing-pdo_oci-and-oci8-php-extensions-on-centos-6-4-64bit/](http://shiki.me/blog/installing-pdo_oci-and-oci8-php-extensions-on-centos-6-4-64bit/)

# java - Android如何通过JNi示例使用libjpeg-turbo库

> ID：14325639
> 
> 赞同：2
> 
> 时间：2013-01-14T19:55:08.177
> 
> 标签：java, android, android-ndk, java-native-interface, libjpeg-turbo

由于这篇文章，我使用 ndk-build 成功构建了 libjpeg-turbo： [libjpeg-turbo for android](https://stackoverflow.com/questions/12260149/libjpeg-turbo-for-android)

我想在 libjpeg-turbo 的 example.c 中获得一个像 read_JPEG_file 这样的本机函数，以便从 Java 代码调用以将其用于 Android 应用程序。

有人可以给我一个例子吗？如何为使用 libjpeg-turbo ndk 构建库的 Java 编写本机方法？

我可以通过加载库

```
System.loadLibrary("libjpeg"); 
```

但接下来呢？该库没有任何可从 Java 调用的本机方法。

我试图根据 JNI 文档编写一个 JNI c 类，但没有成功。示例代码非常适合学习如何操作。

**编辑：**

我创建了一个测试类 NativeMethods：

```
package com.test.app;

public class NativeMethods {

    private String filename = null;

    static {
        System.loadLibrary("jpeg"); // this represents compiled libjpeg-turbo under ndk
    }

    public NativeMethods(String jpegFilename) {
        this.filename = jpegFilename;
    }

    public native int computeNumberOfDCTS(String filename);
} 
```

然后我使用 javah 生成本地方法的 C 头文件，结果是`com_test_app_NativeMethods.h`包含以下内容的文件：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_test_app_NativeMethods */

#ifndef _Included_com_test_app_NativeMethods
#define _Included_com_test_app_NativeMethods
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_test_app_NativeMethods
 * Method:    computeNumberOfDCTS
 * Signature: (Ljava/lang/String;)I
 */
JNIEXPORT jint JNICALL Java_com_test_app_NativeMethods_computeNumberOfDCTS
  (JNIEnv *, jobject, jstring);

#ifdef __cplusplus
}
#endif
#endif 
```

然后我创建了一个名为的文件`JPEGProcessing.c`，我将本机函数的 c 实现放置在如下位置：

```
#include "com_test_app_NativeMethods.h"

//that came from jpeglib example
struct my_error_mgr
{
    struct jpeg_error_mgr pub;
    jmp_buf setjmp_buffer;
};
typedef struct my_error_mgr * my_error_ptr;

//routine that will replace the standard error_exit method
static void
my_error_exit (j_common_ptr cinfo)
{
    /* cinfo->err really points to a my_error_mgr struct, so coerce pointer */
    my_error_ptr myerr = (my_error_ptr) cinfo->err;

    (*cinfo->err->output_message) (cinfo);

    /* Return control to the setjmp point */
    longjmp(myerr->setjmp_buffer, 1);
}

JNIEXPORT jint JNICALL Java_com_test_app_NativeMethods_computeNumberOfDCTS
    (JNIEnv *env, jobject obj, jstring javaString)
{
    jint toReturn = 0;
    // struct representing jpeg image
    struct jpeg_decompress_struct  cinfo;
    // struct representing error manager; defined above
    struct my_error_mgr jerr;

    const char *filename = (*env)->GetStringUTFChars(env, javaString, 0);

    FILE * infile;

    if ((infile = fopen(filename, "rb")) == NULL) {
        fprintf(stderr, "can't open %s\n", filename);
        return -1;
    }

    cinfo.err = jpeg_std_error(&jerr.pub);
    jerr.pub.error_exit = my_error_exit;

    if (setjmp(jerr.setjmp_buffer)) {
        jpeg_destroy_decompress(&cinfo);
        fclose(infile);
        return -1;
    }

    jpeg_create_decompress(&cinfo);

    jpeg_stdio_src(&cinfo, infile);

    (void) jpeg_read_header(&cinfo, TRUE);

    // declare virtual arrays for DCT coefficients
    jvirt_barray_ptr* coeffs_array;
    // read DCT coefficients from jpeg
    coeffs_array = jpeg_read_coefficients(&cinfo);

    // fill virtual arrays.
    // ci represents component color
    // this cycle prints all dct coefficient of the jpeg in 8x8 blocks
    for (int ci = 0; ci < 3; ci++)
    {
        JBLOCKARRAY buffer_one;
        JCOEFPTR blockptr_one;
        jpeg_component_info* compptr_one;
        compptr_one = cinfo.comp_info + ci;

        for (int by = 1; by < (compptr_one->height_in_blocks - 1); by++) // we don't want to use the edges of the images
        {
            buffer_one = (cinfo.mem->access_virt_barray)((j_common_ptr)&cinfo, coeffs_array[ci], by, (JDIMENSION)1, FALSE);

            for (int bx = 1; bx < (compptr_one->width_in_blocks - 1); bx++) // we don't want to use the edges of the images
            {
                blockptr_one = buffer_one[0][bx];

                for (int bi = 1; bi < 64; bi++) // we don't want to use AC
                {
                    toReturn++;
                }
            }
        }
    }

    jpeg_destroy_decompress(&cinfo);
    fclose(infile);

    return toReturn;
} 
```

文件`JPEGProcessing.c`和`com_test_app_NativeMethods.h`在`project/jni/`文件夹中。在同一个 jni 文件夹`Android.mk`中，我创建了放置这些行的文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := JPEGProcessing
LOCAL_CFLAGS    := -Werror
LOCAL_SRC_FILES := JPEGProcessing.c

LOCAL_C_INCLUDES := $(LOCAL_PATH)
LOCAL_LDLIBS    := -lm -llog -landroid
LOCAL_STATIC_LIBRARIES := libjpeg
include $(BUILD_SHARED_LIBRARY) 
```

从我的项目目录运行 ndk-build 后，出现了许多错误：

```
jni/JPEGProcessing.c:7:27: error: field 'pub' has incomplete type
jni/JPEGProcessing.c:8:5: error: unknown type name 'jmp_buf'
jni/JPEGProcessing.c:14:16: error: unknown type name 'j_common_ptr'
jni/JPEGProcessing.c: In function 'Java_com_test_app_NativeMethods_computeNumberOfDCTS':
jni/JPEGProcessing.c:30:36: error: storage size of 'cinfo' isn't known
jni/JPEGProcessing.c:36:5: error: unknown type name 'FILE'
jni/JPEGProcessing.c:38:17: error: assignment makes pointer from integer without a cast [-Werror]
jni/JPEGProcessing.c:38:45: error: 'NULL' undeclared (first use in this function)
... 
```

我不明白。如何将代码与 libjpeg-turbo 函数结合以获得工作库并在 java 中使用它？

我阅读了 NDK 说明和示例，但仍然不明白。

**编辑：**

带有简单本机方法的 NDK 和 JNI 工作得很好。作为测试，我使用了以下效果很好的简单方法：

```
#include "com_test_app_NativeMethods.h"

JNIEXPORT jint JNICALL Java_com_test_app_NativeMethods_computeNumberOfDCTS
    (JNIEnv *env, jobject obj, jstring javaString)
{
    jint toReturn = 0;

    const char *filename = (*env)->GetStringUTFChars(env, javaString, 0);
    const char *test = "test";

    if ( filename == test )
    {
        toReturn++;
    }

    return toReturn;
} 
```

我用 libjpeg-turbo 的东西试了一下，如下所示：

```
#include "com_test_app_NativeMethods.h"
#include <stdio.h>
#include <setjmp.h>
#include <libjpeg-turbo/jpeglib.h>
#include <libjpeg-turbo/turbojpeg.h>
#include <libjpeg-turbo/jconfig.h>
#include <libjpeg-turbo/jmorecfg.h>
#include <libjpeg-turbo/jerror.h>

//that came from jpeglib example
struct my_error_mgr
{
    struct jpeg_error_mgr pub;
    jmp_buf setjmp_buffer;
};
typedef struct my_error_mgr * my_error_ptr;

//routine that will replace the standard error_exit method
static void
my_error_exit (j_common_ptr cinfo)
{
    /* cinfo->err really points to a my_error_mgr struct, so coerce pointer */
    my_error_ptr myerr = (my_error_ptr) cinfo->err;

    (*cinfo->err->output_message) (cinfo);

    /* Return control to the setjmp point */
    longjmp(myerr->setjmp_buffer, 1);
}

JNIEXPORT jint JNICALL Java_com_test_app_NativeMethods_computeNumberOfDCTS
    (JNIEnv *env, jobject obj, jstring javaString)
{
    jint toReturn = 0;
    // struct representing jpeg image
    struct jpeg_decompress_struct  cinfo;
    // struct representing error manager; defined above
    struct my_error_mgr jerr;

    const char *filename = (*env)->GetStringUTFChars(env, javaString, 0);

    FILE * infile;

    if ((infile = fopen(filename, "rb")) == NULL) {
        // cannot open file
        return -1;
    }

    cinfo.err = jpeg_std_error(&jerr.pub);
    jerr.pub.error_exit = my_error_exit;

    if (setjmp(jerr.setjmp_buffer)) {
        jpeg_destroy_decompress(&cinfo);
        fclose(infile);
        return -1;
    }

    jpeg_create_decompress(&cinfo);

    jpeg_destroy_decompress(&cinfo);
    fclose(infile);

    return toReturn;
} 
```

我得到了错误......：

```
Compile thumb  : JPEGProcessing <= JPEGProcessing.c
SharedLibrary  : libJPEGProcessing.so
/usr/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/JPEGProcessing/JPEGProcessing.o: in function Java_com_test_app_NativeMethods_computeNumberOfDCTS:jni/JPEGProcessing.c:50: error: undefined reference to 'jpeg_std_error'
/usr/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/JPEGProcessing/JPEGProcessing.o: in function Java_com_test_app_NativeMethods_computeNumberOfDCTS:jni/JPEGProcessing.c:59: error: undefined reference to 'jpeg_CreateDecompress'
/usr/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/JPEGProcessing/JPEGProcessing.o: in function Java_com_test_app_NativeMethods_computeNumberOfDCTS:jni/JPEGProcessing.c:61: error: undefined reference to 'jpeg_destroy_decompress'
/usr/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs/JPEGProcessing/JPEGProcessing.o: in function Java_com_test_app_NativeMethods_computeNumberOfDCTS:jni/JPEGProcessing.c:54: error: undefined reference to 'jpeg_destroy_decompress'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libJPEGProcessing.so] Error 1 
```

那么如何将本机代码与 ndk 构建的 libjpeg-turbo 库一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:19:38.767

由于 libjpeg_turbo 被编译为 C 库，而您的 Android 本机代码被编译为 C++ 程序，因此您应该通过链接指令包含 C 库。

试试这个，

```
extern "C" {
#include "headers of libjpeg_turbo"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:12:37.097

如果您需要从本机代码执行所有操作，您可以在本机端为库创建自己的包装器。步骤大致是这样的：

*   在你打电话的班级中：

    System.loadLibrary("libjpeg");

您声明需要在 Java 端调用的本机方法，而不提供任何实现：

```
public static native readJPEGFile(); 
```

*   然后，您可以使用 javah 命令创建一个 C 文件，其中包含在本机端执行本机功能的 C 文件。当您在 Java 端调用本机函数时，将调用该函数。注意函数和参数的完整路径，它们将由 javah 命令自动生成，不应更改，否则将不起作用。结果应该是这样的：

    ```
     extern "C" {
         JNIEXPORT void JNICALL Java_com_android_packagename_GL2JNILib_readJPEGFile(JNIEnv * env, jobject obj);
     };

    JNIEXPORT void JNICALL Java_com_android_packagename_GL2JNILib_readJPEGFile(JNIEnv * env, jobject obj) {
        // Call your library's function
     } 
    ```

*   之后，您需要在 jni 文件夹中创建一个包含您的包装函数的共享库（如果它不存在则创建它）。您可以创建一个 Android.mk 文件并运行 ndk-build 来生成共享库（.so 文件）。一个可能的 Android.mk 可能是这样的，但您应该检查名称和依赖项：

    ```
     LOCAL_PATH := $(call my-dir)
      include $(CLEAR_VARS)
      LOCAL_MODULE    := jpgturbo-wrapper
      LOCAL_CFLAGS    := -Werror
      LOCAL_SRC_FILES := jpgturboWrapper.cpp
      LOCAL_C_INCLUDES := $(LOCAL_PATH)
      LOCAL_LDLIBS    := -lm -llog -landroid
      LOCAL_STATIC_LIBRARIES := jpegturbo # write all the libraries your project depend on here, separated by white spaces
      include $(BUILD_SHARED_LIBRARY) 
    ```

*   现在您可以运行 ndk-build 并生成 .so 文件并将其复制到其对应的文件夹中。

您可以查看 NDK 文档以开始，尤其是他们提供的示例：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

有时在 github 上进行快速搜索也是一个好主意，看看其他人是否在您使用同一个库之前付出了痛苦，或者只是为了查看一些比官方示例更高级的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T02:41:26.247

尝试修改您的 Android.mk 以包含您的 libjpeg 标头，还尝试查找有关`dlopen()`使用已编译 arm libjpeg.so 的函数的一些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T19:38:08.337

我将此作为[评论发布在现有答案之一下，](https://stackoverflow.com/a/14327708/988704)但我认为这实际上是一个更好的答案，然后“您必须编写自己的包装器 JNI lib”：

As per the [comment](https://stackoverflow.com/questions/12260149/libjpeg-turbo-for-android/12296343?noredirect=1#comment48228616_12296343) from @AlexCohn, you can include the wrapper JNI interface in the build by adding the `turbojpeg-jni.c` to the list of files to build in `Android.mk`, this way you may use the Java classes they provide directly instead of having to create your own native code to invoke the lib.

# java - 以编程方式创建文件夹以及使用 java 将内容保存到该位置的权限

> ID：14325641
> 
> 赞同：7
> 
> 时间：2013-01-14T19:55:13.420
> 
> 标签：java, apache, file-permissions, mkdir

我在我的 Windows 系统中安装了 xampp，在我的 linux 系统中安装了lampp。我想使用 java在“ [http://localhost/ ”位置创建文件夹。](http://localhost/)我做了以下事情：

```
dirName = new File("http://localhost/"+name);
if(!dirName.exists()) {
    dirName.mkdir();
} 
```

有可能吗？这个想法是以编程方式将一些文件下载到该位置。下载工作正常，但我如何创建文件夹以便我可以通过`http://example.com/name`. 这是跟踪用户相关内容所必需的。我可以访问已经安装了lampp的apache web服务器。如何创建文件夹并将下载内容保存到该文件夹​​，并以编程方式将权限分配给文件夹和其中的内容，以便可以使用`wget`方法从那里下载保存的内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T20:18:57.063

不要使用`File`API。对于严重的文件系统工作，它充满了不当行为。

例如，如果目录创建失败，该`.mkdir()`方法将返回... 一个布尔值！不会抛出异常。

请改用[文件](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)。

例如，要创建一个目录：

```
// Throws exception on failure
Files.createDirectory(Paths.get("/the/path"), 
      PosixFilePermissions.asFileAttribute(      
         PosixFilePermissions.fromString("rwxr-x---")
      )); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-07T10:24:34.607

使用具有 PosixPermission 的 Java 文件。 *[注意-Windows 不支持 PosixPermission]*

```
Set<PosixFilePermission> perms = PosixFilePermissions.fromString("rwxrwxrwx");
Files.createDirectories(path, PosixFilePermissions.asFileAttribute(perms)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T20:09:40.390

在 Java 中，您可以通过执行以下操作在系统上的任何可写目录中创建文件：

```
File file1 = new File("/var/www/newDirectory/");
file1.mkdirs(); 
```

然后要在该目录中创建一个文件，您可以执行以下操作：

```
File file2 = new File(file1.getAbsolutePath() + "newFile.txt"); // You may need to add a "File.seperator()" after the "file1.getAbsolutePath()" if the trailing "/" isn't included
if (file2.exists() == false) {
    file2.createNewFile();
} 
```

为确保您的文件对公众可读，您应该[为文件添加读取权限](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#setReadable%28boolean,%20boolean%29)：

```
file2.setReadable(true, false); 
```

在 Apache 中，您可以设置一个虚拟主机，该主机指向您希望从中获取文件的目录。默认情况下，在 debian linux 上是`/var/www`.

# crash - 阿杜诺“崩溃了？” 12小时后

> ID：14325645
> 
> 赞同：4
> 
> 时间：2013-01-14T19:55:22.893
> 
> 标签：crash, arduino

我对 Arduino 世界很陌生。编写了以下代码 - 使用 DHT22 传感器。12 小时后，我温室的加热器在低于所需温度时没有打开。

关闭电源并重新打开后，一切恢复正常。我知道这段代码很乱——但它有内存泄漏吗？或者其他可能导致它停止工作的东西？

[http://pastebin.com/CcdUN3jb](http://pastebin.com/CcdUN3jb)

编辑 - 我发现一个开放的计数器每 2 秒增加 1。我无法想象就是这样，但我在这里改变了它：http: [//pastebin.com/nuRjHJkR](http://pastebin.com/nuRjHJkR)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T06:28:33.343

老军忠告：

如果你不能修复它，画它。

这些微控制器中存在看门狗定时器只是为了让您的植物保持活力，而不管您的代码如何。每次通过 loop()，你用一个简单的方法喂狗

```
wdt_reset(); 
```

如果您的程序挂起并停止喂狗，MCU 将重置。

您可以在 setup() 中配置看门狗的超时时间。出于您的目的，您可以使用 8 秒的大超时，这应该为最长的 loop() 执行时间提供巨大的余量。这些传感器读取需要多长时间？

有关简单描述，请参见 Arduino 页面中的链接： [看门狗](http://tushev.org/articles/electronics/48-arduino-and-watchdog-timer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T06:01:09.480

代码中明显的一个危险是 sprintf()。如果没有人再次使用它，世界将变得更美好。替换这个

```
void loop() {
  ...
  char buf[128];
  sprintf(buf, "Integer-only reading: Temperature %hi.%01hi C, Humidity %i.%01i %% RH",
               myDHT22.getTemperatureCInt()/10, abs(myDHT22.getTemperatureCInt()%10),
               myDHT22.getHumidityInt()/10, myDHT22.getHumidityInt()%10);
  //Serial.println(buf); 
```

和

```
void loop() {
 ...
 const size_t sizeBuf = 128;
 char szBuf[128+1];

 snprintf(szBuf, sizeBuf, "Integer......", ... );
 szBuf[sizeBuf] = '\0'; 
```

所有字符串函数都存在“n”个版本，并且都提供了目标缓冲区大小的规范，以便您可以确保它们永远不会超出缓冲区。注意函数不保证零终止，所以要多出一行来保证。

因此，使用 snprintf，您可以放心，如果一百万个数据错误中的 1 个错误会导致一些意外的字符串转换，您的代码会继续运行。

沿着这条线，在循环内分配 char buf[] 并没有太多好处。由于程序所做的只是无休止地执行 loop()，因此您不会通过将其设为堆栈上的局部变量来节省内存资源。只有一个不使用堆栈内存的微观窗口。但是通过在堆栈上，如果你溢出 buf，溢出可以擦除返回地址，这肯定会导致程序崩溃。这一切都是危险，没有回报。

这样想

```
const size_t sizeBuf = 128;
char szBuf[128+1];

void loop() {
 ...

 snprintf(szBuf, sizeBuf, "Integer......", ... );
 szBuf[sizeBuf] = '\0'; 
```

在这种方法中，内存是静态分配的，您在编译时就知道程序需要多少内存。

# c# - 在 Moq 中使用 Match.Create

> ID：14325651
> 
> 赞同：5
> 
> 时间：2013-01-14T19:55:49.687
> 
> 标签：c#, moq

`Match.Create`与 Moq 一起使用时，我有一个奇怪的行为。

当我提取`Match.Create`为变量时，以下代码片段未通过：

```
 var mock = new Mock<IA>();
      mock.Object.Method ("muh");
      mock.Verify (m => m.Method (Match.Create<string> (s => s.Length == 3)));

      public interface IA
      {
        void Method (string arg);
      } 
```

是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T21:29:56.050

谢谢你们俩。但我为此找到了另一个很好的解决方案。如[快速入门](http://code.google.com/p/moq/wiki/QuickStart)中所述，您也可以使用方法。首先，我认为无论我使用变量还是方法都没有区别。但显然 Moq 足够聪明。所以表达式和谓词的东西可以转换成：

```
public string StringThreeCharsLong ()
{
  return Match.Create<string> (s => s.Length == 3);
} 
```

我认为这很棒，因为它减少了单元测试中的噪音。

```
MyMock.Verify (m => m.Method (StringThreeCharsLong()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T21:17:43.323

你提取的太多了。谓词就足够了：

```
var mock = new Mock<IA>();
Predicate<string> isThreeCharsLong = s => s.Length == 3;
mock.Object.Method("muh");
mock.Verify(m => m.Method(Match.Create<string>(isThreeCharsLong))); 
```

或者，为了获得相同的效果但语法稍短，您可以使用`It.Is`matcher 和表达式参数：

```
var mock = new Mock<IA>();
Expression<Func<string, bool>> isThreeCharsLong = s => s.Length == 3;
mock.Object.Method("muh");
mock.Verify(m => m.Method(It.Is<string>(isThreeCharsLong))); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T20:22:21.940

**编辑：**再次把你的问题弄错了：

问题是`Match.Create<string> (s => s.Length == 3);`返回一个字符串。它只能在`.Verify()`调用内部使用。同样的情况发生在`It.Is<string>(Expr)`，如果你提取一个变量，它将作为一个简单的 System.String 传递，并且 verify 将检查它作为一个值（并且失败，因为该值将只是 String.Empty）

```
var mock = new Mock<IA>();

//this will be a string, and contain just ""
var yourMatcher = Match.Create<string> (s => s.Length == 3);

mock.Object.Method ("muh");

//this will fail because "muh" != ""
mock.Verify (m => m.Method (yourMatcher));

public interface IA
{
  void Method (string arg);
} 
```

# c# - 数据绑定后添加自定义项

> ID：14325652
> 
> 赞同：1
> 
> 时间：2013-01-14T19:55:50.830
> 
> 标签：c#, vb.net, winforms, .net-4.0, combobox

我已经开发了一个 DataSet 来从 SQL 访问桌面应用程序的信息（使用 WinForms）。

将数据绑定到 ComboBox 并不是什么新鲜事，但正如我在 ASP.Net 中所做的大部分工作一样，我本来会使用的某些类显然不适用于 WinForms。

所以基本上，我需要知道我需要做什么才能将组合框绑定到 DataTable，然后将自定义项添加到`Index=0`，基本上是“选择 MC”。该项目将在 SelectionChange 上进行检查，但我需要在集合中有一个 Nullification ListItem，以便我可以使条件优化无效。

我有 3 个组合框和 1 个数据网格视图。3 个组合框可以优化网格视图中的可见信息列表，但我也希望用户能够取消选择他们的选择。

这是我尝试过但没有得到任何地方的方法：

```
Private Sub frmMain_Load(sender As Object, e As EventArgs) Handles Me.Load
      'cboMC.Datasource = Me._mc.GetMC().AddMCRow("Select MC") <-- Did not Work
    cboMC.DataSource = Me._mc.GetMC()
    cboMC.Items.Insert(0, New Object() {"Select MC"}) <-- Current Try

    ...    
End Sub 
```

还有其他建议吗？同样，这是一个***`WinForms`***应用程序，而不是`WebForms`.

### 最终修订（根据@Tebc）

```
cboMC.Items.Add("Select MC")
cboMC.Items.AddRange(Me._mc.GetMC().ToArray()) 
```

确保 Invalidator 位于索引 0 的上述导数

```
cboMC.Items.AddRange(Me._mc.GetMC().ToArray())
cboMC.Items.Insert(0, "Select MC") 
```

工作就像一个魅力......比让我走上正确的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:05:37.607

我不记得确切的语法，但我所做的是大致如下：

1.  创建一个临时数组，其大小设置为数据表的计数
2.  cboMC.Items.Add("选择 MC")
3.  使用数据表的ToArray函数
4.  cobMC.Items.AddRange([临时数组])

# eclipse - Eclipse 传出更改星号图标

> ID：14325653
> 
> 赞同：1
> 
> 时间：2013-01-14T19:55:51.890
> 
> 标签：eclipse

我正在将我的 Eclipse 升级到新版本，但我忘记了如何在具有传出更改的项目旁边启用这个“星号”图标。这真的很有帮助，而不是项目旁边的小“>”图标。

我尝试在首选项中四处寻找，但找不到。高手可以进来看看。谢谢。

![在此处输入图像描述](../Images/0b2088529a4083444f09972aa63213a8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:01:31.703

它在团队-> CVS-> 标签装饰-> 图标装饰-> 传出更改下

![在此处输入图像描述](../Images/55d7dd55679e06f8cc8109add460d8dc.png)

# python - 如何使用python markdown处理读入的文件？

> ID：14325654
> 
> 赞同：1
> 
> 时间：2013-01-14T19:56:03.857
> 
> 标签：python, python-2.7, markdown

我有一个文件 myfile.txt。

# 你好

我有以下脚本：

```
#!/usr/bin/python 
import markdown

f = open('myfile.txt', 'r') 
f.read() 
htmlmarkdown=markdown.markdown(f) 
```

我拿到：

> AttributeError：“文件”对象没有属性“条带”

我应该怎么做才能成功？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T19:59:51.737

试试这个：

```
f = open('myfile.txt', 'r')
htmlmarkdown=markdown.markdown( f.read() ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:03:42.133

pyDog 的回答是正确的。你的问题是 f 是一个文件对象。您需要将降价传递给一个字符串。仅调用 f.read() 会将文件光标放在文件末尾，但不会将文件内容放在您需要的字符串中。

```
f = open('myfile.txt', 'r')
fileString = f.read()
htmlmarkdown=markdown.markdown( fileString ) 
```

如果你看看你得到的错误：

```
 AttributeError: 'file' object has no attribute 'strip' 
```

这是因为您将“文件”对象（即 f）传递给 markdown，并且它试图调用对“文件”对象没有意义的字符串函数 strip()。

# asp.net - 无法显示 asp:menu，控件在运行时不显示

> ID：14325655
> 
> 赞同：2
> 
> 时间：2013-01-14T19:56:05.713
> 
> 标签：asp.net, controls, visible, master, aspmenu

我有一个奇怪的问题。我在我的 .master 页面中添加了一个 asp:menu 控件。还添加了一些项目和子项目。但是，我不知道为什么，我可以在设计时看到控件，但在运行时找不到它。可见属性设置为 true。即使在查看源代码时也缺少该控件。

这是代码

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="CMSFirst.master.cs" Inherits="CMSFirst.CMSFirst" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
   </asp:ContentPlaceHolder>
</head>
  <body>
    <form id="form1" runat="server">

 <asp:ContentPlaceHolder ID="ContentPlaceHolder2" runat="server">
                <asp:Menu ID="Menu2" runat="server">
                    <Items>
                        <asp:MenuItem Text="Članki" Value="Nov"></asp:MenuItem>
                        <asp:MenuItem Text="Nastavitve" Value="Nastavitve">
                            <asp:MenuItem Text="Pisava" Value="Pisava"></asp:MenuItem>
                            <asp:MenuItem Text="Oblika" Value="Oblika"></asp:MenuItem>
                        </asp:MenuItem>
                        <asp:MenuItem Text="Pomoč" Value="Pomoč"></asp:MenuItem>
                    </Items>
                </asp:Menu>
            </asp:ContentPlaceHolder>

<table border="0" cellpadding="2" cellspacing="0">
    <tr>
        <td>
            <img src="Images/logo.jpg" alt="CMSFirst" />
        </td>
    </tr>
    <tr>
        <td>
              <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                <asp:Menu ID="Menu1" runat="server">
                    <Items>
                        <asp:MenuItem Text="Članki" Value="Nov"></asp:MenuItem>
                        <asp:MenuItem Text="Nastavitve" Value="Nastavitve">
                            <asp:MenuItem Text="Pisava" Value="Pisava"></asp:MenuItem>
                            <asp:MenuItem Text="Oblika" Value="Oblika"></asp:MenuItem>
                        </asp:MenuItem>
                        <asp:MenuItem Text="Pomoč" Value="Pomoč"></asp:MenuItem>
                    </Items>
                </asp:Menu>
             </asp:ContentPlaceHolder>
        </td>
    </tr>
    <tr>
        <td>
            <p>
                <strong>Website design by Me</strong></p>
            <asp:LoginStatus ID="LoginStatus1" runat="server" />
        </td>
    </tr>
</table>
</form> 
```

我googlesd了很多，但找不到原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:08:49.197

我的带有菜单的示例母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                    My ASP.NET Application
                </h1>
            </div>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                    IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home" />
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About" />
                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server" />
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">
    </div>
    </form>
</body>
</html> 
```

我的默认页面

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Welcome to ASP.NET!
    </h2>
    <p>
        To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>
    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>
</asp:Content> 
```

我的关于页面示例

```
<%@ Page Title="About Us" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="About.aspx.cs" Inherits="About" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        About
    </h2>
    <p>
        Put content here.
    </p>
</asp:Content> 
```

# javascript - 页面上 jquery 驱动的 UI 的最佳实践？

> ID：14325659
> 
> 赞同：2
> 
> 时间：2013-01-14T19:56:28.277
> 
> 标签：javascript, jquery, user-interface

我有大约 40 行代码，当前包含在我页面顶部的 doc.ready 中。所有与 UI 相关的东西都将在网站的每个页面上使用。类似的东西：滚动回到顶部按钮，一旦滚动超过特定高度，固定标题背景就会变暗，.load 将 html 加载到 div 容器中，等等......

由于网站的每个页面都会使用 js，那么最佳实践是什么？我应该保持原样并将其移动到页面的页脚吗？

还是应该创建一个加载它的 default.js 文件？在这方面相当新，所以任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:59:08.517

如果在每个页面中都使用它，我建议将其移动到自己的 js 文件中。这将允许浏览器缓存它并减小页面大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:59:55.480

如果您在多个页面上使用相同的脚本，那么是的，将它放在一个单独的文件中并从每个页面引用它可能是有意义的`.js`（无论如何我都会这样做，即使只在一个页面上使用 JavaScript）。是的，如果您控制`<script>`标签的位置，几乎没有任何理由使用`ready`，只需将`<script>`标签放在底部，就在结束`</body>`标签之前。最后的参考资料：

*   [Google on DOM 元素何时可用](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)
*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:00:07.370

最佳实践应该是使用包含在脚本标签中的外部 js 文件。理想情况下，此脚本标记应放置在结束正文标记 ( `</body>`) 之前，但可以毫无问题地放置在头部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T20:00:00.973

我认为最好的做法是将 javascript 的代码分离到一个外部文件中，然后从网页的标题中调用它。最好避免混合代码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T20:00:11.297

永远不要将 JavaScript 直接放入您的 HTML 中。从技术上讲，它*可能*会使其他格式完美的 HTML 失效。但是，如今的浏览器已经足够聪明，可以解决这个问题。但是把它放在他们自己的文件中，通常会启用缓存。我通常做的是将所有站点范围的 JavaScript 内容放在一个文件中，然后将页面特定的内容放在另一个文件中。

# c#-4.0 - 防伪令牌

> ID：14325667
> 
> 赞同：1
> 
> 时间：2013-01-14T19:57:07.387
> 
> 标签：c#-4.0, asp.net-mvc-4, antiforgerytoken, asp.net-web-api-routing

我已经使用 MVC.NET 4.0 完成了一个网站，并且在我的本地主机上一切正常。但是，当我将网站上传到我的服务器上并尝试使用我的用户名和密码登录时，我在登录时遇到错误：-

```
 The required anti-forgery cookie "__RequestVerificationToken" is not present. 
```

究竟是什么问题？我是否需要更改帐户控制器的登录操作中的任何内容？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:22:55.783

鉴于简短的信息，我只能猜测可能出了什么问题。Web.config 内容设置会影响行为。

如果防伪造令牌是仅 SSL (Https) 的 cookie，并且您仅使用 HTTP 连接到网站，则不会发送 cookie。（HTTP 上不允许使用安全 cookie）

接收控制器或标记为检查防伪令牌的控制器操作然后失败。因为浏览器没有要发送的 cookie。

**检查浏览器是否接受 cookie 并且正在使用 HTTPs。**

# php - 仅在机器空闲时运行 cron 作业（linux）

> ID：14325671
> 
> 赞同：5
> 
> 时间：2013-01-14T19:57:32.990
> 
> 标签：php, linux, bash, cron, centos

仅当 CPU 空闲 >50% 时，如何运行 cron 作业（bash 脚本）？

我可以从 TOP 让 cpu 空闲

```
top -b -d 00.10 -n 3 |grep ^Cpu
Cpu(s): 0.3%us, 0.3%sy, 0.0%ni, 99.3%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st 
```

我目前的设置是：

```
crontab
0,15,30,45 * * * * /usr/bin/php /home/user/batchprocess.php
# I could use a bash script here to call PHP, if it is a good solution. 
```

我让 PHP 脚本检查 CPU 空闲：

```
batchprocess.php
proc_nice(10);
// wait for CPU idle
do{
    $cpu_stat = exec('top -b -d 00.10 -n 3 |grep ^Cpu');    
    $tmp = stristr($cpu_stat,'%id',TRUE);
    $cpuidle = trim(substr($tmp,strrpos($tmp,',')+1));
}while($cpuidle<$min_cpuidle);
// do actual processing here 
```

我当前方法的问题是它启动程序而不管 CPU 利用率如何。而且运行TOP的while循环感觉效率不高。我希望它只在 CPU 空闲>50 时启动

一些附加信息：

*   Centos 6.2、PHP5.3

*   我有几个永远不会关闭的 EC2 实例，所以我想在空闲时利用它们的处理能力。但永远不要重载服务器。（冗余数据库实例、开发实例、NAT 实例）

*   我知道 EC2 自动缩放，现货实例。只是想使用额外的容量。

*   后台工作是图像压缩（CPU 密集型，没有太多 I/O 或网络）。

欢迎任何建议。提前致谢！

* * *

根据下面的输入，我意识到在我的情况下“nice”是一个更好的解决方案。我应该重新调整我的目标，以尽量减少对服务器的影响，而不是跟踪 CPU 利用率。

所以新的设置是：

```
crontab
0,15,30,45 * * * * nice -20 /usr/bin/php /home/user/batchprocess.php 
```

和 PHP 脚本：

```
batchprocess.php
if ($cpuidle < 50) 
    exit(0);
// do actual processing here 
```

我将对其进行测试并发回我的发现。

* * *

报告：我已经把这段代码通过 DEV/PRD，它工作得很好。它没有解决 TOCTOU 的问题，但现在已经足够了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:23:01.967

这是一个典型的[TOCTOU 案例](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)——你检查系统是否空闲，然后启动你的进程——但是在你检查之后，在你的进程开始之前，其他的东西导致系统中的另一个进程启动并且你仍然加载系统超过必要。

执行此操作的“正确”方法是使用命令为您的进程提供低优先级`nice`。顺便说一句，您检查 cpu 使用情况的循环将使用 100% cpu，因此它可能无法工作，除非您第一次检查它是空闲的。

您已经有一个“proc_nice(10)”，所以应该可以完成这项工作。我认为花精力来确定系统是否繁忙没有任何意义。

如果您愿意，在代码中的适当位置，您可以执行以下操作：

```
 if (check_cpu_usage() > 50%) sleep(1second); 
```

但我不确定这是否有很大用处——如果系统很忙，一个“好”的进程将不会获得太多的 CPU 时间，因此不会与其他以更高优先级运行的进程竞争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:33:14.527

如果您只是希望在系统负载为例如 2.0 或更低时执行脚本，您可以使用这样的 shell 脚本：

```
#!/bin/sh
LOAD=`cat /proc/loadavg | cut -d" " -f1`
THRESHOLD=2.0
if [ $(bc <<< "$LOAD <= $THRESHOLD") -eq 1 ]; then
    $@
fi 
```

Save it as e.g. `/usr/local/bin/if-idle`, and stick `if-idle` in front of your command in your crontab file.

# .net - ActiveX 组件变回 UI 线程

> ID：14325676
> 
> 赞同：1
> 
> 时间：2013-01-14T19:57:48.793
> 
> 标签：.net, activex, threadpool

在 .NET 应用程序中，我使用第三方 ActiveX 控件连接到设备。该组件没有 UI，因此我可以从 Windows 应用程序、控制台应用程序或 Windows 服务中使用。问题是它的行为会根据应用程序类型而有所不同。

从控制台应用程序（或 Windows 服务）使用它：

1.  我使用 ThreadPool 调用组件方法，这意味着在主线程之外的线程中。
2.  该方法在同一个线程中执行。（如预期）
3.  方法回调在同一个线程中运行。（如预期）

但是，当从 Windows 应用程序使用它时：

1.  我使用 ThreadPool*调用*组件方法，这意味着在 UI 之外的线程中。--> 此时ActiveX控件似乎变成了UI线程。
2.  该方法在 UI 线程中执行（我看到 UI 阻塞了！）
3.  方法回调在 UI 线程中运行。

有什么方法可以隔离组件，以便调用在 UI 以外的线程中执行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:35:33.440

经过长时间的搜索和阅读，我能够使它工作。这是我使用的代码，带有一些注释。要了解更多信息，请在 Google 中搜索“.net Com thread sta”或类似内容。

```
// COM objects will always execute in the same thread where they were created, 
// so it's better to create them in another thread (that must be alive as long as the object
// exists) to avoid blocking the UI thread.
var thread = new Thread(CreateComponent);
thread.SetApartmentState(ApartmentState.STA);
threads.Add(thread);

thread.Start("optional parameters");

private void CreateComponent(object obj)
{
    var parameters = obj as string;

    // Create the COM object here
    var component = new CreateYourCOMComponent(parameters);

    // You might want to catch all unhandled exceptions too
    Application.ThreadException += Application_ThreadException;

    // Once the object is created, the thread must be alive during 
    // the whole time the COM object remains alive. The Application.Run 
    // will pump the messages required for COM and prevent the thread for exiting.
    Application.Run();
} 
```

# android - 如何在 ADT 项目中使用 ffmpeg4android？

> ID：14325677
> 
> 赞同：1
> 
> 时间：2013-01-14T19:57:48.650
> 
> 标签：android, android-ndk, ffmpeg

我使用 sourceforge 上的 FFmpeg4Android 项目来构建 FFmpeg .so 共享库文件。但是，我无法在 ADT Java 应用程序中使用它们。我创建了一个尝试调用 av_register_all 的简单 JNI 调用，但出现库错误。

当我在 Nexus 7 上运行应用程序时，我被告知它无法加载库 libavformat-HEAD-1.0.so

所以我尝试通过 System.loadLibrary 方法加载它，但我无法找到 libavcodec-HEAD-1.0.so。以这种方式返回，我最终尝试加载 libavutil-HEAD-1.0.so，这产生了错误“无法找到符号“__strchr_chk””。

这是我的 Java 类：

```
public class LibavcodecTest {
    public static native void avRegisterAll();

    static {
        System.loadLibrary("avutil-HEAD-1.0");
        System.loadLibrary("avcodec-HEAD-1.0");
        System.loadLibrary("avformat-HEAD-1.0");
        System.loadLibrary("LibavcodecTest");
    }
} 
```

**更新**

我联系了维护 ffmpeg4android 的开发人员，他能够指导我将我正在构建的 android 源代码的版本更改为与我的设备相同的版本，该设备可以让我成功调用 av_register_all。

但是，现在我在调用 avformat_open_input 时收到“致命信号 11 (SIGSEGV)”的崩溃。

我在网上的搜索让我相信这是一个内存访问问题。有谁知道这是否可以通过以不同方式加载共享库来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:46:55.220

让构建的共享库在我的设备上运行的关键是在与之兼容的旧 NDK 上构建源代码。我试图在最新的源代码上构建它，但没有奏效。

[这是我与帮助我解决它的开发人员进行的讨论的链接。](https://sourceforge.net/p/ffmpeg4android/discussion/general/thread/7bdf1dd8/?limit=25#aac9)

# c++ - c++ 中的字符串运算符重载 - 我真的不明白

> ID：14325678
> 
> 赞同：0
> 
> 时间：2013-01-14T19:57:55.210
> 
> 标签：c++, operator-overloading

这是我的代码：

```
#include <iostream>
#include <string.h>
using namespace std;

string& operator+(string & lhs, int & rhs) {
    char temp[255];
    itoa(rhs,temp,10);
    return lhs += temp;
}

int main() {
  string text = "test ";
  string result = text + 10;
} 
```

结果是：

```
test.cpp: In function 'int main()':
test.cpp:15:26: error: no match for 'operator+' in 'text + 10'
test.cpp:15:26: note: candidates are:
/.../ 
```

并且应该是`test 10`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T20:00:49.283

右值 ( `10`) 不能绑定到非常量引用。您需要重写您的`operator+`以将 an`int const &`或仅`int`作为其参数。

当你使用它时，你想重写它，这样它也不会修改左操作数。An`operator +=`应该修改它的左操作数，但 an`operator +`不应该。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T20:01:15.710

你不应该通过引用来获取 int 。只看价值。您的问题是您正在尝试对文字整数进行非常量引用-更改文字的含义是什么？

也就是说，您可能会考虑反对创建这样的运营商，因为它很有可能让未来的维护者感到困惑。

# scala - 在宏定义之外使用 reify

> ID：14325685
> 
> 赞同：2
> 
> 时间：2013-01-14T19:58:33.157
> 
> 标签：scala, scala-2.10, scala-macros

> **可能重复：**
> [在 Scala 中使用 reify（获取 AST）表达式的最简单方法是什么？](https://stackoverflow.com/questions/11055210/whats-the-easiest-way-to-use-reify-get-an-ast-of-an-expression-in-scala)

在宏定义内部，我可以使用`c.reify`参数`Context`将表达式转换为 AST。

但我希望能够通过传递 AST 并查看结果来测试我的宏函数。换句话说，给定：

```
def printf(format: String, args: Any*): Unit = macro printf_impl
def printf_impl(c: Context)(format: c.Expr[String], args: Expr[Any]*): c.Expr[Unit] = .... 
```

我希望能够这样做以获取由特定表达式生成的 AST，因此我可以进行单元测试或只是在 REPL 进行非正式测试

```
 printf_impl(c.reify("x%sy", c.reify(4 + 5)) 
```

但是`c`那个表达式应该是什么？

# intuit-partner-platform - 连接到 QuickBooks Online IPP

> ID：14325687
> 
> 赞同：0
> 
> 时间：2013-01-14T19:58:51.473
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在制作一个 QuickBooks Online 应用程序。我的客户如何获得这些信息：

*   访问密钥
*   访问密钥秘密
*   消费者密钥
*   消费者密钥

我的文档在这里：

[http://www.jmawebtechnologies.com/support-blog/january-2013/nopcommerce-quickbooks-online-set-up-and-installat](http://www.jmawebtechnologies.com/support-blog/january-2013/nopcommerce-quickbooks-online-set-up-and-installat)

在我的 Intuit 开发人员门户中，我有这 4 条信息。我有一个应用配置文件：

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/Create_An_App_Profile](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/Create_An_App_Profile)

每个客户会有不同的访问密钥、访问密钥秘密、消费者密钥和消费者密钥秘密吗？根据我的经验，似乎只有 realmId（公司 ID）发生了变化，其他信息保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:06:52.887

当您按照本页面提供的说明创建应用程序配置文件时 - https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/Create_An_App_Profile 您将获得一个消费者密钥和秘密。您需要使用此密钥进行 oauth 握手以获取访问令牌和密钥。

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App)

将为每个用户提供一个新的访问令牌和秘密，但消费者密钥/秘密对于您的应用程序的所有用户都是相同的。

# ios - iOS 自动布局：这可以用 IB 完成吗？

> ID：14325688
> 
> 赞同：2
> 
> 时间：2013-01-14T19:58:51.953
> 
> 标签：ios, xcode, interface-builder, autolayout

我正在尝试使用界面生成器创建以下自动布局：

在视图的顶部：

*   适合设备宽度的图像视图
*   图像视图是方形的（高度也等于设备的宽度）

填充图像视图下方的其余空间：

*   3个等高按钮
*   它们一起填充了顶部正方形下方的其余空间

这可以仅在 IB 中完成吗？

-斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:08:29.263

不，它不能，因为您无法在界面生成器中表达关系约束。

除了图像视图的高度之外，您可以执行其他所有操作（几乎，请参见编辑）。您可以在视图上设置一个恒定的高度约束（可能设置为 iPhone 屏幕的宽度），然后为其创建一个出口。

在运行时，如果您在 iPad 上运行（我假设要求是在 iPad 和 iPhone 之间工作，而不是纵向和横向，因为您的描述对横向没有意义）然后删除此约束并添加一个新的固定图像视图的高度与其宽度相同。

以下是设置其余约束的方法。我假设您从一个仅包含其主视图出口的视图控制器开始。

1.  在图像视图中拖动，默认会填满屏幕。
2.  使用固定菜单将图像视图的高度固定为 320（然后编辑创建的约束）。这是您创建出口的约束。
3.  拖入三个按钮
4.  全部选择它们并同样选择引脚高度
5.  选择底部按钮，并使用 Pinning 菜单将底部空间固定到 superview
6.  选择该约束并勾选“标准”复选框。这将增加您的三个按钮以填充剩余空间（加上一点间距）。
7.  选择所有三个按钮并固定宽度
8.  选择一个按钮并将尾随空格固定到超级视图。和以前一样，选择此约束并勾选“标准”复选框。按钮将增长以填充视图的宽度。

你希望它看起来像这样：![在此处输入图像描述](../Images/bd58a80d0b6e6de50b243606073037b2.png)

出于某种原因，IB 在其中一个按钮上添加了高度限制，但不允许我删除。让三个按钮高度相等，并在运行时根据图像视图的间距和高度推导出每个按钮的高度似乎并不令人愉快。可能还需要在运行时删除该约束，或者我可能在一起抨击时遗漏了一些东西。无论如何，希望上面概述的原则是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:11:34.800

要制作`UIImageView`平方，您需要通过代码制作约束。我认为所有其他要求都可以在 IB 中涵盖，但就个人而言，我建议您通过编码来实现。

祝你好运。

# ios - 如何从另一个类访问 UIViewController 上的 IBoutlet？

> ID：14325691
> 
> 赞同：2
> 
> 时间：2013-01-14T19:58:55.123
> 
> 标签：ios, objective-c, uiviewcontroller

我通过 StoryBoard 将 UIButton 放在 UIVIewController 上。

在 xxxVIewController.h

```
@interface xxxViewController : UIViewController{

IBOutlet UIButton *But;
}
@property (retain, nonatomic) IBOutlet UIButton *But; 
```

我想从另一个类访问“* But”来更改 UIButton 的 setimage。

我想如果我能得到 UIViewController 的实例，它就解决了.....

有没有人给我提示

* * *

谢谢他，Jasper Blues 我添加了评论。

一种是不包含导航控制器的 xxxViewController。它只包含四个按钮。

另一个是TimerClass（NSObject），它管理应用程序的时间。

TimerClass 类有定时器。我想要做的是每隔几秒钟从 TimerClass 更改 xxxViewController 上的按钮颜色。

我可以轻松访问 TimerClass 方法。因为 xxxViewController 有 TimerClass 实例。

但是 xxxViewController 是自动生成的，所以我不知道如何从 TimerClass 中获取 xxxViewController 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:58:42.610

没错，声明了属性后，您需要一个指向 xxxViewController 的指针，该指针来自将要进行更新的类。

如果它在 UINavigationController 中，您可以从那里访问它。否则（我试图保持这个简单，以防你刚刚开始）你可以把它放在例如 AppDelegate 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:20:08.963

我会设置`xxxVIewController`为代表`TimerClass`，当您创建`TimerClass`实例时，将代表设置为`self`.

IE：

```
self.timer = [[TimerClass alloc] init];
self.timer.delegate = self;  // This assumes that you have already created a declared property called delegate in your `TimerClass` class 
```

然后，当需要更新按钮时，您应该调用一个委托函数`xxxVIewController`并让它更新自己的按钮：

```
// Or whatever method that you want called
if (self.delegate respondsToSelector(@selector(changeButtonColor)))
{
    [self.delegate changeButtonColor];
} 
```

如果您不熟悉协议，请阅读协议，您将看到以更通用的方式实现此功能的好方法。

# google-chrome - 从 chrome 扩展中访问响应负载/数据

> ID：14325695
> 
> 赞同：8
> 
> 时间：2013-01-14T19:59:01.637
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, httpwebresponse

我正在开发一个项目，需要跟踪来自某个站点的“ajax 请求”，访问其中一些请求的响应有效负载并对其采取行动。

到目前为止，我设法使用[webRequest api](http://developer.chrome.com/extensions/webRequest.html)跟踪请求并访问它们的标头，唯一的问题是我无论如何都找不到访问这些响应中的实际数据。

甚至可能吗？

请随时发布任何可以提供帮助的想法或参考资料。

感谢，并有一个愉快的一天。

* * *

**编辑：**

我正在寻找的一个示例是网络面板中的响应选项卡，它是 chrome 开发人员工具的一部分。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T12:28:09.347

**网络面板**是**HAR**（*HTTP 存档格式*）**日志**的 HTML 表示。您可以使用 跟踪网络面板的每个元素`devtools.network API`。

您可以参考以下代码，其中跟踪*TCP 连接时间*作为开始使用`devtools.network API`和的参考`HAR Log`。

### 清单.json

注册`devtools.html`用于跟踪网络面板事件

```
{
    "name": "Network Demo",
    "description": "This is a sample for API's available for Network",
    "devtools_page": "devtools.html",
    "manifest_version": 2,
    "version": "2"
} 
```

### 开发工具.html

注册`devtools.js`以符合 CSP。

```
<html>

    <head>
        <script src="devtools.js"></script>
    </head>

    <body></body>

</html> 
```

### 开发工具.js

以下代码中的 req 返回[HAR Log](http://www.softwareishard.com/blog/har-12-spec)，您可以使用它来读取您需要的内容；我在这里使用了 HAR 作为[TCP 连接时间](http://www.softwareishard.com/blog/har-12-spec/#timings)

```
chrome.devtools.network.onRequestFinished.addListener(function(req) {
    // Displayed sample TCP connection time here
   console.log(req.timings.connect);
}); 
```

# 参考

*   [devtools.network API](https://developer.chrome.com/extensions/devtools.network.html)
*   [哈尔日志](http://www.softwareishard.com/blog/har-12-spec/)
*   [网络面板](https://developers.google.com/chrome-developer-tools/docs/network)
*   [内容安全策略（CSP）](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T21:33:57.817

devtools.network API 仅在开发人员工具窗口打开时才有效。对于日常浏览，无法访问响应数据。有一个[功能请求](https://code.google.com/p/chromium/issues/detail?id=104058)打开，其中讨论了阅读/编辑响应正文。

# cakephp - 在 Zend Studio 中运行 CakePHP 测试

> ID：14325696
> 
> 赞同：1
> 
> 时间：2013-01-14T19:59:02.130
> 
> 标签：cakephp, phpunit, zend-studio, cakephp-2.3

我可以从控制台运行我的 CakePHP 单元测试，但是如果我可以使用 Zend Studio 9 的内置特性来运行这些测试，那会容易得多。

我找不到任何关于如何在 Zend Studio 中运行 CakePHP 测试的提示。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:52:49.570

我刚刚尝试加载在 Web 浏览器中工作的测试，但它们在 Zend Studio 中不起作用。要知道，如果您计划在 Zend Studio 中运行您的测试，它们很可能必须专门编写才能在 Zend Studio 中工作，并且很可能无法在浏览器中工作。

# java - Java中的表类数据结构

> ID：14325699
> 
> 赞同：-5
> 
> 时间：2013-01-14T19:59:10.173
> 
> 标签：java

如果这个问题已经在其他地方得到了回答，请原谅我，但我已经搜索了很长时间并且没有找到答案。

我是 Java 编程新手，我希望创建一个像数据结构这样的简单表，我可以根据需要对其进行操作。

例如：

姓名,年龄,头发_颜色 Bob,20,Black John,25,Brown Larry,30,Black

在 powershell 中，我只需创建一个自定义对象，填充它并将它们附加到一个数组中。但是，我正在努力用 Java 对其进行编码。

任何人都可以为我提供任何帮助，我将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:11:19.373

这是一个非常基本的问题，几乎不是问这个问题的地方……我建议您从一本好的初学者书籍开始您的 Java 体验。我认为 Bruce Eckel 的“Thinking in Java”是一个好的开始。

至于问题本身 - 尝试使用 ArrayList。它由常规表支持，但具有非常方便的界面。几个例子：

```
// a handy way to create a prepopulated list
List<String> listOfStrings = Arrays.asList("foo", "bar", "baz");

// creating an empty ArrayList
List<String> list = new ArrayList<String>();
// adding an element
list.add("a string");
// adding a whole collection
list.addAll(listOfStrings); 
```

Java 是一种强类型语言，因此如果您需要一个包含名称、年龄和头发颜色的 bean，您需要为此创建一个类。假设这是一个 Person 类：

```
package my_package;

public class Person {
private String name;
private String hairColour;
private int age;

public Person(String name, String hairColour, int age) {
    this.name = name;
    this.hairColour = hairColour;
    this.age = age;
}

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getHairColour() {
    return hairColour;
}
public void setHairColour(String hairColour) {
    this.hairColour = hairColour;
}
public int getAge() {
    return age;
}
public void setAge(int age) {
    this.age = age;
}
} 
```

您需要创建这种类型的对象并将它们插入到 ArrayList 中，就像以前一样：

```
List<Person> listOfPeople = new ArrayList<Person>();
listOfPeople.add(new Person("Bob", "Brown", 39)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:05:43.443

如果您真的想要一个表并执行 SUM、GROUP BY 等任意查询，那么您最好使用 H2 等内存数据库。否则，您可以定义自定义对象（即类）并将其附加到集合中。

# css - 如何为gridview标题中的单元格设置样式 - asp.net

> ID：14325700
> 
> 赞同：1
> 
> 时间：2013-01-14T19:59:22.120
> 
> 标签：css, gridview

我已经有一段时间没有处理发布的 html 了，特别是使用 aspx 控件，因为我一直在使用 asp 和 vb6。好吧，在这个介绍之后，我将转到这个问题：我找到了一种使用 CSS 对 GridView 进行样式化的方法，这种方式：

```
<asp:GridView ID="myGrid" runat="server" CssClass="workGrid"> 
```

然后我从 CssClass 中指定不同的部分样式，这样：

```
.workGrid th /* for the header */
    {
        BORDER-BOTTOM: 2px solid black;
        BORDER-LEFT: 0px none;
        BORDER-RIGHT: 0px none;
        BORDER-TOP: 0px none;       
        FONT-SIZE: 9pt;
        FONT-WEIGHT: bolder;
        }

    .workGrid td /* for the body */
    {
        border-style: none;
        border-width: 0px;
        } 
```

现在的问题是我无法对标题中的单元格进行样式化，只能通过“th”样式更改整个标题...

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:37:31.670

感谢 Ryan 的回复，我意识到我的理解是不正确的。我试图通过为页面中的每个“th”创建一个新样式来对我的 gridview 的标题进行样式化，并且它可以正常工作 90%。但我无法为标题中的每个单元格设置边框，而是为整行（标题）设置边框。

这就是我想做的...... [http://tinypic.com/r/4l3m1j/6](http://tinypic.com/r/4l3m1j/6)

这就是我得到的...... [http://tinypic.com/r/29f5oub/6](http://tinypic.com/r/29f5oub/6)

因此我认为在“th”中有很多“td”（错误），我应该为“th”中的每个“td”设置样式。当我看到生成的代码以及 gridview 的渲染方式时，我意识到这并不是我想象的那样。实际上问题是gridview被渲染为一个表格，属性cellspacing设置为0。

最后，我通过设置gridview的属性cellspacing解决了这个问题。

# c# - 在一个 aspx 页面上使用 ac# 类和 vb 类

> ID：14325702
> 
> 赞同：2
> 
> 时间：2013-01-14T19:59:33.873
> 
> 标签：c#, asp.net, vb.net

我有一个任务，我必须在同一个项目中使用 c# 和 vb。在搜索之后，似乎一个网站在视觉工作室中最适合这个，而且进展相对顺利。当我被要求有一个标签和一个按钮时，我遇到了一个问题。按钮假设使用 vb 代码，标签假设使用 c#。我最初的反应是创建两个 aspx 页面并将按钮添加到一个页面，并将标签添加到另一个页面，然后真的没有问题出现。但是我想知道是否可以为这两个项目使用相同的 aspx 页面并且仍然具有 vb 编码按钮和 c# 编码标签？如果有可能你怎么做那种事情？

感谢所有见解，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:04:12.600

你会想要使用一个`UserControl`. 用户控件可以用 C# 或 VB 编写，然后可以添加到以其他语言编码的应用程序页面。使用用户控件时，从外部，您不需要知道它是用 C# 还是 VB 编写的，它旨在进入页面并与其他控件很好地配合，因此您无需尝试弄清楚如何在浏览器中将两个页面组合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:10:59.263

单个项目不能包含超过 1 种语言的代码。一个解决方案可以包含多个项目。每个项目都可以使用您可以使用的任何语言，因此您可以拥有具有多种语言的解决方案，但在单个项目中，您只能拥有一种语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:07:22.390

目前尚不清楚您的意思是什么`The Button is suppose to use vb code`。这是否意味着您的按钮的事件处理程序是编写的`VB.NET`还是它`VB.NET`本身编写的？分别为您的`C#`标签。如果你想用这些语言写一个`*.aspx`答案是*否定*的。如果这些按钮和标签只是编写的自定义控件`VB.NET`并且`C#`答案是*肯定*的并且检查`Servy`的答案。

# iphone - 为什么 UIPickerView didSelectRow 方法会崩溃？

> ID：14325704
> 
> 赞同：0
> 
> 时间：2013-01-14T19:59:41.770
> 
> 标签：iphone, methods, uipickerview

我是 iphone 开发的菜鸟（xcode 中的第二天），我正在开发一个初学者应用程序，它使用具有三个组件的 UIPickerView。我已经使用了本[教程](http://joshhighland.com/blog/2009/09/17/uipickerview-spinning-multiple-components/)，但是由于某些原因，当我更改任何一个组件的位置时，我的应用程序崩溃了。我不知道会发生什么，我唯一要做的就是在导致应用程序崩溃的特定行上的“线程：步骤后停止”。非常感谢任何解决此问题的帮助。

这是我的代码：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

NSInteger selectedTransaction = [pickerView  selectedRowInComponent:0]; //App crashes here
NSInteger selectedCoinOrScrap = [pickerView  selectedRowInComponent:1];
NSInteger selectedCurrency = [pickerView  selectedRowInComponent:2];

        if(selectedTransaction==2||selectedTransaction==3){
            arrayWhichMetal=[[NSArray alloc]initWithArray:arrayGoldScrapType];
            [pickerView  reloadComponent:1]; 
            if (selectedCoinOrScrap==0) {

            }else if(selectedCoinOrScrap==1){

            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:26:14.530

听起来你可能需要清理你的项目。

# c - 如何从 c 中的 stat() 获取八进制 chmod 格式

> ID：14325706
> 
> 赞同：5
> 
> 时间：2013-01-14T19:59:55.183
> 
> 标签：c

我需要知道如何以八进制格式获取文件权限并将其保存到 int 中。我试过这样的事情：

```
struct stat buf;  
stat(filename, &buf);
int statchmod = buf.st_mode;
printf("chmod: %i\n", statchmod); 
```

但他的输出是：

```
chmod: 33279 
```

应该是777。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T20:09:36.460

33279 是八进制 100777 的十进制表示。您获得十进制表示是因为您通过格式标识符请求将数字打印为十进制`%i`。`%o`将其打印为八进制数。

但是， st_mode 将为您提供更多信息。（因此`100`在开头。）您需要使用`S_IRWXU`（“用户”的rwx 信息）、`S_IRWXG`（组）和`S_IRWXO`（其他）常量来获得所有者、组和其他人的权限。它们分别在 700、070 和 007 处定义，均以八进制表示。将它们组合在一起并使用 AND 过滤掉指定的位将只产生您想要的数据。

因此最终的程序变成了这样：

```
struct stat buf;  
stat(filename, &buf);
int statchmod = buf.st_mode & (S_IRWXU | S_IRWXG | S_IRWXO);
printf("chmod: %o\n", statchmod); 
```

资源：

1.  [有关格式标识符的更多信息](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/FUNCTIONS/format.html)
2.  [相关常数](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T00:36:07.160

我喜欢[@ilias 的](https://stackoverflow.com/a/14325854/105539)回答。但是，如果您像我一样并且实际上想要完整的 chmod 值（例如完全保存和恢复原始文件权限），那么此例程将执行此操作，并确保前导零也不会被删除。

```
static std::string getChmodPerms(std::string sFile) {
    struct stat buf;
    stat(sFile.c_str(),&buf);
    int statchmod = buf.st_mode;
    char mybuff[50];
    sprintf(mybuff,"%#o",statchmod);
    std::string sResult(mybuff);
    return sResult;
} 
```

它是 C++，但如果你愿意，转换成 C 是微不足道的。

# asp.net - 如何在 Visual Studio 2012 中使用 <%= 折叠 javascript 函数

> ID：14325713
> 
> 赞同：6
> 
> 时间：2013-01-14T20:00:06.933
> 
> 标签：asp.net, visual-studio-2012

在 Visual Studio 2012 中编辑标记/aspx 时，您显然可以折叠 javascript 函数，只要它们不包含特殊的服务器标记，例如 Response.Write **<%=**的快捷方式。

**例子：**

可以崩溃：

```
function foo() {
    var x = 0;
} 
```

不能**倒塌**：

```
function bar() {
    var x = $find("<%= txtWhatever.ClientID %>");
} 
```

我注意到，只要您添加开始标签**<%= ，单词****function**左侧的折叠选项 ( **-** ) 就会消失，所以我知道这就是问题所在。

 **无论大小/内容如何，​​它似乎都会破坏整个功能的崩溃。

我已经尝试过[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)插件以及[Advanced Javascript 大纲](http://visualstudiogallery.msdn.microsoft.com/4be701d8-af03-40a4-8cdc-d2add5cde46c)插件，但似乎都不适用于具有此特定内容的功能。

有没有办法让包含这些类型标签的函数可折叠？

谢谢-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T16:03:11.503

**只有一种解决方法：**

将每个函数包装在其自己的脚本标记中。

JS 团队显然已经打开了一个关于此的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T16:02:20.497

我使用“三个脚本”模式：

# ***脚本 1***

* * *

页面级变量。

# ***脚本 2***

* * *

'Getter/Setter' 函数返回对服务器控件或获取/设置值的引用。

例如：

```
function GetTxtUserNameVal() {
    var rtn = $('#<%= txtUsername.ClientID %>').val();
    return rtn;
}

function SetTxtUserNameVal(arg) {
    $('#<%= txtUsername.ClientID %>').val(arg);
}

function GetUserDetailsGrid() {
    return $find('<%= gridUserDetails.ClientID %>');
} 
```

# ***脚本 3***

* * *

职能：

在这些中，我使用上面的 getter/setter 函数而不是服务器标签。

* * *

现在我可以折叠脚本，也可以单独折叠 Functions 脚本中的所有函数。**

# pdf - ItextSharp：循环定位页面上的文本

> ID：14325718
> 
> 赞同：0
> 
> 时间：2013-01-14T20:00:15.090
> 
> 标签：pdf, loops, position, itextsharp, absolute

我发现这段代码可以将文本放在页面上的特定位置。

```
ColumnText ct = new ColumnText(cb);
Phrase myText = new Phrase("TEST paragraph\nNewline");
ct.SetSimpleColumn(myText, 34, 750, 580, 317, 15, Element.ALIGN_LEFT);
ct.Go(); 
```

现在我希望在 forloop 中为一系列文本这样做。我有

```
columnText ct = new ColumnText(cb)
Phrase myText; int x = 34; int y = 750;
for(int i = 0; i<5; i++){
  myText = new Phrase("TEST paragraph\nNewline");
  ct.SetSimpleColumn(myText, x, y, 580, 317, 15, Element.ALIGN_LEFT);
  ct.Go();
  x += 10;
  y+= 12;
} 
```

但这给了我一个错误，因为文档无法创建。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:24:18.100

尝试将对象创建移动到循环中：

```
//Declare ct
columnText ct;
Phrase myText; int x = 34; int y = 750;
for(int i = 0; i<5; i++){
  //Instantiate ct
  ct = new ColumnText(cb);
  myText = new Phrase("TEST paragraph\nNewline");
  ct.SetSimpleColumn(myText, 34, 750, 580, 317, 15, Element.ALIGN_LEFT);
  ct.Go();
  x += 10;
  y += 12;
} 
```

# google-tv - 用于 Google TV/Honeycomb 的 MediaCodecList

> ID：14325721
> 
> 赞同：0
> 
> 时间：2013-01-14T20:00:18.630
> 
> 标签：google-tv

是否有等效于可以在 Honeycomb/Google TV 上运行的 MediaCodecList。基本上我需要能够获得特定设备支持的支持的视频/音频编解码器列表。然后，这将用于确定我是否需要转码服务器上的文件并通过 HTTPS 实时流传输，或者我是否可以直接将文件发送到视频播放器而无需转码。我知道每个设备可以支持不同数量的编解码器和类型，因此似乎需要类似 MediaCodecList 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:08:46.023

官方列表位于[https://developers.google.com/tv/android/docs/gtv_media_formats](https://developers.google.com/tv/android/docs/gtv_media_formats) - 我认为 HLS 不支持 https。

# bash - 在 Bash 中连接变量

> ID：14325722
> 
> 赞同：51
> 
> 时间：2013-01-14T20:00:22.877
> 
> 标签：bash, shell, string-concatenation

毫无疑问，愚蠢的问题，我试图将一个变量添加到一个变量的中间，所以例如在 PHP 中我会这样做：

```
$mystring = $arg1 . '12' . $arg2 . 'endoffile'; 
```

所以输出可能是`20121201endoffile`，我怎样才能在 linux bash 脚本中实现相同的目标？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-14T20:01:44.027

尝试这样做，在 bash 中没有要连接的特殊字符：

```
mystring="${arg1}12${arg2}endoffile" 
```

## 解释

如果你不放括号，你会要求[bash](/questions/tagged/bash "显示标记为“bash”的问题")连接`$arg112 + $argendoffile`（我猜这不是你问的），如下例所示：

```
mystring="$arg112$arg2endoffile" 
```

需要时，括号是变量的*分隔符。*不需要的时候，可以用也可以不用。

## 另一种解决方案

（不太便携：需要`bash`> 3.1）

```
$ arg1=foo
$ arg2=bar
$ mystring="$arg1"
$ mystring+="12"
$ mystring+="$arg2"
$ mystring+="endoffile"
$ echo "$mystring"
foo12barendoffile 
```

见[http://mywiki.wooledge.org/BashFAQ/013](http://mywiki.wooledge.org/BashFAQ/013)

# javascript - 丢弃事件不阻止默认

> ID：14325729
> 
> 赞同：5
> 
> 时间：2013-01-14T20:00:52.497
> 
> 标签：javascript, jquery, google-chrome, drag-and-drop, jquery-events

我有以下内容：http: [//jsfiddle.net/KywJT/](http://jsfiddle.net/KywJT/)

```
function dragEnter(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    $(evt.target).addClass('over');
}

function dragLeave(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    $(evt.target).removeClass('over');
}

function drop(evt) {
   evt.stopPropagation();
   evt.preventDefault();
   $(evt.target).removeClass('over');
}

jQuery( function ( $ ) {

  var $box = $( "#box" );
  $box.bind("dragenter", dragEnter);
  $box.bind("dragleave", dragLeave);
  $box.bind("drop", drop);
}); 
```

我正在使用 Chrome 版本 24.0.1312.52 m 和最后一个 jQuery (1.8.3)。当我将文件放入框中时，浏览器不会阻止默认行为。你能帮我么？

PS dragexit 已弃用正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-13T05:44:33.743

如果您希望在 Google Chrome 中触发 drop 事件，则必须先定义一个 dragover 侦听器，即使该函数根本不做任何事情。我不知道为什么，这很奇怪......但清楚地识别并且易于复制:)昨天在那个sh * t上失去了2个小时：/希望这会有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T20:19:00.277

这应该可以为您解决问题。

```
jQuery( function ( $ ) {
    var $box = $( "#box" );
    $box.bind("dragenter", dragEnter);
    $box.bind("dragleave", dragLeave);
    $box.bind("drop", drop);

    $(document).bind('dragover', function (e) {
         e.preventDefault();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T19:35:16.717

这是一个老问题，但我使用了这个问题的答案并编写了我想要的代码：

HTML：

```
<div id="image_holder" ondragover="dragEnter(this,event)"></div> 
```

jQuery：

```
function dragEnter(a,evt) {
    evt.stopPropagation();
    evt.preventDefault();
    $(evt.target).addClass('over');

    $(a).bind("dragleave", dragLeave);
    $(a).bind("drop", drop);

    $(document).bind('dragover', function (e) {
        e.stopPropagation();
        e.preventDefault();
    });
    return false;
}

function dragLeave(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    $(evt.target).removeClass('over');
    return false;
}

function drop(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    $(evt.target).removeClass('over');
} 
```

这具有您可以轻松地将其用于页面中的不同元素的特权。

# php - 两种HABTM模型的新记录

> ID：14325730
> 
> 赞同：1
> 
> 时间：2013-01-14T20:00:55.433
> 
> 标签：php, cakephp, activerecord, has-and-belongs-to-many

我想在同一个表单提交中为两个 HABTM 关联模型添加新记录。

我有两个模型：Booking 和 PaymentItem。这两者具有HABTM关系。我已经加入了 BookingPaymentItem 模型（我需要在稍后阶段访问此模型以跟踪付款）。

了解预订表中的所有字段并不重要，但以下是付款项目模型中的相关字段：

```
**payment_items - table**
id
name
description
price

**booking_payment_items**
id
booking_id
payment_item_id
quantity 
```

因此，在“预订”添加视图中，我拥有所有要添加的预订字段。现在，在提交表单时，我需要创建两个新的付款项目——住宿和押金。所以，我的想法是添加一些隐藏字段并且只显示字段：住宿费用和存款金额给用户。这两个新的付款项目需要与新创建的预订相关联（并且通过扩展，BookingPaymentItem 条目）。

这是我添加视图中的表单设置：

```
<? echo $this->Form->hidden('PaymentItem.1.id', array('value'=>$this->Text->uuid(), 'div' => false)); ?>
<? echo $this->Form->input('PaymentItem.1.price', array('label' => 'Total Tariff','div' => false)) ?>
<? echo $this->Form->hidden('PaymentItem.1.name', array('value'=>'Accommodation', 'div' => false)); ?>
<? echo $this->Form->hidden('PaymentItem.1.description', array('value'=>'Accommodation', 'div' => false)); ?>
<? echo $this->Form->hidden('PaymentItem.2.id', array('value'=>$this->Text->uuid(), 'div' => false)); ?>
<? echo $this->Form->input('PaymentItem.2.price', array('label' => false,'div' => false)); ?>
<? echo $this->Form->hidden('PaymentItem.2.name', array('value'=>'Deposit', 'div' => false)); ?>
<? echo $this->Form->hidden('PaymentItem.2.description', array('value'=>'Deposit', 'div' => false)); ?> 
```

这是请求->数据变量转储：

```
array(
'Booking' => array(
    'property_id' => 'COC1127',
    'checkin' => '2013-01-23',
    'checkout' => '2013-01-30',
    'guest_id' => '02',
    'ownervisible' => '1',
    'adults' => '1',
    'children' => '0',
    'infants' => '0',
    'deposit_due_date' => '2013-01-16'
),
'PaymentItem' => array(
    (int) 1 => array(
        'id' => '50f4612d-3858-4d68-9dee-0b70c2e1e283',
        'price' => '1200',
        'name' => 'Accommodation',
        'description' => 'Accommodation'
    ),
    (int) 2 => array(
        'id' => '50f4612d-a334-4615-ba8d-0b70c2e1e283',
        'price' => '400',
        'name' => 'Deposit',
        'description' => 'Deposit'
    )
)
) 
```

结果：

1.  预订模型按预期完美保存
2.  没有记录付款项目条目
3.  未记录预订付款项目条目

我玩了一下这个，得到了更多的保存，但没有什么符合我需要做的。

我需要添加预订，添加两个付款项目，并添加关联的 booking_payment_item 条目与 ID。

# .net - 什么是视觉工作室解决方案上下文中的工件？

> ID：14325731
> 
> 赞同：4
> 
> 时间：2013-01-14T20:00:57.647
> 
> 标签：.net, visual-studio, deployment, teamcity, artifact

希望是一个简单的问题。

什么是视觉工作室解决方案上下文中的工件？他们在做什么？有哪些常见的部署模式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T22:27:29.090

从[文档](http://confluence.jetbrains.net/display/TCD7/Build+Artifact)：

> 构建工件是由构建生成并存储在服务器上的文件。通常这些包括分发包、WAR 文件、报告、日志文件等。创建构建配置时，您可以在 General Settings 页面指定构建的工件

现在来具体回答你的问题。

> 什么是视觉工作室解决方案上下文中的工件？

TeamCity 使用[Build Step](http://confluence.jetbrains.net/display/TCD7/Configuring+Build+Steps)编译您的解决方案。工件是您在编译 Visual Studio sln 文件后选择“保留”的文件。

例如：

![在此处输入图像描述](../Images/7344787b85fd34fd168618f1dc6f85e8.png)

这假设您有一个编译 2 个项目的 sln，`ConsoleApplication`并且`WebApi`- 此示例说`keep all the output of ConsoleApplication and all the dll's of WebApi.` 这些工件由 TeamCity 持有，可以作为部署过程的一部分下载。

# asp.net - 来自业务层的 ASP.NET 自定义异常处理

> ID：14325737
> 
> 赞同：1
> 
> 时间：2013-01-14T20:01:09.347
> 
> 标签：asp.net, exception, exception-handling, nested-class, n-layer

我是 OOP 的新手，所以我需要帮助来了解这是否是处理它的正确方法。我有一个 3 层 Web 项目（+ DTO），我试图了解这是从业务对象返回“错误”到表示层的最佳方式。特别是现在我正面临这个创建用户的问题。假设我想在网站注册时在数据库中创建用户，我需要告诉实际用户用户名或电子邮件是否已经被使用（这只是一个例子）。

例如，ASP.NET Membership.CreateUser() 方法通过引用传递一个 MembershipCreateStatus 对象，因此该方法用于返回一个 Enum（位于另一个命名空间中......）以传递尝试的状态，这可能是 DuplicateEmail，重复用户名，等等。

我根据异常实现了另一种方式，但我想听听你的意见。在创建用户的 BLL 管理器类中，我以这种方式创建了一个嵌套的 Excpetion 类和嵌套的 Enums 错误类型：

```
Public Class UserManager
    Public Enum ErrorType
        DatabaseError = 1
        UserExists = 2
        EmailExists = 3
    End Enum

    Public Class ManagerException
        Inherits Exception

        Public Property ErrorType As ErrorType
        Public Property SuggestedUserName As String
        Public Property SuggestedEmail As String

        Public Sub New()
            MyBase.New()
        End Sub

        Public Sub New(message As String)
            MyBase.New(message)
        End Sub

        Public Sub New(message As String, inner As Exception)
            MyBase.New(message, inner)
        End Sub
    End Class

    Public Function CreateUserLogin(user As EvaVwUserLogin) As Guid
        If user Is Nothing Then
            Throw New ApplicationException("No user suppied")
        End If

        If String.IsNullOrWhiteSpace(user.Password) OrElse String.IsNullOrWhiteSpace(user.UserName) Then
            Throw New ApplicationException("Password or username missing")
        End If

        If CheckDuplicateUserName() Then
            Dim ex As New ManagerException("Username exists")

            ex.ErrorType = ErrorType.UserExists
            ex.SuggestedUserName = "this username is free"

            Throw ex
        End If
    End Function
End Class 
```

然后在 UI 层（后面的 aspx 代码）我调用管理器并检查异常，如下所示：

```
 Dim userManager As New UserManager

        Try
            userManager.CreateUserLogin("test", "test")
        Catch ex As UserManager.ManagerException
            If ex.ErrorType = userManager.ErrorType.UserExists Then
                Dim suggestedUsername = ex.SuggestedUserName

                ' Display error message and suggested user name
            End If
        End Try 
```

这是一个正确的方法吗，考虑到异常和枚举都非常特定于这个经理，所以如果我沿着这条路走，每个经理都会有嵌套的 ManagerException 和相关的枚举？

一如既往地提前感谢您的意见。

* * *

跟进 Brian 和 Cyborg 建议的“自定义代码”场景（我标记了他的答案只是因为它更完整，Brian 也许其他用户对 MS 建议感兴趣）你认为在管理器类中嵌套自定义返回对象和相关枚举会是个好主意吗？由于这些枚举将与这个管理器类严格相关（并且 BLL 中的每个 managar 类都有自己的）你认为我仍然可以将它们用作传递的状态码吗？

编辑：我以这种方式重构......你认为它可以吗？

```
Public Class UserManager
    Public Enum ErrorType
        DatabaseError = 1
        UserExists = 2
        EmailExists = 3
    End Enum

    Public Class ErrorData
        Public Property ErrorType As ErrorType
        Public Property SuggestedUserName As String
        Public Property SuggestedEmail As String
    End Class

    Public Function CreateUserLogin(username As String, password As String, ByRef errorData As ErrorData) As Guid
        Dim user As New EvaVwUserLogin

        user.UserName = username
        user.Password = password

        Return CreateUserLogin(user, errorData)
    End Function

    Public Function CreateUserLogin(user As EvaVwUserLogin, ByRef errorData As ErrorData) As Guid
        If user Is Nothing Then
            Throw New ApplicationException("No user object")
        End If

        If String.IsNullOrWhiteSpace(user.Password) OrElse String.IsNullOrWhiteSpace(user.UserName) Then
            Throw New ApplicationException("Missing password or username")
        End If

        Dim hashedPassword As String

        hashedPassword = Crypto.HashPassword(user.Password)

        If UserExists(user) Then
            errorData.ErrorType = ErrorType.UserExists
            errorData.SuggestedUserName = "this username is free"
            Return Nothing
        End If
        .....
    End Function
End Class 
```

在表示层：

```
 Dim userManager As New UserManager
        Dim managerError As New UserManager.ErrorData
        Dim userId As Guid

        userId = userManager.CreateUserLogin("test", "test", managerError)

        If userId = Nothing Then
            If managerError.ErrorType = userManager.ErrorType.UserExists Then
                Dim suggestedUserName = managerError.SuggestedUserName

                ' Do something with suggested user name
            End If
        End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:45:58.930

为此，我将遵循 Membership API 的功能。从您的业务组件返回一个枚举，视图可以使用它来检查响应。因此，您返回一个带有您提到的值的枚举到 ASP.NET 页面，并检查那里的类型。你可以做你正在做的事情，但据我所知，我认为没有必要；另外，抛出异常是昂贵的。

为了澄清我的意思是枚举是从业务组件的调用者返回它，而不是通过异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:56:08.870

（这个答案只是为了支持@BrianMains 建议使用返回码而不是异常。相关文档太大而无法放入评论中。）

从关于异常的 MSDN 文档：

> 抛出或处理异常时会占用大量系统资源和执行时间。抛出异常仅用于处理真正异常的情况，而不是处理可预测的事件或流控制。例如，如果方法参数无效，您的应用程序可以合理地抛出异常，因为您希望使用有效参数调用您的方法。无效的方法参数意味着发生了异常情况。相反，**如果用户输入无效，请不要抛出异常，**因为您可以预期用户偶尔会输入无效数据。在这种情况下，提供重试机制，以便用户可以输入有效输入。
> 
> 仅在特殊情况下抛出异常，然后**在适用于大多数应用程序的通用异常处理程序中捕获异常，而不是在适用于特定异常的处理程序中捕获异常**。这种方法的基本原理是大多数错误都可以通过靠近错误的验证和错误处理代码来处理。不需要抛出或捕获异常。通用异常处理程序捕获应用程序中任何地方抛出的真正意外的异常。
> 
> 另外，**当返回码足够时不要抛出异常**；不要将返回码转换为异常；并且不要例行捕获异常，忽略它，然后继续处理。

[http://msdn.microsoft.com/en-us/library/system.exception.aspx](http://msdn.microsoft.com/en-us/library/system.exception.aspx)

（突出我的）

# php - Magento 1.7.0.2 购物车在 PayPal 页面上取消付款时为空

> ID：14325745
> 
> 赞同：0
> 
> 时间：2013-01-14T20:01:29.707
> 
> 标签：php, magento, paypal, magento-1.7

我发现了一些技巧来解决这个问题，但它们都是针对较低版本的。很难相信 magento 没有解决这个问题，但是你永远不知道。

因此，如果有人知道在 PayPal 上按“取消并返回 XXXXX”时将物品保存在卡片中的有效技巧，我将不胜感激。

我使用 PayPal 网站支付标准和 Magento 1.7.0.2。

和平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:47:31.157

“问题”是，magento 的订单已完成，重定向到贝宝。由于取消，购物车未清空。它在重定向页面上被清空。

它发生在这里：

```
app/code/core/Mage/Checkout/controllers/OnepageController.php:240 
```

# php - 在 jTable Jquery 中添加静态列

> ID：14325748
> 
> 赞同：3
> 
> 时间：2013-01-14T20:01:44.000
> 
> 标签：php, jquery, jquery-jtable

我想为我的 jTable CRUD Jquery 中的每一行添加一个带有一些链接的静态列，按钮。我正在使用他们提供的代码，例如来自 jTable 网站

这是代码：

```
<script type="text/javascript">

    $(document).ready(function () {

        //Prepare jTable
        $('#PeopleTableContainer').jtable({
            title: 'Table of people',
            paging: true,
            pageSize: 5,
            sorting: true,
            defaultSorting: 'Name ASC',
            actions: {
                listAction: 'PersonActionsPagedSorted.php?action=list',
                createAction: 'PersonActionsPagedSorted.php?action=create',
                updateAction: 'PersonActionsPagedSorted.php?action=update',
                deleteAction: 'PersonActionsPagedSorted.php?action=delete'
            },
            fields: {
                PersonId: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                Name: {
                    title: 'Author Name',
                    width: '40%'
                },
                Age: {
                    title: 'Age',
                    width: '20%'
                },
                Watch: {
                    title: 'Watch',
                    width: '20%',
                    display: function (data) {
                    return '';
                },
                RecordDate: {
                    title: 'Record date',
                    width: '30%',
                    type: 'date',
                    create: false,
                    edit: false
                }
            }
        });

        //Load person list from server
        $('#PeopleTableContainer').jtable('load');

    });

</script> 
```

关注显示中的 Watch 字段：我想为每一行生成一些带有每行 id 的 href。我怎样才能拉出每一行的ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:52:58.300

这很容易。请参阅显示 ( [http://jtable.org/ApiReference#fopt-display](http://jtable.org/ApiReference#fopt-display) ) 选项。您可以定义这样一个字段：

```
TestColumn: {
    title: 'Test',
    display: function (data) {
        var $link = $('<a href="...">a link</a>');
        $link.click(function(){ /* do something on click */ });
        return $link;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T07:59:06.597

```
Link: {
    title: 'More Info',
    display: function (data) {
        return '<a href="@Url.Action("Index", "Demo")">More Info</a>';
    }
} 
```

# javascript - 使用 mod 环绕

> ID：14325750
> 
> 赞同：8
> 
> 时间：2013-01-14T20:01:45.957
> 
> 标签：javascript, jquery

假设数组的长度为 1000。我正在尝试创建一种简单的方法来遍历存储在数组中的图像路径而不会越界。下面的方法在单击“下一步”按钮以增加数组索引时使用模数很好地处理环绕，但当我必须从索引中减少并减去一个时（当用户单击上一个按钮时）。

基本上我想做的是：

```
998 -> click next -> 999
999 -> click next -> 0
0 -> click previous -> 999 
```

我的 Java 脚本

```
var index = 0;

$('.catalog-img-container').attr("src", javascript_array[index]);
$(".next").click(function(){
        $('.catalog-img-container').attr("src", javascript_array[++index%arrayLength]);
    });         
$(".previous").click(function(){
    $('.catalog-img-container').attr("src", javascript_array[--index]);
    alert(index); 
```

我感谢任何帮助

许多人提前感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T20:08:13.967

可能有一个更优雅的方法来解决这个问题，但这很简单：

```
$(".previous").click(function(){
    if (--index < 0) index = arrayLength - 1;
    $('.catalog-img-container').attr("src", javascript_array[index%arrayLength]);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T20:05:56.863

由于`--index%arrayLength`不起作用，只需在取模之前添加数组的长度：

```
index = (index+arrayLength-1) % arrayLength 
```

你也可以做

```
(index+=arrayLength-1)%arrayLength 
```

但这将导致`index`变得非常大，可能在足够长的时间内超出范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T20:18:54.520

您也可以使用方便的对象。

```
var Cursor = function (array) {
  var idx = 0;
  this.prev = function () {
    idx = (!!idx ? idx : array.length) - 1;
    return array[idx];
  };
  this.current = function () {
    return array[idx];
  };
  this.next = function () {
    idx = (idx + 1) % array.length;
    return array[idx];
  };
  return this;
}; 
```

例如，

```
var $container = $(".catalog-img-container");
var cursor = new Cursor(javascript_array);

$container.attr("src", cursor.current());

$(".next").click(function(){
  $container.attr("src", cursor.next());
});         

$(".previous").click(function(){
  $container.attr("src", cursor.prev());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T20:08:10.183

嗯，不确定这是否是您想要的，但是：

```
$(".previous").click(function(){if (index-1 <0){index = arrayLength -1;}

            $('.catalog-img-container').attr("src", javascript_array[--index]);
            //alert(index);
        }); 
```

我假设 arrayLength = javascript_array.length;

我希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T20:15:07.723

**[工作演示测试](http://jsbin.com/eqenag/1/edit)**

这就是你所需要的：

```
var index=0;

$('.catalog-img-container').attr("src", javascript_array[index]);

$(".next, .previous").click(function(){

  var MyClass = $(this).hasClass('next') ? index++ : index-- ;
  index = index==-1 ? arrayLength-1 : index%arrayLength ;  
  $('.catalog-img-container').attr("src", javascript_array[index]);

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-14T16:31:16.313

```
/**
* @param {number} counter
* @param {number} maxValue
* @return {number}
* @desc Always returns a number between 0 and maxValue. Can be used to 
iterate through an array without "Range out of bounds" error.
*/
export default function mapToRange(counter, maxValue) {
  if (maxValue === undefined || maxValue === 0) return 0;
  // positive counter
  if (counter >= 0) return counter % maxValue;
  // negative counter
  const modulo = counter % maxValue;
  if (modulo === 0) {
      return modulo;
  }
  return modulo + maxValue;
} 
```

我使用此函数将`counter`int 数映射到 0 和`maxValue`.

```
let counter = 0;
const array = ['apple', 'pear','peach'];
if(press arrow up) counter--;
else if (press arrow down) counter++;

let idx = mapInRange(counter, array.length)
console.log(array[idx]); 
```

想象一下，您有一个下拉列表，并且您想使用箭头键在列表中导航。

# c++ - 在 Mac OS 10.8.2 中编译 VXL，未找到 X11/Xlib.h

> ID：14325751
> 
> 赞同：1
> 
> 时间：2013-01-14T20:01:47.757
> 
> 标签：c++, cmake, x11, osx-mountain-lion

我正在尝试安装 VXL，当我输入“make -j1”时，我得到了这个

```
[ 10%] Building C object v3p/netlib/examples/CMakeFiles/netlib_showme.dir/showme.o
/Users/viviantung/downloads/vxl-1.17.0/v3p/netlib/examples/showme.c:106:10: fatal error: 
  'X11/Xlib.h' file not found
#include <X11/Xlib.h>
     ^
1 error generated.
make[2]: *** [v3p/netlib/examples/CMakeFiles/netlib_showme.dir/showme.o] Error 1
make[1]: *** [v3p/netlib/examples/CMakeFiles/netlib_showme.dir/all] Error 2
make: *** [all] Error 2 
```

我应该怎么办？我已经安装了 XQuartz。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:21:09.093

X11 头文件位于`/usr/X11R6/include`目录下。您需要做的是让编译器使用`-isystem /usr/X11R6/include`命令行选项在那里搜索。或者，如果您使用 CMake，请使用`include_directories("/usr/X11R6/include")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T04:52:31.737

1.  下载`vxl-1.14.0`
2.  创建一个名为 的文件夹`vxl`，将其中的内容提取`vxl-1.14.0.zip`出来，同时在文件夹下`vxl`创建一个名为的文件夹。`bin``vxl`
3.  确保您安装了`cmake`和`xquartz`.
4.  打开终端，在您创建的 bin 文件夹路径中 cd 并键入`ccmake /User/..../vxl/vxl-1.14.0` press`c`直到您可以按`g`生成。然后按`g`，然后按`q`退出。
5.  在 bin 文件夹下键入`make -j2 -k`

希望你能成功构建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T07:59:09.700

如果所有其他方法都失败了，解决此问题的蛮力方法是在您的环境中定义 CXXFLAGS 或 CFLAGS。

添加

```
export CFLAGS="-I/opt/X11/include" 
```

或者

```
export CXXFLAGS="-I/opt/X11/include" 
```

取决于 c 或 c++ 编译器到您的 ~/.bashrc 或 ~/.bash_profile 然后重新运行。

# python - matplotlib 时间与日期

> ID：14325752
> 
> 赞同：0
> 
> 时间：2013-01-14T20:01:56.960
> 
> 标签：python, matplotlib

我正在使用 psycopg2 从数据库中提取数据以获取记录失败的日期和时间。我想将时间绘制在 y 轴上，日期在 x 轴上。点图似乎是理想的选择。

这是我获取数据的代码的一部分，并在其上使用 zip 来制作我想要绘制的两个对象，

```
 cur.execute("SELECT date, time FROM querytimes where server = (%s) AND date > CURRENT_DATE - (%s) AND fail = 'Yes'", (server,days,))

    # retrieve the whole result set
    data = cur.fetchall()
    # close connection
    cur.close()
    conn.close()
    # Test
    date, time = zip(*data) 
```

这些是生成的“日期”和时间对象，

> (datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013 , 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 10), datetime.date(2013, 1, 11), datetime.date(2013, 1, 12), datetime .date(2013, 1, 12), datetime.date(2013, 1, 13))
> 
> (datetime.time(15, 25, 3), datetime.time(15, 26, 3), datetime.time(15, 27, 4), datetime.time(15, 28, 3), datetime.time(15 , 29, 3), datetime.time(15, 30, 4), datetime.time(15, 31, 3), datetime.time(15, 32, 4), datetime.time(15, 33, 3), datetime.time(15, 34, 3), datetime.time(15, 35, 3), datetime.time(15, 36, 3), datetime.time(15, 37, 3), datetime.time(15, 38, 3), datetime.time(15, 39, 3), datetime.time(15, 40, 3), datetime.time(0, 20, 4), datetime.time(6, 19, 3), datetime .time(10, 50, 3), datetime.time(2, 19, 3))

我在绘制此图时遇到问题。据我了解，这些需要在 matplotlib 之前先转换为浮点数才能理解数据？

尝试使用 date2num 并且适用于“日期”对象，但不确定如何为“时间”对象执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:23:52.327

您可以使用[Pandas](http://pandas.pydata.org/)轻松实现这一点。

```
import pandas as pd
ts = pd.Series(times, index=dates)
ts.plot(rot=30, style='x-') 
```

得到类似的东西

![按日期的时间](../Images/6487e18764a27ce61aba04367b07d3a6.png)

## 替代方法：日期时间作为索引

将 datetime 对象作为索引，而不仅仅是 date 对象有时可以提供更大的灵活性，所以我个人会以这种方式表示这种数据。您可以通过首先组合您的日期和时间对象来做到这一点

```
datetimes = []
for date, time in zip(dates, times):
    datetimes.append(datetime.datetime.combine(date, time)) 
```

建立你的时间序列

```
ts = pd.Series(1, index=datetimes) 
```

（1表示当时有一次失败）

现在，您可以在此类数据上创建另一个有用的视图，使您能够查看每天的数量。

```
ts.groupby(lambda x : x.date()).sum().plot(rot=30, style='x-', kind='bar') 
```

![每天数量](../Images/30cca9b817ab00e8b6c39c2b7f0d778b.png)

# c# - C# 访问磁盘驱动器作为 UNC 路径 (Windows 8)

> ID：14325754
> 
> 赞同：2
> 
> 时间：2013-01-14T20:02:08.317
> 
> 标签：c#, winapi, windows-8, createfile

我有一个正在尝试使用的功能。我的意图是能够获得一个文件句柄 (IntPtr) 对象，以便我可以针对它调用“Win32.DeviceIoControl”。它在 Windows 7 中工作得很好，但是当我在 Windows 8 上测试时，我得到一个从对象变量返回的 -1。

也许在 Windows 8 中有不同的方法可以做到这一点？或者一个更好的方法来做这件事。

这是代码：

```
 public bool OpenHandle()
    {
        string filename = "\\\\.\\D:";

        hFile = Win32.CreateFile(filename, Win32.GENERIC_READ | Win32.GENERIC_WRITE,
            Win32.FILE_SHARE_READ | Win32.FILE_SHARE_WRITE, IntPtr.Zero, Win32.OPEN_EXISTING, 0, IntPtr.Zero);

        if (hFile.ToInt32() == Win32.INVALID_HANDLE)
        {
            return false;
        }
        return true;
    } 
```

此代码取自[https://stackoverflow.com/a/9579881/1607306](https://stackoverflow.com/a/9579881/1607306)，我只是想利用它。同样，在 Win7 中工作，而不是 Win8。

谢谢！

# ios - UITableView“滑动删除”按钮框架问题

> ID：14325758
> 
> 赞同：2
> 
> 时间：2013-01-14T20:02:19.693
> 
> 标签：ios, uitableview, frame, layoutsubviews

我`UITableViewCell`在我的应用程序中使用自定义，我正在尝试调整“滑动删除”按钮的框架。

这就是我正在做的事情：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) return;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.0f];
    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) {
            CGRect newFrame = subview.frame;
            newFrame.origin.x = newFrame.origin.x - 25;
            subview.frame = newFrame;
        } else if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {
            CGRect newFrame = subview.frame;
            newFrame.origin.x = newFrame.origin.x - 25;
            subview.frame = newFrame;
        }
    }
} 
```

它出现在新的位置，这很棒。但是，当我单击按钮使其消失时，按钮似乎突然向左移动了大约 10 个点，然后被移除。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:59:12.337

我不熟悉您正在使用的动画代码，但我会尝试使用[`willTransitionToState`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW27)（并且，如果需要，[`didTransitionToState`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW21)）而不是`layoutSubviews`在编辑 tableViewCells 期间处理动画。

自 iOS 3.0 起，两者都可用。

将此代码放在您的子类中`UITableViewCell`。它将处理从一个[`UITableViewCellStateMask`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW78)到另一个的所有转换，并且您可以实现转换到每个状态所需的动画。只需根据我添加的 NSLog 在适当的位置实现您需要的动画即可。（同样，不熟悉您的动画代码，但我确实对其进行了测试并使用此代码看到了结果）

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {

    [super willTransitionToState:state];

    if (state == UITableViewCellStateDefaultMask) {

        NSLog(@"Default");
        // When the cell returns to normal (not editing)
        // Do something...

    } else if ((state & UITableViewCellStateShowingEditControlMask) && (state & UITableViewCellStateShowingDeleteConfirmationMask)) {

        NSLog(@"Edit Control + Delete Button");
        // When the cell goes from Showing-the-Edit-Control (-) to Showing-the-Edit-Control (-) AND the Delete Button [Delete]
        // !!! It's important to have this BEFORE just showing the Edit Control because the edit control applies to both cases.!!!
        // Do something...

    } else if (state & UITableViewCellStateShowingEditControlMask) {

        NSLog(@"Edit Control Only");
        // When the cell goes into edit mode and Shows-the-Edit-Control (-)
        // Do something...

    } else if (state == UITableViewCellStateShowingDeleteConfirmationMask) {

        NSLog(@"Swipe to Delete [Delete] button only");
        // When the user swipes a row to delete without using the edit button.
        // Do something...
    }
} 
```

如果您需要在这些事件之一之后发生某些事情，只需实现相同的代码，但在`didTransitionToState`. 同样`UITableViewCellStateMask`适用。

# java - 在函数内部更改 Java 中的对象

> ID：14325759
> 
> 赞同：0
> 
> 时间：2013-01-14T20:02:23.150
> 
> 标签：java, mergesort

我尝试使用添加的代码为列表实现合并排序。我遇到的问题，我不知道是什么原因造成的：如果我直接调用recursiveMergeSort，我会得到正确的排序列表，但是如果我尝试通过调用mergeSort对列表进行排序，我只会得到第一个列表元素。

IE 如果主要我有一个列表 = "d","a","f","g","b" 那么

```
list = recursiveMergeSort(list) // list will be "a","b","d","f","g"
mergeSort(list) // list will be "a" 
```

我需要做什么才能让 mergSort 给出与 recursiveMergeSort 相同的结果？（公共 void 函数在 API 中提供给我，这就是我创建私有递归函数的原因）

```
public static void mergeSort(List list) {
if (list == null) throw new NullPointerException("list");
    list = recursiveMergeSort(list);
    /* If I check list here, I get the correct result,
    only in the original it's wrong */
}
/** a recursive function for the merge sort  */
private static List recursiveMergeSort(List list) {

    int length = listLength(list);
    System.out.println(length);
    if (length <= 1) { // base case, list length 1
        return list;
    }

    // create sublists
    List left = new List(), right = new List();
    List.Node indexList = list.head;
    left.head = list.head;
    for (int i = 0; i < length / 2 - 1; i++ ) {
        indexList = indexList.getNext();
    }
    right.head = indexList.getNext();
    indexList.setNext(null);

    left = recursiveMergeSort(left); // recursively work on them
    right = recursiveMergeSort(right);
    List tempList = mergeLists(left, right); // final result
    return tempList;
} 
```

（合并列表只是将两个有序列表合并为一个有序列表。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:05:53.340

`list`是一个引用变量，引用一个 List 值。

您不能仅通过更改引用它的变量的值来更改引用的值。

将您的初始功能更改为：

```
public static List mergeSort(List list) {
if (list == null) throw new NullPointerException("list");
    return recursiveMergeSort(list);
} 
```

您返回的值将是排序列表。

如果您确实需要更改参数，请尝试：

```
public static void mergeSort(List list) {
if (list == null) throw new NullPointerException("list");
    List temp = recursiveMergeSort(list);
    list.clear();
    list.addAll(temp);
} 
```

您可以通过调用对象的方法或更改其中字段的值来更改对象，无论是对象本身还是对象的组件。 `indexList`in your`recursiveMergeSort`是起始列表中节点的另一个参考，您正在使用`setNext(null)`

# encoding - 在 Orbeon 上保存表单时编码错误

> ID：14325761
> 
> 赞同：0
> 
> 时间：2013-01-14T20:02:31.047
> 
> 标签：encoding, orbeon, processor

我为 SQL Server 创建了自己的持久性，并且 CRUD 工作正常，但是我在编码时遇到了一些问题，我认为，当我要保存某些东西时，我会像这样从 XForms 收到 xml 文本

```
?xml version="1.0" encoding="UTF-8"?xhtml:html xmlns:xhtml="http://www.w3 ...............

metadata                    
application-name w4/application-name                     
form-name usuario/form-name                     
title xml:lang="en"Cadastro/title                     
description xml:lang="en"UsuÃƒÂ¡rio/description              ---------PROBLEM!!!       

metadata             
xforms:instance.................... 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:57:41.057

通常，您需要确保在解码 XML 时正确处理字符编码。具体如何做到这一点取决于您使用的编程语言或框架，但您应该：

*   如果可能的话，使用 XML 解析器并只提供字节（解析器将自行处理编码）
*   在将字节转换为字符时，永远不要假设默认或平台编码（特别是 Java 有许多 API，由于非常错误的原因，这些 API 使用依赖于平台的默认编码）

# javascript - 自动滚动（启用 css 的溢出-y）效果的一个小难题

> ID：14325767
> 
> 赞同：0
> 
> 时间：2013-01-14T20:02:57.207
> 
> 标签：javascript, html, css, overflow

有两个div

```
<div style="height:150px; overflow:hidden; overflow-y:hidden;">
    <div style="margin:5px; margin-right:25px;" onmouseover="this.style.width=(this.parentNode.offsetWidth-30)+\'px\'; this.parentNode.style.overflowY=\'auto\';" onmouseout="this.style.width=\'\'; this.parentNode.style.overflowY=\'hidden\';">';
    123<br>
    123<br>
    123<br>
    123<br>
    123<br>
    123<br>
    </div>
 </div> 
```

当鼠标悬停时，会出现垂直滚动条（当鼠标悬停时 - 消失）。问题是，这种设计现在不起作用，因为滚动条在我到达滚动条之前就消失了。是否有可能使我可以用鼠标单击滚动条并向上/向下移动滚动条的滑块？

**重要的是，这个任务应该在没有任何 id 的情况下解决。只有“this.parentNode”和“this”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:37:48.143

问题在于，在 mouseover 事件中，您将内部 div 的宽度减小了父级 offsetWidth - 30。这意味着 mouseout 事件将始终在您到达滚动条之前触发。您提到该任务应该在不使用 ID 的情况下解决，但这可以通过使用类和 :hover 伪类的 CSS 轻松解决。

首先删除内联样式，并附加一个 CSS 类

```
<div class="scrollable-on-hover">
    <div> ... 
```

CSS：

```
.scrollable-on-hover {
  height: 150px;
  overflow: hidden;
}

.scrollable-on-hover:hover {
  overflow-y: auto;
} 
```

CSS 修复：http: [//jsfiddle.net/NaKKk/1/](http://jsfiddle.net/NaKKk/1/)

如果您被迫仅使用内联 javascript 来解决此问题，您应该可以使用它来解决此问题；

```
<div style="height: 150px; overflow: hidden;" onmouseover="this.style.overflowY = 'auto';" onmouseout="this.style.overflowY = 'hidden';">
    <div> ... 
```

JS 修复：http: [//jsfiddle.net/NaKKk/2/](http://jsfiddle.net/NaKKk/2/)

在 javascript 示例中，您会注意到我在父元素而不是子元素上附加了 mouseover 和 mouseout 事件。我可以这样做，因为这些事件会从子元素和它的祖先树中冒出来。这是对事件冒泡的简单参考：[http ://www.javascripter.net/faq/eventbubbling.htm](http://www.javascripter.net/faq/eventbubbling.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:31:00.067

如果使用 'firstChild' 则工作正常 =)

```
<div style="height:150px; overflow:hidden; overflow-y:hidden;" onmouseover="this.firstChild.style.width=(this.offsetWidth-30)+'px'; this.style.overflowY='auto';" onmouseout="this.firstChild.style.width=''; this.style.overflowY='hidden';">
<div style="margin:5px; margin-right:25px;">';
123<br>
123<br>
123<br>
123<br>
123<br>
123<br>
</div> 
```

# coldfusion - 尝试清除受信任缓存时出现 ColdFusion Access Manager 错误

> ID：14325770
> 
> 赞同：2
> 
> 时间：2013-01-14T20:03:09.013
> 
> 标签：coldfusion, coldfusion-9

```
<cfscript>

if (isDefined("url.clearTrustedCache")) {
    clearTrustedCache();
}

function clearTrustedCache() {

    adminObj = createObject("component","cfide.adminapi.administrator");
    adminObj.login("admin");

    runtimeObj = createObject("component","cfide.adminapi.runtime");
    runtimeObj.clearTrustedCache();
}

</cfscript> 
```

我正在尝试使用上面的代码通过 URL 参数清除受信任的缓存。我收到以下错误消息：

```
The current user is not authorized to invoke this method 
```

我在网上找到的唯一尝试是[http://helpx.adobe.com/coldfusion/kb/error-current-user-authorized-invoke.html](http://helpx.adobe.com/coldfusion/kb/error-current-user-authorized-invoke.html)但它不起作用（除非我做错了）。

关于如何解决这个问题的任何想法或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:13:52.623

解决方案是在登录时使用密码，因为在 Coldfusion Admin 中设置为需要密码。如果 Coldfusion 管理员不需要密码（我不建议这样做，那么可能不需要密码。

例子：

`adminObj.login("passwordHere","loginHere");`

# python - 如何更改标记边框宽度和影线宽度？

> ID：14325773
> 
> 赞同：52
> 
> 时间：2013-01-14T20:03:16.520
> 
> 标签：python, matplotlib

在这个散点图中的标记示例中，我将颜色设置为绿色，将边缘颜色设置为黑色，并将阴影设置为“|”。为了让填充图案完全显示出来，我必须设置边缘颜色，但是当我这样做时，我会在标记周围得到一个非常厚的边框。两个问题：

1）我怎样才能设置这个边框的大小（最好是0）？

2）如何增加阴影线的厚度？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-15T01:02:05.473

1.  您只需要设置`linewidth`来控制标记边框的粗细。
2.  您可以通过重复符号来增加阴影的密度（在下面的示例中，`'|'`在 R/H 窗格中重复；请注意，要获得 NW->SE 对角线，符号必须被转义，因此需要两倍的字符才能真正加倍——`'\\\\'`密度为 2，`'||||'`密度为 4）。但是，我不认为孵化中各条线的粗细是可控的。

请参阅下面的代码示例以生成如下散点图： ![孵化控制示例](../Images/ea58f9edb4efb28c2ea644bb61c30cd5.png)

```
import matplotlib.pyplot as plt
# generate some data
x = [1,2,3,4,5,8]
y= [i**2 for i in x]
y2= [60-i**2+3*i for i in x]

# plot markers with thick borders
plt.subplot(121)
plt.scatter(x,y, s=500, marker='s', edgecolor='black', linewidth=3, facecolor='green', hatch='|')
# compare with no borders, and denser hatch.
plt.subplot(122)
plt.scatter(x,y2, s=500, marker='s', edgecolor='black', linewidth=0, facecolor='green', hatch='||||')

plt.show() 
```

matplotlib 关于[collections](http://matplotlib.org/api/collections_api.html?highlight=hatch#matplotlib.collections.Collection.set_hatch) 和[scatter](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.scatter)的文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-05T10:56:59.393

这是您提出问题几年后的事，但我发现这样做的唯一方法是更改​​ matplotlib.rc。

您可以在实际的 .rc 文件中或在您的 python 脚本中执行此操作，例如

`import matplotlib as mpl`

`mpl.rc('hatch', color='k', linewidth=1.5)`

这将使脚本中的所有阴影线变为黑色，厚度为 1.5，而不是默认的 1.0。

# javascript - 在 TypeScript 中使用 Datejs

> ID：14325774
> 
> 赞同：1
> 
> 时间：2013-01-14T20:03:18.157
> 
> 标签：javascript, typescript

你会如何告诉 TypeScript 使用 Datejs`Date`而不是内置`Date`对象？

我尝试添加对 js 文件的引用并将 Date 声明为`any`ie类型`declare var Date: any;`，但这并没有解决错误。

**编辑：** 我发现[了这个](https://stackoverflow.com/questions/12701732/typescript-augmenting-built-in-types)问题，但它谈到了指定要包含的方法。我想知道是否可以让它保持开放式并简单地关闭 Date 的类型检查；

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T22:46:24.170

为了让您开始延长原生日期，它看起来像这样：

```
interface DateIs {
    monday(): bool;
    // ctd...
    january(): bool;
    // ctd...
    weekday(): bool;
}

interface DateAdd {
    days(): Date;
    months(): Date;
    // ctd...
}

interface Date {
    parse(date: string): Date;
    today(): Date;
    next(): Date;
    last(): Date;
    monday(): Date;
    // ctd...
    january(): Date;
    // ctd...
    addDays(days: number): Date;
    addMonths(months: number): Date;
    add(quantity: number): DateAdd;
    is(): DateIs;
} 
```

有了这个例子，你可以继续添加你使用的函数，我以一个月为例，所以你可以填写 february() 以及你认为合适的短 jan() 变体！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T22:07:59.240

没有办法使用类型（`Date`在这种情况下）将现有变量转换为`any`.

最好的选择是`Date`使用 datejs 的新方法扩展接口。希望在某个时候有人会这样做并将其上传到[DefinedTyped](https://github.com/borisyankov/DefinitelyTyped)。

您可以采取两种解决方法：

```
var Date2 = <any>Date;
// Use Date2 anywhere you would use Date 
```

另一种解决方法是仅修改`lib.d.ts`为声明`Date`为`any`. 显然，这会在任何地方产生副作用，但会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T14:03:40.510

从 nuget 安装包 'datejs.typescript.definitelytyped'

[http://www.nuget.org/packages/datejs.TypeScript.DefinitelyTyped/](http://www.nuget.org/packages/datejs.TypeScript.DefinitelyTyped/)

添加对类型文件的引用。在全局脚本文件中声明一个全局变量，或者在一个类中声明一个私有静态成员变量或只是一个局部变量，分配如下面的代码所示。

```
/// <reference path="typings/datejs/datejs.d.ts" />
var DateJs: IDateJSStatic = <any>Date; 
```

我目前正在编写 SPA 应用程序，因此我使用了代码示例中所示的全局变量。

# c++ - Windows 与 Linux 上的 C++ - 常见问题？

> ID：14325776
> 
> 赞同：1
> 
> 时间：2013-01-14T20:03:24.260
> 
> 标签：c++, linux, windows

到目前为止，我在 C++ 中的所有开发都针对 Windows，但是我一直在想，有一天我会以 Linux 为目标。因此，我知道需要选择跨平台库，并尽可能保持我的代码可移植（或为不可移植的代码提供替代实现）。因此，这个问题与代码编译问题无关。

我想知道，开发人员在同时针对 Linux 和 Windows 时会面临哪些常见问题？特别是但不限于：

1.  处理配置文件的最佳实践。在 Windows 上，这似乎是相当随意的——我见过软件将它们的配置存储在程序文件夹、用户文件夹（在 appData 下）和注册表中。在 Linux 上，它似乎更倾向于专用配置文件夹 (/etc)。我应该如何处理我的代码中的这些差异？我是对位置进行硬编码，还是可以参考一些系统定义的功能？

2.  与 (1) 相同，但用于记录。

3.  如何让我的项目文件保持同步？例如，如果我更新 Visual Studio 项目文件中的某些内容，我通常是否需要在我正在工作的任何 Linux 环境中手动更新等效的内容，或者是否有避免这种情况的常用方法？

4.  在我的代码中处理平台实现差异的最佳方法是什么？我应该使用`#ifdef`s，还是应该将特定于平台的代码保存在单独的文件中，并让项目指定包含哪些文件？

5.  还有什么我没有想到我应该开始考虑/研究的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:08:09.580

您可以使用 s 完成艰苦的工作，`#ifdef`也可以使用跨平台库，例如 Qt，它几乎可以解决您的所有问题。

5 - 你也应该注意行尾、文件编码和路径分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:07:55.793

对于 1 和 2，我认为最好的方法是将日志和配置文件存储在程序文件夹或另一个相对位置，并以这种方式使它们可移植。

5\. - 初始化也可能是一个问题。未初始化的变量可能会出现。

# android - 绘制心形安卓画布

> ID：14325779
> 
> 赞同：0
> 
> 时间：2013-01-14T20:03:34.177
> 
> 标签：android, graphics, bitmap, android-canvas, draw

嗨，我想绘制心形我知道如何使用 drawCircle() 和其他一些画布类，但是如何绘制心形

我有一个创建心形的方程式

```
   极坐标 r = (sin(t)*sqrt(abs(cos(t))))/(sin(t) + 7/5) -2*sin(t) + 2
```

这是链接[心形](http://www.wolframalpha.com/input/?i=polar%20r=%28sin%28t%29%2asqrt%28abs%28cos%28t%29%29%29%29/%28sin%28t%29%20%2b%207/5%29%20-2%2asin%28t%29%20%2b%202)，你可以更了解我想要什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:12:22.320

Canvas.drawCircle 只知道如何绘制圆而不是“参数曲线”。我建议您先在数学书中查找，以便在尝试为其编写代码之前了解正在发生的事情。

# r - 导入另一个需要的包但不依赖时的R包安装

> ID：14325781
> 
> 赞同：1
> 
> 时间：2013-01-14T20:03:41.493
> 
> 标签：r, package

当我编写 R 包时，我列出了几个包`Import`而不是`Depend`.

我的问题是，当人们从源代码 ie 安装我的包时`install.packages('pkgNmae', repo=NULL, type="source")`，**他们的计算机没有预先安装我导入的必要包**，该命令会`install.packages`识别这一点吗？安装后用户可以使用我的包吗？

我不确定我是否列出了这些软件包，`Import`如果需要，它们会自动安装。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:43:56.613

是的，如果需要，它们会自动安装。导入和依赖在安装时是相同的——它们只是在包加载时的行为上有所不同。

# css - 悬停子菜单在 ie 中不起作用

> ID：14325785
> 
> 赞同：0
> 
> 时间：2013-01-14T20:03:55.583
> 
> 标签：css, internet-explorer, submenu

我对 css 完全陌生，但我冒险使用 wordpress 主题创建一个网站。该主题应该与 IE 兼容，但在 IE7、8 或 9 中，我的悬停子菜单不可点击。也就是说，我创建了 style-IE*.css 文件并指向它们。我增加了索引#。但它仍然无法正常工作。这里是网站：[www.mariasherranz.com](http://www.mariasherranz.com)

这是菜单脚本（从主题罐头，有一些颜色和字体更改）：

```
.navigation {
text-transform: uppercase;
position: fixed;
z-index: 10;
display: none;
}

.navigation ul.menu li a {
    font: 26px 'Marvel', sans-serif;
    color: #FFFFFF;
    line-height: 35px;
    text-decoration: none;
    padding: 0px 10px 0px 10px;
    margin-bottom: 5px;
    background: none;
    float: left;
    clear: both;
}

.navigation ul.menu li ul {
    float: left;
    display: none;
}

    .navigation ul.menu li ul li {
        margin: 0px 0px 0px 1px;
        float: left;
    }

        .navigation ul.menu li ul li a {
            font-size: 24px;
            color: #FFFFFF;
            background:none;
        }

            .navigation ul.menu li ul li a:hover {
                color: #000000;
                background:#FFFFFF;
            }

        .navigation ul.menu li ul li ul {
            margin: 36px 0px 0px 0px;
            position: absolute;
            z-index: 20;
            display: none;
        }

            .navigation ul.menu li ul li ul li {
                margin: 0px;
                white-space: nowrap;
                float: right;
            }

                .navigation ul.menu li ul li ul li a {
                    margin: 0px 0px 1px 0px;
                }

                .navigation ul.menu li ul li ul li ul {
                    display: none !important;
                } 
```

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:45:41.750

我的网站与 IE 做的事情非常相似。这是一个垂直的子菜单而不是水平的，但是在 IE 中，如果您将鼠标悬停在顶部菜单上，则会出现子菜单，但是您必须以闪电般的速度移动鼠标以突出显示链接，否则菜单会消失。您应该重点关注的一件事（我查看了您的网站）是：

.css 文件中的 padding-left 用于 (.navigation ul.menu li a )

值得注意的是，在我看来，您的主题也有一个 style-IE9.css 文件，它可能会覆盖一些 style.css 属性。

当我在 IE9 上使用开发工具时（有史以来第一次），当我在 (.navigation ul.menu li a) 下的 IE9.css 文件中将 padding-left 更改为 0px 时，我可以看到问题部分解决了。部分说，因为关于（生物和简历）的子菜单标题被“挤压”到非常接近顶部菜单。

# r - R 2.15.2 源错误 - 意外'}' - 尝试提交作业项目

> ID：14325787
> 
> 赞同：-3
> 
> 时间：2013-01-14T20:03:58.247
> 
> 标签：r

我目前在 Coursera 上做 R 类，任务要求编写一个特定的函数，将代码保存到一个名为 getmonitor.R 的文件并运行测试脚本来评估结果。

我能够编写该函数，并且它似乎在输入/输出方面按照预期执行。但是当我试图执行测试脚本时。我收到以下错误消息：

```
Error in source("getmonitor.R", local = TRUE) : 
  getmonitor.R:11:1: unexpected '}'
10: }
11: }
   ^
In addition: Warning messages:
1: In grepl("\n", lines, fixed = TRUE) :
  input string 19 is invalid in this locale
2: In grepl("\n", lines, fixed = TRUE) :
  input string 20 is invalid in this locale 
```

我尝试在 coursera 社区上提问，但无法得到答案，我也无法真正发布我的代码。我希望我能在这里找到一些帮助。下面我将提供重现的步骤。

需要创建的函数定义如下：“编写一个名为‘getmonitor’的函数，它接受三个参数：‘id’、‘directory’和‘summarize’。给定一个监视器 ID 号，‘getmonitor’读取该监视器的微粒从“directory”参数中指定的目录中获取数据并返回包含该监视器数据的数据帧。如果“summarize = TRUE”，则“getmonitor”使用“summary”函数生成数据帧的摘要并将其打印到控制台。”

这是我的解决方案：

```
> getmonitor <- function(id, directory, summarize = FALSE) {
+ filename <- paste("/Users/siarhei/desktop/",directory,"/",sprintf("%03s", as.character(id)),".csv", sep="")
+ data <- read.csv(filename)
+ if (summarize == TRUE) {
+ print(summary(data))
+ }
+ } 
```

如果我运行 getmonitor(1,'specdata',TRUE)，我会得到预期的输出。

`save(getmonitor, file="getmonitor.R")`然后根据课程说明运行命令将文件保存到我的 wd。之后我运行测试脚本，即：

```
source("http://spark-public.s3.amazonaws.com/compdata/scripts/getmonitor-test.R")
getmonitor.testscript() 
```

这里应该发生的是 R 会生成 2 个输出文件，我可以在线提交。然而，到目前为止我所能得到的只是上面的一个错误。由于该功能正常工作，因此似乎只是读取文件时出现了一些错误，但我无法弄清楚。

非常感谢这里的任何提示。如果有任何机会上网在聊天或环聊中解决这个问题，我会非常酷和乐于助人！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:10:22.777

`source`是用于读取由 . 编写的对象的错误函数`save`。中的第一段`?save`说：

> ...可以在以后使用函数“加载”（或在某些情况下为“数据”）从文件中读回对象。

# html - CSS 边距不起作用。为什么？

> ID：14325788
> 
> 赞同：0
> 
> 时间：2013-01-14T20:04:02.143
> 
> 标签：html, css, margin

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#a
{
    background:#33F;
    width:1000px;
    height:1000px;
}

#b
{
    width:500px;
    height:500px;
    background:#F00;
}

#c
{
    margin-top:50px;
    height:200px;
    width:200px;
    background:#FF0;
}
</style>
</head>

<body>

<div id="a">
    <div id="b">
        <div id="c">
        </div>
    </div>
</div>
</body>
</html> 
```

为什么 div#c 会从浏览器顶部边缘化，而不是远离 div#b。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:05:18.447

[CSS 有一个叫做边距折叠的概念](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。

> 两个边距相邻当且仅当：
> 
> ...
> 
> *   两者都属于垂直相邻的框边，即形成以下对之一：
>     *   一个盒子的上边距和它的第一个流入孩子的上边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:10:42.520

您可以添加`position: relative;`到 #b 元素和`position: absolute;`#c 元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:12:35.643

你错误地理解了这一点。它正在做你想做的事——当 div 有内容时。

我已经插入了不间断的空格来实现你想要的。

[http://jsbin.com/ifofix/2/](http://jsbin.com/ifofix/2/)

下面是其他小伙伴的建议

[http://jsbin.com/ifofix/3/](http://jsbin.com/ifofix/3/)

# share - 共享链接不会发布图片

> ID：14325790
> 
> 赞同：0
> 
> 时间：2013-01-14T20:04:14.537
> 
> 标签：share, facebook-opengraph

当有人分享我们网站的 URL 时，不会显示图像。[在https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)使用调试器并输入[http://www.muscleandfitness.com/videos/training/workout-101-overhead-pullover-video](http://www.muscleandfitness.com/videos/training/workout-101-overhead-pullover-video)的 URL表明元标记是正确的并显示图像。

但是，在 Facebook.com 上分享此链接并没有显示图像。

使用 Firebug 我可以看到图像抓取器仅返回 1x1 像素。 [https://www.facebook.com/ajax/composerx/attachment/link/scraper/?scrape_url=http%253A%252F%252Fwww.muscleandfitness.com%252Fvideos%252Ftraining%252Fworkout-101-overhead-pullover-video&composerurihash=2](https://www.facebook.com/ajax/composerx/attachment/link/scraper/?scrape_url=http%253A%252F%252Fwww.muscleandfitness.com%252Fvideos%252Ftraining%252Fworkout-101-overhead-pullover-video&composerurihash=2) composerurihash 2 scrape_url http%3A%2F%2Fwww.muscleandfitness.com%2Fvideos%2Ftraining%2Fworkout-101-overhead-pullover-video 安全图像返回 1x1 像素：[https ://fbexternal-a.akamaihd.net/safe_image.php ?d=AQBBILbPW7Po7Cds&url=http%3A%2F%2Fwww.muscleandfitness.com%2Fsites%2Fmuscleandfitness.com%2Ffiles%2FOverhead-Pullover_rotator_0.jpg](https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBBILbPW7Po7Cds&url=http%3A%2F%2Fwww.muscleandfitness.com%2Fsites%2Fmuscleandfitness.com%2Ffiles%2FOverhead-Pullover_rotator_0.jpg)

我需要帮助来解决这个问题，以便我们可以轻松地与图像共享 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:43:25.100

发现在 URL 上添加尾部斜杠可以使其工作。如果链接出现在某些单词之后，它似乎也能更好地工作。

示例：不起作用： http: [//www.muscleandfitness.com/news-and-features/features/everything-arnold-february-mf](http://www.muscleandfitness.com/news-and-features/features/everything-arnold-february-mf) 但这有效： http: [//www.muscleandfitness.com/news-and-功能/功能/一切-阿诺德-二月-mf/](http://www.muscleandfitness.com/news-and-features/features/everything-arnold-february-mf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T07:08:54.047

我也遇到了类似的问题。我的问题是因为图像名称中有一个“空格”。所以它不会出现在[facebook 调试器](https://developers.facebook.com/tools/debug)和共享中。

所以我通过编码部分用连字符（“-”）替换空格来解决这个问题。之后我在[facebook 调试器](https://developers.facebook.com/tools/debug)中调试 url ，它出现了。这意味着 Facebook 不会显示带有“空格”的图像名称。但这背后没有合乎逻辑的原因。无论如何，它会帮助某人。

有关更多信息，请查看[Patrick D'appollonio](https://stackoverflow.com/users/1012139/patrick-dappollonio)发布的此[答案](https://stackoverflow.com/a/25216164/3049065)。它帮助到我。

# javascript - Object.prototype.toString.call(null) 什么时候返回[object Object]？

> ID：14325792
> 
> 赞同：2
> 
> 时间：2013-01-14T20:04:22.927
> 
> 标签：javascript, internet-explorer, object, object-type

我正在使用 Object.prototype.toString.call 来识别变量类型。我期望以下行为：

```
Object.prototype.toString.call({}) => [object Object]
Object.prototype.toString.call([]) => [object Array]
Object.prototype.toString.call(undefined) => [object Undefined]
Object.prototype.toString.call(null) => [object Null] 
```

这通常可以正常工作，但我目前面临一种情况（在 Internet Explorer 中），两者都`Object.prototype.toString.call(undefined)`返回`Object.prototype.toString.call(null)`[object Object]，我不明白为什么。我试图在 jsfiddle.net 上复制它但不能，所以我假设我处于特定的怪癖模式。

我的问题：

*   这是一种已知的“行为”，什么时候发生？
*   有没有更可靠的方法来检查对象类型（我需要支持 IE7+）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:12:37.747

ECMAScript5 规范在[§15.2.4.2 中说明了 Object.prototype.toString 方法](http://es5.github.com/#x15.2.4.2)：

> 调用该`toString`方法时，将执行以下步骤：
> 
> 1.  如果 this 值为`undefined`，则返回`"[object Undefined]"`。
> 2.  如果 this 值为`null`，则返回`"[object Null]"`。
> 3.  令 O 为调用 ToObject 并将 this 值作为参数传递的结果。
> 4.  令 class 为 O 的 [[Class]] 内部属性的值。
> 5.  `"[object "`返回作为连接三个 String 、 class 和的结果的 String 值`"]"`。

您面临的问题是 IE7 和 8 遵循较旧的[ECMAScript3 标准](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf)，该标准在同一部分中指出

> 调用该`toString`方法时，将执行以下步骤：
> 
> 1.  获取此对象的 [[Class]] 属性。
> 2.  通过连接三个字符串`"[object "`Result(1) 和来计算字符串值`"]"`。
> 3.  返回结果（2）。

也就是说，在旧版本的 IE 中，该方法不会返回`[object Undefined]`，或者`[object Null]`除非它们是由名为`Undefined`or的函数构造的`Null`。

您可以使用以下方法更可靠地检查类型：

```
typeof x === "object"    // x is any sort of object
typeof x === "undefined" // x is undefined
x instanceof Array       // x is an array
x === null               // x is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:09:12.763

正如其他人所说，`null`是类型`Object`并表示*空对象引用*。

更可靠的检查值类型的方法是[`typeof`operator](http://www.w3resource.com/javascript/operators/typeof.php)。

据我所知，它从 IE 6 开始就被支持了。（或更早的，我没有检查过。）

# asp.net-mvc - Web API - 多种 POST 方法

> ID：14325794
> 
> 赞同：3
> 
> 时间：2013-01-14T20:04:35.053
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在编写一个简单的 Web api 应用程序。当我需要在我的 web api 控制器中有两个 POST 方法时，我进入了一个阶段。其中一种方法有效，另一种无效。我的路由表如下所示：

```
 config.Routes.MapHttpRoute(
            name: "ApiRouteWithAction",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

然后我的方法定义如下：

```
 [HttpPost]
    public bool PostTaskAgain(My3TasksWebAPI.Data.Task task)
    {
        var oldTask = _db.Task.Where(t => t.Id == task.Id).SingleOrDefault();

        oldTask.DoAgain = true;
        oldTask.DateUpdated = task.DateUpdated;

        if (_db.SetOfTasks.Where(t => CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(t.DateCreated, CalendarWeekRule.FirstFullWeek, DayOfWeek.Monday) == CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(DateTime.Now, CalendarWeekRule.FirstFullWeek, DayOfWeek.Monday)).Any())
        {
            int currentSetOfTasksId = _db.SetOfTasks.OrderBy(s => s.DateCreated).FirstOrDefault().Id;

            My3TasksWebAPI.Data.Task newTask = new Data.Task() { CreatedBy = oldTask.CreatedBy, DateCreated = oldTask.DateCreated, DateUpdated = null, DoAgain = false, Notes = string.Empty, SetOfTasksId = currentSetOfTasksId, Status = false, Title = oldTask.Title, UserId = oldTask.UserId };

            _db.Task.Add(newTask);
        }

        _db.SaveChanges();

        return true;
    }

    // Post api/values/PostSetOfTasks/{setOfTasks}
    [HttpPost]
    public bool PostSetOfTasks(My3TasksWebAPI.Data.SetOfTasks setOfTasks)
    {
        _db.SetOfTasks.Add(setOfTasks);

        _db.SaveChanges();

        return true;
    } 
```

当我尝试调用 PostTaskAgain 时，出现内部服务器错误。我认为它可能是路由表，但我不确定如何处理两种发布方法。我从我的 asp.net mvc 应用程序中调用 web api，如下所示：

```
HttpResponseMessage response = client.PostAsJsonAsync("api/values/PostSetOfTasks", model.SetOfTasks).Result; 
```

和

```
HttpResponseMessage response = client.PostAsJsonAsync("api/values/PostTaskAgain", taskToPost).Result; 
```

这意味着我包括行动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T18:41:49.250

在 webapi 中使用 POST 可能会很棘手，但很巧合的是，您的问题被证明是微不足道的。但是，对于那些可能偶然发现此页面的人：

我将特别关注 POST，因为处理 GET 是微不足道的。我不认为很多人会四处寻找解决 GET 与 webapis 的问题。无论如何..

如果您的问题是 - 在 MVC Web Api 中，如何 - 使用通用 HTTP 动词以外的自定义操作方法名称？- 执行多个帖子？- 发布多种简单类型？- 通过 jQuery 发布复杂类型？

那么以下解决方案可能会有所帮助：

首先，要在 Web API 中使用**自定义**操作方法，请添加一个 Web api 路由：

```
public static void Register(HttpConfiguration config)
{
            config.Routes.MapHttpRoute(
                name: "ActionApi",
                routeTemplate: "api/{controller}/{action}");
} 
```

他们可以创建动作方法，例如：

```
[HttpPost]
        public string TestMethod([FromBody]string value)
        {
            return "Hello from http post web api controller: " + value;
        } 
```

现在，从浏览器控制台触发以下 jQuery

```
$.ajax({
            type: 'POST',
            url: 'http://localhost:33649/api/TestApi/TestMethod',
            data: {'':'hello'},
            contentType: 'application/x-www-form-urlencoded',
            dataType: 'json',
success: function(data){ console.log(data) }
        }); 
```

其次，要执行多个post，很简单，创建多个action方法并用[HttpPost]属性装饰。使用 [ActionName("MyAction")] 来分配自定义名称等。下面第四点会来到jQuery

第三，首先，在单个操作中发布多个 SIMPLE 类型是不可能的，并且有一种特殊的格式来发布单个简单类型（除了以查询字符串或 REST 样式传递参数）。这就是让我与 Rest Clients 撞头并在网上搜寻近 5 个小时的原因，最终，以下 URL 帮助了我。仍然会引用链接的内容可能会死！

```
Content-Type: application/x-www-form-urlencoded
in the request header and add a = before the JSON statement:
={"Name":"Turbo Tina","Email":"na@Turbo.Tina"} 
```

[http://forums.asp.net/t/1883467.aspx?The+received+value+is+null+when+I+try+to+Post+to+my+Web+Api](http://forums.asp.net/t/1883467.aspx?The+received+value+is+null+when+I+try+to+Post+to+my+Web+Api)

不管怎样，让我们​​结束那个故事。继续：

第四，通过 jQuery 发布复杂类型，当然 $.ajax() 将立即发挥作用：

假设 action 方法接受一个 Person 对象，它有一个 id 和一个名字。所以，从javascript：

```
var person = { PersonId:1, Name:"James" }
$.ajax({
            type: 'POST',
            url: 'http://mydomain/api/TestApi/TestMethod',
            data: JSON.stringify(person),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function(data){ console.log(data) }
        }); 
```

动作将如下所示：

```
[HttpPost]
        public string TestMethod(Person person)
        {
            return "Hello from http post web api controller: " + person.Name;
        } 
```

以上所有，为我工作！干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:57:37.513

我的 LINQ 查询有问题。

```
The response from the server was: {"$id":"1","Message":"An error has occurred.","ExceptionMessage":"LINQ to Entities does not recognize the method 'Int32 GetWeekOfYear(System.DateTime, System.Globalization.CalendarWeekRule, System.DayOfWeek)' method, and this method cannot be translated into a store expression.","ExceptionType":"System.NotSupportedException","StackTrace":" at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.DefaultTransl‌​ator.Translate(ExpressionConverter parent, MethodCall.... 
```

更正 linq 查询后，一切正常。Visual Studio 对我执行错误的 linq 查询很好。

# python - Scipy 的 fftpack dct 和 idct

> ID：14325795
> 
> 赞同：4
> 
> 时间：2013-01-14T20:04:42.740
> 
> 标签：python, scipy, dct, fftpack

假设您使用 dct 函数，然后不处理数据并使用逆变换；反转后的数据与转换前的数据不一样吗？为什么会出现浮点问题？这是报告的问题还是正常行为？

```
In [21]: a = [1.2, 3.4, 5.1, 2.3, 4.5]

In [22]: b = dct(a)

In [23]: b
Out[23]: array([ 33\.        ,  -4.98384545,  -4.5       ,  -5.971707  ,   4.5       ])

In [24]: c = idct(b)

In [25]: c
Out[25]: array([ 12.,  34.,  51.,  23.,  45.]) 
```

任何人都有解释为什么？当然，一个简单的`c*10**-1`方法就可以了，但是如果你重复调用函数以在多个维度上使用它，错误会变得更大：

```
In [37]: a = np.random.rand(3,3,3)

In [38]: d = dct(dct(dct(a).transpose(0,2,1)).transpose(2,1,0)).transpose(2,1,0).transpose(0,2,1)

In [39]: e = idct(idct(idct(d).transpose(0,2,1)).transpose(2,1,0)).transpose(2,1,0).transpose(0,2,1)

In [40]: a
Out[40]: 
array([[[ 0.48709809,  0.50624831,  0.91190972],
        [ 0.56545798,  0.85695062,  0.62484782],
        [ 0.96092354,  0.17453537,  0.17884233]],

       [[ 0.29433402,  0.08540074,  0.18574437],
        [ 0.09942075,  0.78902363,  0.62663572],
        [ 0.20372951,  0.67039551,  0.52292875]],

       [[ 0.79952289,  0.48221372,  0.43838685],
        [ 0.25559683,  0.39549153,  0.84129493],
        [ 0.69093533,  0.71522961,  0.16522915]]])

In [41]: e
Out[41]: 
array([[[ 105.21318703,  109.34963575,  196.97249887],
        [ 122.13892469,  185.10133376,  134.96712825],
        [ 207.55948396,   37.69964085,   38.62994399]],

       [[  63.57614855,   18.44656009,   40.12078466],
        [  21.47488098,  170.42910452,  135.35331646],
        [  44.00557341,  144.80543099,  112.95260949]],

       [[ 172.69694529,  104.15816275,   94.69156014],
        [  55.20891593,   85.42617016,  181.71970442],
        [ 149.2420308 ,  154.48959477,   35.68949734]]]) 
```

这里是[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.dct.html)的链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:42:17.450

看起来 dct 和 idct 默认情况下不规范化。定义以下列方式`dct`调用。`fftpack.dct`对 做同样的事情`idct`。

```
In [13]: dct = lambda x: fftpack.dct(x, norm='ortho')

In [14]: idct = lambda x: fftpack.idct(x, norm='ortho') 
```

完成后，您将在执行转换后取回原始答案。

```
In [19]: import numpy

In [20]: a = numpy.random.rand(3,3,3)

In [21]: d = dct(dct(dct(a).transpose(0,2,1)).transpose(2,1,0)).transpose(2,1,0).transpose(0,2,1)

In [22]: e = idct(idct(idct(d).transpose(0,2,1)).transpose(2,1,0)).transpose(2,1,0).transpose(0,2,1)

In [23]: a
Out[23]: 
array([[[ 0.51699637,  0.42946223,  0.89843545],
        [ 0.27853391,  0.8931508 ,  0.34319118],
        [ 0.51984431,  0.09217771,  0.78764716]],

       [[ 0.25019845,  0.92622331,  0.06111409],
        [ 0.81363641,  0.06093368,  0.13123373],
        [ 0.47268657,  0.39635091,  0.77978269]],

       [[ 0.86098829,  0.07901332,  0.82169182],
        [ 0.12560088,  0.78210188,  0.69805434],
        [ 0.33544628,  0.81540172,  0.9393219 ]]])

In [24]: e
Out[24]: 
array([[[ 0.51699637,  0.42946223,  0.89843545],
        [ 0.27853391,  0.8931508 ,  0.34319118],
        [ 0.51984431,  0.09217771,  0.78764716]],

       [[ 0.25019845,  0.92622331,  0.06111409],
        [ 0.81363641,  0.06093368,  0.13123373],
        [ 0.47268657,  0.39635091,  0.77978269]],

       [[ 0.86098829,  0.07901332,  0.82169182],
        [ 0.12560088,  0.78210188,  0.69805434],
        [ 0.33544628,  0.81540172,  0.9393219 ]]]) 
```

我不确定为什么默认情况下没有选择规范化。但是当使用`ortho`,`dct`并且`idct`每个似乎都标准化了`1/sqrt(2 * N)`or的一个因子`1/sqrt(4 * N)`。可能存在需要规范化`dct`而不需要规范化的应用程序，`idct`反之亦然。

# c# - 检索 Windows 8 产品密钥

> ID：14325798
> 
> 赞同：0
> 
> 时间：2013-01-14T20:04:53.350
> 
> 标签：c#, c++, windows-8

**主要目标**：

正如标题所说，我想要一种检索 Windows 8 产品密钥的方法。AC# 示例更可取，但 C++ 也可以。如果有人有其他形式的解决方案，如果您可以发布它，也许我可以弄清楚。

**推理**：

我最近负责维护公司的笔记本电脑。之前的负责人没有跟踪分配的 MSDN 密钥。我想为每个产品系列建立一个目录，包括已安装的操作系统。目前，除非使用重影图像或其他方式，否则我必须使用新的连续剧在谷歌上花了几个小时后，我已经有很多方法可以获取除 8 个之外的所有以前版本的 Windows。例如[*检索 Windows 7 产品密钥*](http://blog.psychocoder.net/2012/07/04/retrieve-your-windows-product-key-with-csharp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:15:00.873

我不确定这个示例应用程序是否兼容检索 Windows 8 产品密钥，但您至少可以试一试，看看它是否有效

它称为 Windows 产品密钥查找器，可在 codeplex 获得：

```
A small tool for finding your Windows product key. No install required, just a single executable file. 
Its open source so you can actually see what the program is doing with your key :P 
```

[http://wpkf.codeplex.com/](http://wpkf.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T17:28:23.083

尝试查询 -

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Win8\ProductKey 
```

按照下面的线程 -

[使用 .NET 访问 Windows 注册表？](https://stackoverflow.com/questions/1470770/accessing-the-windows-registry-using-net)

# c++ - 将非托管 C++ 方法传递给 C# dll 以进行回调

> ID：14325802
> 
> 赞同：2
> 
> 时间：2013-01-14T20:05:13.993
> 
> 标签：c++, interop, unmanaged

我有一个已注册的 .Net dll，并且能够从我的 C# 代码中调用方法。我基本上遵循了本教程：http: [//support.microsoft.com/kb/828736](http://support.microsoft.com/kb/828736)

现在我需要在 c# 中异步做一些事情，所以我需要某种方式告诉 c++ 代码我已经完成了。

我创建了一个这样的方法：

```
public void Init(string server, IntPtr callback); 
```

我可以在 c++ 中看到：

```
Init(BSTR server, long callback); 
```

当我调用它时，我还需要将一个变量传递回 C++ 代码。

基本上，我有一个在 C# 代码中被触发的事件，我需要 C++ 代码来处理它，包括事件参数。

我很高兴自己阅读，但我什么也找不到。我确实看到了一些关于 Windows 事件的东西......这里 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa385771(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385771(v=vs.85).aspx)

但我们没有使用任何我不认为的 Windows 标题，如果有更简单的方法，我不想添加所有这些东西。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:02:31.500

好吧，这比我想象的要容易，但对我来说这似乎是巫术......

基本上在c++中添加

```
void CALLBACK CppCallbackc()
{
    std::cout << "test";
} 
```

然后在c#中添加

```
public delegate void CppCallback(); 
```

当你想开火时，

```
Marshal.GetDelegateForFunctionPointer(cppCallback, typeof(CppCallback)).DynamicInvoke(null); 
```

# vb.net - 线程池到任务的转换

> ID：14325813
> 
> 赞同：0
> 
> 时间：2013-01-14T20:05:53.533
> 
> 标签：vb.net, multithreading, task-parallel-library, threadpool, .net-4.5

我当前的解决方案使用 ThreadPool 来处理事务。每隔几分钟，我就会抓取 1-200 个事务，并通过 QueueUserWorkItem 函数对每个事务进行排队。像这样的东西，“trans”是我的交易集合：

```
 For Each t As ManagerTransaction In trans
          Threading.ThreadPool.QueueUserWorkItem(AddressOf ProcessManagerTransaction, t)
        Next 
```

我想将其切换为使用 TPL，但是，经过大量研究，我仍然不确定最好的方法。我有以下选择，但我无法就最佳实践达成普遍共识。

```
1) Threading.Tasks.Parallel.ForEach(trans, AddressOf ProcessManagerTransaction) 
```

其中“t”是我的“trans”集合中的单个交易

```
2) Task.Factory.StartNew(AddressOf ProcessManagerTransaction, t)
2a) Task.Factory.StartNew(Sub() ProcessManagerTransaction(t) 
```

而这两者的结合：

```
3) Task.Factory.StartNew(Function() Parallel.ForEach(trans, AddressOf ProcessManagerTransaction)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:19:40.370

第一个选项通常是可取的，因为它可以完成您想要的一切：并行化和错误传播。选项 2 和 3 需要额外的方法来传播错误。

*如果您需要*任务，则选项 2 可能会发挥作用，以便您可以将它们与其他任务组合在一起。

我真的没有看到我会使用选项 3 的情况。

# onclick - 在 if 语句中禁用 onclick

> ID：14325819
> 
> 赞同：0
> 
> 时间：2013-01-14T20:06:24.833
> 
> 标签：onclick

我有一个关于在处理完操作后禁用 onclick 的快速问题。这是一个可以在以后查看的表单。问题是，当您在视图中时，我实际上不希望运行 onclick 功能，我希望单选按钮从提交的内容中保持选中状态。

```
<input type="radio" name="#str#"  id="#str#" value="yes"  onclick="valuechanged(this)"
<cfif  len(#audit#) gt 0 and  getsafetytype.weight eq colvalue>     
checked="yes"                                   
</cfif> 
```

所以 view 命令运行 if 语句有一个值。我无法弄清楚如何在 if 语句期间禁用 onclik 而不在创建新表单时禁用它。任何想法都会很棒。

# jquery - 带有英尺和英寸的 jQuery 滑块

> ID：14325822
> 
> 赞同：1
> 
> 时间：2013-01-14T20:07:01.003
> 
> 标签：jquery, jquery-slider

我将 JQuery 滑块用于宽度范围。这是我的 HTML：

```
<div id="divWidth">
    Width:
    <div>
        <input type="text" class="sliderValue" data-index="0" value="10" id="txtWidthFt0"
            runat="server" style="width: 20px" />'
        <input type="text" class="sliderValue" data-index="0" value="10" id="txtWidthIn0"
            runat="server" style="width: 20px" />" to
        <input type="text" class="sliderValue" data-index="1" value="10" id="txtWidthFt1"
            runat="server" style="width: 20px" />'
        <input type="text" class="sliderValue" data-index="1" value="10" id="txtWidthIn1"
            runat="server" style="width: 20px" />"
    </div>
    <br />
    <div id="sliderWidth">
    </div>
</div> 
```

我能够让文本框的值随着滑块的移动而改变。我需要相反的帮助 - 随着文本框值的变化而改变滑块值。

这是我当前的 javascript，我从[这篇文章](https://stackoverflow.com/questions/12215700/jquery-ui-slider-using-inches)中对其进行了调整：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script type="text/javascript">

    function getFeet(n) {
        return Math.floor(n / 12);
    }
    function getInches(n) {
        return (n % 12);
    }

    $(document).ready(function () {
        $("#sliderWidth").slider({
            min: 1,
            max: 500, 
            range: true,
            values: [1, 500],
            slide: function (event, ui) {
                for (var i = 0; i < ui.values.length; ++i) {
                    $("#txtWidthFt" + i).val(getFeet(ui.values[i]));
                    $("#txtWidthIn" + i).val(getInches(ui.values[i]));
                }
            }
        });

        // need help here:
        $("#divWidth input").change(function () {
            var $this = $(this);
            $("#sliderWidth").slider("values", ?);
        });
    });

</script> 
```

我知道我可以为每个文本框添加一个更改事件并这样做。我正在寻找一种方法来做到这一点，而无需为每个文本框/使用更少的代码。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:33:01.190

试试这个：

```
$("#divWidth input").blur(function () {
  var $this = $(this),
      startFt = parseInt($('#txtWidthFt0').val()),
      startIn = parseInt($('#txtWidthIn0').val()),
      startTotal = (startFt * 12) + startIn,
      endFt = parseInt($('#txtWidthFt1').val()),
      endIn = parseInt($('#txtWidthIn1').val()),
      endTotal = (endFt * 12) + endIn;
  $("#sliderWidth").slider('values',0,startTotal);
  $("#sliderWidth").slider('values',1,endTotal);
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/zeM62/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:33:02.057

试试这个[小提琴](http://jsfiddle.net/anderslyman/nGCrx/)。

html:

```
<body>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</body>
<div id="divWidth">Width:
  <div>
    <input type="text" class="sliderValue" data-index="0" value="10" id="txtWidthFt0"
    runat="server" style="width: 20px" />'
    <input type="text" class="sliderValue" data-index="0" value="10" id="txtWidthIn0"
    runat="server" style="width: 20px" />" to
    <input type="text" class="sliderValue" data-index="1" value="10" id="txtWidthFt1"
    runat="server" style="width: 20px" />'
    <input type="text" class="sliderValue" data-index="1" value="10" id="txtWidthIn1"
    runat="server" style="width: 20px" />"</div>
  <br />
  <div id="sliderWidth"></div>
</div> 
```

JS：

```
function getFeet(n) {
  return Math.floor(n / 12);
}

function getInches(n) {
  return (n % 12);
}

function setInputs(values) {
  $("#txtWidthFt0").val(getFeet(values[0]));
  $("#txtWidthIn0").val(getInches(values[0]));
  $("#txtWidthFt1").val(getFeet(values[1]));
  $("#txtWidthIn1").val(getInches(values[1]));
}

$(document).ready(function () {
  $("#sliderWidth").slider({
    min: 1,
    max: 500,
    range: true,
    values: [1, 500],
    slide: function (event, ui) {
        setInputs(ui.values);
    }
  });

  $("#divWidth input").change(function () {
    var startFeet = parseInt($("#txtWidthFt0").val());
    var startInches = parseInt($("#txtWidthIn0").val());
    var endFeet = parseInt($("#txtWidthFt1").val());
    var endInches = parseInt($("#txtWidthIn1").val());
    var start = (startFeet * 12) + startInches;
    var end = (endFeet * 12) + endInches;

    $("#sliderWidth").slider("values", [start, end]);
  });

  var values = $("#sliderWidth").slider("values");
  setInputs(values);
}); 
```

# ruby-on-rails - Ruby 中的正则表达式：找不到表达式

> ID：14325824
> 
> 赞同：0
> 
> 时间：2013-01-14T20:07:11.687
> 
> 标签：ruby-on-rails, ruby, regex

我在 Ruby（在 Rails 上）中的正则表达式有问题。我对此比较陌生。

测试字符串是： [http](http://www.xyz.com/017010830343) : //www.xyz.com/017010830343 ?$ProdLarge$

我正在尝试删除“$ProdLarge$”。换句话说，$ 符号和介于两者之间的任何东西。

我的正则表达式是：\$\w+\$

Rubular 说我的表情没问题。[http://rubular.com/r/NDDQxKVraK](http://rubular.com/r/NDDQxKVraK)

但是当我运行我的代码时，应用程序说它没有找到匹配项。下面的代码：

```
some_array.each do |x|
   logger.debug "scan #{x.scan('\$\w+\$')}"
   logger.debug "String? #{x.instance_of?(String)}"

   x.gsub!('\$\w+\$','scl=1')

   ... 
```

我的记录器调试行显示“[]”的结果。字符串被确认为真。并且 gsub 行没有效果。

我需要纠正什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:11:41.460

使用`/regex/`代替`'regex'`：

```
> "http://www.xyz.com/017010830343?$ProdLarge$".gsub(/\$\w+\$/, 'scl=1')
=> "http://www.xyz.com/017010830343?scl=1" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T01:21:01.677

不要为此任务使用正则表达式，使用专为它设计的工具[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)。要删除查询：

```
require 'uri'

url = URI.parse('http://www.xyz.com/017010830343?$ProdLarge$')
url.query = nil

puts url.to_s
=> http://www.xyz.com/017010830343 
```

要更改为不同的查询，请使用 this 而不是`url.query = nil`：

```
url.query = 'scl=1'

puts url.to_s
=> http://www.xyz.com/017010830343?scl=1 
```

URI 将在必要时自动对值进行编码，从而为您省去麻烦。如果您需要更多的 URL 管理能力，请查看[Addressable::URI](http://addressable.rubyforge.org/)。

# maven - 使用 Struts2 Tiles 插件启用 Tiles 时出错

> ID：14325825
> 
> 赞同：0
> 
> 时间：2013-01-14T20:07:17.980
> 
> 标签：maven, struts2, tiles, struts2-tiles-plugin

当我尝试在 Tomcat 上使用 Tiles 部署 Struts2 应用程序时出现此错误：

```
Error configuring application listener of class org.apache.struts2.tiles.StrutsTilesListener
java.lang.ClassNotFoundException: org.apache.struts2.tiles.StrutsTilesListener 
```

这是 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>Nebula</groupId>
<artifactId>Nebula</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<name>Nebula</name>
<dependencies>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.3.8</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-tiles-plugin</artifactId>
        <version>2.3.8</version>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
    </dependency>
</dependencies>
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>src</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

和 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
     <display-name>Nebula</display-name>
     <context-param>
         <param-name>org.apache.tiles.definition.DefinitionsFactory.DEFINITIONS_CONFIG</param-name>
         <param-value>/WEB-INF/tiles.xml</param-value>
     </context-param>
     <listener>
         <listener-class>
             org.apache.struts2.tiles.StrutsTilesListener
         </listener-class>
     </listener>
     <filter>
         <filter-name>struts2</filter-name>
         <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
     </filter>
     <filter-mapping>
         <filter-name>struts2</filter-name>
         <url-pattern>/*</url-pattern>
     </filter-mapping>
 </web-app> 
```

这发生在我切换到 Maven 之后——之前，当我自己管理所有 JAR 时，这不是问题。

我可以看到该类`org.apache.struts2.tiles.StrutsTilesListener`确实存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:25:51.017

我从头开始创建了一个新项目，并且……它起作用了。不知道上一个是什么问题。

# windows - 将单个设备上的多个传感器暴露给 Windows Sensor API

> ID：14325827
> 
> 赞同：0
> 
> 时间：2013-01-14T20:07:21.207
> 
> 标签：windows, winapi, sensors

Windows 引入了传感器 API，因此您可以创建一个 HID 设备，为他们支持的 18 种传感器之一提供数据。我正在创建一个带有许多板载传感器的设备，但是通过阅读文档，不清楚如何将它与来自一个 USB 设备的多个传感器一起使用。我能想到的唯一解决方案是让我的设备成为“复合 USB 设备”，并模拟 18 种不同的 HID 设备。

有没有更好的方法来支持多个传感器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:55:23.467

您将支持传感器的 HID 协议，并返回包含多个传感器的顶级集合。

有关详细信息，请参阅此白皮书：http: [//msdn.microsoft.com/en-us/library/windows/hardware/br259128.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/br259128.aspx)

请注意，虽然白皮书提到了示例 HID 传感器类驱动程序，但如果您使用的是 Windows 8，则不必为传感器实现 HID 驱动程序 - Windows 8 附带 HID 传感器类驱动程序。

# paypal - PayPal：通过来自 Adaptive Payments API 的 IPN 跟踪用户

> ID：14325828
> 
> 赞同：2
> 
> 时间：2013-01-14T20:07:21.557
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

我需要在我的网站上跟踪用户付款，但 IPN 中没有任何内容可以链接到我的原始付款。

有些人建议使用“自定义”字段（http://stackoverflow.com/questions/11251109/paypal-button-sending-custom-variable-through-ipn），但这似乎不是自适应的选项支付 API。

那么是否有任何字段可以附加到我的 Pay API 调用或我的 SetPaymentOptions API 调用，这些字段将 a）对用户不可见，并且 b）返回 IPN 以便我可以跟踪付款？

我唯一的其他选择是使用支付密钥进行跟踪（但这似乎是错误的，因为它是公开的并且过期并且给定的交易可以有多个支付密钥），或者将 ipn 通知发送到跟踪的 URL，例如 www.example.com/付款/ipn/{transaction_id}

如果我没有合法的方式来跟踪付款，我会感到相当震惊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:58:14.380

我认为这可能对你有用： [https ://www.x.com/developers/paypal/forums/mobile/how-fetch-invoice-data-using-adaptive-payments-api](https://www.x.com/developers/paypal/forums/mobile/how-fetch-invoice-data-using-adaptive-payments-api)

# google-chrome - Chrome - 将站点添加到本地 Intranet

> ID：14325831
> 
> 赞同：4
> 
> 时间：2013-01-14T20:07:26.917
> 
> 标签：google-chrome

我们正在尝试在我们的网站中添加指向本地共享的 href 链接。

在 IE 下，如果我们将站点设置为本地 Intranet 区域，则链接可以工作。

在 Firefox 下，如果我们使用 user.js 文件设置站点权限，则链接有效。

在 chrome 中，即使将站点添加到本地 Intranet 区域后，文件链接仍然不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T17:18:00.453

我最近有同样的问题。我发现如果 URL 列在本地 Intranet 区域网站列表中，IE 将授予对该站点的访问权限。

**控制面板 > 网络和 Internet > Internet 选项 > 安全 > 本地 Intranet > 站点 > 高级**

但是，Chrome 不会。我们必须放置**服务器的完全限定域名**

例如：
[http](http://host.company.com/) ://host.company.com/ = **BAD**（适用于 IE，而不是 chrome）

*.company.topic.com =**好**（两者都适用）

旁注：在您的情况下，使用星号***.company.com**可能是一种解决方案，但我不确定可能引入的安全漏洞（如果有的话）。

# asp.net - WHERE 中的多个条目或在 WHERE * 中使用 * 并使用 LIKE SQL

> ID：14325834
> 
> 赞同：1
> 
> 时间：2013-01-14T20:07:40.410
> 
> 标签：asp.net, sql, vb.net

我应该将所有内容放在以“a”开头的表格的 2 列中。请建议对此进行修改。（搜索框.Text = 'a'）

我使用的是 ASP .Net，语言是 Visual Basic，而数据库是 SQL Server Compact。我尝试了以下方法以获得不同的结果。

代码 A：

```
"SELECT * FROM [Table Name] WHERE [Column1] LIKE '" + SearchTextBox.Text + "%'" AND [Column2] LIKE '" + SearchTextBox.Text + "%'" 
```

代码 B：

```
"SELECT * FROM [Table Name] WHERE * LIKE '" + SearchTextBox.Text + "%'" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:14:43.690

如果我理解你的问题，你想使用“或”而不是“和”作为“和”只会给你一个“a”在两个列中的列......

你会更好地创建一个带有参数并绑定到它的存储过程。您的代码不会受到当前的注入攻击。

高温高压

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T20:13:27.297

```
SELECT 
    * 
FROM 
    [Table Name] 
WHERE 
       [Column1] LIKE '" + SearchTextBox.Text + "%'" 
    or [Column2] LIKE '" + SearchTextBox.Text + "%'" 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T20:16:20.380

你的意思是 ...

```
SELECT  *
FROM    [Table Name]
WHERE   [Column1] LIKE '" + SearchTextBox.Text + "%'"
OR      [Column2] LIKE '" + SearchTextBox.Text + "%'" 
```

?

请注意，我使用的是 an`OR`而不是 an `AND`- 这是非常基本的东西，所以如果这是您的问题，您应该阅读[布尔运算](http://www.csa.com/help/Search_Tools/boolean_operators.html)

# asynchronous - pcap 异步抓包

> ID：14325837
> 
> 赞同：-1
> 
> 时间：2013-01-14T20:07:53.983
> 
> 标签：asynchronous, io, pcap, event-based-programming

我正在使用 pcap 库捕获 IEEE802.11 数据包。到目前为止，我使用 pcap_loop 和一个回调函数来接收然后处理数据包。但现在我已经切换了设备定期监听的 wifi 频道。不幸的是， pcap_loop 被阻塞了，所以我不能使用超时来调用我的函数。然后我读到了 pcap_dispatch，但我真的不知道它应该如何异步工作，因为做类似的事情

```
while(1) {
    int cnt = pcap_dispatch(handle, -1, callback, null);
} 
```

不会解决任何事情。

那么任何人都可以向我解释如何使 pcap 捕获数据包异步/基于事件，或者换句话说如何解决我的困境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:01:11.977

引用`pcap_get_selectable_fd()`手册页（这是来自主干的版本）：

```
DESCRIPTION

   pcap_get_selectable_fd() returns, on UNIX, a file descriptor number for
   a  file descriptor on which one can do a select() or poll() to wait for
   it to be possible to read packets without blocking, if such a  descrip‐
   tor  exists, or −1, if no such descriptor exists.  Some network devices
   opened   with    pcap_create()    and    pcap_activate(),    or    with
   pcap_open_live(), do not support select() or poll() (for example, regu‐
   lar network devices on FreeBSD 4.3 and 4.4, and Endace DAG devices), so
   −1 is returned for those devices.

   Note that in:

          FreeBSD prior to FreeBSD 4.6;

          NetBSD prior to NetBSD 3.0;

          OpenBSD prior to OpenBSD 2.4;

          Mac OS X prior to Mac OS X 10.7;

   select()   and   poll()   do   not   work  correctly  on  BPF  devices;
   pcap_get_selectable_fd() will return a file descriptor on most of those
   versions  (the  exceptions  being  FreeBSD  4.3  and 4.4), but a simple
   select() or poll() will not indicate that the  descriptor  is  readable
   until  a  full  buffer’s worth of packets is received, even if the read
   timeout expires before then.  To work around this, an application  that
   uses  select()  or  poll()  to  wait for packets to arrive must put the
   pcap_t in non‐blocking mode, and must  arrange  that  the  select()  or
   poll()  have a timeout less than or equal to the read timeout, and must
   try to read packets after that timeout expires, regardless  of  whether
   select() or poll() indicated that the file descriptor for the pcap_t is
   ready to be read or not.  (That workaround will not work in FreeBSD 4.3
   and  later; however, in FreeBSD 4.6 and later, select() and poll() work
   correctly on BPF devices, so the workaround isn’t  necessary,  although
   it does no harm.)

   Note  also that poll() doesn’t work on character special files, includ‐
   ing BPF devices, in Mac OS X 10.4 and 10.5, so, while select()  can  be
   used  on  the  descriptor  returned by pcap_get_selectable_fd(), poll()
   cannot be used on it those versions of Mac OS X.   Kqueues  also  don’t
   work  on  that  descriptor.   poll(),  but  not  kqueues,  work on that
   descriptor in Mac OS X releases prior to 10.4; poll() and kqueues  work
   on that descriptor in Mac OS X 10.6 and later.

   pcap_get_selectable_fd() is not available on Windows. 
```

此外，由于 10.6 的 BPF 中的一个错误（作为修复另一个错误的一部分而引入），该解决方法在 Mac OS X 10.6 上不起作用；解决方法将适用于 10.7 及更高版本，但不是必需的。

`select()`因此，如果您有一个基于/// kqueue `poll()`/ etc. 的事件循环，则可以使其基于`epoll()`事件 - 将您从中获得的描述符添加`pcap_get_selectable_fd()`为在该事件循环中选择的文件描述符之一。

# javascript - jqPlot DateAxisRenderer 挂浏览器

> ID：14325839
> 
> 赞同：0
> 
> 时间：2013-01-14T20:08:07.890
> 
> 标签：javascript, jquery, jqplot

我在 XAxis 上使用带有 DateAxisRender 的 jqPlot 折线图，并且看到我的浏览器挂起。没有崩溃，只是挂在那里。

我的图表的代码是：

```
var lineChart = $.jqplot('viewsAppsTime', [data.VIEWS], {
  seriesColors:["#3bafe4","#00a44d"],
  grid:{
    shadow:false,
    drawBorder:false,
    drawGridlines:false,
    background:"#fff"
  },
  gridPadding:{bottom:20},
  seriesDefaults:{
    markerOptions:{
      style:"circle",
      lineWidth:5,
      size:12
    }
  },
  axesDefaults:{
    min:0,
    showTickMarks:false,
    tickOptions:{
      showLabel:true,
      showMark:false,
      showGridline:false
    }
  },
  highlighter:{
    show:true,
    tooltipAxes:"y"
  },
  title:"Visits and Applications",
  height:"340px",
  axes:{
    xaxis:{
      label:"Days Active",
      renderer: $.jqplot.DateAxisRenderer,
      tickInterval:7,
      tickOptions:{}
    }
  },
  series:[
    {
      label:"Visits",
      neighborThreshold:-1
    },{
      label:"Applications",
      neighborTheshold:-1
    }
  ],
  legend:{
    show:true,
    location:"ne",
    yOffset:0
  }
}); 
```

data.VIEWS 变量将如下所示（实际值的副本）：

```
[["2012-12-13",25],["2012-12-14",31],["2012-12-15",38],["2012-12-16",23],["2012-12-17",40],["2012-12-18",23],["2012-12-19",11],["2012-12-20",7],["2012-12-21",7],["2012-12-23",4],["2012-12-24",3],["2012-12-25",9],["2012-12-26",12],["2012-12-27",8],["2012-12-28",7],["2012-12-29",1],["2012-12-30",4],["2012-12-31",4],["2013-01-01",6],["2013-01-02",24],["2013-01-03",11],["2013-01-04",10],["2013-01-05",6],["2013-01-06",10],["2013-01-07",6],["2013-01-08",16],["2013-01-09",14],["2013-01-10",5],["2013-01-11",7],["2013-01-12",6],["2013-01-13",2]] 
```

我已经阅读了[这篇文章](https://stackoverflow.com/questions/8588510/why-does-jqplots-dateaxisrenderer-crash-when-showing-a-single-data-point)并复制了答案中链接的文件，但我仍然看到我的浏览器挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:39:21.590

我发现问题的原因是我对 tickInterval 使用了错误的语法，并且我必须指定一个最小值和最大值。我修改了我的代码如下：

```
 axes:{
    xaxis:{
      label:"Days Active",
      renderer: $.jqplot.DateAxisRenderer,
      tickInterval:"7 days",
      min: data.VIEWS[0][0],
      max: data.VIEWS[data.VIEWS.length-1][0]
      tickOptions:{}
    }
  }, 
```

# java - java中的日期验证

> ID：14325840
> 
> 赞同：-1
> 
> 时间：2013-01-14T20:08:08.787
> 
> 标签：java, date, jodatime

我需要验证一个字符串以查看它是否代表 ISO 格式日期，如果不是，我需要抛出用户定义的异常。

我有这行代码，

```
DateTimeFormatter formatter = ISODateTimeFormat.date(); 
```

如何使用此格式化程序来验证字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:12:20.883

通过尝试使用[formatter.parseDateTime()](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html#parseDateTime%28java.lang.String%29)方法解析它。

当字符串不是有效日期时，将抛出 IllegalArgumentException。当您想抛出自己的异常时，只需捕获它并抛出另一个异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:12:29.450

您可以尝试使用已有的`formatter`、catch`IllegalArgumentException`和 throw 用户定义的异常进行解析：

```
try {
    formatter.parseMillis(stringBeingValidated); // You can use another parseXYZ method here
} catch (IllegalArgumentException iae) {
    throw new CustomException(iae.getMessage()); // The getMessage() call is only an example.
} 
```

# python - matplotlib：故意阻止代码执行等待 GUI 事件

> ID：14325844
> 
> 赞同：7
> 
> 时间：2013-01-14T20:08:13.137
> 
> 标签：python, events, numpy, event-handling, matplotlib

有什么方法可以让 matplotlib 阻止代码执行挂起`matplotlib.backend_bases.Event`？

[按照这些示例](http://matplotlib.org/users/event_handling.html)，我一直在研究一些用于在 matplotlib 图形中交互式绘制线条和多边形的类。我真正想做的是阻止执行，直到我完成编辑我的多边形，然后得到顶点的最终位置——如果你熟悉 MATLAB，我基本上是在尝试复制`position = wait(roihandle)`语法，例如[这里](http://www.mathworks.co.uk/help/images/ref/impoly.html#bq_wyu3).

我想我可以在按键发生时设置我的交互式多边形对象的一些类属性，然后在我的脚本中反复轮询对象以查看事件是否已经发生，但我希望有更好的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T21:24:30.487

好吧，这比我想象的要容易！对于那些感兴趣的人，我找到了使用`figure.canvas.start_event_loop()`and的解决方案`figure.canvas.stop_event_loop()`。

这是一个简单的例子：

```
from matplotlib import pyplot as plt

class FigEventLoopDemo(object):

    def __init__(self):

        self.fig, self.ax = plt.subplots(1, 1, num='Event loop demo')
        self.clickme = self.ax.text(0.5, 0.5, 'click me',
                                    ha='center', va='center',
                                    color='r', fontsize=20, picker=10)

        # add a callback that triggers when the text is clicked
        self.cid = self.fig.canvas.mpl_connect('pick_event', self.on_pick)

        # start a blocking event loop
        print("entering a blocking loop")
        self.fig.canvas.start_event_loop(timeout=-1)

    def on_pick(self, event):

        if event.artist is self.clickme:

            # exit the blocking event loop
            self.fig.canvas.stop_event_loop()
            print("now we're unblocked") 
```

# ms-access - 海量图片导出

> ID：14325846
> 
> 赞同：1
> 
> 时间：2013-01-14T20:08:23.590
> 
> 标签：ms-access, ms-access-2007, vba

我继承了一个包含大约 5000 条记录的数据库。每条记录都作为带有图片的嵌入式 OLE。我想将所有图片移出数据库并用文件路径替换它们。这样做的最佳方法是什么？

# java - Android：在编辑文本中插入空格会导致崩溃

> ID：14325848
> 
> 赞同：0
> 
> 时间：2013-01-14T20:08:30.853
> 
> 标签：java, android, json, url, uri

我的编辑文本用作搜索框，我从烂番茄 API 获取电影，使用我的编辑文本中的文本，问题是。当插入空格时应用程序崩溃，我假设我需要将空格转换为+，但我不知道如何在哪里添加此代码或如何添加，我希望这里的人能够帮助我。

这是我的代码：

```
 private TextView searchBox;
    private Button bGo, bCancelAddFromWeb;
    private ListView moviesList;
    public final static int ACTIVITY_WEB_ADD = 3;

    public List<String> movieTitles;
    public List<String> movieSynopsis;
    public List<String> movieImgUrl;
    private ProgressDialog pDialog;

    // the Rotten Tomatoes API key
    private static final String API_KEY = "8q6wh77s65a54w433cab9rbsq";

    // the number of movies to show
    private static final int MOVIE_PAGE_LIMIT = 8;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.movie_add_from_web);

        InitializeVariables();

    }

    /*
     * Initializing the variables and creating the bridge between the views from
     * the xml file and this class
     */

    private void InitializeVariables() {

        searchBox = (EditText) findViewById(R.id.etSearchBox);
        bGo = (Button) findViewById(R.id.bGo);
        bCancelAddFromWeb = (Button) findViewById(R.id.bCancelAddFromWeb);
        moviesList = (ListView) findViewById(R.id.list_movies);

        bGo.setOnClickListener(this);
        bCancelAddFromWeb.setOnClickListener(this);
        moviesList.setOnItemClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {

        case R.id.bGo:
            new RequestTask()
                    .execute("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey="
                            + API_KEY
                            + "&q="
                            + searchBox.getText()
                            + "&page_limit=" + MOVIE_PAGE_LIMIT);
            break;

        case R.id.bCancelAddFromWeb:
            finish();
            break;

        }

    }

    private void refreshMoviesList(List<String> movieTitles) {
        moviesList.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, movieTitles
                        .toArray(new String[movieTitles.size()])));
    }

    private class RequestTask extends AsyncTask<String, String, String> {

        // make a request to the specified url
        @Override
        protected String doInBackground(String... uri) {
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response;
            String responseString = null;
            try {
                // make a HTTP request
                response = httpclient.execute(new HttpGet(uri[0]));
                StatusLine statusLine = response.getStatusLine();
                if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
                    ByteArrayOutputStream out = new ByteArrayOutputStream();
                    response.getEntity().writeTo(out);
                    out.close();
                    responseString = out.toString();
                } else {
                    // close connection
                    response.getEntity().getContent().close();
                    throw new IOException(statusLine.getReasonPhrase());
                }
            } catch (Exception e) {
                Log.d("Test", "Couldn't make a successful request!");
            }
            return responseString;
        }

        // if the request above completed successfully, this method will
        // automatically run so you can do something with the response

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            pDialog = new ProgressDialog(MovieAddFromWeb.this);
            pDialog.setMessage("Searching...");
            pDialog.show();
        }

        @Override
        protected void onPostExecute(String response) {
            super.onPostExecute(response);

            try {
                // convert the String response to a JSON object
                JSONObject jsonResponse = new JSONObject(response);

                // fetch the array of movies in the response
                JSONArray jArray = jsonResponse.getJSONArray("movies");

                // add each movie's title to a list
                movieTitles = new ArrayList<String>();

                // newly added
                movieSynopsis = new ArrayList<String>();
                movieImgUrl = new ArrayList<String>();

                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject movie = jArray.getJSONObject(i);
                    movieTitles.add(movie.getString("title"));

                    movieSynopsis.add(movie.getString("synopsis"));
                    movieImgUrl.add(movie.getJSONObject("posters").getString(
                            "profile"));

                }
                // refresh the ListView
                refreshMoviesList(movieTitles);
            } catch (JSONException e) {
                Log.d("Test", "Couldn't successfully parse the JSON response!");
            }
            pDialog.dismiss();
        }
    }

    @Override
    public void onItemClick(AdapterView<?> av, View view, int position, long id) {

        Intent openMovieEditor = new Intent(this, MovieEditor.class);
        openMovieEditor.putExtra("movieTitle", movieTitles.get(position));

        // newly added
        openMovieEditor.putExtra("movieSynopsis", movieSynopsis.get(position));
        openMovieEditor.putExtra("movieImgUrl", movieImgUrl.get(position));

        openMovieEditor.putExtra("callingActivity", ACTIVITY_WEB_ADD);
        startActivityForResult(openMovieEditor, ACTIVITY_WEB_ADD);

    }
} 
```

这是有错误的日志：

```
01-14 20:19:19.591: D/Test(907): Couldn't make a successful request!
01-14 20:19:19.690: D/AndroidRuntime(907): Shutting down VM
01-14 20:19:19.700: W/dalvikvm(907): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-14 20:19:19.801: E/AndroidRuntime(907): FATAL EXCEPTION: main
01-14 20:19:19.801: E/AndroidRuntime(907): java.lang.NullPointerException
01-14 20:19:19.801: E/AndroidRuntime(907):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
01-14 20:19:19.801: E/AndroidRuntime(907):  at org.json.JSONTokener.nextValue(JSONTokener.java:94)
01-14 20:19:19.801: E/AndroidRuntime(907):  at org.json.JSONObject.<init>(JSONObject.java:154)
01-14 20:19:19.801: E/AndroidRuntime(907):  at org.json.JSONObject.<init>(JSONObject.java:171)
01-14 20:19:19.801: E/AndroidRuntime(907):  at il.jb.projectpart2.MovieAddFromWeb$RequestTask.onPostExecute(MovieAddFromWeb.java:152)
01-14 20:19:19.801: E/AndroidRuntime(907):  at il.jb.projectpart2.MovieAddFromWeb$RequestTask.onPostExecute(MovieAddFromWeb.java:1)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.os.AsyncTask.finish(AsyncTask.java:631)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.os.Looper.loop(Looper.java:137)
01-14 20:19:19.801: E/AndroidRuntime(907):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-14 20:19:19.801: E/AndroidRuntime(907):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 20:19:19.801: E/AndroidRuntime(907):  at java.lang.reflect.Method.invoke(Method.java:511)
01-14 20:19:19.801: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-14 20:19:19.801: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-14 20:19:19.801: E/AndroidRuntime(907):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:21:03.050

您应该使用标准 URL 编码，如下所示：

```
case R.id.bGo:
    new RequestTask()
            .execute("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey="
                    + API_KEY
                    + "&q="
                    + URLEncoder.encode(searchBox.getText(), "UTF-8")
                    + "&page_limit=" + MOVIE_PAGE_LIMIT); 
```

这将用允许的字符（由 RFC 1738 和 HTML 规范定义）替换空格和所有其他非 URL 友好字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:19:32.663

需要查看您的 logcat 以确保这是实际问题，但从您的代码看来，它至少是您的问题之一。

理想情况下你会做类似的事情

```
String search = searchBox.getText();
search = search.replace(" ", "+"); 
```

然后使用该变量发送到您的`RequestTask`

来源：[Android 开发者](http://developer.android.com/reference/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

相反，您最好对返回的字符串进行完整编码，而不是仅仅替换空格......因为其他字符也会导致您出现问题（？，＆等）

编辑：请参阅 EJK 对 URLEncoding 版本的回答。

# android - 检测通知栏是否被下拉

> ID：14325849
> 
> 赞同：5
> 
> 时间：2013-01-14T20:09:03.900
> 
> 标签：android, notifications

几周前，一位朋友在他的 Galaxy Note2 上向我展示了一个闹钟应用程序，如果你拉下通知栏，闹钟就会停止。

我想知道如何获取通知栏的下拉事件，我尝试使用谷歌搜索并在 SO 上搜索。我发现的只是“如何显示您的通知”或“列表视图的下拉刷新”等。

我希望有人已经做到了。或者可以给我一个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:11:01.063

> 我想知道如何获取通知栏的下拉事件

我几乎可以肯定没有这样的事情。但是，我敢打赌，下拉通知栏会使您的应用程序进入“onPause”状态。

# c# - 无法使用 C# 代码在 Adob e Reader 11 的特定页面打开 pdf 文件

> ID：14325852
> 
> 赞同：4
> 
> 时间：2013-01-14T20:09:25.000
> 
> 标签：c#, visual-studio-2010, adobe, adobe-reader

以下代码行用于在 C# 中的特定页面打开 PDF 文件。该代码对于除最新版本（即 11）以外的所有 adobe 版本都运行良好。

```
System.Diagnostics.Process myProcess = new System.Diagnostics.Process();
myProcess.StartInfo.FileName = "AcroRd32.exe";
myProcess.StartInfo.Arguments = "/A \"page=2=OpenActions\" C:\\Jack and Jill.pdf";
myProcess.Start(); 
```

有人可以帮助我，让我知道 adobe reader 11 有什么特别之处。任何帮助将不胜感激。

错误是“打开此文档时出错。找不到文件。” （文件确实存在）

PS：我已经卸载了 adobe 11 并安装了 adobe reader 10 并且代码工作得很好。

在安装 Acrobat Reader 11 时从命令行给出的参数也可以正常工作并打开 PDF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:24:33.243

确保文件名中没有空格。如果它在所有其他 adobe 阅读器中都有空格，但 adobe reader 11 dosent 支持它，它就可以工作。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:29:27.757

根据[打开 PDF 文件](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDsQFjAB&url=http://www.adobe.com/devnet/acrobat/pdfs/pdf_open_parameters.pdf&ei=xGn0UMOiH8i9igKV7YHQBw&usg=AFQjCNHQGP6HRmFUIRvjEkXy2TH4eLIxkQ&bvm=bv.1357700187,d.cGE)的参数，您的参数行应如下所示：

```
myProcess.StartInfo.Arguments = "/A \"page=2\" C:\\example.pdf"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:33:17.037

确保文件**C:\example.pdf**存在。没有文件时会发生此错误。

```
string pdfPath = @"C:\example.pdf";

if (System.IO.File.Exists(pdfPath))
{
     System.Diagnostics.Process myProcess = new System.Diagnostics.Process();
     myProcess.StartInfo.FileName = "AcroRd32.exe";
     myProcess.StartInfo.Arguments = string.Format("/A \"page=2=OpenActions\" \"{0}\"", pdfPath);
     myProcess.Start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T13:57:12.913

Reader 11 的打开参数已更改或已删除。使用阅读器 10。我已向 Adob​​e 询问有关阅读器 11 的打开参数的信息，但没有得到回应。

# google-app-engine - 不使用 GWT 的 Google App Engine Eclipse 插件

> ID：14325853
> 
> 赞同：2
> 
> 时间：2013-01-14T20:09:25.330
> 
> 标签：google-app-engine, gwt, gae-eclipse-plugin

我想在 Google App Engine 上托管一个 Java/AngularJS 应用程序，并利用 Eclipse 插件。我认为最直接的方法是：

1.  在 Eclipse 中，启动一个新的 Google Web 项目。
2.  转到项目属性并取消选中 GWT 和 DataNucleus。
3.  删除生成的 java 类和 GWT 相关的东西，这样你就有了 appengine.web.xml、web.xml、WEB-INF/lib、log4j 属性和一些其他文件。
4.  将 index.html 放在 war 文件夹下，favicon.ico 的姐妹。
5.  将web.xml**欢迎文件**更改为 index.html
6.  部署并测试 index.html 是否可见。

通过 Eclipse 部署工作正常，但 myapp.appspot.com/ 和 myapp.appspot.com/index.html 都返回 404。

*简单地说，我的用例是“如何在没有 800 磅 GWT 的情况下将 index.html 部署到 GAE（使用 Eclipse 插件）？”*

我无法找到关于此的好的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:08:44.340

取消选中**“使用 Google Web Toolkit”**应该是您创建没有 GWT 的基本 App Engine 应用程序所需要做的所有事情，但是，它不会创建示例`index.html`文件。为此，您需要保持选中**“生成项目示例代码” 。**这*将为*您创建一些需要删除的额外 Java 文件，但这是您在问题中描述的最接近的文件。

# linux - 从文件 shell 脚本中获取子字符串

> ID：14325857
> 
> 赞同：1
> 
> 时间：2013-01-14T20:09:50.670
> 
> 标签：linux, shell, grep

我需要一些关于这个 shell 脚本的帮助。我有一个变量，代表一个 IP/TCP 标头。我需要按所选标头过滤流量捕获。

```
> var=ttl 128
> 
> tcpdump -Xvv -n -i eth0 -c 300 > capture.txt 2>/dev/null
> 
> grep -i "$var" capture.txt > resultGrep.txt 
```

tcpdump 命令的结果是这样的

```
15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.131.58363 > 239.255.255.250.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       .............. 
```

我需要有 IP 地址源和 IP 地址目的地，在示例中输出结果必须是

***10.0.0.131.58363 > 239.255.255.250.1900***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:46:24.537

尝试直接在`Unix pipe`over中执行此操作`tcpdump`：

```
tcpdump -Xvv -n -i eth0 -c 300 |
grep -oP "\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}.\d{1,5}\s+>\s+\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}.\d{1,5}" 
```

这是坚如磐石;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:32:48.813

我对这个问题的理解是，你想从你的 中提取东西`resultGrep.txt`，而不是`capture.txt`

然后：

```
grep -oP '[\d\.]*\s*>\s*[\d\.]*' resultGrep.txt 
```

见测试：

```
kent$  echo "15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto UDP (17), length 125)
dquote>     10.0.0.131.58363 > 239.255.255.250.1900: UDP, length 97
dquote>     0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
dquote>     0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
dquote>     0x0020:  0300 0000 0000 0000 0000 0000 0000       .............."|grep  -oP '[\d\.]*\s*>\s*[\d\.]*'
10.0.0.131.58363 > 239.255.255.250.1900 
```

# php - 现在使用 PHP echo 短标签安全吗？

> ID：14325859
> 
> 赞同：8
> 
> 时间：2013-01-14T20:10:10.120
> 
> 标签：php, php-shorttags

现在可以完全安全地使用吗

```
<?=$var ?> 
```

代替

```
<?php echo $var; ?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T20:12:27.187

我不会使用“完全”和“完全”这两个词，但是对于 PHP5.4，“short-open-and-echo”-syntax 是核心的一部分，因此始终可用。提醒一下，我只谈论`<?= ?>`而不是“常规” short-open-tags `<? ?>`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T20:12:31.463

**是**的。**从 2012 年 3 月 1 日的 PHP 5.4.0 开始，您可以使用 short tag**。从[php 5.4 更改日志](http://php.net/ChangeLog-5.php)，

> ```
> <?= is now always available regardless of the short_open_tag setting. 
> ```

这是一个*普遍的改进*。

因此，如果您有 PHP 5.4，则可以使用`<?=`语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T20:13:06.720

是的。using 没有真正的问题`<?=$var?>`，但是如果您想为未启用此功能的主机做好充分准备，那么您可能需要使用完整语句编写它。

通常，即使它被禁用，您也可以启用此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-02T09:58:16.520

最好总是使用常规`<?php`标签。这样您就可以确保您的脚本始终与任何 PHP 安装兼容，无论 PHP 版本或 php.ini 设置如何。

如果您正在开发旨在共享的代码，例如库，则更重要的是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T17:32:03.173

参考： http: [//php.net/ChangeLog.php#5.4.32](http://php.net/ChangeLog.php#5.4.32)

“无论short_open_tagsetting如何，短打开标签现在始终可用”

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-14T20:12:13.133

是的。从 PHP 5.4 开始，除非您的主机禁用它们，否则始终启用 echo 标签。

# php - Zend2：如何添加自定义路由类型？

> ID：14325861
> 
> 赞同：0
> 
> 时间：2013-01-14T20:10:23.900
> 
> 标签：php, url-routing, zend-framework2

我有一个`\Foo\BarRoute`实现路由接口（`\Zend\Mvc\Router\RouteInterface`）的类。

如何添加`\Foo\BarRoute`为`bar`路由插件并使其在配置中可用（例如`'type' => 'bar'`）？

到目前为止，我得到了以下 Module.php 没有任何效果:(

```
public function onBootstrap(EventInterface $e)
{
    $routePluginManager = $e->getRouter()->getRoutePluginManager();
    $routePluginManager->setInvokableClass('bar', '\Foo\BarRoute');
} 
```

这只能通过模块配置文件来完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:24:37.063

为什么不直接在module.config.php中设置你自定义路由类的FQCN呢？如果您只需要在模块配置文件中使用它。

例如

```
返回数组（
    '路由器' => 数组（
        '路线' => 数组（

            '家' => 数组（
                'type' => 'Foo\BarRoute',
                '选项' => 数组（
                    '路线' => '/',
                    '默认值' => 数组（），
            ),),
    ),),

    ...

);

```

# linux - RPM 规范文件 %files 在所有者用户名上失败并带有空格

> ID：14325865
> 
> 赞同：1
> 
> 时间：2013-01-14T20:10:40.613
> 
> 标签：linux, packaging, redhat, rpm, yum

我正在创建一个带有 %files 部分的 RPM 规范文件，该部分指定包含文件的所有权。我正在尝试按如下方式指定用户和组：

```
...
%attr (755, DOMAIN\\user, "DOMAIN\\domain users") /opt/whatever
... 
```

用户似乎可以工作，但组名中的空格会导致 rpmbuild 上的语法检查失败。[该](http://www.rpm.org/wiki/PackagerDocs/Spec)链接似乎表明标准的通配规则适用，并且双引号内必须存在空格，但这似乎并不能解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T16:11:31.103

是的，文件用户/组标签中不允许有空格。

最简单的解决方法是不使用 %attr，而是在 %post 脚本中设置用户/组。

要正确设置 %post 中的用户/组，还应该通过 rpm -V 在规范 %files 中使用前置 %verify 指令禁用用户/组检查，然后添加一个 %verifyscript（由 rpm --verify 运行|-V) 来验证 %post scriptlet 中的设置是否正确。

# c - 在 C 中，我们如何使用指针代替数组来更改大小写并打印长度？

> ID：14325868
> 
> 赞同：0
> 
> 时间：2013-01-14T20:10:54.567
> 
> 标签：c

我正在编写一个程序来将小写句子转换为大写。我也想要字符串的长度。我通过（两者）数组和指针来做到这一点。程序如下：-

```
/* Program to convert the lower case sentence in upper case sentence and also calculate the length of the string */
#include<stdio.h>
main()
{
    char fac='a'-'A',ch[20],*ptr,a[20];int i=0,count=0;
    ptr=ch;

    /* Changing case and printing length by using pointers */
    printf("Enter the required string");
    gets(ptr);
    while(*ptr!='\0')
    {
        *ptr+=fac;   // LINE #1
        ptr++;
        count++;
    }
    puts(ptr);
    printf("%d",count);

    /* Changing case by using arrays */
    printf("Enter the required string");
    gets(ch);
    while(ch[i]!='\0')
    {
        ch[i]+=fac;
        i++;
    }
    puts(ch);
return 0;
} 
```

该程序非常适合打印长度（在指针部分）和更改大小写（在数组部分）。问题是指针的大小写转换。我的印象是 LINE#1 将存储在指针“ptr”处的值增加了所需的数字（ 32 ）。但是屏幕上什么也没有发生。为什么会这样？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:14:30.787

您将 ptr 增加到循环中字符串的末尾，然后使用 ptr 打印出字符串 - 它位于字符串的末尾，因此您什么也得不到。将其更改为 puts(ch)，我认为它会起作用。哦，是的 - 我想你想要 -= 而不是 += 用于小写到大写的转换。

顺便说一句，在递增之前，您可能需要确保字符在正确的输入范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:15:27.833

一个指针指向一个内存地址。您需要读取地址处的字符，而不是地址本身。当然，如果更改通过指针创建的 char 变量的大小写，则会更改内存中的实际字符。如果这不是您想要的，您需要创建一个临时字符数组或字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:26:09.873

看看你的循环：

```
while(*ptr!='\0')
{
    ...
    ptr++;
    ...
}
puts(ptr); 
```

您已经递增`ptr`，直到它的值是 nul 终止符的地址！所以你打印的只是一个空字符串。

`ptr`相反，在循环之前存储某处的初始值：

```
char *initial_ptr;
...
initial_ptr = ptr;
while(*ptr!='\0')
{
    ...
    ptr++;
    ...
}
puts(initial_ptr); 
```

# ios - UIPageControl 外部点在选择时不响应（内部点会）

> ID：14325871
> 
> 赞同：0
> 
> 时间：2013-01-14T20:11:08.873
> 
> 标签：ios, uiviewcontroller, ibaction, uipagecontrol

对于我的 iPad 应用程序，我有一个`ViewController`包含两个`UIScrollview`s 和一个`UIPageControl`. 这很好用，除非我在 中的默认页面超过三个`UIPageControl`，在这种情况下，我使用调用在我的 VC 中手动设置页数：

```
[self.pageControl setNumberOfPages:totalPages]; 
```

在`pageControl`设置为 10 页（即超过默认的 3 页）的情况下，3 个中间点之外的点不响应（即，当用户手动选择任何中间三个外的点）

看图片：

任何有关如何解决此问题的帮助将不胜感激。我应该尝试`addTarget`代码中的“changePage”功能吗？（目前目标动作在IB中设置）

谢谢！

![在此处输入图像描述](../Images/b3689807138331c173c54867a4378ee8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:42:06.707

我解决了这个问题。诀窍是将 IB 中的 UIPageControl 调整为预期宽度（我在 IB Size Inspector 中进行了此操作）。我现在看到即使选择最末端的点也会调用 changePage 函数。

# r - 转置数据的 PCA

> ID：14325880
> 
> 赞同：1
> 
> 时间：2013-01-14T20:12:08.717
> 
> 标签：r, pca

我正在使用 R 进行一些 PCA 分析。一切都很好，直到我想到我应该处理我的数据集的转置。但是，当我尝试对转置数据集进行 PCA 时，我无法解决！

```
> sum(is.na(data_t))
[1] 1367
> dim(data_t)
[1]  599 9505
> data_t[1:4,1:4]
                             2'-PDE    7A5      A1BG     A2M
TCGA.A1.A0SD.01A.11R.A115.07  0.0153750 2.4105 0.9493333 0.24200
TCGA.A1.A0SE.01A.11R.A084.07  0.4669375 0.3635 0.2798333 1.03850
TCGA.A1.A0SH.01A.11R.A084.07 -0.0295625 1.8550 0.7486667 1.16050
TCGA.A1.A0SJ.01A.11R.A084.07  0.7919375 1.4080 0.7500000 1.67775

> pca2<-princomp(~.,data=data_t, na.action=na.omit)
 Error in `[.data.frame`(mf, , x) : undefined columns selected

> pca2<-princomp(data_t, na.action=na.omit)
 Error in princomp.default(data_t, na.action = na.omit) : 
  'princomp' can only be used with more units than variables 
```

事实证明，如果变量多于单位，则不能使用 princomp。但是您可以使用 prcomp （请参阅[R - 'princomp' 只能用于比变量更多的单位](https://stackoverflow.com/questions/5686940/r-princomp-can-only-be-used-with-more-units-than-variables)）但我仍然会遇到错误！

```
> pca2<-prcomp(data_t,na.action=na.omit)
 Error in svd(x, nu = 0) : infinite or missing values in 'x'

> pca2<-prcomp(~ ., data=data_t, na.action=na.omit, scale=TRUE)
 Error in `[.data.frame`(mf, , x) : undefined columns selected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:58:56.217

当缺少数据并且您尝试使用包含所有变量的公式时，R 似乎不喜欢它。所以这最终起作用了：

```
pca2<-prcomp(na.omit(data_t), scale=TRUE) 
```

当然，这会忽略那些缺少数据的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-18T13:42:27.807

我有同样的问题。对我来说，当我将列名（数字除外）分配给我的`data.frame`. 例如，when `colnames(mydf)`was `(1,2,3,4,5)`，我收到此错误：

```
Error in [.data.frame(mf, , x) : undefined columns selected 
```

我所做的是：

```
colnames(mydf) <- paste("var", 1:5, sep="") 
```

然后运行`princomp`函数：

```
mypca <- princomp(~. , data=myrdf, cor=F, na.action=na.exclude) 
```

并且没有问题。

# html - HTML 控件垂直对齐

> ID：14325881
> 
> 赞同：2
> 
> 时间：2013-01-14T20:12:09.630
> 
> 标签：html, css, vertical-alignment

我在表格单元格的 ont 行中放置了输入和 2 个按钮。我想将它垂直对齐到控制中心。使其高度相同也是可以接受的，并且它的顶部和底部边界应该在一条线上。

实际上按钮放置在输入的下方。

HTML：

```
<td>
  <input type="text" />
  <button>save</button>
  <button>cancel</button>
</td> 
```

CSS：

```
td input[type="text"]
{
  height: 18px
  margin: 0px
  padding: 0px
  border: none width: 50px;
}
td button
{
  height: 18px;
  ?????
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:15:59.753

```
td input[type='text'], td button{
  vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:25:22.223

如果你的意思是垂直对齐元素而不是添加这个：

```
button, input { display:block; } 
```

或者，如果您想垂直对齐其中的内容，请添加以下内容：

```
button, input { display: inline-block; vertical-align: middle;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:21:03.580

vertical-align 将在 Inline-Block 元素中工作：

```
td{
  vertical-align: middle;
} 
```

# javascript - 图像生成器插件

> ID：14325887
> 
> 赞同：6
> 
> 时间：2013-01-14T20:12:21.147
> 
> 标签：javascript, jquery, image, html

我正在搜索可以生成**表示****DIV**内部内容的图像的 Javascript（如果可能，则为 JQuery）插件。

示例：此链接显示包含 3 x 3 框显示的图像。
![布局理念](../Images/8aea1cb8a74353291b6b1564fd2cf096.png)

我想要的是这些框可以包含**自动生成的图片**，显示特定 DIV 的内容是什么样的。

有这样的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:20:01.963

我不认为 Javascript 可以从头开始创建图像，但肯定可以在服务器上创建图像并使用 JS 对其进行 AJAX 调用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:29:28.180

如果屏幕上没有太多内容，这似乎是一个简单的选择

[html2canvas](http://html2canvas.hertzen.com/screenshots.html)

1.  有据可查
2.  测试良好
3.  但它不适用于所有元素
4.  它不适用于所有属性

但是，如果您只想截取页面的屏幕截图，这是解决方案（您知道可能的属性和元素）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T16:11:54.660

您可以使用“webkit to image”wkhtmltoimage：[https](https://code.google.com/p/wkhtmltopdf/) ://code.google.com/p/wkhtmltopdf/我用它从 javascript 图形和表格等生成图像。任何 html 都可以。它不是纯粹的 javascript，但您可以将 html div（和相关的 css）发送到 wkhtmltoimage 并通过 ajax 取回图像。

# django - django south：通往 django 的路径问题

> ID：14325900
> 
> 赞同：1
> 
> 时间：2013-01-14T20:13:08.067
> 
> 标签：django, django-south

当我尝试使用南时，问题会导致此错误：

```
$ python manage.py schemamigration
You must provide an app to create a migration for.
$ python manage.py schemamigration myapp --initial
OSError: [Errno 13] Permission denied: '../myapp/migrations'
$ sudo python manage.py schemamigration myapp --initial
ImportError: No module named django.core.management
$ python
>>> import south
>>> import django.core.management
>>> south.__file__
'/home/mydev/venv/lib/python2.7/site-packages/south/__init__.pyc'
>>> django.__file__
'/home/mydev/venv/lib/python2.7/site-packages/django/__init__.pyc' 
```

在我看来，这会`manage.py schemamigration`生成一条似乎由`schemamigration`. 但是`schemamigration`，其他南方命令一旦被调用就无法找到 django。

`'/home/mydev/venv/lib/python2.7/site-packages/'`在我的 sys.path 上。该`/south`文件夹是文件夹中实际南包的 sim 链接`/dist-packages`。我确实在实际`/south`文件夹中放了一个 sim 链接回到 django 包，但这并没有解决任何问题。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:10:56.180

问题是由于 virtualenv 的权限和使用。您收到“权限被拒绝”错误，因为您当前的用户没有此项目的写入权限。

您可以更改整个项目的权限，并使您成为当前用户作为项目中所有文件和文件夹的所有者

```
sudo chown -R <username>:<username> <project_folder> 
```

当您尝试使用 sudo 运行迁移时，它无法找到 django 包，因为它位于已由普通用户激活的 virtualenv 中。我想这些步骤应该可以解决这个问题，以防您不想更改权限。

```
sudo -i
source /<virtualenv_path>/bin/activate 
```

这应该为 sudo 激活 virtualenv，现在您将能够访问 virtualenv 中的所有包

我认为您应该采用权限方式

# javascript - 在 Galleria 中关闭缩放

> ID：14325901
> 
> 赞同：0
> 
> 时间：2013-01-14T20:13:10.917
> 
> 标签：javascript, jquery, client-side, galleria

当[Galleria](http://galleria.io)处于全屏模式时，我希望它以像素为单位显示图像，即完全没有缩放。

我最初的计划是通过以下两种方式来做到这一点：

*   使用`fullscreenCrop: false`，因为[文档](http://galleria.io/docs/options/)说，“ **false**将按比例缩小以使整个图像适合”，并且
*   确保（我已经有这样做的机制）[“大”图像文件](http://galleria.io/docs/references/data/)的：
    *   高度 (px) ≦ 屏幕高度 (px) 和
    *   宽度（px）≦屏幕的宽度（px）。

很遗憾：

*   文档忽略了注意“ **false**也会按比例*放大*以使整个图像适合”（即，如果*图像的高度（px）<屏幕的高度（px）* **和** *图像的宽度（px）<屏幕的宽度（px）*） ， 和
*   我没有，也不想拥有一种机制来确保“大”图像文件的
    *   高度 (px) = 屏幕高度 (px) 或
    *   宽度 (px) = 屏幕宽度 (px)。

鉴于这一切，请您建议我如何实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:15:33.967

您可以通过添加以下两个选项来防止缩放：

```
maxScaleRatio: 1
minScaleRatio: 1 
```

您可能只需要第一个来防止高档。但是第二个也可以防止缩小规模。阅读更多： http: [//galleria.io/docs/options/maxScaleRatio/](http://galleria.io/docs/options/maxScaleRatio/)

# servlets - Apache Shiro Guice Servlet 为 AUTHC 过滤器配置 redirectUrl

> ID：14325902
> 
> 赞同：0
> 
> 时间：2013-01-14T20:13:18.263
> 
> 标签：servlets, guice, servlet-filters, shiro, guice-servlet

如何为 Shiro 提供的 AUTHC 过滤器配置重定向 URL？我知道如何在 INI 文件中配置它，但我需要知道如何在我的 ShiroWebModule 扩展中配置它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:58:13.133

根据[此处](http://shiro.apache.org/guice.html#Guice-Properties)的文档，我将首先尝试以下操作：

```
bindConstant().annotatedWith(Names.named("shiro.successUrl")).to("/myHomePage.jsp"); 
```

# date - 来自键盘的powershell日期

> ID：14325905
> 
> 赞同：1
> 
> 时间：2013-01-14T20:13:27.547
> 
> 标签：date, powershell, formatting, numbers

我有一个脚本，可以将文件重命名为用户在键盘上输入的日期——这很简单，只需要输入月份、日期和年份。只要用户输入 2 位数的值，它就可以很好地工作......问题是有时用户没有输入前导 0，然后整个事情就崩溃了。如何确保包含前导 0？到目前为止，这是我所拥有的：

```
 $BatchDay = $(read-host "Enter Day of Month")
    if ($BatchDay -eq ''){$BatchDay = Get-Date -format dd}
    $BatchMonth = $(read-host "Enter Month of Year")
    if ($BatchMonth -eq ''){$BatchMonth = Get-Date -format MM}
    $BatchYear = $(read-host "Enter Year")
    if ($BatchYear -eq ''){$BatchYear = Get-Date -format yy} 
```

然后它连接数字来构建文件名：

```
 $Filename = "Customer--$BatchMonth-$BatchDay-$BatchYear($BatchNum).txt" 
```

即使天数和月份只有一位数，如何强制变量为两位数？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:32:16.837

您可以创建格式化 vars 的文件名：

```
$a = ("{0:00}-{1:00}" -f 1,2) 
```

给

```
01-02 
```

在你的情况下：

```
$Filename = ("Customer--{0:00}-{1:00}-{2:00}({3:00}).txt" -f $BatchMonth,$BatchDay,$BatchYear,$BatchNum) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:34:09.233

试试这个：

```
$Filename = 'Customer--{0:00}-{1:00}-{2:00}({3}).txt' -f $BatchMonth, $BatchDay, $BatchYear, $BatchNum 
```

# android - Android项目依赖管理状态

> ID：14325906
> 
> 赞同：19
> 
> 时间：2013-01-14T20:13:27.607
> 
> 标签：android, android-maven-plugin

我们正在为 Android 开发标准化我们的基础架构，并且我们正在尝试将依赖项管理合并到我们的 Android 库项目中。我目前的曲目是使用带有[m2e-android](http://rgladwell.github.com/m2e-android/)的 maven android 插件。[我们已使用Android SDK Deployer](https://github.com/mosabua/maven-android-sdk-deployer)将 Android 工件上传到我们的 Artifactory 存储库。我们还有一个内部框架，其中包含一些我们可以导入到我们的项目中的库，并且在大多数情况下它工作正常。

我们现在面临的问题是包含资源文件的 apklib 依赖项很难设置。maven 插件可以正确配置类路径，但是如果 apklib 有需要被父 Android 项目引用的资源文件，Eclipse 无法找到它们，除非您检出 Library Project 并通过 ADT 将其链接到父项目。

在阅读 m2e-android 关于问题的讨论后[https://github.com/rgladwell/m2e-android/issues/8](https://github.com/rgladwell/m2e-android/issues/8) , [https://stackoverflow.com/questions/6269816/creating-closed-source-android-libraries#answer- 6270768](https://stackoverflow.com/questions/6269816/creating-closed-source-android-libraries#answer-6270768)并且[APKLIB 没有安装在 Maven Repo](https://stackoverflow.com/questions/8831481/apklib-does-not-get-installed-in-maven-repo)中，在 ADT 正确支持闭源 apk 库之前，我不相信 maven 是要走的路。

我想知道您如何处理对 Android 项目的这些依赖项。除了使用Maven还有什么策略？

作为参考，这是我们迄今为止所尝试的。

1.  没有依赖管理。所有需要的 jars 都存储在 lib 文件夹中并推送到源代码控制 repo。库项目设置为子文件夹，并推送到它们所使用的每个项目的源代码控制存储库。Eclipse 项目设置也被推送。使用标准 ADT Ant 脚本构建的项目。
2.  将 Jar 依赖项放入 libs 文件夹，并将库依赖项作为 git 子模块。使用标准 ADT Ant 脚本构建的项目。
3.  使用 maven 进行依赖管理，包括使用 apklib 打包的库项目。apklibs 中的资源文件存在问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T12:44:52.210

您可以在此视频中深入了解 Facebook Android 开发人员如何解决他们的依赖问题：[Facebook 如何为 Android 构建 Facebook](http://youtu.be/CdNw6mRpsDI)。

他们为此使用巴克。[Buck 是一个用于 Android 的构建系统，](http://facebook.github.io/buck/)它鼓励创建由代码和资源组成的小型、可重用模块。[巴克在 github](https://github.com/facebook/buck)

这可能不是您的最佳解决方案，但可能对其他人而言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-11T19:00:52.557

随着 Android Studio 和 Gradle 的出现，我们不再面临项目依赖问题；安卓或其他。

Gradle 支持 jar 或 apklib 格式的 Maven 依赖项。流行的库已导出为 apklib (aar) 格式并通过 Maven 提供。

# javascript - 使用 Selenium Webdriver 获取定期更新的内容

> ID：14325907
> 
> 赞同：6
> 
> 时间：2013-01-14T20:13:27.793
> 
> 标签：javascript, python, selenium, webdriver, selenium-webdriver

例如，聊天网站[Omegle](http://www.omegle.com)总是在其主页上显示当前在线用户数量，我可以使用`HTMLUnit`Selenium 中的无头 Webdriver 使用这个 python 脚本来提取：

```
from selenium import webdriver    
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)
driver.get('http://www.omegle.com/')
element = driver.find_element_by_id("onlinecount")
print element.text.split()[0] 
```

输出如下：

```
22,183 
```

这个数字是由脚本动态生成和定期更新的，我想每隔一段时间就读取这个动态更新的内容，而不用重复加载整个页面`driver.get`。什么 Selenium Webdriver 方法或功能可以让我这样做？

[这篇文章](http://adam.goucher.ca/?p=1401)似乎是一个相关的线索，尽管它让我无处可去。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T21:22:09.883

这是未经测试的，但我认为以下可能有效：

```
from selenium import webdriver    
from time import sleep
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)
driver.get('http://www.omegle.com/')
interval = 10  #or whatever interval you want
while True:
    element = driver.find_element_by_id("onlinecount")
    print element.text.split()[0]
    sleep(interval) 
```

我认为如果您在更改后找到该元素，它将为您提供新的价值。

# xml - Oracle 中的 XML 层次结构与另一个表中的父节点

> ID：14325908
> 
> 赞同：2
> 
> 时间：2013-01-14T20:13:44.563
> 
> 标签：xml, oracle, oracle11g, hierarchy

我有以下表格：

```
CREATE TABLE DBO.FACT_SERVICES (
    SVC_ID              INTEGER             NOT NULL,
    SVC_NAME            VARCHAR(50)         NOT NULL,
    SVC_DESC            VARCHAR(2000)       NULL,
    STATUS              VARCHAR(50)         NULL
);

CREATE TABLE DBO.FACT_TYPES (
    FACT_ID             INTEGER             NOT NULL,
    FACT_NAME           VARCHAR(100)        NOT NULL,
    FACT_DESC           VARCHAR(2000)       NULL,
    PARENT_FACT_ID      INTEGER             NULL,
);

CREATE TABLE DBO.FACT_TYPE_SVC (
    FACT_ID             INTEGER             NOT NULL,
    SVC_ID              INTEGER             NOT NULL,
    STATUS              VARCHAR(50)         NULL
); 
```

我创建了以下查询来获取 XML 层次结构：

```
SELECT
  XMLElement("services", 
    XMLAgg(
      XMLElement("service",
        XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
        XMLElement("facts",
          (SELECT
          XMLAgg(
            XMLElement("fact", 
              XMLAttributes(FT.FACT_ID as "id", FT.FACT_NAME AS "name"),
              (SELECT
                XMLAgg(
                  XMLElement("fact",   
                    XMLAttributes(FT2.FACT_ID as "id", FT2.FACT_NAME as "name")
                  )
                )
                FROM
                  DBO.FACT_TYPES FT2 
                WHERE
                  FT2.PARENT_FACT_ID = FT.FACT_ID
              )                             
            )
          )
          FROM
            DBO.FACT_TYPES FT 
            INNER JOIN DBO.FACT_TYPE_SVC FTS ON FTS.FACT_ID = FT.FACT_ID
          WHERE
            FTS.SVC_ID = SVC.SVC_ID AND
            LOWER(FTS.STATUS) = 'active' AND
            PARENT_FACT_ID IS NULL
          )
        )
      )
    )
  )
FROM
  DBO.FACT_SERVICES SVC 
```

这将创建以下 XML：

```
<services>
    <service id="1" name="ABC Plan">
        <facts>
            <fact id="77" name="Basic Service">
                <fact id="71" name="Form XYZ Schedules"></fact>
                <fact id="101" name="Per Participant Fee"></fact>
                <fact id="103" name="Base Fee"></fact>
            </fact>
        </facts>
    </service>
</services> 
```

但是，我想编写查询，以便我可以拥有 FACT_TYPE 的无限子级。我正在使用 Oracle 中的 dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy()) 函数，但我似乎无法让它与服务部分一起使用。我可以让它直接从 DBO.FACT_TYPES 表中工作，如下所示：

```
SELECT 
  XMLElement("facts",
  (select dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy('
        select level, 
                XMLElement("fact", 
                  XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
                )
        from
          dbo.fact_types ft
        start with parent_fact_id is null
        connect by prior fact_id = parent_fact_id
        order siblings by fact_name
  ')) from SYS.DUAL
  )
)AS XML_DATA 
FROM
  SYS.DUAL 
```

返回：

```
<facts>
    <fact id="77" name="Basic Administrative Service">
        <fact id="103" name="Base Fee"/>
        <fact id="71" name="Form 5500+ Schedules"/>
        <fact id="101" name="Per Participant Fee"/>
    </fact>
</facts> 
```

因此，我尝试创建一个传入服务 ID 的函数，它返回应该进入服务层次结构的内部 XML：

**功能**

```
create or replace
FUNCTION     dbo.FACT_GET_FACTS_XML(SERVICE_ID INT) 
RETURN XMLTYPE AS
INNER_SELECT DBMS_XMLGEN.ctxhandle;
MY_RESULT XMLTYPE;
BEGIN
INNER_SELECT := DBMS_XMLGEN.newcontextfromhierarchy(
        'select level, 
            XMLElement("fact", 
              XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
            )
          from
            dbo.fact_types ft
            inner join dbo.fact_type_svc fts on fts.fact_id = ft.fact_id
          where 
            fts.svc_id = ' || to_char(SERVICE_ID) || ' 
          start with ft.parent_fact_id is null
          connect by prior ft.fact_id = ft.parent_fact_id
          order siblings by ft.fact_name');

MY_RESULT := DBMS_XMLGEN.getxmltype(INNER_SELECT);
DBMS_XMLGEN.closeContext(INNER_SELECT);

RETURN MY_RESULT;

END; 
```

使用此父查询：

```
SELECT 
  XMLElement("services", 
    XMLAgg(
      XMLElement("service",
        XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
        (SELECT 
          XMLElement("facts",
          DBO.FACT_GET_FACTS_XML(SVC.SVC_ID))
        FROM
          SYS.DUAL)
      )
    )
  )
FROM
  DBO.FACT_SERVICES SVC 
```

现在我得到了这个结果：

```
<services>
    <service id="1" name="ABC Plan">
        <facts>
            <fact id="77" name="Basic Service">
                <fact id="103" name="Base Fee"/>
                <fact id="71" name="Form XYZ Schedules"/>
                <fact id="101" name="Per Participant Fee"/>
                <fact id="103" name="Base Fee"/>
                <fact id="71" name="Form XYZ Schedules"/>
                <fact id="101" name="Per Participant Fee"/>
            </fact>
        </facts>
    </service>
    <service id="4" name="Health Retirement Account">
        <facts>
            <fact id="71" name="Form XYZ Schedules"/>
            <fact id="71" name="Form XYZ Schedules"/>
        </facts>
    </service>
</services> 
```

我想要的 XML 如下：

```
<services>
    <service id="1" name="ABC Plan">
        <facts>
            <fact id="77" name="Basic Service">
                <fact id="71" name="Form XYZ Schedules"></fact>
                <fact id="101" name="Per Participant Fee"></fact>
                <fact id="103" name="Base Fee"></fact>
            </fact>
        </facts>
    </service>
    <service id="4" name="Health Retirement Account">
      <facts></facts>
    </service>
</services> 
```

但是能够将孩子添加到 fact id="71" 并让它显示在下面。

**编辑** 这是我目前在表格中的数据

```
INSERT INTO DBO.FACT_TYPES (FACT_ID, FACT_NAME, FACT_DESC, PARENT_FACT_ID) VALUES (71, 'Form 5500+ Schedules', '', 77);
INSERT INTO DBO.FACT_TYPES (FACT_ID, FACT_NAME, FACT_DESC, PARENT_FACT_ID) VALUES (77, 'Basic Administrative Service', 'Master Group', );
INSERT INTO DBO.FACT_TYPES (FACT_ID, FACT_NAME, FACT_DESC, PARENT_FACT_ID) VALUES (101, 'Per Participant Fee', '', 77);
INSERT INTO DBO.FACT_TYPES (FACT_ID, FACT_NAME, FACT_DESC, PARENT_FACT_ID) VALUES (103, 'Base Fee', '', 77);

INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (77, 1, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (77, 3, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (71, 1, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (71, 3, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (71, 4, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (101, 1, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (101, 3, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (101, 21, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (103, 1, 'ACTIVE');
INSERT INTO DBO.FACT_TYPE_SVC (FACT_ID, SVC_ID, STATUS) VALUES (103, 3, 'ACTIVE');

INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (1, '401(k) Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (4, 'Health Retirement Account', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (5, 'Profit Sharing Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (2, 'Plan Money Purchase', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (3, '403(b) Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (21, 'ESOP Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (22, 'Health Savings Account', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (23, '457 Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (24, 'Simple Plan ', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (25, '503c Plan', '', 'Active');
INSERT INTO DBO.FACT_SERVICES (SVC_ID, SVC_NAME, SVC_DESC, STATUS) VALUES (26, 'Cafeteria Plan', '', 'Active'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:23:09.083

我想你想要的可能就是这个？

```
select XMLElement("services",
           XMLAgg(
             XMLElement("service",
               XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
              XMLElement("facts",
               (select dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy('
                   select level,
                          XMLElement("fact",
                            XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
                          )
                    from fact_types ft
                         inner join fact_type_svc fts
                                 on fts.fact_id = ft.fact_id
                   where fts.SVC_ID = ' || svc.svc_id || '
                   start with ft.parent_fact_id is null
                 connect by prior ft.fact_id = ft.parent_fact_id
                   order siblings by ft.fact_name
                      '))
                 from dual
                )
              )
            )
          )
        ) a
   from fact_services svc; 
```

例如，使用一些示例数据（忽略额外的 transform() 部分..我添加它只是为了强制缩进以提高可读性）：

```
SQL> insert into FACT_TYPES
  2  select 77, 'Basic Service', '', null from dual union all
  3  select 101, 'Per Participant Fee', '', 77 from dual union all
  4  select 103, 'Base Fee', '', 77 from dual union all
  5  select 71, 'Form XYZ Schedules', '', null from dual union all
  6  select 72, 'Form XYZ Schedules 2', '', 71 from dual union all
  7  select 200, 'Test', '', 103 from dual  union all
  8  select 201, 'Another child', '', 200 from dual  union all
  9  select 202, 'FooBar', '', 200 from dual;

8 rows created.

SQL> insert into FACT_SERVICES
  2  select 1, 'ABC Plan', '', 'ACTIVE' from dual union all
  3  select 4, 'Health Retirement Account', '', 'ACTIVE' from dual;

2 rows created.

SQL> insert into FACT_TYPE_SVC
  2  select 77, 1, 'ACTIVE' from dual union all
  3  select 101, 1, 'ACTIVE' from dual union all
  4  select 103, 1, 'ACTIVE' from dual union all
  5  select 200, 1, 'ACTIVE' from dual union all
  6  select 201, 1, 'ACTIVE' from dual union all
  7  select 202, 1, 'ACTIVE' from dual union all
  8  select 71, 4, 'ACTIVE' from dual union all
  9  select 72, 4, 'ACTIVE' from dual;

8 rows created.

SQL> commit;

Commit complete.

SQL> select XMLElement("services",
  2             XMLAgg(
  3               XMLElement("service",
  4                 XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
  5                XMLElement("facts",
  6                 (select dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy('
  7                     select level,
  8                            XMLElement("fact",
  9                              XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
 10                            )
 11                      from fact_types ft
 12                           inner join fact_type_svc fts
 13                                   on fts.fact_id = ft.fact_id
 14                     where fts.SVC_ID = ' || svc.svc_id || '
 15                     start with ft.parent_fact_id is null
 16                   connect by prior ft.fact_id = ft.parent_fact_id
 17                     order siblings by ft.fact_name
 18                        '))
 19                   from dual
 20                  )
 21                )
 22              )
 23            )
 24          ).transform(xmltype('<xsl:stylesheet version="1.0"
 25   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 26   <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
 27   <xsl:template match="node()|@*">
 28    <xsl:copy>
 29     <xsl:apply-templates select="node()|@*"/>
 30    </xsl:copy>
 31   </xsl:template>
 32  </xsl:stylesheet>')) a
 33     from fact_services svc;

A
--------------------------------------------------------------------------------

<services>
 <service id="1" name="ABC Plan">
  <facts>
   <fact id="77" name="Basic Service">
    <fact id="103" name="Base Fee">
     <fact id="200" name="Test">
      <fact id="201" name="Another child">
      </fact>
      <fact id="202" name="FooBar">
      </fact>
     </fact>
    </fact>
    <fact id="101" name="Per Participant Fee">
    </fact>
   </fact>
  </facts>
 </service>
 <service id="4" name="Health Retirement Account">
  <facts>
   <fact id="71" name="Form XYZ Schedules">
    <fact id="72" name="Form XYZ Schedules 2">
    </fact>
   </fact>
  </facts>
 </service>
</services> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:02:04.410

在您提供的查询中：

```
select 
    XMLElement("services",
        XMLAgg(
            XMLElement("service",
                XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
                XMLElement("facts",
                    (select dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy('
                        select level,
                            XMLElement("fact",
                                XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
                            )
                        from 
                            dbo.fact_types ft
                            inner join dbo.fact_type_svc fts on fts.fact_id = ft.fact_id
                        where 
                            fts.SVC_ID = ' || svc.svc_id || '
                        start with ft.parent_fact_id is null
                        connect by prior ft.fact_id = ft.parent_fact_id
                        order siblings by ft.fact_name
                    ')) from sys.dual
                    )
                )
            )
        )
    ) a
from 
    dbo.fact_services svc; 
```

我得到以下结果：

```
<services>
    <service id="1" name="401(k) Plan">
        <facts>
            <fact id="77" name="Basic Administrative Service">
                <fact id="103" name="Base Fee" />
                <fact id="71" name="Form 5500+ Schedules" />
                <fact id="101" name="Per Participant Fee" />
                <fact id="103" name="Base Fee" />
                <fact id="71" name="Form 5500+ Schedules" />
                <fact id="101" name="Per Participant Fee" />
            </fact>
        </facts>
    </service>
    <service id="4" name="Health Retirement Account">
        <facts>
            <fact id="71" name="Form 5500+ Schedules" />
            <fact id="71" name="Form 5500+ Schedules" />
        </facts>
    </service>
    <service id="5" name="Profit Sharing Plan ">
        <facts />
    </service>
    <service id="2" name="Plan Money Purchase">
        <facts />
    </service>
    <service id="3" name="403(b) Plan">
        <facts>
            <fact id="103" name="Base Fee" />
            <fact id="71" name="Form 5500+ Schedules" />
            <fact id="101" name="Per Participant Fee" />
            <fact id="77" name="Basic Administrative Service">
                <fact id="103" name="Base Fee" />
                <fact id="71" name="Form 5500+ Schedules" />
                <fact id="101" name="Per Participant Fee" />
            </fact>
        </facts>
    </service>
    <service id="21" name="ESOP Plan ">
        <facts>
            <fact id="101" name="Per Participant Fee" />
            <fact id="101" name="Per Participant Fee" />
        </facts>
    </service>
    <service id="22" name="Health Savings Account">
        <facts />
    </service>
    <service id="23" name="457 Plan ">
        <facts />
    </service>
    <service id="24" name="Simple Plan ">
        <facts />
    </service>
    <service id="25" name="503c Plan">
        <facts />
    </service>
    <service id="26" name="Cafeteria Plan ">
        <facts />
    </service>
</services> 
```

但是如果我将移动`svc.svc_id`到：`where``inner join`

```
select 
    XMLElement("services",
        XMLAgg(
            XMLElement("service",
                XMLAttributes(svc.svc_id as "id", svc.svc_name as "name"),
                XMLElement("facts",
                    (select dbms_xmlgen.getXmlType(dbms_xmlgen.newContextFromHierarchy('
                        select level,
                            XMLElement("fact",
                                XMLAttributes(ft.fact_id as "id", ft.fact_name as "name")
                            )
                        from 
                            dbo.fact_types ft
                            inner join dbo.fact_type_svc fts on fts.fact_id = ft.fact_id AND fts.SVC_ID = ' || svc.svc_id || '
                        start with ft.parent_fact_id is null
                        connect by prior ft.fact_id = ft.parent_fact_id
                        order siblings by ft.fact_name
                    ')) from sys.dual
                    )
                )
            )
        )
    ) a
from 
    dbo.fact_services svc; 
```

我得到了正确的 XML 结构：

```
<services>
    <service id="1" name="401(k) Plan">
        <facts>
            <fact id="77" name="Basic Administrative Service">
                <fact id="103" name="Base Fee" />
                <fact id="71" name="Form 5500+ Schedules" />
                <fact id="101" name="Per Participant Fee" />
            </fact>
        </facts>
    </service>
    <service id="4" name="Health Retirement Account">
        <facts />
    </service>
    <service id="5" name="Profit Sharing Plan ">
        <facts />
    </service>
    <service id="2" name="Plan Money Purchase">
        <facts />
    </service>
    <service id="3" name="403(b) Plan">
        <facts>
            <fact id="77" name="Basic Administrative Service">
                <fact id="103" name="Base Fee" />
                <fact id="71" name="Form 5500+ Schedules" />
                <fact id="101" name="Per Participant Fee" />
            </fact>
        </facts>
    </service>
    <service id="21" name="ESOP Plan ">
        <facts />
    </service>
    <service id="22" name="Health Savings Account">
        <facts />
    </service>
    <service id="23" name="457 Plan ">
        <facts />
    </service>
    <service id="24" name="Simple Plan ">
        <facts />
    </service>
    <service id="25" name="503c Plan">
        <facts />
    </service>
    <service id="26" name="Cafeteria Plan ">
        <facts />
    </service>
</services> 
```

就像 Oracle 在处理完第一个层次结构后忽略了 where 条件。谢谢您的帮助。

# php - 使用 PHP 从 JSON 中提取数据

> ID：14325914
> 
> 赞同：0
> 
> 时间：2013-01-14T20:14:33.787
> 
> 标签：php, json

我正在尝试解析来自 wunderground JSON 的一些数据，而不使用 foreach 循环，仅在第一天。此 JSON 的示例：http: [//api.wunderground.com/api/f429b85619ed45e8/geolookup/conditions/forecast/q/Australia/Sydney.json](http://api.wunderground.com/api/f429b85619ed45e8/geolookup/conditions/forecast/q/Australia/Sydney.json)

我只想得到第一天：

```
$json_string = file_get_contents('http://api.wunderground.com/api/f429b85619ed45e8/geolookup/conditions/forecast/q/Australia/Sydney.json');
$parsed_json = json_decode($json_string);
$weekday = $parsed_json->{'forecast'}->{'simpleforecast'}->{'forecastday[0]'}->{'date'}->weekday; 
```

我搜索了很多并尝试了很多示例，但通常我得到错误或什么都没有。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:23:51.907

你走在正确的轨道上。只是你需要在forecastday获取对象后对数组元素进行求值

```
 <?php
    $json_string = file_get_contents('http://api.wunderground.com/api/f429b85619ed45e8/geolookup/conditions/forecast/q/Australia/Sydney.json');
    $parsed_json = json_decode($json_string);
    echo $weekday = $parsed_json->{'forecast'}->{'simpleforecast'}->{'forecastday'}[0]->{'date'}->weekday;
    ?> 
```

[http://phpfiddle.org/main/code/7ws-pry](http://phpfiddle.org/main/code/7ws-pry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:20:40.930

您错误地访问对象上的方法：

由于我不确定您想要获得什么属性，因此您可以通过以下方式确定变量中的内容：

```
 var_dump($parsed_json->forecast); 
```

（并且那里没有“simpleforcast”）。

# angularjs - AngularJS：两个元素共享同一个控制器 - 如何强制更新另一个元素的视图？

> ID：14325919
> 
> 赞同：0
> 
> 时间：2013-01-14T20:14:50.087
> 
> 标签：angularjs

我的 index.html 看起来像这样：

```
<div id="div1" ng-controller="StartMenu">
  <div id="button1" ng-click="doSomething()"></div>
  {{value}}
</div>
<div id="div2" ng-view></div> 
```

模块配置：

```
angular.module('app').config([$routeProvider, function($routeProvider) {
  $routeProvider.when('/start', {
    templateUrl: 'partials/start.html', controller: StartMenu
  });
}]); 
```

开始.html：

```
<div id="button2" ng-click="doSomething()"></div>
{{value}} 
```

和控制器功能：

```
function StartMenu($scope, globals) {    // service globals defined elsewhere
  $scope.value = globals.value
  $scope.doSomething = function() {
    // Manipulate globals.value
    $scope.value = globals.value;
  }
} 
```

问题： index.html 中的这两个 div 元素共享相同的控制器功能。当我在 #div1 中单击 #button1 时，会调用 doSomething 并更改 $scope.value。更改立即呈现在#div1 和 {{value}} 更改但 #div2 保持不变。我如何“强制”#div2 被渲染并显示 {{value}} 的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:38:48.020

ng-view 创建自己的（子）范围，因此`{{value}}`在 start.html 中创建子范围。此`value`属性隐藏/隐藏父作用域中的同名属性。有几种可能的解决方案：

1.  在 start.html 中使用 {{$parent.value}}
2.  在父 $scope 上使用对象而不是原语——例如，$scope.obj = {value: 2}。然后在孩子中引用它：{{obj.value}}。（好吧，这不适用于您的特定场景，因为父范围中的值已经引用了其他内容。）
3.  在 start.html 中使用一个函数：{{value()}}——在父作用域上定义该函数。

有关范围继承的更多信息，请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)

**更新：**我读的 HTML 太快了...... div2 不包含在 div1 中。这个问题是双重的：

1.  正在创建两个控制器，每个控制器都在`value`自己的范围内创建自己的属性
2.  如果`globals.value`是原语，那么控制器作用域将获取值的副本，而不是引用。

上面的解决方案 2 和 3 适用于此。
2 = 在全局变量上创建一个对象并在控制器范围内引用该对象的属性（即，不要使用原语）。
3 = 使用控制器中的函数来访问全局原始值。两种解决方案的小提琴都在下面的评论中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T07:16:24.313

在这种情况下，您可以将值传递给服务并从服务中获取

```
 // controller
    yourservicename.yourfunction = 'somthing text';

    $scope.getvalue = function() {

        return yourservicename.yourfunction;
    }

     // view

    <div ng-controller="myCtrl" > {{getvalue()}} </div>
    <div ng-controller="myCtrl" > {{getvalue()}} </div> 
```

# sql-server - SSDT 未解析的引用

> ID：14325921
> 
> 赞同：1
> 
> 时间：2013-01-14T20:15:01.067
> 
> 标签：sql-server, sql-server-data-tools

当该数据库具有 SQL Server 中的其他用户包含的角色时，如何正确使用 SSDT 中的数据库？

例如，假设我有一个名为“Shared”的数据库和 120 个其他数据库，它们的 SQL 登录帐户包含在“Shared”中的“LookupName”数据库角色中。

我不介意 SSDT 是否要确保存在“LookupName”数据库角色。但是，我不希望它尝试创建恰好担任该角色的所有 120 个用户！但是如果试图排除它们，我会得到其他错误。

“共享”数据库的结构不受角色中可能有多少用户的影响……这是 DBA 需要能够根据需要进行设置的内容。那么如何确保 SSDT 不将它们包括在比较中呢？

SSDT 比较有 110 多个复选框，用于包含、忽略等内容，但我无法找到我需要的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:35:50.650

原来 SSDT（Sql Server 数据工具）有一个设置按钮，可以让比较排除某些功能。

因此，在“对象类型”/“应用程序 - 范围”下排除“角色成员资格”和“用户”解决了这个问题。

# coldfusion - 我可以用我自己的自定义变量名替换 cfgridkey 吗？或者建立我自己的href？

> ID：14325927
> 
> 赞同：4
> 
> 时间：2013-01-14T20:15:30.393
> 
> 标签：coldfusion, cfgrid

我有一个简单的 cfgrid 显示我的 ID。我希望 id 是指向新页面的链接，传递带有 id 值的“myID”的 url 参数。

我试过这段代码：

```
<cfgrid name="myGrid" query="myQuery" format="html">
   <cfgridcolumn name="myID" href="mynewpage.cfm" />
</cfgrid> 
```

但这会将我带到网址“mynewpage.cfm？**hrefkey** = 111”。我真正想要的是“mynewpage.cfm？myID **=** 111”。有没有办法指定 url 参数的名称应该是什么？

我也试过：

```
<cfgrid name="myGrid" query="myQuery" format="html">
   <cfgridcolumn name="myID" href="mynewpage.cfm?myID=#myID#" />
</cfgrid> 
```

但后来我得到错误“ `myID is not defined`”。有没有办法从 cfgridcolumn 标记中引用查询字段值？

**更新：**

我尝试过的另一件事 - 在 sql 查询中构建字符串，以便我返回一个名为`myURL`“mynewpage.cfm?myID=111”的列，然后将该列用于 href 属性：

```
<cfgrid name="myGrid" query="myQuery" format="html">
   <cfgridcolumn name="myID" href="#myURL#" />
</cfgrid> 
```

根据[coldfusion文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_g-h_04.html)，您应该能够做到这一点：

> href - URL*或查询列名称*，其中包含用于超链接每个网格列的 URL。

（斜体我的）

但我得到错误“ `myURL is not defined`”。如何将 href 设置为列而不是文字 url 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:15:44.683

这类似于使用 href的`<cftree>`/问题。`<cftreeitem>`似乎没有内置的解决方案。您可以处理提供的密钥并使用出站 URL 重写重命名整个地址（IIS 具有本机支持，Apache 可以使用[UrlRewriteFilter](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/3.2/index.html#outbound-rule)执行此操作），或者您可能只是切换到不同的基于 Javascript 的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T16:42:25.463

此页面中有一个解决方案：

[http://www.houseoffusion.com/cfdocs1/Developing_Web_Applications_with_ColdFusion/14_Building_Dynamic_Forms/dwa14_09.htm](http://www.houseoffusion.com/cfdocs1/Developing_Web_Applications_with_ColdFusion/14_Building_Dynamic_Forms/dwa14_09.htm)

使用定义一个新列

```
<cfset queryAddColumn(SPEREQ_QRY_UNFULFILLED, "CUST_LINK", ArrayNew(1)) />

<cfloop query="SPEREQ_QRY_UNFULFILLED">
  <cfset querySetCell(SPEREQ_QRY_UNFULFILLED, "CUST_LINK","index.cfm?action=contact_info&cust_id=#SPEREQ_QRY_UNFULFILLED.CUST_CNTCT_LMS_ID#", SPEREQ_QRY_UNFULFILLED.currentRow) />
</cfloop> 
```

在显示中使用这个新列 cust_link

```
<cfgridcolumn name = "CUST_CNTCT_LMS_ID" header="CustID"  
     href="CUST_LINK" target="_blank" width="20">
<CFGRIDCOLUMN NAME="CUST_LINK" DISPLAY="No"> 
```

# c# - 递归删除类别会引发数据读取器异常

> ID：14325929
> 
> 赞同：2
> 
> 时间：2013-01-14T20:15:37.590
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, asp.net-mvc-4

我有非常基本的类别模型`ID, RootCategoryID, Name`，如果我有很多孩子的类别，它不会删除，所以我需要递归地执行此操作，但是当我这样做时会出错。

我知道如果我添加`MultipleActiveResultSets=true`连接字符串有一种解决方法，但是 AFAIK 这可以从代码中解决，使用此参数不是一个好主意。这是真的？

## 错误

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

## 代码

```
public ActionResult Delete(int id)
{
    this.DeleteRecursive(id);
    _db.SaveChanges();
    return RedirectToAction("index", "category");
}

private void DeleteRecursive(int id)
{
    // Selecting current category
    var currentCategory = _db.Categories.Where(x => x.ID == id).Single(); // this line
    var childrenCategories = _db.Categories.Where(x => x.RootCategory.ID == id);

    // Check if category has children
    if (childrenCategories.Count() > 0)
    {
        // Loop through children and apply same function recrusively
        foreach (var c in childrenCategories)
        {
            this.DeleteRecursive(c.ID);
        }
    }

    // Category has no children left, delete it
    _db.Categories.Remove(currentCategory);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:28:00.173

您正在`DataReader`为`childrenCategories`声明留空。

除了例外，这意味着您要执行两次查询 - 一次获取计数，然后再次获取数据。

这应该可以解决问题：

```
var childrenCategories = _db.Categories
  .Where(x => x.RootCategory.ID == id)
  .ToList()
; 
```

这将执行 SQL 语句并将所有记录具体化为`List`.
所以，你有你的数据在内存中，并且`DataReader`是完整的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:26:58.123

我相信您的问题是您试图在`foreach`循环期间更改排序规则，这是无法完成的。

尝试创建要删除的项目列表，然后用一个将它们全部删除

```
_db.Remove(itemsToRemove). 
```

那会为你做把戏。

# c# - Windows Phone 8 的 SQLite 无法编译

> ID：14325930
> 
> 赞同：6
> 
> 时间：2013-01-14T20:15:39.483
> 
> 标签：c#, visual-studio, sqlite, windows-phone-8

我已经从此[链接下载了 SQLite 的 Visual Studio 2012 的 Windows Phone 8 扩展。](http://www.sqlite.org/download.html)

但是，在编译时，我收到此错误：

> 引用的 SDK“SQLite.WP80, Version=3.7.15.2”不支持正在构建的项目的处理器架构“任何 CPU”。请考虑将项目的目标处理器架构（在 Visual Studio 中，这可以通过配置管理器完成）更改为 SDK 支持的架构之一：“x86，ARM”。FacebookRandomizerWindowsPhone

显然，我已经尝试在 Visual Studio 2012 中更改项目中的平台目标，就像我对我开发的 Windows 8 应用程序所做的那样，它有效。

但是，在 Windows Phone 8 应用程序中，我无法更改 Platform Target，只能更改顶部的平台，这不会更改平台目标：

![视觉工作室](../Images/ccbfea0c8f2a3f4cf4d1c9c6b5f486c6.png)

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T20:26:20.837

去

> 构建 => 配置管理器

并从那里更改设置

首先，您必须通过*配置管理器*设置配置设置，因为您的构建设置使用通过*配置管理器定义的设置*

![在此处输入图像描述](../Images/02b93cb4fd96ee78a220ac900a096e35.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T08:28:34.730

我遇到了同样的问题，但我设法解决了这个问题，在我的 Visual Studio 上，我单击菜单栏上的构建，然后单击配置管理器，然后我将平台从任何 CPU 更改为 x86，如下所示。

[![在此处输入图像描述](../Images/28b0c9a366668ff9667b4966da474c24.png)](https://i.stack.imgur.com/OHh84.png)

# c - 谁在终端中回显字符？

> ID：14325933
> 
> 赞同：2
> 
> 时间：2013-01-14T20:16:00.793
> 
> 标签：c, io, terminal

让我们看看下面的代码：

```
int main(void)
{
             char c;

             while ((c = getchar()) != EOF)
                     putchar(c);

             return (0);
 } 
```

该程序仅在将新行作为字符传递后才回显字符。我尝试使用 read 系统调用直接读取并将 len 作为 1 传递，它仍然只在传递新行时读取。我这里有两个问题：谁实现了这个优化，是内核还是终端/shell？

其次，谁在第一时间回响这些字符，也就是在第一次印刷本身。终端/shell 在该程序的整个执行过程中是否起任何作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:22:54.043

外壳无关紧要。您键入的 tty（假设它不是原始模式，并且启用了回显）在您键入字符时显示字符，但在您键入 enter 之前不会将它们传递给进程。它处理所有退格和编辑等，您的进程永远不会看到这些。当您按 Enter 时，tty 会将输入的行传递给进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:23:15.777

当一个任务正在执行时（例如你的程序），它处于“RUNNING”状态。

当程序请求键盘输入时，内核暂停您的程序并将键盘输入连接到程序内存中的缓冲区（由 IA32 架构中的 LDT 和 GDT 寄存器维护）

键盘数据通过 IVT（中断向量表）中的特定中断函数读取（该表使用 IA32 Arch 中的 IDT 维护）

当遇到新行时（通过按键盘上的 ENTER 键），输入缓冲区关闭，任务从“暂停”状态变为“就绪”状态。

多任务内核几乎没有“时间”来等待用户输入并将其回显到输出。相反，它将键盘连接到缓冲区，然后去执行其他重要任务（例如任务调度）。当程序处于“运行”状态，并且键盘缓冲区被填满时，它会从缓冲区中读取输入，并将其写入输出缓冲区。

然而，Shell 只是一个由内核调度的程序。它不能直接访问键盘，但可以访问内核分配的特定键盘缓冲区。

# sqlite - sqlite3 - 创建游标并执行

> ID：14325935
> 
> 赞同：0
> 
> 时间：2013-01-14T20:16:08.487
> 
> 标签：sqlite

> 你好！SQLite3 的新手
> 
> 有一些示例程序在执行之前创建了“光标”。还有其他不创建光标的程序。
> 
> 问题：我需要创建一个“光标”还是可以省略？
> 
> 下面没有光标的示例：

```
 con = sqlite3.connect(":memory:")

    con.execute("create table person(firstname, lastname)") 
```

> 下面的示例带有游标：

```
 db = sqlite3.connect('test.db')
    db.row_factory = sqlite3.Row
    db.execute('drop table if exists test')
    db.execute('create table test(t1 text, i1 int)')
    db.execute('insert into test (t1, i1) values (?,?)', ('one', 1))
    db.execute('insert into test (t1, i1) values (?,?)', ('two', 2))
    db.commit()
    cursor = db.execute('select * from test order by t1')
    for row in cursor:
        print(dict(row)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:28:44.367

不使用`execute`a`cursor`是一种非标准快捷方式，即，这可能不适用于其他数据库驱动程序。但是，如果您没有`SELECT`在需要输出的地方执行，它就可以正常工作。

# javascript - 添加获取图片地址；在 JavaScript 变量中

> ID：14325940
> 
> 赞同：0
> 
> 时间：2013-01-14T20:16:29.253
> 
> 标签：javascript, jquery

我正在定制一个很棒的插件，允许轻松声明 HTML5 视频的提示点。（它被称为 cuepoint.js）

它带有声明的变量；一旦这些变量被触发/它在屏幕上以标题的形式显示文本。这很好；但我想弄清楚如何在已经编写的代码中调用图像。

我试过挤压 a`getElementbyID`和标准 HTML`img`标记，并得到 a`#div`但它没有呈现。使用相同代码和调用图像的任何指针；与文字相反。

```
$(document).ready(function(){
//Slides object with a time (integer) and a html string
var slides = {
0: "I would like to display an Image here, though",
2: "This is 2 Seconds.",
3: "This is 3 Seconds.",
6: "This is what 6 Seconds looks like.",
10: "This is 10 Seconds.",
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:08:59.267

如果您希望 HTML 显示为幻灯片，只需将该 HTML 添加为字符串。

```
var slides = {
  0: "<img src='http://example.com/image.jpg' />",
  2: "This is 2 Seconds.",
  3: "This is 3 Seconds.",
  6: "This is what 6 Seconds looks like.",
  10: "This is 10 Seconds."
} 
```

# php - PHP 警告：在第 62 行为 foreach() 提供的参数无效？想不通

> ID：14325941
> 
> 赞同：0
> 
> 时间：2013-01-14T20:16:37.740
> 
> 标签：php

我在 wordpress 中有一个 ajax 滑块，它正在生成 Invalid Argument 错误，这似乎源于

```
<li class="portfolio-col-<?php echo $portfolio_column_count++; ?>" data-portfolio="portfolio-<?php echo $post->ID; ?>" data-id="id-<?php echo $idCount++; ?>" data-type="<?php foreach ($portfolio_cats as $taxonomy) { echo 'filter-' . $taxonomy->slug . ' '; } ?>"> 
```

这是第 62 行，形成下面的代码。我无法弄清楚，因此不胜感激。

```
<div class="ajax-portfolio-block-wrap">
    <?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>
                <?php $page_title=get_the_title(); ?>

                <div class="ajax-gallery-navigation">
                    <div id="ajax-portfolio-loading"></div>
                    <a class="ajax-navigation-arrow ajax-prev" href="#">Prev</a>
                    <a class="ajax-navigation-arrow ajax-next" href="#">Next</a>
                </div>
                <div class="ajax-portfolio-window">
                    <div id="ajax-portfolio-wrap"></div>
                </div>

        <?php endwhile; else: ?>
    <?php endif; ?>

    <?php
    $idCount=1;
    $columns=4;
    ?>
    <div class="fullpage-contents-wrap">
        <div class="page-container">
            <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                <h2 class="ajax-projects-title"><?php echo $page_title; ?></h2>
                <div class="portfolio-works-wrap">
                        <ul class="portfolio-filter clearfix">
                        <li class="current all"><a href="#"><?php _e('All','mthemelocal'); ?></a></li>
                        <?php                   
                        $categories=  get_categories('child_of='.$portfolio_cat_ID.'&orderby=slug&taxonomy=types&title_li=');
                        foreach ($categories as $category){ ?>
                        <li class="<?php echo "filter-" . $category->slug;?>"><a href="#"><?php echo $category->name;?></a></li>
                        <?php }?>
                        </ul>
                </div>

                <div class="portfolio-filter-wrap clearfix">
                    <ul class="portfolio-list">
                        <?php
                        $newquery = array(
                            'post_type' => 'mtheme_portfolio',
                            'types' => $portfolio_cat_slug,
                            'orderby' => 'menu_order',
                            'order' => 'ASC',
                            'posts_per_page' => -1,
                            );
                        query_posts($newquery);
                        if (have_posts()) : while (have_posts()) : the_post();
                        $custom = get_post_custom(get_the_ID());
                        $portfolio_cats = get_the_terms( get_the_ID(), 'types' );
                        $video_url="";
                        $thumbnail="";
                        $link_url="";
                        if ( isset($custom["video"][0]) ) { $video_url=$custom["video"][0]; }
                        if ( isset($custom["thumbnail"][0]) ) { $thumbnail=$custom["thumbnail"][0]; }
                        if ( isset($custom["custom_link"][0]) ) { $link_url=$custom["custom_link"][0]; }
                        $portfolio_thumb_header=$custom["portfolio_page_header"][0];

                        if ($portfolio_column_count>$columns) $portfolio_column_count=1;

                        ?>
                       // ** Line 62 ** // <li class="portfolio-col-<?php echo $portfolio_column_count++; ?>" data-portfolio="portfolio-<?php echo $post->ID; ?>" data-id="id-<?php echo $idCount++; ?>" data-type="<?php foreach ($portfolio_cats as $taxonomy) { echo 'filter-' . $taxonomy->slug . ' '; } ?>">
                            <span class="ajax-image-selector"></span>

                            <?php
                            if ( $custom["video"][0]<>"" ) {
                                $p_class="fadethumbnail-play";
                            } elseif ( $custom["custom_link"][0]<>"" ) {
                                $p_class="fadethumbnail-link";
                            } else {
                                $p_class="fadethumbnail-view";
                            }
                            ?>
                                <?php
                                    if ($portfolio_thumb_header=="Slideshow") {
                                        echo '<a class="portfolio-image-link portfolio-ajax" rel="'.$post->ID.'" ref="'.$video_url.'" >';
                                        echo '<span class="column-portfolio-icon portfolio-slideshow-icon"></span>';
                                        } else {                            
                                            if ( $custom["video"][0]<>"" ) { 
                                                echo '<a class="portfolio-image-link portfolio-ajax" rel="'.$post->ID.'" ref="'.$video_url.'" >';
                                                echo '<span class="column-portfolio-icon portfolio-video-icon"></span>';
                                                } elseif ( $custom["custom_link"][0]<>"" ) {

                                                    echo '<a class="portfolio-image-link portfolio-ajax" rel="'.$post->ID.'" ref="'.$custom["custom_link"][0].'" >';
                                                    echo '<span class="column-portfolio-icon portfolio-image-icon"></span>';

                                                } else {
                                                echo '<a class="portfolio-image-link portfolio-ajax" rel="'.$post->ID.'" ref="'.featured_image_link($post->ID).'" >';
                                                echo '<span class="column-portfolio-icon portfolio-image-icon"></span>';
                                            }
                                    }
                                ?>
                                <?php
                                // Show Image
                                if ($thumbnail<>"") {
                                    echo '<img src="'.$thumbnail.'" class="preload-image displayed-image" alt="thumbnail" />';
                                } else {
                                    echo display_post_image (
                                        $post->ID,
                                        $have_image_url=$thumbnail_image_url,
                                        $link=false,
                                        $type="portfolio-small",
                                        $post->post_title,
                                        $class="preload-image displayed-image"
                                    );
                                }
                                ?>
                                <span class="ajax-image-title"><?php the_title(); ?></span>         
                                </a>
                        </li>
                        <?php endwhile; ?>
                        <?php endif;?>

                    </ul>
                </div>
                <?php
                require ( MTHEME_INCLUDES . 'clients.php' );
                ?>
            </div>
        </div>
    </div>
    </div> 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:19:56.377

似乎该函数`get_categories`在下一行中没有返回任何有效的数组。

```
$categories=  get_categories('child_of='.$portfolio_cat_ID.'&orderby=slug&taxonomy=types&title_li='); 
```

因此，`foreach`不能迭代`$categories`

# mongodb - mongoengine查询投影

> ID：14325942
> 
> 赞同：6
> 
> 时间：2013-01-14T20:16:45.353
> 
> 标签：mongodb, pymongo, mongoengine

我想在 mongoengine 原始查询中进行投影，这是我的查询，但它不起作用

```
query  =  {'$or':[{'col1':{'$regex':srch_text}},{'col2':{'$regex':srch_text}},{'col3':{'$regex':srch_text}}]}

projection = {'col4':0}
test= Test.objects(__raw__=(query,projection)) 
```

ps：没有投影它可以工作

```
test= Test.objects(__raw__=(query)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:26:27.287

`__raw__`不采取投影，所以你应该[只](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet.only)结合例如：

```
tests = Test.objects(__raw__=(query)).only('col4') 
```

# foreach - foreach 循环中的计数器不起作用

> ID：14325946
> 
> 赞同：0
> 
> 时间：2013-01-14T20:17:04.010
> 
> 标签：foreach, counter, opencart

我有一个 foreach 循环，我需要编号的类，所以我设置了一个计数器：

```
 <?php
 $counter = 0;
  ?>
  <?php
$html = '';
foreach ($json['feed']['entries'] as $entries){ 
$counter++;
$html .= '<a href="' .$entries['link']. '"><span class="feeddisplay_title">'.$entries['title']. ' </span></a>';
    if($entries['publishedDate'] != '') {
        $html .='<span class="feeddisplay_date">' .$entries['publishedDate'].    '</span>';
    }
    $html .= '<p>' .$entries['contentSnippet']. '</p>';
}
?>
<div class="box feed-<?php echo $counter; ?>">
 <div class="box-heading"><?php echo $heading_title; ?>:</div>
 <div class="box-content">
<div class="feeddisplay"><?php echo $html ?></div>
 </div>
 </div> 
```

我的输出类一遍又一遍地是“feed-1”。它上不去。我尝试了一些变化，但我被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:05:35.340

这是因为您在 foreach 循环之外呼应了 counter 变量。

在调用 $counter 时，counter 的值已经通过 foreach 循环相加，因此您只是显示最终计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:26:25.567

你确定你不希望输出是：

```
<?php
$counter = 0;

$html = '';
foreach ($json['feed']['entries'] as $entries){
    $counter++;
    $html = '<div class="box feed-'.$counter.'">
    <div class="box-heading">'.$heading_title.':</div>
    <div class="box-content">
        <div class="feeddisplay">
            <a href="' .$entries['link']. '">
                <span class="feeddisplay_title">'.$entries['title']. ' </span>
            </a>';
    if($entries['publishedDate'] != '') {
        $html .='<span class="feeddisplay_date">'.$entries['publishedDate'].'</span>';
    }
    $html .= '<p>'.$entries['contentSnippet'].'</p>';
    $html .= '        </div>
    </div>
</div>';
}
?>
<?php echo $html; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:33:10.660

找到了解决方案：

由于这是 opencart，这是 .tpl 文件，计数器不工作的原因是因为有另一个变量试图在 .php 控制器文件上执行相同的功能。我只是呼应了“模块”而不是“计数器”并且它起作用了。

```
 <div class="box feed-<?php echo $module; ?>"> 
```

# java - Java：如果我使用封装在类中的原始数据类型会慢多少？

> ID：14325948
> 
> 赞同：0
> 
> 时间：2013-01-14T20:17:08.220
> 
> 标签：java, c++, porting

我正在翻译 C++ 代码，并且大量使用 typedef。我不能在 Java 中做到这一点，所以我要做的是：

```
// C++
typedef unsigned int BucketKey; 

// Java
public class BucketKey {
    public int val;
} 
```

我不是 Java 专家，实际上是这里的新手，我想知道使用 BucketKey 而不是直接使用 int 会有多贵？

顺便提一下，我需要为至少 5 种以上类型执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:23:15.307

它增加了巨大的开销，特别是如果你有数组。我建议编写一个测试程序进行比较。

在 Java`int[100]`中创建一个包含 100 个整数的数组 - 类似于 C/C++，`Integer[100]`或者创建一个`YourObjectContainingAnIntMember[100]`包含 100 个对 100 个不同对象的引用（指针）的数组。

更不用说`BucketKey`对象将具有引用语义，但`int`具有像 C++ 中的值语义：

```
BucketKey x = new BucketKey(100);
BucketKey y = x
y.value = 200; // x will change as well

int x = 100;
int y = x;
y = 200; // x will remain 100 
```

还值得补充的是，C++ 中的 typedef 也不会创建新类型。所以`BucketKey`变量的类型只是整数——但是Java没有typedef可以调用`int`更多的方法。具有不同类型的 C++ 解决方案将是

```
struct BucketKey {
    value x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:23:43.223

请注意，您的问题与装箱无关：java`int`是原始类型，其装箱版本是`java.lang.Integer`. 您在质疑访问类成员是否比访问原始变量慢。大多数 Java 性能问题基本上没有答案：存在差异，但这种差异取决于许多因素，包括：

*   硬件架构
*   爪哇版
*   操作系统

但是，除非您进行高频交易，否则如果您正确地构建程序以尊重封装，那么与生产力的巨大提高相比，性能影响将是完全可以接受的不利因素。

* * *

如果你真的有这样的性能问题并且你考虑在 JVM 上工作，你应该寻找比 Java 更现代的编程语言。

事实上，JVM 不支持 Value 类。然而，Scala 有：

[http://docs.scala-lang.org/overviews/core/value-classes.html](http://docs.scala-lang.org/overviews/core/value-classes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:27:24.130

如果可能，请使用原始 int 。装箱/拆箱的惩罚并不高，但您应该确定这一点。在任何情况下，您的示例中看起来都不是装箱/拆箱。您正在做出原始与对象的决定。

无论如何，除非您正在制作实时系统或类似的东西，否则您不必为此担心太多。

我同意彼得劳里的观点。使用视觉 vm 来识别瓶颈。我也为此写了一个简短的教程[[来源]](http://dhruvgairola.blogspot.ca/2012/11/profiling-with-visualvm.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:30:06.963

它产生的差异取决于您使用它的程度。如果您每秒使用一百万次。它不会有太大的不同。如果您每秒使用 1000 万次，您会注意到它，如果您每秒使用 1 亿次，则原语会快很多倍。

您应该编写一个简单、清晰的工作程序，然后才对其进行分析（例如使用 VisualVM）以找到瓶颈。您的瓶颈很可能出现在您无法预料的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T20:42:35.923

使用拳击课程有合法要求。

例如，在参数中使用框而不是原语允许 JAX-B 在参数为空时避免在 XML 元素中包含属性。那是为了防止

```
<employee name='Henry' id=null years=null /> 
```

但应该是

```
<employee name='Henry' /> 
```

因此，如果出现这样的需求，不妨使用盒装实例。

我在 Java 编译器方面没有专业知识，但我希望编译器已经完成了优化。我的心理实验似乎表明这将是一种预期且相对简单的优化。

我的想法是，只要 Java 编译器无论如何都会优化装箱，那么在某些时候，您无论如何都需要尝试实例化装箱的实例。为什么不早点去享受它的所有功能和设施呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T20:20:46.123

有一点架空装箱和拆箱值。话虽如此，与“典型”程序中的其余处理相比，开销通常可以忽略不计。

我建议使用最坏情况（就密钥访问次数而言）用例构建测试，如果您认为拥有灵活的密钥类型有一些价值，则以两种方式衡量性能。

如果您实际上不需要灵活地更改密钥类型，只需使用*int*即可。

# javascript - Jquery 条形图动态加载并获取工具提示

> ID：14325952
> 
> 赞同：0
> 
> 时间：2013-01-14T20:17:15.083
> 
> 标签：javascript, jquery, html, bar-chart

我正在网上搜索，但无法获得可以满足我要求的插件。

我进行 AJAX 调用并取回三个数组。比如说：

```
 Name[0] = "ravi"
 Name[1] = "john"
 Name[2] = "robert"

 Expense[0] = "100$"
 Expense[1] = "50$"
 Expense[2] = "120$"

 Comment[0] = "You are Spending Properly"
 Comment[1] = "You can spend more"
 Comment[2] = " you are spening too much" 
```

现在，`Name`在 y 轴和 x 轴上，我可以使用许多插件获得条形图。我的问题是当有人悬停在任何条上时，相应的评论应该出现。我能够在工具提示中显示的最大值是名称和费用的组合。是否有任何支持此功能的插件，我可以在其中添加评论作为工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:28:14.593

您可以使用 powerTip。您可能需要对 js 进行更改。但这会有所帮助。按照此处提到的步骤操作：[jquery powertip](http://stevenbenner.github.com/jquery-powertip/)

# c++ - 为什么控制面板的 PIDL 会不同？

> ID：14325953
> 
> 赞同：5
> 
> 时间：2013-01-14T20:17:24.507
> 
> 标签：c++, shell, com, mfc, windows-shell

我看到应该这样做[来](https://stackoverflow.com/questions/3572220/recognize-windows-shell-special-folder-i-e-get-its-csidl-via-its-pidl-now-de)比较 PIDL：IShellFolder::CompareIDs()。

特别是，我试图检测给定的绝对 PIDL（或相对）是否是控制面板的。

但是，在实践中，我最终得到了两个 IShellFolder::CompareIDs() 声称不相等的 PIDL，当它们应该相等时（查看每个的 GetDisplayName()，我可以看到我们确实在查看控制面板） .

基本上，我通过以下方式获得控制面板的绝对 PIDL：

```
PIDL iidControlPanel = nullptr;
SHGetSpecialFolderLocation(hwnd, CSIDL_CONTROLS, &iidControlPanel); 
```

然后像这样比较传入的枚举 shell 对象（有关上下文，请参见[此处](https://stackoverflow.com/questions/14286833/how-to-detect-if-a-given-pidl-is-actually-a-zip-file-or-similar)- 简而言之，这是查看枚举 CMFCShellTreeCtrl 内的桌面 shell 命名空间的结果）：

```
bool bIsControlPanel = CompareAbsolutePIDLs(iidControlPanel, pItem->pidlFQ); 
```

作为参考，这里是比较函数：

```
bool CompareAbsolutePIDLs(PIDLIST_ABSOLUTE pidl1, PIDLIST_ABSOLUTE pidl2)
{
    CComPtr<IShellFolder> ishDesk;
    SHGetDesktopFolder(&ishDesk);
    HRESULT hr = ishDesk->CompareIDs(SHCIDS_CANONICALONLY, pidl1, pidl2);
    return SUCCEEDED(hr) && HRESULT_CODE(hr) == 0;
} 
```

在调试器中，我可以看到 GetDisplayName() 每个返回：

```
"::{26EE0668-A00A-44D7-9371-BEB064C98683}\0"
"::{26EE0668-A00A-44D7-9371-BEB064C98683}" 
```

在这里您可以看到 PIDL 的十六进制转储：

```
1f 70 68 06 ee 26 0a a0 d7 44 93 71 be b0 64 c9 86 83 *0c* 00
1f 70 68 06 ee 26 0a a0 d7 44 93 71 be b0 64 c9 86 83 *00* 00 
```

除了倒数第二个值（00 与 0c）外，底层 PIDLS 也是二进制相同的。我目前不知道为什么它们不同，或者我能做些什么来解决这个问题？！

## 问题

1.  是否有另一种方法可以不包含看似虚假的额外空字节的方式获取控件的 PIDL？
2.  或者，是否有更好的方法来获取枚举项的 PIDL（CMFCShellTreeCtrol 获取绝对 PIDL 的方式是否存在不足，以至于它无法包含最终的空字节？）
3.  有没有办法将控制面板获取为相对 PIDL，然后将其与相对枚举 PIDL（我也有）进行比较？
4.  ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:04:18.710

这些确实是不同的外壳对象。您可以使用 SIGDN_NORMALDISPLAY 选项将获得的 PIDL 传递给 SHGetNameFromIDList() 以将它们转换为可读字符串。长 PIDL（带 0x0c）转换为“所有控制面板项目”，短 PIDL 转换为“控制面板”。

这个问题是通过使用 SHGetSpecialFolderLocation() 来检索控制面板控件的虚拟文件夹开始的。与桌面根目录下的控制面板对象不同。我认为您需要通过获取控制面板的 PIDL 并忽略虚拟文件夹来解决此问题。一种方法是使用 ILCloneFirst 将虚拟文件夹转换为根对象：

```
 PITEMID_CHILD controlPanel = ILCloneFirst(iidControlPanel); 
```

或者您可以硬编码控制面板 CLSID，“::{26EE0668-A00A-44D7-9371-BEB064C98683}”，然后使用 SHParseDisplayName() 将其转换为 PIDL。

# python - Cherrypy：从cherryd开始时获取应用程序配置设置

> ID：14325954
> 
> 赞同：0
> 
> 时间：2013-01-14T20:17:27.073
> 
> 标签：python, cherrypy

我使用以下命令启动脚本：

```
cherryd -c tiny.cfg -i tiny 
```

但我无法读取应用程序配置设置（数据库）。怎么了？

**微小的.py**

```
import cherrypy

class HelloWorld:
    def index(self):
        return "Hello world!"
    index.exposed = True

app = cherrypy.tree.mount(HelloWorld(), '/')
print 'app.config', app.config
print 'cherrypy.config', cherrypy.config 
```

**微小的.cfg**

```
[global]
server.socket_host: "0.0.0.0"

[database]
driver: "mysql"
host: "localhost" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:24:25.060

尝试将您的配置传递给 tree.mount 调用：

`app = cherrypy.tree.mount(HelloWorld(), '/', 'tiny.cfg')`

# php - 我可以在 MySQL 中计算 DateTime 范围吗

> ID：14325955
> 
> 赞同：0
> 
> 时间：2013-01-14T20:17:32.677
> 
> 标签：php, mysql

我目前计算检索活跃用户列表的时间差，因此：

```
$timeout = 300;
$time = strtotime("-{$timeout} sec");
$time_str = date("Y-m-d H:i:s", $time);

$SQL = "SELECT COUNT(*) AS users FROM active_users WHERE user_id={$user_id} AND last_time >= '{$time_str}'"; 
```

这个时间差异可以直接在 MySQL 查询中完成吗？如果是这样，对性能有影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:21:31.353

```
SELECT ... AND last_time >= (NOW() - INTERVAL $timeout SEC) 
```

性能影响是……未知的。取决于 PHP 与 MySQL 的日期/时间操作代码的效率。可能结果差不多，因为无论如何它们都可能使用相同的底层 libc/glibc 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:22:56.087

是的，它可以直接在 MySQL 中完成，如果您在 Web 服务器和 MySQL 服务器之间有不同的时区，或者应用程序服务器和数据库服务器之间的时钟没有正确同步，在某些情况下可能会更可取。我个人的偏好是将数据库派生时间（即时间戳）视为权威，因此会推荐 MySQL 方法。查询可能如下所示：

```
SELECT COUNT(*) AS users FROM active_users WHERE user_id={$user_id} AND last_time >= DATE_SUB(NOW(), INTERVAL {$timeout} SECONDS) 
```

# terminal - 在终端中使用 scp

> ID：14325956
> 
> 赞同：24
> 
> 时间：2013-01-14T20:17:34.007
> 
> 标签：terminal

我在远程计算机上创建了一个文件，我已经 ssh 进入了该文件。我想将文件传输回我目前使用的笔记本电脑。我看到我应该使用以下命令：

```
scp username@server:/home/username/file_name /home/local-username/file-name 
```

但我仍然不确定我应该为我的笔记本电脑使用什么（这是一个 macbook）。对于“家”，我想我使用在终端打开时在终端中键入 pwd 时出现的路径？

我试试这个，我收到消息：

```
No such file or directory 
```

我知道这很容易，但我以前没有做过。任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-14T20:31:29.167

我会在您的笔记本电脑上打开另一个终端并从那里执行 scp，因为您已经知道如何设置该连接。

```
scp username@remotecomputer:/path/to/file/you/want/to/copy where/to/put/file/on/laptop 
```

这`username@remotecomputer`与您最初用于 ssh 的字符串相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T20:33:26.367

您可以使用以下命令在当前目录中下载`.`：

```
cd # by default, goes to $HOME
scp me@host:/path/to/file . 
```

或者`HOME`直接在你里面：

```
scp me@host:/path/to/file ~ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-26T15:55:32.423

简单的 ：：：

```
scp remoteusername@remoteIP:/path/of/file /Local/path/to/copy

scp -r remoteusername@remoteIP:/path/of/folder /Local/path/to/copy 
```

# javascript - Bootstrap 嵌套折叠仅在父折叠时发生事件

> ID：14325958
> 
> 赞同：7
> 
> 时间：2013-01-14T20:17:42.247
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个嵌套的 Bootstrap Collapse，在父项和子项 Collapse 上都触发了显示的事件。我需要它只对父折叠而不是对子触发。

```
$(document).ready(function() {
  $("#accordion2").on("shown",function() {
    alert("shown!");  
  });
}); 
```

这是一个例子：http: [//jsfiddle.net/xb9K6/](http://jsfiddle.net/xb9K6/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T20:41:02.293

您可以使用对象`stopPropagation`的方法`event`。

```
$(".accordion").on("shown",function(event) {
    event.stopPropagation();
}); 
```

[http://jsfiddle.net/SPZZv/](http://jsfiddle.net/SPZZv/)

# wikipedia - 如何使用 Google 的 BigQuery 查询 Wikipedia 全文转储

> ID：14325959
> 
> 赞同：1
> 
> 时间：2013-01-14T20:17:42.550
> 
> 标签：wikipedia, google-bigquery, bigdata, data-dump

我正在 Google API 中测试 BigQuery，并希望在 Wikipedia 全文转储上运行一些查询。Google 示例数据不包括全文转储（仅修订历史记录）。

维基百科转储的来源很少，例如亚马逊上的这个：http: [//aws.amazon.com/datasets/2506](http://aws.amazon.com/datasets/2506)

我的问题是：有没有办法在不将它们转移到 Google BigQuery 项目的情况下查询这些数据集？等效地，BigQuery 是否有一种方法可以直接与这些数据集之一进行通信？

如果 BigQuery 不可能，那么 Amazon EC2 中是否有可以做同样事情的等效服务？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:33:03.727

> 有没有办法在不将它们转移到 Google BigQuery 项目的情况下查询这些数据库？

不会。BigQuery 针对 BigQuery 项目和数据集运行。

> 等效地，BigQuery 是否有一种方法可以直接与这些数据集之一进行通信？

等效地，没有。出于完全相同的原因。

> 如果 BigQuery 不可能，那么 Amazon EC2 中是否有可以做同样事情的等效服务？

不，不是。有 Amazon Cloud Search，但它基本上在相同的主体上运行，并要求您上传要搜索的数据。因此，除非某人已经将该数据上传到 Amazon Cloud Search 帐户，否则不上传数据是不可能的。

# asp.net - 部署更新的 WebAPI 时出现错误消息

> ID：14325960
> 
> 赞同：2
> 
> 时间：2013-01-14T20:17:49.203
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有一个运行 WebApi 测试版的 Web 服务，我们升级到了最新版本，解决了我们遇到的一些编译问题。

当我们部署服务时，我收到以下错误消息。

```
Method not found: 'Void System.Net.Http.Formatting.JsonMediaTypeFormatter.set_SerializerSettings(Newtonsoft.Json.JsonSerializerSettings)'. 
```

我认为问题在于它是否从 GAC 中提取了错误版本的程序集，但这没有意义，因为我确保将所有引用设置为复制本地并且它们具有更新版本，所以它应该拉程序集的本地版本，而不是 GAC 中的程序集。

我知道合乎逻辑的做法是更新生产服务器上的 WebAPI 版本，但是那里运行的其他服务仍在使用 beta 版本，所以我不想打扰它们。

我想知道是否有人可以帮助我解决此问题或描述以下错误消息的解决方案。

# css - IE6,7,8 中的 CSS box-shadow

> ID：14325962
> 
> 赞同：0
> 
> 时间：2013-01-14T20:18:08.177
> 
> 标签：css, css3pie

我知道它不受支持...我尝试使用[PIE](http://css3pie.com/)。我已将 PIE.htc 文件放在与 CSS 相同的文件夹和 IMAGE 文件夹中。使用“../images/image.png”路径加载图像没有问题。

这是代码：

```
.ma-footer-container { 
background: #fff;
margin:0px auto; 
color: #333333; 
padding-top: 10px; 
-moz-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33);
-webkit-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
behavior: url(PIE.htc);
} 
```

又一次尝试：

```
.ma-footer-container { 
background: #fff;
margin:0px auto; 
color: #333333; 
padding-top: 10px; 
-moz-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33);
-webkit-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
behavior: url(../images/PIE.htc);
} 
```

一点效果都没有。看起来盒子阴影被完全忽略了。不显示在 IE 开发者工具中...

这是另一个尝试（使用绝对路径）。我使用的图片的网址如下：“http://www.myStore.com/skin/frontend/default/ma_kidstore/images/facebook_icon.png”

```
.ma-footer-container { 
background: #fff;
margin:0px auto; 
color: #333333; 
padding-top: 10px; 
-moz-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33);
-webkit-box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
box-shadow: 0 10px 80px 0 rgba(0, 0, 0, 0.33); 
behavior: url(/skin/frontend/default/ma_kidstore/images/PIE.htc);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T13:58:15.350

我不久前放弃了这个。解决方案是：我不会对 IE6、7 和 8 大惊小怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:03:40.047

不知何故，我也无法使用 CSS 应用 PIE，但 JavaScript 解决方案帮助我解决了问题。

在 HTML 文件的标签中，

```
<!--[if lte IE 8]>
  <script src="styles/build/PIE.js"></script> 
<![endif]--> 
```

之后，或在结束前的页面末尾，

```
<script type="text/javascript">
// providing CSS3 Pie behavior to elements
if(window.PIE)
{
  var containers = document.querySelectorAll('.ma-footer-container');
  for(var i = 0; i < containers.length; i++)
  {
    PIE.attach(containers[i]);
  } 
}
</script> 
```

# xamarin.android - 在 Mono for Android 上集成 Chartboost

> ID：14325969
> 
> 赞同：1
> 
> 时间：2013-01-14T20:18:49.250
> 
> 标签：xamarin.android

我想在我的 Mono for Android 游戏中使用 Chartboost。我下载了最新的 chartboost Jar 文件，并创建了一个新的 Java 绑定库项目，但我遇到了一些构建错误，比如

`The type or namespace name 'AbstractObjectSerializer' does not exist in the namespace 'Com.Mongodb.Util'.`

有没有人成功构建了这个库，用于 Android 的 Mono。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:31:12.447

我认为 Xamarin 的工作人员已经在 Xamarin 的[论坛板上](http://forums.xamarin.com/)[回答](http://forums.xamarin.com/discussion/804/chartboost#latest)了这个问题。该解决方案基本上包括[启用诊断构建输出](http://docs.xamarin.com/Android/Guides/Deployment%2C_Testing%2C_and_Metrics/Diagnostics#Diagnostic_MSBuild_Output)，希望让您知道为什么*AbstractObjectSerializer*没有被绑定。然后，您可以使用[Transforms\Metadata.xml](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Binding_API_Metadata_Reference)解决该问题。

# coldfusion - Coldfusion：多个表单字段，一次提交

> ID：14325974
> 
> 赞同：1
> 
> 时间：2013-01-14T20:19:06.080
> 
> 标签：coldfusion, insert

**概括：**

*   插入有效。
*   氟氯化碳工作

问题是当我将“ **_#i#** ”添加到字段名称的末尾时！

**细节：**

我有不同数量的表单字段需要同时插入到数据库中，不同的行。

所以我循环了表单并增加了字段的名称。

所以我有title_1、title_2、title_3等...

接下来我想通过按表单字段的数量循环插入来将它们插入数据库（一个提交按钮）。

我正在使用**ColdFusion Server Standard 8,0,1,195765**

错误： **无效的 CFML 构造**

我已经尝试了各种 - 任何建议将不胜感激。

```
 <cfoutput>
        <cfloop from="1" to ="#VARIABLES.fieldTotal#" index="i">
        <cfset VARIABLES.insert = theObj.the_insert(
                the_id  = FORM.the_id_#i#
            ,   title   = FORM.title_#i#
            ,   author  = FORM.author_#i#
            ,   caption = FORM.caption_#i#
        )>
        </cfloop>
    </cfoutput> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T20:31:35.853

```
form[ "the_id_#i#" ] 
```

所有 ColdFusion 范围都是结构，可以通过这种方式访问​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:51:39.433

Sam Farmer 已经给出了正确的答案，但只是为了阐明访问结构成员的工作原理：

`FORM.var`等于`FORM["var"]`

但是，使用点的访问**不会被评估**。每当您想动态访问结构中的成员时，都需要使用方括号。

`FORM["the_id_#i#"]`等于`FORM["the_id_" & i]`。

并记得清理用户输入（尤其是 GET/URL 和 POST/FORM 数据）：

```
<cfloop from="1" to="#VARIABLES.fieldTotal#" index="i">
    <cfif structKeyExists(FORM, "the_id_" & i) and reFind("^[0-9]+$", FORM["the_id_" & i])
        and structKeyExists(FORM, "title_" & i)
        and structKeyExists(FORM, "author_" & i)
        and structKeyExists(FORM, "caption_" & i)>

        <cfset VARIABLES.insert = theObj.the_insert(
            the_id  = FORM["the_id_" & i],
            title   = FORM["title_" & i],
            author  = FORM["author_" & i],
            caption = FORM["caption_" & i]
        )>

    </cfif>
</cfloop> 
```

`structKeyExists(FORM, "the_id_" & i)`等于`isDefined("FORM.the_id_#i#")`。

# sql-server - 在 Reporting Service 中可视化空间数据

> ID：14325979
> 
> 赞同：3
> 
> 时间：2013-01-14T20:19:27.657
> 
> 标签：sql-server, reporting-services, geometry, spatial, reporting-services-map

是否可以在报告服务的报告中可视化来自 SQL Server Spartial 数据（几何，而不是地理）的一张地理地图？

一个具体的例子是在特定的报告页面中显示来自中国地铁地图的橙色线。

![在此处输入图像描述](../Images/1f9b7dd062f408a9401005919f93e67c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:55:08.857

几何可以在 SSRS 中浮出水面，但我还没有见过这么复杂的东西。这是一个起点：

[http://www.bimonkey.com/2012/07/the-geometry-data-type-and-ssrs-floorplan-reports/](http://www.bimonkey.com/2012/07/the-geometry-data-type-and-ssrs-floorplan-reports/)

# replace - logback 的替换功能不支持模式中的大于或小于符号 (<>)

> ID：14325983
> 
> 赞同：1
> 
> 时间：2013-01-14T20:19:33.367
> 
> 标签：replace, logback

我们想使用 logback [http://logback.qos.ch/manual/layouts.html#replace](http://logback.qos.ch/manual/layouts.html#replace)的替换功能。它适用于文档中描述的示例。但是，如果模式中有 > 或 < 符号，则它不起作用。例如，如下所示

```
<pattern>%replace(%m){"pswd='.*'", "pswd='<xxx'"}%n</pattern> 
```

生成以下异常

> XML_PARSING - 解析第 14 行和第 298 列 org.xml.sax.SAXParseException 上的致命错误；行号：14；列号：298；元素类型“xxx”必须后跟属性规范“>”或“/>”。在 org.xml.sax.SAXParseException：元素类型“xxx”必须后跟属性规范“>”或“/>”。

我们需要能够在模式中包含 < 或 > 因为我们的数据将采用以下形式

```
<password>1234</password> 
```

我们希望能够将其替换为`<password>xxx</password>`.

我们还尝试以相同的结果转义 <（即 \<）。我们是否缺少某些东西，或者这是一个已知问题？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:33:00.500

您应该能够执行以下操作：

```
<pattern>%replace(%m){"pswd='.*'", "pswd='&lt;xxx'"}%n</pattern> 
```

# c++ - 字符串 find replace、grep、strpos 或 concat new 一种 c/c++ 效率

> ID：14325996
> 
> 赞同：1
> 
> 时间：2013-01-14T20:20:32.587
> 
> 标签：c++, c, string, char, string-concatenation

我对您在 c/c++ find、find_first_of、replace、strpos、grep 和 concat 方面的经验感兴趣。替换字符串中内容的最有效方法是什么。

*   每个字符串都不会出现多次字符串替换
*   结果字符串的长度与原始字符串不同。
*   原始和最终字符串将少于 2000 个字符
*   大约 25 个字符串替换
*   每个干草堆的针头保持一致

生病测试他们，只是在这一点上收集选项。

这是手头的应用程序：需要大量按摩的 url 字符串。IE。几乎所有参数都会改变，尽管值将保持不变。从

```
param1=this&param2=string&param3=needs&param4=a&param5=lot ... &param25=work 
```

至

```
what=this&method=string&will=needs&work=a&the=lot ... &best=work 
```

我目前使用适用于现有字符串的针/干草堆函数。

```
void findAndReplace(string& haystack, const string& needle, const string& replace) {
    size_t len = needle.size();
    if (haystack.size() < len)
        return;
    size_t pos = haystack.find(needle);
    if (pos != string::npos)
        haystack.replace(pos, len, replace);
} 
```

我不介意使用 char*、string、streams、grep 或其他。并且构建一个新字符串也是一种选择。

谢谢

# visual-studio-2010 - BizTalk 2010 部署错误。添加资源失败

> ID：14325999
> 
> 赞同：0
> 
> 时间：2013-01-14T20:20:50.740
> 
> 标签：visual-studio-2010, biztalk, biztalk-2010, biztalk-deployment

我正在 VS 2010 中构建 BizTalk 2010 应用程序。直到今天早上我在部署时遇到错误，一切都运行良好。错误是：

> 添加资源失败。某些资源的更改请求失败。BizTalkAssemblyResourceManager 未能完成结束类型更改请求。无法将日志保存到 HTML 文件“C:\Users\BizTalkDeveloper\AppData\Local\Temp\BT\PID7452\BizTalkAssembly\Update.log”。异常 ''，十六进制值 0x1F，是无效字符。''，十六进制值 0x1F，是无效字符”。

起初，我认为这是一个权限问题，但我以计算机管理员用户身份登录，并且对相应的 AppData 文件夹具有完全控制访问权限。我很确定 VS 在部署时动态创建 BT（和以下路径），因为当我查找路径本身时，在 Temp 之后找不到该路径的任何部分。

我已经被这个困扰了几天，我现在只是没有想法。如果有人有任何建议或想法，他们可以扔给我，我真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T07:57:22.077

我遇到了这个问题，错误出现在接收位置名称中。导出绑定，然后检查 XML 是否“格式正确”。就我而言，错误是这样的：

```
<ReceiveLocation Name="In.ShowInvoice&#x1F;_FILE"> 
```

在 BizTalk 管理控制台中，只需编辑名称并再次导出绑定，直到 XML 格式正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:14:24.890

我能够通过更新与应用程序相关的每个项目的版本号然后重新部署来解决该问题。

虽然这使解决方案起作用，但我仍然想知道，如果有人知道，出了什么问题，或者解决它的另一种方法是什么。旁注，我确实尝试卸载原始版本的 DLL，然后重新部署，但这也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:56:32.690

如果您有另一个可用的 BizTalk 服务器，您可以尝试在那里部署您的应用程序，看看它是否在不同的环境中工作。您是否尝试过部署程序集的*子*集？

> 我确实尝试卸载原始版本的 dll

你到底尝试了什么？例如，您是否已取消部署并卸载了 BizTalk 应用程序，然后检查了 GAC 中的剩余部分（.NET v2/v4）？我相信这应该已经足够彻底了。

* * *

我记得`System.Xml.XmlException`在 BizTalk 2006 中尝试更新程序集时可能会发生这种情况，而它仍被现有端口引用。

删除端口或至少删除依赖*项（即选择直通*适配器）应该使部署正常工作；之后别忘了重新配置修改后的端口……</p>

如果存在多个引用，那么仅导出绑定、删除所有端口、更新程序集并最终再次导入绑定可能会更容易或更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T13:38:51.100

Biztalk 管理控制台中有默认应用程序。很可能是：“BizTalk 应用程序 1”。转到资源部分，看看您的应用程序资源是否在那里。如果他们在那里删除它们并再次部署