# StackOverflow 问答 15040000-15040999

# mysql - 如果我们有多个记录，如何在不使用游标的情况下从查询中获取记录

> ID：15040004
> 
> 赞同：0
> 
> 时间：2013-02-23T11:27:31.037
> 
> 标签：mysql, stored-procedures

如果我们有多个结果，如何在不使用游标的情况下从查询中获取记录我们可以像下面的代码那样做吗

FOR r IN (SELECT a, `b`,c FROM tabel WHERE a=1) LOOP SHOW (ra); 结束循环；我想用游标来做这件事，因为这种情况发生在另一个游标内是否可以用我们的游标来做到这一点或在现有游标内声明新游标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:58:21.523

您可以/应该使用两个光标来执行此操作，特别是您可以在第一个光标内嵌套第二个光标。

特别是，看看这篇关于“Neting MySQL Cursor Loops”的文章[http://rpbouman.blogspot.it/2005/10/nesting-mysql-cursor-loops.html](http://rpbouman.blogspot.it/2005/10/nesting-mysql-cursor-loops.html)

它为您提供了很多关于如何解决问题的观点。

# php - 使用pegination php jquery加载xml文件

> ID：15040007
> 
> 赞同：3
> 
> 时间：2013-02-23T11:27:42.933
> 
> 标签：php, jquery

我有一个包含 1000 多条记录的 xml 文件，xml 结构是：

```
<?xml version="1.0" encoding="UTF-8"?>

<deals>

<deal>
<deal_id>1</deal_id>
<deal_title> <![CDATA[THE TITLE]]> </deal_title>
<deal_description> <![CDATA[THE DESCRIPTION]]> </deal_description>
<deal_url> <![CDATA[http://www.thedomain.com]]> </deal_url>
<deal_price>12.00</deal_price>
<deal_previous_price>68.00</deal_previous_price>
<deal_discount>82</deal_discount>
<deal_image> <![CDATA[http://www.thedomain.com/images/image.jpg]]> </deal_image>
<deal_shop>DEAL SITE NAME</deal_shop>
</deal>

</deals> 
```

现在如何使用限制来加载 .xml 文件以显示 10 条记录？

我将使用本教程[http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html](http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html)

当用户按下“加载更多”按钮时显示更多记录

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:55:58.643

您可以使用**SimpleXML**类来实现这一点。

您可以像这样加载您的 xml 代码：

```
$data = new SimpleXMLElement($your_xml_code);
$single_deal = $data->deals[0]->deal[/*numeric index of your deal*/]; 
```

[这](http://www.php.net/manual/en/simplexml.examples-basic.php)是文档和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:56:16.570

您可能需要一个小的 PHP 脚本来在 x 行后剪切 XML，就像您提供的示例中有 ajax_more.php 一样。
我对PHP中的XML不太了解，我总是将其解析为关联数组；也许这也是去这里的方式？解析成数组，剪掉不重要的行，然后再编码成XML？

# android - 如何从android中的编码在openfire上创建一个组

> ID：15040009
> 
> 赞同：1
> 
> 时间：2013-02-23T11:27:52.540
> 
> 标签：android, openfire, smack

我使用 smack api、XMPP、openfire 创建了一个小型聊天应用程序，我想创建一个群聊工具。我可以通过向导抛出在 openfire 上创建一个组，但我想通过在 android 中的编码在 openfire 中创建一个组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:42:00.120

如[smack 文档](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html)中所述，您可以创建一个新的群聊，即房间，如下所示：

```
MultiUserChat muc = new MultiUserChat(conn1, "myroom@conference.jabber.org");
muc.create("testbot");
muc.sendConfigurationForm(new Form(Form.TYPE_SUBMIT)); 
```

如果你指的是用户联系人列表中的组，那么你也可以这样做：

```
roster.createGroup("groupName"); 
```

`roster`对登录用户名册列表的引用在哪里。

# jquery - jQuery Validate 插件 - 围绕错误标签获取两个包装器

> ID：15040014
> 
> 赞同：1
> 
> 时间：2013-02-23T11:28:07.737
> 
> 标签：jquery, jquery-validate

我在让我的[JQuery 验证](http://docs.jquery.com/Plugins/Validation)达到我想要的地方时遇到了一些麻烦。我的错误显示在带有箭头的边栏中。这可以通过单个“包装器”来实现。

```
$('#loginform').validate({
    errorPlacement: function(label, element) {
        label.addClass('arrow');
        label.insertAfter(element);
    },
    wrapper: 'span'
}); 
```

问题是不幸的是我的输入字段周围有一个框，所以**错误应该放在**那个框的边框上。为此，我需要两个包装器。所以我的错误应该是这样的：

```
<span class='errorContainer'>
    <span class='arrow'>
        <span class='error'>This is the actual error message.</span>
    </span>
</span> 
```

当前的代码只给了我这个：

```
<span class='arrow'>
    <span class='error'>This is the actual error message.</span>
</span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:02:08.660

您可以使用

```
errorPlacement: function(label, element) {
    $('<span class="errorContainer"><span class="arrow"></span></span>').insertAfter(element).find('.arrow').append(label)
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/6C4Jm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T16:37:51.283

接受的答案没有错，但我想展示一种更有效的方法来实现相同的所需 DOM 结构。

而不是插入一个空容器，找到内部元素，然后附加错误......以下内容不那么冗长，更直接；它只是用所需的容器包装标签。

```
errorPlacement: function (error, element) {
    error.insertAfter(element)
    .wrap('<span class="errorContainer"><span class="arrow"></span></span>');
}, 
```

这具有采用插件的*默认* `errorPlacement`回调的优势......

```
error.insertAfter(element) 
```

...然后只是将[jQuery`.wrap()`](http://api.jquery.com/wrap/)方法链接到最后...

```
.wrap('<span class="errorContainer"><span class="arrow"></span></span>') 
```

**工作演示：http: [//jsfiddle.net/2ZaLB/](http://jsfiddle.net/2ZaLB/)**

# vb.net - 如何创建将在后台运行的 WP7 应用程序 (VB)

> ID：15040015
> 
> 赞同：0
> 
> 时间：2013-02-23T11:28:07.770
> 
> 标签：vb.net, windows-phone-7, background-process, visual-studio-2010

我需要创建一些时间安排的应用程序，它在给定的时间执行任务。电话启动时程序在后台等待。用户可以在需要时停止它。

找不到 WP7 的东西。

如果信息将在VB中会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:32:34.240

这个东西被称为`Background Agents`并且有很多可用的教程：

*   [Windows Phone 后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx)

*   [如何为 Windows Phone 实现后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)

*   [周期性任务类](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.scheduler.periodictask%28v=vs.105%29.aspx)

# c++ - 表达式必须是可修改的左值 - 结构中的数组

> ID：15040018
> 
> 赞同：2
> 
> 时间：2013-02-23T11:28:24.023
> 
> 标签：c++, pointers, multidimensional-array, struct, callback

我需要将两个数组 ( `int[1024][3]`, `int[1024][4]`) 和一个`Mat*`(OpenCV 矩阵) 传递给回调函数。
我有这样的结构：

```
 struct data_holder {
     Mat* mat;
     unsigned int* data[4];
     unsigned int* tara[3];
     //unsigned int tara[1024][3];  //Previous attempt
     //unsigned int data[1024][4];  
 } 
```

这是我的任务：

```
 Opencv_Button pokus = Opencv_Button(20,40,50,20);  //Creating button class instance
 pokus.val("Tara");  //Button title
 ui.addButton(&pokus);  //Adding button to UI
 data_holder but_data; //structure
 but_data.data = &data;  //!!Expression must be a modifiable lvalue!!
 but_data.tara = &tara;  //For unsigned int data[1024][4] in structure I did ... = data
 but_data.mat = &UI_tara;//Matrix assigned with no problems
 pokus.setCallback(taraButtonCallback, (void*)&but_data); 
```

那么如何将两个数组和那个 Mat 对象传递给回调函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:29:52.027

这：

```
unsigned int* data[4]; 
```

是一个指针数组。数组不可赋值。

假设 RHS 的类型是`int [1024][4]`，那么我有一种感觉，你真的想要这个：

```
unsigned int (*data)[1024][4]; 
```

# php - PHP SMS 代码在服务器上不起作用

> ID：15040019
> 
> 赞同：0
> 
> 时间：2013-02-23T11:28:40.040
> 
> 标签：php, sms, httprequest, sms-gateway

我想从我的网站发送短信。php 代码在本地主机上运行良好，但没有从 Web 服务器获得任何响应。我是否错过了在 Web 服务器中配置某些内容？请帮帮我..这是下面给出的代码...

```
<?php

$ch = curl_init("http://priority.muzztech.co.in:8080/sms?");
curl_setopt($ch, CURLOPT_POSTFIELDS,"username=username&password=password&type=0&dlr=1&destination=+91xxxxxxxxxx&source=XXXXXX&message=test");
curl_setopt($ch, CURLOPT_TIMEOUT,60);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);

$contents = curl_exec ($ch);
curl_close ($ch);

Print($contents);

/*if(stristr($contents,"Message Submitted")){
$mstatus="SMS send Sucessfully ";}
else {
$mstatus="SMS send Failed";} 
*/

?> 
```

将代码编辑为

```
<?php

$ch = curl_init("http://priority.muzztech.co.in:8080/sms?");

curl_setopt($ch, CURLOPT_POST, True);
curl_setopt($ch, CURLOPT_POSTFIELDS,"uusername=username&password=password&type=0&dlr=1&destination=+91xxxxxxxxxx&source=XXXXXX&message=test");
curl_setopt($ch, CURLOPT_TIMEOUT,60);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);

$contents = curl_exec ($ch);

var_dump(curl_getinfo($ch));

curl_close ($ch);
Print($contents);
/*if(stristr($contents,"Message Submitted")){
$mstatus="SMS send Sucessfully ";}
else {
$mstatus="SMS send Failed";} 
*/

?> 
```

显示的页面

```
<pre>array(20) { 
["url"]=> string(40) "http://priority.muzztech.co.in:8080/sms?" 
["content_type"]=> NULL 
["http_code"]=> int(0) 
["header_size"]=> int(0) 
["request_size"]=> int(0) 
["filetime"]=> int(-1) 
["ssl_verify_result"]=> int(0) 
["redirect_count"]=> int(0) ["total_time"]=> float(21.226878) 
["namelookup_time"]=> float(0.22723) 
["connect_time"]=> float(0) 
["pretransfer_time"]=> float(0) 
["size_upload"]=> float(0) 
["size_download"]=> float(0) 
["speed_download"]=> float(0) 
["speed_upload"]=> float(0)
["download_content_length"]=> float(-1)
["upload_content_length"]=> float(-1)
["starttransfer_time"]=> float(0) 
["redirect_time"]=> float(0) }</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T18:26:49.337

我也遇到了同样的问题，并试图用一整天的时间来解决这个问题。在我的本地主机中一切都运行良好，但是当我将它放在 Web 服务器中时，这里没有任何工作。

我用上面的代码做了一点改动，现在它对我有用。我试图通过很多组合来解决这个问题。令人惊讶的是，我看到当我使用端口号 8080 时，这里没有任何工作。但是当我删除端口号并尝试再次发送我的短信时，它正在工作。我还从上面的代码中将 'uusername' 更改为 'username'。

最后我的代码是：

```
<?php

$ch = curl_init("http://priority.muzztech.co.in/sms?");

curl_setopt($ch, CURLOPT_POST, True);
curl_setopt($ch, CURLOPT_POSTFIELDS,"username=username&password=password&type=0&dlr=1&destination=8801XXXXXXXXX&source=XXXXXX&message=test");
//8801XXXXXXXXX mobile number format for Bangladesh
curl_setopt($ch, CURLOPT_TIMEOUT,60);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, True);

$contents = curl_exec ($ch);

curl_close ($ch);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:30:45.630

在进行 CURL HTTP post 时需要在`CURLOPT_POST, true`前面指定`CURLOPT_POSTFIELDS, ...`，因为 CURL 的默认 http 方法是 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T08:15:25.350

```
**In my case below code worked successfully** 

$abc= 'http://bullet1.sdctechnologies.co.in:8080/api/mt/SendSMS?user='.$sms_username.'&password='.$sms_password.'&senderid='.$sms_sender_id.'&channel=Trans&DCS=0&flashsms=0&number='.$txt_mobile.'&text='.$message.'';

 $url = str_replace(" ","%20",$abc);
            $ch = curl_init();
            curl_setopt($ch,CURLOPT_URL,$url); 
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
            $response = curl_exec($ch);
            curl_close($ch); 
```

# python - 如何在不输入列名的情况下引用列？

> ID：15040029
> 
> 赞同：0
> 
> 时间：2013-02-23T11:29:53.820
> 
> 标签：python, sqlalchemy

我有几个表，其中包含许多应该插入数据的列。我不想再次重新输入列的名称，因为我已经在“SQLAlchemy 类定义”中输入了它们。

从发布的其他问题中，我看到您可以使用下面的代码获取列的名称。

```
for c in datatable.__table__.columns.keys():
    print(c) 
```

这将给出列名。但是，我想要的是将数据插入列中，而不仅仅是读取列名。以下是我尝试过的。

```
for_counter = 0
for instance in SESSION.query(SampleClass).filter(SampleClass.id == 2): 
    instance.__table__.columns.keys()[(for_counter)] = "texttoinsert"
    for_counter += 1 
```

我以为我可以用这个“索引”列，但是当代码运行并检查数据库时，只有自动增量“ID”列和默认设置为“现在”的日期获取数据。“实例”中的所有其他列都没有获得任何数据，而我希望在列中找到“texttoinsert”。

基本上，只要我指定了表的名称，我只想构建一个“可能使用”列索引来插入数据的函数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:04:20.217

for 循环是替换`instance.__table__.columns.keys()`数组中的值，而不是设置相应的属性 on `instance`。这应该可以解决问题：

```
for instance in SESSION.query(SampleClass).filter(SampleClass.id == 2): 
  for colname in instance.__table__.columns.keys():
    setattr(instance, colname, 'text_to_insert') 
```

附带说明一下，由于您的所有实例都具有相同的键，因此反转两个循环会带来更好的性能（您不需要每次都重新创建键数组）。

# django - Django 没有返回 HttpResponse 对象

> ID：15040032
> 
> 赞同：0
> 
> 时间：2013-02-23T11:30:06.823
> 
> 标签：django

我正在使用来自 showmedo 的视频教程创建一个 wiki 应用程序。据我所知，教程很旧，我正在使用 django 1.4.3

当我尝试将页面保存到 wiki 首页时遇到错误。

```
ValueError at /wikicamp/start/save/

The view wiki.views.save_page didn't return an HttpResponse object.

Request Method:     GET
Request URL:    http://127.0.0.1:8000/wikicamp/start/save/
Django Version:     1.4.3
Exception Type:     ValueError
Exception Value:    

The view wiki.views.save_page didn't return an HttpResponse object.

Exception Location:     C:\Python26\Lib\site-packages\django\core\handlers\base.py in get_response, line 129

Traceback Switch to copy-and-paste view

C:\Python26\Lib\site-packages\django\core\handlers\base.py in get_response

                            raise ValueError("The view %s.%s didn't return an HttpResponse object." % (callback.__module__, view_name)) 
```

我认为问题出在函数 save_page 下的views.py中

我的观点是：

```
 from wiki.models import Page
 from django.shortcuts import render_to_response 
 from django.http import HttpResponseRedirect
 def view_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
     except Page.DoesNotExist:
         return render_to_response("create.html",{"page_name":page_name})
     content = page.content
     return render_to_response("view.html",{"page_name":page_name , "content":content})
 def edit_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
         content = page.content
     except Page.DoesNotExist:
         content = ""
     return render_to_response("edit.html",{"page_name":page_name, "content":content})
 def save_page(request , page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk = page_name)
         page.content = content
     except Page.DoesNotExist:
         page = Page(name= page_name , content=content)
         page.save()
         return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:31:59.643

好吧，是的，如果页面确实存在，您的`save_page`视图不会返回任何内容。

很可能您只是不小心缩进`save`并`return`低于`except`：

```
def save_page(request, page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk=page_name)
         page.content = content
     except Page.DoesNotExist:
         page = Page(name=page_name, content=content)

     page.save()
     return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

# python - python audiotools从内存中打开

> ID：15040033
> 
> 赞同：0
> 
> 时间：2013-02-23T11:30:13.930
> 
> 标签：python, audio

```
import urllib2
import audiotools

file = urllib2.urlopen('http://test.com/1.mp3')
audio = audiotools.open( file ) # <- error 
```

我可以将内存（而不是驱动器）中的文件提供给音频工具吗？或者这里有什么方法可以将 mp3 文件从 url 加载到 audiotools？无需将其保存在硬盘上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:07:01.760

这似乎是音频工具的一个限制，而不是一个简单的解决方法。参见例如 MP3Audio 类 ( [https://github.com/tuffy/python-audio-tools/blob/master/audiotools/mp3.py](https://github.com/tuffy/python-audio-tools/blob/master/audiotools/mp3.py) )。文件名一直向下传递，通过库的多个层。所以它几乎必须是一个真正的文件名（即可以`open()`'d.

如果您迫切需要解决方案，唯一想到的就是制作一个没有磁盘支持的文件。例如，`/dev/shm`它是许多 Linux 系统上的挂载点，它不引用真实磁盘，而仅引用内存。因此，您可以将音频文件写入`/dev/shm/foo.mp3`然后告诉 audiotools 打开它。

# jquery - 无法读取 JqPlot 中高亮选项中的值

> ID：15040039
> 
> 赞同：0
> 
> 时间：2013-02-23T11:30:45.740
> 
> 标签：jquery, jqplot

**当用户将鼠标悬停**在其上时，我需要显示该点的一些详细信息（单击也可以）。问题是当我设置 jqplot 荧光笔选项时，我无法从这一点获得好的数据。

虽然荧光笔设置为默认值，但它显示的值正常（与轴上的相同 - 但我需要对其进行格式化）。所以我使用`highlighter: {formatString:...}`但我只能获取静态文本（因为字符串没有被解析为内部的任何变量。）

这是代码：

```
 $(document).ready(function(){

    var line1 = [['2013-02-01 09:12:03',120.4],['2013-02-01 09:23:00',121.6],['2013-02-02 09:39:28',120.1],['2013-02-02 09:47:23',119.0],['2013-02-04 09:10:33',117.4],['2013-02-04 09:15:54',118.2],['2013-02-05 09:32:25',121.3],['2013-02-05 09:39:27',123.4],['2013-02-06 08:54:20',120.4],['2013-02-06 09:02:02',121.3],['2013-02-07 08:56:49',119.3],['2013-02-07 09:11:46',120.7],['2013-02-08 09:25:14',120.8],['2013-02-08 09:42:09',122.9],['2013-02-09 10:16:35',120.1],['2013-02-09 10:33:21',121.6],['2013-02-11 10:17:52',117.9],['2013-02-11 10:25:43',119.4],['2013-02-12 09:38:00',120.8],['2013-02-12 09:47:54',121.3],['2013-02-12 10:26:11',119.0],['2013-02-13 09:33:24',121.0],['2013-02-13 09:39:17',121.1],['2013-02-13 14:13:27',121.2],['2013-02-14 08:46:32',118.5],['2013-02-14 08:55:13',119.1],['2013-02-15 09:32:48',121.5],['2013-02-15 09:38:37',121.7],['2013-02-16 10:02:50',119.3],['2013-02-16 10:07:35',119.5],['2013-02-18 09:49:57',119.9],['2013-02-18 09:57:26',120.6],['2013-02-19 10:38:43',119.6],['2013-02-19 10:56:14',120.8],['2013-02-20 09:20:57',119.2],['2013-02-20 09:30:46',119.9],['2013-02-21 09:19:57',119.9],['2013-02-21 09:25:40',119.7],];
    var line_oczekiwana_srednia=[['2013-02-01 ',121.0000],['2013-02-21 ',121.0000]];

    var line_sd_plus_1=[['2013-02-01 ',123.42],['2013-02-21 ',123.42]];
    var line_sd_plus_2=[['2013-02-01 ',125.84],['2013-02-21 ',125.84]];
    var line_sd_plus_3=[['2013-02-01 ',128.26],['2013-02-21 ',128.26]];
    var line_sd_plus_4=[['2013-02-01 ',130.68],['2013-02-21 ',130.68]];
    var line_sd_minus_1=[['2013-02-01 ',118.58],['2013-02-21 ',118.58]];
    var line_sd_minus_2=[['2013-02-01 ',116.16],['2013-02-21 ',116.16]];
    var line_sd_minus_3=[['2013-02-01 ',113.74],['2013-02-21 ',113.74]];
    var line_sd_minus_4=[['2013-02-01 ',111.32],['2013-02-21 ',111.32]];

    var line_punty_przekraczajace_SD = []    
    //var line_punty_przekraczajace_reguly_westgarda_SD = []
    var line_WEST1 = [];var line_WEST3 = [];var line_WEST8 = [];var line_WEST9 = [];var line_WEST12 = [];    

    var plot2 = $.jqplot('chart2', [line_sd_plus_1, line_sd_plus_2, line_sd_plus_3, line_sd_plus_4, line_oczekiwana_srednia, line_sd_minus_1, line_sd_minus_2, line_sd_minus_3, line_sd_minus_4, line1, line_WEST1, line_WEST3, line_WEST8, line_WEST9, line_WEST12, ], {
        animate: true,
        title:'Dane materiału CONTROL SERUM 1  031(Surowica).   ', 
        axes:{
          xaxis:{
            renderer:$.jqplot.DateAxisRenderer,
            tickOptions:{ 
              formatString:'%#d-%m-%y %#H:%M',
              angle: -30,
            },
            tickRenderer:$.jqplot.CanvasAxisTickRenderer,
            label:'Start: 2013-2-1 Koniec: 2013-2-21', 
            labelOptions:{
              fontFamily:'Helvetica',
              fontSize: '14pt'
            },
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
          },           
          yaxis:{
            //min:111.32, 
            //max:130.68,
            numberTicks: 9,

            ticks:[[111.32,'111.32(-SD4)'],[113.74,'113.74(-SD3)'],[116.16,'116.16(-SD2)'],[118.58,'118.58(-SD1)'],[121.0000,'121.0000'],[123.42,'123.42(+SD1)'],[125.84,'125.84(+SD2)'],[128.26,'128.26(+SD3)'],[130.68,'130.68(+SD4)']],
            renderer:$.jqplot.LogAxisRenderer,
            tickOptions:{
              showGridline: false,
              formatString:'Wynik: %.1f',
              //formatString:'SD',
              labelPosition: 'middle', 
              angle:-0,
            },
            tickRenderer:$.jqplot.CanvasAxisTickRenderer,
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
            labelOptions:{
                fontFamily:'Helvetica',
                fontSize: '14pt'
            },
            label:'Wartości w mmol/l'
          },       
        },
        highlighter: {
          show: true,
          sizeAdjust: 12.5,
          tooltipFadeSpeed: 'fast',
          //formatString:'<table><tr><td>Data: %Y-%m-%d.%H:%M:%S</td></tr><tr><td>Wynik: %.1f</td></tr></table>'
        },
        cursor: {
          show: true,
          zoom:true,
          dblClickReset:true,
          tooltipLocation:'sw'
        },        
        series:[
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#76a4e8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {lineWidth:1, color: '#d8d8d8', showMarker: false},                                                            
          {lineWidth:1, color: '#d8d8d8', showMarker: false},
          {
            lineWidth:0.5, 
            color: 'green', 
            rendererOptions: {animation: {speed: 1500}}, 
            markerOptions:{color: 'green', 
            style:'filledSquare'},
            highlighter: {formatString:'<table><tr><td>Data: %Y-%m-%d.%H:%M:%S</td></tr><tr><td>Wynik: %.1f</td></tr></table>'}            
          },
          {showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},{showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},{showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},{showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},{showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},
        ],
        legend:{
           renderer: jQuery.jqplot.EnhancedLegendRenderer,
           show: true,
           hideZeros: true,
           location: 'e',
           labels: [ 'SD+4 (130.68)', 'SD+3 (128.26)', 'SD+2 (125.84)', 'SD+1 (123.42)','Oczekiwane (121.0000)', 'SD-1 (118.58)', 'SD-2 (116.16)', 'SD-3 (113.74)', 'SD-4 (111.32)', 'Wyniki kontroli', 'Reguła WEST1 1-2s (brak)', 'Reguła WEST3 1-3s (brak)', 'Reguła WEST8 2-2s (brak)', 'Reguła WEST9 4-1s (brak)', 'Reguła WEST12 3-1s (brak)', ],
           placement: 'outsideGrid'
        }        

    });
  });
  </script>

  <!-- jqPlot -->
  <script class="include" type="text/javascript" src="plugins/jqPlot/jquery.jqplot.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.highlighter.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.cursor.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.dateAxisRenderer.min.js"></script>
  <script class="include" language="javascript" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.enhancedLegendRenderer.min.js"></script>
  <script class="include" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.canvasTextRenderer.min.js"></script>
  <script class="include" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
  <script class="include" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
  <script class="include" type="text/javascript" src="plugins/jqPlot/plugins/jqplot.categoryAxisRenderer.min.js"></script> 
```

这就是我得到的：

![在此处输入图像描述](../Images/22359d5e38c1c02de15e1c7b86fae8e0.png)

%Y %m %d .... 和其他没有被翻译。为什么我不能得到正确的值？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:08:25.347

By default, `useAxesFormatters` is set to true on a highlighter. What this means is that you are actually receiving the data formatted by the axis formatters. In your case, the two formatters will be producing date values of the form `'%#d-%m-%y %#H:%M'` and y-axis values of the form `'Wynik: %.1f'`.

What this means is that you can change your series highlighter format to this:

```
formatString:'Data: %s, %s' 
```

When applied, the first `%s`

See the [docs](http://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html) for more details.

# sql - Sql更新查询

> ID：15040048
> 
> 赞同：21
> 
> 时间：2013-02-23T11:31:08.703
> 
> 标签：sql, sql-server, database, tsql

我有一个`T1`包含三列的表：`Id, Name, Address`

还有另一个`T2`包含 2 列的表`Id, New_Address`。`Id`的列与`T2`的相同`T1`。

我需要一个查询来更新with of 的`Address`列。`T1``New_Address``T2`

我可以通过检查 ID 并执行更新语句来完成循环。如何必须通过查询来完成？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-23T11:33:45.803

怎么样

```
UPDATE T1
SET Address = T2.New_Address
FROM T2
WHERE T1.id = T2.id 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-23T11:34:33.613

```
UPDATE T1
SET T1.Address = T2.New_Address
FROM T1
INNER JOIN T2 ON T2.ID = T1.ID 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-23T11:37:58.733

```
UPDATE T1
SET Address = (select New_Address from T2 where T1.ID=T2.ID ); 
```

# javascript - PhantomJS 有控制台吗？

> ID：15040054
> 
> 赞同：14
> 
> 时间：2013-02-23T11:31:28.610
> 
> 标签：javascript, console, phantomjs

我在 github 上找到了这个：[https ://github.com/gr2m/phantomjs-console](https://github.com/gr2m/phantomjs-console)

但这有点疯狂，必须将命令写入文件中，仅在一行上，然后读取和删除，并且输出在终端中。

我想要一个像...这样的控制台

```
$ phantomjs --console
phantom> console.log(typeof $)
[Object Function]
phantom> console.log("happy days")
happy days
phantom> 
```

有这样的吗？

## 编辑：开始理解他们为什么以如此疯狂的方式做到这一点......

来自 PhantomJS-Node：[https ://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node)

> ## 不，真的，它是如何工作的？
> 
> 我会用一个问题来回答这个问题。如何与不支持共享内存、套接字、FIFO 或标准输入的进程通信？
> 
> 好吧，PhantomJS 确实支持一件事，那就是打开网页。事实上，它真的很擅长打开网页。因此，我们通过启动 ExpressJS 的实例、在子进程中打开 Phantom 并将其指向将 socket.io 消息转换为`alert()`调用的特殊网页来与 PhantomJS 通信。这些`alert()`电话被 Phantom 接听，然后就可以了！
> 
> 通信本身是通过 James Halliday 出色的[dnode](https://github.com/substack/dnode) 库进行的，幸运的是，当与 browserify 结合使用时，它运行良好， [可以](https://github.com/substack/node-browserify)直接在 PhantomJS 的 pidgin Javascript 环境中运行。
> 
> 如果你想破解幻影，请做！您可以使用 cake test 或 npm test 运行测试，并使用 cake build 重建咖啡脚本/浏览器代码。你可能需要`npm install -g coffeescript` 蛋糕才能工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T15:19:22.613

There is an interactive mode (REPL) since [version 1.5](http://phantomjs.org/release-1.5.html) almost a year ago. You just need to launch PhantomJS without any argument and it will immediately start in [REPL mode](https://github.com/ariya/phantomjs/wiki/REPL).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T13:48:13.377

好吧，我最终为我最初链接到的控制台脚本编写了一个包装脚本：[https ://github.com/gr2m/phantomjs-console](https://github.com/gr2m/phantomjs-console)

这是一种混乱的方式，但实际上完全按照我的意愿工作。事实证明，phantomjs 计划处理标准输入/标准输出，但尚未实施。当它被实现时，这种疯狂的交互方法将被淘汰，一个新的、简单的脚本将能够充当控制台。

```
#!/usr/bin/env coffee

sys = require "sys"
fs = require "fs"

# stdin = process.openStdin()
# stdin.addListener "data", (d)-> console.log "you entered: [" + d.toString().substring(0, d.length-1) + "]"

readline = require "readline"

spawn = require("child_process").spawn
phantom = spawn("phantomjs", ["phantom_console.coffee", "http://local/"])

rl = readline.createInterface process.stdin, process.stdout
rl.setPrompt 'phantom> '
rl.prompt()

rl.on 'line', (line)->
  if line == "exit"
    phantom.kill()
    rl.close()
  else
    fs.writeFile ".command.js", line
  # rl.prompt()

rl.on 'close', ->
  phantom.kill()
  process.exit(0)

phantom.stdout.on "data", (data) ->
  console.log data+''
  rl.prompt()

phantom.stderr.on "data", (data) ->
  console.log "\nstderr: " + data
  rl.prompt()

phantom.on "exit", (code) ->
  console.log "child process exited with code " + code 
```

# debugging - VBA 不接受我的方法调用并给出编译错误：语法错误

> ID：15040060
> 
> 赞同：1
> 
> 时间：2013-02-23T11:31:54.210
> 
> 标签：debugging, excel, vba

```
Public Sub SavePendleValues(ByVal row1 As Integer, ByVal row2 As Integer) 
```

调用它

```
For sheetrow = 2 To 15 ' number of rows to scan
    SavePendleValues (sheetrow, sheetrow)
Next sheetrow 
```

得到错误：`Compile error: Syntax error`

当我取消注释该行时：`SavePendleValues (sheetrow, sheetrow)`

一切正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T11:36:02.750

[删除括号](https://stackoverflow.com/a/8257503/11683)。

```
SavePendleValues sheetrow, sheetrow 
```

否则，您将尝试将括号中包含两个变量的东西作为第一个参数传递，这对 VBA 解析器没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T03:34:52.257

我不断收到此编译错误语法错误，我从这里复制了代码：[https://docs.microsoft.com/en-us/previous-versions/office/developer/office-2007/bb206765(v=office.12)？ redirectedfrom=MSDN](https://docs.microsoft.com/en-us/previous-versions/office/developer/office-2007/bb206765(v=office.12)?redirectedfrom=MSDN)
所以代码应该不错。

然后，不知何故，我删除了所有行的所有前导空格，错误消失了！所以看起来，vba 编辑器不是很宽容，它不喜欢某些不可见的打印控制字符。

# php - php preg 替换 &num= 和 &num=

> ID：15040063
> 
> 赞同：0
> 
> 时间：2013-02-23T11:32:14.367
> 
> 标签：php, regex, preg-replace

我不擅长编写 php 正则表达式，现在有些数据像`searchword&num=10`我想​​使用 preg replace remove`&num=10`或者有时可能是`&amp;num=10`，谢谢。

```
echo preg_replace(array('/\&num=(d+)/i','/(&amp;)num=(d+)/i'),'','searchword&num=10');
//I would like to only get searchword 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:37:31.047

一个匹配从字符串开头到第一个 & 符号的任何内容的正则表达式怎么样？

```
/^[^\&]+/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:40:16.990

您可以[`html_entity_decode`](http://php.net/manual/en/function.html-entity-decode.php)在这里发挥自己的优势。

```
$searchStr = html_entity_decode($searchStr);
echo preg_replace('/\&num=\d+/i', '', '$searchStr); 
```

虽然，您可以像这样简单地使用 substr

```
echo substr($searchStr, strpos('&')); 
```

# r - knitr 编译 RStudio 的问题（windows）

> ID：15040064
> 
> 赞同：4
> 
> 时间：2013-02-23T11:32:16.927
> 
> 标签：r, knitr, rstudio

我有一个基于 knitr 的 Rnw 文件，该文件在 Mac（v0.97.316）和 knitr（v1.1）上的 RStudio 中完美地编译为 pdf，但在 Windows 环境（相同版本）中我得到一个编译错误。我已经在两种环境中检查了 RStudio 中的选项，它们是一致的。

即使我在 Rnw 文件中没有这样的标志，和/或如果我切换首选项中的设置，Windows 设置似乎总是将：“\SweaveOpts{concordance=TRUE}”注入“.tex”文件，和/或如果我将“opts_knit$set(concordance=FALSE)”选项添加到 knitr 设置块。如果我从“.tex”文件中删除该行并在 cmd 提示符下手动编译它，则会按预期生成输出。

我不确定这是否是 RStudio 或 knitr 问题，但任何指针将不胜感激。

请注意，我还在 RStudio 支持板上发布了这个问题（[http://support.rstudio.org/help/discussions/problems/5039-knitr-compile-problems-with-rstudio-windows?unresolve=true](http://support.rstudio.org/help/discussions/problems/5039-knitr-compile-problems-with-rstudio-windows?unresolve=true)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T18:22:40.123

它注入的原因`\SweaveOpts{concordance=TRUE}`很可能是您的编织者而`Sweave`不是`knitr`，并且您还启用了 Rnw 索引：[http](http://www.rstudio.com/ide/docs/authoring/rnw_weave) ://www.rstudio.com/ide/docs/authoring/rnw_weave但我不能确定它不是Windows 版本的 RStudio 的错误。无论如何，很容易验证它是否是 RStudio 问题——打开`Compile PDF`面板，您应该会看到如下日志：

![RStudio 与 knitr](../Images/ef793fefb6c7036778f58b6a82544942.png)

如果你的编织器是 Sweave，你会看到类似这样的东西：

![带有 Sweave 的 RStudio](../Images/55657572f54f95e234dcd25bdf857b33.png)

这是我的配置（我在 Ubuntu 下）：

![在 RStudio 中配置 Sweave](../Images/e64a41162eb12174316bdc6cfdbbb33e.png)

如果您`knitr`确实在使用，并且 RStudio 仍然插入`\SweaveOpts{concordance=TRUE}`，我想这一定是 RStudio 的一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T14:44:01.140

我在 2016 年 4 月 24 日下载“R CMD build KFAS-master”作为“KFAS-master.zip”时遇到了这个问题，点击 GitHub 上 KFAS 的“下载 ZIP”（[https://github.com/helske/KFAS](https://github.com/helske/KFAS)）。我无法重现该问题，但我使用的解决方法是找到弹出窗口中提到的行（复制如下），并在其前面加上“%%”将其注释掉。

下载后，我解压缩并将文件夹名称更改为“KFAS”。然后我得到一个命令提示符并导航到包含重命名为 KFAS 的 KFAS-master 文件夹的目录。这次“R CMD build KFAS”按预期工作。然后我在 RStudio 0.99.893 中打开 ~KFAS/vignettes/KFAS.Rmw，当前版本为 2016-04-26。我改变了一些东西并保存了结果。当我重复“R CMD build KFAS”时，我得到了下图所示的问题。

Jouni Helske 将我带到了这篇文章。我通过在“\SweaveOpts{concordance=TRUE}”前面加上“%%”来注释掉下面屏幕截图中提到的第 69 行。我保存了结果，“R CMD build KFAS”工作了。

有些东西似乎偶尔会在 *.Rnw 文件中插入像 "\SweaveOpts{concordance=TRUE}" 这样的行，但我不知道它是什么。我在装有 OS X 10.11.2 的 MacBook Pro 上运行 R 3.2.4。

感谢 Yihui 和其他人在此线程中的早期帖子。

[屏幕截图显示弹出窗口抱怨，“看来您正在使用第 69 行中的 Sweave 特定语法...。”](http://i.stack.imgur.com/XJUt0.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T19:16:44.650

I had the same problem even when `knitr` was set for "Weave Rnw files using" by default.

I solved it by going to Tools/Global Options/Sweave and setting "Weave Rnw files using" to `Sweave` and pressing `Ok`. Then, I went back and set it back to `knitr`, and everything works fine now.

I guess it was indeed Rstudio bug

# android - Osmdroid 阻止在缩放时手动加载图块

> ID：15040076
> 
> 赞同：1
> 
> 时间：2013-02-23T11:33:43.137
> 
> 标签：android, android-maps, osmdroid

我对 osmdroid 有疑问。Mobile Atlas Creator 在罗马获得了 11,12 和 13 缩放级别的图块。解压缩了 atlas zip，我手动更改了 png。但是，当然，正如你猜想的那样，我无法捕捉到正确的比例缩放级别之间的比率。我的意思是，如果我在级别 11 上放置一个标记，然后我放大到 12，第二个 pngs 瓷砖上的标记位置非常不同。我知道 geoPoint 是相同的，但我的 pngs 位置会发生一些变化。

我意识到，当我缩放到第 14 级时，应用程序只是缩放到图像而不加载磁贴，因为我的 sdcard 中没有第 14 级的磁贴。结果是标记位置没有改变。但正如你猜想的那样，有些图块是空白的，因为应用程序尝试为 14 加载图块。所以我认为如果我准备高清图像并将此图像用于所有级别 11、12 和 13，比例不会改变。但我缩放时必须停止加载图块。如果我走错路，请纠正我。我该怎么做？

或者我怎样才能轻松地为不同的水平保持率绘制自己的瓷砖？谢谢建议。。

# eclipse - 可以 eclipse 自动完成自定义 ant 任务（来自 antcontrib、flaka 等）

> ID：15040081
> 
> 赞同：0
> 
> 时间：2013-02-23T11:33:55.790
> 
> 标签：eclipse, ant, autocomplete, eclipse-plugin, flaka

有什么方法可以让 eclipse ant 编辑器理解 antcontrib、flaka 等插件提供的自定义 ant 任务？编辑ant项目的时候很方便，但是我用flaka的时候必须手动打开。为了以防万一，我在 Preferences->Ant->Runtime->Classpath->AntHomeEntries 添加了flaka jar，但这没有帮助。也许有一些 Eclipse 插件可以让它工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:42:11.283

当我添加

```
<taskdef resource="it/haefelinger/flaka/antlib.xml"/> 
```

在我的 ant 构建文件的开头，eclipse 将所有 flaka 目标都包含在全局范围内，所以现在它会自动附加`<when>`并`<while>`带有属性。但是，如果您以通常的方式将 flaka 包含为命名空间，则似乎不可能打开自动完成功能：

```
<project name="myname" xmlns:c="antlib:it.haefelinger.flaka"> 
```

这是一个问题，因为在全局范围内拥有所有 flaka 目标，我们有一些目标未能重新定义，例如`<echo>`.

更新：当我结合两种方法时，它终于起作用了。

```
 <project name="myname" xmlns:c="antlib:it.haefelinger.flaka">
        <taskdef uri="antlib:it.haefelinger.flaka" 
             resource="it/haefelinger/flaka/antlib.xml" 
             classpath="${ant.library.dir}/ant-flaka.jar" />
    .....

    </project> 
```

与 antcontrib 相同。

# php - PHP - 使关联数组唯一，键->值和值->键

> ID：15040084
> 
> 赞同：4
> 
> 时间：2013-02-23T11:34:26.087
> 
> 标签：php, unique, associative-array, key-value, array-flip

我在 php 中有一个小问题，我发现很难用语言来解释。我有一个包含键值的关联数组。我想创建一个函数（或者如果已经有一个函数），它将一个数组作为输入并删除重复项，但都是双向的。

例如：

在我的数组中，我有 {a -> b} {a -> c} {b -> a} {b -> c} ...

从这个角度来看，似乎没有任何重复，但对我来说 {a -> b} 和 {b -> a} 是重复的。因此，我希望该函数将其视为重复项，并且只返回其中一个。

我尝试使用 array_flip / array_unique 在循环中交换键和值，但效果不佳。

即使它是一个大长度的数组，你能帮忙找到一种方法吗？或者如果有一个 php 函数可以做到这一点。

非常感谢您的帮助，谢谢。

* * *

有代码来说明这个想法：

对于这样的数组：

```
Array ( 
    [0] => Array ( [0] => a [1] => b)
    [1] => Array ( [0] => a [1] => c )
    [2] => Array ( [0] => b [1] => a )
    [3] => Array ( [0] => b [1] => c )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:38:49.253

这将删除您的重复项

```
foreach($array as $key => $value){
     if (isset($array[$key])){
        if(isset($array[$value])){
            if($array[$value] == $key){
                unset($array[$value]);
            }
        }
     }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T13:03:34.757

这应该有效：

```
function cleanArray($array)
{
   $newArray = array();
   foreach ($array as $key => $val) {
      if (isset($array[$val]) && $array[$val] == $key) {
         if (!isset($newArray[$key]) && !isset($newArray[$val])) {
            $newArray[$key] = $val; 
         }      
         unset($array[$key], $array[$val]);
      }
   }    
   return array_merge($array, $newArray);
} 
```

[这里的工作示例](https://ignite.io/code/5128be14ec221e1307000000)。

# erlang - Erlang supervisor:start_child 参数

> ID：15040088
> 
> 赞同：0
> 
> 时间：2013-02-23T11:34:45.900
> 
> 标签：erlang, nntp

我试图从 ErlNNTP 理解这段主管代码，即使在阅读了关于 start-child 的 erlang 文档（Erlang n00b）（[http://www.erlang.org/doc/man ）之后，我也无法理解它/supervisor.html#start_child-2](http://www.erlang.org/doc/man/supervisor.html#start_child-2) )

> start_connection_handler (Socket) -> supervisor:start_child (?MODULE, {Socket, {connection_handler, start_link, [Socket]}, 永久, 10000, worker, [connection_handler]})。

我不太了解我希望成为 SupRef 的 'Socket' 参数。我显然没有正确解析参数列表或理解调用。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:49:35.277

第二个参数 to`supervisor:start_child/2`是一个子规范，其格式为：

```
{Id,StartFunction,RestartType,Shutdowntime,ProcessType,Modules} 
```

在哪里

*   `Id`**是在主管中唯一**的孩子的标识符，它可以是任何数据类型。

*   `StartFunction`是一个元组`{Module,Function,Args}`，它是启动子进程的调用。

*   `RestartType`告诉主管如何重新启动这个孩子，它可以有值`permanent`，`transient`或`temporary`。

*   `ShutdownTime`是子进程在被终止之前被允许在终止中花费的金额。

*   `ProcessType`孩子是 a`worker`还是`supervisor`.

*   `Modules`实现子模块的列表

代码升级时使用后两个。

因此，在您的情况下`Socket`，它被用作标识符。这样做意味着当您为新套接字启动处理程序时，您将获得一个唯一标识符。

# c - 在链表末尾追加

> ID：15040090
> 
> 赞同：2
> 
> 时间：2013-02-23T11:34:52.003
> 
> 标签：c, linked-list, append

我一直致力于在 C 中实现链表。所以在有人对我大喊大叫之前：是的，这是“家庭作业”。我一直在尝试解决和研究 Nick Parlante 的“链表基础知识”——可在以下网址免费获得：http: [//cslibrary.stanford.edu/103](http://cslibrary.stanford.edu/103)

功能：在链表末尾插入元素

我偶然发现了一个实现问题并设法构建了一个解决方法：如果我在 LList 中使用“EndPointer”，我可以使用返回函数来设置函数的 EndPointer 以移交新的 ReferencePointer，然后在 main.xml 中更改它。

代码 - 工作正常，但解决方法：

```
// within main
lastPtrRef = _pushEnd(lastPtrRef, i);

// == function: push to end
node** _pushEnd(node **endRef, int value)
{
    // 1) allocate stack mem / make room for new element
    node *newNode = malloc(sizeof(node));

    // do the data work
    newNode->value = value;

    // 2) make  element point to NULL (fo beeing the new last element
    newNode->next = NULL;

    // 3) make old last element point to new element
    *endRef = newNode;

    return &(newNode->next); // more readable then vers. below
    // this returns the mem address only of the pointer of the node!!!
    //return (&((*endRef)->next));

} 
```

==================================================== ==============================

到目前为止，这就是我在函数中所做的所有工作，但它实际上不起作用。关于我没有得到哪一点的任何提示？！

```
void _pushEnd(node **endRef, int value)
{
// 1) allocate stack mem / make room for new element
node *newNode = malloc(sizeof(node));

// do the data work
newNode->value = value;

// 2) make  element point to NULL (fo beeing the new last element
newNode->next = NULL;

// 3) make old last element point to new element
*endRef = newNode;

} 
```

难道是，我实际上需要一个指向引用指针的指针来实际更改指向最后一个元素的指针的内容（在范围内：main），所以我目前似乎只是在修改局部变量“endRef”和不是它的内容？！

任何帮助，将不胜感激...

* * *

编辑：这个想法是在 LList 的开头不使用虚拟节点来追加。

我的结构如下所示：

```
typedef struct node     {
int     value;
struct node *next;      } node; 
```

主要 - 局部变量（堆栈）：

```
node *head = NULL;
node **lastPtrRef = &head; 
```

* * *

编辑：无论如何，大多数命题最终都返回了 refPointer。但也许这不是一个坏主意，因为它不需要另一个指向 refPointer 的 refPointer。

**感谢您的所有帮助和许多有用的评论！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:42:02.700

> ```
> *endRef = newNode; 
> ```

在您这样做之前，您必须**先****说明`endRef->next``newNode`**.

```
if (*endRef)
    (*endRef)->next = newNode;

*endRef = newNode; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T11:43:12.697

`_pushEnd`告诉`main`我们`main`已经知道的：指针的存储位置。

您有很多选择，包括：

*   pushEnd 获取 node*（不是 node**），返回新的指针并将它的 main 存储在它的变量中

*   pushEnd 获取 node** 并自行覆盖 main 的值，无需返回任何内容。

**编辑：**

第 1 点的示例：

```
node* pushEnd(node* end, int entry); // returns new end.
int main() {
    node* end = newlist();
    int i=0;for(;i<10;++i) {
        end = pushEnd(end, i);
    }
} 
```

第 2 点的示例：

```
void pushEnd(node** ptrToEnd, int entry); // changes *ptrToEnd
int main() {
    node* end = newlist();
    int i=0;for(;i<10;++i) {
        pushEnd(&end, i);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:42:27.617

我认为您的问题在于退货线：

```
return (&((*endRef)->next)); 
```

正如您在此之前所做的那样，`*endRef = newNode;`它现在返回您刚刚创建的节点的下一个元素的方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T13:28:16.437

```
struct node {
   struct node *next;
   int value;
   };

struct node *root = NULL
   , **lastPtrRef = &root;

 // within main
lastPtrRef = pushEnd(lastPtrRef, i);

//function: push to end; return new pointer to tail->next

struct node  **pushEnd(struct node **p, int value)
{
    struct node *p;

    // 0) is it really the end ?    
    while (*pp) {pp = &(*pp)->next; }

    // 1) allocate
    p = malloc(sizeof *p);

    // do the data work
    p->value = value;

    // 2) make  element point to NULL (fo beeing the new last element
    p->next = NULL;

    // 3) make old last element point to new element
    *pp = p;

    return &p->next;

} 
```

或者删除 p 变量，因为它不需要：

```
struct node  **pushEnd(struct node **p, int value)
{

    while (*pp) {pp = &(*pp)->next; }

    *pp = malloc(sizeof **pp);
    (*pp)->value = value;
    (*pp)->next = NULL;

    return &(*pp)->next;

} 
```

# java - 程序 javac 可以在以下包 ubuntu 中找到

> ID：15040093
> 
> 赞同：2
> 
> 时间：2013-02-23T11:34:59.180
> 
> 标签：java, javac, openjdk, gcj

打字

```
$ java -version
The program 'java' can be found in the following packages:
  * gcj-4.4-jre-headless
  * gcj-4.5-jre-headless
  * openjdk-6-jre-headless
Try: sudo apt-get install <selected package> 
```

[我已经按照http://www.wikihow.com/Install-Oracle-Java-on-Ubuntu-Linux](http://www.wikihow.com/Install-Oracle-Java-on-Ubuntu-Linux)安装了 oracle jdk-7u15-linux-i586.tar.gz 。还，

```
$ javac
The program 'javac' can be found in the following packages:
  * openjdk-6-jdk
  * ecj
  * gcj-4.4-jdk
  * gcj-4.5-jdk
Try: sudo apt-get install <selected package> 
```

请帮助我在系统上只有 Sun JDK/JRE。我使用 wubi 运行 Ubuntu 11.04。

# iphone - 在应用更新后处理丢失的 NSUserDefault 键

> ID：15040098
> 
> 赞同：2
> 
> 时间：2013-02-23T11:35:38.517
> 
> 标签：iphone, ios, cocoa-touch, nsuserdefaults

我刚刚被烧毁了，因为我的 iOS 应用程序的更新在 App Store 上上线了，不幸的是，由于我的代码使用方式中的错误，它在使用新功能时崩溃了`NSUserDefaults`。我的应用使用`registerDefaults`，但新功能尝试写入升级后不存在的密钥。如果从头开始安装它可以正常工作，因为密钥是由`registerDefaults`.

具体来说，我的应用程序使用嵌套字典，因此在更新之前，首选项文件具有以下结构：

```
<dict>
    <key>Alpha</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
    <key>Beta</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
    <key>Charlie</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
</dict> 
```

——更新后，需要密钥*Delta*：

```
<dict>
    <key>Alpha</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
    <key>Beta</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
    <key>Charlie</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
    <key>Delta</key>
    <dict>
        <key>Key</key>
        <string>Value</string>
    </dict>
</dict> 
```

当我的代码尝试从用户默认值中检索*Delta*的字典以便向其中写入一些键和值时，它发生了故障。对于这种情况，字典是`nil`因为更新后它不在首选项文件中。

处理这种情况的最佳实践方法是什么？我是否应该在尝试写入并在需要时创建它之前简单地检查一下 Delta 的字典是否存在，或者是否有更少的皮带和大括号方法*？*`nil`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:22:13.170

我为避免这些情况而遵循的模式如下：

在我的 ApplicationDelegate`+(void)initialize`方法中，我像这样设置键及其默认值，以确保在设置之前没有尝试触及默认值：

```
+(void)initialize
{
    NSDictionary *factoryPrefs = @{MyNewPrefKey:@"ANewPrefKeyDefaultValue"};
}
[[NSUserDefaults standardUserDefaults] registerDefaults:factoryPrefs];
userSettings = [NSUserDefaults standardUserDefaults]; 
```

接下来，在此之后，我有一个基于当前版本的代码块，开始检查是否存在暗示用户正在升级（不是新的）的先前值。在这种情况下，我将不得不迁移/更新首选项。

例如，有时必须更改键或插入值，就像您在以前的版本中存储了一个值为 a、b、c 的 NSDictionary 对象，但现在在这个版本中。您的依赖（并假设）“d”值也在那里。

在这种情况下`registerDefaults`不会有帮助，因为正如您所指出的，该值是先前创建的。因此，您必须手动检查“d”是否在其中，如果没有将其与默认值一起插入。这是 Prefs 的 CoreData 迁移等价物 :)

这就是我所做的。我虔诚地做这件事。我在每次发布时都会检查它，因为...我被烧死了，就像你以前不这样做一样。然后我们都知道接下来会发生什么，你会得到一个严肃的 1 星 a.. 在 App Store 中大喊大叫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T17:03:15.430

我对你的数据做了一个简单的测试：

1.  将 defaults.plist 文件添加到空项目中；

2.  设置 defaults.plist 以包含 Alpha/Beta/Charlie 键（根据您的示例）；

3.  在 appDidFinishLaunching 时使用以下代码：

    ```
    NSString* path = [[NSBundle mainBundle] pathForResource:@"defaults" ofType:@"plist"];
    NSDictionary* factoryPrefs = [NSMutableDictionary dictionaryWithContentsOfFile:path];
    [[NSUserDefaults standardUserDefaults] registerDefaults:factoryPrefs];
    NSLog(@"Delta Key: %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"Delta"]);

    //-- store some user custom values
    NSLog(@"Charlie Key %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"Charlie"]);
    [[NSUserDefaults standardUserDefaults] setObject:@"test" forKey:@"Charlie"];
    NSLog(@"Charlie Key %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"Charlie"]); 
    ```

4.  运行应用程序；

结果是：

```
2013-02-23 17:59:10.795 JigSaw[14747:c07] Delta Key (null)
2013-02-23 17:59:10.797 JigSaw[14747:c07] Charlie Key {
    Key = Value;
}
2013-02-23 17:59:10.797 JigSaw[14747:c07] Charlie Key test 
```

然后，我通过添加 Delta 键（再次，根据您的示例）更改了 defaults.plist 的内容，并再次构建/运行了应用程序（当然，没有从设备中删除它）。

结果是：

```
2013-02-23 18:00:37.840 JigSaw[15040:c07] Delta Key {
    Key = Value;
}
2013-02-23 18:00:37.842 JigSaw[15040:c07] Charlie Key test
2013-02-23 18:00:37.842 JigSaw[15040:c07] Charlie Key test 
```

因此，在上面的示例中使用时，似乎`registerDefaults`可以正确处理任何新添加的键。

我倾向于认为要么您使用`registerDefaults`不正确，要么您正在其他地方做一些导致崩溃的事情。

在更一般的层面上，除了测试应用程序更新场景（事后建议这是微不足道的，我们都以一种或另一种方式艰难地学会了它），对我来说，最好的做法是确保你的应用程序确实即使存在错误或不可预见的输入，也不会崩溃。

# c++ - 带有模板参数的模板类上的赋值运算符重载

> ID：15040099
> 
> 赞同：1
> 
> 时间：2013-02-23T11:35:44.597
> 
> 标签：c++, class, templates

我正在设计自己的迭代器类，以便可以为我的容器创建自定义迭代器。我认为这是最简单的方法，而不是从 bidirectional_iterator 或 iterator_traits 继承。问题是容器也是模板化的。在为这个类编写我的复制构造函数和赋值运算符时，编译器不喜欢返回类型和参数（这是一个

```
iterator<someContainer<someClasstype>>. 
```

这是一个可以解决的问题吗？或者这是对模板深度的限制？

这是课程：

```
template <template<class Data> class Cont, class T>
class iterator
{
    typedef typename Cont<T>    container_type;
    typedef T*      ptr_type;
    typedef T       value_type;
private:
    ptr_type _ptr;
    size_t _alloc;  // offset to apply when jumping contiguos addresses
public:
    // ctors

    // Default
    explicit iterator()
    {
        _ptr = 0;
        _alloc = sizeof(value_type);
    }

    // reference
    explicit iterator(const value_type& address): _ptr(address)
    {
            _alloc = sizeof(value_type);
    }

    // pointer
    explicit iterator(const ptr_type ptr): _ptr(ptr)
    {
        _alloc = sizeof(value_type);
    }

    // copy
    iterator(const iterator<Cont<T>, T>& right)
    {
        _ptr = right._ptr;
        _alloc = right._alloc;
    }

    // operators

    // assignment
    iterator<Cont<T>, T>& operator=(const value_type& address)
    {
        return *this(address);
    }

    iterator<Cont<T>, T>& operator=(const ptr_type ptr)
    {
        return *this(ptr);
    }

    iterator<Cont<T>, T>& operator=(const iterator<container_type, T>& right)
    {
        return *this(right);
    }

    // equality
    bool operator==(const iterator<container_type, T>& right)
    {
        return (_ptr == right._ptr && _alloc == right._alloc);
    }

    // dereference
    T& operator*(const iterator<container_type, T>& it)
    {
        return *_ptr;
    }

    T* operator()   // get value operator? (ie list<int>::iterator returns the memory address, even though its a class
    {
        return _ptr;
    }

}; 
```

到目前为止，我已经尝试过这些组合：

```
iterator<Cont<T>>
iterator<Cont<T>, T>
iterator<container_type> // typedef of Cont<T>
iterator<container_type, T> 
```

但没有一个被接受。编译器错误是：

```
Error   1   error C3200: 'Cont<T>' : invalid template argument for template parameter 'Cont', expected a class template c:\users\sapphire\documents\visual studio 2012\projects\hybridlist\hybridlist\iterator.h    43

Error   2   error C2976: 'iterator' : too few template arguments    c:\users\sapphire\documents\visual studio 2012\projects\hybridlist\hybridlist\iterator.h    53 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:40:56.533

`iterator`的第一个模板参数是模板模板参数。也就是说，它应该将模板作为其参数。您不能给出`Cont<T>`，因为那是模板的特定实例化。尝试：

```
iterator<Cont, T> 
```

值得注意的是`Data`in`template<class Data> class Cont`是多余的。只会`template<class> class Cont`做得很好。

考虑继承自[`std::iterator`](http://en.cppreference.com/w/cpp/iterator/iterator)——这就是它的设计目的。

# github - GitHub 和 VS 2012 同步

> ID：15040101
> 
> 赞同：0
> 
> 时间：2013-02-23T11:36:00.677
> 
> 标签：github, visual-studio-2012

是否可以同步我的 VS 2012 解决方案以直接与 GITHUB 中的存储库合并？就像我在 VS 2012 中制作了一个解决方案或项目一样，我是否能够直接将其更新到 VS 2012 的存储库中？是否有额外的插件可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:20:14.683

我只是在网上冲浪得到了解决方案。[链接](http://blogs.msdn.com/b/codeplex/archive/2013/01/30/using-visual-studio-git-with-codeplex.aspx)在这里。下面给出了一些细节。

**唯一的问题是它的 CodePlex 不是 GITHUB**

> Brian Harry 今天在 ALM 峰会上发表了两项重要声明。1.Visual Studio 将支持 Git 2.Team Foundation Server 将托管 Git 存储库。当我们在去年 3 月将 Git 添加到 CodePlex 时，对于许多客户来说，一个缺失的部分是在 Visual Studio 中拥有出色的 Git 工具。借助 Visual Studio 2012 Update 2 的 CTP 版本以及 Git VSIX 的 CTP，您现在可以在 Visual Studio 中使用 Git。在过去的几个月里，CodePlex 团队一直在测试这些工具，我们期待得到公众的反馈。将 VS Git 与 CodePlex 结合使用 由于 Visual Studio Git 客户端可与任何 Git 远程配合使用，因此您可以轻松地为您的 CodePlex Git 项目配置它。

# jquery - jquery next previous 非预加载图像

> ID：15040104
> 
> 赞同：0
> 
> 时间：2013-02-23T11:36:13.167
> 
> 标签：jquery, image, slider, gallery, next

我正在创建一个非常简单的图片库，它只加载画廊的第一张图片。用户需要单击缩略图才能查看图像。这是因为我为画廊使用了一张大图片，这样它就不必加载每张图片。现在我在创建下一个和上一个按钮时遇到问题。

这是图像加载的地方

```
<div class="entry-content">
<div class="img-box">
<img id="img-preview" src="#" >
</div>
</div> 
```

这是分页

```
<div class="paginate">  
<a href="#" class="prev"></a>
<a href="#" class="next"></a>
</div> 
```

这是缩略图所属的地方

```
<ul id="related-category"> 
<li class="photo"><a href="#" ></a></li>
<li class="photo"><a href="#" ></a></li>
<li class="photo"><a href="#" ></a></li>
<li class="photo"><a href="#" ></a></li>
</ul> 
```

查询

```
jqu(document).ready(function(){

jqu("#related-category li a").click(function(){

    var largePath = jqu(this).attr("href");    
    jqu("#img-preview").attr({ src: largePath });
    return false;

});

    jqu("a.next").click(function(){
    jqu(" li.photo").next("a");
});
    jqu("a.prev").click(function(){
    jqu("li.photo").prev("a");
});
}); 
```

我一直在寻找解决方案，但是大多数滑块图像都是在滑块加载时预加载的，而我的则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:47:26.440

和方法不会导致点击发生，它们会创建一个 jQuery 对象，其中包含与当前元素在 DOM 中处于同一级别的下一个或上一个元素`.next()`。`.prev()`所以`jqu("li.photo").next("a")`不会找到任何东西，因为没有与 li 元素处于同一级别的锚点，并且无论如何都会`"li.photo"`选择*所有*li 元素。

我建议您在单击的 li 上设置一个标志（使用一个类）以记住它是哪个，然后您可以从*该*元素使用`.next()`and ：`.prev()`

 *```
jqu("#related-category li a").click(function(){
    jqu("#related-category li").removeClass("selected");
    jqu(this).parent().addClass("selected");
    var largePath = jqu(this).attr("href");    
    jqu("#img-preview").attr({ src: largePath });
    return false;    
});

jqu("a.next").click(function(){
    jqu("li.selected").next().find("a").click();
});
jqu("a.prev").click(function(){
    jqu("li.selected").prev().find("a").click();
}); 
```

演示：http: [//jsbin.com/iruyap/1/edit](http://jsbin.com/iruyap/1/edit)

（注意：如果没有上一个或下一个项目，您可能希望向 prev 和 next 处理程序添加一些代码来执行某些操作。）*

# c++ - 涉及 if 语句和函数的循环问题

> ID：15040115
> 
> 赞同：-5
> 
> 时间：2013-02-23T11:37:54.147
> 
> 标签：c++, function, if-statement

该计划的预期结果如下：

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：1
选择计算 (1) 体积 (2) 表面积：1
输入球体半径：5.5
球体体积为 696.91

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：1
选择计算 (1) 体积 (2) 表面积：2
输入球体半径：5.5 球体
表面积为 380.133

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：2
选择计算 (1) 体积 (2) 表面积：1
输入圆柱体半径：5.5
输入圆柱体高度：4.2
圆柱体体积是 399.139

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：2
选择计算 (1) 体积 (2) 表面积：2
输入圆柱体半径：5.5
输入圆柱体高度：4.2
表面积气缸是 335.208

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：3
选择计算 (1) 体积 (2) 表面积：1
输入圆锥体半径：5.5
输入圆锥体高度：4.2
圆锥体体积是 133.046

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：3
选择计算 (1) 体积 (2) 表面积：2
输入圆锥体半径：5.5
输入圆锥体高度：4.2
表面积圆锥是 214.607

选择形状 (1) 球体 (2) 圆柱体 (3) 圆锥体 (q) 退出：q

再见！

我想你可以知道我的前进方向......为什么我不能让我的循环正常工作？

```
#include <iostream>
#include <math.h>

using namespace std;

double sphere_volume(double radius);
double sphere_surface_area(double radius);
double cylinder_volume(double radius, double height);
double cylinder_surface_area(double radius, double height);
double cone_volume(double radius, double height);
double cone_surface_area(double radius, double height);

int main()
{
double entHeight;
double entRadius;
char shapeCall;
char compCall;

cout << "Select a Shape (1) sphere (2) cylinder (3) cone (q) quit: ";
cin >> shapeCall;
cout << "Select a Computation (1) volume (2) surface area: ";
cin >> compCall;

    if ( shapeCall == 1 && compCall == 1)
    {
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << sphere_volume (entRadius) << endl; 

    }
    if ( shapeCall == 1 && compCall == 2)

    {
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << sphere_surface_area (entRadius) << endl;
    }
    if ( shapeCall == 2 && compCall == 1)
    {
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << "Enter Height: ";
            cin >> entHeight;
            cout << cylinder_volume (entRadius, entHeight) << endl;
    }
    if (shapeCall == 2 && compCall == 2)
    {
            cout << "Enter Radius: ";
            cin >> entRadius;
            cout << "Enter Height: ";
            cin >> entHeight;
            cout << cylinder_surface_area (entRadius, entHeight) << endl;
    }
    if (shapeCall == 3  && compCall == 1)
    {
        cout << "Enter Radius: ";
        cin >> entRadius;
        cout << "Enter Height: ";
        cin >> entHeight;
        cout << cone_volume (entRadius, entHeight) << endl;
    }
    if (shapeCall == 3 && compCall == 2)
    { 
        cout << "Enter Radius: ";
        cin >> entRadius;
        cout << "Enter Height: ";
        cin >> entHeight;
        cout << cone_surface_area (entRadius, entHeight) << endl;
    }
system ("pause");
return 0;
}

double sphere_Volume(double radius) 
  { 
   return 4.0 / 3.0 * 3.14159 * pow( radius, 3 ); 
  }
double cylinder_volume(double radius, double height)
  { 
  return 3.14159 * pow(radius, 2) * height;
  }
double cone_volume(double radius, double height)
  {
  return 1.0 / 3.0 * 3.14159 * pow(radius, 2) * height;
  }
double sphere_surface_area(double radius)
  {
  return 4.0 * 3.14159 * pow(radius, 2);
  }
double cylinder_surface_area(double radius, double height)
  {
  return (2.0 * 3.14159 * pow(radius, 2)) + (2.0 * 3.14159 * radius * height);
  }
double cone_surface_area(double radius, double height)
  {
  return (3.14159 * pow(radius, 2)) + (3.14159 * radius * sqrt(pow(radius, 2) +  pow(height, 2)));
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:53:16.927

有两个主要问题。您声明`sphere_volume`：

```
double sphere_volume(double radius); 
```

但你定义`sphere_Volume`：

```
double sphere_Volume(double radius) 
{ 
    return 4.0 / 3.0 * 3.14159 * pow( radius, 3 ); 
} 
```

由于您使用`sphere_volume`in `main`，您可能应该将定义更改为`sphere_volume`.

另一个问题是您实际上没有循环。您的`main`函数将运行一次，但随后它会命中`return 0;`并且程序将终止。

添加循环的一种方法是在以第一个开头`cout`并在以 之前结束之后`system("pause")`包含代码`while(shapeCall != 'q')`。

# c# - 如果找不到请求的页面或asp.net中发生任何错误，我们如何重定向到任何默认页面

> ID：15040117
> 
> 赞同：0
> 
> 时间：2013-02-23T11:38:14.343
> 
> 标签：c#, asp.net

如果找不到请求的页面或在 asp.net 中发生任何错误，例如在错误 404 的情况下，我们如何重定向到任何默认页面......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:42:45.583

您可以在 web.config 文件中使用 customErrors 标记。

所以，你可以有这样的东西：

```
<configuration>
     ...
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/Oops.aspx">
             <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
        </customErrors>
        ....
    </system.web>
</configuration> 
```

其中 Oops.aspx 将是显示所有 HTTP 错误代码的页面。内部错误标签允许您为某些错误代码指定特定页面。如果您不想要这种行为，只需删除内部标签。

有关更多信息，请查看[http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:06:09.103

web.config 文件中的 customErrors 标记是您的朋友...

```
<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/Error.aspx">
            <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
        </customErrors>
    </system.web>
</configuration> 
```

您可以为一般错误设置一个通用的包罗万象的页面，然后为各个状态代码指定页面，从而允许您为 404 错误提供自定义消息。

还要注意模式标签——“RemoteOnly”只会为远程用户显示自定义错误，“On”也会为本地用户显示自定义错误。使用“On”设置错误页面，然后切换到“RemoteOnly”，这样您在开发时仍然可以看到异常

[http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)

# java - 如何将 inpustream 文件分配给 json？

> ID：15040118
> 
> 赞同：0
> 
> 时间：2013-02-23T11:38:37.723
> 
> 标签：java, json, inputstream

```
DataInputStream rd = new DataInputStream(request.getInputStream());
JsonObject json = new JsonObject(); 
```

上面的代码用于服务器。服务器获得一个输入流，我希望将此流分配给 JsonObject。如何将此“rd”分配给“json”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:17:25.520

将输入流转换为字符串

```
 public static String convertStreamToString(InputStream is) throws IOException {
       if (is != null) {
        Writer writer = new StringWriter();
        char[] buffer = new char[1024];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } catch (Exception e) {
            Log.getStackTraceString(e);
        } finally {
            is.close();
        }
        return writer.toString();
    } else {
        return "";
    }
} 
```

使用 pojo 类流式传输到对象，例如：

```
public class PageInfo { 
private String pageName;
private String pageContent;

public String getPageName() {
    return pageName;
}

public void setPageName(String pageName) {
    this.pageName = pageName;
}

public String getColorCode() {
    return colorCode;
}

public void setColorCode(String colorCode) {
    this.colorCode = colorCode;
} 
```

}

映射器类将字符串转换为对象

```
 public Vector<PageInfo> getPageInfo(Cursor cursor) {
    Vector<PageInfo> pageInfo = new Vector<PageInfo>();
    // Column Index
    int pageContent;

    if (cursor != null) {

        if (cursor.moveToFirst()) {
            do {
                PageInfo info  = new PageInfo();

                pageContent = cursor.getColumnIndex(TablePageInfo.PAGE_CONTENT);
                colorCode = cursor.getColumnIndex(TablePageInfo.COLOR_CODE);
                bookMark = cursor.getColumnIndex(TablePageInfo.BOOK_MARK);

                info.setPageContent(cursor.getString(pageContent));

                pageInfo.add(info);

            } while (cursor.moveToNext());
        }

    }
    if (cursor != null && !cursor.isClosed()) {
        cursor.close();
    }
    return pageInfo;
} 
```

添加 GSON Jar 然后编写下面的代码它将获取任何对象并返回一个完美的 JSON

```
package common;

import com.google.gson.Gson;

import com.google.gson.GsonBuilder;

//Generics is used so any class type can be passed
public class GsonSerializer<T> {

public T Deserialize(String json, Class classOfT) {

Gson gn = new GsonBuilder().create();

return (T) gn.fromJson(json, classOfT);

}

public String Serialize(T object) {

Gson gn = new GsonBuilder().create();

return gn.toJson(object);

}

} 
```

更详细的可以参考我的博客

[http://lifeasanandroiddeveloper.blogspot.kr/2011/11/how-to-serialize-and-desearilize-json.html](http://lifeasanandroiddeveloper.blogspot.kr/2011/11/how-to-serialize-and-desearilize-json.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:17:37.820

转换为`String`，然后转换为`JSONObject`.

```
StringWriter writer = new StringWriter();
IOUtils.copy(request.getInputStream(), writer, encoding);
String theString = writer.toString();
JSONObject json = new JSONObject(theString); 
```

详情`IOUtils`请看[这里](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)。

要获取包含`IOUtils`该类的 jar，请查看[此处](http://commons.apache.org/io/download_io.cgi)

# javascript - 在浏览器中接收 WebSocket ArrayBuffer 数据 - 改为接收字符串

> ID：15040126
> 
> 赞同：7
> 
> 时间：2013-02-23T11:39:36.003
> 
> 标签：javascript, node.js, websocket, arraybuffer

我有一个 node.js 服务器应用程序和一个浏览器客户端。发送`ArrayBuffer`数据浏览器 - > 服务器工作正常，但服务器 - > 浏览器导致`"[object ArrayBuffer]"`接收到一个字符串。这发生在 Chrome 和 Firefox 的最新版本中。

服务器：

```
var serverPort = 9867;

// dependencies
var webSocketServer = require('websocket').server;
var http = require('http');
var players = {};
var nextPlayerId = 0;

// create http server
var server = http.createServer(function(request, response) { });
server.listen(serverPort, function() {
    console.log((new Date()) + " Server is listening on port " + serverPort);
});

// create websocket server
var wServer = new webSocketServer({ httpServer: server });
// connection request callback
wServer.on('request', function(request) {
    var connection = request.accept(null, request.origin); 
    connection.binaryType = "arraybuffer";
    var player = {};
    player.connection = connection;
    player.id = nextPlayerId;
    nextPlayerId++;
    players[player.id] = player;
    console.log((new Date()) + ' connect: ' + player.id);

    // message received callback
    connection.on('message', function(message) {
        if (message.type == 'binary' && 'binaryData' in message && message.binaryData instanceof Buffer) {
            // this works! 
            console.log('received:');
            console.log(message);   

        }
    });

    // connection closed callback
    connection.on('close', function(connection) {
        console.log((new Date()) + ' disconnect: ' + player.id);
        delete players[player.id];
    });
});

function loop() {
    var byteArray = new Uint8Array(2);
    byteArray[0] = 1;
    byteArray[0] = 2;
    for (var index in players) {
        var player = players[index];
        console.log('sending: ');
        console.log(byteArray.buffer);
        player.connection.send(byteArray.buffer);
    }
}

timerId = setInterval(loop, 500); 
```

客户：

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <script type="text/javascript">

      window.WebSocket = window.WebSocket || window.MozWebSocket;
      var connection = new WebSocket('ws://127.0.0.1:9867');
      connection.binaryType = "arraybuffer";

      // most important part - incoming messages
      connection.onmessage = function (event) {
        document.getElementById("log").innerHTML += typeof(event.data) + ' ';
        document.getElementById("log").innerHTML += event.data + ' ';       
        if (event.data instanceof ArrayBuffer) {
          // string received instead of a buffer
        }
      };

      window.onkeydown = function(e) {
        var byteArray = new Uint8Array(2);
        byteArray[0] = 1;
        byteArray[1] = e.keyCode;
        connection.send(byteArray.buffer);
      };
    </script>

    <div id='log'>Log: </div>
  </body>
</html> 
```

我究竟做错了什么？

**编辑：**

从 node.js websocket 源：

```
WebSocketConnection.prototype.send = function(data, cb) {
    if (Buffer.isBuffer(data)) {
        this.sendBytes(data, cb);
    }
    else if (typeof(data['toString']) === 'function') {
        this.sendUTF(data, cb);
    } 
```

因此，如果您使用`Uint8Array`，它会将数据作为字符串发送，而不是`sendBytes`像`sendBytes`需要`Buffer`对象那样使用 。正如下面的答案，我需要`sendBytes`. 由于我无法传递`ArrayBuffer`to `sendBytes`，因此我在服务器上执行了此操作：

```
function loop() {
    var buffer = new Buffer(2);
    buffer[0] = 1;
    buffer[1] = 2;
    for (var index in players) {
        var player = players[index];
        console.log('sending: ');
        console.log(buffer);
        player.connection.send(buffer);
    }
} 
```

现在它起作用了。

**结论：**

虽然 Chrome 和 Firefox websockets`.send()`将`Uint8Array`缓冲区作为二进制数据，但似乎 node.js websockets 将其作为`string`数据发送，并且您需要一个`Buffer`缓冲区来发送二进制数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T12:23:02.640

发送二进制数据的使用`sendBytes()`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-19T06:52:55.093

我最近一直在玩 websockets，至少这似乎有效：

```
if(event.data instanceof ArrayBuffer)
{
  var wordarray = new Uint16Array(event.data);
  for (var i = 0; i < wordarray.length; i++) 
  {
    console.log(wordarray[i]);
    wordarray[i]=wordarray[i]+1;
  }
  console.log("End of binary message");  
  console.log("sending changes");  
  ws.send(wordarray.buffer);
} 
```

基本上我只是基于 event.data 创建一个新数组

# php - PHP比较2个多维数组并根据键值删除重复项

> ID：15040129
> 
> 赞同：0
> 
> 时间：2013-02-23T11:40:02.230
> 
> 标签：php, arrays, multidimensional-array

我有 2 个数组，例如

老会员：

```
Array (
  [0] => Array
    (
        [time] => 1361612421
        [memberid] => 90
    )

  [1] => Array
    (
        [time] => 1361614422
        [memberid] => 96
    )

  [2] => Array
    (
        [time] => 1361617423
        [memberid] => 108
    )
) 
```

和新成员

```
Array (
  [0] => Array
    (
        [time] => 1361618411
        [memberid] => 103
    )

  [1] => Array
    (
        [time] => 1361618443
        [memberid] => 129
    )
  [2] => Array
    (
        [time] => 1361618463
        [memberid] => 96
    )
) 
```

根据 key memberid 从 NewMembers 中删除重复项的最佳方法是什么？例如，在这种情况下，我需要从 NewMembers 中删除第二个数组，因为成员 ID 96 已经存在于位置 1 的 OldMembers 中......我只需要从 NewMembers 数组中删除该实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:49:06.403

肯定不是最好的答案，但如果没有其他人会提出任何建议，至少你会有那个。

```
foreach($newmembers as $newmemberId => $newmember) {
    foreach($oldmembers as $oldmember) {
        if($oldmember['memberid'] == $newmember['memberid']) {
            unset($newmembers[$newmemberId]);
            break;
        }
    }
} 
```

$newmembers 和 $oldmembers 当然是你的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:49:54.177

尝试

```
array_unique( array_merge($oldMember, $newMember) ); 
```

没有测试，但希望它会工作。

**测试代码。**

```
<?php
$oldMember = array
(
    '0' => array
    (
        'time' => 1361612421,
        'memberid' => 90
    ),
    '1' => array
    (
        'time' => 1361614422,
        'memberid' => 96
    ),
    '2' => array
    (
        'time' => 1361617423,
        'memberid' => 108
    )
);

$newMember = array
(
    '0' => array
    (
        'time' => 1361618411,
        'memberid' => 103
    ),
    '1' => array
    (
        'time' => 1361618443,
        'memberid' => 129
    ),
    '2' => array
    (
        'time' => 1361618463,
        'memberid' => 96
    )
);

$id_arr = array();
$final_arr = array();

checkmemberidArray($oldMember, $id_arr, $final_arr);
checkmemberidArray($newMember, $id_arr, $final_arr);

function checkmemberidArray($arr, &$id_arr, &$final_arr)
{
    foreach ($arr as $key => $value)
    {
        if (!in_array($value['memberid'], $id_arr))
        {
            $id_arr[] = $value['memberid'];
            $final_arr[] = $value;
        }
    }
}

echo "<pre>";
print_r($final_arr);
echo "</pre>";
?>
```

# linux - 如何获取目录的最新文件

> ID：15040132
> 
> 赞同：4
> 
> 时间：2013-02-23T11:40:17.530
> 
> 标签：linux, bash, wget

我想编写一个 bash 脚本来下载并安装最新的每日构建程序（RStudio）。是否可以只下载目录[http://www.rstudio.org/download/daily/desktop/](http://www.rstudio.org/download/daily/desktop/)`wget`中的最新文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:50:11.633

这些文件似乎是按发布日期排序的，每个新版本都是一个新条目，其新名称反映了版本号的变化，因此检查某个文件的时间戳似乎没有必要。

此外，您还提供了指向“目录”的链接，该目录本质上是一个网页。AFAIK，在 http 中没有目录之类的东西（这是一种在给定地址为您提供数据的通信协议）。您看到的是一个由服务器生成的列表，它类似于 windows 文件夹以方便使用，尽管它仍然是一个网页。

话虽如此，您可以抓取该网页。以下代码在列表的第一个位置下载文件（假设第一个是最新的）：

```
#!/bin/bash

wget -q -O tmp.html http://www.rstudio.org/download/daily/desktop/ubuntu64/
RELEASE_URL=`cat tmp.html | grep -m 1 -o -E "https[^<>]*?amd64.deb" | head -1`
rm tmp.html

# TODO Check if the old package name is the same as in RELEASE_URL.

# If not, then get the new version.
wget -q $RELEASE_URL 
```

现在您可以对照本地最新版本检查它，并在必要时进行安装。

编辑：更新版本，它执行简单的版本检查并安装包。

```
#!/bin/bash

MY_PATH=`dirname "$0"`
RES_DIR="$MY_PATH/res"

# Piping from stdout suggested by Chirlo.
RELEASE_URL=`wget -q -O - http://www.rstudio.org/download/daily/desktop/ubuntu64/ | grep -m 1 -o "https[^\']*"`

if [ "$RELEASE_URL" == "" ]; then
    echo "Package index not found. Maybe the server is down?"
    exit 1
fi

mkdir -p "$RES_DIR"
NEW_PACKAGE=${RELEASE_URL##https*/}
OLD_PACKAGE=`ls "$RES_DIR"`

if [ "$OLD_PACKAGE" == "" ] || [ "$OLD_PACKAGE" != "$NEW_PACKAGE" ]; then

    cd "$RES_DIR"
    rm -f $OLD_PACKAGE

    echo "New version found. Downloading..."
    wget -q $RELEASE_URL

    if [ ! -e "$NEW_PACKAGE" ]; then
        echo "Package not found."
        exit 1
    fi

    echo "Installing..."
    sudo dpkg -i $NEW_PACKAGE

else
    echo "rstudio up to date."
fi 
```

还有一些评论：

*   该脚本将本地`res/`目录保存为最新版本（恰好是一个文件），并将其名称与新抓取的包名称进行比较。这很脏（有一个文件并不意味着它过去已成功安装）。解析 的输出会更好`dpkg -l`，但包的名称可能与抓取的名称略有不同。
*   您仍然需要输入密码`sudo`，因此不会 100% 自动进行。有几种方法可以解决这个问题，但如果没有监督，您可能会遇到前面提到的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T23:07:42.383

@Richard Pumps 的一个稍微干净的变体：

```
RELEASE_URL=$(wget -q -O -  http://www.rstudio.org/download/daily/desktop/ubuntu64 | grep -o -m 1 "https[^\']*" )

# check version from name ...

wget ${RELEASE_URL} 
```

这避免了通过将 html 文件输出到 stdout 并对其进行过滤来创建 tmp 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:45:20.073

该`-N`选项将告诉 wget 仅获取较新版本的文件。然而，单独使用 wget，你不能做像下载某个远程目录中所有文件的最新文件那样广泛的事情。您需要编写一个 bash 脚本或其他东西来进行检查，然后调用 wget 来获取它。

# postgresql - PostgreSQL：为复合类型中的字段创建索引？

> ID：15040135
> 
> 赞同：12
> 
> 时间：2013-02-23T11:41:16.257
> 
> 标签：postgresql, types, indexing

是否可以在复合类型的某个字段上建立索引？例如，假设我创建了一个类型

```
CREATE TYPE complex AS (
    r       double precision,
    i       double precision
); 
```

并且想要一个（尤其是哈希/GIST/GIN）索引超过`r`一个`i`，这可能吗？

同样，是否可以在数组字段的第一个、第二个、第三个...元素上建立索引？

假设我使用`complex[]`, 是否有可能对 all `complex[0]`、 over all`complex[1]`等进行索引？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-23T13:34:11.003

是的，绝对有可能。使用[表达式索引](https://www.postgresql.org/docs/current/indexes-expressional.html)。棘手的部分是[复合类型的语法](https://www.postgresql.org/docs/current/rowtypes.html#ROWTYPES-ACCESSING)。

复杂类型元素上的 B 树索引：

```
CREATE TABLE tbl (tbl_id serial, co complex);

CREATE INDEX tbl_co_r_idx ON tbl (((co).r)); -- note the parentheses! 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_14&fiddle=3a25fb78914019c92eee9e7d136f176b)* - 使用`EXPLAIN ANALYZE`
[旧[sqlfiddle](http://sqlfiddle.com/#!17/ce2dc/2)]

同样的事情适用于数组的预定元素（不适用于整个数组！），即使对于复合类型的数组也是如此：

```
CREATE TABLE tbl2 (tbl2_id serial, co complex[]);

CREATE INDEX tbl2_co1_idx ON tbl2 ((co[1])); -- note the parentheses! 
```

请注意，如果表达式或多或少在字面上匹配，则表达式索引只能用于查询。

但这对于您提到的**GIN**索引没有意义。[手册](https://www.postgresql.org/docs/current/gin-intro.html)：

> GIN 代表广义倒排索引。GIN 设计用于处理要索引的项目是复合值的情况，并且要由索引处理的查询需要搜索出现在复合项目中的元素值。

*GIN 索引对整个*复杂类型的数组是有意义的，让您可以在其中搜索元素。但是您需要针对您的特定类型的实现。这是[标准 Postgres 中的示例列表](https://www.postgresql.org/docs/current/gin-examples.html)（除了对所有一维数组的基本支持）。

# android - Android 课堂吐司不起作用？

> ID：15040140
> 
> 赞同：0
> 
> 时间：2013-02-23T11:42:04.527
> 
> 标签：android, toast

吐司在课堂上不起作用，

这是我的代码：

```
public class ToastClass {

public ToastClass (Context activity){   
        callToast(activity);
    }   
    public void callToast(Context activity){
            Toast.makeText(activity, "success", Toast.LENGTH_SHORT).show();
    }   
} 
```

错误我得到这个，

```
 java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

我需要在课堂上做有什么办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T11:43:35.670

问题是您必须`Toast`在主线程上制作+显示您的 s 。不允许`Toast.makeText(...)`在任何其他线程内。

如果您只想延迟您的 Toast，请使用`Handler`，否则您可以使用任何`View`实例到[`postDelay(Runnable, long)`](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)您的 Toast。

在您的情况下，您有一个`Activity`实例，因此您可以调用它的[`runOnUiThread(Runnable)`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法。

```
activity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
       Toast.makeText(activity, "success", Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:45:20.193

尝试：

```
activity.runOnUiThread(
 new Runnable(){
  @Override
  public void run(){
   Toast.makeText(activity, "success", Toast.LENGTH_SHORT).show();
  }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:14:29.593

采用

`ClassName.this`而不是活动

# magento - magento 中的覆盖块不起作用

> ID：15040141
> 
> 赞同：1
> 
> 时间：2013-02-23T11:42:12.920
> 
> 标签：magento

顶部菜单不是通过自定义代码构建的。它由默认的主代码构建。请帮帮我。

app\code\local\Mynav\Mytopmenu\etc\config.xml

```
<global>

      <blocks>
        <mytopmenu>
            <rewrite>
                <html_topmenu>Mynav_Mytopmenu_Block_Html_Topmenu</html_topmenu>
            </rewrite>
        </mytopmenu>
    </blocks>

</global> 
```

app\code\local\Mynav\Mytopmenu\Block\Html\Topmenu.php

```
<?php

class Mynav_Mytopmenu_Block_Html_Topmenu extends Mage_Page_Block_Html_Topmenu
{
    /**
     * Top menu data tree
     *
     * @var Varien_Data_Tree_Node
     */
    protected $_menu;

    /**
     * Init top menu tree structure
     */
    public function _construct()
    {

        $this->_menu = new Varien_Data_Tree_Node(array(), 'root', new Varien_Data_Tree());
    }

    /**
     * Get top menu html
     *
     * @param string $outermostClass
     * @param string $childrenWrapClass
     * @return string
     */
    public function getHtml($outermostClass = '', $childrenWrapClass = '')
    {

        Mage::dispatchEvent('page_block_html_topmenu_gethtml_before', array(
            'menu' => $this->_menu
        ));

        $this->_menu->setOutermostClass($outermostClass);
        $this->_menu->setChildrenWrapClass($childrenWrapClass);

        $html = $this->_getHtml($this->_menu, $childrenWrapClass);

        Mage::dispatchEvent('page_block_html_topmenu_gethtml_after', array(
            'menu' => $this->_menu,
            'html' => $html
        ));

        return $html;
    }

    /**
     * Recursively generates top menu html from data that is specified in $menuTree
     *
     * @param Varien_Data_Tree_Node $menuTree
     * @param string $childrenWrapClass
     * @return string
     */
    protected function _getHtml(Varien_Data_Tree_Node $menuTree, $childrenWrapClass)
    {
        $html = '';

        $children = $menuTree->getChildren();
        $parentLevel = $menuTree->getLevel();
        $childLevel = is_null($parentLevel) ? 0 : $parentLevel + 1;

        $counter = 1;
        $childrenCount = $children->count();

        $parentPositionClass = $menuTree->getPositionClass();
        $itemPositionClassPrefix = $parentPositionClass ? $parentPositionClass . '-' : 'nav-';

        foreach ($children as $child) {

            $child->setLevel($childLevel);
            $child->setIsFirst($counter == 1);
            $child->setIsLast($counter == $childrenCount);
            $child->setPositionClass($itemPositionClassPrefix . $counter);

            $outermostClassCode = '';
            $outermostClass = $menuTree->getOutermostClass();

            if ($childLevel == 0 && $outermostClass) {
                $outermostClassCode = ' class="' . $outermostClass . '" ';
                $child->setClass($outermostClass);
            }

            $html .= '<li ' . $this->_getRenderedMenuItemAttributes($child) . ' >';
            $html .= '<a href="' . $child->getUrl() . '" ' . $outermostClassCode . ' onclick=alert("hitop");><span>'
                . $this->escapeHtml($child->getName()) . 'jain</span></a>';

            if ($child->hasChildren()) {
                if (!empty($childrenWrapClass)) {
                    $html .= '<div class="' . $childrenWrapClass . '">';
                }
                $html .= '<ul class="level' . $childLevel . '">';
                $html .= $this->_getHtml($child, $childrenWrapClass);
                $html .= '</ul>';

                if (!empty($childrenWrapClass)) {
                    $html .= '</div>';
                }
            }
            $html .= '</li>';

            $counter++;
        }

        return $html;
    }

    /**
     * Generates string with all attributes that should be present in menu item element
     *
     * @param Varien_Data_Tree_Node $item
     * @return string
     */
    protected function _getRenderedMenuItemAttributes(Varien_Data_Tree_Node $item)
    {
        $html = '';
        $attributes = $this->_getMenuItemAttributes($item);

        foreach ($attributes as $attributeName => $attributeValue) {
            $html .= ' ' . $attributeName . '="' . str_replace('"', '\"', $attributeValue) . '"';
        }

        return $html;
    }

    /**
     * Returns array of menu item's attributes
     *
     * @param Varien_Data_Tree_Node $item
     * @return array
     */
    protected function _getMenuItemAttributes(Varien_Data_Tree_Node $item)
    {
        $menuItemClasses = $this->_getMenuItemClasses($item);
        $attributes = array(
            'class' => implode(' ', $menuItemClasses)
        );

        return $attributes;
    }

    /**
     * Returns array of menu item's classes
     *
     * @param Varien_Data_Tree_Node $item
     * @return array
     */
    protected function _getMenuItemClasses(Varien_Data_Tree_Node $item)
    {
        $classes = array();

        $classes[] = 'level' . $item->getLevel();
        $classes[] = $item->getPositionClass();

        if ($item->getIsFirst()) {
            $classes[] = 'first';
        }

        if ($item->getIsActive()) {
            $classes[] = 'active';
        }

        if ($item->getIsLast()) {
            $classes[] = 'last';
        }

        if ($item->getClass()) {
            $classes[] = $item->getClass();
        }

        if ($item->hasChildren()) {
            $classes[] = 'parent';
        }

        return $classes;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:10:18.873

的父元素`<rewrite>`必须像**原始**模块的代码一样命名，而不是像你自己的一样。Magento 不知道，否则你想重写**什么。**

```
<blocks>
    <page>
        <rewrite>
            <html_topmenu>Mynav_Mytopmenu_Block_Html_Topmenu</html_topmenu>
        </rewrite>
    </page>
</blocks> 
```

# magento - Magento：自定义缓存的触发器在哪里？

> ID：15040144
> 
> 赞同：2
> 
> 时间：2013-02-23T11:42:25.720
> 
> 标签：magento, caching

在这个 Stackoverflow 问题中，答案显示了如何添加自定义缓存状态：[Magento Custom Caching with admin switch](https://stackoverflow.com/questions/12663722/magento-custom-caching-with-admin-switch)

现在我的问题是：这是在哪里触发的？

**更新：** 我已按照上述步骤进行操作。现在我在 Abstract/Service.php 中有这段代码

```
final class COMP_NAME_Abstract_Service
{

    static private $_instance;
    private $_licenseHelpers = array();

    public function clearCache( $custom = false )
    {
        //DO SOMETHING
    }

    public function getCache()
    {
        //DO SOMETHING
    }   
} 
```

但是我必须在某个地方“调用”clearCache 函数，但是在哪里以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-31T09:40:40.837

您可以使用事件`adminhtml_cache_refresh_type`。添加到全局事件部分。

```
<global>
  <events>
    <adminhtml_cache_refresh_type>
    <observers>
        <module_alias>
            <class>COMPNAME_MODULENAME_Model_Observer</class>
            <type>singleton</type>
            <method>cleanCacheType</method>
        </module_alias>
     </observers>
     </adminhtml_cache_refresh_type>
   </events>
</global> 
```

将此代码添加到观察者`COMP_NAME_module_name_Model_Observer`：

```
public function cleanCacheType(Varien_Event_Observer $observer)
{
   if ($observer->getData('type') == "your_cache_type"){
       //CUSTOM CODE
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T13:09:48.587

在清除缓存时检查事件**application_clean_cache**`Mage::app()->cleanCache();` - 或系统保存产品等时...

并查看事件 - 通过管理面板清除缓存时的**adminhtml_cache_refresh_type**

以及您在观察者中的代码

```
Mage::app()->getCache()->clean('all', array('my_tag')); 
```

并且需要为 Observer 添加一些逻辑，以检查是否需要刷新缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T14:05:24.790

你说的触发是什么意思？您如何将内容写入这个新缓存？

```
Mage::app()->saveCache($data, $cacheKey, $this->getCacheTags(), $this->getCacheLifetime()); 
```

并且缓存标签用于删除

# c# - 如何使用文本框将值接受到数组中并使用按钮显示数字的总和？

> ID：15040146
> 
> 赞同：0
> 
> 时间：2013-02-23T11:42:29.277
> 
> 标签：c#, asp.net, sql-server, arrays, button

我有三个文本框和一个按钮。我应该能够在 TextBoxes 上输入多个数字。当我单击 Button 时，数字的总和应显示在另一个 TextBox 上。**如何使用文本框将值接受到数组中并使用按钮显示数字的总和？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:46:14.413

您可以执行以下操作：

```
 int[] numbers = new int[2];  // Declare the array 

 public void Button1_Click() {
    numbers[0] = Int32.Parse(TextBox1.Text);
    numbers[1] = Int32.Parse(TextBox2.Text);
    numbers[2] = Int32.Parse(TextBox3.Text);

    TextBox4.Text = numbers.Sum().ToString();
 } 
```

注意：您可能希望在应用程序中添加一些错误处理，以确保文本框值确实是数字。也使用`TryParse`而不是标准`Parse`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:47:56.637

您可以使用一些单独的例如逗号，然后拆分您的文本框值以获取字符串数组，然后您可以尝试将字符串解析为整数或小数。然后计算总和

# ios - NSUserDefaults BOOL 逻辑

> ID：15040147
> 
> 赞同：0
> 
> 时间：2013-02-23T11:42:30.960
> 
> 标签：ios, boolean, nsuserdefaults

我有一个问答游戏，当答案正确时，会出现一张带有勾号的图片。因为我有很多领域，需要应用程序记住哪些已经完成，以便下次启动。我正在使用 NSUserDefaults。它工作得很好，但问题是，在第一次启动时，所有“完成”的图像都会显示出来。我试图绕过 BOOL 逻辑但没有成功。

。H

```
BOOL doneState; 
```

.m

```
- (void)viewDidLoad{

    [super viewDidLoad];
    [self doneHidden];
    [self checkBools];
} 

- (void)checkBools{

    //--------NSUserDefaults & tick sign hidden
    BOOL saved = [[NSUserDefaults standardUserDefaults] boolForKey:@"hiddenDone"];
    NSLog (@"Value of my saved BOOL = %@", saved ? @"YES" : @"NO");
    done.hidden = saved;
}

-(void)doneHidden{
   done.hidden = YES;
} 
```

当用户退出应用程序时，下面的方法会记住 BOOL 值

```
-(IBAction)flipBack:(id)sender{

    if (done.hidden == NO) {
        doneState = NO;
    }
    else {
        doneState = YES;
    }

    [[NSUserDefaults standardUserDefaults] setBool:doneState forKey:@"hiddenDone"];
    NSLog (@"Value of BOOL 1  = %@", doneState ? @"YES" : @"NO");
} 
```

这个想法是首先隐藏名为“done”的imageView，然后运行BOOL。控制台在第一次启动时给出的结果是它没有隐藏，即使它是这样设置的。

控制台输出：

```
Value of my saved BOOL = NO; 
```

如何改进它的逻辑？

*   在第一次启动时隐藏图像
*   退出应用程序时检查图像是否可见并创建 BOOL
*   下一次启动读取 BOOL 并显示图像（如果之前保存过）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:20:52.823

有三个选项：

1.  更改 to 的含义，`BOOL`以便`showImage`在`TRUE`要显示图像时将其设置为。
2.  为这个键预先注册一个`TRUE`值`-[NSUserDefaults registerDefaults:]`
3.  而不是使用`boolForKey:`，使用`objectForKey:`并首先检查对象是否`nil`（=尚未设置），并且仅当非零时才使用`-[NSNumber boolValue]`来获取布尔值。

# r - R emacs-ESS 不在 Mac 上绘图

> ID：15040148
> 
> 赞同：5
> 
> 时间：2013-02-23T11:42:32.213
> 
> 标签：r, emacs, ess

我有一个新的 mac 并下载了 ESS-emacs 并一直在运行 R。但它不会产生任何带有 plot() pie() 或 hist() 的图。

我尝试过 show()、X11() 和 pdf()，但它们都不起作用。当我尝试这个时，R 进程实际上结束了，例如：

> 情节（1:10）

流程 R 于 2013 年 2 月 23 日星期六 21:39:08 完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:39:57.833

新的 Mac 不附带 X11。您需要安装[XQuartz](http://xquartz.macosforge.org/trac)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:06:46.710

当我在 Mac 上运行 ESS/R 时，plot(1:10) 应该会在 Quartz 窗口中显示一个绘图。您不需要求助于 x11()。我喜欢 Quartz 驱动程序，因为它允许您浏览绘图的历史记录，请参阅 R 应用程序的 Quartz 菜单。

要查看您的 R 是否支持 Quartz，请键入 capabilities() 并查看它对“aqua”的含义。

# java - 为什么 Math.max(double a, double b) 不是可变参数？

> ID：15040151
> 
> 赞同：6
> 
> 时间：2013-02-23T11:43:01.067
> 
> 标签：java, variadic-functions

为什么 Math.max 的实现不是[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)？

它可以像这样实现：

```
public class Main {
    public static double max(double... values) {
        double max = Double.NEGATIVE_INFINITY;
        for (double tmp : values) {
            max = max < tmp ? tmp : max;
        }
        return max;
    }

    public static void main(String[] args) {
        // This works fine:
        System.out.println(max(-13, 12, 1337, 9));

        // This doesn't work:
        // System.out.println(Math.max(-13, 12, 1337));
    }
} 
```

有什么理由不这样实施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T11:46:45.390

JDK 1.0中`java.lang.Math`已经引入了，早在 Java 5 中的语言中引入可变参数函数之前。

此外，效率是一个问题：如果您大部分时间需要两个元素，那么“内联”传递它们会快得多，而无需创建中间数组来保存它们。这也避免了在实现内部设置循环的成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T16:04:15.857

虽然其他人已经回答了为什么`Math.max`不是可变参数，但他们没有回答为什么在引入可变参数函数时没有创建这种方法。

我什至不知道（有一个[打开的错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6546237)）所以我只能猜测：

确实它没有在 中实现`Math`，但是如果我们研究一下`Collections`，有以下方法：

```
public static <T extends Object & Comparable<? super T>> T max(
    Collection<? extends T> coll) {
  ...
} 
```

虽然类型签名看起来很丑（它需要足够灵活来处理协变和逆变），但它可以很容易地用于`Collections.max(Arrays.asList(-13, 12, 1337, 9));`在所有函数实现之后，只是在不同的地方。

更好的是：此方法不仅可以处理双精度数，还可以处理实现`Comparable`接口的所有类型。

尽管如此，您建议的解决方案和解决方案都不`Collections`是面向对象的，它们只是静态方法。幸运的是，使用[JDK8](http://openjdk.java.net/projects/jdk8/)这将改变：

```
import java.util.Arrays;
import java.util.List;
import java.util.Optional;

int max(List<Integer> list) {
  Optional<Integer> opt = list.stream().max((a,b) -> a-b);
  return opt.orElse(Integer.MAX_VALUE);
}

max(Arrays.asList(-13, 12, 1337, 9)); // 1337
max(Arrays.asList()); // 2147483647 
```

对于即将发布的版本，集合库在[Project Lambda](http://openjdk.java.net/projects/lambda/)中进行了重新设计，使其更加面向对象。在上面的示例中，Lambda 用于提供一种简单易读的方法来确定最大元素。以下内容也可以：

```
import static java.util.Comparators.naturalOrder;

Arrays.asList(-13, 12, 1337, 9)
  .stream()
  .max(naturalOrder())
  .ifPresent(System.out::println); // 1337 
```

代替`max`一个也可以使用高阶函数`reduce`：

```
Arrays.asList(-13, 12, 1337, 9)
  .stream()
  .reduce((a,b) -> a > b ? a : b)
  .ifPresent(System.out::println); // 1337 
```

另一个细节是使用`Optional`. 由于如上例所示的高阶函数的组合，它是一种简化错误处理的类型。

lambda 提案有几个优点，不需要实现 Math.max 的可变参数形式：

1.  它是面向对象的
2.  它是多态的。这意味着它可以用于每种类型的集合（`List`、`Set`、`Stream`等`Iterator`）
3.  它富有表现力且易于理解
4.  它允许即时并行化。只需更改`.stream()`为`.parallelStream()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T11:44:52.083

因为它存在的时间比 java 中存在的可变参数函数（在[java 5](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)中引入）要长，并且没有太多更新它的需求，因为正如您刚刚展示的那样，自己动手做是微不足道的。

此外，可变参数方法中存在隐藏的性能损失，因为数组 (double[]) 将在幕后根据您的参数创建

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-29T06:17:04.597

Java 8 已经用流实现了数字操作，非常灵活。一个例子：

```
DoubleStream.of( -13, 12, 1337, 9 ).max().getAsDouble() 
```

不像自制软件那么简单，但仍然直截了当、快速且更灵活。

例如，使用多核只需要一个函数调用：

```
stream.parallel().max().getAsDouble() 
```

在这种情况下毫无意义，因为即使使用 double 找到 max 也非常快 - 你需要数百万个 double 才能看到毫秒的差异。但如果有其他处理，那么它可以快速加快它们。

或者您也可以只使用系统类一次性找到最小值、平均值、总和等：

```
DoubleSummaryStatistics stat = DoubleStream.of( -13, 12, 1337, 9 ).summaryStatistics();
System.out.println( stat.getMin() );
System.out.println( stat.getAverage() );
System.out.println( stat.getMax() );
System.out.println( stat.getCount() );
System.out.println( stat.getSum() ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T12:09:42.373

Math.max 自 JDK 1.0 以来就已经存在，早在引入变量 # of argument 语法之前。这并不是说该方法无法按照您建议的方式进行更新。有时库方法定义或实现会更改，但这种情况很少见。大多数时候，新方法被添加到类中，而不是修改现有方法。

您对 Max 的新实现实际上是方法重载的一种情况，因为现有方法和新的 var args 方法可能在同一个类中并存。因此，虽然它当然可以替换现有方法，但它也可能只是 Math 类的补充。所以我觉得应该加上。我们可以不理会现有方法这一事实消除了对新实现可能引起的性能的任何担忧。

Java n 和 Java n+1 之间可以改变的文化无论如何都在改变。例如，文件访问类`java.sql.Connection`从 Java 6 更改为 Java 7，因为在 Java 7 中它们现在实现了`AutoCloseable`. Java 9 实际上会从类中删除一些妨碍[项目拼图](http://jaxenter.com/project-jigsaw-delayed-until-java-9-the-reaction-43719.html)的方法。

我想不出 Math.max 没有更新的正当理由。也许直到现在还没有人建议它。你在看这个吗，[马克·莱因霍尔德](http://mreinhold.org/)？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T11:47:23.120

`Math.max()`可以追溯到 JDK 1.0，而可变参数函数直到 Java 5 才存在。

# css - CSS 100% 宽度，每 20 像素步长

> ID：15040153
> 
> 赞同：7
> 
> 时间：2013-02-23T11:43:32.613
> 
> 标签：css

是否可以在纯 css 中设置一些宽度变化的步骤？

假设我的 div 宽度为 100%，所以当容器为 30px 时，它将为 30px 宽。但是是否可以将一些“跳跃”设置为 20px，所以当容器为 30px 时，它仍然是 20px，但是当容器为 40px 时，它会得到 40px，因为 40 是 20 的倍数？

换句话说 - 强制某些元素的宽度限制为某个整数的倍数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:55:18.457

我已经在 J​​S 中完成了它，但是我将它与一些 css 解决方案混合在一起：

```
$.fn.widthStep = function(step)
{
    var width = $(this).width();
    $(this).css('max-width', width - width%step);
} 
```

它将 max-width css prop 设置为最大可能宽度，该宽度是“step”的乘积，并且 <= 实际宽度。

# jakarta-ee - 如何在运行测试用例时排除 maven 依赖项

> ID：15040157
> 
> 赞同：0
> 
> 时间：2013-02-23T11:43:49.323
> 
> 标签：jakarta-ee, glassfish, ejb, jboss-arquillian, glassfish-embedded

我正在研究 ejb3 并使用 arqullian 进行测试。我在 pom.xml 中有以下依赖项

```
 <dependency>
        <groupId>org.glassfish.main.ejb</groupId>
        <artifactId>javax.ejb</artifactId>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.glassfish.main.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.1.2</version>
        <scope>test</scope>
    </dependency> 
```

在运行测试用例时，我需要排除前两个依赖项，但它在测试时间之外可用。

怎样才能做到这一点？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:01:29.873

我相信您可以`javaee-api`单独使用依赖项，因为您可以从中获取 EJB API。但是，您应该将其指定为具有`provided`范围的依赖项，因为它不能用于编译测试以外的任何事情，并且由容器在运行时提供（在本例中为嵌入式 GlassFish）。

如果您在使用 javaee-api 时遇到问题，您可以尝试使用[JBoss Java EE 6 API](http://planet.jboss.org/post/jboss_java_ee_6_specification_apis)，因为它们不包含任何精简的方法体，这些方法体通常是`javaee-api`依赖问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T16:37:00.967

当您拥有 Java EE 6 时，您需要拥有完整的 Java EE API（如 Vineet 编写）而不是 Java EE 本身。对于 Java EE 7，javaee-api 依赖项足以编译。但是您需要 Java EE API 来编译您的代码，并且它必须提供范围（这意味着 Maven 使用它进行编译但不将 jars 添加到存档中，因为容器提供了它们）Java EE 依赖关系的范围，并且可能删除了对 EJB 的依赖关系.

这是我的 JBoss 和 Java EE 7 工作示例。这些依赖项足以运行带有嵌入式容器的 Arqullian：

```
<dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.wildfly</groupId>
        <artifactId>wildfly-arquillian-container-embedded</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.wildfly</groupId>
        <artifactId>wildfly-embedded</artifactId>
        <scope>test</scope>
    </dependency> 
```

这是 Java EE 6 规范 API 的依赖关系管理。我将它用于 Arqullian 测试而不是 javaee-api。

```
 <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>1.0.0.Final</version>
        <scope>provided</scope>
        <type>pom</type>
    </dependency> 
```

# jquery - ajax调用后jquery不工作

> ID：15040160
> 
> 赞同：0
> 
> 时间：2013-02-23T11:44:37.973
> 
> 标签：jquery, ajax

在进行 AJAX 调用后，我遇到了 jQuery 无法正常工作的问题。这是一个可以正常工作的拖放脚本，但是当我想调用 AJAX 时它会停止。

```
var ary1=new Array(5);
ary1[0]="container1";
ary1[1]="container2";
ary1[2]="container3";
ary1[3]="container4";
ary1[4]="main_container";
var ary2=new Array(5)
ary2[0]=0;
ary2[1]=0;
ary2[2]=0;
ary2[3]=0;
ary2[4]=4;
var i;
var srouce,dest;
var old;

$(window).load(function(){

$(function() { 

  $( ".draggable" ).draggable();

    $( ".droppable, #droppable-inner" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
               //if(ui.draggable.parent().attr('id')=="container1")alert("Yep");

          alert(ui.draggable.attr('id') + ' was dropped from ' +        ui.draggable.parent().attr('id')+' into '+$(this).attr('id'));
          $( this ).addClass( "ui-state-highlight" );

            // Move the dragged element into its new container

          srouce= ui.draggable.parent().attr('id');
          dest=$(this).attr('id');
          for(i=0;i<5;i++){
          if(srouce==ary1[i])break;} // to get src
          alert(ary1[i]);
          if((ary2[i]>0&&ary2[i]<=4&&ary1[i]=="main_container")||               (ary2[i]==1&&ary1[i]!="main_container"))
          {
          old=i;
          ary2[i]--;
          alert(ary2[i]); // decrement flag
          for(i=0;i<5;i++){
          if(ary1[i]==dest)break;}//to get dest
          alert(ary1[i]);
          if((ary2[i]==0&&ary1[i]!="main_container")|| (ary2[i]>=0&&ary2[i]<4&&ary1[i]=="main_container")) 
          {
            ary2[i]++;//increment flag
            alert(ary2[i]);
            ui.draggable.attr('style','position:relative ;cursor:hand');// move the image 
            $(this).append(ui.draggable);

          }

          else

          { 
            ary2[old]++;
            ui.draggable.attr('style','position:relative ;cursor:hand');
            ui.draggable.parent().append(ui.draggable);
            }

          }

            return false;
           }            
       });
  });

 });//]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:43:52.267

您不需要 $(window).load(function() 如您的问题中所述，使用 jQuery DOM 就绪事件来连接事件。通常，当您收到 http 响应并再次加载页面时，您只会丢失这些 DOM 事件仅当您使用部分渲染时。

如果您将**UPDATE PANEL 的**使用称为 AJAX 调用，那么这是一个常见问题，您需要确保在 updatepanel 活动结束后立即重新连接您的 jQuery 事件。 [看到这个链接](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T14:30:52.303

这个重复问题的解决方案可以[在这里找到](https://stackoverflow.com/questions/11083768/after-ajax-call-jquery-function-not-working-properly) ，这个解决方案对我有用。

作为结论，将您的代码从

```
$(function(){
   $(".cmdclose").click(function(){    
     // your code    
   });
}); 
```

至

```
$(function(){
    $(document).on("click",".cmdclose",function(){
       //your code
    });
}); 
```

# boost - qmake clucene-core-2.3.3.4 错误

> ID：15040163
> 
> 赞同：0
> 
> 时间：2013-02-23T11:44:52.783
> 
> 标签：boost, zlib, clucene

好的，我真的需要更多关于如何通过 qt5 创建者在 cmake 向导中编译 clucene 的说明我设法通过 git 下载 clucene 源代码，然后我从 qt 运行 cmake 向导，它找到了两个编译器 gcc 和 g++，但仍然找不到boost 和 zlib 作为它，这是结果：

```
ZLIB not found, using local: E:/qtproject/clucene/clucene/src/ext/zlib
Boost not found, using local: E:/qtproject/clucene/clucene/src/ext-- The C compiler identification is GNU 4.7.2
-- The CXX compiler identification is GNU 4.7.2
-- Check for working C compiler: e:/Qt/Qt5.0.1/Tools/MinGW/bin/gcc.exe
-- Check for working C compiler: e:/Qt/Qt5.0.1/Tools/MinGW/bin/gcc.exe -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: e:/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe
-- Check for working CXX compiler: e:/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Looking for include file pthread.h
-- Looking for include file pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - found
-- Found Threads: TRUE  
-- Checking to see if CXX compiler accepts flag -pg
-- Checking to see if CXX compiler accepts flag -pg - yes
-- Could NOT find Boost
-- Could NOT find ZLIB (missing:  ZLIB_INCLUDE_DIR) 
-- Looking for include files sys/time.h, time.h
-- Looking for include files sys/time.h, time.h - found
-- Looking for C++ include stdlib.h
-- Looking for C++ include stdlib.h - found
-- Looking for C++ include stdarg.h
-- Looking for C++ include stdarg.h - found
-- Looking for C++ include stdio.h
-- Looking for C++ include stdio.h - found
-- Looking for C++ include stddef.h
-- Looking for C++ include stddef.h - found
-- Looking for C++ include ctype.h
-- Looking for C++ include ctype.h - found
-- Looking for C++ include algorithm
-- Looking for C++ include algorithm - found
-- Looking for C++ include functional
-- Looking for C++ include functional - found
-- Looking for C++ include map
-- Looking for C++ include map - found
-- Looking for C++ include vector
-- Looking for C++ include vector - found
-- Looking for C++ include list
-- Looking for C++ include list - found
-- Looking for C++ include set
-- Looking for C++ include set - found
-- Looking for C++ include math.h
-- Looking for C++ include math.h - found
-- Looking for C++ include fcntl.h
-- Looking for C++ include fcntl.h - found
-- Looking for C++ include limits.h
-- Looking for C++ include limits.h - found
-- Looking for C++ include string.h
-- Looking for C++ include string.h - found
-- Looking for C++ include sys/time.h
-- Looking for C++ include sys/time.h - found
-- Looking for C++ include memory.h
-- Looking for C++ include memory.h - found
-- Looking for C++ include sys/types.h
-- Looking for C++ include sys/types.h - found
-- Looking for C++ include stdint.h
-- Looking for C++ include stdint.h - found
-- Looking for C++ include unistd.h
-- Looking for C++ include unistd.h - found
-- Looking for C++ include io.h
-- Looking for C++ include io.h - found
-- Looking for C++ include direct.h
-- Looking for C++ include direct.h - found
-- Looking for C++ include sys/dir.h
-- Looking for C++ include sys/dir.h - not found
-- Looking for C++ include sys/ndir.h
-- Looking for C++ include sys/ndir.h - not found
-- Looking for C++ include dirent.h
-- Looking for C++ include dirent.h - found
-- Looking for C++ include wctype.h
-- Looking for C++ include wctype.h - found
-- Looking for C++ include stat.h
-- Looking for C++ include stat.h - not found
-- Looking for C++ include sys/stat.h
-- Looking for C++ include sys/stat.h - found
-- Looking for C++ include stdexcept
-- Looking for C++ include stdexcept - found
-- Looking for C++ include errno.h
-- Looking for C++ include errno.h - found
-- Looking for C++ include windef.h
-- Looking for C++ include windef.h - found
-- Looking for C++ include windows.h
-- Looking for C++ include windows.h - found
-- Looking for C++ include wchar.h
-- Looking for C++ include wchar.h - found
-- Looking for C++ include hash_map
-- Looking for C++ include hash_map - found
-- Looking for C++ include hash_set
-- Looking for C++ include hash_set - found
-- Looking for C++ include ext/hash_map
-- Looking for C++ include ext/hash_map - found
-- Looking for C++ include tr1/unordered_set
-- Looking for C++ include tr1/unordered_set - found
-- Looking for C++ include tr1/unordered_map
-- Looking for C++ include tr1/unordered_map - found
-- Looking for C++ include sys/timeb.h
-- Looking for C++ include sys/timeb.h - found
-- Looking for C++ include tchar.h
-- Looking for C++ include tchar.h - found
-- Looking for C++ include strings.h
-- Looking for C++ include strings.h - found
-- Looking for C++ include sys/mman.h
-- Looking for C++ include sys/mman.h - not found
-- Looking for C++ include winerror.h
-- Looking for C++ include winerror.h - found
-- Choosing type for int8_t
-- Check size of int8_t
-- Check size of int8_t - done
-- Choosing type for int8_t - signed int8_t
-- Choosing type for uint8_t
-- Check size of uint8_t
-- Check size of uint8_t - done
-- Choosing type for uint8_t - unsigned uint8_t
-- Choosing type for int16_t
-- Check size of int16_t
-- Check size of int16_t - done
-- Choosing type for int16_t - signed int16_t
-- Choosing type for uint16_t
-- Check size of uint16_t
-- Check size of uint16_t - done
-- Choosing type for uint16_t - unsigned uint16_t
-- Choosing type for int32_t
-- Check size of int32_t
-- Check size of int32_t - done
-- Choosing type for int32_t - signed int32_t
-- Choosing type for uint32_t
-- Check size of uint32_t
-- Check size of uint32_t - done
-- Choosing type for uint32_t - unsigned uint32_t
-- Choosing type for int64_t
-- Check size of int64_t
-- Check size of int64_t - done
-- Choosing type for int64_t - signed int64_t
-- Choosing type for uint64_t
-- Check size of uint64_t
-- Check size of uint64_t - done
-- Choosing type for uint64_t - unsigned uint64_t
-- Choosing type for size_t
-- Check size of size_t
-- Check size of size_t - done
-- Choosing type for size_t - unsigned size_t
-- Choosing option for HAVE_TYPE__TIMEB
-- Performing Test _CL_HAVE_OPTION__TIMEB
-- Performing Test _CL_HAVE_OPTION__TIMEB - Success
-- Choosing option for HAVE_TYPE__TIMEB - _timeb
-- Performing Test HAVE_SYMBOL_FLOAT_T
-- Performing Test HAVE_SYMBOL_FLOAT_T - Success
-- Check size of DWORD
-- Check size of DWORD - done
-- Choosing type for _cl_dword_t
-- Check size of long
-- Check size of long - done
-- Choosing type for _cl_dword_t - unsigned long
-- Looking for printf
-- Looking for printf - found
-- Looking for strftime
-- Looking for strftime - found
-- Looking for wcscpy
-- Looking for wcscpy - found
-- Looking for wcsncpy
-- Looking for wcsncpy - found
-- Looking for wcscat
-- Looking for wcscat - found
-- Looking for wcschr
-- Looking for wcschr - found
-- Looking for wcsstr
-- Looking for wcsstr - found
-- Looking for wcslen
-- Looking for wcslen - found
-- Looking for wcscmp
-- Looking for wcscmp - found
-- Looking for wcsncmp
-- Looking for wcsncmp - found
-- Looking for wcscspn
-- Looking for wcscspn - found
-- Looking for wcsupr
-- Looking for wcsupr - found
-- Looking for wcscasecmp
-- Looking for wcscasecmp - not found
-- Looking for wcsicmp
-- Looking for wcsicmp - found
-- Looking for wcstoll
-- Looking for wcstoll - found
-- Looking for wprintf
-- Looking for wprintf - found
-- Looking for lltow
-- Looking for lltow - found
-- Looking for wcstod
-- Looking for wcstod - found
-- Looking for wcsdup
-- Looking for wcsdup - found
-- Looking for strupr
-- Looking for strupr - found
-- Looking for strlwr
-- Looking for strlwr - found
-- Looking for lltoa
-- Looking for lltoa - found
-- Looking for strtoll
-- Looking for strtoll - found
-- Looking for gettimeofday
-- Looking for gettimeofday - found
-- Looking for _vsnwprintf
-- Looking for _vsnwprintf - found
-- Looking for mmap
-- Looking for mmap - not found
-- Looking for MapViewOfFile
-- Looking for MapViewOfFile(0,0,0,0,0) - found
-- Choosing function for fileHandleStat
-- Looking for fstati64
-- Looking for fstati64 - not found
-- Looking for _fstati64
-- Looking for _fstati64 - found
-- Choosing function for fileHandleStat - _fstati64
-- Choosing function for fileStat
-- Looking for stati64
-- Looking for stati64 - not found
-- Looking for _stati64
-- Looking for _stati64 - found
-- Choosing function for fileStat - _stati64
-- Choosing function for fileSize
-- Looking for filelengthi64
-- Looking for filelengthi64 - not found
-- Looking for _filelengthi64
-- Looking for _filelengthi64 - found
-- Choosing function for fileSize - _filelengthi64
-- Choosing function for fileSeek
-- Looking for lseeki64
-- Looking for lseeki64 - not found
-- Looking for _lseeki64
-- Looking for _lseeki64 - found
-- Choosing function for fileSeek - _lseeki64
-- Choosing option for HAVE_TYPE_CL_STAT_T
-- Performing Test _CL_HAVE_OPTION_STATI64
-- Performing Test _CL_HAVE_OPTION_STATI64 - Failed
-- Performing Test _CL_HAVE_OPTION__STATI64
-- Performing Test _CL_HAVE_OPTION__STATI64 - Success
-- Choosing option for HAVE_TYPE_CL_STAT_T - _stati64
-- Choosing function for fileTell
-- Looking for telli64
-- Looking for telli64 - not found
-- Looking for _telli64
-- Looking for _telli64 - found
-- Choosing function for fileTell - _telli64
-- Choosing function for _realpath
-- Looking for realpath
-- Looking for realpath - not found
-- Choosing function for _realpath - using default
-- Choosing function for _rename
-- Looking for rename
-- Looking for rename - found
-- Choosing function for _rename - rename
-- Choosing function for _close
-- Looking for _close
-- Looking for _close((int)0) - found
-- Choosing function for _close - _close
-- Choosing function for _read
-- Looking for _read
-- Looking for _read((int)0, (void*)0, (unsigned int)0) - found
-- Choosing function for _read - _read
-- Choosing function for _cl_open
-- Looking for _open
-- Looking for _open(0,0,0) - found
-- Choosing function for _cl_open - _open
-- Choosing function for _write
-- Looking for _write
-- Looking for _write((int)0, (const void*)0, (unsigned int)0) - found
-- Choosing function for _write - _write
-- Choosing function for _unlink
-- Looking for _unlink
-- Looking for _unlink((const char*)0) - found
-- Choosing function for _unlink - _unlink
-- Choosing function for _ftime
-- Looking for _ftime
-- Looking for _ftime(0) - found
-- Choosing function for _ftime - _ftime
-- Choosing function for _mkdir
-- Looking for _mkdir
-- Looking for _mkdir((const char*)0) - found
-- Choosing function for _mkdir - _mkdir
-- Choosing function for SLEEPFUNCTION
-- Looking for usleep
-- Looking for usleep - found
-- Choosing function for SLEEPFUNCTION - usleep
-- Choosing function for _snprintf
-- Looking for snprintf
-- Looking for snprintf - found
-- Choosing function for _snprintf - snprintf
-- Choosing function for _snwprintf
-- Looking for snwprintf
-- Looking for snwprintf - found
-- Choosing function for _snwprintf - snwprintf
-- Choosing symbol for _O_RANDOM
-- Looking for _O_RANDOM
-- Looking for _O_RANDOM - found
-- Choosing symbol for _O_RANDOM - _O_RANDOM
-- Choosing symbol for _O_BINARY
-- Looking for _O_BINARY
-- Looking for _O_BINARY - found
-- Choosing symbol for _O_BINARY - _O_BINARY
-- Choosing symbol for _S_IREAD
-- Looking for _S_IREAD
-- Looking for _S_IREAD - found
-- Choosing symbol for _S_IREAD - _S_IREAD
-- Choosing symbol for _S_IWRITE
-- Looking for _S_IWRITE
-- Looking for _S_IWRITE - found
-- Choosing symbol for _S_IWRITE - _S_IWRITE
-- Choosing type for TCHAR
-- Check size of TCHAR
-- Check size of TCHAR - done
-- Choosing type for TCHAR -  TCHAR
-- Choosing symbol for _T
-- Looking for _T
-- Looking for _T - found
-- Choosing symbol for _T - _T
-- Performing Test _CL_HAVE_PTHREAD_MUTEX_RECURSIVE
-- Performing Test _CL_HAVE_PTHREAD_MUTEX_RECURSIVE - Success
-- Performing Test _CL_HAVE_GCC_ATOMIC_FUNCTIONS
-- Performing Test _CL_HAVE_GCC_ATOMIC_FUNCTIONS - Success
-- Performing Test _CL_HAVE_GCCVISIBILITYPATCH
-- Performing Test _CL_HAVE_GCCVISIBILITYPATCH - Success
-- Performing Test _CL_HAVE_TRY_BLOCKS
-- Performing Test _CL_HAVE_TRY_BLOCKS - Success
-- Checking support new float byte<->float conversions
-- Checking support new float byte<->float conversions - yes
-- Choosing namespace for hashmaps
-- Performing Test _CL_HAVE_STD__TR1_HASHMAP
-- Performing Test _CL_HAVE_STD__TR1_HASHMAP - Success
-- Choosing namespace for hashmaps - std::tr1::func
-- Performing Test _CL_HAVE_NAMESPACES
-- Performing Test _CL_HAVE_NAMESPACES - Success
-- Performing Test _CL_HAVE_NO_SNPRINTF_BUG
-- Performing Test _CL_HAVE_NO_SNPRINTF_BUG - Success
-- Performing Test _CL_HAVE_NO_SNWPRINTF_BUG
-- Performing Test _CL_HAVE_NO_SNWPRINTF_BUG - Success
-- Performing Test _CL_ILONGLONG_LL
-- Performing Test _CL_ILONGLONG_LL - Success
-- Performing Test LUCENE_STATIC_CONSTANT_SYNTAX
-- Performing Test LUCENE_STATIC_CONSTANT_SYNTAX - Success
-- Check for ANSI scope
-- Check for ANSI scope - found
-- Could NOT find ZLIB (missing:  ZLIB_INCLUDE_DIR) 
-- Checking to see if CXX compiler accepts flag -fprofile-arcs -ftest-coverage
-- Checking to see if CXX compiler accepts flag -fprofile-arcs -ftest-coverage - yes
-- Configuring done
-- Generating done
-- Build files have been written to: E:/qtproject/clucene/clucene-build 
```

那么我应该在 cmake qt 向导中输入什么参数来让它了解 zlib 和 boost 文件夹的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:31:20.297

有**两种方法**（对于 WINDOWS）：

* * *

**第一的**

（对于 SourceForge，clucene-core-2.3.3.4.tar.gz）：

* * *

**依赖项**：

a) CMake（安装） b) Boost（解压） c) ZDLIB 源代码，而不是 DLL（解压）

**构建说明**：

1 运行**CMake GUI**

2.1 设置**源代码在哪里**=“E:\test\clucene-core-2.3.3.4\clucene-core-2.3.3.4”

2.2 设置**构建二进制文件的位置**= "E:\test\clucene-core-2.3.3.4\clucene-core-2.3.3.4"

2.3 选择**Boost_DIR**参数并**设置boost路径**（“E:\test\boost_1_53_0\boost_1_53_0”）

2.4 点击**配置**，程序会报错（ZLIB_INCLUDE_DIR），**这是正常的**

**2.5 选中高级**复选框并向**下滚动**到参数列表的末尾

2.6 选择**ZLIB_INCLUDE_DIR**参数并**设置zdlib路径**（“E:\test\zdlib”）

2.7 点击**配置**

2.8 点击**Generate**，现在一切正常

2.9**制作**

* * *

**第二**

（对于 GITHUB，git://clucene.git.sourceforge.net/gitroot/clucene/clucene）：

* * *

**依赖项**：

a) CMake（安装） b) Boost（解压）

**构建说明**：

1 运行**命令**

2**设置CMake的路径** `Set PATH=C:\Program Files\Cmake 2.8\bin`

3.1**设置Boost路径** `Set BOOST_ROOT=E:\test\boost_1_53_0\boost_1_53_0`

3.2`Set BOOST_PATH=E:\test\boost_1_53_0`

3.3`Set BOOST_BUILD_PATH=E:\test\boost_1_53_0\boost_1_53_0\tools\build\v2`

4使用 CMake 进行 **配置：**`cmake -G "Generator name"`

（其中“生成器名称”是您最喜欢的编译器或 IDE，例如“CodeBlocks - MinGW Makefiles”或只是“MinGW Makefiles”）

5**制作**

* * *

此外，当您使用此引擎时，我建议您将两个代码编译库添加到您的项目（链接库）中

例如：

`C:\Develope\CodeBlocks\clucene\bin\libclucene-core.dll.a`

`C:\Develope\CodeBlocks\clucene\bin\libclucene-shared.dll.a`

此外，将 clucene 引擎源的 *.h 文件添加到您的项目（搜索目录）中的两个路径

例如：

`C:\Develope\CodeBlocks\clucene\src\core`

`C:\Develope\CodeBlocks\clucene\src\shared`

# java - Java 谜题 - 尝试在单击按钮后进行 GUI 处置

> ID：15040164
> 
> 赞同：1
> 
> 时间：2013-02-23T11:44:56.493
> 
> 标签：java, swing, jframe, jbutton, actionevent

**已解决：@Desolator 在下面的评论中让我的编码完全正常工作**

好的，所以我制作了 3 个相互链接的类：

SplashScreen > ProjectAssignment > CompareSignature

我要讲的课是splashscreen课：

所以在这个类中我有 3 种方法：

`public static void createAndShowGUI()` - 这个方法包含创建和显示 GUI 的所有信息 - JFrame frame = new JFrame("Welcome!"); ETC...

`public void actionPerformed(ActionEvent e)` - 此方法使我能够单击按钮并打开下一个 GUI - if(e.getSource()==enterButton) 等...

`public static void main(String[] args)` - 这个方法只有“createAndShowGUI();” 以便在运行代码时显示 GUI

我需要做的是能够给 JButton 另一个操作以在`createAndShowGUI`单击时关闭 SplashScreen 类（来自 ），但我的问题是：

1.  我无法`JFrame frame = new JFrame("");`从`createAndShowGUI`actionPerformed 方法中的方法引用，因为该`createAndShowGUI`方法是静态的

2.  现在您说“只需取出“静态”关键字并将“JFrame frame;”放在变量部分中”...如果我这样做，那么`public static void main(String[] args)`将不会采用该`createAndShowGUI();`方法并且 GUI 将不会显示

3.  我试过放入 actionPerformed 方法：

    ```
    if(e.getSource()==enterButton){
    System.exit(0);
    } 
    ```

和...

```
 if(e.getSource()==enterButton){
   frame.dispose();   //Cannot reference frame from static createAndShowGUI method
   } 
```

所以我很茫然，是否可以通过单击按钮关闭 SplashScreen 类？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:01:11.690

我从[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)举了下面的例子。也许您采用了相同的方法，因为该`createAndShowGUI`方法具有相同的名称……我通过一个按钮和一个适当的侦听器对其进行了扩展，该侦听器配置了 Frame。你的问题对我来说有点难以理解，但我认为这个例子会回答你的问题。

```
public class FrameDemo {
private static void createAndShowGUI() {
    final JFrame frame = new JFrame("FrameDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton button = new JButton("Exit");
    button.setPreferredSize(new Dimension(175, 100));
    frame.getContentPane().add(button, BorderLayout.CENTER);

    ActionListener buttonListener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            frame.dispose();
        }
    };
    button.addActionListener(buttonListener);

    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
} 
```

# python - 为什么python会跳过我的函数？

> ID：15040165
> 
> 赞同：0
> 
> 时间：2013-02-23T11:44:59.853
> 
> 标签：python

当我输入这个：

```
def tablesUsed():
    "Return which multiplication tables to use"
    tablesUsed = [int(x) for x in input("Please choose which multiplication tables you   wish\nto practice, then type them like this: 2 5 10.\n").split()] 
```

python 将函数跳过到下一行。到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T11:46:42.717

你需要调用它。

```
tablesUsed() 
```

您可能还想实际返回列表。

```
def tablesUsed():
    return [int(x) for x in input("Please choose which multiplication tables you   wish\nto practice, then type them like this: 2 5 10.\n").split()] 
```

否则您无法访问您在函数中创建的列表，使其无用。

此外，如果您使用的是 Python 2，`input()`则将输入评估为 Python 代码，您很可能会遇到错误。用于`raw_input()`返回字符串。在 Python 3`raw_input()`中被删除并替换为`input()`

# ruby - 使用 Capybara 附加文件 - 元素当前不可见并且 > 因此可能无法与之交互

> ID：15040166
> 
> 赞同：2
> 
> 时间：2013-02-23T11:45:00.353
> 
> 标签：ruby, selenium, capybara

我正在尝试使用 Capybara 附加文件。输入元素是：

```
<input type="file" multiple="multiple" name="uploadfile[]" style="position: absolute; margin: 0px 0px 0px -175px; padding: 0px; width: 220px; height: 30px; font-size: 14px; opacity: 0; cursor: pointer; display: block; z-index: 2147483583; top: 3331px; left: 436px;"> 
```

附加文件的代码是：

```
attach_file 'uploadfile[]', '/home/user/image.jpg' 
```

但它返回错误：

```
biske@biske:~/Documents/Aptana Studio 3 Workspace/AddPlace$ ruby
test.rb  [remote server]
file:///tmp/webdriver-profile20130223-30353-dw596v/extensions/fxdriver@googlecode.com/components/command_processor.js:7537:in
`fxdriver.preconditions.visible': Element is not currently visible and
so may not be interacted with
(Selenium::WebDriver::Error::ElementNotVisibleError)  from [remote
server]
file:///tmp/webdriver-profile20130223-30353-dw596v/extensions/fxdriver@googlecode.com/components/command_processor.js:10207:in
`DelayedCommand.prototype.checkPreconditions_'  from [remote server]
file:///tmp/webdriver-profile20130223-30353-dw596v/extensions/fxdriver@googlecode.com/components/command_processor.js:10226:in
`DelayedCommand.prototype.executeInternal_/h'   from [remote server]
file:///tmp/webdriver-profile20130223-30353-dw596v/extensions/fxdriver@googlecode.com/components/command_processor.js:10231:in
`DelayedCommand.prototype.executeInternal_'   from [remote server]
file:///tmp/webdriver-profile20130223-30353-dw596v/extensions/fxdriver@googlecode.com/components/command_processor.js:10171:in
`DelayedCommand.prototype.execute/<'  from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/response.rb:52:in
`assert_ok'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/response.rb:15:in
`initialize'  from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/http/common.rb:59:in
`new'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/http/common.rb:59:in
`create_response'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/http/default.rb:66:in
`request'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/http/common.rb:40:in
`call'  from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/bridge.rb:615:in
`raw_execute'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/bridge.rb:593:in
`execute'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/bridge.rb:400:in
`sendKeysToElement'   from
/usr/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/common/element.rb:126:in
`send_keys'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/selenium/node.rb:33:in
`set'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/node/element.rb:79:in
`block in set'  from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/node/base.rb:78:in
`synchronize'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/node/element.rb:79:in
`set'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/node/actions.rb:144:in
`attach_file'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/session.rb:341:in
`block (2 levels) in <class:Session>'   from
/usr/lib/ruby/gems/1.9.1/gems/capybara-2.0.2/lib/capybara/dsl.rb:51:in
`block (2 levels) in <module:DSL>'  from test.rb:19:in `add_place'
  from test.rb:11:in `run'  from test.rb:33:in `<main>' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-28T14:52:45.650

```
attach_file('locator', 'path/to/file.jpg', :visible => false ) 
```

应该做的伎俩。Capybara 默认忽略隐藏字段，你需要做的就是传入一个可见性选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-05T09:53:59.350

该`:visible`选项对我没有任何作用。似乎有一个`:make_visible`选项：

```
attach_file 'uploadfile[]', '/home/user/image.jpg', :make_visible => true 
```

或者`true`使用自定义样式属性的哈希值，在尝试打开文件对话框之前将其设置为覆盖。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-28T15:37:33.880

因为Ruby对页面加载不是很好，如果我是你，我会这样解决：

```
!30.times { if (driver.find_element(:xpath, "//input[@type='file']")rescue false) then break else sleep 1; end } 
```

基本上，上面的代码将尝试 30 次（每 1 秒）来搜索您尝试附加的元素，如果该元素存在，则将退出循环。如果需要，您可以在 break 之后或 sleep 命令之后使用变量来指导您的流程。

祝你好运

# delphi - TSplitter by Source code move

> ID：15040170
> 
> 赞同：1
> 
> 时间：2013-02-23T11:45:21.913
> 
> 标签：delphi

在我的表格上，我放置了一个 TSplitter 和两个面板。运行程序我可以使用这些面板之间的拆分器移动 2 个面板的大小。

我想通过我的源代码移动拆分器，但我所有的尝试都失败了

```
 procedure ChangeGUILayout (....);
  var 
  aNewValue : Integer;

  begin

  MySpliiter.left := aNewValue;

  .... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T11:47:05.280

你不应该弄乱拆分器，而是使用对齐和固定大小的控件。

例如，假设您有两个面板。`Panel1`是`alLeft`和`Panel2`是`alClient`。在两者之间你有一个分离器。那你想要

```
Panel1.Width := aNewValue; 
```

# jquery - 用户滚动后，隐藏 div 然后在返回顶部时显示

> ID：15040171
> 
> 赞同：1
> 
> 时间：2013-02-23T11:45:22.450
> 
> 标签：jquery, scroll, hide, jscrollpane, show-hide

加载页面时，我显示了两个 div，当用户开始滚动时，隐藏 div。当用户回到顶部时，再次显示 div。当使用窗口作为目标时，这很简单，但是我使用的是 jScrollPane 并且不太确定如何正确定位滚动窗格：

```
$('.content').scroll(function() {
console.log($(this).scrollTop());
    if ($(this).scrollTop()>0)
     {
        $('#bb-nav-next').fadeOut();
     }
    else
     {
      $('#bb-nav-next').fadeIn();
     }
 }); 
```

我认为可能会影响性能的一些代码（这段代码来自： http: [//pastebin.com/UmyJ6zBW](http://pastebin.com/UmyJ6zBW)）：

```
function setJSP( action, idx ) {

    var idx = idx === undefined ? current : idx,
        $content = $items.eq( idx ).children( 'div.content' ),
        apiJSP = $content.data( 'jsp' );

    if( action === 'init' && apiJSP === undefined ) {
        $content.jScrollPane({verticalGutter : 0, hideFocus : true });
    }
    else if( action === 'reinit' && apiJSP !== undefined ) {
        apiJSP.reinitialise();
    }
    else if( action === 'destroy' && apiJSP !== undefined ) {
        apiJSP.destroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:58:45.480

根据低估，您只想显示 DIV，并且当用户位于屏幕的顶部可见区域时。一旦用户向下滚动 div 需要不可见，为此使用以下方法

```
$(document).on('load scroll', splDiv);
$(window).on('resize', splDiv);
var ele = $('#bb-nav-next');

function splDiv() {
if($(window).scrollTop() > window.innerHeight){
    ele.fadeOut();
}else{
    ele.fadeIn();
}
}; 
```

基本上在文档加载和滚动时，我们将 splDiv 方法与其关联，因此当您在第一个可见区域之后向下滚动时，它将隐藏您的“#bb-nav-next”元素。

我们确实添加了 resize 方法，因为它在旋转选项卡上也可以工作

# android - 如何在Android中找到通过网络浏览器下载的文件

> ID：15040173
> 
> 赞同：0
> 
> 时间：2013-02-23T11:45:37.263
> 
> 标签：android

我正在使用此代码从我的活动中下载文件。它在模拟器上正确下载文件并在通知中显示下载。但是当我点击通知时它就会消失。

```
String url = "http://developer.android.com/shareables/training/ActivityLifecycle.zip";
                Intent intent = new Intent(Intent.ACTION_VIEW);
                Uri u = Uri.parse(url);
                intent.setData(u);
                startActivity(intent); 
```

我需要存储这个下载文件的路径。

提前致谢...：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:12:49.980

我认为网络浏览器下载的文件的位置由网络浏览器自行决定（没有义务发布）。所以我认为你能做的最好的就是改变你的策略：

*   首先下载文件。这个问题解释了如何做到这一点：[Download a file with Android, and show the progress in a ProgressDialog](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

*   然后启动您的 ACTION_VIEW 意图，但传递刚刚下载的文件的 uri 而不是外部 url

# c++ - 将字符打印到控制台应用程序

> ID：15040180
> 
> 赞同：-3
> 
> 时间：2013-02-23T11:46:39.107
> 
> 标签：c++, c, char

这是一个非常简单的问题，但我完全糊涂了。我想在我的控制台应用程序中打印一个函数的输出。我的功能是：

```
 void Func(char * x) 
```

我称之为：

```
char a;
Func(& a); 
```

现在我想在 VS2010 的控制台应用程序中打印我的字符串 (a)。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:48:49.210

```
std::cout << a << std::endl; 
```

或者如果使用 C-：

```
printf("%c\n", a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:33:18.340

首先，您传递给函数的不是*string*，而只是指向单个字符的指针。

你问你应该怎么做才能打印那个字符。

从技术上讲，它就像这样简单：

```
#include <iostream>

void Func( char* x )
{
    std::cout << *x << std::endl;
}

int main()
{
    char a = 'G';
    Func( &a );
} 
```

但是虽然这在*技术上*是可行的，但可以说，有很多东西会从厕所里跳出来，在一个更大的程序中*咬你……*

所以让我们从**函数签名**开始：它的参数和结果。如果要点是函数应该为用作实际参数的变量提供值，那么选择函数结果而不是指针参数。然后不要在函数中执行任何 i/o，因为那样会限制它的实用性，它可以用于：

```
#include <iostream>

char Func()
{
    return 'A';
}

int main()
{
    char const a = Func();
    std::cout << a << std::endl;
} 
```

另一方面，如果关键在于函数应该显示（或使用）字符值，则按值传递它，如下所示：

```
#include <iostream>

void Func( char const x )
{
    std::cout << x << std::endl;
}

int main()
{
    char const a = 'N';
    Func( a );
} 
```

另一方面，如果这个想法确实是传递一个字符串，那么使用 a `std::string`– 但是我们会进入不太可能的可能性，其中有很多，在这个答案中无法涵盖

# php - 路由除一个以外的任何控制器功能

> ID：15040192
> 
> 赞同：0
> 
> 时间：2013-02-23T11:47:30.473
> 
> 标签：php, codeigniter

我有一个名为“详细信息”的控制器，并且有一些功能。我想将用户重定向到 /details/index，url 格式类似于 /details/(:any)。但是功能/详细信息/产品只有一个例外。我试过这样

```
$route['(^(?!details/product)\S*)'] = 'details/all_product'; 
```

但它没有用。我怎样才能做到这一点？我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:03:29.983

我已经使用其他一些参考资料解决了这个问题。解决方案是我无法创建任何会动态产生异常的路由配置。我只需要手动完成。解决方案是

```
$route['details/product'] = 'details/product';
$route['details/(:any)'] = 'details/index'; 
```

在我声明（：any）的路由规则之前，我必须手动放置该异常。

# php - 按 Field1 Field2 Field3 ASC 和 DESC 对查询结果进行排序

> ID：15040194
> 
> 赞同：1
> 
> 时间：2013-02-23T11:47:43.907
> 
> 标签：php, mysql, sql

按 Field1 Field2 Field3 ASC 和 DESC 对查询结果进行排序

你好朋友，我需要我能得到的帮助，我的网站上有一个过滤器，让我知道如何对泄露到 mysql 数据库的结果进行排序，因此 Field1 Field2 Field3 ASC 和 DESC

并希望在表单上创建选择选项的值，以便用户决定是 ASC 还是 DESC 排序过滤器和每个字段选择的选项值

```
 <?php

$o      = '';
// Pon la información correspondiente:
$data   = array( 'localhost', 'user', 'password' );
$con    = mysql_connect( $data[0], $data[1], $data[2] );

if( ! $con ) {
    $o = 'Error: no se pudo conectar con el servidor. ' . mysql_error();
    echo $o;
    exit;
}

// Cambia el nombre de la base de datos por la tuya
$db_name = 'database';

if( ! mysql_select_db( $db_name, $con ) ) {
    $o = 'Error: no se pudo seleccionar la base de datos "' . $db_name . '". ' . mysql_error();
    echo $o;
    exit;
}

$table = 'users'; // Cambia este SÓLO si sabes lo que hace.
$query = "SELECT * FROM $table";
$where = " WHERE";
$and     = 0;

if( isset( $_GET['Nombre'] ) && ! empty( $_GET['Nombre'] ) ) {
    $where .= " Nombre LIKE '%$_GET[Nombre]%'";
    $and        = 1;
}

if( isset( $_GET['Tarifa'] ) ) {
    $e = explode( ' - ', $_GET['Tarifa'] );

    if( is_numeric( $e[0] ) && is_numeric( $e[1] ) ) {
        if( $and === 1 )
            $where .= " AND";

        $where .= " Tarifa BETWEEN $e[0] AND $e[1]";
        $and        = 1;
    }
}

if( isset( $_GET['Edad'] ) ) {
    $e = explode( ' - ', $_GET['Edad'] );

    if( is_numeric( $e[0] ) && is_numeric( $e[1] ) ) {
        if( $and === 1 )
            $where .= " AND";

        $where .= " Edad BETWEEN $e[0] AND $e[1]";
        $and        = 1;
    }
}

if( isset( $_GET['Estatura'] ) ) {
    $e = explode( ' - ', $_GET['Estatura'] );

    if( is_numeric( $e[0] ) && is_numeric( $e[1] ) ) {
        if( $and === 1 )
            $where .= " AND";

        $where .= " Estatura BETWEEN $e[0] AND $e[1]";
        $and        = 1;
    }
}

if( isset( $_GET['Peso'] ) ) {
    $e = explode( ' - ', $_GET['Peso'] );

    if( is_numeric( $e[0] ) && is_numeric( $e[1] ) ) {
        if( $and === 1 )
            $where .= " AND";

        $where .= " Peso BETWEEN $e[0] AND $e[1]";
        $and        = 1;
    }
}

if( isset( $_GET['Ciudad'] ) && !empty( $_GET['Ciudad'] ) ) {
    if( $and === 1 )
        $where .= " AND";

    $where .= " Ciudad = '$_GET[Ciudad]'";
    $and        = 1;
}

if( isset( $_GET['Ojos'] ) && !empty( $_GET['Ojos'] ) ) {
    if( $and === 1 )
        $where .= " AND";

    $where .= " Ojos = '$_GET[Ojos]'";
    $and        = 1;
}

if( isset( $_GET['Cabello'] ) && !empty( $_GET['Cabello'] ) ) {
    if( $and === 1 )
        $where .= " AND";

    $where .= " Cabello = '$_GET[Cabello]'";
    $and        = 1;
}

if( strlen( $where ) > 6 )
    $query .= $where;

$result = mysql_query( $query, $con);

if( $result ) {
    $nrows  = mysql_num_rows( $result );

    if( $nrows > 0 ) {
        $o = '';

        while( $row = mysql_fetch_assoc( $result ) ) {

            $o .= "$row[Imagen]";
        }

        $o .= "";
    } else {
        $o = 'No hubieron resultados';
    }
} else {
    $o = 'Error: no se ejecutó la consulta. ' . mysql_error( $con );
}

mysql_free_result( $result );
mysql_close( $con );
echo $o . "";
exit;
       ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:22:01.220

我不太明白这个问题，如果您不知道如何为用户提供排序选项，您可以使用具有多项选择的列表框，然后在每个项目中查找“TRUE”。这在这里解释： [http ://www.abbeyworkshop.com/howto/lamp/php-listbox/index.html](http://www.abbeyworkshop.com/howto/lamp/php-listbox/index.html)

有很多方法可以实现，这是我认为可行的。另一个是有组合，所以你首先选择要过滤的内容，然后选择 asc 或 desc 的组合，然后是另一个组合，依此类推......你发布它并在这些组合中查找文本以制作查询字符串.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:57:36.970

要实现排序，您可以添加一个`order by`子句，您可以在其中指定要对选择进行排序的字段。

如果您想让用户决定如何排序，您可以添加一个指定升序或降序的请求参数。此外，您可以添加一个请求参数“字段”，您可以使用该参数让用户决定他希望对选择进行排序的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:01:22.473

你可以这样做

```
SELECT * FROM table ORDER BY  Field1 ASC,Field2 DESC,Field3 ASC 
```

# arrays - matlab中同一数组内的比较

> ID：15040198
> 
> 赞同：1
> 
> 时间：2013-02-23T11:47:58.490
> 
> 标签：arrays, matlab, compare

考虑一个二维数组 arr，

```
 col1    col2   col3  
    row1   12      1      6
    row2   30      21     10
    row3   91      39     40
    row4   76      1      70
    row5   30      21     10 
```

我想在行之间进行比较以获得每一行的出现，所以 col1,2,3 值对于另一行也都是相同的..所以在上面的出现值是，

```
 for row1 it is  1,for row2 =  2,row3 =  1,row4 = 1,row5 =2 ..
   in above row2 and row5 occur twice having same col values.. 
```

**我实现了代码并且我也得到了输出，但问题是我有近 50000 行，所以计算需要 5 分钟..我想要一个方法或代码更快地计算..** 这是我的代码

```
for i=1:n
  for j=i+1:n
     if( (ar(i,1)==ar(j,1))&& (ar(i,2)== ar(j,2)) && (ar(i,3)==ar(j,3))) 
     //stores occurances in index position 4     
      ar(i,4)=ar(i,4)+1;
      ar(j,4)=ar(j,4)+1;
     end
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:46:21.460

**选项 1：**将每一行映射为一个整数

每个元素都是一个字节，因此每一行可以唯一地映射为 3 个字节。

```
ar = 2.^ar;
ar = ar(:, 1) + 256 * ar(:, 2) + 256^2 * ar(:, 3); 
```

会将您的表格转换为单列，然后使用`hist`.

**选项 2：**使用`containers.Map`

这是 Matlab 的哈希表（仅支持最新版本）。您需要先将每一行转换为字符串。

# delphi - 调用 ConvertStringSidToSid() 时出现“系统错误。代码：87”

> ID：15040199
> 
> 赞同：1
> 
> 时间：2013-02-23T11:48:00.043
> 
> 标签：delphi, winapi, windows-7, delphi-xe3

我必须为“Everyone”用户组的某个文件夹设置权限，所以我需要这个组的 SID。当我打电话时，`ConvertStringSidToSid()`我得到错误`"System Error. Code: 87 - Parameter is incorrect"`。为什么？我的代码有什么问题？

```
...
function ConvertStringSidToSid(StringSid: LPCTSTR; Sid: PSID): BOOL; stdcall;
  external Advapi32 name 'ConvertStringSidToSidW';
...
var
  Sid: PSID;
...
  Sid := Nil;
  ConvertStringSidToSid(LPCTSTR('S-1-1-0'), Sid);
... 
```

TIA布兰科

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T12:02:57.787

`Sid`输出参数。在函数原型中添加`out`关键字。此外，使用`LPCTSTR`Unicode 版本的函数（带有`W`后缀的函数）也不安全。一旦您将此代码迁移到非 Unicode Delphi，您的调用将失败，因为`LPCTSTR`变为`PAnsiChar`非 Unicode Delphi 并且您将调用 Unicode 函数。而是直接使用`PWideChar`：

```
function ConvertStringSidToSid(StringSid: PWideChar; out Sid: PSID): BOOL; stdcall;
  external Advapi32 name 'ConvertStringSidToSidW'; 
```

# java - 如何在 WAR 上下文中发现 CDI 生产者？

> ID：15040202
> 
> 赞同：0
> 
> 时间：2013-02-23T11:48:47.257
> 
> 标签：java, jboss, cdi, jboss-weld

我遇到了 CDI 问题。`WEB-INF/lib`我已经部署了一个战争，它的文件夹中包含各种罐子。

其中一个 jar 有一个 Logger 生产者（一个带有用 注释的方法的类`@Produces`）和一些自定义限定符注释，其他一些 jar 有我想使用限定符和注入 Logger 的类。这个想法是为了避免代码重复。

但现在，令我惊讶的是，WELD 在部署期间抱怨说，它对 Logger 的依赖关系不满足。看起来，已经找到限定符注释，因为错误发生在必须在限定注入点注入的实例上。

看起来，weld 能够检测到所有包含的罐子中的“正常”豆子，并且能够将它们注入罐子“边界”。看起来只有生产者没有被检测到。这是正常的行为吗？有什么方法或技巧可以让 WELD 发现那个生产者吗？

# mongodb - 我可以访问 OpenShift Origin 使用的内部 MongoDB 和 ActiveMQ（这是一个好主意）吗？

> ID：15040205
> 
> 赞同：1
> 
> 时间：2013-02-23T11:48:50.673
> 
> 标签：mongodb, activemq, paas, openshift-origin

为了进行内部处理（节点和齿轮等的管理），OpenShift Origin 运行自己的 MongoDB 和 ActiveMQ 服务。这与您的应用程序可能为自己的需要安装的任何内容完全分开。

我可以从自己的应用程序访问这些内部服务吗？这是个好主意吗？一个用例是促进我的应用程序*之间的通信。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:55:51.510

不，这是不允许的。

我不确定您的具体想法是什么，但是您可以通过一些中间件的快速入门将它们作为 OpenShift 应用程序运行。

# c# - 计算 TCPChecksum、ValidTCPChecksum 和 ValidChecksum 的 PacketDotNet 问题

> ID：15040207
> 
> 赞同：0
> 
> 时间：2013-02-23T11:49:09.237
> 
> 标签：c#, nullpointerexception, winpcap, raw-sockets

我正在尝试使用 TCP 协议进行一些原始套接字编程，但是我遇到了 PacketDotNet 和 TCP 校验和的问题。

我在 PacketDotNet.TCPPacket 中遇到空指针异常。我得到的例外如下：

```
ValidTCPChecksum = 'tcpPacket.ValidTCPChecksum' threw an exception of type 'System.NullReferenceException' 
```

和

```
System.NullReferenceException: Object reference not set to an instance of an object.
at PacketDotNet.TransportPacket.CalculateChecksum(TransportChecksumOption option)
at PacketDotNet.TcpPacket.CalculateTCPChecksum()
at ProjectServer.MainWindow.packetstuff(String toIp, String fromIp, Byte[] payload) in  c:\\Users\\MyUser\\Documents\\Visual Studio 2012\\Projects\\ProjectServer\\ProjectServer\\MainWindow.xaml.cs:line 131
at ProjectServer.MainWindow.Project_Click(Object sender, RoutedEventArgs e) in c:\\Users\\MyUser\\Documents\\Visual Studio 2012\\Projects\\ProjectServer\\ProjectServer\\MainWindow.xaml.cs:line 68 
```

第 131 行是`tcpPacket.Checksum = (ushort)tcpPacket.CalculateTCPChecksum();`

似乎它可能与`HelpLink`null 有关，但我不是 100% 确定。

我试图自己做校验和，但到目前为止我还不能实现一个有效的校验和算法。

* * *

这是基本构建我的数据包的packetstuff方法。也许它有什么问题。

```
 public void packetstuff(string toIp, string fromIp, byte[] payload)
    {
        ushort tcpSourcePort = 123;
        ushort tcpDestinationPort = 321;
        var tcpPacket = new TcpPacket(tcpSourcePort, tcpDestinationPort);

        var ipSourceAddress = System.Net.IPAddress.Parse(fromIp);
        var ipDestinationAddress = System.Net.IPAddress.Parse(toIp);
        var ipPacket = new IPv4Packet(ipSourceAddress, ipDestinationAddress);

        var sourceHwAddress = "MY-MA-CA-DD-RE-SS";//?actually a bit unsure what this should be
        var ethernetSourceHwAddress = System.Net.NetworkInformation.PhysicalAddress.Parse(sourceHwAddress);
        var destinationHwAddress = "MY-MA-CA-DD-RE-SS";
        var ethernetDestinationHwAddress = System.Net.NetworkInformation.PhysicalAddress.Parse(destinationHwAddress);

        var ethernetPacket = new EthernetPacket(ethernetSourceHwAddress,
            ethernetDestinationHwAddress,
            EthernetPacketType.None);

        if (tcpPacket != null)
        {
            tcpPacket.Checksum = 0;

            tcpPacket.Checksum = (ushort)tcpPacket.CalculateTCPChecksum();  //This is where the error occurs.
        }

        ipPacket.PayloadPacket = tcpPacket;
        ipPacket.UpdateIPChecksum();

        ethernetPacket.PayloadPacket = ipPacket;

        ethernetPacket.UpdateCalculatedValues();

        packetBytes = ethernetPacket.Bytes;
        Thread producer = new Thread(new ThreadStart(ThreadRun));
        device.Open();
        producer.Start();

    } 
```

Windows7、VS2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:57:36.787

我看到你已经放弃了这个，但我会为其他寻找解决方案的人回答这个问题。

我在尝试做类似的事情时遇到了同样的问题。我发现您必须先将所有数据包链接在一起，然后才能调用 CalculateTCPChecksum()

因此，要修复问题中提出的示例，这应该可以工作（我尚未测试此代码，但它与我编写的工作代码非常相似）：

```
public void packetstuff(string toIp, string fromIp, byte[] payload)
{
    ushort tcpSourcePort = 123;
    ushort tcpDestinationPort = 321;
    var tcpPacket = new TcpPacket(tcpSourcePort, tcpDestinationPort);

    var ipSourceAddress = System.Net.IPAddress.Parse(fromIp);
    var ipDestinationAddress = System.Net.IPAddress.Parse(toIp);
    var ipPacket = new IPv4Packet(ipSourceAddress, ipDestinationAddress);

    var sourceHwAddress = "MY-MA-CA-DD-RE-SS";
    var ethernetSourceHwAddress = System.Net.NetworkInformation.PhysicalAddress.Parse(sourceHwAddress);
    var destinationHwAddress = "MY-MA-CA-DD-RE-SS";
    var ethernetDestinationHwAddress = System.Net.NetworkInformation.PhysicalAddress.Parse(destinationHwAddress);

    var ethernetPacket = new EthernetPacket(ethernetSourceHwAddress,
        ethernetDestinationHwAddress,
        EthernetPacketType.None);

    ethernetPacket.PayloadPacket = ipPacket;
    ipPacket.ParentPacket = ethernetPacket;

    if (tcpPacket != null)
    {
        ipPacket.PayloadPacket = tcpPacket;
        tcpPacket.ParentPacket = ip;
        ipPacket.UpdateIPChecksum();

        tcpPacket.Checksum = (ushort)tcpPacket.CalculateTCPChecksum();
    }
    else
        ipPacket.UpdateIPChecksum();

    ethernetPacket.UpdateCalculatedValues();

    packetBytes = ethernetPacket.Bytes;
    Thread producer = new Thread(new ThreadStart(ThreadRun));
    device.Open();
    producer.Start();

} 
```

# android - 如何获取simcard手机号码

> ID：15040208
> 
> 赞同：0
> 
> 时间：2013-02-23T11:49:21.360
> 
> 标签：android

我想获取手机的 simcard 当前号码并将其显示在 toast 消息中

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);       
  //  startActivity(browserIntent);y

    TelephonyManager phoneManager = (TelephonyManager) 
            getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
        String phoneNumber = phoneManager.getLine1Number();
        Context context = getApplicationContext();
        CharSequence text = phoneNumber;
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

//   setContentView(R.layout.activity_main);       
} 
```

但是android一直强迫它关闭。

错误日志：

```
02-23 13:39:29.260: E/AndroidRuntime(563): FATAL EXCEPTION: main
02-23 13:39:29.260: E/AndroidRuntime(563): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.MainActivity}: android.view.InflateException: Binary XML file line #10: Error inflating class uses-permission
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.os.Looper.loop(Looper.java:123)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-23 13:39:29.260: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
02-23 13:39:29.260: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:521)
02-23 13:39:29.260: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-23 13:39:29.260: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-23 13:39:29.260: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
02-23 13:39:29.260: E/AndroidRuntime(563): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class uses-permission
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-23 13:39:29.260: E/AndroidRuntime(563):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.Activity.setContentView(Activity.java:1647)
02-23 13:39:29.260: E/AndroidRuntime(563):  at com.example.test.MainActivity.onCreate(MainActivity.java:23)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-23 13:39:29.260: E/AndroidRuntime(563):  ... 11 more
02-23 13:39:29.260: E/AndroidRuntime(563): Caused by: java.lang.ClassNotFoundException: android.view.uses-permission in loader dalvik.system.PathClassLoader[/data/app/com.example.test-1.apk]
02-23 13:39:29.260: E/AndroidRuntime(563):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
02-23 13:39:29.260: E/AndroidRuntime(563):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-23 13:39:29.260: E/AndroidRuntime(563):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
02-23 13:39:29.260: E/AndroidRuntime(563):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
02-23 13:39:29.260: E/AndroidRuntime(563):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
02-23 13:39:29.260: E/AndroidRuntime(563):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:53:43.773

您可以在 androidManifest 文件中设置 READ_PHONE_STATE 权限

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission> 
```

# three.js - 什么是缓冲几何

> ID：15040209
> 
> 赞同：0
> 
> 时间：2013-02-23T11:49:42.563
> 
> 标签：three.js

有人可以向我解释一下 BufferedGeometry 在三个方面是什么吗？它与普通几何有什么不同。他们不是对显卡进行相同的调用吗？此外，在制作地形解决方案时，使用 BufferedGeometry 是否会提高速度。目前我已经创建了一个地形解决方案，它使用了数百个并排放置的小网格。与使用单个 PlaneGeometry 对象相比，这种方法在速度上略有提高（大概是因为可以更容易地应用 mip 映射和剔除）。但是它仍然不是很好，并且在大景观上性能变得不稳定 - 我想知道我是否应该追求 BufferedGeometry 或者只是接受我现在拥有的解决方案并将其限制在小地图上？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:48:15.157

缓冲几何是将数据向下发送到 gpu 的另一种方式。是的，这是一个速度改进，所以你可以试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T18:06:11.333

几何看起来像这样

```
class Geometry {

   this.vertices = []; //javascript array
   this.faces = [];    //another javascript array
   this.uvs = [];
   ...
} 
```

它只是一个 JS 类

这些数组包含一些复杂的东西，其他类和结构。

`this.vertices[0]`将`THREE.Vector3`是另一个类 - 具有数据和方法，但数据只是三个浮点数，所以它非常简单。可能是一个数组 [x,y,z] 而不是一个带有成员的对象，但是你不会有它的方法。

`this.faces[0]`更复杂。它将不确定性保存到顶点中，从而形成一个三角形（a，b，c），但它也可以保存诸如面法线（另一个 vec3）、切线、副法线、每个面颜色等之类的东西。

三，这里也是存放vertexNormals的地方。

WebGL 不知道如何解释这些东西。它理解 typedArrays，因此为了在 GPU 上开始使用 Geometry，它需要转换为 WebGL 友好的格式。

这就是 BufferGeometry。它是相同的数据，以不同的方式组织，对低级 gpu 更友好。

没有 javascript 类，没有方法，没有引用。您必须了解如何填充这些数组并管理偏移量和大小。

三个 JS 对象`THREE.Vector3`合二为一`Float32Array(9)`[xyzxyzxyz]。Face 没有空间来存储所有这些东西，它只是另一个数组中的另一个顺序：

Uint16Array(3) [0,1,2] （意思是：用顶点 0 、 1 和 2 制作一个三角形，意思是在偏移量 0 * 3 、 1 * 3 和 2 * 3 处查找该顶点数组。

这就是它的要点。更快，更少的内存，更不灵活。

如果您要使用着色器操作地形，则应使用 bufferGeometry。如果您想进行诸如“查找此三角形或此顶点的最近邻居”之类的查找，您很可能需要结构，因此您要么自己构建一些东西，要么使用`Geometry`.

# actionscript-3 - 如何在线工具上应用滤镜模糊？动作脚本

> ID：15040213
> 
> 赞同：0
> 
> 时间：2013-02-23T11:49:59.347
> 
> 标签：actionscript-3, flash, drawing

所以我有两行工具。第一个是法线工具，第二个是带有滤镜模糊效果的线条工具。该工具在画布上绘制线条时起作用，但第一个法线工具也有模糊效果。如何仅在第二个工具上应用模糊效果？

对不起语法不好...

```
 var blurX:Number = 20;
 var blurY:Number = 20;
 var quality:Number = 1;
 var my_blur_filter:BlurFilter = new BlurFilter(blurX, blurY, quality); 
```

//没有滤镜模糊的工具

```
function PencilTool(event:MouseEvent):void{

quitActiveTool();
active = "Pencil";

board.addEventListener(MouseEvent.MOUSE_DOWN, MouseDown);
board.addEventListener(MouseEvent.MOUSE_UP, MouseUp);

}

function MouseDown(e:MouseEvent):void{

    doDraw=true;

    drawingLine.graphics.moveTo(drawingLine.mouseX, drawingLine.mouseY);
    drawingLine.graphics.lineStyle(lineSize, activeColor, lineAlpha);

    board.addEventListener(MouseEvent.MOUSE_MOVE, MouseMove);

} 
```

//带有滤镜模糊的工具

```
 function brushTool(event:MouseEvent):void{

    quitActiveTool();
    active = "Brush";

      board.addEventListener(MouseEvent.MOUSE_DOWN, brushMouseDown);
      board.addEventListener(MouseEvent.MOUSE_UP, MouseUp);

}

function brushMouseDown(e:MouseEvent):void{

    doDraw=true;

    if(active=="Brush"){
    drawingLine.filters = new Array(my_blur_filter);

    drawingLine.graphics.moveTo(drawingLine.mouseX, drawingLine.mouseY);

    drawingLine.graphics.lineStyle(lineSize, activeColor, lineAlpha);

    }
    board.addEventListener(MouseEvent.MOUSE_MOVE, MouseMove);

} 
```

//鼠标移动&鼠标上移

```
function MouseMove(e:MouseEvent):void{
                var curX:Number=drawingLine.mouseX;
                var curY:Number=drawingLine.mouseY;

                        drawingLine.graphics.lineTo(curX,curY);

                    e.updateAfterEvent();

    }

function MouseUp(event:MouseEvent):void{

    doDraw=false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:28:48.820

过滤器应用于整个显示对象，而不仅仅是设置后添加的图形。您可以使用两层，`drawingLine`用于铅笔和`drawingLineBlurred`画笔，然后只将模糊添加到`drawingLineBlurred`.

您可以通过为每个笔划创建一个新的显示对象，甚至将它们绘制到一个`BitmapData`对象来变得更加复杂，但对于一个简单的绘图工具来说，这可能就足够了。

作为绘制多个图层的示例，您可以在[`Shape`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Shape.html)每次按下鼠标时创建一个新图层并绘制到该图层而不是`drawingLine`：

```
private var currentStroke:Shape;

private function startDrawing():void {
    currentStroke = new Shape();
    addChild(currentStroke);

    // Apply the blur filter to currentStroke here if the brush tool is selected.

    currentStroke.graphics.moveTo(currentStroke.mouseX, currentStroke.mouseY);
    currentStroke.graphics.lineStyle(lineSize, activeColor, lineAlpha);
}

// etc 
```

但这显然不是很有效，因为你最终会得到很多很多`Shape`s。如果它成为一个问题，我建议改为查看[BitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html)并在每次笔画完成后使用它来绘制。

# django - Django CSRF 验证失败。请求中止

> ID：15040216
> 
> 赞同：3
> 
> 时间：2013-02-23T11:50:34.730
> 
> 标签：django

我正在构建此 wiki 帖子，并且在尝试保存数据时遇到错误。我目前正在使用 django 1.4.3，而我使用的教程已经很老了。所以我不认为 CSRF 包含在旧版本中。

```
Forbidden (403)

CSRF verification failed. Request aborted.
Help

Reason given for failure:

    CSRF token missing or incorrect
     In general, this can occur when there is a genuine Cross Site Request Forgery, or when Django's CSRF mechanism has not been used correctly. For POST forms, you need to ensure:

 Your browser is accepting cookies.
 The view function uses RequestContext for the template, instead of Context.
 In the template, there is a {% csrf_token %} template tag inside each POST form that   targets an internal URL.
 If you are not using CsrfViewMiddleware, then you must use csrf_protect on any views that use the csrf_token template tag, as well as those that accept the POST data. 
```

我认为问题出在我的模板中，但无论如何我都会列出我的views.py

我的观点是：

```
 from wiki.models import Page
 from django.shortcuts import render_to_response 
 from django.http import HttpResponseRedirect
 def view_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
     except Page.DoesNotExist:
         return render_to_response("create.html",{"page_name":page_name})
     content = page.content
     return render_to_response("view.html",{"page_name":page_name , "content":content})
 def edit_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
         content = page.content
     except Page.DoesNotExist:
         content = ""
     return render_to_response("edit.html",{"page_name":page_name, "content":content})
 def save_page(request , page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk = page_name)
         page.content = content
     except Page.DoesNotExist:
         page = Page(name= page_name , content=content)
         page.save()
         return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

我的 create.html

```
 <html>
    <head>
        <title>{{page.name}} - Create </title>
    </head>
    <body>
    <h1>{{page_name}} </h1>
    This page does not exist. <a href="/wikicamp/{{page_name}}/edit/">Create?     </a>
 </body>
 </html> 
```

我的 edit.html ，我在里面添加了 {% csrf_token %} 但似乎失败了。

```
 <html>
<head>
    <title>{{page_name - Editing</title>
</head>
<body>
    <h1>Editing {{page_name}} </h1>
    <form method = "post" action="/wikicamp/{{page_name}}/save/"> {% csrf_token %}
            <textarea name="content" rows="20" cols="60"> {{content}}
  </textarea><br/>      
        <input type="submit" value="Save Page"/>
        </form>
    </body>
  </html> 
```

我的views.py 模板

```
 <html>
<head>
    <title>{{page_name}}</title>
</head>
<body>
    <h1>{{page_name}} </h1>
    {{content}}
    <hr/>
    <a href="/wikicamp/{{page_name}}/edit/">Edit this page ?</a>
</body>
   </html> 
```

我的网址配置：

```
 from django.conf.urls import patterns, include, url
  from django.contrib import admin
  from django.conf import settings

  admin.autodiscover()
  urlpatterns = patterns('',

      url(r'^admin/', include(admin.site.urls)),
      url(r'^wikicamp/(?P<page_name>[^/]+)/edit/$','wiki.views.edit_page'),
      url(r'^wikicamp/(?P<page_name>[^/]+)/save/$','wiki.views.save_page'),
      url(r'^wikicamp/(?P<page_name>[^/]+)/$','wiki.views.view_page'),

  ) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T20:08:31.483

> `from django.template import RequestContext`
> 
> `return render_to_response('contact_form.html',` `{'errors': errors}, context_instance=RequestContext(request))`

如果表单用于内部 URL，还可以在元素内使用 csrf_token 标记，例如：

```
 "form action="" method="post">{% csrf_token %}" 
```

[参考](https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:03:32.967

将 context_instance=RequestContext(request) 添加到您将在其中使用表单的每个视图中：似乎您没有传递上下文处理器

```
 from wiki.models import Page
 from django.shortcuts import render_to_response 
 from django.http import HttpResponseRedirect
 def view_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
     except Page.DoesNotExist:
         return render_to_response("create.html",{"page_name":page_name})
     content = page.content
     return render_to_response("view.html",{"page_name":page_name , "content":content}, context_instance=RequestContext(request))
 def edit_page(request,page_name):
     try:
         page = Page.objects.get(pk=page_name)
         content = page.content
     except Page.DoesNotExist:
         content = ""
     return render_to_response("edit.html",{"page_name":page_name, "content":content}, context_instance=RequestContext(request))
 def save_page(request , page_name):
     content = request.POST.get('content', 'this is the default')
     try:
         page = Page.objects.get(pk = page_name)
         page.content = content
     except Page.DoesNotExist:
         page = Page(name= page_name , content=content)
         page.save()
         return HttpResponseRedirect("/wikicamp/" + page_name + "/") 
```

试试这个。

您仍然遇到问题，请同时发布 urls .py

# c# - ASP.NET 电子商务网站的搜索功能

> ID：15040218
> 
> 赞同：1
> 
> 时间：2013-02-23T11:50:38.287
> 
> 标签：c#, asp.net, sql-server-2005, search, e-commerce

我有一个包含 20 个子页面的电子商务/在线购物网站。它有各种产品，我想为它实现搜索功能。搜索可以是“白衬衫”、“黑鞋”、“皮腰带”等。

我如何实现搜索机制？该网站预计将在几年内增长。

我知道 SQL 自由文本、全文搜索、Lucene.Net、Lucene.NET solr、ElasticSearch 等解决方案。

但哪一个适合这种情况。你知道人们搜索奇怪的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:44:29.370

使用 LinQ，您可以使用如下语句：

```
var _searchWord = myTextbox.Test;
myContainer.All.Where(s => s.mysearchcriteria.Contains(_searchWord)); 
```

# jquery - 给定一组 div，我如何确定连续的最后一个

> ID：15040225
> 
> 赞同：3
> 
> 时间：2013-02-23T11:51:09.020
> 
> 标签：jquery, html

假设我有`<div><div><div><div><div><div>`等，每个 div 浮动并具有固定宽度。

我如何以编程方式（使用 jquery 或其他方式）确定哪个 div 将位于一行的末尾，如浏览器中呈现的那样？

换句话说，在大屏幕上呈现的同一个页面：

```
[ ][ ][ ][ ]<-I want this one
[ ][ ][ ]<-and this one 
```

和一个更小的屏幕

```
[ ][ ]<-I want this one
[ ][ ]<-and this one
[ ] etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:39:12.040

这个问题引起了我的兴趣，因为它具有很多实际意义。我喜欢 OP 自己的答案，但我认为它可以通过容器上的单个方法链以声明方式（更直观地）完成。所以我把它煮成这样：

```
$("#container div").each(function () { 
    $(this).toggleClass('rightMost',
        $(this).is(':last-child')  || 
        $(this).position().left >= $(this).next().position().left
    );
}); 
```

由于`.next()`在最后一个元素上返回 null，因此您需要让最后一个元素的条件也通过`.is(':last-child')`

此外，由于容器可能仅对一个元素足够宽——在这种情况下，所有元素都应标记为最右边——当当前元素的 position().left 大于*或等于*该元素时，该条件应适用.next() 的。

您可以看到它在工作并包装在一个功能中，该功能在文档就绪和窗口调整大小时都被触发：http: [//jsfiddle.net/mhfaust/TdXZJ/](http://jsfiddle.net/mhfaust/TdXZJ/)

**更新** 如果期望的效果不仅仅是应用/删除类名，则可以更普遍地应用条件（尽管不太优雅），如下所示：

```
$("#container div").each(function () { 
    if($(this).is(':last-child') || $(this).position().left >= $(this).next().position().left)){
        // do one thing...
    }

    else{
        // ... or do the other.
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:29:00.383

考虑以下 jQuery：

```
$(document).ready(function() {
    var k = Math.floor(($('body').width())/$('div').width());
    $('div:nth-child('+k+'n)').each(function() {
        $(this).css('background-color','blue');
    });
}); 
```

此代码计算行的最后一个 div 的索引。然后，它使用`nth-child(equation)`选择器，`equation`设置为`k + 'n'`，即选择所有索引为 的倍数的div `k`，即**所有它们的最后一行的 div**。

这是一个完整的示例，它将最后一列中的所有（最初为红色）div 绘制为蓝色：

```
<!DOCTYPE html>
<html> <head>
<title></title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var k = Math.floor(($('body').width())/$('div').width());
    $('div:nth-child('+k+'n)').each(function() {
        $(this).css('background-color','blue');
    });
});
</script>
<style>
div {
   width: 2em;
   height: 2em;
   background-color: red;
   border-radius: 4px;
   display: inline-block;
}
</style>
</head>

<body>
<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>

</body> </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:01:02.520

尝试这个：

html:

```
<div>a</div><div>a</div><div>a</div><div>a</div>
<div>a</div><div>a</div><div>a</div><div>a</div>
<div>a</div><div>a</div><div>a</div><div>a</div> 
```

js：

```
 $(window).resize(function(){
    var mostRight=null;

    $("div").each(function(){
       var $this = $(this);
       if (mostRight==null) mostRight=$this;
         if(mostRight.position().left<$this.position().left){
            mostRight=$this;   
          }      

    });

    var mostRights=[];
    $("div").each(function(){
        var $this = $(this);
        if( $this.position().left==mostRight.position().left){
            mostRights.push($this);
        }
    });
    mostRights.push($("div").last());

    $("div").css("background-color","white");
    for(var i=0;i<mostRights.length;i++){
     $(mostRights[i]).css("background-color","red");
    }

}); 
```

CSS：

```
div{

    display:inline-block;
    float:left;
    width:50px;
} 
```

看这里：

[http://jsfiddle.net/bznEx/3/](http://jsfiddle.net/bznEx/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T15:52:31.547

根据 clph3r 的回答，我发现解决此问题的最简单方法是向后遍历数组：

```
var prev=-1;
    $($("#container div").get().reverse()).each(function(){
       var $this = $(this)
       if($this.position().left>prev){
           $this.addClass("right");
       }
       prev=$this.position().left;
}); 
```

[JSFiddle](http://jsfiddle.net/bznEx/13/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T11:52:55.563

您可以使用`.last()`或`:last-child`选择器。

```
var lastDiv = $("div").last(); 
```

或者：

```
<div id="container">
   <div><div><div><div><div><div>
</div>

var lastChild = $("#container:last-child"); 
```

[http://api.jquery.com/last-child-selector/](http://api.jquery.com/last-child-selector/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T11:52:58.870

通过使用 jquery jquery ，像这样

```
$("div:last").val(); 
```

# javascript - 包含图像/文本/插图的电子邮件中的 HTML 滑块

> ID：15040226
> 
> 赞同：0
> 
> 时间：2013-02-23T11:51:10.517
> 
> 标签：javascript, html, email, slider, newsletter

如何制作包含照片/插图和文本的滑块，可以通过电子邮件而不是网站发送？

在[本例时事通讯](http://themeforest.net/item/innovate-email-newsletter/2447801)中，单击`Live Preview`。

我们可以通过电子邮件发送该链接中显示的时事通讯，因为它被命名为时事通讯，如果我们不能发送，那是一种浪费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:54:03.490

电子邮件中任何 HTML 的问题在于，它完全取决于收件人的电子邮件客户端将解析的 HTML。即使客户端（正确）解析了滑块的 HTML，您也必须解决加载外部资源（图像）的问题。我想说这是不可能的，但无论如何，将电子邮件发送到 Gmail 帐户，看看会发生什么。

# c# - 第一个用户作为 MVC4 应用程序的管理员

> ID：15040233
> 
> 赞同：2
> 
> 时间：2013-02-23T11:52:23.987
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我不聪明，我遇到了这个小问题。我想到了一个我想创建的应用程序，一个显示我白天所做工作的授权系统。只有我作为唯一管理员创建的用户才能登录系统。

为了制作该应用程序，我必须首先将我（管理员）插入数据库，以便我可以继续向其中添加新功能。但是MVC4提供的数据库（`myappname`默认）不能直接用于新成员数据的插入（尤其是`webpages_Membership`需要用户密码加密的表）。

我对 MVC4 还是太陌生，无法用新的数据库替换定义的数据库并从头开始。

你知道我必须做什么才能将`administrator`用户名和密码和定义的值作为新成员数据插入到定义的表中，以便我可以使用新创建的 MVC4 应用程序提供的登录页面吗？

**更新** 我正在使用 VS2012，我打开 ASP.NET 配置（项目->Asp.Net 配置）并按照 AdamB 帖子中链接提供的教程进行操作，但它不会将用户添加到我的数据库中。我不想这样做，但我认为现在我只能点击`Register`链接并`administrator`从那里注册一个带有密码的新用户 ( )，只有这样有助于将新成员添加到我的表中。关于角色，我直接将新角色名添加到表（webpages_Roles）中，并在数据库中的适当表中手动`UserId`引用`RoleId`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:57:20.070

阅读这个，我认为它会帮助你 [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T04:36:39.830

您在 ASP.NET 配置中创建的用户保存在其默认数据库 ASPNETDB.MDF 中。单击解决方案资源管理器中的显示所有文件以查看它。将用户保存在您自己的数据库中的一种方法是使用自定义成员资格提供程序和自定义角色提供程序。它还使您可以控制身份验证中的所有内容。这是[Custom Membership Provider](http://thebojan.ninja/2015/03/12/custom-membership-provider/)、[Custom Role Provider](http://thebojan.ninja/2015/03/12/custom-role-provider/)、[Custom Membership User](http://thebojan.ninja/2015/03/12/custom-membership-user/)的链接。您也可以从 MSDN [How to: Sample Membership Provider Implementation](http://msdn.microsoft.com/en-us/library/6tc47t75.aspx)和这个[在 MVC 3 中实现您自己的 RoleProvider 和 MembershipProvider尝试这个](http://www.brianlegg.com/post/2011/05/09/Implementing-your-own-RoleProvider-and-MembershipProvider-in-MVC-3.aspx)

# ios - 类似 Cydia 的 iOS 弹出窗口

> ID：15040234
> 
> 赞同：-1
> 
> 时间：2013-02-23T11:52:41.553
> 
> 标签：ios, popup, cydia

如何让我的应用弹出 Cydia 的“重新加载数据”/“加载数据”之类的内容（像[这样](http://media.idownloadblog.com/wp-content/uploads/2012/02/cydia-reloading-data.jpg "这")）？

它是Apple的公共API吗？

我怎么称呼这个？

我可以指定显示哪个图像而不是加载指示器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:59:31.150

首先，它既不是公共的，也不是私有的 Apple API——它是一个自定义控件。

其次，你为什么不直接使用[Cydia 的实现](http://gitweb.saurik.com/cydia.git/blob/HEAD:/Cydia/LoadingView.mm)呢？

第三，如果没有，[也有其他选择](https://github.com/jdg/MBProgressHUD)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:47:58.800

我会添加一个图像视图、一个标签和一个活动指示器。您甚至可以开发一个子类并将其上传到 GitHub！

# sql - 查询以下场景

> ID：15040241
> 
> 赞同：2
> 
> 时间：2013-02-23T11:53:31.673
> 
> 标签：sql, sql-server, tsql, join, self-join

我有一张桌子，里面有`EMPLOYEEID`, `EMPLOYEENAME`, `MANAGERID`.

`MANGERID`是从列`EMPLOYEEID`。有些`EMPLOYEEID`没有任何`manangerid`（即NULL）。现在我需要查询的输出，以便它返回`EMPLOYEENAME`和对应`MANGERNAME`的 .

如何做呢？

我已经尝试过自我加入，但无法获得所需的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:55:21.573

您将需要一个自我加入，`LEFT JOIN`以获得那些没有经理的人：

```
SELECT
  e.EMPLOYEEID,
  e.EMPLOYEENAME,
  m.EmployeeName AS ManagerName
FROM Employees AS e
LEFT JOIN Employees AS m ON e.ManagerId = m.EmployeeID; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!3/0467a/1)

# php - PHP OOP 中的实例化类

> ID：15040246
> 
> 赞同：0
> 
> 时间：2013-02-23T11:53:54.783
> 
> 标签：php, autoload

我正在编写一个包含大约 10 个课程的应用程序来完成不同的主题。我有 2 个选项来实例化它们。
1-拥有一个文件（或一个基类）来实例化所有文件。通过这种方式，我确信我将所有类都实例化了一次，并且可以在任何地方使用它们。这样我就可以使用`__outoload()`而不是包含文件。

2-分别在每个文件中实例化所需的类。绝对这样，我需要包含不同的文件。

这些方法中哪一种更好？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:57:46.583

这取决于多种因素，例如您的网站的负载量。如果您的网站使用量很大，您不想加载一堆不必要的对象。关于在哪里实例化 PHP 对象有不同的意见，但根据我的经验，最好是`include()`（`require()`或其他）文件，然后在其类文件中实例化其对象。所以我会`include('class_A.php');`，然后在 class_A.php 里面我会`$object = new Object()'`。作为一个随机的琐事，请注意`_once()`函数 (`include_once()`和`require_once()`) 的周期比普通版本的要多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:57:30.980

使用解决方案 2，每个类一个文件，并使用[php autoload](http://php.net/manual/fr/language.oop5.autoload.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:57:48.837

[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern#PHP_2)是您的选择。

你有一个大师班（工厂），它知道如何实例化你的每一个类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:58:37.343

将它们放在单独的文件中总是更好。它使代码清晰 1000 倍。

对于加载 php 文件，您比使用[__autoload](http://php.net/manual/en/language.oop5.autoload.php)（如您所见：php 甚至包含对这种情况的本机支持）

# entity-framework-4 - 实体框架显式加载示例

> ID：15040249
> 
> 赞同：3
> 
> 时间：2013-02-23T11:54:12.803
> 
> 标签：entity-framework-4, explicit

我正在“northwind”数据库上尝试这部分代码。但是我收到了 DataBind 错误

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            GetSpecificCustomer();
        }
    }

    private void GetSpecificCustomer()
    {
        using (var ctx = new northwindContext())
        {
            var query = ctx.Customers.Include("CustomerID").Take(3);

            grdEmployees.DataSource = query;
            grdEmployees.DataBind(); =>NotSupportedException was unhandled by user code(Data binding directly to a store query (DbSet, DbQuery, DbSqlQuery) is not supported. Instead populate a DbSet with data, for example by calling Load on the DbSet, and then bind to local data. For WPF bind to DbSet.Local. For WinForms bind to DbSet.Local.ToBindingList().)

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:03:14.777

异常包含您需要做的事情：

> ...而是用数据填充 DbSet ...

所以你需要评估查询。例外提到了[Load](http://msdn.microsoft.com/en-us/library/system.data.entity.dbextensions.load%28v=vs.103%29.aspx)方法，但是因为无论如何您都需要在本地存储结果，所以最简单的解决方案是`ToArray()`在将查询分配给`grdEmployees.DataSource`.

```
var query = ctx.Customers.Include("CustomerID").Take(3);
grdEmployees.DataSource = query.ToArray();
grdEmployees.DataBind(); 
```

该`ToArray`方法将执行查询并在数组中返回结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T22:19:20.467

如果你想要记录组。

你应该使用`.Tolist();`

如 ：

```
var states = (from s in yourentity.nameTbl
              select s).ToList(); 
```

为了在获得一条记录时获得更好的结果，最好使用这个例子，因为它有更好的性能。如 ：

```
var users = (from s in yourentity.UserTbls
             where s.User == Page.User.Identity.Name
             select s
            ).FirstOrDefault(); 
```

对于带有分页的记录列表：

```
int page = 1; // set your page number here
var rooms = (from s in yourentity.yourtable
             where s.User == Page.User.Identity.Name
             orderby s.Id descending
             select new {s.Id,s.Name,s.User}
            ).Skip((page-1)*SetPageSize).Take(SetPageSize).ToList(); 
```

# android - 无法在 Mac 上启动 android 的模拟器摄像头

> ID：15040252
> 
> 赞同：0
> 
> 时间：2013-02-23T11:55:17.137
> 
> 标签：android, android-emulator

我正在使用带有 android 4.0 sdk 的 mac lion。每当我想在模拟器上启动相机时，我都会遇到“android camera unexpected jpeg encoding quality levels 0”错误。我在 avd 管理器中设置了相机支持。我在 Windows 上没有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:47:49.513

安装最新的 sdk 工具，它们将附带一个配置相机选项。`

# android - 使用 SimonVT 的 android-menudrawer 将滑动菜单添加到活动中

> ID：15040256
> 
> 赞同：1
> 
> 时间：2013-02-23T11:55:31.903
> 
> 标签：android, slidingdrawer, slidingmenu

我真的需要帮助将这种类型的抽屉合并到我的 android 应用程序中。

Feinstein 滑动菜单抽屉库令人困惑，并导致大量我无法修复的错误 - 尤其是 jar 不匹配，即使在取出 android 支持库时也是如此。所以，我切换到了 SimonVT 的 android 滑动抽屉库，它看起来更简单（[在此处](https://github.com/SimonVT/android-menudrawer)链接）。

我只需要知道如何处理这些类型的滑动抽屉的人来指导我如何将滑动菜单合并到我的应用程序中。我已经广泛查看了提供的样本，但我仍然感到困惑。我对android编程很陌生，所以请放轻松。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:03:41.600

我认为你没有覆盖一些方法......我也在我的项目中包含了 SimonVTs MenuDrawer（这里是 com.example.testapp）。我会发布我的代码，它靠在 WindowSample 上，希望对您有所帮助。检查您是否已将库添加到您的项目中（在 Eclipse 中：project->proberties->android->add... 在此之前，该库必须在您的工作区中）首先从示例应用程序中获取 MenuScrollView 并包含它到您的项目源。然后为侧边栏创建一个布局，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.testapp.MenuScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/sidebar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
</LinearLayout> 
```

然后创建一个类，例如命名为 NavigationManager：

```
package com.example.testapp;

import net.simonvt.menudrawer.MenuDrawer;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.view.MenuItem;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;

public class NavigationManager extends Activity implements View.OnClickListener {
private static final String STATE_MENUDRAWER = "de.example.testapp.NavigationManager.menuDrawer";
private static final String STATE_ACTIVE_VIEW_ID = "de.example.testapp.NavigationManager.activeViewId";

private MenuDrawer menuDrawer;
private int activeNavigationItemID;
private Context context;
private Activity activity;

@SuppressLint("NewApi")
public void set(int contentView) {
    activity = this;
    context = this;

    menuDrawer = MenuDrawer.attach(activity, MenuDrawer.MENU_DRAG_WINDOW);
    menuDrawer.setContentView(contentView);
    menuDrawer.setMenuView(R.layout.sidebar);

    // add Items to Sidebar, like you want!!!!
    LinearLayout sidebar = (LinearLayout) findViewById(R.id.sidebar);
    for (int i = 1; i <= 5; i++) {
        TextView tv = new TextView(context);
        tv.setText("Item: " + i);
        tv.setId(i);
        tv.setOnClickListener(this);
        sidebar.addView(tv);
    }

    MenuScrollView msv = (MenuScrollView) menuDrawer.getMenuView();
    msv.setOnScrollChangedListener(new MenuScrollView.OnScrollChangedListener() {
        @Override
        public void onScrollChanged() {
            menuDrawer.invalidate();
        }
    });
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH
            && getActionBar() != null) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    TextView activeView = (TextView) findViewById(activeNavigationItemID);
    if (activeView != null) {
        menuDrawer.setActiveView(activeView);
        // mContentTextView.setText("Active item: " + activeView.getText());
    }

}

@Override
protected void onRestoreInstanceState(Bundle inState) {
    super.onRestoreInstanceState(inState);
    menuDrawer.restoreState(inState.getParcelable(STATE_MENUDRAWER));
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelable(STATE_MENUDRAWER, menuDrawer.saveState());
    outState.putInt(STATE_ACTIVE_VIEW_ID, activeNavigationItemID);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        menuDrawer.toggleMenu();
        return true;
    }

    return super.onOptionsItemSelected(item);
}

@Override
public void onBackPressed() {
    final int drawerState = menuDrawer.getDrawerState();
    if (drawerState == MenuDrawer.STATE_OPEN
            || drawerState == MenuDrawer.STATE_OPENING) {
        menuDrawer.closeMenu();
        return;
    }

    super.onBackPressed();
}

@Override
public void onClick(View v) {
    // Do something!!!!

    menuDrawer.setActiveView(v);
    menuDrawer.closeMenu();
    activeNavigationItemID = v.getId();
}

} 
```

您必须在标记的行上添加您的项目和逻辑，单击后发生的事情（标有!!!！）。您现在在 Acitivities 中要做的就是让它们扩展 NavigationManager 并像这样调用 set 方法：

```
package com.example.testapp;

import android.os.Bundle;

public class MainActivity extends NavigationManager {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    set(R.layout.activity_main);
}
} 
```

希望它有帮助:)

# actionscript-3 - 如何通过两个（或三个）给定角度和一条边（一条线）绘制一个三角形，并在动作脚本中的每个角处写上角度？

> ID：15040257
> 
> 赞同：0
> 
> 时间：2013-02-23T11:55:37.317
> 
> 标签：actionscript-3, actionscript, geometry, actionscript-2

我想用两个角和一个边长（或一条直线）来绘制一个三角形。谁能给我一个 ActionScript 的代码。而且每个角都应该有那个角的角度。提前致谢

对不起，我不能上传任何图片。。

想象一个名为 ABC 的普通三角形。我想通过给出 AB 的长度和 A、B 的角度来绘制三角形。例如，如果我给出角“a = 45 度”和“b = 45 度”（那么其他角度将是 90 度）和“AB = 20 像素”，则应绘制三角形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:54:55.997

数学的乐趣:)

[Sprite](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)类有一个[graphics](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#graphics)属性，可让您使用Flash [Graphics](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html) API 进行绘制。做基本的线条图，想想笔尖。您可以将尖端移动到 x,y 坐标，并将线条绘制到其他坐标。当您这样做时，笔尖现在位于新坐标处。在 Flash 中，坐标平面的原点 (0,0) 位于顶部/左侧。

`moveTo()`我通过使用该方法设置起始坐标来绘制三角形。然后计算将从起始坐标绘制的两条线的端点。最后，使用该方法绘制线段`lineTo()`。

```
package
{
    import flash.display.Graphics;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;

    public class DrawTriangle extends Sprite
    {
        private var startX:Number = 200;
        private var startY:Number = 200;

        private var angleA:Number = 10;
        private var angleB:Number = 90;
        private var lengthOfSideC:Number = 200;

        public function DrawTriangle()
        {
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;

            var angleAInRadians:Number = angleInRaidans(angleA);
            var angleBInRadians:Number = angleInRaidans(angleB);
            var angleCInRadians:Number = angleInRaidans(180 - angleA - angleB);
            var lengthOfSideA:Number = Math.sin(angleAInRadians) * lengthOfSideC / Math.sin(angleCInRadians);
            var lengthOfSideB:Number = Math.sin(angleBInRadians) * lengthOfSideC / Math.sin(angleCInRadians);

            var g:Graphics = this.graphics;
            g.clear();
            g.lineStyle(1.5, 0xFF0000, 1, true);
            g.moveTo(startX, startY);

            var bSideEndX:Number = (lengthOfSideB * Math.cos(angleBInRadians))+ startX;
            var bSideEndY:Number = (lengthOfSideB * Math.sin(angleBInRadians))+ startY;
            g.lineTo(bSideEndX, bSideEndY);

            g.lineStyle(1.5, 0x0000FF);
            var cSideEndX:Number = -(lengthOfSideC * Math.cos(angleCInRadians)) + startX;
            var cSideEndY:Number = (lengthOfSideC * Math.sin(angleCInRadians)) + startY;
            g.lineTo(cSideEndX, cSideEndY);

            g.lineStyle(1.5, 0);
            g.lineTo(startX, startY);
        }

        private function angleInRaidans(degrees:Number):Number
        {
            return degrees * Math.PI / 180;
        }
    }
} 
```

# java - java中数组名的动态初始化？

> ID：15040262
> 
> 赞同：0
> 
> 时间：2013-02-23T11:56:11.440
> 
> 标签：java, linked-list, biginteger

我想初始化很多数组。数组的名称遵循数组12，数组13，数组14，......数组19，数组22，数组23............数组99的顺序。实际上我有一个包含一些整数的array1，一个包含一些整数的数组2，我希望array12 中的公共整数都有。（类似array2,3,4..9）最好的方法是什么。链接列表，映射，向量？？请记住，我的程序非常频繁地使用了子集（例如 array12）。

我认为最好的方法是存储在数组中，因为我不必一直遍历链接列表（或任何其他方式）。但我不会写

```
 public int array12=new int[10];
    public int array13=new int[10]; 
```

此外，当我的 i(some integer)=1 和 j=2 我想访问 array12 时，在代码中间。那我该怎么做呢？..

我实际上是想解决这个问题。[问题页面](https://www.facebook.com/hackercup/problems.php?pid=141185906040057&round=402976459784646) 请给我与我提出的问题相关的答案，而不是对 fb 问题的答案。我想自己做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:59:21.260

您需要进入更高维度的数组 - 具体来说，您似乎正在寻找一个 3D 数组。设计中进入名称的两个整数（即`1`和`2`in `array12`）应该是 3D 数组的前两个索引。

```
int[][][] array = new int[10][][];
for (int i = 0; i != 10 ; i++) {
    array[i] = new int[10][];
    for (int j = 0 ; j != 10 ; j++) {
        array[i][j] = new int[10];
    }
} 
```

现在访问`array34[i]`您的设计将看起来像`array[3][4][i]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:58:59.333

您需要使用地图 - 您不能（轻松）动态命名事物：

```
public final Map<Stiring, Integer[]> myMap = new HashMap<>(){
  {
    put("array1", new Integer[10]);
    put("array2", new Integer[10]);
    put("array3", new Integer[10]);
    ...more arrays
  }
}; 
```

您可以使用带有实例初始化器技巧的匿名类将这些数组放入您的地图中，如上所述。

然后，您可以使用引用数组`Map.get`

```
final Integer[] myArray = myMap.get("array1"); 
```

**编辑**

根据@twain249 的评论，您可以使用循环来填充您的地图：

```
public final Map<Stiring, Integer[]> myMap = new HashMap<>(){
  {
    for(int i=0;i<someNumber;++i) {
      for(int j=0;j<someOtherNumber;++j) {
        put("array" + i + "" + j, new Integer[10]);
      }
    }
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:01:45.943

这是不可能的。我的方法是创建 ArrayList 和您想要动态创建的每个数组，您只需将其添加到 ArrayList 中的正确位置。

这是代码示例：

```
ArrayList<int[]> listOfArrays = new ArrayList<int[]>(); // Creates a list of arrays.

int[] someArrayFromListOfArrays = listOfArrays.get(index); // Gets an array from arraylist

listOfArrays.add(new int[]); // Adds a new array to the collection

listOfArrays.add(index, new int[]); // This will insert an array into a specified location in the list 
```

这应该可以满足您的需求。

这是[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)的规范。

希望能帮助到你

# python - 用 Scipy 检查梯度

> ID：15040263
> 
> 赞同：2
> 
> 时间：2013-02-23T11:56:14.093
> 
> 标签：python, math, scipy, gradient

我想用来[`scipy.optimize.check_grad`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.check_grad.html)检查我的[sigmoid 函数](http://mathworld.wolfram.com/SigmoidFunction.html)实现的梯度；这是我的 Python 函数：

```
def sigmoid(x, gradient=False):
    y = 1 / (1 + numpy.exp(-x))
    return numpy.multiply(y, 1 - y) if gradient else y 
```

以下是参数和对 的调用`check_grad`：

```
x0 = numpy.random.uniform(-30, 30, (4, 5))
func = sigmoid
grad = lambda x: sigmoid(x, gradient=True)
error = scipy.optimize.check_grad(func, grad, x0) 
```

我收到以下错误。形状不匹配是指操作`xk+d`。知道是什么原因造成的吗？

> 文件“scipy\optimize\optimize.py”，第 597 行，在 approx_fprime
> grad[k] = (f(*((xk+d,)+args)) - f0) / d[k]
> ValueError: 操作数不能与形状一起广播 (4,5) (4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:42:53.377

您得到的错误是因为`check_gradient`只接受平面点数组。`x0`如果您使用shape数组`(20,)`而不是`(4, 5)`. 但事实并非如此！

这是`approx_fprime`我的安装（`scipy.__version__ = '0.9.0'`）中的实现：

```
def approx_fprime(xk,f,epsilon,*args):
    f0 = f(*((xk,)+args))
    grad = numpy.zeros((len(xk),), float)
    ei = numpy.zeros((len(xk),), float)
    for k in range(len(xk)):
        ei[k] = epsilon
        grad[k] = (f(*((xk+ei,)+args)) - f0)/epsilon
        ei[k] = 0.0
    return grad 
```

我已经看了好几遍，很难相信这么糟糕的代码会在 scipy 发行版中，我确信我一定遗漏了一些东西……但我担心这是错误的。如果您将其替换为：

```
def approx_fprime(xk,f,epsilon,*args):
    return (f(*((xk + epsilon,) + args)) - f(*((xk,) + args))) / epsilon 
```

它现在对我有用。我得到`x0.shape = (20,)`：

```
In [2]: error
Out[2]: 1.746097524556073e-08 
```

并与`x0.shape = (4, 5)`：

```
In [4]: error
Out[4]: 
array([  1.03560895e-08,   1.45994321e-08,   8.54143390e-09,
         1.09225833e-08,   9.85988655e-09]) 
```

所以它似乎真的没有为其他地方的非平面阵列做好准备。但无论哪种方式，实现都非常糟糕：您应该提交错误报告。

# vb.net - Keyup 事件自动触发

> ID：15040265
> 
> 赞同：0
> 
> 时间：2013-02-23T11:56:32.260
> 
> 标签：vb.net, winforms, combobox

在我的 Visual Studio 2010 的 winforms 应用程序中，

我有一个按钮和两个组合框（`combobox1`，`combobox2`）。

我在按钮中添加了代码以清除第一个组合框（combobox1）中先前输入的数据并将焦点设置为它。

在第一个组合框（`combobox1`）的 keyup 事件中，我检查了输入键，如果按下，焦点将移动到下一个组合框（`combobox2`）。

但我的问题是，当我按下按钮时（通过在焦点位于按钮上时按下回车键），焦点直接移动到最后一个（第二个）组合框（`combobox2`）。

尽管我只在按钮上输入了组合框 1 的 Keyup 事件，但它会自动触发

我该如何解决这个问题？

我的代码在下面给出

```
Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    'code to perform database action
    Me.ComboBox1.Focus()
End Sub

Private Sub ComboBox1_KeyUp(sender As Object, e As KeyEventArgs) Handles ComboBox1.KeyUp
    If e.KeyCode = Keys.Enter Then
        If Me.ComboBox1.SelectedText = String.Empty Then
            ComboBox2.Focus()
        End If
    End If
End Sub 
```

**更新**

当我单击按钮时，不会出现问题但是当我在焦点位于按钮上时按 Enter 键以触发按钮单击事件时，会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:24:51.733

解决此问题的最简单方法是将 ComboBox1 更改为 KeyDown 处理程序而不是键。

它发生的原因是事件的顺序：

*   按下按钮（回车键）
*   代码运行 ( `Button2_Click`)，焦点移至 ComboBox1
*   ComboBox1 上的 Key Up 触发
*   代码运行 ( `ComboFox1_KeyUp`)，焦点移至 ComboBox2

**编辑：** 更冗长的解释：您按下回车键`button1`，这会导致它的 OnKeyDown 处理程序运行。当您释放回车键时，焦点位于`Combobox1`，因此它的 OnKeyUp 处理程序运行。

# delphi - 在 Delphi 7 中更改字符

> ID：15040267
> 
> 赞同：1
> 
> 时间：2013-02-23T11:57:03.720
> 
> 标签：delphi, delphi-7

我正在研究从互联网下载和修改文本文件的程序。这是该文件的一行：

```
55,-63-K%C3%BAsky+m%C5%88a,533,557,754625,10160,0 
```

我想将此行修改为：

```
55,-63-Kúsky mňa,533,557,754625,10160,0 
```

这意味着我想修改文本片段，比如`%C3%BA`letter `ú`， atc ......

我写了这个单元：

```
unit Moj_PHP_Text;

interface

uses SysUtils;

const
   MAX_CH = 37;
   tab1:array[1..MAX_CH] of string=('%C3%A1','%C3%81','%C3%A4','%C4%8D','%C4%8C',
                                    '%C4%8E','%C3%A9','%C4%9B','%C3%AD','%C3%8D',
                                    '%C4%BE','%C5%99','%C5%88','%C5%A1','%C5%A5',
                                    '%C3%BA','%C3%9A','%C3%BD','%C5%AF','%C5%BE',
                                    '%C5%BD','%C5%98','%C5%A0','%C3%B4','%C5%A4',
                                    '%C4%8F','%C3%9D','%C3%89','%C3%B3','%C3%A0',
                                    '%C5%9A','%C4%BD','%C3%BC','%C5%87','%C5%8D',
                                    '%C3%96','%C3%B6');
  tab2:array[1..MAX_CH] of char=('á','Á','ä','è','È',
                                 'Ï','é','ì','í','Í',
                                 '¾','ø','ò','š','',
                                 'ú','Ú','ý','ù','ž',
                                 'Ž','Ø','Š','ô','',
                                 'ï','Ý','É','ó','a',
                                 'Œ','¼','ü','Ò','o',
                                 'Ö','ö');

function DecodePHPText(st1: string): string;

implementation

function DecodePHPText(st1: string): string;
var i,j:integer;
    st,stt:string;
    ch:char;
    jj,male:boolean;
    znak:byte;
begin
st:=''; stt:=''; jj:=true; male:=false; j:=0; 
for i:=1 to length(st1) do begin
    if jj then begin
       ch:=st1[i];
       if ch='+' then ch:=' ';
       if (ch='%') then begin
          stt:=copy(st1,i,3);
          if not(stt='%C3') and not(stt='%C4') and not(stt='%C5') then begin
             stt:=copy(stt,2,2);
             stt:='$'+stt;
             znak:=strtoint(stt);
             ch:=chr(znak);
             male:=true;
             jj:=false;
             end else begin
                 stt:=copy(st1,i,6);
                 for j:=1 to MAX_CH do
                     if tab1[j]=stt then begin
                     ch:=tab2[j];
                     jj:=false;
                     male:=false;
                     end;
             end;
      end;
   j:=i;
   st:=st+ch;
   end;
if ((i=j+2) and male) or ((i=j+5) and not male) then begin
   jj:=true;
   j:=0;
   end;
end;
result:=st;
end;

end. 
```

在 D7 中是否有任何将文本转换`%C3%A1`为字符的例程？`á`或者我必须继续填充数组 Tab1 和 Tab2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:00:48.423

好的，问题解决了。我在某个地方找到了我需要的东西。这是一个功能。我修改了这个功能，现在它完美地工作了。感谢 kbec 来写，我必须寻找的东西...... ;-)

这是该功能：

```
function DecodePHPText(const Data:string):string;
var t:AnsiString;
    p,q,l:integer;
    b:byte;
begin
  l:=Length(Data);
  SetLength(t,l);
  q:=1;
  p:=1;
  while (p<=l) do begin
    case char(Data[p]) of
      '+':t[q]:=' ';
      '%': begin
             inc(p);
             b:=0;
             case char(Data[p]) of
               '0'..'9':inc(b,byte(Data[p]) and $F);
               'A'..'F','a'..'f':inc(b,(byte(Data[p]) and $F)+9);
             end;
             inc(p);
             b:=b shl 4;
             case char(Data[p]) of
               '0'..'9':inc(b,byte(Data[p]) and $F);
               'A'..'F','a'..'f':inc(b,(byte(Data[p]) and $F)+9);
             end;
             t[q]:=AnsiChar(b);
           end else t[q]:=Data[p];
    end;
    inc(p);
    inc(q);
  end;
  SetLength(t,q-1);
  Result:=UTF8Decode(t);
  if (q>1) and (Result='') then Result:=t;
end; 
```

# asp.net-mvc - 部分加载视图的回发带来空模型

> ID：15040270
> 
> 赞同：1
> 
> 时间：2013-02-23T11:57:17.810
> 
> 标签：asp.net-mvc, jquery, unobtrusive-ajax

我的应用程序有几个搜索框的页面。当用户单击相应的搜索按钮时，预计会加载结果网格。该网格几乎没有可编辑的控件，用户可以在其中修改并在需要时点击保存按钮来保存数据。

我们已经使用 AjaxForm 和局部视图实现了该功能。

1.  包含搜索框和搜索按钮的搜索区域是使用 Ajax.BeginForm 创建的，在提交时从控制器调用回发搜索方法。SearchModel 被传递给这个方法。
2.  创建部分视图以显示结果，并且步骤 1 中的 Ajax 表单从控制器回发方法成功加载它。SearchModel.Results 属性作为其模型传递给视图。
3.  这个显示结果的部分视图有一个保存按钮（同样是一个 Ajax 表单），它调用控制器中的另一个方法，但在控制器中获取模型 null。

尝试了很多技巧，但都没有成功。任何工作示例在任何地方展示或建议使其工作？网络上有很多示例，其中解释了使用 AjaxForm 加载数据，但没有找到多个（或嵌套？）

提前致谢。

**编辑 - 2月24日**

这是我使用 Visual Studio 默认 MVC 模板创建的示例，它与上面解释的实际条件相似，并且在提交部分页面时存在相同的问题。

意见：

索引.cshtml

```
 @using MvcApplication1.Models
    @model SearchModel

    @{
        ViewBag.Title = "Home Page";
    }

     <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" ></script>
    <h2>@ViewBag.Message</h2>
    <p>
        To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
    </p>

@Ajax.BeginForm("Search", "Home", new AjaxOptions { HttpMethod = "Post", 
InsertionMode = InsertionMode.Replace,UpdateTargetId = "SearchResults"})
{
     <table>
    <tr>
        <td>
            First Name:
        </td>
        <td>
            @Html.TextBoxFor(m => m.SearchString)
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <input type="submit" value="Submit" />
        </td>
    </tr>
</table>

}
<div id="SearchResults" style="color: Green;"></div> 
```

部分视图 - _SearchResult.cshtml

```
 @using MvcApplication1.Models
    @model MvcApplication1.Models.SearchModel
    @{
        ViewBag.Title = "Result Partial";
    }
    <h2>
        testPartial</h2>
    @Ajax.BeginForm("SearchResult", "Home", new AjaxOptions
    {
        HttpMethod = "Post"
    })
    {
    <table>
        @foreach (ResultModel item in Model.Result)
        {
            <tr>
                <td>
                    Name:
                </td>
                <td>
                    @Html.DisplayFor(m => item.Name)
                </td>
            </tr>
            <tr>
                <td>
                    Address:
                </td>
                <td>
                    @Html.TextAreaFor(m => item.Address)
                </td>
            </tr>

        }
        <tr>
            <td colspan="2">
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>
    } 
```

楷模：

搜索模型.cs

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    namespace MvcApplication1.Models
    {
        public class SearchModel
        {
            public string SearchString  { get; set; }

            public List<ResultModel> Result { get; set; }
        }
    } 
```

结果模型.cs

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    namespace MvcApplication1.Models
    {
        public class ResultModel
        {
            public string Name { get; set; }
            public string Address { get; set; }
        }
    } 
```

控制器：

家庭控制器.cs

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using MvcApplication1.Models;

    namespace MvcApplication1.Controllers
    {
        public class HomeController : Controller
        {
            public ActionResult Index()
            {
                ViewBag.Message = "Welcome to ASP.NET MVC!";

                return View();
            }

            public ActionResult About()
            {
                return View();
            }

            [HttpPost]
            public ActionResult Search(SearchModel model)
            {
                //dummy search for result
                List<ResultModel> result = new List<ResultModel>();

                ResultModel res1 = new ResultModel();
                res1.Name = model.SearchString + " 1";
                res1.Address = "Dummy address";

                result.Add(res1);

                ResultModel res2 = new ResultModel();
                res2.Name = model.SearchString + " 2";
                res2.Address = "Rummy address";

                result.Add(res2);

                //assign seach results to model
                model.Result = result;

                return PartialView("_SearchResult", model);
            }

            [HttpPost]
            public ActionResult SearchResult(SearchModel model)
            {
                //do something with results

                List<ResultModel> res = model.Result; // null here !!

                return RedirectToAction("Index");
            }
        }
    } 
```

所以，上面的样本将

1.  在主页上显示一个搜索框 - Index.cshtml
2.  当您单击提交时，它将加载一个部分视图，在搜索下方显示结果
3.  当您编辑搜索结果并在结果表单上点击提交时，请在那里设置一个断点，您将看到返回的模型为空。

希望，这可以解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:46:29.763

现在您已经用一个完整的示例展示了您的实际代码，您的问题可以得到回答。

您得到的原因`null`是因为您没有遵守默认模型绑定器期望的输入字段的标准命名约定。请阅读[`following article`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)Phil Haack 的文章以熟悉这些约定。

您的代码的问题在于您`foreach`在部分内部使用循环来呈现结果，而不是使用编辑器模板。因此，将您的代码替换`_SearchResult.cshtml`为以下内容：

```
@using MvcApplication1.Models
@model SearchModel
@{
    ViewBag.Title = "Result Partial";
}
<h2>testPartial</h2>

@using(Ajax.BeginForm("SearchResult", "Home", new AjaxOptions()))
{
    <table>
        @Html.EditorFor(x => x.Result)
        <tr>
            <td colspan="2">
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>
} 
```

然后为该`ResultModel`类型定义一个自定义编辑器模板（`~/Views/Shared/EditorTemplates/ResultModel.cshtml`- 警告，编辑器模板的名称和位置很重要，因为它按约定工作）：

```
@using MvcApplication1.Models
@model ResultModel

<tr>
    <td>
        Name:
    </td>
    <td>
        @Html.DisplayFor(m => m.Name)
        @Html.HiddenFor(m => m.Name)
    </td>
</tr>
<tr>
    <td>
        Address:
    </td>
    <td>
        @Html.TextAreaFor(m => m.Address)
    </td>
</tr> 
```

注意事项：

*   我已经将`Ajax.BeginForm`助手包装在一个`using`声明中。你应该在你的`Index.cshtml`视图中做同样的事情
*   我在自定义编辑器模板`@Html.HiddenFor(m => m.Name)`（到你的服务器。

# ios - 如何在 UITableview 中对齐标签？

> ID：15040275
> 
> 赞同：0
> 
> 时间：2013-02-23T11:57:36.600
> 
> 标签：ios, ios5, ios6, ios4, ios-simulator

我有一个`UITableView`我有不同大小的图像。所以当我运行程序时，我在 TableView 中得到了不同的标签起点。

我希望所有标签都从同一点开始。

对齐对我不起作用。我希望所有标签都从左侧一定距离开始。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:16:33.090

您的标签位置因图像而受到干扰？

如果是，那么有 2 种方法可以做到 1

> [imgView setContentMode:UIViewContentModeScaleToFill]

2 你应该首先获取图像视图的宽度，然后添加一些空间因子，然后为你的 uilabel 设置适当的起点。

```
UILabel *lbl = ...;
UIImageView * imgView = ....;
CGRect lblFrame = lbl.frame;
lblFrame.origin.x = imgView.frame.origin.x + imgView.frame.size.width + 10;
[lbl setFrame:lblFrame]; 
```

编辑：

如果调整 uiimage 的大小不是问题，那么调整你的图像大小......

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage; } 
```

> 块引用

```
> [CLASSNAME imageWithImage:yourImage scaledToSize:CGSizeMake(50,50)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:08:29.260

从 UITableViewCell 派生一个类。

覆盖方法`layoutSubviews`。在此方法中，为所有组件（如 imageview、主标签等）设置适当的框架。

自定义单元格.h

```
@interface CustomCell : UITableViewCell
{

}

@end 
```

CustomCell.m

```
@implementation CustomCell

    -(void) layoutSubviews
    {
         [super layoutSubviews];
        self.imageView.frame = SOME_FRAME;
        self.textLabel.frame = SOME_OTHER_FRAME;

    }

@end 
```

现在，不要从 cellForRowAtIndexPath 中的 UITableViewCell 创建单元格，而是使用上面的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:07:32.803

试试这段代码，它对对齐 UiTableView 中的 UILabel 非常有用： UILabel *label=[[UILabel alloc]init];

```
 label.frame=CGRectMake(80, 2, 180, 60);

    label.backgroundColor=[UIColor clearColor];

    label.text=[ShopListOfItems objectAtIndex:indexPath.row];

    label.textColor=[UIColor whiteColor];

    label.font=[UIFont boldSystemFontOfSize:20];

    label.numberOfLines=2;

    [cell.contentView addSubview:label]; 
```

# sql - TSQL - 获取每行值之间的差异

> ID：15040277
> 
> 赞同：1
> 
> 时间：2013-02-23T11:57:45.057
> 
> 标签：sql, sql-server, tsql, group-by, sql-order-by

我将数据存储在下表中 -

> ```
>  [dbo].[readings]
> 
>   [id] [int] IDENTITY(1,1) NOT NULL,  
>   [device_id] [int] NOT NULL,
>   [time] [datetime] NOT NULL,     
>   [reading] [decimal](18, 2) NOT NULL,
>   [shift_id] [int] NULL, 
> ```

该值存储在阅读列中。我想要的是每行之间的阅读差异。即如果 row1 的读数 = 1520，而 row2 的读数 = 1560，那么 row2 和 row3 的差异应该是 40，依此类推......示例数据如下......

```
67118   5   2013-02-23 04:21:45.107 1.00    42
67119   5   2013-02-23 04:21:45.247 4.00    42
67120   5   2013-02-23 04:21:45.340 7.00    42
67121   5   2013-02-23 04:21:45.433 9.00    42
67122   5   2013-02-23 04:21:45.527 11.00   42
67123   5   2013-02-23 04:21:45.620 13.00   42
67124   5   2013-02-23 04:21:45.713 16.00   42
67125   5   2013-02-23 04:21:45.807 18.00   42
67126   5   2013-02-23 04:21:45.900 20.00   42
67127   5   2013-02-23 04:21:45.993 22.00   42
67128   5   2013-02-23 04:21:46.087 24.00   42
67129   5   2013-02-23 04:21:46.183 26.00   42
67130   5   2013-02-23 04:21:46.277 28.00   42
67131   5   2013-02-23 04:21:46.370 30.00   42
67132   5   2013-02-23 04:21:46.463 31.00   42
67133   5   2013-02-23 04:21:46.557 33.00   42
67134   5   2013-02-23 04:21:46.650 35.00   42
67135   5   2013-02-23 04:21:46.743 37.00   42
67136   5   2013-02-23 04:21:46.837 39.00   42
67137   5   2013-02-23 04:21:46.930 41.00   42
67138   5   2013-02-23 04:21:47.023 43.00   42
67139   5   2013-02-23 04:21:47.117 45.00   42
67140   5   2013-02-23 04:21:47.210 47.00   42
67141   5   2013-02-23 04:21:47.303 49.00   42
67142   5   2013-02-23 04:21:47.400 50.00   42
67143   5   2013-02-23 04:21:47.493 52.00   42
67144   5   2013-02-23 04:21:47.600 55.00   42
67145   5   2013-02-23 04:21:47.693 56.00   42
67146   5   2013-02-23 04:21:47.790 58.00   42
67147   5   2013-02-23 04:21:47.883 60.00   42 
```

此外，我还需要每小时每班每天的数据，如下所示。我已经编写了存储过程并生成了示例数据..

```
2013-02-23  1st 4   5   391.00  1.00    390.00
2013-02-23  1st 7   5   2762.00 1019.00 1743.00
2013-02-23  2nd 8   5   3270.00 2764.00 506.00
2013-02-23  3rd 16  5   6255.00 4102.00 2153.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:12:07.510

关于 SQLServer 2005+ 中的第一个问题，您可以试试这个

```
;WITH cte AS
 (  
  SELECT *, ROW_NUMBER() OVER(PARTITION BY device_id ORDER BY [time]) AS NId
  FROM [dbo].[readings]
  )
  SELECT c1.[id], c1.[device_id], c1.[time], 
         c1.reading AS currRow, ISNULL(c2.reading, 0) AS nextRow,
         c1.reading - ISNULL(c2.reading, c1.reading) AS diff
  FROM cte c1 LEFT JOIN cte c2 ON c1.device_id = c2.device_id 
                                    AND c1.NId + 1 = c2.NId 
```

# javascript - 在 PyCharm 编辑器中覆盖语言检测？

> ID：15040280
> 
> 赞同：1
> 
> 时间：2013-02-23T11:57:49.200
> 
> 标签：javascript, html, pycharm

我正在构建 Jinja 模板，其中大部分是带有单个 Javascript 部分的 HTML；Javascript 可靠地位于名为“脚本”的块中，例如：

```
{% block script %}
var foo = 'bar';
{% endblock %} 
```

但是当我这样做时，我没有得到很好的 Javascript 语法突出显示，而我通常会在常规 HTML 文件中的标记中获得。

有没有办法在 PyCharm 编辑器中添加一个或两个正则表达式，以便在这些脚本块中为我提供正确的语法突出显示？

# selenium - Selenium Webdriver 2.30 无法识别标准 Salesforce 查找弹出窗口中的对象

> ID：15040283
> 
> 赞同：0
> 
> 时间：2013-02-23T11:58:05.873
> 
> 标签：selenium, salesforce, popupwindow

我正在使用 Selenium Webdriver 来自动化 Salesforce 应用程序中的功能性 TC。测试场景： - 在案例页面上，单击“查找”，即搜索图标打开标准 Salesforce 搜索弹出窗口。我需要在搜索字段中输入特定的字符串，然后单击“开始”按钮。

尽管我可以单击“搜索”按钮，但该脚本无法识别弹出窗口中的任何字段。

我使用 Alert()、getWindowHandle 和迭代器函数来验证驱动程序是否在弹出窗口上工作。是的，它是.. 弹出窗口是工作窗口。我可以使用浏览器窗口的 Java id 来确认这一点。但它仍然无法识别任何字段。

让我知道你们中是否有人遇到类似的问题和任何解决方案。

如果您想访问我的工作沙箱，请告诉我。将能够管理它。

谢谢，曼朱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:36:30.520

除了 Bob 的回答，您还需要切换到“resultsFrame”才能使用搜索返回的任何链接。请注意，为了切换到同级框架，您必须首先使用以下方法到达框架集的父级：

`driver.switchTo().defaultContent();`

（此处的框架集指南：http: [//darrellgrainger.blogspot.co.uk/2012/04/frames-and-webdriver.html](http://darrellgrainger.blogspot.co.uk/2012/04/frames-and-webdriver.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:08:34.737

我认为问题在于弹出窗口内的元素在一个框架中。切换到新的弹出窗口后，您需要先切换到框架，然后才能使用以下方法访问任何这些元素：

```
WebElement frameLocator = driver.findElement(By.id("searchFrame")); 
driver.switchTo.frame(frameLocator); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T10:05:12.273

使用 Selenium IDE：

我可以使用以下代码选择 Salesforce PopUP：

```
Command:selectPopUp
Target:
Value: Your popUp title 
```

结果框架：

```
Command:selectFrame
Target: name=resultFrame
Value: 
```

# c++ - getch() 和 _getch() 之间的区别

> ID：15040286
> 
> 赞同：5
> 
> 时间：2013-02-23T11:58:29.003
> 
> 标签：c++

conio.h 头文件中定义的两个函数有什么区别-

getch() 和 _getch()。

声明有区别吗？还是仅仅是由于标准更新而产生的差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T12:02:21.863

这是微软几年前决定更严格地解释 C++ 标准的一部分。它表示全局名称空间中以下划线开头的所有名称都*保留供实现使用*。这意味着 that`getch`不是保留名称，而是保留名称`_getch`。

所以微软认为“这个函数，以及所有其他 POSIX 函数，都是由实现提供的。让我们通过添加下划线来重命名它们，这样我们就可以将它保存在全局命名空间的“保留”部分中。那这样，名称就不会与用户提供的功能发生冲突。

你可以说这些都是善意的，或者这只是破坏 POSIX 代码的邪恶尝试。我不知道他们的真正动机是什么，但最终结果是，根据微软的说法，`getch`它已被弃用，你应该`_getch`改用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:01:40.413

这两个函数都是非标准的（即它们不在 C++ ISO 标准中）。它们是您的特定工具链提供的扩展，因此，您必须检查其文档中的差异。

# ubuntu - 在 ubuntu 12.04LTS 中安装 anjuta 失败：

> ID：15040288
> 
> 赞同：-1
> 
> 时间：2013-02-23T11:58:38.093
> 
> 标签：ubuntu, anjuta

我尝试使用“软件中心”应用程序在 Ubuntu 中安装 Anjuta IDE。安装失败。以下是日志详细信息。我能做些什么来解决这个问题？

```
installArchives() failed: perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LANG = "en_IN.ISO8859-1"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory

Extracting templates from packages: 54%
Extracting templates from packages: 100%
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LANG = "en_IN.ISO8859-1"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory

Extracting templates from packages: 54%
Extracting templates from packages: 100%
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LANG = "en_IN.ISO8859-1"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory

Extracting templates from packages: 54%
Extracting templates from packages: 100%
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LANG = "en_IN.ISO8859-1"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory

Extracting templates from packages: 54%
Extracting templates from packages: 100%
Setting up install-info (4.13a.dfsg.1-10ubuntu2) ...
/etc/environment: line 5: unexpected EOF while looking for matching `"'
dpkg: error processing install-info (--configure):
 subprocess installed post-installation script returned error exit status 2
Errors were encountered while processing:
 install-info
Error in function: 
Setting up install-info (4.13a.dfsg.1-10ubuntu2) ...
/etc/environment: line 5: unexpected EOF while looking for matching `"'
dpkg: error processing install-info (--configure):
 subprocess installed post-installation script returned error exit status 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:38:06.763

我找到了我的问题的答案。我按照以下命令重新编辑了环境变量值： 1\. gksudo gedit /etc/environment 2\. 设置路径如下：PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin: /usr/bin:/sbin:/bin:/usr/games" 导出 GNOME_SHELL_DISABLE_TFP=1

供参考，请找到以下链接：

[https://bugs.launchpad.net/ubuntu/+source/texinfo/+bug/993407](https://bugs.launchpad.net/ubuntu/+source/texinfo/+bug/993407)

# magento - â‚¬ 将取代 Magento 中 ISO-8859-1 中的常规欧元符号

> ID：15040294
> 
> 赞同：8
> 
> 时间：2013-02-23T11:59:00.927
> 
> 标签：magento, utf-8, character-encoding, multilingual

â‚¬ 在 ISO-8859-1 中显示而不是欧元符号

我将这个字符集用于我的法语、西班牙语、德语和意大利语商店。

请告诉我如何解决此欧元符号问题或任何其他解决方案以显示上述语言的特殊字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:03:44.557

Magento 在任何地方都使用 UTF-8：模板、数据库、翻译文件。如果您发送`content-type`ISO-8859-1 的标头，则所有数据仍然是 UTF-8 编码的，但会显示不正确（这就是您所看到的，UTF-8 欧元符号，解释为 ISO-8859-1）。

没有理由更喜欢 ISO-8859-1 而不是 UTF-8。如果您添加自己的 ISO-8859-1 文件或数据，请先转换它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T12:02:14.550

ISO 8859-1 中没有欧元符号字符；它是在 ISO 8859-15 中引入的，并且存在于 UTF-8 中，但是您似乎只需要使用`&euro;`html 实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:53:52.260

我做过，

```
 <?php echo mb_convert_encoding($this->__('Careers'), "UTF-8", "HTML-ENTITIES"); ?> 
```

并保持字符集默认 UTF-8。

# excel - Sha1 vba 二进制

> ID：15040295
> 
> 赞同：1
> 
> 时间：2013-02-23T11:59:08.420
> 
> 标签：excel, hash, binary, sha1, vba

我发现在 VBA 中我可以`http://vb.wikia.com/wiki/SHA-1.bas`用来将字符串转换为 SHA1，问题是它转换 HEX 值但我需要二进制。

如何更改此脚本以使其与二进制值一起使用？

# javascript - 清除 element.classList

> ID：15040297
> 
> 赞同：69
> 
> 时间：2013-02-23T11:59:13.957
> 
> 标签：javascript, dom

[`element.classList`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)是[`DOMTokenList`](https://developer.mozilla.org/en-US/docs/DOM/DOMTokenList)类型。

有没有办法清除这个列表？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-02-23T12:02:42.787

我不知道与`classList`. 它具有添加或删除单个类`.add()`的`.remove()`方法，但是您可以在从元素中删除所有类的意义上清除列表，如下所示：

```
element.className = ""; 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2019-04-01T08:32:55.583

使用 ES6 和扩展运算符，这很容易。

```
element.classList.remove(...element.classList); 
```

这会将列表项作为参数传播给 remove 方法。
由于该`classList.remove`方法可以采用许多参数，因此它们都被删除并被`classList`清除。

即使它是可读的，它也不是很有效。@Fredrik Macrobond 的[回答](https://stackoverflow.com/questions/15040297/clear-element-classlist/55450927#answer-43640203)更快。[在jsperf](https://jsperf.com/fastest-way-to-clear-classlist)
查看不同的解决方案及其测试结果。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-26T16:51:24.423

```
var classList = element.classList;
while (classList.length > 0) {
   classList.remove(classList.item(0));
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-09-29T00:35:23.113

这是另一种方法：

```
element.setAttribute("class", "") 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-08-06T16:37:16.520

如今，`classList`首选`(remove|set)Attribute`或`className`。Pekaaw 上面的回答很好，1 个类似的替代方法是设置`DomTokenList.value`

```
elem.classList.value = '' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-04T15:14:19.427

我建议不要使用`className`as`classList`可能会导致更快的 DOM 更新。

的`remove()`方法`DOMTokenList`（就是这样`classList`）可以接受多个参数 - 每个参数都是要删除的类名字符串（[参考](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)）。首先，您需要将 转换`classList`为类名的计划数组。有些人习惯`Array.prototype.slice()`这样做，但我不是粉丝，我*认为*for 循环在大多数浏览器中更快 - 但无论哪种方式，我都没有反对 for 循环，而且切片对我来说通常感觉像是一种黑客攻击。获得数组后，您只需`apply()`将该数组作为参数列表传递。

我使用我编写的实用程序类来完成此操作。第一种方法是您正在寻找的方法，但我提供了更多供您参考。

```
ElementTools.clearClassList = function(elem) {
    var classList = elem.classList;
    var classListAsArray = new Array(classList.length);
    for (var i = 0, len = classList.length; i < len; i++) {
        classListAsArray[i] = classList[i];
    }
    ElementTools.removeClassList(elem, classListAsArray);
}
ElementTools.removeClassList = function(elem, classArray) {
    var classList = elem.classList;
    classList.remove.apply(classList, classArray);
};
ElementTools.addClassList = function(elem, newClassArray) {
    var classList = elem.classList;
    classList.add.apply(classList, newClassArray);
};
ElementTools.setClassList = function(elem, newClassArray) {
    ElementTools.clearClassList(elem);
    ElementTools.addClassList(elem, newClassArray);
}; 
```

请注意，我没有在所有浏览器中对此进行彻底测试，因为我正在处理的项目只需要在非常有限的一组现代浏览器中工作。但它*应该*可以回到 IE10，如果你为 classList包含一个 shim ( [https://github.com/eligrey/classList.js )，它](https://github.com/eligrey/classList.js)*应该*可以回到 IE7（也可以使用 SVG，因为 Eli Grey 的 shim 增加了对SVG 在不受支持的浏览器中也是如此）。

我考虑的另一种方法是向后循环`classList`并为每个条目调用`remove()`classList 。（向后，因为当您删除每个参数时长度会发生变化。）虽然这也应该有效，但我认为使用多个参数`remove()`可能会更快，因为现代浏览器可能会针对它进行优化并避免每次调用 remove() 时对 DOM 进行多次更新一个 for 循环。此外，这两种方法都需要一个 for 循环（构建一个列表或删除每个），所以我认为这种替代方法没有任何好处。但同样，我没有*做*任何速度测试。

如果有人测试各种方法的速度或有更好的解决方案，请发布。

**编辑**：我在 shim 中发现了一个错误，它阻止它正确添加对 IE11/10 的多个参数的支持`add()`和`remove()`。我已经在 github 上提交了[一份报告。](https://github.com/eligrey/classList.js/issues/54)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-25T14:52:04.663

另一种选择是简单地删除类属性：

```
elem.removeAttribute('class') 
```

# java - 如果我没有启用“-Xloggc 和 -XX:-PrintGCTimeStamps”，是否可以获得 % 的 GC 时间？

> ID：15040301
> 
> 赞同：1
> 
> 时间：2013-02-23T11:59:30.227
> 
> 标签：java, garbage-collection, jvm, jmx, newrelic

我想知道**New Relic**如何能够报告我的 GC 时间百分比，因为我没有启用 `-Xloggc`and `-XX:-PrintGCTimeStamps`..

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:36:17.160

Java 总是计算 GC 信息，loggc 只确定它是否被记录到文件中。即使它没有记录到文件中，它也可以通过 JMX 获得。

看看[这个例子](http://www.fasterj.com/articles/gcnotifs.shtml)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:33:06.930

佩斯的回答是正确的。一种方法是定期轮询每个已注册的[GarbageCollectionMXBean](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/GarbageCollectorMXBean.html)实例。[通过调用 MXBean 的getCollectionTime()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/GarbageCollectorMXBean.html#getCollectionTime%28%29)属性/方法记录当前系统时间戳和到目前为止累积的收集时间来启动泵。此后的每个时间段，计算收集时间的增量和前一个时间间隔的经过时间。该垃圾收集器的百分比 GC 时间将为*elapsed-collection-time/elapsed-time X 100*。或多或少....

# c++ - 如何在netbeans（linux）中链接库？

> ID：15040303
> 
> 赞同：5
> 
> 时间：2013-02-23T11:59:40.847
> 
> 标签：c++, netbeans, g++

我正在尝试用 C++ 编写一个程序来分析声音。我想使用 libsndfile 库。我在 g++ 编译器选项中添加了一个选项 -lsndfile。但我收到错误：WavReader.cpp:18: undefined reference to `sf_open'

如何链接图书馆？请帮忙！

```
#include <cstdlib>
#include "WavReader.h"
#include <sndfile.h>
#include <iostream>

namespace SA {

    WavReader::WavReader(char* fileName, SoundProcessor* soundProcessor) {
        this->fileName = fileName;
        this->soundProcessor = soundProcessor;
    }

    void WavReader::readFile() {
        SNDFILE* sf = NULL;
        SF_INFO info;
        info.format = 0; 
        sf = sf_open(this->fileName, SFM_READ, &info);

    }

    WavReader::~WavReader() {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:54:58.363

项目属性 -> 链接器 -> 库 -> 添加选项 -> 另一个选项：-lsndfile

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:12:11.520

您需要链接 -lsndfile 库...确保包含库路径，以便它从正确的位置找到库...检查 /usr/lib/ 以确保它存在于您的系统上，或添加正确位置的路径你的库...

# ios - iOS读取csv文件

> ID：15040305
> 
> 赞同：0
> 
> 时间：2013-02-23T12:00:06.510
> 
> 标签：ios, csv

我正在尝试从使用 # 作为分隔符的 CSV 文件中读取，这是 CSV 格式

####chapter1 #### 知识产权上诉委员会是##印度专利法下的法定机构###在地区法院之上，在最高法院之下##不受高等法院的质疑##是控制人有权出席其法律诉讼的董事会〜以上所有##None

####chapter2 ####1970年专利法已修订：##5次###4次##3次##2次

我想将 #### 之间写入的所有字符串放入一个数组中。怎么能做到这一点？我现在通过从 NSBundle 读取整个内容作为字符串。我找不到任何例子。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:03:09.700

使用以下代码：

```
NSArray *arr = [strFromReadingFile componentsSeparatedByString:SEPARATOR_STRING]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:23:25.377

我更喜欢你使用 Dave 的 CSV 解析器，你可以在[这里找到](https://github.com/davedelong/CHCSVParser)

您可以在哪里找到有关如何使用它的详细[帮助](https://stackoverflow.com/questions/3788295/how-to-use-the-chcsvparser-class)

# java - 在文本文件中写入和读取整数

> ID：15040308
> 
> 赞同：-1
> 
> 时间：2013-02-23T12:00:39.687
> 
> 标签：java, file-io, integer, text-files

我需要将整数值写入文本文件。然后我需要读取这样的文件来恢复整数值。我已经看到了几种方法来做到这一点，但我想知道哪种方法最适合写整数？请注意，文本可能很大但小于 100 万个值。一次写入和读取一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:07:42.117

一种简单的方法是使用 println 编写它们（例如使用 PrintStream），然后使用 Scanner 读取它们。该文件也将是人类可读的。

使用二进制文件会更有效，但你说你需要一个文本文件。

# c# - 为点阵打印机设置预定义的一页水晶报表大小

> ID：15040309
> 
> 赞同：1
> 
> 时间：2013-02-23T12:00:46.187
> 
> 标签：c#, visual-studio-2010, crystal-reports

我为一家药店申请，当我打印账单时，默认情况下将 A4 尺寸的纸张设置为似乎浪费纸张的打印，我想使用点阵打印机并想将纸张尺寸设置为 10*6 英寸水晶报告。我使用 C# .Net 和水晶报表。请给些建议。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:51:19.693

水晶报表设计时请在设计时设置纸张大小

# php - 为什么我的图像没有取消缓存？

> ID：15040310
> 
> 赞同：0
> 
> 时间：2013-02-23T12:00:49.597
> 
> 标签：php, caching, cache-control, image-caching

我需要在重新加载页面时不断更新图像，所以我决定在路径末尾放一个数字，但由于某种原因，我的代码不断破坏页面：

```
<?php $t = getDate(); ?>
<img src="<?php bloginfo('template_url'); ?>/img/logo-apptivation.jpg?t=<?php .$t ?>"/> 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:08:37.873

```
<img src="<?php bloginfo('template_url'); ?>/img/logo-apptivation.jpg?t=<?php echo time(); ?>"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:10:52.793

```
<img src="<?php echo sprintf('%s/img/logo-apptivation.jpg?%s', 
                             bloginfo('template_url'),time());?>"/> 
```

# php - PHP GD, 调整大小, 质量, 保存, png , jpg 和 gif

> ID：15040316
> 
> 赞同：0
> 
> 时间：2013-02-23T12:01:14.540
> 
> 标签：php, image-resizing

我看到很多用 gd 调整大小的函数，但我的问题是知道是否存在一些我可以使用的函数或类，例如上传图片、jpg、jpeg、png 或 gif，并且可以用宽度和高度调整它的大小想要，确定该图像的质量，最后保存在确定的文件夹中，并且与我上传的图像具有相同的扩展名，如果上传png图像，则保存调整大小并具有我想要的质量的png图像等

我看到很多函数，但在所有情况下都没有这些变量

*   调整图像大小 - 确定宽度和高度
*   确定质量
*   确定要保存的路径文件夹并使用相同的扩展名保存

在许多情况下，上传 png 并另存为 jpg 并从 png 等创建 jpg

我搜索但没有找到这个，如果你能帮助我，谢谢

最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:06:43.477

**调整大小：** [imagecopyresampled()](http://www.php.net/manual/pl/function.imagecopyresampled.php)
**保存：** [imagegif()](http://www.php.net/manual/pl/function.imagegif.php) , [imagejpeg()](http://www.php.net/manual/pl/function.imagejpeg.php) , [imagepng()](http://www.php.net/manual/pl/function.imagepng.php)

我认为您实际上无法“确定”图像的质量。
一旦它从图形软件中导出，你就无法真正判断它是完整的质量还是 76% 的质量。

**您可以在保存到 .jpeg 文件时设置质量。**

```
$quality = 90;
imagejpeg($image, 'output.jpeg', $quality); 
```

# android - 列表视图文本消失

> ID：15040317
> 
> 赞同：2
> 
> 时间：2013-02-23T12:01:20.503
> 
> 标签：android, android-listview

我制作了自定义列表视图，它从手机存储中加载了很多东西，当我向下滚动时，列表视图文本会像这样消失：

![在此处输入图像描述](../Images/6823f648706a6fbfc9f0b7c59124b944.png)

那么如果我向上滚动可见的文本也会消失，经典的列表视图会显示所有文本。这是我的 getView 代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
           View row = convertView;
           ListViewHolder holder = null ;
             String id = null;

           if(row == null)
        {
               LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.listview_item_row, parent, false);
         holder = new ListViewHolder();
      music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
      musiccursor.moveToPosition(position);
      id = musiccursor.getString(music_column_index);
      holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
      holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
      holder.txtTitle.setText(id);
      holder.imgIcon.setImageResource(R.drawable.musicc);
      row.setTag(holder);
             } else {
                   holder = (ListViewHolder)row.getTag(); 
             }
           holder.txtTitle.setVisibility(View.VISIBLE);
           holder.txtTitle.setText(id);
           holder.imgIcon.setImageResource(R.drawable.musicc);
             return row;
       } 
```

和行：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

     <ImageView android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

     <TextView android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

</LinearLayout> 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical" android:layout_width="fill_parent"
      android:layout_height="fill_parent">
    <ListView
        android:id="@+id/PhoneMusicList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:scrollingCache="false"
        >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:26:06.183

你能试试这个：

```
holder = new ListViewHolder();
music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
musiccursor.moveToPosition(position);
id = musiccursor.getString(music_column_index);
holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
holder.txtTitle.setText(id);
holder.imgIcon.setImageResource(R.drawable.music);
row.setTag(holder); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:04:02.707

你`holder`做错了。您首先将`holder`View 设置为 Tag 值，然后初始化持有者。颠倒这个顺序。

```
holder = new ListViewHolder();
row.setTag(holder); // remove this line
holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
holder.txtTitle.setText(id);
holder.imgIcon.setImageResource(R.drawable.music);
row.setTag(holder);  // and add this one 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:11:16.023

只需在您的列表视图 xml 中使用

```
android:cacheColorHint="#00000000" 
```

# c# - 读取文件并根据原始文件中的列数生成文件

> ID：15040320
> 
> 赞同：0
> 
> 时间：2013-02-23T12:01:35.587
> 
> 标签：c#

如何根据 C# 中原始文件中的列数读取文件并生成文件

原始文件：

文本 1 文本 2

**科尔**

```
col1 col2
1     11
2     22
3     33
4     44 
```

输出文件：file1

文本 1 文本 2

**科尔**

```
col1 
1     
2    
3     
4 
```

文件2：

文本 1 文本 2

**科尔**

```
 col2
 11
 22
 33
 44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:24:40.017

假设列由空格字符分隔，此代码应该可以工作：

```
 string filePath = @"C:\input.txt";
        string outputDirectory = @"C:\";
        string[] allLines = File.ReadAllLines(filePath);

        // Replace multiple spaces with a single space character.
        for (int i = 0; i < allLines.Length; i++ )
        {
            allLines[i] = Regex.Replace(allLines[i], @"\s+", " ");
        }

        // Check how many columns there are.
        int columns = 0;
        if (allLines.Length > 0)
            columns = allLines[0].Split().Length;

        var linesValues = allLines.Select(l => l.Split());

        // Write each column to a separate file "output1.txt" ... "outputN.txt".
        for (int i = 0; i < columns; i++)
        {
            StringBuilder newTable = new StringBuilder();
            foreach (string[] values in linesValues)
            {
                newTable.Append(values[i] + Environment.NewLine);
            }
            File.WriteAllText(outputDirectory + "output" + i + ".txt", newTable.ToString());
        } 
```

# razor - 如何在webgrid中给出动态图像

> ID：15040323
> 
> 赞同：2
> 
> 时间：2013-02-23T12:01:42.310
> 
> 标签：razor, asp.net-mvc-4, webgrid

你好，我正在 mvc 中创建一个 webgrid，它显示来自数据库的数据。在数据库中有一个包含图像路径的列。例如： **~/Images1/PLCDTV1/ILCDTV1.png**

这是控制器的代码：

```
 public ActionResult Index()
        {
            SqlCommand cmd = new SqlCommand("select * from example_tbl", con);
            con.Open();
            SqlDataReader dr = cmd.ExecuteReader();
            List<AddDetailModel> model = new List<AddDetailModel>();
            while (dr.Read())
            {
                model.Add(new AddDetailModel()
                {
                    AdName = dr["Ad_name"].ToString(),
                    AdType=dr["Ad_type_name"].ToString(),
                    PartnerName=dr["Partner Name"].ToString(),
                    hrefurl=dr["Ad_url"].ToString(),
                    startDate=dr["Start_date"].ToString(),
                    endDate = dr["End_date"].ToString(),
                    tagName = dr["Tag"].ToString(),
                    AdPath= dr["Ad_image_path"].ToString()
                });
            }
            dr.Close();
            return View(model);
        } 
```

在上面的代码中，**Ad_image_path**是包含图像路径的列。

这是我的查看代码：

```
@model IEnumerable<Example.Models.AddDetailModel>
@{
    ViewBag.Title = "Index";
    Layout = null;
}
@{
    var grid = new WebGrid(source: Model,
                                              defaultSort: "First Name",
                                              rowsPerPage: 5, fieldNamePrefix: "wg_",
                                              canPage: true, canSort: true,
                                              pageFieldName: "pg", sortFieldName: "srt"
                                              );  
}
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Ad Management</title>
    <link href="../../CSS/AdminLayStyle.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
       some style
    </style>
</head>
<body>
@using (Html.BeginForm())
{
    <table width="960" border="0" align="center" cellpadding="0" cellspacing="0">
        <tr>
            <td>
                <div class="maindiv" style="background-image: url('../../Images/blackbg.PNG')">
                    <div class="hd">
                        <h1>
                            Product Settings</h1>
                    </div>
                    <div class="bd">
                        <table align="center" cellpadding="0" cellspacing="0" width="100%">
                            <tr>
                                <td>
                                    @Html.ActionLink("Add new Ad", "adManage", "Ad")
                                </td>
                            </tr>
                            <tr>
                            <td>
                            &nbsp;
                            </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    @grid.GetHtml(tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
                            columns:
                                grid.Columns(

                                grid.Column("AdName", "Ad Name", style: "colProductid"),
                                grid.Column("PartnerName", "Partner Name", style: "colProductRate"),
                                grid.Column(header: "Ad", format: @<text><img src="http://localhost:31502/Images/Landing/Lighthouse.jpg" id="adimg"  alt="YourText" title="YourText"  width:"50px" height="50px"></text>),
                                grid.Column("hrefurl", "URL", style: "colDiscountRate"),
                                grid.Column("startDate", "Start Date", style: "colCategoryID"),
                                grid.Column("endDate", "End Date", style: "colCategoryID"),
                                grid.Column("tagName", "Tag", style: "colCategoryID"),
                                grid.Column(header: "Edit", format: @<text><a id="@item.Productid" class="clk"><img
                                        src="../../Images/edit.png" class="asa" width="25px" height="25px" alt="" style="border: none;" /></a></text>, style: "colOperation"),
                                grid.Column(header: "Delete", format: @<text><a href="@Url.Action("Delete", "Product", new { pid = item.Productid })" onclick="javascript:return ConfirmDelete();"><img
                                        src="../../Images/delete.png" width="20px" height="20px" alt="" style="border: none;" /></a></text>, style: "colOperation")
                                ), mode: WebGridPagerModes.All)
                                </td>
                            </tr>
                        </table>
                 </div>
            </td>
        </tr>
    </table>
}
</body>
</html> 
```

正如您在 webgrid 的第三列中看到的那样，我正在保留一个图像。它是一个硬编码值。**我希望图像的 src 是存储在 AdPath 中的值。**

有什么办法可以实现吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:29:19.873

您可以通过参数访问当前列的数据项`item`：

```
grid.Column(header: "Ad", format: @<text><img src="@item.AdPath" id="adimg"  alt="YourText" title="YourText"  width:"50px" height="50px"></text>), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T08:02:38.250

```
 grid.Column(format: @<img src="@Url.Content(item.Image)"  

 alt="@item.Name" height="30" width="30" />   , header: "Photo"), 
```

试试这个.... 101% 它会起作用的。

# asp.net-mvc - 验证在局部视图中不起作用

> ID：15040327
> 
> 赞同：6
> 
> 时间：2013-02-23T12:01:51.893
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, partial-views, partial

我有一个索引页面，它有两个部分视图：登录和注册。我正在使用数据模型验证。

登录.cshtml

```
@model Project.ViewModel.UserModel

<div style="position:inherit;">
@using (Html.BeginForm("_Login", "account"))
{
    @Html.ValidationSummary(true)
    <div class="label">@Html.Label("Username")</div>
    <div class="field">@Html.TextBoxFor(m => m.Username)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Username)</div>

    <div class="label">@Html.Label("Password")</div>
    <div class="field">@Html.PasswordFor(m => m.Password)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Password)</div>

    <input class="field" id="submit" type="submit" value="Login" />
} 
```

注册.cshtml

```
@model Project.ViewModel.UserModel

<link href="~/Content/Site.css" rel="stylesheet" />
<div style="position: inherit; margin-top: 20px">
@using (Html.BeginForm("_Register","account"))
{
    <div class="label">@Html.Label("Name")</div>
    <div class="field">@Html.TextBoxFor(m => m.FullName)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.FullName)</div>

    <div class="label">@Html.Label("Username")</div>
    <div class="field">@Html.TextBoxFor(m => m.Username)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Username)</div>

    <div class="label">@Html.Label("Password")</div>
    <div class="field">@Html.PasswordFor(m => m.Password)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Password)</div>

    <div class="label">@Html.Label("Confirm Password")</div>
    <div class="field">@Html.PasswordFor(m => m.ConfirmPassword)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Password)</div>

    <div class="label">@Html.Label("Email")</div>
    <div class="field">@Html.TextBoxFor(m => m.Email)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Email)</div>

    <div class="label">@Html.Label("Country")</div>
    <div class="field">@Html.TextBoxFor(m => m.Country)</div>
    <div class="error">@Html.ValidationMessageFor(model => model.Email)</div>

    <input class="field" id="submit" type="submit" value="Sign Up" />
    @Html.ValidationSummary()   
} 
```

索引.cshtml

```
 @model Project.ViewModel.UserModel
 @{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
 }

<div id="regiserandlogin">
<div id="registerandlogin-header">
    <label style="margin-left:50px;">Sign Up For Free!!!</label>
    <label style="margin-left:350px;color:#28a1e2">Already Have An Account?</label>
   </div>
   <div id="registerbox">
        @Html.Partial("_Register", new ProjectHub.ViewModel.UserModel())
   </div>
   <div id="loginbox">
        @Html.Partial("_Login", new ProjectHub.ViewModel.UserModel())
   </div> 
```

```
 public ViewResult _Register()
    {
        return View("_Register");
    }
    [HttpPost]
    public ActionResult _Register(UserModel usermodel)
    {
        if (!ModelState.IsValid)
        {
            return View("Index");
        }
        try
        {
            FormsAuthentication.SetAuthCookie(usermodel.Username, false);
            return RedirectToAction("activationemail", new {username= Username});
        }
        catch (Exception ae)
        {
            ModelState.AddModelError("", ae.Message);
            return View();
        }
    }
   public ViewResult _Login()
    {
        return View("_Login");
    }
    [HttpPost]
    public ActionResult _Login(string username, string password)
    {
        if (ModelState.IsValid)
        {
            if (MembershipService.ValidateUser(username, password))
            {
                if (!repository.IsVerified(username))
                {
                    ModelState.AddModelError("","Account is not activated.;
                    return View();

                }
                FormsAuthentication.SetAuthCookie(username,false);
                  return RedirectToAction("Index","Home");

            }
            return RedirectToAction("Index", "account"); ;    
        }
        else
        {
            ModelState.AddModelError("","Invalid Username/Password");
            return View();
        }
    } 
```

用户模型.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace ProjectHub.ViewModel
{
    public class UserModel
    {
         [Required(ErrorMessage="Username is Required")]
         public string Username { get; set; }
         [Required(ErrorMessage = "Password is Required")]
         public string Password { get; set; }
         [Required(ErrorMessage = "Password is Required")]
         public string ConfirmPassword { get; set; }
         [Required(ErrorMessage = "Name is Required")]
         public string FullName { get; set; }
         [Required(ErrorMessage = "Email is Required")]
         public string Email { get; set; }
         [Required(ErrorMessage = "Country is Required")]
         public string Country { get; set; }
     }
 } 
```

当我像这样按下注册按钮时，[出现验证错误](http://tinypic.com/view.php?pic=m819vm&s=6)

![在此处输入图像描述](../Images/62c1855cfb0b6574d0f55c1e53f26d75.png)

如果我使用 RedirectToAction 方法，我不会收到验证错误。请给我提意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T17:40:12.810

您不应该对两个部分使用相同的视图模型。您应该有 2 个不同的视图模型。

例如：

```
public class LoginViewModel
{
    [Required(ErrorMessage="Username is Required")]
    public string Username { get; set; }

    [Required(ErrorMessage = "Password is Required")]
    public string Password { get; set; }
} 
```

对于寄存器部分：

```
public class RegisterViewModel
{
     [Required(ErrorMessage="Username is Required")]
     public string Username { get; set; }

     [Required(ErrorMessage = "Password is Required")]
     public string Password { get; set; }

     [Required(ErrorMessage = "Password is Required")]
     public string ConfirmPassword { get; set; }

     [Required(ErrorMessage = "Name is Required")]
     public string FullName { get; set; }

     [Required(ErrorMessage = "Email is Required")]
     public string Email { get; set; }

     [Required(ErrorMessage = "Country is Required")]
     public string Country { get; set; }
} 
```

然后你的主视图模型应该聚合这两个视图模型：

```
public class MyViewModel
{
    public LoginViewModel Login { get; set; }
    public LoginViewModel Register { get; set; }
} 
```

接着：

```
<div id="registerbox">
    @Html.Partial("_Register", Model.Login)
</div>
<div id="loginbox">
    @Html.Partial("_Login", Model.Register)
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T13:54:57.707

在您的视图中添加以下对 JQuery 脚本的引用。
我经历了同样的情况，它解决了我的问题。

```
"~/Scripts/jquery.unobtrusive*"
"~/Scripts/jquery.validate*" 
```

# php - PHP Regex 使前导零成为强制性的

> ID：15040328
> 
> 赞同：1
> 
> 时间：2013-02-23T12:02:04.880
> 
> 标签：php

我正在尝试验证输入，规则（条件）是：

1.  该值应恰好为 11 个字符长且仅为数字
2.  该值应以`Zero '0'`

我已经设法找到第一条规则的解决方案，代码如下所示

```
$str='01272095631';
if (!preg_match('/^[0-9]{11}+$/', $str)) {$error= "Yes";} else {$error= "No";}

echo $error; 
```

你能帮我解决第二条规则吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:06:07.433

你想复杂了。保持简单：

`/^0[0-9]{10}$/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:10:54.393

```
if (!preg_match('/^0[0-9]{10}+$/', $str)) {
    $error= "Yes";
} else {
    $error= "No";
}

echo $error; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:10:55.617

略微减少的图案:)

```
'/^0\d{10}$/' 
```

# drupal-7 - 在此服务器上找不到请求的 URL /drupalhr/drupal/employee/add/

> ID：15040337
> 
> 赞同：0
> 
> 时间：2013-02-23T12:02:58.940
> 
> 标签：drupal-7, entity, drupal-modules, drupal-views

我在 drupal 中创建了一个带有实体的自定义模块。我已经安装了实体 api 模块。通过employee_management.install 文件（其中employee_management 是我的自定义模块名称）和employee 是我的实体名称，我创建了只有两列（employee_id，first_name）的数据库模式。

我还编写了必要的函数employee_management.module，但它仍然显示错误，每当我尝试在管理员/结构/员工中添加新实体时，它都会显示以下错误：“未找到”。

在此服务器上找不到请求的 URL drupal/employee/add/。

```
function employee_management_entity_info() { 
    $employee_info['employee'] = array(
    // A human readable label to identify our entity.
    'label' => t('Employee Entity'),
    // The controller for our Entity - extends the Drupal core controller.
    'controller class' => 'EmployeeController',
    // The table defined in hook_schema()
    'base table' => 'employee',
    // Returns the uri elements of an entity
    'uri callback' => 'employee',
    // Fieldable that we can attach fields to it - the core functionality will
    // do the heavy lifting here.
    'fieldable' => TRUE,
    // The unique key of our base table.
    'entity keys' => array(
      'id' => 'employee_id',
    ),
    // FALSE disables caching -  caching functionality is handled by Drupal core
    'static cache' => TRUE,
    // Attach bundles - i.e. alternative configurations of fields associated with a main entity.
    'bundles' => array(
      'employee' => array(
        'label' => 'Employee',
        // Information below is used by the Field UI - they "attach" themselves here and lets us
        // do the standard field management that all the core entities enjoy.
        'admin' => array(
          'path' => 'admin/structure/employee/add',
          'access arguments' => array('administer employee entities'),
        ),
      ),
    ),
    // View modes allow entities to be displayed differently based on context. We simply have one option
    // here but an alternative would be to have a Full and Teaser mode akin to node.
    'view modes' => array(
      'full' => array(
        'label' => t('Full'),
        'custom settings' => FALSE,
      ),
    )
  );

  return $employee_info;
} 
```

**编辑**

```
function employee_uri($employee) {
  return array(
    'path' => 'employee/' . $employee->employee_id,
  );
} 
```

这是文件employee_management.module中的完整功能列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:10:38.137

您不会自动获得创建实体的路线和表单，您必须自己实现。请参阅[hook_menu](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)和[本指南](http://www.istos.it/blog/drupal-entities/drupal-entities-part-3-programming-hello-drupal-entity)。

# c# - 使用 Silverlight/windows 手机样式控件设置我的 .Net 桌面应用程序 GUI

> ID：15040339
> 
> 赞同：4
> 
> 时间：2013-02-23T12:03:19.947
> 
> 标签：c#, vb.net, visual-studio, silverlight

我正在编写我的第一个 vb.net 应用程序（但我也会在这里标记 c#，因为我相信即使是 ac# 人也可以用类似的 .net 实现来回答这个问题）。

***我的应用程序的简短描述*：**

我的桌面应用程序只能在win平台上运行，使用vb.net，它是一个简单的网吧管理软件，在服务器上运行一个服务器gui，在工作站上运行一个客户端gui，两者都与TCP/IP通信以分配时间客户和服务器将一些数据存储在 xml 文件（例如用于人类操作员登录信息）或小型数据库中。没什么复杂的。

***我想做的事：***

我想要一个“性感”的外观，即silverlight 外观或win7 手机外观，但这是一个桌面应用程序。我想使用 CSS，但它完全是可选的，如果有一种简单的方法可以让我的控件在没有 CSS 的情况下如下所示，这对我来说很好。

![外观和感觉示例](../Images/c0030601eae1a8991fff2134bc89caf0.png)

**我试过的**

我已经研究过只是在浏览器应用程序之外做一个 silverlight，但是由于我是 .net 的新手，即使我已经阅读了很多关于在浏览器之外使用 silverlight5 的文章，我不想在路上被抓住当我想实现一个功能并实现“哦，silverlight out of box 不支持”。

所以我的问题是，如何在我的桌面 vb 应用程序中实现图片中的一种新外观？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:12:44.080

您应该考虑为您的应用程序使用[**WPF**](http://msdn.microsoft.com/en-gb/library/ms754130.aspx)而不是使用**WinForms**。

**WPF**（*Windows Presentation Foundations*）是一个平台，其工作方式与 Silverlight 相同，但在桌面上（就您现在需要知道的而言）**。Silverlight**是 WPF 的精简版，因此 WPF 将为您提供更多控件和很多对程序有更多的控制权。

WPF 使用 XAML 来绘制 UI，并将代码保存在与 xaml 文件关联的源代码文件中。如果您有使用 Silverlight 的经验，您应该能够轻松地使用 WPF 制作程序。

**WPF**非常强大，它让您可以访问 Silverlight 上所有可能的样式。WinForms 受到更多限制，这使得放弃一致的*Windows*外观并制作自己的直观和创新**UI**变得更加困难。

希望能帮助到你！

如果你有兴趣，这里有一些教程：

[WPF 教程](http://visualbasic.about.com/od/usingvbnet/a/wpfintro.htm)

这是一个示例 WPF 桌面应用程序（与 Silverlight 可实现的外观完全相同）

![我在 Google 图片中找到的 WPF 应用程序](../Images/e5283c1613e02e1b709470f5206e5d43.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:15:57.017

您可以将 wpf 与 Mahapps Metro 一起使用：http: [//mahapps.com/MahApps.Metro/](http://mahapps.com/MahApps.Metro/)

# mysql - MySQL：根据多行数据组合多个相关表

> ID：15040340
> 
> 赞同：1
> 
> 时间：2013-02-23T12:03:27.377
> 
> 标签：mysql, database, wordpress, row, podscms

[更新]

我有**三个**由一个表定义的表，这三个表之间的关系由另一个表定义，如下所示：

1.  表 #1：**wp_pods_cities** [城市 PODS]

    ```
    item_id  city
    -------- ----------
    1        Albany
    2        Perth
    3        Albany
    4        Hollywood
    5        Albany
    6        San Diego
    7        Denpasar 
    ```

2.  表 #2：**wp_pods_regions** [区域 PODS]

    ```
    item_id  region
    -------- ------------------
    1        Western Australia
    2        California
    3        Texas
    4        Bali 
    ```

3.  表 #3：**wp_pods_countries** [国家 PODS]

    ```
    item_id  country
    -------- --------------
    1        Australia
    2        United States
    3        Indonesia 
    ```

4.  表#4：**wp_posts** [帖子类型]

    ```
    pod_id  pod_name   post_type
    ------- ---------- ----------
    pod_1   countries  pods
    pod_2   regions    pods
    pod_3   cities     pods 
    ```

5.  表#5：**wp_podsrel** [PODS 关系]

    ```
    rel_id  pod_id  item_id  related_pod_id  related_item_id
    ------- ------- -------- --------------- ----------------
    1       pod_2   1        pod_1           1 
    2       pod_2   2        pod_1           2 
    3       pod_2   3        pod_1           2 
    4       pod_2   4        pod_1           3 
    5       pod_3   1        pod_2           1 
    6       pod_3   2        pod_2           1 
    7       pod_3   3        pod_2           2 
    8       pod_3   4        pod_2           2 
    9       pod_3   5        pod_2           3 
    10      pod_3   6        pod_2           3
    11      pod_3   7        pod_2           4 
    ```

> 注意：上面的表格是由[PODS CMS 插件在](http://wordpress.org/extend/plugins/pods/)**Wordpress**中创建的，但经过**简化**以使其在此处可读。实际的表也有**数千**条数据。

 ****## 我想做的事

我想列出已定义**的相同城市（在本例中为***Albany*）以及它们所属**的地区**和**国家。**

*   **预期结果：**

    ```
    city    region             country
    ------- ------------------ --------------
    Albany  Western Australia  Australia
    Albany  California         United States
    Albany  Texas              United States 
    ```

## 我试过的

```
SELECT ct.city, rg.region, ctr.country
FROM wp_pods_cities AS ct
INNER JOIN wp_podsrel AS rel ON ct.item_id = rel.item_id
AND rel.pod_id IN ('pod_3', 'pod_2')
INNER JOIN wp_pods_regions AS rg ON rel.related_item_id = rg.item_id
INNER JOIN wp_pods_countries AS ctr ON rel.related_item_id = ctr.item_id
WHERE ct.city = 'Albany'
ORDER BY ct.city 
```

这将为我提供**城市**及其相关**地区**，但**国家**不相关。如何实现上述示例结果？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:16:16.200

我设法通过两次使用 podsrel 表来获得正确的输出，一次用于城市，一次用于区域。

```
SELECT ct.city, rg.region, co.country

FROM wp_pods_cities AS ct, wp_podsrel AS pr

INNER JOIN wp_pods_regions AS rg
    ON rg.item_id = pr.related_item_id

INNER JOIN wp_podsrel AS pr2
    ON pr2.item_id = rg.item_id

INNER JOIN wp_pods_countries AS co
    ON co.item_id = pr2.related_item_id

WHERE ct.city = 'Albany'
    AND pr.item_id = ct.item_id

ORDER BY ct.city 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:26:06.887

感谢**@sjdaws**的输入，我设法为我**更新**的问题修改**了他的解决方案。**

 **```
SELECT ct.city, rg.region, co.country
    FROM wp_pods_cities AS ct, wp_podsrel AS pr
        INNER JOIN wp_pods_regions AS rg
            ON rg.item_id = pr.related_item_id
        INNER JOIN wp_podsrel AS pr2
            ON pr2.item_id = rg.item_id
        INNER JOIN wp_pods_countries AS co
            ON co.item_id = pr2.related_item_id
    WHERE ct.city = 'Albany'
        AND pr.item_id = ct.item_id
        AND pr.pod_id = 'pod_3'
        AND pr2.item_id = rg.item_id
        AND pr2.pod_id = 'pod_2'
    ORDER BY co.country, rg.region 
```

在这里查看结果：[http ://www.sqlfiddle.com/#!2/d40c0/10](http://www.sqlfiddle.com/#!2/d40c0/10)******

# javascript - javascript可以使用多边形[i].x而不是多边形[i][j]？

> ID：15040347
> 
> 赞同：0
> 
> 时间：2013-02-23T12:04:06.083
> 
> 标签：javascript, multidimensional-array, user-defined-types

我正在为这个概念而苦苦挣扎。是否可以在 javascript 中创建用户定义，以便我可以使用

```
polygon[i].x
polygon[i].y 
```

代替

```
polygon[i][0]
polygon[i][1] 
```

多边形[i][j] 的代码如下。

```
var polygon = new Array();
for (i = 0; i < 4; i++)
{
    polygon[i] = new Array(2);
    for (j = 0; j < 2; j++)
    {
        polygon[i][j] = "[" + i + "," + j + "]";
    }
}

for (var i = 0; i < polygon.length; i++)
{
    alert(polygon[i][1]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:09:57.310

据我所知，您的代码是这样的：

```
var polygon = [],
    i;

//push an object with x and y into the polygon array
for (i = 0; i < 4; i++){
  polygon.push({
    x : 'x @'+i,
    y : 'y @'+i
  });
}

//accessible as
polygon[index].x
polygon[index].y 
```

# apache - 无法使用 wampserver 让我的页面在线

> ID：15040349
> 
> 赞同：0
> 
> 时间：2013-02-23T12:04:24.287
> 
> 标签：apache, networking, wamp, wireless, portforwarding

这是我所做的步骤
1- 下载 wampserver 并安装它
2- 转到 www/ 并写一个网页说你好
3- 我去了 localhost 并且它正在运行（没问题）
4- 我打开 cmd 并输入 ipconfig 以获取我的 ip
5- 我使用“IPv4 地址………………：10.0.0.2”打开页面，它正在运行（没问题）
6- 我去了[http://whatismyipaddress.com/](http://whatismyipaddress.com/)获取我的路由器 ip
7- 我试过了，但它不工作
8- 我打开路由器设置页面
9- 我启用端口 80 到 10.0.0.2 的转发
10- 我去了[http://www.yougetsignal.com/ tools/open-ports/](http://www.yougetsignal.com/tools/open-ports/)使用路由器 ip 11 查看端口 80 是否打开-
我发现它打开了
12- 我断开了 wamp 与计算机的连接
13- 关闭 wamp 时端口 80 已关闭
14- 我重新连接 wamp 但无法访问我的网页。
谁能告诉我是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:41:43.983

绝对不想成为一个聪明的* ss，但也许关注链接可以帮助您，而无需再次重新发明轮子。
[使 WAMP www 在本地网络上可用](https://stackoverflow.com/questions/5657279/make-wamp-www-available-on-local-network)
[无法访问本地网络上的 wamp 服务器 在不上网](https://stackoverflow.com/questions/8219062/cannot-access-wamp-server-on-local-network)
[的情况下从局域网访问 wamp](https://superuser.com/questions/131885/how-can-i-access-wamp-from-lan-without-puting-online)

希望这些对你有一点帮助，如果没有，请在这里告诉我们。
*如果其中一个链接有帮助，请在此处将问题标记为已解决。*

# java - 在 Google 应用引擎中读取上传的文件

> ID：15040350
> 
> 赞同：0
> 
> 时间：2013-02-23T12:04:24.470
> 
> 标签：java, file, google-app-engine

我有一个 GAE 应用程序 (Java)，我必须从外部文件填充我的数据存储。使用 localhost 它工作正常。问题是在部署它时我总是得到

> 错误：服务器错误
> 
> 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

这是我的路径文件“war\WEB-INF\test.data”

问题：本地访问和远程访问之间是否有任何变化？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:10:51.563

We need to understand what you are executing to populate the datastore from the local file. Here are some points:

1.  Assuming that you have uploaded the file in `WEB-INF` folder with name `test.data`, your file path should be `WEB-INF/test.data'
2.  Are you running the code to load data via some url e.g. [http://yorappid.appspot.com/loaddata](http://yorappid.appspot.com/loaddata) or something like that? If yes, chances are that your code is taking much longer to process than the 60 seconds hard limit that AppEngine places on completing HTTP Requests. So that could be the problem where you request is not getting complete.
3.  I suggest that if point 2 above is the case, please move your code to a Cron Job. They have a limit of 10 minutes and it might sufficient to load up your data. I am not sure about the amount of data that you plan to load but 10 minutes would be more than enough to load up a sufficiently large amount of data.

Hope this helps.

# c++ - 带回调的 ObjC/C/C++ 高分辨率计时器

> ID：15040351
> 
> 赞同：5
> 
> 时间：2013-02-23T12:04:38.417
> 
> 标签：c++, objective-c, c, timer, callback

我确信这个问题之前已经被问过，所以我当然使用搜索功能来检查是否有解决我问题的答案。

然而，我能找到的只是很多关于高精度**测量**时间的答案。

我需要的是一个高分辨率（至少毫秒）的计时器，它允许我在定义的时间段过去时触发回调。我想在 Cocoa Mac OS X 应用程序中使用它，所以 C/C++ 或 Obj-C 是可能的。如果需要额外的库，那么这也很好。

我找到了这个[http://www.songho.ca/misc/timer/timer.html](http://www.songho.ca/misc/timer/timer.html)但它使用的是繁忙的等待策略，并且我认为会花费太多的性能。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T13:03:04.527

您可以直接从 Apple 使用 GCD。在 Mac OS X 上，GCD 从 v10.7 开始可用。

```
double delayInMilliseconds = 100.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInMilliseconds * NSEC_PER_MSEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    // callback invocation
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T12:14:57.867

您可以使用的一项伟大技术直接来自 Apple。定时器调度来源：

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html)

阅读它需要一段时间，但一旦你得到它，它就很容易使用。您可以指定以纳秒为单位的时间间隔，以及应定期执行的块。

它是 GCD 技术的一部分，它是基于 C 的。由于 Objective-C 只是 C 加上一些附加内容，因此坚持使用 C 似乎更自然。进入 C++，因此在这种情况下，Objective-C++ 似乎是一种矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:19:59.997

也许你可以使用加速计时器，

[http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/tutorial/tuttimer2.html](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/tutorial/tuttimer2.html)，教程给出了秒的例子，但你也可以使用毫秒，即使用下面..

boost::posix_time::毫秒(...)

# php - session_destroy() 有多个会话

> ID：15040353
> 
> 赞同：0
> 
> 时间：2013-02-23T12:05:00.633
> 
> 标签：php, session, logout

我的页面中有 3 个登录表单，单击注销会破坏所有会话并将它们全部注销。我知道 session_destroy() 会销毁与当前会话关联的所有数据，但我可以给它一个参数还是有什么方法可以指定要销毁哪个会话？我尝试在没有 session_destroy 的情况下使用 unset 但它不会注销用户

**代码编辑：**

```
<?php
    if(isset($_GET['auth'])){
        if($_GET['auth']=='parent'){
        session_name('parent');
        session_start();
            if(isset($_SESSION['parent']))
                unset($_SESSION['parent']); 
                session_destroy();
    }}
    if(isset($_GET['auth'])){
        if($_GET['auth']=='employee'){
        session_name('employee');
        session_start();
            if(isset($_SESSION['employee']))
                unset($_SESSION['employee']); 
                session_destroy();
    }}
    if(isset($_GET['auth'])){
        if($_GET['auth']=='student'){
        session_name('student');
        session_start();
            if(isset($_SESSION['student']))
                unset($_SESSION['student']); 
                session_destroy();
    }}

    header("Location: login.php");
    ?> 
```

我添加了 session_name 以获取不同的会话，我可以销毁会话，但我不能在同一页面中有多个会话！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-18T09:40:01.057

请使用 session_start(); 一次在页面顶部。成功登录后，请检查设置的所有会话，例如您的情况。

```
$_SESSION['parent'];
$_SESSION['employee'];
$_SESSION['student']; 
```

session_name(''); 将覆盖前一个会话的名称，因此您不必在此处使用 session_name。如果您检查特定会话的值或会话名称存在 unset($_SESSION('your_session_key')); 希望它会奏效。谢谢

# email - 多于一行的标题

> ID：15040356
> 
> 赞同：0
> 
> 时间：2013-02-23T12:05:39.573
> 
> 标签：email, mime

如何从邮件中读取标题？有正则表达式吗？我对这样的标题特别有问题：

```
From: John Doe <example@example.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
        boundary="XXXXboundary text" 
```

边界前的空间是多少？是标签还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:28:21.540

什么语言？

我推荐 perl 来完成这个任务。如果您的 perl 安装没有附带这些模块，请访问 cpan.org 并获取 MIME::Tools。

# ios - Core Data 多对多关系。保存字符串数组

> ID：15040363
> 
> 赞同：2
> 
> 时间：2013-02-23T12:06:16.970
> 
> 标签：ios, objective-c, core-data

我有一个 GameData 实体，用于存储字符串数组。因此，我创建了一个具有值字符串属性的“值”实体，并在两个实体之间建立了多对多关系。

为了保存数据，我使用以下代码：

```
//Save values
NSMutableSet* values = [[NSMutableSet alloc] init];
for(NSString* n in gameData.values){
    NSManagedObject *val = [NSEntityDescription
                               insertNewObjectForEntityForName:@"Value"
                               inManagedObjectContext:context];
    [val setValue:n forKey:@"value"];
    [values addObject:val];
}
[gd setValue:values forKey:@"values"]; 
```

gameData.values 数组当前为空，因此代码实际上从未进入 for 循环……但由于某种原因，它在这一行崩溃并`[gd setValue:values forKey:@"values"]`出现以下错误。

```
-[__NSSetM managedObjectContext]: unrecognized selector sent to instance 0x1f0485d0 
```

我在哪里或如何将`managedObjectContext`选择器发送到我的值 NSMutableSet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-03T02:38:32.197

也许您需要检查您的实体类型是否为“To Many”。 ![在此处输入图像描述](../Images/fb4903ebd237f2695b9cb99a18dd72c3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:25:33.910

我无法发表评论，这就是我创建答案的原因。

为什么不使用 xcode 为实体创建子类并导入它们的头文件并使用如下代码

```
 //Save values
    //NSMutableSet* values = [[NSMutableSet alloc] init]; -- No Need of this

    for(NSString* n in gameData.values){
        Value *val = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"Value"
                                   inManagedObjectContext:context];
        [val setValue:n];  // set your string
        [val setGame:gd]; //  set the game relation here. you can do this, if you have 
```

配置逆向关系。如果没有创建反向关系，它将很有帮助。

```
 } 
    //[gd setValue:values forKey:@"values"]; you don't need this. 
```

现在只需保存上下文。一切都应该没问题。这比你的方式干净得多。我从未使用键值来访问核心数据实体属性，因为它会令人困惑且容易出错，因为您必须记住属性的确切拼写，并且如果您使用了错误的拼写或错误的键，它不会引发任何错误。

我认为你应该看看[核心数据编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html#//apple_ref/doc/uid/TP30001200-SW1)

**编辑：**如果您的 GameEntity 存储字符串数组，那么一对多关系就足够了。只有当 GameEntity 有很多字符串并且每个字符串即值实体也有很多 GameEntity 时，您才需要多对多。在这种情况下，上面的代码会略有变化。

代替

```
[val setGame:gd]; 
```

你需要使用

```
[val addGameObject:gd]; 
```

# java - ModelDriven 接口获取 success.jsp 页面上的值

> ID：15040364
> 
> 赞同：0
> 
> 时间：2013-02-23T12:06:18.720
> 
> 标签：java, jakarta-ee, web-applications, struts2, struts

我在我的 struts 2 应用程序中编写了代码，一切正常，但我没有在 succecc.jsp 页面获得属性。请告诉我我在哪里犯错...

我的动作课是

```
package action;

import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

import dao.Empdao;
import model.Empmodel;
public class Empaction extends ActionSupport implements ModelDriven<Object>,SessionAware{

private static final long serialVersionUID = 1L;
    Empmodel modelobj;
    Map<String, Object> map;
    public String execute() throws Exception{
        map.put("a", modelobj.getFirstname());
        Empdao empdao = new Empdao();
        int queryResult = empdao.registration(modelobj);
        if (queryResult==0)
        {   
          addActionError("it is a dublicate entry please enter anothe id");
              return ERROR;
        }   
        else{   
         return SUCCESS;    
         }
}

    @Override
    public Object getModel() {
    modelobj = new Empmodel();
    return null;
    }

    @Override
    public void setSession(Map<String, Object> map) {
        // TODO Auto-generated method stub
        this.map =map;
    } 
```

struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
       "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
       "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="true" />
    <constant name="struts.devmode" value="true" />
<package name="loginmodel" extends="struts-default">
    <action name="emplogin" class="action.Empaction">
        <result name="input">/Registration/empregistration.jsp</result>
        <result name="success">/Registration/success.jsp</result>
        <result name="error">/Registration/empregistration.jsp</result>
    </action>
</package>
</struts> 
```

成功.jsp 是

```
<%@ taglib uri="/struts-tags" prefix="s"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    Registration successful
    <s:property value="#session.a" />
</body>
</html> 
```

Empmodel 类

```
package model;

public class Empmodel {
private String firstname;
private String lastname;
private String id;
private String gender;
private String dob;
private String maritalstatus;
private String email;
private String joiningdate;
private String designation;
private String address;
private String country;
private String state;
private String city;
private int  pincode;
private long mobileno;
private String groups;
public String getFirstname() {
    return firstname;
}
public void setFirstname(String firstname) {
    this.firstname = firstname;
}
public String getLastname() {
    return lastname;
}
public void setLastname(String lastname) {
    this.lastname = lastname;
}
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public String getGender() {
    return gender;
}
public void setGender(String gender) {
    this.gender = gender;
}
public String getDob() {
    return dob;
}
public void setDob(String dob) {
    this.dob = dob;
}
public String getMaritalstatus() {
    return maritalstatus;
}
public void setMaritalstatus(String maritalstatus) {
    this.maritalstatus = maritalstatus;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
public String getJoiningdate() {
    return joiningdate;
}
public void setJoiningdate(String joiningdate) {
    this.joiningdate = joiningdate;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCountry() {
    return country;
}
public void setCountry(String country) {
    this.country = country;
}
public String getState() {
    return state;
}
public void setState(String state) {
    this.state = state;
}
public String getCity() {
    return city;
}
public void setCity(String city) {
    this.city = city;
}

public long getMobileno() {
    return mobileno;
}
public void setMobileno(long mobileno) {
    this.mobileno = mobileno;
}
public String getGroups() {
    return groups;
}
public void setGroups(String groups) {
    this.groups = groups;
}
public int getPincode() {
    return pincode;
}
public void setPincode(int pincode) {
    this.pincode = pincode;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:48:21.203

首先你需要纠正你的行为，使用的想法`ModelDriven`是将你的模型推入堆栈，你正在推`null`. 如果这就是你使用它的全部，你
也可以摆脱它。`SessionAware`

```
public class Empaction extends ActionSupport implements ModelDriven<Empmodel> {

    private static final long serialVersionUID = 1L;
    Empmodel modelobj = new Empmodel();

    public String execute() throws Exception {

        Empdao empdao = new Empdao();

        int queryResult = empdao.registration(modelobj);

        if (queryResult == 0) {
            addActionError("it is a dublicate entry please enter anothe id");
            return ERROR;
        } else {

            return SUCCESS;
        }
    }

    @Override
    public Empmodel getModel() {
        return modelobj;
    }
} 
```

现在您`Empmodel`位于顶部，`ValueStack`因此这将起作用：

```
<s:property value="%{firstName}"/> 
```

确保`ModelDrivenInterceptor`在您的拦截器堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:39:40.903

为什么使用 session，如果你可以使用 valuestack 来实现，你有很多方法可以实现

**使用 ognl**

```
<s:property value="modelobj.firstname "/> 
```

**使用小脚本**

```
<%
String fName=(String)session.getAtribute("a");

%> 
```

# entity-framework - System.Data.EntityException ::“底层提供程序在打开时失败。” 在集成测试中

> ID：15040368
> 
> 赞同：0
> 
> 时间：2013-02-23T12:06:43.400
> 
> 标签：entity-framework

我正在尝试对我的通用存储库删除方法进行删除实体集成测试。

这就是我的测试删除方法：

```
[Test]
public void Delete()
{
    // Arrange
    var user = new User() { FirstName = "test", LastName = "test" };
    var repository = new GenericRepository<User>(_context);
    repository.Add(user);
    _context.SaveChanges();

    // Act
    repository.Delete(user);
    _context.SaveChanges();            

    // Assert
    var deletedUser = _context.Users.Find(user.UserId);
    Assert.Null(deletedUser);
} 
```

当我在 Delete(user) 之后调用 _context.SaveChanges 时，我得到一个 EntityException：说：“System.Data.EntityException ::”底层提供程序在打开时失败。”

访问我的数据库肯定没有问题，因为我之前已经进行了 Add 测试，并且我检查了该实体是否已插入到表中。

什么可能导致此问题以及为什么此误导性错误消息？

这些是我的 2 个存储库方法添加和删除：

```
public void Update(T entity)
{
    DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
    if (dbEntityEntry.State == EntityState.Detached)
    {
        DbSet.Attach(entity);
    }
    dbEntityEntry.State = EntityState.Modified;
}

public void Delete(T entity)
{
    DbEntityEntry dbEntityEntry = DbContext.Entry(entity);
    if (dbEntityEntry.State != EntityState.Deleted)
    {
        dbEntityEntry.State = EntityState.Deleted;
    }
    else
    {
        DbSet.Attach(entity);
        DbSet.Remove(entity);
    }
} 
```

更新

这是内部异常的错误信息：

测试“TLP.DataAccess.UnitTests.GenericRepositoryTests.Delete”失败：System.Data.EntityException：基础提供程序在打开时失败。----> System.Data.SqlClient.SqlException：服务器“LISA\SQLEXPRESS”上的 MSDTC 不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:17:37.737

查看 EntityException 的 InnerException 属性。这将为您提供有关打开失败原因的详细信息。

# ios - 隐藏 TabBarController 标题

> ID：15040372
> 
> 赞同：2
> 
> 时间：2013-02-23T12:07:29.887
> 
> 标签：ios

您可以使用自己的图像自定义标签栏控制器，但您必须在图像下方添加标题。如果我只是想要没有标题的图像，我只是没有为标题添加任何内容，但是图像下方有一个空白区域。如何删除图像下方的空白区域？

# c# - 如何识别点击了哪个按钮？

> ID：15040376
> 
> 赞同：-2
> 
> 时间：2013-02-23T12:07:43.327
> 
> 标签：c#, asp.net

我想知道，如果我有 3 个按钮，它是如何识别的，单击了哪个按钮。

感谢和问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:19:34.953

我对你的程序一无所知，除了它有 3 个按钮。所以，这里是我们的按钮：

```
Button b1 = new Button();
b1.Name = b1.Text = "Button 1";
Button b2 = new Button();
b2.Name = b2.Text = "Button 2";
Button b3 = new Button();
b3.Name = b3.Text = "Button 3"; 
```

现在每个按钮都需要在单击时打开一个显示其名称的消息框。这就是我们要使用`Button_Click`事件的地方。每个按钮的`Click`事件都可以有一个唯一的方法，该方法在单击按钮时被调用，或者所有按钮都可以使用相同的方法。我会为你提供两种方式。

* * *

**方法1：每个按钮的方法相同。**这个方法只会显示按下按钮的名称。

```
private void Global_Button_Click(object sender, EventArgs e)
{
    MessageBox.Show(((Button)sender).Name + " was pressed!");
} 
```

每当单击按钮时，都会调用此方法并将按钮作为`object sender`参数给出。`(Button)sender`请注意，在将其用作按钮之前，我们必须将其转换为。

还有一件事要做。这不会为每个按钮自动调用，它只是一种方法。相反，我们必须告诉我们的按钮在被点击时调用它。这就是事件的用途：

```
b1.Click += Global_Button_Click;
b2.Click += Global_Button_Click;
b3.Click += Global_Button_Click; 
```

* * *

**方法2：每个按钮的唯一方法。**仅当您的按钮不仅仅打印按钮名称时，才需要此方法。因此，如果按钮单击需要为不同的按钮做一些独特的事情，请使用它。

它的工作原理与方法一相同，但我们没有为所有按钮定义一种方法，而是定义了 3 种方法，每种方法一种。

```
private void Button1_Click(object sender, EventArgs e)
{
    MessageBox.Show("Button 1 was pressed!");
    // here you can add more code which will be executed when button 1 is clicked
}

private void Button2_Click(object sender, EventArgs e)
{
    MessageBox.Show("Button 2 was pressed!");
    // code for button 2
}

private void Button3_Click(object sender, EventArgs e)
{
    MessageBox.Show("Button 3 was pressed!");
    // code for button 3
} 
```

现在最后我们需要告诉按钮在被点击时使用这些方法，并且我们再次使用事件。这一次，每个按钮的不同方法：

```
b1.Click += Button1_Click;
b2.Click += Button2_Click;
b3.Click += Button3_Click; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:19:08.760

通常按钮具有单独的事件处理程序，但如果您有三个按钮共享相同的事件处理程序，则使用命令名称/命令参数来区分它们。事件处理程序将有一个 CommandEventArgs 通过它您可以收集命令名称和命令参数

# windows-phone-7 - Windows Phone - 圆形按钮触摸动画

> ID：15040382
> 
> 赞同：1
> 
> 时间：2013-02-23T12:08:34.297
> 
> 标签：windows-phone-7, storyboard, windows-phone-8, windows-phone

我使用 Blend 创建了一个圆形按钮。它工作得很好，但不响应触摸事件。该按钮应该变小一点，并将不透明度设置为 1.0，类似于诺基亚地图应用程序的位置按钮。

这是我现有的控制模板：

```
 <ControlTemplate x:Key="RoundButtonTemplate" TargetType="Button">
        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="50" Margin="{StaticResource PhoneTouchTargetOverhang}">
            <ContentControl x:Name="ContentContainer" Content="{TemplateBinding Content}" RenderTransformOrigin="0.5,0.5">
                <ContentControl.RenderTransform>
                    <ScaleTransform x:Name="buttonScale" />
                </ContentControl.RenderTransform>
            </ContentControl>
        </Border>
    </ControlTemplate> 
```

什么是正确的 StoryBoard 以及需要插入的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T15:43:26.137

我建议的第一件事是使用**椭圆**而不是带有圆边的边框来创建圆。这样，如果您决定按钮需要具有不同的大小，则无需继续调整 CornerRadius。您可以像这样在 Grid 中重叠 Ellipse 和 ContentPresenter：

```
<ControlTemplate TargetType="Button">
    <Grid Background="Transparent">
       <Ellipse HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</ControlTemplate> 
```

要更改按钮对触摸的视觉反应方式，您应该在 Blend 中使用 Visual States。打开按钮模板后，单击“状态”**选项**卡（如果不可见，请转到“窗口 | 状态”）。

如果您打开了按钮模板，您应该会看到几个内置的视觉状态供您编辑。选择**按下**状态，您将进入**录音**模式。您对模板所做的任何更改都会在按下按钮时出现。由于主内容窗口周围的红色轮廓和通知，您可以知道您处于录制模式。

在这种状态下，更改按下按钮时想要看到的内容。在您的情况下，将椭圆不透明度设置为 100%，并将网格上的*缩放变换*设置为适合您需要的更小值。

确保单击“状态”选项卡中的“**基本**状态”以退出记录模式。

现在，当您在运行时按下按钮时，您记录的更改应该会显示出来。它们也将是瞬时的。要在状态之间进行良好的转换，请返回“状态”**选项**卡。并单击**Pressed**状态旁边的**Add Transition按钮。**

 **![在此处输入图像描述](../Images/4b4a7045feff9fc905b4006591fa6f2c.png)

*为->Pressed 和 Pressed->*添加过渡。这些是当您进入和离开按下状态时将播放的过渡。在这里您可以编辑过渡持续时间和缓动功能。

![在此处输入图像描述](../Images/c240f443cc30d609e860f67808f716d0.png)

就我个人而言，我通常会在 0.2 秒左右做一些事情，使用二次缓入/缓出。现在，当您按下按钮时，不同的视觉状态之间应该会有轻微的动画。

祝你好运！**

# javascript - 将 div 与第一个垂直居中的 div 对齐

> ID：15040385
> 
> 赞同：0
> 
> 时间：2013-02-23T12:09:06.047
> 
> 标签：javascript, jquery, css, vertical-alignment

我有一个页面，我根据它们所属的类别并排显示图像，每个图像数组都以其所属的类别开始。图像的宽度和高度各不相同，但被放入绝对高度为 330 像素的 div 中。

**CSS：**

```
.front-index {  
margin: 0 1em 0 2em; 
}

.front-work { 
    margin: 0 2em 2em 0; 
    display: table; 
    width: 66px; 
    position: relative;
    height: 330px;
    background-color:#f0f0f0;
}

.front-work img { 
    margin: .3em 0 .3em 0; 
}

.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

.wraptocenter * {
    vertical-align: middle;
}

.front-index,
.front-work {
    float: left;
} 
```

**HTML：**

```
<div class="front-index"><p>How to get<br /> this text on the same line with<br /> yellow image on the right?</p></div>

    <div class="front-work">
        <div class="wraptocenter">
            <img width="162" height="250" src="http://images.fanpop.com/images/image_uploads/Yellow-Wallpaper-yellow-646738_800_600.jpg"/>
        </div>  
    </div>  

    <div class="front-work">
        <div class="wraptocenter">
            <img width="250" height="166" src="http://www.takenseriouslyamusing.com/wp-content/uploads/2012/08/Blue.png"/>
        </div>  
    </div>
… 
```

JSFIDDLE：http: [//jsfiddle.net/rCAKa/9/](http://jsfiddle.net/rCAKa/9/)

我想将文本与右侧第一张图片对齐到同一行。

我的想法是，这可能应该在 jquery 中完成。IE。以某种方式测量 .front-work div 内顶部的图像距离，然后将值分配给 .front-index div 作为内联代码（顶部：任何 px ）。

也许你们中有人遇到过这种问题并且知道解决这种问题的方法？CSS 或 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:40:53.283

以我的拙见，我不认为你正在做的事情可以通过 CSS 实现——它需要一些简单的 JavaScript 技巧，因为你必须知道右侧第一个图像的相对位置（从容器顶部开始）为了定位文本 - CSS 不是为它设计的。

JS 中的策略是：

1.  使用要定位的文本循环遍历每个元素
2.  获取第一个图像的垂直顶部偏移量（相对于包含父项）
3.  将顶部填充匹配设置为图像的顶部位置。或者，您可以设置子元素的顶部位置、填充或边距，或其他方式来重新定位文本。

    ```
    $(document).ready(function() {
        $(".front-index").each(function() {
            var fromTop = $(this).next().find("img").position().top;
            $(this).css({
                "padding-top":fromTop
            });
        });
    }); 
    ```

我已经分叉了你的小提琴，你可以在这里看到它 - [http://jsfiddle.net/teddyrised/LT54V/1/](http://jsfiddle.net/teddyrised/LT54V/1/)

p / s：在相关说明中，`.wraptocenter * { }`可能不是最好的（如最有效的）选择器，因为如果元素中有许多子元素（可能有或可能有更多的子元素），CSS 将有遍历所有这些。相反，尝试使用`.wraptocenter > * { }`或只是`.wraptocenter img { }`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:09:05.450

我首先尝试使用 css 解决问题。一段时间后，我想出了以下逻辑：

1.  创建一个与右侧单元格高度相同的div，显示设置为表格
2.  在第一个垂直居中的表格单元格中创建一个表格单元格
3.  在这个 div 中创建另一个与图像高度相同的细分。

HTML 代码是这样的：

```
<div class="front-index">
    <div class="front-index-inner">
        <div style="height:250px;">
            <p>How to get<br /> this text on the same line with<br /> yellow image on the right?</p>
        </div>
    </div>
</div> 
```

作为我的 CSS 部分：

```
.front-index {  
    margin: 0 1em 0 2em; 
    display: table;
    height: 330px;
    overflow: hidden;
}
.front-index-inner {
    display: table-cell;
    width: 100%;
    vertical-align: middle;
} 
```

你可以在这里看到结果：http: [//jsfiddle.net/rCAKa/10/](http://jsfiddle.net/rCAKa/10/)

我希望这会为您带来一个清晰、易懂且有用的解决方案。

问候，

杰夫

# javascript - 在 inview.js 触发时进行操作

> ID：15040386
> 
> 赞同：2
> 
> 时间：2013-02-23T12:09:38.880
> 
> 标签：javascript, jquery, html

我想知道如何操作 inview.js 脚本，它触发的时刻不是视口中的第一个像素，而是元素熄灭的最后一个像素，而是例如 50 像素之后或更早。inview.js 的脚本是

```
(function ($) {
function getViewportHeight() {
    var height = window.innerHeight; // Safari, Opera
    var mode = document.compatMode;

    if ( (mode || !$.support.boxModel) ) { // IE, Gecko
        height = (mode == 'CSS1Compat') ?
        document.documentElement.clientHeight : // Standards
        document.body.clientHeight; // Quirks
    }

    return height;
}

$(window).scroll(function () {
    var vpH = getViewportHeight(),
        scrolltop = (document.documentElement.scrollTop ?
            document.documentElement.scrollTop :
            document.body.scrollTop),
        elems = [];

    // naughty, but this is how it knows which elements to check for
    $.each($.cache, function () {
        if (this.events && this.events.inview) {
            elems.push(this.handle.elem);
        }
    });

    if (elems.length) {
        $(elems).each(function () {
            var $el = $(this),
                top = $el.offset().top,
                height = $el.height(),
                inview = $el.data('inview') || false;

            if (scrolltop > (top + height) || scrolltop + vpH < top) {
                if (inview) {
                    $el.data('inview', false);
                    $el.trigger('inview', [ false ]);                        
                }
            } else if (scrolltop < (top + height)) {
                if (!inview) {
                    $el.data('inview', true);
                    $el.trigger('inview', [ true ]);
                }
            }
        });
    }
});

// kick the event to pick up any elements already in view.
// note however, this only works if the plugin is included after the elements are bound to 'inview'
$(function () {
    $(window).scroll();
});
})(jQuery); 
```

所有学分都在[这里](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

我的尝试是为偏移顶部添加一个值，`top = $el.offset().top + 50,`这很有效！但我怎样才能改变自下而上的价值？谢谢泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T20:11:23.483

我建议使用[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

您可以这样调用，以从底部起 10% 达到您想要的效果：

```
 $('.flyIn').waypoint(function() {
    $(this).removeClass('hidden');
    $(this).addClass('animated fadeInUp');
    }, { offset: '90%' }); 
```

# php - 重复 PHP 代码或脚本

> ID：15040391
> 
> 赞同：0
> 
> 时间：2013-02-23T12:10:34.307
> 
> 标签：php, ajax

简单的问题，在 Java 中，有 Timer 类，或 AlarmManager，甚至是一个 while(true) 循环来重复一些代码，我如何用 Php 代码实现，我想重复一些 PHP 代码/脚本，我尝试过：

```
 while(true){
 ////Give me an Error , 'No Data Received from WebSite/Not Response
 }

 function Check(){
 ////Do Code
 Check()
 ////Syntax and Others Error , does Not Work
 }

 echo "<script>setTimeout('check()',10);"; ////does not Work too

 Additional Code :

 $q=mysql_query("SELECT message FROM $tbl_name WHERE pass='".$_SESSION['Logged']."'");
 while($row = mysql_fetch_array($q)){
 while(true)
 echo $row['message']; ///In French Language saying that the server closed the connection without sending any      Data, 
 Error : Erreur 324 (net::ERR_EMPTY_RESPONSE) : Le serveur a mis fin à la connexion sans envoyer de données.

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:31:06.567

无法获得您想要做的事情，但据我了解您的问题，您可以使用以下内容：

```
while ($something == true )
{
 //code to process here and keeps repeating until condition is met.
 myFunction();

}

function myFunction(){
//code of your function
} 
```

# php - 无法识别的字符在其他帐户（非 gmail）中以 UTF-8 发送电子邮件

> ID：15040398
> 
> 赞同：0
> 
> 时间：2013-02-23T12:11:01.757
> 
> 标签：php, utf-8, sendmail

问题在于制作漂亮的 html 联系表单设计，以及接受用户通过 html 表格而不是纯文本邮件发送邮件的问题

这是我正在使用的代码这是我在 php 上的第一个工作，如果我使用基于 Web 的邮件帐户 (gmail)，它工作正常

虽然如果我将 recipent 移动到另一个帐户（到我的客户域 - 电子邮件帐户），那么它会接受一个无法识别的字符而不是 ??????? 但类似的东西

```
×–×•×”×™ ×¤× ×™×” ×‘×§×©×¨ ×œ×‘×“×™×§×ª ×ž×™×™×œ × ×•×¡ 
```

正如我通过浏览器在gmail中所说的那样，尽管在这种情况下的语言是希伯来语，但它是完美的，正如您可以在下面的主题或正文中的代码中看到的那样

此代码中缺少什么，因此不仅可以在 gmail 网络邮件中使用吗？

```
<?php
$field_name = $_POST['sender_name'];
$field_telephon = $_POST['sender_telephon'];
$field_email = $_POST['sender_mail'];
$field_Subject = $_POST['sender_Subject'];
$field_message = $_POST['sender_message'];
$StrDivOpen = "<div dir='rtl'>";
$StrDivClose = "</div>";
$StrTableOpen = "<table border='1' style='width:260px; font-family:Arial;'>";
$StrTableClose = "</table>";
$StrTrOpen ="<tr>";
$StrTdOpenHd = "<td style='background-color:#fcf7da; width:100px;'>";
$StrTdOpenCont = "<td style='background-color:#dae3a5; width:130px;'>"; 
$StrTrClose="</tr>";
$StrTdClose="</td>";
$StrBr = "<br />";

$mail_to = 'v7host@gmail.com';
$subject = 'לקוח HostDns, בשם  : '.$field_name." , נושא:  ".$field_Subject;
$body_message = $StrDivOpen.$StrTableOpen;
$body_message .= $StrTrOpen.$StrTdOpenHd.'מאת  :  '.$StrTdClose.$StrTdOpenCont.$field_name.$StrTdClose.$StrTrClose;
$body_message .= $StrTrOpen.$StrTdOpenHd.'טלפון  :    '.$StrTdClose.$StrTdOpenCont.$field_telephon.$StrTdClose.$StrTrClose;
$body_message .= $StrTrOpen.$StrTdOpenHd.'כתובת מייל  :    '.$StrTdClose.$StrTdOpenCont.$field_email.$StrTdClose.$StrTrClose;

$body_message .= "<tr><td colspan=2 style='background-color:#1cbfbf;'>תוכן ההודעה  :    </td></tr><tr><td colspan=2 style='background-color:#81c3b2;'>".$StrBr.$field_message."</td></tr></table></div>";

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";
$headers .= "Content-type: text/html; charset=ISO-8859-1";
$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thanks for the post. We will contact you soon..');
        window.location = 'contact.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Sending failed. Please send an email to v7host@gmail.com');
        window.location = 'contact.html';
    </script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:28:26.657

您需要将编码更改为 UTF-8：

```
Content-type: text/html; charset=utf-8 
```

您正在使用的当前编码 (ISO/IEC 8859-1) 无法处理来自非西方语言的字符。

# vb.net - 你调用的对象是空的。视觉基本VB

> ID：15040401
> 
> 赞同：0
> 
> 时间：2013-02-23T12:11:24.190
> 
> 标签：vb.net, visual-studio-2010, genetic-algorithm

```
Public Class Population

 Dim tours() As Tour    ' Tour is a class and I have to make and object array

 Public Sub New(ByVal populationSize As Integer, ByVal initialise As Boolean)

    Dim tours As New Tour(populationSize)   ' 

    If initialise Then
        ' Loop and create individuals
        For i As Integer = 0 To (populationSize - 1)
            Dim newTour As New Tour()
            newTour.generateIndividual()
            saveTour(i, newTour)
        Next i
    End If
End Sub

Public Sub saveTour(ByVal index As Integer, ByVal tour As Tour)
    tours(index) = tour           ' getting error in this line 
End Sub 
```

Java中的相同代码在[此链接中](http://www.theprojectspot.com/tutorial-post/applying-a-genetic-algorithm-to-the-travelling-salesman-problem/5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:29:32.463

我做过 VB 已经有一段时间了，但我认为您`DIM`在 -method 中的 -statement创建了一个隐藏 global variable`New`的新局部变量。`tours``tours`

试试这个：

```
Public Class Population

 Dim tours() As Tour

 Public Sub New(ByVal populationSize As Integer, ByVal initialise As Boolean)

    tours = New Tour(populationSize)   ' 

    If initialise Then
        ' Loop and create individuals
        For i As Integer = 0 To (populationSize - 1)
            Dim newTour As New Tour()
            newTour.generateIndividual()
            saveTour(i, newTour)
        Next i
    End If
End Sub

Public Sub saveTour(ByVal index As Integer, ByVal tour As Tour)
    tours(index) = tour 
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:53:47.047

尝试，

```
Public Sub New(ByVal populationSize As Integer, ByVal initialise As Boolean)

    ReDim tours(populationSize)

    If initialise Then
        ' Loop and create individuals
        For i As Integer = 0 To (populationSize - 1)
            Dim newTour As New Tour()
            newTour.generateIndividual()
            saveTour(i, newTour)
        Next i
    End If
End Sub 
```

# c# - WinRT - 如何根据用户文化获取正确的 DateTimeFormatter

> ID：15040407
> 
> 赞同：0
> 
> 时间：2013-02-23T12:12:13.320
> 
> 标签：c#, windows-runtime, globalization, culture

我在为用户找到正确的 DateTimeFormatter 时遇到了一些麻烦。

例如，将日期转换为字符串时

```
.ToString("D"); 
```

WinRT 中始终使用 en-US 区域性。

我发现应该使用新的全球化 API。

例如

```
 var langs = Windows.System.UserProfile.GlobalizationPreferences.Languages;

       var homeregion = Windows.System.UserProfile.GlobalizationPreferences.HomeGeographicRegion;

           Windows.Globalization.DateTimeFormatting.DateTimeFormatter dtf = new DateTimeFormatter(homeregion); 
```

但是 HomeGeographicRegion 的结果不是具有新 DateTimeformatter 要求的格式

我也试过这个

```
 var formatter = new Windows.Globalization.DateTimeFormatting.DateTimeFormatter(Windows.Globalization.DateTimeFormatting.YearFormat.Default,
                Windows.Globalization.DateTimeFormatting.MonthFormat.Abbreviated,
                Windows.Globalization.DateTimeFormatting.DayFormat.Default,
                Windows.Globalization.DateTimeFormatting.DayOfWeekFormat.Default);

                string result = formatter.Format(Date); 
```

但这也只返回 en-Us 格式的日期字符串。

谁能告诉我根据用户文化获取 DateTimeFormatter 的正确方法是什么（这也通过 uid 自动用于资源本地化）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:52:42.327

单参数[DateTimeFormatter 构造函数](http://msdn.microsoft.com/en-us/library/windows/apps/br206834.aspx)采用模板（类似于“month.abbreviated day dayofweek”）。为此提供区域将失败，并出现无效参数。

对于 Windows 应用商店应用程序，不带语言参数构造的 DateTimeFormatter 将等效于通过提供[Windows.Globalization.ApplicationLanguages.Languages 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.applicationlanguages.languages.aspx)的值来构造 DateTimeFormatter 。对于桌面应用程序，默认设置是用户区域设置。

Note that the application languages are resolved from the user languages (which you can query at Windows.System.UserProfile.GlobalizationPreferences.Languages) and the declared application manifest languages (which you can query at [Windows.Globalization.ApplicationLanguages.ManifestLanguages](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.applicationlanguages.manifestlanguages.aspx)).

Finally, the [ResolvedLanguage property](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.datetimeformatting.datetimeformatter.resolvedlanguage.aspx) will let you see exactly what language is being used internally by the DateTimeFormatter.

In my experience, when people get results that they didn't expect, it is generally because the application only supports a single language, in which case, the application language will always be that no matter what the user preference is. Otherwise, verify that the language you expect is at the top of your user language list.

# html - 使用视口元标记实现最小宽度

> ID：15040408
> 
> 赞同：68
> 
> 时间：2013-02-23T12:12:18.800
> 
> 标签：html, gwt, media-queries, meta

我希望我的网页的*视口宽度*等于*设备宽度*，只要*设备宽度*> 450 像素，否则为 450 像素（我的布局动态缩放，但在 450 像素以下看起来不太好）。

以下两个元标记在设备宽度 > 450 像素的平板电脑上运行良好：

```
<!-- uses device width -->
<meta name="viewport" content="width=device-width" />

<!-- use of initial-scale means width param is treated as min-width -->
<meta name="viewport" content="width=450, initial-scale=1.0" /> 
```

然而，在手机上（例如 device-width=320px），前者对于内容来说太薄了；后者会导致浏览器放大，因此用户必须手动缩小才能看到内容。

或者，这个元标记在手机上也能很好地工作

```
<meta name="viewport" content="width=450" /> 
```

但没有利用平板电脑上可用的额外宽度。

任何帮助/想法将不胜感激（如果它有所作为，我正在使用 GWT）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-23T21:07:07.830

所以你想`viewport`动态改变标签的宽度。

干得好 ：

```
<meta id="myViewport" name="viewport" content="width = 380">
<script>
window.onload = function () {
    var mvp = document.getElementById('myViewport');
    mvp.setAttribute('content','width=580');
}
</script> 
```

见：[http ://www.quirksmode.org/mobile/tableViewport.html](http://www.quirksmode.org/mobile/tableViewport.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-11-10T20:47:47.643

试试这个：

```
<meta id="vp" name="viewport" content="width=device-width, initial-scale=1">
<script>
window.onload = function() {
    if (screen.width < 450) {
        var mvp = document.getElementById('vp');
        mvp.setAttribute('content','user-scalable=no,width=450');
    }
}
</script> 
```

请注意，我已经交换了`initial-scale=1`，因为我认为您弄错了。您希望`initial-scale`设置为`1`when `width=device-width`，以便页面完全适合窗口。当您设置特定的视口宽度时，您不想将 initial-scale 设置为 1（否则页面将开始放大）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-23T12:47:55.243

使用@media 标签和 css。它创造了奇迹。尽管它没有为视口提供最小宽度，但这是首选方式。

这是我为视口所做的：

```
<meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=yes, minimum-scale=1.0, maximum-scale=2.0"> 
```

然后我调整附加到视口的面板的大小：

```
@media all and (max-width: 1024px) {
    /*styles for narrow desktop browsers and iPad landscape */
       .myContentPanel{
         width: 450;
    }    
}

@media all and (max-width: 320px) {
   /*styles for iPhone/Android portrait*/
      .myContentPanel {
         width: 320;
    }

} 
```

显然你也可以有中间尺寸......

[这是另一个例子](http://webdesignerwall.com/tutorials/css3-media-queries)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-06T20:55:18.793

其他答案中给出的 JavaScript 代码在 Firefox 中不起作用，但如果您删除元标记并插入一个新标记，它将起作用。

```
<meta name="viewport" content="width=device-width, initial-scale=1">
<script>
if (screen.width < 450){
    var viewport = document.querySelector("meta[name=viewport]");
    viewport.parentNode.removeChild(viewport);

    var newViewport = document.createElement("meta");
    newViewport.setAttribute("name", "viewport");
    newViewport.setAttribute("content", "width=450");
    document.head.appendChild(newViewport);
}
</script> 
```

或者总是在 JavaScript 中插入它：

```
<script>
var viewport = document.createElement("meta");
viewport.setAttribute("name", "viewport");
if (screen.width < 450) {
    viewport.setAttribute("content", "width=450");
} else {
    viewport.setAttribute("content", "width=device-width, initial-scale=1");
}
document.head.appendChild(viewport);
</script> 
```

* * *

为了我的理智，我编写了一个 polyfill 来`min-width`为 viewport 元标记添加一个属性：

[在视口元标记中设置最小宽度](https://stackoverflow.com/questions/15609357/set-min-width-in-viewport-metatag/41004591#41004591)

有了这个，你可以这样做：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, min-width=450" />
<script type="text/javascript" src="viewport-min-width.js"></script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-06T00:46:09.727

简而言之，不需要在视口上设置 min-width，因为您可以将其设置在`body`或`html`元素上，以使它们及其内容比视口更宽。用户将能够滚动或缩小内容。

```
body {
  min-width: 450px;
} 
```

我在 Chrome for Android 中做了一些测试，如果视口宽度设置为`device-width`. `shrink-to-fit=yes`最初缩小页面也很有用。

最后，这种方法支持可能具有奇怪的窗口大小或当前缩放设置（这两者都会影响报告的视口尺寸）的桌面浏览器，但不支持视口元标记。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-13T08:22:03.367

扩展@Brendan 和其他人的答案。视口大小不会在方向（纵向、横向）更改时再次调整。为了解决这个问题，请在方向更改时添加一个事件侦听器并再次调整大小。

```
<script>
      const resize = () => {
        if (screen.width < 450) {
          var viewport = document.querySelector("meta[name=viewport]");
          viewport.parentNode.removeChild(viewport);

          var newViewport = document.createElement("meta");
          newViewport.setAttribute("name", "viewport");
          newViewport.setAttribute(
            "content",
            "width=450, maximum-scale=1.0, user-scalable=no"
          );
          document.head.appendChild(newViewport);
        }
      };
      resize();
      window.addEventListener("orientationchange", resize);
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-02-26T01:56:28.157

我刚刚删除了 initial-scale=1 并在 Android Chrome 和内置浏览器上完美运行。不再有意外的缩放！:)

```
<meta name='viewport' content='width=device-width'> 
```

# ios - 如何使用适用于 iOS 的 google maps sdk 设置区域？

> ID：15040409
> 
> 赞同：4
> 
> 时间：2013-02-23T12:12:35.373
> 
> 标签：ios, google-maps-sdk-ios

如何使用适用于 iOS 的 google maps sdk 设置区域？我想为标记的位置和半径设置缩放。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T17:58:36.800

**更新：**

从 SDK 1.2 版开始，下面的原始答案已过时 - 您现在可以使用该类的`fitBounds:`方法`GMSCameraUpdate`：

[https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_camera_update](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_camera_update)

* * *

*原答案：*

MapKit 中的`MKMapPoint`类型定义了地图的 2D 投影。尽管投影的实际值是不透明的，但它们最终等同于缩放级别 20 的像素。这可用于将纬度/经度值转换为像素，从而转换为比例，从而转换为缩放级别。

首先定义两个位置，指定要显示的区域的边界。这些可能是边界框的对角，或者只是两个位置，例如：

```
CLLocationCoordinate2D location1 = 
    CLLocationCoordinate2DMake(-33.8683, 151.2086); // Sydney
CLLocationCoordinate2D location2 = 
    CLLocationCoordinate2DMake(-31.9554, 115.8585); // Perth 
```

如果您要包含两个以上的点，您可以自己计算它们的界限。这也可以使用 来完成`GMSCoordinateBounds`，例如：

```
GMSCoordinateBounds* bounds =
    [[GMSCoordinateBounds alloc]
    initWithCoordinate: CLLocationCoordinate2DMake(-33.8683, 151.2086) // Sydney
    andCoordinate: CLLocationCoordinate2DMake(-31.9554, 115.8585)]; // Perth
bounds = [bounds including: 
    CLLocationCoordinate2DMake(-12.4667, 130.8333)]; // Darwin
CLLocationCoordinate2D location1 = bounds.southWest;
CLLocationCoordinate2D location2 = bounds.northEast; 
```

接下来，您需要以点为单位获取地图视图的大小。你可以使用这个：

```
float mapViewWidth = _mapView.frame.size.width;
float mapViewHeight = _mapView.frame.size.height; 
```

但这只有在您已经创建了地图视图时才有效。此外，如果您使用[入门指南](https://developers.google.com/maps/documentation/ios/start#add_a_map)中的示例代码，则框架设置为`CGRectZero`，因为稍后将设置实际大小以填充屏幕。在这些情况下，如果您正在创建全屏地图，那么您可能需要这样的东西：

```
float mapViewWidth = [UIScreen mainScreen].applicationFrame.size.width;
float mapViewHeight = [UIScreen mainScreen].applicationFrame.size.height; 
```

否则，请使用您创建地图视图的大小。

现在您有了计算相机位置所需的信息：

```
MKMapPoint point1 = MKMapPointForCoordinate(location1);
MKMapPoint point2 = MKMapPointForCoordinate(location2);

MKMapPoint centrePoint = MKMapPointMake(
    (point1.x + point2.x) / 2,
    (point1.y + point2.y) / 2);
CLLocationCoordinate2D centreLocation = MKCoordinateForMapPoint(centrePoint);

double mapScaleWidth = mapViewWidth / fabs(point2.x - point1.x);
double mapScaleHeight = mapViewHeight / fabs(point2.y - point1.y);
double mapScale = MIN(mapScaleWidth, mapScaleHeight);

double zoomLevel = 20 + log2(mapScale);

GMSCameraPosition *camera = [GMSCameraPosition
    cameraWithLatitude: centreLocation.latitude
    longitude: centreLocation.longitude
    zoom: zoomLevel]; 
```

然后，您可以使用此相机初始化地图视图，或将地图视图设置为此相机。

要编译此代码，您需要将 MapKit 框架添加到您的项目中，然后将其导入：

```
#import <MapKit/MapKit.h> 
```

请注意，如果您的坐标跨越日期线，则此代码不会处理环绕。例如，如果您尝试将此代码用于东京和夏威夷，而不是显示太平洋地区，它将尝试显示几乎整个世界。在纵向模式下，无法缩小到足以看到左侧的夏威夷和右侧的东京，因此地图最终以非洲为中心，两个位置都不可见。如果您愿意，可以修改上述代码以处理日期行处的环绕。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T14:40:52.713

**更新**

所有问题都在最新版本的 Google 地图 (1.5) 中得到修复。`[mapView_ animateWithCameraUpdate:[GMSCameraUpdate fitBounds:bounds]];`现在可以使用标准方法代替下面的代码

* * *

**原始答案**

`[GMSCameraUpdate fitBounds]`在我的 SDK (1.2.0) 版本中没有给出准确的结果。我正在使用下面的代码而不是它。公式取自[墨卡托投影](http://en.wikipedia.org/wiki/Mercator_projection#Derivation_of_the_Mercator_projection)。[根据Google 文档](https://developers.google.com/maps/documentation/javascript/maptypes#WorldCoordinates)，世界的纬度为 85 度。

```
#import <stdlib.h>

-(void) animateBoundsNorth:(CGFloat)north West:(CGFloat)west South:(CGFloat)south East:(CGFloat)east Padding:(int)padding {

    CGFloat northRad = north * M_PI / 180.0;
    CGFloat northProj = logf(tanf(M_PI_4 + northRad/2.0));
    CGFloat southRad = south * M_PI / 180.0;
    CGFloat southProj = logf(tanf(M_PI_4 + southRad/2.0));
    CGFloat topRad = 85.0 * M_PI / 180.0;
    CGFloat topProj = logf(tanf(M_PI_4 + topRad/2.0));
    CGFloat zoomLat = log2f((mapView_.bounds.size.height - padding * 2) * 2 * topProj /(northProj - southProj)) - 8;
    CGFloat zoomLon = log2f((mapView_.bounds.size.width - padding * 2) * 360/(east - west)) - 8;

    GMSCameraUpdate *update = [GMSCameraUpdate setTarget:CLLocationCoordinate2DMake((north+south)/2.0, (west+east)/2.0) zoom:MIN(zoomLat, zoomLon)];

    [mapView_ animateWithCameraUpdate:update];

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T09:34:16.457

Saxun Druce 的回答非常好。但此外，如果您想从任何位置计算半径，您可以使用以下代码来执行此操作：

```
 CLLocationCoordinate2D center = CLLocationCoordinate2DMake([currentLocationLat doubleValue],[currentLocationLong doubleValue]);
float radius = 25*1000; //radius in meters (25km)

MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(center, radius*2, radius*2);

CLLocationCoordinate2D  northEast = CLLocationCoordinate2DMake(region.center.latitude - region.span.latitudeDelta/2, region.center.longitude - region.span.longitudeDelta/2);
CLLocationCoordinate2D  southWest = CLLocationCoordinate2DMake(region.center.latitude + region.span.latitudeDelta/2, region.center.longitude + region.span.longitudeDelta/2);

GMSCoordinateBounds* bounds = [[GMSCoordinateBounds alloc]
                               initWithCoordinate: northEast
                               andCoordinate: southWest]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-22T06:28:10.463

如果您有谷歌地图的“最左”和“近右”角的纬度和经度，您可以使用以下代码快速显示数据

```
 var region:GMSVisibleRegion = GMSVisibleRegion()
     region.nearLeft = CLLocationCoordinate2DMake(nearleflat, nearleftlong)
     region.farRight = CLLocationCoordinate2DMake(fareastlat,fareastlong)
     let bounds = GMSCoordinateBounds(coordinate: region.nearLeft,coordinate: region.farRight)
     let camera = googleMapView.cameraForBounds(bounds, insets:UIEdgeInsetsZero)
     googleMapView.camera = camera; 
```

[此](https://developers.google.com/maps/documentation/ios-sdk/views#build_a_gmscameraposition)链接也可能对相关内容有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-14T15:21:57.097

我目前使用这种方法。

self.markers 是一个字典，其标记由位置 ID 存储，self.currentLocation 是一个 CLLocation2D，self.mapView 是一个 GMSMapView。

这里的数学是检查是否匹配宽度或高度的大小，然后根据 x1 / pow(2, zoom1) = x2 / pow(2, zoom2)"的事实计算缩放比例，导致 zoom2 = log2(x2 * pow(2, self.mapView.camera.zoom) / x1)。

```
- (void)fitMarkers
{
    if (2 > self.markers.count)
    {
        [self.mapView animateToCameraPosition:[GMSCameraPosition cameraWithTarget:self.currentLocation.coordinate zoom:kZoom]];

        return;
    }

    NSArray* markers = self.markers.allValues;

    GMSCoordinateBounds* markerBounds = [[GMSCoordinateBounds alloc] initWithCoordinate:((id<GMSMarker>)markers[0]).position andCoordinate:((id<GMSMarker>)markers[1]).position];

    for (id<GMSMarker> marker in markers)
    {
        markerBounds = [markerBounds including:marker.position];
    }

    // get marker bounds in points
    CGPoint markerBoundsTopLeft = [self.mapView.projection pointForCoordinate:CLLocationCoordinate2DMake(markerBounds.northEast.latitude, markerBounds.southWest.longitude)];
    CGPoint markerBoundsBottomRight = [self.mapView.projection pointForCoordinate:CLLocationCoordinate2DMake(markerBounds.southWest.latitude, markerBounds.northEast.longitude)];

    // get user location in points
    CGPoint currentLocation = [self.mapView.projection pointForCoordinate:self.currentLocation.coordinate];

    CGPoint markerBoundsCurrentLocationMaxDelta = CGPointMake(MAX(fabs(currentLocation.x - markerBoundsTopLeft.x), fabs(currentLocation.x - markerBoundsBottomRight.x)), MAX(fabs(currentLocation.y - markerBoundsTopLeft.y), fabs(currentLocation.y - markerBoundsBottomRight.y)));

    // the marker bounds centered on self.currentLocation
    CGSize centeredMarkerBoundsSize = CGSizeMake(2.0 * markerBoundsCurrentLocationMaxDelta.x, 2.0 * markerBoundsCurrentLocationMaxDelta.y);

    // inset the view bounds to fit markers
    CGSize insetViewBoundsSize = CGSizeMake(self.mapView.bounds.size.width - kMarkerSize / 2.0 - kMarkerMargin, self.mapView.bounds.size.height - kMarkerSize / 2.0 - kMarkerSize);

    CGFloat x1;
    CGFloat x2;

    // decide which axis to calculate the zoom level with by comparing the width/height ratios
    if (centeredMarkerBoundsSize.width / centeredMarkerBoundsSize.height > insetViewBoundsSize.width / insetViewBoundsSize.height)
    {
        x1 = centeredMarkerBoundsSize.width;
        x2 = insetViewBoundsSize.width;
    }
    else
    {
        x1 = centeredMarkerBoundsSize.height;
        x2 = insetViewBoundsSize.height;
    }

    CGFloat zoom = log2(x2 * pow(2, self.mapView.camera.zoom) / x1);

    GMSCameraPosition* camera = [GMSCameraPosition cameraWithTarget:self.currentLocation.coordinate zoom:zoom];

    [self.mapView animateToCameraPosition:camera];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-21T07:34:06.550

根据 GoogleMaps iOS sdk 1.9.2 的新版本，我们可以使用相机的位置、缩放级别、查看角度进行设置。

```
GMSCameraPosition* camera = [GMSCameraPosition cameraWithLatitude:28.6100
                                                            longitude:77.2300
                                                                 zoom:14.0
                                                              bearing:0
                                                         viewingAngle:0.00];
    self.mapView = [GMSMapView mapWithFrame:CGRectMake(0, 45, self.view.frame.size.width, self.view.frame.size.height - 45) camera:camera];
    mapView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    mapView.delegate = self;
    mapView.myLocationEnabled = YES;
    mapView.mapType = kGMSTypeTerrain;
    mapView.settings.compassButton = YES;
    mapView.settings.myLocationButton = YES;
    [self.mapView setMinZoom:10 maxZoom:18];

    GMSMarker* marker = [[GMSMarker alloc] init];
    marker.position = CLLocationCoordinate2DMake(28.6100, 77.2300);
    marker.title = @"New Delhi";
    marker.snippet = @"Capital Of India";

    marker.map = self.mapView;
    marker.appearAnimation = kGMSMarkerAnimationPop;
    marker.icon = [GMSMarker markerImageWithColor:[UIColor grayColor]];
    [self.view addSubview:self.mapView]; 
```

如需进一步参考，[请参阅此 PDF 文档](http://courseware.codeschool.com/googlemapsios/Exploring-Google-Maps-For-iOS-FULL.pdf)。

您还可以根据需要设置最小和最大缩放级别：

```
[self.mapView setMinZoom:10 maxZoom:30]; 
```

希望这能解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-13T17:03:45.270

截至 2014 年 6 月，[此答案](https://stackoverflow.com/a/21623571/2094275)是迭代给定标记数组并相应设置边界的最简单方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-24T23:21:01.987

我搜索了框架的头文件，只找到了可以用于以下代码的接口，这可能是一个开始。这里的问题是我在其他标题之一中找不到 GMSCoordinateBounds 的任何导入，因此我找不到在 GMSMapView 中显示该区域的方法。

```
GMSVisibleRegion region;
region.farLeft = CLLocationCoordinate2DMake(farLeftLatitude, farLeftlongitude);
region.farRight = CLLocationCoordinate2DMake(farRightlatitude, farRightlongitude); 

GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] initWithRegion:region]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-29T19:56:11.833

// 我发现这个方法对我有用

```
func setMapZoomToRadius(lat:Double, lng:Double, var mile:Double)
    {

        let center = CLLocationCoordinate2DMake(lat, lng)           
        let radius: Double = (mile ) * 621.371 

        let region = MKCoordinateRegionMakeWithDistance(center, radius * 2.0, radius * 2.0)

        let northEast = CLLocationCoordinate2DMake(region.center.latitude - region.span.latitudeDelta, region.center.longitude - region.span.longitudeDelta)
        let  southWest = CLLocationCoordinate2DMake(region.center.latitude + region.span.latitudeDelta, region.center.longitude + region.span.longitudeDelta)

        print("\(region.center.longitude)  \(region.span.longitudeDelta)")
        let bounds = GMSCoordinateBounds(coordinate: southWest, coordinate: northEast)

        let camera = googleMapView.cameraForBounds(bounds, insets:UIEdgeInsetsZero)
         googleMapView.camera = camera;

      } 
```

# android - 选项卡下方的选项卡小部件文本

> ID：15040412
> 
> 赞同：1
> 
> 时间：2013-02-23T12:13:06.033
> 
> 标签：android

我是 android 新手，已经用两个 tabwidget 创建了 tabhost，一切正常，现在我也用两个选项卡显示两个不同的活动。但问题是我为两个不同的选项卡指定的文本在下面，而运行应用程序。下面我放截图以供理解

截屏： ![在此处输入图像描述](../Images/b84cfc67d8e893936102b623bc4626bb.png)

文本被标记为红色，所以有什么方法可以将该文本与中心对齐。我还使用可绘制图像来处理不同的用户点击状态。谢谢你的帮助。

**tabhost 的 xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <include layout="@layout/top_portion_layout"/>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAlignment="center"
           >
        </TabWidget>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#808080">
            </FrameLayout>

    </LinearLayout>
</TabHost> 
```

该部分是另一种布局，它有两个按钮同步所有和我在这个布局中包含的主页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:40:37.410

**尽管**

```
android:textAlignment="center" 
```

**你应该使用**

```
android:gravity="center"
android:layout_gravity="center_vertical" 
```

**tab_host 元素内部**

# sql - 选择总和和内连接

> ID：15040414
> 
> 赞同：13
> 
> 时间：2013-02-23T12:13:25.483
> 
> 标签：sql, join

我有两张桌子

*   `Bills`：`id amount reference`

*   `Transactions`：`id reference amount`

以下 SQL 查询

```
SELECT 
   *,
   (SELECT SUM(amount) 
    FROM transactions 
    WHERE transactions.reference = bils.reference) AS paid
FROM bills
GROUP BY id HAVING paid<amount 
```

用于 table 中的某些行`Bills`，添加一个`paid`包含相关交易金额总和的列。

但是，它仅在每张账单至少有一笔交易时才有效。否则，不返回无交易账单行。

可能，那是因为我应该进行内部连接！

所以我尝试以下方法：

```
SELECT 
   *,
   (SELECT SUM(transactions.amount) 
    FROM transactions 
    INNER JOIN bills ON transactions.reference = bills.reference) AS paid
FROM bills
GROUP BY id 
HAVING paid < amount 
```

但是，这会为所有行返回相同的支付值！我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-23T12:23:45.807

使用左连接而不是子查询：

```
select b.id, b.amount, b.paid, sum(t.amount) as transactionamount
from bills b
left join transactions t on t.reference = b.reference
group by b.id, b.amount, b.paid
having b.paid < b.amount 
```

编辑：
要将交易总和与金额进行比较，请处理没有交易时获得的空值：

```
having isnull(sum(t.amount), 0) < b.amount 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:16:24.223

您需要`RIGHT JOIN`包含所有账单行。

**编辑** 所以最终的查询将是

```
SELECT 
   *,
   (SELECT SUM(transactions.amount) 
    FROM transactions 
    WHERE transactions.reference = bills.reference) AS paid
FROM bills
WHERE paid < amount 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T08:29:10.710

我知道这个线程很旧，但我今天来到这里是因为我遇到了同样的问题。

请参阅另一篇具有相同问题的帖子： [Sum on a left join SQL](https://stackoverflow.com/questions/4782026/sum-on-a-left-join-sql)

正如答案所说，在左表上使用 GROUP BY 。这样您就可以从左表中获取所有记录，并将右表中的相应行求和。

尝试使用这个：

```
SELECT
   *,
  SUM(transactions.sum)
FROM
   bills
RIGHT JOIN
   transactions
ON
   bills.reference = transactions.reference
WHERE
   transactions.sum > 0
GROUP BY
   bills.id 
```

# javascript - 如何使用jquery从filterToolbar的下拉列表中获取选定的值

> ID：15040415
> 
> 赞同：0
> 
> 时间：2013-02-23T12:13:51.833
> 
> 标签：javascript, jquery, jqgrid, struts2-jquery

我想根据**filterToolbar**中的选定值过滤网格。

**这是我的网格**

```
<sjg:gridColumn name="assigned_to"   index="assigned_user" key="assigned_user" title="Assigned To"   
            sortable="false"
            searchtype="select"
            searchoptions="{defaultSearch:'cn', dataUrl : '%{fillUser}', 
                           dataEvents: [{ type: 'change' fn: function(elem) { myfunction(elem)}}]}"/> 
```

所以问题是

1：如何从使用**dataEvents触发的函数****myfunction(elem)**的下拉列表中获取选定的值。

 **2：这个**dataEvents**选项中的**elem是什么？**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:58:52.793

一种通常使用名称`event`或`e`作为`fn`函数参数的名称，因为该参数是[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)。最重要的属性`target`是 select 的 DOM 元素（参见[此处](http://www.w3schools.com/jsref/dom_obj_select.asp)）。因此，您可以使用[selectedIndex](http://www.w3schools.com/jsref/prop_select_selectedindex.asp)和[options](http://www.w3schools.com/jsref/coll_select_options.asp)属性来获取有关所选选项的信息：

```
fn: function (e) {
    var selectDOM = e.target,
        selectedOptionDOM = selectDOM.options[selectDOM.selectedIndex];

    alert("selected option has\n" +
        "text=" + selectedOptionDOM.text +
        "\nvalue=" + selectedOptionDOM.value);
} 
```

或者，您可以使用 jQuery 来获取选定的选项。`$(e.target).val()`提供所选选项的值并`$(e.target).find(":selected").text()`为您提供其文本：

```
fn: function (e) {
    var $select = $(e.target);

    alert("selected option has\n" +
        "text=" + $select.find(":selected").text() +
        "\nvalue=" + $select.val());
} 
```****

# javascript - 在 String.replace() 方法中使用匿名函数

> ID：15040418
> 
> 赞同：0
> 
> 时间：2013-02-23T12:14:12.070
> 
> 标签：javascript, regex, lambda

我有一个正则表达式数组，目前只有一个元素的长度，以及一个我想通过遍历数组来搜索/替换的字符串：

```
var str = "i am*happy all the*time",
    rex = [
        /(\S)\s*\*\s*(\S)/g
        ],
    i = 0,
    r = rex.length; 
```

这就是我目前试图实现这一目标的方式：

```
for (i; i < r; i += 1) {
    str.replace(rex[i], function(star, p1, p2) {
        console.log(i, star, p1, p2);
        return p1 + '\\s*(.*)\\s*' + p2;
    });
} 
```

结果应该是`i am*\\s*(.*)\\s*happy all the\\s*(.*)\\s*time`。但目前，`str`似乎没有受到影响，即使当我检查控制台时，相关的匹配项也在进行中。您可以[在此处](http://jsfiddle.net/Y3czg/5/)亲自查看。

那么我是否遗漏了一些简单的东西，我是否误解了在 String.replace() 中使用 lambda 表达式的一些东西，或者这里有什么更根本的错误？

...

***额外信息：*** 我现在正在使用 Chrome 24，以防万一；不久前我读到 String.replace() 中的匿名函数并非对所有浏览器都可用，尽管我认为现在可以解决（该选项是在 ECMAScript v3 中引入的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:31:04.927

`String.replace()`不会更改原始字符串，而是返回新字符串。你应该分配结果

```
for (i; i < r; i += 1) {
    str = str.replace(rex[i], function(star, p1, p2) {...})
} 
```

# c# - 访问用户控件中的控件和用户控件中的母版页值

> ID：15040421
> 
> 赞同：1
> 
> 时间：2013-02-23T12:14:33.650
> 
> 标签：c#, asp.net

如何访问母版页中用户控件中的控件值和用户控件中的母版页控件值？

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:39:37.033

最好的办法是以类似的方式在用户控件中创建公共属性，如下所示：

```
public TextBox getMyTextBox()
{
    return this.myTextBox;
} 
```

这将使母版页可以访问整个控件。如果您只对获得一个或两个值感兴趣，请执行以下操作：

```
public String getMyTextBoxValue()
{
    return this.myTextBox.Text;
} 
```

根据您希望能够从母版页访问用户控件的内容，您可以在创建用户控件时传入对该对象的引用（作为构造函数中的参数）

```
private object needObject;

public MyUserControl(object objectToReference)
{
     this.needObject = objectToReference;
} 
```

这样，您将获得对该对象的引用。如果您正在“动态 - 动态地”创建控件，这将很容易。如果您从一开始就希望它们出现在您的表单设计中，那么请使用单独的方法为您设置参考。

```
public void setParentReference(object objectToReference)
{
    this.needObject = objectToReference;
} 
```

在母版页中，您可以简单地在给定的用户控件上调用此方法，传入您需要的任何对象（只要它不是原始值，如果它是原始值，则使用`ref`作为引用传递，因为原始值默认发送值）为一个参数，从那时起，用户控件将可以访问该对象。

当然，这只是存储对简单对象的引用的示例（您可以传入一些您想要共享的类或任何其他值。）

如果您想访问用户控件中的父级，那么您应该记住，这`Control.Parent`使您可以访问当前控件的父级。

由于`UserControl`类继承自`ContentControl`其继而继承自`Control`你可以简单地做到这一点。

```
object parentReference = this.Parent; 
```

最好`object`在此处使用，然后检查它是否为`typeof`表单，因为如果它在容器中，则容器将被存储，如果变量类型为`Form`.

您也可以使用它来获取 ParentForm。

```
Form parentReference = this.ParentForm; 
```

但要记住的一点是，如果您刚刚创建了这个动态控件并且尚未将其添加到任何表单或控件子列表中，则 Parent 和 ParentForm 将`null`确保`null`在使用它或尝试强制转换之前进行验证它作为某种东西。

然后，您可以通过执行此操作来使用表单中的任何属性。我假设您的主表单称为 Form1。( `public partial class Form1 : Form`)

```
((Form1)parentReference).somePublicProperty = someValue; 
```

希望它为你清除它。

# java - Spring bean 销毁方法、单例和原型范围

> ID：15040427
> 
> 赞同：23
> 
> 时间：2013-02-23T12:15:15.817
> 
> 标签：java, spring, scope

我是 spring 框架的新手，从一些教程开始学习它。

我有以下文件，

# 主程序.java

```
package test.spring;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainProgram {
        public static void main(String[] args) {
              AbstractApplicationContext context = 
                              new ClassPathXmlApplicationContext("Bean.xml");     
              HelloSpring obj = (HelloSpring) context.getBean("helloSpring");
              obj.setMessage("My message");
              obj.getMessage();
              context.registerShutdownHook();

        }
 } 
```

#HelloSpring.java

```
package test.spring;

public class HelloSpring   {
     private String message;

     public void setMessage(String message){
      this.message  = message;
      System.out.println("Inside setMessage");
   }

   public void getMessage(){
      System.out.println("Your Message : " + this.message);
   }

   public void xmlInit() {
    System.out.println("xml configured  initialize");
   } 

    public void xmlDestroy() {
    System.out.println("xml configured destroy");
    }

  } 
```

# 豆.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

     <bean id="helloSpring" class="test.spring.HelloSpring" 
          scope="prototype" init-method="xmlInit" destroy-method="xmlDestroy">

     </bean>
     </beans> 
```

当我采取`scope="singleton"` 我的输出是：

```
 xml configured  initialize
 Inside setMessage
 Your Message : My message
 xml configured destroy 
```

当我采取`scope="prototype"` 我的输出是：

```
 xml configured  initialize
 Inside setMessage
 Your Message : My message 
```

`xmlDestroy()`方法是使用`singleton`范围 bean 调用的，但`prototype` 请不要帮我以下，

它是否正确？如果是这样，可能的原因是什么？

我也有一些疑问，例如，

之间有什么区别或关系 `ApplicationContext , AbstractApplicationContext and ClassPathXmlApplicationContext`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-23T12:37:34.223

`xmlDestroy()`方法是用单例范围 bean 调用的，但不是用原型调用的，因为

Spring 不管理原型 bean 的完整生命周期：容器实例化、配置、装饰和以其他方式组装原型对象，将其交给客户端，然后不再了解该原型实例。为了释放资源，请尝试实现自定义 bean 后处理器。

与 spring 容器管理完整生命周期的单例 bean 不同

您可以查看此基本[教程](http://javapapers.com/spring/spring-applicationcontext/)，了解不同上下文之间的差异

参考[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:34:19.590

这是预期的行为。Spring 无法知道您何时完成了原型范围 bean 的使用，因此 Spring 不会为原型范围 bean 管理 bean 销毁。从文档中：

> 尽管初始化生命周期回调方法在所有对象上都被调用，无论范围如何，但在原型的情况下，不会调用配置的销毁生命周期回调。

有关更多信息，请参阅[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype)。

关于`ApplicationContext`s，您可以选择最适合您的应用的一种。例如，这取决于您是要使用 XML 还是注释 bean 配置，以及您是否在 servlet 容器中运行。 `ApplicationContext`它本身就是类型层次结构根部的接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T12:38:30.560

单例 bean 意味着在应用程序上下文中只有一个该 bean 的实例。这意味着如果您执行以下操作：

```
HelloSpring obj = (HelloSpring) context.getBean("helloSpring");
    obj.setMessage("My message");
    System.out.printIn(obj.getMessage());
    HelloSpring anotherObj = (HelloSpring) context.getBean("helloSpring");
    System.out.printIn(anotherObj.getMessage()); 
```

您将在控制台输出中看到两次“我的消息”。

对于原型 bean，每次您尝试从应用程序上下文中获取其中一个时，您将获得一个新实例，因此如果您再次运行上述代码，第二个控制台输出将为“null”。

由于容器不需要为原型 bean 调用 destroy 方法，因此不需要，并且行为是正确的。

上述类之间的区别在于它们分别是接口、抽象类和具体类，为了更好地理解这些概念，我建议阅读[Oracle Java 教程](http://docs.oracle.com/javase/tutorial/)中的 Java 官方 oracle 文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-01T08:45:46.660

您的应用程序可以每 10 毫秒请求一次原型 bean 的新实例，对 bean 做一些事情，然后让它超出范围。如果 Spring 必须在应用程序关闭时销毁（）它们，它必须保留对每个创建的原型 bean 的引用，防止它们被垃圾收集，从而导致内存泄漏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-25T16:11:14.260

我还尝试获取 bean 的销毁事件，其范围是“原型”。所以我阅读了上面的所有答案并尝试他们的答案。结果，我发现即使原型 bean 也无法检测到破坏。

*尽管初始化生命周期回调方法在所有对象上都被调用，无论范围如何，但在原型的情况下，不会调用配置的销毁生命周期回调。*

见这里（[https://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype](https://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype)）

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-10-25T11:20:25.223

请在您的 spring 配置文件中检查您的范围类型。如果 scope="prototype" 则将其更改为 scope="singleton"

```
<bean id="helloWorld" class="com.example.test.HelloWorld"
init-method="init" destroy-method="destroy">
<property name="message" value="Hello World!" /> 
```

# javascript - javascript倒数计时器

> ID：15040432
> 
> 赞同：0
> 
> 时间：2013-02-23T12:15:56.157
> 
> 标签：javascript, jquery

我想要一个这种格式的javascript倒数计时器：分别为00:00:00（分钟、秒、毫秒）。我在互联网上搜索了很多插件，但这还不够好。我希望当页面刷新时计时器值不会重置。请告诉我这方面的解决方案或示例代码。我将非常感谢你们所有人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:26:52.297

页面刷新重置有一个非常简单的解决方案，方法是在 localStorage 中设置倒计时时间（作为 JSON 格式的时间戳或日期对象）并在页面重新加载时将其取回。

```
//timestamp sample
localStorage.setItem("timestamp", /* value goes here */);
var timestamp = localStorage.getItem("timestamp");

//date object sample
localStorage.setItem("date", (new Date("02 23, 2013 13:25:14")).toJSON());
var date = localStorage.getItem("date"); 
```

因此，每当您在页面上设置倒计时并在每个页面加载时调用 setItem 时，检查用户浏览器的 localStorage (getItem) 中是否存储了以前的倒计时。

# core-data - SaveToURL 中的 UIDocumentStateSavingError

> ID：15040434
> 
> 赞同：1
> 
> 时间：2013-02-23T12:15:56.887
> 
> 标签：core-data, uimanageddocument

我正在尝试保存 coredata 文件并进行一些更改（在本地，而不是通过 iCloud），但未调用“saveToURL”方法完成处理程序。使用调试器，我看到文件处于 UIDocumentStateSavingError 状态。我在文档中没有看到任何解释，这个错误是什么以及来自哪里。任何建议/最佳做法或线索？

谢谢

# ruby-on-rails - 有人可以解释什么.?.？正在做 self.split('').?.?

> ID：15040446
> 
> 赞同：1
> 
> 时间：2013-02-23T12:17:51.307
> 
> 标签：ruby-on-rails, railstutorial.org

我正在研究 Rails 教程（[http://ruby.railstutorial.org/chapters/rails-flavored-ruby#top](http://ruby.railstutorial.org/chapters/rails-flavored-ruby#top)），挑战是向 String 类添加 shuffle 方法。

这是建议的解决方案：

清单 4.11。附加到 String 类的 shuffle 方法的骨架：

```
class String
  def shuffle
    self.split('').?.?
  end
end 
```

抱歉，如果这对大多数人来说真的很容易，但我是开发新手..我不明白**.?.?** 是在做？书中没有解释，我在网上也找不到。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:23:42.240

这不是建议的解决方案 - 练习内容如下：

`By replacing the question marks in Listing 4.10 with the appropriate methods, combine split, shuffle, and join to write a function that shuffles the letters in a given string.`

`Using Listing 4.11 as a guide, add a shuffle method to the String class.`

您应该`?`用正确的方法名称替换 's。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T17:43:31.780

有同样的问题......这是它的外观：

**4.10**

```
s.split('').shuffle.join 
```

结尾

**4.11**

```
class String
   def shuffle
     self.split('').shuffle
     end
   end 
```

# css - 浮动框 css

> ID：15040449
> 
> 赞同：0
> 
> 时间：2013-02-23T12:18:18.347
> 
> 标签：css

我有一个带有 K2 组件的 Joomla 站点。而且我的“问题”看起来很糟糕。请看图片：

[css box foating问题](http://hunshooting.hu/css_float.jpg)

这是css文件的一部分，我认为它适用于这里：

```
/* --- Item groups --- */
div.itemList {}
div#itemListLeading {}
div#itemListPrimary {}
div#itemListSecondary {}
div#itemListLinks {background:#f7fafe;border:1px solid #ddd;margin:8px 0;padding:8px;}

div.itemContainer {float:left;}
div.itemContainerLast {} /* this class is appended to the last container on each row     of items (useful when you want to set 0 padding/margin to the last container) */

/* --- Item block for each item group --- */
div.catItemView {padding:4px;} /* this is the item container for this view - we add a generic padding so that items don't get stuck with each other */

/* Additional class appended to the element above for further styling per group item */
div.groupLeading {}
div.groupPrimary {}
div.groupSecondary {}
div.groupLinks {padding:0;margin:0;}

div.catItemIsFeatured {background:#ddd;border:1px dotted; padding:3px;margin:1px;} /* Attach a class for each featured item */ 
```

所以，我喜欢右边的样子。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:44:25.247

CSS之所以没有达到预期的效果，是因为CSS只关心水平位置，即所有东西都是先水平布局，再垂直布局。因此，后续行上的下一个浮动将仅位于第一行浮动中最高元素的下方，因此当前一行浮动具有较短高度的容器时，会留下未填充的垂直空间。

我推荐 jQuery Masonry :) [http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:50:31.300

您可以使用它`column-count`来实现所需的外观。请记住，项目的顺序将与您浮动时不同。

漂浮：

```
1 2
3 4
5 6 
```

列：

```
1 4
2 5
3 6 
```

只需`column-count: 2`在项目的父项上设置。

请注意，它不适用于所有浏览器：[http ://caniuse.com/#search=column](http://caniuse.com/#search=column)

# java - 在 android sdk 15 及更低版本的函数中更改按钮背景

> ID：15040450
> 
> 赞同：0
> 
> 时间：2013-02-23T12:18:58.510
> 
> 标签：java, android

在 SDK 16 及更高版本上，我可以通过以下方式更改按钮背景

```
messagesButton.setBackground(swapDrawable); 
```

但此功能不适用于 sdk 15 及以下版本。是否有不同的方式以编程方式更改按钮背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:22:59.633

也许如果您尝试按钮并查看您会找到它的方法。

```
button.setBackgroundDrawable() 
```

还有

```
button.setBackgroundResource() 
```

与 R id 一起使用。

# javascript - Firefox 移动设备的无重启（引导）扩展中的 getElementsByName

> ID：15040452
> 
> 赞同：0
> 
> 时间：2013-02-23T12:19:03.893
> 
> 标签：javascript, android, firefox-addon, getelementsbytagname, firefox-addon-restartless

我通常是使用 Firefox 进行扩展开发的新手，特别是在移动版本中，我正面临这个让我发疯的问题。

我需要提取具有特定标签名称的元素，例如`<iframe>`或`<p>`或`<script>`。自然地，我考虑过使用`getElementsByTagName()`，但它对我不起作用。此外，我不知道我应该把它放在哪里，因为当我将它链接到门衣架按钮中的功能时，它不起作用。如果我更改为启动功能，它会显示警报窗口，但结果为空（null）。

我真的被困住了，我需要你们的帮助。这里我使用的代码行：

```
doc=getBrowser().selectedTab.linkedBrowser.contentDocument;
frames=doc.getElementsByTagName("script"); 
```

当我按下门架中的按钮时，我只是在警报窗口和敬酒中显示提取元素数组的长度：

```
label: "JavaScript",// the button label in the doorhanger
callback: function() { 
    Services.prompt.alert(null,"the iframes ","Frames Tag shown "+frames.length);// the alert window
    aWindow.NativeWindow.toast.show("Frames Tag shown "+frames.length, "long");//the toast
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:09:10.453

桌面扩展和移动扩展之间存在很多差异。首先，后者不提供全局 getBrowser() 或 gBrowser。相反，您必须使用[BrowserApp 对象](https://developer.mozilla.org/en-US/docs/Extensions/Mobile/API/BrowserApp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:45:55.963

好吧，谢谢大家的帮助，我找到了解决方案：此代码绑定到显示门架的菜单按钮：

```
 init();// initialization of the vriables otherwise it won't work
    var tab = window.BrowserApp.selectedTab;
    doc = tab.window.document;// getting the DOM 
    iframes=doc.getElementsByTagName("iframe");// the the iframes 
```

# c# - 如何将 ComboBox 设置为不在其项目中显示部分字符串？

> ID：15040454
> 
> 赞同：0
> 
> 时间：2013-02-23T12:19:13.893
> 
> 标签：c#, .net, vb.net

想要跟踪每个插入`ComboBox`数据类型为字符串的数据。所以我认为将项目文本与我的数据合并是个好主意。
但是我需要一种方法来隐藏项目列表中的数据。

这是我想要的一些简单示例：

```
"First item text             Data:This was a dog"
"Second item text            Data:This was a girl"
"...item text...             Data:...." 
```

我需要找到一种解决方案来向用户隐藏数据。
已经尝试将`MaxLength`ComboBox 设置为 20，但没有成功。
**注意：我不允许使用任何其他类来实现这一点，所以 Stack, Queue 无济于事**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:25:35.147

c#组合框中的每一项都有两个属性，分别是text和value。将项目值设置为所需的数据，将文本设置为要为用户显示的字符串。

```
mycomboBox.Items.Add(new ListItem("Value To Display", "actual value"));
mycomboBox.Items.Add(new ListItem("First item text", "This was a dog")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:25:58.540

行。让我们考虑这个简单的方法：

```
For i = 0 to n
   set combobox[i] to substring(0, m) 
```

这样每个项目都只是一个包含要出现的赞赏文本的子字符串。

`"First item text Data:This was a dog"`例如，如果项目是，则此代码仅显示部分`"First item text"`：（**在 C# 中）**

```
string str = "First item text             Data:This was a dog";
string shown = str.Substring(0, str.IndexOf("text") + 4);
string hidden = str.Substring(shown.Length); 
```

并且只需处理`SelectedIndexChanged`事件以使用所选项目的数据更新 UI。

```
private readonly string[] data = new[] { "This was a dog", "This was a girl" }; 
```

然后显示数据[comboBox.SelectedIndex]

# javascript - 如何在 Blogger 中正确编写 scrollTop javascript？

> ID：15040457
> 
> 赞同：0
> 
> 时间：2013-02-23T12:19:38.687
> 
> 标签：javascript, jquery, blogger

我正在尝试为我的 Blogger 博客创建一个滚动的固定页脚（一个固定的页脚，在顶部不可见，但在页面向下滚动时可见）。

我在谷歌上搜索了无数次如何创建一个。现在，我找到了一个答案，可以在[StackOverflow 链接上找到，这实际上是另一个问题的答案](https://stackoverflow.com/questions/6449733/how-can-i-add-javascript-inside-blogger)，或者代码如下：

```
<style>
        #fixedfooter {
            position:fixed;
            left:0px;
            bottom:0px;
            height:100px;
            width:100%;
            display:none;
        }
</style>
<div id="fixedfooter">Contents here will not be visible on top of the page, but will appear when scrolled down 200px.</div>
<script type='text/javascript'>
    $(window).scroll(function() {
            if ($(this).scrollTop() < 200) {
                $("#fixedfooter").hide();
            }
            else {
                $("#fixedfooter").show();
            }
        });
</script> 
```

这在 jsFiddle 上是可行的，但是当我在 Blogger 上尝试时，它不会。我尝试了位于[此处](https://stackoverflow.com/questions/6449733/how-can-i-add-javascript-inside-blogger)的答案，但似乎没有任何效果。

我尝试通过以下方式将 javascript 放入 HTML 中：

```
<script type='text/javascript'>
//<![CDATA[

$(window).scroll(function() {
    if ($(this).scrollTop() < 200) {
        $("#fixedfooter").hide();
    }
    else {
        $("#fixedfooter").show();
    }
});    
</script> 
```

但它仍然不起作用。

我试图将 javascript 放在 Layout 中的 HTML 小工具中，但仍然没有结果。

我该怎么做呢？这肯定会对我有很大帮助。谢谢你的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:29:55.287

什么问题？输出没有显示？或者不知道在哪里以及如何在博客中放置代码。

1.  去博主。
2.  点击模板。
3.  单击编辑 html（确保首先备份您的模板，选项在右上角）并在之前粘贴您的代码`</body>`。如果它不接受代码，则：
    1.  [通过此站点htmlentities.net](http://htmlentities.net/)对代码进行编码
    2.  再试一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T22:26:56.267

你的代码没问题。只需这样做：

```
<script type='text/javascript'>

//<![CDATA[......
some code here 

//]]></script> 
```

完毕！

# django - 如何让模型为 Django Haystack 搜索生成多项选择？

> ID：15040459
> 
> 赞同：0
> 
> 时间：2013-02-23T12:19:52.720
> 
> 标签：django, forms, search, django-haystack

我整晚都在用头撞这个东西，在我下车之前，也许你们中的一个人知道我忽略了一些事情。

**什么有效：**我正在尝试使用 Django 1.4 和 Haystack 2.0-dev 创建一个图书搜索引擎。我已经很好地搜索了我导入的 4 本书及其页面。

**什么不能：**但是，我希望用户能够通过表单中的复选框选择一个人想要搜索的书籍。我一直在尝试，但没有出现复选框，没有列出任何书籍，即使我有 4 本书的标题等。

[这是我的 search/views.py （主要是从这个问题](https://stackoverflow.com/questions/5862666/how-can-i-use-a-haystack-form-that-contains-a-choicefield-within-a-context-proce)借来的）

```
from django import forms
from haystack.forms import HighlightedModelSearchForm
from books.models import Book, Author

class BasicSearchForm(HighlightedModelSearchForm):    
    def __init__(self, *args, **kwargs):
        super(BasicSearchForm,self).__init__(*args,**kwargs)
        book_choices = Book.objects.all()
        book_tuples = tuple([(c.id, c.title) for c in book_choices])
        self.fields['book'] = forms.ChoiceField(choices=book_tuples, required=False)

    def search(self):
        sqs = super(BasicSearchForm, self).search()
        if self.is_valid() and self.cleaned_data['book']:
            if self.cleaned_data['book'] != "*":
                sqs = sqs.filter(book__id=self.cleaned_data['book'])

        return sqs 
```

这是我的 urls.py

```
from django.conf.urls import patterns, include, url
from haystack.views import SearchView, search_view_factory
from haystack.query import SearchQuerySet  
from search.views import BasicSearchForm

urlpatterns = patterns('',
    url(r'^search/$', 
        SearchView(
        #template='book_search.html',
        form_class = BasicSearchForm
        ), 
    name='haystack_search'
    ),

    url(r'^accounts/login/', 'django.contrib.auth.views.login'),

) 
```

我已经对此进行了很多搜索，并整夜搜索了文档，但它被避开了。也许有人在那里看到了我没有看到的东西？任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:29:03.177

为什么不使用这种方法。

```
1) Make a search title field. Each book will have a title. 
2) Create facets for your titles.
3) So when you search for any text, automatically all your books will be listed. 
Now when user clicks the book name in facets he will see results from that book only. 
```

您对这种方法有何评论？

# sorting - Sort-Object and Integers

> ID：15040460
> 
> 赞同：19
> 
> 时间：2013-02-23T12:19:53.773
> 
> 标签：sorting, powershell

I am trying to sort a colomn with numbers in a CSV file. But somehow it doesn't work. Sample CSV:

```
Orange;65
Red;160
Green;140
White;110
Purple;85 
```

This is the piece of code I tried it with:

```
$csv = Import-Csv -Header "Color", "Number" -delimiter ';' data.csv
$csv | Sort-Object Number 
```

Which gives me the following output:

```
Color                Number
-----                ------
White                110
Green                140
Red                  160
Orange               65
Purple               85 
```

Obviously not in the correct order. Can someone please explain me how to resolve this issue?

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-23T12:31:15.193

`Import-CSV` imports csv columns as `strings` by default. You need to cast it to `int` before you can sort by value, and not "alphabetical". Ex:

```
$csv = Import-Csv -Header "Color", "Number" -delimiter ';' data.csv
$csv | % { $_.Number = [int]$_.Number }
$csv | Sort-Object Number

Color  Number
-----  ------
Orange     65
Purple     85
White     110
Green     140
Red       160 
```

As an alternative, you can cast it while sorting, like this:

```
$csv = Import-Csv -Header "Color", "Number" -delimiter ';' data.csv
$csv | Sort-Object @{e={$_.Number -as [int]}} 
```

or even shorter `$csv | Sort-Object { [int]$_.Number }`

# c# - 用户控件页面加载事件在 ASPX 页面加载事件之后触发

> ID：15040462
> 
> 赞同：1
> 
> 时间：2013-02-23T12:20:19.800
> 
> 标签：c#, asp.net, webforms

1.  我有一个用户控件 ( `WODetails.ascx`)，它获取`WOCode`并填写与工单相关的一些字段。
2.  一旦我单击网格控件（事件触发） ，我就有一个`ASPX`包含网格和用户控件上方的页面`ROWCommand`

我想在 rowcommand 事件触发后调用 pageload 事件，因为 rowcommand 重新运行`WOCOde`并且我的用户控件应该相应地填充字段。但问题是用户控件页面加载事件在页面加载事件触发后`ASPX`触发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:47:44.513

这`Page_Load`是.NET 框架调用的事件，旨在通知`Controls`页面生命周期的阶段。它不适用于这种交流。

如果你想和 进行交流`UserControl`，为什么不在 上写一个自定义的方法`UserControl`呢​​？

```
public class WODetails : UserControl
{
    ...

    public void DoMyStuff(object WOCOde)
    {
        ...
    }

    ...
} 
```

在 ASPX 上，您只需在需要时调用它：

```
void grdDummy_RowCommand(object sender, GridViewCommandEventArgs e)
{
    object WOCOde = GetWOCode(e);
    WODetails.DoMyStuff(WOCOde);
} 
```

# ios - 如何使用 AFJSONRequestOperation 返回响应对象

> ID：15040463
> 
> 赞同：0
> 
> 时间：2013-02-23T12:20:29.967
> 
> 标签：ios, objective-c, afnetworking, afjsonrequestoperation

我正在尝试通过使用获取天气数据`AFJSONRequestOperation`。问题是查询完成后我无法返回对象。有谁知道该怎么做？

我目前的实现是

```
- (NSDictionary *)getCityWeatherData:(NSString*)city
{
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://free.worldweatheronline.com/feed/weather.ashx?key=xxxxxxxxxxxxx&num_of_days=3&format=json&q=%@", city]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSDictionary *data = [[JSON objectForKey:@"data"] objectForKey:@"weather"];
        return data;
    } failure:nil];
    [operation start];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:38:25.340

从某种意义上说，有一种方法可以做到这一点。您可以让调用者将块作为参数传递，而不是使用传统的返回方法，然后您可以在成功和失败块中回调该`AFJSONRequestOperation`块。

这是我的一些代码的示例：

```
- (void)postText:(NSString *)text
     forUserName:(NSString *)username
  withParameters:(NSDictionary *)parameters
       withBlock:(void(^)(NSDictionary *response, NSError *error))block
{
    NSError *keychainError = nil;
    NSString *token = [SSKeychain passwordForService:ACCOUNT_SERVICE account:username error:&keychainError];

    if (keychainError) {
        if (block) {
            block([NSDictionary dictionary], keychainError);
        }
    } else {
        NSDictionary *params = @{TEXT_KEY : text, USER_ACCESS_TOKEN: token};
        [[KSADNAPIClient sharedAPI] postPath:@"stream/0/posts"
                                  parameters:params
                                     success:^(AFHTTPRequestOperation *operation, id responseObject)
         {
             if (block) {
                 block(responseObject, nil);
             }
         }
                                     failure:^(AFHTTPRequestOperation *operation, NSError *error)
         {
             if (block) {
                 block([NSDictionary dictionary], error);
             }
         }];
    }
} 
```

我用这个来称呼它：

```
 [[KSADNAPIClient sharedAPI] postText:postText
                          forUserName:username
                       withParameters:parameters
                            withBlock:^(NSDictionary *response, NSError *error)
 {
        // Check error and response
 } 
```

# php - 我的 PHP 文件没有被执行

> ID：15040467
> 
> 赞同：0
> 
> 时间：2013-02-23T12:20:56.490
> 
> 标签：php, mysql

我创建了一个 .php 文件，当我尝试通过 localhost 执行它时，它什么也没显示。如果脚本工作正常，那么它应该在屏幕上打印一些东西。<- 脚本的基本思想，但没有显示任何内容。

```
<?php
$con = mysql_connect("localhost","somanshu","somanshu");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("james007", $con);

$result = mysql_query("SELECT * FROM info");
while($row = mysql_fetch_array($result))
  {
  if($_POST['mail'] == $row['email'])
  {
  echo "Logged In.<META HTTP-EQUIV=\"refresh\" CONTENT=\"0;URL=home\">";
  }
  else
  {
  $sql="INSERT INTO info (email, password)
  VALUES
  ('$_POST[mail]','$_POST[pwd]')";
   if (!mysql_query($sql,$con))
   {
   die('Error: ' . mysql_error());
   }
   else
   {
   echo "Added. <META HTTP-EQUIV=\"refresh\" CONTENT=\"0;URL=home\">";
   }
  }
  }
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:22:30.170

使用`ini_set('error_reporting', E_ALL);`并查看它是否给出错误。

在页面顶部添加以下代码。

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

如果它仍然没有显示错误然后尝试

```
mysqli_select_db("james007", $con)or die(mysqli_error()); 
```

还要检查

```
mysqli_query("SELECT * FROM info")or die(mysqli_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:29:26.117

确保数据库中有数据可供选择。如果`SELECT * FROM info`不返回任何行，则此脚本不会输出任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:29:42.123

首先要做的事情是：php 是否被执行？要找出创建一个名为 test.php 的文件并编写

```
<?php
phpinfo();
?> 
```

里面。

如果这不起作用，您必须为您的网络服务器正确设置 php。

# c++ - boost::variant 对象构造计数 VS 破坏计数

> ID：15040469
> 
> 赞同：0
> 
> 时间：2013-02-23T12:21:08.947
> 
> 标签：c++, boost-variant

我已经使用 boost::variant 一段时间了，现在我试图弄清楚它是如何在内部工作的。我写了一个简单的测试，我无法理解结果。这是（简化）

```
struct my_type
{
    my_type(){ cout << (size_t)this << " construction"; }
    ~my_type(){ cout << (size_t)this << " destruction"; }
};

int main()
{
    variant<int, my_type> x;
    x = my_type();
} 
```

这样的程序的输出是

```
140736940365327 construction  <-- A
140736940365236 destruction  <-- ?
140736940365327 destruction  <-- A
140736940365332 destruction  <-- ? 
```

为什么析构函数没有像构造函数那样被调用多次？由于在堆上调用析构函数，我知道这可能不是段错误，但在我看来，这种行为是危险的。我错过了什么吗？这与 boost::variant 的“备份”机制有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:24:47.617

您只定义了一个默认构造函数，但当然也可以使用各种参数调用构造函数。由于您没有显式定义复制构造函数（接受 a 的构造函数`const my_type&`），因此编译器会为您隐式生成一个。如果您添加自己的复制构造函数，您应该会看到它用于构造其他两个神秘对象：

```
struct my_type
{
  my_type(){ cout << (size_t)this << " construction"; }
  my_type(const my_type&){ cout << (size_t)this << " copy construction"; }
  ~my_type(){ cout << (size_t)this << " destruction"; }
}; 
```

事实上，如果您使用的是 C++11 编译器，则隐式生成的移动构造函数将负责一些新对象。如果您提供上述复制构造函数，则不再生成隐式移动构造函数，因此它们都显示为复制构造。但是，如果你也提供了一个移动构造函数，你会发现它被调用了：

```
struct my_type
{
  my_type(){ cout << (size_t)this << " construction"; }
  my_type(const my_type&){ cout << (size_t)this << " copy construction"; }
  my_type(my_type&&){ cout << (size_t)this << " move construction"; }
  ~my_type(){ cout << (size_t)this << " destruction"; }
}; 
```

# windows-phone-7 - 如何在 windows phone 中检索字符串中的联系人地址？

> ID：15040473
> 
> 赞同：0
> 
> 时间：2013-02-23T12:21:38.680
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone

Windows Phone 联系人的详细信息可以像[这样](https://stackoverflow.com/questions/7945374/how-to-get-contacts-address-from-contacts-searchasync-results)在 UI 中绑定，其他详细信息（如电子邮件、电话号码等）也可以通过枚举联系人数据结果来检索，[但](https://stackoverflow.com/questions/13785598/how-to-read-all-email-addresses-phone-numbers-etc-stored-in-a-windows-phone-con)我无法使用其中任何一个来获取联系人的“地址” STRING（[第二个](https://stackoverflow.com/questions/13785598/how-to-read-all-email-addresses-phone-numbers-etc-stored-in-a-windows-phone-con)链接适用于所有其他属性，但不提供地址）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:55:04.130

说，您有您正在寻找的联系人实例 - 联系人和联系人项目来放置数据：

```
Contact contact = App.con;
Dictionary<string,string> contactItem = new Dictionary<string,string>(); 
```

您可以通过以下方式找到所有地址：

```
//Addresses
i = 0;
IEnumerable<ContactAddress> ad = contact.Addresses;
foreach (ContactAddress item in ad)
{
   i++;
   contactItem.Add("Adress " + i + " - " + item.Kind + ": ", item.PhysicalAddress.AddressLine1 + " " + item.PhysicalAddress.City);
} 
```

# c# - .string 格式不正确

> ID：15040486
> 
> 赞同：0
> 
> 时间：2013-02-23T12:23:11.877
> 
> 标签：c#, asp.net

在我的 .net 应用程序中，我添加来宾参数是 guest_id、first_name、email_address、phone_number

我还创建了一个 addguest 程序并查看然后当我调试错误时显示输入字符串不是第二行中的正确格式

```
public class Class1
{
    public bool addguest(int guest_id, string first_name, string Email_address, int Phone_number)
    {
        try
        {
            Database db = DatabaseFactory.CreateDatabase("sed");
            db.ExecuteDataSet("addguest", new object[] { guest_id, first_name, Email_address, Phone_number });
            return tr 
```

和班级图书馆的工作是

```
public class Class1
{
    public bool addguest(int guest_id, string first_name, string Email_address, int Phone_number)
    {
        try
        {
            Database db = DatabaseFactory.CreateDatabase("sed");
            db.ExecuteDataSet("addguest", new object[] { guest_id, first_name, Email_address, Phone_number });
            return true;
        }
        catch
        {
            return false;
        }
    }
    public DataTable show()
    {
        Database db = DatabaseFactory.CreateDatabase("sed");
       return db.ExecuteDataSet("view").Tables[0];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:34:17.000

尝试调试，检查 Guest_Id 和 Phone_Number 变量的值并检查它是否是有效的 int 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:49:23.717

电话号码至少七位数。为什么不将电话号码存储在字符串中？没有必要将电话号码存储在 int 中。我不确定 int 是否可以存储 7 位数字

# ruby-on-rails - 渲染 @items 并且没有路由匹配错误

> ID：15040496
> 
> 赞同：0
> 
> 时间：2013-02-23T12:24:07.987
> 
> 标签：ruby-on-rails

我有四个模型：

```
class User < ActiveRecord::Base
  has_many :lists, dependent: :destroy
  has_many :wishes, through: :lists
  has_many :items, through: :wishes

class List < ActiveRecord::Base
  belongs_to :user
  has_many :wishes, dependent: :destroy
  has_many :items, through: :wishes

class Wish < ActiveRecord::Base
  belongs_to :list
  belongs_to :item

class Item < ActiveRecord::Base
  has_many :wishes
  has_many :lists, through: :wishes 
```

当我想显示`items`与`List`. 我得到错误：

```
No route matches {:action=>"show", :controller=>"items", :id=>#<Item id: nil, title: nil, link: nil, created_at: nil, updated_at: nil, image: nil>} 
```

就好像它试图显示一个`Item`不存在的，因为我`Item`在数据库中只有一个。

```
class ListsController < ApplicationController
  def show
    @user = User.find(params[:user_id])
    @list = @user.lists.find(params[:id])
    @item = @list.items.build if current_user?(@user)
    @items = @list.items
  end 
```

应用程序/视图/列表/show.html.erb

```
 <div class="span8">
    <% if @list.items.any? %>
      <ol class="lists white-box">
        <%= render @items %>
      </ol>
    <% end %>
  </div> 
```

应用程序/视图/项目/_item.html.erb

```
<li>
    <div class="clearfix">
        <a class="thumb" href="<%= item_path(item) %>">
            <%= image_tag item.image_url(:thumb).to_s %>
        </a>
        <div class="clearfix">
          <span class="content">
            <%= item.title %>, <%= item.link %>
          </span>
          <span class="timestamp">
            Created <%= time_ago_in_words(item.created_at) %> ago.        
            <% if current_user?(item.lists.last.user) %>
            <%= link_to "delete", item, method: :delete,
                                        data: { confirm: "You sure?" },
                                        title: item.title %>
            <% end %>
          </span>

        </div>
    </div>
</li> 
```

**额外的**

如果我改成`app/view/items/_item.html.erb`这样：

```
<li>
    <div class="clearfix">
        <a class="thumb" href="#">
            <%= image_tag item.image_url(:thumb).to_s %>
        </a>
        <div class="clearfix">
          <span class="content">
            <%= item.title %>, <%= item.link %>
          </span>    
        </div>
    </div>
</li> 
```

该页面已呈现，但显示为好像它试图呈现一个`Item`不存在的：

![第一行是数据库中的项目，第二行似乎是一个空的项目条目](../Images/38393de9fb60648340c9d1b3b6ed304e.png)

**编辑**

在我的`app/view/lists/show.html.erb`我有`<%= render 'shared/item_form' %>`构建一个项目。

_item_form.html.erb 看起来像这样：

```
<% if signed_in? %>

  <div id="addWish" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="addWishLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="addWishLabel">Add wish</h3>
    </div>
    <div class="modal-body">
      <%= form_for(@item, html: { multipart: true }) do |f| %>
      <div class="field">
        <%= render 'items/fields', f: f %>
        <%= hidden_field_tag :list_id, @list.id %>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <%= f.submit "Add", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:25:44.343

您的控制器正在构建一个空项目 - 请参阅`@item = @list.items.build if current_user?(@user)`。您的视图无法正确生成指向此未保存项目的链接。

# jquery - jquery coffeescript live() 转换

> ID：15040500
> 
> 赞同：0
> 
> 时间：2013-02-23T12:24:26.257
> 
> 标签：jquery, ruby-on-rails-3, coffeescript

陷入摆脱 .live() 的 jquery 更新。那里有一些帖子谈论使用 on() 并且它工作正常，除了 ajax 加载的页面。

然后他们谈论委派并失去了我。我有这个简单的 toggle() 咖啡脚本，但它不是引用一个元素，而是许多使用数据行为不显眼的概念。

```
jQuery ->
  $('[data-behavior="dropdown"]').live( "click", ->
    c = @children[1]
    $(c).toggle()) 
```

我通过将其附加到主体或容器来进行委托的尝试失败了。我的咖啡脚本知识和我的 javascript 知识一样糟糕。我可以花第二天的时间来解决这个问题，或者寻求帮助。

# java - 如何轻松地将 BufferedReader 转换为字符串？

> ID：15040504
> 
> 赞同：65
> 
> 时间：2013-02-23T12:25:04.093
> 
> 标签：java, json

```
@POST
@Path("/getphotos")
@Produces(MediaType.TEXT_HTML)
public String getPhotos() throws IOException{
    // DataInputStream rd = new DataInputStream(request.getInputStream());
    BufferedReader rd = new BufferedReader(
        new InputStreamReader(request.getInputStream(), "UTF-8")
    );
    String line = null;
    String message = new String();
    final StringBuffer buffer = new StringBuffer(2048);
    while ((line = rd.readLine()) != null) {
        // buffer.append(line);
        message += line;
    }
    System.out.println(message);
    JsonObject json = new JsonObject(message);
    return message;
} 
```

上面的代码适用于我的 servlet。它的目的是获取一个流，从中制作一个 Json 文件，然后将 Json 发送回客户端。但为了制作 Json，我必须使用“while”循环读取`BufferedReader`对象。`rd`但是，我想`rd`用尽可能少的代码行转换为字符串。我怎么做？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2017-08-13T10:48:06.813

从 Java 8 开始：

```
rd.lines().collect(Collectors.joining()); 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-02-23T12:30:55.717

我建议使用 commons IO 库 - 然后它是一个简单的 1 班轮：

```
String message = org.apache.commons.io.IOUtils.toString(rd); 
```

当然，请注意，使用这种机制，可以通过发送将填满服务器内存的永无止境的数据流来进行拒绝服务攻击。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-12-23T18:02:32.487

我发现自己今天这样做了。不想引入 IOUtils，所以我选择了这个：

```
String response = new String();
for (String line; (line = br.readLine()) != null; response += line); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-09T19:19:10.560

像这样使用变量作为字符串：

```
BufferedReader rd = new BufferedReader(
                new InputStreamReader(response.getEntity().getContent()));
String line = "";
while((line = rd.readLine()) != null){

} 
```

# android - 使用 AsyncTask 在 ListView 中图像混乱

> ID：15040505
> 
> 赞同：1
> 
> 时间：2013-02-23T12:25:06.900
> 
> 标签：android, performance, bitmap, android-asynctask

我直接从 mp3 加载图像并在我的应用程序中显示它们以及歌曲标题。为了使过程更顺畅，我使用了 AsyncTask 并在后台加载图像。如果我慢慢滚动，图像会以正确的顺序与歌曲一起出现。但是，如果我快速上下滚动，则图像会混乱 2-3 秒（如出现的顺序不正确）。2-3 秒后，订单又恢复正常。我怎样才能避免这种情况？这是我的代码：

```
public class TestAcitivity extends SherlockListActivity  {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ActionBar ab = getSupportActionBar();
        Uri sourceUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        String [] proj = {MediaStore.Audio.Media._ID,MediaStore.Audio.Media.TITLE,MediaStore.Audio.Media.ALBUM_ID};
        CursorLoader cursorLoader = new CursorLoader(this, sourceUri,proj,
                                                        null, null, MediaStore.Audio.Media.TITLE);
        Cursor cursor = cursorLoader.loadInBackground();
        ListView lv = getListView();//(ListView)this.findViewById(R.id.listview);
        lv.setAdapter(new MyAdapter(this, cursor, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER));
    }
}
class MyAdapter extends CursorAdapter {

    private LayoutInflater mLayoutInflater;
    @SuppressWarnings("unused")
    private Context mContext;

    public MyAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        mContext = context;
        mLayoutInflater = LayoutInflater.from(context);
    }
    public void bindView(View view, Context context, Cursor cursor) {
        String title = cursor.getString(cursor.getColumnIndex(MediaStore.MediaColumns.TITLE));
        String album_id = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
        TextView text = (TextView)view.findViewById(R.id.txtTitle);
        text.setText(title);
        if(Long.valueOf(album_id)>0)
        {
            Uri sArtworkUri = Uri.parse("content://media/external/audio/albumart");
            Uri uri = ContentUris.withAppendedId(sArtworkUri, Integer.valueOf(album_id));
            new MyImageLoader(context,view).execute(uri);
        }
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View v = mLayoutInflater.inflate(R.layout.row, parent, false);
        //bindView(v, context, cursor);
        return v;
    }
    private class MyImageLoader extends AsyncTask<Uri, Void, Bitmap>{
        Context context;
        View view;
        MyImageLoader(Context context,View view){
            this.context = context;
            this.view = view;
        }
        @Override
        protected Bitmap doInBackground(Uri... uri) {

            ContentResolver res = context.getContentResolver();
            InputStream in = null;
            try {
                in = res.openInputStream(uri[0]);
            } 
            catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Bitmap artwork = BitmapFactory.decodeStream(in);

            return artwork;

        }
        protected void onPostExecute(Bitmap bmp){
            ImageView iv = (ImageView)view.findViewById(R.id.imgIcon);
            if(bmp!=null)
                iv.setImageBitmap(Bitmap.createScaledBitmap(bmp, 100, 100, false));
        }
    }
} 
```

我正在使用自定义`CursorAdapter`加载位图`AsyncTask`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:02:11.097

它可能与控制受异步更新影响的列表的排序顺序有关。列表项大小的快速变化可能会混淆列表视图的呈现代码。一个建议是直接为每个列表项添加一个默认（可能是黑色）图像，该图像大小相同。然后随着真实图像的出现，只需替换黑色图像即可。

* * *

**编辑**：似乎这个问题是由 Android 回收 ViewItem/row 和异步任务造成的。有关更多详细信息和几​​个解决方案，请参阅此[StackOverflow 问题。](https://stackoverflow.com/questions/9832944/android-load-asynchronous-pictures-in-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T04:56:53.320

Hack_on 是正确的。一位 Andorid 工程师在一篇博文中讨论了这个问题：

> 但是，特定于 ListView 的行为揭示了我们当前实现的问题。实际上，出于内存效率的原因，ListView 会回收用户滚动时显示的视图。如果一个人抛出列表，一个给定的 ImageView 对象将被多次使用。每次显示时，ImageView 都会正确触发图像下载任务，最终会更改其图像。那么问题出在哪里？与大多数并行应用程序一样，关键问题在于顺序。在我们的例子中，不能保证下载任务会按照它们开始的顺序完成。结果是最终显示在列表中的图像可能来自上一个项目，只是碰巧下载的时间更长。

这是链接，他还提供了一个解决方案：

[http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)

# php - 单击链接时从 db 获取结果

> ID：15040508
> 
> 赞同：-3
> 
> 时间：2013-02-23T12:25:24.833
> 
> 标签：php

单击链接时，我试图从数据库中获取结果。

想想我的页面上有一个链接`students`，现在点击它时，我想从 db 中获取所有学生并且需要在单独的页面中显示，我们将其称为 search.php。

我有一个此类链接的列表，需要通过单击每个链接获得不同的结果。

我的问题是 search.php 页面如何识别用户点击了哪个链接，然后如何显示结果属于点击的链接。

任何人都可以用正确的逻辑向我指出这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:16:35.077

您使用 $_GET[''] 全局。

像这样改变你的search.php

```
<?php
  echo $_GET['type'];
?> 
```

# c++ - 计数动作会导致海森堡效应吗？

> ID：15040511
> 
> 赞同：3
> 
> 时间：2013-02-23T12:25:51.690
> 
> 标签：c++, optimization, c++11, move

这个问题（下面的代码）[std::async 和对象复制](https://stackoverflow.com/questions/14912159/stdasync-and-object-copy)让我想到了复制/移动重型库实现。例如，这个制作 5 个副本。对策可能很棘手，例如在异步情况下，通过引用而不是值传递可能会导致并发问题。移动构造函数也不总是便宜的。

我的问题是，像找到一种通过引用传递的方法这样的对策真的可以解决一个不存在的问题吗？我假设大多数（如果不是全部）库函数最终都会被内联，它们通常只有一两行代码。我当然仍然会在输出中得到五个“删除 obj”，因为编译器必须遵循 as if 规则。如果我要通过不打印来消除析构函数的副作用，那么好像规则会更进一步并最终在发布版本中只有一个副本/移动吗？

在编写移动构造函数时我应该注意哪些事情，以免混淆编译器或无意引入副作用并阻止它进行优化？

```
class obj {
public:
    int val;
    obj(int a) : val(a) {
        cout << "new obj" << endl;
    }
    ~obj() {
        cout << "delete obj" << endl;
    }
};

void foo(obj a) {
    this_thread::sleep_for(chrono::milliseconds(500));
    cout << a.val << endl;
}

int main(int argc, int **args) {
    obj a(5);
    auto future = async(foo, a);
    future.wait();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T14:05:22.180

> 数数会导致海森堡效应吗？

不，不是。如果您的意思是对事件的观察会改变事件本身，我认为在这种情况下这是一个错误的比喻。

风险在于您的观察会错过事件，就好像您从未编写过这些副作用一样。虽然，*一般来说*，编译器应该根据“as if”规则（1.9/1）考虑副作用，但有一些“as if”规则不适用的重要情况**：**这种情况是在复制时/move 临时对象的省略可以由编译器执行。

C++11 标准的第 12.8/31 段精确描述了允许这样做的情况：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，**即使对象的复制/移动构造函数和/或析构函数具有副作用**。在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。没有优化就被破坏了。**这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可以结合起来消除多个副本）**：[...]

然后该段继续列出具体情况。这与回答问题无关，因此我省略了它们。你可以去查一下。

重要的是您的副作用可能会被跳过。如果 的实现`std::async()`执行了一些复制或移动，这取决于如何完成，即使你有一些打印输出，编译器*也可能会*忽略它们，或者更一般地说，即使你有一些副作用。

因此，**您不应将复制构造函数、移动构造函数或析构函数中的副作用作为一种可移植的方式来计算**在函数中执行了多少复制或移动：不同的编译器、不同的优化级别，当然还有不同的实现该功能可能会产生不同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T13:53:26.233

只需要一个副本，这是因为您将左值传递给`std::async`，如果您的类型是可移动的，则所有其他的都可以移动，这不是因为您的用户定义的析构函数抑制了隐式定义的移动构造函数。`async(foo, std::move(a))`您可以通过传递一个右值将一个副本变成一个移动。

请记住，如果您看到五个析构函数，其中一个是`a`自身，一个是 的函数参数`foo`，因此剩下三个在内部由`std::async`. 使用 GCC `std::async`，只有两个，我不认为它可以用更少的东西来完成，但它也不应该真的需要更多。如果类型是可移动的，则所有内部“副本”都应该移动（除非您的实现`async`写得很糟糕）

无论如何，如果您使移动类型变得便宜，那么如果您有三步或十步并不重要。

正如对您的其他问题的回答中所解释的那样，您的析构函数中的副作用不会阻止复制省略，即使它消除了副作用也允许发生这种情况，因此回答：

> as if 规则会更进一步，最终在发布版本中只有一个副本/移动吗？

是否，答案是：

> 在编写移动构造函数时我应该注意哪些事情，以免混淆编译器或无意引入副作用并阻止它进行优化？

也是号。副作用不妨碍移动。移动不是由优化器完成的，它是在您的代码从右值构造（或分配）对象时完成的。这不是优化，它受 C++ 语言的规则和语义支配。

在这段代码中：

```
A a;
A b = a; 
```

编译器不能为 使用移动构造函数`b`，无论它的优化器多么聪明。它必须使用复制构造函数，这就是 C++ 的规则所说的。在这段代码中：

```
A a;
A b = std::move(a); 
```

如果`A`有一个移动构造函数，编译器不能使用复制构造函数`b`，它必须使用移动构造函数，即使没有打开优化，这就是 C++ 的规则所说的。

# php - 在mailto中：使用notepad ++替换主题和正文，在所有文件php中添加％20而不是空格

> ID：15040516
> 
> 赞同：2
> 
> 时间：2013-02-23T12:26:43.797
> 
> 标签：php, regex, notepad++, space, mailto

早上好，我有一个问题...我在每个帖子/评论中都有一个带有 mailto 的博客，其中包含主题和正文，但是在单词之间有空格，我想用 %20 替换以更好地验证 html。每个 mailto 都有不同的主题和正文，我想使用仅匹配这种字符串的 notepad++ 正则表达式来替换：

```
<A HREF="mailto:pippo@pluto.it?subject=Diario: Tanto per ridere un p&ograve;...&amp;body=Gentile visitatore, La informo che messaggi offensivi o volgari verranno scartati, buona prosecuzione." CLASS="hyperlink">Pippo Pluto</A>

<A HREF="mailto:topolino@paperino.it?subject=Diario: Dead Space e Dead Sapce 2&amp;body=Gentile visitatore, La informo che messaggi offensivi o volgari verranno scartati, buona prosecuzione." CLASS="hyperlink">Paolino Paperino</A> 
```

结果我想要：

```
<A HREF="mailto:picodepaperis@dysney.it?subject=Diario:%20Neutrini%20sfondano%20i%20300.000%20Km/s&amp;body=Gentile%20visitatore,%20La%20informo%20che%20messaggi%20offensivi%20o%20volgari%20verranno%20scartati,%20buona%20prosecuzione." CLASS="hyperlink">De Paperis Pico</A> 
```

我有 560 个文件 php 包含空格，我想使用 notepad++ 的正则表达式处理所有文件

我写了这个正则表达式，它只找到 mailto 字符串，但不包括空格的出现。

```
<A HREF=\"mailto:([^"]*)\" CLASS="hyperlink"> 
```

有解决办法吗？谢谢，周末愉快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:28:44.993

你熟悉[urlencode](http://php.net/manual/en/function.urlencode.php)吗？为什么不使用它而不是在代码中添加编码字符串？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:50:07.013

%20 是空格，在你的地址行写空格，然后点击回车。没有问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T23:01:35.757

我调整了您的正则表达式以包含另外两个组并创建一个`Find`像这样的字符串

```
<A HREF=\"mailto:([^"]*)(\s)(.*)\" CLASS="hyperlink"> 
```

`Replace`字符串应该是这样的

```
<A HREF=\"mailto:\1%20\3\" CLASS="hyperlink"> 
```

我的想法是捕获一次出现的空白并将其替换为`%20`. 但是，当您`Replace All`在 notepad++（正则表达式模式）中应用时，它将仅替换所有匹配行上的一个空格，因此您必须单击`Replace All`多次，直到消息显示 `0 occurance was replaced`。

祝你好运。

# racket - 我应该如何创建图像的行和列？

> ID：15040527
> 
> 赞同：1
> 
> 时间：2013-02-23T12:28:04.400
> 
> 标签：racket, htdp

首先，我正在浏览**HtDP 第 2 版**并使用**BSL**语言包。

我目前正在[练习 131](http://www.ccs.neu.edu/home/matthias/HtDP2e/Draft/part_two.html#%28counter._%28exercise._col-row%29%29)，这就是它所说的：

```
Exercise 131: Design two functions: col and row.

The function col consumes a natural number n and an image i. It produces a column—a vertical arrangement—of n copies of i.

The function row consumes a natural number n and an image i. It produces a row—a horizontal arrangement—of n copies of i

Use the two functions to create a rectangle of 8 by 18 squares, each of which has size 10 by 10. 
```

除此之外，我正在查看地点图像，但在如何执行此操作方面没有任何突出之处。这些函数不获取图像列表，而是获取单个图像。例如：（除了 rect1 rect2 rect3）而不是（除了（列表 rect1 rect2 rect3））。另外，如果我按照函数的定义方式进行定义，似乎我会在图像上重叠，因为函数本身是独立的。基本上我所说的重叠是在每一行的第一张图片上。

我不是在寻找答案（尽管如果你得到它，我会接受它），而是在正确方向上的暗示、标志、神圣干预。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:42:18.210

这是一个让你开始的例子：

```
; images->row : list-of-images -> image
(define (row->image row)
  (cond
     [(empty? row) empty-image]
     [else         (beside (first row) 
                           (row->image (rest row)))]))

(row->image (list (square 20 "solid" "red")
                  (square 20 "solid" "blue")
                  (square 20 "solid" "green"))) 
```

# magento - 如何在 Magento 中向 OR 条件添加 AND 过滤器/条件？

> ID：15040529
> 
> 赞同：2
> 
> 时间：2013-02-23T12:28:16.213
> 
> 标签：magento, filter

如何使用集合过滤器实现以下目标？

```
SELECT * FROM products WHERE (name like '%blah%' and name like 
    '%yes%') or (description like '%blah%' and description like '%yes%'); 
```

还是出于某种原因这是一种不好的做法？

addFieldToFilter 应用于一个集合做 AND 并且在每个你可以实现 OR，但这只允许：

```
(x OR y) AND (w OR z) 
```

但不是

```
(x AND y) OR (w AND z) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:12:55.480

不，我不相信你缺少任何东西。不久前我遇到了类似的问题，并且曾经`getSelect()->where()`解决它。

从您的查询开始：

```
SELECT * FROM products WHERE (name like '%blah%' and name like 
'%yes%') or (description like '%blah%' and description like '%yes%'); 
```

首先，我创建了一个集合并使用`OR`数组方法来获取查询。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addFieldToFilter(array(
                              array('attribute' => 'name', 'like' => '%blah%'),
                              array('attribute' => 'name', 'like' => '%yes%')
                              ));
$collection->addFieldToFilter(array(
                              array('attribute' => 'description', 'like' => '%blah%'),
                              array('attribute' => 'description', 'like' => '%yes%')
                              ));
$collection->load(true); // To dump the sql as text 
```

这导致以下输出：

```
SELECT `e`.*, IF(at_name.value_id > 0, at_name.value, at_name_default.value) AS `name`, IF(at_description.value_id > 0, at_description.value, at_description_default.value) AS `description` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_product_entity_varchar` AS `at_name_default` ON (`at_name_default`.`entity_id` = `e`.`entity_id`) AND (`at_name_default`.`attribute_id` = '96') AND `at_name_default`.`store_id` = 0 LEFT JOIN `catalog_product_entity_varchar` AS `at_name` ON (`at_name`.`entity_id` = `e`.`entity_id`) AND (`at_name`.`attribute_id` = '96') AND (`at_name`.`store_id` = 1) INNER JOIN `catalog_product_entity_text` AS `at_description_default` ON (`at_description_default`.`entity_id` = `e`.`entity_id`) AND (`at_description_default`.`attribute_id` = '97') AND `at_description_default`.`store_id` = 0 LEFT JOIN `catalog_product_entity_text` AS `at_description` ON (`at_description`.`entity_id` = `e`.`entity_id`) AND (`at_description`.`attribute_id` = '97') AND (`at_description`.`store_id` = 1) 
WHERE ((IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%blah%') OR (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%yes%')) AND ((IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%blah%') OR (IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%yes%')) 
```

您会注意到该`WHERE`语句几乎与您描述它的位置相同，除了`OR`and`AND`被颠倒了。

我复制了`WHERE`查询的一部分，并在集合中添加了一个额外的`getSelect()->where()`行，如下所示：

```
$collection = Mage::getModel('catalog/product')->getCollection();

// I added these lines to ensure that the collection would load 
// the fields and do the necessary joins to pull the data
$collection->addFieldToFilter('name');          
$collection->addFieldToFilter('description');

// I'm using the same WHERE statement but I have set the ANDs and ORs
// to match your requirements

$collection->getSelect()->where(" (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%blah%') AND (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%yes%')) OR ((IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%blah%') AND (IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%yes%')");

$collection->load(true); // To dump the sql as text again 
```

结果输出是：

```
SELECT `e`.*, IF(at_name.value_id > 0, at_name.value, at_name_default.value) AS `name`, IF(at_description.value_id > 0, at_description.value, at_description_default.value) AS `description` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_product_entity_varchar` AS `at_name_default` ON (`at_name_default`.`entity_id` = `e`.`entity_id`) AND (`at_name_default`.`attribute_id` = '96') AND `at_name_default`.`store_id` = 0 LEFT JOIN `catalog_product_entity_varchar` AS `at_name` ON (`at_name`.`entity_id` = `e`.`entity_id`) AND (`at_name`.`attribute_id` = '96') AND (`at_name`.`store_id` = 1) INNER JOIN `catalog_product_entity_text` AS `at_description_default` ON (`at_description_default`.`entity_id` = `e`.`entity_id`) AND (`at_description_default`.`attribute_id` = '97') AND `at_description_default`.`store_id` = 0 LEFT JOIN `catalog_product_entity_text` AS `at_description` ON (`at_description`.`entity_id` = `e`.`entity_id`) AND (`at_description`.`attribute_id` = '97') AND (`at_description`.`store_id` = 1) 
WHERE (IF(at_name.value_id > 0, at_name.value, at_name_default.value) = '') AND (IF(at_description.value_id > 0, at_description.value, at_description_default.value) = '') AND ( (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%blah%') AND (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%yes%')) OR ((IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%blah%') AND (IF(at_description.value_id > 0, at_description.value, at_description_default.value) LIKE '%yes%')) 
```

`where()`中的可以`getSelect()`缩短为：

```
(`name` like '%blah%' and `name` like '%yes%') or (`description` like '%blah%' and `description` like '%yes%'); 
```

如果我对此过于偏离基础，或者如果您知道不使用此方法实现相同目标的方法，请随时纠正我的任何其他 Magento 人。

嗯！

# c# - 比较字符串长度和字符串值的区别

> ID：15040533
> 
> 赞同：0
> 
> 时间：2013-02-23T12:29:00.353
> 
> 标签：c#, string, if-statement, console-application

```
namespace ProgrammingTesting
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Please enter the input");

            string input1 = Console.ReadLine();
            if (input1 == "4")
            {
                Console.WriteLine("You are a winnere");
                Console.ReadLine();
            }
            else if (input1.Length < 4)
            {
                Console.WriteLine("TOOOOO high");

            }
            else if (input1.Length > 4)
            {
                Console.WriteLine("TOOOO Low");
                                Console.ReadLine();
            }       
        }
    }
} 
```

如果我输入一个小于 4 的数字，为什么程序不输出“太低”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T12:30:48.080

您不是在比较值，而是在比较输入的长度。您还需要将输入从字符串转换为整数。例如：

```
if (int.Parse(input1) < 4) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:36:38.200

input1 是一个字符串。

input1.Length 是字符串的长度。

您想在比较之前将字符串转换为数值。

您还需要查看小于和大于方向。

```
Console.WriteLine("Please enter the input");

string input1 = Console.ReadLine();
int number;
bool valid = int.TryParse(out number);

if (! valid)
{
    Console.WriteLine("Entered value is not a number");
}
else
{

    if (number == 4)
    {
        Console.WriteLine("You are a winnere");
    }
    else if (number > 4)
    {
        Console.WriteLine("TOOOOO high");
    }
    else if (number < 4)
    {
        Console.WriteLine("TOOOO Low");
    }
}

Console.ReadLine(); 
```

# visual-studio - 解决在Visual Studio 2012右键菜单中找不到使用。如何添加？

> ID：15040536
> 
> 赞同：2
> 
> 时间：2013-02-23T12:29:17.807
> 
> 标签：visual-studio

![Visual Studio 2008 右键菜单](../Images/fdc4b0083c244ebaf0f5339acd8a5c78.png)

此图像来自 Visual Studio 2008，但此菜单不包含在 Visual Studio 2012 中。**如何在 Visual Studio 2012 中启用此解决菜单。？**

无论如何，在没有该菜单选项的情况下添加程序集引用的任何其他解决方案对我来说都是可以接受的。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T08:22:14.163

仅当您右键单击可解析类型时，该`Resolve`项目才会出现在上下文菜单中。

从`Resolve`子菜单中选择一个项目**不会**为您添加装配参考。事实上，必须已经添加了对定义您希望解析的类型的程序集的引用，才能显示解析菜单。该`Resolve`命令将为您做的就是插入适当的`using`语句或完全限定的类型名称。

因此，没有出现解析菜单的最可能原因是 VS 不知道如何解析您单击的名称，因为它不是您项目当前引用的任何程序集中的类型名称。

VS 无法识别您单击的名称是可解析类型的另一个原因是它是否也是当前范围内的命名空间的名称。这个在过去让我摸不着头脑。

# actionscript-3 - 如何在 Adob e Flash 中添加乐谱和计时器

> ID：15040538
> 
> 赞同：0
> 
> 时间：2013-02-23T12:29:22.480
> 
> 标签：actionscript-3

大家好，我是动作脚本编程的新手，我找不到正确的方法。

我需要在这个游戏中有一个分数和计时器>>> [http://www.filedropper.com/eggrun](http://www.filedropper.com/eggrun)

它应该有用于添加分数的硬币和用于游戏时间的倒数计时器。

请帮帮我:(

我离做到这一点还差得很远。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:10:22.537

一些代码会有所帮助。但是要制作一个简单的倒数计时器，试试这个！我假设你在“时间轴”上编码

```
var count:Number = 60; //Count down from 60

var myTimer:Timer = new Timer(1000,count);// Timer intervall in ms

myTimer.addEventListener(TimerEvent.TIMER, countdown);//EventListener for intervalls
myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, countdownComplete);
myTimer.start();//start Timer

function countdown(event:TimerEvent):void {
countDownTextField.text = String((count)-myTimer.currentCount); 
//Display Time in a textfield on stage, 
//i'll call it countDownTextField. U will have to create it first
}

function countdownComplete(event:TimerEvent):void {
   // fires when the countdown is finished
   removeEventListener(Event.ENTER_FRAME,onenter);//stops the game
   addChild(scoreScreen); //You have to create a Sprite or MovieClip with a TextField
   scoreScreen.scoreText.text = score.toString() // and then assign the score to the textField
//to start the game again just remove the scoreScreen and call the init() function
   myTimer.removeEventListener(TimerEvent.TIMER, countdown);//remove listers
   myTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, countdownComplete);

} 
```

如果你需要一个定时器完成的方法，添加一个 TimerEvent.TIMER_COMPLETE 监听器！

请解释你的意思

> 它应该有用于添加分数的硬币

处理分数的最佳方法是使用函数

```
var score:int = 0;
function updateScore(addScore:int):void{
    score += addScore;

} 
```

然后只要你需要像这样更新分数就调用它

```
updateScore(10);// adds 10 to the score 
```

# image - 流体图像的最大宽度和最大高度在 IE10 中不起作用

> ID：15040542
> 
> 赞同：0
> 
> 时间：2013-02-23T12:29:46.257
> 
> 标签：image, responsive-design, internet-explorer-10, css

我正在尝试在我的网站上进行半响应式设计。为此，我使用百分比作为除页面包装器以外的所有内容的宽度和高度，我在其中设置了`max-width`像素。

我还在我的图片`max-width`上设置`max-height`了 100%，这样当人们减小浏览器的大小时，图片和其他内容也会随之变化。这在 Chrome 中按预期工作，但在 IE10 中却没有。据我所知，只有当我将图片放在 div 中时`display: table-cell`

没有 div 中的图片，div 会根据窗口大小增加或减少，就像在 IE 和 Chrome 中一样。但是当我放入带有 的图像时`style="max-width: 100%; max-height: 100%;"`，它不会缩放，至少在 IE 中不会。

这是一个错误，还是按预期工作。有什么我能做的吗？:)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-13T19:40:51.077

This IS a bug in IE...but you can often fix it by making the table container have a table-layout attribute equal to 'fixed'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T20:59:25.427

在页面顶部添加 !DOCTYPE 以获得在 IE 中工作的 max-width 和 max-height，例如：< !DOCTYPE html public "-//W3C//DTD HTML 4.0 Strict//en" >

[http://msdn.microsoft.com/en-us/library/ie/ms530811(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms530811(v=vs.85).aspx)

# tolua++ - Tolua++ 和 __tostring

> ID：15040552
> 
> 赞同：2
> 
> 时间：2013-02-23T12:30:55.677
> 
> 标签：tolua++

这里有人可以帮助我使用 tolua++ 和 __tostring 吗？

如果我尝试在从 C++ 对象绑定的 Lua 对象的元表上设置 __tostring 属性，我会崩溃。

例如

```
local x = foo.new() -- foo bound from tolua++
getmetatable(x).__tostring = function(t) end 
```

...导致崩溃。

似乎设置已经存在的元表函数，如 __eq，是可以的......而设置一个尚不存在的函数，如 __tostring 或 'foobar' 会导致崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:51:31.627

我想我已经找到了解决自己问题的方法...

我可以使用 tolua 从我的 C++ 基类中简单地绑定一个名为“__tostring”的函数。然后它出现在类元表上，如果打印该类的对象，则从 Lua 调用（如预期的那样）。

此外，我可以毫无问题地替换 Lua 端的函数（例如使用 getmetatable(foo).__tostring = somenewfunction）。

如果 __tostring 函数未明确绑定 usi，我仍然想知道为什么会发生崩溃

# javascript - “清除”对象是避免使用 hasOwnProperty 的可行方法吗？

> ID：15040556
> 
> 赞同：1
> 
> 时间：2013-02-23T12:31:14.960
> 
> 标签：javascript, object, hasownproperty

我理解为什么 hasOwnProperty 是必要的，即使一个对象可以完全控制，因为 Object.prototype 可能已被修改。但是，如果我真的想避免它，请考虑一下：

```
function CleanObject() {
    var result = {};
    for (var key in result) {
        delete result[key];
    }
    return result;
}

// Later...

var obj = CleanObject();
for (var key in obj) {
    // No hasOwnProperty check necessary
} 
```

换句话说，我在使用它之前清除了属性的实例。这应该有效，还是我错过了一些极端情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-10T19:54:02.787

您还可以使用作为参数`Object.create()`传入的语法创建一个没有属性的“干净”对象。`null`

例子：

```
var clean = Object.create(null);

for(var key in clean) {
 //do stuff no hasOwnProperties required
} 
```

# asp.net - 天蓝色网站的生命周期

> ID：15040559
> 
> 赞同：2
> 
> 时间：2013-02-23T12:31:21.897
> 
> 标签：asp.net, iis, azure, web

我想知道 Azure 网站的生命周期——具体来说：
1\. Azure 网站在部署后会立即自动启动（global.asax application_start fire）吗？还是需要外部刺激——http 请求？
2\. 如何以及何时回收？
3.回收后是自动启动（全局application_start fire）还是需要外部刺激。

实际上，我需要一个小的后台作业（它还与某些传入的 http 请求交互），我计划在启动时调用它。我知道它可以在工作人员/网络角色中完成，但我喜欢 Azure 网站的即时部署。

PS。我计划为 azure 网站使用预留实例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:40:22.443

不，Windows Azure 网站在部署后不会自动启动网站。最重要的是，从网站实际创建到您将内容放入其中的时间非常长。我通过创建 Azure 网站并向其部署 MVC 4 应用程序来验证这一点。该应用程序在全局应用程序启动时设置了一个全局变量，其中包含当前日期时间，然后在默认控制器上输出该日期时间和服务器上的当前日期时间。我在部署代码后等待了几分钟，然后调用了该页面。这两次几乎相同，这意味着应用程序在控制器之前启动。如果在我部署时有什么东西启动了应用程序，那么这些时间将被我等待的时间所抵消。

由于它不会在部署后立即启动，因此您需要一些外部刺激才能这样做。

该站点可能会因为空闲 5 分钟到 20 分钟而关闭，具体取决于服务器的繁忙程度，即使在我相信的保留实例上也是如此。如果发生这种情况，下一个请求将通过在服务器上创建一个新的 IIS 进程来重新启动它。发生这种情况时，它不会立即重新启动站点，而是等待请求进入。当然，您可以使用 pingdom 甚至 Windows Azure Mobile Services Scheduler 之类的服务来持续向您的站点发送请求以让它活着。

您提到了一项后台工作，我想知道您是否真的可以通过网站轻松地做到这一点。如果您使用新流程启动它，我不确定这是否会起作用，并且如果您在同一流程中使用新线程执行此操作，那么您仍然会遇到相同的问题，即该站点可能会停止使用它来完成这项工作。

在谈论与某些传入请求交互的后台作业时，我不确定您的目标是什么，所以我不能说太多。如果后台作业将在计时器上运行，那么您可以使用诸如移动服务调度程序之类的东西按计划发送请求，以便您的代码做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T17:53:26.183

实际上，在 #1 上，如果您设置 AlwaysOn 设置，该站点可以自动启动，该设置实质上是模拟到您的应用程序的 HTTP 流量，以保持其工作进程正常运行并让您的应用程序预热。[您可以在文档页面](https://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/)上阅读有关该设置的更多信息。

# c# - 不同的方法重复数据

> ID：15040561
> 
> 赞同：-1
> 
> 时间：2013-02-23T12:31:50.750
> 
> 标签：c#, asp.net, linq, datatable, distinct

使用以下内容时，我得到重复的行：

```
 DataTable dt = list.AsEnumerable().Distinct().CopyToDataTable(); 
```

为什么`Distinct()`不起作用？

* * *

我的数据表结构：

```
serial,doc_content,doc_name,selected
int   ,Byte[]     ,string  ,int 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:36:38.060

您正在调用`Distinct()`一系列数据行。我不相信`DataRow`overrides `Equals`，所以任何两个`DataRow`对象都会比较为不相等。

您需要先将`IEqualityComparer<DataRow>`to`Distinct()`或 project 传递给另一种类型（例如，匿名类型，它已经实现了相等比较）并调用`Distinct()`新序列。

如果您想继续使用`DataRow`，实现相等比较器可能是最简单的。尽管*看起来*很有希望（我以前不知道），但由于该领域，它*可能*不适用于您的特定情况。[`DataRowComparer.Default`](http://msdn.microsoft.com/en-us/library/system.data.datarowcomparer.default.aspx) **`byte[]`**

 **就我个人而言，我喜欢尽快将数据转换为更具体的类型，但 YMMV。请注意，如果您将整个项目投影`DataTable`到更具体的类型，则可以将`Select`部分编写为`Where`子句：

```
var list = table.AsEnumerable()
     .Select(row => new { Serial = row.Field<string>("serial"),
                          ContentBase64 = Convert.ToBase64String(row.Field<byte>("doc_content")),
                          Name = row.Field<string>("doc_name"),
                          Selected = row.Field<int>("selected") })
     .Where(x => x.Selected == 1)
     .Distinct()
     .ToList(); 
```

请注意，我将内容转换为 base64 字符串，以便平等比较可以简单地工作。这不是最有效的方法，但很*容易*:) 如果您不需要内容，您可以摆脱那部分投影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:38:19.790

`Distinct`将比较对象引用，因为`DataRow`不会覆盖默认值`Equals`和`GetHashCode`方法 from`object`以考虑存储在行中的值。

有一个[Enumerable.Distinct](http://msdn.microsoft.com/en-gb/library/bb338049.aspx)的重载，它允许您指定自己的相等比较器，并且有一个[DataRowComparer](http://msdn.microsoft.com/en-us/library/bb337583.aspx)类实现所需的`IEqualityComparer<DataRow>`接口。

然后你可以像这样使用它：

```
var distinct = list.AsEnumerable()
    .Distinct(DataRowComparer.Default)
    .CopyToDataTable(); 
```**

# c# - C＃。NPOI 2.0 将 xlsx 日期单元格导入 DataTable

> ID：15040567
> 
> 赞同：4
> 
> 时间：2013-02-23T12:32:46.627
> 
> 标签：c#, excel, apache-poi, xlsx, npoi

我尝试使用 NPOI 2.0 库将 .xlsx 文件转换为 DataTable 格式。没关系，但是我在转换为字符串日期单元格时遇到了问题。当我尝试使用 row.GetCell(j).ToString() 之类的构造时，它会抛出异常“无法从文本单元格中获取数值”。我尝试使用 DateCellValue 属性，但它也抛出了这个异常。使用其他单元格格式效果很好。功能，我使用它是：

```
private DataTable xlsxToDT(string fileName)
    {
        DataTable table = new DataTable();
        XSSFWorkbook workbook = new XSSFWorkbook(new FileStream(fileName, FileMode.Open, FileAccess.Read));
        ISheet sheet = workbook.GetSheetAt(0);
        IRow headerRow = sheet.GetRow(0);
        int cellCount = headerRow.LastCellNum;
        for (int i = headerRow.FirstCellNum; i < cellCount; i++)
        {
            DataColumn column = new DataColumn(headerRow.GetCell(i).StringCellValue);
            table.Columns.Add(column);
        }
        int rowCount = sheet.LastRowNum;
        for (int i = (sheet.FirstRowNum); i < sheet.LastRowNum; i++)
        {
            IRow row = sheet.GetRow(i);
            DataRow dataRow = table.NewRow();
            for (int j = row.FirstCellNum; j < cellCount; j++)
            {
                if (row.GetCell(j) != null)
                {
                    //EXCEPTION GENERATING IN THIS CODE
                    dataRow[j] = row.GetCell(j).ToString();
                    ////////////////////////////
                }
            }
            table.Rows.Add(dataRow);
        }
        workbook = null;
        sheet = null;
        return table;
    } 
```

更新：如果我插入代码

```
row.GetCell(j).SetCellType(CellType.STRING); 
```

在问题单元格中，我的值类似于“36496.392581018517”。另一个单元格正确转换

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:34:20.310

Excel 文件的第二列具有日期格式 ( `12/2/1999`)。NPOI 在您当前的文化（“ru-RU”）中无法识别此格式。这似乎是 NPOI 中的一个错误，因为当这种情况发生时，无法从该单元格中读取任何内容。我想到的唯一方法是在读取 excel 文件之前更改线程的文化（并在之后将其更改回来）：

```
private DataTable xlsxToDT(string fileName)
{
    var prevCulture = Thread.CurrentThread.CurrentCulture;
    Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;
    try
    {
        // Put your whole method body here.
    }
    finally
    {
        Thread.CurrentThread.CurrentCulture = prevCulture;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-02T02:01:01.067

```
ICell cell = row.GetCell(j);
if (cell != null)
{
    switch (cell.CellType)
    {
        case CellType.String:
            dataRow[j] = cell.StringCellValue;
            break;
        case CellType.Numeric:
            dataRow[j] = cell.NumericCellValue;
            break;
        case CellType.Boolean:
            dataRow[j] = cell.BooleanCellValue;
            break;
        default: dataRow[j] = "ERROR";
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-29T08:43:09.207

我的解决方案是像这样创建函数 getValue

```
FileStream fs = new FileStream(@"\export.xlsx", FileMode.Open);
XSSFWorkbook wb = new XSSFWorkbook(fs);
ISheet sheet = wb.GetSheetAt(0);
// GetValue here
string text = getValueFromCell(sheet.GetRow(row).GetCell(1));

public string getValueFromCell(ICell cell) {
            string output ="";
            if (cell != null)
            {
                switch (cell.CellType)
                {
                    case CellType.String:
                        output = cell.StringCellValue;
                        break;
                    case CellType.Numeric:
                        //dataRow[j] = cell.NumericCellValue;
                        output = cell.NumericCellValue.ToString();
                        break;
                    case CellType.Boolean:
                        output = cell.BooleanCellValue.ToString();
                        //dataRow[j] = cell.BooleanCellValue;
                        break;
                    default:
                        output = "";
                        break;
                }
            }
            return output;
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-14T10:31:38.867

这是 xls 的正确代码

```
public DataTable GetDataTableFromExcelFile(string excel_file_Path)
{
    HSSFWorkbook wb;
    NPOI.SS.UserModel.ISheet sh;
    string Sheet_name;

    using (var fs = new FileStream(excel_file_Path, FileMode.Open, FileAccess.Read))
    {
        wb = new HSSFWorkbook(fs);

        Sheet_name = wb.GetSheetAt(0).SheetName;  //get first sheet name
    }
    DataTable DT = new DataTable();
    DT.Rows.Clear();
    DT.Columns.Clear();

    // get sheet
    sh = wb.GetSheet(Sheet_name);

    // add neccessary columns
    if (DT.Columns.Count < sh.GetRow(0).Cells.Count)
    {
        for (int j = 0; j < sh.GetRow(0).Cells.Count; j++)
        {
            DT.Columns.Add(Convert.ToString(sh.GetRow(0).Cells[j]), typeof(string));
        }
    }

    // add row
    DT.Rows.Add();

    int i = 1;
    while (sh.GetRow(i) != null)
    {
        // write row value
        for (int j = 0; j < sh.GetRow(i).Cells.Count; j++)
        {
            var cell = sh.GetRow(i).GetCell(j);

            if (cell != null)
            {
                // TODO: you can add more cell types capatibility, e. g. formula
                switch (cell.CellType)
                {
                    case CellType.Numeric:
                        DT.Rows[i][j] = sh.GetRow(i).GetCell(j).NumericCellValue;
                        //dataGridView1[j, i].Value = sh.GetRow(i).GetCell(j).NumericCellValue;

                        break;
                    case CellType.String:
                        DT.Rows[i-1][j] = sh.GetRow(i).GetCell(j).StringCellValue;

                        break;
                }
            }
        }

        i++;
    }

    return DT;
} 
```

# rpm - Yum 没有计算整个依赖树

> ID：15040568
> 
> 赞同：1
> 
> 时间：2013-02-23T12:32:50.670
> 
> 标签：rpm, yum

假设我有一小组这样的 rpm 依赖项：

```
 A
 / \
B ->C 
```

所以A需要B和C，B需要C，C是孤独的。

在 rpm 中，我可以指定这些依赖项，当我安装 A 时，它也会安装 B 和 C，但是它似乎以某种随机顺序执行，有时它会先执行 B，有时会执行 C。如果它先执行 B，我们可能会得到一个错误，因为 C 还不存在。

所以 RPM 让我能够设置订单。但是如果我的图表不是那么简单呢？如果它的 200 rpms 具有迷宫般的依赖关系都植根于顶级主包怎么办？让开发人员需要手动管理订单似乎是徒劳的。

有没有办法强制 yum 计算整棵树并首先从最低的叶子开始安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:04:08.250

通常，所需的包是运行时库等，因此顺序不太重要。但是`Requires`标签有一个较少使用的选项，您可以在其中说明您是否真的需要其他 RPM 用于您的`%pre`舞台 - 很简单`Requires(pre)`。

但是，在使用它时，如果您也没有“常规” ，则[*可以*稍后删除](http://www.rpm.org/wiki/PackagerDocs/Dependencies)`Requires`依赖的 RPM ！

# php - 组成的 mysql 查询工作，但如果在 mysqli 中参数化不工作

> ID：15040569
> 
> 赞同：0
> 
> 时间：2013-02-23T12:32:52.167
> 
> 标签：php, mysqli, sql-parametrized-query

我有一个包含 3 个术语（搜索参数、邮政编码和活动类型）的搜索页面

我做了一个函数来编写sql：（这不是真正的函数，只是一个简化的函数）。您可以将它与要过滤的参数一起使用，也可以不使用参数来获取所有参数。

```
function get_items($search="",$postal_code="",$activity=""){
global $db; //this is the $db=new mysqli(...) in other include file
$where="";
if ($s!=""){
    $s="%".$search."%";
    $where=" AND ((item.name like '".$s."') OR (item.description like '".$s."'))";
}
if($postal_code!=""){
    if (strlen($postal_code)==5){
         $where=" AND (item.postal_code like '".$postal_code."')";
    }
}

if($activity!=""){
    if (m_is_integer($postal_code)){ //m_is_integer returns true if is an integer
         $where=" AND (item.activity =".$activity.")";
    }
}
$sql="select ....... from -..... where .....".$where." order by ......"
//yes, I know I don't need to prepare the query 
$stmt=$db->prepare($sql); 
$result=$stmt->execute();
$stmt->store_result();
$item_array=Array();
if (($result!=false) && ($stmt->num_rows>0)){
     //do things and populate the array $item_array
}
$stmt->close();
return $item_array;
} 
```

此函数有效，sql 是正确组合的，您输入任何参数或不输入任何参数并返回一个项目数组。

我想进行参数化查询，这是我的方法：

```
function get_items_parametrized($search="",$postal_code="",$activity=""){
global $db; //this is the $db=new mysqli(...) in other include file
$where="";
$bind_array=Array();
if ($s!=""){
    $s="%".$search."%";
    $where=" AND ((item.name like ?) OR (item.description like ?))";
    $bii=Array("s",$s);
    $bind_array[]=$bii;
    $bii=Array("s",$s);
    $bind_array[]=$bii;
}
if($postal_code!=""){
    if (strlen($postal_code)==5){
         $where=" AND (item.postal_code like ?)";
         $bii=Array("s",$postal_code); //yes, is a string in the database
         $bind_array[]=$bii;
    }
}

if($activity!=""){
    if (m_is_integer($postal_code)){ //m_is_integer returns true if is an integer
         $where=" AND (item.activity = ?)";
         $bii=Array("i",$activity);
         $bind_array[]=$bii;
    }
}
$sql="select ....... from -..... where .....".$where." order by ......"
$stmt=$db->prepare($sql);
//go to bind data to search
$bind_type="";
$bind_params=Array();

foreach($bind_array as $b){
    $bind_type.=$b[0];
    $bind_params[]=$b[1];
    /* Approach 1: */
    $stmt->bind_param($b[0],$b[1]); 
}
/* Approach 2: */
$stmt->bind_param($bind_type,$bind_params); 
$result=$stmt->execute();
$stmt->store_result();
$item_array=Array();
if (($result!=false) && ($stmt->num_rows>0)){
     //do things and populate the array $item_array
}
$stmt->close();
return $item_array;
} 
```

这个函数总是返回一个空的 $item_array Array () 而不是 Array(Array(),Array()) 如果我不绑定结果是可能的，执行不会返回任何结果。

我也尝试过：

```
/* attempt 3 */
$data=Array();
$data[0]="";
foreach($bind_array as $b){
    $data[]=$b1;
    $bind_type.=$b[0];
}
$data[0]=$bind_type; 
```

要组成一个像 ('ssi',$s,$postal_code,$activity) 这样的数组来调用 call_user_func_array()：

```
call_user_func_array(array(&$stmt, 'bind_param'), $data); 
```

我也尝试：

```
call_user_func_array(array($stmt, 'bind_param'), $data); 
```

而且这种方法仍然没有返回任何数据。

我现在可以尝试什么使其与参数化查询一起使用？

欢迎任何帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:18:30.403

答案很简单：**不要将 mysqli**与准备好的语句一起使用。
它不适用于准备好的语句。
**请改用 PDO**。
这**就是**答案。Mysqli 是你的问题，你必须解决它。

使用 PDO，您的代码将缩短 3 倍并且可以正常工作。

如果您想坚持使用 mysqli，另一种方法是摆脱准备好的语句并实现自己的占位符，但需要一些知识。但是，它可以让您更轻松地构建条件查询：

```
$w = array();
$where = '';
if ($one) $w[] = $db->parse("one = ?s",$one); 
if ($two) $w[] = $db->parse("two IN (?a)",$two);
if ($tre) $w[] = $db->parse("tre <= ?i",$tre);
if (count($w)) $where = "WHERE ".implode(' AND ',$w);
$data = $db->getArr("SELECT * FROM table ?p LIMIT ?i,?i",$where, $start,$per_page); 
```

# objective-c - 为什么我导出的 Mac 应用程序无法与 Leap Motion 通信？

> ID：15040571
> 
> 赞同：1
> 
> 时间：2013-02-23T12:33:03.597
> 
> 标签：objective-c, xcode, macos, leap-motion

我有一个使用 libLeap.dylib 库的 Leap Motion Mac 应用程序。在 Xcode 中运行时，我的项目运行良好，但是当我导出我的应用程序时它运行（在控制台中我看到一切正常），除了我没有从我的 Leap Motion 获得任何值。

我想也许图书馆没有链接或类似的东西。我对 Mac 应用程序开发还很陌生。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:37:11.197

造成这种情况的一个常见原因是沙盒。如果您的 Mac 应用程序在导出时被沙盒化，您需要确保在沙盒权限的网络部分下启用“允许传出连接”。

Leap 客户端通过网络连接与您的 Mac 应用程序通信，因此您必须确保您的沙盒应用程序允许此连接。否则，您的应用程序将无法连接到 Leap 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T07:06:40.737

您是否添加了副本文件构建阶段`libLeap.dylib`？

在编写我的应用程序时，我能够在调试模式下运行，但在归档后它由于缺少 dylib 而在启动时崩溃......

# oracle - 如何在为该表创建游标之前将值插入表中？

> ID：15040572
> 
> 赞同：-2
> 
> 时间：2013-02-23T12:33:04.843
> 
> 标签：oracle, plsql

```
DECLARE
   today       DATE;
   yesterday   DATE;
   traffic     NUMBER;

   CURSOR c1
   IS
      SELECT dt, traffic
        FROM traffic_diff;
BEGIN
   OPEN c1;

   FETCH c1
    INTO today, traffic;

   INSERT
   CLOSE c1;
END;
/ 
```

请建议如何将值插入表中。在创建光标之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:20:55.850

尝试这个 ：-

```
DECLARE
   today       DATE;
   yesterday   DATE;
   traffic     NUMBER;

   CURSOR c1
   IS
      SELECT dt, traffic
        FROM traffic_diff;
BEGIN

   insert into traffic_diff(dt,traffic) values(val1,val2);
   commit;

   OPEN c1;

   FETCH c1
    INTO today, traffic;

   CLOSE c1;
END;
/ 
```

# wpf - “TemplatedParent 模板属性”在依赖属性优先级中是什么意思

> ID：15040575
> 
> 赞同：0
> 
> 时间：2013-02-23T12:33:51.987
> 
> 标签：wpf, dependency-properties, controltemplate

我是 WPF 的新手，如果我的问题听起来很愚蠢，请原谅我。

如[依赖属性值的来源列表中](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)所述，对于第 4 点，“TemplatedParent 模板属性”是什么意思？

例如，如果我创建一个按钮，该按钮具有针对其“模板”属性定义的控制模板。这个“模板”是链接第4点的意思吗？或者它意味着在控件中创建的子控件的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:29:17.620

TemplatedParent 是指应用模板的 Control 实例。您可以使用 TemplatedParent 绑定到在该对象（及其基类）上声明的属性。这有助于理解[TemplateBinding Vs TemplatedParent](https://stackoverflow.com/questions/1131222/wpf-templatebinding-vs-relativesource-templatedparent)

# jquery - jQuery点击甚至在Firefox中

> ID：15040576
> 
> 赞同：0
> 
> 时间：2013-02-23T12:34:07.140
> 
> 标签：jquery, css, firefox, click

我在 Firefox 中遇到了 jQuery click 事件的问题-

```
$('div#return-menu').click(function () {
    hidePainting();
    alert();
}); 
```

这应该显示带有 hidePainting() 的菜单；方法，但它甚至不会触发，因为 alert() 没有触发。

以高 z-index 将 div#return-menu 置于最前面，并尝试确保没有其他元素覆盖它，但这些都没有解决问题。

我观察到的是 div#return-menu 中的文本不会在鼠标悬停时显示 I-beam 指针，但是当我将元素放在菜单上（我不想要它的地方）并且单击时它会触发成功了，在 Chrome 中也是如此。

这是其他人看到或知道的问题吗？这是一个令人沮丧的小但令人衰弱的问题。如果有帮助，我可以发布更多信息代码或回答问题。

提前致谢，

缺口

# php - 在 PHP 中按 4 个键或列对数组进行排序

> ID：15040581
> 
> 赞同：0
> 
> 时间：2013-02-23T12:34:46.297
> 
> 标签：php, arrays, sorting

我正在尝试使用 array_multisort() 对数组进行排序，但它似乎只对第一列进行排序。我希望它按 4 列排序。这是我的功能。

```
function array_sort_by_column(&$arr, $col, $col2, $col3, $col4, $dir = SORT_DESC) {
    foreach ($arr as $key => $row) {
        $sort_col[$key] = $row[$col];
        $sort_col2[$key] = $row[$col2];
        $sort_col3[$key] = $row[$col3];
        $sort_col4[$key] = $row[$col4];
    }
    array_multisort($sort_col, $dir, $sort_col2, $dir, $sort_col3, $dir, $sort_col4, $dir, $arr);
} 
```

这里的输入是一个二维数组，如 $arr，然后是我想要排序的列名，如 $col1、$col2、$col3 和 $col4。

**编辑：**对不起，我的意思是二维数组

样本：

```
$arr = array(
    0 => array(
        'group_id' => '1',
        'points' => '5',
        'rank' => '10',
        'diff' => '1'
    ),
    1 => array(
        'group_id' => '1',
        'points' => '1',
        'rank' => '2',
        'diff' => '4'
    ),
    2 => array(
        'group_id' => '2',
        'points' => '1',
        'rank' => '1',
        'diff' => '2'
    ),
    3 => array(
        'group_id' => '2',
        'points' => '9',
        'rank' => '0',
        'diff' => '-11'
    ),
);

array_sort_by_column($arr, 'group_id', 'points', 'rank', 'diff'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:48:44.853

正如 Barmar 所指出的，您将需要使用[usort](http://php.net/manual/en/function.usort.php)。您应该将所有排序功能放在一个函数或类方法中：

```
public function sort($a, $b) 
{
    $key = $this->sort_key;
    $asc = $this->sort_asc;

    if (gettype($a[$key]) == 'integer') {
        if ($a[$key] == $b[$key]) return 0;
        if ($asc == 'asc') {
            return ($a[$key] < $b[$key]) ? -1 : 1;
        } elseif ($asc == 'desc') {
            return ($a[$key] > $b[$key]) ? -1 : 1;
        }
    } elseif (gettype($a[$key]) == 'string') {

        $valA = preg_replace("/[^A-Za-z0-9]/", "", strtolower($a[$key]));
        $valB = preg_replace("/[^A-Za-z0-9]/", "", strtolower($b[$key]));

        if ($asc == 'asc') {
            return strcmp($valA, $valB);
        } elseif ($asc == 'desc') {
            return strcmp($valB, $valA);
        }
    }   
} 
```

并像这样调用它：

```
$this->sort_key = 'group_id';
$this->sort_asc = 'asc';
usort($array, array($this, 'sort')); 
```

你需要确保你在[课堂](http://www.php.net/manual/en/language.oop5.basic.php)上。上述方法还允许您对字符串值进行排序，而不仅仅是整数（即您可以在将来重新使用它）。

# java - JPA和Hibernate注解的关系

> ID：15040583
> 
> 赞同：8
> 
> 时间：2013-02-23T12:35:14.423
> 
> 标签：java, spring, hibernate, jpa, spring-mvc

我是 Spring 世界的新手，我正在研究如何集成 Hibernate 和 Spring 框架

我对 Hibernate 注释和 JPA 注释之间的关系有一些疑问。

当我有类似以下实体类的东西时：

```
package org.andrea.myexample.HibernateOnSpring.entity;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

/* Classe che rappresenta un oggetto da persistere sul database
 * 
 */
@Entity
@Table(name="person")
public class Person {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int pid;

    private String firstname;

    private String lastname;

    public int getPid() {
        return pid;
    }

    public void setPid(int pid) {
        this.pid = pid;
    }

    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }
} 
```

我不明白的是Hibernate注释和JPA注释之间的关系是什么

上例中使用的注解**@Entity**、**@Table(name="person")**、**@GeneratedValue(strategy=GenerationType.AUTO)**和**id**是简单的 JPA 注解还是 Hibernate 的特定注解？

如果我使用 JPA 注释将数据持久保存到数据库中，是什么给了我 Hibernate？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-23T12:45:57.117

答案好坏参半。

正如其他人所指出的，JPA 是 Hibernate 提供的一种实现规范。您使用 JPA 注释/API，并且通过在类路径中包含 Hibernate jar，Hibernate 将提供实际逻辑。

此外，Hibernate 提供了一个与 JPA 无关的 API。你也可以使用它；主要区别在于：

*   如果您使用 JPA API，您可以稍后用其他 JPA 实现（vg EclipseLink）替换 Hibernate，您将不需要更改您的程序

*   如果您直接使用 Hibernate API，则没有实现替代方案。优点可能是您可以使用 Hibernate 已定义但不属于 JPA 标准的功能，这可能对您有用。

无论如何，您应该完全避免将 JPA 与 Hibernate API 混合使用。作为初学者，我建议您坚持使用 JPA。

为确保您使用的是 JPA，请仅包含来自`java.persistence`. 不要包含任何来自`org.hibernate`（或者，如果您只想使用 Hibernate，则相反）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T12:38:32.467

Hibernate 是 JPA 规范的一个实现。JPA 只是一个规范，以及一组注释和接口。你需要一个 JPA 的实现来使用它，Hibernate 就是其中之一。就像使用 JDBC 一样，您需要一个数据库驱动程序。

注释的包是`javax.persistence`，所以它们是 JPA 注释。Hibernate 注释在包中`org.hibernate.xxx`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T05:41:20.637

就像@SJuan76 所说，JPA（Java Persistence API）是一种规范，而 Hibernate 是一种实现。我同意其他人; 尽可能多地使用纯 JPA。JPA 规范不会经常更改，而且当它发生更改时，它通常是向后兼容的。这意味着您的代码将免受实施更改的影响。例如，如果您的代码不依赖于任何`org.hibernate.*`来自`javax.persistence.*`.

顺便提一句。从 Hibernate 5.3 开始，JPA 的版本为 2.2。[在此处阅读有关 JPA 的更多信息](https://en.wikipedia.org/wiki/Java_Persistence_API#JPA_2.2)

# python - 在 Django settings.py 文件中指定 STATIC_ROOT STATIC_URL 时出错

> ID：15040584
> 
> 赞同：1
> 
> 时间：2013-02-23T12:35:15.897
> 
> 标签：python, django

我是 django 和 Web 应用程序开发的新手。我正在尝试将 css 添加到我的演示站点（在 windows7 上使用 django v1.4）并收到以下错误。我已经尝试了所有，并且浪费了将近 3-4 小时。仍然无法解决它。

我想我犯了一些愚蠢的错误，任何人都可以让我知道我在哪里犯了错误。

要么当我这样做

```
http://localhost:8000/static/css.css 
```

或者

```
python manage.py collectstatic 
```

我得到：

> TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到元组

**setting.py 文件是：**

```
import os
PROJECT_PATH = os.path.abspath(os.curdir).replace('\\', '/')

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE'   : 'django.db.backends.mysql',        # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME'     : 'ecomstore',                       # Or path to database file if using sqlite3.
        'USER'     : 'vivek',                           # Not used with sqlite3.
        'PASSWORD' : 'linux',                           # Not used with sqlite3.
        'HOST'     : '',                                # Set to empty string for localhost. Not used with sqlite3.
        'PORT'     : '',                                # Set to empty string for default. Not used with sqlite3.
    }
}

TIME_ZONE     = 'America/Chicago'
LANGUAGE_CODE = 'en-us'
SITE_ID       = 1
USE_I18N      = True
USE_L10N      = True
USE_TZ        = True
MEDIA_ROOT    = ''
MEDIA_URL     = ''
STATIC_ROOT   = os.path.join(PROJECT_PATH,'static').replace('\\', '/'),
STATIC_URL    = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, 'static').replace('\\', '/'),
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

SECRET_KEY = 'dyi(9i9e*oy#7o#-z$vcnk%d$2)n!)t=3(cqo5=prtp$7e2(*h'

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'ecomstore.urls'

WSGI_APPLICATION = 'ecomstore.wsgi.application'

TEMPLATE_DIRS = (
    os.path.join(PROJECT_PATH, 'templates').replace('\\', '/'),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
)

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:51:24.220

```
STATIC_ROOT   = os.path.join(PROJECT_PATH,'static').replace('\\', '/'), 
```

删除`,`行尾的 。

# java - Java：如何查找文件中遇到的单词数？

> ID：15040586
> 
> 赞同：3
> 
> 时间：2013-02-23T12:35:18.223
> 
> 标签：java, multithreading, frequency

程序需要查找单词是否在文件中。如果此搜索成功，将显示文件中遇到单词的频率。但这不能正常工作，匹配不正确。

```
import java.util.concurrent.*;
import java.util.*;
import java.io.*;

class FolderScan implements Runnable {

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FolderScan() {
    }

    @Override
    public void run() {
        findFiles(path);
        queue.add(endOfWorkFile);
        latch.countDown();
    }

    private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if (currentFile.getName().toLowerCase().endsWith((".txt"))) {
                        queue.put(currentFile);
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

}

public class FileScan implements Runnable {

    private String whatFind;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    public FileScan(String whatFind, BlockingQueue<File> queue,
            CountDownLatch latch, File endOfWorkFile) {
        this.whatFind = whatFind;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FileScan() {
    }

    Set<String> words = new HashSet<String>();

    @Override
    public void run() {

        while (true) {
            try {
                File file;
                file = queue.take();

                if (file == endOfWorkFile) {
                    break;
                }

                scan(file);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        latch.countDown();
    }

    private void scan(File file) {
        Scanner scanner = null;
        int matches = 0;

        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            System.out.println("File Not Found.");
            e.printStackTrace();
        }

        while (scanner.hasNext()) {
            String word = scanner.next();
            words.add(word);
        }

        if (words.contains(this.whatFind)) {
            matches++;
        }

        String myStr = String.format("File: %s - and the number of matches "
                + "is: %d", file.getAbsolutePath(), matches);
        System.out.println(myStr);
    }

    // ask user about input
    public void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {

                File endOfWorkFile = new File("GameOver.tmp");
                CountDownLatch latch = new CountDownLatch(2);

                FolderScan folderScan = new FolderScan(path, queue, latch,
                        endOfWorkFile);
                FileScan fileScan = new FileScan(whatFind, queue, latch,
                        endOfWorkFile);

                Executor executor = Executors.newCachedThreadPool();
                executor.execute(folderScan);
                executor.execute(fileScan);

                latch.await();
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        } catch (InterruptedException e) {
            System.out.println("Interrupted.");
            e.printStackTrace();
        }
    }

    /**
     * @param args
     */

    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();

        new FileScan().askUserPathAndWord();

        long stopTime = System.currentTimeMillis();
        long elapsedTime = stopTime - startTime;
        System.out.println("\nRuntime time " + elapsedTime + " milliseconds.");
    }
} 
```

问题：

*   如何解决这个问题并正确组织文件中的这个发现？
*   也许更好地使用另一种逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:38:40.837

这看起来像一个问题：

```
while (scanner.hasNext()) {
    String word = scanner.next();
    words.add(word);
}

if (words.contains(this.whatFind)) {
    matches++;
} 
```

这仅检查单词是否存在，而不是单词出现的次数。

将其更改为：

```
while (scanner.hasNext()) {
    String word = scanner.next();
    if (word.equals(whatFind))
        matches++;
} 
```

或更简单地说：

```
while (scanner.hasNext())
    if (scanner.next().equals(whatFind))
        matches++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T15:20:27.193

**经过一些建议（杜克林非常感谢您！）：**

```
package task;

import java.util.concurrent.*;
import java.util.*;
import java.io.*;

class FolderScan implements Runnable {

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FolderScan() {
    }

    @Override
    public void run() {
        findFiles(path);
        queue.add(endOfWorkFile);
        latch.countDown();
    }

    private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if (currentFile.getName().toLowerCase().endsWith((".txt"))) {
                        queue.put(currentFile);
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

}

public class FileScan implements Runnable {

    private String whatFind;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    public FileScan(String whatFind, BlockingQueue<File> queue,
            CountDownLatch latch, File endOfWorkFile) {
        this.whatFind = whatFind;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FileScan() {
    }

    @Override
    public void run() {

        while (true) {
            try {
                File file;
                file = queue.take();

                if (file == endOfWorkFile) {
                    break;
                }

                scan(file);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        latch.countDown();
    }

    private void scan(File file) {
        Scanner scanner = null;
        int matches = 0;

        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            System.out.println("File Not Found.");
            e.printStackTrace();
        }

        while (scanner.hasNext())
            if (scanner.next().equals(whatFind)) {
                matches++;
            }

        if (matches > 0) {
            String myStr = String.format(
                    "File: %s - and the number of matches " + "is: %d",
                    file.getAbsolutePath(), matches);
            System.out.println(myStr);
        }
    }

    // ask user about input
    public void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {

                File endOfWorkFile = new File("GameOver.tmp");
                CountDownLatch latch = new CountDownLatch(2);

                FolderScan folderScan = new FolderScan(path, queue, latch,
                        endOfWorkFile);
                FileScan fileScan = new FileScan(whatFind, queue, latch,
                        endOfWorkFile);

                Executor executor = Executors.newCachedThreadPool();
                executor.execute(folderScan);
                executor.execute(fileScan);

                latch.await();
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        } catch (InterruptedException e) {
            System.out.println("Interrupted.");
            e.printStackTrace();
        }
    }

    /**
     * @param args
     */

    public static void main(String[] args) {
        long startTime = System.currentTimeMillis();

        new FileScan().askUserPathAndWord();

        long stopTime = System.currentTimeMillis();
        long elapsedTime = stopTime - startTime;
        System.out.println("\nRuntime time " + elapsedTime + " milliseconds.");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T13:05:30.683

```
 Set<String> words = new HashSet<String>(); 
```

选择 List 实现的数据结构。

将以下 if 放在 while 循环本身中。

```
 if (words.contains(this.whatFind)) {
        matches++;
    } 
```

# c++ - pcap_stats 和 pcap_dump_open 不能一起工作

> ID：15040591
> 
> 赞同：0
> 
> 时间：2013-02-23T12:36:30.353
> 
> 标签：c++, pcap

我有以下问题。我用两个线程构建了一个 c++ 程序。在父线程上，我发送了一些原始以太网帧，在子线程中，所有 libpcap 的东西都在运行。

对于输出，我使用 ncurses。

现在我有以下问题。我只能使用 pcap_stats 或 pcap_dump_open。

当我注释掉所有 pcap_stats 的东西时，程序会正常运行。所有包都被捕获并保存到一个文件中。

当我注释掉所有保存到文件的东西时，程序会定期运行。

一旦我同时使用两者，我就会在 pcap_dump_open 上遇到分段错误。我错过了什么吗？

```
void *pcapFunction(void * arg)
{
  optionList *oLT = (optionList*) arg;
  pcap_t *descr;                                              /* session descriptor */
  pcap_dumper_t *fdescr;                                      /* save file descriptor */
  struct pcap_stat ps;
  char errbuf[PCAP_ERRBUF_SIZE];                              /* error string */
  char *finalSaveFileName;
  std::string saveFileName = std::string("../pcapSaveFiles/pcapSaveFile");
  std::stringstream out;
  int capturedPackages = 0;
  time_t t;                                                   /* time structur */
  t = time(0);                                                /* get time */

  // i set up pcap the following way
  descr = pcap_create(oLT->get_deviceName(), errbuf);
  if(descr == NULL)
  {
     mvwprintw(oLT->getTopWin(), oLT->get_writeTopRow(), oLT->get_writeTopCol(), "ERROR: device could not be opend");
     oLT->refreshTopScreen();
     exit(1);
  }
  pcap_set_promisc(descr, 0);
  pcap_set_snaplen(descr, BUFSIZ);
  pcap_set_timeout(descr, 1000);
  pcap_setnonblock(descr, 0, errbuf);
  pcap_activate(descr);

  // some file name building stuff
  ...
  saveFileName = out.str();
  fdescr = pcap_dump_open(descr, strcpy(finalSaveFileName, saveFileName.c_str()));

  while (!oLT->get_stopCapture())
  {
    capturedPackages += pcap_dispatch(descr, 1, &pcap_dump, (unsigned char*) fdescr);
    // here is the problem
    pcap_stats(descr, &ps);
    // this should be the output from ps an not 
    mvwprintw(oLT->getBotWin(), 2, (oLT->get_windowCol()-18)/2, "number of captured %d packages", capturedPackages);
oLT->refreshBotScreen();
  }

  //
  pcap_dump_close(fdescr);
  pcap_close(descr);
  pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:02:58.920

`strcpy()`不像你想象的那样工作。

它*没有*分配足够大的缓冲区来保存复制的结果；它假定缓冲区*已经存在*，如果它太小，它只会覆盖缓冲区末尾的数据。您似乎没有设置 的值`finalSaveFileName`，在将其作为第一个参数传递给 之前，您*必须*这样做`strcpy()`。

在这种情况下也没有*必要；*String的`c_str`方法返回一个 C 字符串，您可以将该 C 字符串传递给`pcap_dump_open()`.

如果您没有`finalSaveFileName`在未向我们展示的代码中设置某处的值，那么您的程序在没有调用 的情况下似乎可以工作，这`pcap_stats()`纯属运气。也许，例如，寄存器或内存位置中发生的任何随机值，所保存的值`finalSaveFileName`碰巧指向的东西，当被 覆盖时`strcpy()`，不会立即引起问题，而是碰巧重叠`struct pcap_stat ps`，所以如果您调用`pcap_stats()`，字符串被覆盖，并且可能不再有终止符`\0`，因此对该字符串的引用失败。

要打开输出文件，您需要做的是

```
fdescr = pcap_dump_open(descr, saveFileName.c_str()); 
```

或者，如果您需要`finalSaveFileName`指向 的 C 字符串值的副本`saveFileName`，请执行

```
finalSaveFileName = strdup(saveFileName.c_str());
fdescr = pcap_dump_open(descr, finalSaveFileName); 
```

# mongodb - MongoDB 查询未使用所需的索引

> ID：15040594
> 
> 赞同：0
> 
> 时间：2013-02-23T12:36:43.240
> 
> 标签：mongodb, database, nosql

我正在使用 .Net SDK 我有一个具有以下结构的文档：

```
public class ChallengeComment
{
    public long Id { get; set; }
    public long ChallengeId { get; set; }
    public long OwnerId { get; set; }
    public DateTime ChallengeCreatedDateTime { get; set; }
    public DateTime CreatedDateTime { get; set; }
    public string Content { get; set; }
} 
```

我已使用以下方法编制索引：

```
IMongoIndexKeys keys = new IndexKeysDocument {{ "OwnerID", 1 }, { "CreatedDateTime", 1 }, { "ChallengeCreatedDateTime", 1 } };
      IMongoIndexOptions options = IndexOptions.SetUnique(false);
_mongoDatabase.GetCollection("ChallengeComment").EnsureIndex(keys,options); 
```

并且索引已经建立成功

我正在执行以下查询

```
var query =
          (from item in collection.AsQueryable<ChallengeComment>()
           where item.OwnerId == 162399
          orderby item.CreatedDateTime, item.ChallengeCreatedDateTime
          select item).Take(10); 
```

但是正在执行全表扫描。我知道索引中的顺序很重要。我相信这是正确的，尽管我可能是错误的。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:43:10.550

天哪，我想我要开枪了……

在索引中，我将其中一个键指定为 OwnerID 但是在查询中我使用了 OwnerId 小写“d”因此它没有使用正确的索引。

我不会再犯这种错误了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:50:35.817

它应该是**`... where item.OwnerID = 162399`**而不是**`... where item.OwnerId`**：

**错字版**

`var query =(from item in collection.AsQueryable<ChallengeComment>()`**`where item.OwnerId == 162399`** `orderby item.CreatedDateTime, item.ChallengeCreatedDateTime select item).Take(10);`

**修正版**

```
var query =
          (from item in collection.AsQueryable<ChallengeComment>()
           where item.OwnerID == 162399
          orderby item.CreatedDateTime, item.ChallengeCreatedDateTime
          select item).Take(10); 
```

# c# - 在绘制事件运行缓慢时将图块集图形绘制到屏幕上

> ID：15040595
> 
> 赞同：0
> 
> 时间：2013-02-23T12:37:05.917
> 
> 标签：c#, performance, graphics, onpaint

正如您可能从下面的代码中看出的那样，我对 C# 很陌生。对于我的第一个项目（作为一种测试），我制作了一个 2D 关卡编辑器，它有 5 层。在下面的代码中，我通过一个候选字典进行搜索，该字典在每次更改地图时生成，并且只包含填充的图块，而不是使用 for(x for(y for z(draw graphics)))必须检查网格的每个部分是否有任何东西。

它运行良好，直到我在屏幕上有大约 30 个图块，然后它开始运行得很慢，就像非常生涩一样。此绘制事件仅在需要时调用，它不会在计时器上运行，它仅在放置新图块或鼠标光标悬停在新块上时运行。所以我猜问题出在图像实际上被绘制到屏幕上的部分，就像一些东西正在积累一样。

在 DrawImage() 函数下方注释掉的行是为了测试是否只绘制矩形而不是图块集的一部分更快。它是！我很抱歉我听起来很笨，但请记住，这是我的第一个项目，我不确定在哪里可以找到关于这个特定主题的答案。

谢谢！，下面是我的绘画代码

```
public void editor_Paint(object sender, PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        string[] keys;
        string[] values;

        foreach(KeyValuePair<string, string> dict in map.shortlist){
            keys = dict.Key.Split('|');
            values = dict.Value.Split('|');
            int xpos = Convert.ToInt16(keys[0]);
            int ypos = Convert.ToInt16(keys[1]);
            int zpos = Convert.ToInt16(keys[2]);

            Tile tile = map.data[xpos, ypos, zpos];
            if (tile.type == "tile")
            {
                Bitmap img = tileset.bitmap.Clone(new Rectangle(tile.x * 16, tile.y * 16, 16, 16), tileset.bitmap.PixelFormat);
                g.DrawImage(img, new Point(xpos * 16, ypos * 16));                                       
                //g.DrawRectangle(Pens.Blue, new Rectangle(new Point(xpos * 16, ypos * 16), new Size(16,16)));                                       
            }
        }

        if (selector.MouseOver == true)
        {
            int tileSize = Preferences.blockSize;                
            Pen pen = new Pen(Color.Red, 1);                
            g.DrawRectangle(pen, new Rectangle(new Point((MouseX / tileSize) * tileSize, (MouseY / tileSize) * tileSize), new Size(tileSize, tileSize)));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:05:48.707

以防万一有人遇到类似的性能问题，我将全面回答这个问题，感谢下面评论中的人向我指出了一些事情。

导致问题的行很可能很明显：

```
Bitmap img = tileset.bitmap.Clone(new Rectangle(tile.x * 16, tile.y * 16, 16, 16), tileset.bitmap.PixelFormat); 
```

当遇到一个图块并从原始图块集位图中选择一个正方形时，它必须在每个 foreach 上创建一个新位图。这样做 30-40 次是相当劳动密集型的。

所以我只是在第一次加载瓦片集时将所有瓦片缓存到一个数组中，如下所示：

```
 private void GenerateBitmapTiles() {
        Bitmap bitmap = new Bitmap(TilesetImageFile);

        bitmaps = new Bitmap[image.Width / 16, image.Height / 16];
        for (int x = 0; x < image.Width / 16; x++)
        {
            for (int y = 0; y < image.Height / 16; y++)
            {
                bitmaps[x, y] = bitmap.Clone(new Rectangle(x * 16, y * 16, 16, 16), bitmap.PixelFormat);
            }
        }

        bitmap.Dispose();
    } 
```

然后我可以通过以下方式拉入瓷砖：

```
g.DrawImage(bitmap[x, y], new Point(xpos * 16, ypos * 16)); 
```

但！阅读下面的评论后，我意识到 winforms 是较旧的技术。Winforms 并没有过时，但 WPF 是更新的技术，在压力下可以表现得更好，加上它的硬件加速。

我已经开始在 WPF 中重建项目，绘画不是问题。而不是说：这是我的数据，现在每次屏幕绘制我都想在这里和这里绘制这个对象，在 WPF 中你只是说，我想要我的对象在这里，这里和这里。其余的由 WPF 自己完成。

# google-apps-script - 谷歌脚本使用新打开的彭博数据？

> ID：15040596
> 
> 赞同：3
> 
> 时间：2013-02-23T12:37:06.570
> 
> 标签：google-apps-script, google-sheets, bloomberg

彭博正在向所有人开放其市场数据。

[http://www.openbloomberg.com/open-api/](http://www.openbloomberg.com/open-api/)

我正在使用谷歌电子表格，我想知道如果可能的话，我是否以及如何使用谷歌脚本与他们的 API 链接。彭博 API 支持 c/c++、.net、java、perl、python。

有谁知道这是否可能或如何做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:40:05.857

快速浏览一下链接，似乎没有可用的 REST API。因此，您不能使用 Apps 脚本来获取数据。

如果提供了 REST API，您可以使用 UrlFetch 类来获取信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:37:24.153

这在技术上可能是可行的，但是：

*   您仍然需要订阅 Bloomberg 才能获取数据（API 需要登录 Bloomberg 终端或 Bloomberg Server 才能运行）
*   由于谷歌电子表格“在云端”，这很可能违反了彭博合同，该合同基本上禁止在安装彭博终端的计算机之外使用数据*。

[* 伊纳尔]

# html - 使用 jquery 将表格单元格中的“a”元素替换为另一个元素

> ID：15040598
> 
> 赞同：0
> 
> 时间：2013-02-23T12:37:27.977
> 
> 标签：html, jquery

我有这张桌子：

```
<table border="0" class="tab_cadrehov">
       <tbody>
           <tr class="tab_bg_1">
               <td valign="top"><a id="User_245_245" href="/dailyTickets/front/contacts.form.php?id=245">Gov0N</a></td>
               <td valign="top">ContactName</td>
               <td valign="top"><a href="mailto:ContactUser@gmail.com">ContactUser@gmail.com</a></td>
            </tr>
            <tr class="tab_bg_2">
                <td valign="top"><a id="User_695_695" href="/dailyTickets/front/contacts.form.php?id=695">iLgOP</a></td>
                <td valign="top">ihi</td>
                <td valign="top"><a href="mailto:yassYassine@gmail.com">yassYassine@gmail.com</a></td>
             </tr>
       </tbody>
    </table> 
```

我想要的是删除 ( `tr`, `table`) 中每个第一个 td 中的 a 元素，然后将删除的 a 元素赋予( , ) 中的第二个`td`元素，如下所示：`tr``table`

```
 <tr class="tab_bg_1">
                   <td valign="top">Gov0N</td> // delete the a element from here , but keep the inside text  
                   <td valign="top"><a id="User_245_245" href="/dailyTickets/front/contacts.form.php?id=245">ContactName</a></td> // add it here , around the text
                .........
   </tr>
   <tr class="tab_bg_2">
                    <td valign="top">iLgOP</td>
                    <td valign="top"><a id="User_695_695" href="/dailyTickets/front/contacts.form.php?id=695">ihi</a></td>
                   .....

    </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:48:19.640

```
$('tr').each(function() {
    var link = $(this).find('td:first a');
    text_of_second_td = $(this).find('td:nth-child(2)').text();
    $(this).find('td:first').html(link.text()); //Link's text to the first td
    link.text(text_of_second_td); //Replace Link's text by the second td's text
    $(this).find('td:nth-child(2)').html(link); //Link to the second td       
}); 
```

[http://jsbin.com/afutir/1/](http://jsbin.com/afutir/1/)

# python - 如何在 django 中为可以更改的 ForeignKey 设置默认值？

> ID：15040601
> 
> 赞同：2
> 
> 时间：2013-02-23T12:37:39.077
> 
> 标签：python, django, foreign-keys, default-value

我正在尝试在 django 中制作一个项目管理工具（开源），在开发过程中，我尝试从 Trac 重现这种行为，允许管理员选择默认问题类型和默认状态，以便在有人创建票证时，除非更改，否则默认显示。

如何在我的数据模型中重现该行为？我看到了多种解决方案，但它们都建立了一个无法及时更改的固定默认值，例如使用默认值的方法。

我还想过在数据模型中创建一个布尔字段，当管理员更改默认值时，对象布尔字段设置为 1，其余为 0，但这是一个非常糟糕的解决方案。

有什么建议么？

# sql - 将空值计数为唯一值

> ID：15040602
> 
> 赞同：23
> 
> 时间：2013-02-23T12:37:51.833
> 
> 标签：sql, oracle, count, null

我需要计算列上的不同值，例如：

```
Hours
1
1
2
null
null
null 
```

结果必须是：**3**。我的查询是：

```
select count(distinct hour) from hours; 
```

但它返回：2.我也测试过：

```
select count(*) from hours group by hour 
```

但它返回三行：

```
(1) 3
(2) 2
(3) 1 
```

如何将空值计为 1 值并使用 distinct 来避免计算重复值？

我正在学习高级 SQL，他们希望我满足所有解决方案的这些要求：

> 尽量减少解决查询所需的子查询数量。此外，您不得使用以下结构：
> 
> *   在 FROM 或 SELECT 中选择。您可以有子查询（在 WHERE 或 HAVING 中选择）
> *   COUNT(COUNT...))、SUM(COUNT...))等聚合函数的组合。
> *   如果可以避免的话，请使用 UNION。
> *   非标准功能（如 NVL）
> *   案子

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-23T12:39:12.000

```
select  count(distinct col1) + count(distinct case when col1 is null then 1 end)
from    YourTable 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-24T00:18:58.133

如果小时是一个数字，那么如果它只能是一个整数：

```
select count(distinct coalesce(hour, 0.1)) cnt from test; 
```

否则，如果它可以是任何浮点数，请将 NULL 更改为 char 字符串。

例如

```
select count(distinct coalesce(to_char(hour), 'a')) cnt from test; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-23T12:55:54.097

```
select 
   count(0) 
from
  (
      select distinct hour from hours
  ) 
```

[SqlFiddle](http://www.sqlfiddle.com/#!4/c7e83/16)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-23T13:06:07.223

```
SELECT
      ( SELECT COUNT(DISTINCT hour)
        FROM hours
      )
    + CASE WHEN EXISTS
           ( SELECT *
             FROM hours
             WHERE hour IS NULL
           )
        THEN 1 
        ELSE 0
      END
   AS result
FROM dual ; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-09T15:00:18.557

也许

```
 select count(distinct hour||' ') from hours; 
```

会做？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-03T09:08:32.627

```
select count(distinct nvl(hour,0)) from hours; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-23T13:18:05.390

我想说您的要求非常奇怪，因为您几乎可以肯定只需使用`NVL()`,`COALESCE()`或即可获得更有效的查询`CASE`。但是，我设法仅使用子查询来获得正确的结果（并处理`NULL`值的存在或不存在）。如果没有在子句中使用子查询，我还没有设法做到这一点`FROM`。

[SQL小提琴](http://sqlfiddle.com/#!4/e0544/55)

**查询 1**：

```
SELECT nnh.not_null_hours + nh.null_hours
FROM (
  SELECT COUNT(DISTINCT t.hour) not_null_hours
  FROM example_table t
) nnh
CROSS JOIN (
  SELECT 1 null_hours
  FROM dual
  WHERE EXISTS (
    SELECT 1
    FROM example_table t
    WHERE t.hour IS NULL
  )
  UNION ALL
  SELECT 0 null_hours
  FROM dual
  WHERE NOT EXISTS (
    SELECT 1
    FROM example_table t
    WHERE t.hour IS NULL
  )
) nh 
```

**[结果](http://sqlfiddle.com/#!4/e0544/55/0)**：

```
| NNH.NOT_NULL_HOURS+NH.NULL_HOURS |
------------------------------------
|                                3 | 
```

这将花费大量精力来应对要求。一个更简单的选择是使用`NVL`，然后是两个简单的选择之一......要么：

1.  用于`TO_CHAR`将非 NULL 值转换为数据类型 VARCHAR2并将值`NVL`转换`NULL`为 VARCHAR2`'NULL'`或
2.  只需使用`NVL`一个您知道将永远不会出现在结果集中的幻数（即由于表上的约束）。

**[查询 1](http://sqlfiddle.com/#!4/e0544/13)**：

```
SELECT 
  COUNT(DISTINCT NVL(TO_CHAR(hour), 'NULL')) using_to_char_null
, COUNT(DISTINCT NVL(hour, -1)) using_magic_number
FROM example_table 
```

**[结果](http://sqlfiddle.com/#!4/e0544/13/0)**：

```
| USING_TO_CHAR_NULL | USING_MAGIC_NUMBER |
-------------------------------------------
|                  3 |                  3 | 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-05T21:13:05.887

安德烈斯的回答是完全满足要求的回答，除了`COUNT`：

```
select count(distinct hour||' ') from hours; 
```

我一直在为另一个目的寻找相同的东西（我可以使用任何东西），但在我看到这个之前，它对我来说似乎并不正确或有效，谢谢安德烈斯，一个如此简单但功能强大的解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-23T22:21:53.323

我能得到的最接近指定标准的是：（[SQL Fiddle](http://sqlfiddle.com/#!4/e0544/132)）

**查询 1**：

```
SELECT COUNT(*)
FROM example_table t1
WHERE t1.ROWID IN (
  SELECT MAX(t2.ROWID)
  FROM example_table t2
  GROUP BY t2.hour
) 
```

**[结果](http://sqlfiddle.com/#!4/e0544/132/0)**：

```
| COUNT(*) |
------------
|        3 | 
```

`ROWID`鉴于其他限制，不确定是否允许使用伪列，但它可以正常工作并优雅地处理`NULL`值。我认为 ROWID 不存在于 Oracle 之外，因此这可能与问题的精神背道而驰，但它至少符合*列出的标准。*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-27T19:34:41.153

可能最简单的方法是使用`DUMP`：

```
SELECT COUNT(DISTINCT DUMP(hour)) AS distinct_count
FROM hours; 
```

输出：3

**[DBFiddle 演示](http://dbfiddle.uk/?rdbms=oracle_11.2&fiddle=cde1aaa48c71fc855c73adc823b8a72d)**

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-23T16:36:45.930

啊……作业。不是这么简单吗？

```
SELECT COUNT(hour) 
  FROM hours 
```

NULLS 不被计算在内。

知道了！没有正确阅读要求是我的坏事。

```
SELECT COUNT(DISTINCT COALESCE(hour,-1)) 
  FROM hours 
```

# maven - maven 插件作为模块

> ID：15040606
> 
> 赞同：5
> 
> 时间：2013-02-23T12:38:21.853
> 
> 标签：maven, maven-plugin

我的项目需要使用自定义 Maven 插件，我正在寻找简单的方法来构建它，最好不要弄乱本地存储库。

让我们考虑简单的项目树：

```
root-project
    |---pom.xml
    |---my-library
    |       \---pom.xml
    |---my-maven-plugin
    |       \---pom.xml
    \---my-project
            \---pom.xml 
```

`root-project`里面列出了三个子项目`<modules>`。主要是在它的构建过程中`my-project`使用`my-maven-plugin`，所以必须先构建插件。

我想做的就是简单地运行：

`root-project $ mvn package`

这应该`my-maven-plugin`首先构建并在构建过程中使用它`my-project`。

不幸的是，这不起作用。Maven 在“扫描项目...”阶段停止工作，并显示错误消息：

`Unresolveable build extension: Plugin test:my-maven-plugin:1.0 or one of its dependencies could not be resolved: Could not find artifact test:my-maven-plugin:jar:1.0`

如果我先做就可以了

```
$ cd my-maven-plugin
$ mvn install
$ cd ..
$ mvn package 
```

它看起来不太好。然而，真正的问题是插件依赖于自己`my-library`（这是根的另一个子模块）。因此，在构建插件之前，我必须进入库目录并安装它。随着我添加到插件中的每个“内部”依赖项，事情变得越来越糟。结果是本地存储库中的混乱和重建项目需要很多手动步骤。

有什么办法可以说 Maven 应该先构建插件（使用 deps），然后在我的项目构建期间使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:42:52.890

我建议在您的情况下使用配置文件。您可以考虑*root-project*的 pom.xml 中的两个配置文件：**build-plugin**和**build-project**。模块聚合（<modules> 列表）将**移至**这些配置文件。例如，**构建插件**配置文件将包含：

```
<modules>
   <module>my-library</module> 
   <!-- + any other "internal" dependencies needed to build the plugin -->
   <module>my-maven-plugin</module>
</modules> 
```

同样，**build-project**配置文件将包含构建*my-project*所需的模块列表。然后，

**mvn clean install -P build-plugin**

**mvn clean package -P build-project**

将是您的命令分别调用*my-maven-plugin*和*my-project*的构建。这两个命令都将从*root-project*的目录执行。如果您需要在大部分时间按顺序运行它们，一个简单的 shell 脚本就可以完成这项工作......

# javascript - 谷歌地图中有多个地址？并叠加

> ID：15040607
> 
> 赞同：-1
> 
> 时间：2013-02-23T12:38:31.037
> 
> 标签：javascript, google-maps, google-maps-api-3

我即将创建一个谷歌地图脚本，我可以在其中设置位置（不是纬度和经度），而是在谷歌地图中设置位置，因此它会在该位置显示一张图片，当鼠标悬停时它应该打开一个带有图片+文字的叠加层。

我有显示 1 个地址的脚本，但是如何实现超过 1 个？像一个数组 ["London", "Odense C, Danmark", "something"] ？

并且指针应该是图像（服装图像）而不是默认谷歌地图的点。我试过这个，但它没有显示任何东西。请帮我！

```
$(function () {
var geocoder = new google.maps.Geocoder();

function getPosition(address) {
    geocoder.geocode({
        "address": address
    }, function (results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            //Create the popup etc..
            var contentString = '<div id="
            content "><div id="
            siteNotice "></div><h2 id="
            firstHeading " class="
            firstHeading ">dsfdf</h2><div id="
            bodyContent "><p>Some text in here</p></div></div>';

            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            google.maps.event.addListener(marker, "mouseover", function () {
                infoWindow.open(map, marker);
            });

            return results[0].geometry.location;
        }
    });
}

if ($("div#map").length) {
    // google map

    var name = "Stolen property";
    var address = "Odense, Denmark";

    geocoder.geocode({
        "address": "Odense Danmark"
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

            var map = new google.maps.Map(document.getElementById("map"), {
                zoom: 15,
                center: results[0].geometry.location,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                scrollwheel: false,
                disableDefaultUI: true
            });

            //Create 1
            var marker = new google.maps.Marker({
                position: getPosition("Brogade Odense Danmark"),
                map: map,
                title: name
            });

            //Create two!
            var marker = new google.maps.Marker({
                position: getPosition("Skibhusvej Odense Danmark"),
                map: map,
                title: name
            });

        }

        //Add it!

    });
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:54:59.563

您将需要构建一个循环来遍历数组中的每个地址并对其进行地理编码。请参阅此处问题中提出的代码片段：[Google Map V3：仅显示一些标记](https://stackoverflow.com/questions/10062624/google-map-v3-only-some-markers-are-displayed)

您还可以使用标记的“图标”属性为标记设置自定义图像：

```
var image = 'images/iconParcelB25.png';

var marker = new google.maps.Marker({
    position:latLng,
    map:map,
    title:projName,
    icon:image
}); 
```

此片段引用网站资产中的本地 PNG，但它也适用于远程可用的图像（即[http://www.example.com/images/theImage.jpg](http://www.example.com/images/theImage.jpg)）。

编辑：我不确定“添加带有图像和文本的叠加层”是什么意思。你是说信息窗口吗？这是这类事情的一个更典型的用例。

编辑：这就是我要做的：

将您的描述性位置/地址放入一个变量中，可能是在一个循环中：

```
var location = addresses[i]; 
```

创建一个新的信息窗口，在信息窗口中引用位置和您需要的任何其他文本。如果要包含自定义图像/文本，请将其放在内容字符串的标记中：

```
var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">+ location +</h2>'+
    '<div id="bodyContent">'+
    '<p>Some text in here</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

创建一个新的标记，设置 mouseOver 事件来打开 infoWindow 和 mouseOut 事件来关闭它。另外，请记住，您需要将图标设置为自定义图像。在这里，我使用的是 latlng，但在您的情况下，您可以将位置设置为地理编码服务的位置几何输出，就像您在代码片段中所做的那样。

```
var image = 'images/iconParcelB25.png';

        var marker = new google.maps.Marker({
            position:latLng,
            map:map,
            title:projName,
            icon:image
        });

//sets up the mouseover listener
google.maps.event.addListener(marker, 'mouseover', function() {
    infoWindow.open(map,marker);
});

//sets up the mouseout listener
google.maps.event.addListener(marker, 'mouseout', function() {
    infoWindow.close(map,marker);
}); 
```

# c# - C# 在 dataGridView (Linq) 中搜索

> ID：15040609
> 
> 赞同：-2
> 
> 时间：2013-02-23T12:38:31.453
> 
> 标签：c#, .net, linq, search, datagridview

我需要帮助才能在 datagridview 中搜索。我知道如何通过按一个按钮从数据库中获取所有信息。但不要通过文本框和搜索按钮只挑出一行？

我想在文本框中输入一个社会安全号码，然后按搜索按钮，在 datagridview 中，将显示人员信息。

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:46:35.960

```
string ssNUmber ="156-45";
var v = (from p in db.Person
                 where p.SocialSecurityNumber== ssNUmber 
                 select p).ToList(); 
```

//然后设置数据网格源v

# c++ - 使用 freeglut 设置 - glew - openGL

> ID：15040611
> 
> 赞同：0
> 
> 时间：2013-02-23T12:38:38.953
> 
> 标签：c++, opengl, glew, freeglut

我一直在尝试让 freeGlut/openGL 和 glew 工作到 Visual Studio 2012，但似乎无法让它工作。

这些是我的错误： http: [//pastebin.com/8YyVvxDb](http://pastebin.com/8YyVvxDb)

我已将标头、DLL、库和所有内容移至所有可能的位置，将内容添加到链接器等中，但它仍然无法正常工作。如果有人可以通过远程帮助我，我确实有 teamviewer/skype

这是上面链接的日志。订单保留在 OP 的链接中。

```
Error   14      error LNK1120: 13 unresolved externals  C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Debug\Testing_glut.exe      Testing_glut
Error   9       error LNK2019: unresolved external symbol __imp____glutCreateWindowWithExit@8 referenced in function _glutCreateWindow_ATEXIT_HACK@4    C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   8       error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8   C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   7       error LNK2019: unresolved external symbol __imp__glutDisplayFunc@4 referenced in function _InitWindow   C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   12      error LNK2019: unresolved external symbol __imp__glutInitContextFlags@4 referenced in function _InitWindow      C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   13      error LNK2019: unresolved external symbol __imp__glutInitContextProfile@4 referenced in function _InitWindow    C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   11      error LNK2019: unresolved external symbol __imp__glutInitContextVersion@8 referenced in function _InitWindow    C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   2       error LNK2019: unresolved external symbol __imp__glutInitDisplayMode@4 referenced in function _InitWindow       C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   1       error LNK2019: unresolved external symbol __imp__glutInitWindowSize@8 referenced in function _InitWindow        C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   3       error LNK2019: unresolved external symbol __imp__glutMainLoop@0 referenced in function _main    C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   4       error LNK2019: unresolved external symbol __imp__glutPostRedisplay@0 referenced in function _RenderFunction     C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   6       error LNK2019: unresolved external symbol __imp__glutReshapeFunc@4 referenced in function _InitWindow   C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   10      error LNK2019: unresolved external symbol __imp__glutSetOption@8 referenced in function _InitWindow     C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut
Error   5       error LNK2019: unresolved external symbol __imp__glutSwapBuffers@0 referenced in function _RenderFunction       C:\Users\Nanashi\documents\visual studio 2012\Projects\Testing_glut\Testing_glut\main.obj       Testing_glut 
```

我找到了一个名为“dependencywalker”的程序并用它来查找可能的错误。这是它的报告：

```
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module. 
```

它说它找不到模块“GPSV.DLL”和“IESHIMS.DLL”..知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:51:49.337

打开项目后，从菜单栏中选择“项目”，然后在该菜单上选择“属性”。在配置属性中，选择 VC++ 目录。在那里，编辑您的包含目录以包含 freeglut\include 文件夹，并编辑您的库目录以包含 freeglut\lib 文件夹。我也是freeglut的新手，但这对我有用，摆脱了你提到的同样类型的错误。

# erlang - 无法让主管工作

> ID：15040613
> 
> 赞同：2
> 
> 时间：2013-02-23T12:38:49.127
> 
> 标签：erlang, erlang-otp, elixir

我试图了解 OTP 和 erlang 中的主管（尽管我使用的是 elixir），但我似乎无法弄清楚为什么主主管树不会启动。

我正在用一个监听器工作人员制作一个 http 服务器，一个主管有处理程序（动态启动）。我可以自己启动每一个，如果侦听器是树中唯一的东西，我可以启动树。

这是 Elixir 中的主管定义

```
defmodule HTTPServer.Supervisor do
  use Supervisor.Behaviour

  def start_link(port) do
    :supervisor.start_link({ :local, :sup }, __MODULE__, [port])
  end

  def init(port) do
    tree = [
      worker(HTTPServer.Listener, [port], id: :listener_sup),
      supervisor(HTTPServer.HandlerSupervisor, [], shutdown: :infinity,
                                                   modules: [])
    ]
    supervise(tree, strategy: :one_for_one)
  end
end

defmodule HTTPServer.HandlerSupervisor do
  use Supervisor.Behaviour

  def start_link(_) do
    IO.puts "starting handler supervisor"
    :supervisor.start_link({ :local, :handler_sup }, __MODULE__, [])
  end

  def init(_) do
    tree = [ worker(HTTPServer.Handler, [], restart: :temporary,
                                            id: nil) ]
    supervise(tree, strategy: :simple_one_for_one)
  end

  def start_child([socket]) do
    IO.puts "starting handler child"
    :supervisor.start_child(:handler_sup, [socket])
  end
end 
```

树中主管定义的某些内容是错误的，我不知道是什么，而且它似乎基本上是唯一阻碍我的项目的事情。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:06:06.450

我通过尝试动态添加它来弄清楚它为什么适合。事实证明，HTTPServer.HandlerSupervisor.start_link 的参数应该是 0，而不是 1。

# android - 使用 Xml DOMParser 解析 XML 文件时出错：Android

> ID：15040615
> 
> 赞同：0
> 
> 时间：2013-02-23T12:39:00.813
> 
> 标签：android, xml-parsing, android-xml, domparser, android-parser

我有 XML 文件。XML 文件的结构在这里：

```
<albumlist>
       <album value="Enrique Iglesias"><details value="1995"/>
              <imageid value="eenrique"/>
              <songs value="No Llores Por Mi">
                     <lyrics>hhhehhehhehe </lyrics>
              </songs>
              <songs value="Trapecista">
                     <lyrics>hhhehhehhehe </lyrics>
              </songs>
              <songs value="Por Amarte">
                      <lyrics>hhhehhehhehe </lyrics>
              </songs>
       </album>
</albumlist> 
```

我想为 perticuler 专辑提取特定歌曲的歌词。为此，我编写了显示歌曲列表的代码，但对于那首特别的歌曲，我无法提取歌词。

这是我获取歌词的功能：

```
private String[] getLyrics() {
        // TODO Auto-generated method stub
        try {
            InputStream in = getResources().openRawResource(R.raw.data);
            DocumentBuilder builder = DocumentBuilderFactory.newInstance()
                    .newDocumentBuilder();
            Document doc = builder.parse(in, null);
            NodeList albumnode = doc.getElementsByTagName("album");
            for (int k = 0; k < albumnode.getLength(); k++) 
            {
                if (((Element) albumnode.item(k)).getAttribute("value").equals(albumname))
                {
                    NodeList nd = albumnode.item(k).getChildNodes();

                    for (int j = 0; j < nd.getLength(); j++) {

                        Node subNode = nd.item(j);
                        if (subNode.getNodeName().equals("songs")) {
                            if (subNode.hasAttributes()) {
                                NamedNodeMap nnm = subNode.getAttributes();

                                for (int i = 0; i < nnm.getLength(); i++) {
                                    Node attrNode = nnm.item(i);

                                    if (attrNode.getNodeType() == Node.ATTRIBUTE_NODE) {
                                        Attr attribute = (Attr) attrNode;
                                        String value = attribute.getValue();
                                        if (value.equals(songname)) {
                                            NodeList lyricslist = subNode
                                                    .getChildNodes();
                                            for(int m=0 ; m<lyricslist.getLength();m++)
                                            {
                                                Node lyricsnode = lyricslist.item(m);
                                                if (lyricsnode.getNodeType() == Node.TEXT_NODE) {
                                                    //Attr attribute = (Attr) attrNode;
                                                    String value1 = lyricsnode.getNodeValue();
                                                    Lyrics[0]=value1;
                                                    Toast.makeText(getApplicationContext(), ""+value1, Toast.LENGTH_LONG).show();
                                                }
                                            }

                                        }
                                    }
                                }
                            }
                        }
                    }

                }
            }
            in.close();
        }

        catch (Exception t) {
            Toast.makeText(this, "Exception: " + t.getMessage(),
                    Toast.LENGTH_LONG).show();
        }
        return Lyrics;
    } 
```

那么我的代码中的错误是什么。我花了一整天的时间来解决它。但不幸的是，我无法确定我的错误。请解决我的问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:56:19.110

将此链接用于[SAX 解析器](http://theopentutorials.com/tutorials/android/xml/android-simple-xml-sax-parser-tutorial/)

还可以看到 b/w sax 和 dom 的[区别](http://javarevisited.blogspot.in/2011/12/difference-between-dom-and-sax-parsers.html)

只需使用此解析器来解析您的 xml

```
public class EmployeeParser extends DefaultHandler {

    private StringBuilder responseTag;
    private List<Album> listAblum = new ArrayList<Album>();
    private Album album;

    @Override
    public void startDocument() throws SAXException {
        super.startDocument();

        listAblum.clear();
    }

    @Override
    public void endDocument() throws SAXException {
        super.endDocument();

    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, qName, attributes);

        responseTag = new StringBuilder();
        if (localName.equals("album")) {
            album = new Album();
            album.setAlbumValue(attributes.getValue("value"));
        } else if ("imageid".equals(localName)) {
            album.setDetails(attributes.getValue("value"));
        } else if ("songs".equals(localName)) {
            album.setSongs(attributes.getValue("value"));
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        super.endElement(uri, localName, qName);

        if (localName.equals("album")) {
            listAblum.add(album);
        } else if ("lyrics".equals(localName)) {
            album.setLyrics(responseTag.toString());
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        super.characters(ch, start, length);
        String str = new String(ch, start, length);
        responseTag.append(str);
    }

    class Album {
        private String songs, imageId, lyrics, albumValue, details;

        public String getSongs() {
            return songs;
        }

        public void setSongs(String songs) {
            this.songs = songs;
        }

        public String getImageId() {
            return imageId;
        }

        public void setImageId(String imageId) {
            this.imageId = imageId;
        }

        public String getLyrics() {
            return lyrics;
        }

        public void setLyrics(String lyrics) {
            this.lyrics = lyrics;
        }

        public String getAlbumValue() {
            return albumValue;
        }

        public void setAlbumValue(String albumValue) {
            this.albumValue = albumValue;
        }

        public String getDetails() {
            return details;
        }

        public void setDetails(String details) {
            this.details = details;
        }
    }
} 
```

# iphone - iOS 6.0 轮换问题

> ID：15040617
> 
> 赞同：2
> 
> 时间：2013-02-23T12:39:18.847
> 
> 标签：iphone, objective-c, ios5, ios6, uiinterfaceorientation

我正在制作一个应用程序，它既可以是纵向模式，也可以是横向模式。因为`iOS 5.0`我通过以下方式添加视图，即

```
 -(BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation

{
   if(((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||
    (interfaceOrientation == UIInterfaceOrientationLandscapeRight)))
{
    productname.frame=CGRectMake(240, 97, 106, 20);
            self.view = landscapeView;

}

else if

(((interfaceOrientation == UIInterfaceOrientationPortrait) ||
          (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown))){
    productname.frame=CGRectMake(153, 151, 106, 20);

    self.view = portraitView;

}

   return YES; 
```

}

但是因为`iOS 6.0`我有以下两种定位方法，

*   (NSUInteger)支持的接口方向
*   (BOOL) 应该自动旋转

我实际上需要一种在设备旋转期间必须触发的方法。如果有人有想法，请告诉我。我已经在这上面浪费了很多时间。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:37:11.003

我正在使用带有以下代码的 UINavigationController 子类：

```
 - (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    if (self.topViewController.presentedViewController) {
        return self.topViewController.presentedViewController.supportedInterfaceOrientations;
    }
    return self.topViewController.supportedInterfaceOrientations;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return self.topViewController.preferredInterfaceOrientationForPresentation;
} 
```

这对我来说很完美

在 AppDelegate.m 文件中：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    return [UIDevice isIpad] ? UIInterfaceOrientationMaskAll : UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:55:32.260

利用

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

# wordpress - 简码无法在 wordpress 中的正确位置工作

> ID：15040624
> 
> 赞同：0
> 
> 时间：2013-02-23T12:40:15.270
> 
> 标签：wordpress, shortcode

我已经编写了一个函数并添加了简码，但是当我尝试在 worpdress 页面编辑器的中心使用该简码时，它们会自动进入页面顶部并且无法在正确的位置工作。这是我在function.php中的代码

```
function get_review() {  ?>
    <div style="clear:both;"></div>
    <div id="banner-fade">
        <ul class="bjqs">
            <?php query_posts('cat=5&showposts=5&order=DESC'); if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <li>
                    <div class="Call-to-action">
                        <div class="inside clearfix">
                            <h4>What our clients say...</h4>
                            <h5 style="width: 645px; text-align: justify;">
                                <?php   the_content(); ?>
                            </h5>
                            <a href="http://www.360creditconsulting.com/products-page/" class="call_to_action  call_to_action_contact">
                                <span>Get Started Now</span>
                            </a>
                        </div>
                    </div>
                </li>
            <?php endwhile; endif; wp_reset_query(); ?>
        </ul>
    </div> 
    <?php 
}
add_shortcode('get_review', 'get_review'); 
```

我使用的页面如下：一些内容... [get_review]

之后，它们会像短代码的 o/p 一样自动显示一些内容...

这是我正在检查的 [网址 http://www.360creditconsulting.com/test-page/](http://www.360creditconsulting.com/test-page/)

任何帮助将不胜感激。我完全被困住了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-14T05:50:12.513

在脚本末尾使用这些行。

```
$output_string = ob_get_contents();
ob_end_clean();
return $output_string; 
```

# javascript - chrome中的javascript函数

> ID：15040631
> 
> 赞同：1
> 
> 时间：2013-02-23T12:40:56.417
> 
> 标签：javascript, google-chrome

我的 script.js 中有一个函数，类似于：

```
function test(var1,var2=0,var3=0) {
// js
} 
```

该函数工作正常，但在 chrome 中对其进行测试时，它返回未定义。我测试了一下，发现chrome不接受这个函数的原因是var2=0,var3=0。我试过 var2=false,var3=false，但结果还是一样。

这些变量是必需的，但并不总是被调用，那么在这种情况下解决方案是什么，因为 chrome 显然不喜欢这样声明变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:43:15.300

很简单，你不能在函数声明中定义变量，但是你可以在函数调用之后检查这个变量。如果第二个或第三个参数没有传递给函数，那么在调用之后，这个参数将是未定义的，如果参数是未定义的，那么表达式 var || 的结果 0，将是 0。

```
function test(var1,var2,var3) {
var2 = var2 || 0;
var3 = var3 || 0;
// js
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:46:46.240

> 但是在 chrome 中对其进行测试时，它返回为 undefined

是的，因为函数没有返回值

此外，不能像这样定义默认参数：`test(var1,var2=0,var3=0)`

Silver_Clash 的解决方案有效：

```
function f(opt){
 opt = opt||"default"
 console.log(opt);

 return opt;
}
f("hello");
f();

//output:
//hello
//default 
```

# html - 通过保持页眉、侧边栏和页脚部分通用，从许多 html 内容创建单个 HTML 文件

> ID：15040633
> 
> 赞同：0
> 
> 时间：2013-02-23T12:41:21.250
> 
> 标签：html, wordpress

我不知道我是否错过了 HTML 中的一个技巧。我手头有一个简单的 HTML 网站，它有 100 多个 HTML 页面。每个页面的页眉、侧边栏和页脚部分相同，但内容不同。我可以简单地让这个网站像 Wordpress 一样，其中页面由 header.php、footer.php、page.php 和 sidebar.php 组成。我知道我仍然需要处理 page.php 类型的文件。

这将简化站点的文件结构。另外我想知道这个解决方案在 SEO 方面是否很好。

请帮助各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:53:20.923

就像 Bojangles 说的：

假设您使用的是 PHP，您可以简单地创建, 然后`header.php`从`footer.php`您的页面创建这些文件：`sidebar.php``include`

```
<?php include 'header.php' ?>
<!-- unique page content goes here -->
<?php include 'sidebar.php' ?>
<?php include 'footer.php' ?> 
```

编辑：这真的是基本的东西，所以我建议阅读 PHP 初学者教程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T17:03:59.410

您还可以在需要时使用 JS 加载常量内容。你只需做一个 document.write('your HTML content here'); 将其放在外部 JavaScript 文件中；然后在您的页面的 HTML 头部链接到它。

# jquery - 带有 ul 的菜单中的 z-index 不起作用

> ID：15040634
> 
> 赞同：-1
> 
> 时间：2013-02-23T12:41:40.800
> 
> 标签：jquery, z-index

我试着做一个简单的菜单。

[`jsFiddle`](http://jsfiddle.net/awzster/wqDnt/3/)

问题：

我想`level2.*`在菜单 level1 下显示菜单。

但是 z-index 也不起作用。

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

    <body>
        <div class="menu">
            <ul class="l1">
                <li> <a href="#">Menu level 1</a>

                    <ul class="l2">
                        <li> <a href="#">menu level 2.1</a>

                        </li>
                        <li><a href="#">menu level 2.2</a>

                        </li>
                        <li><a href="#">menu level 2.3</a>

                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </body>

</html> 
```

javascript

```
$.fn.xMenu = function () {
    return this.each(function () {
        var menu = $(this);

        menu.find('ul.l1').children('li').children('a').bind('click', function () {
            window.console.log(this);
            menu.find('ul.l2').hide();
            menu.find('ul.l1').children().removeClass('menu-borderd');
            $(this).parent().addClass('menu-borderd');
            $(this).parent().children('ul.l2').each(function () {
                $(this).addClass('active').show();
            });
        });
    });
}

$('.menu').xMenu(); 
```

CSS

```
.menu a:hover {
    background-color:#e4ebf8;
}
.menu a {
    outline:none;
}
.menu ul.l1 {
    list-style: none;
    margin:0;
    padding:0 0 0 10px;
    position: relative;
    z-index: 50;
}
.menu ul.l2 {
    list-style: none;
    width: 200px;
    position: absolute;
    border: 1px solid #C3D1EC;
    margin-top: -10px;
    display:none;
    padding: 0px 16px 0px 0;
    z-index: 49;
}
.menu ul.l1 li {
    padding:0;
    float:left;
    position: relative;
    z-index: 50;
}
.menu ul.l2 li {
    padding:0;
    float:none;
    margin: 0 0 0 0;
    width:100%;
}
.active ul {
    display:block;
}
.active a {
    background-color: white;
    display: block;
    height: 29px;
    padding: 0 8px 0 8px;
    position:relative;
}
.active a:hover {
    background-color:#e4ebf8;
}
.active ul.l1 a {
    border: 0 !important;
    box-shadow: 0 0 0 #CCCCCC;
    border:0;
    width: 100%;
}
.menu-borderd {
    border-color: #C3D1EC;
    border-style: solid solid none;
    border-width: 1px 1px 0;
    box-shadow: 0 -1px 5px #CCCCCC;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:48:33.807

您的负边距顶部`.menu ul.l2`导致它高于第一个`li`。如果你把它改成`0px`它应该没问题。

请看这个更正的[小提琴](http://jsfiddle.net/wqDnt/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:48:57.007

只需添加`z-index:-100;`和`.menu ul.l2`删除另一个`z-index`

这是一个有效的**[现场演示](http://jsfiddle.net/7E3qC/1/)**

# java - Branch vs Tag .. 来自 SVN 世界

> ID：15040641
> 
> 赞同：3
> 
> 时间：2013-02-23T12:42:32.323
> 
> 标签：java, git, maven

我正在使用 SVN 开发一个 java、maven 项目。我们都在主干上工作，一旦项目经过测试并准备好发布，我们就会创建一个发布分支。

我们现在正在迁移到 GIT、YAHOO ......我们都在本地工作站上的分支上工作，然后将它们合并到 master 并推送它们以供共享，这就像在 SVN 中工作一样，但现在我们应该在发布时解决真正的问题做一个分支还是一个标签？

我们想听听其他商店是如何做到的，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:46:36.823

标签允许记住哪个提交用于构建发布。如果您想在与 master 分支分离的分支上修复发布后的错误，您可以直接或稍后从该提交创建一个分支。就像在 Subversion 中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:40:46.347

一个分支允许您同时开发多个修补程序/功能，同时允许您的主分支保持不变。标签是提交的标签，您可以将其用于进一步参考。它们都是指向历史提交的指针，但与分支标签不同的是，它们是静态的，它们附加到一个提交并将保留在那里。

在发布新的稳定版本之前，您将标记您发布的提交。所以你需要的是标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T15:45:08.910

我倾向于有一个发布分支，其中所有内容都合并到发布中。当需要发布新版本时，所有内容都会合并到此分支中，并为版本号创建一个标签。

这意味着您可以随时查看发布分支以获取最新发布的版本，并且还可以轻松返回并查看过去的发布。

# html - 如何防止div变大

> ID：15040648
> 
> 赞同：1
> 
> 时间：2013-02-23T12:42:56.333
> 
> 标签：html, static, size

当附加一些其他内容时，是否有办法阻止父 div 更改其大小。

```
<div style="width:220px;height:245" >''      
 <img src="images/pano_doc.png" style="width:220px;height:245"/>"

 <div style="position:relative;width:119px;height:173px;background-color:#0F3">     
 </div>      
</div> 
```

在第二个 div 创建父 div 的高度变为 245+173 但我需要修复它的大小，所以无论添加什么，它的大小都不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:45:19.850

`overflow: auto`将在需要时提供 div 滚动条。

`overflow: hidden`将在需要时剪辑内容。

`overflow: visible`是标准设置，不会限制 div 的大小。

[参考 MDN](https://developer.mozilla.org/en-US/docs/CSS/overflow)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T12:48:58.790

检查[http://jsbin.com/anides/1/edit](http://jsbin.com/anides/1/edit)

试试这个，唯一的改变是

*   最大宽度：220px；&
*   溢出：自动；

代码

```
<div style="width-max:220px;height:245;overflow:auto;" >      
<img src="images/pano_doc.png" style="width:220px;height:245"/>

<div style="position:relative;width:119px;height:173px;background-color:#0F3">     
</div>      
</div> 
```

# javascript - 如何从另一个类更改显示？

> ID：15040649
> 
> 赞同：4
> 
> 时间：2013-02-23T12:42:58.443
> 
> 标签：javascript, html, css

我有一个我无法弄清楚的问题。

我有两个课程：

```
 <div class="left" style="display:block;"></div>
    <div class="leftlarge" style="display:none">
        <h1>Welcome</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div> 
```

这就是我要的：

*   `.leftlarge` *onMouseEnter*将`style="display:none`“更改为`style="display:block"`
*   `.left` *onMouseEnter*更改`style="display:block"`为`style="display:none"`

我试过了`css :hover`，但这没有用。这样我就无法在该类中显示文本。我还应用了我在互联网上找到的几个 javascript，但没有一个按我想要的方式工作。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:59:32.617

你的意思是这样的，但可能没有闪烁效果？ [http://jsfiddle.net/Ce8PW/2/](http://jsfiddle.net/Ce8PW/2/)

```
$(function(){
  $('.left').mouseenter(function(){$('.leftlarge').show();$(this).hide();});
  $('.leftlarge').mouseenter(function(){$('.left').show();$(this).hide();});
}); 
```

但是 .left div 中必须有一些东西，至少是 a `&nbsp;`，否则 div 根本不会显示，您将无法附加任何东西。

如果你只是在鼠标悬停显示/隐藏效果之后，试试这个：http: [//jsfiddle.net/2ztUp/](http://jsfiddle.net/2ztUp/)

如果您想在鼠标悬停时继续显示文本，请让 .left div 像这样包装文本 div：http: [//jsfiddle.net/hKRPY/](http://jsfiddle.net/hKRPY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:43:22.687

这就是你要找的……！！

给 div 赋予 ID，('#none_blk') 如果对象显示在屏幕上，则返回 true，否则返回 false

```
function isDisplayed(object)
 {
if($(object).css('display') == 'block')
    {
   return true;
     }
   return false;
 } 
```

编辑：

否则你可以使用 toggleClass ()

# android - 我的应用程序还在运行吗？

> ID：15040651
> 
> 赞同：0
> 
> 时间：2013-02-23T12:43:11.127
> 
> 标签：android

几个月前，我开始开发一个应用程序，它可以读取传入的短信并将它们保存在数据库中。

几天前我去重新访问该应用程序并快速浏览了数据库，我发现该应用程序仍在记录我的文本！？！

我找不到任何提及我的应用程序在设置下的 android 应用程序选项或高级任务杀手中运行。

我很确定我只是制作了一个普通的应用程序，而不是服务或任何东西？我一定已经把手机关了 10 次，但它一直在运行（或者它会出现）

我怎样才能知道它是否正在运行？这很奇怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:49:37.073

是的，您可能`BroadCastReceiver`为传入的短信添加了一条消息。这不是服务，但您的应用程序将始终获得此意图，您可能最终将其存储到数据库中。

如果你不想要这个你可以卸载应用程序，在这种情况下，通过从 TaskManager 中杀掉是行不通的。

您可能甚至无法在运行服务等中找到此应用程序。但您`BroadcastReceiver`将继续收到消息

# c - 除以零错误？

> ID：15040652
> 
> 赞同：0
> 
> 时间：2013-02-23T12:43:15.120
> 
> 标签：c, logical-operators

我试过运行这段代码：

```
int x = 0;
double y = 1/2;
if (y <= x || y/x < 1)
y++;
printf("%.2f", y); 
```

输出是`1.00`，这让我有点惊讶。我认为第一个表达式`(y <= x)`是错误的，因为这是`||`运算符，所以 C 还必须评估第二个表达式`(y/x < 1)`，这涉及除以零。但是为什么没有任何错误出现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T12:46:45.190

`y`实际上是0：

```
double y = 1/2; 
```

上面做了整数除法，所以结果是0。你想要的是：

```
double y = 1.0/2.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T12:46:10.270

赋值`double y = 1/2;`为 0 `y`。所以`||`is 快捷方式（这意味着 or 的第二部分没有被评估）。

如果您希望 y 为 0.5，则编写：

```
double y = 1/2.0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:03:58.470

首先，正如其他人指出的那样，您将 y 分配为零，因为`1/2`它是除以 2 个整数。

在您的错误示例中，其中 1 和 2 是整数并且 y 被分配为 0，您的假设“第一个表达式`(y <= x)`为假”显然是不正确的，因为`y`它们`x`都为零，因此相等。表达式被短路，第二部分永远不会被评估（不被零除）。

即使你[除以零](http://en.wikipedia.org/wiki/Division_by_zero)，也不能保证你会得到一个错误。[例如， IEEE 754](http://en.wikipedia.org/wiki/IEEE_754)规定除以零产生无穷大。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T14:05:48.817

首先谢谢你。这个问题非常重要，但我还没有面对。

首先，“y=1/2”行产生“y=0”，其次，“if Condition y/x”中的行是 mean 0/0 “Result is Undefined”。但是在“||” 如果左侧参数为真，则不需要测试其余参数（条件）。所以它跳转到“y++”，结果我们看到结果是 1.00。

但是如果我们写 if(y/x<1 || y<=x)

比它给出“异常程序终止”

# c++ - 将指向成员函数的指针转换为指向静态函数的指针

> ID：15040654
> 
> 赞同：2
> 
> 时间：2013-02-23T12:43:28.803
> 
> 标签：c++

如何将成员函数指针转换为静态函数？

这是我的代码：

```
class ClassA
{
public:
    int n;
    void func();
};
void ClassA::func()
{
    n = 89;
}

class ClassB
{
public:
    float f1;
    float f2;
    void func(float f);
};
void ClassB::func( float f )
{
    f1 += f;
    f2 += f;
}

int main (int argc, char *argv[]) 
{
    ClassA* a = new ClassA;
    ClassB* b = new ClassB;

    //PROBLEM IS HERE
    void (* pf_func1)(void*) = ClassA.func;
    void (* pf_func2)(void*, float) = ClassB.func;

    pf_func1(a);
    pf_func2(b, 10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:47:01.687

您可以将[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)其添加到相关类的实例中：

```
auto func1 = std::bind(&ClassA::func, a);
func1(); 
```

这将成员函数绑定`Class::func`到`a`. 同样：

```
auto func2 = std::bind(&ClassB::func, b, std::placeholders::_1);
func2(10.0f); 
```

或者，您可以使用[`std::mem_fn`](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)允许您轻松更改调用它的对象，提供您要求的语法：

```
auto func1 = std::mem_fn(&ClassA::func);
func1(a);
auto func2 = std::mem_fn(&ClassB::func);
func2(b, 10.0f); 
```

并不是在这两种情况下`func1`，`func2`实际上都不是函数指针，但它们的行为确实像它们。`std::bind`从和返回的类型`std::mem_fn`是实现定义的。但是，它们都可以转换为`std::function`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T05:33:14.727

```
void(ClassA::*pf1)() = &ClassA::func;
void(ClassB::*pf2)(float) = &ClassB::func;
void (__thiscall * pf_func1)(void*) = (void (__thiscall *)(void*)) ((void*&)pf1);
void (__thiscall * pf_func2)(void*, float) = (void (__thiscall *)(void*, float)) ((void*&)pf2); 
```

**解决了**

:)

# html - 无法在 HTML 中为 rails 3.2 实现（显示）删除

> ID：15040655
> 
> 赞同：1
> 
> 时间：2013-02-23T12:43:31.050
> 
> 标签：html, ruby-on-rails, database, ruby-on-rails-3

我正在用 ruby​​ on rails 实现一个购物车 购物车有两张表，即购物清单和产品。（产品引用购物清单）在购物清单中，当我单击选项获取产品时，它向我显示产品列表对于特定的购物清单。还有一个编辑和删除按钮。我已经实现了删除，如果我单击删除数据库中特定产品的数据库中删除的值变为 1（默认为零），但该产品仍显示在前端（我的是 HTML）。

理想情况下，我不希望特定产品显示在前端。你能帮帮我吗？我的 shopping_list 控制器如下：-

```
class ShoppingListsController < ApplicationController
  # GET /shopping_lists
  # GET /shopping_lists.json
  def index
    @shopping_lists = ShoppingList.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @shopping_lists }
    end
  end

  # GET /shopping_lists/1
  # GET /shopping_lists/1.json
  def show
    @shopping_list = ShoppingList.find(params[:id])
    @shopping_list = ShoppingList.includes(:products).find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @shopping_list }
    end
  end

  # GET /shopping_lists/new
  # GET /shopping_lists/new.json
  def new
    @shopping_list = ShoppingList.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @shopping_list }
    end
  end

  # GET /shopping_lists/1/edit
  def edit
    @shopping_list = ShoppingList.find(params[:id])
  end

  # POST /shopping_lists
  # POST /shopping_lists.json
  def create
    @shopping_list = ShoppingList.new(params[:shopping_list])

    respond_to do |format|
      if @shopping_list.save
        format.html { redirect_to @shopping_list, notice: 'Shopping list was successfully created.' }
        format.json { render json: @shopping_list, status: :created, location: @shopping_list }
      else
        format.html { render action: "new" }
        format.json { render json: @shopping_list.errors, status: :unprocessable_entity }
      end
    end
  end

  def list
   @shopping_lists = ShoppingList.find(:all,
                 :order => "id asc")

    respond_to do |format|
      format.html { render :action => 'list' }
      format.json { render :json => @accounts.to_json }
    end       
  end

  # PUT /shopping_lists/1
  # PUT /shopping_lists/1.json
  def update
    @shopping_list = ShoppingList.find(params[:id])

    respond_to do |format|
      if @shopping_list.update_attributes(params[:shopping_list])
        format.html { redirect_to @shopping_list, notice: 'Shopping list was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @shopping_list.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /shopping_lists/1
  # DELETE /shopping_lists/1.json

def delete
    @shopping_list = ShoppingList.find(params[:id])
    @shopping_list.deleted = 1
    @shopping_list.save

    respond_to do |format|
      format.html { redirect_to shopping_lists_url }
      format.json { render :json => { :success => true } }
  # def destroy
  #  @shopping_list = ShoppingList.find(params[:id])
  # @shopping_list.destroy

  #respond_to do |format|
  # format.html { redirect_to shopping_lists_url }
  #format.json { head :no_content }
    end
  end

  def get_product

   @product=Product.where('shopping_list_id = ? ', params[:id])
   # @status=Product.where(status=[[:Open, "open"], [:Close, "close"]])
  # @product_status=Product.where('status = ? ', params[:id])
   # @product=Product.find(params[:shopping_list_id])
   #  @products = Product.includes(:shopping_lists)

  respond_to do |format|
      format.html { render :action => 'get_products' }
      format.json { render json: @shopping_lists }
    end
 end

 def product_edit
    @product = Product.find(params[:id])
  end

  def product_delete
    @product = Product.find(params[:id])
    @product.deleted = 1
    @product.save

    respond_to do |format|
      format.html { redirect_to shopping_list_url }
      format.json { render :json => { :success => true } }
    end
  end 

  def add_product
    @product = Product.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @product }
    end
  end

end 
```

我要显示的 Html 页面如下：-

```
<h1>shopping_list</h1>

shopping_list Id: <%= params[:id] %><br>
shopping_list Name: <%= ShoppingList.where('id = ?', params[:id]).pluck(:shopping_list_name)[0] %><br><br/>

  <table border="1">
 <tr><td>Product id.</td><td>Product Name</td><td>category</td><td>quantity</td><td>status</td><td>Product_edit</td><td>Product_delete</td></tr>
<% @product.each do |p| %>
<tr>
<td>Product id: <%= p.id %> <br></td>
<td>Product name: <%= p.product_name %> <br></td>
<td>Product category: <%= p.product_category %> <br></td>
<td>Product Quantity: <%= p.quantity %> <br></td>
<td>Product status: <%= p.status %>
<td><%= link_to 'Edit', {:action => 'product_edit', :id => p.id} %> &nbsp;</td>
<td><%= link_to 'Delete', {:action => 'product_delete', :id => p.id},
    :data => { :confirm => "Are you sure you want to delete this product?" } %></td>
    </tr>
</tr>
<% end %>
</table>
<br/>
<%= link_to 'Back', {:action => 'list'} %><br/>
<%= link_to 'Add New Products', {:action => 'add_product'} %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:09:22.463

有几种方法可以解决这个问题 - 最好的方法是通过 Product 模型上的范围来过滤加载的产品。

A`default_scope where(deleted: 0)`可以完成这项工作，但 default_scopes 可能有自己的问题（例如，如果您有时想处理已删除的项目）。

# php - 詹金斯 git webhook

> ID：15040660
> 
> 赞同：1
> 
> 时间：2013-02-23T12:44:19.397
> 
> 标签：php, git, jenkins, build, webhooks

我使用詹金斯作为一个独立的。我想在将相同的提交推送到 git 时触发构建。Jenkins GIT 客户端插件 v1.0.2 Jenkins GIT 插件 v1.2.0 Git 服务器插件 v1.1 git-notes 插件 v0.0.4 ruby​​-runtime v0.10 GitHub API 插件 v1.34 GitHub 插件 v1.5

这个插件我已经安装在詹金斯。在 git 中，我必须输入 webhook url，但我不知道应该输入哪个 url。当我配置 jenkins git web hook 它问我

我选择让 Jenkins 自动管理挂钩 URL 选项

在这有 GitHub Credentials 我在这个 API URL 中填写了这些信息：用户名：密码：API 密钥：但我不知道什么是 API URL，API 密钥。我在哪里可以获得 jenkins 中的 api url 和 ken 以及我必须在 git webhook post 中输入的 url。

```
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:39:37.347

我能够使用 OAuth 令牌来完成这项工作。制作步骤可以在这里看到：http: [//developer.github.com/v3/oauth/](http://developer.github.com/v3/oauth/)

关于 github.com API 的一般信息可以在这里查看：http: [//developer.github.com/v3/](http://developer.github.com/v3/)

# c# - 用户等待一段时间

> ID：15040663
> 
> 赞同：0
> 
> 时间：2013-02-23T12:44:25.870
> 
> 标签：c#

我需要解决一个问题并需要一些输入。当我按下`button1`我的 gui 启动串行通信。我发送一些命令并接收一些数据。一旦我按下`button1`，我将在另一个线程（GUI 线程除外）中持续 3-4 秒，直到数据完全传输。我想要的是一个对话框，弹出或类似的东西（显示一条繁忙的消息）当我按下时出现在我的 gui 前面，`button1`并且这个弹出窗口在另一个线程中自动关闭，其中串行通信发生时整个数据被传输。

有人建议`BackgroundWorker`，但我不清楚。

我还有一个建议*“使用一个winform，将它的FormBorderStyle设置为FixedDialog。让它像一个消息框一样小，然后在上面放一个进度条控件。你可以在线程处理开始时使用表单ShowDIalog，最后关闭。为简单起见，进度条样式可以设置为连续。”*

**考虑到我的情况，有什么好的解释或替代的简单方法**吗？我想让事情变得简单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:00:55.463

这是逻辑：

> *   当用户单击 button1 时，显示弹出框说些什么。
> *   同时，数据传输代码也应该在同一个线程中。
> *   然后编写代码以获取所有数据将被传输的点&@该点使该对话框消失。

如果您想要任何示例代码，请也发布您的书面代码，以便我可以提供实用的代码来向您展示逻辑。

希望您理解或更好地发布您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:02:01.443

BackgroundWorker 确实是最好的选择。[这里](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)有一个非常详尽的 HowTo 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:50:15.233

您可以在表单上使用标签设置简单消息，也可以在执行几个命令后使用进度条和更新进度条。如果您的命令集是由用户指令启动的，那么就可以了。如果您必须与设备通信并响应设备警报，则 C# 中串行端口的 DataReceivedEvent 可以正常工作。你可以编写你的代码。当设备将日期传输到应用程序并在后台工作时，此事件会被触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T14:51:00.073

您没有说明您正在运行的 .net 版本，所以我将提供两种方法：

## .net 4：

```
void OnButton1Click(Object sender, EventArgs e)
{

    var waitDailog = new frmWait();
    waitDialog.ShowDialog();

    var task = new Task(() = 
    {
        // Serial communitcation or whatever will take a long time here
    })
    .ContinueWith(result =>
    {
        waitDialog.Close();
    })
    .Start();
} 
```

## .net 3：

```
private frmWait _waitDialog;

void OnButton1Click(Object sender, EventArgs e)
{

    _waitDailog = new frmWait();
    waitDialog.ShowDialog();

    var thread = new Thread(OnThread);
    thread.Start();
}

void OnThread()
{
    // Serial communitcation or whatever will take a long time here

    _waitDailog.Close();
} 
```

在这两种情况下，等待对话框只是一种形式，带有某种动画和消息来显示等待。

您可能还需要一些`Invoke()`关于等待表单的关闭，但我手边没有编译器可以检查。

# asp.net - 为 Azure 共享实例站点配置 WWW

> ID：15040665
> 
> 赞同：0
> 
> 时间：2013-02-23T12:44:40.380
> 
> 标签：asp.net, azure, dns

我在 Azure 上托管我的第一个站点。经过多次[反复试验](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/#bkmk_configurearecord)，我找到了 mysite.com，但如果它以 www 为前缀（获得 404）则不会。

这是我的 DNS 设置：

**一个记录：**

@ 1.2.3.4

FTP 1.2.3.4

www 1.2.3.4

**CNAME**

awverify awverify.mysite.azurewebsites.net

当我 ping 1.2.3.4 时，请求超时。如何让 www.mysite.com 解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:46:04.663

这就是我设置一些 Azure 网站的方式（而且效果很好）

假设 Azure 网站名称是*myazurewebsite*并且自定义 DNS 是*mywebsite.com*我有一个**A**记录

1.  主机名：`mywebsite.com`IP：`1.2.3.4`（IP取自Azure网站的*域管理*）

以及两条**CNAME**记录：

1.  别名：`awverify.mywebsite.com`指向主机：`awverify.myazurewebsite.azurewebsites.net`
2.  别名：`www.mywebsite.com`指向主机：`myazurewebsite.azurewebsites.net`

然后我为 Azure 网站配置了两个域名（*配置 > 域名*）

*   mywebsite.com
*   www.mywebsite.com

你的 DNS 和 Azure 中可能缺少`www`配置。我希望这会有所帮助。

# objective-c - NSFont / NSView 中的字符串对齐

> ID：15040669
> 
> 赞同：1
> 
> 时间：2013-02-23T12:45:58.217
> 
> 标签：objective-c, macos, nsview, nsfont

他，当我像这样将文本绘制到我的视图中时：

```
NSMutableDictionary *textAttrib = [[NSMutableDictionary alloc] init];
[textAttrib setObject:[NSFont fontWithName:@"Helvetica Light" size:15] forKey:NSFontAttributeName];
[textAttrib setObject:[NSColor grayColor] forKey:NSForegroundColorAttributeName];
[mouseString drawAtPoint:textPoint withAttributes:textAttrib]; 
```

如何更改文本的对齐方式？我只需要简单的左/右对齐，只能在文本字段中找到任何相关信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:53:44.793

没有这种与`[NSString drawAtPoint:withAttributes:]`方法对齐的概念，如果您考虑一下，这是有道理的。对齐是字符串相对于控件内容（通常是`NSTextField`）的显示方式的概念。

但是，您可以尝试`[NSString drawInRect:withAttributes:]`该概念确实存在的地方。请参阅这个[SO 问题](https://stackoverflow.com/questions/477509/how-to-use-nsstring-drawinrect-to-centre-text)。

**更新**：如果没有@justin 给出的（现已删除的）答案，这个问题是不完整的，它显示*了如何*在`NSAttributedString`. 两个答案都是正确的，但都不完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:14:32.627

您缺少一个属性：NSParagraphStyleAttributeName，它是一个 NSParagraphStyle 属性。如果你创建一个 NSParagraphStyle 对象，你可以设置这个属性：

```
@property(readonly) NSTextAlignment alignment;  // readwrite for NSMutableParagraphStyle 
```

在您的情况下，您应该将其设置为 NSTextAlignmentLeft 或 NSTextAlignmentRight。

**示例**：

```
NSMutableParagraphStyle* style=[[NSMutableParagraphStyle alloc]init];
style.alignment= NSTextAlignmentLeft;
[textAttrib setObject: style forKey: NSParagraphStyleAttributeName]; 
```

# html-table - IE中的HTML数据结构

> ID：15040679
> 
> 赞同：1
> 
> 时间：2013-02-23T12:46:58.567
> 
> 标签：html-table

我有下表显示在 IE 中呈现不佳但在 Mozilla Firefox 中显示良好的图片库。

问题是图像库一直水平滚动超出边界，而不是拆分到下一行。

这是代码：

```
<?php

include("includes/config_gallery.php");

    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." GROUP BY cobjecttype ORDER BY cobjecttype";
    $sql_result = mysql_query ($sql, $connection ) or die ('request "Could not execute SQL query" '.$sql);
    while ($row = mysql_fetch_assoc($sql_result)) {
        echo "<option value='".$row["cobjecttype"]."'".($row["cobjecttype"]==$_REQUEST["cobjecttype"] ? " selected" : "").">".$row["cobjecttype"]."</option>";
    }

 $count = 0;

if ($_REQUEST["string"]<>'') {
    $search_string = " AND (ctitle LIKE '%".mysql_real_escape_string($_REQUEST["string"])."%' OR csubject LIKE '%".mysql_real_escape_string($_REQUEST["string"])."%')"; 
}

if ($_REQUEST["ref"]<>'') {
    $search_string = " AND (creference LIKE '%".mysql_real_escape_string($_REQUEST["ref"])."%')";
}

if ($_REQUEST["cobjecttype"]<>'') {
    $search_cobjecttype = " AND cobjecttype='".mysql_real_escape_string($_REQUEST["cobjecttype"])."'";  
}
if ($_REQUEST["cartist"]<>'') {
    $search_string = " AND (cartist LIKE '%".mysql_real_escape_string($_REQUEST["cartist"])."%')";
}

if ($_REQUEST["cyear"]<>'') {
    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE cyear = '".mysql_real_escape_string($_REQUEST["cyear"])."'".$search_string.$search_cobjecttype;
}
else {
    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE c_id>0".$search_string.$search_cobjecttype;
}

$sql_result = mysql_query ($sql, $connection ) or die ('request "Could not execute SQL query" '.$sql);
if (mysql_num_rows($sql_result)>0) {
    while ($row = mysql_fetch_assoc($sql_result)) {
    $c_id=$row['c_id'];
?>
    <td valign=top> 

    <table width=150 border=0 align=left class=allborder> 
    <tr> 
    <td width=70 bgcolor=#eee><a href="details.php?c_id=<?php echo $c_id; ?>" > <?php echo $row['ctitle']; ?> </a></td>
    </tr>
    <tr> 
        <td><a href=details.php?c_id=<?php echo $c_id ?> ><img src="./images/<?php echo $row['cfilename']; ?>" width="90" height="120" alt="" /></a>
        </td> 
    </tr> 

    </table>

 <?php $count++; 
  if ($count %8 == 0 && $count < $num) {
?>
 <tr>
 <?php } ?>
 </tr>
 </td>

<?php
    }
} else {
?>
<font color=red>No results found.</font>
<?php   
}
?> 
```

请帮忙。

约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T21:11:04.180

我建议使用 IE 特定的 CSS 来为照片库所在的区域提供最大宽度。

```
IE6 css specific

* html ‪#‎div‬ { 
height: 300px;
}

IE7 css specific

*+html #div { 
height: 300px;
}

IE7&8 css specific (also seems to work in 10, haven't tested it in 9

#div {
height: 300px\9;
} 
```

# java - 从 JSON 创建 ListAdapter

> ID：15040681
> 
> 赞同：0
> 
> 时间：2013-02-23T12:47:02.477
> 
> 标签：java, android, asynchronous, gson

我在 Android 应用程序中遇到了一些问题：我想从 Feed RSS 中读取信息并将它们呈现在一些 android 视图中。我正在使用`android-async-http1.4.3.jar`库将我的应用程序连接到该站点：[http ://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&q=http://f1grandprix.motorionline.com/feed /](http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&q=http://f1grandprix.motorionline.com/feed/)

通过此连接，我正在下载 XML 文件并将其转换为带有 gson 库的 JSON 文件，但是当我尝试将 APP 连接到我的 Android 手机时，我得到了一个空指针异常。用于连接、获取 xml 并将其转换为 JSON 代码的类如下：

```
 private void loadTitle() {
    String URL = "http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&q=http://f1grandprix.motorionline.com/feed/";

    AsyncHttpClient client = new AsyncHttpClient();

    client.get(URL, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(String text) {
            super.onSuccess(text);

            Gson decoder = new Gson();

            JsonResponse jr = decoder.fromJson(text, JsonResponse.class);

            Entry[] entries = jr.responseData.feed.entries;
            for (int i = 0; i < entries.length; i++) {
                Log.d("NET", "Il titolo della " + i + " entry è: " + entries[i].title);
            }

            final ListView lv_title = (ListView) findViewById(R.id.lv_title);
            //ListAdapter la_title = new TitleAdapter(MainActivity.this, entries);
            //Log.d("LIST_ADAPTER", "Caricato correttamente il list adaptor: "+ la_title);
            //lv_title.setAdapter(la_title);
            lv_title.setAdapter(new TitleAdapter(MainActivity.this, entries));
            pleaseWait.hide();
        }

        @Override
        public void onFailure(Throwable arg0, String arg1) {
            super.onFailure(arg0, arg1);
            Log.d("FAIL", "Failure");
            pleaseWait.hide();
        }
    });
} 
```

TitleAdapter.java 如下：

```
public class TitleAdapter extends ArrayAdapter<Entry> {

public TitleAdapter(Context context, Entry[] title) {
    super(context, R.layout.list_item, R.id.lv_title, title);
} 
```

}

最后我收到了这个错误：

```
02-23 12:46:05.525: E/AndroidRuntime(4577): FATAL EXCEPTION: main
02-23 12:46:05.525: E/AndroidRuntime(4577): java.lang.NullPointerException
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.AbsListView.obtainView(AbsListView.java:1495)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.ListView.onMeasure(ListView.java:1127)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.View.measure(View.java:8335)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.View.measure(View.java:8335)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.View.measure(View.java:8335)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.View.measure(View.java:8335)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.View.measure(View.java:8335)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.ViewRoot.performTraversals(ViewRoot.java:843)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1892)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.os.Looper.loop(Looper.java:130)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at android.app.ActivityThread.main(ActivityThread.java:3835)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at java.lang.reflect.Method.invokeNative(Native Method)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at java.lang.reflect.Method.invoke(Method.java:507)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
02-23 12:46:05.525: E/AndroidRuntime(4577):     at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:41:48.970

> 有人可以帮我解决这个问题吗？

在`entries`您传递给自定义的数组中`ArrayAdapter`（您仍然为其调用`super.getView()`方法（或者您没有覆盖它），对吗？）看起来您有`null`值。如果您使用`ArrayAdapter`'`getView()`方法的默认实现，这是一个问题，因为`ArrayAdapter`将在该方法中调用，默认情况下，`toString()`其类型对象（`Entry`在您的情况下为对象）上的方法以获得`String`在行中显示的 a。

因此，请确保您传递给您的实现的数组`ArrayAdapter` **不**包含空值。

# css - 溢出：隐藏 - 它实际上是如何工作的？

> ID：15040687
> 
> 赞同：2
> 
> 时间：2013-02-23T12:47:37.893
> 
> 标签：css

`overflow:hidden`隐藏我们都知道的内容，但隐藏的内容仍然执行吗？

例如：如果我`overflow:hidden`用来“隐藏”一个计算展示次数的广告横幅，那么在隐藏横幅后展示次数是否仍然计算在内？

我将使用 JavaScript 在页面刷新时滑动一些附属横幅，印象并不重要，但想了解更多的 CSS。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:52:16.557

`overflow:hidden`隐藏元素的一部分。但是该部分中的元素仍然由浏览器呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:25:34.537

*溢出*的另一种用法：隐藏；是：

当他的孩子们漂浮时。这意味着它们脱离了元素的自然流动。结果是容器没有高度，所以如果你想在元素定位后**重新计算高度，包括浮动元素。**在这种情况下，您将使用*溢出：隐藏；*

*   问题：http: [//jsfiddle.net/kWTgq/](http://jsfiddle.net/kWTgq/)

CSS：#container { 背景：橙色；边框：1px 纯红色；}

```
#container p {
    float: left;
} 
```

*   解决方案：http: [//jsfiddle.net/kWTgq/1/](http://jsfiddle.net/kWTgq/1/)
*   错误的解决方案：http: [//jsfiddle.net/kWTgq/2/](http://jsfiddle.net/kWTgq/2/)

    .clear { 明确：两者；}

# ruby-on-rails - 允许 set_locale 与 strong_parameters gem & devise

> ID：15040689
> 
> 赞同：0
> 
> 时间：2013-02-23T12:47:47.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, strong-parameters

我在设计的小项目上使用[强参数](https://github.com/rails/strong_parameters)gem

我添加`User.rb`了一个`locale`专栏。这是我的`controllers/users/registrations_controller.rb`文件：

```
class Users::RegistrationsController < Devise::RegistrationsController
  def resource_params
    params.require(:user).permit(:username, :email, :password, :password_confirmation, :locale)
  end
  private :resource_params
  def create
   #add params[:locale] to resource.locale here
   super
  end
end 
```

这些是从表单接收的参数：

```
Parameters: {"authenticity_token"=>"ZyrtToHcwsX3zl2ive93cpYaom6HNGA/jnYcSg7pQUQ=", "user"=>{"username"=>"hyperrjas@hyperrjas.com", "email"=>"email@email.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create account", "locale"=>"es"} 
```

我想添加到`user :locale column`参数`params[:locale]`

**我该怎么做？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:35:49.370

我已经解决了覆盖`create`此文档中的方法的问题：

[https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)。

如果你想`column or field locale`在你的模型用户上添加指定`strong parameters gem`，你可以添加到`controllers/users/registrations_controller.rb`下一个：

```
class Users::RegistrationsController < Devise::RegistrationsController

  def create
    build_resource
    resource.locale = set_locale #set_locale or where you have stored your own locale
    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end

  def resource_params
    params.require(:user).permit(:username, :email, :password, :password_confirmation, :locale)
  end

  private :resource_params
end 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T14:48:39.130

## 选项1

在视图中处理它。

您的视图可能类似于：

```
<%= form_for :user do |f| %>
  <%= f.username %>
  <%= f.password %>
  <%= # Etc... %>
<% end >
<%= select_tag :locale, options_from_collection_for_select(I18n.config.available_locales, :to_s, :to_s), :selected => user.locale %> 
```

因此，让我们将其更改为：

```
<%= form_for :user do |f| %>
  <%= f.collection_select :locale, I18n.config.available_locales, :to_s, :to_s, :selected => user.locale %>
  <%= f.username %>
  <%= f.password %>
  <%= # Etc... %>
<% end > 
```

这样，params 对象就已经嵌套`locale`在`user`.

## 选项 2

选项 1 的缺点是您的语言环境选择可能位于导航栏中，将其移动到表单中是没有意义的。但是，您可以维护 2 个字段——现有的导航栏一个，以及一个隐藏在表单中的字段。

```
<%= form_for :user do |f| %>
  <%= f.hidden_field :locale, value => user.locale %>
  <%= f.username %>
  <%= f.password %>
  <%= # Etc... %>
<% end > 
```

并在提交之前使用 Javascript 将值从导航栏字段复制到隐藏字段：

```
$('form').on('submit', function(){
  $("#user_locale").val($("#locale").val());
}); 
```

## 选项 3

在设置强参数之前将其复制到控制器中：

```
class Users::RegistrationsController < Devise::RegistrationsController
  private
    def resource_params  
      params[:user][:locale] = params[:locale]
      params.require(:user).permit(:username, :email, :password, :password_confirmation, :locale)
    end
end 
```

所有这些都是公认答案的更好选择，因为它们避免了代码重复。每次要升级设备时，您都不必再次复制和粘贴。

# database - 表格中的独特组合

> ID：15040695
> 
> 赞同：1
> 
> 时间：2013-02-23T12:48:23.450
> 
> 标签：database, django, postgresql

我有两张桌子：`House`和`Picture`。该`Picture`表有一个列`homepage`，即 a`bool`和 a `house_id`。这意味着房子有图片，只有标记为的图片`homepage`才会出现在主页上。

问题：每个房子应该只有一张主页图片。或者：可以有很多`(house_id, homepage):(1, False)`但只有一个`(house_id, homepage):(1, True)`元组。我怎样才能使它适用于 PostgreSQL？

这种情况有名字吗？当然，这不是主键，因为可以有很多`(1, False)`元组。

数据库上的解决方案有帮助。**加分项：**关于如何在模型层上的 Django 上实现它的解决方案会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:15:48.770

如果您想始终保证数据完整性，可以（并且应该）在数据库级别解决它。有多种方法，[部分](http://www.postgresql.org/docs/current/interactive/indexes-partial.html) [`UNIQUE INDEX`](http://www.postgresql.org/docs/current/interactive/indexes-unique.html)可能是最简单和最有效的。

```
CREATE UNIQUE INDEX picture_homepage_uni ON picture (house_id) WHERE homepage; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/d1ace/1)

还将加快查询以检索主页图片作为附带利益。

### 更改架构

另一种方法是在表格中添加一列`homepage_id`，`house`指向选定的图片。自动只能选择一张图片。你不再需要`picture.homepage`了。由于双向外键约束，参照完整性可能有点棘手，但我有这样的工作解决方案。

# python - 在 windows xp 版本的 openerp 中导入模块时出错？

> ID：15040698
> 
> 赞同：1
> 
> 时间：2013-02-23T12:48:38.647
> 
> 标签：python, python-2.7, openerp

我在 openerp7 中使用此代码直接从打印机打印此代码是我在 main.py 中编写的，但是当我启动服务器时，它在我的浏览器控制台上给出了未处理的错误，实际上这个错误发生在导入 win32print 模块时。

```
import win32print
printer=OpenPrinter(win32print.GetDefaultPrinter())
hJob = win32print.StartDocPrinter (printer, 1, ("RVGI Print", None, "RAW"))
g=open('test3.txt','r')
raw_data = bytes ( open( 'test3.txt' , 'r').read ())
try:
    win32print.StartPagePrinter (printer)
    win32print.WritePrinter (printer, raw_data)
    win32print.EndPagePrinter (printer)
finally:
    win32print.EndDocPrinter (printer)
    win32print.ClosePrinter (printer) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T16:33:10.570

查看您的代码后，我发现唯一的问题是`undefined variable OpenPrinter`只需将 OpenPrinter() 替换为`win32print.OpenPrinter()`

# visual-c++ - 如何创建一个新表单并在其上放置一个按钮？

> ID：15040699
> 
> 赞同：1
> 
> 时间：2013-02-23T12:48:40.960
> 
> 标签：visual-c++, visual-studio-2012

我刚刚下载了 Visual Studio 2012 Express，我在 C++ 上创建了一个新的 Win32 项目，但我找不到表单的位置，因此我可以使用 IDE 向它添加一些控件，就像我在 C# 中所做的那样！

有人可以帮助我如何使用 IDE 在其上添加表单和一些控件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:51:50.370

您不能通过 GUI 为本地 C++ 应用程序创建表单。您必须使用`MFC`or`C++/CLI`或坚持使用 C#。不幸的是，用纯 C++ 创建 GUI 应用程序并不容易。

你也可以看看 Qt Creator - 虽然我个人不喜欢它，但它可能正是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:03:38.210

您可以将 .rc 文件添加到您的解决方案中，然后从资源视图中添加新资源。然后您可以使用工具箱，希望对您有所帮助。

![Visual Studio 资源编辑器](../Images/ea81f960beebc3a19b3be465e6028643.png)

# php - 如何从 actionscript3 设置 $_POST 或 $_REQUEST 等参数？

> ID：15040704
> 
> 赞同：1
> 
> 时间：2013-02-23T12:49:06.513
> 
> 标签：php, actionscript-3, flash, web

我正在尝试与 Flash 中的 php 文件进行通信。

我想`$_REQUEST['setData']= "true"`从闪存文件中设置。这是我的php代码。

```
<?php
if($_REQUEST['setData']=="true")
{
    echo "setData";
}
?> 
```

到目前为止我在 actionscript3 代码中的内容 -

```
 var phpVars:URLVariables = new URLVariables();
        var phpFileRequest:URLRequest = new URLRequest("php/index.php");
        phpFileRequest.method = URLRequestMethod.POST;
        phpFileRequest.data = phpVars;

        var phpLoader:URLLoader=new URLLoader();
        phpLoader.addEventListener(Event.COMPLETE, showResult);
        phpLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityError);
        phpLoader.addEventListener(IOErrorEvent.IO_ERROR, ioError);
        phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

        phpVars.email = email.text;
        phpVars.password = password.text;

        phpLoader.load(phpFileRequest) 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:29:20.297

只是从阅读您的代码，不了解 AS，我猜这里

```
 var phpVars:URLVariables = new URLVariables();
    var phpFileRequest:URLRequest = new URLRequest("php/index.php");

    phpVars.email = email.text;
    phpVars.password = password.text;
    phpVars.setData= 'true';//**************** LOOK HERE!!!!!!!!!!!!!!!!!!

    phpFileRequest.method = URLRequestMethod.POST;
    phpFileRequest.data = phpVars;

    var phpLoader:URLLoader=new URLLoader();
    phpLoader.addEventListener(Event.COMPLETE, showResult);
    phpLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityError);
    phpLoader.addEventListener(IOErrorEvent.IO_ERROR, ioError);
    phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

    phpLoader.load(phpFileRequest) 
```

# php - mysqldump 在其查询中显示密码：php

> ID：15040705
> 
> 赞同：0
> 
> 时间：2013-02-23T12:49:09.983
> 
> 标签：php, mysql, mysqldump

如果重复，我很抱歉stackoverflow

我正在尝试在 php 中进行备份，效果很好

```
$path_to_mysqldump = "E:\\xampp\\mysql\\bin";
$query= "$path_to_mysqldump\\mysqldump.exe -u$dbuser -p$dbpass $dbname > E:\\$backup_file ";

exec($query); 
echo $query; 
```

这给了我我的备份文件，但我的密码显示在查询中，

```
E:\xampp\mysql\bin\mysqldump.exe -uroot -prahul myblog > E:\myblog2013-Feb-23-13-28-40.sql 
```

密码 -**拉胡尔**

我想避免这种情况，而且我不是在谈论 echo $query;

在 Windows 上使用 xampp 的 IM

所以非常感谢任何帮助

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:23:23.090

您始终可以创建一个新的 my.ini 文件，该文件可以位于只有您的用户可以访问的目录中，并将其传递给 mysqldump。

该文件将如下所示：

```
[client]
host=localhost
user=root
password=rhaul 
```

您可以通过`--defaults-file`选项将其传递给 mysqldump

```
E:\xampp\mysql\bin\mysqldump.exe --defaults-file=C:\ProtectedDir\my.ini myblog > E:\myblog2013-Feb-23-13-28-40.sql 
```

# python - 使用瓶子（或烧瓶或类似物）上传流式文件

> ID：15040706
> 
> 赞同：13
> 
> 时间：2013-02-23T12:49:20.840
> 
> 标签：python, rest, file-upload, bottle

我有一个使用 Python/Bottle 编写的 REST 前端，它处理文件上传，通常是大文件。API 的编写方式如下：

客户端将 PUT 与文件一起作为有效负载发送。除其他外，它发送 Date 和 Authorization 标头。这是一种针对重放攻击的安全措施——请求使用临时密钥、目标 url、日期和其他一些东西进行签名

现在的问题。如果提供的日期在 15 分钟的给定日期时间窗口内，则服务器接受请求。如果上传需要足够长的时间，它将比允许的时间增量更长。现在，请求授权处理是使用瓶子视图方法上的装饰器完成的。但是，除非上传完成，否则瓶子不会启动调度过程，因此在较长的上传时验证会失败。

我的问题是：有没有办法向瓶子或 WSGI 解释以立即处理请求并在上传时进行流式传输？由于其他原因，这对我也很有用。还是有其他解决方案？在我写这篇文章时，我想到了 WSGI 中间件，但我仍然想要外部洞察力。

我愿意切换到 Flask，甚至其他 Python 框架，因为 REST 前端非常轻量级。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T15:09:41.800

我建议在前端将传入的文件分割成更小的块。我这样做是为了在 Flask 应用程序中实现大文件上传的暂停/恢复功能。

使用[Sebastian Tschan 的 jquery 插件](https://github.com/blueimp/jQuery-File-Upload/wiki)`maxChunkSize`，您可以通过在初始化插件时指定 a 来实现分块，如下所示：

```
$('#file-select').fileupload({
    url: '/uploads/',
    sequentialUploads: true,
    done: function (e, data) {
        console.log("uploaded: " + data.files[0].name)
    },
    maxChunkSize: 1000000 // 1 MB
}); 
```

现在客户端在上传大文件时会发送多个请求。您的服务器端代码可以使用`Content-Range`标头将原始大文件修补在一起。对于 Flask 应用程序，视图可能类似于：

```
# Upload files
@app.route('/uploads/', methods=['POST'])
def results():

    files = request.files

    # assuming only one file is passed in the request
    key = files.keys()[0]
    value = files[key] # this is a Werkzeug FileStorage object
    filename = value.filename

    if 'Content-Range' in request.headers:
        # extract starting byte from Content-Range header string
        range_str = request.headers['Content-Range']
        start_bytes = int(range_str.split(' ')[1].split('-')[0])

        # append chunk to the file on disk, or create new
        with open(filename, 'a') as f:
            f.seek(start_bytes)
            f.write(value.stream.read())

    else:
        # this is not a chunked request, so just save the whole file
        value.save(filename)

    # send response with appropriate mime type header
    return jsonify({"name": value.filename,
                    "size": os.path.getsize(filename),
                    "url": 'uploads/' + value.filename,
                    "thumbnail_url": None,
                    "delete_url": None,
                    "delete_type": None,}) 
```

对于您的特定应用程序，您只需确保仍然随每个请求发送正确的身份验证标头。

希望这可以帮助！我在这个问题上苦苦挣扎了一段时间；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-24T17:35:32.460

使用 plupload 解决方案时可能是这样的：

```
$("#uploader").plupload({
    // General settings
    runtimes : 'html5,flash,silverlight,html4',
    url : "/uploads/",

    // Maximum file size
    max_file_size : '20mb',

    chunk_size: '128kb',

    // Specify what files to browse for
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"},
    ],

    // Enable ability to drag'n'drop files onto the widget (currently only HTML5 supports that)
    dragdrop: true,

    // Views to activate
    views: {
        list: true,
        thumbs: true, // Show thumbs
        active: 'thumbs'
    },

    // Flash settings
    flash_swf_url : '/static/js/plupload-2.1.2/js/plupload/js/Moxie.swf',

    // Silverlight settings
    silverlight_xap_url : '/static/js/plupload-2.1.2/js/plupload/js/Moxie.xap'
}); 
```

在这种情况下，您的 flask-python 代码将类似于：

```
from werkzeug import secure_filename

# Upload files
@app.route('/uploads/', methods=['POST'])
def results():
    content = request.files['file'].read()
    filename = secure_filename(request.values['name'])

    with open(filename, 'ab+') as fp:
        fp.write(content)

    # send response with appropriate mime type header
    return jsonify({
        "name": filename,
        "size": os.path.getsize(filename),
        "url": 'uploads/' + filename,}) 
```

Plupload 总是以完全相同的顺序发送块，从头到尾，所以你不必费心寻找或类似的事情。

# iphone - 我可以阻止按钮吗？

> ID：15040708
> 
> 赞同：2
> 
> 时间：2013-02-23T12:49:38.197
> 
> 标签：iphone, ios

我在 ControlView 中有一个 DatePicker() 和按钮，当我单击该按钮时，它会跳转到一个函数，在该函数中我使用我在 DatePicker（旋转）中选择的日期，问题是 datePicker 旋转时我单击按钮它不选择日期，而是在不选择日期的情况下跳转到功能。旋转日期选择器以阻止按钮时是否可行？或者它可以是另一种方式？

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:01:24.310

当`UIDatePicker`用户完成旋转控件（对于事件`UIControlEventValueChanged`）时，控件将发送一个操作方法。您可以使用此操作方法*启用*按钮，以便仅在用户完成选择日期后才能按下按钮。

请参阅[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)：

> 如果配置正确，UIDatePicker 对象会在用户完成旋转其中一个轮子以更改日期或时间时发送操作消息；关联的控件事件是 UIControlEventValueChanged。

# android - 在布局中创建的列表视图中列出配对的蓝牙设备

> ID：15040709
> 
> 赞同：1
> 
> 时间：2013-02-23T12:49:41.700
> 
> 标签：android, xcode, bluetooth, helpers, core-bluetooth

我想在我在布局中创建的列表中列出所有配对的设备。这段代码有什么问题？我刚刚创建了这个函数来显示所有绑定的设备

```
void tooth_scan() {
    ListView listView = (ListView) findViewById(R.id.pairList);
    Set<BluetoothDevice> pairedDevices = bAdapter.getBondedDevices();
    devicesPaired = new String[pairedDevices.size()];
    int count = 0;
    if (pairedDevices.size() > 0) {
        for (BluetoothDevice device : pairedDevices) {
            devicesPaired[count] = device.getName();
        }

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1,
                devicesPaired);
        listView.setAdapter(adapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-08T09:19:37.480

```
public void showPairedDevices()
    {
        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        if (pairedDevices.size() > 0) {
            ArrayList<String> bluetoothDevices = new ArrayList<String>();
            for (BluetoothDevice device : pairedDevices) {

                String deviceName = device.getName(); // Get BT name
                String deviceAddress = device.getAddress(); // Get MAC
                ListView listView = (ListView)findViewById(R.id.paired_list);

                bluetoothDevices.add(deviceName);

                final ArrayAdapter<String> adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1,bluetoothDevices);
                listView.setAdapter(adapter);

            }

        }
    } 
```

# android - 如何在一个 Android 应用程序中同时管理服务器端和客户端程序

> ID：15040711
> 
> 赞同：0
> 
> 时间：2013-02-23T12:49:45.007
> 
> 标签：android, bluetooth

我已经浏览了很多网站，但我没有得到任何解决方案，而是我得到了解决方案，就像在同一个应用程序中一样，一个应该充当服务器，另一个充当客户端，我不想要这种解决方案....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:05:44.557

在您的 clent 类中打开一个 SeverSocket 来侦听任何即将到来的连接。您应该在一个线程中执行此操作：

```
ServerSocket serverSocket;
try 
{
    serverSocket = new ServerSocket(100);
    while(true) 
    {
        Socket socket = serverSocket.accept();  // accept connection
        MyThread t = new MyThread(socket);    // make a thread of it
        t.start();
    }
} 
```

线程 t 处理新的套接字。

# javascript - 在子窗口javascript中调用父窗口函数

> ID：15040716
> 
> 赞同：0
> 
> 时间：2013-02-23T12:50:17.820
> 
> 标签：javascript, jquery, function, window

嗨我想在子窗口中从父窗口运行函数

但是下面的代码不起作用

索引.php

```
//set status message
function setStatus($html){
    $("#data").html($html);
    }

//twitter login page handler
function twitter(){
    win = window.open('twit.php','win',"width=882,height=750,toolbar=0");
    setStatus('proccess...');
    }

//close window
 function closeWin(){
    win.close();
    }

//open new window
$(".twitterBtn").click(twitter); 
```

推特.php

```
<script language="javascript" type="text/javascript">
window.opener.setStatus('Login with Twitter!');
window.opener.closeWin();
</script> 
```

我的 window.opener 问题，它不起作用

请提出一种适用于所有浏览器且不与其他代码冲突的方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:51:59.697

好的，花了一段时间，但我有一个工作示例。

我使用 postMessage 进行信息交换，但是，它仅用于让孩子知道其父母。但我将示例扩展为亲子聊天。玩得开心：

```
<html>
<head>
    <script>
        window.addEventListener("load",init,false);
        window.addEventListener("message",message,false); //register postMessages

        //we need this because master(original) and slave(=window.open) must do different actions
        var isSlave=window.location.href.indexOf("slave=true")>0

        //the other-window (in the slave, this is undefined, until the handshake is complete
        var popupwindow;
        if (!isSlave){
            popupwindow=window.open(window.location.href+"?slave=true", "_blank",'toolbar=0,location=0,menubar=0'); 
        }

        // this is called from the child window, after handshake
        function test(){
            var listElem = document.createElement('li');
            listElem.innerHTML="handshake succesful!!!!!";
            document.querySelector("ul").appendChild(listElem);
        }

        function init(){
            document.querySelector("button").addEventListener("click",function(){
                        ////popupwindow.test(); //note this works only if same origin policy allows this, else use postMessages

                //here we send the message to the other window
                popupwindow.postMessage(document.querySelector("#inp").value,"*");
            },false);

            //the timetrigger is needed, because opening and initializing the new window takes time, then we perform a handshake to let the new window know his origin
            setTimeout(function(){
            if(!isSlave)
                popupwindow.postMessage("handshake successful","*");//handsake needed for bidirectional conneciton  
            },200);

        }

        //called when receiving a message
        function message(data){

            //needed for bidirectional message
            if (!popupwindow){
                popupwindow=data.source;
                //popupwindow.postMessage("handshake successful","*"); //send the handshake back to the origin (notification purpose only) //instead, we do test()
                popupwindow.test();
            }

            //display the message
            var listElem = document.createElement('li');
            listElem.innerHTML=data.data;
            document.querySelector("ul").appendChild(listElem);

        }
    </script>
</head>

<body>
    <button>say hello</button>
    <input type="text" id="inp" />
    <ul></ul>
</body>
</html> 
```

# javascript - EventEmitter.call() 做什么？

> ID：15040717
> 
> 赞同：26
> 
> 时间：2013-02-23T12:50:18.867
> 
> 标签：javascript, node.js

我看到了这个代码示例：

```
function Dog(name) {
    this.name = name;
    EventEmitter.call(this);
} 
```

它从 EventEmitter “继承”，但 call() 方法实际上做了什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-23T12:57:05.633

基本上，`Dog`应该是具有属性的构造函数`name`。在实例创建`EventEmitter.call(this)`期间执行时，将从构造函数`Dog`声明的属性附加到.`EventEmitter``Dog`

请记住：构造函数仍然是函数，并且仍然可以用作函数。

```
//An example EventEmitter
function EventEmitter(){
  //for example, if EventEmitter had these properties
  //when EventEmitter.call(this) is executed in the Dog constructor
  //it basically passes the new instance of Dog into this function as "this"
  //where here, it appends properties to it
  this.foo = 'foo';
  this.bar = 'bar';
}

//And your constructor Dog
function Dog(name) {
    this.name = name;
    //during instance creation, this line calls the EventEmitter function
    //and passes "this" from this scope, which is your new instance of Dog
    //as "this" in the EventEmitter constructor
    EventEmitter.call(this);
}

//create Dog
var newDog = new Dog('furball');
//the name, from the Dog constructor
newDog.name; //furball
//foo and bar, which were appended to the instance by calling EventEmitter.call(this)
newDog.foo; //foo
newDoc.bar; //bar 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-12-22T19:56:22.093

```
EventEmitter.call(this); 
```

这一行大致相当于在具有经典继承的语言中调用 super()。

# actionscript-3 - 数组中的for循环问题

> ID：15040718
> 
> 赞同：1
> 
> 时间：2013-02-23T12:50:24.007
> 
> 标签：actionscript-3, flash-cs5

最初，该数组将默认值保存为 100。一旦敌人失去其生命值，那么我想将默认值从 100 设置为 0。当所有数组元素的值都为 0 时，该消息将跟踪为游戏获胜。

```
var enemyHealth:Array = new Array(100,100,100,100,0);

    for (var i = 0; i< enemyHealth.length; i++)
    {

        if (enemyHealth[i] == 0)
        {
            trace ("game win");
        }

    } 
```

实际上，问题是如果数组元素中的任何一个的值为 0，那么它会在游戏获胜时跟踪按摩。

那么任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:54:16.420

我会做这样的事情

```
var enemyHealth:Array = new Array(100,100,100,100,0);

var isDead:Boolean = true;
for (var i = 0; i< enemyHealth.length; i++)
{

   if (enemyHealth[i] != 0)
   {
        isDead = false;
        break;
   }
}

if(isDead)
{
    trace ("Game Win");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:54:33.067

您需要检查所有元素，而不仅仅是一个：

```
var allZero:Boolean = true;
var enemyHealth:Array = new Array(100,100,100,100,0);

for (var i = 0; i< enemyHealth.length; i++)
{

    if (enemyHealth[i] != 0)
    {
        allZero = false;
        break; // We know it's not a win, so we can stop the loop early
    }

}
if (allZero) {
    trace ("game win");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:58:50.830

您可以执行其他回答者所说的或类似的操作，这可能会帮助您更多地获得确切数量的敌人死亡。

```
var enemyHealth:Array = new Array(100,100,100,100,0);
var enemiesDead:int=0;

    for (var i = 0; i< enemyHealth.length; i++)
    {

        if (enemyHealth[i] == 0)
        {
            enemiesDead++;
        }

    }

if(enemiesDead==enemyHealth.length)
{
    trace("Game Over");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T13:34:38.040

您可以使用该`every`方法检查数组（或向量）的每个元素是否符合标准。

```
const enemyHealth:Vector.<uint> = new <uint>[100,100,100,100,0];

const zeroHealth:Function = function(item:uint, index:int, vector:Vector.<uint>):Boolean {
   return item === 0;
}

if (enemyHealth.every(zeroHealth)) {
    trace("Game win")
} 
```

我已将 更改`array`为 a`Vector`因为它们更有效，并且您可以指定元素的类型，但它也适用于`array`.

# javascript - 不同 JavaScript 库之间的参数传递

> ID：15040721
> 
> 赞同：1
> 
> 时间：2013-02-23T12:50:50.263
> 
> 标签：javascript, jquery, html, extjs, d3.js

在我的应用程序中，我有一个用 extjs 制作的网格，单击每一行时，我需要将该行的选定单元格值传递给另一个 JavaScript 库。因此，为此，我将 html 视为桥梁，如果我能以某种方式获得 html 中的值，那么我认为通过休息将不会是一项艰巨的工作。在这方面，我有几个问题

1.  我的想法正确吗？
2.  如果是这样，谁能建议我如何将参数从 extjs 传递到 html？

我正在使用此代码从 Extjs 网格中检索单元格值

```
 var grid = Ext.getCmp('lineGridChart');
    var selectedRecords= grid.getView().getSelectionModel().getSelection();
    myWTN  = selectedRecords[0].get('wtn');
    myMOU  = selectedRecords[0].get('avg');
    myWING = selectedRecords[0].get('wing');
    myPDU  = selectedRecords[0].get('pdu'); 
```

我需要将这些值传递给 d3 或简单的 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:11:27.577

您可以使用本地存储...或者只是：

```
myData  = selectedRecords[0].getData(); 
```

更新：

```
myData = {
    data: {},
    set: function(data) {
        myData.data = data;
        // You jquery logik
    }
};

myData.set(selectedRecords[0].getData()); 
```

# python - Saltstack 分组命令

> ID：15040725
> 
> 赞同：6
> 
> 时间：2013-02-23T12:51:35.887
> 
> 标签：python, salt-stack

如果我必须执行以下 3 个命令，如何将它们分组以便只调用一个？

```
salt '*' git.fetch cwd=/var/git/myproject opts='--all' user=git
salt '*' git.pull cwd=/var/git/myproject opts='origin master'
salt '*' nginx.signal reload 
```

我可以使用fabric将它们放在一个函数中，说它`deploy`可能接受一个minion名称然后通过master运行，但我想知道saltstack是否有内置的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T06:39:02.343

这是自定义模块的理想选择。

您可以在此处阅读有关创建自定义模块的信息：http: [//docs.saltstack.com/ref/modules/index.html](http://docs.saltstack.com/ref/modules/index.html)。将您的自定义模块放在 /srv/salt/_modules （默认位置），然后运行

```
salt \* saltutil.sync_modules 
```

然后，您的模块将可用于在您的 minions 上运行。

如果您的模块名为“deploy”且函数为“mysite”，那么您的自定义命令将如下所示：

```
salt \* deploy.mysite 
```

如果您想针对特定的仆从，那么它将如下所示：

```
salt 'minion_name' deploy.mysite 
```

# java - 按下按钮时发送 SSH 命令

> ID：15040733
> 
> 赞同：0
> 
> 时间：2013-02-23T12:52:39.810
> 
> 标签：java, ssh

我有一台运行 Ubuntu (12.04.1 LTS) 的小型服务器。我可以从腻子控制服务器，但我想用 GUI 来做到这一点。我知道如何使用 GUI 创建 Java 应用程序。无论如何，我的问题是，单击按钮时如何发送 ssh 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:02:57.433

Jsch库允许您以编程方式从 java 执行 ssh [。](http://www.jcraft.com/jsch/)这应该允许您将必要的命令从您的 gui 发送到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:01:08.900

一种或多或少简单的方法是打开 ssh 隧道并将端口从本地计算机转发到服务器。我建议使用密钥对来省略输入密码。接下来，您编写您的应用程序，该应用程序可能由两部分组成，您的本地 GUI 和一些在服务器上执行命令的服务器。我仍然认为这是一个非常复杂的解决方案，但选择权在你。

# visual-c++ - 在 Windows 7 和 XP 中使用 QtQuick 2.0 部署 HelloWorld

> ID：15040736
> 
> 赞同：2
> 
> 时间：2013-02-23T12:52:50.630
> 
> 标签：visual-c++, deployment, qml, qt5, qtquick2

几个星期以来，我一直在努力正确部署我的应用程序（这是一种爱好），我只是不知道还能尝试什么。

我通过选择 Applications -> Qt Quick 2 Application (Built-in Elements) 在 Qt Creator (2.6.1) 中启动了一个新项目。我调整了 QML，使背景为蓝色，文本为红色：

### main.qml

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360
    color: "blue" // Added!
    Text {
        text: qsTr("Hello World")
        anchors.centerIn: parent
        color: "red" // Added!
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            Qt.quit();
        }
    }
} 
```

我正在使用 Qt 5.0.1 和 x86 MSVC 2010 编译器。我构建了发布版本，它在 QtCreator 中运行良好。如果您需要更多编译器细节，我会发布它们。

为了部署，我在我的桌面上创建了一个名为的新文件夹，`HelloWorld/`并将**所有内容**从`H:\Qt\Qt5.0.1\5.0.1\msvc2010\bin\*`and`H:\Qt\Qt5.0.1\5.0.1\msvc2010\plugins\*`和 'H:\Qt\Qt5.0.1\5.0.1\msvc2010\qml* 以及 Release HelloWorld.exe 可执行文件复制到其中。

矫枉过正？是的。但我很绝望。

当我在 Windows 7 64 位中运行 HelloWorld/HelloWorld.exe 时，应用程序运行良好。但是，当我将此 HelloWorld/ 文件夹复制到运行 Windows XP 32 位的虚拟机中时，它会显示一个大小合适的窗口，但其中没有任何内容（白色，没有文本）。单击窗口中心时，窗口将按原样关闭。

所以我在 Dependency Walker 中加载了可执行文件，但没有任何异常（当然缺少 IESHIMS.DLL 和 WER.DLL）。我运行了 Start Profile，并得到了一系列红色错误：

> GetProcAddress(0x7C800000 [KERNEL32.DLL], "FlsAlloc") 从地址 0x78ABBA3B 的“MSVCR100.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C800000 [KERNEL32.DLL], "FlsGetValue") 从地址 0x78ABBA48 的“MSVCR100.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C800000 [KERNEL32.DLL], "FlsSetValue") 从地址 0x78ABBA55 的“MSVCR100.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C800000 [KERNEL32.DLL], "FlsFree") 从地址 0x78ABBA62 的“MSVCR100.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> LoadLibraryExW("C:\documents and settings\owner\desktop\helloworld\platforms\qminimald.pdb", 0x00000000, DONT_RESOLVE_DLL_REFERENCES) 返回 NULL。错误：%1 不是有效的 Win32 应用程序 (193)。
> 
> LoadLibraryExW("C:\documents and settings\owner\desktop\helloworld\platforms\qwindowsd.pdb", 0x00000000, DONT_RESOLVE_DLL_REFERENCES) 返回 NULL。错误：%1 不是有效的 Win32 应用程序 (193)。
> 
> GetProcAddress(0x7E410000 [USER32.DLL], "UpdateLayeredWindowIndirect") 从地址 0x013A8749 的“QWINDOWS.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C9C0000 [SHELL32.DLL], "SHCreateItemFromParsingName") 从地址 0x013A8997 的“QWINDOWS.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C9C0000 [SHELL32.DLL], "SHGetStockIconInfo") 从地址 0x013A89C9 的“QWINDOWS.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x7C800000 [KERNEL32.DLL], "GetTickCount64") 从地址 0x670726A7 的“QT5CORE.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x755C0000 [MSCTFIME.IME], "ImeGetImeMenuItems") 从地址 0x76397354 的“IMM32.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。
> 
> GetProcAddress(0x4FDD0000 [D3D9.DLL], "Direct3DCreate9Ex") 从地址 0x01487198 处的“LIBEGL.DLL”调用并返回 NULL。错误：找不到指定的过程 (127)。

我也尝试运行调试版本，但我只有 64 位版本的 MSVC100 dll，所以我无法将它们复制到 XP 机器（我只能运行 32 位可再发行版本）。我不知道我可以使用哪些其他工具来尝试解决我的问题。

我知道我一定是在做一些愚蠢的事情，但我真的在互联网上找不到任何可以帮助的东西。花这么多时间开发一个 Qt 应用程序，然后在尝试部署它时陷入困境，真是令人沮丧。

我应该注意到，该程序在 Windows 7 32 位虚拟机中运行良好（在安装了 MSVC2012 可再发行组件之后）。

我*真正*感兴趣的应用程序在 Windows XP 中运行起来非常奇怪。当我第一次运行它时，窗口大小正确，并显示了几个文本字符串。但是没有显示任何 Rectangle{} 元素。我让应用程序运行了几分钟，为自己煮了些咖啡，当我回到我的电脑时，窗口随着文本光标的节拍闪烁着随机的形状和文本！那是什么呀？！看起来一个基本的数学函数被搞砸了，所以界面的某些部分以不正确的尺寸和位置显示。我什至看到鼠标光标一眨眼就出现了真实的界面（是的，随机形状会随着鼠标光标的节拍出现和消失）。

一时兴起，我尝试使用该应用程序（单击我**知道**存在文本框的位置）来填充其中一个列表，并且成功了！除图形外，该应用程序运行良好。我知道 Qt 5.0 重新处理了一些 OpenGL 处理，对吗？这可能是一个错误，或者可能是我尚未安装的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:16:23.220

我在使用 ANGLE 的 Qt 5.1 rc1 构建的 Windows XP 上部署 quick 2.0 应用程序时也遇到了同样的问题；这似乎是角度问题，在[http://qt-project.org/wiki/Qt-5-on-Windows-ANGLE-and-OpenGL](http://qt-project.org/wiki/Qt-5-on-Windows-ANGLE-and-OpenGL)上建议使用 OPENGL for XP，Qt 5.1 with OPENGL 也适用于我视窗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T13:01:47.307

1.  在客户端计算机 (windows xp) 上安装[Microsoft Visual C++ 2010 Redistributable Package (x86 )。](http://www.microsoft.com/en-us/download/details.aspx?id=5555)
2.  使用发布版本，而不是调试版本，您似乎使用的是调试版本。
3.  不要使用 OpenGL（大多数 XP 用户可能会注意到已经更新了 OpenGL 版本，否则您可能不得不强制他们升级它。）

**更新** 为 Windows XP 使用 OpenGL。用户必须安装或升级他们的 OpenGL 驱动程序。[读这个](http://qt-project.org/wiki/Qt-5-on-Windows-ANGLE-and-OpenGL)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T03:22:14.240

尝试使用 MinGW 版本而不是 VC++ 版本。很可能有一层又一层的 .Net 东西阻​​止您在 XP 上运行。XP 在 90% 的当前 .Net 东西存在之前就出现了，这就是为什么它无法工作，因为它没有安装。

只是一个猜测，但值得一试。

# php - 每页 WordPress 帖子（存档）

> ID：15040737
> 
> 赞同：1
> 
> 时间：2013-02-23T12:53:00.460
> 
> 标签：php, custom-post-type, wordpress

我有一个自定义帖子类型，想更改每页的帖子数量。我使用以下代码来显示/限制帖子：

```
 $args = array(
        'post_type' => 'movie',
        'posts_per_page' => 3,
        'tax_query' => array(
            array(
              'taxonomy' => $wp_query->queried_object->taxonomy,
              'field' => 'slug',
              'terms' => $wp_query->queried_object->slug,
            )
        ),
        'paged' => get_query_var('paged') ? get_query_var('paged') : 1
    );
    query_posts( $args ); 
```

这次我有 20 篇这种帖子类型的帖子，wordpress 管理中每页的默认帖子（设置/阅读...）设置为 10。

如果我在没有页面的情况下调用 url，它会显示 3 个帖子，如果我用“page/2/”调用 url，它会显示 3 个帖子，但如果我用“page/3/”调用页面，它会显示没有找到...

**我不会更改管理员中帖子的默认值 - 有人知道吗？**

注意：为了“调试”，我让我显示“$wp_query->post_count;”的值 - 这使用每页的默认管理员帖子 - 10 ...

问候凯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T13:05:18.133

当您加载页面时，它会在调用模板文件 (archive.php) 之前进行查询。

第一个查询将使用 WordPress 中设置的默认值；IE。每页 10 个帖子。从事物的声音来看，您正在archive.php 中运行第二个“query_posts”调用，但听起来好像是在您运行了适当的检查之后。

两种可能的解决方案：

1.  使用 posts_per_page 修改第一个查询

    ```
    add_filter( 'pre_get_posts', 'modify_movie_query' );

    function modify_movie_query( $wp_query ) {
        if( $wp_query->query_vars['post_type'] != 'movie' ) return;
        $wp_query->query_vars['posts_per_page'] = 3;
    } 
    ```

    因为您修改了对 $wp_query 的引用，所以不需要返回它。

2.  `query_posts`在 archive.php 模板的顶部运行调用

选项 1 是我推荐的——它是最有效的，也是最合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T20:47:30.530

如果存档页面用于自定义分类，则批准的答案实际上不起作用。在这种情况下，您可能需要使用以下内容：

```
add_filter( 'pre_get_posts', 'modify_movie_query' );

function modify_movie_query( $wp_query ) {
  if(is_tax('movie-category')){
    $wp_query->query_vars['posts_per_page'] = 10;
  }
  return $wp_query
} 
```

# java - java.io.IOException：对等方重置连接

> ID：15040745
> 
> 赞同：0
> 
> 时间：2013-02-23T12:53:42.160
> 
> 标签：java, ubuntu, ip, netty

直到昨天我的服务器工作正常，在客户端突然断开 500 次后，我的 Netty 服务器显示 **java.io.IOException: Connection reset by peer** error while client is connected。服务器运行在 Ubuntu Linux 12.04.1 LTS 版上

JRE 7

和netty 3.5.11

为什么我收到此错误？

这是由于任何操作系统问题（例如 IP 阻止程序）而发生的吗？

“我已经读到，在尝试向关闭的频道写入内容时发生此异常。但在我的情况下，我不知道频道是如何关闭的。发送消息后频道正在关闭，所有其他功能都可以正常工作，直到昨天“我已经设置了 u 限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:50:38.280

> “我读到这个异常是在尝试向封闭通道写入内容时发生的。

不，你没有。您已经阅读或应该阅读，这可能是由于写入已被对等方关闭的*连接而发生**的。*这根本不是一回事。如果您在任何地方阅读您所说的内容，您应该停止使用该来源。

# dependency-injection - 使用@EJB 通过远程接口访问企业 Bean

> ID：15040746
> 
> 赞同：1
> 
> 时间：2013-02-23T12:53:42.563
> 
> 标签：dependency-injection, ejb, javabeans, remote-access

我有一个这样的界面：

```
@Remote
public interface ClientDataAccessRemote 
```

EJB 实现了它：

```
@Stateless
public class ClientDataAccess implements ClientDataAccessRemote 
```

在远程客户端中，我可以使用以下命令访问 EJB：

```
@EJB
private static ClientDataAccessRemote clientDataAccess; 
```

这就是我所做的一切，并且有效。客户端和 EJB 驻留在同一台服务器上。如果分开了还能用吗？容器如何找到具有该接口的 EJB？我用 Netbeans 实现了这个，我不必指定任何位置或类似的东西。这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:09:16.290

不幸的是，@EJB 注释仅适用于本地（单个 JVM）注入。对于单独的主机，您需要回退到普通的 JNDI 查找。

AFAIK 有一些专有的非便携式解决方案可以执行远程依赖注入，例如用于 WebLogic 服务器（[此处](https://stackoverflow.com/questions/1560335/is-it-possible-to-use-ejb-annotation-to-inject-ejbs-through-different-servers)），但我不会那样做。

JNDI 查找有效，但过于复杂且非常难看：

*   您需要了解服务器供应商并将其客户端库添加到您的应用程序的依赖项中，
*   你污染了应用程序：
    *   神秘的供应商特定的 URI 格式
    *   特定于供应商的命名服务端口号（通常默认为 1099，但谁知道...）
    *   特定于供应商的 jndi 名称模式

这是远程 JBoss 4.x 实例上托管的 bean 的示例查找：

```
Properties properties = new Properties();
properties.put(Context.INITIAL_CONTEXT_FACTORY,
    "org.jnp.interfaces.NamingContextFactory");
properties.put(Context.URL_PKG_PREFIXES,
    "org.jboss.naming:org.jnp.interfaces");
properties.setProperty(Context.PROVIDER_URL, "localhost:1099");
InitialContext context = null;
ClientDataAccessRemote cl = null;
try {
    context = new InitialContext(properties);
    cl = (ClientDataAccessRemote) context.lookup("ClientDataAccess/remote");
} catch (NamingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

鉴于您的 EJB 是 EAR 的一部分，您需要在 EJBean 的名称前面加上 EAR 的名称：

```
cl = (ClientDataAccessRemote) context.lookup("MyEAR/ClientDataAccess/remote"); 
```

上面的例子是特定于 JBoss 的，我什至不确定它是否可以在没有修改的情况下与 JBoss 5.x 系列一起使用。

显然 EJB 3.1 规范为 jndi 命名带来了一些统一，但我还没有乐于使用它。

如果这个示例让您有些害怕，也许更好的解决方案是将您的 EJB 公开为 Web 服务（SOAP 或 REST 样式）。它带来了它自己的问题，但至少是可移植的。

# python - Python中的惰性参数绑定

> ID：15040754
> 
> 赞同：1
> 
> 时间：2013-02-23T12:54:32.117
> 
> 标签：python, oop, design-patterns, functional-programming, workflow

我尝试使用 设计工作流`composite pattern`，示例代码如下所示：

```
class CommandInterface(object):
    def __init__(self, name, template=None, tool=None, param : dict={},input=None, output=None ):
        self.name = name
        self.input = input
        self.output = output
        self.param = param
        self.template = template
    def before_invoke(self):
        pass   # check before invoke
    def invoke(self):
        pass
    def after_invoke(self):
        pass  # check after invoke
class ShellCommand(CommandInterface):    
    def render(self):
        cmd = self.template.format(input=self.input,
                                    output=self.output,
                                    param=self.param,
                                    )
        return cmd
    def before_invoke(self):
        pass
    def invoke(self):
        os.system(self.render())

class Workflow(CommandInterface):
    def __init__(self, name):
       self.name = name
       self._input = []
       self._output = []
       self._commands = []
       self._tool = []
    def add(self, command : CommandInterface):
        self._commands.append(command)
        return self

    def invoke(self):
        for command in self._commands:
            command.invoke() 
```

并且可以这样使用：

```
workflow = Workflow()
raw_files = ["file1", "file2", "file3"]
for i in raw_files:
    head_command = ShellCommand("head {input} {output}", 
                                input = i, 
                                output = i+"_head")
    workflow.add(head_command)
merge_command = ShellCommand("cat {input} > {output}", 
                             input=" ".join([i+"_head" for i in rawfiles]), 
                             output="merged")
workflow.add(merge_command)

workflow.invoke() 
```

但是，有时一个命令的输入可能是另一个命令的结果，例如：

```
class PythonCommand(CommandInterface):    
    def invoke(self):
        self._result = self.template(input=self.input, output=self.output, param=self.param)

def a_command(input, output, param):
    take_long_time(input, output, param)
    return {"a_result": "some result will be used in b_command"}

def b_command(input, output, param):
    def need_the_result_of_a_command(input, output, param):
        return param["a_result"]
    need_the_result_of_a_command(input, output, param)
    return "success"

a = PythonCommand(a_command, input_, output_, param_)
a.invoke()
b = PythonCommand(b_command, input_, output_, param= a._result)
b.invoke() 
```

我不能使用工作流来合成这 2 个命令，因为`b`使用`a`' 结果作为参数，这仅在调用 a 后可见。但是，在某些情况下，仍然需要像之前的代码这样的工作流管理器。我想我需要这样的东西：

```
workflow = Workflow()
a = PythonCommand(a_command, input_, output_, param_)
workflow.add(a)
b = PythonCommand(b_command, input_, output_, param= {"a_result": a.lazy()._result})
workflow.add(b)
workflow.invoke() 
```

有没有人对如何设计具有`.lazy()`这样实现的工作流有想法？

# c++ - 在 C++ 中使用全局 update() 函数的 Obsever 模式（或类似模式）？

> ID：15040756
> 
> 赞同：1
> 
> 时间：2013-02-23T12:54:40.033
> 
> 标签：c++

我正在用 C++ 创建一个 MVC 应用程序，并且我希望较低级别的模型类能够使用简单的文本更新 GUI 以向读者显示输出。我不想传递函数或对象指针，因为它会变得混乱，我不得不到处传递它们。我本质上想要的是相当于控制台 GUI 的“cout”——某种全局函数，可以调用它来从任何地方更新 GUI，而无需了解有关 GUI 的任何信息。

我在标题中提到了观察者模式，因为它听起来很像——GUI 可以以某种方式订阅这个全局对象或函数，并监听它何时被调用。但是，我并不是专门寻找使用 Observer 的解决方案。

人们向我提到了信号和槽，但可以肯定的是，除非是全局的，否则您仍然需要“传递东西”以允许对象发出信号。同样，全球参考点会有所帮助。

如何在确保遵守良好设计原则的同时做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:01:33.520

您可以使用`stdout`and`stderr`来执行此操作。只需将它们的输出重定向到您的应用程序。最简单的解决方案 - 将应用程序输出重定向到文件并用于`tail -f redirected_output_file_name`查看更新。

否则您可以使用`log4cxx`，在这种情况下您需要实现自定义附加程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:09:44.843

确实，在这里使用观察者模式似乎很合适。但是，我认为您在这里有一些错误。您需要明确定义每个参与方的角色。我建议使用以下分区：GUI 是观察者（即侦听器），较低级别的对象是向侦听器发出更改信号的对象。初始化后，低级模块将向 GUI（观察者）注册自己。一旦发生变化，底层模块将执行观察者的公共监听处理程序，提供所需的数据作为输入。

这将使您能够实现您的目标，并且该方案不涉及全局变量。

# javascript - Codeigniter 路由。AJAX 使用 javascript 获取参数

> ID：15040757
> 
> 赞同：1
> 
> 时间：2013-02-23T12:54:52.513
> 
> 标签：javascript, ajax, codeigniter

我希望这与 Codeigniter 一起工作：

```
name = encodeURIComponent( document.getElementById("myName").value);

xmlHttp.open("GET", "quickstart.php?name=" + name, true);

xmlHttp.onreadystatechange = handleServerResponse; //not relevant for question

xmlHttp.send(null); 
```

我创建了一个带有参数的函数的控制器并更改了以前的代码：

```
xmlHttp.open("GET", "quickstart.php?name=" + name, true); 
```

到

```
xmlHttp.open("GET", "ajax/quickstart/"+name, true); 
```

我使用这条路线（但不起作用）：

```
$route['ajax'] = 'ajax';
$route['ajax/quickstart'] = 'ajax/quickstart';
$route['ajax/quickstart/([A-Za-z0-9])+'] = 'ajax/quickstart/$1'; 
```

**我遇到的问题是我只收到最后一封信。例如，如果我写“name”，只有“e”它作为参数传递。但是所有的消息都发送了。** 我的控制器功能如下所示：

```
public function quickstart($name='')
{
// we'll generate XML output
header('Content-Type: text/xml');
// generate XML header
echo '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';
// create the <response> element
echo '<response>';
// retrieve the user name
//$name = $this->input->get('name');

// generate output depending on the user name received from client
$userNames = array('YODA', 'AUDRA', 'BOGDAN');
if (in_array(strtoupper($name), $userNames))
    echo 'Hello, master ' . htmlentities($name) . '!';
else if (trim($name) == '')
    echo 'Stranger, please tell me your name!';
else

echo htmlentities($name) . ', I don\'t know you!';
// close the <response> element
echo '</response>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:15:35.273

仅使用

```
$route['ajax/quickstart/(:any)'] = "ajax/quickstart/$1"; 
```

[文档](http://ellislab.com/codeigniter/user-guide/general/routing.html)。

# java - 休眠类未映射

> ID：15040758
> 
> 赞同：0
> 
> 时间：2013-02-23T12:54:55.407
> 
> 标签：java, hibernate

帮我解决我的问题。当我使用方法`getDriversByBus(Bus bus)`时，我遇到了映射问题。

型号： Bus bus_id pk 号

驱动程序 driver_id pk 名称

busdriver bus_id fk driver_id fk

公共汽车

```
public class Bus {
    private Long id;
    private String number;
    private Set drivers = new HashSet();

    public Bus(){

    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getNumber() {
        return number;
    }

    public void setNumber(String number) {
        this.number = number;
    }

    public Set getDrivers() {
        return drivers;
    }

    public void setDrivers(Set drivers) {
        this.drivers = drivers;
    }

} 
```

司机

```
public class Driver {
    private Long id;
    private String name;
    private Set busses = new HashSet();

    public Driver(){

    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Set getBusses() {
        return busses;
    }

    public void setBusses(Set busses) {
        this.busses = busses;
    }

} 
```

1 级 - 司机：

```
public class DriverDAOImpl implements DriverDAO{

@Override
public void addDriver(Driver driver) throws SQLException {
    // TODO Auto-generated method stub
    Session session = null;
    try {
        session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
        session.save(driver);
        session.getTransaction().commit();

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
        JOptionPane.showMessageDialog(null, e.getMessage(), "Ошибка при вставке", JOptionPane.OK_OPTION);
    }

}

@Override
public Collection getAllDrivers() throws SQLException {
    // TODO Auto-generated method stub
    return null;
}

@Override
public Collection getDriversByBus(Bus bus) throws SQLException {
    // TODO Auto-generated method stub
    Session session = null;
    List drivers = new ArrayList<Driver>();
    try {
        session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
        Long bus_id = bus.getId();

        Query query = session.createQuery("select d"+
                " from com.ee.model.Driver d JOIN d.busses bus"
                + " where bus.id =:busid ").setLong("busid", bus_id);

        drivers = (List<Driver>)query.list();
        session.getTransaction().commit();

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

    finally{
        if(session!=null && session.isOpen()){
            session.close();
        }
    }
    return drivers;
}
} 
```

2 类 - 总线公共类 BusDAOImpl 实现 BusDAO {

```
@Override
public void addBus(Bus bus) throws SQLException {
    // TODO Auto-generated method stub

      Session session = null;
        try {
          session = HibernateUtil.getSessionFactory().openSession();
          session.beginTransaction();
          session.save(bus);
          session.getTransaction().commit();
        } catch (Exception e) {
            e.printStackTrace();
          JOptionPane.showMessageDialog(null, e.getMessage(), "Ошибка при вставке", JOptionPane.OK_OPTION);
        } finally {
          if (session != null && session.isOpen()) {

            session.close();
          }
        }
      }

@Override
public Collection getAllBusses() throws SQLException {
    // TODO Auto-generated method stub
       Session session = null;
        List busses = new ArrayList<Bus>();
        try {
          session = HibernateUtil.getSessionFactory().openSession();
          busses = session.createCriteria(Bus.class).list();
        } catch (Exception e) {
            e.printStackTrace();
          JOptionPane.showMessageDialog(null, e.getMessage(), "Ошибка 'getAll'", JOptionPane.OK_OPTION);
        } finally {
          if (session != null && session.isOpen()) {
            session.close();
          }
        }
        return busses;
      }

@Override
public Collection getDriverByBus(Driver driver) throws SQLException {
    // TODO Auto-generated method stub
    Session session = null;
    List busses = new ArrayList<Bus>();
    try {
        session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
        Long driver_id = driver.getId();
        Query query = session.createQuery("select b "+ 
        "from Bus b INNER JOIN b.drivers driver"+
                " where driver.id =:driverid ").setLong("driverid", driver_id);
        busses = (List<Bus>)query.list();
        session.getTransaction().commit();

    } catch (Exception e) {
        // TODO: handle exception
    }
    finally{
        if(session!=null && session.isOpen()){
            session.close();
        }
    }

    return busses;
}

} 
```

我的映射：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 22.02.2013 19:34:10 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.ee.model.Bus" table="busses">
        <id name="id" type="java.lang.Long">
            <column name="bus_id" />
            <generator class="increment" />
        </id>
        <property name="number" type="java.lang.String">
            <column name="NUMBER" />
        </property>
        <set name="drivers" table="busdriver" inverse="false" lazy="false">
            <key>
                <column name="bus_id" />
            </key>
            <many-to-many column="driver_id" class="com.ee.model.Driver"></many-to-many>
        </set>
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 22.02.2013 19:34:20 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="com.ee.model.Driver" table="drivers">
        <id name="id" type="java.lang.Long">
            <column name="driver_id" />
            <generator class="increment" />
        </id>
        <property name="name" type="java.lang.String">
            <column name="NAME" />
        </property>
        <set name="busses" table="busdriver" inverse="false" lazy="false">
            <key>
                <column name="driver_id" />
            </key>
            <many-to-many column="bus_id" class="com.ee.model.Bus"></many-to-many>

        </set>
    </class>
</hibernate-mapping> 
```

主类：

```
public class EEMain {

    /**
     * @param args
     */
public static void main(String[] args) throws SQLException{
    // TODO Auto-generated method stub

    Collection busses = Factory.getInstance().getBusDAO().getAllBusses();
    Iterator iter = busses.iterator();
    System.out.println("All busses");
    while(iter.hasNext()){
        Bus bus = (Bus) iter.next();
        Collection drivers = Factory.getInstance().getDriverDAO().getDriversByBus(bus);
        Iterator itr2 = drivers.iterator();
        System.out.println("Bus # " + bus.getNumber());
        while (itr2.hasNext()){
            Driver driver =  (Driver) itr2.next();
            System.out.println("Name: "+ driver.getName());
        }
    }

} 
```

}

休眠.cfg

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="ee">
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://127.0.0.1/mydb</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="connection.pool_size">1</property>
    <property name="current_session_context_class">thread</property>
    <property name="show_sql">true</property>
    <mapping resource="com/ee/model/Driver.hbm.xml"/>
    <mapping resource="com/ee/model/Bus.hbm.xml"/>
    </session-factory>
     </hibernate-configuration> 
```

工厂

```
public class Factory {
    private static BusDAO busDAO = null;
    private static DriverDAO driverDAO = null;
    private static Factory instance = null;

     public static synchronized Factory getInstance(){
            if (instance == null){
              instance = new Factory();
            }
            return instance;
          }

      public BusDAO getBusDAO(){
        if (busDAO == null){
          busDAO = new BusDAOImpl();
        }
        return busDAO;
      }

      public DriverDAO getDriverDAO(){
        if (driverDAO == null){
          driverDAO = new DriverDAOImpl();
        }
        return driverDAO;
      }

} 
```

休眠实用程序：

```
public class HibernateUtil {
      private static final SessionFactory sessionFactory;
        static {
          try {
            sessionFactory = new Configuration().configure().buildSessionFactory();
          } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
          }
        }

        public static SessionFactory getSessionFactory() {
          return sessionFactory;
        }
    } 
```

错误文字：

```
log4j:WARN 找不到记录器 (org.jboss.logging) 的附加程序。
log4j:WARN 请正确初始化 log4j 系统。
休眠：从总线 this_ 中选择 this_.bus_id 作为 bus1_2_0_，this_.NUMBER 作为 NUMBER2_0_
休眠：选择drivers0_.bus_id作为bus2_2_1_，drivers0_.driver_id作为driver1_1_1_，driver1_.driver_id作为driver1_0_0_，driver1_.NAME作为NAME0_0_从busdriver drivers0_内部连接drivers driver1_ on drivers0_.driver_id=driver1_.driver_id where drivers0_.bus_id=?
休眠：选择busses0_.driver_id作为driver1_0_1_，busses0_.bus_id作为bus2_1_1_，bus1_.bus_id作为bus1_2_0_，bus1_.NUMBER作为NUMBER2_0_从busdriver busses0_内部连接busses bus1_ on busses0_.bus_id=bus1_.bus_id where busses0_.driver_id=?
所有巴士
org.hibernate.hql.internal.ast.QuerySyntaxException：驱动程序未映射[从驱动程序 d 中选择 d，总线 b 其中 d.id = b.id 和 b.id =：busid]
10 号巴士
    在 org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180)
    在 org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110)
    在 org.hibernate.hql.internal.ast.tree.FromClause.addFromElement(FromClause.java:93)
    在 org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3291)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3180)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)
    在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement（HqlSqlBaseWalker.java:247）
    在 org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze（QueryTranslatorImpl.java:248）
    在 org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)
    在 org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    在 org.hibernate.engine.query.spi.HQLQueryPlan.(HQLQueryPlan.java:105)
    在 org.hibernate.engine.query.spi.HQLQueryPlan.(HQLQueryPlan.java:80)
    在 org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    在 org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)
    在 org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)
    在 org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1735)
    在 com.ee.DAO.DriverDAOImpl.getDriversByBus(DriverDAOImpl.java:59)
    在 com.ee.EEMain.main(EEMain.java:36)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:18:17.960

在我看来，mode.Driver 和 model.Driver 之间存在混淆。从 Hibernate 生成的 SQL 和错误消息都在谈论 com.ee.mode.Driver 但上面的大多数映射和代码都有 com.ee.model.Driver。

我在上面的代码中看不到错误，如果它在 java 中，它可能无法编译，因此我怀疑配置正在获取一个比上面问题中的映射文件更旧的映射文件，该文件已被更正。

我认为真正的问题是 Hibernate 正在 Bus 类中寻找一个名为“drivers”的集合。我认为 Bus 类的代码没有包含在上面，但我认为这是问题的核心。也许它有错误的名称或其他东西。它应该看起来像：

```
public class Bus {
private int id;
// Blah blah
private Set drivers;
// blah 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:55:41.217

让我们尝试隔离问题源。由于您将您的集合声明为非懒惰。当您尝试迭代 bus.getDrivers() Set 时，它会告诉您什么？

# c++ - OpenGL：C++：缓冲四边形对象（如圆柱体？）

> ID：15040759
> 
> 赞同：0
> 
> 时间：2013-02-23T12:54:57.180
> 
> 标签：c++, performance, qt, opengl, buffer

如果我想使用调用绘制 5000 个具有不同位置和方向的圆柱体

```
 glRotated(x1,y1,z1,theta);
  glTranslatef(x,y,z);

  quadObj = gluNewQuadric ();
  gluQuadricDrawStyle (quadObj, GLU_FILL);
  gluQuadricNormals (quadObj, GLU_SMOOTH);
  gluCylinder(quadObj, D, D, L-4*D, 32, 1);
  gluDeleteQuadric(quadObj); 
```

最有效的方法是什么？

从我读到的内容中，我看到必须缓冲它们然后将它们发送到硬件，但我只看到了由三角形等顶点组成的简单对象的示例。

你能给我提供一些关于如何缓冲复杂对象的例子吗？

# c++ - “showWindow”：找不到标识符 包括

> ID：15040766
> 
> 赞同：0
> 
> 时间：2013-02-23T12:56:02.640
> 
> 标签：c++, winapi, showwindow

我已经包含`<windows.h>`在我的项目中。但我似乎无法打电话`showWindow`，`getConsoleWindow`无论如何。

```
 #ifdef _WIN32
   #include <windows.h>
   bool consoleButtonCallback(void* but);
 #endif
 /*tons of code here*/
   /* ... */
#ifdef _WIN32
   bool consoleButtonCallback(void* but) 
   {
       Opencv_Button* button = (Opencv_Button*)but;
       bool visible = false;
       if(button->click%2!=0) 
       {
           button->val("Hide console");
           showWindow(getConsoleWindow(), 1);   //'showWindow': identifier not found

       }
       else
       {
           button->val("Show console");
           showWindow(getConsoleWindow(), 0);   //'showWindow': identifier not found
       }
       return true;
   }
#endif 
```

我的文件中还应该包含其他内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:56:44.517

尝试 ShowWindow，而不是 showWindow，和 GetConsoleWindow，而不是..

Win32 API：-

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633548%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633548%28v=vs.85%29.aspx) [http://msdn.microsoft.com/en-gb/library/windows/desktop /ms683175%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683175%28v=vs.85%29.aspx)

此外，请确保查看 nCmdShow 或第二个参数的可能值

# jquery - 没有错误时如何隐藏 jQuery Validate 错误容器？

> ID：15040767
> 
> 赞同：0
> 
> 时间：2013-02-23T12:56:05.530
> 
> 标签：jquery, jquery-validate

当表单没有错误时，我想隐藏包含错误的包装器。有人知道如何在我的代码中应用它。

实际上，当表格正确填写时。我看过“请填写这些东西”。当他们没有错误时，有人知道如何隐藏它们。

```
$("#contactForm").validate({
    errorLabelContainer: $("#contactAlert ul"),
    errorElement: 'li',
    rules: {

    },
    messages: {
      },
    highlight: function (error, element) {
        $("#contactAlert").removeClass('hide');
    },
    errorPlacement: function (error, element) {
        this.labelContainer.append(error);
    }
});
// call valid to see errors
var valid = $("#contactForm").valid();

console.log(valid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:49:49.300

[正如您发布的那样，您的代码已经显示和隐藏错误消息和 container](http://jsfiddle.net/X2DCU/)。您必须更好地解释您要在这里实现的目标。

* * *

你从来没有解释过你为什么在你的代码中使用`highlight`和。`errorPlacement`仅基于您的 OP，没有理由覆盖这两个回调函数。

默认情况下，插件已经做了你想要的......错误会自动显示和隐藏。在演示中，我为您的包装着色，以表明当错误消失时它不会显示。

**工作演示（使用您的容器）：http: [//jsfiddle.net/eVax5/](http://jsfiddle.net/eVax5/)**

**jQuery** :

```
$(document).ready(function () {

    $("#contactForm").validate({
        errorLabelContainer: $("#contactAlert ul"),
        errorElement: 'li',
        rules: {
            // rules
        }
    });

}); 
```

**HTML**：

```
<form id="contactForm">
    ...
</form>

<div id="contactAlert">
    <ul></ul>
</div> 
```

* * *

**还有一个“默认”示例：http: [//jsfiddle.net/Y6HTz/](http://jsfiddle.net/Y6HTz/)**

**jQuery** :

```
$(document).ready(function () {

    $("#contactForm").validate({
        // other options,
        rules: {
            // rules
        }
    });

}); 
```

**HTML**：

```
<form id="contactForm">
    ...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:02:26.750

从逻辑上讲，当您重新提交表单时，在检查表单之前您应该简单地隐藏错误消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T13:49:52.233

在输入您的值时，它应该检查验证意味着将您的验证函数存储在局部变量中并再次重新检查..确保它应该工作

# php - 我怎样才能在我的网站上钉一个新的？

> ID：15040768
> 
> 赞同：1
> 
> 时间：2013-02-23T12:56:09.623
> 
> 标签：php

在我的 php 新闻脚本中

我使用此代码显示新闻标题：

```
<?php
$sql = mysql_query("SELECT newsid,title FROM news WHERE cat='1' ORDER BY newsid DESC LIMIT 15");
?> 
```

并按发送日期按数据库顺序显示 10 条新闻

但我希望第 3 针新闻首先显示：

例如：

newstitle3 (pined) newstitle4 (pined) newstitle6 (pined) newstitle1 newstitle2 newstitle5 newstitle7 ....

你看到 3,4 和 6 是固定新闻然后显示未固定新闻

我如何在我的数据库查询中为这个新闻显示添加代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T13:08:09.523

### 让我们先思考一步——

考虑到您网站上可能有其他区域需要此固定项目行为 - 我建议使用稍微复杂但功能强大的解决方案。

一种更通用的设置“固定”项目的方法是在数据库中创建一个新的“pinned_items”表。您只提到新闻项目，但您网站中的其他区域可能也（可能在将来）需要这种“固定”行为。

你可以有一个`pinned_items`具有这种结构的表 -

```
+----+----------+--------+
| id | obj_type | obj_id |
+----+----------+--------+
|  1 |        1 |      1 |
|  2 |        1 |      2 |
|  3 |        1 |      3 |
|  4 |        2 |      4 |
|  5 |        2 |      5 |
|  6 |        2 |      6 |
+----+----------+--------+ 
```

将`obj_type`引用项目的类型（让我们将类型 1 视为新闻项目）并且`obj_id`将是对您的`news`表的引用。

因此，要检索所有“固定”新闻项目，您将执行类似于此的查询 -

```
SELECT newsItem.* FROM news AS newsItem
LEFT JOIN `pinned_items` AS pinnedItem ON pinnedItem.obj_id = newsItem.id 
WHERE pinnedItem.obj_type = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:57:51.267

一种简单的方法是将“固定”字段添加到您的表中，然后`order by pinned, newsid`.

# ember.js - 嵌套的 ember.js 路由可以使用不同的模型并仍然保留控制器上下文吗？

> ID：15040771
> 
> 赞同：1
> 
> 时间：2013-02-23T12:56:20.793
> 
> 标签：ember.js

我有一个基本的人对象

PersonApp.Person = DS.Model.extend({
username: DS.attr('string') });

我有一条路线可以找到所有人

```
PersonApp.Router.map(function(match) {                                                                                                 
    this.resource("person", { path: "/" }, function() {
        this.route("page", { path: "/page/:page_id" });
        this.route("search", { path: "/search/:page_term" });
    });
}); 
```

在我的路线中，我正在查看传入的参数

```
PersonApp.PersonRoute = Ember.Route.extend({
    selectedPage: 1,
    filterBy: '',
    model: function(params) {
        if (get(params, 'page_id') !== undefined) {
            this.selectedPage = get(params, 'page_id');
        } else {
            this.selectedPage = 1;
        }
        if (get(params, 'page_term') !== undefined) {
            this.filterBy = get(params, 'page_term');
        } else {
            this.filterBy = '';
        }
        console.log(this.selectedPage);
        console.log(this.filterBy);
        return PersonApp.Person.find();
    }
}); 
```

我的嵌套路由使用不同的模型（不是直接人），因为它们包含未持久化的数据（实际上只让我在控制器上稍微翻转一下）

然而，当我手动在 url 上放置一些东西或单击一个进行完整转换的链接时，进入我上面的模型钩子的“参数”总是空的。

这是我正在使用的基本页面模型（带搜索支持）

```
PersonApp.Page = Ember.Object.extend({
    term: ''
}); 
```

当用户进行搜索时，我有一个调用 transitionTo 的视图

```
PersonApp.SearchField = Ember.TextField.extend({
    keyUp: function(e) {
        var model = PersonApp.Page.create({term: this.get('value')});
        this.get('controller.target').transitionTo('person.search', model);
    }
}); 
```

任何方式我都可以将这个“页面”模型传递给嵌套视图，并且仍然保留基本的“人”控制器上下文（即，我可以围绕这个模型对象数组操作视图）

# sql-server - 如何通过 where 子句过滤执行（@query）的结果？

> ID：15040773
> 
> 赞同：0
> 
> 时间：2013-02-23T12:56:30.263
> 
> 标签：sql-server, tsql, filter

我想知道如何在动态查询的结果中过滤（放置 where 子句），如下所示：

```
execute(@query) 
```

问题是@query 的列数是动态的，并且标题是未知的，因为查询是 PIVOT 的结果：

[TSQL 从两张表创建动态报告，一张表保存标题，另一张保存数据](https://stackoverflow.com/questions/14857929/tsql-creating-a-dynamic-report-from-two-tables-one-table-is-holds-the-headers)

我想要得到的结果是这样的：

```
select * from execute(@query) where column(1) = 'something' 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:09:40.713

```
set @query = N'select * from (' + @query + N') t where [col1] = ''something''';

exec (@query) 
```

您可以使用未透视表来确定列的名称，并使用它来代替 col1。

# .net - 在 Windows 8 应用程序之外使用 .resjson 文件而不是 .resx 文件

> ID：15040776
> 
> 赞同：2
> 
> 时间：2013-02-23T12:56:52.427
> 
> 标签：.net, windows-8

Windows 8 HTML 应用程序允许 JSON 格式的资源文件。

![在此处输入图像描述](../Images/cef6fbac84b858bb7733967acdfc6991.png)

是否可以在其他应用程序或类库上使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T16:03:48.100

该`.resjson`文件本身只是简单的 JSON，因此请确保您可以在其他地方使用它。内容的解释是该`WinJS.Resources`功能的独特之处，您可以通过`ui.js`在项目的“参考”部分中打开并找到`WinJS.Resources`定义命名空间的位置来了解它的工作原理。

[如何加载字符串资源](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465248%28v=win.10%29.aspx)也可能会有所帮助，尽管它涵盖了将资源拉入 WinJS 应用程序的不同方式，而且您似乎希望在非 WinJS 应用程序中利用“资源引擎”？

![在此处输入图像描述](../Images/e5668206e5f49d20722b1170b8462ad8.png)

# c# - 如何减去 2 个 DateTimes 以获得 DateTime 结果？

> ID：15040779
> 
> 赞同：0
> 
> 时间：2013-02-23T12:57:05.277
> 
> 标签：c#, jquery, asp.net-mvc, datetime, timespan

我使用 jquery Count up timer，它在 1 行中工作：

```
$(document).ready(function () {
$('#count_up').countUp({ 'lang': 'en', 'format': 'day', 'sinceDate': '22/07/2008-00::00' });
}); 
```

所以，这向我显示了天、小时、分钟和秒`sinceDate`。

我的 Person 模型具有`BirthDay`属性。我应该将哪个值而不是 **“22/07/2008-00::00”**传递给计时器来计算人活了多少时间？

例如， `BirthDay`是**20/02/2013 05:07:24**。现在日期是：**23/02/2013-05:07:24**。

jquery`countUp()`会给我：**3 天，0 小时，0 分钟，0 秒。**

如何计算`BirthDay`和`DateTime.Now`差值通过计数器？我需要 2 个 DateTime 类型的 DateTime 差异。

**编辑：**

当我只`BirthDay`在 中使用时`countUp()`，总是有 12 小时的差异。例如，12 小时 5 分钟。但必须只有5分钟。我不明白这 12 小时的差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:16:19.697

您正在寻找的是时间跨度/范围

看一下

[在 JavaScript 中计算时间跨度](https://stackoverflow.com/questions/141136/calculate-timespan-in-javascript)

# c - “for”循环中的错误，我认为是内存问题

> ID：15040782
> 
> 赞同：0
> 
> 时间：2013-02-23T12:57:19.290
> 
> 标签：c

我正在尝试创建一个循环“for”十次的算法，最终目标是打印出一个 50x50 矩阵，其值的总和大于或等于 49、0 和 1 表示为'*'，但由于某种奇怪的原因，循环只进行了 3 次迭代而不是 10 次......

```
#include <stdio.h>
void printsimulaciodeu(int matlefa[50][50]) {
int ii, jj;
for (ii = 0; ii < 50; ii++) {
    for (jj = 0; jj < 50; jj++) {
        if(matlefa[ii][jj] == 0) {
            printf(" 0 ");
        }
        else if (matlefa[ii][jj] >= 49) {
            printf(" %d ", matlefa[ii][jj]-48);
        }
        else {
            printf(" * ");
            }
    }
    printf("\n");    
}
}
int main(){
    int tabla[50][50]={ 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},  
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    };

    int its;
    int i, j;
    int disparos_pos[10] = {1, 5, 14, 22, 37, 48, 43, 40, 28, 19};
    char disparos_dir[10]= {'i','i','d','i','d','d','i','d','d','i'};
    int mataux[50][50];
    for (i = 0; i < 50; i++) {
        for (j = 0; j < 50; j++) {
            mataux[i][j] = tabla[i][j];
        }
    }
    int matsuma[50][50];
    for (its = 0; its < 10; its++) {
        int pos = disparos_pos[its];
        int dir = disparos_dir[its];
        i = 0;
        j = pos;
        int cont = 49;
        while (i < 49) {
            if (mataux[i+1][j] == 0) {
                mataux[i+1][j] = cont;
                ++i;
            }
            else {
                if (dir == 'i') {
                    if (mataux[i+1][j] != 0) {
                        if (mataux[i][j-1] == 0) {
                            mataux[i][j-1] = cont;
                            --j;
                        }
                        else {
                            dir = 'd';
                        }
                    }
                }
                if (dir == 'd') {
                    if (mataux[i+1][j] != 0) {
                        if (mataux[i][j+1] == 0) {
                            mataux[i][j+1] = cont;
                            ++j;
                        }
                        else {
                            dir = 'i';
                        }
                    }
                }
            }
        }

        if (its == 0) {
            int m, n;
            for (m = 0; m < 50; m++) {
                for (n = 0; n < 50; n++) {
                    matsuma[m][n] = mataux[m][n];
                }
            }
        }
        if (its > 0) {
            int p, q;
            for (p = 0; p < 50; p++) {
                for (q = 0; q < 50; q++) {                
                    if (mataux[p][q] == 49) {
                        if (matsuma[p][q] >= 49) {
                            matsuma[p][q] = matsuma[p][q]+1;
                        }
                    }
                }
            }
        }
    }

    printsimulaciodeu(matsuma);
} 
```

我认为一种可能性是进程的内存是完整的，因此不能正确迭代，这可能吗？

请帮忙，我需要它才能很好地完成大学工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:39:45.513

经过一番调试，我发现了实际问题：您的 while 循环将在 for 循环的第三次迭代中运行 INFINITE 时间。

**解释**

while 循环运行正常，直到 i=33 在 i=33 (j = 21, dir = 'i')，没有执行任何赋值语句 (mataux[blah][blah] = blah balh)，因为条件结果是假的。最终结果是 'dir' 的值在 'i' 和 'd' 之间切换，并且循环将永远运行！

**细节**

mataux[i+1][j] = mataux[34][21] = 1 != 0 ---> 跳过第一个 IF

mataux[i][j-1] = mataux[33][20] = 49 != 0 ---> WHILE 的第一个 ELSE 中的第三个 IF 跳过

ELSE --> dir = 'd' (100)

mataux[i][j+1] = mataux[33][22] = 1 != 0 ---> 跳过最后一个 IF 块中的第三个 IF

ELSE --> dir = "i" (105)

希望这可以帮助！

# c++ - 如何编写 move 以便它可以被优化掉？

> ID：15040784
> 
> 赞同：1
> 
> 时间：2013-02-23T12:57:51.457
> 
> 标签：c++, optimization, c++11, move

给定以下代码：

```
struct obj {
    int i;
    obj() : i(1) {}
    obj(obj &&other) : i(other.i) {}
};

void f() {
    obj o2(obj(obj(obj{})));
} 
```

我希望发布版本只会真正创建一个对象，而不会调用移动构造函数，因为结果与执行我的代码**一样。**虽然大多数代码并不是那么简单，但我可以想到一些难以预测的副作用，这些副作用可能会阻止优化器证明“好像”：

1.  在移动构造函数或析构函数中更改全局或“外部”事物。
2.  移动构造函数或析构函数中的潜在异常（无论如何可能是糟糕的设计）
3.  内部计数或缓存机制发生变化。

由于我不经常使用这些中的任何一个，我可以期待我的大部分进出函数，这些函数后来被内联优化掉还是我忘记了什么？

PS我知道仅仅因为可以进行优化并不意味着它将由任何给定的编译器进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T13:06:55.070

这实际上与 as-if 规则没有任何关系。允许编译器省略移动和复制，即使它们有一些副作用。这是允许编译器执行的单一优化，它可能会改变程序的结果。从§12.8/31：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。

所以编译器不必费心检查你的移动构造函数内部发生的事情，它很可能会摆脱这里的任何移动。为了证明这一点，请考虑以下示例：

```
#include <iostream>

struct bad_mover
{
  static int move_count;
  bad_mover() = default;
  bad_mover(bad_mover&& other) { move_count++; }
};

int bad_mover::move_count = 0;

int main(int argc, const char* argv[])
{
  bad_mover b{bad_mover(bad_mover(bad_mover()))};
  std::cout << "Move count: " << bad_mover::move_count << std::endl;
  return 0;
} 
```

1.  编译`g++ -std=c++0x`：

    ```
    Move count: 0 
    ```

2.  编译`g++ -std=c++0x -fno-elide-constructors`：

    ```
    Move count: 3 
    ```

但是，我会质疑您提供具有额外副作用的移动构造函数的任何理由。不管副作用如何都允许这种优化的想法是，复制或移动构造函数除了复制或移动之外*不应该*做任何事情。有复制或移动的程序应该和没有的完全一样。

尽管如此，您的电话`std::move`是不必要的。`std::move`用于将左值表达式更改为右值表达式，但创建临时对象的表达式已经是右值表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T13:03:24.333

使用`std::move( tmp(...) )`是完全没有意义的，临时`tmp`的已经是一个右值，你不需要使用`std::move`它来将它转换为一个右值。

阅读本系列文章：[想要速度？按值传递](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

通过在 Stackoverflow 上提问，您将比您学到更多并理解得更好

# ruby-on-rails - 无法终止进程 - 停止 Rails 服务器

> ID：15040790
> 
> 赞同：0
> 
> 时间：2013-02-23T12:58:01.740
> 
> 标签：ruby-on-rails, linux, kill-process

我正在尝试从我的控制台停止 rails 服务器（我正在使用 ubuntu）所以按照堆栈上的相关问题，我尝试了

```
Ctrl + C
pgrep -l ruby and then kill -9 $the_right_pids (and also ps aux | grep ...) 
```

但这些都不起作用。有人有想法吗？

更新：我在堆栈帖子上找到了一个解决方案，问题似乎来自 ruby​​ 服务器错误（使用 ruby​​mine 时？），该解决方案似乎不自然，但它可以解决问题：在控制台中停止进程并刷新具有另一个 localhost 端口的浏览器 -->[如何在 ruby​​mine 中停止/终止服务器（开发）](https://stackoverflow.com/questions/6525488/how-to-stop-kill-server-development-in-rubymine)

# java - Vanity/Fancy/Rewrite URL 实现不烂

> ID：15040793
> 
> 赞同：1
> 
> 时间：2013-02-23T12:58:25.937
> 
> 标签：java, architecture, content-management-system

我有一个网站，Vanity URL 模块的实现非常糟糕，并且在某些时间段内负载非常高。由于 url 模块中的一些错误，系统需要每隔一段时间重新启动一次。所以，我想重写一个血腥的模块，让它变得更好，更少错误……

是否有一个很好的模式来实现 Vanity URL 系统？

处理 Vanity URL 以获得高性能时的最佳方法是什么？

查看资源的最佳图书馆是什么？

干杯。赤子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:26:05.807

我不确定您的应用程序的具体实现细节，但作为一般草图，我会写一个`Filter`映射到感兴趣的 URL 空间（也许是`/*`）。

这`Filter`将*检查 URL 是否是一个花哨的*，在这种情况下，将*`forward`请求适当的资源*（URL 调度程序或命名的资源）。您需要保存`filterConfig.getServletContext()`传入的内容`init(FilterConfig)`才能创建请求调度程序。如果 URL 不是花哨的，过滤器将调用`chain.doFilter(req, resp)`，然后提供非映射资源。

```
public class ExceptionFilter implements Filter {
    private ServletContext servletContext;

    public void destroy() {}
    public void doFilter(ServletRequest req, 
                         ServletResponse resp, 
                         FilterChain chain) 
      throws IOException, ServletException {        
        String mapping = getMappingFor((HttpServletRequest)req);
        if(mapping!=null) servletContext.getRequestDispatcher(mapping).forward(req,resp);
        else chain.doFilter(req, resp);
    }

    public void init(FilterConfig filterConfig) throws ServletException {
       this.servletContext = filterConfig.getServletContext();
    }

    private String getMappingFor(HttpServletRequest req) {...} 
```

如何`getMappingFor`实现取决于应用程序，但它可能会打开到数据库的连接并询问 URL /foo/bar 是否已映射，返回映射的 URL 或`null`是否没有映射。如果已知映射不会更改，则可以缓存已检索到的那些映射。

您可能会使用更详细的实现，例如根据给定的 URL 或数据库中的信息设置一些请求属性，然后将请求转发给知道该做什么的某个 servlet。

# android - 嗨，如何从变量启动android计时器

> ID：15040797
> 
> 赞同：-1
> 
> 时间：2013-02-23T12:58:53.083
> 
> 标签：android, countdowntimer

使用几个教程，我设法在下面创建了倒数计时器 - 这让我为自己感到自豪:) 现在我希望这个计时器也能够启动表格，如果它被停止而不是从头开始重新开始？欢迎所有想法//链接/教程。

先感谢您。

```
 setTime(0);

}

private void setTime(int seconds) {
    // TODO Auto-generated method stub

    Time = seconds;
    int minutes = seconds / 60;
    seconds = seconds % 60;

    tvCzas.setText(String.format("%02d:%02d", minutes, seconds));

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == bAddSec)
        setTime(Time + 1);
    else if (v == bTakeSec)
        setTime(Time - 1);
    else if (v == bAddMinute)
        setTime(Time + 60);
    else if (v == bTakeMinute)
        setTime(Time - 60);
    else if (v == bReset)
        setTime(0);
    else if (v == bStart)
        if (mierzy)
            zatrzym();
        else
            rozpocznij();

}

private void rozpocznij() {
    // TODO Auto-generated method stub

    Timer = new CountDownTimer(Time * 1000, 1000) {
        @Override
        public void onTick(long millisUntilFinished) {
            int millis = (int) millisUntilFinished;
            int seconds = (int) millisUntilFinished / 1000;
            int minutes = seconds / 60;
            millis = millis % 100;
            seconds = seconds % 60;
            tvCzas.setText(String.format("%02d:%02d", minutes, seconds));
            bStart.setText("Stop");

        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub
            mierzy = false;
            setCount(Licznik + 1);

            tvCzas.setText("Koniec!");
            bStart.setText("Start");
        }
    };

    Timer.start();
    bStart.setText("Stop");
    mierzy = true;
}

private void zatrzym() {
    // TODO Auto-generated method stub
    if (Timer != null)
        Timer.cancel();

    mierzy = false;
    bStart.setText("Start");

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:02:11.930

使用 onSaveInstanceState 和 onRestoreInstanceState 来存储您的计时器状态...有关用法，请参阅此[答案](https://stackoverflow.com/a/4101501/1173391)

# asp.net - 如何配置 ASP.net Web 应用程序以调用 WCF 服务主机工厂以进行命名管道调用？

> ID：15040800
> 
> 赞同：0
> 
> 时间：2013-02-23T12:59:49.143
> 
> 标签：asp.net, wcf, named-pipes

我在 ASP.net 应用程序中托管 WCF 服务。该服务有两个端点，一个 HTTP 端点和一个命名管道端点。我正在尝试使用命名管道端点从同一个 Web 应用程序中使用该服务。

问题是服务主机工厂在尝试访问 HTTP 端点之前不会被调用，因此如果 Web 应用程序尝试使用命名管道端点调用服务，则调用会失败。

如何配置 Web 应用程序（或 IIS）以调用服务主机工厂以进行命名管道调用？

**更新**：我原来的前提是错误的。我接受了 Petar 的建议并安装了 AppFabric。这让我看到命名管道端点确实存在，并且服务主机工厂已在早期构建期间被调用。我能够通过执行干净的构建并在工厂类中设置断点来测试这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:58:13.047

[Windows Server AppFabric](http://msdn.microsoft.com/en-us/library/ee677312.aspx)可能是您的解决方案，因为它提供了以不同于 IIS 和 WAS 的方式管理服务实例的能力。[您可以在此处看到](http://msdn.microsoft.com/en-us/library/ee677212%28v=azure.10%29.aspx)可以将服务配置为自动启动的屏幕。

除了此功能之外，您还可以从上面的链接中了解 AppFabric 的其他一些有用方面。

# php - 如何从 opencart 1.5.5.1 结帐页面中删除上滑和下滑功能？

> ID：15040802
> 
> 赞同：-2
> 
> 时间：2013-02-23T12:59:58.030
> 
> 标签：php, opencart, checkout

如何从 opencart 1.5.5.1 结帐页面中删除上滑和下滑功能？

我希望在页面加载后显示所有表单而没有继续选项。

Opencart 版本：- 1.5.5.1

目前默认有继续选项移动到下一个表单，我想删除继续选项并一次显示所有表单。

对于演示，您可以到这里 > [http://demo.opencart.com/](http://demo.opencart.com/)

添加任何产品并单击结帐，然后转到[http://demo.opencart.com/index.php?route=checkout/checkout](http://demo.opencart.com/index.php?route=checkout/checkout)

您将看到所有内容都出现在 Slide UP 和 Down jquery 功能中，我想删除它们并带上所有表单 @ 一次。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:27:17.173

Not that easy, if you try it yourself and if you don't have good enough knowledge of opencart code, you will probably break something, that's why one-page checkout extensions are so expensive ( 50$ - 100$ ), you can try asking this question [http://forum.opencart.com](http://forum.opencart.com) , it belongs there, this question will probably get closed here.

# php - PHP OOP 中的实例化对象范围和生命周期

> ID：15040804
> 
> 赞同：-2
> 
> 时间：2013-02-23T13:00:33.000
> 
> 标签：php, object

我想知道默认情况下 PHP 中的对象何时会被破坏（销毁）。例如，如果我们在函数中实例化一个类，它会在函数结束时销毁还是仍然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:03:23.117

是的，它会的。该对象将在其实例在范围内的持续时间内存在。您可能希望浏览[PHP 垃圾收集](http://www.php.net/manual/en/features.gc.refcounting-basics.php)文档。还值得注意的是，您可以通过实现[__destruct](http://www.php.net/manual/en/language.oop5.decon.php#object.destruct)魔术方法自己尝试这些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:02:51.967

当所有指向该对象的变量不复存在时，它最终会被销毁。当变量超出范围或超出范围时，变量将不复存在`unset`。变量在声明它们的范围/函数退出时超出范围。

# surfaceview - Android通过WindowsManager.LayoutParams控制SurfaceView的位置

> ID：15040805
> 
> 赞同：2
> 
> 时间：2013-02-23T13:00:43.180
> 
> 标签：surfaceview, layoutparams, android-windowmanager, thread-exceptions

如何控制窗口的位置？

我将`SurfaceView`with添加`WindowManager.LayoutParam`到`WindowManager`; 我试图改变in的`x`and `y`；但我只得到了错误。`WindowManager.LayoutParams``Thread``Thread Exception`

*SurfaceViewDemoActivity .java*

```
public class SurfaceViewDemoActivity extends Activity {
    private MySurfaceView mySurfaceView;
    private FloatingWindow floatingWindow;
    private int x = 0;
    private Thread t;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);           
        int imgId = R.drawable.bubble;
        mySurfaceView = new MySurfaceView(this, imgId);
        floatingWindow = new FloatingWindow(this, mySurfaceView, 0, 0);        

        t = new Thread(new Runnable(){
                public void run() {
                    while (true) {
                        if (x > 150) x = 0;
                        //The problem is here.
                        floatingWindow.update(mySurfaceView, x, x);
                        x++;
                    }   
                }
        });     
         t.start();
    }
} 
```

*浮动窗口.java*

```
public class FloatingWindow {
    private WindowManager windowManager;  
    private WindowManager.LayoutParams layoutParams; 
    private boolean hasViewAdded = false;

    public final void update (View view, int coordX, int coordY) {
        update(coordX, coordY);
        update(view);
    }    

    public final void update (View view) {
        if ( isViewAdded() == true ) {
            windowManager.updateViewLayout(view, layoutParams);
        } else {    
            windowManager.addView(view, layoutParams);
            setViewAdded(true); 
        }
    }

    private final void update (int coordX, int coordY) {
        this.layoutParams.gravity = Gravity.LEFT | Gravity.TOP;
        this.layoutParams.x = coordX;
        this.layoutParams.y = coordY;       
    }

    private void updateSize (View view) {
        int width = view.getWidth();
        int height = view.getHeight();
        this.layoutParams.width = width;  
        this.layoutParams.height = height;
    } 

    public FloatingWindow (Context context, View view, int coordX, int coordY) {
        init(context);
        updateSize(view);
        update(view, coordX, coordY);
    }   

    private void init(Context context) {
        this.windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        this.layoutParams = new WindowManager.LayoutParams();
        this.layoutParams.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;  
        this.layoutParams.flags = LayoutParams.FLAG_NOT_TOUCH_MODAL | LayoutParams.FLAG_NOT_FOCUSABLE;
        this.layoutParams.format = PixelFormat.TRANSPARENT;
    }   

    protected boolean isViewAdded () {
        return this.hasViewAdded;
    }

    protected void setViewAdded (boolean hasViewAdded) {
        this.hasViewAdded = hasViewAdded;
    }
} 
```

*AndroidManifest.xml*

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
```

*日志.txt*

```
E/Trace(5041):      error opening trace file: No such file or directory (2)
W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0

I/Choreographer(5041):  Skipped 128 frames!  The application may be doing too much work on its main thread.

W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0
W/dalvikvm(5041):   threadid=11: thread exiting with uncaught exception (group=0xb5cff908)

E/AndroidRuntime(5041): FATAL EXCEPTION: Thread-252
E/AndroidRuntime(5041): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.

E/AndroidRuntime(5041):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
E/AndroidRuntime(5041):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)

E/AndroidRuntime(5041):     at android.view.View.requestLayout(View.java:15468)
E/AndroidRuntime(5041):     at android.view.View.setLayoutParams(View.java:10022)
E/AndroidRuntime(5041):     at android.view.WindowManagerGlobal.updateViewLayout(WindowManagerGlobal.java:269)

E/AndroidRuntime(5041):     at android.view.WindowManagerImpl.updateViewLayout(WindowManagerImpl.java:74)
E/AndroidRuntime(5041):     at com.givemepass.surfaceview.FloatingWindow.update(FloatingWindow.java:27)
E/AndroidRuntime(5041):     at com.givemepass.surfaceview.FloatingWindow.update(FloatingWindow.java:18)

E/AndroidRuntime(5041):     at com.givemepass.surfaceview.SurfaceViewDemoActivity$1.run(SurfaceViewDemoActivity.java:33)
E/AndroidRuntime(5041):     at java.lang.Thread.run(Thread.java:856)

W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0
D/gralloc_goldfish(5041): Emulator without GPU emulation detected.
W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0

I/Choreographer(5041):  Skipped 671 frames!  The application may be doing too much work on its main thread.
W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0

W/Trace(5041):      Unexpected value from nativeGetEnabledTags: 0
A/libc(5041):       Fatal signal 11 (SIGSEGV) at 0xae3e1000 (code=1), thread 5057 (Thread-253)
I/Process(5041):    Sending signal. PID: 5041 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:14:59.223

将“SurfaceView”添加到“WindowManager”后，只需更改 WindowManager.LayoutParams 的“x”和“y”即可。

如果您有“线程异常”和消息（“只有创建视图层次结构的原始线程才能触摸其视图。”），您可以像我一样阅读“Android 开发人员博客”上的[无痛线程。](http://android-developers.blogspot.tw/2009/05/painless-threading.html)

 **```
Thread t = new Thread(new Runnable(){
        public void run() {
            while (true) {
                if ( x > 150 ) x = 0;
                runOnUiThread(new Runnable() {
                    public void run() {
                        //Update the UI here.
                        floatingWindow.update(mySurfaceView, x, x);
                    }
                });
                x++; 
            }   
        }
    }); 
```*  ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T18:29:15.237

您必须使用 Activity.runOnUiThread(Runnable action) 或在 UI 线程中创建 Handler 并通过消息传递坐标。GUI 框架在 android 中不是线程安全的。因此，如果有人试图从另一个线程使用 UI，android 的开发人员决定通知所有人有关错误。**

# c# - 父 mvvm 上的附加行为不起作用

> ID：15040807
> 
> 赞同：1
> 
> 时间：2013-02-23T13:01:16.390
> 
> 标签：c#, wpf, attachedbehaviors

我有 2 个用户控件，父和子，子控件有按钮女巫我想用父视图模型方法单击，但它不起作用，请告诉我我在父视图中错过了什么，我有这样的东西：

```
XAML
...
<view:childUC vm:ChildBehaviuor.AddCommand="{Binding ExampleCommand}"/> 
```

行为代码：

```
 public static readonly DependencyProperty AddCommandProperty =DependencyProperty.RegisterAttached
    (
     "AddCommand",
     typeof(ICommand),
     typeof(childBehavior),
     new PropertyMetadata(OnAddCommand)
    );
    public static ICommand GetAddCommand(DependencyObject obj)
    {
        return (ICommand)obj.GetValue(AddCommandProperty);
    }
    public static void SetAddCommand(DependencyObject obj, ICommand value)
    {
        obj.SetValue(AddCommandProperty,value);
    }

private static ICommand command;

private static void OnAddCommand(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            child gp = sender as child;
            childBehavior.command = (ICommand)sender.GetValue(childBehavior.AddCommandProperty);

            if(gp != null && command != null)
            {
                if ((e.NewValue != null) && (e.OldValue == null))
                {
                    gp.AddButton.Click += ButtonClick;
                }
                else if ((e.NewValue == null) && (e.OldValue != null))
                {
                    gp.AddButton.Click -= ButtonClick;
                }
            }
        }
        public static void ButtonClick(object sender,RoutedEventArgs eventArgs)
        {
            childBehavior.command.Execute(null);    
        } 
```

虚拟机父命令：

```
 public ICommand ExampleCommand
    {
        get
        {
            if (this.exampleCommand == null)
            {
                this.exampleCommand  = new DelegateCommand(...);
            }

            return this.exampleCommand ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:05:20.023

我不确定我是否理解您，但是如果您正在寻找一种在您单击父用户控件中的按钮时在子用户控件上执行命令的方法，您需要执行以下操作：

1.  让您的父用户控件实现 ICommandSource 接口，该接口包含一个名为“Command”的属性。
2.  在实现 ICommandSource 接口后，将子用户控件中的特定命令绑定到父用户控件上可用的“命令”属性。
3.  当您单击父用户控件中的按钮时，访问按钮处理程序内部，这是您父用户控件中的一个方法，您通过界面获得的可用命令属性。访问 Command 属性后调用 Command.Execute() 方法，该方法将转到您的子用户控件并触发您之前绑定的命令。

这就是你如何从父用户控件对子用户控件执行命令的方式。如果你想反过来，你只需要用父母替换每个子单词，用孩子替换每个父单词:)

# javascript - AngularJS-valueFn

> ID：15040810
> 
> 赞同：5
> 
> 时间：2013-02-23T13:01:26.547
> 
> 标签：javascript, oop, angularjs

函数的意义何在

```
function valueFn(value) {return function() {return value;};} 
```

在 angular.js 中定义。

它用于前。在

```
var lowercaseFilter = valueFn(lowercase);
register('lowercase', lowercaseFilter); 
```

如果我们直接使用小写字母有什么不同

```
register('lowercase', lowercase); 
```

而不是上一行。

同样的方法，在方法中

```
function ngDirective(directive) {
  if (isFunction(directive)) {
    directive = {
      link: directive
    }
  }
  directive.restrict = directive.restrict || 'AC';
  return valueFn(directive);
} 
```

为什么最后一行不是

```
return directive; 
```

但

```
return valueFn(directive); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T13:29:46.770

过滤器（和其他一些服务）是常规函数，但 AngularJS 严重依赖依赖注入，因此这些过滤器（函数）不会按原样（作为实例化对象）暴露给客户端，而是由工厂函数创建。这样做是为了让 AngularJS DI 系统可以将依赖项注入工厂函数（这些依赖项在稍后的闭包中可用）。

但是在某些情况下，没有什么可注入的，整个工厂函数的工作归结为返回一个预实例化的值。`lowercaseFilter`（和许多其他过滤器）就是这种情况。因此，不是重复相同的、几乎什么都不做的工厂函数，而是 `valueFn`为了避免代码重复而创建的。没有它，AngularJS 代码必须包含：

```
var lowercaseFilter = function(){
  return lowercase;
};
var uppercaseFilter = function(){
  return uppercase;
};
... 
```

写起来更简洁：

```
var lowercaseFilter = valueFn(lowercase);
var uppercaseFilter = valueFn(uppercase);
... 
```

简而言之-我怀疑原因是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

# ruby-on-rails - 在 Products#index 视图上列出评论

> ID：15040812
> 
> 赞同：0
> 
> 时间：2013-02-23T13:01:33.170
> 
> 标签：ruby-on-rails

我有一个简单的应用程序，可以让用户上传产品然后评论这些产品。

我目前的产品#show 页面列出了该产品的相关评论。所以那部分有效。我似乎无法工作的是，我想在产品#index 页面上显示每个产品的评论。

我在想我为 products#show 视图工作的内容也适用于 #index 视图，但在我的情况下似乎并非如此。

**评论控制器**

```
def create
  @product = Product.find(params[:product_id])
  @comment = @product.comments.build(params[:comment])
  @comment.user = current_user
  if @comment.save
    redirect_to @product, notice: "Comment was created."
  else
    render :new
  end
end 
```

**产品控制器**（我不确定我应该在此处的索引操作中添加什么。我尝试过的没有任何效果。@comments = @product.comments 在 productController#index 操作的“comments”上引发 noMethod 错误）

```
def index
  @products = Product.all(:include => :comments)
  #something about comments, nothing I've tried so far has worked
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @products }
  end
end

def show
  @product = Product.find(params[:id])
  @comment = Comment.new
  @comment.user = current_user
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @product }
  end
end 
```

**产品#show view** (working)

```
 <div class="comment-wrapper">
      <ul class="comments">
          <%= render 'comments/comment' %>
        <li>
          <%= render 'comments/form' %>
        </li>
      </ul>
    </div> 
```

**部分评论 _comment.html.erb**（在产品中工作#show 不适用于产品#index）

```
<% @product.comments.each do |comment| %>
 <li>
  <div class="comment-inner-wrapper">
    <div class="comment-controls">
     <% if comment.user == current_user %>          
       <%= link_to [@product, comment], :method => :delete, :confirm => "Are you sure?" do  %>
        <i class="icon-trash"></i>
       <% end %>
     <% end %>
   </div>
   <div class="comment-author-pic">
    <%= link_to comment.user do %>
      <%= image_tag comment.user.image.url(:thumb) %>
    <% end %>
   </div>
   <div class="comment-author">
    <%= link_to comment.user.username, comment.user %>
   </div>
   <div class="comment-content">
     <p><%= comment.content %></p>
   </div>
 </div>
</li> 
```

**Products#index 视图**（我挂在这里。我有适用于每个产品的表单，它会发布一条新评论，但只有在您进入#show 页面时才可见。评论不会在#index 视图上呈现）我明白了错误未定义方法 `comments' for nil:NilClass for line #1 of my comments partial _comment.html.erb

```
 <div class="comment-wrapper">
      <ul class="comments">
          <%= render 'comments/comment' %>
          <li>
            <div class="comment-box-wrapper">
              <%= form_for [product, Comment.new], :remote => true do |f| %>
                <div class="comment-textarea">
                  <%= f.text_area :content %>
                </div>
                <div class="actions">
                  <%= f.submit "Comment", :class => "btn btn-small pull-right" %>
                </div>
              <% end %>
            </div>
          </li>
      </ul>
    </div> 
```

我所有的模型关系都是正确的。任何帮助将不胜感激！！！

**编辑**下面的模型

```
#product.rb
has_many :comments, dependent: :destroy

#comment.rb
attr_accessible :content, :product_id, :user_id

belongs_to :product
belongs_to :user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:35:48.503

我认为你的模型有问题。以下是产品和评论的示例代码，可让您访问索引页面中每个产品的评论：

```
#product.rb
class Product < ActiveRecord::Base
  attr_accessible :name
  has_many :comments
end

#comment.rb
class Comment < ActiveRecord::Base
  attr_accessible :product_id, :text
  belongs_to :product
end

#products_controller.rb
class ProductsController < ApplicationController
    def index
        @products = Product.all
    end
end 
```

编辑如果你想使用部分评论它应该是这样的。

```
#products/index.rb
<% @products.each do |p| %>
    <%= p.name %>
    <%= render 'products/comments', :product => p %>
<% end %>

#_comments.html.erb
<% product.comments.each do |c| %>
    <%= c.text %> 
<% end %> 
```

# jquery - 内联验证向左滚动

> ID：15040820
> 
> 赞同：2
> 
> 时间：2013-02-23T13:02:33.813
> 
> 标签：jquery, html, css, validation

我正在使用 jquery 内联验证插件： [http ://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

这里：

[http://bybyweb.com/mealbook/user/add](http://bybyweb.com/mealbook/user/add)

如果你测试这个页面（通过点击底部的上传），在较低的屏幕分辨率（小于 1680x1050）上，你会注意到奇怪的滚动到左侧（滚动顶部是默认的，正常行为）......我用过这个以前的插件，我从来没有遇到过类似的问题......

我的 html/css 结构可能有问题。如果您知道可能是什么-请提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:55:42.600

如果您拿走，`body{overflow-x: hidden;}`您可以在较小的窗口尺寸处看到页面右侧有额外的空间。这个额外的空间是由于设置的宽度大于它们在`#header`.

1.  在您`#header`将宽度设置`#logo_main_menu`为`940px`。这意味着所有子元素需要加起来达到 940px。
2.  `272px`在该 div 中，您设置了on`#logo`和`705px`on的宽度`#search`。他们加起来一共`977px`没有`940px`！
3.  为了使事情变得更糟，`#search`您将 的宽度设置`#menu`为`940px`，这意味着实际上您现在正试图适应`940 + 272 = 1212px`您设置为 的空间`940px`。
4.  我确信其中还有其他元素`#search`也具有固定宽度。

**总而言之，您需要确保如果使用固定像素宽度，它们都加起来等于父容器的宽度，在本例中为 940px**

ps 我测试了删除这些宽度，并且滚动似乎运行良好。没有横向运动。在更小的宽度上，它又开始看起来有点奇怪。要进行全面测试，您需要确保`body{overflow-x: hidden;}`已关闭并且所有宽度都加到它们的容器中。

# javascript - 选项集更改事件未通过 JQuery 触发

> ID：15040821
> 
> 赞同：0
> 
> 时间：2013-02-23T13:02:41.510
> 
> 标签：javascript, jquery

这是html：

```
<select id="langOptionSet">
      <option value="english">English</option>
      <option value="spanish">Spanish</option>
</select> 
```

这是我为语言更改编写的脚本：

```
$(function(){
SetSelectedLanguageText();
}); 

var SetSelectedLanguageText = (function ($){
    var language = $("#langOptionSet option:selected").val();
alert(language);
$.ajax({
    url: 'languages.xml',
    success: function(xml) {
        $(xml).find('translation').each(function(){
            var id = $(this).attr('id');
            var text = $(this).find(language).text();
            $("." + id).html(text);
        });
    }
}); 

$("#langOptionSet").change(function() {
SetSelectedLanguageText();
}); 
```

但是`SetSelectedLanguageText`即使在页面加载时也不会触发该功能。这个脚本有什么问题？

谢谢

# python - 在正则表达式中仅返回组查找全部

> ID：15040827
> 
> 赞同：0
> 
> 时间：2013-02-23T13:03:20.680
> 
> 标签：python, regex

我有一个长文本，想要匹配所有出现的“比率为 (\d+\.\d)%”，但只想将组 (\d+\.d) 作为匹配字符串列表返回。我怎样才能做到这一点？

我不能只匹配该组，因为它也发生在其他上下文中。

例子

```
"I like how the rate is 6.7%. Now the rate is 11.4% profits were down by 5.6%" 
```

在这种情况下，我需要

```
[6.7, 11.4] 
```

* * *

我明白了，我认为 findall 返回匹配的整个字符串，而不是组。谢谢你的澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:08:37.203

当然可以，只需将要返回的部分分组：

```
r'the rate is (\d+\.d)%' 
```

因此，请提供足够的上下文以仅匹配您想要返回的内容，并使用捕获组。然后使用该`.findall()`方法，该方法将仅包含匹配的捕获组：

```
>>> re.findall(r'the rate is (\d+\.\d)%', "I like how the rate is 6.7%. Now the rate is 11.4% profits were down by 5.6%")
['6.7', '11.4'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:08:53.853

```
In [94]: s="I like how the rate is 6.7%. Now the rate is 11.4% profits were down
 by 5.6%"

In [95]: re.findall(r'the rate is (\d+\.\d)%', s)
Out[95]: ['6.7', '11.4'] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T13:15:42.457

这可以使用`re.findall()`.

见[7.2。re - 正则表达式操作](http://docs.python.org/2/library/re.html#re.findall)

# asp.net-mvc - MVC JsonResult camelCase 序列化

> ID：15040838
> 
> 赞同：36
> 
> 时间：2013-02-23T13:03:46.047
> 
> 标签：asp.net-mvc, json, serialization, camelcasing

我试图让我的操作返回一个 JsonResult，它的所有属性都在 camelCase 中。

我有一个简单的模型：

```
public class MyModel
{
    public int SomeInteger { get; set; }

    public string SomeString { get; set; }
} 
```

还有一个简单的控制器动作：

```
public JsonResult Index()
    {
        MyModel model = new MyModel();
        model.SomeInteger = 1;
        model.SomeString = "SomeString";

        return Json(model, JsonRequestBehavior.AllowGet);
    } 
```

现在调用此操作方法会返回一个包含以下数据的 JsonResult：

```
{"SomeInteger":1,"SomeString":"SomeString"} 
```

对于我的用途，我需要该操作以 camelCase 格式返回数据，如下所示：

```
{"someInteger":1,"someString":"SomeString"} 
```

有什么优雅的方法可以做到这一点吗？

我在这里寻找可能的解决方案，发现[MVC3 JSON 序列化：如何控制属性名称？](https://stackoverflow.com/questions/7260924/mvc3-json-serialization-how-to-control-the-property-names)他们将 DataMember 定义设置为模型的每个属性，但我真的不想这样做。

我还找到了一个链接，他们说可以完全解决这类问题：[http ://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-序列化#json_camelcasing](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_camelcasing)。它说：

**要使用驼峰式大小写编写 JSON 属性名称，而不更改数据模型，请在序列化程序上设置 CamelCasePropertyNamesContractResolver：**

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

此博客[http://frankapi.wordpress.com/2012/09/09/going-camelcase-in-asp-net-mvc-web-api/](http://frankapi.wordpress.com/2012/09/09/going-camelcase-in-asp-net-mvc-web-api/)上的一个条目也提到了此解决方案，并声明您可以简单地将其添加到**RouteConfig.RegisterRoutes**来解决这个问题。我试过了，但我无法让它工作。

你们知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-28T05:03:33.840

如果您想从您的操作中返回一个遵循驼峰表示法的 json 字符串，您必须创建一个 JsonSerializerSettings 实例并将其作为 JsonConvert.SerializeObject(a,b) 方法的第二个参数传递。

```
public string GetSerializedCourseVms()
    {
        var courses = new[]
        {
            new CourseVm{Number = "CREA101", Name = "Care of Magical Creatures", Instructor ="Rubeus Hagrid"},
            new CourseVm{Number = "DARK502", Name = "Defence against dark arts", Instructor ="Severus Snape"},
            new CourseVm{Number = "TRAN201", Name = "Transfiguration", Instructor ="Minerva McGonal"}
        };
        var camelCaseFormatter = new JsonSerializerSettings();
        camelCaseFormatter.ContractResolver = new CamelCasePropertyNamesContractResolver();
        return JsonConvert.SerializeObject(courses, camelCaseFormatter);
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-26T10:11:12.483

Controller 的 Json 函数只是用于创建 JsonResults 的包装器：

```
protected internal JsonResult Json(object data)
{
    return Json(data, null /* contentType */, null /* contentEncoding */, JsonRequestBehavior.DenyGet);
}

protected internal JsonResult Json(object data, string contentType)
{
    return Json(data, contentType, null /* contentEncoding */, JsonRequestBehavior.DenyGet);
}

protected internal virtual JsonResult Json(object data, string contentType, Encoding contentEncoding)
{
    return Json(data, contentType, contentEncoding, JsonRequestBehavior.DenyGet);
}

protected internal JsonResult Json(object data, JsonRequestBehavior behavior)
{
    return Json(data, null /* contentType */, null /* contentEncoding */, behavior);
}

protected internal JsonResult Json(object data, string contentType, JsonRequestBehavior behavior)
{
    return Json(data, contentType, null /* contentEncoding */, behavior);
}

protected internal virtual JsonResult Json(object data, string contentType, Encoding contentEncoding, JsonRequestBehavior behavior)
{
    return new JsonResult
    {
        Data = data,
        ContentType = contentType,
        ContentEncoding = contentEncoding,
        JsonRequestBehavior = behavior
    };
} 
```

JsonResult 内部使用 JavaScriptSerializer，因此您无法控制序列化过程：

```
public class JsonResult : ActionResult
{
    public JsonResult()
    {
        JsonRequestBehavior = JsonRequestBehavior.DenyGet;
    }

    public Encoding ContentEncoding { get; set; }

    public string ContentType { get; set; }

    public object Data { get; set; }

    public JsonRequestBehavior JsonRequestBehavior { get; set; }

    /// <summary>
    /// When set MaxJsonLength passed to the JavaScriptSerializer.
    /// </summary>
    public int? MaxJsonLength { get; set; }

    /// <summary>
    /// When set RecursionLimit passed to the JavaScriptSerializer.
    /// </summary>
    public int? RecursionLimit { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }
        if (JsonRequestBehavior == JsonRequestBehavior.DenyGet &&
            String.Equals(context.HttpContext.Request.HttpMethod, "GET", StringComparison.OrdinalIgnoreCase))
        {
            throw new InvalidOperationException(MvcResources.JsonRequest_GetNotAllowed);
        }

        HttpResponseBase response = context.HttpContext.Response;

        if (!String.IsNullOrEmpty(ContentType))
        {
            response.ContentType = ContentType;
        }
        else
        {
            response.ContentType = "application/json";
        }
        if (ContentEncoding != null)
        {
            response.ContentEncoding = ContentEncoding;
        }
        if (Data != null)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            if (MaxJsonLength.HasValue)
            {
                serializer.MaxJsonLength = MaxJsonLength.Value;
            }
            if (RecursionLimit.HasValue)
            {
                serializer.RecursionLimit = RecursionLimit.Value;
            }
            response.Write(serializer.Serialize(Data));
        }
    }
} 
```

您必须创建自己的 JsonResult 并编写自己的 Json 控制器函数（如果需要/想要）。您可以创建新的或覆盖现有的，这取决于您。您可能也会对此链接[感兴趣。](http://yobriefca.se/blog/2010/11/20/better-json-serialisation-for-asp-dot-net-mvc/)

# c# - 如何使用 CIL 将 POCO 转换为数组？

> ID：15040839
> 
> 赞同：2
> 
> 时间：2013-02-23T13:03:55.270
> 
> 标签：c#, .net, poco, cil, dynamicmethod

这是我第一次涉足生成的 CIL，所以请原谅我的无知。我正在寻找一个简单的 DynamicMethod 可以读取 POCO 的字段，并将它们填充到`object[]`. 不需要类型转换。我已经把所有我能做的都放在一起了，你能帮忙完成吗？

```
Type t = typeof(POCO);

DynamicMethod dm = new DynamicMethod("Get" + memberName,typeof(MemberType), new Type[] { objectType }, objectType);
ILGenerator il = dm.GetILGenerator();

// Load the instance of the object (argument 0) onto the stack
il.Emit(OpCodes.Ldarg_0);

// get fields
FieldInfo[] fields = t.GetFields();

// how do I create an array (object[]) at this point?

// per field
foreach (var pi in fields) {

    // Load the value of the object's field (fi) onto the stack
    il.Emit(OpCodes.Ldfld, fi);

    // how do I add it into the array?

}

// how do I push the array onto the stack?

// return the array
il.Emit(OpCodes.Ret); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:47:26.267

您可以使用此代码生成已编译的 lambda 表达式。

```
public static Func<T, object[]> MakeFieldGetter<T>() {
    var arg = Expression.Parameter(typeof(T), "arg");
    var body = Expression.NewArrayInit(
        typeof(object)
    ,   typeof(T).GetFields().Select(f => (Expression)Expression.Convert(Expression.Field(arg, f), typeof(object)))
    );
   return (Func<T, object[]>)Expression
        .Lambda(typeof(Func<T, object[]>), body, arg)
        .Compile();
} 
```

这等效于以下手动编写的代码：

```
object[] GetFields(MyClass arg) {
    return new object[] {
        // The list of fields is generated through reflection
        // at the time of building the lambda. There is no reflection calls
        // inside the working lambda, though: the field list is "baked into"
        // the expression as if it were hard-coded manually.
        (object)arg.Field1
    ,   (object)arg.Field2
    ,   (object)arg.Field3
    };
} 
```

这段代码也会产生 IL，但不是你手动编写它，而是让`Lambda`'s`Compile`方法为你做。

这是[关于 ideone 的工作演示](http://ideone.com/EwxsC6)。

# ruby-on-rails - 设计电子邮件的 arg 数量错误

> ID：15040844
> 
> 赞同：2
> 
> 时间：2013-02-23T13:04:22.597
> 
> 标签：ruby-on-rails, devise, actionmailer

我以前没有经历过这种情况，但是自从将我的 rails 站点移动到 Heroku 后，每当尝试触发 Devise 发送电子邮件时，我都会收到以下消息

```
Started POST "/members/forgot-password" for 127.0.0.1 at 2013-02-24 00:02:27 +1100
Processing by Devise::PasswordsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9G1P34ddbq2TN7SkmFuCet5d7fPMvWdSSpIaGqSZW9g=", "user"=>{"email"=>"paul.mcguane@*****"}, "commit"=>"Recover password"}
  User Load (3.1ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'paul.mcguane@me.com' LIMIT 1
Completed 500 Internal Server Error in 31ms

ArgumentError - wrong number of arguments (2 for 1):
  app/mailers/devise/mailer.rb:8:in `reset_password_instructions' 
```

邮件程序.rb

```
 class Devise::Mailer < ::ActionMailer::Base
  include Devise::Mailers::Helpers

  def confirmation_instructions(record)
    devise_mail(record, :confirmation_instructions)
  end

  def reset_password_instructions(record)
    devise_mail(record, :reset_password_instructions)
  end

  def unlock_instructions(record)
    devise_mail(record, :unlock_instructions)
  end
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-08T12:00:29.630

似乎[最新版本](https://github.com/plataformatec/devise/blob/master/app/mailers/devise/mailer.rb)需要一个额外的参数。
至少它适用于我的代码。这是我的自定义邮件程序类的工作代码。
请注意每个方法的额外参数`action`。

```
 class MyMailer < ActionMailer::Base

    include Devise::Mailers::Helpers

    def confirmation_instructions(record, token, opts={})
      @token = token
      devise_mail(record, :confirmation_instructions, opts)
    end

    def reset_password_instructions(record, token, opts={})
      @token = token
      devise_mail(record, :reset_password_instructions, opts)
    end

    def unlock_instructions(record, token, opts={})
      @token = token
      devise_mail(record, :unlock_instructions, opts)
    end

    # optional: this override method is from Devise::Mailers::Helpers
    def headers_for(action,opts={})
      …
    end

  end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T09:37:22.043

尝试这种方式，因为上面的答案中提到“设计在最新版本中引入额外的选项参数”

```
 def reset_password_instructions(record, opts={})
       devise_mail(record, :reset_password_instructions)
     end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T03:58:37.277

这是由于 Devise 在最近的版本中引入了一个额外的选项参数。我想你想要这样的东西：

```
class Devise::Mailer < ::ActionMailer::Base
  include Devise::Mailers::Helpers

  def confirmation_instructions(record, opts={})
    devise_mail(record, :confirmation_instructions, opts={})
  end

  def reset_password_instructions(record)
    devise_mail(record, :reset_password_instructions, opts={})
  end

  def unlock_instructions(record)
    devise_mail(record, :unlock_instructions, opts={})
  end

  def headers_for(actions, opts={}
    # see http://stackoverflow.com/a/14698599/18706
  end

end 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-24T02:53:00.747

最终卸载了 gem，重新安装似乎可以解决它：S

# c# - 在数据访问方法中调用两个方法的问题

> ID：15040846
> 
> 赞同：0
> 
> 时间：2013-02-23T13:04:56.553
> 
> 标签：c#, sql-server, sqldatareader, sqlconnection, sqlcommand

我有这个方法：

```
public bool ActivateUser(string username, string key)
        {
            var user = this.GetUser(username, true);

            if (user != null)
            {
                if (user.NewEmailKey == key)
                {
                    string query = "usp_ActivateUser";
                    using (SqlConnection conn = new SqlConnection(connectionString))
                    {
                        using (SqlCommand cmd = new SqlCommand(query, conn))
                        {
                            cmd.CommandType = CommandType.StoredProcedure;
                            cmd.Parameters.AddWithValue("@p_Username", username);
                            cmd.Parameters.AddWithValue("@p_LastModifiedDate", DateTime.Now);

                            conn.Open();

                            using (SqlDataReader reader = cmd.ExecuteReader())
                            {
                                cmd.ExecuteNonQuery();
                                return true;
                            }
                        }
                    }
                }
                else
                    return false;
            }
            else
                return false;

        } 
```

如您所见，我首先调用 GetUser() 方法来获取用户，然后将数据用于另一个数据库调用。但是出了点问题。

```
There is already an open DataReader associated with this Command which must be closed first. 
```

这是获取用户方法：

```
public User GetUser(string username, bool nonMembershipUser)
        {
            string query = "usp_GetUser";
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                using (SqlCommand cmd = new SqlCommand(query, conn))
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.AddWithValue("@p_Username", username);
                    conn.Open();

                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        while (reader.Read())
                        {... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:08:55.490

你的问题就在这里。

```
 using (SqlDataReader reader = cmd.ExecuteReader())
        {
          cmd.ExecuteNonQuery();
          return true;
        } 
```

您正在调用`cmd.ExecuteNonQuery()`，但该命令已被此 using 块内的阅读器使用。

由于您的代码对读者并没有真正做任何有意义的事情，为什么不完全删除该块并调用`cmd.ExecuteNonQuery()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:18:12.953

这就是问题，在 ActivateUser 中：

```
using (SqlDataReader reader = cmd.ExecuteReader())
                            {
                                cmd.ExecuteNonQuery();
                                return true;
                            } 
```

您不能在 SqlCommand 对象上打开 Reader，然后在没有先关闭 Reader 的情况下对该命令对象执行另一个查询 - 这直到最后一个“}”才会发生。实际上，在这种情况下，我不确定您是否甚至需要阅读器-您是否可能从 GetUser 函数中复制/粘贴？你只需要

```
cmd.ExecuteNonQuery();
return true; 
```

另外，我会考虑将执行阅读器、查询等的代码包装到一些函数中，以便您可以重用它们。这是我通常用作读者包装的内容：

```
public static DataTable ExecuteReader (string query,CommandType commType, params SqlParameter[] Paramerters)
{
   try
   {
      using (SqlConnection conn = new SqlConnection("your connection string here")
      {
          conn.Open();
          using (SqlCommand comm = new SqlCommand(conn,query))
          {
             conn.CommandType=commType;
             if (Parameters!=null) comm.Parameters.AddRange(Parameters);
             DataTable dt = new DataTable();
             using (SqlDataReader reader = comm.ExecuteReader())
             {
                dt.Load(reader);
             }
            return dt;
         }//end using command
     }//end using connection
}
 catch(Exception)
{
         throw;
}
}//end function 
```

您也可以为非查询、非阅读器等编写简单的包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T13:09:07.777

你为什么`cmd.ExecuteReader()`在`using`声明中这样做，然后`cmd.ExecuteNonQuery();`在下一行？

为什么要使用`ExecuteReader()`at ，因为您只是从数据库调用返回而不检查结果 -`ExecuteNonQuery`就足够了。

# django - Django分页器包含所有先前页面的所有元素

> ID：15040847
> 
> 赞同：0
> 
> 时间：2013-02-23T13:04:58.830
> 
> 标签：django, paginator

我阅读了[有关使用 Django 分页的文档，](https://docs.djangoproject.com/en/1.4/topics/pagination/)但在那里找不到我的问题的解决方案。我想对查询集（每页 5 个元素）进行分页，以便我`object_list`包含**所有先前页面的所有元素，**直到请求页面的元素。

这是我调用第 2 页的对象时通常会发生的情况：

```
>>> p = Paginator(queryset, 5)  # 5 elements per page
>>> page2 = p.page(2)
>>> page2.object_list
['6', '7', '8', '9', '10'] 
```

我想要得到的是：

```
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:48:21.507

这里输入代码是正常的，因为，这是对象Paginator所做的

```
page1 = p.page(1)
page1.object_list 
```

[1, 2, 3, 4, 5] （每页 5 项，从第（1）项到第（5）项，这是第一页）

```
page2 = p.page(2)
page2.object_list 
```

['6', '7', '8', '9', '10']（每页 5 项，从第 (6) 项到第 (10) 项，这是第二页）

**对象 Paginator 的定义：给 Paginator 一个对象列表，加上你希望在每个页面上拥有的项目数，**

# php - 如何将数据从 Greasemonkey 发送到 PHP (WAMP) 服务器？

> ID：15040849
> 
> 赞同：0
> 
> 时间：2013-02-23T13:05:23.990
> 
> 标签：php, wamp, greasemonkey

我正在创建一个 Greasemonkey 脚本，我在其中计算六个变量（时间、移动、滚动、sav、prin、book 和 url）。

我需要将这些变量的数据发送到我的 PHP 页面，以便可以使用 WAMP 服务器将这些数据插入到 MySQL 表中。

拜托，任何人都可以给它确切的代码，因为我对这一切都不熟悉吗？

我的 Greasemonkey 脚本是：

```
{var ajaxDataObj = {
    s:      sav,
    p:      prin,
    b:      book,
    t:      finalTime,
    u:      url,
    a:      totalScroll,
    b:      tot
};

var serializedData  = JSON.stringify (ajaxDataObj);

GM_xmlhttpRequest ( {
    method: "POST",
    url:    "localhost/anuja/greasemonkey.php",
    data:   serializedData,
    headers: {
        "Content-Type": "application/json",
        "User-Agent": "Mozilla/5.0",    // If not specified, navigator.userAgent will be used.
        "Accept": "text/xml"            // If not specified, browser defaults will be used.
} } 
```

而php方面是：

```
$jsonData   = json_decode($HTTP_RAW_POST_DATA);

echo jsonData.u; 
```

这段代码没有运行.. 另外我尝试检查我的变量`u`是否已通过使用`jsonData.u`，但它只是回显“jsonData.u”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-11-26T04:22:04.653

我只是创建用户脚本以使 Greasemonkey 从打开的网页中抓取数据并将参数 POST 到托管在我的本地 XAMPP 服务器上的 PHP 脚本，该服务器可以运行本地 Python 脚本来自动化工作。

这也是从 Javascript 呈现的页面中抓取数据的一种很酷的方法，这对于 Python 抓取工具来说很难，甚至比 Selenium 更好：P

`&`参数在此 PHP 示例 url 中被分隔：

```
http://www.sciencedirect.com/search?qs=Vascular%20stent&authors=&pub=&volume=&issue=&page=&origin=home&zone=qSearch&offset=1200 
```

GM脚本部分：

```
// @grant        GM_xmlhttpRequest
unsafeWindow.sendPhp2Py = function(){
    //var ytitle = 'Youtube - ' + document.querySelector('div.yt-user-info').textContent.trim();
    var yurl = document.location.href;
    //console.info(ytitle);
    //console.info(yurl);
    var ret = GM_xmlhttpRequest({
        method: "POST",
        url: "http://localhost/php_run_py.php",
        //data: "ytitle="+ ytitle + "&yurl="+ yurl,
        data: "yurl="+ yurl,
        headers: {
            "Content-Type": "application/x-www-form-urlencoded"
        },
        onload: function(response) {
            console.log(response);
            // readyState 4 = complete
            // status = 200 OK
            if(response.readyState == 4 && response.status == 200){
                document.querySelector('#myPhpPyBtn').textContent = 'Sent to PHP!';
            }
        },
        onerror: function(e){
            console.log(e);
            document.querySelector('#myPhpPyBtn').textContent = 'PHP not connected';
        }
    });
}; 
```

PHP 脚本：

```
<?php
    echo $_POST['yurl'];
//传递多个参数如下可以行得通 参数里包含空格哦也可以！！赞 Multiple parameters pass
    //echo shell_exec("python test.py \"".$_POST['ytitle']."\" \"".$_POST['yurl']."\"");
    //echo shell_exec("python GreaseMonkey_Php_Youtube_srt_generator.py ".$_POST['yurl']);
//更安全 Safer
    //system(escapeshellcmd("python test.py \"".$_POST['ytitle']."\" \"".$_POST['yurl']."\""));
    system(escapeshellcmd("python GreaseMonkey_Php_Youtube_srt_generator.py ".$_POST['yurl']));
?> 
```

Python测试脚本：

```
#coding=utf-8
import sys
f = open("test.txt", "a+")
f.write(sys.argv[1] + "\n" + sys.argv[2]+ "\n") 
f.close()
print ("some output") 
```

希望它可以帮助！

# jquery - jQuery Mobile 在 PageCreate 上更改页面

> ID：15040853
> 
> 赞同：2
> 
> 时间：2013-02-23T13:05:55.360
> 
> 标签：jquery, jquery-mobile

大家好。

我想我想了解更多关于 jQuery mobile 的知识，所以我昨天开始了，但我已经被困在了最开始的地方。

我想要实现的是：

*   index.html 加载
*   index.html 重定向到 pages/home.html

这样，pages/home.html 将成为默认页面。这有可能吗？目前，我有这个：

```
<body>
    <script>
    $(document).bind('pagecreate', function()
    {
        $.mobile.changePage("pages/home.html");
    });
    </script>
</body>
</html> 
```

它显示了一种奇怪的行为，滑动两次并显示错误消息（说页面无法加载）。

我希望我的所有页面都在 pages 子目录中。这是可能的还是我又不可能了？

谢谢。

编辑

另一个页面在正文中包含以下内容；

```
<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div>

    <div data-role="content">
        <p>Page content goes here.</p>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T14:50:54.730

有可能，由于将事件绑定到文档而发生了奇怪的行为，每次加载页面时都会触发 pagecreate 事件。（第一次是从 index 到 pages/home.html，第二次是从 pages/home.html 到 pages/home.html ）为了避免这个问题，像这样在你的 index 页面中设置一个 id 并将事件绑定到 # indexPage 而不是文档。

```
<div data-role="page" id="indexPage">

<script type="text/javascript">
   $("#indexPage").bind('pagecreate', function()
   {
    $.mobile.changePage("pages/home.html");
   });
</script> 
```

请注意，$.mobile.changePage() 仅在将您的 html 放入托管/本地服务器（localhost）时才有效。如果您不想将文件放到服务器上。还有另一种方法，使用 window.location 而不是 $.mobile.changePage()。因为 $.mobile.changePage() 将通过使用 ajax 加载 html 而不是在浏览器中刷新整个页面来以编程方式从一个页面更改为另一个页面。

```
<script type="text/javascript">
 $("#indexPage").bind('pagecreate', function()
 {
   window.location = "pages/home.html;
 });
</script> 
```

更详细的步骤请参考[http://demanstudio.blogspot.com/2013/02/change-pages-in-jquery-mobile.html](http://demanstudio.blogspot.com/2013/02/change-pages-in-jquery-mobile.html)

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:36:21.003

这里是 index.html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
<script>
    $(document).bind('pagecreate', function()
    {
        $.mobile.changePage("home.html");
    });
    </script>

</body>
</html> 
```

这是 home.html

```
<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div>

    <div data-role="content">
        <p>Page content goes here.</p>
    </div>

</div> 
```

在本地服务器上运行，不要直接在浏览器中打开。它工作正常

# java - 如何从 ftp 位置 jackcess 打开 .mdb

> ID：15040856
> 
> 赞同：0
> 
> 时间：2013-02-23T13:06:24.133
> 
> 标签：java, database, ftp, sharing, jackcess

大家好，使用此代码我可以成功下载 allpg.mdb 并显示...现在我想将下载的文件保存到 c:/folder...。

如果我编辑

```
dbTempFile = File.createTempFile("dbTempFile",".mdb");   to
dbTempFile = File.createTempFile("c:/dbTempFile",".mdb"); than it give : The filename, directory name, or volume label syntax is incorrect error. 
```

我只想将下载的文件保存到本地驱动器的任何位置。

这是代码：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.commons.net.ftp.FTPClient;

import com.healthmarketscience.jackcess.Database;
import com.healthmarketscience.jackcess.Table;

public class DownloadFile {
public static void main(String[] args) throws Exception {
FTPClient client = new FTPClient();

File dbTempFile=null; 
FileOutputStream fileOutputStream = null;

try {
  client.connect("ftp.mypak.com");
  client.login("myid", "mypwd");
  client.setFileType(FTPClient.BINARY_FILE_TYPE);

  dbTempFile = File.createTempFile("dbTempFile",".mdb");
  fileOutputStream = new FileOutputStream(dbTempFile);
  client.retrieveFile("/HASSAN/MDMSTATS/allpg.mdb", fileOutputStream);
} catch (IOException ex) {
  ex.printStackTrace();
} finally {
  try {
    if (fileOutputStream != null) {
      fileOutputStream.close();
      System.out.println("got");

     Table table = Database.open(dbTempFile).getTable("items");
     System.out.println(table.display());

      System.out.println("got");
    }
    client.disconnect();
  } catch (IOException ex) {
    ex.printStackTrace();
  }
} 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:49:24.247

您没有为 Jackcess 构造函数提供正确的文件名。应该：

```
 Table table = Database.open(dbTempFile).getTable("items"); 
```

# ruby - 了解 Ruby 模块的行为

> ID：15040858
> 
> 赞同：4
> 
> 时间：2013-02-23T13:06:50.343
> 
> 标签：ruby, module, scope

所以我最近才开始写一些 Ruby，虽然我了解模块是如何工作的，但以下行为仍然让我感到厌烦。

```
module ModuleA
    def a_greet
        'Hello from module A'
    end
end

module ModuleB
    def b_greet
        'Hello from module B'
    end
end

include ModuleA
include ModuleB

# WHY DOES THIS WORK !!!!!
p ModuleA.b_greet 
```

我知道可以在不指定的情况下调用模块中的函数，`Module.`并且我永远不会以这种方式编写代码，但是我不明白为什么在显式声明 ModuleA 时可以调用 ModuleB 中包含的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T13:10:10.107

等等，还有更多：

```
"Why does this work?".b_greet # => "Hello from module B" 
```

您将这些模块包含在顶级对象`main`中。它是一个特殊的对象：在其上定义的所有方法都可用于所有对象（参见上面的行，现在`b_greet`a 上有方法`String`）。`ModuleA`也是一个对象，所以当你 include 时`ModuleB`，`ModuleA`会得到它的方法。如果您将这些模块包含在常规类/对象中，您将不会获得这种“共享”行为。

# android - 在 ViewPagerIndicator 中设置布局？

> ID：15040859
> 
> 赞同：0
> 
> 时间：2013-02-23T13:06:51.283
> 
> 标签：android, viewpagerindicator

嗨，我在尝试使用 Jake 的 ViewPagerIndicator 时遇到了一些困难。我的第一个问题是如何在 ViewPagerIndicator 中为不同页面设置不同的布局？

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        TextView text = new TextView(getActivity());
        text.setText("Hello!");
        text.setTextSize(20 * getResources().getDisplayMetrics().density);
        text.setPadding(20, 20, 20, 20);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        layout.addView(text);

    return layout;
} 
```

我已经非常简短地编辑了示例代码，但我不知道如何更改不同页面滑动之间的布局，我还想知道如何设置我在 ViewPagerIndicator 中创建的项目的 ID，以便我可以做出响应？我试图说类似的话

```
text.onclicklistener 
```

但是我一直在使用此代码时出错。我现在也想知道我是否必须为我在他的班级中创建的所有项目设置一个 ID。我也试过这个，但没有成功。我是否必须使用 ID 才能使用 OnClickListener .etc？

`text.setId("android:id@hello");`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T20:53:58.137

您可以通过调整代码来做到这一点！

首先评论这部分：

```
 StringBuilder builder = new StringBuilder();
    for (int i = 0; i < 20; i++) {
        builder.append(content).append(" ");
    }
    builder.deleteCharAt(builder.length() - 1); 
```

其次添加：fragment.mContent = content; // 在循环下面

第三，你必须在 onCreateView() 中扩展你的布局：

```
 View view=null;
    if(mContent.equals("title1"))
    {
        view = inflater.inflate(R.layout.title1, container, false);

    }
    else if(mContent.equals("title2"))
    {
        view = inflater.inflate(R.layout.title2, container, false);
    } 
```

返回视图；

# android - 从应用程序启动果冻豆语音搜索？

> ID：15040861
> 
> 赞同：0
> 
> 时间：2013-02-23T13:06:59.683
> 
> 标签：android

如何在 jellybean 上直接启动默认的 google 语音搜索，之后您无需按任何按钮即可直接说话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:54:45.910

用这个：

```
Intent intent = new Intent(RecognizerIntent.ACTION_WEB_SEARCH);
startActivity(intent); 
```

这会将您发送到您的默认语音搜索应用程序。只需像平常一样使用它`onClickListener`，例如

# jquery - jquery数据表设置

> ID：15040862
> 
> 赞同：0
> 
> 时间：2013-02-23T13:07:06.283
> 
> 标签：jquery, datatables

我正在尝试设置 jquery 数据表插件，但是，我遇到了砖墙。以下是我到目前为止所要做的......我创建了一个名为“testtable.php”的页面，以下是它的内容。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Cloudone Chart Of Accounts</title>

<script type="text/javascript" src="js/jquery.dataTables.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>

<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "server_processing.php"

    } );
} );

        </script>
        <link href="css/demo_table.css" rel="stylesheet" type="text/css" />
</head>

<body>
<table width="101%" border="0" class="display" id="example">
<thead>
  <tr>
    <th width="32%" scope="col">Rendering Engine;</th>
    <th width="28%" scope="col">&nbsp;</th>
    <th width="10%" scope="col">&nbsp;</th>
    <th width="10%" scope="col">&nbsp;</th>
    <th width="10%" scope="col">&nbsp;</th>
    <th width="10%" scope="col">&nbsp;</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>engine</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
</table>

</body>
</html> 
```

使用 datatables.net 提供的示例，我创建了第二个页面，名为“server_processing.php”，填写了所需的连接设置，并将其与“testtable.php”一起放在测试服务器上。我正在使用 datatables.net 概述的基本配置，只是为了让事情启动并运行，这样我就可以玩一下以熟悉工作原理。这就是我难过的地方，我无法让页面呈现结果。我怀疑在连接中省略了某些内容以及定义要在显示页面“testtable.php”中显示的变量的过程。

谁能指出我误入歧途的地方或参考jquery数据表服务器端处理的逐步设置示例。

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:09:52.713

让您在没有服务器端处理的情况下开始（如果您没有太多行应该没问题）

像现在一样创建您的 html 页面，用您的数据填充表格

所以：

```
<table width="101%" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="32%" scope="col">Rendering Engine;</th>
            <th width="28%" scope="col">&nbsp;</th>
            <th width="10%" scope="col">&nbsp;</th>
            <th width="10%" scope="col">&nbsp;</th>
            <th width="10%" scope="col">&nbsp;</th>
            <th width="10%" scope="col">&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>engine</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>engine1</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>engine1</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

然后简单地初始化数据表，没有任何选项。

请参阅此示例：http: [//jsfiddle.net/V97jd/](http://jsfiddle.net/V97jd/)

# python - 如何减少python中大型列表使用的内存

> ID：15040863
> 
> 赞同：2
> 
> 时间：2013-02-23T13:07:14.990
> 
> 标签：python, list

我正在编写一个程序，它工作正常，但是当它将数据库（一个 100MB 的文本文件）加载到一个列表时，它的内存使用量变为 700-800MB

用于将文件加载到列表的代码：

```
database = []
db = open('database/db.hdb')
dbcontent = db.read()
for line in dbcontent.split('\n'):
    line = line.split(':')
    database.append(line) 
```

来自 db.hdb 的片段：

```
14200:917cb8a3d1d9eb24af6c5bcf3bf7e401:Trojan.Downloader-1420
7168:a105e2cc8148158cd048360eb847c7d0:Trojan.Downloader-1421
7168:c61ef67b5e7eef19ef732f55116742f6:Trojan.Downloader-1422
7168:851b6320148122104f50445ea2684c9f:Trojan.Downloader-1423
7168:ca128383c79a56d930eb4a7ff5026e31:Trojan.Downloader-1424
355204:4af89f8d219f94462cf2f8cb8eb4c6d7:Trojan.Bancos-2053
356984:2bfb53d76891059b79122e13d1537e4a:Trojan.Bancos-2054
363520:edbbdf497cda1ba79c06ea40673d963e:Trojan.Bancos-2055
367616:d85f719b032dbf39800d90ca881fd225:Trojan.Bancos-2056
370688:6cb572fd2452416dc4ea09e3ad917e66:Trojan.Bancos-2057
370688:ef34885677230061649d30ea66d7b0a1:Trojan.Bancos-2058
399360:8578b664706cfdc2f653680bac1b1b6e:Trojan.Bancos-2059
401408:de62af250b5a3e1ba1e9c517629383dd:Trojan.Bancos-2060
622592:8a236340c0a8c76343f6fb581314fadf:Trojan.Bancos-2061
622592:29f3499488ba1814c62fac3c2f3bda54:Trojan.Bancos-2062
622592:5d023bccf2ff097ccbc0ab0eab4a6ee7:Trojan.Bancos-2063
622592:3d6a25ed1f0e2001e72812ce1adf37d3:Trojan.Bancos-2064
622592:eaff242b601807e5805c189752d39124:Trojan.Bancos-2065
623104:8cd8e788d33cf40412d3346a525e4cce:Trojan.Bancos-2066
625152:25470d6895cb0e5c2e7181cb9a201ae0:Trojan.Bancos-2067
625152:436d574cef37b2e62d9b801b8fc2c4f1:Trojan.Bancos-2068
647168:51eb4e43f24cf511e6715cc8667babcd:Trojan.Bancos-2069 
```

（完整文件有 ~1800000 行）

如何减少内存使用量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:25:20.160

您应该使用文件对象作为迭代器来减少文件的内存使用。然后，您可以分块处理数据库列表，而不是一起处理。例如：

```
results = []
database = []
for line in open("database/db.hdb"):
    line = line.split(':')
    #You could then manage database in chunks?
    database.append(line)
    if len(database) > MAX:
        #dosomething with database list so far to get result
        results.append(process_database(database))
        database = []
#do something now with individual results to make one result
combine_results(results) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T13:20:56.617

只要您不需要内存中的完整文件，您就可以一次读取一行：

```
database = []
db = open('database/db.hdb')
line = db.readline()
while line:
    line = line.split(':')
    database.append(line)
    line = db.readline() 
```

[有关详细信息，请参见此处`file.readline()`](http://docs.python.org/2/library/stdtypes.html#file.readline)

# python - 必须有更好的方法来做到这一点

> ID：15040868
> 
> 赞同：0
> 
> 时间：2013-02-23T13:08:06.433
> 
> 标签：python

这是一个丑陋的，高维护的工厂。我真的只需要一种方法来使用字符串来实例化一个名称与字符串匹配的对象。我认为元类是答案，但我不知道如何应用它：

```
from commands.shVersionCmd import shVersionCmd
from commands.shVRFCmd import shVRFCmd
def CommandFactory(commandnode):
    if commandnode.attrib['name'] == 'shVersionCmd': return shVersionCmd(commandnode)        
    if commandnode.attrib['name'] == 'shVRFCmd': return shVRFCmd(commandnode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:46:40.933

您可以使用该函数查找全局名称，该`globals()`函数返回一个字典：

```
from commands.shVersionCmd import shVersionCmd
from commands.shVRFCmd import shVRFCmd

# An explicit list of allowed commands to prevent malicious activity.
commands = ['shVersionCmd', 'shVRFCmd']

def CommandFactory(commandnode):
    cmd = commandnode.attrib['name']
    if cmd in commands:
        fn = globals()[cmd]
        fn(commandnode) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:14:22.490

`eval`是你的朋友：

```
from commands import *
def CommandFactory(commandnode):
    name=commandnode.attrib['name']
    assert name in ( "shVersionCmd", "shVRFCmd" ), "illegal command"
    return eval(name+"."+name)(commandnode) 
```

请注意，如果您*确定*它`name`永远不会包含任何非法命令，您*可以*删除`assert`并将该功能变成无维护的乐趣。如有疑问，请将其保留在一个地方并将列表保留在一个地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:27:16.933

这个答案[如何在 Python 中创建匿名函数而不用洗礼？](https://stackoverflow.com/questions/6629876/how-to-make-an-anonymous-function-in-python-without-christening-it)讨论如何基于键干净地调用代码块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T14:33:34.607

我个人的偏好是改变工厂和命令实现之间的依赖关系，以便每个命令都向工厂注册自己。

示例实现：

文件命令/__init__.py：

```
import pkgutil
import commands

_commands = {}

def command(commandCls):
    _commands[commandCls.__name__] = commandCls
    return commandCls

def CommandFactory(commandnode):
    name = commandnode.attrib['name']
    if name in _commands.keys():
        return _commands[name](commandnode)

# Load all commands
for loader, module_name, is_pkg in  pkgutil.walk_packages(commands.__path__):
    if module_name!=__name__:
        module = loader.find_module(module_name).load_module(module_name) 
```

文件命令/mycommand.py：

```
from commands import command

@command
class MyCommand(object):    
    def __init__(self, commandnode):
        pass 
```

小测试：

```
from commands import CommandFactory

# Stub node implementation
class Node(object):
    def __init__(self, name):
        self.attrib = { "name": name }

if __name__=='__main__':
    cmd = CommandFactory(Node("MyCommand"))
    assert cmd.__class__.__name__=="MyCommand", "New command is instance of MyCommand"
    cmd = CommandFactory(Node("UnknownCommand"))
    assert cmd is None, "Returns None for unknown command type" 
```

# c# - 我如何在 C# 中以 pdf 格式获取 datagridview 的数据

> ID：15040869
> 
> 赞同：0
> 
> 时间：2013-02-23T13:08:08.127
> 
> 标签：c#

我想从 Excel 中的表格中获取数据，并使用宏自动填写多个可填写的 PDF 表单。

![在此处输入图像描述](../Images/8ba646346c089b0ac686cb53d3e1d2e6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:14:38.417

这是一篇文章，解释了如何将 datagridview 转换为 PDF 和 excel 文件

[http://www.codeproject.com/Articles/28269/Exporting-a-DataGridView-to-an-Excel-PDF-image-fil](http://www.codeproject.com/Articles/28269/Exporting-a-DataGridView-to-an-Excel-PDF-image-fil)

这是我最近在我的一个项目中所做的：

```
public void ExportToPdf(DataTable ExDataTable) //Datatable 
  {
    //Here set page size as A4

    Document pdfDoc = new Document(PageSize.A4, 10, 10, 10, 10);

  try
   {
      PdfWriter.GetInstance(pdfDoc, System.Web.HttpContext.Current.Response.OutputStream);
      pdfDoc.Open();

       //Set Font Properties for PDF File
       Font fnt = FontFactory.GetFont("Times New Roman", 12);
       DataTable dt = ExDataTable;

        if (dt != null)
        {

            PdfPTable PdfTable = new PdfPTable(dt.Columns.Count);
            PdfPCell PdfPCell = null;

            //Here we create PDF file tables

            for (int rows = 0; rows < dt.Rows.Count; rows++)
            {
                if (rows == 0)
                {
                    for (int column = 0; column < dt.Columns.Count; column++)
                    {
                        PdfPCell = new PdfPCell(new Phrase(new Chunk(dt.Columns[column].ColumnName.ToString(), fnt)));
                        PdfTable.AddCell(PdfPCell);
                    }
                }
                for (int column = 0; column < dt.Columns.Count; column++)
                {
                    PdfPCell = new PdfPCell(new Phrase(new Chunk(dt.Rows[rows][column].ToString(), fnt)));
                    PdfTable.AddCell(PdfPCell);
                }
            }

            // Finally Add pdf table to the document 
            pdfDoc.Add(PdfTable);
        }

        pdfDoc.Close();

        Response.ContentType = "application/pdf";

        //Set default file Name as current datetime
        Response.AddHeader("content-disposition", "attachment; filename=" + DateTime.Now.ToString("yyyyMMdd") + ".pdf");

        System.Web.HttpContext.Current.Response.Write(pdfDoc);

        Response.Flush();
        Response.End();

    }
    catch (Exception ex)
    {
        Response.Write(ex.ToString());
    }
} 
```

# c# - 将枚举值添加到简单的组合框

> ID：15040872
> 
> 赞同：8
> 
> 时间：2013-02-23T13:08:11.807
> 
> 标签：c#, wpf, combobox, enums

我有一个关于 C# 和 WPF 的非常简单的问题要问。在我的这次尝试之后，我的问题将随之而来：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            foreach (var item in Races)
            {
                cbRace.Items.Add(item);
            }
        }
    }

    enum Races
    {
        Human=1,
        Dwarf,
        Elf,
        Orc,
        Goblin,
        Vampire,
        Centaur
    } 
```

好的，我的问题是如何将值（例如 Human、dwarf、elf ....）添加到组合框中：cbRace？抱歉，我是 C# 的新手，所以如果有人可以帮助我，我将不胜感激:)，在此先感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-23T13:14:49.087

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        foreach (var item in Enum.GetValues(typeof(Races)))
        {
            cbRace.Items.Add(item);
        }
    }
    enum Races
    {
        Human = 1,
        Dwarf,
        Elf,
        Orc,
        Goblin,
        Vampire,
        Centaur
    } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-23T13:17:09.803

你应该能够做这样的事情：

```
cbRace.DataSource = Enum.GetValues(typeof(Races)); 
```

查看[此](https://stackoverflow.com/questions/906899/binding-an-enum-to-a-winforms-combo-box-and-then-setting-it)答案以获取有关设置和检索枚举值的更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-23T14:26:35.753

这可能是设置 ComboBox 项的最简单方法：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    cbRace.ItemsSource = Enum.GetValues(typeof(Races));
    cbRace.SelectedIndex = 0;
} 
```

不必遍历枚举值，只需设置[`ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-20T11:07:40.247

这不是首选的解决方案，因为 Clemens 已经为您提供了，但如果您想直接添加 XAML，您也可以这样做

```
<ComboBox>
    <urCode:Races>Human</urCode:Races>
    <urCode:Races>Dwarf</urCode:Races>
    <urCode:Races>Elf</urCode:Races>
</ComboBox> 
```

您还可以实现一个 IValueConverter，它在绑定到类型时返回 Enum.GetValues

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-31T04:12:42.770

在 C# 中将枚举值添加到组合框的最短方法

```
class User{

public enum TYPE { EMPLOYEE, DOCTOR, ADMIN };

} 
```

// 将此类添加到 Form Cunstructor 的表单加载事件中

```
cmbUserType.Items.AddRange(Enum.GetNames(typeof(User.TYPE))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T13:20:57.510

用这个

```
cbRace.Datasource = Enum.GetValues(typeof(Races)); 
```

将您的枚举数据绑定到组合框，然后使用组合框的 selectedValue 和 selectedText 属性来检索名称和值；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-31T04:00:03.923

```
cmbUserType.Items.AddRange(core.Global.ToObjectArray(Enum.GetValues(typeof(STATUS))));
public enum STATUS { INACTIVE, ACTIVE } 
```

# c++ - 二叉树（从文件中读取）

> ID：15040874
> 
> 赞同：0
> 
> 时间：2013-02-23T13:08:24.710
> 
> 标签：c++

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

template <class T>
struct TreeNode{
  string value;
  T key;
  TreeNode<T> *LeftChild;
  TreeNode<T> *RightChild;
  TreeNode (T k,string Val)
  {
           this->value=Val;
           this->key=k;
           this->LeftChild=NULL;
           this->RightChild=NULL;
  }
};

template <class T>
class BinaryTree{
  private:
       TreeNode<T> *Root;        
  public:  
       BinaryTree();
       void insertNode();
};

template <class T>
BinaryTree<T>::BinaryTree()
{
Root=NULL;                       
ifstream fin;
fin.open("names.txt");
string buffer;
T buff;
while (!fin.eof())
{
      getline(fin,buffer,'~');
      fin>>buff;
      cout<<buff<<buffer<<endl;
      cout<<"down the tree"<<endl;
      TreeNode<T> *temp=Root;
      while (temp!=NULL)
      {
          TreeNode<T> *Right=temp->RightChild;
          TreeNode<T> *Left=temp->LeftChild;
          if (temp->key>buff)
          {
              temp=temp->LeftChild;
          }
          else if (temp->key<buff)
              temp=temp->RightChild;
          }
          cout<<"further down"<<endl;
      }
      temp->value=buffer;
      temp->key=buff;
      cout<<"and done!"<<endl;

      cout<<"hey"<<endl;
}
fin.close();
} 
```

我正在制作一棵二叉树。我的树中有指向左右子节点的指针，每个节点都有一个键和一个字符串值。在我的析构函数中，我正在从文件中读取并将键和值存储在节点中。文件的每一行都具有以下格式： `"M. Ubiquity~ 14100148"` - 值是名称后跟键。每当我运行此代码时，都会出现分段错误错误，但我似乎无法找到错误。任何提示/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:15:42.647

你有`Root=NULL;`，然后几行`TreeNode<T> *temp = Root;`，所以你有`temp=NULL`.

显然，`while (temp!=NULL)`从不执行和之后的while循环会`temp->value=buffer;`导致分段错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:13:52.657

指针只能与内存地址相关联，而不能与值相关联。主要有两种方法：如果你有一个自动变量，你可以将它的地址分配给这样的指针：

```
int  i  = 6; //automatic variable
int *pi = &i;
std::cout << pi; // you get the address of pi (hexadecimal number)
std::cout << *pi; // 6 
```

或者您可以手动分配内存。最主要的是，如果您将内存分配给变量，您还必须释放它，否则您的程序将出现“内存泄漏”。

```
int *pi = new int(6);
delete pi; 
```

所以如果你在树中放置新元素，你必须为它们分配内存，如果你删除一个元素，你必须用delete来破坏。您必须注意不要破坏列表。

# xaml - XAML 矩形未扩展

> ID：15040876
> 
> 赞同：1
> 
> 时间：2013-02-23T13:08:36.690
> 
> 标签：xaml, user-interface, windows-runtime, windows-store-apps, winrt-xaml

我有一个矩形可以水平扩展，但不能垂直扩展：

```
<Grid x:Name="MainDisplay" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0" Grid.Row="0">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="10" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="10" />
    </Grid.RowDefinitions>
    <Viewbox MinWidth="400" MinHeight="400" x:Name="Scenario4ImageContainer" Stretch="Fill" Grid.Column="0" Grid.Row="0" VerticalAlignment="Stretch">
        <Rectangle MinWidth="400" MinHeight="400" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Fill="Blue"/>
    </Viewbox> 
```

当我将 MinHeight 属性设置为 700 时，它会占用所有屏幕空间，但我想占用它所能获得的空间。

此外部网格也位于此父网格内部：

```
<Grid x:Name="Output" Background="#1D1D1D" Margin="0,2,0,-2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="300"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:40:42.987

我已经试用了您发布的 XAML，并且`Rectangle`扩展得很好。唯一限制它的是外部`Grid`，它定义了两行等高。尝试使第二行变窄，您会看到`Rectangle`展开：

```
<Grid x:Name="Output" Background="#1D1D1D" Margin="0,2,0,-2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="300"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="100" />
    </Grid.RowDefinitions>
    <Grid x:Name="MainDisplay" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0" Grid.Row="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="10" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="10" />
        </Grid.RowDefinitions>
        <Viewbox MinWidth="400" MinHeight="400" x:Name="Scenario4ImageContainer" Stretch="Fill" Grid.Column="0" Grid.Row="0" VerticalAlignment="Stretch">
            <Rectangle MinWidth="400" MinHeight="400" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Fill="Blue"/>
        </Viewbox>
    </Grid>
</Grid> 
```

# sql - SQL - 根据优先级选择行

> ID：15040880
> 
> 赞同：0
> 
> 时间：2013-02-23T13:09:07.067
> 
> 标签：sql, oracle, oracle10g, oracle11g

给定以下两个表：

产品类别

```
PRODUCT_CATEGORY    PRIOTITY

BOOK               100
VIDEO              200
CD                 300 
```

PRODUCT_TYPES

```
PRODUCT_TYPE_ID PRODUCTID   PRODUCT_CATEGORY
1               1001        VIDEO
2               1001        CD
3               1002        BOOK
4               1002        VIDEO
5               1003        BOOK 
```

我怎样才能加入这两个表，以便我从 PRODUCT_TYPES 中选择所有行，并且在有重复产品的地方，我只选择具有最高优先级的一个。

例如，对于 PRODUCTID 1002，我只想要类别为 VIDEO 的行，因为 VIDEO 的优先级高于 BOOK（这是表中其他 1002 产品的类别）。

这是我尝试过的，但我似乎只得到重复。

```
select product_type_id, productid, product_category
from product_types pt
join product_categories pc on (pc.product_category=pt.product_category) 
```

另一种方法是按 product_category 降序排序并选择 rownum=1 的第一行，但我怀疑这不是最佳解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:57:40.607

尝试以下查询：

```
 SELECT PT.*
 FROM PRODUCT_CATEGORIES PC INNER JOIN PRODUCT_TYPES PT
 ON PC.PRODUCT_CATEGORY = PT.PRODUCT_CATEGORY
 WHERE PC.PRIOTITY = (
 SELECT MAX(PRIOTITY) FROM PRODUCT_CATEGORIES IPC
   , PRODUCT_TYPES IPT
   WHERE IPC.PRODUCT_CATEGORY = IPT.PRODUCT_CATEGORY
     AND IPT.PRODUCTID = PT.PRODUCTID) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T13:12:26.640

```
WITH recordList 
AS
(
    SELECT  a.Product_TypeID,
            a.ProductID,
            a.Product_Category,
            b.Priority,
            ROW_NUMBER() OVER (PARTITION BY a.ProductID
                                ORDER BY b.Priority) RN
    FROM    Product_Types a
            INNER JOIN Product_Categories b
                ON a.Product_Category = b.Product_Category
)
SELECT      Product_TypeID,
            ProductID,
            Product_Category,
            Priority
FROM    recordList
WHERE   RN = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/487fa1/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T14:30:38.243

```
select
   product_type_id,
   productid,
   product_category
from
   PRODUCT_TYPES
where
   product_type_id in (
      select
         max(product_type_id) keep (dense_rank first order by priotity desc)
      from 
         PRODUCT_TYPES
         join PRODUCT_CATEGORIES using(product_category)
      group by 
         productid
   ) 
```

[SqlFiddle](http://www.sqlfiddle.com/#!4/2bcee/2)

# python - python 正则表达式后缀匹配

> ID：15040882
> 
> 赞同：1
> 
> 时间：2013-02-23T13:09:11.483
> 
> 标签：python, regex

对于一组典型的词后缀（ize、fy、ly、able...等），我想知道给定的词是否以它们中的任何一个结尾，然后删除它们。我知道这可以通过例如 word.endswith('ize') 迭代完成，但我相信有一种更简洁的正则表达式方法。尝试使用结束标记 $ 进行正面预测，但由于某种原因不起作用：

```
pat='(?=ate|ize|ify|able)$'
word='terrorize'
re.findall(pat,word) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:42:48.190

鲜为人知的事实：`endswith`接受一组可能性：

```
if word.endswith(('ate','ize','ify','able')):
    #... 
```

不幸的是，它没有指出找到了哪个字符串，因此它对删除后缀没有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T13:22:22.410

您正在寻找的实际上是 (?:)
看看这个：

```
re.sub(r"(?:ate|ize|ify|able)$", "", "terrorize") 
```

看看这个网站正则[表达式](http://www.regular-expressions.info/captureall.html)。
有一些有用的正则表达式技巧。希望你喜欢它。

顺便说一句，python 库本身就是一个简洁而精彩的教程。
我帮助（）很多:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T13:13:49.950

前瞻是一种锚定模式，就像`^`和`$`锚定匹配到特定位置一样，但它们本身不是匹配项。

您*想*匹配这些后缀，但在单词的末尾，所以请改用单词边缘锚`\b`：

```
r'(ate|ize|ify|able)\b' 
```

然后`re.sub()`用来替换那些：

```
re.sub(r'(ate|ize|ify|able)\b', '', word) 
```

效果很好：

```
>>> word='terrorize'
>>> re.sub(r'(ate|ize|ify|able)\b', '', word)
'terror' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T13:14:32.993

您需要调整括号，只需更改`pat`：

```
(?=ate|ize|ify|able)$ 
```

至：

```
(?=(ate|ize|ify|able)$) 
```

如果您稍后需要删除后缀，您可以使用以下模式：

```
^(.*)(?=(ate|ize|ify|able)$) 
```

在 REPL 中测试：

```
>>> pat = '^(.*)(?=(ate|ize|ify|able)$)'
>>> word = 'terrorize'
>>> re.findall(pat, word)
[('terror', 'ize')] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T13:15:16.697

如果是逐字匹配，那么只需删除前瞻检查，**$**插入符号就足够了。

# perl - 无法通过 telnet 客户端检索所有 memcache 密钥

> ID：15040884
> 
> 赞同：0
> 
> 时间：2013-02-23T13:09:23.423
> 
> 标签：perl, memcached, telnet, libmemcache

我想列出存储在 memcached 服务器中的所有键。

我用谷歌搜索了相同的内容，我得到了一些可以列出相同内容的 python/php 脚本。我对其进行了测试，但一切都失败了，没有人给我完整的密钥。我可以使用 telnet 命令查看数千个密钥

```
stats items 
```

我使用了使用 telnet 列出密钥的 perl 脚本，但这也失败了。我的意思是脚本列出了键，但不是全部。

我需要重新配置 telnet 吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:15:49.827

memcache 不提供详尽列出所有键的 api。“统计项目”与列出前 1M 键一样好。更多信息在这里：[http ://www.darkcoding.net/software/memcached-list-all-keys/](http://www.darkcoding.net/software/memcached-list-all-keys/)

不确定这是否对您有帮助，但 redis（可以被认为是 memcache 的超集）为密钥列表和搜索提供了更全面的 API。你可能想试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T13:25:30.490

如果您使用 python-memcached，并且想导出 memcache 服务器中的所有项目，我总结了解决这个问题的两种方法：[Export all keys and values from memcached with python-memcache](https://stackoverflow.com/questions/5730276/export-all-keys-and-values-from-memcached-with-python-memcache)

# android - AChart 引擎限制平移到有效数据点

> ID：15040890
> 
> 赞同：4
> 
> 时间：2013-02-23T13:10:19.757
> 
> 标签：android, achartengine, pan

我有一个使用 Achart 创建 2 个图表的 Android 应用程序。线图和条形图。每次运行应用程序时，这些图表将填充一个额外的数据点。所以在 10 次运行后，将有足够的数据覆盖可见的 x 轴。

我想要的是在第 11 次以上使用之后，能够平移图表，以便用户可以看到历史数据（回到第一个数据点）。我已经设定

```
 renderer.setPanEnabled(true, false);
    renderer.setZoomEnabled(false, false);
    renderer.setYAxisMin(0);
    renderer.setXAxisMin(0.5);
    renderer.setXAxisMax(10.5);
    renderer.setYAxisMax(100); 
```

这一切都很好，但是当我平移数据时，我能够平移到 x 轴上的 -ve 值，并且还能够平移超出我已经拥有的最大数据点。

我已经尝试设置一个 PanListener，我认为这是要走的路，但我只是不确定我应该在这个 Listener 中设置什么以仅将平移钳制到有效数据点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:20:43.337

用户平移只会修改 X 轴的最小值和最大值。为了避免这种情况，您必须确实添加 a`PanListener`并重置这些值。

您还可以设置平移限制。

```
renderer.setPanLimits(limits); 
```

# javascript - 未捕获的类型错误：对象的属性“哪个”# is not a function This bit of code generates that error in Chrome's JavaScript console & I'm not sure why. After Googling around for people with similar issues, I haven't found any D: The error mes 问问题 问问题 2013-02-23T13:10:33.147 1027 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. This bit of code generates that error in Chrome's JavaScript console & I'm not sure why. After Googling around for people with similar issues, I haven't found any D: The error message suggests that the issue is with the event.which() but I don't see how I'm using it any differently from expected, other people with similar don't seem to have had problem with it. $(document).keypress(function(event) { switch (event.which()) { case 38 : keyNorthPressed = true; break; case 39 : keyEastPressed = true; break; case 40 : keySouthPressed = true; break; case 41 : keyWestPressed = true; break; } }); Thanks in advance. The answer here. There are two possible ways two retrieve the event key code: event.keyCode or event.which Your code should be: $(document).keypress(function(event) { var code = event.keyCode || event.which; switch(code) { case 38 : keyNorthPressed = true; break; case 39 : keyEastPressed = true; break; case 40 : keySouthPressed = true; break; case 41 : keyWestPressed = true; break; } }); event.keyCode and event.which are attributes, not methods, you can't call them with a (). javascriptjqueryswitch-statement 4 1 回答 1 This answer is useful 1 答案在这里。 两种检索事件键码的可能方式： event.keyCode or event.which 您的代码应该是： $(document).keypress(function(event) { var code = event.keyCode || event.which; switch(code) { case 38 : keyNorthPressed = true; break; case 39 : keyEastPressed = true; break; case 40 : keySouthPressed = true; break; case 41 : keyWestPressed = true; break; } }); event.keyCode 和 event.which 是属性，不是方法，不能用 () 调用。 于 2013-02-23T13:22:12.773 回答 Related 1 html - 为什么这个内部div的内容在firefox中会意外地向左折叠？ 2 d - 有人能解释一下D语言模板速记形式吗？ 1 css - 为什么这个 div 在另外两个嵌套的 div 之间？z-index 相关 3 php - 从 php/myswl 动态创建的选择框更新文本框 1 xcode - Xcode 中的 Xml Rss 提要解析器问题？ 2 vb6 - 在没有Winsock控件的VB6中获取本地IP地址 2 web - lmhost 和本地测试网站 0 excel - Excel VBA：从共享列值创建新工作表 1 arduino - 在arduino中使用中断处理布尔值 1 windows-8 - Windows 8 HTML5/CSS3/JavaScript 应用程序：使用 CSS 将图像设置为背景 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15040892
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, switch-statement

This bit of code generates that error in Chrome's JavaScript console & I'm not sure why. After Googling around for people with similar issues, I haven't found any D:

The error message suggests that the issue is with the `event.which()` but I don't see how I'm using it any differently from expected, other people with similar don't seem to have had problem with it.

```
$(document).keypress(function(event) {
    switch (event.which()) {            
        case 38 :   keyNorthPressed = true;
                    break;
        case 39 :   keyEastPressed = true;
                    break;
        case 40 :   keySouthPressed = true;
                    break;
        case 41 :   keyWestPressed = true;
                    break;
    }
}); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:22:12.773

答案[在这里](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed)。

两种检索事件键码的可能方式：

```
event.keyCode or event.which 
```

您的代码应该是：

```
$(document).keypress(function(event) {
    var code = event.keyCode || event.which;
    switch(code) {       
        case 38 :   keyNorthPressed = true;
                    break;
        case 39 :   keyEastPressed = true;
                    break;
        case 40 :   keySouthPressed = true;
                    break;
        case 41 :   keyWestPressed = true;
                    break;
    }
}); 
```

event.keyCode 和 event.which 是属性，不是方法，不能用 () 调用。

# php - 与 php 和 javascript 连接

> ID：15040894
> 
> 赞同：-3
> 
> 时间：2013-02-23T13:10:38.273
> 
> 标签：php, javascript, concatenation

我必须`=>descriptif [i]= "'.$description[i].'";` 在循环中连接这个`(i=0 ; i<16 ; i++)`：

```
<?php echo 
    '<script> var descriptif = new Array ();

    </script>';
?> 
```

我需要这个 php 数组来创建一个 jquery 函数。帮我 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:14:01.037

查看 PHP 的 JSON 函数，特别是[json_encode()](http://www.php.net/manual/en/function.json-encode.php)

# jquery - JQuery UI：自动完成。对选择做出反应

> ID：15040899
> 
> 赞同：0
> 
> 时间：2013-02-23T13:11:21.447
> 
> 标签：jquery, select, user-interface, autocomplete

我在互联网上找到了几个例子，但它们对我不起作用。我正在尝试对一个 jquery ui 自动完成框的选择做出反应。我设法对结果进行了有效的回调，但是当我单击一个条目时，不会触发选择事件。我的代码如下所示：

```
 select: function( event, ui ) 
     {
         alert( ui.item.value);
     } 
```

响应来自 PHP 文件。我尝试使用仅包含结果名称的普通 JSON 数组，在互联网上进行一些研究后，我将其更改为如下所示的数组：

```
[{"id":0,"label":"Pinocchio","value":"Pinocchio"}] 
```

但这对我也不起作用。那么它有什么问题呢？

[编辑]：在视图中：

```
$('#search').autocomplete
    ({
       source:
        function(request, response)
        {
        var input = $('#search').val();
        $.ajax(
        {
                type: 'POST',
                url: '".CController::createUrl('autoComplete')."',
                data:
                {
                    string: input
                },
                success:
                        function (data)
                        {
                            response(data);
                        },
                dataType: 'json',
                 select: function( event, ui ) {
                 alert( ui.item.value);
                }
        });
        }
    }) 
```

Yeah, the array looks like I posted above. But even if it looks like ["value1","value2"] the select event is not fired. The weird thing is that the results ARE displayed however a select has no effect. So either it's the select part of the autocomplete or the array has not the correct form. But does it need a certain form?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:46:57.417

The [select](http://api.jqueryui.com/autocomplete/#event-select) is an event of [autocomplete](http://api.jqueryui.com/autocomplete) not ajax

```
$('#search').autocomplete ({
    source: function(request, response) {
        var input = $('#search').val();
        $.ajax(  {
            type: 'POST',
            url: '".CController::createUrl('autoComplete')."',
            data:{
                    string: input
            },
            success: function (data) {
                response(data);
            },
            dataType: 'json'
        });
    },
    select: function( event, ui ) {  //<<---- This should be passed to the `autocomplete` configuration
        alert( ui.item.value);
    }
}) 
```

# java - 在 Java/Android 中引入变量的更好方法是什么？

> ID：15040901
> 
> 赞同：2
> 
> 时间：2013-02-23T13:11:30.057
> 
> 标签：java, android

第一个示例在 Java/Android 和 Java 中生成的代码是否比第二个更高效？

至少第一个例子不能比第二个慢，我想..

我不在乎变量 v 在第一个示例中可能会存在更长的时间，也许会在更长的时间内吃掉内存。

当然，如果您有更复杂的代码和多个内部块，那么第二种方式确实更具可读性。这也不是这里的问题。

```
MyType v;
for(int i=0;i<bigCount;++i)
{
  v = <value produced for i>;
  //do something with v
}

for(int i=0;i<bigCount;++i)
{
  MyType v = <value produced for i>;
  //do something with v
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:14:23.700

我会选择第二个选项，因为`v`变量范围在`for`循环内。它不需要在外面的任何地方使用。

这样，创建和分配给的对象就可以`v`更早地进行垃圾回收。或者至少最后一个将比第一段代码更快地符合条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:40:08.850

我创建了一个最小的例子：

```
public void option1() {
    String s;
    for (int i = 0; i < foo; i++) {
        s = String.valueOf(i);
    }
}

public void option2() {
    for (int i = 0; i < foo; i++) {
        String s = String.valueOf(i);
    }
} 
```

并发现生成的字节码对于两者都是相同的：

`option1()`：

```
 0 iconst_0
 1 istore_2
 2 goto 13 (+11)
 5 iload_2
 6 invokestatic #17 <java/lang/String/valueOf(I)Ljava/lang/String;>
 9 astore_1
10 iinc 2 by 1
13 iload_2
14 aload_0
15 getfield #23 <MethodTest/foo I>
18 if_icmplt 5 (-13)
21 return 
```

* * *

`option2()`：

```
 0 iconst_0
 1 istore_1
 2 goto 13 (+11)
 5 iload_1
 6 invokestatic #17 <java/lang/String/valueOf(I)Ljava/lang/String;>
 9 astore_2
10 iinc 1 by 1
13 iload_1
14 aload_0
15 getfield #23 <MethodTest/foo I>
18 if_icmplt 5 (-13)
21 return 
```

我的猜测是，如果编译器看到，在循环之前创建的变量永远不会在循环之后使用，它只是将它的定义拉到循环中。所以在你的情况下，两者都不是更有效的。所以选择更易读的（`option2()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:21:53.260

为了防止多次分配，您可以像这样在它自己的范围内关闭变量：

```
{
  MyType v;
  for(int i=0;i<bigCount;++i)
  {
    v = <value produced for i>;
    //do something with v
  }
} 
```

`v`将由`GC`该块之后收集

# php - 转换时间戳

> ID：15040904
> 
> 赞同：0
> 
> 时间：2013-02-23T13:11:46.533
> 
> 标签：php, xml, xml-parsing

我对这段代码有疑问，我正在从不同的脚本中重用它，它正在从 xml 文件中读取并从节点转换日期/时间。节点中的日期如下，这是与原始脚本的唯一区别：

```
<od>10:15:41 01/03/13</od> 
```

我以为我已经正确修改了这个，但它不起作用：

```
$_date=$record->getElementsByTagName("od");
$_date=((!empty($_date))?$_date->item(0)->nodeValue:"");
if(strpos($_date,".")!==false)
{
    $_date=substr($_date,0,strpos($_date,"."));
}
$_date=date("H:i:s m/d/Y",strtotime($_date));
$_date.=(trim($_date)!="")?"Z":"";
xmlrpc_set_type($_date, 'datetime'); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:26:41.570

日期/时间`10:15:41 01/03/13`格式[无效](http://www.php.net/manual/en/datetime.formats.php)。

改为使用[`DateTime::createFromFormat`](http://www.php.net/manual/en/datetime.createfromformat.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:26:23.760

`strftime`可以很好地使用`Y-m-d H:i:s`格式，因为它是明确的。

另一方面，它会与 混淆`H:i:s m/d/y`，因为它可以解释为`H:i:s d/m/Y`。想想日期 02/03/2013 - m/d/y 表明它是 2 月 3 日，而 d/m/Y 表明它是 3 月 2 日。

换句话说，为了确保我们每次都能得到正确的日期，我们必须更加具体。`date_create_from_format('H:i:s m/d/y', $_date)`如果给定的日期确实是“H:i:sm/d/y”格式，将为您提供与正确日期相对应的 DateTime 对象。

```
// Retrieve the date string
$_date=$record->getElementsByTagName("od");
$_date=((!empty($_date))?$_date->item(0)->nodeValue:"");

// Standardize it
$_date = get_date( $_date );
$_date .= (trim($_date) != "") ? "Z" : "";
xmlrpc_set_type($_date, 'datetime');

function get_date( $rawDate ) {

    // Clean date string
    if(strpos($rawDate,".")!==false) {
        $rawDate=substr($rawDate,0,strpos($rawDate,"."));
    }

    // Attempt converting from m/d/y AND m/d/Y formats
    $date = date_create_from_format('H:i:s m/d/y', $rawDate);
    if( false === $date ) $date = date_create_from_format('H:i:s m/d/Y', $rawDate);

    if( !empty($date) ) {
        return $date->format('H:i:s m/d/Y'); // Convert the date to a string again
    }

    // If neither works, try using strtotime instead
    $date = @strtotime($rawDate);
    $date = !empty($date) ? date('H:i:s m/d/y', $date) : false;

    return $date;
} 
```

希望有帮助！

# c# - 键枚举 C#、AltKey

> ID：15040906
> 
> 赞同：2
> 
> 时间：2013-02-23T13:12:30.263
> 
> 标签：c#, keyboard, user-input

三个修饰键是 Control、Alt 和 Shift。
在按键枚举中，有 Control 和 ControlKey，Shift 和 ShiftKey 和 Alt，但缺少 AltKey。

Keys.ControlKey 指的是实际的 Ctrl 键，而 Keys.Control 指的是控件修改。同样，Keys.ShiftKey 指的是实际的 Shift 键，而 Keys.Shift 指的是移位修改。

实际的 Alt 键呢？
可以自己按下，Keys枚举中对应的元素应该是Keys.AltKey！

**您能解释一下 Keys 枚举中缺少 vlaue Keys.AltKey 吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:50:06.250

实际上，Alt 键的真正键（不是修饰符）枚举值`Keys.Menu`是`18`. 这只是一个命名约定。他们决定`Alt`仅将名称用于修饰符，而`Menu`用于非修饰符。有趣的是，文档中`Keys.Menu`写着“ **ALT 键**”。我们也有`Keys.LMenu`和`Keys.RMenu`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:38:42.190

猜测我会说缺少 Alt 键是由于在 WinForms 开发中，用于设置快捷键的范例是在字母前加上`&`字符，例如`E&xit`. 当应用程序运行时，它会自动设置为快捷命令 Alt+X。大多数 Windows 快捷键在开发中都是以这种方式设置的，这几乎消除了您想要在代码中检测它的任何原因 - 或者至少是 KeyDown 事件。也就是说，我个人希望 Alt 键可用。

# python - 在python中填充二维列表的边缘

> ID：15040913
> 
> 赞同：0
> 
> 时间：2013-02-23T13:13:33.647
> 
> 标签：python

我一直在使用代码

```
BOARD = [[0 for i in range(GRIDWIDTH)] for j in range(GRIDWIDTH)] 
```

为我的 pygame 项目的一部分创建一个二维“网格”。

我想知道如何用不同的数字填充网格的边缘，所以我在网格的中心全是零，边缘是一。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:20:30.223

```
BOARD = [[1] * GRIDWIDTH] + [
     [1] + [0]*(GRIDWIDTH-2) + [1] for j in range(GRIDWIDTH-2)
   ] + [[1] * GRIDWIDTH] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:35:42.030

我建议你在这里使用 numpy

```
>>> import numpy as np
>>> grid = np.zeros(shape=(10,10))
>>> grid[[0,-1],:] , grid[:,[0,-1]] = 1, 1
>>> grid
array([[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  1.],
       [ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]])
>>> 
```

# android - 为 Android 构建 ImageMagick

> ID：15040914
> 
> 赞同：0
> 
> 时间：2013-02-23T13:13:44.267
> 
> 标签：android, c, imagemagick, libjpeg

我正在使用[https://github.com/lilac/Android-ImageMagick](https://github.com/lilac/Android-ImageMagick)为 Android 构建 ImageMagick 库。在尝试 ndk-build ImageMagick 时，我最终遇到了以下错误。

```
primary0:AndroidMagickActivity primary0$ ~/ndk/ndk-build 
SharedLibrary  : libandroid-magick.so
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:988: error: undefined reference to 'jpeg_std_error'
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:995: error: undefined reference to 'jpeg_destroy_decompress'
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:1004: error: undefined reference to 'jpeg_CreateDecompress'
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:1006: error: undefined reference to 'jpeg_set_marker_processor'
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:1007: error: undefined reference to 'jpeg_set_marker_processor'
/Users/primary0/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libcoders.a(jpeg.o): in function ReadJPEGImage:jni/../ndk-modules/ImageMagick-6.7.3-0/coders/jpeg.c:1008: error: undefined reference to 'jpeg_set_marker_
.
.
.
collect2: ld returned 1 exit status 
make: *** [obj/local/armeabi/libandroid-magick.so] Error 1
primary0:AndroidMagickActivity primary0$ 
```

包含定义错误中列出的常量的头文件 jpeg.c

```
#include "jpeglib.h" 
```

你们中的任何人都知道为什么我会收到未定义的参考错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:27:14.940

链接器不是在寻找“常量”，而是在寻找跳转地址来调用函数。您的代码显然使用了目标代码中不可用的功能。这可能有多种原因。要么您没有告诉编译器使用可用的库，要么（在您的情况下更有可能）您没有告诉编译器`jpeg.c`也需要为此共享对象进行编译。但是如果不查看 makefile 就很难诊断。

看一下 git 存储库的 ndk-modules 文件夹，我觉得您需要构建多个模块。也许你只是按错误的顺序做。先尝试构建`jpeg`。

# android - android:layout_centerHorizo ntal="true" 在 android 中不起作用

> ID：15040916
> 
> 赞同：3
> 
> 时间：2013-02-23T13:13:50.063
> 
> 标签：android, layout

我正在使用此布局在中心制作图像和文本。但它不起作用。我只是使用 android:layout_centerHorizo​​ntal="true"。为什么它不起作用我不明白。有人可以帮忙解决这个问题吗？

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#ffffff">

        <ImageView
            android:id="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="70dp"
            android:background="@drawable/image_tutorial1" />

        <TextView
            android:textSize="14dp"
            android:id="@+id/title"
            android:layout_below="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:text="@string/info4"
            android:textColor="#000000"
            android:textStyle="bold" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:34:12.753

在布局中，`RelativeLayout`的宽度设置为`wrap-content`，它根本没有占用整个可用宽度。它的内容*被*居中，但他们的父母`View`正在缩小以适应他们。

尝试`fill_parent`root：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
```

此外，a `LinearLayout`with `orientation="vertical"`and`gravity="center_horizontal"`将做同样的事情，更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-24T21:22:46.590

使用相对布局：

```
android:layout_centerInParent="true" 
```

和

```
android:layout_width="wrap_content" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:15:41.643

在RelativeLayout布局下使用[android:layout_centerHorizo​​ntal="true"]，然后就可以了

```
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-24T21:25:56.797

你为你的 RelativeLayout 使用了这个错误

```
 android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
```

它应该是

```
android:layout_height="match_parent"
android:layout_width="match_parent" 
```

# delphi - 如何在 Delphi 2009 CodeGear 上安装 COM 端口组件？

> ID：15040925
> 
> 赞同：1
> 
> 时间：2013-02-23T13:14:39.930
> 
> 标签：delphi, serial-port

我正在使用*CodeGear Delphi 2009*并尝试安装几个*COM 端口*组件，但失败了。你能告诉我在哪里可以获得一个好的、免费的*COM 端口*组件以及如何将它安装到 IDE 中吗？（例如，我应该指定哪个祖先？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T14:25:32.957

这是我多年来一直使用的。

[**系列版本 4.4**](http://toolbox.reworld.eu/projekte/serial/right.htm)

不幸的是，下载链接不再可用。你必须搜索互联网。

Unit Serial 包含一组与 PC 的串行接口相关的组件。
核心组件是TSerial和TSerPort这两个。
两者都基于 Windows API，但提供了更舒适、更灵活的方式来访问此界面。
1998 年，2.0 版首次在计算机杂志 Toolbox 上发布。
在随后的几年中，该系列的组件不断开发和改进。开发水平，现在相当于商业解决方案。特别是因此“TSerial”在工业应用中变得广泛。

**TComPort**

Delphi/C++ Builder 串行通信组件。
它通常很容易用于基本的串行通信目的。TurboPower ASYNCPro 的替代品。

[TComPort](http://sourceforge.net/projects/comport/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:53:17.497

我相信突触也支持串行端口：

[http://synapse.ararat.cz/doku.php/download](http://synapse.ararat.cz/doku.php/download)

# xaml - XAML：访问实际宽度和高度

> ID：15040926
> 
> 赞同：1
> 
> 时间：2013-02-23T13:14:40.153
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我有一个内部带有图像的视图框：

```
<Viewbox MaxHeight="100" MaxWidth="100" x:Name="Scenario4ImageContainer2" Stretch="Uniform" Grid.Column="1" Grid.Row="1">
    <Image x:Name="Scenario4Image" PointerPressed="Scenario4Image_PointerPressed" HorizontalAlignment="Stretch"  />
</Viewbox> 
```

我希望能够获取实际的宽度/高度值，但是当我在后端 C# 中尝试此操作时：

```
int w = (int)Scenario4ImageContainer.Width 
```

我收到一条错误消息，说参数不正确。

如果我对宽度进行硬编码，这就会消失，但我希望它能够动态调整大小。

我也尝试抓取 Scenario4ImageContainer.ActualWidth 但这个参数也是“不正确的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:17:10.240

不久前，我试图测量字符串的宽度。您可以尝试类似的机制来获取尺寸。

[http://invokeit.wordpress.com/2012/09/19/how-to-measure-rendered-string-dimensions-in-win8dev/](http://invokeit.wordpress.com/2012/09/19/how-to-measure-rendered-string-dimensions-in-win8dev/)

```
this.tb.FontSize = 20;
this.tb.Measire(new Size(400, 300)); // assuming that 400x300 is max size of textblock you want
double currentWidth = this.tb.DesiredSize.Width;
double currentHeight = this.tb.DesiredSize.Height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:04:26.257

好像我找到了您需要处理的事件：您应该处理**ImageOpened**事件。这是因为图像是异步检索的，如果尝试处理任何其他事件，则很有可能当时没有加载图像，因此实际大小为零

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:52:13.963

在每次抽奖时，我都会快速检查容器大小是否发生了变化（在开始时初始化为 0 以确保它第一次捕获）。

```
if (containerWidth != Output.ActualWidth - 300)
{
    Scenario4ImageContainer.Width = Output.ActualWidth - 300;
    Scenario4ImageContainer.Height = Output.ActualHeight - 20;
    containerWidth = Output.ActualWidth - 300;
} 
```

它在大多数情况下都有效，但是当课程被导航出去并导航回来时，由于某种原因它会出现问题。应该是不相干的。

# mysql - 如何使用元素和子元素对表格进行排序

> ID：15040931
> 
> 赞同：0
> 
> 时间：2013-02-23T13:15:04.633
> 
> 标签：mysql

我有一个类似这样的 MySQL 表：

```
ID    elementName  subElementOfID

1        1            
2        2            
3        4            
4        5            
5        9            
6        3            
7        6            
8        7            
9       71            8
10       8            
11      10            
12      72            8
13      73            8 
```

元素不一定是数字，但可以是 varchars。“subElementOfID”列表示该元素（例如“71”）是 ID X 元素的子元素。在此示例中，ID 为 9、12 和 13 的元素是 ID 为 8 的元素的子元素。

目标：

以数字或字母数字顺序（取决于但并不重要）对该表进行排序，将标记为子元素的元素直接排序在其父元素之下。在这种情况下，按数字顺序排序的 SELECT 输出应如下所示：

```
ID    elementName  subElementOfID

 1        1            
 2        2            
 6        3            
 3        4            
 4        5            
 7        6            
 8        7            
 9       71            8
12       72            8
13       73            8
10        8            
 5        9            
11       10 
```

稍后在 PHP 中处理输出。我宁愿不使用 PHP 解决方案，而是使用 SQL-Select 以正确的顺序为我提供表格。

非常感谢任何帮助或建议。

由于这是我的第一个 Stackoverflow 问题，我希望我已经收集了所有重要事实并准备提供更多信息 :-)

拉尔夫

* * *

我找到了一个涉及 SELF JOIN 和 UNION 的解决方案。这可能过于复杂，我非常想要一个更简单的 SELECT。

```
SELECT ID, element FROM 
((SELECT t1.ID, t1.elementName as element, t2.elementName AS element2, t1.subElementOfID 
FROM test t1
LEFT JOIN test t2 ON t2.ID = t1.subElementOfID
WHERE t1.subElementOfID IS NOT NULL)

UNION

(SELECT ID, elementName AS element, elementName AS element2, subElementOfID FROM test 
WHERE subElementOfID IS NULL)

ORDER BY element2, subElementOfID, element) tu 
```

* * *

用户 xpda（感谢您的输入！）建议按字符串连接排序。如果 elementName 列实际上包含名称而不是数字，我认为这实际上是一个好主意，因为我并不完全满足于数字的字母数字顺序。在现实生活中，我在此列中有整数，但可能会说服我的老板使用口头名称而不是数字。试图根据我对 xpda 答案的理解编写一个 SQL 表达式：

```
SELECT t1.ID, t1.elementName, t1.subElementOfID AS parentName
FROM test2 t1
LEFT JOIN test2 t2 ON t1.subElementOfID=t2.ID
ORDER BY IF(ISNULL(t2.elementName), t1.elementName, CONCAT(CAST(t2.elementName AS CHAR), CAST(t1.elementName AS CHAR))); 
```

所以所有子元素都在其父元素下排序，但“10”自然介于 1 和 2 之间......

有什么进一步的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:06:31.363

您可以对两列（第二列+第一列）的串联进行排序（排序）。您可能需要先转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:24:12.463

好的，我将回答我自己的问题 :-) Barmar 的评论以及 xpda 的回答都有帮助。他们没有提供 SQL，但引导我朝着正确的方向前进。非常感谢您！

我有两个可行的解决方案，每个都有它的优点：

1.  我通过连接字符串进行简单的自连接和排序，我用一些前导零来丰富单个数字。在其他情况下 - 对 varchar 值进行排序时 - 这些零不是必需的：

    ```
    SELECT t1.ID, t1.elementName, t1.subElementOfID AS parentName
    FROM table t1
    LEFT JOIN table t2 ON t1.subElementOfID=t2.ID
    ORDER BY IF(ISNULL(t2.elementName), LPAD(t1.elementName, 2, '0'), CONCAT(CAST(LPAD(t2.elementName, 2, '0') AS CHAR), CAST(t1.elementName AS CHAR))); 
    ```

2.  上面带有自连接和 UNION 的 SQL 工作正常，即使它有点长：

    ```
    SELECT ID, element FROM 
    ((SELECT t1.ID, t1.elementName as element, t2.elementName AS element2, t1.subElementOfID 
    FROM table t1
    LEFT JOIN table t2 ON t2.ID = t1.subElementOfID
    WHERE t1.subElementOfID IS NOT NULL)

    UNION

    (SELECT ID, elementName AS element, elementName AS element2, subElementOfID FROM table
    WHERE subElementOfID IS NULL)

    ORDER BY element2, subElementOfID, element) tu 
    ```

# javascript - 混淆 javascript setinterval、loop 和 jquery ajax 加载优先级

> ID：15040932
> 
> 赞同：0
> 
> 时间：2013-02-23T13:15:11.993
> 
> 标签：javascript, arrays, jquery

直截了当，我有以下 javascript 和 jquery 代码，它们更新了一些检查的行并在每个数据表行上做一些事情。这是我的代码：

```
function checkUpdate(){
setInterval(function(){
    var listLength = updateList.length;
    if(listLength > 0){
        for(var r=0; r<listLength; r++){
        //  console.log(r)
            var clID = updateList[r];
        //  console.log(clID)
            var rRow = $('#dataTable tbody tr').find('td[data-clientid="'+clID+'"]').parent('tr');
        //  console.log(rRow)
            var rRowIndex = rRow.index();
        //  console.log(rRowIndex)
            var rRowDataIndex = oTable.fnGetPosition(rRow[0]);
            console.log(rRowDataIndex)
            $.ajax({
                url: '/cgi-bin/if-Clients-list.jpl',
                data: 'session=' + recievedSession + '&clientid=' + clID + '&outputformat=json',
                dataType: 'json',
                success: function(rowData){
        //          console.log(rowData)
                    var newRow = [];
                    var newOrderedRow = [];
            console.log(rRowDataIndex)
                    newRow.push(rRowDataIndex+1, "");
                    for (var title in rowData[0]){
                        newRow.push(rowData[0][title]);
                    }
            console.log(newRow)
                },

            });
        };
    }
},2000) 
```

};

这是问题所在：调用
后，变量未更新或更新但范围和优先级存在问题，如果我检查 2 行或更多行，我无法理解所有的第一个元素将是相同的任何人都可以帮忙我？**PS。**我也不能在网上展示任何代码 谢谢大家`$.ajax()``rRowDataIndex``console.log(newRow)`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:56:04.553

您需要将 AJAX 调用包装在一个闭包中，以`rRowDataIndex`通过循环捕获每次的值。

```
function checkUpdate() {
    setInterval(function () {
        var listLength = updateList.length;
        if (listLength > 0) {
            for (var r = 0; r < listLength; r++) {
                //  console.log(r)
                var clID = updateList[r];
                //  console.log(clID)
                var rRow = $('#dataTable tbody tr').find('td[data-clientid="' + clID + '"]').parent('tr');
                //  console.log(rRow)
                var rRowIndex = rRow.index();
                //  console.log(rRowIndex)
                var rRowDataIndex = oTable.fnGetPosition(rRow[0]);
                console.log(rRowDataIndex)
                (function (rRowDataIndex) {
                    $.ajax({
                        url: '/cgi-bin/if-Clients-list.jpl',
                        data: 'session=' + recievedSession + '&clientid=' + clID + '&outputformat=json',
                        dataType: 'json',
                        success: function (rowData) {
                            //          console.log(rowData)
                            var newRow = [];
                            var newOrderedRow = [];
                            console.log(rRowDataIndex)
                            newRow.push(rRowDataIndex + 1, "");
                            for (var title in rowData[0]) {
                                newRow.push(rowData[0][title]);
                            }
                            console.log(newRow)
                        },

                    });
                })(rRowDataIndex);
            };
        }
    }, 2000);
} 
```**

# arrays - VB.NET：在除普通字母之外的所有内容处拆分字符串

> ID：15040933
> 
> 赞同：1
> 
> 时间：2013-02-23T13:15:16.400
> 
> 标签：arrays, vb.net, function, split, letter

我试图在 VB.NET 中拆分除普通字母以外的所有字符串。

我尝试使用 Char.IsLetter(...) 编写一个函数，但由于某种原因它不能很好地工作（我在它崩溃的地方写了一条评论）：

```
Private Function splitAtNonLetter(ByVal SplitString As String) As String()
    Dim NonCharSplitArray As String() = {}
    Dim ProcessValueTemp As String = String.Empty
    For Each Letter As Char In SplitString
        If Char.IsLetter(Letter) Then
            ProcessValueTemp += Letter.ToString
        Else
            NonCharSplitArray(NonCharSplitArray.Length) = ProcessValueTemp
            ProcessValueTemp = String.Empty
        End If
    Next

    If ProcessValueTemp.Length > 0 Then
        ' Crashes in the next line: Index out of range exception...
        NonCharSplitArray(NonCharSplitArray.Length) = ProcessValueTemp
    End If

    Return NonCharSplitArray
End Function 
```

（我尝试使用正则表达式，但我以前**从未**使用过它们，所以我也没有真正设法让它工作）

有没有办法用 RegExps 做到这一点，或者你必须编写一个新函数，它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:22:45.400

`Regex.Split`可能是要走的路，使用否定字符组。

例如：

```
 Dim bits = Regex.Split(text, "[^a-zA-z]") 
```

或者也可以处理非 ASCII 字母：

```
 Dim bits = Regex.Split(text, "[^\p{L}]") 
```

# ruby-on-rails - 在 Rails 中使用 Tire gem 搜索会返回什么

> ID：15040935
> 
> 赞同：0
> 
> 时间：2013-02-23T13:15:27.323
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

当我在 Rails 中使用 Tire gem 进行搜索（使用 Active Record 集成）时会返回什么？是返回实际模型还是一些通用对象？我不明白我得到了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:25:12.583

它是集合类的对象。您可以查看此链接 [https://github.com/karmi/tire/blob/master/lib/tire/results/collection.rb](https://github.com/karmi/tire/blob/master/lib/tire/results/collection.rb)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T08:12:09.587

请仔细阅读轮胎的自述文件，即关于`:load`模型搜索方法选项的部分。

有关背景，请在 Github 问题中搜索`Item`，并查看 和 的单元/集成`Tire::Results::Collection`测试`Tire::Results::Item`。

# java - 即使使用 setLineWrap(true) 和 setWrapStyleWord(true)，JTextArea 宽度也会随着输入而延伸

> ID：15040937
> 
> 赞同：1
> 
> 时间：2013-02-23T13:15:35.687
> 
> 标签：java, swing, jpanel, jscrollpane, jtextarea

当框架出现时，`JTextArea`水平拉伸直到达到框架宽度大小，并且在调整框架大小时，`JTextArea`将再次拉伸以匹配框架的宽度。如果添加输入`JTextArea`，它将继续水平增长，而不是将文本换行到新行。

没有`setLineWrap(true)`and`setWrapStyleWord(true)`将`JTextArea`正确显示在框架上，但仍会`JTextArea`在第一行拉伸。

我该如何解决这个问题？

```
public class GridBagExample {

private JFrame frame;
private final JPanel panel;
private JLabel frontText, reverseText;
private JTextField frontTextField;
private final JTextArea reverseTextArea;
private GridBagLayout gridBagLayout;
private GridBagConstraints constraints;
private JButton submit, cancel;

public GridBagExample() {

    frame = new JFrame("Create new flashcard");
    gridBagLayout = new GridBagLayout();
    constraints = new GridBagConstraints();
    panel = new JPanel(gridBagLayout);
    panel.setSize(240,220);

    frontText = new JLabel("Front Text");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 0;
    gridBagLayout.setConstraints(frontText, constraints);
    panel.add(frontText);

    frontTextField = new JTextField(15);
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 2;
    constraints.gridy = 0;
    gridBagLayout.setConstraints(frontTextField, constraints);
    panel.add(frontTextField);

    reverseText = new JLabel("Reverse Text");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 1;
    gridBagLayout.setConstraints(reverseText, constraints);
    panel.add(reverseText);

    reverseTextArea = new JTextArea(5,15);
    reverseTextArea.setWrapStyleWord(true);
    reverseTextArea.setLineWrap(true);
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 2;
    constraints.gridy = 1;
    gridBagLayout.setConstraints(reverseTextArea, constraints);
    panel.add(reverseTextArea);

    submit = new JButton("Submit");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 2;
    constraints.gridy = 2;
    gridBagLayout.setConstraints(submit, constraints);
    panel.add(submit);

    frame.add(panel);
    frame.setSize(300, 300);
    frame.setVisible(true);
}

public static void main(String[] args) throws Exception {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new GridBagExample();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:20:20.433

不要直接将文本区域添加到面板。将它放在 JScrollPane 中，并将滚动窗格添加到面板中，如[教程中所述](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)。

# c++ - C++ stdlib 容器类层次结构

> ID：15040943
> 
> 赞同：3
> 
> 时间：2013-02-23T13:16:01.053
> 
> 标签：c++

我一直在想，C++ 中的设计决定是否有任何理由不为任何 std 库容器提供纯抽象类？

我很欣赏 hash_map 后来来自 stdext 命名空间，但共享一个非常相似的接口。如果我后来决定要为特定的软件实现自己的地图，我宁愿有某种接口可以使用。

*例子*

```
std::base_map *foo = new std::map<std::string, std::string>;
delete foo;
foo = new stdext::hash_map<std::string, std::string>; 
```

显然，据我所知，上面的示例是不可能的，但是对于 list 和其他 std lib 容器来说，这是类似的。

我很欣赏这不是 C# 或 Java，但是 C++ 中显然没有限制来阻止这种设计，那么为什么要这样设计，以便类似容器之间没有耦合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:20:58.827

因为虚函数会增加开销。

因为容器*并不*都有相同的接口，所以有一些共同的功能，但在迭代器失效和内存分配（以及异常行为）方面也存在重要差异，如果您使用的是抽象基础，您将不会知道具体容器如何表现的细节。

如果您想编写与传递的容器类型无关的代码，那么在 C++ 中您编写模板而不是依赖抽象接口，即使用*静态多态*而不是*动态多态*。这避免了动态调度的开销，并且还允许基于具体类型的专门化，因为具体类型在编译时是已知的。

最后，恕我直言，它没有任何优势。它是更好的方式。正如您所说，谢天谢地，这不是 C# 或 Java。

（PS stdext 命名空间不是 C++ 的一部分，它似乎是 Microsoft 的非标准类型命名空间，一个更好的例子是使用`std::tr1::unordered_map`or`std::unordered_map`代替`stdext::hash_map`）

# jquery - SlidesJS 源 - 使用指定选项覆盖默认值

> ID：15040944
> 
> 赞同：0
> 
> 时间：2013-02-23T13:16:06.400
> 
> 标签：jquery, slidesjs

[SlidesJS](http://www.slidesjs.com/)是一个 jQuery 内容滑块插件。我试图了解来源。我对 Javascript 和 jQuery 比较陌生。但是，我感兴趣的是源代码中的这一行：

```
$.fn.slides = function( option ) {
   // override defaults with specified option
   option = $.extend( {}, $.fn.slides.option, option );
      ...
} 
```

我从评论中了解到作者打算合并两个数组，一个包含默认值，`option`另一个是`option`通过调用函数传递的参数。但是，它们不是都引用同一个变量：函数的参数`slides(option)`吗？

无论如何，它似乎工作。这里有什么魔力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:26:42.813

`option`参数是一个`Object`包含插件相应设置值的参数。`$.fn.slides.option`包含插件的默认设置。因此，当您传递自定义设置（通过`option`参数）时，这两个对象会合并，并且您的自定义值会覆盖默认值。

`jQuery.extend`方法是这里的关键。它将两个或多个对象的内容合并到第一个对象中。

```
option = $.extend( 
              {}, // the target new Object which represents the final merged options
              $.fn.slides.option, // Object with default option values
              option // Object with custom option values (the passed argument)
         ); 
```

请参阅[**此处的文档**](http://api.jquery.com/jQuery.extend/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:49:06.373

> 但是，它们不是都引用同一个变量：函数 slides(option) 的参数吗？

答案是否定的，`$.fn.slides.option`是函数的属性`$.fn.slides`，而是`option`函数的函数参数/参数`$.fn.slides`。

函数形参或实*参*就像一个只能在函数块内访问的局部变量，不像函数的属性与函数本身共享相同的范围。

# html - 无法查看我的标题 div 下的任何内容

> ID：15040951
> 
> 赞同：0
> 
> 时间：2013-02-23T13:16:54.733
> 
> 标签：html, css, twitter-bootstrap

![截屏](../Images/9ba0786ad32e9912ea42627ad692cbad.png)

我不确定为什么我无法查看导航栏下方的内容。我得到的只是空白，而不是`<h1>Hello</h1>`. 特别希望对此代码提供一些指导，以及任何资源以了解更多有关如何在未来避免此问题的信息。

```
<!DOCTYPE html>
<html>
<head>
    <title>A random title piece.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="../static/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="../static/style.css" rel="stylesheet" media="screen">

</head>
<body>

    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container pull-left">
<a class="brand" href="../">Things and Stuff </a>
                <div class="nav-collapse collapse" id="main-menu">
                    <ul class="nav" id="main-menu-left">
                        <li class="divider-vertical"></li>
                        <li>
                            <form class="form-search">
                                <div class="input-    append">
                                    <input     type="text" class="span2 search-query">
                                    <button type="submit" class="btn">
                                        Search
                                    </button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <a id="swatch-link" href="../popular">Example 1</a>
                        </li>
                        <li>
                            <a id="swatch-link" href="../sold">Example 2</a>
                        </li>
                        <li>
                            <a id="swatch-link" href="../new">Example 3</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<h1>Hello</h1>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/json2.js"></script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:35:49.770

内容隐藏在您的标题下方。使用带有类容器的 div 包装您的内容，然后让我们知道。
[这是一个](http://jsfiddle.net/shail/KF2Hh/)
[带有填充的jsfiddle Jsfiddle](http://jsfiddle.net/shail/KF2Hh/1/)

```
<div class=".container">
  <h1>Hellow world</h1>
</div> 
```

并在您的 CSS 中添加以下内容

```
.container > h1
 {
margin-top:70px;

 } 
```

或者你可以使用以下，我建议使用这个：

```
.container > h1{
   padding-top:70px;
 } 
```

# ruby-on-rails - form_for 没有出现

> ID：15040953
> 
> 赞同：8
> 
> 时间：2013-02-23T13:17:50.047
> 
> 标签：ruby-on-rails, routing

我有一个名为“ExpDemo”的模型，想从“MainController”中使用它。

我这样设置代码：

主控制器.rb

```
def pre
  @demo = ExpDemo.new
end 
```

主/pre.html.erb

```
<% form_for(@demo) do |f| %>
  ...
<% end %> 
```

直到这里，我遇到了“路径”错误。

```
undefined method `exp_demos_path' 
```

因此，我在 routes.rb 中添加了以下内容，并且错误消息消失了。

```
resources :exp_demos 
```

现在，表单没有显示在 HTML 页面中。我认为路由设置是问题，但我不知道如何解决它。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-23T13:18:57.207

你忘记了`=`form_for

```
<%= form_for(@demo) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T02:24:34.437

**解决方案：**

更改`<% form_for`为`<%= form_for`

* * *

**解释：**

`<% %>`执行不输出结果的 ruby​​ 代码

`<%= %>`执行 ruby​​ 代码并输出 HTML

换句话说，您的表单已创建（这就是没有显示错误的原因）但未打印为 HTML。

# javascript - Javascript“OOP”和具有多级继承的原型

> ID：15040955
> 
> 赞同：12
> 
> 时间：2013-02-23T13:17:58.110
> 
> 标签：javascript, inheritance, prototype

我是 Javascript 编程的新手，我正在从面向对象编程的角度来处理我的第一个应用程序（实际上是一个游戏）（我知道 js 并不是真正面向对象的，但是对于这个特殊问题，我更容易开始喜欢这）。

我有一个“类”的层次结构，其中最顶层（“事物”类）定义了相关事物的列表（游戏中的附加项目）。它由 ThingA1 和 ThingA2 类继承的 ThingA 类继承。

最小的例子是：

```
function Thing() 
{
  this.relatedThings   = [];
}
Thing.prototype.relateThing = function(what)
{
  this.relatedThings.push(what);
}

ThingA.prototype = new Thing();
ThingA.prototype.constructor = ThingA;
function ThingA()
{
}

ThingA1.prototype = new ThingA();
ThingA1.prototype.constructor = ThingA1;
function ThingA1()
{

}

ThingA2.prototype = new ThingA();
ThingA2.prototype.constructor = ThingA2;
function ThingA2()
{    
}

var thingList = [];

thingList.push(new ThingA());
thingList.push(new ThingA1());
thingList.push(new ThingA2());
thingList.push(new ThingA2());
thingList.push(new Thing());

thingList[1].relateThing('hello'); 
```

在代码的最后，当执行关联事物时，每个 ThingA、ThingA1 和 ThingA2 都将执行它（不是数组中的最后一个“Thing”对象）。我发现如果我在 ThingA 原型中定义了相关函数，它将正常工作。由于游戏的设计方式，我宁愿不必这样做。

也许我不了解原型如何在 javascript 中工作。我知道该功能在所有对象之间共享，但我想执行将是单独的。有人可以解释为什么会发生这种情况以及如何解决它吗？我不知道我是否做错了继承，或者原型定义，或者什么。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-23T13:55:56.400

欢迎来到原型链！

让我们看看它在您的示例中是什么样子的。

### 问题

当您调用 时`new Thing()`，您正在创建一个具有`relatedThings`引用数组的属性的新对象。所以我们可以说我们有这个：

```
+--------------+
|Thing instance|
|              |
| relatedThings|----> Array
+--------------+ 
```

然后，您将此实例分配给`ThingA.prototype`：

```
+--------------+
|    ThingA    |      +--------------+
|              |      |Thing instance|
|   prototype  |----> |              |
+--------------+      | relatedThings|----> Array
                      +--------------+ 
```

所以每个实例`ThingA`都会继承自该`Thing`实例。现在您将创建`ThingA1`并为它们的每个原型`ThingA2`分配一个新`ThingA`实例，然后创建 and 的实例`ThingA1`（`ThingA2`和`ThingA`and `Thing`，但此处未显示）。

现在的关系是这样的（`__proto__`是一个*内部*属性，将一个对象与其原型连接起来）：

```
 +-------------+
                               |   ThingA    |
                               |             |    
+-------------+                |  prototype  |----+
|   ThingA1   |                +-------------+    |
|             |                                   |
|  prototype  |---> +--------------+              |
+-------------+     |    ThingA    |              |
                    | instance (1) |              |
                    |              |              |
+-------------+     |  __proto__   |--------------+ 
|   ThingA1   |     +--------------+              |
|   instance  |           ^                       |
|             |           |                       v
|  __proto__  |-----------+                 +--------------+
+-------------+                             |Thing instance|
                                            |              |
                                            | relatedThings|---> Array
+-------------+     +--------------+        +--------------+ 
|   ThingA2   |     |   ThingA     |              ^
|             |     | instance (2) |              |
|  prototype  |---> |              |              |
+-------------+     |  __proto__   |--------------+
                    +--------------+
+-------------+           ^
|   ThingA2   |           |  
|   instance  |           |
|             |           |
|  __proto__  |-----------+
+-------------+ 
```

正因为如此，`ThingA`, `ThingA1`or的每个实例都`ThingA2` **指向同一个数组实例**。

这**不是**你想要的！

* * *

### 解决方案

为了解决这个问题，任何“子类”的每个实例都应该有*自己的* `relatedThings`属性。您可以通过在每个子构造函数中调用父构造函数来实现这一点，类似于`super()`在其他语言中调用：

```
function ThingA() {
    Thing.call(this);
}

function ThingA1() {
    ThingA.call(this);
}

// ... 
```

这会在这些函数内部调用`Thing`and`ThingA`并将其设置`this`为您传递给的第一个参数`.call`。了解有关[`.call` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和[`this` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的更多信息。

仅此一项就会将上图更改为：

```
 +-------------+
                               |   ThingA    |
                               |             |    
+-------------+                |  prototype  |----+
|   ThingA1   |                +-------------+    |
|             |                                   |
|  prototype  |---> +--------------+              |
+-------------+     |    ThingA    |              |
                    | instance (1) |              |
                    |              |              |
                    | relatedThings|---> Array    |
+-------------+     |  __proto__   |--------------+ 
|   ThingA1   |     +--------------+              |
|   instance  |           ^                       |
|             |           |                       |
|relatedThings|---> Array |                       v
|  __proto__  |-----------+                 +--------------+
+-------------+                             |Thing instance|
                                            |              |
                                            | relatedThings|---> Array
+-------------+     +--------------+        +--------------+ 
|   ThingA2   |     |   ThingA     |              ^
|             |     | instance (2) |              |
|  prototype  |---> |              |              |
+-------------+     | relatedThings|---> Array    |
                    |  __proto__   |--------------+
                    +--------------+
+-------------+           ^
|   ThingA2   |           |  
|   instance  |           |
|             |           |
|relatedThings|---> Array | 
|  __proto__  |-----------+
+-------------+ 
```

如您所见，每个实例都有自己的`relatedThings`属性，它引用不同的数组实例。原型链中仍有`relatedThings`属性，但它们都被实例属性*所遮蔽。*

* * *

### 更好的继承

另外，不要将原型设置为：

```
ThingA.prototype = new Thing(); 
```

您实际上不想在`Thing`这里创建新实例。如果`Thing`预期的参数会发生什么？你会通过哪一个？如果调用`Thing`构造函数有副作用怎么办？

你*真正*想要的是连接`Thing.prototype`到原型链中。您可以使用[`Object.create` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)执行此操作：

```
ThingA.prototype = Object.create(Thing.prototype); 
```

执行构造函数 ( ) 时发生的任何事情都会在`Thing`稍后发生，当我们实际创建一个新`ThingA`实例时（通过`Thing.call(this)`如上所示的调用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T16:19:11.650

如果您不喜欢 JavaScript 中的原型设计方式以实现简单的继承和 OOP，我建议您看一下： [https ://github.com/haroldiedema/joii](https://github.com/haroldiedema/joii)

它基本上允许您执行以下操作（以及更多）：

```
// First (bottom level)
var Person = new Class(function() {
    this.name = "Unknown Person";
});

// Employee, extend on Person & apply the Role property.
var Employee = new Class({ extends: Person }, function() {
    this.name = 'Unknown Employee';
    this.role = 'Employee';
});

// 3rd level, extend on Employee. Modify existing properties.
var Manager = new Class({ extends: Employee }, function() {

    // Overwrite the value of 'role'.
    this.role = 'Manager';

    // Class constructor to apply the given 'name' value.
    this.__construct = function(name) {
        this.name = name;
    }
});

// And to use the final result:
var myManager = new Manager("John Smith");
console.log( myManager.name ); // John Smith
console.log( myManager.role ); // Manager 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T14:05:19.700

在 OOP 中，当您定义子类的构造函数时，您也（隐式或显式）从超类型中选择构造函数。当一个子对象被构造时，两个构造函数都会被执行，首先是从超类开始的，然后是所有其他的。

在 javascript 中，这必须显式调用并且不会自动出现！

```
function Thing() {
  this.relatedThings = [];
}
Thing.prototype.relateThing = function(what){
  this.relatedThings.push(what);
}

function ThingA(){
  Thing.call(this);
}
ThingA.prototype = new Thing();

function ThingA1(){
  ThingA.call(this);
}
ThingA1.prototype = new ThingA();

function ThingA2(){
  ThingA.call(this);

}
ThingA2.prototype = new ThingA(); 
```

如果您不这样做，ThingA、ThingA1 和 ThingA2 的所有实例都将在 Thing 构造函数中构造相同的 relatedThings 数组，并在行中为所有实例调用一次：

```
ThingA.prototype = new Thing(); 
```

事实上，在全球范围内，在您的代码中，您只有 2 次调用 Thing 构造函数，这导致只有 2 个 relatedThings 数组实例。

# c# - 在 C# windows 应用程序的 Microsoft Chart 中禁用鼠标选择

> ID：15040962
> 
> 赞同：1
> 
> 时间：2013-02-23T13:18:47.407
> 
> 标签：c#, charts, mschart

在 Microsoft 图表中单击并拖动鼠标时，默认情况下会选择一个图表区域。在下面的屏幕截图中，您将看到一个示例……灰色区域是鼠标选择的部分。有谁知道如何禁用它？

![截屏](../Images/b9293b7a639554c48077bf7d80906dd8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:05:28.880

您必须在 ChartArea 光标上设置一些属性以禁用用户交互：

```
myChart.ChartArea[0].CursorX.IsUserSelection = false;
myChart.ChartArea[0].CursorX.IsUserEnabled = false;

myChart.ChartArea[0].CursorY.IsUserSelection = false;
myChart.ChartArea[0].CursorY.IsUserEnabled = false; 
```

# web-services - 从 IMDB api 接收数据时，Springs RestTemplate 找不到正确的 MessageConverter

> ID：15040963
> 
> 赞同：0
> 
> 时间：2013-02-23T13:18:47.530
> 
> 标签：web-services, spring, webservice-client, webservices-client, imdb

首先我不得不说，我对 Springs RestTemplate 还是很陌生。

我正在尝试从[imdb-api](http://imdbapi.org/)接收数据。（例如[http://imdbapi.org/?title=Avatar&type=xml](http://imdbapi.org/?title=Avatar&type=xml)）因此我使用 Springs RestTemplate。但：

1.  Web服务将数据作为应用程序/八位字节流返回（即使我声明我想要它作为xml（当我用浏览器浏览网站时，我得到的数据是text/xml））
2.  RestTemplate 没有找到我声明的 ByteArrayMessageConverter（转换应用程序/八位字节流）

我真的不知道我的错误在哪里。

这是初始化restTemplate的代码：

```
public void onInit() {
    _log.debug("Setting up the Spring Resttemplate");

    _restTemplate = new RestTemplate();
    List<HttpMessageConverter<?>> list = new ArrayList<HttpMessageConverter<?>>();
    list.add(new SourceHttpMessageConverter<Source>());
    list.add(new ByteArrayHttpMessageConverter());
    _restTemplate.setMessageConverters(list);

    _log.debug("Setting up the HTTP Headers for Restrequest");
    List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
    _log.trace("allow {}", MediaType.APPLICATION_XML_VALUE);
    acceptableMediaTypes.add(MediaType.APPLICATION_XML);
    _log.trace("allow {}", MediaType.TEXT_HTML_VALUE);
    acceptableMediaTypes.add(MediaType.TEXT_XML);
    _log.trace("set accepted charset to uft-8");
    List<Charset> acceptableCharsets = new ArrayList<Charset>();
    acceptableCharsets.add(Charset.forName("utf-8"));

    _httpHeaders = new HttpHeaders();
    _httpHeaders.set("User-Agent", "something"); //only a user-agent, because the api returns a 403 if it is not set
    _httpHeaders.setAcceptCharset(acceptableCharsets);
    _httpHeaders.setAccept(acceptableMediaTypes);
} 
```

这是调用的代码：

```
_log.info("connect to Imdb-Webservice {}", _imbdWebserviceBaseUrl);

    Map<String, Object> uriVariables = new HashMap<String, Object>();
    uriVariables.put("title", pTitle);

    ResponseEntity<Source> response = _restTemplate.exchange(_imbdWebserviceBaseUrl, HttpMethod.GET, new HttpEntity<String>(_httpHeaders), Source.class, uriVariables); 
```

_imbdWebserviceBaseUrl 设置为[http://imdbapi.org/?title=](http://imdbapi.org/?title=) {title}&type=xml

然后我收到此错误消息：

```
org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [interface javax.xml.transform.Source] and content type [application/octet-stream]
at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:107)
at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:687)
at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:673)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:491)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:454)
at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:401)
at my.domain.projectname.integrationimpl.WebserviceHelper.getXml(WebserviceHelper.java:131) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:23:13.440

> Web 服务将数据作为 application/octet-stream 返回（即使我声明我希望它为 xml（当我用浏览器浏览网站时，我将数据作为 text/xml 获取））

据我所知，这个休息服务没有返回正确的内容类型（文本/xml或类似）。如果您的浏览器正确呈现它，那可能是 Chrome 或 Firefox，但 IE 只会向您显示 html-ish 类型的输出。

> `RestTemplate`找不到我声明`ByteArrayMessageConverter`的（转换应用程序/八位字节流）

好吧，据我所知，您正在要求一个来源：

```
ResponseEntity<Source> response = _restTemplate.exchange(_imbdWebserviceBaseUrl, HttpMethod.GET, new HttpEntity<String>(_httpHeaders), Source.class, uriVariables); 
```

`MessageConverter`s 本身有一种方法可以确定此转换器是否适用，因为它`ByteArrayHttpMessageConverter`是：

```
@Override
public boolean supports(Class<?> clazz) {
    return byte[].class.equals(clazz);
} 
```

由于您要求 Source.class 它不会使用此转换器。

# ruby - 警告：在 API 开发的情况下无法验证 CSRF 令牌的真实性

> ID：15040964
> 
> 赞同：49
> 
> 时间：2013-02-23T13:18:50.430
> 
> 标签：ruby, ruby-on-rails-3, api, token, csrf

我现在正在使用 Ruby on Rails开发 Web **API 。**当 Rails 应用收到没有任何 csrf 令牌的 POST 请求时，会出现以下错误消息。因为该应用程序没有视图。

```
WARNING: Can't verify CSRF token authenticity 
```

所以我的问题是在这种情况下如何安全地逃避 csrf 令牌检查？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-23T14:21:12.417

您可以通过添加来做到这一点

```
skip_before_filter  :verify_authenticity_token 
```

到您的控制器。这样，所有传入控制器的请求都会跳过 :verify_authenticity_token 过滤器。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-15T22:59:44.123

对于rails 4，它应该是

```
skip_before_action :verify_authenticity_token, only: [:one_or_two_actions_here] 
```

请注意，您应该避免在控制器的所有操作上跳过 verify_authenticity_token，而是使用选项`only`仅在必须跳过的地方跳过。[查看文档](http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection/ClassMethods.html)

# c# - lambda 外部子查询迭代变量评估的数量

> ID：15040967
> 
> 赞同：1
> 
> 时间：2013-02-23T13:19:01.697
> 
> 标签：c#, linq, collections, lambda, max

从[LINQ 测验](http://www.albahari.com/nutshell/linqquiz.aspx)问题和答案到 Q4 和 Q5

数组`colors`定义为：

```
string[] colors = { "green", "brown", "blue", "red" }; 
```

并从对 Q4 的回答中查询：

```
var query =
  from c in colors
  where c.Length == colors.Max (c2 => c2.Length)
  select c; 
```

我是否正确理解外部查询迭代表达式`c2.Length`将被评估 16 次？

也就是说，对于数组中的每个项目，`с`将计算一次，即计算将总共进行 4 次。并且对于每次评估会发现 4 次？ `colors``colors.Max (c2 => c2.Length)``Max()``Max()``c2.Length`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T13:39:25.363

对，那是正确的。如果你有 LINQPad，也很容易检查：

```
string[] colors = { "green", "brown", "blue", "red" };

int count = 0;

var query =
    from c in colors
    where c.Length == colors.Max (c2 => 
        {
            count.Dump();
            count++;
            return c2.Length;
        }
    )
    select c;

query.Dump(); 
```

# bash - 如何在 Unix 中从文件中删除一组行

> ID：15040970
> 
> 赞同：1
> 
> 时间：2013-02-23T13:19:31.300
> 
> 标签：bash, shell, unix, sed, awk

我有一个这样的示例文件。

```
[unit id="20"]
...blah blah...
[/unit]
[unit id="AB 560"]
...
[/unit]
[unit id="205"]
...
[/unit]
[unit id="AB 580"]
...
[/unit]
[unit id="120"]
...
[/unit]
[unit id="AB 210"]
...
[/unit] 
```

我想删除包含字符串“AB”的行和它后面的 10 行。`[unit ...]`具体来说，和之间将有 10 行`[/unit]`。输出文件应如下所示：

```
[unit id="20"]
...blah blah...
[/unit]
[unit id="205"]
...
[/unit]
[unit id="120"]
...
[/unit] 
```

**注意**：只有“AB”会出现。没有其他字符/字符串。为此，我需要一个可执行的 unix shell 脚本——请不要使用 Perl。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T13:29:51.703

您可以简单地找到`AB`，然后删除该行及其后面的 10 行。正如@Lev Levitsky 所指出的，这`GNU sed`仅允许：

```
sed '/AB/,+10 {d}' <infile> 
```

如果您想将修改应用于给定文件，只需添加标志`-i`, 以进行就地替换。请注意，正如@Jens 所指出的，这是一个`GNU`主义：

```
sed -i '/AB/,+10 {d}' <infile> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:51:09.397

您可能更喜欢基于模式而不是仅仅基于`+ 10lines`.

```
perl -n -e 'unless(/^\[unit.*AB.*\]/../\[\/unit\]/) { print; }'  tx 
```

tx 文件是

```
[unit id="20"]
20...blah blah...
[/unit]
[unit id="AB 560"]
AB...
[/unit]
[unit id="205"]
205 ...
[/unit]
[unit id="AB 580"]
AB...
[/unit]
[unit id="120"]
120...
[/unit]
[unit id="AB 210"]
AB...
[/unit] 
```

给

```
[unit id="20"]
20...blah blah...
[/unit]
[unit id="205"]
205 ...
[/unit]
[unit id="120"]
120...
[/unit] 
```

# ios - CTCall callState 方法“无法识别”

> ID：15040971
> 
> 赞同：1
> 
> 时间：2013-02-23T13:19:43.957
> 
> 标签：ios, objective-c, unrecognized-selector, tweak

我正在进行越狱调整，我需要检测来电。但是，我可以成功获取 CTCall 对象，当我调用`callState`以获取当前状态时，它会引发此错误并崩溃：

> Feb 23 12:56:07 iPhone-5 SpringBoard[23247] : CTCall: {status = 3, type = 0x1, uuid = 0x211bf240 [68952DF3-B9CF-4BAD-A538-B802B7B49CC8], address = 0x21164bb0, externalID = -1,开始 = 2.22507e-308，会话开始 = 3.83317e+08，结束 = 2.22507e-308}
> 
> 2 月 23 日 12:56:07 iPhone-5 SpringBoard[23247]：**-[__NSCFType callState]：无法识别的选择器**发送到实例 0x211c8c10
> 
> 2 月 23 日 12:56:07 iPhone-5 SpringBoard[23247]：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFType callState]：无法识别的选择器发送到实例 0x211c8c10”

第一个日志行只是检查是否确实存在我正在尝试调用的 CTCall 对象`callState`。显然，有一个 CTCall 对象，所以我不明白为什么这不起作用？

产生上述输出的确切代码：

```
 NSLog(@"CTCall: %@", call);

 NSLog(@"*** Value of CTCall state: %@", call.callState); 
```

如果有人可以提供帮助，将不胜感激。谢谢！

# core-animation - 向条形图添加动画在视觉上不生效

> ID：15040972
> 
> 赞同：0
> 
> 时间：2013-02-23T13:19:44.553
> 
> 标签：core-animation, core-plot

我是核心情节的新手。最近我决定在我的情节中添加条形增长动画。所以我按照这里搜索的指令来实现动画。现在我想出了问题：动画似乎没有生效。委托：didStopAnimate:(BOOL) 无论我将动画的持续时间设置为 false 多长时间都会返回。还要说明一件事：在图形视图中，我在真实图形托管视图下放置了一个滚动视图。这会影响核心动画的工作吗？该图出现在从表格视图导航到自身之后。这是我的一些代码：

```
 if ([plot_type isEqualToString:@"bar"]) {
        CPTBarPlot *plot = [[CPTBarPlot alloc] init];
        //id
        plot.identifier = [d objectForKey:@"title"];
        plot.title = [d objectForKey:@"title"];
        plot.lineStyle = barLineStyle;
        plot.barCornerRadius = 1.2;
        //set color
        CPTGradient *gradient = [CPTGradient gradientWithBeginningColor:[CPTColor colorWithCGColor:color_begin] endingColor:[CPTColor colorWithCGColor:color_end]];
        gradient.angle = 90.0f;
        CPTFill *fill = [CPTFill fillWithGradient:gradient];
        plot.fill  = fill;

        //bar width
        double width = [[d objectForKey:@"width"] doubleValue]==0.0?0.6:[[d objectForKey:@"width"] doubleValue];
        plot.barWidth = CPTDecimalFromFloat(width);
        plot.barsAreHorizontal = NO;
        //need manually stacked
        if (need_stack && !is_first) {
            plot.barBasesVary = YES;
        } else {
            plot.barBasesVary = NO;
        }
        //data source
        plot.dataSource = self;
        //delegate
        plot.delegate = self;

        CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"transform"];
        [anim setDuration:2.0f];
        anim.toValue = [NSNumber numberWithFloat:1];
        anim.fromValue = [NSNumber numberWithFloat:0.0f];
        anim.removedOnCompletion = NO;
        anim.delegate = self;
        anim.fillMode = kCAFillModeForwards;
        [plot addAnimation:anim forKey:(NSString *)plot.identifier];

        [graph addPlot:plot toPlotSpace:plotSpace];
    } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:03:42.000

a的`transform`属性`CALayer`是`CATransform3D`结构，而不是标量值。您应该使用`NSValue`方法包装它`+valueWithCATransform3D:`。

# iphone - ios : MPMoviePlayerViewController 对整个纵向应用程序的所有方向支持

> ID：15040973
> 
> 赞同：1
> 
> 时间：2013-02-23T13:19:46.997
> 
> 标签：iphone, ios5, ios6, mpmovieplayercontroller, uiinterfaceorientation

整个应用只支持纵向，只播放视频需要支持所有方向。该应用程序在 iOS < 6.0 上以完全纵向模式完美运行，现在由于需要支持`MPMoviePlayerViewController`iOS 6.0 的（要播放的视频）的自动旋转方向，我已经搜索了很多东西，我得到了下面解决方案，所以我在我的应用程序中应用了这些解决方案，

1）支持plist或targets中的所有方向

![](../Images/4fba0305a7130cbe851f52290adb8072.png)

2）为纵向支持添加以下方向功能

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

3) 重写 MPMoviePlayerViewController 类，并添加所有合适的定向方法来支持。

4) 将以下方法放入 AppDelegate 文件中，如果找到`MPMoviePlayerViewController`.

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window { } 
```

但最后，没有成功！- 我无法在横向模式下播放视频，整个应用程序只支持纵向。

我不知道为什么它不旋转？有什么我想设置的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:40:07.630

我最近不得不在我开发的一个应用程序中做相反的事情，我不得不强制视频播放仅以横向模式出现。我所做的是让我的应用程序支持所有方向，而是覆盖我的 mpMoviePlayerViews`shouldAutorotateToInterfaceOrientation`方法以仅对横向返回 YES。

既然你想做相反的事情，那么在你的应用程序中同时允许肖像和风景如何 - 但将你的常规视图限制为仅肖像？（从而避免您的问题以允许您的 mpmovieplayerview 旋转）我认为应该可以创建一个父（视图）类，您的常规视图可以从中继承，并且在您的父类中只需覆盖`shouldAutorotateToInterfaceOrientation`以仅支持/返回 YES for potrait模式。

# ssh - 如何从 ssh root ( httpd , mysql ) 添加 cron 作业

> ID：15040975
> 
> 赞同：1
> 
> 时间：2013-02-23T13:20:08.913
> 
> 标签：ssh, root

我需要让我的 vps 每天重启 httpd apache 和 mysql

我的 /etc/crontab 文件记录是

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root
HOME=/

# run-parts
29 * * * * root run-parts /etc/cron.hourly
43 0 * * * root run-parts /etc/cron.daily
13 5 * * 0 root run-parts /etc/cron.weekly
23 0 28 * * root run-parts /etc/cron.monthly 
```

如果我想让 httpd 和 mysql 每天重新启动，我必须在这个文件中添加什么以及在哪里！

在这个工作人员中目标仍然更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:40:21.850

您不必向该文件添加任何内容。

创建一个脚本来重新启动服务，并将其放在`/etc/cron.daily/`目录中。

# c# - 根据日期而不是持续时间获取天数？

> ID：15040976
> 
> 赞同：0
> 
> 时间：2013-02-23T13:20:10.237
> 
> 标签：c#, .net, silverlight, datetime, timespan

我试图获取两个日期时间之间的天数，但不是根据确切的时间跨度，而是根据日期 a 和日期 b 之间的“日期”差异。不考虑时间。

到目前为止，我使用以下方法计算了一个项目的年龄：

```
(DateTime.Now - creationDate).Days 
```

这段代码的问题是，对于前一天但不到 24 小时前创建的东西，它会输出“0 天”，这对我的用户来说显然不是很清楚。

所以我想要完成的是，即使对于例如在晚上 11:59 创建的项目，只要时钟到达午夜就得到“1 天前”的输出。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T13:24:49.610

两种选择：

1）先取两个日期：

```
 var days = (DateTime.Today - creationDate.Date).Days; 
```

2) 改用我的[Noda Time](http://noda-time.googlecode.com)日期/时间库，`LocalDate`用于涉及的两个日期，然后`Period.Between(start, end, PeriodUnits.Days)`得到几天的时间。（您也可以获取周数、月数等。）诚然，在 Noda Time 中故意获取“今天的日期”有点棘手 - 其中 .NET 隐式使用“系统时区”，Noda Time 迫使您更加明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T13:39:09.733

我会像使用它一样简单地使用它

```
int days =(int)DateTime.Now.Subtract(creationDate).TotalDays; 
```

希望这可以帮助

# php - 验证域对象设置器中的表单输入？

> ID：15040979
> 
> 赞同：4
> 
> 时间：2013-02-23T13:20:38.863
> 
> 标签：php, oop, model-view-controller, model, validation

自从我开始学习 MVC 以来，我一直在我的控制器中验证我的表单数据，这是我在浏览 CodeIgniters 代码时养成的习惯，但我了解到它执行某些操作的方式并不是最好的，它只是得到了这份工作完毕。

所有表单数据都应该由域对象验证吗？如果是这样，应该像这样在二传手中完成

```
public function setFirstName($firstName) {

    // Check if the field was required
    if(!$firstName) {
        throw new InvalidArgumentException('The "First name" field is required');
    }

    // Check the length of the data
    // Check the format 
    // Etc etc
} 
```

另外，例如，如果我正在处理基本用户注册，我的`User`班级没有`$confirmPassword`属性，所以我不会这样做

`$user->setConfirmPassword($confirmPassword);`.

检查输入的两个密码是否相等的一种方法是设置`$password`并执行类似的操作

```
$user->setPassword($password);
if(!$user->matchPassword($confirmPassword)) {
    throw new PasswordsNotEqualException('Some message');
} 
```

这将在我认为的服务层中完成？

任何可以帮助我朝着正确方向前进的建议都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:24:44.907

> 所有表单数据都应该由域对象验证吗？如果是这样，应该像这样在二传手中完成

IMO 您应该只允许创建有效对象，而实现这一点的最佳方法是在创建对象的方法中进行这些检查。

假设用户的名字不能更改，您将在创建用户时验证它。这样，您就可以忘记 setter 了，因为您不再需要它了。

在某些情况下，您可能希望更改属性，并且您也需要验证它们（因为如果是这种情况，更改可能会导致从有效对象变为无效对象）。

> 检查输入的两个密码是否相等的一种方法是设置 $password 并执行类似...

您可以以相同的方式处理此问题：拥有一个 Password 对象，该对象在创建时检查密码和确认。如果您有一个有效的 Password 实例，则可以在知道它通过了您指定的所有验证后使用它。

**参考**

这些设计原则（从一开始就完整和有效的对象等）来自 Hernan Wilkinson 的“Patagonia 背后的设计原则”。请务必查看[ESUG 2010 视频](http://www.youtube.com/watch?v=8cgmdaKwRvU)和[演示幻灯片](http://www.slideshare.net/esug/design-principlesbehindpatagonia)。

我最近回答了另一个关于验证属性的问题，我认为您可能会派上用场：[https ://stackoverflow.com/a/14867390/146124](https://stackoverflow.com/a/14867390/146124)

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T17:40:55.893

### TL;博士

不，setter 不应该验证数据。而*nick2083*是完全错误的。

## 加长版...

根据 Tim Howard 提供的定义^([[来源]](http://www.amazon.com/exec/obidos/ISBN=013442526X/portlandpatternrA/))，[域对象](http://c2.com/cgi/wiki?DomainObject)可以验证它们包含的域信息的状态。这基本上说明，为了让您真正拥有一个域对象，所述对象需要能够验证自己。

### 何时验证

你基本上必须选择：

*   在每个 setter 中验证
*   有一种方法来验证整个对象

如果验证是 setter 的一部分，则存在一个主要缺点：setter 的顺序很重要。

> [**示例：**假设您正在制作一个涉及人寿保险的应用程序。很有可能，当触发保单时（被保险人死亡），您将拥有一个域对象，其中包含被保险人和获得保费的人。您必须确保收件人和被保险人不是同一个人。但是没有规则可以控制执行 setter 的顺序。]

当您在域对象中有两个或多个参数时，必须相互验证，实现变得有点模糊。最可行的解决方案是检查何时分配了所有参数，但此时您已经失去了 in-setter 验证的好处：代码的执行已经移过了无效数据的来源。

如果参数 B 很大`21`并且 C 已经设置，那么您将如何处理域对象的有效状态没有设置参数 A 的情况？

> [**结论：** setter 中的验证只是可行的解决方案，当您有非常简单的域对象时，没有纠结的验证规则。]

# qt - 调用 QApplication 的 quit() 方法

> ID：15040988
> 
> 赞同：6
> 
> 时间：2013-02-23T13:21:41.497
> 
> 标签：qt

如果我尝试直接使用 quit() 方法，它会完美编译，但是在运行时会出现错误消息“Object::connect: No such slot myClass::quit()”。所以要避免这种情况，有什么办法吗？通过使用方法 quitPicture()(defined as slot)，应用程序运行良好。这是唯一的解决方案吗？

```
myClass::myClass(QWidget *parent)
    : QWidget(parent)
{
    QWidget *window = new QWidget;
    window->setWindowTitle(QObject::tr("Class"));

    QPushButton *quitButton = new QPushButton("&Quit");
//    QObject::connect(quitButton, SIGNAL(clicked()), this, SLOT(quit()));      //showing run time error
    QObject::connect(quitButton, SIGNAL(clicked()), this, SLOT(quitPicture())); //working perfectly

    QHBoxLayout *layout = new QHBoxLayout;
    layout->addWidget(this);
    layout->addWidget(quitButton);
    window->setLayout(layout);
    window->show();
}

void myClass::quitPicture()
{
    std::cout << "calling quitPicture" << std::endl;
    QApplication::quit();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T13:32:26.327

按钮的`clicked`信号可以直接连接到应用程序的`quit`插槽：

```
QObject::connect(quitButton, SIGNAL(clicked()),
                 QApplication::instance(), SLOT(quit())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T00:51:21.413

这个答案涵盖了 Qt 中的新信号/插槽语法，还涵盖了在使用使用重载的信号时如何处理它。

对于使用 QObject 作为示例对象的没有重载的信号：

```
QObject obj(nullptr); 

QObject::connect(&obj, &QObject::destroyed, QCoreApplication::instance(), \
 &QCoreApplication::quit); 
```

对于使用 QProcess 作为示例对象的重载信号：

```
QProcess * process = new QProcess(QCoreApplication::instance());

QObject::connect(process, static_cast<void (QProcess::*)(int)>(&QProcess::finished), \
                     QCoreApplication::instance(), &QCoreApplication::quit); 
```

看起来很疯狂的语法基本上是这样的，作为占位符语法：

```
static_cast< _signalReturnType_( _ObjectName::*_ )( _overloadType1_, _overloadType2_, \
…etc )>( _&ObjectName::signalName_ ) 
```

如果您想了解原因的详细信息，可以查看[此链接。](http://en.cppreference.com/w/cpp/language/pointer#Pointers_to_member_functions)

由于 QProcess 有两个重载，这是它的另一个重载：

```
QProcess * process = new QProcess(QCoreApplication::instance());

QObject::connect(process, static_cast<void (QProcess::*)(int, QProcess::ExitStatus)>( \
 &QProcess::finished ), QCoreApplication::instance(), &QCoreApplication::quit); 
```

如果这个看起来很疯狂的东西让你头晕目眩，不要出汗。你可以在这里评论问题，因为我通常每天都会检查 SO，或者至少现在是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T18:08:15.317

```
void my_exit_func()
{
    // in mainwindow.cpp
    delete MainWindow;
} 
```

# java - 问题：创建一个非常准确的摇摆计时器

> ID：15040989
> 
> 赞同：10
> 
> 时间：2013-02-23T13:21:41.663
> 
> 标签：java, swing, timer, event-dispatch-thread

为了`SwingTimer`准确起见，我喜欢@Tony Docherty On CR 提出的逻辑和示例。这是[链接](http://www.coderanch.com/t/604730/GUI/java/Don-rely-Swing-timers-concurrency)。

为了一次又一次地突出给定的单词，总是会有几微秒的延迟。如果我要突出显示的话：“你好，怎么样”并且每个词的值分别是（延迟）：200,300,400 ms，那么计时器所花费的实际时间总是更多。说不是 200 毫秒，而是 216 毫秒。像这样，如果我有很多话..最后，额外的延迟是显而易见的。

我必须突出显示每个字母说：'h''e''l''l''0' 每个应该得到 200/length(ie 5) = 40 ms 大约。在每个字母之后设置延迟。

我的逻辑是，以当前时间为例`startTime`，就在开始该过程之前。另外，计算`totalDelay`哪个是totalDelay+=delay/.length()。

现在检查条件： ( `startTime+totalDelay-System.currentTime`) 如果这是-ve，则表示时间消耗更多，因此跳过该字母。检查直到有一个积极的延迟。这意味着我正在添加时间到现在，并过度检查它与进程开始时所用时间的差异。

这可能会导致跳过以突出显示字母。

但有些不对劲。什么，我很难分辨。循环的东西可能有问题。我已经看到它只是两次进入循环（检查时间是否为 -ve ）。但事实并非如此。而且我也不确定设置我的下一个延迟。有任何想法吗？

这是一个SSCCE：

```
 import java.awt.Color;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.lang.reflect.InvocationTargetException;
    import javax.swing.JFrame;
    import javax.swing.JPanel;
    import javax.swing.JTextPane;
    import javax.swing.SwingUtilities;
    import javax.swing.Timer;
    import javax.swing.text.BadLocationException;
    import javax.swing.text.DefaultStyledDocument;
    import javax.swing.text.StyleConstants;
    import javax.swing.text.StyledDocument;

    public class Reminder {
        private static final String TEXT = "arey chod chaad ke apnee saleem ki gali anarkali disco chalo";
        private static final String[] WORDS = TEXT.split(" ");
        private JFrame frame;
        private Timer timer;
        private StyledDocument doc;
        private JTextPane textpane;
        private int[] times = new int[100];
      private long totalDelay=0,startTime=0;

        private int stringIndex = 0;
        private int index = 0;

        public void startColoring() {
              times[0]=100;times[9]=200;times[10]=200;times[11]=200;times[12]=200;
              times[1]=400;times[2]=300;times[3]=900;times[4]=1000;times[5]=600;times[6]=200;times[7]=700;times[8]=700;

      ActionListener actionListener = new ActionListener() {
       @Override
       public void actionPerformed(ActionEvent actionEvent) 
       {

       doc.setCharacterAttributes(stringIndex, 1, textpane.getStyle("Red"), true);
        stringIndex++;

 try {

 if (stringIndex >= doc.getLength() || doc.getText(stringIndex, 1).equals(" ")|| doc.getText(stringIndex, 1).equals("\n"))
 {
                            index++;
  }
    if (index < WORDS.length) {

       double delay = times[index];
     totalDelay+=delay/WORDS[index].length();

  /*Check if there is no -ve delay, and you are running according to the time*/
  /*The problem is here I think. It's just entered this twice*/
   while(totalDelay+startTime-System.currentTimeMillis()<0)
      { 
      totalDelay+=delay/WORDS[index].length();
      stringIndex++;
     /*this may result into the end of current word, jump to next word.*/
    if (stringIndex >= doc.getLength() || doc.getText(stringIndex, 1).equals(" ") || doc.getText(stringIndex, 1).equals("\n"))
       {
   index += 1;
   totalDelay+=delay/WORDS[index].length();
       }
      }

     timer.setDelay((int)(totalDelay+startTime-System.currentTimeMillis()));

                        } 
else {
         timer.stop();
    System.err.println("Timer stopped");
       }
                    } catch (BadLocationException e) {
                        e.printStackTrace();
                    }
                }
            };

            startTime=System.currentTimeMillis();
            timer = new Timer(times[index], actionListener);
            timer.setInitialDelay(0);
            timer.start();
        }

        public void initUI() {
            frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JPanel panel = new JPanel();
            doc = new DefaultStyledDocument();
            textpane = new JTextPane(doc);
            textpane.setText(TEXT);
            javax.swing.text.Style style = textpane.addStyle("Red", null);
            StyleConstants.setForeground(style, Color.RED);
            panel.add(textpane);
            frame.add(panel);
            frame.pack();
            frame.setVisible(true);
        }

        public static void main(String args[]) throws InterruptedException, InvocationTargetException {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    Reminder reminder = new Reminder();
                    reminder.initUI();
                    reminder.startColoring();
                }
            });
        }
    } 
```

**更新：**

为了更好地理解：

@Tony Docherty 给出的 EG：

让我们以单词“Test”为例，说它需要突出显示 1 秒，因此每个字母突出显示 250 毫秒。以您最初的方式做事，确实意味着您为每个字母设置了一个 250 毫秒的计时器，但如果每个周期实际上花费了 260 毫秒，并且假设“e”周期花费了 400 毫秒（可能是由于 GC 或其他使用 CPU 周期的原因）你会比你应该多花 180 毫秒。这个错误将继续为每个单词构建，直到错误如此之大，突出显示不再在视觉上同步。

我正在尝试的方法是，而不是反复说这个字母需要突出显示 x 时间，计算每个字母相对于序列开头的时间，即 T = 250, e = 500, s = 750, t = 1000。

因此，要获得实际的时间延迟，您需要添加开始时间并减去当前时间。使用我上面给出的时间来运行示例：

```
StartTime   Letter   Offset    CurrentTime    Delay  ActualTimeTaken   
100000         T       250       100010        240      250  
100000         e       500       100260        240      400  
100000         s       750       100660         90      100  
100000         t      1000       100760        240      250 
```

因此，您现在应该能够看到，每个字母的时间都经过调整，以考虑到前一个字母的时间超限。当然，时间超限可能非常大，以至于您必须跳过突出显示下一个字母（或者可能超过 1 个），但至少我会保持大致同步。

**编辑的 SSCCE**

**更新2**

在第一阶段，我为每个单词计时。也就是说，当用户按下 ESC 键时，会存储特定单词的时间（他这样做是因为在后台播放歌曲。）当按下 ESC 键时，当前单词会突出显示，并且当前单词所花费的时间单词存储在一个数组中。我继续存储时间。当用户结束时，现在我想根据设定的时间突出显示单词。所以在这里，用户的时机很重要。如果时间很快，单词的突出显示也是如此，或者如果很慢，反之亦然。

**新更新：进度**

下面的答案有不同的逻辑，但令我惊讶的是，它们或多或少是相同的。我发现所有逻辑（包括我的逻辑）的一个非常非常奇怪的问题是，它们似乎在几行代码中都能完美运行，但在那之后它们的速度也不是很慢，而是有很大的不同。

此外，如果您认为我应该以不同的方式思考，我们非常感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T13:39:42.070

我认为要做这样的事情，你需要一个摆动定时器，它以恒定的速率滴答作响，比如 15 毫秒，只要它足够快以允许你需要的时间粒度，然后当经过的时间是你需要的。

*   换句话说，根本不要改变Timer的延迟，而只是根据你的需要改变所需的经过时间。
*   你不应该`while (true)`在 EDT 上有一个循环。让“while 循环”成为 Swing Timer 本身。
*   为了使您的逻辑更加万无一失，您需要检查经过的时间是否 >= 需要的时间。
*   同样，不要设置定时器的延迟。换句话说，不要将它用作计时器，而是用作***轮询器***。让它每隔 xx 毫秒不停地*轮询*经过的时间，然后在经过的时间 >= 满足您的需要时做出反应。

我建议的代码看起来像这样：

```
 public void actionPerformed(ActionEvent actionEvent) {

        if (index > WORDS.length || stringIndex >= doc.getLength()) {
           ((Timer)actionEvent.getSource()).stop();
        }

        currentElapsedTime = calcCurrentElapsedTime();
        if (currentElapsedTime >= elapsedTimeForNextChar) {
           setNextCharAttrib(stringIndex);
           stringIndex++;

           if (atNextWord(stringIndex)) {
              stringIndex++; // skip whitespace 
              deltaTimeForEachChar = calcNextCharDeltaForNextWord();
           } else {
              elapsedTimeForNextChar += deltaTimeForEachChar;
           }
        }

        // else -- we haven't reached the next time to change char attribute yet.
        // keep polling.
     } 
```

* * *

例如，我的 SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.LinkedList;
import java.util.List;

import javax.swing.*;
import javax.swing.text.*;

public class Reminder3 {
   private static final String TEXT = "arey chod chaad ke apnee saleem ki gali anarkali disco chalo";
   private static final String[] WORDS = TEXT.split(" ");
   private static final int[] TIMES = { 100, 400, 300, 900, 1000, 600, 200,
         700, 700, 200, 200, 200, 200 };
   private static final int POLLING_TIME = 12;

   private StyledDocument doc;
   private JTextPane textpane;
   private JPanel mainPanel = new JPanel();
   private List<ReminderWord> reminderWordList = new LinkedList<ReminderWord>();
   private Timer timer;

   // private int stringIndex = 0;

   public Reminder3() {
      doc = new DefaultStyledDocument();
      textpane = new JTextPane(doc);
      textpane.setText(TEXT);
      javax.swing.text.Style style = textpane.addStyle("Red", null);
      StyleConstants.setForeground(style, Color.RED);

      JPanel textPanePanel = new JPanel();
      textPanePanel.add(new JScrollPane(textpane));

      JButton startBtn = new JButton(new AbstractAction("Start") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            goThroughWords();
         }
      });
      JPanel btnPanel = new JPanel();
      btnPanel.add(startBtn);

      mainPanel.setLayout(new BorderLayout());
      mainPanel.add(textPanePanel, BorderLayout.CENTER);
      mainPanel.add(btnPanel, BorderLayout.SOUTH);
   }

   public void goThroughWords() {
      if (timer != null && timer.isRunning()) {
         return;
      }
      doc = new DefaultStyledDocument();
      textpane.setDocument(doc);
      textpane.setText(TEXT);

      javax.swing.text.Style style = textpane.addStyle("Red", null);
      StyleConstants.setForeground(style, Color.RED);

      int wordStartTime = 0;
      for (int i = 0; i < WORDS.length; i++) {

         if (i > 0) {
            wordStartTime += TIMES[i - 1];
         }
         int startIndexPosition = 0; // set this later
         ReminderWord reminderWord = new ReminderWord(WORDS[i], TIMES[i],
               wordStartTime, startIndexPosition);
         reminderWordList.add(reminderWord);
      }

      int findWordIndex = 0;
      for (ReminderWord word : reminderWordList) {

         findWordIndex = TEXT.indexOf(word.getWord(), findWordIndex);
         word.setStartIndexPosition(findWordIndex);
         findWordIndex += word.getWord().length();
      }

      timer = new Timer(POLLING_TIME, new TimerListener());
      timer.start();
   }

   public JComponent getMainPanel() {
      return mainPanel;
   }

   private void setNextCharAttrib(int textIndex) {
      doc.setCharacterAttributes(textIndex, 1,
            textpane.getStyle("Red"), true);      
   }

   private class TimerListener implements ActionListener {
      private ReminderWord currentWord = null;
      private long startTime = System.currentTimeMillis();

      @Override
      public void actionPerformed(ActionEvent e) {
         if (reminderWordList == null) { 
            ((Timer) e.getSource()).stop();
            return;
         }

         if (reminderWordList.isEmpty() && currentWord.atEnd()) {
            ((Timer) e.getSource()).stop();
            return;
         }

         // if just starting, or if done with current word
         if (currentWord == null || currentWord.atEnd()) {
            currentWord = reminderWordList.remove(0); // get next word
         }

         long totalElapsedTime = System.currentTimeMillis() - startTime;
         if (totalElapsedTime > (currentWord.getStartElapsedTime() + currentWord
               .getIndex() * currentWord.getTimePerChar())) {
            setNextCharAttrib(currentWord.getStartIndexPosition() + currentWord.getIndex());

            currentWord.increment();
         }

      }
   }

   private static void createAndShowGui() {
      Reminder3 reminder = new Reminder3();

      JFrame frame = new JFrame("Reminder");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(reminder.getMainPanel());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

}

class ReminderWord {
   private String word;
   private int totalTime;
   private int timePerChar;
   private int startTime;
   private int startIndexPosition;
   private int index = 0;

   public ReminderWord(String word, int totalTime, int startTime,
         int startIndexPosition) {
      this.word = word;
      this.totalTime = totalTime;
      this.startTime = startTime;
      timePerChar = totalTime / word.length();
      this.startIndexPosition = startIndexPosition;
   }

   public String getWord() {
      return word;
   }

   public int getTotalTime() {
      return totalTime;
   }

   public int getStartElapsedTime() {
      return startTime;
   }

   public int getTimePerChar() {
      return timePerChar;
   }

   public int getStartIndexPosition() {
      return startIndexPosition;
   }

   public int increment() {
      index++;
      return index;
   }

   public int getIndex() {
      return index;
   }

   public boolean atEnd() {
      return index > word.length();
   }

   public void setStartIndexPosition(int startIndexPosition) {
      this.startIndexPosition = startIndexPosition;
   }

   @Override
   public String toString() {
      return "ReminderWord [word=" + word + ", totalTime=" + totalTime
            + ", timePerChar=" + timePerChar + ", startTime=" + startTime
            + ", startIndexPosition=" + startIndexPosition + ", index=" + index
            + "]";
   }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T17:30:27.810

好的，所以我一直在查看一些代码（我在您关于卡拉 OK 计时器的最后一个问题中发布的代码）

使用该代码，我建立了一些测量系统，使用`System.nanoTime()`via`System.out.println()`这将帮助我们了解正在发生的事情：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class KaraokeTest {

    private int[] timingsArray = {1000, 1000, 9000, 1000, 1000, 1000, 1000, 1000, 1000, 1000};//word/letters timings
    private String[] individualWordsToHighlight = {" \nHello\n", " world\n", " Hello", " world", " Hello", " world", " Hello", " world", " Hello", " world"};//each individual word/letters to highlight
    private int count = 0;
    private final JTextPane jtp = new JTextPane();
    private final JButton startButton = new JButton("Start");
    private final JFrame frame = new JFrame();
    //create Arrays of individual letters and their timings
    final ArrayList<String> chars = new ArrayList<>();
    final ArrayList<Long> charsTiming = new ArrayList<>();

    public KaraokeTest() {
        initComponents();
    }

    private void initComponents() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        for (String s : individualWordsToHighlight) {
            String tmp = jtp.getText();
            jtp.setText(tmp + s);
        }
        jtp.setEditable(false);

        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                startButton.setEnabled(false);
                count = 0;
                charsTiming.clear();
                chars.clear();

                for (String s : individualWordsToHighlight) {
                    for (int i = 0; i < s.length(); i++) {
                        chars.add(String.valueOf(s.charAt(i)));
                        //System.out.println(String.valueOf(s.charAt(i)));
                    }
                }

                //calculate each letters timings
                for (int x = 0; x < timingsArray.length; x++) {
                    for (int i = 0; i < individualWordsToHighlight[x].length(); i++) {
                        individualWordsToHighlight[x] = individualWordsToHighlight[x].replace("\n", " ").replace("\r", " ");//replace line breaks
                        charsTiming.add((long) (timingsArray[x] / individualWordsToHighlight[x].trim().length()));//dont count spaces
                        //System.out.println(timingsArray[x] / individualWordsToHighlight[x].length());
                    }
                }

                Timer t = new Timer(1, new AbstractAction() {
                    long startTime = 0;
                    long acum = 0;
                    long timeItTookTotal = 0;
                    long dif = 0, timeItTook = 0, timeToTake = 0;
                    int delay = 0;

                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        if (count < charsTiming.size()) {

                            if (count == 0) {
                                startTime = System.nanoTime();
                                System.out.println("Started: " + startTime);
                            }

                            timeToTake = charsTiming.get(count);
                            acum += timeToTake;

                            //highlight the next word
                            highlightNextWord();

                            //System.out.println("Acum " + acum);
                            timeItTook = (acum - ((System.nanoTime() - startTime) / 1000000));
                            timeItTookTotal += timeItTook;
                            //System.out.println("Elapsed since start: " + (System.nanoTime() - startTime));
                            System.out.println("Time the char should take: " + timeToTake);
                            System.out.println("Time it took: " + timeItTook);
                            dif = (timeToTake - timeItTook);
                            System.out.println("Difference: " + dif);
                            //System.out.println("Difference2 " + (timeToTake - dif));

                            //calculate start of next letter to highlight less the difference it took between time it took and time it should actually take
                            delay = (int) (timeToTake - dif);

                            if (delay < 1) {
                                delay = 1;
                            }

                            //restart timer with new timings
                            ((Timer) ae.getSource()).setInitialDelay((int) timeToTake);//timer is usually faster thus the entire highlighting will be done too fast
                            //((Timer) ae.getSource()).setInitialDelay(delay);
                            ((Timer) ae.getSource()).restart();

                        } else {//we are at the end of the array
                            long timeStopped = System.nanoTime();
                            System.out.println("Stopped: " + timeStopped);
                            System.out.println("Time it should take in total: " + acum);
                            System.out.println("Time it took using accumulator of time taken for each letter: " + timeItTookTotal
                                    + "\nDifference: " + (acum - timeItTookTotal));
                            long timeItTookUsingNanoTime = ((timeStopped - startTime) / 1000000);
                            System.out.println("Time it took using difference (endTime-startTime): " + timeItTookUsingNanoTime
                                    + "\nDifference: " + (acum - timeItTookUsingNanoTime));
                            reset();
                            ((Timer) ae.getSource()).stop();//stop the timer
                        }
                        count++;//increment counter
                    }
                });
                t.setRepeats(false);
                t.start();
            }
        });

        frame.add(jtp, BorderLayout.CENTER);
        frame.add(startButton, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    private void reset() {
        startButton.setEnabled(true);
        jtp.setText("");
        for (String s : individualWordsToHighlight) {
            String tmp = jtp.getText();
            jtp.setText(tmp + s);
        }
        JOptionPane.showMessageDialog(frame, "Done");
    }

    private void highlightNextWord() {
        //we still have words to highlight
        int sp = 0;
        for (int i = 0; i < count + 1; i++) {//get count for number of letters in words (we add 1 because counter is only incrementd after this method is called)
            sp += 1;
        }

        while (chars.get(sp - 1).equals(" ")) {
            sp += 1;
            count++;
        }

        //highlight words
        Style style = jtp.addStyle("RED", null);
        StyleConstants.setForeground(style, Color.RED);
        ((StyledDocument) jtp.getDocument()).setCharacterAttributes(0, sp, style, true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new KaraokeTest();
            }
        });
    }
} 
```

我的电脑上的输出是：

> 开始：10289712615974
> 
> char 应该花费的时间：166
> 
> 花费时间：165
> 
> 差异1
> 
> ...
> 
> char 应该花费的时间：166
> 
> 花费时间：155
> 
> 差异 11
> 
> ...
> 
> char 应该花费的时间：166
> 
> 花费时间：5
> 
> 差异161
> 
> 已停止：10299835063084
> 
> 总共应该花费的时间：9960
> 
> 使用每个字母所用时间的累加器所花费的时间：5542
> 
> 差异：4418
> 
> 使用差异所花费的时间（endTime-startTime）：10122
> 
> 差异：-162

因此，我的结论是 Swing Timer 实际上运行得比我们预期的要快，因为`Timer`s中的代码`actionPerformed`不一定需要与预期突出显示时间一样长的字母，这当然会导致雪崩效应，即计时器运行得越快/越慢/差异将变得更少，并且下次执行的计时器`restart(..)`将在不同的时间进行，即更快或更慢。

在代码中这样做：

```
//calculate start of next letter to highlight less the difference it took between time it took and time it should actually take
delay = (int) (timeToTake - dif);

//restart timer with new timings
//((Timer) ae.getSource()).setInitialDelay((int)timeToTake);//timer is usually faster thus the entire highlighting will be done too fast
((Timer) ae.getSource()).setInitialDelay(delay);
((Timer) ae.getSource()).restart(); 
```

产生更准确的结果（我的最大延迟比每个字母快 4 毫秒）：

> 开始：10813491256556
> 
> char 应该花费的时间：166
> 
> 花费时间：164
> 
> 差异 2
> 
> ...
> 
> char 应该花费的时间：166
> 
> 花费时间：164
> 
> 差异 2
> 
> ...
> 
> char 应该花费的时间：166
> 
> 花费时间：162
> 
> 差异 4
> 
> 已停止：10823452105363
> 
> 总共应该花费的时间：9960
> 
> 使用每个字母所用时间的累加器所用的时间：9806
> 
> 差异：154
> 
> 使用差异所花费的时间（endTime-startTime）：9960
> 
> 差异：0

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-23T15:17:06.590

你考虑过 java.util.Timer 和 scheduleAtFixedRate 吗？你需要做一些额外的工作才能在 EDT 上做一些事情，但它应该可以解决累积延迟的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-25T17:39:45.970

[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)往往比 Swing 的 Timer 更准确，并且它提供了运行多个线程的好处。特别是，如果一个任务延迟，它不会影响下一个任务的开始时间（在一定程度上）。

*显然，如果任务在 EDT 上*花费的时间太长，这将成为您的限制因素。

请参阅下面基于您的提议的 SSCCE - 我还稍微重构了该`startColoring`方法并将其拆分为几种方法。我还添加了一些“日志记录”以获取有关操作时间的反馈。完成后不要忘记`shutdown`执行程序，否则可能会阻止程序退出。

每个单词开始着色时都会有轻微的延迟（在我的机器上介于 5 到 20 毫秒之间），但延迟不是累积的。您实际上可以测量调度开销并进行相应调整。

```
public class Reminder {

    private static final String TEXT = "arey chod chaad ke apnee saleem ki gali anarkali disco chalo\n" +
            "arey chod chaad ke apnee saleem ki gali anarkali disco chalo\n" +
            "arey chod chaad ke apnee saleem ki gali anarkali disco chalo\n" +
            "arey chod chaad ke apnee saleem ki gali anarkali disco chalo\n" +
            "arey chod chaad ke apnee saleem ki gali anarkali disco chalo\n" +
            "arey chod chaad ke apnee saleem ki gali anarkali disco chalo";
    private static final String[] WORDS = TEXT.split("\\s+");
    private JFrame frame;
    private StyledDocument doc;
    private JTextPane textpane;
    private static final int[] TIMES = {100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200, 
                                        100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200,
                                        100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200,
                                        100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200,
                                        100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200,
                                        100, 400, 300, 900, 1000, 600, 200, 700, 700, 200, 200, 200};
    private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(2);
    private int currentLetterIndex;
    private long start; //for logging

    public void startColoring() {
        start = System.currentTimeMillis(); //for logging
        int startTime = TIMES[0];
        for (int i = 0; i < WORDS.length; i++) {
            scheduler.schedule(colorWord(i, TIMES[i + 1]), startTime, TimeUnit.MILLISECONDS);
            startTime += TIMES[i+1];
        }
        scheduler.schedule(new Runnable() {

            @Override
            public void run() {
                scheduler.shutdownNow();
            }
        }, startTime, TimeUnit.MILLISECONDS);
    }

    //Color the given word, one letter at a time, for the given duration
    private Runnable colorWord(final int wordIndex, final int duration) {
        final int durationPerLetter = duration / WORDS[wordIndex].length();
        final int wordStartIndex = currentLetterIndex;
        currentLetterIndex += WORDS[wordIndex].length() + 1;
        return new Runnable() {
            @Override
            public void run() {
                System.out.println((System.currentTimeMillis() - start) + " ms - Word: " + WORDS[wordIndex] + "  - duration = " + duration + "ms");
                for (int i = 0; i < WORDS[wordIndex].length(); i++) {
                    scheduler.schedule(colorLetter(wordStartIndex + i), i * durationPerLetter, TimeUnit.MILLISECONDS);
                }
            }
        };
    }

    //Color the letter on the EDT
    private Runnable colorLetter(final int letterIndex) {
        return new Runnable() {
            @Override
            public void run() {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        System.out.println("\t" + (System.currentTimeMillis() - start) + " ms - letter: " + TEXT.charAt(letterIndex));
                        doc.setCharacterAttributes(letterIndex, 1, textpane.getStyle("Red"), true);
                    }
                });
            }
        };
    }

    public void initUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        doc = new DefaultStyledDocument();
        textpane = new JTextPane(doc);
        textpane.setText(TEXT);
        javax.swing.text.Style style = textpane.addStyle("Red", null);
        StyleConstants.setForeground(style, Color.RED);
        panel.add(textpane);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) throws InterruptedException, InvocationTargetException {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Reminder reminder = new Reminder();
                reminder.initUI();
                reminder.startColoring();
            }
        });
    }
} 
```

# design-patterns - 模式联合责任链、工厂方法、策略

> ID：15040997
> 
> 赞同：1
> 
> 时间：2013-02-23T13:22:35.593
> 
> 标签：design-patterns

我想知道是否可以将三种模式组合在一起：FactoryMethod、责任链和策略模式。为此，我希望使用责任链客户端类，而不是 FactoryMethod 的工厂，以及模式策略的上下文。这是可能的和适当的吗？

例如，图中的类 Uno 和 Strategy 是责任链模式的具体处理程序。但是，抽象类策略也是“策略”模式中的策略类。Uno 类是 FactoryMethod 模式的抽象类。

![在此处输入图像描述](../Images/d0965749dfba1d34e80f417b8f7263eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:20:16.903

有时会因为它“酷”而使用模式的诱惑，并且模式可以使代码看起来更“专业”。我建议你从 KISS 和 YAGNI 开始，然后在你的第一个草图之后，你可以更多地考虑“模式荣耀”。不要无缘无故地添加它，它只会让你的代码不那么可读。