# StackOverflow 问答 12893000-12893999

# c++ - 使用方法声明“_Something”在 VBA（Excel）中导入 C++ dll

> ID：12893002
> 
> 赞同：1
> 
> 时间：2012-10-15T09:42:33.900
> 
> 标签：c++, vba, dllimport

我最近从朋友那里得到的 c++ dll 有一些问题。我正在尝试将 dll 导入 Excel VBA 加载项。（我使用的是 Excel 2010 32bit 并且 dll 是在 Visual Studio 2008 中编译的）

首先，我尝试导入它，但它失败并出现运行时错误 49。我得出结论，它可能来自缺少的 c++ 声明 (__stdcal)。（我认为视觉工作室应该自动做到这一点，但没关系）

现在我在其声明中有一个带有 __stdcal 的新 dll，但是这些方法在其开头使用下划线 ( _ ) 声明。

因此，当我尝试声明 Sub 时，Excel 会告诉我“无效字符”之类的信息，是否有可能在不更改 c++ 文件的情况下避免这种情况？

```
'void _SaveFile(const char *FileName_);'
Declare Sub _SaveFile Lib "D:/DLL/TableController.dll" (ByRef FileName_ As String)
            ^
            | 
```

提前致谢

这里有一些额外的信息可能会导致我的问题的解决方案。

我现在得到了一些 C++ 代码来调试我的问题......我仍然得到运行时错误 49，但是依赖 walker 现在给了我正确的方法名称（我认为这非常棒;））

我试图在 C# 程序中使用相同的 dll。正如我所料，它工作得非常正常。这是我的 C# 代码，这是导入：

```
 [DllImport("JLTable.dll",CallingConvention=CallingConvention.StdCall)]
        internal static extern void JLReadFile(string _FileName);

        [DllImport("JLTable.dll", CallingConvention = CallingConvention.StdCall)]
        internal static extern long JLGetRowCount(); 
```

如果我单击一个按钮，就会发生这种情况

```
 TableRunner.JLReadFile(@"D:\file.tab");
        long rows = TableRunner.JLGetRowCount();
        MessageBox.Show(rows.ToString()); 
```

这是我在 VBA 中的代码声明：

```
 Declare Function JLReadFile Lib "D:/JLTable.dll" (ByRef FileName_ As String)
    Declare Function JLGetRowCount Lib "D:/JLTable.dll" () As Long 
```

和电话：

```
 Sub Read()
        Dim path As String
        path = "D:/file.tab"
        JLReadFile (path)
        Dim count As Long
        count = JLGetRowCount()
    End Sub 
```

这也是我要调用的 c++ 代码。由于某种原因，我的朋友不希望我显示代码的确切作用，但它的行为仍然与此代码相同。

.h 文件（JLTable_API 类似于 #define JLTable_API __declspec(dllexport)）

```
 #define STDCALL
    extern "C"
    {
    JLTABLE_API void STDCALL  JLReadFile(const char *FileName_);
    JLTABLE_API void STDCALL  JLSaveFile(const char *FileName_);
    } 
```

.c++ 文件

```
 void STDCALL  JLReadFile(const char *FileName_)
    {
    //log something to a file
    }
    long STDCALL  JLGetRowCount()
    {
    //log something to a file
    return 0;
    } 
```

我非常感谢你能给我的每一个提示

和往常一样提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:21:17.270

我终于有了解决办法。我发现了一个博客，它向我展示了我做错了什么。

[http://aandreasen.wordpress.com/2008/05/05/how-to-create-a-dll-for-ms-excel-vba-with-microsoft-visual-c-2008-command-line-tools/](http://aandreasen.wordpress.com/2008/05/05/how-to-create-a-dll-for-ms-excel-vba-with-microsoft-visual-c-2008-command-line-tools/)

如上所述，您需要正确的方法名称，以确定哪个是正确的，我使用了依赖项步行器。这最终导致我发表了这个声明

VBA：

```
Declare Sub JLReadFile Lib "D:/JLTable.dll" (ByRef FileName_ As String) Alias "_JLReadFile@4" (ByRef FileName_ As String) 
```

C++：

```
void __declspec (dllexport) _stdcall JLReadFile(const char *FileName_); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:51:08.037

在我运行的类似测试中，您需要使用“别名”关键字。这样它就可以写成类似于：`Declare Sub SaveFile Lib "D:/DLL/TableController.dll" Alias "_SaveFile" (ByRef FileName_ As String)`

此外，我认为您不必通过引用传递文件名，但我可能是错的。自从我使用VB以来已经有一段时间了。有关从动态库导入函数的更多信息，请查看[此](http://msdn.microsoft.com/en-us/library/aa243324%28v=vs.60%29.aspx)页面

# mysql - Symfony2 & Doctrine：按外部属性排序实体

> ID：12893006
> 
> 赞同：3
> 
> 时间：2012-10-15T09:42:48.360
> 
> 标签：mysql, sql, symfony, doctrine

我想使用一个选择来获取带有 Doctrines QueryBuilder 的实体数组。但我需要一个`ORDER BY`使用外部属性（与外键相关的表中的属性）。我想直观地写的是这样的：

```
$repo = $this->getDoctrine()->getRepository('MyBundle:relation_table');

$query = $repo->createQueryBuilder('r')
 ->orderBy('r.fevent.date', 'DESC')
 ->getQuery(); 
```

毫不奇怪，这不起作用。在 SQL 中，我`SELECT`看起来像这样：

```
SELECT r.* FROM relation_table AS r
INNER JOIN events AS e
    ON e.IDevent = r.Fevent
ORDER BY e.date 
```

但我也需要 Doctrine 把实体对象还给我。我想到了两种可能的解决方案：

1.  使用 QueryBuilder 创建一个`INNER JOIN`, 或
2.  创建一个与上面相同的自由 SQL 语句，并以某种方式告诉 Doctrine 创建一个带有其结果的实体对象。

有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:34:55.770

您需要加入要订购的实体：

```
$query = $repo->createQueryBuilder('r')
    ->join('r.fevent', 'f')
    ->orderBy('f.date', 'DESC')
    ->getQuery()
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:59:52.613

在您的 Doctrine Query（您提出的第一个解决方案）中加入这两个表非常简单。看看这里：[http ://symfony.com/doc/2.0/book/doctrine.html#joining-to-related-records](http://symfony.com/doc/2.0/book/doctrine.html#joining-to-related-records)

这里回答了一个类似的问题：[学说 2：如何通过关联值搜索实体？](https://stackoverflow.com/questions/9933385/doctrine-2-how-to-search-for-an-entity-by-its-associations-value/9933727#9933727)

# php - 如何让 sphinx 在匹配时忽略某些 ID？

> ID：12893010
> 
> 赞同：0
> 
> 时间：2012-10-15T09:43:07.313
> 
> 标签：php, sphinx

我正在使用 sphinx 将结果返回到自动完成列表。返回时，结果将被缓存在客户端，以避免对服务器造成不必要的命中。

逻辑如下：

1.  对缓存的结果执行客户端模糊匹配算法并在自动完成中显示
2.  if matches.length < 4 执行 ajax 请求并使用 sphinx 获得更多结果，总共 4
3.  返回结果并附加到自动完成列表

目前在 ajax 请求中，我正在发送在客户端缓存中匹配的 ID 数组，并使用 PHP 循环遍历 sphinx 的结果并将它们从匹配中删除。

这不仅效率低下，而且在正确限制结果方面当然给我带来了问题。

我想要做的是从 Sphinx 中排除这些特定的 ID 匹配自己，以便限制子句实际上是相关的。

所以问题实际上是，如何使用 PHP api 在 Sphinx 查询中排除某些 ID。例如“查找与用户名 John 的所有匹配项，除非他们具有以下任何 ID....”

我一直在阅读 sphinx 文档，并且已经阅读了大量关于“扩展模式”匹配和使用各种运算符的内容，但是我发现自己非常困惑并且不确定如何继续。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:50:09.303

这是使用 sphinx 的好方法：

“目前在 ajax 请求中，我正在发送一组在客户端缓存中匹配的 ID，并使用 PHP 循环遍历 sphinx 的结果并将它们从匹配中删除。”

您需要在 sphinx中使用[setfilter](http://sphinxsearch.com/docs/2.0.5/api-func-setfilter.html)

```
$cl->SetFilter ( $attribute, $values, $exclude=false ); 
```

这里 $cl 是 sphinx 类的对象

$attribute 是要应用过滤器的属性名称。

$values 必须是一个包含整数值的普通数组。（在这里你可以传递你的数组）

exclude 这是非常重要的参数，如果您想从数组（第三个参数）中提供的结果中排除所有 id，则将其设置为 true。

例如：$cl->SetFilter ($attribute, $values, true);

希望这有帮助！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:50:41.877

```
$cl->setFilter("id",array(12,45,34,67,34),TRUE); 
```

:)

# c# - 什么是 php 中的 tinytext，tinytext 和 string 有什么区别？

> ID：12893012
> 
> 赞同：1
> 
> 时间：2012-10-15T09:43:10.707
> 
> 标签：c#, php, mysql, string, int64

我在一个用 php 编写的站点上得到了一份调试报告（[easydutyplan](http://easydutyplan.de/)解析器的调试信息），我看到了

> [rowParam] => 数组
> （
> [0] => BIGINT
> [1] => BIGINT
> [2] => INT
> [3] => TINYTEXT
> [4] => TINYTEXT
> [5] => TINYTEXT
> ）

tinytext 和字符串有什么区别？bigint 与 C# 中的 Int64 相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:50:56.793

这些实际上与PHP无关。它们是 MySQL 数据类型。

[http://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)
[http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)
[http://dev. mysql.com/doc/refman/5.0/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)

Tinytext 用作字段类型以保留 L + 1 个字节，其中 L < 2 到第 8 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:51:27.037

PHP 没有这些数据类型。这些看起来像数据库数据类型。如果您使用普通的 php 调试：`var_dump($your_variable);`您可以看到您的结构的 PHP 数据类型。

[这是对php数据类型](http://php.net/manual/en/language.types.php)的引用

# java - 查找请求的服务器主机 IP？

> ID：12893020
> 
> 赞同：1
> 
> 时间：2012-10-15T09:43:48.617
> 
> 标签：java, javascript, jakarta-ee, tomcat, jboss

我有一个托管在 Tomcat 服务器中的应用程序（客户端应用程序），并且该应用程序必须作为选项卡集成到另一个应用程序（父应用程序）中。在父应用程序中，用户身份验证已完成。在父应用程序 Html 中，我们使用 iframe 来集成客户端。除了这个，一切都很好。问题是，如果有人知道他们可以访问客户端应用程序的 URL。我们怎样才能避免这种情况。？我们使用 JAVA、SERVLET、HTML、Tomacat 作为技术。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:48:28.520

一种可能的解决方案是基于令牌的身份验证。父应用程序应添加特殊令牌作为 URL 参数或 HTTP 标头。令牌应包含加密形式的身份验证信息。“客户端”应用程序应提取信息并决定身份验证是通过还是失败。为了保证没有人可以复制此令牌，然后未经身份验证访问您的应用程序，您应该将令牌设置为一次性的或在时间范围内受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:13:23.440

您还可以在标题中使用 x-frame-options。我通过谷歌搜索找到了这篇文章：[http ://www.jtmelton.com/tag/x-frame-options/](http://www.jtmelton.com/tag/x-frame-options/)

这将阻止您的应用程序加载到框架中，但您允许的域除外。您可能会检查浏览器兼容性，我不确定何时在不同的浏览器中实现了这一点。

此外，您可以检查“主机”和“推荐人”标头字段，以检查请求是否来自您信任的域，然后再发送响应。

OAuth 是授权第三方应用程序的标准。您应该将其作为身份验证方法进行检查。

这些都不会给你一个完全安全的应用程序。您应该考虑咨询安全专家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:00:11.833

从父应用程序添加**cookie**，从子应用程序获取该**cookie**并验证用户。（如果两者都在同一个域上运行）。

# android - android创建pdf文件时出错

> ID：12893021
> 
> 赞同：1
> 
> 时间：2012-10-15T09:43:50.573
> 
> 标签：android, itext

我是 Android 编程新手，我的任务是在 adroid 中创建一个 pdf 文件

首先，我使用 Eclipse (projectA) 创建了一个 Java 项目，在 java 中编写代码以使用 itext 生成一个 pdf 文件（将 jars 添加到项目中）并且它工作正常。

现在我创建了另一个Android项目（ProjectB），并添加了itext jars（类似于projectA）和代码，但它不能正常工作

```
Error : Error generating final archive: Found duplicate file for APK: com/itextpdf/text/LICENSE.txt
Origin 1: /home/SudheerB/workspace-Ecclipse/NeedAnalyserTool13/libs/itextpdf-5.3.3-sources.jar
Origin 2: /home/SudheerB/workspace-Ecclipse/NeedAnalyserTool13/libs/itext-xtra-5.3.3-sources.jar 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:58:58.290

这很简单。您正在使用具有一些通用类的 jar 文件。所以在生成apk文件的过程中，会发现重复的文件。

只需使用其中一个 jar 文件。“itextpdf.jar”或“itextpdf-xtra.jar”。你的问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:47:33.720

从您的项目中删除源 jar，至少该错误应该消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:25:46.647

似乎您使用的是可用于 Java 的 jar，而不是 Android/GAE 端口。请切换到使用 Android 和 Google App Engine 的官方端口。这将解决你的问题。[SourceForge 不提供此端口，您需要在http://itextpdf.com/sales/](http://itextpdf.com/sales/)上填写表格，他们会向您发送一个链接，您可以在其中下载它。

# java - 具有下界通配符的泛型

> ID：12893022
> 
> 赞同：2
> 
> 时间：2012-10-15T09:43:53.977
> 
> 标签：java, generics, wildcard, bounded-wildcard

```
class Animal{}
class Dog extends Animal{}
class Cat extends Animal{}
public class Mixer<A extends Animal>{
    public <C extends Cat> Mixer<? super Dog> useMe(A a, C c){
        //return new Mixer<Object>();//KO
        return new Mixer<Animal>(); //OK
    }
} 
```

`Mixer<? super Dog>`如果用下界通配符定义，则返回参数如此

为什么当我返回 a`Mixer<Object>`并且没有编译器错误时会出现编译器错误`Mixer<Animal>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:50:43.810

问题不在于您的方法的返回类型，而是`Generic Type`绑定到您的 class `Mixer`。

**让我们看看出了什么问题：-**

```
public <C extends Cat> Mixer<? super Dog> useMe(A a, C c) 
```

返回类型**`Mixer<? super Dog>`**意味着，您可以返回任何`Mixer`类型`Dog`或`super-type`Dog，可能是`Animal`.

```
 //return new Mixer<Object>();//KO
    return new Mixer<Animal>(); //OK 
```

因此，这两个`return`陈述**都可以正常工作**，因为`Animal`和`Object`都是`super-type`的`Dog`。

**但是**，**不适合****的原因`first one`**是，您已将您的班级声明为：-

```
public class Mixer<A extends Animal> 
```

所以，你有`bound`你`type`的可以与`Mixer`类相关联`Animal`的`subtype`。现在，因为`Object`不是 的子类型`Animal`，所以您不能只创建：-

```
new Mixer<Object>(); 
```

因此，您可以创建类的实例，例如：-

```
new Mixer<Animal>(); // OR
new Mixer<Dog>();  // Dog extends Animal  // OR
new Mixer<Cat>();  // Cat extends Animal

// **** But NOT like this ******
new Mixer<Object>();  // Object does not extend Animal 
```

# sharepoint - SharePoint & Access -> 超链接问题

> ID：12893023
> 
> 赞同：0
> 
> 时间：2012-10-15T09:43:56.403
> 
> 标签：sharepoint, ms-access, hyperlink

我有一个 SharePoint Access 应用程序（基于其中一个模板），应该只是该组的一个简单的 Todo-Utility。

我在“问题”表中添加了一个字段“链接”，人们应该插入 JIRA-ID，它应该会自动转换为指向“http://jira.somedomain.com/bla/blubb/[HERE_THE_ID] 的链接” ”。

每个解决方案对我来说都很好：“AfterUpdate-Event 将转换后的链接写入表格”与“只有短代码保存在表格中并且 onclick-macro 完成这项工作”一样好，我不在乎。

但是，看起来没有可用的 FollowHyperlink 宏 + 即使该列设置为“超链接”，它也只能在客户端上单击，而不是在部署到共享点站点时。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:20:11.410

好吧，这似乎是非IE浏览器的问题，在IE中可以正常工作......

# c# - fastJson 反序列化未处理的异常

> ID：12893027
> 
> 赞同：5
> 
> 时间：2012-10-15T09:44:06.247
> 
> 标签：c#, json, deserialization, fastjson

我正在使用 fastJson 库将 json 字符串反序列化为“Person”对象。Person 类定义如下：

```
class Person
{
    public string type;
    public string id;
    public string name;
} 
```

Json 字符串是：

```
[{
"type": "/basketball/basketball_player", 
"id": "/en/rasheed_wallace", 
"name": "Rasheed Wallace"
},
{
"type": "/basketball/basketball_player", 
"id": "/en/tayshaun_prince", 
"name": "Tayshaun Prince"
}] 
```

当我使用代码时：

```
var obj = fastJSON.JSON.Instance.ToObject<List<Person>>(str); 
```

它显示了一个未处理的异常

```
Failed to fast create instance for type
'System.Collections.Generic.List`1[[JsonSample.Person, JsonSample, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=null]]' from assemebly  
System.Collections.Generic.List`1[[JsonSample.Person, JsonSample, Version=1.0.0.0, 
Culture=neutral, PublicKeyToken=null]], mscorlib, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089' 
```

但是如果我使用以下代码，Newtonsoft.Json 库中的一切都可以正常工作：

```
var obj = JsonConvert.DeserializeObject<List<Person>>(str); 
```

那么这是fastJson的错误还是我没有以正确的方式使用fastJson？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:45:50.867

这是因为`Person`不是`public`。将您的类定义更改为

```
public class Person
{
    public string type;
    public string id;
    public string name;
} 
```

我尝试按原样运行您的代码并得到相同的异常。我修改`Person`为`public`，异常消失了。

# iis - Microsoft VBScript 运行时错误“800a0046”权限被拒绝

> ID：12893030
> 
> 赞同：4
> 
> 时间：2012-10-15T09:44:16.853
> 
> 标签：iis, asp-classic, file-permissions

我收到以下错误：

> Microsoft VBScript 运行时错误“800a0046”权限被拒绝

运行经典的 asp 应用程序时。

错误在这里：（`CreateTextFile`在行中）

```
Dim myFSO
set myFSO = Server.CreateObject("Scripting.FileSystemObject")
myFSO.CreateTextFile(fName) 
```

我知道我可以通过将“完全控制”授予“所有人”用户来解决这个问题。这是我们服务器上可公开访问的文件夹，所以我担心这是一个安全风险？

我希望能够给像“IIS_IUSRS”这样的人完全许可，但这不起作用。就好像它是一个不同的用户被用于此。

这是安全风险吗？有谁知道我应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T07:32:22.757

您应该找到您特定网站的匿名用户并向该特定用户授予写入权限，或者将网站的应用程序池标识设置为本地系统，以便网站获得权限。

要在 IIS7 中找到您的 IUSR（也称为匿名用户），请在 IIS 中的“功能视图”中打开您的网站，然后转到“身份验证”并编辑“匿名身份验证”。

# css - 浮动内容下的粘性页脚

> ID：12893031
> 
> 赞同：0
> 
> 时间：2012-10-15T09:44:22.283
> 
> 标签：css, footer, sticky-footer

我有一个页面，其中内容浮动在中心，因此在任何浏览器大小中，内容 div 将始终在中间砰砰作响。

现在，我继续在页面中添加了一个粘性页脚，但是当浏览器窗口小于预期时，页脚会显示在浮动内容的前面。

我不完全了解清除浮动的工作原理或绝对定位如何影响相对定位。我知道一旦我将页脚设为绝对，它就会独立于所有其他 div，这自然不是我想要的，但这就是我卡住的地方。

我的问题是，如何使粘性页脚显示在页面底部，但如果浏览器屏幕的高度较小，则保持在浮动内容下方（我的意思是下方）。

**这是我当前代码的示例：http: [//jsfiddle.net/ySru9/1/](http://jsfiddle.net/ySru9/1/)**

我从这里获取了粘性页脚代码：[http](http://www.cssstickyfooter.com/style.css) ://www.cssstickyfooter.com/style.css和这里[http://ryanfait.com/sticky-footer/layout.css](http://ryanfait.com/sticky-footer/layout.css)

如果这是关于 SO 的另一个问题的重复，我很抱歉，但我已经翻遍了，找不到任何相同的东西。我假设有一些我需要深入研究的令人讨厌的 jquery 东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:40:07.327

如果你让页脚在你的身体中绝对定位，但确保身体的最小高度大于你的黄色容器，这可能会起作用：

[http://jsfiddle.net/willemvb/PZHvH/](http://jsfiddle.net/willemvb/PZHvH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:04:00.947

尝试使用：

```
#container 
{
  margin: 0 0 0 -100px;
  position: relative;    
}​ 
```

检查这个小提琴：http: [//jsfiddle.net/ySru9/39/](http://jsfiddle.net/ySru9/39/)

# html - 当客户填写表格时，如何向网站所有者设置短信提醒？

> ID：12893033
> 
> 赞同：1
> 
> 时间：2012-10-15T09:44:28.780
> 
> 标签：html, sms

当网站访问者在其网站上填写表格时，一直在研究如何直接向网站所有者（我们的客户）电话设置 SMS 警报。显然，我们很高兴与提供商签约并为每条消息支付几美分 - 没想到这是一项免费赠品服务。

*您从这项交易中获得的很多谷歌结果都是*通过向许多收件人发送大量短信而得到的，这不是我们在这里看到的。

那么通过 HTML 和简单脚本实现这一目标的最简单的小规模方法是什么？

[这篇 daniweb 论坛帖子](http://www.daniweb.com/web-development/coldfusion/threads/16344/send-a-text-message-to-your-phone-from-your-site#)提供了使用 Coldfusion 的清晰简单的说明，这很好，但由于它已经 7 年了，我们想知道事情是否已经发展，是否有更好的建议？

我们很乐意通过 ASP.NET 或 PHP 或其他方式编写非常简单的脚本，但希望保持轻量级，因为这是一个属于小型企业的非常简单的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:22:33.553

我正在为我的公司做类似的事情。

我们使用 GSM 调制解调器，例如： ZTE MF668A 它是一个 USB 适配器，您可以插入 SIM 卡。我们购买了仅 SMS 的计划，每月 15 美元，您可以无限发送 SMS。但是，设置可能比仅使用批量 SMS 服务要复杂一些。您可以在装有 GSM 调制解调器的计算机上设置 Diafaan SMS 服务器 (http://www.diafaan.com/) 以接收特定域的电子邮件。（例如我们的是@sms.com）。我们的交换服务器将电子邮件转发到 Diafan 服务器。Diafaan 将接收电子邮件并将其转换为 SMS 并使用 GSM 调制解调器发送。

在您的 php 代码中，您可以使用 PHPMailer (http://phpmailer.worxware.com/) 构建电子邮件并将邮件地址设置为@sms.com。

你使用它是这样的：

```
ini_set("sendmail_from","user@company.com");
ini_set("SMTP","smtp.company.com");

require("PHPMailer/class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();                                      // set mailer to use SMTP
$mail->Host = "smtp.company.com";  // specify main and backup server
$mail->SMTPAuth = false;     // turn on SMTP authentication
//$mail->Username = "name";  // SMTP username
//$mail->Password = "password"; // SMTP password

$mail->From = "user@company.com";
$mail->FromName = $salesPerson;
$mail->AddAddress("user2@company.com", "Pricing");
$mail->AddReplyTo("user@company.com", "User2");
$mail->AddBcc($salesPersonEmail, $salesPerson);

$mail->WordWrap = 50;                                 // set word wrap to 50 characters
$mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = $subject;
$mail->Body    = $body;

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
} 
```

还有一些公司提供 SMS 服务，例如 PCSMS，您每月可以付费获得 100 条 SMS。然后您只需构建一封电子邮件并将其发送到@pcsms.com.au。这可能是最简单的方法，也是我们过去的方法，但我们现在的方法要便宜得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:48:37.960

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

虽然您可以设置 GSM 调制解调器来发送 SMS 消息，但使用 SMS API 可能更容易（并且取决于您的使用情况，更便宜）。这里有一些提供者——定价是每条消息的美分（取决于 API 和目的地，但徘徊在一两美分左右）。您可能需要提供一个虚拟号码 - 定价通常为每月美元（同样，取决于 API 和目的地，徘徊在一两美元左右）。

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

如果您要进行国际发送，我认为您最好的是 Nexmo。或者，如果您将来需要接受传入的消息，Nexmo 的定价模型将帮助您。

所有三个 API 都是直接的 REST/HTTP API - 只要您在服务器端使用的任何语言都可以发出 Web 请求，您就应该能够发送 SMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:24:35.567

最终我们使用[了 Esendex](https://www.esendex.co.uk/)。他们提供了良好的支持、体面的代码示例和大量的免费试用版（事实上，当我们提出要求时，他们很乐意延长试用期）。

# javascript - 如何管理客户端 JavaScript 依赖项？

> ID：12893046
> 
> 赞同：96
> 
> 时间：2012-10-15T09:45:21.213
> 
> 标签：javascript, npm, coffeescript, dependency-management

尽管有很好的解决方案来管理服务器端的依赖项，但我找不到任何能满足我所有需要的解决方案，即拥有一个连贯的客户端 JavaScript 依赖项管理工作流程。我想满足这5个要求：

1.  以类似于 npm 的[package.json](http://package.json.jit.su/)或[bower](http://bower.io/)的格式管理我的客户端依赖项`bower.json`
2.  `dependency.json`对于鲜为人知的库，它应该可以灵活地指向我的文件中的 git repo 或实际的 js 文件（在网络上或本地） （npm 让您指向 git repos）
3.  它应该将所有库缩小并命名为单个文件，如[ender](http://ender.jit.su/) - 这是我需要`<script>`在客户端的标签中放入的唯一 js 文件
4.  [它应该对像 BoxJS 4](http://boxjs.com/)这样的 CoffeeScript 提供开箱即用的支持（现在已经死了）
5.  在浏览器中，我应该可以使用任一[require](http://requirejs.org/)样式：

    ```
    var $ = require('jquery');
    var _ = require('underscore'); 
    ```

    或者更好的是，做[headjs](http://headjs.com/)风格：

    ```
    head.js(['jquery', 'underscore', 'mylib'], function($, _, mylib) {
      // executed when all libraries are loaded
    }); 
    ```

如果不存在这样的单一工具，那么工具的最佳组合是什么，即我可以使用诸如[volo](http://volojs.org/)（或[grunt](http://gruntjs.com/)）之类的工具链？

我已经研究了我在这里链接的所有工具，它们最多只能满足我的三个要求。因此，请不要再次发布有关这些工具的信息。我只会接受一个提供满足我所有 5 个要求的单个工具的答案，或者如果有人发布了多个此类工具的工具链的具体工作流/脚本/工作示例，这些工具也满足我的所有要求。谢谢你。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-20T01:15:03.613

[require.js](http://requirejs.org/)做你需要的一切。

我对**[这个](https://stackoverflow.com/questions/14958504/rich-app-development-with-node-js/14958848#14958848)**问题的回答可能会对你有所帮助

例子：

*客户端应用项目层次结构：*

```
sampleapp
    |___ main.js
    |___ cs.js
    |___ require.js 
```

**main.js**是您初始化客户端应用程序并配置 require.js 的地方：

```
require.config({
    baseUrl: "/sampleapp",
    paths: {
        jquery: "libs/jquery", // Local
        underscore: "http://underscorejs.org/underscore-min.js", // Remote
        backbone: "https://github.com/documentcloud/backbone/blob/master/backbone-min.js" // Remote on github
    },
    shim: {
        backbone: {
            deps: ["underscore", "jquery"] // Backbone depends on jquery and underscore
        }
    }
});

require(["cs!someCoffeescriptFile", "jquery", "backbone", "underscore"], function (SomeCoffeescriptFile, $, Backbone, _) {
    // Dependencies are loaded...
    // Execute code
}); 
```

当以“cs！”开头时，依赖项将使用[cs插件。](http://requirejs.org/docs/download.html#cs)cs 插件编译咖啡脚本文件。

[当你进入 prod 时，你可以使用r.js](https://github.com/jrburke/r.js/)预编译你的整个项目。

```
node ./node_modules/requirejs/bin/r.js -o buildclientconfig.js 
```

以下是您的要求：

*   以类似于 npm 的 package.json 或 bower 的 component.json 的格式管理我的客户端依赖项。**不同但一样好！**

*   对于鲜为人知的库（npm 让您指向 git repos），我应该可以灵活地在我的 dependency.json 文件中指向 git repo 或实际的 js 文件（在 web 上或本地）。**是的**

*   它应该将所有库缩小并命名为单个文件，如 ender - 这是我需要放入客户端脚本标签的唯一 js 文件。**是**的 r.js。

*   它应该对像 Box 这样的咖啡脚本有开箱即用的支持。**是的**

*   在浏览器中，我可以使用 require 样式或 headjs。**是的**

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-15T09:52:21.513

[http://requirejs.org/](http://requirejs.org/)是你要找的我相信

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-25T12:46:33.497

作为@Guillaume86，我认为下摆会让你最接近你想去的地方。

在 hem 中，使用 npm 和 hem 的组合来管理依赖项。使用 npm 显式安装所有项目的外部依赖项。使用 hem 指定哪些依赖项（外部和本地）应该为您的客户端操作缝合在一起。

我创建了一个框架项目，这样你就可以看到它是如何工作的 - 你可以在[https://github.com/dsummersl/clientsidehem看到它](https://github.com/dsummersl/clientsidehem)

## 添加依赖项

使用 npm 搜索特定的依赖项，然后修改 package.json 文件以确保将来跟踪该依赖项。然后在 slug.json 中为您的应用程序指定依赖项。

例如，假设您想添加 coffee-script 依赖项。只需使用 npm 安装依赖项并将其保存到您的 package.json 文件中：

```
1\. npm --save install coffee-script
2\. Manually edit the slug.json file. Add "coffee-script" to "dependencies". 
```

假设你想包含你自己的模块 'bloomfilters' 并且它不在 npm 注册表中。您可以通过以下方式将其添加到您的项目中：

```
1\. npm --save install https://github.com/dsummersl/bloomfilters/tarball/master
2\. Manually edit the slug.json file. Add "bloomfilters" to "dependencies". 
```

### 本地模块

如果您想包含自己的咖啡或 javascript，您可以通过将这些文件添加到 app/ 文件夹来实现。请注意，为了通过 'require' 方法公开您的脚本，您必须将其设为 CommonJS 模块。这非常简单 - 请参阅[hem 文档](http://spinejs.com/docs/hem)。

### 本地文件

如果您想包含非 CommonJS 非“需要”代码，您还可以通过 slug.json 中的“库”列表引用您的自定义 javascript 或咖啡脚本来缝合它。

### CSS

如果你愿意，下摆也会将你的 CSS 缝合在一起。请参阅[下摆文档](http://spinejs.com/docs/hem)。

## 建造

列出依赖项后，您可以使用 hem 将它们拼接在一起。

```
# make sure all dependencies are present:
npm install .
# make public/application.js
hem build
# see your minified js in public/application.js 
```

## 笔记

Hem 是为[spinjs](http://spinejs.com)项目设计的——但你不必为此使用它。根据需要忽略任何提及脊椎的文档...

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-18T10:28:23.190

好吧，我很惊讶没有人提到[Browserify](https://github.com/substack/node-browserify)。

1.  支持 package.json 格式
2.  在下面使用 npm，它可以使用 github（或任何 git）repo 作为包源
3.  将所有依赖项缩小并连接到一个文件中。
4.  如果您将其包含在依赖项中，则支持咖啡脚本
5.  一路需要风格。
6.  支持源地图

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-18T13:13:19.367

我很确定[Hem](https://github.com/spine/hem)满足您的要求（我使用带有附加编译器的个人叉子 - 玉石和手写笔 - 很容易根据您的需要进行定制）。它使用 npm 来管理依赖关系。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-18T07:02:52.693

您可能想看看**[Yeoman](http://yeoman.io/)**，它使用多种技术来帮助您满足您的要求。

> 我们的工作流程由三个工具组成，用于在构建 Web 应用程序时提高您的生产力和满意度：[yo](https://github.com/yeoman/yo)（脚手架工具）、[grunt](http://gruntjs.com/)（构建工具）和[bower](http://twitter.github.com/bower/)（用于包管理）。

内置对 CoffeeScript、Compass 等的支持。适用于 r.js ( [RequireJS](http://requirejs.org/docs/optimization.html) )、单元测试等。

至于你的要求：

1.  Bower 用于依赖管理
2.  Bower 可以处理本地文件、git://、http:// 等
3.  对缩小和连接的内置支持（即使是您的图像）
4.  内置支持自动编译 CoffeeScript 和 Compass（使用 LiveReload）
5.  如构建过程中所述：*如果您使用的是 AMD，我将通过 r.js 传递这些模块，因此您不必这样做。*

所有功能：

> **闪电般的脚手架**— 使用可自定义的模板（例如 HTML5 Boilerplate、Twitter Bootstrap）、RequireJS 等轻松构建新项目。
> 
> **伟大的构建过程**——你不仅得到了缩小和连接；我还优化了您的所有图像文件、HTML、编译您的 CoffeeScript 和 Compass 文件，如果您使用 AMD，我将通过 r.js 传递这些模块，这样您就不必这样做了。
> 
> **自动编译 CoffeeScript 和 Compass** — 我们的 LiveReload 监视进程会自动编译源文件并在您进行更改时刷新您的浏览器，这样您就不必这样做了。
> 
> **自动检查您的脚本**——您的所有脚本都会自动针对 JSHint 运行，以确保它们遵循语言最佳实践。
> 
> **内置预览服务器**——不再需要启动您自己的 HTTP 服务器。我的内置一个可以只用一个命令来触发。
> 
> **很棒的图像优化**——我使用 OptiPNG 和 JPEGTran 优化了你的所有图像，这样你的用户就可以花更少的时间下载资源，而有更多的时间使用你的应用程序。
> 
> **杀手包管理**——需要依赖吗？只需按一下键即可。我允许您通过命令行轻松搜索新包（例如，`bower search jquery），安装它们并保持更新，而无需打开浏览器。
> 
> **PhantomJS 单元测试**——通过 PhantomJS 在无头 WebKit 中轻松运行单元测试。当您创建一个新应用程序时，我还会为您的应用程序添加一些测试脚手架。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-23T09:44:18.710

[Bower](https://github.com/twitter/bower)可能满足您的需求 (1) 和 (2)，其余的您需要 requirejs。从自述文件：

```
Bower is a package manager for the web. Bower lets you easily install assets such as images, CSS and JavaScript, and manages dependencies for you. 
```

要安装软件包：

```
bower install jquery
bower install git://github.com/maccman/package-jquery.git
bower install http://code.jquery.com/jquery-1.7.2.js
bower install ./repos/jquery 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-18T19:36:51.457

查看[Jam 包管理器](http://jamjs.org/)。以下是其主页的描述

> 对于渴望可维护资产的前端开发人员，Jam 是 JavaScript 的包管理器。与其他存储库不同，我们将浏览器放在首位。

它的工作方式似乎与 npm 非常相似。

安装包如下

```
jam install backbone 
```

通过执行使包保持最新

```
jam upgrade
jam upgrade {package} 
```

优化生产包

```
jam compile compiled.min.js 
```

可以在`package.json`文件中添加 Jam 依赖项。

如需完整文档，请阅读[Jam 文档](http://jamjs.org/docs)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-07T13:47:40.783

我刚刚遇到了[inject.js](http://www.injectjs.com/)

来自[项目站点](http://www.injectjs.com/)的一些功能：

> Inject (Apache Software License 2.0) 是一种以与库无关的方式管理依赖项的革命性方法。它的一些主要功能包括：
> 
> *   浏览器中的 CommonJS 合规性（导出。*）
> *   查看完整的 CommonJS 支持矩阵
> *   文件的跨域检索（通过easyXDM）
> *   localStorage（加载一个模块一次）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-19T15:14:11.773

有几个选项：

*   [http://browserify.org/](http://browserify.org/)允许您导入模块
*   [RequireJS](http://requirejs.org/)解决了同样的问题
*   似乎正在积极开发的一个是[JoinJS](https://github.com/olegp/joinjs)

[组件](http://component.jit.su/)可能也很有趣，它本身并不管理依赖项，但允许您使用其他大型库的切碎版本。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-21T02:28:09.307

我将 hem 与 npm 一起使用，并且我想添加一些我认为目前尚未涵盖的额外好处。

*   Hem 有一个独立的 Web 服务器 (strata)，因此您可以开发您的代码，甚至无需重新编译。`hem build`除非我发布应用程序，否则我从不使用。
*   使用 hem 不需要使用 Spine.js，只要正确设置了 slug.json，就可以使用它来编译任意的 coffeescript 包。这是我使用 cakefile 自动编译的软件包之一：[https ://github.com/HarvardEconCS/TurkServer/tree/master/turkserver-js-client](https://github.com/HarvardEconCS/TurkServer/tree/master/turkserver-js-client)
*   说到上面，hem 允许你使用 npm link 链接本地系统上的其他依赖项，并且即使在使用 Strata 服务器时也可以无缝地组合它们。事实上，你甚至不需要使用`cake`上面的方法，你可以直接从依赖项目中链接到咖啡脚本。
*   Hem 支持`eco`（嵌入式 Coffeescript）视图和 Stylus 用于 CSS，并将所有这些与您的 Coffeescript 一起编译成一个 JS 和一个 CSS 文件。

这是设置 Spine、hem、coffeescript 应用程序的基本列表。随意忽略 Spine 部分。事实上，有时我会`spine app`为非 Spine 应用程序设置目录结构，然后编辑`slug.json`以更改为不同的编译结构。

1.  安装 NPM:`curl http://npmjs.org/install.sh | sh`在 *nix 系统上。我假设它可以从命令行获得。
2.  全局安装下摆 ( `npm install -g hem`)。开发最近已经分支，因此您可能希望直接从 github ( [https://github.com/spine/hem](https://github.com/spine/hem) ) 中获取它，签出一个分支，然后`npm install -g .`在该文件夹中。
3.  `npm install -g spine.app`将使脊柱作为全局命令可用
4.  `spine app folder`将创建一个名为`app`in的 Spine 项目`folder`，生成正确的目录结构和一堆骨架文件以开始使用。
5.  `cd`文件夹并编辑`dependencies.json`您需要的库。添加它们，`slug.json`以便下摆也知道在哪里可以找到它们。
6.  可选：`npm link`任何你正在开发的本地包`node_modules`，你可以将它们添加到`slug.json`hem （`index.js`直接包含或者`index.coffee`如果你想要 hem 编译它。）
7.  `npm install .`下载您刚刚输入的所有依赖项。
8.  如果您查看默认的主干配置，您可以从依赖项中`app/lib/setup.coffee`找到您`require`需要的所有库。例子：

    ```
    # Spine.app had these as dependencies by default
    require('json2ify')
    require('es5-shimify')
    require('jqueryify')

    require('spine')
    require('spine/lib/local')
    require('spine/lib/ajax')
    require('spine/lib/manager')
    require('spine/lib/route')

    # d3 was installed via dependencies.json
    require 'd3/d3.v2' 
    ```

9.  在`index.coffee`中，您只需`require lib/setup`加载应用程序的主控制器。此外，您需要`require`那些其他控制器中的任何其他类。您可以使用`spine controller something`或`spine model something`为控制器和模型生成模板。使用节点的典型 Spine 控制器如下所示`require`：

    ```
    Spine = require('spine')
    # Require other controllers
    Payment = require('controllers/payment')

    class Header extends Spine.Controller
      constructor: ->
        # initialize the class

      active: ->
        super
        @render()

      render: ->
        # Pull down some eco files
        @html require('views/header')   

    # Makes this visible to other controllers    
    module.exports = Header 
    ```

10.  生成的默认值`index.html`通常可以很好地加载您的应用程序，但可以根据需要进行修改。根据您的要求，它只引入`js`一个`css`文件，您无需修改​​。

11.  根据需要在`css`文件夹中编辑您的触控笔文件。它比 CSS 灵活得多 :)
12.  从开始`folder`，运行`hem server`以启动 hem 服务器，然后导航`localhost:9294`以查看您的应用程序。（如果你全局安装了 hem。）它有一些隐藏的参数，例如`--host 0.0.0.0`监听所有端口。
13.  使用适当的 MVC 技术构建应用程序的其余部分，并使用 stylus 获取 CSS 和 eco 获取视图。或者根本不使用 Spine，hem 仍然可以很好地与 Coffeescript 和 npm 一起使用。有许多使用这两种模型的项目示例。

还有一件事：通常，`hem server`当您更新代码和保存文件时，它会自动更新，这使得调试变得轻而易举。运行`hem build`会将您的应用程序编译成两个文件，`application.js`分别是 . 和`application.css`. 如果您`hem server`在此之后运行，它将使用这些文件并且不再自动更新。`hem build`因此，在您真正需要应用程序的缩小版本进行部署之前，请不要这样做。

其他参考：[Spine.js & hem 入门](https://stackoverflow.com/questions/11561014/spine-js-hem-getting-started)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-09-30T06:15:58.933

这是一个采用非常不同方法的解决方案：将所有模块打包成一个 JSON 对象，并通过读取和执行文件内容来获取模块，而无需额外请求。

纯客户端演示实现：[http ://strd6.github.io/editor/](http://strd6.github.io/editor/)

[https://github.com/STRd6/require/blob/master/main.coffee.md](https://github.com/STRd6/require/blob/master/main.coffee.md)

**STRd6/require**取决于在运行时是否有可用的 JSON 包。该`require`函数是为该包生成的。该包包含您的应用程序可能需要的所有文件。没有进一步的 http 请求，因为包捆绑了所有依赖项。这与客户端上的 Node.js 样式要求非常接近。

包的结构如下：

```
entryPoint: "main"
distribution:
  main: 
    content: "alert(\"It worked!\")"
  ...
dependencies:
  <name>: <a package> 
```

与 Node 不同，包不知道它的外部名称。这取决于 pacakge 包括依赖项来命名它。这提供了完整的封装。

鉴于所有这些设置，这里有一个从包中加载文件的函数：

```
loadModule = (pkg, path) ->
  unless (file = pkg.distribution[path])
    throw "Could not find file at #{path} in #{pkg.name}" 

  program = file.content
  dirname = path.split(fileSeparator)[0...-1].join(fileSeparator)

  module =
    path: dirname
    exports: {}

  context =
    require: generateRequireFn(pkg, module)        
    global: global
    module: module
    exports: module.exports
    PACKAGE: pkg
    __filename: path
    __dirname: dirname

  args = Object.keys(context)
  values = args.map (name) -> context[name]

  Function(args..., program).apply(module, values)

  return module 
```

这个外部上下文提供了一些模块可以访问的变量。

一个`require`函数暴露给模块，因此它们可能需要其他模块。

还公开了其他属性，例如对全局对象的引用和一些元数据。

最后，我们在模块和给定的上下文中执行程序。

对于那些希望在浏览器中使用同步 node.js 样式的 require 语句并且对远程脚本加载解决方案不感兴趣的人，这个答案将是最有帮助的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-01-14T02:08:27.060

如果您在后端使用 node/express，请查看[cartero 。](https://github.com/rotundasoftware/cartero)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-02-22T19:35:57.270

我建议查看似乎满足您大部分要求的[dojo 工具包。](http://dojotoolkit.org)我不确定的是 CoffeeScript。

dojo 使用以异步模块定义 (AMD) 格式编写的模块。它有一个包含包的构建系统，您可以将它们聚合到一个或多个文件（称为层）中。显然它接受 git 类型的存储库，这里有关于构建系统的更多细节：

[http://dojotoolkit.org/documentation/tutorials/1.8/build/](http://dojotoolkit.org/documentation/tutorials/1.8/build/)

根据记录，v1.9 beta 预计下个月。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-11-16T07:27:04.973

另一个满足我最近发布的所有标准的框架：http: [//duojs.org/](http://duojs.org/)（并且还支持将 CSS 等其他资源视为依赖项）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-12-25T01:04:25.367

与requirejs相比，异步加载+browserify的依赖注入将是另一个不错的选择

[没有 AMD 的异步前端依赖管理](http://bearcatjs.org/2014/12/24/asynchronous-frontend-dependency-management-without-AMD/)

# android - 订阅的“未找到项目”应用内计费

> ID：12893047
> 
> 赞同：0
> 
> 时间：2012-10-15T09:45:22.500
> 
> 标签：android

我正在为订阅进行应用内计费，我按照开发者文档中提到的所有步骤进行操作。我还测试了应用内计费及其工作正常。但是当我将其更改为订阅时，它会出现错误。

```
E/Volley(1384): [157] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=subs:com.test.app:subscription_monthly 
```

我可以把产品 id 放在 Managed 中吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:30:05.907

我认为（我已经注意到）订阅测试项目（由谷歌为测试目的制作）不起作用。只有正常的购买、取消、退款才真正起作用

# php - 如何将多个动态生成的文本框值存储到codeigniter中的数组中？

> ID：12893049
> 
> 赞同：2
> 
> 时间：2012-10-15T09:45:31.757
> 
> 标签：php, arrays, codeigniter, dynamic, textbox

请帮忙，

我有一个动态生成文本框的表单。例如：

```
 on |button| click
           |textbox 1|
           |textbox 2|
           |textbox 3|
           |textbox 4|
           .
           .
           .
           |textbox n|

           |submit| 
```

其中文本框的 id 保持自动递增，而名称保持不变。我需要的是，当我提交表单时，生成的文本框的值必须存储在一个数组中，然后将该数组存储在数据库中。如何使用 codeigniter 将动态生成的文本框值存储到单个数组中？我是codeigniter的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:56:15.683

您也应该增加名称。然后接收 POST 的脚本会生成一个看起来像你想要的东西的数组。然后你可以使用“serialzie($array)”来创建数组的字符串版本。这应该在数据库中存储。然后你可以使用“unserialze($string)”来取回你的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:58:16.113

我会为 jQuery 使用 ajaxSubmit 插件：[Link](http://www.malsup.com/jquery/form/)
它将所有表单元素发送到表单的操作 url。$_POST 数组结构为：array("element_name"=>element_data)。
如果您像您一样有多个文本框，并且将它们命名为数组：
`<input type='text' name='textbox[]'>`插件会将它们以数组的形式发送到帖子内部。第一个文本框将是`$_POST['textbox'][0]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:59:02.063

查看文件

```
<?php
     for($i=1;$i<10;$i++) { ?>
         <textarea name="texta[<?php echo $i;?>]"></textarea>
     <?php } ?> 
```

捕获表单的控制器

```
$array_of_textboxes = $this->input->post('texta'); 
```

然后你的文本框值在数组中

如果你的 html 是，你可以有一个没有键的数组

```
<textarea name="texta[]"></textarea> 
```

# javascript - 使用 Dojo 防止 Opera 的选择文本/双击左键菜单

> ID：12893050
> 
> 赞同：0
> 
> 时间：2012-10-15T09:45:32.763
> 
> 标签：javascript, select, dojo, opera, double-click

> **可能重复：**
> [禁用 Opera 中元素的双击事件](https://stackoverflow.com/questions/7203286/disable-doubleclick-event-for-an-element-in-opera)

我的 Opera 浏览器有问题。它只是在双击左键/选择时显示上下文菜单的唯一一个。我的 div 页面是空的（背景图片）。他们已经挂钩了 click 和 contextmenu 事件，当您单击时 click 工作正常*slow*。如果您单击两次更快的文本会被选中。我观察到的可能主要原因是使用*inline-block*，只是因为将整体视为一行。这是示例代码：

```
<!doctype html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8/dojo/dojo.js" data-dojo-config="async: 1"></script>
    </head>
    <body>
        <div style="display: inline-block;">
        <table>
            <tr>
                <th colspan="3">Header</th>
            </tr>
            <tr>
                <td></td>
                <td>
                <div id="test" style="height: 38px; width: 38px; background: red;">
                </div>
            </td>
            <td></td>
        </tr>
      </table>
    </div>
    <div style="display: inline-block;">
      <table>
            <tr>
                <th colspan="3">Header</th>
            </tr>
            <tr>
                <td></td>
                <td>
                <div id="test" style="height: 38px; width: 38px; background: red;">
                </div>
            </td>
            <td></td>
        </tr>
      </table>
    </div>
    </body>
</html>
<script type="text/javascript">
require(["dojo/dom", "dojo/on","dojo/domReady!"], function(dom, on) {
    on(dom.byId('test'), 'click', function() { /* do something here */ return false; });
});
</script> 
```

是否可以防止它，留下*inline-block*？如果可能的话，我对 Dojo 的解决方案特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:35:01.080

我怀疑这与您的代码以及 Opera 的默认设置无关。

这是一篇关于如何[在双击时禁用上下文菜单](http://twigstechtips.blogspot.com/2011/06/opera-disable-context-menu-on-double.html)的文章。显然，这并不能解决您的问题，因为它是您无法控制的客户端设置。

# postgresql - 存储关键数据的新模式？

> ID：12893051
> 
> 赞同：0
> 
> 时间：2012-10-15T09:45:33.267
> 
> 标签：postgresql, database-design, database-schema

我正在尝试找到在应用程序中标记关键数据的解决方案。一个明显的想法是创建一个像“不可移动”这样的标志，但我想避免将同一列添加到 db 中的许多表中。所以我有了创建新模式的想法，我可以在其中存储这些日期。在这个模式中，我想保持公共中存在的所有表都具有相同的约束。我发现了几个优点：

*   我可以撤销整个架构的删除权限，并只允许从公共架构中删除数据（对应用程序而言并不重要），
*   我可以快速准备新版本的数据库进行测试 - 通过截断公共模式中的所有内容（在第二个中我只有关键数据），
*   我通过而不是规则执行 SELECT 和其他操作，显示来自两个模式的数据并添加一个标记数据来源的虚拟列（仅在视图中），
*   我不必在应用程序的配置中存储行的 ID，
*   我有数据的逻辑分离（基本的和用户添加的）

这是个好主意吗？你觉得这有什么问题吗？这是一个好习惯吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:25:02.547

如果您要这样做，简单的方法是使用表继承使其对 select 语句透明，并保持写入按规则重定向。这是完成表分区的方式，但在这种情况下，您可以根据不同权限的需要进行分区，而不是键。

# asp.net - 403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面

> ID：12893052
> 
> 赞同：15
> 
> 时间：2012-10-15T09:45:33.553
> 
> 标签：asp.net, c#-4.0, web-config

我有我的网站。我第一次可以成功登录。

默认地址：

```
www.abc.com 
```

我在浏览器上输入了这个并重定向到我的登录页面：

```
www.abc.com/pages/landingpage.aspx 
```

我输入了我的登录凭据并登录到该站点。

一段时间后，我打开一个新标签并输入我的网站地址

```
www.abc.com 
```

现在它给了我一个错误：

> 403 - 禁止：访问被拒绝。
> 您无权使用您提供的凭据查看此目录或页面。

整个故事是这样的：如果我没有登录我的网站，那么我可以打开我的网站数量的标签和浏览器。但是**一旦我登录我的网站，我就会收到上面的错误**。

```
 <authentication mode="Forms">
  <forms name="MMFormAUTH" loginUrl="Pages/LandingPage.aspx" defaultUrl="Pages/LandingPage.aspx" timeout="60" protection="All" slidingExpiration="true" enableCrossAppRedirects="false" requireSSL="false" />
</authentication>
<authorization>
  <deny users="?" />
</authorization>
<sessionState cookieless="false" cookieName="abc" mode="InProc" timeout="60">
</sessionState>
<httpRuntime maxRequestLength="1000240" executionTimeout="120" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T10:05:16.423

试试这个

```
 <allow  users="?" /> 
```

现在您正在使用`<deny users="?" />`这意味着您不允许经过身份验证的用户使用您的网站。

[授权元素](http://msdn.microsoft.com/en-us/library/8d82143t%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T20:07:16.297

我有同样的问题。事实证明，我没有指定默认页面，也没有任何以默认页面约定命名的页面（default.html、defult.aspx 等）。结果，ASP.NET 不允许用户浏览目录（在允许您查看目录的 Visual Studio 内置 Web 服务器中不是问题）并显示错误消息。为了解决这个问题，我在 Web.Config 中添加了一个默认页面，它可以正常工作。

```
<system.webServer>
    <defaultDocument>
        <files>
            <add value="myDefault.aspx"/>
        </files>
    </defaultDocument>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T20:46:59.840

如果您在项目中使用 MVC，则必须使用：

```
routes.IgnoreRoute(""); 
```

更多在这里。

[ASP.NET MVC 不提供默认文档](https://stackoverflow.com/questions/2422542/asp-net-mvc-not-serving-default-document)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-01T04:07:39.343

如果你有一个类名和一个具有匹配名称的文件夹，你可以在 Asp.net MVC5 中得到相同的错误示例：如果你有类土地，当你想查看 view/lands/index.cshtml 文件时，如果你也有名称为“lands”的文件夹在第一次尝试 lands 文件夹时会出现错误

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-31T19:59:35.487

**Azure VM 中最近 .Net 4.7 MVC/webform 应用程序托管中的 404 Forbidden 解决方案** 我们需要安装 .Net 4.7 以及除 .Net 4.7/版本功能以外的服务器角色的可扩展性和开发，如下所示： **这可能已经被激活** [.Net 激活功能](https://i.stack.imgur.com/IuQ29.jpg)

我们还需要在**IIS webserver 角色下添加以下内容-> 应用程序开发 -> 选择 .Net 版本如下** 图在应用程序开发下激活 IIS 网络服务器角色 [服务器角色激活下的所需角色](https://i.stack.imgur.com/hMrJN.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-27T15:05:33.723

就我而言，问题是新站点隐含拒绝所有 IP 地址，除非创建了显式允许。修复：在功能视图中的站点下：在 IIS 部分 > IP 地址和域限制 > 编辑功能设置 > 将“未指定客户端的访问权限：”设置为“允许”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-11T06:52:54.093

```
<configuration>
 <location path="Path/To/Public/Folder">
  <system.web>
     <authorization>
        <allow users="?"/>
     </authorization>
  </system.web>
 </location>
</configuration> 
```

# magento - Magento 选择产品过滤器

> ID：12893054
> 
> 赞同：2
> 
> 时间：2012-10-15T09:45:37.267
> 
> 标签：magento

嗨，我有一个选择产品的脚本。但它选择了制造商为 3,5 的所有产品。它工作正常，但我想选择尚未填写现场制造商的产品。我怎样才能做到这一点？

```
$collection = Mage::getModel('catalog/product')->getCollection()
->addAttributeToFilter('manufacturer', array(3,5))
->addAttributeToSelect('*'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:31:15.197

```
Mage::getModel('catalog/product')->getCollection()
    ->addFieldToFilter(
        array(
            array(
                'attribute' => 'manufacturer',
                'null' => 'null' //this value don't matter
            )    
         )
     )
    ->addAttributeToSelect('*'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:20:58.700

使用`null`运算符：

```
$collection = Mage::getModel('catalog/product')->getCollection()
  ->addAttributeToFilter('manufacturer', 'null')
  ->addAttributeToSelect('*'); 
```

或`equals`运营商：

```
$collection = Mage::getModel('catalog/product')->getCollection()
  ->addAttributeToFilter('manufacturer', array('eq' => ''))
  ->addAttributeToSelect('*'); 
```

# c++ - 为使用 PowerVR 的 Omap4 开发 EGL 应用程序

> ID：12893060
> 
> 赞同：1
> 
> 时间：2012-10-15T09:46:09.507
> 
> 标签：c++, opengl-es, egl, omap, pandaboard

我有 Pandaboard，我在 OMAP4 上处理 PowerVR 支持，我已经成功地尝试了 Imagination Examples。但我想知道，如何在我的主机上将我自己的代码和开发应用程序编写到 Pandaboard 或 Omap4 上，这样交叉编译？

解决方案是PowerVR SDK吗？又怎样？

注意：Ubuntu 11.10 在 Pandaboard(armhf) 上运行。Ubuntu 12.04 在 HostMachine(x86) 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:50:30.520

是的，您需要 ARM 的跨工具链。PowerVR SDK 只是用于在目标平台（头文件/库/驱动程序/示例）上使用 OpenGL ES 的 SDK。

# php - 用递归简化这个方法

> ID：12893061
> 
> 赞同：2
> 
> 时间：2012-10-15T09:46:16.740
> 
> 标签：php, recursion

我需要通过递归来简化此方法以消除重复的业务逻辑，但我无法弄清楚如何做到这一点：

```
public function compute()
{
    $ret = array();
    foreach ($this->_items as $item) {
        $ret[] = array($item);
    }
    foreach ($this->_items as $item) {
        foreach ($this->_items as $item2) {
            $tmp = array($item, $item2);
            if (count($tmp) === count(array_unique($tmp))) {
                $ret[] = $tmp;
            }
        }
    }
    foreach ($this->_items as $item) {
        foreach ($this->_items as $item2) {
            foreach ($this->_items as $item3) {
                $tmp = array($item, $item2, $item3);
                if (count($tmp) === count(array_unique($tmp))) {
                    $ret[] = $tmp;
                }
            }
        }
    }
    return $ret;
} 
```

编辑：

这个方法应该返回数组元素的所有组合，所以如果你有这样的数组：

```
[a, b, c] 
```

它将返回：

```
[
    [a],
    [b],
    [c],
    [a, b],
    [a, c],
    [b, a],
    [b, c],
    [a, b, c],
    [a, c, b],
    [b, a, c],
    [b, c, a],
    [c, a, b],
    [c, b, a]
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:54:04.343

对于您的计算，不需要递归来简化您在这里所说的业务逻辑。至少一开始不会。将重复的代码移动到它自己的函数中然后进行处理就足够了。

由于您在这里的执行顺序，我还建议将此作为第一步：

```
public function compute()
{

    $ret = array();

    foreach ($this->_items as $item) {
        $ret[] = array($item);
    }

    $each = function(array $tmp) use (&$ret) {
        if (count($tmp) === count(array_unique($tmp))) {
            $ret[] = $tmp;
        }
    }

    foreach ($this->_items as $item) {
        foreach ($this->_items as $item2) {
            $each(array($item, $item2));
        }
    }

    foreach ($this->_items as $item) {
        foreach ($this->_items as $item2) {
            foreach ($this->_items as $item3) {
                $each(array($item, $item2, $item3));
            }
        }
    }

    return $ret;
} 
```

# tomcat - 如何在 Tomcat 中将运行时异常打印到 catalina.out？

> ID：12893067
> 
> 赞同：0
> 
> 时间：2012-10-15T09:46:42.550
> 
> 标签：tomcat, logging, runtimeexception, catalina

这个问题困扰了我很多。当运行时异常（如 Null Pointer 或 Incompatible Class）发生时，我的 tomcat 总是静默退出，不会在日志中留下任何内容。这使调试变得更加困难。所以我想将这些运行时打印到 catalina.out 中，有没有可用的解决方案？

# puppet - 将 Web 应用程序从 puppet master 动态部署到 puppet 代理的子集

> ID：12893069
> 
> 赞同：1
> 
> 时间：2012-10-15T09:47:04.200
> 
> 标签：puppet

我不想在 site.pp 中硬编码节点和模块，我想在代理轮询配置时从数据库中获取模块列表。

我在 MSSQL 数据库中有代理列表，我想将 Web 应用程序部署到这些列表中。

现在我有不同的模块用于不同的代理，

例如，这是我在数据库中的数据

服务器模块
A 产品
B 产品
A 员工 C 员工
D 员工

我想将产品网络部署到服务器：A、B 和员工网络到服务器：A、C、D

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:06:22.877

看看实现一个[外部节点分类器（ENC）](http://docs.puppetlabs.com/guides/external_nodes.html)。您需要创建一个从数据库读取并为调用节点返回 YAML 的脚本。这将允许您根本不使用该`site.pp`文件并管理数据库中的配置。不过，它的使用方式有一些注意事项，因此请确保它满足您的需求。

# oracle - 通过批处理文件连接 Oracle

> ID：12893071
> 
> 赞同：1
> 
> 时间：2012-10-15T09:47:16.043
> 
> 标签：oracle, batch-file, sqlplus

我对 Windows 批处理程序很陌生。我有一个要求，即我想通过命令提示符从用户那里获取 Oracle 数据库用户名密码和连接字符串。取决于我需要在 Oracle 中连接特定用户的用户输入。如何使用 Windows 批处理文件来做到这一点？

我试过了，但我无法解决问题。

```
enter code here
@ECHO OFF
ECHO *****************************
ECHO     Database Login
ECHO *****************************

SET /p username    =User/Schema:
SET /p passwd      =Password   :
SET /p tns         =Database   :

sqlplus %username%/%passwd%@%tns 
```

当我执行批处理文件时，我看不到任何操作，它只是运行并从命令提示符退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:34:01.380

或更简单的方法是：

> sqlplus %1%/%2%@%3%

这里 %1 %2 %3 是您通过命令行传递的参数。像 C:>sql_connect.bat admin asa123 orcl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:34:20.137

用这个：

```
@ECHO OFF
ECHO *****************************
ECHO     Database Login
ECHO *****************************

SET /p usr=username: 
SET /p pwd=password: 
SET /p tns=tns: 

sqlplus %usr%/%pwd%@%tns% 
```

# css - 带有渐变的阴影 CSS

> ID：12893074
> 
> 赞同：0
> 
> 时间：2012-10-15T09:47:28.710
> 
> 标签：css, gradient, dropshadow

我正在使用 HTML 和 CSS 做一个项目，我想复制这个网站上使用的类似内容。

[http://slb.com/hse/hse_policy.aspx](http://slb.com/hse/hse_policy.aspx)

围绕容器 div 顶部的阴影，更重要的是，如何在阴影上获得渐变，使其向底部淡出？我知道如何获得实际的阴影。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:50:32.253

纯 CSS 没有办法做到这一点。您链接的站点使用大图像来执行此操作：[http](http://slb.com/images/gradient_1120.jpg) ://slb.com/images/gradient_1120.jpg - 您需要做类似的事情才能获得相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:51:34.147

好吧，显然他们为此目的使用了背景图像（ [http://slb.com/images/gradient_1120.jpg ）。](http://slb.com/images/gradient_1120.jpg)但是你也可以在 body 之前添加一些元素（可能是伪元素）并给它们一个渐变作为背景。

```
#bg-element-left {
    /* background-gradient from top right to bottom left */
}

#main content {
    /* styled as you wish */
}

#bg-element-right {
    /* background-gradient from top left to bottom right */
} 
```

# php - 如何用数组进行这样的排序？

> ID：12893086
> 
> 赞同：0
> 
> 时间：2012-10-15T09:48:02.970
> 
> 标签：php, arrays, sorting, array-multisort

这些是我的数组：

```
$foo1 = array (5) {
          [0] => 'foo1',
          [1] => 'foo2',
          [2] => 'foo3',
          [3] => 'foo4',
          [4] => 'foo5'
        }

$foo2 = array (5) {
          [0] => 200,
          [1] => 130,
          [2] => 110,
          [3] => 80,
          [4] => 20
        }

$foo3 = array (5) {
          [0] => 610,
          [1] => 630,
          [2] => 500,
          [3] => 800,
          [4] => 200
        } 
```

这只是为了表示它的外观，而不是我的实际 PHP 代码。

现在，我想要做的是 - 我想按数组`$foo1`的总和对数组进行排序，`$foo2`并且`$foo3`. 但这和我上一个问题不一样，因为这一次，如果数组中的值`$foo2`小于 100 或数组中的值`$foo3`小于 600，我不希望它靠近顶部。我希望它放在数组`$foo2`中的值大于 100 且数组中的值`$foo3`大于 600 的所有最后一个数组的后面。因此，在以下数组的情况下，结果将是：

```
$foo1 = array (5) {
          [0] => 'foo1',
          [1] => 'foo2',
          [2] => 'foo4',
          [3] => 'foo3',
          [4] => 'foo5'
        } 
```

如果您没有完全理解上述内容，这就是原因。因为与数组`$foo2`中key相同`foo1`的数组`$foo1`中的值在100以上，而与数组`$foo3`中key相同`foo1`的数组中的值在`$foo1`600以上，总和最高。`foo2`是下一个，因为它是具有相同索引键且满足要求并且总和最高的下一个元素。`foo4`下一个，因为其他行都不满足要求，并且`foo4`其他数组中的等效键在不满足要求的行中具有最大的总和。出于同样的原因，排名第 4 和第 5 `foo3`。`foo5`

希望我不是太具体，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:05:41.863

首先将它们组合起来，添加一个标志 ( `"tail"=>true/false`)，然后对其进行排序。

```
function special_sort($arr1,$arr2,$arr3)
{
    $arr=array();
    foreach($arr1 as $key=>$val)
    {
        $arr[$key]=array("val"=>$val,"sum"=>($arr2[$key]+$arr3[$key]),"tail"=>(($arr2[$key]<100 || $arr3[$key]<600)?true:false));
    }
    usort($arr,function($a,$b){
        if($a["tail"] && !$b["tail"])
            return 1;
        elseif(!$a["tail"] && $b["tail"])
            return -1;
        elseif($a["sum"]>$b["sum"])
            return -1;
        elseif($a["sum"]<$b["sum"])
            return 1;
        else
            return 0;
    });
    return $arr;
} 
```

测试结果：

```
$foo1=array("foo1","foo2","foo3","foo4","foo5");
$foo2=array(200,130,110,80,20);
$foo3=array(610,630,500,800,200);
print_r(special_sort($foo1,$foo2,$foo3)); 
```

输出

```
Array
(
    [0] => Array
        (
            [val] => foo1
            [sum] => 810
            [tail] => 
        )

    [1] => Array
        (
            [val] => foo2
            [sum] => 760
            [tail] => 
        )

    [2] => Array
        (
            [val] => foo4
            [sum] => 880
            [tail] => 1
        )

    [3] => Array
        (
            [val] => foo3
            [sum] => 610
            [tail] => 1
        )

    [4] => Array
        (
            [val] => foo5
            [sum] => 220
            [tail] => 1
        )

) 
```

如果需要，您必须取出“val”值。那应该不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:20:21.720

您可能想看看[usort()](http://uk.php.net/manual/en/function.usort.php)，这也将使您的代码比其他示例更易于阅读。

# vba - VBA删除Word中的命令按钮

> ID：12893089
> 
> 赞同：1
> 
> 时间：2012-10-15T09:48:07.800
> 
> 标签：vba, ms-word

该站点上的相同问题提供了以下代码来删除 Word 文档中的命令按钮：

```
Dim o As Object
For Each o In ActiveDocument.InlineShapes
If o.OLEFormat.Object.Caption = "Test" Then
o.Delete
End If
Next 
```

这工作了几天，但现在我收到“对象变量或未设置块变量”错误。

毫无疑问，这是显而易见的。有任何想法吗？

# python - 在python中展平列表

> ID：12893091
> 
> 赞同：0
> 
> 时间：2012-10-15T09:48:22.173
> 
> 标签：python, list

我想展平列表：

```
exampleArray = [[[151.68694121866872]], 
                [[101.59534468349297]], 
                [[72.16055999176308]]] 
```

到：

```
[151.68694121866872, 101.59534468349297, 72.16055999176308] 
```

现在我正在这样做：

```
resultArray= list(chain.from_iterable(list(chain.from_iterable(exampleArray)))) 
```

即使它有效，我也想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:51:03.013

怎么样

```
result = [x[0][0] for x in exampleArray] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:52:03.183

```
In [6]: from itertools import chain

In [7]: lis=[[[151.68694121866872]], [[101.59534468349297]], [[72.16055999176308]]]

In [8]: list(chain(*(chain(*lis))))

Out[8]: [151.68694121866872, 101.59534468349297, 72.16055999176308] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:52:24.703

没有更好的方法，这是最推荐的方法。见[官方食谱](https://docs.python.org/3/library/itertools.html#itertools-recipes)

```
def flatten(listOfLists):
    "Flatten one level of nesting"
    return chain.from_iterable(listOfLists) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:59:41.607

您不需要将`itertools.chain`对象（可迭代）转换为列表：

```
resultArray= list(chain.from_iterable(list(chain.from_iterable(exampleArray))))
# could be rewritten as
resultArray= list(chain.from_iterable(chain.from_iterable(exampleArray))) 
```

.

您可以使用递归编写深度函数：

```
def deep_chain_from_iterable(it, n):
    if n == 0:
        return list(it)
    else:
        return deep_chain_from_iterable(itertools.chain.from_iterable(it),n-1)

deep_chain_from_iterable(exampleArray, 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:56:04.357

对于固定的深度级别（如示例），您可以将足够的时间相加：

```
sum(sum(listoflistsoflists, []), []) 
```

# c# - 需要正则表达式来替换所有由字母或数字包围的符号

> ID：12893093
> 
> 赞同：4
> 
> 时间：2012-10-15T09:48:27.453
> 
> 标签：c#, regex

我需要一个正则表达式来替换所有由字母或数字包围的符号。有一个空格，我将使用 C# 来运行表达式，我对刚刚卡在正则表达式部分的部分没有意见。

所以更换后如下

1.  *01 型*将是*01 型*
2.  *01* )* 仍然是*01* )*
3.  *-类别：玩具*仍然是*-类别：玩具*
4.  *白色：背面*为*白色 黑色*

当前表达式

```
(?<=\w)[^a-zA-Z0-9Category:]+(?=\w) 
```

输入字符串是

> -类别：玩具和（泰迪熊 Type-01*）或（泰迪熊白色：黑色）

所需输出

> -类别：玩具和（泰迪熊类型 01*）或（泰迪熊白色黑色）

但我得到的是

> -类别：玩具和泰迪熊类型 01 或泰迪熊白色：黑色）

不知道我只是错过了一些简单的事情还是只是弄错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:56:36.723

您不能将单词放入字符类中。那里的所有字符都将添加到该类中，顺序无关紧要。

我不确定这对您是否足够，但对于您的示例，这将起作用：

```
(?<=\w)[^a-zA-Z0-9*:()\s]+(?=\w) 
```

并用一个空格替换。

我也会让它更 Unicode 风格：

```
(?<=\w)[^\p{L}0-9*:()\s]+(?=\w) 
```

`\p{L}`任何语言的字母的 Unicode 属性在哪里。

[在 Regexr 上](http://regexr.com?32f8s)查看

**更新：**

如果你想保留冒号，如果有“类别”，你可以这样做

```
(?<=\w)(?:[^a-zA-Z0-9*()\s:]+|(?<!Category):)(?=\w) 
```

[在 Regexr 上](http://regexr.com?32f98)查看

我将冒号添加到否定字符类中表示不要替换冒号。然后我添加了另一种说法：替换冒号，但前提是之前没有“类别”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:55:24.557

对于 C#，您可以使用 Regex.Replace 函数。

```
string a = "Category:Toys AND (Teddy Bear Type-01*) OR (Teddy Bear White/Black)";
string s = string.Empty;
s = Regex.Replace(a, @"[^()*:A-Za-z0-9]", " "); 
```

# file - 更改文件名

> ID：12893094
> 
> 赞同：2
> 
> 时间：2012-10-15T09:48:27.590
> 
> 标签：file, matlab, filenames

我有一个关于如何更改某些文件名的问题。问题是我有这种档案，例如：

```
25614_z.zip
25312_z.zip
25003_z.zip 
```

我想创建它：

```
lp_25_614.zip
lp_25_312.zip
lp_25_003.zip 
```

所以，我需要自动化这个过程

lp + 25（前两个数字）+ 3 4 和 5 位置的数字）+ 点 zip

有什么办法吗？

**编辑**

例如，这将是我的条件：

**XXXX**

```
if fileNames{k}(3:5) >0 <5 (the interval)= 2
fileNames{k}(3:5)> >5 >10 =10 
```

因此，例如：

文件名{k}(3:5) = 05

在条件之后，它将在重命名中替换为= 2

然后我想将它添加到重命名名称上。

```
newFileName = ['fiche' fileNames{k} (3) 'pd' fileNames{k}(3:5) 'XXX '.tar.gz']; 
```

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:00:40.450

您可以使用[`movefile`](http://www.mathworks.de/de/help/matlab/ref/movefile.html)重命名文件：

```
 myPath = 'C:\myFolder\'; % path to your files

fileNames = {
    '25614_z.zip'
    '25312_z.zip'
    '25003_z.zip'
    }

for k = 1:length(fileNames)
    newFileName = ['lp_' fileNames{k}(1:2) '_' fileNames{k}(3:5) '.zip'];
    % renaming
    movefile([myPath fileNames{k}], [myPath newFileName]); 
end 
```

**~edit~** 关于你的编辑：是的，可以为不同的情况生成不同的文件名。请注意，下面的示例非常笨拙，仅当您只有少量不同的情况时才应使用。

```
myPath = 'C:\myFolder\'; % path to your files

fileNames = {
    '25614_z.zip'
    '25312_z.zip'
    '25003_z.zip'
    }

for k = 1:length(fileNames)
    n = num2str(fileNames{k}(3:5));
    if n > 0 && n < 5
        fileName = % put your file name for this case here
    elseif n >= 5 && n < 10
        fileName = % put your file name for this case here
    elseif n >= 10 && n < 20
        fileName = % put your file name for this case here
    end
    % renaming
    movefile([myPath fileNames{k}], [myPath newFileName]);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:02:11.487

作为更通用的解决方案，您可以使用`regexp`with`Token`参数来匹配字符串的各个部分：

```
for k = 1:length(fileNames)
    splitname = regexp(fileNames{k}, '(\d\d)(\d\d\d)', 'Tokens');
    fname_new = ['lp_' splitname{1}{1} '_' splitname{1}{2} '.zip'];
    movefile(fileNames{k}, fname_new);
end 
```

在这里，`regexp`is 中的模式匹配两个数字后跟三个数字。

# c++ - 如何使用 POCO 库将更改写入“.ini”文件？

> ID：12893099
> 
> 赞同：1
> 
> 时间：2012-10-15T09:48:48.400
> 
> 标签：c++, ini, poco-libraries

我正在尝试使用 Poco::Util::IniFileConfiguration 对“.ini”文件进行更改。我有以下示例*ini*文件：

```
[Test]
IP = 192.168.1.1 
```

我希望能够将新 IP 写入文件。到目前为止，我所拥有的是：

```
#include "Poco/Util/IniFileConfiguration.h"
#include <iostream>

int main( int argc, char *argv[] ) {
  Poco::AutoPtr<Poco::Util::IniFileConfiguration> pConf( new Poco::Util::IniFileConfiguration( "file.ini" ) );
  if ( pConf->has( "Test.IP" ) ) {
    try {
      std::cout << pConf->getString( "Test.IP" ) << std::endl;
      pConf->setString( "Test.IP", "127.0.0.1" );
      std::cout << pConf->getString( "Test.IP" ) << std::endl;
      // TODO Make changes permanent; write to file!
    } catch ( Poco::SyntaxException& e ) {
      std::cerr << "writeValue: " << e.displayText() << std::endl;
      return -1;
    }
  }
  return 0;
} 
```

此代码打印以下内容：

```
192.168.1.1
127.0.0.1 
```

IP 在运行时更改，但不会将更改写入磁盘（file.ini 未更改）。有没有简单的方法来实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:24:28.163

这很奇怪，但目前 Poco IniConfigurationFile 是只读的，无法保存。[此演示文稿的证明](http://pocoproject.org/slides/180-Configuration.pdf)。

因此，如果您想使用 ini 文件，您需要编写自己的实现来保存 PocoIniConfiguration 或使用另一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T07:08:43.607

```
class CIniConfig : public Poco::Util::IniFileConfiguration
{
//  using namespace Poco::Util;
public :
    CIniConfig();
    using Poco::Util::IniFileConfiguration::IniFileConfiguration;

bool SaveConfig()
{
std::string key ;
    Keys range ;
    //If an empty key is passed, all root level keys are returned.
    enumerate(key,range);
    if(range.empty())
        return false ;
    using namespace std ;
    std::wofstream out;
    out.open(L"config.ini",std::ios_base::out|std::ios_base::trunc);
    if(!out.is_open())
        return false;
    for(auto item : range)
    {

        string pair = item ;
        pair.append("=");
        pair.append(getString(item));
        std::wstring result(pair.begin(),pair.end());
        out << result << endl;
    }
    out.flush();
    out.close();
    return true;
}
} 
```

# php - SQL：如何查找连接表中没有条目的位置

> ID：12893101
> 
> 赞同：-2
> 
> 时间：2012-10-15T09:48:52.547
> 
> 标签：php, mysql

我想知道如何设置我的查询以获得零工作的公司。

```
company
- id

jobs
- id
- company_id 
```

所以我想要公司没有任何工作的行的结果。

编辑对不起，我在我的问题中误会了自己。它还需要从 tabel 公司的 tabel 工作中进行 INNER JOIN (jobs.company_id=company.id)

所以：我想要一个来自公司的结果 os 行，该公司没有任何工作或有工作非活动（活动 = 0）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:50:30.350

试试这个：

```
select id 
from company 
where id not in(select company_id from jobs where active != 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:52:13.653

```
SELECT c.* FROM companies c 
LEFT JOIN jobs j ON c.id=j.company_id 
HAVING company_id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:52:30.593

```
SELECT company.id , jobs.id
FROM company
    LEFT JOIN jobs ON jobs.company_id = company.id
WHERE jobs.ID IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:52:43.463

你需要一个外部连接。

试试这个

```
select  count(c.id)
from company c
left join jobs j on j.companyid = c.id
where j.id is null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T09:53:17.563

尝试下面给出的查询：

```
SELECT * FROM company AS c WHERE c.id NOT IN (SELECT company_id FROM jobs) 
```

# jquery - iPhone风格桌面选择框轮插件

> ID：12893104
> 
> 赞同：1
> 
> 时间：2012-10-15T09:49:00.033
> 
> 标签：jquery, iphone, html, forms, select

我正在寻找一个 jQuery 插件，它可以在 iphone 样式的滚轮中显示一个选择框，将选项堆叠在一起，并能够使用鼠标滚动选项。

有谁知道任何可以实现这一目标的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:54:34.727

抱歉，我找到了完美的解决方案，这里是为任何想要它的人提供的[http://mobiscroll.com/](http://mobiscroll.com/)

# css - 如何给 gridview 标题行 3-D 外观？

> ID：12893114
> 
> 赞同：0
> 
> 时间：2012-10-15T09:49:51.073
> 
> 标签：css, gridview

我需要将 3D 样式应用于我的 gridview 的标题行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:54:57.227

[http://www.textfixer.com/resources/css-tables.php](http://www.textfixer.com/resources/css-tables.php)

在这里您可以找到如何将 CSS 样式设置为 3d。只需将其作为 GridView 中的 Headerstyle 应用？

# recursion - 尾递归与迭代算法

> ID：12893117
> 
> 赞同：11
> 
> 时间：2012-10-15T09:49:56.337
> 
> 标签：recursion, tail-recursion, iteration

我找不到描述为什么尾递归函数应该优于迭代算法的文章。

我不是在问为什么尾递归比简单递归更好，我认为在任何地方都清楚地解释了它。

所以为什么

```
sum(n) = {
    def sumImpl(n, acc) = if(n <= 0) acc  else sumImpl(n - 1 , n + accumulator)
    sumImpl(n, 0)
} 
```

最好是

```
sum = 0;
while(n--) sum += n 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T02:45:07.173

递归使程序更具可读性，但性能较差。迭代过程提供了良好的性能，但不那么可读，并且可能需要一个局部变量来存储中间值（可变性）。使用尾递归，您将获得两全其美，并且不需要“总和”变量（不变性）。这在计算大量总和或阶乘时非常有用，因为当您将结果转发到下一个递归函数调用时，您将永远不会遇到 stackoverflow 异常。

在并行环境中，不变性非常重要。尝试编辑您的代码并将非常大的数字传递给函数以查看差异。

[在这里](http://c2.com/cgi/wiki?RecursionVsLoop)进一步阅读

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-29T16:43:26.983

递归消耗更多的内存（堆栈帧的开销）和更多的 CPU 周期（创建和销毁堆栈帧的开销）。然而，它使代码更具可读性。迭代降低了代码的可读性，但释放了更多的内存和 CPU，因此受限环境可能需要它，例如 IOT 设备、电话等。有关详细说明，请参见此处[https://www.ocf.berkeley.edu/~shidi/cs61a /wiki/Iteration_vs._recursion#:~:text=Iteration%20and%20recursion%20are%20both%20ways%20to%20achieve%20repetition%20in%20programs.&text=All%20iterative%20functions%20can%20be,is%20defined% 20as%20tail%20recursion](https://www.ocf.berkeley.edu/%7Eshidi/cs61a/wiki/Iteration_vs._recursion#:%7E:text=Iteration%20and%20recursion%20are%20both%20ways%20to%20achieve%20repetition%20in%20programs.&text=All%20iterative%20functions%20can%20be,is%20defined%20as%20tail%20recursion)。

# php - 当用户有 2 个角色时应用规则或 ACL

> ID：12893123
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:50:22.233
> 
> 标签：php, acl

我有一个基于用户的系统。当用户具有 1 个角色时，我的系统运行良好。当用户应该具有多个角色时，我不知道如何考虑。申请页面时如何查看规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:38:35.627

建议你远离`$user->hasRole(foo)`。这使得动态更改角色权限变得困难。您可以像 ACL 系统问题一样`$this->acl->isAllowed($user, 'edit_page')`。如果 ACL 系统检查该用户具有的角色，并且其中一个角色授予执行特定操作的权限，则它可以返回此权限。

# jquery - Backbone.js + JQuery UI 自动完成 - 奇怪的行为

> ID：12893129
> 
> 赞同：2
> 
> 时间：2012-10-15T09:50:41.097
> 
> 标签：jquery, jquery-ui, backbone.js, autocomplete

我正在为我的 SPA 应用程序使用主干.js，并且需要在其中包含 JQuery UI 自动完成小部件。

**模型**

```
define(['underscore', 'backbone'], function(_, Backbone) 
{
   var Consumer = Backbone.Model.extend
   ({   
        initialize: function()
        {
        },
        toJSON: function() 
        {
            var data;

            var json = Backbone.Model.prototype.toJSON.call(this);

            _.each(json, function(value, key) 
            {
                 data = key;
            }, this);

            return data;
        }   
    });

    return Consumer;
}); 
```

**收藏**

```
define(['jquery', 'underscore', 'backbone', 'models/consumer'], function($, _, Backbone, Consumer)
{
    var Consumers = Backbone.Collection.extend
    ({
          model: Consumer,
          url: 'http://localhost/test',

          initialize: function()
          {
          }
    });

    return new Consumers;
}); 
```

**看法**

```
define(['jquery', 'underscore', 'backbone', 'text!templates/home.html', 'collections/consumers', 'jqueryui'], function($, _, Backbone, homeTemplate, Consumers)
{
      var HomeView = Backbone.View.extend
      ({
             el: $("body"),

             initialize: function()
             {
                  this.collection = Consumers;

                  this.collection.fetch(({async: false}));
             },
             events: 
             {
                  'focus #consumer': 'getAutocomplete',
             },
             render: function(options)
             {          
                  this.$el.html(homeTemplate);
             },
             getAutocomplete: function () 
             {
                  $("#consumer").autocomplete(
                  {
                        source: JSON.stringify(this.collection),
                  });
             }
    });

    return new HomeView;
 }); 
```

问题是自动建议在用户输入时发送奇怪的 GET 请求。

```
collection.fetch() 
```

使用以下 JSON 数组填充集合：

```
["11086","11964","14021","14741","15479","15495","16106","16252"] 
```

当用户开始输入自动完成（例如 15）时，它会发送以下 GET 请求：

```
http://localhost/test/%5B%2211086%22,%2211964%22,%2214021%22,%2214741%22,%2215479%22,%2215495%22,%2216106%22,%2216252%22%5D?term=15 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:46:43.703

[来自关于 Autocomplete 的源选项的 jQuery UI api 文档：](http://api.jqueryui.com/autocomplete/#option-source)

> **String**：使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。

当你这样做

```
$("#consumer").autocomplete({
  source: JSON.stringify(this.collection),
}); 
```

您提供了一个字符串，这会使自动完成功能认为您提供的是一个 url，而不是给它一个数组：

```
$("#consumer").autocomplete({
  source: this.collection.toJSON();
}); 
```

但是您必须拥有模型`label`的`value`属性。

我建议您做的是为您的收藏创建一些单独的功能

```
getSuggestions: function() {
  // returns an array of strings that you wish to be the suggestions for this collection
} 
```

并改用它：

```
$("#consumer").autocomplete({
  source: this.collection.getSuggestions();
}); 
```

# php - 查询mysql php

> ID：12893141
> 
> 赞同：1
> 
> 时间：2012-10-15T09:51:01.063
> 
> 标签：php, mysql

我正在努力`select hora from entradas where data ='some date';`。

**桌子`entradas`**

```
+------------+----------+
| 数据 | 霍拉 |
+------------+----------+
| 2012-09-27 | 07:59:11 |
| 2012-09-27 | 16:03:27 |
| 2012-09-28 | 16:03:35 |
| 2012-09-29 | 09:29:16 |
| 2012-09-29 | 09:43:05 |
| 2012-09-29 | 09:43:14 |
| 2012-10-01 | 08:03:10 |
+------------+----------+

```

我可以在mysql中做到这一点：

```
+----------+
| 霍拉 |
+----------+
| 09:29:16 |
| 09:43:05 |
| 09:43:14 |
+----------+

```

但是当我在 PHP 中尝试时：

```
$consulta_data = mysql_query("
  select hora from entradas where data = '2012-09-29';
") or die(mysql_error());

while($row = mysql_fetch_array($consulta_data))
{
  echo $row[0];
} 
```

3 行变成 1 行并给我结果`09:29:1609:43:0509:43:14`。

如何将结果集输出为 HTML 中的表格，如下所示：

```
行 [0]=09:29:16
行[1]=09:43:05
行 [2]=09:43:14

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:07:26.743

您应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)（[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)）而不是过时的`mysql_`：

```
$dbh = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 'username', 'password');
$result = array();

$stmt = $db->prepare("SELECT hora FROM entradas WHERE data = ?");
$stmt->setFetchMode( PDO::FETCH_NUM);
$stmt->execute('2012-09-29');
foreach($sth as $row) {
   $result[] = $row[0];
}
return $result; 
```

或者当你想要它作为一个 html 时，用这个替换 foreach 循环：

```
echo '<table><tbody>';
foreach( $sth as $row){
    echo '<tr><td>' . htmlspecialchars( $row[0]) . '</td></tr>';
}
echo '</tbody></table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:23:30.587

我不确定我是否正确地回答了您的问题，因为它看起来很简单，顺便说一下它可能有效：

```
echo $row[0] . '<br>'; 
```

你只需要分离输出？如果我弄错了，请告诉我更改代码。

你真的想要这种格式吗？我的意思是`row[0]`也？

```
row[0]=09:29:16 
```

然后：

```
$i = 0;

while($row = mysql_fetch_array($consulta_data))
{
    echo 'row[' . $i . '] = ' . $row[0] . '<br>';
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:32:11.373

让我们试试这个，

```
$consulta_data = mysql_query("
  select hora from entradas where data = '2012-09-29';
") or die(mysql_error());
$i=0;
while($row = mysql_fetch_array($consulta_data))
{
  echo "row[0] = ".$row[0]."<br />";
  $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:55:00.973

```
while($row = mysql_fetch_array($consulta_data))
    {
        $response[] = $row[0];
    } 
```

然后 $response 应该包含你想要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T10:42:50.367

```
<?php
$result = array();

$consulta_data = mysql_query("select hora from entradas where data = '2012-09-29';") or die(mysql_error());

while($row = mysql_fetch_array($consulta_data)) {
    $result[] = $row[0];
}
?>

<table border="1">
    <thead>
        <tr>
            <td>Hora</td>
        </tr>
    </thead>
    <tbody>
        <?php foreach($result as $hora): ?>
            <tr><td><?php echo $hora; ?></td></tr>
        <?php endforeach; ?>
    </tbody>
</table> 
```

# c++ - 确定距直线一定距离的点

> ID：12893145
> 
> 赞同：1
> 
> 时间：2012-10-15T09:51:08.997
> 
> 标签：c++, math, cocos2d-iphone, cocos2d-x

这更像是一个数学问题，而不是一个实际的编程问题，但由于我使用的是`C++`and `COCOS2D-X`，所以我选择在这里发布它。

我正在使用`CCBezierTo`创建精灵`mySprite`运行的贝塞尔运动。该`CCBezierConfig`结构接受三个点 ( `CCPoint`s)：`controlPoint_1`、`controlPoint_2`和`endPoint`。两个`controlPoint`s 是贝塞尔曲线将弯曲的点。

现在问题来了。我需要创建曲线的`controlPoint`s 是未知的，只能通过做一些数学来获得。这些是已知的变量。请参考下图。

```
A = The start point of the curve
B = The end point of the curve
Line AB = The line created by connecting A and B together
L = The distance between A and B/The length of Line AB
D = The distance between the line and the unknown points 
```

我正在尝试寻找 X 和 Y。我已经实现了一点，但只有当线条是水平或垂直时：

```
// From left to right:
ccBezierConfig bezierConfig;
bezierConfig.controlPoint_1 = CCPointMake( A.x + ( L * 0.25f ), A.y + aCertainHeight );
bezierConfig.controlPoint_2 = CCPointMake( A.x + ( L * 0.75f ), A.y - aCertainHeight );
bezierConfig.endPoint = B;

/** CCPointMake( x, y ) is a macro that creates a CCPoint object, which is a point on a plane. 
    It accepts two float values determining the X and Y position of the point.**/

// From top to bottom:
ccBezierConfig bezierConfig;
bezierConfig.controlPoint_1 = CCPointMake( A.x + aCertainWidth, A.y - ( L * 0.25f ) );
bezierConfig.controlPoint_2 = CCPointMake( A.x - aCertainWidth, A.y - ( L * 0.25f ) );
bezierConfig.endPoint = B; 
```

如果线是对角线，我怎样才能得到 X 和 Y？

案例1：线从左到右开始 ![案例1：线从左到右开始](../Images/5459e22b0acdb462438ab8d47e13dbd7.png)

案例2：线从左上到右下 ![案例2：线从左上到右下](../Images/eeefa5c9f38bf487c4d12a7db0e16e76.png)

案例3：线从右上到左下开始 ![案例3：线从右上到左下开始](../Images/d24c79c89ac9726f61f42e5de42ddb2d.png)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:10:20.410

第 1 步：计算从 A 到 B 的向量，称为`v`。

第 2 步：计算一个垂直于该向量且具有单位长度的向量。调用它`w`。一般来说`(-y, x)`和`(y, -x)`都垂直于`(x, y)`。前者指向“左侧”，后者指向“右侧”。

第 3 步：计算`X`和`A + 0.25 * v + D_1 * w`类似`Y`。

我认为这一切都可以解决：

```
// Using a "point" type for a vector is dodgy, but it works.
w = CCPointMake((B.y - A.y) / L, -(B.x - A.x) / L);
X = CCPointMake(
    0.75 * A.x + 0.25 * B.x + D_1 * w.x,
    0.75 * A.y + 0.25 * B.y + D_1 * w.y,
);
Y = CCPointMake(
    0.25 * A.x + 0.75 * B.x + D_2 * w.x,
    0.25 * A.y + 0.75 * B.y + D_2 * w.y,
); 
```

或类似的。

如果 cocos2d 有一个单独的二维向量类型，使用它，你可能会发现你可以写出类似`(B - A)/L`的表达式。

# perl - &LogIt() 基础知识

> ID：12893148
> 
> 赞同：0
> 
> 时间：2012-10-15T09:51:26.093
> 
> 标签：perl, file, logging

> **可能重复：**
> [什么时候应该使用 & 来调用 Perl 子例程？](https://stackoverflow.com/questions/1347396/when-should-i-use-the-to-call-a-perl-subroutine)

我是 Perl 开发的新手，只是通过示例代码。

我遇到了 &LogIt() ，我有几个基本问​​题要开始。我从 Google 获得了信息，例如它会将错误/消息记录到日志文件中。

```
&LogIt("Failed to create folder."); 
```

在上面的代码中，'&'代表什么？&LogIt() 和 LogIt() 之间有什么区别/影响吗？msg“创建文件夹失败”会打印在某处吗？谁会使用这个味精？

请让我知道一些关于 &LogIt() 的基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:56:31.717

这具有考古价值。与号用于调用子程序。您将[在该页面上](https://www.socialtext.net/perl5/subroutines_called_with_the_ampersand)找到所有血淋淋的细节。

它仍然有效，但不应使用，除非非常特殊的情况（如引用子例程或检查它是否已定义）。

请注意，`&foo`和`&foo()`不是同一个意思。后者从括号中获取参数（或者没有，如果没有提供）。前者不能用参数调用，而是将 的当前值`@_`作为参数。因此，以下块：

```
@_ = ( 10, 20 ) ;
&foo( ) ;
&foo ;

sub foo { print "args=$_[0], $_[1]\n" ; } 
```

将产生以下输出：

```
args=, 
args=10, 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:55:31.843

函数前面的`&`行为就像`$`标量前面的。它是解释器告诉特定变量是什么的标志。

但是，如果您有括号，则不需要使用函数。因此`&foo` `&foo()`，`foo()`意思几乎相同。

它们之间的区别在于传递给函数的参数。调用不`foo()`传递任何参数。调用`&foo`将当前传递`@_`给 foo。

显式和使用印记的好处是你可以`()`在使用它时省略空的。例如

```
&foo
foo() 
```

如果`foo`不检查其参数或当前`@_`是否为空。

或者如果你必须打电话`foo(@_)`，你可以简单地写

```
`&foo` 
```

但是我想说，`()`即使在不需要它的情况下，许多 perl 程序员仍然倾向于使用它，因为唯一具有可选括号的其他语言（据我所知）是 COBOL。

只需决定您是否打算使用`&`整个代码库并坚持下去！否则阅读起来可能会令人困惑（或烦人）。

# jquery - jquery如何设置表单域

> ID：12893154
> 
> 赞同：0
> 
> 时间：2012-10-15T09:51:48.333
> 
> 标签：jquery, jquery-mobile

嗨，我有这个显示输入字段的 html 代码：

```
<div data-role="content" data-theme="a">
                <div id="#wijzig">
                    <h3>Uw e-mail adres</h3>

                    <p>
                        <input type="button" onclick="$(this).closest('.ui-btn').hide(); $('form').show();" value="Wijzig mijn e-mailadres" />
                    </p>

                    <form action="javascript:getUpdateValues();" method="post" style="display:none;">
                        <div class="ui-grid-a">
                            <div class="ui-block-a">E-Mail: <input type="text" id="email" name="email" style = "margin-top: .6em; padding-right: 0px"  /></div>
                            <div class="ui-block-b" style="width: 100px;"><br/><input type="submit" value="Wijzig" /></div>
                        </div>
                    </form>
              </div>
            </div> 
```

我想要做的是，如果显示此输入字段，它还显示来自 JSON 的现有用户电子邮件：

```
var myData = [
                  {"Email":"asdads@asd.com","Wachtwoord":"blabla"}
                  ];

        $.each(myData, function(index, element) {

           $("#email").val(element.Email);

           }); 
```

不幸的是，它不起作用，即输入字段不包含来自硬编码 JSON 的电子邮件，知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:53:33.557

`$("#email").append(element.Email);`如果你想给输入框设置值是错误的，你应该

```
$("#email").val(element.Email); 
```

> .val(value) - 设置匹配元素集中每个元素的值。

[在此处阅读有关 .val() 的更多信息](http://api.jquery.com/val/)

***[在此处尝试演示](http://jsfiddle.net/PqTJX/)***

如果您遇到任何问题，请告诉我。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:55:08.070

**工作演示** [http://jsfiddle.net/6JZ6E/](http://jsfiddle.net/6JZ6E/)

[http://api.jquery.com/val/](http://api.jquery.com/val/) ==>`$("#email").val(element.Email);`

休息应该适合需要`:)`

**代码**

```
var myData = [
    {
    "Email": "nuri@ensing",
    "Wachtwoord": "blabla"}
];

$.each(myData, function(index, element) {
alert(element.Email);
    $("#email").val(element.Email);

});​ 
```

# c# - 将 gui 从父 winform 更新为子 winform

> ID：12893155
> 
> 赞同：0
> 
> 时间：2012-10-15T09:51:48.277
> 
> 标签：c#, winforms, user-interface, delegates, invoke

我想要做的是，当我们单击 radform1（父）中的按钮时，隐藏 radform1 然后更新 Form1（子表单）中的文本/标签/radgrid 标题文本值，一旦我们关闭 Form1（子表单）..关闭 radform1(Parent) 为好。

我收到一条错误消息：`Invalid OPeration Exception was Un-Handled`跨线程操作无效 Control 'radPageView1 已从创建它的线程以外的线程访问。

如何使用调用或操作方法来解决此问题？我无法完全理解这个概念..请向我解释我应该在这里做什么...感谢任何帮助！

```
Form1 frm = new Form1();
        private void radButton1_Click(object sender, EventArgs e) // French Version Button
        {
            timer1.Enabled = true;
            radProgressBar1.Visible = true;
            frm.radGridView1.Columns[0].HeaderText = "Test"; // Change the Radgrid Header Text at Col[0]

        }
        private void timer1_Tick(object sender, EventArgs e)
        {
            ticks++;
            radProgressBar1.Value1 = ticks;
            if (ticks != 100) return;
            timer1.Enabled = false;
            ticks = 0;

            frm.FormClosed += (_, args) => frm.Close();
            frm.Hide();
            frm.Show();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:42:27.297

我不知道我是否理解得很好，但我认为你需要这样的东西：

```
public static void InvokeIfRequired(this Form c, Action<Form> action)
        {
            if (c.InvokeRequired)
            {
                try { c.Invoke(new Action(() => action(c))); }
                catch { }
            }
            else
            {
                action(c);
            }
        } 
```

并打电话

```
frm.InvokeIfRequired((_)=>{frm.ChangeSomethingInTheUI();}); 
```

通过这种方式，您可以确定该操作将在正确的线程内执行。

希望这可以帮助。

# java - Red5 通讯延迟

> ID：12893159
> 
> 赞同：1
> 
> 时间：2012-10-15T09:52:02.893
> 
> 标签：java, stream, delay, red5

我创建了一个 Red5 流记录器应用程序，用于记录客户的摄像头和麦克风。它记录流`NetStream.publish("streamname","live")`并调用开始记录它的远程调用。问题是客户端调用remote`startRecording`方法，服务端开始录流后，整个通信速度变慢，延迟很长，经常是半分钟！从减速开始，即使是远程呼叫，一切都会有很长的延迟。在本地主机中它工作得很好。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:30:08.920

您可能需要启动一个新线程来处理服务器端记录。我们遇到了类似的问题，并通过将 StreamListener 添加到在其自己的线程中运行并使用类似于以下内容的构造来解决它： [http://en.wikipedia.org/wiki/Semaphore_%28programming%29](http://en.wikipedia.org/wiki/Semaphore_%28programming%29) 收集所有数据包并写入它们到磁盘，独立于 red5 应用程序逻辑。

这样我们就能够解决服务器端录制中的性能问题。

塞巴斯蒂安

# jquery - 叶节点的jstree不同图标

> ID：12893165
> 
> 赞同：5
> 
> 时间：2012-10-15T09:52:14.173
> 
> 标签：jquery, jstree

我正在使用 jquery jstree 组件，但问题是内置主题对具有子节点的节点和不理想的叶节点使用相同的图标。

我将如何修改 css 以仅为叶节点指定自定义图标？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:54:33.010

你想看看[类型插件](http://www.jstree.com/documentation/types)

```
The types enables node types - each node can have a type, and you can define
rules on how that type should behave - maximum children count, maximum depth,
valid children types, selectable or not, etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-26T20:30:28.863

我需要同样的东西，在阅读了项目的错误跟踪器后，我发现了这个：

[https://github.com/vakata/jstree/issues/1125](https://github.com/vakata/jstree/issues/1125)

> 将图标添加到您传递给 jstree 的数据中（您可以`"icon" : "jstree-file"`为需要不同图标的每个节点使用）。

为什么这不是默认设置，打败了我......但是，我认为这应该做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T09:53:57.617

您可以使用 css 为叶节点指定自定义图标。

例如 **html: 中的树的结构**：

```
<li class="jstree-open">
<ins class="jstree-icon"> </ins>
<a>root</a> 
<ul>
    <li class='jstree-leaf' id='1'>
        <ins class="jstree-icon"> </ins>
        <a class='books' href='#'><ins class="jstree-icon"> </ins>books</a>
    </li>
    <li class='jstree-leaf' id='2'>
        <ins class="jstree-icon"> </ins>
        <a class='musics' href='#'><ins class="jstree-icon"> </ins>musics</a>
    </li>  
    <li class='jstree-leaf' id='3'>
        <ins class="jstree-icon"> </ins>
        <a class='videos' href='#'><ins class="jstree-icon"> </ins>videos</a>
    </li> 
</ul> 
```

CSS：

```
li.jstree-open > ul > li.jstree-leaf > a.books > ins.jstree-icon { background: url("XXX1.png") 0px 0px no-repeat !important;} 
```

li.jstree-closed > ul > li.jstree-leaf > a.books > ins.jstree-icon { background: url("XXX2.png") 0px 0px no-repeat !important;}

也许这可以帮助你。

# linux - 用于嵌入式 Linux 板的轻量级数据库

> ID：12893171
> 
> 赞同：2
> 
> 时间：2012-10-15T09:52:27.270
> 
> 标签：linux, embedded

我实际上在嵌入式 Linux 板上工作，我有一个需要处理一些关系数据的持久性的要求。因此，任何人都可以就上述可用的各种选项提出建议。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:06:01.057

如果您使用 C 作为编程语言，请尝试[sqlite](http://www.sqlite.org/)。如果您使用 Java，请使用[H2](http://www.h2database.com/)。

但数据库并不总是最好的解决方案。因此，您还应该考虑更简单的东西，例如 CSV 或 XML 文件，尤其是在数据很少更改或仅附加时。

请注意，“什么是最佳选择”没有通用答案，因为每种情况都略有不同。我建议构建一个小型原型，以了解什么可行，什么不可行。一项技术可能很棒，但如果你不能全神贯注于它，那么你的代码将比使用你可以很好地处理的“劣质”技术更容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:27:18.847

请尝试 sqlite3。它小巧玲珑，非常适合嵌入式环境。我已经在 ARM 板上使用它来记录患者的病史。它可靠且稳定。去吧。

# html - 视频关闭后的方向问题：Cordova 2.1.0 + iOS 6

> ID：12893174
> 
> 赞同：3
> 
> 时间：2012-10-15T09:52:31.277
> 
> 标签：html, cordova, video, ios6, orientation-changes

我正在构建一个需要播放全屏 html5 视频的 Phonegap 应用程序。

我的问题是，在 Phonegap 2.1.0 和 iOS 6 中，方向发生了一些变化，每次我关闭全屏视频（按完成按钮）时，即使应用程序被锁定为横向模式，视频也会强制我的应用程序处于纵向模式。

我在这里没有做任何 obj-c 魔术，它是一个标准的 html5 视频标签。

```
<video id="myvideo" src="goat.mp4" controls="" autobuffer=""></video> 
```

我认为是我的 viewController 顶部的视频层强制改变方向，但我该如何让它停止呢？

任何想法将不胜感激！提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T16:34:41.223

对于 PhoneGap 2.1，请查看[错误修复](https://github.com/apache/incubator-cordova-ios/commit/681016b3e0e7e006657406fc0158aaa8515c3369)

在“MainViewController.m”中更改`viewWillAppear`为

```
- (void)viewWillAppear:(BOOL)animated
{
  // Set the main view to utilize the entire application frame space of the device.
  // Change this to suit your view's UI footprint needs in your application.

  UIView* rootView =[[[[UIApplication sharedApplication] keyWindow] rootViewController] view];
  CGRect webViewFrame = [[[rootView subviews] objectAtIndex:0] frame];  // first subview is the UIWebView
  if (CGRectEqualToRect(webViewFrame, CGRectZero)) { // UIWebView is sized according to its parent, here it hasn't been sized yet
      self.view.frame = [[UIScreen mainScreen] applicationFrame]; // size UIWebView's parent according to application frame, which will in turn resize the UIWebView
  }

  [super viewWillAppear:animated];
} 
```

# php - Apache/PHP 时区警告

> ID：12893182
> 
> 赞同：0
> 
> 时间：2012-10-15T09:53:07.600
> 
> 标签：php, macos, apache, date, timezone

> **可能重复：**
> [PHP 配置：依赖系统的时区设置是不安全的](https://stackoverflow.com/questions/2213608/php-configuration-it-is-not-safe-to-rely-on-the-systems-timezone-settings)
> [PHP 错误：警告：require() [function.require]：open_basedir 限制生效](https://stackoverflow.com/questions/10345436/php-errors-warning-require-function-require-open-basedir-restriction-in-e)

我在stackoverflow的第一个问题（请友好：P）

# 为什么我的 apache 显示此错误？

严重性：警告

消息：strtotime() [function.strtotime]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 'CEST/2.0/DST' 选择了 'Europe/Berlin'

## 环境

我正在使用 MacOS Mountain Lion 的 (10.8.2) Apache。

## 我尝试过的事情

*   我试图将我的 /etc/php.ini.default 重命名为 /etc/php.ini 但是当我这样做时，php 将不再编译。

*   我也尝试取消注释这一行（在 php.ini 中）：

    date.timezone = '欧洲/柏林'

但它什么也没做。一旦我重新启动 apache，php 就会停止工作。

### 有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:55:11.567

这是 PHP 消息，而不是 Apache。正如消息所示，这是因为您的 PHP 配置错误。编辑您的正确`php.ini`文件（通常，它以 结尾`/etc/php5/<FLAVOUR>/php.init`，其中“FLAVOUR”可以是`apache2`，`cli`或（最有可能）`cgi`（或`cgi-bin`），例如`/etc/php5/apache2/php.ini`。然后取消注释`date.timezone`行并输入您的时区，即

```
date.timezone = Europe/Berlin 
```

# cakephp - cakephp 和创建移动网站

> ID：12893190
> 
> 赞同：2
> 
> 时间：2012-10-15T09:53:45.640
> 
> 标签：cakephp, layout, mobile, views

我已经创建了我的 cakephp 网站，现在想创建它的移动版本。我在此处和其他页面上关注了有关创建移动网站的问题。但是，在实现代码后，页面不会加载，只会显示一个没有标题等的空白页面。

这是我的应用控制器中的代码

```
App::uses('Controller', 'Controller');

class AppController extends Controller {

    public $components = array(
        'DebugKit.Toolbar',
        'Session', 
        'Auth'=>array(
            'loginRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'invoiceRedirect'=>array('controller'=>'invoices', 'action'=>'viewinvoice'),
            'authError'=>"You can't access this page",
            'authorize'=>array('Controller')
        )
    );

    public function isAuthorized($user){
        return true;
    }

    public function beforeFilter(){
    $this->Auth->allow('index','view');
    $this->Auth->allow('about_us','view');
    $this->Auth->allow('contact_us','view');
    $this->Auth->allow('privacy','view');
    $this->Auth->allow('','');
    $this->Auth->allow('forgotten_password','view');

    if ($this->request->isMobile()){
    $this->is_mobile = true;
        $this->set('is_mobile', true );
        $this->autoRender = true;
}
    $this->set('logged_in', $this->Auth->loggedIn());
    $this->set('current_user',$this->Auth->user());

    }

    function afterFilter(){
        // if in mobile mode, check for a valid view and use it
    if (isset($this->is_mobile) && $this->is_mobile) {
        $view_file = file_exists( 'Views' . $this->name . DS . 'mobile/' . $this->action . '.ctp' );
        $layout_file = file_exists( 'Layouts' . 'mobile/' . $this->layout . '.ctp' );
        if($view_file || $layout_file){
            $this->render($this->action, ($layout_file?'mobile/':'').$this->layout, ($view_file?'mobile/':'').$this->action);
        }
    }
     }

    public function pdo_error(){
        $this->set('title_for_layout', 'Error');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');   
        $this->layout='home_layout';

    } 
```

}

这是我的登录功能

```
public function login(){
    //allows users to log in to the website
        $this->set('title_for_layout', 'Welcome to eBox: Innovative Invoice System');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');
        $this->set('comp', 'comp.jpg');
        $this->layout='homepage';

        //if the information is posted to the database      
        if ($this->request->is('post')){
            //and matches correctly to the database
            if ($this->Auth->login()){
            //matches the data to the database
            $username = $this->request->data['User']['username'];
            //get the users User.access_level
            $acl= $this->Auth->User('access_level');

                    switch($acl){

                            case 1:
                            //if the access_level=1 redirects user to Eboxs/home_employee
                            $this->redirect( array('controller' => 'Eboxs','action' => 'home_employee'));
                            break;

                            case 2:
                            //if the access_level=2 redirects user to Eboxs/home_admin
                            $this->redirect( array('controller' => 'Eboxs','action' => 'home_admin'));
                            break;

                            default:
                            //if the access_level=anything else redirects user to Eboxs/home
                            $this->redirect( array('controller' => 'Eboxs','action' => 'home'));
                            break;

                        }

                    }   

        else{

        }
    }else{

    }

} 
```

这是我的 mobile.ctp 布局

```
<?php echo $this->Html->docType('xhtml-trans'); ?>
<html>
<div id = "header" style="background-image:url(<?php echo $this->webroot; ?>img/BannerGradient2.jpg);">
<head>

    <title>hi</title>
    <?php echo $this->Html->css($stylesheet_used); ?>

<?php echo $this->Html->image($image_used, array(
    "alt" => "eBox",
    'url' => array('controller' => 'Users', 'action' => 'login'))) ?>

</head>
</div>

<body>

        <?php echo $this->Session->flash(); ?>
        <?php echo $this->fetch('content'); ?>
</div>      

<div id="footer">
                        <p align= center>
                        <?php echo $this->Html->link('About Us', array('controller' => 'eboxs', 'action'=>'about_us')) ;?> 
                        | 
                        <?php echo $this->Html->link('Contact Us', array('controller' => 'eboxs', 'action'=>'contact_us')) ;?>  
                        | 
                        <?php echo $this->Html->link('Privacy', array('controller' => 'eboxs', 'action'=>'privacy')) ;?> 

    </div>
</body>
</html> 
```

这是我的 login.ctp 文件

```
 <table id ="loginform">

          <?php echo $this->Form->create('User', array('url' => array('controller' => 'users', 'action' => 'login')));?>

        <td><text6><?php echo  "Username"?></text6></td>

        <td><?php echo $this->Form->input('username',array('label'=>false,'size'=>7));?></td>

        <td>&nbsp;</td>

        <td>&nbsp;</td>

        <td><text6><?php echo  "Password"?></text6></td>

        <td><?php echo $this->Form->input('password',array('label'=>false,'size'=>12));?></td>

        <td><?php echo $this->Form->end('Login');?></td>

    <tr>

        <td></td>

        <td></td>

        <td></td>

        <td></td>

        <td></td>

        <td><text6>Forgot your password?</td>

        <td><?php echo $this->Html->link('Click Here', array('action'=> 'forgotten_password')) ;?></td>

    </tr></text6>

    </table> 
```

我只是想创建一个简单的登录页面。我正在使用 cakephp 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:31:52.463

使用 CakePHPs 主题功能 ( [http://book.cakephp.org/2.0/en/views/themes.html](http://book.cakephp.org/2.0/en/views/themes.html) ) 会不会更干净？

我过去做过类似的事情，您在过滤器回调之前检测请求是否是移动的，如果是，则只需切换到移动主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:44:55.510

看来您在移动设备中呈现表单时遇到问题，这里有一个关于如何在移动站点中使用 HTML5 表单的小指南。

[A Form of Madness](http://diveintohtml5.info/forms.html)来自 Mark Pilgrim 的 HTML5 表单章节

这里还提供了一个解决方案，提供了如何使用 CakePHP for Mobile 站点。 [http://madething.org/post/661607317/mobile-browser-detection-and-optimization-in-cakephp](http://madething.org/post/661607317/mobile-browser-detection-and-optimization-in-cakephp) 本文涵盖的主题是。

1.  使用 CakePHP 进行浏览器检测
2.  定义文件结构以便在 CakePHP 中放置 Mobile 视图
3.  创建移动布局文件
4.  编写代码并将所有东西放在一起以在移动设备中运行网站

[最后，如果您使用Bootstrap.js 框架](http://twitter.github.com/bootstrap/)，我将不胜感激，它将解决您的大部分前端移动兼容性问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:11:13.613

我已将此代码添加到我的控制器中并且运行良好

```
public function login(){
    //allows users to log in to the website
        $this->set('title_for_layout', 'Welcome to eBox: Innovative Invoice System');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');
        $this->set('comp', 'comp.jpg');
        if($this->request->isMobile()){
        $this->layout='mobile';
        }
        else{
        $this->layout='homepage';
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:09:14.580

您提到您使用的是 2.0 版，但是`fetch()`在 mobile.ctp 中使用的 2.1 版才添加。您必须使用`$content_for_layout`而不是`fetch('content')`. 查看[布局文档](http://book.cakephp.org/2.0/en/views.html#layouts)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:28:45.137

我强烈推荐你的应用使用 Twitter Bootstrap。[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) 那里有很多助手，CSS 会自动为您检测移动设备，也就是您不需要所有代码来为您完成。谷歌 cakephp 引导程序，你会发现很多东西。最好的是它响应迅速，适用于各种屏幕分辨率的多个移动设备。

# asp.net-mvc-3 - ASP.NET & MVC3 & IIS7 HTTP 错误 500.19

> ID：12893191
> 
> 赞同：1
> 
> 时间：2012-10-15T09:53:47.883
> 
> 标签：asp.net-mvc-3, iis-7

我正在尝试部署我的 ASP.NET MVC3 应用程序，但是当我使用 IIS 7 运行它时（通过浏览 *:80(http)），我收到以下错误消息： [http ://hpics.li/4dc7c93](http://hpics.li/4dc7c93)

之后，我尝试为我的 Web.config 和我的项目文件夹授予用户“IIS_IUSRS”和我的其他用户的所有权限，但我得到一个没有错误消息或其他任何内容的空白页面。

在我的服务器管理器中，我检查了是否安装了“HTTP 错误”和“HTTP 重定向”，并且确实如此。

更多，我检查了我的事件查看器，我看到了这个错误：[http](http://hpics.li/1ee5563) ://hpics.li/1ee5563 。我不知道这是否与我的问题有关。

有关信息，我的应用程序池是使用 .NET Framework 4 的 DefaultAppPool，我正在使用 Windows Server 2008 R2 Standard、IIS7 和 .NET Framework 4。

你有什么建议来解决这个问题吗？我完全被困住了：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:05:35.447

这可能是由一系列问题引起的。[请参阅Web 应用程序问题（web.config 错误）HTTP 500.19 with IIS7.5 and ASP.NET v2 中](https://stackoverflow.com/questions/1808680/)的可能重复项

[尝试在应用程序池设置中启用 32 位应用程序。](https://stackoverflow.com/a/4196191/694325)这就是我猜的问题，但正如你所看到的，有一大堆答案，你都试过了吗？抱歉，这不是一个真正的答案。

# vb.net - 如何在后台工作人员中动态计算进度条值？

> ID：12893194
> 
> 赞同：1
> 
> 时间：2012-10-15T09:53:57.017
> 
> 标签：vb.net, winforms

如何根据gridview总行数动态计算后台工作人员中的进度条值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:45:05.247

BackgroundWorker 在不同于 UI 线程的线程上运行。[因此，如果您尝试从后台工作程序的DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)事件处理程序方法中修改表单上的任何控件，您将收到异常。

要更新表单上的控件，您有两种选择：

*   调用后台worker的[ReportProgress](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)方法，然后处理[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件。

```
Imports System.ComponentModel

Public Class Form1
    Public Sub bgw_DoWork(sender As Object, e As DoWorkEventArgs) Handles bgw.DoWork
        ' This is not the UI thread.
        ' Trying to update controls here *will* throw an exception!!
        Dim wkr = DirectCast(sender, BackgroundWorker)

        For i As Integer = 0 To gv.Rows.Count - 1
            ' Do something lengthy
            System.Threading.Thread.Sleep(100)
            ' Report the current progress
            wkr.ReportProgress(CInt((i/gv.Rows.Count)*100))
        Next
    End Sub

    Private Sub bgw_ProgressChanged(sender As Object, e As ProgressChangedEventArgs) Handles bgw.ProgressChanged
        'everything done in this event handler is on the UI thread so it is thread safe

        ' Use the e.ProgressPercentage to get the progress that was reported
        prg.Value = e.ProgressPercentage
    End Sub
End Class 
```

*   调用委托以在您的 UI 线程上执行更新。

```
Imports System.ComponentModel

Public Class Form1
    Public Sub bgw_DoWork(sender As Object, e As DoWorkEventArgs) Handles bgw.DoWork
        ' This is not the UI thread.
        ' You *must* invoke a delegate in order to update the UI.
        Dim wkr = DirectCast(sender, BackgroundWorker)

        For i As Integer = 0 To gv.Rows.Count - 1
            ' Do something lengthy
            System.Threading.Thread.Sleep(100)
            ' Use an anonymous delegate to set the progress value
            prg.Invoke(Sub() prg.Value = CInt((i/gv.Rows.Count)*100))
        Next
    End Sub
End Class 
```

**注意：**您还可以查看[我](https://stackoverflow.com/a/5281422/117870)对相关问题的回答以获取更详细的示例。

# hibernate - 获得 org.hibernate.exception.GenericJDBCException 的可能机会：无法执行查询”

> ID：12893196
> 
> 赞同：1
> 
> 时间：2012-10-15T09:54:05.977
> 
> 标签：hibernate

自过去 6 个月以来，我在我的项目中使用休眠 3.6，但有时我收到“org.hibernate.exception.GenericJDBCException：无法执行查询”错误。我不知道确切的原因。我对来自不同站点的不同答案感到困惑 :-( !! 发生此错误的可能情况是什么？

# android - 计算安卓测验的分数

> ID：12893197
> 
> 赞同：1
> 
> 时间：2012-10-15T09:54:06.147
> 
> 标签：android, android-activity, sharedpreferences

我正在做一个`quiz`，因为我有 3 个活动，，，，每个`Question1`都有4 个可能的答案（按钮），只有一个按钮是正确的。我必须在测验结束时计算并显示用户的分数。`Question2``Question3`

我做了一些研究，`SHAREDPREFERENECES`似乎是解决方案。但我不知道如何使用它可以请任何人帮忙。`Question1.java`代码如下：假设这`btnAnswer1a`是正确答案，我如何保存数据，然后`textview`在最后一个活动中显示它。

```
 Button Answer1, Answer2, Answer3, Answer4;
 public static final String PREFS_NAME = "MyPrefsFile";
 static SharedPreferences settings;
 SharedPreferences.Editor editor;
 int ScoreCount;

 @Override
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.answer1);

  settings = getSharedPreferences(PREFS_NAME, 0);
  editor = settings.edit();

  ScoreCount = settings.getInt("ScoreCount", 10);

   Answer1 = (Button) findViewById(R.id.btnAnswer1a);
   Answer2 = (Button) findViewById(R.id.btnAnswer1b);
   Answer3 = (Button) findViewById(R.id.btnAnswer1c);
   Answer4 = (Button) findViewById(R.id.btnAnswer1d);

   Answer1.setOnClickListener(this);
   Answer2.setOnClickListener(this);
   Answer3.setOnClickListener(this);
   Answer4.setOnClickListener(this);

         }

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
switch (arg0.getId()) {

    case R.id.btnAnswer1a:
          Intent Screen1 = new Intent(Answer1.this, Color2.class); 
          Answer1.this.startActivity(Screen1); 
          editor.putInt("ScoreCount", 6);
          editor.commit();
        break;

case R.id.btnAnswer1b:
      Intent Screen = new Intent(Answer1.this, Color2.class); 
    Answer1.this.startActivity(Screen);  
    break;

case R.id.btnAnswer1c:
      Intent Screen3 = new Intent(Answer1.this, Color2.class); 
    Answer1.this.startActivity(Screen3);  
    break;

case R.id.btnAnswer1d:
    Intent Screen2 = new Intent(Answer1.this, Color2.class); 
    Answer1.this.startActivity(Screen2);  
   break;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:58:56.040

我认为如果你传递信息的意图会更好。你可以这样做：

```
Intent i = new Intent("com.yourPackage.yourActivity");
i.putExtra("keyForExtra", _ID);
startActivity(i); 
```

和结果活动的 onCreate 你可以

```
String data = getIntent().getStringExtra("keyForExtra"); 
```

您可以将此字符串解析为整数或您喜欢的任何内容。

但是，如果您要使用共享偏好来执行此操作，那么对于编写：

```
SharedPreferences settings = getSharedPreferences(YOUR_CUSTOM_PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putInt("myScore", yourScore); // you can put a lot of thngs there. 
editor.commit(); 
```

要了解您还可以放什么，请看[这里](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

```
SharedPreferences settings = getSharedPreferences(YOUR_CUSTOM_PREFS_NAME, 0);
int currentScore = settings.getInt("myScore", defaultValue); 
```

有关共享首选项的详细存储文档，请查看[此处](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:14:01.517

是否有特定的原因让您希望针对每个问题进行不同的活动？对我来说似乎效率很低（冗余代码，容易出错，内存明智）。您可以将所有问题和答案存储在数组中，并使用整数跟踪当前问题和分数。回答问题后，检查答案、更新分数、增加当前问题、获取新问题和答案并将其设置为问题文本字段和按钮标签。无需以这种方式通过分数，因为所有内容都保留在一项活动中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:02:27.767

当你想写一些东西到 SharedPreferences 使用这个

```
SharedPreferences sharedPreferences = getSharedPreferences("your_name_of_shared_preferences", 0);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.clear();
editor.putInt("result", resultValue);
editor.commit(); 
```

要从他们那里读到一些东西，只需这样做

```
SharedPreferences sharedPreferences = getSharedPreferences("your_name_of_shared_preferences", 0);
int result = sharedPreferences.getInt("result", defaultValue); 
```

resultValue 是您的测验结果，如果您没有在该键下向 sharedPreferences 写入任何内容，则需要 defaultValue 。

# asp.net-mvc-3 - 需要澄清在 asp.net mvc 应用程序中使用 linq

> ID：12893201
> 
> 赞同：1
> 
> 时间：2012-10-15T09:54:23.970
> 
> 标签：asp.net-mvc-3, linq-to-entities, model-binding

我有从 DAL 检索数据的方法，如下所示：

```
public List<Comment> GetAllComment(int _UserID)
    {
        using (var context = new TourBlogEntities1())
        {
            var AllComment = from s in context.Comments
                             where s.UserID == _UserID
                             select s;

            return AllComment.ToList<Comment>();
        }
    } 
```

现在我试图从我的控制器调用这个方法，如下所示：

```
[HttpPost]
    public ActionResult NewComment(PostComment model)
    {
        var business = new Business();

        var entity = new Comment();
        entity.Comments = model.Comments.Comments;
        //entity.PostID = model.Posts.PostID; HOW TO PASS POSTID???
        entity.UserID = business.GetUserID(User.Identity.Name);

        business.PostComment(entity);

        var CommentsListFromEntity = business.GetAllComment(business.GetUserID(User.Identity.Name));

        var viewmodel = new PostComment();
        viewmodel.CommentsListFromModel = CommentsListFromEntity.ToList<CommentInfo>(); // Error is showing here  

        return View("ViewPost", viewmodel);
    } 
```

我将视图与模型绑定，但无法使用列表，即使我尝试将列表本身传递给视图，我仍然无法在视图中使用该列表！

我的模型类如下：

```
public class PostComment
{
    public PostComment()
    {
        Posts = new NewPost();
        Comments = new CommentInfo();
        User = new UserInfoModel();
    }

    public NewPost Posts { get; set; }
    public CommentInfo Comments { get; set; }
    public UserInfoModel User { get; set; }
    public List<CommentInfo> CommentsListFromModel { get; set; }

} 
```

那么如何使用视图中的列表呢？我非常需要帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:59:29.413

您需要从控制器操作返回 ActionResult：

```
public ActionResult GetAllComment(int _UserID)
{
    using (var context = new TourBlogEntities1())
    {
        var AllComment = from s in context.Comments
                         where s.UserID == _UserID
                         select s;

        return View(AllComment.ToList());
    }
} 
```

现在可以将相应的视图强类型化为`List<Comment>`：

```
@model List<Comment 
```

然后你可以遍历模型并显示它：

```
@foreach (var comment in Model) 
{
    <div><@comment.Text</div>
} 
```

* * *

更新：

如果此方法在您的 BLL 中，您可以在控制器操作中调用它并将结果传递给视图：

```
public ActionResult SomeAction(int userID)
{
    List<Comment> comments = bll.GetAllComment(userID);
    return View(comments);
} 
```

* * *

更新 2：

如果除了此列表之外，您还需要将其他属性传递给视图，那么您定义一个包含所有必要信息的视图模型：

```
public class MyViewModel
{
    public List<Comment> Comments { get; set; }
    public string Foo { get; set; }
    public string Bar { get; set; }
    ...
} 
```

然后让您的控制器操作将此视图模型传递给视图：

```
public ActionResult SomeAction(int userID)
{
    var model = new MyViewModel();
    model.Comments = bll.GetAllComment(userID);
    model.Foo = "that's the foo";
    model.Bar = "that's the bar";
    return View(model);
} 
```

最后你的视图被强类型化到新的视图模型：

```
@model MyViewModel

<h2>@Html.DisplayFor(x => x.Foo)</h2>

@foreach (var comment in Model.Comments)
{
    <div>@comment.Text</div>
}

<span>@Html.DisplayFor(x => x.Bar)</span> 
```

# jsf - 在编辑之前检索数据表行对象的值

> ID：12893204
> 
> 赞同：1
> 
> 时间：2012-10-15T09:54:36.913
> 
> 标签：jsf

我有一个 Action 类型的 dataTble cotaining 对象，用户可以选择一个动作来修改它，所以我想在修改它之前检索旧动作，所以我尝试使用 onStart 属性来执行它，但我收到了这个错误：

```
oct. 15, 2012 11:42:12 AM 
 com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback visit 
 Grave: javax.el.PropertyNotFoundException: /manageProjectTestsPage.xhtml @342,417       
 onstart="#{projectTestManagementMB.initOldAction}": Property 'initOldAction' not found 
 on type tn.talan.testFramework.managedBean.ProjectTestManagementMB 
```

这是代码：

```
 public String initOldAction(){
     String index=(String)    

     FacesContext.getCurrentInstance().getExternalContext().
     getRequestParameterMap().get("index");
 System.out.println("index "+index);

  oldSelectedAction =testActionList.get(Integer.parseInt(index));
  return null;

} 
```

xhtml:

```
 <p:column headerText="Options">  

     <p:commandLink id="modifyManualActionBtn" style="margin-right:5px"     onstart="# 
     {projectTestManagementMB.initOldAction}"  actionListener="#
      {projectTestManagementMB.verifyTestDisponibilityActionModifying}"  
      title="modify" update=":form:growl :form:testTabView:confirmModifyActionDialog 
      :form:testTabView:addModifyActionDlg" disabled="#
       {projectTestManagementMB.modifyBtnFlag}">
       <h:graphicImage value="../images/cssImg/modify_icon.png" heigth="13"width="17"/>
       <f:param name="index" value="#{rowIndex}" />
      </p:commandLink>
  .... 
```

那么如何在执行actionListener之前使用onstart属性来检索旧的动作值`actionListener="# {projectTestManagementMB.verifyTestDisponibilityActionModifying}"` 如果我不能使用它，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:49:24.480

您正在检索此错误，因为该`onstart`属性是一个值属性，应设置为 Javascript 表达式以在 ajax 请求开始之前执行。您可以在此处使用 EL 表达式，但它不像`actionListener`which 需要方法表达式。

由于在 EL 表达式中没有括号`onstart`，JSF 假定这是对托管属性而不是方法的调用。试试这个：

```
onstart="#{projectTestManagementMB.initOldAction()}" 
```

这不是您的实际问题，但是因为您的方法`initOldAction()`不返回包含 Javascript 表达式的字符串。我不认为这个属性做你认为它做的事情，它只是一个客户端回调。

# html - 如何在 CSS 中设置输入（文本）字段的高度？

> ID：12893205
> 
> 赞同：45
> 
> 时间：2012-10-15T09:54:37.267
> 
> 标签：html, css, textfield

很抱歉这个问题，但我似乎无法在任何地方找到答案。我有应该设置我的文本框高度的 CSS 代码。我在 Windows 手机上使用 VS2010 Express，用 HTML/CSS/Javascript/C# 编码。

**HTML**

```
<input class="heighttext" type="text" id="name"> 
```

**CSS**

```
.heighttext{
  height:30px
} 
```

我可以将高度设置为我喜欢的任何值，但文本框将保持不变！请帮忙，或者至少给我一个可以的链接！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-15T09:59:37.517

尝试`padding`和`line-height`-

```
input[type="text"]{ padding: 20px 10px; line-height: 28px; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T10:01:51.593

众所周知，表单控件的样式很难跨平台/浏览器。有些浏览器会遵守 CSS`height`规则，有些则不会。

您可以尝试`line-height`（可能需要`display:block;`or `display:inline-block;`）或`top`and `bottom padding`also。如果这些都不起作用，那就差不多了 - 使用图形，将`input`放置在中心并设置`border:none;`，这样*看起来*表单控件很大，但实际上不是......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-27T04:40:15.810

不要在输入字段中使用高度属性。

例子：

```
.heighttext{
    display:inline-block;
    padding:15px 10px;
    line-height:140%;
} 
```

始终使用**填充**和**行高**css 属性。它适用于所有移动设备和所有浏览器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-13T04:17:39.970

> 最好的方法是：

```
input.heighttext{
  padding: 20px 10px;
  line-height: 28px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-27T04:29:05.530

您应该使用 font-size 来控制高度，它在浏览器中得到广泛支持。为了增加间距，您应该使用填充。例如，

```
.inputField{
  font-size: 30px;
  padding-top: 10px;
  padding-bottom: 10px;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-15T10:00:59.560

您使用此样式代码

```
.heighttext{
 float:right;
 height:30px;
 width:70px;
 } 
```

# jquery - 访问dojo中两个div标签内的输入标签

> ID：12893207
> 
> 赞同：0
> 
> 时间：2012-10-15T09:54:44.700
> 
> 标签：jquery, dojo, dijit.form

```
var t=dojo.query(".classform") 
```

给我所有的 div 和输入标签，名称为 classform。

t[0]=

```
<div class="dijit dijitReset dijitInline dijitLeft dijitTextBox classofform" id="widget_country" role="presentation" widgetid="country" style="width: 5em; ">

<div class="dijitReset dijitInputField dijitInputContainer">
 <input class="dijitReset dijitInputInner" data-dojo-attach-point="textbox,focusNode" autocomplete="off" name="textbox " type="text" tabindex="0" id="country" value=""></div> 
```

现在我想访问两个 div 中的输入标签。应该使用哪个命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:06:52.740

您可以使用以下代码访问两个 div 内的输入标签。

> var t=dojo.query("div #widget_country div 输入");

# css - 线性渐变 CSS

> ID：12893213
> 
> 赞同：0
> 
> 时间：2012-10-15T09:55:07.923
> 
> 标签：css

在大家的帮助下。我对 CSS 并不陌生，但对这个问题并不陌生。我真的很想使用 CSS 渐变属性。但我需要的方式是我需要设置从下到上和从右到左的渐变。就像滚动条一样，在页面右侧和底部。我创建了从下到上的一类和从右到左的一类。Simpe CSS 概念用最新样式覆盖。

我该如何应对这种情况。我尝试的方式如下：

```
.bottom_to_top{background: -webkit-linear-gradient(center top, #FFFFFF 95%, #80868E 100%);}
.right_to_left{-webkit-linear-gradient(center left,#FFFFFF 95%, #80868E 100%);} 
```

我已经调用了这两个类，但只是一个被另一个覆盖。我该如何应对这种情况。没有浏览器兼容性（仅适用于 Chrome）。也不需要图像使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:12:27.643

要显示两种渐变，您需要在顶部设置半透明。

[**演示**](http://jsfiddle.net/gionaf/qpHfe/)

CSS：

```
.bottom_to_top{
    background: -webkit-gradient(linear, center top, center bottom, color-stop(95%, #FFFFFF), color-stop(100%, #80868E));
    background: -webkit-linear-gradient(top, #FFFFFF 95%, #80868E 100%);
}
.right_to_left{
    background-image: -webkit-gradient(linear, left center, right center, color-stop(0%, rgba(255, 255, 255, 0.2)), color-stop(95%, rgba(255, 255, 255, 0.5)), color-stop(100%, #80868E));
    background-image: -webkit-linear-gradient(left, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.5) 95%, #80868E 100%);
}​ 
```

请注意，`.right_to_left`使用`rgba`而不是`hex`. 根据您的需要调整它（您可以使用简单的在线生成器，如[visualcsstools](http://www.visualcsstools.com/)）。

此外，要获得完整的 Chrome 支持，您需要[双重声明](http://caniuse.com/#feat=css-gradients)(Chrome<10)

* * *

使用具有[多个 bgs](http://caniuse.com/#feat=multibackgrounds)的单个 div ：

[**演示**](http://jsfiddle.net/gionaf/wXEXM/)

```
.gradients{
    background:-webkit-gradient(linear, left center, right center, color-stop(0%, rgba(255, 255, 255, 0.2)), color-stop(95%, rgba(255, 255, 255, 0.5)), color-stop(100%, #80868E)), -webkit-gradient(linear, center top, center bottom, color-stop(95%, #FFFFFF), color-stop(100%, #80868E));
    background:-webkit-linear-gradient(left, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.5) 95%, #80868E 100%),  -webkit-linear-gradient(top, #FFFFFF 95%, #80868E 100%);
} 
```

如您所见，第一个声明在*前面*，而第二个声明是*背景*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:57:21.310

你的问题是你实际上只使用`-webkit-linear-gradient(center left,#FFFFFF 95%, #80868E 100%);`你应该使用的

```
-webkit-linear-gradient(center left,#FFFFFF 95%, #80868E 100%);
-o-linear-gradient(center left,#FFFFFF 95%, #80868E 100%);
-moz-linear-gradient(center left,#FFFFFF 95%, #80868E 100%); 
```

IE 对渐变很棘手，你必须使用`filter`

# windows - 没有框架依赖的 Windows 语言？

> ID：12893215
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:55:16.730
> 
> 标签：windows

我想开发将与我的 php 服务器通信的应用程序。此应用程序将由多个用户使用。请建议任何不依赖于 c# 的语言依赖于 dot net 框架。我想要一些简单的东西，比如不需要安装任何依赖框架的 gtalk。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T10:06:46.757

如果您想为 GTalk 创建客户端，则可以使用[此库](http://code.google.com/p/xmpphp/)。但是您必须为此创建一个智能应用程序。如果您有任何歧义，请随时询问

# php - 使用 PHP 发送附件问题

> ID：12893218
> 
> 赞同：0
> 
> 时间：2012-10-15T09:55:24.927
> 
> 标签：php, email, email-attachments

我尝试使用 PHP 在我的网站上发送自动创建的电子邮件。经过一番努力，我最终得到了这个脚本，但由于某种原因，我得到了一个错误，我不知道为什么。

```
function sendMail($_POST) {
    $fileatt = "http://www.mysite.com/contract.pdf";  
    $fileatt_type = "application/pdf"; 
    $fileatt_name = "contract.pdf"; 

    $email_from = "info@mysite.com"; 
    $email_subject = "Your Contract";  
    $email_message = "Thanks for your booking! Here is your contract"; 

    $email_to = $_POST['mail']; // Who the email is to

    $headers = "From: ".$email_from;

    $file = fopen($fileatt,'r'); 
    $data = fread($file,filesize($fileatt)); 
    fclose($file);

    $semi_rand = md5(time()); 
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

    $headers .= "\nMIME-Version: 1.0\n" . 
    "Content-Type: multipart/mixed;\n" . 
    " boundary=\"{$mime_boundary}\"";

    $email_message .= "This is a multi-part message in MIME format.\n\n" . 
    "--{$mime_boundary}\n" . 
    "Content-Type:text/html; charset=\"iso-8859-1\"\n" . 
    "Content-Transfer-Encoding: 7bit\n\n" . 
    $email_message .= "\n\n";

    $data = chunk_split(base64_encode($data));

    $email_message .= "--{$mime_boundary}\n" . 
    "Content-Type: {$fileatt_type};\n" . 
    " name=\"{$fileatt_name}\"\n" . 
    //"Content-Disposition: attachment;\n" . 
    //" filename=\"{$fileatt_name}\"\n" . 
            "Content-Transfer-Encoding: base64\n\n" . 
    $data .= "\n\n" . 
    "--{$mime_boundary}--\n";

    $ok = @mail($email_to, $email_subject, $email_message, $headers);

    if($ok) { 
        echo "You file has been sent to the email address you specified";
    } else { 
        die("Sorry but the email could not be sent. Please go back and try again!"); 
    }
} 
```

并且脚本确实发送了电子邮件并包含附件，但附件的大小为 0kb。如果我看到我的错误，这是有道理的：

```
Warning: filesize(): stat failed for http://www.mysite.com/test.pdf in /customers/9/7/5/mysite.com/functions.php on line 712
Warning: fread(): Length parameter must be greater than 0 in /customers/9/7/5/mysite.com/functions.php on line 712 
```

有人可以向我提供有关如何解决此问题的更多信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:12:28.287

这可能是由于您尝试上传的文件过大。在您的服务器配置中增加“Max_upload_filesize”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:07:38.103

您尝试过的附件尺寸是多少？也许您应该增加上传文件大小限制，请参阅[http://drupal.org/node/97193](http://drupal.org/node/97193)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:58:32.683

我认为最简单的解决方案是使用 PHPMailer 或[SwiftMailer](http://swiftmailer.com/)之类的脚本。这是大多数人所做的，并消除了使用 PHP 发送电子邮件的困难。试图`mail()`在 PHP 中使用该函数而不是专家是一个杀手！

# objective-c - ipa 版本的内容与直接从 Xcode 调试不同

> ID：12893225
> 
> 赞同：0
> 
> 时间：2012-10-15T09:55:51.300
> 
> 标签：objective-c, ios, distribution, ipa

我有一个用于新安装的页面。

当用户安装此应用程序时，应用程序肯定会进入“调查”页面。

当我从设备内的 Xcode 直接调试时，这会正确运行。

但是，我生成了一个 ipa 文件并同步到设备中。应用程序跳过“调查”页面并直接转到另一个页面。

在同步之前，我已经删除了旧应用程序。

这是检查逻辑。仅供参考。

```
DatabaseAction *getsurvey = [[[DatabaseAction alloc] init] autorelease];
NSArray *survey = [getsurvey retrieveSurvey];
int check;
for(SurveyForm *form in survey){
    check = form.Submitted;
    break;
}

if(check == 1){
    Main_AllLatestNews *GtestClasssViewController=[[[Main_AllLatestNews alloc] initWithNibName:@"Main_AllLatestNews"  bundle:nil] autorelease];
    GtestClasssViewController.autodownload = YES;
    [self presentModalViewController:GtestClasssViewController animated:NO];
}else{
    Menu_newUserForm *GtestClasssViewController=[[[Menu_newUserForm alloc] initWithNibName:@"Menu_newUserForm"  bundle:nil] autorelease];
    [self presentModalViewController:GtestClasssViewController animated:NO];
} 
```

# php - MySQLi：在 MySQL 表中搜索数组元素

> ID：12893227
> 
> 赞同：0
> 
> 时间：2012-10-15T09:55:55.553
> 
> 标签：php, mysql, arrays, mysqli

我目前正在使用以下代码片段来搜索数据库

```
for($i=0; $i<sizeof($deleted_records);$i++)  { 

    if($stmt->prepare("SELECT `id`, `status` FROM `02-2012` WHERE `id` = ?")) {

    // Bind your variable to replace the ?
    $stmt->bind_param('s', $id);

    // Set your variable    
    $id = $deleted_records[$i];

    // Execute query
    $stmt->execute();

    // Bind your result columns to variables
    $stmt->bind_result($id_f, $stat_f);

    // Fetch the result of the query
    while($stmt->fetch()) {
        //echo $id_f . ' - ' . $stat_f . '<div>';
        array_push($hits, $id_f);

    } 
```

}

在哪里

```
$deleted_records 
```

是一个大数组（基本上是试图在'02-2012'表中找到该数组元素的所有出现）

这种方法的问题在于它非常缓慢。我确信有比这种蛮力方法更好/更优雅的方法。

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:58:29.783

而不是每次使用 PHP 循环并执行查询您可以使用`IN`子句并执行一次查询。

问题是我们不能这样做：

```
if($stmt->prepare("SELECT `id`, `status` FROM `02-2012` WHERE `id` IN (?)")) { 
```

我们需要为您要传入的每个参数设置一个单独的占位符，确保它`$deleted_records` 是一个数组。 `$qMarks`是一串占位符`?,?,?,?,?`。

```
$qMarks = str_repeat('?,', count($deleted_records) - 1) . '?';
//Suggested by @DonamiteIsTnt (http://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

if($stmt->prepare("SELECT `id`, `status` FROM `02-2012` WHERE `id` IN ($qMarks)")) {

  $stmt->execute($deleted_records);
} 
```

没测试。

# json - 从 json 对象中提取数据

> ID：12893229
> 
> 赞同：0
> 
> 时间：2012-10-15T09:55:56.393
> 
> 标签：json, excel, vba

我的 Json 看起来像 {"valid":"true","isinCode":null,"lastUpdateTime":"15-OCT-2012 14:18:56","tradedDate":"15OCT2012","data": [{"change":"16.75","lastPrice":"5,703.30"}

我已经能够使用 jsonlib 将其提取到 JSON 对象中。

我如何从中提取“lastPrice”作为它的嵌套 json（数据是另一个 json 对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:48:32.760

我使用类似下面的东西，虽然它非常特定于 JSON，但足够轻，可以在每次我需要解析新数据时重新调整：

```
Public Sub ReadJson()

    Const JsonString    As String = "{""valid"":""true"",""isinCode"":null,""lastUpdateTime"":""15-OCT-2012 14:18:56"",""tradedDate"":""15OCT2012"",""data"":[{""change"":""16.75"",""lastPrice"":""5,703.30""}]}"
    Dim objJson         As Object
    Dim objSE           As Object

    Set objSE = CreateObject("ScriptControl")

    With objSE
        .Language = "JScript"
        .AddCode "function getProp(jsonObj, propertyName) { return jsonObj[propertyName]; } "
        .AddCode "function getSubProp(jsonObj, pName, propertyName) { return jsonObj[pName][0][propertyName]; } "
    End With

    With objSE
        Set objJson = .Eval("(" + JsonString + ")")
        Debug.Print .Run("getProp", objJson, "valid")
        Debug.Print .Run("getProp", objJson, "isinCode")
        Debug.Print .Run("getProp", objJson, "lastUpdateTime")
        Debug.Print .Run("getProp", objJson, "tradedDate")
        Debug.Print .Run("getSubProp", objJson, "data", "change")
        Debug.Print .Run("getSubProp", objJson, "data", "lastPrice")
    End With

End Sub 
```

# android - 在适配器的构造函数中膨胀 xml 文件

> ID：12893231
> 
> 赞同：1
> 
> 时间：2012-10-15T09:56:07.657
> 
> 标签：android, constructor, grid-layout, layout-inflater

我有一个 ExpandableListView 并正在为其设置一个自定义的 BaseExpandableAdapter。我的问题是，我可以膨胀我想在适配器本身的构造函数中显示的 Layout(XML)，而不是每次都在 getChildView() 中膨胀它吗？不过，我将动态更改要在 getChildView() 中选择的每个可扩展列表显示的图像。代码在这里。

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

    private Context mContext;
    private LayoutInflater mInflater;
    GridLayout gl = null;
    HorizontalScrollView hScrl;
    public MyExpandableListAdapter (ArrayList<SensorType> parentGroup, Context context) {       
        mContext = context;
        mInflater = LayoutInflater.from(mContext);
        View view = infalInflater.inflate(R.layout.expandlist_items, null);
    gl = (GridLayout) view.findViewById(R.id.gl);
        hScrl = (HorizontalScrollView) view.findViewById(R.id.hScroll);
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
       if (childPosition == 0) {
            gl1.removeAllViews();
        }
        int mMax = 8; // show 8 images
       for (int i =0; i < mMax; i++) {
        ImageView myImg = new ImageView(mContext);                            
                myImg.setBackgroundRes(R.drawable.image1);
                gl.addView(myImg);
          }

return hScrl;
} 
```

上面有什么问题吗，如果有更多图像，它会正确显示图像并且滚动。但我的问题是，这个膨胀布局和获取 gl 和 hscrl 的工作，应该在 Adapter 的构造函数中（如上所示）还是应该在 getChildView 中？

这 4 个 LOC：

```
mInflater = LayoutInflater.from(mContext);
View view = infalInflater.inflate(R.layout.expandlist_items, null);
gl = (GridLayout) view.findViewById(R.id.gl);
hScrl = (HorizontalScrollView) view.findViewById(R.id.hScroll); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:17:38.493

我发现如果我需要为适配器中的每个项目一次又一次地膨胀布局，那么膨胀应该在任何适配器的 getChildView() 或 getView() 中完成。但是在上面的代码中，我在构造函数中将其充气一次并将图像手动添加到 GridLayout，因此我不需要在 getChildView() 中一次又一次地充气。因此它工作正常，因为它在适配器的构造函数中膨胀一次。

# c++ - C++ - _expand 是有限的

> ID：12893232
> 
> 赞同：0
> 
> 时间：2012-10-15T09:56:08.343
> 
> 标签：c++, windows, memory-management

我使用[_expand](http://msdn.microsoft.com/en-us/library/wfzt8b7y.aspx)将内存从 256KB 扩展到 512KB，但它失败了（返回 NULL），但是当我将 512B 扩展到 1024B 时它可以工作。

是否有[_expand](http://msdn.microsoft.com/en-us/library/wfzt8b7y.aspx)的替代品适用于更大的尺寸？

# mysql - mysql 从不同的表中选择 if 子句

> ID：12893233
> 
> 赞同：3
> 
> 时间：2012-10-15T09:56:09.450
> 
> 标签：mysql, sql, select

**表：用户**

```
| userid | fullname |
|   1    |  admin   |
|   2    |  jimmy   |
|   3    |  anton   |
|   4    |  steven  | 
```

**表：机械**

```
| maschine | maschine-name |
|    1     |       M1      |
|    2     |       M2      |
|    3     |       M3      |
|    4     |       M4      | 
```

**表： vorrichtungen**

```
| id | maschine | vorrichtung | createdby |      datecreated    | updatedby |     dateupdated     |
| 1  |    1     |    11111    |     1     | 2012-06-23 17:10:25 |     1     | 2012-06-23 18:15:20 |
| 2  |    1     |    22222    |     1     | 2012-06-25 07:50:49 |     0     | 0000-00-00 00:00:00 |
| 3  |    2     |    33333    |     2     | 2012-06-27 10:22:29 |     0     | 0000-00-00 00:00:00 |
| 4  |    3     |    44444    |     2     | 2012-06-28 09:41:27 |     1     | 2012-06-28 12:40:37 |
| 5  |    4     |    11111    |     3     | 2012-06-29 15:53:47 |     0     | 0000-00-00 00:00:00 |
| 6  |    4     |    33333    |     4     | 2012-06-29 22:30:02 |     2     | 2012-06-29 22:30:02 | 
```

**我的查询如下所示：**

```
SELECT
    vorrichtungen.`id`, 
    maschinen.`maschine-name` AS maschine, 
    vorrichtungen.`vorrichtung`, 
    vorrichtungen.`createdby`, 
    user.`fullname` AS creator, 
    vorrichtungen.`datecreated`, 
    vorrichtungen.`updatedby`, 
    vorrichtungen.`dateupdated`
FROM 
    vorrichtungen,maschinen,user
WHERE 
    maschinen.`maschine` = vorrichtungen.`maschine` 
AND 
    vorrichtungen.`createdby` =  user.`userid` 
```

**我收到了这个结果：**

```
| id | maschine | vorrichtung | createdby | creator |      datecreated    | updatedby |     dateupdated     |
| 1  |    M1    |    11111    |     1     |  admin  | 2012-06-23 17:10:25 |     1     | 2012-06-23 18:15:20 |
| 2  |    M1    |    22222    |     1     |  admin  | 2012-06-25 07:50:49 |     0     | 0000-00-00 00:00:00 |
| 3  |    M2    |    33333    |     2     |  jimmy  | 2012-06-27 10:22:29 |     0     | 0000-00-00 00:00:00 |
| 4  |    M3    |    44444    |     2     |  jimmy  | 2012-06-28 09:41:27 |     1     | 2012-06-28 12:40:37 |
| 5  |    M4    |    11111    |     3     |  anton  | 2012-06-29 15:53:47 |     0     | 0000-00-00 00:00:00 |
| 6  |    M4    |    22222    |     4     |  steven | 2012-06-29 22:30:02 |     2     | 2012-06-29 22:30:02 | 
```

我试着解释我想要什么..

if updatedby !=0 比 select fullname from table user AS updatetor else 0 或类似的东西..但我想要所有 6 行

**我想收到这个结果：**

```
| id | maschine | vorrichtung | createdby | creator |      datecreated    | updatedby | updatetor |     dateupdated     |
| 1  |    M1    |    11111    |     1     |  admin  | 2012-06-23 17:10:25 |     1     |   admin   | 2012-06-23 18:15:20 |
| 2  |    M1    |    22222    |     1     |  admin  | 2012-06-25 07:50:49 |     0     |      0    | 0000-00-00 00:00:00 |
| 3  |    M2    |    33333    |     2     |  jimmy  | 2012-06-27 10:22:29 |     0     |      0    | 0000-00-00 00:00:00 |
| 4  |    M3    |    44444    |     2     |  jimmy  | 2012-06-28 09:41:27 |     1     |   admin   | 2012-06-28 12:40:37 |
| 5  |    M4    |    11111    |     3     |  anton  | 2012-06-29 15:53:47 |     0     |      0    | 0000-00-00 00:00:00 |
| 6  |    M4    |    22222    |     4     |  steven | 2012-06-29 22:30:02 |     2     |   jimmy   | 2012-06-29 22:30:02 | 
```

有可能意识到这一点吗？感谢您的帮助 ：）

问候伯尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:02:51.237

```
SELECT
    v.`id`, 
    m.`maschine-name` AS maschine, 
    v.`vorrichtung`, 
    v.`createdby`, 
    v.`datecreated`,
    creator.fullname as creator,
    v.`updatedby`,
    case when v.updatedby is null then '0' else updator.`fullname` end AS updatetor,
    v.`dateupdated`
from
    vorrichtungen v
    inner join
    user creator on creator.userid = v.createdby
    left join
    user updator on updator.userid = v.updatedby
    inner join
    maschinen m on m.maschine = v.maschine 
order by datecreated 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:25:45.003

这将使您返回更接近您想要的东西。

```
SELECT
vorrichtungen.`id`, 
maschinen.`maschine-name` AS maschine, 
vorrichtungen.`vorrichtung`, 
vorrichtungen.`createdby`, 
creatortable.`fullname` AS creator, 
vorrichtungen.`datecreated`, 
vorrichtungen.`updatedby`, 
updatetortable.`fullname` AS updatetor ,
vorrichtungen.`dateupdated`
FROM 
vorrichtungen,
maschinen,
user as creatortable ,
user as updatetortable 
WHERE 
vorrichtungen.createdby =  creatortable.userid
AND
vorrichtungen.updatedby =  updatetortable.userid
AND
vorrichtungen.id        =   maschinen.maschine 
```

# symfony - Symfony2 的最佳负载测试工具

> ID：12893239
> 
> 赞同：0
> 
> 时间：2012-10-15T09:56:29.430
> 
> 标签：symfony, symfony-2.1

我有一个关于负载测试工具的问题，这些工具可以帮助我用 Symfony2 开发的网站确保良好的性能。

我对测试真的很陌生，所以我需要知道用于 Symfony2 的最佳开源工具？

# java - Java RSA 加密就像 C# Dot Net

> ID：12893241
> 
> 赞同：2
> 
> 时间：2012-10-15T09:56:30.973
> 
> 标签：java, encryption, rsa

我在 C# 程序中使用了 RSA 不对称密钥加密算法（我在下面提到过），我必须通过 java 程序加密数据。我希望我的 java 程序生成与 C# 程序结果相同的加密密钥。

**公钥：**

```
<RSAKeyValue>
<Modulus>zgfXY1oUe4nyndX4qtobP1BMxtJ1/rfKU5csdAcWrSVu6ZaEAX3rL3cWnaSLzX4E1BNjSP9pjge6TH7UoaWqOQ==</Modulus>
<Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

**C#加密程序：**

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();

 rsa.FromXmlString(PublicKey); // read public key XML defined above

byte[] buffer = rsa.Encrypt(Encoding.UTF8.GetBytes(strToEncrypt), false);

string encryptedStr = HttpUtility.UrlEncode(buffer);// byteConverterGetString; 
```

**Java加密程序：**

```
byte[] modulusBytes = Base64.decode("zgfXY1oUe4nyndX4qtobP1BMxtJ1/rfKU5csdAcWrSVu6ZaEAX3rL3cWnaSLzX4E1BNjSP9pjge6TH7UoaWqOQ==");
byte[] exponentBytes = Base64.decode("AQAB");

BigInteger modulus = new BigInteger(1, modulusBytes );               
BigInteger exponent = new BigInteger(1, exponentBytes);

RSAPublicKeySpec rsaPubKey = new RSAPublicKeySpec(modulus, exponent);

KeyFactory fact = KeyFactory.getInstance("RSA");

PublicKey pubKey = fact.generatePublic(rsaPubKey);

Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");

cipher.init(Cipher.ENCRYPT_MODE, pubKey);

byte[] plainBytes = new String("Admin123").getBytes("UTF-8");

byte[] cipherData = cipher.doFinal( plainBytes );

String encryptedString = Base64.encodeBytes(cipherData);

System.out.println(URLEncoder.encode(encryptedString)); 
```

我尝试了上面的java程序，但它给了我这样的结果：

o%2Bgw7%2BXhYxA9ltDV5zERsF4DyXgMTc%2Fgx82wRtT1xfR3suY0XBJLadp7bXjmSX7CplDVdoQyH05Jpqgkd%2B1G4A%3D%3D

和 C# 程序生成类似

%23E%03%c2%10)%40E%bf%7b%f9%11%87c0%12q%b9w%ba%2c%98%b4%b1%96%bc%ee%c5_%c9t%1e'%e71 %85%b68t%00%3a%b7%d9%fb%a1%18%ba%10%b4%c3c%e1'*%3b%f6D%e2%cc6%82%80%f2%a6

所以任何人都可以帮我纠正我的java程序..谢谢

# c - 在不激活中断的情况下模拟中断

> ID：12893243
> 
> 赞同：0
> 
> 时间：2012-10-15T09:56:35.637
> 
> 标签：c, assembly, interrupt

是否可以在不激活中断的情况下模拟中断的动作。

我问的原因是因为我使用的微控制器只允许我在任何给定时间激活一个中断。当我创建一个时间触发系统时，我已经为定时器设置了一个中断。

基本上我必须创建一个 TT 系统（时间触发），以便定期部署功能。我正在创建一个数据记录系统，所以字符从 UART 进来并被存储和记录。我需要为串行端口设置一个中断，这将在用户输入字符时发生。所以我需要设计一个有两个中断的系统，一个用于定时器，一个用于串口。但是控制器不允许同时激活两个中断。

如果这令人困惑，我真的很抱歉，我已经将数据表的链接发布到控制器，这是我的接口代码

```
void Menu_Update(void)
{
    uint8_t x=010;
    char i;
    i= (char)x;
    // Perform an appropriate action based on the current state.
    //Disable_Interrupt();
    //Enable_System_Interrupt(UART1);
    timer_count++;
    switch (menu_state)
    {
    case MAIN_MENU :
        // Output the initial menu choices and move to the wait state.
        Serial_UART_Write_String("Waiting for character input.......\r\n");
        Serial_UART_Write_String("To view data, enter 'a' \r\n");
        menu_state = MENU_WAIT ;
        break;
    case MENU_2:
        Serial_UART_Write_String("\r\nWould you also like to store this character as well?\r\n");
        Serial_UART_Write_String("Yes Enter 'y' \r\n");
        Serial_UART_Write_String("No Enter 'n' \r\n");
        menu_state = MENU_WAIT ;
        break;
    case MENU_WAIT :
        // Do nothing unless user input was detected.
    default:
        if (Serial_UART_Received_Data())
        {
            const char value = Serial_UART_Read();
            temp = value;
            Serial_UART_Write_String("\r\n***Character: ");
            Serial_UART_Write_Char(value);
            Serial_UART_Write_String(" has been received***\r\n");
            if (value == 'a'||menu_check==1)
            {
                menu_check =1;
                if (value == 'y')
                {
                    menu_check =0;
                    menu_state = WRITE_CHAR;
                }
                if (value == 'n')
                {
                    Serial_UART_Write_String("\r\nSegment format -> ");
                    Serial_UART_Write_String("Character count.Time\r\n");
                    menu_check =0;
                    menu_state = DISPLAY;
                }
                if (menu_check==1)
                {
                menu_state = MENU_2;
                }
            }
            else
            {
                menu_state = WRITE_CHAR;
            }
        }
        break;
    case WRITE_CHAR:
        character_array_storage[character_count]=temp;
        charac_time = timer_count - ref_timer;
        timer_interval_array[character_count]=charac_time;
        character_count++;
        Serial_UART_Write_String("\r\n***Character Stored***\r\n");
        menu_state = MAIN_MENU;
        break;
    case DISPLAY:
        assign_value(character_count,charac_time);
        Serial_UART_Write_String("\r\n***Segments Updated***\r\n");
        menu_state = MAIN_MENU;
        break;
    }
    //Disable_Interrupt();
    //Enable_System_Interrupt(TIMER0);
}
void Enable_System_Interrupt(const uint32_t int_source)
{
    Status_Reg_Set((Status_Reg_Get()& 0xFFFFF8FF) | (int_source << 8));
}
void Status_Reg_Set(uint32_t value)
{
    __asm volatile("mtc0 %0, $12" :: "d" ((unsigned long)(value)));

} 
```

[数据表](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http://www.tte-systems.com/downloads/tte32_hr2_lite_data_prog.pdf&ei=eOB7UPXYJoGu0QWXxIHgDA&usg=AFQjCNHp2vWU-OowYlIbkV1xTocmDF2vjQ&sig2=Bqkamt38BVQzA_PHSML3AQ) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:25:37.817

如果您对微处理器的汇编程序足够了解，则可以这样做。检查您的文档，但对于 90% 的 CPU，在调用中断处理程序之前将当前状态字推入堆栈就足够了。在这种情况下，它将使用其`iret`指令成功返回。

在一天结束时，中断处理程序是相同的功能，只是它保留了更多的寄存器并在最后执行`iret`而不是普通的`ret`。

# php - 如何在现有数组中追加数据而不覆盖整个数组

> ID：12893246
> 
> 赞同：3
> 
> 时间：2012-10-15T09:56:44.910
> 
> 标签：php, arrays, fwrite

这是我的代码，在这段代码中，我正在通过函数 read_from_json 读取现有数组，该函数**将 JSON 转换为数组**，现在**我从远程数据获取新数据**，因此我必须将这些数据附加到现有数组中而不覆盖整个数组大批。就像我得到一个 id 一样，它使用 in_array 函数进行搜索，如果找不到，则向它发送一条消息，然后将唯一的特定条目附加到现有数组中。由于 foreach 迭代存在问题，因此它会覆盖所有数组，我还能做什么。请看一下这段代码：

```
$read_data = $this->read_from_json( 'xyz.json' );

foreach ( $projects_id_tickcamp as $tick_id => $base_id ) {

            if ( !$this->in_array( $base_id['base_id'], $read_data ) ) {

                echo '<b>do post message function for ' . $tick_id . ' ' . $base_id['base_id'] . '</b><br />';

                $i = count( $read_data );

                while ( $i >= count( $base_id['base_id'] ) ) {

                    echo 'post message start' .'<br />';
                    $i++;
                    break;
                    $projects_id_tickcamp[$tick_id]['message_id'] = 1;

                }

                //echo 'posted message id of ' . $base_id['basecamp_id'] . '<br />';
            } else {
                echo 'do nothing' . '<br />';
                //return false;
            }
        }

        //echo 'write data if id similar' . '<br />';
        $this->write_to_json( 'xyz.json', $projects_id_tickcamp );
        return $projects_id_tick; 
```

上述代码的输出如下所示：

```
Array
(
    [125434] => Array
        (
            [base_id] => 1306755
        )

    [127354] => Array
        (
            [base_id] => 1287834
        )

) 
```

如果从远程获取新的 id，则 id 仅写入数组的最后一个位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T10:03:25.970

你有几个选择：

*   [array_push()](http://php.net/manual/en/function.array-push.php)
*   [数组合并（$curr_array，$new_array）](http://php.net/manual/en/function.array-merge.php)
*   $array[] = $newValue

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:02:23.387

返回另一个值后，使用 array_merge 将解决此问题。

例子：

```
$result_array=array_merge($arr1,$arr2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:01:47.033

如果你想在 PHP 数组中添加一些东西，你可以使用`$myArray[] = "new value"`

# android - 用于 3d 游戏的 Android API 或游戏平台

> ID：12893251
> 
> 赞同：1
> 
> 时间：2012-10-15T09:57:25.790
> 
> 标签：android

我打算在android中开发3d游戏。我只想知道我应该为 3d 格斗游戏使用哪些库。安卓中有没有可以帮助我进行 3D 游戏开发的游戏平台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:48:12.707

The best choice for me is Libgdx. You can download it here : [http://libgdx.badlogicgames.com](http://libgdx.badlogicgames.com)

Also you can see features what API's supports: [http://libgdx.badlogicgames.com/features.html](http://libgdx.badlogicgames.com/features.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T12:44:31.670

我建议使用 unty3D 游戏引擎，您可以为跨平台开发它，这意味着适用于 android 和 iOS 以及 pc。

# android - Android Tabs：Tabhost一次初始化几个标签？

> ID：12893259
> 
> 赞同：0
> 
> 时间：2012-10-15T09:57:43.227
> 
> 标签：android

当我的应用程序运行并显示带有内部列表视图的选项卡时，我遇到了一种奇怪的情况。问题是一次加载不同选项卡的数据。但它应该看起来像只为当前选项卡加载数据，而不是为全部或部分选项卡加载数据。为什么会发生？

我的主要活动是标签创建和初始化： public class MainActivity extends SherlockFragmentActivity { TabHost mTab​​Host; ViewPager mViewPager; 标签适配器 mTab​​sAdapter; 捆绑练习、拉伸、热身、下身；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
setTheme(R.style.Theme_Sherlock); // Used for theme switching in samples
super.onCreate(savedInstanceState);

setContentView(R.layout.home);
mTabHost = (TabHost) findViewById(android.R.id.tabhost);
mTabHost.setup();

mViewPager = (ViewPager) findViewById(R.id.pager);

mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

excercises = new Bundle();
excercises.putString("category", "Android Application Development Tutorials");
mTabsAdapter.addTab(mTabHost.newTabSpec("Excercises").setIndicator("Excercises"),   VideoListLoader.VideoListFragment.class, excercises);

    stretching = new Bundle();
    stretching.putString("category", "iPhone Development Tutorials");
mTabsAdapter.addTab(mTabHost.newTabSpec("Stretching").setIndicator("Stretching"), VideoListLoader.VideoListFragment.class, stretching);

    warmUp = new Bundle();
    warmUp.putString("category", "PHP Tutorials Playlist");
mTabsAdapter.addTab(mTabHost.newTabSpec("Warm Up").setIndicator("Warm Up"), VideoListLoader.VideoListFragment.class, warmUp);

    lowerBody = new Bundle();
    lowerBody.putString("category", "Algebra Tutorials Playlist");
mTabsAdapter.addTab(mTabHost.newTabSpec("Lower Body").setIndicator("Lower Body"), VideoListLoader.VideoListFragment.class, lowerBody);

if (savedInstanceState != null) {
    mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
}
}

@Override
protected void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);
outState.putString("tab", mTabHost.getCurrentTabTag());
}

/**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost. It relies on a
 * trick. Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show. This is not sufficient for switching
 * between pages. So instead we make the content part of the tab host 0dp
 * high (it is not shown) and the TabsAdapter supplies its own dummy view to
 * show as the tab content. It listens to changes in tabs, and takes care of
 * switch to the correct paged in the ViewPager whenever the selected tab
 * changes.
 */
public static class TabsAdapter extends FragmentPagerAdapter implements    TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
private final Context mContext;
private final TabHost mTabHost;
private final ViewPager mViewPager;
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

static final class TabInfo {
    private final String tag;
    private final Class<?> clss;
    private final Bundle args;

    TabInfo(String _tag, Class<?> _class, Bundle _args) {
    tag = _tag;
    clss = _class;
    args = _args;
    }
}

static class DummyTabFactory implements TabHost.TabContentFactory {
    private final Context mContext;

    public DummyTabFactory(Context context) {
    mContext = context;
    }

    @Override
    public View createTabContent(String tag) {
    View v = new View(mContext);
    v.setMinimumWidth(0);
    v.setMinimumHeight(0);
    return v;
    }
}

public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
    super(activity.getSupportFragmentManager());
    mContext = activity;
    mTabHost = tabHost;
    mViewPager = pager;
    mTabHost.setOnTabChangedListener(this);
    mViewPager.setAdapter(this);
    mViewPager.setOnPageChangeListener(this);
}

public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
    tabSpec.setContent(new DummyTabFactory(mContext));
    String tag = tabSpec.getTag();

    TabInfo info = new TabInfo(tag, clss, args);
    mTabs.add(info);
    mTabHost.addTab(tabSpec);
    notifyDataSetChanged();
}

@Override
public int getCount() {
    return mTabs.size();
}

@Override
public Fragment getItem(int position) {
    TabInfo info = mTabs.get(position);
    return Fragment.instantiate(mContext, info.clss.getName(), info.args);
}

@Override
public void onTabChanged(String tabId) {
    int position = mTabHost.getCurrentTab();
    mViewPager.setCurrentItem(position);
}

@Override
public void onPageScrolled(int position, float positionOffset, int   positionOffsetPixels) {
}

@Override
public void onPageSelected(int position) {
    // Unfortunately when TabHost changes the current tab, it kindly
    // also takes care of putting focus on it when not in touch mode.
    // The jerk.
    // This hack tries to prevent this from pulling focus out of our
    // ViewPager.
    TabWidget widget = mTabHost.getTabWidget();
    int oldFocusability = widget.getDescendantFocusability();
    widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
    mTabHost.setCurrentTab(position);
    widget.setDescendantFocusability(oldFocusability);
}

@Override
public void onPageScrollStateChanged(int state) {
}
} 
```

}

我的 VideoListLoader：公共类 VideoListLoader 扩展 SherlockFragmentActivity {

```
private static final String TAG = VideoListLoader.class.getName();
VideoListFragment list;
VideoListAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

FragmentManager fm = getSupportFragmentManager();

// Create the list fragment and add it as our sole content.
if (fm.findFragmentById(android.R.id.content) == null) {
    list = new VideoListFragment();
    fm.beginTransaction().add(android.R.id.content, list).commit();
}
}

public static class VideoListFragment extends SherlockListFragment implements   LoaderCallbacks<RESTLoader.RESTResponse>, OnItemClickListener, OnScrollListener {

private static final int LOADER_PLAYLIST_SEARCH = 0x1, LOADER_VIDEOS_SEARCH = 0x2;
VideoListAdapter mAdapter;
private static final String ARGS_URI = "net.neilgoodman.android.restloadertutorial.ARGS_URI";
private static final String ARGS_PARAMS = "net.neilgoodman.android.restloadertutorial.ARGS_PARAMS";
private static final String MAX_RESULTS = "30";
private int START_INDEX;
List<VideoEntry> playlists;
private String playlistID, category;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    mAdapter = new VideoListAdapter(getSherlockActivity());
    setListAdapter(mAdapter);
    mAdapter.clear();
    setListShown(false);
    getListView().setOnItemClickListener(this);
    getListView().setOnScrollListener(this);

    if (savedInstanceState != null) {
    ParseVideoList pvl = savedInstanceState.getParcelable("list");
    Log.e("Saved item: ", pvl.getArrList().get(2).getTitle());
    playlists = pvl.getArrList();
    mAdapter.setData(playlists);

    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
    } else {
    Uri playlistSearchUri =   Uri.parse("https://gdata.youtube.com/feeds/api/users/thenewboston/playlists");

    Bundle params = new Bundle();
    params.putString("max-results", "50");
    params.putString("alt", "jsonc");
    params.putString("v", "2");

    Bundle args = new Bundle();
    args.putParcelable(ARGS_URI, playlistSearchUri);
    args.putParcelable(ARGS_PARAMS, params);

    getLoaderManager().initLoader(LOADER_PLAYLIST_SEARCH, args, this);

    }
}

@Override
public void onSaveInstanceState(Bundle outState) {

    ParseVideoList pvl = new ParseVideoList();
    pvl.setArrList(playlists);
    outState.putParcelable("list", pvl);
}

@Override
public Loader<RESTLoader.RESTResponse> onCreateLoader(int id, Bundle args) {
    if (args != null && args.containsKey(ARGS_URI) &&  args.containsKey(ARGS_PARAMS)) {
    Uri action = args.getParcelable(ARGS_URI);
    Bundle params = args.getParcelable(ARGS_PARAMS);

    return new RESTLoader(getSherlockActivity(), RESTLoader.HTTPVerb.GET, action, params);
    }

    return null;
}

@Override
public void onLoadFinished(Loader<RESTLoader.RESTResponse> loader, RESTLoader.RESTResponse data) {
    int code = data.getCode();
    String json = data.getData(); 
```

// category = getSherlockActivity().getIntent().getExtras().getString("category"); category = getArguments().get("category").toString(); Log.e("当前类别：", category); Log.e("JSON:", json); switch (loader.getId()) { case LOADER_PLAYLIST_SEARCH: if (code == 200 && !json.equals("")) {

```
 if (playlistID == null) {
        playlistID = getPlaylistID(getSherlockActivity(), category, json);
        }

        if (playlistID != null) {
        Uri videoSearchUri = Uri.parse("https://gdata.youtube.com/feeds/api/playlists/" + playlistID);

        Bundle params = new Bundle();
        params.putString("max-results", MAX_RESULTS);
        params.putString("start-index", "1");
        params.putString("alt", "jsonc");
        params.putString("v", "2");

        Bundle args = new Bundle();
        args.putParcelable(ARGS_URI, videoSearchUri);
        args.putParcelable(ARGS_PARAMS, params);

        getLoaderManager().initLoader(LOADER_VIDEOS_SEARCH, args, this);
        break;
        } else {
        Toast.makeText(getSherlockActivity(), "No such a playlist", Toast.LENGTH_SHORT);
        }
    }
    break;
    case LOADER_VIDEOS_SEARCH:
    if (code == 200 && !json.equals("")) {

        playlists = getVideoList(getSherlockActivity(), json);
        mAdapter.setData(playlists);

        if (isResumed()) {
        setListShown(true);
        } else {
        setListShownNoAnimation(true);
        }

    } else {
        Toast.makeText(getSherlockActivity(), "Failed to load data. Check your internet settings.", Toast.LENGTH_SHORT).show();
    }
    break;
    }
}

@Override
public void onLoaderReset(Loader<RESTLoader.RESTResponse> loader) {
    mAdapter.setData(null);

}

private static String getPlaylistID(FragmentActivity fragmentActivity, String pCategory, String json) {
    final Context context = fragmentActivity;
    String playlistID = null;

    try {
    JSONObject playlistsWrapper = (JSONObject) new JSONTokener(json).nextValue();
    JSONArray playlists = playlistsWrapper.getJSONObject("data").getJSONArray("items");

    for (int i = 0; i < playlists.length(); i++) {
        JSONObject playlist = playlists.getJSONObject(i);
        if (pCategory.compareToIgnoreCase(playlist.getString("title")) == 0) {
        VideoEntry entry = new VideoEntry(playlist);
        entry.wrapPlaylistID(context);
        entry.wrapPlaylistTitle(context);
        playlistID = entry.getPlaylistID();
        break;
        }
    }
    } catch (JSONException e) {
    Log.e(TAG, "Failed to parse JSON.", e);
    }

    return playlistID;
}

private static List<VideoEntry> getVideoList(FragmentActivity fragmentActivity, String json) {

    List<VideoEntry> playlistsList = new ArrayList<VideoEntry>();
    final Context context = fragmentActivity;

    try {
    JSONObject playlistsWrapper = (JSONObject) new JSONTokener(json).nextValue();
    JSONArray playlists = playlistsWrapper.getJSONObject("data").getJSONArray("items");
    for (int i = 0; i < playlists.length(); i++) {
        JSONObject playlist = playlists.getJSONObject(i);
        VideoEntry entry = new VideoEntry(playlist);
        entry.wrapID(context);
        entry.wrapTitle(context);
        entry.wrapThumbURL(context);
        playlistsList.add(entry);
        Log.e("PlaylistsList: ", playlistsList.get(i).getThumbURL());
    }
    } catch (JSONException e) {
    Log.e(TAG, "Failed to parse JSON.", e);
    }

    return playlistsList;
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    // TODO Auto-generated method stub

    int last_pos = view.getLastVisiblePosition() + 10;
    Log.e("Last_pos in onScroll: ", Integer.toString(last_pos));
    if (last_pos == mAdapter.getCount() && last_pos >= Integer.valueOf(MAX_RESULTS)) {
    START_INDEX = last_pos + 1;
    Log.e("PID in onScroll:", playlistID);
    Log.e("START_INDEX in onScroll:", Integer.toString(START_INDEX));

    Uri videoSearchUri = Uri.parse("https://gdata.youtube.com/feeds/api/playlists/" + playlistID);

    Bundle params = new Bundle();
    params.putString("max-results", MAX_RESULTS);
    params.putString("start-index", Integer.toString(START_INDEX));
    params.putString("alt", "jsonc");
    params.putString("v", "2");

    Bundle args = new Bundle();
    args.putParcelable(ARGS_URI, videoSearchUri);
    args.putParcelable(ARGS_PARAMS, params);

    getLoaderManager().restartLoader(LOADER_VIDEOS_SEARCH, args, this);
    }
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
    // TODO Auto-generated method stub

}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // Intent lVideoIntent = new Intent(null, Uri.parse("ytv://" +
    // mAdapter.getItem(position).getVideoID()), getSherlockActivity(),
    // OpenYouTubePlayerActivity.class);
    // startActivity(lVideoIntent);
    new VideoManager().DownloadFromUrl("https://www.dropbox.com/s/4ph6ibvqn3e5wzq/movie.mp4", "movie.mp4");
}
} 
```

}

我的日志：

```
10-15 12:39:38.668: E/Current Category:(2397): Android Application Development       Tutorials
10-15 12:39:38.673: E/JSON:(2397): {"apiVersion":"2.1","data":{"totalItems":54,"startIndex":1,"itemsPerPage":50,"items":blablabla ...........

10-15 12:39:39.873: E/Current Category:(2397): Android Application Development Tutorials
10-15 12:39:39.873: E/JSON:(2397): {"apiVersion":"2.1","data":{"id":"PL2F07DBCDCC01493A","author":"thenewboston","title":"blablabla ............

10-15 12:39:41.003: E/Current Category:(2397): iPhone Development Tutorials
10-15 12:39:41.008: E/JSON:(2397): {"apiVersion":"2.1","data":{"totalItems":54,"startIndex":1,"itemsPerPage":50,"items":[{"id":blalblabla ...................

10-15 12:39:42.243: E/Current Category:(2397): iPhone Development Tutorials
10-15 12:39:42.243: E/JSON:(2397): {"apiVersion":"2.1","data":  {"id":"PL53038489615793F7","author":"thenewboston","title":"iPhone Development Tutorials","blalbla .......... 
```

在这里您可以看到 2 个选项卡的加载数据，但我没有切换到另一个选项卡，仅在第一个选项卡加载必要的内容时等待，但它会为一个和第二个选项卡加载。有人可以解释一下它为什么会发生以及如何避免它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:27:56.217

默认情况下，`ViewPager`加载当前页面和直接向左和向右的页面。这样做是为了让您可以流畅地滑动页面。

如果您不希望发生这种情况，则不应使用`ViewPager`（或覆盖其功能）。如果您确实想使用`ViewPager`，您可以将您的片段逻辑放入`onPageSelected()`或在父活动中执行您的逻辑。这些选项中的最后一个可能是最好的。

还，

> 请注意，此类目前处于早期设计和开发阶段。该 API 可能会在以后的兼容性库更新中发生变化，需要在针对较新版本编译应用程序时更改应用程序的源代码。

我自己对示例代码有一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T08:07:51.100

首先，为了调用mTabHost.setCurrentTabByTag(YOUR_TAG)，每次切换标签之间必须有一定的延迟。但这不是一个好习惯，有人有更好的主意吗？

# javascript - 将 jQuery 限制为特定 DOM 节点的快捷方式

> ID：12893260
> 
> 赞同：0
> 
> 时间：2012-10-15T09:57:55.347
> 
> 标签：javascript, jquery, dom, namespaces

我想将 jQuery 限制为特定的命名空间或 DOM 节点。目前我所做的每一行都是这样的

```
$('a' , $node).addClass();
$('li' , $node).removeAttr();
$('div#q' , $node).hide(); 
```

等等.. 有没有我可以指定的快捷方式/方法，之后 jQuery 对象的范围将被限制为`$node`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:05:10.563

您可以直接更改 $ 方法。

将 $ 分配给返回 $node.find() 的函数，您就完成了。

```
 jQuery(function($){
        var $node = $('div');
        var _$ = $;

        $ = function(selector){
            return $node.find(selector);
        };

        $('p:first').fadeOut();

        // Return $ to its previous owner
        $ = _$;
    }); 
```

jsfiddle：http: [//jsfiddle.net/pmYRw/1/](http://jsfiddle.net/pmYRw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:02:02.577

您可以链接您的方法，这样您只需编写一次选择器：

```
$('a' , $node).addClass('aclass').removeAttr('rel').hide(); 
```

或者也将引用保存在变量中以供重用：

```
var a = $('a' , $node);
a.addClass('aclass');
a.removeAttr('rel');
a.hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:04:34.980

```
$('a' , $node).addClass();
$('a' , $node).removeAttr();
$('a' , $node).hide(); 
```

而不是绑定 $('a' , $node) 几次，你可以缓存这个变量并像下面一样使用它。这也会提高你的表现。

```
var node  = $('a' , $node);
node.addClass();
node.removeAttr();
node.hide(); 
```

我们可以通过像下面这样链接它们来进一步改进这段代码

```
var node  = $('a' , $node);
node.addClass().removeAttr().hide(); 
```

重用变量和链接 jquery 将对您的代码产生巨大影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:02:11.837

而不是 $node （我假设它是一个已经实例化的 jquery 对象），你可以把它写成一个字符串：

```
$('a', '#main') #≠&gt; all anchor tags under element with main as id

$('a', '#main li') #≠&gt; all anchor tags al li's under element with main as id 
```

您也可以先实例化主元素，然后在其子范围内搜索：

```
var main = $('#main');
main.find('a');
main.find('li a'); 
```

这将更加高效。

# .net - 如何使用 Helix3DToolkit 在两个球体之间创建一条线

> ID：12893261
> 
> 赞同：2
> 
> 时间：2012-10-15T09:57:55.920
> 
> 标签：.net

我正在使用以下代码在 HelixViewport3D 中绘制球体。现在我想在两个球体之间创建一条线。请有任何建议。

谢谢

```
var meshBuilder = new MeshBuilder(false, false);
meshBuilder.AddSphere(new Point3D(0, 0, 0), 0.1f, 10, 10);
var mesh = meshBuilder.ToMesh(true);
modelGroup = new Model3DGroup();
var greenMaterial = MaterialHelper.CreateMaterial(Colors.Green);
var insideMaterial = MaterialHelper.CreateMaterial(Colors.Yellow);

mygeometry = new GeometryModel3D();
mygeometry.Material = greenMaterial;
mygeometry.BackMaterial = insideMaterial;
mygeometry.Geometry = mesh;

modelGroup.Children.Add(mygeometry);    

myModelVisual3D = new ModelVisual3D();
myModelVisual3D.Content = modelGroup;
myview.Children.Clear();
myview.Children.Add(myModelVisual3D); 
```

# python - 如何在 python 中使用 Selenium 提交 Https 身份验证

> ID：12893264
> 
> 赞同：2
> 
> 时间：2012-10-15T09:57:58.890
> 
> 标签：python, firefox, authentication, selenium, form-submit

我想使用**Selenium**（通过）Python 访问，这是一个需要身份验证的 URL。

访问 URL 时，手动弹出一个新的认证窗口，我需要在其中填写*用户名*和*密码*。只有在单击“确定”后，此窗口才会消失，我会返回原始站点。

因为我想在间隔基础上访问此 URL 以下载信息并希望在 python 中自动化此过程。

在我目前的工作中，我使用**Selenium**，但我发现的示例似乎都没有满足我的需求。我尝试过但不起作用的想法是：

*   `driver.get("https://username:password@somewebsite.com/")`
*   `selenium.FireEvent("OK", "click")`
*   `driver.find_element_by_id("UserName")`

我不知道实际的元素 ID

我所做的是加载存储身份验证信息的 Firefox 配置文件，但我仍然需要通过单击“确定”来确认身份验证。

有什么办法可以防止这个屏幕弹出来吗？

如果不是如何访问身份验证表单上的此按钮，我无法从中获取身份信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:07:09.747

使用`driver.get("https://username:password@somewebsite.com/")`应该直接登录，而不显示弹出窗口，

这对你不起作用怎么办？

**编辑**

* * *

我不确定这会奏效，但之后 `driver.get("https://username:password@somewebsite.com/")`

尝试接受警报。

*对于警报*-`@driver.switch_to.alert.accept`在 Ruby 或`driver.switchTo().alert().accept();`Java 中

# ruby-on-rails - Delayed_Job 任务因简单结构而失败

> ID：12893265
> 
> 赞同：0
> 
> 时间：2012-10-15T09:58:00.937
> 
> 标签：ruby-on-rails, delayed-job

我在 Rails 应用程序中使用 delay_job 时遇到问题。如果我试图通过 Struct 传递一个简单的（整数）id，我的工作就会失败。这是目前工作的样子：

```
 class EventJob < Struct.new(:event_id)
    def perform
      # TODO
    end
  end 
```

perform 的主体现在是空的。执行这样的作业时出现以下失败错误：

```
Delayed::Job.enqueue(EventJob.new(1)) 
```

这是错误消息：

```
Job failed to load: undefined method `members' for #. Handler: "--- !ruby/struct:EventJob \nevent_id: 1\n"
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:86:in `rescue in payload_object'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:84:in `payload_object'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:94:in `block in invoke_job'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:91:in `invoke_job'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block (2 levels) in run'
C:/Ruby193/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:181:in `run'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `block in reserve_and_run_one_job'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `reserve_and_run_one_job'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:166:in `block in work_off'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `times'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `work_off'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:133:in `block (4 levels) in start'
C:/Ruby193/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:132:in `block (3 levels) in start'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:129:in `block (2 levels) in start'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `loop'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `block in start'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in '
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block in add'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/worker.rb:127:in `start'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.3/lib/delayed/tasks.rb:9:in `block (2 levels) in '
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `call'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby193/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `each'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
C:/Ruby193/lib/ruby/1.9.1/rake/application.rb:63:in `run'
C:/Ruby193/bin/rake:32:in `' 
```

如果我删除 Struct.new(:event_id) 它正在执行 peform 方法。奇怪的是我没有一个叫做“成员”的方法。但是 Struct 有一个名为 members 的方法。delay_job 和 Struct 之间是否存在某种兼容性问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:16:40.003

我相信你的 YAML 引擎有些奇怪。检查 YAML::Parser 常量是什么。它应该是 Psych::Parser。您应该能够执行：

```
YAML.load "--- !ruby/struct:EventJob \nevent_id: 1\n" 
```

在您的 irb 控制台中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:17:45.503

好的，不知道是什么导致了这个问题。我刚刚回到我的项目的旧备份版本，现在它似乎又可以工作了。抱歉，我无法提供有关它的更多详细信息，除非它在某处发生故障。

# javascript - 使用 javascript 杀死 Clickonce 应用程序

> ID：12893266
> 
> 赞同：0
> 
> 时间：2012-10-15T09:58:00.433
> 
> 标签：javascript

我有一个网页在单击按钮时运行 clickonce 应用程序，我的问题是是否可以使用 javascript 停止 clickonce 应用程序（在网络上发布/仅在线提供！）？

# android - AsyncTask 实例关闭 UI 线程

> ID：12893267
> 
> 赞同：1
> 
> 时间：2012-10-15T09:58:01.040
> 
> 标签：android, android-asynctask

引用从[这里](http://developer.android.com/reference/android/os/AsyncTask.html)获得的 AsyncTask 文档，它说

> *   AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。
> *   任务实例必须在 UI 线程上创建。
> *   `execute(Params...)`必须在 UI 线程上调用。
> *   不要手动调用`onPreExecute()`, `onPostExecute(Result)`, `doInBackground(Params...)`, 。`onProgressUpdate(Progress...)`

现在在 UI 线程上创建 AsyncTask 引用的原因是什么？是 Looper 的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:05:49.910

我认为这样做是为了确保 Handler 在 UI 线程上初始化，因此在处理程序的构造函数中，myLooper() 将返回 mainUIThreadLooper，稍后发送的消息将分发到 UI 线程。

```
public abstract class AsyncTask<Params, Progress, Result> {
    private static final InternalHandler sHandler = new InternalHandler();
....
} 
```

和

```
public Handler() {
   ...
   mLooper = Looper.myLooper();
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:04:42.820

我认为在其他地方创建 AsyncTask 是没有意义的，因为 AsyncTask 专门用于在 UI 线程上做一些准备，然后在另一个线程中做一些事情，然后再次在 UI 线程中发布任何结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:50:31.370

请检查[这个](https://stackoverflow.com/questions/10426120/android-got-calledfromwrongthreadexception-in-onpostexecute-how-could-it-be/16239116#16239116)答案。

AsyncTask.class 必须在 UI 线程上加载，因为它具有**静态**字段引用处理程序：

```
private static final InternalHandler sHandler = new InternalHandler(); 
```

因此，如果您将**AsynckTask**第一次在另一个带有 looper （**NonMainThred**）的线程上运行，那么AsuncTask 上的**任何**实例都会将其 onPostExecute （和其他）方法发布到那个特定的**NonMainThread**，无论您尝试从哪里启动 AsyncTask 。

如果现在您尝试处理 onPostExecute 中的任何 android-UI 元素，它将崩溃并出现以下错误：

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

# forms - Delphi：来自非模态辅助形式的“ShowModal”

> ID：12893271
> 
> 赞同：4
> 
> 时间：2012-10-15T09:58:14.840
> 
> 标签：forms, delphi, modal-dialog, non-modal

我们有一个应用程序，它有一个主表单和一个可以并排使用的第二个非模态表单。我们的主窗体显示了配置列表，而第二个非模态窗体更详细地显示了配置。

当我们显示一个模态表单（从第二个非模态表单请求）时，主表单会在第二个表单前面弹出，直到我们关闭该模态表单。

我怎样才能避免这种行为？我已经尝试过以不同的方式创建最后一个模态表单（'Applicaton.CreateForm'、'TForm.Create'、设置父级），但仍然会弹出主表单。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:24:19.537

设置`Application.ModalPopupMode`为`pmAuto`

这就是文档所说的：

```
TForm.PopupParent 
```

*设置用户无法更改的堆叠表单的顺序。如果 PopupMode 属性设置为 pmExplicit 且 PopupParent 为 nil，则 Application.MainForm 被隐式用作 PopupParent。如果没有分配 Application.MainForm，则 Application.Handle 用作 PopupParent。如果 PopupMode 属性设置为 pmAuto，Screen.ActiveForm 将用作 PopupParent 属性。*

# printing - 在热敏打印机上打印

> ID：12893277
> 
> 赞同：0
> 
> 时间：2012-10-15T09:58:34.937
> 
> 标签：printing, powerbuilder

我正在使用 dw.print 命令并打印一个宽度为 3 英寸且没有确定高度的报告。这是收据。如何设置纸张尺寸以跟随安装的热敏打印机。我无法对此进行测试，因为我这里没有热敏打印机。

我可以假设使用默认打印机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:36:05.033

建议在最终打印数据窗口的打印机上进行测试。

我有很多经验，我在数据窗口上看到的内容与打印机文档不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:28:19.693

您可以在 Painter 中设置数据窗口本身的打印边距，或在运行时在代码中修改它们。查看数据窗口绘制器上的“打印规范”选项卡。

# android - 无法安装 Ubuntu 构建 Android 开源项目所需的软件包

> ID：12893278
> 
> 赞同：1
> 
> 时间：2012-10-15T09:58:35.843
> 
> 标签：android, ubuntu

我正在 Ubuntu 10.0.4 上构建 Android 开源项目。我尝试通过执行以下命令（从[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)复制）来安装所需的软件包，但我不能。

```
 sudo apt-get install git-core gnupg flex bison gperf build-essential \
  zip curl zlib1g-dev libc6-dev lib32ncurses5-dev ia32-libs \
  x11proto-core-dev libx11-dev lib32readline5-dev lib32z-dev \
  libgl1-mesa-dev g++-multilib mingw32 tofrodos python-markdown \
  libxml2-utils xsltproc 
```

错误信息：

> E: 找不到软件包 lib32ncurses5-dev
> 
> E: 找不到包 lib32readline5-dev
> 
> E: 找不到软件包 lib32z-dev
> 
> E: 找不到包 mingw32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:00:04.387

解决方案 构建 Android 操作系统所需的软件包列表错误。正确的包是：

```
$ sudo apt-get install git-core gnupg flex bison gperf build-essential \
zip curl zlib1g-dev libc6-dev lib64ncurses5-dev \ x11proto-core-dev
libx11-dev lib64readline5-dev lib64z-dev \ libgl1-mesa-dev
g++-multilib tofrodos 
```

这是Android入门教程的错误。只是想分享这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T16:38:30.923

对于 14.04 新包是：

```
sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev libc6-dev lib64ncurses5-dev x11proto-core-dev libx11-dev lib64z-dev libgl1-mesa-dev tofrodos 
```

很少被删除。不确定是否需要更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T15:05:46.647

我不确定他是否指的是 14.04，但对于 10.04 列表将是 32 位操作系统：

```
$  sudo apt-get install git gnupg flex bison gperf build-essential zip curl zlib1g-dev libc6-dev libncurses5-dev x11proto-core-dev libx11-dev libreadline5-dev libz-dev libgl1-mesa-dev g++-multilib mingw32 tofrodos python-markdown libxml2-utils xsltproc 
```

# c# - 打开文件时读取excel数据

> ID：12893284
> 
> 赞同：1
> 
> 时间：2012-10-15T09:59:06.143
> 
> 标签：c#, .net, excel, connection-string, oledb

几天前，我问了一个[问题](https://stackoverflow.com/questions/12858310/reading-excel-fetchig-date-in-general-format#comment17403185_12858310)，但找不到足够的答案。我对问题进行了更多分析，并决定创建一个新线程。如果我不应该这样做，请告诉我或关闭问题。

我有一个**OPEN** excel 文件，其中包含日期格式的列，其中包含一些值，例如 2006 年 6 月 22 日、2006 年 6 月 22 日。我正在尝试使用 OleDbDataReader 读取 excel。代码是这样的：

```
string sql = string.Format("SELECT * FROM [{0}]", excelSheetName);
internal OleDbCommand command = new OleDbCommand();
command.CommandText = sql;
OleDbDataReader oleRdr = command.ExecuteReader();

DataTable dataTable = new DataTable();
datatable.TableName = excelSheetName;
dataTable.Load(oleRdr); 
```

我将连接字符串用作：

```
string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\ExcelData\sample.xls;Extended Properties='Excel 8.0;HDR=No;IMEX=1'"; 
```

问题是我无法以正确的 ( `DateTime`) 格式读取日期值。我相信一切都被视为数字格式。所以我的结果是

`6/22/2006 as 38890`

在互联网上阅读了一些文章后，我了解到我的专栏有多种数据类型，然后我将连接字符串更改为：

```
string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\ExcelData\sample.xls;Extended Properties="Excel 8.0;HDR=No;IMEX=1;ImportMixedTypes=Text;TypeGuessRows=0""; 
```

但我仍然无法以正确的格式阅读 excel。对此有任何建议。在我看来这是一个奇怪的问题。如果我需要提供更多信息，请告诉我。

注意：还要注意，当我的 excel 文件关闭时，两个连接字符串都会给我正确的数据。`.xlsx`同样对于我们正在使用的新文档格式`Microsoft.ACE.OLEDB.12.0`。

**编辑**

我也尝试编辑注册表....但没有缓解。但是当我更改值`IMEX = 0`或者`IMEX = 1`它再次正常工作时。任何人都可以准确地说出发生了什么吗？

**编辑 2** 当我改变时，`HDR=Yes`一切都很好。请问有什么帮助吗？我在互联网上找不到足够的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:49:58.597

所以我以一种不令人满意的方式解决了这个问题。我注意到我的分析和实验并最终得出结论，当 Excel 在 MS-Excel 中打开并且我们尝试使用 OleDbDataReader 在 C# 中读取 excel 时，其中一些`DataTypes`没有正确读取，不幸`DateTime`的是在我的情况下是其中之一。

作为一种解决方案，目前我们正在强制用户在读取 excel 文件时关闭 excel。我什至注意到，如果 excel`Read-only`在 MS-Excel 中以模式打开，那么读取的数据**对于**所有`DataTypes`包括`DateTime`. 但是在打开时`Write-Mode`，读取的数据**不正确**。

These are my analysis results and I know/agree that the results are a bit weird. If any one disagree or have something else in their mind, then let me know and please correct me.

# wpf - CanExecuteChanged 事件的奇怪行为

> ID：12893294
> 
> 赞同：1
> 
> 时间：2012-10-15T09:59:40.990
> 
> 标签：wpf, command, state

我发现了一个奇怪的行为，在接口的自定义实现中，`ICommand`我有`RaiseCanExecuteChanged`可以从外部调用的方法，并导致调用和重新评估该`CanExecute`方法并更改命令（和按钮）的状态：

```
public void RaiseCanExecuteChanged()
{
  if (_canExecuteChanged != null)
    _canExecuteChanged(this, EventArgs.Empty);
} 
```

但是，当事件作为属性实现时：

```
public event EventHandler CanExecuteChanged; 
```

它没有用，而且`CanExecuteChanged`是`null`。

改成之后

```
private EventHandler _canExecuteChanged;
public event EventHandler CanExecuteChanged
{
  add { _canExecuteChanged += value; }
  remove { _canExecuteChanged -= value; }
} 
```

有用。

该命令绑定到按钮`Command`属性。

谁能给我解释一下？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:01:25.233

当你使用属性语法时，你需要`CanExecuteChanged`在你的方法中使用：

```
public void RaiseCanExecuteChanged()
{
    if (CanExecuteChanged != null)
        CanExecuteChanged(this, EventArgs.Empty);
} 
```

此外，您应该从您的课程中删除`_canExecuteChanged`，因为它不会被使用。

顺便说一句：以下实现`RaiseCanExecuteChanged`更好，因为它不容易出现竞争条件：

```
public void RaiseCanExecuteChanged()
{
    var handler = CanExecuteChanged;
    if (handler != null)
        handler(this, EventArgs.Empty);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T13:22:19.333

我遇到了类似的问题。经过大量根本原因分析后，我在 MainPage.xaml 页面中初始化了 MainpageData Context 两次。第二次初始化是在页面上的 Grid 内偶然发生的。请检查此类错误，因为 CanExecuteChanged 事件可能无法正确初始化

# c# - 在 DDD/CQRS 架构中处理伪聚合根

> ID：12893298
> 
> 赞同：0
> 
> 时间：2012-10-15T09:59:53.187
> 
> 标签：c#, mongodb, domain-driven-design, cqrs

我有以下课程：

```
class AggregateRoot
{
  // Defines common properties, Id, Version, etc.
}

class Container : AggregateRoot
{
  public IEnumerable<User> Users { get; }

  public void AddUser(User newUser)
  {
    // ...
  }

  // ...
}

class User
{
  public void AddNotification(Notification newNotification)
  {
    // ...
  }

  // ...
}

class Notification
{
  public string Message { get; set; }
} 
```

如您所见，我有一个包含一个或多个用户的容器，每个用户可以有零个或多个通知发送给他们。

在这种情况下，最常见的操作是添加新通知，因此我会经常检索用户。从容器中获取用户是可能的，但是我需要检索容器对象并在用户集合中搜索。如果 Container 很小而且很新，这很好。但随着容器变老，它会获得更多用户。所以用户集合可以变得相当大。我的问题是 User 类是一个伪聚合根，很多操作都是在 User 上完成的，但是 User 不能存在于 Container 之外。使用存储用户的新存储库解决明显的性能问题带来了另一个问题。如何使用户存储库中的用户与容器中的用户保持同步？

我可以只将用户 ID 存储在 Container 类中，但这会带走将新用户添加到 Container 的业务逻辑，因为我不能再查找某些属性。那么，我该怎么做呢？

我正在使用 MongoDb 来存储事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:33:14.630

> 使用存储用户的新存储库解决明显的性能问题带来了另一个问题。如何使用户存储库中的用户与容器中的用户保持同步？

您可以以稍微不同的方式实现模型。如果唯一的行为`Container`是添加`User`实例，那么您也可以进行`User`聚合。为了表达用户必须是容器的一部分的约束，用户可以通过 ID 引用容器。

```
class User
{
  public int ContainerId { get; private set; }
  public void AddNotification() //...
} 
```

Container 类仍然可以提供一些与添加用户相关的行为。例如，它可以提供一个用于创建新用户的工厂方法，该方法将由实现用例的应用程序服务使用：

```
class Container
{
  public int Id { get; private set; }
  public User CreateUser(string userName)
  {
    return new User(this.Id, userName);
  }
}

class UserAppService
{
  public void AddUserToContainer(int containerId, string userName)
  {
    var container = this.containerRepository.Get(containerId);    
    var user = container.CreateUser(userName);    
    this.userRepository.Add(user);
  }
} 
```

在这个实现中，Container 不存储用户集合。之所以如此，是因为正如您所指出的，集合可能会变得非常大，因此无法在内存中进行管理。在 MongoDB 中，您将拥有一个容器集合和一个用户集合。

每当您遇到“伪聚合根”的概念时，您很可能有两个可能相关的聚合。这是解决此类问题的常用策略。有关该主题的深入处理，请查看[Vaughn Vernon 的有效聚合设计](http://dddcommunity.org/library/vernon_2011)。

# google-apps-script - Google Apps 脚本的文档工具

> ID：12893303
> 
> 赞同：1
> 
> 时间：2012-10-15T10:00:15.833
> 
> 标签：google-apps-script, documentation

有人知道 Google Apps 脚本的文档工具吗？我知道 GAS 不是在客户端编写的，但是在线文档工具会是一个不错的选择吗？有什么想法和帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:24:31.117

GAS 包含一个自动生成的文档功能。[这](http://googleappsdeveloper.blogspot.de/2012/05/introducing-versions-and-libraries-in.html)是一篇描述如何在库中使用它的文章（`Writing a Library`段落）。

# html - wkhtmltopdf中相邻页面的字体质量

> ID：12893304
> 
> 赞同：0
> 
> 时间：2012-10-15T10:00:16.627
> 
> 标签：html, pdf, wkhtmltopdf

我正在尝试通过`wkhtmltopdf`. 它将我的文档分成足够好的页面，但问题是几个相邻页面中的字体质量差异太大。
例如，第 2、14、45、50 页的字体质量很差，而其余页面则很好。

也许我必须使用一些选项来获得相同质量的所有页面？

PS 我正在使用选项`--no-background`和`--print-media-type`. 我也试过`--disable-smart-shrinking`但没有结果。

**编辑**
我注意到这个问题发生在包含图像的页面中。

# iphone - iphone app主屏tableview解构

> ID：12893308
> 
> 赞同：0
> 
> 时间：2012-10-15T10:00:36.887
> 
> 标签：iphone, uitableview, ios5, imdb

谁能解释 Imdb [iphone 主屏幕](http://ia.media-imdb.com/images/M/MV5BMTQ1ODY0NDIwM15BMl5BanBnXkFtZTcwMzUzMDYwOA@@._V1.jpg)中的 tableview是如何实现的？这是结构，如果有人没有看到它

* * *

imdb 徽标 -- 搜索栏

* * *

UIPageView

* * *

3 按钮电影 -- 电视 -- 名人

* * *

带有 2 个单元格的表格视图 --> 第一个单元格（热门新闻）不同于第二个单元格（放映时间）

* * *

那么这是一条粗线->这条线是修改过的节标题吗？

* * *

带有 3 个单元格的表格视图，左侧有图像

* * *

又是粗线

* * *

然后再次使用没有任何图像的单元格的表格视图

* * *

我已经发布了这个问题，假设已经使用了多个 tableview。这个主屏幕中是否有一个 tableview 或者他们使用了多个 table view？

这里的粗线是怎么做的？任何帮助表示赞赏:) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:27:14.947

关闭默认分隔符样式`UITableView`：

`[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];`

然后将分隔符的图像相应地添加到您希望在 using 中使用分隔符行之后/之前的单元格的**索引路径**`cellForRowAtIndexPath`：

```
if(indexPath.row == 0)
{
UIImageView *separator = [UIImageView alloc] initWithImage:[UIImage imageNamed:@"separator.png"]];
[cell.contentView addSubview: separator];
} 
```

另请查看这些链接以获取更多详细信息：

[http://www.dimzzy.com/blog/2012/01/separator-cells-for-uitableview/#disqus_thread](http://www.dimzzy.com/blog/2012/01/separator-cells-for-uitableview/#disqus_thread)

[iPhone + UITableView + 放置图像作为分隔符](https://stackoverflow.com/questions/2227420/iphone-uitableview-place-an-image-for-separator)

有任何疑问请询问。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:24:50.977

@raw3d-粗线可以是带有图像的部分（粗线图像）。

而且我不这么认为他们使用了不同的tableview，他们可能使用了带有部分的tableview，并且不同部分使用了不同的单元格。

希望这个链接能帮助你[链接](https://stackoverflow.com/questions/11196734/creating-grouped-uitableview-with-different-cell-types)

# vmware-workstation - VMware Workstation 9：如何从远程服务器上传和下载 VM

> ID：12893311
> 
> 赞同：0
> 
> 时间：2012-10-15T10:00:40.887
> 
> 标签：vmware-workstation, vsphere

我正在评估 VMware 工作站 9。我已连接到我们的 VMware Vsphere 5 服务器，我可以打开虚拟机等等。

我想将虚拟机从 VSphere 下载到本地工作站，但是当我右键单击虚拟机并选择管理时，上传和下载选项是灰色的且不可点击。

如何使它们易于访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:09:07.387

只能下载已关闭的虚拟机。

1.  右键单击虚拟机并选择打开
2.  再次右键单击虚拟机并选择管理。
3.  现在下载选项可用。

# magento - 如何在magento中添加特定日期和时间的交付成本

> ID：12893312
> 
> 赞同：0
> 
> 时间：2012-10-15T10:00:50.653
> 
> 标签：magento

我想在 Magento 中添加特定日期和时间的运费。我们是否需要添加代码或者可以使用支付规则或其他一些功能来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:28:56.263

Magento 没有内置的方法来做到这一点。为了实现这一点，您需要开发一种运输方法，该方法可以根据报价项目和您自己的规则（特定日期和时间）获取费率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:42:42.503

您将需要制定自己的自定义运输方式。看看这个[博客](http://www.excellencemagentoblog.com/magento-create-custom-shipping-method)，希望它能让您了解如何开发自定义运输方式

# mysql - 排序EAV数据库

> ID：12893314
> 
> 赞同：2
> 
> 时间：2012-10-15T10:01:00.463
> 
> 标签：mysql

我正在尝试存储 EAV 表，但无法正常工作。我得到了结果，但我无法对其进行排序。

这是我的查询：

```
SELECT
    formFields.uid,
    formFields.formId,
    formFields.postId,
    formFields.name,
    formFields.value
FROM formFields
INNER JOIN formFields aux
    ON (aux.name = "date")
WHERE
    formFields.formId = "1789"
    AND formFields.deleted = 0
    AND formFields.hidden = 0
ORDER BY aux.value DESC 
```

这是表格：

```
uid formId  postId  name    value
1   1789    1   title   example title #1
2   1789    1   date    1341091600
3   1789    2   title   example title #2
4   1789    2   date    1341092300
5   1789    3   title   example title #3
6   1789    3   date    1341081200 
```

这是我需要的结果：

```
uid formId  postId  name    value
3   1789    2   title   example title #2
4   1789    2   date    1341092300
1   1789    1   title   example title #1
2   1789    1   date    1341091600
5   1789    3   title   example title #3
6   1789    3   date    1341081200 
```

结果按名称列中具有日期的值排序
（这些值只是示例）

编辑：这是一个 sqlfiddle：[http ://sqlfiddle.com/#!2/0d3c32/2](http://sqlfiddle.com/#!2/0d3c32/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-23T07:13:55.847

甚至这个问题也是极好的老问题。我想在此处保留有关如何对 EAV 执行数据排序的准确答案。

为了达到原题的预期，可以使用下面的 SQL 对指定的列进行排序。

```
SELECT mdata.uid, mdata.formId, mdata.postId, mdata.name, mdata.value
FROM formFields mdata
WHERE mdata.formId = '1789'
    AND mdata.deleted = 0
    AND mdata.hidden = 0
ORDER BY (
    SELECT s.value FROM formFields s 
    WHERE s.name='date' 
    AND s.postId=mdata.postId
) DESC 
```

上面的 SQL 将产生以下结果。

```
uid formId  postId  name    value
3   1789    2   title   example title #2
4   1789    2   date    1341092300
1   1789    1   title   example title #1
2   1789    1   date    1341091600
5   1789    3   title   example title #3
6   1789    3   date    1341081200 
```

希望这个答案有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:32:40.220

如果你想要`ORDER BY`这个`date`值，那么你可以使用这样的东西：

```
SELECT
  formFields.uid,
  formFields.formId,
  formFields.postId,
  formFields.name,
  formFields.value 
  FROM formFields
INNER JOIN formFields aux 
  ON (aux.name = "date")
WHERE formFields.formId = "1789"
  AND formFields.deleted = 0
  AND formFields.hidden = 0
ORDER BY case when formFields.name = 'date' then 0 else 1 end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/0d3c32/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:06:18.987

```
 SELECT     formFields.uid,     
      formFields.formId,     
      formFields.postId, 
      formFields.name,
     formFields.value 
 FROM formFields tx_gcgluteusfeed_formFields 
 INNER JOIN formFields b  
      ON formFields.postId = b.postId 
 INNER JOIN formFields c 
      ON (c.name = "date")  
 WHERE  ormFields.formId = "1789" 
      AND formFields.deleted = 0 
      AND formFields.hidden = 0 
 ORDER BY 1 DESC 
```

如果你想按第一列排序

# javascript - 我如何在必应地图（win8）中使用来自 www 的图像

> ID：12893316
> 
> 赞同：1
> 
> 时间：2012-10-15T10:01:13.507
> 
> 标签：javascript, windows-8, bing-maps

我的目标是创建一个带有一些图钉的 bing 地图。

所以我有以下功能：

```
function addPushPin(pos, merchantId) {
    var pin = new Microsoft.Maps.Pushpin({ latitude: pos.latitude, longitude: pos.longitude }, {
        icon: 'http://.../'+merchantId+'.png'
    });
    map.entities.push(pin);
} 
```

但是，必应地图似乎无法从 www 加载图像。（我用本地图像尝试过，这很有效）

图标网址是一个很好的。如果我将其复制粘贴到浏览器中，我可以看到图像，但我无法在我的 bing 地图中显示它。

知道为什么吗？我能做什么`works`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:43:04.627

它应该与 URL 一起工作得很好。

要使用 URL 进行测试，请转到 Bing 地图门户 URL（图钉示例）

[http://www.bingmapsportal.com/ISDK/AjaxV7#Pushpins2](http://www.bingmapsportal.com/ISDK/AjaxV7#Pushpins2)

在页面底部，您将看到一个示例。将图标 url 替换为您自己的 http URL，单击“运行”按钮，您将看到您的 Pushpin 将从您的 url 加载。

例子

```
map.entities.clear(); 
var pushpinOptions = {icon: 'http://mapicons.nicolasmollet.com/wp-content/uploads/mapicons/shape-default/color-3875d7/shapecolor-white/shadow-1/border-color/symbolstyle-color/symbolshadowstyle-no/gradient-no/exchequer.png', width: 30, height: 50}; 
var pushpin= new Microsoft.Maps.Pushpin(map.getCenter(), pushpinOptions);
map.entities.push(pushpin); 
```

# javascript - 加载标题和链接到剪贴板

> ID：12893319
> 
> 赞同：0
> 
> 时间：2012-10-15T10:01:25.027
> 
> 标签：javascript, clipboard

是否有跨平台方式将链接和标题复制到剪贴板，即 google.com 在粘贴时显示为“Google”，但它是可点击的链接。

复制 Spotify URL 时，这是可行的。

最好这可以在 JS 中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:04:43.927

剪贴板功能的跨浏览器实现没有javascript，您可以尝试跨浏览器的基于flash的插件，甚至HTML5对剪贴板的支持也不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T23:44:59.513

今天，解决方案是使用[zeroclipboard](https://github.com/zeroclipboard/zeroclipboard)（Github 使用它）。

[这里](https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#text-to-copy)解释了如何设置将被复制的文本。

```
var clip = new ZeroClipboard(document.getElementById("copy-button"))
clip.on('dataRequested', function(client, args)
{
  client.setText( "Copy me!" );
}); 
```

# c# - 实体框架中的关系

> ID：12893324
> 
> 赞同：1
> 
> 时间：2012-10-15T10:01:39.193
> 
> 标签：c#, sql, asp.net-mvc, entity-framework

您好我正在使用实体框架 5 和 mvc4 并在实体框架关系中苦苦挣扎

我有一个用户、角色和用户角色表 ![SQL 表](../Images/59c6ff99f5b0843000eb03224fdec85e.png) 模型是在实体框架中创建的

![在此处输入图像描述](../Images/5d3955d914261b6aae7ee253df5001d8.png)

这是我用来保存用户和角色的代码，但这不起作用用户和角色对象属性在传递给此方法之前已设置

```
public void saveNewUser(User u, Role r)
{
    using (FormValueEntities db = new FormValueEntities())
    {
        u.Roles.Add(r);
        r.Users.Add(u);
        db.SaveChanges();
    }
} 
```

如何创建新用户并同时设置角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:14:17.527

我认为这可能是因为用户和角色未附加到您正在创建的上下文中。所以你需要做这样的事情：

```
User newUser = new User(){ ... Set proprties ...};

db.Users.Add(newUser);

newUser.Roles.Add(r);

db.SaveChanges(); 
```

请注意，您不需要明确地在两个方向上添加链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:10:55.290

不要忘记将`UserRole`表格包含在您的实体中。您可以简单地将其拖放到设计视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:17:09.067

首先，您必须更新您的实体框架。

和代码：

```
public void saveNewUser(User u, Role r)
{
    using (FormValueEntities db = new FormValueEntities())
    {
        db.Role.Add(r);
        db.User.Add(u);
        db.SaveChanges();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:15:55.813

您可以尝试使用 Membership api：

```
 const string adminRole = "Administrator";
                    const string adminUserName = "Admin";
                    WebSecurity.CreateUserAndAccount(adminUserName, "123456", null, false);
                    Roles.CreateRole(adminRole);
                    Roles.AddUsersToRole(new string[] { adminUserName }, adminRole); 
```

# java - Java：试图在特定字符串和几个字符之后的一行中找出一个字符串

> ID：12893337
> 
> 赞同：0
> 
> 时间：2012-10-15T10:02:25.857
> 
> 标签：java

我有一个日志文件，其中包含如下行。

> GET /common/data/register/ HTTP/1.1" 200 254614 "https://www.test.com/hiii/ "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.8) Gecko/20100101 Firefox/

我正在尝试获取上一行中为 200 的 http 状态代码。这将放在字符串之后`HTTP/1.1"`。http 的版本（这里是 1.1）可能并非在所有行中都通用。

请帮助我找出每行中的 http 状态代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:04:34.503

使用`inputString.split(" ")`它将返回字符串数组，第三个元素应该是状态码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:07:59.743

试试这个正则表达式： -

```
 String str = "GET /common/data/register/ HTTP/1.1\" 200 254614 " +
            "https://www.test.com/hiii/ Mozilla/5.0 " +
            "(Windows NT 6.1; WOW64; rv:10.0.8) " +
            "Gecko/20100101 Firefox/ ";

    Pattern pattern = Pattern.compile("HTTP/\\d.\\d\"\\s(\\d{3})");
    Matcher match = pattern.matcher(str);

    while (match.find()) {
        System.out.println(match.group(1));  // Prints 200
    } 
```

这是对上述正则表达式的解释：-

*   **`HTTP/\\d.\\d\"`**-> 将匹配`HTTP/1.1"`. 你可以有任何状态（例如：5.4）

*   **`\\d.\\d`**-> 匹配用点分隔的两个数字。

*   **`(\\d{3})`**-> 连续匹配 3 位数字以匹配状态代码。我们已将其捕获在一个组中，因为我们需要此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:07:07.950

该行是否始终包含 http/1.1 ？如果是这样，您应该能够在 java [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring(int](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring(int) , int)中使用 substring 方法

# c++ - 使用成员作为参数调用构造函数解析为变量定义

> ID：12893339
> 
> 赞同：7
> 
> 时间：2012-10-15T10:02:27.180
> 
> 标签：c++, constructor, g++, standards

我观察到 g++4.6.3 中的特殊行为。通过调用类构造函数创建临时变量时`File(arg)`，编译器选择忽略表达式的存在`arg`并将表达式解析为`File arg;`

*   为什么忽略成员名称？
*   标准是怎么说的？
*   如何避免？（不使用新`{}`语法）
*   是否有相关的编译器警告？（我可以使用任意字符串 arg 它仍然可以安静地工作）

代码：

```
#include <iostream>

class File {
public:
    explicit File(int val) : m_val(val) { std::cout<<"As desired"<< std::endl; }
    File() : m_val(10) { std::cout<< "???"<< std::endl;}

private:
    int m_val;
};

class Test {
public:
    void RunTest1() { File(m_test_val); }
    void RunTest2() { File(this->m_test_val); }
    void RunTest3() { File(fhddfkjdh); std::cout<< "Oops undetected typo"<< std::endl; }
private:
    int m_test_val;
};

int main()
{
    Test t;
    t.RunTest1();
    t.RunTest2();
    t.RunTest3();
    return 0;
} 
```

输出：

```
$ ???
$ As desired
$ Oops undetected typo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:03:53.843

编译器处理以下行：

```
File(m_test_val); 
```

作为

```
File m_test_val; 
```

所以你实际上是在创建一个`m_test_val`使用默认构造函数调用的命名对象。也一样`File(fhddfkjdh)`。

解决方案是`File(this->m_test_val)`- 这告诉编译器您要使用该成员创建一个命名对象。另一种方法是将对象命名为 - `File x(m_test_val)`。

# c# - Ajax 自动完成扩展器在母版页中不起作用

> ID：12893340
> 
> 赞同：2
> 
> 时间：2012-10-15T10:02:46.290
> 
> 标签：c#, asp.net, ajax, autocomplete

我正在尝试从数据库创建搜索。当用户开始在文本框中输入时，带有自动完成扩展器的文本框下方会出现一个城镇列表。它在普通网页中工作正常，但如果我将代码放在母版页中，它就无法工作。“GetList”不是事件触发。有什么建议么？谢谢。

母版页代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Master.master.cs" Inherits="Obelo.MasterPages.Master1" %>
<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body bgcolor="#5c5b5b">
    <form id="form1" runat="server">
         <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" />
         <asp:textbox id="tbFindWhat" runat="server" Width="210px" Font-Names="Arial" 
               Font-Size="9pt" ForeColor="#FF6600" BackColor="#1E1E1E" 
               BorderColor="White" BorderStyle="Solid" BorderWidth="1px" 
               Style="padding:0 0 0 10px; margin: -2px"></asp:textbox>
         <asp:AutoCompleteExtender ID="AutoCompleteExtender1" 
               runat="server" TargetControlID="tbFindWhat" MinimumPrefixLength="1" 
               EnableCaching="true" CompletionSetCount="1" 
               CompletionInterval="1000" ServiceMethod="GetList">
         </asp:AutoCompleteExtender>
         <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
         </asp:ContentPlaceHolder>
     </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Drawing;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;

namespace MasterPage
{
    public partial class Master1 : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        [System.Web.Script.Services.ScriptMethod()]
        [System.Web.Services.WebMethod]
        public static List<string> GetList(string prefixText)
        {
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["BusinessConnectionString"].ToString());
            con.Open();
            SqlCommand cmd = new SqlCommand("select * from tblTowns where Name like @Name+'%'", con);
            cmd.Parameters.AddWithValue("@Name", prefixText);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataTable dt = new DataTable();
            da.Fill(dt);
            List<string> CountyNames = new List<string>();
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                CountyNames.Add(dt.Rows[i][1].ToString());
            }
            con.Close();
            return CountyNames;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:13:43.313

根据文档，服务方法的签名必须是：

```
 public string[] GetCompletionList(string prefixText, int count, string contextKey) 
 { 
    ... 
 } 
```

[在此处](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)签出 AutoComplete 扩展程序属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:40:29.883

我搜索了很多，但是如果您将 webmethod 放在每个页面上，它就可以工作，这是不好的修复，但它会使其工作

# html - html&css 为底部图像设置一个白色箭头

> ID：12893343
> 
> 赞同：0
> 
> 时间：2012-10-15T10:02:57.120
> 
> 标签：html, css, image

[http://judopassion.com/wordpress/](http://judopassion.com/wordpress/)

在内容 div 中有一些文章对象。每篇文章都有一张图片。在图像上，我会在左下角的图像上画一个箭头。我已经用 div contentArrow 实现了。问题是所有图像的宽度相同但高度不同，所以我不知道如何为所有类型的高度修复 contentArrow。现在 contentArrow 仅适用于 269px 高度的图像。 ![在此处输入图像描述](../Images/2b1848401ad24bf1cad518cd170d6685.png) 我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:13:11.723

`#contentImageSrc`必须是一个类`.contentImageSrc`，因为您多次使用它。不能重复 ID**的规则**

移动`contentArrow div`到里面`contentImageSrc DIV`，然后将你的 CSS 写成 -

```
.contentImageSrc{ position: relative; }
.contentArrow { position: absolute; bottom: 10px; left: 10px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:16:06.997

您可以将图像包装在具有相对位置的 div 中，并将箭头绝对定位在将“底部”值设置为 0 的内部：

```
<div class="imageWrapper">
    <div class="contentArrow"></div>
    <img src="image.jpg" />
</div> 
```

CSS：

```
.imageWrapper{position:relative}
    .contentArrow{position:absolute; background:url(arrow.png); bottom:0; left:15px} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:51:18.030

实际上，您只需一个包装器和一些巧妙的 CSS 就可以完成所有这些工作。

下面显示一个示例。请注意，大部分 CSS 只是为了美观 - 功能的实际内容是`IMG`标签被包裹在`SPAN`s 中的事实，并且`SPAN`标签应用了以下内容：

```
span.selected:after {
    content: '';
    display: inline-block;
    position: absolute;
    bottom: 10px; left: 50%; 
    margin: 0 0 0 -25px;
    height: 0; width: 0;
    border: 20px solid transparent;
    border-bottom-color: #fff;
    z-index: 1;
} 
```

通过像这样为特定类的元素设置样式`:after`- 您可以创建箭头的白色部分。元素的附加样式`:before`只是在白色箭头周围创建黑色边框。

您可以在以下位置看到一个工作示例：http: [//jsfiddle.net/TroyAlford/wRrW6/](http://jsfiddle.net/TroyAlford/wRrW6/)

```
<span><img src="http://placekitten.com/400/400" /></span>
<span class="selected"><img src="http://placekitten.com/410/410" /></span>
<span><img src="http://placekitten.com/420/420" /></span>

<style type="text/css">
img {
    border: 1px solid #333;
    color: transparent;
    display: inline-block;
    padding: 5px; margin: 5px;
    position: relative;
    width: 200px; height: 200px;
}
span { display: inline-block; }
span:hover { cursor: pointer; }
span.selected { position: relative; }
span.selected > img { background: #268; }
span.selected:before, span.selected:after {
    content: '';
    display: inline-block;
    position: absolute;
    bottom: 10px; left: 50%; 
    margin: 0 0 0 -25px;
    height: 0; width: 0;
    border: 20px solid transparent;
    border-bottom-color: #000;
    z-index: 1;
}
span.selected:after {
    bottom: 9px; left: 50%; 
    margin: 0 0 0 -25px;
    height: 0; width: 0;
    border: 20px solid transparent;
    border-bottom-color: #fff;
}
</style> 
```

# php - php 中的日期转换 1970-01-01

> ID：12893344
> 
> 赞同：0
> 
> 时间：2012-10-15T10:03:01.313
> 
> 标签：php

大家好，我正在使用日期转换如下

```
$startdate='12/10/2012'; 
$newstartdate = date('Y-m-d',strtotime($startdate)); 
```

有时它会起作用，但有时它会显示**1970-01-01**

示例：2012 年 12 月 10 日有效 2012 年 10 月 13 日无效 显示 1970-01-01

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:05:27.203

请参阅 PHP 的[日期和时间格式页面](http://php.net/manual/en/datetime.formats.date.php)。

如果您使用`/`字符来分隔日期，它会将其视为`mm/dd/yy`. 年只有12个月。

对于合理顺序的日期，请使用连字符。

```
$startdate='12-10-2012';
$newstartdate = date('Y-m-d',strtotime($startdate)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:06:11.297

使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)指定日期格式。

```
$date = DateTime::createFromFormat('d/m/Y', '13/10/2012');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T10:06:43.287

从[手册](http://php.net/manual/en/function.strtotime.php)：`The function expects to be given a string containing an English date format...`

“英语”中的日期`13/10/2012`（文档对此有误；应该说“美国美国人”）格式表示第 13 个月的第 10 天。第十三个月在公历中不存在，因此`strtotime`给出失败结果 0，如果用作 Unix 时间戳，则转换为 1970-01-01。

用于[`strftime`](http://www.php.net/manual/en/function.strftime.php)处理不同格式的日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:06:55.237

这可能是因为 PHP 假设“12/10/2012”是 2012 年 12 月 10 日（这很好），而“13/10/2012”是未定义月份的第 10 个，因此它无法正确计算.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-08T10:35:45.367

以下代码可能会有所帮助。它替换`/`为`-`：

```
$startdate='12/10/2012'; 
$date1 = strtr($startdate, '/', '-');
echo date('Y-m-d', strtotime($date1)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-15T10:15:05.197

按照上面提到的日期类和链接来渲染输出，但是如果你仍然坚持使用这种方式尝试这样做（只是一种在 PHP 中研究更多内容的学习方法，但是这是非常糟糕的一段代码：P）

```
$startdate1='13/10/2012'; 
$myarr = explode('/',$startdate1);

$mynewdate = $myarr[1].'/'.$myarr[0].'/'.$myarr[2];

$newstartdate1 = date('Y-m-d',strtotime($mynewdate));

echo $newstartdate1; 
```

# delphi - AVE：模块中的访问冲突@adress：DELPHI7

> ID：12893347
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:03:36.093
> 
> 标签：delphi, delphi-7, access-violation

这是 81 个 TEdit-s (MyEdit[bx,by,x,y]) 的处理 onchange 过程，动态创建并分组在一个 4 维块中。现在我正在尝试对编辑进行编程以仅接受 1 位数字。“只有数字”部分工作正常，但“只有 1 位”部分给出访问冲突错误 (AVE)。编码：

```
procedure TForm1.OnHandleChange(Sender: TObject);
var
bx,by,x,y,len : Integer;
begin
bx:=(sender as TEdit).tag div 1000;
by:=(sender as TEdit).tag div 100-10*bx;
x:=(sender as TEdit).tag div 10-100*bx-10*by;
y:=(sender as TEdit).tag-bx*1000-by*100-x*10;
{*The line below gives the error*} 
if not (MyEdit[bx,by,x,y].text[1] in ['1'..'9']) then MyEdit[bx,by,x,y].text:='';
MyEdit[bx,by,x,y].SelStart:=length(MyEdit[bx, by, x,y].text);
if length(MyEdit[bx, by, x,y].text) >1
              then MyEdit[bx,by,x,y].text:=MyEdit[bx,by,x,y].text[2];
end; 
```

尽管有 AVE，但该程序执行并运行。每次我输入一个字母而不是一个数字 - 错误来了，我点击确定，程序完成了这项工作。但有必要消除该错误。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:10:46.407

`MyEdit[bx,by,x,y].text[1]`假设编辑框文本是非空的，即至少有 1 个单个字符。当编辑框文本为空时，`Text`属性为空字符串，访问第一个字符会导致访问冲突。

我注意到您正在将编辑框文本明确设置为空字符串，当然用户可以这样做。因此，您当然必须警惕这种可能性。

通过检查编辑框是否为空来解决问题。

```
var
  Text: string;
....
Text := MyEdit[bx,by,x,y].Text;
if (Length(Text)=1) and (Text[1] in ['1'..'9']) then
  .... 
```

* * *

访问冲突的另一个可能的候选是如果`MyEdit[bx,by,x,y]`导致数组的越界访问。也许你在 Tag 字段中的数学都搞砸了。这对我来说看起来很奇怪。

正如我在下面所说，`Sender as TEdit`在这里似乎更有意义。

* * *

更一般的评论：

*   您确实需要将演示文稿（即 GUIm）与基础数据分开。您真的不想使用 4D 视觉控件数组作为输入数据来解决问题。
*   不要一直重复`(Sender as TEdit).tag`。将该值一次读入局部变量。或者也许存储`(Sender as TEdit)`到局部变量中。
*   你为什么要计算`bx`,`by`和？当然是你所需要的。`x``y``Sender as TEdit`
*   即使您确实必须计算这些，也不要通过`MyEdit[bx,by,x,y]`多次编写来重复自己。将该引用存储到局部变量中，并在任何后续引用中使用它。
*   如果您需要计算`bx`、`by`和from `x`，请不要在事件处理程序中内联。将该计算放入专用的辅助方法中。同样，还有一个专门的辅助方法，它朝相反的方向发展。并测试这些函数确实是彼此的倒数。`y``Tag`

举个例子，这些助手可能如下所示：

```
procedure PackCoordinates(const bx, by, x, y: Byte; out Tag: Integer);
begin
  LongRec(Tag).Bytes[0] := bx;
  LongRec(Tag).Bytes[1] := by;
  LongRec(Tag).Bytes[2] := x;
  LongRec(Tag).Bytes[3] := y;
end;

procedure UnpackCoordinates(const Tag: Integer; out bx, by, x, y: Byte);
begin
  bx := LongRec(Tag).Bytes[0];
  by := LongRec(Tag).Bytes[1];
  x := LongRec(Tag).Bytes[2];
  y := LongRec(Tag).Bytes[3];
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:40:32.603

为什么需要那个处理程序？只需设置`TMaskEdit`. '9' 似乎是你需要的。

*   [http://docwiki.embarcadero.com/Libraries/XE3/en/System.MaskUtils.TEditMask](http://docwiki.embarcadero.com/Libraries/XE3/en/System.MaskUtils.TEditMask)
*   [http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Mask.TCustomMaskEdit.EditMask](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Mask.TCustomMaskEdit.EditMask)

* * *

AV 原因是大卫发现的。但是在 TLama 的建议下，我将我的评论带到了答案中。

* * *

还有[DRY原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself "干燥原理")。不要一次又一次地计算。做一次并记住结果。

*   因为这更快，有时更快（询问 TEdit.text 是询问 Windows GDI 服务，而不仅仅是读取常规变量）。
*   因为那更可靠-在这里和那里复制相同的论坛，您可能会打错字并以不同的公式结束 u[。
*   因为这更具前瞻性。你有一天会改变公式吗 - 你只需要在一个地方制作它，而不是搜索它的所有出现。
*   正如大卫指出的那样，`Sender`已经是您的编辑。没必要再找了！

* * *

不要相乘和删除 - 这些操作很昂贵。尤其是当您删除 10 而不是[2、4、8、16 时，...](http://en.wikipedia.org/wiki/Power_of_two#The_first_96_powers_of_two)

而且无论如何都不要分割 - 你可以在这里使用类型转换自然地分割值。

* * *

使用 4D 数组很奇怪。非常。你真的需要吗？

* * *

总而言之，它归结为

```
type TTagSplit = packed record 
                        case byte of
                             0: (Tag: integer);   
                             1: (bx, by, x, y: byte);  end; 

procedure CreatingEdits...
var tt: TTagSplit; e: TEdit;
begin
    for ... do begin
        e := TEdit.Create(MainForm);
        ....
        tt.bx := ...; tt. by := ....
        e.Tag := tt.Tag;
    end;
end;

procedure TForm1.OnHandleChange(Sender: TObject);
var
    bx,by,x,y,len : Integer;
    e : TEdit; txt: string;
    tt: TTagSplit;
begin
    e := Sender as TEdit;
    tt.Tag := e.Tag;
    bx := tt.bx; by := ....
    // Here you do not need those bx and rest - just demo how to get them

    txt := e.Text;

    if length(txt) > 1 
       then e.Text := txt[2] 
       else
         if txt > '' then 
            if not (txt[1]  in ['1'..'9'])
               then e.Text := '';
end; 
```

* * *

但是带上简历——仅仅使用 TMaskEdit 就不需要所有的代码了。TMaskedit 本身会检查内容是否为一位数或为空。唯一要检查的是该数字不为零。

* * *

最重要的是，你根本不需要 81 个编辑框！您应该只将一`TStringGrid`组设置为 9x9 尺寸。

# javascript - 多个容器上的 Jquery 砌体布局？

> ID：12893348
> 
> 赞同：2
> 
> 时间：2012-10-15T10:03:44.593
> 
> 标签：javascript, jquery, jquery-masonry

是否可以在多个 div 容器上进行 Jquery Masonry 布局？填充第一个 div，当它已满时，填充第二个，依此类推...（内容从提要动态加载）

有一种方法来判断容器何时已满将是一个好的开始，但 Masonry 并没有提供这样的方法。

感谢您的投入！

# java - 何时使用 system.exit(0)？

> ID：12893350
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:03:49.527
> 
> 标签：java, core

> **可能重复：**
> [系统差异。java中的exit(0)、System.exit(-1)、System.exit(1)](https://stackoverflow.com/questions/2434592/difference-in-system-exit0-system-exit-1-system-exit1-in-java)

任何人都可以解释一下 system.exit(0) 的用法吗？
当我们调用这个方法，尤其是参数值时，内部会发生什么？0,1,2,3..等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:06:04.067

System.exit 将要求VM进程停止，返回的代码将是参数中给出的代码。常见代码有：0 表示成功，1 到 127 表示错误，128-255 被 Unix 使用并映射到信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:05:56.183

System.exit(int) 关闭 JVM，提供 0 的“退出代码”。

退出代码是 JVM 进程的返回值。

通常在 Unix 系统中，退出代码 0 表示正常关闭，任何非零都表示关闭是由错误引起的。

有关更多信息，请参见维基百科：

[http://en.wikipedia.org/wiki/Exit_status](http://en.wikipedia.org/wiki/Exit_status)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:06:23.460

输入`System.exit`是您的错误代码。值为 0 表示正常退出。非零数字表示异常终止。这个数字可以由你决定。也许如果你想在无法读取文件的情况下退出，你可以使用错误代码 =1，如果你无法从套接字读取，它可能是错误代码 = 2。

`System.exit`将终止虚拟机等你的程序。

一个典型的例子如下。如果 runMyApp 在您想要导致程序退出的地方引发异常。

```
public static void main(String... args) {
   try {
      runMyApp();
   } catch (Exception e) {
      System.exit(1);
   }
} 
```

# css - 防止锚标签继承 CSS 样式

> ID：12893352
> 
> 赞同：1
> 
> 时间：2012-10-15T10:03:53.333
> 
> 标签：css, styles, anchor, stylesheet, inheritance

我正在DIV中动态地在LI中创建一组锚标记。但我看到所有这些锚标签都从父 DIV 中的默认锚标签继承了它的样式。谁能告诉我如何防止这些锚标签从默认锚标签继承它的样式？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:23:15.090

您的问题可能与继承有关。我建议尝试以下方法：

1.  更详细地参考这些锚点：

    div ul li a.class_name

    div ul li a#id_name

2.  使用 > 选择器仅将样式应用于该级别：

    李>一

> 在这种情况下，意味着仅将其应用于作为列表元素的直接子元素的锚点。

样式规则是否在同一个样式表中？

# php - php 到 javascript 变量在 chrome 和 IE 中不起作用

> ID：12893354
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:04:14.287
> 
> 标签：php, javascript

我正在将 php 变量转换为 javascript 变量。它在firefox中运行良好，但在chrome和IE中它不起作用，

这就是我正在做的，

```
var chkimg = "<?= $_imgname ?>"; 
```

其中 $_imgname 包含数据并经过测试。但它不会转换为 javascript 变量！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:06:21.243

好吧，请右键单击 IE、Firefox 和 Chrome，然后单击查看源代码并转到这一行，看看这三者有什么区别，这应该会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:45:46.730

在不使用短代码的情况下尝试一次。

喜欢`var chkimg = "<?php echo $_imgname; ?>";`

# c++ - C++ 中未找到 Windows::Storage::ApplicationData::Current

> ID：12893355
> 
> 赞同：4
> 
> 时间：2012-10-15T10:04:27.967
> 
> 标签：c++, visual-studio, visual-c++, windows-8, windows-runtime

我的 C++ 代码是[Media Foundation Transform](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)的一部分，它倾向于能够在 Windows Store App (Metro) 中运行

我修改`C++ GrayscaleTransform`为包含以下代码。

但是，我的 C++ 代码无法找到 namespace `Windows::Storage`。

```
LPCWSTR zPath = Windows::Storage::ApplicationData::Current->TemporaryFolder->Path->Data(); 
```

我需要做任何额外的设置吗？

我可以通过打开**Consume Windows Runtime Extension**来编译它。

![在此处输入图像描述](../Images/77ced650ddf8d74d38338f57f489fb90.png)

但是通过这样做，它会给我额外的链接错误和警告。

```
warning LNK4197: export 'DllGetActivationFactory' specified multiple times; using first specification 
warning LNK4197: export 'DllCanUnloadNow' specified multiple times; using first specification
warning LNK4197: export 'DllGetActivationFactory' specified multiple times; using first specification 
warning LNK4197: export 'DllCanUnloadNow' specified multiple times; using first specification
error LNK2005: _DllCanUnloadNow@0 already defined in dllmain.obj 
error LNK1169: one or more multiply defined symbols found 
```

注释掉`DllCanUnloadNow`会产生运行时错误。

我在运行时休息

```
// GrayscaleTransform.dll!Microsoft::WRL::Details::ModuleBase::ModuleBase()  Line 155 + 0x46 bytes  C++

    ModuleBase() throw()
    {
#ifdef _DEBUG
        // This indicates that there were two instances of the module created or race conditon during module creation
        // If you are creating object with new/delete please make sure that you haven't created more than one module 
        // and you disabled static initalization with __WRL_DISABLE_STATIC_INITIALIZE__
        // otherwise please initialize/create module in main()
        __WRL_ASSERT__(::InterlockedCompareExchangePointer(reinterpret_cast<void* volatile*>(&module_), this, nullptr) == nullptr &&
            "The module was already instantiated");

        SRWLOCK initSRWLOCK = SRWLOCK_INIT;
        __WRL_ASSERT__(reinterpret_cast<SRWLOCK*>(&moduleLock_)->Ptr == initSRWLOCK.Ptr && "Different value for moduleLock_ than SRWLOCK_INIT");
        (initSRWLOCK);
#else
        module_ = this;
#endif
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T17:32:17.623

出现链接器错误是因为您在 GrayscaleTransform 项目中启用了 C++/CX。您的项目定义了 dllmain.cpp 中列出的入口点。当您启用 C++/CX 时，vccorlib 会链接到您的模块中，并且它还定义了这些入口点。

发生运行时错误是因为 vccorlib 中的 C++/CX 基础结构创建了一个模块，而您的入口点尝试创建不同类型的模块。一个模块中只能有一个模块。

您需要对 GrayscaleTransform 项目进行一些更改，以便能够在其中使用 C++/CX：

*   从 dllmain.cpp 中删除四个 Dll*() 函数。相反，您将依赖从 vccorlib 链接的定义。请注意，`ActivatableClass(CGrayscale)`仍然需要类注册 ( )。

*   在 C++ 预处理器选项中，确保`_WINRT_DLL`在“预处理器定义”中定义。

*   在链接器输入选项中，删除“模块定义文件”。

请注意，在使用 WRL 混合 C++/CX 和“低级”C++ 时，您需要非常小心。大多数涉及 C++/CX 类型的表达式都可以抛出异常，您必须确保不允许任何异常跨越 ABI 边界。

或者，考虑不使用 C++/CX，而是在整个项目中使用 WRL。它会更冗长，但如果您已经在项目的其他部分使用 WRL，它可能更有意义。

# regex - 正则表达式解释(0+1)*1(0+1)*

> ID：12893357
> 
> 赞同：0
> 
> 时间：2012-10-15T10:04:31.680
> 
> 标签：regex

我试图理解正则表达式：

### (0+1)*1(0+1)*

你能提供符合这种模式的例子吗？

0+1 表示联合。这听起来像逻辑或，不是吗？我们应该在 0 或 1 之间选择吗？

01 表示串联。这听起来像逻辑与，不是吗？我们应该一起使用 01 数字吗？

(0+1)* 表示迭代。我们可以迭代 0 次或 1 次吗？***000011110000***是否匹配 (0+1)* 模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:14:21.490

如果这被解释为一个正则表达式，它匹配包含

```
zero or more sequences of
    (one or more zeros followed by a single one), 
followed by a single one, 
followed by zero or more sequences of
    (one or more zeros followed by a single one) 
```

作为一个布尔代数表达式，如果去掉星号，它的计算结果为

```
(false OR true) AND true AND (false OR true) 
```

评估为真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:15:29.660

```
(0+1)*1(0+1)* 
```

如果这是一个正则表达式，它将匹配

连续出现一个或多个零位，后跟一个“1”位

以上组合零次或多次，后跟“1”位

后跟零位一次或多次后跟一位数字一次

以上行零次或多次。

```
+ 
```

在 REGEX 中表示前面字符的“一次或多次”出现

```
* 
```

在 REGEX 中表示前面字符的“零次或多次”出现

常用括号“()”用于对扩展进行分组。

在这种情况下，“0”和“1”在字面上用作字符，而不是因为它们是数值。

要了解它是如何工作的，请考虑以下正则表达式：

```
(a+b)*c(d+e)* 
```

用字面理解的字母，而不是变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:04:29.087

这是输出`YAPE::Regex::Explain`：

```
The regular expression:

(?-imsx:(0+1)*1(0+1)*)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (                        group and capture to \1 (0 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    0+                       '0' (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
    1                        '1'
----------------------------------------------------------------------
  )*                       end of \1 (NOTE: because you are using a
                           quantifier on this capture, only the LAST
                           repetition of the captured pattern will be
                           stored in \1)
----------------------------------------------------------------------
  1                        '1'
----------------------------------------------------------------------
  (                        group and capture to \2 (0 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    0+                       '0' (1 or more times (matching the most
                             amount possible))
----------------------------------------------------------------------
    1                        '1'
----------------------------------------------------------------------
  )*                       end of \2 (NOTE: because you are using a
                           quantifier on this capture, only the LAST
                           repetition of the captured pattern will be
                           stored in \2)
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:14:30.760

基本上`(0+1)*`计算任何1和0的序列。因此，在您的示例中，`(0+1)*1(0+1)*`应该匹配任何具有 1 的序列。它不会匹配`000`，但它会匹配`010`,`1`等`111`。 `(0+1)`表示 0 或 1。 `1*`表示任意数量的 1。 `11*`or`1+`表示 1 的一次或多次出现。

# php - php：错误 500：在脚本中执行循环时脚本头过早结束

> ID：12893364
> 
> 赞同：1
> 
> 时间：2012-10-15T10:05:01.253
> 
> 标签：php, runtime-error

在 ~50x25 矩阵上的 php 脚本中运行梯度下降算法时，我遇到了一个非常令人不安的“错误 500”。

如果我将梯度的迭代次数设置为一个非常小的数字（<3），它工作正常。但是，如果我将其增加到 4 次迭代，它几乎总是开始抛出错误 500（脚本头过早结束）。如果迭代次数大于 4，那么它永远不会起作用。我检查了脚本内存消耗，它小于 3MB，所以这方面应该没问题。

该脚本托管在共享服务器（OVH）上，因此它可能会为服务器使用过多的 CPU 或执行过多的请求，但问题是我不知道如何知道问题出在哪里。我已经阅读了很多关于此类错误的帖子（此处或其他论坛上），以及可能导致该错误的脚本允许的请求数量，因此我`ini_set('pm.max_requests', 0);`在脚本的开头添加了但没有任何改变。

我的 PHP 知识非常有限，所以我愿意听听你必须摆脱这个错误的任何建议！:D

非常感谢！

# php - 替换 URL 上的字符串的最佳做法是什么

> ID：12893370
> 
> 赞同：0
> 
> 时间：2012-10-15T10:05:21.630
> 
> 标签：php, string, replace

替换以下网址上的字符串的最佳方法或最佳实践是什么

[http://www.mysite.com/somefolder/123kf3lkf/abc.jpg](http://www.mysite.com/somefolder/123kf3lkf/abc.jpg)

我想从上面的 url 中替换值 '123kf3lkf'。

我不能使用基本字符串替换，因为该部分的值可以是任何东西。唯一的规则是它将是实际文件名“abc.jpg”之前的部分？

我想替换上述网址上的文字以形成以下网址

[http://www.mysite.com/somefolder/mynewtext/abc.jpg](http://www.mysite.com/somefolder/mynewtext/abc.jpg)

我需要用 PHP 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:10:32.153

你可以试试这个

```
$replace = "mynewtext" ;                                            
$url = "http://www.mysite.com/somefolder/123kf3lkf/abc.jpg?test=123kf3lkf";
                                            ^-----   Note this  ---^

$find = basename(pathinfo($url,PATHINFO_DIRNAME));
echo str_replace("/$find/", "/$replace/", $url); 
```

输出

```
 http://www.mysite.com/somefolder/mynewtext/abc.jpg?test=123kf3lkf
                                                            ^--- Sill Intact 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:18:37.120

一种方法如下：

```
<?php
 $str = "http://www.mysite.com/somefolder/123kf3lkf/abc.jpg";
 $parts = explode('/', $str);
 $parts[count($parts) - 2] = "myNewText";
 $remixedURL = implode('/',$parts);
 echo "$remixedURL";
?> 
```

[键盘演示](http://codepad.org/gapuEkkv)。

参考：

*   [`count()`](http://php.net/manual/en/function.count.php).
*   [`explode()`](http://php.net/manual/en/function.explode.php).
*   [`implode()`](http://php.net/manual/en/function.implode.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:18:50.407

我可以提出另外两个想法：

1.使用`explode`并寻找LAST-1的地方。

```
$url_parts = explode("/",$url);
$string2replace = $url_parts[count($url_parts)-2];
$newString = str_replace($string2replace , "somethingnew" , $url); 
```

2.使用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:32:55.657

正则表达式解决方案：

```
$url         = 'http://www.mysite.com/somefolder/123kf3lkf/abc.jpg?foo=123kf3lkf';
$replacement = 'xxxxx';
$replaced    = preg_replace('@^(.+/)(?:[^/]+)(/[^\.]+(?:\..*)?(?:\?.*)?)$@',
                            '\\1' . $replacement . '\\2', $url);
echo $replaced; // http://www.mysite.com/somefolder/xxxxx/abc.jpg?foo=123kf3lkf 
```

# c# - 是否可以在 Visual Express C# 上一次关闭和打开所有 // 注释？

> ID：12893372
> 
> 赞同：0
> 
> 时间：2012-10-15T10:05:28.450
> 
> 标签：c#, visual-studio-2010, comments

> **可能重复：**
> [C# 隐藏和取消隐藏注释](https://stackoverflow.com/questions/8696586/c-sharp-hide-and-unhide-comments)

`//`是否可以在 Visual Express C# 上一次关闭和打开所有评论？我对我的代码进行了很多评论，并且能够一次关闭所有这些代码真的会帮助我的工作流程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:07:32.710

然后选择行：

`Ctrl + K + U`

相反：

`Ctrl + K + C`

您也可以通过菜单找到快捷方式 - 编辑 -> 高级 -> ... 快捷方式列在命令旁边。

当然，这些也在文本编辑器工具栏上：

![工具栏上的评论按钮](../Images/1a2df4becb7d381c55b4b38a2d6c3030.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:11:31.163

一种更简单的方法可能是使用编译器指令而不是注释，例如

```
#ifdef commentedCode
Console.WriteLine("This is a comment");
#endif 
```

然后，在您的项目设置中，在 Build 属性页面上，添加`commentedCode`条件编译符号以包含代码，并删除它以忽略代码。不完全符合您的要求，但可能比编辑带有评论的多个文件更快。

# windows-phone-7 - Windows Phone 7 应用程序 - INPC 问题

> ID：12893373
> 
> 赞同：1
> 
> 时间：2012-10-15T10:05:34.633
> 
> 标签：windows-phone-7, mvvm

我第一次做一个 WP7 应用程序，我正在尝试使用 MVVM 模式。我正在制作一个闹钟，这就是我所拥有的：

视图 - MainView.xaml

```
...
 <TextBox Text="{Binding Hour, Mode=TwoWay}"></TextBox>
... 
```

型号 - AlarmClock.cs：

```
...

private string _second = 22;
  public string Second {
        get { return _second; }
        set {
            _second = value;
            OnPropertyChanged("Second");
        }
    }
... 
```

ViewModel - MainViewModel.cs

```
...
private AlarmClock alarmClock;

public MainViewModel() {
    alarmClock = new AlarmClock();
}

public string Second {
        get { return alarmClock.Second; }
        set {
            alarmClock.Second = value;
            OnPropertyChanged("Second");
        }
    } 
```

在 MainView.xaml.cs 我将数据上下文设置为 this.DataContext = new ViewModel();

ViewModel 和 Model 都实现了 INotifyPropertyChanged 接口。

我的问题是：在模型中，我有一个每秒滴答的 DispatcherTimer。当我这样做时：

第二 = 23；

我的视图（我的文本框）没有更新，也没有显示 _second 的值。但是如果我在文本框中写了一些东西，那么我的模型似乎是用输入的值更新的。

有人可以看到我做错了什么吗？

提前谢谢你，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:56:25.427

您的示例中给出的属性名称和类型有点令人困惑，但我认为您的主要问题如下：

你有一个类型`AlarmClock`在你的`MainViewModel`. 您有一个`MainViewModel`实例`DataContext`作为`MainView.xaml`. 我看到您将 的`Second`属性委托`MainViewModel`给`AlarmClock`实例。当更改来自 UI 时这很好，但我认为您的 DispatcherTimer 在`AlarmClock`实例上运行但该实例没有任何观察者（因为 UI 侦听`MainViewModel`实例）。

您有多个选项可以使其工作，但我对这种情况的建议是扩展 TextBox 绑定路径并将其直接绑定到`AlarmClock`实例。当然，您需要在以下`AlarmClock`位置公开`MainViewModel`：

```
private AlarmClock alarmClock;

public MainViewModel() {
    alarmClock = new AlarmClock();
}

public AlarmClock AlarmClock 
{
    get { return alarmClock; }
} 
```

然后更改您的 xaml：

```
<TextBox Text="{Binding AlarmClock.Hour, Mode=TwoWay}"></TextBox> 
```

另一种选择是订阅UI 委托中的`AlarmClock`实例`PropertyChanged`事件，但这很麻烦。`MainViewModel`您也可以更改 DispatcherTimer 以对其进行操作，`MainViewModel`但我认为它不属于那里。

# compiler-construction - Shift 减少 YACC 中的冲突

> ID：12893374
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:05:37.210
> 
> 标签：compiler-construction, if-statement, yacc, shift-reduce-conflict

我正在尝试以下 yacc 代码并且我收到 shift/reduce 错误。我对此很陌生

`The Purpose of the code is to prepare the syntax for if - else with logical operators also incorporated`

```
 %{
               #include<stdio.h>
               #include"lex.yy.c"
               int syntax_status=0;
           %}
           %token IF ELS id EE LE GE closep openp num openb closeb SP logicop 
           %start S
           %%
           S : S SP IF SP openp SP EXP SP closep SP openb SP closeb SP ELS SP openb SP closeb SP {syntax_status=1;}
             | S SP IF SP openp SP EXP SP closep SP openb SP closeb SP {syntax_status = 1;}
             | 
             ;
         EXP : EXP CMP logicop CMP
             | EXP CMP
             |
             ;
         CMP : CMP id EE id 
             | CMP id LE id
             | CMP id GE id
             | CMP id EE num
             | CMP id GE num
             | CMP id LE num
             | CMP num EE id
             | CMP num GE id
             | CMP num LE id
             | 
             ;
         %%
         int main()
         {
              printf("\n\n\n Enter the Syntax :  ");
              yyparse();
              if(syntax_status==1)
              {
                     printf("\n\n\n The Syntax is Correct ");
              }
              else
              {
                     printf("\n\n\n The Syntax is Imcorrect");
              }
              return 0;
          }
          yyerror(char *s)
          {
              syntax_status=0;
          } 
```

***此相应 yacc 代码的 Lex 程序如下***：

```
 %{
              #include<stdio.h>
              #include"y.tab.h"
           %}
           IF (if)
           ELS (else)
           iden [a-zA-Z][a-zA-Z0-9]*
           num [0-9]+
           space [ ]* 
           %%
           {IF} { return IF; }
           {ELS} {return ELSE;}
           {iden} {return id;}
           (==) {return EE;}
           (<=) { return LE;}
           (>=) { return GE;}
           ")" { return closep;}
           "(" { return openp;}
          {num} { return num;}
          {space} { return SP; }
          "{" { return openb;}
          "}" { return closeb;}
          "||"|"&&"|"!=" {return logicop;} 
```

%%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:45:27.727

CMP 和 EXP 规则看起来都很有问题。以这个最右边的推导为例：

```
 EXP ==> (by EXP -> CMP)
 EXP CMP ==>  (by CMP -> CMP id EE id)
 EXP CMP id EE id ==> (by CMP -> CMP id EE id)
 EXP CMP id EE id id EE id ==> (by CMP -> epsilon)
 EXP id EE id id EE id ==> (by EXP -> epsilon )
 id EE id id EE id ==>
 id == id id == id 
```

我很确定这不是你想要的。它还在语法中引入了歧义：相同的终结符字符串可以通过这种不同的最右边推导得到：

```
 EXP ==> (by EXP -> CMP)
 EXP CMP ==> (by CMP -> CMP id EE id)
 EXP CMP id EE id ==> (by CMP -> epsilon)
 EXP id EE id ==> (by EXP -> CMP)
 EXP CMP id EE id ==> (by CMP -> CMP id EE id)
 EXP CMP id EE id id EE id ==> (by CMP -> epsilon)
 EXP id EE id  id EE id ==> (by EXP-> epsilon)
 id EE id  id EE id ==>
 id == id id == id 
```

你看，yacc 将无法知道`id == id id == id`is 是真的`exp exp`还是`exp`。此外，exp->epsilon 规则允许使用类似 的表达式`if(){}`，这不是很好。

现在，考虑以下语法：

```
 exp -> exp logicop cmp | cmp
 cmp -> rvalue < rvalue | rvalue > rvalue ...
 rvalue -> id | num 
```

但也可以这样做：

```
exp -> exp op exp | rvalue
op -> "||" | "&&" | "<" | ">" ... 
```

后者是执行此操作的传统方式，但您需要进行语义检查以确保操作数的类型正确，而前面的语法则确保在句法级别上做到这一点。从长远来看（一旦引入布尔变量），第二种方法更可取，因为类型安全是语义问题，而不是句法问题。

另一方面：空格在您的语言中似乎不相关，但 lex 正在将它们交给 yacc。您可以通过说让 lex 在词汇级别上丢弃空格

```
{space} //nothing after a pattern discards the matched characters 
```

这样可以省去在 yacc 中写出所有这些 SP 的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:53:06.810

您需要指定运算符的优先级和关联性：例如，请参见[此处。](http://dinosaur.compilertools.net/yacc/index.html)我从教派中引用。6

> 作为这些声明行为的示例，描述

```
 %right  '='
    %left  '+'  '-'
    %left  '*'  '/'

    %%

    expr    :       expr  '='  expr
            |       expr  '+'  expr
            |       expr  '-'  expr
            |       expr  '*'  expr
            |       expr  '/'  expr
            |       NAME
            ; 
```

可用于构造输入

```
 a  =  b  =  c*d  -  e  -  f*g 
```

如下：

```
 a = ( b = ( ((c*d)-e) - (f*g) ) ) 
```

您的`CMP`运算符必须以类似的方式定义，并且您`logicop`应该分开。为了在布尔表达式中获得通常的读数，通常 NOT 表现得像一元减号，AND 像 *，OR 像 +。

高温高压

# php - 如何在 cron 选项卡中运行带有参数的 php url

> ID：12893377
> 
> 赞同：4
> 
> 时间：2012-10-15T10:05:50.757
> 
> 标签：php, linux, crontab

> **可能重复：**
> [如何在 cron 中运行 php 脚本](https://stackoverflow.com/questions/692208/how-to-run-a-php-script-in-cron)

我有一个设置为在 cron 中运行的 php 脚本。我想通过传递一个参数来运行 url。我试图将参数作为查询字符串传递并放入 crontab 它不起作用。如何使用cron运行带有参数的url？

php /var/www/prod/Reports/report.php?email=sample@sample.com

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:09:45.160

向我们展示您的 crontab（或至少包含 PHP 脚本的行）。如果你像这样执行它：

```
php script.php?param1=123 
```

**以上将不起作用。**而是这样做：

```
wget http://localhost/script.php?param1=123&param2=345 -o /dev/null 
```

然后它应该工作。如果没有，请提供更多详细信息。

请记住，该建议只是一个示例。这意味着您有一个正在运行的 Web 服务器，它被配置为运行 PHP 文件等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T10:17:45.243

理想情况下，在命令行界面 (CLI) 中运行 PHP，您将使用 $argv 和 $argc 全局变量将参数传递给脚本。

示例：my_php_script.php

```
 <?
    var_dump($argv);

    php my_php_script.php arg1 arg2

array(3) {
  [0]=>
  string(17) "my_php_script.php"
  [1]=>
  string(4) "arg1"
  [2]=>
  string(4) "arg2"
} 
```

哈里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:15:33.927

使用全局[$argv](http://php.net/manual/en/reserved.variables.argv.php)获取命令行参数。

# c - c语言套接字编程中的listen（）队列长度？

> ID：12893379
> 
> 赞同：9
> 
> 时间：2012-10-15T10:05:57.523
> 
> 标签：c, linux, sockets, network-protocols, listen

我在 Linux中编写了两对代码（`server.c`和）。`client.c`一个用于 UNIX-domain`AF_UNIX`另一个用于 INTERNET-domain `AF_INET`。两者都工作正常！

`listen()`调用**积压队列长度 = 3** in`both servers`

```
listen(sockfd, 3); 
```

**在 UNIX 域（AF_UNIX）中：** 当一个客户端与服务器连接时，如果我尝试将更多客户端连接到服务器。三个在队列中，第四个的请求被拒绝。（如我所愿 - 等待队列中的 3 个）。

**在 INTERNET 域 (AF_INET)** 中：超过三个的请求保留在待处理队列中。

为什么即使积压队列长度为 3，来自第四个客户端的请求也不会被拒绝？为什么`listen()`（和其他）协议的行为依赖于协议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T10:18:27.880

操作系统实际上为传入的 TCP 连接使用了比指定的更大的队列`listen()`。多大取决于操作系统。

```
 listen(int socket_fd, int backlog) 
```

对于给定的侦听套接字，内核维护两个队列。

1.  一个不完整的连接队列 - SYN 已经到来，但三次握手 (TCP) 没有完全完成。（SYN_RCV 状态）
2.  一个完整的连接队列 - 三向握手完成。（已建立状态）

*backlog*参数历史上指定两个队列的总和。*但是对于积压*的含义没有正式的定义。

伯克利派生的实现为积压工作增加了一个软糖因素。所以总排队`length = factor * backlog`。

W. Richard Stevens 在书中给出了非常详细和深入的解释。[在 Stevens, Fenner, Rudoff, " Unix Network Programming: The Sockets Network API](http://books.google.co.in/books?id=ptSC4LpwGA0C&printsec=frontcover&dq=unix%20network%20programming%20the%20sockets%20network%20api%20volume%201%20third%20edition%20google%20books&source=bl&ots=Kr5xNpglTq&sig=w06efLjz6Qsl2Z6sCWrDv0XYIZk&hl=en&sa=X&ei=QON7UNuXDobUrQeT_ICADQ&ved=0CDAQ6AEwAA#v=onepage&q&f=false) ", Volume 1, Third Edition, Page 108中还可以找到显示七个操作系统的值的表格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T10:19:06.460

平台有权根据其最小值和默认值向上或向下调整指定的积压。如今，默认值更像是 500 而不是 5，这是它在 1983 年左右开始的地方。你不能依赖它是你指定的，并且没有 API 可以找出它到底是什么，也没有明显的希望它比默认值短的有效应用程序原因。

# php - Koala-Framework 中的事件组件是否存在？

> ID：12893382
> 
> 赞同：2
> 
> 时间：2012-10-15T10:06:06.497
> 
> 标签：php, koala-framework

我正在开发一个带有 koala-framework 的网站，需要实现一个组件来处理事件（或约会）。

它应该在顶部列出下一个事件，不应显示过去的事件。配置发生在后端集中。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:39:47.933

使用`Kwc_Events_Directory_Component`，这确实是您所需要的。

# listview - 在 QML 的列表视图中保存和检索所选项目的列表

> ID：12893388
> 
> 赞同：1
> 
> 时间：2012-10-15T10:06:19.990
> 
> 标签：listview, qml

我正在为 Symbian 使用 Qt。在我的 mainwindow.cpp 中，我有一个 QPushButton 和一个 QListWidget。按下按钮将显示一个 Qml 页面，该页面有一个列表视图，每行都有复选框。我可以选中或取消选中这些项目。当我按下后退工具按钮时，所选项目列在主窗口的 QListWidget 中。

当我重新打开 Qml 页面（即，再次按下 QPushButton）时，我还需要检索带有所选项目的列表视图。如何做到这一点。？qml 中是否有类似 saveState() 或 restoreState() 的东西？如果没有，是否有任何其他可能的方法来实现这一目标？

编辑：

这是我的代码：

**联系人.qml**

```
ListView {
    id: listView
    anchors.top: statusBar.bottom
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: toolBar.top
    clip: true
    model: stdModel
    //delegate: contactListDelegate
} 
```

**主窗口.cpp**

```
void MainWindow::createList()
{
QContactManager *contactManager = new QContactManager("symbian");    
QList<QContactLocalId> contactIds = contactManager->contactIds();
QContact currContact;
QStandardItemModel *model = new QStandardItemModel();
QImage m_thumbnail;

foreach (const QContactLocalId& id, contactIds)
{
currContact = contactManager->contact(id);
if(currContact.type() == QContactType::TypeContact)
{
    QContactThumbnail avatar(currContact.detail(QContactThumbnail::DefinitionName));
    m_thumbnail = avatar.thumbnail();

    QStandardItem *items = new QStandardItem();
    //items->setData(currContact.displayLabel(), Qt::DisplayRole);
    //items->setData(QPixmap::fromImage(m_thumbnail), Qt::DecorationRole);
    items->setText(currContact.displayLabel());

    if(m_thumbnail.isNull())
    {
        items->setIcon(contactIcon);
    }
    else
    {
        items->setIcon(QPixmap::fromImage(m_thumbnail));
    }
    model->appendRow(items);
}
}
}

void MainWindow::viewQml()
{
    QDeclarativeView *qmlView = new QDeclarativeView;
    qmlView->setSource(QUrl("qrc:/contacts.qml"));
    qmlView->rootContext()->setContextProperty("stdModel", model);
    qmlView->show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:44:18.527

如果您使用 QML ContactModel 作为模型，那么您应该创建一个单独的 C++ 模型并将状态保存在此模型中。

c++ 类的示例：

```
class CheckedModel : public QObject
{
  Q_OBJECT
public:
  CheckedModel(QObject *parent);
  Q_INVOKABLE void setSize(int count) {vector.resize(count)};
  Q_INVOKABLE bool isChecked(int index) {return vector[index]};
  Q_INVOKABLE void check(int index, bool checked) {vector[index] = checked};
private:
  std::vector<bool> vector;
}; 
```

您需要实例化它并提供给 QML。

```
CheckedModel myModel;
QDeclarativeView view;
view.rootContext()->setContextProperty("theCheckedModel", &myModel);
view.setSource(QUrl::fromLocalFile("yourqmlfile.qml"));
view.show(); 
```

然后最后一件事是从 QML 中使用它：

```
ListView {
  id: listView
  model: contactModel
  delegate: contactListDelegate
  onCountChanged: {
    theCheckedModel.setSize(count);
  }
} 
```

在您代表的 MouseArea 中执行以下操作：

```
onClicked: {
  if(selectbox.checked == false)
  {
    selectbox.checked = true
    theCheckedModel.check(index, true);
  }
  else if(selectbox.checked == true)
  {
    selectbox.checked = false
    theCheckedModel.check(index, true);
  }
} 
```

最后一件事是将其加载到复选框：

```
CheckBox {
  id: selectbox
  Component.onComplete{
    selectbox.checked = theCheckedModel.isChecked(index);
  }
} 
```

请注意，他只是您需要做的主要事情，可能不会立即编译。如果您还有问题，请告诉我。希望它有所帮助。

# android - 如何使用 android:layout_weight 和 listview

> ID：12893396
> 
> 赞同：1
> 
> 时间：2012-10-15T10:06:38.867
> 
> 标签：android, listview

我想基于`android:layout_weight`.I 设置 UI。我有以下代码结构

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="25"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="25"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />
</LinearLayout>

<ListView
    android:id="@+id/relatedContent"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="60dp"
    android:layout_weight="50"
    here=""
    problem=""
    android:cacheColorHint="@android:color/transparent"
    android:divider="@drawable/divider"
    android:listSelector="@drawable/listview_selector_color" >
</ListView> 
```

一切正常，但是当我们设置 ListView id 时，它会影响所有布局。所以请任何人帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:19:49.600

你需要改变你的xml如下：

```
//alter both LinearLayout as
android:layout_weight="25"
android:layout_height="0dp"

//alter ListView as
android:layout_weight="50"
android:layout_height="0dp"
android:isScrollContainer="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:09:52.100

把你的`list view`里面 a`linear layout`给。然后把`layout_weight="50"`宽度 和高度设置为。`linear layout``listview``fill parent`

还要给linear_layout`layout height="0dp"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:54:34.927

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />
</LinearLayout>

<ListView
    android:id="@+id/relatedContent"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_marginBottom="60dp"
    android:layout_weight="50"
    android:cacheColorHint="@android:color/transparent" >
</ListView> 
```

# ios - 如果我跟踪 iPhone 的 Mac 地址，我有什么缺点？

> ID：12893398
> 
> 赞同：1
> 
> 时间：2012-10-15T10:06:45.720
> 
> 标签：ios, mac-address

如果我跟踪/获取 iPhone 或 iPad 的 Mac 地址，我有什么缺点？我只需要知道特定用户正在使用哪些服务。苹果会因此拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:15:59.430

我认为苹果不会仅仅因为您正在访问设备 mac 地址而拒绝您的应用程序。此外，mac 地址现在被访问/使用了一段时间以替换[弃用的 UUID api](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)。您只需确保您没有使用任何私有 api 来访问 mac 地址。苹果将​​来有可能会阻止对mac地址的访问..

编辑：在苹果官方开发者论坛中，[已经提出](https://devforums.apple.com/message/739810#739810)并回答了这个问题。只需阅读苹果员工 eskimo1 的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:15:39.037

不，他们不会，您只需要做好准备，他们可能会在未来的 iOS 版本中禁止访问 Mac 地址...

# sugarcrm - 如何增加sugarcrm中显示的子菜单项的数量？

> ID：12893400
> 
> 赞同：0
> 
> 时间：2012-10-15T10:06:46.963
> 
> 标签：sugarcrm

我试图摆脱 SugarCRM 中的菜单折叠（在“更多”子菜单中分组），或者至少在折叠发生之前增加子菜单项的数量。到目前为止，我已经搜索了代码，但找不到实现的地方。 ![子菜单折叠](../Images/3d3e7d5cb35ad875710cfce485ee2f53.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:06:55.310

不完全是我正在寻找的答案，但在 config.php`default_max_tabs = '7'`中找到了一个设置，它在折叠前增加了数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:33:13.813

是的，目前唯一的方法是在 config_override.php 中覆盖此配置值并定义 default_max_tabs 设置。这仅在 SugarCRM 6.2 之后可用

# ajax - ajax 内容更新后灯箱将无法工作

> ID：12893406
> 
> 赞同：1
> 
> 时间：2012-10-15T10:07:01.707
> 
> 标签：ajax, wordpress, lightbox

我有一个日历[http://tinyurl.com/bn9r6lk](http://tinyurl.com/bn9r6lk)。（插件：[http](http://tinyurl.com/7axlse4) ://tinyurl.com/7axlse4 ）

内容通过 Lightbox Plus wp 插件加载。

在月份的任何切换后都无法让灯箱工作。即使我改回最初的月份。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:56:38.370

我对 Lightbox 没有任何经验，但对于其他插件，我在每次 Ajax 请求后使用重新加载功能。请检查[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)。

```
$.getScript("plugins/lightbox.js"); 
```

# windows - 在 Ubuntu 12.04 中安装 Microsoft Outlook Messenger 时，出现错误对象不支持此操作

> ID：12893408
> 
> 赞同：1
> 
> 时间：2012-10-15T10:07:07.250
> 
> 标签：windows, outlook, ubuntu-12.04, wine

在 Ubuntu 12.04 中安装 Microsoft Outlook Messenger 时，出现错误对象不支持此操作

我使用 Wine 在 Ubuntu 中使用 Microsoft 产品。

它在 Ubuntu 10.04 中运行良好，但我不知道在 Ubuntu12.04 中发生了什么。我按照在 Ubuntu 10.04 中安装的相同步骤进行安装，其他 Microsoft 产品在 12.04 中可以完美运行，例如 MS Office、记事本等。

我在尝试使用 wine 打开 Outlook 时收到此错误消息：

运行时错误“445”对象不支持此操作。

# c++ - C++ 模板函数特化

> ID：12893411
> 
> 赞同：1
> 
> 时间：2012-10-15T10:07:09.657
> 
> 标签：c++, templates, specialization

我必须为定义为的模板类实现一个非成员函数 isHomogenous(Triple Triple)：

```
template <typename T1, typename T2, typename T3>
    class Triple
{
public:
    Triple()
    { }
    Triple(const T1 &a, const T2 &b, const T3 &c) : a(a), b(b), c(c)
    { }
... 
```

isHomogenous 函数应该返回一个 bool 值，指示参数三元组中的所有三个值是否都属于同一类型。我努力了：

```
template <typename T> bool isHomogenous(Triple<T, T, T> triple) {
    return true;
}

template <typename T1, typename T2, typename T3> bool isHomogenous(Triple<T1, T2, T3> triple) {
    return false;
} 
```

这不起作用，你能提示我一个解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T10:15:17.757

函数模板不能部分特化。

一种替代方法是将其定义为类模板的静态成员函数（或者在您的情况下只是一个值！），然后只提供一个普通的函数模板包装器，例如……

```
#include <type_traits>

template< class T1, class T2, class T3 >
struct Blah {};

namespace detail {
    template< class T1, class T2, class T3 >
    struct IsHomogenous { static bool const yes = false; };

    template< class T >
    struct IsHomogenous< T, T, T > { static bool const yes = true; };
}  // namespace detail

template< class T1, class T2, class T3 >
bool isHomogenous( Blah< T1, T2, T3 > )
{
    return detail::IsHomogenous< T1, T2, T3 >::yes;
}

#include <iostream>
int main()
{
    using namespace std;
    wcout << boolalpha
        << isHomogenous( Blah< double, char, void >() ) << " "
        << isHomogenous( Blah< int, int, int >() )
        << endl;
} 
```

另一种方法是使用 C++11 `std::is_same`：

```
#include <type_traits>

template< class T1, class T2, class T3 >
struct Blah {};

template< class T1, class T2, class T3 >
bool isHomogenous( Blah< T1, T2, T3 > )
{
    using std::is_same;
    return is_same< T1, T2 >::value && is_same< T2, T3 >::value;
}

#include <iostream>
int main()
{
    using namespace std;
    wcout << boolalpha
        << isHomogenous( Blah< double, char, void >() ) << " "
        << isHomogenous( Blah< int, int, int >() )
        << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:15:28.013

您不能专门化模板函数，当您添加专门化时，专门化的函数实际上被添加到重载集中，因此它与重载相同，并且用于选择调用哪个函数使用重载解析规则。

如果您真的想专门化模板函数，请委托给具有静态成员的结构或类并专门化模板结构：

```
template <typename T>
struct handler
{
   static void perform(T& );
};

template <>
struct handler<int>
{
   static void perform(int) { doStuff(); }
}; 
```

这是全局函数（您要专门化）：

```
template <typename T>
void function (T& v)
{
   handler<T>::perform(v);
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:33:19.173

您可以使用返回真或假的函子部分专门化一个类。（或静态成员，无论如何）：

```
template< class T1, class T2, class T3 >
class Blah {};

template< class T>
struct isHomogenous
{
    const bool operator()() { return false; }
};

template< template <typename,typename,typename> class T, class T1, class T2, class T3 >
struct isHomogenous<T<T1,T2,T3>>
{
    const bool operator()() { return false; }
};

template< template <typename,typename,typename> class T, class T1>
struct isHomogenous<T<T1,T1,T1>>
{
    const bool operator()() { return true; }
};

std::cout << isHomogenous< Blah<double, char, void> >()() << " "
    << isHomogenous< Blah<int, int, int> >()(); 
```

# django - Django按用户关系上传文件错误

> ID：12893412
> 
> 赞同：2
> 
> 时间：2012-10-15T10:07:11.223
> 
> 标签：django, django-models, django-file-upload

我正在制作一个应用程序，它需要用户上传一些文件。我想将所有文件存储在用户名文件夹中（并且可能稍后将其移出项目文件夹，但这是另一回事）

首先我在做一些测试，我拿了这个例子，所以[：需要一个最小的 django 文件上传示例](https://stackoverflow.com/questions/5871730/need-a-minimal-django-file-upload-example)。

它就像那样工作，所以我进入下一步。

我检查了这个问题：

[Django FileField with upload_to 在运行时确定](https://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime "Django FileField with upload_to 在运行时确定")

[Django中的动态文件路径](https://stackoverflow.com/questions/5135556/dynamic-file-path-in-django)

[Django 在模型中存储用户图像](https://stackoverflow.com/questions/8189800/django-store-user-image-in-model?rq=1)

我当前的models.py：

```
# models.py
from django.db import models
from django.contrib.auth.models import User
import os

def get_upload_path(instance, filename):
    return os.path.join('docs', instance.owner.username, filename)

class Document(models.Model):
    owner = models.ForeignKey(User)
    docfile = models.FileField(upload_to=get_upload_path) 
```

我的观点.py

```
@login_required
def list(request):
    # Handle file upload
    if request.method == 'POST':
        form = DocumentForm(request.POST, request.FILES)
        if form.is_valid():
            newdoc = Document(docfile = request.FILES['docfile'])
            newdoc.save()

            # Redirect to the document list after POST
            return HttpResponseRedirect(reverse('myapp.views.list'))
    else:
        form = DocumentForm() # A empty, unbound form

    # Load documents for the list page
    documents = Document.objects.all()

    # Render list page with the documents and the form
    return render_to_response(
        'myapp/list.html',
        {'documents': documents, 'form': form},
        context_instance=RequestContext(request)
    ) 
```

所有接受的答案都会导致相同的解决方案。但是我遇到了 instance.owner 的错误：

```
django.contrib.auth.models.DoesNotExist
DoesNotExist
raise self.field.rel.to.DoesNotExist 
```

使用 werkzeug 调试器：

```
>>> instance
<Document: Document object>
>>> instance.owner
Traceback (most recent call last):

File "<debugger>", line 1, in <module>
instance.owner
File "C:\Python27\lib\site-packages\django\db\models\fields\related.py", line 343,     in    __get__
raise self.field.rel.to.DoesNotExist
DoesNotExist 
```

我错过了什么？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:24:44.387

您正在尝试将`Document`对象另存为：

```
newdoc = Document(docfile = request.FILES['docfile'])
newdoc.save() 
```

但是你还没有设置`owner`它，你在`get_upload_path`方法`instance.owner`中没有定义/设置并且`instance.owner.username`会失败。

您可以将保存更改为：

```
newdoc = Document(docfile = request.FILES['docfile'])
newdoc.owner = request.user #set owner
newdoc.save() 
```

我不确定，你的`DocumentForm`是什么。但如果它也有`owner`字段，那么您可以直接保存它而不是`newdoc`单独创建：

```
...
if form.is_valid():
    newdoc = form.save()
... 
```

# java - 使用 proguard 缩小特定类

> ID：12893413
> 
> 赞同：0
> 
> 时间：2012-10-15T10:07:14.600
> 
> 标签：java, android, proguard

我想从建筑中删除一些课程。我在 proguard 中提到跳过收缩从 View 类扩展的所有类，但现在我想收缩一些从 View 类扩展的类。我的问题是：如何缩小从 View 类扩展的一些类，同时不删除条件以缩小所有 View 扩展类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:06:32.750

这应该有效：

```
-keep class !mypackage.ShrinkMe1, !mypackage.ShrinkMe2 extends android.view.View 
```

# vb.net - 如何检索最后一行单元格值

> ID：12893414
> 
> 赞同：2
> 
> 时间：2012-10-15T10:07:18.260
> 
> 标签：vb.net

使用 VB.Net

我想检索最后一行单元格值

数据网格

```
01 Rajan
02 Vijayan
03 Suresh 
```

试过这样的代码

```
 For i As Integer = 0 To datagrid1.RowCount - 1 
            textbox1.text = datagrid1.currentrow.Cells(0).Value 'current row
            textbox2.text = datagrid1.row(i).Cells(0).Value 'last row
 Next 
```

最后一行显示为空

预期产出

```
textbox2.text = 03 
```

我的代码有什么问题，需要 vb.net 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:59:47.740

您应该能够使用 linq；`dataGridView1.Rows.Cast<DataGridViewRow>().LastOrDefault()`如果没有行，将为您提供最后一行或 null 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:13:11.800

```
dataGridView1.Rows[dataGridView1.RowCount - 1].Cells[0].Value.ToString(); 
```

.Rows 是一个集合，也像数组一样工作，数组的索引编号从 0 到 N-1

# java - Java图形编程绘制图像错误

> ID：12893416
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:07:27.600
> 
> 标签：java, swing, user-interface, compiler-errors, scope

您好，在我的框架上绘制图像时出现错误。我不确定这里出了什么问题。

我在这里收到以下错误。

```
Java: 77: cannot find symbol
symbol: variable image
location: class DrawComponent
g.drawImage(image, 0, 0, null);

class DrawComponent extends JComponent {
    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        // draw a circle with the same center
        double centerX = 250;
        double centerY = 180;
        double radius = 20;

        Ellipse2D circle = new Ellipse2D.Double();
        circle.setFrameFromCenter(centerX, centerY, centerX + radius, centerY + radius);
        g2.setPaint(Color.RED);
        g2.fill(circle);
        g2.draw(circle);

        String filename = "SydneyOperaHouse.jpeg";
        try{
            Image image = ImageIO.read(new File(filename));
        }catch(IOException ex){
            // Handle Exeption
        }

        g.drawImage(image, 0, 0, null);

    }
} 
```

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:18:11.477

几点。

1.  **解决属性范围的问题。** 该`image`属性应交给（或加载到）构造函数并存储为对paint方法可见的类属性。*切勿尝试在此方法中加载图像（或执行其他可能长时间运行的任务）。*
2.  BG 的图像在部署时通常是嵌入式资源，因此通过 URL 访问它。
3.  A`JComponent`是一个`ImageObserver`所以`g.drawImage(image, 0, 0, null);`应该是
    `g.drawImage(image, 0, 0, this);`
4.  我怀疑 0x0 处的图像绘制应该在绘制红色椭圆之前（之前完成），否则它将绘制在它的顶部。

这是一个基于悉尼图像的示例（不，不是血腥的歌剧院 - 挑剔，挑剔......）。

```
import java.awt.*;
import java.awt.geom.Ellipse2D;
import javax.swing.*;
import javax.imageio.ImageIO;
import java.net.URL;

public class DrawComponent extends JComponent {

    private Image image;

    DrawComponent(Image image) {
        this.image = image;
        Dimension d = new Dimension(image.getWidth(this),image.getHeight(this));
        this.setPreferredSize(d);
    }
    public void paintComponent(Graphics g) {
        // always call super first, to get borders etc.
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;

        // paint the BG
        g.drawImage(image, 0, 0, this);

        // draw a circle with the same center
        double centerX = 250;
        double centerY = 180;
        double radius = 20;

        Ellipse2D circle = new Ellipse2D.Double();
        circle.setFrameFromCenter(centerX, centerY, centerX + radius, centerY + radius);
        g2.setPaint(Color.RED);
        g2.fill(circle);
        g2.draw(circle);
    }

    public static void main(String[] args) throws Exception {
        String s = "http://pscode.org/media/citymorn1.jpg";
        final Image image = ImageIO.read(new URL(s));
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JComponent gui = new DrawComponent(image);
                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:09:04.037

您只需在 try 块中声明您的图像变量......它在它之外是不可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T10:10:16.103

```
try{
    Image image = ImageIO.read(new File(filename));
}catch(IOException ex){
    // Handle Exeption
}

g.drawImage(image, 0, 0, null); 
```

变量的[范围](http://docs.oracle.com/javase/tutorial/jndi/ops/scope.html)`image`是错误的。请注意，您是在`try`-block 内声明变量。该变量不存在于`{ ... }`-block`try`之外。

在 -block 之外声明变量`try`：

```
Image image = null;
try {
    image = ImageIO.read(new File(filename));
} catch(IOException ex) {
    // Handle Exeption
}

if (image != null) {
    g.drawImage(image, 0, 0, null);
} 
```

顺便说一句，您不应该在`paintComponent`方法内部进行 I/O。最好将图像加载到其他地方（例如，当应用程序启动时），将其存储在成员变量中，然后在`paintComponent`方法中使用它。

当您在`paintComponent`方法中加载图像时，每次需要绘制组件时都会加载它。这将使您的应用程序变慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:10:39.690

如果出现异常，您会在这里期待什么？

```
 String filename = "SydneyOperaHouse.jpeg";
    try{
        Image image = ImageIO.read(new File(filename));
    }catch(IOException ex){
        // Handle Exeption
    }

    g.drawImage(image, 0, 0, null); 
```

您应该在块内声明/初始化*和*绘制。`try{}`

# php - 用PHP读写excel文件

> ID：12893423
> 
> 赞同：5
> 
> 时间：2012-10-15T10:07:48.100
> 
> 标签：php, mysql, excel

> **可能重复：**
> [PHP_excel](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)
> [PHPExcel 阅读器的替代品 — 需要帮助](https://stackoverflow.com/questions/4792543/phpexcel-reader-help-required)

第一篇文章。我非常需要使用 PHP/My SQL 读取和写入非常大 (5mb+) 的 excel 文件。我使用过 PHPExcel，虽然它非常优雅，但它太慢了，并且使用了太多 PHP 内存来满足我的需要。目前，我的主机仅限于 32M PHP 内存。

我目前的解决方案如下：

**导入数据库**

我对 .xls 文件使用 php-excel 阅读器 ( [http://code.google.com/p/php-excel-reader/](http://code.google.com/p/php-excel-reader/) ) - 在 PHP 内存不足之前可以导入大约 3000 行。
我对 .xlsx 文件使用电子表格阅读器（[https://github.com/nuovo/spreadsheet-reader](https://github.com/nuovo/spreadsheet-reader)），到目前为止，我已经尝试了 5000 行以上而没有耗尽内存。它非常慢，这让我相信它一次打开和关闭 excel 文件并读取大块数据。

**出口**

PHP Excel 用于大约 500 行以下的任何内容。效果很好，但速度很慢，并且无法使用 32Mb PHP 内存处理几百行（注意：我正在使用缓存，这有帮助但还不够）

超过 500 行的基本制表符分隔文本。非常快，对行没有限制，但没有格式，也不是真正的 excel。

理想情况下，我正在寻找一种可以快速读写 .xls 和 .xlsx 文件且不会遇到内存问题的一体化解决方案。我不介意商业产品，并且很乐意为有效的东西支付几百美元。

我花了几个小时搜索互联网和这个网站，但还没有找到任何东西。

有任何想法吗？

PS：如果有人想看看我是如何实现上述解决方案的，我很乐意分享代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:14:35.310

由于您对 PHPExcel 的速度和内存要求不满意，我将向您指出我对这个问题的[标准答案](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)。如果那里没有列出答案，那么它可能不存在：该列表就我所知道的那样全面.... -日期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:16:10.363

就我的经验而言，php 中的 excel 实现并没有很好的性能（perl 实现花了 8 分钟来编写 php 3 小时所做的事情），所以我最终使用了 Perl。

唯一可以真正解决内存不足问题的方法是设置更高的值[`memory_limit`](https://discussion.dreamhost.com/thread-131009.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:44:23.733

对于写作，您可能想尝试一下[http://pear.php.net/package/Spreadsheet_Excel_Writer](http://pear.php.net/package/Spreadsheet_Excel_Writer)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T10:13:37.983

我会推荐[PHPExcel](http://phpexcel.codeplex.com/)。如果需要，它很容易使用并且很容易更改功能。我用过很多次，从来没有遇到过任何问题，即使是大型复杂的电子表格。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-15T10:11:03.083

[PHPExcel 类](http://phpexcel.codeplex.com/)该类可以：

1.  读
2.  写

# javascript - 动态灵活的网格布局

> ID：12893426
> 
> 赞同：7
> 
> 时间：2012-10-15T10:08:08.013
> 
> 标签：javascript, jquery, html, css

我希望根据具有以下要求的灵活网格布置仪表板：

*   总宽度是可变的，并且必须始终适合屏幕，即使在调整大小时
*   单元格可以合并
*   所有列都应具有相同的大小（例如，3 列）
*   与行相同
*   总高度应该可选地适合屏幕高度
*   这些网格是用户生成的，所以它们不能像在线生成器那样被 CSS 硬编码。

这是我制作的一些图片：

**用户定义网格示例** ![用户定义网格示例](../Images/db76810107ae12054eb2cca0b09d4c3b.png)

**合并单元格的相同示例** ![合并单元格的相同示例](../Images/13a91398ddebb9df63a57659c6064d9c.png)

**相同的示例缩放** ![相同的示例缩放](../Images/87fddc37213ab0f4c80d5825fe48ded1.png)

我正在寻找一个插件/代码来实现这一点，因为我几乎可以肯定它不能在 CSS 中完成（据我所知，大多数浏览器中尚未实现网格布局）。我得到的最接近的是生成一个表格，但是调整单元格的大小最终变得完全混乱（[为什么这张表格看起来不整洁？](https://stackoverflow.com/questions/12862312/why-doesnt-this-table-look-neat)）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T10:10:51.197

[您可以通过使用http://masonry.desandro.com/](http://masonry.desandro.com/)或[http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)之类的插件来接近它

对于响应式位，我建议阅读[http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout](http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout)。它谈到了砌体插件，但这些概念可以普遍应用。

# php - 客户端上的 php 或 javascript 可以链接到远程服务器数据库吗？

> ID：12893427
> 
> 赞同：2
> 
> 时间：2012-10-15T10:08:09.350
> 
> 标签：php, javascript, oracle, client-server

使用 Toad 或 SQL Developer 时，我可以访问远程 Oracle 数据库。
连接当然由 TNS 记录和用户+密码指定。

现在我希望有一个本地网页来显示（定期刷新）数据库中的数据。起初我正在考虑使用 php，但我猜它只能在服务器本身上使用，我无法在服务器上创建文件。当然，当有多个用户但这里只有一个用户时，服务器页面会更合适。

事实上，我只想通过从提到的工具运行查询来做同样的事情，但现在从自定义网页调用。我觉得这应该是可能的，因为该工具还必须建立从客户端到服务器数据库的连接；但我不知道如何设置我的本地客户端网页。

如果更合适，是否可以通过应用 php 或 javascript 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:12:57.603

那么您必须了解连接到 oracle 数据库的功能是作为框架的一部分打包的，javascript 中没有这样的框架可以帮助您。

你对 php 是正确的，但是它需要一个网络服务器才能运行，而且它们是免费的 :)

php能连接oracle数据库的原因是，它有框架来做这些操作。

现在的答案是`no`。

或者你可以看看你是否可以写一个`Activex`可以连接到Oracle数据库并刷新的，微软提供框架/ api来连接到数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:14:30.753

做这种事情的最好方法是 AJAX：javascript 代码调用 web 服务器上的 PHP 页面，该页面连接到数据库并将数据返回到更新页面的 javascript。

# perl - 使用 LWP:UserAgent 时，$response->is_success 返回空白

> ID：12893432
> 
> 赞同：3
> 
> 时间：2012-10-15T10:08:34.923
> 
> 标签：perl, http, cpan, lwp

我正在使用`LWP::UserAgent`如下

```
my $ua = LWP::UserAgent->new;

my $response = $ua->request ( ...);

if ( $response->is_success() )
{
...
}
print $response->is_success(); 
```

我面临的问题`is_success()`是返回空白。我期待`1`（真）或`0`（假）。我在这里做错了什么？`print`说法对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:38:57.527

`0`在 Perl 中不返回任何东西是正确且常用的方法来从函数返回错误结果，当您只需要逻辑错误结果时不要指望文字数字。您的请求很可能以非 2xx 或 3xx 代码返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:30:12.033

从[Perl 文档](http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood)：

> 数字 0、字符串 '0' 和 "" 、空列表 () 和 undef 在布尔上下文中都是错误的。所有其他值都为真。对真实值的否定！或不返回一个特殊的假值。当作为字符串求值时，它被视为 "" ，但作为数字，它被视为 0。大多数返回 true 或 false 的 Perl 运算符都以这种方式运行。

换句话说，您的错误是假设 boolean false 始终由 表示`0`。更准确地说，在 Perl 中 false 由“空”表示，具体含义取决于上下文。

这很有用，因为它允许在各种上下文中使用干净的代码：

```
#evaluates false when there are no more lines in the file to process
while (<FILE>) { ... }

#evaluates false when there are no array elements
if (!@array) { ... }

#evaluates false if this variable in your code (being used as a reference) 
#hasn't been pointed to anything yet.
unless ($my_reference) { ... } 
```

等等...

在您的情况下，尚不清楚为什么您希望 false 等于零。代码中的`if()`语句应按书面方式工作。如果出于某种原因您需要将结果明确表示为数字，则可以执行以下操作：

```
my $numeric_true_false = ($response->is_success() ? 1 : 0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-26T11:29:49.717

从评论中的讨论：

```
$response->status_line 
```

实际返回`500 Can't Connect to database.`

使用`$response->is_success()`，我无法理解 db 的响应。

用于 `$response->status_line`找出代码失败的确切位置。

# android - 在我的安卓应用中实现 zxing-2.0

> ID：12893438
> 
> 赞同：3
> 
> 时间：2012-10-15T10:09:21.900
> 
> 标签：android, zxing

所以我试图在我的应用程序中实现它，但问题是它不能作为一个单独的应用程序工作，所以它在我每次启动它时都会崩溃。我按照以下教程[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)做所有事情，但是，不知何故不起作用。所以我尝试将 captureActivity 作为应用程序而不是库启动，当它尝试这样做时它会在启动时崩溃：

```
 private static final Set<ResultMetadataType> DISPLAYABLE_METADATA_TYPES =
  EnumSet.of(ResultMetadataType.ISSUE_NUMBER,
             ResultMetadataType.SUGGESTED_PRICE,
             ResultMetadataType.ERROR_CORRECTION_LEVEL,
             ResultMetadataType.POSSIBLE_COUNTRY); 
```

这导致我没有正确编译 core.jar 的问题。但是我看不出我会在哪里犯错。我在核心目录中运行 ant -f，它给了我 core.jar。有什么想法我能做什么？

编辑：日志猫：

```
 01-06 02:07:08.280: E/AndroidRuntime(1629): FATAL EXCEPTION: main
 01-06 02:07:08.280: E/AndroidRuntime(1629): java.lang.ExceptionInInitializerError
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at java.lang.Class.newInstanceImpl(Native Method)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at java.lang.Class.newInstance(Class.java:1409)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.os.Handler.dispatchMessage(Handler.java:99)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.os.Looper.loop(Looper.java:130)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at android.app.ActivityThread.main(ActivityThread.java:3683)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at java.lang.reflect.Method.invokeNative(Native Method)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at java.lang.reflect.Method.invoke(Method.java:507)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at dalvik.system.NativeStart.main(Native Method)
 01-06 02:07:08.280: E/AndroidRuntime(1629): Caused by: java.lang.NoClassDefFoundError: com.google.zxing.ResultMetadataType
 01-06 02:07:08.280: E/AndroidRuntime(1629):    at com.google.zxing.client.android.CaptureActivity.<clinit>(CaptureActivity.java:107)
 01-06 02:07:08.280: E/AndroidRuntime(1629):    ... 15 more
 01-06 02:07:08.740: E/GoKeyboard(1442): error setSuggestions isNotInput()!
 01-06 02:07:09.140: E/GoKeyboard(1442): error setSuggestions isNotInput()!
 01-06 02:07:11.600: E/GoKeyboard(1442): error setSuggestions isNotInput()!
 01-06 02:07:11.600: E/GoKeyboard(1442): error setSuggestions isNotInput()! 
```

现在我从这里[http://mvnrepository.com/artifact/com.google.zxing/core/2.0](http://mvnrepository.com/artifact/com.google.zxing/core/2.0)下载了核心并使用它并窃取了同样的错误，所以它必须是别的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:12:28.327

转到属性 -> Java 构建路径 -> “订购和导出”

然后将core.jar命令到第一个位置并选择它！

您必须在操作后清理您的项目。项目 -> 清洁

这样就解决了问题。我希望它可以节省一些人的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:15:41.127

ADT 最新版本的主要问题是资源常量不能在 switch-case 语句中使用。解决方案是按照以下 URL 中的说明进行操作： [http](http://tools.android.com/tips/non-constant-fields) ://tools.android.com/tips/non-constant-fields 上的 switch-case 语句指示错误并将它们转换为 if-else。这种方式适用于 zxing2.1。

# android - 客户项目 - 如何处理 3rd 方/内部库的源代码

> ID：12893439
> 
> 赞同：1
> 
> 时间：2012-10-15T10:09:25.323
> 
> 标签：android, libraries, software-distribution

我目前正在为客户开发一个项目（Android 应用程序）。我们的合同规定我必须在项目结束时交付源代码，并且客户将拥有该代码的权利。对于那件事我没有任何疑问。

但是，为了满足截止日期的一些要求，我不得不使用：

*   开源库
*   内部库（在该项目之前由我自己开发的代码）
*   外部非开源库

对于开源库，我检查了许可证是否兼容，所以这里没有问题。我主要关心的是你如何处理剩下的？

您是否将内部图书馆/个人工作与项目一起赠送？

PS：[内部库，因为它们包含一些Android小部件和布局不能打包为JAR](https://stackoverflow.com/questions/7689975)文件，所以必须提供源代码，这是我感觉不舒服的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:18:28.143

我想这是你的判断。您需要研究与客户签订的合同、他们的需求、您的需求以及您对什么感到满意。

例如：如果你使用 twitter api，那么你不能给他们源代码，你不拥有它 - 所以很明显在某个地方有一个中途之家。

如果您可以编译库，那很好 - 只要它们有很好的文档记录，并且您的客户将代码传递给维护它的任何人都可以适当地使用它们。

如果您不想发布它们的源代码，您应该能够将大多数功能编译到外部库中。

否则，您将不得不重新开发它们或要求更改合同。如果您不想泄露源代码，那么您 a) 不应该使用该源代码或 b) 不签署说您将泄露源代码的合同。

# phpexcel - 如何在 PHPEXCEL 中为数据系列设置辅助轴？

> ID：12893440
> 
> 赞同：0
> 
> 时间：2012-10-15T10:09:28.160
> 
> 标签：phpexcel

如何为这个系列设置辅助轴？

```
 $series = new PHPExcel_Chart_DataSeries(
        PHPExcel_Chart_DataSeries::TYPE_LINECHART,      // plotType
        PHPExcel_Chart_DataSeries::GROUPING_CLUSTERED,  // plotGrouping
        $chartOrder,                                    // plotOrder
        $chartLables,                                   // plotLabel
        $chartCategories,                               // plotCategory
        $chartValues                                    // plotValues
    );
    $series->setPlotDirection(PHPExcel_Chart_DataSeries::DIRECTION_COL);
    $plotarea = new PHPExcel_Chart_PlotArea(null, array($series));
    $legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_BOTTOM, null, false);

    $chart = new PHPExcel_Chart(
        "chart_$topRow_$leftColumn",                    // name
        null,                                           // title
        $legend,                                        // legend
        $plotarea,                                      // plotArea
        true,                                           // plotVisibleOnly
        0,                                              // displayBlanksAs
        null,                                           // xAxisLabel
        null                                            // yAxisLabel
    );
    $chart->setTopLeftPosition('A1');
    $chart->setBottomRightPosition(K12');
    $objWorksheet->addChart($chart); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:24:55.273

你不能，次要 Y 轴尚不支持....请记住，图表仍被认为是实验性的，图表功能仍在构建中

# linq-to-sql - 网格视图中的 Linq 连接表

> ID：12893443
> 
> 赞同：0
> 
> 时间：2012-10-15T10:09:33.100
> 
> 标签：linq-to-sql, gridview

```
var result = from p in dc.People
             join d in dc.Departments
             on p.fk_dep_id equals d.pk_dep_id
             select p;

return result.ToList(); 
```

上面的 linq 查询将选择所有人员，以及他们被分配到的部门的全名。此结果包含对象“部门”中的部门数据，我可以在调试时看到这些数据。

但是，当将此结果添加到 gridview 时，连接的数据会触发错误：

```
"A field or property with the name "Department.name" was not found on the selected data source. 
```

我尝试在 Gridview 中执行以下操作：

```
<asp:BoudField DataField="Department.Name" HeaderText="Department" SortExpression="Department.Name" /> 
```

关于如何使用 linq2sql 数据在 Gridview 中显示这种“连接”列的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:13:49.310

`DataField`应该是数据源中对象的属性名称。你不能使用这样的复杂表达式。为此，您需要`TemplateField`：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label runat="server" 
             Text="<%# (Eval("Department") as Department).Name %>" />
    </ItemTemplate>
</asp:TemplateField> 
```

# ios - iPad - 生物特征签名 - getPressure touch

> ID：12893446
> 
> 赞同：1
> 
> 时间：2012-10-15T10:09:40.730
> 
> 标签：ios, signature, pen, pressure

我需要为 iPad 创建一个应用程序，客户端可以在其中签名，我可以获得坐标、加速度和触摸**压力**。对于绘图，坐标和加速度没有问题。但我无法承受压力。我试过了，`CPBPressureTouchGestureRecognizer`但我没有解决。我也可以使用笔和 sdk。

有人可以给我建议吗？我可以用手指做所有事情还是需要一支笔？什么是更便宜的笔和更容易使用的 sdk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:12:58.480

iPad没有感知压力的硬件能力。除非是一些特殊的触控笔通过 BT 将压力信息发送到 iPad 应用程序——否则你就不走运了。

另外 - 你必须自己计算加速度。

# asp.net - 接受来自不同服务器的大文件输入的 ASP .NET WebService

> ID：12893449
> 
> 赞同：2
> 
> 时间：2012-10-15T10:09:51.233
> 
> 标签：asp.net, web-services, upload, query-string, large-files

我需要在 ASP .NET 3.5 (C#) 中构建一个 Web 服务，该服务接受一个大文件（文档，如 DOC/PDF/XLS 和大约 10-20 MB 的类似文件）作为输入参数。
许多第 3 方应用程序调用此 Web 服务，其中许多应用程序是用 PHP 开发的。一旦 WS 拥有该文件，它必须将其放入另一个 .NET 应用程序文档存档中。
我已经测试了整个回合并且它有效。该文件未在调用 url 中传递，它是由服务器本地路径获取的。

现在，我的问题是：当调用来自托管在不同服务器上的应用程序时，如何将大文件传递给 WS？

**编辑：**添加了一个例子。

案子：

`Server A is a PHP application that calls the .NET Web Service on Server B and passes it a file. Then, the WS on Server B will post the file somewhere else on Server C.`

换句话说，我的问题是服务器 A 和服务器 B 之间的通信。我需要像“查询字符串”这样的东西，我可以用它来将文件作为字节数组或其他任何东西传递。就像是：

```
http://www.myserver.com/InsertFile.ashx?file=A3Fdf3Gjy5... <-- byte array of the file 
```

显然，查询字符串不太适合我的目的......
我想知道我想要做的事情是否可行以及我应该使用哪种技术来使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:18:22.220

您可以使用 POST 而不是 GET 来允许更大的文件（并且在语义上是正确的）。[这里](https://stackoverflow.com/questions/10316052/post-file-to-ashx-page-on-different-server)问了一个类似的问题。指向[此链接](http://aspnetupload.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:27:34.020

如果 Web 服务是您的，您可以通过更改 web.config 文件来实现它。请参考：

> [如何将大 (> 25MB) 文件上传到 Web 服务？](https://stackoverflow.com/questions/998927/how-do-i-upload-large-25mb-files-to-a-web-service)

# android - 安卓操作栏？

> ID：12893450
> 
> 赞同：3
> 
> 时间：2012-10-15T10:09:51.273
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我的应用程序中有一个适用于 Android 4.0.3 的操作栏。每个选项卡都有一些按钮（一种继续），它们会更改片段而不是选项卡。我遵循了[http://developer.android.com](http://developer.android.com)上的官方开发者指南，但它不起作用。

这就是我要的 ：

![在此处输入图像描述](../Images/569ea79752918f330a150ff67fcf77eb.png)

有可能与 Action Bar Sherlock 进行这种类型的交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:48:29.970

I believe you can specify tabs behaviour you need by properly overriding tabs callback class method onTabSelected(Tab tab, FragmentTransaction ft). It shold be look like

```
 public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(R.id.realtabcontent, mFragment, mTag);
        } else {
            //Here we look if current fragment aren't default fragment for this tab
            //Remember that detached fragments are still managed by system, so manage it the way u need
            // If it exists, simply attach it in order to show it
            // ft.attach(mFragment);
            if (mFragment.getTag().equals("defaultFragment"))
                ft.show(mFragment);
            else {
                ft.detach(mFragment);

                mFragment = fragmentManager.findFragmentByTag("defaultFragment");
                if (mFragment == null)
                    mFragment = Fragment.instantiate(mActivity, mClass.getName());
                ft.add(R.id.realtabcontent, mFragment, "defaultFragment");
            }
        }
    } 
```

# c# - 验证绑定到同一对象的不同属性的控件会重置对象值

> ID：12893461
> 
> 赞同：3
> 
> 时间：2012-10-15T10:10:41.447
> 
> 标签：c#, winforms, validation, data-binding, .net-4.0

我有一个表单，所有文本框都绑定到实现 INotifyPropertyChanged**的​​同一数据对象的不同属性。**表单自动验证设置为**“禁用”**，因为我想通过调用 form.ValidateChildren() 显式**触发****验证**。

 ******预期：** 调用 ValidateChildren 后，所有编辑的值都应该在我的数据对象中。

**问题：** 只有最后一个获得焦点的控件将其数据写入数据对象，但所有其他控件都会丢失已编辑的值并显示旧值。

**问题：** 如何确保在控件刷新之前验证所有数据？

使用 Autovalidate = EnablePreventFocusChange 或 EnableAllowFocusChange 确实有效，但因为我想一次验证所有内容，这对我来说不是一个可接受的解决方案。

在互联网上搜索解决方案我发现了一个显示相同问题的**[示例，但不幸的是没有解决方案。](http://go4answers.webhost4life.com/Example/issue-datasourceupdatemodeonvalidation-16340.aspx)**

**编辑** 经过进一步调查，我尝试了这个并且它有效：

```
form.BindingContext[dataobject].SuspendBinding();
form.ValidateChildren();
form.BindingContext[dataobject].ResumeBinding(); 
```

暂停绑定是标准方式还是有更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T15:49:18.797

我不确定这是否有帮助，或者它是否会是一个完整的答案，但我遇到了类似的问题，其中只有一个值被保存在整个表单中。这是我在 MS 网站上找到的一些背景说明：

[http://connect.microsoft.com/VisualStudio/feedback/details/351146/binding-writevalue-does-not-update-underlying-data-source](http://connect.microsoft.com/VisualStudio/feedback/details/351146/binding-writevalue-does-not-update-underlying-data-source)

即使 SuspendBinding 对我也不起作用。因此，按照链接和那里的信息，我通过 BindingSource 对象将对象连接起来，并将 RaiseListChangeEvents 属性设置为 False

```
Dim MyBindingSource = New BindingSource With {.DataSource = MyDataSource, .RaiseListChangedEvents = False}
MyControl.DataSource = MyBindingSource 
```

一旦这到位，您可以调用控件上的绑定并手动写入值（假设只有一个绑定），代码将类似于：

```
MyControl.Bindings(0).WriteValue() 
```

让我知道这是否有帮助。****

# javascript - 使用 chrome 22 错误 javascript

> ID：12893462
> 
> 赞同：1
> 
> 时间：2012-10-15T10:10:43.783
> 
> 标签：javascript, google-chrome

自**Chrome 22**升级（9 月 25 日稳定发布）以来，我在我的程序中发现了一个我不明白的新错误。

我的 javascript 程序执行以下操作：

1.  `arraybuffer`使用 asynchrone获取二进制文件（STL 网格）`XMLHttpRequest`。
2.  加载文件时，使用`DataView`和调用读取方法解析它`data.getFloat32(offset, isLittleEndian)`和`data.getUint32(offset, isLittleEndian)`。解析数据存储在用于加载和解析文件的对象数组中。
3.  我实施了一个屏障，以确保在继续之前等待所有文件加载
4.  加载所有文件后，我会遍历每个加载器，并使用解析并存储在数组中的数据在 for 循环中创建对象，如下所示：

    ```
    var geom = new THREE.Geometry();
    for(var v = 0; v < this.result[0].length; v++) {
        geom.vertices.push(new THREE.Vertex(new THREE.Vector3(this.result[0][v][0],
                                                              this.result[0][v][1],
                                                              this.result[0][v][2])));
    }

    for(var f = 0; f < this.result[1].length; f++) {
        geom.faces.push(new THREE.Face3(this.result[1][f][0],
                                        this.result[1][f][1],
                                        this.result[1][f][2]));
    } 
    ```

5.  问题是，在这些循环之后，数组`geom.faces`是`undefined`

我找到了一种纠正这种行为的方法，但我不明白为什么它会改变任何东西：我将数组的长度存储在变量中，如下所示：

```
var geom = new THREE.Geometry();
var vl = this.result[0].length; // <===  | these are the added variables
var fl = this.result[1].length; // <===  | that fix the bug
for(var v = 0; v < vl; v++) {
    geom.vertices.push(new THREE.Vertex(new THREE.Vector3(this.result[0][v][0],
                                                          this.result[0][v][1],
                                                          this.result[0][v][2])));
}

for(var f = 0; f < fl; f++) {
    geom.faces.push(new THREE.Face3(this.result[1][f][0],
                                    this.result[1][f][1],
                                    this.result[1][f][2]));
} 
```

如果有人可以向我解释发生了什么以及为什么我在我的代码的第一个版本中丢失了我的数组，那将非常感激。

# ios - 我是否在动画结束后过早地释放了这个对象？

> ID：12893471
> 
> 赞同：0
> 
> 时间：2012-10-15T10:11:06.510
> 
> 标签：ios, xcode, animation, memory-management

我有一个 UIView，我正在为它制作动画。`theView`这里的问题是，一旦动画出来 ，我就需要释放它。

```
originalRECT = [[UIScreen mainScreen] bounds];

if(theView)
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

    theView setFrame = originalRECT;

    [UIView commitAnimations];
    [theView autorelease];
    theView = nil;
} 
```

所以我知道代码将 theView 设置为 nil，但是动画`does finish ok`（没有 SIGABRT 或类似的东西）
或者是否有一个回调函数可以用来知道视图消失了？在这种情况下如何使用这样的功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:20:23.700

一些事情 -

首先，如果您想确保可以使用：

```
[UIView animateWithDuration:1.0 
                  delay:0.0 
                options:UIViewAnimationCurveEaseInOut 
             animations:^ {
                 //your animation
                  theView setFrame = originalRECT;
             } 
             completion:^(BOOL finished) {
                 //Animation finished you can release
                 [theView release];
 }]; 
```

第二 - 你为什么使用 autoRelease 而不是释放？

```
[theView release]; 
```

第三 - 只为你不知道的 w meeter。**使用 ARC**它会让你的生活更轻松。你可以在这里阅读更多[ARC 教程](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

# silverlight - 依赖属性 Getter 调用

> ID：12893474
> 
> 赞同：0
> 
> 时间：2012-10-15T10:11:37.140
> 
> 标签：silverlight, binding, dependency-properties, bing, getter

我得到了 Silverlight 地图控件，我想访问 BoundingRectangle 属性。但这不是依赖属性。所以我的强项是创建一个附加属性，该属性绑定到我的 ViewModel 中的一个属性。并且每次调用此属性时，DepdendencyProperty Getter 都应返回地图元素的 BoundingRectangle 属性。但遗憾的是，没有调用 Getter...

这是我的代码

```
public class MapHelper
{
    public static readonly DependencyProperty MapViewRectangleProperty =
        DependencyProperty.RegisterAttached(
            "MapViewRectangle",
            typeof(LocationRect),
            typeof(MapHelper),
            new PropertyMetadata(null, new PropertyChangedCallback(MapViewRectanglePropertyChanged))
        );

    private static void MapViewRectanglePropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        string balls = "balls";
    }

    public static void SetMapViewRectangle(object element, LocationRect value)
    {
        string balls = "balls";
    }

    public static LocationRect GetMapViewRectangle(object element)
    {
        if (element is Map)
        {
            return (LocationRect)(((Map)element).TargetBoundingRectangle);
        }
        else
        {
            return null;
        }
    }
} 
```

XAML：

```
<m:Map utils:MapHelper.MapViewRectangle="{Binding Path=BoundingRectangle}" /> 
```

视图模型：

```
public LocationRect BoundingRectangle
    {
        get;
        set;
    } 
```

我希望你能帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:41:03.573

好的，另一次我对自己回答：D

在 ViewModel 中将我的附加属性绑定到我的属性

```
utils:MapHelper.MapViewRectangle="{Binding Path=BoundingRectangle,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
```

创建了一个行为：

```
public class MapBoundingRectangleBehavior : Behavior<Map>
{
    protected override void OnAttached()
    {
        AssociatedObject.TargetViewChanged += new EventHandler<MapEventArgs>(AssociatedObject_TargetViewChanged);
    }

    void AssociatedObject_TargetViewChanged(object sender, MapEventArgs e)
    {
        AssociatedObject.SetValue(MapHelper.MapViewRectangleProperty, AssociatedObject.TargetBoundingRectangle);
    }
} 
```

并将行为添加到地图控件：

```
<i:Interaction.Behaviors>
            <behaviors:MapBoundingRectangleBehavior />
        </i:Interaction.Behaviors> 
```

听起来很简单，但它是唯一能够始终为我提供 BoundingRectangle 的正确数据的解决方案！

我希望我可以帮助遇到同样问题的任何人。

问候乔尼

# java - 带有 Java 的 Selenium WebDriver：无法接受警报

> ID：12893478
> 
> 赞同：3
> 
> 时间：2012-10-15T10:11:54.240
> 
> 标签：java, selenium-webdriver, selenium-ide

在 selenium IDE 中录制时，我可以在弹出窗口中单击“确定”按钮，并希望能够使用单击它

```
driver.findElement(By.linkText("OK")).click(); 
```

但事实并非如此。

同样，这不起作用。

```
driver.switchTo().alert().accept(); 
```

Selenium 引发 NoAlertPresent 异常。如果弹出的不是警报，那是什么？我如何点击是！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:22:21.833

它可以是任何东西。你应该告诉我们。

如果它是一个 Java 脚本警报，那么这应该可以工作

```
driver.switchTo().alert().accept(); 
```

如果网络应用程序自动选择/突出显示“确定”按钮，至少您可以尝试发送输入/返回键击。

```
import org.openqa.selenium.Keys
WebElement.sendKeys(Keys.RETURN); 
```

**更新**

* * *

也可能是因为在您尝试单击/接受时您的警报不存在。要*快速*检查，请先休眠 4-5 秒，然后再尝试`driver.switchTo().alert().accept();`。一旦确定，然后在`try`and`catch`循环中等待警报（任何异常处理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:32:35.260

在这种情况下，我更愿意检查（验证）页面上的警报存在，然后如果存在 - 接受它。它类似于：

```
public boolean isAlertPresent() {

  boolean presentFlag = false;

  try {

   // Check the presence of alert
   Alert alert = driver.switchTo().alert();
   // Alert present; set the flag
   presentFlag = true;
   // if present consume the alert
   alert.accept();

  } catch (NoAlertPresentException ex) {
   // Alert not present
   ex.printStackTrace();
  }

  return presentFlag;

 } 
```

[在这里](http://seleniumwebdriverfaq.blogspot.com/2012/05/how-to-check-presence-of-alert.html)您可以获得详细信息也不要忘记逐步调试。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T10:26:25.290

如果您使用的是最新版本的 webdriver，那么实际上任何高于 2.20 的版本

```
driver.switchTo().alert().accept(); 
```

如果警报是一个类似于我们单击时得到的警报，则应该可以工作

[警报演示](http://www.w3schools.com/js/tryit.asp?filename=tryjs_alert)或[确认弹出演示](http://www.w3schools.com/js/tryit.asp?filename=tryjs_confirm)

**更新**

在这里，此代码将帮助您接受警报

```
driver = new FirefoxDriver();
String baseUrl = "http://www.w3schools.com/js/tryit.asp?filename=tryjs_alert";
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.get(baseUrl);
driver.switchTo().frame(0);
driver.findElement(By.cssSelector("input[type=\"button\"]")).click();
driver.switchTo().alert().accept(); 
```

# c# - 字典性能提升

> ID：12893479
> 
> 赞同：1
> 
> 时间：2012-10-15T10:11:56.280
> 
> 标签：c#, dictionary

我正在尝试改进一些不久前编写的代码。该功能对系统的核心功能非常重要，因此我对大修持谨慎态度。

我正在使用字典来保存对象

```
Dictionary<Node, int> dConnections 
```

该对象`Node`本身就是一个包含许多属性和一些列表的复杂对象。这本词典可以容纳大约 100 个或更多条目。

目前正在检查字典是否包含类似的节点

```
dConnections.ContainsKey(Node) 
```

所以我假设（检查此节点是否在字典中）字典将必须检查整个节点及其属性是否与字典中的节点匹配（它将继续遍历字典直到找到匹配项）这会对性能产生重大影响吗？

我最好不要在字典中使用对象而是使用对象ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:20:40.033

.NET 字典是 Inside 中的哈希表。这意味着如果 Node 不覆盖 GetHashCode 和 Equals 方法，当您调用 ContainsKey 时，它将匹配：

免责声明：这是一个摘要。事情有点复杂。请不要叫我名字，因为我过于简单化了。

1.  Node对象的ref地址的hashcode的一个分区。分区数取决于哈希表的桶数（取决于字典中的键总数）
2.  如果多个节点在同一个存储桶中，则为确切的参考地址。

这个算法非常有效。当您说字典中有 100 个或更多条目时，这不是“很多”。这是几个。

这也意味着 Node 对象的内容与 ContainsKey 的匹配方式无关。它将与完全相同的参考匹配，并且仅与该参考匹配。

如果您自己实现 GetHashCode 和 Equals，请注意，当实例属性更改（不可变）时，这些方法返回值不应更改。否则，您很可能会在错误的存储桶中获取密钥，因此完全无法访问（无需枚举整个字典）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:22:25.633

> 它将继续遍历字典，直到找到匹配项

不，字典不会通过迭代所有节点来找到匹配项；首先获得哈希码，用于将候选者限制为一个，可能是几个（取决于您的哈希方法有多好，以及存储桶大小）

> 所以我假设（检查该节点是否在字典中）字典将必须检查整个节点及其属性是否与字典中的节点匹配

不，对于每个候选人，它首先检查哈希码，这是一种快捷方式，可以快速检测**非**平等与*可能的平等*

所以这里的关键是：你`Node`的散列方法，又名`GetHashCode`. 如果这很复杂，那么另一个技巧是在您第一次需要它时缓存它，即

```
int cachedHashCode;
public override int GetHashCode() {
    if(cachedHashCode == 0) {
       cachedHashCode = /* some complex code here */
       if(cachedHashCode == 0) {
           cachedHashCode = -45; // why not... just something non-zero
       }
    }
    return cachedHashCode;
} 
```

请注意，它*仍然*使用`Equals`，因为最后的“它们是否相同”，所以您显然也希望`Equals`尽可能快 - 但`Equals`相对很少被调用。

# c# - 有没有可能使用循环访问 xml 值的方法？

> ID：12893486
> 
> 赞同：1
> 
> 时间：2012-10-15T10:12:27.923
> 
> 标签：c#, xml, c#-4.0, xml-parsing, xml-serialization

我已将 xml 结构存储到字符串**abcd**中。

```
 string abcd="<xmlstruct>
    <test>
        <name>testname</name>
        <address>testaddress</address>
        <subject>testsub<subject>
    </test>

    <test1>
        <name>testname1</name>
        <address>testaddress1</address>
        <subject>testsub<subject>
    </test1>

    <test2>
        <name>testname2</name>
        <address>testaddress2</address>
        <subject>testsub2<subject>
    </test2>

    <test3>
        <name>testname3</name>
        <address>testaddress3</address>
        <subject>testsub3<subject>
    </test3>

    </xmlstruct>"; 
```

我从字符串中检索了 xml 值，例如，

```
var xElem = XElement.Parse(abcd);
string getname =  xElem.Element("test").Element("name").Value;
string getname1 = xElem.Element("test1").Element("name").Value;
string getname2 = xElem.Element("test2").Element("name").Value;
string getname3 = xElem.Element("test3").Element("name").Value; 
```

它工作正常。我的问题是，**“有没有可能的方法来制作循环并获取测试、test1、test2、test3 值？”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:15:40.057

您的选择`"test0"`有点不规则，但应该这样做：

```
for (int i = 0; i < N; i++)
{
   string suffix = i > 0 ? i.ToString() : "";
   string getname =  xElem.Element("test"+suffix).Element("name").Value;
   ...
} 
```

但是您可能应该研究一个更好的 XML 结构，例如

```
<test id="1">
    <name>testname2</name>
    <address>testaddress2</address>
    <subject>testsub2<subject>
</test> 
```

# c# - 或实体框架中的条件

> ID：12893487
> 
> 赞同：0
> 
> 时间：2012-10-15T10:12:34.080
> 
> 标签：c#, entity-framework

我正在研究实体框架项目，我必须在 dbContext 中应用 Or 条件。我在哪里尝试过，但它给了我错误“运算符 || 不能应用于 lambda 表达式类型的操作数”

```
return dataContext.Friends
              .Where((r => r.ToUserId == touserid && r.FromUserId == fromuserid) 
                  || (r => r.ToUserId == fromuserid&& r.FromUserId == touserid ))
              .ToList(); 
```

我也尝试使用 && 而不是 || 但它给了我同样的 && 错误，我如何为这个 senario 申请或条件？我也试过不带括号

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:15:10.970

你需要这样做：

```
return dataContext.Friends.Where(r => (r.ToUserId == touserid && r.FromUserId == fromuserid) || (r.ToUserId == fromuserid && r.FromUserId == touserid))
                          .ToList(); 
```

唯一的区别是我删除了第二个`r =>`并修复了括号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T10:15:41.457

将其放入一个包含两个单独 lambas`||`而不是lambda 的 lambda：`||`

```
return dataContext.Friends.Where(r => (r.ToUserId == touserid && r.FromUserId == fromuserid) || (r.ToUserId == fromuserid&& r.FromUserId == touserid)).ToList(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T10:19:34.320

@赛义德

```
|| (r => r.ToUserId == fromuserid&& r.FromUserId == touserid )).ToList(); 
```

应该

```
|| (r => r.ToUserId == fromuserid && r.FromUserId == touserid )).ToList(); 
```

注意“fromuserid&&”之间的空格。

# java - JScrollPane 无法正常工作

> ID：12893488
> 
> 赞同：1
> 
> 时间：2012-10-15T10:12:38.477
> 
> 标签：java, swing, jscrollpane

我有一个 GUI，其中左侧包含图像，右侧是包含一些标签对象的面板。我想要它，以便如果右侧面板上的对象多于无法容纳的对象，则会出现一个滚动条。

我遇到的问题是，当将大量对象添加到右侧面板时，整个框架会调整大小。

这是一些屏幕截图。第一个是我希望窗口始终保持的大小，第二个图像显示了调整大小的问题。

![正确尺寸](../Images/9e68ecbeda132d615a4dcf242fc77d99.png) 第二张图片： ![尺寸不正确](../Images/13895f6ec67dbdf626a3e11fdbfc49fb.png)

这是包含图像面板和侧栏面板的面板的代码：

```
/**
 * image panel - displays image and editing area
 */
ImagePanel imagePanel = null;

// Holds the labels
private LabelHolder lHolder = new LabelHolder();

/**
 * handles New Object button action
 */
public void addNewPolygon() {
  imagePanel.addNewPolygon(null);
}

public ContainerPanel(String imageFilename, JFrame frame) {
  //setup main window panel 
  addComponents(imageFilename, frame);
}

public void addComponents(String imageFilename, JFrame frame) {
  setLayout(new FlowLayout());

  // Polygon Title
  JLabel labelPanelTitle = new JLabel("<html><b>Polygons</b></html>");
  labelPanelTitle.setBorder(new EmptyBorder(0, 0, 0, 150));
  Font f = new Font("LabelPanel", Font.PLAIN, 24);     
  labelPanelTitle.setFont(f);
  labelPanelTitle.setAlignmentX(CENTER_ALIGNMENT);

  // Create and set up the image panel.
  try {
    imagePanel = new ImagePanel(imageFilename, frame, this);
  } catch (Exception e1) {
    e1.printStackTrace();
  }
  imagePanel.setOpaque(true); //content panes must be opaque

  JPanel objectsPanel = new JPanel();
  objectsPanel.setLayout(new BoxLayout(objectsPanel, BoxLayout.Y_AXIS));

  JPanel labelHolderContainer = new JPanel();
  labelHolderContainer.setLayout(new BoxLayout(labelHolderContainer, BoxLayout.Y_AXIS));

  labelHolderContainer.add(lHolder);        

  JScrollPane scroller = new JScrollPane(labelHolderContainer); 

  // add the title
  objectsPanel.add(labelPanelTitle);
  // Add a spacer
  objectsPanel.add(Box.createRigidArea(new Dimension(0,25)));
  // Add all the labels
  objectsPanel.add(scroller);

  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
  addNewLabel("Some Object");
//      addNewLabel("Some Object");
//      addNewLabel("Some Object");
//      addNewLabel("Some Object");
//      addNewLabel("Some Object");

  add(imagePanel);
  add(Box.createRigidArea(new Dimension(10,0)));
  add(objectsPanel);

}   

public void addNewLabel(String labelName) {
  lHolder.add(new Label(labelName, imagePanel.getCurrentColour()));
  lHolder.add(Box.createRigidArea(new Dimension(10,10)));

  // set new colour 
  imagePanel.setCurrentColour(imagePanel.getRandomColour());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:31:07.457

*   必须覆盖父级的最大大小`JScrollPane`，或者覆盖`JPanel`（内部`JScrollPane`）helt 图片上显示的任何内容，不知道尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

*   如果您想要自然滚动（没有问题可以`Icons`使用叙述）然后

*   使用[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

*   将[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)与一列一起使用

编辑

`JFrame#pack()`从方法中删除到`add`//`modify`中的`remove`项目`JScrollPane`，否则无法更改`Top-Level Containers`屏幕上的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:07:07.997

您尝试利用[`Scrollable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Scrollable.html)界面。

![测试](../Images/0abc5cf0ab374cc073c0dc432093e313.png)

```
public class TestScroll {

    public static void main(String[] args) {
        new TestScroll();
    }

    public TestScroll() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                ScrollablePane content = new ScrollablePane();
                content.setLayout(new BorderLayout());
                JLabel imageLabel = new JLabel();
                try {
                    imageLabel.setIcon(new ImageIcon(ImageIO.read(new File("/Users/swhitehead/Dropbox/issue169.jpg"))));
                } catch (Exception e) {
                    e.printStackTrace();
                }

                content.add(imageLabel);

                ScrollablePane listPane = new ScrollablePane();
                listPane.setLayout(new GridLayout(0, 1));
                for (int index = 0; index < 100; index++) {
                    listPane.add(new JLabel("This is a simple test - " + index));
                }

                content.add(new JScrollPane(listPane), BorderLayout.EAST);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(content);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ScrollablePane extends JPanel implements Scrollable {

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            return new Dimension(200, 100);
        }

        @Override
        public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 100;
        }

        @Override
        public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 100;
        }

        @Override
        public boolean getScrollableTracksViewportWidth() {
            return true;
        }

        @Override
        public boolean getScrollableTracksViewportHeight() {
            return false;
        }

    }

} 
```

# google-app-engine - 在谷歌应用引擎中上传文件

> ID：12893489
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:12:43.260
> 
> 标签：google-app-engine

我在谷歌应用引擎（python）中工作，

```
How can i upload documents like .jpg , .gif, .bmp , .doc , .docx , .pdf in google app engine ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:38:21.560

您还可以使用 Google Drive 上传文件并通过应用引擎访问 Google Drive 文件。我更喜欢 blobstore 在网络上提供文件。可以使用 get_serving_url 提供图像（高速、低成本）。如果我需要编辑我的文件，我更喜欢谷歌驱动器。

结论：选择 blobstore 或 Google Drive 取决于您的文件类型和您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:30:50.140

您可以将它们放在 blobstore 中：

[https://developers.google.com/appengine/docs/python/blobstore/](https://developers.google.com/appengine/docs/python/blobstore/)

> Blobstore API 允许您的应用程序提供数据对象（称为 blob），其大小远大于数据存储服务中对象所允许的大小。Blob 是通过 HTTP 请求上传文件来创建的。通常，您的应用程序将通过向用户显示带有文件上传字段的表单来完成此操作。提交表单后，Blobstore 会根据文件内容创建一个 blob，并返回对该 blob 的不透明引用，称为 blob 键，您稍后可以使用它来为 blob 提供服务。

# apache - Tomcat URL 前缀

> ID：12893491
> 
> 赞同：0
> 
> 时间：2012-10-15T10:12:48.930
> 
> 标签：apache, tomcat, mod-jk

我得到了以下网址

```
http://SOMEURL/PREFIX/servlet/test.Home 
```

我认为 PREFIX 与`<Context path="/PREFIX">`条目有关。所以如果我不设置路径它会消失但它不是这样的。仍然需要前缀。

因为在我的 html 文档中，我得到了一些 css 文件的路径，这些文件位于 WebContent/css 下的 Base Web Content 目录中。有了这个前缀，它们就不再存在了，因为它试图在 /PREFIX/css.. 中找到它们。

我应该创建一个类似于以 PREFIX 为名称的 WebContent 目录的目录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:59:59.100

如果你希望你的 webapp 被部署，`/PREFIX`那么你应该：

*   把你的`<Context>`元素放在你的 webapp 中`META-INF/context.xml`
*   不使用`prefix`你的属性`<Context>`
*   将您的 WAR 文件命名为 PREFIX.war

如果你希望你的 webapp 被部署在上面`/`（也就是说，没有前缀），那么将你的 WAR 文件命名为`ROOT.war`（大小写很重要：使用大写字母`ROOT`）。

# r - 为 DBSCAN (R) 选择 eps 和 minpts？

> ID：12893492
> 
> 赞同：35
> 
> 时间：2012-10-15T10:12:52.013
> 
> 标签：r, data-mining, cluster-analysis, dbscan

我一直在寻找这个问题的答案很长一段时间，所以我希望有人能帮助我。我正在使用 R 中 fpc 库中的 dbscan。例如，我正在查看 USArrests 数据集并在其上使用 dbscan，如下所示：

```
library(fpc)
ds <- dbscan(USArrests,eps=20) 
```

在这种情况下，选择 eps 只是通过反复试验。但是我想知道是否有可用于自动选择最佳 eps/minpts 的函数或代码。我知道有些书建议制作到最近邻居的第 k 个排序距离的图。即，x 轴表示“根据与第 k 个最近邻的距离排序的点”，y 轴表示“第 k 个最近邻距离”。

这种类型的绘图有助于为 eps 和 minpts 选择合适的值。我希望我已经提供了足够的信息来帮助我。我想张贴我的意思的图片，但是我还是个新手，所以还不能张贴图片。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T10:23:24.407

没有选择 minPts 的通用方法。这取决于*你*想找到什么。较低的 minPts 意味着它将从噪声中构建更多的集群，因此不要选择太小。

对于 epsilon，有多个方面。它再次归结为选择对*这个*数据集和*这个*minPts 和*这个*距离函数和*这个*归一化有效的任何东西。您可以尝试做一个 knn 距离直方图并在那里选择一个“膝盖”，但可能没有可见的一个或多个。

OPTICS 是不需要 epsilon 参数的 DBSCAN 的继承者（除了索引支持的性能原因，请参阅 Wikipedia）。它要好得多，但我认为在 R 中实现起来很痛苦，因为它需要高级数据结构（理想情况下，用于加速的数据索引树和用于优先级队列的*可更新*堆），而 R 完全是关于矩阵运算的。

天真地，可以将 OPTICS 想象为同时处理 Epsilon 的所有值，并将结果放入集群层次结构中。

但是，您需要检查的第一件事 - 几乎独立于您要使用的任何聚类算法 - 是确保您有一个有用的距离函数和适当的数据规范化。如果您的距离退化，则*没有*聚类算法将起作用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-02T09:12:43.887

管理 DBSCAN 的 epsilon 参数的一种常见且流行的方法是计算数据集的 k 距离图。基本上，您计算每个数据点的 k 最近邻 (k-NN)，以了解不同 k 的数据的密度分布。KNN 很方便，因为它是一种非参数方法。一旦您选择了一个 minPTS（很大程度上取决于您的数据），您将 k 固定为该值。然后，您使用与具有低斜率的 k 距离图（对于您的固定 k）区域相对应的 k 距离作为 epsilon。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-01T08:09:58.450

**最小分数**

正如[Anony-Mousse](https://stackoverflow.com/a/12893636/4866415)解释的那样，*“低 minPts 意味着它将从噪声中构建更多集群，因此不要选择太小。”* .

minPts 最好由熟悉数据的领域专家设置。不幸的是，很多情况下我们不知道领域知识，尤其是在数据标准化之后。一种启发式方法是使用**ln(n)**，其中**n**是要聚类的点的总数。

**ε**

有几种方法可以确定它：

1) k-距离图

在minPts = k的聚类中，我们期望核心点和边界点的k-距离在一定范围内，而噪声点可以有更大的k-距离，因此我们可以在k-距离图中观察到一个**拐点**. 但是，有时可能没有明显的膝盖，或者可能有多个膝盖，这很难决定 ![](../Images/7e646ff02e48bfed4e38df18578d8066.png)

2) DBSCAN 扩展，如[OPTICS](https://en.wikipedia.org/wiki/OPTICS_algorithm)

OPTICS 产生层次集群，我们可以通过视觉检查从层次集群中提取重要的平面集群，OPTICS 实现在 Python 模块[pyclustering](https://codedocs.xyz/annoviko/pyclustering/classpyclustering_1_1cluster_1_1optics_1_1optics.html#afd44312d254b38fc1161be290e077eec)中可用。DBSCAN 和 OPTICS 的原作者之一还提出了一种自动提取平面簇的方法，无需人工干预，有关更多信息，您可以阅读[本文](https://pdfs.semanticscholar.org/a426/67d0b7f8ed0a97e6d7e2881c6a35c8b23616.pdf)。

3) 敏感性分析

基本上，我们希望选择一个能够聚集更多真正规则点（与其他点相似的点）的半径，同时检测出更多的噪声（离群点）。我们可以绘制一定**百分比的规则点**（点属于一个簇）VS。**epsilon**分析，我们将不同的 epsilon 值设置为 x 轴，将它们对应的规则点百分比设置为 y 轴，希望我们可以发现一个段，其中规则点值的百分比对 epsilon 值更敏感，并且我们选择上限 epsilon 值作为我们的最佳参数。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-01-09T17:03:07.447

有关选择参数的详细信息，请参阅下面第 4 页的论文。11:

Schubert, E.、Sander, J.、Ester, M.、Kriegel, HP 和 Xu, X.（2017 年）。DBSCAN 重新审视，重新审视：为什么以及如何（仍然）使用 DBSCAN。ACM 数据库系统事务 (TODS)，42(3)，19。

> *   对于二维数据：使用默认值 minPts=4 (Ester et al., 1996)
> *   对于超过 2 个维度：minPts=2*dim (Sander et al., 1998)

一旦您知道要选择哪些 MinPts，您就可以确定 Epsilon：

> *   用 k=minPts 绘制 k 距离 (Ester et al., 1996)
> *   在图中找到“肘部”-> k 距离值是您的 Epsilon 值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-16T14:12:07.767

如果你有资源，你也可以测试一堆`epsilon`和`minPts`值，看看有什么用。我使用`expand.grid`and来做到这一点`mapply`。

```
# Establish search parameters.
k <- c(25, 50, 100, 200, 500, 1000)
eps <- c(0.001, 0.01, 0.02, 0.05, 0.1, 0.2)

# Perform grid search.
grid <- expand.grid(k = k, eps = eps)

results <- mapply(grid$k, grid$eps, FUN = function(k, eps) {
  cluster <- dbscan(data, minPts = k, eps = eps)$cluster
  sum <- table(cluster)
  cat(c("k =", k, "; eps =", eps, ";", sum, "\n"))
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-29T23:35:13.433

请参阅此网页，第 5 节：http: [//www.sthda.com/english/wiki/dbscan-density-based-clustering-for-discovering-clusters-in-large-datasets-with-noise-unsupervised-machine-learning](http://www.sthda.com/english/wiki/dbscan-density-based-clustering-for-discovering-clusters-in-large-datasets-with-noise-unsupervised-machine-learning)

它提供了有关如何查找 epsilon 的详细说明。MinPts ...不是那么多。

# java - 如何从netbeans客户端获取xml请求和xml响应到ws

> ID：12893494
> 
> 赞同：1
> 
> 时间：2012-10-15T10:12:55.603
> 
> 标签：java, web-services, netbeans

我已经为netbeans中的现有服务创建了Web服务客户端，并且ide正确地以oop样式进行了所有操作，但是我需要记录xml请求和来自服务的响应，如何记录这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:57:44.893

为了记录 Web 服务的请求和响应，您需要创建`JAX-WS`实现`SOAPHandler<SOAPMessageContext>`接口的自定义 soap 处理程序。

用消息做任何你喜欢的事情的方法是`handleMessage(SAOPMessageContext messageContext)`。从消息上下文中，您将能够获取 SOAP 消息并将其记录下来。

请参阅我的帖子[如何](https://stackoverflow.com/questions/12388552/how-to-add-soap-header-to-soap-request-using-jaxws/12392641#12392641)实现 SOAP 处理程序接口和覆盖`handleMessage`特定要求的方法。

[这篇文章](https://stackoverflow.com/questions/1945618/tracing-xml-request-responses-with-jax-ws)导致了你想要实现的目标。看看[这篇文章](http://jax-ws.java.net/articles/handlers_introduction.html)。它也可能会有所帮助。如果您无法设置您的处理程序，请返回更具体的问题。

# php - 在 php 中安排电子邮件

> ID：12893499
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:13:12.893
> 
> 标签：php, codeigniter, email, scheduled-tasks

我想安排从 php 脚本发送电子邮件。我希望用户指定日期和时间，然后在指定的日期和时间，我希望自动发送这些电子邮件。我该如何实施？我正在研究codeigniter。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:17:01.833

一种方法是创建一个“scheduled_emails”数据库表。将您想要排队的所有电子邮件放入其中，包括收件人、主题、消息和可选标题等列。

然后，您可以设置一个脚本来查看该表并发送任何“send_time”大于当前时间的电子邮件。然后，您可以设置一个 cron 作业以每隔 5 分钟运行一次此脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:15:43.000

PHP 通常使用外部调度程序来处理这类事情。这意味着 *nix 上的 cron 或 Windows 上的 Windows 任务计划程序。

如果您想通过 Web 界面进行设置，那么您可能会考虑将您的日程安排存储在数据库中，并让 cron (etc) 启动一个脚本，该脚本每 5 分钟查找一次过期电子邮件。

# jquery - jQuery 更改在 IE 上不起作用

> ID：12893500
> 
> 赞同：0
> 
> 时间：2012-10-15T10:13:16.063
> 
> 标签：jquery

```
if (jQuery(select).hasClass('super-attribute-select')) {
   jQuery(select).on('change', function() {
     alert('select babe');
   });
} 
```

在 IE中`onChange`似乎没有触发，该函数`recreate_swatches_recursive(select)`没有被调用。它在 Chrome 和 Firefox 中调用。我尝试了几种解决方案，包括：

1.  改变`on.('change')`>`live('click change')`
2.  改变`on.('change')`>`change(handler)`

是否有任何解决方法可以使此代码在 IE 中工作？我已经做了一些搜索，但仍然卡在这个:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:18:08.643

更改`hasClassName`为`hasClass`它应该可以工作！

```
if (select.hasClass('super-attribute-select')) { 
```

执行永远不会通过初始`if`条件，因此`change`事件不会绑定到选择元素。

# cross-platform - NoClassDefFoundError：无法在 Linux/Mac OS 下运行 Tycho 构建的 Eclipse RCP 应用程序

> ID：12893506
> 
> 赞同：1
> 
> 时间：2012-10-15T10:13:48.927
> 
> 标签：cross-platform, eclipse-rcp, classnotfoundexception, tycho, target-platform

我正在 Win 7（64 位）、Indigo/Java 1.6 中开发跨平台 RCP 应用程序，使用 Tycho 构建产品。

虽然应用程序在 eclipse 中的运行配置中运行良好，并且 Win x_86_64 构建也运行良好，但我在 xubuntu（使用 OpenJDK Java 6 Runtime (1.6.0_24) 和 Mac OS X (1.6.0_35) 时都收到以下错误.

错误（在 Linux 上）如下所示（正在运行`java myprogram`）：

```
Exception in thread "main" java.lang.NoClassDefFoundError: myprogram
Caused by: java.lang.ClassNotFoundException: myprogram
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: myprogram. Program will exit. 
```

我敢肯定我以前遇到过这种情况，我认为这很愚蠢（这在 AFAIK 之前的 Windows 上发生过，并且由于某种原因重新安装 Java 修复了它）。然而，在这种情况下，我认为它必须与构建/目标平台/Tycho 设置有关。

我的父 POM 中负责跨平台构建的部分看起来并不可疑：

```
 <plugin>
      <groupId>org.eclipse.tycho</groupId>
      <artifactId>target-platform-configuration</artifactId>
      <version>${tycho-version}</version>
      <configuration>
        <resolver>p2</resolver>
        <pomDependencies>consider</pomDependencies>
        <!-- configure the p2 target environments for multi-platform build -->
        <environments>

          <environment>
            <os>linux</os>
            <ws>gtk</ws>
            <arch>x86</arch>
          </environment>
          <environment>
            <os>linux</os>
            <ws>gtk</ws>
            <arch>x86_64</arch>
          </environment>
          <environment>
            <os>win32</os>
            <ws>win32</ws>
            <arch>x86</arch>
          </environment>

          <environment>
            <os>win32</os>
            <ws>win32</ws>
            <arch>x86_64</arch>
          </environment>
          <environment>
            <os>macosx</os>
            <ws>cocoa</ws>
            <arch>x86_64</arch>
          </environment>
        </environments>
      </configuration>
    </plugin> 
```

有人知道为什么这可能行不通吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:31:16.160

这不是您运行 Eclipse RCP 应用程序的方式。

您要么需要使用适当的本机启动器启动它，要么使用`java -jar plugins/org.eclipse.equinox.launcher_(yourVersion).jar`（请参阅[此文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/launcher.html)）和可能的其他参数来选择您的[应用程序](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_core_runtime_applications.html)。

此外，您需要确保在您的应用程序中拥有 Equinox 启动所需的包。您可以通过`org.eclipse.rcp`在产品中包含该功能来做到这一点。

# javascript - 文本未显示在 jQuery 图像滑块的第一张幻灯片上

> ID：12893512
> 
> 赞同：1
> 
> 时间：2012-10-15T10:14:11.673
> 
> 标签：javascript, jquery, image, slider

我正在构建一个使用 jQuery 图像滑块的网站。

在 IE7 中，第一张幻灯片的段落文本直到脚本开始更改幻灯片之前才会出现。然后它在所有后续幻灯片上看起来都很好。这让我觉得由于某种原因图像滑块隐藏了这个文本，但我真的很难弄清楚为什么？

这是该网站的链接：[https ://mariaridge.myshopify.com/](https://mariaridge.myshopify.com/)

如果有人有任何想法或想法，他们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:39:56.953

这些问题在 IE7 下很常见。

文本的哪一部分消失了？一切？标题？段落？

尝试使用 css 定位文本和/或容器，例如使用这些 css 属性：

```
zoom: 1;
min-height: 0;
position: relative; 
```

# jquery - 如何在向下滚动页面时加载数据

> ID：12893518
> 
> 赞同：1
> 
> 时间：2012-10-15T10:14:39.163
> 
> 标签：jquery, ajax, scroll, struts2, custom-scrolling

我想显示从数据库中读取的值列表，并将通过 Struts 的显示标签向用户显示，该**值列表应在用户向下滚动页面的同时加载**。

我的问题是：

因为我已经有一个只加载少量数据的操作，所以现在我正在考虑使用`$.ajax()`jQuery 的函数进行加载，但在尝试类似的操作之前，我想知道是否可以选择使用其他 Struts标签什么的。（我使用显示标签只是因为我需要排序。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T13:03:02.837

使用 jQuery Ajax 在滚动上加载数据并不复杂。下面是`scroll`通过调用`$.ajax()`从 Struts 操作加载数据来演示事件的代码，该操作在滚动条缩略图的末尾返回附加内容。归功于文章[Load Data From Server While Scrolling Using jQuery AJAX](http://www.codeproject.com/Articles/239436/Load-Data-From-Server-While-Scrolling-Using-JQuery)的作者。

**`LoadDataAction.java`：**

```
@Action(value="load-on-scroll-example", results = {
  @Result(location = "/LoadData.jsp")
})
public class LoadDataAction extends ActionSupport {
  private static int COUNT = 6;

  private InputStream inputStream;

  //getter here
  public InputStream getInputStream() {
    return inputStream;
  }

  @Action(value="load-data", results = {
    @Result(type="stream", params = {"contentType", "text/html"})
  })
  public String loadData() throws Exception {
    String resp = "";
    Map<String, Object> session = ActionContext.getContext().getSession();
    int counter = session.get("counter")== null?COUNT:(int)session.get("counter");
    for(int i = 0; i <= 10; i++) {
      resp += "<p><span>"  + counter++ +
        "</span> This content is dynamically appended " +
        "to the existing content on scrolling.</p>" ;
    }
    session.put("counter", counter);
    inputStream = new ByteArrayInputStream(resp.getBytes());
    return SUCCESS;
  }
} 
```

**`LoadData.jsp`：**

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ taglib prefix="s" uri="/struts-tags"%>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Demo page: Load data while scrolling using Struts2 and JQuery</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    $contentLoadTriggered = false;
    $("#mainDiv").scroll(function() {
      if($("#mainDiv").scrollTop() >= ($("#wrapperDiv").height() - $("#mainDiv").height()) && $contentLoadTriggered == false) {
        $contentLoadTriggered = true;
        $.ajax({
          url: "<s:url action='load-data'/>",
          success: function (data) {
            $("#wrapperDiv").append(data);
            $contentLoadTriggered = false;
          },
          error:  function (x, e) {
            alert("The call to the server side failed. Error: " + e);
          }
        });
      }
    });
  });

</script>

<style type="text/css">
  body {
    font-family:Arial;
    font-size:.93em;
  }

  #mainDiv {
    background-color:#FAFAFA;
    border:2px solid #888;
    height:200px;
    overflow:scroll;
    padding:4px;
    width:700px;
  }

  #mainDiv p {
    border:1px solid #EEE;
    background-color:#F0F0F0;
    padding:3px;
  }

  #mainDiv p span {
    color:#00F;
    display:block;
    font:bold 21px Arial;
    float:left;
    margin-right:10px;
  }
</style>

</head>
<body>
<form id="form1">
  <div>
    <h1>
      Demo page: Load data while scrolling with Struts2 and JQuery</h1>
    <p></p>
    <p style="margin: 20px 0; background-color: #EFEFEF; border: 1px solid #EEE; padding: 3px;">
      This page is a demo for loading new content from the server and append the data
            to existing content of the page while scrolling.
    </p>
  </div>
  <div id="mainDiv">
    <div id="wrapperDiv">
      <p>
        <span>1</span> Static data initially rendered.
      </p>
      <p>
        <span>2</span> Static data initially rendered.
      </p>
      <p>
        <span>3</span> Static data initially rendered.
      </p>
      <p>
        <span>4</span> Static data initially rendered.
      </p>
      <p>
        <span>5</span> Static data initially rendered.
      </p>
    </div>
  </div>
</form>
</body>
</html> 
```

# wso2carbon - 无法在 linux 框中启动 WSO2 ESB 4.0.3

> ID：12893520
> 
> 赞同：1
> 
> 时间：2012-10-15T10:14:48.613
> 
> 标签：wso2carbon

我已经在本地启动了 wso2 4.0.3 并测试它工作正常。

但是我在linux盒子中安装了相同的版本，服务器没有启动它显示下面的错误。我用这个命令启动：nohup sh wso2server.sh

> 错误 - DatabaseUtil 数据库错误 - 未找到表“UM_DIALECT”；SQL 语句：SELECT COUNT(UM_ID) FROM UM_DIALECT WHERE UM_TENANT_ID=? [42102-140] org.h2.jdbc.JdbcSQLException：找不到表“UM_DIALECT”；SQL 语句：SELECT COUNT(UM_ID) FROM UM_DIALECT WHERE UM_TENANT_ID=? [42102-140]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:32:06.597

如果您使用的是新的二进制包 (zip)，它应该可以正常工作。您是否使用 H2 以外的其他类型的数据库？（H2 是二进制包附带的默认数据库）
如果您再次收到此错误，请使用 -Dsetup 选项启动服务器。

例如：wso2server.sh -Dsetup

谢谢，查马拉席尔瓦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T08:51:25.957

发生这种情况是因为您的 WSO2 ESB 缺少先前数据库中的先前数据。您可以在以下位置找到您的碳数据库

> $wso2dir\repository\database\WSO2CARBON_DB.h2.db

也许有些文件丢失或无法复制到您的 linux 环境（不仅是您的 carbon 数据库，还有其他配置文件）。根据@ChamaraS 的回答，我还建议您使用新的二进制包或使用您的自定义配置创建备份包。

ps：我只是好奇你是否使用 Filezilla 传输这些文件（这里面临同样的问题）

# jax-rs - 如何在 REST(Jersey) 中创建过滤器或处理程序以包装 JAX-RS 请求？

> ID：12893529
> 
> 赞同：2
> 
> 时间：2012-10-15T10:15:19.003
> 
> 标签：jax-rs

我的 jax-rs 应用程序中有一些资源，我想在它进入由 javax.ws.rs.Path 注释的资源之前验证 jax-rs 请求。那么，我如何为我的资源创建处理程序或过滤器。我搜索了这么多网站。他们的建议是使用代理或 servlet 过滤器。如果不使用代理或 servlet 过滤器，我可以创建处理程序/过滤器吗？

就像在 JAX-WS 中 SOAPHandler 可用于肥皂请求一样，同样有任何处理程序用于验证 jax-rs 请求。

这里验证 jax-rs 请求意味着预检查、后检查和异常处理..（我正在使用 jersey jars）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T16:22:50.710

您需要创建一个过滤器来实现 Jersey 提供的 ContainerResponseFilter 或 ContainerRequestFilter。然后在您的 web.xml 中定义它，如下所示：

```
<servlet>
    <servlet-name>MY API</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
        <param-value>com.example.filters.ReqFilter</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
        <param-value>com.example.filters.RespFilter</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>MY API</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

[http://jersey.java.net/nonav/apidocs/1.6/jersey/com/sun/jersey/spi/container/ContainerRequestFilter.html](http://jersey.java.net/nonav/apidocs/1.6/jersey/com/sun/jersey/spi/container/ContainerRequestFilter.html)

[http://jersey.java.net/nonav/apidocs/1.6/jersey/com/sun/jersey/spi/container/ContainerResponseFilter.html](http://jersey.java.net/nonav/apidocs/1.6/jersey/com/sun/jersey/spi/container/ContainerResponseFilter.html)

# php - 在 RTF 中捕获整个标签

> ID：12893536
> 
> 赞同：0
> 
> 时间：2012-10-15T10:15:39.893
> 
> 标签：php, regex

我有一个在 rtf 中处理文档工作流的系统。它适用于标准 Rtf。而且我知道正则表达式能够在 word 2003 中处理它。我希望能够处理 word 2007。

我的标签看起来像这样：[[FooBuzz]]。

许多程序，如写字板，将 [[FooBuzz]] 保留为纯文本。Word 2003 会从标签中分解 [[。Word 2007 更糟糕的是，他在每个大写字母上也爆炸了。所以Foo Buzz。

我的样本数据：

```
{ toto}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]} {toto} 
```

我需要两件事。首先正则表达式匹配 [[FooBuzz]] 的 rtf 表示

例如： {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\ rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]}

其次，我想选择标签的名称。这里是 FooBuzz。我必须使用 php 函数 preg_match_all。

所以这是我的测试数据加倍的测试结果：

```
Array 
```

( [0] => 数组 ( [0] => {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \ af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]} [1] => {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\ fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]}）

```
[1] => Array
    (
        [0] => {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]}
        [1] => {\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 [[}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Foo}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid2708730 Buzz}{\rtlch\fcs1 \af0 \ltrch\fcs0 \insrsid5517131 ]]}
    )

[2] => Array
    (
        [0] => 
        [1] => 
    )

[3] => Array
    (
        [0] => Foo
        [1] => Foo
    ) 
```

)

如您所见，它会根据需要生成选项卡。关键 1 是我稍后会处理的错误。键 2 作为结果，仅当 [[FooBuzz]] 未分解时。键 3，作为使用 word 2003 的结果。

所以 Foo 和 Buzz 可能在不同的数组中，这对我来说已经足够了，只要它是一致的。

例子 ：

```
[3] => Array
    (
        [0] => Foo

    )
 [4] => Array
    (
        [0] => Buzz

    ) 
```

或者

```
[3] => Array
    (
        [0] => FooBuzz

    ) 
```

被接受的答案。

我的正则表达式和他的解释：

我收到了有关 stackoverflow 的帮助来构建它：

```
/(\[\[([^\[\]]*?)\]\]|{[^{]*?\[\[.*?(?<=\[\[).+?\b(?<!\\)(\w+)\b(?=.+?\]\]).*?\]\].*?})/ 
```

以更有意义的方式：

```
/(        Begenning of the OR clause
 \[\[([^\[\]]*?)\]\]   Regex used to catch [FooBuzz] in plain text.
 |   Or statement.
 {[^{]*?\[\[.*?(?<=\[\[).+?  Part able to catch  the Rtf translation of [[
   \b(?<!\\)(\w+)\b     This part have a negative look behind. It match rtf metadata (ex \toto123\. And i selects Foo
 (?=.+?\]\]).*?\]\].*?} Match the RTF translations of ]]
 )/ End of or statement. 
```

注意：有很多非贪婪字符（？），这样正则表达式在需要时只选择标签和他的元数据。（以纯文本替换）。

这是遗留代码，我不能决定放弃纯文本方式。性能无关紧要，它是分批运行的。

您将如何捕捉 FooBuzz ？

测试站点：

[http://www.spaweditor.com/scripts/regex/index.php](http://www.spaweditor.com/scripts/regex/index.php)显示 preg_match_all 的输出。

[http://rubular.com/r/5fm7afU5vG](http://rubular.com/r/5fm7afU5vG) 使用更有趣，您可以编辑永久链接。如您所见，匹配项的显示方式与我的目标函数相同。

简而言之 ：

```
I want to match all the RTF reprsentation of [[FooBuzz]] with match 1.
I want either match x => FooBuzz or match x => Foo match x + 1 => Buzz, if consistent. 
```

您可以随意添加另一个 Or。否则我认为要编辑的部分是： \b(?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:24:09.560

使用正则表达式模式

```
/{[^{]*\[{2}.*?\b(\w+)}.*?(?:\b(\w+)}.*?)?\]{2}[^}]*}/
                   ↑             ↑
                  Foo          Buzz 
```

### PHP代码：

```
$pattern = '/{[^{]*\[{2}.*?\b(\w+)}.*?(?:\b(\w+)}.*?)?\]{2}[^}]*}/';
preg_match($pattern, $subject, $matches); 
```

**[在此处](http://ideone.com/seMya)**测试此代码。

# c# - 从 Windows 窗体应用程序连接到 SQL Server 2008 R2 数据库

> ID：12893540
> 
> 赞同：0
> 
> 时间：2012-10-15T10:15:43.537
> 
> 标签：c#, .net, sql-server-2008-r2

我是 .Net 框架的新手。我需要有一个与我的 Windows 窗体应用程序连接的数据库。我在 SQL Server Management Studio 中创建了一个数据库，应用程序是使用 VS 2010 (C#) 创建的。

我无法找到从应用程序连接数据库的方法（在加载表单时需要连接）。请在路上指导我。mysql jdbc连接器有什么相关的东西吗？

在此先感谢马杜拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:32:40.343

将连接字符串放入 app.config 作为

```
<configuration>
    <configsections>
    </configsections>
    <connectionstrings>
        <add name="connection string">
            connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\App_Data\HREChk.mdf;Integrated Security=True;User Instance=True"
            providerName="System.Data.SqlClient" />
    </add></connectionstrings>
</configuration> 
```

**然后**您可以进行简单的连接，执行选择查询并从阅读器读取数据：

```
using (var conn = new SqlConnection("connection string")) 
using (var cmd = conn.CreateCommand()) 
{ 
    conn.Open(); 
    cmd.CommandText = "SELECT id FROM foo;"; 
    using (var reader = cmd.ExecuteReader()) 
    { 
        while (reader.Read()) 
        { 
            // ... 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:20:03.953

您好以下是 Db 连接的代码

```
 DataSet ds = new DataSet() ;

        SqlConnection Con = new SqlConnection("Data Source=UrDB;Initial Catalog=es_NG;Persist Security Info=True;User ID=sa;Password=;Connection Timeout=600");
       // SqlConnection Con = new SqlConnection("Data Source=.\\SQLEXPRESS;Initial Catalog=Test;User ID=;Password=;Connection Timeout=600");
        Con.Open();
        string SqlQry = "select top 100 first_name,last_name,email_address  from user";
        SqlDataAdapter da = new SqlDataAdapter(SqlQry, Con); 
        DataTable dtTbl = new DataTable();
        da.Fill(dtTbl); 
```

谢谢乌塔姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T10:20:03.357

您可以使用该类连接到数据库`SqlConnection`并执行操作。

您需要传递一个连接字符串，[http://www.connectionstrings.com/](http://www.connectionstrings.com/)为您提供各种数据源的连接字符串的完整列表

好吧，它需要您阅读的内容远不止这些！connection 只会建立连接，不会执行任何操作。所以谷歌和阅读`SqlCommand`，，，`SqlDataAdapter`LINQ，ADO`SqlParameter`等。

# c# - 在哪里放置本地 DLL 以使用 Pocket PC 模拟器？

> ID：12893541
> 
> 赞同：2
> 
> 时间：2012-10-15T10:15:46.330
> 
> 标签：c#, c++, windows-mobile, pinvoke, mobile-emulator

我正在用 C# (Windows Mobile 6.1 - Visual Studio 2008 - Pocket PC) 开发一个 SmartDevice 项目，并且我想使用 PInvoke。我有一个用 C++ 编写的本机 DLL。

当我在我的设备上运行应用程序时，我将本机 DLL 放置在 \Program Files\My Project 目录（在我的设备上）并且它可以工作，但是我需要使用模拟器并且我不知道在哪里放置我的 navive DLL（在我的电脑上）在这种情况下。

我尝试使用相对路径进入工作目录，我尝试 DllImport 绝对路径：

```
[DllImport(@"C:\John\VMDLLDevice.dll", EntryPoint = "Write")]
public static extern bool Write(char[] FileName); 
```

但是当我调用本机 DLL 时，我得到了一个异常，因为模拟器找不到 DLL。

我在哪里放置我的本地 DLL 以使用模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:56:25.793

假设您在同一个 Visual Studio 解决方案中有这两个项目：

1.  `SmartDeviceProject1`：Pocket PC 设备中的应用程序`C#`。
2.  `NativeDLL`: 中的 Win32 SmartDevice DLL `C++`。

现在您可以按照以下步骤操作：

*   在 Visual Studio Device Option 中为这两个项目选择 Pocket PC Emulator。
*   部署项目；现在在`\\Program Files`您的模拟器中，您可以看到两个新目录：`SmartDeviceProject1`和`NativeDLL`（开始 -> 程序 -> 文件资源管理器 -> 程序文件）。

您的 NativeDLL.dll 位于该`NativeDLL`目录中，因此请使用以下 DllImport：

```
[DllImport(@"..\NativeDLL\NativeDLL.dll", EntryPoint = "Write")]
public static extern bool Write(char[] FileName); 
```

现在您可以使用模拟器运行您的应用程序。

MSDN 附加信息： [在智能设备项目中使用仿真器](http://msdn.microsoft.com/en-us/library/aa289160%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:07:03.967

您还应该能够将您的 DLL 添加为对您的项目的引用，然后在该文件的属性中，选择**Copy Local > True**。

![截屏](../Images/212b6497e7d7ab15c32a9c937934612d.png)

# java - 如何使连接等待警报？

> ID：12893548
> 
> 赞同：0
> 
> 时间：2012-10-15T10:16:20.127
> 
> 标签：java, android, android-alertdialog

我制作需要互联网访问的应用程序。我希望它会显示带有两个按钮（“重试”和“退出”）的 AlertDialog。所以，我试试这个：

```
void prepareConnection() {
    if(!checkInternetConnection()) {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setMessage(R.string.internet_not_available);
        alert.setTitle(R.string.app_name);
        alert.setPositiveButton(R.string.retry, new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                prepareConnection();
            }});
        alert.setNegativeButton(R.string.quit, new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                finish();
            }});
        alert.show();
    }
}

boolean checkInternetConnection() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if ((cm.getActiveNetworkInfo() != null) && cm.getActiveNetworkInfo().isAvailable() && cm.getActiveNetworkInfo().isConnected()) {
        return true;
    }
    return false;
} 
```

但是带有 OnClickListener 的 AlertDialog 异步工作并且 prepareConnection() 在 Internet 连接之前不会等待并且用户单击“重试”。我认为我的问题在于代码结构。如何使它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:25:44.030

我用过这样的东西

```
boolean connection = checkNetworkConnection();
    if(!connection){
        createAlertDialog();
    }
    else{
        whenConnectionActive();
    } 
```

和 createAlertDialog() 函数

```
public void createAlertDialog(){    
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.custom_dialog);
    dialog.setTitle("Message");
    Button continueButton = (Button) dialog.findViewById(R.id.dialogContinueButton);
    TextView tw = (TextView) dialog.findViewById(R.id.dialogText);
    Button finishButton = (Button) dialog.findViewById(R.id.dialogFinishButton);

    tw.setText("Message");
    continueButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            dialog.dismiss();
            boolean connection = checkNetworkConnection();
            if(!connection){
                dialog.show();
            }
            else{
               prepareConnection();
            }
        }   
    }); 
```

# c - 对已卸载的文件执行 mmap() 后避免崩溃

> ID：12893555
> 
> 赞同：5
> 
> 时间：2012-10-15T10:16:53.647
> 
> 标签：c, unix, kernel, mmap

我正在对可以卸载的文件执行 mmap()（该文件位于用户可以随时删除的 USB 设备上），如果文件被卸载，我的应用程序崩溃，然后我尝试访问任何元素在缓冲区中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T13:21:56.990

首先，我想说这应该作为一个很好的论据**，不要** `mmap`不必要地用作“优化读取”或类似的东西。除了设备删除之外，其他进程截断文件等问题也可能导致访问错误`SIGBUS`。

如果确实需要使用`mmap`，可以为`SIGBUS`. 它的任务基本上应该是：

1.  设置一个发生的全局（或线程局部，如果您的程序是多线程的）标志`SIGBUS`，以便可以知道错误代码。
2.  调用`mmap`with`MAP_FIXED`以在错误页面之上映射一个新的匿名页面。可以选择用访问地图的代码将其识别为错误的数据填充它；这可能使步骤 1 变得不必要。

另一种方法是`jmp_buf`在访问地图之前设置一个全局（或线程本地），并让信号处理程序简单地调用`longjmp`.

请注意，异步信号`mmap`也不`longjmp`是安全的，但有`SIGBUS`问题的不是异步信号（尽管如果错误访问发生在非异步信号安全的库函数中，则可能应该将其视为异步信号`sscanf`）。只要它是您自己的代码，而不是库函数，访问地图，您应该是安全的。并且`mmap`在大多数/所有现实世界的实现中都是异步信号安全的，因此即使在形式上不正确，您也应该对实践中的第一个解决方案感到满意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:56:36.777

最简单的事情是设置一个信号处理程序，该处理程序将检查对与`mmap`ed 地址对应的内存位置的访问。

您将使用`sigaction`信号处理程序的形式，而不是更简单的`signal`处理程序，因为处理程序在与信号地址对应`sigaction`的参数中接收信息。`struct __siginfo *`可以检查这个是否在`mmap`ed文件的地址范围内。

`mmap`当您不想处理缓冲区读取/写入数据的复杂性时，这很好，但由于出现问题，您只会得到一种形式的错误（信号）。使用`read`/`write`机制，您可以获得`errno`并确定发生了什么。在这种情况下，这在很大程度上是开发人员的选择。

要在接收到信号后跳转到某个位置，那么您需要使用`setjmp`and `longjmp`/ `siglongjmp`- 请参阅[this question中的一些使用](https://stackoverflow.com/questions/1715413/longjmp-from-signal-handler)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T10:25:22.980

不要访问不可用的文件。检查文件是否还在，或者使用无法卸载的文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-15T13:34:40.127

[您可以使用http://linux.die.net/man/7/inotify](http://linux.die.net/man/7/inotify)获得有关文件、目录的任何更改的通知。您可以考虑使用 IN_DELETE。

# c# - 使用 LINQ 或类似方法从 Xtragrid 获取单元格数据

> ID：12893562
> 
> 赞同：0
> 
> 时间：2012-10-15T10:17:25.450
> 
> 标签：c#, devexpress

我在我的一种形式中使用 Xtragrid，我想从它的一个单元格中读取数据。通常你 `gridView_Test_Values.GetRowCellValue([rowhandle][columnname]` 用来获取数据。如果你知道行句柄，那效果很好。我想要实现的是，我会喜欢根据另一个单元格a的值从我的单元格中获取数据，这当然是在另一列中，并且该行的行句柄是可变的。任何想法如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:03:21.917

可以这样试试

```
private [YourObjectInGrid] GetSelected() {
    var selectedRows = view.GetSelectedRows();
    if (selectedRows != null && selectedRows.Length > 0) {
        var o = view.GetRow(selectedRows[0]);
        if (o != null) {
          return o as [YourObjectInGrid];
        }
    }
} 
```

您可以在数据模型中创建 [NonPersistent] 计算字段，并在网格中使用它。

```
 [NonPersistent]
  public string Name {
   get {
    try {
       return (FirstName + " " + LastName).Trim();
    }
    catch { }
    return String.Empty;
   }
  } 
```

# java - 使用 Ajax 将 @RequestBody 中的多个变量传递给 Spring MVC 控制器

> ID：12893566
> 
> 赞同：135
> 
> 时间：2012-10-15T10:17:44.657
> 
> 标签：java, spring, http, spring-mvc

是否有必要包装在一个支持对象中？我想做这个：

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
@ResponseBody
public boolean getTest(@RequestBody String str1, @RequestBody String str2) {} 
```

并使用这样的 JSON：

```
{
    "str1": "test one",
    "str2": "two test"
} 
```

但相反，我必须使用：

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
@ResponseBody
public boolean getTest(@RequestBody Holder holder) {} 
```

然后使用这个 JSON：

```
{
    "holder": {
        "str1": "test one",
        "str2": "two test"
    }
} 
```

那是对的吗？我的另一个选择是更改`RequestMethod`to`GET`并`@RequestParam`在查询字符串中使用或`@PathVariable`与其中任何一个一起使用`RequestMethod`。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-11-17T05:17:39.270

虽然确实`@RequestBody`必须映射到单个对象，但该对象可以是 a `Map`，因此这为您提供了一种尝试实现目标的好方法（无需编写一次性支持对象）：

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
@ResponseBody
public boolean getTest(@RequestBody Map<String, String> json) {
   //json.get("str1") == "test one"
} 
```

如果你想要一个完整的 JSON 树，你也可以绑定到 Jackson 的[ObjectNode ：](http://fasterxml.github.io/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/node/ObjectNode.html)

```
public boolean getTest(@RequestBody ObjectNode json) {
   //json.get("str1").asText() == "test one" 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2012-10-15T14:19:32.510

你是对的，@RequestBody 注释参数应该包含请求的整个主体并绑定到一个对象，所以你基本上必须选择你的选项。

如果您绝对想要您的方法，则可以使用自定义实现：

说这是你的 json：

```
{
    "str1": "test one",
    "str2": "two test"
} 
```

并且您想将其绑定到此处的两个参数：

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
public boolean getTest(String str1, String str2) 
```

首先定义一个自定义注释，例如`@JsonArg`，使用 JSON 路径，如您想要的信息的路径：

```
public boolean getTest(@JsonArg("/str1") String str1, @JsonArg("/str2") String str2) 
```

现在编写一个自定义[HandlerMethodArgumentResolver](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/method/support/HandlerMethodArgumentResolver.html)，它使用上面定义的[JsonPath](http://code.google.com/p/json-path/)来解析实际参数：

```
import java.io.IOException;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.io.IOUtils;
import org.springframework.core.MethodParameter;
import org.springframework.http.server.ServletServerHttpRequest;
import org.springframework.web.bind.support.WebDataBinderFactory;
import org.springframework.web.context.request.NativeWebRequest;
import org.springframework.web.method.support.HandlerMethodArgumentResolver;
import org.springframework.web.method.support.ModelAndViewContainer;

import com.jayway.jsonpath.JsonPath;

public class JsonPathArgumentResolver implements HandlerMethodArgumentResolver{

    private static final String JSONBODYATTRIBUTE = "JSON_REQUEST_BODY";
    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.hasParameterAnnotation(JsonArg.class);
    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {
        String body = getRequestBody(webRequest);
        String val = JsonPath.read(body, parameter.getMethodAnnotation(JsonArg.class).value());
        return val;
    }

    private String getRequestBody(NativeWebRequest webRequest){
        HttpServletRequest servletRequest = webRequest.getNativeRequest(HttpServletRequest.class);
        String jsonBody = (String) servletRequest.getAttribute(JSONBODYATTRIBUTE);
        if (jsonBody==null){
            try {
                String body = IOUtils.toString(servletRequest.getInputStream());
                servletRequest.setAttribute(JSONBODYATTRIBUTE, body);
                return body;
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
        return "";

    }
} 
```

现在只需使用 Spring MVC 注册它。有点涉及，但这应该可以干净地工作。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-03-10T05:59:06.910

用于传递多个对象、参数、变量等。您可以使用 jackson 库中的 ObjectNode 作为参数动态地执行此操作。你可以这样做：

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
@ResponseBody
public boolean getTest(@RequestBody ObjectNode objectNode) {
   // And then you can call parameters from objectNode
   String strOne = objectNode.get("str1").asText();
   String strTwo = objectNode.get("str2").asText();

   // When you using ObjectNode, you can pas other data such as:
   // instance object, array list, nested object, etc.
} 
```

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-05-09T18:30:53.283

您可以通过使用 body 和 path 变量来混合 post 参数以获得更简单的数据类型：

```
@RequestMapping(value = "new-trade/portfolio/{portfolioId}", method = RequestMethod.POST)
    public ResponseEntity<List<String>> newTrade(@RequestBody Trade trade, @PathVariable long portfolioId) {
...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T10:44:53.487

`@RequestParam`是客户端发送的`HTTP GET`or`POST`参数，请求映射是一段 URL，它是可变的：

```
http:/host/form_edit?param1=val1&param2=val2 
```

`var1`&`var2`是请求参数。

```
http:/host/form/{params} 
```

`{params}`是一个请求映射。您可以将您的服务称为 :`http:/host/form/user`或`http:/host/form/firm` 将公司和用户用作`Pathvariable`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-07T08:54:33.650

简单的解决方案是创建一个具有 str1 和 str2 作为属性的有效负载类：

```
@Getter
@Setter
public class ObjHolder{

String str1;
String str2;

} 
```

在你可以通过之后

```
@RequestMapping(value = "/Test", method = RequestMethod.POST)
@ResponseBody
public boolean getTest(@RequestBody ObjHolder Str) {} 
```

您的请求正文是：

```
{
    "str1": "test one",
    "str2": "two test"
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-15T12:15:44.823

您可以做简单的事情，而不是使用 json。

```
$.post("${pageContext.servletContext.contextPath}/Test",
                {
                "str1": "test one",
                "str2": "two test",

                        <other form data>
                },
                function(j)
                {
                        <j is the string you will return from the controller function.>
                }); 
```

现在在控制器中，您需要映射 ajax 请求，如下所示：

```
 @RequestMapping(value="/Test", method=RequestMethod.POST)
    @ResponseBody
    public String calculateTestData(@RequestParam("str1") String str1, @RequestParam("str2") String str2, HttpServletRequest request, HttpServletResponse response){
            <perform the task here and return the String result.>

            return "xyz";
} 
```

希望这对您有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-02T22:58:56.113

我已经改编了Biju的解决方案：

```
import java.io.IOException;

import javax.servlet.http.HttpServletRequest;

import org.apache.commons.io.IOUtils;
import org.springframework.core.MethodParameter;
import org.springframework.web.bind.support.WebDataBinderFactory;
import org.springframework.web.context.request.NativeWebRequest;
import org.springframework.web.method.support.HandlerMethodArgumentResolver;
import org.springframework.web.method.support.ModelAndViewContainer;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JsonPathArgumentResolver implements HandlerMethodArgumentResolver{

    private static final String JSONBODYATTRIBUTE = "JSON_REQUEST_BODY";

    private ObjectMapper om = new ObjectMapper();

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.hasParameterAnnotation(JsonArg.class);
    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {
        String jsonBody = getRequestBody(webRequest);

        JsonNode rootNode = om.readTree(jsonBody);
        JsonNode node = rootNode.path(parameter.getParameterName());    

        return om.readValue(node.toString(), parameter.getParameterType());
    }

    private String getRequestBody(NativeWebRequest webRequest){
        HttpServletRequest servletRequest = webRequest.getNativeRequest(HttpServletRequest.class);

        String jsonBody = (String) webRequest.getAttribute(JSONBODYATTRIBUTE, NativeWebRequest.SCOPE_REQUEST);
        if (jsonBody==null){
            try {
                jsonBody = IOUtils.toString(servletRequest.getInputStream());
                webRequest.setAttribute(JSONBODYATTRIBUTE, jsonBody, NativeWebRequest.SCOPE_REQUEST);
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
        return jsonBody;

    }

} 
```

有什么不同：

*   我正在使用杰克逊来转换 json
*   我不需要注解中的值，你可以从 MethodParameter 中读取参数的名称
*   我还从 Methodparameter => 中读取了参数的类型，因此解决方案应该是通用的（我使用字符串和 DTO 对其进行了测试）

BR

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-22T15:56:55.873

您还可以使用 MultiValue Map 来保存 requestBody。这里是它的示例。

```
 foosId -> pathVariable
    user -> extracted from the Map of request Body 
```

与使用 Map 保存请求正文时的 @RequestBody 注释不同，我们需要使用 @RequestParam 进行注释

并在 Json RequestBody 中发送用户

```
 @RequestMapping(value = "v1/test/foos/{foosId}", method = RequestMethod.POST, headers = "Accept=application"
            + "/json",
            consumes = MediaType.APPLICATION_JSON_UTF8_VALUE ,
            produces = MediaType.APPLICATION_JSON_UTF8_VALUE)
    @ResponseBody
    public String postFoos(@PathVariable final Map<String, String> pathParam,
            @RequestParam final MultiValueMap<String, String> requestBody) {
        return "Post some Foos " + pathParam.get("foosId") + " " + requestBody.get("user");
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-06-16T18:14:58.050

GET 和 POST 都存在请求参数，对于 Get，它将作为查询字符串附加到 URL，但对于 POST，它位于请求正文中

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-22T20:53:41.253

不知道你在哪里添加 json 但如果我用 angular 这样做，它可以在没有 requestBody 的情况下工作： angluar：

```
 const params: HttpParams = new HttpParams().set('str1','val1').set('str2', ;val2;);
    return this.http.post<any>( this.urlMatch,  params , { observe: 'response' } ); 
```

爪哇：

```
@PostMapping(URL_MATCH)
public ResponseEntity<Void> match(Long str1, Long str2) {
  log.debug("found: {} and {}", str1, str2);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-20T19:41:12.947

好的。我建议创建一个包含您需要的字段的值对象 (Vo)。代码更简单，我们不改变杰克逊的功能，更容易理解。问候！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-26T18:39:21.247

您可以使用`@RequestParam`. 为此，您应该执行以下操作：

1.  声明代表您的对象的 RequestParams 参数，`required`如果您希望能够发送空值，请将选项设置为 false。
2.  在前端，对要发送的对象进行字符串化，并将它们作为请求参数包含在内。
3.  在后端，使用 Jackson ObjectMapper 或类似的东西将 JSON 字符串转换回它们表示的对象，瞧！

我知道，它有点破解，但它的工作原理！;)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-24T03:22:18.993

也可以user `@RequestBody Map<String, String> params`，然后`params.get("key")`用来获取参数的值

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-23T20:28:32.697

使用内部类

```
@RestController
public class MyController {

    @PutMapping("/do-thing")
    public void updateFindings(@RequestBody Bodies.DoThing body) {
        ...
    }

    private static class Bodies {
        public static class DoThing {
            public String name;
            public List<String> listOfThings;
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-30T14:05:45.180

如果有人对 webflux 解决方案感兴趣，下面是基于 Biju 回答的响应式版本。

请注意，有一个非常小但同步的块，需要保护身体不被多次消耗。如果你更喜欢完全非阻塞的版本，我建议在同一个调度器上发布获取 json 的通量，以使检查和读取顺序。

```
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.core.MethodParameter;
import org.springframework.core.io.buffer.DataBuffer;
import org.springframework.core.io.buffer.DataBufferUtils;
import org.springframework.web.reactive.BindingContext;
import org.springframework.web.reactive.result.method.HandlerMethodArgumentResolver;
import org.springframework.web.server.ServerWebExchange;
import reactor.core.publisher.Mono;

import java.nio.charset.StandardCharsets;

@Slf4j
@RequiredArgsConstructor
public class JsonArgumentResolver implements HandlerMethodArgumentResolver {
    private static final String ATTRIBUTE_KEY = "BODY_TOSTRING_RESOLVER";
    private final ObjectMapper objectMapper;

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        return parameter.hasParameterAnnotation(JsonArgument.class);
    }

    @Override
    public Mono<Object> resolveArgument(MethodParameter parameter, BindingContext bindingContext,
                                        ServerWebExchange exchange) {
        String fieldName = parameter.getParameterName();
        Class<?> clz = parameter.getParameterType();

        return getRequestBody(exchange).map(body -> {
            try {
                JsonNode jsonNode = objectMapper.readTree(body).get(fieldName);
                String s = jsonNode.toString();
                return objectMapper.readValue(s, clz);
            } catch (JsonProcessingException e) {
                log.error(e.getMessage(), e);
                throw new RuntimeException(e);
            }
        });
    }

    private Mono<String> getRequestBody(ServerWebExchange exchange) {
        Mono<String> bodyReceiver;
        synchronized (exchange) {
            bodyReceiver = exchange.getAttribute(ATTRIBUTE_KEY);
            if (bodyReceiver == null) {
                bodyReceiver = exchange.getRequest().getBody()
                        .map(this::convertToString)
                        .single()
                        .cache();
                exchange.getAttributes().put(ATTRIBUTE_KEY, bodyReceiver);
            }
        }
        return bodyReceiver;
    }

    private String convertToString(DataBuffer dataBuffer) {
        byte[] bytes = new byte[dataBuffer.readableByteCount()];
        dataBuffer.read(bytes);
        DataBufferUtils.release(dataBuffer);
        return new String(bytes, StandardCharsets.UTF_8);
    }
}
```

# asp.net - 如何在我的网站中显示网站部分

> ID：12893572
> 
> 赞同：2
> 
> 时间：2012-10-15T10:18:24.790
> 
> 标签：asp.net, html, vb.net

我正在尝试在我的网页上显示糖费率，但我无法这样做。实际上有一个网站显示糖费率，我想在我的 asp.net 网页上阅读费率。下面是网络网站链接

[http://www.sugaronline.com/](http://www.sugaronline.com/)

我想在我的网络上显示这部分

![在此处输入图像描述](../Images/c162023816aff55bfcd6dd81e12546b4.png)

请任何人帮助我在 asp.net 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:14:34.720

你可以试试这个方法。

```
<html>
 <head>
<title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

  <style type="text/css">
  #container{
width:100px;
height:400px;
border:1px solid #000; 
overflow:hidden;
margin:auto;
}
#container iframe {
width:200px;
height:750px;
margin-left:-100px;
margin-top:-350px;   
border:0 solid;
}

</style>

</head>
<body>

<div id="container">
<iframe src="http://www.w3schools.com/css/default.asp" scrolling="no"></iframe>
</div>

</body>
</html> 
```

参考这个[链接](http://www.webdeveloper.com/forum/showthread.php?108520-Show-part-of-webpage-in-iframe)

# c - 在带有 NDK 的 android 上使用 libvlc

> ID：12893578
> 
> 赞同：4
> 
> 时间：2012-10-15T10:18:38.270
> 
> 标签：c, sockets, android-ndk, libvlc

我目前正在使用 NDK 在 android 上使用 libvlc。好吧，我了解如何在 Android 应用程序中使用本机 C 代码。现在我想使用 libvlc 库来制作一个简单的播放器，它可以从套接字读取数据。

是否可以在该级别使用 libvlc？我看到的问题是为 libvlc 设置窗口处理程序以在其上绘制图像。

有没有人有这方面的经验可以给我一些反馈？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:28:17.437

您可能对此感兴趣 - [https://bitbucket.org/tewilove/nyan.tv-jni/src](https://bitbucket.org/tewilove/nyan.tv-jni/src)

编辑：看起来 nyan.tv 链接不再存在。一个可能更“官方”的样本在这里-> [https://bitbucket.org/edwardcw/libvlc-android-sample](https://bitbucket.org/edwardcw/libvlc-android-sample)

# android - 两个地图视图应该在一个 MapActivity 的一个片段中显示在另一个之后

> ID：12893579
> 
> 赞同：0
> 
> 时间：2012-10-15T10:18:44.820
> 
> 标签：android, google-maps-api-3, android-fragments

我的 android 平板电脑应用程序中有两个窗格（左侧列表和右侧详细信息）（就像设置本机平板电脑应用程序视图一样）。我已将 MapActivity 扩展到我的 MainActivity。我在左侧有一个位置详细信息列表。我想在我的右窗格中显示每个列表项的 MapView，这是一个片段。

问题是当我尝试打开 Map View 时，第一个项目是打开 mapView。从第二项开始，它显示您只能为一个 MapActivity 打开一个 MapView。请提出正确答案。我已经尝试了所有相关的帖子，但没有成功。

我的代码版本：android 4.0

请检查以下代码：

```
 MainActivity extends MapActivity {
    onCreate(){
                    LocationFragment loc_fragment=new LocationFragment();
                    FragmentTransaction xaction=VenueFragment.venueFrgMgr.beginTransaction();
                    Bundle sendData=new Bundle();
                    sendData.putString("LAT", s.getLat());
                    sendData.putString("LON", s.getLong());
                    sendData.putString("NAME", s.getName());
                    sendData.putString("ADD", s.getAddress());
                    loc_fragment.setArguments(sendData);
                    xaction.add(R.id.second_pane, loc_fragment,"location");
                    xaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);

                    xaction.addToBackStack(null);
                    xaction.commit();

   }
 @Override
protected boolean isRouteDisplayed() {

    return false;
} 
```

}

显示 MapView 的 LocationFragment 代码如下：

```
 private ViewGroup mapContainer;
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            super.onCreateView(inflater, container, savedInstanceState);
            //view.refreshDrawableState();

            view = inflater.inflate(R.layout.location, container, false);
            mapContainer=new LinearLayout(getActivity());
            mapContainer.addView(view);
            v = view.findViewById(R.id.loading);
            v.setVisibility(View.VISIBLE);

    /*      lonstr=LocationActivity.lonstr;
            latstr=LocationActivity.latstr;
            name=LocationActivity.name;
            address=LocationActivity.address;
    */      
            ((Button) view.findViewById(R.id.back))
                    .setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            //getActivity().finish();
                            if(mapView != null) {
                                mapView.removeAllViewsInLayout();

                                if(mapContainer!=null)
                                    mapContainer.removeView(mapView);

                                RelativeLayout parentView = (RelativeLayout) mapView.getParent();
                                //mapView.removeAllViews();
                                ((MapView)view.findViewById(R.id.mapview)).removeAllViews();
                                parentView.removeAllViews();
                                if(parentView!=null)
                                    parentView.recomputeViewAttributes(mapView);
                                getFragmentManager().findFragmentByTag("location").getView().destroyDrawingCache();
                            }

                            getFragmentManager().popBackStack();
                        //  getFragmentManager().popBackStackImmediate();
                        }
                    });
            mapView = (MapView) view.findViewById(R.id.mapview);

            mapView.setBuiltInZoomControls(true);
            mc = mapView.getController();

            Bundle b = this.getArguments();
            if (b != null) {
                latstr = b.getString("LAT");
                lonstr = b.getString("LON");
                name = b.getString("NAME");
                address = b.getString("ADD");
            }

            String coordinates[] = { latstr, lonstr };
            try {
                lat = Double.parseDouble(coordinates[0]);
                lng = Double.parseDouble(coordinates[1]);
            } catch (Exception e) {
                // TODO: handle exception
            }
            p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
            mc.animateTo(p);
            Drawable icon = getResources().getDrawable(R.drawable.red_pin);
            icon.setBounds(0, 0, icon.getIntrinsicWidth(),
                    icon.getIntrinsicHeight());
            MyItemizedOverlay overlay = new MyItemizedOverlay(icon);
            OverlayItem item = new OverlayItem(p, "", null);
            overlay.addItem(item);
            overlay.populateNow();
            mapView.getOverlays().add(overlay);
            mapView.postInvalidate();
            mc.setZoom(12);
            if (name != null)
                ((TextView) view.findViewById(R.id.event_name)).setText(name);
            if (address != null)
                ((TextView) view.findViewById(R.id.event_date)).setText(address);
            getWheather();

            return mapContainer;
        } 
```

我得到的错误如下：

```
10-15 10:43:03.881: E/AndroidRuntime(3778): android.view.InflateException: Binary XML file line #184: Error inflating class <unknown>
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at webspiders.event2mobile.asme.LocationFragment.onCreateView(LocationFragment.java:128)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:828)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.BackStackRecord.run(BackStackRecord.java:622)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.os.Handler.handleCallback(Handler.java:605)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.os.Looper.loop(Looper.java:137)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.app.ActivityThread.main(ActivityThread.java:4507)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at java.lang.reflect.Method.invokeNative(Native Method)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at java.lang.reflect.Method.invoke(Method.java:511)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at dalvik.system.NativeStart.main(Native Method)
10-15 10:43:03.881: E/AndroidRuntime(3778): Caused by: java.lang.reflect.InvocationTargetException
10-15 10:43:03.881: E/AndroidRuntime(3778):     at java.lang.reflect.Constructor.constructNative(Native Method)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
10-15 10:43:03.881: E/AndroidRuntime(3778):     ... 19 more
10-15 10:43:03.881: E/AndroidRuntime(3778): Caused by: java.lang.IllegalStateException: You are only allowed to have a single MapView in a MapActivity
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.google.android.maps.MapActivity.setupMapView(MapActivity.java:397)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.google.android.maps.MapView.<init>(MapView.java:289)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.google.android.maps.MapView.<init>(MapView.java:264)
10-15 10:43:03.881: E/AndroidRuntime(3778):     at com.google.android.maps.MapView.<init>(MapView.java:247) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:02:24.930

我猜您的 MainActivity 中有一个列表视图和一个包含您的地图视图的容器。

当在 listivew 中选择项目时，您想在地图上做一些事情。

如果是这样，那么您只需要一个包含您的地图的片段，然后每次从您的列表中选择一个新项目时，您需要通知您的片段有新数据可用，并且它应该自行刷新。

如果您知道如何创建一个，您可以通过自定义界面来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:51:05.670

```
I resolved the problem like this, by creating map object in Activity class and using it in Fragments. Here the code goes  

In ACTIVITY 

    HomeActivity extends MapActivity {
            View mMapViewContainer;
            MapView mMapView;

        onCreate(){
    ------------
    -------------
          mMapViewContainer = (ViewGroup)LayoutInflater.from(this).inflate(R.layout.location, null);
          mMapView = (MapView) mMapViewContainer.findViewById(R.id.mapview);

    -------------
    ---------------
       }
     @Override
    protected boolean isRouteDisplayed() {

        return false;
    }

    In Fragment:

            HomeActivity parentActivity = (HomeActivity) getActivity();
            if (parentActivity != null) {
                parentActivity.mMapViewContainer.refreshDrawableState();
                mMapViewContainer = parentActivity.mMapViewContainer;
                mMapView = parentActivity.mMapView;

                mMapView.getOverlays().clear();
                mMapView.invalidate();

            } 
```

# javascript - 在第 5 行后删除 textarea 中的字符

> ID：12893581
> 
> 赞同：1
> 
> 时间：2012-10-15T10:18:51.693
> 
> 标签：javascript, jquery, html, textarea

我需要删除 textarea 中第 5 行之后的每个字符的功能，并且第 5 行最多只能包含 15 个字符。

我可以使用“插入符号”来实现这一点，但它只会在特定光标位置添加文本，我使用kepress事件和setinterval（textarea的onFocus）函数将清除textarea中的额外文本和clearInterval（textarea的onBlur）

```
function insertTextAtCaret(el, text) 
{
    var val = el.value, endIndex, range;
    if (typeof el.selectionStart != "undefined" && typeof el.selectionEnd != "undefined") {
        endIndex = el.selectionEnd;
        el.value = val.slice(0, endIndex) + text + val.slice(endIndex);
        el.selectionStart = el.selectionEnd = endIndex + text.length;
    } else if (typeof document.selection != "undefined" && typeof document.selection.createRange != "undefined") {
        el.focus();
        range = document.selection.createRange();
        range.collapse(false);
        range.text = text;
        range.select();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:31:46.223

```
function charCountTextarea(textAreaId,e,limit,lineLen)
{   

    var code = e.charCode || e.keyCode;

    newLines = $("#"+textAreaId).val().split("\n").length;
    var t = $("#"+textAreaId)[0];
    var lineIndex = t.value.substr(0, t.selectionStart).split("\n").length-1;
    console.log('val t :'+$("#"+textAreaId).val()+' line index : '+lineIndex+' new lines '+newLines);

    if(lineIndex == 10 && $("#"+textAreaId).val().split("\n")[lineIndex].length>(lineLen+1) && code!=8 && code!=46 && code!=33 && code!=34 && code!=35 && code!=36 && code!=37 && code!=38 && code!=39 && code!=40)
    {
        $("#"+textAreaId).val(($("#"+textAreaId).val()).substring(0, $("#"+textAreaId).val().length - 1));
        alert('You are reached to limit');
        return false;
    }

    if(lineIndex<5)
    {
        $("#"+textAreaId).val($("#"+textAreaId).val().wordWrap(lineLen, "\n", 0));
    }
    var countLine1 = $("#"+textAreaId).val().split("\n")[0].length;

    if($("#"+textAreaId).val().split("\n")[lineIndex].length>lineLen)  // which will count the total line char condition
    {
        console.log("In condition : ");
        if(code!=8 && code!=46 && code!=33 && code!=34 && code!=35 && code!=36 && code!=37 && code!=38 && code!=39 && code!=40)
        {
            // to insert next line              
            insertTextAtCaret(document.getElementById(textAreaId), "\n");
        }
    }
} 
```

# php - 使用 ajax 分页进行无限滚动（经过一些滚动显示分页后）

> ID：12893584
> 
> 赞同：-3
> 
> 时间：2012-10-15T10:19:30.400
> 
> 标签：php, jquery

无限滚动应在 10 行记录后停止。如果记录较多，应该显示ajax分页。例如，考虑[这个无限滚动的例子](http://www.jquery4u.com/demos/infinite-scrolling-demo5/)。
因此，在 20 条记录之后，我想显示分页，并且应该在下一页上进行相同的操作。如果您有任何想法或解决方案，请告诉我。

这是我正在处理的代码：

```
 //On doMouseWheel = 1 I have taken the currentdealoffset value and check it with the total no of deals present
    //If count is less, then simply calculating the window position displaying the allotted records say 10
    //On next scroll just doing the same process and fetching records using ajax until end of the deals
    //Now the problem is I am not able to code a logic where after say 10 records show a pagination and 
    //When click on next page the same process should be managed by fetching the offset count of scrol and offset of pagination bar

    doMouseWheel = 1 ;   

            $(window).scroll(function() { 
            if($('#facebox_overlay').is(':visible')==false){                
            $('#endofdeals').show();
            $('#endofdeals').html("<center><img src='"+SITEIMG +"ajax-loader_1.gif' ><center>");
            //console.log("Window Scroll ----");
            var currentdealoffset = 0; //alert(currentdealoffset);
            var currentdealoffset = parseInt(document.getElementById("countval").value); //alert(currentdealoffset);
            var displaymode = parseInt($('#displaymode').val()); 
            var totalcountdeal = parseInt($('#totaldeals').val()); //alert(totalcountdeal);
            if(currentdealoffset<totalcountdeal){
            if (!doMouseWheel)  {
            return ;
            } ;

            var distanceTop = $('#last').offset().top - $(window).height();        
                    if  ($(window).scrollTop() > distanceTop){
            //console.log("Window distanceTop to scrollTop Start");
            doMouseWheel = 0 ; 
                    $('div#loadMoreComments').show(5000);
                    //console.log("Another window to the end !!!! "+$(".postedComment:last").attr('id'));        

                    $.ajax({
                    type : 'POST',
                    dataType : "html",
                    data: {
                    typeday : $('#remdumtype').val(),                        
                    catid : $('#catid').val(),                        
                    },
                    url: "<?php echo https_url($this->config->item('base_url'))?>popup/dealsearch",
                    success: function(html) {
                    doMouseWheel = 1; 
                    if(html){
                    if(displaymode==12)
                    $('#listTable tr:last').after(html);
                    else
                    $("#postedComments").append(html);
                    //console.log("Append html--------- " +$(".postedComment:first").attr('id'));
                    //console.log("Append html--------- " +$(".postedComment:last").attr('id'));
                    $("#last").remove();
                    $("#postedComments").append( "<p id='last'></p>" );
                    $('div#loadMoreComments').hide();
                    $('#endofdeals').hide();
                    }
                    }
                    });
                    }
            }
            else
                    {
                            if($('#endofdeals')!='')
                            {
                            $('#endofdeals').hide(); 
                            if(currentdealoffset < displaymode)
                                    {
                                            $('#endofdeals').hide();
                                    }else if(currentdealoffset > displaymode)
                                    {
                                            $('#endofdeals').show();
                                            $('#endofdeals').html("<center><h2 style='color:#4C335B'>End of deals !!!!!!!</h2></center>");
                                    }
                            }
                    }
                    }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:25:31.703

据我说，您需要页码，但页面应该在滚动时缓慢加载。如果你想要这个，你不应该使用无限滚动技术，但 LazyScroll 会帮助你，如果你想要 20 条记录，那么查询 20 条记录也在下面创建[分页](http://flaviusmatis.github.com/simplePagination.js/)

在这里，您可以拥有[Plug-in](http://www.appelsiini.net/projects/lazyload)和[Demo](http://www.appelsiini.net/projects/lazyload/enabled_fadein.html)。

# java - java gwt 点击处理程序

> ID：12893587
> 
> 赞同：0
> 
> 时间：2012-10-15T10:19:34.340
> 
> 标签：java, gwt, click

我有一个菜单按钮，它由图像下的图像和文本组成。整个事情是这样构建的：

```
 ImageResource icon = ...;
    final Element span = DOM.createSpan();

    Image image = new Image(icon);
    span.insertFirst(image.getElement());

    Element div = DOM.createDiv();
    div.setInnerHTML(text);

    span.insertAfter(div, span);

    image.sinkEvents(Event.ONCLICK);

    getElement().insertFirst(span); 
```

点击事件在演示者中设置如下：

```
 ...
       private void bindEvents() {
        display.getButton().addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                Window.alert("test");
             }
    }); 
```

单击事件仅部分起作用，当我单击图像下的文本时，单击事件可以正常工作，但是当我单击图像时没有执行单击！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:37:08.340

另一种方法：

```
FlowPanel myButton = new FlowPanel();
myButton.add(new Image(icon));
myButton.add(new Label(myButtonText));

ClickHandler h = new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {
        // do something
    }
};
myButton.addDomHandler(h, ClickEvent.getType()); 
```

这将捕获图像及其下方文本的点击事件。

# joomla - joomla文章编辑

> ID：12893589
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:19:38.883
> 
> 标签：joomla, article

我是 joomla 1.5.26 的新手。我正在尝试为注册用户编辑某些文章，但不是为所有文章。在我目前的情况下，所有文章都变得可编辑。但我想让一些文章可以编辑。请指导我如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:28:30.727

如果你想让你的用户只编辑一种文章，你需要 ACL。
可悲的是，Joomla 1.5 中没有这样的东西（除非您购买商业扩展），但您可以在 Joomla 2.5 中本地找到它

这是一个非常强大的东西，试试吧！

**编辑**
如果你真的需要使用 joomla 1.5，看看[这个组件](http://extensions.joomla.org/extensions/access-a-security/site-access/backend-a-full-access-control/6799)：它在站点内添加了 ACL 逻辑。我从来没有测试过，但是[在这里](http://extensions.joomla.org/search?q=acl)你可以找到更多的 ACL 扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:24:37.490

您可以通过以管理员身份登录，从管理面板编辑任何文章。如果您使用管理员帐户登录前端，那么您可以编辑所有文章，任何其他注册用户都不能编辑这些文章，此功能仅适用于管理员。

# c# - 活动 X 控件 C#

> ID：12893590
> 
> 赞同：1
> 
> 时间：2012-10-15T10:19:42.340
> 
> 标签：c#, activex

如何创建一个活动的 x 控件，以便它应该从文件中读取输入并将输出写入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:30:12.293

**请注意您的 activex 控件仅限于 IE**

使用VB [http://pages.cpsc.ucalgary.ca/~saul/vb_examples/tutorial10/activex01.html](http://pages.cpsc.ucalgary.ca/~saul/vb_examples/tutorial10/activex01.html)

使用.net [http://www.codeproject.com/Articles/24089/Create-ActiveX-in-NET-Step-by-Step](http://www.codeproject.com/Articles/24089/Create-ActiveX-in-NET-Step-by-Step)

# c# - 无法使用 svn 签出 Watin 测试记录器

> ID：12893596
> 
> 赞同：0
> 
> 时间：2012-10-15T10:20:20.443
> 
> 标签：c#, svn, watin

[我试图从http://sourceforge.net/p/watintestrecord/code/195/tree/version3/](http://sourceforge.net/p/watintestrecord/code/195/tree/version3/)查看 Watin 测试记录器

我试过的svn链接是：svn://svn.code.sf.net/p/watintestrecord/code/trunk watintestrecord-code

这个网址有问题吗？

来自 svn 的错误是“未知主机名 'svn.code.sf.net'

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:21:45.810

1.  如果您得到“未知主机名” - 这是您的**解析器的****本地问题**，与任何形式的 svn 无关：**`nslookup svn.code.sf.net`**
***   *至少现在*的URL很**糟糕**

    z:>svn ls [http://svn.code.sf.net/p/watintestrecord/code/trunk](http://svn.code.sf.net/p/watintestrecord/code/trunk)

    svn：警告：W160013：URL 'http://svn.code.sf.net/p/watintestrecord/code/trunk' 在版本 195 中不存在** 

 **而缩短的网址则没有这样的问题

```
z:\>svn ls http://svn.code.sf.net/p/watintestrecord/code
version3/ 
```**

# java - 如何将鼠标侦听器添加到 JPanel 图像？

> ID：12893599
> 
> 赞同：1
> 
> 时间：2012-10-15T10:20:24.383
> 
> 标签：java, swing, jpanel, mouse-listeners, swingutilities

我使用以下代码在 JPanel 上绘制了 BufferedImage。

```
protected void paintComponent(Graphics g) {
    if (image != null) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;

        double x = (getWidth() - scale * imageWidth) / 2;
        double y = (getHeight() - scale * imageHeight) / 2;
        AffineTransform at = AffineTransform.getTranslateInstance(x, y);
        at.scale(scale, scale);
        g2.drawRenderedImage(image, at);
    }
} 
```

如何向该图像添加鼠标单击侦听器？另外，我想获取图像的点击坐标，而不是 JPanel。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:35:03.670

`MouseListener`像往常一样将 a 添加到窗格中。

在`mouseClicked`方法中检查是否`Point`在图像的矩形内...

```
public void mouseClicked(MouseEvent evt) {

    if (image != null) {
        double width = scale * imageWidth;
        double height = scale * imageHeight;
        double x = (getWidth() - width) / 2;
        double y = (getHeight() - height) / 2;
        Rectangle2D.Double bounds = new Rectangle2D.Double(x, y, width, height);
        if (bounds.contains(evt.getPoint()) {
          // You clicked me...
        }
    }
} 
```

# sql - 如何进行多分组并输出到 CSV

> ID：12893600
> 
> 赞同：1
> 
> 时间：2012-10-15T10:20:24.950
> 
> 标签：sql, postgresql

我有一个简单的“操作”表，用于记录用户操作，如下所示：

```
{
  label (varchar),
  timestamp
} 
```

用户完成的每个操作都会保存一条记录。

我现在需要输出一个看起来像这样的报告：

```
Date, Label1Count, Label2Count, Label3Count, ... 
dd/mm/yy, 34, 44, 55, ...
dd/mm/yy, 34, 44, 55, ...
dd/mm/yy, 34, 44, 55, ... 
```

其中 Date 是操作发生的日期，每个标签标题都是我记录的标签之一。

我可以输出类似的东西没有问题：

```
label, date, count
label, date, count
... 
```

并对其进行排序，以便标签组合在一起，然后是日期。

然后我需要将其复制并粘贴到 Excel 中以匹配所需的视图。

任何想法如何使用纯 SQL 获得第一个视图？我可以使用 python 和 SQL 的组合来做到这一点，但我确信只有 SQL 可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:37:36.037

您可以[`crosstab`](http://www.postgresql.org/docs/9.1/static/tablefunc.html)在 PostGreSQL 中使用，但我不喜欢它。

所以我改用这种模式......

```
SELECT
  timestamp,
  SUM(CASE WHEN label = 'x' THEN 1 ELSE 0 END)           AS label_x_count,
  SUM(CASE WHEN label = 'y' THEN 1 ELSE 0 END)           AS label_y_count,
  SUM(CASE WHEN label = 'z' THEN 1 ELSE 0 END)           AS label_z_count
FROM
  yourTable
GROUP BY
  timestamp 
```

显然，这仅在您知道要旋转的所有标签时才有效。

如果您不了解所有标签，并且想要一个具有动态列数的结果集，则需要动态 SQL *（编写 SQL 的代码，特别是用于不同标签的新代码行）*。没有一个静态查询可以为您做到这一点。

因为当您在设计时不知道不同的标签值时需要动态 SQL，所以规范化数据集实际上通常是数据层中最好的方法。然后，您的客户端代码可以将该规范化数据集转换为模型层中的平面文件数据集。或类似的。

出于这个原因，我经常建议不要在 SQL 环境中对数据进行透视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:33:14.820

这是表格旋转。用纯sql很难实现。但是，如果标签的案例数量是固定的，您可能会在 SELECT CASE WHEN 语句中成功。如果标签的类型不固定，您应该选择其他东西。只有一些 sql 引擎对此没有解决方案。看看这个： [http ://www.postgresql.org/docs/9.1/static/tablefunc.html](http://www.postgresql.org/docs/9.1/static/tablefunc.html)

# c# - 对 ASP.NET 处理程序的 Ajax 请求受限

> ID：12893605
> 
> 赞同：0
> 
> 时间：2012-10-15T10:20:59.230
> 
> 标签：c#, jquery, asp.net, ajax

我正在尝试测试具有 2 个端点的**通知处理程序**Web 应用程序：

*   一种用于客户注册的长轮询
*   一种用于处理传入通知。

我编写了一个`test.html`用于轮询多个客户端的测试脚本和一个`business.html`用于发送通知的脚本。

问题是当我启动 5 个客户端时它工作正常，但是**当我启动 6 个或更多客户端时，`business.html`直到我停止 requests 才会加载**。

我尝试按照[此处](http://support.microsoft.com/kb/821268)的建议更改 asp.net 配置文件，但没有帮助。

是否有任何应在其他地方更改的请求限制？

`notificationhandler.ashx`通知的轮询和添加是通过对and的简单 jquery ajax 调用完成的`addnotification.ashx`。

# wordpress - 我在更改网站地址 url 时遇到问题

> ID：12893607
> 
> 赞同：1
> 
> 时间：2012-10-15T10:21:08.973
> 
> 标签：wordpress

我最近将我的站点更改为 WP，现在该站点只能在 example.com 上访问，但 www.example.com 具有很高的页面权限和链接域。当我尝试将站点地址 url 从 example.com 更改为 www.example.com 时，该站点无法访问。这可能是什么原因？我该怎么做才能恢复我的旧网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:35:51.393

可能的问题：

1.  数据库：查找表`wp_options`，有字段`siteurl` - 尝试使用它。
2.  .ht 访问：

    ```
    Options +FollowSymLinks
    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^stackoverflow\.com
    RewriteRule ^(.*)$ http://www.stackoverflow.com/$1 [R=permanent,L] 
    ```

    或者

    ```
    Options +FollowSymLinks
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^stackoverflow\.com$ [NC]
    RewriteRule ^(.*)$ http://www.stackoverflow.com/$1 [R=301,L] 
    ```

3.  [清除您的 DNS](http://www.tech-faq.com/how-to-flush-dns.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:29:03.400

检查您的 DNS 服务器。CNAME 记录可能已经走动。

这是一个表格表示：

```
Record Type  |  URL / Address  |  IP Address
---------------------------------------------
     A       |   example.com   |   10.0.0.0
   CNAME     | www.example.com |  example.com 
```

# objective-c - 编译器找不到我自己的方法

> ID：12893608
> 
> 赞同：1
> 
> 时间：2012-10-15T10:21:15.293
> 
> 标签：objective-c, xcode, cocos2d-iphone

我最近开始学习 Objective-C 和 Cocos-2D。我试图定义自己的方法来自动创建精灵。

我添加了自己的类，我还将在其中创建其他自动化方法。无论如何，我的 .h 文件看起来像这样：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface ActionsClass : CCNode {

  }

@property (nonatomic, strong) CCSprite* createSprite;
@property (nonatomic, strong) CCSprite* spriteName;
@property (nonatomic, strong) NSString* pngName;
@property (nonatomic) CGPoint* spriteCoordinate;

- (CCSprite *)createSprite: (CCSprite *)spriteName: (NSString *)pngName: (CGPoint *)spriteCoordinate;

@end 
```

.m 是：

```
#import "ActionsClass.h"

@implementation ActionsClass

@synthesize createSprite = _createSprite;
@synthesize spriteName = _spriteName;
@synthesize pngName = _pngName;
@synthesize spriteCoordinate = _spriteCoordinate;

- (CCSprite *)createSprite: (CCSprite *)spriteName: (NSString *)pngName: (CGPoint *)spriteCoordinate
{

if (!_createSprite)
{
    _createSprite = [[CCSprite alloc] init];
    _spriteName = [CCSprite spriteWithFile:_pngName];
    _spriteName.position = ccp(_spriteCoordinate->x, _spriteCoordinate->y);
    [self addChild:_spriteName];
}

return _createSprite;
}

@end 
```

在我要调用该方法的主 .m 文件中：

```
[self createSprite: saif: @"saif.png": ccp(100,100)]; 
```

这将给出 xcode 未找到实例方法**createSprite**并将其默认为**id的警告**

非常感谢，如果问题的字体或格式不是超级整洁，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:28:54.463

您的方法声明错误，因此您将无法调用它。

它应该是：

```
- (CCSprite *)createSprite:(CCSprite *)spriteName pngName:(NSString *)pngName coord:(CGPoint *)spriteCoordinate; 
```

并称为：

```
[self createSprite:someSprite pngName:somePNGName coord:someCoord]; 
```

编辑：我没有看到你试图从另一个班级打电话给这个。为此，您需要导入 ActionsClass 头文件，并在 ActionsClass 的实例上调用此方法，例如

```
ActionsClass *actionsClassObject = [[ActionsClass alloc] init];
[actionsClassObject createSprite:someSprite pngName:somePNGName coord:someCoord]; 
```

# php - 如何在 PHP/Magento 中捕获这个低级 MySQL (?) 错误

> ID：12893610
> 
> 赞同：3
> 
> 时间：2012-10-15T10:21:30.540
> 
> 标签：php, magento, error-handling

当我在 Magento 中以非常大`$sku`的 执行以下语句时，执行终止而不会抛出任何错误。Magento、Apache 或 PHP 的错误日志中都没有错误。

> Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);

**问题：如何捕获错误？**

我尝试设置自定义错误处理程序，并且出于测试目的，我还设法触发了调用每个错误处理程序函数的错误情况。但是当运行前面提到的带有大的 Magento 代码时`$sku`，不会执行任何错误处理函数。

```
error_reporting( -1 );
set_error_handler( array( 'Error', 'captureNormal' ) );
set_exception_handler( array( 'Error', 'captureException' ) );
register_shutdown_function( array( 'Error', 'captureShutdown' ) ); 
```

为了完整起见，这是`$sku`我传递给`loadByAttribute()`. （sku 无效，但这不是问题）

> 1- 9685 0102046 | 1- 9685 1212100 | 1- 9685 1212092 | 1- 9685 1212096 | 1- 9685 1102100 | 1- 9685 1102108 | 1- 9685 1- 9685 0102056|1- 9685 0102058|1- 9685 1212104|1- 9685 1212108|1- 9685 0212058|1- 9685 0104050|1- 9685 0212050|1- 9685 0212056|1- 9685 0212044|1- 9685 0212048| 1- 9685 0212052|1- 9685 0212054|1- 9685 1102104|1- 9685 1102124

非常感谢您对此事的任何见解！

更新：经过进一步调查，这是代码中执行终止的确切点。当执行 foreach 时，我猜 Magento 进入 MySQL 世界并开始从数据库加载数据。

\Mage\Catalog\Model\Abstract.php

```
 public function loadByAttribute($attribute, $value, $additionalAttributes = '*')
    {
        $collection = $this->getResourceCollection()
            ->addAttributeToSelect($additionalAttributes)
            ->addAttributeToFilter($attribute, $value)
            ->setPage(1,1);

        foreach ($collection as $object) { // <--------------- HERE
            return $object;
        }
        return false;
    } 
```

**请注意，我只对找出如何正确捕获这些类型的错误感兴趣，而不是“修复”逻辑**。这样我就可以向用户显示正确的错误消息。上面带有畸形 sku 的示例是人为的，我不想让我的 Magento 应用程序与那些错误的 sku 一起工作。

**更新：错误原因**

我跟踪了`load()`由 触发的调用，`foreach`它归结为一个错误 Zend / PHP。

我追踪了对 \www\lib\Zend\Db\Statement.php 的调用`_stripQuoted($sql)`，以及以下语句：（ `$sql = preg_replace("/$q($qe|\\\\{2}|[^$q])*$q/", '', $sql);`在 Magento 1.7.0.2 的第 204 行）。

当`preg_replace`使用该语句生成的 SQL 运行时`load()`，程序就终止了。apache 或 php 的日志中都没有任何痕迹。日志有效，因为它们充满了其他东西。

[我在这个问题上找到了这个错误报告](http://framework.zend.com/issues/browse/ZF-5063)。他们在那里表明这是一个分段错误。我想没有办法从中恢复（？）。

由于问题明确是关于如何捕获错误条件，而且这里的许多建议更多是关于清理数据，我认为赏金没有明确的“赢家”。但 Franklin P Strube 至少暗示要在筹码更深的地方过牌，所以他明白了。

谢谢你们所有的帮助。如果您对如何处理段错误有任何建议，请分享 =)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:07:59.767

我相信脚本在堆栈中的终止可能比您指出的更深。当一个集合开始“foreach”循环时，它必须首先调用“load”函数，该函数专门用于构建 SQL。

您可以尝试记录`Mage::log((string)$collection->getSelect());`以查看 SQL 查询是否有问题。

或者，您是否能够在过滤之前对 sku 进行消毒？也许使用观察者？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:40:02.627

不要忘记在 php.ini、.htaccess 或使用 ini_set 中设置日志路径。

.htaccess 示例：

```
php_flag log_errors on
php_value error_log /var/www/PHP_errors.log 
```

.

如果 Magento 正在使用 PDO，通常应该将 PDO 设置为异常模式。

这是我在 PHP 5.2.x 中使用的：

```
error_reporting(-1);
ini_set("display_errors", "On");

function errhandler($nSeverity, $strMessage, $strFilePath, $nLineNumber){
    error_log(PHP_EOL.date("Y-m-d H:m:s", time())." ".$strFilePath."#".$nLineNumber.": ".$strMessage.PHP_EOL);
    throw new ErrorException($strMessage, /*nExceptionCode*/ 0, $nSeverity, $strFilePath, $nLineNumber);
}
set_error_handler("errhandler", -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:33:35.157

当 PHP 内存不足时会出现此问题，

从 php.ini 增加允许的内存大小或增加内存限制，

把这个`ini_set('memory_limit', '512M');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T22:15:07.647

我不认为这是`foreach`杀死脚本的原因。

尝试在之前立即拆卸呼叫：

```
public function loadByAttribute($attribute, $value, $additionalAttributes = '*')
{
    $res1 = $this->getResourceCollection();
    $res2 = $res1->addAttributeToSelect($additionalAttributes);
    $res3 = $res2->addAttributeToFilter($attribute, $value);

    $collection = $res3->setPage(1,1);

    foreach ($collection as $object)
        return $object;
    }
    return false;
} 
```

否则，如果 SKU 长度过长，或者 SKU 未通过某些清理检查，您可能只想简单地引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:23:57.120

在 index.php 中，将以下行移动到 index.php 文件的顶部：

```
ini_set('display_errors', 1); 
```

由于权限问题，我感觉您的问题没有标记此触发器。我运行这两个命令以确保在文件/目录上正确设置权限。

```
find . -type d -exec chmod 755 {} \;
find . -type f -exec chmod 644 {} \; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T11:58:08.647

您不需要注册自己的错误处理程序，Magento 已经为您完成了。您需要做的只是几个步骤：

1.  通过取消注释 index.php 中的下一行来打开错误报告：

    ```
    #ini_set('display_errors', 1); 
    ```

2.  确保日志记录已打开：转到管理面板系统->配置->开发人员->日志设置，将启用设置为是。现在您可以`var/log`从 Magento 根目录检查 Magento 登录。

任何 php 错误都应属于 php Fatal Error 或日志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T16:47:18.517

前两个问题：

*   你怎么知道实际上有错误？例如，在 php 代码的`exit`某些部分中，不会引发错误，但脚本将被终止。
*   你说`"I guess Magento goes into MySQL world and starts loading up data from the database"`。你检查过你的 MySQL 服务器上发生了什么吗？SQL 查询真的被发送了吗？如果它被发送，它是否被处理、出错或停止？

我建议使用调试器从`foreach ( $collection`行开始逐步执​​行 PHP 代码。我不知道您使用的是什么编辑器/IDE，您可以设置[Netbeans](http://netbeans.org/)和[XDebug](http://xdebug.org/)以允许设置断点和单步执行代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-01T23:35:57.873

Magento 1.7 中的客户也有同样的错误。

我有一个 sql insert 语句，它将侧边栏购物车 html 保存在一个字段中，并且在该语句中我使用了该 html 的 addlashes。

当该 html 中有 1 到 5 个产品时，save 语句将成功执行。

当产品超过 5 个时，这意味着 html 较长但每个产品的部分相同，我也在此错误中运行。

程序停在 $sql = preg_replace("/$q($qe|\\{2}|[^$q])*$q/", '', $sql); 并且看不到任何错误。

这似乎是一个内存问题，有 6 个产品我超过了大小限制（现在是 7000 个字符），所以我猜提供商必须更改 php 设置..

# python - 如何分配 3 条数据的集合

> ID：12893612
> 
> 赞同：0
> 
> 时间：2012-10-15T10:21:34.917
> 
> 标签：python, python-2.7

我有几十个元组，每个元组包含 2 个字符串和 1 个整数。例如：`(str, str, int)`。所有这些元组都在一个列表中（下面的示例）。每个元组都是唯一的，每个元组的字符串和整数也是唯一的。

前任。：

```
[('a','aA', 53),
 ('b','bb', 21),
 ('c','cc', 234),
 ('d','de', 76),
..] 
```

我想要的是，像字典一样使用这个数据结构，并为我传递**的 3 个值中的任何一个检索整个元组。**

> 前任。：
> 
> 对于价值`'a'`- >获取整个元组：`('a', 'aA', 53)`
> 
> 对于价值`'cc'`- >获取整个元组：`('c', 'cc', 234)`
> 
> 对于价值`'76'`- >获取整个元组：`('d', 'de', 76)`

到目前为止，我已经完成了： *创建一个简单的函数来遍历元组列表，遍历每个元组及其所有 3 个值以找到匹配项，如果匹配则返回元组，如果不匹配则返回 False。*

这听起来很慢，似乎是完成这项任务的非常错误的方法。

1.  实现这一目标的正确方法是什么？
2.  我应该创建 3 个字典并将它们相互链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:28:05.987

您必须使用字典创建单独的索引以允许按内容查找元素：

```
from collections import defaultdict

index_on_1 = defaultdict(list)
index_on_2 = defaultdict(list)
index_on_3 = defaultdict(list)

for i, (val1, val2, val3) in enumerate(yourstructure):
    index_on_1[val1].append(i)
    index_on_2[val2].append(i)
    index_on_3[val3].append(i) 
```

现在您可以在字符串上查找索引：

```
from itertools import chain

def lookup(entry):
    if isinstance(entry, str):
        entries = chain(index_on_1.get(entry, []), index_on_2.get(entry, []))
        return [yourstructure[i] for i in entries]
    else:
        return [yourstructure[i] for i in index_on_3.get(entry, [])] 
```

请注意，这始终返回一个列表，因为您的条目可能匹配多个元组。如果查找是一个字符串，我们只使用前两个索引，否则只使用第三个。

或者，不关心条目类型的更通用的解决方案是创建一个索引列表，而不是 3 个单独的变量：

```
indexes = [defaultdict(list) for _ in range(3)]

for i, values in enumerate(yourstructure):
    for index, val in zip(indexes, values):
        index[val].append(i) 
```

查找变为：

```
def lookup(entry):
    entries = chain(*[index.get(entry, []) for index in indexes])
    return [yourstructure[i] for i in entries] 
```

您可以将这一切捆绑在一个类中，当您添加或删除元素时，您的索引会保持最新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:28:12.977

简单，简单的方法是：

```
>>> your_list
[('a', 'aA', 53), ('b', 'bb', 21), ('c', 'cc', 234), ('d', 'de', 76)]
>>> def get_tuple(list_of_tuples, elem):
...     for item in list_of_tuples:
...             if elem in item:
...                     return item
...     return False
... 
>>> get_tuple(your_list, 'a')
('a', 'aA', 53)
>>> get_tuple(your_list, 'cc')
('c', 'cc', 234) 
```

Though, you didn't specify, what should happen if one element is in more than in one tuple. What should be return for 'a' in list of

```
[('a','aA', 53),
('b','bb', 21),
('a','ca', 234),
..] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T10:33:52.727

To keep a `O(1)` look up you can create a dictionary like this from those tuples:

```
In [20]: lis=[('a','aA', 53),
   ....:  ('b','bb', 21),
   ....:  ('c','cc', 234),
   ....:  ('d','de', 76)]

In [22]: dic=dict((y,x) for x in lis for y in x)

In [23]: dic

Out[23]: 
{21: ('b', 'bb', 21),
 53: ('a', 'aA', 53),
 76: ('d', 'de', 76),
 234: ('c', 'cc', 234),
 'a': ('a', 'aA', 53),
 'aA': ('a', 'aA', 53),
 'b': ('b', 'bb', 21),
 'bb': ('b', 'bb', 21),
 'c': ('c', 'cc', 234),
 'cc': ('c', 'cc', 234),
 'd': ('d', 'de', 76),
 'de': ('d', 'de', 76)} 
```

now searching any item becomes easy:

```
In [24]: dic.get('a','not found')
Out[24]: ('a', 'aA', 53)

In [25]: dic.get('aA','not found')
Out[25]: ('a', 'aA', 53)

In [26]: dic.get('21','not found')
Out[26]: 'not found'

In [27]: dic.get(21,'not found')
Out[27]: ('b', 'bb', 21) 
```

# ruby-on-rails - 2 个用户之间的产品订单

> ID：12893615
> 
> 赞同：5
> 
> 时间：2012-10-15T10:22:00.493
> 
> 标签：ruby-on-rails, ruby, relationship, belongs-to

我有三个模型：User、Product、Offer以及这些模型之间的关系有问题。

**设想：**

用户 1 发布产品

用户 2 可以向用户 1 发送报价，例如 $10

用户 1 可以接受或拒绝报价

**我现在的问题是：**

用户、产品和优惠之间的正确关系是什么？

我该如何处理那些“接受或拒绝”的动作？

有没有更好的解决方案？

用户型号：

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :avatar, :screen_name
    has_many :products
    has_many :offers,:through => :products
end 
```

产品型号：

```
class Product < ActiveRecord::Base
    attr_accessible :content, :price, :title, :tag_list, :productimage, :user_id
    belongs_to :user
    has_many :offers, :through => :users
end 
```

提供型号：

```
class Offer < ActiveRecord::Base
    attr_accessible :offer_price, :status, :user_id, :product_id
    has_many :products
    has_many :users, through: :products
end 
```

提前致谢 ：）

编辑：

我正在使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:15:13.007

警告：这是一本小小说。

**第 1 部分：建立协会**

我建议彻底阅读[有关关联的 Rails 指南](http://guides.rubyonrails.org/association_basics.html)，将其添加为书签，然后再阅读一遍，因为这是正确理解的关键，并且可能有点棘手 - 一旦超出了基本关联，就有很多选择。

关于您的应用需要注意的一件事是，您的用户有两个角色，买家和卖家。您将需要小心关联的名称 - 是`@user.offers`返回用户提供的*报价*，还是用户*收到*的报价？您可能希望能够将这两件事的列表放入用户的个人资料中。

您描述的基本关系相当简单：

*   一个用户可以销售许多产品，所以`User has_many :products`和`Product belongs_to :user`

*   一个用户可以提供许多报价，因此`User has_many :offers`和`Offer belongs_to :user`

*   `Product has_many :offers`一个产品可能会收到很多报价`Offer belongs_to :product`

这一切都很好，你当然可以这样做——在这种情况下，你可以跳到第 2 部分 :)

但是，一旦您开始尝试添加`through`关系，水就会变得浑浊。毕竟，

*   `Offer belongs_to :user`（买方），但它也有一个用户通过产品（卖方）

*   `User has_many :products`（他们正在销售），但他们也通过优惠（他们正在购买 - 好吧，试图购买）提供许多产品。

啊，混乱！

这就是您需要`:class_name`选项的时候，它可以让您以不同的方式命名关联到它所引用的类，以及该`:source`选项，它可以让您在“from”模型上以与“through”模型不同的方式命名关联。

因此，您可能会像这样形成您的关联：

```
# User
has_many :products_selling, class_name: 'Product'
has_many :offers_received, class_name: 'Offer',
         through: :products_selling, source: :offers

has_many :offers_made, class_name: 'Offer'
has_many :products_buying, class_name: 'Product',
         through: :offers_made, source: :product

# Product
belongs_to :seller, class_name: 'User', foreign_key: :user_id
has_many :offers
has_many :buyers, class_name: 'User', through: :offers

# Offer
belongs_to :product
belongs_to :buyer, class_name: 'User', foreign_key: :user_id
has_one :seller, class_name: 'User', through: :product 
```

尽管如果您将`user_id`列重命名为`seller_id`in the `products`table 和`buyer_id`in the `offers`table，则不需要这些`:foreign_key`选项。

**第 2 部分：接受/拒绝报价**

有很多方法可以解决这个问题。我会放一个布尔字段`accepted`，`Offer`然后你可以有类似的东西

```
# Offer
def accept
  self.accepted = true
  save
end

def reject
  self.accepted = false
  save
end 
```

并且您可以找到未完成的优惠（其中`accepted`为空）

```
scope :outstanding, where(accepted: nil) 
```

要让控制器中发生接受/拒绝逻辑，您可以考虑[添加新的 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)（链接指南是另一个值得彻底阅读的指南！）。你应该找到像这样的一行

```
resources :offers 
```

在 config/routes.rb 中，它提供了标准操作`index`、`show`、`edit`等。您可以将其更改为

```
resources :offers do
  member do
    post :accept
    post :reject
  end
end 
```

并把这样的东西放在你的`OffersController`

```
def accept
  offer = current_user.offers_received.find(params[:id])
  offer.accept
end

# similarly for reject 
```

然后你可以发出一个 POST 请求`offers/3/accept`，它会导致 id 为 3 的提议被接受。视图中这样的事情应该这样做：

```
link_to "Accept this offer", accept_offer_path(@offer), method: :post 
```

请注意，我不只是写信`Offer.find(params[:id])`，因为狡猾的用户可以代表卖家接受报价。请参阅[Rails 最佳实践](http://rails-bestpractices.com/posts/3-use-scope-access)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T12:13:48.383

除了关系之外，您的模型已经足够好了。当您试图区分拥有的产品与感兴趣的产品（提供）以及产品所有者与感兴趣的用户（提供报价的用户）时，混淆就开始了。如果你能想出一个更好的命名约定，你可以很容易地修复它。

**1\. 更好的关系**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :avatar, :screen_name
  has_many :owned_products, :class_name => "Product"
  has_many :offers 
  has_many :interested_products, :through => :offers
end

class Offer < ActiveRecord::Base
  attr_accessible :offer_price, :status, :user_id, :product_id
  belongs_to :interested_user, :class_name => "User", :foreign_key => :user_id
  belongs_to :interested_product, :class_name => "Product", :foreign_key => :product_id
end

class Product < ActiveRecord::Base
  attr_accessible :content, :price, :title, :tag_list, :productimage, :user_id
  belongs_to :owner, :foreign_key => :user_id, :class_name => "User"
  has_many :offers 
  has_many :interested_users, :through => :offers
end 
```

通过这些关系，我认为您可以获得您感兴趣的所有基本信息。例如，

```
@product = Product.find(1)
@product.owner # would give you the user who created the product
@product.interested_users # would give you users who placed an offer for this product

@user = User.find(1)
@user.owned_products # would give you the products created by this user
@user.interested_products # would give you the products where the user placed an offer 
```

**2\. 处理接受和拒绝动作。**

根据您的描述，我看到报价可能有 2 种可能的状态更改，“已创建”->“接受”或“已创建”->“拒绝”。我建议你看看[state_machine](https://github.com/pluginaweek/state_machine)。状态机将使用它的辅助方法为您的模型添加很好的风味，我认为这对您的情况非常有用。所以你的`Offer`模型看起来像这样，

```
class Offer < ActiveRecord::Base
  # attr_accessible :title, :body
  attr_accessible :offer_price, :status, :user_id, :product_id
  belongs_to :interested_user, :class_name => "User", :foreign_key => :user_id
  belongs_to :interested_product, :class_name => "Product", :foreign_key => :product_id

  state_machine :status, :initial => :created do
    event :accept do
      transition :created => :accepted
    end
    event :reject do
      transition :created => :reject
    end
  end
end

#cool helper methods
@offer = Offer.new
@offer.accepted? #returns false
@offer.reject #rejects the offer
@offer.rejected? #returns true 
```

我希望这能给你一个更好的画面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:40:04.890

怎么样

```
class User < ActiveRecord::Base
  has_many :products  # All products posted by this user
  has_many :offers    # All offers created by this user
end

class Product < ActiveRecord::Base
  belongs_to :user   # This is the user who posts the product (User 1)
  has_many :offers
end

class Offer < ActiveRecord::Base
  belongs_to :product
  belongs_to :user   # This is the user who creates the offer (User 2)

  # Use a 'state' field with values 'nil', 'accepted', 'rejected' 
end 
```

对于您的场景：

```
# User 1 posts a product
product = user1.products.create

# User 2 can send User 1 an offer with an price e.g $ 10
offer = user2.offers.create(:product => product)

# User 1 can accept or reject the offer
offer.state = 'rejected' 
```

您可以根据您的需要来改进这一点——例如，如果不同的用户可以发布相同的产品。

# iphone - 从 2 个视图使用委托协议的适当方法是什么？

> ID：12893617
> 
> 赞同：0
> 
> 时间：2012-10-15T10:22:08.257
> 
> 标签：iphone, delegates

我有一个视图控制器，它使用委托协议来传回字符串数组。我现在有另一个视图控制器，我想使用相同的协议，但我已经使用了它，我在 Xcode 中收到警告`Duplicate protocol definition of 'SearchDetailsDelegate' is ignored`。

我需要这两个视图传回一个数组供父视图控制器解析。什么是更合适的方式来实现我在这里需要做的事情？关键价值观察会是这里的路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:35:26.160

你有几个选择：

1.  将您的协议重命名为不同的。

2.  创建一个外部协议并在每个视图上采用该协议

3.  向您的视图添加一个名为 ParentController 的属性，其类型为它的父级。

    @property (strong,nonatomic) ParentViewController *ParentController;

**（合成偏离当然）**

然后，在您的 viewController 中，当您实例化视图时，将 viewController 分配为父级

```
YourView *childView  = [[YourView alloc]init];
childView.parentController = self; 
```

现在您可以**在 viewController**中添加一个可以接收字符串数组的方法

```
-(void)setStringsArray:(NSArray*)arr{
     //do what ever you need with the array
     //don't forget to add this method to your .h file so it will be visible
} 
```

最后从视图发送字符串数组： [self.parentController setStringsArray:yourArray];

**顺便说一句** ，如果您想知道发送数组的视图是什么，您可以：

```
-(void)setStringsArray:(NSArray*)arr fromView:(UIView*)senderView{
     //do what ever you need with the array
     //don't forget to add this method to your .h file so it will be visible
} 
```

并使用

```
 [self.parentController setStringsArray:yourArray fromView:self]; 
```

**BTW 2** 另一种选择是使用通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:28:51.483

在单独的 .h 文件（目标 c 协议的新文件）中定义协议，然后将其包含在所需的视图控制器中。不建议在两个不同的视图控制器中重新定义相同的协议，因为在您的情况下

# java - 更改 IE 主页

> ID：12893622
> 
> 赞同：0
> 
> 时间：2012-10-15T10:22:30.340
> 
> 标签：java, windows, internet-explorer, applet, registry

我正在尝试通过修改注册表来更改 IE 主页。我已经用一个 bat 文件成功地做到了这一点；

```
REG ADD "HKCU\SOFTWARE\MICROSOFT\INTERNET EXPLORER\MAIN" /V "START PAGE" /D "http://www.stackoverflow.com/" /F 
```

我也想在java上做这个，试过这个但它不起作用。

```
import java.util.*;
import java.applet.Applet; 
import java.awt.*; 

class test {
  public static void main(String args[]) {
      try {
        Runtime.getRuntime().exec("REG ADD 'HKCU\\Software\\Microsoft\\Internet Explorer\\Main' /V 'Start Page' /D 'http://www.stackoverflow.com/' /F");
      } catch (Exception e) {
      System.out.println("Error ocured!");
    }
  }
} 
```

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:27:40.707

试试这个：

```
CMD /C REG ADD "HKCU\SOFTWARE\MICROSOFT\INTERNET EXPLORER\MAIN" /V "START PAGE" /D "http://www.stackoverflow.com/" /F 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:32:45.223

它不是通过注册表，但它完成了这项工作。您可以使用此代码（也与 Firefox 兼容）：

```
function setHome() {
    if (document.all) {
        document.body.style.behavior='url(#default#homepage)';
        document.body.setHomePage('http://url_of_page.com');
    } else if (window.sidebar) {
        if(window.netscape) {
            try {
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
            }
            catch(e) {
                alert("this action was aviod by your browser，if you want to enable，please enter        about:config in your address line,and change the value of     signed.applets.codebase_principal_support to true");
            }
        }
        var prefs = Components.classes['@mozilla.org/preferences-service;1'].getService(Components. interfaces.nsIPrefBranch);
        prefs.setCharPref('browser.startup.homepage','http://url_of_page.com');
    }
} 
```

然后执行函数：

```
<a href="javascript:setHome();">make your home page</a> 
```

来源：[这里](http://bluewhalelabs.wordpress.com/2008/11/21/javascript-function-to-set-a-web-page-as-home-page-for-ie-and-firefox-compatible/)

# java - 如何动态初始化二维对象数组

> ID：12893623
> 
> 赞同：2
> 
> 时间：2012-10-15T10:22:29.723
> 
> 标签：java, arrays, object, initialization

我在尝试实现一种动态初始化二维对象数组的方法时有点卡住了。

我知道使用哈希图进行双括号初始化，但在这种情况下，我不想这样做，我想学习如何手动进行。我知道必须有办法。

所以这是我到目前为止所拥有的，但不正确：

```
return new Object[][] {
                          {
                              buildNewItem(someValue),
                              buildNewItem(someValue),
                              buildNewItem(someValue),
                              buildNewItem(someValue),
                              buildNewItem(someValue),
                           }    
}; 
```

如您所见，我缺少应该代表行（0,1,2,3 ...）的第一个维度的值的分配。

你能帮我找出如何完成这个初始化吗？在 return 语句之前创建对象不是一种选择，我想在旅途中进行，所有这些都作为一个 return 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:29:54.383

像这样的东西：

```
 return new Object[][] {new Object[]{}, new Object[]{}}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:40:51.967

您的代码是正确的，但它仅适用于第 0 行。您可以使用添加更多行`{}`

```
static int count = 0;
public static Integer buildNewItem() {
    return count++;
}
public static void main(String[] args) {

    System.out.println(Arrays.deepToString(new Object[][]{
            {buildNewItem(), buildNewItem(), buildNewItem()},
            {buildNewItem(), buildNewItem(), buildNewItem()} <--Use {} to separate rows
                           }));

} 
```

输出：

```
[[0, 1, 2], [3, 4, 5]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:29:42.637

手动：

```
Object[][] obj = new Object[ROWS][COLS];
for(int i = 0 ; i < ROWS ; i++) {
    for(int j = 0 ; i < COLS; j++) {
        obj[i][j] = buildNewItem(someValue);
    }
} 
```

# qt - 静态 Qt 构建隐秘错误

> ID：12893626
> 
> 赞同：0
> 
> 时间：2012-10-15T10:22:45.673
> 
> 标签：qt, build, makefile, g++, mingw32

我正在尝试使用 mingw32-make (gcc 4.7.0) 对 Qt (4.8.1) 进行静态构建，以便为了易于使用/交付而静态链接我的应用程序。

不过，我一直从 mingw32-make 收到一个奇怪的错误，我不明白。

```
../3rdparty/javascriptcore/JavaScriptCore/runtime/JSGlobalObject.h:270:103: warning: control reaches end of non-void function [-Wreturn-type]
Makefile.Release:2033: recipe for target 'obj/release/JSBase.o' failed
mingw32-make[2]: *** [obj/release/JSBase.o] Error 1
mingw32-make[2]: Leaving directory 'C:/StaticQt/qt/src/script'
Makefile:34: recipe for target 'release' failed
mingw32-make[1]: *** [release] Error 2
mingw32-make[1]: Leaving directory 'C:/StaticQt/qt/src/script'
Makefile:1360: recipe for target 'sub-script-sub_src_target_ordered' failed
mingw32-make: *** [sub-script-sub_src_target_ordered] Error 2 
```

查看相关的 Makefile.Release 文件，在指示的行上，我发现这些：

```
Makefile.Release 2033: $(CXX) -c $(CXXFLAGS) $(INCPATH) -o obj/release/JSBase.o ../3rdparty/javascriptcore/JavaScriptCore/API/JSBase.cpp
Makefile.Release 1360: $(CXX) -c $(CXXFLAGS) $(INCPATH) -o obj/release/pcre_compile.o ../3rdparty/javascriptcore/JavaScriptCore/pcre/pcre_compile.cpp
Makefile 34: $(MAKE) -f $(MAKEFILE).Release 
```

我真的对makefile知之甚少，所以不知道这些行是什么意思。对此的任何帮助将不胜感激。

编辑：我刚刚想到它可能对人们了解我使用的命令行参数很有用......好吧，我遵循了这个指南：[http ://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows](http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:33:29.560

由于某种原因，代码中存在语法错误。在我下载它之前，一定有人用错误的代码更新了 Qt Git。我从其他地方获得了代码，并设法使用 Visual Studio 的 nmake 来编译它……结果证明我使用的是 mingw 还是 vc2008 并不重要。

# python - 如何从python中的特定文件夹导入多个文件

> ID：12893628
> 
> 赞同：1
> 
> 时间：2012-10-15T10:22:56.303
> 
> 标签：python, import

我是 Python 新手，遇到一个不知道如何解决的问题

我需要编写一个模块（目录`C:/Python`），它能够导入和执行`.py`位于其他文件夹（例如`C:/Python/Dir`）中的所有文件。我知道如何访问目录 ( `sys.path.append('C:\\Python26\\Dir')`)，但是如何创建一个能够`.py`从该文件夹导入所有文件的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:40:04.310

您应该真正将[`__import__`](http://docs.python.org/library/functions.html#__import__)内置函数与[`glob`](http://docs.python.org/library/glob.html)：

```
os.chdir(path)
for file in glob.glob('*.py')
    __import__(file[:-2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:53:42.260

如果您通过某个 glob 导入目录中的所有文件，您如何在没有名称的情况下访问这些模块内容？也许有一种方法可以获取所有导入的模块，即使它们是匿名的（请参阅[返回脚本中使用的导入 Python 模块的列表？](https://stackoverflow.com/questions/2572582/return-a-list-of-imported-python-modules-used-in-a-script) - 这不是一件容易的事），但是明确列出它们不是更容易吗？

也许你可以`__init__.py`在你的目录中创建一些文件，并在那里明确列出导入的文件以及适当的模块名称。

# microsoft-metro - 如何在 Windows 8 Metro 应用程序中获取设备 ID

> ID：12893637
> 
> 赞同：2
> 
> 时间：2012-10-15T10:23:27.577
> 
> 标签：microsoft-metro, windows-runtime

如何在 Windows Store App (Metro App) 中获取唯一设备？

我们可以使用：

**Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);**

```
 Windows.System.Profile.HardwareToken hToke = Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);
IBuffer hardwareId = hToke.Id;
IBuffer signature = hToke.Signature;
IBuffer certificate = hToke.Certificate;
DataReader reader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);
byte[] ar = new Byte[hardwareId.Length];
reader.ReadBytes(ar);
string i = ar.ToString();
string id = System.Text.Encoding.Unicode.GetString(ar, 0, ar.Length);
System.Diagnostics.Debug.WriteLine("ID" + Convert.ToBase64String(ar)); 
```

**找到的第一个网络适配器的网络适配器 ID**

```
IReadOnlyCollection<Windows.Networking.Connectivity.ConnectionProfile> profiles =
Windows.Networking.Connectivity.NetworkInformation.GetConnectionProfiles();
Windows.Networking.Connectivity.NetworkAdapter na = profiles.First<Windows.Networking.Connectivity.ConnectionProfile>().NetworkAdapter;
string nid =  na.NetworkAdapterId.ToString(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:45:12.010

是的，这是一个[建议](http://www.wadewegner.com/2012/09/getting-the-application-id-and-hardware-id-in-windows-store-applications/)的方式：

```
 private string GetHardwareId()
    {
        var token = HardwareIdentification.GetPackageSpecificToken(null);
        var hardwareId = token.Id;
        var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);

        byte[] bytes = new byte[hardwareId.Length];
        dataReader.ReadBytes(bytes);

        return BitConverter.ToString(bytes);
    } 
```

或者，您对这种方法有疑问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-28T19:31:53.403

这是我发现的另一种方式：

```
Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation deviceInfo = 
  new Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation();

var myDeviceID = deviceInfo.Id; 
```

# android - 如何向我的 Android 应用程序插入和获取 .NET Web 服务数据对象

> ID：12893638
> 
> 赞同：0
> 
> 时间：2012-10-15T10:23:27.317
> 
> 标签：android, web-services, android-intent, ksoap2, android-ksoap2

我在 .NET 中有一个 Web 服务，它从数据库中插入和检索数据作为对象。我将在此处复制 Web 服务的某些部分。

```
 [WebMethod(Description = "This is used to insert details into sql server")]

    public string InsertDetails(DataTable myDetails, string STR1)
    {
        try
        {
            foreach (DataRow row in myDetails.Rows)
            {
                SqlCommand cmd = new SqlCommand();
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "dbo.InsertQry";
                cmd.Parameters.Add(new SqlParameter("@P_no", row["POD_Number"].ToString()));
                cmd.Parameters.Add(new SqlParameter("@P_id", STR1));
                cmd.Parameters.Add(new SqlParameter("@P_author", Convert.ToInt64(row["P_author"])));

                //opening the connection
                cmd.Connection = sqlCon;
                sqlCon.Open();
                int retValue = cmd.ExecuteNonQuery();
                sqlCon.Close();
                if (retValue == 0)
                    return "false";
            }
            return "true";
        }

        catch (Exception ex)
        {
            ErrorLogger(ex);
            return "false";
        }
    } 
```

//------------------------------------------------ ------------------------------------
[WebMethod(Description = "这是用来从sql server获取详细信息的")]

```
 public DataSet GetDetails(string STR1)
    {
        DataSet ds = new DataSet();
        try
        {
            SqlCommand cmd = new SqlCommand();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "dbo.SelectQryFromDB";
            //opening the connection
            cmd.Connection = sqlCon;
            sqlCon.Open();
            ds.DataSetName = "myTbl";
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds,"myTbl");
            sqlCon.Close();
            return ds;
        }

        catch (Exception ex)
        {
            ErrorLogger(ex);
            ds.DataSetName = "Error";
            return ds;
        }
    } 
```

//----------------------------

任何人通过向我提供详细信息来帮助我，我如何在 Android 中发送这些数据和检索数据。这是我的第一个应用程序，所以我不太了解？请提供详细信息，以便我可以使用网络服务插入和获取数据？

我听说过 kSOAP2，我正在尝试通过使用 kSOAP2 来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:47:39.973

有时工作`Ksoap`可能具有挑战性。您首先需要确保您的 Web 服务工作正常并为您提供正确的结果。

如果这样做了，那么您可以使用`ksoap`库从 Android 中使用相同的内容。

以下是一些有助于解决您的问题的链接：

1)[如何从 Android 移动应用程序调用本地网络服务](https://stackoverflow.com/questions/7860887/how-to-call-a-local-web-service-from-an-android-mobile-application)将帮助您了解如何`Ksoap`拨打电话。

2)[通过 ksoap 从 Android 将数据插入远程数据库](https://stackoverflow.com/questions/8075626/pass-an-array-to-a-soap-web-service-for-inserting-into-remote-database)

3）[从服务器返回数据到Android](https://stackoverflow.com/questions/8213654/json-string-returned-from-soap-web-service-containing-no-records-for-table)

# flash - 如何在我的 Adob e AIR 应用程序中消除对 http://fpdownload.adobe.com/pub/swz/crossdomain.xml 的调用？

> ID：12893640
> 
> 赞同：5
> 
> 时间：2012-10-15T10:24:07.543
> 
> 标签：flash, air, adobe, policy, rsl

我有一个 Adob​​e AIR 应用程序，并在某个时候发出警告：

警告：忽略来自[http://fpdownload.adobe.com/pub/swz/crossdomain.xml](http://fpdownload.adobe.com/pub/swz/crossdomain.xml)的策略文件中的“安全”属性。'secure' 属性只允许在 HTTPS 和套接字策略文件中使用。有关详细信息，请参阅[http://www.adobe.com/go/strict_policy_files](http://www.adobe.com/go/strict_policy_files)。

此时我没有在代码中直接加载任何外部文件。我也尝试将 static-link-runtime-shared-libraries 设置为 true，这似乎没有什么区别。

我想知道还有什么可能导致这个请求，以及如何消除它。我的应用程序应该能够在没有 Internet 连接的情况下运行，但是这个请求基本上阻止了这种能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:04:17.807

有相同的错误消息，通过删除对我的asset.swf中未包含的字体的引用来解决它

在 FD 4.2.4 中本地运行，parent.swf 将asset.swf 作为资源库加载。asset.swf 有包含在库中的带有文本字段和字体的动画剪辑，它们被指定为 Font 1*、Font 2* 等。其中一个文本字段引用了“Times New Roman”，但未包含在内。删除此文本字段使一切恢复正常！

希望这可以帮助任何有相同错误消息的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T21:15:27.787

在 Flash Professional 中，此错误可能是由于 TLF 文本...

# java - netty - 多播通道可以接收或发送，但不能同时接收

> ID：12893641
> 
> 赞同：2
> 
> 时间：2012-10-15T10:24:21.570
> 
> 标签：java, netty

我正在尝试使用 netty 创建一个多播通道，我可以使用它发送和接收多播组的消息。
我像这样创建了引导实例

```
channelFactory = new OioDatagramChannelFactory( workerExecutor );
bootstrap = new ConnectionlessBootstrap( channelFactory );
bootstrap.setOption( "broadcast", true );
bootstrap.setOption( "reuseAddress", true ); 
```

稍后频道是这样创建的

```
DatagramChannel channel;
channel = (DatagramChannel) bootstrap.bind( new InetSocketAddress( mcastPort) );
channel.joinGroup( multicastAddress ); 
```

使用此代码，我可以接收多播组的消息，但一个简单`channel.write();`的 NPE 失败。

```
java.lang.NullPointerException: null address || null buffer
    at java.net.TwoStacksPlainDatagramSocketImpl.send(Native Method)
    at java.net.DatagramSocket.send(DatagramSocket.java:675)
    at org.jboss.netty.channel.socket.oio.OioDatagramWorker.write(OioDatagramWorker.java:121)
    at org.jboss.netty.channel.socket.oio.OioDatagramPipelineSink.eventSunk(OioDatagramPipelineSink.java:84)
    at *.*.*PacketHandler.writeRequested(*PacketHandler.java:72)
    at org.jboss.netty.channel.Channels.write(Channels.java:611)
    at org.jboss.netty.channel.Channels.write(Channels.java:578)
    at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:251)
    at org.jboss.netty.channel.group.DefaultChannelGroup.write(DefaultChannelGroup.java:261) 
```

由于异常表明事件没有指定远程地址。
因为我不想在我调用的每个写入请求上传递多播地址`Channel#connect`。

```
DatagramChannel channel;
channel = (DatagramChannel) bootstrap.bind( new InetSocketAddress( mcastPort) );
channel.joinGroup( multicastAddress );
channel.connect( new InetSocketAddress(multicastAddress, mcastPort) ); 
```

现在发送消息完美无缺，但我不再收到消息。

*我究竟做错了什么？*我正在使用 netty 3.2.7.Final

**编辑**
以下是我对所描述的 netty 行为的期望。
*它们是有效的还是我误解了什么？*

```
// DatagramSocket bound to network interface "192.168.0.15" and port 12345
channel = (DatagramChannel) bootstrap.bind( new InetSocketAddress( "192.168.0.15", 12345) );
// Send IGMP Join to "239.195.255.255" in order to receive multicast packets
channel.joinGroup("239.195.255.255");

// Possibility 1
// Channels remote address gets set
channel.connect(new InetSocketAddress("239.195.255.255", 12345));
// packets gets send over interface "192.168.0.15" port 12345 to "239.195.255.255:12345"
channel.write(something);

// Possibility 2
// Send packet to explicit address
channel.write(something, new InetSocketAddress("239.195.255.255", 12345)); 
```

# stack - 变量的名称和数据本身是否都存储在堆栈中？

> ID：12893645
> 
> 赞同：1
> 
> 时间：2012-10-15T10:24:41.367
> 
> 标签：stack

我的问题是：变量的名称和数据本身是否都存储在堆栈中？

我想知道变量的名称如何链接到堆栈中的地址内存（数据）以及它的作用。

另外，如何知道变量类型由多少字节组成，以及它如何决定读取堆栈中这些确切的字节数？

存储在堆栈中的所有数据是否占用相同的空间，无论它是什么类型的数据？

堆也有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:36:20.607

一般来说，我相信以下在大多数实际实现中都是正确的：

不，名称和实际数据并非都存储在堆栈中。

编译器跟踪变量在堆栈上的位置，当编译器完成时，对变量的所有引用（即名称）都已被堆栈指针的适当增加/减少所取代，以寻址其中的内存区域。数据被存储。

不，它们不占用相同的空间。一个 4 字节的 var 占用 4 个字节。一个 1000000 字节的变量占用 1000000 字节（但通常不建议这样做）。

堆有点不同......也许这个页面可以回答你的问题更多： http: [//www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap](http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap)

# ios - 如何从另一个函数更新单元格图像？

> ID：12893648
> 
> 赞同：0
> 
> 时间：2012-10-15T10:24:50.167
> 
> 标签：ios, uitableview

我有一个聊天应用程序，我想在其中显示在线成员和离线成员。现在我为在线会员添加一个绿点，像这样的单元格图像：

```
UIImage *cellImage = [UIImage imageNamed:@"green.png"];
cell.imageView.image = cellImage;
[cell.imageView setTag:102];
//NSStringEncoding encoding=NSASCIIStringEncoding;
cell.imageView.frame=CGRectMake(0,0,13,13);
cell.imageView.bounds=CGRectMake(0,0,13,13);
[cell.imageView setClipsToBounds:NO]; 
```

现在，当用户离线时，我想将此图像更改为红色。现在我在触发函数中从表格视图中删除离线用户：

```
[self.tableView beginUpdates];
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[channel.memberIDs indexOfObject:memberID] inSection:0]]
                      withRowAnimation:UITableViewRowAnimationTop];
[self.tableView endUpdates]; 
```

但现在我不想做删除过程。我想更改`red.png`我所拥有的图像。谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:35:43.690

这可以通过以下方式实现：

1.  检查用户是在线`cellForRowAtIndexPath:`还是离线，并根据该图像将图像分配给 imageView。
2.  当任何用户离线时，只需使用重新加载您的表格视图`[yourTableView reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:38:52.753

```
NSArray *cellArray = (NSArray *) [[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[channel.memberIDs indexOfObject:memberID] inSection:0]] ];

    for (int i = 0 ;i < [cellArray count] ;i++) {
        NSIndexPath *indexPath = [cellArray objectAtIndex:i];

        UITableViewCell *cell = [ self.tableView cellForRowAtIndexPath:indexPath];

         UIImage *cellImage = [UIImage imageNamed:@"red.png"]; //image changed to red
        cell.imageView.image = cellImage;

    }

[self.tableView reloadData]; 
```

此代码应将单元格图像更改为红色图像。对于要更改的单个单元格图像（即，如果不需要单元格数组），请删除 for 循环并更改
`NSIndexPath *indexPath = [cellArray objectAtIndex:0];`

# delphi - 如果路径中有空格，ShellExecute 失败

> ID：12893650
> 
> 赞同：5
> 
> 时间：2012-10-15T10:24:55.273
> 
> 标签：delphi, windows-xp, filepath, shellexecute

我有一个 Delphi 应用程序，它使用 ShellExecute 在按下按钮时调用第二个 Delphi 应用程序。

应用程序存储在同一台服务器上，位于同一网络共享上。它们的路径格式为：

```
const
   JobManager = 'Z:\Apps\Application 1\Application1.exe';
   FeeManager = 'Z:\Apps\Application 2\Application2.exe'; 
```

对 ShellExecute 的调用如下：

```
rh := FindWindow(PChar('TMF'), PChar('Edit Job Details'));
if rh = 0 then
begin
   ShellExecute(Handle, 'open', JobManager, nil, nil, SW_SHOWNORMAL);
   ... 
```

由于我们有三个办公室，我们在每个办公室服务器上都有 Apps 文件夹的副本。每台服务器的共享文件夹上都有映射到“Z:”的应用程序文件夹

在其中一个办公室中，我们发现了一个问题，即如果路径包含空格，则无法找到应用程序。由于应用程序是彼此的直接副本，并且在其他办公室工作，问题似乎是机器设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T15:41:00.473

使用您的`lpFile`参数，您应该转换`JobManager`为`PChar`：

```
ShellExecute(Handle, 'open', PChar(JobManager), nil, nil, SW_SHOWNORMAL); 
```

请注意，`open`动词参数也不是必需的，您可以`nil`使用`lpOperation`参数（默认）传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T13:53:46.190

它适用于双引号：

```
WinExec(PAnsiChar(AnsiString(ExtractFilePath(application.ExeName) + '\winrar.exe A  "c:\BACKUP 2016\backup_"' ..... 
```

# asp.net - 这是如何用 ASP.NET 页面生命周期解释的？

> ID：12893651
> 
> 赞同：0
> 
> 时间：2012-10-15T10:25:01.817
> 
> 标签：asp.net, lifecycle, page-lifecycle

我有以下代码，它只是根据一些文本字段和下拉列表将记录插入数据库。下拉列表绑定在页面加载事件中。

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    try
    {
        Personeel p = new Personeel();
        p.achternaam = txtNaam.Text;
        p.naam = txtVoornaam.Text;
        p.fk_afdeling_id = Convert.ToInt16(cmbAfdeling.SelectedValue);

        BLLpersoneel BLLp = new BLLpersoneel();
        BLLp.insert(p);
        lblFeedback.Text = "Done and done!";
        rptPersoneel.DataBind();
    }
    catch (Exception err)
    {
        lblFeedback.Text = err.Message;
    }
}
protected void Page_Load(object sender, EventArgs e)
{
    if(Page.IsPostBack == false)
    { 
    BLLafdeling BLLa = new BLLafdeling();
    cmbAfdeling.DataSource = BLLa.selectAll();
    cmbAfdeling.DataTextField = "naam";
    cmbAfdeling.DataValueField = "afdeling_id";
    cmbAfdeling.DataBind();
    }
} 
```

我的问题是关于 IsPostBack。首次加载时，页面没有 PostBack，因此它将数据绑定到下拉菜单“cmbAfdeling”。

然后，在提交表单时，有一个回发，所以我们没有到达 if 语句中的代码。对我来说，这意味着 ASP.NET 不会将数据绑定到组合框。

但是，提交后数据仍然存在（因此有回发）。

这是如何解释的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:28:51.780

这是由于`ViewState`. 中的数据`ComboBox`存储在 中，`ViewState`并在回发期间来回发送。

这可能值得一读以了解正在发生的事情：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:27:57.147

它由一个名为**viewstate**的概念来解释：

如果您检查您的 ASP 生成的代码，您会发现一些隐藏字段，其中之一是“视图状态”。视图状态保存您的 asp 的重要值，以便能够在每次加载页面时填充元素，即使是在回发之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:28:45.803

数据在回发期间被维护，因为您在回发期间不清除数据，或者在加载时它会持续存在。

# symfony - 如何从实体内部获取 Web 目录路径？

> ID：12893657
> 
> 赞同：4
> 
> 时间：2012-10-15T10:25:33.987
> 
> 标签：symfony, symfony-2.1

我研究了[如何使用 Doctrine 处理文件上传，](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)我不想硬编码`__DIR__.'/../../../../web/'.$this->getUploadDir();`路径，因为将来我可能会更改`web/`目录。怎么做更灵活？我发现[了这个](https://stackoverflow.com/questions/9265788/how-to-get-the-server-path-to-the-web-directory-in-symfony2)，但它没有回答如何从实体内部更灵活地做到这一点的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T10:42:09.400

您不应该在这里使用实体类作为表单模型。它根本不适合那个工作。如果实体具有该`path`属性，则它可以存储的唯一有效值是：（`null`如果缺少文件）和表示文件路径的字符串。

1.  创建一个单独的类，这将是您表单的模型：

    ```
    class MyFormModel {
         /** @Assert\File */
         private $file;

         /** @Assert\Valid */
         private $entity;

         // constructor, getters, setters, other methods
    } 
    ```

2.  在您的表单处理程序（通过 DIC 配置的单独对象；推荐）或控制器中：

    ```
    ...
    if ($form->isValid()) {
        /** @var \Symfony\Component\HttpFoundation\File\UploadedFile */
        $file   = $form->getData()->getFile();

        /** @var \Your\Entity\Class */
        $entity = $form->getData()->getEntity();

        // move the file
        // $path = '/path/to/the/moved/file';

        $entity->setPath($path);

        $someEntityManager->persist($entity);

        return ...;
    }
    ... 
    ```

在表单处理程序/控制器中，您可以从 DIC 访问任何依赖项/属性（包括上传目录的路径）。

* * *

您链接的教程有效，但它是糟糕设计的一个例子。实体**不**应该知道文件上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T16:50:57.003

要从控制器外部访问根目录，您只需在服务配置中注入 '%kernel.root_dir%' 作为参数即可。

```
service_name:
    class: Namespace\Bundle\etc
    arguments: ['%kernel.root_dir%'] 
```

然后你可以在类构造函数中获取web根：

```
public function __construct($rootDir)
{
    $this->webRoot = realpath($rootDir . '/../web');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T14:45:26.930

您可以在 parameters.yml 中使用变量。像这样，您可以根据需要更改路径。

例如 ：

```
# app/config/parameters.yml
# Upload directories
upload_avatar_dir:        /uploads/avatars
upload_content_dir:       /uploads/content
upload_product_offer_dir: /uploads/product-offer
... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-30T03:23:35.210

我通过创建一个抽象类来处理这个问题，如果实体按照 Symfony 文档中的描述处理文件上传，它们可以扩展该类。我创建了 files 数组，以便可以在 set 方法中创建现有文件路径的副本，以便在成功更新或删除时将其从文件系统中删除，而无需在实体中定义任何其他属性。

```
use Symfony\Component\HttpFoundation\File\File;

abstract class FileUploadEntity
{
    private $files;

    public function __set($name, File $value)
    {
        $this->files[$name] = $value;
    }

    public function __get($name)
    {
        if (!is_array($this->files)) $this->files = array();

        if (!array_key_exists($name, $this->files)) {
            return null;
        }
        return $this->files[$name];
    }

    public function getUploadRootDirectory()
    {
        return $this->getWebDirectory() . $this->getUploadDirectory();
    }

    public function getWebDirectory()
    {
        return __DIR__ . "/../../../../web/";
    }

    public function getUploadDirectory()
    {
        $year = date("Y");
        $month= date("m");

        return "images/uploads/$year/$month/";
    }

    public function getEncodedFilename($name)
    {
        return sha1($name . uniqid(mt_rand(), true));
    }

    // this should be a PrePersist method
    abstract public function processImages();

    // This should be defined as a Doctrine PreUpdate Method
    abstract public function checkImages();

    // this should be a PostPersist method
    abstract public function upload();

    // this should be a PostUpdate method and delete old files
    abstract public function checkUpload();

    // This should be a PostRemove method and delete files
    abstract public function deleteFile();
} 
```

# ios - 键盘部分显示ios6

> ID：12893660
> 
> 赞同：4
> 
> 时间：2012-10-15T10:25:43.590
> 
> 标签：ios, keyboard, ios6

我一直无法解决为什么我的应用程序中的键盘部分出现在屏幕上或根本不出现。它只是一个简单的视图控制器；

```
[self presentViewController:vc_browser animated:YES completion:^{}]; 
```

我第一次展示它，一切正常。然后我将其关闭

```
[self dismissModalViewControllerAnimated:NO]; 
```

当再次（和进一步）展示这个 $#%! 发生。从通知中登录键盘框架

2012-12-30 00:40:21.618 测试 [12080:907] 键盘框架原始 {{160, 443}, {0, 44}}

2012-12-30 00:40:21.619 测试 [12080:907] 键盘框架转换 {{320, 886}, {0, 88}}

2012-12-30 00:40:21.836 测试 [12080:907] 键盘框架原始 {{0, 524}, {320, 44}}

2012-12-30 00:40:21.837 测试 [12080:907] 键盘框架转换 {{0, 1048}, {640, 88}}

在下图中，焦点在 webView 内部（实际上是 google 搜索字段）

如果我将焦点移到键盘矩形上方的文本字段，则记录为 {{inf, inf}, {0, 0}}

viewWillAppear 和 viewDidAppear 没有实现

呈现的视图控制器以这种方式加载

```
_vc = [[VC alloc] initWithNibName:@"VC" bundle:nil]; 
```

我尝试从其他 xib 或其他情节提要加载此视图控制器，但问题仍然存在。

解决这个问题的任何帮助都会很棒。谢谢。

[http://i.stack.imgur.com/xBNZt.png](http://i.stack.imgur.com/xBNZt.png)

无法发布代表 < 10 的图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:34:26.673

我也有同样的问题。我不知道如何对您的问题发表评论（我还是 Stack Overflow 的新手），所以我提供了迄今为止我发现的部分答案。仍在研究完整的解决方案。

使用 Xcode 4.5.1，我的应用程序使用 iOS 6。这是一个使用 Core Data 的通用应用程序，iPhone 端运行良好。iPad 端是拆分视图。从细节视图控制器，用户可以在拆分视图上打开一个完整的窗口来显示照片。关闭照片视图会将您返回到拆分视图。

下面是关于如何调用和关闭照片浏览器的代码。

```
[self presentViewController:photoBrowser animated:YES completion:nil];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

照片视图消失后是我遇到键盘问题的时候。

症状：具有 UITextFields 或 UITextViews 的后续视图不再自动显示键盘或键盘仅部分显示，如您的照片示例中所示。我使用 becomeFirstResponder 调出键盘。

```
[self.noteEdit becomeFirstResponder]; 
```

奇怪的是，如果我触及任何 UITextField，那么该视图中的所有文本字段都会消失。

我已针对此问题打开 Apple 技术支持事件 (TSI)。这是他们在 2012 年 10 月 12 日的回复。

> 我想向您介绍您的事件的最新情况。感谢您发送代码和示例数据库。我已经能够重现该问题。事实证明，细节视图控制器中消失的文本字段是键盘返回 UIKeyboardFrameEndUserInfoKey 无效数据的结果，导致您的代码将滚动视图框架设置为无效大小。我将继续寻找这种意外键盘行为的根本原因，并在我得到答案后立即回信。

我通过显示 UIKeyboardFrameEndUserInfoKey userInfo 值验证了他的回复。

```
NSLog(@"keyboardEndFrame orig.x=%f orig.y=%f size.w=%f, size.h=%f",
      keyboardEndFrame.origin.x, keyboardEndFrame.origin.y, keyboardEndFrame.size.width, keyboardEndFrame.size.height); 
```

果然，原点 x 和 y 的值都是“inf”。大小值设置为零。

现在我只需要知道这一切的原因。仍在研究中，但我会随时向您发布任何 Apple 的回复。到目前为止，这让我很难过。

PS...我的应用程序（iPhone 和 iPad）在 iOS 5 中运行良好。

**更新 - 2012 年 10 月 17 日：**

我的键盘问题的原因是我在实现 iOS 6 处理方向的新方式时出错。我将拆分视图控制器子类化为包括以下内容：

```
- (NSUInteger)supportedInterfaceOrientations {
return [[self splitViewController] supportedInterfaceOrientations];} 
```

更正后的代码是：

```
- (NSUInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationMaskPortrait;} 
```

当我的 Apple 技术支持事件回复以下内容时，有人向我指出了这一点：

> 我已经找到了您的键盘问题的根本原因。在SplitController.m中，方法supportedInterfaceOrientations调用：[[self splitViewController]supportedInterfaceOrientations]; 并返回收到的值。但是，拆分视图控制器的 splitViewController 属性为零，因为不允许拆分视图控制器内部其他拆分视图控制器。因此，返回值为 0，这是一个无效的方向掩码。

我的应用程序根据堆栈顶部的视图支持不同的方向类型，但我错误地编码了拆分视图控制器。

Apple 技术支持小组对我帮助很大。希望这些信息对您有所帮助。

干杯!

# c# - 根据变量整数输入，我可以使用什么算法来查找任何有效结果

> ID：12893665
> 
> 赞同：0
> 
> 时间：2012-10-15T10:25:58.877
> 
> 标签：c#, algorithm, matrix

在我的项目中，我面临一个场景，我有一个具有大量输入的函数。在某个时刻，我得到了一个结果，我需要找到一个生成该结果的输入组合。

这是一些说明问题的伪代码：

> 双 y = f(x_0,..., x_n)

我得到了 y，我需要找到适合输入的任何组合。

我在纸上尝试了几件可以产生某些东西的东西，但我的每个参数都有 6.5 x 10^9 的可能值范围 - 所以我想获得最佳执行时间。

有人可以说出对我有用的算法或主题，以便我可以了解其他人如何解决类似问题。

我正在考虑从输入创建一个向量并判断该向量对问题的适合程度。这听起来很像 NN，但没有可用的训练阶段。

编辑：谢谢大家的反馈。这些评论总结了我遇到的问题，我会尝试一些爬山的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:54:42.940

您的问题的一般情况可能无法解决，但在某些情况下，有一些**数值方法**可以帮助您解决问题。

例如，在 1D 空间中，如果您可以找到一个小于`y`和一个大于`y`的数字 - 您可以使用数值方法**[regula-falsi](http://en.wikipedia.org/wiki/False_position_method)**以数字方式找到“根”（`y`在您的情况下，通过只需调用`f(x) -y`) 上的方法。
我承认，其他求根的数值方法是**[newton-raphson](http://en.wikipedia.org/wiki/Newton%27s_method)**
，我不熟悉如何将这些方法应用于多维空间 - 但它可能是一个入门者。如果我是你，我会在文献中搜索这些。
注意：使用这种方法几乎总是需要一些函数知识。

另一种可能的解决方案是采用`g(X) = |f(X) - y)|`并使用一些**启发式算法**来找到 的最小值`g`。启发式方法的问题是它们会让你“足够接近”——但很少能让你准确地到达目标（除非函数是[凸](http://en.wikipedia.org/wiki/Convex_function)的）

一些优化算法是：[基因算法](http://en.wikipedia.org/wiki/Genetic_algorithm)，[爬山](http://en.wikipedia.org/wiki/Hill_climbing)，[梯度下降](http://en.wikipedia.org/wiki/Gradient_descent)（你可以在[数字上找到梯度](http://en.wikipedia.org/wiki/Numerical_differentiation)）

# mysql - 错误的MYSQL结果

> ID：12893666
> 
> 赞同：0
> 
> 时间：2012-10-15T10:26:04.163
> 
> 标签：mysql

我在这里有一个 var_dumped 查询，它显示了错误的结果。

```
select p.*
, case when p.specials_new_products_price >= 0.0000 
  and (p.expires_date > Now() or p.expires_date IS NULL) 
  and p.status != 0 then 
      p.specials_new_products_price 
  else 
      p.products_price 
end price 

from wp_global_products_table p 
INNER JOIN wp_blogs s ON s.blog_id = p.blog_id 
where p.products_name like '%indifi%' 
or p.products_description like '%indifi%' 
and s.countries_id = '168' 
and global_category_id = '15' 
and p.display_product = '1' 
and p.products_status = '1' 
order by p.products_date_added DESC, p.products_name" 
```

这是原始查询。

```
$catglobal_sql = "select p.*, case when p.specials_new_products_price >= 0.0000 and (p.expires_date > Now() or p.expires_date IS NULL or p.expires_date ='0000-00-00 00:00:00') and p.status != 0 then p.specials_new_products_price else p.products_price end price from ".TABLE_GLOBAL_PRODUCTS." p INNER JOIN ".TABLE_STORES." s ON s.blog_id = p.blog_id where MATCH (p.products_name,p.products_description) AGAINST ('%".$search_key."%') ".$country_q." ".$zone." ".$currency_type." ".$search_cat." and p.display_product = '1' and p.products_status = '1' ".$duration." ".$product_type." ".$price_range." order by p.products_date_added DESC, p.products_name";
if (!mysql_num_rows(mysql_query($catglobal_sql))) {
$catglobal_sql = "select p.*, case when p.specials_new_products_price >= 0.0000 and (p.expires_date > Now() or p.expires_date IS NULL) and p.status != 0 then p.specials_new_products_price else p.products_price end price from ".TABLE_GLOBAL_PRODUCTS." p INNER JOIN ".TABLE_STORES." s ON s.blog_id = p.blog_id where p.products_name like '%".$search_key."%' or p.products_description like '%".$search_key."%' ".$country_q." ".$zone." ".$currency_type." ".$search_cat." and p.display_product = '1' and p.products_status = '1' ".$duration." ".$product_type." ".$price_range." order by p.products_date_added DESC, p.products_name";
} 
```

说，我搜索数据库上可用的“Indifi”，Indifi 的`global_category_id`值为 3。

正如您在 var_dumped 结果中看到的那样，它`global_category_id`是 15，因此不应显示“Indifi”，但确实如此。

我的查询应该是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:29:40.347

尝试在此处使用括号：

```
...where (p.products_name like '%indifi%' 
or p.products_description like '%indifi%')
and s.countries_id = '168'
... 
```

这样你们就不会`OR`在一起太多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:30:04.797

```
where p.products_name like '%indifi%' OR p.products_description like '%indifi%' and s.countries_id = '168' and global_category_id = '15' and p.display_product = '1' and p.products_status = '1' 
```

我在那里看到一个`OR`，所以如果`p.products_name like '%indifi%'`，那么它是什么都没关系`global_category_id`。

要确定优先级，请使用括号`(... OR ...)`。

# jquery - 在大型应用程序中安排 jquery 事件绑定的正确方法

> ID：12893667
> 
> 赞同：0
> 
> 时间：2012-10-15T10:26:06.350
> 
> 标签：jquery, design-patterns, convention, code-readability, code-maintainability

在高度交互和动画客户端 Web 应用程序中工作时，我们高度依赖 jQuery 库并大量使用它们的事件。

在大型企业应用程序中，这导致事件、它们的回调以及进一步到它们的 4 位代码行的内部方法调用的大连接。这开始看起来像是一个装满面条的巨型容器或一个充满难以调试的 goto 标签的巨大程序。

我的问题是，我们如何才能以更干净、可读和可维护的方式安排事件、回调和相关过程？在 Java 中，我们可以有不同的设计模式和单独的类来处理这个问题。我们如何在javascript中实现这一点。

先感谢您。任何少数链接也将受到高度赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:31:04.023

尝试使用[require.js](http://requirejs.org/)依赖管理框架。

它帮助我管理我的 jquery 东西。

# .htaccess - 如果 URL 包含字符串，则重定向到页面

> ID：12893669
> 
> 赞同：1
> 
> 时间：2012-10-15T10:26:11.733
> 
> 标签：.htaccess, url, redirect, web

我的生意被买断了。因此，我们正在重新命名和更改我们网站的 URL。我有 2 个 URL 指向一个 Web 服务器（旧的、原始的 URL 和新的 URL），我想做的是在我的页面上有脚本来查看我的用户是否访问了旧的 URL。如果他们有，我希望他们被重定向到特定的 html 页面，告诉他们该站点已更改并且他们需要更新他们的收藏夹。我不希望重定向自动化。

基本上任何时候检测到旧 URL 我都希望他们重定向到重定向页面以通知他们

如果 URL 包含“dls.myOLDwebsite.co.uk”，则重定向到：“dls.mywebsite.co.uk/redirect.html”

我想这样做的原因是因为如果用户要访问新的正确地址（例如 dls.myNEWwebsite.co.uk），那么我不想要任何重定向或消息。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:42:28.277

我相信你正在寻找这个。

您需要将以下内容添加到您网站的 .htaccess 文件中

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REMOTE_HOST} dls.myOLDwebsite.co.uk ^
RewriteRule ^/$ http://dls.mywebsite.co.uk/redirect.html [R=301,L] 
```

# java - 存档中部署描述符文件 WEB-INF/web.xml 中的部署描述符无效

> ID：12893675
> 
> 赞同：0
> 
> 时间：2012-10-15T10:26:37.723
> 
> 标签：java, glassfish, glassfish-3

我正在处理使用 GlassFish 服务器的 Java 项目。项目中没有错误，但是当我尝试运行它时，它显示此错误_

```
SEVERE: DPL8015: Invalid Deployment Descriptors in Deployment descriptor file WEB-INF/web.xml in archive [web]. 
Line 9 Column 22 -- cvc-complex-type.2.4.d: Invalid content was found starting with element 'description'. No child element is expected at this point.
SEVERE: DPL8005: Deployment Descriptor parsing failure : cvc-complex-type.2.4.d: Invalid content was found starting with element 'description'. No child element is expected at this point.
SEVERE: Exception while deploying the app
java.io.IOException: org.xml.sax.SAXParseException: cvc-complex-type.2.4.d: Invalid content was found starting with element 'description'. No child element is expected at this point.
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:170)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:79)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:612)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.d: Invalid content was found starting with element 'description'. No child element is expected at this point.
    at com.sun.enterprise.deployment.io.DeploymentDescriptorFile.read(DeploymentDescriptorFile.java:304)
    at com.sun.enterprise.deployment.io.DeploymentDescriptorFile.read(DeploymentDescriptorFile.java:225)
    at com.sun.enterprise.deployment.archivist.Archivist.readStandardDeploymentDescriptor(Archivist.java:614)
    at com.sun.enterprise.deployment.archivist.Archivist.readDeploymentDescriptors(Archivist.java:366)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:238)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:247)
    at com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:208)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:148) 
```

出了什么问题，有人遇到这个问题吗？

```
Discriptor
<context-param>
    <param-name>tiles-definitions</param-name>
    <param-value>/WEB-INF/tiles.xml</param-value>
    <description> Tiles configuration definition files and a listener need to be defined. the
        listener will initialize JspTilesViewHandlerImpl with tiles definitions. 
    </description>
</context-param> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T10:49:25.063

根据[javaee](http://schemas.stylusstudio.com/j2ee50/n7e2eaf6a/complexType_param-valueType.html)`description`标签应该是第一个标签而不是最后一个

# html - TextInputCell：选项卡在 IE9 中无法正常工作

> ID：12893677
> 
> 赞同：0
> 
> 时间：2012-10-15T10:26:44.323
> 
> 标签：html, events, gwt, dom, internet-explorer-9

我需要在 celltable 中使用制表符。因此，我使用模板将 tabIndex 应用于 TextInputCell。

```
interface Template extends SafeHtmlTemplates {
    @Template("<input type=\"text\"  value=\"{0}\" tabindex=\"{1}\" />")
    SafeHtml getSimpleEditCell(String value,int tabIndex);
    }

public void render(Context context, String value, SafeHtmlBuilder sb) {
sb.append(template.getSimpleEditCell(value, tabIndex, width));  
} 
```

TAB 和`onChange`事件仅在 IE9 中无法正常工作。当我在谷歌上搜索这个问题时，我发现了一个[链接](https://stackoverflow.com/questions/5510907/help-ie9-onchange-event-doesnt-fire-when-value-is-modified-by-an-onkeydown-s)。所以我被困在这里。我已经更新了一些关于更改事件的交易。所以非常重要！有人有想法吗？或任何替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:10:43.877

它是通过从标签中删除标签索引属性来解决的。这在所有浏览器中都能正常工作。

`<input>,<select> or <checkbox>`如果 tabindex 属性被删除或分配给所有标签的 tabindex 值为 1000 。制表符在 celltable 中按预期工作。

# c++ - 从电子邮件正文调用 Win32 应用程序

> ID：12893678
> 
> 赞同：2
> 
> 时间：2012-10-15T10:26:44.873
> 
> 标签：c++, windows, winapi, mfc

我正在一个应用程序中工作。在此用户中输入他的电子邮件 ID 以获取某些应用程序设置。

一段时间后，他会收到嵌入了设置和应用按钮的邮件。一旦用户点击我们需要设置设置（在某些文件或注册表中）。

桌面应用程序将在启动后读取设置（文件/注册表）。

这是要求。我的问题是，

如何在单击带有设置参数的应用按钮时调用 Win32/MFC 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T10:53:37.550

出于显而易见的原因，您不能随意在电子邮件中执行某些内容。

您可以获得的最接近的集成是将配置数据作为参数传递给HTML 锚中的[自定义 URL 处理程序；](https://stackoverflow.com/questions/80650/how-do-i-register-a-custom-url-protocol-in-windows)您的里程可能会因浏览器/电子邮件客户端/网络邮件服务而有很大差异，所以这是一个坏主意。

最好将配置作为附件发送，并带有与您的应用程序关联的文件扩展名并告诉用户打开它，您的应用程序会读取配置文件并完成。

# android - android 透明菜单图标，ics 广告阴影

> ID：12893679
> 
> 赞同：1
> 
> 时间：2012-10-15T10:27:03.003
> 
> 标签：android, android-layout

我正在为我的应用程序使用透明图标。在带有 ICS 4.0.4 的三星 Galaxy Tab 10.1 上，问题是当我在应用程序菜单中时，android 添加了一个“阴影”，请参阅 img： ![呸呸呸](../Images/673380bd782b48ef095af7e51b8894de.png)

但是在启动器的首页上显示正常，请参见 img： ![在此处输入图像描述](../Images/34f8f6af437eec563a7de000541545b0.png)

它没有显示在模拟器中，但例如 google currents 应用程序在两个地方都显示正常，没有阴影，那么我做错了什么？我查看了 google currents 的标志，一个 72x72pixel 72dpi 和 32bit trasparent png，用 Gimp 做了同样的事情，没用

# jsf-2 - 无法将漂亮的面孔与 jsf 集成

> ID：12893681
> 
> 赞同：2
> 
> 时间：2012-10-15T10:27:21.413
> 
> 标签：jsf-2, prettyfaces

我需要将[漂亮的面孔](http://ocpsoft.org/prettyfaces/)与我的 jsf 2.0，primefaces 应用程序集成，但这会带来一些麻烦。

[如入门](http://ocpsoft.org/prettyfaces/#section-9)中所述，我将以下内容放在我的 web.xml 中，在 lib 文件夹中添加了所需的 jar

```
<filter>
  <filter-name>Pretty Filter</filter-name>
  <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
  <async-supported>true</async-supported>
 </filter>

 <filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
 </filter-mapping> 
```

我的 web.xml 中的其他项目

```
 <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <context-param>
        <param-name>com.sun.faces.expressionFactory</param-name>
        <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>
  </context-param>
  <context-param>
        <param-name>org.primefaces.extensions.DELIVER_UNCOMPRESSED_RESOURCES</param-name>
        <param-value>false</param-value>
  </context-param> 
```

但我收到以下错误：

`Invalid content was found starting with element 'async-supported'. One of '{"http://java.sun.com/xml/ns/javaee":init-param}' is expected`

如果我 `<async-supported>`从项目构建中删除，项目编译但映射不起作用。

`pretty-config.xml`与入门相同。

我是否需要在我的 web.xml 中提及映射文件的名称/路径，即 pretty-config.xml？

**编辑：**

我正在使用 Glassfish 服务器 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:58:40.363

检查`version`您在`web.xml`. 如果已`version="2.5"`设置，则必须将其添加到 web.xml：

```
<filter>
  <filter-name>Pretty Filter</filter-name>
  <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
</filter>
<filter-mapping> 
  <filter-name>Pretty Filter</filter-name> 
  <url-pattern>/*</url-pattern> 
  <dispatcher>FORWARD</dispatcher> 
  <dispatcher>REQUEST</dispatcher> 
  <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

请注意`<async-supported>true</async-supported>`这里没有设置，因为它仅在 Servlet 3.0 中受支持。

如果您已`version="3.0"`在 web.xml 中设置，则无需向 web.xml 添加任何内容。在这种情况下，PrettyFaces 使用`web-fragment.xml`包含在`prettyfaces-jsf2.jar`.

您不必指定`pretty-config.xml`任何地方的位置。只需将它放在您的`WEB-INF`文件夹中，PrettyFaces 就会找到它。

您还应该向您的 . 中添加一个映射`pretty-config.xml`，以便检查一切是否正常。例如，如果您有一个通常使用以下 URL 访问的页面：

```
http://localhost:8080/myapp/faces/login.xhtml 
```

然后你可以添加这个映射：

```
<url-mapping id="login">
  <pattern value="/login" />
  <view-id value="/faces/login.xhtml" />
</url-mapping> 
```

现在您应该可以使用此链接访问该页面：

```
http://localhost:8080/myapp/login 
```

# php - 如何在 PHP 中保持文件打开？

> ID：12893682
> 
> 赞同：1
> 
> 时间：2012-10-15T10:27:29.843
> 
> 标签：php, file-io, fopen, flat-file, database-server

> **可能重复：**
> [PHP 中的文件资源持久性](https://stackoverflow.com/questions/2234239/file-resource-persistence-in-php)

如果`fopen`用于打开文件，即使没有`fclose`.

```
$fp = fopen('data.txt', 'w');
fwrite($fp, 'text');
fclose($fp); 
```

现在如果它是一个经常使用的脚本，我们需要用文件系统打开/关闭文件太多次（文件 I/O）。最好保持文件打开。这是数据库系统使用的技术。

PHP中是否有一个函数可以让文件保持打开状态并且在下次运行时不重新打开它？

或者我们如何设置一个半服务器来保持打开文件以供 PHP 频繁访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:32:02.097

不——你不能。您可以在脚本/脚本的开头打开文件并在最后关闭它。您可以随心所欲地在开盘和收盘之间进行操作。例如，您可以在站点的页眉中打开文件，然后在页脚处关闭它。

要解决您需要的任务，您可能需要查看一个名为`memcahced`. 它将一些信息存储在机器的**RAM**中，以便您以后可以重复使用它们。您还可以添加每条信息的到期时间。

在这里看看这个模块：[http ://www.php.net/manual/en/book.memcached.php](http://www.php.net/manual/en/book.memcached.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:30:14.977

您可以使用[`flock()`](http://php.net/manual/en/function.flock.php). 自 PHP 5.3.2 以来，该文件一直处于锁定状态，直到显式解锁，因此您需要确保您运行代码的服务器上的 PHP 版本高于或至少 5.3.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:30:52.083

无法在同一脚本的连续执行之间保持文件打开（幸运的是：）

打开文件不是很密集，我怀疑不值得设置一个保持文件打开的“半服务器”。

你为什么需要那个？

# c# - 如何打开 RadWindow

> ID：12893686
> 
> 赞同：3
> 
> 时间：2012-10-15T10:27:41.647
> 
> 标签：c#, asp.net, c#-4.0, telerik, c#-3.0

我的代码：

```
<asp:ImageButton ID="btnAddReport" runat="server" OnClientClick="return AddFavoritePopup()"
ImageUrl="~/Content/images/add_favorite.jpg" Width="24px" Height="20px" 
style="vertical-align:middle"/>

    function AddFavoritePopup() {
    var radWindow = document.getElementById('AddFavoriteRadWindow');
    radWindow.show()
    }

      <telerik:RadWindowManager runat="server" ID="RadWindowManager2" Title="Add Favorite"
            Behaviors="Close" VisibleStatusbar="False" Modal="False">
            <Windows>
                <telerik:RadWindow ID="AddFavoriteRadWindow" Width="500" Height="300" VisibleOnPageLoad="false" CssClass="radwindow" runat="server">
                    <ContentTemplate>
                        <table>
                            <tr>
                                <asp:Label ID="lblFavorite" runat="server" Text="Favorites: "></asp:Label>
                                <asp:TextBox ID="txtReportFavorite" runat="server"></asp:TextBox>
                            </tr>
                            <tr>
                                <asp:Button ID="btnOk" runat="server" Text="OK" Width="50" Height="25" onclick="btnOk_Click" />
                                <asp:Button ID="btnCancel" runat="server" Text="Cancel" Width="50" Height="25" onclick="btnCancel_Click" />
                            </tr>
                        </table>
                    </ContentTemplate>
                </telerik:RadWindow>
            </Windows>
        </telerik:RadWindowManager> 
```

如何在脚本中打开 RadWindow。我尝试了显示功能。它没有打开。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:49:39.483

try this

```
 var oWnd = $find("<%=AddFavoriteRadWindow.ClientID%>");
    oWnd.show(); 
```

or alternate

```
 var oManager = GetRadWindowManager();       
    oManager.open(null, "AddFavoriteRadWindow"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:26:31.477

该窗口不会出现，因为在执行代码时，尚未完全呈现页面上的所有控件。

您可以做些什么来避免这种情况，即使用**Sys.Application.add_load函数将*****ShowWindow***函数与加载事件挂钩， 例如：

```
 protected void Button1_Click(object sender, EventArgs e) 
    { 
        string script = "<script language='javascript' type='text/javascript'>Sys.Application.add_load(ShowWindow);</script>"; 
        ClientScript.RegisterStartupScript(this.GetType(), "showWindoww", script);  
    } 
```

单击[此处](http://www.asp.net/ajax/documentation/live/ClientReference/Sys/ApplicationClass/SysApplicationLoadEvent.aspx)了解有关**Sys.Application.add_load的更多详细信息**

谢谢。

# c++ - 将整数与范围进行比较

> ID：12893697
> 
> 赞同：0
> 
> 时间：2012-10-15T10:28:39.143
> 
> 标签：c++, integer

有没有一种简单的方法来查看一个整数是否在一个范围内？

像

```
int x = 15;
if(x==1x)
{
std::cout << "Yes it falls in the range 10-19" << std::endl;
} 
```

据我了解，最接近的是

```
((x>9) && (x<20))?(std::cout << "Yes" << std::endl):(std::cout << "No" << std::endl); 
```

或类似的东西。

有类似第一种方式的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:31:15.507

不，除了您拥有的第二个版本之外别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:33:32.340

如果您要使用我会使用的包容性范围，`>=`并且`<=`（在我看来）它更适合范围检查。`if`然而，在 C++ 中，除了使用or`?:`和 and的条件`&&`表达式之外，没有聪明的方法来检查范围。

# javascript - js 匹配 - 获取路径中的文件扩展名

> ID：12893698
> 
> 赞同：1
> 
> 时间：2012-10-15T10:28:42.497
> 
> 标签：javascript, regex, match, point

如何使用 JavaScript 获取路径中的文件扩展名？

```
alert("http://max/fi.le.rar".match(/\..*/i)); 
```

从第一个点返回数据

```
.le.rar 
```

但我只需要.rar

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:30:39.313

试试这个：

```
"http://max/fi.le.rar".match(/\.[^.]+$/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:32:17.223

```
var path = "http://max/fi.le.rar";
var extention = path.substring(path.lastIndexOf("."), path.length); 
```

我用子字符串做了一个测试，并从@wisdom 中拆分出来。
500000次后：

.rar 执行时间：47ms（子）
rar 执行时间：53ms（不带点分割）
（经过多次测试，执行时间差不多）

* * *

我没有比赛经验

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:32:33.320

或者你可以像这样使用javascript`split()`函数

```
var str="http://max/fi.le.rar";
var n=str.split(".");
alert(n[n.length - 1]); 
```

# text-extraction - .net 中锅炉管的 HtmlHighlighter 并不总是返回文本

> ID：12893705
> 
> 赞同：2
> 
> 时间：2012-10-15T10:28:56.093
> 
> 标签：text-extraction, boilerpipe

我在我的应用程序中使用 Boilerpipe，当我尝试使用 ArticleExtractor 提取内容时，我只获取平面文本，所有 html 格式都已被删除，所以我尝试使用 HtmlHighlighter。但是 HtmlHighlighter 的处理方法对于某些 url 失败。是否有任何选项可以使用 html 字符串传递给此方法？谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T09:47:16.183

您可以使用[IKVM](https://www.ikvm.net/)将 Boilerpipe jar 转换为新的 DLL 以在您的 .NET 应用程序中使用。我正在使用这种方法，并且在发送 html 抛出不同的锅炉管方法时工作正常。

如果您尝试访问的页面内容是由 javascript 加载的，则简单的 http 请求无法处理此类信息。首先你需要在 javascript 更改后获取结果 html，然后将其提供给boilerpipe。

# youtube-api - 检索视频信息并链接到 mp4

> ID：12893706
> 
> 赞同：2
> 
> 时间：2012-10-15T10:28:56.910
> 
> 标签：youtube-api

是否有任何关于[http://www.youtube.com/get_video_info?video_id=XXX](http://www.youtube.com/get_video_info?video_id=XXX)的文档？

大约一周以来，我似乎不再获得正确的信息。我正在使用`url_encoded_fmt_stream_map`响应流中的属性来获取我的视频的 mp4 类型的视频链接的 url。但是这个属性现在返回一个空值。

功能有什么改变`get_video_info`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:16:24.203

`get_video_info`端点不是，也从来不是，受支持的公共 API 。

如果您想播放 YouTube 内容，您需要使用官方的 YouTube 播放器之一：

[https://developers.google.com/youtube/getting_started#player_apis](https://developers.google.com/youtube/getting_started#player_apis)

# c# - 如何在 Windows 窗体 C# 中将大量数据保存在内存中

> ID：12893715
> 
> 赞同：4
> 
> 时间：2012-10-15T10:29:38.690
> 
> 标签：c#, winforms, memory, datatable

我目前将大约一百万行存储到 DataTable 中，这需要大约 600 Mb RAM。

因此，当您运行应用程序时，它会在 DataTable 中存储 1 000 000 行并将其显示在 GridView 上。当您关闭应用程序时，这显然会清除内存。

我愿意给用户这个选项，换句话说，当用户试图关闭表单时，他会被问到是否要清除内存。

这样做的原因是他每次运行应用程序时不必等待数据被读入Datatable。

....我对 C# 相当陌生，所以如果这是一个合适的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:35:18.220

我建议您将其保存在文件或数据库中而不是内存中。您可以查询一些您想在运行时使用的数据。例如，一次 20 或 50 条记录。

如果您一次在数据网格中显示 1M 条记录是没有意义的，我敢打赌，即使您也不会浏览它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:51:07.887

如果有一个正在运行的应用程序/进程在内存中包含该数据，则您只能在内存中保留一些内容 - 如果您的应用程序关闭（并且只有 1 个应用程序实例在内存中打开该数据），那么内存将被释放。如果您想将其保存在内存中，那么您唯一的选择是

*   不要关闭您的应用程序，例如只是隐藏窗口（通常是一个非常糟糕的主意，您的用户不会感谢您）
*   将这些数据保存在另一个单独的进程中，即使您的应用程序不运行，该进程也会保持运行，例如 Windows 服务（同样可能不是您的用户会感谢您的东西，除非您实际上是在尝试开发一种服务形式反对 Windows 应用程序）。

一个更好的主意是改变您的应用程序处理大型数据集的方式，以便它不需要将所有数据都保存在内存中，例如，如果您在大型列表视图中显示所有数据，然后使用虚拟列表视图这样只有当前显示给用户的那些行才会加载到内存中。然后，您可以将数据存储在外部数据库或半永久性文件（例如 SQLite 数据库）中。

或者像现在一样每次加载数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T03:07:00.890

尝试压缩特定区域的数据（对象集对应于行）并在需要时提取。参考， [在点网中压缩对象](https://stackoverflow.com/questions/2092309/compressing-object-in-dot-net)

# iphone - 我应该在 iPhone 游戏中加密数据文件吗？

> ID：12893719
> 
> 赞同：0
> 
> 时间：2012-10-15T10:29:47.270
> 
> 标签：iphone, encryption, game-center

我正在为 iPhone 制作一个回合制游戏。我有几个问题。

1\. 我需要加密玩家之间发送的数据吗？

2\. 我还存储包含帮助数据的数据文件。例如，一个这样的文件演示了游戏控件。鉴于该文件中的数据，可能可以理解转弯数据中的数据，但我会说它相当复杂。我应该为这种安全问题烦恼吗？我想这些信息可以用来在排名中排名第一:)。我猜这些文件可以在越狱设备上查看？

3.如果我加密文件，那么作弊会被消除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:33:53.943

**1 / 2：**我认为您不应该为加密文件而烦恼。虽然它可以阻止它们被篡改，但如果你只是来回发送，那么没有任何实际意义。当然，它们可以被拦截和更改，但除非这是一些 AAA 游戏，更改此信息会影响很多玩家，否则我真的不明白这一点。

**3：**不，作弊不会被消除。即使您加密了某些东西，总有人能够找到绕过您加密的方法。当然，现在可能没有方法，但总有一天。

# indexeddb - “未捕获的错误：NOT_FOUND_ERR：DOM IDBDatabase 异常 3”错误

> ID：12893722
> 
> 赞同：0
> 
> 时间：2012-10-15T10:30:02.310
> 
> 标签：indexeddb

我正在尝试在函数中执行以下操作：

```
var transaction = db.transaction("CustDetails",IDBTransaction.READ_WRITE); 
```

给出如下错误：

```
"Uncaught Error: NOT_FOUND_ERR: DOM IDBDatabase Exception 3" 
```

我做了以下事情： 1\. 我已经声明了一个全局数据库。2\. 上述事务代码在一个函数中，数据库打开在另一个函数中，并被该函数调用。3\. 但是，我已经在全球范围内声明了以下内容。

```
var db;
var test = {};
test.indexedDB = {};
test.indexedDB.db = null; 
```

在执行以下操作后，我也收到了上面写的错误。可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:54:25.917

您需要先创建结构。

```
var conn = window.indexeddb.open("name", 1)
conn.onupgradeneeded =function (e){
   // Create the structure here
}
conn.onsuccess = function (e){
   db = e.target.result;
   db.transaction("CustDetails",IDBTransaction.READ_WRITE);
} 
```

这篇[文章](http://www.kristofdegrave.be/2011/10/indexed-db-defining-database-structure.html)告诉你如何定义你的结构，但请注意这是使用旧方法。这篇[文章](http://www.kristofdegrave.be/2012/01/indexed-db-defining-your-structure-new.html)告诉你新方法是如何工作的。

# django - 在自定义模板中显示 django 模型数据

> ID：12893725
> 
> 赞同：1
> 
> 时间：2012-10-15T10:30:11.297
> 
> 标签：django, django-models, django-templates

我有这样的 Django 模型

```
class District(models.Model):

name = models.CharField(max_length=30,unique=True)
number = models.PositiveIntegerField(null=True,blank=True)
def __unicode__(self):
    return "District (%s,%s)" % (self.name,self.number)
class Meta:
    db_table = 'districts' 
```

我可以输入地区名称及其编号。我想做的是查看这些已在我创建的自定义模板中输入的地区。目前，模板有一个使用 select 标签的下拉选项。我如何能够提取使用 django 模型输入的数据并将其显示在我创建的模板中。这是 html 模板中的当前代码片段

```
 <label for="district"> District</label>
    <select  id="district" name="district">
      <option id="kampala" value="k">Kampala</option>
      <option id="mbale" value="m">Mbale</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:40:52.630

在您的视图中，将 District 对象传递给视图的上下文，如下所示：

```
districts = Districts.objects.all()
return render_to_response('mytemplate.html',{'districts': districts}) 
```

然后在你的模板（mytemplate.html）中这样做：

```
<label for="district"> District</label>
<select  id="district" name="district">
  {% for dist in districts %}
  <option id="{{ dist.name }}" value="{{ dist.number }}">{{ dist.name }} </option>
  {% endfor %}
</select> 
```

我希望它有帮助！

# jquery - jQuery灯箱插件覆盖问题

> ID：12893729
> 
> 赞同：1
> 
> 时间：2012-10-15T10:30:26.547
> 
> 标签：jquery, html, forms, lightbox, kentico

我在使用灯箱插件时遇到了一个奇怪的问题，它的叠加层（通常在单击 时显示的灰黑色 bg `<a>`）显示在我的页面底部，并且在用户单击图像时不会关闭。这有点难以描述，所以这里有一张说明问题的图片：

![在此处输入图像描述](../Images/6fb3eb3a148e133d420e9fb903b049ef.png)

单击此按钮，然后在元素外部的页面底部创建叠加层，`<form>`图像进一步向下，如下所示：

![在此处输入图像描述](../Images/4bfc2d167fb899f289b77735fdf05a48.png)

渲染的图像标记如下所示：

```
<div id="lightbox-gallery">
   <ul>
      <li><a href="/what-does-it-do/submit-annual-returns/lightboxobjects/forbury-large1/" rel="lightbox[group]" rev="/What-does-it-do/Submit-Annual-Returns/LightboxObjects/forbury-large1" title="Fobury court"><img src="/getattachment/819283f6-7436-40dc-9401-9f8194efc0e8/forbury-large1?maxsidesize=150" alt="forbury-large1"></a></li>
   </ul>
</div> 
```

jQuery是：

```
$(function () {
    $('#lightbox-gallery ul li a').lightBox();
}); 
```

我在这里遗漏了一些明显的东西吗？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:39:30.840

您要导入 Lightbox Css 文件吗？似乎正确的样式未应用于叠加层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:32:04.977

您可以使用此处描述的非常基本的设置进行尝试（仅用于测试）

[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

我希望你使用相同的插件。

# ruby-on-rails - Herokuapp 延迟仅在免费堆栈上？

> ID：12893730
> 
> 赞同：0
> 
> 时间：2012-10-15T10:30:27.770
> 
> 标签：ruby-on-rails, heroku

我将免费的 Cedar 用于正在开发的应用程序。当我打开我的根目录`home%html`（还没有访问数据库）时，会有 3 到 5 秒或更长时间的延迟。

我付款时会解决这个问题吗？如果是，我应该升级到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:13:18.733

你会得到这个，因为如果 Heroku 在 1 小时内没有接收到流量，它将使应用程序处于空闲状态。[您可以在https://devcenter.heroku.com/articles/dynos](https://devcenter.heroku.com/articles/dynos)阅读更多相关信息。当您付款时，仅意味着您的应用程序不会闲置，因此您不会经历此启动时间。在您第一次点击您的应用程序后，它是否响应更快？

# clang - 为什么 clang -dumpversion 报告 4.2.1

> ID：12893731
> 
> 赞同：10
> 
> 时间：2012-10-15T10:30:29.020
> 
> 标签：clang, autotools

我试图使用 -dumpversion 来确定编译器是否可用。我的项目使用 clang 和更新的 gcc 编译，但不是使用旧的 gcc 4.2.1。

那么clang为什么要伪装成老gcc呢？

额外的问题，是否可以在运行时更改此值？

或者是否有人有一个不错的 autoconf 宏来确定带有 clang 和 gcc 的编译器版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T05:09:26.307

Clang 最初是为了与 gcc 4.2.1 兼容而编写的。今年早些时候有[一些关于更新该数字的讨论，但存在一些问题。](http://clang-developers.42468.n3.nabble.com/RFC-Bump-up-clang-s-GNUC-MINOR-td3982225.html)

对于 autoconf 检查，clang 建议使用它的[__has_feature 扩展](http://clang.llvm.org/docs/LanguageExtensions.html#__has_feature_extension)。Clang 的文档有一个[清单，你也可以用 __has_feature 检查](http://clang.llvm.org/docs/LanguageExtensions.html#checking_language_features)。

# asp.net - 从 ASP 启动/停止服务。网页

> ID：12893735
> 
> 赞同：4
> 
> 时间：2012-10-15T10:30:40.320
> 
> 标签：asp.net, windows-services, impersonation

我实现了一个网页（ASP .NET、VB）来启动/停止 Windows 服务。

我使用了拟人化，如此处所述：http: [//support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

页面读取服务状态时一切正常：

```
_domain = Me.TextBoxDomain.Text
_user = Me.TextBoxUserName.Text
_password = Me.TextBoxPassword.Text
_s = New ServiceController(Constant.ServiceName)
If impersonateValidUser(_user, _domain, _password) Then
    Me.LabelServerStatusValue.Text = _s.Status.ToString    
    undoImpersonation()
Else
    'Error
End If 
```

当页面尝试启动（或停止）服务时会出现问题：

```
_domain = Me.TextBoxDomain.Text
_user = Me.TextBoxUserName.Text
_password = Me.TextBoxPassword.Text
_s = New ServiceController(Constant.ServiceName)
If impersonateValidUser(_user, _domain, _password) Then
    If _s.Status = ServiceControllerStatus.Stopped And _s.Status <> ServiceControllerStatus.StartPending Then
        _s.Start()
        _s.WaitForStatus(ServiceControllerStatus.Running, TimeSpan.FromSeconds(5))
    End If
    undoImpersonation()
Else
    'Error
End If 
```

评论：

*   例外是“拒绝访问”，但模拟用户是相同的，无论是状态还是启动/停止
*   该用户与我登录PC的用户相同。我可以从服务控制台启动/停止用户

**任何的想法？**

我在 web.config 中添加了标识元素并且它可以工作，但我不希望整个应用程序模拟管理员用户（这只是一个测试）：

```
<identity impersonate="true" userName="domain\user" password="password"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:55:24.687

此处提出的解决方案[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158) 说

```
Dim LOGON32_LOGON_INTERACTIVE As Integer = 2
Dim LOGON32_PROVIDER_DEFAULT As Integer = 0

If LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE,LOGON32_PROVIDER_DEFAULT, token) <> 0 Then
    [...]
End if 
```

它对我不起作用。

我用 LOGON32_LOGON_SERVICE 替换了 LOGON_32_LOGON_INTERACTIVE：

```
Dim LOGON32_LOGON_INTERACTIVE As Integer = 2
Dim LOGON32_LOGON_NETWORK As Integer = 3
Dim LOGON32_LOGON_BATCH As Integer = 4
Dim LOGON32_LOGON_SERVICE As Integer = 5
Dim LOGON32_LOGON_UNLOCK As Integer = 7
Dim LOGON32_LOGON_NETWORK_CLEARTEXT As Integer = 8
Dim LOGON32_LOGON_NEW_CREDENTIALS As Integer = 9
Dim LOGON32_PROVIDER_DEFAULT As Integer = 0

If LogonUserA(userName, domain, password, LOGON32_LOGON_SERVICE,LOGON32_PROVIDER_DEFAULT, token) <> 0 Then
    [...]
End if 
```

它对我有用：ASP .NET 页面可以启动/停止服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T16:17:52.860

就我而言，LOGON32_LOGON_INTERACTIVE 和 LOGON32_LOGON_SERVICE 都不起作用。

但是， LOGON32_LOGON_NETWORK 对我有用。请注意，用户具有管理员权限，因此能够启动/停止 Windows 服务。

# makefile - Makefile - 来回编译

> ID：12893738
> 
> 赞同：2
> 
> 时间：2012-10-15T10:30:58.063
> 
> 标签：makefile, fortran90

以下是我的项目的目录结构：

```
 expt-main
                       ---------
                       Makefile_main
                    /             \
         subdir-1                    subdir-2
         --------                    --------
         Makefile_1                  Makefile_2
         mod_codeA.f90               mod_code1.f90
         mod_codeB.f90               mod_code2.f90
         mod_codeC.f90               mod_code3.f90 
```

Makefile_main：

```
export

SHELL = /bin/sh

F90     = mpxlf95

SRCDIRS = $(subdir-1) $(subdir-2)

all:
        @for DIR in ${SRCDIRS} ;

          do \
            back=`pwd`; \
            cd $$DIR ;\
            $(MAKE) ; status=$$? ; \
            if [ $$status != 0 ] ; then \
              echo "Exit status fro make was $$status" ; exit $$status ; \
            fi ; \
            cd $$back ; \
         done

-------------------------------------------------------------------------------

Makefile-1:

%.o: %.f90
        $(F90) $(F90FLAGS) -I$(subdir-2) -c $<

mod_codeA.o: mod_codeC.o $(subdir-2)/mod_code2.o

-------------------------------------------------------------------------------

Makefile-2:

PROG = $(exec)

subdir-1_objs = $(subdir-1)/mod_codeA.o mod_codeB.o mod_codeC.o

all: $(PROG)

$(PROG): $(subdir-2_objs) $(subdir-1_objs) -o $@ $(subdir-2_objs) $(subdir-1_objs)

--------------------------------------------------------------------------------- 
```

-

我编写了 Makefile_main 以便它首先编译 subdir-1 中的代码（模块），然后编译 subdir-2 中的代码（模块），最后编译为可执行文件。问题：subdir-1 中的模块使用 subdir-2 中的模块，并且以类似的方式，subdir-2 中的模块使用 subdir-1 中的模块。我的制作失败了，因为正在使用的模块在其他目录中。如何编写一个 makefile 来解决这个问题，即在 subdir-1 中编译模块时，每当遇到需要从 subdir-2 获取目标文件时，它应该切换到 subdir-2 编译必要的模块并返回返回 subdir-1 进行进一步操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:27:29.167

If modules in different subdirectories need each other as you say, then this is not a good use of recursive Make.

Do away with `Makefile-1` and `Makefile-2`, and let `Makefile_main` do all the work. (I can't tell you specifically how to change `Makefile-main`, since I don't do Fortran, I don't understand `Makefile-2`, and I don't see any dependency of modules in subdir-2 upon those in subdir-1).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:48:01.260

If you want to stick to this directory layout and still keep three separated Makefiles, then you can use compiler flags to instruct the FORTRAN compiler to put module files into a common directory of your choice.

For instance using:

```
$ gfortran --version
GNU Fortran (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc. 
```

you can use `-I` and `-J` flags to instruct the compiler on:

1.  where to search for module files (.mod)
2.  where to put generated module files

That said I think that the suggestion given by [Beta](https://stackoverflow.com/a/12896619/771663) to join the Makefiles makes a lot of sense. To know some of the reasons why you should do that you can read [this paper](http://aegis.sourceforge.net/auug97.pdf).

Finally, as your project seems not to be very large at this stage, I also suggest to take into consideration [CMake](http://www.cmake.org/cmake/project/about.html) as a build system, as it possibly provides a more convenient way of specifying dependencies between targets (as well as many other things).

# java - 返回的消息为空

> ID：12893739
> 
> 赞同：-4
> 
> 时间：2012-10-15T10:31:01.607
> 
> 标签：java

嗨，我的服务器有问题，每次我调用“dload”时，文件都会被下载，但我不能使用我拥有的其他命令，因为它们返回为空。谁能在代码中看到问题？

服务器 ：

```
public class TCPServer {

    public static void main(String[] args) {

        ServerSocket server = null;
        Socket client;
        // Default port number we are going to use
        int portnumber = 1234;
        if (args.length >= 1) {
            portnumber = Integer.parseInt(args[0]);
        }
        // Create Server side socket
        try {
            server = new ServerSocket(portnumber);
        } catch (IOException ie) {
            System.out.println("Cannot open socket." + ie);
            System.exit(1);
        }
        System.out.println("ServerSocket is created " + server);
        // Wait for the data from the client and reply

        boolean isConnected = true;

        try {
            // Listens for a connection to be made to
            // this socket and accepts it. The method blocks until
            // a connection is made
            System.out.println("Waiting for connect request...");
            client = server.accept();
            System.out.println("Connect request is accepted...");
            String clientHost = client.getInetAddress().getHostAddress();
            int clientPort = client.getPort();
            System.out.println("Client host = " + clientHost
                    + " Client port = " + clientPort);

            // Read data from the client
            while (isConnected == true) {

                InputStream clientIn = client.getInputStream();

                BufferedReader br = new BufferedReader(new InputStreamReader(
                        clientIn));
                String msgFromClient = br.readLine();
                System.out.println("Message received from client = "
                        + msgFromClient);

                // Send response to the client

                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("sum")) {
                    OutputStream clientOut = client.getOutputStream();
                    PrintWriter pw = new PrintWriter(clientOut, true);
                    Double[] list;
                    list = new Double[5];
                    String value;
                    int i;
                    try {

                        for (i = 0; i < 5; i++) {
                            pw.println("Input number in arrayslot: " + i);
                            value = br.readLine();
                            double DoubleValue = Double.parseDouble(value);
                            list[i] = DoubleValue;
                        }
                        if (i == 5) {
                            Double sum = 0.0;
                            for (int k = 0; k < 5; k++) {
                                sum = sum + list[k];
                            }
                            pw.println("Sum of array is " + sum);
                        }
                    } catch (NumberFormatException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("max")) {
                    OutputStream clientOut = client.getOutputStream();
                    PrintWriter pw = new PrintWriter(clientOut, true);
                    Double[] list;
                    list = new Double[5];
                    String value;
                    int i;
                    try {

                        for (i = 0; i < 5; i++) {
                            pw.println("Input number in arrayslot: " + i);
                            value = br.readLine();
                            double DoubleValue = Double.parseDouble(value);
                            list[i] = DoubleValue;
                        }
                        if (i == 5) {
                            Arrays.sort(list);
                            pw.println("Max integer in array is " + list[4]);
                        }
                    } catch (NumberFormatException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("time")) {
                    OutputStream clientOut = client.getOutputStream();
                    PrintWriter pw = new PrintWriter(clientOut, true);
                    Calendar calendar = GregorianCalendar.getInstance();
                    String ansMsg = "Time is:, "
                            + calendar.get(Calendar.HOUR_OF_DAY) + ":"
                            + calendar.get(Calendar.MINUTE);
                    pw.println(ansMsg);
                }
                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("date")) {
                    OutputStream clientOut = client.getOutputStream();
                    PrintWriter pw = new PrintWriter(clientOut, true);
                    Calendar calendar = GregorianCalendar.getInstance();
                    String ansMsg = "Date is: " + calendar.get(Calendar.DATE)
                            + "/" + calendar.get(Calendar.MONTH) + "/"
                            + calendar.get(Calendar.YEAR);
                    ;
                    pw.println(ansMsg);
                }
                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("c2f")) {
                    OutputStream clientOut = client.getOutputStream();
                    PrintWriter pw = new PrintWriter(clientOut, true);
                    String celciusValue;
                    boolean ifRead = false;

                    try {

                        pw.println("Input celcius value");
                        celciusValue = br.readLine();
                        ifRead = true;
                        if (ifRead == true) {
                            double celcius = Double.parseDouble(celciusValue);
                            celcius = celcius * 9 / 5 + 32;

                            pw.println(celcius);
                        }
                    } catch (NumberFormatException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("dload")) {

                    OutputStream outToClient = client.getOutputStream();
                    if (outToClient != null) {
                        File myFile = new File("C:\\ftp\\pic.png");
                        byte[] mybytearray = new byte[(int) myFile.length()];

                        FileInputStream fis = new FileInputStream(myFile);

                        BufferedInputStream bis = new BufferedInputStream(fis);

                        try {
                            bis.read(mybytearray, 0, mybytearray.length);
                            outToClient.write(mybytearray, 0,
                                    mybytearray.length);

                            outToClient.flush();
                            outToClient.close();
                            bis.close();
                            fis.close();

                        } catch (IOException ex) {
                            // Do exception handling
                        }

                        System.out.println("test");

                    }
                }

                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("quit")) {
                    client.close();
                    break;
                }
                // if (msgFromClient != null
                // && !msgFromClient.equalsIgnoreCase("bye")) {
                // OutputStream clientOut = client.getOutputStream();
                // PrintWriter pw = new PrintWriter(clientOut, true);
                // String ansMsg = "Hello, " + msgFromClient;
                // pw.println(ansMsg);
                // }

                // Close sockets
                if (msgFromClient != null
                        && msgFromClient.equalsIgnoreCase("bye")) {
                    server.close();
                    client.close();
                    break;
                }

                msgFromClient = null;
            }
        } catch (IOException ie) {
        }
    }
} 
```

客户：

```
 import java.io.*;
import java.net.*;

public class TCPClient {
 public static void main(String args[]) {

  boolean isConnected = true;
  Socket client = null;
  int portnumber = 1234; // Default port number we are going to use
  if (args.length >= 1) {
   portnumber = Integer.parseInt(args[0]);
  }
  try {

   String msg = "";
   // Create a client socket
   client = new Socket("127.0.0.1", 1234);
   System.out.println("Client socket is created " + client);
   // Create an output stream of the client socket

   OutputStream clientOut = client.getOutputStream();
   PrintWriter pw = new PrintWriter(clientOut, true);
   // Create an input stream of the client socket
   InputStream clientIn = client.getInputStream();
   BufferedReader br = new BufferedReader(new InputStreamReader(
     clientIn));
   // Create BufferedReader for a standard input
   BufferedReader stdIn = new BufferedReader(new InputStreamReader(
     System.in));

   while (isConnected == true) {
    System.out
      .println("Commands: \n1\. TIME\n2\. DATE\n3\. C2F\n4\. MAX\n5\. SUM\n6\. DLOAD\n7\. QUIT");
    // Read data from standard input device and write it
    // to the output stream of the client socket.
    msg = stdIn.readLine().trim();
    pw.println(msg);
    // Read data from the input stream of the client socket.

    if (msg.equalsIgnoreCase("dload")) {
        byte[] aByte = new byte[1];
        int bytesRead;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        if (clientIn != null) {

            try {
                FileOutputStream fos = new FileOutputStream("C:\\ftp\\pic.png");
                BufferedOutputStream bos = new BufferedOutputStream(fos);
                bytesRead = clientIn.read(aByte, 0, aByte.length);

                do {
                    baos.write(aByte, 0, bytesRead);
                    bytesRead = clientIn.read(aByte);
                } while (bytesRead != -1);

                bos.write(baos.toByteArray());
                bos.flush();
                bos.close();

                System.out.println("File is successfully downloaded to your selected directory"+ "\n" +"*-----------------*"+ "\n" );

            } catch (IOException ex) {
                System.out.println("Couldn't dowload the selected file, ERROR CODE "+ex);
            }

        }
    }else{

        System.out.println("Message returned from the server = "
                  + br.readLine());
    }
    if (msg.equalsIgnoreCase("bye")) {

     pw.close();
     br.close();
     break;
    }
   }
  } catch (Exception e) {

  }

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:22:12.490

调试了您的代码并有两个提示：

1)

不要压制你的例外。处理他们！第一步将打印您的堆栈跟踪，并且永远不会打开关于 SO 的这个问题；-) 调试您的代码！

2)

```
outToClient.flush();
outToClient.close(); //is closing the socket implicitly
bis.close();
fis.close(); 
```

所以在你的第二次调用中，服务器端的套接字已经关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:57:27.053

第一件事：

```
if (args.length >= 1) {
    portnumber = Integer.parseInt(args[0]);
} 
```

这可能会引发 NumberFormatException，并且因为 args[0] 是由用户传递的，所以您应该处理它。阅读代码也给了我一个问题：

```
double DoubleValue = Double.parseDouble(value); // LINE 104 
```

当我将 c2f 作为命令发送给服务器时抛出 NumberFormatException。您绝对需要在代码中的任何位置处理此异常并向客户端提供正确的答案，例如：

```
try{
    double DoubleValue = Double.parseDouble(value);
}catch(NumberFormatException e){
    // TELL THE CLIENT "ops, the number you inserted is not a valid double numer
} 
```

（简而言之，从这里开始你必须放大代码）

* * *

```
while (isConnected == true) { 
```

我看不到！为什么不使用这个？

```
while (isConnected) { 
```

* * *

```
if (msgFromClient != null && msgFromClient.equalsIgnoreCase("sum")){ 
```

可：

```
if("sum".equalsIgnoreCase(msgFromClient)){ 
```

在这种情况下，您对 NullPointerException 没有任何问题。（如果 msgFromClient 为 null，则该语句为 false）。

* * *

顺便说一句，日期和时间命令对我来说工作正常。检查其他人。

要修复 dload 我认为您必须删除该行：

```
outToClient.close(); 
```

（编辑：对于相同的答案，很抱歉 maxhax，在写这篇文章时没有看到你的答案）

# c++ - 如何计算递归结构？

> ID：12893741
> 
> 赞同：-3
> 
> 时间：2012-10-15T10:31:04.343
> 
> 标签：c++, data-structures, syntax

你能告诉我我们如何计算递归值吗？

例如以下递归函数：

```
int rec (int n)
{
    if (n==1) return (1);
    else  
        return (rec(n-1) + rec(n-1));
} 
```

有没有解决这类问题的一般线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:36:35.040

好吧，让我们先把它写成

```
int rec (int n)
{
  if (n==1) return (1);
  else  
    return (2 * rec(n-1));
} 
```

作为`a+a = 2a`

接下来我们看到将 2 相乘`n-1`，第 n 次返回 1。

因此这相当于 2^(n-1)

这意味着`rec(5) = 2^(5-1) = 2^4 = 16`

注意：我上面的表格也比你的表格更有效率，因为我只计算`rec(n-1)` `rec(n-2)`一次，依此类推（线性递归）。与您的函数一样，每个函数都以指数方式计算多次（指数递归）。这意味着虽然我的函数可以很好地扩展，但你的函数基本上不能用于大于 100 的任何东西。

# html - 为什么在模式对话框中调用单独的页面而不是使用隐藏的 DIV？

> ID：12893744
> 
> 赞同：0
> 
> 时间：2012-10-15T10:31:17.640
> 
> 标签：html, seo, fancybox

我不确定我是否正确地问了这个问题，但请听我说...

在我的主导航中，我通过fancybox.ajax 调用我的一些链接，然后显示一个单独的页面（即单击标题为“INFO”的链接会在Fancybox 中打开info.php）。

这是有效的，但我也看到人们使用隐藏 div 的示例。

[这个问题](https://stackoverflow.com/questions/8609818/does-a-modal-javascript-popup-like-fancybox-affect-seo-crawlers)很有帮助，从 SEO 的角度解释了一些事情，并让我重新思考了我的结构。问题是我为什么要将我的数据包含在单独的页面而不是隐藏的 div 中，它给我带来了什么好处？我会注意到我目前正在使用单独的页面，因为我认为这是一个很好的做法，但是在阅读了那个问题之后，我已经转向了。

编辑：我明白为什么我会使用一个没有模态的单独页面……但我特别问的是不要使用带有模态框的隐藏 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:12:40.880

**AJAX 模态的案例**

优点

1.  在某些设置中更易于管理和组织
2.  标记很干净
3.  非常适合处理大量需要时间加载的数据。以这种方式延迟加载使应用程序感觉响应。

缺点

1.  Google 不会抓取内容（在某些情况下可能是专业人士）
2.  与隐藏的 div 相比，渲染速度较慢

在大多数情况下，您需要隐藏的 div。如果没有，一个动态呈现内容的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:31:21.790

如果您**通过链接**调用这些外部页面，那么无论链接是否在模态框中打开，Google 都会跟踪这些链接。如果您禁用了 javascript，这些页面仍然会打开。所以

```
<a class="fancybox" href="info.php" rel="help">INFO</a> 
```

... 从 SEO 的角度来看，这是一个完美的有效结构。如何在同一窗口、新选项卡或模式窗口中向访问者显示信息是一个演示问题。

奇怪的是，您可以`<div>`在模态窗口中隐藏和打开此类内容，但正如@zachary 所提到的，隐藏内容可能会影响页面加载的性能。

**请注意**，在这种情况下，我们谈论的是在模式框中显示“链接”内容，这与通过任何 ajax 方法（例如 jQuery`.load()`或`$.ajax()`例如）动态拉取内容不同......从 SEO 的角度来看，这肯定会产生影响因为如果访问者禁用了 javascript，Google 将看不到内容，并且内容实际上根本不会显示。

# php - phpredis + pconnect

> ID：12893745
> 
> 赞同：7
> 
> 时间：2012-10-15T10:31:33.150
> 
> 标签：php, multithreading, webserver, redis, connection-pooling

我在基于 php 的网站上使用 phpredis。我使用的网络服务器是最简单的 apache apt-get 安装，不涉及任何配置，因为这只是一个开发环境。

我面临的问题是，基本上，在使用 phpredis 时，“connect”和“pconnect”命令之间没有区别：它们每次都会创建一个新连接，正如我从 redis-cli 上的“info”命令中看到的那样。

现在，我很确定这是因为 apache 配置以及它可能（很可能）是多线程环境的事实，因此无法建立单个连接。

我的问题基本上是关于何时我将投入生产：为了避免这个问题，网络服务器的最佳选择是什么？我记得在数以千计的用户中使用 lighttpd，但在 mongoDB 上仍然只获得很少的（比如 2 个或 3 个）连接。

有任何想法吗？

提前致谢。

# postgresql - Postgres：如何删除多个表中的条目

> ID：12893746
> 
> 赞同：0
> 
> 时间：2012-10-15T10:31:37.373
> 
> 标签：postgresql, metadata, topological-sort

我的任务是为来自不同表的一批条目实现“回滚”（不是通常的回滚）功能。例如：

```
def rollback(cursor, entries):
    # entries is a dict of such form: 
    # {'table_name1': [id1, id2, ...], 'table_name2': [id1, id2, ...], ...} 
```

我需要删除每个 table_name 中的条目。但是因为这些条目之间可能有关系所以有点复杂。我的想法分为几个步骤：

1.  从所有可以为空的表中找出所有列。
2.  更新所有条目将所有可以为空的列设置为空。在这一步之后应该没有循环依赖（如果没有，我认为它们不能插入到表中）
3.  找出它们的依赖并进行拓扑排序。
4.  一一删除。

我的问题是：

1.  这个想法有意义吗？
2.  有没有人做过类似的事情？如何？
3.  如何查询第 3 步的元表？因为我对 postgresql 很陌生。

任何想法和建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:10:05.160

(1) 和 (2) 都不对。很可能会定义列`NOT NULL REFERENCES othertable(othercol)`- 在任何正常模式中都有。

我认为您需要做的是对外键依赖关系图进行排序，以找到允许您`DELETE`逐表删除需要删除的数据的顺序。请注意，由于延迟外键约束，循环依赖是可能的，因此您需要降级/忽略`DEFERRABLE INITIALLY DEFERRED`约束；你可以暂时违反这些，只要它们在`COMMIT`时间上再次一致。

即使那样，您也可能会遇到问题。如果客户过去在交易期间[`SET CONSTRAINTS`](http://www.postgresql.org/docs/current/static/sql-set-constraints.html)进行了`DEFERRABLE INITIALLY IMMEDIATE`约束怎么办？`DEFERRED`然后，您将无法应对循环依赖。要处理此问题，您的代码必须 [ `SET CONSTRAINTS ALL DEFERRED`] 才能继续。

您将需要查看[`information_schema`](http://www.postgresql.org/docs/current/static/information-schema.html)特定于 PostgreSQL 的[系统目录](http://www.postgresql.org/docs/current/static/catalogs.html)来确定依赖关系。也可能值得看一下`pg_dump`源代码，因为它会尝试对转储表进行排序以避免依赖冲突。您将对[`pg_constraint`](http://www.postgresql.org/docs/current/static/catalog-pg-constraint.html) 目录或其`information_schema`等价物特别感兴趣`information_schema.referential_constraints`，`information_schema.constraint_table_usage`并且`information_schema.constraint_column_usage`.

您可以使用`information_schema`或`pg_catalog`。不要同时使用两者。`information_schema`是 SQL 标准且更便携，但查询速度可能很慢，并且没有包含所有信息`pg_catalog`。另一方面，`pg_catalog`不保证 ' 架构在主要版本（如 9.1 到 9.2）之间保持兼容——尽管它通常是这样的——而且它的使用是不可移植的。

# wpf - 使用虚拟化时wpf Treeview空白

> ID：12893747
> 
> 赞同：2
> 
> 时间：2012-10-15T10:31:47.067
> 
> 标签：wpf, treeview, virtualization

我们正在维护一个 List 数据结构。准备好列表后，我们将数据源分配给 Treeview。我们将“虚拟化”属性应用于“真”。初始结构如下所示。虚拟化后，视觉部分为 53 项。

```
-文档
    -第一章
        第1页
        第2页
        ...
        第1000页

```

然后我们尝试在运行时向“Doc”节点添加一个名为“Chap2”的项目，其中包含 500 个子项目（“Pages”），然后将垂直滚动位置设置为最后一个子项目。

问题：此操作后我们得到空白树视图。

请建议我们是否需要更改任何属性或我们需要做的任何事情？

# php - PHP函数放置不正确 在树层次结构中

> ID：12893748
> 
> 赞同：0
> 
> 时间：2012-10-15T10:31:50.530
> 
> 标签：php, html, tree

我正在使用这个函数来显示 UL 列表：

```
function getList($arResult){
    $diff = 0;
    foreach($arResult as $result){
        if($lastlevel != $result[depth]){
        if($lastlevel < $result[depth]){
            $html .= "<ul>\n";
            $diff++;
        }
        else {
            $html .= "</li>\n</ul>\n</li>\n";
            $diff--;
        }       
        }
        else
        $html .= "</li>\n";

        $html .= "<li>$result[cat_name]";

        $lastlevel = $result[depth];
    }
    $html .= str_repeat("</li>\n</ul>\n", $diff);
    return $html;
    } 
```

`$arResult`包含这样的树：

```
Electronics
  TV
  Video
    Old Movies
    New Movies
    Hollywood
      Old hollywood
      New HollyWood
      Rotten Hollywood
    Other Movies
  Mobile
    Nokia
    Apple
    Micromax
  Laptop
  Other 
```

上面的函数打印下面的所有内容，`Electronics->Tv`而事实是下面`Electronics`应该有`TV, Video, Mobile Laptop, Other`..

这个函数不知何故进入`ul li`了不正确的模式。

数组转储在这里：

```
array(10) {
  [0]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "197"
    ["cat_name"]=>
    string(13) "Student Corner"
    ["cat_nicename"]=>
    string(13) "student-corder"
    ["parent"]=>
    string(1) "0"
    ["post_count"]=>
    string(1) "0"
    ["depth"]=>
    string(1) "0"
  }
  [1]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "198"
    ["cat_name"]=>
    string(6) "GujCET"
    ["cat_nicename"]=>
    string(13) "gujcet-gujrat"
    ["parent"]=>
    string(3) "197"
    ["post_count"]=>
    string(1) "0"
    ["depth"]=>
    string(1) "1"
  }
  [2]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "199"
    ["cat_name"]=>
    string(13) "Sample Papers"
    ["cat_nicename"]=>
    string(20) "sample-papers-gujcet"
    ["parent"]=>
    string(3) "198"
    ["post_count"]=>
    string(1) "1"
    ["depth"]=>
    string(1) "2"
  }
  [3]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "200"
    ["cat_name"]=>
    string(8) "Syllabus"
    ["cat_nicename"]=>
    string(15) "syllabus-gujcet"
    ["parent"]=>
    string(3) "198"
    ["post_count"]=>
    string(1) "8"
    ["depth"]=>
    string(1) "2"
  }
  [4]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "201"
    ["cat_name"]=>
    string(4) "News"
    ["cat_nicename"]=>
    string(11) "news-gujrat"
    ["parent"]=>
    string(3) "197"
    ["post_count"]=>
    string(1) "1"
    ["depth"]=>
    string(1) "1"
  }
  [5]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "202"
    ["cat_name"]=>
    string(13) "Question Bank"
    ["cat_nicename"]=>
    string(20) "question-bank-gujrat"
    ["parent"]=>
    string(3) "197"
    ["post_count"]=>
    string(1) "0"
    ["depth"]=>
    string(1) "1"
  }
  [6]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "203"
    ["cat_name"]=>
    string(7) "Class X"
    ["cat_nicename"]=>
    string(28) "class-x-gujrat-question-bank"
    ["parent"]=>
    string(3) "202"
    ["post_count"]=>
    string(1) "2"
    ["depth"]=>
    string(1) "2"
  }
  [7]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "204"
    ["cat_name"]=>
    string(9) "Class XII"
    ["cat_nicename"]=>
    string(30) "class-xii-gujrat-question-bank"
    ["parent"]=>
    string(3) "202"
    ["post_count"]=>
    string(1) "4"
    ["depth"]=>
    string(1) "2"
  }
  [8]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "205"
    ["cat_name"]=>
    string(7) "Results"
    ["cat_nicename"]=>
    string(15) "results-gujarat"
    ["parent"]=>
    string(3) "197"
    ["post_count"]=>
    string(1) "1"
    ["depth"]=>
    string(1) "1"
  }
  [9]=>
  array(6) {
    ["cat_ID"]=>
    string(3) "206"
    ["cat_name"]=>
    string(10) "About GSEB"
    ["cat_nicename"]=>
    string(10) "about-gseb"
    ["parent"]=>
    string(3) "197"
    ["post_count"]=>
    string(1) "1"
    ["depth"]=>
    string(1) "1"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:37:46.013

功能太复杂了。沿着这些思路做了一些事情：

```
function treeList(array $data) {
    $list = '<ul>';

    foreach ($data as $item) {
        $list .= '<li>';
        $list .= $item['name'];
        if (!empty($item['children'])) {
            $list .= treeList($item['children']);
        }
        $list .= '</li>';
    }

    $list .= '</ul>';

    return $list;
}

$data = array(
    array(
        'name'     => 'Foo',
        'children' => array(
            array(
                'name' => 'Bar'
            )
        )
    )
);

echo treeList($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:37:25.193

您没有在`<li>`此处打开要关闭的标签，请修复此问题并尝试，

```
 else {
        $html .= "</li>\n</ul>\n</li>\n";
        $diff--;
    } 
```

# android - 如何在android中永久存储数据？

> ID：12893754
> 
> 赞同：1
> 
> 时间：2012-10-15T10:32:11.060
> 
> 标签：android, sqlite, sharedpreferences, android-sdcard

> **可能重复：**
> [Android：永久保存文件（即使在清除数据/卸载后）](https://stackoverflow.com/questions/6108787/android-save-file-permanently-even-after-clear-data-uninstall)

我想将数据永久存储在 Android 中，我知道将数据存储在数据库中，共享首选项除此之外，Android 中是否有任何数据持久性？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:39:26.990

对于永久存储，请将您的数据存储在 sdCard 中。但是，请记住，即使这些数据也可以由用户通过访问 sd 卡手动删除。您可能想查看[android 中的存储选项](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)。在这里，您将了解如何在 sdcard 中读取和写入。此外，您需要在清单文件中输入以下权限：

```
android.permission.WRITE_EXTERNAL_STORAGE 
```

对于写入 sd 卡，您可能需要检查[此问题](https://stackoverflow.com/questions/8330276/write-a-file-in-external-storage-in-android)或尝试：

```
public void onClick(View v) {
// write on SD card file data in the text box
try {
    File myFile = new File("/sdcard/MyPackageName/permanent.txt");
    myFile.createNewFile();
    FileOutputStream fOut = new FileOutputStream(myFile);
    OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
    myOutWriter.append(write_text.getText());
    myOutWriter.close();
    fOut.close();
    Toast.makeText(getBaseContext(),
            "Done writing SD 'mysdfile.txt'",
            Toast.LENGTH_SHORT).show();
} catch (Exception e) {
    Toast.makeText(getBaseContext(), e.getMessage(),
            Toast.LENGTH_SHORT).show();
}
}// onClick
}); // btnWriteSDFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:40:54.270

如果你想将数据持久化到 sd 卡上，你需要有权限`android.permission.WRITE_EXTERNAL_STORAGE"`。

此外，您应该从 SD 卡上的绝对位置打开一个文件并写入那里

# asp.net - 通用控制器，多个区域 - 需要路由？

> ID：12893755
> 
> 赞同：0
> 
> 时间：2012-10-15T10:32:12.607
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

我在库中定义了一个控制器。我希望可以通过我的 3 个区域中的任何一个访问此控制器。目前，当通过例如“admin”区域（即 /admin/contact 的 url）访问时，找不到控制器（比如说“contact”）。但是，当通过“/contact”访问时，它确实有效。

区域是否需要任何路由配置才能允许公共控制器通过这些区域进行访问？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:40:48.713

您可以将此控制器放在命名空间中：

```
namespace MvcApplication1.Controllers.MyAreas
{
    public class ContactsController : Controller
    {
        ...
    }
} 
```

然后在您的区域注册中指定此命名空间：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional },
        new[] { "SomeLibrary.Controllers.MyAreas" }
    );
} 
```

现在，当您导航到将执行`/admin/contacts/index`的`Index`操作时。`ContactsController`

# android - 我的 Android 应用程序是否在有根设备上运行？

> ID：12893757
> 
> 赞同：1
> 
> 时间：2012-10-15T10:32:16.783
> 
> 标签：android

> **可能重复：**
> [确定是否在有根设备上运行](https://stackoverflow.com/questions/1101380/determine-if-running-on-a-rooted-device)

我正在创建一个 Android 应用程序，我想知道我的应用程序是否在有根设备上运行。
我在谷歌上进行了挖掘，但连一个可靠的解决方案都想不出来。

之前在 stackoverflow 上也有人问过类似的问题，但没有任何解决方案。这些链接中提供的解决方案不适用于我的设备。甚至 Runtime.exec("su") 也不起作用。

[确定 Android 设备是否以编程方式植根？](https://stackoverflow.com/questions/3424195/determining-if-an-android-device-is-rooted-programatically)

[确定是否在有根设备上运行](https://stackoverflow.com/questions/1101380/determine-if-running-on-a-rooted-device)

[测试手机是否已root](https://stackoverflow.com/questions/12450624/testing-if-a-phone-is-rooted)

有没有办法查出设备是否已root？如果我们做不到，谷歌如何找到设备是否已root？

当我执行 Runtime.exec("su") 时，出现异常 10-15 18:36:36.445: W/System.err(668): java.io.IOException: Error running exec()。命令：[su] 工作目录：null 环境：null

```
public static boolean isDeviceRooted_BySu() {
    try {
        Log.d("BySu", "BySu");
        Process p = Runtime.getRuntime().exec("su");
        return true;
    } catch (IOException e) {
        e.printStackTrace();
    }
    return false;
} 
```

我从 ADB shell 中检查过，它给了我一个“#”提示，所以我可以确定该设备至少是 Shell 根的。鉴于它是 shell 根的，那么[确定是否在根设备上运行](https://stackoverflow.com/questions/1101380/determine-if-running-on-a-rooted-device)提供的解决方案至少应该可以工作，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:53:31.830

没有确定的方法。您可以检查系统属性（“ro.secure”等），搜索 SUID su 二进制文件，尝试运行它，搜索许多“超级用户”应用程序等。但是，可能有一个`foobar`实际上是 su 的二进制文件，或任何其他为您提供 root 权限的程序。可能有一个“常规”二进制文件利用某些 Android 漏洞获取 root 权限等。如果您检查每个文件的 SUID，您可能会接近。谷歌可能正在使用部分/所有这些的组合。

# java - 如何在java中反转字节数组？

> ID：12893758
> 
> 赞同：12
> 
> 时间：2012-10-15T10:32:20.327
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中反转 int 数组？](https://stackoverflow.com/questions/2137755/how-do-i-reverse-an-int-array-in-java)

`Array.Reverse(bytearray)`在 C#中执行的 java 中的等效函数是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T10:36:50.477

```
public static void reverse(byte[] array) {
      if (array == null) {
          return;
      }
      int i = 0;
      int j = array.length - 1;
      byte tmp;
      while (j > i) {
          tmp = array[j];
          array[j] = array[i];
          array[i] = tmp;
          j--;
          i++;
      }
  } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-15T10:35:58.077

您可以`Collections.reverse`在`list`返回的 by`Arrays.asList`上使用`Array`：-

```
 Byte[] byteArr = new Byte[5];

    byteArr[0] = 123; byteArr[1] = 45;
    byteArr[2] = 56;  byteArr[3] = 67;
    byteArr[4] = 89;

    List<Byte> byteList = Arrays.asList(byteArr); 

    Collections.reverse(byteList);  // Reversing list will also reverse the array

    System.out.println(byteList);
    System.out.println(Arrays.toString(byteArr)); 
```

**输出**： -

```
[89, 67, 56, 45, 123]
[89, 67, 56, 45, 123] 
```

**更新**：-或者，您也可以使用：方法，直接对原始类型数组进行操作：-[`Apache Commons`](http://commons.apache.org/lang/) [`ArrayUtils#reverse`](http://commons.apache.org/lang/api-release/index.html)

```
byte[] byteArr = new byte[5];
ArrayUtils.reverse(byteArr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T10:37:07.963

您可以使用`java.util.Collections.reverse()`. 它`java.util.List`作为输入参数。`Arrays.asList(byteArray)`因此，您应该通过执行或创建 List 对象并将字节值添加到其中来将 byteArray 转换为 List 。

# spring - Spring 确实存在时找不到 bean xml 配置文件

> ID：12893760
> 
> 赞同：81
> 
> 时间：2012-10-15T10:32:31.747
> 
> 标签：spring, configuration, javabeans, applicationcontext

我正在尝试在 Spring 中制作我的第一个 bean，但在加载上下文时遇到了问题。我在 src/main/resources 中有一个 bean 的配置 XML 文件。

我收到以下 IOException：

> 线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常：IOException 从类路径资源 [src/main/resources/beans.xml] 解析 XML 文档；嵌套异常是
> 
> java.io.FileNotFoundException：类路径资源 [src/main/resources/beans.xml] 无法打开，因为它不存在

但我不明白，因为我做了以下代码测试：

```
File f = new File("src/main/resources/beans.xml");
System.out.println("Exist test: " + f.exists()); 
```

这给了我真实的！`resources`在类路径中。怎么了？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-10-18T14:48:29.737

谢谢，但这不是解决方案。我发现它为什么不适合我。

因为我做了一个声明：

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); 
```

当 beans.xml 文件存在时，我想我会参考项目的根目录。然后我把配置文件放到 src/main/resources 中，把初始化改成：

```
ApplicationContext context = new ClassPathXmlApplicationContext("src/main/resources/beans.xml"); 
```

它仍然是一个 IO 异常。

然后文件留在 src/main/resources/ 但我将声明更改为：

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); 
```

它解决了这个问题 - 也许它会对某人有所帮助。

谢谢和欢呼！

编辑：

由于我得到了很多人对解决方案的赞许，并且几年前作为学生第一次体验了 Spring，我很想尽快解释一下它为什么有效。

当项目正在编译和打包时，项目中 'src/main/java' 中的所有文件和子目录都会进入打包的 jar（我们要创建的工件）的根目录。相同的规则适用于“src/main/resources”。

这是许多工具（如 maven 或 sbt）在构建项目过程中遵守的约定（注意：作为默认配置！）。当代码（来自帖子）处于运行模式时，它找不到像“src/main/resources/beans.xml”这样的东西，因为 beans.xml 位于 jar 的根目录中（复制到 /beans .xml 在创建的 jar/ear/war 中）。

使用 ClassPathXmlApplicationContext 时，bean xml 定义的正确位置声明（在这种情况下）是“/beans.xml”，因为这是它在 jar 中以及稍后在类路径中所属的路径。

可以通过使用存档器（即 rar）解压 jar 并查看其目录结构的内容来验证它。

我建议阅读有关类路径的文章作为补充。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-12-12T15:10:25.903

试试这个：

`new ClassPathXmlApplicationContext("**file:**src/main/resources/beans.xml");`

**file：**指向文件系统资源的前缀，而不是类路径。

文件路径可以是相对路径或系统路径 (/home/user/Work/src...)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-03-13T00:16:13.377

我也有类似的问题，但由于原因有点不同，所以在这里分享以防万一它可以帮助任何人。

**我的文件位置**

![bean.xml 文件](../Images/3e3cff1e5f1744fd7f374421547c3eed.png)

**我是如何使用的**

`ClassPathXmlApplicationContext("beans.xml");`

**有两种解决方案**

1.  将 beans.xml 从包中取出并放入默认包中。
2.  使用时指定包名称，即。

`ClassPathXmlApplicationContext("com/mypackage/beans.xml");`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-21T23:09:48.550

`src/main/resources`是一个源目录，你不应该直接引用它。当您构建/打包项目时，内容将被复制到您的类路径的正确位置。然后你应该像这样加载它

```
new ClassPathXmlApplicationContext("beans.xml") 
```

或者像这样

```
new GenericXmlApplicationContext("classpath:beans.xml"); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-09-29T04:07:58.393

这是因为 applicationContect.xml 或 any_filename.XML 没有放在正确的路径下。

**故障排除步骤**

1：在资源文件夹下添加XML文件。

2：如果你没有资源文件夹。通过导航新建一个右键单击项目新建 > 源文件夹，将其命名为**资源**并将您的 XML 文件放在其下。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-26T06:18:16.417

用它 `ApplicationContext context = new FileSystemXmlApplicationContext("Beans.xml");`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-15T10:35:13.823

我怀疑您正在构建一个 .war/.jar ，因此它不再是一个文件，而是该包中的一个资源。请改用[ClassLoader.getResourceAsStream(String path)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-15T14:16:18.477

您已经查看了 src 目录。xml 文件确实存在那里。但是请查看设置了所有输出类的类或 bin/build 目录。我怀疑您只需要使用 resources/beans.xml 路径。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-11-16T09:00:28.327

请注意，第一个 applicationContext 是作为 ; 的一部分加载的`web.xml`。下面提到了这一点。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>META-INF/spring/applicationContext.xml</param-value>
</context-param>

<servlet>
    <servlet-name>myOwn-controller</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>META-INF/spring/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

如下代码也将尝试再创建一个 applicationContext。

```
private static final ApplicationContext context = 
               new ClassPathXmlApplicationContext("beans.xml"); 
```

查看和之间的[区别](https://stackoverflow.com/questions/129207/getting-spring-application-context/40969417#40969417)`beans.xml``applicationContext.xml`

如果`appliationContext.xml`under`<META-INF/spring/>`已声明 with`<import resource="beans.xml"/>`那么这`appliationContext.xml`将加载under的`beans.xml`相同位置`META-INF/spring`。`appliationContext.xml`

然而; 在代码中；如果它声明如下

```
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml"); 
```

`WEB-INF/classes`这是在 eclipse 中的 OR 中查看 beans.xml `src/main/resources`。

[如果您添加了`beans.xml`at`src/main/resources`那么它可能会在`WEB-INF/classes`创建 WAR 时放置在。]

因此，总共查找了**两个文件。**

我已经通过在导入时添加类路径查找解决了这个问题，`applicationContext.xml`如下所示

```
<import resource="classpath*:beans.xml" /> 
```

并删除了`ClassPathXmlApplicationContext("beans.xml")`java代码中的这一行，这样只会加载一个ApplicationContext。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-01T20:39:52.170

在 Spring 中，所有源文件都在 src/main/java 中。同样，资源通常保存在 src/main/resources 中。因此，请将您的 spring 配置文件保存在资源文件夹中。

确保在 src/main/resources 中也有文件的 ClassPath 条目。

在 .classpath 检查以下 2 行。如果缺少它们，请添加它们。

```
<classpathentry path="src/main/java" kind="src"/>
<classpathentry path="src/main/resources" kind="src" /> 
```

因此，如果您已准备好所有内容，则以下代码应该可以工作。

ApplicationContext ctx = new ClassPathXmlApplicationContext("Spring-Module.xml");

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-14T16:03:27.193

**摇篮**：v4.10.3

**IDE**：IntelliJ

我在使用 gradle 运行构建和测试时遇到了这个问题。到处复制 applicationContext.xml 并没有帮助。即使指定如下的完整路径也无济于事！

```
context = new ClassPathXmlApplicationContext("C:\\...\\applicationContext.xml"); 
```

解决方案（至少对于 gradle 而言）在于 gradle 处理资源的方式。[对于我的 gradle 项目，我已经按照https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_project_layout](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_project_layout)中定义的方式布置了工作区

当使用默认 gradle 任务集运行测试时，包括一个“processTestResources”步骤，该步骤在**C:\.....\src\test\resources**中查找测试资源（Gradle 提供了完整的路径）。

您的 .properties 文件和 applicationContext.xml 需要位于此目录中。如果资源目录不存在（就像我的情况一样），您需要创建它，将文件复制到那里。在此之后，只需指定文件名就可以了。

```
context = new ClassPathXmlApplicationContext("applicationContext.xml"); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-18T14:17:38.630

我做了与大多数人相反的事情。我正在使用 Force IDE Luna Java EE，并将 Beans.xml 文件放在包中；但是，我在 Beans.xml 字符串（用于 ClassPathXMLApplicationContext 参数）之前添加了相对路径。所以在我的主应用程序中 - 访问 Beans.xml 文件的那个 - 我有：

```
 ApplicationContext context = 
         new ClassPathXmlApplicationContext("com/tutorialspoin/Beans.xml"); 
```

我还注意到，当我将 Beans.xml 文件从 src 文件夹移动到包中时，XML 文件图标的左下角有一个 Bean 图像，当这个 xml 文件在包之外时，它不存在。这是一个很好的指标，让我知道现在 ClassPathXMLAppllicationsContext 可以访问 beans xml 文件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-16T13:02:39.563

这对我有用：

```
 new ClassPathXmlApplicationContext("classpath:beans.xml"); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-08T13:55:35.913

如果这个问题仍然困扰着您并且您正在使用 Eclipse 进行开发，请查看这个 Eclipse 错误：[Resources files from "src/main/resources" are not correct included in classpath](https://bugs.eclipse.org/bugs/show_bug.cgi?id=494937 "来自“src/main/resources”的资源文件； 未正确包含在类路径中")

解决方案似乎是查看项目的属性、Java 构建路径、源文件夹。删除`/src/main/resources`目录并重新添加。这会提醒 Eclipse 需要将这些文件复制到类路径。

当使用 Eclipse 的“Neon”版本时，这个错误影响了我。（在我意识到刚刚描述的简单修复之前，我感到非常沮丧）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-19T09:21:11.800

我遇到了这个问题，这让我发疯了；我最终在我的 POM.xml 中发现了以下内容，这是问题的原因：

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
        <includes>
            <include>**/*.properties</include>
        </includes>
    </resource>
</resources> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-19T12:46:01.813

我不确定要写，但也许有人节省了几个小时：

```
mvn clean 
```

如果您的整个配置已经完美，则可以完成这项工作！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-11-21T04:55:49.133

我在这个问题上停留了一段时间，我已经找到了以下解决方案

1.  创建一个**ApplicationContextAware**类（这是一个实现**ApplicationContextAware**的类）
2.  在**ApplicationContextAware**中，我们只需要实现一种方法

    public void setApplicationContext(ApplicationContext context) 抛出 BeansException

3.  告诉 spring 上下文关于这个新 bean（我称之为 SpringContext）

    ```
    bean id="springContext" class="packe.of.SpringContext" />

    ```

这是代码片段

```
import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

public class SpringContext implements ApplicationContextAware {
  private static ApplicationContext context;

  @Override
  public void setApplicationContext(ApplicationContext context) throws BeansException {
    this.context = context;
  }
  public static ApplicationContext getApplicationContext() {
    return context;
  }
} 
```

4.  然后，您可以调用 spring 上下文之外的任何应用程序上下文方法，例如

    ```
    SomeServiceClassOrComponent utilityService SpringContext.getApplicationContext().getBean(SomeServiceClassOrComponent .class);

    ```

我希望这能解决许多用户的问题

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-26T17:26:15.653

Beans.xml 或 file.XML 未放置在正确的路径下。如果您有 Maven 项目，您应该在资源文件夹下添加 XML 文件。src -> main -> java -> 资源

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-16T19:11:12.700

我在 IntelliJ 上并面临同样的问题。以下是我如何解决它：

**1.**在 Spring 应用程序类中添加如下资源导入以及其他导入：`@ImportResource("applicationContext.xml")`

**2.**看到 IDE 显示 :`Cannot resolve file 'applicationContext.xml'`并建议其预期文件的路径（这不是文件 applicationContext.xml 最初保存的资源）

**3.**将文件复制到预期位置，异常得到解决。

下面的屏幕截图便于参考： [![在此处输入图像描述](../Images/91ab4058748728b2fa0fb556f34f3aaa.png)](https://i.stack.imgur.com/pxiVq.png)

但是，如果您想将其保留在资源中，请按照下面的这个很好的答案链接并添加资源路径以便对其进行搜索。在没有上述步骤中描述的@ImportResource 的情况下，使用此设置异常可以解决：

[https://stackoverflow.com/a/24843914/5916535](https://stackoverflow.com/a/24843914/5916535)

# image - 如何多次上传单张图片（超过100次）？

> ID：12893767
> 
> 赞同：0
> 
> 时间：2012-10-15T10:33:01.643
> 
> 标签：image, image-processing, file-upload, for-loop, asp.net-mvc-4

大家好，我正在研究 MVC4。我上传了一个图像文件，它保存在目标文件夹中，但现在我需要一个循环，以便将图像保存超过 100 次。

这是我的代码，

这是我的控制器：

```
 [HttpPost]

        public ActionResult Uploading(ImageModel model)
        {
            if (ModelState.IsValid)
            {     
                string fileName = Guid.NewGuid().ToString();
                string serverPath = Server.MapPath("~");
                string imagesPath = serverPath + "Content\\Images\\";
                string thumsise = Path.Combine(imagesPath, "Thumb" + fileName);

                ImageModel.ResizeAndSave(thumsise, fileName, model.ImageUploaded.InputStream, 80, true);

            }
            return View("Upload",model);
        } 
```

这是我的索引页：

```
@using (Html.BeginForm("Uploading", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
     {
         <input type="file" name="ImageUploaded" id="btnUpload" multiple="multiple" accept="image/*"  />
     <button type="submit"  id="Upload">Upload</button>
         <br />
} 
```

你能帮我做这件事吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:45:04.767

[`for`](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)写一个循环怎么样：

```
[HttpPost]
public ActionResult Uploading(ImageModel model)
{
    if (ModelState.IsValid)
    {     
        string imagesPath = Server.MapPath("~/Content/Images");
        string fileName = Guid.NewGuid().ToString();
        for (var i = 1; i <= 100; i++) 
        {
            string thumsise = Path.Combine(
                imagesPath, 
                string.Format("Thumb{0}_{1}", fileName, i)
            );
            ImageModel.ResizeAndSave(thumsise, fileName, model.ImageUploaded.InputStream, 80, true);
        }
        return View("Upload",model);
    }
} 
```

这将在`~/Content/Images`文件夹中创建 100 个图像，方法是在 Guid 前面加上`Thumb`循环索引，并在后面加上循环索引。

# javascript - 列表中 n 个项目的部分

> ID：12893768
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:33:11.793
> 
> 标签：javascript, jquery

我需要在每个点击功能上选择三个 li。我需要隐藏除前三个以外的所有 lis。在点击功能上，我需要隐藏前三个 li 并需要显示接下来的 3 个项目。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:42:21.280

使用 jquery`:lt()`选择器

看看这个[小提琴](http://jsfiddle.net/BzS9n/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:48:29.387

您可以在列表中使用 jquery[`:lt()`](http://api.jquery.com/lt-selector/)和[`:gt()`](http://api.jquery.com/gt-selector/)选择器的组合来显示列表项：

**标记：**

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
    <li>11</li>    
    <li>12</li>
</ul>
<a class="prev">prev</a> | <a class="next">next</a>​ 
```

**jQuery：**

```
$('ul li:gt(2)').hide();

$('.prev').click(function() {
    var first = $('ul').children('li:visible:first');
    first.prevAll(':lt(3)').show();
    first.prev().nextAll().hide()
});

$('.next').click(function() {
    var last = $('ul').children('li:visible:last');
    last.nextAll(':lt(3)').show();
    last.next().prevAll().hide();
}); 
```

**演示**：http: [//jsfiddle.net/kRUUE/](http://jsfiddle.net/kRUUE/)

# magento - Magento - 产品属性 - 推荐的最大值？

> ID：12893772
> 
> 赞同：1
> 
> 时间：2012-10-15T10:33:20.403
> 
> 标签：magento

我希望在 Magento 安装中添加大量（大约 200 个）产品属性。它们中的大多数将是二进制的。

我看到每个属性都会在平面产品表中添加一列。由于添加了这些属性，我是否应该期望看到性能下降？属性数量的最佳做法是什么？

* * *

编辑：我们正在使用 Magento 1.6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:03:27.753

我认为您唯一应该注意的是最大 Mysql 行大小。请参阅[这篇](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)文章以获得解释。这是其中的一段摘录，以了解我在说什么：

> 每个表（无论存储引擎如何）的最大行大小为 65,535 字节。存储引擎可能会对此限制施加额外的限制，从而减少有效的最大行大小。
> 
> 最大行大小限制了列的数量（可能还有大小），因为所有列的总长度不能超过这个大小。例如，utf8 字符每个字符最多需要三个字节，因此对于 CHAR(255) CHARACTER SET utf8 列，服务器必须为每个值分配 255 × 3 = 765 个字节。因此，一个表不能包含超过 65,535 / 765 = 85 个这样的列。

因此，如果 200 属性的总大小超过此值（65,535 字节），您将无法将所有属性存储在平面表中。在这种情况下，您应该缩短您拥有的属性数量，或者干脆**不要将所有属性都放在 Flat table 中**。您只需要产品列表页面上应该可用的属性。我不认为你会在那里展示所有200个......

# xcode - 使用 xcode 4.4.1 调试器进入 boost .ipp 文件

> ID：12893773
> 
> 赞同：0
> 
> 时间：2012-10-15T10:33:26.290
> 
> 标签：xcode, macos, xcode4, boost-asio

有没有办法在 boost 库提供的 .ipp 实现文件中放置断点？

使用 Visual Studio，我可以这样做，但 xcode (4.4.1) 不会将 .ipp 文件识别为代码文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:42:17.283

1.  `sudo /Applications/Xcode.app/Contents/MacOS/Xcode /System/Library/CoreServices/CoreTypes.bundle/Contents/Info.plist`

2.  使用`Cmd`+`F`查找`.cpp`并添加附近的`.ipp`扩展名

3.  重启

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:40:12.143

**注意：**这不是一个可行的解决方案，但我希望有人可以从这里继续。

正如[这个问题](https://superuser.com/questions/263311/on-os-x-how-do-you-change-a-files-kind)中提到的，OSX 的文件类型关联存储在文件中，所以我编写了一个简短的 shell 脚本，在给定目录下的所有字符串中`plist`搜索字符串：`hpp``plists`

```
#!/bin/sh

find $1 -iname "*.plist" -print0 | while read -d $'\0' file
do
  if plutil -convert xml1 "$file" -r -o - | grep -q "<string>hpp</string>"
  then
    echo "$file"
  fi
done 
```

正如预期的那样，使用`sh find_hpp.sh /Applications/Xcode.app`finds调用上述脚本。`Contents/Info.plist`请注意，这个文件不能直接用 Xcode 编辑，因为它在 Xcode 运行时被锁定，但你可以退出 Xcode，通过 将二进制 plist 文件转换为 xml `plutil -convert xml1 Info.plist -o Info.xml`，编辑 xml 并用`plutil -convert binary1 Info.xml -o Info.plist`.

我只是`hpp`在 xml 文件中搜索并添加`ipp`为附加文件类型（它出现了两次）：

```
<dict>
        <key>CFBundleTypeExtensions</key>
        <array>
                <string>hh</string>
                <string>hp</string>
                <string>hpp</string>
                <string>hxx</string>
                <string>h++</string>
                <string>ipp</string>
        </array>
        <key>CFBundleTypeIconFile</key>
        <string>c-header_Icon</string>
        <key>CFBundleTypeName</key>
        <string>C++ Header Source</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSIsAppleDefaultForType</key>
        <true/>
        <key>LSItemContentTypes</key>
        <array>
                <string>public.c-plus-plus-header</string>
        </array>
</dict> 
```

将编辑后的 ​​xml 文件转换回二进制文件后，为了强制启动服务重新读取 plist，我触摸了应用程序包：

```
touch /Applications/Xcode.app 
```

我注销并重新登录，但是：什么都没有。仍然不是 Xcode 中的语法突出显示，也不`.ipp`是 Finder 中文件的文件关联。我什至重新启动系统，将 Xcode 应用程序包移动到我的桌面并返回。依然没有。我希望其他人可以从这里接过来。

# c - C11 中的 gets() 等价物是什么？

> ID：12893774
> 
> 赞同：20
> 
> 时间：2012-10-15T10:33:31.207
> 
> 标签：c, c11

来自[cplusplus.com](http://www.cplusplus.com/reference/clibrary/cstdio/gets/)

> C 标准 (2011) 的最新版本已明确从其规范中删除了此功能
> 
> 该函数在 C++ 中已弃用（截至 2011 年标准，遵循 C99+TC3）。

我只是想知道`gets()`C11 标准中的替代方案是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T10:39:55.267

在 C11`gets`中已被替换为`gets_s`具有以下声明：

```
char *gets_s(char *str, rsize_t n); 
```

此函数将最多从into读取`n-1`字符。这是为了避免. 该功能也是一种选择。从[http://en.cppreference.com/w/c/io/gets](http://en.cppreference.com/w/c/io/gets)：`stdin``*str``gets``fgets`

> **gets()**函数不执行边界检查，因此该函数极易受到缓冲区溢出攻击。它不能安全使用（除非程序在限制标准输入上出现的内容的环境中运行）。出于这个原因，该功能在 C99 标准的第三次勘误中已被弃用，并在 C11 标准中完全删除。**fgets()**和**gets_s()**是推荐的替代品。
> 
> 永远不要使用**gets()**。

鉴于这`gets_s`是在标准的扩展中定义的，只能选择性地实现，您可能应该改用它来编写程序`fgets`。如果您`fgets`在`stdin`您的程序上使用也将在 C 的早期版本中编译。但请记住行为的差异：当`gets_s`已读取`n-1`字符时**，它会一直读取直到到达新行或文件结尾**，丢弃输入。因此，`gets_s`您总是在读取整行，即使只有一部分可以在输入缓冲区中返回。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T13:55:24.410

其他人已经回答了这个问题。为了完整起见，这是 C 标准的建议：

ISO9899:2011 K.3.5.4.1/6

> 推荐做法
> 
> fgets 函数允许正确编写的程序安全地处理输入行太长而无法存储在结果数组中。一般来说，这要求 fgets 的调用者注意结果数组中是否存在换行符。考虑使用 fgets（以及任何需要的基于换行符的处理）而不是 gets_s。

因此，您应该尽可能使用**fgets**。

**编辑**

gets_s 行为被指定为：

ISO9899:2011 K.3.5.4.1/4

> 描述
> 
> get_s 函数从 stdin 指向的流中最多将 n 指定的字符数少一个，读入 s 指向的数组中。在换行符（被丢弃）或文件结尾之后不会读取其他字符。丢弃的换行符不计入读取的字符数。在读入数组的最后一个字符之后立即写入一个空字符。
> 
> 如果遇到文件结尾并且没有字符被读入数组，或者在操作过程中发生读取错误，则将 s[0] 设置为空字符，并且 s 的其他元素采用未指定的值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T10:37:40.037

您可以使用`fgets`或`gets_s`：

[http://www.java2s.com/Code/C/Console/Usefgetstoreadstringfromstandardinput.htm](http://www.java2s.com/Code/C/Console/Usefgetstoreadstringfromstandardinput.htm)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-15T10:35:51.897

据`man 3 gets`，`fgets`。

# sencha-touch - 如何从sencha中的控制器将列表添加到面板

> ID：12893777
> 
> 赞同：0
> 
> 时间：2012-10-15T10:33:43.787
> 
> 标签：sencha-touch, sencha-touch-2

***这是我的观点，我正在创建面板，***我想将 Ext.List 添加到面板

```
Ext.define('myApp.view.MyWant', {
    extend : 'Ext.Panel',
    xtype : 'mywant',

    initialize : function() {
        console.log(localStorage.currentuser + " in MyWant View");
        var newWant = {
            xtype : 'button',
            iconCls : 'add',
            ui : 'action',
            handler : this.onTapNew,
            scope : this
        };

        var topToolbar = {
            xtype : 'toolbar',
            docked : 'top',
            defaults : {
                iconMask : true
            },
            title : 'My Wants',
            items : [{
                xtype : 'spacer'
            }, newWant]
        };

        var myWantsList = {
            xtype : 'panel',
            flex : 1,
            id : 'mywantslist',
            html : 'want list'
        };

        this.add(topToolbar);
        this.add(myWantsList);
    },
    config : {
        layout : {
            type : 'vbox'
        }
    }
}); 
```

## 我正在从控制器将以下列表添加到 myWantsList 面板（以下代码在控制器中）

```
var myWantList = Ext.create('Ext.List', {
                        itemCls : 'my-dataview-item',
                        html : 'wants-list',
                        itemTpl : '<div><img src="'+localStorage.httpServerPrefix+
                        '{imageURI}"/><span class="list-item-title">{fullname}</span><span id="count" class="list-item-title">{replyCount}</span><p class="list-item-title">{text} <span id="time" class="list-item-title">{time}</span></p>',
                        store : myWantStore
                    });

Ext.getCmp("mywantslist").add(myWantList); 
```

我检查了检查元素，有一个代码......

但它显示空白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:20:50.183

您必须在列表定义上设置一个属性`renderTo`，例如：

```
var myWantList  = Ext.create('Ext.List', {
    renderTo: mywant.getComponent().element.dom,
    itemCls : 'my-dataview-item',
    html : 'wants-list',
    itemTpl : '<div><img src="'+localStorage.httpServerPrefix+
              '{imageURI}"/><span class="list-item-title">{fullname}</span><span id="count" class="list-item-title">{replyCount}</span><p class="list-item-title">{text} <span id="time" class="list-item-title">{time}</span></p>',
    store : myWantStore
 }); 
```

# c++ - 在小尺寸窗口中保存大尺寸图片

> ID：12893783
> 
> 赞同：0
> 
> 时间：2012-10-15T10:34:09.160
> 
> 标签：c++, mfc

我是 MFC 的新手。现在我有以下问题： 我有一个大尺寸的图片（例如2000*2000 的大小）显示在一个小尺寸的窗口中（例如640*480 的大小）。难怪如果不缩小图片就无法完全展示自己。我知道如果图片可以放入窗口，我可以保存原始图片而不会丢失任何像素，但是，我现在不能这样做：

```
CClientDC SHDC(this); //"this" is a CMDIChildWnd derived class
CDC memDC;
CRect rect;

GetClientRect(&rect);
memDC.CreateCompatibleDC(&SHDC);
CBitmap bm;
int uWidth = rect.Width();
int uHeight = rect.Height();
bm.CreateCompatibleBitmap(&SHDC, uWidth, uHeight);
CBitmap *pOld = memDC.SelectObject(&bm);
memDC.BitBlt(0, 0, uWidth, uHeight, &SHDC, 0, 0, SRCCOPY);
...... 
```

保存的图片只显示客户区，但我想保存所有的图片。谁能帮助我？提前致谢。

习

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:23:17.040

而不是`BitBlt`尝试`StretchBlt`。它会为你处理收缩。

> StretchBlt 函数将位图从源矩形复制到目标矩形，必要时拉伸或压缩位图以适应目标矩形的尺寸。系统根据目标设备上下文中当前设置的拉伸模式来拉伸或压缩位图。

如果您想要更高质量的拉伸/收缩，请查看 GDI+。您可以使用多种插值模式。更多信息在这里：

[http://msdn.microsoft.com/en-us/library/k0fsyd4e.aspx](http://msdn.microsoft.com/en-us/library/k0fsyd4e.aspx)

# javascript - 使用 jQuery 在 Google 网站上放置超链接

> ID：12893785
> 
> 赞同：0
> 
> 时间：2012-10-15T10:34:19.050
> 
> 标签：javascript, jquery, google-sites, sites

我正在尝试使用 jQuery 中的 click 函数放置文本（包含超链接）。

```
var publicationsText = "Rohit. <a href=\"http://www.google.com\" onmouseover=\"this.style.color=#EC4D48;\" onmouseout=\"this.style.color=#666;\" style=\"color:#666;\">Emerging Energy</a>";

    $('#publicationsID').click(function(){ 
      $("#homepage").html(publicationsText);
      return false;
    }); 
```

这在我的本地盒子上可以正常工作。但是当我在谷歌网站上发布这个时，生成的 HTML 是：

```
<div id="container-caja-guest-0___">
<div id="homepage-caja-guest-0___">
Rohit.<a target="_blank" style="color: #666">Emerging Energy</a>
</div>
</div> 
```

并且超链接会被自动删除。

任何人都可以建议一种适用于 Google 网站的解决方法吗？

此外，该网站位于：[http](http://www.wattalyst.org) ://www.wattalyst.org （您可以在联系/出版物页面中查看问题）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:38:07.267

您正在`HTML`错误地构建字符串（不转义双引号）：

```
var publicationsText = "Rohit. <a href=\"http://www.google.com\"" +
    "onmouseover=\"this.style.color=#EC4D48;\"" +
    "onmouseout=\"this.style.color=#666;\"" +
    "style=\"color:#666;\">Emerging Energy</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:45:06.063

您的字符串格式不正确。您需要转义引号并合并行

```
var publicationsText = "Rohit. <a href=\"http://www.google.com\" "+
    " onmouseover=\"this.style.color=#EC4D48;\" onmouseout=\"this.style.color=#666;\" "+ 
    " style=\"color:#666;\">Emerging Energy</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:40:57.753

您没有在 href 中转义双引号

# javascript - scrollTop() 在 Chrome 浏览器中不起作用

> ID：12893787
> 
> 赞同：1
> 
> 时间：2012-10-15T10:34:28.027
> 
> 标签：javascript, jquery

```
function scrollTop () {
  window.scrollBy(0, 100000000000000000);
    $("#entry").focus();
}

   function showChat (nick) {
   $("#toolbar").show();
   $("#entry").focus();

    $("#connect").hide();
    $("#loading").hide();
   scrollTop();
   } 
```

这段代码在 chrome 浏览器中不起作用，但在 Firefox 中起作用，所以如何在 safari、chrome 和 opera 浏览器中使用 scrollTop()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:39:05.093

为什么不使用

```
window.scrollTo(0, 0); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:37:56.547

我在 IE 7 中对其进行了测试，它也可以在 FireFox 和 Chrome 中运行...

如果这真的不起作用，请尝试使用：

```
function jumpScroll(amount) {
 document.body.scrollLeft += amount;
}

jumpScoll(100); 
```

# php - 带有链接的 PHP 随机图像 - 如何添加文本/标题？

> ID：12893789
> 
> 赞同：1
> 
> 时间：2012-10-15T10:34:54.677
> 
> 标签：php, html, image, random, hyperlink

```
<?php
// Random Image With Link
// https://getbutterfly.com/
//
// Usage:
//
// Save this file as ads.php and use the include function to call it inside your web site

function display_random_img($array) {
    $key = rand(0 , count($array) -1);
    $link_url = $array[$key]['url'];
    $alt_tag = $array[$key]['alt'];
    $random_img_url = $array[$key]['img_url'];
    list($img_width, $img_height) = getimagesize($random_img_url);
    return "<a href=\"$link_url\"><img src=\"$random_img_url\" width=\"$img_width\" height=\"$img_height\" alt=\"$alt_tag\" /></a>";
}

// Edit the following values accordingly
$ads_array = array(
    array(
        'url' => 'http://www.google.com/',
        'alt' => 'Google',
        'img_url' => 'images/1.png'
    ),
    array(
        'url' => 'http://www.yahoo.com/',
        'alt' => 'Yahoo!',
        'img_url' => 'images/2.png'
    ),
    array(
        'url' => 'http://www.msn.com/',
        'alt' => 'MSN',
        'img_url' => 'images/3.png'
    )
);
$ads_array_1 = array( // add or remove accordingly
    array(
        'url' => 'http://www.google.com/',
        'alt' => 'Google',
        'img_url' => 'images/1.png'
    ),
    array(
        'url' => 'http://www.yahoo.com/',
        'alt' => 'Yahoo!',
        'img_url' => 'images/2.png'
    ),
    array(
        'url' => 'http://www.msn.com/',
        'alt' => 'MSN',
        'img_url' => 'images/3.png'
    )
);

echo display_random_img($ads_array);
echo display_random_img($ads_array_1); // add or remove accordingly
?> 
```

在互联网上搜索一个可行的 PHP 数组随机化函数时，这就是我最终得到的。它工作得很好，有 url、alt、img_url。我不知道如何在图像上/与图像一起**显示文本？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:39:16.577

我假设您的意思是悬停文本...将图像标签的标题设置为您要显示的文本

例如：

```
<img title="some hover text" ... 
```

为了顺利完成这项工作，您只需向数组中的每个项目添加一个“标题”元素。

如果第一个假设是错误的，并且您想要做的是显示一些文本以及图像，请执行以下操作：

```
<a href=...>
    <img .../>
    some text or html
</a> 
```

您可以将任何您想要的内容放入锚标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:42:18.607

简单的：

1）向数组添加标题：

```
array(
    'url' => 'http://www.google.com/',
    'alt' => 'Google',
    'img_url' => 'images/1.png',
    'title' => 'Google Title'
), 
```

2）替换你的功能

```
function display_random_img($array) {
    $key = rand(0 , count($array) -1);
    $link_url = $array[$key]['url'];
    $alt_tag = $array[$key]['alt'];
    $random_img_url = $array[$key]['img_url'];
    $title = $array[$key]['title'];
    list($img_width, $img_height) = getimagesize($random_img_url);
    return "<a href=\"$link_url\"><img src=\"$random_img_url\" width=\"$img_width\" height=\"$img_height\" alt=\"$alt_tag\" title=\"$title\" /></a>";
} 
```

如果您希望您的标题位于图像或其他任何内容旁边，只需在 html 中进行相关更正：

```
return "$title : <a href=\"$link_url\"><img src=\"$random_img_url\" width=\"$img_width\" height=\"$img_height\" alt=\"$alt_tag\" title=\"$title\" /></a>"; 
```

# postgresql - 给定先前点作为输入，如何获取 PostGIS 线串中的下一个点

> ID：12893792
> 
> 赞同：0
> 
> 时间：2012-10-15T10:35:05.087
> 
> 标签：postgresql, postgis

我有 PostgreSQL8.4+PostGIS。

我有一列中有一个带有线串几何形状的表格。我有这个线串的一个点，我想得到下一个点。为此，我想使用函数[ST_NPoints](http://www.postgis.org/docs/ST_NPoints.html)和[ST_PointN](http://www.postgis.org/docs/ST_PointN.html)。为了使用它，我必须对所有点进行排序找到我的点，然后我会知道下一点是我需要的。

这是我的桌子：

```
-- Table: filedata

-- DROP TABLE filedata;

CREATE TABLE filedata
(
  num serial NOT NULL,
 id integer,
 mydata character(25),
 the_geom geometry,
 CONSTRAINT filedata_pkey PRIMARY KEY (num)
)
WITH (
OIDS=FALSE
);
ALTER TABLE filedata OWNER TO postgres; 
```

和示例线串：

```
"LINESTRING(60.7014631515719 56.8441322356241,60.7023117507097 56.8445673405349,60.702948200063 56.8447993944193,60.703902874093 56.8448574076656,60.706236521722 56.8447993944193,60.7094187684889 56.8449444273664,60.7121236782406 56.8450894597515,60.715571112238 56.8452925041466,60.718382096882 56.8454085290207,60.7204505572805 56.8453505166286,60.7222538304482 56.8450314468649,60.7246405155233 56.8444513130533,60.7260194891224 56.8440742212539,60.7260194891224 56.8440742212539,60.7260194891224 56.8440742212539,60.7260194891224 56.844045214035)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:37:10.827

假设您指的是线串顺序中的下一个，您可以执行以下操作：

```
WITH 
  -- The input data; this would be from the `filedata` table normally
  geom(line) AS (VALUES ('LINESTRING(60.7014631515719 56.8441322356241,60.7023117507097 56.8445673405349,60.702948200063 56.8447993944193,60.703902874093 56.8448574076656,60.706236521722 56.8447993944193,60.7094187684889 56.8449444273664,60.7121236782406 56.8450894597515,60.715571112238 56.8452925041466,60.718382096882 56.8454085290207,60.7204505572805 56.8453505166286,60.7222538304482 56.8450314468649,60.7246405155233 56.8444513130533,60.7260194891224 56.8440742212539,60.7260194891224 56.8440742212539,60.7260194891224 56.8440742212539,60.7260194891224 56.844045214035)'::geometry)),
  -- Create a set of (index,point) rows
  --
  point_series(line,n) AS (
      SELECT line, generate_series(1, ST_NPoints(line)) FROM geom
  ),
  -- Annotate that row set to include the prior point in each row,
  -- ie (n, point_n, point_n_minus_one)
  --
  lagged_points(pointidx, point, lagpoint) AS (
    SELECT n, ST_PointN(line,n) AS pointn,
           lag(ST_PointN(line,n)) OVER () AS point_n1
    FROM point_series
  )
-- Now SELECT the point we want, the point after
-- the one specified in the WHERE clause
SELECT astext(point)
FROM lagged_points
WHERE lagpoint = 'POINT(60.7014631515719 56.8441322356241)'::geometry; 
```

`geometry`如果 PostGIS 提供了一种转换成点数组的方法，这会简单得多。`idx`如果它具有等效于 intarray 的功能，它也会更简单。

# java - 处理java应用程序

> ID：12893794
> 
> 赞同：-5
> 
> 时间：2012-10-15T10:35:17.403
> 
> 标签：java, processing

简单的问题，有没有办法将java中的处理编译为应用程序而不是applet？

就像现在一样，如果我将它作为应用程序运行，它只会在启动时终止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:44:40.973

如果 Java 进程在启动后直接停止，那么它可能是缺少非守护线程。

创建一个线程，等待输入并具有`while(shouldRun){doSomethingOrWait()};`

您还应该添加一个`ShutDownHook`以终止无限循环。

**更新：** 小程序不在服务器端运行。请尝试更准确地解释您打算做什么。

*更新2：* 对于这么模糊的问题，我只能给出一个模糊的答案：

解决方案 1：安装一个 tomcat 网络服务器并创建一个 Servlet。加载 URL 后，将数据发送到 servlet 并在服务器端开始您的工作。

解决方案 2：创建 RMI 服务器并通过 RMI 发送作业。

# php - 无法使用 PHP PDO 使代码工作

> ID：12893796
> 
> 赞同：0
> 
> 时间：2012-10-15T10:35:18.750
> 
> 标签：php, sql-server, pdo

```
 $query = '  Declare @MemCode Varchar(12);
                Declare @ConCounter decimal(28,0);
                Set @MemCode = null;
                Set @ConCounter = null; 

                EXECUTE spQMInsEventMember_TMS 
                "'.$masterEventCode.'",
                "'.$eventCode.'",
                '.$memberContactTitle.',
                "'.$guestFirstName.'",
                "'.$guestLastName.'",
                '.$address.',
                '.$townDescription.',
                '.$countryCode.',
                '.$postZip.',
                '.$STD.',
                '.$phone.',
                "'.$guestEmail.'",
                '.$isMember.',
                '.$divisionCode.',
                '.$statusCode.',
                '.$subStatusCode.',
                '.$memberTypeCode.',
                '.$memberTitles.',
                '.$memberSubType.',
                '.$classCode.',
                '.$subClassCode.',@MemCode OUTPUT,@ConCounter OUTPUT;
                SELECT @MemCode AS member_code, @ConCounter AS contact_counter;';
    //print_r($query);

    $res = $this->dbh->query($query);
print_r $res; 
```

输出：

```
object(stdClass)#1 (2) { ["RESULT"]=> string(2) "OK" ["CONTACTCOUNTER"]=> object(stdClass)#2 (1) { ["queryString"]=> string(522) " Declare @MemCode Varchar(12); Declare @ConCounter decimal(28,0); Set @MemCode = null; Set @ConCounter = null; EXECUTE spQMInsEventMember_TMS "AC", "LAC1112", NULL, "Fred", "Smith", NULL, NULL, NULL, NULL, NULL, NULL, "b@b.com", 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL,@MemCode OUTPUT,@ConCounter OUTPUT; SELECT @MemCode AS member_code, @ConCounter AS contact_counter;" } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:58:44.563

查询返回一个 PDOStatement 对象，而不是结果数组。

要一次获得所有结果，请尝试：

```
$sth = $this->dbh->query($query);

if(!$sth)
{
    // Query failed. Find out Why
    $error = sth->errorInfo();
    print_r $error;
}
else
{
    // We got results.
    $res = sth->fetchAll();
    print_r $res;
} 
```

# java - SwingWorker 扩展类不显示重写方法

> ID：12893797
> 
> 赞同：3
> 
> 时间：2012-10-15T10:35:21.487
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

这是我的示例代码...我面临的问题是我的 swingWorker 扩展类仅向我显示 doInBackground() 作为覆盖方法。我也想使用 done() 和 process() 方法，但是我的类没有显示它@overided 也没有调用 done/process 方法，因为我知道它是无限循环，但是为什么不是在发布（）时调用流程方法吗？

```
 public class getChatSwingWorkerThread extends SwingWorker<String , String> {
 private final JTextArea chat_text_area;
 private PostDataConnection post = null;
 private BasicUserInterface chatWindow = null;

public getChatSwingWorkerThread(JTextArea text_area){
    chatWindow = new BasicUserInterface();
    this.chat_text_area = text_area;
    post = new PostDataConnection();
}
@Override
protected String doInBackground() throws Exception {
    String returnData = "";
    while(true){
        returnData = post.getAvailableChat();
        if(!returnData.equals("")){
            publish(returnData);
            }
       } 

}
protected void process(String returnData) {

    chat_text_area.append(returnData);
}

 public void done(String returnData) throws InterruptedException, ExecutionException{
    chat_text_area.append(get());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:40:27.780

那是因为您的`process`and`done`方法的签名与超类中的签名不同。

该`process`方法的签名是

```
protected void process(List<V> chunks) 
```

在你的情况下归结为

```
protected void process(List<String> chunks) 
```

该`done`方法没有任何参数

```
protected void done() 
```

# php - 如何在队列中运行 PHP 脚本？

> ID：12893799
> 
> 赞同：3
> 
> 时间：2012-10-15T10:35:23.177
> 
> 标签：php, jquery

在我当前的任务中，当我选择大量记录然后更改它们的状态或重新分配它们时，系统可能会慢到那个点，因此用户必须等待一段时间才能完成此操作。

那么有没有办法将此进程放入队列中，以便该进程在后台运行并且用户可以执行其他任务。

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:39:01.957

是的......看看Gearman：

[http://gearman.org/index.php?id=getting_started](http://gearman.org/index.php?id=getting_started)

[http://php.net/manual/en/book.gearman.php](http://php.net/manual/en/book.gearman.php)

Alternativley，如果你不喜欢，我已经多次使用这个优秀的 4 部分教程的原理，效果很好：

[http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project/](http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-1-understanding-the-project/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:47:23.803

Need more information on how the queue is processed, you mean that the data that is being processed has nothing to do with the second process running after the first process? In that case I would run your script as

```
yourcommand > /dev/null 2>&1 & 
```

this would let the process run in the background.

In the context of PHP, if it is speed that you are after, I would check if PHP has enough memory available. If yes, I would save the values in an array and use a foreach loop to manipulate data. Usually this works out faster.

More information is required.

Hari

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:43:40.983

是肯定的。如果您想让 php 脚本在后台执行它，并让用户玩您的网站。您需要做的就是发送标头：

```
header("Connection: close");
header("Content-length: $size"); 
```

是你要找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:42:37.473

使用**j-query** ajax 方法并让用户等待而不进行任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T10:42:43.487

你可以选择

*   [齿轮人](http://gearman.org)

*   [豆茎](http://kr.github.com/beanstalkd/)

*   [兔MQ](http://www.rabbitmq.com)

    基本上，您可以运行任何 MessageQ 系统，然后使用 STOMP（一种标准协议）在进程之间进行通信。

# c# - 如何从xml结构中获取后缀值？

> ID：12893800
> 
> 赞同：0
> 
> 时间：2012-10-15T10:35:22.840
> 
> 标签：c#, xml, c#-4.0, xml-parsing, xml-serialization

我将 xml 结构存储在 xml 字符串中，例如 abcd variable.test1,test2,test3 是 xml 结构的一部分。如何**从 test1,test2,test3 中获取 1,2,3 等后缀值**？

```
 string abcd="<xmlstruct>
    <test1>
        <name>testname1</name>
        <address>testaddress1</address>
        <subject>testsub1<subject>
    </test1>

    <test2>
        <name>testname2</name>
        <address>testaddress2</address>
        <subject>testsub2<subject>
    </test2>

    <test3>
        <name>testname3</name>
        <address>testaddress3</address>
        <subject>testsub3<subject>
    </test3>

    </xmlstruct>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:40:22.940

理想情况下，首先不要像那样构建您的 XML。元素名称的使用不是很好。最好使用：

```
<test id="1">
    ...
</test>

<test id="2">
   ...
</test> 
```

如果这些是原始类中具有单独变量的结果，则表明变量可能应该是单个集合。

如果你*真的*想找到它们，你可以使用这样的东西：

```
IEnumerable<string> ListSuffixes(XElement container, XName prefix)
{
    string localPrefix = prefix.Name.LocalName;
    var elements = container.Elements()
                            .Where(x => x.Name.Namespace == prefix.Name.Namespace
                                        && x.Name.LocalName
                                                 .StartsWith(localPrefix));
    foreach (var element in elements)
    {
        yield return element.Name.LocalName.Substring(localPrefix.Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:39:42.503

我不完全确定您要实现什么，但这并不是通常使用 XML 的方式。

要从类似于上面的一段 XML 中获取后缀 (1, 2, 3)，您可以解析 XML，选择元素的所有子`xmlstruct`元素，然后使用字符串操作。

但是，替代模式可能是一个更好的主意，例如将后缀单独存储为属性

```
<xmlstruct>
    <test Suffix="1">
        <name>testname1</name>
        <address>testaddress1</address>
        <subject>testsub1<subject>
    </test>
    <test Suffix="2">
        <name>testname2</name>
        <address>testaddress2</address>
        <subject>testsub2<subject>
    </test>
    <test Suffix="3">
        <name>testname3</name>
        <address>testaddress3</address>
        <subject>testsub3<subject>
    </test>
</xmlstruct> 
```

元素名称实际上不应该是动态的，给定元素的允许元素名称列表通常应该属于固定（有限）列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:39:04.243

你可以试试这个：

```
Integer.parseInt(s.replaceAll("[\\D]", "")) 
```

这也将删除数字之间的非数字，因此“test1test1x”变为 11。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:40:48.120

这有效：

```
var suffices =
    XDocument
        .Parse(abcd)
        .Element("xmlstruct")
        .Elements()
        .Where(xe => xe.Name.ToString().StartsWith("test"))
        .Select(xe => int.Parse(xe.Name.ToString().Substring(4))); 
```

它返回：

![结果](../Images/b3c718f208038f67a373cff72052f96f.png)

# javascript - 使用 Javascript 在 Windows 8 应用程序中获取设备信息

> ID：12893803
> 
> 赞同：1
> 
> 时间：2012-10-15T10:35:31.493
> 
> 标签：javascript, windows-8

是否可以获取安装该应用程序的设备信息。我需要获取以下信息：

1.  设备操作系统：（Windows 8）
2.  操作系统版本
3.  设备 ID（安装应用程序的机器的一些唯一 ID）

# android - android中相对布局内的多帧布局

> ID：12893805
> 
> 赞同：0
> 
> 时间：2012-10-15T10:35:39.060
> 
> 标签：android, android-framelayout

我正在使用框架布局。我必须在一个相对布局中显示三个框架布局。一个框架布局在下面两个框架布局。两个框架布局彼此并排。

## 框架布局 1

框架布局2 框架布局3

我该如何设计如此复杂的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:51:14.250

您将需要通过实验调整各种布局参数。在您的 IDE 中使用它们。

这是一种方法：嵌套布局：

```
LinearLayout: Vertical, match_parent, match_parent

  Frame Layout1

  LinearLayout: Horizontal

    Frame Layout2: weight=1

    Frame Layout3: weight=1 
```

# android - android列表基本适配器中的进度处理程序

> ID：12893810
> 
> 赞同：0
> 
> 时间：2012-10-15T10:35:54.957
> 
> 标签：android, baseadapter

下面是活动中进度处理程序的代码片段：它适用于扩展 Activity 的类，但我想将它与 Baseadapter 一起使用...

```
Handler progressHandler = new Handler() {       
        public void handleMessage(Message msg) {
            AlertDialog.Builder alert = new AlertDialog.Builder(WhiteboardAddPost.this);
            switch(msg.what){
            case 0:                 
                alert.setTitle("Add Post");         
                alert.setMessage(message);
                alert.setCancelable(false);
                alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        Intent intent = new Intent();
                        intent.putExtra("OK", "ok"); 
                        setResult(RESULT_OK, intent);
                        releaseMemory();
                        finish();
                    }
                }).create().show();                     

                break;
            case 1:                 
                alert.setTitle("Close");            
                alert.setMessage(message);
                alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        return;
                    }
                }).create().show();                     

                break;

            case 2:                 
                alert.setTitle("Close");            
                alert.setMessage(message);
                alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        return;
                    }
                }).create().show();                     

                break;                
            } 
        }
    }; 
```

如何在我们扩展 Baseadapter 但不扩展活动的列表视图中使用它？

进一步详细说明问题：在我的列表中，我为每个项目附加了一个按钮以删除该特定项目，并且当用户单击该删除按钮时，此时请求会转到服务器，我想显示一个警报以显示等待消息，当响应出现时，我想显示带有响应消息的警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:05:39.383

您的 progressHandler 将保留在您的 Activity 类中。您应该在收到响应时发送消息，然后此处理程序将相应地工作。

# jquery - 如何更改 JQueryUI 对话框标题的颜色？

> ID：12893815
> 
> 赞同：7
> 
> 时间：2012-10-15T10:36:11.680
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我想更改 JQueryUI 对话框的背景颜色。我使用以下样式对其进行了更改，并且可以正常工作。但问题是它也有效果，DatePicker Dialog Title。我只想更改对话框标题而不是 DatePicker 标题。你能告诉我如何只改变对话框瓷砖的颜色吗？谢谢。

```
.ui-widget-header
{
    background-color: #F9A7AE;
    background-image: none;
    color: Black;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T10:47:16.453

You can target the `titlebar` directly, the dialog plugin will output HTML similar to the following for the dialog title:

```
<div class="ui-dialog-titlebar ui-widget-header">
  <span id="ui-id-1" class="ui-dialog-title">Basic dialog</span>
</div> 
```

(Taken from the Dialog page, [here](http://jqueryui.com/dialog/))

```
.ui-dialog-titlebar {
  background-color: #F9A7AE;
  background-image: none;
  color: #000;
} 
```

Alternatively, you can pass a class to the dialog:

```
$('#foo').dialog({dialogClass: 'myClass'}); 
```

[See here](http://api.jqueryui.com/dialog/#option-dialogClass)

# android - 在 Android 的旋转窗口 Mono 中保存播放媒体状态

> ID：12893817
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:36:17.013
> 
> 标签：android, xamarin.android, media, state

当用户旋转窗口时，如何保存播放媒体状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:46:17.417

您可以点击此链接以停止刷新有关方向更改的活动：

[旋转Android上的活动重启](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:46:26.330

使用`onSaveInstanteState`，就像您一直[使用 Save Instance State 保存 Android Activity 状态一样](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

这也意味着您需要自己跟踪 MediaPlayerService 的状态，因为[无法获取媒体播放器的状态](http://code.google.com/p/android/issues/detail?id=800)。

# python - 更改列顺序

> ID：12893821
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:36:31.973
> 
> 标签：python, csv

```
$ cat customer.csv
customerno, firstname, lastname, sales
23242, john, doe, 2345.00
23253, jane, doe, 1234.00
23221, greg, johnson, 2345.00
23210, howard, gardner, 2345.00 
```

以下代码按预期工作，它将反转列顺序。

```
import csv
with open('customer2.csv', 'wb') as output:
    input = csv.reader(open('customer.csv', 'rb'))
    output = csv.writer(output, dialect=input.dialect)
    for line in input:
        line.reverse()
        output.writerow(line)

$ cat customer2.csv
 sales, lastname, firstname,customerno
 2345.00, doe, john,23242
 1234.00, doe, jane,23253
 2345.00, johnson, greg,23221
 2345.00, gardner, howard,23210 
```

但我真正需要的不是 4,3,2,1 而是 4,2,3,1 序列。预期输出：

```
$ cat newfile.csv
 sales, lastname, firstname, lastname, customerno
 2345.00, john, doe, 23242
 1234.00, jane, doe, 23253
 2345.00, greg, johnson, 23221
 2345.00, howard, gardner, 23210 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:38:36.360

```
(customerno, firstname, lastname, sales) = line
outLine = (sales, firstname, lastname, customerno)
output.writerow(outLine) 
```

# apache - 第一个目录的简单 RewriteRule

> ID：12893824
> 
> 赞同：0
> 
> 时间：2012-10-15T10:36:39.057
> 
> 标签：apache, .htaccess, mod-rewrite

这是非常基本的，但我找不到有效的解决方案。我只需要将任何 URL 从旧目录重定向到新 URL。

例子：

```
/search/whatever 
```

至

```
/jobs/search 
```

我不需要映射任何内容，我希望所有流量到开始 /search 的 URL 以被重定向 (301)。

使用这个：

```
RewriteRule /search /jobs [R=301,L] 
```

有效，但我在 /jobs 中有一个 URL，现在也被重定向：

```
/jobs/search 
```

这是错误的 - 它需要匹配 URL 的开头。所以我尝试了这个：

```
RewriteRule ^/search /jobs [R=301,L] 
```

但这根本没有重定向，所以我被卡住了。

另一个例子是：

RewriteRule /careers-at-pure /emea/contact-us/careers-at-pure [R=301,L]

这会创建一个循环，因为 careers-at-pure 位于旧 URL 和新 URL 中，但以下内容不会匹配和重定向：

RewriteRule ^/careers-at-pure /emea/contact-us/careers-at-pure [R=301,L]

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:57:41.427

当它们通过 htaccess 文件中的重写规则时，将从 URI 中删除前导斜杠。您需要从正则表达式中删除前导斜杠，或者至少将其设为可选：

```
RewriteRule ^/?search /jobs [R=301,L] 
```

# java - 带有嵌入式 CSS 的 iText HTML

> ID：12893829
> 
> 赞同：1
> 
> 时间：2012-10-15T10:36:58.653
> 
> 标签：java, html, export, itext

我正在开发一个表格导出界面，以导出为 HTML、PDF 和 RTF。我为此使用 iText，因为它允许对这三种类型进行非常相似的处理。

HTML 导出的简单示例：

```
final Document document = new Document(PageSize.A4, 50, 50, 50, 50);
HtmlWriter writer = HtmlWriter.getInstance(document, outputStream);
Table actTable = new Table(colCount);
final Cell c = new Cell(cellString);

c.setColspan(colSpan);
c.setHeader(isHeader);

actTable.addCell(c);
writer.add(actTable); 
```

到目前为止，基本版本正在运行，我现在想为元素设置样式。

在前一个导出类中，我使用了一个嵌入式样式表：

```
 String cssFileContent = IOUtils.toString(new FileInputStream("style.css"));

  final StringBuilder sb = new StringBuilder();

  sb.append("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n");
  sb.append("<meta http-equiv='Content-Type' content='text/html;charset=ISO-8859-1'>\n");
  sb.append("<html xmlns=\"http://www.w3.org/1999/xhtml\">\n");
  sb.append("<head>\n<title>");
  sb.append(title);
  sb.append("</title>\n");
  sb.append("<style media='screen' type='text/css'>\n");
  sb.append(cssFileContent); // embed the stylesheet
  sb.append("</style>");
  sb.append("<div id=\"header\"></div>\n");
  sb.append("</head>\n");
  sb.append("<body>\n");
  ... 
```

现在我正在尝试使用 iText 添加样式元素，但无法弄清楚如何做到这一点。请帮忙！

我的第二个问题：如何防止 iText`div`为每个单元格创建标签？

```
<tr>
  <td border="0.5" width="0">
    <div>testA0,0
    </div>
  </td>
</tr> 
```

# asp.net - 将按钮动态添加到 GridView 行

> ID：12893831
> 
> 赞同：0
> 
> 时间：2012-10-15T10:37:06.910
> 
> 标签：asp.net

我有一个由 Javascript 填充的 gridview。现在，在此操作之后，我想将开始和停止按钮添加到已经通过 Javascript 绑定的数据中。所以最后的 Gridview 行将由 2 个按钮和 Javascript 设置的列值组成。有人可以建议

# sql-server - 如何在 sql server 2005 的选择查询中获取记录的每月总计

> ID：12893833
> 
> 赞同：0
> 
> 时间：2012-10-15T10:37:08.603
> 
> 标签：sql-server, datetime

我有以下查询输出

![在此处输入图像描述](../Images/a76c09f716d7212a2d1a0f9ce90890b0.png)

**询问：**

```
SELECT DATENAME(mm, date) [Month], sum(braekTime) [TotalBreakTime],
sum(DATEPART(hh,totalTime) * 60 + DATEPART(mi,totalTime) + DATEPART(ss,totalTime) * 0.017) [Minute],firstName
    FROM employeeAttendance,employee
    where FK_employeeId = employee.employeeId
    GROUP BY DATENAME(mm, date),firstName
    ORDER BY [Month] 
```

但**我希望每个月的每个 n 记录都具有 null/0 值** ，例如六月和七月的记录不可用，那么它应该显示如下

```
Month    TotalBreakTime   Minute   firstName    
-----    --------------   ------    ---------
January       0           0           NULL
February      0           0           NULL
March         0           0           NULL
April         0           0           NULL
May           50          1015.000    foramaa 
June          0            0          NULL
July          0            0          NULL     
 .... Like till Dec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:38:47.843

您应该为月份创建一个虚拟表或子查询，并将其加入到总计查询中。

例如

```
select * from
(
    select number, datename(m,DATEADD(m, number-1, 0)) as monthname 
    from master..spt_values 
    where type='p' and number between 1 and 12
) months
    left join
(your totals query) totals
    on months.monthname = totals.month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:54:34.107

试试这个：

```
;with cte as(
select 1 as rn union all select 2 union all select 3),
 cte1 as (select ROW_NUMBER() over(order by c1.rn) as row_num
from cte cross join cte c1 cross join cte c2)
select * from cte1
left join
(SELECT DATENAME(mm, date) [Month], 
       sum(braekTime) [TotalBreakTime],
       sum(DATEPART(hh,totalTime) * 60 + DATEPART(mi,totalTime) + DATEPART(ss,totalTime) * 0.017) [Minute],
       firstName
FROM employeeAttendance join employee
on FK_employeeId = employee.employeeId
GROUP BY DATENAME(mm, date),firstName
ORDER BY [Month])B
on B.[Month]=DateName( month , DateAdd( month ,cte1.row_num , 0 ) - 1 )
and cte1.row_num <=12 
```

# shell - SHELL 在 csv 文件上设置分隔符

> ID：12893835
> 
> 赞同：0
> 
> 时间：2012-10-15T10:37:17.567
> 
> 标签：shell, sorting, csv

我需要在 csv 文件和整个文件上设置分隔符“，”，以便在使用 excel 打开时可以阅读。

我有：

```
 Message,Uncounted File
    Unknown File Extension,/dir/file1
    Unknown File Extension,/dir/file2
    Unknown File Extension,/dir/file3 
```

我需要

```
 Message                 Uncounted File
    Unknown File Extension  /dir/file1
    Unknown File Extension  /dir/file2
    Unknown File Extension  /dir/file3 
```

其中 Message uncounted file 是两列。csv 文件包含更多的列，这是一个摘录。我试过

```
 S=`echo -e ","`
  sort -t"$S" myfile 
```

并且每一种都可能...

任何人 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:42:40.460

试试sed。这应该给你一个想法（虽然它未经测试）

```
sed -i -e 's/,/","/g' input # substitutes , with "," in file input inplace
sed -i -e 's/^|$/"/g' input # adds " to the starting and ending of each line inplace in input 
```

# ios - AFNetworking：全局处理错误并重复请求

> ID：12893837
> 
> 赞同：38
> 
> 时间：2012-10-15T10:37:21.530
> 
> 标签：ios, networking, afnetworking

我有一个应该很常见的用例，但我找不到使用 AFNetworking 处理它的简单方法：

*每当服务器为任何*请求返回特定状态代码时，我都想：

*   删除缓存的身份验证令牌
*   重新认证（这是一个单独的请求）
*   重复失败的请求。

我认为这可以通过一些全局完成/错误处理程序来完成`AFHTTPClient`，但我没有发现任何有用的东西。那么，做我想做的事的“正确”方法是什么？`enqueueHTTPRequestOperation:`在我的子类中覆盖`AFHTTPClient`，复制操作并用我想要的块包装原始完成处理程序（重新验证，排队复制操作）？还是我完全走错了路？

谢谢！

编辑：删除了对 401 状态代码的引用，因为这可能是在我使用令牌身份验证时为 HTTP 基本保留的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-03-03T22:12:55.117

我使用另一种方法通过 AFNetworking 2.0 执行此操作。

您可以`dataTaskWithRequest:success:failure:`对传递的完成块进行子类化和包装，并进行一些错误检查。例如，如果您使用 OAuth，您可以观察 401 错误（到期）并刷新您的访问令牌。

```
- (NSURLSessionDataTask *)dataTaskWithRequest:(NSURLRequest *)urlRequest completionHandler:(void (^)(NSURLResponse *response, id responseObject, NSError *error))originalCompletionHandler{

    //create a completion block that wraps the original
    void (^authFailBlock)(NSURLResponse *response, id responseObject, NSError *error) = ^(NSURLResponse *response, id responseObject, NSError *error)
    {
        NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
        if([httpResponse statusCode] == 401){
            NSLog(@"401 auth error!");
            //since there was an error, call you refresh method and then redo the original task
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

                //call your method for refreshing OAuth tokens.  This is an example:
                [self refreshAccessToken:^(id responseObject) {

                    NSLog(@"response was %@", responseObject);
                    //store your new token

                    //now, queue up and execute the original task               
                    NSURLSessionDataTask *originalTask = [super dataTaskWithRequest:urlRequest completionHandler:originalCompletionHandler];
                    [originalTask resume];
                }];                    
            });
        }else{
            NSLog(@"no auth error");
            originalCompletionHandler(response, responseObject, error);
        }
    };

    NSURLSessionDataTask *task = [super dataTaskWithRequest:urlRequest completionHandler:authFailBlock];

    return task;

} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-15T15:20:28.170

在 AFHTTPClient 的 init 方法中注册`AFNetworkingOperationDidFinishNotification`将在请求完成后发布的。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(HTTPOperationDidFinish:) name:AFNetworkingOperationDidFinishNotification object:nil]; 
```

在通知处理程序中检查状态代码并创建一个新的`copy`。`AFHTTPRequestOperation`

```
- (void)HTTPOperationDidFinish:(NSNotification *)notification {
  AFHTTPRequestOperation *operation = (AFHTTPRequestOperation *)[notification object];

    if (![operation isKindOfClass:[AFHTTPRequestOperation class]]) {
        return;
    }

    if ([operation.response statusCode] == 401) {
        // enqueue a new request operation here
    }
} 
```

编辑：

一般来说，您不需要这样做，只需使用此 AFNetworking 方法处理身份验证：

```
- (void)setAuthenticationChallengeBlock:(void (^)(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge))block; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-12T19:00:46.573

这是用户 @adamup 的[答案的](https://stackoverflow.com/a/22158619/121397 "answer")**Swift实现**

```
class SessionManager:AFHTTPSessionManager{
static let sharedInstance = SessionManager()
override func dataTaskWithRequest(request: NSURLRequest!, completionHandler: ((NSURLResponse!, AnyObject!, NSError!) -> Void)!) -> NSURLSessionDataTask! {

    var authFailBlock : (response:NSURLResponse!, responseObject:AnyObject!, error:NSError!) -> Void = {(response:NSURLResponse!, responseObject:AnyObject!, error:NSError!) -> Void in

        var httpResponse = response as! NSHTTPURLResponse

        if httpResponse.statusCode == 401 {
            //println("auth failed")

            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), { () -> Void in

                self.refreshToken(){ token -> Void in
                    if let tkn = token{
                        var mutableRequest = request.mutableCopy() as! NSMutableURLRequest
                        mutableRequest.setValue(tkn, forHTTPHeaderField: "Authorization")
                        var newRequest = mutableRequest.copy() as! NSURLRequest
                        var originalTask = super.dataTaskWithRequest(newRequest, completionHandler: completionHandler)
                        originalTask.resume()
                    }else{
                        completionHandler(response,responseObject,error)
                    }

                }
            })
        }
        else{
            //println("no auth error")
            completionHandler(response,responseObject,error)
        }
    }
    var task = super.dataTaskWithRequest(request, completionHandler:authFailBlock )

    return task
}} 
```

其中 refreshToken (...) 是我为从服务器获取新令牌而编写的扩展方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-12T20:41:39.257

采取了类似的方法，但我无法通过 phix23 的回答获得状态代码对象，因此我需要一个不同的行动计划。AFNetworking 2.0 改变了一些事情。

```
-(void)networkRequestDidFinish: (NSNotification *) notification
{
    NSError *error = [notification.userInfo objectForKey:AFNetworkingTaskDidCompleteErrorKey];
    NSHTTPURLResponse *httpResponse = error.userInfo[AFNetworkingOperationFailingURLResponseErrorKey];
    if (httpResponse.statusCode == 401){
        NSLog(@"Error was 401");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T21:27:31.687

如果您是子类化`AFHTTPSessionManager`或直接使用 an`AFURLSessionManager`您可以使用以下方法设置任务完成后执行的块：

```
/**
 Sets a block to be executed as the last message related to a specific task, as handled by the `NSURLSessionTaskDelegate` method `URLSession:task:didCompleteWithError:`.

 @param block A block object to be executed when a session task is completed. The block has no return value, and takes three arguments: the session, the task, and any error that occurred in the process of executing the task.
*/
- (void)setTaskDidCompleteBlock:(void (^)(NSURLSession *session, NSURLSessionTask *task, NSError *error))block; 
```

只需为其中的会话的每个任务执行您想做的任何事情：

```
[self setTaskDidCompleteBlock:^(NSURLSession *session, NSURLSessionTask *task, NSError *error) {
    if ([task.response isKindOfClass:[NSHTTPURLResponse class]]) {
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)task.response;
        if (httpResponse.statusCode == 500) {

        }
     }
}]; 
```

**编辑：** 事实上，如果您需要处理响应对象中返回的错误，上述方法将无法完成这项工作。如果您要进行子类化，一种方法`AFHTTPSessionManager`可能是子类化并设置一个自定义响应序列化程序，它的`responseObjectForResponse:data:error:`重载如下：

```
@interface MyJSONResponseSerializer : AFJSONResponseSerializer
@end

@implementation MyJSONResponseSerializer

#pragma mark - AFURLResponseSerialization
- (id)responseObjectForResponse:(NSURLResponse *)response
                           data:(NSData *)data
                          error:(NSError *__autoreleasing *)error
{
    id responseObject = [super responseObjectForResponse:response data:data error:error];

    if ([responseObject isKindOfClass:[NSDictionary class]]
        && /* .. check for status or error fields .. */)
    {
        // Handle error globally here
    }

    return responseObject;
}

@end 
```

并将其设置在您的`AFHTTPSessionManager`子类中：

```
@interface MyAPIClient : AFHTTPSessionManager
+ (instancetype)sharedClient;
@end

@implementation MyAPIClient

+ (instancetype)sharedClient {
    static MyAPIClient *_sharedClient = nil;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        _sharedClient = [[MyAPIClient alloc] initWithBaseURL:[NSURL URLWithString:MyAPIBaseURLString]];
        _sharedClient.responseSerializer = [MyJSONResponseSerializer serializer];
    });

    return _sharedClient;
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T21:33:43.490

为确保不会同时发出多个令牌刷新，最好将网络请求排队并在令牌刷新时阻塞队列，或者在令牌刷新方法中添加互斥锁（@synchronized 指令）。

# ios - 父/子 NSManagedObjectContext 不起作用

> ID：12893840
> 
> 赞同：1
> 
> 时间：2012-10-15T10:37:31.227
> 
> 标签：ios, iphone, core-data, nsmanagedobjectcontext

我在使用父子 NSManagedObjectContext 时遇到了一些问题。问题是我想在我的 EventsPlanner 类中使用一个子 NSManagedObjectContext 来创建一个随机事件。如果您发现直接保存到主 NSManagedObjectContext 时它可以工作，但我想使用子级并更新到父级。

如果您看到按下“+”按钮会添加一个新事件，但它看起来是空的。

我添加了示例项目-> [https://dl.dropbox.com/u/63377498/ParentChildExperiment.zip](https://dl.dropbox.com/u/63377498/ParentChildExperiment.zip)

**创建子 NSManagedObjectContext：**

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [_managedObjectContext setUndoManager:nil];
    [_managedObjectContext setParentContext:appDelegate.managedObjectContext];
    return _managedObjectContext;
} 
```

**保存：**

```
Event *event = [[Event alloc] initWithEntity:self.eventEntity insertIntoManagedObjectContext:nil];
event.title = ...;
event.location = ...;
event.timeStamp = ...;

[self.managedObjectContext insertObject:event];

[self.managedObjectContext performBlock:^{

NSError *childError = nil;
if ([self.managedObjectContext save:&childError]) {
    [self.managedObjectContext.parentContext performBlock:^{

        NSError *parentError = nil;

        if (![self.managedObjectContext.parentContext save:&parentError]) {
            NSLog(@"parent error: %@", [parentError description]);
            abort();

        }                        
    }];
} else {
    NSLog(@"child error: %@", [childError description]);
    abort();
}}]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:18:15.240

我不能告诉你这不起作用的确切原因，但问题似乎是你在没有托管对象上下文的情况下创建了*Event*实体，然后将其添加到 MOC：

```
// Create random object
Event *event = [[Event alloc] initWithEntity:self.eventEntity insertIntoManagedObjectContext:nil];
event.title = ...;
event.location = ...;
event.timeStamp = ...;

// Insert object
[self.managedObjectContext insertObject:event]; 
```

如果您将其更改为

```
Event *event = [[Event alloc] initWithEntity:self.eventEntity
              insertIntoManagedObjectContext:self.managedObjectContext];
event.title = ...;
event.location = ...;
event.timeStamp = ...; 
```

然后新事件在表格视图中正确显示。

# javascript - 如何在 twitter-bootstrap 中应用 navbar-inverse 的 CSS

> ID：12893846
> 
> 赞同：7
> 
> 时间：2012-10-15T10:37:48.697
> 
> 标签：javascript, css, twitter-bootstrap, less

通过使用[twitter-bootstrap](http://twitter.github.com/bootstrap/components.html#navbar) 可以通过添加来修改导航栏的外观`.navbar-inverse`。

```
<div class="navbar navbar-inverse">
  ...
</div> 
```

我想做的是一个简单的js模块来改变网站的主题。
我的脚本只能将一个类添加到正文选择器，然后一切都由 less 文件完成。

```
$('body').addClass('theme-dark'); 
```

使用js代码很容易得到结果。

```
$('.navbar').addClass('navbar-inverse'); 
```

但我的问题不同：
是否可以通过将 newTheme 类添加到 body 选择器来应用 navbar-inverse，更改 less 文件？
如果是，我应该如何写更少的规则？

我想做这样的事情：

```
.theme-dark {
    .navbar {
       // a function which makes
       // the style of navbar-inverse 
```

要求：

我对 css、jquery 和下划线使用较少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:51:22.297

LESS 提供了在其他上下文中使用先前定义的类作为 mixin 的能力。尝试这个：

```
.theme-dark {
    .navbar {
        .navbar-inverse;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T18:37:46.773

.navbar div{ padding: 0.2em;} 这样就解决了问题

# ibm-mobilefirst - 如何将 xml 发布到 web 服务并使用 worklight 获得结果

> ID：12893848
> 
> 赞同：1
> 
> 时间：2012-10-15T10:37:54.937
> 
> 标签：ibm-mobilefirst

我是 worklight 的新手，并使用 http 适配器将 xml 发布到 web 服务，以便我可以获得结果。但我无法做到这一点，它会给出一些错误。我的代码在 adapter.js 中

```
function getStories(interest) {
    path = getPath(interest);

    var input = {
        method : 'post',
        returnedContentType : 'xml',
        path : path
        parameters : '<HOME><REQUEST><USERID>701692</USERID><SECURE_KEY>B6F86B1B11E9EAFC</SECURE_KEY><EMPLOYEE_ID>000000000000035B</REQUEST></HOME>'
    };

    return WL.Server.invokeHttp(input);
} 
```

它给出这样的输出

> { "errors": ["Premature end of file.", "Failed to parse the payload from backend (procedure: HttpRequest)" ], "info": [ ], "isSuccessful": false,
> "responseHeaders": { "Cache -Control”：“private”，“Content-Length”：“0”，“Date”：“星期一，2012 年 10 月 15 日 10:29:01 GMT”，“服务器”：“Microsoft-IIS/6.0”，“X -AspNet-Version”：“2.0.50727”，“X-Powered-By”：“ASP.NET”}，“statusCode”：200，“statusReason”：“OK”，“警告”：[]}

我想在 worklight 中实现这段代码（如下所示），我该怎么做。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>

<BODY>
<form name="f1" id="fi" action="http://mydoman.aspx" method="post">
<input TYPE="hidden" name="xml" value="<HOME><REQUEST><USERID>701692</USERID><SECURE_KEY>B6F86B1B11E9EAFC17F5844EE9B16669</SECURE_KEY></REQUEST></HOME>"/>

<input type="submit" value="submit"/>

</form>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:39:17.367

您错过了一个步骤，您正在尝试将 XML 发送到您的后端。请阅读模块 5.3 - 在 SOAP 服务中使用 HTTP 适配器：[https ://www.ibm.com/developerworks/mobile/worklight/getting-started/index.html](https://www.ibm.com/developerworks/mobile/worklight/getting-started/index.html)

你的问题的答案是：

```
var request = <HOME><REQUEST><USERID>701692</USERID><SECURE_KEY>B6F86B1B11E9EAFC</SECURE_KEY><EMPLOYEE_ID>000000000000035B</EMPLOYEE_ID></REQUEST></HOME>;

function getStories(interest) {
    var input = {
        method : 'post',
        returnedContentType : 'xml',
        path : '',
        body : {
            content: request.toString(),
            contentType: 'text/xml; charset=utf-8'
        }
    };
    return WL.Server.invokeHttp(input);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:06:09.317

returnedContentType : 'xml' 表示 Worklight 将尝试解析它从后端获得的响应。查看错误消息，我可以看到“Content-Length”：“0”，这意味着响应正文为空，因此无法解析为 XML。尝试将返回的内容类型更改为“普通”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T12:37:37.183

```
var request = '<HOME><REQUEST><USERID>701692</USERID><SECURE_KEY>B6F86B1B11E9EAFC</SECURE_KEY><EMPLOYEE_ID>000000000000035B</EMPLOYEE_ID></REQUEST></HOME>';

function getStories(interest) {
    var input = {
        method : 'post',
        returnedContentType : 'xml',
        path : '',
        body : {
            content: request,
            contentType: 'text/xml; charset=utf-8'
        }
    };
    return WL.Server.invokeHttp(input);
} 
```

# c++ - 终止 boost 线程 (C++)

> ID：12893851
> 
> 赞同：1
> 
> 时间：2012-10-15T10:38:24.227
> 
> 标签：c++, windows, boost

我有一个问题，我需要终止 boost 线程。并从主线程执行此操作。使用标志是不合适的。请帮我。我需要windows解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:45:20.037

请阅读[以下问题](https://stackoverflow.com/questions/4125666/boost-c-how-to-kill-thread-opened-by-another-thread)的答案。如果您仍然必须在 Windows 上终止线程，您可以这样做：`TerminateThread(yourThread.native_handle());`

# winforms - 下载文件（使用 Thread 类）

> ID：12893852
> 
> 赞同：1
> 
> 时间：2012-10-15T10:38:26.983
> 
> 标签：winforms, multithreading, stream, httpwebrequest, download

好的，我知道这个问题可能很愚蠢，但我以前从未这样做过，所以我问了这个问题。我如何使用 Thread 类下载文件（比如说，从互联网上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:55:22.160

“使用线程类”是什么意思？我猜你想下载一个线程化的文件，这样它就不会阻塞你的用户界面或程序的其他部分。

我假设您使用 C++ 和 WINAPI。首先创建一个线程。[本教程](http://www.bogotobogo.com/cplusplus/multithreaded2.php)提供了有关 WIN32 线程的良好信息。该线程将负责下载文件。为此，您只需连接到端口 80 上的网络服务器并发送 HTTP GET 请求以获取所需文件。它可能看起来与此类似（注意换行符）：

```
GET /path/to/your/file.jpg HTTP/1.1\r\n
Host: www.host.com\r\n
Connection: close\r\n
\r\n
\r\n 
```

然后，服务器将回复一个 HTTP 响应，其中包含带有前面标头的文件。解析此标头并读取内容。

[可以在此处找到有关 HTTP 的更多信息。](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:20:30.777

如果建议您不要使用线程下载文件。最好使用更针对 I/O 的异步构造，因为它们会产生比线程更低的开销。我不知道您正在使用哪个版本的 .NET Framework，但在 4.5 中，这样的东西应该可以工作：

```
private static Task DownloadFileAsync(string uri, string localPath)
{
    // Get the http request
    HttpWebRequest webRequest = WebRequest.CreateHttp(uri);

    // Get the http response asynchronously
    return webRequest.GetResponseAsync()
        .ContinueWith(task =>
            {
                // When the GetResponseAsync task is finished, we will come 
                // into this contiuation (which is an anonymous method).

                // Check if the GetResponseAsync task failed.
                if (task.IsFaulted)
                {
                    Console.WriteLine(task.Exception);
                    return null;
                }

                // Get the web response.
                WebResponse response = task.Result;

                // Open a file stream for the local file.
                FileStream localStream = File.OpenWrite(localPath);

                // Copy the contents from the response stream to the 
                // local file stream asynchronously.
                return response.GetResponseStream().CopyToAsync(localStream)
                    .ContinueWith(streamTask =>
                        {
                            // When the CopyToAsync task is finished, we come 
                            // to this continuation (which is also an anonymous 
                            // method).    
                            // Flush and dispose the local file stream. There 
                            // is a FlushAsync method that will flush 
                            // asychronously, returning yet another task, but 
                            // for the sake of brevity I use the synchronous 
                            // method here.
                            localStream.Flush();
                            localStream.Dispose();

                            // Don't forget to check if the previous task 
                            // failed or not.
                            // All Task exceptions must be observed.
                            if (streamTask.IsFaulted)
                            {
                                Console.WriteLine(streamTask.Exception);
                            }
                        });
                // since we end up with a task returning a task we should 
                // call Unwrap to return a single task representing the 
                // entire operation
            }).Unwrap(); 
} 
```

您可能想详细说明错误处理。简而言之，这段代码的作用是：

有关其工作原理的更详细说明，请参阅代码注释。

# asp.net - System.Net.Http 版本冲突导致构建警告

> ID：12893854
> 
> 赞同：32
> 
> 时间：2012-10-15T10:38:42.083
> 
> 标签：asp.net, nuget

nuget 包 Microsoft.Net.Http.2.0.20710.0 导致我发出构建警告，因为它使用 System.Net.Http, Version=2.0.0.0 与来自另一个包的版本 4 冲突。

**解决这个问题的最佳方法是什么？Microsoft.Net.Http.2.0.20710.0 包是否已过时，我应该在我的项目中手动引用 System.Net.Http, Version=4.0.0.0 吗？**

构建输出是：

```
 There was a conflict between "System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" and "System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
      "System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" was chosen because it was primary and "System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" was not.
      References which depend on "System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" [C:\Working\MyProject\packages\Microsoft.Net.Http.2.0.20710.0\lib\net40\System.Net.Http.dll].
          C:\Working\MyProject\packages\Microsoft.Net.Http.2.0.20710.0\lib\net40\System.Net.Http.dll
            Project file item includes which caused reference "C:\Working\MyProject\packages\Microsoft.Net.Http.2.0.20710.0\lib\net40\System.Net.Http.dll".
              System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL
      References which depend on "System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" [C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Net.Http.dll].
          C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll
            Project file item includes which caused reference "C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll".
              System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
              System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
          C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.dll
            Project file item includes which caused reference "C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.Client.4.0.20710.0\lib\net40\System.Net.Http.Formatting.dll".
              System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
              System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
              System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
          C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.dll
            Project file item includes which caused reference "C:\Working\MyProject\packages\Microsoft.AspNet.WebApi.WebHost.4.0.20710.0\lib\net40\System.Web.Http.WebHost.dll".
              System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3247: Found conflicts between different versions of the same dependent assembly. 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-20T22:35:24.910

[您可以尝试此 Microsoft Connect 错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/733213/warning-generated-for-default-asp-net-mvc-4-project)中提到的解决方法。

或者您可以尝试将类似这样的内容添加到您的 Web.config：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

**编辑：**

这是 Connect Bug 中的解决方法：

> 修改.......: <Reference Include="System.Net.Http">
> 改为......: <Reference Include="System.Net.Http, Version=4.0.0.0">

# mysql - 使用 LEFT() 函数提高 MySQL 查询性能

> ID：12893856
> 
> 赞同：1
> 
> 时间：2012-10-15T10:38:50.790
> 
> 标签：mysql, query-optimization

> **可能重复：**
> [是否可以在 MySQL 中使用基于函数的索引？](https://stackoverflow.com/questions/10595037/is-it-possible-to-have-function-based-index-in-mysql)

我有一个带有字符串字段**s**的表，我想运行这个查询：

```
SELECT * FROM mytable WHERE s = LEFT("färgkört", CHAR_LENGTH(s)); 
```

它的解释清楚地表明我没有在该字段上使用索引：

```
+----+-------------+--------------+------+---------------+------+---------+------+--------+-------------+
| id | select_type | table        | type | possible_keys | key  | key_len | ref  | rows   | Extra       |
+----+-------------+--------------+------+---------------+------+---------+------+--------+-------------+
|  1 | SIMPLE      | mytable      | ALL  | NULL          | NULL | NULL    | NULL | 766554 | Using where |
+----+-------------+--------------+------+---------------+------+---------+------+--------+-------------+ 
```

有没有办法优化这样的查询？

# c# - 在 ASP.NET 中使用 Java 模型

> ID：12893858
> 
> 赞同：0
> 
> 时间：2012-10-15T10:38:53.537
> 
> 标签：c#, java, asp.net, .net, wpf

我想使用java模型。这是人体模型。它是用 Java 编写的，但我必须在 ASP.NET 中使用它。我怎样才能做到这一点？我尝试了 IKVM 开源程序。当我创建一个 .dll 时，我收到了很多未找到的警告。我已经安装了 java sdk 和 eclipse。我可以在.NET 下运行java 方法。但我需要一个完整的模型。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:41:20.357

也许，-您能否更详细地描述您的设置？

我从你的问题中收集到的是你有一个普通的 ASPX 页面。在此页面中，您想托管一个 Java 小程序。

**一个建议可能是在 iFrame 中显示小程序（阅读：不需要特殊的 DLL）。**

在这种情况下，您可以像往常一样制作一个嵌入 Applet 的单独 HTML 页面（：那里有大量的howtos）。并在 iFrame 中显示。

使用此设置，您可能会遇到跨端脚本问题，要解决此问题，请确保主机 HTML 页面与 ASPX 页面位于同一域中。

祝你好运

# javascript - jQuery 事件被跳过

> ID：12893861
> 
> 赞同：0
> 
> 时间：2012-10-15T10:38:58.217
> 
> 标签：javascript, jquery, events

我构建了一个幻灯片菜单（使用 Slide JS - [http://www.slidesjs.com/](http://www.slidesjs.com/)）并添加了一个悬停事件，因此当将鼠标移到菜单点上时图像已经切换。此外，当移出整个块时，会有一个 mouseleave 事件，它将图像和菜单点设置回第一个。现在，当我在菜单点之间快速切换（悬停事件）然后离开整个块（mouseleave）时，它通常会跳过 mouseleave 事件（或者它永远不会到达它，因为悬停事件（包括淡入淡出效果）占用的时间太长） .

有没有办法彻底解决每个事件（或至少连续最后一个事件 - 例如 mouseleave 或 last hover）？

也许网站布局的图像有帮助？ ![在此处输入图像描述](../Images/f793713c4651e6cba1fa92f1b00a7a3e.png)

红色：悬停事件（更改绿色内容）

蓝色：Mouseleave-Event（绿色恢复默认）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:46:31.730

如果`fade`效果是罪魁祸首，那么尝试在效果`stop(true, true)`之前添加一个函数`fade`。

```
$(slideshow-menu-selector).on('mouseleave', function(){
    // Reset code here
    $(element-selector).stop(true, true).fadeOut();
}) 
```

根据您的问题，这只是一个示例代码。如果您可以放一个[Fiddle](http://www.jsfiddle.net)，那将有很大帮助！

# asp.net-mvc - VS2010 Entity Designer 与其他第 3 方替代方案？

> ID：12893867
> 
> 赞同：1
> 
> 时间：2012-10-15T10:39:13.693
> 
> 标签：asp.net-mvc, visual-studio, entity-framework

我一直在享受用于 Model-First DB 建模和生成的 VS2010 Entity Designer。但是，我发现它具有限制性，尤其是在标记关联和添加注释方面。我的模型会很大，我计划为模型的不同部分使用多个 EDMX 文件。生成的类将由 ASP.NET MVC 项目使用。

Model-First DB Migration对我来说非常重要，VS2012不支持EF设计器有很大改进的地方。VS 2010 EF 设计器不启用标签等，因此当您继续规范化模型时会发生信息丢失，即“这些列现在在哪里？” “嗯，它们现在是那个交叉表中的记录。”

我一直在寻找更全面地解决这一领域的替代 3rd 方解决方案。我遇到的第一个产品是 DevArt 的 Entity Developer。

我将不胜感激有关第 3 方解决方案的任何经验和建议。很遗憾，我需要退出 MS 的 VS EF 产品。

非常感谢，

埃德

# jsf - 在单击删除命令按钮之前应检查复选框...如何在 jsf 中执行

> ID：12893872
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:39:32.587
> 
> 标签：jsf, richfaces

```
 <h:form>
        <rich:dataTable value="#{classBean.classList}" var="class"
                id="classTable" style="width: 90%" rows="10">    
        <f:facet name="header">
        <h:outputText value="class list" style="float: left"></h:outputText>
        </f:facet>
        <rich:column style="width: 35px">
            <h:selectBooleanCheckbox
            value="#{classBean.selected[class.name]}" />
            </rich:column>
            <rich:column>
        <f:facet name="header">
                   class name
             </f:facet>
        <h:outputText value="#{class.name}" />
        </rich:column>  
        <f:facet name="footer">
           <a4j:commandButton value="add" action="#{classBean.add}" />
           <a4j:commandButton value="delete" action="#{classBean.delete}" />
         </f:facet>
        <rich:dataTable>
     <h:form> 
```

我必须进行验证，例如用户应该在单击删除命令按钮之前至少选择一个复选框。

如果我使用验证器，它将仅检查选中或未选中...。单击删除命令按钮时，我需要选中复选框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:09:31.190

Add this code in your bean

```
private boolean checked;

public boolean isChecked() 
{

    if(selected.values().contains(true))
        checked=true;
    else
        checked=false;

    return checked;
} 
```

use a popup panel to display error message and set the rendered attribute to #{bean.checked}

# python - 获取Python中mongoDB集合中已有文档的对象ID

> ID：12893873
> 
> 赞同：2
> 
> 时间：2012-10-15T10:39:33.953
> 
> 标签：python, django, templates, mongodb

我在 mongodb 中有一个集合，我已经在其中插入了文档。现在我想更新一个文档条目，我想在 django 模板中检索文档 ID，就像我在 HTML.I 中的条目旁边使用复选框一样想给单个盒子一个唯一的 id，我打算使用与文档 id 相同的 .. 那么**我如何在 DJANGO 模板中检索文档 ID**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T09:38:53.507

您可以使用该`_id`属性获取 MongoDB 文档的 ID。但是`{{ object._id }}`，在 Django 模板中使用会引发错误，提示找不到 _id 属性。

要解决这个问题，您必须为您的应用程序创建一个自定义模板标签并使用它来获取 _id。

在你的 app 文件夹中，创建一个 templatetags 文件夹并创建一些 python 文件，例如：appname_tags.py。

目录结构将是这样的

```
/projectdir
  /appdir
    /templatetags
      __init__.py
      appname_tags.py
    models.py
    views.py 
```

在 appname_tags.py 中粘贴以下代码

```
from django import template
register = template.Library()

@register.filter("mongo_id")
def mongo_id(value):
    return str(value['_id']) 
```

现在，您可以通过加载标签模块并将 mongo 文档对象传递给它来在模板中使用这个新的自定义模板标签。

```
<html>
 <body>
  {% load appname_tags %}
  <p>here is your mongodb record id: {{ object|mongo_id }}</>
 </body>
</html> 
```

请记住，应用程序应该在`INSTALLED_APPS`设置变量中，`settings.py`以便 django 加载模板标签。

# mysql - 在mysql中只选择星期五和即将到来的星期一

> ID：12893875
> 
> 赞同：5
> 
> 时间：2012-10-15T10:39:37.940
> 
> 标签：mysql, select, dayofweek, weekday, weekend

我的任务是建立一个考勤系统，我做得很好，但我被困在一个地方。在计算树叶时，如果一个人在星期五请假，然后在星期一再次请假，那么周六和周日之间的时间也应该算作请假。

通过以下查询，我只能从表中提取星期五和星期一：

```
SELECT * FROM  `main` WHERE (DAYOFWEEK( DATE ) =2 OR DAYOFWEEK( DATE ) =6 ) 
AND emp_no =4 AND STATUS ='leave' ORDER BY DATE ASC 
```

但我不知道如何选择周五和下周一**，**所以我知道这个人周五和周一都在休假。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:44:05.290

这将为您提供跨越周五和下周一的所有“叶子”：

```
SELECT *
FROM   main fri JOIN main mon
    ON fri.DAYOFWEEK(DATE)=6
   AND mon.DATE = fri.DATE + INTERVAL 3 DAY
   AND fri.emp_no = mon.emp_no
WHERE  fri.STATUS='leave' AND mon.STATUS='leave' 
```

# ruby - 加密 - Ruby 和 ColdFusion 中的不同结果

> ID：12893882
> 
> 赞同：2
> 
> 时间：2012-10-15T10:40:02.443
> 
> 标签：ruby, coldfusion, openssl

我有在 ColdFusion 中加密的数据，我试图在 Ruby 中解密。我无法让输出匹配。

在 ColdFusion 方面，我有这样的事情：

```
<cfset key = 'DiYVka4mAYk=' /> 
<cfset str = 'hello' />

<cfset enc = encrypt(str, key, 'des', "base64") />
<cfset dec = decrypt(enc, key, 'des', "base64") />

<cfoutput>
#str#   <!--- 'hello' --->
<br />
#enc#   <!--- '3rNKAnEu+VA=' --->
<br />
#dec#   <!--- 'hello' --->
</cfoutput> 
```

同样，在 Ruby 中实现：

```
require 'openssl'
require 'base64'

str = 'hello'
key = 'DiYVka4mAYk='

des = OpenSSL::Cipher.new('des')

des.encrypt 
des.key = key
data = des.update(str) + des.final  
enc = Base64.encode64(data)

des.decrypt
des.key = key
dec = des.update(Base64.decode64(enc)) + des.final  

puts str  # => 'hello'
puts enc  # => 'wVQs6NjOZwM='
puts dec  # => 'hello' 
```

两者都有效，但加密的字符串不同。所以在 ColdFusion 和 Ruby 之间传递加密数据是行不通的。

密钥是使用 ColdFusion 的`generateSecretKey()`函数生成的。它看起来是 Base64 编码的，所以我尝试在 Ruby 中设置这样的密钥：

```
key = Base64.decode64('DiYVka4mAYk=') 
```

同样，代码有效，但加密字符串不同。

关于密钥编码，我有什么遗漏吗？

另外，我认为在 ColdFusion 中将算法设置为“des”时可能会*隐含更多信息。*因此，我尝试使用以下命令在 ruby​​ 中创建密码：

*   德斯
*   德式CBC
*   DES-CFB
*   des-ecb
*   德埃德
*   des-ede-cbc
*   des-ede-cfb
*   des-ede-ofb
*   脱氧核糖核酸

同样，加密字符串的一些变化。但没有一个与原始 ColdFusion 版本相匹配。

注意：ColdFusion 加密已经使用了很长时间，所以我无法在这方面进行任何编辑。“修复”必须在 Ruby 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:05:04.833

如被问及，我将把我的评论转移到一个答案：

您必须确保两端的密码模式、IV 和填充匹配。

1.8.7 和 1.9.3 中的 Ruby 默认值是 ECB，没有 IV，以及 PCKS 填充。ColdFusion 默认值是相同的。

但是，在 ruby​​ 1.9.2 或您的特定环境中，默认密码模式似乎不是 ECB，它正在更改输出。正如您评论的那样，手动将密码模式设置为 ECB (OpenSSL::Cipher.new("DES-ECB")) 解决了这个问题。

# bluetooth - 蓝牙监控工具

> ID：12893885
> 
> 赞同：1
> 
> 时间：2012-10-15T10:40:11.010
> 
> 标签：bluetooth, monitoring

对于我的项目，我有一部 Android 手机和一部通过蓝牙进行通信的 Arduino 设备。我想知道是否有人知道我可以用来监控两个设备之间的蓝牙通信的任何软件工具。类似于窃听数据包的东西。最好用于 Linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:56:07.413

看看[ubertooth 一个](http://ubertooth.sourceforge.net/hardware/one/)。在链接的网页中有关于如何构建加密狗的说明，以及可以购买到出售组装加密狗的商店的链接。Ubertooth 应该可以很好地与 Kismet 一起工作，因此在 Linux 中，通过使用 BT 插件（免责声明：我对此没有个人经验）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:08:19.197

听起来你在寻找蓝牙嗅探器。

坏消息：它们几乎完全是基于 Windows 操作系统的，而且成本很高。

[http://www.fte.com/products/bluetooth.aspx](http://www.fte.com/products/bluetooth.aspx)

如果您将 BlueZ 用于通信的一侧，则可以使用 BlueZ HCIDUMP 应用程序和 Wireshark。

我认为没有人制造过 Linuz/Bluez 嗅探器——可能是错的。

# javascript - 在 iScroll 上添加偏移量以允许最后一项位于顶部

> ID：12893887
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:40:24.050
> 
> 标签：javascript, iscroll4

我正在尝试制作一个列表，`<li>`以便当我单击一个时，它会上升到页面的顶部，无论它是最后一个还是列表中只有两个。我调用 scrollToElement() 但由于元素后缺少填充而反弹回来。我尝试附加一个`<li>`高度为 2000px 的元素，但列表会反弹回来，使最后一个元素回到底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:45:43.813

我找到了解决方案，我需要在添加 padding 后调用 .refresh() `<li>`。之后，它将像预期的那样滚动到底部。

# pagination - 狮身人面像字母分页/导航菜单

> ID：12893891
> 
> 赞同：0
> 
> 时间：2012-10-15T10:40:38.563
> 
> 标签：pagination, sphinx, alphabetical

我需要在 Sphinx 中做一个分页/导航菜单

*（用于标志） 0 1 2 3 4 5 6 7 8 9 ABCDEFGHIJKLMNOPQRSTU VWXYZ

并过滤结果。

在“A”页面中 - 仅以“A”开头的结果

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:23:47.707

但如果你的意思是 sphinxsearch，像这样

```
sql_query = SELECT id, name, ORD(IF(ORD(name) BETWEEN 48 AND 57 OR ORD(UPPER(name)) BETWEEN 65 AND 90, UPPER(SUBSTRING(name,0,1)), '*')) AS ord, ...
sql_attr_uint = ord 
```

会给你一个代表名字的第一个字母的数字属性。可与**setFilter**一起使用以仅返回与该值匹配的结果。

甚至可以与**setGroupBy**一起使用以获取与每个序数匹配的结果数。

参考：[http ://www.asciitable.com/](http://www.asciitable.com/)

--

编辑添加：使用整数属性 - 通过 mysql ORD 函数获得整数，因为 attr str2ordinal （也不是字符串属性！）允许过滤。像这样将自己转换为整数允许过滤。

例如，只得到“A”的结果，可以做

```
$cl->setFilter('ord',array(ord('A'))); 
```

这是因为 php 的 ord 函数的工作方式与 mysql 相同。

# ravendb - RavenDB 简单索引创建

> ID：12893892
> 
> 赞同：0
> 
> 时间：2012-10-15T10:40:45.523
> 
> 标签：ravendb, ravendb-studio

我在使用 raven db 接口添加分析器时遇到问题。

在编写 StandartAnalyzer 或 SimpleAnalyzer 时，它永远不会保存。

![在此处输入图像描述](../Images/4a2fa2659a10fe3892da8d4b53356a54.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:54:42.853

尝试`Lucene.Net.Analysis.Standard.StandardAnalyzer`并`Lucene.Net.Analysis.SimpleAnalyzer`

# objective-c - 寻找一种在每个函数顶部添加日志的方法——比如跟踪

> ID：12893901
> 
> 赞同：0
> 
> 时间：2012-10-15T10:41:13.130
> 
> 标签：objective-c, logging, trace

我发现如果我添加`NSObjCMessageLoggingEnabled=YES`到参数中，xCode 会在运行时为我创建一个带有方法跟踪的文件。例如：z:appdelegete:didfinishlaunching z:addElement ...

我没有找到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:45:28.283

来自[技术说明 TN2124](http://developer.apple.com/library/mac/#technotes/tn2124/_index.html)

> 如果将 NSObjCMessageLoggingEnabled 环境变量设置为“YES”，Objective-C 运行时会将所有已分派的 Objective-C 消息记录到名为 /tmp/msgSends-pid/ 的文件中。

# asp.net-mvc - JQuery 中的 ViewBag

> ID：12893902
> 
> 赞同：4
> 
> 时间：2012-10-15T10:41:13.517
> 
> 标签：asp.net-mvc, viewbag

我使用`ViewBag`的值如下：

```
var date = "@ViewBag.fromDateForEditMode"
$('#FromDate').val(date); 
```

我得到的只是`@ViewBag.fromDateForEditMode`没有价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:58:05.730

当 MVC 渲染 HTML 文件时，Razor 引擎不会执行，因此不会解析任何内容并将`@ViewBag.fromDateForEditMode`其替换为`ViewBag`属性值 :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-28T20:03:46.813

您遇到的问题是您试图将 @ViewBag.fromDateForEditMode 括在引号中。当您在 jquery 函数中执行此操作时，这会导致浏览器 jquery 处理器在调用脚本时将其评估为文字字符串，而不是让您的 razor 引擎在加载页面时评估 ViewBag 内容。

要解决此问题，请使用：

var startDate = new Date(@ViewBag.StartDate.Year.ToString(), @ViewBag.StartDate.Month.ToString() -1, @ViewBag.StartDate.Day.ToString());

这将允许 razor 引擎在执行 jquery 脚本之前评估 ViewBag 的内容。

# c++ - 数据更改时自动刷新 QTableView

> ID：12893904
> 
> 赞同：9
> 
> 时间：2012-10-15T10:41:13.973
> 
> 标签：c++, qt, model-view-controller

我编写了一个自定义数据模型来显示几个 QTableView。

从技术上讲，一切正常：我的视图显示了我的模型所做的更改。我的数据模型是可编辑的，并且该`setData()`方法确实会发出`dataChanged()`信号并`true`在成功编辑时返回。

但是，我的问题是我必须将鼠标移到 a`QTableView`上才能显示实际更改，而我希望所有视图在进行更改时都显示更改，而无需与视图交互以使它们成为更新。

任何的想法？谢谢，

* * *

值得一提的是，我不使用默认`Qt::EditRole`角色来编辑数据，而是使用自定义枚举值（名为`ActiveRole`）。

这就是我所寻求的：我的数据模型包含有关如何显示数据的属性，用于生成提供给 viewS 的样式表。

因此，在更改模型时，对于每个视图，其所有项目都会受到影响，这就是为什么`dataChanged()`发送信号时带有覆盖所有单元格的索引。

我也尝试发出`layoutChanged()`，但它似乎并没有改变我的行为。

以下是该`setData()`方法的摘录：

```
bool DataModel::setData(QModelIndex const& idx, QVariant const& value, int role)
{
  if (ActiveRole == role)
  {
    // Update data...

    QModelIndex topLeft = index(0, 0);
    QModelIndex bottomRight = index(rowCount() - 1, columnCount() - 1);

    emit dataChanged(topLeft, bottomRight);
    emit layoutChanged();

    return true;
  }
  return false;
} 
```

这是该`data()`方法的示例：

```
QVariant DataModel::data(QModelIndex const& idx, int role) const
{
  if (ActiveRole == role)
  {
    boost::uuids::uuid id;

    return qVariantFromValue(id);
  }

  return QVariant();
} 
```

并且`flags()`确实表明了一个可编辑的模型：

```
Qt::ItemFlags DataModel::flags(QModelIndex const& idx) const
{
  if (false == idx.isValid())
  {
    return Qt::ItemIsEditable;
  }

  return QAbstractTableModel::flags(idx) | Qt::ItemIsEditable;
} 
```

我有一个自定义委托，它严重依赖这个[SO 线程](https://stackoverflow.com/a/1956781/948128)来覆盖`paint`和`sizeHint`方法以绘制`QTextDocument`. 此外，它在 中`ActiveRole`向编辑器提供 的内容，并在中`setEditorData`调用：`DataMode::setData``setModelData`

```
void DataModelDelegate::setEditorData(QWidget* editor, QModelIndex const& idx) const
{
  auto active = qVariantValue<boost::uuids::uuid>(idx.data(ActiveRole));
  static_cast<DataModelEditor*>(editor)->setActive(active);
}

void DataModelDelegate::setModelData(QWidget* editor, QAbstractItemModel* model, QModelIndex const& idx) const
{
  auto active = static_cast<DataModelEditor*>(editor)->getActive();
  model->setData(idx, qVariantFromValue(active), ActiveRole);
} 
```

在 中`createEditor()`，我将来自编辑器的信号插入到委托的插槽中以提交数据：

```
QWidget* DataModelDelegate::createEditor(QWidget* parent, QStyleOptionViewItem const& option, QModelIndex const& idx) const
{
  auto editor = new DataModelEditor(parent);
  connect(editor, SIGNAL(activeItem()), this, SLOT(commitEditorData()));
  return editor;
} 
```

当点击一个项目时，编辑器触发`activeItem`信号；连接的插槽`commitEditorData`反过来`commitData`用参数中的编辑器引发信号。

所以我所有的视图都使用这些自定义委托、编辑器和数据模型。我正在与之交互的视图确实会立即显示更改，但是其他视图也需要将鼠标悬停在它们上方才能显示更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:22:01.367

我实际上发现了问题，这是我的另一个视图没有正确通知数据更改：我的视图每个都显示了我的数据的不同部分，因此需要通知其他视图`dataChanged()`，但是对于它们自己的，适当的索引.

附带说明一下，当我的 Qt 应用程序不是窗口管理器中的活动窗口时，我也遇到了更新视图的问题。解决方案是调用`repaint()`主窗口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-13T04:16:02.203

我遇到了同样的问题，让我在piwi的答案中添加一个详细的解释。如果您更改数据，以及更新单列或多列（或行，取决于您的要求），您应该发出一组从左上角到右下角的索引。例如，如果您有如下表：

![在此处输入图像描述](../Images/39831eec8f2875da720bb52ee7e37387.png)

而且，现在您已经更改了一些数据，并且想要更新单元格第 1 行、第 1-2 列，那么您应该发出信号[dataChange](https://doc.qt.io/qt-5/qabstractitemmodel.html#dataChanged)

```
emit datachange(index(1,1),index(1,2)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T14:45:37.460

你在打电话`setData()`吗？`dataChanged()`信号真的发出了吗？将一些调试日志插槽连接到它。我敢推测这与您的问题非常相似：

[http://www.qtcentre.org/threads/18388-Refreshing-a-QTableView-when-QAbstractTableModel-changes?s=fd88b7c4e59f4487a5457db551f3df2c](http://www.qtcentre.org/threads/18388-Refreshing-a-QTableView-when-QAbstractTableModel-changes?s=fd88b7c4e59f4487a5457db551f3df2c)

# c# - 无法获取文本框值

> ID：12893906
> 
> 赞同：0
> 
> 时间：2012-10-15T10:41:35.237
> 
> 标签：c#, asp.net

我在 Asp.net（带有 c#）页面上有 2 个文本框，我无法从 cs 类中看到这些字段。

在 aspx 中：

```
 <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
   <ajaxToolkit:ToolkitScriptManager runat="server"></ajaxToolkit:ToolkitScriptManager>

<div>
<table>
<tr>
   <td style="width:40%"> <asp:Label ID="lblFullname" runat="server" Text="Fullname" ></asp:Label></td>
   <td style="width:20%"> </td>
   <td style="width:40%"> 
       <asp:TextBox ID="txtFullname" runat="server"></asp:TextBox>
    </td>
</tr>
<tr>
   <td style="width:40%"> <asp:Label ID="lblBirthDate" runat="server" Text="BirthDate" ></asp:Label></td>
   <td style="width:20%"> </td>
   <td style="width:40%">
      <asp:TextBox ID="txtBirthDate" runat="server" Text="" ></asp:TextBox> 
      <ajaxToolkit:MaskedEditExtender ID="MaskedEditExtenderBirthDate" TargetControlID="txtBirthDate" runat="server" 
      UserDateFormat="DayMonthYear" Mask="99/99/9999" MaskType="Date" ></ajaxToolkit:MaskedEditExtender>
   </td>
</tr>
<tr><td colspan="3" style="float:right"><asp:Button Text ="Save"  runat="server" ID="btnSave" OnClick="btnSave_Click"/> </td></tr>
</table>
</div> 
```

我试图从 txtFullname 中获取值。我尝试 txtFullname.Text 和 this.txtFullname 但应用程序看不到这个值。有人可以如何获得该文本框的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:59:14.883

表标签缺少 runat="server" 属性。将其添加到标签中。您应该能够看到cs文件中的字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:03:35.100

> 请检查您是否正确指定了代码隐藏文件名。这可能是无法在代码文件中获取控件名称的问题之一。

如果这对您不起作用，请使用以下代码作为参考。

您没有包含您的“注册”指令。所以，我有幸给予我自己的。

将您的标记更改为：

```
<%@ Page Title="Home Page" Language="vb" MasterPageFile="~/Site.Master" AutoEventWireup="false"
    CodeBehind="Default.aspx.vb" Inherits="WebApplication2._Default" %> 
   <%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit" %>
        <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" />
    <div>
        <table>
            <tr>
                <td style="width: 40%">
                    <asp:Label ID="lblFullname" runat="server" Text="Fullname"></asp:Label>
                </td>
                <td style="width: 20%">
                </td>
                <td style="width: 40%">
                    <asp:TextBox ID="txtFullname" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td style="width: 40%">
                    <asp:Label ID="lblBirthDate" runat="server" Text="BirthDate"></asp:Label>
                </td>
                <td style="width: 20%">
                </td>
                <td style="width: 40%">
                    <asp:TextBox ID="txtBirthDate" runat="server" Text=""></asp:TextBox>
                    <asp:MaskedEditExtender id="MaskedEditExtenderBirthDate" targetcontrolid="txtBirthDate"
                        runat="server" userdateformat="DayMonthYear" mask="99/99/9999" masktype="Date"></asp:MaskedEditExtender>
                </td>
            </tr>
            <tr>
                <td colspan="3" style="float: right">
                    <asp:Button Text="Save" runat="server" ID="btnSave" OnClick="btnSave_Click" />
                </td>
            </tr>
        </table>
    </div>
</asp:Content> 
```

此代码已经过测试并且正在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:45:38.920

您是在母版页还是页面文件中尝试？它应该与`runat="server"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:58:48.437

您的代码显示您正在使用必须使用母版页的内容页。所以你应该检查以下事情来解决这个问题。

1.  您的页面必须包含类似于以下的 Page 指令。<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

2.  代码隐藏文件名必须正确，如页面 Default.aspx 和 Default.aspx.cs

3.  您必须使用 runat="server" 使控制在服务器端可访问。

# oop - 多态性、重载和覆盖是相似的概念吗？

> ID：12893907
> 
> 赞同：31
> 
> 时间：2012-10-15T10:41:45.063
> 
> 标签：oop, polymorphism, overloading, overriding

我对多态性、重载和覆盖的概念感到非常困惑，因为它对我来说似乎相同。请解释这些概念，以及它们之间有何不同

非常困惑，所以请正确指导我。

谢谢

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-15T11:00:53.653

[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)可以通过覆盖来实现。简而言之，多态性是指对象根据自身性质提供不同行为（使用不同实现）的能力。具体来说，取决于它在类层次结构中的位置。

[方法覆盖](http://en.wikipedia.org/wiki/Method_overriding)是指在超类或接口中定义的方法由其子类之一重新定义，从而修改/替换超类提供的行为。调用实现或另一个实现的决定是在运行时动态做出的，具体取决于调用操作的对象。请注意，方法的签名在覆盖时保持不变。

[方法重载](http://en.wikipedia.org/wiki/Method_overloading)与多态无关。它是指定义不同形式的方法（通常通过接收不同的参数编号或类型）。它可以看作是静态多态性。调用实现或其他实现的决定是在编码时做出的。请注意，在这种情况下，方法的签名必须更改。

[运算符重载](http://en.wikipedia.org/wiki/Operator_overloading)是一个不同的概念，与多态性有关，它指的是某种语言相关运算符根据其操作数的类型表现出不同行为的能力（例如，`+`可能意味着与`String`s 的连接和与数字操作数的加法）。

Wikipedia 中的[示例](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming#Java) 非常具有说明性。

以下相关问题也可能有用：

*   [多态性 vs 覆盖 vs 重载](https://stackoverflow.com/q/154577/851811)
*   [多态性 - 仅用两句话定义](https://stackoverflow.com/q/409969/851811)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T10:58:38.050

很快，不，它们不一样。

重载意味着创建具有相同名称但不同参数的方法。

覆盖意味着在子类中重新定义超类方法的主体以改变方法的行为。

多态性是一个广泛的概念，包括覆盖和重载等等。[维基百科对多态性的描述](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)可以帮助你更好地理解多态性。特别是**子类型多态性（或包含多态性）**部分是您应该查看的地方。

# php - 使用mysql php在结构中显示类别和子类别

> ID：12893912
> 
> 赞同：2
> 
> 时间：2012-10-15T10:42:03.430
> 
> 标签：php, mysql, categories

我在 php 和 mysql 中工作，我有一个表格类别，我需要在父类别下显示子类别。喜欢

猫1

```
 -> Subcat1

         -> Subcat11

  -> Subcat2

         --> Subcat21

              --> Subcat211 
```

猫2

```
 -> Subcat2

         -> Subcat21

              -->Subcat22
  -> Subcat3

         --> Subcat31

              --> Subcat311 
```

我的表结构是这样的：

```
CREATE TABLE IF NOT EXISTS `category` (
  `cat_id` bigint(11) NOT NULL AUTO_INCREMENT COMMENT 'This is primary key of the table',
  `name` varchar(255) DEFAULT NULL,
  `parent_cat_id` bigint(11) NOT NULL,   
  PRIMARY KEY (`cat_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ; 
```

你能帮我吗，如何执行我的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:54:24.403

例子：

```
<?php
class RightMenu {
    public $menu;
    public $patch = '';

    public function getMenu($parent = 0) {
        $DB = new DataBase();
        $result = $DB->exec("SELECT * FROM cont_sections WHERE parentid = $parent AND status = 1 ORDER BY name;");
        if(mysql_num_rows($result) > 0) {
            echo '<ul>';
            while($row = mysql_fetch_assoc($result)) {
                if($row['parentid'] == 0){
                    $this->patch = '';
                }
                $this->patch .= '/' . $row["translit"];
                echo '<li><a href="/section'.$this->patch.'.html">' . $row["name"] . '</a>';
                echo $this->getMenu($row["id"]);
                echo '</li>';
            }
            echo '</ul>';
        }
        mysql_free_result($result);
        unset($DB);
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:46:08.447

您需要编写一个递归函数来显示类别和子猫

```
getAllSubCats(0);

function getAllSubCats($cat, $depth = NULL)
{
    $this_cat = mysql_fetch_object(mysql_query("select * from categories where id= '$cat'"));

    $indent = str_repeat("     ", $depth);
    echo $indent . $this_cat->name . "<br />";

    $result = mysql_query("select * from categories where parent_cat_id = '$cat'");

    while($cat = mysql_fetch_object($result))
    {
        getAllSubCats($cat->id, $depth + 1);
    }
} 
```

或使用以下查询如果是一二一关系

```
SELECT cat_id, name, (SELECT name FROM categories WHERE cat_id = a.parent_id) parent_name FROM categories a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:54:06.777

使用**自联接**

```
SELECT p.cat_id, p.name, c.cat_id, c.name
FROM tbl_category p
INNER JOIN tbl_category c ON p.cat_id = c.parent_cat_id 
```

然后用 PHP 操作生成的数组以表格形式显示

# ajax - 显示成功 ajax 消息

> ID：12893924
> 
> 赞同：0
> 
> 时间：2012-10-15T10:42:42.847
> 
> 标签：ajax, jquery, html

关于jquery ajax请求的成功功能，我必须显示一个div，任何人都可以建议一种方法来做到这一点

```
dataString = "labid="+val;
jQuery.ajax({
type: "POST",
url: "../pim/manageLabelsAdmin",
cache: false,
data: dataString,
dataType: "json",
success: function(data) {
    if(data.success == "yes"){           
        //alert(data.status);
        } else {
            alert("Occured internal Error. please check network connection");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:44:33.953

如果要显示的消息已经在 DOM 中，但被隐藏了，您可以在成功回调中执行以下操作：

```
if(data.success == "yes")
{            
    $("#id-of-message-element").show();
} 
```

否则，您可以根据需要使用`.append()`or`.prepend()`或`.html()`or中的任何一个将消息添加到 DOM 。`.text()`

更多关于 DOM 插入方法的信息：

[http://api.jquery.com/category/manipulation/dom-insertion-inside/](http://api.jquery.com/category/manipulation/dom-insertion-inside/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:49:14.457

if your div has id then this

```
$('#yourDivId').show(); 
```

else if your fiv has class

```
$('.yourDivClassName').show(); 
```

# php - 修改php codeigniter活动记录结果中的数据而不改变结构

> ID：12893931
> 
> 赞同：0
> 
> 时间：2012-10-15T10:42:52.467
> 
> 标签：php, arrays, codeigniter, object, activerecord

我有一个使用 get('table_name')->result(); 的 codeigniter 活动记录查询

输出如下，我想做的是反序列化（base_64_decode）“venue_opening_hours”字符串，并将数据结构中的字符串替换为未序列化和 base64_decoded 数据的结果。我知道我可以通过 array_walk 正常执行此操作，但我不知道如何将特定数据位作为数组中的对象访问...

谢谢！

```
array(2) {
  [0]=>
  object(stdClass)#142 (4) {
    ["entry_id"]=>
    string(2) "15"
    ["google-id"]=>
    string(40) "552e7c08d3b86c14d130ebe43a0ba421d03a60ae"
    ["venue_opening_hours"]=>
    string(148) "YToxOntzOjEzOiJvcGVuaW5nX2hvdXJzIjthOjE6e3M6NzoicGVyaW9kcyI7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNSI7czo0OiJ0aW1lIjtzOjQ6IjIzMTUiO319fX0="
    ["title"]=>
    string(18) "Place Name"
  }
  [1]=>
  object(stdClass)#143 (4) {
    ["entry_id"]=>
    string(2) "18"
    ["google-id"]=>
    string(40) "71d9c8e1f64f330637c96d30a0ae15533836a85e"
    ["venue_opening_hours"]=>
    string(972) "YToxOntzOjEzOiJvcGVuaW5nX2hvdXJzIjthOjE6e3M6NzoicGVyaW9kcyI7YToxMDp7aTowO2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIxIjtzOjQ6InRpbWUiO3M6NDoiMjMzMCI7fX1pOjE7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMSI7czo0OiJ0aW1lIjtzOjQ6IjIzMTUiO319aToyO2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIxIjtzOjQ6InRpbWUiO3M6NDoiMjMxNSI7fX1pOjM7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMSI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo0O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiIyIjtzOjQ6InRpbWUiO3M6NDoiMjMxNSI7fX1pOjU7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiMiI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo2O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiI0IjtzOjQ6InRpbWUiO3M6NDoiMjMzMCI7fX1pOjc7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNCI7czo0OiJ0aW1lIjtzOjQ6IjIzMzAiO319aTo4O2E6MTp7czo1OiJjbG9zZSI7YToyOntzOjM6ImRheSI7czoxOiI1IjtzOjQ6InRpbWUiO3M6NDoiMjM0NSI7fX1pOjk7YToxOntzOjQ6Im9wZW4iO2E6Mjp7czozOiJkYXkiO3M6MToiNSI7czo0OiJ0aW1lIjtzOjQ6IjIzNDUiO319fX19"
    ["title"]=>
    string(24) "Other place name"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:53:51.333

您可以使用以下方式访问它：

```
$array[0]->venue_opening_hours 
```

在 for 循环中...

```
//foreach ($array as &$arrayItem)
//{
  foreach ($arrayItem as &$object)
  {
       // extract and convert it...
       //$openinghours =  unserialize(base64_decode($object->venue_opening_hours));
       // Update it...
       $object->venue_opening_hours = $unserialize(base64_decode($object->venue_opening_hours));
  }
//} 
```

是`&$object`一个引用，所以赋值会改变原始结果集中的值...

我也忘了循环数组......我想！所以添加了外循环:)

# c# - 使用 c# 将浏览的文件保存到预定义的文件夹中

> ID：12893934
> 
> 赞同：2
> 
> 时间：2012-10-15T10:43:03.173
> 
> 标签：c#, winforms

我正在使用 c# 开发 WinForm 应用程序。我正在使用一个按钮来浏览图像文件（.jpeg 或 .bmp）。当用户浏览文件并单击确定时，单击另一个“继续或更新”按钮时，我希望浏览的文件应重命名并保存到默认情况下将保存所有图像文件的预定义目录，无需太多用户相互作用！

我怎样才能做到这一点？我使用 openFileDialog 浏览文件，但不知道还能做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:50:51.820

```
//detination filename
string newFileName = @"C:\NewImages\NewFileName.jpg";    

// if the user presses OK instead of Cancel
if (openFileDialog1.ShowDialog() == DialogResult.OK) 
{
    //get the selected filename
    string filename = openFileDialog1.FileName; 

    //copy the file to the new filename location and overwrite if it already exists 
    //(set last parameter to false if you don't want to overwrite)
    System.IO.File.Copy(filename, newFileName, true);
} 
```

有关复制方法的[更多信息。](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:58:50.910

首先，您必须实现一个可以生成唯一文件名的复制功能：

```
private void CopyWithUniqueName(string source, 
                                string targetPath,
                                string targetFileName)
{
    string fileName = Path.GetFileNameWithoutExtension(targetFileName);
    string extension = Path.GetExtension(targetFileName);

    string target = File.Exists(Path.Combine(targetPath, targetFileName);
    for (int i=1; File.Exists(target); ++i)
    {
        target = Path.Combine(targetPath, String.Format("{0} ({1}){2}",
            targetFileName, i, extension));
    }

    File.Copy(source, target);
} 
```

然后你就可以使用它了，假设`defaultTargetPath`是复制图像的默认目标文件，并且`defaultFileName`是图像的默认文件名：

```
void button1_Click(object sender, EventArgs e)
{
    if (openFileDialog1.ShowDialog() != DialogResult.OK)
        return;

    CopyWithUniqueName(openFileDialog1.FileName, 
        defaultTargetPath, defaultFileName);
} 
```

多选时：

```
foreach (string fileName in openFileDialog1.FileNames)
{
    CopyWithUniqueName(fileName, 
        defaultTargetPath, defaultFileName);
} 
```

你会得到这个（假设`defaultFileName`是“Image.png”）：

```
源目标
A.png 图片.png
B.png 图片 (1).png
C.png 图片 (2).png

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:47:23.947

您可以使用 File.Copy() 方法来做到这一点。只需将预定义的目录和新文件名作为目标参数。

有关更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)

# jquery - 为什么 jquery last-child 不能在 ie7 和 8 中工作

> ID：12893937
> 
> 赞同：1
> 
> 时间：2012-10-15T10:43:22.537
> 
> 标签：jquery

我想在ie 7中运行：last-child。我知道仅使用css是不可能的，但我在js中添加了jquery Heres以下代码

`$('#columncontainer > div:nth-child(even)').addClass("mar-right");`

我的html是

```
 <div id="columncontainer"> <div class="list-type"></div> <div class="list-type"></div> </div> 
```

ie7 和 ie8 是否缺少任何东西，否则这段代码在浏览器中的任何地方都可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:48:46.797

:last-child doesn't work in IE7, try this instead:

```
$('#columncontainer').last().addClass('mar-right'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:47:20.670

IE7 doesn't support `nth-child` See this link to view all browser compatibility

[BROWSER COMPATIBILITY](http://www.quirksmode.org/css/contents.html#t38)

to solve this problem you can add a class with jquery and select it into your css file like this:

```
$('#columncontainer:nth-child(even)').addClass('mar-right'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:52:30.920

我试过你的代码和脚本。它在 ie7 和 ie8 中对我来说很好，请参考链接。

[http://jsfiddle.net/Ta9xu/1/](http://jsfiddle.net/Ta9xu/1/)

# log4j - 记录 4j Html 布局

> ID：12893938
> 
> 赞同：1
> 
> 时间：2012-10-15T10:43:31.287
> 
> 标签：log4j

我正在使用 log4j（HTML 布局），对于下面的 log4j.xml，文件不会每天翻转。我正在使用 log4j 附加功能。如果我使用登录到一个简单的日志文件，它可以正常工作，但不适用于 html 布局。

```
<?xml version="1.0" encoding="windows-1252"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
    <!-- Daily Rolling File Appender that compresses old files -->
    <appender name="file" class="org.apache.log4j.rolling.RollingFileAppender" >
        <param name="threshold" value="info"/>
        <rollingPolicy name="file" class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
            <param name="FileNamePattern" value="${catalina.home}/ApplicationLogs/ApplicationLogs-%d{yyyy-mm-dd}.html"/>
            <param name="ActiveFileName" value="${catalina.home}/ApplicationLogs/ApplicationLogs.html"/>
        </rollingPolicy>
        <layout class="org.apache.log4j.HTMLLayout" >
            <param name="LocationInfo" value="true" />
        </layout>
    </appender>

    <root>
         <priority value="debug"></priority>
         <appender-ref ref="file" />
    </root>
</log4j:configuration> 
```

# java - java主线程和子线程

> ID：12893939
> 
> 赞同：-3
> 
> 时间：2012-10-15T10:43:31.310
> 
> 标签：java, multithreading

我一直在对线程进行一些研究，似乎我迷路了。我想知道什么是主线程和子线程。它们是如何制作的？他们之间有什么区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:45:57.177

“主”线程是为您创建的，它调用`public static void main(String[] args)`

“子”线程是您从主线程或其他线程创建的线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:46:28.283

当您从当前线程创建新线程时，当前线程将是 ，`parent thread`而新线程将是`child thread`。

首先运行的主类称为`main thread`. 主线程通常是应用程序所有线程的父线程。

# c++ - 具体的“getter setter”专用对象

> ID：12893942
> 
> 赞同：1
> 
> 时间：2012-10-15T10:43:39.993
> 
> 标签：c++, getter-setter, rights

我想创建一个用于存储数据的对象，限制读/写访问。

例如 ：

```
OBJ obj1;
OBJ obj2;

// DataOBJ has 2 methods : read() and write()
DataOBJ dataOBJ1 (obj1); 
```

使用上面的代码，我想`obj1`访问`write()`方法，而其他`OBJ`对象（`obj2`在这种情况下）应该**只**访问该`read()`方法。

是否可以创建一个`DataOBJ`像这样限制权利的类？

经典的“getter setter”不适合我的需要。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:51:50.217

我认为您最好的选择是为`read`and`write`方法定义一个接口，并将一个只读包装对象（`write`通过抛出异常来实现）而不是真正的对象传递给不应获得写权限的任何人。

请注意，这不会阻止恶意代码剖析您的包装器对象——如果您想这样做，则`DataOBJ`应该与只读客户端位于不同的进程中，并且进程边界的 RPC 机制需要强制访问允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:52:33.937

您可以使用一组不同的类来做到这一点，“禁用”方法会引发异常。

就像是：

```
struct DataInterface
{
    virtual void read(...) = 0;
    virtual void write(...) = 0;
};

struct DataReadOnly : public DataInterface
{
    void read(...) { ... }
    void write(...) { throw write_not_allowed(); }
};

struct DataReadWrite : public DataInterface
{
    void read(...) { ... }
    void write(...) { ... }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:53:31.127

我有一个想法，可能是不好的做法。不过，我会用我想到的东西来回答这个问题：

静态变量。

```
class Foo
{
    private:

      int y;
    public:
     Foo();
     ~Foo();
     void set(int);
     int get(void);
};

Foo::Foo()
{
   static int c = 0;
   ++c;

   y = c;
}

Foo::~Foo()
{
    --y;
}

int Foo::get(void )
{
  if(y == 1)
    return y;
  else
    //do return an error code or something
}

void Foo::set(int r)
{
  if(y== 2)
   y = r;
  else
   //Do nothing
}

int main()
{
    Foo *x1 = new Foo(); //Gets assigned 1
    Foo *x2 = new Foo(); //Gets assigned 2

    return 0;
} 
```

编辑：为了澄清 - 我省略了删除，以及正确减少破坏的逻辑，因为我的答案是在那里散列一个想法，而不是为 OP 编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:09:40.520

您可以通过模板全局引用 obj1/obj2 控制对写入/读取的访问，如下例所示：

```
class OBJ {
};

OBJ obj1;
OBJ obj2;

// RESTRICTED ACCESS
class DataOBJBase {
protected:
   void write() {}
   void read() {}
};

template <OBJ&>
class DataOBJ;

// ALLOW WRITE IF FOR obj1
template <>
class DataOBJ<obj1> : public DataOBJBase {
public:
   using DataOBJBase::write;
};

// ALLOW READ IF FOR obj2
template <>
class DataOBJ<obj2> : public DataOBJBase {
public:
   using DataOBJBase::read;
};

int main() {
   DataOBJ<obj1> dobj1;
   dobj1.write(); // cannot read
   DataOBJ<obj2> dobj2;
   dobj2.read(); // cannot write
} 
```

# android - Linux usb：如何让 bNumConfigurations 的值为 0x01？

> ID：12893947
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:43:44.197
> 
> 标签：android, linux, usb

我在linux PC上做一个android手机测试，有时，发现PC无法读取手机号码如下：

```
 **XXXXX@XXXXXX:~$ adb devices
             List of devices attached** 
```

我运行 lsusb 命令并得到以下结果：

```
*Bus 002 Device 088: ID 0fce:5178 Sony Ericsson Mobile Communications AB 

Device Descriptor:

  bLength                18

  bDescriptorType         1

  bcdUSB               2.00

  bDeviceClass            0 (Defined at Interface level)

  bDeviceSubClass         0 

  bDeviceProtocol         0 

  bMaxPacketSize0        64

  idVendor           0x0fce Sony Ericsson Mobile Communications AB

  idProduct          0x5178 

  bcdDevice            2.28

  iManufacturer           2 Sony

  iProduct                3 LT*****

  iSerial                 4 CB5A****

  **bNumConfigurations      0**

Device Qualifier (for other device speed):

  bLength                10

  bDescriptorType         6

  bcdUSB               2.00

  bDeviceClass            0 (Defined at Interface level)

  bDeviceSubClass         0 

  bDeviceProtocol         0 

  bMaxPacketSize0        64

  bNumConfigurations      1

Device Status:     0x0000

  (Bus Powered)*

Based on this, if reconnet my mobile phone into linux PC, this is OK,and running lsusb commands, it will get the below:

*Bus 002 Device 089: ID 0fce:5178 Sony Ericsson Mobile Communications AB

Device Descriptor:

  bLength                18

  bDescriptorType         1

  bcdUSB               2.00

  bDeviceClass            0 (Defined at Interface level)

  bDeviceSubClass         0 

  bDeviceProtocol         0 

  bMaxPacketSize0        64

  idVendor           0x0fce Sony Ericsson Mobile Communications AB

  idProduct          0x5178 

  bcdDevice            2.28

  iManufacturer           2 Sony

  iProduct                3 LT*****

  iSerial                 4 CB5A****

  **bNumConfigurations      1** 
```

配置描述符：

```
bLength                 9

bDescriptorType         2

wTotalLength           62

bNumInterfaces          2

bConfigurationValue     1

iConfiguration          0 

bmAttributes         0xc0

  Self Powered

MaxPower              500mA

Interface Descriptor:

  bLength                 9

  bDescriptorType         4

  bInterfaceNumber        0

  bAlternateSetting       0

  bNumEndpoints           3

  bInterfaceClass       255 Vendor Specific Class

  bInterfaceSubClass    255 Vendor Specific Subclass

  bInterfaceProtocol      0 

  iInterface              5 MTP

  Endpoint Descriptor:

    bLength                 7

    bDescriptorType         5

    bEndpointAddress     0x81  EP 1 IN

    bmAttributes            2

      Transfer Type            Bulk

      Synch Type               None

      Usage Type               Data

    wMaxPacketSize     0x0200  1x 512 bytes

    bInterval               0

  Endpoint Descriptor:

    bLength                 7

    bDescriptorType         5

    bEndpointAddress     0x01  EP 1 OUT

    bmAttributes            2

      Transfer Type            Bulk

      Synch Type               None

      Usage Type               Data

    wMaxPacketSize     0x0200  1x 512 bytes

    bInterval               0

  Endpoint Descriptor:

    bLength                 7

    bDescriptorType         5

    bEndpointAddress     0x82  EP 2 IN

    bmAttributes            3

      Transfer Type            Interrupt

      Synch Type               None

      Usage Type               Data

    wMaxPacketSize     0x001c  1x 28 bytes

    bInterval               6

Interface Descriptor:

  bLength                 9

  bDescriptorType         4

  bInterfaceNumber        1

  bAlternateSetting       0

  bNumEndpoints           2

  bInterfaceClass       255 Vendor Specific Class

  bInterfaceSubClass     66 

  bInterfaceProtocol      1 

  iInterface              0 

  Endpoint Descriptor:

    bLength                 7

    bDescriptorType         5

    bEndpointAddress     0x83  EP 3 IN

    bmAttributes            2

      Transfer Type            Bulk

      Synch Type               None

      Usage Type               Data

    wMaxPacketSize     0x0200  1x 512 bytes

    bInterval               0

  Endpoint Descriptor:

    bLength                 7

    bDescriptorType         5

    bEndpointAddress     0x02  EP 2 OUT

    bmAttributes            2

      Transfer Type            Bulk

      Synch Type               None

      Usage Type               Data

    wMaxPacketSize     0x0200  1x 512 bytes

    bInterval               0 
```

设备限定符（用于其他设备速度）：

```
 bLength                10

  bDescriptorType         6

  bcdUSB               2.00

  bDeviceClass            0 (Defined at Interface level)

  bDeviceSubClass         0 

  bDeviceProtocol         0 

  bMaxPacketSize0        64

  bNumConfigurations      1

Device Status:     0x0000 
```

（总线供电）*

很明显，bNumConfigurations 值为 1 会得到正确的结果。如果有可能，我没有重新连接android手机和linux PC，只输入一个或多个linux shell命令，让PC可以更新获取android手机号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:22:27.270

如果我正确解释您的问题，您希望能够`adb get-serialno`始终如一地运行。我发现这个命令失败有以下三个原因：

1.  设备上的 ADB 守护程序处于错误状态。
2.  主机或设备上的 USB 出现故障。
3.  主机 PC 上的 ADB 服务器处于错误状态。

我在 Ubuntu 上使用三星手机进行了很多工作，并从我最常看到的问题到不太常见的问题订购了这些手机。对于情况 1 和 2，我通常会找到分离并重新附加来修复它，或者有时会重复命令调用。同样，如果我正确解释您的问题，您希望能够从命令行执行所有操作。在 Ubuntu 上，您取消绑定并重新绑定设备，这应该接近分离和重新连接周期。从命令行看，应该是这样的：

```
# $1 - VID[:PID]
usb_id_to_bind()
{
  declare -r dev_name="$(lsusb|sed -rn 's_^Bus ([0-9]{3}) Device ([0-9]{3}): ID '"$1"'.*_/dev/bus/usb/\1/\2_p')"
  declare -r dev_path="$(udevadm info -q path -n"$dev_name")"

  basename "$dev_path"
}

usb_unbind()
{
  echo "$(usb_id_to_bind "$@")"|sudo tee /sys/bus/usb/drivers/usb/unbind
}

usb_bind()
{
  echo "$(usb_id_to_bind "$@")"|sudo tee /sys/bus/usb/drivers/usb/bind
}

usb_unbind 04e8:6866; usb_bind 04e8:6866 
```

如果这不起作用，您可能需要重新启动手机 ( `adb reboot`)。

对于 3，您可以使用 a`adb kill-server`后跟该命令再次修复此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:42:27.830

使用以下命令取消绑定驱动程序

*# $1 - VID[:PID]

usb_id_to_bind()

{

声明 -r dev_name="$(lsusb|sed -rn 's_^Bus ([0-9]{3}) 设备 ([0-9]{3}): ID '"$1"'.*_/dev /bus/usb/\1/\2_p')"

声明 -r dev_path="$(udevadm info -q path -n"$dev_name")"

基本名称“$dev_path”}

usb_unbind()

{

echo "$(usb_id_to_bind "$@")"|sudo tee /sys/bus/usb/drivers/usb/unbind

}

usb_bind()

{

echo "$(usb_id_to_bind "$@")"|sudo tee /sys/bus/usb/drivers/usb/bind

}

usb_unbind 04e8:6866;

但是在运行 lsusb 命令时，手机似乎仍然连接如下：

*总线 008 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

总线 007 设备 002：ID 03f0:0325 Hewlett-Packard

总线 007 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

总线 006 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

总线 005 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

总线 004 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

总线 003 设备 001：ID 1d6b:0001 Linux Foundation 1.1 根集线器

**总线 002 设备 014：ID 0fce:5178 Sony Ericsson Mobile Communications AB**

总线 002 设备 006：ID 046d:c03d Logitech, Inc. M-BT96a Pilot 光学鼠标

总线 002 设备 003：ID 0409:005a NEC Corp. 高速集线器

总线 002 设备 001：ID 1d6b:0002 Linux Foundation 2.0 根集线器

总线 001 设备 001：ID 1d6b:0002 Linux Foundation 2.0 根集线器*

如何让安卓设备更新连接linux PC？我运行以下命令： sudo sh -c "echo 0 > /sys/bus/usb/devices/2-5/authorized" 让我们的 android 手机更新连接 PC，它失败了。

# visual-studio - Mono 开发和 Visual Studio 兼容性

> ID：12893948
> 
> 赞同：3
> 
> 时间：2012-10-15T10:43:48.777
> 
> 标签：visual-studio, mono

使用 Mono (Develop) 开发的代码是否与 Visual Studio（目前为 2010）兼容？意思是，让团队中的一些成员使用单声道开发（Linux）和一些使用 Visual Studio（Windows）可以吗？或者我应该期待问题吗？

对于这个项目，它将在 Visual Studio 2010（大多数成员）上使用 C++。如果它兼容，我可以从 Visual Studio 2012 获得相同的期望吗？Mono 网站上指定的除外

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:56:35.247

如果您长期从事 Visual C++ 开发，您就会知道使用 Windows 的东西（例如 MFC）会将您锁定在 Windows 上。

MonoDevelop 的 C++ 支持（例如 GTK+）并非旨在克隆 Visual C++ 或与之兼容，

[http://monodevelop.com/documentation/creating_c_and_cpp_projects](http://monodevelop.com/documentation/creating_c_and_cpp_projects)

所以我认为答案是否定的。

# delphi - 如何通过 DsPack 组件从视频文件中获取帧位图？

> ID：12893953
> 
> 赞同：0
> 
> 时间：2012-10-15T10:44:11.397
> 
> 标签：delphi, screenshot, dspack

是否可以通过 DsPack 组件从视频文件中获取位图？

在这种情况下，我正在使用此代码；但它不能截图图像：

```
type
  TForm4 = class(TForm)
    FilterGraph1: TFilterGraph;
    VideoWindow1: TVideoWindow;
    btnPlay: TButton;
    SampleGrabber1: TSampleGrabber;
    btnTakePicture: TButton;
    Image1: TImage;
    procedure btnPlayClick(Sender: TObject);
    procedure btnTakePictureClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

...

procedure TForm4.btnPlayClick(Sender: TObject);
begin
  SampleGrabber1.FilterGraph := FilterGraph1;
  VideoWindow1.FilterGraph := FilterGraph1;
  FilterGraph1.Active := true;
  FilterGraph1.RenderFile('C:\TEMP\1.mp4');
  FilterGraph1.Play;
end;

procedure TForm4.btnTakePictureClick(Sender: TObject);
begin
  SampleGrabber1.GetBitmap(Image1.Picture.Bitmap);
end; 
```

是否可以修复此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:50:03.867

过了一会儿，我找到了解决此问题的示例：

我们可以使用“SnapShot.dpr”。这是一个随 DsPack 组件分发的示例。

# c++ - 从 Nvidia PTX 访问 bool (C++11) 数组的便携式方式

> ID：12893954
> 
> 赞同：5
> 
> 时间：2012-10-15T10:44:12.177
> 
> 标签：c++, c++11, boolean, gpu, ptx

我需要在 CPU 内存（使用 C++11 代码）中创建的布尔数组`bool[]`（注意，不是 a `std::vector<bool>`）上进行 GPU 计算，然后通过`cuMemCpy`或类似方法复制到 GPU。

第一个问题：

`sizeof(bool)`报告 1 个字节。这是由 C++11 标准保证的吗？

第二个问题：

`true`( )总是`false`表示为`1`( `0`) （在`unsigned char`表示中）还是编译器在这里有自由？（如果需要，它可以使用任何小于 256 的非零整数）

第三个问题（特定于 PTX）：

在 PTX 逻辑操作`or`中`xor`， 等仅对大于 8 位的类型进行操作。也就是说，我可以对`unsigned int`with进行逻辑运算`or.u32 <out>,<in1>,<in2>`。但是，由于 C++11`bool`类型似乎是 8 位，这是否意味着我不能对`bools`直接从 CPU 复制到 GPU 内存的数组进行操作，因此我需要将`bools`first 的数组转换为某种类型的 PTX 逻辑操作吗？操作，即`u32`，`u16`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:26:30.547

**第一个答案：**

不，这不能保证。请参阅`[expr.sizeof]/1`和相关的脚注：

> ... sizeof(char)、sizeof(signed char) 和 sizeof(unsigned char) 为 1。 sizeof 应用于任何其他基本类型 (3.9.1) 的结果是实现定义的。[注意：特别是 sizeof(bool)、sizeof(char16_t)、sizeof(char32_t) 和 sizeof(wchar_t) 是实现定义的^(75)。...
> 
> 75) sizeof(bool) 不需要为 1。

* * *

**第二个答案：**

我很确定`bool`对象的值表示是实现定义的，但我找不到任何明确说明的东西。我能得到的最接近的是`[basic.types]/4`：

> ...对于可简单复制的类型，值表示是对象表示中确定值的一组位，该值是实现定义的一组值的一个离散元素。

* * *

**第三个答案：**

我不知道，但从您的描述来看，您肯定需要更改类型。

# firefox - Firefox 在新的自托管扩展上显示来自 MDN 的过时信息

> ID：12893958
> 
> 赞同：0
> 
> 时间：2012-10-15T10:44:28.367
> 
> 标签：firefox, firefox-addon

Firefox 在新的自托管扩展上显示来自 MDN 的过时信息

我正在尝试将我正在开发的 Firefox 扩展从托管在 MDN/mozilla.org 上切换为自托管。这涉及向 install.rdf 添加一个条目，指向我自己服务器上的 update.rdf。

但是，我发现如果给定的 Firefox 配置文件曾经安装过旧的托管在 MDN 上的版本，它将继续从 MDN 查找信息，而不仅仅是使用扩展的 install.rdf 中包含的信息. 这意味着 about:addons 中显示的扩展程序信息保持过时。

这是一个详细的演练：

*   创建一个新的 Firefox 配置文件。
*   手动安装最新版本的 Firefox 扩展，方法是将其放入 extensions/ 然后确认安装。此扩展是自托管的：它在 install.rdf 中设置了 updateURL。
*   转到 about:addons 并确认显示的有关插件的信息是来自扩展的 install.rdf 的信息。（描述、创建者等）
*   卸载扩展。
*   通过插件管理器界面从 MDN 安装旧的非自托管版本的扩展。
*   转到 about:addons 并确认显示的有关扩展的信息是来自 MDN 的信息。（描述、创建者等）搜索包含此版本扩展程序的所有文件，以确保显示的信息绝对不包含在其中，因此来自 MDN。
*   卸载此版本的扩展。
*   通过将其放入 extensions/ 并使用 Firefox 确认安装，再次安装新的自托管版本的扩展。
*   转到关于：插件。请注意，尽管这是自托管版本，但显示的信息*仍*来自 MDN。具体来说，创建者和描述来源于MDN，而图标来源于install.rdf。

即使扩展程序已被卸载，Firefox 似乎也在缓存有关扩展程序的信息，并且一旦看到给定的扩展程序托管在 MDN 上，即使该扩展程序现在是自托管的，它也会继续从 MDN 获取信息。

除了在扩展的 install.rdf 中设置 updateURL 值之外，我还缺少一些步骤吗？这是 Firefox 中的错误吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:20:15.083

默认情况下，Firefox 从 AMO 为您的附加组件获取信息并覆盖 install.rdf 中的信息。

因此，如果您已将附加组件从 AMO 移至自托管，则仍会检索信息。

为防止这种情况，您可以设置首选项：

pref("extensions.YOUR_ADDON_ID.getAddons.cache.enabled", false);

这将阻止 Firefox 从 AMO 获取有关您的附加组件的信息。

它可能不会立即对您生效，但应在 24 小时内生效。

# sql - SQL 查询 - 在行而不是列中获取子查询结果

> ID：12893960
> 
> 赞同：1
> 
> 时间：2012-10-15T10:44:33.563
> 
> 标签：sql, sql-server-2008, subquery

我检查了搜索，但似乎没有人回答这个问题..我希望它非常简单：我有一个查询结果为两列，但我需要它产生两行..有人知道怎么做吗？

这是查询：

```
 SELECT        (SELECT        COUNT(Id) AS Expr1
                      FROM            Table
                      WHERE        (Description LIKE 'door%')) AS Door,
                         (SELECT        COUNT(Id) AS Expr1
                           FROM            Table AS Table_1
                           WHERE        (Description LIKE 'window%')) AS Window 
```

我得到的结果是（当然）：

```
[Door]     [Window]
56         34 
```

我想要的结果如下：

```
[OPTION]    [NROfRecords]
Door        56
Window      34 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:49:47.467

您可以使用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)，我建议将查询重写为以下内容：

```
select *
from
(
  SELECT 
    sum(case when Description LIKE 'door%' then 1 else 0 end) Door,
    sum(case when Description LIKE 'window%' then 1 else 0 end) Window
  from Table1
) x
unpivot
(
  NrOfRecords
  for [Option] in (Door,  Window)
) u 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a577d/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:47:29.473

```
SELECT 'Door'   AS Option, COUNT(id) FROM table WHERE description LIKE 'door%'
UNION ALL
SELECT 'Window' AS Option, COUNT(id) FROM table WHERE description LIKE 'window%' 
```

OR...

```
WITH
  filtered AS
(
  SELECT
    CASE WHEN description LIKE 'door%'   THEN 'Door'
         WHEN description LIKE 'window%' THEN 'Window'
                                         ELSE 'Other' END AS option,
    *
  FROM
    yourTable
  WHERE
       description LIKE 'door%'
    OR description LIKE 'window%'
)
SELECT
  option,
  COUNT(id)
FROM
  filtered
GROUP BY
  option 
```

Or...

```
SELECT
  lookup.option,
  COUNT(id)
FROM
(
  SELECT 'door'   AS option
  UNION ALL
  SELECT 'window' AS option
)
  AS lookup
INNER JOIN
  yourTable
    ON yourTable.description LIKE lookup.option + '%'
GROUP BY
  lookup.option 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:47:58.650

```
select 
    case when description like 'door%' then 'door'
         when description like 'window%' then 'window' 
         else '' 
    end as [desc],
    count(id)
from table
where description like 'door%' or description like 'window%'
group by 
(
    case when description like 'door%' then 'door'
    when description like 'window%' then 'window' else '' end
) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T10:48:17.293

Solution like this is following DRY principle - you do not repeat Door or Window anywhere. It also easy to add another entities here, so you do not repeat a logic.

```
select
    C.description,
    count(*)
from Table1 as t
    inner join (
        select 'door%', 'Door' union all
        select 'window%', 'Window'
    ) as C(pattern, description) on t.description like c.pattern
group by C.description 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/a577d/14)`**

# php - 传递标头值

> ID：12893972
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:45:13.587
> 
> 标签：php

嗨，我的语法有问题，这就是我得到的。

```
 $id = $_POST['student_id'];
    $getlev= $_POST['lev'];
    header('Location: usucess.php?id='.$id.'&getlev='.$getlev); 
```

这是接收端。

```
 if(empty($_POST['lvl'])){
              $yl= $_GET['getlev'];
         }else{
              $yl=$_POST['lvl'];} 
```

目前它只传递**$id**会感谢我做错了什么的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:49:38.050

Your problem I think is mismatch:

`lvl` vs `lev`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:51:06.097

是的，它只会通过 ID，因为在接收端你有一个新的条件

```
if (empty($_POST['lvl'])) {
    $yl = $_GET['getlev'];
} 
```

`$yl = $_GET['getlev'];`如果`$_POST['lvl']`为空，则永远不会设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:05:24.017

在将变量作为参数发送到查询字符串时，请记住对它们进行转义。我个人更喜欢[urlencode](http://php.net/manual/en/function.urlencode.php)，因此您可以这样编写代码：
`header('Location: usucess.php?id='.urlencode($id).'&getlev='.urlencode($getlev));`

我认为您正在寻找的答案是您的`if`陈述是倒退的。
尝试：

```
if(!empty($_POST['lvl'])){
          $yl= $_GET['getlev'];
}else{
          $yl=$_POST['lvl'];
} 
```

# firefox - 从 Firefox 扩展登录到控制台？

> ID：12893981
> 
> 赞同：17
> 
> 时间：2012-10-15T10:45:40.630
> 
> 标签：firefox, logging, firefox-addon, firebug, firefox-addon-sdk

我知道在使用带有`cfx run`命令的 Firefox 扩展时我可以登录到控制台。

扩展打包后有没有办法登录到控制台`cfx xpi`？如果可能的话，登录到 Firebug 是可以的。

我找到了两篇关于这个的博客文章（[这里](http://www.timrosenblatt.com/blog/2008/07/23/firefox-extension-debugging/)和[这里](http://markhansen.co.nz/firefox-extension-console/)）。两者都相当老了，不再工作了。

我正在使用 1.10 版的附加 SDK 和 FF15。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-06-08T09:55:14.433

你需要做两件事：

1.  [为插件启用日志记录](https://blog.mozilla.org/addons/2013/03/27/changes-to-console-log-behaviour-in-sdk-1-14/)

• 在 about:config 中，添加一个新选项`extensions.sdk.console.logLevel`并将其赋值为“all”

• 重新启动 Firefox

2.  在 Firefox 中打开[浏览器控制台](https://developer.mozilla.org/en-US/docs/Tools/Browser_Console)：

• 工具 -> Web 开发人员 -> 浏览器控制台

• 注意：这与用于调试网页的常用 Web 控制台不同

您现在应该在那里看到插件日志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-22T01:35:57.130

TLDR：

1.  转到`about:config`url 并**创建** `extensions.sdk.console.logLevel`具有值的键`all`
2.  *在浏览器控制台*(Ctrl+Shift+J) 或您启动 Firefox 的终端中查看日志消息。

* * *

`cfx`或其继任者`jpm`在开发 Firefox 配置文件中自动创建此配置密钥。

从[日志记录文档](https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/console#Setting_the_Logging_Level)：

> `extensions.sdk.console.logLevel`：如果设置，这将确定所有已安装的基于 SDK 的附加组件的日志记录级别。
> 
> `extensions.extensionID.sdk.console.logLevel`，其中 extensionID 是附加组件的程序 ID。如果设置，这将确定指定附加组件的日志记录级别。如果设置了两个首选项，这将覆盖全局首选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:41:33.303

您是否尝试过`console.log()`使用 Firebug？（我知道你已经尝试过`Application.console.log()`了`Firebug.console.log()`）

我刚刚在运行 Firebug 1.10.4 的 FF16 上的 Web 控制台中尝试过它，它似乎可以工作：![Firefox 网页控制台](../Images/9264cdef338355a8b93c3b98105176b2.png)

以下是 Firebug Wiki 本身的更多示例：[FirebugWiki 控制台 API](http://getfirebug.com/wiki/index.php/Console_API#console.log.28object.5B.2C_object.2C_....5D.29)

此外，您还可以在控制台中编写不同类型的消息，例如：`console.debug()`、`console.info()`、`console.warn()`、`console.error()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-12-03T03:04:05.390

我将总结自发布此问题以来 Firefox 发生的最新变化——基本上更新了@LucaBonavita 的答案。

1.  在 about:config 中，检查选项`extensions.sdk.console.logLevel`是否已**启用**。如果没有，请切换为启用。如果它不存在，您可能需要创建它

2.  打开[浏览器控制台](https://developer.mozilla.org/en-US/docs/Tools/Browser_Console)

*   菜单栏 -> 工具 -> 浏览器工具 -> 浏览器控制台
*   `Show Content Messages`在浏览器控制台中启用。

[![在此处输入图像描述](../Images/a7a774d98dfa2919627cbb22be19a224.png)](https://i.stack.imgur.com/XeO0l.png)

现在，`console.log`由 Firefox 插件/扩展触发的应该会显示

> 在 Firefox 94.0.2（64 位）和 95.0b12（64 位）上测试

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T00:19:22.307

如果您从附加代码运行 console.log，它会在错误控制台窗口的“消息”选项卡中发送：

![https://www.evernote.com/shard/s1/sh/c40c509d-9f14-4103-920b-4186a426226c/53572f96a3bbe0462103a8126b8e9822/res/fcbead60-d9d0-48be-b744-3fa6701fdf1b/skitch.png](../Images/48cd1295e1c4293dcb642e14e63d2c17.png)

# javascript - 带有输入 javascript 的动态数组

> ID：12893984
> 
> 赞同：1
> 
> 时间：2012-10-15T10:45:47.033
> 
> 标签：javascript

我目前正在做一个学校项目，我必须使用 javascript 创建一个页面，用户可以从输入框中键入多个数字。

输入每个数字后，有一个添加按钮，然后在输入下方的另一个框中显示数字。所以每个数字都垂直向下显示在页面上。

从那里我需要两个按钮。第一个计算哪个会将数字相加并计算出平均值。第二个将清除数组以重新开始。

我相信我对最后两个按钮没问题。我不确定的是用户输入应该如何创建动态数组，然后将其显示在页面中。我已经能够获得单个数字输入，但我错过了下一步，因此输入的下一个数字将显示并允许我构建一个可以执行计算的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:54:19.950

最简单的方法是循环显示数字的输入并以这种方式添加每个数字，而不是尝试维护从第一个输入更新的数组。

将显示元素粘贴`input`到带有 的容器中`id`，然后您可以执行以下简单操作：

```
var container = document.getElementById("container-id"),
    inputs = container.children,
    total;

for (var x = 0, y = inputs.length; x < y; x++) {
    total += parseInt(inputs[x].value, 10);
}

alert(total) //do something way better than alert! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:20:14.870

请试试这个，我认为它对你有用

JAVA脚本：

```
 <script type="text/javascript">
    var arr = new Array();
    function addNum()
    {
    var temp = document.getElementById('a').value;
    arr.push(temp);
    document.getElementById('a').value = "";
    getAvg();
    }

    function getAvg()
   {
    var sum = 0;
    for(var i = 0; i < arr.length; i++){
        sum += parseInt(arr[i]);
    }

    var avg = sum/arr.length;

    document.getElementById('sum').value = sum;
    document.getElementById('avg').value = avg;

      }

function clearAll()
{
    arr.length = 0;
    document.getElementById('a').value = "";
    document.getElementById('sum').value = "";
    document.getElementById('avg').value = "";
}
</script>

HTML:

       <table>
        <tr><td><input type="text" id="a"></td>
        <td>Sum :<input type="text" id="sum"></td>
        <td>Avg :<input type="text" id="avg"></td></tr>
      <tr><td><input type="button" value="add" onclick="addNum()"></td>
      <td><input type="reset"  value="reset" onclick="clearAll()"></td></tr>

     </table 
```

# ruby-on-rails - Rails 3 - 将整数的一部分与其他整数进行比较

> ID：12893985
> 
> 赞同：2
> 
> 时间：2012-10-15T10:45:49.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, integer

我现在在 Ruby on Rails 上工作了将近 4 周，所以将我视为初学者。

在执行条件查找查询时，我需要将整数的一部分（放入字符串中......）与另一个整数进行比较。

`@invs = Inv.find(:all, :conditions => {:cnr => INTEGER_TO_BE_COMPARED_TO })`

好吧，我找到了一种方法来获取整数的某个部分，并编写了以下方法：

```
def get_part_of_int
    @r = 整数((@cnr % 10000000)/100000.0)
    @r = "%02d" % @r
    @r.to_s
结尾

```

这应该给出`@r = 01`输出`@cnr = 40138355`

目标是仅显示`invs`为`01`第二个和第三个数字。

我正在使用：
Rails 3.2.8
Ruby 1.9.3p194

谢谢大家。

==编辑：==
我意识到我的帖子中没有问号..而且有些混乱。

列名的值`cnr`应该被剥离到第 2 位和第 3 位，并与字符串进行比较，例如`01`.
谢谢@Salil 的建议。
但是这不起作用..但我了解使用它的方式。下面将字符串转换`:cnr`为`:nr`. `Inv.find(:all, :conditions => {:cnr.to_s[1,2] => '01' })` 有没有办法将列的一部分值与 eg 进行比较`01`？

也许我应该反过来想。是否可以使用第 2 位和第 3 位进行搜索，`cnrs`例如`01`？诀窍是这些数字始终是第 2 位和第 3 位。我假设使用例如 Solr 的模糊搜索不起作用，因为在搜索时`01`我不想要`cnr` `40594013`.

这可以以某种方式完成吗？

提前感谢您，我很抱歉让您感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:20:31.297

如果你的问题`is how to get the second and third digit from a integer?` 你可以使用以下

```
40138355.to_s[1,2] ##This will give you "01" 
```

已编辑参考：-[子字符串](http://www.sqlinfo.net/mysql/mysql_function_substring.php)

```
@invs = Inv.find(:all, :conditions => ["SUBSTRING(cnr,1,2) =?", @cnr.to_s[1,2] ]) 
```

# javascript - JQuery UI 自动完成不适用于 Mac OSX 上的 Chrome

> ID：12893986
> 
> 赞同：1
> 
> 时间：2012-10-15T10:45:52.023
> 
> 标签：javascript, jquery-ui, google-chrome, backbone.js, operating-system

这真的很奇怪。

在我做的网络应用程序中（看[这里](http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html)），感谢[cloudant 的家伙](https://cloudant.com/)免费托管，我终于实现了[Jquery UI 自动完成](http://jqueryui.com/autocomplete/)小部件。

我正在使用主干作为框架。

真正奇怪的是它适用于所有东西（甚至是 IE9！），除了苹果操作系统上的 Chrome。

我所拥有的是单击文本输入字段时没有出现下拉列表。

Chrome 在不同的操作系统工作（例如在 win7 上）。

这是我用来实现小部件的代码，为了完整起见，我报告了她，即使我认为我遇到的问题不依赖于代码。

```
 $(select).on("click",function(){
            var valori=["ex1", "ex2", "ex3"];
            $(input).autocomplete({
                minLength: 0,
                source: valori,
                focus:function(){
                    },
                select:function(event, ui){

                    var categoria=$(select).attr('value');
                    var valore=ui.item.value;
                    self.model.set({category:categoria, value:valore});
                    //~ console.log(self.model);
                    return true;
                    }
                }).focus(function() {
            $(this).autocomplete("search", "");
                });
            }); 
```

**- - 更新 - - -**

我比较了在 ubuntu 上运行的 chrome 和在 macOS 上运行的 chrome。

结果是在 ubuntu 下，DOM 元素被创建（在关闭 body 标签之前），而在 macosx 下，DOM 元素根本没有被创建。

看起来在 macOS 下 onclick 事件没有被捕获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:30:48.863

我在这里找到了一个非常有用的帖子 [为什么 mac chrome 上的选择框不响应点击事件？](https://stackoverflow.com/questions/11384389/why-does-select-box-on-mac-chrome-doesnt-respond-to-click-event)

基本上，这是OSX下chrome的一个bug。

正如@JamWaffles 在其回答中解释的那样，*“IIRC，点击事件在 Firefox 中适用于 s，但在 Chrome 中不起作用。最好、最受支持的事件是更改。”* 事实证明这是完全正确的！

所以我的 webapp 的工作代码是：

```
$(select).change(function(){//**************CHANGE AND NOT ON('CLICK', ...  *******
        var valori=["ex1", "ex2", "ex3"];
        $(input).autocomplete({
            minLength: 0,
            source: valori,
            focus:function(){
                },
            select:function(event, ui){

                var categoria=$(select).attr('value');
                var valore=ui.item.value;
                self.model.set({category:categoria, value:valore});
                //~ console.log(self.model);
                return true;
                }
            }).focus(function() {
        $(this).autocomplete("search", "");
            });
        }); 
```

希望这个答案对其他人有用。

# jqplot - JQPlot 重绘。更新点标签

> ID：12893989
> 
> 赞同：2
> 
> 时间：2012-10-15T10:45:56.700
> 
> 标签：jqplot

我有一个条形图，我需要更新它的数据，还有一个 PointLabels。数据正在更新，但 PointLabels 与之前的绘图相同。如何更新 PointLabels？

```
// here are labels.

      var my_labels = [["2 g. <br /> 47$"],["2 g. <br /> 48$"],["7 g. <br /> 49$"],[],["10 g. <br /> 51$"],["6 g. <br /> 52$"],["4 g. <br /> 53$"]];
            $.jqplot.config.enablePlugins = true;
            var s1 = [2, 6, 7, '' , 10, 6, 4];
            var ticks = [47,48, 49, 50, 51, 52, 53];
           // initializing plot  
            plot1 = $.jqplot('chart1', [s1], {
                // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
                        canvasOverlay: {
                show: true,
                objects: [
                    {verticalLine: {
                        name: 'barney',
                        x: 4,
                        lineWidth: 2,
                        color: 'gray',
                        shadow: false
                    }}
                ]
            },
                animate: !$.jqplot.use_excanvas,
                seriesDefaults:{
                    renderer:$.jqplot.BarRenderer,

// setting labels to my own defined labels

    pointLabels: { show: true, labels : my_labels, escapeHTML: false },
                    color: '#E6D49F'
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        ticks: ticks,
                        max: 100
                    }
                },
                highlighter: { show: false },

            });

            $('#chart1').bind('jqplotDataClick', 
                function (ev, seriesIndex, pointIndex, data) {
                    $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
                }
            );
        });
    // reploting function call
    setInterval(function(){replot()},4000);
        var a = 1;
        var labels;
// reploting function
        function replot()
        {
        var data;

    switch(a)
    {
    case 1:
      data = [[1,4], [2,6], [3, 8],[4,0],[5, 9],[6, 7],[7, 3]];
      labels = [["4 g. <br /> 47$"],["6 g. <br /> 48$"],["8 g. <br /> 49$"],[],["9 g. <br /> 51$"],["7 g. <br /> 52$"],["3 g. <br /> 53$"]];
      break;
    case 2:
      data = [[1,3], [2,7], [3, 7],[4,0],[5, 8],[6, 6],[7, 4]];
      labels = [["3 g. <br /> 47$"],["6 g. <br /> 48$"],["8 g. <br /> 49$"],[],["9 g. <br /> 51$"],["7 g. <br /> 52$"],["3 g. <br /> 53$"]];
      break;
    case 3:
      data = [[1,5], [2,5], [3, 9],[4,0],[5, 10],[6, 8],[7, 2]];
      labels = [["5 g. <br /> 47$"],["6 g. <br /> 48$"],["8 g. <br /> 49$"],[],["9 g. <br /> 51$"],["7 g. <br /> 52$"],["3 g. <br /> 53$"]];
      break;
    }
//updating data
        plot1.series[0].data = data;
//trying to update pointlabels
        plot1.series[0].pointLabels.labels = labels;
        plot1.replot();
        if(a == 3)
        a = 0;
        a++;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:18:15.357

我有同样的问题，并认为我做错了什么。但是现在看到别人有同样的问题，似乎问题出在插件本身。

我从我[自己的帖子中的一条](https://stackoverflow.com/q/9046987/456135)[评论](https://stackoverflow.com/questions/9046987/jqplot-individual-values-not-totals-in-stacked-chart#comment20605247_9054953)中找到了解决此问题的方法。

重新绘制后，尝试像这样直接更新包含点标签的 div。

```
for(i=0;i<labels.length;i++){
    $("#chart1").find('.jqplot-series-0.jqplot-point-'+i).html(''+labels[i]);
} 
```

我希望有一天有人会提供更好的解决方案，而不是这种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T11:00:40.920

我很欣赏这是一个旧线程，但我刚刚遇到了同样的问题，并在“$.jqplot.PointLabels.draw”函数的第一行添加了以下内容，该函数在重新绘制之前删除了所有先前添加的标签：

$('.jqplot-point-label',plot.target).remove();

# c# - 在 MessageBox 之后重新初始化成员变量？

> ID：12893992
> 
> 赞同：0
> 
> 时间：2012-10-15T10:46:04.740
> 
> 标签：c#, .net, winforms, class, member-variables

我有一个`Form`与此类似的代码：

```
public partial class Form1 : Form
{
    private int m_var1;
    private int m_var2;
    string sMsg;
    bool bReturn;

    private bool MyFunction()
    {
        // POINT A: at this point m_var1 and m_var2 are both 100            
        sMsg = "Test Message";
        bReturn = (DialogResult.Yes == MessageBox.Show(sMsg, "MyApp",MessageBoxButtons.YesNo, MessageBoxIcon.Question));
        // POINT B: at this point m_var1 and m_var2 are both 0
    }
} 
```

为什么`POINT B`已经`m_var1`和`m_var2`两者都变成了`0`我正在经历的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:37:10.293

这听起来像一个线程问题。我可以解释我将如何尝试解决这个问题：

*   将 m_var1 和 m_var2 更改为属性。
*   为其设置器设置断点。

检查命中 setter 的代码的堆栈跟踪。

# java - 如何检查密钥库文件中的证书名称和别名？

> ID：12893995
> 
> 赞同：526
> 
> 时间：2012-10-15T10:46:17.963
> 
> 标签：java, android, keystore

我有一堆 .keystore 文件，需要找到一个具有特定 CN 和别名的文件。有没有办法使用 keytool、jarsigner 或其他工具来做到这一点？我找到了一种方法来检查是否使用特定的密钥库来签署特定的 apk，但我还需要获取每个文件中的别名和证书名称。

* * *

## 回答 #1

> 赞同：944
> 
> 时间：2012-10-15T11:08:30.997

您可以运行以下命令来列出密钥库文件的内容（和别名）：

```
keytool -v -list -keystore .keystore 
```

如果要查找特定别名，也可以在命令中指定：

```
keytool -list -keystore .keystore -alias foo 
```

如果找不到别名，则会显示异常：

> keytool 错误：java.lang.Exception：别名不存在

* * *

## 回答 #2

> 赞同：292
> 
> 时间：2015-04-17T11:57:43.807

为了获得所有详细信息，我必须将 -v 选项添加到 romaintaz 答案：

```
keytool -v -list -keystore <FileName>.keystore 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2012-10-15T11:29:44.090

您可以从 Java 代码运行。

```
try {

        File file = new File(keystore location);
        InputStream is = new FileInputStream(file);
        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        String password = "password";
        keystore.load(is, password.toCharArray());

        Enumeration<String> enumeration = keystore.aliases();
        while(enumeration.hasMoreElements()) {
            String alias = enumeration.nextElement();
            System.out.println("alias name: " + alias);
            Certificate certificate = keystore.getCertificate(alias);
            System.out.println(certificate.toString());

        }

    } catch (java.security.cert.CertificateException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (KeyStoreException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }finally {
        if(null != is)
            try {
                is.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    } 
```

证书类包含有关密钥库的所有信息。

**更新 - 获得私钥**

```
Key key = keyStore.getKey(alias, password.toCharArray());
String encodedKey = new Base64Encoder().encode(key.getEncoded());
System.out.println("key ? " + encodedKey); 
```

@pratek 希望这就是你要找的东西！

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2014-02-18T14:13:38.113

[KeyStore Explorer](http://keystore-explorer.sourceforge.net/screenshots.php) 用于管理密钥库的开源可视化工具。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-11-01T11:52:41.840

在类似 bash 的环境中，您可以使用：

```
keytool -list -v -keystore cacerts.jks | grep 'Alias name:' | grep -i foo 
```

该命令由 3 个部分组成。如上所述，**第一**部分将列出所有受信任的证书以及所有详细信息，这就是为什么**第二**部分仅过滤这些详细信息中的别名信息。最后在第**3**部分中，您可以搜索特定别名（或其中的一部分）。*-i*打开不区分大小写模式。因此，给定的命令将产生包含模式 'foo'、fe foo、123_FOO、fooBar 等的所有别名。有关更多信息`man grep`。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2017-03-19T15:30:14.577

这将列出所有证书：

```
keytool -list -keystore "$JAVA_HOME/jre/lib/security/cacerts" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-09-01T12:46:15.750

在 Windows 上：

**keytool -v -list -keystore *my_keystore* | findstr *my_string***

参考：

[CMD 搜索目录以在文件中查找字符串](https://stackoverflow.com/questions/26537643/cmd-search-a-directory-to-find-a-string-inside-a-file)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-30T10:02:36.827

如果您收到警告

`Warning: use -cacerts option to access cacerts keystore`

那么你可以使用这个命令

`.\keytool.exe -list -cacerts`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-25T16:04:54.003

还有控制台证书管理器编写为单文件 shell 脚本（开源）：

[https://dev.to/sfkulyk/writing-panel-manager-for-certificate-keystore-in-linux-shell-187b](https://dev.to/sfkulyk/writing-panel-manager-for-certificate-keystore-in-linux-shell-187b)

可以浏览、复制、删除、重命名和比较密钥库。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-24T22:14:08.113

**命令：**

```
keytool -list -keystore 'keystoreName' 
```

然后按“Enter”，cmd将提示您输入密钥库密码

cmd 在输入时不会在屏幕上显示密码，因此只需输入正确的密码 - 并小心 - 然后再次按 enter。

**或者**您可以使用：

```
keytool -list -keystore 'keystoreName' -storepass 'type your keystore passwd' 
```

**对于 Keys 的完整信息，只需添加 -v：**

```
keytool -v -list -keystore 'keystoreName' -storepass 'type your keystore passwd' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-23T18:12:00.280

> keytool -v -list -cacerts -alias cert1

当我检查使用别名添加到 jdk-11 的证书并检查它是否已添加到 Windows 机器上时，这对我有用