# StackOverflow 问答 14716000-14716999

# voip - 获取来电者拨打的号码

> ID：14716002
> 
> 赞同：0
> 
> 时间：2013-02-05T20:06:55.430
> 
> 标签：voip, asterisk

我有一个星号服务器，分配了一个常见的 voip 号码 f.ex.: - 48221111111 - 48222222222

我如何检查/检测（在 extension.conf 中）上面这两个中的哪个号码，呼叫者拨号连接到我的星号服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:46:42.840

您可以为此目的使用 ${EXTEN}，或者如果在宏中您可以使用 ${MACRO_EXTEN}：

```
[macro-incoming_VOIP]
exten = s,1,LookupBlacklist(j)
exten = s,2,GotoIf( ${MACRO_EXTEN} = 48221111111?3:4)
exten = s,3,Goto(from-outside|24|1)
exten = s,4,Macro(timecondition,voicemenu-custom-1|660|1,voicemenu-custom-1|660|1)
exten = s,102,Goto(Blacklist-Handle,s,1) 
```

如果您执行宏而不是调用扩展，上下文和优先级分别存储在 ${MACRO_EXTEN}、${MACRO_CONTEXT} 和 ${MACRO_PRIORITY} 中。

# sql-server - SQL Server IsolationLevel.ReadUncommitted 危险

> ID：14716003
> 
> 赞同：0
> 
> 时间：2013-02-05T20:06:56.520
> 
> 标签：sql-server, isolation-level

我目前在旧系统中的*多线程*`ReadUncommitted`事务中执行以下操作：

 *1.  每个线程都有一组独特的数据来处理。这些线程中永远不会有重复项。
2.  线程从一组表（仅读取）中收集数据以获取其独特的数据集。
3.  基于收集到的数据，每个线程在内存中创建 n 个新实体，电子邮件，以供以后写入。
4.  然后，对于每个电子邮件实体，线程必须检查该电子邮件实体是否已存在于表中，以避免重复。这涉及比较 x 列数。
5.  之后，线程写入尚不存在的电子邮件实体，知道它们将始终作为线程干净插入，并且此应用程序是唯一可以编写此类电子邮件实体的应用程序，并且线程始终在唯一的数据集上工作。
6.  然后线程提交。

现在我知道这不是一个漂亮的设计，但重构整个系统是一项艰巨的任务。线程的原因纯粹是为了获得更好的性能。

我的问题是：

*   `ReadUncommitted`在我的情况下使用隔离级别有什么危险吗？

最近，我一次又一次地阅读隔离级别，只是为了确定，但我对 SQL Server 还没有那么丰富的经验。

编辑：我应该提到切换到使用`ReadUncommitted`隔离级别的原因是我希望线程能够同时提交，以获得最佳性能。*

# database - CakePHP 数据库表，默认缺少数据源

> ID：14716004
> 
> 赞同：6
> 
> 时间：2013-02-05T20:07:01.353
> 
> 标签：database, cakephp, model, cakephp-2.0

我发现[了这个](https://stackoverflow.com/questions/13511136/cakephp-table-for-model-was-not-found-in-datasource-default)类似的问题，但我的问题不同。

我将我的 CakePHP 2.2 应用程序移到了另一台服务器上。迁移前没有问题。迁移后大多数事情都可以正常工作。我可以访问我的大多数数据库表等。但是当我尝试访问我的一个表时，我收到了这个错误：

```
"Error 500: Table stats for model Stat was not found in datasource default." 
```

为了解决这个问题，我检查了这个文件夹：“/app/tmp/cache/models”

在该文件夹中，我的每个表都有一个文件

*   myapp_cake_model_default_mydatabase_table1
*   myapp_cake_model_default_mydatabase_table2
*   myapp_cake_model_default_mydatabase_table3 等。

但是没有统计表的文件。这可能是问题吗？或者我该如何解决这个问题？

（“/app/tmp/cache/models”文件夹的权限为 755）

在*Database.php*我有这个：

```
public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'myuser',
    'password' => 'mypass',
    'database' => 'mydatabase',
    'prefix' => '',
    'encoding' => 'utf8',
); 
```

编辑：
正如我在 thaJeztah 的回答评论中所指出的，在删除了`app/tmp/cache/persistent`问题中的所有文件后。CakePHP 创建了新的模型缓存文件并且它工作了。一年后，我发现了真正的问题。问题是设置蛋糕模型文件的明确持续时间。我将清除缓存设置为 +999 天，因此不会重新生成模型文件。在进行模型更改时，您可以为模型缓存清除设置较低的值：

```
Cache::config('_cake_model_', array(
    'engine' => "File",
    'prefix' => "myapp_". 'cake_model_',
    'path' => CACHE . 'models' . DS,
    'serialize' => ($engine === 'File'),
    'duration' => "+999 days"
)); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-05T21:00:44.310

您是否检查过您的数据库，例如在 phpMyAdmin 或 MySql 工作台中？该表是否存在于数据库中？

错误消息表明无法使用默认连接访问该表。有可能该表确实丢失了，或者您用来连接数据库的用户没有该表的正确权限。

如果您从另一台服务器迁移数据库，导入时是否收到错误消息？如果您没有创建包含在事务中的转储，则可能只是部分导入了数据库转储。

**[更新]**这个建议解决了问题；

从中删除所有文件`app/tmp/cache/persistent`，`/app/tmp/cache/models`然后启用调试。您的 SQL 日志/调试应该显示 CakePhp 用来检测数据库中是否存在表的查询。您还可以检查 Cake 是否可以毫无问题地写入 tmp 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T15:27:51.990

如果这对 2020 年的任何人都有帮助。即使拥有模型的完全权限，我也遇到了这个问题。我尝试像@theJeztah 建议的那样清除缓存/持久性，但问题仍然存在。最终的工作是切换`Configure::write('debug', 0)`到`Configure::write('debug', 2)`. `app/core file`大概在调试时它可以更好地清除缓存。

# c# - 从 HttpMethod POST 切换到 Get 时，ASPX 丢失会话

> ID：14716012
> 
> 赞同：2
> 
> 时间：2013-02-05T20:07:54.077
> 
> 标签：c#, asp.net, http, session, get

`POST`最近，客户要求我使用而不是`GET`（来自第三方站点）登录旧站点，所有需要的变量现在都在帖子中而不是查询字符串中发送。

问题在于，在接收到所有变量后，它们被存储到 Session 中，然后被重定向到应用程序中的正确页面（从登录页面）。虽然这在使用 调用页面时效果很好，但调用`GET`后`POST`会丢失所有 Session 变量

```
Response.Redirect(@"~/SOMEPAGE.aspx",false); 
```

另一件奇怪的事情是会话 ID 将保持不变，但所有值都将消失。使用 Server.Transfer 时，会话是完整的，但一旦`Response.Redirect`使用就会丢失。（没有选项可以更改所有代码。）

是否有人知道解决此问题的方法或可能使用的某种解决方法。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:18:14.710

发生这种情况的原因有几个。

*   您在代码中使用 Session.Abandon()
*   您正在安全 (https://) 和不安全 (http://) URL 之间切换
*   您的 global.asax 中有一些代码正在操纵 Session，或者 Response.Cookie 的 .Secure 或 .Path 属性

**编辑** [http://forums.asp.net/t/1670844.aspx](http://forums.asp.net/t/1670844.aspx)

# sql-server - 循环遍历所有表并删除记录

> ID：14716025
> 
> 赞同：2
> 
> 时间：2013-02-05T20:09:04.177
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我是 MsSql 的新手，我不确定这是否可以完成，但我想在我想要使用当前流程之前我会先问一下..

我需要创建一个脚本来遍历数据库中的所有表并删除 CorporationId = "xxx" 的行。有一些表没有此列，但在我的约 50 个表中，只有 1 或 2 个没有。

我可以用这个单独删除表中的记录：

```
USE MyDatabase

DECLARE @CorporationId UniqueIdentifier
DECLARE @TokenId UniqueIdentifier
DECLARE @CompanyCode nChar(3)

SET @CorporationId = '52D3AEFE-8EBD-4669-8096-4596FE83BB36'

print 'Starting Web.GasOrder'

DELETE FROM Web.GasOrder
WHERE       CorporationId = @CorporationId

print 'Starting Web.GasOrderNumber'

DELETE FROM Web.GasOrderNumber
WHERE       CorporationId = @CorporationId

etc.. 
```

但是，为每个表创建一个变得乏味。

当然，**有些表是有关系的。**

有没有一种简单的方法可以做到这一点，还是我需要为每个表手动完成？

**更新**

我尝试过的大多数选项都遇到了关系问题并给了我一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T20:15:14.033

[`sp_MSForEachTable`](http://weblogs.sqlteam.com/joew/archive/2007/10/23/60383.aspx)是一个未记录的存储过程，它将为数据库中的每个表运行一个命令：

```
USE MyDatabase

DECLARE @CorporationId VARCHAR(50)
SET @CorporationId = '52D3AEFE-8EBD-4669-8096-4596FE83BB36'

DECLARE @Sql VARCHAR(MAX)
SET @Sql = '
IF COL_LENGTH(''?'',''CorporationId'') IS NOT NULL
BEGIN
    DELETE FROM Web.?
    WHERE CorporationId = ''' + @CorporationId + '''
END
'

EXEC sp_MSForEachTable @Sql 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T20:18:07.217

这是另一个...可以很容易地更改为存储过程...

```
Declare @corpID Nvarchar(256)
Set     @corpID = 'xxx'

If      Object_ID('tempdb..#tables') Is Not Null Drop Table #tables
Create  Table #tables (tID Int, SchemaName Nvarchar(256), TableName Nvarchar(256))

Insert  #tables
Select  Row_Number() Over (Order By s.name, so.name), s.name, so.name
From    sysobjects so
Join    sys.schemas s
        On  so.uid = s.schema_id
Join    syscolumns sc
        On  so.id = sc.id
Where   so.xtype = 'u'
And     sc.name = 'CorporationId'

Declare @SQL Nvarchar(Max),
        @schema Nvarchar(256),
        @table Nvarchar(256),
        @iter Int = 1

While   Exists (Select  1
                From    #tables)
Begin

        Select  @schema = SchemaName,
                @table = TableName
        From    #tables
        Where   tID = @iter

        If      Exists (Select  1
                        From    sysobjects o
                        Join    sys.schemas s1
                                On  o.uid = s1.schema_id
                        Join    sysforeignkeys fk
                                On  o.id = fk.rkeyid
                        Join    sysobjects o2
                                On  fk.fkeyid = o2.id
                        Join    sys.schemas s2
                                On  o2.uid = s2.schema_id
                        Join    #tables t
                                On  o2.name = t.TableName Collate Database_Default
                                And s2.name = t.SchemaName Collate Database_Default
                        Where   o.name = @table
                        And     s1.name = @schema)
        Begin
                Update  t
                Set     tID = (Select Max(tID) From #tables) + 1
                From    #tables t
                Where   tableName = @table
                And     schemaName = @schema

                Set     @iter = @iter + 1
        End
        Else
        Begin
                Set     @Sql = 'Delete t
                                From    [' + @schema + '].[' + @table + '] t
                                Where   CorporationId = ''' + @corpID + ''''

                Exec    sp_executeSQL @SQL;

                Delete  t
                From    #tables t
                Where   tableName = @table
                And     schemaName = @schema

                Set     @iter = @iter + 1

        End
End 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:20:01.550

您可以运行这样的查询：

```
SELECT 'DELETE FROM [' + s.name + '].[' + t.name + '] WHERE CorporationId = ''52D3AEFE-8EBD-4669-8096-4596FE83BB36'''
FROM sys.columns c
    inner join sys.tables t
        ON t.object_id= c.object_id
    inner join sys.schemas s
        ON s.schema_id = t.schema_id
where c.name = 'CorporationId' 
```

然后将结果复制并粘贴到新的查询窗口中并执行新查询或使用游标遍历结果并使用`exec`语句执行每个结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T20:12:15.680

这是一个证明以下查询的[Sql Fiddle](http://sqlfiddle.com/#!6/c5ac2/2)

您可以从此查询中获取表：

```
SELECT Name, IsChecked = 0
INTO #Tables
FROM sys.Tables
WHERE EXISTS
(
  SELECT * FROM sys.columns 
  WHERE object_id = OBJECT_ID(sys.Tables.Name) AND sys.columns.Name = 'blah'
) 
```

然后，您可以创建一个动态查询并为您找到的表执行它

```
WHILE(SELECT COUNT(*) FROM #Tables WHERE IsChecked = 0) > 0
BEGIN
    SELECT TOP 1 @TableName = Name FROM #Tables WHERE IsChecked = 0
    SET     @DeleteQuery = 'DELETE FROM ' + @TableName  + ' WHERE CorporationID = ''' + @CorporationId + ''''
    EXECUTE sp_executeSQL @DeleteQuery;
    UPDATE #Tables SET IsChecked = 1 WHERE Name = @TableName 
END 
```

# javascript - 使用 javascript 检查有效的电子邮件

> ID：14716028
> 
> 赞同：-3
> 
> 时间：2013-02-05T20:09:19.870
> 
> 标签：javascript, jquery

我可以检查空字段，但如何检查有效的电子邮件检查正则表达式？这是我到目前为止所拥有的

```
<script>
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("First name must be filled out");
  return false;
  }
var y=document.forms["myForm"]["email"].value;
if (y==null || y=="")
  {
  alert("email must be filled out");
  return false;
  }
}
</script>
</head>

<body>
<form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post">
First name: <input type="text" name="fname"><br>
email: <input type="text" name="email">

<br><br>
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:16:24.477

您可以做的第一件事是使用 HTML5[`type="email"`属性。](http://www.w3.org/TR/html-markup/input.email.html)，浏览器将进行本机验证。但你必须始终有一个后备。

使用（在[这里](http://www.w3.org/TR/html-markup/input.email.html)找到）

```
/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/ 
```

作为正则表达式：and do

```
var validEmailStyle = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/
if(!validEmailStyle.test(document.forms["myForm"]["email"].value))
{
  // the user is dumb and fill in an invalid email, show a help text
  // or something like that
}​ 
```

- 在*[PeeHaa](https://stackoverflow.com/users/508666/peehaa)**的有效评论后编辑*

您一定不要忘记验证服务器端，如果您使用的是 PHP，您可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)和相同的正则表达式

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T20:11:24.790

```
var pattern = /^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i

if(!pattern.test(userinput))
{
  alert('not a valid e-mail address');
}​ 
```

仅显示一个示例，您可以找到更好的正则表达式模式。

# html - 为导航栏的图像添加文本

> ID：14716039
> 
> 赞同：0
> 
> 时间：2013-02-05T20:10:16.727
> 
> 标签：html, css, image, navigation

我有一个导航栏，但想向其中添加图像，因此导航栏不是由文本链接组成，而是由具有悬停效果等的图像和文本组成的按钮组成。

但由于某些链接名称是动态的，我无法在 photoshop 中制作按钮，所以想知道如何仅在 html 和 css 中制作这种类型的导航栏。

有任何想法吗？

编辑为了澄清我有以下图像[示例导航按钮](http://tinypic.com/r/8zlml5/6)

并希望在此下方添加文本以形成导航栏上的按钮，如果这样可以使其更清晰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:26:34.860

你可以用 CSS 做很多事情

基本思想是使用伪类将按钮的每个状态的属性更改`.cssclass:hover`为鼠标悬停状态和`.cssclass:active`鼠标悬停。

![正常按钮状态](../Images/0f76deb699c379f84a5f196831da954e.png)**普通的**

```
 /* style of the button in normal state */
button.css3button{
    padding: 0.5em;
    background-color: lightblue;
    border: 4px outset green;
    color: green;
    border-radius: 4px;
} 
```

![当鼠标悬停在按钮上时](../Images/10a3d93e1ceaaeaa36827c7f1c7d786c.png)**：徘徊**

```
/* properties that change when mouse over */
button.css3button:hover {
    background-color: lightgreen;
} 
```

![当鼠标按下时](../Images/2692a05e19ee436cb06be353e79bda33.png)**：积极的**

```
/* properties that change when mouse down */
button.css3button:active {
   color: yellow;
   border: 4px inset red;
} 
```

现场演示：[JSFIDDLE](http://jsfiddle.net/J7qKg/2/)

* * *

更复杂的 CSS3 样式示例：

![在此处输入图像描述](../Images/6a9322b3ef54be14f49ade8ada00b37f.png)

```
<button type="button" name="" value="" class="css3button">submit</button>

button.css3button {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #bfc2ff 0%,
        #82b4ff 25%,
        #4664fa);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#bfc2ff),
        color-stop(0.25, #82b4ff),
        to(#4664fa));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(49,141,212,1);
    -webkit-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(49,141,212,1);
    box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(49,141,212,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
} 
```

演示：[JSFIDDLE](http://jsfiddle.net/GAtZF/1/)

您当然可以根据`:hover` `:active` `:visited`自己的喜好更改每个状态的大小、颜色、渐变，您几乎可以设计任何样式`<a> <span> <div> <button>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:27:18.470

这个问题不太适合这个论坛。它是针对特定问题的，而不是基本教程。通过简单的 google 搜索，您可以找到很多很好的教程，这些教程将引导您了解基本的 CSS 以及如何实现这一点。

但只是为了让你开始，你可以做这样的事情：http: [//jsfiddle.net/wgBTZ/](http://jsfiddle.net/wgBTZ/)

**HTML：**

```
<ul>
    <li><a href="#" >One</a></li>
    <li><a href="#" >Two</a></li>
    <li><a href="#" >Three</a></li>
    <li><a href="#" >Four</a></li>
</ul> 
```

**CSS：**

```
li {
    float:left;
    width: 100px;
    height: 40px;
    background:#CCC;
    margin:0 0 0 15px;

}

a {
    color: black;
    text-decoration:none;
    float:left;
    width: 100px;
    height: 40px;
    background:#CCC;
}

a:hover {
    background:#000;
    color:white
} 
```

编辑：这只是基本的机制。使用 CSS3，您可以使用我在上面所做的并实际构建一些非常酷的东西。

# facebook - Nginx 重写，但 Facebook 不喜欢它

> ID：14716044
> 
> 赞同：0
> 
> 时间：2013-02-05T20:10:49.530
> 
> 标签：facebook, url, nginx, rewrite, adsense

在使用 Nginx 之前，我在重写 url 时使用 Apache，我可以在 Facebook 上共享一个页面，它会将正确的 url 放入共享器中。

现在，使用 Nginx，当我分享[https://www.facebook.com/sharer/sharer.php?u=http://beautifulurl.com/page25](https://www.facebook.com/sharer/sharer.php?u=http://beautifulurl.com/page25) Facebook 只捕获[http://beautifulurl.com](http://beautifulurl.com)所以我失去了完整页面网址。

我也遇到了 AdSense 问题（在某些页面中它不显示广告）以及 Google+ 共享器。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:22:04.143

您是否尝试过替换标点符号：

```
https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fbeautifulurl.com%2Fpage25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:43:00.997

共享的显示链接将始终显示顶级域，当您单击共享链接时，它将遵循您提供给 sharer.php 的 URI

# c# - 打开 excel 错误：System.Runtime.InteropServices.COMException (0x80080005)：检索具有 CLSID 的组件的 COM 类工厂

> ID：14716047
> 
> 赞同：3
> 
> 时间：2013-02-05T20:10:56.413
> 
> 标签：c#, .net, excel

我有一个 C# .net 网络应用程序。我希望用户单击网页上的按钮，服务器打开 Excel 电子表格并将数据写入其中，用户保存文档。这可以使用 Visual Studio 2010 和 Office 2010 在本地工作。但是，在我的服务器上，我收到此错误：

> System.Runtime.InteropServices.COMException (0x80080005)：检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80080005 服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE ））。

我研究并发现了大量的答案，说明打开 dcomconfig 并将具有权限的用户添加到 Microsoft Excel 应用程序。我的网站设置为直通安全，所以我添加了自己；我是服务器的管理员，所以我确保管理员可以访问；我还添加了网络服务的应用程序池默认值；还有 ASP.NET 机器帐户；并且，以防万一，添加了应用程序在连接到数据库时使用的帐户。我仍然得到完全相同的错误。

我的服务器是 64 位的，Office 2007，IIS 7。

我的代码是：

```
 {
        try
        {
            Excel.Application xXL = null;
            Excel.Workbook xWB = null;
            Excel.Worksheet xSheet = null;
            xXL = new Excel.Application();
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-06T05:57:49.290

1.  在 DCOMCNFG 中，右键单击我的电脑并选择属性。
2.  转到组件/MyComputer/DCOMConfig
3.  转到 Microsoft Excel 应用程序属性安全性
4.  在启动和激活权限中，单击“自定义”并向其添加网络服务并授予其“本地启动”和“本地激活”权限。提供与访问权限和配置权限相同的权限 按 OK 就可以了。我现在可以运行我的应用程序了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:23:39.197

办公自动化——这些 Excel.Application 和 Excel.Workbook 对象的使用——[不被微软推荐和支持](http://support.microsoft.com/kb/257757)。看：

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

这意味着即使您解决了服务器端/客户端问题，您仍然在玩火，因为有些场景可能有效，有些则不会，有些场景有时会有效，有时会导致您的进程挂起，因为当没有控制台用户登录到服务器时，Excel 会尝试打开弹出通知。相信我，不要这样做。

我提供的链接列出了您尝试做的几个替代方案，但假设您计划为您的用户构建相对简单的 Excel 工作表，您最好只创建一个[CSV 文件](http://en.wikipedia.org/wiki/Comma-separated_values)并将其发送回用户适当的标题（类似于`Response.ContentType="application/vnd.ms-excel"`），以便默认情况下 Excel 打开返回的数据。[您可以在此处](https://stackoverflow.com/questions/13475622/opening-text-containing-csv-with-excel-from-asp-net)查看该问题的更多答案。

# ms-access-2010 - 在报表打印预览中或打印时被截断的备注字段

> ID：14716048
> 
> 赞同：1
> 
> 时间：2013-02-05T20:10:57.240
> 
> 标签：ms-access-2010

好的，我已经看到了几篇关于备忘录字段在链接到具有 DISTINCT 属性的查询时被截断的帖子。但是，我有一个简单的报告，其中包含一个备注字段，它可以根据需要***成功增长*****，并且在Report View**中看起来很好。但是，在**打印预览**中或当我实际**打印**报告时，备注字段会被截断。发生在不同的字符数上。一条记录的备注字段最多允许 772 个字符，但其余 15 个则不允许。:-\

此报告不涉及任何查询。只需将字段放在报告上并选择打印预览。

我确实将它设置为 CAN GROW = YES 并且我以富文本显示。没有分组。没有排序。没什么。两个字段，一个 DATE 字段和一个备注字段。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T21:56:11.553

是的，这是一个已知的错误。它基于字体和打印机。[另一位用户声称切换到 Arial 解决了这个问题](http://answers.microsoft.com/en-us/office/forum/office_2010-access/access-2010-truncation-of-calibri-rich-text-in/8b6242b3-4a8b-4553-969c-42b0ca709849)。他的问题是**Calibri**字体，而我的问题是**Tahoma**字体。

我的经验是它也取决于打印机，因为我的客户会在一台打印机上遇到这个错误，而不是在另一台打印机上使用同一台计算机。

切换到**Arial**字体对我们俩都有效。除了这里已经提到的测试，我找不到哪些字体有问题以及哪些字体有效的列表。

# c++ - stl 容器是否使用隐式共享？

> ID：14716053
> 
> 赞同：9
> 
> 时间：2013-02-05T20:11:17.450
> 
> 标签：c++, stl

众所周知，Qt 小部件使用[隐式共享](http://doc.qt.io/qt-5/implicit-sharing.html)。所以我对 stl 容器也很感兴趣`std::vector`，`std::string`也使用隐式共享。

如果不是，为什么？因为它非常有用。

如果答案是肯定的，我们如何确定呢？我需要简单的 C++ stl 程序，它表明 stl 容器使用隐式共享。复制时它不会进行深度复制。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T20:19:44.207

不，他们不能。当您尝试修改容器的内容，甚至在其上调用可变对象`begin()`时，这将意味着潜在的写时复制，从而使对容器的所有引用和迭代器无效。这将是一个难以调试的情况，并且是被禁止的。

尽管`std::string`从技术上讲它不是容器，但自 C++11 起仍然禁止进行写时复制：

> 引用 basic_string 序列元素的引用、指针和迭代器可能会因该 basic_string 对象的以下用途而失效：
> ...
> — 调用非常量成员函数，**除了 operator[]、at、front、back、begin、重新开始、结束和结束。**

[字符串.要求]

> ...因为它非常有用。

呵呵，干嘛？通过引用传递几乎总能解决所有“性能问题”。原子引用计数在多处理器机器上本质上是不可扩展的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T20:43:39.750

除了其他人对容器中的 CoW 行为提出的反对意见之外，这里还有一些。这些都属于违反惯例的行为类别，因此会导致毫无戒心的开发人员出现奇怪的错误。

**例外**

允许 CoW 意味着容器上的无害突变操作可能会失败并出现异常，否则它们不会。这将是一个特殊的危险，`operator[]`无论是在一个`std::vector`或`std::string`

**穿线**

人们可能合理地期望能够复制构造一个容器，其明确目的是将其交给另一个线程，而不必担心此后的并发性。CoW 并非如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T20:15:32.880

正如在[类似问题](https://stackoverflow.com/questions/4067395/gnu-stl-string-is-copy-on-write-involved-here)中注意到的那样：

> C++ 标准不禁止或强制写入时复制或任何其他实现细节`std::string`。只要满足语义和复杂性要求，实现就可以选择它喜欢的任何实现策略。

我认为，对于`std::vector`

此外，您可能对这个主题感兴趣：[如何实现 std::string](https://stackoverflow.com/questions/1466073/how-is-stdstring-implemented)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-04T15:24:36.777

STL 容器不使用隐式共享。它们总是具有纯值语义。

原因在于**运行时性能**：在多线程程序（可能但不一定在多核主机上运行）中，管理数据的锁定开销（例如引用计数、写入前复制时锁定）远远超过纯值副本的开销，后者具有根本没有特殊的线程含义。预计将遭受巨大复制的程序`std::maps`实施显式共享以避免复制。

事实上，在 STL 的早期，`std::string` *确实*使用了隐式共享。但是当第一个多核 CPU 出现时，它就被放弃了。

# java - 填充 Java 数组

> ID：14716061
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:11:48.527
> 
> 标签：java

我有一个用户定义大小为“a”的数组

一旦我的用户输入了所有数据，我希望能够对用户输入的所有值执行 XOR 操作。

通过修改代码；

```
int k=1;     
for (int k=0;k<A;k++){
k = ^piles[k]; 
```

*此代码在循环语句中。我假设它将我的值（一旦它运行 XOR 运算符）乘以 1，这给了我错误的值。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:15:31.097

尝试这个：

```
int result=0;     
for (int k=0;k<A;k++){
  result ^= piles[k];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:25:11.787

```
Integer[] in = {1,2,4,7};
int result = 0;
for(int i:in) {
    result ^= i;
}
System.out.println(result); //prints 0 
```

# php - mysqli中未定义的变量，但它是在构造函数中定义的

> ID：14716062
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:11:54.603
> 
> 标签：php, mysqli

我正在尝试使用 mysqli，尽管我已经尝试修复它几个小时，但它一直给我一个错误。

这是数据库类

```
class db {

    public $mysqli;

    function __construct(){
        $mysqli = new mysqli('host', 'user', 'password', 'database');
    }

    function clean($string){
        $string = $mysqli->real_escape_string($string);
    }

} 
```

当我尝试在这样的测试页面中调用它时，

```
$db = new db();
$db->clean("hi"); 
```

我收到一个错误：

注意：未定义变量：第 12 行 C:\xampp\htdocs\eat\class\db.class.php 中的 mysqli

致命错误：在第 12 行的 C:\xampp\htdocs\eat\class\db.class.php 中的非对象上调用成员函数 real_escape_string()

我在这里做错了什么吗？我已经在 stackoverflow 上搜索了很长时间的 php 手册，但似乎没有其他人面临这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:13:07.937

您正在`$mysqli`方法范围内使用变量。您应该使用`$this`来访问对象范围。

```
class db {

    public $mysqli;

    function __construct(){
        $this->mysqli = new mysqli('host', 'user', 'password', 'database');
    }

    function clean($string){
        return $this->mysqli->real_escape_string($string);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:16:28.670

你有没有听说过不在`As is`类方法中声明变量？

`$this->`引用变量范围时必须始终使用。

下面是如何访问变量的蓝图

```
class foo {

$who= "MyName";

function __construct() {

$this->who;

}

} 
```

在上面的例子中，`who`你的函数内部引用了变量。

# ruby-on-rails - 根据用户日期参数显示内容项

> ID：14716063
> 
> 赞同：0
> 
> 时间：2013-02-05T20:11:55.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我们有一个网站，提供翁布里亚/马尔凯（意大利）的度假租赁/活动/活动。我们有很好的区域内容，例如事件（模型），活动（模型）等。每个模型都有属性 start_date 和 end_date。

我想制作一个带有日期字段的表格，并询问访问者他们想来翁布里亚/马尔凯的时间是什么时候。当访问者提交数据时，我想要显示“用户”期间的事件和活动的条目。我可以制作表格/日历。但是我怎样才能在整个网站中显示正确的“基于用户输入”的内容。这必须基于会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:42:48.993

除了使用会话之外，您还可以覆盖 url_for 助手。然后，您将用户的数据直接添加到 url 并在任何后续请求中读取它。

检查此文档，尤其是页面末尾的代码：http: [//apidock.com/rails/ActionController/Base/url_for](http://apidock.com/rails/ActionController/Base/url_for)

我会把这个新的 url_for 函数放在你的 ApplicationHelper 中。

# jquery - 当有多个 jquery 实例时，如何使我的插件与特定的 jquery 一起工作？

> ID：14716064
> 
> 赞同：2
> 
> 时间：2013-02-05T20:11:58.750
> 
> 标签：jquery, jquery-plugins, plugins

好的，我想我最好清理一下，以便更清楚地了解问题所在。我有一个脚本可以在可能已经加载了 jQuery 的网站上运行，但可能是错误的版本。所以我加载了正确版本的 jQuery，然后调用以下命令：

```
myVar = jQuery.noConflict(); 
```

当我编写一个专门使用我包含的 jQuery 版本的函数时，应该如何构造它？

```
(function($) {
     $.myPlugin = function(options) {

        // Code here

    }
}(myVar)); 
```

似乎不起作用。我收到一个错误“TypeError：$ 为空”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:14:26.797

加载你的 jQuery 版本，初始化你的插件，然后使用它[`$.noConflict(true)`](http://api.jquery.com/jQuery.noConflict/)来恢复到以前的 jQuery 版本。

基本上，您需要确保在加载所需的 jQuery 版本后运行此代码：

```
(function($) {
   //...
}(jQuery)); 
```

使用传递 jQuery 作为参数的原因是，您的插件始终使用正确版本的 jQuery，即使全局`jQuery`和`$`已更改。本地函数参数`$`将始终引用第一次执行 IIFE 时存在的 jQuery 版本。

如果您想检查可用版本是否与您需要用于`$().jquery`确定版本号的版本兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:15:02.647

当前版本的 jQuery 可通过`jQuery().version`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:15:59.143

只需检查 jQuery 的版本作为您做的第一件事。看这里：

[http://api.jquery.com/jquery-2/](http://api.jquery.com/jquery-2/)

```
if($.fn.jquery != 1.xxx ) { ..... } 
```

# python - 有没有办法防止显示关闭？

> ID：14716065
> 
> 赞同：1
> 
> 时间：2013-02-05T20:12:09.973
> 
> 标签：python, linux, gtk, fullscreen, power-management

我正在写一个演示软件。我在我的主屏幕上控制演示，然后在第二个屏幕上显示它。如果一段时间后第二个屏幕上的图像没有变化，我的电脑会关闭第二个屏幕。当然，我可以简单地禁用计算机上的省电功能，但我希望我的软件告诉操作系统在第二个显示器全屏显示时不要关闭它。我怎样才能做到这一点？我在 Linux 上，使用 Python 和 GTK3。

# visual-studio-2010 - VS2010 依赖 SQL Server Compact 3.5 来实现 IntelliSense？

> ID：14716068
> 
> 赞同：0
> 
> 时间：2013-02-05T20:12:24.173
> 
> 标签：visual-studio-2010, windows-xp, sql-server-ce

我最近刚刚在我的 WinXP 机器上安装了 VS2010 Professional（试用版）。知道我只需要它用于 VC++ 项目（没有数据库），我“取消选中”了 SQL Server 的安装选项。

然而，当我尝试创建一个新项目时（我已经尝试了 MFC 和 Win32 项目类型的所有变体），我看到了一个可爱的错误消息框：

> 创建或打开 C++ 浏览数据库文件 c:\path-to-project\testProject.sdf 时出错。IntelliSense 和浏览信息将不适用于 C++ 项目。
> 
> 确保已安装 Microsoft SQL Server Compact 3.5 并且没有其他应用程序正在访问该文件。如果此问题仍然存在，请删除该文件并重新打开解决方案。

如果我点击“Ok”，VS 仍然允许我“开发”，除非我尝试向控件添加事件处理程序。然后给我：

> 此页面上的脚本出现错误。
> 
> 解决方案的源代码数据库可能尚未打开。请确保解决方案未在 Visual Studio 的另一个副本中打开，并且其 .sdf 文件不是只读的。

我应该检查安装 SQL Server 选项吗？如果是这样，为什么？我不想要它，也不会使用它。或者更确切地说，我需要做什么才能使事情正常工作而不会出现错误？

**编辑/解决方案** 因此，事实证明，由于我安装的机器没有连接到互联网，它没有得到那些“精彩”的微软更新，巧合的是，它会为我安装 SQL Server Compact！非常感谢@ErikEJ 的澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T05:35:42.557

您必须在 Visual Studio 中安装 Sql Server Compact 3.5，因为 MFC 应用程序项目默认使用临时数据库。`F12`没有此数据库，IntelliSense`Shift+F12`和查看类图将不可用。

IntelliSense 在开发 c# 应用程序时仍然有效，但在开发 MFC 应用程序时不可用。

# linux - 用脚本比较和插入位块

> ID：14716074
> 
> 赞同：0
> 
> 时间：2013-02-05T20:13:04.817
> 
> 标签：linux, bash, shell

我有一个二进制文件，我需要比较文件中的位块（带有某种模式）并用相同大小的新位块替换它们。

想知道最好的方法是什么？

```
#$1 and $2 are two different binary files.

    function compareByteByByte()
    {
        counter=0
        while [ $counter -le $(( $PNG_FILE_SIZE-1 )) ]
        do

            S1=$($READFILE_EXE -t x1 --read-bytes=1 --skip-bytes=0 $1 | head -1 | awk '{print $2}')
            S2=$($READFILE_EXE -t x1 --read-bytes=1 --skip-bytes=$counter $2 | head -1 | awk '{print $2}')
            if [ $S1==$S2 ]; then
                counter=$(( $counter + 1 ))
                echo "Offset#$counter: $S2"
            else
                echo "S1('$S1') is equal to S2('$S2')"
                break
            fi  
        done
    } 
```

如果 S1 和 S2 相等，我想打破循环，显然它不会对我造成影响。我在这里错过什么了吗？忍受我，因为我是脚本世界的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:26:46.810

您可以在 bash 中尝试此操作以与二进制文件进行比较

```
diff <(xxd b1) <(xxd b2) 
```

或这个：

```
vimdiff <(xxd b1) <(xxd b2) 
```

如果您正在寻找更强大的工具，请尝试 DHEX、VBinDiff、JDIFF。

另见这篇[文章](https://superuser.com/questions/125376/how-do-i-compare-binary-files-in-linux)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:40:00.127

我不确定这是否是您唯一的问题，但一个问题是：

```
 if [ $S1==$S2 ]; then 
```

需要是这样的：

```
 if [ "$S1" == "$S2" ]; then 
```

以便该`[`命令接收`$S1`, `==`, 和`$S2`三个单独的参数。

或者，更好的是：

```
 if [[ "$S1" = "$S2" ]]; then 
```

（这是等效的，但是当我知道 shell 将是 Bash 时，我总是更喜欢，因为`[[`它的陷阱要少得多。并且对于精确相等更正确，因为它还提供了一些模式匹配功能，但在这种情况下，*真的*没关系。）`[``[[``=``==`

# php - 使用 PHP 通过 ID 获取 XML 元素

> ID：14716076
> 
> 赞同：0
> 
> 时间：2013-02-05T20:13:23.400
> 
> 标签：php, xml

我在让 PHP 读取我的 XML 文档时遇到了一些困难。我正在尝试根据我选择的任何 catid 来回显每个节点的内容。

XML：文本.xml

```
<root>
  <category catid='1'>
    <text id='TXT1'><![CDATA[ Lorem Ipsum ]]></text>
    <text id='TXT2'><![CDATA[ Lorem Ipsum ]]></text>
    <text id='TXT3'><![CDATA[ Lorem Ipsum ]]></text>
  </category>
  <category catid='2'>
    <text id='TXT1'><![CDATA[ Lorem Ipsum ]]></text>
    <text id='TXT2'><![CDATA[ Lorem Ipsum ]]></text>
    <text id='TXT3'><![CDATA[ Lorem Ipsum ]]></text>
  </category>
</root> 
```

PHP：

```
<?php  
$xml = simplexml_load_file('/path/to/text.xml');
$category = $xml->xpath("//category[@catid='1']/text");
$ids = ['TXT1', 'TXT2', 'TXT3'];

foreach($ids as $id){
  echo $category[$id]; //I'm not quite sure how to do this bit.
}
?> 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:25:59.593

下面是一个如何使用 DOM 扩展和 XPATH 的示例：

```
$doc = new DOMDocument();
$doc->loadXML($xml);

$selector = new DOMXPath($doc);

$result = $selector->query("//category[@catid='1']");
if($result->length !== 1) {
    die('BAD xml');
}

$category = $result->item(0);
$ids = array('TXT1', 'TXT2', 'TXT3');

foreach($ids as $id){
    // note $category as the second argument. meaning that the query
    // is relative to the category node and not to the root node
    $textResult = $selector->query("text[@id='$id']", $category);
    if($textResult->length < 1) {
        die('BAD xml');
    }

    $text = $textResult->item(0)->nodeValue;
    echo $text, PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:16:27.113

您可以使用 DOMDocument::getElementById，更多信息请参见[getElementById](http://php.net/manual/en/domdocument.getelementbyid.php)。

# ruby-on-rails-3.1 - image_url 缺少资产前缀

> ID：14716077
> 
> 赞同：2
> 
> 时间：2013-02-05T20:13:44.473
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2, asset-pipeline, sass, refinerycms

在 RefineryCMS gem 的 scss 中，他们以这样的背景图像为目标：

```
body {
  min-height: 100%;
  margin: 0;
  padding: 0;
  font-size: 10px;
  font-family: Verdana;
  line-height: 1.5em;
  background: #303030 image_url('refinery/page_bg.png') repeat;
} 
```

而编译的时候会是这样的：

```
background: #303030 image_url('refinery/page_bg.png') repeat; 
```

但是， page_bg.png 在 assets 文件夹中：`assets/refinery/page_bg.png`

如果我尝试`www.mydomain.com/assets/refinery/page_bg.png`我可以看到图像所以，`image_url('refinery/page_bg.png')`在编译的 scss 中缺少前缀`assets/`

我怎样才能解决这个问题？

我试图在`public`名为的文件夹中创建一个文件夹并将其`refinery`放入`page_bg.png`其中，但是，我没有工作，并且 www.mydomain.com/refinery/page_bg.png 不会显示图像。

有解决方案吗？任何人都可以帮忙吗？修复资产前缀当然更好，但是，我不介意直接使用公用文件夹..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:55:30.343

[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)配置将一些目录定义为目录`asset`。这意味着对资产目录中内容的引用不在`assets`前面。例如，在大多数默认配置中，资产目录是`app/assets`:`lib/assets`和`vendor/assets`. 您可以将您的`.png`背景图片放在每个带有名称的子文件夹中，`image`并像这样引用它：`background: url(your_image.png)`。

编辑：根据[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/refinery-cms/xx85GnzdqCg)，如果部署到 Hiroku，应该`sass-rails`包括在资产预编译过程中。

# javascript - 所有者下拉列表未过滤故事纸板

> ID：14716080
> 
> 赞同：1
> 
> 时间：2013-02-05T20:14:15.830
> 
> 标签：javascript, rally

我构建了一个自定义的纸板混搭来显示所有处于“已提交”迭代中并属于当前项目或任何子项目的用户故事。这很有效。然后我添加了一个所有者下拉框（仅限团队成员），以过滤纸板上的故事。结果查询值的格式似乎很好，但没有显示任何故事。我使用警报复制查询字符串并将其粘贴到自定义网格中，该网格返回预期的故事列表。

下面是我的代码。任何帮助表示赞赏。

```
 var rallyDataSource;
        var cardboard;
        var ownerDropdown;

        function refreshCardboard() {

            var cardboardConfig = {
                types: ["Defect", "HierarchicalRequirement"],
                attribute: "ScheduleState",
                fetch: "Name,FormattedID,Owner,ObjectID"
            };

            var query = rally.sdk.util.Query.and(['Iteration.Name != ""', 'Iteration.State = "Committed"']);

            if (ownerDropdown) {
                var ownerQuery = ownerDropdown.getValue();
                if (ownerQuery != 'ALL') {
                    query = '(' + query + ' AND Owner.Name = "' + ownerQuery + '")';
                }
            }

            cardboardConfig.query = query;
            if (!cardboard) {
                cardboard = new rally.sdk.ui.CardBoard(cardboardConfig, rallyDataSource);
                cardboard.display("cardboardDiv");
            } else {
                cardboard.refresh(cardboardConfig);
            }
        }

        function buildOwnerDropdown() {

            var teamMembersQuery = {
                key: "teamMembers",
                type: "User",
                fetch: "UserName,DisplayName",
                query: '(TeamMemberships = /project/__PROJECT_OID__)'
            };

            rallyDataSource.findAll(teamMembersQuery, function (results) {

                var ownerItems = [{ label: "-- ALL --", value: "ALL"}];
                rally.forEach(results.teamMembers, function (teamMember) {
                    ownerItems.push({ label: teamMember.DisplayName, value: teamMember.UserName });
                });

                ownerItems.sort();

                var ownerDropdownConfig = {
                    showLabel: true,
                    label: "Owner:",
                    items: ownerItems
                };

                ownerDropdown = new rally.sdk.ui.basic.Dropdown(ownerDropdownConfig);
                ownerDropdown.display("ownerDropdownDiv");
            });
        }

        function onLoad() {

            rallyDataSource = new rally.sdk.data.RallyDataSource(
                '__WORKSPACE_OID__',
                '__PROJECT_OID__',
                '__PROJECT_SCOPING_UP__',
                '__PROJECT_SCOPING_DOWN__');

            buildOwnerDropdown();

            refreshCardboard();
        }

        rally.addOnLoad(onLoad);

    </script>

</head>
<body>
    <div id="ownerDropdownDiv"></div>
    <input id="refreshButton" type="button" value="Filter" onclick="refreshCardboard()"/>
    <div id="cardboardDiv"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:48:03.087

你真的很接近目标 - 问题出在：

```
 var query = rally.sdk.util.Query.and(['Iteration.Name != ""', 'Iteration.State = "Committed"']);

        if (ownerDropdown) {
            var ownerQuery = ownerDropdown.getValue();
            if (ownerQuery != 'ALL') {
                query = '(' + query + ' AND Owner.Name = "' + ownerQuery + '")';
            }
        } 
```

在添加另一个 AND 条件时，Rally 的查询语法需要另一组嵌套的括号。因此，当您连接第三个条件时，您将得到一个如下所示的查询子句：

`((Iteration.Name != "") AND (Iteration.State = "Committed")) AND (Owner.Name = "user@company.com")`

当它需要看起来像这样时：

`(((Iteration.Name != "") AND (Iteration.State = "Committed")) AND (Owner.Name = "user@company.com"))`

我稍微修改了您的 refreshCardboard() 函数的查询逻辑，如下所示，您的代码现在似乎对我有用。

```
 ....        
    var queryArray = new Array('Iteration.Name != ""', 'Iteration.State = "Committed"');                                       
    var query;

    var selectedOwner = ownerDropdown.getValue();

    if (ownerDropdown) {
       if (selectedOwner != 'ALL') {
          var ownerClause = 'Owner.Name = "' + selectedOwner + '"';
          queryArray.push(ownerClause);
       }
    }

    query = rally.sdk.util.Query.and(queryArray);

    cardboardConfig.query = query;
    .... 
```

# animation - 为什么我的画布在动画帧之间不清晰？

> ID：14716083
> 
> 赞同：2
> 
> 时间：2013-02-05T20:14:27.357
> 
> 标签：animation, canvas, dart

我决定今天再次开始玩飞镖，由于某种原因，我无法让我的视口在帧之间清除。我尝试使用 clearRect 和 fillRect 在整个画布元素上绘制一个白色矩形。这是我的代码。

```
import 'dart:html';

void main() {

  var canvasFun = new CanvasFun(query("#Game"));

}

class CanvasFun{

  CanvasElement canvas;

  num _width;
  num _height;

  Square square;

  CanvasFun(this.canvas){
    this.square = new Square(10,10, new Point(50,50));
    requestRedraw();
  }

  void draw(num _){
    var ctx = canvas.context2d;

    //clear the viewport

    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.fillStyle = "white";
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);

    //draw the square
    this.square.draw(ctx);
    requestRedraw();

  }

  void requestRedraw() {
    window.requestAnimationFrame(draw);
  }

}
class Point {
  num x, y;

  Point(this.x, this.y);
}
class Square{
  num width;
  num height;

  num vectorX;
  num vectorY;

  Point location;

  Square(this.width, this.height, this.location){
    vectorX = 1;
    vectorY = 1;
  }

  void draw(CanvasRenderingContext2D context){
    context.save(); //I thought this might fix the blue viewport problem
    this.update(context);
    context.rect(this.location.x, this.location.y, this.width, this.height);
    context.fillStyle = "blue";
    context.fill();
  }
  void update(CanvasRenderingContext2D context)
  {
    num xBound = context.canvas.width;
    num yBound = context.canvas.height;

    if((this.location.x + this.width) > xBound){
      this.vectorX = -1;
    }
    else if(this.location.x < 0){
      this.vectorX = 1;
    }

    if((this.location.y + this.height) > yBound){
      this.vectorY = -1;
    }
    else if(this.location.y < 0){
      this.vectorY = 1;
    }

    this.location.x += (this.vectorX * 10);
    this.location.y += (this.vectorY * 20);

  }
} 
```

生成的动画在正确的位置绘制一个矩形，但是当它在画布上移动时，仍然绘制矩形的前一个实例。我希望矩形只在画布上出现一次，并且看起来像是在屏幕上移动。

这是输出的截图（注意蓝色方块永远不会被清除）： ![程序输出](../Images/e325dd27098c526226edc146ee9bdec0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:40:39.853

我简化了您的代码以使其正常工作：

在`CanvasFun`：

```
void draw(num _){
    var ctx = canvas.context2d;

    //clear the viewport
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

    //draw the square
    this.square.draw(ctx);
    requestRedraw();
} 
```

在`Square`：

```
void draw(CanvasRenderingContext2D context){
    this.update(context);
    context.fillStyle = "blue";
    context.fillRect(this.location.x, this.location.y, this.width, this.height);
} 
```

我不确定原始版本的确切问题是什么。:)

# jquery - 带有 Jquery UI 播放器的 jPlayer 播放列表？

> ID：14716088
> 
> 赞同：1
> 
> 时间：2013-02-05T20:14:35.353
> 
> 标签：jquery, jquery-ui, jplayer

我需要帮助弄清楚如何将[jPlayer 播放列表播放器的播放列表功能与](http://jplayer.org/latest/demo-02/?theme=0)[带有 jquery UI](http://jplayer.org/latest/demo-07/)的 jPlayer 结合在一起。

我真正想要的一项功能是可拖动的播放头。使用 jQuery UI 播放器对单个文件进行工作和自定义是一件很容易的事，但是让它与播放器的播放列表版本一起工作让我很适应。任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T20:11:16.770

~~好吧，事实证明这一切都比看起来容易，除非我是一个 n00b。我首先删除了`setMedia()`默认 jPlayer 实例选项中的调用，然后我只是在它之后摇晃了 jPlayerPlaylist 实例。~~

好吧，事实证明我确实是一个n00b *。*

默认的 jPlayer 实例破坏了播放列表循环（它只是循环播放列表的最后一首曲目，而不是返回到第一首曲目），我必须将“选项”数组实际集成到 jPlaylist 选项集中。然后，因为选项数组不再是全局的，所以我对滑块函数从 Playlist 对象调用数据的位置给出了更具体的说明......

这是一个工作的jsFiddle：

[http://jsfiddle.net/mroncetwice/qSaBc](http://jsfiddle.net/mroncetwice/qSaBc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:05:21.053

看看这个开始：http: [//jplayer.org/latest/demo-02-video/](http://jplayer.org/latest/demo-02-video/)

jPlayerPlaylist 文档在这里：http: [//jplayer.org/latest/demo-02-jPlayerPlaylist/](http://jplayer.org/latest/demo-02-jPlayerPlaylist/)

至于ASP...有很多可能的解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:36:22.110

悬停搜索栏时将光标更改为“移动”（十字）还不够吗，因为 jPlayer 播放头已经“可拖动”？

# vba - 在 VBA 中动态选择行

> ID：14716089
> 
> 赞同：0
> 
> 时间：2013-02-05T20:14:36.880
> 
> 标签：vba, excel

我想为我在 VBA 中的标准偏差计算动态选择行数。

目前我有以下代码：

```
Sub Stdev()

Dim x as integer
x=10
    Range("E1").Select
    ActiveCell.FormulaR1C1 = "=STDEV(R[1]C:R[5]C)"
    Range("E1").Select
    ActiveCell.FormulaR1C1 = "=STDEV(R[1]C:R[x]C)"'this is my attempt at dynamic calculation
End Sub 
```

如何更正它以选择 x 中指定的行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:17:09.283

尝试：

```
Range("E1").FormulaR1C1 = "=STDEV(R[1]C:R[" & x & "]C)"

```

# meteor - Meteor 只向客户端发送授权模板

> ID：14716100
> 
> 赞同：2
> 
> 时间：2013-02-05T20:15:34.797
> 
> 标签：meteor

我知道meteor 将模板编译到客户端。使用meteor-auth 系统是否有一种方法只在用户有权查看模板时才发送模板（因此在客户端检查html代码时它们不可见）？例如，我们不想总是将管理部分向下发送到浏览器。

例如，如果我有

```
<template name="admin_main">
    <h2>Admin Menu</h2>
    ....
</template> 
```

如果我`Meteor.user().profile.userlevel`是`5`，那么我希望将模板发布给用户。否则我的其他用户可以通过一些 js 知识看到我的管理菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:26:10.427

我不相信这是可能的，但。

对于管理部分，您可以创建两个单独的应用程序并让它们通过同一个 DDP 服务器进行通信。然而，这会使共享代码变得更加困难。

> DDP 可以与任何数据库、框架或编程语言一起工作，它可以在服务器、客户端和移动设备上工作。**事实上，你可以调用 Meteor.connect 来连接任何 DDP 服务器——比如别人写的 Meteor 应用！-- 并实时订阅它发布的任何数据。**

[http://meteor.com/blog/2012/03/21/introducing-ddp](http://meteor.com/blog/2012/03/21/introducing-ddp)

# ajax - 如何只更改网页的一部分？（有非 JS 的解决方案吗？）

> ID：14716101
> 
> 赞同：1
> 
> 时间：2013-02-05T20:15:36.597
> 
> 标签：ajax, xmlhttprequest, pyramid

嗨，我对 Web 应用程序很陌生，我想制作一个小型表单来搜索对象并在那里显示结果。我不想加载整个网页，可能只更改一个`<div>` 标签。

有没有办法在没有 Javascript 的情况下做到这一点？（我不是强制性的。只是检查我是否可以）

我正在使用 Pyramid 框架（并且已经使用了不到 2-3 天，所以请耐心等待您的答案）。

请指出正确的方向，我觉得我什至不知道要搜索什么。

（我的`pyramid XMLHTTPRequest`谷歌搜索没有去任何地方）。

谢谢一堆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:18:11.683

不，这就是 AJAX ，*一种*Javascript 技术。没有它，您无法从浏览器启动 XMLHTTPRequest。

只需使用 jQuery 从 Pyramid 服务器加载 URL；让一条路线提供 HTML 片段而不是完整页面：

```
$('div#somediv').load('http://serveraddress/route/to/snippet') 
```

jQuery`/route/to/snippet`将从您的服务器请求，并将结果批发放在`<div id="somediv"></div>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:22:56.357

您需要一个像 jQuery 这样的 Javascript 库来执行 XMLHTTPRequest（通常称为 AJAX）。见[jQuery.post()](http://api.jquery.com/jQuery.post/)

# c# - DataAdapter.UpdateCommand 不工作 C#？

> ID：14716103
> 
> 赞同：0
> 
> 时间：2013-02-05T20:15:43.937
> 
> 标签：c#, database, datatable, dataadapter

我正在使用此代码更新数据库中表中的“某些”列。但是每次我尝试这样做时都会出现错误。

**没有为一个或多个必需参数指定值。**

```
con.Open();
SlipDA = new OleDbDataAdapter();
string sqlUpdate = "Update tbl_Slip SET RaiseBasic=@RaiseBasic, OtherDed=@OtherDed, Arrears=@Arrears, Notes=@Notes WHERE SlipNo=@SlipNo";

SlipDA.UpdateCommand = new OleDbCommand(sqlUpdate, con);
SlipDA.UpdateCommand.Parameters.AddWithValue("@RaiseBasic", Convert.ToInt32(dRow[4].ToString()));
SlipDA.UpdateCommand.Parameters.AddWithValue("@OtherDed", Convert.ToInt32(dRow[5].ToString()));
SlipDA.UpdateCommand.Parameters.AddWithValue("@Arrears", Convert.ToInt32(dRow[7].ToString()));
SlipDA.UpdateCommand.Parameters.AddWithValue("@Notes", dRow[8].ToString());
SlipDA.UpdateCommand.Parameters.AddWithValue("@SlipNo", dRow[0].ToString());

SlipDA.UpdateCommand.ExecuteNonQuery();
con.Close(); 
```

该表包含 9 列，但我只想更新一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:43:57.033

这可能是问题所在：

> 当 CommandType 设置为 Text 时，OLE DB .NET 提供程序不支持将参数传递给 SQL 语句或由 OleDbCommand 调用的存储过程的命名参数。在这种情况下，必须使用问号 (?) 占位符。例如： SELECT * FROM Customers WHERE CustomerID = ?

来源：[这个](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)

所以基本上你的查询应该是这样的：

```
string sqlUpdate = "Update tbl_Slip SET RaiseBasic= ?, OtherDed= ?, Arrears= ?, Notes= ? WHERE SlipNo= ?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T18:25:22.290

尝试这个

```
 string sqlUpdate = "Update tbl_Slip SET RaiseBasic=@RaiseBasic, OtherDed=@OtherDed, Arrears=@Arrears, Notes=@Notes WHERE SlipNo=@SlipNo";

    OleDbCommand UpdateCommand = new OleDbCommand(sqlUpdate, con);
    UpdateCommand.Parameters.AddWithValue("@RaiseBasic", Convert.ToInt32(dRow[4].ToString()));
    UpdateCommand.Parameters.AddWithValue("@OtherDed", Convert.ToInt32(dRow[5].ToString()));
    UpdateCommand.Parameters.AddWithValue("@Arrears", Convert.ToInt32(dRow[7].ToString()));
    UpdateCommand.Parameters.AddWithValue("@Notes", dRow[8].ToString());
    UpdateCommand.Parameters.AddWithValue("@SlipNo", dRow[0].ToString());

    con.Open();
    UpdateCommand.ExecuteNonQuery();
    con.Close(); 
```

# css - 专门用于 ipad 的 css

> ID：14716109
> 
> 赞同：0
> 
> 时间：2013-02-05T20:16:06.050
> 
> 标签：css, ipad

我需要创建一个在 ipad 上看起来不同的页面。我以前从未这样做过，所以我有几个问题：

1) 我怎样才能让一个页面知道它在 ipad 上被查看以用于 css 目的？

2）如果页面上的某些内容与ipad不同，我如何使用php知道正在加载页面的设备（因为这不能用css完成）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:13:31.993

我先回答你的第二个问题。在服务器端代码中检测特定设备类型的唯一方法是通过用户代理解析。在 PHP 中，您可以使用函数执行此操作，如果第二个字符串参数不包含在第一个字符串参数中`strpos()`，该函数将返回。`FALSE`例如：

```
$userAgent = $_SERVER['HTTP_USER_AGENT'];
if (strpos($userAgent, 'iPad') !== FALSE) {
    // load iPad-specific content
} else {
    // load content for other devices
} 
```

要回答您的第一个问题，无法使用 CSS*仅*检测iPad。您可以使用媒体查询来定位 1024x768 显示器，但这些将适用于具有该分辨率的任何屏幕（不仅仅是 iPad）。如果您想应用 iPad 特定的 CSS 样式，请使用上述 PHP 代码加载一个独特的样式表。

但是，应该指出的是，设备检测通常是一种不好的做法，因为它不会考虑不断变化的浏览器功能、市场趋势或用户代理欺骗。在大多数情况下，[CSS 媒体查询](http://www.vanseodesign.com/css/media-queries/)提供了一种更强大、更前向的方法来支持各种设备。为什么？因为它们针对的是*设备类型*，而不是特定型号。这意味着您的网站今天可以在 iPad、Android 和 Windows 平板电脑上运行良好，明年也可以在市场上任何热门的新 xyz 设备上运行（无需更改代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:18:10.940

[http://css-tricks.com/snippets/css/ipad-specific-css/](http://css-tricks.com/snippets/css/ipad-specific-css/)

[http://thomasmaier.me/blog/2010/03/04/howto-css-for-the-ipad/](http://thomasmaier.me/blog/2010/03/04/howto-css-for-the-ipad/)

[http://matthewjamestaylor.com/blog/ipad-layout-with-landscape-portrait-modes](http://matthewjamestaylor.com/blog/ipad-layout-with-landscape-portrait-modes)

这可能会对您有所帮助，这是一篇写得很好的文章...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T22:57:41.650

使用媒体查询来隐藏/显示/更改不同设备的内容。

# python - 如何在 IPython 中重命名魔术函数？

> ID：14716111
> 
> 赞同：3
> 
> 时间：2013-02-05T20:16:19.490
> 
> 标签：python, ipython

我想重命名`%paste`为类似`%pp`这样的名称，以减少击键次数。我想出了一种方法来做到这一点，但它似乎很复杂。有没有更好的办法？

```
def foo(self, bar):
    get_ipython().magic("paste")

get_ipython().define_magic('pp', foo) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T23:10:56.313

从 IPython 0.13 开始，有一个新的`%alias_magic`魔法函数，您可以将其用作：

```
%alias_magic pp paste 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:31:28.500

使用`%alias`魔法来做到这一点（如果你想让它永久使用`%store`）：

```
In [8]: %alias??

"""Define an alias for a system command.

   '%alias alias_name cmd' defines 'alias_name' as an alias for 'cmd'
   ... 
```

# java - jaxws 异常/错误处理

> ID：14716112
> 
> 赞同：1
> 
> 时间：2013-02-05T20:16:23.533
> 
> 标签：java, jax-ws

我尝试为我的第一次体验构建 wsdl 客户`jre5`端`JAX-WS RI 2.1.3`。我用`wsdl2java`工具生成了类，`cxf`并围绕客户端编写了包装类，如下所示：

```
public class RequestHelper {
    private DataLoadService service = new DataLoadService();
    private DataLoadServiceSoap client;
    private static String token;

    //....my constructor....

    public void sendData(data){
     try{
       if (tokenIsExpired()){
          renewToken();
       }
       client.sendData(data, this.token);
      }catch(SOAPFaultException e){
           //...work with e
      }
    }
} 
```

我无法理解如何在`sendData`方法中处理异常。
我的意思是，例如，在 HTTP 中`status codes`，我们可以读取状态代码并决定我们从服务器获得的错误类型以及我们希望如何处理它们。
就我而言，我对令牌过期时间有疑问。有时`sendData`请求会长时间到达服务器。当请求已经在服务器上时，令牌不再有效，然后我收到异常消息“令牌已过期”。我想单独捕获这种类型的异常，像这样：

```
public class RequestHelper {
private DataLoadService service = new DataLoadService();
private DataLoadServiceSoap client;
private static String token;

//....my constructor....

    public void sendData(data){
     try{
         if (tokenIsExpired()){
            renewToken();
         }
         client.sendData(data, this.token);
       }catch(SOAPFaultException e){
       //...work with e
       }catch(TokenExpiredException e){
         renewToken();
         client.sendData(data, this.token);
       }
    }
} 
```

我如何通过`JAX-WS RI 2.1.3`图书馆实现这一目标？

升级版：

```
} catch (SOAPFaultException e) {
 SOAPFault f = e.getFault();
 f.getFaultString() //yes here we have error description with "Token"
                    //but with locals dependency, this is not safe handle exception by this value
 f.getFaultCode() //here simply string "soap:Receiver", do not know how i can recognize only "token exceptions"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:05:08.003

找出作为 SOAPFaultException 的一部分从服务器返回的内容。如果异常包含错误消息，那么我们可以编写如下所示的内容。注意：错误代码将是处理此问题的最佳方法。

```
 try{
         if (tokenIsExpired()){
            renewToken();
         }
         client.sendData(data, this.token);
       }catch(SOAPFaultException e){
           if(e.getFault().getFaultString().equalsIgnoreCase("Token expired") ) {
               renewToken();
               client.sendData(data, this.token);
           }
           ......
       } 
```

另一种方法是使用错误代码和错误消息从服务器抛出自定义 SOAP 异常，并在代码中处理它

# google-maps - 如何使用自定义对话框消息制作自定义 Google 地图标记

> ID：14716117
> 
> 赞同：0
> 
> 时间：2013-02-05T20:16:33.650
> 
> 标签：google-maps, dialog, marker

我需要创建 iframe 谷歌地图，我可以将其嵌入到带有自定义标记的网站上，该标记将是公司的徽标。单击标记后，它应该显示一个包含自定义信息的对话框，而不是带有地址等的 Google 默认信息。我想对其进行修改，以便显示一些有关业务的信息。就像在这里可以看到的那样：http: [//ekogaze.lv/kontakti.html](http://ekogaze.lv/kontakti.html)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:47:39.913

创建自定义标记可以在[这里](http://powerhut.co.uk/googlemaps/custom_markers.php)找到。添加自定义信息可以通过更新标记 div 中的值来完成。

# c++ - 获取未删除指针的值

> ID：14716119
> 
> 赞同：3
> 
> 时间：2013-02-05T20:16:36.443
> 
> 标签：c++, oop, pointers, heap-memory

我正在学习 OOP，我遇到了这个问题：

如果我们这样做：

```
A* a = new A; 
```

运算符从堆中`new`为变量找到一个空间。`a`我想知道该变量所在的地址。

**问题 1**

那个地址是哪一个？这两者有什么区别？

```
cout <<  a;
cout << &a; 
```

**问题2（主要）**

假设我**没有** `delete`指针。程序退出。只要指针没有被类的析构函数破坏，当我再次运行程序时，我可以使用它的地址（例如 0x0035fa24）取回该对象吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:19:25.217

> 问题 1
> 
> 那个地址是哪一个？这两者有什么区别？

`a`是*对象*的地址。`&a`是*指针*的地址。

> 问题2（主要）
> 
> 假设我没有删除指针。程序退出。只要指针没有被类的析构函数破坏，当我再次运行程序时，我可以使用它的地址（例如 0x0035fa24）取回它吗？如果是，如何？

典型的现代操作系统不允许您这样做。当第一个进程退出时，它将回收内存。不允许随后启动的进程查看第一个进程的内存内容，因为这会带来重大的安全风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:18:50.633

Q1：

> > 运算符从堆中`new`为变量找到一个空间`a`

不，它没有。`new`运算符创建一个类型为 的对象`A`。`a`然后使用该地址初始化变量。

因此，`a`计算对象所在的地址。

`&a`计算为变量 a 的地址。

Q2：从技术上讲，这种行为是未定义的（您将取消引用指向不存在的对象的指针）。实际上，答案是“不”。当您退出时，操作系统将释放您进程的所有内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T20:19:38.463

问题一：

你的变量`a`是一个指针。Take`&a`给出指针本身的地址，而不是`class A`存储实例的地址。

问题2：

不，你不能那样做。除非您自己维护这样的列表，否则机器不会为您维护一些“如果 A 的所有实例的列表”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T20:20:11.183

对 1 的回答：`a`将是地址。运算符`&`返回您稍后写入的地址。用简单的英语，`&a`会给你一个指针的地址，`a`将是变量存储的地址，`a`并且`*a`是指向的地址的内容`a`。

至于2，我认为理论上是可能的，但实际上是不可能的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T20:20:24.077

```
A* a = new A;
cout <<  a;
cout << &a; 
```

在上面的代码片段中，您在堆上创建了一个新的 A，并将其地址分配给 a。然后打印出 a 的值，这是动态创建的对象的地址。然后打印出指针本身的地址（在堆栈上）。

不，你绝对不能收回会话之间丢失的记忆。

# c++ - 如何在 Ubuntu 上构建葱？

> ID：14716124
> 
> 赞同：-2
> 
> 时间：2013-02-05T20:16:54.403
> 
> 标签：c++, c, gcc

我试图在 Ubuntu linux ( ) 上编译[葱](https://github.com/katmagic/Shallot/blob/master/README.asciidoc)`gcc ./src/shallot.c`，但我得到了这个错误：

```
/tmp/ccwsRxaV.o: In function `main':
shallot.c:(.text+0x3d): undefined reference to `usage'
shallot.c:(.text+0x1ea): undefined reference to `parse_cpuinfo'
shallot.c:(.text+0x2a3): undefined reference to `pattern'
shallot.c:(.text+0x2eb): undefined reference to `usage'
shallot.c:(.text+0x3ba): undefined reference to `usage'
shallot.c:(.text+0x440): undefined reference to `usage'
shallot.c:(.text+0x4de): undefined reference to `usage'
shallot.c:(.text+0x57a): undefined reference to `usage'
/tmp/ccwsRxaV.o:shallot.c:(.text+0x5f4): more undefined references to `usage' follow
/tmp/ccwsRxaV.o: In function `main':
shallot.c:(.text+0x92d): undefined reference to `worker'
shallot.c:(.text+0x941): undefined reference to `pthread_create'
shallot.c:(.text+0x984): undefined reference to `monitor_proc'
shallot.c:(.text+0x998): undefined reference to `pthread_create'
shallot.c:(.text+0x9b7): undefined reference to `worker'
shallot.c:(.text+0x9db): undefined reference to `pthread_join' 
```

对不起，我不是程序员。我真的不知道这应该如何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:47:23.523

好吧，我去了现场，记下了说明并试了一下。看起来很简单：

首先将源代码克隆到“葱”目录中：

```
git clone https://github.com/katmagic/Shallot.git Shallot 
```

然后我们运行配置：

> mike@linux-4puc:~/C/Shallot> ./configure
> 检测到Liunx。您是否考虑过切换到 BSD？
> 配置成功。 **这并不意味着它会建立。
> 如果您缺少 gcc 或所需的库/头文件，则需要先安装它们。**

最后运行 Makefile：

```
mike@linux-4puc:~/C/Shallot> make
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/math.o -c src/math.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/error.o -c src/error.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/linux.o -c src/linux.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/print.o -c src/print.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/thread.o -c src/thread.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib  -Wall -o src/shallot.o -c src/shallot.c
cc  -O3 -I/usr/include -I/usr/local/include -L/usr/lib -L/usr/local/lib -pthread src/math.o src/error.o src/linux.o src/print.o src/thread.o src/shallot.o -o shallot -lm -lpthread -lssl -lcrypto 
```

`shallot`现在可以在目录中看到可执行文件：

```
mike@linux-4puc:~/C/Shallot> ls
CHANGELOG  configure  LICENSE  Makefile  README.asciidoc  shallot  src 
```

因此，如果您完全按照我所做的所有步骤操作，我怀疑您遇到问题的地方是我在上面突出显示的文本块。你有构建葱所需的所有库/标题吗？

# c# - 使用 wcf 服务的控制台应用程序

> ID：14716125
> 
> 赞同：1
> 
> 时间：2013-02-05T20:16:57.600
> 
> 标签：c#, wcf, console, asp.net-4.0

我有运行良好的 ac#asp.net web 应用程序/项目。后来我向这个项目添加了一个 wcf 服务作为新项目。然后我向这个解决方案添加一个新的简单控制台应用程序来使用 wcf。它在我当地运行良好。（我的本地服务器名称是 A。使用 [http://A/MyProjName/wcfSendRpt.svc] 或 [http://localhost/MyProjName/wcfSendRpt.svc] 都可以）。然后我将我的 Web 应用程序（使用 wcf 服务）发布到实时服务器 B。（B 只托管这个唯一的 Web 应用程序。） [http://B/wcfSendRpt.svc] 或 [http://localhost/wcfSendRpt。 svc] 工作正常。然后我将控制台应用程序部署到服务器 B。（我只是将 exe 和配置文件复制到服务器 B）。我将配置文件中的端点地址从 [http://A/MyProjName/wcfSendRpt.svc] 更改为 [http://B/wcfSendRpt.svc]，如下所示

```
<endpoint address="http://B/wcfSendRpt.svc" binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding_IwcfSendRpt"
          contract="nsSendRpt.IwcfSendRpt" name="BasicHttpBinding_IwcfSendRpt" /> 
```

但它不起作用。来自事件日志的错误如下：

```
Unhandled Exception: System.ServiceModel.FaultException`1[System.ServiceModel.Ex
ceptionDetail]: An error occurred while executing the command definition. See th
e inner exception for details.

Server stack trace:
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message
 reply, MessageFault fault, String action, MessageVersion version, FaultConverte
r faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRunt
ime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean on
eway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan tim
eout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCall
Message methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage req
Msg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgDa
ta, Int32 type)
   at CAScheduledService.nsSendRpt.IwcfSendRpt.SendRpt(String statementdate)
   at CAScheduledService.Program.Main(String[] args) 
```

我的控制台应用程序非常简单：代码如下

```
class Program
    {
        static void Main(string[] args)
        {
            nsSendRpt.IwcfSendRptClient ss = new IwcfSendRptClient();
            string a = ss.SendRpt(System.DateTime.Now.ToString("yyyyMMdd"));
            ss.Close();
        }
    } 
```

我需要你的帮助来解决这个问题。我在 wcf 中很新。我的 Web 应用程序中的这个 wcf 服务是否安静？

# c# - asp.net设计中的动态表

> ID：14716127
> 
> 赞同：0
> 
> 时间：2013-02-05T20:17:09.207
> 
> 标签：c#, asp.net

我最近使用 c# 和 asp.net 构建了一个表，但我遇到了设计问题。

```
string name = Request.QueryString["name"];
    AnimalsDB animal = new AnimalsDB();
    DataSet ds = animal.GetFactByName(name);
        TableRow rw = new TableRow();
        TableCell tc1 = new TableCell();
        Label l1 = new Label();
        l1.Text = ds.Tables[0].Rows[0]["AName"].ToString();
        Image image = new Image();
        image.ImageUrl = ds.Tables[0].Rows[0]["Pic"].ToString();
        image.Width = 250;
        image.Height = 250;

        Label l2 = new Label();
        l2.Text = ds.Tables[0].Rows[0]["Fact"].ToString();
        tc1.Width= 200;
        tc1.Controls.Add(l1);
        tc1.Controls.Add(image);
        tc1.Controls.Add(l2);
        rw.Cells.Add(tc1);
        Table3.Rows.Add(rw); 
```

表格有点杂乱无章，所有细节都出现在一行上，你知道如何对它进行排序和组织细节吗？（在我的情况下，我想显示 lable1 断线图像和断线，然后是第二个标签）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:33:53.197

如果您只需要显示三条信息，请在前端尝试这样的操作：

```
<h3><asp:Label ID="_animalName" runat="server"></asp:Label></h3>
<asp:Image ID="_animalImg" runat="server" />
<p><asp:Label ID="_animalFact" runat="server"></asp:Label></p> 
```

然后是你的代码：

```
_animalName.Text = ds.Tables[0].Rows[0]["AName"].ToString();
_animalImg.ImageUrl = ds.Tables[0].Rows[0]["Pic"].ToString();
_animalFact.Text = ds.Tables[0].Rows[0]["Fact"].ToString(); 
```

# javascript - 具有自定义几何形状的网格的 Three.js 纹理

> ID：14716128
> 
> 赞同：2
> 
> 时间：2013-02-05T20:17:11.783
> 
> 标签：javascript, three.js, textures

我正在尝试创建房屋几何图形并将不同的纹理附加到几何图形的表面。我正在使用`r55`. 问题是具有从纹理创建的材质的面不会出现。然而，具有简单颜色材料的面会出现。如果我`roofTexture`用简单的颜色材料替换我生成的材料，使用该材料的面也会正确显示。

这是我的代码的相关部分：

```
var geom = new THREE.Geometry();

// Load the roof texture
var roofTexture = new THREE.ImageUtils.loadTexture('gfx/textures/roof.jpg');

// Let the roof texture repeat itself
roofTexture.wrapS = roofTexture.wrapT = THREE.RepeatWrapping;
roofTexture.repeat.set(10, 10);

// Materials
var materialArray = [];
materialArray.push(new THREE.MeshLambertMaterial({color: 0xD3E3F0 }));
materialArray.push(new THREE.MeshLambertMaterial({map: roofTexture}));

// Base edges
var edge0 = new THREE.Vector2(obj.ridgeLength/2, -obj.buildingDepth/2);
var edge1 = new THREE.Vector2(obj.ridgeLength/2, obj.buildingDepth/2);
var edge2 = new THREE.Vector2(-obj.ridgeLength/2, obj.buildingDepth/2);
var edge3 = new THREE.Vector2(-obj.ridgeLength/2, -obj.buildingDepth/2);

// Floor
geom.vertices.push(new THREE.Vector3(edge0.x, -1, edge0.y));
geom.vertices.push(new THREE.Vector3(edge1.x, -1, edge1.y));
geom.vertices.push(new THREE.Vector3(edge2.x, -1, edge2.y));
geom.vertices.push(new THREE.Vector3(edge3.x, -1, edge3.y));

// Eave
geom.vertices.push(new THREE.Vector3(edge0.x, obj.eaveHeight, edge0.y));
geom.vertices.push(new THREE.Vector3(edge1.x, obj.eaveHeight, edge1.y));
geom.vertices.push(new THREE.Vector3(edge2.x, obj.eaveHeight, edge2.y));
geom.vertices.push(new THREE.Vector3(edge3.x, obj.eaveHeight, edge3.y));

// Ridge
geom.vertices.push(new THREE.Vector3(obj.ridgeLength/2, obj.ridgeHeight, 0));
geom.vertices.push(new THREE.Vector3(-obj.ridgeLength/2, obj.ridgeHeight, 0));

// Ground
geom.faces.push( new THREE.Face4(0, 0, 0, 0) );

// Front
geom.faces.push( new THREE.Face4(0, 3, 7, 4) );

// Left side
geom.faces.push( new THREE.Face4(0, 4, 5, 1) );

// Back
geom.faces.push( new THREE.Face4(1, 5, 6, 2) );

// Right side
geom.faces.push( new THREE.Face4(2, 6, 7, 3) );

// Left triangle
geom.faces.push( new THREE.Face3(4, 8, 5));

// Right triangle
geom.faces.push( new THREE.Face3(6, 9, 7));

// Front roof
geom.faces.push( new THREE.Face4(7, 9, 8, 4) );

// Back roof
geom.faces.push( new THREE.Face4(5, 8, 9, 6) );

// Assign materials to the faces
geom.faces[0].materialIndex = 0;
geom.faces[1].materialIndex = 0;
geom.faces[2].materialIndex = 0;
geom.faces[3].materialIndex = 0;
geom.faces[4].materialIndex = 0;
geom.faces[5].materialIndex = 0;
geom.faces[6].materialIndex = 0;
geom.faces[7].materialIndex = 1;
geom.faces[8].materialIndex = 1;

geom.computeFaceNormals();

obj.house = new THREE.Mesh( geom, new THREE.MeshFaceMaterial(materialArray) );
obj.house.doubleSided = true;
obj.house.castShadow = true;
obj.sun.shadowDarkness = 1.0;
obj.scene.add(obj.house); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:24:44.413

您的几何图形上缺少 UV 坐标。UV 坐标从 0 到 1，因此由于您自己创建几何体，因此您可以在右下角 (1.0, 0.0)、左上角 (0.0, 1.0) 和右上角 ( 1.0, 1.0)。您可以查看 PlaneGeometry.js 文件以了解如何分配 UV。

# php - Ajax 加载到 子窗口滚动到网页顶部

> ID：14716129
> 
> 赞同：0
> 
> 时间：2013-02-05T20:17:20.520
> 
> 标签：php, javascript, ajax, load, window.parent

这是我的困境，我通过 ajax 将我的外部页面调用到 a`<div>`中，在其中`<div>`我有链接到父窗口的回调，它触发下一页的 ajax 加载事件。我的问题是回调将网站带到页面顶部。这是代码；

父窗口：

```
function Display_Load() {
            $("#loading").fadeIn(900,0);
            $("#loading").html("<img src='<?php echo $reg->get ('rel_addr'); ?>img/load.gif' height='50' width='50' />"); return false;
        }
        function Hide_Load() {
            $('#midback').fadeIn('slow');
            $("#loading").fadeOut('slow');
        }
        function loadContent(page) {
            var param = "";
            if (page) { param = page; } else { param='home'; }
            Display_Load();
            $('#midback').fadeOut('slow', function() { 
            $(this).load("<?php echo $reg->get ('rel_addr'); ?>"+param+".php",
            Hide_Load()); return false; 
        }); 
```

子窗口代码：

```
<span id="events" class="more">more events...</span> 
<script type="text/javascript">
            $(document).ready(function() {
                $('.more').click(function() {
                    var params = $(this).attr("id");
                    window.parent.loadContent(params);
                }); return false;
            }); 
```

我还想为`<div>`（关闭它然后重新打开它以纠正新页面的高度）的高度设置动画，但是首先我想解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:21:38.990

尝试将您对孩子的点击更改为：

```
$('.more').click(function(e) {
    e.preventDefault();
    // . . .
    return false;
}); 
```

请参阅[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

问题是当您单击*更多*类时，您可能会在 URL 的末尾附加一个*# 。*这会导致页面跳到顶部。根据文档， preventDefault 将阻止这种情况发生。为了更好地衡量，也可以从*click*函数返回 false。

# jquery - 实时获取活动幻灯片图像的名称并将值附加到链接

> ID：14716130
> 
> 赞同：0
> 
> 时间：2013-02-05T20:17:30.807
> 
> 标签：jquery, dom

我有以下简单的滑块：

```
<div class="slideshow">
    <img src="[the source]/some.jpg" style="display:none" />
    <img src="[the source]/other.jpg" style="display:block" />
</div> 
```

我想要的是实时跟踪幻灯片的变化。如果图像有`display:block`，将获得图像名称，`some`或`other`在本例中。如果图像名称是`some`，将附加一个按钮的属性`href`和`id`一些值，如果图像名称是`other`，将附加一个按钮的（**链接**）`href`和`id`一些其他值的属性。

尝试了下面的东西，但这没有用。这不是实时的。幻灯片以 5 秒的间隔更改，此更改间隔也应应用于链接按钮`href`和`id`值。

```
jQuery(".slideshow img").each(function(i,val){
        if ($('.slideshow img').is(':visible')) {
            var name = $(".slideshow img").attr('src').split('/');
            name = name[name.length-1].split('.')[0];
            if ( name == "oferta" ) {
                $("a.offers").attr("href", "index.php?p=575");
                $("a.offers").attr("id", "of_details");
                console.log(name);
            } else {
                $("a.offers").attr("href", "index.php?p=572");
                $("a.offers").attr("id", "of_valentine ");
            }
        }
    }); 
```

不幸的是，我的滑块没有将类应用于活动幻灯片图像，只是切换显示属性。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:32:35.730

如果您使用过一个不错的 jquery 滑块插件，它可能支持在每次幻灯片更改时运行回调函数。这提供了一个很好的机会来做你想做的事情。例如，使用[Nivo Slider](http://nivo.dev7studios.com/)，您的幻灯片可能会触发如下（未经测试）：

```
$('#slider').nivoSlider({
    afterChange: function() {                   
        var images = $('img', '#slider');  // all slideshow images
        var img = images.filter(function() { // find the currently active image
            return ($(this).css('visibility') == 'hidden') ? false : true;
        });
        // Now determine img name and manipulate accordingly
    }
}); 
```

# backbone.js - 骨干路由点击在第二次尝试时没有响应

> ID：14716132
> 
> 赞同：1
> 
> 时间：2013-02-05T20:17:33.693
> 
> 标签：backbone.js, validation

当用户想要预览由路由调用的发票时，我正在函数中进行表单验证：

```
routes: {
        "new"                   : "newInvoice",
        "new/:assignmentid"     : "newInvoiceAssignment",
        "edit/:invoiceid"       : "editInvoice",
        "preview/:invoiceid"    : "previewInvoice",
        "preview"               : "preview",
        "delete/:invoiceid"     : "deleteInvoiceModal",
        "whyCant"               : "whyCant",
        "whatsThis"             : "whatsThis"
    }, 
```

这是我在表单上的两个按钮（实际上是一个按钮和一个 href）：

```
<div class="span8 alignRight">
    <button id="saveInvoiceDraft" type="submit" class="btn btn-warning">Save Draft</button>
    <a id="previewInvoice" class="btn btn-primary">Preview &amp; Send</a>
</div> 
```

创建此发票时，标签的 URL 设置为：

```
var url = '#preview';
$('#previewInvoice').attr('href',url); 
```

最后，当我单击“预览和发送”按钮时，下面的 previewInvoice(invoiceid) 函数运行，正确捕获缺少的一个表单字段并显示错误消息。那时，即使我填充了表单字段，该按钮也已失效并且不再响应。但是，“保存草稿”按钮可以完美运行，并且与 previewInvoice() 函数中的代码相同。

我知道可能有更好的方法来做到这一点，但我遵循的是在我继承的应用程序的另一部分中完成的方式。实际上，当我键入此内容时，我想知道，因为 sendDraft() 函数有效，它是一个按钮，而 previewInvoice() 函数无效，它是一个 href 的事实可能与它有关。

```
function previewInvoice(invoiceid) {
    var invoice = new Invoice({"invoiceid": invoiceid});
    invoice.set({"invoiceid": invoiceid,"invoicestatus": "draft"});
    formGetter(invoice);
    validateInvoiceForm(invoice);

    if (window.errors.length == 0) {
        //business logic here

        if (window.panel == undefined) {
            // business logic here
        }
        else {
            //save business logic here
        }
    }
    else {
        showInvoiceErrors();
    }
} 
```

任何想法为什么按钮不再响应？我在控制台中没有看到任何错误。我在函数内添加了一个 consol.log 来显示不同表单元素的值，它第一次显示在控制台中，但是如果我更改数据并再次单击按钮，该日志不会更新，这对我来说是另一个线索，它只是没有开火。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:57:41.420

[`Backbone.History`](http://backbonejs.org/#History)侦听`hashchange`事件以触发导航到路线。当您第一次单击该`previewInvoice`按钮时，URL 哈希片段设置为`#preview`，并触发匹配路由。

当您第二次单击同一个按钮时，哈希实际上并没有改变，因此路由器不会捕获它。

我很难为这个问题推荐一个好的解决方案。通常我会建议捕获点击事件并`router.navigate("preview", {trigger:true});`手动调用。但是，根据您的代码示例，您的应用程序似乎是围绕 构建的`Router`，并且没有`View`您在大多数 Backbone 应用程序中所期望的用于 DOM 事件处理的层。

在路由器级别，这有点难以解决。您可以在路由执行`router.navigate`后使用设置一个虚拟哈希。`preview`这也会导致链接`hashchange`在第二次触发。不幸的是，这意味着该`preview`页面将无法添加书签，并且由于您没有使用 pushState，因此会留下无关的历史记录条目。

恐怕这个问题必须通过 hacky 修复（如上所述）或重大重构来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T12:48:13.267

**代替**

var url = '#preview';

$('#previewInvoice').attr('href',url);

**尝试这个**

var date = new Date();

var url = '#preview?date:' + 日期；

$('#previewInvoice').attr('href',url);

因此，每次都会生成新请求，这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T20:52:25.437

我有同样的问题，我的解决方案是放入一个处理程序，该处理程序执行一个从历史中隐藏的假“中间”路由，以便 Backbone.history 将导航注册为更改并触发操作。

将类放在需要路由操作触发的链接上，无论 URL 是否相同：

```
<a href="/someaction" class="js-ensureNav">do it</a> 
```

在您的 Backbone 视图中，放入一个事件处理程序：

```
events: {
    "click .js-ensureNav": "_ensureNav",
}, 
```

实际处理程序：

```
_ensureNav: function (event) {
    var route_name = $(event.target).attr('href').slice(1);
    Backbone.history.navigate("fake");
    Backbone.history.navigate(route_name, {trigger: true, replace: true});
}, 
```

# c# - 通过 C# 将文件发送到我的 PHP 脚本

> ID：14716133
> 
> 赞同：0
> 
> 时间：2013-02-05T20:17:38.533
> 
> 标签：c#, php, file, file-upload

最近我一直在开发我的第一个 C# 应用程序，并且我完成了界面的工作——它非常完美。

现在我被困在我得到一个**打开文件对话框**的部分，然后将该文件发送到位于**本地主机**（wamp）上的我的 PHP 脚本。

这就是我一直在尝试做的事情：

```
 private void menu_upload_file_Click(object sender, EventArgs e)
        {
            DialogResult dialogOpened = openFileDialog1.ShowDialog();
            if (dialogOpened == DialogResult.OK)
            {
                string filename = openFileDialog1.FileName;

                using (var client = new WebClient())
                {
                    client.UploadFile("http://dugi/imgitv3/upload.php?submit=true&action=upload", "POST", filename);
                }
            }
        } 
```

什么都没有发生，文件没有被发送（复制）到我想要的位置。

您可能知道我成功打开了“**打开文件”对话框**，但我不知道我是否正在捕获文件名/目录并将其发送到我的网站以便它可以处理它。

也许网址很复杂？我需要发送那些提交和操作参数，否则脚本将无法加载。

**哦，并且：**在 PHP 中，`$_FILES`数组**必须**命名为`images`( `$_FILES['images']`)，也许这就是问题所在？（在这里问的时候想到了这个）。

那么文件没有发送到我的网站的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:31:51.877

假设`client.UploadFile("http://dugi/imgitv3/upload.php?submit=true&action=upload", "POST", filename);`没有引发异常，请尝试查看响应。

```
var response = client.UploadFile("http://dugi/imgitv3/upload.php?submit=true&action=upload",  "POST", filename);

Console.WriteLine("\nResponse Received.The contents of the file uploaded are:\n{0}",
                System.Text.Encoding.ASCII.GetString(response)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:29:49.927

问题出在我的 PHP 脚本中。我一直在寻找`$_FILES['images']`那里，没有别的。然后经过一些谷歌搜索，我注意到 C# 发送了以`file`( `$_FILES['file']`) 命名的文件数组。

我对我的 PHP 脚本进行了必要的更改，现在一切正常。

# html - CSS子边距不扩展父级

> ID：14716136
> 
> 赞同：1
> 
> 时间：2013-02-05T20:17:43.603
> 
> 标签：html, css

我遇到了一个 CSS 问题。考虑以下布局：

```
<div class="footer-container" style="background: #ff00ff">
 <footer class="wrapper"><h4 style="margin: 20px 0">Some Headline</h4></footer> </div> 
```

h4 的垂直边距不会扩展容器 div，而是“溢出”，因此容器 div 上方和下方都有 20px 的边距，没有任何背景色。我知道相邻元素的垂直边距会塌陷，但这似乎是另一回事。

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:21:27.773

添加`overflow:auto`到您的包含 div 将解决您崩溃的边距问题：

```
<div class="footer-container" style="background: #ff00ff;overflow:auto"> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DGBMR/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T10:39:47.307

有点骇人听闻，但如果您出于某种原因不想要`overflow: auto`，可以`padding: .1px 0`在父级上使用，在所有现代浏览器中都将呈现为 0。

# c++ - 库不兼容？- C++

> ID：14716139
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:17:47.903
> 
> 标签：c++, function, shared-libraries, static-libraries

我正在尝试解决[Project Euler的第 56 个问题，但在使用](http://projecteuler.net/problem=56)[Big Integer Library](https://mattmccutchen.net/bigint/)时遇到了一些麻烦。这是代码：

```
#include <iostream>
#include "BigInteger.hh"
#include <cmath>
using namespace std;

int digitSum(BigInteger x){
int num[(int)floor(log10(x))+2];
int n = 0;
BigInteger sum = 0;

while (x != 0){
    sum += x - floor(x/10) * 10;
    x = floor(x/10);
    n++;
}

return sum.toInt();
}

int main(int argc, const char * argv[])
{

int max = 0;

for (int i = 1; i <= 100; i++){
    for (int j = 1; j <= 100; j++){
        cout << "i = %i, j = %i ",i,j;
        if (digitSum(pow(i,j)) < max)
            max = digitSum(pow(i,j));

    }

    }

cout << digitSum(pow(2,63));

return 0;
} 
```

问题是，当我尝试构建时，编译器在使用 , 和函数的行上给出错误，`log10`说明`floor`它们`pow`已使用但未定义。当我评论这条线`#include "BigInteger.hh"`时，一切都很好，但是这一次，我当然不能使用 Big Integer 库。

为什么会出现这样的问题？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:19:29.577

是编译器问题还是链接器问题？如果是后者，请尝试将 -lm 添加到命令行以链接数学库。假设这里有 GNU gcc。

# vb.net - 强大的 Visual Basic TCP/IP 侦听器问题

> ID：14716150
> 
> 赞同：3
> 
> 时间：2013-02-05T20:18:28.203
> 
> 标签：vb.net, tcp-ip

我正在尝试在 Visual Basic 中创建 TCP/IP 侦听器。侦听器需要能够在任何给定时间处理许多不同的客户端连接。我开发的代码似乎可以使用

```
 socket.BeginAcceptSocket() 
```

方法。从我见过的大多数示例中，我侦听一个新连接，接收它，处理它，停止在该套接字上接受，处理数据，然后关闭连接。我为正确处理数据的接收和处理而生成的线程并得到妥善处理。

但是，由于某种原因，我似乎获得了为我的 BeginAcceptSocket 方法创建的无限数量的线程。这会导致我的计算机变慢并最终锁定，并且我开始丢失来自客户端等的数据。我将在下面发布我的代码，但基本上有什么明显的我做错了吗？我花了一些时间安静地四处搜索并尝试调试它，但我很困惑。

```
Imports System.Net.Sockets, System.Threading, System.IO, System.Net

Imports System.Text
Imports System.Data, System.Data.SqlClient

Module Module1
'The Tcp listener listening on port 2012
Dim listener As New TcpListener(IPAddress.Any, 2012)

'Signal for when to start listening on a new socket for a client
Private clientConnected As New ManualResetEvent(False)

'The threads being used for the processing
Private listenThread, test As Thread

Sub Main()
    listener.Start()
    listenThread = New Thread(AddressOf doListen)

    listenThread.IsBackground = True
    listenThread.Start()

    Do
        Select Case Console.ReadLine().ToLower
            Case "exit"
                Exit Do
        End Select
    Loop
End Sub

Sub message(ByVal msg As String)
    msg.Trim()
    Console.WriteLine(">> " + msg)
End Sub

Sub doListen()
    'Reset the signal
    clientConnected.Reset()
    Do
        'Start listening for new Sockets, upon a new socket create a new thread @ AcceptClients
        listener.BeginAcceptSocket(New AsyncCallback(AddressOf AcceptClients), listener)
        'Wait for the new socket to be handled
        clientConnected.WaitOne()
        'Reset the flag and then repeat
        clientConnected.Reset()
    Loop
End Sub
Sub AcceptClients(ar As IAsyncResult)
    'Get the listener that handles the request
    Dim listen As TcpListener = CType(ar.AsyncState, TcpListener)
    'Create a new socket and end the listening on that socket
    Dim clientSocket As Socket = listen.EndAcceptSocket(ar)

    'Notify the main thread that it is ready to listen for new connections
    clientConnected.Set()

    'Define variables used for lisetning and parsing messages
    Dim byteRec(1024) As Byte
    Dim message As String = Nothing
    Dim N, C As Integer
    Dim lengthFound As Boolean = False
    Dim finished As Boolean = False

    Do
        Try
            Dim intBytes As Int32 = clientSocket.Receive(byteRec, 0, clientSocket.Available,
                        SocketFlags.None)
            message = ASCIIEncoding.ASCII.GetString(byteRec, 0, intBytes)

            If intBytes > 0 Then ThreadPool.QueueUserWorkItem(New WaitCallback(AddressOf printMsg), message)

            'If message.Contains(Chr(1)) And Not lengthFound Then
            '    'Call method to return the total number of messages in the group
            '    N = getNumber(message, message.IndexOf(Chr(1)) + 1)
            '    lengthFound = True
            'End If
            'C = getCountOfMessages(message)
            'If getCountOfMessages(message) = N And lengthFound Then
            '    finished = True
            '    Exit Do
            'End If

            While intBytes > 0 And Not finished
                intBytes = clientSocket.Receive(byteRec, 0, clientSocket.Available, SocketFlags.None)
                message = ASCIIEncoding.ASCII.GetString(byteRec, 0, intBytes)

                'Somehow need to look for the number of STX's and increment the counter by each number
                'C = getCountOfMessages(message)
                'If message.Contains(Chr(1)) And Not lengthFound Then
                '    'Call method to return the total number of messages in the group
                '    N = getNumber(message, message.IndexOf(Chr(1)) + 1)
                '    lengthFound = True
                'End If
                'If getCountOfMessages(message) = N And lengthFound Then
                '    finished = True
                '    Exit Do
                'End If

            End While
        Catch ex As Exception

        End Try

    Loop
    ThreadPool.QueueUserWorkItem(New WaitCallback(AddressOf printMsg), message)
    clientSocket.Close()
    clientSocket.Dispose()

End Sub
'Method to return the total number of messages RECEIVED from a group
Function getCountOfMessages(ByVal message As String)
    Dim C As Integer = 0
    C = message.Split(Chr(2)).Count - 1
    Return C
End Function
'Method to return the total number of messages in a group. Paramters are the total message string and the index of the SOH char
Function getNumber(ByVal message As String, ByVal index As Integer)
    Dim N As Integer = 0
    'Create a loop to start at the SOH and convert all data between SOH and ETX to N as an integer and return it 
    Dim S As Boolean = True
    Dim temp As String = ""
    While S
        Select Case message(index)
            Case Chr(3)
                'End of message is found, exit loop
                S = False
            Case Else
                'Add the data between the SOH and ETX to a string. Once finished convert the data to an int
                '       The reason I think this is neccessary would be in case we decide to have more than 9 messages, aka 2 or more digit numbers. like 10 or 300 etc..
                temp = temp + message(index)
        End Select
        index = index + 1
    End While
    N = Convert.ToInt32(temp)
    Return N
End Function
'This method will be used to reorder, parse and delimt the messages then add them into the SQL database
Sub printMsg(ByVal msg As Object)

    Dim dataStr As String = ""

    Debug.Print(msg & vbCrLf)
End Sub
End Module 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:23:00.300

有多少个客户端可以并行发送数据？客户端发送什么类型的数据？收到客户端发送后，你运行一些进程吗？只要确定。

# ruby-on-rails - 为什么 Rails 想要为 JSON PUT 请求返回“head :no_content”？

> ID：14716151
> 
> 赞同：24
> 
> 时间：2013-02-05T20:18:30.390
> 
> 标签：ruby-on-rails

在我运行
`rails generate scaffold User`
Rails 3.2.11 中用于更新用户的生成控制器函数后，如下所示：

```
def update
  @user = User.find(params[:id])

  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to @user, notice: 'User was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

我很好奇的是返回`head :no_content`一个成功的 JSON 更新请求。我做了一些谷歌搜索，因为我猜测这是某种 RESTful 属性，不返回更新的对象，但我找不到任何声称是这种情况的东西。

为什么这是默认值，而不是在更新后返回用户对象的 JSON 表示？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T12:00:05.773

好问题，显然目的是返回一个空主体的 HTTP 状态代码 200，请参阅[此讨论](https://github.com/rails/rails/issues/1742)。也许是为了简洁或安全目的。`head :no_content`似乎创建了一个带有空正文的 HTTP 响应 200（成功），返回此响应标头：

```
Status Code:200 OK 
```

另请参阅[此相关问题](https://stackoverflow.com/questions/12407328/rails-head-ok-interpreted-as-ajaxerror)。

# php - 使用 Zend 2 依赖注入 (Zend\DI\DI) 注入对象属性或方法

> ID：14716155
> 
> 赞同：0
> 
> 时间：2013-02-05T20:18:42.550
> 
> 标签：php, dependency-injection, zend-framework2

我目前正在使用与 Pimple 类似的类来管理依赖注入。例如，如果我想检索依赖于配置类的数据库连接实例，我会这样做：

```
$DI = new DIContainer;

$DI->Config =
     $DI->share = function($c){
           return new Config;
     };

$DI->Database =
     $DI->share = function($c){

          $cfg = $c->Config;

          $host = $cfg->getDbHost();
          $username = $cfg->getDbUsername();
          $password = $cfg->getDbPassword();
          $name = $cfg->getDbName();

          return new \mysqli($host, $username, $password, $name);
     }; 
```

简单来说：$DI->Config 总是返回相同的配置类实例，$DI->Database 总是返回相同的数据库连接，注入的不是 Config 对象本身，而是对象的几个属性（主机、用户等）。

当然，这意味着必须在运行时设置容器，我正在考虑转移到 Zend Framework 2 的依赖注入容器（它允许传递定义列表）。

但是，我在 Zend\Di\Di 中找不到关于如何注入对象属性而不是对象本身的示例。这可能吗？你知道任何例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:39:35.647

我不熟悉 Pimple，也不完全确定你在问什么，但这里有一些一般信息......

Zend Di 充当[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern)，这意味着它维护对象实例的注册表并始终返回请求的每个对象的相同实例。因此，您应该可以轻松地让 Zend Di 始终返回相同的数据库连接（等），而无需做任何花哨的事情，这是它的默认行为。

对象属性/属性的注入不是您在给出的示例中所做的；`mysqli`相反，该示例看起来像“构造函数注入”：在构造对象时注入参数/参数。Zend Di 很好地支持构造函数注入。

Zend Di 的创建者 Ralph Schindler 拥有一个完整的 Zend Di[示例用例存储库](https://github.com/ralphschindler/Zend_DI-Examples)，您应该能够在其中找到大多数您想做的事情的参考资料。

具体来说，也许您正在寻找的是[Ralph 的示例 here](https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-04.php)，它利用了包含配置参数的构造函数注入。

尽管如此，许多 ZF2 开发人员更喜欢 Zend ServiceManager 而不是 Zend Di。ServiceManager 是 ZF2 的默认设置，它也像 Zend Di 一样充当服务定位器，但它的用法更类似于 Pimple。如果您正在从 Pimple 过渡，您可能会更熟悉 ServiceManager。

# android - DirectionalViewPager ClassNotFoundException

> ID：14716158
> 
> 赞同：0
> 
> 时间：2013-02-05T20:18:58.223
> 
> 标签：android

我正在使用库[android-directionalviewpager-1.2.1fixed.jar中的](https://dl.dropbox.com/u/24363935/android-directionalviewpager-1.2.1fixed.jar)[DirectionalViewPage](https://github.com/JakeWharton/Android-DirectionalViewPager) r和 android.support.v4 (r11)。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >
   <android.support.v4.view.DirectionalViewPager
     android:id="@+id/pager"
     android:layout_width="fill_parent"
     android:layout_height="0dp"
     android:layout_weight="1"  />
</LinearLayout> 
```

当我运行应用程序时出现错误：

E/AndroidRuntime(15335)：致命异常：主要 E/AndroidRuntime(15335)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.w/com.example.w.MainActivity}：android.view.InflateException : 二进制 XML 文件第 6 行：**错误膨胀类 android.support.v4.view.DirectionalViewPager** E/AndroidRuntime(15335)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1654) E/AndroidRuntime(15335)：在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1670) E/AndroidRuntime(15335) : 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) E/AndroidRuntime(15335): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) E/AndroidRuntime(15335): 在 android .os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime(15335): 在 android.os.Looper.loop(Looper.java:130) E/AndroidRuntime(15335): 在 android.app.ActivityThread.main (ActivityThread.java:3695) E/AndroidRuntime(15335): 在 java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime(15335): 在 java.lang.reflect.Method.invoke(Method.java: 507) E/AndroidRuntime(15335)：在 com.android。internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) E/AndroidRuntime(15335): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) E/AndroidRuntime(15335): at dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime(15335):**引起：android.view.InflateException：二进制 XML 文件第 6 行：错误膨胀类 android.support.v4.view.DirectionalViewPager** E/AndroidRuntime(15335): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581) E/AndroidRuntime(15335): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623) E/AndroidRuntime(15335) : 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408) E/AndroidRuntime(15335): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320) E/AndroidRuntime(15335): 在 android.view。 LayoutInflater.inflate(LayoutInflater.java:276) E/AndroidRuntime(15335)：在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207) E/AndroidRuntime(15335)：在 android.app。 Activity.setContentView(Activity.java:1657) E/AndroidRuntime(15335): 在 com.example.w.MainActivity.onCreate(MainActivity.java:12) E/AndroidRuntime(15335): 在 android.app.Instrumentation.callActivityOnCreate(仪器仪表。java:1047) E/AndroidRuntime(15335): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1618) E/AndroidRuntime(15335): ... 11 更多 E/AndroidRuntime(15335):**引起：java.lang.ClassNotFoundException: android.support.v4.view.DirectionalViewPager in loader dalvik.system.PathClassLoader[/data/app/com.example.w-2.apk]** E/AndroidRuntime(15335): at dalvik .system.PathClassLoader.findClass(PathClassLoader.java:240) E/AndroidRuntime(15335): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:551) E/AndroidRuntime(15335): 在 java.lang.ClassLoader.loadClass (ClassLoader.java:511) E/AndroidRuntime(15335): 在 android.view.LayoutInflater.createView(LayoutInflater.java:471) E/AndroidRuntime(15335): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) ) E/AndroidRuntime(15335): ... 20 更多

我做错了什么？我读[了这个](https://stackoverflow.com/questions/10720276/error-including-android-directionalviewpager-jar-in-eclipse)问题，但没有得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T02:14:43.807

我遇到了类似的问题，原因是 DirectionalViewPager 库使用的 android-support-v4.jar 库版本较旧，与当前使用的开发版本不兼容。也许您可以使用以下库进行替换。 [https://github.com/castorflex/VerticalViewPager](https://github.com/castorflex/VerticalViewPager)

此外，您还可以参考下面的链接可能会有所帮助。

[在 Eclipse 中包含 Android-DirectionalViewPager .jar 时出错](https://stackoverflow.com/questions/10720276/error-including-android-directionalviewpager-jar-in-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:26:58.843

这是因为这个类不是支持库的一部分。

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
android:orientation="vertical" >
<com.directionalviewpager.DirectionalViewPager
 android:id="@+id/pager"
 android:layout_width="fill_parent"
 android:layout_height="0dp"
 android:layout_weight="1"  />
</LinearLayout> 
```

您在这里有如何使用它的说明： [https ://github.com/JakeWharton/Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)

# javascript - 当被 Backbone.js 替换时，带有 queryui 复选框按钮的内容会增长

> ID：14716164
> 
> 赞同：0
> 
> 时间：2013-02-05T20:19:28.207
> 
> 标签：javascript, jquery, jquery-ui, backbone.js, backbone-views

我有下一个代码来使用 Backbone.js 替换内容

[jsfiddle](http://jsfiddle.net/vicenrele/Thxtr/1/)

我不知道为什么替换内容时复选框按钮会增长。简单地说，我使用下一个代码来复选框

```
 $('.checkWeek').button(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:58:41.747

目前代码将模板存储在`div`标签中 - 每次调用`button`模板时都会修改。您可以通过使用`script`带有类型的标签来避免这种情况，`text/template`这样它就不会作为 Javascript 执行。

现在：

```
<div data-template-name="central-home">
    <div data-template-name="">
        <input type="checkbox" class="checkWeek" id="checkWeekM" />
        <label for="checkWeekM">L</label>
    </div>
</div> 
```

改成：

```
<script data-template-name="central-home">  
    <div data-template-name="">
         <input type="checkbox" class="checkWeek" id="checkWeekM" /><label for="checkWeekM">L</label>
    </div>      
</script> 
```

在 Javascript 未更改的情况下，将找不到模板。所以你还必须更新这一行：

```
 content.view = ...$.trim($("[data-template-name='"+ template_name +"'] div").html()... 
```

删除了对模板位于 div 内的要求：

```
content.view = ...$.trim($("[data-template-name='"+ template_name +"']").html() ... 
```

[工作小提琴](http://jsfiddle.net/Thxtr/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:05:04.250

我认为原因是因为你在每次点击时都在调用，`$('.checkWeek').button();`所以 JQuery 做了一些有趣的事情并`span`在 a`span`中添加了导致大小增长的 a 。

一个简单的解决方法是`$('.checkWeek').button();`如果按钮已经存在（或显示）不调用

```
// if button already exists then dont add it again.
if(!$('label[for=checkWeekM]').hasClass('ui-button'))
      $('.checkWeek').button(); 
```

看这里：http: [//jsfiddle.net/Thxtr/3/](http://jsfiddle.net/Thxtr/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:02:42.297

我猜`$('.checkWeek').button()`每个元素只需要调用一次`.checkweek`，或者总共只需要调用一次。

如果是这样，那么可能的解决方法是：

1.  有条件地执行`$('.checkWeek').button()`（尽管我不确定测试可能是什么）。
2.  使`$('.checkWeek')`选择器更具选择性，即只选择新添加的元素。
3.  如果存在 destroy 选项，则调用`$('.checkWeek').button('destroy').button()`（或类似的 - 您必须搜索插件的 API 文档）。

如果没有对应用程序（和插件）有更全面的了解，我无法判断哪种可能性最合适。

# css - 选择类中的对象

> ID：14716167
> 
> 赞同：2
> 
> 时间：2013-02-05T20:19:37.267
> 
> 标签：css, css-selectors

所以，这是一个困扰我很久的问题。这些天我一直在深入研究 CSS。我试图远离这个项目的 jQuery，因为它在 Drupal 中，我试图远离自定义代码。

因此，当用户未登录时，我们有一个系统应用于 BODY 的类，称为“未登录”。现在这对我们来说*应该*很好（据我了解 CSS），因为我们只允许管理员“登录”。当我们有人编辑节点时，我们会发生冲突——我们所有的自定义类都在这两种情况下都加载了，并且一些编辑控件因此看起来很时髦。

所以 BODY 样式是这样的：

```
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-1 node-type-page footer-columns" >

    ... [much body content here--other divs, other classes, elements with IDs] ...

    <div class='mycustomclass'>Should be bigger if logged in</div>
</body> 
```

因此，当我尝试添加 CSS 选择器和样式时，如下所示：

```
.not-logged-in .mycustomclass {
    font-size: 20px;
} 
```

它似乎忽略了.mycustomclass。我之前遇到过这个问题，并将其归咎于我可怜的 CSS-fu。并且总是有 jQuery，所以我真的不必在意。如果有人能为我解开这个长久以来的谜团，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:43:38.217

你的语法很好，没有问题。

我想象两个问题之一：

1.  该类实际上并没有被加载，无论是在主体上还是在您的`mycustomclass`元素上。检查*呈现的*源代码（即在浏览器中），而不仅仅是您自己的代码。由于它是 Drupal，它可能正在缓存，因此您的更改不会被加载。**清除 Drupal 缓存**。

2.  特异性。也许元素上有另一个类，或者可能有一个全局规则。无论哪种方式，都可能会覆盖该元素上的 CSS。

要解决这两个问题，请使用 Firebug 和 Firefox 中的 Web Developer Toolbar。两者对于做 CSS 都是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:55:16.617

确保 Drupal 在`<head>`您的 HTML 中添加 css 脚本标签。您应该在样式表引用之后让它们跟随。就是这样，drupal css（将未登录类添加到 的那个`<body>`）必须在您的 css 之前执行。

# c++ - 如何使用指向方法的指针作为参数（当需要指向函数的指针时）？

> ID：14716170
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:19:38.340
> 
> 标签：c++, function, pointers, methods, function-pointers

我有一些第三部分代码：

```
class A(){
    public:
        void assingOnClickFunction(void (*function)(); 
}; 
```

我无法更改该代码中的**任何内容。**我想传递给`A::assingOnClickFunction()`我的 B 类方法，`void B::someFunction()`. 我已经尝试过（都在B 类**里面！）：**

```
a->assingOnClickFunction(this->someFunction); 
```

但我得到了错误：

> 函数调用缺少参数列表；使用 '&B::someFunction' 创建指向成员的指针

所以我把它改成了：

```
a->assingOnClickFunction(&B::someFunction); 
```

但是现在有关于不同类型的错误：`(void(*)()`和`(&B::*)()`

我不能制作`B::someFunction()`静态（它使用了很多非静态`B`的成员和方法）！

那么，**是否可以选择将 my 传递** `B::someFunction()` **给** `A::assingOnClickFunction()`，而不是将其更改为 static 并且不更改`A`课堂上的任何内容（`A`不知道也不知道`B`，`B`包括`A`）**？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:23:30.967

如果您要传递的成员函数不是`static`，则不能这样做。in 方法`A`接受一个函数指针，指向一个不带参数的函数，非静态成员函数有一个隐式`this`指针参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:26:29.553

为了调用对象的（非静态）方法，您需要知道对象和要调用的方法。

assingOnClickFunction() 函数只接受一个指向函数的指针，因此您不能将所需的信息传递给它。

除了一些可怕的 hack，比如实现一个可以访问对象的某个全局实例的函数，并通过它调用该方法，它无法完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T20:26:11.003

指向成员函数的指针**不是**指向函数的指针。如果您有一个函数，其参数类型为指向函数的参数，**则不能**使用指向成员函数的指针调用它。

# tableview - TableView javaFx 股市

> ID：14716171
> 
> 赞同：0
> 
> 时间：2013-02-05T20:19:39.720
> 
> 标签：tableview, javafx, reload

我对 TableView 有一个小问题，我把它比作我的 ObservableList，我可以检索结果并将它们放入我的 tableview 中。然而 ：

*   我每秒都调用我的 ObservableList
*   当我得到新结果时，我删除表视图中的所有项目并添加新项目

那行得通，但是……例如，如果我在表格视图中选择一行，则在刷新表格视图后，预选的列会消失……我觉得这太沉重了。还有其他解决方案吗？

我的代码中每秒加载信息的部分是这个：

```
 getColumns().addAll(symbol, bid, ask, high, low, created_at);

    try {
        setItems(getObservableList());

        Timeline fiveSecondsWonder = new Timeline(new KeyFrame(Duration.seconds(2), new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {

                try {
                    setItems(getObservableList());
                } catch (IOException e) {                       
                    e.printStackTrace();
                }
            }
        }));

        fiveSecondsWonder.setCycleCount(Timeline.INDEFINITE);
        fiveSecondsWonder.play();
    } catch (ParseException | IOException | SAXException | ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:17:56.407

首先清洁物品。

```
getItems().clear(); 
```

并再次插入第二次。

```
setItems(getObservableList()); 
```

# objective-c - UIButton 第二次不工作（objective-C）

> ID：14716172
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:19:41.870
> 
> 标签：objective-c, ipad, uiviewcontroller, uibutton, presentmodalviewcontroller

我的第一个屏幕上有一个用于加载小游戏的按钮，代码如下：

```
- (IBAction)playButtonPressed:(id)sender
 {

[self startGameWithConfig:[RootViewController singleplayerGameConfig]];

        NSLog(@"play again");

 } 
```

在我的游戏页面内部，当我使用此按钮时，我有一个返回第一个屏幕的按钮，我可以返回但我的 playButtonPressed 不再工作，它打印 NSLog 但按钮不再加载游戏

这是我的返回按钮：

```
- (IBAction)return:(id)sender {

RootViewController *b = [[RootViewController alloc] init];
[self presentModalViewController:b animated:YES];

} 
```

你能帮我实现这个吗

提前致谢！

这是我的 startGamingWithConfig

```
- (void) startGameWithConfig:(GameConfig *)config
{
// fade in the loading screen to hide load time
[_loadingView setHidden:NO];
[_loadingView setAlpha:0.0f];
[UIView animateWithDuration:0.2f
                      delay:0.0f
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     [_loadingView setAlpha:0.0f];
                 }
                 completion:^(BOOL finished){
                     CardsViewCtrl* newController = [[CardsViewCtrl alloc] init];
                     newController.gameConfig = config;
                     AppDelegate *delegate = (AppDelegate *)[[UIApplication 
sharedApplication] delegate];
                     [delegate.navController pushFadeInViewController:newController 
animated:YES];

                 }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:42:38.143

It is a bit hard for me to understand where this code is since there are no headings but it looks like when you are attempting to go back to the RootViewController you are creating a new one and pushing that on the stack. You want to make sure that your topViewController is removed, not adding more views.

So for a starter try to replace `return` method:

```
- (IBAction)return:(id)sender {
    RootViewController *b = [[RootViewController alloc] init];
    [self presentModalViewController:b animated:YES];
} 
```

with this:

```
- (IBAction)goBack:(id)sender {
    [self dismissModalViewController];
} 
```

I am not sure how you have your view hierarchy setup, but if you have a working navigationController than try using `[self.navigationController popNavigationController:YES];`

# linq - linq string.join

> ID：14716173
> 
> 赞同：0
> 
> 时间：2013-02-05T20:19:44.137
> 
> 标签：linq

如何使用 linq 获取 ID 以及串联的名称列表？

```
from m in menu
    select new
    {
       id = m.menuHeadingID, 
       items = String.Join(", ", m.menuItemName)
    } 
```

上述查询并未连接单个 menuHeadingID 的所有 menuItemName 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T20:22:08.797

听起来您*实际上*需要分组：

```
var menus = menu.GroupBy(m => m.MenuHeadingID)
                .Select(g => new { 
                    Id = g.Key, 
                    Items = string.Join(", ", g.Select(m => m.MenuItemName))
                 }); 
```

（我已调整属性名称以遵循 .NET 命名约定。）

# git - 存储库中奇怪的 SVN 文件夹

> ID：14716175
> 
> 赞同：0
> 
> 时间：2013-02-05T20:19:46.987
> 
> 标签：git, svn, svn2git

我正在从 SVN 迁移到 git，我正在尝试使用 git svn 包装器 svn2git ( [https://github.com/nirvdrum/svn2git](https://github.com/nirvdrum/svn2git) ) 迁移我现有的 SVN 存储库。我正在使用 svn2git，因为它保持分支完好无损。我的最终目标是将项目放到 github 上。

通过 svn2git 执行克隆时，当它尝试访问文件夹时执行停止：

```
svn/https%3A 
```

这应该是一个分支 - 但是我在存储库中看不到它。我假设在某个阶段我不小心命名了一个以 https 开头的分支：（认为它需要完整的 SVN 路径），但是现在我不确定如何再次删除它，因为它找不到。

有什么方法可以使用 svnadmin 查找和删除它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:35:13.753

在花费了几个小时之后，尝试了各种执行转换的方法（我没有尝试 thekbb 提出的解决方案，因为在找到答案之前我没有看到它），我最终放弃了 git-svn 并使用了转换的 subgit整个存储库第一次，没有任何麻烦。

我不想在这里互相推诿，但我会说我对 subgit 的体验比使用 git-svn 或包装器 svn2git 的体验要好得多。

似乎 git-svn 在 subversion 存储库中遇到异常时会抛出错误，但是 subgit 似乎会自行解决，在这种情况下我更喜欢这样做，因为我正在从 SVN 迁移到 Git，所以任何时候我都可以避免花费修补 SVN 存储库是我很乐意节省的时间。

我在 subgit 安装指南中没有看到的唯一一件事（我可能错过了）是您应该在执行安装时使 svn 服务器脱机，否则您最终会出现“中断”（当有人访问存储库）停止安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:55:39.440

已经很长时间了，我很抱歉没有对此进行测试......但理论上你可以删除违规者

`git branch -D https%3A`

然后重新启动：

`svn2git --rebase`

如果这不起作用，我会尝试使用[svndumpfilter](http://svnbook.red-bean.com/en/1.7/svn.ref.svndumpfilter.html)删除该分支。您必须使用[svnadmin dump](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.dump.html)转储存储库，然后对其进行过滤：

`svndumpfilter exclude branches/https%3A < dumpfile > filtered-dumpfile`

然后，您可以将过滤后的转储文件加载到新的 svn 存储库，然后对其执行 svn2git。

# javascript - R & Javascript 回调

> ID：14716179
> 
> 赞同：4
> 
> 时间：2013-02-05T20:20:08.273
> 
> 标签：javascript, r, web-applications, user-interface, bioinformatics

我正在为我的 R 脚本编写一个 UI，该脚本使用本地（永远不会托管）的 javascript/html 向用户询问生物的一些名称和文件夹的位置。

目前，我只有一个：几个文本框，它们接受输入并传递一个可执行的 R 脚本。最初这个 UI 是作为一个非常用户友好的选项编写的，但慢慢地我意识到可以添加一些漂亮的技巧，例如为用户完成单词的文本框（所以如果用户拼错了生物体的名称， UI 将根据上传的文件更正输入。这将来自生物体文本文件列表，一旦添加文件，R 将立即生成该列表）。

有没有办法让这更有效？例如，从 R 检索绘图（作为 .pngs）并更新我的本地网页并能够在 R 和 UI 之间共享日志文件（请注意，我知道潜在的文件 I/O 错误）..但是对于为了头脑风暴。

我知道 Shiny，但我想要的是一个简单的本地 UI，因为我将处理大数据（我的脚本将处理的平均大约 1 GB 的文件）。

问我问题的另一种方式更重要：

这是集成 PHP 和 R 的示例：[http](http://www.r-bloggers.com/integrating-php-and-r/) ://www.r-bloggers.com/integrating-php-and-r/ 我正在寻找与 javascript/css/html/jquery 等类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:53:39.317

我有一个类似的案例，闪亮对我来说是个好主意。但是，在我做了一些第一步之后，我不再确定这一点。请注意，大多数示例使用闪亮来*显示*结果。当您开始编辑某些字段并使用数据库时，事情可能会变得一团糟；一旦可以通过程序和用户更改字段，反应性就会受到阻碍。

作为示例，请参见[https://gist.github.com/dmenne/4721235/edit](https://gist.github.com/dmenne/4721235/edit)。目前闪亮状态的主要问题是您必须使用动态 UI 进行此类工作，这会破坏 ui 和服务器的任何分离，因为您必须在服务器中创建 ui 元素。

闪亮是一个好主意，但对于任何更大的交互来说，现在还为时过早。知道背后有令人惊叹的 RStudio 团队，我相信现在应该有压力*了*。

还有什么可以为 R 制作用户界面？TclTk 让我不寒而栗。我经常在 c# 中工作，几年前我一直在使用 R(D)COM 进行接口，但在安装和许可问题后放弃了。现在有 R.DOTNet 效果更好；它是最简单的安装方式，但它不是一个非常活跃的项目，并且容易崩溃。通过 RServe/RServeCLI 的接口是稳定的，但在 Windows 上安装太困难，例如在具有严格安全问题的医院计算机上。

还有Qt。有了活跃的 RInside 社区，这将是一个不错的选择，而且界面很棒。但是，我希望我的编程技能达到 RStudio 的水平。甚至 Dirk 也是概念验证级别之一（[在 windows 中使用 rinside 和 qt](https://stackoverflow.com/questions/12280707/using-rinside-with-qt-in-windows)）这一事实并不令人鼓舞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:10:02.470

您绝对可以为此使用 nodejs (nodejs.org)。看看[https://github.com/elijah/r-node](https://github.com/elijah/r-node)和[r-node](https://groups.google.com/forum/?fromgroups=#!topic/protovis/E2M-OuEimZM%5b1-25-false%5d)。令人困惑的是，这是两个同名的不同项目。关于后者的更多信息：squirelove.net/r-node/doku.php

近年来，JavaScript 已成为最快的编程语言之一。在我知道的一种情况下，JavaScript 比 C++ 更快。参见：benchmarksgame.alioth.debian.org/u32/performance.php?test=regexdna

但请记住，在 JavaScript 中内存很难管理，因此如果您计划创建长时间运行的进程，您应该在代码上运行某种内存泄漏检测程序。EI：memwatch (npmjs.org/package/memwatch) 或 nodeheap (npmjs.org/package/memwatch)

祝你的努力好运！

PS。抱歉没有真正的链接。我显然不允许发布超过 2 个链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:49:25.137

Why wouldn't you be able to use Shiny locally? You design your app on your computer and run it locally with runApp('myapp') from an R-prompt. Unless you are experienced with javascript I would give shiny another look: [http://www.rstudio.com/shiny/](http://www.rstudio.com/shiny/)

The example you linked to can be very easily implemented using Shiny. See link below for a tutorial on how to write the app:

[http://rstudio.github.com/shiny/tutorial/#hello-shiny](http://rstudio.github.com/shiny/tutorial/#hello-shiny)

To run that example locally:

install.packages('shiny')

shiny::runExample('01_hello')

# highcharts - 根据 HighCharts 中的值更改样条线的颜色

> ID：14716183
> 
> 赞同：5
> 
> 时间：2013-02-05T20:20:27.477
> 
> 标签：highcharts

我可以根据它是高于（红色）还是低于（绿色）或介于（黄色）之间来更改标记颜色，但不能更改标记之间线条的颜色。这可能吗？现在，它只显示为一条蓝线。

```
function makeRun(divId, last, current, goal, title, yAxisTitle) {
    var width = 1000; var SizeOfFont = '14px';
    var min = checkMinMaxArray(current, last, goal, 'min') * 995 / 1000; //sets min closely below the real min. **consider changing to 4/5 digits**
    var max = checkMinMaxArray(current, last, goal, 'max') * 1005 / 1000; //sets max closely above the real max

    //if there are projections, color code the columns here
    preprocessData = function (data, last, goal) {
        var nData = [];
        var colorGood = 'green'; var colorBad = '#E42217'; var colorUse;
        for (var i = 0; i < data.length; i++) {
            if (data[i] <= goal[i]) { colorUse = colorGood; }
            else if (data[i] > last[i]) { colorUse = colorBad; }
            else { colorUse = '#FFE303'; }
            nData.push({
                y: data[i],
                x: i,
                fillColor: colorUse,
                color: colorUse
            });
        }
        return nData;
    };

    var chart = new Highcharts.Chart({
        chart: {
            renderTo: divId,
            height: 275, //little bigger than alotted height to make more readable
            width: width //dependent on #gauges
        },
        title: {
            text: title, //should all be the same, can make a parameter if need to be different
            style: { //size of text above
                fontSize: SizeOfFont
            }
        },
        xAxis: {
            //categories: xAxisTitles,
            labels: { //size of the Text above^^
                style: {
                    fontSize: SizeOfFont
                }
            }
        },
        yAxis: {
            min: min,
            max: max,
            title: {
                text: yAxisTitle, //parameter since some are days, percents, etc
                style: {//size of y axis title
                    fontSize: SizeOfFont
                }
            },
            labels: {
                style: {//size of the y axis tick labels
                    fontSize: SizeOfFont
                }
            }
        },
        credits: {//gets rid of the highcharts logo in bottom right
            enabled: false
        },
        legend: {//the legend at the bottom
            style: {
                fontSize: '12px'
            }
        },
        series: [{
            type: 'spline',
            name: '2012',
            data: last,
            color: 'orange',
            marker: {
                symbol: 'diamond'
            }
        }, {
            type: 'spline',
            name: '2013',
            data: preprocessData(current, last, goal),
            marker: {
                symbol: 'diamond'
            }
        }, {
            type: 'spline',
            name: 'Goal',
            data: goal,
            color: 'blue',
            marker: {
                symbol: 'diamond'
            }
        }]
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:35:25.180

一个系列是不可能的，你应该准备两个不同颜色的单独系列。

# multithreading - 单文件阅读器/多消费者模型：多线程程序的好主意？

> ID：14716184
> 
> 赞同：1
> 
> 时间：2013-02-05T20:20:25.003
> 
> 标签：multithreading, io, consumer, producer

我有一个很容易并行化的简单任务。基本上，相同的操作必须在一个（大的，几个 Gb）输入文件的每一行上重复执行。虽然我已经制作了一个多线程版本，但我注意到我的 I/O 是瓶颈。我决定构建一个实用程序类，其中包含一个“文件读取器”线程，该线程简单地直接向前读取并尽可能快地读取到循环缓冲区中。然后，多个消费者可以调用这个类并获得他们的“下一行”。给定 n 个线程，每个线程 i 的起始行是文件中的第 i 行，并且通过添加 n 找到该线程的每个后续行。事实证明，这不需要锁，几个关键的原子操作足以保留不变量。

我已经测试了代码，它似乎更快，但再想一想，我不知道为什么。将大文件分成 n 个输入文件不是一样快吗（您可以提前“搜索”到同一个文件中以实现相同的目的，最少的预处理），然后让每个进程简单地调用 iostream::readLine on它自己的块？（因为 iostream 也会读入它自己的缓冲区）。在多个线程之间共享单个缓冲区似乎没有任何固有的优势，因为工作人员实际上并不是在同一行数据上操作。另外，我认为没有什么好的方法可以并行化，这样它们就可以在同一条线上工作。我只想了解我所看到的性能提升，并知道它是“flukey”还是跨平台可扩展/可重现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:18:33.717

在您的情况下，您的程序至少要竞争两种资源，即 CPU 和硬盘。在单线程方法中，您请求数据，然后使用空闲 CPU 等待 HD 传送数据。然后，您在 HD 空闲时处理数据。这很糟糕，因为这两种资源中的一种总是空闲的。如果您有多个 CPU 或多个 HD，这会有所改变。此外，在某些情况下，内存带宽（即 RAM 连接）也是一种限制资源。

现在，您的解决方案是正确的，您使用一个线程来保持 HD 忙碌。如果此线程阻塞等待 HD，则操作系统只是切换到处理某些数据的不同线程。如果它没有任何数据，它会等待一些。这样，CPU 和 HD 将至少在某些时候并行工作，从而提高整体吞吐量。请注意，您不能通过两个以上的线程来增加吞吐量，除非您还有多个 CPU，并且 CPU 是限制因素而不是 HD。如果你也写回一些数据，你可以通过第三个线程写入第二个硬盘来提高性能。否则，您不会从更多线程中获得任何优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:25:08.070

当您受到 I/O 限制时，您可以通过使用两个线程来获得良好的加速，一个读取文件，第二个进行处理。这样，读数将永远不会等待处理（期待最后一行），您将进行 100% 的读数。

缓冲区应该足够大，以便一次性为消费者线程提供足够的工作，这通常意味着它应该由多行组成（我建议至少 4000 个字符，但可能更多）。这将防止线程上下文切换成本过高。

单线程：

*   阅读 1
*   过程1
*   阅读 2
*   过程2
*   阅读 3
*   过程 3

双螺纹：

*   阅读 1
*   进程 1/读取 2
*   进程 2/读取 3
*   过程 3

在某些平台上，使用重叠 I/O 也可以在没有线程的情况下获得相同的加速，但使用线程通常会更清晰。

只要您确实受 I/O 限制，使用多个消费者线程将不会带来任何好处。

# c# - 是否需要使用 lockbits 进行修复？

> ID：14716194
> 
> 赞同：4
> 
> 时间：2013-02-05T20:20:47.253
> 
> 标签：c#, fixed, unsafe, lockbits

我有一些代码出现错误“AccessViolationException 未被用户代码处理：尝试读取或写入受保护的内存......”

违规函数的精简版本如下：

```
protected override void OnPaint(PaintEventArgs pe)
{
    if ((updatingFastBackground) || (Calculating)) return; //ADDED FOR DEBUGGING, SEE BELOW
            BitmapData canvasData = Canvas.LockBits(new Rectangle(Point.Empty, Canvas.Size), ImageLockMode.WriteOnly, FastPixelFormat);
            BitmapData fbgData = fastBackground.LockBits(new Rectangle(Point.Empty, fastBackground.Size), ImageLockMode.ReadOnly, FastPixelFormat);
            try
            {
                unsafe
                {
                    byte* canvasDataScan0 = (byte*)canvasData.Scan0.ToPointer();
                    byte* fbgDataScan0 = (byte*)fbgData.Scan0.ToPointer();
                    Rectangle spriteBounds = new Rectangle(Point.Empty, ButtonImages.ImageSize);
                    for (int i = 0; i < ButtonImages.Images.Count; i++)
                    {
                        // Button offset location
                        Point l = new Point(
                            (int)((i % columnCount) * hStep + myIVM.Location.X),
                            (int)((i / columnCount) * vStep + myIVM.Location.Y));
                        // Paint at current location?
                        if (buttonPaintBounds.Contains(l))
                        {
                            BitmapData spriteData = buttonBitmaps[i].LockBits(spriteBounds, ImageLockMode.ReadOnly, FastPixelFormat);
                            try
                            {
                                int spriteLeft = Math.Max(l.X, 0);
                                int spriteRight = Math.Min(l.X + ButtonImages.ImageSize.Width, canvasData.Width);
                                int spriteTop = Math.Max(l.Y, 0);
                                int spriteBottom = Math.Min(l.Y + ButtonImages.ImageSize.Height, canvasData.Height);
                                int spriteWidth = spriteRight - spriteLeft;
                                int spriteHeight = spriteBottom - spriteTop;
                                byte* canvasRowLeft = canvasDataScan0 + (spriteTop * canvasData.Stride) + spriteLeft * 4;
                                byte* spriteRowLeft =
                                    (byte*)spriteData.Scan0.ToPointer() +
                                    Math.Max((spriteTop - l.Y), 0) * spriteData.Stride +
                                    Math.Max((spriteLeft - l.X), 0) * 4;
                                for (int y = 0; y < spriteHeight; y++)
                                {
                                    canvasRowLeft += canvasData.Stride;
                                    spriteRowLeft += spriteData.Stride;
                                    Byte* canvasWalk = (Byte*)canvasRowLeft;
                                    Byte* spriteWalk = (Byte*)spriteRowLeft;
                                    for (int x = 0; x < spriteWidth; x++)
                                    {
                                        if (spriteWalk[3] != 255)
                                        {
                                            canvasWalk[0] = (byte)(canvasWalk[0] * spriteWalk[3] / 255 + spriteWalk[0]);
                                            canvasWalk[1] = (byte)(canvasWalk[1] * spriteWalk[3] / 255 + spriteWalk[1]);
                                            canvasWalk[2] = (byte)(canvasWalk[2] * spriteWalk[3] / 255 + spriteWalk[2]);
                                        }
                                        canvasWalk += 4;
                                        spriteWalk += 4;
                                    }
                                }
                                thesePoints.Add(l);
                            }
                            finally
                            {
                                buttonBitmaps[i].UnlockBits(spriteData);
                            }
                        } 
```

错误发生在该行：

```
canvasWalk[0] = (byte)(canvasWalk[0] * spriteWalk[3] / 255 + spriteWalk[0]); 
```

甚至替换为：

```
canvasWalk[0] = 0; 
```

迭代变量在每次崩溃时都有不同的值，所以这让我相信外部函数正在修改`y`位图。`x``Canvas`

如果这实际上是我的问题，有没有办法防止`fastBackground`和`Canvas`被外部修改？我以为`LockBits`应该这样做...

如果这还不足以回答，这里有一些我已经尝试过：我添加了这一行

```
if ((updatingFastBackground) || (Calculating)) return; 
```

`fastBackground` `Canvas`如果或尺寸正在被其他函数修改，则退出 OnPaint 。

我*可以*使用互斥锁来防止修改位图的函数`fastBackground`与`Canvas`绘图同时运行（我认为它们必须如此）但我宁愿以另一种方式阻止它们，因为 Canvas 是公共的，我不想要要求将互斥锁从类中传递出去。

根据@usr 的建议，这个进一步精简的版本不会失败……一定是 PTD 错误。（程序员太笨了）即算术错误

```
protected override void OnPaint(PaintEventArgs pe)
{
    if ((updatingFastBackground) || (Calculating)) return; //ADDED FOR DEBUGGING, SEE BELOW
            BitmapData canvasData = Canvas.LockBits(new Rectangle(Point.Empty, Canvas.Size), ImageLockMode.WriteOnly, FastPixelFormat);
            BitmapData fbgData = fastBackground.LockBits(new Rectangle(Point.Empty, fastBackground.Size), ImageLockMode.ReadOnly, FastPixelFormat);
            try
            {
                unsafe
                {
                    byte* canvasDataScan0 = (byte*)canvasData.Scan0.ToPointer();
                    byte* fbgDataScan0 = (byte*)fbgData.Scan0.ToPointer();
                    Rectangle spriteBounds = new Rectangle(Point.Empty, ButtonImages.ImageSize);
                    for (int i = 0; i < ButtonImages.Images.Count; i++)
                    {
                        // Button offset location
                        Point l = new Point(
                            (int)((i % columnCount) * hStep + myIVM.Location.X),
                            (int)((i / columnCount) * vStep + myIVM.Location.Y));
                        // Paint at current location?
                        if (buttonPaintBounds.Contains(l))
                        {
                            BitmapData spriteData = buttonBitmaps[i].LockBits(spriteBounds, ImageLockMode.ReadOnly, FastPixelFormat);
                            try
                            {
                                byte* canvasRowLeft = canvasDataScan0;
                                byte* spriteRowLeft = (byte*)spriteData.Scan0.ToPointer();
                                for (int y = 0; y < 145; y++)
                                {
                                    canvasRowLeft += canvasData.Stride;
                                    spriteRowLeft += spriteData.Stride;
                                    Byte* canvasWalk = (Byte*)canvasRowLeft;
                                    Byte* spriteWalk = (Byte*)spriteRowLeft;
                                    for (int x = 0; x < 145; x++)
                                    {
                                        if (spriteWalk[3] != 255)
                                        {
                                            canvasWalk[0] = 0;
                                            canvasWalk[1] = 0;
                                            canvasWalk[2] = 0;
                                        }
                                        canvasWalk += 4;
                                        spriteWalk += 4;
                                    }
                                }
                                thesePoints.Add(l);
                            }
                            finally
                            {
                                buttonBitmaps[i].UnlockBits(spriteData);
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:11:27.767

将我的评论移到答案中，因为它有助于解决问题：

LockBits 返回的缓冲区不需要 Fixed，因为它是非托管内存。你的指针算法是错误的。找到错误。创建一个简单的重现来帮助找到错误。

# database - 寻找不在内存中且具有“列表、设置”数据类型的键值数据库

> ID：14716197
> 
> 赞同：2
> 
> 时间：2013-02-05T20:20:56.423
> 
> 标签：database, nosql, redis, key-value, key-value-store

我正在使用 redis 存储高度请求的信息，但我想将请求较少的内容存储在磁盘上的列表/集中。我一直在环顾四周，没有运气。Memcached、Riak 等似乎没有列表/设置数据类型。是否有具有这些功能的数据库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:36:27.883

运行另一个 Redis 实例并使用 AOF 对其进行配置。仅附加文件。

你可以在这里读更多关于它的内容：

[http://redis.io/topics/persistence](http://redis.io/topics/persistence)

向下滚动一半，上面有很多很好的信息。

> **仅附加文件** 快照不是很持久。如果你的运行 Redis 的计算机停止，你的电源线出现故障，或者你不小心杀死了 -9 实例，那么最新写入 Redis 的数据将会丢失。虽然这对某些应用程序来说可能没什么大不了的，但也有完全持久性的用例，在这些情况下，Redis 不是一个可行的选择。仅附加文件是 Redis 的另一种完全持久的策略。它在 1.1 版中可用。您可以在配置文件中打开 AOF： appendonly yes 从现在开始，每次 Redis 收到更改数据集的命令（例如 SET）时，都会将其附加到 AOF。当您重新启动 Redis 时，它将重新播放 AOF 以重建状态。

# windows-runtime - DirectX 11.1 矩阵乘法问题

> ID：14716198
> 
> 赞同：1
> 
> 时间：2013-02-05T20:20:57.520
> 
> 标签：windows-runtime, matrix-multiplication, directx-11, c++-cx

我为我所有的 3d 对象编写了一个通用矩阵类，但翻译似乎真的很糟糕。

这是我的课：

```
class GenericMatrix
{
public:
    GenericMatrix();

    virtual void Identity();

    virtual void Scale( float x, float y, float z );
    virtual void Scale( const DirectX::XMFLOAT3& s );
    virtual DirectX::XMFLOAT3 Scaling( void );

    virtual void Translate( float x, float y, float z );
    virtual void Translate( const DirectX::XMFLOAT3& t );
    virtual DirectX::XMFLOAT3 Translations( void );

    virtual void Rotate( float x, float y, float z );
    virtual void Rotate( const DirectX::XMFLOAT3& r );
    virtual DirectX::XMVECTOR Rotations( void );
    virtual DirectX::XMFLOAT3 RotationsPYR( void );

    virtual DirectX::XMMATRIX Matrix( bool process = true );

    virtual operator DirectX::XMMATRIX()
    {
        return this->Matrix();
    }

    virtual void UpdateMatrix( void );

    DirectX::XMMATRIX   matrix;
    DirectX::XMFLOAT3   scale;
    DirectX::XMFLOAT3   translation;
    DirectX::XMVECTOR   rotation;
    bool                matrixNeedsUpdate;

protected:
    float               yaw, pitch, roll;
}; 
```

来源：

```
#include "pch.h"
#include "GenericMatrix.h"

GenericMatrix::GenericMatrix()
    : matrixNeedsUpdate( true )
{
    this->Identity();
    this->pitch = 90.0f;
    this->yaw = 0.0f;
    this->roll = 0.0f;
}

void GenericMatrix::Identity()
{
    this->scale = DirectX::XMFLOAT3( 1.0f, 1.0f, 1.0f );
    this->translation = DirectX::XMFLOAT3( 0.0f, 0.0f, 0.0f );
    this->rotation = DirectX::XMQuaternionIdentity();
    this->pitch = 90.0f;
    this->yaw = 0.0f;
    this->roll = 0.0f;
    matrixNeedsUpdate = true;
}

void GenericMatrix::Scale( float x, float y, float z )
{
    this->scale.x += x;
    this->scale.y += y;
    this->scale.z += z;
    this->matrixNeedsUpdate = true;
}

void GenericMatrix::Scale( const DirectX::XMFLOAT3& s )
{ Scale( s.x, s.y, s.z ); }

DirectX::XMFLOAT3 GenericMatrix::Scaling( void )
{ return this->scale; }

void GenericMatrix::Translate( float x, float y, float z )
{
    this->translation.x += x;
    this->translation.y += y;
    this->translation.z += z;
    this->matrixNeedsUpdate = true;
}

void GenericMatrix::Translate( const DirectX::XMFLOAT3& t )
{ Translate( t.x, t.y, t.z ); }

DirectX::XMFLOAT3 GenericMatrix::Translations( void )
{ return this->translation; }

void GenericMatrix::Rotate( float x, float y, float z )
{
    pitch = x;
    yaw = y;
    roll = z;
    this->rotation = DirectX::XMQuaternionRotationRollPitchYaw( pitch, yaw, roll );
    this->matrixNeedsUpdate = true;
}

void GenericMatrix::Rotate( const DirectX::XMFLOAT3& r )
{ Rotate( r.x, r.y, r.z ); }

DirectX::XMVECTOR GenericMatrix::Rotations( void )
{ return this->rotation; }

DirectX::XMFLOAT3 GenericMatrix::RotationsPYR( void )
{
    return DirectX::XMFLOAT3( pitch, yaw, roll );
}

DirectX::XMMATRIX GenericMatrix::Matrix( bool process )
{
    if ( process && this->matrixNeedsUpdate )
    {
        UpdateMatrix();
        this->matrixNeedsUpdate = false;
    }
    return this->matrix;
}

void GenericMatrix::UpdateMatrix( void )
{
    DirectX::XMVECTOR scaleVec, translateVec;
    scaleVec = DirectX::XMLoadFloat3( &this->scale );
    translateVec = DirectX::XMLoadFloat3( &this->translation );
    this->matrix = DirectX::XMMatrixScalingFromVector( scaleVec ) * DirectX::XMMatrixRotationQuaternion( this->rotation ) * DirectX::XMMatrixTranslationFromVector( translateVec );
} 
```

当我将其用作模型矩阵时，在执行 Identity()，然后执行 Translate(0.0f, 0.0f, 5.0f) 之后，我的模型仅在我将相机定位在 [0,0,5] 时才可见，即使如此，只是一闪而过。我完成的最后一点 3d 编程是使用 OpenGL 1.x，所以我很有可能对矩阵做了一些奇怪的事情，但还没有找到任何可以告诉我如何做到这一点的东西。如果有人需要更多信息，请询问。

**更新：**更多细节 - 如果我将矩阵设置为 Identity() 并保留它，我可以移动相机并从任何位置毫无问题地查看模型，同时如果我将它移动到任何地方，它会破坏可见性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:42:15.067

经过几次测试，我发现了这个问题。看来我的相机使用的是左手坐标系，但我的视角是右手坐标系。在 z 0.9 到 -0.9 之间，左手和右手系统都能够同意模型应该是可见的，但是当我将它们移出那个空间时，除非我的相机正好在相同的坐标。

故事的寓意 - 请记住在整个代码中始终使用相同的坐标系。

# c# - 网络到 Excel 我一直在开发一个网页，允许用户根据几个过滤器/标准在数据库中搜索项目。其中一项要求是能够将此数据导出到电子表格 (excel) 中。到目前为止，我已经使用 CSV 文件创建了一个非常简单的方法。 //get model... StringWriter sw = new StringWriter(); //First line for column names sw.WriteLine("col1,col2,col3") 问问题 问问题 2013-02-05T20:21:40.437 91 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我一直在开发一个网页，允许用户根据几个过滤器/标准在数据库中搜索项目。其中一项要求是能够将此数据导出到电子表格 (excel) 中。到目前为止，我已经使用 CSV 文件创建了一个非常简单的方法。 //get model... StringWriter sw = new StringWriter(); //First line for column names sw.WriteLine("col1,col2,col3"); foreach (DataType i in model) { sw.WriteLine(string.Format({0},{1},{2}, i.data1, i.data2, i.data3)); } Response.AddHeader("Content-Disposition", "attachment; filename=test.csv"); Response.ContentType = "text/csv"; Response.ContentEncoding = System.Text.Encoding.GetEncoding("utf-8"); Response.Write(sw); Response.End(); 很简单，但我希望更好地控制电子表格的格式。经过一番搜索，我找到了这些文档：Wikipedia & MSDN，它们描述了一种被 excel 接受的 XML。我想了解有关此文档类型的更多信息，但似乎缺少文档。wiki 链接中没有关于格式的详细信息，MSDN 文章中也没有示例。我无法交叉引用这两者，因为它们似乎使用不同的版本（ss: workbookvs workbook）。哎呀，我什至不知道ss:,x:和c:前缀代表什么。此外，MSDN 文章适用于 Office 2003，我似乎找不到更新的版本。 也许我一起查找错误的东西；有没有更现代的方式来实现我的目标？来源表示赞赏。 如何根据使用 awk 或 perl 的键交换多个列的值？ 有没有一种简单的方法可以像这样交换表格文件中的列？ 键将是第一列和第三列，但第二列应附加到第一列，第四列应附加到第三列。列之间的交换取决于第一个键（第 1 列）与第二个键（第 3 列）的存在。 A B C D E F A B H I A G J K L M N J Q K 所需的输出将是这样的： A B C D A B E F A G H I J K L M N J Q K c#xmlexcel 4 1 回答 1 This answer is useful 0 杰夫， 我不确定这是您要查找的内容，但 EPPlus 可以为您生成 xlsx 工作表。我想为您提供一个示例，而不是仅仅说“这里使用这个”。 这是从此处获取的示例：EPPlus Source Listing ExcelPackage pkg = new ExcelPackage(); var ws = pck.Workbook.Worksheets.Add("Sheet1"); //First line for column names ws.Cells["A1"] = "col1"; ws.Cells["A2"] = "col2"; ws.Cells["A3"] = "col3"; int row = 2; foreach (DataType i in model) { //I don't know you data model, I'm guessing //row, col ws.Cells[row, 1] = i.data1); ws.Cells[row, 2] = i.data2); ws.Cells[row, 3] = i.data3); row++; } pck.SaveAs(Response.OutputStream); Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; Response.AddHeader("content-disposition", "attachment; filename=YouNameGoesHere.xlsx"); 希望这符合您的需要。 于 2013-02-05T20:55:54.613 回答 Related 1 android - android - listview - blocksDescendants，避免高亮子元素 1 selenium - Selenium 复制鼠标移动和点击 1 php - 从 db 获取数据会删除换行符 2 r - 来自相关函数的 NA 1 javascript - 将外部和内部 javascript 文件组合成尽可能少的资源？ 3 css - CSS如何定位我当前元素旁边的元素？ 1 c# - 在指定的自动生成的 Telerik RadGridView 单元格中应用 DataFormatString (Silverlight) 1 ios - 如何在应用程序启动时播放音频文件 1 sql - 需要透视/交叉表查询帮助 1 android - 连接安卓设备进行调试 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14716205
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, xml, excel

我一直在开发一个网页，允许用户根据几个过滤器/标准在数据库中搜索项目。其中一项要求是能够将此数据导出到电子表格 (excel) 中。到目前为止，我已经使用 CSV 文件创建了一个非常简单的方法。

```
//get model...
StringWriter sw = new StringWriter();

//First line for column names
sw.WriteLine("col1,col2,col3");

foreach (DataType i in model)
{
    sw.WriteLine(string.Format({0},{1},{2},
                                i.data1,
                                i.data2,
                                i.data3));
}

Response.AddHeader("Content-Disposition", "attachment; filename=test.csv");
Response.ContentType = "text/csv";
Response.ContentEncoding = System.Text.Encoding.GetEncoding("utf-8");
Response.Write(sw);
Response.End(); 
```

很简单，但我希望更好地控制电子表格的格式。经过一番搜索，我找到了这些文档：[Wikipedia](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats) & [MSDN](http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx)，它们描述了一种被 excel 接受的 XML。我想了解有关此文档类型的更多信息，但似乎缺少文档。wiki 链接中没有关于格式的详细信息，MSDN 文章中也没有示例。我无法交叉引用这两者，因为它们似乎使用不同的版本（`ss: workbook`vs `workbook`）。哎呀，我什至不知道`ss:`,`x:`和`c:`前缀代表什么。此外，MSDN 文章适用于 Office 2003，我似乎找不到更新的版本。

也许我一起查找错误的东西；有没有更现代的方式来实现我的目标？来源表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:55:54.613

杰夫，

我不确定这是您要查找的内容，但 EPPlus 可以为您生成 xlsx 工作表。我想为您提供一个示例，而不是仅仅说“这里使用这个”。

这是从此处获取的示例：[EPPlus Source Listing](http://epplus.codeplex.com/SourceControl/changeset/view/6852709011e3#EPPlusWebSample/GetSample.aspx.cs)

```
ExcelPackage pkg = new ExcelPackage();

var ws = pck.Workbook.Worksheets.Add("Sheet1");

//First line for column names
ws.Cells["A1"] = "col1";
ws.Cells["A2"] = "col2";
ws.Cells["A3"] = "col3";

int row = 2;

foreach (DataType i in model)
{
    //I don't know you data model, I'm guessing

    //row, col
    ws.Cells[row, 1] = i.data1);
    ws.Cells[row, 2] = i.data2);
    ws.Cells[row, 3] = i.data3);

    row++;
}

pck.SaveAs(Response.OutputStream);
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;  filename=YouNameGoesHere.xlsx"); 
```

希望这符合您的需要。

# perl - 如何根据使用 awk 或 perl 的键交换多个列的值？

> ID：14716206
> 
> 赞同：1
> 
> 时间：2013-02-05T20:21:39.847
> 
> 标签：perl, awk, key

有没有一种简单的方法可以像这样交换表格文件中的列？

键将是第一列和第三列，但第二列应附加到第一列，第四列应附加到第三列。列之间的交换取决于第一个键（第 1 列）与第二个键（第 3 列）的存在。

```
A B C D    
E F A B
H I A G
J K L M 
N J Q K 
```

所需的输出将是这样的：

```
A B C D    
A B E F
A G H I 
J K L M 
N J Q K 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:26:46.163

这是一个使用 Perl 的更简单的解决方案。如果同一行上的两个奇数列具有相同的内容，这将失败，例如

```
C D C A # Would print out "C A" only 
```

否则，我们可以使用提供轻松操作键值对的哈希数据结构。

```
perl -ple'%h=split;$_=join" ",map{$_=>$h{$_}}sort keys %h' 
```

示例用法：

```
$ perl -ple'%h=split;$_=join" ",map{$_=>$h{$_}}sort keys %h' <<'END'
A B C D    
E F A B
H I A G
J K L M 
N J Q K
END 
```

输出：

```
A B C D
A B E F
A G H I
J K L M
N J Q K 
```

**没有那个弱点**，我会这样写

```
perl -pale'@f=();push@f,[splice@F,0,2]while@F;$_=join" ",map@$_,sort{$a->[0]cmp$b->[0]}@f' 
```

它本质上是进行 Schwartzian 变换。

## 解释

### 第一种解决方案：

该选项`-l`为我们处理行尾。`-p`循环遍历所有输入行（将它们放入）并在每次迭代后`$_`打印出 的内容。`$_`

哈希构造为交替键和值的列表。没有选项的`split`函数会拆分`$_`on 空白的内容，并返回我们分配给 hash 的列表`%h`。重复键被删除；仅设置最后一次出现。

我们`sort`按`keys`字母顺序。`map`获取每个键并将键列表转换为交替键和值的列表，但这次的顺序正确。

我们`join`通过一个空格将这个字符串列表分配给`$_`，因为`-p`.

### 第二种解决方案：

`-a`选项自动进入数组`split`。我们取with的前两个元素，将它们放入一个匿名的 arrayref，并将这个 arrayref 推入array。我们重复直到没有元素剩下。这将 的内容配对，并且不受重复项的困扰。`$_``@F``@F``splice``@f``@F`

我们按字母顺序`sort`将数组引用`@f`按其第一个元素放入，并用`map`. 之后，我们像以前一样加入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:45:18.110

这对你有用：我可以把它做成“单行”，但我认为我以这种方式粘贴更容易阅读。

```
awk 'NR==1{a[$1];print;next;}!($1 in a){
r="";h=$1;
for(i=2;i<=NF;i++)
    if($i in a){
        for(m=i;m<=NF;m++)
            r=(r?r" ":"")$m
            break;
        }else{
        h=h" "$i
    }
    $0=(r?r" ":"")h;
}1' file 
```

用你的数据测试：

```
kent$ echo "A B C D    
E F A B
H I A G
J K L M 
N J Q K"|awk 'NR==1{a[$1];print;next;}!($1 in a){
r="";h=$1;
for(i=2;i<=NF;i++)
        if($i in a){
                for(m=i;m<=NF;m++)
                        r=(r?r" ":"")$m
                        break;
                }else{
                h=h" "$i
        }
        $0=(r?r" ":"")h;
}1'
A B C D    
A B E F
A G H I
J K L M
N J Q K 
```

# ios - 使用 HP Fortify 和 Xcode

> ID：14716207
> 
> 赞同：0
> 
> 时间：2013-02-05T20:21:54.553
> 
> 标签：ios, xcode, ios6, fortify

我遇到了这个问题......在使用 xcodebuild 分别成功构建 iOS 6.0 (Xcode 4.5) 项目后，sourceanalyzer 首先报告缺少几个类的 .nst 文件，包括 stdarg.h 和类似文件。似乎 sourceanalyzer 看不到 iPhone SDK 的标头搜索路径。然而，Fortify 似乎如此罕见，以至于我还没有找到任何答案，尤其是关于与各种 Xcode 版本的兼容性等方面。有人吗？

```
$ sourceanalyzer -b Forty xcodebuild -configuration Debug -sdk iphoneos6.1 
```

输出：

```
Build settings from command line:
SDKROOT = iphoneos6.1

=== BUILD NATIVE TARGET fortifyTest OF PROJECT fortifyTest WITH CONFIGURATION Debug ===
Check dependencies

ProcessPCH     /var/folders/yp/2l8w2hpd08199zstwqnxnvs80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/fortifyTest-Prefix-gfjvmaafdrnknjehmxvutbaqdpny/fortifyTest-Prefix.pch.pth fortifyTest/fortifyTest-Prefix.pch normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/sychram/Repositories/fortifyTest
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Applications/HP_Fortify/HP_Fortify_SCA_and_Apps_3.70/bin"
/Users/sychram/.fortify/sca5.14/build/Forty/build717537620538182813/clang -x objective-c-header -arch armv7 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -miphoneos-version-min=6.0 -iquote /Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/fortifyTest-generated-files.hmap -I/Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/fortifyTest-own-target-headers.hmap -I/Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/fortifyTest-all-target-headers.hmap -iquote /Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/fortifyTest-project-headers.hmap -I/Users/sychram/Repositories/fortifyTest/build/Debug-iphoneos/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/DerivedSources/armv7 -I/Users/sychram/Repositories/fortifyTest/build/fortifyTest.build/Debug-iphoneos/fortifyTest.build/DerivedSources -F/Users/sychram/Repositories/fortifyTest/build/Debug-iphoneos --serialize-diagnostics /var/folders/yp/2l8w2hpd08199zstwqnxnvs80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/fortifyTest-Prefix-gfjvmaafdrnknjehmxvutbaqdpny/fortifyTest-Prefix.pch.dia -c /Users/sychram/Repositories/fortifyTest/fortifyTest/fortifyTest-Prefix.pch -o /var/folders/yp/2l8w2hpd08199zstwqnxnvs80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/fortifyTest-Prefix-gfjvmaafdrnknjehmxvutbaqdpny/fortifyTest-Prefix.pch.pth -MMD -MT dependencies -MF /var/folders/yp/2l8w2hpd08199zstwqnxnvs80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/fortifyTest-Prefix-gfjvmaafdrnknjehmxvutbaqdpny/fortifyTest-Prefix.pch.d
[error]: Translator execution failed.  Please consult the Troubleshooting section of the    User Manual. 
Translator returned status 1:

In file included from /Users/sychram/Repositories/fortifyTest/fortifyTest/fortifyTest-Prefix.pch:12:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:9:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccelerometer.h:8:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:6:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:11:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/sys/types.h:78:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/machine/types.h:35:10: fatal error: 'i386/types.h' file not found
#include "i386/types.h"
     ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:15:39.623

在最新版本 3.7 中，fortify 仅支持 AFAIK 的 xcode 版本 4.1、4.2、4.2.1、4.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T07:12:23.233

目前支持带有 SCA 版本 4.02 的 xcode 4.6。但我仍在等待 xcode 5.x 得到 fortify 的支持，我将能够扫描基于 iOS7 的应用程序。因为 2 月份提交到 App Store 的应用程序必须使用最新版本的 Xcode 5 构建，并且必须针对 iOS 7 进行优化。

# c# - HtmlAgilityPack 和属性最小化

> ID：14716218
> 
> 赞同：0
> 
> 时间：2013-02-05T20:22:39.783
> 
> 标签：c#, html, html-agility-pack

你知道 htmlagilitypack 是如何处理属性最小化的吗？例如：

```
<audio controls>
<source src="horse.ogg" type="audio/ogg">
<source src="horse.mp3" type="audio/mpeg">
Your browser does not support the audio tag.
</audio> 
```

控件被最小化并且在正确的 xhmtl 中应该这样写：

```
<audio controls="controls">
<source src="horse.ogg" type="audio/ogg">
<source src="horse.mp3" type="audio/mpeg">
Your browser does not support the audio tag.
</audio> 
```

控件是什么节点类型（在上面的例子中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:23:07.447

![截屏](../Images/ba6443c67b1ba0f52e96df0666880aaa.png)

从上面的截图可以看出，“controls”属性的类型为“HtmlAgilityPack.HtmlAttribute”，其值为空字符串。

# c# - 如何从 C# 中导航到图像

> ID：14716223
> 
> 赞同：0
> 
> 时间：2013-02-05T20:22:49.290
> 
> 标签：c#, windows-phone-8

我想知道您如何在 WP8 上导航到/打开图像？

假设我刚刚将一张图片保存到我的保存图片文件夹中，我现在想将用户导航到该图片，以便他们可以在 Facebook 上分享它。

可以说我有：

```
MediaLibrary lib = new MediaLibary();

Picture p = library.SavePicture("foo.jpg", imgStream); 
```

如何导航到 p 就好像用户从图片库中单击它一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:33:21.667

您总是可以尝试将图像的 url 作为字符串传递给除了“图像”之外什么都没有的页面。然后，一旦您导航到页面，您就会从 url 打开图像（url 可以用于隔离存储文件）并将其设置为页面上的“图像”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:30:52.150

导航到图像的简单方法与[C# 中的高效图像处理](https://stackoverflow.com/questions/921557/efficient-image-manipulation-in-c-sharp)有关。我认为您需要一个像[AForge.NET](http://code.google.com/p/aforge/)这样的处理框架。

# regex - Perl Net::Telnet waitfor() 十六进制字符

> ID：14716226
> 
> 赞同：1
> 
> 时间：2013-02-05T20:23:01.263
> 
> 标签：regex, perl, hex, telnet

所以我在 perl 中使用 Net::Telnet 编写脚本......我想 waitfor() 并匹配十六进制字符 01 (Ctrl+A) 和 03 (Ctrl+C) 以及介于两者之间的所有内容

怎么能完成这样的壮举？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:46:03.227

更好的是等待非 ctrl 字符（如果您可以从显示此 ctrl 字符的终端抛出一些输出，这将有所帮助），

您可以使用从 waitfor 调用返回的 prematch 和 match 读取所有缓冲区，其中应包含所有打印的字符。简单的技术是使 $match undef 然后将所有内容放入 $prematch 中。

# javascript - Mongoose 填充一批数组

> ID：14716227
> 
> 赞同：1
> 
> 时间：2013-02-05T20:23:02.510
> 
> 标签：javascript, node.js, mongodb, mongoose

我有一个架构，其中包含子文档中的人口参考。

```
var schema = new mongoose.Schema({
    references: {
        images: [{ref: 'Page', type: mongoose.Schema.Types.ObjectId}],
        files: [{ref: 'Page', type: mongoose.Schema.Types.ObjectId}]
    }
}); 
```

然后为它创建一个模型，匹配引用的名称（pages => pages）。

```
var Page = mongoose.model('Page', schema); 
```

我想通过其标识符检索页面并检索所有引用。

```
Page.findById(id)
    .populate('references.images') // Err.. two populations..
    .populate('references.files') // Err.. two populations..
    .exec(function(err, page) {
    // ... snip ...
}); 
```

现在我正在做多个人群。如何确保单个种群加载一批数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:10:12.507

自 3.6 预发布以来，可以执行以下操作：

```
Page.findById(id)
    .populate('references.images references.files')
    .exec(function(err, page) {
    // ... snip ...
}); 
```

# apache-flex - Adobe Media Server DVR 仅 5 秒录制

> ID：14716229
> 
> 赞同：0
> 
> 时间：2013-02-05T20:23:14.413
> 
> 标签：apache-flex, streaming, adobe, flash-builder, flash-media-server

我有一个奇怪的问题。我有一个内置在 Flash Builder 中的应用程序。

当我录制到**Flash Media Server**时，我没有任何问题，只要我愿意，它就会做 DVR。但是当我录制到 Adob​​e Media Server 时，录制时间只有 5 秒。

```
ns = new NetStream(nc);
    ns.client = new Object();
    userUID = UIDUtil.createUID();
    ns.attachAudio (mic);
    ns.attachCamera (camera);
    ns.publish( "demo" + userUID, "record" ); 
```

稍后我可以播放录音，时间戳说这是一个 5 秒的存档，但它真的会继续播放录制的视频。

相同的代码，只是不同的服务器。

**从 Flash Media Server 迁移到 Adob​​e Media Server**时，有人遇到过这个问题吗？

# php - CodeIgniter 自动完成？

> ID：14716243
> 
> 赞同：0
> 
> 时间：2013-02-05T20:23:47.533
> 
> 标签：php, eclipse, codeigniter

我正在使用 Eclipse + Pdt 。有什么方法可以让 Eclipse 自动完成 CI 功能？例如 $this->db-> .. 对我来说没有自动完成，如果它会膨胀！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:28:01.993

看一下

[http://7degrees.co.uk/blog/getting-full-auto-complete-with-codeigniter-in-eclipse/](http://7degrees.co.uk/blog/getting-full-auto-complete-with-codeigniter-in-eclipse/)。 [http://www.web-and-development.com/codeigniter-and-eclipse-autocomplete/](http://www.web-and-development.com/codeigniter-and-eclipse-autocomplete/)（我的最爱） [http://taggedzi.com/articles/display/autocomplete-eclipse-codeigniter-2](http://taggedzi.com/articles/display/autocomplete-eclipse-codeigniter-2)

它应该有帮助。

# android - android Spinner 后跟 ListView - 未调用 onItemSelected

> ID：14716248
> 
> 赞同：2
> 
> 时间：2013-02-05T20:24:07.683
> 
> 标签：android, spinner

我已经进行了很好的搜索，但似乎找不到答案。没有调用 onItemSelected 方法。这是我的活动的 onCreate 方法中的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_trips);

    try {
    // if network present.. TODO

    // Load Devices
    deviceList = new ArrayList<Device>();
    DataAsyncTask loadDevices = new DataAsyncTask(0);
    loadDevices.execute(someUrl);
    List<Device> deviceListNames = deviceList;
    final ListView tripListView = (ListView)findViewById(R.id.trip_list);
    Spinner deviceSpinner = (Spinner) findViewById(R.id.select_device_spinner);
    ArrayAdapter<Device> deviceAdapter = new ArrayAdapter<Device>(this, android.R.layout.simple_spinner_dropdown_item, deviceListNames);
    deviceAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    deviceSpinner.setAdapter(deviceAdapter);
    OnItemSelectedListener spinnerListener = new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                      int i, long id) {

            Log.d(TAG, "select is: " + parent.getSelectedItem().toString());   

            DataAsyncTask loadTrips = new DataAsyncTask(1);
            loadTrips.execute(someUrl);
            ArrayAdapter<Trip> tripAdapter = new ArrayAdapter<Trip>(getApplication(),
                    android.R.layout.simple_list_item_1, tripList);
            tripListView.setAdapter(tripAdapter);
            tripListView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int i, long id) {

                    Log.d(TAG, parent.getSelectedItem().toString());

                    Intent intent = new Intent(getApplication(), TripSummary.class);
                    //put value of tripId to intent TODO
                    startActivity(intent);
                }

            });

         }

         @Override
         public void onNothingSelected(AdapterView<?> parent) {
               // TODO
               Log.d(TAG, "nothing selected");
         }

  };
    deviceSpinner.setOnItemSelectedListener(spinnerListener);
    } catch (Exception e){
        Log.e(TAG, e.getLocalizedMessage(), e);
    }

} 
```

这是活动的布局 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".ViewTrips" >

<Spinner
    android:id="@+id/select_device_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/select_device"
    android:layout_marginTop="5dp"
    android:layout_marginLeft="5dp"
    android:drawSelectorOnTop = "true" />

<ListView
    android:id="@+id/trip_list"
    android:layout_below="@id/select_device_spinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/trips"
    android:clickable="true" />

</RelativeLayout> 
```

它的值已填充并在 Spinner 中正确显示。我只是在设置为 deviceSpinner 的 OnItemSelectedListener() 中的 onItemSelected 方法存在问题 - 然后应该使用此方法填充 ListView，单击后会将用户带到新活动。谁能解释我做错了什么？

我也尝试过为活动实现 OnItemSelectedListener，这也不起作用。

注意：在 LogCat 中没有要报告的错误，

```
Log.d(TAG, "select is: " + parent.getSelectedItem().toString()); 
```

不打印。

谢谢

# version-control - 我可以让远程集市分支从另一个分支拉出吗？

> ID：14716252
> 
> 赞同：0
> 
> 时间：2013-02-05T20:24:55.490
> 
> 标签：version-control, bazaar

我们在集市存储库中有一个主干分支和各种其他功能和个人分支。我们希望保持个人分支与主干同步，但允许每个开发人员远程调用他的远程分支上的“拉”，以便远程与主干同步。然后开发人员将他的个人分支分支到他的机器，编辑，提交（或根据需要分支其他分支），然后可以将更新推送到他的个人分支，或者如果远程分支已经更新 - 将它（以及最新的主干）与在他提出之前，他在当地工作的分支机构。

稍后，看门人可以拉出个人分支并将它们合并到主干中。

如何发出这样的远程拉取请求，以便远程分支从主干拉取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:56:00.353

我认为从主干拉到远程用户分支的步骤是毫无意义的。

在任何情况下，该`pull`操作仅针对本地分支定义。在远程分支中触发 a`pull`意味着`ssh server bzr pull -d path/to/branch`，换句话说，您始终需要对想要访问的分支进行 shell 访问（本地或远程）`pull`。

拉到远程用户分支似乎没有意义，因为用户可以直接拉到他们的本地分支。您的设置可以像这样重新设计：

> 在集市存储库中有一个主干分支和各种其他功能和个人分支。然后开发人员从主干分支到他的机器，编辑、提交（或根据需要分支其他分支），然后可以将分支推送到他的个人远程分支。稍后，看门人可以拉出个人分支并将它们合并到主干中。

在任何时候，开发人员都可以从主干合并以获得自从他们开始在本地分支工作以来已由网守合并的新更改。

如果您认为这不会达到同样的效果，请发表评论。

如果你真的想在没有 shell 访问的情况下更新远程分支，`push`这是唯一的方法。您*可以*对主干中的新修订触发的所有远程个人分支进行自动推送，但如上所述，这将毫无意义。如果用户想从中继同步，他们应该只从中继同步。

# ios - 分发到不同的企业帐户 AppStore

> ID：14716254
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:25:06.373
> 
> 标签：ios, enterprise, in-house-distribution

这对于堆栈溢出来说是相当奇怪的，因为它没有编程。我不知道还能去哪里，苹果开发论坛是……啊，无论如何，

我已经为一家公司和我自己创建了一个应用程序，它是一个参考应用程序，因此不绑定到任何公司服务器甚至我的服务器，将其视为一个教育应用程序。

该应用程序在 AppStore 上可用，但是，我想将其提供给一家公司，该公司不在拥有批量购买计划的国家/地区列表中。

我想知道我在这里有什么选择，我想假设（尽管我不知道）该公司确实拥有企业 iOS 开发人员许可证。

在这种情况下，有没有办法，我可以 In-Theory 向他们提供我的申请以供他们内部分发？

有没有例子？假设他们与第三方开发人员（在 AppStore 中使用该应用程序）签约，以构建他们的内部应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:59:39.657

如果公司拥有开发者企业许可证，那么您可以获取您的源代码并使用从他们的帐户创建的证书进行构建和签名。然后可以在公司内分发此版本的应用程序。请注意，如果该公司目前没有企业开发者帐户，他们将必须注册一个（需要一个 DUNS 编号），并且需要承担 299 美元的年度费用。

您需要处理许多事情。由于您不是这家公司的员工，因此您需要处理代码的所有权、持续的支持以及每年在证书到期时为他们重新编译应用程序等。

这个问题可能会因为离题而被关闭，但希望能给你一些思考。

# c# - MVVM 绑定问题 - 另一个菜鸟问题

> ID：14716258
> 
> 赞同：0
> 
> 时间：2013-02-05T20:25:29.797
> 
> 标签：c#, .net, wpf, data-binding, mvvm

所以我又来了，问了一个[与昨天非常相似的问题](https://stackoverflow.com/questions/14692486/wpf-databinding-issues-possible-noob-problems)。我重构了我的项目，以便更好地遵循 MVVM 模式。现在我的绑定不再像昨天那样工作了。我正在尝试将停靠面板的可见性绑定到按钮。这是我的一些代码：

视图模型：

```
public class SelectWaferButtonViewModel : INotifyPropertyChanged
{
    private bool isClicked;

    public SelectWaferButtonViewModel()
    {
        isClicked = false;
    }

    public bool IsControlVisible
    {
        get
        {
            return isClicked;
        }
        set
        {
            isClicked = value;
            OnPropertyChanged("IsControlVisible");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnButtonClick()
    {
        if (isClicked)
        {
            IsControlVisible = false;
        }
        else
        {
            IsControlVisible = true;
        }
    }
    protected virtual void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

XAML：

```
<Window.Resources>
     <local:BoolToVisibilityConverter x:Key="BoolToVisConverter"/>
     <local:SelectWaferButtonViewModel x:Key="SelectWaferButton" />
     <local:WaferTrackerWindowViewModel x:Key="WindowViewModel" />
</Window.Resources>
<DockPanel
     Name="tvwDockPanel"
     DataContext="{StaticResource SelectWaferButton}"
     Width="225"
     Visibility="{Binding IsControlVisible, Mode=TwoWay, 
                  FallbackValue=Collapsed, 
                  Converter={StaticResource BoolToVisConverter}}"
     DockPanel.Dock="Left">
 </DockPanel> 
```

我的`BoolToVisConverter`：

```
public class BoolToVisibilityConverter : IValueConverter
{
    public BoolToVisibilityConverter() { }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool bValue = (bool) value;
        if (bValue)
        {
            return Visibility.Visible;
        }
        else
        {
            return Visibility.Collapsed;
        }
    }
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Visibility visibility = (Visibility) value;
        if (visibility == Visibility.Visible)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

对于与昨天类似的问题，我深表歉意，但由于我对 WPF 很陌生，因此我正在努力解决这个 MVVM 问题。任何帮助都感激不尽。

*   提前致谢，

***编辑：*** ***这里有一些额外的代码片段供进一步参考：***

```
public class WaferTrackerWindowViewModel :INotifyPropertyChanged
{
    private SelectWaferButtonViewModel btnSelectWaferViewModel;
    public event PropertyChangedEventHandler PropertyChanged;
    private DelegateCommand exitCommand;
    private DelegateCommand expandPanelCommand;
    private DelegateCommand selectWaferCommand;

    public WaferTrackerWindowViewModel()
    {
        this.InstantiateObjects();
        initThread.RunWorkerAsync();
    }

    public string SelectedWafer
    {
        get
        {
            return selectedWafer;
        }
        set
        {
            selectedWafer = value;
        }
    }
    public ICommand ExitCommand
    {
        get
        {
            if (exitCommand == null)
            {
                exitCommand = new DelegateCommand(Exit);
            }
            return exitCommand;
        }
    }
    public ICommand ExpandPanelCommand
    {
        get
        {
            if (expandPanelCommand == null)
            {
                expandPanelCommand = new DelegateCommand(ExpandPanel);
            }
            return expandPanelCommand;
        }
    }
    public ICommand SelectWaferCommand
    {
        get
        {
            if (selectWaferCommand == null)
            {
                selectWaferCommand = new DelegateCommand(SelectWafer);
            }
            return selectWaferCommand;
        }
    }

    private void InstantiateObjects()
    {
        btnSelectWaferViewModel = new SelectWaferButtonViewModel();
        initThread = new BackgroundWorker();
    }
    private void ExpandPanel()
    {
        btnSelectWaferViewModel.OnButtonClick();
    }
    private void SelectWafer()
    {
       //Does Nothing Yet
    }
    private void Exit()
    {
        Application.Current.Shutdown();
    }
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private void InitThread_DoWork(object sender, DoWorkEventArgs e)
    {
        TreeViewPresenter tvwPresenter = new TreeViewPresenter();
        tvwPresenter.WaferList = DataLibrary.GetWaferList();
    }
    private void InitThread_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        tvwPresenter.TreeView.DataContext = tvwPresenter.ProcessesAndWafers;
        tvwPresenter.WaferListCache = tvwPresenter.ProcessesAndWafers;
        tvwPresenter.ProcessArray = tvwPresenter.WaferListCache.ToArray();
    }
} 
```

***单击“展开面板”按钮时，它会调用`ExpandPanel`命令，该命令将执行路由到同一类中的方法“private void ExpandPanel()”。然后，在`ExpandPanel()`方法中，它调用对象`OnButtonClick()`上的方法`btnSelectWaferViewModel`，这将改变`IsControlVisible`属性。然后应该将此更改反映到绑定的停靠面板上，但这不会发生***

凯尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:30:04.483

(1) ViewModel 应该在`Window.DataContext`section，而不是`Window.Resources`section。

(2) 在您的视图模型中，将您的`IsControlVisible`属性设为 a `System.Windows.Visibility`，而不是 Boolean，那么您就不需要转换器了。

（3）我看不出有什么方法`OnButtonClick`可以触发，确实需要设置`ICommand`界面。

(4) 您不需要实现`ConvertBack`，因为`Visibility`您绑定的属性是一种定义方式。用户无法将其*设置*`visibility`为`false`.

(5) 不要混用 access`IsClicked`和它的 accessor `IsControlVisible`。始终在 MVVM 中使用 Accessor，因为您冒着意外设置`IsClicked`无法激活的风险`OnPropertyChanged`。

总而言之，你已经很接近了。请务必留意您的“输出”窗口，它会告诉您绑定是否由于某种原因失败。但是，是的，坚持住！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:24:43.930

所以当你这样做时：

```
<Window.Resources>
    <local:SelectWaferButtonViewModel x:Key="SelectWaferButton" />
</Window.Resources> 
```

WPF 将创建一个新的实例`SelectWaferButtonViewModel`并将其添加到它的资源中。`DataContext`然后，您通过设置使用`StaticResource`with 键来绑定到此。

但是，如果您`SelectWaferButtonViewModel`在后面的代码中创建另一个并将您的命令链接到该实例，那么它不是同一个实例，因此对此未绑定实例的属性的更改不会影响您的 UI。有几种方法可以解决它。您可以 a)`SelectWaferButtonViewModel`在后面的代码中创建一个属性作为属性，然后在 XAML 中绑定到该属性，或者 b)`SelectWaferButtonViewModel`在 XAML 中声明您当前拥有的属性，然后在后面的代码中检索该实例，如下所示：

```
SelectWaferButtonViewModel swbvm = (SelectWaferButtonViewModel)this.FindResource("SelectWaferButton"); 
```

**编辑**：因此，在看到您的最后一次编辑之后，如果您想使用 a)，那么我建议您将`btnSelectWaferViewModel`其作为属性公开`WaferTrackerWindowViewModel`，然后将 Window 的 DataContext 绑定到该属性，并将其设置为`WaferTrackerWindowViewModel`实例。所以你最终会得到类似的东西：

```
<DockPanel
    Name="tvwDockPanel"
    Width="225"
    Visibility="{Binding MyButton.IsControlVisible, 
        Converter={StaticResource BoolToVisConverter}}"
    DockPanel.Dock="Left">
</DockPanel> 
```

和：

```
public class WaferTrackerWindowViewModel :INotifyPropertyChanged
{
    private SelectWaferButtonViewModel btnSelectWaferViewModel;
    public SelectWaferButtonViewModel MyButton 
    {
        get { return btnSelectWaferViewModel; }
        set
        {
            btnSelectWaferViewModel = value;
            OnPropertyChanged("MyButton");
        }
    }
    //...... 
```

# javascript - Javascript 在 ID 更大和更小的行之间放置表格行

> ID：14716259
> 
> 赞同：0
> 
> 时间：2013-02-05T20:25:32.877
> 
> 标签：javascript, jquery, html, dom

我正在构建一个在屏幕上（在表格元素中）输出汽车列表的系统。该页面通过对服务器的 HTTP 调用自动加载更新。

每辆车都有一个ID，一个状态和一些无关紧要的东西。现在，当用户加载页面时，会显示没有“维护”和“失事”状态的汽车，并且每五秒就会从服务器加载新的 JSON 数据。如果有一辆汽车从维修中出来，这个应该被添加到表中。该表按汽车 ID 排序，问题就来了。我写了一些伪代码来澄清我的问题：

```
if (row_with_greater_id_exits && row_with_lower_id_exists) {
    place_row_between_firstRowWithGreaterId_and_FirstRowWithLowerId();
} else if (is_row_with_greater_id) {
    jQuery('table#cars tbody').append(generatedHtml);
} else if (is_row_with_lower_id) {
    jQuery('table#cars tbody').prepend(generatedHtml);
} 
```

问题是我不知道如何找到 ID 较大的第一行或 ID 较小的第一行。ID 并不总是成功的，因为有些汽车被破坏并且状态被破坏。

我希望这里有人遇到过类似的问题，并且可以帮助我解决问题。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:37:21.323

您需要遍历行，并比较 id。当新行的 ID 小于循环中的当前行时，在当前行之前插入新行，然后中断循环。

```
rows.each(function(i, el) {
    if (+newrow.id < +el.id) {
        $(el).before(newrow);
        return false;
    }
})
if (!newrow.parentNode)
    rows.parent().append(newrow); 
```

此代码假定`rows`是一个 jQuery 对象，它包含所有行的集合，并且`newrow`是一个表示新行的 DOM 元素。

还假设 ID 是简单的数字。请注意，数字 ID 仅在 HTML5 中有效。

* * *

就个人而言，我只是为此使用本机 API：

```
var tbody = document.querySelector("tbody");

tbody.insertBefore(newrow, [].reduce.call(tbody.rows, function(bef, el) {
    return bef || +newrow.id > +el.id ? bef : el;
}, null)); 
```

无需测试`isFirstLoad`. 当它`tbody`为空时，它仍然可以工作。但是对于旧版浏览器，您需要一个`.reduce()`shim。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:42:36.133

> *我有这个：* `id="car-1" data-id="1"`

我假设该`data`属性在`tr`元素上。显然，如果它位于一行中的一个单元格上，您可以调整以下内容。

遍历表检查每一行的 id，并在第一行的 id 大于新行之前插入新行：

```
// assume newId is the new ID, somehow set from your JSON

var rowInserted = false;
jQuery('#invoices-outstanding tbody tr').each(function() {
   var $row = $(this);
   if (+$row.attr("data-id") > newId) {
      $row.before(generatedHtml);
      rowInserted = true;
      // break out of each loop
      return false;
   }
});
if (!rowInserted)
   jQuery('#invoices-outstanding tbody').append(generatedHtml); 
```

# java - 持久性中的默认表前缀

> ID：14716262
> 
> 赞同：1
> 
> 时间：2013-02-05T20:25:44.540
> 
> 标签：java, spring, persistence

如何在持久性配置文件中配置默认​​表前缀。我使用 Spring 的默认配置如下：

```
 <persistence-unit name="primary">
  <jta-data-source>java:jboss/datasources/MysqlDS</jta-data-source>
  <properties>
     <property name="jboss.entity.manager.factory.jndi.name" value="java:jboss/spring-quickstart/persistence" />
     <!-- Properties for Hibernate -->
     <property name="hibernate.hbm2ddl.auto" value="create" />
     <property name="hibernate.show_sql" value="false" />
  </properties> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:09:50.447

看起来[这个](https://stackoverflow.com/questions/4313095/jpa-hibernate-and-custom-table-prefixes)SO question 有你想要的答案。

看起来 G. Bach 所指的仅允许您更改“元数据表”？

# java - 从 EDT 传递数据：需要 volatile 吗？

> ID：14716263
> 
> 赞同：0
> 
> 时间：2013-02-05T20:25:48.877
> 
> 标签：java, thread-safety

我有一个后台线程，它不会开始处理，直到它的`start`变量变为`true`：

```
class MyBackgroundThread implements Runnable {
    // ...

    public void run() {
        while(true) {
            if(!start) continue;

            doSomethingWith(myValue);
        }
    }
} 
```

通过单击当然在事件调度线程上运行的`start`a 上的按钮，该变量被设置为 true。后台线程类中`JFrame`还有一个字段，通过点击按钮设置：`myValue`

```
startBtn.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        backgroundThreadInstance.setMyValue(100);
        backgroundThreadInstance.setStart(true);

        // ...
    }
}); 
```

如您所见，它`myValue`在设置`start`为之前分配了一些东西`true`。这是否意味着设置`myValue`和`start`as`volatile`不是必需的？由于`myValue`是先写的，所以会在之前泄露给后台线程`start`，因此后台线程永远不会有机会处理未初始化的`myValue`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:32:25.897

简短的回答是肯定的。尽管在实践中，最终更改为 true 可能会被您的线程看到，但理论上它可能永远不会发生。

但是，同意@NamshubWriter 的观点，有比忙/闲循环更好的方法来做到这一点。我喜欢他设置整数然后将其提交给 ExecutorService 的建议。例如

```
public void actionPerformed(ActionEvent e) {
  BackgroundRunnableInstance runnable = new BackgroundRunnableInstance();
  runnable.setMyValue(100);  // could be in the constructor instead
  someExecutorService.submit(runnable);
} 
```

一个区别是，如果他们多次点击按钮，您将启动多个可运行文件。这可能是也可能不是你想要的。

# c# - 如何独家更换？

> ID：14716268
> 
> 赞同：1
> 
> 时间：2013-02-05T20:26:08.940
> 
> 标签：c#, regex, string, replace

好的，我有一个非常明显但显然很重要的问题要解决。

假设我有一个简单的字符串`ab`。
现在我想`a`用`b`和`b`替换`a`，所以我以`ba`.

解决方案是连续进行两次替换。但结果要么取决于订单，要么`aa`取决于`bb`订单。

显然，生产环境将不得不处理比两个更复杂的字符串和更多的替换，但问题仍然存在。

我的一个想法是保存我替换某些东西的位置。但是，一旦替换的针的长度与原来的针不同，这让我大吃一惊。

这是一般问题，但我正在使用 C#。这是我想出的一些代码：

```
string original = "abc";

Regex[] expressions = new Regex[]
{
    new Regex("a"), //replaced by ab
    new Regex("b") //replaced by c
};

string[] replacements = new string[]
{
    "ab",
    "c"
};

for (int i = 0; i < expressions.Length; i++)
    original = expressions[i].Replace(original, replacements[i]);

//Expected result: abcc
//Actual result: accc <- the b is replaced by c in the second pass. 
```

那么有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:03:38.137

这是一个解决方案。对字符串尝试所有正则表达式，在最早的匹配上进行替换，然后在字符串的剩余部分上递归。如果您需要它更快但更复杂，您可以`Matches()`在开始时要求所有权利并从左到右处理它们，在`Indexes`用更长和更短的字符串替换表达式时调整它们，并丢弃任何重叠。

```
using System;
using System.IO;
using System.Text.RegularExpressions;

class MultiRegex {

    static String Replace(String text, Regex[] expressions,
            String[] replacements, int start=0)
    {
        // Try matching each regex; save the first match
        Match firstMatch = null;
        int firstMatchingExpressionIndex = -1;
        for (int i = 0; i < expressions.Length; i++) {
            Regex r = expressions[i];
            Match m = r.Match(text, start);
            if (m.Success
                    && (firstMatch == null || m.Index < firstMatch.Index))
            {
                firstMatch = m;
                firstMatchingExpressionIndex = i;
            }
        }

        if (firstMatch == null) {
            /* No matches anywhere */
            return text;
        }

        // Replace text, then recurse
        String newText = text.Substring(0, firstMatch.Index)
            + replacements[firstMatchingExpressionIndex]
            + text.Substring(firstMatch.Index + firstMatch.Length);
        return Replace(newText, expressions, replacements,
                start + replacements[firstMatchingExpressionIndex].Length);
    }

    public static void Main() {

        Regex[] expressions = new Regex[]
        {
            new Regex("a"), //replaced by ab
            new Regex("b") //replaced by c
        };

        string[] replacements = new string[]
        {
            "ab",
            "c"
        };

        string original = "a b c";
        Console.WriteLine(
                Replace(original, expressions, replacements));

        // Should be "baz foo bar"
        Console.WriteLine(Replace("foo bar baz",
                    new Regex[] { new Regex("bar"), new Regex("baz"),
                        new Regex("foo") },
                    new String[] { "foo", "bar", "baz" }));
    }
} 
```

这打印：

```
ab c c
baz foo bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T22:06:06.230

如果您正在谈论简单的一对一转换，则转换为 char 数组并进行切换可能是理想的，但是您似乎正在寻找更复杂的替代品。

基本上，诀窍是创建一个中间字符来标记你的临时角色。这里没有显示实际代码，而是字符串转换后的样子：

```
ab
%1b
%1%2
b%2
ba 
```

所以基本上，替换`%`为`%%`，然后是第一个匹配项，`%1`依此类推。一旦它们全部完成，替换`%1`为它的输出等等，最后替换`%%`为`%`.

但是要小心，如果你能保证你的中间语法不会污染你的输入，你就可以了，如果你不能，你将需要使用技巧来确保你没有以奇数个`%`. （所以`%%a`会匹配，但`%%%a`不会，因为这意味着特殊值`%a`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:16:36.750

如果你`(\ba\b)`用来表示匹配字母`a`并且只匹配字母`a`，while`ab`将不会被匹配。类似的`b`，它会是`(\bb\b)`。

```
 string original = "a b c";
 Regex[] expressions = new Regex[] {
      // @ sign used to signify a literal string
      new Regex(@"(\ba\b)"), // \b represents a word boundary, between a word and a space
      new Regex(@"(\bb\b)"),
 };
 string[] replacements = new string[] {
      "ab",
      "c"
 };
 for(int i = 0; i < expressions.Length; i++)
      original = expressions[i].Replace(original, replacements[i]); 
```

编辑1：问题更改为要匹配的字母之间没有空格，想要相同`abcc`的 from `abc`，我只是颠倒了检查正则表达式的顺序。

```
 Regex[] expressions = new Regex[] {
      new Regex(@"b"), //replaced by c
      new Regex(@"a"), //replaced by ab
 };
 string[] replacements = new string[] {
      "c",
      "ab",
 }; 
```

编辑2：答案更改为反映要匹配的可变长度，此匹配基于要检查的模式顺序，检查模式，然后移动到新字符串

```
 string original = "a bc";

 Regex[] expressions = new Regex[] {
      new Regex(@"a"), //replaced by ab
      new Regex(@"b"), //replaced by c
 };

 string[] replacements = new string[] {
      "ab",
      "c",
 };
 string newString = string.Empty;
 string workingString = string.Empty;
 // Position of start point in string
 int index = 0;
 // Length to retrieve
 int length = 1;
 while(index < original.Length) {
      // Retrieve a piece of the string
      workingString = original.Substring(index, length);
      // Whether the expression has been matched
      bool found = false;
      for(int i = 0; i < expressions.Length && !found; i++) {
           if(expressions[i].Match(workingString).Success) {
                // If expression matched, add the replacement value to the new string
                newString += expressions[i].Replace(workingString, replacements[i]);
                // Mark expression as found
                found = true;
           }
      }
      if(!found) {
           // If not found, increase length (check for more than one character patterns)
           length++;
           // If the rest of the entire string doesn't match anything, move the character at **index** into the new string
           if(length >= (original.Length - index)) {
                newString += original.Substring(index, 1);
                index++;
                length = 1;
           }
      }
      // If a match was found, start over at next position in string
      else {
           index += length;
           length = 1;
      }
 } 
```

# django - 使用通用 ListView 进行动态分页

> ID：14716270
> 
> 赞同：10
> 
> 时间：2013-02-05T20:26:13.107
> 
> 标签：django

我有一个要求，用户应该能够选择他想在助手列表中看到的每页有多少项目。我在 Django 1.4 中使用通用 ListView。

我在此更改之前的代码如下所示：

```
Class AssistantList(ListView):
    template_name = "register/assistant_list.html"
    context_object_name = 'assistant_list'
    paginate_by = 25 
```

如何根据用户的选择动态设置 paginate_by，而不是像上面那样硬编码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T02:13:27.470

我最近不得不这样做。您可以覆盖 get_paginate_by 函数来获取查询字符串参数。这是一个基本的例子。

```
Class AssistantList(ListView):
    template_name = "register/assistant_list.html"
    context_object_name = 'assistant_list'
    paginate_by = 25

    def get_paginate_by(self, queryset):
        """
        Paginate by specified value in querystring, or use default class property value.
        """
        return self.request.GET.get('paginate_by', self.paginate_by) 
```

然后在我们的 html 中，我们有一个下拉选择，用户可以在其中选择要查看的项目数。

```
<form action="." method="get">
    <select name="paginate_by">
        <option>25</option>
        <option>50</option>
        <option>75</option>
        <option>100</option>
    </select>
</form> 
```

我们添加了一些 javascript 以使其自动提交，您需要将 paginate_by 传递给上下文，以便确保它继续在页面之间传递。

# java - Java - [Var 类型] 无法解析

> ID：14716272
> 
> 赞同：2
> 
> 时间：2013-02-05T20:26:21.997
> 
> 标签：java, eclipse, swing, jpanel

在过去的半个小时里，我一直在为这个错误而烦恼。`JPanel cannot be resolved to a type`但是，我已经导入了`javax.swing.JPanel;`，我看不出导致这种情况的另一个原因。我在好的或其他问题上没有找到任何帮助。不过，这个问题的有趣之处在于它发生在来自 swing 包的所有变量上。我尝试重新添加`JRE System Library`（我正在使用 eclipse），但这没有帮助。这是我正在使用的一些代码；

```
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JSeparator;

public class Workshop {
    private JFrame window = new JFrame("Meejo WorkShop");
    private JLayeredPane lpane = new JLayeredPane();
    private JPanel panelBg = new JPanel();
    private JPanel panelGame = new JPanel();
    private JPanel panelProp = new JPanel();
    private JPanel panelWork = new JPanel(); 
```

是问题的一个例子。所有变量都给出了错误`[Var Type] Cannot be resolved to a type`和`rivate`任何`= ne`想法，为什么？如果是这样，我该如何解决？谢谢。

编辑：完整的代码是；

```
package mj.workshop;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JSeparator;

public class Workshop {
    private final JFrame window = new JFrame("Meejo WorkShop");
    private final JLayeredPane lpane = new JLayeredPane();
    private final JPanel panelBg = new JPanel();
    private final JPanel panelGame = new JPanel();
    private final JPanel panelProp = new JPanel();
    private final JPanel panelWork = new JPanel();

    private final JMenuBar windowMenu = new JMenuBar();
    private final JMenu menuFile = new JMenu("File");
    private final JMenu menuEdit = new JMenu("Edit");
    private final JMenu menuHelp = new JMenu("Help");
    // private JMenu menuTest = new JMenu("Test");
    private final JMenuItem menuFileNew = new JMenuItem("New");
    private final JMenuItem menuFileSave = new JMenuItem("Save");
    private final JMenuItem menuFileSaveAs = new JMenuItem("Save As");
    private final JMenuItem menuFileExit = new JMenuItem("Exit");
    private final JMenuItem menuEditOptions = new JMenuItem("Options");
    // private JMenuItem menuEditRedo = new JMenuItem("Redo");
    // private JMenuItem menuEditUndo = new JMenuItem("Undo");
    // private JMenuItem menuEditCopy = new JMenuItem("Copy");
    // private JMenuItem menuEditCut = new JMenuItem("Cut");
    // private JMenuItem menuEditPaste = new JMenuItem("Paste");
    // private JMenuItem menuEditInsert_Comment = new
    // JMenuItem("Insert Comment");
    private final JMenuItem menuHelpSupport = new JMenuItem("Support");
    private final JMenuItem menuHelpAbout = new JMenuItem("About");
    private final JMenuItem menuHelpTips = new JMenuItem("Tips");
    private final JPopupMenu menuHelpTipsPopUp = new JPopupMenu("Tips");
    // private JMenuItem menuTestStart = new JMenuItem("Start");
    // private JMenuItem menuTestPause = new JMenuItem("Pause");
    // private JMenuItem menuTestStop = new JMenuItem("Stop");

    int xSize, ySize;

    public Workshop() {
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Toolkit tk = Toolkit.getDefaultToolkit();
        xSize = ((int) tk.getScreenSize().getWidth());
        ySize = ((int) tk.getScreenSize().getHeight());
        window.setSize(xSize, ySize);
        xSize = window.getWidth();
        ySize = window.getHeight();
        Image icon = Toolkit.getDefaultToolkit().getImage("images/icon.png");
        window.setIconImage(icon);
        window.setBackground(Color.WHITE);
        window.setMinimumSize(new Dimension(600, 450));

        setUpMenu();

        Thread mainThread = new Thread();
        mainThread.start();

        window.setPreferredSize(new Dimension(xSize, ySize));
        window.setLayout(new BorderLayout());
        window.add(lpane, BorderLayout.CENTER);
        lpane.setBounds(0, 0, 600, 400);
        panelBg.setBackground(Color.WHITE);
        panelBg.setBounds(0, 0, xSize, ySize);
        panelBg.setOpaque(true);
        panelProp.setBackground(new Color(235, 235, 235));
        panelProp.setBounds(0, (int) (Math.round(ySize * 0.20)),
                (int) (Math.round(xSize * 0.175)),
                (int) (Math.round(ySize * 0.80)));
        panelProp.setOpaque(true);
        panelWork.setBackground(new Color(235, 235, 235));
        panelWork.setBounds((int) (Math.round(xSize * 0.825)),
                (int) (Math.round(ySize * 0.20)),
                (int) (Math.round(xSize * 0.175)),
                (int) (Math.round(ySize * 0.80)));
        panelWork.setOpaque(true);
        panelGame.setBackground(Color.BLUE);
        panelGame.setBounds((int) (Math.round(xSize * 0.175)),
                (int) (Math.round(ySize * 0.20)),
                (int) (Math.round(xSize * 0.65)),
                (int) (Math.round(ySize * 0.80)));
        panelGame.setOpaque(true);
        lpane.add(panelBg, new Integer(0), 0);
        lpane.add(panelGame, new Integer(1), 0);
        lpane.add(panelProp, new Integer(1), 0);
        lpane.add(panelWork, new Integer(1), 0);
        window.pack();
        window.setVisible(true);

        while (true) {
            windowrefresh();
        }

    }

    public void windowrefresh() {
        try {
            Thread.sleep(1000);
            xSize = window.getWidth();
            ySize = window.getHeight();
            panelProp.setBounds(0, (int) (Math.round(ySize * 0.20)),
                    (int) (Math.round(xSize * 0.175)),
                    (int) (Math.round(ySize * 0.80)));
            panelWork.setBounds((int) (Math.round(xSize * 0.825)),
                    (int) (Math.round(ySize * 0.20)),
                    (int) (Math.round(xSize * 0.175)),
                    (int) (Math.round(ySize * 0.80)));
            panelGame.setBounds((int) (Math.round(xSize * 0.175)),
                    (int) (Math.round(ySize * 0.20)),
                    (int) (Math.round(xSize * 0.65)),
                    (int) (Math.round(ySize * 0.80)));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    private void setUpMenu() {
        menuFileSave.setEnabled(false);
        menuFileSaveAs.setEnabled(false);
        menuFile.add(menuFileNew);
        menuFile.add(menuFileSave);
        menuFile.add(menuFileSaveAs);
        menuFile.add(new JSeparator());
        menuFile.add(menuFileExit);
        menuEdit.add(menuEditOptions);
        // menuEdit.add(menuEditRedo);
        // menuEdit.add(menuEditUndo);
        // menuEdit.add(menuEditCopy);
        // menuEdit.add(menuEditCut);
        // menuEdit.add(menuEditPaste);
        // menuEdit.add(menuEditInsert_Comment);
        menuHelp.add(menuHelpSupport);
        menuHelp.add(menuHelpAbout);
        menuHelp.add(new JSeparator());
        menuHelp.add(menuHelpTips);
        // windowTest.add(menuTestStart);
        // windowTest.add(menuTestPause);
        // windowTest.add(menuTestStop);
        windowMenu.add(menuFile);
        windowMenu.add(menuEdit);
        windowMenu.add(menuHelp);
        // windowMenu.add(menuTest);
        windowMenu.setFont(new Font("Arial", Font.PLAIN, 12));
        window.setJMenuBar(windowMenu);

        menuHelpTips.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent evt) {
                if (evt.isPopupTrigger()) {
                    menuFileSave.setEnabled(true);
                    menuFileSaveAs.setEnabled(true);
                }
            }

            @Override
            public void mouseReleased(MouseEvent evt) {
                if (evt.isPopupTrigger()) {
                    menuFileSave.setEnabled(true);
                    menuFileSaveAs.setEnabled(true);
                }
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:56:51.077

正如布赖恩的评论所建议的，这只是一个编码问题。重新执行所有导入后，更改为 UTF-8 可修复所有错误。

# arrays - 从不断更新的数组中获取数组值的增量

> ID：14716278
> 
> 赞同：0
> 
> 时间：2013-02-05T20:26:41.137
> 
> 标签：arrays, actionscript-3, ecmascript-5

在获得应该很容易工作的东西时遇到问题。我不断用新值更新数组，因此我需要获取最低值和最高值之间的增量或差异。数组的长度应该保持在 10 不变。问题是我的 delta 数组的只有第一个和最后一个值似乎发生了变化。我错过了什么？

虽然在 AS3 中，但在 Java 或 Javascript 中应该几乎相同

```
 private var _deltaArray:Array= new Array();

private function update(myVal:int):void{
  if (_deltaArray.length < 10) {
        _deltaArray.push(myVal);
    }   

 if (_deltaArray.length >= 10) {
    _deltaArray.push(myVal);
    var delta:int =getDelta(_deltaArray);
   _deltaArray.shift();
 }
}//end func

 private function getDelta(a:Array):int {
        var total:Number=0;
        var L:int=a.length
        if (L > 1) {

            a.sort(Array.NUMERIC);

            var delta:int=int(a[0]) - int(a[L - 1]);
            trace('getDelta delta= ' + delta);
        }
        return delta;
 }//end func 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:19:28.550

这只是一个建议，但为什么不记录你的增量呢？我只能用伪代码对此进行编码，但是：

```
private double max = Double.MIN;
private double min = Double.MAX;

private void update(integer value) {
    array.push(value);
    max = value > max ? value : max;
    min = value < min ? value : min;
    if (array.length > 10) {
        array.shift();
    }
}

private int delta() { return max - min; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:05:34.043

找到了答案。我需要先克隆我的数组，然后再对其进行排序以检索增量值

# java - Java Properties 类实现处理双引号/单引号值？

> ID：14716281
> 
> 赞同：9
> 
> 时间：2013-02-05T20:26:56.660
> 
> 标签：java, properties, quotes

我想支持如下的属性文件格式（允许在值周围加上引号）：

```
key1=value1   
key2="value2"
key3='value' 
```

我的问题是 Java Properties 类实现是否像上面那样处理双引号/单引号？我的意思是自动删除引号。

其实我试过不是，只是想在这里确认一下。所以我必须自己删除引号。

编辑：

对于我的简单案例，我有以下代码：

```
String path = "/tmp/my.properties";
Properties p = new Properties();
p.load(new FileInputStream(new File(path)));

String v = p.getProperty("key2");
if((v.startsWith("\"") && v.endsWith("\"")) || 
   (v.startsWith("\'") && v.endsWith("\'"))) {
    v = v.substring(1, v.length()-1);
} 
```

有关处理此问题的最佳实践的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:38:54.273

`ResourceBundle`要删除引号，请使用您自己的覆盖扩展名加载属性文件`handleGetObject`。

也可以看看：

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) [http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)

# intellij-idea - intellij 是否可以像在 Eclipse 中一样组织导入？

> ID：14716283
> 
> 赞同：202
> 
> 时间：2013-02-05T20:26:59.990
> 
> 标签：intellij-idea

我正在开发一个项目，所有团队成员都在使用 Eclipse，而我是唯一的 IDEA 用户。这会从进口重排中产生很多噪音。eclipse 导入的顺序是：Java、Javax、Org、Com，其他所有内容按字母顺序排列。是否可以将 IDEA 配置为遵循这些规则？

* * *

## 回答 #1

> 赞同：376
> 
> 时间：2013-06-19T15:15:17.137

更多细节：我最终执行了这些步骤来匹配开箱即用的日食组织：

（在`Settings`> `Editor`> `Code Style`> `Java`>`imports`中，正如@yole 所提到的）

*   将“class count to use import with '*'”设置为 99（好像你不能关闭它）

*   设置此顺序`Import Layout`（如 Eclipse 默认值）：

    ```
     static all other, 
      blank, 
      java.*, 
      blank, 
      javax.*, 
      blank, 
      org.*, 
      blank, 
      com.*, 
      blank, 
      all other imports 
    ```

FWIW，有一个名为“ [eclipse code formatter](https://code.google.com/p/eclipse-code-formatter-intellij-plugin/wiki/HowTo) ”的 Intellij 插件，我为此目的进行了评估并最终丢弃，因为它设置了一个单独的快捷方式（在 OSX 中），该快捷方式已经被核心 IDE 功能使用。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-05T20:36:28.917

设置 | 编辑 | 代码风格 | 爪哇 | 进口 | 导入布局

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-09T09:07:13.807

最好的方法是使用[Eclipse Code Formatter](https://plugins.jetbrains.com/plugin/6546)插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T10:18:00.663

在更新 Max 的答案时，解决`checkstyle`警告的正确顺序。我在 IntelliJ 中更新了以下内容：

```
static all other, 
blank 
com.*
java.* 
javax.*
org.*  
all other imports 
```

# css - css帮助：只有webkit渲染li子弹，应该隐藏

> ID：14716286
> 
> 赞同：0
> 
> 时间：2013-02-05T19:44:50.203
> 
> 标签：css

[http://horizo​​n.hoffmangraphics.com/products/international-products/](http://horizon.hoffmangraphics.com/products/international-products/)

在 chrome/safari 中，产品标题旁边可以看到方形项目符号，并且对齐方式不正确。

Firefox & EVEN IE，布局看起来正确。向 h5 添加填充可以修复产品图像和标题的对齐，但会破坏工作浏览器中的布局。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:41:33.047

尝试：

```
#page-content ul li {
     list-style-type: none;
 } 
```

我在 chrome 的网络检查器中输入了这个并工作了！

但它打破了所有浏览器的布局。添加`padding-top: 24px;`似乎`h5`可以解决问题。

# php - $db->query($query) 和 $result->num_rows 之间的区别

> ID：14716296
> 
> 赞同：0
> 
> 时间：2013-02-05T20:27:29.490
> 
> 标签：php, object, mysqli

我是面向对象的 php 新手。我明白这条线是什么意思

```
$result = $db->query($query); 
```

这里 $db 是引用类 mysqli 实例的对象。正确的？

但是我不理解

```
$total_num_rows = $result->num_rows; 
```

和

```
while($row = $result->fetch_array()) 
```

我知道他们做什么。但是我无法理解为什么它是用 $result->... 写的

整个脚本：

```
<?php

$host = "localhost";
$username = "root";
$password = "";
$dbname = "compdb";

@ $db = new mysqli($host, $username, $password, $dbname);

if(mysqli_connect_errno())
{
    die("Connection could not be established");
}

$query = "SELECT company_id FROM company_basic_details WHERE company_name = 'ABC'";
$result = $db->query($query);

$total_num_rows = $result->num_rows;

echo "The Results Are : <br>";

while($row = $result->fetch_array())
{
    echo $row['company_id'];
} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-27T06:08:45.823

假设您是*OOP*（面向对象编程）的新手，我将尽我所能引导您完成。

当你得到`$db`它时，你已经得到了一个连接对象，你可以用它来调用实例方法。

表达式`$result = $db->query($query)`是指使用`$db`对象调用查询方法，然后传入`$query`上面创建的那个。所以`-> operator`表示在这种情况下调用方法的对象。

此语句现在创建一个`$result`用于`$total_num_rows = $result->num_rows;`. 此行使用`$result`对象并获取行数并将其存储在变量中`$total_num_rows`。如果您习惯于数组，这就像获取数组的长度一样。

在您谈到的那一行中`$row = $result->fetch_array()`，该`$result`对象用于调用将`fetch_array()`单行数据作为数组返回的方法，并将其存储在`$row`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:33:19.890

来自 $db 的查询正在传回一个包含您的结果的 mysqli_result 对象的实例，这就是您使用来自 $result 的方法而不是 $db 的原因。您的 $db 实例仅包含您的请求。

您可以查看此处以更好地了解正在传回的内容。[http://www.php.net/manual/en/class.mysqli-result.php](http://www.php.net/manual/en/class.mysqli-result.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:33:27.617

当您进行查询时，您将获得一个新对象作为响应（Mysqli_Result 的实例），假设没有查询错误将返回 false。

这个新对象代表您的查询结果。但不是数据库连接本身。它有一个属性`$result->num_rows`来获取结果集中的行数。`$result->fetch_array()`每次调用时都会返回一个新行（作为数组）（使用内部指针）。

# java - 无法解决错误。缺少 jar 文件？

> ID：14716299
> 
> 赞同：0
> 
> 时间：2013-02-05T20:27:49.460
> 
> 标签：java, hl7, hapi

```
import ca.uhn.hl7v2.DefaultHapiContext;
import ca.uhn.hl7v2.HapiContext; 
```

对于上述两行，我遇到了无法解决的错误。我不知道为什么，当我的项目中有所有 jar 文件时。我刚开始使用`hapi`api，所以我可能会遗漏一些很容易发现的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:01:59.990

您（打算）使用哪个版本的 HAPI？HapiContext 及其实现仅从 HAPI 2.1-beta1 开始可用。您的类路径中可能有较旧的 HAPI 版本。

# wordpress - 段落标签和 get_page_by_title()

> ID：14716301
> 
> 赞同：0
> 
> 时间：2013-02-05T20:27:53.120
> 
> 标签：wordpress, wordpress-theming

我正在使用`$page = get_page_by_title('$name');`来显示要显示的页面的竞赛。但是，当我使用 echo 时`$page->post_content;`，段落不会像在 wordpress 循环中使用时那样*包含*在 p 标记中。`the_content()`有没有办法解决这个问题或更好的方法来获取将具有标签的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:27:37.683

的值`post_content`与用户在帖子编辑器中输入的未格式化输入相同。为了获得格式化的输出，您必须应用适当的过滤器。

```
echo apply_filters('the_content', $page->post_content); 
```

这应该将适当的输出过滤器应用于该`post_content`字段，并为您提供通常从`the_content()`.

# c# - 如何在 C# 中通用地实例化一个泛型类？

> ID：14716306
> 
> 赞同：1
> 
> 时间：2013-02-05T20:28:15.273
> 
> 标签：c#, generics, instantiation

也许它很简单，但我没有使用类型`Type`和它的用途。

假设我想`List<T>`用`T`=`Double`或`T`=创建一个`UInt32`，这取决于某些函数的结果，比如说`public static Type CheckType(String input);`

在代码中：

```
Type t = Program.CheckType(someInput); // it returns typeof(Double) or typeof(UInt32)
if (t == typeof(Double))
    List<Double> l = new List<Double>();
else
    List<UInt32> l = new List<UInt32>(); 
```

**我知道上面的代码不会编译**，因为我让它`l`有两种不同的含义（一个 double 列表和一个 unsigned int 列表）......所以它导致了**我的问题**：

*   有没有办法避免`if`上面的代码？

与此类似的东西：

```
Type t = Program.CheckType(someInput);
List<t> l = new List<t>(); // I know this won't compile either... 
```

我的意思是，这通常会实例化一个通用列表......

先感谢您！

**编辑：**

这不是[标记问题](https://stackoverflow.com/questions/612689/a-generic-list-of-anonymous-class)**的重复**，仅出于一个原因：并且不是匿名类型！这里的问题是**如何确定某些输入数据的类型**（例如，将是=或= ），从而**基于该输入数据类型****创建一个泛型**，！`Double``UInt32`**`Type T``typeof(Double)``Type T``typeof(UInt32)` **`SampleClass<T>` **`T`******

 ******换句话说：`Type T`在运行时确定一些，然后用确定的类型实例化一个泛型类型`T`。抱歉，如果我之前没有说清楚...

PS：我`List<T>`以`SampleClass<T>`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T20:37:39.143

您不能将列表键入为泛型，因为您不知道类型参数，但您可以在运行时创建 List 实例。

```
Type t = Program.CheckType(someInput);
Type listType = typeof(List<>).MakeGenericType(t);
IList list = (IList) Activator.CreateInstance(listType); 
```

如果你尝试添加一个不正确类型的对象，你会得到一个异常，所以这种方法比使用像这样的集合有优势`ArrayList`，或者`List<object>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:31:26.230

在这种情况下没有真正的理由使用泛型。由于泛型参数在编译时未知，编译器无法验证您尝试添加或删除的对象是否适合该列表。

如果可能的话，最好完全避免这种情况，可能通过使该代码本身具有通用性的方法。

如果这不可能，最好只使用非泛型`ArrayList`或 a `List<object>`，因为在这种情况下使用泛型列表会增加很多额外的工作而没有额外的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:37:14.537

[MakeGenricType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)可能有效

[使用反射设置 List<CustomClass> 类型的属性](https://stackoverflow.com/questions/315231/using-reflection-to-set-a-property-with-a-type-of-listcustomclass)

```
 Type type = Program.CheckType(someInput);
    IList list = (IList) Activator.CreateInstance(typeof(List<>).MakeGenericType(type));
    object obj = Activator.CreateInstance(type);
    list.Add(obj); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T20:37:33.530

```
Type t = Program.CheckType(someInput);
var l = (IList)Activator.CreateInstance(typeof(List<>).MakeGenericType(t)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T21:01:44.837

我会选择泛型`Histogram<T>`，但不会尝试将两种类型都保存在同一个变量中，除非您只想拥有一个`IDictionary`变量。

下面是一个使用带`double`类型的直方图的示例：

```
class Program
{

    static Random rnd=new Random();
    static void Main(string[] args)
    {
        Historgram<double> hist=new Historgram<double>();
        for(int i=0; i<1000; i++)
        {
            double x=Math.Round(rnd.NextDouble(), 1);
            hist.Add(x);
        }
        //double[] values=hist.Values;

        Console.WriteLine("Histogram");
        Console.WriteLine("{0,12} {1,12}", "Value", "Quantity");            
        for(int i=0; i<=10; i++)
        {
            double x=(i/10d);
            Console.WriteLine("{0,12} {1,12}", x, hist[x]);
        }
        Console.ReadLine();
    } 
```

结果

```
 Histogram
   Value     Quantity
       0           52
     0.1           97
     0.2          117
     0.3           98
     0.4           93
     0.5          110
     0.6           97
     0.7           94
     0.8           98
     0.9           93
       1           51 
```

和代码：

```
public class Historgram<T> 
{
    Dictionary<T, int> bins;
    public Historgram()
    {
        this.bins=new Dictionary<T, int>();
    }

    public void Add(T value)
    {
        if(bins.ContainsKey(value))
        {
            bins[value]++;
        }
        else
        {
            bins.Add(value, 1);
        }
    }
    public void Remove(T value)
    {
        if(bins.ContainsKey(value))
        {
            bins[value]--;
            if(bins[value]==0)
            {
                bins.Remove(value);
            }
        }
    }
    public int this[T x]
    {
        get
        {
            if(bins.ContainsKey(x))
            {
                return bins[x];
            }
            else
            {
                return 0;
            }
        }
        set
        {
            if(bins.ContainsKey(x))
            {
                bins[x]=value;
            }
            else
            {
                bins.Add(x, value);
            }
        }
    }
    public bool ContainsValue(T value) { return bins.ContainsKey(value); }
    public int Count { get { return bins.Count; } }
    public T[] Values { get { return bins.Keys.ToArray(); } }
    public int[] Quantities { get { return bins.Values.ToArray(); } }
} 
```******

# python - 从 Python 检查哪个 easy_install 版本可用？

> ID：14716314
> 
> 赞同：0
> 
> 时间：2013-02-05T20:28:39.897
> 
> 标签：python, setuptools, package-managers, distribute

有没有办法通过 Python 以编程方式检查用户是否有可用的 setuptools 的“easy_install”或“easy_install”的分发版本？

我想知道其中哪些是可用的（理想情况下哪些是系统“正在使用”的。）

如何才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:56:46.670

基于易于安装

```
>>> import pkg_resources
>>> pkg_resources.get_distribution('setuptools')
setuptools 0.6c11 (t:\tmp\easyinstall\lib\site-packages\setuptools-0.6c11-py2.7.egg)
>>> pkg_resources.get_distribution('setuptools').project_name
'setuptools' 
```

对于基于分布

```
>>> import pkg_resources
>>> pkg_resources.get_distribution('setuptools')
distribute 0.6.31 (t:\tmp\distribute\lib\site-packages\distribute-0.6.31-py2.7.egg)
>>> pkg_resources.get_distribution('setuptools').project_name
'distribute' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:57:37.647

使用包含的[`pkg_resources`库](https://pythonhosted.org/setuptools/pkg_resources.html)来检测是否`setuptools`可用，如果可用，它是什么版本。如果无法导入`pkg_resources`，则说明没有`setuptools`安装库，句号：

```
try:
    import pkg_resources
except ImportError:
    print "No setuptools installed for this Python version"
else:
    dist = pkg_resources.get_distribution('setuptools')
    print dist.project_name, dist.version 
```

项目名称是`distribute`or `setuptools`; 对我来说，这打印：

```
>>> import pkg_resources
>>> dist = pkg_resources.get_distribution('setuptools')
>>> print dist.project_name, dist.version
distribute 0.6.32 
```

有关可用信息的更多详细信息，请参阅[`Distribution`属性文档](https://pythonhosted.org/setuptools/pkg_resources.html#distribution-attributes)。

# vb.net - 如何禁用这两个警告？

> ID：14716315
> 
> 赞同：0
> 
> 时间：2013-02-05T20:28:46.147
> 
> 标签：vb.net

我正在开发一个应用程序，并且在编译时收到了四个过时的警告。它们无关紧要，我想压制它们。我知道我可以通过将警告 ID 添加到标签来做到这一点，但我不知道在哪里可以找到这些 ID？

警告是：

> *   未使用的局部变量
>     
>     
> *   由于从程序集“AxInterop.DHTMLEDLib”间接引用了该程序集，因此创建了对嵌入式互操作程序集“Microsoft.mshtml”的引用。考虑更改任一程序集上的“嵌入互操作类型”属性。（我真的不明白这个，如果有人可以解释它实际上是什么意思......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:21:46.450

`unused local variable`表示你声明

```
Dim unusedVariable as ClassX 
```

某处，从未说过

```
unusedVariable = AnInstanceOfClassX ' can be "nothing" 
```

如果你这样做

```
Dim unusedVariable as new ClassX() 
```

然后它将通过将其分配为 ClassX 的新实例来“使用”。只需弄清楚为什么要声明它而不是分配给它。这必须是您的电话，因为我看不到您的代码。

您可以通过转到项目下的解决方案资源管理器中的引用来删除`A reference was created to embedded interop assembly`警告（您必须在 VS 2012 中启用“显示所有文件”）。找到对属性的引用`DHTMLEDLib`，右键单击。在属性窗口中，将“嵌入互操作类型”更改为 true。

[您可以在此处](http://msdn.microsoft.com/en-us/library/dd409610.aspx)找到有关嵌入互操作类型的更多信息

编辑：另外，警告并不一定意味着有问题。在一定程度上学会忍受 Visual Studio 中的警告

# c++ - 模板函数类型推导和运算符<<

> ID：14716318
> 
> 赞同：14
> 
> 时间：2013-02-05T20:29:19.467
> 
> 标签：c++, c++11, visual-c++, reference, template-argument-deduction

**当我使用MSVC++**编译以下代码时，出现错误：

```
struct A
{
    template<typename T>
    void operator<<(T&& x)
    {
    }

};
void f()
{
}
int main()
{
    A().operator<<( f );  // ok
    A() << f;             // error

    return 0;
} 
```

**g++**和**clang**都可以很好地编译这段代码。AFAIK，' **ok** ' 和' **error** ' 行做同样的事情，类型**T**被推导出为**void(&)()**。还是允许对函数进行**void()和右值引用？**如果是这样，它们的含义是什么？像这样通过引用传递函数可以吗？是**MSVC++**错误，它无法编译“**错误**”行吗？顺便说一句，错误输出：

```
no operator found which takes a right-hand operand of type 'overloaded-function' (or there is no acceptable conversion)
could be 'void A::operator <<<void(void)>(T (__cdecl &&))'
with[ T=void (void) ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:50:10.837

为什么`void operator<<(T&& x)`？ `void operator<<(T& x)`达到目的。

可以使用`x()`内部重载函数调用函数，如下所示

```
struct A
{
    template<typename T>
    void operator<<(T& x)
    {
        x();
    }

};
void f()
{
}

int main()
{
    A().operator<<( f );
    A() << f;             
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:44:29.357

所以，回答我自己的问题：

提供的代码是有效的，虽然允许对函数进行右值引用（它们的行为与左值引用相同），但在模板推导期间，T 应变为 void(&)()。

MSVC 中的一个[错误](http://connect.microsoft.com/VisualStudio/feedback/details/778613)阻止了我的代码编译。

*更新*：该错误已在 Visual Studio 2013 编译器中修复

# triggers - 试图防止 SQL Developer (Oracle) 中的重复条目

> ID：14716319
> 
> 赞同：0
> 
> 时间：2013-02-05T20:29:22.353
> 
> 标签：triggers, oracle11g, oracle-sqldeveloper, duplicate-removal

我尝试创建一个触发器以防止在 SQL Developer (Oracle 11g XPRESS) 中插入重复条目，但它没有正确编译。你能帮我解释为什么，因为我看不到任何明显的语法错误。

```
CREATE OR REPLACE TRIGGER trig1

BEFORE INSERT ON table1

BEGIN 
  DECLARE CURSOR C1
  IS
    SELECT value1,value2 FROM inserted;

  DECLARE value11 number;
  DECLARE value22 number;
  OPEN C1;
  FETCH NEXT FROM C1 INTO @value11, @value22;

  WHILE FETCH_STATUS = 0
  LOOP
    IF NOT EXISTS (SELECT * FROM table1 WHERE value1 = @value11 AND value2 = @value22)
    THEN
        INSERT INTO table1 (value1,value2)
        VALUES
        (@value11, @value22);
    ELSE
        ROLLBACK TRANSACTION
        --DELETE FROM table1 WHERE value1 = @value11 AND value2 = @value22
        PRINT 'Cannot add duplicate entry.'
    END IF;
    FETCH NEXT FROM C1 INTO @value11, @value22;
  END LOOP; 
  CLOSE C1;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:37:37.000

触发器的大多数问题都归咎于您使用了错误的语法。这看起来像 MySQL 而不是 PL/SQL。我建议在继续之前阅读[文档](http://docs.oracle.com/cd/E11882_01/server.112/e25789/srvrside.htm#CNCPT118)并查看[一些示例](http://psoug.org/reference/table_trigger.html)。

说了这么多；你正在以错误的方式处理这一切。为了防止插入重复项，您*必须*在表上创建[唯一约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1642)。这是保证您阻止它们的唯一方法；试图在代码中解决它肯定会在某些时候失败。

您可以创建一个唯一约束内联​​，或者如果您的表已经存在，您可以创建一个唯一索引：

```
CREATE UNIQUE INDEX index_name
    ON table_name (column1, column2, ... column_n); 
```

或使用 ALTER TABLE 语句：

```
ALTER TABLE table_name
  add CONSTRAINT constraint_name UNIQUE (column1, column2, ... column_n); 
```

如果您要测试的列集是主键，则可以添加[主键约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CHDDBJBB)。

除了强制完整性，无论您的用户决定什么，启用唯一约束使您能够简单地插入数据并捕获错误。在插入之前无需查询表，这应该会加快您的应用程序。

# html - 带垫片/保险杠的动态宽度 div

> ID：14716321
> 
> 赞同：0
> 
> 时间：2013-02-05T20:29:27.953
> 
> 标签：html, css, dashboard, alignment

好吧，我已经尝试过一百万种不同的方法来实现这一点，但找不到一个好的方法。

我要做的就是在我的样式表中创建一个没有定义宽度的框，用作任意数量仪表板项目的模块容器，然后有 width25、width33、width50、width100 的类来设置模块容器的宽度25%、33% 等等……无论情况如何。

![在此处输入图像描述](../Images/5549c6c0416643586f34e6ff3149cef5.png)

在每个容器之间，我想要一个垫片或保险杠。假设我在一行中有三个盒子：25%、50%、25%。为了添加一个垫片，我必须将我的 width25 设置为 24%，将我的缓冲设置为 1%，并且尝试填充父容器的 100% 宽度时事情变得很奇怪。我说得有道理吗？

有一个更好的方法吗？当我向盒子添加填充时，我遇到了更多问题，因为这也增加了 div 的总宽度。我只想要这样漂亮干净的东西：

![在此处输入图像描述](../Images/a0b2ad870715aa5030c1efa3d29556a9.png)

...每个模块都有相同的类，除了宽度类。理想情况下，这些宽度将是 width25 = 25%...width50 = 50%...并且不会模糊宽度以弥补保险杠尺寸。

想法？这让我发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:39:45.257

好的，在我看来，您有大约 4 个选项。

1.  [box-sizing: border-box](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)
    - 这将改变宽度的计算方式，所以如果你说`width: 30%`并添加一个 2px 的边框，框保持 30%，并且边框呈现在你指定的宽度内；

2.  [calc()](https://developer.mozilla.org/en-US/docs/CSS/calc)
    - 这允许你做类似的事情`width: calc(20% - 2px);`

3.  [轮廓](https://developer.mozilla.org/en-US/docs/CSS/outline)
    - 轮廓围绕元素呈现，不影响其大小。这个可能不适合你。

4.  divs inside divs
    - 将外部 div 的宽度设置为您需要的间距，然后根据您的喜好设置内部 div 的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:33:17.940

看看这些网格系统。

[http://960.gs/](http://960.gs/)

[http://goldengridsystem.com/](http://goldengridsystem.com/)

[http://grids.heroku.com/](http://grids.heroku.com/)

还有很多。这些应该足以让您入门。

`example:` [http://jsfiddle.net/E9zfY/](http://jsfiddle.net/E9zfY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:33:59.910

听起来您想使用填充。这样，模块框让你的数学更合理，但你可以创造你的空间效果。

缺点：您会在内容区域本身中丢失 px 宽度和高度，但您的盒子模型数学并不是那么糟糕。

# magento - 在 indexController 完成后 Magento 发送自定义消息

> ID：14716323
> 
> 赞同：0
> 
> 时间：2013-02-05T20:29:36.973
> 
> 标签：magento, message

我有一个模块，它工作正常，并且 indexcontroller 可以处理我想要的所有事情。它以：`$this->_redirect('adminhtml/sales_order/');`

现在我的问题是：如何使用此重定向发送消息？所以屏幕顶部会显示“完整”消息？

我试过这个： $this->_redirect('adminhtml/sales_order/')->addSuccess("Done!"); 但这不起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:10:29.960

`addSuccess()`是会话模型的一种方法（从技术上讲，消息存储在会话中并在下一页检索）

所以你的代码必须是这样的：

```
Mage::getSingleton('adminhtml/session')->addSuccess('Done!');
$this->_redirect('adminhtml/sales_order'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:52:55.383

尝试这个

```
Mage::getSingleton('adminhtml/session')->addSuccess('Done....');
$this->_redirect('adminhtml/sales_order/') 
```

高温高压

# vba - 如果在 InputBox 中按下取消，则跳到下一步

> ID：14716324
> 
> 赞同：1
> 
> 时间：2013-02-05T20:29:36.533
> 
> 标签：vba, excel, inputbox

我目前正在运行一个带有 InputBox 代码的宏，如下所示：

```
ActiveCell.Value = InputBox(Prompt:="Please enter the sample name", Title:="Sample name") 
```

当我在 ActiveCell 中没有任何文本时，它非常有用，但如果那里已经有文本，如果我点击取消，它会清除文本。

我该如何更改它，以便如果我在这一步点击取消，那么它只会跳到下一步而不更改单元格中的内容？我不希望它结束​​ sub，我只想让它跳到代码中的下一行。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:32:15.073

这应该做的工作：

```
暗淡为字符串
s = InputBox(Prompt:="请输入样品名称", Title:="样品名称")
如果 s <>"" 那么 ActiveCell.Value = s

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T01:35:32.327

尝试这个：

```
Dim a As Variant
a = Application.InputBox(Prompt:="Please enter name", Title:="Sample name")
If a <> False Then
    ActiveCell.Value = a
End If 
```

# postgresql - 如何在 Heroku 中使用 pg:psql？

> ID：14716325
> 
> 赞同：36
> 
> 时间：2013-02-05T20:29:38.657
> 
> 标签：postgresql, heroku, ruby-on-rails-3.1

我正在尝试在 heroku 终端检测我的数据库，如下所示：

```
myapp@ubuntu:~/RubymineProjects/myapp$ heroku pg:info
The plugin heroku-sql-console has been deprecated. Would you like to remove it? (y/N) n
=== HEROKU_POSTGRESQL_JADE_URL (DATABASE_URL)
Plan:        Dev
Status:      available
Connections: 1
PG Version:  9.1.6
Created:     2012-10-10 19:59 UTC
Data Size:   9.1 MB
Tables:      32
Rows:        2802/10000 (In compliance)
Fork/Follow: Unsupported 
```

所以，我尝试了：

```
myapp@ubuntu:~/RubymineProjects/myapp$ heroku pg:psql
The plugin heroku-sql-console has been deprecated. Would you like to remove it? (y/N) n
psql (9.1.7, server 9.1.6)
SSL connection (cipher: **-**-****-**, bits: 256)
Type "help" for help. 
```

我需要列出所有用户记录：

```
dbfjinfaes61gb=> select * from users
dbfjinfaes61gb-> 
```

但在上面，什么也没发生，我在这里错过了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-05T20:31:23.067

您需要在查询末尾使用分号：

```
select * from users; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-03-24T01:51:03.573

运行这个

```
heroku pg:psql -c "command" --app "name-app" 
```

样本

```
heroku pg:psql -c "\?" --app app-sample 
```

# database-design - 哪种 MySQL 表类型用于在线图书馆和审查？

> ID：14716326
> 
> 赞同：0
> 
> 时间：2013-02-05T20:29:42.227
> 
> 标签：database-design, mysql

保存图书库和评论网站信息的 MySQL 数据库的最佳表类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:34:10.927

不确定表类型是什么意思，但如果您正在寻找示例模式，它可能是这样的：

```
users
id,first_name,last_name,username,password_hash,password_salt,email,...

books
id,...

reviews
id,book_id,user_id,... 
```

**编辑：**

有关InnoDB 与 MyISAM 的比较，请参见[此处](http://www.kavoir.com/2009/09/mysql-engines-innodb-vs-myisam-a-comparison-of-pros-and-cons.html)

# c# - 使用正则表达式从字符串中提取子字符串

> ID：14716333
> 
> 赞同：0
> 
> 时间：2013-02-05T20:30:11.793
> 
> 标签：c#, regex, string, string-formatting

我收集了进入系统的批号（例如 24132352454235000534），每个 20 个字符长。我想使用正则表达式从我的每个批号中提取从 7 到 15 的子字符串。

我想使用正则表达式的原因是，要求不是修改现有的 20 多个进程使用的代码，而是简单地将表达式添加到配置中，以便在正确的进程需要时应用它。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:34:15.537

只需使用积极的向后看：

```
(?<=\d{6})\d{8} 
```

在此处查看实际操作：[http ://regex101.com/r/eX5rZ9](http://regex101.com/r/eX5rZ9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:34:48.923

试试这个正则表达式：

```
(\d{6})(\d{9})(\d{5}) 
```

示例代码：

```
string strRegex = @"(\d{6})(\d{9})(\d{5})";
RegexOptions myRegexOptions = RegexOptions.Multiline | RegexOptions.Singleline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"24132352454235000534";
string strReplace = @"$2";  // corresponds to the 2nd group: (\d{9})

return myRegex.Replace(strTargetString, strReplace); 
```

最终字符串：

```
524542350 
```

# ios - `[NSThread isMainThread]` 总是返回 YES

> ID：14716334
> 
> 赞同：13
> 
> 时间：2013-02-05T20:30:18.303
> 
> 标签：ios, grand-central-dispatch

这段代码

```
dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
      NSLog(@"Main Thread? %d", [NSThread isMainThread]);
}); 
```

表明我在主线程中。即使这样做：

```
queue = dispatch_queue_create("nonMainQueue", NULL); 
```

仍然报告说我在主队列中。这似乎是[因为我正在使用`dispatch sync`.](https://stackoverflow.com/questions/13972048/dispatch-sync-always-scheduling-a-block-on-main-thread)

**这是否意味着我的代码与根本不使用 dispatch_sync 相同？**另外：如果 dispatch_sync 什么都不做，那么它有什么意义呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T20:50:19.507

因为队列不是线程，为了检查您是否在主“队列”上，您必须使用不同的代码，类似于以下内容：

```
if (dispatch_get_current_queue() == dispatch_get_main_queue()) {
   NSLog(@"On Main Thread!");
} 
```

请注意，`dispatch_get_current_queue`它已被弃用，并且可能会在以后的 iOS/Mac OS 版本中完全删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T20:46:04.697

这是记录在案的行为。作为一种优化，`dispatch_sync`如果可能，传递给的块将在当前线程上执行（几乎总是如此）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T20:39:56.550

我从 Apple 的[GCD 指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)中了解到，不能保证调度队列将在单独的线程上执行。GCD 将确定哪个线程，并在必要时创建一个新线程。

部分要点是现在您不必考虑线程。

唯一要记住的是，确保您正在更新主队列上的 UI 元素，例如：

```
// on background queue
dispatch_async( dispatch_get_main_queue(), ^(void){
    someLabel.text = @"My Text";
}); 
```

# javascript - 如何在 Three.js 中拖动场景

> ID：14716336
> 
> 赞同：0
> 
> 时间：2013-02-05T20:30:29.727
> 
> 标签：javascript, three.js, drag-and-drop, draggable, mousemove

当我向左或向右拖动鼠标时，我想拖动场景，不要旋转相机。

我试过了

```
camera.position.x = mouseX;  
camera.position.y = mouseY; 
```

但场景旋转

我尝试改变场景中的位置——场景旋转。

如何拖动场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:08:21.483

您可以尝试使用（定义相机后）

```
controls = new THREE.RollControls(camera);
controls.movementSpeed = 10;
controls.lookSpeed = 1;
controls.rollSpeed = 0;
controls.autoForward = false; 
```

在您的 html 中包含此内容后：

```
<script type="text/javascript" src="three.js/examples/js/controls/RollControls.js"></script> 
```

此外，您必须更改 onWindowResize 事件以添加

```
controls.handleResize(); 
```

以及要添加的 render() 函数

```
controls.update(clock.getDelta()); 
```

以及要添加的 init() 函数

```
clock = new THREE.Clock(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:58:04.063

这是我在[github](https://github.com/mrdoob/three.js/issues/1535)上得到的一个文件，它可能有用

```
 THREE.DragControls = function(_camera, _objects, _domElement) {

 if (_objects instanceof THREE.Scene) {

_objects = _objects.children;

 }

 var _projector = new THREE.Projector();

 var _mouse = new THREE.Vector3(),

    _offset = new THREE.Vector3();

var _selected;

_domElement.addEventListener('mousemove', onDocumentMouseMove, false);

_domElement.addEventListener('mousedown', onDocumentMouseDown, false);

_domElement.addEventListener('mouseup', onDocumentMouseUp, false);

function onDocumentMouseMove(event) {

  event.preventDefault();

   _mouse.x = (event.clientX / _domElement.width) * 2 - 1;

   _mouse.y = -(event.clientY / _domElement.height) * 2 + 1;

    var ray = _projector.pickingRay(_mouse, _camera);

    if (_selected) {

         var targetPos = ray.direction.clone().multiplyScalar(_selected.distance).addSelf(ray.origin);

         _selected.object.position.copy(targetPos.subSelf(_offset));

        return;

   }

    var intersects = ray.intersectObjects(_objects);

    if (intersects.length > 0) {

       _domElement.style.cursor = 'pointer';

    } else {

        _domElement.style.cursor = 'auto';

    }

  }

   function onDocumentMouseDown(event) {

     event.preventDefault();

     _mouse.x = (event.clientX / _domElement.width) * 2 - 1;

     _mouse.y = -(event.clientY / _domElement.height) * 2 + 1;

     var ray = _projector.pickingRay(_mouse, _camera);

     var intersects = ray.intersectObjects(_objects);

     if (intersects.length > 0) {

         _selected = intersects[0];

         _offset.copy(_selected.point).subSelf(_selected.object.position);

         _domElement.style.cursor = 'move';
   }        
  }

  function onDocumentMouseUp(event) {

     event.preventDefault();

     if (_selected) {

         _selected = null;

    }

     _domElement.style.cursor = 'auto';

 }

  } 
```

# c++ - 名称隐藏在构造函数初始化列表中

> ID：14716337
> 
> 赞同：3
> 
> 时间：2013-02-05T20:30:31.887
> 
> 标签：c++, constructor, initialization, this, name-hiding

我想修改构造函数以使用初始化列表，如下例所示：

```
class Foo
{
public:
   Foo(std::wstring bar);
private:
   std::wstring bar;
};

// VERSION 1:

Foo::Foo(std::wstring bar) {this->bar = bar}

// VERSION 2:

Foo::Foo(std::wstring bar) : this->bar(bar) {} // ERROR! 
```

不幸的是，我不能做第 2 版，因为您不能将`this`指针用于数据成员，因为（我猜）它们当时还不存在。那么，我该如何处理名称隐藏问题（即我的参数和我的数据成员具有相同的名称）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:32:26.003

你不需要。第一个`bar`将引用成员，第二个`bar`将引用参数：

```
Foo::Foo(std::wstring bar) : bar(bar) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:32:32.947

我会更改参数的名称，以便清楚哪个是哪个。

```
Foo::Foo(std::wstring b) : bar(b) {} 
```

请注意，您并非必须这样做，但您的代码的未来维护者可能会感谢您。

**备选方案：**

在 C++ 中，用特殊的命名约定来表示私有成员变量是很常见的，例如尾随下划线。这很好地解决了这个问题：

```
class Foo
{
public:
   Foo(std::wstring bar);
private:
   std::wstring bar_;
};

Foo::Foo(std::wstring bar) : bar_(bar) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:32:34.867

您实际上可以这样做：

```
Foo::Foo(std::wstring bar) : bar(bar) {} 
```

之后使用的所有初始化程序都`:`必须引用基类或某个成员。这意味着您的`bar`成员此时不会被隐藏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T20:34:37.067

编译器会知道该怎么做...只需删除这个->

# python - PyCrypto - 初始化向量如何工作？

> ID：14716338
> 
> 赞同：13
> 
> 时间：2013-02-05T20:30:35.570
> 
> 标签：python, python-3.x, pycrypto, initialization-vector

我试图了解 PyCrypto 如何在项目中使用，但我并不完全理解初始化向量 (IV) 的重要性。我发现在解码字符串时我可以使用错误的 IV，除了前 16 个字节（块大小）之外，我似乎仍然可以得到消息。只是使用错误或不理解某些东西吗？

这是一个示例代码来演示：

```
import Crypto
import Crypto.Random
from Crypto.Cipher import AES

def pad_data(data):
    if len(data) % 16 == 0:
        return data
    databytes = bytearray(data)
    padding_required = 15 - (len(databytes) % 16)
    databytes.extend(b'\x80')
    databytes.extend(b'\x00' * padding_required)
    return bytes(databytes)

def unpad_data(data):
    if not data:
        return data

    data = data.rstrip(b'\x00')
    if data[-1] == 128: # b'\x80'[0]:
        return data[:-1]
    else:
        return data

def generate_aes_key():
    rnd = Crypto.Random.OSRNG.posix.new().read(AES.block_size)
    return rnd

def encrypt(key, iv, data):
    aes = AES.new(key, AES.MODE_CBC, iv)
    data = pad_data(data)
    return aes.encrypt(data)

def decrypt(key, iv, data):
    aes = AES.new(key, AES.MODE_CBC, iv)
    data = aes.decrypt(data)
    return unpad_data(data)

def test_crypto ():
    key = generate_aes_key()
    iv = generate_aes_key() # get some random value for IV
    msg = b"This is some super secret message.  Please don't tell anyone about it or I'll have to shoot you."
    code = encrypt(key, iv, msg)

    iv = generate_aes_key() # change the IV to something random

    decoded = decrypt(key, iv, code)

    print(decoded)

if __name__ == '__main__':
    test_crypto() 
```

我正在使用 Python 3.3。

输出会因执行而异，但我得到如下信息：`b"1^,Kp}Vl\x85\x8426M\xd2b\x1aer secret message. Please don't tell anyone about it or I'll have to shoot you."`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T07:52:10.973

您看到的行为特定于 CBC 模式。使用 CBC，解密可以通过以下方式可视化（来自维基百科）：

![CBC解密](../Images/508bd18f642388c54501e1dcd8c49937.png)

您可以看到 IV 仅对明文的前 16 个字节有贡献。如果 IV 在传输到接收器的过程中损坏，CBC 仍将正确解密除第一个块之外的所有块。在 CBC 中，IV 的目的是使您能够使用相同的密钥加密相同的消息，并且每次仍然获得完全不同的密文（即使消息长度可能会泄露一些东西）。

其他模式不那么宽容。如果你弄错了 IV，整个消息在解密时就会出现乱码。以 CTR 模式为例，其中*nonce*的含义与*IV*几乎相同：

![点击率模式](../Images/eed168d399dfb28f3ae0763f74d23f21.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T04:34:03.667

PyCrypto 的开发人员从 NIST 中提取了 AES CBC 模式的规范：

[AES Mode_CBC](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.blockalgo-module.html#MODE_CBC) -> 参考[NIST 800-38a（密码模式操作的建议）](http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf)

从那开始，第 8 页：

5.3 初始化向量

除了明文之外，CBC、CFB 和 OFB 模式的加密过程的输入还包括一个称为初始化向量 (IV) 的数据块，表示为 IV。IV 用于消息加密的初始步骤和消息的相应解密。IV不必保密；但是，对于 CBC 和 CFB 模式，加密过程的任何特定执行的 IV 必须是不可预测的，并且对于 OFB 模式，**必须为每次执行加密过程使用唯一的 IV**。附录 C 中讨论了 IV 的生成。

* * *

需要记住的是，每次撰写消息时都需要使用随机 IV，这会为消息添加“盐”，从而使消息独一无二；**即使“盐”公开，如果 AES 加密密钥未知**，它也无助于破解加密。例如，如果您不使用随机 IV，则每条消息使用相同的 16 个字节，如果您重复自己的消息，那么您的消息在传输过程中看起来是一样的，并且您可能会受到频率和/或重放攻击。

随机 IV 与静态结果的测试：

```
def test_crypto ():
    print("Same IVs same key:")
    key = generate_aes_key()
    iv = b"1234567890123456"
    msg = b"This is some super secret message.  Please don't tell anyone about it or I'll have to shoot you."
    code = encrypt(key, iv, msg)
    print(code.encode('hex'))
    decoded = decrypt(key, iv, code)
    print(decoded)

    code = encrypt(key, iv, msg)
    print(code.encode('hex'))
    decoded = decrypt(key, iv, code)
    print(decoded)

    print("Different IVs same key:")
    iv = generate_aes_key()
    code = encrypt(key, iv, msg)
    print(code.encode('hex'))
    decoded = decrypt(key, iv, code)
    print(decoded)

    iv = generate_aes_key()
    code = encrypt(key, iv, msg)
    print(code.encode('hex'))
    decoded = decrypt(key, iv, code)
    print(decoded) 
```

希望这可以帮助！

# python - 如何找到两个特殊字符之间的字符串？

> ID：14716342
> 
> 赞同：11
> 
> 时间：2013-02-05T20:30:54.397
> 
> 标签：python, string, special-characters

例如，我需要两个方括号之间的所有内容。文件 1

```
[Home sapiens]
[Mus musculus 1]
[virus 1 [isolated from china]] 
```

所以考虑到上面的例子，我需要第一个和最后一个方括号之间的所有内容。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T20:32:44.113

您可以使用贪婪的正则表达式：

```
re.search(r'\[(.*)\]', your_string).group(1) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-05T20:42:05.380

正则表达式是最灵活的选择。

对于另一种方法，您可以尝试 string 的[partition](http://docs.python.org/2/library/stdtypes.html#str.partition)和[rpartition](http://docs.python.org/2/library/stdtypes.html#str.rpartition)方法：

```
>>> s = "[virus 1 [isolated from china]]"
>>> s.partition('[')[-1].rpartition(']')[0]
'virus 1 [isolated from china]' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T22:39:30.497

鉴于您的示例输入，看起来每一行都以括号开头和结尾。在这种情况下，忘记正则表达式，这是微不足道的：

```
for line in whatever:
    contents = line.strip()[1:-1] 
```

（`strip`如果您的行源将换行符留在其中，或者输入中的右括号后有不可见的空格，我已经添加了。如果没有必要，请忽略它。）

# graph - Neo4j：按总关系对大型结果集进行排序？

> ID：14716343
> 
> 赞同：0
> 
> 时间：2013-02-05T20:30:55.720
> 
> 标签：graph, lucene, neo4j

是否可以获取大量节点并按总关系对它们进行排序？或者换句话说，是否有可能从 neo4j 返回一个大的结果集，顶部连接的节点最多？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:12:22.723

你可以试试

```
START node=node(*) 
MATCH node-[rel]-() 
RETURN id(node) as id, count(rel) as count 
ORDER BY count DESC 
```

请参阅此示例数据库：[http ://console.neo4j.org/r/c3tfc3](http://console.neo4j.org/r/c3tfc3)

# iphone - 使用社交框架延迟 Facebook 帖子

> ID：14716350
> 
> 赞同：0
> 
> 时间：2013-02-05T20:31:27.197
> 
> 标签：iphone, objective-c, ios6, social-framework

我有一个项目使用 iOS 6 的社交框架发布到用户的 Facebook。突然之间，客户要求我在用户发布消息和实际发布消息之间实现延迟。墙贴是用户即将在学校上 1.5 小时课程的一种广告，客户担心如果用户让每个人都知道他们将要离开家几个小时，有人会闯入他们的房子。

好吧，无论如何，我已经对此进行了一段时间的研究，但我看不出有什么办法。社交框架会弹出一个控制器，其中包含墙上帖子的详细信息，用户可以在其中按下帖子按钮。问题是我无法访问此控制器，也找不到其他任何地方可以插入延迟。有没有人有任何想法或任何方式来操纵控制器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:54:41.260

您可以考虑使用`SLRequest`而不是 Apple 提供的内置共享表来发布状态。

看看这个[链接](https://stackoverflow.com/questions/12569124/using-slrequest-in-ios-6-with-facebook)发送帖子

这是[SLRequest的文档](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html)

# linux - libipq 性能问题

> ID：14716353
> 
> 赞同：3
> 
> 时间：2013-02-05T20:31:46.660
> 
> 标签：linux, performance, networking, iptables, packets

我正在制作一个在 Ubuntu 12.04 上运行的数据包过滤程序，它使用 libipq 作为将数据包复制到用户空间的库。libipq 的逻辑对我来说很好，我的问题是我注意到从使用 libipq 到不使用 libipq 对性能的影响很大。如果我删除为程序添加的 iptable 规则并让内核处理数据包，则速度为 50 MB/s。但是，当使用 libipq 并恢复我的 iptables 规则时，速度会下降到 1 MB/s（如果我幸运的话），通常是一半。

我想知道，我的 iptable 规则可能有问题吗？是否可以更有效地使用规则，或者 libipq 只是效率低下（或者我的代码，即使我没有做那么多）？这是我用来设置我的 iptable 规则的脚本：

```
#!/bin/sh
modprobe iptable_filter
modprobe ip_queue
iptables -A FORWARD -p icmp -j QUEUE
iptables -A FORWARD -p tcp -j QUEUE
iptables -A FORWARD -p udp-j QUEUE
iptables -A INPUT -p icmp -j QUEUE
iptables -A INPUT -p tcp -j QUEUE
iptables -A INPUT -p udp -j QUEUE 
```

除此之外，我的 iptable 规则是 Ubuntu 附带的默认设置。

注意：我的设置是针对两个不同子网上的客户端和服务器虚拟机，并使用我的 Ubuntu 虚拟机通过 NAT 和 ip 伪装桥接两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:58:35.473

# Libipq 已被弃用，取而代之的是较新的 libnetfilter_queue

# java - 对请求对象的行为感到困惑

> ID：14716356
> 
> 赞同：3
> 
> 时间：2013-02-05T20:31:55.497
> 
> 标签：java, jsp, servlets, scope

我一直在搞乱 servlet 和 JSP，但我对某些事情感到有些困惑：

1.  我制作了一个 servlet（控制器），它将请求分派给 JSP

2.  我在我的 servlet 中使用 setAttribute() 方法为请求对象设置了一些属性。

3.  我可以毫无问题地在 JSP 中访问请求对象的参数和属性
    。

4.  现在，我使用
    session.setAttribute("test", request) 将请求对象作为属性存储在会话对象中。

5.  我编写了第二个 JSP（
    当我单击特定按钮时，将通过 Javascript 从第一个 JSP 导航到它 - 通过使用 window.location 函数并将
    第二个 JSP 的地址作为值）

6.  在第二个 JSP 中，当我从会话对象中检索请求对象时，我从检索到的请求对象的
    所有属性中获得了一个空值。
7.  只有当我
    在我的第一个 JSP 中使用 request.getParameter() 方法至少检索了一次参数时，我才能访问检索到的请求对象的参数，
    否则它们在我的第二个 JSP 中返回 null。

我对这些东西真的很陌生，并且对这种行为感到困惑。为什么我的请求对象的属性被“删除”而参数保持不变（只要我在我的第一个 JSP 中访问了参数；这对我来说更令人困惑，因为它没有意义 IMO）

任何解释将不胜感激！提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:22:35.623

这只是一个有根据的猜测，但我认为问题在于您选择的容器中的请求对象可能对其参数很懒惰：当您向它询问参数时，它会到达一些外部上下文并提取所需的数据，在同时缓存它。

然而，奇怪行为的原因并不重要。这个问题应该通过**不在会话中保存请求来解决。**请求对象只是您当前请求的句柄，而不是数据存储本身。它可能正在使用下面的任何机制，因为我们知道属性可能存储在 threadlocals 中。绝对没有任何合同可以使请求充当任何类型的档案。例如：如果我向安全主体询问这样一个存储的请求，这意味着什么？我的意思是“本届会议的现任负责人”吗？我的意思是“创建请求时的委托人”吗？

**编辑：**

出于纯粹的好奇，我只是看了看 Tomcat 的实现（我不知道您使用的是哪个容器），发现它支持我的主张：不仅大部分数据是懒惰地收集的，而且请求对象也被回收了！因此，如果您尝试将其存储在会话中然后使用，您可能会发现您正在使用其他人的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T23:07:35.150

[Java EE 5](http://docs.oracle.com/javaee/5/tutorial/doc/bnafo.html#bnafp)中有*4 个*作用域。在[Java EE 6](http://docs.oracle.com/javaee/6/tutorial/doc/gjbbk.html)和[Java EE 7](http://docs.oracle.com/javaee/7/tutorial/doc/cdi-basic008.htm#GJBBK)中都有*5 个*作用域。最常用的是：

 **   *请求范围*
*   *会话范围*
*   *应用范围*（Web Context）

您可以通过设置适当的属性在上述所有范围内存储一些数据。

这是 Java EE API 文档中与**请求范围相关的**[ServletRequest.setAttribute(String, Object)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute(java.lang.String,%20java.lang.Object))方法的引用：

 **> ```
> void setAttribute(java.lang.String name,
>                   java.lang.Object o) 
> ```
> 
> 在此请求中存储一个属性。**在请求之间重置属性**。此方法最常与 RequestDispatcher 结合使用。
> ...

*因此，对于每个新请求，您在请求*中设置的先前属性都将丢失。在*请求*中设置属性后，您**必须**将请求转发到所需的页面。如果您重定向，这将是一个全新的请求，因此之前设置的属性将丢失。（如果您仍想使用重定向，请阅读：[Servlet Redirection to same page with error message](https://stackoverflow.com/a/14638621/814702)）

[在HttpSession](http://docs.oracle.com/javaee/6/api/index.html?javax/servlet/http/HttpServletRequest.html)（在**会话范围内**）中设置的那些属性将与会话存在一样长，当然，只有会话所属的用户才能使用。

至于上下文属性，它们意味着对整个 Web 应用程序（**应用程序范围**）和所有用户都可用，而且只要 Web 应用程序存在，它们就会存在。

* * *

总而言之，如果您之前在会话中设置了一个属性，*只要*会话处于活动状态，同一用户就可以使用该属性。

希望这会帮助你。

**PS**
也许这篇文章对你也有用：[Java EE 6 Scopes 如何影响用户交互](http://www.devx.com/Java/Article/47975)
本文唯一使用*Annotations*进行范围界定的事情，但你会明白的。***

# sql - 从 Oracle 中的搜索中删除第二项

> ID：14716357
> 
> 赞同：0
> 
> 时间：2013-02-05T20:32:03.587
> 
> 标签：sql, oracle

我的一个朋友在测试中发现了这一点，我对此感到困惑。不使用游标，也不区分，既不子选择，可以删除看起来像这样的表中的第二个**代码“2” ？***（最好用一个语句）*

```
code  |  Name
--------------
   1  |  Name1
   2  |  Name2
   3  |  Name3
   1  |  Name1
   1  |  Name1
   2  |  Name2     <----delete this field
   3  |  Name3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:03:46.880

查看结果集，您可能会指着某物说“第二行”，但从技术上讲，没有这样的“保证”第二行。您需要能够按特定顺序（通常按要求）对结果集进行排序，然后确定第二行。

所以，像这样的问题，反而会有一个明确的答案。

***当数据按名称升序排序时，***从表中删除第二个“代码 2” 。（即使在这种情况下，当有多个代码为 2 且名称相同的行时该怎么办也存在问题）

--标识要删除的行。

```
select rowid from (
  select rowid, 
         rank () over (order by name asc) rnk --or dense_rank 
                                              --depending on requirement
  from   test_table
  where  code = 2
)where rnk = 2 
```

--删除行，使用选定的rowid。

```
delete from test_table
where rowid in (
 <query above..>
}; 
```

# sql - 在一个物理数据库中存储多个逻辑数据库

> ID：14716358
> 
> 赞同：1
> 
> 时间：2013-02-05T20:32:08.770
> 
> 标签：sql, sql-server, database

我想设计一个具有 4 个默认表的云业务解决方案，用户可以添加自定义字段（列？）或添加自定义对象（表？）。

我的第一个想法是为每个帐户创建一个新数据库，但是 sql server 实例上的数据库数量有限制，

第二种解决方案：通过为每个模式复制 4 个默认表来为每个帐户创建一个新模式。

第三种解决方案：创建 4 个具有判别列 (ACCOUNT_ID) 的唯一表，如果用户想要一个新字段，则添加一个专用于该 ACCOUNT_ID 的连接表，如果他想要一个新对象，则创建一个新表。

你觉得呢？你有没有什么想法？有谁知道现有的云解决方案如何存储数据？（例如销售人员）

顺便说一句，我不想​​为每个帐户创建一个 VM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:24:32.063

谢谢大家的建议，这对我帮助很大，尤其是约翰建议的微软文章。

由于帐户之间共享的架构点很少（4 个默认表只是对用户的建议，我希望完全自定义），我选择了没有 EAV 模式的每个帐户设计的架构。

# backbone.js - 将主干更改事件绑定到集合中模型的属性

> ID：14716359
> 
> 赞同：8
> 
> 时间：2013-02-05T20:32:09.437
> 
> 标签：backbone.js, backbone-events

我的观点`collection`如下：

```
MyView = Backbone.View.extend({
    initialize: function() {
       this.collection.on("change://an attribute of a model in aCollectionToRender", someAction);
    }
});

var MyViewInstance = new MyView({
    collection: aCollectionToRender
}); 
```

基本上，我不`MyView`想听整个集合的变化，只听集合包含的模型的单个属性。

我意识到有很多替代方案：

1.  为每个模型创建视图`aCollectionToRender`并在这些视图中附加`.on("change")`事件。我不想这样做，因为我的情况不适合这样做
2.  只需有一个`this.collection.on("change")`事件并根据我的要求使用事件处理程序过滤器。这不太优雅，如果 Backbone 已经允许我按照我上面的要求编写事件过滤器，这是重复的代码

我只是想知道是否有任何方法可以编写一个已经进行过滤的事件侦听器。这个问题也可能是重复的；我看了，但我没有找到完全一样的东西，但是，有很多 Backbone 问题

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T20:41:53.440

也许我误解了你的问题，但你可以做你所展示的。查看[Backbone 文档](http://backbonejs.org/#Collection)。

```
MyView = Backbone.View.extend({
    initialize: function() {
       this.collection.on("change:attributeName", this.someAction /*function to call*/, this);
    },
    someAction: function(model, value, options){
    }
}); 
```

# actionscript-3 - 空中应用程序的文件类型关联

> ID：14716362
> 
> 赞同：1
> 
> 时间：2013-02-05T20:32:25.650
> 
> 标签：actionscript-3, apache-flex, air

我正在创建一个空中应用程序，当文件被放入应用程序图标时，它会显示文件的路径。在 Windows 中效果很好，但在 Mac 中，应用程序图标不接受任何要放在上面的文件。因此，为了进行测试，我使用应用程序描述符向应用程序注册了一个 .txt 文件

```
 <!-- The name that the system displays for the registered file type. Required. -->
        <name>myAIREditor.Text</name>

        <!-- The extension to register. Required. -->
        <extension>txt</extension>

        <!-- The description of the file type. Optional. -->
        <description>myAIREditor text description file</description>

        <!-- The MIME content type. -->
        <contentType>text/plain</contentType>

        <!-- The icon to display for the file type. Optional. -->
        <!-- <icon>
            <image16x16></image16x16>
            <image32x32></image32x32>
            <image48x48></image48x48>
            <image128x128></image128x128>
        </icon> -->

    </fileType> 
```

唉，文本文件可以放在应用程序图标上并显示路径。现在我必须为所有 100 亿个文件类型执行此操作吗？

有没有办法让我的应用程序接受任何类型的文件，无论扩展名是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:01:35.073

如果不说您是如何准确地拖放/拖放，那么就不可能提供帮助。

尝试查看[这个有用的文档](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7d83.html)，看看它是否适用于您的情况。

# iis - IIS 6 日志中这些奇怪的条目是什么

> ID：14716365
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:32:27.790
> 
> 标签：iis, logging

IIS 日志充满了这样的条目：

```
2013-02-04 20:51:07 31.223.20.153 11435 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:07 78.178.55.210 53836 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:07 86.149.201.150 57616 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:17 86.149.201.150 57600 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:17 72.188.100.193 2480 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:17 65.12.233.165 50176 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:57 135.245.10.6 30739 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:57 135.245.10.6 30906 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:57 135.245.10.6 30905 192.168.1.69 80 - - - - - Timer_ConnectionIdle -
2013-02-04 20:51:57 135.245.10.6 30951 192.168.1.69 80 - - - - - Timer_ConnectionIdle - 
```

这些是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:35:51.493

[从这个博客](http://blogs.msdn.com/b/webtransports/archive/2004/07/15/184336.aspx)复制

> Timer_ConnectionIdle，发生在正常的 HTTP 协议使用中，客户端决定不与服务器断开连接，因为它很有可能在加载页面的过程中对服务器有另一个请求，或者因为客户端可能会单击将返回到同一服务器的网页上的链接。默认情况下，服务器将在 2 分钟不活动后关闭连接并回收这些资源。这没什么好担心的，它只是一种信息类型的条目

根据反馈，在 Win2k8、IIS7 设置中未观察到这些日志条目。

# javascript - Highchart 实时数据仪表

> ID：14716373
> 
> 赞同：2
> 
> 时间：2013-02-05T20:32:45.243
> 
> 标签：javascript, highcharts

我的仪表的实时数据似乎有问题，它一直停留在 80 上。
代码在这里：[http ://pastebin.com/bysshBE0](http://pastebin.com/bysshBE0)

这是我的 JSON 数组：

> {“HumOut”：90，“BatteryStatus”：0，“TempIn”：21.27777777777778，“RainYear”：2.8，“HumIn”：28，“WindDir”：258，“WindSpeed”：0.0，“RainStorm”：0.0，“ StormStartDate”：“2127-15-31”，“BatteryVolts”：4.751953125，“Pressure”：990.3826616999661，“ForecastIcon”：2，“SunSet”：“16:21”，“ForecastRuleNo”：122，“BarTrend”：60 ，“RainMonth”：0.0，“RainDay”：0.0，“TempOut”：-1.7777777777777775，“WindSpeed10Min”：0.0，“SunRise”：“08:37”，“RainRate”：0.0}

怎么了，我在 Chrome 调试器中没有任何 javascript 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:08:31.567

```
function (chart) {
    setInterval(function() {
    $(function() {
    $.getJSON('livedata.php', function(data) {
        $.each(data, function(key,val) {
        if (key == 'WindSpeed')
        {
            newVal = val;
            var point = chart.series[0].points[0];
            point.update(newVal);
        }
        });
    });
    })
},3000)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:06:13.727

如果你得到 JSON，你不需要使用每个函数。

```
function (chart) {
        setInterval(function() {
            $.getJSON("livedata.json", function(data, textStatus) {

                  var point = chart.series[0].data[0],
                  newVal = data.WindSpeed;
                  point.update(newVal);
            });
    }, 3000);
    }); 
```

我使用 livedata.json 而不是 php 文件，因为我没有 php 文件，只有 json 形成您的帖子。

此外，不需要匿名函数（getJSON 上方的行）。

# html - HTML - 显示图像/图标/用户界面元素的语义方式？

> ID：14716374
> 
> 赞同：6
> 
> 时间：2013-02-05T20:32:55.450
> 
> 标签：html, semantics, semantic-markup, user-friendly

是否存在显示图片/图标的语义正确和不正确的方式？
我的意思是，将报纸文章的所有图片都包含为背景图片当然不是很友好，因为那样的话，屏幕阅读器无法读出`alt`文本，但是图标或用户界面元素呢？从面向语义的角度来看，将这些作为背景图像包含在内是否合理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T20:48:06.877

显示不同种类的图像有一些语义上正确和不正确的方式。

*   **普通图片**最好使用标准`<img>`标签，因为它们通常是网站的主要内容。这些应该有`alt`标签来通知用户内容的重要部分。
*   **图标**是一种图像，它不是您网站的主要内容，但它们也应该使用`<img>`标签显示，因为如果特定图标显示不正确，显示特定图标的作用对于可用性很重要。
*   **使网站美观且不是网站主要内容的不重要图片**应显示为背景，因为这样您就不会在`DOM`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:37:41.153

我认为您不应该将图标作为单独的元素包含在仅代表该图标的元素中；例如一个`img`或`i`。

相反，每个图标代表一个特定的功能——因此您应该使用可用于该功能的元素，例如锚点`a`或`button`. 这些元素中的每一个都应该有一个可以被屏幕阅读器和网络蜘蛛解析的非图形内容。然后，您可以通过为某些图形图标使用背景图像来美化这些元素。

对图标使用单独的标记是语义错误/错误。图标本身什么也不做。它只是为了记住底层元素的功能。但实际上，当您删除图标时，这些元素仍然存在。

所以是的，我总是将图标作为背景图像直接包含在元素或生成的伪元素中。

# jquery - 带有进度条的 Flex 滑块？

> ID：14716375
> 
> 赞同：1
> 
> 时间：2013-02-05T20:33:10.857
> 
> 标签：jquery, progress-bar, flexslider

我如何向我已经拥有的 flex-slider jQuery 添加进度条。

代码： [http ://codepen.io/aidenguinnip/pen/wrgqh](http://codepen.io/aidenguinnip/pen/wrgqh)

我想将深灰色线设置为与滑块交互的进度条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:43:04.603

使用这个 css 元素：

```
.progress_bar { 
       background: #3F3C38;
       height: 4px; 
       width: 30%;
       position: relative;
} 
```

基本上，您将收集当前滑块中的图片总数并将该数字除以 100。现在，每次滑块更改图片时，您都需要`css width of .progress_bar`将`%`

例子——你有十张图片

每滑动一张图片，宽度增加10%

这一切都可以通过自定义`jQuery`脚本来完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T10:09:51.960

有点晚了，但也许这可以帮助另一个搜索这种东西的人。

下面的代码为每张幻灯片创建一个可点击的进度条。因为我们需要 currentSlide 值，所以我们使用 flexsliders 'after' 函数来更改进度条。这意味着我们的 css 转换时间（4.7 秒）需要是幻灯片速度（5 秒）减去动画速度（0.3 秒）。

[编解码器： http](http://codepen.io/anon/pen/doRzog) ://codepen.io/anon/pen/doRzog

HTML：

```
<div class="slider">
  <ul class="slides">
    <li data-slide="0"><img src="http://placehold.it/250/333333/FFFFFFF" /></li>
    <li data-slide="1"><img src="http://placehold.it/250/999999/000000" /></li>
    <li data-slide="2"><img src="http://placehold.it/250/CCCCCC/123456" /></li>
  </ul>
  <div class="slides-timer">
    <div class="slide-timer" data-slide="0">
      <div class="slide-progress">
        <div class="slide-progress-active"></div>
      </div>
      <div class="slide-name">First slide</div>
    </div>
    <div class="slide-timer" data-slide="1">
      <div class="slide-progress">
        <div class="slide-progress-active"></div>
      </div>
      <div class="slide-name">Second slide</div>
    </div>
    <div class="slide-timer" data-slide="2">
      <div class="slide-progress">
        <div class="slide-progress-active"></div>
      </div>
      <div class="slide-name">Third slide</div>
    </div>
  </div>
</div> 
```

CSS

```
.slides-timer {
    position: absolute;
    bottom: 30px;
    left: 25%;
    width: 50%;
    text-align: center;
}

.slide-timer {
    float: left;
    margin: 0 1%;
    height: 25px;
    overflow: hidden;
    cursor: pointer;
}

.slide-progress {
    background-color: #c1c1c1;
    height: 1px;
    width: 100%;
}

.slide-progress-active {
    background-color: #373737;
    width: 0%;
    height: 100%;
}

.working .slide-progress-active {
    background-color: #373737;
    width: 100%;
    -webkit-transition: width 4.7s linear;
    transition: width 4.7s linear;
} 
```

JS

```
$('.slider').flexslider({
     controlNav: false,
     directionNav: false,
     pauseOnHover: false,
     pauseOnAction: false,
     start: function (slider) {
         changeTimer(slider);
     },
     after: function (slider) {
         changeTimer(slider);
     },
     slideshowSpeed: 5000,
     animationSpeed: 300
});

function changeTimer(slider) {
    $('.slide-timer').removeClass('working');
    $('.slide-timer[data-slide="' + slider.currentSlide + '"]').addClass('working');
}

$('.slide-timer').on('click', function () {
      $('.slider').flexslider(parseInt($(this).attr('data-slide')));
      $('.slider').flexslider("play");
}); 
```

希望这可以帮助！

# asp.net - 选中复选框然后单击提交时，如何将总计添加到标签？

> ID：14716380
> 
> 赞同：0
> 
> 时间：2013-02-05T20:33:21.777
> 
> 标签：asp.net

我有两个预先填充单选按钮的复选框。当我在复选框上选择“是”时，它会打开选​​中的单选按钮，该按钮被选中，文本为数字。我想知道如何在单击提交按钮时选择一个复选框并将其显示为总数，如果我选择并选中两个复选框，它必须将两个复选框单选按钮相加按钮编号并显示为总计，因此如果选中单个复选框，则显示单个总计结束，如果同时选中两个复选框，则将两个数字相加并在单击提交时在标签中显示总计。任何帮助都可以，我们将不胜感激谢谢

这是我的代码：

```
Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim number1 As Double
    Dim number2 As Double
    Dim answer As Double
    Dim total As Integer

    number1 = Double.Parse(RadioButton1.Text)
    number2 = Double.Parse(RadioButton2.Text)

    If CheckBox1.Checked = True Then
        answer = number1
        answerLbl.Text = answer.ToString()
    ElseIf CheckBox2.Checked = True Then
        answer = number2
        answerLbl.Text = answer.ToString()
    ElseIf CheckBox1.Checked = True And CheckBox2.Checked = True Then
        answerLbl.Text = total.ToString()
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:42:25.147

我希望这就是你的样子。

```
 If CheckBox1.Checked = True And CheckBox2.Checked = True Then   
    answerLbl.Text =( Double.Parse(RadioButton1.Text)+ Double.Parse(RadioButton2.Text)).ToString()

    ElseIf CheckBox2.Checked = True Then
    answerLbl.Text =RadioButton2.Text
    ElseIf CheckBox1.Checked = True Then
    answerLbl.Text = RadioButton1.Text
  End If

 End Sub 
```

# authorize.net - 使用 authorize.net 测试 REAL 信用卡号和 CVV

> ID：14716383
> 
> 赞同：1
> 
> 时间：2013-02-05T20:33:32.887
> 
> 标签：authorize.net

我的客户想使用真实的信用卡号和真实的 cvv 代码来测试他的应用程序。我们不想对卡片收费，但我们确实希望系统按照生产中的方式运行。也就是说，它应该验证 CC # 和 CVV 代码。有没有办法用 authorize.net 做到这一点？我们目前在[https://sandbox.authorize.net](https://sandbox.authorize.net)的沙箱中处于“实时模式” 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:36:29.293

不。如果没有在实时环境中实际处理它们，就无法使用真实卡片来执行此操作。[但是，您可以使用开发人员帐户](https://developer.authorize.net/testaccount/)测试您的集成，包括获取某些 CVV 响应。有关如何触发某些结果（即拒绝、CVV 不匹配等）的信息，请参阅[他们的社区论坛中的此线程。](http://community.developer.authorize.net/t5/Integration-and-Testing/Triggering-Specific-Transaction-Responses/td-p/4361)

# r - 在ggplot2中叠加多边形并使叠加透明

> ID：14716384
> 
> 赞同：3
> 
> 时间：2013-02-05T20:33:33.933
> 
> 标签：r, ggplot2, layer

我想用 ggplot 叠加几个多边形。叠加层的填充应该是透明的，但它们的边框应该是红色的。我只想看到第一个多边形的填充，所以我想使叠加层透明……但我不能让它们完全透明。不知何故，我会更容易将填充颜色定义为无填充......但我不知道该怎么做。有任何想法吗？

这是一些重现示例的代码：

```
 ids <- factor(c("1.1", "2.1", "1.2", "2.2", "1.3", "2.3"))

    values <- data.frame(
      id = ids,
      value = c(3, 3.1, 3.1, 3.2, 3.15, 3.5)
    )

    positions <- data.frame(
      id = rep(ids, each = 4),
      x = c(2, 1, 1.1, 2.2, 1, 0, 0.3, 1.1, 2.2, 1.1, 1.2, 2.5, 1.1, 0.3,
            0.5, 1.2, 2.5, 1.2, 1.3, 2.7, 1.2, 0.5, 0.6, 1.3),
      y = c(-0.5, 0, 1, 0.5, 0, 0.5, 1.5, 1, 0.5, 1, 2.1, 1.7, 1, 1.5,
            2.2, 2.1, 1.7, 2.1, 3.2, 2.8, 2.1, 2.2, 3.3, 3.2)
    )

    datapoly <- merge(values, positions, by=c("id"))

    p <- ggplot(datapoly, aes(x=x, y=y)) + geom_polygon(aes(fill=value, group=id))
    # overlay the same plot with red borders and transparent fill
    p <- p + geom_polygon(aes(group=id, alpha=1),colour="red",size=1.1)
    p 
```

![无覆盖](../Images/3da8acc8a6d5db1b2aec6a649f2b38fc.png) ![带覆盖层](../Images/149d467c4f4bb099985ad5a027013b95.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T20:49:11.320

如果您不想填写第二组`geom_polygon`，只需将 设置`fill`为`NA`。

```
ggplot(datapoly, aes(x=x, y=y)) + 
  geom_polygon(aes(fill=value, group=id)) +
  geom_polygon(aes(group=id), alpha=1,colour="red", fill=NA, size=1.1) 
```

![在此处输入图像描述](../Images/a74188198a7ff51136800226576db4af.png)

但是，在这种情况下，您不需要两次`geom_polygon`调用

```
ggplot(datapoly, aes(x=x, y=y)) + 
  geom_polygon(aes(fill=value, group=id), colour="red", size=1.1) 
```

# vba - Visual Basic 的变量参数列表？

> ID：14716385
> 
> 赞同：21
> 
> 时间：2013-02-05T20:33:36.583
> 
> 标签：vba, dll, variadic-functions

假设我有一个 DLL，它可以像这样导出带有可变参数列表的函数：

```
int myfunc(int arg1,...) 
```

这里“...”是未定义数量的附加参数。是否可以从 Visual Basic 应用程序中调用此类函数，或者 VB 是否锁定为具有固定参数的函数？

我只是要求避免会锁定 VB 程序员的设计问题......

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-05T20:39:27.773

在 VBA 中，函数可以传递未定义数量的参数，因此应该没有问题。

直接在 VBA 中，您将定义如下函数：

```
函数 SumAll(ParamArray var() As Variant) As Double
    将 i 调暗为整数
    将 tmp 调暗为 Double
    对于 i = LBound(var) 到 UBound(var)
        If IsNumeric(var(i)) Then tmp = tmp + var(i)
    下一个
    SumAll = tmp
结束功能

```

# windows - 任务栏中没有选项卡的QDialog

> ID：14716386
> 
> 赞同：3
> 
> 时间：2013-02-05T20:33:37.347
> 
> 标签：windows, qt, qdialog, qmessagebox

问题很简单。是否可以在任务栏中显示`QDialog`或`QMessageBox`不创建选项卡？我尝试使用 exec()、show()、更改模式的值，但选项卡始终处于打开状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:49:02.227

您需要为以下内容指定父窗口`QMessageBox`：

```
QApplication a(argc, argv);
qt_test_dialog w;
w.show();
// with additional button
// QMessageBox box(QMessageBox::Information, "Title", "Hello there!", QMessageBox::Ok);

// without additional button!
QMessageBox box(QMessageBox::Information, "Title", "Hello there!", QMessageBox::Ok, &w); 
```

或者简单地说：

```
QMessageBox box(&w);
box.setText("Hello");
box.exec(); 
```

请注意，父参数甚至可以为空`QWidget`：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    // plain wrong (you will not be able to exit application) - but it demonstrates 
    // the case
    QMessageBox box(new QWidget());
    box.setText("Hello");
    box.exec();
    return a.exec();
} 
```

# mongodb - 内存安全的 mongodb 任务

> ID：14716387
> 
> 赞同：1
> 
> 时间：2013-02-05T20:33:38.657
> 
> 标签：mongodb, memory, crash

在为 50GB 集合添加时间戳字段上的单个索引时，MongoDB 在 96GB 根服务器上的内存不足。

MongoDB 是否有任何选项可以在“安全模式”下运行查询或任务，例如不会过多地减少内存？它似乎非常敏感并且可能会崩溃，例如通过在非索引时间戳字段上运行一些带有 $lte/$gt 的查找查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:52:55.567

> 它似乎非常敏感，并且可能会崩溃，例如通过在非索引时间戳字段上运行一些带有 $lte/$gt 的查找查询。

杀死它的是 OOM 杀手，因为您的 mongod 实例正在将大量页面交换到 RAM 中。您可能有很多进程争夺 RAM。您可以指示 Linux 不要杀死 mongod 守护进程，如下所示：

```
sudo echo -17 > /proc/<process if of mongod>/oom_adj 
```

不幸的是，您无法控制 mongodb 使用多少内存。我建议查看[mongodb 上的背景索引文档](http://docs.mongodb.org/manual/core/indexes/#index-creation-background)。还有一些更有用的链接：

1.  [查看stackoverflow上的相关线程](https://stackoverflow.com/questions/4468873/how-to-release-the-caching-which-is-used-by-mongodb/4482465#4482465)
2.  [如何限制缓存大小？](http://docs.mongodb.org/manual/faq/fundamentals/#how-do-i-configure-the-cache-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:13:26.093

> 我无法控制它，但不应该有一个用于“安全”的 mongodb 配置设置，以确保一旦超过限制就释放 RAM？甚至可能在它阻塞其他进程或被 oom 杀手停止之前？

MongoDB 不使用自己的内存管理。相反，它使用操作系统的 LRU。操作系统正在大量分页文档，因为它使用了分配给的内存量`mongod`，也就是您的工作集大于您为 MongoDB 预留的 RAM 量，因为 MongoDB 正在交换页面错误，而不是所有数据（一个很好的分页参考：[http](http://en.wikipedia.org/wiki/Paging) ://en.wikipedia.org/wiki/Paging ）。

我强烈不建议在这种情况下限制 MongoDB，因为它会运行得更糟，但是，尤其是在 Linux 上，你实际上可以在你用来运行`ulimit`的`mongo`用户上使用：http `mongod`: [//docs.mongodb.org/manual/administration/ulimit /](http://docs.mongodb.org/manual/administration/ulimit/)

> MongoDB 是否有任何选项可以在“安全模式”下运行查询或任务，例如不会过多地减少内存？

并不真地。

> 它似乎非常敏感并且可能会崩溃，例如通过在非索引时间戳字段上运行一些带有 $lte/$gt 的查找查询。

当然，这不会导致 MongoDB 出现 OOM 异常，它可能表明某处存在内存泄漏：http: [//docs.mongodb.org/manual/administration/ulimit/](http://docs.mongodb.org/manual/administration/ulimit/)

> 如果在运行 MongoDB 的系统上限制常驻内存大小，则可能会导致操作系统在正常情况下终止 mongod 进程。不要设置此值。如果操作系统（即 Linux）杀死了你的 mongod，使用 OOM 杀手，检查 serverStatus 的输出并确保 MongoDB 没有泄漏内存。

# java - 如何改进我的代码？

> ID：14716388
> 
> 赞同：0
> 
> 时间：2013-02-05T20:33:38.970
> 
> 标签：java, performance

我昨天刚刚开始 Java 编程（所以不要期望太多）并且我已经编写了一些代码。我的代码按我希望的方式工作，但显然有问题，我只是想知道改进它的方法。我想我添加了不必要的东西。我正在练习使用课程和其他东西。

testing.java 文件包含：

```
import java.util.Scanner;

class testing {
    private static Scanner input_sn;
    private static Scanner input_fn;
    private static Scanner input_mem;

    public static void main(String[] args){

        String First_Name;
        String Second_Name;
        int members;
        int count;

        System.out.println("Members: ");
        input_mem = new Scanner(System.in);
        members = input_mem.nextInt();

        funcs funcsObj = new funcs();

        for (count = 0; count < members; count++)
        {
            System.out.println("What is the first name? ");
            input_fn = new Scanner(System.in);
            First_Name = input_fn.nextLine();

            System.out.println("What is the second name? ");
            input_sn = new Scanner(System.in);
            Second_Name = input_sn.nextLine();

            funcsObj.names( funcsObj.setFn(First_Name), funcsObj.setSn(Second_Name));
        }   
    }
} 
```

我的 funcs.java 文件包含：

```
public class funcs
{
    private String firstName;
    private String secondName;
    private static int members = 0;

    public String setFn(String fn)
    {
        firstName = fn;
        return fn;
    }

    public String setSn(String sn)
    {
        secondName = sn;
        return sn;
    }

    public void names(String fn, String sn)
    {
        firstName = fn;
        secondName = sn;
        members++;
        System.out.printf("%d\t%s\t%s\n", members, fn, sn);
    }
} 
```

我认为大部分问题都可以在 funcs.java 文件中找到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:38:32.840

类名应大写。例如：`ThisIsMyClassName`。字段名称应为驼峰式。例如：`thisIsAFieldName`。在 java 中，字段名称不使用下划线。您应该将左大括号与语句放在同一行。EG：`if ... {`您可以在 java 样式指南中阅读有关这些详细信息的更多信息：

[http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

# javascript - jQuery：找不到文档准备好的元素

> ID：14716391
> 
> 赞同：-3
> 
> 时间：2013-02-05T20:33:44.153
> 
> 标签：javascript, jquery, ajax

我遇到了一个奇怪的 Javascript 行为：

**索引.html**

```
<div id="content">
    <button type="button" onclick="goDownload()">Click</button>
</div> 
```

**你好.html**

```
<div id="myId">
</div>

<script type="text/javascript">
    $(function() {
        doStuff();
    });
</script> 
```

**文件.js**

```
function goDownload() {
    $.ajax({
        url: "hello.html",
        cache: false,
        success: function (response) {
            $("#content").append(response);
        }
    });        
}

function doStuff() {
    //If I wait a little bit (e.g alert/timer), the below works
    //otherwise it does not

    $("#myId").html("Hello from doStuff()");
} 
```

我知道 ajax 调用是一个异步请求，但我看不出这在什么时候会成为一个问题。（我知道我可以在成功回调中执行我的 doStuff() ，但对我来说并非如此）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:41:15.137

调用的结果`$.ajax`是一个 Deferred 对象 ( [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/) )，因此您可以利用它的方法来检测它何时完成：

```
var downloadWaiting;

function goDownload() {
    downloadWaiting = $.ajax({
        url: "hello.html",
        cache: false,
        success: function (response) {
            $("#content").append(response);
        }
    });
}

function doStuff() {
    downloadWaiting.done(function () {
        $("#myId").html("Hello from doStuff()");
    });
} 
```

# php - Bootstrap：手风琴内的手风琴，显示动态内容

> ID：14716395
> 
> 赞同：4
> 
> 时间：2013-02-05T20:34:01.327
> 
> 标签：php, javascript, jquery, twitter-bootstrap

我无法让我的引导手风琴工作。内容都是动态生成的，我希望手风琴嵌套在顶级父手风琴内 - 这是标记：

```
...
foreach($xml->Continent as $continent) {
   echo "<div class='accordion-group'><div class='accordion-header'><a class='accordion-toggle' data-toggle='collapse'>".$continent['Name']."</a><span>".$continent['Status']."</span></div>";
    foreach($continent->Country as $country) {
       echo "<div class='accordion-body collapse in'><div class='accordion-inner'><div class='accordion-group'><div class='accordion-header'><a class='accordion-toggle' data-toggle='collapse'>".$country['Name']."</a><span>".$country['Status']."</span></div>";
       foreach($country->City as $city) {
         echo "<div class='accordion-body collapse in'><div class='accordion-inner'>".$city['Name']."<span>".$city['Status']."</span></div></div>";
       }
       echo "</div></div></div>";
    }
    echo "</div>";
}
echo "</div>";
... 
```

基本上.. 大陆都应该在默认状态下折叠。但是一旦你点击并展开一个大陆，它就会在里面列出国家。这些国家也应该扩展到显示城市，并停在那里。

我之前遇到过一种不同的方法，但它是非常脆弱的代码，并且很大程度上依赖于标记，如果我的内容是动态生成的并且内容可以从 1 到多个不等，我认为这不是一个好方法。我真的只需要折叠功能才能工作，如果这意味着创建一个分配特定 ID 的脚本，那么它也可以工作 - 我只是好奇最好的方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:59:41.783

好的...问题如下：

*   缺少`data-parent`属性 - 例如`data-parent="#accordion2"`
*   缺少`href`属性 - 例如`href="#collapseOne"`
*   缺少`id` 属性 - 例如`id="collapseOne"`

它可能不是 100% 完美，但是 [查看我的示例] 并查看[Twitter Bootstrap 的“折叠”文档](http://getbootstrap.com/2.3.2/javascript.html#collapse)

*   附加说明：确保“in”类仅包含在城市中（例如`class='accordion-body collapse in'`）。这使得这些节点一直在扩展。排除您最初想要折叠的节点（大陆和国家）的“in”类。

# linux - Linux内核中的内存保护

> ID：14716399
> 
> 赞同：4
> 
> 时间：2013-02-05T20:34:09.690
> 
> 标签：linux, memory-management, linux-kernel, x86

当共享库映射到内存中时，Linux内核会为这个内存区域分配虚拟内存区域，并分别标记它们的权限。但是我们知道 x86 arch 中的页表项中没有可执行位。如果程序中有“call *edx”这样的调用指令来调用共享库中的函数，Linux内核如何知道目标地址是否可执行？如果 vma 列表中的权限不兼容，是否会导致一般保护错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:36:15.177

它不能。

在没有与读取权限不同的执行页面权限的架构（/操作模式）上，由于 MMU 检测到故障，内核将无法发现所谓的非法地址执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T19:06:55.950

你是对的，理论上内核可以根据内存区域对象的更细粒度的权限来决定，但是这样的决策过程必须在页面错误处理程序中，（我想）它会进行例行的内存访问非常贵。

相反，内核在 x86 上采用了这些简化规则：

*   读访问权总是意味着执行访问权
*   写访问权总是意味着读访问权

资料来源：了解 Linux 内核，第 1 版，第 205 页

# python - Python 将返回语句重定向到标准输出

> ID：14716413
> 
> 赞同：0
> 
> 时间：2013-02-05T20:34:50.267
> 
> 标签：python

我正在编写一个 Python 解释器，并希望将函数的返回值重定向到标准输出，例如交互模式下的 Python 解释器。在这种模式下，当用户调用一个函数时，它的返回值会打印在屏幕上。表达式也是如此。

例如

```
>>> foo()
'Foo return value'
>>> 2+4
6
>>> print('Hello!')
'Hello!' 
```

更改`sys.stdout`only 会影响`print`功能。如何将其他表达式重定向到标准输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:35:12.977

首先，交互模式不会*打印*任何调用函数的返回值。相反，它会打印用户输入的任何表达式的结果。如果这不是函数调用，它仍然会被打印。如果它有 3 个函数调用，它仍然会打印一个结果，而不是 3 行。等等。

因此，尝试将函数返回值重定向到标准输出是错误的做法。

交互式解释器的工作类似于这样：

```
line = raw_input(sys.ps1)
_ = eval(line)
if _ is not None:
    print repr(_) 
```

（您可能会注意到，您可以`sys.ps1`从交互式提示中更改以更改提示的外观，访问`_`以获取最后一个值等）

然而，这并不是它*真正*的作用。这也不是你自己应该做的事情。如果您尝试，您将不得不处理复杂性，例如将您自己的`globals`与用户的分开、处理语句和表达式、处理多行语句和表达式（做起来`raw_input(sys.ps2)`很容易，但您怎么知道什么*时候*做呢？ )，与`readline`and`rlcomplete`等进行适当的交互。

文档中有一个名为[Custom Python Interpreters](http://docs.python.org/3/library/custominterp.html)的部分解释了执行此操作的简单方法：

> 本章描述的模块允许编写类似于 Python 的交互式解释器的接口。如果你想要一个除了 Python 语言之外还支持一些特殊功能的 Python 解释器，你应该查看该`code`模块。

并且[`code`](http://docs.python.org/3/library/code.html)：

> ... 提供了在 Python 中实现 read-eval-print 循环的工具。包括两个类和便利功能，可用于构建提供交互式解释器提示的应用程序。

这个想法是你让 Python 完成所有困难的事情，直到你想要接管的任何级别，然后你只需在此之上编写部分。

您可能想查看 、 、 等的来源以[`IDLE`](http://hg.python.org/cpython/file/3.3/Lib/idlelib)获得[`ipython`](http://pypi.python.org/pypi/ipython)想法[`bpython`](http://pypi.python.org/pypi/bpython)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:36:57.920

而不是`exec()`用于运行用户输入，请尝试`eval()`：

```
retval = eval(user_input)
sys.stdout.write(repr(retval) + "\n") 
```

# api - 谷歌折线图单值

> ID：14716414
> 
> 赞同：0
> 
> 时间：2013-02-05T20:34:51.407
> 
> 标签：api, charts

我正在使用谷歌折线图 API，但是当只有一个数据时，它似乎无法正确呈现。这是网址。我的值应该在 X=50 和 Y=5.0 但点显示在 (0,5.0)：

[http://chart.apis.google.com/chart?chxl=0:|0|X|100|1:|0|Y|5.0&chxt=x,y&chs=560x240&cht=lxy&chco=5EB3FFFD&chds=0,100,0,5.0 &chd=t:50|5&chg=25,50&chls=2&chm=o,3366CC,0,-1,8,1](http://chart.apis.google.com/chart?chxl=0:|0|X|100|1:|0|Y|5.0&chxt=x,y&chs=560x240&cht=lxy&chco=5EB3FFFD&chds=0,100,0,5.0&chd=t:50|5&chg=25,50&chls=2&chm=o,3366CC,0,-1,8,1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:08:34.110

这显然是 Google Charts API 的一个错误，但我只是想出了一个解决方法。对于那些可能遇到相同问题的人，只需通过重复两次值来加倍您的单点：

在网址更改中：

chd=t:50|5（生成单点但在 (0,5) 位置 - 错误）

到：

chd=t:50,50|5,5（生成单点的正确放置 (50,5)

这是完整的网址：

[http://chart.apis.google.com/chart?chxl=0:|0|X|100|1:|0|Y|5.0&chxt=x,y&chs=560x240&cht=lxy&chco=5EB3FFFD&chds=0,100,0,5.0 &chd=t:50,50|5,5&chg=25,50&chls=2&chm=o,3366CC,0,-1,8,1](http://chart.apis.google.com/chart?chxl=0:|0|X|100|1:|0|Y|5.0&chxt=x,y&chs=560x240&cht=lxy&chco=5EB3FFFD&chds=0,100,0,5.0&chd=t:50,50|5,5&chg=25,50&chls=2&chm=o,3366CC,0,-1,8,1)

# iis - 如何提取 IIS 配置？

> ID：14716415
> 
> 赞同：0
> 
> 时间：2013-02-05T20:35:02.253
> 
> 标签：iis

我想从现有的 IIS 服务器中提取当前配置并将其传输到另一台服务器以配置 IIS。如果需要，我可能会增大一些与内存相关的参数。完成这项工作的最佳方法是什么？我是否应该查找 Metabase.xml 参数并编写一个 Mgmt API 包装器来提取每个参数的值？或者是否有更广泛的参数集我应该查找以提取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:38:51.917

我认为您可以使用`Web Farm`它，它允许您管理多个服务器的 IIS（以及更多）。

你可以在这里阅读： [http ://www.iis.net/downloads/microsoft/web-farm-framework](http://www.iis.net/downloads/microsoft/web-farm-framework)

# java - 在 struts 1.3 中如何从数据库中检索数据并使用 DAO 显示它

> ID：14716416
> 
> 赞同：1
> 
> 时间：2013-02-05T20:35:04.777
> 
> 标签：java, database, struts, dao, struts-1

* **M 新的struts。我正在制作简单的登录页面，通过从数据库中检索来显示用户名和密码。我正在使用 DAO。我有 LoginDAO.java、LoginAction.java 和 Displaydata.jsp 页面。***

> **LoginDAO.java**

```
 public boolean login(String user,String pass) throws SQLException
     {
         Connection con = getConnection();

         Statement st;
        try {
            st = con.createStatement();

                  st.executeQuery("select * from login where Username='" + user + "' and Password='" + pass + "'");

                return true;
            } catch (SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

         return false;

     } 
```

> **登录操作.java**

```
public class LoginAction extends Action

{

    public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    DynaValidatorForm rf= (DynaValidatorForm) form;

 String username = rf.get("username").toString();
 String password = rf.get("password").toString();
 HttpSession session=request.getSession();
 session.setAttribute("user", username);

 Login dao= new Login();

 if(dao.login(username,password))
 {
      System.out.println("GOT");
        return mapping.findForward("success");}
    else
        {System.out.println("NOT");
    return mapping.findForward("failure");
        }
}
} 
```

> 还有我在 Dislpaydata.jsp 中写什么来显示用户名和密码，不需要任何 java 代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:50:59.097

正确的。前段时间，我用 Struts 1.x 和 MySql 构建了一个应用程序，并带有登录功能。

### 登录动作

```
public ActionForward login( ... ) throws Exception {
    String forward;
    final String mail = PropertyUtils.getProperty(form, "mail");
    final String password = PropertyUtils.getProperty(form, "password");
    if (LoginService.getInstance().validate(mail, password)) {
        // Do something e.g. put name of user in session
        forward = SUCCESS;
    } else {
        forward = ERROR;
    }
    return mapping.findForward(forward);
} 
```

### 登录服务

```
public boolean validate(final String mail, final String password) 
                                                        throws ServiceException {
    try {
        final boolean valid;

        // Validate null and empty

        // Validate with DB
        final UserDAO dao = new UserDAO();
        final User user = dao.findByPk(mail);
        if (user == null) {
            valid = false;
        } else {
            if (password.equals(user.getPassword())) {
                valid = true;
            } else {
                valid = false;
            }
        }
        return valid;
    } catch (DAOException e) {
        throw new ServiceException("Error validating user and password.", e);
    }
} 
```

### 用户DAO

```
private static final String FIND_BY_PK_SQL 
                 = "SELECT mail, name, password, admin FROM user WHERE mail = ?";

public User findByPk(final String mail) throws DAOException {
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        conn = getConnection();
        ps = conn.prepareStatement(FIND_BY_PK_SQL);
        ps.setString(1, mail); // PK, NOT NULL
        rs = ps.executeQuery();
        if (rs.next()) {
            return fill(rs);
        }
        return null;
    } catch (final SQLException e) {
        throw new DAOException(e);
    } finally {
        // Close DB resources
    }
}

private User fill(final ResultSet rs) throws SQLException {
    final User user = new User();
    user.setMail(rs.getString("mail"));
    user.setName(rs.getString("name"));
    user.setPassword(rs.getString("password"));
    user.setAdmin(rs.getBoolean("admin"));
    return user;
} 
```

在我的情况下，我有一个`user`作为`mail`主键的表。有多种形式。

更多示例：

*   [构建登录应用程序](http://www.easywayserver.com/blog/building-a-login-application/)
*   [Struts 登录应用程序使用操作表单教程 | 数码地带](http://www.dzone.com/tutorials/java/struts/struts-example/struts-login-page-example-1.html)
*   [使用 Struts 创建电子邮件登录 Web 应用程序](http://r4r.co.in/java/struts/basic/tutorial/Example-6/)

* * *

例如，为了在数据库的会话范围内显示变量用户的名称：

### 登录动作

```
if (LoginService.getInstance().validate(mail, password)) {
    final HttpSession session = request.getSession();
    final User user = UserService.getInstance().getUser(mail);
    session.setAttribute("user", user);
    forward = SUCCESS;
} 
```

### 主页.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://struts.apache.org/tags-bean" prefix="bean"%>

Welcome,
<bean:write scope="session" name="user" property="name" filter="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T19:16:07.577

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Login Page</title>
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript"
	src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
</head>
<body bgcolor="#2EFEF7">
	<form action="action" method="post" id="formDemo" name="MyForm">

		<div id="header">
			<h2 style="color: red;">Training</h2>
		</div>
		<hr>
		<h3>Login</h3>
		<div id="center" style="padding-top: 50px; padding-bottom: 220px;">
			<table align="center">

				<tr>
					<th colspan="2"><h1 style="color: BLUE;">LOGIN</h1></th>
				</tr>

				<tr>
					<th colspan="2"><h5 id="error" style="color: red;"></h5></th>
				</tr>

				<tr>
					<td>UserID:</td>
					<td><input type="text" size="40" name="UserId" maxlength="8"></td>
				</tr>

				<tr>
					<td>Password:</td>
					<td><input type="text" size="40" name="Password" maxlength="8"></td>
				</tr>

				<tr>
					<td colspan="2" align="center"><input type="submit"
						value="Login"> <input type="button" id="reset"
						value="Clear"></td>
				</tr>

			</table>
		</div>
		<hr>

		<div id="footer">
			<label>Copy right@ 2000-2008 FUJINET, All Rights Reserved.</label>

		</div>
	</form>

	<script type="text/javascript">
	<!--
		// Form validation code will come here.

		function validate() {

			if (document.MyForm.UserId.value === ""
					|| document.MyForm.UserId.value === null) {
				document.getElementById("error").innerHTML = "Please insert userId";

				return false;
			}

			if (document.MyForm.Password.value === ""
					|| document.MyForm.Password.value === null) {
				document.getElementById("error").innerHTML = "Please insert password";

				return false;

			}
			return (true);
		}
		$("#reset").click(function(event) {
			document.MyForm.UserId.value = "";
			document.MyForm.Password.value = "";
			document.getElementById("error").innerHTML = "";
		});
		$("#formDemo").submit(function(event){
			return validate();
		});
	</script>
</body>
</html>
```

# c# - 使用 itextsharp 将 pdf 流式传输到用户的浏览器

> ID：14716425
> 
> 赞同：1
> 
> 时间：2013-02-05T20:35:24.763
> 
> 标签：c#, jquery, asp.net, ajax, itextsharp

我想在这里关注这篇文章：[http ://www.4guysfromrolla.com/articles/030911-1.aspx](http://www.4guysfromrolla.com/articles/030911-1.aspx)

我在 Services.asmx 中有这个方法：

```
[WebMethod]
public void CreatePdf()
{
    // Create a Document object
    var document = new Document(PageSize.A4, 50, 50, 25, 25);

    // Create a new PdfWriter object, specifying the output stream
    var output = new MemoryStream();
    var writer = PdfWriter.GetInstance(document, output);

    // Open the Document for writing
    document.Open();

    // Create a new Paragraph object with the text, "Hello, World!"
    var welcomeParagraph = new Paragraph("Hello, World!");

    // Add the Paragraph object to the document
    document.Add(welcomeParagraph);

    // Close the Document - this saves the document contents to the output stream
    document.Close();

    HttpContext.Current.Response.ContentType = "application/pdf";
    HttpContext.Current.Response.AddHeader("Content-Disposition",
        "attachment;filename=file.pdf");
    HttpContext.Current.Response.BinaryWrite(output.ToArray());        
} 
```

我页面上的这个 jQuery 代码：

```
$('a.download').click(function () {

    $.ajax({
        type: "POST",
        url: "/Services.asmx/CreatePdf",
        data: '{}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result) {
            alert(result.d);
        }
    });
}); 
```

这应该创建一个 pdf 并将其流式传输到用户的浏览器。

当我单击带有类的链接时`download`，我的 web 方法被点击并且代码运行。它只是不会将 pdf 流式传输到浏览器。

如果我查看 Firebug，它会以状态 200 发布到我的方法，然后我得到以下响应：

> %PDF-1.4 %���� 2 0 obj <>stream x�+�r �25P�04WI�2P�5��1���BҸ4>>>/Contents 2 0 R/Parent 3 0 R>> endobj 1 0 obj <> endobj 3 0 obj <> endobj 5 0 obj <> endobj 6 0 obj <> endobj xref 0 7 0000000000 65535 f 0000000304 00000 n 0000000015 00000 n 0000000392 00000 n 0000000147 00000 n 0000000443 00000 n 0000000488 00000 n trailer <<21ba8d519bb56a2d0ec514bcb9c47169>]>> %iText-5.3.5 startxref 646 %%EOF {"d":null}

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:47:05.577

马克 B 是正确的。您需要让您的服务器端代码响应 pdf 输出流。

因此，将您的下载链接指向一个新文件，例如 PDFDownload.aspx，并将 CreatePdf 函数中的代码放在 PDFDownload.aspx.cs 的 PageLoad 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:01:51.263

使用 xmlhttprequest 时，您似乎无法接收二进制数据。（这就是 jquery 所做的）。当你做`form post`一个标准`a href link`

它应该工作。因为那时响应类型由浏览器处理......

确保像您一样在服务器上设置匹配的标头...

```
contentDisposition = "attachment=\"" name "";
contentType = "application/pdf"; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T20:54:39.873

好吧，我这样做，那样：

页面 aspx.cs 中的方法

```
 [WebMethod()]
    public static string CreatePdf()
    {

        System.IO.MemoryStream ms = new System.IO.MemoryStream();
        iTextSharp.text.Document doc = new iTextSharp.text.Document(iTextSharp.text.PageSize.A4, 30f, 30f, 30f, 30f);
        iTextSharp.text.pdf.PdfWriter writer = iTextSharp.text.pdf.PdfWriter.GetInstance(doc, ms);

        doc.Open();
        doc.Add(new iTextSharp.text.Chunk("hello world"));
        doc.Close(); 
        // convert ms to byte and Base64
        return System.Convert.ToBase64String(ms.ToArray());

    } 
```

函数 jQuery

```
$("#createPdf").click(function () {
        //call ajax
        $.ajax({ 
            url: "main.aspx/CreatePdf",
            data: '{}',
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                //pdf
                var downloadpdf = $('<a id="downloadpdf" download="file.pdf" href="data:application/pdf;base64,' + result.d + '" >');
                $('body').append(downloadpdf);
                document.getElementById("downloadpdf").click();
                $("#downloadpdf").remove();
            },
            error: function (req, status, error) {
                alert(error);
            }
        }); 
    }); 
```

我希望它可以帮助某人！

# algorithm - 位图，检查正交路径是否闭合

> ID：14716427
> 
> 赞同：3
> 
> 时间：2013-02-05T20:35:30.793
> 
> 标签：algorithm, graphics, 2d

给出了一个二维位数组。

```
var map1 = [[0,0,0,0,0,0,0,0],
            [0,0,0,0,1,0,0,0],
            [0,0,1,1,1,1,1,0],
            [0,0,1,0,0,0,1,0],
            [0,0,1,1,0,0,1,0],
            [0,0,1,0,0,0,1,0],
            [0,0,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0]]; 
```

我如何以编程方式检查某些“那些”是否正在形成封闭路径？

[http://jsfiddle.net/RvN3k/](http://jsfiddle.net/RvN3k/)

左边的两个位图包含封闭路径，上面的很明显，下面的只是一个封闭的路径，里面什么都没有。

两个右位图不包含闭合路径，在上例中缺少一位，在下例中，一个对角线像素不计算在内，仅正交路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:47:53.297

找到一个包含 1 的单元格，然后从那里“泛滥”。我的意思是：使用第二张地图，最初都设置为 0。当你遇到第一个 1 时，将第二张地图中的单元格设置为 1。现在检查所有相邻的单元格，如果这样，将第二张地图中的单元格设置为 1在原始地图中也是1。一旦你尝试设置一个已经是1的单元格，你就知道你遇到了一个封闭的路径；不要再次检查该单元格，否则您将进入无限循环。

编辑：如果您想要通过封闭路径连接到一个单元格的所有单元格的完整列表，请将您在“洪水”期间遇到的每个单元格添加到最初仅包含起始单元格的列表中。如果在某个时候您没有找到另一个单元格来淹没，则没有封闭的路径，您可以丢弃列表。根据您是否希望链接位图中的小“存根”被视为路径的一部分，您必须进行一些分支，为每个分支引入新列表，如果它们相交则合并它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:50:27.983

我已经分叉了你的小提琴并添加了一个方法 findCycle()。

```
var fill = function(map, x, y) {
    if (Math.min(x,y) >= 0 && Math.max(x,y) < mapSize && map[x][y] == 0) {
        map[x][y] = -1;
        for (var dx = -1; dx <=1; dx +=1) {
            for (var dy=-1; dy<=1; dy += 1) {
                fill(map, x+dx, y+dy);
            }
        }
    }
}

function detect(map) {
    for(var x = 0; x + 1 < mapSize; x++){
       for(var y = 0; y + 1 < mapSize; y++){
           if (map[x][y] == 0) {
               map[x][y] = -2;
               return;
           }
           else if (map[x][y]== 1 && map[x+1][y]==1 && map[x][y+1]== 1 && map[x+1][y+1]==1) {
               map[x][y] = -2;
               return;
           }
       }
    }
}

function findCycle(mapData) {
    for(var x = 0; x < mapSize; x++){
       for(var y = 0; y < mapSize; y++){
           if (mapData[x][y] == 0) {
               fill(mapData, x, y);
                detect(mapData);
               return;
           }
       }
    }
} 
```

它找到第一个 0。递归地用“-1”填充所有相邻的 0。然后搜索从初始 0 无法到达的任何仍然存在的 0。（同时搜索四个“1”（红色）正方形的正方形。

[http://jsfiddle.net/bn6pa/1/](http://jsfiddle.net/bn6pa/1/)

在找到循环的第一个点绘制一个黑色方块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T22:06:54.070

这个怎么样：

```
for each cell that's set to 1
    set that cell to -1
    recursively look for neighbouring cells set to 1, and set them to -1
        if you find a neighbouring cell that is already set to -1, loop found
    clean-up (set all cells that are set to -1 to 0, they are no longer relevant) 
```

这应该接近 O(N)。

在这里，我已将其实现为小提琴，请在[此处查看](http://jsfiddle.net/miquelmartin/TdTv2/3/)。您会注意到第四个示例很奇怪：我还没有解决问题，因为您的问题定义没有说明您是否想要最大可能的循环或任何循环。实际上，您只是想知道是否存在循环，这在您击中浅蓝色像素的那一刻就知道了。

# django - 反向工作，但重定向失败

> ID：14716430
> 
> 赞同：0
> 
> 时间：2013-02-05T20:35:42.713
> 
> 标签：django

我已经阅读了 5 次文档，我看不到这里缺少什么。

我有一种情况，reverse() 工作正常，但传递给 redirect() 的相同参数失败，并出现错误，指出无法解析地址。

```
reverse("app:submission_thanks", kwargs={ "data": survey.data.slug, "survey": survey.slug })

redirect("app:submission_thanks", kwargs={ "data": survey.data.slug, "survey": survey.slug }) 
```

我的网址是：

```
url(r'^(?P<data>[-\w]+)/(?P<survey>[-\w]+)/thanks/$',
         TemplateView.as_view(template_name="pasteur/submission_thanks.html"),
         name="submission_thanks",
    ), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:58:58.987

重定向具有不同的方法签名：

```
redirect("app:submission_thanks", data=survey.data.slug, survey=survey.slug) 
```

请参阅Django 文档中的[快捷方式重定向示例](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#examples)。

* * *

深入研究代码：`redirect(to, *args, **kwargs)`调用`resolve_url(to, *args, **kwargs)`哪个调用`urlresolvers.reverse(to, args=args, kwargs=kwargs)`。所以这绝对是正确的。

使用or快捷方式时，您不需要将 包装`args`在列表或`kwargs`字典中。`resolve_url``redirect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:58:50.183

在重定向中传递反向 url：

```
return redirect(
    reverse("app:submission_thanks",
    kwargs={ "data": survey.data.slug, "survey": survey.slug })) 
```

# python - 如何在python中拆分字母的数量

> ID：14716435
> 
> 赞同：2
> 
> 时间：2013-02-05T20:36:03.377
> 
> 标签：python

如果我有一个像“MZA11LTE12DEP108N”这样的字符串，它是字母组和数字组的串联，我如何用分隔符空格字符分隔它们？在蟒蛇

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T20:39:03.633

假设我理解你，[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)可以工作：

```
>>> import itertools
>>> s = "MZA11LTE12DEP108N"
>>> [''.join(g) for k, g in itertools.groupby(s, str.isalpha)]
['MZA', '11', 'LTE', '12', 'DEP', '108', 'N']
>>> ' '.join(''.join(g) for k, g in itertools.groupby(s, str.isalpha))
'MZA 11 LTE 12 DEP 108 N' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:41:38.640

或正则表达式解决方案：

```
>>> import re
>>> s = "MZA11LTE12DEP108N"
>>> re.sub('(?<=\d)(?!\d)|(?<!\d)(?=\d)', ' ', s)
'MZA 11 LTE 12 DEP 108 N' 
```

更详细地说：

```
re.compile("""
    (?<=\d) # an empty string preceded by a digit
    (?!\d)  # followed by a non-digit
    |   # or
    (?<!\d) # an empty string preceded by a non-digit
    (?=\d)  # followed by a digit
""", re.VERBOSE).sub(' ', s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T21:10:39.283

好吧，这是解决方案，但它太复杂了：D，我将其发布为开箱即用 LOL 的另一种解决方案

```
counter=0
txt='MZA11LTE12DEP108N'
string= ' '
while counter<len(txt):
    figure=str(txt[counter])
    if figure.isdigit():
        if string[-1].isdigit():
           string +=figure
        else:
            string += " "+figure
    else:
        if figure.isalpha():
            if string[-1].isalpha():string+=figure
            else:string += " "+figure

    counter+=1
string = string.strip() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T20:49:56.023

如果您的意思是要分隔变量中的字符和另一个变量中的数字，则将它们之间的空格粘贴在一起，然后：

```
variable = "MZA11LTE12DEP108N"
varlist = list(variable)
num = len(varlist)
strings = ''
digits = ''
for i in range(num):
    if varlist[i].isalpha():
        strings += varlist[i]
    elif varlist[i].isdigit():
        digits += varlist[i]
variable = strings+' '+digits 
```

不确定这是否是最好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:03:54.853

出于某种原因，我认为这样做的目的是删除非数字的*叹息*，因此我之前的答案不正确。

```
In [473]: re.findall(r'(\D+|\d+)',"MZA11LTE12DEP108N")
Out[473]: ['MZA', '11', 'LTE', '12', 'DEP', '108', 'N'] 
```

# python - 使用经过训练的分类器的 NLTK 分类界面

> ID：14716437
> 
> 赞同：2
> 
> 时间：2013-02-05T20:36:12.577
> 
> 标签：python, nltk

我在[这里](http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/)找到了一小段代码：

```
import nltk.classify.util
from nltk.classify import NaiveBayesClassifier
from nltk.corpus import movie_reviews
from nltk.corpus import stopwords

def word_feats(words):
    return dict([(word, True) for word in words])

negids = movie_reviews.fileids('neg')
posids = movie_reviews.fileids('pos')

negfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'neg') for f in negids]
posfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'pos') for f in posids]

negcutoff = len(negfeats)*3/4
poscutoff = len(posfeats)*3/4

trainfeats = negfeats[:negcutoff] + posfeats[:poscutoff]
testfeats = negfeats[negcutoff:] + posfeats[poscutoff:]
print 'train on %d instances, test on %d instances' % (len(trainfeats), len(testfeats))

classifier = NaiveBayesClassifier.train(trainfeats)
print 'accuracy:', nltk.classify.util.accuracy(classifier, testfeats)
classifier.show_most_informative_features() 
```

但是我如何对可能在语料库中的随机词进行分类。

```
classifier.classify('magnificent') 
```

不工作。它需要某种对象吗？

非常感谢你。

编辑：感谢@unutbu 的反馈和一些[在这里](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.probability.ProbDistI-class.html#samples)挖掘并阅读原始帖子的评论，以下产生此代码的“pos”或“neg”（这是一个“pos”）

```
print(classifier.classify(word_feats(['magnificent']))) 
```

这会产生对“pos”或“neg”这个词的评估

```
print(classifier.prob_classify(word_feats(['magnificent'])).prob('neg')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:58:54.427

```
print(classifier.classify(word_feats(['magnificent']))) 
```

产量

```
pos 
```

该`classifier.classify`方法本身不对单个单词进行操作，它基于**特征**`dict`进行分类。在这个例子中，将一个句子（一个单词列表）映射到一个特征。**`word_feats``dict`**

 **这是[另一个](http://nltk.org/book/ch06.html)使用`NaiveBayesClassifier`. 通过比较该示例与您发布的示例之间的相似和不同之处，您可能会更好地了解如何使用它。**

# javascript - 记录和显示弹出警报的 Javascript 函数？

> ID：14716439
> 
> 赞同：0
> 
> 时间：2013-02-05T20:36:19.740
> 
> 标签：javascript, ajax

全部，

我看到了这个功能来记录警报：

```
function alert(msg) {
  console.log(msg);
} 
```

我将如何修改它以记录警报**并**显示通常的弹出窗口？

（我想这样做的原因是我想测试弹出窗口对延迟我的 JS 脚本执行的影响 - 所以我将运行脚本两次，有和没有弹出窗口，并比较日志。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:38:16.213

叫它别的东西：

```
function shout(msg) {
  alert(msg);
  console.log(msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:39:22.987

```
function _alert(msg)
{
 alert(msg);
 console.log(msg);
} 
```

# c# - 在 R 中，如何以 yyyymmdd 格式输出 lubridate 兼容日期？.NET 中的 .ToString("yyyyMMdd") 的等价物？

> ID：14716443
> 
> 赞同：4
> 
> 时间：2013-02-05T20:36:52.143
> 
> 标签：c#, .net, r, lubridate

在`R`中，我可以使用以下方法将日期解析为 Lubridate 格式：

```
d <- ymd("2013-02-15") 
```

如何以`yyyyMMdd`格式输出，例如：

```
20130215 
```

等效的 .NET 命令将是：

```
.ToString("yyyyMMdd") 
```

我知道这个问题的答案很简单，但我花了最后一个小时试图找到任何关于使用 Lubridate 输出日期的参考，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:39:47.707

```
format(d, "%Y%m%d") 
```

产量

```
> format(d, "%Y%m%d")
[1] "20130215" 
```

# hadoop - PIG 从一个 Bag 中选择另一个 Bag 中的数据

> ID：14716445
> 
> 赞同：1
> 
> 时间：2013-02-05T20:37:05.757
> 
> 标签：hadoop, apache-pig

我是 HADOOP 和 PIG 的新手。

我有 2 个袋子：

```
DUMP A:
(1)
(2)
(4)

DUMP B:
(1,John,USA)
(2,Richard,UK)
(3,Ian,Ireland)
(4,Simon,Canada) 
```

包 B 列出了每个人。包 A 有我感兴趣的人。我确信有一种简单的方法可以让我感兴趣的人：

```
(1,John,USA)
(2,Richard,UK)
(4,Simon,Canada) 
```

有人可以让我摆脱痛苦吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:44:27.753

您应该能够通过类似于以下的命令加入并显示这两个集合：

```
JOINSET = join A by $0, B by $0;
DUMP JOINSET; 
```

为了让这更容易理解，当您最初加载数据集时，我会将名称与您的“列”相关联。您还可以通过 foreach/generate 命令进行过滤。所以像

```
INTEREST = foreach A generate $0 as interestID;
RECORDS = foreach B generate $0 as recordID, $1 as name, $2 as location;
JOINSET = join INTEREST by interestID, RECORDS by recordID; 
```

将允许您通过“列名”而不是列索引加入。

# jquery - Qtip：内容在使用淘汰赛渲染之前显示

> ID：14716446
> 
> 赞同：1
> 
> 时间：2013-02-05T20:37:10.137
> 
> 标签：jquery, knockout.js, qtip

我的 Qtip 内容是动态的，它的内容设置为一个 div，其中的元素动态绑定。由于绑定是在获取内容之后进行的，因此不会显示 Qtip 内容。

```
 <td><a href="#" id="qtipselector_01" data-bind="text: title, loadqtip: true"></a>
          <div id="TooltipContent_01" class="hidden">
            <a data-bind="text: title"></a>                 
          </div>
  </td> 
```

我将 $(element).next().html() 用于内容，但 html 在分配时仍未呈现。

```
 ko.bindingHandlers.loadqtip = {
        init: function(element, valueAccessor) {
                $(element).qtip({
                    content: $(element).next().html(),
                    position: {
                        my: 'left center', 
                        at: 'center right'
                    },
                    show: 'mouseenter',
                        hide: {
                            fixed: true,
                            delay: 500,

                            when: {
                                event: 'unfocus'
                            }
                        },
                    style: {
                        tip: {
                          width: 20,
                          height: 14,
                        },
                        width:280,
                        height:100,    
                        classes: 'qtip-light qtip-shadow qtip-rounded',

                    }
                });
        }
    }; 
```

jsFiddle 示例：http: [//jsfiddle.net/adi85/kq44S/1/](http://jsfiddle.net/adi85/kq44S/1/)

# sql - node.js 等效于 ActiveRecord 的 sanitize_sql 方法

> ID：14716450
> 
> 赞同：1
> 
> 时间：2013-02-05T20:37:21.967
> 
> 标签：sql, node.js, orm, sql-injection, sanitization

我缺少 ActiveRecord 的 sanitize_sql 方法的 api。

理想情况下，我正在寻找这样的 api：

```
sanitizeSql("select * from users where id = ?", [11], function(err, results) {
  ...
}); 
```

我正在使用 postgres，但我不想使用 postgres 的变量替换。我想在我的应用程序中保留查询构建，以便我可以轻松地在应用程序中调试和记录 sql 调用。

# c# - DBEntityValidationException 未被“清除”

> ID：14716452
> 
> 赞同：4
> 
> 时间：2013-02-05T20:37:31.910
> 
> 标签：c#, winforms, entity-framework

我在 winforms 应用程序中实现 EF 5，并将上下文 (DBContext) 保存在表单的私有字段中。

我尝试添加一个实体，因为它有一些无效的属性，我得到一个 DBEntityValidationException。然后，我将这些属性设置为有效值并尝试再次添加它，我收到完全相同的 DBEntityValidationException。

我想知道我是否需要清除任何东西？这是代码。

```
private SystemEntities _context = new SystemEntities(); // class field

try
{
    Customer customer = ... // set properties here
    _context.Customers.Add(customer);
    _context.SaveChanges();
}
catch (DBEntityValidationException ex)
{
    // get exception even though properties are updated with valid values
} 
```

更新实体时我没有观察到这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:03:05.407

这些评论为我指明了正确的方向。我没有尝试保存更改并捕获异常，而是首先获得验证结果：

```
var results = new List<ValidationResults>();
Validator.TryValidateObject(entity, new ValidationContext(entity, null, null), results, true); 
```

问题在于它实际上是在将无效实体添加到集合中，因此它在随后的尝试中不断抛出异常。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:13:15.090

这里有两个非常好的答案。这个独立的验证太棒了。我一直在寻找这个。

这对于任何批处理操作都非常有用。

因此，请使用独立验证，或者如果您正在捕获 DBEntityValidationException，则从 DbContext 的本地缓存中清除无效实体。

# c# - 包含具有数据绑定的 ListBox 的 PivotItem 滑动手势的性能问题

> ID：14716456
> 
> 赞同：3
> 
> 时间：2013-02-05T20:37:41.073
> 
> 标签：c#, silverlight, xaml, windows-phone

我一直在试图弄清楚如何提高我的数据透视控件的性能，它有 4 个 PivotItems，每个 PivotItems 都有 C# 中带有数据绑定的列表框。BackgroundWorker 减少了加载时间，但即使执行了所有后台任务，前两次滑动也总是滞后。4 秒的延迟是不可接受的。我认为这可能是由如下所示的列表框项模板引起的：

```
<DataTemplate x:Key="MetroList">
  <Grid MinHeight="120">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="190"/>
      <ColumnDefinition Width="32"/>
      <ColumnDefinition Width="230"/>
    </Grid.ColumnDefinitions>
    <ListBox Width="190"  ScrollViewer.VerticalScrollBarVisibility="Disabled" ItemsSource="{Binding connectingLines}" FlowDirection="RightToLeft" Margin="0,12" VerticalAlignment="Center">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <Grid Margin="6,0,0,6">
            <Rectangle Fill="{Binding LineColor}" RadiusX="3" RadiusY="3"/>
            <TextBlock Text="{Binding LineNumber}" FontWeight="Bold" Padding="8,0" FontSize="24" Margin="0,5,0,3" MinWidth="50" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center"/>
          </Grid>
        </DataTemplate>
      </ListBox.ItemTemplate>

      <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
          <toolkit:WrapPanel/>
        </ItemsPanelTemplate>
      </ListBox.ItemsPanel>
    </ListBox>
    <Ellipse Width="20"
      Height="20"
      Fill="White"
      StrokeThickness="3"
      Stroke="#FF222378"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Center"
                 Margin="6,0,0,0"
                 Grid.Column="1"/>
    <Rectangle Fill="#FF222378"
      Width="8"
      Height="3"
                   Grid.Column="1"
                   HorizontalAlignment="Right"
      VerticalAlignment="Center" Margin="-1,0,0,0" />
    <TextBlock
            TextWrapping="Wrap"
      Text="{Binding stopName}"
      FontFamily="Segoe WP Semibold"
      FontWeight="Bold"
      Foreground="#1E1B6E"
      x:Name="StationName"
      FontSize="32"
      Width="200"
      VerticalAlignment="Center"
      Margin="12,6,0,10"
      LineHeight="32"
            Tag="{Binding stopId}"
            Tap="StationName_Tap"
            Grid.Column="2"
                        />
  </Grid>
</DataTemplate> 
```

我尝试取消 ListBox，因为它是最近在应用程序出现性能问题之前添加的。但它只会将延迟时间减少几毫秒。我还尝试将 VirtualizingStackPanel.VirtualizationMode 设置为回收以防万一，但这并没有做任何事情。我能做些什么来改善用户体验？我听说在需要时加载 PivotItem 内容，但无法从谷歌找到任何有用的内容，因为大多数文章都使用 pivot.loadedpivotitem 或 pivotitem.loaded 事件，两者都无助于消除滞后。

* * *

编辑：我意识到即使后台线程正在工作，ui线程也会受到影响。页面已加载，但您无法对其执行任何操作，例如在数据绑定完成之前滑动。在那之后，手势仍然滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T13:21:59.907

加载问题可能是因为 ItemsSource 很大。您可以尝试在您的应用程序中执行增量滚动（[ISupportIncrementalLoading](http://msdn.microsoft.com/library/windows/apps/hh701916)）。最初加载较少的项目并按需加载剩余的项目。

# python - 如何使用 python wsgi 应用程序读取 Json 对象

> ID：14716457
> 
> 赞同：2
> 
> 时间：2013-02-05T20:37:45.590
> 
> 标签：python, json, post, python-2.7, mod-wsgi

我需要开发一个 python (v2.7) wsgi 应用程序来接收和解析从另一个网站发布的 json 对象中的数据。

示例 JSON 对象的格式如下。

```
{
  "BuildId":"4c53575f-36f48a7f1f37",
  "EventId":1,
  "EventName":"Archiving Complete",
  "EventDescription":"Fired each time the build products finish unzipping on an archive server after a successful build.",
  "ConfigurationId":2021,

  [
     {
        "archive_server":"CA",
        "ftp":"ftp://ABC.com/2011_V2/ccoderre_build_dev_build/2011.4.103.002",
        "dfs":"\\\\ABD.com\\ccoderre_build_dev_build\\2011.4.103.002"
     }
  ],
  "Changelists":
  [
     {
        "author":"mike",
        "description":"integrating from mainline\n",
        "number":1233242,
        "status":"OK",
        "submit_time":"\/Date(1305844615000)\/"
     }
  ],
  "InheritedChangelists":[],
  "CustomEventInfo":
  [
     {
        "Key":"ArchiveServer",
        "Value":"buildfsct"
     },
     {
        "Key":"HasSymbols",
        "Value":0
     }
  ]
} 
```

如何使用 wsgi 获取（读取）“BuildId”、“ConfigurationId”、“ftp”等？谁能帮我？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T20:41:40.123

使用stdlib[`json`库](http://docs.python.org/2/library/json.html)解析数据，结果是一个python字典：

```
def application(environ, start_response):
    try:
        request_body_size = int(environ.get('CONTENT_LENGTH', 0))
    except (ValueError):
        request_body_size = 0

    request_body = environ['wsgi.input'].read(request_body_size)
    data = json.loads(request_body)
    build_id = data['BuildId']
    # etc. 
```

# python - pyScss中的image-url和images_dir？

> ID：14716458
> 
> 赞同：0
> 
> 时间：2013-02-05T20:37:47.897
> 
> 标签：python, compass-sass

我正在尝试在[此博客文章](http://blog.grayghostvisuals.com/compass/image-url/)[`image-url`](http://compass-style.org/reference/compass/helpers/urls/#image-url)中描述的 scss 文件中使用 Compass 帮助程序，但我无法找到在[pyScss](https://github.com/Kronuz/pyScss)中设置（或等效）的方法。`images_dir`

我查看了文档和[它的一些代码](https://github.com/Kronuz/pyScss/blob/master/scss/__init__.py#L3322)，pyScss 似乎没有任何地方可以设置这个值，但它确实[声称支持`image-url`](https://github.com/Kronuz/pyScss#support)。

是否可以在当前版本的 pyScss 中指定图像目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:19:19.437

不，pyScss 不支持`images_dir`或`images_path`。

相反，`image-url()`路径*总是**仅*`STATIC_ROOT`针对config 变量查找。

 *小安慰：`STATIC_ROOT`可以是产生`(filename, storage)`元组的可调用对象；因为`image_url()`它只会使用产生的第一个值。该`storage`对象需要实现[Django `Storage`API](https://docs.djangoproject.com/en/stable/ref/files/storage/#the-storage-class)（它可能会使用`.modified_time()`方法`.open()`），因此您可以使用*它*来拦截`*.jpg`、`*.png`等路径以“重定向”到您选择的图像目录。

然而，生成的 URL 将（顽固地）由`STATIC_URL`+ 传递给的路径组成`image_url()`。

[我建议您向问题跟踪器](https://github.com/Kronuz/pyScss/issues)添加功能请求/错误报告，以请求他们添加对设置*的适当*支持，`images_dir`而`images_path`不是。*

# jquery - Jquery 选择器的逻辑与

> ID：14716459
> 
> 赞同：9
> 
> 时间：2013-02-05T20:37:49.217
> 
> 标签：jquery, jquery-selectors

我想设置为按值和名称检查复选框输入..

```
<input name="email" type="checkbox" value="1" tabindex="2"> 
```

我怎样才能做到这一点？我需要两个条件都完成。

这在 && 上失败了

```
$("input[name=email] && [value='+i+']").attr('checked', true); 
```

此代码进入 for 迭代，“i”采用数值。提前感谢您的时间和帮助...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-05T20:38:26.853

只需使用相邻的两个选择器：

```
$("input[name=email][value=" + i + "]").prop('checked', true); 
```

任何它们之间没有空格的选择器都应用于同一个元素。

# linux - 适用于 OS X 的 SFTP、SCP 和 FTP 客户端

> ID：14716464
> 
> 赞同：2
> 
> 时间：2013-02-05T20:38:05.377
> 
> 标签：linux, macos, winscp

我正在寻找适用于 OS X 10.7 的免费 SFTP、SCP 和 FTP 客户端。使用它，我想要一个连接到 linux 机器以查看和复制文件的 GUI 客户端（我使用 WinScp 从我的 Windows 机器连接到 linux 机器）。你能建议我一些适合我的场景的东西吗？目前，我正在使用 ssh 和 scp。

谢谢，

文卡特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T20:40:34.500

[Cyber​​duck](http://cyberduck.ch)是一个开源的 FTP，Mac 的 SFTP 客户端。效果很好！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T20:41:05.610

[http://filezilla-project.org/](http://filezilla-project.org/)

我相信这涵盖了您的所有基础。免费的gui ftp ssh sftp

# asp.net - 当添加看似无关的用户控件时，DropDownList OnSelectedIndexChanged 事件停止工作

> ID：14716465
> 
> 赞同：1
> 
> 时间：2013-02-05T20:38:13.870
> 
> 标签：asp.net, user-controls, repeater

我有一个带有中继器的页面。该中继器的每个项目内都有更新面板，每个面板都包含一个控件：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("Property1") %>' />
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostback="true"
                    OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
                    <asp:ListItem Text="1" Value="1" />
                    <asp:ListItem Text="2" Value="2" />
                    <asp:ListItem Text="3" Value="3" />
                    <asp:ListItem Text="4" Value="4" />
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel>
    </ItemTemplate>
</asp:Repeater> 
```

后面的代码提供数据源：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            List<Class1> Source = new List<Class1>();
            Source.Add(new Class1("Test1"));
            Source.Add(new Class1("Test2"));
            Source.Add(new Class1("Test3"));
            Repeater1.DataSource = Source;
            Repeater1.DataBind();
        }
    } 
```

这是被绑定的类：

```
public class Class1
{
    public string Property1 { get; set; }
    public string Property2 { get { return "Property 2"; } }
    public Class1() { Property1 = string.Empty; }
    public Class1(string P1) { Property1 = P1; }
} 
```

当下拉列表选择的索引发生变化时，这是在后面的代码中触发的事件：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList ddl = (DropDownList)sender;
        RepeaterItem ri = (RepeaterItem)ddl.NamingContainer;
        Label l = (Label)ri.FindControl("Label1");

        l.Text = ddl.SelectedValue;

        UpdatePanel up = (UpdatePanel)ri.FindControl("UpdatePanel1");
        up.Update();
    } 
```

所有这些代码都可以正常工作。更改选定的索引时，标签文本已更新以匹配，一切都很高兴。

问题是当我向转发器添加用户控件时。用户控件做什么似乎并不重要，但这里有一个简单的例子，我用来打破这个示例代码：

正面：

```
<asp:Label ID="Label1" runat="server" /> 
```

后退：

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    private Class1 _Item = null;
    public Class1 Item { get { return _Item; } set { _Item = value; } }

    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = Item.Property1;
    }
} 
```

当我在页面上注册此用户控件时：

```
<%@ Register Src="WebUserControl1.ascx" TagName="Control1" TagPrefix="uc1" %> 
```

并将其放置在中继器自己的更新面板中：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("Property1") %>' />
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <uc1:Control1 ID="Control1" runat="server" Item='<%# ((IDataItemContainer)Container).DataItem %>' />
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostback="true"
                    OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
                    <asp:ListItem Text="1" Value="1" />
                    <asp:ListItem Text="2" Value="2" />
                    <asp:ListItem Text="3" Value="3" />
                    <asp:ListItem Text="4" Value="4" />
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel>
    </ItemTemplate>
</asp:Repeater> 
```

用户控件正确绘制（表明它正在工作），但 OnSelectedIndexChanged 事件停止触发。即使在事件中插入 System.Diagnostics.Debugger.Break() 也不会触发。其他一切（事件代码、页面加载、类）都保持不变。唯一的区别是将此用户控件添加到页面和转发器。

谁能告诉我为什么这个（看似无关的）用户控件的引入似乎破坏了 DropDownList 行为？

谢谢你的帮助！

**编辑：回答。我只是错过了 WebUserControl1 的 Page_Load 事件中的 Page.IsPostBack 测试。愚蠢的错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:17:41.177

Yeah I had similar exact issue, if you dont check the **!IsPostback** property on the page load , then the control is rebound again and there fore the other controls inside like the dropdownlist is also rebound and reinitialized and thus the event is not fired

# android - Android将倒数计时器的值传递给2个或更多活动

> ID：14716468
> 
> 赞同：1
> 
> 时间：2013-02-05T20:38:22.017
> 
> 标签：android, countdowntimer

我正在尝试将 countdownTimer 值从活动 1 传递到活动 2，并从活动 1 获得的值启动活动 2 中的倒数计时器，但我不知道如何为活动 2 中的计时器作为变量，这是我的活动 1 代码

```
 new CountDownTimer(20000, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);

        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start();

    next.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = new Intent(MainActivity.this, Page2.class);
            i.putExtra("timervalue", tv.getText());
            startActivity(i);
        }

    }); 
```

这是活动 2 中的代码

```
 Bundle bundle = getIntent().getExtras();  
    long value = Long.parseLong(bundle.getString("timervalue"));
    new CountDownTimer(value, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);
        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start(); 
```

我还尝试通过使用 Intet 而不是 Bundle 来制作这样的活动 2

```
 Intent results = this.getIntent();
    String s = results.getExtras().getString("timervalue");
    long value = Long.parseLong(s);

    new CountDownTimer(value, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);
        }
        public void onFinish() {
            tv.setText("done!");
        }
     }.start(); 
```

我认为当我 putExtra 和 getExtra 时出现错误但我不确定，我真的是 java 的初学者所以请帮助...非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T02:45:54.483

这是正确的代码

在活动1

```
long remainingtime; 
```

在 onCreate 下

```
 new CountDownTimer(20000, 1000) {

        public void onTick(long millisUntilFinished) {
            Counter.setText("Time left: " + millisUntilFinished / 1000);
                remainingtime=millisUntilFinished;
        }

        public void onFinish() {
        Counter.setText("done!");
    }}.start();  

public void onClick(View v) {

Intent i = new Intent(Activity1.this, Activity2.class);

   Bundle timetransfer=new Bundle();
    timetransfer.putLong("timer", remainingtime);
        i.putExtras(timetransfer); 
```

活动2

```
Under onCreate

Bundle timetransfer = getIntent().getExtras();

                long time =timetransfer.getLong("timer");

        new CountDownTimer(time, 1000) {

            public void onTick(long time) {
                Counter2.setText("Time Left: " time / 1000);
            }

            public void onFinish() {
                Counter2.setText("Time is UP!");

                finish();    }

         }.start(); 
```

您必须删除这部分：

```
long_remaingtime=millisUntilFinished / 1000; 
```

并把

```
long_remaingtime=millisUntilFinished; 
```

因为在您的情况下，您已经将大约 20000(millisUntilFinished) 除以 1000，并且根据经过的时间，您得到大约 20 秒，然后您在下面放置了再次将该数字除以 1000 的代码。因此，在下一个活动中，您会自动收到时间已过的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:45:52.820

目前您正在传递`"seconds remaining: "+...`到下一个 Activity 并尝试将其解析为 Long 意味着您将进入`NumberFormatException`下一个 Activity 。使用额外的变量将`CountDownTimer`重命名时间传递给下一个活动：

```
public long long_remaingtime=20L;
 new CountDownTimer(20000, 1000) {
        public void onTick(long millisUntilFinished) {
            tv.setText("seconds remaining: " + millisUntilFinished / 1000);
            long_remaingtime=millisUntilFinished / 1000; //<<< 
        }
        public void onFinish() {
            tv.setText("done!");
            long_remaingtime=20L; //<< set default here
        }
     }.start();

    next.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = new Intent(MainActivity.this, Page2.class);
            i.putExtra("timervalue", long_remaingtime);
            startActivity(i);
        }

    }); 
```

并在下一个活动中获取计时器值：

```
Intent results = this.getIntent();
long value = results.getExtras().getLong("timervalue"); 
```

# php - php序列化输出中的那些数字是什么

> ID：14716470
> 
> 赞同：2
> 
> 时间：2013-02-05T20:38:25.570
> 
> 标签：php, class, object, serialization, numbers

```
class Aclas {

    private $v = 1;
    private $z;
    protected $y;
    public $xy;
}

$obja = new Aclas;
echo serialize( $obja ); 
```

我得到如下输出

```
O:5:"Aclas":4:{s:8:"Aclasv";i:1;s:8:"Aclasz";N;s:4:"*y";N;s:2:"xy";N;} 
```

但有人请告诉我`s:8`打开花括号后立即是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:39:53.527

`{s:8:"Aclasv",`是字符串，长度为 8。

我正在寻找文档一秒钟。

**更新：** 似乎没有找到任何文档。也许我会寻找链接corresp。PHP源代码...我现在也很好奇。可能更容易进行逆向工程并理解它。

**最佳链接** 这很酷，代码有完整的解析器：[https ://github.com/ktomk/Serialized](https://github.com/ktomk/Serialized)

> 序列化是一组可以将序列化数据解析为规范化表示（半结构化数据或 S 表达式）的类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T21:07:15.207

首先，这个问题没有任何特殊意义，因为：

*   序列化生成一个值的可存储表示，仅通过反序列化使用！
*   它的输出不是“标准化的”。它不是 JSON。您不能保证在一个版本的 PHP 中序列化某些东西并尝试在不同版本中 unserialize() 会起作用。
*   试图理解和解码它生成的字符是没有意义的。

但如果你还想知道：

s:8 表示 8 个字节的字符串。它与“Aclasv”的长度不匹配，因为它很可能包含一些不可打印/特殊字符（准确地说是其他注释中指出的 null）。请查看此代码：

```
class A {
    private $v = 1;
}

$obja = new A;

var_dump($obja);
// object(A)#1 (1) { ["v:private"]=> int(1) }

$x = serialize( $obja );
var_dump($x);
// note that this string is 27 chars long but only 25 are printed!
// string(27) "O:1:"A":1:{s:4:"Av";i:1;}"

var_dump(unserialize($x));
// object(A)#2 (1) { ["v:private"]=> int(1) }

// proof it is not the same:
var_dump(unserialize('O:1:"A":1:{s:4:"Av";i:1;}'));
// bool(false) 
```

# javascript - 正则表达式：为什么 [^0-9-] != [\D-]？

> ID：14716474
> 
> 赞同：2
> 
> 时间：2013-02-05T20:38:38.150
> 
> 标签：javascript, regex

我需要正则表达式来删除所有非数字而不是破折号（'-'）。`new RegExp('[^0-9-]')`似乎有效，但`new RegExp('[\\D-]')`也删除了破折号。为什么这不一样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T20:40:58.073

`[^0-9-]`是“任何不是数字或不是破折号的东西是”任何不是数字的东西，或者是
`[\D-]`破折号

`^`反转整个字符`[]`类，因此在您的`\D`版本中，没有反转，因此 a`-`是合法匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:41:14.513

因为第二个破折号前面没有否定。（`\D`实际上应该只有一个反斜杠）表示“所有非数字”，破折号表示破折号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:42:42.497

因为您已经错误地解释了第二个正则表达式的含义。

`^`字符类开头的匹配`[^0-9-]`其中指定的所有字符，特别是非`0-9`和非的任何字符`-`。而`[\D-]`匹配任何不是数字并且是`-`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T20:49:21.730

当您`^`在字符类 ( `[]`) 中使用时，它的意思是“在这个类中没有任何东西”。 `\D`只是一个特殊的序列，意思是“任何不是数字的东西”。

所以：

`[^0-9-]`匹配任何不是数字或`-`.

`[\D-]`表示“任何非数字字符（或 a `-`，它*已经*是非数字）。这里不需要`[]`，这与仅`\D`其本身相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T20:41:16.273

`\D`是简单的简写`^0-9`

# c# - String.Contains 返回 False，当它为 True 时

> ID：14716486
> 
> 赞同：0
> 
> 时间：2013-02-05T20:39:12.613
> 
> 标签：c#, string, httpwebrequest, web-scraping, contains

我需要解释一下，至于上帝的爱，我不知道出了什么问题。我正在通过 c#、标准 Httpwebrequest 下载网页。我得到了完整的 HTML 代码并将其保存到一个字符串中。然后，我为其设置了一个 webbrowsers 数据，当我单击元素时，我得到了 Html，例如：

```
<strong>Copyright 2011\. All Rights Reserved.</strong> 
```

当我让我的脚本比较下载的页面集合是否存在这个确切的字符串时，我得到了错误，但是如果我在 RichTextBox 中打开这个集合中的一个，然后开始比较其余的，它确实匹配。谁能告诉我为什么？？我已经尝试调试和观察元素，没有什么是空的，甚至将值复制到记事本以手动比较文本，我每次都得到一个匹配，所以怎么了？编码？漏洞？我真的不知道。

我从以下位置得到这个例子：`http://web.archive.org/web/20110208042711/http://coralifeaqualight.com/`

比较页面是网站上的所有本地页面。这里的答案将不胜感激，它看起来很简单，为什么它不起作用？是的，我尝试在检查时在开头添加一个@。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:58:20.983

在最坏的情况下，您可以尝试在不使用 Contains() 的情况下获得相同的结果。这是一个例子。

```
string genericString = "My string";
bool contains = genericString.IndexOf("my", StringComparison.OrdinalIgnoreCase) >= 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:04:49.310

您可以通过这种方式检查是否存在干扰匹配的隐藏字符：

```
using System.Text.RegularExpressions; 
```

...

```
string output = Regex.Replace(input, "[^\u0021-\u007E]",""); 
```

如果它们在此之后匹配，那么你知道有一些字符把你弄乱了（换行，也许？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T20:41:31.877

我的猜测是，您正在查看数据的编辑器中没有显示一个字符。尝试将确切的数据复制到 TextPad 之类的东西中，看看字符串中是否有任何额外的字符。

这是没有代码我能做的最好的事情

# bash - 预期整数表达式 - 执行线性插值的 Bash 脚本

> ID：14716489
> 
> 赞同：0
> 
> 时间：2013-02-05T20:39:14.967
> 
> 标签：bash, floating-point, interpolation

我是 stackoverflow 和编写 bash 脚本的新手。我正在做一个工作项目，需要编写一个相当简单的脚本。我有几列数据，其中一列是时间，另一列是 hrr，这是一个相对于时间不断增加的变量。我正在尝试进行线性插值以找到 hrr = hrr 中最后一个条目的 50% 的相应时间。

所以这是我到目前为止所拥有的：

```
#!/bin/bash
clear

entry=$(awk 'NR>4{print $11}' thermo.out | awk -F, '{$1=$1*a;print}' a=0.50 | tail -1 )
awk 'NR>4{print $11}' thermo.out | awk -F, '{$1=$1*b;print}' b=1.0 > hrr.out
awk 'NR>4{print $1}' thermo.out > t.out

hrr=($(<hrr.out))
t=($(<t.out))

length=${#t[@]}
end_array=$(($length-1))

#Start looping through hrr from 0 to entry that exceeds 0.50*hrr(end)
ind=0
while [ ${hrr[$ind]} -lt ${entry} ]
do
    echo "ind = $ind"
    ind=$[$ind+1]
done

exit 0 
```

显然，我没有在循环中编写代码来查找感兴趣的 hrr 条目或进行插值。我试图验证我的代码是否可以成功进入和退出 while 循环。所以当我尝试运行我拥有的东西时，我收到以下错误

```
./interp: line 16: [: 796.28: integer expression expected 
```

所以我知道 hrr 的条目和元素不是整数。我需要做一个简单的变量声明来修复这个错误还是你能想到一个解决方法？我知道在 bash 脚本中做浮点算术和逻辑可能很麻烦，但我希望你们中的一个可以帮助我。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:46:18.643

Bash 根本不支持浮点运算。你可以使用像 bc 这样支持定点算术的工具：

```
while (( $(bc <<< "${hrr[$ind]} < ${entry}") ))
do
    echo "ind = $ind"
    ind=$[$ind+1]
done 
```

如果您的 awk 以科学计数法输出，您可以尝试

```
entry=$(awk 'NR>4{print $11}' thermo.out | awk -F, '{$1=$1*a; printf("%f\n",$0);}' a=0.50 | tail -1 )
awk 'NR>4{print $11}' thermo.out | awk -F, '{$1=$1*b; printf("%f\n",$0);}' b=1.0 > hrr.out 
```

# c# - WPF 访问自我

> ID：14716494
> 
> 赞同：0
> 
> 时间：2013-02-05T20:39:24.980
> 
> 标签：c#, wpf, xaml

这是我使用 WPF 的第一天。乐趣！

我目前有一个 WPF 应用程序，它打开/返回一个带有`OpenFileDialog`. 我有一个现有的脚本可以解构和提取该数据。我需要的是能够访问该数据（我猜想将其*绑定*到）并将其显示在 XAML 中的元素中。我一直无法弄清楚如何做到这一点。

所以这是我的设置。

**MainWindow.xaml.cs**：

```
namespace GridView
{
    public partial class MainWindow
    {
        private GridSet<byte> _grids;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Open_OnClick(object sender, RoutedEventArgs e)
        {
            var openDialog = new OpenFileDialog();
            if (openDialog.ShowDialog().Value)
            {
                //Populate _grids with data
            }
        }
    }
} 
```

**MainWindow.xaml**：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" x:Class="GridView.MainWindow"
        Title="Grid View" Width="800" Height="600" WindowStartupLocation="CenterScreen">

    <DockPanel>

...
    "Open_OnClick" here
...

    <TextBox/>

    </DockPanel>
</Window> 
```

如您所见，**.cs**文件只是 .cs 文件的交互逻辑`MainWindow`。那么为什么我不知道如何配置我的 TextBox 来显示数据`_grids`呢？

我已经摆弄了`x:Name`, `x:Reference`, `Window.Resources`, `DataContext`,`Binding`等等，但我还没有找到适用于此的指南。这可能是因为我仍然不了解 WPF 的各个方面。但是我在这里做错了什么？

（或者，我会对不会让我的大脑渗出耳朵的 WPF 教程感到满意。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:46:22.443

您已`_grids`在 C# 中声明，但未将其添加到可视化树中。

最简单的方法是在 XAML 中声明对象（尽管我不能 100% 确定 a`GridSet`是什么——我找不到任何关于它的文档）。因此，如果它很简单`Grid`，您将拥有：

```
<DockPanel>
    <Grid x:Name="MyGrid" />
</DockPanel> 
```

通过命名它，您可以在代码中访问它：

```
MyGrid.Children.Add(something); 
```

要使用绑定，您必须设置`DataContext`窗口的。最简单的方法是：

```
this.DataContext = this; 
```

在你的构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:00:05.357

你想使用按钮吗？

XAML：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" x:Class="GridView.MainWindow"
    Title="Grid View" Width="800" Height="600" WindowStartupLocation="CenterScreen">

  <DockPanel>
    <Grid>
      <Button x:Name="Open" Click="Open_OnClick" />

      <TextBox x:Name="tbDisplay"/>
    </Grid>
  </DockPanel>
</Window> 
```

C＃

```
namespace GridView
{
    public partial class MainWindow
    {
        private GridSet<byte> _grids;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Open_OnClick(object sender, RoutedEventArgs e)
        {
            var openDialog = new OpenFileDialog();
            if (openDialog.ShowDialog().Value)
            {
                //Populate _grids with data
                tbDisplay.Text = "foo";
            }
        }
    }
} 
```

# openstreetmap - 如何从 OpenStreetMap 数据中找到街道交叉口的列表？

> ID：14716497
> 
> 赞同：7
> 
> 时间：2013-02-05T20:39:33.750
> 
> 标签：openstreetmap

我正在寻找一种从 OpenStreetMap (OSM) 数据中*准确检索街道交叉口的方法。*我知道有人提出并回答了类似的问题，但我可以从建议的方法中检索到的数据不是很准确。

首先，我知道以下问题：

*   [如何从 OpenStreetMap 中找到路口？</a>](https://stackoverflow.com/questions/12241377/how-to-find-intersections-from-openstreetmap/12249004#12249004)
[](https://stackoverflow.com/questions/12241377/how-to-find-intersections-from-openstreetmap/12249004#12249004)
*   [检测地图中的交叉点](https://help.openstreetmap.org/questions/15442/detection-of-intersections-in-the-maps)

上述问题的答案表明：

> “查询给定边界框中的所有方式，并查找由两种或多种方式共享的节点，如另一个答案中所述。”

我遵循了这个建议并编写了一个 python 脚本，该脚本从我从[OpenStreetMap](http://www.openstreetmap.org/)下载的 xml 文件（osm 文件）中提取节点元素。以下是代码：

```
try:
    from xml.etree import cElementTree as ET
except ImportError, e:
    from xml.etree import ElementTree as ET

def extract_intersections(osm, verbose=True):
    # This function takes an osm file as an input. It then goes through each xml 
    # element and searches for nodes that are shared by two or more ways.
    # Parameter:
    # - osm: An xml file that contains OpenStreetMap's map information
    # - verbose: If true, print some outputs to terminal.
    # 
    # Ex) extract_intersections('WashingtonDC.osm')
    #
    tree = ET.parse(osm)
    root = tree.getroot()
    counter = {}
    for child in root:
        if child.tag == 'way':
            for item in child:
                if item.tag == 'nd':
                    nd_ref = item.attrib['ref']
                    if not nd_ref in counter:
                        counter[nd_ref] = 0
                    counter[nd_ref] += 1

    # Find nodes that are shared with more than one way, which
    # might correspond to intersections
    intersections = filter(lambda x: counter[x] > 1,  counter)

    # Extract intersection coordinates
    # You can plot the result using this url.
    # http://www.darrinward.com/lat-long/
    intersection_coordinates = []
    for child in root:
        if child.tag == 'node' and child.attrib['id'] in intersections:
            coordinate = child.attrib['lat'] + ',' + child.attrib['lon']
            if verbose:
                print coordinate
            intersection_coordinates.append(coordinate)

    return intersection_coordinates 
```

如果我使用从 OSM 导出的数据运行此代码（*例如*，我使用从导出区域导出的数据：Min Lat：38.89239，Max Lat：38.89981，Min Lon：-77.03212 和 Max Lon：-77.02119。），它打印出如下所示的坐标：

```
38.8966440,-77.0259810
38.8973430,-77.0280900
38.9010391,-77.0270309
38.8961050,-77.0319620
... 
```

如果我在谷歌地图上绘制这些坐标，它看起来像： ![在此处输入图像描述](../Images/1471ada3c49eff4a0d9a152a76380eb7.png)

（我使用[http://www.darrinward.com/lat-long/](http://www.darrinward.com/lat-long/)绘制数据。）显然数据包含一些*不是*交叉点的节点（它们可能是面向两条街道的商店。）

我做错了什么还是这是我可以从 OSM 获得的最佳“交集”数据？感谢您的帮助和评论。

最好的，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T20:52:07.690

第一个提示：

不仅要与谷歌地图进行比较，还要将您的坐标主要与 OpenStreetMap 可视化进行比较。尤其是复杂的街道交叉口，虽然它们代表相同的道路，但可以进行不同的建模。

2）：看看你是否真的使用了正确的方式：那是人行道，与街道混合吗？有各种不同的类型，具有不同的属性：车辆可通行等。在谷歌地图中，​​白色道路是车辆可通行的道路

3）进一步看，如果你没有混合房屋多边形。

# php - 使用 AJAX 将 POST（或 GET）数据发送到 PHP 脚本

> ID：14716507
> 
> 赞同：0
> 
> 时间：2013-02-05T20:39:54.770
> 
> 标签：php, ajax, post, get

我正在尝试在 Intranet 站点的 php 目录中构建一个简单的“我查看了这个”函数。

因此，当用户阅读该页面时，他们单击底部的一个按钮，上面写着“我已阅读此内容”，该按钮将用户的用户 ID 和页面 ID 发送到一个简单的数据库表，然后我可以将其用于其他用途。

我正在尝试使用 AJAX 和 PHP 来实现。

这是我的代码：

```
<SCRIPT LANGUAGE="JavaScript">
function viewSave(form) {
var itemid = <?php echo $itemid; ?>;
var userid = <?php echo $userid; ?>;

var xmlhttp;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

 xmlhttp.open("GET","saveView.php?q=itemid="+itemid+"&userid="+userid,true);
 xmlhttp.send();
}

</script> 
```

我已经设置了一个带有隐藏字段的简单表单：

```
<form onSubmit="return viewSave(this)" >
<input type="submit" name="submit" value="Save" />
</form> 
```

当我单击提交时，URL 会发生变化，我会得到我的变量，如下所示：

> thispage.php?itemid=455&userid=999&submit=保存

但是没有调用“saveView.php”，也没有发送数据。

以下是 saveView.php 中的内容：

```
<?php

$userid =$_GET["userid"];
$itemid = $_GET["itemid"];

  // Connect to the database
            $dbc = mysqli_connect('localhost', 'root', '', 'viewsave');

            // Write the data to the database
            $query = "INSERT INTO saves (entryID, userid, itemid) VALUES ( '0', '$userid', '$itemid')";
            mysqli_query($dbc, $query); 
```

?>

我猜 URL 参数只是因为表单而出现，并且 JavaScript 有问题。

我只是 JS 的初学者。

帮助表示赞赏。

射线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:44:29.003

首先，您的`php`文件需要一个名称：

```
xmlhttp.open("GET","save.php? 
```

然后您的参数需要名称：

```
xmlhttp.open("GET","save.php?q=itemid="+itemid+"&userid="+userid,true); 
```

然后，在 PHP 中，您可以使用它`$_GET`来获取数据（并检查它是一个数字）：

```
if(array_key_exists('itemid', $_GET) && !is_nan($_GET['itemid'])) {
    $itemid = $_GET['itemid'];
} 
```

# image - 在三重存储中存储图像二进制文件与仅存储 url 引用

> ID：14716510
> 
> 赞同：3
> 
> 时间：2013-02-05T20:39:56.327
> 
> 标签：image, triplestore

我有数百万个实体资源存储在三重存储中，其中（sparql）查询可能会返回数百（或数千）个（结果将被进一步缩小，例如，应显示实体缩略图的枢轴查看器） .

现在，关于这个主题的大多数答案都建议将图像存储在三重存储之外，并在三重存储内部有一个 uri 引用（例如，foaf:Image），指向资源图像。

如果我将它们存储在三重存储中，我想我会通过对后端存储的一个 sparql 查询（获取实体及其缩略图）获得更好的性能。

另一方面，对于存储在三重存储之外的图像，我将不得不执行许多查询来获取图像。

处理这种情况的最佳做法是什么？（可能适用于实体资源的其他二进制数据属性）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:26:31.517

在这种情况下，最好的办法是单独存储图像。大多数三元存储没有优化的 Blob 存储，您可能会通过在数据库中包含二进制数据来降低所有查询的性能。

您仍然可以在单个查询中获取某个请求的所有图像——可能取决于我猜的请求，但这*是*可能的。我的建议是，您对图像的 URL 引用由 Apache 之类的东西提供。这样你就可以直接向客户提供 URL，他们可以以任何最好的方式获取它们；把这想象成一个浏览器获取一个使用图像的网页，图像不是 HTML 的一部分，它单独获取它们。

如果需要，您可以通过拆分请求并将图像元数据放在三元存储中，同时将图像的实际位放在 Apache 托管目录中来处理图像的上传。

这还允许您设置缓存和其他标准 HTTP 级别的基础设施，以便尽可能快速、轻松地提供图像，我认为这最终会为您提供最佳性能水平。

# php - 为什么php和html混合代码不起作用？

> ID：14716516
> 
> 赞同：1
> 
> 时间：2013-02-05T20:40:28.010
> 
> 标签：php, html

我试图编写这个简单的代码，但它不起作用。这是我的代码...

```
 <html>
    <body>

    <?php
    $color = "red";
    ?>

    <p>Roses are <?=$color?></p>

    </body>
    </html> 
```

我将此代码保存为 new.php 它在浏览器窗口中仅显示“玫瑰是”文本。不打印 $color 的值。我也将它保存为 new.html 但结果是一样的。问题是什么？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:41:46.803

您的服务器上似乎禁用了短标签。改用这个：

```
<?php $color = "red"; ?>

<p>Roses are <?php echo $color; ?></p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:42:32.930

`<?=$color?>`仅当您在配置中启用了短标签，或者您使用的是 PHP 5.4 或更高版本时才有效。

由于它没有显示任何内容，显然情况并非如此。要么更改配置，升级到 PHP 5.4，要么使用完整的`<?php echo $color ?>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:42:37.970

尝试

```
<html>
<body>

<?php
$color = "red";
?>

<?php echo('<p>Roses are '.$color.'</p>'); ?>

</body>
</html> 
```

或者

```
<html>
<body>

<?php
$color = "red";
?>

<p>Roses are <?php echo $color; ?></p>

</body>
</html> 
```

# php - 用于 Django 的小型且很少更改的数据的最快缓存是什么？

> ID：14716530
> 
> 赞同：2
> 
> 时间：2013-02-05T20:41:16.470
> 
> 标签：php, python, django, caching

我正在从 PHP 切换到 Python + Django 并寻找相当于 PHP 的“数组缓存”的过程。

对于来自数据库的小型数据集，例如很少更改但经常访问的“类别”，我使用的是数组缓存。

[http://www.mysqlperformanceblog.com/2006/08/09/cache-performance-comparison/](http://www.mysqlperformanceblog.com/2006/08/09/cache-performance-comparison/)

它的概念是使用类别树生成 PHP 源代码，当打开操作码时，它就像将数据嵌入到应用程序源中一样工作。它是可以想象到的最快的缓存，对于大负载非常有帮助。

Django 手册（[https://docs.djangoproject.com/en/1.4/topics/cache/](https://docs.djangoproject.com/en/1.4/topics/cache/)）指出：

> 到目前为止，Django 可用的最快、最有效的缓存类型 Memcached..

所以问题是：

*   使用 python 字典/列表生成 .py 文件是否有意义？
*   这会比 Memcached 快吗？如果不是为什么？
*   是否有任何已知的实现？
*   Python 是否有类似 PHP 的 var_export() 函数？

编辑：

正如答案中所指出的，我可以使用 repr() 并且可以轻松地进行基准测试，因此我创建了一个简单的基准：

[https://github.com/fsw/pythonCachesBenchmark](https://github.com/fsw/pythonCachesBenchmark)

这个在我的本地机器上的输出是：

```
FIRST RUN
get_categories_from_db
6.57282209396
get_categories_from_memcached
(SET CACHE IN 0.000940)
4.88948512077
get_categories_from_pickledfile
(SET CACHE IN 0.000917)
2.87856888771
get_categories_from_pythonsrc
(SET CACHE IN 0.000489)
0.0930788516998
SECOND RUN
get_categories_from_db
6.63035202026
get_categories_from_memcached
4.60877108574
get_categories_from_pickledfile
2.87137699127
get_categories_from_pythonsrc
0.0903170108795 
```

get_categories_from_pythonsrc 是我所说的 PHP 数组缓存的简单实现：

```
def get_categories_from_pythonsrc():
    if not os.path.exists('catcache.py'):
        start = time.time()
        f = open( 'catcache.py', 'wb' )
        categories = get_categories_from_db()
        f.write('x = ' + repr(categories))
        f.close()
        print '(SET CACHE IN %f)' % (time.time() - start)
    import catcache
    return catcache.x 
```

这是我简单的pickledfile缓存实现：

```
def get_categories_from_pickledfile():
    path = 'catcache.p'
    if not os.path.exists(path):
        start = time.time()
        pickle.dump( get_categories_from_db(), open( path, 'wb' ) )
        print '(SET CACHE IN %f)' % (time.time() - start)
    return pickle.load(open( path, 'rb' )); 
```

完整来源：

[https://github.com/fsw/pythonCachesBenchmark/blob/master/test.py](https://github.com/fsw/pythonCachesBenchmark/blob/master/test.py)

稍后我将在此基准测试中添加“Django 的低级缓存 API”，以了解它们的含义。

所以我的直觉建议在 python .py 文件中缓存字典是我能得到的最快方法（比 cPickle + 文件快 30 倍以上）

如前所述，我是 Python 新手，所以我可能在这里遗漏了一些东西？

如果不是：为什么这个解决方案没有被广泛使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:22:34.990

还有另一种方法。您可以使用一些**ASYNC 服务器，如 gevent**，并在一些全局命名空间中拥有活动对象。
我不知道你对这样的工作流程有多熟悉，它不同于 apache/php “每个请求都开始裸露”。

基本上，您加载您的应用程序，并使用它来处理请求。如果没有请求，它一直处于活动状态并且正在休眠。从数据库加载“类别”后，将它们存储在全局变量或某个模块中。

假设您启动 WSGI 实例并将其命名为 app。之后，您可以在该应用程序中拥有字典并在那里存储缓存。所以没有序列化、网络协议，所有数据都直接在 RAM 中可用。

EDIT1：不要经常使用全局变量，这只是非常罕见的情况之一，可以在`global`命名空间中存储一些东西（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:57:29.970

Python 有几种可能在这里工作的解决方案：

*   Memcached（如您所知），
*   泡菜（正如 Blender 提到的） - 当然可以与例如一起使用。内存缓存，
*   其他几种缓存（例如，用于本地内存）和序列化（例如`simplejson`）解决方案，

通常`pickle`非常快（`cPickle`如果您需要更快的速度，请使用），并且在 Python 中您不需要类似的东西`var_export()`（尽管您可以使用`repr()`变量来获得有效的文字，如果它们是原始类型之一）。`pickle`在 Python 中更类似于`serialize`在 PHP 中。

你的问题不是很具体，但上面应该给你一些见解。您还需要考虑到 PHP 和 Python 有不同的理念，因此相同问题的解决方案可能看起来不同。在这种特定情况下`pickle`，模块应该可以解决您的问题。

# ember.js - 如何使用静态数组和带有 ember.js 的 Promise 组成动态列表

> ID：14716532
> 
> 赞同：0
> 
> 时间：2013-02-05T20:41:21.700
> 
> 标签：ember.js, ember-data

我正在使用 ember.js 1.0（pre 4）和 ember-data rev 11

我有一个数据模型需要公开一个列表，该列表是一个静态数组（当时已经在内存中）和一个承诺（将返回相关 ember 数据模型的列表）的组合。

```
App.Day = DS.Model.extend({
    appointments: function() {
        //this will hit a backend server so it's slow
        return App.Appointment.find();
    }.property(),
    slots: function() {
        //no need to hit a backend server here so it's fast
        return App.Slot.all();
    }.property(),
    combined: function() {
        //return a list of both slots + appointments after some logic is applied
    }.property()
}); 
```

当约会实际上是一个承诺，因为它们是按需加载的，我如何在一个属性中结合插槽和约会。

我需要在这个组合属性中做一些逻辑，所以这两个数组的简单合并并不理想。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:57:26.807

简单的解决方案是从`AdapterPopulatedRecordArray`返回的对象中获取`App.Appointment.find()`并添加对象，例如：`RecordArray``App.Slot.all()`

```
combined: function() {
    //return a list of both slots + appointments after some logic is applied
    var apts = this.get('apppointments'),
    slots = this.get('slots');
    apts.addObjects(slots);

    return apts;

}.property('appointments', 'slots') 
```

# php - Implode 后从数组中除法 - PHP

> ID：14716541
> 
> 赞同：0
> 
> 时间：2013-02-05T20:41:53.680
> 
> 标签：php, arrays

为什么我仍然无法除法，如果我这样做了，我得到一个 0。

```
 exec("snmpget -v 2c -c public $host $oid | cut -d':' -f4 | sed -e 's/^[ ]*//'", $state);

print_r($state);
$seconds=86400;
$current_state=implode($state);
print($current_state);
$div=($current_state/86400);
print($div); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:43:44.353

[implode](http://php.net/manual/en/function.implode.php)可以采用两个参数。

> 字符串内爆（字符串 $glue ，数组 $pieces ）

# javascript - 我将如何在打字稿中声明一个“猴子补丁”原型

> ID：14716543
> 
> 赞同：7
> 
> 时间：2013-02-05T20:41:59.337
> 
> 标签：javascript, declaration, typescript

我正在为谷歌的 webgl-utils.js 创建一个d.ts[文件](http://code.google.com/p/webglsamples/source/browse/book/webgl-utils.js?r=41401f8a69b1f8d32c6863ac8c1953c8e1e8eba0)

我对全局对象中的方法是“猴子补丁”的最后一行有疑问（我认为这是正确的术语）

问题行如下：

```
 /**
  * Provides requestAnimationFrame in a cross browser way.
  */
 window.requestAnimFrame = (function() {
   return window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {
            window.setTimeout(callback, 1000/60);
          };
 })(); 
```

我将如何在我的打字稿文件中声明它，以便在使用该函数时不会出现编译错误：

```
 function tick()
 {
      requestAnimFrame(tick);
      drawScene();
 } 
```

我现在尝试过：

```
 interface window
 {
      requestAnimFrame(): any;
 } 
```

但这并不能消除错误：

```
 The name 'requestAnimFrame' does not exist in the current scope 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T09:48:21.370

您正朝着正确的方向前进，但您需要定义您拥有的所有变体：

```
 interface Window {
     requestAnimFrame(callback: any, element?: any): void;
     webkitRequestAnimationFrame(callback: any, element?: any): void;
     mozRequestAnimationFrame(callback: any, element?: any): void;
     oRequestAnimationFrame(callback: any, element?: any): void;
 }

 window.requestAnimFrame = (function() {
    return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback, element?) {
            window.setTimeout(callback, 1000/60);
        };
 })();

function tick() {
    window.requestAnimFrame(tick);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T04:21:01.907

确保接口名称以大写“W”而不是“w”开头

```
interface Window {
   requestAnimFrame():any;
} 
```

在调用代码中使用`window.requestAnimFrame();`. 希望这能解决你的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T04:14:34.177

其他方式：

```
declare var wnd: {
    requestAnimationFrame: any;
    webkitRequestAnimationFrame: any;
    mozRequestAnimationFrame: any;
    oRequestAnimationFrame: any;
    msRequestAnimationFrame: any;
}
var wnd = window;

export var requestAnimFrame = (function () {
    return wnd.requestAnimationFrame ||
           wnd.webkitRequestAnimationFrame ||
           wnd.mozRequestAnimationFrame ||
           wnd.oRequestAnimationFrame ||
           wnd.msRequestAnimationFrame ||
           function (/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {
               window.setTimeout(callback, 1000 / 60);
           };
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-07T20:10:21.150

对我有用的唯一方法：

```
declare global {
    interface Window {
        requestAnimFrame(callback: () => void): any;
        webkitRequestAnimationFrame(callback: () => void): any;
        mozRequestAnimationFrame(callback: () => void): any;
        oRequestAnimationFrame(callback: () => void): any;
    }
}

Window.prototype.requestAnimFrame = function () {
    return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        function (callback) {
            window.setTimeout(callback, 1000 / 60);
        };
} 
```

# api - 下载文件时出现 Dropbox 签名问题，但帐户/信息工作正常

> ID：14716545
> 
> 赞同：1
> 
> 时间：2013-02-05T20:42:15.780
> 
> 标签：api, rest, dropbox

下载文件时出现 Dropbox 签名问题，但帐户/信息工作正常：

这 - [https://api.dropbox.com/1/account/info?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r](https://api.dropbox.com/1/account/info?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r)

始终完美运行。

这 - [https://api-content.dropbox.com/1/files/dropbox/test.txt?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r](https://api-content.dropbox.com/1/files/dropbox/test.txt?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r)

产生错误：

403 Forbidden, {"error": "Host: rpc.dropbox.com:443, FE: None, X-Dropbox-RequestId: None, Bad oauth_signature for oauth_signature_method 'PLAINTEXT'"}

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:10:12.353

我发现了这个问题。

应要求

[https://api-content.dropbox.com/1/files/dropbox/test.txt?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r](https://api-content.dropbox.com/1/files/dropbox/test.txt?oauth_consumer_key=cy6ymyqsb2yymw1&oauth_signature_method=PLAINTEXT&oauth_token=e98gtg5b2wo9o51&oauth_signature=o2jwldqtqfbmqkg%2526ller5vort89ab2r)

%2526 是双重转义 &。解决这个问题有帮助。

但有趣的是，第一个查询有同样的问题，但 Drobpox 没有抱怨。

# javascript - jQuery - 显示/隐藏搜索框

> ID：14716546
> 
> 赞同：7
> 
> 时间：2013-02-05T20:42:18.993
> 
> 标签：javascript, jquery, html, show-hide

我编写了一个小 jQuery 来在单击 div 时滑动打开搜索框。基本上，单击它会显示一个最初隐藏的 div，并且该 div 内部是一个搜索框和一个关闭按钮。这一切都很好。然而，关闭按钮不起作用。我的猜测是关闭按钮并没有隐藏那个 div，因为它本身就在 div 里面。这是我所拥有的，这是一个[jsfiddle](http://jsfiddle.net/U63sH/1/)。

**HTML**

```
<ul class="tert-nav">
    <li><img alt="" border="0" src="images/icon-cart.png" width="16" height="16" /></li>
    <li><img alt="" border="0" src="images/icon-tickets.png" width="16" height="16" /></li>
    <li class="searchit">
        <img alt="" border="0" class="searchicon" src="images/icon-search.png" width="16" height="16" />
        <div class="searchbox">
            <img alt="" border="0" class="closesearch" src="images/icon-close.png" width="16" height="16" />
            <input placeholder="search..." type="text" />
            <input type="submit" value="" />
        </div>
    </li>
</ul> 
```

**jQuery**

```
$(document).ready(function() {

// Search
$('ul.tert-nav li.searchit').click(function() {
    $(this).addClass('search');
    $('.searchbox').fadeIn();
    $('ul.tert-nav li img.searchicon').hide();
});

$('ul.tert-nav li.searchit img.closesearch').click(function() {
    $('.searchbox').hide();
    $('ul.tert-nav li').removeClass('search');
});

}) 
```

**CSS**

```
ul.tert-nav {
    float: right;
    position: absolute;
    margin: 0;
    padding: 0;
    right: 0;
    top: 0;
    list-style: none;
}

ul.tert-nav li {
    float: right;
    width: 26px;
    height: 28px;
    background: #3c3c3c;
    text-align: center;
    margin-left: 2px;
    cursor: pointer;
    transition: all .2s ease;
    -o-transition: all .2s ease;
    -moz-transition: all .2s ease;
    -webkit-transition: all .2s ease;
}

ul.tert-nav li:hover {
    background: #000;
}

ul.tert-nav .search {
    width: 246px;
    text-align: left;
    cursor: default;
}

ul.tert-nav .search:hover {
    background: #3c3c3c;
}

ul.tert-nav .searchbox {
    display: none;
    width: 100%;
}

ul.tert-nav .searchbox .closesearch {
    float: left;
    margin: 6px 4px 0px 4px;
    cursor: pointer;
}

ul.tert-nav .searchbox .closesearch:hover {
    opacity: 0.8;   
}

ul.tert-nav .searchbox input[type=text] {
    float: left;
    width: 184px;
    height: 24px;
    padding: 0px 0px 0px 10px;
    margin: 2px 0px 0px 0px;
    border: none;
    background: url(images/search-bg.png) no-repeat;
    outline: none;
}

ul.tert-nav .searchbox input[type=submit] {
    float: left;
    width: 26px;
    height: 24px;
    margin: 2px 0px 0px 0px;
    padding: 0px;
    border: none;
    background: url(images/search-btn.png) no-repeat;
    outline: none;
    cursor: pointer;
} 
```

此外，这里是初始状态和单击/打开状态的示例图像，以直观地了解我正在尝试做什么。谢谢！

![在此处输入图像描述](../Images/4c3d1b6d5927cbfafd843aabb8772123.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T20:45:54.317

因为关闭按钮在`.searchit`框内，所以第一个处理程序也被立即触发。在关闭处理程序期间停止单击事件的传播，它应该可以工作：

```
$('ul.tert-nav li.searchit img.closesearch').click(function(e) {
    e.stopPropagation();
    $('.searchbox').hide();
    $('ul.tert-nav li').removeClass('search');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:48:10.760

替代方法`stopPropagation()`是只在点击了它时才让它`div`去做`div`。

如果您在控件中有很多带有自己的点击事件的元素并且您不想更新所有元素，或者如果您需要让点击事件传播但仍希望能够在其中进行区分，这将非常方便在一些点击事件中。

尽管在您的特定情况下`stopPropagation()`会更容易偏离路线。

```
$('ul.tert-nav li.searchit').click(function (event) {
        // Did the click originate from this?
        if(event.target !== this){
            // No, it wasn't. So we do nothing.
            return;
        }

        $(this).addClass('search');
        $('.searchbox').fadeIn();
        $('ul.tert-nav li img.searchicon').hide();
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/Rad79/) - 验证点击事件的来源

* * *

# c++ - 如何执行并写入标准输入并将标准输出通过管道传输到套接字？

> ID：14716551
> 
> 赞同：2
> 
> 时间：2013-02-05T20:42:30.380
> 
> 标签：c++, c, cgi, pipe, dup2

我正在为我的学校项目编写一个 http 服务器，并且我正在尝试执行一个 CGI 脚本。以下代码成功执行了cgi程序，程序的输出发送到浏览器，但是我发送POST数据的方式有问题。这是我所拥有的：

```
 int p[2];
    pipe(p);

    int pid = fork();

    if (pid == 0) {
        close(p[1]);

        dup2(p[0], STDIN_FILENO);
        dup2(socket, STDOUT_FILENO);

        execve(path.c_str(), {}, (char**) &env[0]);
    } else {
        close(p[0]);

        string body = req->getBody();
        write(p[1], body.c_str(), body.size());

        close(socket);
    } 
```

如果我正确理解 CGI，我只需要设置一个 HTTP_CONTENT_LENGTH 环境变量（我正在这样做）并将请求正文发送到标准输入。我是否使用管道、dup2 并编写正确的方法来做到这一点？

发布到我的测试 PHP 脚本时，$_POST 数组为空。当发布到我的测试 perl 脚本时，它根本不会发送任何响应或完成运行；我认为它正在等待更多的标准输入。如果我的管道和 dup2ing 没有明显问题，我将发布一些可编译的测试代码来说明问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:55:17.410

管道和dup2ing都可以；我的问题是我的 CGI 环境变量。获胜的环境变量是 CONTENT_LENGTH，不以 HTTP_ 为前缀。

# android - Android 谷歌分析和维度

> ID：14716555
> 
> 赞同：7
> 
> 时间：2013-02-05T20:42:37.497
> 
> 标签：android, google-analytics-api, web-analytics

所以我们使用的是新版 GA for Android。

我们有一个登录和注销机制，我们正在使用会话上的自定义维度进行跟踪......

因此，当我们通过测试分析时，我们得到的事件显示为已注销，除非用户登录，否则无法访问触发注册事件的方法。

我的问题是，在下一次调度之前会话发生变化时，GA 调度如何处理项目？

IE

启动应用

做事件A，做事件B，做事件C

登录和更改会话尺寸

做事件D，做事件E，做事件F

派遣

事件 ac 是否会显示为已注销，而 df 是否会显示为已登录？还是它们都显示为已注销，因为这是调度队列开始命中时应用于会话的维度状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T01:14:25.403

会话范围的自定义维度将采用会话期间设置的最后一个值。

让我们将这个问题从天气中抽象出来，或者用户是否登录或注销。假设您有一个会话，并且在该会话中，您向您发送页面视图，每个页面视图都具有会话范围的自定义维度 ga:dimension1 的不同值。当您查询该会话中发生的事件时，您希望该维度具有什么值？您可能应该期望它是您设置的最后一个值。

那么，关于会话范围的自定义维度，我们可以了解您提到的 EventA 事件 B 和事件 C 吗？您可以了解这些事件是在用户登录的会话期间发生的，而不是在这些事件发生时用户登录的天气。

更改会话范围的自定义维度的值不会创建新会话。如果您想跟踪发生命中的状态，也许您需要一个命中范围的自定义维度。

# r - 交叉表函数运行时 R Studio 崩溃

> ID：14716558
> 
> 赞同：1
> 
> 时间：2013-02-05T20:42:44.620
> 
> 标签：r, rstudio

我在运行 Crosstable 函数时遇到了 R Studio 崩溃的问题。首先，我正在安装以下软件包：

```
install.packages ("gmodels"); install.packages("MASS")
library (gmodels); library (MASS) 
```

然后，我在我的数据框上运行以下代码：

```
CrossTable(dat$PopSize, dat$PCIncChange, fisher = TRUE, chisq = TRUE)
expected = TRUE, sresid = TRUE, format="SPSS") 
```

R 生成表格，但不允许我在控制台中执行任何其他代码。它也不允许我保存文件或退出程序（我每次都必须使用 control alt delete）。

-- 编辑：从评论中添加会话信息 --

```
sessionInfo(): 
R version 2.15.2 (2012-10-26) 
Platform: x86_64-w64-mingw32/x64 (64-bit) 
locale: [1] LC_COLLATE=English_United States.1252 LC_CTYPE=English_United States.1252 [3] LC_MONETARY=English_United States.1252; LC_NUMERIC=C [5] LC_TIME=English_United States.1252
attached base packages: [1] splines stats graphics grDevices utils datasets methods base –
other attached packages: [1] MASS_7.3-23 gmodels_2.15.3 Hmisc_3.10-1 survival_2.36-14 stringr_0.6.2 
loaded via a namespace (and not attached): [1] cluster_1.14.3 gdata_2.12.0 grid_2.15.2 gtools_2.7.0 lattice_0.20-10 tools_2.15.2 
```

有任何想法吗？

# javascript - 如何在没有隐藏输入字段的情况下将值从 javascript (innerhtml) 传递到 asp.net 代码隐藏？

> ID：14716559
> 
> 赞同：1
> 
> 时间：2013-02-05T20:42:49.917
> 
> 标签：javascript, asp.net, callback, hidden-field, mailmessage

我有一个 aspx 页面（主页），我使用 window.loaded 事件在按钮单击时填充另一个 aspx 页面（弹出）上的一些 div。代码如下：

mainpage.aspx 上的脚本

```
 <script type="text/javascript">

      window.callback = function (doc) {

          if (document.getElementById('GridView2') != null)
          {
              // Get Gridview HTML and wrap it with <table> tag
              var temp = document.getElementById('GridView2').innerHTML;
              var temp2 = "<table>" + temp + "</table>";

              doc.getElementById('foo').innerHTML = temp2; // this works fine
          }
          else
          {
              // GridView is missing, do nothing!
          }
      }

      function openWindow() {

          // Only open a new Compose Email window if there is a Gridview present
          if ((document.getElementById('GridView2') != null)) {
              var mywindow = window.open("Popup.aspx");
          }
          else {
              alert("Please create GridView first");
          }
      } 
```

Popup.aspx 上的代码

```
 <script type="text/javascript">
    function loaded() {
        window.opener.callback(document);
        alert(document.getElementById('foo').innerHTML); //This alerts the code I need

        //var input = document.createElement("input");
        //input.setAttribute("type", "hidden");
        //input.setAttribute("name", "testinput");
        //input.setAttribute("runat", "server");
        //input.setAttribute("value", document.getElementById('foo').innerHTML);

        ////append to form element that you want .
        //document.getElementById("foo2").appendChild(input);
    }
</script>

<asp:Button OnClick="Send_Email_Button_Click" ID="SendEmail" Text="Send Email" CssClass="Button1" runat="server" />
            <div id="foo" runat="server">

            </div> 
```

弹出窗口.aspx.cs

```
protected void Send_Email_Button_Click(object sender, EventArgs e)
{
    string subject = String.Format("TEST EMAIL");
    string mailto = "me@mysite.com";
    string mailfrom = Environment.UserName + "@mysite.com";
    string mailBody = "<h1>Testing</h1>";

    MailMessage mail = new MailMessage(mailfrom, mailto, subject, null);
    mail.IsBodyHtml = true;
    mail.Body = mailBody;
    SmtpClient smtpClient = new SmtpClient("smtphost");
    smtpClient.Credentials = CredentialCache.DefaultNetworkCredentials;
    try
    {
        smtpClient.Send(mail);
    }
    catch (Exception ex)
    {

    }
} 
```

现在，我一直在尝试将 div.innerhtml 的值传递给代码隐藏，因此我可以使用此 HTML 标记创建电子邮件。我尝试使用隐藏的 div，但我得到了一个关于请求验证的 asp.net 错误：输入字段中的 html 代码，这是一个公平的观点。我似乎无法访问 div.InnerHtml。我得到值“\r\n\r\n”。我有我需要的值，但它是在 Javascript 中的，我只需要一种将这个值传递给 C# 的方法，这样我就可以发送电子邮件了。

当我单击 SendEmail 按钮时，我再次收到警报（因为正在调用 window.loaded）。如何使 Popup.aspx 仅填充一次，而不是在每次单击按钮时填充？以及如何传递 innerhtml 值以使 SendEmail 工作？非常感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:53:37.470

要将一些数据发送到后面的代码，有两种方法。**邮政**和**获取**。_

一种是通过回传发送数据 - 这意味着您需要将它们添加到隐藏或其他输入控件中，以便通过 post 发送它们。

另一种是将它们作为参数添加到 url。

这两种方法都可以与 ajax 调用一起使用。所以选择一个并将您的数据发送到后面的代码。

关于留言：

```
Request Validation: html code in an input field 
```

这是一般用途的安全措施，在您的情况下，如果您知道要在代码后面发送 html 代码，并且您知道如何控制它，简单地禁用它并且不用担心 - 请注意稍后要渲染的内容.

来自 ASP.NET 中的 MSDN[请求验证](http://msdn.microsoft.com/en-us/library/hh882339(v=vs.100).aspx)：

> 如果您希望您的应用程序接受 HTML 标记，这可能是个问题。例如，如果您的网站允许用户添加评论，您可能希望让用户使用 HTML 标记执行基本格式设置，这些标记将文本以粗体或斜体显示。**在这种情况下，您可以禁用请求验证并手动检查恶意内容**，或者您​​可以自定义请求验证以便接受某些类型的标记或脚本

## 更新

有效的示例代码：主页

```
<head runat="server">
    <title></title>

    <script type="text/javascript">
      window.callback = function (doc) {
            doc.getElementById('SendBack').value = escape("<b>send me back</b>"); 
      }

      function openWindow() {
            var mywindow = window.open("Page2PopUp.aspx");          
      }
    </script>

</head>
<body>
    <form id="form1" runat="server">
        <a href="#" onclick="openWindow();return false">open pop up</a>
    </form>
</body>
</html> 
```

弹出页面

```
<head runat="server">
    <title></title>
   <script type="text/javascript">
    function GetDataBack() {
        window.opener.callback(document);
    }
</script>
</head>
<body >
    <form id="form1" runat="server">
    <div>
        <input id="SendBack" name="SendBack" value="" type="hidden" />    
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" OnClientClick="GetDataBack()" />    
        <asp:Literal runat="server" ID="txtDebugCode"></asp:Literal>    
    </div>
    </form>
</body>
</html> 
```

并阅读：

```
protected void Button1_Click(object sender, EventArgs e)
{
    txtDebugCode.Text = Server.UrlDecode(Request.Form["SendBack"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:11:08.047

因此，经过半天的努力，我终于通过仅使用代码隐藏来处理客户端*和服务器脚本。*我从未听说过 Server.Transfer 和 Page.PreviousPage，所以它对我很有帮助，但事实证明它正是我所需要的。

[这里有一篇很棒的 msdn 文章](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage%28v=vs.100%29.aspx)详细解释了这个概念，但只要你使用 Server.Transfer 打开新页面就可以访问上一个页面的控件就足够了。现在我认为我的麻烦到此为止了，但显然 Server.Transfer 是古老的，并且与 UpdatePanel 处理回发的方式相混淆。[另一篇解释问题和解决方法的精彩文章在这里](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)。我使用[PostBackTrigger 上的 msdn 文章](http://msdn.microsoft.com/en-us/library/system.web.ui.postbacktrigger.aspx)最终让我的代码正常工作。

And finally, mad props to Aristos, he sat and helped me through this, so I'm going to mark his answer as the right answer--since mine's an alternative and not the answer to my question. That's all, folks!

# ios - 无法让应用内购买工作

> ID：14716561
> 
> 赞同：5
> 
> 时间：2013-02-05T20:42:52.413
> 
> 标签：ios, in-app-purchase, storekit

好吧，我正在为此撕毁我的头发。我正在开发一个免费的应用程序（带有广告和一些锁定功能）。应用内购买将删除广告并提供完整功能。

因此，我设置了一个 SKProductsRequest，将我的产品 ID (com.mydomain.Myapp.fullversion) 传递给它并执行“开始”。这不会失败并继续调用 productsRequest:didReceiveResponse:，其中 NSLog 显示**response.products.count 等于零**- 所以问题！

所以，首先愚蠢的问题。

**Q1。**在我的测试设备上通过 Xcode 运行我的应用程序时，测试设备是否需要连接到 Internet（例如无线开启）或者运行 Xcode 的 Mac 有 Internet 连接就足够了？（回答：您需要在测试设备上进行连接）。

**Q2.我如何让它工作？**

我已经检查了以下所有内容：

**您是否为您的 App ID 启用了应用内购买？：**
在应用 ID 下的供应门户中，我启用了“bundle_seed_id.com.mydomain.Myapp”和“应用内购买”。

**您是否为您的产品检查了已清除销售？：**
在 iTunes Connect 中，我创建了我的应用内购买“com.mydomain.Myapp.fullversion”，并且已清除销售。

**您的项目的 .plist Bundle ID 是否与您的 App ID 匹配？：**
是的，它设置为“com.mydomain.Myapp”。

**您是否为新的 App ID 生成并安装了新的配置文件？：**
是的，我已经为“com.mydomain.Myapp”创建并安装了一个 PP。

**您是否已将项目配置为使用此新配置文件进行代码签名？：**
我只有“代码签名身份”下的条目（而不是 CS 权利、CS 资源规则路径和其他 CS 标志）。它已由 Automatic Profile Selector > IPhone Developer 设置，并与 Myapp 匹配，并设置为 Debug > Any SDK 和 Release > Any iOS SDK。

**您在发出 SKProductRequest 时是否使用了完整的产品 ID？：**
是的，我使用的是“com.mydomain.Myapp.fullversion”。

**将您的产品添加到 iTunes Connect 后，您是否等了几个小时？：**
是的，我已经等了 24 小时。

**您的银行详细信息在 iTunes Connect 上是否有效？：**
是的。

**您是否尝试过从设备中删除应用程序并重新安装？：**
很多次。

这里的观察：在测试设备上，我没有登录到“iTunes & App Stores”，当我在测试设备上从 Xcode 运行应用程序时，它没有要求我登录（我有一个测试用户设置在iTunes Connect 并准备好使用）。所以我的应用程序运行，在 SKProductRequest 上开始调用，但从不提示我登录到“iTunes & App Stores”。

提前谢谢了。我希望有人可以帮助我进行应用内购买。拜伦。

**更新 1：**这是一些代码，虽然我不确定这有多大帮助，正如我上面所说，它在 productsRequest:didReceiveResponse: 失败，因为不返回任何产品。

首先我打电话：

```
[[MyappIAPHelper sharedInstance] requestProductsWithCompletionHandler:^(BOOL success, NSArray *products)
     {
         if (success)
         {
             NSLog(@"SUCCESS - WE HAVE PRODUCTS");

             _products = products;

             NSLog(@"_products.count = %d", _products.count);
         }
         else
         {
             if(products == nil)
             {
                 NSLog(@"FAILED - WE HAVE NO PRODUCTS");
             }
         }
     }]; 
```

代码如下：

```
- (void)requestProductsWithCompletionHandler:(RequestProductsCompletionHandler)completionHandler
{
    _completionHandler = [completionHandler copy];

    NSLog(@"IAPHelper, requestProductsWithCompletionHandler{}, _productIdentifiers = %@", [_productIdentifiers anyObject]);

    _productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:_productIdentifiers];
    _productsRequest.delegate = self;
    [_productsRequest start];

} 
```

'start' 没有失败并继续调用 productsRequest:didReceiveResponse:

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response 
```

{

```
NSLog(@"Loading list of products...");

NSLog(@"iAPHelper, productRequest:didRecieveResponse{}, Products count = %d", response.products.count); 
```

一旦你进入这个函数，它就会失败，因为 response.products.count 等于零。

我刚刚将以下调试代码添加到 productRequest:didRecieveResponse{}

```
for (NSString *invalidProductId in response.invalidProductIdentifiers)
{
    NSLog(@"Invalid product id: %@" , invalidProductId);
} 
```

它指出“com.mydomain.Myapp.fullversion”是无效的。

**更新 2：**这已经不是一个笑话了 - 仍然无法正常工作！

我完全遵循了[http://developer.apple.com/library/ios/#technotes/tn2259/_index.html](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)。我认为问题可能是在创建我的应用内购买时我上传了一个屏幕截图 - 但我通过删除应用内购买来纠正这个问题，重新创建它以确保它处于“等待屏幕截图”状态根据文档。我现在已经等待了超过 12 个小时，以便重新创建的应用内购买通过 Apple 的服务器进行过滤。我从我的测试设备中删除了该应用程序。检查我是否已在测试设备上退出商店。重新启动我的测试设备。在 Xcode 中执行“清理”并重新启动 Xcode。从 Xcode 运行应用程序，你猜怎么着？无效的产品标识符！！！！**求助，求各位大神，我疯了！！！！！！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T03:27:13.147

**问题解决了**

在提出 TSI 后，Apple 代表终于发现了我的问题。

在 iTunes Connect 中查看我的应用程序，它表明它的 Bundle ID 为“Myapp”。而启用了应用内购买的供应门户中的应用 ID 是“bundle_seed_id.com.mydomain.Myapp”。不明显的是，或者至少对我来说，这个 App ID 由一个 Bundle ID 组成，该 Bundle ID 必须与 iTunes Connect 中应用程序的 Bundle ID 相匹配。

我在 Provisioning Portal 中创建的第一个 App ID 是一个通配符。当您完成创建新应用程序的过程时，它希望您输入您从下拉列表中选择的捆绑 ID，该下拉列表由供应门户中的应用 ID 填充。如果您选择一个带有通配符的 Bundle ID，它会要求提供一个 Bundle ID 后缀，我将在此处输入“Myapp”，然后“Myapp”最终成为您的 Bundle ID。有点奇怪，因为我认为这只是一个后缀。

后来（几个月后）当我决定要实现应用内购买时，我会发现通配符应用 ID 不能用于推送通知或应用内购买。所以我会在供应门户中创建一个新的应用程序 ID，按照提示“推荐的做法是对应用程序 ID 的捆绑标识符部分使用反向域名样式字符串” - 因此我输入了' com.mydomain.Myapp'。我不知道我为 App ID 创建的 Bundle ID 必须与之前在 iTunes Connect 中创建的应用程序的 Bundle ID 匹配。

我现在已经在供应门户中创建了一个新的应用程序 ID 'bundle_seed_id.Myapp'，瞧，我的产品 ID 'com.mydomain.Myapp.fullversion' 不再无效，现在似乎可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:34:18.703

A1。您需要在测试设备上建立连接

A2。发布一些代码

# android - getSize 总是返回零

> ID：14716562
> 
> 赞同：0
> 
> 时间：2013-02-05T20:42:52.760
> 
> 标签：android

我试图捕捉手指触摸屏幕的区域以及屏幕上的压力量。我试过`Motionevent.getsize()`了，我总是得到一个 0 的值。而且，`Motionevent.getpressure()`总是给我一个 1 的值。

getX()、getY() 和 getEventTime() 等其他函数似乎工作正常。还有其他方法可以获取触摸事件的大小和压力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:51:33.953

返回给定指针索引的近似大小的缩放值（用于`MotionEvent.GetPointerId(int)`查找此索引的指针标识符）。这代表了被按下的屏幕区域的某种近似值；与触摸对应的实际像素值使用设备特定的值范围进行归一化，并缩放到 0 到 1 之间的值。大小的值可用于确定胖触摸事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:58:47.150

对于 getPressure()

返回给定指针索引的此事件的当前压力（使用 getPointerId(int) 查找此索引的指针标识符）。压力的范围通常从 0（完全没有压力）到 1（正常压力），但是根据输入设备的校准，可能会产生高于 1 的值。

此信息来自 Android 文档...这是一个有用的链接，其中包含您可能会发现有用的许多其他功能：

[http://developer.android.com/reference/android/view/MotionEvent.html#getPressure%28int%29](http://developer.android.com/reference/android/view/MotionEvent.html#getPressure%28int%29)

# android - E: 找不到包pip

> ID：14716569
> 
> 赞同：16
> 
> 时间：2013-02-05T20:43:32.183
> 
> 标签：android, python, ubuntu, pip

我一直在尝试设置 Python-android 环境，并不断收到此错误消息：

```
~$ sudo apt-get install build-essential patch git-core ccache ant pip python-devsudo: /var/lib/sudo/plaix writable by non-owner (040777), should be mode 0700
[sudo] password for plaix: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package pip 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-14T22:16:51.800

在 Ubuntu 中，[`pip`](http://manpages.ubuntu.com/manpages/precise/en/man1/pip.1.html)是由[`python-pip`](https://packages.ubuntu.com/search?keywords=python-pip&searchon=names&suite=all&section=all)软件包提供的。您可以在软件中心安装它，或者，如果您更喜欢使用命令行：

```
sudo apt-get update && sudo apt-get install python-pip 
```

如果您还没有安装[`python-dev`](https://packages.ubuntu.com/search?suite=all&section=all&arch=any&keywords=python-dev&searchon=names)和[`build-essential`](https://packages.ubuntu.com/search?suite=all&section=all&arch=any&keywords=build-essential&searchon=names)，您也应该安装它们。（但似乎您的`apt-get`命令*可能*已成功安装它们。如果您不确定，可以通过尝试再次安装它们来检查。或者使用`apt-cache policy python-dev build-essential`.）

安装必要的软件后，如果您希望进一步更新它，您可以`pip`通过运行以下命令自行更新：

```
sudo pip install --upgrade pip 
sudo pip install --upgrade virtualenv 
```

***资料来源：****[艾略特](http://www.saltycrane.com/about/)**[如何在 Ubuntu 上安装 pip](http://www.saltycrane.com/blog/2010/02/how-install-pip-ubuntu/)**（*已过时，但仍应适用）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-22T09:06:14.723

要安装 pip，请下载[get-pip.py](https://bootstrap.pypa.io/get-pip.py)。然后运行这个命令：

```
sudo python get-pip.py 
```

它将从源代码下载并安装 pip。要检查是否安装了 pip，请键入：

```
which pip 
```

它将显示 pip 所在的位置

```
/usr/local/bin/pip 
```

或只需键入：

```
pip 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-05T21:34:08.457

你想要的包没有被调用`pip`，名字取决于python版本。

蟒蛇2： `sudo apt-get install python-pip`

蟒蛇 3： `sudo apt install python3-pip`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-09T04:16:41.437

如果你使用的是 python 3.xx 版本，试试这个。

`sudo apt-get install python3-pip`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T22:14:45.593

Python 包通常有一个`python`前缀。

尝试安装`python-pip`而不是`pip`（这可能会根据您正在处理的发行版而改变）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-12T15:33:02.517

只需更新使用：

```
sudo apt-get update 
```

您的问题将得到解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-03T17:59:46.370

只需删除 python-pip-whl

```
sudo apt-get remove python-pip-whl 
```

现在再试一次它会工作

# algorithm - 了解流压缩算法中的最终值

> ID：14716573
> 
> 赞同：0
> 
> 时间：2013-02-05T20:43:55.037
> 
> 标签：algorithm, sorting, stream-compaction

流压缩算法中的最终排他扫描值应该如何处理？

这是挑选所有“A”字符的示例。

序列A：

```
Input:       A B B A A B B A
Selection:   1 0 0 1 1 0 0 1
Scan:        0 1 1 1 2 3 3 3

0 - A
1 - A
2 - A
3 - A 
```

序列 B（除最后一个值外相同）：

```
Input:       A B B A A B B B
Selection:   1 0 0 1 1 0 0 0
Scan:        0 1 1 1 2 3 3 3

0 - A
1 - A
2 - A
3 - B 
```

显然，第二个示例基于对写入这些地址的扫描值进行简单循环，给出了错误的最终结果。

我在这里想念什么？

**更新：**

据我了解扫描算法，我将执行以下等效操作：

```
for (int i = 0; i < scan.length(); i++)
{
    result[scan[i]] = input[i];
} 
```

同时，这将涉及分散指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:28:13.757

在 A 之后，您假设至少会有另一个 A。因此，您假设序列以 A 结尾。如果不是，则您选择了错误的最后一个字母。

你只需要数As。不要从 1 开始。从 0 开始。只有在找到 A 时才增加此计数。

或者......**更新：**

```
Input:       A B B A A B B A
Selection:   1 0 0 1 1 0 0 1
Scan:        0 1 1 1 2 3 3 3 4
                             ^
0 - A                        |
1 - A                        Four elements
2 - A
3 - A

Input:       A B B A A B B B
Selection:   1 0 0 1 1 0 0 0
Scan:        0 1 1 1 2 3 3 3 3
                             ^
0 - A                        |
1 - A                        Three elements
2 - A 
```

# asp.net-mvc-4 - 每个请求中的每个控制器都会调用 IControllerFactory.CreateController

> ID：14716577
> 
> 赞同：0
> 
> 时间：2013-02-05T20:44:28.920
> 
> 标签：asp.net-mvc-4, controller-factory

我遇到了一个问题，虽然不是很严重，但仍然引起了我的注意。我碰巧有一个 MVC4 Web 应用程序，我已经将默认控制器工厂替换为我自己实现的一个，在这个工厂中，我使用 unity 为控制器注入构造函数参数。

我不明白的是，为什么对于我提出的每一个请求，都会为应用程序中的每个控制器调用 CreateController 方法，而不仅仅是 url 中的控制器和部分视图调用的控制器。

这种行为正常吗？是否有必要或有办法防止它？我认为没有任何理由，我的研究也没有让我得到任何好的答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:57:51.820

哈！事实证明，当您使用 mvc 站点地图解决方案时，它会为每个请求构建每个控制器，通过删除此行，不再发生这种奇怪的行为

```
@Html.MvcSiteMap().SiteMapPath() 
```

无论如何感谢阅读本文的人，我希望有人觉得这很有用！

# java - 为 Android 的 libcrypto.so 函数制作 JNI 包装器

> ID：14716580
> 
> 赞同：2
> 
> 时间：2013-02-05T20:44:40.810
> 
> 标签：java, android, android-ndk, java-native-interface, wrapper

首先我尝试使用[Cipher Class](http://developer.android.com/reference/javax/crypto/Cipher.html)，但由于性能问题我不得不放弃它。Cipher Class 产生大量实例，GC 崩溃。另一种选择是使用 NDK，所以我设法构建了[openssl-android](https://github.com/guardianproject/openssl-android)。现在使用 libcrypto.so 和 libssl.so 构建，我不知道如何将它们与我的项目中的新 .c 文件链接，以制作我在 Java 端需要的加密函数的包装器。

这是 libcrypto.so 我需要的功能：

```
void AES_cbc_encrypt(const unsigned char *in, unsigned char *out,
size_t length, const AES_KEY *key,
unsigned char *ivec, const int enc); 
```

包装器将是这样的： Java 端：

```
public static native byte[] AESEncrypt(byte[] in, byte[] key, byte[] ivec, int enc); 
```

本机包装器（带有共享库的 .c 文件端）

```
jbyteArray Java_com_myApp_Main_AESEncrypt(JNIEnv* env, jobject this, jbyteArray in, jbyteArray key, jbyteArray ivec, jint enc) 
```

提前谢谢，如果我的英语不是最好的，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:05:30.877

使用[JavaCPP](https://github.com/bytedeco/javacpp)，这样的接口 .java 文件应该可以解决问题：

```
@Platform(include="openssl/aes.h", link="crypto")
public class crypto {
    static { Loader.load(); }
    public static native void AES_cbc_encrypt(@Cast("unsigned char *") byte[] in,
            @Cast("unsigned char *") byte[] out, @Cast("size_t") long length,
            @Cast("const AES_KEY *") byte[] key, @Cast("unsigned char *") byte[] ivec, int enc);
} 
```

我们可以将其包装到另一个静态方法中以匹配您所需的 API。

# javascript - 垂直轮播循环中的jQuery mouseenter / hover停止动画

> ID：14716581
> 
> 赞同：1
> 
> 时间：2013-02-05T20:44:50.433
> 
> 标签：javascript, jquery, animation, loops, carousel

所以我构建了一个非常简单的自动垂直轮播，它循环遍历项目列表，但是现在我需要在鼠标进入 div 时停止循环，我尝试了 stop() 但没有奏效。

我的 HTML 看起来像这样：

```
<div class="relative pegascontainer">
<ul class='pegas'>
    <li>
        <div class="pega">
            ...
        </div>
    </li>
    <li>
        <div class="pega">
            ...
        </div>
    </li>
    <li>
        <div class="pega">
            ...
        </div>
    </li>
    <li>
        <div class="pega">
            ...
        </div>
    </li>
</ul> 
```

而我的 JS（190 只是容器的高度）：

```
var listi = $(".pegas").children("li"),
    listiNum = (listi.length)/2,
    listiMax = (listiNum*190)-190;

function pegaLoop(){
    for (var i=0,len=listiNum; i<len; i++){

        $(".pegas").animate({
            'margin-top': -190*i
        }, 500, function(){
            if($(this).css("margin-top") == "-"+listiMax+"px"){
                $(this).animate({'margin-top': 0});
                pegaLoop();
            }
        }).delay(1000);

    }

};

pegaLoop(); 
```

我试过这样的事情，但没有奏效：

```
$(".pegas").hover(function() { 
        $('.pegas').stop();
    }, function() {
        pegaLoop();
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:11:36.423

JQuery 不擅长这个开箱即用。您可能想尝试一个小的[JQuery Pause Plugin](http://tobia.github.com/Pause/)。

我知道这会让你写出类似的东西：

```
function pegaLoop()
{
   for (var i=0,len=listiNum; i<len; i++) // probably better as $("pegas li").each(...)
   {
       $(".pegas").animate({'margin-top': -190*i}, 500).delay(1000);
   }
   $(this).animate({'margin-top': 0}, pegaLoop);
} 
```

请注意，所有这些都是设置一个动画队列，其中包含最终重复到顶部的延迟，然后再次进入队列中的所有动画。我们不想放入`pegaLoop`每*一个*回调，而只想放入最后一个。

暂停（使用插件）将是：

```
$(".pegas").hover(function()
 {
     $('.pegas').pause();
 },
 function()
 {
    $('.pegas').resume();
 }); 
```

# ios - 识别首次应用启动的问题

> ID：14716587
> 
> 赞同：-1
> 
> 时间：2013-02-05T20:45:31.577
> 
> 标签：ios, objective-c

首次启动应用程序后，我将按照[此答案显示一些介绍性消息。](https://stackoverflow.com/questions/9450391/show-screen-on-first-launch-only-in-ios)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...    
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"hasSeenTutorial"]){
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"hasSeenTutorial"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [interface addHelpCards:nil];
    NSLog(@"-First Time-");
} else {
    NSLog(@"-Not First Time-");
}
...
} 
```

问题是......它不起作用。我正在我的设备上对此进行测试。一旦我双击以完全关闭应用程序然后重新启动，我就会再次收到“第一次”消息。知道这种方法有什么问题吗？我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:48:06.600

您只设置`YES`if `hasSeenTutorial`is `hasSeenTutorial`already `YES`（它在 else 中）。只需将它（和`synchronize`）移动到 if 的第一部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:48:15.720

您应该在 if 而不是在 else 中设置 Bool 值。现在永远不会设置布尔值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T21:20:43.117

如果它不起作用，我会吃掉我的腿。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // ...

    id _object = [[NSUserDefaults standardUserDefaults] valueForKey:@"hasSeenTutorial"];

    if (_object == nil) {
        [[NSUserDefaults standardUserDefaults] setValue:@(TRUE) forKey:@"hasSeenTutorial"];
        [[NSUserDefaults standardUserDefaults] synchronize];

        NSLog(@"-First Time-");
    } else {

        NSLog(@"-Not First Time-");
    }

    // ...
} 
```

# jquery - change() 事件不适用于附加的输入

> ID：14716589
> 
> 赞同：0
> 
> 时间：2013-02-05T20:45:33.637
> 
> 标签：jquery, html

> **可能重复：**
> [jQuery - 附加选择的 .change() 不起作用](https://stackoverflow.com/questions/8444862/jquery-change-for-appended-select-doesnt-work)

每次值更改时，我都会尝试将表单提交到 php 文件...我有一个函数还允许用户添加另一个输入字段

在本示例中，我将默认字段（用户进入页面时随时可用的字段）称为“默认字段”，将任何添加的行称为“添加字段”。

因此，当用户单击默认字段并选择表单自动提交的值时会发生什么。但随后用户添加一行，然后为表单不会自动提交的添加字段选择一个值……用户有要实际单击提交，我尝试将 id 添加到添加的字段并使用该 id 通过 jquery 访问它，但它仍然无法正常工作.. 就像添加的行已附加，jquery 无法识别它们......可能是错误的但那是我最好的猜测。

这是我的jQuery：

```
$(function(){
     $("select").change(function(){
    $("#myform").submit();
     });
     $('#rowInput select').change(function(){
    $("#myform").submit();
     });

   });

$(function(){
        $("#add").click(function(){
            $("<tr id = 'rowInput'><td><select name = 'grades[]'><option value = '0'> SELECT </option><option value = 'A'>A</option><option value = 'AMINUS'>A-</option><option value = 'BPLUS'>B+ </option><option value = 'B'>B</option><option value = 'BMINUS'>B-</option><option value = 'CPLUS'>C+ </option><option value = 'C'>C</option><option value = 'CMINUS'>C-</option><option value = 'DPLUS'>D+ </option><option value = 'D'>D</option><option value = 'DMINUS'>D-</option><option value ='F'>F</option></select></td></tr>").fadeIn(200).appendTo("table");

        }); 
```

的HTML：

```
<form id = 'myform'>
   <table>
      <tr><td> 
        <select name = 'grades[]'>
             <option value = '0'> SELECT </option>
             <option value = 'A'>A</option>
             <option value = 'AMINUS'>A-</option>
             <option value = 'BPLUS'>B+ </option>
             <option value = 'B'>B</option>
             <option value = 'BMINUS'>B-</option>
             <option value = 'CPLUS'>C+ </option>
             <option value = 'C'>C</option>
             <option value = 'CMINUS'>C-</option>
             <option value = 'DPLUS'>D+ </option>
             <option value = 'D'>D</option>
             <option value = 'DMINUS'>D-</option>
             <option value ='F'>F</option>
       </select>
      </td>
     </tr>

   </table>
   <input type = 'submit' value = 'Submit'/>
</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T20:46:33.340

由于在`select`您注册事件侦听器时元素不可用，因此您必须使用事件委托：

```
$('#myform').on('change', 'select', function () {
    // run your code here...
}); 
```

* * *

[这是来自文档](http://api.jquery.com/on/)的引用：

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。
> 
> [...]
> 
> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

# wordpress - 在 JQuery Mobile 应用程序中显示 Wordpress 帖子列表

> ID：14716590
> 
> 赞同：0
> 
> 时间：2013-02-05T20:45:36.647
> 
> 标签：wordpress, jquery-mobile

我正在尝试制作我的第一个 JQuery Mobile 应用程序。我想要三个按钮，当每个按钮被按下时，它们都会显示一个新页面，其中包含来自 3 个不同类别的 Wordpress 博客文章的摘要列表。

例如：

```
Button 1 link- mysite.com/?cat=1
Button 2 link- mysite.com/?cat=2
Button 3 link- mysite.com/?cat=3 
```

因此，如果我按下“按钮 1”，则会加载一个新页面，其中列出了类别 1 中的帖子。每个帖子都是摘要格式（图像缩略图和简短文本）。然后单击此按钮进入博客文章的完整详细版本。

会用 RSS 提要完成吗？我见过提到 JSON，但不知道如何使用它。

任何帮助将不胜感激，因为我是新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:39:35.460

我建议使用一个单独的主题来生成 jQuery Mobile 可以使用的 HTML。根据您对该项目的抱负程度，您可以创建自己的项目或尝试在网上找到一个。

谷歌搜索“jquery mobile wordpress 主题”返回了一些有希望的结果，但 jQuery Mobile 在过去一年中发生了很大变化，因此请注意这些主题可能与最新版本不兼容。

如果您打算创建自己的主题，我建议使用默认主题之一作为起点。至少，您必须转换：

*   index.php（加载 jQuery Mobile 的 CSS 和 Javascript）
*   category.php（用于列表视图）
*   single.php（用于详细视图）

使用 jQuery Mobile 标记，以及您计划在其上包含类别链接的页面模板 (page.php?)。

RSS 和 JSON 格式不适合这个问题，因为 jQuery Mobile 依赖 HTML 标记来呈现页面。

# templates - 无法将单选按钮添加到 Kendo UI 网格

> ID：14716592
> 
> 赞同：0
> 
> 时间：2013-02-05T20:45:44.500
> 
> 标签：templates, radio-button, kendo-ui, kendo-grid

我试图在我的剑道网格中有一组 3 个单选按钮（每个按钮在不同的列但在同一行）但没有成功。我查看了 Kendo RowTemplate 文档，但它并没有指导我找到任何解决方案。它适用于复选框，但是当我将模板更改为“收音机”类型时，它会在我单击编辑按钮的第二个更改为复选框。有什么想法吗？下面是我的 kendoGrid 属性，我将 ** 放在字段属性中的“模板”行旁边。

```
div.kendoGrid({
                    dataSource:
                    {   error: function (e) {
                                    alert("An error occured: "+ e.xhr.responseText);
                                    this.cancelChanges();
                                },
                        type:"json",
                        transport: {
                            read: {
                                url: "/users/read",
                                cache: false,                        
                                dataType: "json"
                            },
                            update: {
                                url: function(user){
                                    var grid = $("#grid").data("kendoGrid");
                                    var model = grid.dataItem(grid.select());
                                    var roleIs;
                                    if (user.Admin) {
                                        roleIs="admin"
                                    }
                                    else if (user.Manager) {
                                        roleIs="manager"
                                    }
                                    else if (user.User) {
                                        roleIs="user"
                                    };
                                    return  "users/update/"+model.id+"/"+roleIs+"/"+user.name
                                },
                                type: "PUT"
                            },
                            destroy: {
                                url: function(user){
                                    return  "/users/destroy/"+user.id+"/"+user.name
                                    },
                                    type: "DELETE"
                            },
                            create: {
                                url: function(user){

                                    var roleIs;
                                    if (user.Admin) {
                                        roleIs="admin"
                                    }
                                    else if (user.Manager) {
                                        roleIs="manager"
                                    }
                                    else if (user.User) {
                                        roleIs="user"
                                    };
                                    return  "users/create/"+user.login+"/"+user.name+"/"+roleIs+"/"
                                },
                                type: "POST"
                            },
                            parameterMap: function(options, operation) {
                                if (operation !== "read" && options.models) {
                                    return {models: kendo.stringify(options.models)};
                                }
                            }
                        },
                        schema: {

                            model: 
                            { id: "id",
                                fields: {
                                    id:{ type: "number",editable: false},
                                    role:{ type: "string"},
                                    login: { type: "string",editable: false},
                                    name:{type: "string",editable: false},
                                    Admin: { type: "boolean"},
                                    Manager: { type: "boolean"},
                                    User: { type: "boolean"}
                                }
                            }
                        },
                        pageSize: 30,
                        serverPaging: false,
                        serverFiltering: false,
                        serverSorting: false
                    },

                    selectable: "row",
                    navigatable: true,
                    pageable: true,
                    height: 400,
                    columns: [//{field: "id"},
                        {
                        field: "name",
                        title:"User Name",
                        filterable: true,
                        nullable: false,
                        editable: false
                        },{
                            field: "Admin",
                            **template: '<input type="checkbox"  #= Admin ? "checked=checked" : "" # disabled="disabled"></input>'**,
                            width: 75
                        },{
                            field: "Manager",
                            **template: '<input type="checkbox"  #= Manager ? "checked=checked" : "" # disabled="disabled"></input>'**,
                            width: 75
                        },{
                             field: "User", 
                             **template: '<input type="checkbox"  #= User ? "checked=checked" : "" # disabled="disabled"></input>',**
                             width: 75
                        },{
                             command: ["edit", "destroy"], title: "", width: "195px"
                        }],
                    editable:{mode: "inline"} 
                });
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:56:47.360

版本的格式由控制[`columns.editor`](http://docs.kendoui.com/api/web/grid#columnseditor-function)

您需要编写一个将 定义`input`为单选按钮的编辑器函数。

# android - 网页未显示在android apk上

> ID：14716597
> 
> 赞同：3
> 
> 时间：2013-02-05T20:46:02.513
> 
> 标签：android, css, cordova, mobile

我正在使用phonegap基本上让我制作一个看起来像应用程序的网页，并且页面在android上的本机浏览器中正常，在模拟器中工作正常，但是当涉及到应用程序时（与分辨率相同模拟器）只有一个白色的空白页..

有任何想法吗？

我之前已经安装了apk并卸载了它..可能与此有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:45:33.630

确保您的 Activity 没有：

```
setContentView(R.layout.activity_main); 
```

也许，您的布局是空的，并且该行仍然与以下内容一起存在：

```
super.loadUrl("file:///android_asset/www/dummy.html"); 
```

您还可以在 /res/xml 文件夹 (/res/xml/config.xml) 中包含一个*config.xml文件*

这是一个基本示例：

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->

<log level="DEBUG"/>
<preference name="useBrowserHistory" value="true" />
<preference name="exit-on-suspend" value="false" />
  <plugins>
     <plugin name="App" value="org.apache.cordova.App"/>
     <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>     
  </plugins>
</cordova> 
```

当我第一次开始尝试 phonegap 时，我遇到了类似的麻烦。另外，请确保*cordova-2.2\.* .jar 位于您的 libs 文件夹中，并且它也在您的构建路径中被引用。

希望有帮助。

# php - 我们如何在没有 MYSQL 负载的情况下创建 XML？

> ID：14716602
> 
> 赞同：1
> 
> 时间：2013-02-05T20:46:16.673
> 
> 标签：php, mysql, xml, node.js, phpwebsocket

我有一个带有活动表的 MYSQL 数据库，其行是文本语句（活动）。我的挑战是在将最新活动插入表格后立即将其推送到股票行情（显示我所有最新活动的区域）中。我可以每 N 秒 ping 一次表，但这会消耗大量内存资源和服务器。所以 XML 是最好的方法，但是如何在没有任何 MYSQL 负载的情况下创建 XML 文件的问题？请建议我如何实现这一目标。提前致谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:11:35.210

您可以使用 node 的[Net](http://nodejs.org/api/net.html)模块或[Socket.io](https://github.com/learnboost/socket.io/)在客户端和服务器上创建和处理 Websocket。

当您处理来自用户的将活动推送到表中的请求时，您将使用此新活动向客户端发送一个套接字消息，以便您可以更新代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:08:16.130

Websocket 旨在响应 PUSH 请求（服务器到客户端）问题，避免这些昂贵的“每 x 秒刷新一次”操作。

显然 HTML5 提供了处理 websockets 的新工具，也许你想看看它们？

参考：[http ://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

# javascript - 如何使用一键通过javascript计算和验证，然后提交和导航

> ID：14716606
> 
> 赞同：2
> 
> 时间：2013-02-05T20:46:23.313
> 
> 标签：javascript, jsf-2, primefaces

我有一个 js 函数`codeAddress()`，它通过 google maps javascript api 完成一个地址并设置一个全局 js-variable `valid = true`，如果完整地址被识别的话。它还`<p:inputText>`用完整的地址更新 a 的值。

现在我有一个`<p:commandButton>`我想要的

1.  执行`codeAddress()`
2.  如果`valid = true`提交表单，`<p:inputText>`则地址保存在`addressBean`和
3.  导航到下一页
4.  如果`valid = false`触发 jsf-validator 消息

不幸的是，我的设置仍然不能`valid`作为确定下一页的基本值。看来，该值提交给 bean 为时已晚。

这是我的jsf代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
        <script src="https://maps.googleapis.com/maps/api/js?v=3&amp;sensor=false"></script>
</h:head>
<h:body>
    <h:outputScript name="jsf.js" library="javax.faces" target="head"/>
    <h:outputScript library="js" name="bugMaps.js" />
    <body onload="initialize()" />
    <h:form id="addressForm" onsubmit="codeAddress();">
        <p:inputText id="address" required="true"
            validatorMessage="Please enter a valid address." validator="#{addressBean.validate()}">
            <p:ajax update=":addressForm:addressValidate" />
        </p:inputText>
        <h:message id="addressValidate" for=":addressForm:address"/>
        <p:commandButton value="submit"
            onclick="codeAddress();"/>
        <p:inputText id="fullAddress" value="#{addressBean.fullAddress}" />
        <p:inputText id="valid" value="#{addressBean.valid}" />
    </h:form>   
</h:body>
</html> 
```

这是 bugMaps.js：

```
var geocoder;
var map;
var valid;

function initialize() {
    geocoder = new google.maps.Geocoder();
}

function codeAddress() {

    var address = (document.getElementById('addressForm:address').value + ", Germany");
    geocoder.geocode({'address' : address},function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var latLong = results[0].geometry.location;
            var latitude = results[0].geometry.location.lat();
            var longitude = results[0].geometry.location.lng();
            var country, postal_code, locality, street_number, route;
            for (i = 0; i < results[0].address_components.length; ++i) {
                var component = results[0].address_components[i];
                if (!locality && component.types.indexOf("locality") > -1)
                    locality = component.long_name;
                else if (!postal_code && component.types.indexOf("postal_code") > -1)
                    postal_code = component.long_name;
                else if (!country && component.types.indexOf("country") > -1)
                    country = component.long_name;
                else if (!street_number && component.types.indexOf("street_number") > -1)
                    street_number = component.long_name;
                else if (!route && component.types.indexOf("route") > -1)
                    route = component.long_name;
            }

            if (typeof latLong != "undefined"
                && typeof latitude != "undefined"
                && typeof longitude != "undefined"
                && typeof route != "undefined"
                && typeof street_number != "undefined"
                && typeof postal_code != "undefined"
                && typeof locality != "undefined"
                && typeof country != "undefined"){
                valid = true;

            }
            else{
                valid=false;
            };
            document.getElementById('addressForm:fullAddress').value = results[0].formatted_address;

            jsfSubmit();

        }
        else{
            alert('Geocode was not successful for the following reason: '+ status);
            valid=false;

        }
    }); 
};

function navigateToAnotherPage(data){
    if(valid){
        document.location.href='nextPage.xhtml';
    }
};

function jsfSubmit(){
    jsf.ajax.request(this, event, {execute:"@form", onevent:navigateToAnotherPage});
    alert("nothing"); // FIXME: without this useful alert bean keeps old values and display them on nextPage
}; 
```

这是我的 AddressBean.java：

```
package hoho.main.managebean;

import java.io.Serializable;

import javax.enterprise.context.SessionScoped;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.component.UIInput;
import javax.faces.context.FacesContext;
import javax.faces.validator.ValidatorException;
import javax.inject.Named;

import com.sun.faces.util.MessageFactory;

@Named
@SessionScoped
public class AddressBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private String fullAddress;
    private boolean valid = false;

    public void validate(FacesContext context,
            UIComponent toValidate, Object value) {
        if(!valid){
              String client = toValidate.getClientId(context);  
              FacesMessage msg = MessageFactory.getMessage(UIInput.REQUIRED_MESSAGE_ID, client);  
              throw new ValidatorException(msg);
        }
    }

    public String getFullAddress() {
        return fullAddress;
    }

    public void setFullAddress(String fullAddress) {
        this.fullAddress = fullAddress;
    }

    public boolean isValid() {
        return valid;
    }

    public void setValid(boolean valid) {
        this.valid = valid;
    }

} 
```

这是 nextPage.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>

    <h:outputText value="#{addressBean.fullAddress}" />

</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:28:04.200

您可以`jsf.ajax.request`在您的 javascript 中使用来提交您的表单。一个例子是

```
 function navigateToAnotherPage(data){
            //When the request is completed, we are safe to navigate to another page.
            if(data.status == "success"){
                alert("callback is invoked");
                //Go to another page
                document.location.href='destpage.xhtml';
            }
        }

        function jsfSubmit(){
            alert("Do your logic here");
            jsf.ajax.request(this, event, {execute:"@form", onevent:navigateToAnotherPage});
        } 
```

并将这个函数绑定到一个 jsf 组件

```
 <h:commandButton type="button" value="javascriptSubmit" onclick="jsfSubmit()"/> 
```

完整的参考在这里：[http ://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.ajax.html](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.ajax.html)

但是，我不知道如何通过 javascript 调用支持 bean 方法。所以我总是使用两个按钮。当我单击第一个按钮时的 javascript 处理逻辑，然后它触发提交表单并导航到另一个页面的第二个按钮上的单击事件。当然，第二个按钮是`display:none`。此外，它有点简单。

此外，验证不起作用，因为验证总是在更新支持 bean 之前发生。我看不到 javascript`var valid`中的 javascript 和`boolean valid`支持 bean 中的 javascript 之间的任何链接。但是，如果您`<p:inputText id="valid" value="#{addressBean.valid}" />`使用 javascript 更新、提交输入字段、更新支持 bean`valid`并使用此布尔变量进行验证，那么验证将始终失败。这是因为在`boolean valid`更新之前（例如，true），首先调用了验证方法（因此验证方法可能使用了过期的`valid`.

到处走走，您将验证器附加到`<p:inputText id="valid" value="#{addressBean.valid}" />`而不是`<p:inputText id="address" required="true"...../>`. `value`现在，您可以使用in获取输入字段的值`validate(FacesContext context, UIComponent toValidate, Object value)`。这里的值是您在页面输入字段中输入（或 javascript 输入）的值（因此它始终是最新的）。

请注意，此时`valid`backing bean 还没有更新。如果验证正常，则`valid`更新并设置为`value`您刚刚得到的。如果验证失败，`valid`则不更新。

总之，流程是 0\. 构建/恢复组件树。1.转换，验证。2\. 更新支持 bean 中的值。3\. 调用后台bean 方法 4\. 渲染页面。

# mobile - J2ME LWUIT lib，文本字段密码不显示最后一个字符

> ID：14716611
> 
> 赞同：2
> 
> 时间：2013-02-05T20:47:08.373
> 
> 标签：mobile, java-me, lwuit, lwuit-textfield

我对 J2ME 有点陌生……我使用 LWUIT 作为我的 UI 库。

我的问题是：我想显示一个只接受数字的密码 TextField（我成功了），但问题是，当它只接受数字时，最后一个字符没有显示，但是当我删除数字约束时出现最后一个字符！ ！！

即：密码文本字段显示最后一个字符，如：*****m

这里是TextField的创建，不复杂

```
tf = new TextField();
tf.setSize(new Dimension(100, 20));
tf.setMaxSize(20);
tf.setConstraint(TextField.PASSWORD);
tf.setInputMode("123");

Form form = new Form();
form.setTitle("Title");
form.addComponent(tf);
form.show; 
```

在此先感谢，阿希

# java - 什么是map[(int)x]++；它的作用是什么？

> ID：14716615
> 
> 赞同：0
> 
> 时间：2013-02-05T20:47:23.337
> 
> 标签：java, algorithm

嘿，我参加了 Facebook 黑客竞赛，我得到了这个问题的解决方案。我以 O(K^2) 的顺序解决了这个问题，但这个人在 O(^K) 中解决了这个问题。请解释一下代码在做什么。

```
 import java.io.File;
    import java.util.Scanner;

     public class FindTheMin {

private long getNextMin(long[] map, long start, long k) {
    while (map[(int)(start)] > 0)
        start++;
    return start;
}

public long findNth(long n, long k, long a, long b, long c, long r) {
    long[] cache = new long[100010];
    long[] map = new long[100010];
    long pre = a;
    for (int i = 0; i < k; i++) {
        long num;
        if (i == 0)
            num = a;
        else
            num = (b * pre + c) % r;
        cache[i] = num;
        if (num <= k + 1)
            map[(int) num]++;
        pre = num;
    }

    pre = getNextMin(map, 0, k);
    cache[(int)k] = pre;
    map[(int)pre]++;
    for (int i = 0; i <= (int)k; i++) {
        long deque = cache[i];
        if (deque > k) {
            long x = getNextMin(map, pre, k);
            cache[i] = x;
            map[(int)x]++;
            pre = x;
        } else {
            if (deque < pre) {
                if(map[(int)deque] == 1) {
                    cache[i] = deque;
                    pre = deque;
                    continue;
                }
            }
            map[(int)deque]--;
            long x = getNextMin(map, pre, k);
            cache[i] = x;
            pre = x;
            map[(int)x]++;
        }
    }

    return cache[(int)((n - 1) % (k + 1))];
}

public static void main(String[] args) {
    try {
        Scanner s = new Scanner(new File("in.txt"));
        int m = s.nextInt();
        FindTheMin f = new FindTheMin();

        for (int i = 1; i <= m; i++) {
            int n, k, a, b, c, r;
            n = s.nextInt();
            k = s.nextInt();
            a = s.nextInt();
            b = s.nextInt();
            c = s.nextInt();
            r = s.nextInt();
            System.out.println("Case #" + i + ": " + f.findNth(n, k, a, b, c, r));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

学习这样的东西的最佳方法是什么。学习java最好的方法？这是问题 [https://www.facebook.com/hackercup/problems.php?pid=494433657264959&round=185564241586420](https://www.facebook.com/hackercup/problems.php?pid=494433657264959&round=185564241586420)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:53:39.810

`map[(int)x]++`与以下内容相同：

```
int index = (int) x;
map[index]++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:44:53.943

在

```
long x = getNextMin(map, pre, k);
cache[i] = x;
map[(int)x]++; 
```

While`x`是 long，数组的索引只能是 int。此外，更重要的是，虽然`getNextMin`返回 a `long`，但程序员知道该值实际上是一个`int`(ie `x <= Integer.MAX_VALUE`)，否则可能会溢出导致负值，`x`从而导致 ArrayIndexOutOfBoundsException 异常。

现在因为 java 是静态类型的，尽管返回的值`getNextMin`适合`int`; 你仍然必须告诉编译器你打算将它用作`int`; 否则编译器会假设它是一个`long`. 这就是你看到的原因`(int)x`——因为数组索引必须是类型`int`

对于代码本身

```
map[(int)x]++; 
```

可以写成

```
map[(int)x] =  map[(int)x] + 1; 
```

或作为

```
int y = (int) x
map[y]++; // or as map[y] = map[y] + 1 
```

同样，如果返回的值`getNextMin`大于`Integer.MAX_VALUE`代码将抛出异常。因此，程序员没有处理潜在的异常可能是一个设计缺陷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T20:55:32.353

它的作用是`map[(int)x]++;`什么？

java 中的数组只接受整数索引，但代码中的 x 是一个长值。因此必须将其转换为 int：

此代码从数组映射中获取索引 x 处的元素并将值加 1：

如同：

```
map[ix]++;  // where ix = (int) x; 
```

问题 2：学习这类东西的最佳方法是什么。学习java最好的方法？

购买、阅读和理解：

```
Robert Sedgewick, Algorithms Fourth Edition 
```

# php - 仅为已知变量创建 PHP 类

> ID：14716617
> 
> 赞同：0
> 
> 时间：2013-02-05T20:47:39.367
> 
> 标签：php, class, methods

你好 Stack Over Flow 成员，我希望你们能帮助我一些我无法弄清楚的事情。我一直无法为下面的代码编写一个类，我希望你们中的一位 php 专家能提供帮助

```
$obj = new ClassName ();
$obj->setName ('Name of Something');
$obj->price = 500.00;
$obj ['address_primary'] = 'First Line of Address';
$obj->address_secondary = 'Second Line of Address';
$obj->city = 'the city';
$obj->state = 'ST';
$obj->setZip (12345);

echo 'Name :: ', $obj->name, PHP_EOL;
echo 'Price :: $', $obj ['price'], PHP_EOL;
echo 'Address :: ', $obj->address_primary, ' ', $obj->getAddressSecondary (), PHP_EOL;
echo 'City, State, Zip :: ', $obj->city, ', ', $obj ['state'], ' ', $obj->getZip (); 
```

每次我尝试编写一个类时，它要么打印出空白，要么 Web Storm 抛出一个关于方法未在类中声明的错误。

我使用的代码：

```
var $name;         // House Name
var $price;   // Price of House
var $address_1;         // Address 1
var $address_2;    // Address 2
var $city; // City
var $state; // state
var $zip; // zip

// Class Constructor
function Property($name, $price, $address_1, $address_2, $city, $state, $zip) {
$this->setName = $name;
$this->price = $price;
$this->address_primary = $address_1;
$this->address_secondary = $address_2;
$this->city = $city;
$this->state = $state;
$this->zip = $zip;
}
// Getter/Setter functions
function get_name() {
return $this->name;
}
function set_name($newname) {
$this->name = $newname;
}
function get_price() {
return $this->price;
}
function set_price($newprice) {
$this->price = $newprice;
}
function get_address_1() {
return $this->address_primary;
}
function set_address_1($newaddress_1) {
$this->address_primary = $newaddress_1;
}
function get_address_2() {
return $this->address_secondary;
}
function set_address_2($newaddress_2) {
$this->address_secondary = $newaddress_2;
}
function get_city() {
return $this->city;
}
function set_city($newcity) {
$this->city = $newcity;
}
function get_state() {
return $this->state;
}
function set_state($newstate) {
$this->state = $newstate;
}
function get_zip() {
return $this->setZip;
}
function set_zip($newzip) {
$this->setZip = $newzip;
}} 
```

任何代码建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:52:49.533

这真是一团糟！:) 您正在混合 setter/getter 和直接访问，并且正在使用老式的构造函数。你可以很快清理它。

```
class Property
{
    public function __construct($name, $price, $address_1, $address_2, $city, $state, $zip) 
    {
            $this->name = $name;
            $this->price = $price;
            $this->address_primary = $address_1;
            $this->address_secondary = $address_2;
            $this->city = $city;
            $this->state = $state;
            $this->zip = $zip;
    }
} 
```

如果您在构造函数中使用所有变量设置类，那么您应该像这样使用它：

```
$obj = new Property(
    "Name of Something",
    500,
    "First Line",
    "Second Line",
    "City",
    "State",
    "90210"        
);

echo 'Name :: ', $obj->name, PHP_EOL;
echo 'Price :: $', $obj->price, PHP_EOL;
echo 'Address :: ', $obj->address_primary, ' ', $obj->address_secondary, PHP_EOL;
echo 'City, State, Zip :: ', $obj->city, ', ', $obj->state, ' ', $obj->zip; 
```

您的代码的标记问题是：

您将成员与功能混合在一起。您的构造函数中的这种东西是重大破坏：

```
$this->setName = $price 
```

您还将子字符串访问 [] 与 -> 混合，并在顶部使用 getter ->getName()。保持一致，在这种情况下，尊重公共变量的语义。

最后，您的构造函数中有参数，但根本没有使用它。

替代方法是默认为您的构造函数签名变量赋值，以使它们成为可选的。

```
public function __construct($name = "", $price = 0, $address_1 = "", $address_2 = "", $city = "", $state = "", $zip = "" ) 
```

然后像以前一样使用公共成员访问权限：

```
$obj = new Property();
$obj->name = "Some Name"; 
```

祝你学习顺利。

# linq - 评估 linq where 子句中的列名

> ID：14716618
> 
> 赞同：0
> 
> 时间：2013-02-05T20:47:43.277
> 
> 标签：linq, where, dto

如果我在这里遗漏了一些明显的东西，我深表歉意......

我正在尝试自定义一种方法来创建一个 RadComboBox 过滤器，该过滤器可以根据用户类型进行调整（基于 Telerik 演示）。我正在使用业务逻辑层来拉入我的数据源，然后我尝试使用 linq 来选择组合框 OnItemsRequested 的值，具体取决于哪个组合框发出了请求。我正在尝试根据发出请求的 GridColumn 过滤器设置“where”子句中的参数。

这是我填写列表的代码：

```
private void list_ItemsRequested(object o, RadComboBoxItemsRequestedEventArgs e)
    {
        ((RadComboBox)o).DataTextField = this.DataField;
        ((RadComboBox)o).DataValueField = this.DataField;
        var employees = from emp in EmployeeBL.GetAllEmployees()
                        where emp.(this.UniqueName).Contains(e.Text)
                        select emp;
        ((RadComboBox)o).DataSource = employees;
        ((RadComboBox)o).DataBind();
    } 
```

我是否需要将 UniqueName 作为我的数据对象 (EmployeeDTO) 中的参数？

谢谢。

更新:: 感谢反馈，我在填充组合框列表方面取得了一些成功。但是，我认为我的 linq 声明中仍然存在错误。该列表是第一次构建的，但是，当我尝试进行“StartsWith”比较时，页面会抛出一个错误，指出*数据源不包含 datarows*，即使我确实输入了一个“可查找”字符串。

这就是我现在所拥有的。

```
private void list_ItemsRequested(RadComboBox o, RadComboBoxItemsRequestedEventArgs e)
    {
        o.DataTextField = this.DataField;
        o.DataValueField = this.DataField;

        DataTable dt = EmployeeBL.GetAllEmployees().AsDataTable();

        IEnumerable<DataRow> query =
            from emp in dt.AsEnumerable()
            where emp.Field<String>(this.UniqueName).StartsWith(e.Text)
            select emp;

        DataTable boundTable = query.CopyToDataTable<DataRow>();
        o.DataSource = boundTable;
        o.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:58:19.347

没有内置的方法。你有一些选择：

*   使用像[ScottGu 的动态 Linq 查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)
*   使用反射从属性名称[构建表达式](https://stackoverflow.com/questions/7246715/use-reflection-to-get-lambda-expression-from-property-name)
*   使用`switch`语句从已知的属性列表中选择表达式（易于编码，动态性较低）
*   使用[`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/bb396189.aspx)扩展方法创建一个数据表，*它支持通过*[s](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)进行基于字符串的排序/过滤[`DataView`](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:58:54.177

您是否尝试`this.UniqueName`在每个员工上调用指定的方法，并查看结果是否包含文本？是这样的，你可以使用反射。

如果您确定那`o`是 a `RadComboBox`，那么它也可以这样传递。

```
private void list_ItemsRequested(RadComboBox o, RadComboBoxItemsRequestedEventArgs e)
{
    o.DataTextField = this.DataField;
    o.DataValueField = this.DataField;

    PropertyInfo property = typeof(EmployeeDTO).GetProperty(this.UniqueName);
    var employees = from emp in EmployeeBL.GetAllEmployees()
                    where ((IQueryable<string>)(property.GetValue(emp))).Contains(e.Text)
                    select emp;
    o.DataSource = employees;

    o.DataBind();
} 
```

# iphone - 在主线程 GCD 上返回对象

> ID：14716625
> 
> 赞同：0
> 
> 时间：2013-02-05T20:48:11.920
> 
> 标签：iphone, nsarray, grand-central-dispatch

我想返回一组缓存图像。查看代码。我只是想返回我创建的数组，但我不能，`dispatch_get_main_queue`而且我不知道如何更改代码以返回数组。我确信这很容易，但我在较低级别的 C / GCD 语法上遇到了困难。谢谢。

```
-(NSArray *)returnArray
{

    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"something" ofType:@"plist"];
    NSArray *array = [NSArray arrayWithContentsOfFile:plistPath];

    NSMutableArray *finalArray = [[NSMutableArray alloc] initWithCapacity:array.count];

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{
       ]
        for(int i=0;i<array.count; i++) {

            NSString *filePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:[array objectAtIndex:i]];

            UIImage *frameImage = [UIImage imageWithContentsOfFile: filePath];
            UIGraphicsBeginImageContext(frameImage.size);
            CGRect rect = CGRectMake(0, 0, frameImage.size.width, frameImage.size.height);
            [frameImage drawInRect:rect];
            UIImage *renderedImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();

            [finalArray addObject:renderedImage];

        }

        dispatch_sync(dispatch_get_main_queue(), ^{
            //THIS IS WHAT IM TRYING TO DO, BUT I CANT
            return finalArray;
        });

    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:53:02.913

你不能在不牺牲异步的情况下做到这一点。您需要创建一个将该值作为参数的函数，并将 finalArray 作为参数传递给它。因此，不是您的控制流看起来像这样（-> 表示“调用”，<- 表示“返回”）：

```
returnArray -> 
    async (private queue) -> 
        sync (main queue) <-
    ... <-
returnArray <- 
```

它看起来像这样：

```
returnArray -> 
    async (private queue) -> 
        sync (main queue) ->
            useArray (array) 
```

# javascript - 如何从此 javascript 函数返回值

> ID：14716630
> 
> 赞同：0
> 
> 时间：2013-02-05T20:48:49.060
> 
> 标签：javascript, jquery, html, html2canvas

我正在使用[html2canvas](http://html2canvas.hertzen.com/)，我有下一个功能

```
hml2canvas($('body'), {
   onrendered: function(canvas) {           
         data = canvas.toDataURL('image/jpeg');
    }
}); 
```

现在，我想返回数据值，所以我尝试了这个

```
html2canvas($('body'), {
    onrendered: (this, imgBase64)         
});

var data;
function imgBase64(canvas) {
     data = canvas.toDataURL('image/jpeg');
}
console.log(data); 
```

但是当我看到控制台时，我得到“未定义”。如果我放入`console.log(data);`函数`imgBase64`中，我会得到图像的 base64，但我需要`data` 从该函数中取出另一个函数。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:17:17.120

我找到了这个[答案](https://stackoverflow.com/a/12196246/1418118)，所以我进行了修改以适应我的需要。

```
var html2obj = html2canvas($('body'));
var queue  = html2obj.parse();
var canvas = html2obj.render(queue);
var data = canvas.toDataURL('image/jpeg'); 
```

这样我`data`以后就可以使用了。

# c - 如何将所有子小部件移动到另一个容器

> ID：14716631
> 
> 赞同：0
> 
> 时间：2013-02-05T20:48:49.903
> 
> 标签：c, user-interface, gtk

我有一个 gtk 小部件（来自 gtk_dialog_new()），它是在不同的函数中创建的，并添加了一堆小部件。现在我想将此小部件的所有子项重新设置为另一个容器。就像是：

```
get_widget_get_all_childrent(list);
//loop over list and reparent all children 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:54:12.733

实际上，经过一番谷歌搜索后，我找到了答案。

首先我需要得到一个孩子的名单：

```
GList* list = gtk_container_get_children();

      //then loop over and reparent

     g_object_ref(widget);
     gtk_container_remove(GTK_CONTAINER(old_parent), widget);
     gtk_container_add(GTK_CONTAINER(new_parent), widget);
     g_object_unref(widget); 
```

# android - Android SQL 没有这个表？

> ID：14716632
> 
> 赞同：1
> 
> 时间：2013-02-05T20:48:55.400
> 
> 标签：android, sqlite

我对机器人开发很陌生，但我正在研究一些 SQL。我有一个扩展 SQLOpenDatabaseHelper 的类，并在 onCreate() 方法中执行：

```
 public static final String CREATE_DB = "CREATE TABLE " + TABLE_VOCAB_INFO
        + "(" + COLUMN_NAME + " TEXT NOT NULL PRIMARY KEY," + COLUMN_URL
        + " TEXT NOT NULL," + COLUMN_DOWNLOADED + "TEXT NOT NULL);"; 
```

但是，当我尝试像这样向数据库添加一些东西时：

```
 //Adding method 
        ContentValues cv = new ContentValues();
        cv.put(COLUMN_NAME, "item " + i);
        cv.put(COLUMN_URL, "random url");
        cv.put(COLUMN_DOWNLOADED, "true");
        open();
        database.insert(TABLE_VOCAB_INFO, null, cv); 
```

我得到错误：

```
 (1) no such table: vocab_info 
```

我将如何解决这个问题？

编辑：更多信息。

我在助手的 onCreate() 方法中创建数据库，如下所示：

```
 public void onCreate(SQLiteDatabase db) {
        try {
            db.execSQL(CREATE_DB);
        } catch (SQLiteException e) {
            System.out.println("Error with creation");
        }
    } 
```

我使用这样的添加方法访问数据库

```
 public void onClick(View viewSelected) {
    switch (viewSelected.getId()) {
    case R.id.bDownload:
        DatabaseManipulator dm = new DatabaseManipulator(this);
        dm.open();
        dm.addList(null);
        dm.addList(null);
        dm.addList(null);
        dm.addList(null);
        dm.addList(null);
        for (VocabList list : dm.getAllLists()) {
            System.out.println(list.getName());
        }
        dm.close();
        break; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:00:55.913

1）尝试下面的创建表语句。

```
 public static final String CREATE_DB = "CREATE TABLE " + TABLE_VOCAB_INFO
        + "(" + COLUMN_NAME + " TEXT NOT NULL PRIMARY KEY," + COLUMN_URL
        + " TEXT NOT NULL," + COLUMN_DOWNLOADED + " TEXT NOT NULL);"; 
```

2）如果您对或添加新表进行任何更改`table structure`，您需要卸载`re-install`您的应用程序，因为`onCreate`如果没有创建数据库，则调用一次，如果数据库已经存在 onCreate 将不会被调用并且您的更改不会影响D B。

为 OP 工作 >>**您也可以通过更改数据库版本来做到这一点。**

# wordpress - Wordpress OOP 框架不适用于 update_options 函数

> ID：14716635
> 
> 赞同：0
> 
> 时间：2013-02-05T20:49:01.953
> 
> 标签：wordpress, oop, frameworks, options

我正在尝试让 update_options 使用此功能。基本上，用户输入激活码并通过插件选项页面提交。代码发送给第三方，如果成功则返回状态。这一切都可以正常工作，但我无法获得 update_options 来更改相关选项的状态。

这是更新功能（我正在使用的 OOP 框架的一部分）：

```
 private function _admin_options_update() {
    // Verify submission for processing using wp_nonce
    if( wp_verify_nonce( $_REQUEST['_wpnonce'], "{$this->namespace}-update-options" ) ) {
        $data = array();
        /**
         * Loop through each POSTed value and sanitize it to protect against malicious code. Please
         * note that rich text (or full HTML fields) should not be processed by this function and 
         * dealt with directly.
         */
        foreach( $_POST['data'] as $key => $val ) {
            $data[$key] = $this->_sanitize( $val );
        }

        /**
         * Place your options processing and storage code here
         */

        // Update the options value with the data submitted
        update_option( $this->option_name, $data );

        // Redirect back to the options page with the message flag to show the saved message
        wp_safe_redirect( $_REQUEST['_wp_http_referer'] . '&update=1' );
        exit;
    }
} 
```

我正在尝试运行此功能：

update_option($WPBackitup->options['status'], $license_data->license);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:48:01.730

这个是我自己想出来的。基本上，该框架正在清理通过其表单变量提交的所有数据，然后将其提交给数据库。我通过手动将其返回加载到框架清理并发送到数据库的数组中来使第三方 API 工作。一旦我这样做了， update_options() 就像一个魅力！

# c++ - 如何在 C++ 中解析带有换行符的文件作为分隔符？

> ID：14716640
> 
> 赞同：4
> 
> 时间：2013-02-05T20:49:32.243
> 
> 标签：c++, parsing, newline, line-breaks, delimiter

我想知道如何将文本文件逐块拆分，并将行组存储为单个字符串。例如：

我有一个问题文本文件，其中一些是多行的。在可变数量的行之后（取决于问题占用的行数）有一个空白行，然后是答案，然后是另一个问题（也可能比 1 行长），空白行，答案。

像这样的东西，其中“q”是应该存储为单个字符串的行，而“a”也应该是单个字符串：

```
qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq

aaaaaaaaaaaaaaaaaaaaaaa

qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

我尝试逐行阅读，结合`string line + line`if `line != ""`。但它变得混乱和混乱，我无法让它正常工作。

我只是想将第一组`q`'s 存储为单个字符串并将其放入，`vector[0]`并将第一组`a`'s 放入`vector[1]`. 第二组`q`'s in `vector[2]`. 第二组`a`'s in `vector[3]`.. 以此类推。q 和 a 都可以是多行。

* * *

**任何建议或帮助将不胜感激！**

```
#include <vector>
#include <fstream>
#include <iostream>
#include "Question.h"
#include <iomanip>

using namespace std;

int main(int argc, char * argv[]){
    ifstream infile;
    string filename = "questions.txt";//manually set for testing.

    //cout<<"Enter the questions file: ";
    //cin>>filename;

    infile.open(filename.c_str());

    if (!infile){
            cout<<"error"<<endl;
            return 0;
    }
    else {
            cout<<"file opened!"<<endl;
    }
    vector<string> myvector;

    string line;
    string additionalLine;
    int totalLines = 0;
    while(getline(infile,line)){
            totalLines++;
    }
    cout<<"total lines: "<<totalLines<<endl;

/*
    while(getline(infile,line,'\n')){
            cout<<line<<endl;
    }
*/

    while(getline(infile,line,\n)){
            if (line == ""){
                    cout<<"empty"<<endl;
            }

            else {
                    cout<<"line is not empty"<<endl;
                    additionalLine = additionalLine + line;
            }
            if (line != ""){
                    myvector.push_back(additionalLine);
            }

    }

    for(int i=0; i < (myvector.size()); i++){
            cout<<myvector[i]<<endl;
    }

    //TESTING
    cout<<"Question: "<<endl;
    cout<<myvector[0]<<endl;
    cout<<"Answer: "<<endl;
    cout<<myvector[1]<<endl;

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T00:36:19.083

我稍微调整了代码并让它工作！

我改变了循环遍历文本文件行的方式，将其更改为 while (!infile.eof()) 并手动获取这些行。我还添加了一条语句来检测是否有新行。我还必须重新定位我将字符串变量重置回“”的位置。

感谢您的建议！下面是解决方案代码：

```
#include <vector>
#include <fstream>
#include <iostream>
#include "Question.h"
#include <iomanip>

using namespace std;

int main(int argc, char * argv[]){
    ifstream infile;
    string filename = "questions.txt";//manually set for testing.

    //cout<<"Enter the questions file: ";
    //cin>>filename;

    infile.open(filename.c_str());

    if (!infile){
            cout<<"error"<<endl;
            return 0;
    }
    else {
            cout<<"file opened!"<<endl;
    }
    vector<string> myVec;

    string line;
    string comboLine="";

    while(!infile.eof()){
            getline(infile,line);

            if (line == "" || line == "\0")  {
                    //cout<<"->BLANK LINE DETECTED<-"<<endl;
                    myVec.push_back(comboLine);
                    comboLine="";
            }else {
                    comboLine = comboLine + line;
                    //cout<<"comb: "<<comboLine<<endl;
            }

            line = "";

    }
    infile.close();

    //TESTING
    cout<<"Question: "<<endl;
    cout<<myVec[0]<<endl;
    cout<<"Answer: "<<endl;
    cout<<myVec[1]<<endl;
    cout<<"Question 2: "<<endl<<myVec[2]<<endl;
    cout<<"Answer 2: "<<endl<<myVec[3]<<endl;
    return 0;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:58:03.583

如果您使用的是 Qt，您可以轻松地做到这一点。

```
QFile myFile;
myFile.open(QIODevice::ReadOnly | QIODevice::Text);

QTextStream openFile(&myFile);

while (!myFile.atEnd()) {

    QString line;
    QStringList tokens;
    line = myFile.readLine();
    tokens = line.split("\n");

    // additional processing here with your tokens, which are delimited by '\n'
} 
```

您将需要包含`QFile`、`QString`和`QTextStream`才能`QStringList`使其正常工作。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:58:14.277

```
struct QA {
    vector<string> questionLines;
    vector<string> answerLines;
};

vector<string> getLines(istream& is) {
    vector<string> lines;
    string line;
    do {
        getline(is, line);
        lines.push_back(line);
    } while(!line.empty())
    return lines;
}

istream operator>>(istream& is, QA& qa) {
    qa.questionLines = getLines(is);
    qa.answerLines = getLines(is);
} 
```

# visual-studio-2010 - 将 SharePoint 2010 解决方案转换为 2013 和 Visual Studio 2012

> ID：14716641
> 
> 赞同：3
> 
> 时间：2013-02-05T20:49:33.957
> 
> 标签：visual-studio-2010, sharepoint-2010, visual-studio-2012, sharepoint-2013

我正在尝试将在 Visual Studio 2010 中开发的 SharePoint 2010 解决方案（自定义 Web 部件、内容类型、列表、事件接收器等）转换为 SharePoint 2013 和 Visual Studio 2012。当我在 VS 2012 中打开项目时，它会转换几个项目文件，但由于参考问题而无法编译。

我复制了导致问题从我的 2010 服务器到 2013 服务器的 DLL（主要是 Microsoft.SharePoint ...，虽然我也需要复制 Microsoft.Office.SecureStoreService.dll）并修复了引用。但是，Microsoft.Office.SecureStoreService.dll 仍然给我编译器错误，当 Visual Studio 有命名空间没有问题，并且在其中找到 SecureStoreProvider 类就好了。

我还尝试将目标框架从 3.5 更改为 4，并且只在目标框架下拉列表中看到“安装其他框架...”。

我确信其他人已经处理过这个问题，但未能成功构建正确的谷歌搜索查询。总的来说，我对 SharePoint 比较陌生，如果有任何帮助，我将不胜感激。

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T18:02:49.750

我能够使用以下方法将我的解决方案从 2010 项目升级到 2013。请注意，这将更新您的解决方案以使用新的 2013 API。可以只更新项目文件但仍以 2010 模式运行。

### 首先编辑您的 .csproj 文件（对于 c#）。

将目标框架修改为： `<TargetFrameworkVersion>v4.5</TargetFrameworkVersion>`

为办公版本添加这个节点，我把我的直接放在 TargetFrameworkVersion 标签下面 `<TargetOfficeVersion>15.0</TargetOfficeVersion>`

### 更新参考

重新加载项目并更新您引用的程序集。如果您尚未指定特定版本，他们应该已经在引用 v15 (SharePoint 2013) 程序集。

`14.0.0.0`对to进行查找替换`15.0.0.0`。这会将页面、布局和母版页上的所有引用更新到 v15 程序集。

### 更改通话

将任何呼叫更改`SPUtility.GetGenericSetupPath()`为`SPUtility.GetVersionedGenericSetupPath()`

检查每个文件以检查任何配置单元引用。您需要在其中添加 /15/。例如：_layouts/ 到 _layouts/15/

在 Visual Studio 中打开包“文件夹”，然后更新该包的属性以使用版本 15。

### 清理

最后做一个编译清理所有遗漏的项目。部署您的解决方案并确保彻底测试。

# sql - 来自两个表的 SQLite 查询 - 选择要返回的值

> ID：14716642
> 
> 赞同：2
> 
> 时间：2013-02-05T20:49:36.430
> 
> 标签：sql, sqlite

例如，我有两张桌子

表格1

```
ID  |  Prop1  |  Prop2  |  Prop3
--------------------------------
 1  |    a    |   b     |   c
 2  |    d    |   e     |   f 
```

表2

```
Name  |  ID  |  Prop1  |  Prop2
-------------------------------
 i    |   1  |   aa    |  null 
```

我想要做的是返回（不修改）与 Table2.Name = 'i' 的 ID 对应的 Table1 的行，但 Table2 的值不为空（如果它们存在）。结果应如下所示：

```
ID  |  Prop1  |  Prop2  |  Prop3
--------------------------------
 1  |    aa   |   b     |   c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:05:25.927

您可以使用[`IFNULL(x, y)`](http://www.sqlite.org/lang_corefunc.html#ifnull)以下值替换`NULL`：

```
SELECT
    t1.ID
   ,IFNULL(t2.Prop1, t1.Prop1) AS Prop1
   ,IFNULL(t2.Prop2, t1.Prop2) AS Prop2
   ,IFNULL(t2.Prop3, t1.Prop3) AS Prop3
FROM
    Table1 t1
LEFT JOIN
    Table2 t2
    ON
    t1.ID = t2.ID 
```

请注意，`IFNULL()`只接受两个参数。如果您认为您可能会在某个时候添加更多表格，请切换到`COALESCE()`：

```
SELECT
    t1.ID
   ,COALESCE(t2.Prop1, t1.Prop1) AS Prop1
   ,COALESCE(t2.Prop2, t1.Prop2) AS Prop2
   ,COALESCE(t2.Prop3, t1.Prop3) AS Prop3
FROM
    Table1 t1
LEFT JOIN
    Table2 t2
    ON
    t1.ID = t2.ID 
```

# class - 枚举类型在 UML 图的底部应该是什么样子的？

> ID：14716643
> 
> 赞同：0
> 
> 时间：2013-02-05T20:49:36.350
> 
> 标签：class, uml, enumeration, accessor, mutators

我知道枚举类型在 UML 图的中间部分应该是什么样子，但它在包含类的动作/方法的底部应该如何？枚举类型没有访问器和修改器吗？

![枚举类型的问题](../Images/ead0ab6eed83f0cbfd756b54594cc353.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:13:37.857

```
+GetTypeOfAttack:TypeOfAttack 
```

可能是答案，但您需要问自己一个问题，这是否是“经典”访问器突变体

经典的访问器/修改器（getter/setter）通常如下所示

```
private bool hiddenField = true;

//Accessor
public bool GetHiddenField()
{
     return hiddenField;
}

//mutator
public void SetHiddenField(bool input)
{
    hiddenField = input;
} 
```

但是您可能（通常）遇到需要在获取或设置字段之前进行一些逻辑评估的情况......这不是纯粹的访问器/突变器，但本质上是。

回答你的问题：

```
+SetHiddenField(bool): void
+GetHiddenField:bool 
```

看看它们如何映射到前面的代码。+/- = public/private, (denoteParameters) and : 表示返回类型

# django - 无效的 OpenID 命名空间 u'http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0'

> ID：14716644
> 
> 赞同：0
> 
> 时间：2013-02-05T20:49:50.017
> 
> 标签：django, apache

我在 Apache 上使用 django-socialregistration。我开始收到此错误消息。

```
Invalid OpenID Namespace u'http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:49:50.017

它从我的 Apache 配置文件中的重写规则开始。

```
<VirtualHost *:80>
  ServerName foobar.org
  ServerAlias foobar.net
  RewriteEngine On
  RewriteRule ^(.*)$ https://foobar.org$1 [R=301,L]
</VirtualHost> 
```

因此，任何进入 foobar.net 或未通过 https 的请求都会被重定向到[https://foobar.org](https://foobar.org)。当 Apache 执行此重定向时，默认情况下，它会转义 url。见[http://httpd.apache.org/docs/current/rewrite/flags.html#flag_ne](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_ne)

所以一种解决方案就是这样做：

```
 RewriteRule ^(.*)$ https://foobar.org$1 [R=301,L,NE] 
```

但是为什么首先会发生重定向？就我而言，这是因为 django-socialregistration 检查设置以确定是否在 OpenID 工作流程中使用 ssl。我看了我的运行服务器，看到了类似的东西

```
GET /openid/redirect/?openid_provider=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&next=%2Faccounts%2Fnext%2F%3Fnext%3Dundefined 
```

我`curl -v <that_url>`，看到 Location 标头（即重定向 url）包含如下内容：

```
...openid.return_to=http%3A%2F%2Ffoobar.org%2Fopeni... 
```

请注意，它没有使用 https。我通过 django-socialregistration 进行了挖掘，发现我在 settings.py 中需要这个：

```
SOCIALREGISTRATION_USE_HTTPS = True 
```

# scala - 如何在 Scala 中“更新”不可变集合中的不可变元素？

> ID：14716647
> 
> 赞同：3
> 
> 时间：2013-02-05T20:49:59.007
> 
> 标签：scala, set, immutability

我有一个`Set`元素围绕一个键定义了它们的相等性，但其他字段可能不同......所以当我需要“更新”时，这就是我尝试过的：

```
object sandbox {

  case class K(val id: Int, val message: String) {
    override def equals(that: Any) = that match {
      case K(this.id, _) => true
      case _ => false
    }
    override def hashCode = this.id
    override def toString = "(" + id + "," + message + ")"
  }

  val s = Set(K(1, "a"), K(2, "b"))               //> s  : scala.collection.immutable.Set[test.sandbox.K] = Set((1,a), (2,b))
  val updatedElem = K(1, "c")                     //> updatedElem  : test.sandbox.K = (1,c)

  s + updatedElem                                 //> res0: scala.collection.immutable.Set[test.sandbox.K] = Set((1,a), (2,b))

  Set(updatedElem) | s                            //> res1: scala.collection.immutable.Set[test.sandbox.K] = Set((1,c), (2,b))
  } 
```

添加一个已经存在的元素不会更改集合，然后先删除它并再次添加更新的元素似乎不是最理想的。

该`union`方法保留左侧集合的元素，但没有记录该行为；所以我不应该依赖它。

那么现在，我是否缺少更明显的东西？我是否应该依赖实际行为（并编写测试以防万一它发生变化）？还是我应该分两步进行更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T20:55:34.867

在我看来，这实际上是建模中的概念问题。关键是相等的对象应该真的是等价的......否则您可能需要考虑其他一些结构。例如，为什么不尝试`Map`映射`id`到`message`（或`id`到`K(id,message)`）？这在概念上似乎更清晰，然后您可以使用`.updated(1,"c")`它来更新它。

# php - 根据存储的 cookie 信息将用户重定向到网站

> ID：14716649
> 
> 赞同：4
> 
> 时间：2013-02-05T20:50:10.407
> 
> 标签：php, css, html, cookies

我有一个网站，我的登录页面可以将用户发送到我们的某个位置。我想知道是否有办法存储他们的位置选择并根据我存储的信息将它们重定向到正确的位置。我以前在很多商店页面上看到过这种情况，他们保留并让您浏览本地商店。cookie 是存储此信息的最佳方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T20:52:17.470

Cookie 非常适合这种情况。只需记录位置 ID，然后下次重定向到那个地方！

```
// store an array of location cookie names and there location values
$places = array('us'=>'/united-states.php');

// After user chooses a location, store the cookie based on his choice: in this case, us!
setcookie('location','us', time() + (3600 * 24 * 7));

// On a new page check the cookie is set, if it is then redirect users to the value of that cookie name in the array!
if(isset($_COOKIE['location'])){
    header('Location: '.$places[$_COOKIE['location']]);
} 
```

# javascript - 使用 jQuery 滑入画布外/视口导航

> ID：14716654
> 
> 赞同：0
> 
> 时间：2013-02-05T20:50:48.627
> 
> 标签：javascript, jquery

我正在尝试制作一个画布外导航，该导航从左侧滑入以占据页面的 20%，而内容向左滑动（其中一些将不在画布上）占据页面的 80%。这已在 Google 的移动网站和 Facebook 的移动应用程序中看到。

这是一个使用 CSS3 过渡的版本： http: [//codepen.io/chriscoyier/pen/umEgv](http://codepen.io/chriscoyier/pen/umEgv)

除了，我正在尝试制作一个仅依赖于 JQuery / Javascript 而根本不依赖 CSS 转换的软件。

下面是我到目前为止的链接。

我不明白为什么它不起作用。每次单击 .menu-button 时，都应切换 #main-nav 的宽度；从而产生向右滑动的效果。

有人可以帮我解决这个问题和/或帮助我实现我想要实现的目标。

这是我到目前为止所拥有的：http: [//pastebin.com/0X7uT7tC](http://pastebin.com/0X7uT7tC)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:11:40.963

在 CSS 中将宽度更改为 20%，然后在加载时隐藏它。

[**这是小提琴**](http://jsfiddle.net/aaaheatair/k3NnN/)

**jQuery**

```
 $('#main-nav').hide();
 $('.menu-button').click(function () {
     $('#main-nav').animate({
         width: 'toggle'
     });
 }); 
```

**CSS**

```
 .main-nav {
    position: fixed;
    top: 0;
    width: 20%;
    height: 100%;
    background: #3B3B3B;
    overflow: hidden;
} 
```

# asp.net-mvc - URL 处理 + MVC 4 + Jquery Ajax + IIS

> ID：14716657
> 
> 赞同：0
> 
> 时间：2013-02-05T20:51:05.240
> 
> 标签：asp.net-mvc, jquery, iis, asp.net-mvc-routing

我一直在开发一个 MVC 4 应用程序，它还通过 Jquery 包含 Ajax。我遇到了一个问题。

例如，如果我单击一个按钮，onclick 事件会触发一个 javascript 方法。此方法位于 .js 文件中。

该 javascript 方法使用 Ajax 调用一个`ActionResult`接收一些参数（字符串、int）的函数，没什么特别的。所以..可以说我的操作结果在“ `Person`”`Controller`中，它的名字是“ `Add`”。所以我想添加一个人。

我的 ajax 调用中的 url 属性应该是`"/Person/Add"`，我的数据应该是这样的：

```
var person = new Object();
person.name = "John";
person.id = 1;

data: person 
```

这在使用 Visual Studio 运行应用程序时没有任何问题。但是当我在 IIS 中部署它时，我得到一个 404 错误。

我试过这个。我`<link>` `<link id="PersonAddURL" href="Url.Content("~/Person/Add") />`在布局中添加了一个，然后`url: "/Person/Add"`我没有使用，而是将其更改为`url: $("#PersonAddURL").attr("href")`.

这行得通，现在，我认为这不是解决它的好方法。应该还有一个更好的。即使我设法解决了它，我还是希望有人向我解释发生这种情况的原因。我不喜欢为每个 URL 设置一个链接标签的想法。

感谢未来的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:03:34.803

我通常做的是在我的 ASP.NET MVC 布局中有以下全局 javascript 变量：

```
<script>var webroot = "@Url.Content("~/")";</script> 
```

然后从任何 JS 文件中，您可以执行以下操作：

```
$.post(webroot + "Person/Add", person, function(result){ ... }); 
```

只需确保在任何 AJAX 调用之前声明并初始化**webroot变量。**

如果您在 javascript 中使用命名空间，则可以将其更改为（假设**应用**命名空间）：

```
<script>app.webroot = "@Url.Content("~/")";</script> 
```

并去掉让开发者不舒服的全局变量。

# php - php 和 ajax - 上传 base64 照片并返回链接进行编辑

> ID：14716658
> 
> 赞同：1
> 
> 时间：2013-02-05T20:51:13.257
> 
> 标签：php, ajax, permissions, http-status-code-401, photo-upload

我试图做到这一点：

*   从 PC 上传照片为 base64 字符串 ("data:image/jpeg;base64,...")
*   PHP 会将这张照片以全分辨率保存为 .jpg 并制作 160x160 .png 缩略图
*   然后它将返回到全尺寸图像的链接，用户将使用[Jcop](http://deepliquid.com/content/Jcrop.html)裁剪这张照片并在用户确认时自动发送尺寸

我已经完成了很远，它在我本地的 Apache 上运行良好。但是当我把它移到远程网络托管时**（我无权访问 shell）**时，第一个 ajax 请求（当用户提交照片时）返回**401 Unauthorized**。我搜索了错误的文件权限，但我不确定是**photo.php 的权限**问题还是**上传图片的权限**问题。我已将**0650**设置为所有目录。

捕获的请求： http: [//netbox.wayo.cz/401unauthorized.PNG](http://netbox.wayo.cz/401unauthorized.PNG)

这是保存照片的代码：

```
if($image = imagecreatefromstring($content))
{
     // save full-size photo
     if($photo = imagejpeg($image,$file_path,$control->get_config('upload_photo_quality')))
     {  
        // get photo params
        list($width,$height,$type,$attr) = getimagesize($file_path);

        // create photo thumbnail
        $thumb_name = uniqid().'.png';
        $thumb_path = DIR_DATA.'thumbs/'.$thumb_name;
        imagepng($image,$thumb_path,$control->get_config('upload_photo_compression')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:09:31.010

您必须设置**654**，在**650**公共用户不能访问目录和内部文件如果您请求 PHP 必须设置**655**允许用户执行 PHP 文件

# python - 任务集-python

> ID：14716659
> 
> 赞同：3
> 
> 时间：2013-02-05T20:51:25.020
> 
> 标签：python, linux

我有一台双四核机器。所以，我的cpu列表是0-7。

我正在尝试从 python 运行任务集

```
mapping = [2,2,2,2,2]
for i in range(0,len(mapping)):
        cmd = "taskset -c" +  str(mapping[r]) + "python <path>/run-apps.py" + thr[r] + "&"
        os.system(cmd) 
```

它说：

```
taskset: invalid option -- '2'
taskset (util-linux-ng 2.17.2)
usage: taskset [options] [mask | cpu-list] [pid | cmd [args...]]
set or get the affinity of a process

  -p, --pid                  operate on existing given pid
  -c, --cpu-list             display and specify cpus in list format
  -h, --help                 display this help
  -V, --version              output version information

The default behavior is to run a new command:
  taskset 03 sshd -b 1024
You can retrieve the mask of an existing task:
  taskset -p 700
Or set it:
  taskset -p 03 700
List format uses a comma-separated list instead of a mask:
  taskset -pc 0,3,7-11 700
Ranges in list format can take a stride argument:
  e.g. 0-31:2 is equivalent to mask 0x55555555 
```

但是核心 2 是可用的，我要运行同样的东西`commandline`.

```
taskset -c 2 python <path>/run-apps.py lbm & 
```

不知道是什么问题..

任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-29T01:43:57.290

您可以避免调用任务集并改用 psutil： [https ://pythonhosted.org/psutil/#psutil.Process.cpu_affinity](https://pythonhosted.org/psutil/#psutil.Process.cpu_affinity)

```
>>> import psutil
>>> psutil.cpu_count()
4
>>> p = psutil.Process()
>>> p.cpu_affinity()  # get
[0, 1, 2, 3]
>>> p.cpu_affinity([0])  # set; from now on, process will run on CPU #0 only
>>> p.cpu_affinity()
[0]
>>>
>>> # reset affinity against all CPUs
>>> all_cpus = list(range(psutil.cpu_count()))
>>> p.cpu_affinity(all_cpus)
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:53:22.143

与您发布的命令行相比，您缺少几个空格...例如：

```
cmd = "taskset -c " +  str(mapping[r]) + " python <path>/run-apps.py " + thr[r] + " &" 
```

在您的代码中，当解析“命令行”时，`taskset`看到的字符串`-c2`根据许多命令行解析库与`-c -2`解释您所看到的错误的内容相同。

有时，如果您使用字符串插值代替，这些内容会更容易阅读：

```
cmd = "taskset -c %s python <path>/run-apps.py %s &" % (mapping[r],thr[r]) 
```

或新风格`.format`：

```
cmd = "taskset -c {0} python <path>/run-apps.py {1} &".format(mapping[r],thr[r]) 
```

最后，如果不提及 python模块，任何解决方案`os.system`都不应该使用。`subprocess`

```
process = subprocess.Popen(['taskset',
                            '-c',
                            str(mapping[r]),
                            'python',
                            '<path>/run-apps.py',
                            str(thr[r]) ] ) 
```

它将完全避免使用 shell，这会稍微更有效，并使您免受 shell 注入类型的攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:01:32.943

你缺少空格。为了帮助自己尝试以下方法：

1.  注释掉 os.system() 行
2.  在 os.system() 行下方，添加：

    打印命令

你会看到你的命令行是什么样子的。在需要的地方添加空格。然后取消注释 os.system() 行。

# python - 使用 matplotlib 添加额外的轴刻度

> ID：14716660
> 
> 赞同：56
> 
> 时间：2013-02-05T20:51:29.760
> 
> 标签：python, matplotlib, plot

我有一个简单的情节代码

```
plt.plot(x,y)
plt.show() 
```

除了当前的刻度外，我还想在 x 轴上添加一些额外的刻度，比如说

```
extraticks=[2.1, 3, 7.6] 
```

如您所见，我没有刻度模式，因此我不想增加整个轴的刻度频率；只保留原来的并添加那些额外的......

有可能吗？

问候

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-05T20:56:42.773

是的，您可以尝试以下方法：

```
plt.xticks(list(plt.xticks()[0]) + extraticks) 
```

要使用的功能是[`xticks()`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xticks). 当不带参数调用时，它返回当前刻度。使用参数调用它，您可以设置刻度位置以及可选的标签。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-12-07T21:50:17.020

为了完整起见，我想给出@Lev-Levitsky 的优秀答案的OO 版本：

```
lines = plt.plot(x,y)
ax = lines[0].axes
ax.set_xticks(list(ax.get_xticks()) + extraticks) 
```

这里我们使用从返回的序列`Axes`中提取的对象。通常，如果您使用的是 OO 接口，那么您已经有了对前面的引用，并且您会调用它而不是 on 。`Lines2D``plot``Axes``plot``pyplot`

**角落警告**

如果由于某种原因您修改了轴限制（例如，通过编程放大数据的一部分），则需要在此操作后恢复它们：

```
lim = ax.get_xlim()
ax.set_xticks(list(ax.get_xticks()) + extraticks)
ax.set_xlim(lim) 
```

否则，绘图将使 x 轴显示轴上所有可用的刻度。

# eclipse - Eclipse PyDev 使用远程解释器

> ID：14716662
> 
> 赞同：11
> 
> 时间：2013-02-05T20:51:43.640
> 
> 标签：eclipse, pydev, python

是否有可能让 eclipse PyDev 使用远程 Python 解释器？

我想这样做，因为我要连接的 Linux 服务器运行了几个优化求解器（CPLEX、GUROBI 等），我的脚本使用这些求解器。

目前我在本地使用eclipse编写脚本，然后将所有文件复制到远程机器，使用ssh登录并使用“python script.py”在那里执行脚本。相反，我希望单击“运行”按钮，然后在我的 Eclipse IDE 中执行所有操作。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T12:16:18.763

抱歉不行。您可以通过远程系统资源管理器 (RSE) 远程连接到您的 Linux 服务器。但不能将其用作远程解释器。我使用 Pycharm。您可以使用需要付费的免费社区版或专业版。它并没有那么贵，而且对我来说效果很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-21T14:26:24.123

正如 Adel 所说，这可能无法通过远程系统资源管理器或正常的“运行”按钮实现，但您可以自动执行当前使用的过程。当我的笔记本电脑的风扇坏了时，我不得不这样做几个星期，并且在那里进行任何重要的计算都会导致它过热和断电，所以我只是在我的工作机器上运行了所有东西。

您可以使用外部工具机制运行一个简短的脚本，将您的代码同步到远程服务器，运行您的脚本，然后将任何输出文件同步回您的本地计算机。我的脚本看起来像这样，存储在 $HOME/bin/runremote.sh 中，并且是可执行的 ( `chmod +x runremote.sh`)

```
fp="$1"  # Local path to the script we want to run--for now,
         # this is the only command I pass in from Eclipse, but you could add others if so inclined.
# My home directory is a little different on my local machine than on the remote,
# but otherwise things are in the same place. Adjust as needed.
fp=`python -c "print '$fp'.replace('/home/tsbertalan', '/home/oakridge/bertalan')"`

# Run the synchronization. I use Unison, but you could use something else,
# like two calls to rsync, or a series of scp commands.
reposync >/dev/null  # The redirection assumes your sync command will print errors properly on stderr.
cd='cd '`dirname $fp`

# I use a virtual environment on the remote server, since I don't have root access to install
# packages globally. But this could be any set-up command you want to run on the remote.
# A good alternative would be `source $HOME/.profile` or `~/.bashrc`.
act='source /home/oakridge/bertalan/bin/activate'
fname="`basename $fp`"
cmd="$act ; $cd ; python $fname"

# Run the command remotely. The -X forwards X11 windows, so you can see your Matplotlib plots.
# One difficulty with this method is that you might not see all your output just as it is created.
ssh bertalan@remote.server.edu -X  "$cmd"
sleep 1

# My synchronization script is bidirectional, but you could just use rsync with the arguments flipped.
reposync >/dev/null 
```

如果您不在本地使用 linux 或 OSX，则可能必须使用 MinGW 或 Cygwin 或其他任何工具才能使其正常工作。或者，由于您似乎有一个工作的 Python 解释器，您可以在 Python 中编写一个等效的脚本，使其可执行（我认为通过资源管理器中的文件属性对话框），并`#!/path/to/python`在顶部添加一行。我不经常使用 Windows，所以我对此无能为力。

要在 Eclipse 中使用它，请转到 Run > External Tools > External Tools Configurations...。添加一个新工具，其 Location 是脚本的路径，其第一个 Argument 是 ${resource_loc}。然后，您可以将它与 Run > External Tools > [first item] 一起使用，或者通过转到 Windows > Preferences > Keys 并搜索“Run Last Launched External Tool”将其绑定到键盘快捷键（我使用 F12）。大概您必须先浏览菜单才能使其成为“最后启动”的外部工具。

# c# - 流写不起作用

> ID：14716664
> 
> 赞同：2
> 
> 时间：2013-02-05T20:51:58.673
> 
> 标签：c#, streamwriter

我正在尝试将文件读入字符串并将该字符串重写为新文件，但是如果当前字符是我要重写的特殊字符之一，则需要进行一个小检查。我已经调试过了，代码似乎工作正常，但输出文件是空的..我想我错过了一些东西......但是什么？

```
StreamWriter file = new StreamWriter(newname, true);

char current;
int j;
string CyrAlph = "йцукен";
string LatAlph = "ysuken";
string text = File.ReadAllText(filename);

for (int i = 0; i < text.Length; i++)
{
    if (CyrAlph.IndexOf(text[i]) != -1)
    {
        j = CyrAlph.IndexOf(text[i]);
        current = LatAlph[j];

    }
    else current = text[i];

    file.Write(current);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:54:08.963

如果您在实例化`file.AutoFlush = true`之后设置或在编写所有内容结束时调用，或者您可以在语句中实例化您的 StreamWriter，会发生什么情况。我的猜测是它是空的，因为缓冲区需要刷新`StreamWriter``file.Close`[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:56:29.543

`StreamWriter`实现`IDisposable`。使用后您“必须”`Dispose`使用它。为此，请使用`using`语句。`using`这将自动刷新并关闭主体末尾的流。

```
using(StreamWriter file = new StreamWriter(newname,true))
{
    char current;
    int j;
    string CyrAlph="йцукен";
    string LatAlph = "ysuken";
    string text = File.ReadAllText(filename);

    for (int i = 0; i < text.Length; i++)
    {
        if (CyrAlph.IndexOf(text[i]) != -1)
        {
            j=CyrAlph.IndexOf(text[i]);
            current = LatAlph[j];

        }
        else current=text[i];

        file.Write(current);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:01:02.410

你错过了一个流冲洗。`using`标准模式是围绕 StreamWriter 的分配添加一条语句。这还负责关闭文件并释放操作系统的文件句柄：

```
using (StreamWriter file = new StreamWriter(path, true))
{
   // Work with your file here

} // After this block, you have "disposed" of the file object.
  // That takes care of flushing the stream and releasing the file handle 
```

与显式关闭流相比，using 语句具有额外的好处，即使在块内出现异常的情况下也能正确处理流。

# android - 更快的 WiFi 扫描速率以获取 rssi 更改 android

> ID：14716668
> 
> 赞同：7
> 
> 时间：2013-02-05T20:52:15.597
> 
> 标签：android, wifi, rate, rssi, network-scan

我正在尝试提高 wifi 扫描速率，但是使用 wifi.startscan 方法并获取返回的列表结果的信息，我没有看到 rssi 每 2 秒更改一次。我的问题是是否有可能对 rssi 进行低速率扫描，如果有可能我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T16:26:02.600

扫描速度如此之低，因为扫描需要那么长时间。减少扫描时间的唯一方法是[扫描可用频率的子集](https://stackoverflow.com/questions/10680867/android-customize-wifi-scan/17028425#17028425)。

# css - firefox 不获取 style.css 上的#header（其他网络浏览器都可以）

> ID：14716670
> 
> 赞同：2
> 
> 时间：2013-02-05T20:52:17.703
> 
> 标签：css, cross-browser

[http://dayforfailure.com](http://dayforfailure.com)是我的网站。

它在 Chrome 和 Safari 上看起来与预期的一样。但是在 Firefox 上，标题和其他元素（如图像大小）出错了。

我是跨浏览器兼容性问题的菜鸟。你能帮我解决问题吗？

铬合金： ![Chrome 中的网站](../Images/fb86927da2e4400fd21ea84f9cb9dbe7.png)

火狐： ![Firefox 中的站点](../Images/6e83e67fc42f6b39c9bc7e3e91ce4174.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:24:13.550

正如您在[Firebug 的](https://getfirebug.com/)JavaScript 控制台中看到的，您有两个错误。

```
ReferenceError: Cufon is not defined
Error: Permission denied to access property 'toString' 
```

您在 Chrome 的开发者工具上也有类似的错误，但 Firefox 在遇到错误后停止工作并且不会加载其余资源。

您的解决方案是修复 Firefox/Firebug 开发者工具中的 js 控制台中列出的错误。然后您的网站将在每个浏览器中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:18:49.847

您在第 67 行有一个额外的 " - 字符。要正确显示，该行应该是：

h1 { font-family:"Helvetica Neue","Helvetica", sans-serif; 字体大小：3 em；颜色：#000; 文本转换：大写；}

正如保罗所提到的，您在使用 HTML 文件时遇到了很多问题。只需通过验证器运行它并修复那里提到的问题:)

# c# - 绑定绑定列表 到数据网格视图

> ID：14716671
> 
> 赞同：0
> 
> 时间：2013-02-05T20:52:18.423
> 
> 标签：c#, winforms

情况：

我正在尝试`BindingList<string[]>`将从 LINQ to SQL 查询构造的绑定到`DataGridView`.

问题：

我要么无法修改生成后的项目 - 要么 - 我在我的（这取决于我使用的代码的哪个迭代）中`DataGridView`得到了一堆不需要的字段`DataGridView`我在网上找了没用。

我知道字符串的实际值没有公共属性。我很难确定如何检索它（我相信这是问题的一部分）。

C＃

```
int item = (from p in CurrentConversion.Companies[lbCompanies.SelectedIndex].Modules 
    where p.ModuleName.Equals(clbModules.SelectedItem) 
    select p.ModuleId)
    .FirstOrDefault();

BindingList<string[]> Data = new BindingList<string[]>((
    from p in CurrentConversion.Companies[lbCompanies.SelectedIndex].QuestionAnswers
    where p[2].Equals(item)
    select new string[] { p[0].ToString(), p[3].ToString() })
    .ToList());

dgvQuestions.DataSource = Data;
dgvQuestions.Refresh(); 
```

不良行为：

这发生在绑定之后

![数据网格视图](../Images/789af96b904259cfa96db6d634f7ecc0.png)

问题：

1.  为什么会这样？
2.  我如何解决它？

附加信息：

我不确定可能需要哪些额外信息，但我会提供所需的信息。

另外，如果我切换到其他代码迭代：

```
int item = (from p in CurrentConversion.Companies[lbCompanies.SelectedIndex].Modules where p.ModuleName.Equals(clbModules.SelectedItem) select p.ModuleId).FirstOrDefault();
            var Data = new BindingList<object>((from p in CurrentConversion.Companies[lbCompanies.SelectedIndex].QuestionAnswers where p[2].Equals(item) select new {Question = p[0].ToString(), Answer = p[3].ToString() }).Cast<object>().ToList());
            dgvQuestions.DataSource = Data;
            dgvQuestions.Refresh();
            dgvQuestions.Columns[1].ReadOnly = false; 
```

我可以正确查看数据，但无法编辑我想要的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:13:47.887

您正在绑定到一个字符串数组列表，并且您正在从数组中获取属性。您很可能想要以下内容：

```
var Data = new BindingList<object>((
    from p in CurrentConversion.Companies[lbCompanies.SelectedIndex].QuestionAnswers 
    where p[2].Equals(item) 
    select new {
                Val1 = p[0].ToString(), 
                Val2 = p[3].ToString() 
               }).ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:14:02.380

您在 Grid 中看到这些字段的原因是您将每一行绑定到`string[]`. 所以它会自动将属性显示`string[]`为列。网格没有内置逻辑来解析数组并将数组的内容用作列。

为了`DataGrid`正确显示您的数据，您应该将其绑定到自定义类型，并且它将使用该类型的公共属性作为列。

# css - CSS div nowrap 在 IE 中不起作用

> ID：14716672
> 
> 赞同：1
> 
> 时间：2013-02-05T20:52:33.113
> 
> 标签：css, html, nowrap

我正在使用iscroll js lib在css中构建流畅的导航。现在在 Firefox 和 chrome 中一切都很顺利。唯一的问题是 ie。

所以基本上我有一个流体 div，我不想包装或打破它。在 ie 它打破了.. 我正在使用 white-space: nowrap css 属性。

仅适用于 ie8+。

html代码：

```
 <div id="nav">
            <ul class="navigation">
                .. many li tags with a tags inside ..
            </ul>
        </div> 
```

的CSS：

```
.navigation {
    display: inline-block;
    list-style: none;
    border-right: 1px solid #576a85;
    border-left: 1px solid #3e506c;
} 
```

和

```
.navigation li {
    float: left;
}

.navigation a {
    display: block;
    text-align: center;
    padding: 10px;
    text-transform: uppercase;
    color: #FFFFFF;
    font-size: 12px;
    font-weight: bold;
    border-left: 1px solid #576a85;
    border-right: 1px solid #3e506c;
} 
```

一些行为屏幕：

（铬合金）

![看铬](../Images/4d6895271ab5c4952f59125505b19250.png)

（IE）

![看看ie](../Images/8624f531a75dec8d1c6ab3b2a5eb9a06.png)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:30:33.037

好的，我现在有问题了。

li 元素必须是 inline-block 而不是 float left 和 ul whitespace nowrap ...这样它将在 ie 中呈现良好。

# c++ - 将 C 风格的漂亮打印重构为 C++ 风格的漂亮打印

> ID：14716673
> 
> 赞同：3
> 
> 时间：2013-02-05T20:52:35.503
> 
> 标签：c++, c, refactoring, string-formatting, pretty-print

我想将一些`printf`//语句重构为`sprintf`//语句。有问题的代码使用空白填充和固定的小数点数漂亮地打印了一系列整数和浮点数。`fprintf``ostream``sstream``fstream`

在我看来，这将是 Martin Fowler 风格的安全、逐步重构的写作的一个很好的候选者，并指出了重要的陷阱。当然，第一步是将遗留代码放入测试工具中，我已经这样做了。

我可以采取哪些缓慢而谨慎的步骤来执行此重构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:01:35.903

如果重构本身不是目标，您可以通过使用诸如[tinyformat 之](https://github.com/c42f/tinyformat)类的格式化库来完全避免它（嗯，几乎），它提供了一个类似于`printf`但类型安全的接口并在内部使用 IOStreams。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:01:51.757

转换的基本机制：

*   将每个`printf`-style 子句`%w.pf`或`%w.pe`，其中`w`是字段宽度和`p`精度位数，转换为`<< setw(w) << setprecision(p) << fixed`。
*   将每个`printf`-style 子句`%wd`或`%wi`（其中`w`是字段宽度）转换为`<< setw(w)`.
*   转换`"\n"`到`endl`适当的地方。

处理`printf`：

*   创建一个具有足够总宽度的`char[]`（我们称之为）。`text`
*   将 转换`printf(...)`为`sprintf(text, ...)`，并用于`cout << text`实际打印文本。
*   使用通用指令完成。

处理`fprintf`：

*   与 相同`printf`，但使用适当的`fstream`而不是`cout`。
    *   如果您已经有一个打开的 C 样式`FILE`对象，此时您不想重构，它会变得有点[棘手](https://stackoverflow.com/a/5253726/834176)（但[可以完成](https://stackoverflow.com/a/14990896/834176)）。
*   使用通用指令完成。

处理`sprintf`：

*   如果要写入的字符串仅用于在当前上下文中输出到流，请参阅上面的两个重构之一。
    *   否则，首先创建一个`stringstream`并将`char[]`您正在写入的内容流式传输到其中。如果您仍打算从中提取 a `char*`，则可以执行`std::stringstream::str().c_str()`.
*   使用通用指令完成。

常用指令：

*   将每个子句一一转换为 C++ 风格。
*   完成后根据需要删除`*printf`和声明。`char[]`
*   必要时应用其他重构，特别是“提取方法”（Fowler，*重构*）。

# ruby-on-rails - 我们可以在rails中创建一对多关联的一侧吗

> ID：14716674
> 
> 赞同：1
> 
> 时间：2013-02-05T20:52:40.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

从我对一对多关系的阅读中，我们需要一个`has_many`在父方和一个`belongs_to`在子方。我想知道如果我只对关系的一部分感兴趣并且例如`belongs_to`在我的模型中声明一侧，rails 是否会产生错误或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:10:07.343

不会有错误，

`has_many`并且`belongs_to`只是在调用它们的类上自动生成关联方法。

例如：

```
class User < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
end

# works
User.first.posts

# error, method undefined 
Post.first.user 
```

# python - 扭曲的关闭事件未触发

> ID：14716677
> 
> 赞同：1
> 
> 时间：2013-02-05T20:52:53.070
> 
> 标签：python, macos, twisted

我有一个涉及自动更新的 Twisted 应用程序。为了让它在更新后自动重启，我设置了一个后反应器关闭事件来重新启动应用程序，如下所示：

```
reactor.addSystemEventTrigger('after', 'shutdown', os.execv, executable, args)
reactor.callFromThread(reactor.stop) 
```

这在 Windows 上运行良好，但在 OS X 上，该事件永远不会被调用。日志显示参数是正确的，并且在 Twisted 之外使用相同的参数运行 os.execv `os.execv('/usr/bin/open', ['/usr/bin/open', '-n', '/Applications/MyApp.app'])`- 工作正常。

我在这里能错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:37:17.333

事实证明，问题出在 execv 调用上，而不是 Twisted 事件关闭。我将命令更改为在 .app 包中调用我的可执行文件，而不是使用 open 并让它工作。

# sql - 根据应用于列的 case 语句选择一个不同的行

> ID：14716686
> 
> 赞同：1
> 
> 时间：2013-02-05T20:53:32.253
> 
> 标签：sql, tsql

我无法弄清楚一个 sql 查询（使用 MS Sql Server）。我正在尝试从数据集中检索单行，其中具有一个 id 的项目可以有多行。让我失望的部分是正确的行应该基于“层次结构”。我试图在这个问题上抛出一个案例陈述。

一些样本数据：

```
Id           Class       Date
100          Red         2012-12-12
100          Blue        2012-12-31
200          Red         2012-10-31
300          Green       2012-04-04
300          Blue        2011-09-01 
```

我想根据 Class 的值返回一行。

```
Case When Red Then
    Date 
Case When Blue Then 
    Date
Case When Green Then 
    Date 
Else
    '' 
```

我的最终数据集应如下所示：

```
Id           Class       Date
100          Red         2012-12-12
200          Red         2012-10-31
300          Blue        2011-09-01 
```

因此，如果其中一个重复行的值为 Red，则首先使用该行中的日期。然后是蓝色，然后是绿色。

一整天都在研究这个，玩弄子查询、分组、拥有、案例陈述、派生表。我对我的 sql 技能很生疏，因为它已经有一段时间了。

关于我应该采取的方向的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T21:02:34.640

你可以试试这个

```
;WITH cte AS
  (
    SELECT Id, Class, Date,
      row_number() OVER (PARTITION BY Id
                         ORDER BY CASE Class
                                  WHEN 'Red' THEN 1
                                  WHEN 'Blue' THEN 2
                                  WHEN 'Green' THEN 3
                                  ELSE 4 END) as rn
    FROM MyTable
   )

SELECT Id, Class, Date
FROM cte
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:00:15.020

尝试：

```
select id, class, date
  from TABLE
 where class = COLOR
   and date  = (select min(date) from TABLE where class = COLOR) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:20:05.907

我喜欢@bobs 查询，它适用于 TSQL 数据库。

这只是做同样事情的另一种方式，可能更容易移植到其他具有公共表表达式但行号语法不同的 SQL 数据库；

```
;WITH cte AS
(SELECT *, CASE Class WHEN 'Red' THEN 1 WHEN 'Blue' THEN 2
                      WHEN 'Green' THEN 3 ELSE 4 END c FROM myTable)

SELECT b1.Id, b1.Class, b1.Date
FROM cte b1 
LEFT JOIN cte b2 
  ON b1.Id = b2.Id AND b1.c > b2.c
WHERE b2.Class IS NULL 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!6/6c5cc/1)。

# c# - 减少 Web 应用程序中的全局状态

> ID：14716687
> 
> 赞同：2
> 
> 时间：2013-02-05T20:53:34.177
> 
> 标签：c#, asp.net, web-applications, global-variables, session-variables

有许多关于全局状态替代方案的帖子，但我对在 Web 环境中的实施仍有一些挥之不去的问题。

`Session[]`在 ASP.NET 中，存储在会话中的值实际上是全局变量，但如果不借助集合，您似乎无法跨页面和事件合理地存储例如经过身份验证的用户名、权限等。（我通常会使用依赖注入，但您不希望将 viewstate/url 中的这些值传递给客户端。）

因此，我认为全局状态是 Web 开发中必不可少的邪恶（由于 HTTP 的无状态特性），答案就是负责任地使用它。什么是好的外观模式实现？像下面这样的静态类，在会话中只有`get`s 和`set`s 值，并不能掩盖全局状态。

```
public class SessionWrapper
{
    public static string UserName
    {
        get { return Convert.ToString(Session["UserName"]); }
        set { Session["UserName"] = value; }
    }
    public static bool IsAuthenticated
    {
        get { return Convert.ToBoolean(Session["IsAuthenticated"]); }
        set { Session["IsAuthenticated"] = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:15:32.303

全局*变量*是有问题的，但全局*值*很好。因此，如果您想减轻全局状态的“问题​​”，只需使这些对象不可变（我不明白 DI 是如何相关的）。

对象的`User`属性`HttpContext`对于存储此类状态很有用，因为它需要可用于应用程序的每个部分，但只能在管道的早期分配。

因此，只需提出您自己的实现，`System.Security.Principal.IPrincipal`它具有您想要的额外属性，并`HttpContext.Current.User`在事件期间将其分配给它`AuthenticateRequest`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:02:57.867

我喜欢这个的是它定义了一组*固定*的全局共享的状态变量。随着不受控制的使用，`Session`各种各样的垃圾都会以不同的名称出现在同一个实体中，什么不是。

当然，您仍然需要以某种方式确保`Session`不直接使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:36:50.980

当你在这里使用它们时，它们不是全局变量——而是一个很好的“接口”来访问你的会话变量。

如果会话在没有任何锁定机制的情况下处理，他们可能会遇到问题，但是 asp.net 会话正在锁定对所有页面的会话的完全访问权限，所以你现在确实有任何问题。

# oracle - 如何获取对数据库中指定表的 SQL 查询的开始时间和持续时间（Oracle 10g）？

> ID：14716698
> 
> 赞同：0
> 
> 时间：2013-02-05T20:54:09.807
> 
> 标签：oracle, oracle10g, awr

如何获取对数据库中指定表的 SQL 查询的开始时间和持续时间（Oracle 10g）？我甚至需要关于非常短的查询的信息，这些查询可能很多，而 AWR 没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:18:25.547

为什么需要这样的诊断？可以为每个用户/会话打开跟踪，但我不建议这样做，因为数据库将在跟踪上花费比实际工作更多的资源。

# c# - 如何在 C# 中创建动态对象

> ID：14716708
> 
> 赞同：0
> 
> 时间：2013-02-05T20:54:51.567
> 
> 标签：c#

在将其作为 JSON 发送之前，我使用它在 Visual Basic 中创建一个动态对象

```
Dim my_object = New With { _
   .Name = String.Empry, _
   .Telephone = String.Empry, _
   .ID = String.Empry
} 
```

这如何在 C# 中完成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T20:57:17.987

那是一个匿名类型。

```
var my_object = new
{
    Name = string.Empty,
    Telephone = string.Empty,
    ID = string.Empty
}; 
```

但是请注意，Stackoverflow 通常不是翻译服务。

请改用此站点：http: [//www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T20:56:22.927

如果您的意思是创建[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)的实例：

```
var my_object = new {
    Name = string.Empty,
    Telephone = string.Empty,
    ID = string.Empty
}; 
```

# jquery - 将自定义对象作为 POST vars 提交到 url？

> ID：14716709
> 
> 赞同：0
> 
> 时间：2013-02-05T20:55:01.510
> 
> 标签：jquery, submit, custom-object

因此，我已将“已完成”HTML**表单**的值转换为自定义 DATA**对象**，以供各种 js.functions 使用，这些对象可能会或可能不会在对象 MAY 之前更新所述 DATA**对象**参数的值，也可能不会在表单数据最终提交（到贝宝）**之前**，最终被传递（通过 ajax）到 PHP 进行数据库操作。

当然，我知道如何提交表单，并通过 AJAX 将对象作为 POST 数据传递，但我想知道如何或是否可以发布我的 DATA 对象（再次，到 payapl）来代替必须停止在更新表单本身的输入值的过程中，我可以提交它。就像是...

```
<script>
data = {};
data.type ='form';
data.method ='post';
data.action ='https://www.sandbox.paypal.com/cgi-bin/webscr';
data.foo = 'foo';
data.bar = 'bar';
jQuery('#btn').click(function(){ jQuery('#form').submit(); });
jQuery('#post_data').click(function(){ data.submit();/*duh....???*/ });
</script>

<form id='data' action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post'>
    <input type='text' name='foo' value='foo' />
    <input type='text' name='bar' value='bar' />
</form>
<input type='button' id='btn' value='Submit'>
<input type='button' id='post_data' value='Post Data'> 
```

这当然行不通...;-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:41:09.810

正如 Marc B 在一条评论中所说，您只需将一个普通对象传入`jQuery.post`，它会在发送到服务器时被“序列化”。从服务器获取响应并将其与表单一起提交是一个不同的问题。实际上，我假设“用于数据库操作的 PHP”返回一个 JSON 对象，该对象具有与传入的字段相同的字段 - 或者至少例如我们在表单中有表单字段，最终应该提交给 paypal（或其他）。

所以只是发送`data`很容易：`jQuery.post('yourDatabaseManipulation.php', data);` 这个没有回调来处理结果......尝试处理导致以下有点疯狂的代码：

```
jQuery('#post_data').click(function() {
  var $form = jQuery(this).parents('form');

  jQuery.post('yourDatabaseManipulation.php', data).done(function(validatedData) {

    // returned values: fill into form before submit
    for (key in validatedData) {
      // special cases need extra attention
      if (key == 'action' || key == 'method') {
        $form.attr(key, validatedData[key]);
      } else if (key == 'type') {
        // no idea what to do with this one, so ignore it
      } else {
        // everything else should have a input field in the form
        // or it will just be dropped
        // FIXME: we trust our server response not to do some nasty XSS via keys here
        var $field = jQuery("input[name='"+key+"']", $form);
        $field.val(validatedData[key]);
      }
    }
    $form.submit();

  }).fail( function(jqXHR, textStatus, errorThrown) {
      // our very sophisticated error handling
      alert('fail '+textStatus);
  });

}); 
```

这应该采用从 中获取的值`yourDatabaseManipulation.php`，用“已验证”值覆盖用户输入的所有内容（可能包括不同的表单操作），然后提交表单。我不确定你是否想这样做，但我希望你能从那里弄清楚你真正想做什么。

**编辑**：刚刚发现上面的代码仅在您将提交按钮移到其中时才有效`<form>`，我在测试时自动执行了该按钮。如果您不想这样做，请以不同的方式初始化保存表单的变量，例如`var $form = jQuery('#data')`

# events - F# Event.Filter 的性能成本/收益

> ID：14716713
> 
> 赞同：2
> 
> 时间：2013-02-05T20:55:23.220
> 
> 标签：events, f#

编写 F# Windows 窗体应用程序我发现了 F# 的 Event.Filter 函数，我想了解更多有关它的信息。我所做的是转换我现有的代码：

```
MyControl.MouseMove.Add( fun args ->
    if (args.Button = MouseButton.Left && args.X > 10 && args.Y > 10)
    then // do something 
```

到 ：

```
MyControl.MouseMove
|> Event.filter ( fun args -> 
    (args.Button = MouseButtons.Left && args.X > 10 && args.Y > 10))
|> Event.add ( // do something) 
```

我发现 Event.Filter 解决方案非常优雅，所以我想知道它是否只是一种语法糖，或者是“幕后”工作方式的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:11:21.230

查看[源代码](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/control.fs#L2385-2389)，您可以看到您的两个代码示例几乎完全相同。唯一的额外开销是创建额外`Event`的 by `filter`。

`filter`在我看来，由于性能而不使用将是过度优化。

# r - R-sq 值，一个数据集中多个趋势的线性回归

> ID：14716717
> 
> 赞同：2
> 
> 时间：2013-02-05T20:55:43.433
> 
> 标签：r, statistics, linear-regression

我遇到了一个棘手的问题，试图在单个数据集中多次解决由趋势引起的方差.....

我的数据结构是这样的

```
x <- read.table(text = "
STA YEAR    VALUE
a   1968    457
a   1970    565
a   1972    489
a   1974    500
a   1976    700
a   1978    650
a   1980    659
b   1968    457
b   1970    565
b   1972    350
b   1974    544
b   1976    678
b   1978    650
b   1980    690
c   1968    457
c   1970    565
c   1972    500
c   1974    600
c   1976    678
c   1978    670
c   1980    750 " , header = T) 
```

我正在尝试返回这样的东西

```
STA  R-sq
a    n1
b    n2
c    n3 
```

其中 n# 是原始集中位置数据的对应 r 平方值....

我努力了

```
fit <- lm(VALUE ~ YEAR + STA, data = x) 
```

给出多年来每个站点的 VALUE 年度趋势模型，数据可用于 VALUE，在主数据集中....

任何帮助将不胜感激......我真的很难过这个问题，我知道这只是对 R 问题的熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:56:06.657

要为每组的`VALUE`~获得 r 平方，您可以采用这个[先前的答案](https://stackoverflow.com/a/1214432/1036500)，稍微修改它并插入您的值：`YEAR``STA`

```
# assuming x is your data frame (make sure you don't have Hmisc loaded, it will interfere)
models_x <- dlply(x, "STA", function(df) 
     summary(lm(VALUE ~ YEAR, data = df)))

# extract the r.squared values
rsqds <- ldply(1:length(models_x), function(x) models_x[[x]]$r.squared)
# give names to rows and col
rownames(rsqds) <- unique(x$STA)
colnames(rsqds) <- "rsq"
# have a look
rsqds
        rsq
a 0.6286064
b 0.5450413
c 0.8806604 
```

**编辑**：这里遵循 mnel 的建议是将 r 平方值放入一个漂亮的表中的更有效方法（无需添加行和列名称）：

```
# starting with models_x from above
rsqds <- data.frame(rsq =sapply(models_x, '[[', 'r.squared'))

# starting with just the original data in x, this is great:
rsqds  <- ddply(x, "STA", summarize, rsq = summary(lm(VALUE ~ YEAR))$r.squared)

  STA       rsq
1   a 0.6286064
2   b 0.5450413
3   c 0.8806604 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-27T14:30:15.237

```
 #first load the data.table package 
        library(data.table)
    #transform your dataframe to a datatable (I'm using your example)
        x<- as.data.table(x)
    #calculate all the metrics needed (r^2, F-distribution and so on) 
        x[,list(r2=summary(lm(VALUE~YEAR))$r.squared ,
        f=summary(lm(VALUE~YEAR))$fstatistic[1] ),by=STA]
           STA        r2         f
        1:   a 0.6286064  8.462807
        2:   b 0.5450413  5.990009
        3:   c 0.8806604 36.897258 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:14:42.957

只有一个 r 平方值，而不是三个 .. 请编辑您的问题

```
# store the output 
y <- summary( lm( VALUE ~ YEAR + STA , data = x ) )
# access the attributes of `y`
attributes( y )
y$r.squared
y$adj.r.squared
y$coefficients
y$coefficients[,1]

# or are you looking to run three separate
# lm() functions on 'a' 'b' and 'c' ..where this would be the first? 
y <- summary( lm( VALUE ~ YEAR , data = x[ x$STA %in% 'a' , ] ) )
# access the attributes of `y`
attributes( y )
y$r.squared
y$adj.r.squared
y$coefficients
y$coefficients[,1] 
```

# android - video.js 中未显示海报

> ID：14716725
> 
> 赞同：2
> 
> 时间：2013-02-05T20:56:36.487
> 
> 标签：android, flash, firefox, video.js, poster

我正在使用您的 video.js，它正在部分工作。我的意思是我下载了 zipfile 并解压缩到包含所有文件的文件夹 video-js 中。完美，如果我播放你的 demo.html，我可以在 FF 中正确看到它。我想使用你的 video.js 从 localSD 创建一个带有 jquerymobile 播放的 webapp 所以，我在头部设置了正确的位置，因为你建议指向本地 video-js/video.js 我设置了一个海报 photo.png 位于同一个文件夹 video -js。我在 Android 4.0.1 上进行了测试，海报只是在页面过渡时出现，然后消失，留下一个灰色矩形，但我在 iPad 上进行了测试，它可以工作。第二个问题是 Flash 播放器，因为我无法在 Firefox 中播放，并且没有播放器只显示黑色矩形。可能我必须设置正确的路径。您的 video-js.swf 位于同一文件夹 video-js 我必须做什么，我根本不是专家。你能告诉我在哪里需要改变一些东西吗？下面我包含所有设置的 index.html 页面（文件名和图片在位置上是正确的）。谢谢。

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Video 1</title> 
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0-beta.1.min.css" />
    <link rel="stylesheet" href="video-js/video-js.css" />
    <script src="js/jquery-1.9.0.min.js"></script>
    <script src="video-js/video.js"></script>
    <script src="js/jquery.mobile-1.3.0-beta.1.min.js"></script>
    <script>
    _V_.options.flash.swf = "video-js/video-js.swf";
  </script>
</head> 

<body> 
<!-- Home Page -pagina 1 -->
<div data-role="page" id="home"data-theme="d" data-dom-cache="true">

    <div data-role="header"data-theme="a"data-position="fixed">
        <h1>Course MC 5.x - Lesson 1</h1>
    </div><!-- /header -->

    <div data-role="content" >  
        <img src="css/images/woc1_512.png" style="width: 100%; overflow: hidden; height:auto; position: relative;"/>

            <a href="#authortips" data-role="button" data-theme="e" data-transition="flip"data-prefetch >Author's Tips</a>
            <a href="#video1"  data-role="button" data-theme="e" data-transition="flip" data-prefetch>Video 1</a>
            <a href="#video2" data-role="button" data-theme="e"  data-transition="flip" data-prefetch>Video 2</a>       

    </div><!-- /content -->
        <div data-role="footer" data-theme="a">
        <h4>Produced by - <a href="http://www.wocmultimedia.com" target="_blank">Angelo Giammarresi</a></h4>
    </div><!-- /footer -->
</div>

<!-- Author's Tips -->
<div data-role="page" id="authortips" data-theme="d"data-dom-cache="true">

    <div data-role="header"data-theme="a"data-position="fixed" >
        <h1>Course MC 5.x - Lesson 1</h1>
    </div><!-- /header -->

    <div data-role="content" >
        <p>&nbsp;</p><h1>Author's Tips</h1>

        <p><strong><em>Welcome,</em></strong></p>
<p>
Thank you for downloading this first lesson of the Course Media Composer 5.x. My name is Angelo Giammarresi, I'm film director and producer of 90 documentaries around the world, video-editing courses and so on. I set my company, World On Communications, to share my expertises and knowledge acquired since 1978 in TV and multimedia productions, as you can better know visiting <a href="http://www.wocmultimedia.com/" target="blank">www.wcmultimedia.com</a> but, let's go on with the course introduction.</p>

        </div><!-- /content -->
        <div data-role="footer" data-theme="e"data-position="fixed">
        <div data-role="navbar"data-theme="e">
        <ul>
                       <li><a href="#home" data-prefetch data-transition="flip">Home</a></li>
                       <li><a href="#authortips" data-prefetch data-transition="flip" class="ui-btn-active ui-state-persist"data-theme="e">Author's Tips</a></li>
                       <li><a href="#video1" data-prefetch data-transition="flip"  >Video 1</a></li>
                       <li><a href="#video2" data-prefetch data-transition="flip">Video 2</a></li>      
            </ul>       
     </div><!--/navbar -->      
    </div><!-- /footer -->
</div><!--fine pagina 2 authortips -->

<!-- Video 1 pagina 3-->
<div data-role="page" id="video1"data-theme="d"data-dom-cache="false">

    <div data-role="header"data-theme="a"data-position="fixed" >
        <h1>Course MC 5.x - Lesson 1</h1>
    </div><!-- /header -->

    <div data-role="content" align="center">
            <p>&nbsp;</p><h1>Video 1</h1>
        <video id="my_video_1" class="video-js vjs-default-skin" controls
  preload="auto" width="480" height="320"  poster="video-js/woc1_512.png"  data-setup="{}">
  <source src="res/part1.mp4" type='video/mp4'>
  </video>  
        </div><!-- /content -->
        <div data-role="footer" data-theme="e"data-position="fixed" >
        <div data-role="navbar"data-theme="e">
        <ul>
                       <li><a href="#home" data-prefetch data-transition="flip">Home</a></li>
                       <li><a href="#authortips" data-prefetch data-transition="flip">Author's Tips</a></li>
                       <li><a href="#video1" data-prefetch data-transition="flip" class="ui-btn-active ui-state-persist"data-theme="e" >Video 1</a></li>
                       <li><a href="#video2" data-prefetch data-transition="flip">Video 2</a></li>      
            </ul>       
     </div><!--/navbar -->      
    </div><!-- /footer -->
</div>

<!-- Video 2 pagina 4-->
<div data-role="page" id="video2"data-theme="d"data-dom-cache="false">

    <div data-role="header"data-theme="a"data-position="fixed">
        <h1>Course MC 5.x - Lesson 1</h1>
    </div><!-- /header -->

    <div data-role="content" align="center">
            <p>&nbsp;</p><h1>Video 2</h1>
        <video id="my_video_2" class="video-js vjs-default-skin" controls
  preload="auto" width="480" height="320" class="vjs-poster" poster="video-js/woc1_512.png"   data-setup="{}">
  <source src="res/part2.mp4" type='video/mp4'>
  </video>  
        </div><!-- /content -->
        <div data-role="footer" data-theme="e"data-position="fixed" >
        <div data-role="navbar"data-theme="e">
        <ul>
                       <li><a href="#home" data-prefetch data-transition="flip">Home</a></li>
                       <li><a href="#authortips" data-prefetch data-transition="flip">Author's Tips</a></li>
                       <li><a href="#video1" data-prefetch data-transition="flip"  >Video 1</a></li>
                       <li><a href="#video2" data-prefetch data-transition="flip"class="ui-btn-active ui-state-persist"data-theme="e">Video 2</a></li>      
            </ul>       
     </div><!--/navbar -->      
    </div><!-- /footer -->
</div>

</body>
</html> 
```

# python - 在当前命名空间中可转储的 Picklable 数据容器

> ID：14716727
> 
> 赞同：2
> 
> 时间：2013-02-05T20:56:46.173
> 
> 标签：python, matlab

该文档[建议](http://docs.python.org/2/tutorial/classes.html#odds-and-ends)使用以下机制在 Python 中动态创建数据容器：

```
class Employee:
    pass

john = Employee() # Create an empty employee record

# Fill the fields of the record
john.name = 'John Doe'
john.dept = 'computer lab'
john.salary = 1000 
```

以上允许人们在一个标识符 ( `john`) 中轻松地对一组不同的变量进行分组，而不必`''`像使用字典那样键入引号 ( )。

我正在寻找一种解决方案，允许我将碎片（属性）“转储”回当前命名空间。为了解决这个问题，我想到了三个想法/问题：

**1.**给定上面的标识符`john`，我如何以编程方式获取它的属性列表？

**2.**如何`dump` `john`在当前命名空间中轻松添加属性？（即通过浅拷贝或深拷贝创建名为`name`,`dept`的局部变量）`salary`

**3.**以下线程中的最佳答案描述了一种从创建的命名空间中转储变量的方法`argparse`： [Importing variables from a namespace object in Python](https://stackoverflow.com/questions/14697158/importing-variables-from-a-namespace-object-in-python)

也许我可以使用一个`Namespace`对象作为数据容器，就像上面的帖子一样，然后轻松地转储这些变量：

```
locals().update(vars(john)) 
```

?

为方便起见，我在下面列出了一个线程列表，讨论在 Python 中创建数据容器的其他方法，其中一些似乎不适合：

*   [使用 Python 类作为数据容器](https://stackoverflow.com/questions/3357581/using-python-class-as-a-data-container)
*   [像 Python 中的属性一样访问字典键？](https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute-in-python?lq=1)
*   [这种 Python 模式有什么“陷阱”吗？](https://stackoverflow.com/questions/5021041/are-there-any-gotchas-with-this-python-pattern)

### 与 MATLAB 工作流程的连接：

作为参考，MATLAB 通过`save`和提供了这个确切的功能`load`，并且变量[可以很容易地嵌套和取消嵌套](https://stackoverflow.com/questions/3470654/how-can-i-move-variables-into-and-out-of-a-structure-akin-to-load-and-save-in-ma)，从而无需为此目的使用引号/字典）。这个问题背后的动机是确定在 Python 中支持这种“可选工作区”的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:12:50.997

*   给定上面 john 的标识符，我如何以编程方式获取它的属性列表？

    `vars(john)`

从技术上讲，这将为您提供字典映射。如果您只想要属性列表，那么您实际上将需要`vars(john).keys()`

*   如何轻松地将 john 的属性转储到当前命名空间中？（即通过浅拷贝或深拷贝创建名为 name、dept、salary 的局部变量）

我不确定你在这里对浅拷贝或深拷贝的意思。如果您正在谈论简单的引用，那么没有*（好的）*方法可以做到这一点。如果您在全局（模块级）命名空间中，您可以执行以下操作：

```
globals().update(vars(john)) 
```

如果您使用的是 CPython，则使用`locals().update(vars(john))`作品（在某些地方），但[文档](http://docs.python.org/2/library/functions.html#locals)明确警告不要这样做。你能做的最好的就是某种`exec`循环（糟糕！）：

```
d = vars(john)
for k in john:
    exec '{key} = d["{key}"]'.format(key=k) 
```

**请注意，这段代码很难看有一个很好的理由——主要是——你不应该做这样的事情:-P**

并且在使用时`exec`，应用通常的警告 - 确保您信任上的属性`john`。例如`setattr(john,'__import__("os").remove("useful_file"); foo',"anything here")`，这将是一个非常糟糕的一天......

# php - 在 jQuery ajax 数据中发送一个布尔值

> ID：14716730
> 
> 赞同：11
> 
> 时间：2013-02-05T20:57:07.803
> 
> 标签：php, jquery, ajax, json, boolean

我在 Ajax 调用中发送一些数据。其中一个值是设置为 FALSE 的布尔值。在 Ajax 调用的 PHP 脚本中，它总是被评估为 TRUE。有任何想法吗？

```
$.ajax({
    type: "POST",
    data: {photo_id: photo_id, 
           vote: 1, 
           undo_vote: false},   // This is the important boolean!
    url: "../../build/ajaxes/vote.php",
    success: function(data){
        console.log(data);
    }
}); 
```

在上面 Ajax 中调用的脚本 vote.php 中，我检查了布尔值：

```
if ($_POST['undo_vote'] == true) {
    Photo::undo_vote($_POST['photo_id']);
} else {
    Photo::vote($_POST['photo_id'], $_POST['vote']);
} 
```

但`$_POST['undo_vote'] == true`条件总是满足的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T21:01:35.897

帖子只是文本，文本将在 php 中评估为 true。一个快速的解决方法是发送一个零而不是错误。你也可以在 PHP 中为你的真值加上引号。

```
if ($_POST['undo_vote'] == "true") {
    Photo::undo_vote($_POST['photo_id']);
} else {
    Photo::vote($_POST['photo_id'], $_POST['vote']);
} 
```

然后你可以传入真/假文本。如果那是你喜欢的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T07:10:04.030

您可以使用 JSON.stringify() 发送请求数据：

`data : JSON.stringify(json)`

并在服务器上解码：

`$data = json_decode($_POST)`;

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-13T09:56:40.277

您可以将 0 和 1 用于 undo_vote 并在 php 中键入 cast：

JS端：

```
undo_vote: 0 // false 
```

服务器端：

```
$undovote = (bool) $_POST['undo_vote']; // now you have Boolean true / false

if($undovote) {
    // True, do something 
} else {
   // False, do something else 
} 
```

# android - 如何使用 Ant 脚本替换字符串、切换资源文件夹、自动生成 R.java 并编译最终 Apk？

> ID：14716731
> 
> 赞同：0
> 
> 时间：2013-02-05T20:57:13.927
> 
> 标签：android, eclipse, ant

我们希望基于相同的源代码构建多个应用程序。基础源代码将存储在 SVN 中，因此在日常开发中我们只需要修改一个代码库。

而对于不同的客户，我们希望给予一定程度的品牌化。主要是更改图像和标题，这些可以通过更改资源来完成。

经过一番研究，我们发现做这些多版本应用真的很触动。主要问题是R.java是根据包名生成的。包名称标识应用程序。源代码中有很多文件都导入这个package.name.R，这意味着对于不同的应用程序，会有不同的包名，并且大多数源代码文件中需要更改不同R的引用。

我们在网上找到了一些关于使用 Ant 执行此任务的文章，但没有一篇是真正指定的。我们希望有人可以提供帮助！

通常工作流程是这样的：

1.  在 AndroidManifest.xml 中更改包名称
2.  查看所有源代码文件，查找引用 R 的任何内容并将其替换为新的包名称。
3.  将 res 文件夹切换到新客户端的 res 文件夹（我们将准备好此文件夹）
4.  自动生成 R.java 文件。
5.  开始正常的编译和构建过程。
6.  获取 Apk。

我们希望有人能指出我们如何通过使用 Ant 或任何其他更好的解决方案来完成这些任务。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:15:06.563

我认为您应该使用通用代码创建一个 Android 库项目（[http://developer.android.com/tools/projects/index.html#LibraryProjects](http://developer.android.com/tools/projects/index.html#LibraryProjects)），将其签入 VCS，然后为您创建的每个客户创建单独的项目还应该检查 VCS 以跟踪它们。您将能够从相同的源代码生成不同的定制版本。

# android - 从主要活动中使用 asynctask 执行方法的问题

> ID：14716732
> 
> 赞同：1
> 
> 时间：2013-02-05T20:57:14.060
> 
> 标签：android, android-listview, android-asynctask, android-actionbar

所以，我有一个使用 Viewpager 和刷卡的应用程序。我得到了 3 个片段，其中包含一个列表视图和一个用于设置行的自定义适配器。

在每个片段中，我都有一个调用 asynctask 并获取 JSON 的方法。我在 onActivityCreated 中运行这个方法。

当我启动应用程序时，一切正常，进度对话框显示，并且所有列表都设置了正确的数据。

问题是我希望能够在单击操作栏中的刷新按钮时刷新所有列表（以检查新推文）。

我能够使用刷新按钮的唯一方法是在 MainActivity 中使用 onOptionsItemSelected()。

所以我在想，我可以调用那些再调用异步任务的方法。

```
case R.id.menu_refresh:
MSFTHost host = new MSFTHost();
host.getTweets();
    ... 
```

但是当我点击按钮时，整个事情就关闭了：

```
02-05 21:46:57.959: W/dalvikvm(15292): threadid=1: thread exiting with uncaught    exception (group=0x40d5a930)02-05 21:46:58.045:
E/AndroidRuntime(15292): FATAL EXCEPTION: main
02-05 21:46:58.045: E/AndroidRuntime(15292): java.lang.NullPointerException
02-05 21:46:58.045: E/AndroidRuntime(15292):    at com.sandan.HostingNorge.MSFTHost$DownloadWebPageTask.onPostExecute(MSFTHost.java:95)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at com.sandan.HostingNorge.MSFTHost$DownloadWebPageTask.onPostExecute(MSFTHost.java:1)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.os.AsyncTask.finish(AsyncTask.java:631)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.os.Looper.loop(Looper.java:137)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at android.app.ActivityThread.main(ActivityThread.java:5202)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at java.lang.reflect.Method.invokeNative(Native Method)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at java.lang.reflect.Method.invoke(Method.java:511)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
02-05 21:46:58.045: E/AndroidRuntime(15292):    at dalvik.system.NativeStart.main(Native Method) 
```

第 95 行包含以下内容：

```
listItems.add(new  GetListItems(oneObject.getString("text"),oneObject.getString("created_at"),obj
                                .getString("profile_image_url"), obj
                                .getString("screen_name"))); 
```

我尝试清除 listItems，但没有任何效果。

请问有什么帮助吗？

编辑：如果我不清楚，我想再次获取 JSON 并显示在列表中，就像第一次运行一样。

# java - MySQL 和 Java：当数据通过高频事件进入时有效插入

> ID：14716735
> 
> 赞同：2
> 
> 时间：2013-02-05T20:57:27.550
> 
> 标签：java, mysql, events, insert

当发生外部事件（传入测量数据）时，我的 Java 代码中的事件处理程序将被调用。数据应写入 MySQL 数据库。由于这些调用的频率很高（每秒> 1000），我想有效地处理插入。不幸的是，我不是专业的开发人员，也不是数据库白痴。

忽略效率方面，我的代码大致如下所示：

```
public class X {

    public void eventHandler(data) {
        connection = DriverManager.getConnection()
        statement = connection.prepareStatement("insert …")
        statement.setString(1, data)
        statement.executeUpdate()
        statement.close()
        connection.close()
    }
} 
```

我的理解是，通过在*语句上调用**addBatch()*和*executeBatch()* ，我可以将物理磁盘访问限制为假设每 1000 次插入。但是，正如您在我上面的代码草图中看到的那样，*语句*对象是在每次调用*eventHandler()*时新实例化的。因此，我的印象是批处理机制在这种情况下不会有帮助。关闭自动提交然后在*连接对象上调用**commit()*也是如此，因为每次插入后都会关闭该对象。

 ***我可以将局部变量的*连接*和*语句*转换为类成员，并在程序的整个运行时重用它们。但是始终保持数据库连接打开不是不好的风格吗？

一种解决方案是手动缓冲数据，然后仅在收集适当的批次后才写入数据库。不过到现在我还是希望各位聪明的能告诉我如何让数据库为我做缓冲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:24:54.430

> 我可以将局部变量的连接和语句转换为类成员，并在程序的整个运行时重用它们。但是，始终保持数据库连接打开不是不好的风格吗？

考虑到大多数（数据库）连接池通常配置为始终保持至少一个或多个连接打开，我不会称其为“坏风格”。这是为了避免在每个数据库操作上启动新连接的开销（除非必要，如果所有已打开的连接都在使用中并且池允许更多连接）。

在这种情况下，我可能会采用某种形式的批处理（但当然我不知道您的所有要求/环境等）。如果数据不需要在其他地方*立即*可用，您可以构建某种形式的作业队列来写入数据，将传入的数据推送到那里并让其他线程负责将其写入 N 大小的数据库批次。看看[java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)包中有哪些类可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:01:33.993

我建议您使用 a`LinkedList<>`来缓冲数据（如队列），然后在需要时在单独的线程中将数据存储到 dbms 中，定期执行（可能每 2 秒？）

了解[如何在 java 中使用链表构造队列](https://stackoverflow.com/questions/10471049/queue-using-linked-list-implementation-in-java)***

# compiler-construction - 实施方案：闭包和“设置！” 冲突

> ID：14716737
> 
> 赞同：1
> 
> 时间：2013-02-05T20:57:31.120
> 
> 标签：compiler-construction, functional-programming, scheme, closures

`set!`最近我在实现方案解释器时遇到了和闭包之间的冲突。

(set! *var* *expr* ) 的描述如下：( [tspl](http://www.scheme.com/tspl4/binding.html#./binding%3ah7) )

> `set!`不会为*var*建立新绑定，而是更改现有绑定的值。它首先计算*expr*，然后将*var分配给**expr*的值。在更改的绑定范围内对*var*的任何后续引用都将评估为新值。

关于 lambda 绑定的描述是：（[tspl](http://www.scheme.com/tspl4/binding.html#./binding%3ah2)）

> 创建过程时，在主体内自由出现的所有变量的绑定，不包括形式参数，都与过程一起保留。随后，每当将过程应用于一系列实际参数时，形式参数就会绑定到实际参数，保留的绑定被恢复，并评估主体。

**我真的不明白'自由变量**'是什么意思，我的闭包实现是创建所有当前可用变量的快照并将快照存储到闭包中。每当执行闭包时，它都会按顺序执行以下工作：（[代码](https://github.com/shouya/revo/blob/3bb72ccefe535ada7ad0150b62d1845794ebc186/lib/revo/lambda.rb#L16)）

1.  创建一个引用当前执行环境的父范围的本地范围（上下文）。
2.  将快照中的所有变量存储到新创建的范围中。
3.  将所有具有相应参数名称的实际参数存储在新范围中。
4.  将主体评估为新范围中的列表。

我实现`set!`运算符的方法是：（[代码](https://github.com/shouya/revo/blob/3bb72ccefe535ada7ad0150b62d1845794ebc186/lib/revo/built_in.rb#L132)）

1.  向上查找范围（沿着父引用），直到包含具有给定名称的变量的范围。
2.  将该范围内的变量值设置为新值。

这个过程在大多数情况下似乎都有效，但是当有一个`set!`内部旨在修改本地范围之外的外部变量时，这变得不可能，因为`set!`无法真正找到 REAL 变量，而只是存储在闭包快照中的那个。

让我用代码解释一下：

```
(define x 3)

((lambda ()      ;; binding(snapshot) == { x: 3 }
   (set! x 4)    ;; changing the value in local scope which derived from the snapshot.
   (display x))) ;; ==> 4

(display x)      ;; ==> 3 
```

我该如何解决这个冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:05:26.860

简单的！不要使用快照。直接访问更高级别的范围。

# java - 如何检测 Mac 是否具有来自 Java 的 Retina 显示屏？

> ID：14716743
> 
> 赞同：7
> 
> 时间：2013-02-05T20:57:58.093
> 
> 标签：java, macos

我发现了一个 Swing 图像渲染错误，它只影响带有 Retina 显示器的 Mac（`TYPE_INT_ARGB_PRE` `BufferedImages`无法绘制）。我有一个有效的解决方法（改用`TYPE_INT_ARGB`图像），但为了应用它，我需要能够检测主机是否是带有 Retina 显示屏的 Mac。检测机器是不是Mac没问题，但是怎么判断显示器类型呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T21:17:09.177

`Toolkit.getDefaultToolkit().getDesktopProperty("apple.awt.contentScaleFactor")`

上面的行应该`2.0`在视网膜显示器上返回。在最近的非视网膜 Mac 上它会返回`1.0`，而在所有其他平台上你会返回`null`。我找不到任何官方文档，但在尝试解决类似问题时，我[在这个邮件列表帖子中遇到了它。](http://lists.apple.com/archives/java-dev/2012/Jul/msg00048.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-30T03:12:56.333

我发现[这个](http://osdir.com/ml/macosx-port-development-java/2013-11/msg00118.html)解决方案使用：

```
Graphics2D g = (Graphics2D) this.getGraphics ();
boolean retinaTest = g.getFontRenderContext ().getTransform ()
    .equals (AffineTransform.getScaleInstance (2.0, 2.0)); 
```

# sql - MSSQL - 将自 1970 年以来的毫秒转换为 datetime2

> ID：14716744
> 
> 赞同：4
> 
> 时间：2013-02-05T20:58:02.140
> 
> 标签：sql, sql-server-2008, datetime

考虑以下查询（在 MSSQL 2008 中）：

```
SELECT dateModified FROM SomeTable; 
```

这将返回 javascript 格式的浮点数（自 1970 年以来的毫秒数）：

```
dateModified 
============ 
1301598290687 
1071003581343 
1311951478593 
```

如何在选择中将其转换为 datetime2？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T21:09:24.880

在这里使用[@Mikeal Eriksson 的答案](https://stackoverflow.com/questions/12524537/convert-utc-milliseconds-to-datetime-in-sql-server/12524691#12524691)中的公式。

我会将浮点数转换为 bigint，然后创建日期时间：

```
select 
  DATEADD(MILLISECOND, 
          cast(dateModified as bigint) % 1000, 
          DATEADD(SECOND, cast(dateModified as bigint) / 1000, '19700101'))
from sometable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ed339/3)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T21:57:06.297

一些 Oracle 示例 - 将 to_date() 替换为等效项：

```
 SELECT (1301598290687/60/60/24/1000) as Days
   , to_date('01-01-1970','dd-mm-yyyy') as start_date
   , to_date('01-01-1970','dd-mm-yyyy')+(1301598290687/60/60/24/1000) as converted_date
  FROM dual
  /

DAYS                START_DATE      CONVERTED_DATE
---------------------------------------------------------
15064.7950310995    1/1/1970        3/31/2011 7:04:51 PM 
```

创建双表：

```
CREATE TABLE DUAL
(
DUMMY VARCHAR(1)
)
GO
INSERT INTO DUAL (DUMMY)
 VALUES ('X')
GO 
```

# ios - 获取设备类型/型号

> ID：14716754
> 
> 赞同：1
> 
> 时间：2013-02-05T20:58:26.320
> 
> 标签：ios, objective-c, xcode

在查看如何在此处检测用户设备之后：[iOS - 如何获取设备制造商和型号？](https://stackoverflow.com/questions/11197509/ios-iphone-get-device-model-and-make)

我制作了一个快速测试应用程序来根据设备显示警报。我没有从这段代码中得到任何警报。我在这里错过了什么/做错了什么？

```
#import "ViewController.h"
#import <sys/utsname.h>

 NSString* machineName()
{
struct utsname systemInfo;
uname(&systemInfo);

return [NSString stringWithCString:systemInfo.machine
                          encoding:NSUTF8StringEncoding];
}

@interface ViewController ()

@end

- (IBAction)btn:(id)sender {

if ([machineName() isEqualToString:@"iPhone5,1"]){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Checking device iphone5" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

    } else  if ([machineName() isEqualToString:@"iPhone4,1"]){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Checking device iphone4" delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

     }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:39:50.207

`machine`字段`struct utsname`是机器硬件平台，即程序`"x86_64"`是否在 iOS 模拟器中运行。

只有在真实设备上，您才会获得类似`"iPhone5,1"`.

# ruby-on-rails-3.2 - 使用omniauth-linkedin 进行教育、技能、联系

> ID：14716755
> 
> 赞同：2
> 
> 时间：2013-02-05T20:58:27.123
> 
> 标签：ruby-on-rails-3.2, omniauth, linkedin

我在 Rails 中使用 omniauth-linkedin gem 并尝试从“r_fullprofile”和“r_network”获取数据。

在omniauth.rb 中：

```
 provider :linkedin, 'consumer_key', 'consumer_secret', 
       :scope => 'r_fullprofile r_emailaddress r_network', 
       :fields => ["id", "email-address", "first-name", "last-name", 
                   "headline", "industry", "picture-url", "public-profile-url", 
                   "location", "connections", "skills", "date-of-birth", "phone-numbers",        
                   "educations", "three-current-positions" ] 
```

在控制器中：

```
render :text => request.env["omniauth.auth"].to_yaml 
```

结果输出似乎只有“r_basicprofile”的数据。我怎样才能获得解析所需数据的其余部分（例如“连接”、“技能”、“教育”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T08:06:48.540

我在使用 Devise 的 Omniauth 时遇到了同样的问题。

我必须进行更改以将 :fields => [...] 放入花括号中。

在你的情况下：

```
 provider :linkedin, 'consumer_key', 'consumer_secret', 
       {:scope => 'r_fullprofile r_emailaddress r_network', 
       :fields => ["id", "email-address", "first-name", "last-name", 
                   "headline", "industry", "picture-url", "public-profile-url", 
                   "location", "connections", "skills", "date-of-birth", "phone-numbers",        
                   "educations", "three-current-positions" ]} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T09:46:57.650

不知道这是否会对您有所帮助，但现在有些字段有不同的名称。我把它放在我的 devise.rb 上，它可以工作：

```
config.omniauth :linkedin, ENV['OAUTH_LINKEDIN_ID'], ENV['OAUTH_LINKEDIN_SECRET'],
fields: %w(id email-address first-name last-name headline industry picture-url public-profile-url location num-connections), image_size: {height: 1600} 
```

`connections`现在是`num-connections`，请参阅[Linkedin 文档](https://developer.linkedin.com/docs/fields/basic-profile)

# vim - vim: 禁用omnicompletion 状态消息（例如未找到模式）

> ID：14716756
> 
> 赞同：2
> 
> 时间：2013-02-05T20:58:31.593
> 
> 标签：vim, autocomplete

在 vim 中，有没有办法抑制全完成消息，例如：

```
"-- Keyword completion (^N^P) Back at original"
"-- Keyword completion (^N^P) Pattern not found"
"-- Keyword completion (^N^P) match 1 of 3" 
```

这没什么大不了的，只是因为我一直在使用它而有点分散注意力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-23T10:16:01.100

vim 7.4.314后可以关闭，我在Shougo找到了这个[补丁](https://groups.google.com/forum/#!topic/vim_dev/WeBBjkXE8H8)，添加`setlocal shortmess+=c`会抑制这些消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:56:27.390

这些消息应该可以帮助您完成候选者，所以恐怕没有办法将它们关闭。

# iphone - 计算字符串中每次出现的括号，ios sdk

> ID：14716757
> 
> 赞同：1
> 
> 时间：2013-02-05T20:58:31.493
> 
> 标签：iphone, ios, objective-c, sdk

我做了一些代码来计算某个字符串中的每个括号，

有没有更简单的方法？

```
NSCharacterSet *parenthesis = [NSCharacterSet characterSetWithCharactersInString:@"()"];
parenthesis = [parenthesis invertedSet];
NSArray *arr = [someString componentsSeparatedByCharactersInSet:parenthesis];
NSInteger count = 0;
for(int i=0;i<[arr count];i++)  {
    if([[arr objectAtIndex:i] isEqualToString:@")"])
        count++;
}
NSLog(@"count is %d", count); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:08:52.393

既然您无论如何都需要遍历字符串中的所有字符，为什么不简单地

```
NSUInteger count = 0;
for (NSInteger i = someString.length - 1 ; i >= 0 ; i--) {
    unichar ch = [someString characterAtIndex:i];
    count += (ch == '(' || ch == ')');
} 
```

这使用更少的类，更容易阅读，并且使用更少的 CPU 来执行计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:10:01.517

正则表达式的救援

```
NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@"[()]" options:NSRegularExpressionCaseInsensitive error:NULL];
NSUInteger numberOfMatches = [regex numberOfMatchesInString:someString options:0 range:NSMakeRange(0, [someString length])]; 
```

这使用了框架功能，这意味着它已针对字符串操作进行了调整，并且操作清晰。如果您只需要检查特定的子字符串，它就很灵活。它也非常易于维护，如果您需要计算其他类型的字符，只需更改正则表达式即可。

# c# - agsXMPP 中出现奇怪的花名册（可能是安卓设备）

> ID：14716768
> 
> 赞同：0
> 
> 时间：2013-02-05T20:59:07.020
> 
> 标签：c#, xmpp, google-talk, agsxmpp

我正在使用 agsXMPP SDK 在 C# 中创建一个小型 GTalk 客户端。

```
XmppClientConnection connection = new XmppClientConnection();
.
.
.
connection.OnPresence += new PresenceHandler(xmpp_OnPresence);

private void xmpp_OnPresence(object sender, Presence pres)
{
 Console.WriteLine(pres.pres.From.User); // this is "3aav33e8erudg29gzjg***"
} 
```

我可以使用他们的用户名读取大多数联系人，但有些不是很有用。这是身体：

```
<presence xmlns="jabber:client" from="3aav33e8erudg29gzjg*****c@public.talk.google.com/android_talkc2f2f*******" to="**************@gmail.com/agsXMPP678C2F26"><priority>24</priority><caps:c xmlns:caps="http://jabber.org/protocol/caps" node="http://www.android.com/gtalk/client/caps" ver="1.1" ext="pmuc-v1 voice-v1 video-v1 camera-v1" /><show>away</show><x xmlns="vcard-temp:x:update"><photo>4d211fc**************90a130a1345425b1e</photo></x></presence> 
```

有什么方法可以从中获取可读的用户名吗？这个人好像是我的联系人，但我不知道是谁……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:10:35.340

据我所知，这是从 Google+ 圈子自动创建的联系人。出于隐私原因，真实的 Google id 是隐藏的。如果您不想要这些联系人，您可以在 G+ Chat 隐私设置中禁用它们。

# android - 正确检测 SD 卡是否可用

> ID：14716770
> 
> 赞同：3
> 
> 时间：2013-02-05T20:59:29.607
> 
> 标签：android

我使用以下代码检查 SD 卡是否可用，但在运行 Android 4.x 及更高版本的三星 Galaxy II 和 Note 设备上，即使实际上设备上没有 SD 卡，操作系统也会模拟拥有 SD 卡。

```
private boolean isSDCardAvailable() {
    return android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
} 
```

如果 SD 卡可用，则调用 getExternalCacheDir() 获取目录，否则我向用户显示错误并调用 getCacheDir() 以使用内部存储。

上面的方法返回 TRUE 和 ALL 设备，即使它们没有 SD 卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T21:07:30.550

请参阅此方法从 API 级别 11 开始可用，它可以让您知道内部存储器是否作为外部存储工作。`getExternalStorageDirectory()`即使 SD 卡不可用，在某些设备中也会返回 true。阅读下面的文档了解详细信息。

```
public static boolean isExternalStorageEmulated () 
```

> 在 API 级别 11 中添加
> 
> 返回设备是否具有模拟的外部存储设备。***如果为 true，则设备没有真正的外部存储，getExternalStorageDirectory() 返回的目录将使用内部存储系统的一部分进行分配。***

**某些系统服务，例如包管理器，使用它来确定安装应用程序的位置。**

> 模拟的外部存储也可能被加密 - 有关更多详细信息，请参阅 setStorageEncryption(android.content.ComponentName, boolean)。

[安卓文档](http://developer.android.com/reference/android/os/Environment.html#isExternalStorageEmulated%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:17:30.807

```
boolean mExternalStorageAvailable;
boolean mExternalStorageWriteable;

private void checkExternalMedia() {
    mExternalStorageAvailable = false;
    mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    }
} 
```

# c# - 使用 GetType() 进行 C# 动态转换

> ID：14716771
> 
> 赞同：1
> 
> 时间：2013-02-05T20:59:30.513
> 
> 标签：c#, .net, types, casting, overloading

我已经阅读了许多试图完成类似任务的帖子，但找不到解决我问题的正确方法。

我正在尝试在运行时动态转换对象。（我知道你们很多人会说它不能完成，我实际上不确定它是否可以......）我的问题是我在 a 中动态创建`TreeView`了一个`Windows Forms Application`来显示一个`Org Chart`.

从 3 个表中`TreeView`提取的数据：`Departments`、`Jobs`、`Employees`。

`Tables`作为 a导入，`Local DataSource`我将所有 3 个表作为`DataSet`对象，并将对象类型的模板`DataRow`转换为它来自的表（包括作为属性的所有列）。（类似于 linq - Oracle DB 除外）

我创建`TreeNode`对象，使用我的描述字段`DataRow`作为`TreeNode.Text`属性，然后将其`DataRow`本身作为`TreeNode.Tag`属性。这样，我可以通过以下方式直接从内部访问数据`TreeNode`：

```
dsMyDataSource.DepartmentRow = 
    (dsMyDataSource.DepartmentRow)treeview1.SelectedNode.Tag; 
```

我有一个方法，只要用户选择一个填充一个带有一些基础对象数据的窗口`Node`的方法，它就会运行。截至目前，我有一个带有 switch 语句的方法，如下所示：`treeview1``Details`

```
private doSomething()
{
    switch(treeview1.SelectedNode.Tag.GetType().Name)
    {
        case "dsMyDataSource.DepartmentRow":
            dsMyDataSource.DepartmentRow department = 
                (dsMyDataSource.DepartmentRow)treeview1.SelectedNode.Tag;
            lblDetailsTitle = department.Title;
            break;
        case "dsMyDataSource.JobRow":
            //etc...
    }
} 
```

我想要做的是为每种类型提供重载方法并摆脱我的 switch 语句。像这样：

```
this.doSomething(treeview1.SelectedNode.Tag); 
```

问题是，这会返回一个基础对象（因此是演员表）。但我在编译时不知道用户将选择哪种类型的 TreeNode。因此，我希望能够执行以下操作：

```
this.doSomething((treeview1.SelectedNode.Tag.GetType())treeview1.SelectedNode.Tag);

private void doSomething(dsMyDataSource.DepartmentRow department)
{
    lblDetailsTitle = department.Title;
    // etc...
}

private void doSomething(dsMyDataSource.JobRow job) {..}

private void doSomething(dsMyDataSource.EmployeeRow employee) {..} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:10:05.123

如果您使用一些有意义的对象而不是直接在 DataRows 上工作，您可能会发现事情更干净。此外，这将允许您添加一个基类，这将使您的铸造问题消失。

所以例如你可以有

```
abstract class Selectable
{
    public string Type { get; private set; }

    public Selectable(string type) { Type = type; }

    abstract void doSomething();
} 
```

然后是您要选择的每件事的类型

```
class Department : Selectable{...}, class Job : Selectable{...} 
```

要获得基本类型，您需要在工厂对象中使用一个开关。

```
public static class SelectableFactory
{
    public static Selectable GetFromDataRow(DataRow dr)
    {
        Selectable res = null;
        switch (dr.Type)
        {
            case "Department":
                res = new Department(dr);
                // etc ...
            }
    }
} 
```

但是您现在拥有一组可以使用多态性来执行操作的 Selectable。

除了让您的生活更轻松之外，它还将使您的代码更容易为将来必须处理它的任何其他人解析。它也是可扩展的，因此当您需要添加 DoSomethingElse 方法时，添加所有内容要容易得多 - 或者当您需要一种新型数据表时，您不会干扰您的 UI 代码。

# android - 在 EditText 上实现自动填充

> ID：14716774
> 
> 赞同：3
> 
> 时间：2013-02-05T20:59:39.387
> 
> 标签：android, android-edittext, listener

我有一个`EditText`字段，我想在上面介绍某种自动填充功能。如果按下“S”按钮，我目前要做的就是用“特殊 CT”填充 EditText 框。这就是我所拥有的：

```
ctEditText = (EditText) findViewById( 1001 );
    ctEditText.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            Log.i( "KEY", "PRESSED" );
            // if keydown and "enter" is pressed
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                && (keyCode == KeyEvent.KEYCODE_ENTER)) {

                return true;

            } else if ((event.getAction() == KeyEvent.ACTION_DOWN)
                && (keyCode == KeyEvent.KEYCODE_S)) {
                Log.i( "KEY", "S" );
                if( ctEditText.getText().toString().length() == 1 ) {
                    ctEditText.setText( "Special CT" );
                }
                return true;
            }

            return false;
        }
     }); 
```

使用此代码，按“S”按钮对我完全没有任何作用。在我按下键盘右下角的 Enter 按钮之前，我的 LogCat 不会显示我的任何一个 LogCall。当我按下 enter 按钮时，它会显示`KEY PRESSED`两次日志调用，无论我在 enter 按钮之前按下了多少个不同的键。

**编辑**

因此，在搞砸了一些之后，我意识到`Log`呼叫出现两次的原因是因为它也在我释放回车键时出现。我也得到了 S 键来调用`KEY PRESSED`日志调用，但在我的`If statement`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:05:45.463

尝试这个：

```
ctEditText = (EditText) findViewById( 1001 );
ctEditText.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        Log.i( "KEY", "PRESSED" );
        // if keydown and "enter" is pressed
        if (ctEditText.getText().toString().equalsIgnoreCase("S")) {
            Log.i( "KEY", "S" );               
            ctEditText.setText( "Special CT" );               
            return true;
        }
        else if ((event.getAction() == KeyEvent.ACTION_DOWN)
            && (keyCode == KeyEvent.KEYCODE_ENTER)) {

            return true;

        } 

        return false;
    }
 }); 
```

只需检查输入的文本是否等于“S”

```
if (ctEditText.getText().toString().equalsIgnoreCase("S")) 
```

更好的是，您可以使用[**TextWatcher**](http://developer.android.com/reference/android/text/TextWatcher.html) [示例](https://stackoverflow.com/questions/7435661/edittext-not-updated-after-text-changed-in-the-textwatcher)

# matlab - 如何以fortran方式读取Matlab中的简单txt文件（即我想在换行符后继续阅读）

> ID：14716775
> 
> 赞同：2
> 
> 时间：2013-02-05T20:59:57.647
> 
> 标签：matlab, fortran

我必须阅读我在这篇文章末尾写的简单文本文件（它只是一个结构化的网格）。在 fortran 中很容易做到这一点，你只需要这样做：

```
 read(fileunit,*)
    read(fileunit,*) mc,nc
    do j = 1, nc 
       read (fileunit, *) dummy, dummy, (xcor(j,i), i=1,mc) 
    enddo 
```

matlab中是否有一个等效的函数可以逐个元素地读取并在换行符之后继续读取，就像在fortran中一样？我找不到它，所有函数如 fscanf、textscan 等逐行读取，然后我必须解析每一行。这是文件。感谢您的任何帮助。

```
Gridfile version 8.675.44
8     3
eta=    1   0.00000000000000000E+00    1.50000000000000000E+02             
            4.50000000000000000E+02    6.00000000000000000E+02
            4.50000000000000000E+02    6.00000000000000000E+02
            4.50000000000000000E+02    6.00000000000000000E+02 
eta=    2   0.00000000000000000E+00    1.50000000000000000E+02      
            3.00000000000000000E+02    4.50000000000000000E+02    
            7.50000000000000000E+02    9.00000000000000000E+02 
            4.50000000000000000E+02    6.00000000000000000E+02 
eta=    3   0.00000000000000000E+00    1.50000000000000000E+02      
            3.00000000000000000E+02    4.50000000000000000E+02    
            7.50000000000000000E+02    9.00000000000000000E+02   
            4.50000000000000000E+02    6.00000000000000000E+02 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:10:07.407

有很多方法可以做到这一点，但也许您会喜欢这种`fscanf`工作方式，如本例所示。在文件被类似的东西打开`fin = fopen('gridfile.txt')`并且标题被吞下后，您可以使用`fscanf(f, 'x= %d')`, 然后`fscanf(f, '%f')`，它将读取整个块。如果没有指示，则不会在行尾`fscanf` **停止。**总之，一个解决方案可能看起来像

```
fin = fopen('gridfile.txt');
fgetl(fin);
% read data counts
cnt = fscanf(fin, '%d %d', 2);
mc = cnt(1);
nc = cnt(2);
xcor = zeros(nc, mc);
% read blocks of data
for j = 1 : nc
    fscanf(fin, '%s %s', 2);
    xcor(j, :) = fscanf(fin, '%f', mc)';
end
fclose(fin); 
```

`fscanf`尽可能长时间地匹配格式说明符，并且仅在找不到进一步的连续匹配时返回。上面的例子在两个地方使用了这个。首先，`cnt`在您的示例中提取维度 (8, 3)，其次，读取每条记录的八个连续浮点值。

# ruby-on-rails - 以haml语法显示搜索结果

> ID：14716782
> 
> 赞同：0
> 
> 时间：2013-02-05T21:00:28.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, haml

我是 ruby​​ 新手，在实现以 haml 语法进行搜索的视图时遇到了麻烦。

这是我的搜索控制器代码，效果很好

应用程序/控制器/搜索

```
def search(text)
      @patients = @client.submit_search({ query: text, page: 1, page_size: 30 })
 end 
```

这是我在 /config 中的路线

```
match 'patients/index' => 'search/patients#index', via: :get 
```

这是我的观点，其中包含以下表格：

```
//Search Form
%h2 Patient Search
.search-form-elements
  %form{ :action => "", :method => "get"}

    %label{:for => "name"} First Name:
    %input{:type => "text", :name =>"first_name"}

    %label{:for => "name"} Last Name:
    %input{:type => "text", :name =>"last_name"}

    %label{:for => "name"}
    %input{:type => "submit", :value => "Search", :class => "button"}

  %table.table.table-bordered.table-condensed
    %tr
      %th
        Patient Name
      %th
        Id#
      %th
        Age
      %th
        Gender 
```

基本上，当我输入一些文本并点击提交时，我想在上面的 html 表格片段中显示患者姓名、患者年龄等。如果结果集为空，我不想显示 html 表格。但我不确定如何以haml格式实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:17:41.613

这是我将如何做到的。我在这里假设您在索引视图中有您的患者列表。

在您看来：

```
= form_tag patients_path, method: 'get' do
  = text_field_tag :search, params[:search]
  = submit_tag "Search", :name => nil

- if @patients.present?
  %table.table.table-bordered.table-condensed
    %tr
      %th Patient Name
      %th Id
      %th Age
      %th Gender

    - @patients.each do |patient|

      %tr
        %td= patient.name
        %td= patient.id
        %td= patient.age
        %td= patient.gender 
```

在您的`Patient`控制器中：

```
def index
  @patients= Patient.search(params[:search])
end 
```

在你的模型中：

```
def self.search(search)
  key = "%#{search}%"
  if search
    where('first_name LIKE ? OR last_name LIKE ?', key, key)
  else
    all
  end
end 
```

# android - 遍历 SOAP 响应

> ID：14716783
> 
> 赞同：1
> 
> 时间：2013-02-05T21:00:29.817
> 
> 标签：android, ksoap2, soap-client, android-ksoap2

我的肥皂响应如下所示：

```
<return>
  <allergies>
    <description>Allergy on Skynet</description>
  </allergies>
  <allergies>
    <description>Allergy 2</description>
  </allergies>
  <allergies>
    <description>Allergy 3</description>
  </allergies>
  <dateOfBirth>1989-02-28T00:00:00Z</dateOfBirth>
  <diagnosys>Something bad</diagnosys>
  <firstName>Sara</firstName>
  <gender>Female</gender>
  <id>2</id>
  <lastName>Conor</lastName>
  <medicationList>
    <description>Medication 1</description>
    <dossage>34ml</dossage>
    <id>4</id>
    <medicationTimes>
      <from>1970-01-01T00:00:00Z</from>
      <to>1970-01-01T00:30:00Z</to>
    </medicationTimes>
    <medicationTimes>
      <from>1970-01-01T01:00:00Z</from>
      <to>1970-01-01T02:00:00Z</to>
    </medicationTimes>
    <otherInfo>Something</otherInfo>
    <strength>strong</strength>
  </medicationList>
  <medicationList>
    <description>Medication 2</description>
    <dossage>10 ml</dossage>
    <id>5</id>
    <medicationTimes>
      <from>1970-01-01T20:15:00Z</from>
      <to>1970-01-01T22:30:00Z</to>
    </medicationTimes>
    <otherInfo>bla bla bla</otherInfo>
    <strength>very strong</strength>
  </medicationList>
  <medicationList>
    <description>Aspirin</description>
    <dossage>34ml</dossage>
    <id>6</id>
    <otherInfo>bla bla bla</otherInfo>
    <strength>very strong</strength>
  </medicationList>
</return> 
```

我必须遍历所有内容并列出清单。为此，我正在执行以下操作：

```
SoapObject response = (SoapObject) envelope.bodyIn;

            object = (SoapObject)response.getProperty("return");
            details.setFirstName(object.getProperty("firstName").toString());
            details.setLastName(object.getProperty("lastName").toString());

            ArrayList<PatientMedicine> medicineList=new ArrayList<PatientMedicine>();
            PatientMedicine medicine=new PatientMedicine();

            SoapObject oMedicationList=(SoapObject) object.getPropertySafely("medicationList");

           // SoapObject oMedicationTime=(SoapObject)oMedicationList.getPropertySafely("medicationTimes");

            if(oMedicationList!=null){
                for(int k=0;k<oMedicationList.getPropertyCount();k++){

                    //SoapObject test=(SoapObject)oMedicationList.getProperty(k); //I can not do this..this gives error.
                    SoapObject oMedicationTime=(SoapObject)oMedicationList.getProperty("medicationTimes");

                    medicine.setDescription(oMedicationList.getPrimitivePropertySafelyAsString("description"));
                    medicine.setDossage(oMedicationList.getPrimitivePropertySafelyAsString("dossage"));
                    medicine.setStrength(oMedicationList.getPrimitivePropertySafelyAsString("strength"));

                medicineList.add(medicine);

                }

                details.setMedicineList(medicineList); 
```

现在的问题是，从上面的代码中，我只得到了 n 次的第一个对象。不是每个项目。

我在哪里做错了？如果有人可以帮助我，那就太好了。

# ios - iOS计算器应用程序构建错误

> ID：14716784
> 
> 赞同：-2
> 
> 时间：2013-02-05T21:00:31.120
> 
> 标签：ios, objective-c

我对目标 c 和制作应用程序非常陌生，并且不确定为什么这没有构建。这是我失败的代码：CalculatorViewController.m

```
#import "CalculatorViewController.h"

@interface CalculatorViewController ()

@end

@implementation CalculatorViewController
-(CalculatorBrain *)brain
{
    if (!brain){
        brain = [[CalculatorBrain alloc] init];
    }
    return brain;
}

-(IBAction)digitPressed:(UIButton *)sender;
{
    NSString *digit = [[sender titleLabel] text];
    if (userIsInTheMiddleOfTypingANumber){
        [display setText:[[display text] stringByAppendingString:digit]];
    } else{
            [display setText:digit];
        userIsInTheMiddleOfTypingANumber = YES;
        }

}
-(IBAction)operationPressed:(UIButton *)sender;
{
    if (userIsInTheMiddleOfTypingANumber){
        [[self brain] setOperand:[[display text] doubleValue]];
        userIsInTheMiddleOfTypingANumber = NO;
    }
    NSString *operation = [[sender titleLabel] text];
    double result = [[self brain] performOperation:operation];
    [display setText:[NSString stringWithFormat:@"%g", result]];
}

@end 
```

和 CalculatorViewController.h

```
 #import <UIKit/UIKit.h>
#import "CalculatorBrain.h"

@interface CalculatorViewController : UIViewController{
    IBOutlet UILabel *display;
    CalculatorBrain *brain;
    BOOL userIsInTheMiddleOfTypingANumber;
}

-(IBAction)digitPressed:(UIButton *)sender;
-(IBAction)operationPressed:(UIButton *)sender;

@end 
```

`double result = [[self brain] performOperation:operation];`在 CalculatorViewController.m 的最后，我收到错误 Initializing 'double' with an expression of in compatible type 'void' 这是什么意思，或者我应该在哪里解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:02:39.910

这意味着`CalculatorBrain`'s`performOperation:`方法的返回类型是 type`void`而不是`double`. 查看该函数的声明和定义，了解您需要做什么来修复错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:03:10.033

`performOperation:`可能会被宣布为

```
- (void)performOperation:(NSString*)operation; 
```

如您所见， this 的返回是`void`. 这意味着它不会返回任何东西，因此，您试图将 void 返回分配给无效的双精度数。

问题要么在头文件中，要么在已实现的实现文件中。查看方法签名，看它是否包含 void。

要解决这个问题，要么不要分配给双精度变量，要么（我认为更可取）允许`performOperation:`返回双精度值。

# java - 如何验证 Spring 表单中的日期格式

> ID：14716788
> 
> 赞同：6
> 
> 时间：2013-02-05T21:00:47.830
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我是 Spring 的新手，我正在尝试创建一个验证日期格式的表单（即：它只接受格式为“ `MM/dd/yyyy`”的日期，如果用户输入“ `mm-dd-yyyy`”，它应该显示错误消息）。

如何使用 Spring 实现这一目标？

我已经阅读了很多类似[this](https://stackoverflow.com/questions/9352891/spring-mvc-date-format-validation-with-jsr303)和[this](https://stackoverflow.com/questions/10785107/set-date-format-for-an-input-text-using-spring-mvc)的帖子和答案，建议`@InitBinder`在控制器中使用（我尝试过但无法使其正常工作）。但是，如果我有一个不同日期的表格怎么办？或者如果我的控制器管理来自不同表单的多个发布请求，并且每个请求都需要不同的日期验证？

目前我有这个表格：

```
<form:form action="getReportFile.html" commandName="staticReportForm">
            <table>
                <tr>
                    <td>Reports:</td>
                </tr>
                <tr>
                    <td><form:select path="report" items="${staticReports}"/>                        
                    </td>
                </tr>
               <tr>
                   <td>Date (MM/DD/YYYY) (empty for most recent possible):<FONT color="red"><form:errors
                                path="date" /></FONT></td>
               </tr>
               <tr>
                   <td><form:input path="date" /></td>
               </tr>
               <tr>
                   <td><input type="submit" value="Submit" /></td>
               </tr>
           </table>            
       </form:form> 
```

这将是支持表单的 bean（`@DateTimeFormat`只有在您输入正确格式的情况下，注释才能使其工作）：

```
public class StaticReportForm {
        @NotEmpty        
        private String report;    
        @DateTimeFormat(pattern="MM/dd/yyyy")
        private Date date;

    public String getReport() {
        return report;
    }

    public void setReport(String report) {
        this.report = report;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T17:05:41.877

不知道spring有没有直接的方法，但是我做的方法是结合了jQuery的DatePicker和InitBinder。

在 JS 端，您创建一个：

```
<form:input cssClass="datepicker" path="someProperty" readonly="true" /> 
```

然后在JS中：

```
$(document).ready(function() {
    $('.datepicker').datepicker();
}); 
```

在 Controller 端，创建一个方法，如下所示：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    sdf.setLenient(true);
    binder.registerCustomEditor(Date.class, new CustomDateEditor(sdf, true));
} 
```

从这里，您可以在资源包中创建 typeMismatch 消息，以创建漂亮、漂亮的消息。用户将无法手动输入字段，而只能使用 jQuery DatePicker，它将根据需要格式化日期（我认为默认为 MM/dd/yyyy）。在他们确实设法输入日期的情况下，Spring 将使用配置的 CustomEditor 将字符串从视图转换为预期的日期。如果失败，您会在 BindingResults 中收到错误（如果您将其包含在方法签名中）。正如我之前所说，您可以自定义此方法，但在资源包中设置自定义 typeMismatch 消息。

**编辑：添加额外的细节作为我上面的解释显然不够清楚......**

首先，创建一个 Bean 或其他东西来充当您的模型属性（从 View 到 Controller 来回发送的内容）。确保其中至少有一个日期。

```
public class SomeBean {
    private Date someDate;
    // ...additional properties, getters, setters...
    public Date getSomeDate() { return someDate; }
    public void setSomeDate(Date date) { somedate = date; }
} 
```

现在你需要一个控制器。我喜欢通过

```
@SessionAttribute.
@Controller
@RequestMapping("/somePath")
@SessionAttributes({"someFormBean"})
public class SomeController {
    /**
     * Handler method
     */
    @RequestMapping()
    public String defaultView(@ModelAttribute("someFormBean") SomeBean someFormBean, Model uiModel) {
        // Do something in your default view
        return "someDefaultView";   // Assuming you have a ViewResolver, like JspViewResolver or Tiles
    }

    /**
     * Submission Handler method
     */
    @RequestMapping(method = RequestMethod.POST
    public String submit(
        @ModelAttribute("someFormBean") SomeBean someFormBean, 
        BindingResult bindingResults,
        Model uiModel) {
        // bindingResults will have your errors from binding
        if(bindingResults.hasErrors()) {
            return "errorView";
        } else {
            return "successView";
        }
    }

    /**
     * Will be called to create your Model Attribute when its missing
     */
    @ModelAttribute("someFormBean")
    public SomeBean createSomeBean() {
        return new SomeBean();
    }

    /**
     * register property editors
     */
    @InitBinder
    public void initBinder(WebDataBinder binder) {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        sdf.setLenient(true);
        binder.registerCustomEditor(Date.class, new CustomDateEditor(sdf, true));
        // You can register other Custom Editors with the WebDataBinder, like CustomNumberEditor for Integers and Longs, or StringTrimmerEditor for Strings
    }   
} 
```

然后你需要一些视图（控制器上面的“someDefaultView”，我的代码在这个例子中是JSP，使用Spring JSTL标签库）

```
<%@ taglib prefix="c"       uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt"     uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn"      uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="form"    uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="spring"  uri="http://www.springframework.org/tags" %>
<html>
    <head>
        <script type="text/javascript" src="/resources/jquery/1.7.1/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="resources/jquery.ui/1.8.13/jquery.ui.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                $('.datepicker').datepicker();
            };
        </script>
    </head>
    <body>
        <form:form modelAttribute="someFormBean">
            <form:input cssClass="datepicker" path="someDate" readonly="true" /><br />
            <form:errors path="a"/><br /><br />
            <input type="submit" value="Submit" />
        </form:form>
    </body>
</html> 
```

同样，我建议 Google'ing Spring Init Binders、自定义绑定错误 (typeMismatch) 和 JSR 303 以获取其他验证选项，大多数情况下都可以[在这里](http://static.springsource.org/spring/docs/2.0.x/reference/index.html)进行记录。此外，如果您不希望字段下方出现错误，就像我在这里所做的那样，有一些方法可以在一个位置迭代所有错误，例如将所有错误放在页面顶部。它非常可配置，我可能会再输入 20 页值得深入阅读所有内容。这应该足以让您开始寻找好的示例和文档。

# image-processing - 为什么opencv立体对应中对象边界不清晰

> ID：14716794
> 
> 赞同：1
> 
> 时间：2013-02-05T21:01:18.273
> 
> 标签：image-processing, opencv, camera-calibration, stereo-3d, 3d-reconstruction

我得到了 2 张几乎平行的照片，而且彼此之间的距离并不远。
我正在使用 OpenCV 尝试创建视差图（立体对应）。
因为我试图在现实世界的场景中使用它，所以使用棋盘校准有点不切实际。
因此，我正在使用**stereoRectifyUncalibrated()**。

我尝试比较结果，使用 2 组不同的对应点进行整改：

*   手动选择点（指向和单击）
*   从 SURF 生成并使用 RANSAC 过滤的点

输入图像1：http: [//i.stack.imgur.com/2TCi3.jpg](http://i.stack.imgur.com/2TCi3.jpg)
输入图像2：http: [//i.stack.imgur.com/j1fFA.jpg](http://i.stack.imgur.com/j1fFA.jpg)

*（请注意，在将图像用于校正等之前，我会对图像进行不失真处理）*

使用 SURF 和 RANSAC 校正图像：（
按顺序排列 1 和 2）：[http :](http://i.stack.imgur.com/mb7TM.jpg)
[//i.stack.imgur.com/pwbUw.jpg http://i.stack.imgur.com/mb7TM.jpg](http://i.stack.imgur.com/pwbUw.jpg)

使用手动选择的点校正图像（更不准确！）：http:
[//i.stack.imgur.com/Bodeg.jpg](http://i.stack.imgur.com/Bodeg.jpg)

现在，问题是，查看结果，我们看到 surf 版本几乎完全纠正了。（极线对齐得很好）。
虽然手动选择的点版本被纠正得很糟糕......极线远未对齐。

但是当我们使用我们的校正来查看 openCV 的 sgBM() 的结果时：
手动点结果 ：http:
[//i.stack.imgur.com/N8Cyp.png](http://i.stack.imgur.com/N8Cyp.png)
SURF 点结果：
[http://i.stack.imgur。 com/tGsCN.jpg](http://i.stack.imgur.com/tGsCN.jpg)

SURF 点显示的视差/深度更准确/正确（校正良好的版本）。那里并不奇怪。
然而，实际检测到的对象像素和对象边界实际上在严重纠正的版本上要好得多。
例如，在校正不好的视差图中，您可以看到笔实际上是笔，并且具有笔的形状，但在校正好的视差图中却没有。
**问题是，为什么？** 我该如何解决？（我试着玩弄 sgBM() 参数，确保它们对于两者等都是相同的，但它没有任何效果。正是由于某种原因，单独的不同校正使严重校正的图像看起来不错（尊重到对象边界））。

# version-control - 层拱散度

> ID：14716795
> 
> 赞同：1
> 
> 时间：2013-02-05T21:01:23.797
> 
> 标签：version-control

我刚刚从 layer vault 的制造商那里偶然发现了这个 coooool 项目。 [http://cosmos.layervault.com/divergence.html](http://cosmos.layervault.com/divergence.html)

它允许将项目分支变成子域。我认为测试设计和功能变化真是太棒了。

但

我对配置文件有点疑惑：

```
 # config/config.rb

  require File.expand_path('../callbacks', __FILE__)
  Divergence::Application.configure do |config|
  # Change this to the git repository path
  config.git_path = "/var/www/web_app/repository"

  # this to your application's path
  config.app_path = "/var/www/web_app/current"

  # and this to a location for the cache
  config.cache_path = "/var/www/web_app/cache"

  config.forward_host = 'localhost'
  config.forward_port = 81
end 
```

我尝试设置 git_path、app_path，但我不知道应该将 cache_path 指向哪里（我相信它目前已针对 rails 进行了优化，但我不确定）。无论如何，它不会去任何地方，我不断收到提示设置 git_path。我想知道是否有人有运气？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:17:13.313

您可以检查[分歧 repo](https://github.com/layervault/divergence)中包含的[测试目录](https://github.com/layervault/divergence/tree/master/test)，并查看这些变量指向的位置。

```
bundle install --deployment --without development test 
```

它将使用这个[测试 git repo](https://github.com/layervault/divergence-test)。

*   `git_path`指向已签出的 git repo 的根目录：请参阅[此提交](https://github.com/layervault/divergence/commit/4b287adfce1d4f3f4acf348a2292aaf3c1254bc2)。
*   `git_app`指您希望在其中签出当前分支（以及正在部署的应用程序）的任何目录
*   `git_cache`指向您要用于缓存的任何目录（即使它尚不存在，也会被创建）。

# android - 像安卓中的evernote一样的文本输入

> ID：14716796
> 
> 赞同：1
> 
> 时间：2013-02-05T21:01:25.750
> 
> 标签：android, input, android-edittext, evernote

我必须使用什么来创建像 evernote 这样的文本输入？

看起来他们正在使用两个edittext来创建它，但是即使我可以为上部（带有一个edittext）使用相同的样式，我也不知道如何做底部：看起来edittext被分割了分为两部分，底部是全屏。

我必须创建一些自定义视图吗？

![印象笔记编辑文本](../Images/4a87a3f7bfcb30d2bd97a9df12493814.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-14T22:06:22.733

这很容易。有三个主要元素。

*   **具有指定高度（例如 18sp）和宽度 match_parent 的**EditText ，****
***   没有填充/边距，1dp 高度，match_parent 宽度**视图**元素，*   **EditText**没有填充/边距，宽度 match_parent，指定高度（例如 36sp）**

 **他们还使用提示选项在**EditText**中显示文本，并使用与提示文本颜色相同的查看背景颜色。**

# java - 为什么我的 Google Maps Android 应用无法与我的 Android App Api Key 一起使用？

> ID：14716807
> 
> 赞同：0
> 
> 时间：2013-02-05T21:01:46.637
> 
> 标签：java, android, google-maps, google-maps-api-3

我正在阅读适用于 Android 的 Google Maps API 密钥教程，当我尝试使用 Android 应用程序密钥运行它时出现授权失败错误，但当我使用浏览器应用程序密钥时它可以工作。这是我的清单 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.neatspots"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>

<permission android:name="com.example.neatspots.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>

<uses-permission android:name="com.example.neatspots.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.neatspots.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="..."/>
</application>    
</manifest> 
```

这是我的 activity_main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/>

</RelativeLayout> 
```

这是我的主要活动：

```
package com.example.neatspots;

import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

这是我用来获取 SHA1 指纹的内容：

```
keytool -v -list -alias androiddebugkey -keystore /filepath/debug.keystore -storepass android -keypass android 
```

我不知道是什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:39:50.987

您的应用程序是否允许在 Google 控制台上使用 google maps API？清单上定义的包必须与 Google API 控制台上定义的包名相对应，例如指纹；包名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-16T15:24:58.250

首先检查您是否在项目中添加了谷歌库右键单击它选择属性然后选择android然后在底部添加googole库。如果您已经添加然后尝试此代码我向您发送一个链接只需打开它并检查错误在哪里在您的项目中，然后在您的系统模拟器上测试它，如果没有发生错误，然后在您的普通手机上运行。这是链接：[http ://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

# c# - 使用 Autofac 注册实现变体通用接口的具体类型

> ID：14716811
> 
> 赞同：3
> 
> 时间：2013-02-05T21:01:59.187
> 
> 标签：c#, generics, autofac, covariance

考虑以下结构作为 Autofac 3.0.0 的注册主体：

```
class Something
{
    public int Result { get; set; }
}

class SomethingGood : Something
{
    private int _good;
    public int GoodResult {
        get { return _good + Result; }
        set { _good = value; }
    }
}

interface IDo<in T> where T : Something
{
    int Calculate( T input );
}

class MakeSomethingGood : IDo<SomethingGood>
{
    public int Calculate( SomethingGood input ) {
        return input.GoodResult;
    }
}

class ControlSomething
{
    private readonly IDo<Something> _doer;
    public ControlSomething( IDo<Something> doer ) {
        _doer = doer;
    }

    public void Show() {
        Console.WriteLine( _doer.Calculate( new Something { Result = 5 } ) );
    }
} 
```

我正在尝试注册具体类型 MakeSomethingGood ，然后通过逆变接口解决它。

```
var builder = new ContainerBuilder();
builder.Register( c => new MakeSomethingGood() ).As<IDo<SomethingGood>>();
builder.Register( c => new ControlSomething( c.Resolve<IDo<Something>>() ) ).AsSelf();

var container = builder.Build();
var controller = container.Resolve<ControlSomething>(); 
```

...并`Resolve`失败，因为没有找到组件`IDo<Something>`

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:45:50.853

您注册一个`IDo<SomethingGood>`并尝试解决一个`IDo<Something>`. 那应该怎么工作？为此，`IDo<T>`应将其定义为协变：`IDo<out T>`.

由于`IDo<in T>`被定义为逆变（使用`in`关键字），你不能简单地分配一个`IDo<SomethingGood>`to `IDo<Something>`。这不会在 C# 中编译：

```
IDo<SomethingGood> good = new MakeSomethingGood();

// Won't compile
IDo<Something> some = good; 
```

这就是 Autofac 无法解决它的原因，即使使用`ContravariantRegistrationSource`.

# matlab - 这个素数符号有什么作用 - MATLAB？

> ID：14716813
> 
> 赞同：6
> 
> 时间：2013-02-05T21:02:00.093
> 
> 标签：matlab

我正在使用从另一个人那里继承的一些 matlab 代码，我不明白 q =[q; 行的含义 齐']。我觉得我应该可以删除它，这样 q = distribuc ...

```
function [ q ] = ObtainHistogramForEachTarget( state, numberOfTargets, image, q )

    for i=1 : numberOfTargets
        qi = distribucion_color_bin_RGB2(state(i).xPosition,state(i).yPosition,state(i).size,image,2);
        q = [q; qi'];
    end
end 
```

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:11:13.247

MATLAB 有几个用于操作矩阵的内置函数。素数的特殊字符 ,`'`表示矩阵的转置。

该语句`A = [ 1 2 3;4 5 6;7 8 9]'`产生矩阵

```
A = 
   1 4 7 
   2 5 8
   3 6 9 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T21:16:20.577

来自 Matlab 的帮助

> help ctranspose
> ' 复共轭转置。
> X' 是 X 的复共轭转置。
> 
> ```
>  B = ctranspose(A) is called for the syntax A' (complex conjugate
>  transpose) when A is an object. 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T21:19:39.220

该`[X ; Y]`语法垂直连接两个矩阵。因此，该行将刚刚计算的结果添加到已计算的`q`. 如果您只是简单地重新分配`q`，您将丢弃该函数每次通过循环已经完成的所有计算。

前撇号`'`进行复共轭并转置矩阵。我猜这`distribucion_color_bin_RGB2`可能会返回一个实值列向量，并且作者想在将其附加到结果矩阵之前将其翻转为水平。

正如@ja72 指出的那样，`.'`默认情况下使用（只是转置）更好的风格，`'`只有当你实际上是指一个复杂的共轭时，即使你希望你的数据是真实的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T05:55:01.807

通常A'是矩阵A的转置，但它是共轭转置。它适用于实矩阵，不适用于复矩阵

transpose(A) 是真正的转置函数，适用于 R 矩阵和 C 矩阵。

我通常使用 A'，这很容易，但我改变了习惯，直到遇到 FFT 转换中的错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-27T02:14:51.577

我遇到了同样的问题并使用 octave（ubuntu 中的 matlab）对其进行了测试，发现对于一个复数`a`来说，`a'`意味着它的共轭。

```
octave:2> a = 1 + 1j
a =  1 + 1i
octave:3> a'
ans =  1 - 1i 
```

此外，对于一个复杂的矩阵`A`：

```
octave:6> A = [1 + 2j 1 - 2j ; 2 - 1j 2 + 1j]
A =

   1 + 2i   1 - 2i
   2 - 1i   2 + 1i

octave:7> A'
ans =

   1 - 2i   2 + 1i
   1 + 2i   2 - 1i 
```

# sql - 在运行时计算产品成本价格

> ID：14716814
> 
> 赞同：0
> 
> 时间：2013-02-05T21:02:04.717
> 
> 标签：sql, sql-server-2008

我正在开发一个库存系统，使用平均成本法，产品的平均成本价格在每次新购买时都会发生变化。我使用的数据库是 SQL Server 2008

现在我需要在报告中计算已售商品的成本，我必须为每个产品的销售添加成本价，但这个成本价应该与特定的采购期相关。

我的采购表

```
Purchase_Date   Product_ID   Ave_Cost_Price
1-jan-2013      1                  5.5
15-jan-2013     1                  6.5
30-jan-2013     1                  7.5 
```

我的销售表

```
Sale_Date   Product_ID    Sale_Price Cost_Price
5-jan-2013      1              10         ?         SALE-1
17-jan-2013     1              10         ?         SALE-1
31-jan-2013     1              15         ?         SALE-1 
```

现在，当我创建销售报告时，SALE-1 应该采用 5.5，SALE-2、6.5 和 SALE-3 应该选择 7.5 作为产品成本价。如果它找不到任何购买，那么它应该从 product_table 中选择打开 Cost_Price。

我正在寻找应该完成这项工作的此类查询？？？

我认为可能可以通过一些分组和内部连接来完成，但无法弄清楚。

请问有什么建议吗？？？

问候拉扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:05:51.567

我不是该`select`子句中相关子查询的忠实拥护者。部分原因是美观和可维护性。我更喜欢将所有表引用放在一个地方，在`from`子句中。部分原因是性能；我倾向于认为它们变成了嵌套循环连接（通常更糟）。不可否认，SQL 优化器在过去几年中变得更好。

但这是我认为最好的方法之一：

[上传问题]

相关子查询是 。. .

```
select s.*, 
```

           (select top 1 ave_cost_price from purchase p where p.purchase_date <= sys.sale_date and p.product_id = s.product_id order by p.purchase_date desc) a purchaseprice from sales s

`purchase(product_id, purchase_date)`如果你有一个索引 on or even ，性能应该没问题`purchase(product_id, purchase_date, ave_cost_price)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:29:12.193

加入产品 id 和日期的两个表 - 仅月和年部分，按 id+月/年排序。减去...对不起，没有查询，因为您没有发布任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T03:39:01.753

对此类数据进行报告的一种常见方法是创建一个非规范化的数据仓库表。在其中，您将有销售列和任何计算的附加列，例如成本。使用基于销售额的插入填充第一列，然后使用选择适当成本的第二个插入查询填充其余列。然后，您的报告将针对此数据仓库表运行。

这里在速度和简单性方面的优势是显而易见的，尤其是在您拥有大量记录的情况下。您还将非常轻松地针对这个“平面”表编写报告。唯一的缺点是对原始数据的任何更改都需要重新应用于仓库表。但是，通常情况下，您会在某个“关闭”期之前填充仓库表，在此之后，记录将不再更改。至于如何选择正确的成本，大多数地方会使用给定时期内商品的平均美元成本，而不是尝试将某些特定的购买“批次”与销售相匹配。否则，在您描述的方法中，几乎不可能处理退货之类的事情。您为退回的产品分配了多少成本？我想如果这些物品足够大，可以有序列号或其他唯一标识符，那么你可以这样做。但是，在这种情况下，您的成本选择查询将与日期无关。这将与ID相关。

# macos - OSX Terminal.app SSH 端口

> ID：14716816
> 
> 赞同：2
> 
> 时间：2013-02-05T21:02:15.187
> 
> 标签：macos, bash, terminal

我觉得自己像个傻瓜——但我似乎无法将 Terminal.app 和 SSH 连接到非标准 SSH 端口。我在山狮。

我已经尝试了以下所有方法：

```
$ ssh myuser@mysite.com -p 42586
$ ssh myuser@mysite.com -p42586
$ ssh -p 42586 myuser@mysite.com
$ ssh -p42586 myuser@mysite.com 
```

我似乎无法正确使用语法，以上所有内容都会产生错误。标志的正确顺序是什么？我检查了该`man`页面，它显示为在 [user]@[domain] 部分之前，但是，这也会引发错误。

**编辑：**

更多信息和原始终端输出：

```
$ ssh mysite.com -p42586
--hangs--
$ ssh mysite.com -p 42586
--hangs--
$ ssh -p42586 mysite.com
usage: grep [-abcDEFGHhIiJLlmnOoPqRSsUVvwxZ] [-A num] [-B num] [-C[num]]
    [-e pattern] [-f file] [--binary-files=value] [--color=when]
    [--context[=num]] [--directories=action] [--label] [--line-buffered]
    [--null] [pattern] [file ...]
usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]
           [-D [bind_address:]port] [-e escape_char] [-F configfile]
           [-I pkcs11] [-i identity_file]
           [-L [bind_address:]port:host:hostport]
           [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]
           [-R [bind_address:]port:host:hostport] [-S ctl_path]
           [-W host:port] [-w local_tun[:remote_tun]]
           [user@]hostname [command]
$ ssh -p 42586 mysite.com
usage: grep [-abcDEFGHhIiJLlmnOoPqRSsUVvwxZ] [-A num] [-B num] [-C[num]]
    [-e pattern] [-f file] [--binary-files=value] [--color=when]
    [--context[=num]] [--directories=action] [--label] [--line-buffered]
    [--null] [pattern] [file ...]
/usr/bin/ssh: option requires an argument -- p
usage: ssh [-1246AaCfgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec]
           [-D [bind_address:]port] [-e escape_char] [-F configfile]
           [-I pkcs11] [-i identity_file]
           [-L [bind_address:]port:host:hostport]
           [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]
           [-R [bind_address:]port:host:hostport] [-S ctl_path]
           [-W host:port] [-w local_tun[:remote_tun]]
           [user@]hostname [command] 
```

示例 1 和 2 挂起直到超时。3 和 4 产生一个 grep 使用回显以及一个 ssh 使用回显。

**编辑2：**

感谢@topguncoder 的建议，我最初的尝试是冒号 - 但这会产生不同的错误：

```
$ ssh myuser@mysite.com:42586
ssh: Could not resolve hostname mysite:42586: nodename nor servname provided, or not known 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:19:11.130

尝试

```
"ssh" -p 42586 mysite.com 
```

忽略您的`alias`设置。看起来您可能已经`ssh`别名为其他东西。如果这有效，您应该检查您`.profile`的任何`ssh`别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:21:02.883

我相信在您的系统上，`ssh`命令以某种方式被重新定义为`grep`命令。尝试这个：

```
alias | /usr/bin/grep ssh 
```

你看到了什么？另外，试试这个：

```
/usr/bin/ssh -p 42586 myuser@mysite.com 
```

你有成功的连接吗？如果 ssh 被别名为其他东西。检查以下文件：

*   ~/.bash_profile
*   ~/.bashrc
*   ~/.profile

然后您可以删除别名，或使用绝对路径（例如`/usr/bin/ssh`）

# jquery - 在 angularJS 控制器中使用 jQuery 的 $.ajax

> ID：14716822
> 
> 赞同：10
> 
> 时间：2013-02-05T21:02:28.603
> 
> 标签：jquery, ajax, model-view-controller, angularjs

如何在 angularJS 控制器中使用 jQuery 的 $.ajax() 函数（而不是 angularJS 内置的 $http），以便以后可以从视图/模板访问 $scope 值？

我有这个有点简约的 angularJS 控制器：

```
function UserCtrl($scope, $http) {
    $.ajax('http://localhost:8080/admin/user/johndoe').success(function(data) {
        $scope.user = data;
    });
} 
```

在视图中类似于：

```
<h1>Hello, {{ user.Username }}</h1> 
```

但是，`<h1>`视图中的 加载时将为空，尽管`console.log()`控制器中的 a 告诉我 $scope.user 已按我的意愿填充。

现在，如果我将`$.ajax()`呼叫替换为`$http.get()`一切正常，则按预期工作。

我知道`$http`这是 angularJS 内置的，但由于我不是从头开始，但已经有很多使用 jQuery 的代码，我想为 $.ajax() 坚持使用 jQuery。

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T21:05:00.997

因为使用 jQuery ajax 超出了 Angular 的范畴，所以您需要将 $scope 赋值包装在

```
$scope.$apply(function(){
    $scope.user = data;
}); 
```

Angular 的 $http 预先构建了摘要循环触发机制。

# python - POST 多部分请求的低级读取？

> ID：14716826
> 
> 赞同：0
> 
> 时间：2013-02-05T21:02:41.120
> 
> 标签：python, django

我有一个我正在尝试创建的示例，最好使用 Django（或其他类似的框架），它会立即将上传的内容逐块压缩成一种奇怪的压缩格式（无论是 LZMA、7zip 等）。然后写出到 S3 的另一个上传请求。

本质上，这就是将会发生的事情：

1.  用户在 启动到我的端点的分段上传`^/upload/?$`。
2.  当服务器上接收到块时（可能是 1024 字节或其他数字），它们然后以块的形式通过压缩算法。
3.  压缩后的输出通过线路写入 S3 存储桶。

第 3 步是可选的；我可以将文件存储在本地，并让消息队列以延迟的方式进行上传。

使用 Django 之类的框架是否可以执行第 2 步？是否有一种访问类文件对象中传入数据的低级方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:00:18.177

Django Request 对象提供了一个[类似文件的接口](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.read)，因此您可以从中流式传输数据。但是，由于 Django 总是将整个请求读入内存（如果文件上传太大，则读入临时文件），因此您只能在收到整个请求后使用此 API。如果您的临时存储目录足够大，并且您不介意在服务器上缓冲数据，则不需要做任何特别的事情。只需将数据上传到视图内的 S3。不过要小心超时。如果上传到 S3 的时间过长，浏览器将收到超时。因此，我建议将临时文件移动到更永久的目录并通过工作队列（如[`Celery`](http://celeryproject.org/).

* * *

如果您想通过服务器直接从客户端流式传输到 Amazon S3，我建议使用[`gevent`](http://www.gevent.org/). 使用 gevent，您可以编写一个`greenlet`从 a 读取[`queue`](http://www.gevent.org/gevent.queue.html)并写入 S3 的简单程序。该队列由从请求中读取的原始 greenlet 填充。

您可以使用特殊的上传 URL，例如`http://upload.example.com/`部署该特殊服务器的位置。如果您设置 DJANGO_SETTINGS_MODULE 环境变量并处理中间件通常为您做的一些事情（数据库连接/断开、事务开始/提交/回滚、会话处理等），则可以从 Django 框架外部使用 Django 函数.

甚至可以在同一个 WSGI 容器中同时运行您的自定义 WSGI 应用程序和 Django。只需包装 Django WSGI 应用程序并拦截对`/upload/`. 在这种情况下，我建议使用[`gunicorn`](http://gunicorn.org/)as[`gevent worker-class`](http://docs.gunicorn.org/en/latest/configure.html#worker-class)服务器。

* * *

我对 Amazon S3 API 不太熟悉，但据我所知，您也可以直接从您的用户那里为文件上传生成一个临时令牌。这样，您根本不需要通过服务器传输数据。

**编辑：**您确实可以允许匿名上传到您的存储桶。请参阅有关此主题的此问题：[S3 - 匿名上传 - 密钥前缀](https://stackoverflow.com/questions/11916179/s3-anonymous-upload-key-prefix)

# mediawiki - 在 MediaWiki 环境中创建类别层次结构

> ID：14716828
> 
> 赞同：6
> 
> 时间：2013-02-05T21:02:41.817
> 
> 标签：mediawiki, wiki, wikipedia, wiki-markup

背景：

我与一个大型协作组织合作，该协作组织将大量文档集中在一个 wiki 结构中。我已经熟悉 wiki 标记，并且可以创建带有链接等的简单页面。

我合作的 wiki（基于 mediawiki 架构）的一个主要缺陷是几乎没有组织或交叉链接。

我正在尝试向 wiki 引入分层类别结构，以便将页面分解为类别，提供一种互连信息的方法。

我知道我可以将 [[Category:THISCATEGORY]] 标记添加到任何页面源，并且会自动生成一个特殊的类别页面，该页面组织具有该类别的其他页面。这种链接页面的方法的主要优点是可以免费访问相关页面（只要它们被标记），而不需要明确地在页面之间进行直接交叉链接。

问题：

我想知道，是否有一种有效的方法来创建某种根类别节点，而不是链接到其他页面，而是链接到所有类别？这将允许 wiki 有效地交叉链接而无需大修，并且只需要页面作者为他们可能希望添加的任何其他页面提供一些通用类别标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T21:49:02.573

您可以使用特殊页面`Special:Categories`来显示 wiki 上所有类别的列表。

但是，如果您想要一个更好的结构，我认为您还应该从您的类别中创建一个层次结构（就像 Wikipedia 一样以 开头[`Category:Contents`](http://en.wikipedia.org/wiki/Category%3aContents)）。这样，您的用户不仅可以浏览同一类别的文章，还可以访问相似的类别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:06:41.273

我不确定这是否像您希望的那样自动，但是您可以将类别标签添加到类别的文章中，它将成为某种子类别。例如，转到文章“Category:Foo”，对其进行编辑，然后添加 [[Category:Bar]]。然后当您访问 Category:Bar 时，它会将 Foo 列为子目录。

例如，请参阅[wikipedia 上的此页面](https://en.wikipedia.org/wiki/Category%3aEssays)，该页面[将此类别作为子类别](https://en.wikipedia.org/wiki/Category%3aEssays_by_year)，它本身具有子类别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:43:10.520

一旦您的类别树增长，您可以使用`Special:UncategorizedCategories`它来确保所有类别（除了一个）都在至少一个子类别中。同样，您可以使用`Special:UncategorizedPages`它来确保您的所有页面都至少属于一个类别。

# entity-framework - 测试假存储库

> ID：14716829
> 
> 赞同：1
> 
> 时间：2013-02-05T21:02:43.920
> 
> 标签：entity-framework, tdd, repository-pattern

我一直在研究使用 EF 实现存储库模式的各种方法，特别是使用通用存储库。

我一直在尝试使用具有 IContext 属性的 IRepository，因此 IRepository 的任何实现之间的唯一区别就是上下文。我发现这很困难，以至于我放弃了“假上下文”方法，现在只在假存储库中有一个 List 字典作为我的“上下文”：

```
public Dictionary<Type, object> _sets = new Dictionary<Type, object>(); 
```

为了操纵它，会在假的时候做这样的事情：

```
public void Add<T>(T entity) where T : class
    {
        var set = _sets[typeof (T)] as IQueryable<T>;
        var updatedSet = set.ToList();
        updatedSet.Add(entity);
        _sets[typeof (T)] = updatedSet.AsQueryable<T>();
    } 
```

在真正的存储库中，我可以使用：

```
void Add<T>(T entity)
    {
        Set<T>().Add(entity);
    } 
```

在我的 Update 方法中，我必须有类似的不同实现来容纳继承 DbContext 的真实上下文，以及使用基于集合的方法的假。

这种方法让我很紧张。正如其他人在其他问题中提到的那样，现在我的存储库实现是如此不同，以至于我觉得我不能信任一个测试，直到它使用假的和真实的存储库运行。

我只是一个想太多的菜鸟吗？或者有没有更好的方法来实现一个更像 DbContext 的假上下文，所以我不必让如此截然不同的类实现存储库接口？

**总结一下：**我了解使用内存存储库进行测试的优势。我的问题是，当我必须对存储库进行两种不同的实现时，这是否意味着我做错了什么，或者这只是用假货进行测试的成本，如果逻辑测试通过，我应该'汗流这么多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:18:56.473

以下是我们在我正在处理的项目中所做的：我们有一个围绕 EF 的存储库包装类，这样我们就可以在需要时在单元测试中使用模拟。我考虑过像您正在做的那样做一个内存存储库，但我最终决定反对它，因为我真的只需要它来进行查询。但是，由于 Linq To Entities 是 Linq to Objects 的子集。单元测试可能会通过，但集成测试会失败，因为您可能一直在使用不属于 Linq to Entities 的功能。如果我需要对该查询进行集成测试并且不能信任单元测试，那么两者都做是没有意义的。

对于单元测试，我只是模拟了存储库并验证了是否调用了适当的方法（插入或其他）。对于删除/插入/任何内容的集成测试，只需点击实际数据库即可。

对于实际查询，我只是做了集成测试。我将查询移至单独的函数。我的代码将调用该函数来检索查询结果，我可以单独对带有查询的函数进行集成测试，并对查询结果的处理进行单元测试。

我不知道这是否有意义，或者是否有更好的方法来做到这一点，但这就是我最终要做的。

**或者，如果您想继续内存实现** ，我认为您应该能够执行以下操作：

只需有一个对象列表并使用 OfType 返回正确的类型：

```
public TEntity Get<TEntity>(System.Linq.Expressions.Expression<Func<TEntity, bool>> where, params System.Linq.Expressions.Expression<Func<TEntity, object>>[] includeProperties) where TEntity : class
{
    return _repositories.OfType<TEntity>().AsQueryable().Where(where).FirstOrDefault();
}

public TEntity Insert<TEntity>(TEntity tEntity) where TEntity : class
{
    _repositories.Add(tEntity);
    return tEntity;
} 
```

# heroku - 玩2找不到xml-apis-1.0.b2.jar 下载失败

> ID：14716830
> 
> 赞同：1
> 
> 时间：2013-02-05T21:02:46.417
> 
> 标签：heroku, playframework-2.0

我刚开始使用 Play 2 和 Heroku，但是当我尝试部署应用程序时出现错误。我尝试进行 sbt clean 编译，这就是我得到的：

```
Marcelos-MacBook-Pro:guzmanenergy marcelo$ sbt clean compile
Marcelos-MacBook-Pro:guzmanenergy marcelo$ sbt clean compile
[info] Loading project definition from /projects/guzmanenergy/project
[warn]  [NOT FOUND  ] xml-apis#xml-apis;1.0.b2!xml-apis.jar (146ms)
[warn] ==== Typesafe repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: xml-apis#xml-apis;1.0.b2!xml-apis.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/projects/guzmanenergy/project/}default-de2d7b/*:update: sbt.ResolveException: download failed: xml-apis#xml-apis;1.0.b2!xml-apis.ja 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:12:08.683

尝试添加行

```
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/repo1/" 
```

到你的 project/plugins.sbt 文件。确保每条线之间有一条白线，查看[指南](http://www.scala-sbt.org/release/docs/Getting-Started/Basic-Def.html)以获取更多信息

# android - 无法在真实设备上运行谷歌地图 v2

> ID：14716832
> 
> 赞同：0
> 
> 时间：2013-02-05T21:02:54.710
> 
> 标签：android, google-maps

我正在尝试制作一个在我的设备上显示谷歌地图的简单应用程序。我在我的 Alcatel OT 990 android 设备（v. 2.2.2）中运行它，但它显示错误消息“应用程序已意外停止......然后强制关闭”。我相信我做的一切都是正确的，因为我遵循了有效的 youtube 教程中的说明。这是我的代码（我已经包含了 Android 支持库、Google Play 服务库和 android.jar）：

显现

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<permission
    android:name="com.xristina.maps.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.xristina.maps.permission.MAPS_RECEIVE"/>
<uses-feature
android:glEsVersion="0x00020000"
android:required="true"/>

<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.tutorialgooglemaps.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="*************my key here*********************"/>
</application> 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

MainActivity.java

```
package com.xristina.maps;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.os.Bundle;
import android.view.Menu;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;
public class MainActivity extends android.support.v4.app.FragmentActivity {

private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setUpMapIfNeeded();

}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
    if (mMap == null) {
        mMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
}
} 
```

请问有什么想法吗？？

Ι 添加了@BBonDoo 建议的代码，logcat 结果为：

```
02-06 16:59:34.807: W/dalvikvm(2735): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
02-06 16:59:34.817: E/AndroidRuntime(2735): FATAL EXCEPTION: main
02-06 16:59:34.817: E/AndroidRuntime(2735): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.xristina.maps/com.example.tutorialgooglemaps.MainActivity}: java.lang.ClassNotFoundException: com.example.tutorialgooglemaps.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.xristina.maps-2.apk]
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2603)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2697)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2051)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.os.Looper.loop(Looper.java:123)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread.main(ActivityThread.java:4645)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at java.lang.reflect.Method.invoke(Method.java:521)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at dalvik.system.NativeStart.main(Native Method)
02-06 16:59:34.817: E/AndroidRuntime(2735): Caused by: java.lang.ClassNotFoundException: com.example.tutorialgooglemaps.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.xristina.maps-2.apk]
02-06 16:59:34.817: E/AndroidRuntime(2735):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
02-06 16:59:34.817: E/AndroidRuntime(2735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2595)
02-06 16:59:34.817: E/AndroidRuntime(2735):     ... 11 more 
```

我还不得不说，我在 [http://www.youtube.com/watch?v=mRnEkP2q4fo](http://www.youtube.com/watch?v=mRnEkP2q4fo) 和[http://www.youtube.com/watch?v=OZRgiwGfvSQ学习的教程中没有包含这段代码](http://www.youtube.com/watch?v=OZRgiwGfvSQ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:57:56.800

这是你的问题：

```
<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="myApiKey"/> 
```

这个“myApiKey”应该是您从 Google API 控制台获得的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:09:31.023

**[回答新] ...添加更新]**

你的 Logcat 很好。它的含义如下；

请查看两张图片，并将您的包裹名称（①）与正确的（②）匹配。

![这是您的清单文件](../Images/328e631e714ed1cfbafde2d482089817.png)

![这是你的java文件](../Images/1e9b48ec3e23bd37fa5f5b5f85d47e8f.png)

请将清单文件中的包名替换为您的 java 文件中的包名。

这是清单文件中的正确代码；

```
<Activity
     android:name="com.xristina.maps.MainActivity"
     ... 
```

* * *

**[回答老]**

您编写的代码不足以在 MainActivity.java 中显示 Google 地图。请使用如下所示的代码填写您的代码，这是您必须了解的基本代码，以便在 Android 平台上显示 Google 地图：

```
public class MianActivity extends android.support.v4.app.FragmentActivity {

    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setUpMapIfNeeded();

    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        if (mMap == null) {
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }
} 
```

# fortran - 为什么边界检查会改变我的程序的行为？

> ID：14716834
> 
> 赞同：1
> 
> 时间：2013-02-05T21:03:09.493
> 
> 标签：fortran, intel-fortran

我有一个用 Fortran 编写的热工水力学代码，我正在研究它。对于我的调试版本，我`-check bounds`在编译时使用 ifort 11.1 中的选项。我过去以这种方式捕获了数组边界错误。不过，最近，我看到解决方案在给定案例中迅速爆发。奇怪的是，它在代码的发布版本中很好地融合了。果然，`-check bounds`从我的调试生成文件中删除标志清除了问题。

奇怪的是，调试版本在我之前使用的许多其他测试用例中运行良好，并且在我的代码中超出任何数组边界时没有抛出任何错误。这种行为对我来说似乎很奇怪，我不知道我的代码中是否存在某种错误或什么。任何人有任何想法可能导致这种行为？

根据要求，我用于发布和调试的标志是：

发布：`-c -r8 -traceback -extend-source -override-limits -zero -unroll -O3`

调试：`-c -r8 -traceback -extend-source -override-limits -zero -g -O0`

当然，正如我最初的问题所表明的那样，我`-check bounds`为调试案例打开和关闭了标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:48:25.007

我会怀疑你的数值算法比 Fortran 代码更多。您是否确保满足所有收敛性和稳定性标准？

听起来像是舍入错误导致解决方案无法收敛。如果您处于安全收敛的边缘，编译器优化肯定会以一种或另一种方式解决问题。

我使用`gfortran`了 more than `ifort`，所以我不知道 -unroll 选项的所有细节，但是展开循环可以改变一些舍入，即使计算看起来*应该*保持不变。此外，调试肯定会改变内存和寄存器访问的确切顺序。如果数字以某种内部表示形式存在于处理器中，然后被写入内存并再次读回，则该值可以更改。这可以通过仔细选择在一定程度上得到缓解`kind`。从本质上讲，这将是特定于处理器的，而不是可移植的。

理论上，完全符合 IEEE 754 将使浮点运算可重现，但情况并非总是如此。如果调试实际上导致了这些问题，而不是代码中的其他错误，那么与处理器内部工作相关的其他神秘事物也可能导致它崩溃。

我会在代码的各个关键点添加写语句以输出您的数据矩阵（或您正在使用的任何数据结构）。一定要使用二进制输出。`form='unformatted'`用和打开`access='direct'`。

# java - Elasticsearch，嵌套“ANDS”和“ORS”

> ID：14716837
> 
> 赞同：0
> 
> 时间：2013-02-05T21:03:18.257
> 
> 标签：java, elasticsearch

我在构建我正在寻找的确切 Elasticsearch 查询时遇到了一些困难，特别是使用 java api。

似乎如果我使用 java api 构造一个字段搜索，我只能使用一个字段和一个术语。如果我使用查询字符串，看起来我可以将整个查询应用于一组字段。我想要做的是将特定查询应用于一个字段，并将另一个查询应用于不同的字段。

我知道这很令人困惑。这是我想要构建的查询类型

```
(name contains "foo" or name contains "bar") AND ( date equals today) 
```

我真的很喜欢 Elasticsearch，因为它的速度和灵活性，但是[http://www.elasticsearch.org/](http://www.elasticsearch.org/)上的文档很难解析（我注意到“介绍”和“概念”没有链接，但 API 部分有) 如果有人有一些很好的资源来掌握这些查询，我很乐意看到它们。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:24:14.727

听起来像一个带有 2 个 must 子句的 bool 查询：

*   matchQuery("name", "foo bar")
*   rangeQuery("日期").from("2013-02-05").to("2013-02-06")

它有帮助吗？

# css - extjs 显示灰色背景，未定义任何 CSS

> ID：14716841
> 
> 赞同：0
> 
> 时间：2013-02-05T21:03:51.183
> 
> 标签：css, extjs, gridpanel

我有这样的 extjs 网格：

```
var grid = new FlexGridPanel({
   renderTo: 'someDiv',
   frame: false,
   columnLines: true,
   stripeRows: true,
   title: '<spring:message javaScriptEscape="true" code="someLabel"/>',
   height : 200,
   store: store,
   viewConfig: { forceFit:true},
   enableColumnHide: false,
   enableColumnMove: false,
   columns: [

       {header: '<spring:message javaScriptEscape="true" code="label.account.bank"/>',dataIndex:'bank' , width: 100, menuDisabled: true,sortable: true},
       {header: '<spring:message javaScriptEscape="true" code="label.account.number"/>',dataIndex:'accountNumber' , width: 100, menuDisabled: true,sortable: true},
       {header: '<spring:message javaScriptEscape="true" code="label.account.name"/>',dataIndex:'accountName', width: 200, menuDisabled: true,sortable: true},
       {header: '<spring:message javaScriptEscape="true" code="label.account.currency"/>',dataIndex:'currencyCode', width: 100, menuDisabled: true,sortable: true},
       {header: '<spring:message javaScriptEscape="true" code="label.account.type"/>',dataIndex:'accountTypeCode', width: 100, menuDisabled: true,sortable: true}
  ],
  sortInfo:{field: 'accountNumber', direction: "ASC"},
  sm: new Ext.grid.RowSelectionModel({singleSelect: true})
 }); 
```

现在，列标题都有一个漂亮的灰色背景。但是我没有在上面的定义中指定任何灰色背景，甚至没有指定任何 css 类。那么怎么会有灰色背景呢？

# android - OSMDroid 添加标记

> ID：14716843
> 
> 赞同：2
> 
> 时间：2013-02-05T21:03:55.017
> 
> 标签：android, osmdroid

我正在尝试动态添加标记（不是静态的）。动态意思是，当我从服务器获取更新时添加标记。

因此，以下是我的 ItemizedOverlay 代码：

```
private class VehicleItemizedOverlay extends ItemizedOverlay<OverlayItem>{
    private ArrayList<OverlayItem> mOverlayItems = new ArrayList<OverlayItem>();

    public VehicleItemizedOverlay(Drawable pDefaultMarker, ResourceProxy pResourceProxy) {
        super(pDefaultMarker, pResourceProxy);
    }

    @Override
    public boolean onSnapToItem(int arg0, int arg1, Point arg2, IMapView arg3) {
        return false;
    }

    @Override
    protected OverlayItem createItem(int pos) {
        return mOverlayItems.get(pos);
    }

    @Override
    public int size() {
        if(mOverlayItems!=null) return mOverlayItems.size();
        else return 0;
    }

    public void addOverlayItem(double longitude, double latitude, Bitmap bitmap){
        if(Preferences.DEBUG) Log.d("MapActivity", "Latitude: "+latitude+" Longitude: "+longitude);
        MarkerDrawable drawable = new MarkerDrawable(MapActivity.this, bitmap);
        OverlayItem item = new OverlayItem("a", "a", new GeoPoint((int)(latitude*1e6), (int)(longitude*1e6)));
        item.setMarker(drawable);
        item.setMarkerHotspot(HotspotPlace.CENTER);
        mOverlayItems.add(item);
        populateNow();
    }

    public void populateNow(){
        populate();
    }
} 
```

以下是方法，我正在创建 ItemizedOverlay 并将其添加到我的活动 onCreate() 中的 MapView：

```
mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
mVehicleOverlay = new VehicleItemizedOverlay(getResources().getDrawable(R.drawable.stub), mResourceProxy);
mMapView.getOverlays().add(mOverlay); 
```

现在，每当我从服务器获得响应时，我都会创建 OverlayItems 并将其添加到 ItemizedOverlay。

```
//onResponse is callback I received on receiving response. Vehicle is my vehicle object
public void onResponse(ArrayList<Vehicle> aVehicles) {
    for(int i=0;i<mVehicles.size();i++){
        final int lat = (int)(mVehicles.get(i).getLatitude()*1e6);
        final int lon = (int)(mVehicles.get(i).getLongitude()*1e6);
        mVehicleOverlay.addOverlayItem(lon, lat, bitmap);
    }
} 
```

但是所有覆盖项目在地图的中心点相互重叠。我错过了什么吗？

此外，如果我在添加之前向 mVehicleOverlay 添加了一些静态叠加项目，那么它可以正常工作。

```
 mVehicleOverlay = new VehicleItemizedOverlay(getResources().getDrawable(R.drawable.stub), mResourceProxy);
final int lat = (int)(STATIC_LATITUDE*1e6);
final int lat = (int)(STATIC_LONGITUDE*1e6);
mOverlay.addOverlayItem(lon, lat, bitmap);
    mMapView.getOverlays().add(mVehicleOverlay); 
```

在 OSMDroid 中，添加自定义逐项叠加后，我是否应该像在 Google API v1 中那样添加和填充叠加项？或者我在这里遗漏了什么？

# gwt - 是否可以让两个不同的 EditorDrivers 同时编辑同一个对象？

> ID：14716844
> 
> 赞同：1
> 
> 时间：2013-02-05T21:03:58.113
> 
> 标签：gwt, gwt-editors

在我的应用程序中，我有一个演示者 ( `Presenter1`)，我用它来启动一个编辑器 ( `EditorView1`) 来编辑一个`Foo`对象。此 MVP 设置类似于此答案中描述的内容，[https://stackoverflow.com/a/10699346/565863](https://stackoverflow.com/a/10699346/565863)

现在，假设我需要创建另一个视图（`EditorView2`由 启动`Presenter2`），它也编辑一个`Foo`对象，但需要使用`EditorView1`.
`EditorView1`将由 `EditorView2`提供`Presenter1`。

这种方法似乎草率且容易出错。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:03:58.113

当我写这个问题时，我意识到了一种更干净的方法。

上面描述的问题是我打算重新使用第一个 Presenter `Presenter1`，.

将`EditorView1`代码的编辑器部分抽象为一个可重用的编辑器小部件 ( `Editor1`) 会更清晰，它可以被`EditorView1`和`EditorView2`. 现在，我有一个演示者、一个视图和一个 EditorDriver。无需处理嵌套的演示者或多个 EditorDriver。

# listview - 在 jQuery Mobile 中切换列表视图的排序顺序

> ID：14716846
> 
> 赞同：1
> 
> 时间：2013-02-05T21:04:07.380
> 
> 标签：listview, sorting, jquery-mobile

我正在使用 jQuery Mobile（又名 JQM）开发一个原型应用程序。我不是专家，但在遇到分类挑战之前我会勉强过活。

我想要选择数据行，并且需要根据各种属性对行进行排序。典型的属性是名称、日期、值等。

我找到并安装了 Andy Matthews 的 jQuery Mobile Tiny Sort 插件（位于[http://andymatthews.net/code/jqm-tinysort](http://andymatthews.net/code/jqm-tinysort)）。使用它我已经能够让列表视图对属性进行排序。

问题是这只允许升序排序。我需要能够在不同的属性之间切换，还需要在升序和降序之间切换。

上面的插件基于 jQuery Tiny Sort 插件（来自[http://tinysort.sjeiti.com](http://tinysort.sjeiti.com)），它可以进行切换。

我正在寻找的是正确的方法（如果可能的话）将 asc/desc 参数从 JQM 插件传递到后端 Tiny Sort 插件。

有没有人知道如何做到这一点？还是我应该采用更好的方法？

提前致谢，

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T05:10:16.677

修改 Andy Matthew 的插件以支持双向排序非常简单，因为实际排序是由 Jquery tiny sort 插件完成的。

首先，通过添加一个默认值为“asc”或“desc”的新“sortOrder”选项来修改脚本“jquery.jqmts.js”。其次定位对 .tsort 方法的调用，传递附加的排序参数

```
$('li:not(.' + options.className + ')', $el).tsort({ data: 'sort-' + e.currentTarget.value, order:options.sortOrder }); 
```

现在可以在您调用 .jqmts 插件时根据具体情况设置此选项。

# azure - 如何在 Azure 中授权 RemoteApp

> ID：14716848
> 
> 赞同：3
> 
> 时间：2013-02-05T21:04:21.057
> 
> 标签：azure, licensing, remoteapp

我们需要将我们的 ERP 用作 SAAS（软件即服务）。我们试用了三个月的 Azure 试用版，从技术上讲是成功的。但是，当我们使用 RemoteApp 服务时，系统会要求许可证（90 天后），但我们不知道是否可以按月付费或如何获得许可证。

我们有很好的商机，但我尝试联系危地马拉（中美洲）的 microsfot 支持，他们总是在 48 小时内提供回复。但一个月后我没有收到任何回复。我的不。票是130109017590。

谁能帮我解释一下 Azure 中的许可是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:45:40.060

我想您是在询问 Azure 中的许可。如果您在谈论其他事情，请告诉我。

Azure 设置为即用[即付](http://www.windowsazure.com/en-us/pricing/calculator/)模式，您的初始每月账单为 0 美元，并根据您使用的资源数量从那里开始上涨。在这种情况下，资源可以是计算时间（即，您有一个包通过 Web 或 Worker Role 部署到云服务）

Azure 中的大部分功能都属于平台即服务，其中网络、硬件、操作系统等的详细信息为您处理，您只需专注于构建和部署应用程序。话虽如此，您通常在本地实施中可能需要担心的所有许可都在 Azure 中处理。

剩下的就是计费。Azure 中的计费非常简单。较小的帐户（没有 EA 的帐户）只是在您创建帐户时使用信用卡设置的。您将按给定的时间间隔（每月）为您在上个月使用的所有资源付费。

# c++ - 将 fstream 传递给函数

> ID：14716849
> 
> 赞同：0
> 
> 时间：2013-02-05T21:04:21.907
> 
> 标签：c++

我正在尝试将 fstream 传递给一个函数，然后将结构写入文件。我知道您必须通过引用传递流，但在运行时没有将任何内容写入文件。继承人我到目前为止：

```
struct Record
{
    char name     [16];
    char phoneNum [16];
    float balance;
};

void newRec (fstream &);

int main()
{
    fstream ref;
    ref.open("prog2.dat", ios::in | ios::out | ios::app | ios::binary);
    if(!ref.fail() )
    {
        int choice = menu(ref);
        system("CLS");

        while(choice != 6)
        {
            choice = menu(ref);
            system("CLS");
        }
    }
    else
        cout << "Error opening file. " << endl;

    return 0;
}

void newRec (fstream& ref)
{   
    Record rec;

    cout << "Enter customer name: ";
    cin.ignore();
    cin.getline(rec.name, sizeof(rec.name));
    cout << "Enter customer phone number: ";
    cin >> rec.phoneNum;
    cout << "Enter beginning account balance: ";
    cin >> rec.balance;

    ref.write(reinterpret_cast<char*>(&rec), sizeof(rec));
} 
```

rec 只是一个 3 成员结构。任何想法为什么这不起作用？我很感激任何帮助。注意：根据我的任务，我必须使用 .write() 而不是 <<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:44:33.117

如果您使用的是 Visual Studio：可能您正在查找错误的目录，该文件将在`Projects\Project_Name\Project_Name`调试时创建，而不是在`Projects\Project_Name\Debug`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:09:34.733

流的工作方式与`cout`和一样`cin`。你可能会更好地使用

```
ref << rec.name << "," << rec.phoneNum << "," << rec.balance << endl; 
```

# python-imaging-library - PIL 到 Qimage 的转换：QImage 构造函数不释放内存

> ID：14716850
> 
> 赞同：2
> 
> 时间：2013-02-05T21:04:21.937
> 
> 标签：python-imaging-library, qimage

我正在开发一个使用**PIL****加载**图片的 Qt 应用程序，修改颜色和 alpha 通道，然后**将它们转换为 QImage**。

 ****这是有问题的一段代码：**ImageQt**函数的正常重复使用：

```
 # memory is filled  around 7 mB/s
    if **name** == '**main**':
        while True:
            im = Image.open('einstein.png') #small picture
            imQt = QtGui.QImage(ImageQt.ImageQt(im)) # convert to PySide.QtGui.QImage
            imQt.save('outtest.png')# -> rendered picture is correct
            #del(imQt) and del(im) does not change anything
            time.sleep(0.02) 
```

这里的问题是**疯狂的内存填充**，当图片应该被垃圾收集器擦除时。我检查了 gc.collect()，但它没有改变任何东西。

这个例子展示了**imageQt**函数发生了什么，但实际上，我注意到这是QImage引起的一个问题：**如果你反复使用QImage构造函数处理数据，python进程使用的内存会增加**：

```
 im= Image.load('mypic.png').convert('RGBA')
    data = im.toString('raw','RGBA')
    qIm = QtGui.QImage(data,im.size[0],im.size[1],QtGui.QImage.Format_ARGB32)
    qIm.save('myConvertedPic.png')# -> picture is perfect 
```

如果你把这段代码放在一个循环中，内存会增加，如第一个例子。从那里我有点迷路，因为这是一个 PySide 问题......

我尝试使用一种解决方法，但它也不起作用：

```
 #Workaround, but not working ....

    if **name** == '**main**':
        while True:
            im = Image.open('einstein.png') #small picture
            imRGBA = im.convert('RGBA') # convert to RGBA
            imRGBA.save('convtest.png') # ->picture is looks perfect
            imBytes = imRGBA.tostring('raw','RGBA')
            #print("size %d %d" % (imRGBA.size[0],imRGBA.size[1]))
            qImage = QtGui.QImage(imRGBA.size[0],imRGBA.size[1],QtGui.QImage.Format_ARGB32) # create new empty picture
            qImage.fill(QtCore.Qt.blue) # fill with blue, otherwise it catches pieces of the picture still in memory
            loaded = qImage.loadFromData(imBytes,'RGBA') # load from raw data
            print("success %d" % loaded)# -> returns 0
            qImage.save('outtest.png')# -> rendered picture is blue
            time.sleep(0.02) 
```

我真的被困在这里，如果你能帮助**找到这个解决方法的解决方案**？因为我真的被困在这里了！我还想**讨论 QImage 问题**。有没有可靠的方法来释放这个内存？在这种情况下，我使用 python3.2(32bits) 会成为问题吗？在这种情况下，我是唯一的一个吗？

我在以下情况下使用的进口商品：

```
 import time
    import sys
    import PySide
    sys.modules['PyQt4'] = PySide # this little hack allows to solve naming problem when using PIL with Pyside (instead of PyQt4)
    from PIL import Image, ImageQt
    from PySide import QtCore,QtGui 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:09:05.440

在进一步搜索不成功后，我注意到与**QImage 构造函数关联的 PIL 函数****image.tostring()**导致了这个问题

```
 `im = Image.open('einstein.png').convert('RGBA')
    data = im.tostring('raw','RGBA') # the tostring() function is out of the loop
    while True:
        imQt = QtGui.QImage(data,im.size[0],im.size[1],QtGui.QImage.Format_ARGB32)
        #imQt.save("testpic.png") #image is valid
        time.sleep(0.01)
        #no memory problem !`
```

**我想我真的很接近找出问题所在，但我无法指出。它肯定与`data`内存中保存的变量有关。******

# c++ - c++中的排序是如何工作的？

> ID：14716855
> 
> 赞同：2
> 
> 时间：2013-02-05T21:04:36.220
> 
> 标签：c++, sorting

我是一名 Java 开发人员。我目前正在学习 C++。我一直在查看用于排序的代码示例。在 Java 中，通常会为排序方法提供它需要排序的容器，例如

```
sort(Object[] someArray) 
```

我注意到在 C++ 中你传递了两个参数，即容器的开始和结束。我的问题是如何访问实际的容器？

这是取自维基百科的示例代码，说明了排序方法

```
#include <iostream>
#include <algorithm>
#include <vector>
int main() {
 std::vector<int> vec;
 vec.push_back(10); vec.push_back(5); vec.push_back(100); 
 std::sort(vec.begin(), vec.end());
 for (int i = 0; i < vec.size(); ++i) 
     std::cout << vec[i] << ' ';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:06:40.040

`vec.begin()`并`vec.end()`返回迭代器迭代器。迭代器是元素上的一种指针，您可以使用迭代器读取和修改它们。这就是 sort 使用迭代器所做的事情。

如果是迭代器，可以直接修改迭代器所指的对象：

```
*it = X; 
```

排序函数不必知道容器，这是迭代器的强大功能。通过操作指针，它可以对完整的容器进行排序，甚至不知道它到底是什么容器。

您应该了解迭代器（[http://www.cprogramming.com/tutorial/stl/iterators.html](http://www.cprogramming.com/tutorial/stl/iterators.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:07:05.097

`vec.begin()`并且`vec.end()`不返回`vector`. 它们实际上返回所谓的*迭代器*。迭代器的行为非常类似于指向元素的指针。如果你有一个`i`用 初始化的迭代器`vec.begin()`，你可以得到一个指向向量中第二个元素的指针`i++`——就像你有一个指向数组中第一个元素的点一样。同样，您可以`i--`向后退。对于某些迭代器（称为随机访问迭代器），您甚至可以`i + 5`在`i`.

这就是算法访问容器的方式。它知道它应该排序的所有元素都在`begin()`和之间`end()`。它通过执行简单的迭代器操作来导航元素。然后它可以通过做来修改元素`*i`，这为算法提供了对`i`指向的元素的引用。例如，如果`i`设置为`vec.begin()`，而您这样做`*i = 5;`了，您将更改 的第一个元素的值`vec`。

这种方法允许您仅传递要排序的 a 的*一部分。*`vector`假设您只想对`vector`. 你可以这样做：

```
std::sort(vec.begin(), vec.begin() + 5); 
```

这是非常强大的。由于迭代器的行为与指针非常相似，因此您实际上也可以传递普通的旧指针。假设您有一个数组`int array[] = {4, 3, 2, 5, 1};`，您可以轻松调用`std::sort(array, array + 5)`（因为数组的名称将衰减为指向其第一个元素的指针）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T21:07:27.113

不必*访问*容器。这就是标准模板库（成为 C++ 标准库的一部分）背后的设计重点：算法对容器一无所知，只是迭代器。

这意味着他们可以使用任何提供一对迭代器的东西。当然，所有 STL 容器都提供`begin()`和`end()`方法，但您也可以使用常规的旧 C 数组、MFC 或 glib 容器或其他任何东西，只需为其编写自己的迭代器即可。（对于 C 数组，它与 begin 和 end 迭代器一样简单`a`。`a+a_len`）

至于它在幕后是如何工作的：迭代器遵循一个隐式协议：你可以做一些事情，比如`++it`将迭代器推进到下一个元素，或者`*it`获取当前元素的值，或者`*it = 3`设置当前元素的值。（比这要复杂一点，因为有几种不同的协议——迭代器可以是随机访问或只进、常量或可写等。但这是基本思想。）所以，如果 `sort 被编码为限制它本身对迭代器协议（当然，它是），它适用于任何符合该协议的东西。

要了解更多，互联网上有很多教程（和书店）；只有这么多的答案可以解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T21:06:49.277

`begin()`并`end()`返回迭代器。参见例如[http://www.cprogramming.com/tutorial/stl/iterators.html](http://www.cprogramming.com/tutorial/stl/iterators.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:10:59.753

迭代器的作用类似于对容器一部分的引用。也就是说，`*iter = z;`实际上更改了容器中的元素之一。

`std::sort`实际上`swap`对包含的对象的引用使用了一个函数，因此您已经初始化的任何迭代器都保持相同的顺序，但这些迭代器引用的值会发生变化。

请注意，`std::list`它还具有称为`sort`. 它以相反的方式工作：您已经初始化的任何迭代器都保持相同的值，但这些迭代器的顺序会发生变化。

# ruby-on-rails-3 - 基于环境为 Rails 中的所有模型渲染 JSON

> ID：14716857
> 
> 赞同：0
> 
> 时间：2013-02-05T21:04:44.790
> 
> 标签：ruby-on-rails-3, json, activerecord

我正在使用辅助方法使我的 json 漂亮：

```
def make_pretty_json(json_object)
 if (Rails.env == "development" || Rails.env == "staging")
   JSON.pretty_generate(JSON.parse(json_object))
 else
   json_object
 end
end 
```

然后我在我的控制器中调用助手：

```
@jobs = make_pretty_json(@jobs) 
```

并做一个

```
respond_to do |format|
  format.json { 
    render json: @jobs
  } 
```

我必须为我的所有模型手动执行此操作。有没有办法在全球范围内做到这一点，所以我只能在某些环境中获得漂亮的缩进 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:33:55.287

如果你想要一个更漂亮的 json 视图，我推荐 chrome 的 JsonView 插件：

[https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc)

# sockets - Winsock：我可以同时为不同的套接字调用发送函数吗？

> ID：14716861
> 
> 赞同：0
> 
> 时间：2013-02-05T21:04:59.233
> 
> 标签：sockets, winsock

比方说，我有一个服务器，有许多通过 TCP 连接的客户端，每个客户端都有一个套接字，每个客户端都有一个发送和接收线程。是否安全且可以同时调用发送函数，因为它不会为同一个套接字调用发送函数。

如果安全且没问题，我可以同时将数据流式传输到客户端而不阻塞其他客户端的发送功能吗？

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:52:57.707

是的，这是可能的并且是线程安全的。你可以测试它，或者自己弄清楚如果不是这样，IS、IIS、SQL Server 等就不能很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:54:26.283

假设这是来自“Winsock”标签的 Windows。

这种设计（每个连接的客户端都有一个发送/接收线程）总体上不会扩展。希望您意识到这一点，并且您知道您的客户数量非常有限（即使那样，我也不会这样写）。

您不需要为每个客户端都有一个线程对。

您可以使用非阻塞 IO 和读/写就绪通知（使用 select() 或重叠 IO 的一种，例如完成例程或完成端口）为大量客户端提供服务。如果您使用完成端口，您可以设置一个线程池来处理套接字 IO，并为您自己的工作线程或线程/线程池排队工作。

是的，您可以同时从不同的线程发送和接收多个套接字；但是您不应该需要那些额外的线程，因为您根本不应该对 send/recv 进行阻塞调用。当您进行非阻塞调用时，可以立即写入的数量被写入并且函数返回，然后您注意发送了多少，并在套接字下一次可写时请求通知。

我认为您可能需要考虑一种不同的方法，因为这不是简单的事情；如果您使用.Net，您可能会通过使用 TcpListener 或 HttpListener 构建它（两者都为您使用完成端口），但请注意，您无法轻松禁用 Nagle 算法，因此如果您需要交互性（想想Google 搜索页面上的自动完成功能），那么您可能无法获得您想要的性能。

# c++ - 与第 3 方头文件相关的 C++ Builder 歧义错误

> ID：14716866
> 
> 赞同：0
> 
> 时间：2013-02-05T21:05:23.163
> 
> 标签：c++, c++builder

我正在开发一个使用许多第三方库的大型项目。由于这个事实，我遇到了一些模棱两可的错误。一些函数在全局名称空间中定义，也在不同的名称空间中定义。

我知道您可以指定“使用”来说明要使用的命名空间，但是我不知道如何为文件指定它，而不是在每个错误前面加上“::”。

如果有人知道方法，或者有更好的方法，我会全神贯注。

**背景：**

如果我需要非全局命名空间，那将不是问题，因为我可以将“使用”与该命名空间一起使用......好奇是否有一种方法可以对全局命名空间引用进行“使用”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:12:18.447

如果在两个不同的命名空间下有两个同名且参数化的函数，则不能：

```
using namespace x;
using namespace y; 
```

因为编译时会出现歧义错误。

选项是在函数前面加上 x:: 或 y:: 或限定命名空间：

```
int test( void )
{
   using namespace x;
}

int test1( void )
{
   using namespace y;
} 
```

当然，这仅在您不在单个函数中使用两个命名空间时才有效。

更新：指定“全局”命名空间的唯一方法是在函数调用前加上 ::

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:32:03.737

在某些情况下，它有助于重新排列标题，因此使用全局命名空间的标题位于前面 -

# c# - 如何让 LINQPad 转储（） System.__ComObject 引用？

> ID：14716871
> 
> 赞同：6
> 
> 时间：2013-02-05T21:05:35.193
> 
> 标签：c#, com, com-interop, linqpad, rcw

我正在尝试使用[LINQPad](http://www.linqpad.net/)快速开发小型[ArcObjects （](http://en.wikipedia.org/wiki/ArcObjects) [ESRI 的 ArcGIS](http://www.esri.com/software/arcgis)软件的基于 COM 的库）应用程序，并且在将它用于我从 .NET 初始化的 COM 对象的属性方面取得了一些成功`Dump()`，但任何 COM 对象从现有的 COM 对象中获取的对象被简单地转储为`System.__ComObject`引用，这并不是特别有用：

![LINQPad 截图](../Images/922d0e6eed8a7183b0394b0b1a30a7c1.png)

[这个帮助主题](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#//000100000151000000)解释了为什么会发生这种情况，我想我理解，但想知道有哪些选项可以解决这种行为，特别是在使 LINQPad（甚至）更强大的情况下。

有趣的是，Visual Studio 的调试器能够显示这些对象的属性，甚至是值类型的值：

![Visual Studio 调试 ArcObjects](../Images/edb9ca5252a945b82e2f1b5d33673aea.png)

Visual Studio 使用什么机制来实现这种自省，为什么 LINQPad 的 Dump 方法不做同样的事情？**编辑：**请参阅有关 VS 如何执行此操作的相关问题：[Visual Studio 的调试器/交互式窗口如何在 .NET 中转储 COM 对象的属性？](https://stackoverflow.com/q/14798159/386205)

[ArcObjects .NET SDK](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/ao_home.html)包括带有 RCW的PIA，每个 CoClass 可以实现 COM 接口，因此我认为应该可以以编程方式包装这些对象。

作为一种解决方法[`Marshal.CreateWrapperOfType()`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.createwrapperoftype.aspx)，当我碰巧知道应该使用哪个 CoClass 时，我已在我的 LINQ 查询中成功使用强制 LINQPad 转储对象的属性。当然，这只会正确地转储值类型属性——任何基于 COM 的引用类型属性仍报告为`System.__ComObject`，因此正确的解决方案必须递归地工作以将这些属性也包装起来。

在[上一个问题](https://stackoverflow.com/q/3348554/386205)中，我了解到 CoClass 可以在运行时确定，如果它实现[`IPersist`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688695%28v=vs.85%29.aspx)，ArcObjects 的很大一部分就是这样做的。我可以以某种方式使用这种技术或另一种技术来自动`System.__ComObject`从 PIA 强制 a 到适当的 RCW 吗？如果是这样，我如何在 LINQPad 中实现它，例如通过提供[`ICustomMemberProvider`](http://www.linqpad.net/faq.aspx#extensibility)实现？是否可以将其设为递归，以便同时包装 COM 对象的属性？

我正在使用面向 .NET 4.0 的 LINQPad 4.x，但我也对支持 LINQPad 2.x 感兴趣（因此，首选适用于 .NET 3.5 和 .NET 4.0 的解决方案，但这不是必需的）。

**更新：**我已经弄清楚了问题的第一部分，即如何`System.__ComObject`使用`IPersist.GetClassID`. 有关我正在使用的代码，请参阅此[相关问题](https://stackoverflow.com/q/14756823/386205)和[此答案。](https://stackoverflow.com/a/14765248/386205)

我仍然想知道如何将其用于 LINQPad 的 Dump 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:27:21.127

我一直有一些相同的问题（除了我正在使用 iTunes COM 库）。

在 Visual Studio 中，您没有意识到这一点，但每个调试窗口都要求 COM 库在您打开它时创建类型。这与 Dump() 不同，后者不是交互式的。

我找到的唯一解决方案是，如果我知道列表是什么类型来`OfType<>()`转换为该类型。这将遍历列表并强制 COM 创建元素。

所以在你上面的例子中，你会说：

```
var layers = map.EnumerateLayers("etc")
      .Select(s => s.OfType<Layer>())
      .Dump(); 
```

注意 - 您的米数可能会有所不同，事实证明对于 OP 示例来说这是必需的。

```
var layers = map.EnumerateLayers()
      .OfType<IGeoFeatureLayer>()
      .Dump(); 
```

根据 COM，您可能必须将其带到下一步并从那里拉出成员（对于 com，您必须要求获取值）如下所示：

```
var layers = map.EnumerateLayers("etc")
      .Select(x => x.OfType<Layer>())
      .Select(x => new { x.Depth, x.Dimention, }) // etc 
      .Dump(); 
```

如果有一种“神奇”的方式来实现这一点当然会很好，但我不相信这是因为 COM 的性质。

# ruby-on-rails - ruby - 数组元素之间的排列

> ID：14716873
> 
> 赞同：0
> 
> 时间：2013-02-05T21:05:41.130
> 
> 标签：ruby-on-rails, ruby

我正在用 ruby​​ 在 Google Sketchup 中编写一个插件，在尝试根据用户组合排列数组中存在的两个数组时遇到了一个真正的问题。

> 我有一个数组数组，比如`[["1"],["lol"], ["so"]]`
> 
> 当我们有这样的组合时 <`[1, 2, 3]`没关系，它应该保持不变：`[["1"],["lol"], ["so"]]`
> 
> 但是当我们有这样的组合时`[2, 3, 1]`，输出应该是：`[["lol"], ["so"], ["1"]]`
> 
> 对于`[3,1,2]`=>`[["so"], ["1"], ["lol"]]`
> 
> ...ETC

**编辑**
对不起，伙计们，我忘记了我有点像的数组：`[["1, 2, 3"], ["lol1, lol2, lol3"], ["so1, so2, so3"]]`所以对于组合`[2, 3, 1]`，输出应该是：`[["2, 3, 1"], ["lol2, lol3, lol1"], ["so2, so3, so1"]]`

谢谢你的协助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:30:40.093

你可以使用收集：

```
array   = [["1"],["lol"], ["so"]]
indexes = [2, 1, 3]
indexes.collect {|i| array[i-1]} #=> [["lol"], ["1"], ["so"]] 
```

如果将索引设置为基于 0，则可以删除 -1

split 和 map 可用于将字符串转换为值：

```
"1, 2, 3".split(",").map { |i| i.to_i} # [1, 2, 3] 
```

然后你也可以拆分你的字符串

```
"lol2, lol3, lol1".split(/, /) #=> ["lol2", "lol3", "lol1"] 
```

您应该能够将其与上述内容放在一起以获得您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:13:09.790

```
indexes = [2, 1, 3]
array   = [["1"],["lol"], ["so"]]
result  = indexes.map{|index| array[index-1] } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:38:53.827

```
a = [["1"], ["lol"], ["so"]]
index = [2, 1, 3]

index.collect {|i| a[i - 1]} 
```

这输出

```
[["lol"], ["1"], ["so"]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T21:29:02.380

您还应该看看 active_enum

[https://github.com/adzap/active_enum](https://github.com/adzap/active_enum)

您可以执行以下操作：

```
class YourClassName < ActiveEnum::Base
  value [1] => ['1']
  value [2] => ['lol'] 
  value [3] => ['so']
end 
```

# tomcat - Tomcat 7.0.35 为静态 HTML 文件设置 HTTP 响应标头 Content-Type 字符集

> ID：14716878
> 
> 赞同：8
> 
> 时间：2013-02-05T21:06:01.643
> 
> 标签：tomcat, war, content-type, servlet-filters, static-html

我正在使用 HTTP 连接器从独立的 Tomcat 7.0.35 服务器在单个 war 文件中提供一些静态 HTML 文件和一个 servlet。

我想通过设置 HTTP 响应标头来指定所有静态 HTML 文件的字符集`Content-Type=text/html;charset=UTF-8`。

Tomcat 默认提供带有`Content-Type=text/html`（无字符集部分）的 HTML 文件。

我按照以下说明操作：

[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)

但标题仍然包含`Content-Type=text/html`没有`;charset=UTF-8`

我的 web.xml 转载如下。请注意，我尝试将 、 、 和 更改为，但`url-pattern`这些都不起作用。`/*``*``/index.html``index.html`

仅供参考， /index.html 文件由 Tomcat 正确提供（除了缺少的`;charset=UTF-8`）。/getData servlet 也正常工作，我已经成功地设置了 servlet 的`Content-Type=text/html;charset=UTF-8`响应`response.setContentType("application/json;charset=UTF-8");`。

谢谢你的帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <filter>
        <filter-name>CharacterEncoding</filter-name>
        <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncoding</filter-name>
        <url-pattern>/index.html</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>DataServlet</servlet-name>
        <servlet-class>com.rcg.data.web.DataServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DataServlet</servlet-name>
        <url-pattern>/getData</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-13T10:55:25.340

您是否尝试过设置 MIME 映射以包含字符集？

```
<mime-mapping>
    <extension>html</extension>
    <mime-type>text/html;charset=UTF-8</mime-type>
</mime-mapping> 
```

# c - 错误使用 switch 语句：程序采用它不应该接受的值

> ID：14716880
> 
> 赞同：-3
> 
> 时间：2013-02-05T21:06:25.783
> 
> 标签：c, switch-statement

这是一个初学者问题，可以理解使用 switch 语句可能出错的地方。任务如下： *编写一个程序，接受用户输入的两个整数值。显示第一个整数除以第二个整数的结果，精确到小数点后三位。请记住让程序检查除以零。*

为了测试第二个操作数是否为 0，我使用了 switch 语句（我知道我可以使用 if...else 来做到这一点）。但是，该程序仍将接受 0 作为操作数，我不确定为什么会发生这种情况。如果它试图计算除以 0，程序就会失败。你能告诉我我可能错在哪里吗？我的代码如下：

```
 #include <stdio.h>

  int main (void)

  {
         int a, b;

   printf ("Type two integer values: ");
   scanf ("%i %i", &a, &b);

   switch (a/b)
   {

   case 'b == 0':
        printf ("\n The divisor can't be 0.\n");

   break;

   default:
           printf ("The result of dividing %i by %i is %.3f\n", a, b,(float) a / b);

   break;
  }
  return 0;

  } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:09:29.013

```
 switch (b)
   {
   case 0:
        printf ("\n The divisor can't be 0.\n");

   break;
   default:
           printf ("The result of dividing %i by %i is %.3f\n", a, b,(float) a / b);
   break;
  } 
```

另请注意，以下表达式`case`必须是常量，例如：

```
case 0:
case 1:
case 'a':
case 'b': 
```

ETC

那里..应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:15:43.567

案例标签不能是条件表达式；它们必须是常量整数值。

在这种情况下，您要编写：

```
switch (b) {
case 0:
    /* stuff goes here */
    break;
} 
```

但是，这里的 switch 语句很奇怪。if 语句会更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:20:40.440

尝试将 switch 语句更改为 switch (b)

# javascript - Javascript 如何比较两个值然后更改背景颜色？

> ID：14716883
> 
> 赞同：0
> 
> 时间：2013-02-05T21:06:40.843
> 
> 标签：javascript, html

为什么这段代码不起作用？我希望它改变输入背景的颜色，无论值是正确的（绿色）还是不正确的（红色）。

```
<html>
<head>
<script type="text/javascript">
function funct1 () {
var username = "63XZ4";
if(username == document.getElementById('keygen').value ) {

document.getElementById('keygen').style.backgroundColor = '#5bc556';
}

else {
colorchange.style.backgroundColor = 'red';
}
}
return 0;
</script>
</head>
<body>
<input type="text" id="keygen">
<button onclick="funct1"></button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:11:32.267

```
<html>
<head>
<script type="text/javascript">
function funct1 () {
    var username = "63XZ4";
    var keygen = document.getElementById('keygen');
    if(username == keygen.value) {
        keygen.style.backgroundColor = '#5bc556';
    } else {
        keygen.style.backgroundColor = 'red';
    }
}
</script>
</head>
<body>
<input type="text" id="keygen" />
<button onclick="funct1()">Button Title</button>
</body>
</html> 
```

以上应该有帮助。另外，您可能想研究一下：

*   为您声明的函数提供更具描述性的名称。
*   通过将 DOM 元素存储在变量中来消除对“getElementById”的调用，从而节省时间。

# node.js - 你如何获得当前正在执行的节点二进制文件？

> ID：14716884
> 
> 赞同：0
> 
> 时间：2013-02-05T21:06:42.840
> 
> 标签：node.js

在 node.js 应用程序中，您可以使用 __dirpath 获取当前脚本的位置。你能做同样的事情来获取当前运行的“节点”的位置吗？

这样我就可以在节点应用程序中生成新进程，以确保使用与运行父应用程序完全相同的节点二进制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:13:09.850

```
process.execPath 
```

这是启动进程的可执行文件的绝对路径名。

[http://nodejs.org/api/process.html#process_process_execpath](http://nodejs.org/api/process.html#process_process_execpath)

# sql - 仅当表 2 中的值 = true 时才返回表 1 中的值

> ID：14716889
> 
> 赞同：0
> 
> 时间：2013-02-05T21:07:01.983
> 
> 标签：sql, tsql, sql-server-2012

使用 SQL Server 2012

我可以提出这两个查询来获得我需要的两个部分，但我不知道如何组合它们并获得一个结果表。

```
--Returns Max Value of instrument per day
Declare @StDate DateTime
Declare @EndDate DateTime
Set @STDate = '11/1/2012'
Set @EndDate = '12/1/2012'
Select dateadd(day,(datediff(day,0,TIMEandDATE)),0) as MyDate, MAX(Value) AS Max_Turb 
From Turbs where TagID = 3004
and TimeAndDate >= @StDate
and TimeAndDate < @EndDate
Group by dateadd(day,(datediff(day,0,TIMEandDATE)),0)
Order by dateadd(day,(datediff(day,0,TIMEandDATE)),0)

--returns when the process line status bit changes to On_Line
Declare @StDate DateTime
Declare @EndDate DateTime
Set @STDate = '11/1/2012'
Set @EndDate = '12/1/2012'
SELECT TIMEandDATE as MyDate, Value as On_Line
  FROM StatusBits
  Where TagID = 10003
  and Value = 1
  and TimeAndDate >= @StDate
and TimeAndDate < @EndDate 
```

TagID 10003 不会全天填充，它仅在状态更改时被记录并加盖时间戳。

TagID 3004 整天都在记录，不考虑其他任何事情。因此，它将记录无意义的值。TagID 10003 位表示进程正在运行，这些值是有效的，应该考虑输出。TagID 10003 位是与许多不同进程相关的全局指示，并且对于这个值不是唯一的。

我正在寻找的结果需要每天显示 TagID 3004 的 MAX 值（来自表 Turbs），但仅在 TagID 10003 变为“1”（在线）直到变为“0”（离线）。这很容易跨越数天或数周。

谁能帮我这个？

更新回复：感谢您的回复-您的想法是正确的，但它仅返回每天午夜的值，这是我自己尝试所看到的。我开始认为这种数据库设计是真正的问题，如果保持这种方式会让我发疯。TagID 3004 全天每 5 分钟记录一次。TagID 10003 仅在更改值时（以及每天午夜）才会被记录。因此，如果它在几个小时或几天内没有改变值，我从第二个查询中没有得到任何值。并且即使这样做，两者的时间戳也很少匹配，因此不太可能找到结果。

为了演示 - 通过在线位上的此查询，您可以看到在线在线每天存在的条目数。

```
DECLARE @OnLine TABLE (RN int IDENTITY(1,1), TIMEandDATE datetime, VALUE float)
Declare @StartDT DateTime
Declare @EndDT DateTime
Set @StartDT = '11/1/2012'
Set @EndDT = '12/1/2012'

INSERT INTO @OnLine
               SELECT TOP 1 @StartDT, 
        VALUE FROM StatusBits 
        WHERE TagID = 10003 
        AND TIMEandDATE < @StartDT 
        ORDER BY TIMEandDATE DESC
INSERT INTO @OnLine
               SELECT TIMEandDATE, 
        VALUE FROM StatusBits 
        WHERE TagID = 10003
                AND TIMEandDATE >= @StartDT 
        AND TIMEandDATE < @EndDT
               ORDER BY TIMEandDATE
INSERT INTO @OnLine
               SELECT TOP 1 @ENDDT, 
        VALUE FROM StatusBits 
        WHERE TagID = 10003 
        AND TIMEandDATE < @EndDT 
        ORDER BY TIMEandDATE DESC 
```

返回以下内容：

```
record  Timestamp       Value
1   2012-11-01 00:00:00.000 0
2   2012-11-01 23:59:59.087 0
3   2012-11-02 23:11:44.450 1
4   2012-11-03 00:00:00.807 1
5   2012-11-03 13:47:26.113 0
6   2012-11-03 13:52:42.083 1
7   2012-11-03 14:24:54.287 0
8   2012-11-03 23:59:59.387 0
9   2012-11-04 23:34:16.257 1
10  2012-11-04 23:59:59.840 1
11  2012-11-05 15:31:07.133 1
12  2012-11-05 23:59:59.230 1
13  2012-11-06 07:47:37.477 0
14  2012-11-06 15:44:48.247 0
15  2012-11-06 23:59:59.013 0
16  2012-11-07 07:11:33.280 1
17  2012-11-08 00:00:00.537 1 
```

我试图在 TagID 10003 从 0 变为 1 之间的时间内返回 tagID 3004 的结果。我看不出这是如何查询的。也许以某种方式使用 BETWEEN ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:31:20.557

您可以使用它来选择第二个表中的值：

```
Declare @StDate DateTime = '11/1/2012'
Declare @EndDate DateTime = '12/1/2012'

;WITH
OnlineDates AS
(
    SELECT TIMEandDATE as MyDate
    FROM StatusBits
    Where TagID = 10003
        and Value = 1
        and TimeAndDate >= @StDate
        and TimeAndDate < @EndDate
)
Select dateadd(day,(datediff(day,0,TIMEandDATE)),0) as MyDate, MAX(Value) AS Max_Turb 
From Turbs T 
    INNER JOIN
        OnlineDates OD
    ON 
        t.TIMEandDATE BETWEEN 
        (
            SELECT TOP (1) X.TIMEandDATE
            FROM StatusBits X
            WHERE X.TagID = 10003
                AND X.Value = 0
                AND X.TIMEandDATE <= t.TIMEandDATE
            ORDER BY DESC

        )
        AND OD.MyDate
where TagID = 3004
Group by dateadd(day,(datediff(day,0,TIMEandDATE)),0)
Order by dateadd(day,(datediff(day,0,TIMEandDATE)),0) 
```

但是，不确定您是否想要从第二个表中选择最大和最小日期，然后按此过滤。

希望这可以帮助！

编辑：为了获得您要查找的内容，您需要 X 和 Y 之间的时间和日期。我们已经有了 Y。那么 X 将是值为 0 的最接近的日期。尝试上面编辑的查询并告诉我。

# ios - 确定 iOS 多人游戏中的最佳主机

> ID：14716892
> 
> 赞同：3
> 
> 时间：2013-02-05T21:07:18.970
> 
> 标签：ios, cocoa, game-center, multiplayer

我正在使用以下代码来确定在具有 2 个用户的多人 iOS 游戏中充当服务器的最佳主机。当所有播放器在所有设备上同时连接时执行代码。

```
[myMatch chooseBestHostPlayerWithCompletionHandler: ^(NSString *playerID) {
    NSLog(@"The best host is: %@", playerID);
}]; 
```

的值`playerID`始终为空，根据文档，这意味着它无法确定最佳主机。我正在使用 iOS 6.1 的 iPhone 和 6.1 版的模拟器测试该应用程序。运行模拟器的电脑和 iPhone 在同一个无线网络上。我已经测试了在两个设备上以连续方式调用上面的代码，并发现如果其中一个设备断开连接，它确实确定了一个主机。

我需要两个非模拟器设备来测试吗？或者还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:23:58.713

由于某种原因，它不适用于模拟器（或者我无法使其工作）。

在使用 2 台设备时，我大部分时间确实得到了有效的结果。也就是说 - 它并不总是一致的，因此您肯定需要一个备份选项来选择主机。

还

> 如果您打算使用此方法搜索最佳服务器，则比赛中的所有设备都必须在支持此方法的 Game Kit 版本上运行，并且比赛中的每个设备必须同时调用此方法。

这超出了多人游戏指南 - 您是否同时在两个设备上调用该方法？

# php - Magento 需要向特定客户群发送自定义帐户确认电子邮件

> ID：14716893
> 
> 赞同：1
> 
> 时间：2013-02-05T21:07:25.840
> 
> 标签：php, magento

我一直在翻阅文件并挠头。发送新帐户创建电子邮件的功能在哪里？一旦我找到它，我会用什么变量来指代特定的客户群？

编辑 2/18 根据下面的建议，我正在查看 Customer.php 文件并查看以下函数：

```
 public function sendNewAccountEmail($type = 'registered', $backUrl = '', $storeId = '0')
    {
        $types = array(
            'registered'   => self::XML_PATH_REGISTER_EMAIL_TEMPLATE,  // welcome email, when confirmation is disabled
            'confirmed'    => self::XML_PATH_CONFIRMED_EMAIL_TEMPLATE, // welcome email, when confirmation is enabled
            'confirmation' => self::XML_PATH_CONFIRM_EMAIL_TEMPLATE,   // email with confirmation link
        );
        if (!isset($types[$type])) {
            Mage::throwException(Mage::helper('customer')->__('Wrong transactional account email type'));
        }

        if (!$storeId) {
            $storeId = $this->_getWebsiteStoreId($this->getSendemailStoreId());
        }

        $this->_sendEmailTemplate($types[$type], self::XML_PATH_REGISTER_EMAIL_IDENTITY,
            array('customer' => $this, 'back_url' => $backUrl), $storeId);

        return $this;
    } 
```

我假设我可以在 $types 数组中设置不同的类型，但是如何访问常量 const XML_PATH_REGISTER_EMAIL_IDENTITY = 'customer/create_account/email_identity' 来设置新的类型条件？我还没有弄清楚如何找到 xml 路径。

* * *

编辑 2/21

我已经复制了整个模块文件并将其重命名并将其创建为我自己的模块。我在配置文件中更改了以下内容：

```
<customer_create_account_email_template_dvm translate="label" module="customer">
                    <label>New account DVM</label>
                    <file>account_new_dvm.html</file>
                    <type>html</type>
                </customer_create_account_email_template_dvm> 
```

添加我的模板以及从底部开始的第二个。

```
<create_account>
                <confirm>0</confirm>
                <default_group>1</default_group>
                <tax_calculation_address_type>billing</tax_calculation_address_type>
                <email_domain>example.com</email_domain>
                <email_identity>general</email_identity>
                <email_template>customer_create_account_email_template</email_template>
                <email_confirmation_template>customer_create_account_email_confirmation_template</email_confirmation_template>
                <email_register_template_dvm>customer_create_account_email_register_template_dvm</email_register_template_dvm>
                <email_confirmed_template>customer_create_account_email_confirmed_template</email_confirmed_template>
                <vat_frontend_visibility>0</vat_frontend_visibility>
            </create_account> 
```

然后将常量添加到 Customer.php

```
const XML_PATH_CONFIRM_EMAIL_TEMPLATE_DVM       = 'customer/create_account/email_confirmation_template_dvm'; 
```

和修改功能：

```
public function sendNewAccountEmail($type = 'registered', $backUrl = '', $storeId = '0')
    {

        Mage::getSingleton('core/session', array('name'=>'frontend')); 
        $session = Mage::getSingleton('customer/session');

        //Caitlin Havener
        //What Group do you belong to?
        if($session->isLoggedIn()) {
            $customerGroupID = $session->getCustomerGroupId();
            print("Customer Group ID is ". $customerID);
        } else {
            echo 'Not logged In';
        }

        //If you are DVM set your type
        if ($customerGroupID==5)
        {
            $type = 'dvm';
        }

        $types = array(
            'registered'   => self::XML_PATH_REGISTER_EMAIL_TEMPLATE,  // welcome email, when confirmation is disabled
            'confirmed'    => self::XML_PATH_CONFIRMED_EMAIL_TEMPLATE, // welcome email, when confirmation is enabled
            'confirmation' => self::XML_PATH_CONFIRM_EMAIL_TEMPLATE,   // email with confirmation link
            'dvm' => self::XML_PATH_REGISTER_EMAIL_TEMPLATE_DVM,   // dvm new account email
        );
        if (!isset($types[$type])) {
            Mage::throwException(Mage::helper('customer')->__('Wrong transactional account email type'));
        }

        if (!$storeId) {
            $storeId = $this->_getWebsiteStoreId($this->getSendemailStoreId());
        }

        $this->_sendEmailTemplate($types[$type], self::XML_PATH_REGISTER_EMAIL_IDENTITY,
            array('customer' => $this, 'back_url' => $backUrl), $storeId);

        return $this;
    } 
```

我测试了它，它不起作用。如您所见，我有一些回声要跟踪，但我不确定如何直接调试它。我有 Firebug，但不知道如何使用它。任何建议将不胜感激。$session->isLoggedIn() 会评估为假吗？

**更新 2/27/13_ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ @Meabed**我正在尝试复制您在博客文章中所做的事情。我创建了一个名为 CaitlinHavener 的文件夹，将 DVMCustomer 目录放入其中，并在其中放入一个 etc 文件夹。我里面有 config.xml：

```
<template>
            <email>
                <CaitlinHavener_DVMCustomer translate="label" module="mymodule">
                    <label>DVMCustomer Template</label>
                    <file>custom/mytemplate.html</file>
                    <type>html</type>
                </CaitlinHavener_DVMCustomer>
            </email>
</template> 
```

在 system.xml 里面我有：

```
<?xml version="1.0"?>
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <sections>
        <customer translate="label" module="mymodule">
            <groups>
                <custom_email translate="label">
                    <label>DVM Custom Template</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>5</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>0</show_in_website>
                    <show_in_store>0</show_in_store>
                    <fields>
                            <exist_user_template translate="label">
                                <label>DVM Custom Template</label>
                                <frontend_type>select</frontend_type>
                                <source_model>adminhtml/system_config_source_email_template</source_model>
                                <sort_order>3</sort_order>
                                <show_in_default>1</show_in_default>
                                <show_in_website>1</show_in_website>
                                <show_in_store>1</show_in_store>
                            </exist_user_template>
                    </fields>
                </custom_email>
            </groups>
        </customer>
    </sections>
</config> 
```

我创建了一个名为 CaitlinHavener_DVMCustomer.xml 的模块 xml 并将其放在模块文件夹中：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>    
    <modules>
        <CaitlinHavener_DVMCustomer>
            <active>true</active>
            <codePool>local</codePool>
        </CaitlinHavener_DVMCustomer>
    </modules>
</config> 
```

当我转到系统>配置>高级时，我可以看到系统注册了模块，但是当我转到系统>事务性电子邮件时，我在那里看不到它，或者当我创建新模板并选择“加载模板”时。

你看到我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:26:38.300

发送新帐户邮件的配置可以在系统 -> 配置 -> 然后在左侧边栏中的客户组中找到客户配置。在那里您可以找到创建新帐户选项。

对于我所看到的客户组，核心 Magento 只允许在同一配置组中为每个 storeview 配置该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:45:05.903

您需要制作另一个模块并扩展客户模型

```
class Mage_Customer_Model_Customer extends Mage_Core_Model_Abstract 
```

该模型具有与发送电子邮件相关的所有方法，因此您需要检查客户组并设置要发送的模板。

# ruby-on-rails - 嵌套表单未保存在 Rails 3.1 中

> ID：14716896
> 
> 赞同：2
> 
> 时间：2013-02-05T21:07:33.777
> 
> 标签：ruby-on-rails, models, nested-forms, nested-attributes

菜鸟问题，我敢肯定，但我似乎找不到我的错误。SymptomSets 正在使用正确的 user_id 保存，但嵌套的症状消失了。请注意，用户模型结构与 Rails 教程中的相同（除了 has_many :symptom_sets）

楷模：

```
class SymptomSet < ActiveRecord::Base
  attr_accessible :symptoms, :symptoms_attributes
  belongs_to :user
  has_many :symptoms, :dependent => :destroy
  accepts_nested_attributes_for :symptoms,  allow_destroy: true
end

class Symptom < ActiveRecord::Base
  attr_accessible :name, :duration, :symptom_set_id
  belongs_to :symptom_set
end 
```

控制器：

```
class SymptomSetsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :new]

    def new
      @symptom_set = SymptomSet.new
      3.times do
        symptom = @symptom_set.symptoms.build
      end
    end

    def create
      @symptom_set = current_user.symptom_sets.build(params[:symptom_sets])
      if @symptom_set.save
        flash[:success] = "Symptoms submitted!"
        redirect_to root_url
      else
        render 'static_pages/home'
      end
    end 
```

和视图：

```
<%= simple_form_for @symptom_set, :html => { :class => 'form-inline' } do |f| %>

    <%= f.fields_for :symptoms do |builder| %>
   <%= render 'symptom_fields', f: builder %>
    <% end %>

    <div class="actions"><%= f.submit %></div>
<% end %> 
```

和部分：

```
 <%= f.input :name, 
                   :collection=> ["Cough", "Fever", "Headache", "Lethargy"], 
                    label: "Symptom", 
                    prompt: "Select a symptom",
                   :input_html => { :class => "span3" }%>  

       <%= f.input :duration, 
                   :collection => 1..14, 
                    label: "Duration",
                    prompt: "How many days?" %> 
```

最后，rails 服务器控制台输出以下内容：

参数：{"utf8"=>"✓", "authenticity_token"=>"s7ksuk40M2r76Nq4PGEEpTpkCECxFniP4TtpfSHszQk=", "symptom_set"=>{"symptoms_attributes"=>{"0"=>{"name"=>"Cough", " _destroy"=>"false", "duration"=>"2"}, "1"=>​​{"name"=>"Fever", "_destroy"=>"false", "duration"=>"2" }, "2"=>{"name"=>"", "_destroy"=>"1", "duration"=>""}}}, "commit"=>"创建症状集"} 用户负载 ( 0.4ms) SELECT "users".* FROM "users" WHERE "users"."remember_token" ='OH6_nuvySNjd6AbTuDunsw' LIMIT 1

(0.1ms) BEGIN SQL (0.4ms) INSERT INTO "symptom_sets" ("created_at", "updated_at", "user_id") VALUES ($1, $2, $3) RETURNING "id" [["created_at", 2 月 5 日星期二2013 年 21:12:07 UTC +00:00]，["updated_at"，星期二，2013 年 2 月 5 日星期二 21:12:07 UTC +00:00]，["user_id"，1]] (1.1ms) 提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:12:26.177

我会尝试改变：

`@symptom_set = current_user.symptom_sets.build(params[:symptom_sets])`

至：

`@symptom_set = current_user.symptom_sets.new(params[:symptom_sets])`

不知道`build`那里能不能工作。

如果它被调用`symptom_sets`以及它是否正在发送嵌套表单属性的参数，还检查终端日志上的参数。

**编辑：**

我真的认为你的参数的名字是`symptom_set`单数的。检查一下。

# jquery - Jquery迭代不按顺序显示

> ID：14716897
> 
> 赞同：0
> 
> 时间：2013-02-05T21:07:56.000
> 
> 标签：jquery, iteration, slideshow, delay, each

我正在制作幻灯片，我希望能够让 jquery each() 循环在每次迭代中工作，并按顺序为每个图像设置动画。

我有以下代码：单击 id 为“back”的图像时，应该开始按顺序淡化每个图像。不幸的是，它会同时淡化所有图像。

注意：元素通过 z-index 堆叠在一起。它似乎在 JSfiddle 中工作，但我已经在 firefox 中对其进行了测试，它只是一次抓取所有正确的元素并执行操作，而不是按顺序淡出它们。

```
$(document).ready(function () {
    $('img#back').click(function () {
        $('span').each(function (index) {
            $(this).delay(1000 * index).fadeTo('slow', 0);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:33:19.050

这是我在标记中放置 div 的顺序，它转换为 JQuery 执行操作的顺序。我的 css z-index 值与此不符，它似乎一下子将它们全部移动了。它实际上是以正确的 html 顺序移动其他人，但错误的 z-index 顺序。为了让它与类似的东西一起工作：

```
<div  id="safety" class="slide"></div>
<div  id="part" class="slide"></div>
<div id="inspection"  class="slide"></div> 
```

z-index 值必须对应如下才能正确执行：#safety : z-index:3, #part : z-index:2,#inspection : z-index:1

# java - 在java中对对象数组进行排序

> ID：14716900
> 
> 赞同：0
> 
> 时间：2013-02-05T21:08:09.383
> 
> 标签：java

我正在尝试制作一个Java应用程序，它允许用户为超市制作目录，然后根据用户输入的代码以升序显示用户输入到目录中的所有产品。我已经搜索过它并发现我可以使用一种称为“排序”的方法，但是我尝试实现它但它不适用于我的问题，我不知道将它放在我的代码中的哪个位置。

我写的代码：2类1类：

```
public class Catalog {

private String description ; 
private String code ;
private double price ;
private String phrase ;

int counter = 0;

private Catalog [] list = new Catalog [100];

public Catalog (String productDescription , String productCode , double    productPrice  , String productPhrase)
{
    description = productDescription;
    code = productCode;
    price = productPrice;
    phrase = productPhrase;
}

public void setDescription (String productDescription)
{
    description = productDescription;
}

public String getDescription ()
{
    return description;
}

public void setCode (String productCode)
{
    code = productCode;
}

public String getCode ()
{
    return code;
}

public void setPrice (double productPrice)
{
    price = productPrice;
 }

public double getPrice ()
{
    return price;
 }

public void setPhrase (String productPhrase)
{
    phrase = productPhrase;
}

public String getPhrase ()
{
    return phrase;
} 
```

第 2 类：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class CatalogTest {
    public static void main(String[] args) throws IOException {
        String name = null;
        String code = null;
        double price = 0.0;
        String phrase = null;
        BufferedReader input = new BufferedReader (new InputStreamReader  (System.in));
        Catalog product = new Catalog(name,code,price,phrase);
        Catalog [] productsArray = new Catalog [100];

        for (int i = 0 ; i &lt; productsArray.length ; i ++)
        {
            System.out.println("Enter product description (or # to stop): ");
            name = input.readLine();
            if (!("#".equals(name)))
            {
                productsArray [i] = product;
                product.setDescription(name);
                System.out.println("Enter product code: ");
                code = input.readLine();
                productsArray [i] = product;
                product.setCode(code);
                System.out.println("Enter product unit price: ");
                price = Double.parseDouble(input.readLine());
                productsArray [i] = product;
                product.setPrice(price);
                System.out.println("Enter product unit phrase: ");
                phrase = input.readLine();
                productsArray [i] = product;
                product.setPhrase(phrase);
                productsArray [i] = new Catalog (name,code,price,phrase);
            }
            else
            {
                System.out.println("Your Catalog:");
                for (int j = 0; j &lt; productsArray.length; j++)
                {
                    if(productsArray[j]!=null)
                    {
                        System.out.printf("%s, %s,$%.2f %s,",
                        productsArray[j].getCode(),
                        productsArray[j].getDescription(),
                        productsArray[j].getPrice(),
                        productsArray[j].getPhrase());
                        System.out.println();
                    }
                }
                break;
            }
        }
    }
} 
```

所以有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:17:23.827

您可以编写自己的 Comparator 然后调用 Arrays.sort 方法：

```
public static class MyComparator implements Comparator<Catalog> {
    @Override
    public int compare( Catalog first, Catalog second ) {
        return first.getCode().compareTo( second.getCode() );
    }        
}

Arrays.sort( productsArray, new MyComparator() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:17:36.397

先说几点：

```
private Catalog [] list = new Catalog [100]; 
```

您的`Catalog`类实际上是目录中的单个产品，而`Catalog[]`您实例化的数组是目录本身。

您可以采取多种选择。如果可以的话，我建议你使用列表而不是数组。您可以使用[`Collections#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)并使您的`Catalog`（`Product`从现在开始）类实现`Comparable`接口。在那里，覆盖该`compareTo`方法并根据代码进行比较。

其他替代方法是使用 a`TreeSet`并定义`Comparator`将用作排序基础的 。我认为您对第一个选项会很好。

另一方面，如果您必须坚持使用数组，请使用 a `Comparator`（如`TreeSet`）和[`Arrays#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)方法。

# java - 在 Swing 的 EDT 中实现线程？

> ID：14716901
> 
> 赞同：3
> 
> 时间：2013-02-05T21:08:10.103
> 
> 标签：java, multithreading, swing, swingworker

我的项目建立在 Java 的 Swing 库之上。它生成显示我的 GUI（正常工作）的 EDT。

**初始化EDT的程序入口：**

```
public final class Main {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Start());
    }

    class Start implements Runnable {
        private Model model = new Model();
        private Controller controller = new Controller(model);
        private View view = new View(controller);

        @Override
        public void run() {
            // Initialize the view and display its JFrame...
        }
    }
} 
```

}

但是，当在我的 GUI 中单击按钮/单选框等时，Controller 类必须对模型执行操作。

我的问题如下：

*   我应该将控制器的代码包装在一个新的 SwingWorker 中吗？
    *   如果不是，我应该将我的模型代码包装在一个新的 SwingWorker 中吗？
*   如果我用线程包装控制器的代码，我是否需要在我的模型中同步共享状态变量？
*   如果我的模型在新线程上运行，通知我的 GUI 更改，这会发生在 EDT 上还是新线程上？

例如：

```
public class Controller {
    public void updateModel() {
        new SwingWorker<Void, Void>() {
            @Override
            protected Void doInBackground() throws Exception {
                model.somethingSomethingSomething();
            }
        }.execute();
    }
}

public class Model {
    public void somethingSomethingSomething() {
        notifyListeners(); // This is going to notify whichever GUI 
                           // is listening to the model.
                           // Does it have to be wrapped with Swing.invokeLater?
    }
}

public class View {
    // This function is called when the model notifies its listeners.
    public void modelChangedNotifier() {
        button.setText("THE MODEL HAS CHANGED"); // Does this occur on the EDT?
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:12:50.550

不是从 更新您的模型`doInBackground()`，而是从`publish()`中间结果更新您的模型`process()`，这在 EDT 上执行。在此[示例](https://stackoverflow.com/a/7054627/230513)中，`JTable`对应于您的`View`和`TableModel`对应于您的`Model`。注意`JTable`听它自己的`TableModel`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T21:44:59.530

您可以在此处阅读：[使用 Java SE 6 中的 SwingWorker 提高应用程序性能](http://www.oracle.com/technetwork/articles/javase/swingworker-137249.html)。简而言之：**所有不影响 UI 的耗时操作必须在另一个线程中完成**。要显示操作结果，您必须返回 EDT。例如，如果您进行数据库搜索，您应该显示一个进度条（通常是无限的）并使用 SwingWorker 开始搜索。要在表格中显示搜索结果，您必须在 EDT 中。或者，您可以使用[foxtrot lib](http://foxtrot.sourceforge.net/docs/index.php)（它可以让你的代码更方便 Swing 而无需重新设计它）。如果您的控制器代码永久更新了 swing 小部件，您应该在 EDT 中执行它，或者至少在 EDT 中执行这些 UI 更新（使用 SwingUtilities.invokeLater，在 SwingWorker 或 swing.Timer 中进行块处理）。所以你的样本是错误的：模型更新应该在 EDT 中是最新的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-05T23:28:20.083

一种替代方法，来自 Java Concurrency in Practice 9.4.2，使用“拆分”或“共享数据模型”。您可以在任何您想要的线程上更新您的业务模型，可能是长期运行的非 EDT 线程。*但是，无需直接调用 notifyListeners() 并担心您在哪个线程上，只需调用 myComponent.repaint()，它将在 EDT 上*排队重绘请求。

然后，在您的方法中的某处`paintComponent()`，您显式地从模型中获取所有新数据，通常在一个名为`modelToView()`

```
 commentTextArea.setText(myModel.getCommentText());
   fooLabel.setText(myModel.getFooText());
   ... 
```

好处是线程不是问题，至少在某些人看来，这“有道理”，并且模型很好地与视图分离。缺点是您每次都在重置所有值。因此，如果您有 100 个 JComponent，则需要设置 100 个东西。此外，视图与模型非常紧密地耦合。

* * *

工作代码示例

@MadProgrammer 和@kleopatra 是正确的，如果视图*直接*包含正在更新的组件，你会得到一个“无限循环的厄运”。证明见

[Demo_14716901_Fails](https://www.assembla.com/code/hastur/subversion/nodes/Hastur_J/src/com/flyingspaniel/so/Demo_14716901_Fails.java)

但是，如果视图与组件*隔离*，则可以避免无限循环。通常，更高级别的视图将包含诸如 JSplitPanes 之类的东西，持有 JScrollPanes，持有 Boxes 或更多 JPanel，持有实际的低级别组件。所以这个要求，IMO，并不是不合理的。

[Demo_14716901_Works](https://www.assembla.com/code/hastur/subversion/nodes/Hastur_J/src/com/flyingspaniel/so/Demo_14716901_Works.java)的工作代码

**为反对者添加了一些评论**：

有些人*想打败 Swing*。他们正在编写仪器控制代码或算法，只想完成他们的工作，而不用担心 EDT、无尽的 SwingWorkers 和 invokeLaters。这种技术可以让他们完成工作。注意到一个重要的警告，它有效。（就我个人而言，我理解并且通常喜欢 Swing，但很多人不理解）。

虽然 Swing 组件是很好的 MVC，但它们通常处于过于微观的层面。“真实”模型不是单个字符串，而是几十个值。“真实”的视图不是一个单一的 JLabel，它是很多 JPanel，每个都有很多组件，结合滚动条、拆分器等。这种技术通常更适合现实世界，让程序员在更高的层次上自然地思考。

至于“不好的做法”，请与 Brian Goetz、Josh Bloch 等一起讨论。好吧，那是“诉诸权威”，但它对我有用。:-)

# ruby - Ruby Iterator - 定义一个接受数组和字符串的方法

> ID：14716909
> 
> 赞同：-2
> 
> 时间：2013-02-05T21:08:27.793
> 
> 标签：ruby

我想定义一个接受数组和字符串的方法，然后它应该找到数组中以提供的字符串开头的所有字符串：example array["Jamaica","Japan","USA","中国”]; 如果提供的字符串是 Ja，那么它应该返回 Jamaica 和 Japan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:26:23.393

尝试使用`keep_if`和正则表达式：

```
["Jamaica","Japan","USA","China"].keep_if { |c| c =~ /^ja/i }

# returns ["Jamaica", "Japan"] 
```

这是一个静态示例。要动态创建正则表达式，请执行`Regexp.new("^#{your_var}", true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:06:00.797

这是矫枉过正，但它会很快为巨大的阵列工作。[幸运的是，我昨天偶然发现了一个名为TRIEZ](https://github.com/luikore/triez)的新的 ruby​​ 高速 trie 库。`gem install triez`然后从他们的示例中运行一点点：

```
require 'triez'
countries = ["Jamaica","Japan","USA","China"]
t = Triez.new
countries.each do |word|
  t[word] = 1
end

ja_countries = []
t.search_with_prefix 'Ja' do |suffix|
  ja_countries += "Ja#{suffix}"
end 
```

它是用 C 语言实现的，所以我敢打赌它在巨大的数组上速度很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:02:31.367

你可以使用许多不同的东西来做到这一点，如果你不想修改数组，你可以使用 Array Class 的 select 方法。

```
["Jamaica","Japan","USA","China"].select{|item| item.match("Ja")} 
```

阵列将完好无损。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T23:28:05.500

Array 最重要的方法不在 Array 的文档中，但在[Enumerable](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)的文档中。您正在寻找一种方法来查找符合某些条件的*所有元素。*

这个条件是字符串*以*某些字符开头。如果一个[字符串对象](http://www.ruby-doc.org/core-1.9.3/String.html)有一个方法，那不是很好吗？

# hadoop - 修复错误后仍然收到“无法从 SCDynamicStore 加载领域信息”

> ID：14716910
> 
> 赞同：11
> 
> 时间：2013-02-05T21:08:29.517
> 
> 标签：hadoop, apache-pig, homebrew

我安装`Hadoop`并`Pig`使用`brew install hadoop`and `brew install pig`.

[我在这里](https://stackoverflow.com/questions/7134723/hadoop-on-osx-unable-to-load-realm-info-from-scdynamicstore)读到，除非您添加以下内容，否则您将收到`Unable to load realm info from SCDynamicStore`错误消息：

```
export HADOOP_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk" 
```

到你的`hadoop-env.sh`文件，我有。

但是，当我运行时`hadoop namenode -format`，我仍然看到：

```
java[1548:1703] Unable to load realm info from SCDynamicStore 
```

在输出之间。

有谁知道为什么我仍然得到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-25T06:00:07.090

正如 dturnanski 建议的那样，您需要使用较旧的 JDK。您可以`hadoop-env.sh`通过将设置更改`JAVA_HOME`为：

```
export JAVA_HOME=`/usr/libexec/java_home -v 1.6` 
```

（注意这里的严重引号。）这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:06:14.387

我对 java 7 有同样的问题。适用于 java 6

# heroku - spymemcached 为 BasicClientCookie 从 SerializingTranscoder 抛出 ClassNotFoundException

> ID：14716912
> 
> 赞同：3
> 
> 时间：2013-02-05T21:08:30.867
> 
> 标签：heroku, httpclient, spymemcached

我正在使用 spymemcached 版本 2.8.1 来读取 cookie 对象，但我一直遇到以下异常：

```
app[web.1]: WARN net.spy.memcached.transcoders.SerializingTranscoder:
                 Caught CNFE decoding 513 bytes of data
app[web.1]: java.lang.ClassNotFoundException
                 org.apache.http.impl.cookie.BasicClientCookie 
```

1.  我正在使用 httpclient 版本 4.1.1：[https](https://dl.dropbox.com/u/6207935/Screen%20Shot%202013-02-05%20at%202.47.19%20PM.png) ://dl.dropbox.com/u/6207935/Screen%20Shot%202013-02-05%20at%202.47.19%20PM.png 里面有`BasicClientCookie`类所以我不太清楚为什么它“找不到”

2.  同样基于传闻，我认为这`BasicClientCookie`已经在 4.1.1 中被标记为可序列化，但确切的 javadocs 有点难以挖掘，老实说......所以这是我的一个假设。无论如何，该异常似乎与序列化无关，但我想我会为了问题的完整性而把它扔掉。

有什么想法可以解决这个问题？

* * *

更新 #1（2013 年 2 月 5 日）

这些可能会说明问题：

1.  [http://code.google.com/p/spymemcached/issues/detail?id=146](http://code.google.com/p/spymemcached/issues/detail?id=146) - 但是在使用 Heroku 时，我不知道如何获得对我的应用服务器文件系统的相同级别的控制......方式它在这里描述。
2.  [http://code.google.com/p/spymemcached/issues/detail?id=155](http://code.google.com/p/spymemcached/issues/detail?id=155) - 不知道如何让 spymemcached 使用自定义 SerializingTranscoder。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T22:09:13.847

这里给出的建议有效：[http ://code.google.com/p/spymemcached/issues/detail?id=155#c2](http://code.google.com/p/spymemcached/issues/detail?id=155#c2)

唯一额外的一点是在将自定义 SerializingTranscoder 应用于 spymemcached 之后对其进行测试

```
MemcachedClient mc =
new MemcachedClient(
new ConnectionFactoryBuilder()
.setTranscoder(new CustomSerializingTranscoder()) // makes it take effect
.setProtocol(ConnectionFactoryBuilder.Protocol.BINARY)
... 
```

# jquery - 将信息框保持在中心并始终位于 div 之上

> ID：14716913
> 
> 赞同：0
> 
> 时间：2013-02-05T21:08:31.140
> 
> 标签：jquery, css

我正在尝试在标记（在本例中为普通 div）上方创建一个理论信息框，该信息框将始终保持在标记上方的中心。我还计划在添加新内容时使信息框的宽度和高度增加，但它必须始终居中于 div 上方。

我已经附加了我的 div，但我没有将它居中，因为我认为这将通过 jquery 完成。

有任何想法吗？

[这是我的代码](http://jsfiddle.net/pufamuf/rKejG/4/)

```
<div id="content" class="marker"><div>

    <div id="infobox" class="infobox">Some Venue Name<div>

.marker
{
    cursor: pointer;
    margin-top: 100px;
    margin-left: 100px;
    height: 41px;
    width: 32px;
    background-image:url('http://i.imgur.com/WFXIqly.png');
}
.infobox{
    margin-top: -50px;
    position:absolute;
    background-color: black;
    color: white;
    padding: 10px;
    max-width: 150px;
    max-height: 20px;
    pverflow: hidden;
}

$("#infobox").appendTo("#content"); 
```

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:32:53.337

对于水平中心，您应该设置

```
 .infobox{
    margin:0 auto;  /*FOR HORIZONTAL CENTER */
  max-width: 150px;
    max-height: 20px;
    } 
```

但是通用的解决方案是为#infobox的垂直和水平位置编写一些javascript代码......为了简单，你可以使用jQuery

```
//for vertical center position

$(#infobox).css({marginTop:parseInt(($("#content").height() / 2) -("#infobox").height() / 2), 10) + 'px'})

//for horizontal center position

$(#infobox).css({marginLeft:parseInt(($("#content").width() / 2) -("#infobox").width() / 2), 10) + 'px'}) 
```

并在每次更改#infobox 的文本时运行此代码

# c++ - 快速字符串搜索？

> ID：14716915
> 
> 赞同：8
> 
> 时间：2013-02-05T21:08:38.577
> 
> 标签：c++, string, performance, search, vector

我有一个字符串向量，必须检查向量中的每个元素是否存在于给定的 5000 个单词列表中。除了两个嵌套循环的普通方法之外，在 C++ 中有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T21:11:40.197

您应该将字符串列表放入[std::set](http://www.cplusplus.com/reference/set/set/)。它是一种针对搜索优化的数据结构。查找给定元素是否在集合中是一个比迭代所有条目快得多的操作。

当您已经在使用 C++11 时，您还可以使用[std::unordered_set](http://www.cplusplus.com/reference/unordered_set/unordered_set/)，它的查找速度更快，因为它是作为哈希表实现的。

**这是否适用于学校/大学：**准备好解释这些数据结构如何变得更快。当你的导师要求你解释为什么使用它们时，“网上有些人告诉我”不太可能让你在课本上贴上标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:13:24.860

您可以将单词列表放在[std::unordered_set](http://www.cplusplus.com/reference/unordered_set/unordered_set/)中。然后，对于向量中的每个元素，您只需要测试它是否在 O(1) 中的 unordered_set 中。您将有一个 O(n) 的预期复杂度（查看评论以了解为什么它只是预期的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T21:23:31.127

你可以对向量进行排序，然后你可以用一个“循环”来解决这个问题（假设你的字典也被排序了），这意味着 O(n) 不计入排序成本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T21:46:11.213

所以你有一个字符串向量，每个字符串都有一个或多个单词，你有一个字典向量，你应该确定字符串向量中的哪些单词也在字典中？字符串向量很烦人，因为您需要查看每个单词。我首先创建一个新向量，将每个字符串拆分为单词，然后将每个单词推入新向量。然后对新向量进行排序并通过`std::unique`算法运行以消除重复。然后对字典进行排序。然后运行两个范围`std::set_intersection`以写入结果。

# debugging - PostgreSQL 9.2 EnterpriseDB for Win7 x-64 的调试器插件不可用吗

> ID：14716919
> 
> 赞同：7
> 
> 时间：2013-02-05T21:08:51.840
> 
> 标签：debugging, plugins, failed-installation, postgresql-9.2, enterprisedb

我按照安装说明 C:\Program Files\PostgreSQL\9.2\doc\installation-notes.html

1.  编辑了 postgresql.conf 文件 `shared_preload_libraries = '$libdir/plugin_debugger.dll'`
2.  在 pgAdmin 中停止并重新启动 PostgreSQL 服务
3.  进入数据库并运行`CREATE EXTENSION pldbgapi;`它并成功返回。

但是当我在 pgAdmin 的 TreeView 中右键单击一个函数时，没有调试选项，并且调试选项在工具菜单上显示为灰色。

> pl/pgsql 调试器
> 
> 该软件包包括 EnterpriseDB 的 pl/pgsql 调试器插件，pgAdmin 中的调试器 UI 可以使用该插件来帮助开发数据库功能。出于性能原因，默认情况下禁用调试器插件。要启用它，请按照以下步骤操作： 1.编辑数据目录中的 postgresql.conf 文件并修改 shared_preload_libraries 配置选项，如果在 Linux 或 Mac 上运行，则如下所示： shared_preload_libraries = '$libdir/plugin_debugger.so'或者如果您在 Windows 上：
> shared_preload_libraries = '$libdir/plugin_debugger.dll'
> 
> 2.重启PostgreSQL服务器。
> 
> 3.运行创建扩展pldbgapi；在您希望使用 psql 或 pgAdmin 查询工具调试的数据库中。

链接： [https ://www.pgadmin.org/docs/dev/debugger.html](https://www.pgadmin.org/docs/dev/debugger.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:27:29.667

必须进入“工具”菜单上的“服务器配置”并`shared_preload_libraries`通过选中旁边的复选框来启用该项目。单独编辑配置文件和弹回数据库服务器不会在数据库中启用调试器。

# emacs - 如何在emacs shell（eshell）中设置环境变量？

> ID：14716922
> 
> 赞同：17
> 
> 时间：2013-02-05T21:09:11.467
> 
> 标签：emacs, environment-variables, eshell

我似乎在任何地方都找不到这个。很多时候我运行带有环境变量集的命令，例如：

```
export BLA=foo && ./somebinary 
```

我该怎么做`eshell`？我认为该命令已被调用`set`，但我不确定如何使用它，上面的等价物是`eshell`什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T21:17:33.360

```
~ $ (setenv "XYZ" "abc")
abc
~ $ ./e.sh
abc
~ $ cat e.sh
echo $XYZ
~ $ (setenv "XYZ" "abc")
abc
~ $ ./e.sh
abc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-28T19:00:07.760

我在我的 bash 配置文件中设置变量，如下所示：

```
export WORK_DIR=/Users/me/Documents/some/dir 
```

然后在 .emacs 我把这个：

```
(let ((work_dir (shell-command-to-string ". ~/.bash_profile; echo -n $WORK_DIR")))
(setenv "WORK_DIR" work_dir)) 
```

# java - 如何将java序列化对象保存到数据库中？

> ID：14716923
> 
> 赞同：0
> 
> 时间：2013-02-05T21:09:13.887
> 
> 标签：java, database, serialization

现在，我在 java 中有 200k 个对象，每个对象都有一个唯一的 ID。我稍后会随机访问它们。所以我想将这些对象保存到数据库中。哪种数据库应该是一个不错的选择？关系数据库（MySQL）还是一些 NoSQL 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:53:16.537

我记得曾经在一个项目中有人建议 ORM 层是不必要的，而且整个设计过于复杂。
他建议应该使用 Object Id/Hash 代码将二进制序列化写入数据库表，并为序列化对象使用 blob。

当序列化类的结构发生变化时，该方法所指出的问题就会发生，那么所有先前序列化的对象实例都需要迁移/演进。

因此，请注意长时间存储对象的二进制/序列化表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:51:36.503

最后，我使用了 Berkeley DB，这是一个只能通过编程语言访问的嵌入式数据库。

# javascript - ember pre4中{{render}}和{{control}}的作用是什么

> ID：14716928
> 
> 赞同：1
> 
> 时间：2013-02-05T21:09:26.893
> 
> 标签：javascript, coffeescript, ember.js

这些车把助手的文档似乎为零。有人可以解释他们的工作以及如何最好地使用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:47:19.420

{{render}} 在当前上下文中使用相同的命名控制器和模板。如果存在同名的视图类，则使用该视图类。如果指定了模型，它将成为该控制器的模型。默认目标将是同一个控制器。

{{control}} 使用命名控制器的新实例，而不是命名控制器的单例。

{{partial}} 使用相同的容器和当前控制器将相同的模板转储到位。模板名称必须以下划线开头。

# html - 验证另一个元素中的 HTML 元素——Watir WebDriver

> ID：14716929
> 
> 赞同：1
> 
> 时间：2013-02-05T21:09:28.217
> 
> 标签：html, watir, watir-webdriver

我正在寻找使用 Watir WebDriver 验证另一个元素中的元素的最佳方法。示例：我想验证是否在包含它的锚点中找到了下面的跨度。

```
<a id="header-main-menu-home" href="/" class="tracked">
"Home" 
    <span class="arrow arrow-up"></span>
</a> 
```

我目前正在使用该位置作为验证，但不认为这是可持续的。

任何帮助深表感谢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:17:00.260

你可以做：

```
browser.link(:id => 'header-main-menu-home').span(:class => 'arrow').present? 
```

这将检查链接是否包含跨度。这是有效的，因为跨度的定位器将保持在链接的范围内。

# mysql - #1005 - 无法创建表格，我查看了其中的每一个小东西......什么都没有

> ID：14716935
> 
> 赞同：0
> 
> 时间：2013-02-05T21:09:43.757
> 
> 标签：mysql, mysql-error-1005

这是代码：

```
 CREATE TABLE phone
(
ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
Name varchar(15) not null,
Stock VARCHAR(15) NOT NULL,
FK_manufacturerid INT NOT NULL, 
INDEX (FK_manufacturerid), 
FOREIGN KEY(FK_manufacturerid) REFERENCES manufacturer (manufacturerid)
ON DELETE NO ACTION
ON UPDATE NO ACTION,
FK_osid INT NOT NULL, 
INDEX (FK_osid), 
FOREIGN KEY(FK_osid) REFERENCES os (osid)
ON DELETE NO ACTION
ON UPDATE NO ACTION,
Camera varchar(15) not null,
Handset varchar(15) not null,
Screen varchar(15) not null,  
Connectivity varchar(15) not null,
BatteryLife varchar(15) not null,
Memory varchar(15) not null,
Messaging varchar(15) not null,
SoundFormat varchar(15) not null,
Price int(5) not null,
Flag varchar(3) not null

)ENGINE=InnoDB 
```

我是 php 的新手（我讨厌它......很多），我真的不明白这里的问题是什么......请帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:16:42.923

[这个问题](https://stackoverflow.com/questions/1749332/mysql-cant-create-table-errno-150?rq=1)暗示这是一个外键问题——您是否检查过所有引用的表和字段是否存在，并且在需要它们的地方有索引？看看那个问题，它可能会对你听起来相似的问题有所启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:16:56.120

您确定创建了作为外键引用的其他表吗？

您作为外键引用的列必须存在于数据库和您引用的表中。

我刚刚在 SQL Fiddle 上使用了以下内容，它可以工作：

```
create table manufacturer
(
  manufacturerid INT NOT NULL AUTO_INCREMENT PRIMARY KEY
) ;

create table os
(
  osid INT NOT NULL AUTO_INCREMENT PRIMARY KEY
) ;

CREATE TABLE phone
(
  ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  Name varchar(15) not null,
  Stock VARCHAR(15) NOT NULL,
  FK_manufacturerid INT NOT NULL, 
  FK_osid INT NOT NULL, 
  Camera varchar(15) not null,
  Handset varchar(15) not null,
  Screen varchar(15) not null,  
  Connectivity varchar(15) not null,
  BatteryLife varchar(15) not null,
  Memory varchar(15) not null,
  Messaging varchar(15) not null,
  SoundFormat varchar(15) not null,
  Price int(5) not null,
  Flag varchar(3) not null,
  INDEX (FK_manufacturerid), 
  FOREIGN KEY(FK_manufacturerid) REFERENCES manufacturer (manufacturerid)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  INDEX (FK_osid), 
  FOREIGN KEY(FK_osid) REFERENCES os (osid)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION

)ENGINE=InnoDB; 
```

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!2/6d54b)

# regex - 友好的博客网址 Isapi 重写正则表达式

> ID：14716937
> 
> 赞同：0
> 
> 时间：2013-02-05T21:09:58.547
> 
> 标签：regex, seo, isapi

我的正则表达式不是很好，我在这里挣扎。我需要正则表达式从这两种格式中获取标题：

```
http://domain.com/blog/title
http://secure.com/domainkey/blog/title 
```

但不匹配任何来自（其中子文件夹可能是多个）：

```
http://domain.com/images/blog/imagename
http://domain.com/images/subfolders/blog/imagename
http://secure.com/domain/images/blog/imagename
http://secure.com/domain/images/subfolders/blog/imagename 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:28:26.080

```
(http:\/\/(?:(?:secure.com\/domainkey)|(?:domain.com))\/blog\/)([\w-]+) 
```

捕获两部分：

1.  基本网址，`http://domain.com/blog/`或`http://secure.com/domainkey/blog/`
2.  标题

用js演示：

```
var regex = /(http:\/\/(?:(?:secure.com\/domainkey)|(?:domain.com))\/blog\/)([\w-]+)/ig;

regex.exec('http://domain.com/blog/blog-title');
// results: ["http://domain.com/blog/blog-title", "http://domain.com/blog/", "blog-title"]

regex.exec('http://secure.com/domainkey/blog/blog-title')
// results: ["http://secure.com/domainkey/blog/blog-title", "http://secure.com/domainkey/blog/", "blog-title"] 
```

假设博客标题仅包含 [a-zA-Z_-]，如果您要捕获更多字符，请修改正则表达式的最后一部分。

# image - 将 Windows Explorer 缩略图捕获为图像 - 另存为 PNG 文件

> ID：14716939
> 
> 赞同：2
> 
> 时间：2013-02-05T21:10:00.843
> 
> 标签：image, png, image-resizing, windows-explorer

我在 Windows 机器上的一个目录中有一大堆图像，我需要将每张照片的一个版本保存为另一个应用程序的缩略图。这些图像中的大多数都很大（至少 600 x 600），所以我想我必须在 Photoshop 中打开每个图像并调整大小，然后保存为较小的版本。

但后来我意识到 Windows 资源管理器用作大图标视图的大小正是我所需要的。如果我能快速将所有这些缩略图直接从 Windows 中保存为照片的副本，但它们出现在资源管理器窗口中的确切大小......如果只是......

或者，我已经看到批量图像调整器（如果这不起作用，我很可能会使用一个）但是完成我在这里的目标的最佳方法是什么？是否有可能以某种方式从 Windows 中提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:18:37.190

在 Vista 或更高版本上，您可以使用[IShellItemImageFactory](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761084%28v=vs.85%29.aspx)从 shell 缓存中检索缩略图，或者在必要时生成缩略图。对于 XP 和更早版本，您可以调用[IExtractImage](http://msdn.microsoft.com/en-us/library/bb761848%28VS.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:14:06.767

Windows 将每个目录中的缩略图存储在一个名为 thumbs.db 的文件中。有几个代码项目可以让您从该文件中提取图像。

[http://code.google.com/p/thumbs-viewer/](http://code.google.com/p/thumbs-viewer/)

或者......就像你说的你可以使用批处理类型的软件。如果您找不到批处理软件，如果您不关心 exif 数据或需要过多控制图像质量，这在 C# 中是一件相当简单的事情。

# jquery - 在更改事件上初始化 Colorbox

> ID：14716948
> 
> 赞同：0
> 
> 时间：2013-02-05T21:10:24.960
> 
> 标签：jquery

当访问者单击值为 1001 的选项时，我想显示一个灯箱：

```
$("#v65-cart-shipping-details select option[value='1001']").click(function() {
    $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
}); 
```

它不适用于 Mac。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:16:08.330

尝试以下操作：

```
$(function(){
    $("#v65-cart-shipping-details select").change(function() {
        if (this.value == '1001')
        $.colorbox({width:"580px", inline:true, href:"#subscribe_popup"});
    });
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:15:30.743

在更改上绑定事件`<select>`，而不是在`<option>`点击上。

# javascript - (google/openlayers)地图的可交换实现

> ID：14716952
> 
> 赞同：0
> 
> 时间：2013-02-05T21:10:38.737
> 
> 标签：javascript, google-maps-api-3, openlayers, jasmine, karma-runner

我正在尝试编写一个 JavaScript 来从表中读取信息并将标记放在地图上，具体取决于数据（坐标隐藏在该表中）。对于每一行，地图上都会有一个标记。

我已经用 google-maps-apiv3 编写了脚本，但我想独立于 google，并希望能够切换到 OpenLayers。我没有在 OpenLayers 上投入太多时间，但是我在一些示例中看到的标记非常难看：S。另一方面，谷歌地图有免费使用的限制和界限。

您将如何编写 JavaScript 来替换实现？我想将我的业务逻辑（表到地图+标记）分离出来，将其与地图实现分离。在什么文件上以及如何绑定/导入实现？如何保持 JavaScript 可测试（我使用 Jasmine+Testacular）？如果可能的话，我会使用嘲笑。

仅供参考：我是一个 Java 人，也许我的 OO 头脑还没有看到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:33:45.843

你在谈论一个[抽象层](http://en.wikipedia.org/wiki/Abstraction_layer)。您需要做的是确定地图所需的功能：

*   标记
*   信息窗口
*   地图

您知道需要的任何其他功能都应添加到列表中。然后，对于每个项目，您将按照[桥接模式](http://en.wikipedia.org/wiki/Bridge_pattern)创建一个抽象表示。例如，您将拥有一个`map`封装 a`google.maps.Map`和/或`OpenLayers.Map`.

```
function MartinL.Map()
{
    var map;
    if(google && google.maps) //google maps api has been loaded
        map = new google.maps.Map();
    else
        map = new OpenLayers.Map('map');
}

var myMap = new MartinL.Map(); 
```

这显然是一个过于简单的示例，但您要做的是将 google 地图和 OpenLayer 地图实现包装在您的抽象层中。重构您现有的代码以仅使用您的抽象层，然后您可以随时切换库。

# javascript - 当 length = 1 时 variable.length 未定义

> ID：14716956
> 
> 赞同：0
> 
> 时间：2013-02-05T21:10:47.000
> 
> 标签：javascript

我正在使用 js 来提醒变量（字段）的长度，但是当我的 field.length 应该等于 1 时会崩溃。

当 field.length 大于 1 时，一切正常。有任何想法吗？

这是 HTML 代码

```
<form>
<someloop>
<input class="checkbox" type="checkbox" name="mark" value="#recID#">
</someloop>
<button class="btn btn-danger" type="button" onClick="dlte(mark);" >Delete</button>
</form> 
```

JS代码：

```
function dlte(field){
        alert(field.length);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:16:39.083

当您在 onClick 处理程序中尝试时，您无法传递 DOM 节点的引用。

尝试：

```
onclick="dlte('mark');" 
```

和功能：

```
function dlte(field) {
    var nodes= document.getElementsByName(field);
    alert(nodes[0].length);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:16:25.557

```
<button class="btn btn-danger" type="button" onclick="dlte('mark')" >Delete</button>    

function dlte(field){
    alert(document.getElementsByName(field).length);
} 
```

如果你的`mark`名字是 html 元素的名字，你应该使用`getElementsByName`属性来获取长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:38:38.323

这是我为我的问题找到的解决方案

```
function(filed){
 'var $srt = $(field); 
  alert($srt.length);' 
} 
```

另外，给@DaHaka 和@Steve H.

您建议我必须在我的变量 ( `'mark'`) 周围添加单引号，但这最终由于某种原因使我的代码停止运行。当我把它们取下来时，代码开始按我的意愿工作。无论如何，感谢您的帮助和建议！:)

# c# - 使用 IEnumerable<> 并使用其类型创建属性

> ID：14716957
> 
> 赞同：-1
> 
> 时间：2013-02-05T21:10:47.180
> 
> 标签：c#, linq, interface, viewmodel, ienumerable

我没有太多使用 Linq，也没有使用 IEnumberable 类。以下是我遇到的问题的代码和解释。

```
public class EmailService : IEmailService
{
    #region Constructors

    #endregion

    #region Properties
    [ImportMany]
    public IEnumerable<IEmailAddressesProvider> AddressProviders { get; set; }

    #endregion 
```

这些是我需要在 EmailService 类中使用的属性。这是电子邮件地址提供商的集合。

我需要使用其中存储的内容并将其连接到 ViewModel，就像我在这段代码的下一部分中对这些其他属性所做的那样。

```
IUserInteractionService uiService = AllianceApp.Container.GetExportedValue<IUserInteractionService>();
            IEmailSetupProvider provider = new EmailSetupProvider();
            EmailView ev = AllianceApp.Container.GetExportedValue<EmailView>();

            ev.ViewModel.ProviderName = AddressProviders;
            ev.ViewModel.Provider = provider;
            ev.ViewModel.Bcc = bccAddress;
            ev.ViewModel.Cc = ccAddress;
            ev.ViewModel.ToAddress = toAddress;
            ev.ViewModel.Body = body;
            ev.ViewModel.Subject = subject;
            ev.ViewModel.Attachments = attachments;

            return uiService.ShowDialog(ev, RegionNames.MainRegion);
        } 
```

它说“地址提供者是我试图创建这个属性的地方。

IEmailAddressesProvider 接口：

```
public interface IEmailAddressesProvider
{
    string ProviderName { get; }
    IEnumerable<EmailAddress> GetEmailUsers();
} 
```

GetEmailUsers 方法（以防万一）：

```
[Export(typeof(IEmailAddressesProvider))]
public class EmailAddressProvider : IEmailAddressesProvider
{
    #region Private Properties

    private static readonly IEncryptionService encryptionService = AllianceApp.Container.GetExportedValue<IEncryptionService>();

    #endregion

    public string ProviderName
    {
        get { return "Alliance Users"; }
    }

    public IEnumerable<EmailAddress> GetEmailUsers()
    {
        IUserRepository userRepo = AllianceApp.Container.GetExportedValue<IUserRepository>();
        IEnumerable<User> users = userRepo.GetAllUsers().Where(a => a.IsDeleted == false).OrderBy(a => a.UserID).AsEnumerable();

        List<EmailAddress> AddressList = new List<EmailAddress>();

        foreach (var user in users)
        {
            if (user.DisplayName != null && user.EmailAddress != null && user.DisplayName != string.Empty && user.EmailAddress != string.Empty)
                AddressList.Add(new EmailAddress() { DisplayName = encryptionService.DecryptString(user.DisplayName), Email = encryptionService.DecryptString(user.EmailAddress) });
        }

        AddressList.OrderBy(u => u.DisplayName);

        return AddressList;
    }
} 
```

ProviderName 专用代码（在 EmailAddressesProvider.cs 中使用）：

```
[Export(typeof(IEmailAddressesProvider))]
public class EmailAddressProvider : IEmailAddressesProvider
{
    #region Private Properties

    private static readonly IEncryptionService encryptionService = AllianceApp.Container.GetExportedValue<IEncryptionService>();

    #endregion

    public string ProviderName
    {
        get { return "Alliance Users"; }
    }
} 
```

If you need to see anymore of my code, such as the interfaces or the viewmodel, please let me know. Any help would be appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:42:09.433

As far as your example is concerned, you can think of `IEnumerable<T>` as being pretty much synonymous with `List<T>`: it's a collection of objects; it could be just one, it could be none, it could be a hundred. There's more to `IEnumerable` than that, but for your purposes that's as much as you need to think about.

In this code:

```
[ImportMany]
public IEnumerable<IEmailAddressesProvider> AddressProviders { get; set; } 
```

you're asking MEF to gather all the exported implementations of `IEmailAddressesProvider`. What you get back is a collection of objects: even if it finds just one, you still get a collection with only one element. In this later line:

```
ev.ViewModel.ProviderName = AddressProviders; 
```

I'm guessing that the left hand side is expecting a `string`, but the right hand side is a collection of `IEmailAddressesProvider`. Apart from the fact that you probably actually want the `ProviderName` property of the `IEmailAddressesProvider` and not the whole object, you also need to say which object in the collection to use. There are two ways you might deal with this:

1.  **If you know that there will only be one implementation of `IEmailAddressesProvider`**, then change `ImportMany` to `Import` like so

    ```
    [Import]
    public IEmailAddressesProvider AddressProviders { get; set; } 
    ```

    and change that other assignment to `ev.ViewModel.ProviderName = AddressProviders.ProviderName`. Note that this will break as soon as you export a second implementation of `IEmailAddressesProvider`, so only do this if you really know there can only be one.

2.  **If there may be several implementations of `IEmailAddressesProvider`**, then you need to find the specific one you want. You would query the `AddressProviders` collection with something like `FirstOrDefault` (as the other answers have said) to find the right object and then use the `ProviderName` property from that result. It's not possible to say much more about the query you need from the code you've provided.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:26:28.327

I'm just guessing, you want a single `IEmailAddressesProvider` from the `AddressProviders` which is determined by the `ProviderName` property in the interface and the variable `provider`.

If that is true, you can use [`Enumerable.FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx) which returns the first matching AddressProvider or `null` if no was found with the given `ProviderName`:

```
// ...
ev.ViewModel.ProviderName = AddressProviders
    .FirstOrDefault(ap => ap.ProviderName == yourProviderName);
ev.ViewModel.Provider = provider;
// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:38:34.493

If you are having problems with the above answer try using one of these.

```
ev.ViewModel.ProviderName = AddressProviders.Where(p=> p.ProviderName == provider).Single();
ev.ViewModel.ProviderName = AddressProviders.Where(p=> p.ProviderName == provider).First(); 
```

# css - MediaElement.js 音频播放器音量控制在 Chrome 中未对齐

> ID：14716958
> 
> 赞同：0
> 
> 时间：2013-02-05T21:10:50.237
> 
> 标签：css, google-chrome, wordpress, mediaelement.js

我将 MediaElement.js WordPress 插件用于一个简单的音频播放器。在 Chrome 中，音量控制显示在播放器下方，从右侧缩进。音量控制在 Safari 和 Firefox 中的位置正确（我没有机会在 IE 中测试它）。

这是出现问题的页面之一的链接：http: [//www.coffeecrossroads.com/coffee-and-the-arts/music/bob-dylan-one-more-cup-of-coffee/](http://www.coffeecrossroads.com/coffee-and-the-arts/music/bob-dylan-one-more-cup-of-coffee/)

我希望这可以通过 CSS 轻松解决，但我还没有弄清楚如何。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-05T09:33:16.313

我遇到了同样的问题。看来ChiChou的回答（[https://stackoverflow.com/a/17583839/4327972](https://stackoverflow.com/a/17583839/4327972)）终于用上了。如果您至少将 mediaElement 更新到 31/08/2014 (2.15.1) 的版本。你应该没事！ [https://github.com/johndyer/mediaelement/issues/483](https://github.com/johndyer/mediaelement/issues/483) （发布这个是因为我看到它还没有在你的网站上修复）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:02:34.707

我在 Mac 上使用 mediaelement 和 Chrome 时遇到了同样的问题。在仔细检查了我所有的 CSS 以找到问题后，我发现我的文本大小减小了，这导致它崩溃。我使用 CMD-0 将文本大小调整为默认值，并将所有内容重新对齐。

# breeze - Breeze 项目的未正确加载域类上的虚拟属性

> ID：14716960
> 
> 赞同：0
> 
> 时间：2013-02-05T21:10:57.110
> 
> 标签：breeze

我的域类上有一个虚拟的 ICollection 属性。如果我离开该属性，则在查询后由微风生成的项目没有 entityaspect 属性。如果我删除虚拟，一切正常。

例子：

这是一个产品 Poco：

```
public class Product : BaseEntity  
{

    [Required]
    public string Name { get; set; }       

    public decimal Price { get; set; }

    public string Description { get; set; }

      //  if i leave the property like this, everything works fine.

    public  ICollection<Category> Categories { get; set; }

     //if i do something like this, the entities are loaded by breeze, 
       but they  got  no  entity aspect property 

    public virtual  ICollection<Category> Categories { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T00:25:35.133

确保您在`DbContext`. 您可以执行以下操作：

```
 this.Configuration.LazyLoadingEnabled = false;
   this.Configuration.ProxyCreationEnabled = false; 
```

或者您可以使用`EFContextProvider`以下方式访问`DbContext`：

```
 var contextProvider = new EFContextProvider<MyDbContext>();

 contextProvider.Context //this is the DbContext 
```

# r - 主成分分析，成分标签？

> ID：14716965
> 
> 赞同：2
> 
> 时间：2013-02-05T21:11:17.353
> 
> 标签：r, pca

我有一个包含 17 列（每列一个基因）和 34 行（每行一个患者）的数据框

```
Patient EXO1 MLH1 MSH2 MSH3 MSH6 PCNA PMS1 PMS2 POLE POLE2 POLE3 POLH RFC2 
1651109    0    0    1    1    1    1    1    1    1     0     1    0    0      
1651648    0    1    1    1    1    0    1    0    1     0     0    1    1  
........ 
```

例如，数据框的名称是`testdb`. 然后我跑

```
res=princomp(testdb);  
summary(res); 
```

这表明

```
Importance of components:  
                          Comp.1    Comp.2    Comp.3     Comp.4     Comp.5  
Standard deviation     0.6577676 0.4757815 0.4138278 0.39002636 0.37679135  
Proportion of Variance 0.2822533 0.1476757 0.1117206 0.09923892 0.09261812  
Cumulative Proportion  0.2822533 0.4299290 0.5416497 0.64088859 0.73350672  
.... 
```

名字是愚蠢的`comp.1` `comp.2` `comp.3`......我怎样才能将名字映射回基因名称？我知道`biplot(res)`会在输出图上打印一些基因，但这显然不是获取基因名称的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T22:56:52.567

*尽管大部分内容已在评论中说明，但我将其转变为答案。*

主成分分析的成分是原始变量的线性组合。所以成分和基因之间没有一对一的映射关系。除特殊情况外，每个组成部分都描述了多个基因。其中一些具有积极的贡献，而一些具有消极的贡献。有些绝对值大，有些绝对值小。您可以从加载矩阵中看到这些贡献：输入`loadings(res)`，您将看到每个组件的组成。

您可以在负载矩阵中的特定组件的列中找到具有最大绝对值的基因。这样，您就可以确定每个组件的“主要贡献者”之类的东西。但除非该贡献*非常*接近于 1，否则将该组件视为该基因的同义词充其量只会产生误导。如果您想根据单个基因进行分析，PCA 不是正确的工具。

如果你确定你想要“主要贡献者”尽管有上述警告，下面的代码可以做到这一点：

```
l <- loadings(res)
rownames(l)[apply(l, 2, function(x) which.max(abs(x)))] 
```

# javascript - 从数组中删除空字符串（正则表达式） - Javascript

> ID：14716966
> 
> 赞同：0
> 
> 时间：2013-02-05T21:11:19.930
> 
> 标签：javascript, arrays, parsing

我的项目中有以下代码：

```
for(i = 0; i < inputArr.length; i++) {
    if(accountsBool) {
        inputArr[i] = inputArr[i].split(/\s+/);
        if (inputArr[i] == "" || !inputArr[i].match(/[^\s]/)) {
            inputArr.splice(i,1);
        }
    }
} 
```

我会尽力解释这个问题...

我需要这部分代码来删除所有空格和空字符串，但是这些行......

```
inputArr[i] = inputArr[i].split(/\s+/); 
```

和...

```
if (inputArr[i] == "" || !inputArr[i].match(/[^\s]/)) {
    inputArr.splice(i,1);
} 
```

...不要一起工作。我收到错误消息“对象不支持此属性或方法”。如果我注释掉一个并与另一个一起运行代码，它似乎工作正常。语法似乎也是正确的。有任何想法吗？

inputArr 是从文本区域解析的字符串数组。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:22:32.373

`.split()`返回一个数组，它不适用于`.match()`.

> *我需要这部分代码来删除所有空格和空字符串，但是这些行......*

您似乎是说应该从数组中删除不包含至少一个非空白字符的项目，并且应该更新任何剩余的项目以删除任何空白（但保留其他字符）。如果是，`.replace()`先用删除空格，然后测试是否删除该项。

**请注意，如果您`.splice()`在循环中使用，则需要调整迭代器变量`i`以允许缺少元素 - 或者更简单地，向后循环。**

```
for(i = inputArr.length - 1; i >= 0; i--) {
    if(accountsBool) {
        inputArr[i] = inputArr[i].replace(/\s/g,"");
        if (inputArr[i] === "") {
            inputArr.splice(i,1);
        }
    }
} 
```

如果您说应该删除不包含至少一个非空白字符的项目，但您想在其余元素中保留空白，请执行以下操作：

```
for(i = inputArr.length - 1; i >= 0; i--) {
    if(accountsBool) {
        if (!/[^\s]/.test(inputArr[i])) {
            inputArr.splice(i,1);
        }
    }
} 
```

另请注意，如果您的循环中没有其他处理，那么您应该将`if(accountsBool)`测试移到循环之前，而不是在每次迭代时都进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:42:40.620

`.filter()`如果要删除空字符串或仅空格的条目，请在数组上使用 a 。

```
inputArr = inputArr.filter(function(item) {
    return accountsBool && Boolean(item.trim())
}); 
```

* * *

请注意以下事项：

*   这用新数组替换旧数组
*   `.filter()`对于旧浏览器，您需要一个 shim
*   `.trim()`对于旧浏览器 ，您需要一个 shim
    *   你可以使用`item.replace(/^\s+|\s+$/g, "")`而不是`item.trim()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:29:20.793

您需要在您描述的循环内有另一个循环，该循环将通过该`split`方法生成的数组。正如评论者所说，`match`使用数组是不可能的。所以像：

```
for (var i = 0; i < inputArr.length; i++) {
    if(accountsBool) {
        inputArr[i] = inputArr[i].split(/\s+/); // produces an array
        for (var j = 0; j < inputArr[i].length; j++) {
            if (inputArr[i][j] === "" || !inputArr[i][j].match(/[\S]/)) { // check each string in the array for empty or space
                // inputArr.splice(i,1);
            }
        }
    }
} 
```

RegEx的`[^\s]`部分也可以重写`[\S]`，如上。

但目前还不完全清楚你要做什么`splice`（因此我在上面评论过）。如果您试图完全摆脱字符串中的所有空间，那么您的代码可能会简单得多——您只需要使用该`replace`方法。

如果您试图摆脱*过多*的空格，那么您的代码可能会更简单：只需`replace`在每个字符串上使用 ，`/\s+/`作为您的 RegEx 搜索模式并`' '`作为您的替换。之后可以使用您已有的简单条件检查删除空字符串...

```
for (var i = 0; i < inputArr.length; i += 1) {
    if (accountsBool) {
        inputArr[i] = inputArr[i].replace(/\s+/, ' '); // replaces all multiple spaces with one space
        if (!inputArr[i]) { // check each string in the array for empty or space
                inputArr.splice(i,1);
        }
    }
} 
```

例如，这会给您留下单词之间有空格的字符串，但不会超过一个空格（例如，它应该摆脱双倍间距和制表符间距）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T21:19:16.663

String.split() 将字符串拆分为一个数组，稍后您将其视为字符串。您可以使用`replace`函数而不是拆分：

```
inputArr[i] = inputArr[i].replace(/\s+/g, ''); 
```

然后：

```
if (inputArr[i] == "") {
    inputArr.splice(i,1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:19:51.203

如果你更换

```
inputArr[i] = inputArr[i].split(/\s+/); 
```

和

```
inputArr[i] = inputArr[i].replace(/\s/g,''); 
```

这应该可以解决一个问题。

此外，`!inputArr[i].match(/[^\s]/)`这是多余的，因为您已经从该输入数组值中删除了所有空格。

最后，您需要在拼接数组时减少索引，或者以相反的顺序迭代。

这是一个要测试[的工作小提琴。](http://jsfiddle.net/briguy37/mvHu3/)

# windows-phone-7 - AutoFocusComplete 事件 windows phone

> ID：14716971
> 
> 赞同：0
> 
> 时间：2013-02-05T21:11:32.757
> 
> 标签：windows-phone-7, windows-phone-8, microsoft-tag

因此，我正在尝试开发一个利用 Microsoft TAG 技术的 Windows Phone 移动应用程序。

我从使用 Microsoft TAG SDK 提供的 TagSdkSample 项目的基础开始。

调试时我无法让程序吐出任何东西（我正在我的 Windows 8 手机上调试），我假设它与自动对焦功能有关（它识别 TAG，但在拍摄照片之前变得非常模糊）。在代码中有一条评论提到这是自动对焦工作的不好方式：

```
 private void GetImageAndDecode()
    {
        // This is not a good way to auto focus. It is better to have an AutoFocusCompleted event
        // handler to start capturing after focus is made. This sample code is not for
        // full application demonstration.
        camera.Focus();
        camera.GetPreviewBufferArgb32(previewPixels);
        imageToDecode = new ImageToDecode(previewPixels, ImageFormat.ARGB32, previewWidth, previewHeight);
        TagContext.Current.ScanFromFrame(imageToDecode);
    } 
```

我将如何在此代码中实现该事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:32:35.157

将以下行添加到`PhotoCamera`对象初始化中：

```
camera.AutoFocusCompleted += new EventHandler<CameraOperationCompletedEventArgs>(Camera_AutoFocusCompleted); 
```

然后添加以下方法：

```
void cam_AutoFocusCompleted(object sender, CameraOperationCompletedEventArgs e) 
{ 
    // Do what you want here
} 
```

# c - C、Bash - 运行 bash 脚本并在同一个文件上并行工作的进程

> ID：14716978
> 
> 赞同：2
> 
> 时间：2013-02-05T21:11:45.400
> 
> 标签：c, bash, unix, process, fork

这就是我需要的：我制作了一个 C 程序，它派生了 2 个孩子：P1、P2 我还制作了一些 bash 脚本。

我需要 P1 来运行 script1.sh，需要 P2 来运行 script2.sh。目前我正在使用该功能`system("script_name.sh")`或`system("script_name &")`​​使其异步，我不知道这是否是正确的选择，因为现在它们不能按我想要的方式工作。顺便提一句：

script1.sh 这样做：

```
# it search a word in a dictionary and write in a file the exact line in which that 
# word is in the dictionary, i.e. word="a" is in position "1" so 
# it will write "1" in the first line of file.

 while read line; 
 do 
 sleep 1
     TRASFORMATA=$( echo "$line" | tr "[:upper:]" "[:lower:]" | sed -e 's/ //g' )  
     echo "WORDS TO SEARCH IN DICTIONARY : $TRASFORMATA:" 
     WORD=$( fgrep -w -i "$TRASFORMATA" "$dictfile" )  # got from dictionary
     echo $WORD 
  if [ -z "$WORD" ]  ## if it's not in dictionary
  then
     echo "$WORD not found!" 
     echo 
  else              
     echo "Word and relative line found.........."
##### if found, it write the relative line to a file #####
     LINE1=$( fgrep -w -n "$WORD" "$dictfile" | sed s/:$WORD//g )   
     echo "$LINE1" >> "$FILE_OUTPUT"       
  fi
 done < "$FILE_INPUT" 
```

script2.sh 这样做：

```
# delete lines starting with letter 'z' FROM SAME FILE THAT USES script1.sh
sleep 1
while true;
do
sleep 2
echo "DELETING WORDS "
sed -i '/^z/d' "$FILE_OUTPUT"
done 
```

**他们在同一个文件（.txt）上工作。** 我想要的是同时运行它们**并且**它们必须轮流工作，我的意思是在P之后！已经用它的 script1 读取了第一行，P2 必须运行它的 script2，与第二行、第三行等相同......

我怎样才能从 C 程序中做到这一点？重要的是每个进程都运行一个脚本，并且这些脚本必须并行交替执行。 **通过这种方式，我达到了我的目标，即让 2 个进程一起产生一个输出，以便让三分之一的进程读取该输出并处理它！**

我希望这很清楚

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:32:40.163

交错处理进程的实际执行是非常尴尬的。

要交错输出，让每个脚本将其 STDOUT 写入管道，然后编写一个小程序，依次从每个管道读取一行，并将其写入输出。

然而，这似乎是一个很长的问题。如果两个进程确实需要同步——每个进程依次执行一个处理步骤——最简单的方法是让一个进程按顺序执行命令。并发很难——如果你不需要它就不要使用它。

# .net - 使用 ServiceStack JsonSerializer 反序列化包含 Dictionary 属性的类型

> ID：14716979
> 
> 赞同：3
> 
> 时间：2013-02-05T21:12:11.903
> 
> 标签：.net, serialization, deserialization, servicestack, msgpack

下面的代码片段显示了我可以实现此目的的两种方法。第一个是使用[MsgPack](https://github.com/msgpack/msgpack-cli)，第二个测试是使用[ServiceStack 的 JSONSerializer](https://github.com/ServiceStack/ServiceStack.Text)。第二个更有利，因为 ServiceStack.Text JSONSerializer 在我工作的整个项目中都使用。

为什么使用 Dictionary<Street,HashSet<int>> 时下面的第二个测试会失败？

```
[TestFixture]
public class NeighbourhoodTests
{
    private Neighbourhood _myNeighbourhood;
    private Street _street;

    [SetUp]
    public void SetupOnEachTest()
    {
        _street = new Street() { Name = "Storgate" };
        _myNeighbourhood = SetupMyNeighbourhood(_street);
    }

    private static Neighbourhood SetupMyNeighbourhood(Street street)
    {
        var myNeighbourhood = new Neighbourhood();
        myNeighbourhood.Addresses = new Dictionary<Street, HashSet<int>>();

        myNeighbourhood.Addresses.Add(street, new HashSet<int>(new[] { 1, 2, 3, 4 }));
        myNeighbourhood.LocalCouncilName = "Stavanger";
        myNeighbourhood.RegionName = "Rogaland";
        return myNeighbourhood;
    }

    [Test]
    public void TestNeighbourhoodClass_OnMsgPackDeserialization_AddressesShouldEqualOriginalInput()
    {
        ObjectPacker packer = new ObjectPacker();
        var packedMessageBytes = packer.Pack(_myNeighbourhood);
        var unpackedMessage = packer.Unpack(packedMessageBytes);

        Assert.That(unpackedMessage.RegionName, Is.EqualTo("Rogaland"));
        Assert.That(unpackedMessage.Addresses, Is.Not.Empty);
        Assert.That(unpackedMessage.Addresses.Keys.Any(key => key.Name.Equals(_street.Name)));
    }

    [Test]
    public void TestNeighbourhoodClass_OnServiceStackJsonTextDeserialization_AddressesShouldEqualOriginalInput()
    {
        string serialisedMessage = JsonSerializer.SerializeToString(_myNeighbourhood);
        var deserializedMessage = JsonSerializer.DeserializeFromString(serialisedMessage);

        Assert.That(deserializedMessage.RegionName, Is.EqualTo("Rogaland"));
        Assert.That(deserializedMessage.Addresses, Is.Not.Empty);
        Assert.That(deserializedMessage.Addresses.Keys.Any(key => key.Name.Equals(_street.Name)));
    }
}

public class Neighbourhood
{
    public Dictionary<Street, HashSet<int>> Addresses { get; set; }
    public string LocalCouncilName { get; set; }
    public string RegionName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:48:55.420

啊，感谢@mortenrøgenes-原来我必须将 Neighborhood 类的 Addresses 属性包装到它自己的类型中：

```
public class Addresses
{
    public Street Street{ get; set; }
    public HashSet<int> HouseNumbers { get; set; }
}
public class Neighbourhood
{
    public Addresses { get; set; }
    public string LocalCouncilName { get; set; }
    public string RegionName { get; set; }
} 
```

这样，ServiceStack JSONSerializer 就可以工作并且测试会通过。

# c# - 多线程的问题

> ID：14716980
> 
> 赞同：-1
> 
> 时间：2013-02-05T21:12:13.900
> 
> 标签：c#, multithreading

我的应用程序有问题。在 1 个线程中效果很好，但是当我更改线程 > 1 时它无法正常工作。

我有 3 个列表：

```
List<string> urls = new List<string>();
List<string> passwords = new List<string>();
    struct Proxy
    {
        public static List<string> proxies = new List<string>();
        public static string type;
    } 
```

我需要所有线程都采用第一个 url，所有线程都采用第一个代理，每个线程都从列表中获取 unik(next) 密码。如果前 5 个线程采用 5 个密码，则代理更改为下一个，这些线程采用接下来的 5 个唯一通道。如何解决这个问题？

```
 Thread[] thr;
    static object locker = new object();
    int good_auth, bad_auth, j;

    private void button1_Click(object sender, EventArgs e)
    {
        decimal value = numericUpDown2.Value;
        int i = 0;
        int k = (int)(value);
        thr = new Thread[k];
        for (; i < k; i++)
        {
            thr[i] = new Thread(new ThreadStart(go));
            thr[i].IsBackground = true;
            thr[i].Start();
        }
    }

    public void go()
    {
        string urlANDlogin = "";
        for (int url_index = 0; url_index < urls.Count; url_index++)
        {
            urlANDlogin = urls[url_index];
            string proxy = "";
            string password = "";

            if (Proxy.proxies.Count != 0)
            {
                if (checkBox1.Checked)
                    Proxy.type = "http";
                else if (checkBox2.Checked)
                    Proxy.type = "socks5";
                else
                    Proxy.type = "none";
            }

            VB vb = new VB(urlANDlogin, Proxy.type);
            for (int proxy_index = 0; proxy_index < Proxy.proxies.Count; proxy_index++)
            {
                lock (locker)
                {
                    if (Proxy.proxies.Count == 0)
                    {
                        break;
                    }
                    else
                        proxy = Proxy.proxies[proxy_index];
                }
                vb.Proxy(proxy);
                for (int i = 0; i < 5; i++)
                {
                    lock (locker)
                    {
                        if (passwords.Count == 0)
                        {
                            break;
                        }
                        else
                        {
                            password = passwords[j];
                            j++;
                        }
                    }
                    string login = vb.Auth(password);
                    if (login == "Good")
                    {
                        lock (locker)
                        {
                            good_auth++;
                            log_good(good_auth);
                        }
                        break;
                    }
                    else
                    {
                        lock (locker)
                        {
                            bad_auth++;
                            log_bad(bad_auth);
                        }
                    }                            

                }
                lock (locker)
                {
                    log_left_proxy(Proxy.proxies.Count);
                    j = 0;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:37:33.507

我建议使用TPL 的[Data Parallelism](http://msdn.microsoft.com/en-us/library/dd537608.aspx)。

就像是：

```
Parallel.ForEach(urls, url => Process(url)); 
```

除了所有其他注释之外，您不能从非 UI 线程访问 Control。因此，您必须在 click 方法中获取`checkBox1`and的值。`checkBox2`

# python - NumPy linspace 舍入错误

> ID：14716981
> 
> 赞同：6
> 
> 时间：2013-02-05T21:12:16.460
> 
> 标签：python, numpy, floating-point

有人可以用 来解释这个舍入问题`numpy.linspace`吗？

```
import numpy as np

np.linspace(0, 1, 6) == np.around( np.linspace(0, 1, 6), 10 )
# array([ True,  True,  True, False,  True,  True], dtype=bool) 
```

这就是我到达这里的方式...

```
import numpy as np

## Two ways of defining the same thing
A = np.array([ 0., 0.2, 0.4, 0.6, 0.8, 1\. ])
B = np.linspace(0, 1, 6)

## A and B appear to be the same
A # array([ 0., 0.2, 0.4, 0.6, 0.8, 1\. ])
B # array([ 0., 0.2, 0.4, 0.6, 0.8, 1\. ])

## They're not
A == B # array([ True, True, True, False, True, True], dtype=bool)
A - B  # array([ 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, -1.11022302e-16, 0.00000000e+00, 0.00000000e+00])

## Gotta round to get my expected result
C = np.round( np.linspace( 0, 1, 6 ), 10 )
C      # array([ 0., 0.2, 0.4, 0.6, 0.8, 1\. ])
A == C # array([ True, True, True, True, True, True], dtype=bool) 
```

我定义的方式`B`似乎很无辜。. . 这个四舍五入的问题会不会让我们到处都感到困惑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:56:00.303

它并不漂亮，但它的浮点方式是，你将不得不学会忍受它。这就是你奇怪的结果的来源：

```
>>> a = np.float(1)
>>> a /= 5
>>> a
0.2
>>> a*3
0.6000000000000001 
```

你必须[`np.allclose`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html)帮助你处理这类事情，但如果你对浮点比较不自律，那么是的，它会一遍又一遍地咬你。

# php - 防止 MySQL 用空字符串更新列？

> ID：14716986
> 
> 赞同：0
> 
> 时间：2013-02-05T21:12:28.800
> 
> 标签：php, mysql, validation

发现这个答案[很有帮助](https://stackoverflow.com/questions/9737752/how-do-i-prevent-mysql-from-updating-column-with-empty-string)，但是我有大约 100 个需要更新的输入。

我目前有这个代码来清理这些值：

```
foreach($_POST as $key => $value) {
$data[$key] = filter($value);} 
```

我是否可以将上述链接中的答案添加到此代码以影响所有 100 个输入，或者我是否会被迫在每个输入上添加 IF 子句。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:24:12.340

```
$update_arr = array();
foreach ($_POST as $key => $value)
{
    if (strlen($value) !== 0)
    {
        $update_arr[] = $key.' = "'.filter($value).'"';
    }
}
$update_string = implode(',',$update_arr);
$table = '';
$where = '';

$format = "UPDATE %s SET %s WHERE %s";
$sql = sprintf($format,$table,$update_string,$where); 
```

# mysql - mysql导入期间隐藏错误

> ID：14716988
> 
> 赞同：1
> 
> 时间：2013-02-05T21:12:31.773
> 
> 标签：mysql

我想知道是否有人知道如何在从 Windows 命令行运行 mysql 导入时隐藏错误。我在做，

mysql -u root -p < db_import.sql

但是，如果我收到类似“第 1 行的错误 1060：重复的列名`field2`”之类的错误，有没有办法阻止这些显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:39:48.173

你可以这样做：

```
mysql -uroot -ppass --force < db_import.sql 
```

# domain-driven-design - 域驱动设计中每个根聚合实体的一个存储库

> ID：14716989
> 
> 赞同：11
> 
> 时间：2013-02-05T21:12:34.687
> 
> 标签：domain-driven-design, repository-pattern, aggregateroot

如果您遵循存储库模式，他们...说为每个根聚合实体创建一个存储库。

这意味着当我有这个模型时：

客户有订单 订单有产品 产品有供应商

ETC...

这意味着我有 4 个存储库，它们被放入一个存储库中。客户是根实体。

我在这里误解了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T21:53:14.723

每个聚合都应该有一个存储库是正确的。但是，可能会有所不同的是您域中的聚合集。客户/订单/产品/供应商模型可以通过多种方式分解为聚合。分解为聚合取决于多种因素，并取决于手头的领域。

聚合应该是一致性边界，这意味着它定义了哪些实体集在与这些实体相关联的行为的上下文中应该是一致的。鉴于此约束，应消除聚合之间的对象引用并用身份引用替换。

在您的模型中，客户、订单、产品和供应商可能是不同的聚合体，因此需要单独的存储库。即使客户是聚合根（客户聚合的一部分）并且订单取决于客户，但这并不意味着客户存储库应该包含订单存储库。订单存储库应该是完全独立的，因为订单是订单聚合的根。

看看[Vaughn Vernon 的 Effective Aggregate Design，](http://dddcommunity.org/library/vernon_2011)深入了解如何设计聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:24:28.147

正如您在上面概述的那样，您有 4 个相关的实体，并且存储库为所有这些相关实体实现了事务上下文。

# z3 - 获得新的未饱和核心

> ID：14716992
> 
> 赞同：-3
> 
> 时间：2013-02-05T21:12:50.337
> 
> 标签：z3

那里

我试图从公式中提取子句并每次更改一个子句的极性，如果已解决，则计算模型并将子句放入集合中。如果解决 unsat，则找出新的 unsat cores。但是增量调用 unsat 核心函数，即使解决了 unsat，求解器也无法给出新的 unsat 核心。代码如下：

```
context c;
expr x  = c.int_const("x");
expr y  = c.int_const("y");
solver s(c);
expr F  = x + y > 10 && x + y < 6 && y < 5 && x > 0;
assert(F.is_app());
vector<expr> qs;
if (F.decl().decl_kind() == Z3_OP_AND) {
    std::cout << "F num. args (before simplify): " << F.num_args() << "\n";
    F = F.simplify();
    std::cout << "F num. args (after simplify):  " << F.num_args() << "\n";
    for (unsigned i = 0; i < F.num_args(); i++) {
        std::cout << "Creating answer literal q" << i << " for " << F.arg(i) << "\n";
        std::stringstream qname; qname << "q" << i;
        expr qi = c.bool_const(qname.str().c_str()); // create a new answer literal
        s.add(implies(qi, F.arg(i)));
        qs.push_back(qi);
    }
}
qs.clear();
vector<expr> f,C,M;
size_t count = 0;
for(unsigned i=0; i<F.num_args(); i++){
    f.push_back(F.arg(i));
}
while(!f.empty() && count != F.num_args()){
    C.push_back(f[0]);
    f.erase(f.begin(),f.begin() +1);
    if(M.size()){
        for(unsigned i=0; i<f.size();i++){
            s.add(f[i]);
        }
        for(unsigned j=0; j<M.size(); j++){
            s.add(M[j]);
        }
        expr notC= to_expr(c, Z3_mk_not(c,C[count]));
        s.add(notC);
    }else{  
        expr notC = to_expr(c,Z3_mk_not(c,C[count]));
        s.add(notC);
        for(unsigned i =0; i<f.size(); i++){
            s.add(f[i]);
        }
    }
    if(s.check() == sat){
        cout<<"sat"<<"\n";
        M.push_back(C[count]);
    }else if(s.check() == unsat){
        size_t i;
        i=0;
        if(f.size()){
            for(unsigned w=0; w<f.size(); w++){
                std::stringstream qname;
                expr qi = c.bool_const(qname.str().c_str());
                s.add(implies(qi,f[w]));
                qs.push_back(qi);
                i++;
            }
        }
        for(unsigned j=0; j<M.size(); j++){
            stringstream qname;
            expr qi = c.bool_const(qname.str().c_str());
            s.add(implies(qi,M[j]));
            qs.push_back(qi);
            i++;
        }
        std::stringstream qname;
        expr qi = c.bool_const(qname.str().c_str());
        expr notC = to_expr(c,Z3_mk_not(c,C[count]));
        s.add(implies(qi,notC));
        if(s.check(qs.size(),&qs[0]) == unsat){
            expr_vector core2 = s.unsat_core();
            cout<<"new cores'size  "<<core2.size()<<endl;
            cout<<"new cores  "<<core2<<endl;
        }
    }
    qs.clear();
    count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:28:59.370

目前尚不清楚问题到底是什么，但我猜你想从同一个公式中提取多个不同的未饱和核心。Z3 不支持开箱即用，但可以在其之上实现算法。另请参阅this previous [question](https://stackoverflow.com/questions/9480346/getting-a-good-unsat-core-with-z3-logic-qf-bv)，尤其是那里给出的参考（[Algorithms for Computing Minimal Unsatisfiable Subsets of Constraints](http://dl.acm.org/citation.cfm?id=1325294)），它解释了核心最小化背后的基础知识。

# php - each(): 数组指针不能正常工作

> ID：14716997
> 
> 赞同：1
> 
> 时间：2013-02-05T21:13:16.020
> 
> 标签：php

请考虑此代码

```
var_export ($dates);
while (list($key, $date) = each($dates))
{
    echo("current = ".current($dates));
    echo("key = " . key($dates));
} 
```

结果是

```
Array
(
    [1359928800] => 1359928800
)

current =
key = 
```

我希望它应该返回`1359928800`，我错在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:22:11.243

使用数组时，有一个不同的不太古老的结构来处理迭代：foreach（[此处的文档](http://www.php.net/manual/en/control-structures.foreach.php)）。

我建议以这种方式迭代数组。它更容易阅读，几乎不可能出错。此外，您不必担心可能会陷入无限循环，如此处的注意事项中[所述](http://php.net/manual/en/function.each.php)。

```
<?php
var_export($dates);
foreach($dates as $key => $value) {
    echo("current = ".$value);
    echo("key = ".$key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:55:53.753

**原因**是`each`指针已经前进了。

该[文档](http://php.net/manual/en/function.each.php)指出：

> 从数组中返回当前键值对并推进数组游标。

所以循环内部`current`指的是*下一个*元素。在您的情况下，没有下一个元素，所以它是`false`. 您应该使用`$key`and`$date`或更好地使用`foreach`，就像已经建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:19:08.573

为什么不使用`$key`and `$date`？

```
while (list($key, $date) = each($dates))
{
    echo("current = ".$date); // 1359928800
    echo("key = " . $key); // 1359928800
} 
```