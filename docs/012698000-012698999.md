# StackOverflow 问答 12698000-12698999

# php - 使用 AJAX 和 PHP 基于下拉菜单选择更新表单字段

> ID：12698001
> 
> 赞同：0
> 
> 时间：2012-10-02T20:43:28.920
> 
> 标签：php, ajax, json

我找到了使用设置数据更新表单元素以及基于下拉选择显示表格的教程。但是，我仍然无法弄清楚如何将这两件事合并在一起。正如标题中所说 - 我需要根据下拉菜单中的选择更新表单字段。到目前为止，我来到了这个：

**HTML：**

```
<html>
<head profile="http://www.w3.org/2005/20/profile">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test</title>

<script>

function showUser(str)
{
  var strURL="getUser2.php?user="+str;
  http('GET', strURL, ajax_response, document.form1);
}

function ajax_response(data) {
  for(var key in data) {
    document.form1[key].value = data[key];
  }
}

</script>

</head>
<body>

<div style="margin:30px 500px">

<form name="form1">
<select name="users" onchange="ajax_request()" value="showUser(this.value)">
<option value="">new</option>
<option value="1">First</option>
<option value="2">Second</option>
<option value="3">Third</option>
<option value="4">Fourth</option>
</select>
<br />
<br />
  ID <input type="text" id="ID"><br>
  name <input type="text" id="name"><br>
  city <input type="text" id="city"><br>
</form>

</div>

</body>
</html> 
```

**PHP：**

```
<?php
$user=$_GET["user"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("pophelper", $con);

$sql="SELECT * FROM phonebook WHERE ID = '".$user."'";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);
$ID=$row['ID'];
$names=$row['names'];
$city=$row['city'];

require_once "json/JSON.php";
$json = new Services_JSON();

$value = array("ID" => $ID, "names" => $names, "city" => $city);
$output = $json->encode($value);

print($output);

mysql_close($con);
?> 
```

我已经尝试单独运行 PHP 文件，它给出了正确的结果。但是当我从 html 运行它时，无论我选择哪个选项，字段都保持为空。

我错过了什么？先感谢您。

# javascript - 如何在页面重新加载时保留 Javascript 生成的 HTML？

> ID：12698005
> 
> 赞同：1
> 
> 时间：2012-10-02T20:43:45.957
> 
> 标签：javascript, jquery, html, ajax, codeigniter

我的问题很简单，但我没有找到适合我正在寻找的答案。这基本上是我的情况：

我有一个带有表单的 HTML 页面。使用 jQuery 和 AJAX，我提交我的表单，并使用一些 javascript 代码，我更改了我的 div 的 HTML 内容。所有这些都无需在按下 F5 / Ctrl-R / Cmd-R 时重新加载页面即可完成。

这是更改 HTML 内容的 .js 代码示例：

```
$.ajax({
    type: "POST",
    url: "/management/uploadFile",
    dataType: "JSON",
    data: "uploadedFile="+uploadedFile,
    cache: false,
    success: 
    function(data){
        $('#mydiv').html(change_html(data));
    },
});

function change_html(data)
{
    var html;

    html += '<div id="mydiv">';
    html += 'Hello World !<br/>';
    html += '</div>';
    return html;
} 
```

事实是，如果我手动重新加载页面，我的“动态”HTML 内容不会保留，我会看到我的表单。

我对 web 开发很陌生，我确信我错过了一些关于这个的东西。有人可以指导我或给我一些关于我的案例的提示吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:50:13.973

简短的回答是你不能在刷新时保持 DOM 的状态。不过，您可以做很多事情来修复：

1.  查看在页面加载时调用 AJAX 方法，该方法会抓取服务器上持久保存的数据以重绘动态页面。
2.  将数据存储在客户端浏览器的会话中，重新加载时检索该数据并重新绘制动态页面。您可以使用许多持久保存到会话存储的工具来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:46:08.420

我过去解决这个问题的方法是使用backbone.js 模型并将任何数据存储在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:47:18.493

由于 HTML 是使用回调动态生成的`change_html`，因此无法在页面重新加载期间保留它。这就是它具有良好动态性的本质。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:48:42.540

是否有任何机会，因为无论如何您都在使用 ajax，您可以将数据转储到 php 会话中并在再次需要时重新调用它和/或使用 ajax 重新格式化它？

# bash - 如何设置 ffmpeg 队列？

> ID：12698006
> 
> 赞同：3
> 
> 时间：2012-10-02T20:43:48.360
> 
> 标签：bash, cron, ffmpeg, queue, batch-processing

我正在尝试在我的服务器上编码许多视频，但 FFMPEG 是资源密集型的，所以我想设置某种形式的队列。我网站的其余部分使用 PHP，但我不知道是否应该使用 PHP、Python、BASH 等。我想我可能需要使用 CRON，但我不确定如何告诉 ffmpeg 启动一个新任务（从列表中）完成之前的任务后。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T21:05:26.343

We will use [FIFO](http://en.wikipedia.org/wiki/FIFO) (First In First Out) in a bash script. The script needs to run before `cron` (or any script, any terminal that call the `FIFO`) to send `ffmpeg` commands to this script :

```
#!/bin/bash

pipe=/tmp/ffmpeg

trap "rm -f $pipe" EXIT

# creating the FIFO    
[[ -p $pipe ]] || mkfifo $pipe

while true; do
    # can't just use "while read line" if we 
    # want this script to continue running.
    read line < $pipe

    # now implementing a bit of security,
    # feel free to improve it.
    # we ensure that the command is a ffmpeg one.
    [[ $line =~ ^ffmpeg ]] && bash <<< "$line"
done 
```

Now (when the script is running), we can send any `ffmpeg` commands to the named pipe by using the syntax :

```
echo "ffmpeg -version" > /tmp/ffmpeg 
```

And with error checking:

```
if [[ -p /tmp/ffmpeg ]]; then
    echo "ffmpeg -version" > /tmp/ffmpeg
else
    echo >&2 "ffmpeg FIFO isn't open :/"
fi 
```

They will be queuing automatically.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T12:57:36.980

谢谢你。正是应用这种技术来创建一个 ffmpeg 队列。不过我做了1个小改动。由于某种原因，此队列仅适用于 2 个项目。当第一个项目完成时，我只能发送第三个项目。

我相应地修改了脚本：

```
while true; do

# added tweak to fix hang
exec 3<> $pipe

# can't just use "while read line" if we 
# want this script to continue running.
read line < $pipe 
```

我基于： [https ://stackoverflow.com/questions/15376562/cant-write-to-named-pipe](https://stackoverflow.com/questions/15376562/cant-write-to-named-pipe "关联")

只是想我应该分享这个以备将来使用。

# java - 将颜色更改为 JTable 中未选择的行

> ID：12698009
> 
> 赞同：3
> 
> 时间：2012-10-02T20:43:56.097
> 
> 标签：java, swing, colors, jtable, cellrenderer

我需要突出显示 JTable 中选定行的颜色。我为此使用自己的 CellRenderer，它可以工作，但是当我选择另一行时，前一行仍然突出显示。这个想法是仅将选定的颜色保留为蓝色，并将其他颜色保留为原始颜色。另外，我正在制作对列：灰色和非对：白色，所以这是 CellRenderer 的代码

```
private class Renderer extends DefaultTableCellRenderer
{
    private static final long serialVersionUID = 1L;
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
                                         boolean isSelected, boolean hasFocus,
                                         int row, int column)
    {
        super.getTableCellRendererComponent(table, value, isSelected,
                                                          hasFocus, row, column);

        int columnIndex = table.getSelectedColumn();
        int rowIndex = table.getSelectedRow();

        if (columnIndex != -1 && rowIndex != -1){
            this.setBackground(Color.BLUE);
        } else {
            if (row % 2 == 0) this.setBackground(Color.decode("0xF9F9F9"));
            else this.setBackground(Color.decode("0xF1F1F1"));
        }
        return this;
    }
} 
```

编辑： F1F1F1 是一种接近于白色的颜色，而 F9F9F9F9 是一种浅灰色

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:50:49.477

在从方法返回之前，您应该添加类似于以下代码的内容：

```
if (!isSelected) {
  setBackground(...);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:42:53.837

如果您不介意使用第 3 方库：`JXTable`SwingX 项目的内置支持使用`HighLighter`s 交替行颜色。

我发现[一篇文章](http://www.javalobby.org/java/forums/m91834162.html)显示了将 a`HighLighter`应用于`JXTable`. 问题是文章不是最新的。功能仍然存在，但代码已更改。虽然文章仍然提到`AlternateRowHighligher`这里显示的

```
HighlighterPipeline highlighters = new HighlighterPipeline();
highlighters.addHighlighter(new AlternateRowHighlighter());
table.setHighlighters(highlighters); 
```

目前的方法更像

```
JXTable table;
Highlighter alternateStriping = 
  HighlighterFactory.createAlternateStriping( Color.decode( "0xF9F9F9" ), 
                                              Color.decode( "0xF1F1F1" ) );
table.setHighlighters( alternateStriping ); 
```

# java - 在摇摆中显示 HTML5

> ID：12698011
> 
> 赞同：11
> 
> 时间：2012-10-02T20:43:59.400
> 
> 标签：java, html, swing, javafx-2

我在这里看到了很多关于在 swing 应用程序中显示 HTML 内容的问题。但是没有一个库支持 html5（我买不起 JxBrowser）。

我有一些本地存储的 html5 网页，我想在我的 Swing 应用程序中显示它们。一个想法是将 firefox 或 chrome 嵌入到我的 java 应用程序中并删除控件。

如何在我的 Swing 应用程序中显示 html5 内容？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T20:52:16.600

您应该研究完全支持 HTML5 并用纯 Java 编写的新 JavaFX 浏览器。您可以轻松地将其集成到任何 Swing 应用程序中 - 参见官方说明： [http ://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)

但我想这可能会迫使你使用 JDK7+ 来完全支持各种操作系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-12T23:33:23.970

很抱歉破坏了这个旧线程。但是，今天这仍然是一个非常相关的问题，所以我想我会加入额外的信息和选项。

同意上面关于**WebKit**的评论。它内置于 Java 中，速度快，而且免费，而且非常易于使用。Oracle 在这方面的教程/示例是我在他们的网站上看到的最好和最清晰的一些（您将很快启动并运行一个基本的 Java 网页显示应用程序）： [https ://docs.oracle.com/ javafx/2/webview/jfxpub-webview.htm](https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)

WebKit 实际上只有 1 个限制/限制：它是 JavaFX，您不能将其直接嵌入到 Swing 或 AWT 控件中。但是，您可以将 JavaFX 场景嵌入到 Swing JPanel（或其他容器）中，以便您的 Swing 应用程序可以显示 HTML5。

而且，由于 Oracle 现在将 JavaFX（以及 WebKit）从主 JDK/JRE 中“解耦”，这可能会给想要使用您的 Java 应用程序的人增加额外的步骤。例如，他们可能需要为他们的平台单独下载和安装 JavaFX（它存在）。

参考：**Java SE 11：大删除**， [https ://www.reddit.com/r/programming/comments/9nakq3/java_se_11_the_great_removal/](https://www.reddit.com/r/programming/comments/9nakq3/java_se_11_the_great_removal/)

或者您可以使用 GraalVM（或其他一些打包程序）之类的东西来构建一个独立的应用程序并分发它。

参考：**使用 GraalVM 可以做的十件事 - Oleg Šelajev**， [https://www.youtube.com/watch? v=tEaEAq0L9Pk](https://www.youtube.com/watch?v=tEaEAq0L9Pk)

**无论如何，希望这对某人有所帮助。:)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-10T10:51:38.077

**WebKit 集成在 Java 8**中，因此您无需费力。它不断更新。它可用作[JavaFX WebView 控件](https://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)。Java 还带有 Nashorn javascript 引擎，可以从 JavaScript 调用 Java。整体表现[非常出色](https://justmy2bits.com/2013/09/08/javafx-with-nashorn-canvas-example/)。

# javascript - 通过 ajax 请求提交 jQuery.each 结果

> ID：12698019
> 
> 赞同：0
> 
> 时间：2012-10-02T20:44:17.763
> 
> 标签：javascript, jquery, ajax

```
$(".submitinfo").each(function() {
  // Want to use ID as POST name
  // And value as POST value
});
// Submit the data
$.ajax({
  url: 'submit.php',
  traditional: true,
  data: {
  'submit':'true',
  'age':$('#age').val(),
  'loss':$('#loss').val()
      // somehow include results here
},
type: 'POST',
async: false,
success: function(data) {
  alert(data);

},
error: function() {
  alert('Submit Error');
}
}); 
```

我以前从来没有这样做过，在任何地方都找不到任何例子。我有一系列带有 submitinfo 类的输入，我希望能够通过 ajax 请求与其他输入一起提交。我怎样才能做到这一点？详情请查看代码注释。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:47:10.260

创建一个对象，并将`each`函数中的值添加到该对象，并将该对象`$.ajax`作为数据传递给：

```
var data = {
  submit : 'true',
  age    : $('#age').val(),
  loss   : $('#loss').val()
 }

$(".submitinfo").each(function() {
    data[this.id]=this.value;
});

$.ajax({
  url: 'submit.php',
  traditional: true,
  data: data,
  type: 'POST',
  async: false,
  success: function(data) {
    alert(data);
  },
  error: function() {
    alert('Submit Error');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:02:11.127

听起来您正在尝试通过 ajax 提交表单。

我为此使用的 javascript 习惯用法更短更简单。简而言之，您使用[serialize](http://api.jquery.com/serialize/)函数序列化表单 jquery 对象。这使它成为一种对 ajax 友好的格式。然后，您可以将其直接发送到[$.post](http://api.jquery.com/jQuery.post/)。表单元素的 name 属性对应于服务器端的请求参数名称。

```
$.post(url, $('form').serialize(), function(data) {
    alert("Success");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:51:01.987

这对你有用：

```
var data = {};
$('.submitinfo').each(function() {
    var el = $(this),
        id = el.attr('id'),
        val = el.val();

    data[id] = val;
}); 

$.ajax({
  url: 'submit.php',
  traditional: true,
  data: data,
  type: 'POST',
  async: false,
  success: function(data) {
    alert(data);
  },
  error: function() {
    alert('Submit Error');
  }
}); 
```

# php - php - 如何将到期日期存储在数据库中并在日期运行（删除）脚本

> ID：12698021
> 
> 赞同：0
> 
> 时间：2012-10-02T20:44:26.840
> 
> 标签：php, mysql, date, cron

我有一个简单的网站，用户可以在其中发布广告，我想在用户上传广告时在 mysql 表中设置一个到期日期，比如在一个月内，然后当达到该日期时，我的删除脚本将自动运行删除广告

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:45:50.183

添加脚本：

```
INSERT INTO ads (expires_on, ...)
VALUES (now() + INTERVAL 1 MONTH, ...) 
```

删除脚本：

```
SELECT ...
WHERE expires_on <= now() 
```

只需让您的删除脚本每天运行一次（例如 cron 作业）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:47:19.090

1.  编写一个脚本，查询数据库并根据创建广告时设置的时间戳删除/标记任何过期的广告。
2.  从 cron 作业集调用此脚本以每晚运行。

更好的是，如果数据集很小，请忽略主代码中的过期广告，而不是完全删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:50:14.330

添加查询：

```
INSERT INTO ads (expires_on, ...)
VALUES (now() + INTERVAL 1 MONTH, ...) 
```

删除查询：

```
DELETE from ads 
WHERE expires_on <= now() 
```

正如其他人所提到的，并在 cron 作业中运行它们。

# jquery - 使用 tablesorter 保持交替的行颜色

> ID：12698022
> 
> 赞同：0
> 
> 时间：2012-10-02T20:44:30.370
> 
> 标签：jquery, css

我目前正在使用 jquery 插件 tablesorter，在这里找到：http: [//tablesorter.com/docs/#Download](http://tablesorter.com/docs/#Download)

我的问题是，当我创建奇数行着色并单击表格标题进行排序时，我的交替颜色突然再次混合，因为排序器重新排列了行。有没有办法让我的交替行颜色保持不变？

要查看我的问题是什么，请打开此 jsfiddle，然后单击其中一个行标题。 [http://jsfiddle.net/bJCKz/1/](http://jsfiddle.net/bJCKz/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:46:08.950

不要直接将类添加到您的行中。[使用此处](http://www.w3.org/Style/Examples/007/evenodd)记录的 CSS 偶数/奇数规则。

示例用法：

```
tr:nth-child(even) {background: #CCC}
tr:nth-child(odd) {background: #FFF} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T20:49:18.297

采用

```
.tablesorter tbody tr:nth-child(odd) {
   background-color: turquoise;   
} 
```

而不是类。这样，规则就会动态地应用于奇数行。

**[在http://jsfiddle.net/bJCKz/5/](http://jsfiddle.net/bJCKz/5/)**上更新了演示****

# python - 为什么 Python 的 eval() 拒绝这个多行字符串，我该如何解决？

> ID：12698028
> 
> 赞同：18
> 
> 时间：2012-10-02T20:44:45.160
> 
> 标签：python, python-3.x, metaprogramming, eval

我正在尝试评估以下制表符缩进的字符串：

```
'''for index in range(10):
        os.system("echo " + str(index) + "")
''' 
```

我得到，“有一个错误：无效的语法，第 1 行”

它在抱怨什么？我是否需要缩进以匹配 eval() 语句，或者将其写入字符串文件或临时文件并执行它，或者其他什么？

谢谢，

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-02T20:47:20.417

`eval`评估类似的东西`5+3`

`exec`执行类似的东西`for ...`

```
>>> eval("for x in range(3):print x")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1
    for x in range(3):print x
      ^
SyntaxError: invalid syntax
>>> exec("for x in range(3):print x")
0
1
2
>>> eval('5+3')
8 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T20:52:10.783

要使用此类语句，您应该首先使用[compile](https://docs.python.org/3/library/functions.html#compile)`eval`将它们转换为代码对象：

```
In [149]: import os

In [150]: cc = compile('''for index in range(10):
    os.system("echo " + str(index) + "")''','<string>','single')

In [154]: eval cc
--------> eval(cc)
0
Out[154]: 0
1
Out[154]: 0
2
Out[154]: 0
3
Out[154]: 0
4

In [159]: cc = compile("2+2", '<string>', 'single')  # works with simple expressions too 

In [160]: eval cc
--------> eval(cc)
Out[160]: 4 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T20:53:28.447

我们评估 ( [`eval`](http://docs.python.org/library/functions.html#eval)) 表达式，并执行 ( [`exec`](http://docs.python.org/reference/simple_stmts.html#exec)) 语句。

*请参阅：[表达式与语句](https://stackoverflow.com/questions/19132/expression-versus-statement)。*

> 表达式：求值的东西。示例：1+2/x
> 语句：执行某事的一行代码。示例：转到 100

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-04T20:25:29.130

**（在将这样的代码投入生产之前，请参阅最后的默认安全警告！）**

其他答案很好地解释了`exec`和之间的区别`eval`。

尽管如此，我发现自己想要接受输入`x=1; y=2; x+y`而不是强迫人们写：

```
def f():
   x = 1
   y = 2
   return x + y 
```

对代码进行字符串操作以构建此类功能是一项有风险的业务。

我最终使用了以下方法：

```
def multiline_eval(expr, context):
    "Evaluate several lines of input, returning the result of the last line"
    tree = ast.parse(expr)
    eval_expr = ast.Expression(tree.body[-1].value)
    exec_expr = ast.Module(tree.body[:-1])
    exec(compile(exec_expr, 'file', 'exec'), context)
    return eval(compile(eval_expr, 'file', 'eval'), context) 
```

这会解析python代码；使用 ast 库重建除最后一行之外的所有内容的 ast；最后一行，执行前者并评估后者。

# 安全警告

这是您必须附加到的强制性安全警告`eval`。 由非特权用户提供的`Eval`'ing 和'ing 代码当然是不安全的。`exec`在这些情况下，您可能更喜欢使用另一种方法，或者考虑使用 ast.literal_eval。`eval`并且`exec`往往是坏主意，除非你真的想给你的用户充分的 python 表达能力。

# shell - 使用 SSH，将 WebURL 从本地机器浏览器传输到硬盘上的远程机器

> ID：12698032
> 
> 赞同：1
> 
> 时间：2012-10-02T20:45:08.137
> 
> 标签：shell, unix, ssh, command

嗨，所以我在图书馆做一些研究，这样我以后可以在我房间里的台式电脑上使用一些图片。我的实验室帐户上有空间，我通常通过 SSH 进入，我想知道 URL 是否可以直接传输到远程机器并保存在硬盘上。

我在想这样的事情：

```
scp http://click.si.edu/images/truncatedurl.jpg /home3/etc.../filename.jpg 
```

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:01:31.690

您可以像这样一起使用`wget`and `scp`：

```
wget http://click.si.edu/images/truncatedurl.jpg -O file.jpg && scp file.jpg login@server:/home3/etc.../filename.jpg 
```

该`-O`选项允许您命名输出文件，然后您就知道要将哪个文件上传到学校的服务器。

# excel - 需要合并 Excel 中的一些功能。那可能吗？

> ID：12698038
> 
> 赞同：0
> 
> 时间：2012-10-02T20:45:39.513
> 
> 标签：excel, user-interface, wizard

我知道软件工程的主要原则之一是 DRY（不要重复自己），这就是为什么我不想编写我已经知道 Excel 中存在的东西的另一个实现。

我想知道是否可以从现有程序中获取功能并使用它？

我特别感兴趣的功能是在 Excel 的数据部分，可以导入带有数据的文本。它会打开一个向导，让用户描述他的数据文件，然后 Excel 会尝试最好将其导入 Excel。

我想要做的是制作这个数据文本导入器的另一个版本，除了更具体的选项。我是否必须制作另一个 Excel 导入器实例？

# c# - 如何在从存储库中检索项目时异步填充 GridView

> ID：12698043
> 
> 赞同：1
> 
> 时间：2012-10-02T20:46:02.147
> 
> 标签：c#, windows-8, winrt-xaml, async-await

如果这个问题听起来有点笼统，我们深表歉意。我只是在寻找一些关于如何解决这个问题的一般建议:)

现在我有以下异步方法，它正在检索自定义 FileService 中的文件列表。这是在 ViewModel 的构造函数中触发的。

```
private async void Construct()
{
   Files = new ObservableCollection<FileViewModel>();
   IList _files = await _fileRepository.GetFiles();
   foreach (File file in _files)
   {
      Files.Add(new FileViewModel(file));
   }
} 
```

正如您可能知道的那样，异步方法是在第一步中检索文件列表，然后将它们添加到列表（这是 UI 中的绑定源）到另一个。

对于用户来说，在异步过程完成之前他们什么都看不到，然后在一段时间后他们将立即看到所有结果。

在我看来，这违背了异步的意义，因为我真正想要的是在检索结果时添加结果。

要添加另一个步骤，我还有一个 linq 查询，它将每个文件的第一个字母拉入到类别中。这在 foreach 循环之后执行。我将如何去添加这一步呢？

非常感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:24:25.527

为了做到这一点，您必须从根本上更改您的存储库。您可以返回一个在检索项目时触发事件的对象，然后在事件处理程序中将您的对象添加到您的控件绑定到的[`INotifyCollectionChanged`接口](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)实现中。

您还可以查看[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)并公开一个[`IObservable<T>`接口](http://msdn.microsoft.com/en-us/library/vstudio/dd990377%28v=vs.100%29.aspx)实现，当订阅该接口实现时，会将项目添加到数据源（同样，实现`INotifyCollectionChanged`）。

无论您采用哪种方法，您都必须考虑到 UI 组件只能在创建它们的线程上更新的事实，这意味着您必须编组对 UI 线程的调用。

执行此操作的最简单方法是在进行任何异步调用之前捕获[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)使用[静态`Current`属性](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)，然后通过调用调用该[`Post`方法](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)以将项目添加到`INotifyCollectionChanged`实现中。

`async`/`await`并不适合在这种情况下使用；它不太适合在操作完成时发出通知，但在异步操作完成时编织延续。

不过，您可能需要重新考虑这些方法。对于大多数 LINQ 提供程序，[`IQueryable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)返回 an，它派生自[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx). 虽然在`IEnumerable<T>`迭代过程中肯定会出现阻塞，但大多数提供商会以相当快的速度连续流式传输结果，但机会太快无法为您提供所需的效果。

如果 LINQ 提供程序提供它们的*速度*太慢（每次迭代之间的间隔很大），那么您可以使用 Reactive Framework 中的[`ToObservable`扩展方法](http://msdn.microsoft.com/en-us/library/hh212140%28v=vs.103%29.aspx)来启用上述模式之一，以便在您将项目放入列表中时立即为您提供抓住他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:00:20.877

您需要更改文件存储库才能执行此操作。

我建议使用 TPL Dataflow：让文件存储库公开一个`BufferBlock<File>`它将开始填充的文件，并让您的代码使用它。

# ruby - 红宝石类

> ID：12698045
> 
> 赞同：0
> 
> 时间：2012-10-02T20:46:06.487
> 
> 标签：ruby, class

最近开始学习 ruby​​，我为家庭成员创建了一个包含姓名、年龄、性别、婚姻状况和特征的类。我正在尝试编写一种方法来确定家庭成员是否为父母以及是否为母亲或父亲。

所以该方法的代码如下：

```
def is_father?(age, sex)
    if age > 30
      puts "is parent"
          if sex == "Male"
            then puts "is father"
          else puts "not father"
          end
    end
  end 
```

家庭成员可能看起来像这样：

```
fm1=Family.new("John", "Male", 54, "Married", "Annoying") 
```

像这样初始化后：

```
class Family
  def initialize(name, sex, age, status, trait)
    @fam_name=name
    @fam_sex=sex
    @fam_age=age
    @fam_stat=status
    @fam_trait=trait
  end
end 
```

如果一个人包含前面提到的特征，我如何将年龄+性别传递到这个方法中？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:51:29.810

您必须在初始化期间将数据存储在属性中。稍后您可以在不使用方法参数的情况下使用它们。

例子：

```
class Family
   def initialize(name, sex, age, status, trait)
    @fam_name=name
    @fam_sex=sex
    @fam_age=age
    @fam_stat=status
    @fam_trait=trait
  end
  def is_parent?; @fam_age > 30;end
  def is_father?
    is_parent? and @fam_sex == "Male"
  end
  def to_s
    result = @fam_name.dup
    if @fam_age > 30
      result <<  " is parent and is "
          if @fam_sex == "Male"
            result << "father"
          else 
            result << "not father"
          end
      end
    result
  end
end

fm1=Family.new("John", "Male", 54, "Married", "Annoying")
puts fm1.ilding is_parent?
puts fm1.is_father?
puts fm1 
```

评论：

*   我修改了你的`is_father?`- 方法`?`通常返回一个布尔值。
*   我将您的文本构建移至 method `to_s`。`to_s`如果您使用 打印您的对象，则会调用它`puts`。
*   最好避免`puts`在你的方法中。大多数时候，最好`puts`在调用该方法时返回一个答案字符串并制作。

* * *

也许我误解了你的要求。

如果`is_father?`没有 Family 的方法并且您需要访问属性，那么您必须定义一个 getter 方法：

```
class Family
  def initialize(name, sex, age, status, trait)
    @fam_name=name
    @fam_sex=sex
    @fam_age=age
    @fam_stat=status
    @fam_trait=trait
  end
  attr_reader :fam_sex
  attr_reader :fam_age
end

fm1=Family.new("John", "Male", 54, "Married", "Annoying")
puts fm1.fam_sex
puts fm1.fam_age

is_father?(fm1.fam_age, fm1.fam_sex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:08:17.817

一旦你初始化了年龄/性别/等，你可以通过`@age`//以任何方法使用它们`@sex``@etc`

```
def is_father?(age = nil, sex = nil)
    if (age || @age) > 30
        puts "is parent"
    end
    if (sex || @sex) == "Male"
        puts "is father"
    else 
        puts "not father"
    end
end 
```

在上面的示例中，如果您将值传递给方法，则将使用它们而不是在初始化时设置的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:20:26.280

使用 Struct 可以节省大量代码

```
class Family < Struct.new(:name, :sex, :age, :status, :trait)
  # define methods in usual manner
end

f = Family.new("John", 'male') #<struct Family name="John", sex="male", age=nil, status=nil, trait=nil> 
```

# c# - .NET CheckedListBox 第一项首先点击

> ID：12698052
> 
> 赞同：0
> 
> 时间：2012-10-02T20:46:22.850
> 
> 标签：c#, .net, events, checkedlistbox

我从数据库中选择一个条目，然后将文件列表加载到 checkedListBox2 并检查与我在数据库中的条目相关的文件。都是checkedListBox2s的形式。选中的项目与数据库条目相关，未选中的不。

问题是，当我单击checkedListBox2 的第一项（索引0）并且该项目被选中时，函数checkedListBox2.GetItemChecked（）返回false，而不是true，并且取消选中我的第一项（我的SelectedIndexChanged 事件没有取消选中项目的代码）。仅当我第一次单击第一个项目时才会发生这种情况（如果我之前单击另一个任何项目，一切正常）。如果未选中第一项，也一切正常。

```
 private void checkedListBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (checkedListBox2.GetItemChecked(checkedListBox2.SelectedIndex) == true)
        {
           ...
           ...
        else
        {
           ....
        }
    } 
```

无法理解有什么问题。首先我认为问题是在加载checkedListBox2期间事件上升，但即使在加载之后也是同样的问题。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:59:11.533

您是否尝试过使用 ItemCheck 事件，而不是使用 SelectedIndexChanged？

ItemCheck 事件在检查项目后触发，但 SelectedIndexChanged 事件在选择项目时触发，这意味着不一定要检查它。

```
private void checkedListBox_ItemCheck(object sender, ItemCheckEventArgs e) {
    if (checkedListBox.GetItemChecked(e.Index)) { 

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:04:14.077

想想看。
第一项是选定的项目。
该事件是 SelectedIndexChanged。
您可以单击第一个（索引 0）100 次，并且该事件不会被触发。

您需要挂钩到不同的事件。

最好通过两种方式绑定来完成。

# ruby-on-rails - Rails 如何确定这个 id 的值？

> ID：12698053
> 
> 赞同：0
> 
> 时间：2012-10-02T20:46:25.297
> 
> 标签：ruby-on-rails, ruby

从高度明确的语言 Java 到使用非常简洁的语法的 RoR 在大多数情况下很容易，但我很难理解幕后发生的一些事情。

在下面的代码中，Rails 如何为**product_id:**赋值？不能使用 product.id 代替吗？**product_id:**在这种情况下到底是什么意思？它的价值从何而来？

在视图中：

```
<% @products.each do |product| %>
<div class="entry">
<%= image_tag(product.image_url) %>
<h3><%= product.title %></h3>
<%= sanitize(product.description) %>
<div class="price_line">
  <span class="price"><%= number_to_currency(product.price, unit: '$') %></span>
  <%= button_to 'Add to Cart', line_items_path(product_id: product) %>
</div>
</div>
<% end %> 
```

是因为我在 line_items 模型中给出的 attr_accessible 语句吗？：

```
class LineItem < ActiveRecord::Base
  attr_accessible :cart_id, :product_id
  belongs_to :product
  belongs_to :cart
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:51:37.793

这可能意味着您有一个需要 a 的路由`product_id`，并且“添加到购物车”链接链接到该路由的 URL，并在该 URL 中传递 id `product`。我相信做和做`line_items_path(product_id: product)`是一样的`line_items_path(product_id: product.id)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:00:30.327

实际上，`belongs_to :product`是什么给了你的模型（LineItem）这个属性。因此，现在您可以引用父产品（此 LineItem 所属的产品），例如`LineItem.find(1).product_id`，这将返回与 do 相同的结果`LineItem.find(1).product.id`。

Rails 使用这个常规属性（product_id），因为它直接映射到表列。检查您的 schema.rb 文件，您会在 line_items 表中找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:51:26.970

它将调用该`#to_param`方法，该方法默认返回 id。

当您来自Java时，我会说它与您`System.out.println(anObject)`隐式调用该`#toString()`方法时类似

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T20:53:00.477

`product_id`是`line_items_path`路由期望的参数。您可以只传递一个对象而不是手动设置它：

```
line_items_path(product) 
```

结果应该是一样的。如果您在路线中重命名它，它会破坏您的视图，因此最好不要手动设置它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T21:01:06.337

```
line_items_path(product_id: product) 
```

相当于

```
line_items_path(:product_id => product) 
```

这与

```
line_items_path({:product_id => product}) 
```

在这种特定情况下`product_id`，其行为类似于符号文字（通常需要前导`:`或 %s[]）。在 ruby​​ 1.9 中添加了这种替代的、更类似于 json 的哈希语法。

# verilog - 是否可以在单个特定类实例中禁用 SystemVerilog 任务？

> ID：12698055
> 
> 赞同：4
> 
> 时间：2012-10-02T20:46:44.753
> 
> 标签：verilog, system-verilog

在 SystemVerilog 中，可以使用该`disable`构造来终止命名块或任务。但是我今天发现禁用类实例中的任务会影响所有类实例中任务的所有副本。

考虑一个在其中定义了一些任务的类。如果在类内部调用`disable <taskname>`，这将禁用该类的所有实例中的所有任务副本**。**这不是我所期望的行为，但根据 LRM 是正确的：

> 如果多次启用任务，则禁用此类任务将禁用该任务的所有激活。

**是否有一种机制或解决方法来*仅*禁用类的特定实例中的任务？**

下面的代码突出了我面临的问题。基本上，我有一个计时器任务，由于其他一些事件，我想禁用它。这都包含在一个类中。在我的验证环境中，我有这个类的多个实例，它们完全独立运行。因此，在一个实例中禁用计时器不应影响其他实例。但是它的`disable`工作方式正在影响其他实例。

我试过`disable this.timer`了，但没有编译。

在这个例子中，我有两个实例，`class c`其中包含一个`timer`任务。有一个`disabler`并行启动的任务调用`disable timer`. 此示例中的目的是在`timer`计数中途禁用。所以`c1`会在时间 5`c2`被禁用，并在时间 10 被禁用。但是，它们都在时间 5 被禁用，因为`disable timer`发起的调用在和`c1`中都禁用了任务。`c1``c2`

```
module top();

  class c;

    string name;
    int    count;

    function new(string _name, int _count);
      name  = _name;
      count = _count;
    endfunction

    task t1();
      timer();
      $display("%t %s timer completed", $time, name);
    endtask

    task run();
      fork
        t1();
        disabler();
      join
    endtask

    task timer();
      $display("%t %s starting timer with count=%0d", $time, name, count);
      repeat(count) #1;
    endtask

    task disabler();
      repeat(count/2) #1;
      disable timer;
    endtask

  endclass

  class ex;

    c c1;
    c c2;

    function new();
      c1 = new("c1", 10);
      c2 = new("c2", 20);
    endfunction

    task run();
      fork
        c1.run();
        c2.run();
      join_none
    endtask

  endclass

  ex e = new;

  initial begin
    e.run();
  end

endmodule 
```

输出：

```
 0 c1 starting timer with count=10
               0 c2 starting timer with count=20
               5 c2 timer completed
               5 c1 timer completed 
```

我知道我可以重写它以使其在不使用的情况下工作`disable`，但这是一种提前终止任务的简单方法，我希望我缺少一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:58:29.473

我不认为这是可能的。即使在命名块上使用*禁用*仍然会停止该任务的所有实例。

> 禁用自动任务或自动任务内的块会继续执行所有并发执行任务的常规任务。

您可以尝试使用流程类。我自己从未使用过它们，因此此代码可能包含错误。

```
class c;
process p1;

task run();
  fork
    begin
      p1 = process::self(); //Get process of this begin..end block
      $display("%t %s starting timer with count=%0d", $time, name, count);
      repeat(count) #1;
    end
    disabler()
  join_none
endtask

task disabler();
  wait (p1 != null);
  repeat(count/2) #1;
  p1.kill();
endtask 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T13:41:31.737

```
class a1; 
  process p1; 

  task timer();
    p1=process::self();
    begin
      while(1)
      begin
        $display("example data %t",$time);
        #10;
      end 
    end 
  endtask

  task timer2();
    for(int i = 0; i < 10; i ++) 
    begin
      #20;
      $display("shouldnot killed",i);
    end
  endtask

endclass

module example_kill;
  a1 ab,bc;
  initial begin 
    ab = new();
    bc= new();
    fork 
    ab.timer();
    ab.timer2();
    bc.timer();
    join_none
    #50; 
    ab.p1.kill();
    #100;
    bc.p1.kill();
    wait fork;
  end
endmodule 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T07:36:33.040

我认为任务可以在线程内部隔离。这个想法是你将你的任务隔离在一个线程中。您应该仅对一个特定实例应用禁用分叉。因此，您必须询问我们所在的实例。如果我们有问题，因为 systemverilog 不允许您例如

`fork begin yourtaskcall; end join_none if (class_instance_disable_member_id==1) begin disable fork; end` 之后，您可以再次包装前面的代码，以便您仅针对该任务隔离禁用分叉。例如

`fork begin fork begin yourtaskcall; end join_none if (class_instance_disable_member_id==1) begin disable fork; end end join`

最后，从您的顶部开始，您应该将变量“ **class_instance_disable_member_id** ”设置为 1（**默认值=0**），以用于您要禁用的特定实例。这可以从外部类或顶级类中完成。

**例如 top.class1.class_instance_disable_member_id=1;**

该任务将在任务被调用时被禁用。因此，您必须在调用发生之前设置“class_instance_disable_member_id=1 变量”。如果您使用 UVM，您可以使用阶段（在运行阶段之前构建或连接）。如果它是简单的 systemverilog，那么您可以使用 new() 构造函数从顶部为正确的实例设置该变量。

如果您想“动态/动态地”激活/停用任务，那么您应该在顶部有另一个线程/任务，在调用您要禁用的任务之前为您的特定实例修改“class_instance_disable_member_id”。

您还可以检测 class_instance_disable_member_id 上的更改以允许在中间杀死任务，使用以下基本块

`fork begin yourtaskcall; end begin if (class_instance_disable_member_id==0) begin @(posedge class_instance_disable_member_id); end end join_any if (class_instance_disable_member_id==1) begin disable fork; end`

我希望它可以帮助 BR

# c# - RadGrid (Gridview) 中的 FindControl 编辑和插入视图

> ID：12698058
> 
> 赞同：5
> 
> 时间：2012-10-02T20:46:57.187
> 
> 标签：c#, asp.net, gridview, radgrid, rad-controls

我有一个 RadGrid (Gridview)，可以选择编辑和插入新项目。

在这两个选项中，我都有一个自定义验证器来检查现有值，因此无法输入重复项。我坚持的是能够将 findcontrol 用于仅在 EDIT 和 INSERT 期间显示的文本框。

当我调用 GetInsertItem() 时，这对 INSERT 非常有用，但是在编辑时会引发错误，我被困在上面。我想在数据绑定和命令方法之外执行此操作。

```
protected void cvAccountNumber_ServerValidate(object source, ServerValidateEventArgs args)
{
    TextBox txtAccountNumber = (TextBox)RadGrid1.MasterTableView.GetInsertItem().FindControl("txtAccountNumber");

    List<GridDataItem> Items = (from item in RadGrid1.Items.Cast<GridDataItem>()
                                where item["AccountNumberView"].Text == txtAccountNumber.Text
                                select item).ToList();

    args.IsValid = Items.Count() == 0;
} 
```

这是编辑屏幕的图像。 ![在此处输入图像描述](../Images/bc115f8f61d49cd11b1bf26172193fe8.png)

ASPX：

```
Sort By Status: <asp:DropDownList ID="dd_Status" runat="server" Width="150px" 
    onselectedindexchanged="dd_Status_SelectedIndexChanged" 
    AutoPostBack="True">
    <asp:ListItem Text="All" Value="0" Selected="True"></asp:ListItem>
    <asp:ListItem Text="Active" Value="True"></asp:ListItem>
    <asp:ListItem Text="Inactive" Value="False"></asp:ListItem>
</asp:DropDownList>

<br /><br />

<telerik:RadGrid ID="RadGrid1" runat="server" Skin="Vista" Width="500px"
    GridLines="None" AllowFilteringByColumn="False" AllowSorting="True" OnExportCellFormatting="RadGrid1_ExportCellFormatting" DataSourceID="SqlDataSource1"
     AllowAutomaticDeletes="true" AllowAutomaticUpdates="True" AutoGenerateEditColumn="True"  AutoGenerateDeleteColumn="true" OnItemCommand="RadGrid1_ItemCommand" >
    <MasterTableView AutoGenerateColumns="False" DataKeyNames="ID" DataSourceID="SqlDataSource1" ItemStyle-HorizontalAlign="Left" CommandItemDisplay="TopAndBottom">
        <Columns>
            <telerik:GridTemplateColumn HeaderText="ID" SortExpression="ID" UniqueName="ID" Visible="false" ReadOnly="true"> 
                <ItemTemplate> 
                    <asp:Label ID="lblIDView" runat="server" Text='<%# Bind("ID") %>'></asp:Label> 
                </ItemTemplate> 
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="ID" SortExpression="IDEdit" UniqueName="IDEdit" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Bind("ID") %>'></asp:Label> 
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridBoundColumn DataField="AccountNumber" HeaderText="Sapphire Account Number" 
                SortExpression="AccountNumber" UniqueName="AccountNumberView" ReadOnly="true" ItemStyle-Width="400">
            </telerik:GridBoundColumn>
            <telerik:GridTemplateColumn HeaderText="Sapphire Account Number" SortExpression="AccountNumber" UniqueName="AccountNumber" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:Textbox ID="txtAccountNumber" runat="server" Text='<%# Bind("AccountNumber") %>' />
                    <asp:RequiredFieldValidator ID="rfvAccountNumber" ControlToValidate="txtAccountNumber"
                        ErrorMessage="Sapphire Account Number is required" runat="server" ForeColor="Red"></asp:RequiredFieldValidator>
                    <asp:CustomValidator ID="cvAccountNumber" runat="server" ErrorMessage="Sapphire Account Number already exists"
                        ControlToValidate="txtAccountNumber" ForeColor="Red" OnServerValidate="cvAccountNumber_ServerValidate"></asp:CustomValidator>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="Active" SortExpression="Active" UniqueName="Active" ItemStyle-Width="100" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:CheckBox ID="cbActive" runat="server" Checked='<%# GenerateBindString(Container.DataItem) %>' />
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="Status" SortExpression="Active" UniqueName="Active" ItemStyle-Width="100"> 
                <ItemTemplate> 
                    <asp:Label ID="lblActive" runat="server" Text='<%# Convert.ToBoolean(GenerateBindString(Container.DataItem)) == true ? "Active" : "Inactive" %>'></asp:Label> 
                </ItemTemplate> 
            </telerik:GridTemplateColumn> 
         </Columns>
    </MasterTableView>
    <ValidationSettings CommandsToValidate="PerformInsert,Update" />
    <ClientSettings>
        <Selecting AllowRowSelect="True" />
    </ClientSettings>
</telerik:RadGrid>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:LBCust %>" 
    SelectCommand="SELECT * FROM [LBX_Portal_AccountNumbers] WHERE ([Site] = @Site) AND (Active=@Active OR @Active = '0') ORDER BY AccountNumber"
    DeleteCommand="DELETE FROM [LBX_Portal_AccountNumbers] WHERE [ID] = @ID" 
    InsertCommand="INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active]) VALUES (@AccountNumber, @Site, @Active)" 
    UpdateCommand="UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = @AccountNumber,  [Active] = @Active WHERE [ID] = @ID">
    <SelectParameters>
        <asp:ControlParameter ControlID="dd_Status" Name="Active" 
            PropertyName="SelectedValue" Type="String" />
    </SelectParameters>
    <DeleteParameters>
        <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:Parameter Name="Site" Type="String" />
        <asp:Parameter Name="Active" Type="Boolean" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:Parameter Name="Active" Type="Boolean" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

CS：

```
public partial class Admin_CustomerAccountManager : System.Web.UI.Page
{
public string SiteName = WebConfigurationManager.AppSettings["Site"].ToString();

protected void Page_Load(object sender, EventArgs e)
{
    Label LBXTitle = (Label)Master.FindControl("lbxTitle");

    LBXTitle.Text = "Customer Sapphire Account Number Manager";

    if (!this.IsPostBack)
    {
        SqlDataSource1.SelectParameters.Add("Site", DbType.String, SiteName);
    }
}

protected void dd_Status_SelectedIndexChanged(object sender, EventArgs e)
{
    RadGrid1.DataBind();
}

protected bool GenerateBindString(object dataItem)
{
    bool ret = false;
    // if column is null set checkbox.checked = false

    if ((DataBinder.Eval(dataItem, "Active")).ToString() == "")
        ret = false;
    else // set checkbox.checked to boolean value in Status column
        ret = (bool)DataBinder.Eval(dataItem, "Active");

    return ret;
}

protected void RadGrid1_ItemCommand(object source, Telerik.Web.UI.GridCommandEventArgs e)
{
    Page.Validate();
    if (Page.IsValid)
    {
        if (e.CommandName == "PerformInsert")
        {
            GridEditFormItem gridEditFormItem = (GridEditFormItem)e.Item;

            Label lblID = (Label)gridEditFormItem.FindControl("lblID");
            TextBox txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber");
            CheckBox cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive");

            bool isActive = true;

            string SqlStr = "INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active])";
            SqlStr += " VALUES ('" + txtAccountNumber.Text + "'" + ", '" + SiteName + "'" + ", '" + isActive + "')";

            SqlDataSource1.InsertCommand = SqlStr;
            SqlDataSource1.Insert();

        }

        if (e.CommandName == "Update")
        {
            GridEditFormItem gridEditFormItem = (GridEditFormItem)e.Item;

            Label lblID = (Label)gridEditFormItem.FindControl("lblID");
            TextBox txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber");
            CheckBox cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive");

            bool isActive = false;

            if (cbActive.Checked)
                isActive = true;
            else
                isActive = false;

            string SqlStr = "UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = '" + txtAccountNumber.Text;
            SqlStr += "', [Active] = '" + isActive + "'  WHERE [ID] = " + lblID.Text;

            SqlDataSource1.UpdateCommand = SqlStr;
            SqlDataSource1.Update();
        }
    }
}

protected void cvAccountNumber_ServerValidate(object source, ServerValidateEventArgs args)
{
    TextBox txtAccountNumber = RadGrid1.FindControl("txtAccountNumber") as TextBox;
    List<GridDataItem> Items = (from item in RadGrid1.Items.Cast<GridDataItem>()
                                where item["AccountNumberView"].Text == txtAccountNumber.Text
                                select item).ToList();

    args.IsValid = Items.Count() == 0;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:16:48.707

看起来验证事件中的 GridView.FindControl 永远不会起作用，您如何访问需要像这样验证的字符串：

这是您验证目标控制值的方式：

```
 protected void cvAccountNumber_ServerValidate(object source, ServerValidateEventArgs args)
    {
        string textToBeValidated = args.Value;
    } 
```

以下是访问实际控件的方法。在 ServerValidate 上下文中使用时，GridView.FindControl 最终将一无所有，因此您必须查看已编辑/插入的行。

```
 protected void cvAccountNumber_ServerValidate(object source, ServerValidateEventArgs args)
    {
        //find your editing row...
        GridViewRow editedRow = RadGrid1.Rows[RadGrid1.EditIndex];
        //now serch row for your control...
        TextBox txtAccountNumber = (TextBox)editedRow.FindControl("txtAccountNumber");
        TextBox txtId = (TextBox)editedRow.FindControl("txtId");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:28:29.657

首先，您的代码容易受到 SQL 注入的影响，但这不是您最初的问题。

您不能循环遍历 GridDataItems 来查找重复项。如果您稍后对网格进行分页，您将无法找到它。

首先，为简单起见，您可以使用 RadGrid 的 InsertCommand 和 UpdateCommand 事件。[然后使用ADO.Net](http://csharp.net-informations.com/data-providers/csharp-sqlcommand-executescalar.htm)或您喜欢的任何方法检查重复项。

```
protected void RadGrid1_InsertCommand(object source, GridCommandEventArgs e)
{
   try
   {
      var gridEditFormItem = (GridEditFormItem) e.Item;

      var txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber"); 
      var cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive"); 

      // TODO: Check duplicate against database

      string SqlStr = "INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active])" + 
        " VALUES ('" + txtAccountNumber.Text + "'" + ", '" + SiteName + "'" + ", '" + isActive + "')"; 

      SqlDataSource1.InsertCommand = SqlStr; 
      SqlDataSource1.Insert(); 

   }
   catch (Exception ex)
   {
      // Log Error
   }
}

protected void RadGrid1_UpdateCommand(object source, GridCommandEventArgs e)
{
   try
   {
      var gridEditFormItem = (GridEditFormItem) e.Item;

      int id = Convert.ToInt32(e.Item.OwnerTableView.DataKeyValues[e.Item.ItemIndex]["ID"]);
      var txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber"); 
      var cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive"); 

      // TODO: Check duplicate against database

      string SqlStr = "UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = '" + txtAccountNumber.Text + 
         "', [Active] = '" + isActive + "'  WHERE [ID] = " + lblID.Text; 

      SqlDataSource1.UpdateCommand = SqlStr; 
      SqlDataSource1.Update(); 

   }
   catch (Exception ex)
   {
      // Log Error
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:50:07.080

这就是我的建议以及如何解决这个问题。

在出现错误的代码中放置一个断点。

运行调试程序。程序将在断点处停止。

在 Watch Windows 中添加您的对象并查看它包含的值。不要害怕。监视窗口非常强大。您可以添加一个对象或其任何属性以查看它包含的值。您特别想关注空值。

一旦您确定了它来自哪里的空异常，请在“监视”窗口中修复该语法并再次运行该程序。

# c++ - C++ Visual Studio Express 2010 无法启动程序错误

> ID：12698073
> 
> 赞同：1
> 
> 时间：2012-10-02T20:47:28.943
> 
> 标签：c++, visual-studio-2010, visual-studio, runtime-error, visual-studio-express

我可以编译代码，但在运行时我得到了一些

无法启动程序 F:/...algo.lib

我检查了启动程序没问题，我重建了。我在谷歌上查了一下，没有找到关于这个问题的准确参考。你面对它并修复它吗？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:48:54.473

你在建立一个静态库吗？您可能需要检查输出目标类型的项目设置。

# internet-explorer - IE中的内阴影

> ID：12698074
> 
> 赞同：0
> 
> 时间：2012-10-02T20:47:32.353
> 
> 标签：internet-explorer, css

以下内容的 IE 7+ 兼容 CSS 代码是什么：

```
 -moz-box-shadow:    inset 0 0 10px rgba(0, 0, 0, 0.25);
 -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.25);
 box-shadow:         inset 0 0 10px rgba(0, 0, 0, 0.25); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:42:35.237

阅读我的文章： [http ://dev.opera.com/articles/view/cross-browser-box-shadows/](http://dev.opera.com/articles/view/cross-browser-box-shadows/)

在纯色背景的情况下，在 IE8- 中创建插入框阴影是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:52:43.783

您可能必须使用 IE 过滤器：[Shadow Filter for IE 5.5+](http://msdn.microsoft.com/en-us/library/ms533086%28v=vs.85%29.aspx)

或其他方法，但我不确定插入部分：[Box Shadow - CSS Tricks](http://css-tricks.com/snippets/css/css-box-shadow/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:01:47.680

IE7/8 不支持`box-shadow`标准 CSS。

可以使用 IE 的专有风格使其工作`filter`，但这可能会非常痛苦并且绝对不标准。

另一种方法是使用[CSS3Pie](http://css3pie.com/)。这是一个针对 IE 6/7/8 的小型 javascript hack，它实现了标准 CSS`box-shadow`以及这些旧浏览器中的一些其他样式。

只需下载 css3pie 脚本`pie.htc`并将其复制到您的站点。然后在样式旁边的 CSS 中引用它`box-shadow`：

```
.myClass {
  -moz-box-shadow:    inset 0 0 10px rgba(0, 0, 0, 0.25);
  -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.25);
  box-shadow:         inset 0 0 10px rgba(0, 0, 0, 0.25);
  behavior: url(/PIE.htc);
} 
```

有关更多信息，请参见 CSS3Pie 网站：[http ://css3pie.com/](http://css3pie.com/)

# java - 来自资源关闭的异常最终隐藏了另一个——谁在乎？

> ID：12698075
> 
> 赞同：4
> 
> 时间：2012-10-02T20:47:38.920
> 
> 标签：java, exception-handling, java-io

首先，很抱歉问了一个关于什么是老生常谈的话题的问题。我遇到了很多问题，答案建议从关闭 finally 块中的资源的方法中吞下（捕获和忽略/记录）潜在异常。这似乎是一种普遍接受的模式。但是我还没有看到有人解释*原因*。这里只是一个例子：[Try-catch-finally 和 try catch](https://stackoverflow.com/questions/1335812/try-catch-finally-and-then-again-a-try-catch)。

我知道从 finally 块抛出的任何异常都会“掩盖”在相应的 try 块中抛出的任何异常，但我不明白为什么这是一件坏事。例如：

```
Resource r = new Resource();
try {
    r.use();
    other();
} finally {
    r.close();
} 
```

我目前的理解是：

1.  如果只是`close`抛出一个异常，我们绝对不想吞下它。
2.  如果两者都`use`抛出`close`异常，则可能是出于相同的根本原因，并且传播哪个异常并不重要（它们都将包含同样有用的信息？）。
3.  如果两者都`other`抛出`close`异常，则有两个不相关的问题。可以说，首先发生的那个应该传播，但是没有任何理由表明第一个异常*导致*了第二个异常（存在吗？），所以两者都可以。

我错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:53:18.100

> 如果只是 close 抛出异常，我们绝对不想吞下它。

这是正确的！

> 如果 use 和 close 都抛出异常，则可能是出于相同的根本原因，并且传播哪个异常并不重要（它们都将包含同样有用的信息？）。

并不真地。中的异常`try`可能是`NullPointerException`或`OutOfMemoryError`描述问题性质的实际 I/O 异常。即使是 I/O 异常，错误也可能使流处于不一致状态（甚至过早关闭）。调用`close()`可能会产生*完全*不同的错误，例如“*流已关闭*”、“*内部错误*”等。

系统中的一个错误往往会引发数十个其他错误，有时看起来非常不相关。始终寻找根本原因的第一个异常。其余的只是垃圾。一个很好的例子是初始化失败并使对象处于不一致状态。后来你到处都能看到`NullPointerException`s，但真正的问题发生得更早。

> 如果 other 和 close 都抛出异常，则有两个不相关的问题。[...] 没有任何理由表明第一个异常导致了第二个异常（存在吗？），所以两者都可以。

实际上，*这两个*例外都是进口，但第一个可能更相关。解决方案？`AutoCloseable`在 Java 7 和[try-with-resources idiom 中使用](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html)资源。如果清理时发生异常，它将附加到原始异常作为*抑制*：

```
class Resource implements AutoCloseable  //... 
```

接着：

```
try(Resource r = new Resource()) {
    r.use();
    other();
} 
```

异常将如下所示：

```
MyException: Exception in use()
at Resource.use(Main.java:11)
at Main.main(Main.java:16)
    Suppressed: java.lang.RuntimeException: Exception in close()
        at Main.close(Main.java:6)
        at Main.main(Main.java:17)
        } 
```

# asp.net-mvc - .NET MVC4 Facebook、Google 和 Twitter 登录

> ID：12698077
> 
> 赞同：4
> 
> 时间：2012-10-02T20:47:46.877
> 
> 标签：asp.net-mvc, facebook, dotnetopenauth

我正在使用 .NET MVC4，我想要一个身份验证扩展 Facebook、Google 和 Twitter。我下载了 DotNetOpenAuth 4.1，但我在网上找不到任何关于如何将其与我的应用程序集成并在我的视图中拥有提供商登录表单的示例。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:52:25.573

你不必做任何事情。MVC4 在默认 Internet 模板中包含此功能。

只需生成一个新的 MVC4 应用程序，选择互联网模板，运行它并使用您的 facebook id 登录。

# ruby-on-rails - 预编译资产后 CSS 在本地消失

> ID：12698080
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:03.843
> 
> 标签：ruby-on-rails, asset-pipeline

现在，对于那些在使用 Rails 时熟悉前端内容的人来说，这可能是一个愚蠢的问题，但我不是其中之一。

我不确定这样做是否是一种不好的做法：我在加载本地服务器之前在本地预编译资产以查看使用`rake assets:precompile`. 我不应该这样做吗？

但我的实际问题是，上次我预编译资产时，我的整个 CSS 样式表似乎从视图中消失了，我正在为其制作布局的页面现在看起来像一个原始 HTML 页面。

已经尝试过`rake assets:clean`了（不确定这是否应该有帮助）。

原谅我的经验不足，我是前端的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:04:06.220

如果您处于开发模式，则不必预编译它们。因此，将它们从 public/ 中删除，然后运行您的服务器。

# firefox-addon - 如何使用 xpidl (header.py, typelib.py)

> ID：12698081
> 
> 赞同：5
> 
> 时间：2012-10-02T20:48:04.437
> 
> 标签：firefox-addon, xul, xpcom, xulrunner

我正在编写一个 XPCOM 组件。我有我的 idl 文件，它非常简单，只包含以下内容：

```
#include "nsISupports.idl"

[scriptable, uuid(4ead-ba5c-49c9-beb2=64209c7699a)]
interface nsIPageSummary : nsISupports
{
    boolean saveSummary(in nsIDOMDocument document,
                        out unsigned long numLinks,
                        out unsigned long numImages);
}; 
```

我下载了 xulrunner sdk 并尝试通过以下命令从包含上述文件 (nsIPageSummary.idl) 的目录中生成我的标头：

~/xulrunner-sdk/sdk/bin/header.py --cachedir=~/xulrunner-sdk/idl/ -o nsIPageSummary.h nsIPageSummary.idl

当它运行时，我收到以下消息：

```
$ ~/xulrunner-sdk/sdk/bin/header.py --cachedir=~/xulrunner-sdk/idl -o nsIPageSummary.h nsIPageSummary.idl 
Traceback (most recent call last):
  File "~/xulrunner/xulrunner-sdk/sdk/bin/header.py", line 497, in <module>
    idl.resolve(options.incdirs, p)
  File "~/xulrunner/xulrunner-sdk/sdk/bin/xpidl.py", line 285, in resolve
    p.resolve(self)
  File "~/xulrunner-sdk/sdk/bin/xpidl.py", line 255, in resolve
    raise IDLError("File '%s' not found" % self.filename, self.location)
xpidl.IDLError: error: File 'nsISupports.idl' not found, nsIPageSummary.idl line 1:0
#include "nsISupports.idl" 
```

我已验证文件存在于上述文件夹中。我使用 MDN 链接（https://developer.mozilla.org/en-US/docs/XPIDL/pyxpidl）作为指南，但它没有多大帮助。我如何使用这些工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:10:23.567

您应该定义`~/xulrunner-sdk/idl/`为您的包含路径：

```
~/xulrunner-sdk/sdk/bin/header.py -I ~/xulrunner-sdk/idl/ ... 
```

另一方面，缓存目录实际上应该是[文档](https://developer.mozilla.org/en-US/docs/XPIDL/pyxpidl)建议的某个临时目录。

# racket - 处理队列和队列的测试用例

> ID：12698082
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:11.337
> 
> 标签：racket

您好，我想了解 mo 程序到底出了什么问题。我已经为球拍中的队列的入队、出队、顶部和大小编写了代码。我还编写了测试用例来在模块中试用我的程序。当我尝试通过键入以下命令“racket run-tests.rkt | less”来运行测试用例时，我收到以下错误：“default-load-handler: expected only a `module' declaration for`queue', but found an extra expression in : #

=== 上下文 === 默认加载/使用编译“

这是我的三个文件和其中的代码

1-队列.rkt

```
(module queue racket
  (provide make-queue enqueue dequeue top size queue-tests)
  (struct queue (front back size) #:mutable #:transparent)

    (define (make-queue) (queue null null 0))

(define (enqueue q elt)
    (set-queue-back! q (cons elt (queue-back q)))
    (set-queue-size! q (+ (queue-size q) 1))
    )
(define (dequeue q)
    (cond  ((eq? (queue-size q) 0) null)
           ((null? (queue-front q))
            (begin
              (set-queue-front! q (cdr (reverse (queue-back q))))
              (set-queue-back! q null)
              (set-queue-size! q (- (queue-size q) 1))))
           (else
            (begin
              (set-queue-front! q (cdr (queue-front q)))
              (set-queue-size! q (- (queue-size q) 1))))
           )
  )

  (define (top q)
    (cond ((eq? (queue-size q) 0) null)
          ((null? (queue-front q)) (last (queue-back q)))
          (else (car (queue-front q)))))

   (define (size q)
    (queue-size q))

  ; Test cases Here
  (include "test-queue.rkt")
) 
```

2-测试队列.rkt

```
 #lang racket/base

 (require rackunit)

 (define queue-tests
  (test-suite
    "Tests for the Queue"

    (test-case "Initial Queue Properties"
    (let  ((q (make-queue)))
      (check-equal? (size q) 0 "Queue initially should have size zero.")
      (check-equal? (dequeue q) null "Dequeue on an empty queue returns null")
      (check-equal? (size q) 0 "Dequeue on empty queue leaves size as zero")
      ))

    (test-case "One Element queue ---- Functional test"
       (let ((q (make-queue)))
         (check-equal? (size q) 0 "Stack initially should be of size zero")
         (enqueue q 1)
         (check-equal? (size q) 1 "Added one element to back of queue")
         (check-equal? (top q) 1 "Take a sneak peak at our first element")
         (dequeue q)
         (check-equal? (size 1) 0 "size should now be zero")
         (check-equal? (dequeue q) null "dequeue on empty queue returns null")
         ))

    (test-case "One Element queue --- Internal Test"
       (let  ((q (make-queue)))
         (check-equal? (size q) 0 "queue initially should have size zero.")
         (enqueue q 3)
         (check-equal? (size q) 1 "Added one element.")
         (check-equal? (queue-back q) '(3) "Is the element in the back list?")
         (check-equal? (top s) 3 "Look at our one element.")
         (check-equal? (queue-front q) '(3) "Is the element in the front list?")
         (dequeue s)
         (check-equal? (queue-front q) '() "Is the data empty now?")
         ))

    (test-case "Multi Element queue --- Functional Test"
    (let  ((q (make-queue))
           (elts (list 8 6 7 5 3 0 9))
           )
      (check-equal? (size q) 0 "queue initially should have size zero.")
      (for ((i elts)
            (num (in-range 1 8)))
           (enqueue q i)
           (check-equal? (size q) num "Testing size.")
           (check-equal? (top q) i "Testing top with multiple additions.")
           )
      (for ((i (reverse elts))
            (num (reverse (stream->list (in-range 1 8)))))
           (check-equal? (top q) i "Testing top with multiple deletions")
           (dequeue q)
           (check-equal? (size q) (- num 1) "Testing size.")
           )
      ))

    (test-case "Multi Element queue --- Ebb and Flow Test"
       (let  ((q (make-queue))
              (elts (list 8 6 7 5 3 0 9))
              )
         (check-equal? (size q) 0 "queue initially should have size zero.")
         (for ((i elts)
           (num (in-range 1 8)))
              (enqueue q i)
              (check-equal? (size q) num "Testing size, first flow.")
              (check-equal? (top q) i "Testing top with multiple additions.")
           )
         (for ((i (reverse elts))
               (num (reverse (stream->list (in-range 1 8)))))
              (check-equal? (top q) i "Testing top with multiple deletions")
              (dequeue q)
              (check-equal? (size q) (- num 1) "Testing size, first ebb.")
           )
         (for ((i elts)
               (num (in-range 1 8)))
               (enqueue q i)
               (check-equal? (size q) num "Testing size, second flow.")
               (check-equal? (top q) i "Testing top with multiple additions.")
           )
         (for ((i (reverse elts))
               (num (reverse (stream->list (in-range 1 8)))))
               (check-equal? (top q) i "Testing top with multiple deletions")
               (dequeue q)
               (check-equal? (size q) (- num 1) "Testing size, second ebb.")
           )
      ))

   (test-case "Multi Element queue --- Internal Test"
    (let  ((q (make-queue))
           (elts (list 5 8 8 2 3 0 0))
           (tmp null)
           )
      (for ((i elts)
            (num (in-range 1 8)))
           (enqueue q i)
           (check-equal? (size q) num "Testing size, second flow.")
           (set! tmp (cons i tmp)) ; "push" element to a list
           (check-equal? (queue-front q) tmp "Queue data is in correct form.")
           )
      ))

    )) 
```

3-运行测试.rkt

```
#lang racket/base

(require "queue.rkt")

(require rackunit/text-ui)

(run-tests queue-tests) 
```

在发现存在的错误方面提供任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:11:24.117

我相信，您所指的错误可能是由于您的“queue.rkt”文件中的语言级别设置不正确造成的。特别是，所有这三种语言的语言都应设置为

“使用源中声明的语言”。

老实说，我真的不确定您为什么要将其构建为三个独立的模块；我认为这给您带来了额外的困难，但这样做当然应该可以。

编辑：看起来你有问题。特别是，在定义“大小”之后，您有三个近括号。DrRacket 在你跑步时不会为你突出这个问题吗？

编辑 2：哦，糟糕：您正在使用“包含”。不要使用包含。

编辑 3：好的，在这里：我将您的代码重新格式化为一个文件：

```
(module queue racket

  (require rackunit)

  (provide make-queue enqueue dequeue top size)
  (struct queue (front back size) #:mutable #:transparent)

  (define (make-queue) (queue null null 0))

  (define (enqueue q elt)
    (set-queue-back! q (cons elt (queue-back q)))
    (set-queue-size! q (+ (queue-size q) 1))
    )
  (define (dequeue q)
    (cond  ((eq? (queue-size q) 0) null)
           ((null? (queue-front q))
            (begin
              (set-queue-front! q (cdr (reverse (queue-back q))))
              (set-queue-back! q null)
              (set-queue-size! q (- (queue-size q) 1))))
           (else
            (begin
              (set-queue-front! q (cdr (queue-front q)))
              (set-queue-size! q (- (queue-size q) 1))))
           )
    )

  (define (top q)
    (cond ((eq? (queue-size q) 0) null)
          ((null? (queue-front q)) (last (queue-back q)))
          (else (car (queue-front q)))))

  (define (size q)
    (queue-size q))

  (test-case "Initial Queue Properties"
             (let  ((q (make-queue)))
               (check-equal? (size q) 0 "Queue initially should have size zero.")
               (check-equal? (dequeue q) null "Dequeue on an empty queue returns null")
               (check-equal? (size q) 0 "Dequeue on empty queue leaves size as zero")
               ))

  (test-case "One Element queue ---- Functional test"
             (let ((q (make-queue)))
               (check-equal? (size q) 0 "Stack initially should be of size zero")
               (enqueue q 1)
               (check-equal? (size q) 1 "Added one element to back of queue")
               (check-equal? (top q) 1 "Take a sneak peak at our first element")
               (dequeue q)
               (check-equal? (size 1) 0 "size should now be zero")
               (check-equal? (dequeue q) null "dequeue on empty queue returns null")
               ))

  #;(test-case "One Element queue --- Internal Test"
             (let  ((q (make-queue)))
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (enqueue q 3)
               (check-equal? (size q) 1 "Added one element.")
               (check-equal? (queue-back q) '(3) "Is the element in the back list?")
               (check-equal? (top s) 3 "Look at our one element.")
               (check-equal? (queue-front q) '(3) "Is the element in the front list?")
               (dequeue s)
               (check-equal? (queue-front q) '() "Is the data empty now?")
               ))

  (test-case "Multi Element queue --- Functional Test"
             (let  ((q (make-queue))
                    (elts (list 8 6 7 5 3 0 9))
                    )
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size.")
                 )
               ))

  (test-case "Multi Element queue --- Ebb and Flow Test"
             (let  ((q (make-queue))
                    (elts (list 8 6 7 5 3 0 9))
                    )
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, first flow.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size, first ebb.")
                 )
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, second flow.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size, second ebb.")
                 )
               ))

  (test-case "Multi Element queue --- Internal Test"
             (let  ((q (make-queue))
                    (elts (list 5 8 8 2 3 0 0))
                    (tmp null)
                    )
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, second flow.")
                 (set! tmp (cons i tmp)) ; "push" element to a list
                 (check-equal? (queue-front q) tmp "Queue data is in correct form.")
                 )
               ))

  ) 
```

当我运行此代码时，我在您的一个测试用例中遇到了一个非常简单的错误。

更一般地说，我很吃惊你会编写这么多测试代码而不运行它:)。我个人会编写一个小测试用例然后进行尝试，而不是在发现更基本的问题之前完成所有这些工作。我钦佩你的坚韧，但我认为你需要更多的偏执狂:)

如果您有更多麻烦，请告诉我。

编辑：根据您的要求分成两个文件。

文件 1：queue.rkt

```
(module queue racket

  (provide make-queue enqueue dequeue top size)
  (struct queue (front back size) #:mutable #:transparent)

  (define (make-queue) (queue null null 0))

  (define (enqueue q elt)
    (set-queue-back! q (cons elt (queue-back q)))
    (set-queue-size! q (+ (queue-size q) 1)))

  (define (dequeue q)
    (cond  ((eq? (queue-size q) 0) null)
           ((null? (queue-front q))
            (begin
              (set-queue-front! q (cdr (reverse (queue-back q))))
              (set-queue-back! q null)
              (set-queue-size! q (- (queue-size q) 1))))
           (else
            (begin
              (set-queue-front! q (cdr (queue-front q)))
              (set-queue-size! q (- (queue-size q) 1))))))

  (define (top q)
    (cond ((eq? (queue-size q) 0) null)
          ((null? (queue-front q)) (last (queue-back q)))
          (else (car (queue-front q)))))

  (define (size q)
    (queue-size q))

  ) 
```

文件 2：queue-tests.rkt，在同一目录中：

```
(module test-queue racket

  (require "queue.rkt"
           rackunit)

  (test-case "Initial Queue Properties"
             (let  ((q (make-queue)))
               (check-equal? (size q) 0 "Queue initially should have size zero.")
               (check-equal? (dequeue q) null "Dequeue on an empty queue returns null")
               (check-equal? (size q) 0 "Dequeue on empty queue leaves size as zero")
               ))

  (test-case "One Element queue ---- Functional test"
             (let ((q (make-queue)))
               (check-equal? (size q) 0 "Stack initially should be of size zero")
               (enqueue q 1)
               (check-equal? (size q) 1 "Added one element to back of queue")
               (check-equal? (top q) 1 "Take a sneak peak at our first element")
               (dequeue q)
               (check-equal? (size 1) 0 "size should now be zero")
               (check-equal? (dequeue q) null "dequeue on empty queue returns null")
               ))

  (test-case "One Element queue --- Internal Test"
             (let  ((q (make-queue)))
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (enqueue q 3)
               (check-equal? (size q) 1 "Added one element.")
               (check-equal? (queue-back q) '(3) "Is the element in the back list?")
               (check-equal? (top s) 3 "Look at our one element.")
               (check-equal? (queue-front q) '(3) "Is the element in the front list?")
               (dequeue s)
               (check-equal? (queue-front q) '() "Is the data empty now?")
               ))

  (test-case "Multi Element queue --- Functional Test"
             (let  ((q (make-queue))
                    (elts (list 8 6 7 5 3 0 9))
                    )
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size.")
                 )
               ))

  (test-case "Multi Element queue --- Ebb and Flow Test"
             (let  ((q (make-queue))
                    (elts (list 8 6 7 5 3 0 9))
                    )
               (check-equal? (size q) 0 "queue initially should have size zero.")
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, first flow.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size, first ebb.")
                 )
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, second flow.")
                 (check-equal? (top q) i "Testing top with multiple additions.")
                 )
               (for ((i (reverse elts))
                     (num (reverse (stream->list (in-range 1 8)))))
                 (check-equal? (top q) i "Testing top with multiple deletions")
                 (dequeue q)
                 (check-equal? (size q) (- num 1) "Testing size, second ebb.")
                 )
               ))

  (test-case "Multi Element queue --- Internal Test"
             (let  ((q (make-queue))
                    (elts (list 5 8 8 2 3 0 0))
                    (tmp null)
                    )
               (for ((i elts)
                     (num (in-range 1 8)))
                 (enqueue q i)
                 (check-equal? (size q) num "Testing size, second flow.")
                 (set! tmp (cons i tmp)) ; "push" element to a list
                 (check-equal? (queue-front q) tmp "Queue data is in correct form.")
                 )
               ))) 
```

# geolocation - QGIS 是否支持 WMS-T（WMS with time）？

> ID：12698083
> 
> 赞同：6
> 
> 时间：2012-10-02T20:48:12.673
> 
> 标签：geolocation, geoserver, wms, qgis

有谁知道QGIS中是否支持WMS-T？

通过该应用程序我可以添加 WMS 图层，但我无法使用 WMS-T（没有设置时间参数的地方）。

我一直在研究 Python 插件，虽然有些插件可以处理时间（时间管理器、多时态和多变量数据可视化），但它们不支持 WMS 协议（它们直接与数据库一起工作）。

问候

注意 - 我正在使用 GeoServer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T19:37:46.387

**更新**：此功能目前正在开发中，您可以在[https://github.com/anitagraser/TimeManager/issues/132上关注进度](https://github.com/anitagraser/TimeManager/issues/132)

* * *

旧：不，QGIS 目前不支持 WMS-T。

您的选择是改进当前的 WMS 提供商，编写插件，赞助开发，......

# c# - WP7每次点击时向上向下和向下向上旋转箭头图像

> ID：12698088
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:26.440
> 
> 标签：c#, windows-phone-7, xaml

我正在将箭头图像从下向上旋转，当用户第一次点击它时它工作正常。

**但我的问题是如何在第二次点击时从下到上反转等等......**

下面是我的 XAML 图像，它位于 longlistselector 控件中

```
 <Image Grid.Column="2" Tap="ArrowDownImg_Tap" x:Name="ArrowDownImg" Margin="0,-10,-33,0" Height="40" Width="40" Source="/Images/appbar.arrow.down.circle.rest.png" /> 
```

旋转图像的点击代码

```
private void ArrowDownImg_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{           
            Duration duration = new Duration(TimeSpan.FromMilliseconds(500));
            Storyboard sb = new Storyboard();
            sb.Duration = duration;

            DoubleAnimation da = new DoubleAnimation();
            da.Duration = duration;

            sb.Children.Add(da);

            RotateTransform rt = new RotateTransform();

            Storyboard.SetTarget(da, rt);
            Storyboard.SetTargetProperty(da, new PropertyPath("Angle"));
            da.To = 180;

            ImageShowHide.RenderTransform = rt;
            ImageShowHide.RenderTransformOrigin = new Point(0.5, 0.5);

            sb.Begin();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:20:17.053

执行此 IMO 的最佳方法是使用样式。实际上，这看起来更像是一个切换按钮而不是图像。您可以使用[默认控制模板](http://msdn.microsoft.com/en-us/library/cc296245%28v=vs.95%29.aspx)进行工作。

```
<Style TargetType="ToggleButton" x:Key="FlipButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CheckStates">
                            <VisualState x:Name="Checked">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" Storyboard.TargetName="rotate" Storyboard.TargetProperty="(RotateTransform.Angle)" To="180" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unchecked">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" Storyboard.TargetName="rotate" Storyboard.TargetProperty="(RotateTransform.Angle)" To="0" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <ContentPresenter Content="{TemplateBinding Content}">
                        <ContentPresenter.RenderTransform>
                            <RotateTransform x:Name="rotate" CenterX="0.5" CenterY="0.5" />
                        </ContentPresenter.RenderTransform>
                    </ContentPresenter>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

将样式放在资源部分中，然后您可以从切换按钮中引用它。

```
<ToggleButton x:Name="MyToggleButton" Style="{StaticResource FlipButton}">
    <ToggleButton.Content>
        <Image Source="/Images/appbar.arrow.down.circle.rest.png" />
    </ToggleButton.Content>
</ToggleButton> 
```

现在，您也不需要单击处理程序，只需将文本框可见性直接绑定到切换按钮即可。

```
<TextBlock Text="Hello world" Visibility="{Binding ElementName=MyToggleButton,Path=IsChecked,Converter={StaticResource ValueConverterBoolToVis}}" /> 
```

有很多关于使用控制模板和视觉状态的资源，这是MSDN 上[的一个很好的资源。](http://msdn.microsoft.com/en-us/library/cc189093%28v=vs.95%29.aspx)

**编辑**

这是 IValueConverter 的代码。

```
public class ValueConverterBoolToVis : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return ((bool)value) ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

使用将其添加到资源中

```
<local:ValueConverterBoolToVis x:Key="local:ValueConverterBoolToVis" /> 
```

# html - CSS - 浏览器窗口顶部不需要的边距/填充

> ID：12698090
> 
> 赞同：1
> 
> 时间：2012-10-02T20:48:32.190
> 
> 标签：html, css

请看这个网址：http: [//qwiet.com/index.html](http://qwiet.com/index.html)

注意页面换行上方顶部的 20px 左右。我希望 pagewrap div 位于浏览器的顶部并延伸到底部。我尝试在 Firefox、Chrome 和 Safari 中进行检查，但似乎找不到任何增加此边距的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:53:20.617

您在条件注释上方的正文标记中有一些代码 - 查看所有破折号：

```
 <body>-----
        <!--[if lt IE 7]> 
```

删除那些。然后你可以像迈克建议的那样给你的身体`margin:0`，你应该准备好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:50:51.633

它看起来像 body 标签的默认边距。将此附加到您的CSS应该可以解决问题：

```
body { margin: 0px; } 
```

同样，我建议查看 CSS 重置。在 Dan Cederholm 的“Handcrafted CSS”一书中有一些有用的资源

# google-maps - Java 脚本继承不适用于 google.maps.OverlayView

> ID：12698091
> 
> 赞同：1
> 
> 时间：2012-10-02T20:48:34.003
> 
> 标签：google-maps, gwt, javascript

编辑：在工作了一天之后，我相信我知道发生了什么，但我还没有确认。一旦我确定，我会发布它作为答案。

我很确定发生了什么是因为 Google Maps API 是通过 AjaxLoader 实用程序从 GWT 加载的，所以当加载包含 USGSOverlay 代码的 javascript 库时，google.maps.OverlayView 没有被解析，所以该行

```
USGSOverlay.ptototype=google.maps.OverlayView(); 
```

清除对象的原型信息。我现在正在努力在 AjaxLoader.loadApi() 方法完成后动态加载 USGSOverlay 库。

另一个症状：当原型设置为 google.maps.OverlayView() 时，它会破坏 USGSOverlay 的继承，以及我附加到文件底部的测试对象的继承。如果我通过将这些行添加到 JS 库文件的开头来更改我的 USGSOverlay 对象的继承，

```
function OverlayParent() {
}

OverlayParent.prototype.setMap= function(map) {} 
```

并将我的*USGSOverlay.prototype*更改为等于*new OverlayParent()*继承有效，我没有得到异常*this.SetMap(map) is not a function*。

如果有人对此有现成的解决方案，我会很感激一个链接，但我正在寻求一个类似于这个[DOM-Based On-Demand Javascript的解决方案](http://ajaxpatterns.org/On-Demand_Javascript#DOM-Based_On-Demand_Javascript)

* * *

我是 Java Script 的新手，但是一个非常有经验的程序员，这让我很难过。我已经为此工作了几天，进展甚微。在最新版本中，我几乎完全复制了来自[Google Maps JavaScript API v3 CustomOverlay](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)的代码。OverlayView 的相关文档指出*“您应该通过将叠加层的原型设置为新的 OverlayView.prototype 来继承此类。”* 我真的不认为我遇到的问题是特定于 Google Maps API 的。这是代码。

```
function USGSOverlay(bounds, image, map) {
  // Now initialize all properties.
  this.bounds_ = bounds;
  this.image_ = image;
  this.map_ = map;

  // We define a property to hold the image's
  // div. We'll actually create this div
  // upon receipt of the add() method so we'll
  // leave it null for now.
  this.div_ = null;

  // Explicitly call setMap() on this overlay

  this.setMap(map);
}

USGSOverlay.prototype = new google.maps.OverlayView();
USGSOverlay.prototype.constructor=USGSOverlay; 
```

接下来是前面描述的 onAdd、draw 和 onRemove 的示例实现。

单步执行代码一切正常，直到调用继承的方法 setMap 引发以下异常：

```
Cannot load Google Maps API to your browser (TypeError): this.setMap is not a function; 
```

Fire bug 显示未设置**proto变量。**所以继承没有发生。我最初是通过 GWT JSNI 函数调用构造函数，但为了消除这部分等式，我编写了第二个测试 Java Script 对象来验证我传入的参数是否正确。该函数如下所示：

```
function TestUSGSOverlay(map,inBound) {
  var swBound = new google.maps.LatLng(39.5, -106.0);
  var neBound = new google.maps.LatLng(40.0, -105);
  var bounds = new google.maps.LatLngBounds(swBound, neBound);
  var sw = inBound.getSouthWest();
  var ne = inBound.getNorthEast();

  var marker = new google.maps.Marker({
      position: sw,
      map: map,
      title:"South West Corner"
  });

  var marker2 = new google.maps.Marker({
      position: ne,
      map: map,
      title:"North East Corner"
  });

  // Photograph courtesy of the U.S. Geological Survey
  var srcImage = 'images/DenverWest.png';
  var usgsMap = new google.maps.GroundOverlay(srcImage,bounds);
  usgsMap.setMap(map);
  this.overlay = new USGSOverlay(bounds, srcImage, map);
 } 
```

如果我注释掉最后一行，地图将正确显示在美国地质调查局地图的西南和东北标记之间。我的实际要求是在表格 div 中显示一些文本，但为了尽可能接近地模仿，我替换了地图扫描。

我已经阅读了许多关于原型继承的帖子，并且我知道这是一个不平凡的主题，但我尝试过的任何事情都没有更接近。我在 IE 8 中的行为与在 Firefox 中的行为相同。您能提供的任何建议将不胜感激，我的想法已经不多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:55:18.547

我遇到了同样的问题，但我不喜欢按照您在答案中描述的方式动态加载自定义覆盖脚本的想法。

你是如何调用`initialize()`函数的？

我正在像这样加载 Google Maps API：

```
<!-- I omitted sensor=false so this would fit without scrollbars -->
<script type="text/javascript" 
    src="http://maps.googleapis.com/maps/api/js?callback=initialize">
</script> 
```

**注意** `callback=initialize`. 这就是导致比赛条件的原因。我`callback=initialize`从获取 API 的查询字符串中删除，并将其添加到我的**init.js**脚本的底部：

```
window.onload = initialize(); 
```

这为我解决了它。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:41:13.320

我终于能够诊断出这个问题并纠正它。这个问题类似于竞态条件，但我不敢这么称呼它，因为正确的顺序永远不会发生。

问题是，在我正在处理的应用程序中，Google Maps API 是通过 Google API 的[AjaxLoader](http://gwt-google-apis.googlecode.com/svn/javadoc/ajaxloader/1.1/index.html)对象加载的，并且我的 USGSOverlay javascript 库作为页面加载过程的一部分被加载。AjaxLoader 从 GWT 入口点方法或 HTML 世界中的 onLoad 异步加载 Google Maps API，这发生在 javascript 已加载之后。没有报错，USGSOverlay的javascript构造函数存在，但是对象的继承不正确。（顺便说一句，任何人都可以推荐可以检测这种情况的工具吗？）

在 firebug 调试器中可以看到无效的继承状态，因为 USGSOverlay 对象没有`__proto__`成员变量。为了纠正这个问题，我添加了逻辑以将 USGSOverlay javascript 库动态加载到传递给 AjaxLoader 的[loadApi](http://gwt-google-apis.googlecode.com/svn/javadoc/ajaxloader/1.1/index.html)方法的 onLoad 回调方法。那么剩下的唯一问题是这种方法依赖于 DOM 来检测页面头部的添加，并执行脚本加载。这反过来又导致了真正的竞争条件，当程序试图访问它时，经常没有加载库。

这是一篇文章的链接，该文章描述了我如何动态加载 java 脚本。[基于需求Javascript的DOM](http://ajaxpatterns.org/On-Demand_Javascript#DOM-Based_On-Demand_Javascript)

为了解决未加载库的竞争条件，我只是添加了一个

```
if (typeof USGSOverlay != 'undefined') { ... } 
```

在调用`new USGSOverlay(...`方法之前进行测试。由于我实际的 OverlayView 派生对象与悬停有关，因此这个简单的预防性异常保护足以满足我的目的。如果您的叠加层是初始显示的一部分，则需要更复杂的方法，但这是您的问题:)。关于如何做到这一点有很多讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T23:26:30.167

因此，根据[文档](https://developers.google.com/chart/interactive/docs/release_notes)，谷歌图表于 2016 年 2 月 23 日发布，是当前的官方版本。

这[就是我发现需要更新](https://developers.google.com/chart/interactive/docs/basic_load_libs#updateloader)的内容。

我希望这有帮助！

干杯，杰伊

# drupal - Drupal - 如何包含“|” 作为每个菜单项的分隔符

> ID：12698092
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:36.487
> 
> 标签：drupal, menu, divider

我正在使用带有 Zen 主题的 Drupal 7。我想在导航栏中添加一个具有以下要求的菜单： 1\. 背景：灰色 2\. 分隔符“|” 划分每个菜单项 3\. 菜单项没有下划线

我能够在 navigation.css 文件中完成#1。你能告诉我如何完成2和3吗？ - - - - - - - - - - - - - - - - - - - 答案 - - - - - -------------------------

对于那些感兴趣的人，这是我完成上述任务的方法：

1.  将背景设置为灰色，编辑 responsive-sidebars.css，在#navigation 代码块下添加“背景：灰色”。

2.  添加分隔符“|”：编辑navigation.css，添加以下代码：

    ```
    #navigation li:before {
        content: "|";
     } 
    ```

3.  菜单项没有下划线，编辑navigation.css，将“text-decoration:none”和#navigation a 添加到“#navigation ul.links li”代码堆中，如下所示：

    ```
    #navigation ul.links li,
    #navigation ul.menu li,
    #navigation a
    { 

      padding: 0px 5px;
      margin-right: 5px;
      border-radius: 5px 5px 5px 5px;
      float:left;
      color:white;
      vertical-align: middle;
      list-style: none;
      text-decoration: none;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:56:25.733

在你正在使用的元素（FOO）上添加一个样式怎么样：

```
FOO:before {
    content: "|";
}
FOO:first-child:before {
    content: "";
} 
```

FOO 是您为导航使用的类或元素。

这里发生的事情是您使用伪元素将管道放置在元素之前，并且第一个孩子在那里确保您没有在第一个项目前面放置管道。（相反，使用 :after 和 :last-child 将同样有效）

# html - 如何防止无序列表中列表元素的重叠边界

> ID：12698093
> 
> 赞同：2
> 
> 时间：2012-10-02T20:48:37.603
> 
> 标签：html, css

所以我有一个通过浮动无序列表的列表元素创建的水平导航栏。它工作正常，但在两个列表元素遇到两个边框的地方形成双倍的所需厚度。有没有办法解决这个问题？

**尝试的一种解决方案：** 我可以指定单个列表元素的左右边框属性，但这种方法似乎不是很有可扩展性，但它确实有效。

你可以在这里查看我的代码和演示[http://jsfiddle.net/mscpg/](http://jsfiddle.net/mscpg/) 或检查下面的代码

**css**

```
 #navigation_bar {
            overflow: hidden;
            list-style-type: none;
            width: 100%;
        }
            #navigation_bar li {
                text-align: center;
                float: left;
                width: 33%;
                border-style: solid;
                border-width: 1px;
                border-color: black;
            } 
```

**HTML**

```
<ul id="navigation_bar">
    <li>Projection</li>
    <li>Real-Time</li>
    <li>Cleanup</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:01:23.950

一种解决方案是：

```
#navigation_bar li {
    border: 1px solid black;
    border-left-width: 0;
}

#navigation_bar li:first-child {
    border-left-width: 1px;
} 
```

**现场演示：http:** [//jsfiddle.net/mscpg/3/](http://jsfiddle.net/mscpg/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:02:53.110

IMO，最简单的方法是将其添加到您的“#navigation_bar li”定义中，如果需要，只需在 ul 中添加 1px 边距以进行补偿：

```
margin-right: -1px; 
```

如果它是一张表格，您将拥有方便的border-collapse 属性选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:04:31.623

有许多可能的解决方案。例如：

```
#navigation_bar {
  overflow: hidden;
  list-style-type: none;
  width: 100%;
}
#navigation_bar li {
  text-align: center;
  float: left;
  width: 32%;
  border-style: solid;
  border-width: 1px;
  border-color: black;
  border-left:none;
}
#navigation_bar li.first {    
  border-left:solid 1px black;
}
```

```
<ul id="navigation_bar">
  <li class="first">Projection</li>
  <li>Real-Time</li>
  <li>Cleanup</li>
</ul>
```

[演示](http://jsfiddle.net/mscpg/2/)

另外 -[这里](http://jsfiddle.net/mscpg/1/)是负边距​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T21:04:57.163

I think it would be a better idea to use `display: inline-block` instead of floating everything. For example:

```
 #navigation_bar {
        overflow: hidden;
        list-style-type: none;
        width: 100%;
    }
    #navigation_bar li {
        text-align: center;
        display: inline-block;
        width: 30%; /* Slightly smaller width to fix the borders */
        border-style: solid;
        border-width: 1px;
        border-color: black;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T21:13:12.373

我认为最简单的方法是给列表中的最后一个项目一个 id 或类，然后给它自己的边框

[在 jsbin 上](http://jsbin.com/ayoduw/1/edit)查看它的实际效果

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T21:00:14.590

您始终可以在 div 中包含列表项，然后将列表项的边框指定为所需查看大小的一半。然后，您可以将 div 包含在所需大小的一半的左右边框中。

# wcf - 如何使用 wcf restful webservice 指定 xsd

> ID：12698094
> 
> 赞同：1
> 
> 时间：2012-10-02T20:48:40.837
> 
> 标签：wcf, rest, xsd, schema

我有一个安静的 wcf webservice，它发出以下 xml：

```
<foo xmlns="http://www.contoso.com" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Name>Amy</Name>
    <Score>78</Score>
</foo> 
```

wcf 服务契约是这样装饰的：

```
[OperationContract]
[WebGet(UriTemplate = "/getperson/{parm1}", ResponseFormat = WebMessageFormat.Xml)] 
```

我如何获得添加到生成的 xml 中的 xsd 的链接，以便当客户端使用它时，他们将具有要读取的模式？

# objective-c - 是否可以判断正在加载的网页是远程还是本地？

> ID：12698098
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:52.833
> 
> 标签：objective-c, ios, cocoa-touch, uiwebview

内`UIWebView:shouldStartLoadWithRequest:`，我想知道正在加载的页面是本地文件还是远程文件。有没有一种简单的方法可以找出这个问题？

我想每次加载文件时，我都可以搜索文件系统以查找文件，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:04:56.333

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:16:11.280

对的，这是可能的。您应该使用正则表达式来测试主机名。本地页面与正则表达式不匹配。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    static NSString *regexp = @"^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9-]*[a-zA-Z0-9])[.])+([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$";
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regexp];

    if ([predicate evaluateWithObject:request.URL.host]) {
        [[UIApplication sharedApplication] openURL:request.URL];
        return NO; 
    } else {
        return YES; 
    }
} 
```

# mysql - Mysql select语句中的正则表达式

> ID：12698101
> 
> 赞同：0
> 
> 时间：2012-10-02T20:48:59.693
> 
> 标签：mysql, regex, performance

我需要在数据库中搜索一些用户输入模式。
在 Mysql 语句的 where 子句中使用正则表达式是否有效`SELECT`（索引列上的 10000 行规模）？
我的搜索是日期，可以是这三种形式：

*   `2012`应该匹配`2012`，`2012/*`&`2012/*/*`
*   `2012/10`应该匹配`2012/10`&`2012/10/*`
*   `2012/10/3`应该只匹配`2012/10/3`

注意：我有三列应该分别检查这种类型的匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:00:24.030

虽然我在 MySQL 文档中找不到明确的参考，但由于索引结构，正则表达式匹配*不能使用索引查找*。

他们可能会使用正则表达式而不是扫描整个表来扫描索引，但是任何正则表达式搜索都或多或少等同于全表扫描。

如果您的正则表达式以常量字符串开头，您可能希望将查询构造为；

```
SELECT * FROM TableA WHERE field LIKE 'tr%' AND field RLIKE 'tr[uae].*' 
```

从 LIKE 获得一些索引帮助 - 如果从字符串的开头匹配 - 可以使用索引来发挥其优势。

编辑：由于您的选择非常简单并且从字符串的开头匹配，您可以使用 LIKE 使它们工作，这*将很好地利用索引*；

```
SELECT * FROM TableA WHERE field1='2012' OR field1 LIKE '2012/%'
SELECT * FROM TableA WHERE field1='2012/10' OR field1 LIKE '2012/10/%'
SELECT * FROM TableA WHERE field1='2012/10/3' 
```

将比较分成两部分的原因是为了避免搜索只与涵盖两种情况的 LIKE`2012/1`匹配`2012/10`（即`LIKE '2012/1%'`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:57:11.677

发生这种情况是因为 LIKE 不应该接受正则表达式作为参数。这些事情有[REGEXP](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)

```
WHERE field NOT REGEXP '%_[0-9]+' 
```

# python - python属性文档字符串是常用的吗？

> ID：12698102
> 
> 赞同：11
> 
> 时间：2012-10-02T20:49:00.227
> 
> 标签：python

一方面，我们被鼓励只创建字段，而不是用模仿其他语言的额外访问器函数来包裹我们的 python 类。

另一方面，[“属性文档字符串”的 PEP](http://www.python.org/dev/peps/pep-0224/)被拒绝。

另一方面，[epydoc](http://epydoc.sourceforge.net/manual-docstring.html)和[sphinx](http://sphinx.pocoo.org/ext/autodoc.html#directive-autoattribute)支持它们。冒着提出非建设性问题的风险，在类中记录变量是否存在单一、清晰、通用的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:05:25.010

自从我被要求这样做以来，我将我的评论改写为答案。

通常，实例（公共）属性是不言自明的，用户使用它们不需要文档。属性的名称和上下文足以明确属性是什么，您可以在*类的文档中添加一些关于如何处理它的文档*。

在某些情况下，您可能最终希望为用户提供属性的访问权限，但该属性不够自我解释和/或其处理需要注意（因为如果处理不当，它可能会“搞砸” ）。

例如，您可能希望让用户知道属性应该具有特定的“接口”以允许使用它。或者您必须解释该属性必须满足的条件。

在这种情况下，将文档与课程的文档放在一起并不是一个好主意，因为课程的文档越来越长，并且解释了很多非常具体的知识。

简单且我认为更优雅的解决方案是使用属性。属性允许您向属性添加文档字符串，*并*为您提供一种实际控制对它的访问的方法，从而使类更加健壮。

如果你必须处理很多属性，那么编写几十个属性可能会很麻烦，但你仍然可以动态添加它们，例如使用装饰器。这很有效，特别是如果您只想添加一个文档字符串，始终使用相同类型的 getter/setter。

例如你可以写：

```
def set_properties(names_to_docs):
    def decorator(cls):
        for name, doc in names_to_docs.items():
            prop = property((lambda self: getattr(self, '_{}'.format(name))),
                            (lambda self, val: setattr(self, '_{}'.format(name), val),
                            doc=doc)
            setattr(cls, name, prop)
        return cls
    return decorator 
```

并像这样使用它：

```
>>> @set_properties({'a': 'This is a', 'b': 'This is b'})
>>> class Test:
...     def __init__(self):
...         self._a = 1
...         self._b = 2
... 
>>> print(Test.a.__doc__)
This is a
>>> Test().a
1 
```

Lukas Graf 在评论中指出，您可以使用 Zope.interface 创建一个简单描述具体类的类，这使您有机会将文档字符串添加到属性中。这可能是另一种选择。我没有使用 Zope.interface 的经验，所以我无法确切地知道你能做什么，如何，以及它最终如何与自动文档程序交互。

# java - 右逻辑/无符号移位为符号位插入 1 而不是 0

> ID：12698105
> 
> 赞同：2
> 
> 时间：2012-10-02T20:49:13.037
> 
> 标签：java, bit-manipulation, bit-shift

我正在处理从不遵循 IEEE 标准的 CCS 转换浮点数（而不是符号位、指数、尾数，他们使用指数、符号位、尾数）；我在使用`>>>`运算符时遇到了一些奇怪的行为。

给定

```
byte byte1=(byte)0x8A;     //10001010
byte byte2=(byte)(byte1>>>1);       //11000101 
```

既然`>>>`指定它将插入 a `0`，为什么我会得到 a `1`？

我可以围绕这个编写代码并手动翻转位，但我不想最终发现它是特定于平台的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:09:51.953

在 Java 中，字节在移位操作之前自动转换为整数。Codologically，你在做什么相当于：

```
byte byte2=(byte)(((int)byte1)>>>1); 
```

而且，当然，转换为 int 符号会扩展。如果您将结果保留为整数，您将看到（当时）预期值 0x7FFFFFC5。

为了解决这个问题，只需将第 8 位屏蔽。

```
byte byte2 = (byte) (byte1 >>> 1 & 0x7F); 
```

[相关问题](https://stackoverflow.com/questions/3948220/behaviour-of-unsigned-right-shift-applied-to-byte-variable)

这种行为不是明智和预期的吗，java不是很好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:09:25.947

不要使用字节，坚持使用int。但是，运行以下代码：

```
 int int1 = 0x8A;
    System.out.println(formatBinary(int1));
    int int2 = int1 >>> 1;
    System.out.println(formatBinary(int2)); 
```

让我得到这个输出（使用名为 formatBinary 的格式化打印方法，这是无关的）：

```
8a: 10001010
45: 01000101 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:50:32.063

您使用的是整数，而不是字节。这些`int`值必须比您要移入的第 8 位多 1 位。

# shell - Makefile 命令与文件夹名称冲突

> ID：12698109
> 
> 赞同：1
> 
> 时间：2012-10-02T20:49:29.560
> 
> 标签：shell, makefile, zsh

我的 Makefile 有一个小问题，它与文件夹冲突。首先，我使用 Makefile 来运行几个 shell 命令每个示例：

生成文件内容：

```
test:
    @./node_modules/.bin/mocha -R $(REPORTER) \
        $(WATCH) \
        --ui $(UI) 
```

如果在 Makefile 的同一目录中，我有一个`test`运行时命名的文件夹：

```
make test 
```

我得到以下结果：

```
make: `test' is up to date. 
```

我真的不知道如何更好地解释这一点，但我很乐意回答并询问更多细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:04:31.080

我不知道 mocha 是什么（我猜它是 Cocoa 和 Java 的某种组合），但是尝试在规则之外[将此行添加到您的 makefile 中：](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)

```
.PHONY: test 
```

# ios - 使用现有项目 + cocoapod 依赖项设置 Kiwi

> ID：12698112
> 
> 赞同：1
> 
> 时间：2012-10-02T20:49:40.957
> 
> 标签：ios, objective-c, cocoapods, kiwi

我使用 Cocoapods 成功地将 Kiwi 测试框架添加到我现有的项目中。

```
target :KiwiUnitTest do
    pod 'Kiwi'
end 
```

我可以创建一个非常基本的测试并让它通过：

```
describe(@"A simple test", ^{
    context(@"when adding 1 + 1", ^{
        it(@"should equal 2", ^{
            [[theValue(1+1) should] equal:theValue(2)];
        });
    });
}); 
```

但是，当我尝试测试我的一个模型时，事情就崩溃了。

我在我的规范中包含了我的模型的 .h 文件：

```
#import "MyModel.h" 
```

然后当我运行测试时会出现一大堆错误。

一些我无法弄清楚的事情：

*   如前所述，我将测试目标添加到现有项目中。如何与我的新测试目标共享我的模型类？只需在 Build Phases/Compile Sources 中选择 .m 文件？
*   如果我的模型使用其他模型/辅助类/类别，我是否也需要与测试目标共享这些？我还需要将所有这些文件导入我的规范文件吗？
*   我的模型依赖于 AFNetworking，我也将其安装为 Cocoapod。如何在我的测试目标中使用该库？我试过简单地导入 AFNetworking.h 但这显然失败了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:34:11.437

*   我已经阅读了其他建议，但除了测试代码的 .m 文件之外，我们最终在“编译源”中的测试目标中包含*了所有*非测试 .m 文件
*   添加测试目标后，您可能需要`pod install`再次运行。它应该为您的测试目标和普通目标设置依赖关系。

# java - 如何解析保存在文本文件中的 json 响应

> ID：12698114
> 
> 赞同：0
> 
> 时间：2012-10-02T20:49:53.327
> 
> 标签：java, json, yahoo-api

我一直在看一个关于使用 Java 解析 json 响应的教程。教程[http://www.javabeat.net/2012/04/parsing-json-using-java-and-gson-library/](http://www.javabeat.net/2012/04/parsing-json-using-java-and-gson-library/)说：

> 使用 JsonReader 读取 JSON 文档，假设文档存在于文件系统中：

```
JsonReader reader = new JsonReader(
        new InputStreamReader(new FileInputStream(this.jsonSource))); 
```

我不明白我们为什么要使用它以及 jsonSource 是什么意思。我的 json 响应保存在文本文件中。我该如何处理？我应该把文本文件路径还是什么？任何人都可以向我澄清如何解析 json 响应，特别是 Yahoo BOSS，以便提取搜索结果链接。现在，我能够将响应保存在文本文件中。它是（这个对关键词雅虎的回应）：

```
 {"bossresponse":{"responsecode":"200","web":{"start":"0","count":"42","totalresults":"89200000","results":
[
{"date": "","clickurl":"http:\/\/www.yahoo.com\/","url":"http:\/\/www.yahoo.com\/","dispurl":"www.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>!","abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."},

{"date": "","clickurl":"http:\/\/mail.yahoo.com\/","url":"http:\/\/mail.yahoo.com\/","dispurl":"mail.<b>yahoo<\/b>.com","title":"Sign in to <b>Yahoo<\/b>!","abstract":"Your World. Your Way. <b>Yahoo<\/b>! makes it easy to enjoy what matters most in your world. Best in class <b>Yahoo<\/b>! Mail, breaking local, national and global news, finance ..."},

{"date": "","clickurl":"http:\/\/groups.yahoo.com\/?ch=web&pub=fp-us&t=fp&sec=link&slk=defaultrough","url":"http:\/\/groups.yahoo.com\/?ch=web&pub=fp-us&t=fp&sec=link&slk=defaultrough","dispurl":"groups.<b>yahoo<\/b>.com\/?ch=web&amp;pub=fp-us&amp;t=fp&amp;sec=link&amp;slk=...","title":"<b>Yahoo<\/b>! Groups - Join or create groups, clubs, forums ...","abstract":"<b>Yahoo<\/b>! Groups offers free mailing lists, photo &amp; file sharing, group calendars and more. Discuss hot topics, share interests, join online communities."},

{"date": "","clickurl":"http:\/\/homes.yahoo.com\/","url":"http:\/\/homes.yahoo.com\/","dispurl":"homes.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Homes - Home for Sale and Rent, Makeovers, Design and ...","abstract":"Some <b>Yahoo<\/b>! Homes information is provided by our trusted partners. However, <b>Yahoo<\/b>! does not guarantee the accuracy or completeness of any third party content."},

{"date": "","clickurl":"http:\/\/en.wikipedia.org\/wiki\/Yahoo","url":"http:\/\/en.wikipedia.org\/wiki\/Yahoo","dispurl":"en.wikipedia.org\/wiki\/<b>Yahoo<\/b>","title":"<b>Yahoo<\/b>! - Wikipedia, the free encyclopedia","abstract":"<b>Yahoo<\/b>! Inc. (NASDAQ: YHOO) is an American multinational internet corporation headquartered in Sunnyvale, California, United States. The company is best known for its ..."},

{"date": "","clickurl":"http:\/\/taxes.yahoo.com\/","url":"http:\/\/taxes.yahoo.com\/","dispurl":"taxes.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Finance - Personal Finance | Taxes","abstract":"Taxes - Read latest articles and guides, try our comprehensive calculators, tools, and get advice at <b>Yahoo<\/b>! Finance"},

{"date": "","clickurl":"http:\/\/omg.yahoo.com\/","url":"http:\/\/omg.yahoo.com\/","dispurl":"omg.<b>yahoo<\/b>.com","title":"omg! Celebrity gossip, news photos, babies, couples, hotties ...","abstract":"The latest celebrity gossip from <b>Yahoo<\/b>! omg! Get the latest news and gossip on the Hollywood celebrities with videos and photos."},

{"date": "","clickurl":"http:\/\/uk.yahoo.com\/","url":"http:\/\/uk.yahoo.com\/","dispurl":"uk.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! UK","abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."},

{"date": "","clickurl":"http:\/\/smallbusiness.yahoo.com\/?s_fptrough=ysb_acq_smallbiz_20081001","url":"http:\/\/smallbusiness.yahoo.com\/?s_fptrough=ysb_acq_smallbiz_20081001","dispurl":"smallbusiness.<b>yahoo<\/b>.com\/?s_fptrough=ysb_acq_smallbiz...","title":"<b>Yahoo<\/b>! Small Business: Web Hosting, Domain Registration, E ...","abstract":"<b>Yahoo<\/b>! Small Business provides reliable web hosting for your website, domain name registration, web site design templates, e-commerce solutions for your ..."},

{"date": "","clickurl":"http:\/\/cricket.yahoo.com\/","url":"http:\/\/cricket.yahoo.com\/","dispurl":"cricket.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Cricket - Live Cricket Score | Cricket News | Cricket ...","abstract":"Check out live cricket scores, cricket news headlines, cricket schedules &amp; results and more from <b>Yahoo<\/b>! Cricket Includes ICC World Cricket League Championship 2012 ..."},

{"date": "","clickurl":"http:\/\/messenger.yahoo.com\/?i=1","url":"http:\/\/messenger.yahoo.com\/?i=1","dispurl":"messenger.<b>yahoo<\/b>.com\/?i=1","title":"<b>Yahoo<\/b>! Messenger - Chat, Instant message, SMS, Video Call, PC ...","abstract":"<b>Yahoo<\/b>! Messenger - Chat with friends for free and enjoy stealth settings, video calls, PC calls, file sharing, photo sharing, SMS, emoticons, &amp; more."},

{"date": "","clickurl":"http:\/\/uk.my.yahoo.com\/","url":"http:\/\/uk.my.yahoo.com\/","dispurl":"uk.my.<b>yahoo<\/b>.com","title":"My <b>Yahoo<\/b>! - <b>Yahoo<\/b>! UK","abstract":"My <b>Yahoo<\/b>! is a customisable web page from <b>Yahoo<\/b>! UK. Personalise your page by adding news, stock quotes, weather, email, social updates and much more."},

{"date": "","clickurl":"http:\/\/search.yahoo.com\/","url":"http:\/\/search.yahoo.com\/","dispurl":"search.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Search - Web Search","abstract":"Learn about the new <b>Yahoo<\/b>! Axis. A better way to search. Way better. Get it Now! &gt;&gt;"},

{"date": "","clickurl":"http:\/\/news.yahoo.com\/","url":"http:\/\/news.yahoo.com\/","dispurl":"news.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! News - Latest News &amp; Headlines","abstract":"The latest news and headlines from <b>Yahoo<\/b>! News. Get breaking news stories and in-depth coverage with videos and photos."},

{"date": "","clickurl":"http:\/\/au.yahoo.com\/","url":"http:\/\/au.yahoo.com\/","dispurl":"au.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>!7","abstract":"The <b>Yahoo<\/b>! for Australia offering local &amp; global search, free email, instant messaging, news, sport, travel, shopping, movies &amp; music."},

{"date": "","clickurl":"http:\/\/ca.yahoo.com\/","url":"http:\/\/ca.yahoo.com\/","dispurl":"ca.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Canada","abstract":"Welcome to <b>Yahoo<\/b>! Canada, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest ..."},

{"date": "","clickurl":"http:\/\/everything.yahoo.com\/","url":"http:\/\/everything.yahoo.com\/","dispurl":"everything.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>!","abstract":"<b>Yahoo<\/b>! International ... © 2012 <b>Yahoo<\/b>! Inc. All rights reserved"},

{"date": "","clickurl":"http:\/\/football.fantasysports.yahoo.com\/?ovchn=YAH&ovcpn=Front+Page&ovcrn=Front+page+P+Link+Nav+button&ovrfd=YAH&ovtac=AD","url":"http:\/\/football.fantasysports.yahoo.com\/?ovchn=YAH&ovcpn=Front+Page&ovcrn=Front+page+P+Link+Nav+button&ovrfd=YAH&ovtac=AD","dispurl":"football.fantasysports.<b>yahoo<\/b>.com\/?ovchn=YAH&amp;ovcpn=Front...","title":"It's Game Time! - <b>Yahoo<\/b>! Sports Fantasy Football","abstract":"<b>Yahoo<\/b>! Fantasy Football. Create or join a NFL league and manage your team with FREE live scoring, stats, scouting reports, news, and expert advice."},

{"date": "","clickurl":"http:\/\/music.yahoo.com\/","url":"http:\/\/music.yahoo.com\/","dispurl":"music.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Music - Exclusive New Music and Music Videos","abstract":"Find all the new music and exclusive video performances on <b>Yahoo<\/b>! Music. Get the latest news in our exclusive music blogs, listen to our online music radio and catch ..."},

{"date": "","clickurl":"http:\/\/uk.messenger.yahoo.com\/","url":"http:\/\/uk.messenger.yahoo.com\/","dispurl":"uk.messenger.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Messenger - Chat, Instant message, Video Call, PC Calls","abstract":"<b>Yahoo<\/b>! Messenger - Chat with friends for free and enjoy stealth settings, video calls, PC calls, file sharing, photo sharing, emoticons, &amp; more."},

{"date": "","clickurl":"http:\/\/in.yahoo.com\/","url":"http:\/\/in.yahoo.com\/","dispurl":"in.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! India","abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."},

{"date": "","clickurl":"http:\/\/companion.yahoo.com\/","url":"http:\/\/companion.yahoo.com\/","dispurl":"companion.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Toolbar - Stay in touch with your world.","abstract":"Toolbar for <b>Yahoo<\/b>! search, alerts for <b>Yahoo<\/b>! Mail and an option to save bookmarks online."},

{"date": "","clickurl":"http:\/\/movies.yahoo.com\/photos\/","url":"http:\/\/movies.yahoo.com\/photos\/","dispurl":"movies.<b>yahoo<\/b>.com\/photos","title":"Movie Pictures | Movie Posters - <b>Yahoo<\/b>! Movies","abstract":"View movie pictures and stills from the latest releases on <b>Yahoo<\/b>! Movies. Find movie posters, red carpet photos and pictures from upcoming movies."},

{"date": "","clickurl":"http:\/\/local.yahoo.com\/","url":"http:\/\/local.yahoo.com\/","dispurl":"local.<b>yahoo<\/b>.com","title":"Redmond City Pages on <b>Yahoo<\/b>! Local. Find Businesses, Services ...","abstract":"<b>Yahoo<\/b>! Local has Redmond business reviews, top rated services, and events near Redmond, WA. Use interactive maps, driving directions reviews and ratings to find the ..."},

{"date": "","clickurl":"http:\/\/yahooligans.yahoo.com\/","url":"http:\/\/yahooligans.yahoo.com\/","dispurl":"<b>yahoo<\/b>ligans.<b>yahoo<\/b>.com","title":"Kids Games, Kids Movies, Kids Music, and More - <b>Yahoo<\/b>! Kids","abstract":"<b>Yahoo<\/b> Kids! is the ultimate web guide for kids! Features fun and educational resources for kids with games, animals, music, jokes, movies, news, astrology, TV ..."},

{"date": "","clickurl":"http:\/\/m.yahoo.com\/","url":"http:\/\/m.yahoo.com\/","dispurl":"m.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Mobile","abstract":"Welcome to <b>Yahoo<\/b>! Mobile. Stay up to date on the go with business, sports, and entertainment news."},

{"date": "","clickurl":"http:\/\/tv.yahoo.com\/","url":"http:\/\/tv.yahoo.com\/","dispurl":"tv.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! TV","abstract":"<b>Yahoo<\/b>! TV is your guide to everything about TV online, from TV show listings and episode guides, to the latest TV show photos, clips, news, recaps, cast &amp; credits ..."},

{"date": "","clickurl":"http:\/\/shopping.yahoo.com\/","url":"http:\/\/shopping.yahoo.com\/","dispurl":"shopping.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Shopping - Online Shopping with great products, prices ...","abstract":"<b>Yahoo<\/b>! Shopping is the best place to read user reviews, explore great products and buy online."},

{"date": "","clickurl":"http:\/\/dir.yahoo.com\/","url":"http:\/\/dir.yahoo.com\/","dispurl":"dir.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Directory","abstract":"Help us improve the <b>Yahoo<\/b>! Directory - Share your ideas"},

{"date": "","clickurl":"http:\/\/overview.mail.yahoo.com\/","url":"http:\/\/overview.mail.yahoo.com\/","dispurl":"overview.mail.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Mail","abstract":"Your favorite email is now: FASTER: 2x faster. How great is that? So great. SAFER: Even better spam protection. Yes! EASIER: Clean, simple design that makes email a ..."},

{"date": "","clickurl":"http:\/\/travel.yahoo.com\/","url":"http:\/\/travel.yahoo.com\/","dispurl":"travel.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Travel - Cheap flights, hotels, travel guides &amp; car rental","abstract":"Find cheap flights, hotels and car rentals with <b>Yahoo<\/b>! Travel. Plan your trip with travel guides, personalized recommendations, articles, deals and more."},

{"date": "","clickurl":"http:\/\/omg.yahoo.com\/news\/","url":"http:\/\/omg.yahoo.com\/news\/","dispurl":"omg.<b>yahoo<\/b>.com\/news","title":"Celebrity News | Celebrity Gossip - <b>Yahoo<\/b>! omg!","abstract":"Get the latest celebrity news from <b>Yahoo<\/b>! omg! Find the latest news about the Hollywood celebrities with videos and photos"},

{"date": "","clickurl":"http:\/\/games.yahoo.com\/","url":"http:\/\/games.yahoo.com\/","dispurl":"games.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Games - Play Free Online Games | Download Games","abstract":"Play the latest online games on <b>Yahoo<\/b>! Games. Play and download single and multiplayer games from a wide selection of arcade, board and puzzle games."},

{"date": "","clickurl":"http:\/\/omg.yahoo.com\/photos\/","url":"http:\/\/omg.yahoo.com\/photos\/","dispurl":"omg.<b>yahoo<\/b>.com\/photos","title":"Celebrity Photos | Pictures of Celebrities - <b>Yahoo<\/b>! omg!","abstract":"View the latest celebrity photos on <b>Yahoo<\/b>! omg! Get the latest red carpet pictures and photos from Hollywood."},

{"date": "","clickurl":"http:\/\/finance.yahoo.com\/q?s=","url":"http:\/\/finance.yahoo.com\/q?s=","dispurl":"finance.<b>yahoo<\/b>.com\/q?s=","title":"Quotes &amp;amp; Info- <b>Yahoo<\/b>! Finance","abstract":"View the basic stock chart on <b>Yahoo<\/b>! Finance. Change the date range, chart type and compare against other companies."},

{"date": "","clickurl":"http:\/\/movies.yahoo.com\/","url":"http:\/\/movies.yahoo.com\/","dispurl":"movies.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Movies - Upcoming Movies, Trailers and Showtimes","abstract":"View the latest trailers and movie reviews on <b>Yahoo<\/b>! Movies. Find everything about movies online, from upcoming releases, movie ratings, trailers and movie news"},

{"date": "","clickurl":"http:\/\/screen.yahoo.com\/","url":"http:\/\/screen.yahoo.com\/","dispurl":"screen.<b>yahoo<\/b>.com","title":"Watch videos online - <b>Yahoo<\/b>! Screen","abstract":"Watch videos online for free on <b>Yahoo<\/b>! Screen. Find sports, kids and funny videos including the latest news video clips."},

{"date": "","clickurl":"http:\/\/privacy.yahoo.com\/","url":"http:\/\/privacy.yahoo.com\/","dispurl":"privacy.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Privacy Policy","abstract":"WHAT THIS PRIVACY POLICY COVERS <b>Yahoo<\/b>! takes your privacy seriously. Please read the following to learn more about our privacy policy. The federal ..."},

{"date": "","clickurl":"http:\/\/news.yahoo.com\/us\/","url":"http:\/\/news.yahoo.com\/us\/","dispurl":"news.<b>yahoo<\/b>.com\/us","title":"U.S. News Headlines - <b>Yahoo<\/b>! News","abstract":"Get the latest U.S. news headlines from <b>Yahoo<\/b>! News. Find breaking U.S. news, including analysis and opinion on top U.S. stories."},

{"date": "","clickurl":"http:\/\/fantasysports.yahoo.com\/","url":"http:\/\/fantasysports.yahoo.com\/","dispurl":"fantasysports.<b>yahoo<\/b>.com","title":"Fantasy on <b>Yahoo<\/b>! Sports - News, Scores, Standings, Rumors ...","abstract":"Comprehensive Fantasy news, scores, standings, fantasy games, rumors, and more"},

{"date": "","clickurl":"http:\/\/finance.yahoo.com\/","url":"http:\/\/finance.yahoo.com\/","dispurl":"finance.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>! Finance - Business Finance, Stock Market, Quotes, News","abstract":"At <b>Yahoo<\/b>! Finance, you get free stock quotes, up to date news, portfolio management resources, international market data, message boards, and mortgage ..."},

{"date": "","clickurl":"http:\/\/world.yahoo.com\/","url":"http:\/\/world.yahoo.com\/","dispurl":"world.<b>yahoo<\/b>.com","title":"<b>Yahoo<\/b>!: <b>Yahoo<\/b>! Everywhere","abstract":"<b>Yahoo<\/b>! USA (en Español) ... © 2012 <b>Yahoo<\/b>! Inc. All rights reserved"}]}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:52:56.370

您始终可以在没有 JsonReader 的情况下将数据保存到字符串，然后将字符串解析为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:54:40.870

`this.jsonSource`只是一个包含要读取的文件（或文件名）的变量。请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)以检查 FileInputStream 构造函数将什么作为参数。

# coronasdk - 使用 Corona 在动画精灵中创建碰撞可检测区域

> ID：12698120
> 
> 赞同：0
> 
> 时间：2012-10-02T20:50:20.430
> 
> 标签：coronasdk, sprite, sprite-sheet

我有一个精灵表，其中包含一个人的帧，这些帧对应于许多不同的动作，例如“walk_left”、“walk_right”等......这些动作可能有不同数量的帧，但在每个动作中只会有我想检测与其他对象的碰撞的精灵的某个区域。

有没有办法为这些动作中的每一个设置一个复杂的主体？请记住，“walk_left”的复合体可能包含与“walk_right”不同坐标的复合体

任何帮助和/或示例会有用吗？

如果有帮助，我可以提供代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:06:49.810

我在这些情况下所做的实际上是为每个动画创建几个“角色”，然后根据需要动态切换它们......

所以你有一个带有 walk_left 动画的 newSprite 和我想要的碰撞，另一个 walk_right，等等......

请记住，使用 Box2D 您必须一次移动它们（Box2D 不喜欢您突然移动对象）。

如果您不使用 Box2D 并且自己处理碰撞，那么只需在同一个对象上创建多个碰撞，每个动画一个，然后使用 object.getSequence 查看正在播放的动画，并使用您想要的碰撞，可能类似于

```
local currentCollision = object.collision[object.getSequence] 
```

# c# - 在未选择副本的情况下为受保护的 pdf 编制索引

> ID：12698121
> 
> 赞同：1
> 
> 时间：2012-10-02T20:50:23.330
> 
> 标签：c#, vb.net, pdf, indexing, ifilter

我已经四处寻找。也许我不知道要搜索什么...

我需要能够索引和搜索“安全”PDF。这些 PDF 选择了“禁止复制”属性并被锁定。这意味着没有用户名和密码就无法复制 PDF 的内容。IFilter 尊重这些设置，并且不允许对 PDF 进行索引。

我正在寻找一种方法来使用 aspx.net 在我的服务器上索引和搜索这些 PDF。看来我遇到了以下问题之一：

1.  我应该拥有打开这些 PDF 以获得对内容的“复制”访问所需的凭据
2.  为我的工具提交 PDF 时，需要提交两个项目：单词副本 - 和 - PDF 副本
3.  将全部内容复制到 PDF 的元数据中，或者至少复制一些关键词。我还没有研究过这里可能涉及什么样的风险。这对作家来说意味着额外的一步

解决方案 1 和 2 意味着在服务器或数据库中维护副本……并以编程方式参考实际下载。有没有人为此提出解决方案？我更喜欢索引功能，因为它意味着内容不重复。如果 PDF 元数据可以处理这么多内容并且安全性仍然完好无损，则解决方案 3 很有吸引力。我也想知道对 PDF 的编程访问，通过 C# 或 VB，我可以使用凭据来获得访问权限......但看起来我可能会被卡住。

这是我寻找另一种解决方案的最后努力。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:04:36.090

如果您有文件的用户名和密码，也许您可​​以打开文件并从中提取文本？

然后，您将能够从提取的数据中构建索引。

我参与的库[Docotic.Pdf可以为您打开受密码保护的文件。](https://bitmiracle.com/pdf-library/)它也可以提取文本。文本可以提取为纯文本或格式化文本，并且可以按单词或字符分割。

请查看以下示例：

*   [检查 PDF 文档是否受密码保护](https://bitmiracle.com/pdf-library/help/check-if-pdf-document-is-password-protected.aspx)
*   [按单词提取文本](https://bitmiracle.com/pdf-library/help/extract-text-by-words.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:52:32.563

我最终选择了一个完全不同的解决方案。我喜欢利用 MS 的索引的想法，但是使用 SQL 并让上传 PDF 的用户将关键字或 pdf 的内容粘贴到文本框中变得更加容易。然后 SQL 可以索引该“列”和 bamm ......搜索引擎会完成剩下的工作。

感谢大家花时间考虑这个问题。

# scala - Playframework 测试在 Intellij 中通过，但在 Play 控制台中未通过

> ID：12698122
> 
> 赞同：1
> 
> 时间：2012-10-02T20:50:31.647
> 
> 标签：scala, playframework, playframework-2.0

我有一个表的简单插入和更新测试：

```
 case class Player(id: UUID, name: String, email: String) 
```

在模型对象中进行所有适当的设置以执行插入和查找。

运行以下测试：

```
class PlayerSpec extends Specification {
  "Player" should {

    val application = FakeApplication(additionalConfiguration =  inMemoryDatabase("test"))

    "insert a player" in {
      running(application) {

        val uuid = UUID.randomUUID()

        Player.insert(Player(uuid, "Joe Person", "joe.player@someplace.mail")) must beEqualTo(1)
      }
    }

    "Find a player by id" in {
      running(application) {
        val uuid = UUID.randomUUID()

        Player.insert(Player(uuid, "Jane Person", "jane.player@someplace.mail"))

        Player.findById(uuid) must beEqualTo(Some(Player(uuid, "Jane Person", "jane.player@someplace.mail")))
      }
    }

  }
} 
```

我在 Intellij 中得到一个绿色条（两个例子都通过了）。但是，当我在播放控制台中运行它时，我收到以下错误：

```
[info] PlayerSpec
[info] 
[info] Player should
[info] + insert a player
[error] ! Find a player by id
[error]     anon$1: Configuration error [Cannot connect to database [default]] Configuration.scala:258)
 .... 
```

这是一个配置问题，还是我错过了某种 beforeEach 类型调用？

**编辑**

只需添加数据库代码，以获取更多参考

```
case class Player(id: UUID, name: String, email: String)

object Player {

  private val fullPlayer = {
    get[UUID]("player.id")(Utils.rowToUuid) ~
    get[String]("player.name") ~
    get[String]("player.email") map {
      case id~name~email => Player(id, name, email)
    }
  }

  def insert(player: Player) = {
    DB.withConnection { implicit c =>

      SQL(
        """
          insert into player (id, name, email) values (
             {id}, {name}, {email}
          )
        """
      ).on(
        'id -> player.id.toString,
        'name -> player.name,
        'email -> player.email
      ).executeUpdate()

    }
  }

  def findById(id: UUID) : Option[Player] = {
    DB.withConnection { implicit c =>
      SQL("select * from player where id = {id}").on('id -> id).as(fullPlayer.singleOpt)
    }
  }
} 
```

行到UUID：

```
object Utils {
  implicit def rowToUuid: Column[UUID] = Column.nonNull {
    (value, meta) =>
      val MetaDataItem(qualified, nullable, clazz) = meta
      value match {
        case uuid: UUID => Right(uuid)
        case _ => Left(TypeDoesNotMatch("Cannot convert " + value + ":" + value.asInstanceOf[AnyRef].getClass + " to UUID for column " + qualified))
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:29:19.733

您不应该将 FakeApplication 重复用于多个测试。

只是改变

```
 val application = FakeApplication(additionalConfiguration =  inMemoryDatabase("test")) 
```

到

```
def application() = FakeApplication(additionalConfiguration =  inMemoryDatabase("test")) 
```

每次调用应用程序时生成一个新的 FakeApplication。用括号调用这个函数会是一种很好的风格。

# android - 应用程序中的多语言支持

> ID：12698124
> 
> 赞同：0
> 
> 时间：2012-10-02T20:50:33.973
> 
> 标签：android, multilingual

我不确定这是否是一个愚蠢的问题，但我有一个需要提供给其他语言的应用程序。我已经阅读了很多关于此的内容，但我对如何去做感到困惑。我真的需要将整个应用程序翻译成我想要的任何语言还是系统会这样做？我阅读了有关使用本地化的 Android 文档（[Android 文档](http://developer.android.com/guide/topics/resources/localization.html)）和许多论坛帖子。我已阅读有关更改应用程序中的配置的信息，但即使更改设备上的区域设置也不起作用。谁能指出我正确的方向？我希望用户能够更改应用程序本身的语言，因为它可能会在具有不同偏好的人之间传递。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:54:52.127

基本上，您需要将要翻译的字符串放入文件中

```
res/values/strings.xml 
```

对于默认的 en 语言环境，然后例如在代码中通过`Resources.getString(R.string.theId)`或在其他 xml 文件中通过 引用这样的条目`@string/theId`，其中`theId`表示条目的 id，例如

```
<string name="theId">Username</string> 
```

在 xml 文件中。

现在要翻译它，您需要创建额外的

```
res/values-<lc>/strings.xml 
```

文件，其中代表各自的 2 字母语言环境代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T13:20:08.680

要添加对更多语言环境的支持，请在 res/ 中创建其他目录。每个目录的名称应遵循以下格式：

-b+[+] 例如，values-b+es/ 包含语言代码为 es 的语言环境的字符串资源。类似地，mipmap-b+es+ES/ 包含带有 es 语言代码和 ES 国家代码的区域设置图标。Android 在运行时根据设备的区域设置加载适当的资源。

例如，以下是针对不同语言的一些不同资源文件：英文字符串（默认语言环境）、/values/strings.xml：

```
<resources>
    <string name="hello">Hello</string>
</resources> 
```

法语字符串（fr 语言环境），/values-fr/strings.xml：

```
<resources>
    <string name="hello">Bonjour</string>
</resources> 
```

在您的应用程序中使用资源：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello" /> 
```

# php - 从 csv 文件生成 html 代码

> ID：12698125
> 
> 赞同：0
> 
> 时间：2012-10-02T20:50:34.003
> 
> 标签：php, html, csv, generated-code

我有一个由以下字符分隔的 csv 文件 |。该文件有三列；一个是url（COL1），另一个是小文本（COL3），最后一个是图像位置（COL2）。我需要一个脚本，它可以为我提供这样的 html 代码以及 csv 文件中的数据：

```
<a href="COL1"><IMG SRC="COL2" />COL3</a> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:15:35.897

我假设您使用服务器端语言？使用 php，您将在[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)之后。
这是一个例子： [如何在 PHP 中导入 csv 文件？](https://stackoverflow.com/questions/5813168/how-to-import-csv-file-in-php)

**更新：**

尝试这个：

```
$separation_char = "|"; // character separating fields
$filename = "test.csv";

$row = 1;
if (($handle = fopen($filename, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, $separation_char)) !== FALSE) {
        echo '<a href="' . $data[0] . '"><IMG SRC="' . $data[1] . '" />' . $data[2] . '</a>';
    }
    fclose($handle);
} 
```

# php - 使用 crontab 运行 bash 脚本时遇到问题

> ID：12698131
> 
> 赞同：0
> 
> 时间：2012-10-02T20:50:57.880
> 
> 标签：php, linux, bash, cron

我有一个 bash 脚本，用于检查我的 PHP 服务是否正在运行，并在需要时启动它。

```
#!/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

KP=$(pgrep -P 1 -f script.php)
if [ "X$KP" = "X" ]
    then
        /usr/bin/nohup php /var/www/test/script.php >>/var/www/test/log.txt 2>&1 &
fi 
```

然后我将以下条目添加到`crontab -e`（作为我的用户）。

```
* * * * * /var/www/test/startup >> /var/www/test/cron.log 2>&1 & 
```

cron 运行，查看`htop`. 但是，它似乎没有工作或写入日志。它只是坐在那里使用 0% 的 CPU。该`/var/www/test/`文件夹归我所有，并且日志文件具有`666`权限。

怎么了？或者更确切地说，我可以改变什么来让错误日志正常工作，这样我就知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:09:20.550

我建议添加调试的东西。一些可能的故障是：

您的用户可以实际运行`/var/www/test/startup`脚本吗？你的用户可以写信`/var/www/test/cron.log`吗？我建议只使用 crontab 条目：

```
* * * * * /var/www/test/startup 
```

任何输出（stdin 和 stderr）都应该通过电子邮件发送给您的用户（除非`sendmail`在这台机器上损坏）。

在哪里`pgrep`？是否在`PATH=...`. 同上`php`

是什么`$KP`？**将其回显到您知道**可写的日志文件中：

```
touch /tmp/mylog
chmod 666 /tmp/mylog 
```

然后在脚本中：

```
echo "I'm getting pgrep from <`type -p pgrep`>" >>/tmp/mylog
echo "KP is now <$KP>" >>/tmp/mylog 
```

也许该`script.php`进程已经在运行并且归 PID 1 所有？

也许脚本没有写权限`/var/www/test/log.txt`？如果父目录之一不是您可写或不可执行的，`/var/www/test`则归您所有或是否为 666 都没有关系。`/var/www/test/log.txt`再检查一遍：

```
if [ ! -w /var/www/test/log.txt ]; then echo "Cannot write to /var/www/test/log.txt"; fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:45:29.090

我怀疑它与nohup有关。如果标准输入是终端，它只会做特殊的事情。但我不确定为什么这会有所作为，因为不需要在 cron 作业中分离后台进程。

但也许这会有所帮助：

```
(/usr/bin/nohup php /var/www/test/script.php >>/var/www/test/log.txt 2>&1 &) 
```

# facebook - 这个 FB Like URL 有什么问题？

> ID：12698133
> 
> 赞同：0
> 
> 时间：2012-10-02T20:51:08.790
> 
> 标签：facebook

这是我正在生成的 URL：

[https://m.facebook.com/dialog/optin?_path=optin&app_id=127760087237610&display=touch&secure=false&social_plugin=like&return_params=%7B%22href%22%3A%22http%3A%2F%2Fwww.nba.com%2F2012%2Fnews %2F10%2F01%2Fandrew-bynum-out-three-weeks.ap%2Findex.html%22%2C%22send%22%3A%22false%22%2C%22layout%22%3A%22button_count%22%2C%22width %22%3A%2290%22%2C%22show_faces%22%3A%22false%22%2C%22action%22%3A%22like%22%2C%22colorscheme%22%3A%22light%22%2C%22font%22 %3Anull%2C%22height%22%3A%2221%22%2C%22ret%22%3A%22optin%22%2C%22act%22%3A%22connect%22%7D&login_params=%7B%7D&from_login=1&client_id=127760087237610&refid= 9](https://m.facebook.com/dialog/optin?_path=optin&app_id=127760087237610&display=touch&secure=false&social_plugin=like&return_params=%7B%22href%22%3A%22http%3A%2F%2Fwww.nba.com%2F2012%2Fnews%2F10%2F01%2Fandrew-bynum-out-three-weeks.ap%2Findex.html%22%2C%22send%22%3A%22false%22%2C%22layout%22%3A%22button_count%22%2C%22width%22%3A%2290%22%2C%22show_faces%22%3A%22false%22%2C%22action%22%3A%22like%22%2C%22colorscheme%22%3A%22light%22%2C%22font%22%3Anull%2C%22height%22%3A%2221%22%2C%22ret%22%3A%22optin%22%2C%22act%22%3A%22connect%22%7D&login_params=%7B%7D&from_login=1&client_id=127760087237610&refid=9)

解码后看起来是这样的：

`https://m.facebook.com/dialog/optin?_path=optin&app_id=127760087237610&display=touch&secure=false&social_plugin=like&return_params={"href":"http://www.nba.com/2012/news/10/01/andrew-bynum-out-three-weeks.ap/index.html","send":"false","layout":"button_count","width":"90","show_faces":"false","action":"like","colorscheme":"light","font":null,"height":"21","ret":"optin","act":"connect"}&login_params={}&from_login=1&client_id=127760087237610&refid=9`

当您使用第一个链接时，您（可能）会看到一条错误消息，上面写着“Facebook 平台选择加入时发生错误。请稍后再试。”

我不知道为什么。你？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:49:15.987

当通过隐私设置禁用平台的用户尝试使用“赞”按钮之类的社交插件时，将使用“Facebook 平台选择加入”应用程序 - 您可能遇到了错误或边缘情况，因为在桌面上我之前测试过这可以按预期工作：

*   用户已禁用平台（即不允许从应用程序访问他们的帐户）
*   用户尝试使用“赞”按钮
*   系统会提示用户使用 Platform Opt In 应用程序的权限对话框
*   接受后，将为该用户重新启用平台，并且“赞”按钮有效

如果你可以复制这个不能可靠地工作，你应该提交一个错误报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:07:27.637

Looks like this is an open bug within the Facebook Platform.

See here for details: [http://developers.facebook.com/bugs/472857639400931](http://developers.facebook.com/bugs/472857639400931)

# php - 如何在 php 循环（wordpress）中为每个第 n 个项目添加一个类

> ID：12698135
> 
> 赞同：10
> 
> 时间：2012-10-02T20:51:27.720
> 
> 标签：php, css, wordpress, loops

我有一个 Wordpress 循环，如下所示：

```
<?php $loop = new WP_Query( array( 'post_type' => 'portfolio' ) ); ?>
    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
    <div class="four columns">
        <?php the_content(); //along with other stuff in looped div ?>
    </div>
<?php endwhile ?> 
```

如何使用php为每（4n-3）个div（div.four.columns）添加一个“alpha”类，为每一个（4n）个项目添加一个“omega”类？

谢谢（非常感谢！），杰米

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T21:13:11.157

为什么不添加一个计数器并使用模数方法在每一列中了解您当前正在回显的元素。

假设您有 4 列指定。
你从 counter = 1
1 % 4 = 1 (你在第一个元素中)
2 % 4 = 2 (你在第二个元素中)
3 % 4 = 3 (你在第三个元素中)
4 % 4 = 0开始（你在第四个元素中）
5 % 4 = 1（你在第一个元素中）
6 % 4 = 2（你在第二个元素中）

你只需在类中使用 If 语句，如下所示

```
<?php $counter = 1 ?>
<?php $loop = new WP_Query( array( 'post_type' => 'portfolio' ) ); ?>
    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
    <div class="four columns <?php if ($counter % 4 == 1){echo 'alpha'}else if ($counter % 4 == 0){echo 'omega'} ?>">
        <?php the_content(); //along with other stuff in looped div ?>
    </div>
<?php $counter++ ; 
endwhile ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:16:20.440

根据评论的实施：

```
<?php $loop = new WP_Query( array( 'post_type' => 'portfolio' ) ); ?>
    <?php
        $i = 0;
        while ( $loop->have_posts() ) : $loop->the_post(); 
           if( $i % 4 == 0 )
             $class = 'omega';
           else
             $class = ''; 
        ?>
    <div class="four columns <?php echo $class ?>">
        <?php 
           the_content(); // Along with other stuff in looped div
           $i++;
        ?>
    </div>
<?php endwhile ?> 
```

# iis - 防止 IIS6 覆盖文件权限

> ID：12698138
> 
> 赞同：0
> 
> 时间：2012-10-02T20:51:38.617
> 
> 标签：iis, permissions, iis-6

我目前的工作项目是创建一个正在运行的网站的自动更新列表，供内部使用，通过网络浏览器访问。我发现我可以通过编写一个 ASP 脚本、读取 MetaBase.xml 中的 XML 数据并将其显示给用户来做到这一点。

我已经写好了我的剧本，并且正在努力完成我的工作。唯一的一点是，我要自定义文件权限（默认情况下，系统目录下谁可以读取文件的限制是严格的）。我想出了我需要实现的权限，让它工作......

...但是每次有人对 IIS 进行更改时，权限都会重置为默认权限。

我已尽一切努力防止这种行为 - 删除了更改此文件上每个帐户的用户权限的能力（除了我设置的虚拟帐户以防万一），将所有权更改为所述虚拟帐户并删除所有其他用户的权限取得所有权等。 尽管如此，每次对 IIS 进行更改时，所有权都会更改回管理员组，并且权限会更改回默认值。

有什么办法可以防止这种情况发生吗？或者，或者：如果我解决这个问题的方法完全愚蠢，有人可以提出更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:34:28.327

如果您对 ASP.NET / C# 没问题，那么您可以使用 DirectorEntry 枚举站点列表

在此处查看类似的帖子： [如何在 C# 中查找 IIS 站点 ID？](https://stackoverflow.com/questions/662879/how-can-i-look-up-iis-site-id-in-c)

```
DirectoryEntry de = new DirectoryEntry("IIS://localhost/W3SVC");
foreach (DirectoryEntry child in de.Children)
{
    if (child.SchemaClassName == "IIsWebServer")
    {
        Response.Write(child.Properties["ServerComment"].Value + "<br/>");
    }
} 
```

权限方面，您可能需要在特权帐户下运行该应用程序

# java - 使用 Amazon Services 进行 Java Base64 编码

> ID：12698139
> 
> 赞同：0
> 
> 时间：2012-10-02T20:51:39.693
> 
> 标签：java, encryption, encoding, signature, amazon-sns

我正在使用这里的确切代码：http:
[//docs.amazonwebservices.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AuthJavaSampleHMACSignature.html](http://docs.amazonwebservices.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AuthJavaSampleHMACSignature.html)

为我的应用程序生成签名。但是，Eclipse中无法识别一行代码

```
result = Encoding.EncodeBase64(rawHmac); 
```

Eclipse 说它不识别“编码”类。这是确切的错误：

方法 EncodeBase64(byte[]) 未定义类型 Encoding

我尝试导入以下 3 件事：

```
javax.sound.sampled.AudioFormat.Encoding;
org.apache.commons.codec.binary.Base64;
org.omg.IOP.Encoding; 
```

然而，所有这三个然后告诉我他们不承认'EncodeBase64'功能。有人知道我应该对上面链接的代码使用什么导入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:10:54.437

请注意，没有一个熟练的 Java 开发人员会使用大写字母作为方法的开头，因此如果您没有打错字，则不能指望`Encoding.EncodeBase64`在任何标准库中都能找到。您最好使用另一个 Base 64 编码器/解码器，例如在[Apache Commons Codec](http://commons.apache.org/codec/)中找到的那个——它似乎对我来说是最好的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:10:47.803

**标准 Java**中有 Base64 编码/解码支持：[javax.xml.bind.DataTypeConverter](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html#printBase64Binary%28byte%5B%5D%29)。那将是一个零开销的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T18:48:23.377

另一种编码你的解决方案`rawHmac`是这个：

```
String result = new String(encode(rawHmac)); 
```

使用此编码功能：

```
 private static char[] encode(byte[] bytes) {
    final int amount = bytes.length;
    char[] result = new char[2 * amount];

    int j = 0;
    for (int i = 0; i < amount; i++) {
      result[j++] = HEX[(0xF0 & bytes[i]) >>> 4];
      result[j++] = HEX[(0x0F & bytes[i])];
    }

    return result;
  }

  private static final char[] HEX = {
    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'
  }; 
```

# php - 在php下管理/存储多个服务器（服务）的数据库中的会话

> ID：12698140
> 
> 赞同：0
> 
> 时间：2012-10-02T20:51:46.013
> 
> 标签：php, database, zend-framework, session

我正在处理 ZendFramework 1.11 下的项目。有一段时间，它使用了原生 php 会话机制（Zend_Auth_Storage_Session）。

但是我有几个问题，并决定将会话存储在数据库中是最好的选择。这些问题：

*   多个服务（放置在不同的服务器上），需要通过一个 cookie 来识别用户。例如主网站、照片服务（为 javascript 提供处理照片的 api 等）
*   能够查看每个帐户的所有会话（包含有关地理位置和操作系统/浏览器/上次访问日期的信息）
*   能够关闭指定的会话
*   能够重命名会话 cookie 名称

我发现我们可以使用自定义 MySexy_Auth_Storage_Db 类，但是这样我需要自己生成会话 ID，设置 cookie 并做很多事情（这在我的实现中可能是不安全的）

也许您可以建议一些现成的解决方案？谢谢！

PS 我看到了 setSaveHandler 解决方案，但它不允许`session`在数据库的表中使用 account_id 自定义列，例如，轻松管理所有用户的会话

# css - 为整个站点创建半透明覆盖

> ID：12698141
> 
> 赞同：1
> 
> 时间：2012-10-02T20:51:47.243
> 
> 标签：css, overlay, opacity

我试图在整个页面上创建一个带有半透明 PNG 的叠加层。

出于某种原因，我页面中的某些元素仍然显示为全彩色，而这似乎只是将自身应用于背景？

```
#overlay{
background-image:url(../images/overlay.png);
width:100%;
height:100%;
margin:0px;
position:absolute;
z-index: 20;
} 
```

请参阅：[www.rubytuesdaycreative.co.uk](http://www.rubytuesdaycreative.co.uk)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T21:01:28.973

您的叠加 div 包括应该成为“低于”该 div 的所有 div。您应该使用以下 css 创建一个单独的 div 以将其用作叠加层：

```
#overlay {
background-image: url(../images/overlay.png);
width: 100%;
height: 100%;
margin: 0px;
position: fixed;
z-index: 20;
} 
```

这样，这基本上就是您的 html：

```
<body>
   <div id='wrapper'>
   </div>  
   <div id='footerwrapper'> 
   </div>
   <div id='overlay'>
   </div>
</body> 
```

# java - 创建文本文件 Java 时出错

> ID：12698142
> 
> 赞同：1
> 
> 时间：2012-10-02T20:51:50.297
> 
> 标签：java, file, text, metadata-extractor

我正在使用[元数据提取器 API](http://metadata-extractor.googlecode.com/)从图像中提取元数据。然后，我使用 Java 创建一个包含所有数据的 .txt 文件。但是，当我运行文件时，我有 nullpointexception。

我知道某些东西正在输出，因为它在 NetBeans 提供的输出框中打印出来。

创建文件的类：

```
private void metadataImageButtonMouseClicked(java.awt.event.MouseEvent evt) {                                                 
    System.out.println(MetaData.getTags());
    try {
    File report;
    report = new File("report.txt");

        report.createNewFile();
        FileWriter kmlStream = new FileWriter("report.txt");
        try (BufferedWriter out = new BufferedWriter(kmlStream)) {
            out.write(MetaData.allTags);
            statusUpdateMessage.setText("Report file created");
            System.out.println("New file \"Report.txt\" has been created to the current directory");
        }
    } catch (IOException ex) {
        Logger.getLogger(MetaDataExtractor.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

检索所有元数据

```
 Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);

    for (Directory directory : metadata.getDirectories()) {
        for (Tag allTags : directory.getTags()) {
            System.out.println(allTags);
        }
    }
} catch (ImageProcessingException ex) {
    Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
} catch (IOException ex) {
    Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
}
return allTags; 
```

我的第一个想法是将返回类型作为字符串，但它不允许我这样做。欢迎任何建议，因为我不擅长 Java。[这是错误](http://pastebin.com/pbRfkPee)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:31:52.540

通过阅读JDK附带的java.io.Writer的源代码，您可以推断您正在向Writer写入一个空字符串，这会导致NullPointerException。这发生在第 541 行`MetaDataExtractor.metadataImageButtonMouseClicked()`的文件中。`MetaDataExtractor.java`

在编写它们之前检查您的字符串是否为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:51:50.203

以下是错误跟踪的第一行：

```
at java.io.Writer.write(Writer.java:157)
at MetaDataExtractor.metadataImageButtonMouseClicked(MetaDataExtractor.java:541) 
```

问题出在 中`metadataImageButtonMouseClicked(e)`，特别是在**第 541 行**，您在那里找到了哪条指令？涉及哪些变量？这应该有帮助

# git - 我如何 git reset --hard origin/我签出的任何分支？

> ID：12698147
> 
> 赞同：4
> 
> 时间：2012-10-02T20:52:14.780
> 
> 标签：git

我正在尝试编写一个 git 部署脚本，但该脚本必须更新多个服务器，并且它们并不都在同一个 Git 分支上。理想情况下，脚本应该只需要一个命令，即“git reset --hard origin/whateverBranchThisServerIsOn”。

现在，我明白我可以做到：

```
git reset --hard origin/foo 
```

将我的 git 环境重置为远程 foo 分支。但是，我想做的是重置为远程分支，而不是具体的“foo”，只是“机器当前已签出的任何分支的远程（即，当你这样做时会出现什么分支`git branch`”。

我试过了：

```
git reset --hard origin 
```

和：

```
git reset --hard origin/HEAD 
```

和：

```
git reset --hard HEAD 
```

但他们要么检查其他分支，要么（在最后一种情况下）没有得到远程提交。肯定有什么说法`git reset --hard origin/CURRENT_BRANCH`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:55:24.503

“我已经签出的分支”的想法有点畸形。这样的分支之间没有 1:1 的关系。您的分支可能根本没有“起源”。但它可以有一个远程跟踪分支，它可能（或可能不）与您所在的分支同名。阅读`man gitrevisions`，它看起来指定`HEAD@{upstream}`应该可以做你想做的事。但我没有测试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T09:05:10.383

```
# simple script to reset hard to the current branch origin
branch=$(git symbolic-ref --short -q  HEAD)
echo "Sure to reset hard to origin/$branch ?"
read
git reset --hard origin/$branch 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-18T14:07:03.383

```
git rev-parse --abbrev-ref HEAD | xargs -I {} git reset --hard origin/{} 
```

为我工作，虽然有点长

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:55:25.927

“无论您当前已签出的任何内容”都以名称命名`HEAD`。因此，`git reset --hard HEAD`将恢复您在开始进行修改之前签出的任何内容，而您现在已经决定不想保留...

由于您当前所在的分支可能有也可能没有上游等价物，我不确定是否有一个命令可以盲目地实现您所描述的内容。您可以编写一些 shell 脚本来解析输出`git branch`并决定您想要在哪个远程分支上，或者如果它看到它不期望的东西就死掉。

# php - PHP拆分不同的信息

> ID：12698149
> 
> 赞同：0
> 
> 时间：2012-10-02T20:52:23.910
> 
> 标签：php

我正在寻找解决这个问题的方法：

我有一个这样的数组

```
Array (
    [0] => 
    [1] => ─╡Bügeleisen╞─ # TF -flofloflo- ~DORSAI~ 
    [2] => ASH 25 # TF silentglider (u) WS 
    [3] => Gutinedu ottomatic 
    [4] => Deep Space Three # TF Kleissi1978 (gu) F & P 
    [5] => crafted by trapper12 # TF trapper12 VR 
    [6] => -8- Mrs-Shooter (u) -=SC=- 
    [7] => ? Pitch Pink ? # TF CreShoK -=V=- 
    [8] => Standard Libelle silentglider (u) WS 
    [9] => crafted by phiLLLdd phiLLLdd (u) -=SC=- 1 
    [10] => V8 Vote111 (u) 3R 1 
    [11] => Nimbus silentglider (u) WS 1 
    [12] => Speed Astir silentglider (u) WS 1 
    [13] => Metal Gear Ray # TF KlappstuhI > ReX < 1 
    [14] => RK-Weporinag # TF ImperatorMar (u) -=SC=- 1 
    [15] => RK-Smecid # TF CrazyNeo82 (gu) NKD 1 
    [16] => der Mittelpunkt # TF TruNaDe A K
) 
```

我需要每个数据集的值，例如：

```
|      1      |  2  |    3      |   4   |
─╡Bügeleisen╞─ # TF -flofloflo- ~DORSAI~ 
```

我想，我可以用一个简单的爆炸来解决它，但看看第二个

```
|   1  |  2 |     3     | 4 | 5|
ASH 25 # TF silentglider (u) WS 
```

所以......名称中可以有空格，并且数据集可以包含 4 或 5 个值。

我需要一个如下所示的数组：

```
arr[1]['val1'] = '─╡Bügeleisen╞─' 
arr[1]['val2'] = '# TF'
arr[1]['val3'] = '-flofloflo' 
arr[1]['val4'] = '~DORSAI~' ...
arr[2]['val1'] = 'ASH 25' 
arr[2]['val2'] = '# TF'
... ... ... 
```

# tfs - 使用 Visual Studio 搁置集查看历史记录

> ID：12698150
> 
> 赞同：6
> 
> 时间：2012-10-02T20:52:24.317
> 
> 标签：tfs

是否可以查看历史记录并与搁置集进行比较？我们正在研究使用搁置集代替签到的可能性。从我们最初的调查来看，我们似乎无法像查看签到那样查看历史记录。

我们正在使用 Visual Studio 2010/TFS 2010。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T20:58:04.810

来自[http://msdn.microsoft.com/en-us/library/ms181403(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms181403(v=vs.90).aspx)

部分：变更集和搁置集之间的区别：

> 与变更集不同，**搁置集是非版本化实体**。如果您或其他用户取消搁置包含搁置集的项目、编辑多个文件并重新搁置搁置集，Team Foundation 不会创建新版本的项目以供将来比较，并且不会保留有关修改项目的人员、时间或以什么方式。原来的搁板被完全替换。

所以，不，你不能回顾历史。我不确定比较搁板的方法。您还应该阅读整个部分（变更集和搁置集之间的区别），因为其中的每个项目都是不使用搁置集代替变更集的有力论据。

我也想不出任何理由为什么使用搁置集而不是变更集是可取的，也许你可以列出你们都在探索这条道路的原因。想想无法跟踪更改，仅此一项就应该是一个交易破坏者（当然，即使没有版本化的搁置集也应该这样做）..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T16:43:08.920

搁置集上没有版本控制，但可以将工作区中的代码与搁置集中的代码进行比较，而无需拉取搁置集文件。

1.  将要与搁置集内容进行比较的文件版本拉入工作区
2.  在该工作区中打开解决方案
3.  文件 >> 源代码管理 >> 取消搁置挂起的更改...
4.  找到所需的搁置集并显示其详细信息
5.  在 Shelveset Details 窗口中的每个文件上，您可以右键单击并选择 Compare >> With Workspace Version...

TFS 会将搁置文件拉到一个临时位置，显示差异，然后（？）完成后清理临时文件。

您将把搁置文件内容与此工作区中本地磁盘上的文件内容进行比较。如果对这两个文件都进行了更改，则比较将无法判断并将指示所有这些更改。但是，您可以将 selveset 版本与其原始版本进行比较（比较 >> 与未修改版本..），以查看仅对 shelveset 文件所做的所有更改。您还可以找出作为搁置文件 (Properties..) 基础的变更集，并查看自该通用基础变更集以来向工作区版本添加了哪些更改。

但是没有树比较，这可能需要 TFS 电动工具才能工作。

PS> 我不建议尝试使用搁置集来代替这样的签到。如果多年来我学到了一件事，那就是不要与微软设计的工作流程作斗争——你按照他们的方式做事，或者你找到不同的工具。Microsoft 不希望您以这种方式使用搁置集（他们希望您使用变更集和分支），如果您尝试，您将不断与 Microsoft 设计的工作流程作斗争。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:19:36.863

就像它在 dugas 发布的链接上所说的那样，架子更多地是为了……嗯，搁置东西。例如，在我现在正在处理的项目中，我为我正在进行的一些重构更改做了一个搁置，因为一些不相关的东西坏了，我需要将代码恢复到原始的非错误填充版本。当我正在尝试某事并想要备份但我还不想签入代码时，我也会使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T12:27:38.983

您可以在将它们提交到存储库之前使用搁置集进行同行代码审查......也可以在通过门控构建过程之前将提交停放。

除了“快速搁置”工作之外，它们不适合任何其他工作 - 如果您想要拥有多个并行工作流，请使用分支。

# facebook - 在画布应用中获取 request_ids

> ID：12698163
> 
> 赞同：1
> 
> 时间：2012-10-02T20:53:20.973
> 
> 标签：facebook, canvas

我有一个这样的 Facebook 画布应用程序：http: [//dpaste.com/809111/](http://dpaste.com/809111/)

当用户使用 facebook 多朋友选择器在我的网站上邀请朋友时，我使用它来重定向我网站上的用户。

当用户在 facebook 上收到请求时，他点击如下链接：

[http://apps.facebook.com/XXXXX/?fb_source=notification&request_ids=XXXXXX&ref=notif&app_request_type=user_to_user](http://apps.facebook.com/XXXXX/?fb_source=notification&request_ids=XXXXXX&ref=notif&app_request_type=user_to_user)

然后，通过我的 facebook 画布应用程序将被重定向到我的网站上。

好的，完美。

现在，我想捕获 request_ids 并在自定义链接上重定向用户，如下所示：

mysite.com/invite/?request_ids=XXXXXX

跟踪邀请和邀请结果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:07:21.067

Solved with `$_GET[request_ids]`, easy :)

# sql - 自定义数据库的输出并对其进行格式化

> ID：12698164
> 
> 赞同：0
> 
> 时间：2012-10-02T20:53:21.893
> 
> 标签：sql, text, format

假设您有一个平均外观的数据库。并且您想要生成各种文本文件（每个都有自己特定的格式 - 所以文件可能有基本的表格和间距）。因此，您将从数据库中获取数据，将其转换为指定格式（同时执行一些基本逻辑）并将其保存为文本文件（您可以将其存储在 XML 中作为中间步骤）。

因此，如果您必须创建 10 个这些独特的文件，那么创建这些文件的理想方法是什么？我想你可以为每种类型的转换创建类，但是你需要创建很多类，如果你需要再创建 10 个这样的文件（一年之后）怎么办？

您认为解决这个问题的好方法是什么？能够保持输出文件的可定制性，但又不会造成混乱的代码和维护工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:06:12.107

Here is what I would do if I were to come up with a general approach to this vague question. I would write three pieces of code, independent of each other:

a) A query processor which can run a query on a given database and output results in a well-known xml format.

b) An XSL stylesheet which can interpret the well-known xml format in (a) and transform it to the desired format.

c) An XML-to-Text transformer which can read the files in (a) and (b) and put out the result.

# gradle - gradle - 包含 JAR 而不过滤二进制换行符

> ID：12698167
> 
> 赞同：2
> 
> 时间：2012-10-02T20:53:33.797
> 
> 标签：gradle

我有带有子项目的项目 A

A/B 空调

（B 和 C 子项目）。B 和 C 被编译成 A 成一个 Jar 文件。使用下面的代码。

```
gradle.taskGraph.whenReady {
    jar {
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }

    manifest {
        attributes("Main-Class": "brut.apktool.Main")
    }
    }
} 
```

这很好用，但我在 /a/b/src/main/resources/prebuilt.jar 中有一个预构建的 JAR。这个jar只是封装了我在程序中需要的一些随机文件。没有任何java或任何东西。我从 inputStream 中获取它们，但是在使用 Gradle 构建之后，它会转换二进制换行数据，然后弄乱存档。

我尝试使用构建的 CopyTask 帖子复制 jar，但我永远无法在 gradle.TaskGraph.whenReady 之前运行任务。

回到马文。我只会禁用对该文件的过滤，但在 Gradle 中找不到相同的表达式。

编辑：这是我目前所做的，它将我的更改过滤到属性文件中，但不进行换行过滤。

```
processResources {
    ext.fullrev = ''
    ant.loadfile(srcFile: "../../.git/refs/heads/master", property: ext.fullrev)
        filter(FixCrLfFilter)
    filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: [version: apktoolversion, gitrev: ant.properties[ext.fullrev].substring(0,10)])
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:43:28.127

很好解决了。对于未来的谷歌人。

```
processResources {
    from('src/main/resources/properties') {
        include '**/*.properties'
        into 'properties'
        ext.fullrev = ''
        ant.loadfile(srcFile: "../../.git/refs/heads/master", property: ext.fullrev)
        filter(ReplaceTokens, tokens: [version: apktoolversion, gitrev: ant.properties[ext.fullrev].substring(0,10)])
    }
    from('src/main/resources/') {
        include '**/*.jar'
    }

    includeEmptyDirs = false
} 
```

很简单的解释。如果文件属于我的 *.properties 包含，那么它的过滤等。

如果它落入 *.jar，它只是向前复制而不过滤。防止 graddle/plugin 过滤 JAR 文件中的二进制换行符。

# ruby - Sinatra/静态资产

> ID：12698168
> 
> 赞同：0
> 
> 时间：2012-10-02T20:53:40.740
> 
> 标签：ruby, sinatra

我克隆了一个 sinatra 应用程序[https://github.com/trivektor/Backbone-Hangman](https://github.com/trivektor/Backbone-Hangman)，其文件设置如下图所示。在终端中，我运行了 `ruby hangman.rb`命令，但出现错误

```
`require': no such file to load -- sinatra/static_assets 
```

static_assets 会引用公用文件夹中的图像和 css 吗？static_assets 是包含这些文件的 sinatra 方式吗？谁能解释可能是什么问题？

![在此处输入图像描述](../Images/889c6a5387805ee2a055de1432723058.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:18:35.880

```
gem install sinatra-static-assets 
```

解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:19:27.997

看起来该示例需要[sinatra-static-assets](https://github.com/wbzyl/sinatra-static-assets/ "sinatra-静态资产") gem。

# objective-c - 长按：BAD_EXC_ACCESS

> ID：12698169
> 
> 赞同：0
> 
> 时间：2012-10-02T20:53:44.687
> 
> 标签：objective-c, xcode, uigesturerecognizer

这是我的代码：

```
@interface UserProfileViewController : UIViewController<UIGestureRecognizerDelegate>{

}

@property (nonatomic, retain) UILabel *myLabel;
@property (nonatomic, retain) UIImageView *imageView;

@end

@implementation UserProfileViewController

@synthesize myLabel;
@synthesize imageView;

- (void)viewDidLoad
{
[super viewDidLoad];

UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
scrollView.contentSize = CGSizeMake(320, 700);
scrollView.clipsToBounds = YES;
[scrollView setUserInteractionEnabled:YES];

myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 40)];
myLabel.text = @"Kim Gysen";
myLabel.center = CGPointMake(CGRectGetWidth(self.view.bounds)/2.0f, 25);
myLabel.textAlignment = NSTextAlignmentCenter;
myLabel.textColor = [UIColor whiteColor];
[myLabel setBackgroundColor:[UIColor clearColor]];

self.imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 140, 180)];
self.imageView.center = CGPointMake(CGRectGetWidth(self.view.bounds)/2.0f, 150);
UIImage *image = [UIImage imageNamed: @"ProfilePic.jpeg"];
[imageView setImage:image];

//Long press

self.imageView.userInteractionEnabled = YES;
UILongPressGestureRecognizer *longPressGestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressFrom:)];
longPressGestureRecognizer.delegate = self;
[self.imageView addGestureRecognizer:longPressGestureRecognizer];

[scrollView addSubview:myLabel];
[scrollView addSubview:imageView];
[self.view addSubview:scrollView];

}

- (void) handleLongPressFrom: (UISwipeGestureRecognizer *)recognizer
{
    CGPoint location = [recognizer locationInView:self.view];

    NSLog(@"Tap Gesture Coordinates: %.2f %.2f", location.x, location.y);
    if(UIGestureRecognizerStateBegan == recognizer.state)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Gesture Recognizer Demo"
                                                        message:@"Long Press Gesture performed"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

我的 ViewDidLoad 中没有任何错误，但是在实际触发该方法之前，长按出现 BAD_EXC_ACCESS 错误。我知道我在某处泄漏，但在哪里？我正在使用ARC ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:16:35.783

您应该在指向 ProfileViewController 的主视图控制器（类型为强）中创建一个属性，然后使用：

```
self.profileView = [[UserProfileViewController alloc] init]; 
[self.view addSubview: self.profileView.view]; 
```

# iphone - 在 UITableViewCell 中访问 UITextField

> ID：12698170
> 
> 赞同：1
> 
> 时间：2012-10-02T20:53:46.013
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用`UITableView`带有子类原型单元的 a `UITextField`。该细胞在 4 个部分中总共使用了 4 次。这是它的代码：

```
...
- (void)viewDidLoad
{
[super viewDidLoad];
cellTitles = [[NSArray alloc] initWithObjects:@"Smell", @"Taste", @"Suits", @"Notes",  nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return [cellTitles count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [cellTitles count] / [cellTitles count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [cellTitles objectAtIndex:section];
}  

- (AddInfoCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"AddInfoCell";

AddInfoCell *addInfoCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (addInfoCell == nil) {
    addInfoCell = [[AddInfoCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}
addInfoCell.cellTextView.delegate = self;

return addInfoCell;
} 
```

我想将每个单元格中的文本添加到`dataSource`对象中：

```
-(IBAction)nextButtonPressed:(id)sender {
...
[[dataSource objectAtIndex:dataSourceIndex] setObject:* forKey:@"Smellnote"];
[[dataSource objectAtIndex:dataSourceIndex] setObject:** forKey:@"Tastenote"];
//etc
…
} 
```

*来自单元格 1 的文本

**单元格 2 中的文本

如何访问我想要的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:59:59.957

也许你看错了。为什么不将 textField 的委托设置为单元格本身，即在 Cell 的类中，将委托设置为 File'sOwner 或在 init... 方法中设置为 self。

创建对 dataSource 的引用并将 dataSource 与字典的 @"Key" 一起传递给您的单元格。

```
cell.dataSource = self.dictionary;
cell.dataKey = @"Tastenote";
//in cell .m
//textFieldDelegate method...
[self.dataSource setObject:self.cellTextView.text forKey:self.dataKey]; 
```

# .net - NEST ElasticSearch 客户端中 SearchBuilder 的使用

> ID：12698178
> 
> 赞同：4
> 
> 时间：2012-10-02T20:54:24.973
> 
> 标签：.net, elasticsearch, nest

我想知道是否有人对在 NEST 中使用 SearchBuilder API 有任何提示或示例。文档仍然有点稀疏。

我希望根据 URL 参数中发送的条件动态构建查询/过滤器。一个例子：

www.mydomain.com/things/search?prop1=3&prop2=foo&prop3=bar

一旦我提取了那些，我想根据现有的标准构建一个完全匹配的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:04:43.140

使用 DSL 查询语法，您现在可以简单地执行以下操作：

```
var results = client.Search(s=>s
    .Fields(new string[0])
    .Query(q=>
        q.Term(ESFields.City, city)
        && q.Term(ESFields.State, state)
    )
); 
```

这依赖`conditionless query`于 0.9.10.0 中添加的支持。

`city`如果持有值，这将只呈现城市查询，如果`state`不为空或不为空，则只会呈现州术语查询。

*   如果两者都有效，它将执行布尔查询
*   如果只有一个有效，它将只执行一项查询
*   如果两者都无效，它将回退到 match_all 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:58:19.510

这就是我最终这样做的方式：

```
 var boolQuery = QueryFactory.BoolQuery();
  if (!String.IsNullOrEmpty(city)) { boolQuery.Must(QueryFactory.TermQuery(ESFields.City, city)); }
  if (!String.IsNullOrEmpty(state)) { boolQuery.Must(QueryFactory.TermQuery(ESFields.State, state)); }
  //etc. for many fields

  var sb = SearchBuilder.Builder();
  //I want no actual data - this will ensure I only get IDs
  sb.Fields(new string[0]);
  sb.Query(boolQuery);

  var companyIds = ((ElasticClient)_elasticClient).Search(sb, ESIndexes.Client, ESIndexTypes.Client, tenantId)
    .DocumentsWithMetaData.Select(d => d.Id).ToList(); 
```

不确定这是最有效/最有效的方法，但它确实有效。

# regex - 正则表达式匹配可选的“+”符号，后跟任意数量的数字

> ID：12698181
> 
> 赞同：35
> 
> 时间：2012-10-02T20:54:42.160
> 
> 标签：regex

我想要一个正则表达式来匹配一个字符串，该字符串可能以加号开头，也可能不以加号开头，然后包含任意数量的数字。

这些应该匹配

```
 +35423452354554
  or
  3423564564 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-02T20:58:00.310

这应该工作

```
\+?\d+ 
```

匹配`+`行首的可选项和后面的数字

编辑：

根据 OP 的澄清要求： 3423kk55 是匹配的，因为它是第一部分（3423）。要匹配整个字符串，请仅使用它：

```
^\+?\d+$ 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T20:58:16.137

它看起来像这样：

```
\+?\d+ 
```

`\+`表示字面加号，表示`?`前组（加号）可以出现0次或1次，`\d`表示数字字符，final`+`要求前组（数字）出现一次或多次。

**编辑：**使用正则表达式时，请记住*查找*和*匹配*之间存在差异（至少在 Java 中，尽管大多数正则表达式实现都有类似的方法）。*find*将在拥有字符串的某个位置找到子字符串，并且*matches*将尝试将整个字符串与模式匹配，如果之前或之后有额外的字符则失败。确保您使用了正确的方法，并记住您可以添加 a`^`来强制行的开头和 a`$`来强制行的结尾（使整个事情看起来像`^\+?\d+$`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T20:58:19.807

简单的`^\+?\d+$`

起始行，然后是 1 或 0 加号，后跟至少 1 位数字，然后是 lnie 结尾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:58:10.957

它的 Perl 正则表达式可以是：`\+?\d+`

# xml - XmlDocument递归节点处理示例

> ID：12698182
> 
> 赞同：1
> 
> 时间：2012-10-02T20:54:45.443
> 
> 标签：xml, vb.net

这不是一个问题，而是一个可能对像我这样想要研究 VB.NET XmlDocument 节点层次结构如何工作的人有用的示例。

以下子例程递归遍历 XML 文档树，显示遇到的元素和属性...

```
Private Sub XmlDocumentWalker(XmlNode As XmlNode)

    If TypeOf XmlNode Is XmlComment Then

        MsgBox(XmlNode.Value, MsgBoxStyle.OkOnly, "XML Comment")

        If XmlNode.HasChildNodes Then XmlDocumentWalker(XmlNode.FirstChild)
        If Not IsNothing(XmlNode.NextSibling) Then XmlDocumentWalker(XmlNode.NextSibling)

    ElseIf TypeOf XmlNode Is XmlElement Then

        If XmlNode.HasChildNodes And (TypeOf XmlNode.FirstChild Is XmlText) Then

            MsgBox(XmlNode.Name & "=""" & XmlNode.FirstChild.Value & """", MsgBoxStyle.OkOnly, "XML Element")

        Else

            MsgBox(XmlNode.Name, MsgBoxStyle.OkOnly, "XML Element")

        End If

        If DirectCast(XmlNode, XmlElement).HasAttributes Then
            For Each XmlAttribute As XmlNode In DirectCast(XmlNode, XmlElement).Attributes

                MsgBox(XmlAttribute.Name & "=""" & XmlAttribute.Value & """", MsgBoxStyle.OkOnly, "XML Attribute")

            Next
        End If

        If XmlNode.HasChildNodes And Not (TypeOf XmlNode.FirstChild Is XmlText) Then XmlDocumentWalker(XmlNode.FirstChild)
        If Not IsNothing(XmlNode.NextSibling) Then XmlDocumentWalker(XmlNode.NextSibling)
    End If
End Sub 
```

提供以下代码来说明实际加载要由 XMLDocumentWalker 子例程遍历的 XML 文档：

```
Private XmlDocument As XmlDocument

Private ValidationErrorCount As Integer

Public Sub Load()
    ValidationErrorCount = 0

    Try
        Dim XmlReader As XmlReader
        Dim XmlReaderSettings As New XmlReaderSettings()
        Dim ValidationEventHandler As New ValidationEventHandler(AddressOf XMLValidationErrorMessage)

        XmlReaderSettings.ValidationType = ValidationType.DTD
        XmlReaderSettings.DtdProcessing = DtdProcessing.Parse

        AddHandler XmlReaderSettings.ValidationEventHandler, ValidationEventHandler

        XmlReader = XmlReader.Create(FileName, XmlReaderSettings)

        XmlDocument = New XmlDocument()

        XmlDocument.Load(XmlReader)

        If 0 = ValidationErrorCount Then
            XmlDocumentWalker(XmlDocument)
        End If

    Catch Exception As Exception
        XmlDocument = Nothing
        MsgBox(Exception.Message, MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Configuration file load error")
    End Try
End Sub

Private Sub XMLValidationErrorMessage(ByVal sender As Object, ByVal args As ValidationEventArgs)
    If 0 = ValidationErrorCount Then
        MsgBox(ConfigurationResource, MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Configuration file invalid")
    End If

    MsgBox(args.Message, MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "XML format error")

    ValidationErrorCount += 1
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:58:52.370

因为这真的不是一个问题——我将其标记为已回答。

# vb.net - 重新加载VB.NET后如何按列保留datagrid排序asc/desc

> ID：12698190
> 
> 赞同：1
> 
> 时间：2012-10-02T20:55:19.047
> 
> 标签：vb.net, datagrid

我在 timer_tick() 子例程中每 60 秒从 Access 数据库中填充一次数据网格。

```
Dim direction As SortOrder
.
.
. 
```

DataGridView1 ColumnHeaderMouse点击代码：

```
direction = DataGridView1.SortOrder
MsgBox(direction.ToString()) 
```

现在，每隔一次单击它就会显示降序和另一半 '2' ，只是插入了升序的数字。有谁知道为什么会发生这种情况或如何解决？

我试图实现的是在计时器 tick() 子中自动重新加载数据网格后保留排序顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:24:56.390

我找到了答案： [http ://www.tek-tips.com/viewthread.cfm?qid=1617798](http://www.tek-tips.com/viewthread.cfm?qid=1617798)

问题是 DataGridView.SortOrder 返回 Windows.Forms.SortOrder 的值（此变量类型将检索当前排序顺序）

同时

DataGridView.Sort() 正在寻找 System.ComponentModel.ListSortDirection 的值（此变量类型将设置新的排序顺序）

所以我们需要这样的东西：

```
columnXY = DataGridView1.SortedColumn
*' if no column set for sort use third one *
        If columnXY Is Nothing Then
            columnXY = DataGridView1.Columns(2)
        End If

Dim SetSortOrder As ListSortDirection
Dim GridSortOrder As SortOrder
GridSortOrder = DataGridView1.SortOrder

        If GridSortOrder = Windows.Forms.SortOrder.Ascending Then
            SetSortOrder = ListSortDirection.Ascending
        ElseIf GridSortOrder = Windows.Forms.SortOrder.Descending Then
            SetSortOrder = ListSortDirection.Descending
        ElseIf GridSortOrder = Windows.Forms.SortOrder.None Then
            SetSortOrder = ListSortDirection.Ascending
        Else : GridSortOrder = ListSortDirection.Ascending
            MsgBox("not good")
        End If

DataGridView1.DataSource = datasetXY.Tables(0)
DataGridView1.Sort(columnXY, SetSortOrder) 
```

现在数据网格中的项目将保持按同一列排序，并在重新加载后升序/降序。

# c# - SelectListItem 列表应该去哪里？

> ID：12698191
> 
> 赞同：0
> 
> 时间：2012-10-02T20:55:21.347
> 
> 标签：c#, asp.net-mvc-3

在 MVC 应用程序中，我有一些 DropDownLists。在我的控制器中，我创建了`IEnumerable<SelectListItem>`s 并将它们传输到我的视图。不幸的是，如果出现验证错误，我需要重新创建这些列表，否则视图渲染会失败。

在我正在做的控制器操作方法中：

```
var possibilities = _repo.Objects.Select(o=>new SelectListItem(...));
viewmodel.Possibilities = possibilities;
return View(viewmodel); 
```

视图模型的 Possibilities 属性定义如下：

```
IEnumerable<SelectListItem> Possibilities { get; set; } 
```

在我看来，我访问它：

```
@Html.DropDownListFor(vm=>vm.ThePossibility, vm.Possibilities) 
```

问题是当表单发布操作方法被调用时，传递给它的视图模型有一个 null for `Possibilities`，所以当我调用时：

```
if(!ModelState.IsValid)
    return View(model); 
```

视图不会被渲染。

我理解为什么 post 操作方法的属性为空，但纠正这个问题的最佳方法是什么？我宁愿不重新初始化这些列表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:58:01.580

如果您不想重新初始化列表，则必须将它们缓存在某个地方，例如会话或其他地方。

坦率地说，在大多数情况下，重建它们更简单。您每次都必须重新分配它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:02:33.203

您应该考虑使用[Post-Redirect-Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)；[这篇博](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg)文中描述了一对很好的属性，这使得在 ASP.Net MVC 中很容易做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:04:18.007

我通常将这些缓存在某处或提供一个静态类来获取常用列表。然后，您可以使用 getter 在您的模型中提供对这些的访问。

例如：

```
IEnumerable<SelectListItem> _possibilities 
IEnumerable<SelectListItem> Possibilities 
{ 
   get
   {
       if (_possibilities == null)
           _possibilities = CommonLists.Possibilities();

       return possibilities;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T06:14:13.467

[访问](http://www.newtonsoft.com/json)器和 JSON ( [NetwonSoft](https://msdn.microsoft.com/library/aa287786) ) 是您的朋友。

简而言之

1.  当您获得模型`set`的`IEnumerable<SelectListItem>`属性时，**将其序列化为**公共字符串属性。
2.  当您的公共字符串属性是`set`且未`IEnumerable<SelectListItem>`定义（例如 null）时，将字符串属性**反序列化为**`IEnumerable<SelectListItem>`模型的属性。
3.  在您看来，嵌入序列化的字符串，以便它在发送到服务器的帖子之间保持不变。（例如`@Html.HiddenFor(...)`）

**模型**

```
public class MyViewModel
{
    public IEnumerable<SelectListItem> Selections
    {
        get
        {
            return selections;
        }
        set
        {
            selections= value;
            // serialize SelectListItems to a json string
            SerializedSelections = Newtonsoft.Json.JsonConvert.SerializeObject(value);
        }
    }
    IEnumerable<SelectListItem> selections;

    public string SerializedSelections
    {
        get
        {
            return serializedSelections;
        }
        set
        {
            serializedSelections = value;
            if(Selections == null)
            {
                // SelectListItems aren't defined.  Deserialize the string to the list
                Selections = Newtonsoft.Json.JsonConvert.DeserializeObject<IEnumerable<SelectListItem>>(value);
            }
        }
    }
    string serializedSelections;
} 
```

**剃刀视图**

```
<form>
...
@Html.HiddenFor(m => m.SerializedSelections)
...
@Html.DropDownListFor(m => m.SomeProperty, Model.Selections)
</form> 
```

# javascript - 使用 jQuery 触发真实事件

> ID：12698192
> 
> 赞同：6
> 
> 时间：2012-10-02T20:55:42.300
> 
> 标签：javascript, jquery, javascript-events

似乎 jQuery`trigger()`只运行与 jQuery 绑定的事件处理程序。我有一些使用本机浏览器事件绑定的模块。使用来自[https://stackoverflow.com/a/2676527](https://stackoverflow.com/a/2676527)的代码对我有用，但我想知道 jQuery 中是否有内置的东西可以做到这一点？

**评论更新：** 显然它适用于按钮上的点击事件。但不适用于选择框上的更改事件：http: [//jsfiddle.net/qxpXV/2/](http://jsfiddle.net/qxpXV/2/)

记录在案：破解另一个库以使用 jQuery 进行绑定确实**有效**`trigger()`，但我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:37:37.177

您可以通过直接在 DOM 元素上手动触发/调度事件（取决于浏览器，`fireEvent`/ ）来做到这一点。[此答案](https://stackoverflow.com/q/2490825/1081234)`dispatchEvent`中的代码将处理事件分派，您只需要针对 DOM 元素而不是 jQuery 包装器执行它。

# ruby-on-rails - rake db:seed 失败 b/c .specification 缺少预期的“-”指示符

> ID：12698199
> 
> 赞同：0
> 
> 时间：2012-10-02T20:56:16.120
> 
> 标签：ruby-on-rails

当我运行时`rake db:seed`，我收到错误：

`(<my rails root>/vendor/gems/tzinfo-0.3.30/.specification): did not find expected '-' indicator while parsing a block collection at line 1 column 1`

我搞不清楚了。谁能给我一个线索？这是 .specification 文件的内容：http: [//pastie.org/4898962](http://pastie.org/4898962)

*规格：rails 2.3.5，ruby 1.8.7*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:04:40.493

`rake gems:refresh_specs`先跑，再跑`rake db:seed`。

该`.specification`文件（显然）已失效。

# python-2.7 - 在发送电子邮件之前检查是否附加了列表

> ID：12698200
> 
> 赞同：1
> 
> 时间：2012-10-02T20:56:19.663
> 
> 标签：python-2.7

所以我有一个脚本可以检查 1 天以前的文件。如果此目录中没有不到一天的文件（例如今天创建的文件），我希望我的脚本向我发送一封电子邮件。

我的脚本，让我给你看：

```
new_files = [] #list of files newer than 1 day
for f in os.listdir(path):
 fn = os.path.join(path,f)
 ctime = os.stat(fn).st_ctime
 if ctime > now - 1 * 86400:
 #this is a new file
  new_files.append(fn)
 if new_files(): #checks the list
  sendmail #calls sendmail script that sends email 
```

那么，`if new_files():`我是否正在检查我的列表以查看是否附加了任何内容。如果不是，则该过程失败，我们需要通过向我们的票务系统生成警报电子邮件来了解。这就是我的问题所在。我不知道如何查看列表。当我运行脚本时，我得到`TypeError: 'list' object is not callable`.

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:04:38.050

[引用 PEP 8](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)：

> 对于序列（字符串、列表、元组），使用空序列为假的事实。

```
Yes: if not seq:
     if seq:

No: if len(seq)
    if not len(seq) 
```

对于您的代码：

```
if new_files: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:03:12.203

计算出现次数会有所帮助。

```
new_files = [] #list of files newer than 1 day
for f in os.listdir(path):
   fn = os.path.join(path,f)
   ctime = os.stat(fn).st_ctime
   if ctime > now - 1 * 86400:
        countit=new_files.count(fn)  #count previous occurence
        #this is a new file
        new_files.append(fn)
        if new_files.count(fn)>countit: 
             sendmail #calls sendmail script that sends email 
```

# c - C 错误：预期在 â.â 标记之前的表达式

> ID：12698203
> 
> 赞同：1
> 
> 时间：2012-10-02T20:56:28.587
> 
> 标签：c

当我尝试编译我的代码时，我不断收到此错误：

```
cc -Wall -Werror -g -c -o lwp.o lwp.c
lwp.c: In function ânew_intel_stackâ:
lwp.c:120: error: expected expression before â.â token
lwp.c:122: error: expected expression before â.â token
lwp.c:124: error: expected expression before â.â token
lwp.c:126: error: expected expression before â.â token
lwp.c:130: error: expected expression before â.â token
lwp.c:132: error: expected expression before â.â token
lwp.c:134: error: expected expression before â.â token
lwp.c:136: error: expected expression before â.â token
lwp.c:138: error: expected expression before â.â token
lwp.c:140: error: expected expression before â.â token
lwp.c:142: error: expected expression before â.â token
make: *** [lwp.o] Error 1 
```

它所指的功能在这里：

```
/* make ourselves a nice intuitive "push()" macro */
#define push(sp,val) (*(..sp)=(unsigned)(val))

unsigned long *new_intel_stack(unsigned long *sp,lwpfun func, void *arg) {
    unsigned long *ebp;
    push(sp,arg); /* argument */
    push(sp,lwp_exit); /* for lwp return purposes */
    push(sp,func); /* function's return address */
    push(sp,0x1abcdef1); /* bogus "saved" base pointer */
    ebp=sp; /* remember sp from this point for later */
    push(sp,0x6c6f7453); /* push initial eax, ebx, ecx, edx, esi and edi -- bogus */
    push(sp,0x66206e65);
    push(sp,0x206d6f72);
    push(sp,0x746e6957);
    push(sp,0x32207265);
    push(sp,0x21363030);
    push(sp,ebp); /* push initial edp */
    return sp;
} 
```

我真的不知道为什么会收到此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:59:04.627

该错误是由`..`宏内部的序列引起的。

`..`宏定义中应该是什么意思？

```
(*(..sp)=(unsigned)(val)) 
```

C 语言中没有任何内容可以匹配您对 that 的使用`..`。C 有`.`运算符，但不能像在宏中那样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:00:41.393

你的意思是

```
#define push(sp,val) (*(--sp)=(unsigned)(val)) 
```

??

# spring - spring-data 与 neo4j + mongo 版本冲突

> ID：12698204
> 
> 赞同：0
> 
> 时间：2012-10-02T20:56:31.887
> 
> 标签：spring, spring-data, spring-data-neo4j, spring-data-mongodb

在我的 spring 应用程序中，我正在通过**spring-data**项目使用**Neo4j** DB 。我想将**mongo** db 作为另一个数据存储添加到我的应用程序中。 尝试同时使用这两个数据存储时似乎存在一些冲突。

 ******我的 pom - 只有相关的依赖项：**

```
 <spring.version>3.1.2.RELEASE</spring.version>
    <spring.data.mongo.version>1.0.4.RELEASE</spring.data.mongo.version>
    <neo4j.version>1.8.RC1</neo4j.version>
    <spring-data-neo4j.version>2.1.0.RC4</spring-data-neo4j.version>
    <spring-data-commons.version>1.4.0.RC1</spring-data-commons.version>
    <slf4j.version>1.6.0</slf4j.version>

<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>${spring.data.mongo.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j</artifactId>
        <version>${spring-data-neo4j.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>slf4j-log4j12</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-commons-core</artifactId>
        <version>1.4.0.RC1</version>
    </dependency>

    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>${neo4j.version}</version>
        <classifier>static-web</classifier>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>log4j-over-slf4j</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>${neo4j.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>log4j-over-slf4j</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

**尝试加载 spring 应用程序上下文时出现以下异常：**

```
 java.lang.IllegalStateException: Failed to load ApplicationContext
at    org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
at   org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
  Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [mongo-config.xml]
 Offending resource: class path resource [core-context.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [mongo-config.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.mongodb.config.MongoNamespaceHandler] for namespace [http://www.springframework.org/schema/data/mongo]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/data/repository/config/AbstractRepositoryConfigDefinitionParser
at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:271)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
... 24 more
  Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [mongo-config.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.mongodb.config.MongoNamespaceHandler] for namespace [http://www.springframework.org/schema/data/mongo]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/data/repository/config/AbstractRepositoryConfigDefinitionParser
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:255)
... 42 more
  Caused by: org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.mongodb.config.MongoNamespaceHandler] for namespace [http://www.springframework.org/schema/data/mongo]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/data/repository/config/AbstractRepositoryConfigDefinitionParser
at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:139)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1414)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
... 45 more
  Caused by: java.lang.NoClassDefFoundError:    org/springframework/data/repository/config/AbstractRepositoryConfigDefinitionParser
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$100(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.springframework.data.mongodb.config.MongoNamespaceHandler.init(MongoNamespaceHandler.java:35)
at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:130)
... 52 more
   Caused by: java.lang.ClassNotFoundException:      org.springframework.data.repository.config.AbstractRepositoryConfigDefinitionParser
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 66 more 
```

我猜有版本冲突，所以我尝试更改一些版本，但没有任何运气，任何人都可以帮助设置这个..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:25:03.560

很容易解决，您没有最新版本的 Spring-Data-MongoDB。将其更改为`1.1.0.RC1`. 1.0.4 依赖于旧版本的`spring-data-commons-core`.

证明在poms中：

[Spring-Data-MongoDB 1.1.0.RC1 pom](http://maven.springframework.org/milestone/org/springframework/data/spring-data-mongodb-parent/1.1.0.RC1/spring-data-mongodb-parent-1.1.0.RC1.pom)

[Spring-Data-Neo4j 2.1.0.RC4 pom](http://maven.springframework.org/milestone/org/springframework/data/spring-data-neo4j-parent/2.1.0.RC4/spring-data-neo4j-parent-2.1.0.RC4.pom)****

# css - translate3d() 导致 Safari 中的剪辑

> ID：12698206
> 
> 赞同：2
> 
> 时间：2012-10-02T20:57:04.140
> 
> 标签：css, safari, webkit, translate3d

我有一个我正在开发的网络应用程序，它严重依赖于绝对定位、CSS 转换和 CSS 转换。

我的标记：

```
<div class="wrapper">
    <div class="background" ></div>
    <div class="foreground" >
        <div class="image" ></div>
    </div>
</div>​ 
```

我的 CSS

```
.wrapper{
    -webkit-perspective: 1600;
    -webkit-perspective-origin-y: 30%;
    height: 500px;
    width: 100%;
}

.background{
    position: absolute;
    background-size: 100% 100%;
    background-image: url("http://farm9.staticflickr.com/8321/8038059897_403c567211.jpg");
    background-color: transparent;
    position: absolute;
    width: 100%;
    height: 300px;
    bottom: 0;
    pointer-events: none;
    -webkit-transform:translate3d(0px,0px,0px);
}

.foreground{
    position: absolute;
    top: 5%;
    bottom: 5%;
    left: 5%;
    right: 5%;
    -webkit-transform: rotateY(25deg);
}

.foreground .image{
    background-image: url("http://farm7.staticflickr.com/6139/6198476123_754eaa1920_m.jpg");
    position: absolute;
    background-size: 100% 100%;
    min-width: 100%;
    min-height: 100%;
    -webkit-transform:translate3d(0px,10px,0px);
} 
```

[您可以在http://jsfiddle.net/KjG3f/24/](http://jsfiddle.net/KjG3f/24/)上看到它的实际效果

如果您在 Safari（桌面和 iOS）中查看示例，您会看到前景图像被背景裁剪。但是，在 Chrome 中，它似乎可以正常工作。

从背景中删除 translate3d() 似乎会导致渲染工作，但我需要 translate3d() 用于动画目的。

抢先感谢您的帮助。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:30:35.550

我认为这是 Chrome 中的一个错误，并且确实有两个关于它的问题（http://code.google.com/p/chromium/issues/detail?id=116710 和[http://code.google。 com/p/chromium/issues/detail?id=102673](http://code.google.com/p/chromium/issues/detail?id=102673)）。Firefox 表现出相同的行为。

Safari 的做法很有意义......当您在 3D 空间中旋转前景图像时，它*应该*剪切掉它后面的图像，因为它们在同一平面上。如果您更改前景或背景元素上的 translate3d Z 值，您可以将它们向前或向后移动到它们不相交的位置。

不幸的是，跨浏览器对 3D 转换的支持仍然很弱，祝你好运！

# regex - 正则表达式：在文档中的任何位置查找字符，但仅在以特定单词开头的行上

> ID：12698208
> 
> 赞同：0
> 
> 时间：2012-10-02T20:57:11.470
> 
> 标签：regex

我有一个大文本文件，其中包含以下格式的数据：

```
AUTHOR: John_Doe
TITLE: This is a title
BASENAME: this_is_a_title

AUTHOR: Jill_Doe
TITLE: Another Title
BASENAME: another_title

AUTHOR: Jack
TITLE: Last Title
BASENAME: last_title 
```

如何找到文档中的所有下划线，但只能在以“BASENAME：”开头的行上？我尝试过lookbehinds和groupings，但我有限的正则表达式知识让我转圈圈。有什么想法吗？谢谢！

**编辑**：对不起，昨晚不在我的办公桌前。不确定我使用的是哪种正则表达式，它用于 Sublime Text 2 中的高级搜索。为了澄清，我试图在 BASENAME 行上找到下划线，以便将它们更改为破折号。所以我正在寻找一个只返回下划线的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:02:32.827

我建议`^BASENAME:[^_]*_.*$`。这将找到所有这些行。还是您想单独查找所有下划线而不是包含行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:50:17.173

我会使用分组来获取下划线，否则你会得到所有的文本

```
(?<=^BASENAME:)(.+?(?<underscore>_))* 
```

您将在名为 的组中找到下划线`underscore`。

如果您的语言不支持命名组，您可以改用

```
(?<=^BASENAME:)(.+?(_))* 
```

# java - 媒体播放器创建失败时如何恢复？

> ID：12698209
> 
> 赞同：0
> 
> 时间：2012-10-02T20:57:14.817
> 
> 标签：java, android, media-player, freeze, creation

我有一个应用程序，每秒随机播放 20 种不同声音中的 1 种。近 1000 次成功后，媒体播放器创建函数开始始终返回 null。即使我离开应用程序并重新启动它，问题仍然存在。唯一的解决方案是当我再次安装应用程序或关闭并打开设备时。

有什么方法可以从这种状态中恢复吗？如果我确实释放或重置，媒体播放器已经为空，它们会产生异常。

我每秒执行的顺序如下：

```
if (mp != null)
{   
    if (mp.isPlaying()) 
    {
       mp.stop();   
    }   
    if (mp != null) mp.release();   
    if (mp != null) mp = null;  
}   

mp = MediaPlayer.create(this, R.raw.sound);

if (mp !=null)
{
   mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() 
   {           
      public void onPrepared(MediaPlayer mp) 
      {
    if (mp != null) mp.start();
      }
   };
 }
 else
 {
    // error, what should I do here to recover from this situation?
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:05:22.157

看来我找到了解决方案。我现在已经播放了超过 10000 个音频而不再重现错误。

我要感谢 kcoppock 的帮助，我现在不创建和发布，因为按照他的解释更改数据源要好得多，但这不是主要问题。

**最终的解决方案是将所有的mp3文件转换成ogg文件！！！！**

媒体播放器肯定有 mp3 文件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:07:45.400

您的问题是，即使您正在释放`MediaPlayer`，当您再次尝试使用它时，操作系统可能还没有释放资源，尤其是每秒 20 次。我实际上建议您考虑使用 a`SoundPool`而不是这样的东西。

无论如何，要使用 a 执行此操作`MediaPlayer`，您应该只保留**一个**引用，并且每次都重用该对象以获得不同的声音。由于您使用原始资源进行播放，因此典型的重用场景将是这样的：

```
AssetFileDescriptor afd = getResources().openRawResourceFd(R.raw.sound);

//Resets the MediaPlayer state but keeps the resources
mp.reset();

//Sets the data source to the requested sound (R.raw.sound)
mp.setDataSource(afd.getFileDescriptor());

//Prepare the MediaPlayer to play and then start
mp.prepare();
mp.start(); 
```

# vb.net - 搜索组中的连续号码

> ID：12698210
> 
> 赞同：1
> 
> 时间：2012-10-02T20:57:16.257
> 
> 标签：vb.net

我正在为自己制作一个扑克游戏，我有其余的代码，但我似乎不知道如何搜索七张牌以查看是否有顺子（玩家手中的 5 张外卡和 2 张牌） ，卡片是数字（1 是王牌，2 是 2，等等。11 是杰克，12 是王后等）到目前为止我有这个：

```
Function isStraight(ByVal Player As String)
    Dim h1, h2, h3, h4, h5 As String
    h1 = 0
    h2 = 1
    h3 = 2
    h4 = 3
    h5 = 4
    Dim z1, z2 As String
    If Player = "P1" Then
        z1 = P1Card1
        z2 = P1Card2
    ElseIf Player = "P2" Then
        z1 = P2Card1
        z2 = P2Card2
    End If 
    Dim cntr As Integer = 0
    Do
        cntr = cntr + 1
        h1 = h1 + 1
        h2 = h2 + 1
        h3 = h3 + 1
        h4 = h4 + 1
        h5 = h5 + 1
        If A(FC1, FC2, FC3, FC4, FC5) Or A(FC5, FC1, FC2, FC3, FC4) Or A(FC4, FC5, FC1, FC2, FC3) Or A(FC3, FC4, FC5, FC1, FC2) Then

        End If
    Loop 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:18:29.247

如果您对卡片使用数值，则应使用整数而不是字符串作为数据类型。考虑设计您的方法以这种方式工作：

```
'Accept only cards, use a specific Boolean return type
'IEnumerable(Of Integer) will still allow you to pass arrays to this function
Function isStraight(ByVal River As IEnumerable(Of Integer), ByVal Hand As IEnumerable(Of Integer)) As Boolean

    'Make sure Option Infer is On
    Dim Cards = River.Concat(Hand)

    'Ace can be high or low, so add a high value to the list if you have any aces
    If Cards.Contains(1) Then Cards = Cards.Concat(New Integer() {14}) 

    'It will be MUCH easier to find consecutive cards if they are sorted in order to start with, and we don't care about pairs so limit us to unique number cards
    'The "Function(c) c" here is called a Lambda Expression. This lambda expression tells the OrderBy() method to compare items in the collection for sorting purposes using simple ascending order. 
    Cards = Cards.OrderBy(Function(c) c ).Distinct()

    'If this count gets to five consecutive cards, we have a straight
    Dim StraightCount As Integer 

    'Initialize to a card that can never be consecutive, so first time through the loop will reset the counter
    Dim PreviousCard Integer = -1 

    For Each card As Integer In Cards
       'If the prior card is one less than current card, they are consecutive: add 1 to StraightCount
       'If they are not consecutive, set back to 1 (this is the 1st card in a new potential straight)
       StraightCount = If(card - PreviousCard = 1, StraightCount + 1, 1)

       'If we reach 5, don't bother finishing: Return True immediately
       If StraightCount = 5 Then Return True

       'Set this card as the prior card for the next loop iteration
       PreviousCard = card
    Next card

    'Did not find a straight
    Return False
End Function 
```

# python - 如何调试在 Eclipse 中本地运行的 Celery/Django 任务

> ID：12698212
> 
> 赞同：29
> 
> 时间：2012-10-02T20:57:24.367
> 
> 标签：python, eclipse, celery

我需要从 Eclipse 调试器调试 Celery 任务。我正在使用 Eclipse、PyDev 和 Django。

首先，我在 Eclipse 中打开我的项目，并在任务函数的开头放置一个断点。

然后，我通过右键单击 PyDev 包资源管理器中的 manage.py 并选择“Debug As->Python Run”并指定“celeryd -l info”作为参数，从 Eclipse 启动 Celery 工作人员。这将启动 MainThread、Mediator 和另外三个从 Eclipse 调试器可见的线程。

之后，我返回 PyDev 视图并通过右键单击项目并选择 Run As/PyDev:Django 启动主应用程序

我的问题是，一旦 mytask.delay() 提交了任务，它就不会在断点处停止。我在任务代码中添加了一些痕迹，因此我可以看到它是在其中一个工作线程中执行的。

那么，当它在 Celery 工作线程中执行时，如何使 Eclipse 调试器停止在任务所在的断点处？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-03T09:31:41.007

您应该考虑在与主进程相同的线程中运行 celery 任务的选项（通常它在单独的进程上运行），这将使调试更加容易。

您可以通过将此设置添加到您的 settings.py 模块来告诉 celery 同步运行任务：

```
CELERY_TASK_ALWAYS_EAGER  = True
# use this if you are on older versions of celery
# CELERY_ALWAYS_EAGER = True 
```

注意：这仅用于调试或开发阶段！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-04-18T09:53:00.677

你可以使用 Celery 的[rdb](http://docs.celeryproject.org/en/master/tutorials/debugging.html)来做到这一点：

```
from celery.contrib import rdb
rdb.set_trace() 
```

然后，在不同的终端类型`telnet localhost 6900`中，您将获得调试提示。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-23T20:50:42.433

[CELERYD_POOL](http://docs.celeryproject.org/en/master/configuration.html#celeryd-pool)默认情况下`celery.concurrency.prefork:TaskPool`将为每个工作人员生成单独的进程，PyDev 看不到它们内部。如果将其更改为线程选项之一，则可以使用调试器。

例如，对于 Celery 3.1，您可以使用以下设置：

```
CELERYD_POOL = 'celery.concurrency.threads:TaskPool' 
```

请注意，这需要安装[线程池](https://pypi.python.org/pypi/threadpool)模块。

还要确保有`CELERY_ALWAYS_EAGER = False`，否则更改池类是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-15T10:22:37.910

我创建了一个管理命令来测试任务.. 发现它比从 shell 运行它更容易..

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T19:33:54.293

如果它只在不同的线程上运行，它应该可以在最新的 PyDev 版本上运行（我认为在生成的线程不会被调试之前存在一个问题，但这已得到修复）。

现在，如果它在不同的进程上启动，您需要使用远程调试器（即使它在同一台机器上）。请参阅： http: [//pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)

# vba - VBA Object required 错误取决于代码排列

> ID：12698213
> 
> 赞同：0
> 
> 时间：2012-10-02T20:57:25.497
> 
> 标签：vba, excel, excel-2007

```
r = mainWS.Cells(count, 1).Value
paths = mainWS.Cells(i, 2).Value
pathd = mainWS.Cells(i, 6).Value

.....

If (r = "H") Then

    Application.Workbooks.Open (pathd & "\" & filed)
    Set dWB = Application.Workbooks(filed)
    Set tabD_WB = dWB.Sheets(tabd & "")

    Application.Workbooks.Open (paths & "\" & files)
    Set sWB = Application.Workbooks(files)
    Set tabS_WB = sWB.Sheets(tabs & "")

End If

Set uRange = tabD_WB.Range(Cells(1, 1), Cells(5, tabD_WB.UsedRange.Columns.count)) 
```

因此，如果我将最后一行以 Set uRange 开头**放在 IF 块内，则**该练习将完美运行。如果我在之后/外面立即放置它，它不会。你能帮我理解为什么吗？

我得到的错误（如果它在外面）是`Object required`. 这是Excel内部工作的一些错误吗？

我很困惑。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:00:14.203

`tabD_WB`当在声明之外提及时，您为什么希望它起作用`IF`？

除非您有更多未向我们展示的代码，否则您只能`tabD_WB`在`IF`语句中设置，这意味着对象为空 if `r <> "H"`，并且您无法访问空对象的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:04:17.677

你可以写你的代码

```
Application.Workbooks.Open (pathd & "\" & filed)
Set dWB = Application.Workbooks(filed)
Set tabD_WB = dWB.Sheets(tabd & "") 
```

作为

```
Set dWB = Application.Workbooks.Open(pathd & "\" & filed)
Set tabD_WB = dWB.Sheets(tabd) 
```

现在关于您的错误，您还没有完全限定您的 Cells() 对象。尝试这个

```
With tabD_WB
    Set uRange = .Range(.Cells(1, 1), .Cells(5, .UsedRange.Columns.Count))
End With 
```

我希望您已在代码中声明`uRange`为`Range`某个地方？此外，如果 IF 条件不成立，那么不会有工作簿对象吗？

# c++ - Xcode 4 SFML 2 错误

> ID：12698222
> 
> 赞同：1
> 
> 时间：2012-10-02T20:58:06.873
> 
> 标签：c++, sfml

我使用了 SFML 2 安装程序，可以在这里找到。[http://www.sfml-dev.org/download.php](http://www.sfml-dev.org/download.php)

```
Ld /Users/pjquinn/Library/Developer/Xcode/DerivedData/gangnam_style-ayfrlelgnycrzpdbmwbkqgtkkryv/Build/Products/Debug/gangnam_style.app/Contents/MacOS/gangnam_style normal x86_64
    cd /Users/pjquinn/Programming/C++/gangnam_style
    setenv MACOSX_DEPLOYMENT_TARGET 10.7
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++
-arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk
-L/Users/pjquinn/Library/Developer/Xcode/DerivedData/gangnam_style-ayfrlelgnycrzpdbmwbkqgtkkryv/Build/Products/Debug
-F/Users/pjquinn/Library/Developer/Xcode/DerivedData/gangnam_style-ayfrlelgnycrzpdbmwbkqgtkkryv/Build/Products/Debug
-filelist /Users/pjquinn/Library/Developer/Xcode/DerivedData/gangnam_style-ayfrlelgnycrzpdbmwbkqgtkkryv/Build/Intermediates/gangnam_style.build/Debug/gangnam_style.build/Objects-normal/x86_64/gangnam_style.LinkFileList
-mmacosx-version-min=10.7 -lsfml-system-d -lsfml-window-d -lsfml-graphics-d -lsfml-audio-d -lsfml-network-d -stdlib=libc++ -fobjc-link-runtime -framework Foundation -o /Users/pjquinn/Library/Developer/Xcode/DerivedData/gangnam_style-ayfrlelgnycrzpdbmwbkqgtkkryv/Build/Products/Debug/gangnam_style.app/Contents/MacOS/gangnam_style

ld: library not found for -lsfml-system-d clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我创建一个项目时，我应该选择使用框架框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:04:56.110

[安装程序不附带调试二进制文件。](https://github.com/LaurentGomila/SFML/issues/212)

您还应该看看[其他问题](https://github.com/LaurentGomila/SFML/issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T18:27:19.190

我使用了他们的模板并选中了“使用框架”框，但仍然有问题。我最终做的是自己在项目中添加 SFML 框架文件（他们的安装程序脚本放在 ~/Libraries/Frameworks 中）（简单的拖放）。我仔细检查并确保添加的框架随后包含在构建阶段（它们是）中，并且一切正常。

# android - 自定义捏缩放视图

> ID：12698225
> 
> 赞同：1
> 
> 时间：2012-10-02T20:58:18.457
> 
> 标签：android, xml, zooming

我正在尝试在我正在开发的 Android 应用程序上实现 Pinch To Zoom。为此，我使用 Android 开发人员的网站制作了一个名为 PinchToZoom 的 Java 类。但是，如果我尝试启动我的应用程序，我的 XML 文件中会出现错误。我对为什么感到困惑，因为我认为我已经正确地实现了它。这是 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#222222"
android:orientation="vertical" >

<com.andriesse.athena.PinchToZoom
    android:id="@+id/selectedImage"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:adjustViewBounds="true"
    android:contentDescription="@string/content" />

</LinearLayout> 
```

我希望你们能帮助我！

**编辑：**

我之前忘记添加错误日志，所以这里是：

```
10-03 13:35:40.207: E/AndroidRuntime(2421): FATAL EXCEPTION: main
10-03 13:35:40.207: E/AndroidRuntime(2421): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.andriesse.athena/com.andriesse.athena.ImageEditing}: android.view.InflateException: Binary XML file line #8: Error inflating class com.andriesse.athena.PinchToZoom
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.os.Looper.loop(Looper.java:137)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread.main(ActivityThread.java:4441)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at java.lang.reflect.Method.invokeNative(Native Method)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at java.lang.reflect.Method.invoke(Method.java:511)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at dalvik.system.NativeStart.main(Native Method)
10-03 13:35:40.207: E/AndroidRuntime(2421): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.andriesse.athena.PinchToZoom
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.createView(LayoutInflater.java:589)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.Activity.setContentView(Activity.java:1835)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at com.andriesse.athena.ImageEditing.onCreate(ImageEditing.java:26)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.Activity.performCreate(Activity.java:4465)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
10-03 13:35:40.207: E/AndroidRuntime(2421):     ... 11 more
10-03 13:35:40.207: E/AndroidRuntime(2421): Caused by: java.lang.NoSuchMethodException: <init> [class android.content.Context, interface android.util.AttributeSet]
10-03 13:35:40.207: E/AndroidRuntime(2421):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at java.lang.Class.getConstructor(Class.java:431)
10-03 13:35:40.207: E/AndroidRuntime(2421):     at android.view.LayoutInflater.createView(LayoutInflater.java:561)
10-03 13:35:40.207: E/AndroidRuntime(2421):     ... 22 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:46:04.400

这是关键线：

```
Caused by: java.lang.NoSuchMethodException: <init> [class android.content.Context, interface android.util.AttributeSet] 
```

确保您的自定义列表视图具有以下构造函数：

```
public PinchToZoom(Context context) {
    this(context, null);
}

public PinchToZoom(Context context, AttributeSet attrs) {   // <--- missing?
    this(context, attrs, 0);
}

public PinchToZoom(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    // initialisation code here
} 
```

我以这种方式将它们链接起来，因此除了在第三个构造函数中之外，您无需执行任何操作。如果您有这些构造函数，并且它们没有只能在运行时解析的外部依赖项，那么您的自定义列表视图也将正确预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:03:14.777

与其创建 com.andriesse.athena.PinchToZoom 类型的 xml 节点，不如尝试创建一个视图类型并为其赋予 class="com.andriesse.athena.PinchToZoom" 的类属性，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#222222"
    android:orientation="vertical" >

    <view
        class="com.andriesse.athena.PinchToZoom"
        android:id="@+id/selectedImage"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:adjustViewBounds="true"
        android:contentDescription="@string/content" />

</LinearLayout> 
```

编辑：另外，您可能想尝试使用以下代码，而不是编写自己的捏缩放代码：[https ://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

我在以前的项目中使用过它，它对我很有用。

# ruby - Rake 预览未在 localhost 加载页面

> ID：12698229
> 
> 赞同：0
> 
> 时间：2012-10-02T20:58:45.280
> 
> 标签：ruby, rake, rvm, blogs, octopress

*   我在 Github 上有一个[Octopress](http://octopress.org/docs/setup/)博客
*   我使用 Mac 终端进行更改并推送博客。
*   一切都很好，直到我升级到山狮。
*   现在，当我执行以下操作时

> ```
> >     $ rake preview
> >     /Users/hhimanshu/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:197:
> > warning: Insecure world writable dir /usr/local/bin in PATH, mode
> > 040777
> >     Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
> >     /Users/hhimanshu/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:197:
> > warning: Insecure world writable dir /usr/local/bin in PATH, mode
> > 040777
> >     /Users/hhimanshu/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:197:
> > warning: Insecure world writable dir /usr/local/bin in PATH, mode
> > 040777
> >     /Users/hhimanshu/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:197:
> > warning: Insecure world writable dir /usr/local/bin in PATH, mode
> > 040777
> >     /Users/hhimanshu/.rvm/gems/ruby-1.9.3-p125/gems/maruku-0.6.0/lib/maruku/input/parse_doc.rb:22:in
> > `<top (required)>': iconv will be deprecated in the future, use
> > String#encode instead.
> >     Configuration from /Users/hhimanshu/code/p/python/blog/octopress/_config.yml
> >     [2012-10-02 13:49:23] INFO  WEBrick 1.3.1
> >     [2012-10-02 13:49:23] INFO  ruby 1.9.3 (2012-02-16) [x86_64-darwin11.3.0]
> >     [2012-10-02 13:49:23] INFO  WEBrick::HTTPServer#start: pid=75477 port=4000
> >     Auto-regenerating enabled: source -> public
> >     [2012-10-02 13:49:24] regeneration: 94 files changed
> >     
> >     Dear developers making use of FSSM in your projects,
> >     FSSM is essentially dead at this point. Further development will
> >     be taking place in the new shared guard/listen project. Please
> >     let us know if you need help transitioning! ^_^b
> >     - Travis Tilley
> >     
> >     >>> Compass is watching for changes. Press Ctrl-C to Stop. 
> ```

它只是保留在终端上，当我点击 localhost:4000 时，页面永远挂起

这可能是什么原因造成的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:13:40.377

可能你的 XCode 也升级了，你必须降级它。

# c# - 为asp.net c#上的正则表达式验证器构建多电子邮件正则表达式？

> ID：12698231
> 
> 赞同：0
> 
> 时间：2012-10-02T20:58:52.907
> 
> 标签：c#, asp.net, regex, expression, validation

我正在尝试在 asp.net 上制作一个表格，您可以在其中发送电子邮件。我想要一个文本框，我可以在其中输入我想发送消息的所有电子邮件地址......

但是我想在那里添加一个验证器，以便用户始终拥有正确的语法，因此，在 c# 上使用该字符串并正确发送消息。

现在，我有一个用于单个电子邮件地址的验证器......

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator5" runat="server" 
    ControlToValidate="tbxAlClEmail" ErrorMessage="E-mail Invalido" 
        Font-Bold="True" ForeColor="Red" 
        ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
        ValidationGroup="vgpNuevoCliente">
</asp:RegularExpressionValidator> 
```

所以，我们可以看到.... email = \w+([-+.']\w+) *@\w+([-.]\w+)* .\w+([-.]\w+)*

（我知道很难找到可以验证所有类型的电子邮件地址的表达式正则......但这必须这样做）

现在我想将此正则表达式添加到 asp.net 验证器：

电子邮件 ( (,|;) [空格]* 电子邮件 )*

我想要的结果示例：

john@hotmail.com、amy@yahoo.com、diana@hotmail.com；alicia@gmail.com

我希望你能帮助我...提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:32:03.713

您无法验证电子邮件地址。

使用正则表达式进行电子邮件验证非常困难，并且在验证器网络上确实有数百个示例接近......但仍然不完美。

但这只是问题的一小部分。您绝对最好的选择是放弃尝试验证地址并简单地发送消息，同时告诉用户哪些地址失败。

如果您做得对，那么您无论如何都不会在 TO 字段中包含每个地址，而是向每个单独的地址发送不同的消息。这将使报告错误变得相当容易。

当然，即使如此，许多邮件服务器也被配置为即使向其发送了错误的电子邮件地址也不响应，而是将消息黑洞化。再多的验证等也无法超越。

为了好玩，您可能想完整阅读以下内容，以便了解完整的问题： [http ://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

# java - 仅使用嵌套循环测试回文

> ID：12698235
> 
> 赞同：0
> 
> 时间：2012-10-02T20:59:40.783
> 
> 标签：java, nested-loops, palindrome

我需要编写一个程序，从用户那里获取一个字符串并测试它是否是回文。这必须通过嵌套循环来完成：我无法编写返回答案的方法。我还必须继续接受字符串输入并对其进行测试，直到用户输入一个空行，此时程序打印“再见”并终止。我遇到的问题是让程序在两个可能的输入点之后接受输入（是回文，不是），然后在循环中使用新输入，并每次打印适当的行。

输出应该是这样的：

输入字符串：转子

转子是回文。

输入一个字符串：妈咪

木乃伊不是回文。

输入一个字符串：

空行读取。再见。

这是我到目前为止所拥有的，它测试每个输入并返回正确的语句，但是当输入为空时它什么也不做：

```
System.out.print("Enter a string: ");
String input = in.next();
if (input.length() > 0) {
     int x = 0;
     int y = input.length()-1;
     while (x < y) {
          if (input.charAt(x) == input.charAt(y)) {
               x++;
               y--;
          }
          else {
               System.out.println(input + " is NOT a palindrome.");
               System.out.println("Enter a string: ");
               input = in.next();
          }
          System.out.println(input + " is a palindrome.");
          System.out.println("Enter a string: ");
          input = in.next();
     }
}
else {
     System.out.print("Empty line read - Goodbye!");
} 
```

有什么想法吗？这是作业，顺便说一句，所以我不是在寻找答案，而是寻找线索，或者我需要看的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:06:01.283

OK, Since it's your homework, I'll just give you a brief description about how you can proceed: -

*   Since you need to continously take user input, so probably you would be needing some kind of loop, that can continue until a condition is reached (You can think, what loop constrct will go here)

*   Secondly, you need to ask user when he want to quit, so you need to specify a exit condition..

*   Third, for checking for palindrome, you need to check a string with it's reverse..

*   Since you have to use nested loop, you can use `length` of the string entered, in your loop condition.. **Remember, you just need to loop till half the length**. Why, you need to find out.. then, compare first character with last, then 2nd character with 2nd last.. until characters are matching.. You need to find out when you will exit the loop..

I think this much information will get you started..

Also one more thing.. May be you are restricted with the use of any method, but it is absolutely bad idea and ugly design to do everything in `main()`.. In fact any of your method should not do more than one task.. And especially your `main()` method should ideally be just 4 - 5 lines long..

When coding a method, if you think this part is something different, move it outside to another method, and invoke it.. This is the way you should code..

# asp.net - ASP.NET 不处理文件夹请求

> ID：12698238
> 
> 赞同：3
> 
> 时间：2012-10-02T20:59:57.493
> 
> 标签：asp.net, iis, http-status-code-404, httphandler, httpmodule

我正在尝试编写一个自定义 HttpHandler 来处理我所有的 404 错误。处理程序正在捕获并处理我指定的所有文件类型，但由于某种原因它没有处理对文件夹的请求，即如果我放入 mysite.com/foo/bar.html 或 mysite.com/foo/bar。 aspx 它会处理它并显示正确的错误页面，但是如果我输入 mysite.com/foo/ 它会显示一个完全空白的页面，没有源代码或任何东西。这是处理程序的代码：

```
public class RedirectHttpModule :IHttpHandler, IHttpModule {
public RedirectHttpModule() {
    //
    // TODO: Add constructor logic here
    //
}

public void Dispose() { }
public void Init(HttpApplication context) {
    context.Error += new EventHandler(ErrorHandler);

}

private void ErrorHandler(object sender, EventArgs e) {        
    HttpApplication application = (HttpApplication)sender;
    application.Context.Response.TrySkipIisCustomErrors = true;
    Exception lastError = application.Server.GetLastError();
    HttpException ex = lastError as HttpException;
    ILog _logger = LogManager.GetLogger(typeof(Page));
    string page = "~/404.aspx";
    if (ex != null) {
        application.Server.ClearError();
        application.Context.Handler = System.Web.UI.PageParser.GetCompiledPageInstance(page, application.Server.MapPath(page), application.Context);
        string username = application.Context.User.Identity.Name;
        if (!String.IsNullOrEmpty(username)) _logger.ErrorFormat("HTTP Error {0}: {1} Username: {2}", ex.GetHttpCode().ToString(), ex.Message, username);

        else _logger.ErrorFormat("HTTP Error {0}: {1}", ex.GetHttpCode().ToString(), ex.Message);
    }
    else {
        application.Context.Handler = System.Web.UI.PageParser.GetCompiledPageInstance(page, application.Server.MapPath(page), application.Context);
    }
}

public bool IsReusable {
    get { return true; }
}

public void ProcessRequest(HttpContext context) {
    if (!File.Exists(context.Request.PhysicalPath)) {
        throw new HttpException(404, String.Format("The file or directory {0} does not exist.", context.Request.PhysicalPath));
    }
    else {
        context.Response.TransmitFile(context.Request.PhysicalPath);
    }
} 
```

}

这是 Web.config 的相关部分：

```
<handlers>
    <add name="html-to-aspx-isapi" path="*.html" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
    <add name="html-to-aspx" path="*.html" verb="*" type="System.Web.UI.PageHandlerFactory" resourceType="Unspecified" preCondition="integratedMode" />
    <add name="htm-to-aspx-isapi" path="*.htm" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
    <add name="htm-to-aspx" path="*.htm" verb="*" type="System.Web.UI.PageHandlerFactory" resourceType="Unspecified" preCondition="integratedMode" />
    <add name="asp-to-aspx-isapi" path="*.asp" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
    <add name="asp-to-aspx" path="*.asp" verb="*" type="System.Web.UI.PageHandlerFactory" resourceType="Unspecified" preCondition="integratedMode" />
    <add name="RedirectHttpModule" modules="RedirectHttpModule" preCondition="" path="*" verb="*" resourceType="Either"/>
</handlers>

<modules runAllManagedModulesForAllRequests="true">
    <add name="RedirectHttpModule" type="RedirectHttpModule" preCondition="managedHandler"/>
</modules> 
```

无论出于何种原因，即使它运行的是 Integrated 而不是 Classic，如果我删除前 6 个处理程序，它将不再使用 ASP.NET 处理 html、htm 或 asp 请求。我开始怀疑存在某种配置问题。有任何想法吗？

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:06:14.673

In IIS, set the default 404 page to point to your handler. What's happening is that IIS is handling the 404 before it ever makes it to the .net worker process.

# c# - 将数据转换为二进制以便发布

> ID：12698240
> 
> 赞同：0
> 
> 时间：2012-10-02T21:00:08.283
> 
> 标签：c#, .net, vb.net

我正在构建一个需要手动构建发布数据的应用程序。但是在这个帖子数据中，有一个图像二进制数据。所以在发布之前，发布的数据应该是这样的：

```
------------------------------8cc097679560ebc
Content-Disposition: form-data; name="mode";

test
------------------------------8cc097679560ebc
Content-Disposition: form-data; name="cropped";

false
------------------------------8cc097679560ebc
Content-Disposition: form-data; name="Image"; filename="C:\Temp\image_front1.jpg" Content-Type: application/octet-stream

…binary data… 
```

这里的一切都是使用简单`StringBuilder`的 .

我们正在处理多层应用程序。这就是我将图像转换`Base64String`为将其传递到最后一层的方式：

```
Dim image As Image = image.FromFile("samplecheck.jpg")
Dim stream As New System.IO.MemoryStream
image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg)
oDeposit.Image = Convert.ToBase64String(stream.ToArray()) 
```

我相信这很好，然后在构建帖子数据的最后一层：

```
oPostData.Append(Encoding.ASCII.GetString(Convert.FromBase64String(ImageData))) 
```

正如您所看到的，`ContentType`应该是`octet-stream`，但由于所有这些二进制转换的东西，我正在考虑 API 特定的错误，但我需要确认我向您展示的所有这些步骤是正确的。有什么建议么？

**注意：**您可能想知道我为什么要这样做，但这是他们愚蠢的 API 的错，现在我必须遵循它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:11:52.203

您的代码有几个问题：

1.  您不应该使用 a`StringBuilder`来存储二进制数据。您需要使用其中一种原始字节编写器。
2.  `Convert.FromBase64String`返回 a `byte[]`，但它不是 ASCII 数据的字节数组。因此你不应该打电话`Encoding.ASCII.GetString`

看看这个其他问题，看看如何使用正确的二进制编写器构建这个 POST 数据：[Upload files with HTTPWebrequest (multipart/form-data)](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

# iis-7 - 用于 404 和 Sitefinity 的 IIS 7 URL 重写

> ID：12698241
> 
> 赞同：0
> 
> 时间：2012-10-02T21:00:11.127
> 
> 标签：iis-7, url-rewriting, sitefinity

我们有一个新的 Sitefinity 网站正在取代我们的营销网站。上周五的切换，今天我们发现了一个问题：旧网站有内容（pdfs、jpgs）无法再访问，并且没有纳入内容迁移计划。最重要的是，管理层已将回滚作为选项删除。

因此，我想出的解决方案是使用 IIS 7 的 url 重写模块指向一个新的 url，该 url 承载旧站点，以便可以访问内容。这是我想出的 web.config 中的 xml：

```
<rewrite>
        <rules>
            <rule name="RedirectFileNotFound" stopProcessing="true">
                <match url=".*" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />                    
                    <add input="{URL}" negate="false" pattern="/\.*$" />
                </conditions>
                <action type="Redirect" url="http://www.oldsite.com{REQUEST_URI}" appendQueryString="true" />
            </rule>
        </rules>
    </rewrite> 
```

它会尝试测试 URL 是否解析为文件或文件夹，并确保我们正在请求带有扩展名的内容。如果规则通过，它将重定向到旧站点上的相同位置。理想情况下，这意味着以前链接到旧站点的任何内容都可以单独放置。

问题是，没有任何东西被重定向。

通过摆弄规则，我已经验证了该模块是可操作的，即我可以将其设置为重写所有内容，并且它可以工作。但这些规则不起作用。

我的理论是，由于 Sitefinity 使用数据库存储，它以某种方式短路了“IsFile”匹配类型。完全猜测，但在这一点上我有点不知所措。

如何以这种方式使用 urlrewriting 重定向 404？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:18:33.907

谢谢你们的帮助，但事实证明这是动态服务内容的一般问题。

假设所有请求实际上都由 Default.aspx 页处理。这不是 Sitefinity 的工作方式，但它是 DotNetNuke 的工作方式，并且很好地说明了问题。

url rewrite isfile 和 isdirectory 标志检查文件的物理存在。在这种情况下，实际上只有 Default.aspx 实际存在。所有其他动态提供的内容都是在请求周期的后期生成的，并且没有任何物理存在。

因此，isfile 标志将始终失败，并且重定向规则将始终执行。

我采用的解决方案是允许 IIS 和 .NET 自己处理 404，这适当地尊重生成的内容。并将其路由到自定义错误页面 404redirection.aspx。该页面上有重定向到我的旧站点的代码，该内容可能是托管的。然后，该站点具有额外的 404 处理，该处理路由回 404NotFound.aspx 页面，因此对任一系统中都不存在的文件的请求会进行往返，并且看起来它们从未去过任何地方。这也有一个很好的副作用，即在旧服务器上找不到的页面可以在新服务器上显示我们新的、漂亮的、重新命名的 404。

简而言之，我没有尝试先发制人的内容生成和错误处理，而是采取了更“顺其自然”的方法，然后在更合适的时间转移了流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:25:58.567

我不确定重写器是如何实现的，但这些规则似乎太笼统了。Sitefinity 使用路由引擎并注册一系列它处理的路由。根据定义，这些路由是按顺序解释的，因此如果在更具体的规则之前存在更通用的规则，则后者将不起作用。

我怀疑可能发生的情况是 Sitefinity 规则在重写器有机会重定向之前已经处理了请求。我可以建议的是要么实施更具体的重写/重定向规则，要么只使用不同的方法处理整个问题。迁移后无法访问旧文件的原因是什么？您能否提供一个无法返回文件的特定 URL，以便我们可以处理一个场景？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:22:57.160

这只是在黑暗中拍摄，但是您是否在库的 sitefinity 高级设置中启用了“文件系统回退”？也许模块正在拦截请求并且不让它继续到文件系统......

# ios - 以编程方式创建的 UICollectionView 不会滚动

> ID：12698244
> 
> 赞同：3
> 
> 时间：2012-10-02T21:00:20.503
> 
> 标签：ios, uicollectionview

我正在使用`UICollectionView`. 这很简单：A`UIView`以`UICollectionView`编程方式创建，`UICollectionViewFlowLayout`与一个部分一起使用，滚动设置为水平。它出现在屏幕上，并在正确的单元格中包含正确的数据。但它不滚动——事实上它根本不响应用户交互。

这是视图的初始化程序：

```
- (id)initWithFrame:(CGRect)frame andItemData:(NSArray *)itemData
{
    self = [super initWithFrame:frame];
    if (self) {
        _itemData = itemData;

        UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
        [flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
        [flowLayout setItemSize:CGSizeMake(kCellWidth, kCellHeight)];
        [flowLayout setMinimumInteritemSpacing:0.f];
        [flowLayout setMinimumLineSpacing:0.f];

        _collectionView = [[UICollectionView alloc] initWithFrame:[self frame] collectionViewLayout:flowLayout];
        [_collectionView setDataSource:self];
        [_collectionView setDelegate:self];
        [_collectionView setBounces:NO];
        [_collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"HorizontalPickerCell"];
        [self addSubview:_collectionView];
    }
    return self;
} 
```

我尝试以编程方式设置`UserInteractionEnabled`为`YES`，但这没有任何区别（也不应该有，因为默认`UserInteractionEnabled`设置为`YES`）。FWIW，集合视图使用标准`UICollectionViewCell`的`UILabel`s 添加到他们`contentView`的 s 作为子视图。

关于为什么这不是滚动的任何想法？非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:34:29.653

好的，事实证明这对我来说既愚蠢又易于修复。我将集合视图的框架设置为它的父视图`frame`而不是它的`bounds`. 这会导致各种自动布局问题，并导致触摸事件根本无法注册。现在都修好了。

# cocos2d-iphone - 绘制精灵的边界框

> ID：12698247
> 
> 赞同：1
> 
> 时间：2012-10-02T21:00:27.020
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d-x 中，如何显示作为该层子级的所有精灵的边界框？

这是我的出发点：

```
void MyLayer::draw()
{
    // super draw   
    CCLayer::draw();

    // Iterate through all nodes of this layer
    for ( CCNode* node = ??? )
    {
        // Make sure the node is a CCSprite
        if ( node == CCSprite ??? )
        {
            CCSprite* sprite = (CCSprite*) node;
            ccDrawRect( sprite->boundingBox() ??? );
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:15:25.220

```
 //put this line at the top of your cpp file
    #define CC_VERIFY_TYPE(__OBJECT__,__CLASS_TYPE__) assert(dynamic_cast<__CLASS_TYPE__>(__OBJECT__))

    //these lines in your code
    CCObject* child;
    CCARRAY_FOREACH(m_pChildren, child)
    {
        CC_VERIFY_TYPE(child,CCSprite*);
        CCSprite* sprite = (CCSprite*) child;
        CCSize s = sprite->boundingBox().size;
        ccDrawRect(sprite->boundingBox().origin, ccpAdd(sprite->boundingBox().origin, (ccp(s.width,s.height))));

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T21:07:17.490

当您自己创建该层中的所有精灵时，例如，您可以创建简单的节点，该节点将绘制其父级的边界框。然后只需将此节点的实例添加到您想要查看的任何节点/精灵。

另一种方法是在附加数组中添加您想要查看的所有精灵/节点，并在此数组中绘制每个对象的边界框。

# php - 使用特定类型的管理面板获取 Magento 类别

> ID：12698249
> 
> 赞同：0
> 
> 时间：2012-10-02T21:00:31.503
> 
> 标签：php, magento

我编写了下面的代码来组合一个自定义的类别菜单。一切正常，但希望类别的顺序与管理员面板中定义的顺序相同，在那里有拖放功能。

```
<?php
    $subCats = Mage::getModel('catalog/category')->load(76)->getChildren();
    $dispositosCatIds = explode(',',$subCats);
?>
<ul class="menu">
<?php $controleNum = 0; ?>
<?php foreach($dispositosCatIds as $dispositoCatId): ?>
<?php $aparelhoCat = Mage::getModel('catalog/category')->load($dispositoCatId); ?>
<?php if($aparelhoCat->getIsActive()): ?>
    <li class="<?php print $controleNum ? '' : 'submenu first'; ?>"><a class="drop" href="<?php echo $aparelhoCat->getUrl(); ?>"> <span><?php echo $aparelhoCat->getName(); ?></span></a> <!--Begin 6 column Item  -->
    <div class="dropdown_6columns">
    <div class="inner"><span class="title"><?php echo $aparelhoCat->getName(); ?></span>
    <div class="col_2">
    <div class="col_2 firstcolumn"><img src="<?php echo $aparelhoCat->getImageUrl(); ?>" alt="<?php echo $aparelhoCat->getName(); ?>" /></div>
    </div>
    <div class="col_4" style="margin-bottom: 20px;">
        <?php echo $aparelhoCat->getDescription(); ?>
    </div>
    <div class="col_2 categorias-super"><span class="title_col">Produtos para <?php echo $aparelhoCat->getName(); ?></span> 
    <?php $subSubCats = $aparelhoCat->getChildrenCategories();?>

    <?php if (count($subSubCats) > 0): ?>
        <?php //$controleNumLI = 0; ?>
        <ul style="list-style: none; float: none !important;">
        <?php foreach($subSubCats as $_subcategory): //Rodando entre as categorias de Um dispositivo ?>
            <?php if($_subcategory->getIsActive()): ?>
                <li class="level1 <?php //print $controleNumLI ? '' : 'first'; ?>"> <a href="<?php echo $_subcategory->getUrl(); ?>"><?php echo $_subcategory->getName(); ?></a></li>
                <?php //$controleNumLI += 1; ?>
            <?php endif; ?>
        <?php endforeach; ?>
        </ul>
    <?php endif; ?>
    </div>
    </div>
    </div>
    </li>
    <?php $controleNum += 1; ?>
<?php endif; ?>    
<?php endforeach; ?>
</ul> 
```

我尝试使用其他模式（[基于此处](http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Model_Category.html#sec-methods)）可以做到这一点，但我做不到。该函数返回的问题`getChildren()`是一个 ID 升序排列的字符串。

一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:17:36.553

这是我用来按管理员顺序在下拉框中显示类别的代码...关键是 setOrder('path','ASC')

```
 $categories = array();

    $_categories = Mage::getModel('catalog/category')->getCollection()
                            ->addAttributeToFilter('is_active',array('eq'=>true))
                            ->addAttributeToSelect('level')
                            ->setOrder('path','ASC')
                            ->addAttributeToSelect('name')->load();

    foreach($_categories as $cat){
        $level = $cat->getLevel() - 1;
        $pad = str_repeat("----", ($level > 0) ? $level : 0);

        $categories[] = array('value' => $cat->getEntityId(), 'label' => $pad . ' ' . $cat->getName());
    }

    print_r($categories); 
```

你可以这样做：[从数组列表创建数组树](https://stackoverflow.com/questions/4196157/create-array-tree-from-array-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:36:09.263

我得到了它：

```
$dispositovosCategoryId = 76;
$dispositovosCategoryIds = Mage::getModel('catalog/category')->getCollection()
    ->addFieldToFilter('parent_id', array('eq'=>$dispositovosCategoryId))
    ->addAttributeToFilter('is_active',array('eq'=>true))
    ->addAttributeToSelect('level')
    ->setOrder('position','ASC')
    ->addAttributeToSelect('name','url','image')
    ->load(); 
```

# php - 读取txt中行的第一个和最后一个字符

> ID：12698250
> 
> 赞同：0
> 
> 时间：2012-10-02T21:00:33.667
> 
> 标签：php

我想采用以大写开头并以点结尾的线条。

```
function isCapital($string) {
    return preg_match('/^\\s*[A-Z]/', $string) > 0;
}

foreach ($url as $file => $files) {
    $lines = file($files);
    foreach ($lines as $key => $line) {
        if (isCapital($line) && (substr($line, -1) == '.')) {
            print_r( $line);
        }
    }
} 
```

但是，它不起作用，空白结果。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:04:50.667

用下面的这个替换你`foreach($lines...`的：

```
foreach ($lines as $key => $line) {
    if (preg_match('~^\s*[A-Z].*\.\s*$~', $line)) {
        print_r($line);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:03:05.630

你的正则表达式似乎有点不对劲。 `\\s*`正在寻找文字反斜杠后跟任意数量的字母`s`。删除其中一个，`\`您应该取得进展。

# android - android中的udp连接无法接收数据包

> ID：12698256
> 
> 赞同：0
> 
> 时间：2012-10-02T21:00:59.250
> 
> 标签：android, sockets, udp

我正在尝试在服务器和 android 设备之间建立和 udp 连接。我已经编写了服务器和 android 客户端部分。当我在我的计算机 localhost 上启动服务器时，服务器和模拟器都可以很好地相互通信。但是，当我在云中启动服务器时，模拟器可以向服务器发送 udp 数据包但无法接收任何数据。

所以，我首先想到的是可能存在一些路由问题，阻止数据包到达模拟器。因此，我使用了具有 3g 连接的手机（三星 Galaxy s2，ICS）。然而，同样的事情又发生了。我的手机可以发送 udp 数据包，但它无法接收任何数据。

然后，我想也许我在云中的机器无法发送数据包。所以，我用wireshark嗅探了数据包，发现它真的发送/接收udp数据包。

我在stackoverflow中阅读了很多关于这个问题的问题，但我无法提出解决方案。也许你们帮帮我。这是我工作的服务器和客户端 udp 发送/接收部分。如果您需要更多信息，我准备提供。

提前致谢。

服务器（无需编写监听部分，因为没问题）

```
ClientIPAddress = IncomingPacket.getAddress();
ClientPort = IncomingPacket.getPort();
OutToClientSocket = new DatagramSocket();
DatagramPacket PacketToClient = new DatagramPacket(sendBuffer, sendBuffer.length,     ClientIPAddress, ClientPort);
OutToClientSocket.send(PacketToClient); 
```

客户端（只听部分）

```
ServerIP = InetAddress.getByName(MachineName);
DatagramPacket IncomingPacket = new DatagramPacket(buf, buf.length);
MySocket.receive(IncomingPacket);
buf = IncomingPacket.getData();
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:42:02.817

感谢@EJP，我已经解决了我的问题。我正在使用数据报套接字来监听数据包并使用另一个数据包来发送数据包。您必须为这两个操作使用 1 个套接字。

# mysql - 通过 CMS 管理多语言数据库中的记录

> ID：12698260
> 
> 赞同：0
> 
> 时间：2012-10-02T21:01:22.157
> 
> 标签：mysql, localization

不知道这是否是问这个问题的正确地方，但我有一个允许某人添加故事的网站。我需要支持多语言，所以在 mysql 数据库中，故事表是这样设置的：

```
en_title
sp_title
en_story
sp_story 
```

是的，我知道，但我无法更改数据库架构，所以这是我必须使用的。所以有了这样的数据库设置，我怎么能让别人用英语和西班牙语版本来管理他们的故事呢？我有一个仪表板，他们可以在其中登录并添加/编辑他们创建的任何故事，但我很难围绕一个解决方案来解决问题，该解决方案允许他们以不同的语言管理相同的故事。我是否显示他们填写的所有语言的故事列表？然后当他们点击编辑故事时，它只显示该语言版本？例如，他们登录到他们的仪表板，他们有一个英文和西班牙文的故事，我给他们看一个列表：

```
Story 1 English Version
Story 1 Spanish Version 
```

然后，如果他们单击其中一个，或者它将以他们选择的版本（英语还是西班牙语）显示带有该故事的表单？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:39:03.393

您可以显示一个类似上面的列表，用户可以选择编辑和查看故事。如果他选择编辑，页面会在项目下方打开一个表单，他可以在其中进行所需的更改并重新提交。

![ddasda 故事列表](../Images/36b921c157e49d0ae07d7902c4c32fe9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:28:44.930

这样的事情呢？您使用默认语言列出标题一次，并提供语言列表。单击标题将打开默认语言，如果单击其他语言名称之一，它将以该语言打开帖子。语言名称旁边的加号表示该帖子目前不存在，单击它将为该语言创建一个节点。

![多语言列表](../Images/f8511cab75ce11e3fccde82c413e95d7.png)

免责声明：我在一家本地化公司工作，这是我们用于 WordPress 插件的 UI

# java - 如何通过 Alfresco Javascript API 连接到 Oracle 数据库

> ID：12698265
> 
> 赞同：0
> 
> 时间：2012-10-02T21:01:31.237
> 
> 标签：java, javascript, database, oracle, alfresco

因此，我一直在与 Alfresco 合作开展我目前正在进行的项目，该项目的最新要求之一是我从我们的 Oracle 数据库中提取序列号并在 Alfresco 的空间中填充自定义属性。

```
var conObj = new ActiveXObject('ADODB.Connection');
var connectionString = "Provider=OraOLEDB.Oracle;Data Source=(DESCRIPTION=(CID=GTU_APP)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=IP ADDRESS)(PORT=XXXX)))(CONNECT_DATA=(SID=your_SID)(SERVER=DEDICATED)));User Id=username;Password=pwd;"
                                conObj.Open(connectionString);

var rs = new ActiveXObject("ADODB.Recordset");
var caseID;

sql = "INSERT INTO case(mod_dt,mod_user) values(sysdate,’user’) RETURNING id"

rs.Open(sql, conObj);

caseID = rs(0);
logger.log("The new case id is: " + caseID);

rs.close; 
```

然而，这返回说：

`Caused by: org.mozilla.javascript.EcmaError: ReferenceError: "ActiveXObject" is not defined. (workspace://SpacesStore/b3145512-e54d-4d9e-9655-0b6ae678e39b#141)`

这让我意识到 Alfresco 的 Javascript API 不具备 Javascript 的全部功能。我读过一些关于创建自己的 java 类并从 Alfresco javascript 中调用它们的内容，但我没有看到任何好的示例。有没有人有这方面的经验，或者他们可以演示一个简单的例子来创建一个从 Alfresco Javascript 中调用的 java 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:17:31.513

`ActiveXObject`是 IE 特有的东西，它在非 IE 浏览器中不可用，因此它在服务器端 JavaScript 中不可用也就不足为奇了！

据我了解，您正在编写要作为规则运行的 JavaScript，因此它将在 Alfresco 存储库层中执行。这让生活稍微轻松一些。您可能想要做的是编写一些 Java 代码来处理 Oracle 的连接和查询，使用 Oracle 的 Java API（JDBC 或类似的）。

在存储库中运行时，您的 JavaScript 已经可以访问[大量的“根”对象](http://docs.alfresco.com/4.0/index.jsp?topic=%2Fcom.alfresco.enterprise.doc%2Freferences%2FAPI-JS-rootscoped.html)，这些对象可用于对存储库执行各种操作。您要做的是将您的新 Java 类作为附加类注入，以便您的规则脚本在运行时可以使用它。

（如果您正在编写 webscript，那么您可以安排让 java 对象可用于 webscript 的 JavaScript 模型。但是，由于您正在执行规则，这不是一个选项）

为此，请让您的新类扩展[BaseScopableProcessorExtension](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/repo/jscript/BaseScopableProcessorExtension.html)。然后，当您为它定义一个 spring bean 时，设置该`extensionName`属性以控制它在 JavaScript 中出现的名称。您可以在 Alfresco 本身中查看很多示例，`ScriptSiteSevice`（bean id `siteScriptService`）是一个浮现在脑海中的示例。

如果您是 spring 和 Alfresco 的新手，我建议您将整个东西包装为一个模块 (AMP)，或者稍微作弊，然后将上下文文件放到`alfresco/extensions`您的 tomcat 共享类下的新目录中。您的文件将类似于：

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>
  <bean id="myOracleQueryBean" parent="baseJavaScriptExtension" 
        class="com.my.comany.namespace.alfresco.OracleScriptQuery">
    <!-- What it should be called in JS -->
    <property name="extensionName">
        <value>oracleQuery</value>
    </property>
    <!-- Inject any other things that your bean needs here -->
    <!-- eg some Oracle stuff from Spring -->
</bean> 
```

# django - django 的附加 POST 数据

> ID：12698268
> 
> 赞同：4
> 
> 时间：2012-10-02T21:01:47.033
> 
> 标签：django, forms, post

我正在使用 Django，在不修改 url 的情况下将变量信息传递回服务器时遇到了麻烦。这就是我想要的方式，除了我希望动作是/foo：

```
<form method="post" action="/foo/{{ variable }}">
  <input type="submit" value="bar"/>
</form> 
```

当我这样做时，我可以在解析 url 时轻松获取变量。相反，我想将变量添加到 POST QueryDict。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T21:04:10.033

是的。只需添加额外的输入字段：

```
<form method="post" action="/foo/">
  <input type="hidden" value="{{ variable }}" name="name_of_var">
  <input type="submit" value="bar"/>
</form> 
```

然后您可以通过以下方式访问视图中的变量：

```
request.POST['name_of_var'] 
```

或者如果您不确定变量是否存在。这不会引发异常是不存在的。

```
request.POST.get('name_of_var') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:06:15.523

Just make an input inside your form:

```
<input type="hidden" value="{{ variable }}" name="foo" /> 
```

Then on a view:

```
foo = request.POST.get('foo', None) 
```

Also, I recomend you to use [url tag](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url) for `action`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:05:24.217

Simply add a hidden input element with the name and value you need like so:

```
<input type="hidden" name="varname" value="myvalue" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:05:40.030

Can you not make the variable an input field in the form? You can make it hidden to avoid overriding it. This will post the data in the submit and achieve what you want.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T20:33:03.133

这不是 Django 会话框架的用途吗？您可以来回传递数据，而无需尝试通过 url 传递数据。

> 会话框架允许您基于每个站点访问者存储和检索任意数据。它将数据存储在服务器端，并抽象了 cookie 的发送和接收。

[https://docs.djangoproject.com/en/1.5/topics/http/sessions/](https://docs.djangoproject.com/en/1.5/topics/http/sessions/)

# iphone - 在不同步 iTunes 的情况下安装 Ad Hoc 应用程序进行测试

> ID：12698270
> 
> 赞同：1
> 
> 时间：2012-10-02T21:01:48.490
> 
> 标签：iphone, ios, ad-hoc-distribution

我有一个要分发给测试人员的 iPhone 应用程序。我按照以下说明操作： [https ://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html)

除了我的一位测试人员不使用 iTunes 来同步他的应用程序之外，它们都可以工作。他的手机上已经有许多应用程序，并且不想同步到 iTunes，因为听起来它会删除它们。那么......除了与 iTunes 同步之外，还有其他方法可以将测试应用程序安装到 iPhone 上吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T21:09:27.520

只需使用 OTA（“无线”分发）分发它。

*   当您使用 Xcode 归档您的应用程序时（菜单 Product -> Archive，我希望您已经这样做以保持调试符号，以便您可以在测试人员向您发送一些崩溃日志时符号化崩溃日志！），一旦您单击“分发”，选择“OTA Distribution”选项并按照步骤操作。
*   不要忘记在适当的步骤中选中“为企业分发”复选框并填写请求的信息（产品名称、IPA 的 URL，当您将其上传到服务器时等）。
*   创建您的`.ipa`和关联`.plist`的内容后，将它们都上传到 Web 服务器上，并创建指向“ `itms-services://?action=download-manifest&url=<the_url_to_your_plist_file_here>`”的链接。

当用户从他们的 iPhone 打开这个链接时，它会提示直接在他们的设备上安装应用程序，而无需将他们的设备插入任何计算机。

网上有很多关于这个的教程，简单google一下iPhone OTA分布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:24:22.833

既然您的用户害怕 iTunes 同步过程（有充分的理由），为什么不推荐他使用[iPhone Configuration Ultility](https://www.apple.com/support/iphone/enterprise/)。

该工具不会进行完全同步，而只会将您指定的应用程序传输到。

它是免费的，易于使用且非常可靠。好吧，有时它会在 Windoze 系统上出现问题，但这对于该操作系统的用户来说似乎是一种正常的体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:12:52.530

我强烈推荐[TestFlight](http://www.testflightapp.com)。它是免费的，而且很容易，他们管理所有服务器端的工作。

# java - IllegalStateException 的预期用途是什么？

> ID：12698275
> 
> 赞同：76
> 
> 时间：2012-10-02T21:02:27.493
> 
> 标签：java, exception, illegalstateexception

这是今天与同事讨论时提出的。

Java 的 Javadocs[`IllegalStateException`](http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html)声明它：

> 表示方法已在非法或不适当的时间被调用。换言之，Java 环境或 Java 应用程序未处于请求操作的适当状态。

Effective Java 说（第 60 条，第 248 页）：

> 另一个常用的异常是 IllegalStateException。如果由于接收对象的状态而调用非法，这通常是抛出的异常。例如，如果调用者在正确初始化之前尝试使用某个对象，这将是抛出的异常。

这里似乎有点不一样。javadocs 的第二句话听起来像是异常可以描述有关 Java 执行状态的非常广泛的条件，但 Effective Java 中的描述使它听起来像是用于与对象状态相关的条件方法已被调用。

我在 JDK（例如集合`Matcher`）和 Guava 中看到的用法肯定属于 Effective Java 所谈论的类别（“此对象处于无法调用此方法的状态”）。这似乎也与`IllegalStateException`'s兄弟相一致`IllegalArgumentException`。

`IllegalStateException`JDK 中是否存在与“Java 环境”或“Java 应用程序”相关的合法用途？或者是否有任何最佳实践指南提倡将其用于更广泛的执行状态？如果不是，那为什么 javadocs 会这样写呢？;)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-02T21:09:39.053

这是 JDK 中此异常的一个特别合法的用法（请参阅：[`URLConnection.setIfModifiedSince(long)`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/net/URLConnection.java#URLConnection.setIfModifiedSince(long))在它的 300 多种其他用法中：

```
public void setIfModifiedSince(long ifmodifiedsince) {
    if (connected)
        throw new IllegalStateException("Already connected");
    ifModifiedSince = ifmodifiedsince;
} 
```

我认为这个例子很清楚。如果对象处于特定状态（“*已连接*”），则不应调用某些操作。在这种情况下，当建立连接时，某些属性无法设置。

当您的类具有随时间变化的某些状态（状态机？），使某些方法变得不相关或不可能时，此异常特别有用。考虑一个`Car`有`start()`,`stop()`和`fuel()`方法的类。虽然打电话`start()`两次，一个接一个，可能没有错，但给一辆启动的汽车加油肯定是个坏主意。即 - 汽车处于错误状态。

可以说好的 API 不应该允许我们调用处于错误状态的方法，以便在编译时而不是在运行时发现类似的问题。在此特定示例中，连接到 URL 应返回带有方法子集的不同对象，所有方法在连接后均有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T21:49:33.100

这是JDK中的一个示例。有一个名为 java.lang.Shutdown 的包私有类。如果系统正在关闭并且您尝试添加新挂钩，则会引发 IllegalStateException。有人可能会争辩说这符合“javadoc”指南的标准——因为它是处于错误状态的 Java 环境。

```
class Shutdown {    
...

   /* Add a new shutdown hook.  Checks the shutdown state and the hook itself,
    * but does not do any security checks.
    */
    static void add(int slot, Runnable hook) {
        synchronized (lock) {
            if (state > RUNNING)
                throw new IllegalStateException("Shutdown in progress");

            if (hooks[slot] != null)
                throw new InternalError("Shutdown hook at slot " + slot + " already registered");

            hooks[slot] = hook;
        }
    } 
```

然而，它也说明了“javadoc”指南和“Effective Java”指南之间确实没有区别。由于 Shutdown 的实现方式，JVM 的关闭状态存储在一个名为 state 的字段中。因此，它也符合关于何时使用 IllegalStateException 的“Effective Java”指南，因为“state”字段是接收对象状态的一部分。由于接收对象 (Shutdown) 处于错误状态，因此会引发 IllegalStateException。

在我看来，关于何时使用 IllegalStateException 的两种描述是一致的。Effective Java 描述更实用一些，仅此而已。对于我们大多数人来说，整个 Java 环境中最重要的部分就是我们现在正在编写的类，所以这也是作者所关注的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:13:42.033

我想如果你看到`IllegalStateException`我会说第二个更合适的用法。很多包中都使用了这个异常

*   java.net
*   java.nio
*   java.util
*   java.util.concurrrent 等

要指定一个示例，如果队列已满，[ArrayBlockingQueue.add会抛出此异常。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html#add%28E%29)现在 full 是对象的状态，它在不适当或非法的时间被调用

我猜两者的意思相同，但措辞不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-02T07:54:55.930

给定一个库，它应该在检测到由于用户代码引起的错误时抛出一个`IllegalStateException`或，而库应该在检测到由于库自己的实现引起的错误时抛出一个。`IllegalArgumentException``AssertionError`

例如，在库的测试中，您可能希望库`IllegalStateException`在方法调用的顺序错误时抛出一个错误。但是你永远不会期望图书馆会抛出一个`AssertionError`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T00:00:41.200

这里没有“差异”。Bloch 的措辞中没有任何内容排除它在 JLS 中所说的内容。Bloch 只是说如果你有情况 A，抛出这个异常。他*并不是*说这个异常是/应该*只*在这种情况下被抛出。JLS 表示如果 A、B 或 C 抛出此异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-01T02:02:12.950

我遇到了这个：

```
try {
    MessageDigest digest = MessageDigest.getInstance("SHA-1");
    ...
} catch (NoSuchAlgorithmException e) {
    throw new AssertionError(e);
} 
```

我认为即使这属于“Java 环境”类别，我也无法将其`IllegalStateException`放在这里。`AssertionException`

# google-apps-script - Google App Script 如何使用 HTML 服务加载不同的页面？

> ID：12698281
> 
> 赞同：4
> 
> 时间：2012-10-02T21:02:51.360
> 
> 标签：google-apps-script

如何以编程方式使用 HTML 服务在 doGet 中加载不同的页面？如果不可能，为什么 GAS 编辑器允许创建不同的 HTML 页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:55:01.697

如果您根据 URL 中传递的参数加载不同的页面，您可以使用

```
function doGet(e) {
   if (e.parameter.messageID) {   // Simply test if the parm messageID exists 
```

你也可以做这样的事情

```
switch (v) {
   case "A":   var t = HtmlService.createTemplateFromFile("A");  break;
   case "B":   var t = HtmlService.createTemplateFromFile("B");  break;
}
return t.evaluate(); 
```

我的最后一个选择是您可以将条件逻辑放入模板中以获取不同的 HTML

```
 // GAS file
 var t = HtmlService.createTemplateFromFile("A");
 var v = "A";   
 t.v = v;  // pass the variable v to the template 
 return t.evaluate();

 // A.html template file
 <? if (v == "A") { ?>
    <b>a bold A</b>
 <? } else { ?>
    <b>not a A but bold anyway </b>
 <? } ?> 
```

# javascript - jQuery手风琴有点小故障可以更流畅

> ID：12698287
> 
> 赞同：-2
> 
> 时间：2012-10-02T21:03:12.697
> 
> 标签：javascript, jquery, html, css, accordion

所以我在一个工作面试项目中使用了一个 jQuery 手风琴，并且真的希望它流畅，所以我看起来不错。

[http://cpkdesign.com/uiaustin](http://cpkdesign.com/uiaustin)

它在左侧。还有一些其他的事情。当你点击一个链接时会出现一个尴尬的蓝色选择框，我也想打开小三角形图像，这样它们就不会像现在这样奇怪地放置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:22:08.983

> 真的希望它光滑，所以看起来不错

你真的需要更多地定义这个，但我想你是在谈论打开手风琴时它的内容是如何跳跃的。

这似乎是由于应用于 s 的默认边距。设置边距：0；在这些修复了问题。更好的是，使用 CSS 重置。[这个](http://meyerweb.com/eric/tools/css/reset/)被广泛使用。

> 单击链接时会出现一个尴尬的蓝色选择框

您可以在元素上使用轮廓来删除它。

```
outline: 0; 
```

有关更多帮助，请参阅[http://css-tricks.com/removing-the-dotted-outline/](http://css-tricks.com/removing-the-dotted-outline/)。

> 我想打开小三角形图像，这样它们就不会像现在这样奇怪地放置

至于箭头，您可以应用以下 css 来定位它们：

```
.arrow-down {
  position: absolute;
  left: 230px;
  margin-top: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:13:41.343

改变你的css，你可以做这样的事情：

```
#accordionarea a {
    outline: none;
}

.arrow-down {
    display: inline-block;
    margin-bottom: 2px;
    margin-left: 8px;
} 
```

也许有点奇怪我们必须为你做这个？

# objective-c - UIImageWriteToSavedPhotosAlbum for PNG 在缩略图的透明部分创建随机图像（仅限）

> ID：12698292
> 
> 赞同：0
> 
> 时间：2012-10-02T21:03:31.793
> 
> 标签：objective-c, ios, opengl-es, uiimage, png

我有一些运行良好的代码用于读取屏幕或屏幕外缓冲区并将结果作为具有透明度的 PNG 保存到 iPad 相册。在 ipad 照片查看器或任何其他图像查看器中查看时，图像会完美显示。然而，在 ipad 的原生照片查看应用程序中，**缩略图**的透明部分显示了相册中其他图像的一部分。

有没有其他人遇到过这个问题，如果有的话，找到解决办法了吗？这是我用于生成图像的屏幕外（部分）代码：

```
EAGLContext *myContext = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
[EAGLContext setCurrentContext:myContext];

[... set up render buffer code removed for display ...]

[EAGLContext setCurrentContext:myContext];

ImageTextureManager *imageManager = [[ImageTextureManager alloc] init];
[imageManager loadImageTexture:gAppModel.currentImageRef];
[imageManager release];

glBindRenderbufferOES(GL_RENDERBUFFER_OES, offscreenColorRenderbuffer);

[self renderTransformedImage]; // render the image to the buffer

[myContext presentRenderbuffer:GL_RENDERBUFFER_OES];

// grab image from frameBuffer and return it as UIImage
NSInteger x = 0, y = 0;
NSInteger dataLength = width * height * 4;
GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));

glPixelStorei(GL_PACK_ALIGNMENT, 4);
glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace,
                                kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                ref, NULL, true, kCGRenderingIntentDefault);

UIGraphicsBeginImageContext(CGSizeMake(width, height));
CGContextRef cgcontext = UIGraphicsGetCurrentContext();
CGContextSetBlendMode(cgcontext, kCGBlendModeCopy);
CGContextDrawImage(cgcontext, CGRectMake(0.0, 0.0, width, height), iref);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();  // this call creates an AutoRelease UIImage
NSData* imdata = UIImagePNGRepresentation(image); // get PNG representation
UIImage* myImagePNG = [UIImage imageWithData:imdata]; // wrap UIImage around PNG representation
UIImageWriteToSavedPhotosAlbum(myImagePNG, nil, nil, nil);
UIGraphicsEndImageContext(); 
```

感谢 medvedNick 提供的离屏渲染代码：[Drawing into OpenGL ES framebuffer and getting UIImage from it on iPhone](https://stackoverflow.com/questions/10936157/drawing-into-opengl-es-framebuffer-and-getting-uiimage-from-it-on-iphone)

# c# - 需要 Excel 目标搜索逻辑

> ID：12698293
> 
> 赞同：1
> 
> 时间：2012-10-02T21:03:34.633
> 
> 标签：c#, .net, excel

我需要知道 excel 目标是如何工作的。

我有一个方法（不是简单的 x2+y 多项式函数），这个方法是用 c# 编写的，非常复杂。（访问数据库）

假设这个函数有 10 个参数并给出一个结果。如果我给出结果并想要寻找参数之一，我需要知道 excel 目标寻找的工作原理。

我看到了类似的帖子，它解释了二分法，我看不到任何我可以指定结果并寻找参数的地方。

IE

如果我有

结果 = 函数（p1，p2，...p10）

给定：

结果，p1,p2...p9

需要寻求：p10

正如我所说，这个函数不能放在简单的多项式方程中。

在这种情况下，我确切需要 microsoft excel 2010 是如何进行目标搜索的。

# ios - iOS tableview 刷新问题

> ID：12698294
> 
> 赞同：0
> 
> 时间：2012-10-02T21:03:55.337
> 
> 标签：ios, xml, crash, reachability, sigabrt

我的应用程序使用由动态 xml 提要填充的表。我还使用由 Grant Paul 编写的 pull to refresh 代码来重新加载新内容的表格（如果有的话）。第三，我在重新加载表格时使用 Apple 的可达性来确定互联网连接。我的问题是这个；如果我通过互联网连接打开应用程序，然后在应用程序运行时关闭我的互联网连接，然后我拉动以刷新应用程序并崩溃。当应用程序在 Reachable 和 NotReachable 之间切换时发生了一些事情。下面是我的代码。应用程序失败，线程 6：信号 SIGABRT 在此行：TFHppleElement *element = [elements objectAtIndex:0];

这是错误代码：

```
2012-10-02 14:00:03.715 FireCom[2229:1517] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x2d63012 0x21a0e7e 0x2d050b4 0x603f 0xd810d5 0xd81034 0x96213557 0x961fdcee)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

这是可达性代码：

```
- (void)loadCallList
{
Reachability* reach = [Reachability reachabilityWithHostname:@"www.apple.com"];
NetworkStatus netStatus = [reach currentReachabilityStatus];

switch (netStatus)
{
    case NotReachable:
    {
        NSLog(@"Access Not Available");

        [pull finishedLoading];
        [self displayInternetMessage];

        break;
    }

    case ReachableViaWWAN:
    {
        NSLog(@"Reachable WWAN");

        // Parse HTML for random ID and create XML link

        NSURL *theURL = [NSURL URLWithString:@"http://www.wccca.com/PITS/"];
        NSData *data = [[NSData alloc] initWithContentsOfURL:theURL];
        xpathParser = [[TFHpple alloc] initWithHTMLData:data];
        NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];
        TFHppleElement *element = [elements objectAtIndex:0];
        TFHppleElement *child = [element.children objectAtIndex:0];
        NSString *idValue = [child content];

        NSString *idwithxml = [idValue stringByAppendingFormat:@".xml"];
        NSString *url = @"http://www.wccca.com/PITS/xml/fire_data_";
        NSString *finalurl = [url stringByAppendingString:idwithxml];

        xmlParser = [[XMLParser alloc] loadXMLByURL:finalurl];

        if (xmlParser.calls.count == 0)
        {
            self.headerHeight = 0.0;
            UIAlertView *noCalls = [[UIAlertView alloc] initWithTitle:@"No Current Calls"
                                                              message:@"There are no current 9-1-1 calls in Clackamas or Washington County."
                                                             delegate:self
                                                    cancelButtonTitle:@"OK"
                                                    otherButtonTitles:nil];

            [noCalls show];
            [noCalls release];
        }
        else
        {
            self.headerHeight = 45.0;
        }

        [callsTableView reloadData];
        [pull finishedLoading];

        break;
    }
    case ReachableViaWiFi:
    {
        NSLog(@"Reachable WiFi");

        // Parse HTML for random ID and create XML link

        NSURL *theURL = [NSURL URLWithString:@"http://www.wccca.com/PITS/"];
        NSData *data = [[NSData alloc] initWithContentsOfURL:theURL];
        xpathParser = [[TFHpple alloc] initWithHTMLData:data];
        NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];
        TFHppleElement *element = [elements objectAtIndex:0];
        TFHppleElement *child = [element.children objectAtIndex:0];
        NSString *idValue = [child content];

        NSString *idwithxml = [idValue stringByAppendingFormat:@".xml"];
        NSString *url = @"http://www.wccca.com/PITS/xml/fire_data_";
        NSString *finalurl = [url stringByAppendingString:idwithxml];

        xmlParser = [[XMLParser alloc] loadXMLByURL:finalurl];

        if (xmlParser.calls.count == 0)
        {
            self.headerHeight = 0.0;

            UIAlertView *noCalls = [[UIAlertView alloc] initWithTitle:@"No Current Calls"
                                                              message:@"There are no current 9-1-1 calls in Clackamas or Washington County."
                                                             delegate:self
                                                    cancelButtonTitle:@"OK"
                                                    otherButtonTitles:nil];

            [noCalls show];
            [noCalls release];
        }
        else
        {
            self.headerHeight = 45.0;
        }

        [callsTableView reloadData];
        [pull finishedLoading];

        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:07:53.430

我想我看到了你的问题。

```
NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];
TFHppleElement *element = [elements objectAtIndex:0];
TFHppleElement *child = [element.children objectAtIndex:0]; 
```

您不能假设`elements`计数至少为 1。

* * *

**更新**

也许尝试类似的东西

```
NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];
if (elements.count < 1) {
    // Any needed cleanup
    break;
}

TFHppleElement *element = [elements objectAtIndex:0];
TFHppleElement *child = [element.children objectAtIndex:0]; 
```

作为一个快速的出路。

# java - Android HelloWorld App 适用于 2.3.3 但不适用于 4.1

> ID：12698306
> 
> 赞同：0
> 
> 时间：2012-10-02T21:04:36.103
> 
> 标签：java, android, mobile

我使用 Eclipse 创建了一个 Android 项目。它由一个简单地打印 hello world 的活动组成。

我创建了两个 AVD 来测试它，一个使用 api 版本 2.3.3，另一个使用 4.1。如果我在 2.3.3 上运行它，该应用程序可以工作。然而，在 4.1 上，它没有。这是我尝试在 4.1 上运行控制台时的日志：

```
[2012-10-03 01:54:07 - firstApp] Android Launch!
[2012-10-03 01:54:07 - firstApp] adb is running normally.
[2012-10-03 01:54:07 - firstApp] Performing com.example.firstapp.MainActivity activity launch
[2012-10-03 01:54:13 - firstApp] Launching a new emulator with Virtual Device 'NewAPI'
[2012-10-03 01:54:51 - Emulator] Failed to create Context 0x3005
[2012-10-03 01:54:51 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-10-03 01:54:53 - Emulator] emulator: emulator window was out of view and was recentered
[2012-10-03 01:54:53 - Emulator] 
[2012-10-03 01:54:53 - firstApp] New emulator found: emulator-5554
[2012-10-03 01:54:53 - firstApp] Waiting for HOME ('android.process.acore') to be launched...
[2012-10-03 01:58:16 - firstApp] HOME is up on device 'emulator-5554'
[2012-10-03 01:58:16 - firstApp] Uploading firstApp.apk onto device 'emulator-5554'
[2012-10-03 01:58:17 - firstApp] Installing firstApp.apk...
[2012-10-03 02:00:26 - firstApp] Failed to install firstApp.apk on device 'emulator-5554!
[2012-10-03 02:00:26 - firstApp] (null) 
```

有什么想法有什么问题吗？

# ruby-on-rails - 使用 ruby injection 将表中的值与 activemodel 更新的属性进行比较

> ID：12698317
> 
> 赞同：0
> 
> 时间：2012-10-02T21:05:45.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, activemodel

我正在 Rails 3.1 中构建自定义配置文件完整性工具。使用 active_admin，管理员希望能够选择模型属性并为其分配分值。我创建了一个包含“名称”和“分数”的表。name 是要应用分数的列名。

当模型更新时，我需要比较评分表中名称列的值。伪代码：

```
ProfileScore.find(:all, :select => "name,score").inject { |p,score|
  #this is where im stuck, 'self' == updated model hash
  p[:name] == self.attribute.updated
  score += p[:score]
} 
```

当然也欢迎其他方法！我查看了完整性，但它已经过时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:28:35.767

```
score = ProfileScore.select("name, score").inject(0) { |memo, pscore|
  # the result is a list of ProfileScore objects, not of pairs.

  # if p[:name] == self.attribute.updated # don't you want to take into account
  # also old, but present, attributes??
  if self.attributes[p[:name]].present?
    memo += p[:score]
  end
  memo
} 
```

或者也

```
present_attributes = self.attributes.reject { |k,v| v.blank? }.keys
score = ProfileScore.where(:name => present_attributes).sum("score") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:00:49.230

要获得总分，您可以使用：

```
total_score = ProfileScore.where(:name => self.attribute.updated).sum(:score) 
```

# scala - How do I convert a String to a different encoding in Scala?

> ID：12698321
> 
> 赞同：1
> 
> 时间：2012-10-02T21:05:59.440
> 
> 标签：scala, utf-8

> **Possible Duplicate:**
> [How to Force a jar to uses(or the jvm runs in) utf-8 instead of the system's default encoding](https://stackoverflow.com/questions/4159551/how-to-force-a-jar-to-usesor-the-jvm-runs-in-utf-8-instead-of-the-systems-def)

I have a bunch of Strings that I want to read in as UTF-8\. Is there a way to force this encoding in Scala, without passing a command-line parameter?

For example, I want to do something like `val utf8EncodedString = new String(myString, "UTF-8")`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T21:13:01.310

字符串在 Scala/Java 中没有编码。在内部，它们总是保存为 UTF-16，但是当你使用它们时这并不重要。编码和解码发生在 IO 类中。您应该查看[`scala.io.Source`](http://www.scala-lang.org/api/current/index.html#scala.io.Source$)对象的文档，其中包含用于创建`Source`s 的工厂方法，这些方法将编码作为参数。

# asp.net - 在哪里实例化日志记录类以记录一次请求的所有日志？

> ID：12698329
> 
> 赞同：1
> 
> 时间：2012-10-02T21:06:26.243
> 
> 标签：asp.net, logging, event-handling

有一个**日志记录类**将用户**活动**记录到数据库中。

因为我不想在所有方法中编写日志记录代码（如果我没记错的话违反了**SRP 原则），我决定定义****事件**并在方法中引发它们。

然后添加一个包含**事件处理方法**的类来**订阅**事件并使用日志记录类将必要的数据记录到数据库中。

另一点是在请求期间可能会引发**多个**事件，我想将**它们全部捕获并在一个****事务**中将日志添加到数据库中。

现在我想知道我应该**在哪里**以及**如何****实例化**这个处理类来实现这个目标？

我正在使用`Asp.net WebForms`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:16:22.350

在您的方法中添加日志语句不会违反 SRP。

除非您有非常特殊的需要，否则您不应该重新发明轮子。使用[Log4Net](http://logging.apache.org/log4net/)或其他一些日志框架。

# javascript - bootstrap.js 手风琴折叠/展开

> ID：12698331
> 
> 赞同：37
> 
> 时间：2012-10-02T21:06:34.060
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试在每个手风琴体上创建上一个/下一个按钮。

我想不出折叠/展开某个部分的方法。我尝试从课程中删除课程`in`，`accordion-body`但这似乎并没有崩溃。

```
 $(".accordion-body").each(function(){
            if($(this).hasClass("in")) {
                $(this).removeClass("in");
            }
        }); 
```

同样，无论何时或无论我使用该`.collapse`方法，我都会收到一个 javascript 错误，指出该对象没有方法崩溃。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-02T21:36:34.870

该类`in`只是一个部分打开的指示器。Javascript 模块应用了相同的内联样式`.in`，因此删除类是不够的。

您需要使用模块的 API 通过以下`.collapse()`方法以编程方式与手风琴交互：

```
$('.accordion-body').each(function(){
    if ($(this).hasClass('in')) {
        $(this).collapse('toggle');
    }
}); 
```

或者，您可以将其浓缩为：

```
$('.accordion-body.in').collapse('toggle'); 
```

如果您只想折叠任何打开的部分：

```
$('.accordion-body').collapse('hide'); 
```

如果您只想扩展任何封闭部分：

```
$('.accordion-body').collapse('show'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-24T07:46:36.987

这是另一个解决方案：

```
/**
 * Make an accordion active
 * @param {String} id ID of the accordion
 */
var activateAccordion = function (id) {
    // Get the parents
    var parents = $('a[href="#' + id + '"]').parents('.panel-group').children('.panel');

    // Go through each of the parents
    $.each(parents, function (idx, obj) {
        // Check if the child exists
        var find = $(obj).find('a[href="#' + id + '"]'),
            children = $(obj).children('.panel-collapse');

        if (find.length > 0) {
            // Show the selected child
            children.removeClass('collapse');
            children.addClass('in');
        } else {
            // Hide the others
            children.removeClass('in');
            children.addClass('collapse');
        }
    });
}; 
```

代码的重要部分是组合，记住**.collapse**类，而不仅仅是使用**.in**：

```
// Show the selected child
children.removeClass('collapse');
children.addClass('in'); 
```

和

```
// Hide the others
children.removeClass('in');
children.addClass('collapse'); 
```

上面的例子已经在 Twitter 的 Bootstrap v3.3.4 中测试过了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T06:05:25.417

这适用于 Bootstrap 3 中的手风琴：

```
var selector = $('.panel-heading a[data-toggle="collapse"]');
selector.on('click',function() {
  var self = this;
  if ($(this).hasClass('collapsed')) {
    $.each(selector, function(key, value) {
      if (!$(value).hasClass('collapsed') && value != self) {
        $(value).trigger('click');
      }
    });
  }
}); 
```

我正在模拟单击其他手风琴选项卡的`$(value).trigger('click');`. 根据[API](https://getbootstrap.com/javascript/#collapse-methods)，您应该只能使用该`.collapse()`方法，即`$(value).collapse('hide');`. 但由于某种原因它不起作用，所以`trigger`它是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T14:46:17.653

对于此类问题，请使用 addClass("in"); 只是因为使用了“.collapse('toggle/Hide/Show');” 会干扰未来的切换功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-11T17:48:40.867

另一个相关的用例是当我们在手风琴内有表单并且我们想要使用验证错误扩展手风琴时。扩展 Daniel Wright [https://stackoverflow.com/a/12698720/6504104](https://stackoverflow.com/a/12698720/6504104)的答案，我们可以做类似的事情

```
/**
 * Expands accordions that have fields with errors
 *
 */
var _expandAccordions = function () {
    $form           = $('.my-input-form');
    // you can adjust the following lines to match your form structure / error classes
    var $formGroups = $form.find('.form-group.has-error');  
    var $accordions = $formGroups.closest('.accordion-body');

    $accordions.each(function () {
        $(this).collapse('show');
    });
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-24T17:37:31.417

我做到了，

```
$('.mb-0').click(function(){
  $('.collapse').collapse('hide');
  $('.collapse.in').collapse('show');
}); 
```

这对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-20T10:31:40.847

使用 Bootstrap 4 在卡体内添加以下按钮

```
<input type="button" class="btn btn-secondary btn-block btn-sm mt-3 text-center card-proceed-next" value="Proceed" />
<input type="button" class="btn btn-secondary btn-block btn-sm mt-3 text-center card-proceed-prev" value="Previous" /> 
```

添加以下 javascript（包括带有验证错误的 Azhar Khattak 显示面板）：

```
$(function () {
    $('.card-proceed-next').click(function (e) {
        e.preventDefault();
        $(e.target).closest('.collapse').collapse('hide'); // hide current accordion panel
        $(e.target).closest('.card').next('.card').find('.collapse').addClass('show'); // show next accordion panel
    });

    $('.card-proceed-prev').click(function (e) {
        e.preventDefault();
        $(e.target).closest('.collapse').collapse('hide'); // hide current accordion panel
        $(e.target).closest('.card').prev('.card').find('.collapse').addClass('show'); // show previous accordion panel
    });

    var $elErrors = $('#accordion').find('.field-validation-error'); // elements with error class
    var $accordionsWithErrors = $elErrors.closest('.collapse'); // accordions with error elements 
    if ($accordionsWithErrors.length > 0) $('.collapse').collapse(); // collapse all accordion panels due to the first accordion panel shown as default
    $accordionsWithErrors.each(function () {
        $(this).addClass('show'); // show accordion panels with error messages
    });
}); 
```

# objective-c - 每个 NSUserNotification 的自定义图标？

> ID：12698332
> 
> 赞同：6
> 
> 时间：2012-10-02T21:06:50.923
> 
> 标签：objective-c, cocoa, notifications, nsusernotification

有没有办法为每个提供**自定义**图标`NSUserNotification`，而不是默认的应用程序徽标？就像. `iconData`_`Growl`

我想用这个“某人”的照片显示“某人刚刚发布了一些东西”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-25T22:16:25.913

您仍然无法更改显示应用程序图标的（默认）图像，但从 OS X Mavericks 开始，您还可以使用新属性显示附加图像`contentImage`，例如：

![NSUserNotification 中的自定义图像](../Images/5b92ff1305ce53dc7e0988ea52378cb4.png)

这个新属性没有记录在类参考中，但在[OS X 10.9](https://developer.apple.com/library/mac/releasenotes/Foundation/RN-Foundation/index.html#//apple_ref/doc/uid/TP30000742)`NSUserNotification`的 Foundation Release Notes 中提到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:08:11.557

目前没有（山狮）。您应该发布[功能请求](https://bugreport.apple.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-24T13:48:04.953

我知道这个问题已经死了 5 年了，但是如果有人发现这个问题并且仍在寻找解决方案，那就是：

[https://github.com/indragiek/NSUserNotificationPrivate](https://github.com/indragiek/NSUserNotificationPrivate)

我已经在 macOS Sierra 中对其进行了测试，它仍然有效。请注意，引用项目创建者的话：

> **这是不言而喻的，但是使用任何这些都会导致** **您的应用程序被 MAS**（Mac Apple Store）拒绝，并且如果**API 发生更改****，可能会中断** 。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T23:43:25.657

寻找有关 NSUserNotifications 的相关答案，我找到了您的问题。官方还不支持。但是我写了一个小自定义控件，你可以使用它来满足你的需要。看看[这个 Github 存储库](https://github.com/phranck/CNUserNotification)。**

# html - HTML & CSS: ">" 大于未应用的选择器样式

> ID：12698333
> 
> 赞同：0
> 
> 时间：2012-10-02T21:06:51.157
> 
> 标签：html, css, css-selectors

我面临一个非常奇怪的问题。根据我对 CSS ">" 的理解，选择器基本上只将样式应用于直接子代。但我根本无法将样式应用于元素。奇怪的是，在检查元素时，我可以看到 firebug 中的其他 CSS 部分，但我看不到应用的“>”样式。

我拥有的 HTML 是：

```
<div id="navigation">
    <ul>
       <li><a href="#">First</a></li>
       <li><a href="#">Second</a></li>
       <li><a href="#">Third</a></li>
       <li><a href="#">Fourth</a></li>
    </ul>
</div> 
```

CSS部分是这样的：

```
/* Navigation */
#navigation {
    min-height:45px;
}

#navigation ul {
    list-style-type: none;
    margin: 0px 45px 0px 0px;
    font-weight: bold;
    border-left-width: 1px;
    border-left-style: solid;
    border-left-color: #F3F3F3;
}

#navigation ul li {
    margin: 0px;
    float: left;
    position: relative;
}

#navigation > ul > li {
    line-height: 26px;
    display: block;
}

#navigation > ul > li > a {
    border-right: 1px solid #F3F3F3;
    color: #333;
    display: block;
    font-family: 'Trebuchet MS';
    font-size: 15px;
    padding: 10px 18px 13px;
    position: relative;
    text-decoration: none;
    z-index: 1000;
}

#navigation > ul > li.current_page_item > a, 
#navigation > ul > li.current_page_parent > a, 
#navigation > ul > li.current_page_ancestor > a {
    border-top: 3px solid #72AC4B;
    color: #72AC4B;
    font-family: 'Trebuchet MS';
    margin-top: -3px;
} 
```

所有其他样式都照常应用，但使用“>”选择器的样式块根本无法识别。所以假设如果我检查`li`元素，我可以看到应用了以下样式：

```
#navigation ul li {
    margin: 0px;
    float: left;
    position: relative;
} 
```

但我看不到应用了以下样式：

```
#navigation > ul > li {
    line-height: 26px;
    display: block;
} 
```

即使它是 ul 的直接子代。有没有人遇到过这个问题？可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:25:16.607

嘿，我已将“显示：块”替换为“显示：无”，并且该样式确实适用于 Firefox。问题是关于行高，你想实现什么作为最终设计？尝试更改您想要更少空间的填充或边距。

如果这不是问题，您可以给我们一个您正在寻求的最终结果的例子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:41:45.757

假设您提供的 HTML 示例是您尝试将这些样式应用到的完整代码段，我看不出如何发生任何冲突以保证使用直接后代选择器 (>)。

只需使用子选择器即可。

```
/* Navigation */  
#navigation {
    min-height:45px;
}

#navigation ul {
    list-style-type: none;
    margin: 0px 45px 0px 0px;
    font-weight: bold;
    border-left-width: 1px;
    border-left-style: solid;
    border-left-color: #F3F3F3;
}

#navigation ul li {
    margin: 0px;
    float: left;
    position: relative;
    line-height: 26px;
    display: block;
}

#navigation ul li a {
    border-right: 1px solid #F3F3F3;
    color: #333;
    display: block;
    font-family: 'Trebuchet MS';
    font-size: 15px;
    padding: 10px 18px 13px;
    position: relative;
    text-decoration: none;
    z-index: 1000;
}

#navigation ul li.current_page_item a, 
#navigation ul li.current_page_parent a, 
#navigation ul li.current_page_ancestor a {
    border-top: 3px solid #72AC4B;
    color: #72AC4B;
    font-family: 'Trebuchet MS';
    margin-top: -3px;
} 
```

# android - 切换光标时如何在光标适配器中保持复选框选择？

> ID：12698334
> 
> 赞同：-1
> 
> 时间：2012-10-02T21:06:55.603
> 
> 标签：android, android-listview, android-cursoradapter

我有一个 ListView，我正在使用来自媒体存储的信息进行填充。我在每一行都有复选框，以允许用户选择多行。在选项菜单中，有一些菜单项会触发对媒体存储的新查询，并使用 CursorLoader 在光标加载时交换适配器中的光标。

在我的适配器中，我使用了一个 ArrayList 来跟踪检查的项目，以及一个跟踪列表中所有项目的 ArrayList。当光标更改以允许 getView() 方法检查正确的复选框时，需要重新排序/重建跟踪所有项目的列表。**我一直无法找到一种方法来更新我的列表，使其与光标中项目的顺序相对应。**

我尝试过覆盖 swapCursor、changeCursor 和 notifyDataSetChanged。在每次尝试调用超级方法之前和之后，我都会像在适配器的构造函数中那样使用列表。

我在这里查看了这些似乎相关的问题，但我无法创建解决方案： [Listview 适配器的问题](https://stackoverflow.com/questions/9536848/problems-with-listview-adapter)

[自定义 CursorAdapter 和 CheckBox 状态](https://stackoverflow.com/questions/10785862/custom-cursoradapter-and-checkbox-states)

[光标未使用自定义适配器正确绑定文本](https://stackoverflow.com/questions/8902141/cursor-not-binding-text-correctly-with-custom-adapter)

这是我的活动代码：

```
/**
 * This activity displays a list of the available media on the device. It allows
 * selecting several items from the list and by selecting the "done" icon in the
 * options menu, the activity will return the results to the calling activity.
 * 
 * The list can be sorted via the options menu. The available sorting columns
 * are artist, title and album. By default the list is sorted by artist name.
 * 
 * The selection from the database consists of the _ID, ARTIST, ALBUM, TITLE,
 * DATA, DISPLAY_NAME and DURATION columns and is also limited to contain only
 * files that are markes as IS_MUSIC.
 * 
 * @author Daniel Kvist
 * 
 */
public class MediaSelectorActivity extends Activity implements LoaderCallbacks<Cursor>
{
    private static final int LOADER_ID_ARTIST = 2;
    private static final int LOADER_ID_ALBUM = 4;
    private static final int LOADER_ID_TITLE = 8;

    public static final String EXTRA_SELECTED_ITEMS = "selected_media";
    public static final int REQUEST_MEDIA = 0;

    private MediaSelectorAdapter adapter;
    private ListView listView;
    private LoaderManager loaderManager;

    private String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    private String[] projection = { MediaStore.Audio.Media._ID, MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM,
            MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DISPLAY_NAME, MediaStore.Audio.Media.DURATION };
    private ArrayList<Track> selectedItems;

    /**
     * The onCreate method loads the xml layout which contains the listview. It
     * also gets the loader manager and initiates a first load of available
     * media and sorts it by artist name.
     */
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_media_selector);
        loaderManager = getLoaderManager();
        loaderManager.initLoader(LOADER_ID_ARTIST, null, this);
        listView = (ListView) findViewById(R.id.list);
        selectedItems = new ArrayList<Track>();
    }

    /**
     * This method simply inflates the xml file which contains the menu options.
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.media_selector_menu, menu);
        return true;
    }

    /**
     * This is called when an option item has been selected. Depending on the
     * user selection either the selected tracks are passed back to the calling
     * activity or a new query is made to the media store to sort on either
     * artist, album or title.
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        selectedItems = adapter.getSelectedItems();
        switch (item.getItemId())
        {
            case R.id.done:
                Intent intent = new Intent();
                intent.putParcelableArrayListExtra(EXTRA_SELECTED_ITEMS, selectedItems);
                setResult(RESULT_OK, intent);
                finish();
                return true;
            case R.id.artist:
                loaderManager.initLoader(LOADER_ID_ARTIST, null, this);
                return true;
            case R.id.album:
                loaderManager.initLoader(LOADER_ID_ALBUM, null, this);
                return true;
            case R.id.track:
                loaderManager.initLoader(LOADER_ID_TITLE, null, this);
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    /**
     * Called when the cursor loader is first created. It decides which URI to
     * query and which sorting order should be returned. The query also contains
     * information about which columns we are interested in which selection we
     * want.
     */
    public Loader<Cursor> onCreateLoader(int i, Bundle bundle)
    {
        CursorLoader cursorLoader = null;
        switch (i)
        {
            case LOADER_ID_ARTIST:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.ARTIST);
                break;
            case LOADER_ID_ALBUM:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.ALBUM);
                break;
            case LOADER_ID_TITLE:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.TITLE);
                break;
        }
        return cursorLoader;
    }

    /**
     * When the load has finished we create a new adapter of the cursor we
     * receive from the media store content provider. The adapter is then set to
     * the listvew. The adapter uses ARIST, ALBUM and TITLE to be displayed to the
     * user.
     */
    public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor)
    {
        if(adapter == null) 
        {
            adapter = new MediaSelectorAdapter(getApplicationContext(), R.layout.activity_media_selector, cursor, new String[] {
                MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM, MediaStore.Audio.Media.TITLE }, new int[] { R.id.text_1,
                R.id.text_2, R.id.text_3 }, Adapter.NO_SELECTION, selectedItems);
            listView.setAdapter(adapter);
        }
        else
        {
            adapter.swapCursor(cursor);
        }
    }

    /**
     * WHen the loader is reset we just pass in null as the cursor to the
     * adapter.
     */
    public void onLoaderReset(Loader<Cursor> cursorLoader)
    {
        adapter.swapCursor(null);
    }
} 
```

这是我的适配器代码：

```
/**
 * This adapter is used by the media selector activity to display the list rows.
 * It is needed to keep track of which checkboxes have been checked and which
 * has not. The system is aggressive in trying to re-use views that are not
 * currently being displayed which leads to strange behaviour with the
 * checkboxes where they keep their "checked" state although they have not been
 * checked for a specific item.
 * 
 * The class is extending SimpleCursorAdapter for easy use of the cursor that
 * can be obtained from a database or content resolver.
 * 
 * @author Daniel Kvist
 * 
 */
public class MediaSelectorAdapter extends SimpleCursorAdapter
{
    private Context context;
    private ArrayList<Track> listItems;
    private ArrayList<Track> selectedItems;

    /**
     * The constructor takes the same parameters as an ordinary simple cursor
     * adapter and passes them up to the super class. It then loops through the
     * cursor and initiates an array which contains references to all the list
     * rows and if they have been checked or not.
     * 
     * @param context
     *            the context which to be displayed in
     * @param layout
     *            the layout file for the list view
     * @param cursor
     *            the cursor that points to the data
     * @param from
     *            the fields that are to be displayed
     * @param to
     *            the views to display the fields in
     * @param flags
     *            any special flags that can be used to determine the behaviour
     *            of the super class adapter
     * @param selectedItems2 
     */
    public MediaSelectorAdapter(Context context, int layout, Cursor cursor, String[] from, int[] to, int flags, ArrayList<Track> selectedItems)
    {
        super(context, layout, cursor, from, to, flags);
        this.context = context;
        this.selectedItems = selectedItems;
        listItems = new ArrayList<Track>();

        while (cursor.moveToNext())
        {
            Track track = new Track(cursor.getString(0), cursor.getString(1), cursor.getString(2), cursor.getString(3),
                    cursor.getString(4), cursor.getString(5), cursor.getString(6));
            listItems.add(track);
        }
    }

    /**
     * Overridden method that getView uses to keep track of how many items the
     * adapter has.
     */
    @Override
    public int getCount()
    {
        return listItems.size();
    }

    /**
     * Called by the system to get a specific item.
     */
    @Override
    public Track getItem(int position)
    {
        return listItems.get(position);
    }

    /**
     * Called by the system to get the id/position for an item.
     */
    @Override
    public long getItemId(int position)
    {
        return position;
    }

    /**
     * Reuses old views if they have not already been reset and inflates new
     * views for the rows in the list that needs a new one. It the adds a
     * listener to each checkbox that is used to store information about which
     * checkboxes have been checked or not. Finally we set the checked status of
     * the checkbox and let the super class do it's thing.
     */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.media_selector_item_layout, null);
        }
        final CheckBox checkBox = (CheckBox) convertView.findViewById(R.id.checkbox);
        checkBox.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                CheckBox cb = (CheckBox) v.findViewById(R.id.checkbox);
                if (cb.isChecked())
                {
                    selectedItems.add(listItems.get(position));
                }
                else if (!cb.isChecked())
                {
                    selectedItems.remove(listItems.get(position));
                }
            }
        });
        // If the selected items contains the current item, set the checkbox to be checked
        checkBox.setChecked(selectedItems.contains(listItems.get(position)));

        return super.getView(position, convertView, parent);
    }

    /**
     * Returns an array list with all the selected items as Track objects.
     * 
     * @return the selected items
     */
    public ArrayList<Track> getSelectedItems()
    {
        return selectedItems;
    }
} 
```

非常感谢任何提示、提示或其他输入。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:15:27.987

好的，这就是我最终的结果。随意使用它。解决方案是根本不使用列表，而是将光标与 getCursor() 一起使用，这就是我们首先使用光标适配器的原因。

活动：

```
/**
 * This activity displays a list of the available media on the device. It allows
 * selecting several items from the list and by selecting the "done" icon in the
 * options menu, the activity will return the results to the calling activity.
 * 
 * The list can be sorted via the options menu. The available sorting columns
 * are artist, title and album. By default the list is sorted by artist name.
 * 
 * The selection from the database consists of the _ID, ARTIST, ALBUM, TITLE,
 * DATA, DISPLAY_NAME and DURATION columns and is also limited to contain only
 * files that are markes as IS_MUSIC.
 * 
 * @author Daniel Kvist
 * 
 */
public class MediaSelectorActivity extends Activity implements LoaderCallbacks<Cursor>
{
    private static final int LOADER_ID_ARTIST = 2;
    private static final int LOADER_ID_ALBUM = 4;
    private static final int LOADER_ID_TITLE = 8;

    public static final String EXTRA_SELECTED_ITEMS = "selected_media";
    public static final int REQUEST_MEDIA = 0;

    private MediaSelectorAdapter adapter;
    private ListView listView;
    private LoaderManager loaderManager;

    private String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
    private String[] projection = { MediaStore.Audio.Media._ID, MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM,
            MediaStore.Audio.Media.TITLE, MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DISPLAY_NAME, MediaStore.Audio.Media.DURATION };
    private ArrayList<Track> selectedItems;

    /**
     * The onCreate method loads the xml layout which contains the listview. It
     * also gets the loader manager and initiates a first load of available
     * media and sorts it by artist name.
     */
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_media_selector);
        loaderManager = getLoaderManager();
        loaderManager.initLoader(LOADER_ID_ARTIST, null, this);
        listView = (ListView) findViewById(R.id.list);
        selectedItems = new ArrayList<Track>();
    }

    /**
     * This method simply inflates the xml file which contains the menu options.
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.media_selector_menu, menu);
        return true;
    }

    /**
     * This is called when an option item has been selected. Depending on the
     * user selection either the selected tracks are passed back to the calling
     * activity or a new query is made to the media store to sort on either
     * artist, album or title.
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        selectedItems = adapter.getSelectedItems();
        switch (item.getItemId())
        {
            case R.id.done:
                Intent intent = new Intent();
                intent.putParcelableArrayListExtra(EXTRA_SELECTED_ITEMS, selectedItems);
                setResult(RESULT_OK, intent);
                finish();
                return true;
            case R.id.artist:
                loaderManager.initLoader(LOADER_ID_ARTIST, null, this);
                return true;
            case R.id.album:
                loaderManager.initLoader(LOADER_ID_ALBUM, null, this);
                return true;
            case R.id.track:
                loaderManager.initLoader(LOADER_ID_TITLE, null, this);
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    /**
     * Called when the cursor loader is first created. It decides which URI to
     * query and which sorting order should be returned. The query also contains
     * information about which columns we are interested in which selection we
     * want.
     */
    public Loader<Cursor> onCreateLoader(int i, Bundle bundle)
    {
        CursorLoader cursorLoader = null;
        switch (i)
        {
            case LOADER_ID_ARTIST:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.ARTIST);
                break;
            case LOADER_ID_ALBUM:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.ALBUM);
                break;
            case LOADER_ID_TITLE:
                cursorLoader = new CursorLoader(this, MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection, null,
                        MediaStore.Audio.Media.TITLE);
                break;
        }
        return cursorLoader;
    }

    /**
     * When the load has finished we create a new adapter of the cursor we
     * receive from the media store content provider. The adapter is then set to
     * the listvew. The adapter uses ARIST, ALBUM and TITLE to be displayed to the
     * user.
     */
    public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor)
    {
        if(adapter == null) 
        {
            adapter = new MediaSelectorAdapter(getApplicationContext(), R.layout.activity_media_selector, cursor, new String[] {
                MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM, MediaStore.Audio.Media.TITLE }, new int[] { R.id.text_1,
                R.id.text_2, R.id.text_3 }, Adapter.NO_SELECTION, selectedItems);
            listView.setAdapter(adapter);
        }
        else
        {
            adapter.swapCursor(cursor);
        }
    }

    /**
     * WHen the loader is reset we just pass in null as the cursor to the
     * adapter.
     */
    public void onLoaderReset(Loader<Cursor> cursorLoader)
    {
        adapter.swapCursor(null);
    }
} 
```

适配器：

```
/**
 * This adapter is used by the media selector activity to display the list rows.
 * It is needed to keep track of which checkboxes have been checked and which
 * has not. The system is aggressive in trying to re-use views that are not
 * currently being displayed which leads to strange behaviour with the
 * checkboxes where they keep their "checked" state although they have not been
 * checked for a specific item.
 * 
 * The class is extending SimpleCursorAdapter for easy use of the cursor that
 * can be obtained from a database or content resolver.
 * 
 * @author Daniel Kvist
 * 
 */
public class MediaSelectorAdapter extends SimpleCursorAdapter
{
    private Context context;
    private ArrayList<Track> selectedItems;

    /**
     * The constructor takes the same parameters as an ordinary simple cursor
     * adapter and passes them up to the super class. It then loops through the
     * cursor and initiates an array which contains references to all the list
     * rows and if they have been checked or not.
     * 
     * @param context
     *            the context which to be displayed in
     * @param layout
     *            the layout file for the list view
     * @param cursor
     *            the cursor that points to the data
     * @param from
     *            the fields that are to be displayed
     * @param to
     *            the views to display the fields in
     * @param flags
     *            any special flags that can be used to determine the behaviour
     *            of the super class adapter
     * @param selectedItems2 
     */
    public MediaSelectorAdapter(Context context, int layout, Cursor cursor, String[] from, int[] to, int flags, ArrayList<Track> selectedItems)
    {
        super(context, layout, cursor, from, to, flags);
        this.context = context;
        this.selectedItems = selectedItems;
    }

    /**
     * Reuses old views if they have not already been reset and inflates new
     * views for the rows in the list that needs a new one. It the adds a
     * listener to each checkbox that is used to store information about which
     * checkboxes have been checked or not. Finally we set the checked status of
     * the checkbox and let the super class do it's thing.
     */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        Cursor c = getCursor();
        c.moveToPosition(position);
        final Track track = new Track(c.getString(0), c.getString(1), c.getString(2), c.getString(3),
                c.getString(4), c.getString(5), c.getString(6));

        if (convertView == null)
        {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.media_selector_item_layout, null);
        }
        final CheckBox checkBox = (CheckBox) convertView.findViewById(R.id.checkbox);
        checkBox.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                CheckBox cb = (CheckBox) v.findViewById(R.id.checkbox);
                if (cb.isChecked())
                {
                    selectedItems.add(track);
                }
                else if (!cb.isChecked())
                {
                    selectedItems.remove(track);
                }
            }
        });
        // If the selected items contains the current item, set the checkbox to be checked
        checkBox.setChecked(selectedItems.contains(track));
        return super.getView(position, convertView, parent);
    }

    /**
     * Returns an array list with all the selected items as Track objects.
     * 
     * @return the selected items
     */
    public ArrayList<Track> getSelectedItems()
    {
        return selectedItems;
    }
} 
```

# jquery - 调用后显示两次 JSON 元素

> ID：12698341
> 
> 赞同：1
> 
> 时间：2012-10-02T21:07:31.247
> 
> 标签：jquery, ajax, json, getjson, each

我在显示一些 JSON 对象时遇到了一些问题。如果使用显示对象，`$.each()`则它将在屏幕上显示两次。如果我不用`$.each()`来显示对象，那么它会显示一次。下面的示例显示标尺内容将被加载两次，但文本内容只会被加载一次。

JSON 文件只被调用一次。我使用 Firebug 进行了检查。

我使用 jQuery 1.8.0 并使用 history.js 插件

JSON 文件使用 jsonlint.com 进行验证。

我需要找出为什么元素被显示两次。任何帮助表示赞赏。谢谢

编码：

```
function JSONLoader(page)
{
    //The page is "about" page then..
    if(page == 'about')
    {

        $.getJSON('about.json', function(data, textStatus){
            var htmlRuler="";
            $.each(data.person, function(pageIndex, page){  

                //The ruler content will load in twice
                if(page.RulerDiv){
                    htmlRuler += '<ul>';
                    $.each(page.RulerDiv,function(rulerIndex, ruler){
                        htmlRuler += '<li><img class="'+ruler.imgClass+'" src="'+ruler.imgURI+'" alt="'+ruler.imgAlt+'" title="'+ruler.imgTitle+'"/></li>';                         
                    });
                    htmlRuler += '</ul>';
                }                       
                $('.RulerDiv').append(htmlRuler).fadeIn('slow');

                //This loads the text in once only.
                if(page.TextDiv){
                    var htmltext = '<p class="' + page.TextDiv.textClass+'">'+ page.TextDiv.Text + '</p>';      
                }
                $('.TextDiv').append(htmltext).fadeIn('slow');
            });
        });
    }
} 
```

为此的一些示例 JSON。数组 RulerDiv 将被实现两次。

```
{
"person": {
    "page": {
        "RulerDiv": [
                {
                    "imgURI": "../img/rulerButton.png",
                    "imgTitle": "",
                    "imgClass": "hover whoRulerDivImg",
                    "imgAlt" : ""
                },
                {
                    "imgURI": "../img/rulerButton2.png",
                    "imgTitle": "",
                    "imgClass": "hover RulerDivImg",
                    "imgAlt" : ""
                }
            ],
        "TextDiv": {
            "wText" : "He is alive",
            "textClass" : "fontClass"
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:08:03.700

尝试更改以下代码：

```
if(page.RulerDiv){
   htmlRuler += '<ul>'; 
```

对于这个：

```
htmlRuler = '';
if(page.RulerDiv){
   htmlRuler += '<ul>'; 
```

因为在我看来，您`htmlRuler`在`.each()`循环内附加到相同的变量，而没有清除上一次迭代的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:01:15.767

*固定的*

问题是我对数据进行了两次迭代。取出第一个`.each()`并将代码更改为以下代码可修复此错误。

```
$.getJSON('about.json', function(data, textStatus){
            var htmlRuler="";  

            if(data.person.page.RulerDiv){
                htmlRuler += '<ul>';
                $.each(data.person.page.RulerDiv,function(rulerIndex, ruler){
                    htmlRuler += '<li><img class="'+ruler.imgClass+'" src="'+ruler.imgURI+'" alt="'+ruler.imgAlt+'" title="'+ruler.imgTitle+'"/></li>';                         
                });
                htmlRuler += '</ul>';
            }                       
            $('.RulerDiv').append(htmlRuler).fadeIn('slow'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:06:02.080

您能否尝试使用此代码更改您的代码。它对我来说看起来不错。

```
$.each(data.person, function(pageIndex, page){  
   // try to change these only and see        
    var htmlRuler = "";
             if(page.RulerDiv){
                htmlRuler = $('<ul>').clone();
                $.each(page.RulerDiv,function(rulerIndex, ruler){
                    var imgDom = $('<img>').clone(); 
                var liDom = $('<li>').clone();
                    $('<img>').addClass(ruler.imgClass).attr({'src':ruler.imgURI,'alt':ruler.imgAlt,'title':ruler.imgTitle})
                              .appendTo($('<li>').appendTo(htmlRuler));
                });
            }                       
            $('.RulerDiv').append(htmlRuler).fadeIn('slow');

            //This loads the text in once only.
            if(page.TextDiv){
                var htmltext = '<p class="' + page.TextDiv.textClass+'">'+ page.TextDiv.Text + '</p>';      
            }
            $('.TextDiv').append(htmltext).fadeIn('slow');
        }); 
```

# html - IOS - 如何处理来自 RESTful 服务 API 的返回调用

> ID：12698342
> 
> 赞同：0
> 
> 时间：2012-10-02T21:07:35.163
> 
> 标签：html, objective-c, ios, api, submit

我正在使用 API 让用户在我的应用程序中创建帐户。

现在我可以生成在 Objective-C 中提交值所需的 URL，并且在 API 文档中它具有返回数字，可以向我确认发生了什么。

我的问题是如何将该信息传递给应用程序的用户？返回调用在 HTML 页面中以纯文本形式显示给我。

有任何想法吗？

提前致谢。

///////

> 2012-10-03 12:24:31.557 Multi Web[72631:15203] 字典列表 - { Connection = "keep-alive"; “内容编码”= gzip；“内容长度”= 26；"内容-位置" = "signup.php"; “内容类型”=“文本/html”；日期 =“星期二，2012 年 10 月 2 日 23:24:32 GMT”；P3P = "policyref=\"/w3c/p3p.xml\", CP=\"ALL CURa ADMa DEVa OUR IND UNI COM NAV INT STA PRE\""; 服务器 = "Apache/2.2.14 (Ubuntu)"; 状态 = "200 OK"; TCN = 选择；Vary = "协商，接受编码"; "X-Limit-Key-Limit" = 10000; "X-Limit-Key-Remaining" = 9992; "X-Limit-Key-Reset" = 236; “X-限制-用户-限制”= 320；"

我在我的控制台中得到了这个，所以我现在已经成功创建了该帐户。中间显示 Status = "200 OK";

我如何使用那条特定的线？如果我可以将 UIAlertView 连接到那个，那么我就是我想去的地方。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:13:40.917

我不确定你的情况是否与[这个问题有关。](https://stackoverflow.com/questions/7251448/ios-get-header-results)根据您正在使用的[getPocket API](http://getpocket.com/api/docs/#api)的文档，我看到以下内容：

![在此处输入图像描述](../Images/dec3b01285c70444fa04771b629a2149.png)

根据[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)，默认的 HTTP 方法是 GET。您需要做的是检查 API 的响应标头。所以你需要做的就是将你的 httpMethod 更改为 HEAD ，如下所示：

```
NSMutableURLRequest *modReq = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"www.somesite.com/?something"]];
    [modReq setHTTPMethod:@"HEAD"]; 
```

然后你可以从标题中读取值，如下所示：

```
NSURLResponse* response = // the response, from somewhere
NSDictionary* headers = [(NSHTTPURLResponse *)response allHeaderFields]; 
```

然后，您可以获取响应值，并相应地告诉用户发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T09:00:37.580

它被称为设计和创建用户界面。

您向服务器发送请求并获得响应。你的工作是检查响应，识别它的含义，并以适当的方式告诉用户响应的含义。由于用户不是解析 html 的专家，因此显示 html 几乎总是完全不合适的。

对于正确输入用户名和密码的用户，适当的响应通常是用户现在可以访问该站点。

# c# - 在 Visual Studio 中使用命令行窗口

> ID：12698343
> 
> 赞同：6
> 
> 时间：2012-10-02T21:07:38.253
> 
> 标签：c#, visual-studio-2010, command-prompt

我正在尝试遵循此演练：

[在 Windows 服务中托管 WCF](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

到这一步：

> 第 6 步：安装 Windows 服务 在此步骤中，您将安装 Windows 服务并从服务控制台运​​行它。
> 
> 1.  重建解决方案并打开 Visual Studio 命令提示符。
> 2.  浏览到 WindowsService1.exe 所在项目的 bin 目录。
> 3.  运行以下命令来安装服务：
> 
> Installutil WindowsService1.exe

我以前从未使用过 Visual Studio 命令提示符。怎么做 2*浏览到 WindowsService1.exe 所在项目的 bin 目录*？我在 之后输入`>`什么？

使用普通的命令行语法，如`cd`，不起作用，那么我如何`browse`使用这个工具找到一个位置？例如，如果我在命令行窗口中输入`cd "C:\"`它，它会返回`Command "cd" is not valid.`

嗯，我找到了一些东西…… *[Vis​​ual Studio 命令别名](http://msdn.microsoft.com/en-us/library/c3a0kd3x.aspx)*(MSDN)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T21:11:43.307

`cd` **确实**有效。但是，请记住，如果您尝试访问的路径有空格，则需要在其周围加上引号（路径）。例如：

```
cd "C:\Program Files\Microsoft Visual Studio 10.0" 
```

另外，请注意，第 6 步中提到的“Visual Studio*命令提示符”***不是**“Visual Studio*命令窗口*”——我认为这就是问题所在。命令*提示符*是一个单独的可执行文件，您可以通过单击开始启动它，指向所有程序，指向 Microsoft Visual Studio，指向 Visual Studio 工具，然后单击 Visual Studio 命令提示符。或者，只需在“开始”菜单的搜索栏中搜索“Visual Studio”，它就会出现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:25:57.210

“步骤 6”whytheq 的更简单方法是在 Visual Studio 中右键单击您的项目，然后单击“在 Windows 资源管理器中打开文件夹”。应该会弹出一个窗口，您应该会看到“Bin”目录。只需按住“Shift”并右键单击“Bin”目录，然后单击“在此处打开命令窗口”。这应该会在您需要完成上述第 6 步的地方打开一个命令窗口！

# java - 谷歌 Android API 10 2.3.3 的 java.sql.Timestamp 实现

> ID：12698346
> 
> 赞同：0
> 
> 时间：2012-10-02T21:07:49.330
> 
> 标签：java, android, timestamp, android-sdk-2.3

代码：

```
import java.sql.Timestamp;
Timestamp startTimestamp = new Timestamp(2012, 1, 1, 0, 0, 0, 0);
System.out.println("startTimestamp = " + startTimestamp);
System.out.println("startTimestamp.getYear() = " + startTimestamp.getYear()); 
```

输出：

```
startTimestamp = 3912-02-01 00:00:00.0
startTimestamp.getYear() = 2012 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:21:31.323

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)说：

**参数：** year - 年份减去 1900

所以，2012+1900=3912。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:41:00.050

请注意，这`new Timestamp(2012, 1, 1, 0, 0, 0, 0);`已被弃用，我认为这是您问题的根源！

改为使用`Timestamp startTimestamp = new Timestamp(System.currentTimeMillis());`。

另外，请注意，这`startTimestamp.getYear()`也已弃用！

> 已弃用。从 JDK 1.1 版开始，由 Calendar.get(Calendar.YEAR) 取代。
> 
> 返回此 Date 对象表示的月份中的哪一天。返回的值介于 1 和 31 之间，表示包含此 Date 对象所表示的时间点或以该时间点开始的月份的日期，如本地时区所解释的那样。

考虑这个例子（基于您的原始代码）：

```
public static void main(String[] args)
{
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DAY_OF_YEAR, 1);
    cal.set(Calendar.MONTH, 1);
    cal.set(Calendar.HOUR, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    Timestamp startTimestamp = new Timestamp(cal.getTimeInMillis());
    System.out.println("startTimestamp = " + startTimestamp);
    Calendar cal2 = Calendar.getInstance();
    cal2.setTimeInMillis(startTimestamp.getTime());
    System.out.println("Year = " + cal2.get(Calendar.YEAR));
} 
```

它将产生输出：

```
startTimestamp = 2012-01-01 12:00:00.0
Year = 2012 
```

# python - 无法让 pyinstaller 挂钩与 gdal 一起使用

> ID：12698348
> 
> 赞同：3
> 
> 时间：2012-10-02T21:07:53.620
> 
> 标签：python, gdal, pyinstaller, osgeo

我有一个 python 脚本，我想用 pyinstaller 打包它。它使用 osgeo.ogr 和 osgeo.osr。使用基本构建命令 ( `python pyinstaller.py --onefile c:\path\to\my\file.py`) 它创建规范文件和 exe。当我运行 exe 时，出现以下错误：

```
File "c:\Programming\Python\pyinstaller-2.0\PyInstaller\loader\iu.py", line 409, in importHook
raise ImportError("No module named %s" % fqname)
ImportError: No module named _gdal 
```

`_gdal`在 osgeo 包中找到（我可以使用 导入它`import osgeo._gdal`）。我试过用单行（也试过）为它创建一个钩子（试过`hook-_gdal.py`，，，`hook-osgeo._gdal.py`）。每当我将 spec 文件的路径添加为时，我在尝试构建它时都会收到以下错误（无论目录中有什么）：`hook-_gdal.osgeo.py``hiddenimports = ['osgeo._gdal']``hiddenimports = ['_gdal']``hookspath='c:\\Programming\\Python\\pyinstaller-2.0\hooks'`

```
File "c:\Programming\Python\pyinstaller-2.0\PyInstaller\hooks\hook-site.py", line 37, in hook
new_code_object = PyInstaller.utils.misc.get_code_object(fake_file)
AttributeError: 'module' object has no attribute 'utils' 
```

显然我在这里犯了很多错误，但我不知道在哪里。任何人都可以帮忙吗？

# javascript - 如何检索元素相对于 svg 视图框的坐标？

> ID：12698349
> 
> 赞同：5
> 
> 时间：2012-10-02T21:08:09.700
> 
> 标签：javascript, google-chrome, svg, d3.js, viewbox

在我的 index.html 中，我有一个 svg 视图框：

```
<svg viewBox = "0 0 2000 2000" version = "1.1">
</svg> 
```

我希望为我创建的 svg 椭圆设置动画，这样当单击椭圆时，它会垂直移动到某个 y 点，我们将调用 TOP，如果再次单击，则会移回其原始位置，称为 BOTTOM。目前我正在使用以下代码在一定程度上有效。

```
var testFlag = 0;    
d3.select("#ellipseTest").on("click", function(){
if (testFlag == 0){
  d3.select(this)
      .attr("transform", "translate(0,0)")
      .transition()
        .duration(450)
        .ease("in-out")
        .attr("transform", "translate(0,-650)")
    testFlag = 1;
}else{
 d3.select(this)
      .attr("transform", "translate(0,-650)")
      .transition()
        .duration(450)
        .ease("in-out")
        .attr("transform", "translate(0,0)")
testFlag = 0;
}
}); 
```

然而，问题是我还使椭圆可以拖动到顶部点并向下拖动到底部点。因此，如果我在 TOP 和 BOTTOM 之间拖动椭圆，然后单击椭圆，它会在 TOP*上方*垂直设置动画，而不是在到达 TOP 时停止（对于 BOTTOM 向下动画也是如此）。这似乎是 transform translate 方法如何工作的结果。我相信如果我创建一个函数来动态返回椭圆应该相对于鼠标点击的位置（或者更好的是，椭圆当前的位置）平移的量，我可以解决这个问题。问题是我无法弄清楚如何获取元素相对于视图框的当前 y 位置，而我只能获取相对于整个页面的位置。

这是我用来获取点击位置的错误代码：

```
var svg2 = document.getElementsByTagName('svg')[0];
var pt = svg2.createSVGPoint();
document.documentElement.addEventListener('click',function(evt){    
    pt.x = evt.clientX;
    pt.y = evt.clientY;
    console.log('Position is.... ' + pt.y);
},false); 
```

这是使椭圆可拖动的工作代码：

```
//These points are all relative to the viewbox
var lx1 = -500;
var ly1 = 1450;
var lx2 = -500;
var ly2 = 800;
function restrict(mouse){ //Y position of the mouse 
    var x;
    if ( (mouse < ly1) && (mouse > ly2) ) {
        x = mouse;
    }else if (mouse > ly1){
        x = ly1;
    }else if (mouse < ly2) {
        x = ly2;
    }
    return x;
}

var drag = d3.behavior.drag()
    .on("drag", function(d) {
      var mx = d3.mouse(this)[0];
      var my = d3.mouse(this)[1];

      d3.select("#ellipseTest")
        .attr({
          cx: lx2,
          cy: restrict(d3.mouse(this)[1])
        });
    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:07:16.440

动画`cy`而不是转换......

```
var testFlag = 0;    
d3.select("#ellipseTest").on("click", function(){
if (testFlag == 0){
  d3.select(this)
      .transition()
        .duration(450)
        .ease("in-out")
        .attr("cy", 0)
    testFlag = 1;
}else{
 d3.select(this)
      .transition()
        .duration(450)
        .ease("in-out")
        .attr("cy", 650)
testFlag = 0;
}
}); 
```

# xcode - 如何通过命令行使用现有的 Mac 应用程序？

> ID：12698352
> 
> 赞同：2
> 
> 时间：2012-10-02T21:08:14.450
> 
> 标签：xcode, cocoa, command-line, terminal

我正在寻找适应我从应用商店下载的 css 格式化程序应用程序，以便我可以从命令行控制它。基本上在我将文件推送到 github 之前，我想让应用程序格式化为 .css 文件。所以我想知道如何在不手动操作的情况下让应用程序运行它的进程。

我不知道从哪里开始......我有 xcode。

所以我的问题是，我从哪里开始？

你能指出我做过类似事情的人的任何文章吗？应用程序中我最应该关注哪些文件？

谢谢指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:12:00.803

如果它是来自 Mac App Store 的常规应用程序，您可以在应用程序包中找到可执行文件`Contents/MacOS/AppName`。

因此，例如，要启动 Mail 应用程序，您必须执行以下操作：

```
/Applications/Mail.app/Contents/MacOS/Mail 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:13:48.797

假设您不想只从命令行启动它，而是想让它做一些有用的事情。

## 1 - 反汇编和链接你自己的程序

Mac 应用程序将在包（只是一个目录）中有一个可执行文件（在 TheApp.app/Contents/MacOS/APP_NAME 中）。Xcode 不会真的有那么大的帮助。

该应用程序很可能使用 AppKit / NSApp Cocoa 框架，并且可执行文件将创建一个应用程序实例，设置 GUI 等，注册东西。Cocoa 应用程序在委托、回调等系统上工作。它不仅仅是一个同步运行的主要功能。它们几乎肯定不会导出您可以链接和调用的简单外部符号。即使你这样做了，你也需要头文件。

您可以查看 Objective-C 反汇编程序，因为编译后的可执行文件可能有足够的符号来大致计算出正在发生的事情。但是您需要对 Objective-C 和 Cocoa 有一定的了解（至少要知道这会很困难）。

因此，除非您知道自己在做什么，否则选项 1 并不是真正的选项，它是计算程序符号是什么/反汇编可执行文件，然后编写您自己的应用程序来链接二进制文件并调用相关方法。

## 2 - 编写 GUI 脚本

另一方面，您可以查看它是否是 Apple 可编写脚本的。您可以启动应用程序，记录活动（查看 AppleScript 编辑器的记录功能）来编写实际 GUI 的脚本。这可能会奏效。

## 3 - 与作者交谈

如果你真的想要这个，我建议你和作者谈谈。也许他们可以使它用作命令行工具。

# jquery - li 上的 jQuery 动画图片与 li 具有相同的链接

> ID：12698356
> 
> 赞同：0
> 
> 时间：2012-10-02T21:08:29.317
> 
> 标签：jquery, position, html-lists, mouseover

基本上，我想要这种功能但不那么复杂： http: [//www.blueacorn.com/team/](http://www.blueacorn.com/team/)

我有一个 ul 的各种 li 包含图片，这些图片将仅链接到 LinkedIn 帐户（而不是 Twitter，就像示例中一样）。我希望当您将鼠标悬停在其中一张图片上时，jQuery 动画将在其上显示一个图像，您将能够单击它转到他们的 LinkedIn。（最终这些都将是不同人的照片。）

这是我的 JFiddle：http: [//jsfiddle.net/h5y64/](http://jsfiddle.net/h5y64/)

如果可能的话，我不想为每个盒子创建一个 id，因为我将拥有 40 多个（并且还在增长）。

我的主要问题是：

1）我无法让 divHover 在我悬停的图片上正确设置动画（它到处都是！）

2) 我无法让 divHover 链接到不同的网页。

我确信有一种方法可以让我动态地做到这一点，但我无法弄清楚。

顺便说一句，这个问题很相似，但依赖于为每个块创建一个 id：[How to position a hover div based on the position of the element](https://stackoverflow.com/questions/7923317/how-to-position-a-hover-div-based-on-the-position-of-the-element)

我真的找不到一个很好的例子（我能理解）。但是这个问题很难描述，所以也许我错过了。

我对 jQuery 还是很陌生，所以如果可能的话，请降低你的答案。:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:32:00.067

我已经做了一个简单的例子来说明我将如何做到这一点。就像在 blueacorn 上一样，我提前为每个 li 添加了叠加层，因此可以有多个可见。（如果一个还在向下滑动，其他人可以同时向上滑动）。

您的 HTML 中也存在一些问题，例如`a`around `li`，这是不允许的。

这是我的例子：

演示：

[http://jsfiddle.net/bYcmc/](http://jsfiddle.net/bYcmc/)

HTML：

```
<ul>
    <li>
        <div>
            <img src="http://w3schools.com/css/klematis.jpg" />
            <a href=""></a>
        </div>
        <h6>Name 1</h6>
    </li>
    .
    .
    .
</ul> 
```

JS：

```
$('li').hover(function() {
    $(this).find('a').stop().animate({
        'top': '0%'
    }, 300);
}, function() {
    $(this).find('a').stop().animate({
        'top': '100%'
    }, 300);
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:41:53.307

我会在[这个 JSFiddle](http://jsfiddle.net/hZHKE/2/)中采用这种方法。需要注意的重要部分是缩略图的相对定位和 divHovers 的绝对定位。另外，请注意如何创建多个悬停元素，每个缩略图一个。

**编辑：**我还通过将`<li>`元素直接嵌套在 中`<ul>`，然后从那里嵌套锚标记来使 HTML 正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:25:08.720

下面的代码可以根据您的要求完美运行。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Scroll - Up - Down</title>
    <!-- SCRIPTS -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){

        $(".scroll-up-down li").mouseover(function(){
            $(this).find("span.hover-link").show();
        });

        $(".scroll-up-down li").mouseout(function(){
            $(this).find("span.hover-link").hide();
        });

    });
    </script>
    <!-- SCRIPTS -->

    <!-- STYLES -->
    <style type="text/css">

        body                        { background:#CCC; font-family:Arial, Helvetica, sans-serif; }
        h1                          { font-size:16px; text-align:center; }
        .scroll-up-down             { border:1px dashed #bbb;  margin:0 auto; padding:0; text-align:center; width:400px; }
        .scroll-up-down li          { display:inline-block; list-style:none; margin:10px; position:relative; text-align:center; width:100px; z-index:999; }
        .scroll-up-down li span.hover-link              { background:url(hover-div.png) no-repeat;
                                                          border:5px solid #000;
                                                          color:#FFF;
                                                          font-size:12px;
                                                          font-weight:bolder;
                                                          display:none;
                                                          height:60px; 
                                                          left:0;
                                                          list-style:none;
                                                          padding-top:40px; 
                                                          position:absolute; 
                                                          filter: alpha(opacity=50);
                                                          opacity: 0.5;
                                                          text-align:center;
                                                          top:0; 
                                                          vertical-align:bottom;
                                                          width:100px; 
                                                          z-index:1000; 

                                    }
        .scroll-up-down li span.hover-link a.linkedin-icon { background:url(linked-icon.png) no-repeat 0 -50px;  display:inline-block; height:40px; width:40px; }
        .scroll-up-down li span.hover-link a.linkedin-icon:hover { background-position:0 0;   display:inline-block; height:40px; width:40px; }
        .scroll-up-down li a span   { font-size:12px; }
        .scroll-up-down li a        { display:inline-block; text-decoration:none; }
        .scroll-up-down li a img    { border:5px solid #000; height:100px;  width:100px; }

    </style>
    <!-- / STYLES -->
</head>

<body>
    <h1> User Profiles Grid</h1>
    <ul class="scroll-up-down">

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. ABC</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Ms. PQR</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. XYZ</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Ms. LMN</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. DEF</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. JKL</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Ms. RST</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. QWE</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

        <li><a href="mylinkedin.php"><img src="mysteryman.jpg" alt="mystery-man" title="mystery-man" /><span>Mr. YUI</span></a>
        <span class="hover-link"><a href="http://www.linkedin.com/in/aratibhandare" class="linkedin-icon">&nbsp;</a></span>
        </li>

    </ul>
</body>
</html> 
```

# yii - 键/对默认值

> ID：12698359
> 
> 赞同：0
> 
> 时间：2012-10-02T21:08:42.903
> 
> 标签：yii

我正在尝试创建一个包含多个字段的表单，一些字段将由用户填写，而其他字段将按照定义转储到数据库中。

我真的不知道如何在语法方面使用它。

为了更通用，例如我有 Post tble 有以下文件

```
 id' => 'ID',
        'post_head' => 'Heading',
        'post_desc' => 'Description',
        'post_tags' => 'Tags',
        'created_time' => 'Created Time',
        'created_date' => 'Created Date',
        'post_image' => 'Upload Image',
        'post_status' => 'Status',
        'user_id' => 'User',
        'category_id' => 'Category',
    ); 
```

现在我只想在以下字段中获取用户的输入：

```
Heading
Description
Tags 
```

上传图片

现在我想知道我该怎么做

1.  在没有用户的情况下在数据库字段中传递当前时间和当前日期
2.  输入。来自会话的用户 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:13:23.413

在您的模型中：

```
function beforeSave() {
    if($this->getIsNewRecord()) {
        $this->created_date = new CDbExpression('NOW()');
        $this->created_time = new CDbExpression('NOW()');
    }
    $this->user_id = Yii::app()->user->id;
    return parent::beforeSave();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:17:15.417

1）如果你使用像MySQL这样的数据库，你不需要`created_date`and `created_time`，只是一个`datetime`字段（可能`created_time`是这样的），它将存储两个数据！

```
public function behaviors()
{
    return array(
        'CTimestampBehavior' => array(
            'class' => 'zii.behaviors.CTimestampBehavior',
            'updateAttribute' => false,
            'createAttribute' => 'created_time',
        )
    );
} 
```

然后两个：

```
function beforeSave() {
    if (!parent::beforeSave) {
        return false;
    }
    $this->user_id = Yii::app()->user->id; // it should be this one, but it depends on how you implemented logging!
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:52:43.990

1.  代替

    `'created_time' => 'Created Time',
    'created_date' => 'Created Date',`

您只需要数据库中的一个字段：

`create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP`

很多 php 函数都使用时间戳，使用起来非常简单。你可以[在这里](http://php.net/manual/en/ref.datetime.php)阅读。因此，如果您插入 NULL `create_time`，mysql 将插入默认值`DEFAULT CURRENT_TIMESTAMP`- 当前时间。

1.  正如@Veseliq 和@mashingan 所说，您需要添加

    ```
    function beforeSave() {     
        $this->user_id = Yii::app()->user->id;  
       return parent::beforeSave();  
    } 
    ```

    或尝试在您的表单视图中添加：

    ```
    echo $form->hiddenField($model, 'user_id', array('value'=>Yii::app()->user->id)); 
    ```

如果它不起作用，请告诉我们`var_dump(Yii::app()->user->id);`

# c# - Json字符串反序列化为对象数组列表

> ID：12698365
> 
> 赞同：2
> 
> 时间：2012-10-02T21:09:17.707
> 
> 标签：c#, .net, json, serialization, deserialization

请帮忙！在反序列化时出现此错误：

> 无法将“System.String”类型的对象转换为“System.Collections.Generic.List”类型

来自客户端的 JSON 字符串：

> "\"[{\\"id\\":\\"18_0_2_0\\",\\"ans\\":\\"您可以输入自由文本代替 *** \\"},{\\" id\\":\\"23_1_3_1\\",\\"ans\\":\\"刷新按钮\\"},{\\"id\\":\\"11_2_1_2\\",\ \"ans\\":\\"假\\"}]\""

**编辑：**未转义（见评论）：

> [{"id":"18_0_2_0","ans":"您可以输入自由文本代替*** "},{"id":"11_2_1_2","ans":"False"}]

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
List<RawAnswer> ListAnswers = serializer.Deserialize<List<RawAnswer>>(str);
 [Serializable]
public class RawAnswer
{       
    public string QuestionID { get; set; }
    public string Answer { get; set; }

    public RawAnswer() { }

}

public class AnswerList
{
    public List<RawAnswer> RawAnswer { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T21:19:29.670

您的原始 json 字符串（在 aKzenT 编辑之前）被双重转义，我曾经`var str2 = Regex.Unescape(str);`得到实际的字符串。

```
public class RawAnswer
{
     public string id { get; set; }
     public string ans { get; set; }

} 
```

而且不需要`AnswerList`

现在你的代码可以工作了

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
List<RawAnswer> ListAnswers = serializer.Deserialize<List<RawAnswer>>(str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:13:24.990

您从客户端收到的 JSON 字符串本身就是一个包含您要查找的实际 JSON 字符串的字符串。修复客户端以向您发送正确的字符串，或者首先将此结果反序列化为 a `String`，然后将其反*序列*化为`List<RawAnswer>`.

# bash - 表达式未在 shell 脚本中求值

> ID：12698371
> 
> 赞同：1
> 
> 时间：2012-10-02T21:09:28.833
> 
> 标签：bash, shell, unix

```
TEST1=`echo $QUERY_DAYS3 | awk '{print $1}'`
echo $TEST1

TEST2=`echo $QUERY_DAYS3 | awk '{print $2}'`
echo $TEST2

mailx -s "Data Report" -r uname@host.com uname@host.com <<EOF

Error Percentage: $((100 * ($TEST2/ $TEST1)))

EOF 
```

在我的 bash Shell 脚本中，我有上面的代码，我从中发送电子邮件。但是当我检查我的电子邮件时，我总是看到`Error Percentage`我上面的代码中写的那样。它不评估乘法和除法表达式。

我正在像这样运行上面的脚本-

```
sh -x test1.sh 
```

在我收到这样的电子邮件中-

```
Error  Percentage: $((100 * (183563 / 3793277))) 
```

我正在跑步`SunOS`。

可能我需要在这里使用`Back-Ticks`吗？

**更新：-**

我当前正在使用的更新脚本-

```
TEST1=`echo $QUERY_DAYS3 | awk '{print $1}'`
echo $TEST1

TEST2=`echo $QUERY_DAYS3 | awk '{print $2}'`
echo $TEST2

mailx -s "Data Report" -r uname@host.com uname@host.com <<EOF

Error Percentage: $(( 100 * $TEST2 ) / $TEST1)

EOF 
```

我在下面这样运行它-

```
sh -c 'exec ./test.sh' 
```

在尝试了很多人给出的建议之后。我收到这个错误-

```
./test.sh: command substitution: line 176: syntax error near unexpected token `/'
./test.sh: command substitution: line 176: `( 100 * $TEST2 ) / $TEST1' 
```

我现在做错了什么？有什么想法吗？

**更新：-**

进行更改后，它开始工作-

```
Mismatch  Percentage: $((( 100 * $TEST2 ) / $TEST1)) 
```

但是在电子邮件中，我得到的百分比被四舍五入到只有一个数字，`4`而不是显示为`4.34563235`如何获得完整的数字而不是四舍五入到一位数字。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:41:06.063

你不能指望它在 bash 下运行，如果你明确告诉`sh`执行它......试试

```
bash -x test1.sh 
```

有

```
#!/bin/bash 
```

作为第一行，仅当您*直接*执行脚本时才会起作用：

```
./test1.sh 
```

它需要是“可执行的”才能工作

```
chmod +x test1.sh 
```

**更新**

```
Error Percentage: $(( 100 * $TEST2 ) / $TEST1) 
```

需要是

```
Error Percentage: $((( 100 * $TEST2 ) / $TEST1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:37:15.540

确保脚本确实使用 bash 运行。执行此操作的标准方法是将其作为脚本中的第一行：

```
#!/usr/bin/env bash 
```

虽然没有任何使用 SunOS 的经验，所以不确定这是否可以在那里工作或需要一些轻微的修改。

编辑：现在它与 bash 一起运行，看起来你需要它：

```
Error Percentage: $(( ( 100 * $TEST2 ) / $TEST1 )) 
```

更新：bash 只做整数运算。对于浮点运算，您可以执行

```
Error Percentage: `echo "scale=8; ( 100 * $TEST2 ) / $TEST1" | bc` 
```

这将使用[bc](http://linuxcommand.org/man_pages/bc1.html)而不是 shell 进行计算。

# algorithm - 如何找到两个矩形的碰撞中心？矩形可以旋转

> ID：12698373
> 
> 赞同：8
> 
> 时间：2012-10-02T21:09:38.707
> 
> 标签：algorithm, math, polygon

我刚刚使用 SAT 实现了碰撞检测，[这篇文章](http://www.gamedev.net/page/resources/_/technical/game-programming/2d-rotated-rectangle-collision-r2604)作为我的实现的参考。检测按预期工作，但我需要知道两个矩形在哪里发生碰撞。

![我需要十字路口的中心](../Images/8d7da763a10ffbd0e2f22e4ad400b67f.png) ![更多示例](../Images/4e018557fdf2cf24c62e15484d8758ee.png)

我需要找到交叉点的中心，即上图中的黑点（但我也没有交叉点区域）。我发现了一些关于此的文章，但它们都涉及避免重叠或某种速度，我不需要这个。

我所掌握的关于矩形的信息是代表它们的四个点`upper right`、`upper left`、`lower right`和`lower left`坐标。我试图找到一种算法，可以给我这些点的交集。

我只需要在上面放一张图片。就像两辆车相撞一样，所以我在碰撞中心的顶部放了一张图片。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:32:06.957

您需要使用线对线相交方程/算法对框的边界进行相交。

[http://en.wikipedia.org/wiki/Line-line_intersection](http://en.wikipedia.org/wiki/Line-line_intersection)

一旦你有了交叉点，你可能会对这些点的平均值或给定特定方向的中心感到满意。中间的问题有点含糊。

编辑：除此之外，您还需要确定两个矩形中的任何一个的角是否在另一个内部（这应该很容易解决，即使是从交叉点）。在计算“平均”中心点时，这应该与交叉点一起添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:53:51.930

还有另一种方法：通过采样点找到碰撞区域的质心。

创建以下函数：

```
bool IsPointInsideRectangle(Rectangle r, Point p); 
```

将搜索矩形定义为：

```
TopLeft = (MIN(x), MAX(y))
TopRight = (MAX(x), MAX(y))
LowerLeft = (MIN(x), MIN(y))
LowerRight = (MAX(x), MIN(y)) 
```

其中 x 和 y 是两个矩形的坐标。

您现在将定义一个像网格一样划分搜索区域的步骤。我建议您使用 AVG(W,H)/2 ，其中 W 和 H 是搜索区域的宽度和高度。

然后，如果每个网格点位于碰撞区域内，则迭代网格点：

```
IsPointInsideRectangle(rectangle1, point) AND IsPointInsideRectangle(rectangle2, point) 
```

定义：

```
Xi : the ith partition of the mesh in X axis.
CXi: the count of mesh points that are inside the collision area for Xi. 
```

然后：

![在此处输入图像描述](../Images/d538165712a7b2a766e5d0caeb0d7174.png)

你也可以对 Y 做同样的事情。这是这种方法的一个说明性示例：

![在此处输入图像描述](../Images/95e8e03b168053f94b75c46d2c2a94dc.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:29:36.180

这很棘手，因为不规则多边形没有定义的中心。由于您的多边形（在矩形的情况下）保证是凸的，因此您可能会找到包含碰撞的多边形的角（可以包括原始形状的角或边缘的交叉点）并将它们平均得到 . .. 某物。它可能会模糊地接近您期望的“中心”位置，并且对于正多边形它可能会完全匹配，但它是否意味着数学上的任何东西有点不同。

我一直在数学上摆弄并提出以下问题，它解决了点出现和消失时的平滑度问题（当碰撞框的移动导致矩形变为三角形时会发生这种情况，反之亦然）。如果没有这些额外的东西，添加和删除角点会导致质心跳跃。

[来，拿这个fooplot。](http://fooplot.com/#W3sidHlwZSI6MywiZXEiOltbIi0xIiwiLTIiXSxbIjEiLCItMS41Il0sWyItMS43NSIsIjEiXSxbIi4yNSIsIjEuNSJdXSwiY29sb3IiOiIjRkYwMDAwIn0seyJ0eXBlIjozLCJlcSI6W1siLTEiLCIwIl0sWyIxIiwiMiJdLFsiMSIsIi0yIl0sWyIzIiwiMCJdXSwiY29sb3IiOiIjMDAzM0ZGIn0seyJ0eXBlIjozLCJlcSI6W1siLjMiLCIxLjMiXSxbIi0xIiwiMCJdLFsiMC42IiwiLTEuNiJdLFsiMSIsIi0xLjUiXV0sImNvbG9yIjoiIzA5RkYwMCJ9LHsidHlwZSI6MywiZXEiOltbIi4yMjUiLCItLjQ1Il0sWyIuMjA3NyIsIi0uNDczMCJdXSwiY29sb3IiOiIjRkYwMEVBIn0seyJ0eXBlIjoxMDAwLCJ3aW5kb3ciOlsiLTMuNTQwOTAzMjY0MjU1OTk4IiwiMy4yNzQ4NDA3MzU3NDM5OTkiLCItMi42MDg4NjIzMzA4Nzk5OTg3IiwiMS41ODU0NDE2NjkxMTk5OTg2Il19XQ--)

该图显示了 2 个矩形，R 和 B（红色和蓝色）。交叉口扫过一个区域 G（绿色）。未加权和加权中心（均为紫色）通过以下方法计算：

```
(0.225, -0.45):   Average of corners of G
(0.2077, -0.473): Average of weighted corners of G 
```

多边形的加权角定义为角的坐标，由角的角度的正弦加权。

该多边形有两个 90 度角、一个 59.03 度角和一个 120.96 度角。（两个非直角的正弦相同，sin(Ɵ) = 0.8574929...

因此，加权中心的坐标为：

```
( (sin(Ɵ) * (0.3 + 0.6) + 1 - 1)   / (2 + 2 * sin(Ɵ)),  // x
  (sin(Ɵ) * (1.3 - 1.6) + 0 - 1.5) / (2 + 2 * sin(Ɵ)) ) // y
= (0.2077, -0.473) 
```

对于提供的示例，差异不是很明显，但如果 4gon 更接近 3gon，则会有很大的偏差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:31:58.630

如果您不需要知道该区域的实际坐标，您可以制作两个`CALayer`框架为矩形的 s，并使用一个来遮盖另一个。然后，如果您在被遮罩的图像中设置图像，它将仅显示在它们重叠的区域中。

# php - 无法从 mySQL 存储过程返回结果

> ID：12698375
> 
> 赞同：0
> 
> 时间：2012-10-02T21:09:53.587
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 从存储过程中提取数据，但我很难确定这一点。在过去的几天里，我四处寻找，似乎无法找到解决我问题的直接方法。

这就是我创建过程的方式：

```
DELIMITER $$
CREATE PROCEDURE sp_searchArticles(
   IN tagList VARCHAR(255), 
   IN lastArticle INT(10), 
   OUT  data INT(10))
BEGIN
CREATE TEMPORARY TABLE at_results (
id INTEGER(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
article_id INTEGER(10) NOT NULL,
datetime DATETIME NOT NULL,
common_tags INTEGER NOT NULL)
SELECT at.article_id, art.datetime, Count(at.article_id) AS common_tags
FROM article_tags AS at 
INNER JOIN articles AS art ON at.article_id = art.article_id
WHERE at.tag_id IN (tagList)
GROUP BY at.article_id
ORDER BY common_tags DESC, art.datetime DESC;

CREATE TEMPORARY TABLE at_article
SELECT id
FROM at_results
WHERE article_id = lastArticle;

SELECT article_id
INTO data
FROM at_results, at_article
WHERE at_results.id > at_article.id;

END $$
DELIMITER ; 
```

然后我使用 PDO 调用 SP：

```
$sql = "CALL sp_searchArticles(:tag_list, :last_article, @data)";
$tag_sth = $this->db->prepare($sql);
$tag_sth->bindParam(':tag_list', $tag_list);
$tag_sth->bindParam(':last_article', $last_article);
$tag_sth->execute();
$data = $this->db->query("select @data")->fetch(PDO::FETCH_ASSOC); 
```

但它返回“#1436 - 线程堆栈溢出：”

我尝试在不使用 @data out 变量的情况下调用存储过程，但出现 HY000 错误。我原本不希望这个调用是一个存储过程，但是 PDO 似乎不喜欢我在一次执行中有多个语句的脸。此外，我似乎无法通过 phpmyadmin 使用静态参数正确调用该过程。然而，sql 语句在过程之外可以完美地工作。

我不是最精通 PDO 和 mySQL，但我已经阅读了很多关于 phpmyadmin、PDO 和 PHP 中与存储过程有关的错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:24:08.980

您使用的内存可能比 MySQL 配置允许您使用的更多。

看：

[MySQL 错误 1436：线程堆栈溢出，使用简单查询](https://stackoverflow.com/questions/8821575/mysql-error-1436-thread-stack-overrun-with-simple-query)

如果您有权访问它，请尝试更改您的 my.cnf 文件。

# tsql - 如何根据表中存在的值设置位

> ID：12698376
> 
> 赞同：1
> 
> 时间：2012-10-02T21:10:07.473
> 
> 标签：tsql

我有一张桌子。我有 2 个变量，一个是 a `bit`，另一个是 a `int`。

桌子：`WorkGroupCollectionDetail`

变量：`@WorkgroupID int, @IsFSBP bit`

该表有`WorkGroupId int PK`和`WorkGroupCollectionCode varchar PK`。而已。

我可以运行这样的查询：

```
SELECT WorkGroupId 
FROM WorkGroupCollectionDetail 
WHERE WorkGroupCollectionCode = 'FSBP' 
```

它给了我一个列表`WorkGroupID`。

所以我需要做的是，如果 的值`@WorkgroupID`在该查询的结果中，我需要将 bit 变量设置为 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:15:14.433

```
select @IsFBSP = case
  when exists (
    select 42 from WorkGroupDetailCollection
      where WorkGroupCollectionCode = 'FSBP' and WorkGroupId = @WorkGroupId ) then 1
  else 0 end 
```

这在逻辑上等同于：

```
select @IsFBSP = case
  when @WorkGroupId in (
    select WorkGroupId from WorkGroupDetailCollection
      where WorkGroupCollectionCode = 'FSBP' ) then 1
  else 0 end 
```

使用 的查询`EXISTS`通常比使用 的查询执行得更好`IN`。您可以检查执行计划以查看它们在您的特定情况下的比较情况。

请注意，这些示例包括将位值设置为零和一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:17:27.980

您可以修改`SELECT`以包括检查`WorkGroupId`并相应地更新`@IsFSBP`：

```
IF EXISTS(SELECT WorkGroupId 
          FROM WorkGroupCollectionDetail 
          WHERE WorkGroupCollectionCode = 'FSBP'
             AND WorkGroupId = @WorkgroupID)
BEGIN
   SELECT @IsFSBP = 1;
END 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/d7825/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:19:13.703

我猜你正在寻找

```
Set @BitVariable = count(*)
From TestTable 
WHERE TestCode = 'TestValue' and TestID = @TestID 
```

# powershell - Windows 服务和 Stop-Process cmdlet 的有趣问题

> ID：12698377
> 
> 赞同：2
> 
> 时间：2012-10-02T21:10:10.413
> 
> 标签：powershell, process, windows-services, cmdlet

我们这里有一些自制的 Windows 服务。其中一个是有问题的，因为它不会总是在被问到时停止。它有时会卡在“停止”状态。

使用 powershell 我们正在检索其 PID 并使用 Stop-Process cmdlet 来终止相关进程，但这也不起作用。

相反，我们会收到一条名为服务的消息，该服务`System.ServiceProcess.ServiceController.Name`显然不是我们的服务，但它引用的 PID 是。

以下是我们为停止服务所做的工作。首先，我们使用 Get-Service cmdlet：

```
$ServiceNamePID = Get-Service -ComputerName $Computer | where { ($_.Status -eq 'StopPending' -or $_.Status -eq 'Stopping') -and $_.Name -eq $ServiceName} 
```

然后，使用该 ServiceNamePID，我们获取 PID 并在 Stop-Process cmdlet 中使用它

```
$ServicePID = (get-wmiobject win32_Service -ComputerName $Computer | Where { $_.Name -eq $ServiceNamePID.Name }).ProcessID
Stop-Process $ServicePID -force 
```

那是 Stop-Process cmdlet 大喊大叫的`Cannot find a process with the process identifier XYZ`时候，实际上 PID XYZ*是*服务的正确进程 ID，根据任务管理器。有没有人见过这样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:09:34.660

为了停止远程机器上的进程，请使用远程处理，例如

```
 Invoke-Command -cn $compName {param($pid) Stop-Process -Id $pid -force } -Arg $ServicePID 
```

这需要在远程 PC 上启用远程处理，并且本地帐户在远程 PC 上具有管理员价格。

当然，一旦您使用远程处理，您就可以使用远程处理来执行脚本，例如：

```
Invoke-Command -cn $compName {
    $ServiceName = '...'
    $ServiceNamePID = Get-Service | Where {($_.Status -eq 'StopPending' -or $_.Status -eq 'Stopping') -and $_.Name -eq $ServiceName}
    $ServicePID = (Get-WmiObject Win32_Service | Where {$_.Name -eq $ServiceNamePID.Name}).ProcessID
    Stop-Process $ServicePID -Force
} 
```

# windows - 运行 pip 从 vista 上的 powershell 内部安装 python 包

> ID：12698378
> 
> 赞同：2
> 
> 时间：2012-10-02T21:10:11.857
> 
> 标签：windows, powershell, installation, virtualenv, pip

我试图遵循这个很好的指南 [http://www.tylerbutler.com/2012/05/28/how-to-install-python-pip-and-virtualenv-on-windows-with-powershell/](http://www.tylerbutler.com/2012/05/28/how-to-install-python-pip-and-virtualenv-on-windows-with-powershell/)

但是在尝试安装 virtualenv 时出现以下错误

```
PS C:\> pip install virtualenv
The term 'pip' is not recognized as the name of a cmdlet, function, script file
, or operable program. Check the spelling of the name, or if a path was include
d, verify that the path is correct and try again.
At line:1 char:4
+ pip <<<<  install virtualenv
    + CategoryInfo          : ObjectNotFound: (pip:String) [], CommandNotFound
    Exception
    + FullyQualifiedErrorId : CommandNotFoundException 
```

我通常是 mac 用户，所以我了解如何使用 pip，但不知道为什么这不起作用。对powershell不太好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T21:24:34.577

好的，给文章的作者发了电子邮件，他指出 c:\Python27\Scripts 需要在路径/PS $env:Path 上才能被拾取。

排序后，它会安装得很好。

# qt4 - 知道一个项目是否与父项重叠

> ID：12698379
> 
> 赞同：1
> 
> 时间：2012-10-02T21:10:13.253
> 
> 标签：qt4, qml, qt-quick

我有一个 QML 项目，在某些情况下可能会与父项目重叠并超过其宽度/高度。我怎么知道它是否与父项重叠？我想我应该使用 mapFromItem/mapToItem 之类的东西，但我不知道它是如何工作的

# cocoa - NSScrollView 中的自动布局约束

> ID：12698380
> 
> 赞同：4
> 
> 时间：2012-10-02T21:10:17.173
> 
> 标签：cocoa, nstableview, nsscrollview, nslayoutconstraint

我正在以编程方式在 NSScrollView 内创建一个 NSTableView，但是当我尝试将框架设置为滚动视图时，我遇到了约束错误。

```
Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x107d4ec50 h=--& v=--& V:[NSScrollView:0x10068c570(372.5)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x107d4d020 h=-&- v=-&- V:[NSClipView:0x10068d7f0]-(673)-|   (Names: '|':NSScrollView:0x10068c570 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x107d4cfc0 h=-&- v=-&- V:|-(2)-[NSClipView:0x10068d7f0]   (Names: '|':NSScrollView:0x10068c570 )>"
)

Will attempt to recover by breaking constraint 
<NSAutoresizingMaskLayoutConstraint:0x107d4d020 h=-&- v=-&- V:[NSClipView:0x10068d7f0]-(673)-|   (Names: '|':NSScrollView:0x10068c570 )>

Set the NSUserDefault NSConstraintBasedLayoutVisualizeMutuallyExclusiveConstraints to YES to have -[NSWindow visualizeConstraints:] automatically called when this happens.  And/or, break on objc_exception_throw to catch this in the debugger. 
```

似乎它们是自动创建的。

这是我的创建代码（使用弧）我正在继承 NSView

```
-(void)addColumnsToTable{
    NSTableColumn *col = [[NSTableColumn alloc]initWithIdentifier:@"priority"];
    [col.headerCell setStringValue:@"priority"];
    [col setWidth:10];
    [col setMinWidth:1];
    [col setMaxWidth:10];
    [self.tableView addTableColumn:col];

   // col = [[NSTableColumn alloc]initWithIdentifier:@"name"];
   // [self.tableView addTableColumn:col];   
}

-(void)createTable{
    NSTableView *tableView = [[NSTableView alloc]initWithFrame:NSZeroRect];

    [tableView setDelegate:self];
    [tableView setDataSource:self];

    NSScrollView *scrollView = [[NSScrollView alloc]initWithFrame:self.bounds];
    [scrollView setBorderType:NSGrooveBorder];

    [self addSubview:scrollView];
    [scrollView setDocumentView:tableView];
    [scrollView setHasVerticalScroller:YES];
    [scrollView setAutohidesScrollers:YES];

    self.tableView = tableView;
    self.scrollView = scrollView;

    [self addColumnsToTable];

} 
```

这是它正在破坏的地方：

```
-(void)setFrame:(NSRect)frameRect{
    [super setFrame:frameRect];
    [self.scrollView setFrame:self.bounds];

} 
```

有没有办法关闭这些自动约束？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T21:32:38.583

明白了，问题是正在根据视图的自动调整大小掩码创建自动约束。要停用此行为：

```
[scrollView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

其中 scrollView 是 NSView 的子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T01:01:41.747

在子类的方法中设置`frame`,时，我也遇到了完全相同的问题。将上述设置为 NO 的解决方案消除了异常。但在我的情况下，我有一个动态窗口。事实上，我没有遵循我正在计算和设置的新框架尺寸。`NSScrollView``DrawRect``NSView``TranslatesAutoresizingMaskIntoConstraints``tableview``NSScrollView`

工作了一段时间，我终于想出了正确的解决方案。看来问题不在于`NSScrollView`自动调整大小设置，而是设置`AutoresizesSubviews`我的`NSView`子类是动态自定义视图的正确解决方案。

```
- (void)awakeFromNib
{

[super awakeFromNib];   
[self setAutoresizesSubviews:NO];   // <- Here is the solution

    // …
}

- (void)drawRect:(NSRect)dirtyRect
{

[super drawRect:dirtyRect];

    // From DirtyRect (dimensions of the my subclass NSView)
    // Calculate the rectangle allowable for MyScrollView
    // and setting local NSRect mRect..

    [MyScrollView setFrame:mRect];      // no more ‘exception’ here
} 
```

我还必须以`NSView`编程方式创建其他子类，这也有`NSScrollView`和`frame`设置需求。由于这些对象没有`awakeFromNib`方法……只需将其设置在其他地方……就像在`NSView`子类的 Init 方法中一样。

```
- (id)init:(NSInteger)aSpecialTag
{

[self setAutoresizesSubviews:NO];   // <- Here is the solution

    _mTag = aSpecialTag;

    // …
} 
```

# iphone - MonoTouch - 如何仅在使用 iPad 设备时声明 UIPopoverController？

> ID：12698385
> 
> 赞同：1
> 
> 时间：2012-10-02T21:11:05.800
> 
> 标签：iphone, ipad, xamarin.ios, uipopovercontroller, public

据我阅读文档了解到，UIPopoverControllers 仅在 iPad 上受支持。因此，如果您尝试将变量声明为 UIPopoverController 并在 iPhone 模拟器或 iPhone 上运行应用程序，则会收到如下错误：

> UIPopoverController initWithContentViewController:] 未在 UIUserInterfaceIdiomPad 下运行时调用

所以我有一个我正在尝试的通用单点触控应用程序，当用户使用 iPad 时，我想在其中使用 UIPopoverController，对于 iPhone，我有另一个解决方案。

这就是我目前声明它的方式，但显然在 iPhone 上运行不起作用，并且我收到上述错误消息。

```
public partial class IOPSCalculatorViewController : UIViewController
{

    static bool UserInterfaceIdiomIsPhone {
        get { return UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Phone; }
    }

    static bool UserInterfaceIdiomIsIPAD {
        get { return UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Pad; }
    }

    UIPopoverController DetailViewPopover = new UIPopoverController(new PopoverContentViewController());
} 
```

我怎样才能只声明：

```
UIPopoverController DetailViewPopover = new UIPopoverController(new PopoverContentViewController()); 
```

如果设备是 iPad 的一部分？我需要 UIPopoverController 位于公共部分类中，以便我可以在其他地方公开访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:18:01.130

与其在一行中声明和分配，不如将其拆分为两行。例如

```
UIPopoverController DetailViewPopover = null;

if (IOPSCalculatorViewController.UserInterfaceIdiomIsIPAD) {
    DetailViewPopover = new UIPopoverController (new PopoverContentViewController ());
} 
```

如果`DetailViewPopover`是（公共）字段而不是实例变量，这也将起作用，并且只要`UIPopoverController`不调用构造函数，您就不会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:38:41.460

您需要找出您当前的设备是什么，并为 iphone 和 iPad 编写代码。这是我在我的案例中使用的一段代码。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
     {
        //Do your coding here
     }
     else {
         if(![popoverController isPopoverVisible]){
             contact = [[[ContactViewController alloc] initWithNibName:@"ContactViewController_iPad" bundle:nil] autorelease];
             popoverController = [[[UIPopoverController alloc] initWithContentViewController:contact] retain];
             [popoverController setPopoverContentSize:CGSizeMake(400.0f, 400.0f)];
             [popoverController presentPopoverFromRect:CGRectMake(230, 860, 320.0f, 320.0f) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
             [popoverController release];
         }else{
             [popoverController dismissPopoverAnimated:YES];
         }
     } 
```

希望这会帮助你。快乐编码！！！

# logging - LLinux内核日志

> ID：12698386
> 
> 赞同：1
> 
> 时间：2012-10-02T21:11:13.713
> 
> 标签：logging, linux-kernel, embedded-linux, kernel

我正在运行嵌入式 Linux（Angstrom 发行版，用于 Atmel）。我想在关机期间阅读内核消息日志，这与使用 dmesg 得到的内容相同。基本上，我通过在内核代码中插入 printk() 来探索我遇到的一些问题，现在我想看看它们的输出。

我发现系统启动时日志不会自动启动（我该怎么办？）并且我无法使用 klogd 命令获取任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:59:47.483

如果 klogd 启动得太晚或停止得太早而无法看到您的消息，也许您可​​以尝试一下[Netconsole](http://www.kernel.org/doc/Documentation/networking/netconsole.txt)？

当然，如果您可以通过网络访问您的嵌入式板。这个模块很容易配置，过去我已经成功使用过几次。请注意，如果您希望能够看到在启动过程中很早/很晚发出的消息，则必须在内核中编译它（使用您的以太网驱动程序），而不是作为一个模块。

此外，检查您的默认日志级别是否允许显示您的 printk()（loglevel= 内核引导参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:47:31.273

在这种情况下，可靠的 RS232 串行控制台可能是您的朋友。

除非您已采取措施禁用它，否则内核日志消息几乎肯定会在那里找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T00:41:56.637

不同的发行版可能会将 /proc/kmsg 的输出重定向到他们喜欢的任何物理日志文件或虚拟设备 (/dev/xxx)。但是“/proc/kmsg”是内核日志的原始最终来源，因为内核实际上在 fs/proc/kmsg.c 中实现了它的环形缓冲区操作：

```
static const struct file_operations proc_kmsg_operations = {
        .read           = kmsg_read,
        .poll           = kmsg_poll,
        .open           = kmsg_open,
        .release        = kmsg_release,
        .llseek         = generic_file_llseek,
}; 
```

这里有更多信息：

[如何在 linux 内核空间中读取环形缓冲区？](https://stackoverflow.com/questions/9533708/how-to-read-ring-buffer-within-linux-kernel-space?rq=1)

所以你看到的输出是这样的：

须藤尾巴 -f /proc/kmsg

而且您只能看到发出此命令后生成的所有消息 - 环形缓冲区中的所有先前消息都不会被打印出来。因此要查看物理文件输出，您可以搜索“/proc/kmsg”的用户：

sudo lsof |grep proc.kmsg

我的机器表明了这一点：

```
rsyslogd  1743               syslog    3r      REG                0,3          0 4026532041 /proc/kmsg
in:imuxso 1743 1755          syslog    3r      REG                0,3          0 4026532041 /proc/kmsg
in:imklog 1743 1756          syslog    3r      REG                0,3          0 4026532041 /proc/kmsg
rs:main   1743 1757          syslog    3r      REG                0,3          0 4026532041 /proc/kmsg 
```

所以现在是pid 1743，让我们看看1743打开的文件fd：

```
sudo ls -al /proc/1743/fd

lrwx------ 1 root   root   64 Dec 11 08:36 0 -> socket:[14472]
l-wx------ 1 root   root   64 Dec 11 08:36 1 -> /var/log/syslog
l-wx------ 1 root   root   64 Dec 11 08:36 2 -> /var/log/kern.log
lr-x------ 1 root   root   64 Dec 11 08:36 3 -> /proc/kmsg
l-wx------ 1 root   root   64 Dec 11 08:36 4 -> /var/log/auth.log 
```

就这样，pid 1743 是 rsyslogd，它将 /proc/kmsg 的输出重定向到 /var/log/syslog 和 /var/log/kern.log 等文件。

# sql-server - SQL Server OUTPUT 子句

> ID：12698388
> 
> 赞同：6
> 
> 时间：2012-10-02T21:11:16.210
> 
> 标签：sql-server, tsql, scope-identity, output-clause

我有点不明白为什么我似乎无法通过下面的语句获得插入行的“新身份”。`SCOPE_IDENTITY()`只返回空值。

```
declare @WorkRequestQueueID int
declare @LastException nvarchar(MAX)
set @WorkRequestQueueID = 1
set @LastException = 'test'

set nocount off

DELETE dbo.WorkRequestQueue
OUTPUT
        DELETED.MessageEnvelope,
        DELETED.Attempts,
        @LastException,
        GetUtcdate(), -- WorkItemPoisened datetime
        DELETED.WorkItemReceived_UTC
    INTO dbo.FaildMessages
FROM dbo.WorkRequestQueue
WHERE
    WorkRequestQueue.ID = @WorkRequestQueueID

IF @@ROWCOUNT = 0 
  RAISERROR ('Record not found', 16, 1) 

SELECT Cast(SCOPE_IDENTITY() as int) 
```

任何帮助将不胜感激。

现在我使用这样的解决方法。

```
declare     @WorkRequestQueueID int
declare @LastException nvarchar(MAX)
set @WorkRequestQueueID = 7
set @LastException = 'test'

set nocount on
set xact_abort on 

DECLARE @Failed TABLE 
(
    MessageEnvelope xml, 
    Attempts smallint,
    LastException nvarchar(max),
    WorkItemPoisened_UTC datetime,
    WorkItemReceived_UTC datetime
)

BEGIN TRAN

DELETE dbo.WorkRequestQueue
OUTPUT
    DELETED.MessageEnvelope,
    DELETED.Attempts,
    @LastException,
    GetUtcdate(), -- WorkItemPoisened datetime
    DELETED.WorkItemReceived_UTC

INTO 
    @Failed
FROM 
    dbo.WorkRequestQueue
WHERE
    WorkRequestQueue.ID = @WorkRequestQueueID

IF @@ROWCOUNT = 0 BEGIN  
    RAISERROR ('Record not found', 16, 1) 
    Rollback
END ELSE BEGIN
    insert into dbo.FaildMessages select * from @Failed
    COMMIT TRAN
    SELECT Cast(SCOPE_IDENTITY() as int) 
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:22:37.260

**2013 年 2 月编辑**

[@MartinSmith 提醒我们，微软不想修复](https://connect.microsoft.com/SQLServer/feedback/details/765809/odd-behaviour-of-scope-identity-with-insert-into)这个错误。

> “Microsoft 于 2013 年 2 月 27 日下午 2:18 发布 您好 Martin，我们调查了这个问题，发现改变行为并不是一件容易的事。基本上需要在 INSERT 和 OUTPUT 时重新定义一些行为INTO 目标具有标识列。鉴于问题的性质和不常见的情况，我们决定不解决该问题。-- Umachandar，SQL 可编程性团队“

**2012 年 10 月编辑**

**这是由一个错误引起的：**

**测试错误：**

[引用 OUTPUT 子句文档](http://msdn.microsoft.com/en-us/library/ms177564.aspx)：

> @@IDENTITY、SCOPE_IDENTITY 和 IDENT_CURRENT 返回仅由嵌套 DML 语句生成的标识值，而不是由外部 INSERT 语句生成的标识值。

经过测试，似乎 scope_identity() 仅在外部操作是在具有标识列的表中插入时才有效：

测试 1：删除

```
create table #t ( a char(1) );
create table #d ( a char(1), i int identity );

insert into #t
values ('a'),('b'),('c');

delete #t
output deleted.a into #d;

select SCOPE_IDENTITY(), * from #d;

     a i 
---- - - 
null a 1 
null b 2 
null c 3 
```

测试 2：[以身份插入外部表](https://data.stackexchange.com/stackoverflow/query/81574?opt.textResults=true)

```
create table #t ( a char(1), i int identity );
create table #d ( a char(1), i int identity );

insert into #t
values  ('x'),('x'),('x');

insert into #t
output inserted.a into #d
values  ('a'),('b');

select scope_identity(), * from #d;

  a i 
- - - 
2 a 1 
2 b 2 
```

测试 3：在没有身份的情况下插入外部表

```
create table #t ( a char(1) );
create table #d ( a char(1), i int identity );

insert into #t
values  ('x'),('x'),('x');

insert into #t
output inserted.a into #d
values  ('a'),('b');

select scope_identity(), * from #d;

     a i 
---- - - 
null a 1 
null b 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:04:10.443

您可能会尝试为您的`output`子句使用表变量，从而允许您显式插入`FaildMessages`：

```
declare     @WorkRequestQueueID int
declare @LastException nvarchar(MAX)
set @WorkRequestQueueID = 1
set @LastException = 'test'

set nocount off

    -- Declare a table variable to capture output
    DECLARE @output TABLE (
        MessageEnvelope VARCHAR(50),    -- Guessing at datatypes
        Attempts INT,                   -- Guessing at datatypes
        WorkItemReceived_UTC DATETIME   -- Guessing at datatypes
    )

    -- Run the deletion with output
    DELETE dbo.WorkRequestQueue
    OUTPUT
        DELETED.MessageEnvelope,
        DELETED.Attempts,
        DELETED.WorkItemReceived_UTC
    -- Use the table var
    INTO @output
    FROM dbo.WorkRequestQueue
    WHERE
        WorkRequestQueue.ID = @WorkRequestQueueID

    -- Explicitly insert
    INSERT
    INTO dbo.FaildMessages
    SELECT
        MessageEnvelope,
        Attempts,
        @LastException,
        GetUtcdate(), -- WorkItemPoisened datetime
        WorkItemReceived_UTC
    FROM @output

IF @@ROWCOUNT = 0 
  RAISERROR ('Record not found', 16, 1)

SELECT Cast(SCOPE_IDENTITY() as int) 
```

# wamp - 我可以在 WAMP 的哪个位置激活 libcurl？

> ID：12698391
> 
> 赞同：0
> 
> 时间：2012-10-02T21:11:37.663
> 
> 标签：wamp, libcurl

当我尝试激活此插件时：

[http://wordpress.org/extend/plugins/video-thumbnails/](http://wordpress.org/extend/plugins/video-thumbnails/)

在我尝试激活它后出现此消息：

> 抱歉，这个插件需要在你的服务器上激活 libcurl。

所以我的问题是我可以在 WAMP 的哪个位置激活这个插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:14:09.717

当然可以，看看这个网站：http: [//joshuamcginnis.com/2008/09/16/how-to-enable-libcurl-in-wamp/](http://joshuamcginnis.com/2008/09/16/how-to-enable-libcurl-in-wamp/)

# javascript - 使用动态网站操作

> ID：12698394
> 
> 赞同：1
> 
> 时间：2012-10-02T21:11:47.803
> 
> 标签：javascript, html, vba

我正在尝试确定是否可以最好通过 vba（访问）或我可以集中管理的任何其他方式更改网站的功能。我想要实现的是，根据权限，我希望用户登录网站，然后动态更改网站以阻止用户使用网站的正常功能。例如，一些用户可以访问提交按钮，而其他用户则不能。

我已经看到您可以使用 VBA 来解析网站和自动登录。我只是不确定它是否能够像greasemonkey 那样执行任何本地脚本。

也许我看错了，可以在防火墙级别实现这一点，而不是运行网站脚本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:15:05.853

您不应使用 JavaScript 等客户端技术来管理网站权限。用户可以轻松地禁用 JavaScript/VBScript 或篡改页面。

最好的方法是通过从服务器端脚本语言（如 ASP.Net 或 PHP）发出 HTML 来管理权限。

ASP.Net 具有内置的、通常足够的成员资格、角色和权限支持，可以满足这种需要。

[http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx)

如果出于某种原因这不是一个选项，并且您可以接受有人篡改您设置的权限的风险，您当然可以使用[jQuery](http://jquery.com/)之类的东西来隐藏用户不应访问的 HTML 文档的部分。你可以在没有 jQuery 的情况下使用 JavaScript 来完成同样的事情，但我建议使用 jQuery，因为它可以抽象出许多跨浏览器问题。

如果你这样做，默认隐藏所有内容，然后根据权限有选择地显示。这样，仅禁用 JavaScript 的最简单方法不会显示任何特殊内容（尽管它仍然很容易破解）。

# ruby-on-rails - 在 Rails 应用程序中使用 Devise 有条件地退出

> ID：12698397
> 
> 赞同：3
> 
> 时间：2012-10-02T21:12:07.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, devise

我正在创建一个 Rails 应用程序，用户可以在其中登录并查看各个页面。有些是私人的，有些是公开的。如果用户在查看私人页面时退出，他应该被重定向到 root_path。如果用户在查看公共页面时退出，他应该被重定向到相同的页面（现在他退出后的呈现方式会略有不同）。

我想通过我的 application_controller 中的 after_sign_out_path_for(resource_or_scope) 方法中的条件语句来执行此操作。问题是通常从 pages_controller 文件访问的 @page 变量在此范围内为 nil 和/或不可用。在会话被销毁后，从不同的控制器访问此变量（最后加载的页面）的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:25:31.147

您可以跟踪会话变量中的最后一页，并在过滤器之前添加以使其在页面控制器中保持最新。

```
session[:last_page_visited] = @page 
```

您还可以访问它，`request.referrer`这将为您提供他们退出的页面的 URL。不确定您是否可以从中确定私有/公共，也许使用正则表达式？

# telerik - 将网格绑定到下拉列表

> ID：12698400
> 
> 赞同：0
> 
> 时间：2012-10-02T21:12:21.560
> 
> 标签：telerik, telerik-grid, telerik-mvc

我有一个要根据下拉列表的结果显示的网格。我似乎无法将值发送到 select("controller", "action", data) 方法。我怎样才能做到这一点？我无法让我的 javascript 来处理它。

这是下拉列表

```
 <select id="workoutType" onchange="changed(value)">
                    @{ foreach (var type in Model.WorkoutTypes)
                      { 
                        <option value="@type"> @type </option>
                      }
                    }
                    </select> 
```

这是网格

```
 @(Html.Telerik().Grid(Model.Approvers)
                            .Name("Orders")
                            .DataBinding(dataBinding => dataBinding
                                //Ajax binding
                                  .Ajax()
                                //The action method which will return JSON
                                      .Select("__AjaxBinding", "AssetResearch", new { workoutType = ViewData["dropDownValue"] })
                            )
                            .Columns(columns =>
                                {
                                    columns.Bound(o => o.InvestorName).Width(125);
                                    columns.Bound(o => o.ApproverType).Title("Type").Width(100);
                                    columns.Bound(o => o.Email).Title("E-mail Address");
                                })
                            .ClientEvents(events => events
                                .OnDataBinding("onDataBinding")
                                )
                            .Pageable()
                            .Sortable()
                    ) 
```

我尝试使用 Viewbag，但遗憾的是我似乎无法成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:10:34.760

```
$(document).ready(function() {
    $('#workoutType').change(function(){
    //bind your data here
    var data = $(this).value;
    // pass into your C# stuff here
    });
}); 
```

像这样的东西会起作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:20:38.543

这不是实现它的正确方法，因为无法在服务器上设置 RouteValue（当您渲染网格时）

实现它的一种方法是使用Phonixblade9 提到的DropDOwnList 的更改事件来使Grid 执行请求并从服务器获取其数据。这可以通过 Grid 的**ajaxRequest**方法来实现。

这就是我的意思：

```
$(document).ready(function() {
    $('#workoutType').change(function(){

        var data = $(this).value;

        var gridClientObject = $('#Orders').data().tGrid;
        gridClientObject.ajaxRequest({workoutType :data});// do not forget to name the parameter in the action again method again 'workoutType'
    });
}); 
```

# c# - 从后面的代码调用 javascript 函数

> ID：12698402
> 
> 赞同：0
> 
> 时间：2012-10-02T21:12:38.327
> 
> 标签：c#, javascript, asp.net

我正在尝试从按钮单击事件后面的代码中调用 javascript 函数。下面是我的 javascript 代码。

```
 ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", "javascript:clearBox();", true); 
```

函数是

```
<script type="text/javascript">

function clearBox() {

    alert("Test");

}
</script> 
```

我收到错误“预期对象”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:15:47.693

您应该使用按钮的 OnClientClick 属性：

```
<asp:Button runat="server" OnClientClick="clearBox()" /> 
```

`RegisterClientScriptBlock`只会在页面上放置一段代码：

```
<script type="text/javascript">
      javascript:clearBox();
</script> 
```

这将不起作用，因为它不是有效代码（因为`javascript:`它用于锚点从 href: 运行 js `<a href="javascript:some_code_here()"></a>`）

如果您愿意，另一个选择`RegisterClientScriptBlock`是使用 addEventListener 将 onclick 处理程序分配给您的按钮。[这](http://snipplr.com/view/561/)是代码片段（跨浏览器和纯 JS）。它可以这样使用：

```
 ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "strScript", "addListener('"+button.ClientID+"', 'click', clearBox);", true); 
```

但最好替换`RegisterClientScriptBlock`为`[RegisterStartupScript](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)` 在所有 HTML 加载之前可能会调用第一个并且可能还没有按钮的地方。

**Upd** 好吧，感谢[hvd](https://stackoverflow.com/users/743382/hvd)。他提醒我JS中有[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)，实际上`javascript:clearBox()`是一个有效的代码，但它不会做OP想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:21:36.463

使用此代码：

```
Page.ClientScript.RegisterStartupScript(this.GetType(),  "Error", "clearBox();", true); 
```

# mongodb - MongoDB pymongo update() 只是创建一个新记录而不是更新

> ID：12698405
> 
> 赞同：1
> 
> 时间：2012-10-02T21:12:55.130
> 
> 标签：mongodb, pymongo

创建一个新文档

> ```
> >>>Categories.insert({'test':'test'})
> ObjectId('506b563df49a007f73000001') 
> ```

是的，创建好了。

> ```
> >>> Categories.find_one({'test':'test'})
> {u'test': u'test', u'_id': ObjectId('506b4149f49a007cd0000000')} 
> ```

给它一个新属性“newAttr”，值为“hello”

> ```
> >>> Categories.update({'_id':Categories.find_one({'test':'test'})['_id']},{'newAttr':'hello'}) 
> ```

查找相同的文档

> ```
> >>> Categories.find_one({'test':'test'})
> {u'test': u'test', u'_id': ObjectId('506b563df49a007f73000001')} 
> ```

还没更新？？

搜索包含新属性的内容：

> ```
> >>> Categories.find_one({'newAttr':'hello'})
> {u'newAttr': u'hello', u'_id': ObjectId('506b4149f49a007cd0000000')} 
> ```

它创建了一个单独的文档而不是更新以前的文档？？

知道如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:39:09.690

设置新字段时，我得到的和你不一样，但我使用的是这种语法：

`cat.update({'_id':cat.find_one({'test':'test'})['_id']},{'$set':{'newattr':'hello'}})`

有关 $set 的说明，请参见[此处](http://api.mongodb.org/python/current/api/pymongo/collection.html)。

```
>>> cat.find_one({'test':'test'})
{u'newattr': u'hello', u'test': u'test', u'_id': ObjectId('506b5d07594bc07d90000000')} 
```

# vba - wdWrapBehind in word (2003) vba

> ID：12698407
> 
> 赞同：1
> 
> 时间：2012-10-02T21:13:01.923
> 
> 标签：vba, ms-word

我在使用 VBA 让我的图片在 Word 2003 中的文本后面换行时遇到问题。我可以很好地使用所有其他包装选项，但是当我尝试使用 wdWrapBehind 时，出现以下错误。

“编译错误：未定义变量”

我通过谷歌到处打猎，但没有运气。

代码：

```
 Dim shape1 As shape
      Dim imagePath1 As String

      imagePath1 = "C:\image.jpg"

      Set shape1 = ActiveDocument.Shapes.AddPicture(imagePath1)

      With shape1
        .ScaleHeight 1, msoTrue
        .ScaleWidth 1, msoCTrue
        .LockAspectRatio = msoTrue
        .WrapFormat.Type = wdWrapBehind
        .RelativeHorizontalPosition = wdRelativeHorizontalPositionPage
        .RelativeVerticalPosition = wdRelativeVerticalPositionPage
        .Left = InchesToPoints(0.433)
        .Top = InchesToPoints(0.413)
      End With 
```

任何帮助表示赞赏！

干杯，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:41:02.450

通过添加这 4 行而不是 wdWrapBehind 设法使其工作。

```
 .WrapFormat.AllowOverlap = True
        .WrapFormat.Side = wdWrapBoth
        .WrapFormat.Type = 3
        .ZOrder 5 
```

完整代码：

```
 Dim shape1 As shape         
    Dim imagePath1 As String            
    imagePath1 = "C:\image.jpg"            
    Set shape1 = ActiveDocument.Shapes.AddPicture(imagePath1)   

    With shape1
        .ScaleHeight 1, msoTrue
        .ScaleWidth 1, msoCTrue
        .WrapFormat.AllowOverlap = True
        .WrapFormat.Side = wdWrapBoth
        .LockAspectRatio = msoTrue
        .WrapFormat.Type = 3
        .ZOrder 5
        .RelativeHorizontalPosition = wdRelativeHorizontalPositionPage
        .RelativeVerticalPosition = wdRelativeVerticalPositionPage
        .Left = InchesToPoints(6.889)
        .Top = InchesToPoints(0.374)
    End With 
```

# java - Java 通过引用传递和编译器优化

> ID：12698414
> 
> 赞同：0
> 
> 时间：2012-10-02T21:13:33.110
> 
> 标签：java, function, reference, parameter-passing

在函数`fermatFactorization()`中，`a`并且`b`作为参考参数传递，因为我使用的是`Long`Class。但是，在`testFermatFactorization()`我传递`a`and `b`to的函数中， and`fermatFactorization()`的值不会改变，因此会打印. 我通过打印 out和in对此进行了测试，得到了我期望的输出。`a``b``testFermatFactorization()``(0)(0)``a``b``fermatFactorization()`

我在看什么？编译器是否可以更改`a`，`b`因为`fermatFactorization()`它们只是被分配给？（怀疑）

```
public static void fermatFactorization(Long n, Long a, Long b)   
//PRE:  n is the integer to be factored
//POST: a and b will be the factors of n
{
    Long v = 1L;
    Long x = ((Double)Math.ceil(Math.sqrt(n))).longValue();
    //System.out.println("x: " + x);
    Long u = 2*x + 1;
    Long r = x*x - n;

    while(r != 0)                 //we are looking for the condition x^2 - y^2 - n to be zero
    {
        while(r>0)
        {
            r = r - v;            //update our condition
            v = v + 2;            //v keeps track of (y+1)^2 - y^2 = 2y+1, increase the "y"
        }
        while(r<0)
        {
            r = r + u;
            u = u + 2;            //keeps track of (x+1)^2 - x^2 = 2x+1, increases the "x"
        }
    }

    a = (u + v - 2)/2;            //remember what u and v equal; --> (2x+1 + 2y+1 - 2)/2 = x+y
    b = (u - v)/2;                //                             --> (2x+1 -(2y+1))/2 = x-y
}

public static void testFermatFactorization(Long number)
{
    Long a = 0L;
    Long b = 0L;
    fermatFactorization(number, a, b);
    System.out.printf("Fermat Factorization(%d) = (%d)(%d)\n", number, a, b);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T21:15:06.770

Java 是按值传递的。如果为参数分配一个新值，它不会影响调用者方法中的值。

你有两个选择：

*   使您的方法返回`a`-`b`在一个`int[]`或使用具有两个字段的单独`FactorizationRezult`类中。这样，您将在被调用方法中声明`a`和`b`作为局部变量，而不是将它们作为参数。这是最可取的方法。

*   另一种方法是使用 a`MutableLong`并使用`setValue(..)`方法 - 这样更改将影响调用方方法中的对象。这是不太可取的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:17:13.683

a 和 b 是引用，而不是“引用参数”，它们是按值传递的。这些值在被调用的方法中发生了更改，但这对调用者没有影响。

Java 中没有“按引用传递”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:19:46.540

在 Java 中，一切都是按值传递的。没有引用调用。即使你传递一个对象，它的引用也是按值传递的。因此，当您传递一个`Long`对象时，您只是通过值传递对它的引用。

`Long`，就像其他原始类型包装器一样，是“不可变的”。您无法更改其内部的 long 值。因此，如果您不想更改设计，则必须自己（或使用`MutableLong`）长时间制作一个可变包装器并将其传递。如果您问我，更改您的设计以返回结果而不是更改方法参数是一种更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:15:17.273

使用 = 运算符清除内存中存储局部变量的位置并替换它。这*不会*影响原始变量。按值传递仅允许您修改对象中的数据（例如修改其中的字段），而不是实际引用。

# google-chrome - Chrome 忽略静态宽度并改为适合内容，适用于所有其他浏览器

> ID：12698415
> 
> 赞同：2
> 
> 时间：2012-10-02T21:13:37.407
> 
> 标签：google-chrome, css

我遇到的问题可以在这里找到：

[http://jsfiddle.net/boblauer/5uVrK/](http://jsfiddle.net/boblauer/5uVrK/)

如果您在 Chrome 中查看它，您会注意到当您向右滚动时，它会立即停在最后一个绿色框的右边缘。但是，在 FF 和 IE 中（没有尝试过其他），它会正确地滚动到最后一个绿色框之外。

由于 .lane-container 的宽度为 2000 像素，而盒子的宽度应为 1700 像素，因此最后一个盒子的右侧应该多出 300 像素，但在 Chrome 中没有。

关于为什么 Chrome 的行为与其他人不同，以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:18:49.387

将显示设置为 inline-block 而不是 float: left 为我解决了这个问题。浮动块级元素将它们从 dom 流中取出。这并不能真正解释为什么这不起作用，但这是一种解决方法。我总是更喜欢内联块而不是左浮动。

**编辑**

经过一些 jsfiddling 之后，似乎 chrome 没有显示容器 div 的全宽，因为它是空的。一旦您在车道容器周围添加边框，它就会按预期工作，但是，由于您将内部 div 向左浮动，它们不在 dom 浮动中，并且车道容器的高度似乎为 0。

# cakephp - cakephp 调试消息仍然显示，使用 ajax 和 json 将调试设置为 0

> ID：12698421
> 
> 赞同：0
> 
> 时间：2012-10-02T21:13:45.510
> 
> 标签：cakephp

cakephp 调试消息仍然显示，使用 ajax 和 json 将调试设置为 0。我无法将 autorender 设置为 false，因为我需要将标头设置为发送 json。

json.ctp

```
<?php
header("Pragma: no-cache");
header("Cache-Control: no-store, no-cache, max-age=0, must-revalidate");
header('Content-Type: application/json');
header("X-JSON: ".$json);
echo $json;
?> 
```

控制器

```
function index(){

        if (!empty($this->data)){

            // Handle all JSON requests here
            if ($this->RequestHandler->isAjax()){

                $domain = $this->data['domain'];

                        $results = $this->Domain->google_api($domain,$seo_action);

                $json = json_encode($results);

                $this->set(compact('json'));

                $this->render('json','ajax');

            } else {

                $domain = $this->data['Results']['domain'];

            }

        }

        $this->set(compact('domain'));

        $this->layout = 'front_end';
    } 
```

app_controller

```
function beforeFilter(){

        if ($this->RequestHandler->isAjax()) Configure::write('debug', 0);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:38:45.353

您可以将`Configure::write('debug', 0);`as 第一行放到您的`json.ctp`. 这样它将：

```
<?php
  Configure::write('debug', 0);
  header("Pragma: no-cache");
  header("Cache-Control: no-store, no-cache, max-age=0, must-revalidate");
  header('Content-Type: application/json');
  header("X-JSON: ".$json);
  echo $json;
?> 
```

# algorithm - 在没有额外存储的情况下在二叉搜索树中查找第 k 个最大路径和

> ID：12698422
> 
> 赞同：0
> 
> 时间：2012-10-02T21:13:46.710
> 
> 标签：algorithm, binary-search-tree

有没有办法在不使用任何其他存储（如数组）的情况下在二叉搜索树中找到所有可能的完整路径和中的第 k 个最大的？最初我认为，如果我在增加指针的同时继续从右侧找到路径的总和，每个新的总和都是最小值，而前一个总和（最初总和是无限的），当计数达到 时就会中断`k`。但是我刚刚发现，虽然最大叶值自然地从右到左排序，但总和不必如此。所以这个方法行不通。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:17:24.043

如果您可以计算 k 最小的，那么您可以使用相同的算法计算 k 最大的。您需要做的就是从右到左而不是从左到右做事。

# c# - CollectionViewSource.View 在第一个有效源之前为空；需要空视图

> ID：12698426
> 
> 赞同：1
> 
> 时间：2012-10-02T21:13:51.637
> 
> 标签：c#, wpf, binding

我的代码如下所示：

```
var telemetry = new CollectionViewSource();
telemetry.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending));
SetTelemetryFilters(telemetry);

var binding = new Binding("Asset.TelemetryDefinitions.Values");
binding.Source = this;
var expression = BindingOperations.SetBinding(telemetry, CollectionViewSource.SourceProperty, binding); 
```

在这段代码之后不久，我正在设置一个`ComboBox.ItemsSource = telemetry.View`. 我需要视图（在多个地方），因为它实现`IEnumerable`了 CollectionViewSource 没有。软件首次运行时，该`Asset`属性为空。这是有问题的，因为这会导致 telemetry.View 返回 null，这反过来意味着我的 ItemsSource 被设置为 null。在绑定操作向 CollectionViewSource.Source 返回 null 的情况下，是否有某种方法可以使 CollectionViewSource.View 返回一个空视图？（而且我假设一旦 CollectionViewSource.View 返回非 null 它总是返回相同的实例？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:57:32.783

我认为通常你会使用`ItemsSource="{Binding Source={StaticResource myCollectionViewSource}}"`而不是将视图直接分配给 ItemsSource。这会处理`CollectionViewSource.View`从 null 到某事的变化......您是否有理由不在 XAML 中设置这一切？

# android - 从 Spotify Intent 开始歌曲

> ID：12698428
> 
> 赞同：13
> 
> 时间：2012-10-02T21:13:56.397
> 
> 标签：android, android-intent, spotify

无论如何要从它的 URI 开始一个 Spotify Track 吗？

我尝试了以下方法，但它们都不起作用。当 Spotify 打开时，它始终位于播放列表页面，而不是曲目的播放器。

```
String spotifyTrackURI = "spotify:track:1cC9YJ8sQjC0T5H1fXMUT2";
Intent launchIntent = context.getPackageManager().getLaunchIntentForPackage("com.spotify.mobile.android.ui");

// I've tried with Intent#putExtra()..
launchIntent.putExtra( SearchManager.QUERY, spotifyTrackURI );
// or with setData
launchIntent.setData(Uri.parse(spotifyTrackURI))

context.startActivity(launchIntent); 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T15:39:31.687

在 Freenode (irc) 的 #spotify 频道上找到了答案。感谢大家！

我把它放在这里让其他人知道：

```
// right click on a track in Spotify to get the URI, or use the Web API.
String uri = "spotify:track:<spotify uri>"; 
Intent launcher = new Intent( Intent.ACTION_VIEW, Uri.parse(uri) );
startActivity(launcher); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:22:45.810

第一个是旧的 Spotify 版本。对于新版本，您可以使用第二个。

通过这种方式，它将首先尝试旧版本，如果它因异常而失败，它会尝试第二个:)

```
try {
                final Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.setAction(MediaStore.INTENT_ACTION_MEDIA_PLAY_FROM_SEARCH);
                intent.setComponent(new ComponentName("com.spotify.mobile.android.ui", "com.spotify.mobile.android.ui.Launcher"));
                intent.putExtra(SearchManager.QUERY, artistName + " " + trackName );
                context.startActivity(intent);
            } catch ( ActivityNotFoundException e ) {
                final Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.setAction(MediaStore.INTENT_ACTION_MEDIA_PLAY_FROM_SEARCH);
                intent.setComponent(new ComponentName("com.spotify.mobile.android.ui", "com.spotify.mobile.android.ui.activity.MainActivity"));
                intent.putExtra(SearchManager.QUERY, artistName + " " + trackName );
                context.startActivity(intent);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T19:35:34.383

如果您在 Spotify 应用程序上获得艺术家的播放列表。您需要开始遵循意图。您不需要打包 Spotify 的名称或活动。

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("spotify:artist:" + "ARTIST SPOTIFY LINK"));
                startActivity(intent); 
```

# c++ - 提升斐波那契堆减少操作

> ID：12698431
> 
> 赞同：4
> 
> 时间：2012-10-02T21:14:31.330
> 
> 标签：c++, boost, heap, fibonacci-heap

新的“堆”提升库包括一个斐波那契堆。每个实现的复杂性可以在这里看到：http: [//www.boost.org/doc/libs/1_51_0/doc/html/heap/data_structures.html](http://www.boost.org/doc/libs/1_51_0/doc/html/heap/data_structures.html)。

我的问题是：为什么斐波那契堆减少操作是 O(log(N))，而增加操作是 O(1)？

我想尝试在 Dijkstra 算法中使用斐波那契堆，这在很大程度上依赖于快速减少操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T19:06:24.987

根据[http://www.boost.org/doc/libs/1_51_0/doc/html/heap/concepts.html](http://www.boost.org/doc/libs/1_51_0/doc/html/heap/concepts.html)

> boost.heap 将优先级队列实现为最大堆以与 STL 堆函数保持一致。这与使用最小堆的典型教科书设计形成对比。

教科书/维基百科斐波那契堆具有最高优先级元素和最低值，即最小堆（例如“1”优先级高于“2”）。STL 和 Boost（为了与 STL 保持一致）颠倒了定义，以便最高优先级具有最高值，也就是最大堆（即“2”优先级高于“1”）。

从本质上讲，它的意思是，`decrease`并且`increase`在教科书和 Boost 之间具有相反的含义。

如果您想获得一个最小堆（如教科书的定义），您必须首先`boost::heap::compare`为您定义一个适当的函子`fibonacci_heap`（参见此处的示例：[在 boost 中为斐波那契堆定义比较函数](https://stackoverflow.com/questions/16705894/defining-compare-function-for-fibonacci-heap-in-boost)`increase`），然后在您减少与相关联的值时调用一个堆元素（因此增加了优先级），反之亦然。

# matlab - Matlab - 如何在庞大的数据集上计算 PCA

> ID：12698433
> 
> 赞同：5
> 
> 时间：2012-10-02T21:14:52.670
> 
> 标签：matlab, pca

> **可能重复：**
> [MATLAB 内存不足，但不应如此](https://stackoverflow.com/questions/3181593/matlab-is-running-out-of-memory-but-it-should-not-be)

我想对大量数据点进行 PCA 分析。更具体地说，我知道数据点的数量和特征的数量`size(dataPoints) = [329150 132]`在哪里。`328150``132`

我想提取特征向量及其相应的特征值，以便我可以执行 PCA 重建。

但是，当我使用该`princomp`功能时（即`[eigenVectors projectedData eigenValues] = princomp(dataPoints);`我收到以下错误：

```
>> [eigenVectors projectedData eigenValues] = princomp(pointsData);
Error using svd
Out of memory. Type HELP MEMORY for your options.

Error in princomp (line 86)
[U,sigma,coeff] = svd(x0,econFlag); % put in 1/sqrt(n-1) later 
```

但是，如果我使用较小的数据集，我没有问题。

如何在 Matlab 中对我的整个数据集执行 PCA？有人遇到过这个问题吗？

**编辑**：

我已经修改了`princomp`函数并尝试使用`svds`而不是`svd`，但是，我得到了几乎相同的错误。我已经放弃了下面的错误：

```
Error using horzcat
Out of memory. Type HELP MEMORY for your options.

Error in svds (line 65)
B = [sparse(m,m) A; A' sparse(n,n)];

Error in princomp (line 86)
[U,sigma,coeff] = svds(x0,econFlag); % put in 1/sqrt(n-1) later 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:36:35.850

**基于特征分解的解**

`X'X`正如@david 所说，您可以首先计算 PCA 。具体来说，请参见下面的脚本：

```
sz = [329150 132];
X = rand(sz);

[V D] = eig(X.' * X); 
```

实际上，`V`保存正确的奇异向量，如果将数据向量成行放置，它会保存主向量。特征值 ,`D`是每个方向之间的方差。作为标准差的奇异向量被计算为方差的平方根：

```
S = sqrt(D); 
```

然后，`U`使用公式 计算左奇异向量`X = USV'`。请注意，`U`如果您的数据向量在列中，则指的是主成分。

```
U = X*V*S^(-1); 
```

让我们重构原始数据矩阵，看看 L2 重构误差：

```
X2 = U*S*V';
L2ReconstructionError = norm(X(:)-X2(:)) 
```

它几乎为零：

```
L2ReconstructionError =
  6.5143e-012 
```

如果您的数据向量在列中，并且您想将数据转换为特征空间系数，您应该这样做`U.'*X`。

在我的中等 64 位桌面中，此代码段大约需要 3 秒。

**基于随机 PCA 的解决方案**

或者，您可以使用基于随机 PCA 的更快的近似方法。请[在 Cross Validated 中查看我的答案](https://stats.stackexchange.com/a/11934/5025)。您可以直接计算`fsvd`和获取`U`and`V`而不是使用`eig`.

如果数据量太大，您可以使用随机 PCA。但是，我认为以前的方式足以满足您给出的尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:18:41.470

我的猜测是你有一个庞大的数据集。您不需要所有的 svd 系数。在这种情况下，使用`svds`代替`svd`：

直接取自 Matlab 帮助：

```
 s = svds(A,k) computes the k largest singular values and associated singular vectors of matrix A. 
```

从你的问题，我知道你不`svd`直接打电话。但是您不妨看看`princomp`（它是可编辑的！）并更改调用它的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:26:16.423

您可能需要在计算中以某种方式计算**n x n**矩阵，也就是说：

```
329150 * 329150 * 8btyes ~ 866GB` 
```

的空间，这解释了为什么你会得到一个内存错误。似乎有一种计算 pca 的有效方法`princomp(X, 'econ')`，我建议您尝试一下。

更多关于这个在[stackoverflow](https://stackoverflow.com/questions/3181593/matlab-is-running-out-of-memory-but-it-should-not-be?rq=1)和[mathworks](http://www.mathworks.com/help/stats/princomp.html?nocookie=true) ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:44:15.937

手动计算 X'X (132x132) 和 svd。或者找到 NIPALS 脚本。

# android - 触摸区域和屏幕触摸的难度

> ID：12698434
> 
> 赞同：0
> 
> 时间：2012-10-02T21:14:55.880
> 
> 标签：android, andengine

我在我的简单游戏中遇到了问题。

我使用屏幕触摸来移动播放器，并且我有一个用于触发的区域触摸按钮。问题是，如果我在移动，我就无法开火。为什么？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:58:30.210

您是否在 EngineOption 中启用了多点触控功能？

```
engineOptions.getTouchOptions().setNeedsMultiTouch(true); 
```

# css - HTML5 视频在 Opera 和 Firefox 中不起作用

> ID：12698435
> 
> 赞同：2
> 
> 时间：2012-10-02T21:15:04.887
> 
> 标签：css, html, video

我在我的网站上放了一些 HTML5 视频，只是注意到它们不能在 Opera 和 Firefox 中播放，但在 Chrome 和 Safari 中运行良好。它们是 720p 视频，但我按比例缩小播放器，因为完整的 720p 不适合我的布局（不确定这是否是一个问题）。

这是我网站上的一个视频示例，尽管我所有的视频页面都发生了同样的事情：[http ://willryan.us/video_tilda.html](http://willryan.us/video_tilda.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:19:30.723

不同的浏览器支持不同的视频格式。目前，您应该使用三种格式对视频进行编码：

*   MP4（H.264 视频 + AAC 音频）[专有，最佳视频质量]，
*   WebM（VP8 视频 + Ogg Vorbis 音频）[开放，H.264 可比视频质量]，
*   Ogg Theora [开放，与 MP4/H.264 和 WebM 相比，视频质量较低]。

您的页面仅包含 MP4 变体。为了更好地兼容不同的浏览器，您应该至少额外提供 WebM 变体。

您可以尝试使用[XviD4PSP](http://www.winnydows.com/html5/)等免费工具将视频转码为不同格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:21:40.690

它可以是 Firefox 支持的标准 webm 格式以外的另一种格式。您可以尝试[在 Firefox 中安装非标准支持。](http://www.interoperabilitybridges.com/html5-extension-for-wmp-plugin)

# android - 为 Android 手机设计并在平板电脑上进行测试

> ID：12698444
> 
> 赞同：0
> 
> 时间：2012-10-02T21:15:38.923
> 
> 标签：android

我希望以业余爱好重返 Android 开发，并且我想拥有一个用于测试的设备。看到我目前拥有的唯一 Android 手机是原始的摩托罗拉 DROID，但是，我想得到一些不那么……*过时*的东西。

通过运营商的计划购买新的 Android 手机是一种选择，二手手机也是如此。然而，我已经看到很多便宜得多的 Android 平板电脑，从财务角度来看，这使得这条路线更具吸引力。

为 iOS 开发可让您使用 iPad 作为针对手机优化的应用程序的测试平台，您可以选择以应用程序优化的分辨率在窗口模式下运行，或以放大 2X 模式运行.

Android如何处理这种事情？您是否设计了一个应用程序并且界面以某种方式自行扩展？或者，就像默认的 iOS 行为一样，它是否会以您的应用程序优化的分辨率为中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:23:31.937

您可以跳过对设备的依赖，使用 Chrome，并更改您的用户代理。您甚至可以针对特定的 iOS 和 Android 版本“用户代理”，以及设置 Windows 分辨率“设备指标”

右键单击一个窗口，检查元素，右下角的链轮，“覆盖”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T17:11:03.857

不，到目前为止，还没有标准机制可以让 Android 设备模拟不同尺寸的设备。

但是，无论如何，大多数应用程序都希望在一系列设备上运行。您可能会发现在推进开发的同时，在安装和运行构建速度最快的任何可用设备上完成 90% 的工作，然后不那么频繁地使用各种其他设备和/或模拟器来测试与其他大小的兼容性, dpi, Android 版本等

# c# - C# - XNA - 在两个 GameComponent 之后绘制 GameComponent 的一部分

> ID：12698445
> 
> 赞同：1
> 
> 时间：2012-10-02T21:15:44.957
> 
> 标签：c#, xna

我在 XNA 中有问题宽度绘制的层深度。我有两个 GameComponents：ScreenManager 和 Ball。ScreenManager 具有屏幕：BackgroundScreen、GamePlayScreen 和 PauseScreen...

我需要在 PauseScreen 之前绘制球并在球之前绘制 BackgroundScreen，目前...

在 Ball GameComponent 中，我在绘制球的精灵之后尝试调用 base.Draw()，在 ScreenManager 中，我在绘制屏幕之前尝试调用 base.Draw()，但两者都不起作用。

我该怎么做？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:26:03.507

您无法在当前设置中实现这一点，因为 GameComponents 只能更改它们彼此之间的“Draw-Order”。

这是一张可视化的图片：

![在此处输入图像描述](../Images/73574804a6dbcd93e2383c75c5436ed4.png)

如您所见， Ball 和 ScreenManager 在同一平面/层中，因此重新排列并不能解决您的问题。

要解决您的问题，您也可以制作 Screens GameComponents，或者将球的逻辑移动到单独的屏幕中。

# java - Java：将 UTF 8 转换为字符串

> ID：12698447
> 
> 赞同：2
> 
> 时间：2012-10-02T21:15:55.573
> 
> 标签：java, utf-8

当我运行以下程序时：

```
public static void main(String args[]) throws Exception
{
    byte str[] = {(byte)0xEC, (byte)0x96, (byte)0xB4};
    String s = new String(str, "UTF-8");
} 
```

在 Linux 上检查 jdb 中 s 的值，我正确地得到：

```
 s = "ì–´" 
```

在 Windows 上，我错误地得到：

```
s = "?" 
```

我的字节序列在韩语中是一个有效的 UTF-8 字符，为什么它会产生两个截然不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:22:16.447

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:20:11.713

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:21:20.370

You get the correct string, it's Windows console that does not display the string correctly.

Here is a [link](http://blog.maurus.be/index.php/2011/03/unicode-windows-console-output-and-java/) to an article that discusses a way to make Java console produce correct Unicode output using JNI.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:35:51.750

JDB is displaying the data incorrectly. The code works the same on both Windows and Linux. Try running this more definitive test:

```
public static void main(String[] args) throws Exception {
    byte str[] = {(byte)0xEC, (byte)0x96, (byte)0xB4};
    String s = new String(str, "UTF-8"); 
    for(int i=0; i<s.length(); i++) {
        System.out.println(BigInteger.valueOf((int)s.charAt(i)).toString(16));
    }
} 
```

This prints out the hex value of every character in the string. This will correctly print out "c5b4" in both Windows and Linux.

# backbone.js - CompositeView和CollectionView之间的骨干木偶区别？

> ID：12698450
> 
> 赞同：9
> 
> 时间：2012-10-02T21:16:16.850
> 
> 标签：backbone.js, marionette

我看到两者具有几乎相同的属性和功能，那么这两者的主要区别是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T21:34:59.537

这个问题在这里得到解决：[https ://github.com/marionettejs/backbone.marionette/wiki/Use-cases-for-the-different-views](https://github.com/marionettejs/backbone.marionette/wiki/Use-cases-for-the-different-views)

简而言之，如果您想在集合周围包装模板（例如：带有页眉和页脚的列表），您将需要使用 CompositeView。CollectionView 不知道如何呈现模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T13:41:06.797

[http://blog.marionettejs.com/2016/08/23/marionette-v3/index.html](http://blog.marionettejs.com/2016/08/23/marionette-v3/index.html)

> 2.x 版有许多不同类型的视图：View、ItemView、LayoutView、CollectionView、CompositeView。
> 
> 在版本 3 中，ItemView 和 LayoutView 被“合并”到 View 中，并且 CompositeView 在 v4 中被弃用以移除。现在我们只有 View 和 CollectionView。

并且布局也被删除

# git - git中跟踪的意义

> ID：12698456
> 
> 赞同：7
> 
> 时间：2012-10-02T21:16:49.983
> 
> 标签：git

在StackOverflow 中被引用过几次[的文章（例如](http://longair.net/blog/2011/02/27/an-asymmetry-between-git-pull-and-git-push/)[1](https://stackoverflow.com/questions/5561295/what-does-git-push-u-mean)`git push` ）中，作者讨论了和之间的不对称性`git pull`，并提到了以下内容：

> **更新**：感谢 David Ongaro，他在下面指出，自 git 1.7.4.2 以来，push.default 选项的推荐值是上游而不是跟踪，尽管跟踪仍然可以用作已弃用的同义词。描述该更改的提交消息很好，因为它表明在与远程存储库中的上游分支设置此关联的上下文中，正在努力弃用“跟踪”一词。**（当我试图向人们介绍 git 时，git branch --track 和“remote-tracking branch”中“track”的完全不同的含义一直让我很恼火。）**

他所指的究竟有什么区别：

*   **git branch --track**中的“**跟踪**”概念
***   **远程跟踪分支**中的“**跟踪**”概念**

 ****在最后一句话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:48:39.200

我不能确定，因为我不是那句话的作者。我将拍摄作者所描述的混淆是“跟踪”和“远程跟踪”分支之间的常见混淆。[gitguys](http://www.gitguys.com/topics/tracking-branches-and-remote-tracking-branches/)有一篇很棒的文章，所以真的，你应该读一下。他们有漂亮的照片和一切。

这是我的看法...

## 那个设定

例如，假设我们在 github 上有一个非常简单的 git 存储库，它有一个`master`带有几个提交的分支（C1 和 C2，其中 C2 是当前提交）。当您克隆该存储库时...

```
git clone git@github.com:example/repo.git 
```

...发生了两件事：

1.  您将所有提交（C1 和 C2）复制到本地计算机。
2.  您还可以在本地计算机上创建一个名为`master`. 这个分支是一个“跟踪分支”，它的 HEAD 在 C2 上。这个分支被称为“跟踪分支”。

## 一个新的提交

到目前为止，没有什么特别的。但是在您阅读这些解释时，有人提交了另一个提交（C3）并将其推送到远程存储库。现在想象一下，你听说了这个令人惊叹的新提交，并决定自己检索它。

```
git fetch 
```

这做了两件事：

1.  将所需的新提交 (C3) 复制到本地计算机。
2.  以某种方式更新本地系统，让他们知道 origin 的`master`分支现在在 C3 上。

但这里有一个问题：本地系统如何知道源的`master`分支在 C3 上？git 肯定有某种方法可以在本地存储这些信息吗？但是哪里？我们实际上无法对本地`master`分支进行更改，因为我们可能在需要合并的本地分支上有自己的提交或其他更改。它只是存储在其他一些未知的 blob 中吗？

## 答案

事实证明，git 只使用了*第三个*分支。现在，我们知道两个分支：

1.  物理上位于 github 上的分支。
2.  位于您计算机上的“跟踪分支”（您会称之为`master`）。

事实证明还有第三个。您可能以前见过它：它被称为`origin/master`. 它与这两个分支中的任何一个都不相同。这就是所谓的“远程跟踪分支”。

您可以将其视为位于本地`master`分支和源分支之间的`master`分支。它是您计算机上的一个实际 git 分支（就像 一样`master`），因此您可以像在其他分支上跳转一样使用它。但是，有一些限制。

例如，您可以检查它...

```
git checkout origin/master 
```

但是，您会收到一条看起来很有趣的消息...

```
Note: checking out 'origin/master'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at 12dbe6a... My awesome commit! 
```

显示此消息是因为“远程跟踪分支”是只读的。用户不能像他们那样操作它们`master`，只有 git 系统本身被允许对其进行更改（它将在获取期间进行）。因此，从实现的角度来看，您可以将它们视为任何其他分支。但是，由于它们的只读性质，您通常不会像使用任何其他分支一样使用它们。

所以，真的，我们混合了三个分支：

1.  物理上位于 github 上的分支。
2.  `origin/master`物理上位于您机器上的分支（“远程跟踪分支”）。
3.  `master`物理上位于您机器上的分支（“跟踪分支”）。

## 回答问题...

因此，我的假设是，真正的混淆可能在于“跟踪”和“远程跟踪”分支之间。有人将其混淆`master`为“远程跟踪分支”是有道理的（毕竟，它确实从`origin/master`! 获得提交），但实际上并非如此。它是一个“跟踪分支”，它跟踪的分支是`origin/master`. `origin/master`是“远程跟踪分支”。

当有人用 git branch --track 谈论“跟踪”时，他们谈论的是您可以修改的“跟踪”分支。

当有人谈论“远程跟踪分支”时，他们谈论的是跟踪远程分支的只读分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T19:56:29.930

请注意，Git 2.12.2（2017 年 3 月）正式定义了跟踪的含义。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 e4e016f](https://github.com/git/git/commit/e4e016f65da6c7cc94709bec079d61f4bed7b196)（2017 年 3 月 19 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([ce9e617 提交中](https://github.com/git/git/commit/ce9e6178d31a61db05acd2c7311651d1da31d18f))^(，2017 年 3 月 24 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## `push``push.default=tracking`：在文档中提到“ ”
> 
> 更改文档`push.tracking=*`以重新提及“ `tracking`”的作用。
> 
> “tracking”选项在 [53c4031](https://github.com/git/git/commit/53c403116a947c538132fc721f83196036f7a299)中重命名为“upstream” （“ `push.default`: Rename ' `tracking`' to ' `upstream`'”，2011-02-16），该部分随后在[87a70e4](https://github.com/git/git/commit/87a70e4ce8bb3bdbb3048a5eb837f6b5b2eff8f9)（“config doc: rewrite `push.default`section”，2013 -06-19) 删除任何提及“ `tracking`”。
> 
> 如果这个选项在配置中，也许我们现在应该警告或死亡，但我有一些我的旧配置使用这个选项，我忘记了它是一个同义词，并且 git 的文档中没有提到这一点。

该[文档现在提到](https://github.com/git/git/blob/e4e016f65da6c7cc94709bec079d61f4bed7b196/Documentation/config.txt#L2435)：

> `tracking`- 这是一个已弃用的同义词`upstream`。****

# hibernate - Hibernate 4\. 无法初始化代理 - 没有会话

> ID：12698459
> 
> 赞同：1
> 
> 时间：2012-10-02T21:17:04.777
> 
> 标签：hibernate, lazy-loading, lazy-initialization

我知道这个错误很常见，但我已经搜索过了，似乎没有任何效果。

**我在Option**实体（*childrenOptions，parentOption* - 作为延迟加载）中有递归关系，并且我正在通过 HQL 查询加载平面列表，如下所示：

```
Session session = sessionFactory.openSession();
session.beginTransaction();

List result = session.createQuery("from Option as o").list();

session.getTransaction().commit();
session.close();
return result; 
```

我正在尝试在 Hibernate 会话之外手动构建用户的选项树，因为它依赖于之前加载的其他角色实体。

因此，当我尝试使用**getChildrenOptions()**属性来添加子选项时，我收到*“无法初始化代理 - 无会话”*错误。

我已经尝试过**session.evict()**和**.getHibernateLazyInitializer().getImplementation()**，但是

```
if (option instanceof HibernateProxy) 
```

总是假的。

是否有可能无法/删除此代理行为并使用普通 POJO 之类的集合属性？

急切加载所有选项似乎是一个性能问题，我想自己构建树。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:31:23.167

您必须在会话仍然打开时急切地获取所有这些实体，或者您必须为返回列表的使用者保持会话打开，并且仅在他完成构建树时关闭它。您正在加载充满延迟加载实体的列表，然后关闭会话，然后将其发送到其他代码，该代码将尝试遍历该列表以构建树 - 当然会抱怨会话已经关闭。

# java - Java 程序无法从命令提示符执行

> ID：12698465
> 
> 赞同：1
> 
> 时间：2012-10-02T21:17:35.150
> 
> 标签：java, command, execution, prompt

我最近在我的 PC 中安装了一个 java 软件并开始编写一些简单的程序。我在编译程序时没有遇到任何问题，但是在执行它时，它显示了这个错误消息 -

“Windows 无法打开此文件。

文件：HelloWorld.java

要打开此文件，windows 需要知道您要打开它的程序。Windows 可以联机自动查找它，或者您可以从计算机上安装的程序列表中手动选择。

我知道所有路径设置都是正确的。事实上，在编译程序时完全没有问题。这可能是什么问题？我什至重新安装了 JRE，但这并没有帮助。有人能帮我吗？

注意：我使用的是 Windows 7 64 位架构操作系统，并且我使用命令提示符来编译和执行文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:20:44.943

我假设您已经双击了*.java*文件，例如在文件资源管理器中。java 源文件不是（点击启动的）可执行文件，而且 - 没有一些杂技 - 也不是已编译的*.class*文件：您不应该期望双击并启动您的程序。

为了获得这种行为，您需要构建一个可启动的程序，并且有几种方法可以做到这一点。一种是使用您的代码创建一个运行 java VM 的批处理文件，另一种是创建一个可执行的 jar 文件。

要在 IDE 之外运行代码，可以在命令行上调用 java VM：

```
c:\> java HelloWorld 
```

至于您的具体错误消息，您没有将任何程序与*.java*文件相关联。通常，作为程序员，我们希望这个 Windows 文件关联成为我们选择的编辑器或我们的 IDE。您可以通过右键单击文件，从菜单中选择“*属性*”，然后单击“*打开方式：* ”旁边的“*更改”*按钮来选择应用程序来创建此关联。

 *但这是一个附带问题：您仍然不会使用它来使*.java*文件可执行。在此站点上搜索有关构建可执行 jar 文件的问题和答案。如果您使用的是 Eclipse 或 NetBeans 等特定 IDE，请使用它来优化您的搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:22:03.017

当你想执行程序时，你指定*类*名而不是文件名：

```
java HelloWorld 
```

例如，不要使用`java HelloWorld.java`。*

# android - 在 android 应用程序的选项中显示图像列表

> ID：12698467
> 
> 赞同：1
> 
> 时间：2012-10-02T21:17:37.670
> 
> 标签：android, android-optionsmenu

我正在开发一个应用程序，我希望在该应用程序中为用户提供能够从选项菜单中的列表中选择图像的选项。有点像您如何选择手机的铃声，但用图像代替。

我可以在我的主要活动中显示微调器中的图像列表，但我不知道如何将其翻译到首选项屏幕上。是否可以在首选项屏幕上有一个微调器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:33:45.827

您将需要制作一个自定义适配器并交给 Spinner。与其给它一个装满字符串的适配器（这就是你现在正在做的），不如给它一个装满 ImageViews 的适配器。

这是一个很好的例子...... [简单的适配器问题，微调器中的文本+图像。爪哇，安卓](https://stackoverflow.com/questions/3688925/simple-adapter-problem-text-image-in-spinner-java-android)

# css - 下拉菜单中的空格

> ID：12698468
> 
> 赞同：0
> 
> 时间：2012-10-02T21:17:38.613
> 
> 标签：css, menu

我是一个CSS新手。我创建了一个菜单，其中菜单和下拉菜单之间出现了一个小空间，导致悬停效果中断。请帮帮我。谢谢

```
#menu, #menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
#menu {
    width: 958px;
    /*margin: 60px auto;*/
    border: 1px solid #222;
    background-color: #111;
    background-image: linear-gradient(#444, #111);

    box-shadow: 0 1px 1px #777;
}
#menu:before,
#menu:after {
    content: "";
    display: table;
}

#menu:after {
    clear: both;
}

#menu {
    zoom:1;
}
#menu li {
    float: left;
   /* border-right: 1px solid #222;*/
    box-shadow: 1px 0 0 #444;
    position: relative;
    box-sizing: border-box; 
    width: 20%;
}

#menu a {
    float: left;
       padding: 11px 64px;
    color: #999;
    text-transform: uppercase;

    text-decoration: none;
    text-shadow: 0 1px 0 #000;
}

#menu li:hover > a {
    color: #fafafa;
}

*html #menu li a:hover { /* IE6 only */
    color: #fafafa;
}
#menu ul {
    margin: 20px 0 0 0;
    _margin: 0; /*IE6 only*/
    opacity: 0;
    visibility: hidden;
    position: absolute;
    top: 38px;
    left: 0;
    z-index: 1000000;    
    background: #444;    
    background: linear-gradient(#444, #111);
    box-shadow: 0 -1px 0 rgba(255,255,255,.3);    

    transition: all .2s ease-in-out;
    width: 100%;
}

#menu li:hover > ul {
    opacity: 1;
    visibility: visible;
    margin: 0;
}

#menu ul ul {
    top: 0;
    left: 150px;
    margin: 0 0 0 20px;
    width:100%;

    _margin: 0; /*IE6 only*/
    box-shadow: -1px 0 0 rgba(255,255,255,.3);        
}

#menu ul li {
    float: none;
    display: block;
    border: 0;
    _line-height: 0; /*IE6 only*/
    box-shadow: 0 1px 0 #111, 0 2px 0 #666;
}

#menu ul li:last-child {   
    box-shadow: none;    
}

#menu ul a {    
    padding: 10px;
    width: 130px;
    _height: 10px; /*IE6 only*/
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}

#menu ul a:hover {
    background-color: #111;
}
#menu ul li:first-child > a {
    /*border-radius: 3px 3px 0 0;*/

}

#menu ul li:first-child > a:after {
    content: '';
    position: absolute;
    left: 40px;
    top: -6px;
}

#menu ul ul li:first-child a:after {
    left: -6px;
    top: 50%;
    margin-top: -6px;
    border-left: 0;    
}

#menu ul li:first-child a:hover:after {
}

#menu ul ul li:first-child a:hover:after {
    border-right-color: #000; 
    border-bottom-color: transparent;

}

#menu ul li:last-child > a {
    /*border-radius: 0 0 3px 3px*/;
} 
```

这是html，

```
<ul id="menu">
    <li><a href="#">About </a></li>
    <li><a href="#">Programmes</a><ul>
        <li><a href="#">Undergraduate</a></li>
        <li><a href="#">Postgraduate</a></li>
    </ul></li>
    <li><a href="#">Academics</a></li>
    <li><a href="#">Research</a></li>
    <li><a href="#">Facilities</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:20:13.170

添加：

```
ul#menu {margin-top:-5px !important;} 
```

!important 标签取代了#menu ul 的其他边距设置。根据需要进行调整以直接在父菜单项下方下拉。

此外，如果使用 Chrome 右键单击​​任何元素和“检查元素”。样式将为您实时呈现，并允许您在不编辑、保存、上传 CSS 文件以查看效果的情况下进行更改。

在 Firefox 上，为相同的工具下载 Firebug。

# struts2 - 将struts拦截器应用于路径子集？

> ID：12698469
> 
> 赞同：1
> 
> 时间：2012-10-02T21:17:46.163
> 
> 标签：struts2, interceptor

我只想将 Struts 拦截器应用于路径的子集。例如，仅请求路径以“/api”开头的请求。

看起来有点像不费吹灰之力，但到目前为止，我的 google-fu 让我很失望。有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:41:10.030

可以为每个包定义拦截器，例如，使用默认拦截器。在您的示例中，它将是具有“/api”命名空间的包。

另一种选择是为每个操作配置拦截器，这很烦人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:31:21.840

在你的 struts.xml 中，你可以定义一个新的包

```
<package name="yourpackage" extends="default" namespace="/api">     
    <default-interceptor-ref name="yourInterceptorStack"/>
</package> 
```

在您的操作类中，您可以按如下方式指定包，

```
@ParentPackage("yourpackage")
public class YourAction extends ActionSupport {
    ...
} 
```

# php - 如何检查计费协议是否有效或取消？

> ID：12698471
> 
> 赞同：3
> 
> 时间：2012-10-02T21:18:03.167
> 
> 标签：php, paypal

我在 PayPal 中使用参考交易 API，但不确定计费协议在计费时是否有效。我想提前知道帐单协议是否被取消。

我想知道对计费协议取消呼叫进行回拨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T13:11:06.500

要检查计费协议的状态，您可以使用 BAUpdate API (NVP: METHOD=BillAgreementUpdate)。

通常这个API是用来删除一个Billing Agreement的，但是如果你在没有BillingAgreementStatus字段的情况下使用它，它会返回Billing Agreement的当前状态，让你知道一个Billing Agreement是否仍然有效。

事实上，如果计费协议不再有效，Paypal 将响应错误代码 10201“计费协议已取消”

参考交易的源[API 操作](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECReferenceTxns)，Angell EYE PayPal NVP CodeIgniter 库 (PHP)

问候

# django - Django：表单验证：一个字段接受多个值

> ID：12698474
> 
> 赞同：5
> 
> 时间：2012-10-02T21:18:30.387
> 
> 标签：django, forms, validation, field

我正在寻找一个表单字段，它为给定字段获取多个值，验证它们，并将它们存储为列表。

例如，可以运行以下 curl 命令并发布几个名为“电子邮件”的 POST 参数

```
curl -X POST -d email=test@example.com -d email=test2@example.com http://url/here/ 
```

在我看来，我可以执行以下操作以直接从 POST 数据中获取电子邮件列表。

```
email = request.POST.getlist('email') 
```

但是，我想利用表单验证来清除 POST 数据中指定的所有电子邮件。

理想情况下，我想运行 form.is_valid() 然后访问表单上的 clean_data['email'] 键将返回有效电子邮件地址列表。

我已经研究过使用 MultipleChoice 字段和类似字段（因为它们接受具有相同名称的多个输入），但这些字段要求您事先定义选择。我也考虑过使用表单集，但是对于我在这种情况下尝试做的事情来说，这些似乎过于复杂。

有谁知道以这种方式表现的任何领域？谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:55:30.477

我正在寻找类似的东西，我发现了这个：[http ://djangosnippets.org/snippets/497/](http://djangosnippets.org/snippets/497/)

```
from django import newforms as forms

class SeparatedValuesField(forms.Field):
    """
    A Django newforms field which takes another newforms field during
    initialization and validates every item in a separated list with
    this field class. Please use it like this::

        from django.newforms import EmailField
        emails = SeparatedValuesField(EmailField)

    You would be able to enter a string like 'john@doe.com,guido@python.org'
    because every email address would be validated when clean() is executed.
    This of course also applies to any other Field class.

    You can define the sepator (default: ',') during initialization with the
    ``separator`` parameter like this::

        from django.newforms import EmailField
        emails = SeparatedValuesField(EmailField, separator='###')

    If validation succeeds it returns the original data, though the already
    splitted value list can be accessed with the get_list() method.

    >>> f = SeparatedValuesField(forms.EmailField)
    >>> f.clean('foo@bar.com,bar@foo.com')
    'foo@bar.com,bar@foo.com'
    >>> f.get_list()
    ['foo@bar.com', 'bar@foo.com']
    >>> f.clean('foobar,foo@bar.com,bar@foo.com')
    Traceback (most recent call last):
        ...
    ValidationError: <unprintable ValidationError object>
    >>> u = SeparatedValuesField(forms.URLField)
    >>> u.clean('http://foo.bar.com,http://foobar.com')
    'http://foo.bar.com,http://foobar.com'
    >>> u.clean('http:foo.bar.com')
    Traceback (most recent call last):
        ...
    ValidationError: <unprintable ValidationError object>
    >>> f = SeparatedValuesField(forms.EmailField, separator='###')
    >>> f.clean('foo@bar.com###bar@foo.com')
    'foo@bar.com###bar@foo.com'
    >>> f.clean('foobar###foo@bar.com###bar@foo.com')
    Traceback (most recent call last):
        ...
    ValidationError: <unprintable ValidationError object>

    """
    def __init__(self, base_field=None, separator=',', *args, **kwargs):
        super(SeparatedValuesField, self).__init__(*args, **kwargs)
        self.base_field = base_field
        self.separator = separator

    def clean(self, data):
        if not data:
            raise forms.ValidationError('Enter at least one value.')
        self.value_list = data.split(self.separator)
        if self.base_field is not None:
            base_field = self.base_field()
            for value in self.value_list:
                base_field.clean(value)
        return data

    def get_list(self):
        return self.value_list

def _test():
    import doctest
    doctest.testmod()

if __name__ == "__main__":
    _test() 
```

但是，这并不完全令人满意：例如，对于电子邮件列表，如果只有一封电子邮件无效，则整个字段都无效。

人们可能会重写 clean 方法，使其仅返回有效的“base_fields”，而不是完全抛出 ValidationError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-14T17:43:46.037

在 2018 年，这个问题仍然没有令人满意的答案，所以我编写了自己的字段，其行为就像 OP 想要的那样。[在这里查看](https://github.com/ukch/django_multivalueformfield)。

解决原来的问题：

表格.py：

```
import django.forms as forms

from multivaluefield import MultiValueField

class MultiEmailForm(forms.Form):
    emails = MultiValueField(forms.EmailField(), "email") 
```

查看代码：

```
form = MultiEmailForm(request.POST)
if form.is_valid:
    emails = form.cleaned_data["emails"]
    # do something with emails
else:
    errors = form.errors
    # do something with errors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T16:23:40.653

`django-multi-email-field`可以这样做：[https ://github.com/fle/django-multi-email-field](https://github.com/fle/django-multi-email-field)

示例表单代码：

```
from django import forms
from multi_email_field.forms import MultiEmailField

class SendMessageForm(forms.Form):
    emails = MultiEmailField() 
```

示例视图代码：

```
assert form.is_valid()
print(form.cleaned_data["emails"]) 
```

# javascript - javascript调用服务器端函数时返回NaN

> ID：12698475
> 
> 赞同：0
> 
> 时间：2012-10-02T21:18:32.230
> 
> 标签：javascript, asp.net, server-side, nan, pagemethods

我有以下试图调用服务器端函数的 javascript 代码：

```
 function server_GetStats(nodeID) {
        var result = PageMethods.getStats(nodeID);
        return result;
    }

    setInterval(function () {
        newVal = parseInt(server_GetStats(1089)) + parseInt(server_GetStats(1090));
        rate = (newVal - val) / (pollTime / updateCounterTime);
    }, pollTime); 
```

这是被调用的服务器端函数：

```
 [WebMethod]
    public static int getStats(object nodeID)
    {
        int stat= 0;
        SqlConnection conn = new SqlConnection();
        string connStr = ConfigurationManager.ConnectionStrings["ApplicationServices"].ToString();
        conn.ConnectionString = connStr;
        conn.Open();

        string sql = "SELECT stat FROM NODE_PROPERTIES WHERE NodeID = " + Int32.Parse(nodeID.ToString());
        SqlCommand cmd = new SqlCommand(sql, conn);

        stat = Int32.Parse((cmd.ExecuteScalar().ToString()));
        conn.Close();
        return stat;
    } 
```

我也将 asp:ScriptManager 添加到了 aspx 页面。无法为我的生活弄清楚为什么我会得到 NaN。我检查了 SQL 语句也没有问题。有人可以阐明我做错了什么吗？

回答：

正如建议的那样，我添加了一个回调函数。最终看起来像这样：

```
 setInterval(function () {
        newVal = 0;
        server_GetStats(1089, 1090);
    }, pollTime);

    function server_GetStats(nodeID) {
        PageMethods.getStats(nodeID, OnGetStatsSuccess, OnGetStatsFailure);
    }

    function OnGetStatsSuccess(result) {
        newVal = parseInt(result);
        rate = (newVal - val) / (pollTime / updateCounterTime);
    }

    function OnGetStatsFailure(result) {
        //do something when your server-side function fails to return the desired value
    } 
```

代码隐藏保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:38:36.580

尝试遵循[这个教程](http://www.xdevsoftware.com/blog/post/Call-WebMethod-from-Javascript-in-ASPNET.aspx)。另外，首先尝试从 web 方法返回一些固定值（也许 JavaScript 会返回 NaN，因为由于对数据库的查询而导致过期）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:47:40.047

When you are calling a `PageMethod`, it is getting called asynchronously. That means, when you call `server_GetStats(1089)`, it is returning from that function before the `PageMethod` even completes. To get your code to work, you'll need to define a callback for your `PageMethod` call. Something along these lines:

```
var values = 0;

function myCallback(result) {
    values += parseInt(result);

    // Maybe call a function here that notifies/changes the UI.
}

function server_GetStats(nodeID) {
    PageMethods.getStats(nodeID, myCallback);
} 
```

Reference: [http://www.geekzilla.co.uk/View30F417D1-8E5B-4C03-99EB-379F167F26B6.htm](http://www.geekzilla.co.uk/View30F417D1-8E5B-4C03-99EB-379F167F26B6.htm)

# sql - 使用“更新到局部变量”计算分组运行总计

> ID：12698479
> 
> 赞同：0
> 
> 时间：2012-10-02T21:18:45.330
> 
> 标签：sql, grouping, cumulative-sum

由于它似乎是禁食方法，我正在尝试使用“更新到局部变量”方法来计算 SQL 中的运行总计。要为此添加一个额外的层，我对能够对运行总计进行分组很感兴趣，但我不知道在哪里对我的查询进行调整以执行此操作（或者是否甚至可以使用此方法） . 任何和所有的帮助将不胜感激。

下面是我用来创建查询的代码，以及最初引导我使用此方法的文章。如何修改查询以重置每天的运行**总数**

[http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx](http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx)

```
DECLARE @SalesTbl TABLE (DayCount smallint, Sales money, RunningTotal money)

DECLARE @RunningTotal money

SET @RunningTotal = 0

INSERT INTO @SalesTbl 
SELECT DayCount, Sales, null
FROM Sales
ORDER BY DayCount

UPDATE @SalesTbl
SET @RunningTotal = RunningTotal = @RunningTotal + Sales
FROM @SalesTbl

SELECT * FROM @SalesTbl 
```

谢谢

赖利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:59:44.327

评论中的链接使我能够提出正确的编码。下面是在上面的例子中，更新函数需要如何修改为按天分组。

```
UPDATE @salestbl
SET @RunningTotal = RunningTotal = sales +
    CASE WHEN daycount=@lastday THEN @RunningTotal ELSE 0 END
   ,@lastday=daycount
FROM @salestbl 
```

# xcode - 将 Xcode 项目添加到 github 存储库？

> ID：12698482
> 
> 赞同：67
> 
> 时间：2012-10-02T21:18:53.750
> 
> 标签：xcode, git, github, terminal, project

我刚刚在网站上创建了一个新的 github 存储库。请记住，我是一个菜鸟，但可以在终端中做一些基本的事情。无论如何，所以我只是在 github.com 上的帐户上创建了 repo，还没有对它做任何事情。

所以我要做的就是把我的 Xcode 项目**文件夹**上传到我的新 github 存储库。我如何通过终端执行此操作？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-02T21:25:56.047

最好的方法是遵循 GitHub 给你的说明：

首先，进入正确的目录

```
cd <directory of your Xcode project> 
```

听起来您已经从 Xcode 获得了一个本地 Git 项目。如果是这样，请跳过此代码块。

```
git init .
git add .
git commit -s
<type in a commit message> 
```

最后，推入您的存储库。在我创建了一个新的“测试”存储库之后，以下内容是直接从我自己的 github 帐户中复制的。更改“dhalperi/test”部分。

> **从命令行推送现有存储库**
> 
> ```
> git remote add origin git@github.com:dhalperi/test.git
> git push -u origin master 
> ```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-09-10T10:00:16.893

我只是想在上面发表评论，但我也会添加一个总结答案。我的完整答案在[这里](https://stackoverflow.com/a/32498035/3681880)。

这不是通过终端作为问题请求，但您可以考虑这是一种替代方法。不过，它现在与 Xcode 很好地集成了，而且不难做到。

# 创建新项目时创建 Git 存储库

[![在此处输入图像描述](../Images/ce1d48147da5a6ce3d7be387a0a04654.png)](https://i.stack.imgur.com/cq2lF.png)

如果您已经有一个没有 Git 存储库的项目，请参阅我上面链接的答案。

# 提交

[![在此处输入图像描述](../Images/c2814419a6e57cbbedb84adb4c73535d.png)](https://i.stack.imgur.com/8vXlr.png)

在您的项目中进行更改后，从**Source Control**菜单中选择**Commit...。**您将添加一条简短的提交消息。

 **# 创建一个新的 GitHub 存储库

[![在此处输入图像描述](../Images/10538c2b975f5845fb37cf5a39a129db.png)](https://i.stack.imgur.com/8Tk07.png)

在[GitHub](https://github.com/)网站上创建一个新的存储库。随意调用它，但*不要*添加 README 或 .gitignore 或许可证。创建新存储库后，将链接复制到它。

# 在 Xcode 中添加遥控器

在 Xcode 中转到**Source Control** > *your branch name* > **Configure**。然后单击**远程**选项卡 >“ **+** ”按钮 >**添加远程**。填写您的存储库名称和地址。

[![在此处输入图像描述](../Images/ee74462394847459bbb90c26dd8e1714.png)](https://i.stack.imgur.com/25ewZ.png)

# 将您的项目推送到 GitHub

转到**源代码管理**>**推送**。您必须第一次输入您的 GitHub 用户名和密码。

而已。现在，每当您在 Xcode 中进行更改时，您所要做的就是**Commit**和**Push**。

如果您没有遵循此说明，请阅读[此](https://stackoverflow.com/a/32498035/3681880)和[此](https://medium.com/@0xben/using-github-with-xcode-6-8208b92c7a60)以获取更多详细信息。

# 进一步研究

这是我最近观看的一个很棒的视频，它帮助我更好地理解了 Git 以及它与 GitHub 的集成。

*   [Git 和 GitHub 的基础知识](https://www.youtube.com/watch?v=U8GBXvdmHT4)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-04T11:33:57.270

在 Xcode 中更简单的方法。你甚至可以只将一个当前分支推送到 GitHub 或整个项目。

（对于 Xcode 11）

1.  只需在“源代码管理导航器”中选择所需的分支/（或顶级文件夹）并右键单击它。然后选择“创建遥控器”。或“编辑器-> 创建遥控器”。 [![在此处输入图像描述](../Images/f217ac6d33be12d05e0bef2d9c6aba47.png)](https://i.stack.imgur.com/dbNW1.jpg)

2.  然后使用您在 GitHub 的帐户创建存储库。如果不建议使用您的 GitHub 帐户，您可能还没有在 Xcode -> Preferences -> Accounts 中添加您的 GitHub 帐户 [![在此处输入图像描述](../Images/78cc1ed09d03fa02b0e1912b27c746ad.png)](https://i.stack.imgur.com/gUEs6.jpg)

3.  一切设置好之后。点击“创建”。
4.  要将您的项目/分支推送到 GitHub 存储库，请单击“源代码管理 -> 推送”。

之后检查 Github。所有人都应该在那里。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-03T05:38:32.533

获取 Github Mac 应用程序，除非您想做更高级的东西，否则您并不需要终端；-)

只需转到您在 GitHub 上的项目页面，然后单击“在 Mac 中克隆”，这应该会自动为您下载并安装它。您必须至少执行一次才能安装应用程序并设置一些必需的权限。

之后，您会在 Dock 中看到 GitHub 应用程序，只需打开它，然后单击底部的那个小“+”号，您将看到“创建新存储库”和“添加新本地存储库”。

您可以添加 XCode 已经为您创建的存储库，也可以从 GitHub 下载一个，然后在 XCode 中打开它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-18T10:36:21.050

如果你的 Mac 上已经有一个 git repo 并使用 Xcode 9，

对于 xcode 9，只需转到 Xcode 导航检查器中的源代码管理选项卡。右键单击主 git 并选择在 GitHub 上远程创建“您的项目名称”。

提供您的 GitHub 凭据并为 git repo 命名，Xcode 将为您创建和推送您的代码。 [![在此处输入图像描述](../Images/370cdbb80d41fb3ca87e92cdd03ab434.png)](https://i.stack.imgur.com/KSB8K.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-22T05:01:37.777

非终端解决方案是安装[SourceTree](http://sourcetreeapp.com/)。与终端相比，它是一个超级易于使用的 GUI。但强烈建议正确学习 git 命令。**

# scrapy - 让一只蜘蛛使用从另一只蜘蛛返回的物品？

> ID：12698483
> 
> 赞同：2
> 
> 时间：2012-10-02T21:18:55.697
> 
> 标签：scrapy

所以我写了一个蜘蛛，它从网页中提取某些所需的链接，并将 URL、链接文本和其他不一定包含在`<a>`标签本身中的信息放入每个链接的项目中。

我应该如何将此项目传递给另一个抓取该项目中提供的 URL 的蜘蛛？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T23:08:37.757

This question has been asked many times. Below are some links on this site that answer your question. Some answer it directly ie passing items to another function but you may realise that you do not need to do it that way, so other methods are linked to show whats possible.

[Using multiple spiders at in the project in Scrapy](https://stackoverflow.com/questions/4886940/using-multiple-spiders-at-in-the-project-in-scrapy)

[Scrapy - parse a page to extract items - then follow and store item url contents](https://stackoverflow.com/questions/5825880/scrapy-parse-a-page-to-extract-items-then-follow-and-store-item-url-contents)

[Scrapy: Follow link to get additional Item data?](https://stackoverflow.com/questions/9334522/scrapy-follow-link-to-get-additional-item-data)

# java - 第一次尝试了解 Intent

> ID：12698487
> 
> 赞同：0
> 
> 时间：2012-10-02T21:19:23.583
> 
> 标签：java, android, android-intent

我在 Main 的 android xml 文件上有一个按钮，单击该按钮将显示另一个视图/活动。我的问题是错误消息显示应用程序必须意外结束。

这是按钮

```
<Button android:id="@+id/showmeurcode"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:onClick="OnShowMeUrCode"
> 
```

方法 OnShowMeUrCode 在 MainActivity 类中定义为

```
private void OnShowMeUrCode(View btn)
{
    Intent urCode=new Intent(this,CodePage.class);
    startActivity(urCode);
} 
```

`CodePage`从同名的类生成

```
public class CodePage extends Activity
{
   ....
} 
```

这就是我所做的一切，希望我可以使用 Intent 完成简单的任务来显示另一个视图，但是我运行时遇到了意外错误并且我的程序失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:38:30.780

您需要将 OnShowMeUrCode() 函数更改为公开的，而不是私有的。由于它是 Activity 类的一部分，如果它是私有的，您的 Button 将无法访问它。

另外它在文档中：http: [//developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:28:04.140

根据您没有错误日志输出的代码，我猜您没有将正确的上下文传递给该方法。

这是你的代码：

```
private void OnShowMeUrCode(View btn)
{
    Intent urCode=new Intent(this,CodePage.class);
    startActivity(urCode);
} 
```

尝试将相关行替换为：

`Intent urCode=new Intent(MainActivity.this,CodePage.class);`

假设我有两个活动，A 和 B。如果我从 A 调用 B，我应该写如下内容：

```
Intent i = new Intent(A.this, B.class);
startActivity(i); 
```

此外，每次创建新活动时，您都需要在 AndroidManifest.xml 中注册您的活动。在您的情况下，请检查您的 AndroidManifest.xml 中是否有 2 个活动

# ios - 故事板：出现在导航栏后面的表格视图

> ID：12698489
> 
> 赞同：6
> 
> 时间：2012-10-02T21:19:27.530
> 
> 标签：ios, xcode

如下图所示，部分 TableView 出现在导航栏的后面。

我一直忽略它，认为这只是故事板绘制事物的方式，因为它在应用程序中看起来不错。但这可能会有问题 - 有时，要选择导航栏后面的单元格，需要使用文档大纲。

事情就是这样吗？或者有没有办法让 Xcode 正确地绘制东西？

![在此处输入图像描述](../Images/467d9506609e0465b1f6d4779aa3f77b.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T21:29:31.490

看起来您选择了一个不会下推其他子视图的半透明导航栏。尝试使用标准或黑色导航栏。它可能在应用程序中看起来不错，因为您的导航控制器使用了非半透明栏。

# c# - 管理不同的用户角色 ASP.NET MVC

> ID：12698500
> 
> 赞同：2
> 
> 时间：2012-10-02T21:20:11.173
> 
> 标签：c#, asp.net, asp.net-mvc, authorization, user-roles

我目前正在开发一个 ASP.NET MVC4 网站，我想知道存储登录用户数据（包括权限）并安全地授权用户的最佳实践是什么，能够在我的视图和控制器中访问这些数据.

需要重点提一提的一件事——我**没有使用 Membership 类**（我已经看到使用它对我来说是一种开销，我想实现我需要的确切东西并从这个过程中学习）。

我认为这样做的唯一方法是将所有数据存储在会话对象中，并为会话对象（静态类）提供一个包装器并像使用它一样使用它`SessionManager.IsLoggedIn()`，`SessionManager.GetUserPriviliges()`或者只是创建一个返回硬类型 UserSessionData 的方法，`SessionManager.GetSessionData()`其中包含所有所需的数据。这是在控制器和视图中使用它的一种方式。我应该从 Controller 派生并创建一个`RolesController`存储 UserSessionData 这样我就不需要在我的控制器中一次又一次地调用它吗？

我想我将无法使用通用`AuthorizedAttribute`，因此我将不得不使用会话包装器来实现它（仅使用会话数据是否安全？因为我没有使用“官方”授权方法，因此我不'真的不知道应该如何实施）。

如您所见，我有一个想法，但自从我第一次这样做以来，我想了解最佳实践以及正确完成它的方式。如果您能解释您的答案，我将不胜感激，因为我想获得完整的想法，而我之前在 MVC 中没有这样做过。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:58:42.433

做你描述的任何事情都是不安全的。静态类在 asp.net 中很危险，因为它们不是多用户安全的。静态类在应用程序中的所有线程之间共享，包括运行其他用户请求的线程。

只需使用默认的会员资格，直到您知道自己在做什么。否则，您只会创建一个易受攻击的架构。

# ios - 如何将权利文件添加到 XCode 4.5 项目？

> ID：12698506
> 
> 赞同：4
> 
> 时间：2012-10-02T21:20:27.273
> 
> 标签：ios, xcode, xcode4.5

> **可能重复：**
> [XCode 4.2.1 上的 Ad Hoc Distribution - 权利](https://stackoverflow.com/questions/8586988/ad-hoc-distribution-on-xcode-4-2-1-entitlements)

我正在使用 Xcode 4.5，当我转到“文件”>“新建”>“文件...”时，我再也看不到权利文件的任何选项。我怎样才能添加一个？我只是创建一个空白 plist 吗？如果是这样，我需要为 Ad Hoc 版本填充什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T00:20:26.357

在 Xcode 4.5 中，您应该执行以下操作来创建权利（不再通过 File > New > File...）：

1.  在左侧文件导航器中选择您的项目
2.  选择你的目标
3.  单击配置区域中的“摘要”选项卡
4.  滚动到“摘要”部分的底部，您将看到“权利”部分（您可能需要调低权利旁边的显示三角形）
5.  单击“使用权利文件”的复选框，并根据需要为其指定一个自定义名称
6.  在此处填写您需要的任何值（您也可以手动编辑 plist 文件）。

请注意，您不再需要为带有权利文件的 AdHoc 构建做任何特别的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T21:26:11.707

`Entitlements.plist`只是一个 plist 文件，通常在根目录下有一个键值对 ( `get-task-allow`)（这是一个字典，见下图），所以创建一个普通的 plist 文件就可以了。

![获取任务允许](../Images/5422dee133f65ba8a3a8cae44e33aa0d.png)

另外不要忘记在 Build Settings -> Code Signing Entitlements 中将它指向您的目标中的 Entitlements.plist（如果 Xcode 没有自动设置它）

![构建设置](../Images/b08e3eccbc15eb25b6b19b5f51db7309.png)

在这里阅读更多：http: [//developer.apple.com/library/ios/#qa/qa1710/_index.html](http://developer.apple.com/library/ios/#qa/qa1710/_index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:24:08.633

转到文件 > 新文件 > 权利文件...必须有这样的东西。

抱歉，我更正了 > 使用属性文件作为权利！

# ruby - 使用包含在其他两个数组中的信息创建一个数组

> ID：12698507
> 
> 赞同：5
> 
> 时间：2012-10-02T21:20:29.217
> 
> 标签：ruby, arrays

如何使用以下两个数组构建数组：

名称 = [a, b, c]

how_many_of_each [3, 5, 2]

要得到

my_array = [a，a，a，b，b，b，b，b，c，c]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T21:27:25.250

使用`zip`、`flat_map`和数组乘法：

```
irb(main):001:0> value = [:a, :b, :c]
=> [:a, :b, :c]
irb(main):002:0> times = [3, 5, 2]
=> [3, 5, 2]
irb(main):003:0> value.zip(times).flat_map { |v, t| [v] * t }
=> [:a, :a, :a, :b, :b, :b, :b, :b, :c, :c] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:28:18.567

```
name.zip(how_many_of_each).inject([]) do |memo, (x, y)|
  y.times { memo << x}
  memo
end

=> [:a, :a, :a, :b, :b, :b, :b, :b, :c, :c] 
```

编辑：哦，好吧，有更好的，见@David Grayson。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:28:50.193

这将以一种易于理解的方式完成：

```
my_array = []
name.count.times do |i|
    how_many_of_each[i].times { my_array << name[i] }
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T04:15:25.177

您可以选择您想要的（只需交换评论`#`）：

```
class Array
    def multiply_times(how_many)
        r = []
        #how_many.length.times { |i| how_many[i].times { r << self[i] } }
        self.each_with_index { |e, i| how_many[i].times { r << e } }
        r
    end
end

p ['a', 'b', 'c'].multiply_times([3, 5, 2])
#=> ["a", "a", "a", "b", "b", "b", "b", "b", "c", "c"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T21:36:20.657

```
array = ["a", "b", "c"]
how_many = [2, 2, 2]

result = []

array.each_with_index do |item, index|
  how_many[index].times { result << item }
end

print result # => ["a", "a", "b", "b", "c", "c"] 
```

# javascript - 在哈希/ URL 片段中有空间安全吗？

> ID：12698510
> 
> 赞同：1
> 
> 时间：2012-10-02T21:20:38.803
> 
> 标签：javascript, html, url, fragment-identifier, hashbang

我正在编写一个 Javascript 驱动的单页应用程序，其中 URL 包含 # 参数，例如。( `example.com/#foo/bar`) 来表示应用程序状态（我考虑过使用各种 JS 框架，但由于各种原因不能）。

有时，哈希中可能有一个空格（或多个空格）。例如。`example.com/#foo/bar bar2`.

1.  这安全吗？
2.  散列部分是否还有其他不应使用的字符？

这个[问题](https://stackoverflow.com/questions/497908/are-urls-allowed-to-have-a-space-in-them)解决了 URL 部分中的空格问题，并建议转义空格。但是由于在 # 之后更改片段不会导致新的 HTTP 请求，这些规则适用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:27:26.640

我将回避什么是*安全的问题，并简单地说明根据*[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)的第 2.4.3 节，URL 中的空格是*非法*的。做非法的事情意味着你无法真正预测软件在遇到这样的 URI 时会做什么。

此外，如果涉及 JavaScript，您可能不想保证更改 URL 的哈希不会触发 XHR 并导致重新解析 URL 的网络活动。（例如，您可能决定要弄乱历史状态或进行一些分析跟踪`onhashchange`。）

# php - Facebook 实时更新回调 POST

> ID：12698513
> 
> 赞同：0
> 
> 时间：2012-10-02T21:20:53.070
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-authentication

是否可以在实时更新后自动在用户的墙上发布 POST？

**示例**：用户在他的墙上发帖，然后 Facebook 触发一个事件并将对象数据发送到我们在实时更新仪表板中指定的 url。在我们处理完数据后，回调 url 在用户墙中发出通知/发布。这可能吗？
我一直在看文档，但我不知道如何获取 access_token 来发帖。

问候，
埃尔卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:45:30.830

您需要将访问令牌存储在您自己的数据库中并使用它 - 对于某些类型的发布，您还可以使用应用访问令牌来发布

如果您在没有直接用户交互的情况下上传内容，请注意您没有违反政策，如果是这种情况，应用程序可能会很快被删除

# javascript - 隐藏显示融合地图图层

> ID：12698514
> 
> 赞同：0
> 
> 时间：2012-10-02T21:21:00.773
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

看起来很简单，但我似乎错过了一些东西。当页面加载时，我不确定将创建哪些图层（脚本化）。我可以有多层。我有一个在创建每个图层时创建的单选按钮组。我希望这些能够允许用户单独查看它们。假设我有三个地图层

```
layer1.setMap(map1);
layer2.setMap(map1);   
layer3.setMap(map1); 
```

我像这样构建我的动态单选按钮（见下文。layer1 的示例，但其余部分相同）

```
 $('#tools').append('Layer1<input name="Layer1" type="radio" value="layer1" onClick="toggleLayer(layer1)"><br />');
} 
```

我的 toggleLayer 是我遇到问题的地方？我怎样才能将它们全部隐藏并进行一键式显示。

功能切换层（this_layer）{

```
if (typeof layer1 === 'undefined') {
// variable is undefined
     }else
  {layer1.setMap(null);

}

if (typeof layer2 === 'undefined') {
// variable is undefined
     }else
  {layer2.setMap(null);

}

if (typeof layer3 === 'undefined') {
// variable is undefined
     }else
  {layer3.setMap(null);
}

    //alert(this_layer);
    this_layer.setMap(map1);

} 
```

我试图找出哪些图层在上面，如果是，隐藏它们。我不能只禁用整个地图而不是逐层遍历吗？示例页面在这里。请注意，在我的示例页面上，我正在尝试使用两张地图。我目前的技术在我尝试只设置一张地图的图层时有效，但当我尝试同时使用两者时会中断。对于我需要的东西，脚本似乎太复杂了。

[http://wrestore.iupui.edu/Jon/mapScriptTry.html](http://wrestore.iupui.edu/Jon/mapScriptTry.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:09:13.783

这是我不久前发布的答案[https://stackoverflow.com/a/11108342/1211981](https://stackoverflow.com/a/11108342/1211981)，它显示了一种切换 Fusion Table 图层的简单方法。IE看它是否打开，如果没有打开它，如果它关闭它。希望您可以根据自己的目的对其进行修改。它适用于任何 FT 层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:38:56.527

我缺少一个变量以使其与两张地图一起使用。错误不在图层的打开和关闭，而是重新分配图层名称！

# c# - 从 MVC3 中的数据库返回的 png 未在 IE8 中显示

> ID：12698516
> 
> 赞同：0
> 
> 时间：2012-10-02T21:21:15.497
> 
> 标签：c#, asp.net-mvc-3, internet-explorer-8, png

在我的 MVC 站点中，我使用下面的控制器操作从数据库返回图像。这在大多数情况下都可以正常工作。我遇到的唯一问题是在 IE8 及更低版本中，没有显示 png。他们改为显示红色的“X”。有任何想法吗？

```
public ActionResult Image(Guid id)
{
    ContentService svc = new ContentService();

    BinaryContent content = svc.GetBinaryContentById(id, "en-US");

    string mimeType = string.Format("image/{0}", content.BinaryType);
    string fileName = string.Format("{0}.{1}", id.ToString(), content.BinaryType);

    return File(content.Data, mimeType, fileName);
} 
```

# java - 重叠音频 .m4a 音频文件 Java

> ID：12698519
> 
> 赞同：1
> 
> 时间：2012-10-02T21:21:28.933
> 
> 标签：java, audio

我需要将两个音频文件 (.m4a) 重叠到一个 .m4a 音频文件中。
可能吗 ？我怎样才能做到这一点 ？

# c# - MDI Parent 上的垂直滚动条不会逐渐滚动

> ID：12698520
> 
> 赞同：2
> 
> 时间：2012-10-02T21:21:30.697
> 
> 标签：c#, visual-studio-2010, mdi, mdiparent

我在 VS2010 下用 C# 编写了一个 MDI 应用程序。

当我在垂直滚动条上拖动拇指时，在松开拇指之前窗口不会移动。

研究发现了一些事情，但到目前为止我发现的信息都没有奏效。

有人对这个问题有一些指导吗？我希望窗口在拖动拇指时滚动。

查克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:53:18.627

> “我希望窗口在拖动拇指时滚动，在松开拇指之前窗口不会移动”

设置滚动条属性`ScrollTrack = True`

**编辑：**

在此处查看最后一个示例： [http](http://www.pcreview.co.uk/forums/determine-scrolling-mdi-form-mdiclient-t1323005.html) ://www.pcreview.co.uk/forums/determine-scrolling-mdi-form-mdiclient-t1323005.html 它与[检测滚动以重新绘制子表单以避免闪烁有关](http://www.codeproject.com/Articles/8553/MdiClient-Revisited#xx948448xx)

请看一下 Hans Passant 在这里做了什么：[与 C# 中 MDI 表单中的滚动条相关的问题](https://stackoverflow.com/questions/11599272/issue-related-to-scrollbar-in-mdi-form-in-c-sharp)

*伪代码：*

```
 protected override void WndProc(ref Message m)
        {
            try
            {

                switch (m.Msg)
                {
                    //Scolling progress and Completion will be triggered
                    case WM_HSCROLL:

                    case WM_VSCROLL:
                          //this doesn't work 
                          //this.VerticalScroll.Value = x;

                          //I haven't tested this but it should definately work:
                          //http://www.pinvoke.net/default.aspx/user32.setscrollpos 
```

# javascript - Backbone JS 自动路由回默认值

> ID：12698530
> 
> 赞同：1
> 
> 时间：2012-10-02T21:21:45.447
> 
> 标签：javascript, backbone.js, backbone-routing

我刚刚开始了 Backbone JS SPA（单页应用程序）的基础工作。我正在使用基本的下划线模板支持，并且遇到了意外路由的问题。

基本上，注册视图最初按预期显示，当我单击按钮时成功发布，我让它导航到一个简单的测试视图。但是，测试视图很快被渲染，然后我再次被重新路由到默认注册视图。

我看到了测试页面的历史记录，如果我点击后退按钮，我会回到那个工作正常的测试视图。我看到在 Backbone 中触发了一些事件，将我路由回空白片段（注册页面），但我不知道为什么。我尝试在导航呼叫上弄乱替换和触发选项，但没有运气。

作为旁注，start() 和 stop() 视图函数改编自这篇文章： http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone -应用程序/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)。我尝试删除它并没有效果。

```
$(document).ready( function(){

     Backbone.View.prototype.start = function() {
         console.debug('starting');
         if (this.model && this.modelEvents) {
            _.each(this.modelEvents,
                function(functionName, event) {
                    this.model.bind(event, this[functionName], this);
                }, this);
        }
         console.debug('started');
        return this;
     };

     Backbone.View.prototype.stop = function() {
         console.debug('stopping');

        if (this.model && this.modelEvents) {
            _.each(this.modelEvents,
                function(functionName, event) {
                    this.model.unbind(event, this[functionName]);
            }, this);
        }
        console.debug('stopped');
        return this;
    };

    var myApp = {};

    myApp.SignUp = Backbone.Model.extend({
        urlRoot:"rest/v1/user",

        defaults: {
            emailAddress: "email@me.com",
            firstName: "First Name",
            lastName: "Last Name",
            password: "",
            confirmPassword: ""
          }
    });

    myApp.SignUpView = Backbone.View.extend({

         el: $('#bodyTarget'),

         modelEvents: {
             'change' : 'render'
         },

         render: function(){
             document.title = "Sign Up Page";

             // Compile the template using underscore
             var template = _.template( $("#signUpTemplate").html(), this.model.toJSON());
             // Load the compiled HTML into the Backbone "el"
             this.$el.html( template );
             return this;
         },

         events: {
             "click .signUpButton": "signUp"  
         },

         signUp: function() {
             bindFormValues(this);
             this.model.save(this.model.attributes, {error: this.signUpFailure});
             myApp.router.navigate("test",  {trigger: true});
         },

         signUpFailure: function(model, response) {
             alert("Failure: " + response);
         }
    });

    myApp.TestView = Backbone.View.extend({

         el: $('#bodyTarget'),

         modelEvents: {
             'change' : 'render'
         },

         render: function() {
             document.title = "Test Page";
             this.$el.html( "<div>this is a test view</div>");
             return this;
         }
    });

    // for now, just pull values from form back into model
    function bindFormValues(view) {
        var mod = view.model;
        var el = view.$el;
        var updates = {};
        for (var prop in mod.attributes) {
            var found = el.find('* [name="' + prop + '"]');
            if (found.length > 0) {
                updates[prop] = found.val();    
            }
        }
        mod.set(updates/*, {error: errorHandler}*/);
    }

    // routers
    myApp.Router = Backbone.Router.extend({
        routes: {
            'test': 'test',
            '': 'home',
        },

        home: function() {
            console.debug('home:enter');
            this.signUpView = new myApp.SignUpView({model: new myApp.SignUp()});
            this.showView(this.signUpView);
            console.debug('home:exit');
        },

        test: function() {
            console.debug('test:enter');
            this.testView = new myApp.TestView({model: new myApp.SignUp()});
            this.showView(this.testView);
            console.debug('test:exit');
        },

        showView: function(view) {
            if (this.currentView) {
                this.currentView.stop();
            }
            this.currentView = view.start().render();
          }
     });

     myApp.router = new myApp.Router();
     Backbone.history.start();

}); 
```

我的 HTML 页面只是引入了相关的脚本，并且有 div 元素 bodyTarget，它在加载时注入了视图。

**编辑：**呃，我发现了问题。事实证明，我需要通过返回 false 来防止对 signUp() 的调用的事件传播。

# c++ - 如何确保数组中没有其他内容

> ID：12698536
> 
> 赞同：1
> 
> 时间：2012-10-02T21:22:11.693
> 
> 标签：c++, arrays, null

我正在为学校做作业，我似乎对数组中的其他字符有疑问。（在其他问题中......）

在一个函数中，我声明了数组..

```
const int MAXSIZE = 100;
char inFix[MAXSIZE]; 
```

这段代码用于将字符放入数组

```
 //loop to store user input until enter is pressed
    while((inputChar = static_cast<char>(cin.get()))!= '\n')
    {
        //if function to decide if the input should be stored or not
        if(isOperator(inputChar) || isdigit(static_cast<int>(inputChar)) || inputChar == '(' || inputChar == ')')
        {
            inFix[a] = inputChar; //stores input
            a++;
        }

    } 
```

最后，我将空字符附加到数组中，尽管我不确定是否应该这样做：

```
 inFix[MAXSIZE] = '\0'; 
```

或者如果我应该使用`strcat`.. 无论哪种方式......在我的下一个函数中，我使用 strcat 在末尾附加一个括号。

但是我的代码一直有问题，所以我运行了一个 for 循环来打印下一个函数开头的中缀数组中的内容，只是为了看看......

我听到了这种烦人的哔哔声，还有一串奇怪的字符，比如心形、音乐符号……还有……一整串奇怪的字符。可能是什么问题呢？谢谢。

**编辑：**顺便说一句，我输入`9*4`，并在附加括号后运行 for 循环，所以在输出的开头，我得到：

`9*4)`然后是一串奇数字符...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:24:13.270

尝试将 to 附加`'\0'`到数组中的位置`a`- 也就是说，恰好在您阅读的最后一个字符之后。否则，您将字符放入数组中，然后是数组中之前的随机序列，然后是`\0`（或者，在这种情况下，它是数组末尾之后的一个，这更糟） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:02:26.463

> 所以我运行了一个 for 循环来打印下一个函数开头的中缀数组中的内容，只是为了看看......
> 
> 我听到了这种烦人的哔哔声，还有一串奇怪的字符，比如心形、音乐符号……还有……一整串奇怪的字符。可能是什么问题呢？

问题是您正在打印出从未初始化过的数组元素。您当前接受的答案建议您初始化所有这些元素。虽然这不会导致错误**，但让这个答案阻止您完全理解您遇到的问题是错误的。**

重新考虑在数组末尾插入空字符的代码：

```
inFix[MAXSIZE] = '\0'; 
```

您显然知道空字符与标记字符串的结尾有关，但是您弄错了如何正确执行此操作。从数组开头到空字符的所有内容都将被视为字符串的一部分。如果您将输入中的三个字符复制`9*4`到数组中，那么您应该只希望这三个字符被视为字符串的一部分。您不想要的是数组中超过这三个字符的所有内容，最多 MAXSIZE 也被视为字符串的一部分。因此，您需要将字符串结束标记 , 放在`'\0'`您关心的字符之后。

（顺便说一句，`inFix[MAXSIZE] = '\0';`不仅将字符串结束标记放在数组的末尾，而且将它*放在数组之外*，这是不允许的。程序的行为将无法预测。）

```
inFix[0] = '9';
inFix[1] = '*';
inFix[2] = '4';
inFix[3] = '\0'; // <-- this is where you need to put the end-of-string marker, because this is the end of the characters you care about. 
```

将字符串结束标记放在数组的末尾可以有效地做到这一点：

```
inFix[0] = '9';
inFix[1] = '*';
inFix[2] = '4';

inFix[3] = ???
inFix[4] = ???
   .
   .
   .
inFix[98] = ???
inFix[99] = ??? // annoying bell noise? musical note symbol?

inFix[100] = '\0'; // Yes, Please! 
```

将数组初始化为全零（也可以这样做`char inFix[MAXSIZE] = {};`，空括号而不是 a `0`）对您有用的原因是因为这意味着无论您在哪里停止编写您关心的字符，下一个字符都将是 a `'\0'`。那个位置，就在你关心的角色之后，是唯一重要的地方。

由于复制字符的循环确切地知道它停止的位置，因此它也确切地知道插入字符串结尾标记的位置。`'\0'`只需在正确的位置插入一个就很容易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:28:37.713

您声明了数组：

```
char inFix[MAXSIZE]; 
```

此时，数组的内容还没有初始化。打印出这些未初始化的字符会导致你看到的行为（奇怪的字符、声音等）。

但是，该数组的内容未初始化。如果要初始化此数组，请将此行更改为：

```
char inFix[MAXSIZE] = {0}; 
```

此初始化语法导致数组中的元素被初始化。第一个元素被初始化为括号中提供的值，而任何不在括号中的值都将被初始化为 0。在上述情况下，所有数组元素都将被初始化为`0`（恰好对应于 NULL 字符`\0`） .

由于在这种情况下所有字符都初始化为 NULL，因此您无需在输入后附加空字符。

也就是说，更好的解决方案是根本不使用 C 样式数组，而是使用 a `std::vector<char>`，或者简单地使用 a `std::string`，如上所述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:08:56.290

您说您使用 null 终止字符串，`inFix[MAXSIZE] = '\0'`因为您目前理解这应该转换为`inFix[MAXSIZE - 1] = '\0'`，但在这种情况下，您说您有一个以最后一个可能字符结尾的字符串！那么你应该如何添加一些东西（例如括号）呢？因为它已满，不能再接受任何字符。

所以这可能是更好的使用`inFix[a] = '\0'`，因为你知道一个指向字符串的结尾，现在如果`a < MAXSIZE`你有足够的空间来向字符串添加更多的项目，否则你可能会增加`MAXSIZE`（`strcat`例如使用）或向用户显示一些错误.

# javascript - 如何使用 javascript 在 Google Drive 上创建文件夹

> ID：12698541
> 
> 赞同：4
> 
> 时间：2012-10-02T21:22:57.403
> 
> 标签：javascript, google-drive-api

现在我正在使用此代码将文件上传到 Google Drive： [https](https://stackoverflow.com/a/11657773/1715263) ://stackoverflow.com/a/11657773/1715263 它适用于文本文件。

使用相同的代码，我正在尝试使用来自 Google 的以下信息创建一个文件夹： [https ://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

所以谷歌说“内容类型：应用程序/json”进入标题，“应用程序/vnd.google-apps.folder”应该是正文中的mimetype（？），这就是我在我的代码中所做的，现在看起来像这样：

```
function createFolder() 
{
    var access_token = googleAuth.getAccessToken();

    var json = JSON.stringify({
        mimeType: 'application/vnd.google-apps.folder',
        title: 'Folder',
    });

    var body =  "Content-Type: application/json" + "\r\n" +
                "Content-Length: " + json.length + "\r\n" + "\r\n" +
                json;

    gapi.client.request({

        'path': '/upload/drive/v2/files/',
        'method': 'POST',
        'params': {'uploadType': 'multipart'},
        'headers': {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + access_token,             
        },
        'body': body
    }).execute(function(file) { 
        document.getElementById("info").innerHTML = "Created folder: " + file;
    }); 
```

但它只是创建一个名为“Untitled”的文件，它不是文件夹，你无法打开它。

当我将“headers”部分中的“Content-Type”更改为“application/vnd.google-apps.folder”并删除“body”部分时，它会创建一个名为“Untitled”的文件夹。

我怎样才能让它创建一个具有特定标题的文件夹？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:26:58.257

最后通过谷歌搜索 Claudios 代码让它工作，这让我找到了这段代码：[https ://stackoverflow.com/a/11361392/1715263](https://stackoverflow.com/a/11361392/1715263)

重要的改变是“路径”，它现在是“/drive/v2/files/”而不是“/upload/drive/v2/files/”。我刚刚删除了“gapi.client.load”功能，添加了标题信息并更改了正文 mimeType。

所以这里是代码：

```
function createFolder() {

   var access_token = googleAuth.getAccessToken();

   var request = gapi.client.request({
       'path': '/drive/v2/files/',
       'method': 'POST',
       'headers': {
           'Content-Type': 'application/json',
           'Authorization': 'Bearer ' + access_token,             
       },
       'body':{
           "title" : "Folder",
           "mimeType" : "application/vnd.google-apps.folder",
       }
   });

   request.execute(function(resp) { 
       console.log(resp); 
       document.getElementById("info").innerHTML = "Created folder: " + resp.title;
   });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:46:30.617

试试下面的代码：

```
function createFolder(folderName) {
  var body = {
    'title': folderName,
    'mimeType': "application/vnd.google-apps.folder"
  };

  var request = gapi.client.drive.files.insert({
    'resource': body
  });

  request.execute(function(resp) {
    console.log('Folder ID: ' + resp.id);
  });
} 
```

# c - 布尔 - 255 值

> ID：12698542
> 
> 赞同：0
> 
> 时间：2012-10-02T21:22:59.200
> 
> 标签：c

我定义了这个函数：

```
struct heap_validation {
    size_t num_alloc;
    size_t num_alloc_sz;
    struct memory *mem;
};
...
bool get_isallocated(struct metadata_record *); 
```

当我从 hashtable_traverse 调用 heap_validation 函数并打印结果时，我得到了以下值： 0,255 ,246

```
void hashtable_traverse(struct metadata_record *metarec,
        struct heap_validation *heap_val) {

    printf("get_isallocated(metarec): %d\n",get_isallocated(metarec));

    bool retrieved = false;
    bool allocated = get_isallocated(metarec);
    if (allocated) {
        heap_val->num_alloc += 1; 
```

我也尝试了 %d 并且得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:52:57.220

如果不包括`<stdbool.h>`则不`bool`保证为`_Bool`.

在 C++（第 4.5/4 节）中，当一个值转换为 时`bool`，它变为 0 或 1：

> bool 类型的右值可以转换为 int 类型的右值，false 变为 0，true 变为 1。

在 C (§6.3.1.2/1) 中，当一个值转换为 _Bool 时，它变为 0 或 1：

> 当任何标量值转换为 _Bool 时，如果该值比较等于 0，则结​​果为 0；否则，结果为 1。

如果您得到除零和一之外的值，则`bool`不是`_Bool`并且`get_isallocated()`返回除零或一之外的值：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  _Bool x=69;
  printf("x=%d\n",x);
  exit(EXIT_SUCCESS);
} 
```

将打印出来`x=1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:27:50.097

如果我理解你是正确的，那么也许你想要布尔输出： -

```
printf("get_isallocated(metarec): %d\n",get_isallocated(metarec)!=0); 
```

或者

```
printf("get_isallocated(metarec): %s\n",get_isallocated(metarec)!=0?"True":"False"); 
```

它将输出一个`0`or `1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:51:30.620

您应该获取值`0`或`1`从`stdbool.h` `bool`类型。

如果不是这种情况，您的程序（可能是`get_isallocated`函数）正在调用未定义的行为，或者您没有使用`bool`from`stdbool.h`而是另一个标准整数类型的别名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:34:37.777

事实证明，函数“hashtable_traverse”是 GLib 的 g_hash_table_foreach() 调用的函数，用于迭代 GHashTable，需要键和值。我只有值和指向用户数据的指针。

metarec 是值，key 应该是地址指针（第一个参数），heap_val 是用户数据，在 g_hash_table_foreach() 中是可选的

# java - Integer.MAX_VALUE 和 Integer.MIN_VALUE 如何初始化？

> ID：12698544
> 
> 赞同：0
> 
> 时间：2012-10-02T21:23:12.987
> 
> 标签：java, primitive

**这是一个愚蠢的问题。我仍在学习，并且严重地过度考虑了这种情况。**

* * *

在 的源代码中`Integer`，它显示`MIN_VALUE`并`MAX_VALUE`声明为：

```
public static final int MIN_VALUE = 0x80000000;  
public static final int MAX_VALUE = 0x7fffffff; 
```

`int`我的问题是，这些s 首先是如何声明的？似乎必须知道这些值才能开始验证（或溢出或其他）值。它显然不能在声明之前检查自己，那么这是如何工作的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:34:47.443

> 首先如何声明这些整数？

您正在显示声明它们的两行...

> 似乎必须知道这些值才能验证这些值

这些常数是已知的，这些是它们的值。

换句话说，一个`int`值的限制受到它们必须适合 32 位这一事实的约束。这两个变量是为了方便而存在的，但不用于确定是否`int`应该溢出。

值的范围`int`在[Java 语言规范 #4.2.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1)中定义- 这些常量仅反映规范：

> 整数类型的值是以下范围内的整数：
> 
> *   [...]
> *   对于 int，从 -2147483648 到 2147483647，包括

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:29:01.707

编译阶段的验证/可能的溢出检查由编译器完成，它可能具有（并且可能具有）硬编码的那些已知值。

换句话说，编译器不需要查看 MIN_VALUE 或 MAX_VALUE 来验证程序，这些值只是被视为任何常量，并且就编译器而言可以定义为任何值。当然，如果它们被更改，那么真正关心常量的程序可能也不会运行良好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T21:29:28.240

在 Java 中，整数是 32 位长的。根据定义，值`0x07ffffff`和`0x08000000`是可能的最大值和最小值。

# javascript - 以这种方式将参数传递给匿名函数的目的是什么？

> ID：12698546
> 
> 赞同：60
> 
> 时间：2012-10-02T21:23:23.237
> 
> 标签：javascript, jquery, google-closure-compiler

> **可能重复：**
> [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

我在玩[Google Closure Compiler](http://closure-compiler.appspot.com/home)，输入随机代码来看看它会做什么。

它重写了我的一个函数，看起来像这样：

```
(function(msg) { console.log(msg); })("Hello World!");​​​​​​​ 
```

看起来这`"Hello World"`是传递`msg`给它之前的匿名函数的参数。我看了一会儿，以为我在 jQuery 插件中看到过类似的东西，看起来像：

```
(function( $ ) {
  ...
})(jQuery); 
```

在与`$`. 但是将参数传递给这样的匿名函数的主要原因或目的是什么？为什么不简单地将参数定义为函数中的变量？编写这样的函数是否有任何性能或灵活性优势？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T21:27:39.493

还有一个与范围有关的显着差异。以下代码：

```
(function(msg) { console.log(msg); })("Hello World!");​​​​​​​ 
```

在某些情况下，在命名空间污染方面比这更干净：

```
var msg = "Hello World!";
console.log(msg); 
```

因为第二个代码在不再需要后留下变量，但可能会干扰代码的其他部分。

当您在任何其他函数之外执行上述代码时，这一点尤其重要：在这种情况下，`msg`变量将在页面上的任何地方都可用，作为全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:34:50.097

基本上，将您的代码包含在其中始终是一个好主意：`(function(){/*code*/}());`防止您的 var 与其他人的 var 发生冲突。

我认为闭包编译器的主要目的是保存 5 个字符：`var `和`=`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:02:57.950

这取决于上下文。在某些情况下，编译器根本不会尝试内联任何函数（例如，如果作用域函数包含“eval”）。如果这是在全局范围内并且您在 ADVANCED 模式下运行，则只是在编译器停止尝试内联函数后出现内联机会（或者内联代码中存在错误并且它错过了机会）。如果您在 ADVANCED 模式下通过编译器运行示例输出，您会得到：

```
console.log("Hello World!"); 
```

# sql-server - 用于生成有关内存和 CPU 使用情况的警报的 Powershell 脚本

> ID：12698548
> 
> 赞同：2
> 
> 时间：2012-10-02T21:23:32.830
> 
> 标签：sql-server, powershell, wmi, powershell-2.0

“我想编写一个 powershell 脚本，它将在两个参数上生成警报：CPU 和内存。我将使用 WMI 对象，一旦达到其中任何一个的阈值，脚本应该生成一个警报。（阈值是 80% ）如果我也可以在远程服务器上运行此脚本，则进一步增强。有没有办法找到要使用的 wmi-object 类以及一般脚本的外观。我正在使用 64 位机器“

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:11:27.987

在 PS2.0 中，您拥有直接从 WMI 获取实时、实时性能计数器数据的 cmdlet。

查看：

```
Get-Counter '\Memory\Available MBytes'
Get-Counter '\Processor(_Total)\% Processor Time' 
```

而且当然：

```
Get-Help Get-Counter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:15:07.063

为什么它必须是 WMI ？如果我试图通过 powershell 执行此操作，我将简单地使用[get-counter ，如此处所示](http://technet.microsoft.com/en-us/magazine/ee872428.aspx)。这里还有一个[很好的 MVP 示例](http://computerperformance.co.uk/powershell/powershell_get_counter.htm)。

如果您真的停留在 WMI 上，那么 MVP 链接也提供了一些关于该方向的建议，但在代码示例方面几乎没有那么多。

另请记住，您必须考虑您正在监视的[内核/处理器](http://social.technet.microsoft.com/Forums/lv/winserverpowershell/thread/8d7502d4-9e67-43f7-94da-01755b719cf8)数量，因为它会影响 get-counter 的值的真正含义。

# php - 点击收音机立即更新数据库

> ID：12698551
> 
> 赞同：0
> 
> 时间：2012-10-02T21:23:57.417
> 
> 标签：php, forms, onclick, radio

我在页面上有几个带有单选按钮的表单。我的目标是通过单击单选按钮立即更新数据库。到目前为止，这是我汇总的内容，但我不确定从这里去哪里。

```
<? include 'dbconnect.inc.php';?>
<script type="text/javascript">function do_submit(){document.forms['decision'].submit();}</script>

<? $result = $mysqli->query("SELECT * FROM items");
   while( $row = $result->fetch_assoc() ){ ?>
   <form name='decision' method='post' action='action.php'>
       <label>Keep:</label><input type='radio' name='dec' value='keep' onchange='do_submit()' <? if($row['Dec1']=='keep'){echo "checked='checked'";} ?> >
       <label>Donate:</label><input type='radio' name='dec' value='donate' onchange='do_submit()' <? if($row['Dec1']=='donate'){echo "checked='checked'";} ?> >
       <label>Sell:</label><input type='radio' name='dec' value='sell' onchange='do_submit()' <? if($row['Dec1']=='sell'){echo "checked='checked'";} ?> >
       <label>Trash:</label><input type='radio' name='dec' value='trash' onchange='do_submit()' <? if($row['Dec1']=='trash'){echo "checked='checked'";} ?> >
       <label>Give To:</label><input type='text' name='dec' size='15' onchange='do_submit()' <? if($row['Dec1']!='keep' || $row['Dec1']!='donate' || $row['Dec1']!='sell' || $row['Dec1']!='trash'){echo $row['Dec1'];} ?> >
       <input type='hidden' name='Id' value='<? echo $row['Id']; ?>' />
   </form>
   <? } ?> 
```

动作.php

```
<? $mysqli->query("UPDATE items SET  Dec1 =  '{$_POST['dec']}' WHERE Id = '{$_POST['$Id']}'") or die(mysqli_error($mysqli)); ?> 
```

我在附近吗？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:30:07.510

这是未经测试的，但您可能想要使用这样的东西（AJAX + jQuery）。需要添加相当多的内容才能正确传递所有变量。

```
$(":radio").click(function(){  
    $("#result").html(ajax_load);  
    $.post(  
        loadUrl,  
        {myvariable: "myvalue", myothervariable: "myothervalue"},  
        function(responseText){  
            $("#result").html(responseText);  
        },  
        "html"  
    );  
}); 
```

这也是一本很好的补充读物： [5 Ways to Make Ajax Calls with jQuery](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:25:02.543

绑定一个 ajax onclick 事件以将命令发送到您的操作脚本。

内联php不是要走的路。

# slimdx - 使用 KeyedMutex 的 SlimDX 变形设备

> ID：12698552
> 
> 赞同：0
> 
> 时间：2012-10-02T21:24:06.000
> 
> 标签：slimdx, direct2d, direct3d11, warp

我通过 KeyedMutex 使用 Direct2D 和 DirectX11。如果我使用的是硬件设备，一切都很好。当我默认使用 Warp 设备时，我在创建 Texture2D 对象时遇到问题，我收到错误消息“Direct3D11Exception：E_OUTOFMEMORY：内存不足”

这些是负责的行：

```
 SlimDX.Direct3D11.Texture2DDescription tds = SlimDX.Direct3D11.Texture2D.FromSwapChain(swapChain, 0).Description;
    tds.BindFlags |= BindFlags.ShaderResource;
    tds.SampleDescription = new SampleDescription(1, 0);
    tds.OptionFlags |= ResourceOptionFlags.KeyedMutex;
    textureD3D11 = new SlimDX.Direct3D11.Texture2D(device, tds); 
```

同样，使用硬件设备一切都很好，而不是 Warp。当我对 PIX 运行它时，我看到了这个：

<0x09033390> ID3D11Device:CreateTexture2D(0x0FD1E330, NULL, 0x0FD1E32C --> NULL)

那是使用 Warp 驱动程序，但是当我使用最后一个 NULL 不是 NULL 的硬件时，它是一个指向 D3D11 Texture2D 对象的实际指针。

有什么想法吗？我知道我在这里没有包含太多代码，但我希望有人知道这是什么而不必发布整个 DX 例程。如果需要，我会的。

我确实使用调试和 10.1 DX。调试输出如下：

```
DXX32: Warn: Registry value too long: MainVideo_SET in SYSTEM\ControlSet001\Control\Class\{4D36E968-E325-11CE-BFC1-08002BE10318}\0000\UMD
DXX32: Warn: Registry value too long: MainVideo_SET in SYSTEM\ControlSet001\Control\Class\{4D36E968-E325-11CE-BFC1-08002BE10318}\0000\UMD
D3D11: WARNING: ID3D11Device::SetPrivateData: Possible re-use of existing private data GUID for different data (size has changed). [ STATE_SETTING WARNING #55: SETPRIVATEDATA_CHANGINGPARAMS ]
D3D11: WARNING: ID3D11Texture2D::SetPrivateData: Existing private data of same name with different size found! [ STATE_SETTING WARNING #55: SETPRIVATEDATA_CHANGINGPARAMS ]
Unable to load D2D debug layer
First-chance exception at 0x7558d36f in nART.exe: Microsoft C++ exception: _com_error at memory location 0x068ec964..
First-chance exception at 0x7558d36f in nART.exe: Microsoft C++ exception: _com_error at memory location 0x068eccf8..
First-chance exception at 0x7558d36f in nART.exe: Microsoft C++ exception: _com_error at memory location 0x068ece3c..
First-chance exception at 0x7558d36f in nART.exe: Microsoft C++ exception: _com_error at memory location 0x068edfb4..
D3D11: ERROR: ID3D11Device::CreateTexture2D: Returning E_OUTOFMEMORY, meaning memory was exhausted. [ STATE_CREATION ERROR #105: CREATETEXTURE2D_OUTOFMEMORY_RETURN ]
D3D11: WARNING: Live Device: Name="device", Addr=0x00097D58, ExtRef=4 [ STATE_CREATION WARNING #2097297: LIVE_DEVICE ]
D3D11: WARNING: Live Device Child Summary: Device Addr=0x00097D58
Using ID3D11Debug::ReportLiveDeviceObjects with D3D11_RLDO_DETAIL will help drill into object lifetimes. Objects with ExtRef=0 and IntRef=0 will be eventually destroyed through typical Immediate Context usage. However, if the application requires these objects to be destroyed sooner, ClearState followed by Flush on the Immediate Context will realize their destruction.
Live              Context:      1
Live               Buffer:      0
Live            Texture1D:      0
Live            Texture2D:      1
Live            Texture3D:      0
Live   ShaderResourceView:      0
Live     RenderTargetView:      1
Live     DepthStencilView:      0
Live         VertexShader:      0
Live       GeometryShader:      0
Live          PixelShader:      0
Live          InputLayout:      0
Live              Sampler:      1
Live           BlendState:      1
Live    DepthStencilState:      1
Live      RasterizerState:      1
Live                Query:      1
Live            Predicate:      0
Live              Counter:      0
Live          CommandList:      0
Live           HullShader:      0
Live         DomainShader:      0
Live        ClassInstance:      0
Live         ClassLinkage:      0
Live        ComputeShader:      0
Live  UnorderedAccessView:      0
 [ STATE_CREATION WARNING #2097298: LIVE_OBJECT_SUMMARY ]
A first chance exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll
An unhandled exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll

Additional information: E_OUTOFMEMORY: Ran out of memory (-2147024882) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:00:34.163

Warp 设备在 windows 7 中最多只能支持功能级别 10.1。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff728764(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff728764(v=vs.85).aspx)

此外，如果您想获得正确的错误消息，请使用调试选项标志创建您的设备。

然后在项目属性的调试选项卡中，勾选“启用非托管代码调试”

现在您调试您的调试输出中将有更清晰的通知。

# android - 获取数组列表 来自 Intent 中保存的 OnActivityResult 函数

> ID：12698555
> 
> 赞同：1
> 
> 时间：2012-10-02T21:24:18.353
> 
> 标签：android, android-activity

我目前正在开发一个 android 项目，并且我有一个使用该`startActivityForResult()`功能开始的活动。

在这个活动中，我有一个 ArrayList，我创建了一个 Internet，然后将结果设置为意图，如下面的代码所示。

```
private void getSearchData()
    {
        ArrayList<Spanned> passwords = null;
        String searchTerm = txtSearch.getText().toString();
        GetSearchResults search = new GetSearchResults(this, searchTerm);
        if (rdoApp.isChecked())
        {
            passwords = search.getData(SearchType.App);
        }
        else if (rdoName.isChecked())
        {
            passwords = search.getData(SearchType.Name);
        }
        else if (rdoUsername.isChecked())
        {
            passwords = search.getData(SearchType.Username);
        }

        Intent intent = new Intent();
        intent.putExtra("searchResults", passwords);
        setResult(1, intent);
        finish();
    } 
```

然后，在函数的第一个活动中，`OnActivityResult`我想获取 ArrayList 以便我可以处理数据。到目前为止，我有以下代码。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    common.showToastMessage("Result received", Toast.LENGTH_LONG);
    Bundle bundle = data.getExtras();

} 
```

我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:37:33.310

我设法找到了一种方法，这要感谢@Jan Gerlinger 的回答为我指明了正确的方向，但我已经找到了方法。

在我设置结果的活动中，我有以下代码

```
ArrayList<Spanned> passwords = search.getResult();
Intent intent = new Intent();
Bundle bundle = new Bundle();
bundle.putSerializable("passwords", passwords);
intent.putExtras(bundle);
setResult(1, intent);
finish(); 
```

在 OnActivityResult 函数内部的活动中，我有以下内容

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
common.showToastMessage("Result received", Toast.LENGTH_LONG);
Bundle bundle = data.getExtras();
ArrayList<Spanned> passwords = (ArrayList<Spanned>) bundle.getSerializable("passwords");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:05:38.860

```
intent.putExtra("searchResults", passwords); 
```

这里使用的[`putExtra(String name, Serializable value)`](https://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)方法。所以你可以用[`getSerializableExtra(String name)`](https://developer.android.com/reference/android/content/Intent.html#getSerializableExtra%28java.lang.String%29)它来取回它：

```
ArrayList<Spanned> passwords = (ArrayList<Spanned>) data.getSerializableExtra("searchResults"); 
```

根据您的[Spanned](https://developer.android.com/reference/android/text/Spanned.html)对象的类型以及它们是否实现`Serializable`，这可能会抛出异常，因为`Spanned`它没有`Serializable`直接实现。

# html - 设计一个包含图像的自由文本框

> ID：12698556
> 
> 赞同：0
> 
> 时间：2012-10-02T21:24:22.080
> 
> 标签：html, css

我刚开始编码（HTML 和 CSS），我必须创建一个包含两个自由文本框的选择加入表单：一个用于名称，一个用于电子邮件，但它们在自由文本框的右端也有图像. （不幸的是，我无法发布图像。）

我可以在自由文本框和按钮周围找到方法，但我不确定如何在其中包含图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:35:03.153

你可以试试这个

**CSS**

```
#name{
    background:url(http://imagePath/ImageFile) no-repeat right;
} 
```

**HTML**

```
<input type="text" name="Name" id="name" /> 
```

[**演示**](http://jsbin.com/oyupag/1/edit)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:37:59.093

听起来像这样：

```
input[type=text] {
    background: url(path/to/image) right 0 no-repeat;
} 
```

[jsfiddle](http://jsfiddle.net/TrqVU/)（在我的演示中，我使用了在 Google 图片上找到的复选标记，但您可以使用您想要/需要的东西。

# r - 在R中的循环中替换大于特定值的值

> ID：12698560
> 
> 赞同：1
> 
> 时间：2012-10-02T21:24:43.537
> 
> 标签：r, loops

我试图找出一种方法来遍历我的数据框并用小数点替换任何大于 200 的值。

这是我的代码：

```
for (i in data$AGE) if (i > 199) i <- i*.01-2 
```

这是我的数据框的 head() 示例：

```
 AGE LOC RACE SEX WORKREL PROD1 ICD10 INJ_ST DTH_YEAR DTH_MONTH DTH_DAY ACC_YEAR ACC_MONTH ACC_DAY
1  26   5    1   1       0  1290  V865     UT     2003         1       1     2002        12      31
2  20   1    7   2       0  1899   X47     HI     2003         1       1     2003         1       1
3 202   1    2   2       0  1598   W75     FL     2003         1       1     2003         1       1
4  86   5    1   2       0  1807   W18     FL     2003         1       1     2002        12      14
5 203   1    2   1       0  1598   W75     GA     2003         1       1     2003         1       1
6  79   0    1   2       2   921   X49     MA     2003         1       1       NA        NA      NA 
```

所以基本上，如果 AGE 的值大于 200，那么我想将该值乘以 0.01，然后减去 2。

**我的原因是因为 200 或更大的任何值都是以月为单位的年龄。**

我不是 Stats 或 R 天才，所以我先谦虚地感谢所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:34:46.743

```
data$AGE[data$AGE> 200] <- data$AGE[data$AGE > 200] * 0.01 - 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T23:05:17.057

`within`你可以相当优雅地做到这一点`replace`

```
data <- within(data, AGE <- replace(AGE, AGE > 200, AGE[AGE>200] * 0.01-2)) 
```

或`data.table`用于内存效率和语法优雅

```
library(data.table)
DT <- as.data.table(data)
# make sure that AGE is numeric not integer
DT[,AGE:= as.numeric(AGE)]

DT[AGE>200, AGE := AGE *0.01 -2] 
```

# java - 如何在 Java 中将字符串转换为 XML 对象

> ID：12698561
> 
> 赞同：1
> 
> 时间：2012-10-02T21:24:45.867
> 
> 标签：java, xml, xml-parsing

我从 Web 服务获取 SOAP 消息，并且可以使用以下代码将响应字符串转换为 XML 文件。这工作正常。但我的要求是不要将 SOAP 消息写入文件。我只需要将这个 XML 文档对象保存在内存中，并提取一些元素以用于进一步处理。但是，如果我只是尝试访问下面的文档对象，它是空的。

有人可以告诉我如何将 a 转换为`String`内存中的 XML 对象（无需写入文件）？

```
String xmlString = new String(data); 
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  

DocumentBuilder builder;  
try  
{  
    builder = factory.newDocumentBuilder();  

    // Use String reader  
    Document document = builder.parse( new InputSource(  
            new StringReader( xmlString ) ) );  

    TransformerFactory tranFactory = TransformerFactory.newInstance();  
    Transformer aTransformer = tranFactory.newTransformer();  
    Source src = new DOMSource( document );  

    Result dest = new StreamResult( new File( "xmlFileName.xml" ) );  
    aTransformer.transform( src, dest );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:35:00.133

删除最后 5 行代码，您将只在内存中拥有 DOM 文档。将此文档存储在某个字段中，而不是存储在局部变量中。

如果这还不够，请用代码解释*“如果我只是尝试访问下面的文档对象，它是空的”是*什么意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:57:53.363

JB Nizet 是对的，第一步是从`xmlString`. 这会将您的 xmlString（或 SOAP 消息）加载到内存中的文档中。以下步骤正在做什么（与 Transform 相关的所有事情）是将 DOM 序列化为文件（xmlFileName.xml），这不是您想要做的，对吧？

当您说您的 DOM 为空时，我认为您尝试使用 打印出 DOM 的内容`document.toString()`，并返回类似“[document: null]”的内容。这并不意味着你的 DOM 是空的。实际上，您的 DOM 包含数据。您现在需要使用 DOM API 来访问文档中的节点。尝试类似的东西`document.getChildNodes(), document.getElementsByTagName(), etc`

# android - 如何阻止 Android 应用程序在恢复时崩溃？

> ID：12698568
> 
> 赞同：0
> 
> 时间：2012-10-02T21:25:24.860
> 
> 标签：android

我试图使我的游戏多任务友好，但是每当屏幕关闭并重新打开，或者游戏被导航离开和返回时，我都会得到一个指向这部分代码的空指针异常：

`GLES20.glUniformMatrix3fv(mTextureMatrixHandle, 1, false, render.mTexMatrix, 0);`

除了 super.onResume(); 我什么都没有 和 mGLSurfaceView.onResume(); onResume() 方法和 onPause() 方法相同，除了 onPause 而不是 onResume。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:33:35.597

您必须确保在重新启动活动时重新创建对象。这些变量在哪里初始化？这种错误的典型情况是当您将对象存储在全局变量中时。再次创建活动时，它们为空。

所以：检查 mTextureMatrixHandle、render 或 render.mTexMatrix 中的哪一个为空。如果它为空，则重新创建它。

通常，您不应依赖在活动创建时恢复的任何数据。所以不要使用全局变量，只依赖通过意图传递的数据。如果你真的想使用全局数据，你应该知道它可能会被重置，并在需要时重新创建它。

# r - 在 R 中匿名引用向量

> ID：12698569
> 
> 赞同：2
> 
> 时间：2012-10-02T21:25:26.543
> 
> 标签：r

而不是写一个向量下标操作一行，例如：

```
x.and.y <- intersect(x, y)
idx.x <- match(x, x.and.y)
idx.x <- idx.x[!is.na(idx.x)] 
```

我可以将它们串联成一行：

```
x.and.y <- intersect(x, y)
idx.x <- subset(tmp <- match(x, x.and.y), !is.na(tmp)) 
```

为了做到这一点，我必须给中间向量一个名称，以便在下标操作中使用。为了使代码更加简洁，有没有办法匿名引用向量？像这样：

```
x.and.y <- intersect(x, y)
idx.x <- match(x, x.and.y)[!is.na] ## illegal R 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:34:04.957

考虑到`intersect`电话`match`，你正在做的是多余的。 `intersect`定义为：

```
function (x, y) 
{
    y <- as.vector(y)
    unique(y[match(as.vector(x), y, 0L)])
} 
```

`%in%`您可以使用:获得与 3 行代码相同的结果`x[y%in%x]`。

我意识到这可能不能代表您的实际问题，但是“匿名引用向量”并不真正适合 R 范式。函数参数是按值传递的。您实际上是在说，“我想要一个函数来操作一个对象，但我不想将对象提供给函数。”

您可以使用 R 的范围规则来执行此操作（这是 mplourde 使用`Filter`匿名函数所做的），但您将创建相当多的复杂代码。

# php - php - 即使文件名不同，上传脚本 mkdir 说文件已经存在时相同的目录

> ID：12698571
> 
> 赞同：0
> 
> 时间：2012-10-02T21:25:42.373
> 
> 标签：php, mysql, upload, mkdir

我的上传脚本说当我尝试上传时我的文件已经存在，即使文件名不同

```
<?php
// Start a session for error reporting
session_start();
?>
<?php
// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
    header('Location: index.html');
}

// Call our connection file
include('config.php');

// Check to see if the type of file uploaded is a valid image type
function is_valid_type($file)
{
// This is an array that holds all the valid image MIME types
$valid_types = array("image/jpg", "image/JPG", "image/jpeg", "image/bmp", "image/gif",  "image/png");

if (in_array($file['type'], $valid_types))
    return 1;
return 0;
}

// Just a short function that prints out the contents of an array in a manner that's easy to read
// I used this function during debugging but it serves no purpose at run time for this   example
function showContents($array)
{
echo "<pre>";
print_r($array);
echo "</pre>";
}

// Set some constants
// Grab the User ID we sent from our form
$user_id = $_SESSION['username'];
$category = $_POST['category'];

// This variable is the path to the image folder where all the images are going to be stored
// Note that there is a trailing forward slash
$TARGET_PATH = "img/users/$category/$user_id/";
mkdir($TARGET_PATH, 0755, true);

// Get our POSTed variables
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$contact = $_POST['contact'];
$price = $_POST['price'];
$image = $_FILES['image'];

// Build our target path full string.  This is where the file will be moved do
// i.e.  images/picture.jpg
$TARGET_PATH .= $image['name'];

// Make sure all the fields from the form have inputs
if ( $fname == "" || $lname == "" || $image['name'] == "" )
{
$_SESSION['error'] = "All fields are required";
header("Location: error.php");
exit;
}

// Check to make sure that our file is actually an image
// You check the file type instead of the extension because the extension can easily be faked
if (!is_valid_type($image))
{
$_SESSION['error'] = "You must upload a jpeg, gif, or bmp";
header("Location: error.php");
exit;
}

// Here we check to see if a file with that name already exists
// You could get past filename problems by appending a timestamp to the filename and then continuing
if (file_exists($TARGET_PATH))
{
$_SESSION['error'] = "A file with that name already exists";
header("Location: error.php");
exit;
}

// Lets attempt to move the file from its temporary directory to its new home
if (move_uploaded_file($image['tmp_name'], $TARGET_PATH))
{
// NOTE: This is where a lot of people make mistakes.
// We are *not* putting the image into the database; we are putting a reference to the file's location on the server

$imagename = $image['name'];

$sql = "insert into people (price, contact, category, username, fname, lname, expire, filename) values (:price, :contact, :category, :user_id, :fname, :lname, now() + INTERVAL 1 MONTH, :imagename)";
                            $q = $conn->prepare($sql) or    die("failed!");
                            $q->bindParam(':price', $price, PDO::PARAM_STR);
                            $q->bindParam(':contact', $contact, PDO::PARAM_STR);
                            $q->bindParam(':category', $category, PDO::PARAM_STR);
                            $q->bindParam(':user_id', $user_id, PDO::PARAM_STR);
                            $q->bindParam(':fname', $fname, PDO::PARAM_STR);
                            $q->bindParam(':lname', $lname, PDO::PARAM_STR);
                            $q->bindParam(':imagename', $imagename, PDO::PARAM_STR);
                            $q->execute();

$sql1 = "UPDATE people SET firstname = (SELECT firstname FROM user WHERE username=:user_id1) WHERE username=:user_id2";
                            $q = $conn->prepare($sql1) or die("failed!");
                            $q->bindParam(':user_id1', $user_id, PDO::PARAM_STR);
                            $q->bindParam(':user_id2', $user_id, PDO::PARAM_STR);
                            $q->execute();

$sql2 = "UPDATE people SET surname = (SELECT surname FROM user WHERE username=:user_id1) WHERE username=:user_id2";
                            $q = $conn->prepare($sql2) or die("failed!");
                            $q->bindParam(':user_id1', $user_id, PDO::PARAM_STR);
                            $q->bindParam(':user_id2', $user_id, PDO::PARAM_STR);
                            $q->execute();

header("Location: search.php");
exit;
}
else
{
// A common cause of file moving failures is because of bad permissions on the directory attempting to be written to
// Make sure you chmod the directory to be writeable
$_SESSION['error'] = "Could not upload file.  Check read/write persmissions on the directory";
header("Location: error.php");
exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:30:43.217

您应该`is_dir`在要验证目录时使用

从 PHP 文档开始`file_exists`

> ***如果 filename 指定的文件或目录***存在，则返回 TRUE ；否则为假。

从 PHP 文档开始`is_dir`

> ***如果文件名存在并且是目录***，则返回 TRUE ，否则返回 FALSE。

请运行以下测试脚本

```
if (! is_dir($TARGET_PATH) &&  is_writable($TARGET_PATH)) {
    #var_dump before
    var_dump(is_dir($TARGET_PATH), is_writable($TARGET_PATH));
    mkdir($TARGET_PATH, 0755, true);
}

#var_dump after
var_dump(is_dir($TARGET_PATH), is_writable($TARGET_PATH)); 
```

# sql - Oracle：为其他两列的唯一组合添加增量 ID

> ID：12698572
> 
> 赞同：1
> 
> 时间：2012-10-02T21:25:43.357
> 
> 标签：sql, oracle, escaping

我有一张看起来像这样的桌子

```
Seq ID | Uid | Type | URL 
```

对于每个给定类型，`Uid`我可以有多个`Urls`，例如

`Uid 123`可以有`5 video urls`和`6 image type urls`

我想为每个组合插入自动递增的 seq id，`Uid`因此`Type`在前面的示例中，seq `id`of`uid 123`和 type video 将`1,2,3,4,5`适用于 each`video url`和`1,2,3,4,5,6`each `image type url`，并且对于所有其他`uid`和`type`组合都相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:29:30.820

我会避免尝试将这种人工构造存储在数据库中。如果需要，可以在查询时生成：

```
SELECT Uid, Type, URL,
       ROW_NUMBER() OVER(PARTITION BY Uid, Type ORDER BY URL) AS SeqID
    FROM YourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:29:39.663

您可以在查询中执行此操作吗？

```
select row_number() over (partition by uid, type order by url) as seqID, . . .
from table 
```

您也可以在更新中执行此操作，以进行事后更新：

```
with toupdate as (
     select row_number() over (partition by uid, type order by url) as newseqID, . . .
     from table
)
update toudpate
    set seqID as newseqID 
```

如果您想将其作为插入的一部分，您需要创建一个触发器来维护列值。

# jakarta-ee - Struts.xml 将全局结果类型定义为 Tile

> ID：12698574
> 
> 赞同：0
> 
> 时间：2012-10-02T21:25:50.057
> 
> 标签：jakarta-ee, struts2, tiles2

我在 Struts2 中使用 Tiles。在 struts.xml 中，我需要`<result-types>`为每个包定义。我怎样才能使它成为全球性的，所以所有的包都显示类型为**瓷砖**`<result type="tiles"></result>`

```
 <package name="student" namespace="/student" extends="struts-default">

        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
</package> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:43:43.307

您会将您的操作放入一个扩展包中，`"tiles-default"`而不是`"struts-default"`. 包`"tiles-default"`已经定义了一个`"tiles"`结果类型。

或者，您可以创建一个父包来扩展`"tiles-default"`并将其用作所有应用程序包的父包。

# ruby-on-rails-3 - Rails提交按钮：单击时如何让按钮运行某种方法？

> ID：12698575
> 
> 赞同：5
> 
> 时间：2012-10-02T21:25:51.880
> 
> 标签：ruby-on-rails-3, forms

我正在学习如何构建 Rails 应用程序，但我仍然不完全了解如何让按钮发挥作用。如何使用表单中提供的属性运行特定方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T21:34:14.247

```
<%= button_to "Acknowledged", { :controller => 'practice_sessions',
  :id => @practice_session.id}, 
  :method => :put %> 
```

来自[https://stackoverflow.com/a/4198918/643500](https://stackoverflow.com/a/4198918/643500)

阅读[http://edgeguides.rubyonrails.org/getting_started.html](http://edgeguides.rubyonrails.org/getting_started.html)

更多示例

```
<%= button_to "New", :action => "new" %>
# => "<form method="post" action="/controller/new" class="button_to">
#      <div><input value="New" type="submit" /></div>
#    </form>"

<%= button_to "New", :action => "new", :form_class => "new-thing" %>
# => "<form method="post" action="/controller/new" class="new-thing">
#      <div><input value="New" type="submit" /></div>
#    </form>"

<%= button_to "Create", :action => "create", :remote => true, :form => { "data-type" => "json" } %>
# => "<form method="post" action="/images/create" class="button_to" data-remote="true" data-type="json">
#      <div><input value="Create" type="submit" /></div>
#    </form>"

<%= button_to "Delete Image", { :action => "delete", :id => @image.id },
          :confirm => "Are you sure?", :method => :delete %>
# => "<form method="post" action="/images/delete/1" class="button_to">
#      <div>
#        <input type="hidden" name="_method" value="delete" />
#        <input data-confirm='Are you sure?' value="Delete" type="submit" />
#      </div>
#    </form>" 
```

来自[http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)

# ios - AFNetworking 不缓存 HTTPS 请求

> ID：12698581
> 
> 赞同：1
> 
> 时间：2012-10-02T21:26:13.747
> 
> 标签：ios, caching, afnetworking

我们正在构建一个使用 AFNetworking 连接到运行 Tornado 的服务器的 iOS 应用程序。服务器`Cache-Control: private, max-age=900`在响应中包含标头。在我的本地计算机上运行服务器时，我可以看出 AFNetworking 使用缓存的值，因为服务器没有收到来自应用程序的重复请求的请求。当我们将相同的 Tornado 服务器部署到测试机器时，来自应用程序的每个请求都会导致服务器上收到一个请求，而忽略缓存的值。

两种设置之间的唯一区别是服务器的 URL 以及测试服务器是通过 HTTPS 连接访问的事实，而 localhost 使用 HTTP。HTTPS 是否会影响 AFNetworking 的缓存，如果是，我们如何让 AFNetworking 尊重缓存标头？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T01:09:57.643

不确定它是否会有所帮助，但无论如何：AFNetworking 使用 NSURLConnection，它使用 NSURLCache 共享缓存。AFNetworking 在缓存方面绝对透明，不做任何具体的事情。我的请求是 https 并且缓存得很好。

Cache-Control 响应指令允许源服务器覆盖响应的默认可缓存性： private 表示响应消息的全部或部分是针对单个用户的，并且不得由共享缓存缓存。这允许源服务器声明响应的指定部分仅针对一个用户，而不是对其他用户请求的有效响应。私有（非共享）缓存可以缓存响应。 [http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)

如果可以接受，请尝试将政策更改为 public 。记录来自应用程序的响应的标头并查看您的 cache.db 并查看是否确实存在缓存。

尝试配置共享缓存 - 类似于

```
int cacheSizeMemory = 1*1024*1024; // 4MB
int cacheSizeDisk = 100*1024*1024; // 100MB
[[NSURLCache sharedURLCache] setMemoryCapacity:cacheSizeMemory];
[[NSURLCache sharedURLCache] setDiskCapacity:cacheSizeDisk]; 
```

另一个很好的阅读这里 [http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/](http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/)

# r - R 函数 zip(utils) 在我的机器上不起作用

> ID：12698583
> 
> 赞同：2
> 
> 时间：2012-10-02T21:26:23.170
> 
> 标签：r, windows-xp, compression, zip, admin

我想使用 zip(utils) 函数，解压缩函数可以正常工作，但是，调用 zip 例如 zip ("out", "file.txt") 不会将文件 ("out.zip") 返回到工作目录并且 R 根本不返回任何消息 - 任何错误消息并且没有关于成功压缩的消息 - 如果压缩成功 R 返回诸如“deflate - 40%”之类的信息。我检查了各种 R 版本和文件 - zip 仍然不起作用。在另一台计算机上，一切正常。我有 Windows XP。此外，当我输入要压缩的 zip 文件的错误名称时，例如 zip("out", "this_file_doesnt_exist.txt") R 根本不会返回任何错误！我对电脑不太了解，我应该检查什么？在我的情况下可能有什么问题？我关闭了没有帮助的防病毒软件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-05-27T08:04:34.000

对于那些在 2020 年阅读本文的人：

安装 Rtools ( [https://cran.r-project.org/bin/windows/Rtools/](https://cran.r-project.org/bin/windows/Rtools/) ) 并按照文档步骤进行操作。

然后 Zip 命令将在 Windows 10 机器上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:15:27.277

您可以`gzip`从包装中使用`R.utils`

```
library(R.utils)
df <- data.frame(x=10)
write.csv(df, file="x1.csv")
gzip("x1.csv")
> dir()
[1] "x1.csv.gz" 
```

# javascript - 设置整个 jqGrid 对象的高度，包括寻呼机

> ID：12698584
> 
> 赞同：0
> 
> 时间：2012-10-02T21:26:31.987
> 
> 标签：javascript, jquery, layout, jqgrid

jqGrid 具有`setGridHeight`仅设置网格单元格高度的方法。
我需要的是在调整浏览器大小时设置整个事物（包括寻呼机）的高度。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T20:57:47.497

我们可以通过以下技巧做到这一点：

```
function setJqGridFullHeight(gridSelector,newHeight){
    $grid = $(gridSelector) ;
    $grid.setGridHeight( newHeight ) ;
    $grid.setGridHeight( 2*newHeight - $grid.closest('.ui-jqgrid').height() ) ;
} 
```

# c - C相互引用静态初始化器

> ID：12698586
> 
> 赞同：8
> 
> 时间：2012-10-02T21:26:42.763
> 
> 标签：c, gcc, static, initialization

在 C 中是否可以有相互引用的静态变量初始值设定项，如下例所示？

如果将第 2 行添加到预先声明的“B”中，则该示例将在 gcc -Wall 中编译，而不会发出警告。第 2 行令人讨厌，因为它也定义了 B，第 4 行也是如此。带有 -weak 检查的 splint lint 程序警告“B”被定义了两次：“*变量 B 重新定义。函数或变量被重新定义。声明之一应该使用外部。”*

通常会使用 extern 关键字进行声明，但 extern 和 static 不能一起使用，并且不会在 gcc 下编译。

```
#include <stdio.h>                               /*1*/
volatile static void * B;                        /*2*/
volatile static void * A = &B;                   /*3*/
volatile static void * B = &A;                   /*4*/
int main()                                       /*5*/
{                                                /*6*/
    printf("A = %x, B = %x\n", (int)A, (int)B);  /*7*/
    return 0;                                    /*8*/
}                                                /*9*/ 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:42:45.523

尽管`volatile`与 相关的位置很奇怪`static`，但您发布的代码是完全有效的 C。它使用称为*tentative definitions*的 C 特定功能。此功能确保`B`您的程序中只有一个：`B`定义相同实体的两个定义。没有什么“令人反感”的。

您从夹板收到的警告无效。在 C++ 语言中，这确实会构成一个多定义错误，但在 C 中则不然。关于`extern`C 语言的上下文中的注释没有任何意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:38:10.890

这是没有意义的。

编辑：

是的，'extern' 中没有必要（谢谢，AndreyT 和 Adam Rosenfield），但`&B`类型为`void**`, not `void*`。

当然，`void**`强制转换为`void*`，但有什么意义呢？如果你想要别名或指针，那么只需声明第三个变量“缓冲区”，并在 A 和 B 中指向它。

```
unsigned char SomeBuffer[LENGTH];

void* A = SomeBuffer;
void* B = SomeBuffer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:41:10.663

看起来您正在定义一个循环循环，但实际上并非如此。C`&`运算符是*地址*运算符，用于获取相关变量的地址。

正如@AndreyT 指出的那样，第 2 行具有*暂时定义* `B`的效果，以便第 3 行知道它。您可以**将**第 2 行视为分配内存位置`B`，然后在第 4 行中放置一个值。

该代码在功能上与您编写如下代码相同：

```
volatile static void * A;
volatile static void * B;
int main()
{
    A = &B;
    B = &A;
    printf("A = %x, B = %x\n", (int)A, (int)B);
    return 0;
} 
```

因此，在第 3 行中，您定义`A`指向`B`. 在第 4 行中，您定义`B`指向 的地址`A`。

可以这么说`A`并`B`具有以下内存地址：

```
&A == 0xAAAAAAAA
&B == 0xBBBBBBBB 
```

第 3 行中的代码执行以下操作：

```
A = 0xBBBBBBBB; 
```

然后在第 4 行，它执行以下操作：

```
B = 0xAAAAAAAA; 
```

现在，如果你要取消引用`A`，`B`你会得到以下结果（警告，你必须先转换为可取消引用的指针类型）：

```
*A --> 0xAAAAAAAA
*B --> 0xBBBBBBBB 
```

这是完全有效的，但可能不是您打算对代码执行的操作。

请记住，有两个不同的价值观在起作用。首先是指针的值。其次是指针的地址。

您需要使用的唯一原因`extern`是使用在另一个目标文件中定义的变量（即，`file1.c`您想使用在 中定义的全局变量`file2.c`）。`static`应用于全局变量时的关键字意味着该变量是*文件静态的*，或者它只能在该文件中使用。所以这两者显然是不和的。

# c# - 获取文件的相对路径？

> ID：12698599
> 
> 赞同：1
> 
> 时间：2012-10-02T21:28:06.777
> 
> 标签：c#, .net-4.0, linq-to-xml

我有一个名为 settings.xml 的文件，位于：

`c:\solution1\solution1\data\settings.xml`

现在，我正在做：

```
XDocument doc = XDocument.Load(@"c:\solution1\solution1\settings.xml"); 
```

我不知道如何使用相对路径来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:29:35.683

如果你的意思是相对于你的可执行文件，你可以使用

```
string exeLocation = System.Reflection.Assembly.GetExecutingAssembly().CodeBase 
```

注意经常建议的

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

将获得程序集*当前*所在的路径，这可能会有所不同，例如，如果正在执行卷影副本。

您可以使用

```
string exeDir = System.IO.Path.GetDirectoryName(exeLocation); 
```

获取可执行文件的目录。

如果您想在安装位置下的*数据目录中找到一个文件，您可以这样做*

```
string dataFile = Path.Combine(exeDir, "data\settings.xml"); 
```

请注意，在 Windows Vista 及更高版本下，默认情况下您将没有对位于安装目录下的目录的*写入权限。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:31:34.293

您还可以获取相对于它开始的当前目录

```
System.Environment.CurrentDirectory 
```

# android - android中textview中的文本溢出

> ID：12698600
> 
> 赞同：1
> 
> 时间：2012-10-02T21:28:09.727
> 
> 标签：android, textview, overflow

如何使文本`textview`仅填充宽度并开始新行以防文本溢出屏幕宽度？我正在尝试从 java 代码添加控件：

```
contentTable = (TableLayout) findViewById(R.id.contentTable);

            TableRow row = new TableRow(getApplicationContext());       
            TextView tv1 = new TextView(getApplicationContext());
            TextView tv2 = new TextView(getApplicationContext());

            tv1.setGravity(Gravity.RIGHT);
            tv2.setGravity(Gravity.RIGHT);

            row.setGravity(Gravity.RIGHT);

            tv1.setTextColor(Color.BLACK);
            tv2.setTextColor(Color.BLACK);

            tv1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 1f));
            tv2.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 1f));

            tv1.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);
            tv2.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);

            tv1.setText(recipe.ingredients.get(i).name));
            tv2.setText(" "+recipe.ingredients.get(i).quantity);

            setTypeFace(tv1,tv2);

            row.addView(tv1);
            row.addView(tv2);

            contentTable.addView(row); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:31:55.773

`layout_width="match_parent"`或特定的 dp 宽度`layout_height="wrap_content"`，我想就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T15:36:57.763

TableLayout`android:shrinkColumns`属性允许列出要缩小的列的索引（从零开始）。它将从列中删除不必要的额外空间（考虑到所有行）并缩小它。它使指定列的文本换行为多行。

```
<TableLayout 
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:shrinkColumns="0,1" /> 
```

# matlab - 在一个按字母顺序排列的列表中匹配字符串（MATLAB 方式）

> ID：12698607
> 
> 赞同：5
> 
> 时间：2012-10-02T21:28:38.463
> 
> 标签：matlab

我有一个按字母顺序排列的大型字符串单元数组（约 49.5 万），有很多重复项（它们彼此相邻，因为它是按字母顺序排列的）。

对于给定的查找字符串，我需要在列表中找到与我传入的字符串匹配的所有字符串。

我一直在`strcmp(lookUpString,list)`这样做，但这非常慢 - 我认为它正在通过列表中的每个值进行比较，因为它不知道它是按字母顺序排序的。

我可以编写一个while循环来遍历列表以比较每个字符串，`strcmp`直到我找到我想要的字符串块（然后停止），但我想知道是否有一种“matlab”方式来执行此操作（即执行逻辑排序数组上的比较操作）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:09:14.663

**更新：**我对我之前的“方法 3”不满意，所以我只是重新调整了一下以获得更好的性能。它现在的运行速度几乎是 naive 的 10 倍`strcmp`。

`strcmp`在我的机器上获胜（Linux Mint 12 上的 2011b）。特别是，它比`ismember`. 但是，如果您自己进行一些手动预分类，您可以获得一些额外的速度。考虑以下速度测试：

```
NumIter = 100;
N = 495000;
K = N / 20;
List = cell(N, 1);
for i = 1:20
    List(i*K - K + 1:i*K) = cellstr(char(i+96));
end

StrToFind = cell(NumIter, 1);
for j = 1:NumIter
    StrToFind{j} = char(round(rand * 20) + 96);
end

%# METHOD 1 (ismember)
tic
for j = 1:NumIter
    Index1 = ismember(List, StrToFind{j});
    Soln1 = List(Index1);
end
toc

%#METHOD 2 (strcmp)
tic
for j = 1:NumIter
    Index2 = strcmp(StrToFind{j}, List);
    Soln2 = List(Index2);
end
toc

%#METHOD 3 (strmp WITH MANUAL PRE-SORTING)    
tic
for j = 1:NumIter
    CurStrToFind = StrToFind{j};
    K = 100;
    I1 = zeros(K, 2); I1(1, :) = ones(1, 2);
    I2 = zeros(K, 2); I2(end, 1) = 1; I2(end, 2) = N;
    KDiv = floor(N/K);
    for k = 2:K-1
        CurSearchNum = k * KDiv;
        CurListItem = List{CurSearchNum};
        if CurListItem < CurStrToFind; I1(k, 1) = 1; end;
        if CurListItem > CurStrToFind; I2(k, 1) = 1; end;
        I1(k, 2) = CurSearchNum; I2(k, 2) = CurSearchNum;
    end
    a = find(I1(:, 1), 1, 'last');
    b = find(I2(:, 1), 1, 'first');
    ShortList = List(I1(a, 2):I2(b, 2));
    Index3 = strcmp(CurStrToFind, ShortList);
    Soln3 = ShortList(Index3);
end
toc 
```

输出是：

```
Elapsed time is 6.411537 seconds.
Elapsed time is 1.396239 seconds.
Elapsed time is 0.150143 seconds. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:32:03.780

[ismember](http://www.mathworks.com/help/matlab/ref/ismember.html)是你的朋友。它不是线性搜索，[而是二进制搜索。](http://www.mathworks.com/support/solutions/en/data/1-9NIE1N/index.html?product=ML&solution=1-9NIE1N)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T09:31:31.370

尝试二进制搜索。

它几乎快 13（！）倍：

```
Elapsed time is 7.828260 seconds.    % ismember
Elapsed time is 0.775260 seconds.    % strcmp
Elapsed time is 0.113533 seconds.    % strmp WITH MANUAL PRE-SORTING
Elapsed time is 0.008243 seconds.    % binsearch 
```

这是我正在使用的 bin 搜索代码：

```
function ind = binSearch(key, cellstr)
    % BINSEARCH  that find index i such that cellstr(i)<= key <= cellstr(i+1)
    %
    % * Synopsis: ind = binSearch(key, cellstr)
    % * Input   : key = what to search for
    %           : cellstr = sorted cell-array of string (others might work, check strlexcmp())
    % * Output  : ind = index in x cellstr such that cellstr(i)<= key <= cellstr(i+1)
    % * Depends : strlexcmp() from Peter John Acklam’s string-utilities, 
    %             at: http://home.online.no/~pjacklam/matlab/software/util/strutil/
    %
    % Transcoded from a Java version at: http://googleresearch.blogspot.it/2006/06/extra-extra-read-all-about-it-nearly.html
    % ankostis, Aug 2013

    low = 1;
    high = numel(cellstr);

    while (low <= high)
        ind = fix((low + high) / 2);
        val = cellstr{ind};

        d = strlexcmp(val, key);
        if (d < 0)
            low = ind + 1;
        elseif (d > 0)
            high = ind - 1;
        else
            return;     %% Key found.
        end
    end
    ind = -(low);       %% Not found!
end 
```

您可以`strlexcmp()`从 Peter John Acklam 的 string-utilities 获得，网址为：http: [//home.online.no/~pjacklam/matlab/software/util/strutil/](http://home.online.no/~pjacklam/matlab/software/util/strutil/)

最后这是我使用的测试脚本：

```
%#METHOD 4 (WITH BIN-SEARCH)    
tic
for j = 1:NumIter
    Index1 = binsearch(StrToFind{j}, List);
    Soln4 = List(Index1);
end 
```

请注意，对于更长的字符串，结果可能会有所不同。

# sql - SQL 在三个表中的至少两个中找到匹配项 - 组合查询

> ID：12698608
> 
> 赞同：0
> 
> 时间：2012-10-02T21:28:40.127
> 
> 标签：sql, join

如果可能，我想将三个单独的查询合并为一个查询。目的是查找存在于三个表中任意两个表中的用户。它们必须至少存在三个表中的两个。

```
user (user table)
user_job_ft_job (full time job)
user_job_own_venture (startup/own venture)
user_job_not_looking (not seeking employment)

-- not seeking and full time
SELECT * from user_job_not_looking ujnl, user_job_ft_job uj, [user] u  
WHERE 1=1
AND ujnl.user_id = u.user_id
AND uj.user_id = u.user_id    

-- own venture and full time   
SELECT * from user_job_own_venture ujov, user_job_ft_job uj, [user] u   
WHERE 1=1
AND ujov.user_id = u.user_id
AND uj.user_id = u.user_id 

-- own venture and not looking
SELECT * from user_job_own_venture ujov, user_job_not_looking ujnl, [user] u   
WHERE 1=1
AND ujov.user_id = u.user_id
AND ujnl.user_id = u.user_id 
```

我想以某种方式将这些查询组合成一个更大的查询，以便我可以更轻松地编写动态代码来处理这个业务案例。

表的结构无关紧要，除了知道它们都有一个名为 user_id 的外键，它是 [user] 表的主键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:41:45.787

如果您不想重组，请尝试这样的查询：

```
SELECT
    *
FROM
    user
    FULL JOIN user_job_not_looking AS ujnl ON ujnl.user_id = user.user_id
    FULL JOIN user_job_own_venture AS ujov ON ujov.user_id = user.user_id
    FULL JOIN user_job_ft_job AS ujfj ON ujfj.user_id = user.user_id
WHERE
    (ujnl.user_id IS NOT NULL AND ujov.user_id IS NOT NULL) OR
    (ujnl.user_id IS NOT NULL AND ujfj.user_id IS NOT NULL) OR
    (ujov.user_id IS NOT NULL AND ujfj.user_id IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:32:57.880

左外连接将导致查询尝试连接一个表，但不要求该子表具有匹配的记录。如果它没有匹配的记录，则该表中的字段将为空。这个查询应该做你需要的。

```
select * from [user] u
left outer join user_job_not_looking as ujnl on ujnl.user_id=u.user_id
left outer join user_job_own_venture as ujov on ujov.user_id=u.user_id
left outer join user_job_ft_job as uj on uj.user_id=user_id
where 
(ujnl.user_id is not null and ujov.user_id is not null) or
(ujnl.user_id is not null and uj.user_id is not null) or
(ujov.user_id is not null and uj.user_id is not null) 
```

# c# - MVC 中的视图模型

> ID：12698613
> 
> 赞同：1
> 
> 时间：2012-10-02T21:29:01.890
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-4

我有一个关于如何使用 MVC 模式正确地将数据传递给视图的快速问题。

我有一个 EditProfile/Register 模型（姓名、电子邮件、国家/地区）。视图有一个国家下拉列表，我需要传递一个国家列表。

创建一个新模型（仅用于视图）是否正确，它基本上封装了我的 EditProfile/Register 模型和一个列表？我是否在控制器中创建此视图特定模型？（与我的数据访问项目相反）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:33:27.227

视图模型（用于 ASP.Net MVC 视图）与域模型（数据层中的一个）无关，但名称除外。这个[MVC: Data Models and View Models](https://stackoverflow.com/questions/475129/mvc-data-models-and-view-models)问题详细介绍了差异/相似之处。

您在 ASP.Net MVC 项目中的某处创建视图模型（不在数据层中），通常将“模型”或“视图模型”文件夹与 Controllers 文件夹同级放置。根据视图，可以共享一些视图模型类，但您也会有一些由单个视图使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:03:27.783

你有两种方法来完成这个任务

(i) 推荐

创建视图模型添加类型选择列表的属性

```
<code>

    public SelectList countrylist
        {
            get;
            set;
        }
</code> 
```

在视图模型类的构造函数中，从国家表中分配国家列表。

```
<code>

     countrylist= new SelectList(db.countries.ToList(), "CountryID", "CountryName");

</code> 
```

在您添加的视图中

```
<code>
     Html.DropDownList("CountyID", Model.countrylist,"Select")
</code> 
```

（ii）仅当您必须使用此模型且视图很少时才使用（如您的情况所示）

不要创建视图模型，而是使用 jquery，并在准备好查看页面的文档中为国家/地区列表添加一个 html 选择。

# css - 由于背景图像，页面太慢

> ID：12698617
> 
> 赞同：2
> 
> 时间：2012-10-02T21:29:18.520
> 
> 标签：css, preload

我在一个网站上使用 CSS3 全屏图库（无 JavaScript）。图库基本上是一个无序列表，其中每个列表项都是一个全屏背景。

它通过在 CSS 文件中为每个列表项设置背景图像来工作。目前画廊拥有 48 张图像，页面加载时间过长。

第一个视图大约是 35 秒。似乎浏览器首先加载了每个 DOM 元素，并且花费了太多时间。

有没有办法在页面加载时不加载某些列表项元素，但仅在页面加载后才使它们可见？

该网站可以在[http://www.steveezell.com看到](http://www.steveezell.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:52:52.747

如果您在 HTML 源代码中声明图像，它将始终在页面加载期间加载。我认为最好的选择是从 JavaScript 更改图像源。

ps：页面不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:05:53.090

您可以在页面完全加载后简单地使用 AJAX 调用：

```
// Load the script when the page has fully loaded:

$(window).load( function() {
$.getScript(‘your_3rd_party-script.js’);
}); 
```

RetrieveImages.js：

```
// Load here all the images (You might consider showing the first image 
// or images with the regular page loading  to show a first indication to the user 
// and avoid waiting for the page to finish load before showing something).

document.getElementById("myImg").src = "http://www.example.com/image?id=1"; 
```

您可能应该使用 jQuery 分组按类加载所有图像`$(".className")`。

您使用的服务器端代码是什么？我建议启用 gzip 压缩，这应该会显着减小图像大小。

# vba - 如何在 Excel 中对行进行分类和计算唯一性？

> ID：12698620
> 
> 赞同：0
> 
> 时间：2012-10-02T21:29:28.987
> 
> 标签：vba, excel, excel-formula

我有一个包含州和城市列的数据表。我已经根据两列对表格进行了适当的排序，但我实际上只是想计算每个州的行数，然后按城市计算另一个以进行统计分析。

如何计算这些列中的唯一条目，然后将它们显示在表格的另一部分或电子表格文档的另一个表格中？我假设以编程方式执行此操作可能是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:33:38.600

> 如何计算这些列中的唯一条目，然后将它们显示在表格的另一部分或电子表格文档的另一个表格中？我假设以编程方式执行此操作可能是最好的。

这样的事情将是完美的

```
=SUM(IF(FREQUENCY(A2:A10,A2:A10)>0,1)) 
```

这个公式将给出您正在寻找的结果。您可能希望将其更改为

```
=SUM(IF(FREQUENCY(A:A,A:A)>0,1)) 
```

它将汇总整个 A 列而不需要范围。

* * *

在您提出要求后，我已取消删除此答案，但是，我不确定它是否会完全符合您的要求，因为您问题的前 1/2 似乎与后半部分冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:12:16.100

我不得不说数据透视表可以解决问题。玩了大约 3 分钟后，它变得相当清晰，尽管我不得不说我正在使用的 MS Office 2011 版本对于实际去哪里并不是很直观。

尽管如此，我真的很喜欢@enderland 的推荐。诚然，这不是解决方案，但我通常更喜欢解决方案的编程方法。感谢那！

# iis - 查询字符串被多次附加

> ID：12698625
> 
> 赞同：1
> 
> 时间：2012-10-02T21:29:38.383
> 
> 标签：iis, url-rewriting

我正在使用 url 重写模块（从[这里](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)）。我在 web.config 中定义了以下规则，以将任何 http 流量定向到 https。

```
<rewrite>
      <rules>
        <rule name="https redirect" enabled="true" stopProcessing="true">
          <match url="(.*)" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" redirectType="SeeOther" />
        </rule>
      </rules>
</rewrite> 
```

我有一个问题。我的 url 也可能在查询字符串中包含一些加密和编码的数据。似乎此规则通过多次附加查询参数来更改参数，如下所示。

实际网址
[http://www.MySite.com?Data=nBdHuQ6Jt2nHCnh5FG](http://www.MySite.com?Data=nBdHuQ6Jt2nHCnh5FG)

应用规则后
[https://www.MySite.com?Data=nBdHuQ6Jt2nHCnh5FG?Data=nBdHuQ6Jt2nHCnh5FG](https://www.MySite.com?Data=nBdHuQ6Jt2nHCnh5FG?Data=nBdHuQ6Jt2nHCnh5FG)

有什么想法我在这条规则中做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:10:37.290

你需要`{HTTP_HOST}{REQUEST_URI}`改变`{HTTP_HOST}{URL}`

# iphone - 缩小然后关闭 UIView 的问题

> ID：12698629
> 
> 赞同：2
> 
> 时间：2012-10-02T21:30:01.347
> 
> 标签：iphone, ios, cocoa-touch, uiview, uiviewcontroller

我有一个自定义视图，我用动画呈现弹跳效果。现在，我希望它以类似于收缩然后消失的方式消失。

下面这段代码以弹跳效果呈现我的视图工作正常：

```
self.componentDetailController.view.center = iGestureRecognizer.view.center;
self.componentDetailController.view.alpha = 0.0;
self.componentDetailController.view.transform = CGAffineTransformMakeScale(0.01, 0.01);

 [UIView animateWithDuration:(0.2) animations:^{
     self.componentDetailController.view.center = CGPointMake(kScreenWidth / 2, kScreenHeight / 2);
     self.componentDetailController.view.alpha = 0.5;
     self.componentDetailController.view.transform = CGAffineTransformMakeScale(1.05, 1.05);
 } completion:^(BOOL iFinished) {
     [UIView animateWithDuration:(0.1) animations:^{
         self.componentDetailController.view.alpha = 0.90;
         self.componentDetailController.view.center = CGPointMake(kScreenWidth / 2, kScreenHeight / 2);
         self.componentDetailController.view.transform = CGAffineTransformMakeScale(0.98, 0.98);
     } completion:^(BOOL iFinished) {
         self.componentDetailController.view.alpha = 1.0;
         self.componentDetailController.view.transform = CGAffineTransformMakeScale(1.0, 1.0);
         self.componentDetailController.view.transform = CGAffineTransformIdentity;
     }];
 }]; 
```

我已经编写了下面的代码来缩小和关闭不起作用的视图。它将视图稍微移到了前面，但并没有消除它。任何线索这里有什么问题：

```
 - (void)cancelButtonPressed {
    self.componentDetailController.view.transform = CGAffineTransformIdentity;
    [UIView animateWithDuration:(0.1) animations:^{
        self.componentDetailController.view.alpha = 1.0;
        self.componentDetailController.view.transform = CGAffineTransformMakeScale(1.05, 1.05);
    } completion:^(BOOL iFinished) {
        [UIView animateWithDuration:(0.4) animations:^{
            self.componentDetailController.view.center = self.tappedComponentView.center;
            self.componentDetailController.view.transform = CGAffineTransformMakeScale(0.01, 0.01);
            self.componentDetailController.view.backgroundColor = [UIColor clearColor];
            self.componentDetailController.view.alpha = 0.0;
        } completion:^(BOOL iFinished) {
            [self.componentDetailController.view removeFromSuperview];
        }];
    }];

    self.componentDetailController = nil;
    [self enableBackView];
} 
```

这里 self.tappedComponentView.center 和 self.tappedComponentView.center 是一样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:32:36.580

该`+animateWithDuration:animations:completion:`调用立即返回，因此一旦第二个动画运行，所有后续的视图转换调用都将无处可去`self.componentDetailController`。`nil`存储`self.componentDetailController.view`到它自己的变量中并在你的动画块中引用它。例如：

```
UIView *detailView = self.componentDetailController.view;
detailView.transform = CGAffineTransformIdentity;
[UIView animateWithDuration:0.1 animations:^{
    detailView.alpha = 1;
// …
}];

self.componentDetailController = nil; 
```

# javascript - 需要有效和简化 JS 应用程序开发的想法

> ID：12698633
> 
> 赞同：2
> 
> 时间：2012-10-02T21:30:55.497
> 
> 标签：javascript, jquery, web-applications

我一直在开发一个 JS-heavy 的 Web 应用程序。由于应用程序将在其上运行的网络的性质，我想尽量减少服务器和客户端之间的流量，并希望尽可能多地在客户端运行。这个应用程序比我以前编写的任何其他应用程序都要大得多，而且我真的在努力简化我的开发，更重要的是，测试。

首先，我不是开发人员，所以我没有受过培训，也不熟悉不同的开发技术，但我边走边学。

大量的试验和错误，堆栈溢出阅读，以及更多的试验和错误。这会导致大量页面重新加载，这意味着我回到了应用程序的第一页，并且必须单击一堆屏幕才能到达我正在处理的部分。一而再，再而三。全部。天。长。

我怎样才能加快速度，甚至自动化？我知道有 Selenium WebDriver，但这对于我需要的东西来说似乎有点太复杂了，而且在应用程序的开头还涉及到一些拖放，据我所知，Selenium 不能做到这一点。

请帮我想出一个更好的方法来解决这个问题。在这个时代，必须有一些东西可以帮助我。某种将数据提供给应用程序的方法，因此我可以立即到达我需要的点，而无需从第一页开始。我只是不知道我在搜索什么或如何表达我的搜索，所以我不会从谷歌得到同样无用的结果。

PS 在 OS X 上开发，所以 Windows 工具对我不起作用。另外，大多数用户将使用 Mac。``

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:52:07.447

即使您对用于开发的 Windows 工具不感兴趣，我也会推荐 John Papa 的 SPA（单页应用程序）开发系列。它涵盖了几乎所有关于 SPA 的 TDD 的主题，毫无疑问会给你的项目带来很多想法。只需跳过有关 web.api 使用的部分，并考虑使用您熟悉的任何其他工具创建 REST 服务。

[http://www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins/](http://www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins/)

该系列包含的章节：

*   第 1 部分 – 故事开始（什么是 Code Camper SPA？）

*   第 2 部分 – 客户端技术

*   第 3 部分 – 服务器技术（数据层）

*   第 4 部分 – 使用 ASP.NET Web API 提供 JSON

*   第 5 部分 - HTML 5 和 ASP.NET Web 优化

*   第 6 部分 – JavaScript 模块

*   第 7 部分 – MVVM 和 KnockoutJS

*   第 8 部分 – 客户端上的数据服务

*   第 9 部分 - 导航、转换、存储和消息传递

*   第 10 部分 - 保存、更改跟踪和命令

*   第 11 部分 - 响应式设计和移动性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:04:40.720

听起来您正在创建类似于单加载 Web 应用程序的东西。我将从警告开始。创建单个负载 Web 应用程序比普通 Web 应用程序要困难得多。（您将在其中进入新页面，重新加载浏览器窗口）。实际上，您必须对附加的事件和创建的对象非常小心，因为它们不会消失，因为您永远不会转到另一个页面，因此您需要丢弃已完成的事情。即使是具有丰富经验的开发人员也难以应对单一负载的 Web 应用程序。

也就是说，如果您大量使用 javascript，并且您对脚本文件进行了一些更改并希望查看效果，您可以在您的应用程序中创建一个函数（或在 chrome 中使用控制台）以使您能够重新加载你的脚本文件。基本上，编写一个附加脚本文件的函数，这将重新加载该文件中的代码，而您不必重新加载页面。在 chromes 控制台中，您可以直接对页面执行 javascript，如果您执行已经存在的函数定义，则会被覆盖。我一直这样做是为了调试问题。

# xcode4.3 - Xcode 4.5 和 4.3 中内置程序的不同行为

> ID：12698638
> 
> 赞同：0
> 
> 时间：2012-10-02T21:31:09.007
> 
> 标签：xcode4.3, xcode4.5

昨天我下载了带有 iOS 6 SDK 的 Xcode 4.5 并升级了我的 Xcode。我还有一个 Cocos2D 游戏应用程序，我在 Xcode 4.3（带有 iOS 5 SDK）中构建并于几天前在 Appstore 中发布，一切都在所有版本的 iOS 上运行良好。

现在，如果我使用 iOS 6 SDK 在 Xcode 4.5 上构建这个应用程序，Cocos2D 的主视图会旋转 90 度。为什么在不同的 Xcode 中构建会导致不同的行为？通过不使用 -viewWillAutorotate 等，我已经让我的应用程序在 iOS 6 上完美运行。我该怎么办，降级到 Xcode 4.3 5 SDK？我完全误解了为什么我的代码应该如此依赖 IDE。

提前致谢！

编辑：

我发现奇怪的行为只出现在模拟器 iOS 6 上，5 它工作得很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:37:46.200

在您的 Xcode 项目中，您可能需要设置您支持的方向。目标 > 摘要。这些选择您想要的： ![在此处输入图像描述](../Images/05e4c87b4b7bf2b4be5db89c5b9fcc35.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:02:50.037

我找到了两个解决方案：首先，手动设置 Cocos2D`CCDirector`的 deviceOrientation，其次，降级到 Xcode 4.3 和 iOS SDK 5。第二个适用于所有 iOS，正如我所提到的，如果有人告诉我有什么区别，我将不胜感激。

# maven - 用于生成 Maven 应用程序的原型是什么？

> ID：12698639
> 
> 赞同：0
> 
> 时间：2012-10-02T21:31:17.820
> 
> 标签：maven, maven-archetype

有没有一种简单的方法可以找出用于在项目中生成 Maven 应用程序的原型。我似乎没有在 pom.xml 中找到它，但也许我找错了地方？就我而言，它是网络应用程序，但我不确切知道使用的是什么 Maven 原型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:35:57.817

不，生成的 Maven 项目中未提供该信息。

# jquery - 仅使用 jQuery 更改背景颜色几秒钟

> ID：12698641
> 
> 赞同：11
> 
> 时间：2012-10-02T21:31:24.810
> 
> 标签：jquery

当单击某个元素时，我希望另一个元素的背景在 x 秒内变为红色，然后再恢复其原始颜色，所有这些都没有使用 UI jQuery，只使用 jQuery。是否可以 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T21:35:12.543

```
var $el = $("#my-element"),
    x = 5000,
    originalColor = $el.css("background");

$el.css("background", "red");
setTimeout(function(){
  $el.css("background", originalColor);
}, x); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T21:35:40.557

```
$("#element1_ID").on('click', function() {  // click on first element
    var bg = $("element2_ID").css('background'); // store original background
    $("element2_ID").css('background', 'red'); //change second element background
    setTimeout(function() {
        $("element2_ID").css('background', bg); // change it back after ...
    }, 1000); // waiting one second
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:40:43.163

[检查小提琴](http://jsfiddle.net/sushanth009/4GKD8/)

```
$('.b').on('click', function() {

    var time = 2000;
    setTimeout(function() {
        $('.a').css("background-color", "green");
    }, time);
});​ 
```

# mysql - mysql max_allowed_pa cket 超过时不返回错误

> ID：12698643
> 
> 赞同：0
> 
> 时间：2012-10-02T21:31:29.587
> 
> 标签：mysql

我想知道这是一个错误还是我在这里做错了什么？

```
mysql> select @@max_allowed_packet
    -> ;
+----------------------+
| @@max_allowed_packet |
+----------------------+
|                 1024 |
+----------------------+
1 row in set (0.00 sec)

mysql> insert into Lookups values ('sasdfsadf12345654545=86672562768234jdfhasjkdfhaskldfhsadf','asdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdfasdfhasjkfhaskdfjaksdfhasjkdfhaksldfjhskajdfhaskdfhksjdfhkalsdfasdfasdfhjasdfhjkasdfhjkahsdf');
Query OK, 1 row affected (0.00 sec)

mysql> show create table Lookups;
+---------+---------------------------------------------------------------------------------------------+
| Table   | Create Table                                                                                       |
+---------+---------------------------------------------------------------------------------------------+
| Lookups | CREATE TABLE `Lookups` (
  `name` text,
  `val` text
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1 |
 +---------+---------------------------------------------------------------------------------------------+
 1 row in set (0.00 sec)

 mysql> select version();
 +-----------+
 | version() |
 +-----------+
 | 5.0.77    |
 +-----------+ 
```

insert 语句的长度为 1055 个字符，应该超过 max_allowed_pa​​cket 变量，但它不会返回任何错误

# python - 创建要在 Python 中执行的方法列表

> ID：12698646
> 
> 赞同：1
> 
> 时间：2012-10-02T21:31:42.253
> 
> 标签：python, list, methods, iteration

我真的希望有一些方法可以做到这一点：

如何在 python 中创建要应用于对象的方法列表？

给定一些任意类：

```
class someClass:
    def __init__(self, s):
        self.size=s
    def shrink(self):
        self.size-=1
    def grow(self):
        self.size+=1
    def invert(self):
        self.size= -self.size 
```

我希望能够编写一个像这个列表这样的可迭代对象：

```
instructions=[shrink,grow,shrink,shrink,grow,invert] 
```

稍后通过 for 循环运行：

```
elephant=someClass(90)
sizeList=[]
for ins in instructions:
    elephant.ins()
    sizeList.append(elephant.size) 
```

我以前用函数做过类似的事情，不能用方法做到这一点需要我重写大量的代码......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T21:33:26.963

```
instructions = ["shrink","grow","shrink"]
for i in instructions:
     getattr(elephant,i)() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:36:57.930

作为在指令列表中使用字符串的替代方法，您可以执行以下操作：

```
instructions = [someClass.shrink, someClass.grow, someClass.shrink,
                someClass.shrink, someClass.grow, someClass.invert]
elephant = someClass(90)
sizeList = []
for ins in instructions:
    ins(elephant)
    sizeList.append(elephant.size) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:34:50.770

可以[`dir`](http://docs.python.org/library/functions.html#dir)用来获取对象的所有属性名，以及[`getattr`](http://docs.python.org/library/functions.html#getattr)获取对象的属性值。您可能还不想调用任何不可[调用](http://docs.python.org/library/functions.html#callable)的属性（例如`2`或`"foo"`）：

```
for m in dir(elephant):
    if not m.startswith('_'):
        f = getattr(elephant, m)
        if callable(f): # Do not try to call non-function properties
            f() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:33:35.293

可能很天真：

```
for ins in instructions:
  getattr(elephant, ins)() 
```

陷阱包括`ins`必须是一个字符串，并且验证`ins`您真正想要调用的内容和`getattr(elephant, ins)`可调用的内容可能是明智的。

# linux - 无法在目录中复制/粘贴 Linux Mint Debain Mate

> ID：12698648
> 
> 赞同：1
> 
> 时间：2012-10-02T21:31:44.523
> 
> 标签：linux, debian, copy-paste, linux-mint

我正在使用最新版本的 linux mint debian 版本。但是，我无法在目录之间复制文件。例如：即使文件夹具有适当的权限，我也无法将 txt 文件从桌面复制到我的 Documents 文件夹。

可能是什么问题呢 ？它是 Debian Mint 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:00:48.540

在控制台

```
$id
$ls -al 
```

看你的许可证文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T21:56:47.987

您必须登录或用户级别

```
root || super user

use sudo or su in terminal 
```

# java - Java JACOB 检索给定 Win32_* 类对象的所有属性

> ID：12698653
> 
> 赞同：3
> 
> 时间：2012-10-02T21:31:58.927
> 
> 标签：java, windows, winapi, wmi, jacob

我目前正在开发一个基于 java 的跨平台软件分发器，我选择使用本机操作系统机制来防止用户必须事先进行任何设置。

我为 SSH2 选择了 JSCH，为 Java 选择了 JACOB。我意识到 JACOB 将我限制为 Windows 作为起始主机，但这是我可以忍受的。

我正在围绕 JACOB 编写一个包装器，以使用一些本机机制通过 WMI 与目标对话，但我遇到了一个小问题。我正在尝试检索给定 Win32_ 类对象可用的所有属性的列表，但我无法做到。

此链接显示您可以在 VB [http://www.vbsedit.com/scripts/misc/wmi/scr_1333.asp](http://www.vbsedit.com/scripts/misc/wmi/scr_1333.asp)中执行此操作，我想知道在使用 JACOB 时是否有人能够弄清楚。

编辑：（代码片段）

```
item = enumVariant.nextElement().toDispatch();
            //Dispatch.class returns a variant which can convert to java form
            String serviceName = Dispatch.call(item, "Name").toString();
            String servicePath = Dispatch.call(item,"PathName").toString();
            int servicePID = Dispatch.call(item,"ProcessId").getInt();
            //System.out.println("Service: "+serviceName+" ServicePath: "+servicePath+" PID: "+servicePID);
            //System.out.println(serviceName+" "+servicePath+" "+servicePID);
            list.add(serviceName+" "+servicePID); 
```

上面的代码显示我可以要求单个属性，但没有一个好方法可以要求所有属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T07:45:47.393

这是您问题的答案。我希望如此，因为我不知道您的问题到底出在哪里。我仍然认为，在询问时您应该提供部分代码，而不是要求回答者编写所有内容。

这也可能是对我刚刚学到的一个更普遍问题的答案：
**如何枚举集合中的所有项目，实现`For Each`构造？**
应该使用`EnumVariant`Jacob 类。

```
import com.jacob.activeX.*;
import com.jacob.com.*;

public class testJacob {
  public static void main(String args[]) {
    String sMoniker = "winmgmts:{impersonationLevel=impersonate}!" +
      "\\\\.\\root\\cimv2";
    Dispatch dServ = new Dispatch(sMoniker);
    Variant v = Dispatch.call(dServ, "SubclassesOf");
    // SWbemObjectSet object
    // http://msdn.microsoft.com/en-us/library/aa393762%28v=vs.85%29.aspx
    Dispatch objSet = v.getDispatch();
    System.out.println("object count: " + objSet.get(objSet, "count"));
    int cObj = 0;
    EnumVariant en = new EnumVariant(objSet);
    while (en.hasMoreElements()) {
      // SWbemObject object
      // http://msdn.microsoft.com/en-us/library/aa393741(v=vs.85).aspx
      Dispatch dItem = en.nextElement().getDispatch();
      Dispatch dPath = Dispatch.get(dItem, "Path_").getDispatch();
      String sClass = Dispatch.get(dPath, "Class").getString();
      System.out.println("path: " + sClass);
      Dispatch dObj = Dispatch.call(dServ, "get", sClass).getDispatch();
      Dispatch dProps = Dispatch.call(dObj, "Properties_").getDispatch();
      EnumVariant enProp = new EnumVariant(dProps);
      while (enProp.hasMoreElements()) {
        Dispatch dProp = enProp.nextElement().getDispatch();
        String sProp = Dispatch.get(dProp, "name").getString();
        System.out.println("property: " + sProp);
      }
      if (++cObj >= 5)
        break;
    }
  }
} 
```

# c - 如何在 C 中的函数内定义数组？

> ID：12698655
> 
> 赞同：1
> 
> 时间：2012-10-02T21:32:01.277
> 
> 标签：c, arrays

所以在我的源文件中，我有 folowin 函数：

```
void update(state* old_state, state* measurement, uint32_t size)
{
  state new_state[size];
  //some function using measurement and old_state and returning the result in newstate

  arm_fadd_32(measurement,old_state,newstate,size); 
```

// 其余代码 }

现在编译器会抛出一个错误，指出 error#28:expression 必须有一个常量值。我认为这是因为即使在方法内部，局部变量的大小没有改变，编译器在定义大小时也期望一个常量。我尝试了以下方法：

```
int const a = size; 
```

然后尝试重新初始化它说常量值未知。我在互联网上做了一些研究，似乎没有使用 malloc 的更简单的方法，我不想这样做，因为我正在使用一些嵌入式应用程序的代码。

有没有办法在不真正使用 malloc 的情况下避免这个问题？提前谢谢各位！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:34:32.663

不，不是。如果编译器不允许变长数组，则意味着它需要一个**编译时常**量。

C99 支持 VLA，这可能不是您正在使用的。

`int const a`声明一个常量变量（哈哈！），但它绝不是编译时常量。您将需要使用`malloc`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T21:36:01.903

从 1990 ISO C 标准开始，数组的大小必须是一个常量整数表达式。注意“常数”，而不是`const`. 常量表达式（大致）是其值在编译时已知的表达式；`const`，虽然它来自同一个词根，但实际上只是意味着“只读”。

1999 年的标准添加了 VLA（可变长度数组），这将使您的代码合法。VLA 的一个缺点是没有检测分配所需空间失败的机制。如果分配失败，您的程序行为未定义。*（如果幸运的话*，它可能会崩溃。）

现在大多数 C 编译器都支持大部分 C99 标准。您可能需要一个命令行选项来启用它。另一方面，Microsoft 的 C 编译器仅支持 C90，以及极少数 C99 特定的功能，并且 Microsoft 已表示他们没有计划更改这一点。如果您让我们知道您使用的是什么编译器，我们可能会更有帮助。

您可以使用`malloc()`在堆上分配动态大小的数组：

```
state *new_state = malloc(size * sizeof *new_state);
if (new_state == NULL) {
    // allocation failed, handle the error somehow
} 
```

请注意，它`malloc()`返回一个空指针来指示分配失败，即使您的编译器支持 VLA，这也比 VLA 更有优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:37:11.940

您的 C 编译器显然不支持 C99 VLA。这意味着数组必须具有在编译时已知的维度。而你的没有。

显然你可以在堆上分配`malloc`. 但是您已经声明出于性能原因您不想这样做。如果你真的必须有堆栈分配的内存，其大小是在运行时确定的，那么你需要使用`alloca`.

当心那里`alloca`充满危险。堆栈溢出在使用 时是一个永远存在的危险`alloca`，就像在使用 C99 VLA 时一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T21:35:24.263

在 C89 中，数组大小必须是常数。`const`限定符不将对象限定为*常量*，而是将其限定为只读。

在 C99 中，您可以拥有非恒定数组大小，这些数组称为可变长度数组 (VLA)。

# c# - 将继承基类的类设置为集合中的工作类型

> ID：12698658
> 
> 赞同：0
> 
> 时间：2012-10-02T21:32:05.540
> 
> 标签：c#, inheritance, polymorphism

`MasterClass`是基类，`Attachvariable`继承自此。`Table`存储 MasterClass 对象。

```
public class Table
{
    private Dictionary<int, MasterClass> map = new Dictionary<int, MasterClass>();

    public bool isInMemory(int id)
    {
        if (map.ContainsKey(id))
            return true;
        return false;
    }

    public void doStuffAndAdd(MasterClass theclass)
    {
        theclass.setSomething("lalala");
        theclass.doSomething();
        map[theclass.id] = theclass;
    }

    public MasterClass getIt(int id)
    {
        return map[id];
    }
} 
```

所以现在发生了这种情况：

```
Table table = new Table();
if (!table.isInMemory(22))
{
    Attachvariable attachtest = new Attachvariable(22);
    table.doStuffAndAdd(attachtest);
    Console.WriteLine(attachtest.get_position()); //Get_position is a function in Attachvariable 
}
else
{
    Attachvariable attachtest = table.getIt(22); //Error: Can't convert MasterClass to Attachvariable
    Console.WriteLine(attachtest.get_position());
} 
```

有什么方法可以`Table`使用任何继承自 的类`MasterClass`，而无需预先知道该类的存在，以便我仍然可以使用`doStuffAndAdd(MasterClass theclass)`并`Attachvariable`用作`getIt()`.

我无法使用`Table<T>`，因为 doStuffAndAdd 无法将 MasterClass 对象添加到 Dictionary 中。没有办法检查 T 是否从 MasterClass 继承，所以这并不令人惊讶......我该如何完成这项工作？

```
public class Table<T>
{
    private Dictionary<int, T> map = new Dictionary<int, T>();

    public bool isInMemory(int id)
    {
        if (map.ContainsKey(id))
            return true;
        return false;
    }

    public void doStuffAndAdd(MasterClass theclass)
    {
        theclass.setSomething("lalala");
        theclass.doSomething();
        map[theclass.id] = theclass; //Error: can't convert MasterClass to T
    }

    public T getIt(int id)
    {
        return map[id];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:36:46.483

我相信这一点：

```
public void doStuffAndAdd(MasterClass theclass)
    {
        theclass.setSomething("lalala");
        theclass.doSomething();
        map[theclass.id] = theclass; //Error: can't convert MasterClass to T
    } 
```

必须

```
public void doStuffAndAdd(T theclass)
    {
        theclass.setSomething("lalala");
        theclass.doSomething();
        map[theclass.id] = theclass; //should work 
    } 
```

您可以通过以下方式检查一个类是否继承了另一个：

```
if(theclass is MasterClass)
{} 
```

# css - 在 IE 以外的浏览器中，哪个 CSS 标识符用于选项卡式表格中的选定选项卡？

> ID：12698663
> 
> 赞同：1
> 
> 时间：2012-10-02T21:32:21.107
> 
> 标签：css, lotus-notes, lotus-domino

当您在 Notes 中的表单上有一个表格时，您可以选择一次仅显示一行（通过表格属性的表格行选项卡上的特殊表格行显示参数）。

在使用 Internet Explorer 显示的包含此类表的 Notes 文档中，将显示一行，其中每个“选项卡”都有一个单元格。为选定的“Notes 表格行”分配了用作选项卡的 TD `<td class="dominoSelTopTab">`，而其他选项卡则得到`<td class="dominoTopTab">`。

但是，当使用其他浏览器时，就没有那么简单了。

在 Firefox 中，每个“选项卡”最终都是表格中的一个单单元单行表格，几乎无法识别它。

```
<td><table border="1" cellpadding="2">
<tr><td><div align="center"><b>Tab 2</b></div></td></tr>
</table></td> 
```

未选择的选项卡将显示如下：

```
<td><table border="1" cellpadding="2">
<tr><td><div align="center"><a name="1." href="/Projects/MyCSS.nsf/0c3b9489476440c085257a62006d97d6/d482a1767a4af77f85257a62006db064?OpenDocument&amp;TableRow=1.0#1." target="_self">Tab 1</a></div></td></tr>
</table></td> 
```

那么，问题来了，在不使用IE的情况下，如何识别选中的标签和未选中的标签呢？

注意：对于非 Notes 开发人员，HTML 是根据 Notes 设计器客户端中的视觉设计自动生成的。我会用手动 HTML 替换它，除了它太多以至于这样做会消耗太多时间。

# powershell - 在 W2K3 上的 Start-Job 脚本块中执行 PS 脚本失败

> ID：12698664
> 
> 赞同：1
> 
> 时间：2012-10-02T21:32:23.127
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我正在尝试执行下面的脚本块。这在 Win 7 上运行良好，但在 W2K3 上从未成功。作业保持在永久运行状态。知道为什么吗？

```
$Scriptblock = {
    Add-Content c:\temp\test.txt -Value "Starting..."
    $processes = c:\temp\test.ps1
    Add-Content c:\temp\test.txt -Value $processes
    Add-Content c:\temp\test.txt -Value "finished"
}

If (-not(Test-Path "c:\temp\test.ps1"))
{
    Add-Content c:\temp\test.ps1 -Value "get-process"
}

Start-Job -ScriptBlock $Scriptblock 
```

# c# - 如何以编程方式关闭消息对话框

> ID：12698666
> 
> 赞同：5
> 
> 时间：2012-10-02T21:32:35.480
> 
> 标签：c#, windows-8, windows-runtime, messagedialog

我正在尝试在我的 WinRT 应用程序中关闭 MessageDialog。我注意到如果我尝试一次显示两个消息对话框，我会得到一个 UnauthorizedAccessException。为避免这种情况，我想关闭现有的消息对话框（如果它已打开）。我用它来显示对话框：

```
 MessageDialog md = new MessageDialog(" ");

    private void MessageBox(string s)
    {
        Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
        {
            md.Content = s;
            //CLOSE HERE
            md.ShowAsync();
        }
        );
    } 
```

我该如何关闭它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:47:01.120

不要试图找到关闭它的方法，而是尝试为 AsyncCommand 声明一个实例变量；

```
AsyncCommand command;

command = md.ShowAsync(); 
```

然后在你的命令处理程序中，在运行你的方法之前检查命令是否为空

```
if(command!=null)
{
command.Cancel();
} 
```

// 做事/ 再次尝试块

# javascript - Linkedin API 不会获取个人资料数据

> ID：12698672
> 
> 赞同：0
> 
> 时间：2012-10-02T21:32:58.990
> 
> 标签：javascript, api, linkedin

我使用linkedin 的JS api 来获取一些用户配置文件信息。我的标题中有这个：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
api_key: xxxxx
authorize: false
onload: getProfileData
</script> 
```

这就是我用来提取数据的方法：

```
<script type="text/JavaScript">

function getProfileData(){
IN.API.Profile("me").fields(["firstName","lastName","headline","summary"]) .result(function(result) {
   alert JSON.stringify(result)) 
}
</script> 
```

但是（通过萤火虫检查）我不符合我的要求。相反，它会请求标准信息：

```
https://api.linkedin.com/v1/people::(~):(id,first-name,last-name,headline,picture-url) 
```

任何人都知道这个问题可能是什么或如何解决？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:23:39.790

您的代码中似乎存在许多错误：

首先，`authorize: false`与 onLoad 回调一起使用将不起作用，因为 authorize: false 要求用户为每次页面加载手动“登录”，并且 onLoad 调用会取消该选项。其次，你`onload`在引导部分，它应该是`onLoad`. 以下将解决这两个问题：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: xxxxx
  authorize: true
  onLoad: getProfileData
</script> 
```

此外，您在实际工作代码中缺少一些括号等 - 以下应该可以工作：

```
<script type="text/javascript">
  function getProfileData() {
    IN.API.Profile("me")
      .fields(["firstName", "lastName", "headline", "summary"])
      .result(function(result) {
        alert(JSON.stringify(result));
      });
  }
</script> 
```

请记住，如果您想获得比[基本字段](https://developer.linkedin.com/documents/profile-fields#profile)更多的内容，则需要[征得用户的许可](https://developer.linkedin.com/documents/authentication#granting)。

# java - Android 从静态上下文中获取片段中的资源

> ID：12698675
> 
> 赞同：0
> 
> 时间：2012-10-02T21:33:21.350
> 
> 标签：java, android, static, resources

我[在这里](https://stackoverflow.com/questions/4391720/android-how-can-i-get-a-resources-object-from-a-static-context)尝试解决我的问题。它很相似，但我使用片段，所以当我需要上下文时，我通常需要调用 getActivity()。

基本上我有上面链接中描述的 App.java，我有

```
android:name=".App" inside my <application> tag 
```

添加到我的 AndroidManifest.xml。现在我有了这个类来收集我经常使用的所有东西：

```
public class MiscMethods{
public static void ErrorToast(int errorCode) {
    String errorString = null;
    if(errorCode==1){ errorString = App.getContext().getString(R.string.error_tooManyFieldsEmpty);}
    if(errorCode==2){ errorString = App.getContext().getString(R.string.error_featureComingSoon);}
    if(errorCode==3){ errorString = App.getContext().getString(R.string.error_SwitchBreak);}
    else{errorString="Wrong Error Code";}
    Toast errormsg = Toast.makeText(App.getContext(), errorString, Toast.LENGTH_SHORT);
    errormsg.setGravity(Gravity.CENTER, 0, 0);
    errormsg.show();
}
} 
```

在我的一个片段中，我称之为

```
MiscMethods.ErrorToast(1); 
```

我只是从我的方法的“else {}”部分收到“错误的错误代码”消息

你能帮我改正吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:49:55.177

更好的格式会使您的问题更容易找到：

```
public static void ErrorToast(int errorCode) {
    String errorString = null;
    if (errorCode == 1) {
        errorString = App.getContext().getString(R.string.error_tooManyFieldsEmpty);
    }
    if (errorCode == 2) {
        errorString = App.getContext().getString(R.string.error_featureComingSoon);
    }
    if (errorCode == 3) {
        errorString = App.getContext().getString(R.string.error_SwitchBreak);
    } else {
        errorString = "Wrong Error Code";
    }
    Toast errormsg = Toast.makeText(App.getContext(), errorString, Toast.LENGTH_SHORT);
    errormsg.setGravity(Gravity.CENTER, 0, 0);
    errormsg.show();
} 
```

正如您现在可能看到的那样，您`if (errorCode == 1)`应该可以工作，但会被覆盖，因为`if (errorCode == 3)`在这种情况下将是错误的，并且您的 else 将覆盖您的`errorString`变量。

A`switch(errorCode)`和 3 个案例就是您要找的。

最后提示：改进您的格式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-12T07:38:30.297

在您的**CoreApplication.java中的代码下编写**

[第1步]

```
public class CoreApplication extends Application {

private static CoreApplication instance; 
} 
```

[第2步]

```
onCreate(){
instance = this;
} 
```

【第三步】
添加

```
public static CoreApplication getGlobalApplicationContext() {

if (instance == null) {
throw new IllegalStateException("this application does not 
inherit GlobalApplication"); " +
"}

return instance;
} 
```

[Step4]
调用`getGlobalApplicationContext()`你的片段

# android - 需要帮助了解 Android 上的 GPS

> ID：12698676
> 
> 赞同：1
> 
> 时间：2012-10-02T21:33:22.193
> 
> 标签：android, gps, android-location

我的 android 应用程序中有一个位置侦听器，它将请求以 5 秒的间隔和 10 米的距离进行更新：

```
mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000,10); 
```

`onLocationChanged()`我按预期通过听众的方法得到通知。然而奇怪的是，当我在家时，我注意到检索到的坐标来自大约半个街区之外。这是相当一致的。是的，我打开了 GPS。如果我打开谷歌地图，我注意到它最初会显示我的应用程序报告坐标的位置，但会在几秒钟内移动到我的实际位置。

谷歌地图是否对坐标应用了某种 GPS 定位？我是否需要做一些比简单地收听更新更复杂的事情。我以前没有这样做过，所以这对我来说都是新的..

另请注意，我有`Endomondo`你在哪里运行的轨道，它似乎也能得到非常准确的结果。例如，我启动它，从前面走到街上大约半个街区，然后回来，它完美地绘制了它. 我需要做些什么来获得更准确的报告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:55:31.900

是的，谷歌地图不仅仅依靠您的 GPS 来确定您的实际位置。准确地说，Google 依赖于手机天线 (CellID) 和 wi-fi 接入点天线之间的无线电多点定位（参见：[locationManager.NETWORK_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER)）。

使用这些辅助信息源，Google 甚至可以确定您的位置，即使在您的 GPS 无法可靠工作的建筑物内，以及由于某种原因 GPS 无法提供任何帮助的室外情况（例如在纽约） ，摩天大楼造成的“峡谷效应”使 GPS 无法工作）。

而且，是的：除了阅读位置更新之外，还有更多需要考虑的因素。

您应该阅读[Android 位置管理器](http://developer.android.com/reference/android/location/LocationManager.html)文档，特别是专门介绍[位置提供程序](http://developer.android.com/reference/android/location/LocationProvider.html)和[位置策略](http://developer.android.com/guide/topics/location/strategies.html)的部分，以了解有关 Google 位置功能的更多信息。另请参阅：[位置和地图](http://developer.android.com/guide/topics/location/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:00:59.723

这种行为是完全正常的，因为当您在室内/室外时 GPS 精度会发生变化。

```
 ...Although GPS is most accurate, it only works outdoors, 
 it quickly consumes battery power, and doesn't return the location as quickly 
 as users want... 
```

您还可以使用此链接中提供的示例代码[Location Strategies](http://developer.android.com/guide/topics/location/strategies.html) .. 此链接将有助于了解位置管理的工作原理，它还包含很好的可用示例代码

# sql - 查找计数 SQL 的最大值和最小值

> ID：12698679
> 
> 赞同：1
> 
> 时间：2012-10-02T21:33:27.133
> 
> 标签：sql, count, max, min

问题是：对于每个部门，列出他们提供的课程的所有部分的最大和最小入学人数，只考虑那些有一些入学人数的部分——也就是说，不要担心那些没有学生参加该部分的部分。

```
Department(dept_name, building, budget)
Section(course_id, sec_id, semester, year, building, room_number, time_slot_id)
student(student_id, name, major, tot_cred)
takes(student_id, course_id, sec_id, semester, year, grade)
course(course_id, title, dept_name, credits) 
```

查询：

```
SELECT * 
  FROM course 
  NATURAL JOIN (SELECT count(student_id) AS tot 
  FROM takes NATURAL JOIN section GROUP BY course_id) 
```

^^^ 提供注册。需要找到 Max 和 Min

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:40:38.880

您将为此使用子查询：

```
select min(cnt), max(cnt)
from (select dept_name, count(*) as cnt
      from student s join
           takes t
           on s.student_id = t.student_id join
           course c
           on t.course_id = c.course_id join
           department d
           on c.department_id = d.department_id
      group by dept_name
     ) t 
```

为此，我假设您有一个`course`带有部门 ID 的表。您上面的表格没有与部门的链接。

您的查询根本没有意义。永远不要在`FROM`子句中使用“，”。如果要进行交叉连接，请明确使用`CROSS JOIN`. 我希望您的查询在任何数据库中都有语法错误，因为`enrollment`未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-20T09:46:07.270

在您的情况下，您只需要关心 table `takes`。这是我的方法：

```
SELECT MAX(enrollment) MaxEnrollment, MIN(enrollment) MinEnrollment
FROM (
    SELECT COUNT(student_id) enrollment 
    FROM takes
    GROUP BY course_id, sec_id, semester, year
    ) a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:42:11.263

```
select
    course_id,
    min(tot_per_course_sec) min_section_enrolment,
    max(tot_per_course_sec) max_section_enrolment
from course
natural join (
    select course_id, sec_id, count(student_id) as tot_per_course_sec
    from takes
    natural join section
    group by course_id, sec_id
    having count(student_id) > 0
    ) sec_grouped 
```

# ember.js - ember.js 视图渲染有何不同

> ID：12698685
> 
> 赞同：3
> 
> 时间：2012-10-02T21:34:01.110
> 
> 标签：ember.js

```
// create Ember js app
App = Ember.Application.create();

// Create a grand parent view - without using templateName function/property
App.GrandparentView = Ember.View.extend({
  click: function() {
    console.log('Grandparent!');
  }
});

// Create a parent view by using templateName function/property
App.ParentView = Ember.View.extend({
  templateName:"parent-view",          
  click: function() {
    console.log('parent view!');
  }
});

// use the template to render the view content
<script type="text/x-handlebars" >
  {{#view App.GrandparentView}} 
    Click Grandparent View!     
  {{/view}}
</script>

// embed the view inside a div 
<div id="Parent">
  <script type="text/x-handlebars">
    {{view App.ParentView}}
  </script>
</div> 
```

这两种不同的方法在 ember.js 中的视图渲染方面是如何工作的。哪一个更可取，一个比另一个的用例或优势是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:22:15.280

首先，不要将 Ember 模板`<script>`标签放在标签内`<div>`。这不会达到你的预期。

当您使用时，`{{view App.View1}}`您是在告诉 ember 在此处呈现 App.View1 的实例。它使用的模板将是`templateName`您在构建 App.View 时使用的模板。例子：

```
<script type="text/x-handlebars" data-template-name="my-template">
  Hello World!
<script>

App.View1 = Ember.View.extend({ templateName: 'my-template' }); 
```

当您使用时，`{{#view App.View2}} {{/view}}`您告诉 ember 在此处呈现 App.View2 的实例，但内联定义模板。App.View2 将没有`templateName`属性，它的模板将位于`{{#view}}{{/view}}`块内。例子：

```
{{#view App.View2}}
    Hello World
{{/view}}

App.View2 = Ember.View.extend(); 
```

两者都不是可取的，但命名模板允许可重用​​性并使代码更简洁。一个结构良好的应用程序将利用这两种模板选项。当您只想向同一个视图类提供一次不同的模板时，可以使用匿名/内联模板（App.View2 示例）。

# php - 如何在 Javascript 确认函数中传递参数？

> ID：12698694
> 
> 赞同：2
> 
> 时间：2012-10-02T21:34:38.053
> 
> 标签：php, javascript, confirm

我的代码中有类似的东西：

```
<?php foreach($clients as $client): ?>
    <tr class="tableContent">
        <td onclick="location.href='<?php echo site_url('clients/edit/'.$client->id ) ?>'"><?php echo $client->id ?></td>
        <td>
            <a class='Right btn btn-danger' onClick="ConfirmMessage('client', <?php $client->id ?>,'clients')">
                <i class="icon-remove-sign icon-white"></i>
            </a>
        </td>
    </tr>
<?php endforeach  ?> 
```

这实际上是视图。因此，当用户单击删除按钮（带有 btn-danger 类的按钮）时，我希望他使用 javascript 确认框消息确认他的选择。您可以在标题中找到该脚本

```
function ConfirmMessage(type, id, types) {
    if (confirm("Are you sure you want to delete this ",type," ?")) { // Clic sur OK
       document.location.href='<?php echo site_url(); ?>',types,'/delete/',id;
    }
} 
```

所以这是我的问题：

我希望将 $type 替换为我将传递给函数的参数（如 client、article、post .. ）。我也想获取`$client->id`参数。我不擅长 javascript，正如你已经猜到的那样，它显然根本不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T21:37:09.280

将 JavaScript 中的字符串与`+`（相对于`.`PHP）连接起来：

```
confirm("Are you sure you want to delete this " + type + " ?"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:37:54.463

`confirm`只接受一个参数（一个字符串），即显示给用户的消息。
如果要在该消息中插入变量，则应使用`+`运算符连接字符串：

```
function ConfirmMessage(type, id, types) {
    if (confirm("Are you sure you want to delete this " + type + " ?")) { // Clic sur OK
       document.location.href='<?php echo site_url(); ?>' + types + '/delete/' + id;
    }
} 
```

# javascript - 遵循 AJAX 13 字节 - Twitter

> ID：12698699
> 
> 赞同：2
> 
> 时间：2012-10-02T21:34:56.547
> 
> 标签：javascript, ajax, twitter

在 Twitter 上关注一个帐户时，会发送一个 POST 请求，说明我们正在关注该人。

问题是请求只占用 13 个字节。当我发现这一点时，我有点激动，因为它会减少延迟（我只是发送少量信息）和服务器上的负载。它可以为 Web 开发人员带来很多优势。

但是他们怎么能发送一个 XMLHttpRequest 并删除 cookie 和所有不需要的额外信息呢？据我所知，没有办法删除额外的信息（安全原因）。

有没有办法像 Twitter 在这里做的一样，还是只是出于我的想法？![这是它的样子](../Images/18ab8c1cb57ca844e9372cc00b60bc48.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:50:50.743

“13B”是响应正文的大小，而不是请求的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:06:10.563

我认为“13B”的东西只是 Chrome 检查器中的一些临时渲染工件。正如其他人所指出的，在响应实际返回之后，它是一个适当的值（表示响应的大小，而不是请求）。

请注意，如果您在 Firefox 中查看 Firebug，您将不会看到相同的“13B”内容。如果您使用像 Charles 这样的代理嗅探器工具，您也不会看到它。

# r - R：功能-显示环境名称而不是该环境的内存地址？

> ID：12698700
> 
> 赞同：9
> 
> 时间：2012-10-02T21:34:56.790
> 
> 标签：r

像内置函数一样显示函数内部环境名称的方法是什么？例如，当我键入 function:mean available in base package 时，我可以将环境视为“namespace:base”。

```
mean

   function (x, ...) 
   UseMethod("mean")
   <bytecode: 0x0547f17c>
   **<environment: namespace:base>** 
```

但是，当我将一个函数附加到新创建的环境时，在这里访问函数 (f) 内的自由变量 (z) 的值时，它会自动驻留在 .GlobalEnv 环境中，并且环境的名称不会显示在功能，但看到（e1）环境的内存地址“0x051abd60”。

```
 e1 <- new.env()
     e1$z <- 10
     f <- function(x) {
           x + z 
      }
     environment(f) = e1
     f

               function(x) {
                    x + z 
               }
               **<environment: 0x051abd60>** 
```

为什么我会看到这种行为？为什么我不能在函数中获取我的环境名称，就像 R 的内置函数以及各种 R 包中可用的函数一样？search() 提供的环境数据结构和 .GlobalEnv 环境之间是否有区别

任何指向这种行为背后的动机的指针都将受到高度赞赏。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-12-01T22:01:36.507

您可以使用 设置环境名称`attr`，如下所示：

```
e <- new.env()
attr(e, "name") <- "xyzzy"

environmentName(e)
## [1] "xyzzy" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T21:47:15.973

如果我没记错的话，包和命名空间的环境名称是在 C 级别分配的。因此，用户创建的环境不会显示名称。你不能在 R 中设置环境名称，即使有一个名为`environmentName()`. 它只会返回在 C 级别分配的名称。它实际上只适用于包和命名空间，而不适用于其他环境。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T14:42:27.040

大多数环境没有名称 - 环境的名称是环境的特殊属性，而不是指向该环境的对象的名称。例如，在以下情况下，您希望 f 的环境的“名称”是什么？

```
e1 <- new.env()
e1$z <- 10
e2 <- e1
e3 <- e1

f <- function(x) {
  x + z 
}
environment(f) <- e1

identical(e1, e2)
identical(e1, e3) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-27T08:03:23.103

您可以使用我开发的最近发布的包[envnames](https://cran.r-project.org/web/packages/envnames)作为解决此问题的方法。

在您的示例中，如果您使用包的[environment_name()](https://rdrr.io/cran/envnames/man/environment_name.html)函数来检索`f()`您将获得的函数环境`"e1"`，而不是`""`使用内置函数获得的环境`environmentName()`，即：

```
library(envnames)
e1 <- new.env()
e1$z <- 10
f <- function(x) {
   x + z 
}
environment(f) = e1
environment_name(environment(f)) 
```

输出是：

```
[1] "e1" 
```

在 Hadley 给出的示例中，许多环境指向同一个环境，您可以在命名数组中获得所有这些环境名称：

```
library(envnames)
e1 <- new.env()
e1$z <- 10
e2 <- e1
e3 <- e1

f <- function(x) {
  x + z 
}
environment(f) <- e1
environment_name(environment(f)) 
```

其中输出包括每个环境的位置作为返回数组的名称属性：

```
R_GlobalEnv R_GlobalEnv R_GlobalEnv 
       "e1"        "e2"        "e3" 
```

最后，由于您提到*看到环境的内存地址并不能告诉我们太多*关于我们正在谈论的用户定义的环境，您可以**使用内存地址作为`environment_name()`函数的输入参数来获取环境的名称（或环境）与内存地址相关联**。

以下代码片段和输出说明了这一点（代码在*您*的单个环境示例中运行）：

```
> f
function(x) {
       x + z 
    }
<environment: 0x0000000013f15870>
> environment_name("<environment: 0x0000000013f15870>")
[1] "e1" 
```

# jquery - jCarousel jQuery ajax 加载 1000 条记录

> ID：12698715
> 
> 赞同：1
> 
> 时间：2012-10-02T21:36:08.847
> 
> 标签：jquery, jcarousel

我正在使用 jCarousel 来呈现一个包含 +-1000 个名称的垂直 scolling 列表。我正在使用 ajax 一次加载数据 100 条记录，然后当所有数据都加载完毕后，我就让 jCarousel 在 DOM 中循环。我的 ajax 和循环都可以正常工作，但无论总记录数有多大，我都想让代码正常工作。

1）我想消除 1201 固定数字并使用变量。2）我目前循环我看到的每条记录（carousel.first），看看它是否与我的重新加载位置匹配（尽管循环只有 12 倍，但它仍然看起来有点“循环”）

有什么改进的建议吗？

```
 function mycarousel_itemLoadCallback(carousel, state)   {
        //if (carousel.has(carousel.first, carousel.last)) {                                                
        //return;           
        //}             
        var getCount = 100;     // Number of records to grab at a time
        var maxCount = 1201;    // total possible number of records
        var visible = 9;        // the number of records you can see in the window so this creates a pre-load by this number of records         
        for (var i = 1;  i < maxCount; i+=getCount ) { 
            if (carousel.first === 1 || carousel.first === (i-visible)){                
                var getFrom = i;                    
                var getTo = getFrom+(getCount-1);
                //alert('TOP Record ='+carousel.first+'\n Now GET '+getFrom+'-'+getTo);                 
                jQuery.get('#ajaxscript#', {
                        first: getFrom,
                        last: getTo
                    },
                    function(xml) {
                        mycarousel_itemAddCallback(carousel, getFrom, getTo, xml);
                    },
                'xml'
                );                  
            break;
            }
        }
    }; 
```

# svg - Firefox 上的 SVG 图像遮罩

> ID：12698719
> 
> 赞同：3
> 
> 时间：2012-10-02T21:36:29.633
> 
> 标签：svg, mask, masking

最近我创建了 hexagon SVG，并计划将其用于 Firefox 的图像遮罩。目前它只适用于 Chrome

[http://jsfiddle.net/brokeneye/WKEbw/](http://jsfiddle.net/brokeneye/WKEbw/)

我已经尝试使用`mask: url`，但似乎不起作用。

解决了

找到了解决方案，它适用于 Firefox、chrome、safari、opera 和 IE9。需要在SVG上定义img。示例代码在下面这个小提琴上

[http://jsfiddle.net/brokeneye/ygsKm/](http://jsfiddle.net/brokeneye/ygsKm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:23:44.553

Firefox 以不同的方式支持您想做的事情。您可以将[SVG 蒙版与 html 图像](https://developer.mozilla.org/en-US/docs/Applying_SVG_effects_to_HTML_content#Example%3a.C2.A0Masking)一起使用，以使用不同的语法获得相同的效果。

# facebook - Facebook Graph Explorer：查找 2 个朋友之间的消息

> ID：12698721
> 
> 赞同：0
> 
> 时间：2012-10-02T21:36:35.877
> 
> 标签：facebook, facebook-graph-api

在 Facebook 上，当您访问朋友的页面时，您可以通过单击“消息”按钮并选择“查看友谊”选项来查看双方之间的消息。

我想使用 Facebook 的 Graph Explorer 找到这些相同的消息。我知道这是可能的，但无法识别选项。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:45:51.883

我发现这是**不可能**通过 FB 的图形浏览器以编程方式实现的。这只能在网站上进行。

# javascript - 像这样的 Ajax 加载动画

> ID：12698727
> 
> 赞同：2
> 
> 时间：2012-10-02T21:36:55.533
> 
> 标签：javascript, ajax, html, loader

我已经为一个完全像这样的动画搜索了高低：http: [//jsfiddle.net/pedox/yed68/embedded/result/](http://jsfiddle.net/pedox/yed68/embedded/result/)

问题是它是 css 制作的，虽然大多数浏览器还不支持它，但它并不是一个真正的选择。

[http://loadinfo.net/](http://loadinfo.net/) <- 太小太简单了。

[http://preloaders.net/en/horizo​​ntal](http://preloaders.net/en/horizontal) <- 他们有一些水平条，但动画速度是线性的。

[http://www.netwaver.com/21/8-ajax-loading-icon-generators/](http://www.netwaver.com/21/8-ajax-loading-icon-generators/) <- 这是一个列表。上面提到的两个加上一些额外的。

那里有更多网站，但我丢失了一些链接。但它们的共同点是它们都很小，而且看起来不像上面那样。

我想我已经在“Modern UI/Metro UI”中看到了这个动画，或者在 Windows 8 中看到了它现在的名字。

希望有一些具有更好搜索或图形技能的人可以找到一个很好的简单负载，其中包含不同速度的动画圆圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:49:35.530

请记住，仅 CSS3 的解决方案不适用于 IE<=9。我也尝试使用我的移动网络应用程序，CSS3 解决方案适用于 Android 4 默认浏览器。

# javascript - 在 EnhancedGrid 上更改 Dojo DnD 插件的默认行为

> ID：12698730
> 
> 赞同：2
> 
> 时间：2012-10-02T21:37:02.480
> 
> 标签：javascript, datagrid, dojo, drag-and-drop

我正在将 Dojo 1.8 用于我正在开发的应用程序，并且我正在尝试创建各种文件浏览器（à la Dropbox）。我正在使用 EnhancedGrid 来显示文件和目录的列表，以及用于该网格的 Dojo 的 DnD 插件。

我希望能够限制 DnD 功能，以便如果用户拖动一行，他们只能将它们放在代表目录的行上；也就是说，我希望鼠标图标反映它们是否可以删除，并禁用*不是*目录的行的删除事件。我已经梳理了打包的 DnD 插件的源代码，但我找不到任何可以操纵的事件或配置，尽管我可能只是在错误的地方寻找。

所以，所以，这个功能是：a）Dojo 是可能的 b）可以用一点新代码或 c）只通过大量的新代码才可行？

# c++ - 如何确保一次只有一个进程访问共享内存

> ID：12698731
> 
> 赞同：3
> 
> 时间：2012-10-02T21:37:03.200
> 
> 标签：c++, visual-c++, win32-process

我对 Win32 编程相当陌生。我想在两个进程之间创建共享内存。我已经使用内存映射功能创建了共享内存。

我的结构看起来是这样的：

```
struct sharedMemory
{
  int ans1;
  int ans2;
  BOOLEAN flag1;
}; 
```

现在我可以从不同的进程访问这个共享内存，但是我对如何将锁应用到这个共享内存感到困惑，以便只有 1 个进程能够访问 struct 成员变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T22:01:43.010

通过在调用时提供互斥锁名称[`CreateMutex`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)，您将使互斥锁对其他进程可见。

如果另一个进程将相同的名称传递给`CreateMutex`，它将获得现有的互斥锁（而不是创建一个新的互斥锁），然后可以将其用于进程间同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:01:33.627

共享内存只是加载在各种程序的地址空间中的内存页面，因此共享内存与进程对其的访问无关。为了在任何操作系统中处理这个问题，包括 Windows 和 Posix，您应该创建自己的同步机制。

为了处理这个你必须采取步骤，一个进程向另一个进程发出数据准备好的信号（在 Win32 中你可以使用命名事件，更多信息请看 CreateEvent ），另一个步骤是通过一些同步机制独占访问共享内存（在 Win32 中，这可以使用命名互斥体来完成，有关更多信息，请参阅 CreateMutex）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:11:36.413

您可以做两件事之一，1）创建一个互斥锁，并通过互斥锁函数锁定它（参见 MSDN 参考） 2）创建或利用布尔值，true 用于锁定（也就是说，一些复制、修改或使用数据正在完成）和 false 解锁（父或主线程正在处理它）。这样你就可以做到：

```
int someThread1(threadData *data)
{
    data->lock = true;
    /* Do data functions */
    data->lock = false;
    return 1; //Or whatever you want it to return after checking data
}
int someThread2(threadData *data)
{
    data->lock = true;
    /* Do data functions */
    data->lock = false;
    return 1; //Or whatever you want it to return after checking data
}
void *masterThread(void *data)
{
   ThreadData * t_Data = (ThreadData*)data;
   do
  {
     if(t_Data->lock == false)
     {
       /*Do normal operations */
     }
     else
    {
      Sleep(10); //Give the CPU a break
     //Do whatever else you need
    }
  }while(someCondition == true);
return 0;
} 
```

我知道以上不是很标准或完美的。但如果不使用互斥锁，这只是一种手动管理线程的方法。只是一个想法/建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:55:18.313

有点困惑，内存映射文件是线程安全的。许多线程可以通过读和读/写访问访问一个或多个文件视图。

无论如何，您需要一个进程间锁来只允许一个线程接触您的结构（互斥锁）。

# git - 是否有规范的 Git 徽标？

> ID：12698738
> 
> 赞同：-5
> 
> 时间：2012-10-02T21:37:22.357
> 
> 标签：git

与 GitHub 相比，Git 本身是否有规范的徽标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:40:41.420

官方网站有各种格式的[Git 标志](http://git-scm.com/downloads/logos)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:39:25.710

是的，你可以在这里找到它[http://en.wikipedia.org/wiki/Git_(software)](http://en.wikipedia.org/wiki/Git_%28software%29)

![在此处输入图像描述](../Images/939d447f4683d359e92b72fa482e95ea.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:39:39.783

实际上有一个 git only 网站： http: [//git-scm.com/](http://git-scm.com/)

# c# - 将派生类中实例化的对象传递给锁定语句

> ID：12698746
> 
> 赞同：0
> 
> 时间：2012-10-02T21:38:06.583
> 
> 标签：c#, locking

我有一个 LoggerBase 类，它看起来像：

```
 public class BatchLoggerBase : IDisposable
    {
        protected string LogFilePath { private get; set; }
        protected object _synRoot;

        BatchLoggerBase(string logFilePath)
        {
            LogFilePath = logFilePath;
        }

        protected virtual void WriteToLog(string message)
        {
            Task.Factory.StartNew(() =>
            {
                lock (_synRoot)
                {
                    System.IO.File.AppendAllText(LogFilePath, message);
                }
            });
        }
        //Other code... 
    } 
```

我有另一个类继承自这个基类，例如：

```
public sealed class TransactionBatchLogger : BatchLoggerBase
{
    public TransactionBatchLogger()
    {
         _synRoot = new object();
         string directory = AppDomain.CurrentDomain.BaseDirectory + ConfigurationManager.AppSettings["Batch.TransactionLog.Path"];
            if (!Directory.Exists(directory))
                Directory.CreateDirectory(directory);

            LogFilePath = string.Format("{0}{1}_{2}.txt", directory, "TransactionLog", DateTime.Now.ToString("yyyy-MM-dd"));
    }
public void LogLoyaltyPointProcess(IEnumerable<CustomerTierOverrideItem> listOfCustomerTierItem)
        {
            Task.Factory.StartNew(() =>
            {
                //Construct message...
                WriteToLog(message);
            });
        }
}

public sealed class LoyaltyPointBatchLogger : BatchLoggerBase
{
    public LoyaltyPointBatchLogger()
        {
            _synRoot = new object();

            string directory = AppDomain.CurrentDomain.BaseDirectory + ConfigurationManager.AppSettings["Batch.LoyaltyPointLog.Path"];
            if (!Directory.Exists(directory))
                Directory.CreateDirectory(directory);

            LogFilePath = string.Format("{0}{1}_{2}.txt", directory, "LoyaltyPointLog", DateTime.Now.ToString("yyyy-MM-dd"));
        }
public void LogLoyaltyPointProcess(IEnumerable<CustomerTierOverrideItem> listOfCustomerTierItem)
        {
            Task.Factory.StartNew(() =>
            {
                //Construct message...
                WriteToLog(message);
            });
        }
} 
```

LoyaltyPointBatchLogger 和 TransactionBatchLogger 将日志内容写入不同的日志文件（一个用于 transactionLog，另一个用于 LoayltyPointLog），但它们都从基类调用相同的虚拟方法。

批处理程序逐批处理数据（例如，总数据45000个，每批10000个）这两个记录器可能会被不同的批次连续调用，所以我不希望日志文件被不同的批次记录器线程访问。

问题是：我应该在派生类 LoyaltyPointBatchLogger 和 TransactionBatchLogger 中还是在基类中实例化 _synRoot？

LoyaltyPointBatchLogger 和 TransactionBatchLogger 中实例化的 _synRoot 是不同的引用，所以 LoyaltyPointBatchLogger 和 TransactionBatchLogger 在进入 lock 语句时不会互相等待，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:03:19.627

实例化发生在基类中，`syncRoot`是一个*实例*字段⇒ 基类的每个实例或其任何后代都在*每个实例的基础*上同步并发访问。

实例化发生在基类中，`syncRoot`是一个*静态*字段⇒ 基类的所有实例或其任何后代在*“单例”基础*上同步并发访问。

实例化发生在派生类中，`syncRoot`在构造函数中实例化⇒基类的每个实例或其任何后代都在*每个实例的基础*上同步并发访问。

实例化发生在派生类中，`syncRoot`是在派生类中声明和实例化的*静态*字段⇒每个派生类的所有实例在每个派生*类（类型）的基础上*同步并发访问。

*注意：最后一种情况对应于 Chris Sinclair 在他的回答中提出的建议。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:51:02.633

我没有任何使用“syncroot”锁定模式的经验，但是如果我正确理解了您的问题，如果我会通过让每个子类类型按类型静态声明其自己唯一的 SyncRoot 来解决这个问题。这样，该类型的所有实例共享相同的 SyncRoot。此外，我会*要求*通过构造函数为基本记录器提供一个 SyncRoot 对象，而不是*希望*子类分配它（并及时分配它）。此外，我会使其不可变，因此子类不能做坏事。

**批处理记录器库**

```
public abstract class BatchLoggerBase
{
    protected readonly object SyncRoot;

    protected BatchLoggerBase(object syncRoot)
    {
        if (syncRoot == null)
            throw new ArgumentNullException("syncRoot");

        this.SyncRoot = syncRoot;
    }
} 
```

**LoyaltyPointBatchLogger**

```
public class LoyaltyPointBatchLogger : BatchLoggerBase
{
    private static readonly object LOYALTY_SYNC_ROOT = new object();

    public LoyaltyPointBatchLogger()
        : base(LOYALTY_SYNC_ROOT)
    {

    }
} 
```

**TransactionBatchLogger**

```
public class TransactionBatchLogger : BatchLoggerBase
{
    private static readonly object TRANSACTION_SYNC_ROOT = new object();

    public TransactionBatchLogger()
        : base(TRANSACTION_SYNC_ROOT)
    {

    }
} 
```

编辑：请注意，这仍然意味着子类可以*忽略*您的意图。例如：

```
public class EvilBatchLogger : BatchLoggerBase
{
    public EvilBatchLogger()
        : base(new object())
    {

    }
}

var evil1 = new EvilBatchLogger();
var evil2 = new EvilBatchLogger(); 
```

在这种情况下，***并不会***`evil`共享`evil2`同一个锁定对象并且可以干扰。但是，如果您可以控制记录器的实现，则可以避免自取其辱。

# c# - 在列表中返回列表时出现 Linq 错误

> ID：12698748
> 
> 赞同：0
> 
> 时间：2012-10-02T21:38:12.730
> 
> 标签：c#, linq, entity-framework

我有一个定义如下的类：

```
public class SearchResult
{
    public Customer Customer { get; set; }
    public Receipt Receipt { get; set; }
    public IEnumerable<ReceiptDetail> ReceiptDetail { get; set; }
} 
```

在我的 Linq 查询中，我想返回单个 SearchResult 记录，但在返回 ReceiptDetail 列表时遇到问题。如果我做：

```
 var list=(from cust in dbContext.Customers 
     join rec in dbContext.Receipts on cust.IdCustomer equals rec.IdCustomer
     join recdet in dbContext.ReceiptDetails on rec.IdReceipt equals recdet.IdReceipt
     select new SearchResult
     {
          Customer=cust,
          Receipt=rec,
          ReceiptDetail = (from  r1 in recdet select r1).ToList() // COMPILER ERROR HERE
     }).ToList(); 
```

我得到“找不到源类型 ReceiptDetail 'Select' 的查询模式的实现”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:44:41.827

嗯，`recdet`来自这里：

```
join recdet in dbContext.ReceiptDetails on rec.IdReceipt equals recdet.IdReceipt 
```

这意味着它是一个*单一*的收据细节。然后，您尝试在此处将其用作*集合*：

```
from  r1 in recdet select r1 
```

我怀疑您实际上想要一个群组加入：

```
join recdet in dbContext.ReceiptDetails on rec.IdReceipt equals recdet.IdReceipt
  into recdets
...
ReceiptDetail = (from  r1 in recdets select r1).ToList() 
```

或更简单的后半部分：

```
ReceiptDetail = recdets.ToList() 
```

# html - 在页面中心创建一个固定的 div

> ID：12698750
> 
> 赞同：0
> 
> 时间：2012-10-02T21:38:20.423
> 
> 标签：html, css, margin, css-position

试图在我的页面中心创建一个固定框（例如石灰框）

我无法弄清楚为什么该框不会在页面内居中，因为它的边距为自动，我假设这与它的固定定位有关？

```
#countdownHolder{
    width:700px;
    height:250px;
    margin: 0 auto;
    position:fixed;
    background-color:#0F0;
    z-index:21;
    text-align:center;
} 
```

现场示例：[http ://www.rubytuesdaycreative.co.uk/](http://www.rubytuesdaycreative.co.uk/)

编辑：只是补充一下，我确实希望将 div 固定在页面中间，我只是希望它居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:45:14.677

试试这个：

```
#countdownHolder {
    background-color: #00FF00;
    text-align: center;
    margin-left: -350px;
    position: fixed;
    left: 50%;
    height: 250px;
    width: 700px;
    z-index: 21;
} 
```

# html - div 高度不适用于动态内容 IE

> ID：12698752
> 
> 赞同：0
> 
> 时间：2012-10-02T21:38:27.940
> 
> 标签：html, css, internet-explorer, cross-browser

我有一个将谷歌图表 api 信息加载到 div 中的脚本。div 具有固定的高度和滚动属性。但是，当来自谷歌的表格加载时，它会溢出 div（见下图）。这是在兼容模式下的IE 8上，css如下：

```
div.dashwrapper .no_overflow{overflow-x: hidden; overflow-y: scroll; height: 300px;} 
```

这是它在 IE8 中的样子（蓝色轮廓来自开发人员工具，但它勾勒出 div 的高度） ![忽略高度限制的动态内容](../Images/22bca171a334db0f4ce76308e85e030c.png)

这就是它在 Firefox 中的样子（它应该是什么样子） ![火狐输出](../Images/7b817c2c166df00d1a8ca1235bf31e9e.png)

这是它的 HTML/Javascript：

```
<script>
var table = new google.visualization.Table(document.getElementById('chain_info_this_year'));
    table.draw(data , {showRowNumber: true});

    data = new google.visualization.DataTable();
    data.addColumn('string', 'Store Name');
    data.addColumn('string', 'Chain');
    data.addColumn('number', 'Intakes <?php echo date("F");?>');
    data.addColumn('number', 'Ships <?php echo date("F");?>');
    data.addColumn('number', 'Intakes <?php echo date("Y");?>');
    data.addColumn('number', 'Ships <?php echo date("Y");?>');
    data.addRows([
                <?php 
                for ($i = 0; $i < count($store_info); $i++)
                {

                    if ($i <count($store_info) - 1)
                        echo "['" . str_replace("'", '',$store_info[$i]['chain']) . "', '" . str_replace("'", '', $store_info[$i]['store']). "', "  . $store_info[$i]['intakes_this_month'] . "," 
                            . $store_info[$i]['ships_this_month'] . "," . $store_info[$i]['intakes_this_year'] . "," . $store_info[$i]['ships_this_year'] . "],";   
                    else 
                        echo "['" . str_replace("'", '',$store_info[$i]['chain']) . "', '" . str_replace("'", '', $store_info[$i]['store']). "', "  . $store_info[$i]['intakes_this_month'] . "," 
                                . $store_info[$i]['ships_this_month'] . "," . $store_info[$i]['intakes_this_year'] . "," . $store_info[$i]['ships_this_year'] . "]";
                }
                ?>
                ]);
            var table = new google.visualization.Table(document.getElementById('store_info'));
    table.draw(data , {showRowNumber: true});

    </script>
    <div class='dash_row no_overflow'>
    <div class='dash_mod full_width'>
        <div class='title'>Store Information <span class='small_text space_left'><a style='cursor: pointer' onclick = "expand();">Show All</a></span></div>
        <div class='mod_content'><span id='store_info'></span></div>
    </div>
</div> 
```

有更多的 html，但这是相关的东西。dash_row div 在 dashwrapper 内部，只是为了澄清。

更新：JSFiddle 链接：http: [//jsfiddle.net/qKzLf/](http://jsfiddle.net/qKzLf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:21:26.567

我发现的唯一解决方案是在内容加载后使用 JQuery 重置 CSS 高度属性。这是因为，显然，兼容模式下的 IE 8 呈现 css，然后使用动态内容忽略它。

# php - 在 if else 语句中计算动态数值 - PHP

> ID：12698755
> 
> 赞同：1
> 
> 时间：2012-10-02T21:38:38.707
> 
> 标签：php

我将如何在 if else 语句中执行此逻辑？

```
If numeric_field_value_1 is x
   Increase numeric_field_value_2 by ?%

If numeric_field_value_1 is y
   Decrease numeric_field_value_2 by ?% 
```

***x***是 51 - 100 之间的任何数字。

***y***是 49 - 0 之间的任意数字。

***?%***是需要从 numeric_field_value_2 增加或减少的百分比。对于值的每个增加（对于*x*）或减少（对于*y*），每个计数/数字都会增加或减少 2%。示例 53 相当于增加 6%，示例 45 相当于减少 10%。请注意，50 是*x*和*y的基值，当**x*或*y*的值为 50时，不会增加或减少

* **numeric_field_value_1***是一个变量，其值是在其他地方预定义的。

* **numeric_field_value_2***是另一个变量，其值是在其他地方预定义的。

例子：

numeric_field_value_1 = 60

numeric_field_value_2 = 175

现在175需要增加20%

* * *

numeric_field_value_1 = 45

numeric_field_value_2 = 80

现在80需要减少10%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:44:06.833

```
if(numeric_field_value_1 > 50)
{
    numeric_field_value_2 *= 1+((numeric_field_value_1-50)*2)/100;
}
else if(numeric_field_value_1 < 50)
{
    numeric_field_value_2 *= 1-((50-numeric_field_value_1)*2)/100;
}
else
{
    //Undefined behavior
} 
```

应该做的伎俩。

# performance - 如何提高 XAML WinRT 图像更改速度？

> ID：12698757
> 
> 赞同：1
> 
> 时间：2012-10-02T21:38:54.217
> 
> 标签：performance, image, xaml, windows-runtime, winrt-xaml

假设我想快速显示可变数量的静态图像资源。

所以我有一个 INotifyPropertyChanged 类

```
for (blah)
    bitMaps.Add(new BitmapImage(new Uri(blah + i + ".png"))); 
```

在列表和属性中获取图像

```
public ImageSource Image
{
    get
    {
        return bitMaps[Index];
    }
} 
```

随着

```
public int Index
{
    set
    {
        _Index = value;
        OnPropertyChanged("Image");
    }
} 
```

这样我就可以通过更改索引来更改显示的图像。

然后我有一个绑定的图像标签`<Image Source="{Binding Image}" Stretch="None" />`来显示它。

但是，尽管最初似乎加载了位图图像，但更改索引时的转换仍然在第一次闪烁，导致我发现 BitmapImage 是延迟加载的。有没有更好/更高效的方法来做到这一点？或者如何正确预加载图像？

**更新**：我最终只是创建了一个用户控件，其中包含所有已创建且不可见的图像标签......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:51:34.400

修改图像源时，您总是会出现闪烁。如果要预加载图像，则可以将它们放在可视树中。我的第一个建议是使用这样的 FlipView：

```
<FlipView ItemSource="{Binding Bitmaps}" SelectedIndex="{Binding Index}">
    <FlipView.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}" />
        </DataTemplate>
    </FlipView.ItemTemplate>
</FlipView> 
```

当您更改索引时，FlipView 将显示已预加载的下一张/上一张图像。

如果您有数百张图像，请编写您自己的自定义控件来循环显示图像。

但无论哪种方式，如果您更改图像的来源，则在丢弃旧位图和渲染新位图之间会有差距。

# python - 如何在 Pandas 中创建具有自己级别的类别？

> ID：12698764
> 
> 赞同：1
> 
> 时间：2012-10-02T21:39:16.883
> 
> 标签：python, pandas

我正在阅读 CSV，我想将其中一列设为分类，并按我自己的顺序排列。我怎么做？三个标签是“读”、“写”和“混合”。以下是一些不起作用的事情：

```
Categorical(my_csv.rw, ['read', 'write', 'mixed'])
    ValueError: invalid literal for long() with base 10: 'mixed'

Categorical(my_csv.rw, Index(['read', 'write', 'mixed']))
    ValueError: invalid literal for long() with base 10: 'mixed'

Categorical(['read', 'mixed', 'write'], Index(['read', 'write', 'mixed']))
    ValueError: invalid literal for long() with base 10: 'mixed'

Categorical.from_array(['read', 'mixed', 'write']) # Levels in wrong order 
```

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:30:35.677

我相信这些级别是按标签排序的：

```
In [38]: a.levels
Out[38]: Index([mixed, read, write], dtype=object)

In [39]: a.labels
Out[39]: array([1, 0, 2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:17:53.910

Categorical 需要一个整数数组和一个级别数组：

```
In [14]: Categorical([0, 1, 2], Index(['read', 'write', 'mixed']))
Out[14]: 
Categorical: 
array([read, write, mixed], dtype=object)
Levels (3): Index([read, write, mixed], dtype=object) 
```

我不相信它会做很多错误检查（因为它们通常是由其他函数创建的），但这可以改变。

# python - 如何在 SQLAlchemy 中加载嵌套关系？

> ID：12698766
> 
> 赞同：6
> 
> 时间：2012-10-02T21:39:37.047
> 
> 标签：python, orm, sqlalchemy, lazy-loading

在我的 Pyramid+SQLAlchemy 网站上，我希望客户查看他下的所有购买。Purchase 有很多PurchaseOrder，PurchaseOrder 有很多PurchaseOrderDetail。

我想以优化的方式获取所有采购上下文（包括订单和详细信息），因此我正在研究 SQLAlchemy 加载策略。

我的模型声明如下所示：

```
class Purchase(Base):
    __tablename__ = 'purchase'
    __table_args__ = {'schema':'db','autoload':True}

    customer = relationship(Customer)
    billing_address = relationship(Address,primaryjoin="Address.AddressId==Purchase.BillingAddressId")
    shipping_address = relationship(Address,primaryjoin="Address.AddressId==Purchase.ShippingAddressId")
    orders = relationship(PurchaseOrder)

class PurchaseOrder(Base):
    __tablename__ = 'purchase_order'
    __table_args__ = {'schema':'db','autoload':True}

    company = relationship(Company)
    delivery_service = relationship(DeliveryService)
    details = relationship(PurchaseOrderDetail)

class PurchaseOrderDetail(Base):
    __tablename__ = 'purchase_order_detail'
    __table_args__ = {'schema':'db','autoload':True}

    product_variant = relationship(ProductVariant) 
```

我想要的是这种形式的东西：

```
 db_session = DBSession()
    p = db_session.query(Purchase).\
        options(joinedload_all(Purchase.customer,
                                Purchase.billing_address,
                                Purchase.shipping_address)
                ,subqueryload_all(Purchase.orders,
                                Purchase.orders.details)).all() 
```

但是，该`Purchase.orders.details`部分是不允许的并引发以下异常：

```
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "C:\apps\pyramid\lib\site-packages\sqlalchemy\orm\attributes.py", line 139, in __getattr__
    key)
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object has an attribute 'details' 
```

所以，我的问题是：

1.  查询 Purchase 模型时如何加载 PurchaseOrderDetails？
2.  这是获得所有购买内容的最佳方式吗？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-25T00:39:22.597

该[`subqueryload_all`](http://docs.sqlalchemy.org/en/latest/orm/loading_relationships.html#sqlalchemy.orm.subqueryload_all)功能自 0.9 版起已弃用。

改为使用方法链接[`subqueryload`](https://docs.sqlalchemy.org/en/13/orm/loading_relationships.html#sqlalchemy.orm.subqueryload)：

```
from sqlalchemy.orm import subqueryload

session.query(MyClass).options(
    subqueryload("someattribute").subqueryload("anotherattribute")
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T19:04:19.473

`subqueryload_all(...)`将查询的一部分更改为以下两个选项之一将完成这项工作：

```
# option-1:
subqueryload_all(
    'orders.details', # @note: this will load both *orders* and their *details*
    )

# option-2:
subqueryload_all(
    Purchase.orders,       # @note: this will load orders
    PurchaseOrder.details, # @note: this will load orders' details
    ) 
```

*在列出的示例中，关于此的文档[`sqlalchemy.orm.subqueryload_all`](http://docs.sqlalchemy.org/en/rel_0_7/orm/loading.html#sqlalchemy.orm.subqueryload_all)非常清楚。*

# php - 我怎么知道哪个 php 页面请求当前的 php 脚本？

> ID：12698768
> 
> 赞同：1
> 
> 时间：2012-10-02T21:39:42.123
> 
> 标签：php, httpwebrequest

我是 php 的初学者，想知道我是否有页面 A.php 、B.php 和 C.php 以及页面 A.php 向页面 C.php 发送请求我怎么知道请求来自 A.php 不是任何其他页面。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:45:13.823

检查[`$_SERVER['HTTP_REFERER']`](http://www.php.net/manual/en/reserved.variables.server.php)值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:47:32.247

我会在 URL 调用的 GET 数组中添加一个变量并检查 - www.yoururl.com/pageC?callingPage=a 类似的东西。referrer 变量不一定可靠：/ 此外，由于您需要知道您来自哪个页面，因此您不会也对该页面的数据进行处理吗？如果是这种情况，您可以将标识变量与正在发送的数据一起传递。如果没有，那么你仍然可以使用我刚才提到的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:46:08.797

查看 php 的[$_SERVER](http://ca3.php.net/manual/en/reserved.variables.server.php)变量。听起来你想使用`$_SERVER['HTTP_REFERER]`.

**注意：**这不会 100% 准确，因为它使用来自浏览器用户代理的信息，这些信息可能会被欺骗，有些根本不会发送该信息。

没有 100% 保证获得此信息的方式，尽管那将是您最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:42:37.510

简单地说，在 C.php 中：

```
<?php

if ($_SERVER['HTTP_REFERER'] == 'http://www.somesite.com/A.php'){
  // Do it
} else {
  // Do not
} 
```

为了提高可靠性，可以使用传递的其他数据（例如会话变量）（如果您使用表单，则更是如此）。如果它只是一个没有别的东西的直接链接，那就更难了。

# c# - 如何确定在 C# 中运行 SharePoint 服务应用程序的应用程序池？

> ID：12698769
> 
> 赞同：2
> 
> 时间：2012-10-02T21:39:54.557
> 
> 标签：c#, sharepoint, sharepoint-2010

有没有办法以编程方式确定服务应用程序在哪个应用程序池上运行？到目前为止，我还没有真正找到太多。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:44:59.653

IIS 将应用程序分配给应用程序池。我不知道以编程方式或通过配置更改应用程序池的方法。

**编辑：** 我收回它看起来这是可能的，这篇文章可以帮助你： [Setup IIS programmaticaly](http://www.iis.net/learn/manage/provisioning-and-managing-iis/provisioning-sample-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:47:00.187

这是 IIS6 的示例代码，我不确定它是否适用于 Sharepoint 或其他版本的 IIS...

```
public string GetAppPoolName() {
    string AppPath = Context.Request.ServerVariables["APPL_MD_PATH"];

    AppPath = AppPath.Replace("/LM/", "IIS://localhost/");
    DirectoryEntry root = new DirectoryEntry(AppPath);
    if ((root == null)) {
        return " no object got";
    }
    string AppPoolId = (string)root.Properties["AppPoolId"].Value;
    return AppPoolId;
} 
```

复制自[如何检测我当前正在运行的应用程序池？(IIS6)](https://stackoverflow.com/questions/333391/how-to-detect-what-application-pool-i-am-currently-running-under-iis6?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:22:36.280

[有人在此处](https://sharepoint.stackexchange.com/questions/46947/how-to-programmatically-determine-which-application-pool-a-service-application-i)向我提供了 SharePoint 特定答案，但感谢大家的意见。以下代码是我获得应用程序池的方式：

```
foreach (SPService service in SPFarm.Local.Services)
{
    if (service.Name.Equals("ServiceName"))
    {
        foreach (SPServiceApplication serviceApp in service.Applications)
        {
            SPIisWebServiceApplication webServiceApp = (SPIisWebServiceApplication) serviceApp;
            SPIisWebServiceApplicationPool appPool = webServiceApp.ApplicationPool;
        }
    }
} 
```

# microsoft-metro - 可以读取登录用户的帐户名吗？

> ID：12698770
> 
> 赞同：1
> 
> 时间：2012-10-02T21:40:00.250
> 
> 标签：microsoft-metro

我正在使用 XAML 开发我的第一个 Metro 应用程序。该应用程序仅供我们公司内部网使用。我有这些问题-

1.  是否可以检索当前登录用户的帐户名（域\用户名）？我需要为此使用 WinRT 组件吗？我查找了`Windows.Security.Authentication`命名空间并且只有`Web`并且`OnlineId`可用。
2.  我正在使用 WebView 控件导航到安全 URL。如果我在浏览器中打开此 URL，我不会收到任何提示（因为我的机器已加入域），但如果我在 WebView 中打开 URL，我会收到用户名和密码提示。有没有办法摆脱它？

更新 - 我能够通过在 `Package.appxmanifest file`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:06:13.260

对于 1 号：

请使用**[Windows.System.UserProfile.UserInformation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation.aspx)**类获取所有相关信息

```
GetDisplayNameAsync()
GetDomainNameAsync()
GetPrincipleNameAsync() 
```

例如获取显示名称

```
 if (UserInformation.NameAccessAllowed)
 {
      string player = await UserInformation.GetDisplayNameAsync();
 } 
```

# jquery - jquery动画和绑定

> ID：12698771
> 
> 赞同：0
> 
> 时间：2012-10-02T21:40:06.117
> 
> 标签：jquery

我有一些 jQuery 动态创建具有由 css 定义的特定形状的 span 元素。跨度元素是在屏幕上的随机 x,y 位置生成的，我用 class=".drawingpix" 定义了它们。一个新的 span 元素与上一个元素相同，只是它的位置每隔一两秒创建一次。我希望能够在单击时为元素设置动画。到目前为止，我只能在单击主体时为所有元素设置动画。

我想要发生的事情：我想在触摸或单击时为元素设置动画，并且只有一个元素。

这让我一无所获：

```
 $('.drawingpix').click(function () {
    // this is the dom element clicked?????
    var element = this;
    $(this).animate({
        height:'250px',
        width:'250px',
        'border-radius':'250px',
        '-moz-border-radius': '250px',
        '-webkit-border-radius': '250px',
        opacity: -0.2,
            }, 3000).fadeOut(0);    
}); 
```

这会在主体中使用“drawingpix”类为每个元素设置动画，但在头部则没有。：

```
 $('body').click(function () {
    // this is the dom element clicked?????
    var element = this;
    $('.drawingpix').animate({
        height:'250px',
        width:'250px',
        'border-radius':'250px',
        '-moz-border-radius': '250px',
        '-webkit-border-radius': '250px',
        opacity: -0.2,
            }, 3000).fadeOut(0);    
}); 
```

我是 jquery 和 javascript 的新手。在我在这里发布之前，我已经进行了数小时的搜索和尝试不同的事情。

我想我需要一些如何获取我单击的元素的索引并根据索引指定要动画的元素。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:43:02.630

您为什么不尝试委派该事件，看看该方法是否适用于新创建的元素..

```
 $('body').on('click', '.drawingpix' ,function () {
    // this is the dom element clicked?????
    var element = this;
    $(this).animate({
        height:'250px',
        width:'250px',
        'border-radius':'250px',
        '-moz-border-radius': '250px',
        '-webkit-border-radius': '250px',
        opacity: -0.2,
            }, 3000).fadeOut(0);    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:53:51.303

我怀疑您遇到了几乎每个新的 jQuery 用户体验的问题。对于大多数事件处理程序，例如`click()`，您必须等待 DOM 准备好。jQuery 通过[jQuery.ready](http://api.jquery.com/ready/)函数让这一切变得非常轻松。该函数希望您将一个函数传递给它，其中包含您希望在 DOM 准备好后调用的代码。因此，例如，您的代码如下所示：

```
jQuery.ready(function(){
    $('.drawingpix').click(function(){
        // this is the dom element clicked?????
        var element = this;
        $(this).animate({
            height:'250px',
            width:'250px',
            'border-radius':'250px',
            '-moz-border-radius': '250px',
            '-webkit-border-radius': '250px',
            opacity: -0.2,
        }, 3000).fadeOut(0);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:55:49.063

你的处理程序的内容没有错`click`；它应该只适用于被点击的元素。但是，在动态创建元素时，您必须注意一些细微之处。当您设置处理程序时，它们仅适用于*当前在 DOM 中的*对象。如果您在此之后创建一个新元素，他们将没有点击处理程序，这可能是您遇到的问题。

jQuery 有一个解决方案：[`live()`函数](http://api.jquery.com/live/). 这不仅为当前在 DOM 中的元素附加了处理程序，而且将它附加到了所有匹配*的未来*元素上。所以这正是你所需要的。你只需要像这样修改你的代码：

```
$('.drawingpix').live('click',function () {
    $(this).animate({
        height:'250px',
        width:'250px',
        'border-radius':'250px',
        '-moz-border-radius': '250px',
        '-webkit-border-radius': '250px',
        opacity: -0.2,
        }, 3000).fadeOut(0);    
}); 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/QUFGQ/](http://jsfiddle.net/QUFGQ/)

# windows - 如何在 windows phone 7.1 中确定应用程序处于非活动状态

> ID：12698773
> 
> 赞同：0
> 
> 时间：2012-10-02T21:40:14.303
> 
> 标签：windows, windows-phone-7

我需要确定用户是否闲置了一段时间。如果他们一直处于空闲状态，则应用程序会将用户注销。

我已经梳理了网站，MS 网站无法找到基本上返回布尔值的属性，表明用户处于非活动状态。

我发现的最接近的东西是可以启用或禁用 UserIdleDetectionMode 的属性。即：

[PhoneApplicationService.UserIdleDetectionMode 属性](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode%28v=vs.92%29)

谁能告诉我如何在 Windows Phone 应用程序中检测到用户在一段时间内处于非活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:20:28.713

我不相信有一种方法可以检测用户何时空闲。您可以让手机为您执行此操作，并在应用程序被删除时将用户注销。这种方法的唯一问题是应用程序被删除的时间可能会有所不同。

看，[WP7 App 生命周期](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff817008%28v=vs.92%29.aspx)

因此，当 Deactivated 事件触发时，您可以在应用程序被墓碑删除之前将用户注销。

# jquery - 在悬停时停止不必要的 div 重复

> ID：12698783
> 
> 赞同：3
> 
> 时间：2012-10-02T21:41:03.633
> 
> 标签：jquery, animation, html

尊敬的专家，

我有个问题。我是 Jquery 的新手，我正在尝试根据下面给出的示例代码使用 div 动画。发生的情况是，当鼠标在 div 上短时间悬停时，动作会自我复制并导致我想以某种方式避免的可用性行为。有没有办法让功能检查鼠标行为，例如 div 在给定的时间内悬停以避免不必要的多次激活？我希望我解释得足够好。

感谢您的输入。

```
$(document).ready(function() {

$("#expand_smoke").hover(
         //on mouseover
          function() {
              $(this).animate({
              height: '+=125' //adds 125px
               }, 'slow' //sets animation speed to slow
              );
           },
         //on mouseout
          function() {
              $(this).stop()
             $(this).animate({
             height: '60' //changes back to 60px
        }, 'slow'
      );
    }
  );

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:49:52.633

你为什么不这样做呢？

```
$("#expand_smoke").hover(
    function() {
        $(this).stop().animate({ height: '200' }, 'slow');
    },
    function() {
        $(this).stop().animate({ height: '60' }, 'slow');
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:53:12.757

如果我理解正确，这应该可以工作：它在悬停时开始超时，在鼠标悬停时取消它，所以动画只有在你悬停至少 500 毫秒时才会开始。

```
var timeout = null;
$("#expand_smoke").hover(
    //on mouseover
    function() {
        timeout = setTimeout(function(){
            $(this).animate({height: '+=125'}, 'slow');
        },500);
    },
    //on mouseout
    function() {
        clearTimeout(timeout);
        $(this).stop().animate({height: '60'}, 'slow'
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:46:02.200

我的一个项目需要同样的东西，我向你推荐[**hoverIntent**](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件，它对我来说做得很好，试试吧。

# javascript - Holder.js 和 Rails 路由？

> ID：12698786
> 
> 赞同：1
> 
> 时间：2012-10-02T21:41:15.800
> 
> 标签：javascript, ruby-on-rails-3, asset-pipeline

如何在我的 Rails 应用程序中使用[Holder.js ？](http://imsky.github.com/holder/)参数通过斜杠传递给脚本，Rails 将其作为路线拾取并向我返回 404 ......有人得到这个工作了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T03:47:07.510

使用`data-src`属性而不是`src`，即`<img data-src="holder.js/200x200">`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T10:18:02.223

或者，您可以使用[`holder_rails`gem](https://github.com/NARKOZ/holder_rails#readme)。

# php - 在 Javascript 中调用 PHP 会产生函数的文字字符串

> ID：12698790
> 
> 赞同：1
> 
> 时间：2012-10-02T21:41:40.230
> 
> 标签：php, javascript

我觉得我在这里转了一圈，错过了一些非常愚蠢的东西......

我的设置本质上是在服务器端使用 CodeIgniter，在客户端使用 Bootstrap，但这有点离题......

我正在尝试在 javascript 函数中调用 php 值。该值存储在其中一个 php 控制器中的受保护变量中，该控制器中加载的视图可以访问该变量，因为我直接在 html 中访问该变量（因此我假设我可以在JavaScript 也是如此）。

代码在这里，它真的很简单：

```
$(document).ready(function() {
    var UID = "<?php echo $the_user->id; ?>";
    console.log(UID);
}); 
```

我希望这会做一个控制台输出，比如“1”，但它实际上输出的是`"<?php echo $the_user->id; ?>"`. 如果我只是回显一个简单的字符串，而不是一个 php 变量，也会发生这种情况。

我觉得这可能是一个配置问题，但我真的不知道。如果我从 php 调用中删除引号，我会得到一个

```
TypeError: can't wrap XML objects   
console.log(<?php echo $the_user->id ?>); 
```

有任何想法吗？在这一点上我真的很愚蠢:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:43:34.537

如果您`<?php echo $the_user->id; ?>`在输出中看到，则表示您的文档没有被 PHP 解析。

检查文件扩展名，检查它是否确实在您的网络服务器配置中发送到 PHP。

例如，如果您在 .js 文件中添加 PHP 标记，它将不会传递给 PHP，如果您使用的是 Apache，则必须添加：

```
AddType application/x-httpd-php .js 
```

或在 HTML 中设置变量并将其作为参数发送到外部 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:04:34.267

mathieu-imbert 关于您的文件未作为视图处理是正确的。这是您的第一个障碍：确保页面正在被解析。

此外，当尝试将 PHP 变量粘贴到 javascript 中时，您必须考虑转义变量、处理意外值等。幸运的是，有一个简单的答案：

```
$(document).ready(function() {
    var UID = <?php echo json_encode($the_user->id); ?>;
    console.log(UID);
}); 
```

您可以通过这种方式将任意复杂的数据插入 Javascript，前提是您注意序列化 PHP 数据的常见限制。

# c# - 如何使用 Entity Framework 自动过滤掉软删除的实体？

> ID：12698793
> 
> 赞同：36
> 
> 时间：2012-10-02T21:41:47.157
> 
> 标签：c#, .net, entity-framework, ef-code-first

我首先使用实体​​框架代码。我重写`SaveChanges`以`DbContext`允许我执行“软删除”：

```
if (item.State == EntityState.Deleted && typeof(ISoftDelete).IsAssignableFrom(type))
{
    item.State = EntityState.Modified;
    item.Entity.GetType().GetMethod("Delete")
        .Invoke(item.Entity, null);

    continue;
} 
```

这很好，所以对象知道如何将自己标记为软删除（在这种情况下，它只是设置`IsDeleted`为`true`）。

我的问题是我怎样才能使它在我检索对象时忽略任何 with `IsDeleted`？所以如果我说`_db.Users.FirstOrDefault(UserId == id)`如果那个用户有`IsDeleted == true`它会忽略它。本质上我想过滤？

注意：我不想只是把这`&& IsDeleted == true` 就是为什么我用接口标记类所以删除知道如何“工作”，我想以某种方式修改检索以知道如何“工作”也基于该界面存在。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-24T15:28:44.027

我对我的所有实体都进行了软删除，并且使用[此答案](https://stackoverflow.com/a/10079196/150342)建议的技术不会通过上下文检索软删除的项目。这包括当您通过导航属性访问实体时。

为每个可以软删除的实体添加 IsDeleted 鉴别器。不幸的是，我还没有弄清楚如何根据派生自抽象类或接口的实体来执行此操作（[EF 映射当前不支持将接口作为实体](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1272291-support-interfaces-as-entity-and-complex-types)）：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   modelBuilder.Entity<Foo>().Map(m => m.Requires("IsDeleted").HasValue(false));
   modelBuilder.Entity<Bar>().Map(m => m.Requires("IsDeleted").HasValue(false));

   //It's more complicated if you have derived entities. 
   //Here 'Block' derives from 'Property'
   modelBuilder.Entity<Property>()
            .Map<Property>(m =>
            {
                m.Requires("Discriminator").HasValue("Property");
                m.Requires("IsDeleted").HasValue(false);
            })
            .Map<Block>(m =>
            {
                m.Requires("Discriminator").HasValue("Block");
                m.Requires("IsDeleted").HasValue(false);
            });
} 
```

覆盖 SaveChanges 并找到所有要删除的条目：

**编辑** [另一种覆盖删除sql](https://stackoverflow.com/a/19248216/150342)的方法是更改​​EF6生成的存储过程

```
public override int SaveChanges()
{
   foreach (var entry in ChangeTracker.Entries()
             .Where(p => p.State == EntityState.Deleted 
             && p.Entity is ModelBase))//I do have a base class for entities with a single 
                                       //"ID" property - all my entities derive from this, 
                                       //but you could use ISoftDelete here
    SoftDelete(entry);

    return base.SaveChanges();
} 
```

SoftDelete 方法直接在数据库上运行 sql，因为鉴别器列不能包含在实体中：

```
private void SoftDelete(DbEntityEntry entry)
{
    var e = entry.Entity as ModelBase;
    string tableName = GetTableName(e.GetType());
    Database.ExecuteSqlCommand(
             String.Format("UPDATE {0} SET IsDeleted = 1 WHERE ID = @id", tableName)
             , new SqlParameter("id", e.ID));

    //Marking it Unchanged prevents the hard delete
    //entry.State = EntityState.Unchanged;
    //So does setting it to Detached:
    //And that is what EF does when it deletes an item
    //http://msdn.microsoft.com/en-us/data/jj592676.aspx
    entry.State = EntityState.Detached;
} 
```

GetTableName 返回要为实体更新的表。它处理表链接到 BaseType 而不是派生类型的情况。我怀疑我应该检查整个继承层次结构......但是有计划[改进元数据 API](https://entityframework.codeplex.com/workitem/1471)，如果我必须研究[类型和表之间的 EF 代码优先映射](http://romiller.com/2013/09/24/ef-code-first-mapping-between-types-tables/)

```
private readonly static Dictionary<Type, EntitySetBase> _mappingCache 
       = new Dictionary<Type, EntitySetBase>();

private ObjectContext _ObjectContext
{
    get { return (this as IObjectContextAdapter).ObjectContext; }
}

private EntitySetBase GetEntitySet(Type type)
{
    type = GetObjectType(type);

    if (_mappingCache.ContainsKey(type))
        return _mappingCache[type];

    string baseTypeName = type.BaseType.Name;
    string typeName = type.Name;

    ObjectContext octx = _ObjectContext;
    var es = octx.MetadataWorkspace
                    .GetItemCollection(DataSpace.SSpace)
                    .GetItems<EntityContainer>()
                    .SelectMany(c => c.BaseEntitySets
                                    .Where(e => e.Name == typeName 
                                    || e.Name == baseTypeName))
                    .FirstOrDefault();

    if (es == null)
        throw new ArgumentException("Entity type not found in GetEntitySet", typeName);

    _mappingCache.Add(type, es);

    return es;
}

internal String GetTableName(Type type)
{
    EntitySetBase es = GetEntitySet(type);

    //if you are using EF6
    return String.Format("[{0}].[{1}]", es.Schema, es.Table);

    //if you have a version prior to EF6
    //return string.Format( "[{0}].[{1}]", 
    //        es.MetadataProperties["Schema"].Value, 
    //        es.MetadataProperties["Table"].Value );
} 
```

我之前在迁移中使用如下代码在自然键上创建了索引：

```
public override void Up()
{
    CreateIndex("dbo.Organisations", "Name", unique: true, name: "IX_NaturalKey");
} 
```

但这意味着您不能创建与已删除组织同名的新组织。为了允许这样做，我更改了创建索引的代码：

```
public override void Up()
{
    Sql(String.Format("CREATE UNIQUE INDEX {0} ON dbo.Organisations(Name) WHERE IsDeleted = 0", "IX_NaturalKey"));
} 
```

并且从索引中排除已删除的项目

**注意** 如果相关项目被软删除，则不会填充导航属性，但外键是。例如：

```
if(foo.BarID != null)  //trying to avoid a database call
   string name = foo.Bar.Name; //will fail because BarID is not null but Bar is

//but this works
if(foo.Bar != null) //a database call because there is a foreign key
   string name = foo.Bar.Name; 
```

**PS**在此处为全局过滤投票[https://entityframework.codeplex.com/workitem/945?FocusElement=CommentTextBox#](https://entityframework.codeplex.com/workitem/945?FocusElement=CommentTextBox#)并[在此处过滤](https://entityframework.codeplex.com/workitem/47?FocusElement=CommentTextBox)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-07-22T03:12:16.850

使用[EntityFramework.DynamicFilters](https://github.com/jcachat/EntityFramework.DynamicFilters)。它允许您创建将在执行查询时自动应用的全局过滤器（包括针对导航属性）。

项目页面上有一个示例“IsDeleted”过滤器，如下所示：

```
modelBuilder.Filter("IsDeleted", (ISoftDelete d) => d.IsDeleted, false); 
```

该过滤器将自动在针对 ISoftDelete 实体的任何查询中注入 where 子句。过滤器在您的 DbContext.OnModelCreating() 中定义。

免责声明：我是作者。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-02T23:08:23.643

One option would be to encapsulate the `!IsDeleted` into an extension method. Something like below is just an example. Beware its just to give you an idea of an extension method, the below won't compile.

```
public static class EnumerableExtensions
{
    public static T FirstOrDefaultExcludingDeletes<T>(this IEnumerable<T> source, Func<T, bool> predicate)
    {
        return source.Where(args => args != IsDeleted).FirstOrDefault(predicate);
    }
} 
```

**Usage:**

```
_db.Users.FirstOrDefaultExcludingDeletes(UserId == id) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-26T10:53:07.043

您可以在 Entity Framework Core 2.0 上使用[全局查询过滤器。](https://docs.microsoft.com/en-us/ef/core/querying/filters)

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Blog>().Property<string>("TenantId").HasField("_tenantId");

    // Configure entity filters
    modelBuilder.Entity<Blog>().HasQueryFilter(b => EF.Property<string>(b, "TenantId") == _tenantId);
    modelBuilder.Entity<Post>().HasQueryFilter(p => !p.IsDeleted);
} 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-10-04T14:15:41.247

好问题。

您需要在 SQL 查询以某种方式执行之前拦截它，然后添加额外的 where 子句以从选择中删除“已删除”项目。不幸的是，Entity 没有可用于更改查询的 GetCommand。

也许可以修改位于正确位置的 EF Provider Wrapper 以允许更改查询。

或者，您可以使用 QueryInterceptor 但每个查询都必须使用 `InterceptWith(visitor)`来更改表达式...

因此，我将专注于这种方法，因为 AFAIK 没有其他选择，然后拦截查询并修复它（如果您想保持查询代码不变）。

无论如何，如果您发现有用的东西，请告诉我们。

# wpf - 更简单的方法来扩展控件？

> ID：12698794
> 
> 赞同：1
> 
> 时间：2012-10-02T21:41:49.907
> 
> 标签：wpf, wpf-controls

最近我为高分辨率显示器（1900x1200）编写了一个非常图形化的界面。当然，我的要求发生了变化，需要在 1366x768 中重做。我没有为固定分辨率重新调整应用程序（经验教训），而是将所有内容都移到了它自己的 ViewBox 中，并重新设计了我的网格控件来处理这个问题。该应用程序看起来很棒，并且可以扩展到（几乎）任何大小而没有伪影。

我的问题是，有没有一种更简单的方法来完成 WPF 中的完全动态控件缩放，将每个控件放在自己的视图框中？ViewBox 是我能找到的唯一控件，但它只能包含一个子元素，这使得这是一个非常乏味的过程。是否有更好的控件可以包含可缩放的子控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:14:37.067

为什么不在 viewBox 中放置一个 Grid 或 StackPanel，然后用控件填充它们呢？

![大大你好](../Images/4f3b4e5196fe0ed3c3d72e5dfba7d399.png)

像这样的东西

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WfpApplication1="clr-namespace:WfpApplication1"

    Title="MainWindow" Height="350" Width="525">

<Viewbox>
    <StackPanel>
        <CheckBox Content="Hello World!"/>
        <TextBlock Text="Hello world"/>
        <Button Content="Hello world!"/>
    </StackPanel>
</Viewbox> 
```

# javascript - 是否可以在 AngularJS 模板中做可重用的代码片段？

> ID：12698796
> 
> 赞同：27
> 
> 时间：2012-10-02T21:42:06.147
> 
> 标签：javascript, angularjs

我发现自己一次又一次地重复相同的代码片段，是否可以在 AngularJS 中执行类似的操作：

```
<div ng-snippet="mySnippet"> 
  This is a snippet 
</div> 

<div ng-snippet="anotherSnippet"> 
  Yet another snippet!!
</div>

<ng:include src="anotherSnippet">
<ng:include src="anotherSnippet">
<ng:include src="mySnippet"> 
```

以上的输出将是：

```
Yet another snippet!!
Yet another snippet!!
This is a snippet 
```

我不一定要寻找这种确切的“ng:include”解决方案或模式，而是寻找可以减少模板中重复的东西。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-02T22:54:20.830

```
<script type='text/ng-template' id="mySnippet"> 
    This is a snippet 
</script> 

<script type='text/ng-template' id="anotherSnippet"> 
    Yet another snippet!!
</script>

<ng-include src="'anotherSnippet'"></ng-include>
<ng-include src="'anotherSnippet'"></ng-include>
<ng-include src="'mySnippet'"></ng-include> 
```

这应该是你想要的。

[脚本](http://docs.angularjs.org/api/ng.directive%3ascript)和[ng-include 的](http://docs.angularjs.org/api/ng.directive%3angInclude)文档。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T21:43:44.257

这听起来像你想使用[指令](http://docs.angularjs.org/guide/directive)。这是一个简单的例子：http: [//jsfiddle.net/gyF6V/1/](http://jsfiddle.net/gyF6V/1/)

# coldfusion - 为什么我无法在 Coldfusion cftry/cfcatch 语句中捕获错误消息？

> ID：12698797
> 
> 赞同：0
> 
> 时间：2012-10-02T21:42:10.963
> 
> 标签：coldfusion, error-handling, try-catch

我有一个可以上传大量徽标的表格。我在一个`cftry/cfcatch`语句中验证文件（空的表单域、错误的扩展名，...）。

当我在 中发现错误时`cftry`，我会这样做：

```
 <cfthrow type="FileNotFound" message="#tx_settings_app_error_create_first#" /> 
```

在我的“cfcatch”里面

```
 <cfcatch>
    <cfoutput><script type="text/javascript">window.onload = function(){alert("#cfcatch.message#");window.location.href="hs_apps.cfm"; } </script></cfoutput>
 </cfcatch> 
```

这工作正常，捕获所有错误并提醒用户什么是错误的。

现在我想在检查重复用户名的数据库调用中使用相同的处理程序。还是一样：

```
 <cfquery datasource="#Session.datasource#" name="duplicates">
      SELECT a.app_alias 
      FROM apps AS a
      WHERE a.iln = <cfqueryparam value = "#Session.loginID#" cfsqltype="cf_sql_varchar" maxlength="13"> 
      AND a.app_alias = <cfqueryparam value = "#form.app_basic_alias#" cfsqltype="cf_sql_varchar" maxlength="50">
 </cfquery>
 <cfif duplicates.recordcount GT 0>
      <cfthrow type="FileNotFound" message="#tx_settings_apps_error_dup#" />
 </cfif> 
```

`cfcatch`也是一样的。

然而。这现在会产生一个服务器错误页面，我被排除在应用程序之外。

**问题**：
任何想法，为什么我在`cftry/cfcatch`这里努力工作？我一无所知。

谢谢！

**编辑**：
这是完整的代码

```
<cfif isDefined("send_basic")>
    <cfset variables.timestamp = now()>
    <cfset variables.orderview = "1">

    <cfif form.send_basic_type EQ "new">
    <cftry> 
        <cfif module_check.recordcount GT 0>
            <cfloop query="module_check">
                <cfif module_check.module_name EQ "preorder">
                    <cfset variables.module_name = module_check.module_name>
                    <cfset variables.b2b_preord_ok = "true">
                </cfif>
            </cfloop>
            <cfif form.app_basic_orderview EQ "preo">
                <cfset variables.orderview = "0">
            </cfif>
        </cfif>

        <!--- PROBLEM HERE: DUPLICATES --->
        <cfquery datasource="#Session.datasource#" name="duplicates">
            SELECT a.app_alias 
                FROM apps AS a
                WHERE a.iln = <cfqueryparam value = "#Session.loginID#" cfsqltype="cf_sql_varchar" maxlength="13"> 
                AND a.app_alias = <cfqueryparam value = "#form.app_basic_alias#" cfsqltype="cf_sql_varchar" maxlength="50">
        </cfquery>
        <cfif duplicates.recordcount GT 0>
            <cfthrow type="FileNotFound" message="#tx_settings_apps_error_dup#" />
        </cfif>

        <!--- IF PASS, CREATE/UPDATE --->
        <cfquery datasource="#Session.datasource#">
            INSERT INTO apps ( ... )
            VALUES( ...  )
        </cfquery>
        <cfset variables.app_action = "Applikation erstellt">

        <!--- success --->
        <cfoutput><script type="text/javascript">window.onload = function(){alert("#tx_settings_app_cfm_create#");}</script></cfoutput>

        <cfcatch>
            <cfoutput><script type="text/javascript">window.onload = function(){alert("#tx_settings_app_err_create#");}</script></cfoutput>
        </cfcatch>
    </cftry>
<cfelse>
    <cftry>

        <!--- UPDATE --->
        <cfquery datasource="#Session.datasource#">
            UPDATE apps
                SET   ... = ...
        </cfquery>
        <cfset variables.app_action = "Applikation aktualisiert">
        <!--- success --->
        <cfoutput><script type="text/javascript">window.onload = function(){alert("#tx_settings_app_cfm_update#");}</script></cfoutput>
        <cfcatch>
            <cfoutput><script type="text/javascript">window.onload = function(){alert("#tx_settings_app_err_update#");}</script></cfoutput>
        </cfcatch>
    </cftry>        
</cfif>

</cfif> 
```

我收到的错误消息是我指定的消息=

```
 <cfthrow type="FileNotFound" message="#tx_settings_apps_error_dup#" /> 
```

如果被抓住应该提醒后面的文字`tx_settings_apps_error_dup`。如果我转储`cfcatch`,`cfcatch.message`是我指定的文本，那么错误就会被捕获，只有我得到一个服务器错误页面而不是一个警报。我对文件上传和表单提交使用完全相同的处理程序。我不明白为什么它在这里不起作用？

感谢您的帮助！

**解决方法**：
注意很好，但足够了：

```
<cfif dups.recordcount NEQ 0>
    <cfoutput><script type="text/javascript">window.onload = function(){alert("#tx_settings_apps_error_dup#"); location.href = "hs_apps_detail.cfm?create=newApp&id=none";}</script
    </cfoutput>
    <cfabort> 
</cfif> 
```

因此，当发现重复时，我会提醒用户，重新加载完全相同的页面并`cfabort`防止旧页面进一步处理。补丁就是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:57:03.463

（将其从仅作为评论移至下方）

好的，所以如果你能够转储它，catch 肯定会捕获异常，所以不是 try/catch 不起作用，而是别的东西。请记住，处理将一直持续到您的 catch 块之后的请求结束，然后才会刷新输出缓冲区，并将您的`alert()`发送到浏览器。在我看来，在您输出警报并继续处理之后，正在发生一些其他错误，导致服务器的错误页面显示。我建议暂时摆脱错误页面并关注 CF 正在引发的实际错误。

注意：如果您希望在输出 后立即在 catch 块中停止处理`alert()`，您需要告诉 CF，即：使用`<cfabort>`. 否则，如上所述，它将继续进行。

我认为服务器错误页面捕获的异常仍然记录在异常日志中，但我可能是错的。您总是可以`onError()`在您的 中放置一个处理程序`Application.cfc`，记录发生的任何错误，然后重新抛出错误，以便错误页面仍然处理它。这样您就可以获得有关错误的信息，并且下注者仍然可以看到漂亮的错误页面。

# php - 在代码点火器加载器函数中它想要什么文件路径？

> ID：12698798
> 
> 赞同：0
> 
> 时间：2012-10-02T21:42:12.960
> 
> 标签：php, codeigniter, classloader

我正在尝试将平面文本文件加载到控制器中。我知道我需要使用 Loader 函数来执行此操作（并将第二个参数设置`true`为获取字符串），但无论我使用什么路径，Loader 都找不到文件。顶部在哪里`file_path`？

`$this->load->file('../application/views/textiles/about.txt',true);`

很高兴知道我如何将此加载的字符串设置为要传递给视图的变量。

*更新*

我应该补充一点，我刚刚找到了一些与乔丹的解决方案同样有效的方法来解决我正在尝试做的事情。文本文件是用 Markdown 编写的，因此要将其转换为视图，您还可以执行以下操作（不必担心文件路径）：

```
$this->load->helper('markdown');
$string = $this->load->view('text.txt', '', true);
$string = markdown($string);
$data['text'] = $string;
$this->load->view('template', $data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:08:12.980

顶部`file_path`位于您的文档根目录中。如果您需要在`application/views`write 中访问文件：

```
$path = APPPATH . "views/textiles/about.txt";
$data['file_contents'] = $this->load->file($path, true);
$this->load->view('your_view', $data); 
```

最好`APPPATH`按所示使用，以防您决定更改目录结构并将其重新路由到`index.php`. 请注意，如果您使用的是 *NIX 机器，则需要为此目录/文件授予适当的权限。

然后在您看来，您只需使用`$file_contents`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:01:57.877

```
 $this->load->file('application/views/textiles/about.txt',true); 
```

摆脱文件位置开头的 ../ 。请参阅有关此的 codeigniter 文档。

# ruby-on-rails-3 - 初始化时集合中缺少翻译

> ID：12698803
> 
> 赞同：1
> 
> 时间：2012-10-02T21:42:43.100
> 
> 标签：ruby-on-rails-3, translation, rails-i18n

我正在尝试在我的一个模型中的集合中添加 I18n。当我初始化服务器/控制台并调用集合时，翻译丢失，但在重新加载应用程序或控制台后，翻译出现。

这是示例：

```
[1] pry(main)> Listing::CONDITIONS
=> [["translation missing: en.activerecord.attributes.listing.conditions.new", 
"new"], ["translation missing: en.activerecord.attributes.listing.conditions.used-new", 
"used-new"], ["translation missing: en.activerecord.attributes.listing.conditions.used-vgood", 
"used-vgood"], ["translation missing: en.activerecord.attributes.listing.conditions.used-good", 
"used-good"], ["translation missing: en.activerecord.attributes.listing.conditions.used-acceptable", 
"used-acceptable"]]
[2] pry(main)> reload!
Reloading...
=> true
[3] pry(main)> Listing::CONDITIONS
=> [["New", "new"],
["Used - Like New", "used-new"],
["Used - Very Good", "used-vgood"],
["Used - Good", "used-good"],
["Used - Acceptable", "used-acceptable"]] 
```

有任何想法吗？

# android - 使用 android RootTools 库获取权限 android.permission.STATUS_BAR

> ID：12698805
> 
> 赞同：4
> 
> 时间：2012-10-02T21:42:44.613
> 
> 标签：android, permissions, system, root, statusbar

我正在尝试编写一个调用 android StatusBarManager 中的方法的应用程序。我以与 hack 相同的方式扩展 android 状态栏：

```
 try {
        Object service  = getSystemService("statusbar");
        Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
        Method expand = statusbarManager.getMethod("disable", new Class[] { int.class });
        expand.invoke(service, 0x00200000);
    } catch (Exception e) {    
        e.printStackTrace();
        System.out.println("DISABLE HOME ERROR");
    } 
```

除了我要调用的方法是 disable() 而不是 expand()。但是，我收到一个安全异常“用户和当前进程都没有权限 android.permission.STATUS_BAR。

我尝试将它添加到清单中，但因为它是系统应用程序权限，所以它只有在我将我的应用程序复制到 /system/app 时才有效。

我搞砸了 RootTools [http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)但不知道如何设置权限。我尝试了 setPermissions(0) 和 setUserPermissions("android.permissions.status_bar") 但都没有。我不太确定如何使用这个库。

任何帮助将不胜感激！

# php - 创建博客（使用 DW），如何使出现“无评论”而不是空样式的 DIVS？

> ID：12698808
> 
> 赞同：0
> 
> 时间：2012-10-02T21:42:49.487
> 
> 标签：php, database

我是一名网页设计师学生，主要使用 Dreamweaver（HTML、CSS 和少量 PHP）。现在我正在为学校创建一个项目：一个博客。一个有文章的博客，以及对该文章的评论。我已经创建了 PHP 页面、数据库（使用 PHP MyAdmin / MySQL），进行了一些查询并开始对其进行测试。直到我发现一个我想得到一些帮助来解决的问题（如果可能的话）。当我创建我的数据库时，我在大多数文章中添加了评论，以测试是否一切正常……是的，所有这些都在浏览器上运行良好。但是后来我删除了其中一篇文章中的所有评论，并再次对其进行了测试......现在我有几个 Styled Divs（背景，边框）简单的空。我想知道，我怎样才能使这些样式化的 Div 消失，并用其他东西替换它（例如“无评论”）。

谢谢你们，你们中的任何人都可以为我提供任何帮助。卡东加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:48:30.513

你可以有一个 MySQL 查询来找出是否有这样的文章评论：

`SELECT count(*) as count FROM comments WHERE article_id = 1`

然后您将结果保存`count`在一个 php 变量中，例如`$count`并在输出`div`s之前对其进行测试

```
<?php
if ($count > 0):
?>
<!-- put php loop and html for comments here !-->
<?php
else:
?>
no comments available
<?php 
endif;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:49:17.033

我觉得你会更容易使用 CMS，如 Wordpress、Drupal、Joomla 等，并在那里构建你的界面，然后挂钩你的页面。如果您完全反对这样做，请在您的 PHP 代码中创建一个从数据库读取的条件，如果`comments IS NULL`然后`echo "No Comments"`

你可以这样做：

```
$sqlConnect = mysql_connect('localhost', 'username', 'password');     
$query = sprintf(SELECT * FROM comments WHERE value IS NOT NULL); 
$result = mysql_query($query);

if(!result) 
{ 
//Your code to print "No Comments" 
} 
```

# shell - What's the Error?

> ID：12698809
> 
> 赞同：0
> 
> 时间：2012-10-02T21:42:50.517
> 
> 标签：shell, awk

I'm unable to detect the cause of error.

Please help point me out and it's corrective action. I'm a beginner and so this will be a great help to me.

mapping.txt:

```
test1 hello
test2 world 
```

My Sh file: parameter 1 = hello

```
a= cat mapping.txt | grep $1 | awk '{print$1}'
echo $a

## Extracting Dump name
b=$(ls -ltr  /home/oracle/$a/$1*.dmp | awk '{print $9}' | tail -1) 
```

I'm getting test1 as echo, but i'm unable to substitute in /home/oracle/**$a**/$1*.dmp script

output: ls: /home/oracle//hello*.dmp: No such file or directory

What change should i do to let it substitute as: /home/oracle/test1/hello*.dmp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:57:34.547

From the error, you can see the variable `a` is not set:

Change your first line from:

```
a= cat mapping.txt | grep $1 | awk '{print$1}' 
```

to:

```
a=$(cat mapping.txt | grep $1 | awk '{print$1}') 
```

# android - 从 adb 获取包的可启动活动名称

> ID：12698814
> 
> 赞同：76
> 
> 时间：2012-10-02T21:43:02.463
> 
> 标签：android, adb

有没有办法从使用中获取包的可启动活动`adb`？对于 unroot 电话（**即没有从`/data/app`目录中提取 apk 并使用检查`appt`**）。

我尝试了 dumpsys，但它不包含有关默认可启动活动的信息。

谢谢

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-02T23:48:14.110

您无需 root 即可从中提取 apk 文件`/data/app`。当然，您可能没有权限列出该目录的内容，但您可以通过以下方式找到 APK 的文件位置：

```
adb shell pm list packages -f 
```

然后你可以使用`adb pull`：

```
adb pull <APK path from previous command> 
```

然后`aapt`获取您想要的信息：

```
aapt dump badging <pulledfile.apk> 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-03-28T03:54:55.850

```
$ adb shell pm dump PACKAGE_NAME | grep -A 1 MAIN 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-12-26T01:52:59.373

从 Android 7.0 开始，您可以使用`adb shell cmd package resolve-activity`命令来获取已安装应用程序的默认活动，如下所示：

```
adb shell "cmd package resolve-activity --brief com.google.android.calculator | tail -n 1"
com.google.android.calculator/com.android.calculator2.Calculator 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-09-09T04:57:19.613

```
#!/bin/bash
#file getActivity.sh
package_name=$1
#launch app by package name
adb shell monkey -p ${package_name} -c android.intent.category.LAUNCHER 1;
sleep 1;
#get Activity name
adb shell logcat -d | grep 'START u0' | tail -n 1 | sed 's/.*cmp=\(.*\)} .*/\1/g' 
```

* * *

样本：

```
getActivity.sh com.tencent.mm
com.tencent.mm/.ui.LauncherUI 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-04-25T08:24:28.317

我没有发现它列出所以更新列表。

**对于此解决方案，您需要在手机前面安装并运行 apk**：

Windows CMD 行：

`adb shell dumpsys window windows | findstr <any unique string from your pkg Name>`

Linux终端：

`adb shell dumpsys window windows | grep -i <any unique string from your Pkg Name>`

**计算器包的输出将是：**

```
Window #7 Window{39ced4b1 u0 com.android.calculator2/com.android.calculator2.Calculator}:

    mOwnerUid=10036 mShowToOwnerOnly=true package=com.android.calculator2 appop=NONE

    mToken=AppWindowToken{29a4bed4 token=Token{2f850b1a ActivityRecord{eefe5c5 u0 com.android.calculator2/.Calculator t322}}}

    mRootToken=AppWindowToken{29a4bed4 token=Token{2f850b1a ActivityRecord{eefe5c5 u0 com.android.calculator2/.Calculator t322}}}

    mAppToken=AppWindowToken{29a4bed4 token=Token{2f850b1a ActivityRecord{eefe5c5 u0 com.android.calculator2/.Calculator t322}}}

    WindowStateAnimator{3e160d22 com.android.calculator2/com.android.calculator2.Calculator}:

      mSurface=Surface(name=com.android.calculator2/com.android.calculator2.Calculator)

  mCurrentFocus=Window{39ced4b1 u0 com.android.calculator2/com.android.calculator2.Calculator}

  mFocusedApp=AppWindowToken{29a4bed4 token=Token{2f850b1a ActivityRecord{eefe5c5 u0 com.android.calculator2/.Calculator t322}}} 
```

主要部分是，**第一行**：

`Window #7 Window{39ced4b1 u0 com.android.calculator2/com.android.calculator2.Calculator}:`

输出的第一部分是包名：

`com.android.calculator2`

输出的第二部分（在 之后`/`）可以是两件事，在我们的例子中是：

`com.android.calculator2.Calculator`

1.  `<PKg name>.<activity name>` = `<com.android.calculator2>.<Calculator>`

    **`.Calculator`我们的活动也是如此**

2.  如果第二部分与包名称完全不同，并且似乎不包含`/`在输出输出之前的 pkg 名称，那么整个第二部分都可以用作主要活动。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-26T09:31:29.763

这是另一种查找应用程序包名称和启动器活动的方法。

Step1：在命令提示符下启动“adb logcat”。

Step2：打开应用程序（在模拟器或真机中） ![在此处输入图像描述](../Images/3715dbd6e43ec2109b0239f726fea338.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-29T10:25:49.483

您还可以将 ddms 用于 logcat 日志，其中只需搜索应用程序名称即可获得所有信息，但您必须选择 Info 而不是详细或其他选项。检查下图。

[![在此处输入图像描述](../Images/066066445955d862d8b7019aedf3e085.png)](https://i.stack.imgur.com/577UL.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-05T06:42:50.863

启动您的应用程序并将其保持在前台。

运行以下命令：

> adb shell dumpsys 窗口窗口| 找到“mcurrentfocus”

# java - 如何用img解析href

> ID：12698823
> 
> 赞同：0
> 
> 时间：2012-10-02T21:43:39.750
> 
> 标签：java, html, parsing

```
 <a href="$handler$&landing_url=https://foo.com/index.html">
  <img src="https://foo.com/images/08_180x80.gif" border="0" alt="">
</a> 
```

我有这个代码，我需要返回调用服务。但是，在返回时，我需要将 $handler$ 替换为从 props 文件中获得的内容。这很容易。

困难的部分是：

我需要获取 login_url ，对其进行加密，并向其添加更多信息。

我怎样才能把这个片段解析成碎片？

或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:18:14.010

这是您需要的正则表达式：`/<a href=\".*?landing_url=(.*?)\">/`.

将所有代码放在一起：

```
public static void main(String[] args) {
    String str = "<a href=\"$handler$&landing_url=https://foo.com/index.html\">";
    String regex = "<a href=\".*?landing_url=(.*?)\">";
    List<String> parts = evaluate(regex, str);
    System.out.println("landing_url: " + parts.get(0));
}

public static List<String> evaluate(String regex, String line) {
    List<String> result = new ArrayList<String>();
    Pattern pattern = Pattern.compile(regex);

    int count = 1;
    Matcher matcher = pattern.matcher(line);
    while (matcher.find()) {
        result.add(matcher.group(count++));
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:03:17.317

在java中有几种方法可以做到这一点。

我想正确的答案取决于：

1.  您需要的解析机制有多强大
2.  href 值字符串的唯一性，以及
3.  无论您是否已经有一个 HTML 解析器。

假设您有一个 HTML 解析器，并且您实际上可以获取标签的 href 属性值，那么从字符串中获取landing_url 的最简单方法是使用 String 类的方法。虽然这些方法提供了一种快速而肮脏的解决方案，但它们对于字符串的所有排列可能不够健壮。

这是一些需要考虑的伪代码，它不会超级高效或健壮，但它可以完成工作。

```
(assuming the value is in String hrefValue)
int x = hrefValue.indexOf("landing_url");
int substringStart = "landing_url=".length();
String substring = hrefValue.substring(substringStart); 
```

# .net - 在 .net 中本地化时间跨度的“总秒数”

> ID：12698828
> 
> 赞同：2
> 
> 时间：2012-10-02T21:43:59.127
> 
> 标签：.net, string-formatting, globalization, timespan

我想将 TimeSpan 格式化为秒数，但我希望转换能够感知区域设置。例如：

```
// NOT FUNCTIONAL but illustrates what I mean
String.Format("{0:0.0s}", TimeSpan.FromSeconds(2.5324)) = "2.5s"
String.Format("{0:0s}", TimeSpan.FromMinutes(2)) = "120s" 
```

我可以实现这样的功能：

```
someTimeSpan.TotalSeconds.ToString("0.0") + "s" 
```

但这假设秒由“s”表示，并且单位应该在数量之后。这可能是跨地区的标准，因为它是 SI 的一部分，但可能不是（例如，即使在美国，某些单位也不是后缀：5 美元是 5 美元）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:46:52.783

您当然可以使用*双*精度的区域设置格式选项来处理数字部分。

```
// "N" is an example format.  Use what your app needs.
value.ToString("N", CultureInfo.CurrentCulture); 
```

Windows 本地化不支持本地化诸如*second*之类的缩写，因此您必须自己处理该部分。

# python - Python - ImportError：没有名为 foo.bar 的模块

> ID：12698834
> 
> 赞同：2
> 
> 时间：2012-10-02T21:44:39.890
> 
> 标签：python, importerror, python-import

```
>>> from foo.bar import app
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named foo.bar 
```

我的目录结构：

```
In /foo:
    __init__.py
    bar.py

In /foo/tests:
    __init__.py
    testing.py 
```

在`/foo/tests/testing.py`我需要从`/foo/bar.py`. `ImportError`如果我运行 testing.py 文件，我会得到。

我已经检查`sys.path`并包含`/foo`和`/foo/tests`文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:50:01.310

sys.path 应该包含 foo 的父目录，而不是 foo 本身

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:05:02.397

根据您运行测试的方式，您可以使用[absolute imports](http://www.python.org/dev/peps/pep-0328/)，并执行以下操作：

```
from ..bar import app 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:47:53.570

如果 /foo 是 on `sys.path`，那么您可以使用 导入 bar `import bar`，因此请尝试将 testing.py 中的导入行更改为以下内容：

```
from bar import app 
```

或者，将根文件夹放在，这将允许您使用、或`sys.path`导入模块`foo`及其内容。`import foo.XXX``from foo import XXX``from foo.XXX import YYY`

# c - 计算字符串中的单词 - c 编程

> ID：12698836
> 
> 赞同：7
> 
> 时间：2012-10-02T21:44:42.903
> 
> 标签：c, string, function

我需要编写一个函数来计算字符串中的单词。出于此分配的目的，“单词”被定义为一系列非空、非空白字符，通过空白与其他单词分隔。

这是我到目前为止所拥有的：

```
int words(const char sentence[ ]);

int i, length=0, count=0, last=0;
length= strlen(sentence);

for (i=0, i<length, i++)
 if (sentence[i] != ' ')
     if (last=0)
        count++;
     else
        last=1;
 else
     last=0;

return count; 
```

我不确定它是否有效，因为在我的整个程序完成之前我无法测试它并且我不确定它是否有效，有没有更好的方法来编写这个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:11:26.383

你需要

```
int words(const char sentence[])
{
} 
```

（注意大括号）。

For 循环使用`;`而不是`,`.

* * *

没有任何免责声明，这是我写的：

现场观看**[http://ideone.com/uNgPL](http://ideone.com/uNgPL)**

```
#include <string.h>
#include <stdio.h>

int words(const char sentence[ ])
{
    int counted = 0; // result

    // state:
    const char* it = sentence;
    int inword = 0;

    do switch(*it) {
        case '\0': 
        case ' ': case '\t': case '\n': case '\r': // TODO others?
            if (inword) { inword = 0; counted++; }
            break;
        default: inword = 1;
    } while(*it++);

    return counted;
}

int main(int argc, const char *argv[])
{
    printf("%d\n", words(""));
    printf("%d\n", words("\t"));
    printf("%d\n", words("   a      castle     "));
    printf("%d\n", words("my world is a castle"));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:03:07.527

看下面的例子，你可以按照方法：计算单词之间的空格。

```
int words(const char *sentence)
{
    int count=0,i,len;
    char lastC;
    len=strlen(sentence);
    if(len > 0)
    {
        lastC = sentence[0];
    }
    for(i=0; i<=len; i++)
    {
        if((sentence[i]==' ' || sentence[i]=='\0') && lastC != ' ')
        {
            count++;
        }
        lastC = sentence[i];
    }
    return count;
} 
```

去测试 ：

```
int main() 
{ 
    char str[30] = "a posse ad esse";
    printf("Words = %i\n", words(str));
} 
```

输出 ：

```
Words = 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T22:21:21.010

```
#include <ctype.h> // isspace()

int
nwords(const char *s) {
  if (!s) return -1;

  int n = 0;
  int inword = 0;
  for ( ; *s; ++s) {
    if (!isspace(*s)) {
      if (inword == 0) { // begin word
        inword = 1;
        ++n;
      }
    }
    else if (inword) { // end word
      inword = 0;
    }
  }
  return n;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T14:23:23.830

```
bool isWhiteSpace( char c )
{
    if( c == ' ' || c == '\t' || c == '\n' )
        return true;
    return false;
}

int wordCount( char *string )
{
    char *s = string;
    bool inWord = false;
    int i = 0;

    while( *s )
    {
        if( isWhiteSpace(*s))
        {
            inWord = false;
            while( isWhiteSpace(*s) )
                s++;
        }
        else
        {
            if( !inWord )
            {
                inWord = true;
                i++;
            }
            s++;
        }
    }

    return i;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-31T16:47:34.103

这是解决方案之一。它计算带有多个空格的单词，或者只是空格或空格后跟单词。

```
#include <stdio.h>
int main()
{
    char str[80];
    int i, w = 0;
    printf("Enter a string: ");
    scanf("%[^\n]",str);

    for (i = 0; str[i] != '\0'; i++)
    {

        if((str[i]!=' ' && str[i+1]==' ')||(str[i+1]=='\0' && str[i]!=' '))
        {
            w++;
        }

    }

    printf("The number of words = %d", w );

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T21:26:43.380

这是另一个解决方案：

```
#include <string.h>

int words(const char *s)
{
    const char *sep = " \t\n\r\v\f";
    int word = 0;
    size_t len;

    s += strspn(s, sep);

    while ((len = strcspn(s, sep)) > 0) {
        ++word;
        s += len;
        s += strspn(s, sep);
    }
    return word;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-18T10:16:06.477

```
#include<stdio.h>

int main()   
{    
char str[50];    
int i, count=1;  
printf("Enter a string:\n");    
gets(str);    
for (i=0; str[i]!='\0'; i++)   
        {
        if(str[i]==' ')    
                {
                count++;
                }
        }
printf("%i\n",count);    
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-18T00:55:34.240

```
#include<stdio.h>
#include<string.h>

int getN(char *);

int main(){
    char str[999];
    printf("Enter Sentence: "); gets(str);
    printf("there are %d words", getN(str));
}

int getN(char *str){
    int i = 0, len, count= 0;
    len = strlen(str);
    if(str[i] >= 'A' && str[i] <= 'z')
       count ++;

    for (i = 1; i<len; i++)
        if((str[i]==' ' || str[i]=='\t' || str[i]=='\n')&& str[i+1] >= 'A' && str[i+1] <= 'z')
        count++;

return count;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-04T15:46:10.350

```
#include <stdio.h>

int wordcount (char *string){

    int n = 0; 

    char *p = string ;
    int flag = 0 ;

    while(isspace(*p)) p++;

    while(*p){
        if(!isspace(*p)){
            if(flag == 0){
                flag = 1 ;
                n++;
            }
        }
        else flag = 0;
        p++;
    }

    return n ;
}

int main(int argc, char **argv){

    printf("%d\n" , wordcount("    hello  world\nNo matter how many newline and spaces"));
    return 1 ;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-07T20:09:26.020

在完成我正在学习的 C 课程的功能后，我发现了发布的问题。我从上面发布的代码中看到了一些好主意。这是我想出的答案。它当然不像其他的那样简洁，但它确实有效。也许这将有助于将来的某人。

我的函数接收到一个字符数组。然后我设置一个指向该数组的指针以加速函数（如果它被放大）。接下来我找到了要循环的字符串的长度。然后我使用字符串的长度作为“for”循环的最大值。然后我检查正在查看数组 [0] 的指针以查看它是否是有效字符或标点符号。如果指针有效，则递增到下一个数组索引。当前两个测试失败时，字计数器增加。然后该函数将递增任意数量的空格，直到找到下一个有效字符。该函数在找到 null '\0' 或换行符 '\n' 时结束。函数将在退出前最后一次将 count 递增一次，以说明 null 或换行符之前的单词。函数将计数返回给调用函数。

```
#include <ctype.h>

char wordCount(char array[]) {
    char *pointer;    //Declare pointer type char
    pointer = &array[0];  //Pointer to array

    int count; //Holder for word count
    count = 0; //Initialize to 0.

    long len;  //Holder for length of passed sentence
    len = strlen(array);  //Set len to length of string

    for (int i = 0; i < len; i++){

        //Is char punctuation?
        if (ispunct(*(pointer)) == 1) {
            pointer += 1;
            continue;
        }
        //Is the char a valid character?
        if (isalpha(*(pointer)) == 1) {
            pointer += 1;
            continue;
        }
        //Not a valid char.  Increment counter.
        count++;

        //Look out for those empty spaces. Don't count previous
        //word until hitting the end of the spaces.
        if (*(pointer) == ' ') {
            do {
                pointer += 1;
            } while (*(pointer) == ' ');
        }

        //Important, check for end of the string
        //or newline characters.
        if (*pointer == '\0' || *pointer == '\n') {
            count++;
            return(count);
        }
    }
    //Redundent return statement.
    count++;
    return(count);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-24T21:58:48.973

我有这个作为一个任务......所以我知道这是有效的。该函数为您提供字数、平均字长、行数和字符数。要计算单词，您必须使用 isspace() 来检查空格。如果 isspace 为 0，您就知道您没有读取空格。wordCounter 只是一种跟踪连续字母的方法。一旦你到达一个空白，你重置那个计数器并增加 wordCount。我的代码如下：

使用 isspace(c) 来

```
#include <stdio.h>
#include <ctype.h>

int main() {
  int lineCount = 0;
  double wordCount = 0;
  double avgWordLength = 0;
  int numLines = 0;
  int wordCounter = 0;
  double nonSpaceChars = 0;
  int numChars = 0;
  printf("Please enter text.  Use an empty line to stop.\n"); 
  while (1) {
      int ic = getchar();
      if (ic < 0)    //EOF encountered
          break;
      char c = (char) ic;
      if (isspace(c) == 0 ){
      wordCounter++;
      nonSpaceChars++;
    }
      if (isspace(c) && wordCounter > 0){
      wordCount++;
      wordCounter =0;
    }
      if (c == '\n' && lineCount == 0) //Empty line
      { 
          break; 
      }
      numChars ++;
      if (c == '\n') {
          numLines ++;
          lineCount = 0;
      }
      else{
          lineCount ++;
    }
  }
  avgWordLength = nonSpaceChars/wordCount;
  printf("%f\n", nonSpaceChars);
  printf("Your text has %d characters and %d lines.\nYour text has %f words, with an average length of %3.2f ", numChars, numLines, wordCount, avgWordLength);
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-09-02T20:57:06.053

这是一种解决方案。即使单词之间有多个空格，交叉符号周围没有空格等，这个也会正确计算单词。例如：我是，我妈妈是。大象，飞走了。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

int countWords(char*);

int main() {
    char string[1000];
    int wordsNum;

    printf("Unesi nisku: ");
    gets(string);  /*dont use this function lightly*/

    wordsNum = countWords(string);

    printf("Broj reci: %d\n", wordsNum);

    return EXIT_SUCCESS;
}

int countWords(char string[]) {
    int inWord = 0,
        n,
        i,
        nOfWords = 0;

    n = strlen(string);

    for (i = 0; i <= n; i++) {
        if (isalnum(string[i]))
            inWord = 1;
        else
            if (inWord) {
                inWord = 0;
                nOfWords++;
            }
    }

    return nOfWords;
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-07-08T09:14:08.113

这是一个更简单的计算字数的函数

```
int counter_words(char* a){`

 // go through chars in a
 // if ' ' new word
 int words=1;
 int i;
 for(i=0;i<strlen(a);++i)
 {
      if(a[i]==' ' && a[i+1] !=0)
      {
           ++words;
      }
 } 
```

`return words;}`

# xaml - 在 Windows 8 中基于视觉状态替换 XAML 绑定

> ID：12698838
> 
> 赞同：0
> 
> 时间：2012-10-02T21:44:55.243
> 
> 标签：xaml, binding, windows-8, windows-runtime

我使用 VisualStateManager-Element 根据当前的视觉状态在我的页面上重新定位一些 XAML 元素。我的问题是我使用了一个网格视图，当窗口被捕捉时它必须成为一个列表视图（因为剩下的水平空间很小）。我将一些其他元素绑定到 gridview 的 selectedItem 属性。我的第一种方法是创建一个列表视图并根据视觉状态显示/隐藏它。我还需要更新我的其他元素的绑定（从 gridView.selectedItem 到 listView.selectedItem），这在 visualstatemanager 中显然是不可能的。另一种可能性是从后面的代码更改绑定。是否有其他解决方案（最好在 XAML 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:31:43.637

我认为普遍接受的答案是每个视觉状态都应该有一个 xaml。您折叠当前未使用的那个。如果您打算做一些需要动态数量的绑定或类似的事情，您只会手动进行更改或创建绑定。在这种情况下，您有一组固定的绑定到一组已知的 UI 元素，因此您只需在 xaml 中设置所有绑定。

# django - 如何在 Django 中翻译查找值？

> ID：12698840
> 
> 赞同：0
> 
> 时间：2012-10-02T21:45:04.087
> 
> 标签：django, internationalization

Django 对国际化有很好的支持，模型、表单、视图或模板中的任何英文表达都可以很容易地标记为翻译。但是我遇到了一个有趣的情况，我不知道如何处理。

我有一个性别查找（男性，女性）。现在，即使我将网站翻译成德语，性别下拉菜单仍然指向保存在数据库中的值，而这些值恰好是英文的。那么我应该如何在 PO 文件中标记要翻译的数据库中的值呢？

```
class Gender(models.Model):
    gender       = models.CharField(_(u'Sex'), max_length=10)    
    def __unicode__(self):
        return self.gender
    class Meta:
        verbose_name = _(u'Sex')
        verbose_name_plural = _(u'Sexes') 
```

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:15:22.807

我认为那是不可能的。您将不得不使用其中一个翻译模块（如[code.google.com/p/django-modeltranslation](http://code.google.com/p/django-modeltranslation)）或编写自己的翻译函数。

# python - 如何使用 Python 将选项传递给 Selenium Chrome 驱动程序？

> ID：12698843
> 
> 赞同：82
> 
> 时间：2012-10-02T21:45:15.580
> 
> 标签：python, google-chrome, selenium, selenium-chromedriver

[Selenium 文档](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_chrome/selenium.webdriver.chrome.webdriver.html#module-selenium.webdriver.chrome.webdriver)提到 Chrome 网络驱动程序可以采用 的实例，`ChromeOptions`但我不知道如何创建`ChromeOptions`.

我希望将`--disable-extensions`标志传递给 Chrome。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-02T21:45:15.580

[在 Selenium 源代码中](https://github.com/SeleniumHQ/selenium/blob/master/py/selenium/webdriver/chrome/options.py)找到了chrome Options 类。

创建 Chrome 驱动程序实例的用法：

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
chrome_options = Options()
chrome_options.add_argument("--disable-extensions")
driver = webdriver.Chrome(chrome_options=chrome_options) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-29T09:37:05.443

我就是这样做的。

```
from selenium import webdriver

chrome_options = webdriver.ChromeOptions()
chrome_options.add_argument('--disable-extensions')

chrome = webdriver.Chrome(chrome_options=chrome_options) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-09T15:04:24.600

为那些使用[**DesiredCapabilities**](https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities)设置浏览器标志的人禁用 chrome 扩展的代码：

```
desired_capabilities['chromeOptions'] = {
    "args": ["--disable-extensions"],
    "extensions": []
}
webdriver.Chrome(desired_capabilities=desired_capabilities) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-05T16:14:51.883

```
from selenium import webdriver

options = webdriver.ChromeOptions()
options.add_argument('--disable-logging')

# Update your desired_capabilities dict withe extra options.
desired_capabilities.update(options.to_capabilities())
driver = webdriver.Remote(desired_capabilities=options.to_capabilities()) 
```

desired_capabilities**和**options.to_capabilities **()**都是字典。您可以使用**dict.update()**方法将**选项**添加到主集。

# debugging - pushviewcontroller 在分发构建时崩溃但不调试

> ID：12698845
> 
> 赞同：0
> 
> 时间：2012-10-02T21:45:19.157
> 
> 标签：debugging, uitableview, ios6, pushviewcontroller

我遇到了一个奇怪的情况，我的一个应用程序在 iOS6 中停止工作。实际代码很简单，并且启用了 ARC。我有一个带有导航控制器的表，当点击表中的一行时，它会推送一个视图控制器。当我切换到分发版本时，代码在模拟器和调试版本中运行良好，代码在推送视图控制器后崩溃。

我设置了一些 nslog 输出，并且可以看到它在崩溃之前会出现。

我尝试使用编译器优化 -Oo 设置分发版本，但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:03:08.337

我已经解决了这个问题。不知何故，ARC 在分发构建设置中被禁用。

# security - 以安全方式支持 Facebook 登录并避免恶意用户窃听的最佳方式是什么？

> ID：12698846
> 
> 赞同：2
> 
> 时间：2012-10-02T21:45:25.710
> 
> 标签：security, cookies, ssl, https, facebook-javascript-sdk

Facebook 通过在所有 facebook.com 页面上支持 https，在防止窃听（使用 Firesheep 等工具）方面做得很好，但没有为第 3 方网站提供类似级别的安全性。

现在可以窃听来自使用 Facebook JS SDK 的第三方网站的流量，并获取用户签名的 fbsr_APP_ID cookie，网站应该使用该 cookie 来验证其用户。

**有没有办法使用*安全*参数设置此 cookie，以便仅通过 HTTPS 连接传输？**

我已经阅读了文档和 JavaScript SDK 源代码，这似乎是不可能的。**因此，如果不可能，您会建议使用哪种其他身份验证方法来避免窃听此 cookie？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:28:57.383

我想我为赏金太迟了，但我很乐意接受“接受的答案”:)

如备注中所述，在`FB.init`您指定时，是否希望 facebook JS SDK 使用该`cookies`选项为您设置 cookie，甚至默认情况下似乎没有设置 cookie：[https ://developers.facebook.com/docs/reference /javascript/FB.init/](https://developers.facebook.com/docs/reference/javascript/FB.init/)

然后使用您自己的 javascript 以您想要的任何方式存储 fbsr_APP_ID（安全 cookie、客户端存储等）。

# objective-c - 如何对注释进行反向地理编码？

> ID：12698850
> 
> 赞同：1
> 
> 时间：2012-10-02T21:45:34.273
> 
> 标签：objective-c, clgeocoder

我有一个删除多个注释的应用程序，我想对引脚位置进行反向地理编码并将地址设置为字幕。这是我到目前为止的代码，但我不知道如何实现反向地理编码器。

```
-(void)press:(UILongPressGestureRecognizer *)recognizer
{
    CGPoint touchPoint = [recognizer locationInView:worldView];
    CLLocationCoordinate2D touchMapCoordinate = [worldView convertPoint:touchPoint toCoordinateFromView:worldView];

    if (UIGestureRecognizerStateBegan == [recognizer state]) {
        MapPoint *mp = [[MapPoint alloc]initWithCoordinate:touchMapCoordinate
                                                 title:@"Dream House"];
        [worldView addAnnotation:mp];

        geocoder = [[CLGeocoder alloc]init];

        CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                        altitude:CLLocationDistanceMax
                                              horizontalAccuracy:kCLLocationAccuracyBest
                                                verticalAccuracy:kCLLocationAccuracyBest
                                                       timestamp:[NSDate date]];

        [geocoder reverseGeocodeLocation:location
                   completionHandler:^(NSArray *placemarks, NSError *error) {
                       <#code#>
                   }];

    }
} 
```

别针会掉在家里，所以我只想显示房子地址。谢谢您的帮助。

# javascript - 调整图像大小并使用 javascript 将它们保持在原始位置

> ID：12698856
> 
> 赞同：1
> 
> 时间：2012-10-02T21:46:31.740
> 
> 标签：javascript, html, canvas, image

我整天都在苦苦挣扎，试图弄清楚我们如何调整图像大小和计算比例。我大部分都失败了！

描述我的问题，对不起！但我找不到任何词......所以这是这个小提琴：http: [//jsfiddle.net/Saturnix/TkPX5/](http://jsfiddle.net/Saturnix/TkPX5/)

正如你所看到的，有一张沙发和一只羊的图像（如果你不这样做：尝试调整浏览器窗口的大小）。

现在，继续调整浏览器窗口的大小：您应该会看到羊和沙发都被调整了大小。我只想让那只该死的羊留在沙发上，**固定位置**，就像它在沙发图像中被硬编码一样。无论窗户尺寸如何，羊都必须留在沙发上。

不，我不能用 Photoshop 把羊贴在上面。

在最后的项目中，我将有一个界面而不是沙发，而绵羊将是一个旋钮或按钮。

如果您想亲自尝试，请滚动 javascript，直到到达底部，您会看到“TODO”注释。

有两行代码可以改变羊的位置：您需要计算的所有其他参数已经在上面的代码中（或者至少我希望如此！）。我只是想念公式。

我已经能够动态地调整羊的大小并与沙发成比例：我怎样才能对它的位置做同样的事情？我试过了！一切！但似乎没什么用:'(

非常感谢您！

编辑：似乎小提琴链接是错误的。固定的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:29:12.357

您需要相对于图像的新高度和宽度来调整它们，而不是将其设置为固定`x`值。`y`

```
x = masterX + (50 * w / imm1.width);
y = masterY + (235 * h / imm1.height); 
```

[http://jsfiddle.net/TkPX5/12/](http://jsfiddle.net/TkPX5/12/)

# shell - 如何将包含＆的参数从cygwin bash传递给bat文件

> ID：12698858
> 
> 赞同：1
> 
> 时间：2012-10-02T21:46:36.950
> 
> 标签：shell, batch-file, cygwin

这是一个简单的bat文件：

```
C:\temp>type a.bat
@echo off
rem try
echo %1 
```

有一些困难，我可以`a&b`作为参数传递给它：

```
C:\temp>a.bat a&b
a
'b' is not recognized as an internal or external command,
operable program or batch file.
C:\temp>a.bat "a&b"
"a&b" 
```

参数具有`"`字符；我可以忍受它。但我不知道如何从 cygwin shell 调用它：

```
C:\temp>c:\cygwin\bin\sh
sh-4.1$ ./a.bat a&b
[1] 7760
a
sh: b: command not found
sh-4.1$ ./a.bat a\&b
a
'b' is not recognized as an internal or external command,
operable program or batch file.
[1]+  Done                    ./a.bat a
sh-4.1$ ./a.bat \"a\&b\"
"\"a
'b\""' is not recognized as an internal or external command,
operable program or batch file.
sh-4.1$ ./a.bat "a\&b"
a\
'b' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:22:18.397

Windows CMD 用于`^`转义大多数特殊字符。因此，您可以使用它来传递您的论点而不用引号括起来。

```
C:\temp>a.bat a^&b 
```

但接收到的参数将是`a&b`. 您的批处理脚本在尝试回显 %1 的值时会出错，因为 %1`&`没有被引用或转义。

如果将值括在引号中，则可以安全地回显该值：

```
echo "%1" 
```

但是，如果您传递已经包含在引号中的值`"a&b"`，那么您会再次收到错误消息。这就是为什么许多批处理脚本使用`~`修饰符来删除任何现有的封闭引号（如果它们存在），然后显式添加引号。如果 %1 的值被引用或不被引用，以下将起作用。

```
echo "%~1" 
```

您仍然可能会遇到类似的问题`"a&b"&c`，但这是另一回事:-)

另一种选择是`&`在原始命令行中双重转义：

```
C:\temp>a.bat a^^^&b 
```

您的批处理脚本将收到`a^&b`，然后回显将起作用。

关于 Cygwin，我知道的很少，但我相信我主要了解测试 1、2 和 3。

测试1：

```
sh-4.1$ ./a.bat a&b
[1] 7760
a
sh: b: command not found 
```

Cygwin 正在传递`a`给您的批处理脚本并且无法执行命令`b`

测试 2：

```
sh-4.1$ ./a.bat a\&b
a
'b' is not recognized as an internal or external command, operable program or batch file. 
```

我不确定 CMD 是否在执行批处理脚本之前解析从 Cygwin 传递的命令行。

如果`a`是这样，则将传递给您的批处理脚本，然后 CMD.EXE 无法执行`b`。

如果不是，那么 Cygwin 正在成功执行您的脚本并传递`a&b`，但您的 ECHO 语句失败，正如我之前解释的那样。

以下之一应该适用于您的脚本，但我不确定哪个：

```
sh-4.1$ ./a.bat a^\&b
or
sh-4.1$ ./a.bat a^^^\&b 
```

以上其中一项将通过`a^&b`，您的 ECHO 应该可以工作。

测试 3：

```
sh-4.1$ ./a.bat \"a\&b\"
"\"a
'b\""' is not recognized as an internal or external command, operable program or batch file. 
```

我不知道 Cygwin 在做什么。不知何故，它引入了额外的双引号。

测试 4：

```
sh-4.1$ ./a.bat "a\&b"
a\
'b' is not recognized as an internal or external command, operable program or batch file. 
```

Cygwin strips the quotes, and the backslash is preserved. Again, either the `&` is causing problems when CMD.EXE is launching the script, or it is causing problems within the script when you ECHO it.

One of the following should work, passing `a^&b` to your script. I'm just not sure which one:

```
sh-4.1$ ./a.bat "a^&b"
or
sh-4.1$ ./a.bat "a^^^&b" 
```

* * *

I believe the following will successfully pass `"a&b"` to your script:

```
sh-4.1$ ./a.bat '"a&b"' 
```

I also think the following will do the same, though I am not as confident due to the result of Test 3.

```
sh-4.1$ ./a.bat "\"a&b\"" 
```

# c++ - 我可以通过 AF_INET 域套接字连接到 ipv6 地址吗？

> ID：12698862
> 
> 赞同：2
> 
> 时间：2012-10-02T21:47:01.137
> 
> 标签：c++, python, sockets, networking, network-programming

我的网络不支持 ipv6，因此我无法访问 ipv6 服务器，是否有任何解决方案可以使用使用“AF_INET”域的套接字连接到它们？或任何其他解决方案？互联网上是否有任何服务器可以免费进行这种转换？我可以使用 python 和 c++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:49:27.563

不; 如果没有某种形式的 IPv6 传输，您将无法连接到 IPv6 服务器。

根据您的网络，您可能能够设置 6to4 网关。不过，这是服务器配置更改，超出了 Stack Overflow 的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:55:17.020

谷歌`proxy to ipv6`：

*   [http://www.ipv6proxy.net/](http://www.ipv6proxy.net/)
*   [http://www.sixxs.net/tools/gateway/](http://www.sixxs.net/tools/gateway/)

# jquery - 如何选择除某个字段之外的整个文档？

> ID：12698864
> 
> 赞同：2
> 
> 时间：2012-10-02T21:47:04.037
> 
> 标签：jquery

我正在尝试选择除某个 div 之外的整个文档。我相信下面的代码应该可以工作，但事实并非如此。谁能看到我做错了什么？

```
$(document:not("#test")).bind('keydown',function(e){
  switch(e.which) {
  case 8:
  $("#status").append("<br/>captured");
  break;
  default:
  break;
  }
}); 
```

可搭配的 HTML：

```
<textarea id="test" ></textarea><br/>
<input type="text" id="message"/>
<div id="status"></div> 
```

我也试过这个的几个变种

```
//$("*:not(#message)").bind('keydown',function(e){ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:49:52.633

您将对象 ( `document`) 与 jQuery 选择器 ( `:not("#test")`) 混合在一起。这使得它的语法无效，因为选择器应该在字符串中。

如果它会运行，您将选择所有文档对象（唯一一个），除了那些`id="test"`（无，因为文档对象没有 HTML 属性）。

也许您实际上想要选择主体内的所有元素，除了那个 div？

```
$('body *:not(#test)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:52:58.373

事件委托应该使这变得简单。

```
$(document).on("keydown",":not(#message)",function(){
    alert("worky");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:00:14.023

`$('*:not(#test)', 'html')`应该适用于您的选择器，如果您的#test 是 div，您可以将 * 替换为例如 div，这样会更快，并且 jquery 不会无用地检查所有控件。

# java - Android自定义视图中的可变大小

> ID：12698866
> 
> 赞同：1
> 
> 时间：2012-10-02T21:47:15.987
> 
> 标签：java, android, android-layout, graphics

我正在实现一个自定义视图，我希望能够在运行时更改它的大小。

简化问题：我需要在这个视图中显示一个位图，但由于它经常刷新，我想扩展 SurfaceView。

问题是我失去了 ImageView 的自动调整大小功能。

所以我想声明一个方法 setCustomBitmap(Bitmap bmp) 并根据该位图的宽度和高度（保持纵横比）调整视图尺寸（当前或下一次显示视图）。

我应该使用什么方法？我想 setWidth() 和 setHeight() 不是最好的主意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:21:33.510

由于您正在扩展 SurfaceView，因此您可能能够覆盖该`onMeasure()`方法。传递给超类（通过`super.onMeasure()`）的 MeasureSpec 实例将确定 SurfaceView 的大小。您可以使用位图的尺寸来制作每个 MeasureSpec。

例如：

```
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec ) {
    int parentViewWidth = MeasureSpec.getSize( widthMeasureSpec );
    int parentViewHeight = MeasureSpec.getSize( heightMeasureSpec );
    // ... take into account the parent's size as needed ...
    super.onMeasure(
        MeasureSpec.makeMeasureSpec( bitmap.width(), MeasureSpec.EXACTLY ), 
        MeasureSpec.makeMeasureSpec( bitmap.height(), MeasureSpec.EXACTLY ) );
} 
```

# php - php while 循环仅显示跨多个表的 mysql 查询的一个结果

> ID：12698867
> 
> 赞同：0
> 
> 时间：2012-10-02T21:47:18.420
> 
> 标签：php, mysql

我对仅返回一个结果的 while 语句有疑问。这是我第一次尝试从多个表中显示产品信息，但我不知道自己做错了什么。这是代码：

```
<?php
    require('./includes/config.inc.php');
    require(MYSQL);

    $sql = sprintf("SELECT * FROM tea");

    $res = mysqli_query($dbc, $sql);

    if(!$res){
    die('Could not complete query: '.mysqli_error($dbc));
    } else {

    echo 'Success!<br />';

    while($row = mysqli_fetch_array($res)){
        $table = $row['category'];
        $inum = $row['item_number'];

        echo $table.' '.$inum.'<br />';

        $fetch = sprintf("SELECT sub_category, item_name, description FROM $table WHERE item_number ='$inum'");
        $fetchRes = mysqli_query($dbc, $fetch);

        if(!$fetchRes){
            die('Could not fetch: '.mysqli_error($dbc));
        } else {
            while($fetchRow = mysqli_fetch_array($fetchRes)){
                $subCat = $fetchRes['sub_category'];
                $iNumber = $inum;
                $iname = $fetchRes['item_name'];
                $desc = $fetchRes['description'];

                echo $id.' '.$subCat.' '.$iNumber.' '.$iname.' '.$desc.'<br />';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:49:59.750

在您的 while 循环中，您应该使用`$fetchRow`变量作为从中获取列的数组，例如“sub_category”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:52:34.333

是

```
 $subCat = $fetchRes['sub_category'];
  $iNumber = $inum;
  $iname = $fetchRes['item_name'];
  $desc = $fetchRes['description']; 
```

需要：Res to Row

```
 $subCat = $fetchRow['sub_category'];
 $iNumber = $inum;
 $iname = $fetchRow['item_name'];
 $desc = $fetchRow['description']; 
```

# ios - QR De/Encoder SIGABRT 错误（在 de/encoder 之间切换）

> ID：12698868
> 
> 赞同：0
> 
> 时间：2012-10-02T21:47:30.590
> 
> 标签：ios, xcode, qr-code, tabbar, zbar-sdk

嘿伙计们，我必须为我的学校项目制作一个应用程序，其中包括阅读二维码的创建......

到目前为止没有问题。我开始制作一个点击栏应用程序，以便您可以在两种设置之间切换。我正在使用 ZBarSDK 来读取代码，并且到目前为止工作...用于创建代码我正在使用 kuapay-iOS-QR-Code-Generator 并且也可以工作...

但是如果我将它们组合在我的应用程序中，我会在视图之间切换后收到 SIGABRT 错误：/

希望大家帮帮我，我上传了整个项目，让大家直接看到问题！

链接：[http ://www.mediafire.com/?01acxgitv27uj9n](http://www.mediafire.com/?01acxgitv27uj9n)

我希望你能帮帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:35:39.870

我遇到了同样的问题，您是否在构建设置中禁用了 armv7s 架构？此外，您是否确保将所有插座连接到适当声明的属性？我也很新，我会将此作为评论而不是答案，但似乎我没有足够的代表这样做/找不到评论的链接。

# ios - 如何让我的应用程序继续运行而不等待 DNS 解析错误

> ID：12698872
> 
> 赞同：0
> 
> 时间：2012-10-02T21:47:49.793
> 
> 标签：ios, multithreading, cocoa-touch, dns, nsurlconnection

我有一个程序调用 Web 服务发布来更新信息，但在 DNS 解析失败的情况下，该应用程序只需等待大约 30 秒，让错误再次出现，然后继续正常执行。

注意：如果 web 服务发布失败，应用程序仍然可以正常运行，所以我不想等待响应。只需发布并继续前进，无论何时出现错误都会回来。

下面是返回错误 410 的发送方法。

```
// Sends the request via HTTP.
-(void)send {

    // If we don't have a handler, create a default one
if(handler == nil) {
    handler = [[SoapHandler alloc] init];
}

// Make sure the network is available
if([SoapReachability connectedToNetwork] == NO) {
    NSError* error = [NSError errorWithDomain:@"SoapRequest" code:400 userInfo:[NSDictionary dictionaryWithObject:@"The network is not available" forKey:NSLocalizedDescriptionKey]];
    [self handleError: error];
}

// Make sure we can reach the host
if([SoapReachability hostAvailable:url.host] == NO) {
    NSError* error = [NSError errorWithDomain:@"SoapRequest" code:410 userInfo:[NSDictionary dictionaryWithObject:@"The host is not available" forKey:NSLocalizedDescriptionKey]];
    [self handleError: error];
}

// Output the URL if logging is enabled
if(logging) {
    NSLog(@"Loading: %@", url.absoluteString);
}

// Create the request
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL: url];
if(soapAction != nil) {
    [request addValue: soapAction forHTTPHeaderField: @"SOAPAction"];
}
if(postData != nil) {
    [request setHTTPMethod: @"POST"];
    [request addValue: @"text/xml; charset=utf-8" forHTTPHeaderField: @"Content-Type"];
    [request setHTTPBody: [postData dataUsingEncoding: NSUTF8StringEncoding]];
    if(self.logging) {
        NSLog(@"%@", postData);
    }
}

// Create the connection
conn = [[NSURLConnection alloc] initWithRequest: request delegate: self];
if(conn) {
    receivedData = [[NSMutableData data] retain];
} else {
    // We will want to call the onerror method selector here...
    if(self.handler != nil) {
        NSError* error = [NSError errorWithDomain:@"SoapRequest" code:404 userInfo: [NSDictionary dictionaryWithObjectsAndKeys: @"Could not create connection", NSLocalizedDescriptionKey,nil]];
        [self handleError: error];
        }
    }
} 
```

任何建议将不胜感激！

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:11:06.820

您可能想要添加一些回报。我相信如果主机无法访问，您不想继续尝试连接。

此外，如果您的一项操作正在阻塞线程，您可能希望在后台队列中运行整个发送方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T15:09:03.520

如果使用 dipatch_queue 线程将不会阻塞。我的代码如下。

```
 if(connectToHostQueue != NULL)
{
    dispatch_release(connectToHostQueue);
    dispatch_suspend(connectToHostQueue);
    connectToHostQueue = NULL;
}

connectToHostQueue = dispatch_queue_create("hostAvailable",NULL);
dispatch_async(connectToHostQueue, ^{
        isHostAvailable = [SoapReachability hostAvailable:url.host];

    dispatch_async(dispatch_get_main_queue(), ^{

        // don't want to continue if process is canceled
        if(isCancel)
        {
            return;
        }

            // Connection process here.............. 
```

......................

```
 });
}); 
```

# google-api - 基于表单（跨域）的 Google Drive API 上传和注意事项

> ID：12698875
> 
> 赞同：3
> 
> 时间：2012-10-02T21:48:07.877
> 
> 标签：google-api, cors, google-drive-api

我目前正在从事一个相当有趣的……项目。我有一个客户希望允许将表单上传（从他们服务器上显示的页面）专门到他们自己的谷歌驱动器帐户。所使用的平台本质上是 LAMP。

单个（预认证）谷歌驱动器帐户。多个其他匿名上传源（用户）。

他们不希望用户被要求拥有自己的谷歌帐户（排除在用户自己的驱动器文件上简单地使用 Picker）。

他们想要某种程度的向后浏览器兼容性，例如 IE8（排除 XHR 使用 HTML5 的文件 API 读取文件数据来形成帖子）。由于某些移动浏览器的潜在兼容性问题，他们不想使用 flash/etc。

什么工作：

*   身份验证（获取刷新令牌，存储，根据需要使用它来获取访问令牌）
*   将文件上传到没有元数据的帐户
*   文件上传的结果被发送到隐藏的 iframe
*   通过 jquery 捕获 iframe 加载事件以至少知道发生了*什么*事

问题：

*   REST API 上传端点不支持 CORS：无法直接访问结果 iframe。（请参阅：[使用 JavaScript 对 Google Drive 进行授权](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript/10331393#10331393)）
*   成功上传的返回只是原始 JSON，而不是 JSONP。
*   似乎无法在 googleapis.com 域上通过浏览器打开任何具有适当标头的内容，因此排除了[easyXDM](http://easyXDM.net)和类似的具有跨源解决方法通信 javascript 方法的多 iframe。
*   无法在提交的 POST 中嵌入回调 URL，API 不允许这样做。
*   如果您将 Oauth2 令牌传递给在浏览器中也通过身份验证的用户（假设通过 cookie），则选取器会在尝试上传时显示错误。奇怪的是，您可以显示来自 Oauth2 令牌的匹配帐户的文件，但除了在目标 Oauth2 令牌的帐户与已登录用户匹配的浏览器实例中，任何文件上传都会失败并显示模棱两可的“服务器拒绝”消息。所有文件和文件类型都会发生这种情况，包括在经过身份验证的浏览器实例中工作的文件。我认为这是某种身份验证流程/范围问题。我还没有尝试过深入 Picker 源。
*   所有 javascript Google Drive API 上传示例似乎都依赖于使用 HTML 5 来获取文件数据，因此似乎排除了任何这种性质的事情。上传文件时，除了猜测哪个文件来自哪个用户之外别无他法，因为我们无法从无法访问的 iframe 中的结果中获取文件对象 ID。充其量我们可以做出一个非常粗略的基于时间的猜测，但在并发问题的情况下这是一个糟糕的主意。
*   我们不能为文件设置文件名或任何其他标识符（甚至不是唯一的文件夹），因为 REST API 依赖于通过 JSON 发送的元数据，而不是通过表单字段。所以我们最终在驱动器中得到没有名称/等的文件对象。
*   我们无法使用填充了元数据的服务器端（或通过 jquery/XHR 或 google javascript API 客户端）创建文件，然后使用基于表单的上传对其进行更新，因为更新 API 端点仅适用于 PUT（已测试）。
*   我们无法将文件上传到我们的本地服务器，然后将它们发送到谷歌（代理它们），因为 php ini 被锁定以防止更大的文件上传（并且回到对使用 HTML5 或 flash 施加的限制，因为我们不能块文件/等）。

所有这些都经过研究并在不同程度上进行了尝试。

目前这正在进行中（至少这是学习 API 并了解其局限性的一种有用方式），我将在 Dropbox 上实现类似的东西，但如果有人有任何有用的输入，它会要可爱！

例如，有什么方法可以让它与 Drive 一起使用？我忽略了什么吗？

我也意识到这可能本质上是一个低于预期的用例，所以我并不期待奇迹。我意识到理想的流程是简单地允许用户在必要时上传到他们自己的谷歌驱动器，然后让他们授予对我们的网络应用程序的文件访问权限（通过 Picker 或 API +我们自己的 UI），但这会成为一个问题我们自己的所有用户都必然已经是 google 帐户用户。我知道谷歌显然更希望我们让更多的人与他们注册以实现这一点，但是排除了让人们注册一个谷歌帐户来使用我们的应用程序的可能性（不是出于我们的任何偏见，只是增加了太多步骤和潜在的用户障碍）。如果他们确实有帐户，即使只是让他们登录谷歌也被认为对于基本 LCD 功能功能来说是不需要的，尽管它'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:33:11.287

您描述的方法的最大问题是您引入了一个很大的安全问题。允许匿名用户直接从客户端上传到云端硬盘需要将共享访问令牌泄露给任何经过的人。即使 drive.file 范围有限，恶意甚至有点好奇的用户也可以列出、访问（读取/更新/删除！）该应用程序上传的任何文件。

当然，公共投递箱功能仍然有用，但您确实需要代理这些请求以避免泄露访问令牌。如果您的 PHP 环境过于严格，为什么不在其他地方运行代理呢？您可以托管一个简单的代理来处理几乎任何地方的上传 - 应用程序引擎、heroku 等，并支持您需要的任何功能，以确保为您的应用程序正确设置元数据。

# c# - 获取在发布：结束事件中选择发布的语言

> ID：12698876
> 
> 赞同：3
> 
> 时间：2012-10-02T21:48:07.933
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

我为 publish:end 事件创建了一个事件处理程序 - 我能够获取正在发布的项目 - 我如何获取用户在发布选项中选择的语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:38:44.107

想通了 - 实际上 publish:end 事件对每种语言都会命中一次 - 你会得到正在发布的语言`EventArgs[0].Options.Language`

# python - 如何设置环境变量 R_user 在 python 中使用 rpy2

> ID：12698877
> 
> 赞同：20
> 
> 时间：2012-10-02T21:48:12.740
> 
> 标签：python, r, error-handling, installation

我无法在 python 中运行 rpy2。

使用此代码

```
 import rpy2.robjects as robjects 
```

以下是完整的例外情况：

* * *

RuntimeError: R_USER 未定义。

文件“d:\py\r\r.python.py”，第 1 行，在

```
 import rpy2.robjects as robjects

File "c:\Python27\Lib\site-packages\rpy2\robjects\__init__.py", line 17, in <module>
  from rpy2.robjects.robject import RObjectMixin, RObject

File "c:\Python27\Lib\site-packages\rpy2\robjects\robject.py", line 5, in <module>
  rpy2.rinterface.initr() 
```

* * *

我正在使用 windows xp win32 这是我的位置：

```
C:\Python27\Lib\site-packages\rpy2\robjects\robject.py

C:\Program Files\R\R-2.15.0\bin\i386\R.exe

C:\Python27\python.exe 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-08-25T06:03:41.150

这是我修复我的**R**包版本**3.0.2** python 版本**2.7**平台 ipython 笔记本的方式。

更改 R 计算机的路径 -> 属性 -> 高级和系统设置 -> 环境变量

在用户变量字段中添加`C:\Program Files\R\R-3.0.2\bin\x64`（我的系统是 Windows 64 位）到路径

在系统变量字段中添加两个新变量

`R_HOME c:\program files\r\r-3.0.2`

`R_USER C:\Users\"your user name"\Anaconda\Lib\site-packages\rpy2`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-27T09:13:09.503

如果您想将 Python 与 rpy2 一起使用，但您还想继续使用您的 RStudio，请不要忘记将 RStudio 添加到您的路径中，否则您会遇到一些路径问题。

您可以根据@user3758274 更改路径：

> 更改R计算机的路径->属性->高级和系统设置->用户变量字段中的环境变量添加`C:\Program Files\R\R-3.0.2\bin\x64`（我的系统是Windows 64位）到路径
> 
> 在系统变量字段中添加两个新变量
> 
> ```
> R_HOME    c:\program files\r\r-3.0.2
> 
> R_USER    C:\Users\"your user name"\Anaconda\Lib\site-packages\rpy2 
> ```

但是然后将 RStudio 添加到您的 R_USER 系统变量中，这样您将获得：

```
R_USER    C:\Program Files\RStudio\bin;C:\Users\"your user name"\Anaconda\Lib\site-packages\rpy2 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-08-03T12:35:53.617

结合[来自 @laven_qa](https://stackoverflow.com/a/39037741/4348534)和[@user3758274](https://stackoverflow.com/a/25479841/4348534)的答案，这对我有用：

```
# installing steps after downloading .whl from http://www.lfd.uci.edu/~gohlke/pythonlibs/#rpy2
import pip
pip.main(["install", "C:/Users/YOUR_USERNAME/Downloads/rpy2-2.8.6-cp36-cp36m-win_amd64.whl"]) # Path to the file that was downloaded from the website above

# setting temporary PATH variables
import os
os.environ['R_HOME'] = 'C:\Program Files\Microsoft\R Open\R-3.4.0' #path to your R installation
os.environ['R_USER'] = 'C:\ProgramData\Anaconda3\Lib\site-packages\rpy2' #path depends on where you installed Python. Mine is the Anaconda distribution

# importing rpy2
import rpy2.robjects as robjects

# test : evaluating R code
robjects.r('''
        # create a function `f`
        f <- function(r, verbose=FALSE) {
            if (verbose) {
                cat("I am calling f().\n")
            }
            2 * pi * r
        }
        # call the function `f` with argument value 3
        f(3)
        ''')

# returns : 
> R object with classes: ('numeric',) mapped to:
> <FloatVector - Python:0x000000000C260508 / R:0x000000000F2872E8>
> [18.849556] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-19T11:18:47.330

对于即时和临时的解决方案，您可以在导入 rpy2 之前添加以下代码：

```
import os
os.environ['R_HOME'] = 'C:/program files/R-3.3.1' 
```

值得注意的一件事是您应该在路径中使用**反斜杠而不是斜杠。**

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-02T22:10:52.460

哦，nvm ..我修复了这个..这就是我的做法，以防万一有人遇到同样的问题。我必须将 PYTHONPATH 指定到存储位置 rpy2.robjects

以下是详细信息：我的电脑 > 系统属性 > 高级 > 环境变量：

在系统变量下创建或编辑您的

```
Variable name : PYTHONPATH 

Variable value : C:\Python27\Lib\site-packages\rpy2;C:\Program Files\R\R-2.15.0\bin\i386;C:\Python27\Lib\site-packages\rpy2\robjects 
```

这应该工作，享受。

# c++ - 使用 CURL 从 HTTPS 连接中不获取任何内容

> ID：12698879
> 
> 赞同：4
> 
> 时间：2012-10-02T21:48:18.563
> 
> 标签：c++, curl, https

我最近一直在尝试了解有关 CURL 的更多信息，最后设法将它正确地编译和安装为我的测试项目的静态库。最终，我将继续学习发布表格等。

我已经成功地从`http://www.google.se`.

连接到安全的 http 页面时`https://www.google.se`，我得到一个空字符串作为页面内容。

我正在使用[它](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT)来获取有关选项的信息。

我已经尝试过[这个答案](https://stackoverflow.com/a/316732/944301)中的东西，但它没有用，或者我做错了。
我也试过关闭verifypeer和verifyhost（虽然我真的很想练习安全的解决方案），但也没有用。

我需要做什么才能使其工作？难道我做错了什么？

* * *

这是测试代码

```
#include <iostream>
#include <string>
#include <curl/curl.h>

using namespace std;

static size_t WriteCallback(void *contents, size_t size, size_t nmemb, void *userp){
    ((string*)userp)->append((char*)contents, size * nmemb);
    return size * nmemb;
}

int main(){
  CURL *curl;
  CURLcode res;
  string readBuffer;

  curl = curl_easy_init();
  if(curl){
    curl_easy_setopt(curl, CURLOPT_URL, "https://www.google.se");
    //curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, TRUE);

    //Doesn't seem to work
    curl_easy_setopt(curl, CURLOPT_CAINFO, "path\\cacert.pem");

    //Neither does this
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &readBuffer);
    res = curl_easy_perform(curl);
    curl_easy_cleanup(curl);

    cout<<readBuffer<<endl;

    system("pause");
  }
  return 0;
} 
```

* * *

## 更新

所以我从 curl 那里得到了错误消息`Unsupported protocol`，我猜这就是 SSL 不起作用时的意思。所以我不得不用 SSL 重新编译它（这很奇怪，因为我以为我第一次这样做了）但是......

我几乎要放弃了。叹。出于某种原因，现在它 `NMAKE: fatal error U1077 nasmw`在制作 SSL 时给了我错误，即使我清楚地将正确的 %PATH% 给了 nasm。我按照信中的步骤进行操作。

所以我尝试使用[libcurl 类型的 curl 二进制文件](http://curl.haxx.se/gknw.net/7.27.0/dist-w32/curl-7.27.0-devel-mingw32.zip)，但我不知道如何在 VC++ 中正确链接它，因为我不熟悉库文件。

尝试编译测试项目时，我不断收到这些链接器错误。

```
1>main.obj : error LNK2019: unresolved external symbol _curl_easy_cleanup referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _curl_easy_strerror referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _curl_easy_perform referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _curl_easy_setopt referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _curl_easy_init referenced in function _main 
```

如此沮丧......我希望我明白为什么它必须如此复杂。
我只想使用图书馆！

* * *

## 更新 2

好的...我设法使用 SSL 编译 curl 库并`CURL_VERSION_SSL`启用报告

```
curl_version_info_data * vinfo = curl_version_info(CURLVERSION_NOW);

if(vinfo->features & CURL_VERSION_SSL){
    cout<<"CURL: SSL enabled"<<endl;
}else{
    cout<<"CURL: SSL not enabled"<<endl;
}

//Prints out "CURL: SSL enabled" 
```

但我仍然收到相同的错误消息`Unsupported protocol`。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:17:52.777

好吧，在我第 n 次编译该库之后，一切似乎都很好，直到我调试它并且它给了我堆错误，表明我再次犯了一个错误 *twitch twitch*。

在开始新的编译会话之前，我再次查看了 curl.haxx 并找到了一个 MSVC 包。这让我很高兴，因为我知道如何处理这些！我选择了静态库，因为那是我想要的。

虽然并非一切顺利，但我必须添加一些额外的链接器依赖项才能使其正常工作。

即

```
#pragma comment(lib, "curllib_static.lib")
#pragma comment(lib, "wldap32.lib")
#pragma comment(lib, "ws2_32.lib")
#pragma comment(lib, "winmm.lib")
#pragma comment(lib, "ssleay32.lib")
#pragma comment(lib, "openldap.lib")
#pragma comment(lib, "libeay32.lib") 
```

将它们放入并使用我下载的另一个包中的证书包，以便我可以连接到 HTTPS。

```
curl_easy_setopt(curl, CURLOPT_CAINFO, "_path_\ca-bundle.crt"); 
```

不过，我收到了一些警告，这些警告是我以前从未见过的。他们没有搞砸任何事情，但它与 PDB 文件“vc90”有关，我认为是 VC++ 自己处理的。

这是在***最终***拥有适当的 CURL 库`https://www.google.se`后连接到（删除并添加到项目属性下的链接器依赖项中的编译指示）的代码。

 *这是[MSVC 包](http://curl.haxx.se/download/libcurl-7.19.3-win32-ssl-msvc.zip)（启用 SSL）。您可以使用[此包](http://curl.haxx.se/gknw.net/7.27.0/dist-w32/curl-7.27.0-devel-mingw32.zip)中的脚本之一（perl 或 VBscript）为您制作证书包。

哦，还有，如果你像我一样使用静态库，你必须添加预处理器定义`CURL_STATICLIB`

```
#include <iostream>
#include <string>
#include <curl/curl.h>

using namespace std;

static size_t WriteCallback(void *contents, size_t size, size_t nmemb, void *userp){
    ((string*)userp)->append((char*)contents, size * nmemb);
    return size * nmemb;
}

int main(){
  CURL *curl;
  CURLcode res;
  string readBuffer;

  curl = curl_easy_init();
  if(curl){
    curl_easy_setopt(curl, CURLOPT_URL, "https://www.google.se");
    curl_easy_setopt(curl, CURLOPT_CAINFO, "C:\\libcurl_static\\ca-bundle.crt");
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &readBuffer);
    res = curl_easy_perform(curl);
    curl_easy_cleanup(curl);

    cout<<readBuffer<<endl;

    system("pause");
  }
  return 0;
} 
```

真的是我的错，我应该检查他们拥有的下载向导上的描述。我只从档案库（7.27.0）下载了最新的源代码，因为我认为我***必须***自己编译它才能得到我想要的东西。

这整件事很尴尬。不过我从中学到了很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:00:42.447

使用 -v 检查完整响应。这可能是一个重定向。此外，众所周知，Google 会阻止使用 curl 的默认用户代理完成的请求......*

# php - 正则表达式提取动态字符串直到某一点

> ID：12698880
> 
> 赞同：1
> 
> 时间：2012-10-02T21:48:21.867
> 
> 标签：php, regex, string, dynamic, extract

我的正则表达式写在这里，无论我如何更改它都不起作用，替换字符什么的。我有一个可能有 3 个单词或 8 个单词的字符串列表。当我们击中某个字符或字符串时，是否有更简单的方法来切断正则表达式？**让我告诉你我的意思：** 以下是我将处理的一些字符串示例：

```
WKT8100 Cooperative Education Work Term Preparation 15 hrs/w
CST8259 Web Programming Languages II 5 hrs/w
CST8265 Web Security Basics 5 hrs/w
CST8267 Ecommerce 4 hrs/w 
```

我只想从字符串中提取课程名称和 ID 并省略我需要的小时数，所以留给我：

```
WKT8100 Cooperative Education Work Term Preparation 
```

作为回报。

我的 RegEx 目前是这样的：

```
RegEx = "/[a-zA-Z]{3}[0-9]{4}[A-Z]{0,1}\s[a-zA-Z]{3,20}\s[a-zA-Z]{0,20}\s[a-zA-Z]{0,20}\s[a-zA-Z]{0,20}\s/"; 
```

我是一个正确提取小时数的正则表达式，所以也许如果有一种方法可以与 substr 一起使用。这样，我基本上可以在 RegEx 小时之前提取所有内容，而不必担心复杂的 RegEx 行。：

```
HoursRegEx = "@\s[0-9]{1,2}?\shrs\/w@i"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:52:52.693

为什么不：

`/(.*) \d+ hrs\/w/`

这应该捕获`x hrs/w`部分之前的所有字符。

为了进一步解释，这只是创建一个捕获组，其中包含它在看到之前找到的任何内容：一个空格、一个或多个数字、另一个空格，然后是序列“hrs/w”。既然你不在乎结尾部分之前是什么，为什么要尝试识别它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:59:21.933

如果它总是以“hrs/w”结尾，你可以这样做：

```
$string = "WKT8100 Cooperative Education Work Term Preparation 15 hrs/w";
$string = trim($string)
$lastSpace = strrpos($string, " ");
$string = trim(substr($string, 0, $lastSpace));
$lastSpace = strrpos($string, " ");
$hours = trim(substr($string, $lastSpace));
$nameID = trim(substr($string, 0, $lastSpace)); 
```

如果不使用正则表达式，那是我想不到的。如果不先进行一些广泛的进修研究，我无法给你任何正则表达式。

*ps乔丹的看起来干净多了。*

# apache - .htaccess url 路由子目录

> ID：12698882
> 
> 赞同：1
> 
> 时间：2012-10-02T21:48:39.717
> 
> 标签：apache, .htaccess, webserver

我已经阅读了至少 100 篇关于 .htaccess 的帖子，但似乎无法理解它。我尝试的一切都导致了 404 错误，我知道它有效，因为如果我输入一行随机性，它会给出不同的错误。我正在尝试做的是 url 路由，就像使用索引页面一样，使用子域。

我有一个文件 routing.php，它采用它之后的部分 url，并包含基于创建不同页面的文件。

EX：`mydomain.com/secure/routing/application`应该通过路由给它变量应用程序，以便`routing.php`可以构建应用程序。`mydomain.com/secure/routing/login`应该通过路由给它变量 login 从而构建一个登录页面。

我已经`routing.php`全部设置好了。故障，路由任何包含`mydomain.com/secure/routing/`到的 url，`mydomain.com/secure/routing.php`无论路由之后发生什么。

我最近的尝试：（放在 /secure 子目录中）

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . routing.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:56:03.633

尝试：

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On

RewriteBase /secure/

#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^routing/? routing.php [L] 
```

# mysql - MySQL：使用附加 HASH 字段的唯一文本字段

> ID：12698884
> 
> 赞同：4
> 
> 时间：2012-10-02T21:48:41.810
> 
> 标签：mysql, cryptography, md5, sha256, unique-key

在我的 MySQL 数据库中，我定义了一个表，如下所示：

```
CREATE TABLE `mytablex_cs` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `tag` varchar(6) COLLATE utf8_bin NOT NULL DEFAULT '',
  `value` text COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`id`),
  KEY `kt` (`tag`),
  KEY `kv` (`value`(200))
) ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

我需要在`value`字段上实现一个 UNIQUE 约束（键）。

我知道目前还不可能为`blob`or`text`字段的整个值定义唯一索引，但是有一张票（？）打开以实现此类功能（请参阅[此页面](http://dev.mysql.com/worklog/task/?id=882)），建议使用创建唯一键已经为其他字段实现了类似的哈希。

现在我想使用类似的方法向表中添加另一个包含哈希的字段并在该字段上创建唯一键。

我查看了创建此哈希的可能方法，并且由于我想避免冲突（我需要插入数百万个条目），因此 RIPEMD-160 算法似乎是最好的算法，即使快速搜索给出了我有几个使用 SHA256 甚至 SHA1 和 MD5 的类似解决方案。

我完全缺乏密码学知识，那么选择这种方法的缺点是什么？

我的另一个问题是：MySQL 当前使用哪种算法来创建哈希？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T07:40:00.257

让我们看看你的要求：

您需要确保值字段是唯一的。值字段是一个文本列，由于它的性质，无法在值字段上创建唯一索引（目前）。因此，使用作为字段值哈希的额外字段是您唯一真正的选择。

这种方法的优点：

1.  易于计算哈希。
2.  为两个不同的值创建重复哈希是极其罕见的，因此您的哈希值几乎可以保证是唯一的。
3.  哈希通常是一些可以有效索引的数值（表示为十六进制）。
4.  散列不会占用大量空间，不同的散列函数返回不同长度的散列，因此请使用不同的算法并测试它们以找到适合您需要的算法。

这种方法的缺点：

1.  在插入和更新期间需要额外的字段，即还有更多的工作要做。
2.  如果表中已经有数据并且正在生产中，则必须更新当前数据，希望您没有重复数据。运行更新也需要时间。因此，在已经运行的系统中应用更改可能会很棘手。
3.  散列函数是 CPU 密集型的，会对 CPU 使用率产生负面影响。

我假设您了解哈希函数的作用以及概念上它是如何工作的。

您可以在此处找到加密函数列表：http: [//dev.mysql.com/doc/refman/5.5/en//encryption-functions.html](http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html)

据我所知，MySQL 支持 MD5、SHA、SHA1 和 SHA2 散列函数。大多数（如果不是全部）这些应该足以仅用于散列。像 MD5 这样的一些函数在密码学应用程序中使用时会出现一些问题，即在 PKI 中将其用作签名算法等时。但是，当您决定使用它来创建唯一值时，这些问题不应该那么重要，因为它并没有真正被应用在这里的密码学上下文中。

要使用 MySQL 散列函数，您可以尝试以下示例：

```
SELECT MD5('1234')
SELECT SHA('1234')
SELECT SHA1('1234')
SELECT SHA2('1234',224); 
```

与所有新事物一样，您应该尝试所有方法并找到最适合您的情况的方法。

# matlab - 如何使用自定义索引矢量化 for 循环

> ID：12698886
> 
> 赞同：5
> 
> 时间：2012-10-02T21:49:02.137
> 
> 标签：matlab, vectorization

我是 Matlab 的新手，所以我不确定这是否可能。我有一个简单的for循环：

```
for i=1:n
    B.x(indexB(i)) += A.x(i);
end 
```

其中 Ax 和 Bx 是长度为 n 的两个向量，indexB 是长度为 n 的向量，其中包含从 Ax 中的元素到 Bx 的适当映射

是否可以对这个循环进行矢量化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:00:20.670

我想是的，按照这个例子：

```
a = [1 2 3 4 5];
b = a;
idx = [5 4 3 2 1];
a(idx)  = a(idx) + b(1:5); 
```

哪个应该给出：

```
a =

 6     6     6     6     6 
```

所以在你的情况下，如果`indexB`有大小`n`你可以写：

```
B.x(indexB) = B.x(indexB) + A.x(1:n); 
```

否则：

```
B.x(indexB(1:n)) = B.x(indexB(1:n)) + A.x(1:n); 
```

# iphone - 卡在设备上的崩溃？

> ID：12698887
> 
> 赞同：-2
> 
> 时间：2012-10-02T21:49:15.067
> 
> 标签：iphone, xcode, debugging, crash, ipod-touch

我的应用程序中有一个问题，我不知道如何解决这个问题，因为这是第一次为我开发 IOS 应用程序。该应用程序在模拟器和我的 Iphone 3gs 上运行良好。但在我的 Ipod touch 上它不起作用。

所以我的崩溃日志向我显示了这样的内容：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                0x312f488f __exceptionPreprocess + 163
1   libobjc.A.dylib               0x37632259 objc_exception_throw + 33
2   CoreFoundation                0x312f7a9b -[NSObject doesNotRecognizeSelector:] + 175
3   CoreFoundation                0x312f6915 ___forwarding___ + 301
4   CoreFoundation                0x31251650 _CF_forwarding_prep_0 + 48
5   CoreFoundation                0x3124e3fd -[NSObject performSelector:withObject:withObject:] + 53
6   UIKit                         0x3099ae07 -[UIApplication sendAction:to:from:forEvent:] + 63
7   UIKit                         0x3099adc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
8   UIKit                         0x3099ada1 -[UIControl sendAction:to:forEvent:] + 45
9   UIKit                         0x3099ab11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493
10  UIKit                         0x3099b449 -[UIControl touchesEnded:withEvent:] + 477
11  UIKit                         0x3099992b -[UIWindow _sendTouchesForEvent:] + 319
12  UIKit                         0x30999319 -[UIWindow sendEvent:] + 381
13  UIKit                         0x3097f695 -[UIApplication sendEvent:] + 357
14  UIKit                         0x3097ef3b _UIApplicationHandleEvent + 5827
15  GraphicsServices              0x332c522b PurpleEventCallback + 883
16  CoreFoundation                0x312c8523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
17  CoreFoundation                0x312c84c5 __CFRunLoopDoSource1 + 141
18  CoreFoundation                0x312c7313 __CFRunLoopRun + 1371
19  CoreFoundation                0x3124a4a5 CFRunLoopRunSpecific + 301
20  CoreFoundation                0x3124a36d CFRunLoopRunInMode + 105
21  GraphicsServices              0x332c4439 GSEventRunModal + 137
22  UIKit                         0x309adcd5 UIApplicationMain + 1081
23  My App                        0x00097045 0x95000 + 8261
24  My App                        0x00096078 0x95000 + 4216

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib        0x37f0e32c __pthread_kill + 8
1   libsystem_c.dylib             0x353d9208 pthread_kill + 48
2   libsystem_c.dylib             0x353d2298 abort + 88
3   libc++abi.dylib               0x373a1f64 abort_message + 40
4   libc++abi.dylib               0x3739f346 default_terminate() + 18
5   libobjc.A.dylib               0x37632350 _objc_terminate + 140
6   libc++abi.dylib               0x3739f3be safe_handler_caller(void (*)()) + 70
7   libc++abi.dylib               0x3739f44a std::terminate() + 14
8   libc++abi.dylib               0x373a081e __cxa_rethrow + 82
9   libobjc.A.dylib               0x376322a2 objc_exception_rethrow + 6
10  CoreFoundation                0x3124a506 CFRunLoopRunSpecific + 398
11  CoreFoundation                0x3124a366 CFRunLoopRunInMode + 98
12  GraphicsServices              0x332c4432 GSEventRunModal + 130
13  UIKit                         0x309adcce UIApplicationMain + 1074
14  My App                        0x0009703e 0x95000 + 8254
15  My App                        0x00096070 0x95000 + 4208

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib        0x37efe3a8 kevent + 24
1   libdispatch.dylib             0x35b18ea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib             0x35b18bc2 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib        0x37efe004 mach_msg_trap + 20
1   libsystem_kernel.dylib        0x37efe1fa mach_msg + 50
2   CoreFoundation                0x312c83ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                0x312c7124 __CFRunLoopRun + 876
4   CoreFoundation                0x3124a49e CFRunLoopRunSpecific + 294
5   CoreFoundation                0x3124a366 CFRunLoopRunInMode + 98
6   WebCore                       0x363eec9c RunWebThread(void*) + 396
7   libsystem_c.dylib             0x3539a72e _pthread_start + 314
8   libsystem_c.dylib             0x3539a5e8 thread_start + 0

Thread 3:
0   libsystem_kernel.dylib        0x37f0ecd4 __workq_kernreturn + 8
1   libsystem_c.dylib             0x35394f36 _pthread_wqthread + 610
2   libsystem_c.dylib             0x35394cc8 start_wqthread + 0

Thread 4:
0   libsystem_kernel.dylib        0x37f0ecd4 __workq_kernreturn + 8
1   libsystem_c.dylib             0x35394f36 _pthread_wqthread + 610
2   libsystem_c.dylib             0x35394cc8 start_wqthread + 0

Thread 5:
0   libsystem_kernel.dylib        0x37f0ecd4 __workq_kernreturn + 8
1   libsystem_c.dylib             0x35394f36 _pthread_wqthread + 610
2   libsystem_c.dylib             0x35394cc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3f22bd98      r6: 0x00000002      r7: 0x2fe93a08
    r8: 0x0012eac0    r9: 0x373a2a4a     r10: 0x00000000     r11: 0x0e031d60
    ip: 0x00000148    sp: 0x2fe939fc      lr: 0x353d920f      pc: 0x37f0e32c
  cpsr: 0x000f0010 
```

另一件事是，一些视图加载缓慢，并且在我的 Ipod touch 4g 上大多崩溃（在 3gs 上它工作正常，4 我不知道，4s 我不知道，5 我不知道）。

有时它会在我的崩溃日志中显示我的应用程序的名称，例如 ^，有时它会显示我的进程：未知类型：未知。有什么建议该怎么做吗？

而在未知中，没有看起来不像的崩溃日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:17:57.757

您的错误似乎必须处理设备兼容性，并且有些人面临与您相同的错误。看看这个[https://discussions.apple.com/thread/4317775?start=0&tstart=0](https://discussions.apple.com/thread/4317775?start=0&tstart=0)

# typescript - 有没有办法使用打字稿即时向类添加方法？

> ID：12698893
> 
> 赞同：29
> 
> 时间：2012-10-02T21:49:45.987
> 
> 标签：typescript

我正在尝试创建某种 mixin 方法，可以即时向原型/类添加方法，但出现错误，例如

> “Greeter”类型的值上不存在属性“greetName”

和

> “Greeter”类型的值上不存在属性“greetName”

当我运行以下代码时。

```
class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
}

Greeter.prototype.greetName = function(name){
        return this.greet() + ' ' + name;
}

var greeter = new Greeter('Mr');

window.alert(greeter.greetName('Name')); 
```

它实际上编译为有效的 js 并按预期运行。有没有办法在没有编译器警告/错误的情况下做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-06T16:02:29.827

此解决方案的好处是在您动态添加方法时为您提供类型检查：

```
class MyClass {
    start() {

    }
}
var example = new MyClass();
// example.stop(); not allowed

interface MyClass {
  stop(): void;
}

MyClass.prototype['stop'] = function () {
    alert('Stop');
}
var stage2 = example;
stage2.stop(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T15:06:05.360

还有另一种方法可以做到这一点。

```
Greeter["SomeProperty"] = function() {
     return "somevalue";
}; 
```

工作原理相同，并在 javascript 中使用属性索引器功能，打字稿不会抱怨。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T22:22:11.947

他们需要一个部分类的概念才能使其工作，目前不支持。我会告诉你，我发现对于这些类型的场景更有效的是使用接口来代替（我已经用 TypeScript 编程大约 6 个月了——我在 MS，但不在 TypeScript 团队）

通过简单地定义要添加到接口的方法，接口是可扩展的。例如，如果您安装了一个 jQuery 插件，您将需要重新定义 IJQuery 和 IJQueryUtil 接口以包含插件的附加方法。从那时起，您可以通过 $.plugin() 调用插件方法，TypeScript 会很高兴。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-26T14:16:22.117

类似于@Fenton 示例，但没有粗糙的东西：

```
class MyClass {
    start() {
    }
}
MyClass.prototype['stop'] = function () {
    alert('Stop');
}

interface MyClass {
    stop(): void;
}

var example = new MyClass();
example.stop(); // Allowed!!! 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-23T00:21:30.917

这是怎么`RxJS`回事

```
import {Observable} from "./observable"; // which is Greeter in your case 

declare module "./observable" {
    interface Observable<T> {
        map<U>(f: (x: T) => U): Observable<U>;
    }
}

Observable.prototype.map = function (f) {

} 
```

**这称为模块增强。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-26T01:56:18.133

在必须在类上实现动态方法和属性之后，这是我能够用来防止 Typescript 编译器抱怨的解决方案：

```
...
window.alert(greeter['greetName']('Name')); 
```

基本上，使用[属性访问器](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors)的括号方法。

# visual-studio - 前向声明导致 VS2012 中的设计器问题

> ID：12698904
> 
> 赞同：2
> 
> 时间：2012-10-02T21:50:44.257
> 
> 标签：visual-studio, c++-cli, visual-studio-2012

我正在将一个小型 C++/CLI 项目从 VS2008 迁移到 VS2012，并且遇到了一个令人沮丧的问题。

在我的 MainForm 中，我有两个类的前向声明。它们位于命名空间声明和 MainForm 声明之间。

这两个前向声明导致设计人员抱怨错误“可以设计 MainForm 类，但不是文件中的第一个类。Visual Studo 要求设计人员使用文件中的第一个类。移动类代码以便它是文件中的第一个类，然后尝试再次加载设计器。”

关于潜在解决方案的任何想法？我尝试将参考文献放在课堂上，然后在课堂上都没有积极的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:00:20.103

Visual Studio 只需`MainForm`要先查看该类。在不添加包含的情况下执行此操作的最简单方法是转发声明`MainForm`自身：

```
namespace TheNameSpace
{
    ref class MainForm;
    // Other forward declarations go here

    public ref class MainForm
    {
        //Full class declaration goes here
    };
} 
```

# matlab - 从现有矩阵创建新矩阵

> ID：12698908
> 
> 赞同：3
> 
> 时间：2012-10-02T21:51:09.277
> 
> 标签：matlab, matrix

我在 Matlab 中有一个矩阵，A =

```
 1     2     3
 4     5     6
 7     8     9
10    11    12 
```

现在我想创建一个从 A 派生的新矩阵 B。新矩阵应如下所示： B =

```
1   0
0   4
2   0
0   5
3   0
0   6 
```

不使用 FOR 循环是否可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:01:35.513

通过一些索引很容易：

```
A=[1     2     3  ;
   4     5     6  ;
   7     8     9  ;
   10    11    12 ];

B = zeros(2*size(A,2),2);
B(1:2:end,1)=A(1,:); % put first row values in first column of c
B(2:2:end,2)=A(2,:); % put énd row values in 2nd column of c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:09:34.147

如果您只使用 4x4 矩阵，那么是的。

您想转换 4x4 并使用行 x 列约定，您可以像这样一次访问 A 的元素`A[row][column]`

然后你想要一个 6x2 矩阵然后你只需用零调用它`B = zeros(6,2)`

然后交替向下`B[row][column] = A[row][column]`，您应该能够轻松构建它。

# ruby-on-rails - 如果 ... 添加类内联（在 1 行中）

> ID：12698909
> 
> 赞同：9
> 
> 时间：2012-10-02T21:51:11.227
> 
> 标签：ruby-on-rails, ruby, class, if-statement, link-to

仅当语句为真时，我才想将类添加到**link_to 。**

```
<%= link_to product.name, product, :class => "last" if product == @products.last %> 
```

IF 语句影响整行而不仅仅是**:class**部分的问题。

我知道我可以用 IF ELSE 完成它，但是可以在 1 行中完成吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T21:59:07.687

```
<%= link_to product.name, product, :class => (product == @products.last ? "last" : "")  %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:58:15.003

好吧，您可以在助手中将其抽象出来：

```
def product_link(product)
  if product == @products.last
    link_to product.name, product, :class => "last"
  else
    link_to product.name, product
  end
end 
```

然后在您看来，您可以这样做`product_link(product)`。

**更新**：或更紧凑的方式：

```
def product_link(product)
  return link_to product.name, product, class: "last" if product == @products.last
  return link_to product.name, product)
end 
```

# python - 从没有索引的列表中删除元素

> ID：12698915
> 
> 赞同：4
> 
> 时间：2012-10-02T21:51:21.907
> 
> 标签：python

所以我以这种方式迭代列表中的项目：

```
for virus in viruses:
    do stuff
    remove virus 
```

如果我有索引，我可以只做 del virus[i]，我显然可以调整代码来做类似的事情`for index in range(0, len(viruses))`，但这开始让代码很快变得丑陋，因为我想在 for 循环中做其他事情. 无论如何，我可以根据我当前正在迭代的病毒的名称来删除吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T21:58:47.883

这个怎么样：

```
for virus in viruses[:]:
    # do stuff
    viruses.remove(virus)  # remove "virus" from the original list 
```

`viruses[:]`创建我们`viruses`列表的副本。作为说明，您还可以使用`list(oldlist)`复制列表（我发现这更具可读性，但任何一个都可以）。[您可以在此处](http://docs.python.org/tutorial/datastructures.html)阅读有关 python 列表的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T21:58:53.877

要按其值删除项目，只需使用[`list.remove()`](http://docs.python.org/tutorial/datastructures.html#more-on-lists)：

在迭代列表时从列表中删除元素可能会导致一些意想不到的问题，因此请确保您正在迭代副本：

```
for virus in viruses[:]:
    # do stuff
    viruses.remove(virus) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:52:44.337

列表有一个方法`remove()`，您可以使用它按值删除元素，

如果您正在修改列表并对其进行迭代，那么您应该使用`reversed()`，否则迭代将丢失一些元素：

```
for virus in reversed(viruses):
    viruses.remove(virus) 
```

一个简单的例子：

```
In [203]: lis=range(0,10)

In [206]: for x in reversed(lis):
   .....:     if x%2==0:                #remove even numbers
   .....:         lis.remove(x)
   .....:         
   .....:         

In [207]: lis
Out[207]: [1, 3, 5, 7, 9] 
```

或使用浅拷贝：

```
In [212]: lis=range(10)

In [213]: for x in lis[:]:
    if x%2==0:
        lis.remove(x)
   .....:         
   .....:         

In [216]: lis
Out[216]: [1, 3, 5, 7, 9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T21:59:54.120

尽管您的选择之一是使用`remove()`，但这可能会返回错误。另一种选择是将病毒（假定为列表）视为堆栈（或队列）

```
for _ in xrange(len(viruses)):
    virus = viruses.pop()
    # do stuff with virus 
```

如果`viruses`是字典（和`virus`键），则只需删除键即可：

```
import copy
for virus in copy.copy(viruses):
    # do stuff with virus
    del viruses[virus] 
```

有关更多信息，请参阅[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

# javascript - 无法在 IE 的 textarea 中选择文本

> ID：12698917
> 
> 赞同：0
> 
> 时间：2012-10-02T21:51:27.830
> 
> 标签：javascript, jquery, html, internet-explorer

我有几个案例，我使用 textarea 来显示一些用于数据库查询的源代码。这个想法是允许用户选择文本区域中的所有文本，以便他们可以复制该代码并将其粘贴到其他地方。一切都很好，除了 IE-{8,9} 这是我唯一关心的两个 IE 浏览器。

该选择适用于一个文本区域，而不适用于另一个。我为此绞尽脑汁好几个小时都没有运气。我试图在一个很小的代码片段中重现这一点以说明问题，但这也没有奏效。

因此，要朝另一个方向发展，有没有办法禁止从特定于 IE 且不需要特定 javascript 代码的文本区域中选择文本？我没有编写任何特定代码来禁用文本区域中的文本选择。

例如，如果我有这个 textarea

```
<textarea>Some Text</textarea> 
```

该文本如何仅在 IE 中无法选择？我还尝试使用 jquery、javascript 和 DOM api 以编程方式选择文本。它适用于除 IE-{8,9} 之外的所有浏览器。

举个例子。

```
$('textarea').select(); 
```

我已经考虑过一些事件侦听器不存在的想法，但是由于 IE 开发人员工具太棒了，我没有运气跟踪那些比较 Chrome 中列出的内容。

我还重置了 IE 并确保启用了复制“拖放或复制和粘贴”。

我会将其归为浏览器错误并编写自己的错误，但由于它在一种情况下工作而不是在另一种情况下工作，所以我没有看到在后台发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:20:45.363

哟不能像这样引用文本区域。您必须使用 id。

```
<textarea id="foo">Some Text</textarea>

<script type="text/javascript">
    $('#foo').select();
</script> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:06:15.377

事实证明，有一个 mixin 覆盖了 onselectstart 方法。

```
 if (typeof self.node.onselectstart !== 'undefined') {
        self.node.onselectstart = function() {
            return false;
        };
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:17:25.317

按 ID 选择对我来说非常好：

[jsfiddle链接](http://jsfiddle.net/bB6Bf/14/)

# php - 每个数据库托管多个域时，我可以使用 HTTP_HOST 设置站点 css、图像吗？

> ID：12698934
> 
> 赞同：0
> 
> 时间：2012-10-02T21:53:03.867
> 
> 标签：php, http-host

这是一个基本问题。我学习 SQL php 已经一年多了。我正在构建一个很棒的数据库，我想在他们自己的域/服务器上与我的客户分享。因此，他们实际上会登录到我的域来更新他们域的信息。这使得社区类型的数据。

这会起作用吗：

```
if($_SERVER[‘HTTP_HOST’] == “www.site1.com” {
$site_id = 1;
$site_css = ‘path/tosite1.css’;
$site_images = “path/to folder/for images/site1/”;
}
if($_SERVER[‘HTTP_HOST’] == “www.site2.com” {
$site_id = 2;
$site_css = ‘path/tosite2.css’;
$site_images = “path/to folder/for images/site2/”;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:07:57.570

一种更简单的方法是使用网络服务器级别的别名，例如对于 Apache，您将拥有

```
<virtualhost example.com>
   Alias /css  /path/to/example.com/css/stuff/
   Alias /images /path/to/example.com/images/
</virtualhost>

<virtualhost otherexample.net>
   Alias /css  /path/to/otherexample.net/css/stuff/
   Alias /images /path/to/example.com/images/
</virtualhost> 
```

等等。每个站点都有自己的虚拟目录`css`和`images`目录，Apache 将透明地映射到适当的特定于站点的真实目录。您所有的网站都会有

```
<link type="text/css" rel="stylesheet" href="/css/whatever.css" /> 
```

Apache 将负责确定您在多站点服务器上拥有的许多whatever.css 中的哪一个真正应该被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:56:24.570

这是一个坏主意，因为您的解决方案无法*扩展超过 100*。

如果您为人们托管 100 个网站会怎样？你最终会得到一个非常长的 php 文件。

为了解决这个问题，您可以开始将值存储在*mysql*数据库中。如果您希望您的 php 代码实用，请参阅[Tizag mysql 教程](http://www.tizag.com/mysqlTutorial/)。

# c++ - 如何使用 boost 解析超过 2 个级别的 XML

> ID：12698938
> 
> 赞同：1
> 
> 时间：2012-10-02T21:53:29.823
> 
> 标签：c++, xml, parsing, boot

我从 boost 库中得到了这个代码。 [http://www.boost.org/doc/libs/1_42_0/doc/html/boost_propertytree/tutorial.html](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_propertytree/tutorial.html)

这是他们拥有的 xml 文件

```
<debug>
    <filename>debug.log</filename>
    <modules>
        <module>Finance</module>
        <module>Admin</module>
        <module>HR</module>
    </modules>
    <level>2</level>
</debug> 
```

加载这些值并打印它们的代码是

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>
#include <boost/foreach.hpp>
#include <string>
#include <set>
#include <exception>
#include <iostream>

struct debug_settings
{
    std::string m_file;               // log filename
    int m_level;                      // debug level
    std::set<std::string> m_modules;  // modules where logging is enabled
    void load(const std::string &filename);
    void save(const std::string &filename);
};

void debug_settings::load(const std::string &filename)
{

    using boost::property_tree::ptree;
    ptree pt;
    read_xml(filename, pt);
    m_file = pt.get<std::string>("debug.filename");
    m_level = pt.get("debug.level", 0);
    BOOST_FOREACH(ptree::value_type &v, pt.get_child("debug.modules"))
    m_modules.insert(v.second.data());

}

void debug_settings::save(const std::string &filename)
{

    using boost::property_tree::ptree;
    ptree pt;

    pt.put("debug.filename", m_file);

    pt.put("debug.level", m_level);

    BOOST_FOREACH(const std::string &name, m_modules)
    pt.put("debug.modules.module", name,true);

    write_xml(filename, pt);
}

int main()
{
    try
    {
        debug_settings ds;
        ds.load("debug_settings.xml");
        ds.save("debug_settings_out.xml");
        std::cout << "Success\n";
    }
    catch (std::exception &e)
    {
        std::cout << "Error: " << e.what() << "\n";
    }
    return 0;
} 
```

但这给了我一个错误

/usr/include/boost/property_tree/detail/ptree_implementation.hpp:769：错误：在“tr”中请求成员“put_value”，它是非类类型“bool”</p>

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:41:33.500

似乎他们已经替换了 put () 函数......所以如果我改变了这一行

"pt.put("debug.modules.module", name,true);"

到

"pt.add("debug.modules.module", name);"

它工作正常。谢谢你。

# mysql - ansible安装后的默认root MySQL密码是什么？

> ID：12698943
> 
> 赞同：3
> 
> 时间：2012-10-02T21:54:16.613
> 
> 标签：mysql, passwords, root

我的 ansible 脚本中安装 MySQL 的行如下所示：

```
 - name: mysql is installed (from apt)
   action: apt pkg=mysql-server state=installed 
```

这成功安装了 MySQL 服务器，但尚不清楚如何从这里继续。之后运行`mysql_user`操作不起作用，因为我什至无法验证为`root`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:00:52.333

密码将为空白。如果它不起作用，您可以随时重置它：

[https://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](https://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

# sql - sql oracle 重复

> ID：12698945
> 
> 赞同：1
> 
> 时间：2012-10-02T21:54:32.200
> 
> 标签：sql, oracle, join, self

这是我的 ORACLE 表

```
HAVE******
asset_no, sub,          add_dtm
11510     FOX HOLLOW    8/1/2008 8:00:01 AM
11510     FOX HOLLOW    11/1/2011 1:30:01 PM
11510     FOX HOLLOW    10/1/2012 8:00:01 AM
11511     TOWNE NORTH   6/25/2008 5:23:15 PM
11512     EAST SUB      7/23/2010 2:50:44 PM

WANT******
11510     FOX HOLLOW    10/1/2012 8:00:01 AM
11511     TOWNE NORTH   6/25/2008 5:23:15 PM
11512     EAST SUB      7/23/2010 2:50:44 PM 
```

我在上表（11510）中有重复的asset_no，日期不同我需要每个重复asset_no 的最大日期。当我选择asset_no，max（add_dtm）时，我得到了我想要的，但我也需要'sub'字段，选择asset_no，sub，max（add_dtm），然后我得到上面显示的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:58:45.150

有几种方法可以做到这一点 - 请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/98439/6) of all queries

您可以使用子查询：

```
select t1.asset_no,
  t1.sub,
  t1.add_dtm
from table1 t1
inner join
(
  select max(add_dtm) mxdate, asset_no
  from table1
  group by asset_no
) t2
  on t1.add_dtm = t2.mxdate
  and t1.asset_no = t2.asset_no 
```

或者您可以`CTE`使用`row_number()`：

```
with cte as
(
  select asset_no,
    sub,
    add_dtm,
    row_number() over(partition by asset_no 
                      order by add_dtm desc) rn
  from table1
) 
select *
from cte
where rn = 1 
```

或不使用 CTE `row_number()`：

```
select *
from 
(
  select asset_no,
    sub,
    add_dtm,
    row_number() over(partition by asset_no 
                      order by add_dtm desc) rn
  from table1
) x
where rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:29:00.947

可能最简单的方法是使用分析（又名窗口）函数，如下所示：

```
SELECT *
FROM (
    SELECT 
        YOUR_TABLE.*, 
        RANK() OVER (PARTITION BY asset_no ORDER BY add_dtm DESC) R
    FROM YOUR_TABLE
)
WHERE R = 1 
```

请注意，如果您有多个相等的最大日期（对于相同的`asset_no`），这将返回多行。要仅选择其中一个（随机），您可以使用`ROW_NUMBER() OVER ...`.

* * *

或者，以老式方式进行：

```
SELECT *
FROM YOUR_TABLE T1
WHERE
    add_dtm = (
        SELECT MAX(add_dtm)
        FROM YOUR_TABLE T2
        WHERE T1.asset_no = T2.asset_no
    ); 
```

这甚至适用于不支持分析功能的 DBMS（与 Oracle 不同）。

[[SQL 小提琴]](http://sqlfiddle.com/#!4/4549e/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:00:44.073

试试这个

```
WITH CTE AS
(
SELECT asset_no, sub,add_dtm, 
row_number() over (partition by asset_no, sub order by add_dttm desc) 
rn from table1
)

select * from cte where rn = 1; 
```

# r - 插入一个空白行，使用 cat 从列表中写入文件

> ID：12698946
> 
> 赞同：2
> 
> 时间：2012-10-02T21:54:38.073
> 
> 标签：r, for-loop, cat

使用 R，我必须从列表中编写一个输出文件。所以我认为使用'for'循环来取消列出并写出来。

```
l.spec <- list(a=c(rep("A",10)), b=c(rep("B",4)), c=c(rep("C",6)))
f <- matrix()
for(i in seq_along(l.spec)){
    f <- matrix(unlist(l.spec[i]), byrow=TRUE)
    cat(f, file="output.txt", sep="\n", append=TRUE)
} 
```

此外，我需要在列表的每个级别之间插入一个空行以获得输出，例如：

```
A
A
A
A
A
A
A
A
A

B
B
B
B

C
C
C
C
C
C 
```

你有什么建议吗？？

问候

里卡多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:00:20.943

这似乎做你想做的

`lapply(l.spec, function(x) cat(c(x, " "), file = "output.txt", sep = "\n", append = TRUE))`

# python - 插入 mongodb (pymongo) 时的效率

> ID：12698949
> 
> 赞同：1
> 
> 时间：2012-10-02T21:55:10.903
> 
> 标签：python, mongodb, performance, pymongo, database

**为清楚起见进行了更新：**插入/附加到`capped collection`. 我有两个 python 脚本正在运行：

(1) 拖尾光标。

```
while WSHandler.cursor.alive:
        try:
            doc = WSHandler.cursor.next()
            self.render(doc) 
```

(2) 像这样插入：

```
def on_data(self, data):                      #Tweepy
    if (len(data) > 5):
        data = json.loads(data)
        coll.insert(data)                     #insert into mongodb
        #print(coll.count())
        #print(data) 
```

它运行良好一段时间（每秒 50 次插入）。然后，在 20-60 秒后，它跌跌撞撞，撞到 CPU 顶部（尽管之前它以 20% 的速度运行），并且再也没有恢复。我的 mongostats 潜水（潜水如下所示）。

Mongostat 输出： ![Mongostat 输出](../Images/e9771e4974ac4122ed0a9bac3f437ee2.png)

CPU 现在被执行插入的进程阻塞（至少根据`htop`）。

当我运行上面的 Tweepy 行`print(data)`而不是将其添加到 db ( `coll.insert(data)`) 时，在 15% 的 cpu 使用情况下一切运行良好。

我在 mongostats 中看到的：

*   `res`不断攀升。（虽然堵塞可能发生在 40m 并且在 100m 上运行良好。）
*   `flushes`似乎不干涉。
*   `locked %`稳定在 0.1%。这最终会导致堵塞吗？

（我正在运行 AWS 微实例；pymongo。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:22:22.583

我建议在运行测试时使用 mongostat。有很多事情可能是错误的，但 mongostat 会给你一个很好的指示。

[http://docs.mongodb.org/manual/reference/mongostat/](http://docs.mongodb.org/manual/reference/mongostat/)

我要看的前两件事是锁定百分比和数据吞吐量。在专用机器上具有合理的吞吐量，我通常会在遭受任何降级之前达到每秒 1000-2000 次更新/插入。我曾经使用过的几个大型生产部署就是这种情况。

# glassfish - Arquillian、glassfish 和 h2 数据库

> ID：12698955
> 
> 赞同：0
> 
> 时间：2012-10-02T21:55:32.667
> 
> 标签：glassfish, h2, in-memory-database, jboss-arquillian, verifyerror

我目前正在解决使用 Arquillian 创建数据库单元测试环境的许多问题。我的项目已经在基于 Seam 3、JSF 和 MySQL 的 Glassfish 3.1.2 环境中运行。但是，当尝试使用 Arquillian 设置测试环境时，事情变得很糟糕。

我的最终目标是使用 Glassfish 嵌入式服务器和嵌入式内存 h2 数据库进行基于 Arquillian 的单元测试。对于嵌入式容器，我并不挑剔，只是 Arquillian JPA 指南建议最小的 Weld 容器不支持 JPA。这就是我选择 Glassfish 的原因。由于我还没有接近持久性上下文的初始化，所以我没有发布我的 persistence.xml 文件。

到目前为止，这是我最终得到的 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>ch.diction</groupId>
    <artifactId>web-portal</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Diction web portal</name>
    <packaging>war</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <jee.version>1.0.0.Final</jee.version>
        <seam.version>3.1.0.Final</seam.version>
        <primefaces.version>3.4</primefaces.version>
        <primefaces.theme.version>1.0.8</primefaces.theme.version>
        <drools.version>5.4.0.Final</drools.version>
        <arquillian.version>1.0.2.Final</arquillian.version>
        <arquillian.weld.version>1.0.0.CR3</arquillian.weld.version>
        <junit.version>4.8.1</junit.version>
        <h2.version>1.3.168</h2.version>
        <weldcore.version>1.1.10-SNAPSHOT</weldcore.version>
        <slf4j.version>1.6.6</slf4j.version>
    </properties>

    <build>
        <sourceDirectory>src/main/java</sourceDirectory>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        <outputDirectory>target/main</outputDirectory>
        <testOutputDirectory>target/test</testOutputDirectory>
        <resources>
            <resource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/main/resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/test/resources</directory>
            </testResource>
            <testResource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/main/resources</directory>
            </testResource>
        </testResources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>http://repository.jboss.org/nexus/content/groups/public</url>
        </repository>
        <repository>
            <id>Java.Net</id>
            <name>Java Maven Repository</name>
            <url>http://download.java.net/maven/2/</url>
        </repository>
        <repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository>
    </repositories>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.jboss.seam</groupId>
                <artifactId>seam-bom</artifactId>
                <version>${seam.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.jboss.arquillian</groupId>
                <artifactId>arquillian-bom</artifactId>
                <version>${arquillian.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>${primefaces.version}</version>
        </dependency>
        <dependency>
            <groupId>org.primefaces.themes</groupId>
            <artifactId>redmond</artifactId>
            <version>${primefaces.theme.version}</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.security</groupId>
            <artifactId>seam-security</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.drools</groupId>
            <artifactId>drools-core</artifactId>
            <version>${drools.version}</version>
        </dependency>
        <dependency>
            <groupId>org.drools</groupId>
            <artifactId>drools-compiler</artifactId>
            <version>${drools.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.drools</groupId>
                    <artifactId>drools-core</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.persistence</groupId>
            <artifactId>seam-persistence</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.solder</groupId>
            <artifactId>solder-impl</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.transaction</groupId>
            <artifactId>seam-transaction</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.international</groupId>
            <artifactId>seam-international-api</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.international</groupId>
            <artifactId>seam-international</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.faces</groupId>
            <artifactId>seam-faces</artifactId>
        </dependency>
        <!-- Test dependencies -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.junit</groupId>
            <artifactId>arquillian-junit-container</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.container</groupId>
            <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
            <version>1.0.0.CR3</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish.main.extras</groupId>
            <artifactId>glassfish-embedded-all</artifactId>
            <version>3.1.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>${slf4j.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>${h2.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>juli</artifactId>
            <version>6.0.13</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

我想对于这篇文章，只有“测试依赖项”很重要（见评论标记），因为实际的主要部署完美无缺。运行以下单元测试：

```
package ch.diction.webportal.test.glossary.model;

import javax.inject.Inject;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.transaction.UserTransaction;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.seam.security.SecurityInterceptor;
import org.jboss.seam.transaction.TransactionInterceptor;
import org.jboss.shrinkwrap.api.Archive;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;

import ch.diction.webportal.glossary.entity.Glossary;
import ch.diction.webportal.glossary.model.IGlossaryDataAccessObject;
import ch.diction.webportal.glossary.model.JpaGlossaryDataAccessObject;
import ch.diction.webportal.security.seam.producer.EntityManagerProducer;

@RunWith(Arquillian.class)
public class JpaGlossaryDataAccessObjectTest {
    @Deployment
    public static Archive<?> createDeployment() {
        final Archive<?> ar = ShrinkWrap
                .create(WebArchive.class, "test.war")
                .addPackage(Glossary.class.getPackage())
                .addClass(SecurityInterceptor.class)
                .addClass(TransactionInterceptor.class)
                .addClass(EntityManagerProducer.class)
                .addClass(JpaGlossaryDataAccessObject.class)
                .addAsWebInfResource("ch/diction/webportal/resources/security/beans.xml", "beans.xml")
                .addAsResource("ch/diction/webportal/resources/persistence/persistence.xml", "META-INF/persistence.xml");
        return ar;
    }

    @Inject
    private IGlossaryDataAccessObject dao;
    @PersistenceContext
    private EntityManager entityManager;
    @Inject
    private UserTransaction userTransaction;

    private void clearData() throws Exception {
        userTransaction.begin();
        entityManager.joinTransaction();
        entityManager.createQuery("delete from Glossary").executeUpdate();
        userTransaction.commit();
    }

    @After
    public void commitTransaction() throws Exception {
        userTransaction.commit();
    }

    private void insertData() throws Exception {
        userTransaction.begin();
        entityManager.joinTransaction();
        // TODO: Insert records
        userTransaction.commit();
        entityManager.clear();
    }

    @Before
    public void preparePersistenceTest() throws Exception {
        clearData();
        insertData();
        startTransaction();
    }

    private void startTransaction() throws Exception {
        userTransaction.begin();
        entityManager.joinTransaction();
    }

    @Test
    public void testCreateEmptyGlossary() {
        final Glossary glossary = new Glossary("empty");
        dao.store(glossary);
    }
} 
```

现在为我提供了以下例外：

```
Caused by: java.lang.VerifyError: class com.sun.enterprise.web.WebModule overrides final method stop.()V
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getConstructor0(Class.java:2714)
    at java.lang.Class.newInstance0(Class.java:343)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.hk2.component.ConstructorCreator.create(ConstructorCreator.java:65)
    ... 79 more 
```

对此，我完全一无所知。我什至不知道java oO中存在这些类型的异常......

在此先感谢您的任何建议！任何帮助表示赞赏！

最好的问候帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:11:43.120

好吧，我最终忽略了 h2database 部分，而是使用了一个由成熟的 Glassfish 3.1.2 容器提供的 MySQL 测试数据库。当 Arquillian 可以使用实际的远程 Glassfish 容器代替时，Arquillian 的嵌入式容器被证明相当麻烦并且不值得麻烦。

这是我最终得到的 POM：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>ch.diction</groupId>
    <artifactId>web-portal</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Diction web portal</name>
    <packaging>war</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <jee.version>1.0.0.Final</jee.version>
        <seam.version>3.1.0.Final</seam.version>
        <primefaces.version>3.4</primefaces.version>
        <primefaces.theme.version>1.0.8</primefaces.theme.version>
        <drools.version>5.4.0.Final</drools.version>
        <arquillian.version>1.0.2.Final</arquillian.version>
        <arquillian.persistence.version>1.0.0.Alpha5</arquillian.persistence.version>
        <junit.version>4.8.1</junit.version>
        <slf4j.version>1.6.6</slf4j.version>
    </properties>

    <build>
        <sourceDirectory>src/main/java</sourceDirectory>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        <outputDirectory>target/main</outputDirectory>
        <testOutputDirectory>target/test</testOutputDirectory>
        <resources>
            <resource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/main/resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/test/resources</directory>
            </testResource>
            <testResource>
                <directory>src/test/resources/container</directory>
            </testResource>
            <testResource>
                <targetPath>ch/diction/webportal/resources</targetPath>
                <directory>src/main/resources</directory>
            </testResource>
        </testResources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>http://repository.jboss.org/nexus/content/groups/public</url>
        </repository>
        <repository>
            <id>Java.Net</id>
            <name>Java Maven Repository</name>
            <url>http://download.java.net/maven/2/</url>
        </repository>
        <repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository>
    </repositories>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.jboss.seam</groupId>
                <artifactId>seam-bom</artifactId>
                <version>${seam.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.jboss.arquillian</groupId>
                <artifactId>arquillian-bom</artifactId>
                <version>${arquillian.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>${primefaces.version}</version>
        </dependency>
        <dependency>
            <groupId>org.primefaces.themes</groupId>
            <artifactId>redmond</artifactId>
            <version>${primefaces.theme.version}</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.security</groupId>
            <artifactId>seam-security</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.drools</groupId>
            <artifactId>drools-core</artifactId>
            <version>${drools.version}</version>
        </dependency>
        <dependency>
            <groupId>org.drools</groupId>
            <artifactId>drools-compiler</artifactId>
            <version>${drools.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.drools</groupId>
                    <artifactId>drools-core</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.persistence</groupId>
            <artifactId>seam-persistence</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.solder</groupId>
            <artifactId>solder-impl</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.transaction</groupId>
            <artifactId>seam-transaction</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.international</groupId>
            <artifactId>seam-international-api</artifactId>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.international</groupId>
            <artifactId>seam-international</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.seam.faces</groupId>
            <artifactId>seam-faces</artifactId>
        </dependency>
        <!-- Test dependencies -->
        <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>${jee.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.junit</groupId>
            <artifactId>arquillian-junit-container</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.container</groupId>
            <artifactId>arquillian-glassfish-remote-3.1</artifactId>
            <version>1.0.0.CR3</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian.extension</groupId>
            <artifactId>arquillian-persistence-impl</artifactId>
            <version>${arquillian.persistence.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.shrinkwrap.resolver</groupId>
            <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

还有我的 test-persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="web-portal-test" transaction-type="JTA">
        <jta-data-source>jdbc/web-portal-test</jta-data-source>
        <properties>
            <property name="eclipselink.logging.level" value="FINE" />
        </properties>
    </persistence-unit>
</persistence> 
```

The lesson I get from this is that Arquillian is too bleeding edge to provoke unnecessary configuration issues. From now on, I'll always start out with a full remote container.

# php - PHP 程序到哪里去了？

> ID：12698957
> 
> 赞同：0
> 
> 时间：2012-10-02T21:55:42.933
> 
> 标签：php, oop, design-patterns, frameworks

我项目中的所有代码都是程序性的。它没有使用任何框架或任何 MVC 结构。大多数 PHP 是带有一些逻辑的表单处理程序。很多这样的代码：

```
<?php

require "headerFile.php";

$user = array(); // filled with user data

if (isset($_POST['submitButton'])) {
    if (isset($_POST['money'])) {
        if (is_numeric($_POST['money'])) { // I don't actually validate numbers this way
            if ($_POST['money'] <= $user['money']) {
                $query = mysql_query("SELECT * FROM someTable WHERE id={$user['id']}");

                if($result = mysql_fetch_array($query)) {
                    if ($someOtherCheck == $user['someOtherData']) {
                        /*
                         * run some queries, give user some item
                         *
                         */
                    } else {
                        echo "This isn't right.";
                    }
                } else {
                    echo "You don't have a row in some table!";
                }
            } else {
                echo "You don't have that much money!";
            }
        } else {
            echo "Enter a valid number";
        }
    } else {
        echo "Enter how much you want to wager.";
    }
}

// some hard coded form goes here

require "footerFile.php";

?> 
```

有一百多种这样的形式和嵌套的 if 处理程序，其中一些与更多/更少的条件相似。

我想开始使用 OOP，并且一直在阅读设计模式，但似乎找不到任何适用于我的项目的东西。

**我正在添加与上面的代码块类似的大量新代码块，我不想复制和粘贴，只是在这里和那里更改一些位，我有什么选择？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:23:17.657

首先，如果您曾经复制和粘贴应该是**BIG RED FLAG**的代码。这应该是一个警告，您需要编写一个可以使用的通用函数，而不是复制和粘贴。

其次，是时候停止使用`mysql_query`-like 函数了。甚至[PHP 页面](http://jp2.php.net/mysql_query)也表示不鼓励使用这些函数。我将开始将您的 SQL 转移到更像 OO 的 PDO。

当我继承了一个看起来像您发布的代码的应用程序时，我写了一篇关于我开始处理事情所采取的步骤的博客文章。它也可能对您有帮助 - [http://mattmccormick.ca/2011/10/13/how-to-refactor-a-php-application/](http://mattmccormick.ca/2011/10/13/how-to-refactor-a-php-application/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:58:59.900

OOP 并不总是与应用程序有关。它是关于可读性和结构的。老实说，您在此处发布的代码的可读性如何？有很多事情正在发生，你需要 10 分钟才能把它们全部破译。但是，如果您将其分解为具有类函数的类，您将能够浏览事物并知道发生了什么。

OOP 并不总是为 php 做很多事情，但它是您想要为几乎所有其他非静态加载语言做的事情。另一个好处是，如果您在一个项目中拥有多个程序员，那么您都可以阅读代码。评论是你的朋友。

您最好的选择是使用带返回的函数。返回该值，然后该函数执行它需要做的任何事情。我个人会做类似的事情

$class->检查

如果错误

$this->error_handler

并且函数错误处理程序执行您希望它对错误执行的任何操作，如果它的死亡或回显然后执行此操作，但是您构建错误处理程序，因此如果您想要更改它，您可以将它放在一个地方而不是 20 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:12:34.377

即使不引入 OOP，您也可以为构建可读的代码创造奇迹。如果它们不相互依赖，则无需嵌套条件。

```
$form_is_valid = true;

if (!isset($_POST['submitButton'])) {
    echo "This isn't right.";
    $form_is_valid = false;
}

if (!isset($_POST['money'])) {
    echo "Enter how much you want to wager.";
    $form_is_valid = false;
} elseif (!is_numeric($_POST['money'])) {
    echo "Enter a valid number";
    $form_is_valid = false;
} elseif (!$_POST['money'] <= $user['money']) {
    echo "You don't have that much money!";
    $form_is_valid = false;
}

if ($form_is_valid) {
    do_stuff_here();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T22:24:36.970

# 关于框架

一个体面的框架将*帮助*您通过关注点分离*更好地*组织代码，但不一定强制执行最佳实践。主观上，我说在最佳实践在您的脑海中根深蒂固之前，需要动手经验并犯很多错误。

尝试将框架仅视为一种交付机制。理想情况下，您的代码不依赖于任何一个框架。这通常意味着使用组件来处理应用程序的不同方面，例如路由、验证、配置、事件、依赖项等。

* * *

# 关于面向对象

我觉得你应该从[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)入手。这将*帮助*您，尽管不能保证，避免犯错误，从而花费您大量的时间。

首先，您的对象应该只有一个职责。例如，*Product*对象不应该负责充当数据存储、持久化自身、处理订单等。

另一个大问题是依赖注入。这对于单元测试你的类来说是巨大的（你应该养成这样做的习惯）。简而言之，不要*在*类中构造依赖关系。预先构造它并通过构造函数参数或 setter 方法将其传递。

构建应用程序的过程值得拥有自己的书籍，所以我不打算在这里全部写完。但是，如果您遵循 SOLID 原则，那么您将在成为更好的开发人员的道路上取得成功。

* * *

# 关于你上面的代码

这种嵌套通常是一种气味，我明白你为什么要问这个问题......

第 1 步是将验证分离到它自己的服务中。至少在 MVC 意义上考虑这一点，您的控制器将只有 [pseudocode] `if ($form->isValid()) { do something }`。仅此一项就消除了您拥有的大量意大利面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T22:19:05.583

看起来您的代码正在组合模型层和视图层的某些组件。您正在对数据库运行查询，并且在同一个地方，您正在包含硬编码的表单。因此，一个不错的起点是将这些任务分成两个单独的类。例如，编写一个类来连接到您的数据库并对其运行查询，并编写另一个类来实际提供您的内容。

我对设计模式的建议是不要太拘泥于细节。相反，试着理解*为什么*某些模式如此有用，以及它们试图解决*什么问题。*很多初学者都陷入了“*如何”*的困境，当一个简单的解决方案就足够了时，他们最终浪费了很多时间来学习框架的细微差别。

最后，当你阅读你的代码时，留意那些可能被构造成一个类的东西。另外，请记住专业化是关键，通过构建非常专业的类，您正在构建可能用于其他项目的模块化组件，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T22:55:23.883

> 我想开始使用 OOP，并且一直在阅读设计模式，但似乎找不到任何适用于我的项目的东西。

您还不必开始`patterns`..了解基础知识，您就可以从那里进步..

这是一个基本的例子

```
if (isset($_POST['submitButton'])) {

    $db = new \mysqli("localhost", "user", "pass", "db");

    $user = new User("Juddling Stack", 123456);
    $user->setMoney(500.01);

    $player = new PlayerRegister($db, $user);

    if (! isset($_POST['money']) || ! is_numeric($_POST['money']))
        $player->addError("Enter Valid Wager Money");

    if ($_POST['money'] <= $user['money']) {
        $player->addError("You don't have that much money!");
    }

    try {
        $player->doSQL();
    } catch ( BaseException $e ) {

        foreach ( $e->getError() as $error ) {
            echo $error, " <br />";
        }
    }
} 
```

[使用的类](http://pastebin.com/k0dd9JyT)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T23:08:57.463

让我们首先说明您遇到的问题*不是*使用 OOP，而是`programming-overhead`用程序员的术语称为 or `spaghetti-code`。

如果您遇到很多*开销*，这意味着浪费时间编写几乎完全相同的代码行，其中只有内容不同，但功能相同。然后开始切割与其功能相同但内容不同的代码。

你说还有更多要复制粘贴，甚至更复杂，我只做`form`验证部分（我称之为阶段 1），这只是一个简单的例子，说明如何应用为你完成所有工作的逻辑提供它期望的输入。一个例子可能比其他例子更优雅。

**以下所有代码均未经测试**

定位具有相同功能的代码的示例。

```
 // functionality on checking values is the same, but it's content is not
 if (isset($_POST['submitButton'])) {
   if (isset($_POST['money'])) {
     if (is_numeric($_POST['money'])) { 
```

和

```
 // though every decision made by its content is only being produced once .. 
      } else
          echo "You don't have that much money!";
    } else
        echo "Enter a valid number";
} else
    echo "Enter how much you want to wager."; 
```

现在的诀窍是找到一个逻辑上解决这个问题的解决方案。PHP的内置函数很多，但首先要掌握如何解决它的想法。一个例子是让每个`key`，比如`submitButton`，`money`有一个等于`not exists`如果没有设置/存在的值，比方说`null`。其次，您正在将值与 提供的键进行比较`$_POST`，所以无论如何......您的`$_POST`数组是决策者。

可以看到一个关于如何使用将默认值应用于键`jQuery`的方法构建库的敏锐示例，因此键始终具有值并且始终通过不首先检查它是否存在来做出决定。`$.extend()`但是PHP也可以。

让我们默认值。

```
$_POST = array_merge(array(
  'submitButton' => null,
  'money' => 0,
  'etc' => '...'
, $_POST); 
```

构建一个函数来验证这个数组现在容易多了，因为你总是可以依赖一个存在的值。

您说您有更多需要验证的表单，接下来要解决的是验证某些字段的功能。

*有效*或*无效*形式的正式表示可以是数组，例如

```
$valid_form = array(
  'submitButton' => array('not_null'),
  'money' => array('not_null','int'),
  'etc' => '...'
); 
```

验证的功能是

```
function validateForm($values, $valid) {
  // error array to be returned
  $error = array();
  // let's iterate over each value, remember we defaulted the $_POST array with
  // all the fields it can have, so all fields should be iterated apon.
  foreach($values as $key => $value) {
    if(array_key_exist($key, $valid)) {
      // logic content can be used by different functions, switch
      // used here for simplicity
      foreach($valid[$key] as $validation) {
        switch($validation) {
          case 'not_null':
            if(is_null($value)) {
              $error[] = "error logic";
              continue; // skip rest
            }
          break;
          case 'etc':
            $error[] = "..";
          break;
        }
      }
    }
  }
  return $error ? $error : true; // true being valid
} 
```

错误处理可以通过多种方式完成，仅举一个简单的示例（取决于该项目的广泛程度），您可以将错误内容绑定到验证键，例如

```
$vfe = $valid_form_errors = array( // $vfe for simlicity's sake
  '__no_error' => 'no error present for "%key%" validation',
  'not_null' => '%key% should not be null',
  'int' => '%key% expects to be an integer'
);

$valid_form = array(
  'submitButton' => array('not_null'),
  'money' => array('not_null','int'),
  'etc' => '...'
); 
```

创建正式错误消息的函数

```
function error_msg($key, $validation) {
  global $vfe;
  // error exists?
  $eE = array_key_exists($validation,$vfe);
  return str_replace('%key%', $eE?$key:$validation, $vfe[$eE?$validation:'__no_error']);
} 
```

而在简单的开关中，错误逻辑是

```
 foreach($valid[$key] as $validation) {
    switch($validation) {
      case 'not_null':
        if(is_null($value))
          $error[] = error_msg($key, $validation);
      break;
      case 'etc':
        $error[] = "..";
      break;
    }
  } 
```

那么你的代码使用不同的逻辑会是什么样子呢？

```
 // first stage ..
    $form_valid = validateForm($_POST, $valid_form);    
    if ($form_valid === true) {
      // second stage, same logic be applied as with validateForm, etc.
      if($_POST['money'] <= $user['money']) {
        $query = mysql_query("SELECT * FROM someTable WHERE id={$user['id']}");

        if($result = mysql_fetch_array($query)) {
            // third stage, same logic can be applied here..
            if ($someOtherCheck == $user['someOtherData']) {

            } else {
                echo "This isn't right.";
            }
        } else {
            echo "You don't have a row in some table!";
        }
    }
    else {
      $errors = $form_valid;
      // error handling here
      print_r($errors);
    } 
```

这一切都取决于您可以定义预期值的具体程度。您可以将每个功能扩展为更具体，例如将错误绑定到表单键，以便您可以在稍后阶段专门针对该输入。他们的关键是消除所有可能的重复，一个函数可能会为你做这一切，只需让他比较你期望的值，让他告诉他实际上有哪个值。

# svn - 如何为 svn external 设置修订号？

> ID：12698959
> 
> 赞同：6
> 
> 时间：2012-10-02T21:55:49.343
> 
> 标签：svn, svn-externals

所以我有这个文件 Mobile.framework 如果我这样做`svn propedit`我得到

```
svn propedit svn:externals 
```

它提出了

```
Mobile.embeddedframework  svn+ssh://../Mobile.embeddedframework 
```

这是指向头部的。

我想编辑它并将其设置为 -r1209。将其设置为修订版的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T22:01:36.167

看看[SVN 手册](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)：

`Mobile.framework svn+ssh://../Mobile.embeddedframework@100`- 注意`@100`.

（或者）

```
svn propedit svn:externals . 
```

可以帮你编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:00:57.420

```
svn propset svn:externals \
Mobile.framework  svn+ssh://../Mobile.embeddedframework@1024 
```

1024 是任意的 :) 将其替换为您要使用的修订号

**编辑** 然后你使用 100

```
svn propset svn:externals \
Mobile.framework  svn+ssh://../Mobile.embeddedframework@100 
```

**再次编辑***哦，是的，我忘记了目标

```
svn propset . svn:externals \
Mobile.framework  svn+ssh://../Mobile.embeddedframework@100 
```

请注意，命令中有一个点。

# c# - 在这种情况下如何更新所有行：为每行计算不同值的 MYSQL + C# 动态代码

> ID：12698960
> 
> 赞同：0
> 
> 时间：2012-10-02T21:55:53.370
> 
> 标签：c#, .net, mysql, sql, sql-update

（使用 mysql + C# .net 连接器）

案子：

**表1输入：**

```
item_id| long_name               |short_name
---------------------------------------------
56763  |MY NEW YORK 34 the great |
76878  |in the paris was really..| 
```

**表 1 输出：**

```
item_id| long_name               |short_name
---------------------------------------------
56763  |MY NEW YORK 34 the great |NEW YORK
76878  |in the paris was really..|paris 
```

我通过 C# 代码计算 short_name

如何使用 UPDATE 而不是 TRUNCATE+INSERT INTO 来完成（实际表有超过 100,000 行，每行都有单独的动态值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:04:45.497

您可以在 a 中加载数据，`DataTable`使用 C# 函数更新列，然后更新数据库，如：

```
SqlDataAdapter.Update(Dataset.Tables["table1"]); 
```

`UPDATE`不过，这将为每一行发送一条语句。你应该考虑一下你的架构。你想达到什么目标？是否可以将逻辑放在触发器而不是 C# 代码中？您可以通过设置另一个条件（最近添加等）来减少必须更新的行数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:05:40.770

我想你有一些算法可以从“长名”返回“短名”。
因此，您需要在 SQL 中实现它，并在 MySQL 服务器上执行它。

如果您用 C# 编写算法 - 您可以让客户端程序（C# 代码）进行计算，然后使用`UPDATE`查询 - 更新对数据库的更改。但是对于大型数据库，这是非常低效和缓慢的（下载 100,000 行相当多） - 所以你应该考虑用 SQL 来编写。

# javascript - 在一页中查看 javascript 变量及其值

> ID：12698961
> 
> 赞同：0
> 
> 时间：2012-10-02T21:56:00.850
> 
> 标签：javascript, variables, firebug

有没有办法查看网站页面中脚本（或脚本）正在使用的所有 javascript 变量？我已经安装了 Firebug，我一直在玩它并在网上搜索，但我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:58:44.370

您必须在页面上有一个脚本，然后在 firebug 中打开脚本并在其中一行设置断点，然后刷新页面。然后，您应该会在右侧看到所有变量的列表。

# spring - 以下切入点有效吗？

> ID：12698964
> 
> 赞同：0
> 
> 时间：2012-10-02T21:56:21.897
> 
> 标签：spring, aop, spring-aop

我在教程中遇到了以下 Spring AOP 切入点：

```
execution(public * * (..)) 
```

据说这会导致所有公共方法的执行。那是对的吗？AFAIK 我们只能拦截公共方法，而那里的公共关键字甚至是非法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:40:36.563

除了@Mario 的回答之外，[AOP 上的 spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)还说以下（强调我的）：

> 注意 由于 Spring 的 AOP 框架基于代理的性质，根据定义，受保护的方法不会被截获，对于 JDK 代理（如果不适用）和 CGLIB 代理（**这在技术上可行但不推荐用于 AOP 目的**）都不会被拦截. 因此，任何给定的切入点都只会与公共方法匹配！
> 
> 如果您的拦截需求包括受保护/私有方法甚至构造函数，请考虑使用 Spring 驱动的原生 AspectJ 编织而不是 Spring 的基于代理的 AOP 框架。这就构成了具有不同特点的不同AOP使用模式，所以在做决定之前一定要先熟悉编织。

另外，切入点语法如下：

```
execution(modifiers-pattern? ret-type-pattern declaring-type-pattern?
          name-pattern(param-pattern) throws-pattern?) 
```

Wherby the will `modifier-pattern`be`public`等`protected`但是可选的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:35:27.497

是的，这似乎是一个有效的切入点，并且完全按照他所说的进行。

此外，值得注意的是，将“public”关键字替换为“protected”是完全合法的，并且仍然有效！奇怪的是，它也适用于“私有”方法......（使用 Spring 3.1.2 + AspectJ 1.6.9 测试）

据我所知，CGLib 代理可用于代理受保护的方法，但是它们只有在从不同的对象实例调用时才有效。所以从技术上讲，应该可以以与公共方法完全相同的方式为受保护方法提供建议。

（正如@beny23 所报告的，建议保护/私有方法不适用于 Spring AOP 代理实现，但仅适用于 Spring 驱动的 AspectJ 编织）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T11:21:02.653

切入点：`designator(modifier returnType package.type.method(params))` 在你的情况下

```
execution(public * * (..)) 
```

将为项目目录中具有任何返回类型的所有公共方法执行 0 到多个参数

# ruby - IO 对象的约定或经验法则？

> ID：12698966
> 
> 赞同：2
> 
> 时间：2012-10-02T21:56:29.047
> 
> 标签：ruby, io

我想知道`IO`在 Ruby 中使用对象的正确“合同”或最佳实践。

我有一堆传递 IO 对象的辅助方法。目前，对于消耗 IO 对象的低级方法，我确保`rewind`在执行`read`. 这感觉很好；它允许我多次调用这些方法而不必担心修改`IO`对象。

以下是合同的一些可能性：

1.  如上所述......如果一个方法调用`read`一个`IO`对象 - 或以另一种方式从它读取 - 那么它应该`rewind`在完成后。这有效地将`IO`对象恢复到其原始状态。这是由不修改参数的 Ruby 约定所激发的。

2.  调用方法应该知道低级方法正在调用`read`，并进行相应的调整。（换一种说法：消费者当心！）

**如果有的话，哪个最好？为什么？**

（一个快速的旁注：`io_copy = io.dup`功能不一样`io.rewind`。）

而且...如果您谈论线程安全，您应该得到加分！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:03:53.280

不回滚 IO 对象是正常的，主要是因为您不能保证 IO 对象完全可以回滚：文件可以，但管道和套接字不能。因此，如果我传递一个 IO 对象，通常的假设是它将被该方法读取（或写入），并最终处于修改状态。因为它首先在逻辑上表示流而不是状态，所以没关系。

线程安全并不会真正以某种方式影响此决定，除非如果多个线程正在访问它，则很难维持“未修改” IO 对象的错觉。即使您不想保持这种错觉，如果它在线程之间共享并且您要读取、写入、倒带或执行任何其他操作来修改其内部状态，您也需要在持有独占锁的同时执行此操作物体。

# c# - 使用 Visual Studio 2010 对数据库进行写访问

> ID：12698976
> 
> 赞同：0
> 
> 时间：2012-10-02T21:57:15.903
> 
> 标签：c#, sql, database, visual-studio-2010

如果我对我的问题有些模糊，请原谅我。我正在关注一个在线[教程](http://www.asp.net/web-forms/tutorials/security/membership/creating-user-accounts-cs)，它向您展示了如何创建自己的用户、权限等（在 VS 中使用 SQL）。当 Visual Studio 尝试写入数据库文件时，我遇到了问题。我已经成功地创建了数据库并使用 Visual Studio 连接到它，但是当我运行代码时，我收到以下错误：

> SqlException (0x80131904): 用户登录失败 用户 'DOMAIN\username' 登录失败

现在，我已经检查并检查了我在 SQL 上的凭据，我可以成功地创建新的数据库、修改等。我真的迷失了问题的根源，我尝试使用不同的凭据无济于事！是否有我必须在 VS 中检查的设置以赋予它对数据库的管理员权限？我尝试了很多不同的方法来解决这个问题，但没有发现我忽略或做错了什么。任何帮助将不胜感激。谢谢！！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:06:03.390

这里有两件事：

1.  您希望网站的会员用户，以及
2.  访问 SQL Server 数据库

您需要为您的数据库提供一个连接字符串，`Membership`提供者将在其中存储用户数据。此用户名/密码不是您`Membership`数据存储中的用户。根据您发布的错误，您的连接字符串似乎正在使用`Integrated Security`，所以它看起来像：

`Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;`

您最可能想要做的是设置 a`SQL Server Login`以放入您的连接字符串。很好的参考： http: [//msdn.microsoft.com/en-us/library/aa337562 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/aa337562(v=sql.105).aspx)

创建登录后，您可以更改连接字符串以使用您创建登录时使用的用户名和密码。像这样的东西：

`Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername; Password=myPassword;`

# jms - weblogic JMS 队列消息未在异常时回滚

> ID：12698979
> 
> 赞同：1
> 
> 时间：2012-10-02T21:57:48.390
> 
> 标签：jms, weblogic-10.x, spring-jms

我们在weblogic10.3.4和JMS队列上设置了，下面是消息监听代码，它使用了Spring JMS，MessageProducer设置为ClientAcknowledgeMode。当发生异常时，消息仍然被移出队列并回滚，下面的代码有什么问题吗？

```
public class EmailListener implements MessageListener,ExceptionListener{

    private EmailSend emailSend;

    @SuppressWarnings("unchecked")
    public void onMessage(Message message){
        ObjectMessage om ;
        try {
            if(message instanceof ObjectMessage) {
                om = (ObjectMessage)message;
                emailSend.sendEmail((Map<String, String>)om.getObject());
                //throw new JMSException("Test");
                 om.acknowledge();

            }
        }
        catch(MailException me) {
            logger.error("Mail server exception in sending email",me);
            throw new RuntimeException(me);
        }catch(JMSException jmse) {
            logger.error("Error in sending email",jmse);
            throw new RuntimeException(jmse);

        }

    }

    public void setEmailSend(EmailSend emailSend){
        this.emailSend = emailSend;
    }

    public void onException(JMSException jmse){
        logger.error("Exception in sending email",jmse);

    }
    public void acknowledge(
    ) throws JMSException{

    }
} 
```

下面是Spring配置

```
<!--Spring JMS Message Listener Container -->
    <bean id="jmsContainer"
        class="org.springframework.jms.listener.DefaultMessageListenerContainer"
        p:autoStartup="true" p:destination-ref="queue"
        p:destinationResolver-ref="jmsDestinationResolver"
        p:connectionFactory-ref="authenticationConnectionFactory"
        p:exceptionListener-ref="emailListener"
        p:messageListener-ref="emailListener" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:47:10.167

你需要澄清一点。标题表明您的消息没有按照应有的方式回滚到队列中，而帖子中的文字则表明消息已回滚。

无论如何，一些使您的回滚行为正确的指示：

不要依赖承认。实际上，它们并不打算成为应用程序逻辑级别的重新交付。您可以[在此处](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jms/listener/AbstractMessageListenerContainer.html)阅读有关它的一些详细信息。因此，acks 不会让您在异常时重新交付，但交易会。

您可以在 DMLC 上设置 p:sessionTransacted="true"。这可能是您想要的 - 如果您遇到异常，消息将回滚到队列中。

如果您开始在其中包含数据库连接，您也许应该从 WebLogic JNDI 存储库中获取 Jta 事务管理器并将其作为 p:transactionManager 属性注入 DMLC，因为会话事务仅支持一个资源事务。

# json - Symfony2 json 响应

> ID：12698981
> 
> 赞同：0
> 
> 时间：2012-10-02T21:57:58.903
> 
> 标签：json, mongodb, symfony

我对以下代码有疑问

```
/** @Route("/{collection}/{id}", name="object", defaults={"_format" = "json"}) */
public function retrieveOne($collection, $id)
{
    $collection = Inflector::classify($collection);

    $object = $this->get('doctrine_mongodb.odm.document_manager')
        ->getRepository('NameBundle:' . $collection)
        ->find($id);

    $response = new Response(json_encode($object));

    return $response;
} 
```

文档

```
use Doctrine\ODM\MongoDB\Mapping\Annotations as Mongo;

/**
* Entrada
*
* @Mongo\Document
*/
class Entrada
{
    /**
     * @Mongo\Id
     */
    protected $id;

    /**
     * @Mongo\String
     * @var int $type
     */
    private $type;

    /**
     * @Mongo\String
     * @var string $nombre
     */
    private $nombre;

   //.. setters and getters
} 
```

我总是进入`{}`响应正文。

**注意**：查询正确返回一个对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:46:28.487

`json_encode`只会对公共属性进行编码。

所以你可以：

*   公开您的财产 (baaahhhh)
*   在您的 Entrada 类上创建一个 toArray() 方法，然后执行`json_encode($object->toArray())`
*   使用很棒的[JMSSerializerBundle](http://jmsyst.com/bundles/JMSSerializerBundle)

# spring - 当我将事务标记为只读时，Spring 会做什么？

> ID：12698985
> 
> 赞同：3
> 
> 时间：2012-10-02T21:58:27.743
> 
> 标签：spring, spring-transactions

当我将事务标记为只读时，Spring 会做什么？我应该期待什么样的改进/缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:56:30.603

根据 Spring 文档，

> 只读状态：当您的代码读取但不修改数据时，可以使用只读事务。在某些情况下，只读事务可能是一种有用的优化，例如当您使用 Hibernate 时。

这个属性只是对提供者的一个提示，行为取决于，在这种情况下，Hibernate。

如果将 readOnly 指定为 true，则刷新模式将在当前 Hibernate Session 中设置为 FlushMode.NEVER，从而防止会话提交事务。

此外，将在 JDBC 连接上调用 setReadOnly(true)，这也是对底层数据库的提示。如果您的数据库支持它（很可能支持），这与 FlushMode.NEVER 的效果基本相同，但它更强大，因为您甚至无法手动刷新。

请参阅[链接](https://javasight.wordpress.com/2009/02/22/transaction-optimization-for-read-only-transaction-spring-readonly-attribute/)了解更多详情。

# python - Python：从具有相同 x 和 y 坐标的 X、Y、Z 文件中删除所有重复点的方法

> ID：12698987
> 
> 赞同：1
> 
> 时间：2012-10-02T21:58:34.427
> 
> 标签：python, arrays, list, numpy, matplotlib

我正在寻找一种从 aa X、Y、Z 文件中删除所有重复点的方法。我希望编码的是删除具有相同 x 和 y 坐标的点。第一个点仍然存在，所有后续重复项都将被删除。

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml
import matplotlib.delaunay
from matplotlib.mlab import griddata

# my area boundary box
xmax, xmin, ymax, ymin = 640000.06, 636999.83, 6070000.3, 6066999.86

# generate fake data
ndata = 500000
# Generate random data to simulate
x = np.random.randint(xmin, xmax, ndata)
y = np.random.randint(ymin, ymax, ndata)
z = np.random.randint(0,20,ndata)
mypoints = zip(x,y,z) 
```

在此先感谢您的帮助和提示！！！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:16:52.320

当您寻求帮助和提示时：

我建议的第一件事是，您应该避免循环遍历 numpy 数组，因为这是低效的，并且 numpy 数组不是为此而设计的。如果您正在使用 numpy 数组，您应该使用向量化的 numpy 函数和索引来对您的点进行排序并删除重复项。

[Pandas](http://pandas.pydata.org/)（建立在 numpy 之上）`DataFrames`有一个内置`drop_duplicates`方法，它应该比 C2H5OH 提出的通过循环遍历数组来获得分数要快。

您可以使用以下方法比较它们`ipython`：

```
import pandas as pd
from collections import OrderedDict
from itertools import groupby 

def with_ordered_dict(x, y, z):        
    tmp = OrderedDict()
    for point in zip(x, y, z):
        tmp.setdefault(point[:2], point)
    return tmp.values()

def with_groupby(x, y, z):        
    keyfunc = lambda p: p[:2]
    mypoints = []                             
    for k, g in groupby(sorted(zip(x, y, z), key=keyfunc), keyfunc):
        mypoints.append(list(g)[0])
    return mypoints

def with_dataframe(x, y, z):
    df = pd.DataFrame({'x':x, 'y':y, 'z':z})
    return df.drop_duplicates(cols=['x', 'y'])

In [140]: %timeit mypoints = with_ordered_dict(x, y, z)
1 loops, best of 3: 2.47 s per loop

In [141]: %timeit mypoints = with_groupby(x, y, z)
1 loops, best of 3: 4.22 s per loop

In [142]: %timeit mypoints = with_dataframe(x, y, z)
1 loops, best of 3: 713 ms per loop 
```

因此，对于 500000 个数据点，pandas 比 with 快三到四倍，比 with 快`OrderedDict`大约六倍`groupby`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:08:15.633

如果您运行 Python 2.7 或更高版本，则可以使用 an`OrderedDict`作为过滤器：

```
from collections import OrderedDict

tmp = OrderedDict()
for point in zip(x, y, z):
    tmp.setdefault(point[:2], point)

mypoints = tmp.values() 
```

除了过滤之外，这还保留了随机序列的顺序。

* * *

另一个收据可以[在 Python 文档](http://docs.python.org/release/2.7.3/library/itertools.html#itertools.groupby)中找到，可以翻译成如下内容：

```
from itertools import groupby

keyfunc = lambda p: p[:2]
mypoints = []
for k, g in groupby(sorted(zip(x, y, z), key=keyfunc), keyfunc):
    mypoints.append(list(g)[0]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:15:28.820

您可以尝试对这些点进行排序，并检测具有相同 X 和 Y 的点。先按 X 排序，然后按 Y 排序，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:48:40.073

只是对 """C2H5OH""" 提出的代码稍作改动，以避免在视频上打印

```
from collections import 
from collections import OrderedDict
for point in zip(x, y, z):
... a = tmp.setdefault(point[:2], point)
... 
mypoints = tmp.values() 
```

# regex - 如何在 .htaccess 重定向中使用两个变量？

> ID：12698993
> 
> 赞同：1
> 
> 时间：2012-10-02T21:59:04.873
> 
> 标签：regex, apache, .htaccess

我正在尝试基于 cookie 值和查询字符串值进行重定向，但似乎无法让这两个值都正确返回。我在用着：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_COOKIE} secret=([^;]+) [AND]
RewriteCond %{QUERY_STRING} ^file=(\w+)$
RewriteRule ^downloads/(.*)/$ /downloads/%1/%2 
```

并使用 URL“/downloads/?file=protected/doc.pdf”。我希望重定向到“/downloads/[secret cookie_val]/protected/doc.pdf”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:02:01.780

没有`[AND]`旗帜。默认情况下，条件是“anded”在一起的。

此外，如果您正在请求`/downloads/?file=protected/doc.pdf`，则您的正则表达式中有一个太多`/`的 's：

```
RewriteEngine on
RewriteBase /
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond %{QUERY_STRING}:::%{HTTP_COOKIE} ^file=(\w+):::secret=([^;]+)
RewriteRule ^downloads/(.*)/?$ /downloads/%2/%1 
```

编辑：刚刚意识到您正在尝试使用 访问以前的`RewriteCond`反向引用`%2`，这将是空白的，因为您已经使用`%{QUERY_STRING}`. 因此，您需要将 2 个变量合并为一个`RewriteCond`并匹配：`%{QUERY_STRING}:::%{HTTP_COOKIE}。然后，您将能够反向引用查询字符串和 cookie。

这`RewriteCond %{ENV:REDIRECT_STATUS} !200`是为了防止重写引擎循环。