# StackOverflow 问答 13557000-13557999

# javascript - 我希望在单击链接时显示随机主页（来自预定义列表）

> ID：13557004
> 
> 赞同：1
> 
> 时间：2012-11-26T00:08:53.293
> 
> 标签：javascript, html, random

我希望在单击链接时显示一个随机主页（来自预定义列表）。真的这是两个问题，所以第一个问题，这可能吗？如果是，那怎么办？

如果文件在不同的文件夹中怎么办？那么代码会像这样吗？

```
var arrPages = [   'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/feyra/feyra.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/rayne/rayne.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/adrienna/adrienna.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/averya/aveyra.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/demaen/demaen.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/phoenyx/phoenyx.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/raven/raven.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/trysten/trysten.html', 'http://neo.graceland.edu/~rmthomas/gothyc%20cafe/xiandre/xiandre.html'];
    document.getElementById('13').onclick = function () {
        var randUrl = arrPages[Math.floor(Math.random() * arrPages.length)];
        // Redirect/popup/new tab
        window.open(randUrl,'test');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:19:31.357

```
// A predefined list of pages
        var arrPages =
            [
                'http://google.com',
                'http://yahoo.com',
                'http://xtra.co.nz',
                'http://asdf.com'
            ];

        // Get the element
        var aLink = document.getElementById('aLink');

        // Bind the click event of aLink
        aLink.onclick = function () {

            // Get an integer that'll determine the index of arrPages to access
            var randomInt = Math.floor(Math.random() * arrPages.length);

            // Get the element with an index of randomInt
            var randUrl = arrPages[randomInt];

            // Here you can do whatever you like with randUrl, in this case 
            //  we'll open a new window that'll point to randUrl
            //   e.g. http://xtra.co.nz
            window.open(randUrl, 'test');
        } 
```

有关用于设置的函数的说明，`randomInt` 请参见[Explain Math.floor(Math.random())](https://stackoverflow.com/questions/8571010/explain-math-floormath-random)

# hadoop - 如何在Reducer的close方法中发射

> ID：13557007
> 
> 赞同：3
> 
> 时间：2012-11-26T00:08:59.543
> 
> 标签：hadoop, mapreduce

`close`继承自的方法`MapReduceBase`没有参数：

```
public void close() 
```

所以我没有`OutputCollector`方法`reduce`：

```
void reduce(K2 key, Iterator<V2> values, OutputCollector<K3, V3> output, Reporter reporter) 
```

在新的 hadoop API 中，我发现 Reducer 类有一个`setup`方法：

```
void setup(Context context) 
```

我认为 context 参数可以发出键和值。问题是我必须使用旧的 API，而且我不知道如何在 close 方法中发出。我想要的是在最后一次调用 reduce 方法并发出数据时运行一些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:18:42.970

不幸的是，您使用的是旧 API。新 API 有一个[`cleanup`](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapreduce/Reducer.html#cleanup%28org.apache.hadoop.mapreduce.Reducer.Context%29)方法（补充`setup`）。

我想知道 Hadoop 是否会让你作弊并将其存储`OutputCollector`在 Reducer 类的私有数据成员中，然后在 close 方法中引用它。我猜你不能，但它可能值得一试。

# ajax - 如何制作三个相互依赖的 JSF h:selectOneMenus

> ID：13557008
> 
> 赞同：1
> 
> 时间：2012-11-26T00:09:04.727
> 
> 标签：ajax, jsf-2, primefaces, selectonemenu, chain

我希望有一个人可以帮助我。这是一种“类别-类型-项目”情况，用户必须从三个不同的下拉列表中进行选择。在 JSF 中，我使用了三个`h:selectoneMenu`. 前两个`h:selectOneMenu`工作正常。[我在这里](https://stackoverflow.com/questions/7556245/jsf-2-0-malformedxml-when-using-ajax-on-a-commandlink)阅读了一个解决方案，关于我第一次尝试时出现的“malformedXML”错误。这就是每个 selectOneMenu 都被`h:panelGorup`. 我实现了它并仅在重新加载（F5）页面后才部分工作，但这不是可接受的解决方案。

这是我正在实现的代码：

```
<p:panel rendered="#{temporadaControllerExt.noHayGrupos}" 
                         style="width: 650px">

                 <h:panelGrid columns="3">
                        <h:panelGroup id="fases">
                            <h:outputLabel value="Fase: "/>
                            <h:selectOneMenu value="#{temporadaControllerExt.faseSelectedFinal}">
                                <f:selectItems value="#{temporadaControllerExt.fases}"/>
                                <f:ajax render="grupos"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup id="grupos">
                            <h:outputLabel value="Grupo: "/>
                            <h:selectOneMenu value="#{temporadaControllerExt.grupoSelected}" 
                                             disabled="#{temporadaControllerExt.grupoListDisable}">
                                <f:selectItems value="#{temporadaControllerExt.gruposDefase}"/>
                                <f:ajax render="jornadas"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup id="jornadas">
                            <h:outputLabel value="Jornada: "/>
                            <h:selectOneMenu value="#{temporadaControllerExt.jornadaSelected}" 
                                             disabled="#{temporadaControllerExt.jornadaListDiseable}">
                                <f:selectItems value="#{temporadaControllerExt.jornadasEnGrupo}"/>
                            </h:selectOneMenu>
                        </h:panelGroup> 
```

当然是不完整的，因为篇幅原因。这是我正在使用的 bean 控制器的一部分：

```
@ManagedBean(name = "temporadaControllerExt")
@SessionScoped
public class TemporadaControllerExt extends TemporadaController {

    private Fase fase;
    private Grupo grupo;
    private Jornada jornada;

    private String faseSelectedFinal;
    private String grupoSelected;
    private String jornadaSelected;
    private boolean grupoListDiseable = true;
    private boolean jornadaListDiseable = true;

    // a lot more declarations, and methods incluiding getters & setters not important for the answer...

    //Entities Cache 
    private Map<String, Fase> mapFases = new HashMap<>();
    private Map<String, Grupo> mapGrupos = new HashMap<>();

    // use to enable the second selectOneMenu
    public void setFaseSelectedFinal(String faseSelectedFinal) {
        this.faseSelectedFinal = faseSelectedFinal;
        this.grupoListDiseable = false;
    }

    public void setGrupoSelected(String grupoSelected) {
        this.grupoSelected = grupoSelected;
        this.jornadaListDiseable = false;
    }

    // methods used to populate the selecOneMenu's
    public List<SelectItem> getFases(){
        List<SelectItem> fasesList = new ArrayList<>();
        fasesList.add(new SelectItem("-- Seleccione Fase --"));
        for(Map.Entry<String, Fase> item : mapFases.entrySet()){
            fasesList.add(new SelectItem(item.getKey()));
        } 
        return fasesList;
    }

    public List<SelectItem> getGruposDefase(){
        List<SelectItem> grupoList = new ArrayList<>();
        grupoList.add(new SelectItem("-- Seleccione Grupo --"));

        Fase faseSel = mapFases.get(faseSelectedFinal);
        List<Grupo> grupoInt = faseSel.getGrupoList();
        for(Grupo grp : grupoInt){
            grupoList.add(new SelectItem(grp.getNombre()));
        }

        return grupoList;
    }

    public List<SelectItem> getJornadasEnGrupo(){
        List<SelectItem> jornadaList = new ArrayList<>();
        jornadaList.add(new SelectItem("-- Seleccione Jornada --"));

        Grupo grupoSel = mapGrupos.get(grupoSelected);
        for(Jornada jor : grupoSel.getJornadaList()){
            jornadaList.add(new SelectItem(jor.getNumero().toString()));
        }
        return jornadaList;
    }
} 
```

如您所见，我使用的是 primefaces (3.4)，并且该面板是根据“noHayGrupos”布尔变量的值呈现的。这工作正常，我的问题是 selectOneMenu 链。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:52:58.240

在对我的问题进行了一些调查后，我找到了解决方案。[我在这个地方](http://www.coreservlets.com/JSF-Tutorial/jsf2/#Ajax)阅读了一篇教程，该部分与 Marty Hall 的“JSF 2.0 中的集成 Ajax 支持”相关。解决方案非常简单：

声明一个布尔变量来确定是否选择了组合框，并询问前一个组合框是否选择了有效的数据，就是这样，一切正常。这里是我在 getGruposDefase() 方法中使用的代码：

```
public List<SelectItem> getGruposDefase() {
    List<SelectItem> grupoList = new ArrayList<>();
    grupoList.add(new SelectItem("-- Seleccione Grupo --"));

    if (!grupoListDiseable && (faseSelectedFinal != null)) {
        Fase faseSel = mapFases.get(faseSelectedFinal);
        List<Grupo> grupoInt = faseSel.getGrupoList();
        for (Grupo grp : grupoInt) {
            grupoList.add(new SelectItem(grp.getNombre()));
        }
    }
    return grupoList;
} 
```

变量 grupoListDisable 用于控制对第二个组合框和 faseSelectedFinal 的访问，例如您是否在第一个组合框中选择了一个有效项。这个简单的解决方案使代码工作顺利。谢谢马蒂大厅

# twitter - 如果超过 twitter 限制，twitter 会在 json 中返回什么？

> ID：13557013
> 
> 赞同：1
> 
> 时间：2012-11-26T00:09:51.557
> 
> 标签：twitter

我需要检测是否超过了 twitter 限制。JSON 响应中是否有代码之类的内容，或者我需要检查 HttpResponse 代码吗？

这是我的网址： [http ://search.twitter.com/search.json?q=android](http://search.twitter.com/search.json?q=android)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T00:13:46.617

根据 twitter API 文档： [https](https://dev.twitter.com/docs/rate-limiting/1.1) ://dev.twitter.com/docs/rate-limiting/1.1 ，它确实回答了 429 HTTP 代码，其中：

```
{
  "errors": [
    {
      "code": 88,
      "message": "Rate limit exceeded"
    }
  ]
} 
```

# ios - 我可以为 Core Plot 散点图的范围设置动画吗？

> ID：13557016
> 
> 赞同：2
> 
> 时间：2012-11-26T00:10:15.600
> 
> 标签：ios, animation, core-plot

我在 iOS 应用程序中有一个 Core Plot 散点图，用于显示一些数据。当视图加载时，我计算绘图的理想范围以适合屏幕上的数据。我允许用户缩放和平移，但包含一个按钮以将图形返回到那些理想范围。

该按钮起作用并且范围适当地改变，但改变可能有点不和谐。由于突然的变化，人们失去了他们对情节的心理“地图”。根据需要为平移和缩放设置动画会更好，就像地图应用程序一样。

我没有看到 Core Plot 内置任何允许动画的东西，但我可能错过了一些东西。有没有办法用Core Plot（或它的一个分支）或一种相当简单的手动方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-31T09:25:39.380

如果现在有人对此感到疑惑，Eric 的修复程序已经到位，您现在可以使用以下代码为范围设置动画：

```
CPTPlotRange *xRange = [CPTPlotRange 
                        plotRangeWithLocation:CPTDecimalFromDouble(location) 
                                       length:CPTDecimalFromDouble(length)];

[CPTAnimation animate:plotSpace // CPTPlotSpace *
             property:@"xRange"
             fromPlotRange:plotSpace.xRange
             toPlotRange:xRange
             duration:5.0
             withDelay:0
             animationCurve:CPTAnimationCurveCubicInOut
             delegate:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:32:12.207

目前可用的最佳解决方案是使用计时器以小幅度调整范围。我正在研究一个更通用的解决方案，但它还没有准备好包含在公共代码中。观看[Core Plot 问题 #398](http://code.google.com/p/core-plot/issues/detail?id=398)上的状态，以了解修复何时可用。

# algorithm - 活动轮廓的贪心算法 - 收缩

> ID：13557018
> 
> 赞同：2
> 
> 时间：2012-11-26T00:10:23.523
> 
> 标签：algorithm, image-processing

我正在研究和实现活动轮廓的贪婪算法，如 Donna Williams 的论文中所述 - A Fast Algorithm For Active Contours and Curvature Estimation。

与另一种实现（由 Kass 等人提出）相比的优点之一应该是沿轮廓曲线均匀分布点。在每次迭代中，每个点都试图自行移动，因此到前一个点的距离尽可能接近平均值。

预计轮廓将围绕图像中的对象绘制，然后围绕它收缩，直到它“附着”到对象边缘。

但问题是轮廓不会缩小。它的演变使得点沿轮廓彼此等距分布，但轮廓不能围绕图像对象收缩，因为点之间的距离将低于平均水平，算法会将它们向后移动。

你对此有什么想法吗？我错过了什么？活动轮廓的其他实现确实会缩小，但有另一个缺点，贪婪算法应该更好更稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:14:31.243

研究人员几乎没有强调他们的新解决方案的缺点。不要太相信这篇论文，如果你没有从其他来源听说过，这个算法是有效的。
如果它在文献中被广泛接受（或者如果我发明了它;-)），我只会实现一个算法。
公司需要一个有效的强大解决方案，研究人员必须发布新的东西，这在实践中可能不太有用，有时只能在特定的测试集上运行良好。

# c - memset 抛出分段错误

> ID：13557021
> 
> 赞同：0
> 
> 时间：2012-11-26T00:10:41.740
> 
> 标签：c, segmentation-fault, memset

我在编写一个从文件中提取字符串作为更大程序的一部分的函数时遇到了一些问题。一切似乎都运行良好，除非我使用 memset 或 bzero 擦除我一直在使用的字符数组。我已经解决这个问题一个多小时了，无论我做什么，我都会遇到段错误。我在 bzero 和 memset 上都收到了这个错误。请帮帮我。我在下面附上我的代码。打印了“Come out of addfront”语句，但没有打印“Done with all bzero”语句。那时我遇到了分段错误。谢谢

```
void extractFileData(FILE *fp , char clientName[])
{
    char tempFileName[50], tempFilePath[100], tempFileSize[50];
    struct stat fileDetails;

    while(fgets(tempFileName, sizeof(tempFileName), fp)!= NULL)
    {
        if((newLinePos = strchr(tempFileName, '\n')) != NULL)
        {
            *newLinePos = '\0';
        }

        strcat(tempFilePath, "SharedFiles/");
        strcat(tempFilePath, tempFileName);

        if(stat(tempFilePath, &fileDetails) < 0)
        {
            perror("Stat error");
            exit(1);
        }

        //Copy it into a string
        sprintf(tempFileSize, "%zu", fileDetails.st_size);
        printf("temp file size: %s\n", tempFileSize);

        //Add all these details to the file list by creating a new node
        addFront(tempFileName, tempFileSize, clientName);

        printf("Come out of addfront\n");

        memset(&tempFileName, 0, 45);
        printf("Done with all bzero\n");
        memset(&tempFileSize, 0, sizeof(tempFileSize));
        memset(&tempFilePath, 0, sizeof(tempFilePath));

        printf("Done with all bzero\n");
    }
} 
```

编辑：

```
void addFront(char fileName[], char fileSize[], char clientName[])
{
    FILENODE* n;
    printf("Inside add front function\n");
    strcpy(n->fileName, fileName);
    printf("n->filename: %s\n", n->fileName);
    strcpy(n->fileSize, fileSize);
    printf("n->filesize: %s\n", n->fileSize);
    strcpy(n->ownerName, clientName);
    printf("n->ownername: %s\n", n->ownerName);
    myFileList.head = n;
    printf("Did it go past myfilelist head = n\n");
    myFileList.numOfNodes++;
    printf("num of nodes: %d\n", myFileList.numOfNodes);
} 
```

我已经为 addFront 函数添加了我的代码。它基本上将细节添加到结构中，该结构`myFileList`基本上是链表的实现。代表列表中的`FILENODE`每个条目。

编辑：

添加我正在使用的结构

```
 struct fileNode
 {
      char fileName[50];
      char fileSize[50];
          char ownerName[25];
      struct fileNode* next;
 };

 struct fileList
 {
      struct fileNode* head;
      struct fileNode* tail;
       int numOfNodes;
 };

 typedef struct fileList FILELIST;
 typedef struct fileNode FILENODE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:58:52.500

我不知道为什么你的程序会在那里崩溃。但我可以在程序中出现另一个错误。先修复另一个错误，看看是否还有问题。

这是**错误**的：

```
strcat(tempFilePath, "SharedFiles/");
strcat(tempFilePath, tempFileName); 
```

`tempFilePath`变量未初始化。这可能*碰巧*不会崩溃，但您不能指望它不会崩溃。它可能会在您的堆栈上乱涂乱画。

改为这样做：

```
snprintf(tempFilePath, sizeof(tempFilePath), "SharedFiles/%s", tempFileName); 
```

最后，不需要将数组归零。数组的内容不会在下一次循环迭代中使用，因此您不妨忽略它们。

```
void extractFileData(FILE *fp , char clientName[])
{
    char tempFileName[50], tempFilePath[100], *newLinePos;
    struct stat fileDetails;
    while (fgets(tempFileName, sizeof(tempFileName), fp)) {
        if ((newLinePos = strchr(tempFileName, '\n')))
            *newLinePos = '\0';
        snprintf(tempFilePath, sizeof(tempFilePath),
                 "SharedFiles/%s", tempFileName);
        if (stat(tempFilePath, &fileDetails) < 0) {
            perror("Stat error");
            exit(1);
        }
        printf("temp file size: %zu\n", tempFileSize);
        addFront(tempFileName, tempFileSize, clientName);
    }
} 
```

该`snprintf()`函数确实是在 C 中进行此类工作的第一选择。与`snprintf()`“显然不会崩溃”的代码相比，编写“显然不会崩溃”的代码很容易。

如果您的代码仍然崩溃，则说明其他地方存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:17:15.713

`addFront()``n = malloc( sizeof *n)`在你对它做任何事情之前需要一个。

# iphone - 您可以从地址在 Mapview 中创建注释吗？

> ID：13557026
> 
> 赞同：0
> 
> 时间：2012-11-26T00:11:59.257
> 
> 标签：iphone, ios, objective-c, xcode, mkmapviewdelegate

我今天已经“谷歌”了几次这个问题，但没有运气。我想知道是否可以从地址而不是使用 lat/Long 方法在 Mapview 中创建注释。我当前的代码如下。

```
//1\. Create a coordinate for use with the annotation
    CLLocationCoordinate2D Sharon;
    Sharon.latitude = 38.952223;
    Sharon.longitude = -77.193646;

    Annotation *myAnnotation = [Annotation alloc];
    myAnnotation.coordinate = Sharon;
    myAnnotation.title = @"Sharon Lodge #327";
    myAnnotation.subtitle = @"McLean, VA"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:18:04.597

像这样试试

```
NSString *location = "some address, state, and zip";
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
            [geocoder geocodeAddressString:location 
                 completionHandler:^(NSArray* placemarks, NSError* error){
                     if (placemarks && placemarks.count > 0) {
                         CLPlacemark *topResult = [placemarks objectAtIndex:0];
                         MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];

                         MKCoordinateRegion region = self.mapView.region;
                         region.center = placemark.region.center;
                         region.span.longitudeDelta /= 8.0;
                         region.span.latitudeDelta /= 8.0;

                         [self.mapView setRegion:region animated:YES];
                         [self.mapView addAnnotation:placemark];
                     }

             ]; 
```

对于注释标题和副标题，

```
CLPlacemark *topResult = [placemarks objectAtIndex:0];

// Create an MLPlacemark

MKPlacemark *placemark = [[MKPlacemark alloc] initWithPlacemark:topResult];

// Create an editable PointAnnotation, using placemark's coordinates, and set your own title/subtitle
MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = placemark.coordinate;
point.title = @"Sample Location";
point.subtitle = @"Sample Subtitle";

// Set your region using placemark (not point)          
MKCoordinateRegion region = self.mapView.region;
region.center = placemark.region.center;
region.span.longitudeDelta /= 8.0;
region.span.latitudeDelta /= 8.0;

// Add point (not placemark) to the mapView                                              
[self.mapView setRegion:region animated:YES];
[self.mapView addAnnotation:point];

// Select the PointAnnotation programatically
[self.mapView selectAnnotation:point animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:52:57.647

**您可以使用google api**或**CLGeocoder**从地址获取 lat long

 ****谷歌API**

[链接 1](http://maps.google.com/maps/api/geocode/xml?address=22%20Cortlandt%20Street,%20New%20York,%20NY&sensor=false) [链接 2](http://maps.google.com/maps/geo?q=jaipur,rajasthanr&output=csv)

**CLG地理编码器**

```
-(id)getAnnotationAryFromAddress
{

        CLGeocoder *geocoder2 = [[CLGeocoder alloc] init];

    NSString *addressString = "string contain address, city, state and zip";

    [geocoder2 geocodeAddressString:addressString
                  completionHandler:^(NSArray *placemarks, NSError *error) {

                      if (error) {
                          //NSLog(@"Geocode failed with error: %@", error);
                          return;
                      }

                      if (placemarks && placemarks.count > 0)
                      {                          
                          CLPlacemark *placemark = [placemarks objectAtIndex:0];

                          CLLocation *location = placemark.location;

                          RegionAnnotation *annotation = [[RegionAnnotation alloc] init];
                          CLLocationCoordinate2D theCoordinate1;
                          theCoordinate1 = location.coordinate;

                          annotation.title = @"Title";

                          annotation.subtitle = @"SubTitle";

                          annotation.tag = i;

                          annotation.coordinate = theCoordinate1;

                          [self.mapView addAnnotation:annotation];
                      }
                  }];
    }

    return self;
} 
```**

# javascript - MVC 2 提交带参数的表单

> ID：13557029
> 
> 赞同：0
> 
> 时间：2012-11-26T00:12:47.220
> 
> 标签：javascript, asp.net-mvc-2

我有两个页面，一个员工编辑页面和一个查看所有员工表格页面。

我想在查看所有员工表页面上，如果用户单击一行，我想向控制器提交员工 ID，然后加载员工编辑页面。我可以获得执行此操作所需的所有信息，但似乎找不到使用附加参数将页面提交给控制器的方法。

有任何想法吗？？？

编辑

基本上我想要做的是，如果单击数据表中员工 id 5 的一行，我想说将表单提交到 /LoadEmployeeInfo/Employee，员工 id 5 作为参数。这可以用javascript完成吗？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:23:24.623

为此，您只需要获取 EmployeeId 然后就可以调用链接

```
 $('#employeeTable tbody tr').click(function ()
 {
    var EmployeeId =$("td:first", this).text();

    window.location = "/yourControllerName/yourActionMethodName/" + EmployeeId; 
  }); 
```

你的动作方法应该有 id 作为方法参数

```
public ActionResult YourActionMethod(int id)
{
       int employeeId = id;

       // Rest of your code
} 
```

# javascript - 防止Android键盘滚动屏幕

> ID：13557034
> 
> 赞同：3
> 
> 时间：2012-11-26T00:13:28.180
> 
> 标签：javascript, android, html, jqtouch

我有一个 web 应用程序，它`input`在屏幕顶部有一个。只要它来`infocus`了，键盘就会弹出并推动屏幕的领域。字段下方是地图，因此尝试向下拖动屏幕只会拖动地图。

我试过以下

```
 $('#searchTextField').bind('focus',function(event){
      setTimeout(function() {
          window.scrollTo(0, 0);
          document.body.scrollTop = 0;
          },1500);
   }); 
```

我增加了一点延迟，因为立即滚动似乎只在一瞬间起作用。延迟确实将一半的视野带入视野，但只是再次反弹回来。每次我在字段中输入一个字母时，屏幕都会随着每个字母进一步向上滚动。

有没有办法阻止屏幕滚动，因为高度永远不会改变。

![屏幕](../Images/aed5c4827787fd1074f1188e80148ba2.png)

# c - 当我添加 0.1 时，浮点数不会改变

> ID：13557036
> 
> 赞同：6
> 
> 时间：2012-11-26T00:13:30.280
> 
> 标签：c

我是c的新手。所以当我写一个小游戏演示时，我遇到了一个非常奇怪的问题。

```
 void testC()
 {
     float a = 825300160;
     float b = a + 0.1;
     assert(a != b);
 } 
```

上面的断言语句不能通过。很奇怪。
我的环境是mac os ml。GCC 4.2.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T00:21:08.223

a 的小数部分`float`由 23 位组成。您需要 30 位来表示 825300160，因此删除了该数字的不太重要的部分。添加`.1`没有任何区别 - 您需要大致添加`32`才能更改数字：

```
float a = 825300160;
float b = a + 31.5;
assert(a != b); // No change is detected
float c = a + 32;
assert(a != c); // Change is detected 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T00:16:51.417

浮点类型的精度不够。如果你真的需要区分 0.1 和 825300160 这样大的数字的加法，请使用 double。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T00:29:03.320

如[本网站](http://www.h-schmidt.net/FloatConverter/IEEE754.html)所示，a 和 b 都将表示为

```
0 10011100 10001001100010001010011 
```

in the IEEE standard for floats, where the first bit is the sign, the next 8 are the exponent, and the remaining 23 the mantissa. There's just not enough space in those 23 bits to represent the difference, because the exponent is so large.

# html - 你如何强制文本换行并保持居中定位？

> ID：13557037
> 
> 赞同：0
> 
> 时间：2012-11-26T00:13:32.890
> 
> 标签：html, css

如何让“SHOP NOW”成为两条不同的线并居中？

这是我的相关代码：

```
.popover{
    position: absolute;
    display: none;
    color: white;
    z-index: 1500;
    text-align: center;
    background-color: black;
    font-family: impact;
    text-decoration: none;
    font-size: 50px;
    opacity: .8;
}
.pb1{
    bottom: 10px;
    width: 260px;
    height: 238px;
}

<div class="popover pb1" ><br/>SHOP NOW</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:19:20.590

我会添加一个`span`标签。[在此处](http://jsfiddle.net/QsPP7/)检查解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:01:25.610

添加以下样式

```
.pb2{
    margin-top: 50px;
} 
```

把内容改成这样

```
<div class="popover pb1" >
    <div class="pb2">SHOP<br /> NOW</div>
</div>​ 
```

# windows-7 - 进程不会结束时该怎么办

> ID：13557043
> 
> 赞同：0
> 
> 时间：2012-11-25T20:57:33.470
> 
> 标签：windows-7, command-line, process, visual-studio-2010, c++

我是一个业余程序员，经常遇到这个问题。我使用visual studio，有时如果我不清除我的输入缓冲区输入会被扔到下一个等待中`cin`，并使我的程序陷入无限循环。

问题是 - 我无法关闭命令提示符。在命令提示符关闭之前，我无法再次运行我的程序（我无法打开另一个命令提示符）。我尝试按 ctrl+alt+del 并在那里结束该过程 - 它什么也不做。我不确定除了重新启动计算机之外还能做什么......当我这样做时，它会自动（并且很快）关闭，但是我无法取消我的重新启动，我只是不得不经历它。

我还能做些什么来结束一个不会结束的进程？

**编辑**不知道为什么将其迁移到此处，我觉得这是寻找 Windows 解决方案的 Windows 问题。我认为超级用户就是为此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:20:12.350

尝试取消勾选项目设置下的“启用 Visual Studio 托管进程”。

使用串行端口时我遇到了同样的问题。我关闭了我的应用程序，当我尝试再次开始调试时它不会覆盖 .exe。这对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:59:06.230

安装这个程序叫做[Process Hacker](http://processhacker.sourceforge.net/)，它可以终止任何进程，我用了很多年了，还没有遇到过这个程序不能终止的进程。它有一个通常可以正常工作的常规“终止”功能，如果不起作用，它有这个“终止”功能，让您可以尝试 10 多种终止顽固进程的方法。

# winforms - DataGridViewComboBoxCell 背面颜色变化

> ID：13557046
> 
> 赞同：3
> 
> 时间：2012-11-26T00:14:42.980
> 
> 标签：winforms, datagridview

DataGridViewComboBoxCell 在应用程序启动时显示正常

![在此处输入图像描述](../Images/2b392d965f5a50be9b58217726deda2e.png)

选择值后，当前行和后续行的背景变为黑色（见下文）。我使用了默认的 DataGridView 并且没有进行字体操作

![在此处输入图像描述](../Images/37dbdbfdb374f9ece958fb9e62e573f4.png)

我尝试在 CellFormatting 和 CellMouseClick 事件中更改颜色。但仍然是相同的行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:42:22.997

显然，这是使用 DataGridViewComboBoxColumn 记录的错误。[链接到解决方案和解决方法](http://nickstips.wordpress.com/2010/12/20/c-datagridviewcomboboxcolumn-drop-down-menu-appears-all-black/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-08T21:20:00.803

[https://nickstips.wordpress.com/2010/12/20/c-datagridviewcomboboxcolumn-drop-down-menu-appears-all-black/](https://nickstips.wordpress.com/2010/12/20/c-datagridviewcomboboxcolumn-drop-down-menu-appears-all-black/)

C#：DataGridViewComboBoxColumn 下拉菜单全部显示为黑色 2010 年 12 月 20 日 — Nick Olsen

我今天使用 DataGridView 遇到了一个问题，其中定义为 DataGridViewComboBoxColumn 的列之一出现，下拉菜单完全黑色，如下所示。

经过一些研究，我发现 DataGridViewComboBoxColumn 中有一个记录在案的错误，如果您正在处理 DataGridView 的 EditingControlShowing 事件，有时会发生这种情况。我正在处理此事件，以便连接 DataGridView 单元格中嵌入的 ComboBox 的 SelectedIndexChanged 事件。

在错误报告中，微软表示他们不会修复此错误，但幸运的是，Debanjan1 已针对此问题发布了解决方法。如果您只是在 EditingControlShowing 事件中将 CellStyle.BackColor 属性设置为 DataGridView.DefaultCellStyle.BackColor，问题就会消失。这如下所示。

private void dataGridViewGLEntries_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e) { ComboBox cmbBx = e.Control as ComboBox;

```
if (cmbBx != null)
{
    cmbBx.SelectedIndexChanged -= ComboBoxCell_SelectedIndexChanged;
    cmbBx.SelectedIndexChanged += ComboBoxCell_SelectedIndexChanged;

    // Fix the black background on the drop down menu
    e.CellStyle.BackColor = this.dataGridViewGLEntries.DefaultCellStyle.BackColor;
} 
```

}

# php - 代码移动到其他服务器后，PHMagick 无法正常工作

> ID：13557047
> 
> 赞同：1
> 
> 时间：2012-11-26T00:14:48.047
> 
> 标签：php, imagemagick, imagick

我为我的一个客户构建了一个 pdf 生成器脚本，一切正常。然后他决定让我从 PDF 创建一个缩略图以显示在另一个页面上，所以我遇到了 PHMagick，这似乎起到了作用。

以下代码**在**我的构建服务器上运行（iPage——我认为它是 debian？），但现在我已将其移至他的 VPS，它不再工作。**FPDF 生成 pdf 没有问题，所以这不是权限问题。**

代码：

```
require("phmagick/phmagick.php");
$pdf->Output("pdf.pdf");

$p = new phmagick('','pdf.png');
$p->debug = true;
$p->resize(800);

$p->acquireFrame("pdf.pdf"); 
```

此代码返回以下错误：

> 执行“转换“pdf.pdf”[0]“pdf.png”时出错
> 返回码：127
> 命令输出：“sh：转换：找不到命令”

自从我从原始服务器移动代码后，我没有更改任何代码，我只是**复制了整个站点**，那么为什么 PHMagick 现在不能工作？如何让它识别插件文件夹中的 convert.php？

*请注意：*我只使用 PHMagick，而不是整个 ImageMagick。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:21:30.083

PHMagic 似乎`convert`在后台使用命令行命令。

很可能该命令根本没有安装在服务器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-11T20:00:56.670

PHMagic 在后台使用命令行`convert`等`composite`...命令。只有在您的服务器中安装了 ImageMagick 时，这些命令才可用。

在您以前的服务器中必须已经安装了 ImageMagick。

**Ipage**有时不会在他们的**VPS**服务器上预安装 ImageMagick。而且您可能无法自己安装它（通过终端登录使用 ... `yum install ImageMagick` ）因为您将被提示输入 root 密码。

要确保 ImageMagick 二进制文件安装在您的服务器中，在您的情况下，`convert`命令，
在 ssh 终端中键入此命令...
`whereis convert`

如果没有显示转换命令的路径，则意味着您需要安装 ImageMagick。

您必须打开支持票并要求他们为您安装它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T00:24:12.557

正如 arkascha 所说，您需要安装 imagemagick。尝试`yum install imagemagick`，因为您正在运行 CentOS。

编辑：可能是不同的大写：ImageMagick

# javascript - 从下拉框中选择时启用字段

> ID：13557057
> 
> 赞同：1
> 
> 时间：2012-11-26T00:16:41.853
> 
> 标签：javascript

我的联系表单页面，用于用户编辑详细信息，有两个下拉字段，“国家”和“城市”。我希望当用户编辑他的详细信息时，“城市”字段将被禁用，直到在“国家”下拉菜单中选择某些内容。

```
<form name="item" action="<?php echo base_url(true) ?>" method="post">

<label><?php _e('Country', 'my_theme'); ?></label>
<?php ItemForm::country_select(get_countries(),user()) ; ?>

<label><?php _e('City', 'my_theme'); ?></label>
<?php ItemForm::cities_select(get_cities(),user()) ; ?>

<button class="itemFormButton" type="submit"></button>
</form> 
```

我在 javascript 中尝试过 '<code>onchange'，可能语法错误……</p>

我怎样才能创建这个？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:45:50.177

这可能会对您有所帮助[http://jsfiddle.net/GZ269/](http://jsfiddle.net/GZ269/)。这使用jquery。

```
Country:<br />
<select id="drop1">
    <option value="">Select Country</option>
    <option value="c1">Country 1</option>
    <option value="c2">Country 2</option>
</select>
<br />
City:<br />
<select id="drop2" disabled >
    <option value="">Select Country</option>
    <option value="c1">Country 1</option>
    <option value="c2">Country 2</option>
</select> 
```

Javascript函数：

```
$("#drop1").change(function(){
    var country = $(this).val();

    if(!country){
        $("#drop2").attr("disabled", true);
        return false;
    }

    $("#drop2").attr("disabled", false);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:25:53.043

你应该用 Javascript 的`onchange`事件来做这件事，当这个事件被触发时，你有两个选择：

*   查询使用 ajax 选择的国家的城市。
    *   如果您支持（几乎）世界上所有国家，这很好。
    *   在这里，您必须开发一个 PHP 脚本，以便在触发此事件时进行查询。
*   与所有支持的国家/地区的城市有一个很好的阵列。
    *   如果需要覆盖许多国家/地区，就太笨重了。
    *   不太灵活，如果您需要为任何国家/地区添加更多城市。

# ruby-on-rails - 我应该在哪里处理 Rails 应用程序中单词的大写？

> ID：13557060
> 
> 赞同：0
> 
> 时间：2012-11-26T00:17:10.320
> 
> 标签：ruby-on-rails, testing, capitalization

据我所知有很多方法：

1.  直接在代码中：这只有在应用程序不需要国际化时才有效，但我认为这不是最好的。
2.  在本地化文件中：我遇到了一个问题，当我将模型国际化时，我有类似`Create %{model}`的按钮，如果模型有多个单词，如果只将第一个字母大写，可能会看起来很尴尬。
3.  在使用 humanize 或 titleize 的代码中：它可能会导致句子大写，如`Create And Continue`，`And`当你想说什么时大写`Create and Continue`or `Create and continue`。
4.  Trough CSS：我认为这是最好的地方，因为大写是页面样式的一部分（或者不是？），它类似于使用 humanize 或 titleize，但你仍然遇到与这些相同的问题。

我已经尝试过它们，但我都遇到了困难。特别是因为存在不应该转换为小写的首字母缩略词以及大写时看起来有点难看的文章。

此外，有时您想使用相同的单词但大写不同。在这种情况下，最好在语言环境文件中使用两个不同的条目，还是使用 3 或 4 来更改它们？

当使用第 4 个选项时，我发现很难编写测试，因为 html 的所有内容都是小写的，但事实并非如此。Cucumber 不解析 CSS 来检查单词的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:59:08.783

将其放入本地化有什么问题？将每个文本按照您希望的方式放置在网站上，然后就可以了。如果您自己编写文本，则以后无需以编程方式对其进行修改。

至于模型：将[人类可读的名称](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)放入每个模型的翻译中。此外，如果您认为它们需要在某些地方以不同的方式大写 - 仅将模型名称大写，而不是整个按钮文本。

# android - jquery mobile and phonegap addJavascriptInterface

> ID：13557062
> 
> 赞同：1
> 
> 时间：2012-11-26T00:17:20.977
> 
> 标签：android, cordova, jquery-mobile

I am developing an Android app with jQuery Mobile and PhoneGap. This is my activity:

```
public class xxx extends DroidGap {
  /** Called when the activity is first created. */
  private String FILENAME = "";
  private static final String HTML_ROOT = "file:///android_asset/www/";
  private Handler handler = null;
  private static WebView webView = null;
  public MyTeam team = null;
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();
    handler = new Handler();
    FILENAME = getString(R.string.fileName);
    //parsing data from file
    String json = readFile();
    team = parseJson(json);
    appView.addJavascriptInterface(this, "MyTeam");
    super.loadUrl("file:///android_asset/www/menu.html");
  }
  public String HW(){
    return team.getTeamName();
  } 
```

And this is my Javascript code in menu.html:

```
$(document).ready(function(){
  alert(MyTeam.HW()); // work perfectly
  alert("name "+MyTeam.team.getTeamName()); //doesn't work!
}); 
```

So the problem is:

*   I can access the HW function that returns me team.getTeamName();
*   I don't have access to the team variable name in my activity because MyTeam.team.getTeamName() doesn't work.

It seems that I can access only functions but not directly public variables.

What I am doing wrong?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:02:09.063

You can't access the Java objects fields directly. It's right there in the documentation of [addJavaScriptInterface](https://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29). Also, if you are using PhoneGap then you should just [write a plugin](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android) and let us worry about the cases where addJavaScriptInterface falls down.

# java - 任何人都可以帮助理解这个伪代码的含义吗？

> ID：13557063
> 
> 赞同：0
> 
> 时间：2012-11-26T00:17:21.757
> 
> 标签：java, recursion, stack, queue

我有一项与 Koch Snowflake 和堆栈/队列有关的任务。问题是我们这里的许多人无法弄清楚作业中给出的伪代码“提示”是什么意思。有人可以帮忙吗？

[http://web.cs.mun.ca/~rod/W12/cs2710/assign/a5/assign5.html](http://web.cs.mun.ca/~rod/W12/cs2710/assign/a5/assign5.html)

```
Add the initial segments, L.add(seg1) ... L.add(segN)
while not L.isEmpty()
    seg = L.remove()
    if seg is smaller than the minimum segment size then
         draw seg, no new segments are created
    else
        create four new segments according to
        the rules for Koch snowflakes
        add these new segments to L 
```

最令人困惑的部分是“如果 seg 小于最小段大小”......不知道我需要比较什么来写这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:21:46.733

最小段大小显然是算法的可配置参数，它指定绘制雪花的精细细节级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:29:22.593

段是线段：来自您的文档：

> “Segment 是表示线段的类”

所以它将是在屏幕上绘制的一条线。
你应该先看看科赫雪花的样子：[http ://en.wikipedia.org/wiki/Koch_snowflake](http://en.wikipedia.org/wiki/Koch_snowflake)

现在更容易理解了：”

> 如果 seg 小于最小段大小，则

这就是所谓的“中断条件”，这意味着线条足够小，可以在屏幕上绘制。（否则它将被细分，请参阅上面的 Wiki 链接）。

# javascript - 将 json 数据格式化为驼峰式

> ID：13557064
> 
> 赞同：16
> 
> 时间：2012-11-26T00:17:26.563
> 
> 标签：javascript, jquery

我从服务器收到一个 json 响应，看起来像这样：

```
{
    "Response": {
        "FirstName": "John",
        "LastName": "Smith",
        "NickNames": {
            "NameOne": "Johnny",
            "NameTwo": "JohnS",
            "NameThree": "Smithy"
        },
        "Success": true,
        "Errors": []
    }
} 
```

有没有办法可以通过一个函数运行这个响应，以便每个键值对的键都是驼峰式的？

所以输出看起来像：

```
{
    "response": {
        "firstName": "John",
        "lastName": "Smith",
        "nickNames": {
            "nameOne": "Johnny",
            "nameTwo": "JohnS",
            "nameThree": "Smithy"
        },
        "success": true,
        "errors": []
    }
} 
```

如果有人能指出我正确的方向，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-26T00:22:26.780

您将提供`JSON.parse`一个 reviver 函数，该函数将值分配给小写的新属性。

```
function toCamelCase(key, value) {
  if (value && typeof value === 'object'){
    for (var k in value) {
      if (/^[A-Z]/.test(k) && Object.hasOwnProperty.call(value, k)) {
        value[k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
        delete value[k];
      }
    }
  }
  return value;
}

var parsed = JSON.parse(myjson, toCamelCase); 
```

有关它如何[在这个 SO answer 中](https://stackoverflow.com/a/5480605/1585)工作的更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-26T15:01:11.637

用户“@I Hate Lazy”建议的方法——使用“reviver”功能是正确的。但是他的功能对我不起作用。

也许是因为我正在解析一个 JSON 数组。我还使用了[Resharper](https://www.jetbrains.com/resharper/features/javascript_typescript.html)，它抱怨代码有异味 :)（“并非所有代码路径都返回一个值”）。所以我最终使用了另一个对**我有用的**[SO 问题](https://stackoverflow.com/questions/5480570/json-stringify-change-the-case-of-the-key)中的函数：

 **```
function camelCaseReviver(key, value) {
    if (value && typeof value === 'object') {
        for (var k in value) {
            if (/^[A-Z]/.test(k) && Object.hasOwnProperty.call(value, k)) {
                value[k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
                delete value[k];
            }
        }
    }
    return value;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-15T18:41:12.913

这是一种功能递归（ES6）方法。

```
function convertKeysToCamelCase(o) {
  if (o === null || o === undefined) {
    return o;
  } else if (Array.isArray(o)) {
    return o.map(convertKeysToCamelCase);
  }
  return typeof o !== 'object' ? o : Object.keys(o).reduce((prev, current) => {
    const newKey = `${current[0].toLowerCase()}${current.slice(1)}`;
    if (typeof o[current] === 'object') {
      prev[newKey] = convertKeysToCamelCase(o[current]);
    } else {
      prev[newKey] = o[current];
    }
    return prev;
  }, {});
}

// successfully tested input
const o = {
  SomeNum: 1,
  SomeStr: 'a',
  SomeNull: null,
  SomeUndefined: undefined,
  SomeBoolean: true,
  SomeNaN: NaN,
  NestedObject: {
    SomeSentence: 'A is for apple',
    AnotherNested: {
      B: 'is for blahblah'
    }
  },
  NumArray: [1, 2, 3, 4],
  StringArray: ['a', 'b', 'c'],
  BooleanArray: [true, false],
  ArrayOfArrays: [[1,2,], ['a','b']],
  ObjectArray: [{Foo:'bar'}, {Hello:'world', Nested:{In:'deep'}}],
  MixedArray: [1,'a', true, null, undefined, NaN, [{Foo:'bar'}, 'wat']]
}

const output = convertKeysToCamelCase(o);

console.log(output.mixedArray[6][0].foo); // 'bar' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-12T00:50:32.660

@adamjyee您的解决方案除了嵌套的整数数组外有效。一个小的修复可能是：

```
function convertKeysToCamelCase (o) {
    if (o === null) {
      return null
    } else if (o === undefined) {
      return undefined
    } else if (typeof o === 'number') {
      return o
    } else if (Array.isArray(o)) {
      return o.map(convertKeysToCamelCase)
    }
    return Object.keys(o).reduce((prev, current) => {
      const newKey = `${current[0].toLowerCase()}${current.slice(1)}`
      if (typeof o[current] === 'object') {
        prev[newKey] = convertKeysToCamelCase(o[current])
      } else {
        prev[newKey] = o[current]
      }
      return prev
    }, {}) 
```

[评论权但缺乏评论特权:(]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T00:20:25.313

您需要编写一个递归函数来遍历树并返回一个新树，其中对象中的键已被更新。递归函数将调用自身来处理它遇到的任何子对象。**

# c++ - 内置函数来组合 OpenCV 中的仿射变换？

> ID：13557066
> 
> 赞同：5
> 
> 时间：2012-11-26T00:18:13.707
> 
> 标签：c++, opencv

Opencv中是否有任何结合仿射变换的内置函数？
我也可以自己编写，但我会尽可能使用库函数。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:14:50.120

现在我这样做：

*   我分配 a1, a2, r 矩阵，所有 3x3 眼睛，
*   我用变换矩阵 a1aff、a2aff 替换了前两个的顶部。
*   r = a2*a1
*   返回 r 的前两行。

这个解决方案现在就可以了。

# jquery - Fancybox 2.1.3 集成到现场问题

> ID：13557074
> 
> 赞同：-2
> 
> 时间：2012-11-26T00:19:14.957
> 
> 标签：jquery, fancybox

嗨，所有花式盒子爱好者。我创建了一个在本地运行良好或在服务器上运行的脚本。当我尝试将它集成到已经使用 jQuery v.1.7.1 的现有网页上时，我在 head 部分的所有 js 和 css 代码下方添加了以下几行：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<link rel="stylesheet" href="fancybox/jquery.fancybox.css?v=2.1.3" type="text/css" media="screen" />
<script src="fancybox/jquery.fancybox.pack.js?v=2.1.3"></script>
<script src="script.js"></script> 
```

script.js 完成所有效果。它还创建了一个隐藏的标签，用于在鼠标事件发生时触发。这个a标签已经创建成功，但是fancybox无法运行它的效果。这与 jQuery v.1.7.1 或其他情况有关吗？如果 jQuery 确实重要，如果他们使用古老版本的 jQuery，我怎么能在不同的网页中进行这项工作，即使我也包含 v.1.8.2？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:23:54.420

是的，两个 jQuery 版本不应该一起加载。您的脚本无法知道它们应该使用哪个。

你应该有一个本地版本的站点来测试，或者至少有一个只有你知道的在线版本（例如在子域上）。

尝试只使用最新的 jQ - 一定要测试一切。

# redis - Redis 集合与哈希

> ID：13557075
> 
> 赞同：89
> 
> 时间：2012-11-26T00:19:18.347
> 
> 标签：redis

在许多 Redis 教程（例如[这个](http://redis.io/topics/twitter-clone)）中，数据存储在一个集合中，但多个值组合在一个字符串中（即用户帐户可能作为两个条目存储在集合中，“user:1000:username”和“用户：1000：密码”）。

但是，Redis 也有哈希。似乎拥有一个“user:1000”散列会更有意义，其中包含一个“用户名”条目和一个“密码”条目。您无需连接字符串来访问特定值，而是直接在哈希中访问它们。

那么为什么不使用那么多呢？这些只是旧教程吗？还是 Redis 哈希有性能问题？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-26T01:33:04.613

Redis 哈希非常适合存储更复杂的数据，就像您在问题中建议的那样。我正是用它们来存储具有多个需要缓存的属性的对象（特别是电子商务网站上特定产品的库存数据）。当然，我可以使用串联的字符串——但这会给我的客户端代码增加不必要的复杂性，并且无法更新单个字段。

你可能是对的——这些教程可能只是在引入哈希之前。它们显然是为存储对象表示而设计的：http: [//oldblog.antirez.com/post/redis-weekly-update-1.html](http://oldblog.antirez.com/post/redis-weekly-update-1.html)

我想一个问题是与简单的 String SET 命令相比，插入新项目时 Redis 必须服务的命令数量（n 个命令，其中 n 是哈希中的字段数）。我还没有发现这对每天访问 Redis 约 100 万次的服务来说是个问题。对我来说，使用正确的数据结构比对性能的影响可以忽略不计更重要。

（另外，请参阅我关于 Redis Sets 与 Redis Strings 的评论 - 我认为您的问题是指字符串，但如果我错了，请纠正我！）

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-07-01T08:17:41.487

哈希是在 Redis 中存储数据的最有效方法之一，甚至建议尽可能有效地使用它们。

[http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)

> ## 尽可能使用哈希
> 
> 小散列被编码在一个非常小的空间中，因此您应该尝试尽可能使用散列来表示您的数据。例如，如果您在 Web 应用程序中有代表用户的对象，而不是对姓名、姓氏、电子邮件、密码使用不同的键，而是使用包含所有必填字段的单个哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-16T05:09:42.800

**用例比较：**

Sets 提供了一个语义接口来将数据作为一个集合存储在 Redis 服务器中。此类数据的用例更多用于分析目的，例如有多少人浏览产品页面以及有多少人最终购买了该产品。

哈希提供了一个语义接口来在 Redis 服务器中存储简单和复杂的数据对象。例如，用户资料、产品目录等。

参考：[学习 Redis](https://rads.stackoverflow.com/amzn/click/com/1783980125)

# jquery - div 像在 tn3gallery 中一样在悬停时滚动

> ID：13557080
> 
> 赞同：1
> 
> 时间：2012-11-26T00:20:12.853
> 
> 标签：jquery, scroll, hover, smooth

我需要像这里一样在我的画廊拇指滚动中暗示：[http ://www.tn3gallery.com/examples/tn3_eris_horizo​​ntal/](http://www.tn3gallery.com/examples/tn3_eris_horizontal/)

我已经尝试过平滑的 div 滚动，但这并不是我想要的，有人知道这是如何完成的吗？

# ruby - Ctrl-c 不再杀死我的程序

> ID：13557085
> 
> 赞同：0
> 
> 时间：2012-11-26T00:20:56.617
> 
> 标签：ruby, raw-sockets

我正在编写一个使用 PacketFu 侦听数据包的 ruby​​ 后门程序。

应用程序正常工作，但由于某种原因它不会在中断时退出 (ctrl+c)

这是似乎不受中断影响的代码部分。如果我完全清空每个循环都没关系，它总是会停止忽略中断。

有任何想法吗？

编辑：我可以在执行 packet.stream.each 循环时正确捕获中断（强制一些 TCP 流量）。似乎 PacketFu 在等待新数据包时所做的一切都使其免受中断的影响。我想我现在会忽略它，如果有人知道 PacketFu 代码可能会导致这种情况，我很想知道！

PS。我在下面包含了整个服务器代码，以防有人想自己测试。

代码片段：（整个文件见下文）

```
begin 
# Start listening for connection packets via TCP
print "starting up\n"
capturedTCP = PacketFu::Capture.new(:iface => $config[:iface], :start => true, :promisc => true, :filter => "tcp")
print "about to capture\n"
capturedTCP.stream.each { |packet|
    puts "Got one!"
    pkt = Packet.parse packet
    # Check that it is a TCP packet?
    if pkt.is_tcp?
        # Is it one of our SYN packets?
        if pkt.tcp_flags.syn == 1 && pkt.ip_id == $identKey
            # TODO: Respond with SYN/ACK
            flags = [1,0,0,0,1,0]
            payload = ""
            tcpResp = tcpConstruct($identKey,srcIP,80,dstIP,Random.rand(65535),flags, payload)
            tcpResp.to_w # Sent
            # TODO: Use thread instead.
            dataListener($identKey,dstIP,dstPort)

        end
    end
}
rescue Interrupt => e
puts "Interrupted by user"
exit 0
end 
```

整个文件：

```
require 'rubygems'
require 'packetfu'
require 'thread'

include PacketFu

#TODO: Move these functions to a diff file
# Utility function for loading latest config
def loadConfig(filePath)
#TODO: Load up file and get config
#For now just hard coded.
$iName = "eth0"
identKey = 12345
listenPortMain = "80" # Port to listen for connection requests
processName = "xyz" # Change process name to hide.
filterTCP = "tcp and port #{listenPortMain}"
userCmdField = "src-port" # Options: src-port, dst-port
userCmdRun = "20"
end

# Function for handling client session 
def clientListen(ip,port)
# Start listening for connection packets via UDP
capturedUDP = PacketFu::Capture.new(:iface => config[:iface], :start => true, :promisc => true, :filter => "udp and port #{port} and src host #{ip}")

capturedUDP.stream.each { |packet|
    pkt = Packet.parse packet
    # Check that it is a UDP packet
    if pkt.is_udp?
        # Is it one of our UDP packets?
        if pkt.ip_id == identKey
            # Get the data
            data = pkt.payload()
            # Look for the command type
            if userCmdField == "src-port"
                cmdFieldVal = pkt.udp_src
            end
            if userCmdField == "dst-port"
                cmdFieldVal = pkt.udp_dst
            end
            # Command processing
            if userCmdField == userCmdRun
                cmdDataChrs = [];
                # Check for sequence number
                seqCurrent = pkt.payload[0].unpack("H*")[0].to_i
                seqTotal   = pkt.payload[1].unpack("H*")[0].to_i
                dataLen    = (pkt.payload[2].unpack("H*").chr + pkt.payload[2].unpack("H*").chr).to_i
                while pos <= dataLen do
                    cmdDataChrs.push(pkt.payload[pos])
                    pos = pos + 1
                end
                cmdData = cmdDataChrs.unpack("H*")
                print "Got command: #{cmdData}"
            end
        end
    end
}
end

#Construct TCP Packet
def tcpConstruct(identKey,srcIP,srcPort,dstIP,dstPort,flags, payload)
#--> Build TCP/IP

#- Build Ethernet header:---------------------------------------
pkt = PacketFu::TCPPacket.new(:config => $config , :flavor => "Linux")
# pkt.eth_src = "00:11:22:33:44:55" # Ether header: Source MAC ; you can use: pkt.eth_header.eth_src
# pkt.eth_dst = "FF:FF:FF:FF:FF:FF" # Ether header: Destination MAC ; you can use: pkt.eth_header.eth_dst
pkt.eth_proto   # Ether header: Protocol ; you can use: pkt.eth_header.eth_proto
#- Build IP header:---------------------------------------
pkt.ip_v = 4    # IP header: IPv4 ; you can use: pkt.ip_header.ip_v
pkt.ip_hl = 5   # IP header: IP header length ; you can use: pkt.ip_header.ip_hl
pkt.ip_tos  = 0 # IP header: Type of service ; you can use: pkt.ip_header.ip_tos
pkt.ip_len  = 20    # IP header: Total Length ; you can use: pkt.ip_header.ip_len
pkt.ip_id = identKey    # IP header: Identification ; you can use: pkt.ip_header.ip_id
pkt.ip_frag = 0 # IP header: Don't Fragment ; you can use: pkt.ip_header.ip_frag
pkt.ip_ttl = 115    # IP header: TTL(64) is the default ; you can use: pkt.ip_header.ip_ttl
pkt.ip_proto = 6    # IP header: Protocol = tcp (6) ; you can use: pkt.ip_header.ip_proto
pkt.ip_sum  # IP header: Header Checksum ; you can use: pkt.ip_header.ip_sum
pkt.ip_saddr = srcIP    # IP header: Source IP. use $config[:ip_saddr] if you want your real IP ; you can use: pkt.ip_header.ip_saddr
pkt.ip_daddr = dstIP    # IP header: Destination IP ; you can use: pkt.ip_header.ip_daddr
#- TCP header:---------------------------------------
pkt.payload = payload   # TCP header: packet header(body)
pkt.tcp_flags.ack = flags[0]    # TCP header: Acknowledgment
pkt.tcp_flags.fin = flags[1]    # TCP header: Finish
pkt.tcp_flags.psh = flags[2]    # TCP header: Push
pkt.tcp_flags.rst = flags[3]    # TCP header: Reset
pkt.tcp_flags.syn = flags[4]    # TCP header: Synchronize sequence numbers
pkt.tcp_flags.urg = flags[5]    # TCP header: Urgent pointer
pkt.tcp_ecn = 0 # TCP header: ECHO
pkt.tcp_win = 8192  # TCP header: Window
pkt.tcp_hlen = 5    # TCP header: header length
pkt.tcp_src = srcPort   # TCP header: Source Port (random is the default )
pkt.tcp_dst = dstPort   # TCP header: Destination Port (make it random/range for general scanning)
pkt.recalc  # Recalculate/re-build whole pkt (should be at the end)
return pkt
end

def dataListener(identKey,dstIP,dstPort)
# Listen for UDP data packets
print "Listening for Data from #{dstIP}\n"
capturedUDP = PacketFu::Capture.new(:iface => $config[:iface], :start => true, :promisc => true, :filter => "udp and port #{dstPort}")

capturedTCP.stream.each { |packet|
    pkt = Packet.parse packet
    if pkt.ip_id == identKey
        # Get Packet Type
        if userCmdField == "src-port"
            dataType = pkt.udp_src
        elsif userCmdField == "dst-port"
            dataType = pkt.udp_dst
        end

        if dataType == userCmdRun
            cmdLen = pkt.payload[0].unpack("c*")
            cmd = ""
            while i <= cmdLen do
                cmd += pkt.payload[i].unpack("h*")
            end
            print "Command: #{cmd}\n"
        end
    end
}
end
# - - - - Begin Main

# Get config from file
loadConfig("/path/to/file.txt")

#$config = PacketFu::Config.new(PacketFu::Utils.whoami?(:iface=> iName)).config # set interface
$config = PacketFu::Config.new(:iface=> $iName).config # use this line instead of above if you face `whoami?': uninitialized constant PacketFu::Capture (NameError)

#TODO: Mask process name from config

# Create sessions array (Holds threads)
sessions = []
Signal.trap('INT') { exit 0 }
begin 
# Start listening for connection packets via TCP
print "starting up\n"
capturedTCP = PacketFu::Capture.new(:iface => $config[:iface], :start => true, :promisc => true, :filter => "tcp")
print "about to capture\n"
capturedTCP.stream.each { |packet|
    puts "Got one!"
    pkt = Packet.parse packet
    # Check that it is a TCP packet?
    if pkt.is_tcp?
        # Is it one of our SYN packets?
        if pkt.tcp_flags.syn == 1 && pkt.ip_id == $identKey
            # TODO: Respond with SYN/ACK
            flags = [1,0,0,0,1,0]
            payload = ""
            tcpResp = tcpConstruct($identKey,srcIP,80,dstIP,Random.rand(65535),flags, payload)
            tcpResp.to_w # Sent
            # TODO: Use thread instead.
            dataListener($identKey,dstIP,dstPort)
        end
    end
}

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:23:44.937

如果您的程序在某种 Unix 上运行，您可以捕获 INT 信号（由 Ctrl-C 发送）并`exit`显式调用。

`begin`把它放在你的块之前或之后：

```
Signal.trap('INT') { exit 0 } 
```

此外，您可以在退出程序之前进行一些清理：

```
Signal.trap('INT') do
  # some cleanup here
  puts "Interrupted by user"
  exit 0
end 
```

[更多关于 Ruby 中的信号](http://www.ruby-doc.org/core-1.9.3/Signal.html)

[Unix 信号列表](http://en.wikipedia.org/wiki/Unix_signal)

# jquery - jQuery动画滞后

> ID：13557087
> 
> 赞同：2
> 
> 时间：2012-11-26T00:21:11.753
> 
> 标签：jquery, animation, lag

我正在为 picbox.us 网站制作一个画廊，当我将鼠标悬停在图像上时，我变得迟钝。它应该只是将我的图像信息的高度设置为 40，仅此而已。但有时它会滞后或延迟。这是页面：http: [//zachrip.net/widgets/gallery/](http://zachrip.net/widgets/gallery/)

这是与该问题有关的唯一代码：

查询：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(".image").hover(
function () {
$("#" + this.id + "info").animate({height: '40'}, 700);
}
);
$(body).hover(
function(){
    $(".imageinfo").animate({height: '0'}, 700);
}
);
$("#container").hover(
function(){
    $(".imageinfo").animate({height: '0'}, 700);
}
);
});
</script> 
```

html:

```
<div id='container'>
<center>
<p>Beta testing image gallery</p>
<table cellpadding="1" cellspacing="5">
<tr>
<td><center><img class="image" id="1" src="img1.png"/></center><p id="1info" class="imageinfo">Uploaded by muny</p></td>
<td><center><img class="image" id="2" src="img1.png"/></center><p id="2info" class="imageinfo">Uploaded by zachrip</p></td>
<td><center><img class="image" id="3" src="img1.png"/></center><p id="3info"  class="imageinfo">Uploaded by seanrice</p></td>
</tr>
<tr>
</table>
</center>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:50:20.030

我会建议这样的事情：

[http://jsbin.com/uzucuh/1/edit](http://jsbin.com/uzucuh/1/edit)

```
$('.imgBox').on('mouseenter mouseleave',function( ev ){  
  var mEnt = ev.type=='mouseenter'; 
  $('span', this).stop().animate({bottom: mEnt? 40 : 0 }, 300);  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:00:58.263

试试这个：

```
$(document).ready(function() {
    $(".image").mouseenter(
    function() {
        $("#"+this.id+"info").animate({
            height: '40'
        }, 500);
    });
    $(".image").mouseleave(
    function() {
        $("#"+this.id+"info").animate({
            height: '0'
        }, 500);
    });
});​ 
```

上面的另一种写法是：

```
$(document).ready(function() {
  $(".image").hover(
    function() {
      $("#"+this.id+"info").animate({
        height: '40'
      }, 500);
    },
    function() {
      $("#"+this.id+"info").animate({
        height: '0'
      }, 500);
    });
});​ 
```

基本上我用鼠标进入和退出事件替换了你的悬停事件。我还将完成动画的时间从 700 毫秒减少到 500 毫秒。

附带说明一下，您的源代码需要进行一些修改。你`jquery-ui.min.js`在你的标题中导入，`query.js`在页面的一半处。`query.js`您应该在页脚和`ui.min.js`之后导入`query.js`。`includes/jquery.inview.js`通往和的路径`includes/muny.js`也是错误的。

# c# - 检查方法是否通过反射实现 IDisposable.Dispose

> ID：13557092
> 
> 赞同：7
> 
> 时间：2012-11-26T00:22:18.637
> 
> 标签：c#, reflection, aop

是否有比以下更正式/故障安全的方法来检查 a 是否`System.Reflection.MethodInfo`引用类的实现`IDisposable.Dispose`？

```
System.Reflection.MethodInfo methodInfo;
methodInfo = ...; //methodInfo obtaining code here
bool isDisposeMethod = methodInfo.Name == "Dispose"; 
```

我已经知道该类实现`IDisposable`并且因此`Dispose`存在，但是我使用的是 PostSharp 方面，它应该在调用时执行特殊功能`Dispose`（与任何其他类方法相比）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T00:27:12.493

有：

```
class DisposableObject : IDisposable
{
    public void Dispose()
    {
        //...
    }
} 
```

你可以做：

```
Type t = typeof(DisposableObject);

InterfaceMapping m = t.GetInterfaceMap(typeof(IDisposable));
MethodInfo mi = t.GetMethod("Dispose");

Console.WriteLine(mi == m.TargetMethods[0]); //true 
```

所以，我想你的课堂上有`MethodInfo`for some`Dispose`方法（这里`mi`，简单地通过`GetMethod(string)`）。然后，您需要通过[Type.GetInterfaceMap Method](http://msdn.microsoft.com/en-us/library/system.type.getinterfacemap.aspx)为声明类型（此处）中的实现获取一个[InterfaceMapping Structure](http://msdn.microsoft.com/en-us/library/system.reflection.interfacemapping.aspx)对象。在那里你引用了真正实现接口的方法。所以，我们只需要检查你的引用是否等于as声明了一个方法。`IDisposable``DisposableObject``TargetMethods``m.TargetMethods[0]``IDisposable`

来自 MSDN：

> **接口映射结构**
> 
> 检索接口到实现该接口的类的实际方法的映射。
> 
> 当一个类型实现的接口方法使用的方法名称不是由接口指定的方法名称时，或者当一个类型实现具有同名方法的多个接口时，使用 InterfaceMapping 结构。
> 
> 要获取 InterfaceMapping 结构，请使用 Type.GetInterfaceMap 方法。

* * *

一句话：如果您的类可以`IDisposable`显式实现，那么`m.TargetMethods[0]`将引用显式实现。所以，我不确定是否有任何方法可以得到它`MethodInfo`（`InterfaceMapping`参见[使用反射查找实现显式接口的方法](http://weblogs.asp.net/rosherove/archive/2008/10/15/use-reflection-to-find-methods-that-implement-explicit-interfaces.aspx)）。这种情况可能容易出错。检查您的具体问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T00:34:46.477

我认为正确的方法是`GetInterface("IDisposable")`在类型上，然后根据接口对象获取方法信息。比您应该能够将手头的方法与从接口返回的方法进行比较。

仅检查名称是不够的

*   可能有其他具有相同名称但参数不同的方法
*   接口可以显式实现。

这是显示这两个问题的类：

```
class Test : IDisposable
{
   public void Dispose(){}
   public void Dispose(bool flag){}
   void IDisposable.Dispose(){} 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T00:53:05.013

我认为这可能适用于您的情况，它不是最漂亮的代码，但如果您的方法信息来自 IDisposible 类，它将返回。

```
System.Reflection.MethodInfo methodInfo;
methodInfo = ...; //methodInfo obtaining code here
bool isDisposible = methodInfo.DeclaringType.FindInterfaces(new System.Reflection.TypeFilter((type, filter) => { return type.ToString() == filter.ToString(); }), "System.IDisposable").Any(); 
```

不确定这是否是你的追求。

# joomla - Joomla 如何自定义主菜单

> ID：13557093
> 
> 赞同：2
> 
> 时间：2012-11-26T00:22:23.083
> 
> 标签：joomla, content-management-system

我正在学习 joomla 并面临下一个问题。

这是 HTML 中的主菜单

```
<ul>
    <li class="active"><a href="#">home</a></li>
    <li><a href="#">bio</a></li>
    <li><a href="#">news</a></li>
    <li><a href="#" class="first-lev">projects<span class="ico"></span></a>
        <div class="sub-nav">
            <ul>
                <li><a href="#">yegor<br/>zabelov<br/>trio</a></li>
                <li><a href="#">gurzuf</a></li>
                <li><a href="#">soundtracks</a></li>
            </ul>
        </div><!-- .sub-nav -->
    </li>
    ...
</ul> 
```

如何将 joomla 中的主菜单自定义为：

1.将类.first-lev添加到一些链接

2.用这个类在item里面添加span

3.为子导航添加包装器div

感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T11:28:35.370

1.  要将课程添加到某些链接，只需转到管理面板，选择您的菜单项。转到链接类型选项-> 链接 CSS 样式，然后手动添加类。

2.  您需要编辑 default_component.php 或 defaul_url.php

3.  您需要编辑 default.php

[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)
要自定义菜单布局，只需复制

```
/modules/mod_menu/tmpl 
```

到：

```
/templates/your_template/html/mod_menu 
```

然后自定义刚刚复制的文件。此文件覆盖系统 mod_menu 文件。
不要忘记添加：

```
<folder>html</folder> 
```

在您的 templateDetails.xml 中。

# sap - 日期作为 Webi 报告的输入参数

> ID：13557096
> 
> 赞同：1
> 
> 时间：2012-11-26T00:22:33.857
> 
> 标签：sap, business-objects, webi

我正在尝试从提示中创建一个只有一个输入日期的 WebI 报告，然后在它之后获取 n 个时间片、几周或几个月（最多 12 个）。

例如 param_input = 1/1/12 并且还有一个输入 'n'

我想我会在每周时间片上尝试一个查询过滤器，然后做一个 `between param_input and RelativeDate(param_input, 7*n)`

但是查询生成器不喜欢动态创建的日期。

无论如何动态获取第二个日期还是我只需要提供两个日期？

或者有没有办法只拉下 12 个切片并过滤到前 n 个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:43:38.843

您应该在 Universe 中创建一个新对象（如果您使用 MS SQL）

```
 [Date+7]=DATEADD(@prompt('Period','A',{'Day','Month','Year'},
mono,constrained,persistent),7,@prompt('Enter date:','D',,mono,free,persistent)). 
```

并在报告中添加过滤器：

UserInputWithText_EnterDate 和 [Date+7] 之间的 [Date]（来自全域）

# android - android如何安排设备从睡眠状态唤醒？

> ID：13557097
> 
> 赞同：3
> 
> 时间：2012-11-26T00:22:49.667
> 
> 标签：android, linux, wakeup, real-time-clock

使用 AlarmManager 时，Android 设备可以在某个时间从睡眠中唤醒。

Android 如何在较低级别安排唤醒？

我尝试使用`rtcwake`，但它失败了`rtcwake: /dev/rtc0 not enabled for wakeup events`（如果我强制 rtcwake 继续并进行必要的 ioctls，我仍然看不到设备被按时唤醒）

Android 使用哪些系统调用来设置警报以及如何从控制台自己进行设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:30:22.587

Android 使用 /dev/alarm 设备设置可以将系统从挂起状态唤醒的警报。它可以从 JNI 使用 ioctl 访问此设备。请参阅 frameworks/base/services/jni/com_android_server_AlarmManagerService.cpp 文件。Android 拥有对该设备的独占访问权限，据我所知，该接口只能通过 Java 使用 AlarmManager 服务获得。如果您需要在 java 级别设置这些警报，您可以使用 getSystemservice(ALARM_SERVICE) 访问此服务，从本机它有点棘手，我目前也遇到同样的问题。我需要在本机进程中发出警报，并且我正在使用套接字与 java 服务进行通信以安排警报。这可能不是您正在寻找的答案，但我想分享我的经验。

# web-services - 从浏览器执行delphi web服务

> ID：13557099
> 
> 赞同：2
> 
> 时间：2012-11-26T00:23:02.190
> 
> 标签：web-services, delphi, soap, delphi-2005

我一直在 Delphi 2005 中研究一组与我们的服务器应用程序交互的 ISAPI Web 服务 DLL，但我在调试 Web 服务中的问题时遇到了真正的困难。

此时，我有一个测试 SOAP 服务器应用程序作为 Web App Debugger 可执行文件，它使用与真实 DLL 相同的单元。

我可以编译和运行我的 SOAP EXE，运行 Web App Debugger 工具，启动 ServerInfo 服务器，然后在注册服务器列表中查看我的 SOAP 应用程序。

如果我从列表中选择它并单击 Go，它会显示正常的服务信息页面，我可以在其中查看接口和 WSDL。

我现在要做的是执行其中一种方法（一个返回 ISAPI DLL 版本信息的简单方法），并通过查看 Web App Debugger 的 Log 选项卡来查看请求和响应，但是，我已经找不到执行该方法的方法。

我真的需要编写一个特殊的客户端应用程序来测试我的 Web 方法吗？我在网上看到的大多数示例只是说用于`http://server/service/class/method?parameter=value`执行 Web 服务方法，但这似乎不适用于 Delphi SOAP Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:42:39.447

您需要更改客户端以连接到运行 WebAppDebugger 的机器。（通常是本地主机）

运行 WebAppDebugger 并单击“开始”按钮。'默认 URL' 亮起......默认情况下是

```
http://localhost:8081/ServerInfo.ServerInfo 
```

然后在 IDE 中运行 WAD 服务器项目，并在服务器代码中的某处放置所需的断点。

如果在同一台机器上运行您的客户端，请将您的客户端更改为使用本地主机地址...如果您今天连接到：

```
http://www.yourhost.com/yourapp.dll/yourclass/yourmethod 
```

更改客户端以连接到这样的东西以调试流量：

```
http://localhost:8081/wadClassName/yourclass/yourmethod 
```

Web 应用程序调试器类的名称是在您创建 WAD 项目时定义的。

# workflow-foundation-4 - 如何访问 BeginOnLoad / PersistenceIOParticipant 中的工作流 ID？

> ID：13557100
> 
> 赞同：1
> 
> 时间：2012-11-26T00:23:17.917
> 
> 标签：workflow-foundation-4, workflow-foundation

我正在使用一个名为：

公共类 ProcessFlowPersistenceIOParticipant : PersistenceIOParticipant

它继承自 WF4 框架中的 System.Activities.Persistence.PersistenceIOParticipant。

我想覆盖 BeginOnLoad(..) 方法。

在这个覆盖中，我想拦截工作流实例的反序列化，并将实体数据库中的业务实体注入到实体工作流变量中。

BeginOnLoad 在从实例存储加载工作流实例时触发。

通过：workflowApplication.Load(workflowInstanceGuid);

我可以在 readwritevalues 字典中看到工作流指南。

在 readWriteValues.Keys 匹配命名空间“urn:schemas-microsoft-com:System.Activities/4.0/properties”中找到键

然后指南在里面：

值 = readWriteValues[xName]; _workflowInstanceId = ((System.Activities.Runtime.ActivityExecutor)value).WorkflowInstanceId;

它可以通过调试器访问，但不能在代码中访问，因为 ActivityExecutor 是一个内部类。

那么有没有办法确定 BeginOnLoad 中正在加载什么工作流实例？

非常感谢任何提示。

麦克风

这个问题类似于[BeginOnSave 内部的访问工作流 id](https://stackoverflow.com/questions/11051774/how-can-i-access-the-workflow-id-in-beginonsave-persistenceioparticipant)。但是，在 BeginOnLoad 的情况下，没有可用于获取工作流实例 guid 的活动执行上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:53:46.207

如果您还在 ProcessFlowPersistenceIOParticipant 中实现 IWorkflowInstanceExtension 接口，您应该能够通过[SetInstance()](http://msdn.microsoft.com/en-us/library/ee725469.aspx)函数中的[WorkflowInstanceProxy获取工作流 ID。](http://msdn.microsoft.com/en-us/library/system.activities.hosting.workflowinstanceproxy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T11:34:14.033

```
public class TaskActivity : NativeActivity
{        
    protected override void Execute(NativeActivityContext context)
    {
        context.GetExtension<RelevantDataExtensionIO>().WorkflowInstanceId = context.WorkflowInstanceId;

    }
}

public class RelevantDataExtensionIO : PersistenceIOParticipant
{
    public const string NamespaceWorkflowInstanceId = "WorkflowInstanceId";
    public Guid WorkflowInstanceId { get; set; }

    public static XNamespace Namespace
    {
        get { return XNamespace.Get("http://sample.com/RelevantDataIO"); }
    } 

    public RelevantDataExtensionIO() 
        : base(false, false)
    {           
    }

    protected override void CollectValues(out IDictionary<XName, object> readWriteValues, out IDictionary<XName, object> writeOnlyValues)
    {
        readWriteValues = new Dictionary<XName, object>();
        readWriteValues.Add(Namespace.GetName(NamespaceWorkflowInstanceId), this.WorkflowInstanceId);

        writeOnlyValues = null; 
    }

    protected override IAsyncResult BeginOnLoad(IDictionary<XName, object> readWriteValues, TimeSpan timeout, AsyncCallback callback, object state)
    {
        Guid id = this.WorkflowInstanceId;
        return base.BeginOnLoad(readWriteValues, timeout, callback, state);                       
    }     
} 
```

# asp.net - 编写大型异常列表的方法

> ID：13557103
> 
> 赞同：0
> 
> 时间：2012-11-26T00:23:37.730
> 
> 标签：asp.net, architecture

我需要编写一个包含 15,000 个项目的列表，每个项目都有不同的规则。我需要做一些大规模的 if 陈述或案例。我想知道是否有人知道分离规则文件的好方法，以便我可以让一个单独的团队构建并更新它。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:31:34.977

您可以将函数中的规则分开（15,000 个规则函数），然后您可以将规则分组到不同的文件中。像这样：

在文件 1 中：

*   函数条件1(){}
*   函数条件 2(){}
*   函数条件 3(){}

在文件 2 中：

*   函数条件 4(){}
*   函数条件 5(){}
*   函数条件6(){}

等等

# c++ - 将函数中的参数初始化为零。但是在构建代码时仍然有错误

> ID：13557105
> 
> 赞同：1
> 
> 时间：2012-11-26T00:23:43.643
> 
> 标签：c++, function, g++, overloading

> **可能重复：**
> [头文件中具有默认参数的构造](https://stackoverflow.com/questions/1440222/constructors-with-default-parameters-in-header-files)
> [函数 函数参数的默认值](https://stackoverflow.com/questions/2842928/default-value-of-function-parameter)

错误：

```
**** Internal Builder is used for build               ****
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o src\Calculator.o ..\src\Calculator.cpp
..\src\Calculator.cpp:26:55: error: default argument given for parameter 1 of 'CComplex::CComplex(float, float)'
..\src\/Calculator.h:25:9: error: after previous specification in 'CComplex::CComplex(float, float)'
..\src\Calculator.cpp:26:55: error: default argument given for parameter 2 of 'CComplex::CComplex(float, float)'
..\src\/Calculator.h:25:9: error: after previous specification in 'CComplex::CComplex(float, float)'
Build error occurred, build is stopped
Time consumed: 563  ms. 
```

有没有人遇到过类似的问题。有什么可能的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:44:50.457

您在函数定义中使用默认参数做错了。

```
class {
void CComplex(float a=0.0, floatb=0.0);
}; 
```

如果你有这样的函数定义，那就错了：

```
void CComplex::CComplex(float a=0.0, floatb=0.0) 
{
} 
```

它应该是：

```
void CComplex(float a, float) 
{
} 
```

然后

```
call CComplex(); `a,b` will be default to `0.0`
call CComplex(1.0); will set a to a 1.0 and b to 0.0
call CComplex(1.0, 2.0); will set a to 1\. and b to 2.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:48:03.007

您需要在函数声明中（通常在头文件中）声明函数参数的默认值，而不是定义（通常是 cpp 文件）。因此，在您的情况下，代码应如下所示：

在 .h 文件中

```
CComplex(float r=0.0, float i=0.0); 
```

在 .cpp 文件中

```
CComplex::CComplex(float r, float i)
{
    // ...
} 
```

# sql - SQL - 组合两个查询

> ID：13557106
> 
> 赞同：0
> 
> 时间：2012-11-26T00:23:44.583
> 
> 标签：sql, database, ms-access, subquery

我有这两个我正在尝试组合的查询。

查询 1 - 这告诉我库存中的所有车辆。含义不在所有权表中：

```
SELECT VEHICLE.*
FROM VEHICLE
WHERE NOT EXISTS
(SELECT NULL FROM OWNERSHIP WHERE VEHICLE.VEH_ID= OWNERSHIP.VEH_ID); 
```

查询 2 - 这个告诉我每个品牌哪辆车的价格最高。

```
SELECT B.BRAND_ID, B.BRAND_NAME, M.MODEL_NAME, C.CLASS_NAME, V.VEH_ID, V.VEH_YEAR, V.VEH_PRICE

FROM (((VEHICLE AS V INNER JOIN CLASS AS C ON V.CLASS_ID = C.CLASS_ID) 
INNER JOIN MODEL AS M ON M.MODEL_ID = V.MODEL_ID) 
INNER JOIN BRAND AS B ON B.BRAND_ID = M.BRAND_ID) 
INNER JOIN (SELECT M.BRAND_ID, MAX(V.VEH_PRICE) AS VEH_PRICE FROM VEHICLE AS V 
INNER JOIN MODEL AS M ON M.MODEL_ID = V.MODEL_ID GROUP BY M.BRAND_ID) 

AS derived ON (v.VEH_PRICE = derived.VEH_PRICE) AND (b.BRAND_ID = derived.BRAND_ID)
ORDER BY 7 DESC; 
```

我意识到，如果它们已经由客户拥有，那么确定哪些车辆是最昂贵的并不重要。由于第一个查询告诉我们哪些可用，我将如何将这两者结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:21:16.303

我无法测试您的查询，但认为这就是您要查找的内容：

```
SELECT
  B.BRAND_ID,
  B.BRAND_NAME,
  M.MODEL_NAME,
  C.CLASS_NAME,
  V.VEH_ID,
  V.VEH_YEAR,
  V.VEH_PRICE
FROM 
  (((VEHICLE AS V INNER JOIN CLASS AS C ON V.CLASS_ID = C.CLASS_ID) 
    INNER JOIN MODEL AS M ON M.MODEL_ID = V.MODEL_ID) 
   INNER JOIN BRAND AS B ON B.BRAND_ID = M.BRAND_ID) 
  INNER JOIN (SELECT M.BRAND_ID, MAX(V.VEH_PRICE) AS VEH_PRICE
              FROM VEHICLE AS V
                   INNER JOIN MODEL AS M
                   ON M.MODEL_ID = V.MODEL_ID
              WHERE
                NOT EXISTS
                  (SELECT NULL FROM OWNERSHIP
                   WHERE V.VEH_ID=OWNERSHIP.VEH_ID)
              GROUP BY M.BRAND_ID) AS derived
  ON (v.VEH_PRICE = derived.VEH_PRICE)
  AND (b.BRAND_ID = derived.BRAND_ID)
WHERE
  NOT EXISTS
  (SELECT NULL FROM OWNERSHIP
   WHERE V.VEH_ID=OWNERSHIP.VEH_ID)
ORDER BY 7 DESC; 
```

您必须在计算每个品牌的最高价格的子查询中排除已经拥有的汽车，而且在外部查询中也必须排除与没有所有者的汽车的最高价格相同的自有汽车。

除了使用 NOT EXISTS 子句，我还建议在子查询和外部查询中再添加一个带有 OWNERSHIP 的 LEFT JOIN，并且只采用 OWNERSHIP.VEH_ID 为空的行。

# html - 图像库 - 如何使用 div 或 p 类对图像进行分组

> ID：13557111
> 
> 赞同：0
> 
> 时间：2012-11-26T00:24:09.717
> 
> 标签：html, gallery, image

这就是我的画廊中图像的 HTML：

```
<p class="crop">
<img src="image1.jpg" alt="image1.jpg" /></p>
<p class="crop">
<img src="image2.jpg" alt="image2.jpg" /></p> 
```

但是，使用这样的 p 类会使它们分开图像而不是一组图像，因此我的下一个/上一个箭头不起作用。

我需要为它们制作一组图像，以便画廊中的箭头可以再次正常工作，但我想保留 p 类，因为我需要它来裁剪图像。我怎样才能解决这个问题？

这是裁剪类的 CSS：

```
.crop{
float:left;
display:inline;
margin:2px;
overflow:hidden; /* this is important */
position:relative; /* this is important too */
width:320px;
height:240px;
}
.crop img{
position:absolute;
top:-0px;
left:-0px;
} 
```

这是我之前提出的问题的链接：[如何在我的图片库中解决此问题？](https://stackoverflow.com/questions/13556537/how-can-get-around-this-issue-in-my-image-gallery)不幸的是，没有一个解决方案奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:31:52.143

我看到你在一两个小时前发布了这个完全相同的问题，我认为和/或建议没有达到预期的结果？虽然我认为重复的问题在这里不受欢迎，但我是否可以建议至少链接到您以前的问题，以便人们可以了解以前的回答尝试？我想看看你对人们已经提出的建议的回应，但不能，因为我找不到原来的问题。

当您尝试以前的建议时发生了什么？

注意：我意识到这不是答案，但我需要更多信息来帮助您，而且我还没有足够的“代表”来对其他人的帖子发表评论。请不要反对我:)

如果您发布您的 CSS 代码也会有所帮助，以便我们了解所需的效果。

# java - HQL 查询在哪里存在或在列表元素之间

> ID：13557113
> 
> 赞同：0
> 
> 时间：2012-11-26T00:24:25.503
> 
> 标签：java, hibernate, hql

我有一个这样的标签类：

```
public class Tag {

    private Long id;

    private String title;
    private Set<Document> documents = new HashSet<Document>();

    public Tag(){}

//getter and setter...

} 
```

还有一个由一些标签对象分类的类文档

```
public class Document {

    private Long id;

    private String title;
    private Int numberPages;
    private Set<Tag> tags = new HashSet<Tag>();

    public Document(){}

//getter and setter...

} 
```

现在我想获得最多 10 页的文档，它们有标签“短”或“论文”

我猜是这样的：

```
int nPages = 10;
Query query = session.createQuery("from Document where nPages <= :numberPages and (<<short>> OR <<essay>>);  
query.setInteger("numberPages", nPages); 
```

标签列表可以是可变的。我想区分何时必须是所有标签（标签之间的“AND”）或任何标签就足够了（标签之间的“OR”）

如何构建 sql 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:53:33.280

我认为你`HQL`应该如下所示：

```
 Query query = session.createQuery(
           "from Document d join d.tags t "+
           " where d.nPages <= :numberPages and "+
              " t.title in (:titles) "; 
  List<String> titles = new ArrayList<String>();
  titles.add("short");
  titles.add("essay");
  query.setParameter("numberPages", nPages);  
  query.setParameterList("titles", titles); 
```

# jquery - jquery遍历父级更改css

> ID：13557117
> 
> 赞同：0
> 
> 时间：2012-11-26T00:26:16.053
> 
> 标签：jquery, css, closest

我在一个页面上有多个下拉列表：

**HTML**

```
<div class="select-full">
    <select id="activitylevel" class="input_select step2-ddl c2-sb-enabled">
        <option selected="selected" value="-1">-- please select --</option>
        <option value="1">Step 1 </option>
        <option value="3">Step 2</option>
        <option value="4">Step 3</option>
    </select>
    <div class="c2-sb-wrap" tabindex="0">
        <div class="c2-sb-inner-wrap"></div>
    </div>
</div> 
```

我想将边框应用于具有类 c2-sb-inner-wrap 的 div 到任何尚未选择的选择（值 == -1）

我正在尝试使用最接近（）和 next/nextAll 但它没有发生：

```
$('.step2-ddl').each(function() {

    if ($(this).val() == '-1') {
        $(this).closest('.select-full').nextAll('.c2-sb-inner-wrap').css('border-color', '#f86556').css('border-style', 'solid');
    }
    else {
        $(this).closest('.select-full').nextAll('.c2-sb-inner-wrap').css('border-style', 'none');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:42:09.333

使用`.find()`代替`.nextAll()`

喜欢：

```
$(this).closest('.select-full').find('.c2-sb-inner-wrap')
       .css('border-color', '#f86556').css('border-style', 'solid'); 
```

作为旁注，我建议切换类而不是直接更改 CSS 属性，因为它更简洁。

# c# - 从组播数据包中获取发送者 ip

> ID：13557120
> 
> 赞同：6
> 
> 时间：2012-11-26T00:26:36.870
> 
> 标签：c#, network-programming, multicast

如何获取多播 UDP 数据包的发送方的 IP？当前代码以同步/阻塞方式设置（参见下面的注释）。这是代码：

```
 private void receive()
    {
        string mcastGroup = SetMcastGroup();
        s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        s.EnableBroadcast = true;
        IPEndPoint ipep = new IPEndPoint(IPAddress.Any, 5000);
        s.Bind(ipep);
        IPAddress ip = IPAddress.Parse(mcastGroup);
        s.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, new MulticastOption(ip, IPAddress.Any));

        while (true)
        {
            try
            {
                byte[] b = new byte[4096];
                s.Receive(b);
                string str = Encoding.ASCII.GetString(b, 0, b.Length);
                //this.SetText(ipep.Address + ": " + str.Trim());
                this.SetText(senderIP() + ": " + str.Trim());
            }
            catch{}
        }
    } 
```

**注意：**这个问题来自聊天，因此不是我的代码。我只是问，因为我理解这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:55:07.563

由于您使用的是 UDP，因此您不会与远程端点建立连接（与 TCP 不同，每个连接只有一个套接字）。因此，您必须在收到数据报时获取远程端点的地址。做这个电话`receiveFrom`，而不是`receive()`

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivefrom.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivefrom.aspx)

# java - 为什么没有创建文件或找不到路径？

> ID：13557125
> 
> 赞同：0
> 
> 时间：2012-11-26T00:27:21.183
> 
> 标签：java

所以我正在创建以下代码来创建一个新文件。有谁知道它为什么抛出异常？

本质上，我认为它会在使用构造函数后检查文件是否存在，但它不存在，我认为它会创建它，但都没有发生。

```
Java Code:

import java.util.Scanner;
import java.lang.Integer;
import java.io.*;
import java.lang.*;
import java.io.File;

class CreateNumberFile{
    public static void main(String args[]){
        //Ask user for filename and highest number
        Scanner in = new Scanner(System.in);
        System.out.println("Enter the filename");
        String fileName = in.next();
        System.out.println("Enter the highest number for this file");
        int maxNumber = in.nextInt();

        System.out.print("A file titled " + fileName+ " will be created containing a");
        System.out.println(" string of numbers with numbers ranging from 0 to: " + maxNumber);

        // Create a File object 
        File myFile = new File("home/Users/Joe/Dropbox/Programming/Java/Projects/g2.txt");
        // Tests whether the file or directory denoted by this abstract 
        //pathname exists.
        if (myFile.exists()) {
            System.out.println(myFile.getAbsolutePath() +
                    " File already exists");

        } else {
          try{
            //creates a new, empty file named by this pathname
            myFile.createNewFile();
            System.out.println(myFile.getAbsolutePath() + 
                    " File Created Successfully");
          } catch(IOException e){
            System.err.println ("Caught IOException "+e.getMessage());
          }
        }

    }//main
}//class 
```

当我运行它时，我收到以下错误：

输出：

```
Caught IOException The system cannot find the path specified 
```

我认为代码会检查文件是否存在，如果不存在，我会使用构造函数来创建文件？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:29:49.973

您的路径看起来像一条绝对路径，但您似乎忘记了开头的斜线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:34:06.703

如果你的文件没有`exist()`，它的父文件也可能没有`exist()`，所以你应该创建它们：

```
try {
    // create all dirs needed to myFile's parent to exist()
    myFile.getParent().mkdirs();
    //creates a new, empty file named by this pathname
    myFile.createNewFile();
    System.out.println(myFile.getAbsolutePath() + " File Created Successfully");
} catch(IOException e) {
    System.err.println ("Caught IOException "+e.getMessage());
} 
```

[此外，正如 Alexey Feldgendler 所说](https://stackoverflow.com/a/13557142/641451)，您缺少路径`/`中的根。`myFile`

# php - 如何修复列计数与行值计数不匹配

> ID：13557126
> 
> 赞同：1
> 
> 时间：2012-11-26T00:27:34.570
> 
> 标签：php, mysql

我查看了许多不同的站点，包括 php.net，但仍然没有发现为什么我的插入脚本不起作用。我正在使用 Eclipse 在 PHP 中进行编程，并且我安装了 PHP 插件以便它可以正常工作，但我还没有弄清楚我的脚本有什么问题。

前任。

```
switch($type) {

    case(1):
        require("opendb.php");
        $query = "INSERT INTO ability(AbilityName,Description,Strength,Defense,Luck,Agility) values ('" . $name . '","' . $description . '","' . $strength . '","' . $defense . '","' . $luck . '","' . $agility . "')";
        if (!mysql_query($query)) {
            echo "Ability was not entered successfully: " . mysql_error();
        } else {
            echo "Ability was entered successfully!";
        }
        break;
    case(2):
        require("opendb.php");
        $query = "INSERT INTO weapon(WeaponName,Description,Strength,Defense,Luck,Agility) values ('"  . $name . '","' . $description . '","' . $strength . '","' . $defense . '","' . $luck . '","' . $agility . "')";
        if (!mysql_query($query)) {
            echo "Weapon was not entered successfully: " . nysql_error();
        } else {
            echo "Weapon was entered successfully!";
        }
        break;
    default:
        require("opendb.php");
        $query = "INSERT INTO item(ItemName,Description,Strength,Defense,Luck,Agility) values ('" . $name . '","' . $description . '","' . $strength . '","' . $defense . '","' . $luck . '","' . $agility . "')";
        if (!mysql_query($query)) {
            echo "Item was not entered successfully: " . mysql_error();
        } else {
            echo "Item was entered successfully!";
        }
    }
} 
```

您应该能够选择单选按钮以将对象插入为项目、武器或能力，但我不断收到列值与行值计数错误不匹配。这是我创建的三个表。每次输入对象时，ID 都会自动递增。它不为空，但我不需要在用于输入对象的表单中包含 ID。

物品表：

```
ItemID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
ItemName varchar(40),
Description longtext,
Strength INT NOT NULL,
Defense INT NOT NULL,
Luck INT NOT NULL,
Agility INT NOT NULL 
```

武器表：

```
WeaponID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
WeaponName varchar(40),
Description longtext,
Strength INT NOT NULL,
Defense INT NOT NULL,
Luck INT NOT NULL,
Agility INT NOT NULL 
```

能力表：

```
AbilityID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
AbilityName varchar(40),
Description longtext,
Strength INT NOT NULL,
Defense INT NOT NULL,
Luck INT NOT NULL,
Agility INT NOT NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:06:55.227

您使用了无效的字符串引号，这是您的 SQL 命令中的一个简单语法错误。

如果你回应这一行，

```
$query = "INSERT INTO ability(AbilityName,Description,Strength,Defense,Luck,Agility) values ('" . $name . '","' . $description . '","' . $strength . '","' . $defense . '","' . $luck . '","' . $agility . "')"; 
```

输出将如下所示：

```
INSERT INTO ability(AbilityName,Description,Strength,Defense,Luck,Agility) values ('name","description","strength","defense","luck","agility') 
```

如您所见，第一列和最后一列使用了导致错误的混合字符串引号。我建议您在 SQL 查询中仅使用单引号，并使用[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)方法在 PHP 中创建这些字符串。

# android - 如何防止重新创建其中包含 AsyncTask 和 Service 的活动？

> ID：13557127
> 
> 赞同：0
> 
> 时间：2012-11-26T00:27:36.757
> 
> 标签：android, android-intent, android-service

假设我有 2 个活动：活动 1，活动 2。我正在从活动 1 启动活动 2。活动 2 - 是带有图像和进度条的活动，用于显示在服务中启动的某些后台任务的执行进度。

当我尝试从 Activity 2 按下硬件后退按钮时，它会将我带回到 Activity 1，因此即使有服务仍在运行，我也可以再次启动 Activity 2。

所以问题是这样的：我怎样才能防止这种行为。我只需要启动 Activity 2 1 次并且在工作未完成时不退出它？？另一种情况是我可以从任务管理器停止我的应用程序，但服务将正常工作，之后我可以再次运行应用程序 - 使用新服务，而旧服务仍在运行？有什么机制可以防止这种行为？谢谢。

![在此处输入图像描述](../Images/fb7fa9fca5ea98e4c9ff2b0b3706465c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:39:41.563

您可以在`Activity`类启动时绑定到本地服务。绑定后，您`Activity`可以调用该服务声明的任何公共方法。这将允许您`Activity`绑定到服务，然后检查服务当前是否正在执行任何工作。您可能会制作类似`isRunning()`或类似的方法。如果该服务当前没有做任何工作，您可能需要开始一项新工作。如果它已经在执行某个任务，那么您可以显示该任务的当前进度。

您应该阅读 Android 开发者网站上的[本地服务示例](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)文章以了解如何执行此操作。

# sql-server - 返回两个日期之间差异的方法

> ID：13557131
> 
> 赞同：1
> 
> 时间：2012-11-26T00:28:17.770
> 
> 标签：sql-server

我有一个查询，我必须选择日期相差一天的记录。

所以我在我的查询中写了这个条件

```
DATEPART(year,C1.dtae_cmd) = DATEPART (year,C2.dtae_cmd)
 and DATEPART(MONTH,C1.dtae_cmd) = DATEPART (MONTH,C2.dtae_cmd)
 and DATEDIFF(day,C1.dtae_cmd,C2.dtae_cmd) = 1 
```

他们没有其他方法吗？因为我用的这个方法太长了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:30:39.770

`DATEDIFF(day,C1.dtae_cmd,C2.dtae_cmd) = 1`应该是你所需要的。当使用天数作为频率时，Datediff 将返回分隔两个日期的天数。

# node.js - Twitter OAuth + Node + A MongoDB Collection：如何存储用户？

> ID：13557133
> 
> 赞同：0
> 
> 时间：2012-11-26T00:28:57.983
> 
> 标签：node.js, mongodb, oauth, twitter-oauth

我已经成功地从 Twitter 的 oauth 服务中检索了用户的 id 和屏幕名称，如下所示：

```
{ user_id: '12345678', screen_name: 'spencergardner' } 
```

我希望为用户创建一种简单的方式来使用 Twitter（例如 Facebook 很快）进行身份验证，以便他们可以将他们有兴趣学习的单词添加到他们的帐户中。我现在如何在 mongodb 集合中设置“用户”，以允许每个用户拥有自己的单词库（和其他数据）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:36:46.777

我使用 mongoose 和 nodejs 来创建一个用户模型，然后您可以将 oauth 数据输入到该模型中，然后您就可以自由地关联您想要的任何数据。

获得 Oauth 信息后，您可以创建一个新用户，将 twitter 数据与该特定用户模型相关联。_id 是自动提供的，但是在这种情况下，您将使用从 twitter 返回的 user_id（假设它是唯一的）。

这是一个示例架构：

```
var mongoose = require('mongoose')
, Schema = mongoose.Schema

var userSchema = new Schema({

_id: String,
screen_name: String,
words: Array
});

module.exports = mongoose.model('User', userSchema); 
```

将来，您将能够查询特定用户的数据库，并在用户返回时对其进行身份验证。您还希望创建一个类似于以下内容的新用户：

```
new User({    _id: req.body.user_id,
              password: req.body.screen_name,
              words: []
    }).save(function(err) {
          if (!err) {
            res.send("User added");
            }
        }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:57:28.133

如果我理解正确，您是在问如何在 mongo 集合中存储具有不同结构的数据。

好吧，你很幸运！Mongo 就是这样做的。您可以在 mongo 集合中存储任何不同的数据结构，而无需先验地“声明”该结构。只需创建一个 DBObject（例如，如果使用 Java 驱动程序），向其中添加字段，然后保存即可。然后，您可以检索它，并查询数据以查看此特定用户拥有什么，以及您在应用程序中想要的任何东西。

# android - 随机 TextView 位置

> ID：13557135
> 
> 赞同：4
> 
> 时间：2012-11-26T00:29:06.790
> 
> 标签：android, android-layout, random, textview

我试图在`TextView`屏幕上的随机位置显示 a ，但文本不应超出屏幕。文字总是很短，不超过3个字。这是我到目前为止所拥有的：

```
 final TextView tv = ((TextView)findViewById(R.id.text);

        final Random rand = new Random();
        final DisplayMetrics metrics = getResources().getDisplayMetrics();
        int width = rand.nextInt(metrics.widthPixels);
        int height = rand.nextInt(metrics.heightPixels);

        final FrameLayout.LayoutParams flp = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        flp.setMargins(width, height, 0, 0);
        tv.setLayoutParams(flp); 
```

更新：

忘了，我有这个函数来获取一个范围内的随机数：

```
public static int Random(final int lower, final int uppper)
{
    return lower + (int)(Math.random() * ((uppper - lower) + 1));
} 
```

所以我将代码更新为：

```
 int width = Random(0, metrics.widthPixels);
        int height = Random(0, metrics.heightPixels); 
```

但它有时仍会显示在查看区域之外。我什至从每个值中减去 10，以确保它保持不变。在大多数情况下它确实如此，但它似乎显示在屏幕外的某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:54:23.757

> 但有时仍会显示在查看区域之外

1.  您的活动顶部没有标题吗？这确实很重要......我不确定，但我认为通知栏也是......如果你在全屏模式下工作，你不应该有问题。

2.  请记住，xy 坐标始终是对象视图的左上角！所以仍然可能发生你得到一半（或完整的情况下：D）你的图片/文本视图/屏幕外的任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:58:55.380

为什么你不能这样做？

而不是这样做，您可以找到设备的 Max x 和 Max y，然后根据条件您可以将视图的位置设置为特定位置。

另请参阅：[SO](https://stackoverflow.com/questions/3441475/android-change-absolute-position-of-a-view-programmatically)

可能对你有帮助。

如有任何疑问，请评论我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:03:51.477

尝试更多地查找以使随机数保持在最大宽度和高度内，

# git - 由于 Netbeans 中的这些文件，head 与 origin/master 的 git 合并失败

> ID：13557136
> 
> 赞同：8
> 
> 时间：2012-11-26T00:29:07.343
> 
> 标签：git, netbeans, merge, conflict

我们正在使用 Netbeans，从 git 拉/推时有时会出错

**由于以下文件，head 与 origin/master 的 git 合并失败：“.../Filename.java”**

我们能做什么？如何在netbeans中解决这个问题？我们尝试了一切 -> 提交 -> 拉 - 相同的错误 -> 提交 -> 推送 - 相同的错误

没有出现我们可以解决冲突的窗口。

**编辑：**当我这样做时： git pull 与 git shell，然后它工作，文件将向我显示冲突......

但是，如果我通过 netbeans 执行 git pull，netbeans 不会向我显示任何内容，它会保持文件原样而不放

```
<<<<<< HEAD:file.java
blablabla
========
blabla
>>>>>>> 77976da35a11db4580b80ae27e8d65caf5208086:file.java 
```

里面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T05:50:39.667

我猜该文件没有被跟踪，并且您在创建它的同时另一个创建它并将其提交到您的遥控器。

我建议您创建一个`stash`,`pull`更改，然后`stash pop`. 它可能会产生冲突（如您所说），但可以使用 Netbeans 的合并编辑器来解决。

只要解决冲突，你就完成了。

或者，您可以在本地提交文件，然后`fetch`+`rebase`到`origin/master`（或任何远程分支）。你会再次遇到冲突，它与第一个选项几乎相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-25T16:50:33.687

我遇到了同样的问题。我猜你正在 Netbeans 中运行 git。请尝试在 git shell 中运行该命令。你会看到区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T16:21:33.203

我最近遇到了同样的问题，无法合并拉取。我正在按正确的顺序做所有事情，但是在特定用户进行更改后拉动更改时，它会拒绝。我复制了 Netbeans 发送的命令并将其粘贴到命令行窗口中。尽管在 Netbeans 中爆炸了，但它在从命令行进行合并时表现完美。然后我能够很好地推动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-05T07:01:00.877

在 Netbeans 中，在执行任何拉取或推送操作之前，使用 Git > Show Changes 查看是否有任何未提交的更改。一旦你解决了这些问题，你应该能够在没有错误的情况下推/拉。

查看更多信息：[https://stackoverflow.com/questions/13373330/...](https://stackoverflow.com/questions/13373330/new-git-user-using-netbeans-support-unable-to-pull-latest-commit-from-remote-rep)

# mysql - Mysql选择带阈值的最大值

> ID：13557139
> 
> 赞同：2
> 
> 时间：2012-11-26T00:29:35.673
> 
> 标签：mysql

作为汽车预订系统的一部分，我有以下 3 个表格：

```
CREATE TABLE `b_booking` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `b_car_id` VARCHAR(15) NOT NULL,
    `uc_user_id` INT(11) NOT NULL,
    `booking_date` DATE NOT NULL,
    `delivery_date` DATE NOT NULL,
    `delivery_location` INT(10) NULL DEFAULT NULL,
    PRIMARY KEY (`id`),
    INDEX `FK_b_booking_b_car` (`b_car_id`),
    INDEX `FK_b_booking_uc_users` (`uc_user_id`),
    INDEX `FK_b_booking_b_location` (`delivery_location`),
    CONSTRAINT `FK_b_booking_b_location` FOREIGN KEY (`delivery_location`) REFERENCES `b_location` (`id`),
    CONSTRAINT `FK_b_booking_b_car` FOREIGN KEY (`b_car_id`) REFERENCES `b_car` (`id`),
    CONSTRAINT `FK_b_booking_uc_users` FOREIGN KEY (`uc_user_id`) REFERENCES `uc_users` (`id`)

CREATE TABLE `b_car` (
    `id` VARCHAR(15) NOT NULL,
    `b_carmodel_id` INT(10) NOT NULL,
    `day_cost` INT(10) NOT NULL,
    `location` INT(10) NOT NULL,
    `model_year` SMALLINT(4) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `FK_b_car_b_carmodel` (`b_carmodel_id`),
    INDEX `FK_b_car_b_location` (`location`),
    CONSTRAINT `FK_b_car_b_location` FOREIGN KEY (`location`) REFERENCES `b_location` (`id`),
    CONSTRAINT `FK_b_car_b_carmodel` FOREIGN KEY (`b_carmodel_id`) REFERENCES `b_carmodel` (`id`)

CREATE TABLE `b_location` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `adress` VARCHAR(100) NOT NULL,
    `b_postal_zip` SMALLINT(4) UNSIGNED NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `FK_b_location_b_postal` (`b_postal_zip`),
    CONSTRAINT `FK_b_location_b_postal` FOREIGN KEY (`b_postal_zip`) REFERENCES `b_postal` (`zip`) 
```

给定的汽车 (b_car) 将有一个 int 表示可以取车或交付汽车的 av 位置。但是，由于客户可以在一个位置取车并在另一个位置交付，因此该位置将发生变化。当客户注册预订 (b_booking) 时，他/她还注册了汽车将在什么位置交付 (delivery_location)。

但是，在我看来不应该那么难的事情上，我遇到了很多问题：假设一辆车在月初位于位置 1。然后，客户 X 注册了 15-20 的预订。并在地点 2 登记交货。然后客户 Y 希望预订同一辆车。所以我需要一个考虑到日期和位置的查询。

```
SELECT c.id, c.location, b.delivery_location, MAX(b.delivery_date) FROM b_car c
LEFT JOIN b_booking b ON b.b_car_id = c.id
WHERE b.delivery_date < '2012-11-28' OR b.delivery_date IS NULL 
GROUP BY c.id; 
```

我试过类似的东西。我将选择所有没有左连接预订的汽车，它还将选择最后一次预订（与给定日期相关的最后一次预订）。当然，问题在于 where 条件还排除了任何日期高于提供日期的预订。此外，使用此解决方案，我不得不同时获取位置（来自 b_car）和交付位置（来自 b_booking），并且可能使用 php 或其他东西在 delivery_location 上评估 null .. 这似乎不是最佳的。

有什么好的解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:50:39.803

我不确定你的问题是什么。我认为您的问题是根据特定日期的预订系统中的计划找出哪些汽车可用。在这种情况下，您需要的唯一信息是来自汽车和位置以及根据预订系统的 ID。

顺便说一句，我建议在您的餐桌上增加时间，因为您可能想在同一天租一辆车。如果客户 A 在 12:00 之前还车，您可以在 13:00 轻松将同一辆车出租给客户 B。

```
SELECT c.id, b.delivery_location, b.delivery_date FROM b_car AS c
LEFT JOIN b_booking AS b ON b.id = c.id
WHERE b.delivery_date = '2012-11-28' and b.delivery_location = 1; 
```

我简化了您的查询，因为我认为这将为您提供所需的信息。如果客户想要租车，您需要知道该车是否在指定位置的规划中可用。

如果您想知道日期之间的可用性，请使用`WHERE b.delivery_date between [start date] AND [end date]`.

我怀疑汽车的类型对客户很重要，所以最好在选择的位置寻找特定的汽车类型。

此外，我建议在交货时检查汽车是否实际在所需位置。

# c# - C# SSL 实现问题

> ID：13557144
> 
> 赞同：0
> 
> 时间：2012-11-26T00:29:49.800
> 
> 标签：c#, .net, ssl, mono

我目前正在尝试将 SSL 添加到我正在处理的项目中，因此我检查了 MSDN 以获取 SSL 流示例服务器。[https://docs.microsoft.com/en-us/dotnet/api/system.net.security.sslstream](https://docs.microsoft.com/en-us/dotnet/api/system.net.security.sslstream)我已经运行它并且它运行但是当客户端连接时它会抛出这个错误

```
Unhandled Exception: System.IO.IOException: The authentication or decryption has failed. ---> Mono.Security.Protocol.Tls.TlsException: The client stopped the handshake.
  at Mono.Security.Protocol.Tls.SslServerStream.OnNegotiateHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
  at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
```

发生了什么？另外为什么它只需要证书而不需要私钥文件？SSL 只是不能那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:59:32.343

私钥是通过证书对象提供的，请参阅`X509Certificate2.PrivateKey`。如果您有证书文件和单独的私钥文件，我认为您必须手动加载私钥并将其分配给证书的`PrivateKey`属性。

# vb.net - 您如何“设置列表框的 SelectedIndex 属性以显示适当的名称”？

> ID：13557145
> 
> 赞同：2
> 
> 时间：2012-11-26T00:29:57.157
> 
> 标签：vb.net, selectedindex

我会更具体。这样做的目标是在（Visual Basic）中创建一个包含所有 50 个美国州的列表框，我要制作一个带有“TextChanged”操作的文本框，当用户输入州名的前几个字母时，它显示该特定状态。（例如，键入“Fl”可能会显示佛罗里达州）。我知道 SelectedIndex 属性是什么，但不确定如何正确使用它。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:54:12.780

假设一个标准`ComboBox`，你可以设置

*   `AutoCompleteMode = Append`
*   `AutoCompleteSource = ListItems`

并确保您`DataSource`已设置为状态列表。例如，给定以下代码：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
  Dim dict As New Dictionary(Of String, String)
  With dict
    .Add("FL", "Florida")
    .Add("NY", "New York")
    .Add("AK", "Alaska")
  End With
  With ComboBox1
    .ValueMember = "Key"
    .DisplayMember = "Value"
    .DataSource = dict.ToList
  End With
End Sub 
```

如果您`N`在 ComboBox 中键入，它会提示`New York`和此代码：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
  MsgBox(ComboBox1.SelectedValue)
End Sub 
```

将返回`NY`。

# c# - 用 dapper 填充 datagridview 的最简单方法？

> ID：13557148
> 
> 赞同：1
> 
> 时间：2012-11-26T00:30:28.617
> 
> 标签：c#, sql, datagridview

我正在使用 dapper.net 进行填充普通类的 sql 查询。

看了[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)，没看懂。当我这样做时，`.datasource = mylist`我得到了很多行，但所有列都是空的。我命名了一个列 id 认为它会自动填充，但它没有。

如何填充 datagridview `IEnumerable<myclass>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:39:47.797

将字段更改为属性

例子

```
class A { public int id; } 
```

至

```
class A { public int id{get;set;} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T15:29:41.250

类属性名称必须与表列名称匹配。

例子

SQL

```
SELECT First_Name FROM Employees 
```

班级

```
class Employee { public string First_Name {get;set;} } 
```

*注意：不区分大小写。

# javascript - 使用 jQuery 返回 XML 文件内容

> ID：13557150
> 
> 赞同：3
> 
> 时间：2012-11-26T00:30:54.467
> 
> 标签：javascript, jquery, ajax, file-io

我想使用 JavaScript/jQuery 读取本地文件的内容。我知道这经常被讨论，但我的示例有点不同，因为我想在获取完成后返回内容，而不是操作 HTML。

我不想谈论安全问题和本地文件，因为这段代码是为了在我自己的浏览器中运行（Chrome，我以 --allow-file-access-from-files 标志开头）。

我有以下功能来获取数据...

```
function readData() {
    $.ajax({
        type: "GET",
        url: "data.xml",
        async: false, // this does not change the outcome
        dataType: "xml",
        success: function(xml) {
            // Got the data, find entries and return them.
            console.log("Returning data");
            var doc = $(xml).find('entry');
            // This is where most examples manipulate dom, I want to
            // return the data instead
            return doc;
        }
    });
} 
```

现在我想做...

```
var xmlDoc = readData();
// undefined, why? 
```

并将文档放在变量中。相反，我变得不确定。似乎该函数在获取文件之前返回。或者也许我对变量范围有问题？

有谁知道如何做到这一点？是的，我确定我想使用 JavaScript，即使我在本地执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:49:11.397

[关于处理 $.ajax 调用](https://stackoverflow.com/questions/8840257/jquery-ajax-handling-continue-responses-success-vs-done)的stackoverflow 答案有一个很好的例子，说明了一个很好的使用方法。这个例子可以稍微修改一下，给你一些接近你正在寻找的东西。

```
function xhr_get(url) {

  return $.ajax({
    url: url,
    type: 'get',
    dataType: 'xml',
    beforeSend: showLoadingImgFn
  })
  .always(function() {
    // remove loading image maybe
  })
  .fail(function() {
    // handle request failures
  });

} 
```

上述方法的植入实例为：

```
xhr_get('/index').done(function(data) {
  // do stuff with index data
});

xhr_get('/id').done(function(data) {
  // do stuff with id data
}); 
```

你可能想要这样的东西：

```
function readData() {
    var returnData;

    xhr_get('data.xml').done(function(data) {
        returnData = data;
    });

    return returnData;

} 
```

希望有帮助。

# android - 调用 setAdapter 时 ViewPager 并不总是刷新，FragmentStatePagerAdapter

> ID：13557153
> 
> 赞同：7
> 
> 时间：2012-11-26T00:31:43.410
> 
> 标签：android, adapter, android-viewpager

首先，我使用 FragmentStatePagerAdapter 为 ViewPager 提供要显示的片段。

当应用程序处于运行状态时（即之后`onResume()`），在 ViewPager 上调用 setAdapter 将始终有效并使我的 ViewPager 刷新，`getItem(int position)`调用适配器中的方法。

`onCreate(Bundle savedInstance)`但是，在方向更改之后，如果我在我的活动的方法中调用 setAdapter，`getItem(int position)`则不会调用该方法，而是重用旧片段。

我在想也许 FragmentManager 正在做一些我不明白的事情？片段管理器是唯一不会在方向更改期间被破坏的东西。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-23T16:53:06.833

这可能是因为您`getFragmentManager()`在使用嵌套片段时用于实例化 FragmentStatePagerAdapter。

尝试`getChildFragmentManager()`改用：

```
CustomFragmentPagerAdapter fragmentPagerAdapter = new CustomFragmentPagerAdapter(getChildFragmentManager()); 
```

[在这里](https://stackoverflow.com/a/15588907/2153244)找到了答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T12:12:40.383

好吧，这就是我发现的东西（这非常奇怪）。

如果您需要**刷新**项目，`PagerAdapter`那么您肯定会失败创建新实例，`PageAdapter`当您传递相同`FragmentManager`并将它们传递给的`setAdapter`调用时`ViewPager`，例如：

```
FragmentManager fm = getChildFragmentManager();
mViewPager.setAdapter(new MyPagerAdapter(fm)); 
```

或者

```
FragmentManager fm = getActivity().getSupportFragmentManager();
mViewPager.setAdapter(new MyPagerAdapter(fm)); 
```

`FragmentManager`但是，如果您在初始化时不断切换s ，`PagerAdapter`那么它将起作用。

从我的角度来看，这太可怕了......如果有人知道如何`ViewPager`正确刷新项目（而不是以这种肮脏的方式），请与他人分享您的想法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T07:17:18.427

我使用 FragmentPagerAdapter 并且 mViewPager.setAdapter() 不起作用。我在下面的步骤中修复它：
（1）获取当前的 Fragment 列表。

```
List<Fragment> fragmentList = getSupportFragmentManager().getFragments();
List<Fragment> fragmentListCopy = new ArrayList<Fragment>(fragmentList); 
```

(2)手动删除片段

```
//I have two fragment
getSupportFragmentManager().beginTransaction().remove(fragmentList.get(0)).commit();
getSupportFragmentManager().beginTransaction().remove(fragmentList.get(1)).commit(); 
```

(3)设置新的 FragmentPagerAdapter 为 ViewPager

```
mViewPager.setAdapter(...) 
```

只需在设置新适配器之前删除片段。

# php - 在 SwiftMailer 生成的电子邮件中更改多部分边界？

> ID：13557156
> 
> 赞同：3
> 
> 时间：2012-11-26T00:31:53.747
> 
> 标签：php, email, swiftmailer

谢谢阅读！

**我想更改 SwiftMailer 生成的消息中的默认多部分边界字符串**。

SwiftMailer 似乎会自动生成字符串，并包含字符串“swift_v4...”，如下所示：

```
--_=_swift_v4_135388916050b2b5889e516_=_

        ...Text Message Part...

--_=_swift_v4_135388916050b2b5889e516_=_

        ...HTML Message Part...

--_=_swift_v4_135388916050b2b5889e516_=_ 
```

我在文档中没有看到任何内容，但是在我深入研究代码之前，有没有人知道通过 SwiftMailer 界面更改它的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:40:06.430

从[源代码](https://github.com/swiftmailer/swiftmailer/blob/master/lib/classes/Swift/Mime/SimpleMimeEntity.php#L433)来看，这可以简单地通过`Swift_Message::setBoundary()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:28:15.907

```
 $message = Swift_Message::newInstance()           # Create the message
->setBoundary('Your boundary')
# more code 
```

# javascript - 谷歌浏览器扩展，一键删除浏览历史

> ID：13557159
> 
> 赞同：4
> 
> 时间：2012-11-26T00:32:16.417
> 
> 标签：javascript, google-chrome, google-chrome-extension, add-on

我正在尝试制作一个 google chrome 扩展程序，只需单击 url 栏旁边的图标即可删除所有浏览历史记录，这是我在 google chrome 上的第一个扩展程序，我已经为 Firefox 制作了其他扩展程序，我想要一些指导和我认为我的想法非常接近我的目标或至少在正确的道路上，我当前的问题是我知道我缺少代码的 javascript 文档。

Javascript [TEST.js]

```
function TESTh() {
  chrome.history.deleteAll()
}
chrome.browserAction.onClicked.addListener(TESTh);
TESTh(); 
```

清单 [manifest.json]

```
{
  "name": "TITLE TEST",
  "version": "1.0",
  "manifest_version": 2,
  "description": "DESCRIPTION TEST",
  "background": {
    "scripts": ["TEST.js"]
  },
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
    "history"
  ]
} 
```

以下链接是我一直在阅读的教程

```
http://developer.chrome.com/extensions/getstarted.html
http://developer.chrome.com/extensions/history.html
http://developer.chrome.com/extensions/browserAction.html
http://developer.chrome.com/extensions/samples.html
https://www.youtube.com/user/GoogleDevelopers 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:06:25.843

我写了一个浏览数据 API 的简单演示，它可以帮助你从这里挑选。删除可能需要一些时间，因此您必须等待`"All data is Deleted..."`分机控制台中的消息进行确认。

**前：**

![在此处输入图像描述](../Images/6727959111df4be8ced4b76b0aebf34b.png)

**后：**

![在此处输入图像描述](../Images/9fa7936c8827e240bbb3396229260db8.png)

***清单.json***

```
{
  "name" : "BrowsingData Demo",
  "version" : "1",
  "description" : "Trivial Demonstration of Browsing Data",
  "permissions": [
    "browsingData"
  ],
  "browser_action": {
     "default_icon": "icon.png",
     "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

***popup.js***

```
 function browsingdata(){
    chrome.browsingData.remove({
      "originTypes": {
        "protectedWeb": true, // Set to true or true as per your requirement
        "unprotectedWeb":true,// Set to true or true as per your requirement
        "extension":true    // Set to true or true as per your requirement
      }
    }, {
      "appcache": true, // Set to true or true as per your requirement
      "cache": true, // Set to true or true as per your requirement
      "cookies": true, // Set to true or true as per your requirement
      "downloads": true, // Set to true or true as per your requirement
      "fileSystems": true, // Set to true or true as per your requirement
      "formData": true, // Set to true or true as per your requirement
      "history": true, // Set to true or true as per your requirement
      "indexedDB": true, // Set to true or true as per your requirement
      "localStorage": true, // Set to true or true as per your requirement
      "pluginData": true, // Set to true or true as per your requirement
      "passwords": true, // Set to true or true as per your requirement
      "webSQL": true // Set to true or true as per your requirement
    }, function (){
        console.log("All data is Deleted...");
    });
}
window.onload=browsingdata; 
```

有关更多信息，请参阅[浏览数据 API](https://developer.chrome.com/extensions/browsingData.html)以了解所有方法等。

# django - 将 Formset 的所有错误消息分组到一个错误消息中（Django）

> ID：13557163
> 
> 赞同：1
> 
> 时间：2012-11-26T00:33:27.613
> 
> 标签：django, message, formset

我试图为此找到答案，但对我来说这是不可能的（文档，stackoverflow ...）。

我有一个只有两个字段的动态表单，URL 和密码。还有一个按钮可以添加两个字段的更多行。

[http://imgur.com/bdKM6](http://imgur.com/bdKM6)

例如，我只想为表单集顶部的所有字段显示一个错误。可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:43:41.500

你有没有尝试过：

```
<ul>
{% for error in form.errors %}
    <li>{{ error }}</li>
{% endfor %}
</ul> 
```

# mysql - MySql 触发器 - 引用语句

> ID：13557164
> 
> 赞同：0
> 
> 时间：2012-11-26T00:33:37.430
> 
> 标签：mysql, triggers

```
CREATE TRIGGER Tr1
AFTER DELETE ON Table1
REFERENCING
    OLD TABLE AS OldTable,
    NEW TABLE AS NewTable
FOR EACH STATEMENT 
```

产生以下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that     corresponds to your MySQL server version for the right syntax to use near 'REFERENCING 
OLD TABLE AS OldTable,
NEW TABLE AS NewTable 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:23:26.193

如果要查看旧表，则应创建 BEFORE DELETE 触发器 -

```
CREATE TRIGGER Tr1
  BEFORE DELETE
  ON Table1
  FOR EACH ROW
BEGIN
  ...
  SET @old_count = NULL;
  SELECT COUNT(*) INTO @old_count FROM Table1;
  ...
END 
```

# javascript - jQuery unload()：更新 Cookie 后出现语法错误 - 如何查找原因？

> ID：13557166
> 
> 赞同：-2
> 
> 时间：2012-11-26T00:34:22.087
> 
> 标签：javascript, jquery, cookies

**下面的解决方案：编辑#2**

我有一个用户可以排序的 HTML 列表。我不想在每次拖放操作后保存数据，所以我在卸载时保存数据：在 cookie 和数据库中。那行得通，但是：

保存数据后，列表被隐藏，我在此行中收到“语法错误”：

```
<!DOCTYPE html> 
```

这很奇怪，因为在刷新同一页面 (F5) 后一切正常，没有进行任何更改。

我试图找到原因，但没有成功。这就是流程：

```
1\. visit the page (index.php)
2\. change the list (set: list_is_dirty = true)
3\. click any internal link (call $(window).unload( ... save_data() ... )
4\. target page appears without the list (syntax error!)
5\. refreshing the page (everything works fine) 
```

你知道如何找到这个错误吗？有什么工具或策略吗？或者也许与卸载功能有相同的体验？

提前致谢！

**编辑：**

一些代码：

```
var list_is_dirty = false;

// document ready?
$(function() {

    function sort_list() {
        // some code, not important
    }

    sort_list();

    $(window).unload(function() {
        if (list_is_dirty == true) {

            /* ---------- HERE's the error! ---------- */
            /* The error occures when I try to call the script.php 
               I tried load(), $.post(), $.get() but nothing works.
               The string is correct. I'm not even able to call any of 
               these functions without params. 
            */

            // send data to script.php to save data 
            $("#div").load("script.php?str="+list_data_str); 

            $.cookie("list_data", list_data_str);
        }
    });
} 
```

**编辑 #2 / 解决方案：** 我不知道为什么，但一切都适用于 window.onbeforeunload 而不是 jQuery.unload()。一个解释会很棒！我很抱歉这个令人困惑的线程！

```
window.onbeforeunload = function(e) {
    $("#div").load("script.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:14:22.620

我认为您的问题在于： list_data_str 因为它没有在任何地方定义。例如，如果您想说您想做 AJAX 发布，那么显然您需要寻找成功事件，否则您的演示代码似乎缺少某些东西，因为您可以按照您尝试的方式进行操作，如果在接收您在 URL 上使用 $_GET 脚本并且不注意任何参数。换句话说，您缺少该对象，并且当您刷新页面时，它会加载到 DOM 中。显然这可能是您所描述的问题，我建议您发布更多与您的问题代码相关的内容。例如接收脚本或来自 Firebug 等调试器的任何错误。

关于如何测试它，您可能希望在支持的浏览器中使用 console.log，或者在设置 cookie 时简单地发出警报。

```
 var global list_is_dirty = false; 

              function sort_list(list, list_is_dirty) {
                // some code, not important
            //check the list and the flag 
            //you should return a value, else it does not make sense to use a function here.. note the var defined as global
            return list;  //?? not sure what to return as don't know what this code does from the posting
            }

              jQuery(function($)
              {

                $(window).load(function(e){

                                var list_data_str= sort_list( );

                        // send data to script.php to save data 
                        e("#div").load('script.php?str='+list_data_str); 

                                    //on unload destroy the cookie perhaps?? or if it's not set a session variable
                        e.cookie("list_data", list_data_str);

                ...

                            The unload event

                                $(window).unload(function(e) {

                              $("#div").load("script.php?str="+list_data_str); 

                                 $.cookie("list_data", list_data_str);
                                   }

                                });
                            }
                            .... 
```

// 关于您的编辑：您是否在此处将任何参数传递给脚本？因为我认为问题出在那个逻辑上。window.onbeforeunload = function(e) { $("#div").load("script.php");

# php - 无法连接到 Dreamhost 的数据库

> ID：13557169
> 
> 赞同：2
> 
> 时间：2012-11-26T00:34:52.300
> 
> 标签：php, mysql, dreamhost

起初对不起我的英语，我有一个重要的问题要解决。我正在尝试连接到我的 Dreamhost 的数据库，但它返回以下错误：

```
Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

我联系了 Dreamhost 支持，他们告诉我，错误似乎是使用新创建的数据库主机名造成的。

我看到主机名现在可以正常工作

现在，我有一个 php 类来连接我的数据库。这是我的连接命令：

```
$data = new MysqlClass('mysql.test.masterweblab.com','user','pass','data_name'); 
```

这适用于我的本地主机。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T19:09:44.563

也许他们使用的 php 或 mysql 版本与您的 localhost 不同？

尝试在新页面上像这样连接到它，看看这是否有效。

```
$link = mysql_connect("mysql.test.masterweblab.com", "user", "pass");
mysql_select_db("data_name") or die(mysql_error());

if ($link){
    echo "it worked!";
}else{
    echo "Failed " . mysql_error() ;
}

mysql_close(); 
```

如果这不起作用，请尝试从 Windows 中的命令提示符 ping 主机。复制ip地址试试。

```
$link = mysql_connect("THE_IP_YOU_COPIED", "USER", "PASS");
mysql_select_db("data_name")or die(mysql_error());

if ($link){
    echo "it worked!"
}else{
    echo "Failed " . mysql_error() ;
}

mysql_close(); 
```

让我们知道这会产生什么。

如果您无法通过 ping 域获得 ip，那就是您的问题！登录到 cpanel 并从 phpmyadmin 获取您的 sql 服务器 ip。

# java - 如何从数据库中获取自动生成的 ID 的 ID

> ID：13557170
> 
> 赞同：0
> 
> 时间：2012-11-26T00:35:04.900
> 
> 标签：java, oracle, jdbc

> **可能重复：**
> [如何在 JDBC 中获取插入 ID？](https://stackoverflow.com/questions/1915166/how-to-get-the-insert-id-in-jdbc)

我有以下表格：

`customer(cid, ...)`

`book(cid, rid)`

`reservation(rid, ...)`

我想在它的表中添加一个预订，然后我想在和`book`之间添加一个关系。`customer``reservation`

我怎么知道`rid`它是自动生成的，当我执行查询时我确实得到了`ResultSet`返回？

这`rid`是使用序列和触发器从 Oracle 自动生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:03:09.197

请参阅您的问题，我相信您正在使用语句。在这种情况下，您可以使用`Statement.RETURN_GENERATED_KEYS`. 另请考虑此[链接](https://stackoverflow.com/a/4224729/706695)，因为以下解决方案可能对 Oracle 数据库有冲突。

这是一个小例子：

```
Connection connection = database.getConnection();
PreparedStatement statement = connection.prepareStatement(myQuery, Statement.RETURN_GENERATED_KEYS);
int count = statement.executeUpdate();
if(count <= 0){
 //value not inserted
}

ResultSet results = statement.getGeneratedKeys();

if(results.next){
 System.out.println(generatedKeys.getLong(1));
} 
```

如果您使用 ORM：

如果您使用的是 JPA `entitiyManager.merge(entity);`（或更新），则应返回带有 ID 的持久实例。与休眠`session.merge(entity);`（或更新）非常相似

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:40:13.000

不知道 java/jsp 的情况如何，但如果它是关系数据库，则必须使用一组查询 - 即获取您知道的一个 id (cid)，然后从 book 表中删除。我知道没有其他方法。

希望有帮助。

# c# - 将文件添加到“内容”

> ID：13557171
> 
> 赞同：0
> 
> 时间：2012-11-26T00:35:32.967
> 
> 标签：c#, asp.net-mvc

我有一个 C# 4 MVC 项目。

我想在我的内容文件夹中添加一个文件并能够下载它，例如 https://{myurl}/Content/myfile.txt

那是行不通的。回应是：

```
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

但是，https://{myurl}/Content/Site.css 会下载 Site.css 文件。

我想我缺少某种愚蠢的配置，但我什至不确定使用什么术语来搜索它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:28:22.557

我没有找到办法。相反，我将路由添加到文件的 Home 控制器。

因此，现在我的网站使用 HomeController 中的 Action 响应 /{myfile.txt}，如下所示：

```
public FileResult GetMyFile()
    {
        return File(Server.MapPath(@"/Content/myfile.txt"),  "text/plain");
    } 
```

对于几个文件，它工作得很好。它可能会更好（因为我可以添加安全性或其他逻辑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:49:11.637

可能的原因：

*   文件不存在（即您根本忘记添加它，或者您将其添加到项目但没有标记为内容，在以后的情况下，部署站点后文件将不存在）。检查文件是否真的存在（应该在服务器上与 site.css 或任何其他有效文件相同的文件夹中）。
    *   TXT（或您使用的任何其他扩展）配置为通过 MVC，而 CSS 不是。[当文件实际存在于指定位置时，](https://stackoverflow.com/questions/4681777/mvc-routing-when-a-file-actually-exists-at-the-specified-location)潜在的解决方法是`RouteExistingFiles=false`如所讨论的 MVC 路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T00:58:52.460

[使用 Map path 解析虚拟路径](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)

这是一个[例子](http://www.dotnetperls.com/mappath)

# javascript - 将画布元素与另一个表格单元格值交换

> ID：13557175
> 
> 赞同：0
> 
> 时间：2012-11-26T00:36:13.900
> 
> 标签：javascript, jquery, canvas, html-table, swap

我有一个 3x3 HTML 表格，每个元素存储一个单独的`<canvas>`元素
表格中有一个单元格包含`text`而不是 a`<canvas>`
当单击包含图像的单元格并且其右侧的单元格包含文本时，我正在尝试交换该单元格的画布与存储在相邻单元格中的文本。
每次单击单元格时，使用以下代码，画布元素都会消失并且只交换文本，使右侧的单元格不再包含文本，或者`<canvas>`
我尝试使用它访问画布`("#blankCell").html()`但它不起作用..任何人都知道如何访问此内容以交换值？

我为此创建了一个简化的 jsFiddle：http: [//jsfiddle.net/bobbyrne01/dbMnM/1/](http://jsfiddle.net/bobbyrne01/dbMnM/1/)

```
$(function () {

    var $tbl = $('<table border="1">').attr('id', 'grid');
    var $tbody = $('<tbody>').attr('id', 'tableBody');
    var tileCount = 0;
            var rowCount = $("#numOfPieces").val();

    for (var i = 0; i < rowCount; i++) {

        var trow = $("<tr>").attr('id', 'row' + i); // New row

        for (var j = 0; j < rowCount; j++) {

            $cell.append(canvasArray[tileCount]); // Each data cell contains separate canvas element
            $cell.appendTo(trow); 
            tileCount++;
        }

        trow.appendTo($tbody);
    }

    $tbl.append($tbody);
    $('table').remove(); // removes previous table if it existed
    $('body').append($tbl);
});

$('#grid tr:nth-child(2) td:last').prev().text("empty");
$('#grid tr:nth-child(2) td:last').prev().attr('id', 'blankCell'); 
```

听点击..

```
 $('body').on('click', '#grid td', function(e) {

    var $this = $(this);
    if ($(this).closest('td').next("#blankCell").length){

        blank = $(this).closest('td').next("#blankCell");

        if (blank.length) {
            //alert('blank to the right');
            $this.before(blank);
        }
        $(this).attr('id', 'blankCell');
        $(this).closest('td').next("#blankCell").attr('id', 'piece');

    } 
```

感谢任何帮助！

它现在只有文本，而不是使用画布元素进行交换。
目标是，如果用户选择旁边的单元格，`blankCell`我想将该单元格与 交换`blankCell`，如果用户选择不在旁边的单元格，`blankCell`我不希望发生任何事情。
现在只关心左右检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:45:50.777

让它变得简单，只交换整个表格单元格，而不是它们的内容或内容字符串和属性：

```
$('#grid').on('click', 'td', function(e) {
    var $this = $(this),
        blank = $this.next("#blankCell");
    if (blank.length) {
        //alert('blank to the right');
        $this.before(blank);
    }
}); 
```

好的，一些更复杂的检查位置的代码包括：

```
var empty = $("#empty").get(0);
$('#grid').on('click', 'td', function(e) {
    if (!empty || this == empty) return; // abort, abort!

    var currow = this.parentNode,
        emptyrow = empty.parentNode;
    var cx = this.cellIndex,
        cy = currow.rowIndex,
        ex = empty.cellIndex,
        ey = emptyrow.rowIndex;
    if (cx==ex && Math.abs(cy-ey)==1 || cy==ey && Math.abs(cx-ex)==1) {
        // empty and this are next to each other in the grid
        var afterempty = empty.nextSibling,
            afterthis = this.nextSibling;
        currow.insertBefore(empty, afterthis);
        emptyrow.insertBefore(this, afterempty);
    }
}); 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/dbMnM/2/)

# linux - Cygwin binutils 配置缓存不正确

> ID：13557176
> 
> 赞同：1
> 
> 时间：2012-11-26T00:37:01.397
> 
> 标签：linux, cygwin, configure, binutils

我正在尝试在 Cygwin 环境中安装 binutils。

我的路径非常糟糕（例如，配置输出的一行是：

```
"checking for ld... (cached) c:/dev/perl/c/bin/../lib/gcc/x86_64-w64-mingw32/4.4.3/../../../../x86_64-w64-mingw32/bin/ld.exe" 
```

，这显然很讨厌），所以我将 Cygwin 的 /etc/profile 更改为路径更简单。

但是，在运行 configure 时，它​​会报告某些值（如上面的）是“（缓存的）”。我认为这可能与 config.cache 文件中的无效状态有关，但在从计算机中删除所有此类文件后，问题仍然存在。

缓存值是什么意思，如何更新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:39:34.210

*make distclean*应该为您提供一个原始的构建环境，让您从头开始。

# regex - 加载 Regexp::Grammars 后使用“普通”正则表达式

> ID：13557180
> 
> 赞同：3
> 
> 时间：2012-11-26T00:38:22.777
> 
> 标签：regex, perl, parsing, regexp-grammars

我正在尝试在应用程序中使用[Regexp::Grammars](https://metacpan.org/module/Regexp%3a%3aGrammars)，但它破坏了许多其他正则表达式。例如，下面的代码：

```
$hello = 'hello';
print 'hello 1' if $hello =~ /hello/; #prints "hello 1"
use Regexp::Grammars;
print 'hello 2' if $hello =~ /hello/; #prints nothing 
```

说明我的问题。我不确定如何处理这个问题，除了反复加载和卸载模块，我什至不确定在我明确卸载模块后是否可以使用扩展的正则表达式`no`。如何在仍然获得 Regexp::Grammars 的强大功能的同时允许正常的正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T00:50:12.803

您无法卸载模块。模块只是一个脚本。卸载模块将取消执行它。

然而，这个模块确实充当了一个词法编译指示，所以你很容易限制它的作用范围。

```
my $grammar = do {
    use Regexp::Grammars;
    qr{
        ...
    }x;
    # Active here
};
# Not active here 
```

在 Regexp::Grammars 处于活动状态时创建的语法可以在 Regexp::Grammars 不处于活动状态的情况下使用，因此只需在定义语法的情况下使 Regexp::Grammars 处于活动状态。（这个模块的界面多么糟糕！）

如果您的代码组织不善，以至于您需要禁用 Regexp::Grammars 中间范围，也可以通过使用

```
no Regexp::Grammars; 
```

请注意，效果`no Regexp::Grammars;`也是词法范围的。

# .net - 如何使用用户友好的客户端密码实现强大的服务器端帐户密码

> ID：13557181
> 
> 赞同：5
> 
> 时间：2012-11-26T00:38:24.613
> 
> 标签：.net, security, encryption

我要求允许用户在单个设备上使用 4+ 数字 pin 样式的密码。显然，这是一个直接用于保护其服务器端帐户的错误密码，因此我想将此 PIN 码“锁定”到特定设备，以便某人必须同时拥有 PIN 码和设备才能登录，以及在哪里可以访问设备无法访问 PIN。此外，他们已经有一个更传统的用户名/密码登录，并且通过在设备上注册，他们正在向这个现有帐户添加一组新的登录凭据。所以这是我目前的计划：

1.  在本地设备注册过程中，本地生成强密码。
2.  将此生成的强密码作为服务器端设备特定帐户密码发送到服务器。
3.  使用他们提供的 4+ 位密码对生成的强密码进行本地对称加密。
4.  将此加密的强密码存储在本地设备上。
5.  在该设备上的后续登录过程中，用户提供相同的 4+ 位密码，用于解密先前存储的强密码，并将强密码发送到服务器进行登录。

所以我相信这可以达到强大的服务器端密码要求。*但是，在注册过程之后，*我还需要尽我所能保护客户端设备免受入侵（在注册过程之前/期间被入侵的设备是一个失败的原因）。显然，使用 4 位加密密钥，只有 10,000 种可能的组合，因此攻击者很容易能够非常快速地尝试对本地加密的强密码的每种组合。**我想知道的是我是否必须选择特定的对称加密方案和/或生成的密码格式，以便攻击者无法仅从本地数据中判断出 10k 次解密尝试中哪一个是正确的？**即，他仍然必须在服务器端登录时尝试每一个 10k 密码。

此外，这种方法有什么明显的错误，或者是实现这些要求的更标准的方法吗？如果有标准方法，是否有适用于这种方法的标准 .NET 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T23:15:52.443

您可以在本地设备中存储盐并使用 PBKDF2 计算 key1。然后使用该密钥服务器端计算 key2，使用单独存储的盐。由于 key1 从未被存储，因此攻击者没有所需的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T23:55:55.693

您的解决方案是“糟糕的”，因为无论您使用的加密多么“强大”，攻击者必须搜索的密钥空间都非常小。即使使用 8 位数字密码，也只有 10^8 或一亿个可能的密钥。

我的方法会有所不同。我首先要问“为什么要在设备上存储*任何凭据？”* 我不相信这个问题有一个好的答案。

而是考虑这个解决方案：

用户想要激活 PIN。首先，他选择PIN；让我们称他的选择为 N。他联系您的 Web 服务，用他的用户名和密码标识自己并发送 N。

在服务器端，您生成一个随机字符串，我们称之为 X。您将 X 和 N 连接起来，然后使用 SHA-256 之类的东西对其进行哈希处理。我们将结果称为 H。服务器现在存储 (X, H)。请注意，您的服务器不*存储*PIN。

稍后，当用户打开移动设备并输入他的 PIN 时，该设备会联系您的 Web 服务并说：“我即将为用户 'Nik Bougalis' 执行 PIN 验证。给我一个挑战！”

服务器为此身份验证创建一个状态：它定位帐户记录，并找到 X 值并发送给用户“X,R”，其中 R 是为此状态生成的随机数。

用户输入他的 PIN，我们称之为 P。移动设备现在连接 X 和 P，并使用服务器使用的相同算法对结果进行散列，生成 H。它现在组合 H 和 R，并对结果进行散列。这会生成一个新的哈希，我们称之为 V。

移动设备将 V 发送到服务器。服务器将数据库中的 H 值和与状态关联的 R 组合在一起，对组合进行散列处理并将其与 V 进行比较。如果它们匹配，则在移动设备中输入的 PIN 是正确的，并且您授予用户访问权限。如果它们不匹配，则输入的 PIN 不正确。

这种方法的优点是服务器可以限制身份验证尝试并减缓暴力攻击。它甚至可以在尝试多次失败后锁定帐户，需要密码才能解锁。

如果您通过 SSL 进行整个交换，您可以跳过发送随机值 R，尽管计算成本非常低，我还是将其包含在内。

一个潜在的缺点是，如果设备无法与服务器对话，则用户无法使用 PIN 进行“登录”。我不知道您是否有允许离线登录的要求，但根据您的特定应用和市场，这可能没什么大不了的——有些人甚至可能称之为优势。

需要明确的是，这不是“超级防弹解决方案”。如果有人闯入并获得对包含 H 值的表的访问权限，他们可以在不知道 PIN 的情况下冒充用户。如果这是一个问题，那里有一些解决方法。

如果您真的对非常高的安全性感兴趣（我怀疑您是，因为您正在考虑使用 4 位 PIN），则可以使用更高级的算法来执行零知识身份证明。

# php - CodeIgniter 控制器 - 将变量传递给 index()

> ID：13557189
> 
> 赞同：0
> 
> 时间：2012-11-26T00:40:12.837
> 
> 标签：php, codeigniter

CodeIgniter 仍然很新，并尝试执行以下操作。我可能做错了，任何方向，非常感谢。

我有一个在提交登录表单时调用的函数，`validate_creds`. 如果成功，表单登录，如果不成功，我想设置`$error_msg`并重新加载表单。`validate_creds()`似乎可以正确验证，但正如您在声明中看到的那样，我`else`想重新加载`index()`传递并`$error_msg`在表单顶部显示消息。

```
public function index($error_msg = '')
        {
            //data
            $data['login'] = "Logged In";

            if($error_msg !== '') {
                $data['error_msg'] = $error_msg;
            }

            //view
            $this->load->view('templates/login/login_header',$data);
            $this->load->view('login/login_form', $data);
            $this->load->view('templates/login/login_footer',$data);
        }

         public function validate_creds()
                    {
                        $this->load->model('user_model');
                        $query = $this->user_model->validate();
                        if($query)//if the users creds have been validated...
                        {
                        $data = array(
                            'username' => $this->input->post('username'),
                            'is_logged_in' => true
                        );

                        $this->session->set_userdata($data);
                        redirect('gallery');
                    }

                    else
                    {
                        $error_msg = "Your username or password is not correct.";
                        $this->index($error_msg);
                    }
                } 
```

**表格留言**

```
<?php if($error_msg != ''): ?>
  <div class="alert alert-error">
    <?php echo $error_msg; ?>
  </div>
<?php endif; ?> 
```

当前正在发生的是一直在`$error_msg`显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:50:21.943

我希望这就是复制粘贴的结果，因为这段代码很难阅读。查看 php codesniffer 并作为行业标准，查看 zend 上有关 php 代码格式的一些文档。

所以你的逻辑需要将错误消息注入到索引函数中（我假设这是你的操作，但只是没有这样标记），如果它没有被注入，它不会声明错误消息，因为它没有被注入。

我会看看 $this->user_model->validate(); 以确保正确处理 http 请求（发布）。

# java - sparql 查询药物相互作用。小错误

> ID：13557190
> 
> 赞同：0
> 
> 时间：2012-11-26T00:40:12.817
> 
> 标签：java, sparql, semantic-web

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX drugbank: <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugbank/> 

SELECT ?Drug ?IntDrug ?IntEffect 
WHERE {    
    ?Int drugbank:interactionDrug1 ?Drug .    
    ?Int drugbank:interactionDrug2 ?IntDrug .
    ?Int drugbank:text ?IntEffect .
} 
```

我在端点上运行此查询`linkedlifedata.com/sparql`。如何修改它以获得 2 种特定药物（药物名称）而不是所有药物组合的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:47:58.470

要在 SPARQL 查询中查询特定 RDF 资源，只需将资源的标识添加到查询中。您可以用`<...>`尖括号或`prefix:name`格式命名资源。我从您的查询结果中挑选了几个药物资源：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX drugbank: <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugbank/> 
PREFIX drugbank-drug: <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugs/>

SELECT ?IntEffect 
WHERE {    
    ?Int drugbank:interactionDrug1 drugbank-drug:DB01203 .    
    ?Int drugbank:interactionDrug2 
               <http://www4.wiwiss.fu-berlin.de/drugbank/resource/drugs/DB00414> .
    ?Int drugbank:text ?IntEffect .
} 
```

此查询将列出这两种药物的所有相互作用效应。在这种情况下，这只是一次交互。

# ios - NSURL isFileURL 总是返回 NO

> ID：13557191
> 
> 赞同：15
> 
> 时间：2012-11-26T00:40:36.700
> 
> 标签：ios, filesystems, nsurl, nsfilemanager, avcapturemoviefileoutput

有人可以向我解释为什么下面的代码：

```
NSString* filePathString = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];

NSLog(@"%i", [[NSURL URLWithString:filePathString] isFileURL]);
NSLog(@"%@", filePathString); 
```

输出：

0

“/var/mobile/Applications/28ADFC19-874C-4304-94B5-F6441CAE9FAD/文档”

这意味着此 url 不是文件 URL。显然，它是。

* * *

**背景：**

我正在尝试使用 AVCaptureMovieFileOutput 将电影录制写入文件，但我证明的文件 url 给出了错误：

*** 由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'*** -[AVCaptureMovieFileOutput startRecordingToOutputFileURL:recordingDelegate:] - 无法记录到 URL /var/mobile/Applications/28ADFC19-874C-4304-94B5-F6441CAE9FAD/Documents/media/CrKNjNhe9so2LRnD9iHK .mov 因为它不是文件 URL。

对我来说，这看起来像是一个文件 URL，就像原始示例一样。是什么赋予了？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-26T00:43:48.473

如果`NSURL`要从文件路径创建一个，则必须使用`NSURL fileURLWithPath:`. 使用`URLWithString`假定字符串是非文件 URL。

`NSURL`仅当以 . 开头时，它才是文件URL `file://`。

# c# - 无法从另一个线程访问对象

> ID：13557192
> 
> 赞同：3
> 
> 时间：2012-11-26T00:40:38.567
> 
> 标签：c#, wpf, multithreading, backgroundworker, dispatcher

我知道这已经在其他问题上进行了讨论，但我在这里把头发拉出来——显然遗漏了一些明显的东西。我会尽量给你一些背景信息，所以这里......

我有一个正在冻结的 UI 线程，所以我创建了一个后台工作程序来执行所有繁重的处理以保持我的 UI 交互。

我需要为一些弧/路径生成坐标，然后在画布上绘制。后台工作人员处理并运行它的工作完成方法，它将 PathGeometry 与其他一些数据一起存储在一个列表中。然后，我在我的 UI 线程中调用了一个 update() 方法，从我的 backgroundworker，使用我传递给 backgroundworker 的对象。

我的问题是，当我开始在 UI 线程中构建 Path 对象（它不允许我在后台工作线程中构建它们）时，我无法访问 PathGeometries。我的对象是一个 CommunicationArc，它包含 PathGeometry、不透明度、颜色等。

```
The calling thread cannot access this object because a different thread owns it. 
```

我可以访问对象的其他部分，但**不能**访问 PathGeometry，我不知道为什么。随着 workcomplete 方法的运行，backgroundworker 肯定已经完成，并且 Arcs 都存储在我的列表中。我只是想在我的 UI 线程中读取弧线，对它们进行更多处理，然后继续绘制它们。

我曾尝试使用我的 UI 线程中的 Dispatcher，如下所示：

```
arc.pathGeometry.Dispatcher.BeginInvoke((Action)(() =>
            {
                MessageBox.Show(arc.pathGeometry.ToString());
            })); 
```

但是我不确定我所做的是否正确，调用 Dispatcher 的各种方法要么不做任何事情，要么将所有内容锁定在 BeginInvoke() 上。

任何帮助都会很棒，我觉得我在这里绕圈子！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:10:51.540

您需要直接在 UI 线程上创建和操作几何对象。您执行的任何线程处理都不能直接访问几何对象，它们必须被分派到创建它们的线程 - UI 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:56:24.970

您正在创建`PathGeometry`对象`background thread`，所以`arc.pathGeometry.Dispatcher`会给您`Dispatcher of the background thread`，而不是 UI 线程。

你需要把你的处理放在`UI dispatcher`你可以这样做的地方 -

```
App.Current.Dispatcher.BeginInvoke((Action)(() =>
{
    MessageBox.Show(arc.pathGeometry.ToString());
})); 
```

# javascript - 使 AjaxFileUpload 成为与克隆按钮一起使用的动态函数？

> ID：13557194
> 
> 赞同：1
> 
> 时间：2012-11-26T00:40:51.723
> 
> 标签：javascript, ajax, dynamic, file-upload, clone

我有一个图片上传字段，下面的代码可以在一次上传中正常工作。然后我克隆了文件上传字段，并增加了 ID。克隆的（尚未更改的）ID 不适用于此功能，即使我在其中手动更新了 ID。如何创建一个无需重写代码即可添加就地上传（=不刷新）的输入字段的系统？我不想使用多个文件上传，因为我需要特定位置的图像，一张一张。

$（函数（）{

```
var btnUpload=$('#upload');
var uploadstatus=$('#uploadstatus');
var files=$('#files');
var title=document.getElementById('title').value;
var step=document.getElementById('stepnumber').value;
new AjaxUpload(btnUpload, {
    action: 'uploadstep.php?title='+title+'-'+step,
    name: 'uploadstep',
    onSubmit: function(file, ext){
        if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
               uploadstatus.text('Only JPG, PNG or GIF files are allowed');
               return false;
        }
           uploadstatus.html('<img src="ajax-loader.gif" height="16" width="16">');
        },
        onComplete: function(file, response){

            uploadstatus.text('');

            files.html('');

            $('#remove').show();

            if(response==="success"){
                $('<li style="list-style: none; display: block;"></li>').appendTo('#files').html('<img src="images/'+rtitle+'-'+step+'-'+file+'" alt="" width="170"/><br />').addClass('success').attr('id', 'pic');
                $('#stepurl1').val('images/'+rtitle+'-'+step+'-'+file+'');
            } else{
                $('<li style="list-style: none; display: block;"></li>').appendTo('#files').text(file).addClass('error');
            }
        }
    });

});

$(function() {
    $('#remove').click(function() {
      $('#pic').html('')
      $('#stepurl').val('');
      $('#remove').hide();
      $('#uploadstatus').text('');
      $('#upload').val('Add Photo');
    }); 
}); 
```

# java - 如何检查字符串是否是有效的类标识符？

> ID：13557195
> 
> 赞同：11
> 
> 时间：2012-11-26T00:40:58.983
> 
> 标签：java, class

是否有一些很好的方法来检查某个字符串是否代表一个有效的（完全限定的）Java 类名？例如`org.comPAny.ClassName`，甚至`mYcRAZYcLASSnAME`是有效的类名，但类似`org..package.MyClass`或`org.ClassName.`不是。我想在不加载该类的情况下检查类名的有效性。

Java中有一些方便的方法来检查吗？或者你能提供被授予涵盖所有情况的正则表达式吗？

编辑：请不要建议第三方库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T00:45:05.350

如果您真的想要一个防弹解决方案，`"\\."`请先将字符串拆分并使用

```
Character.isJavaIdentifierStart 
```

和循环中

```
Character.isJavaIdentifierPart 
```

检查零件是否是有效的标识符名称。

**编辑：** `#split(String)`将字符串解释为正则表达式，因此请确保将字符串拆分，`"\\."`而不是`"."`按照最少意外原则所期望的那样。多么糟糕的 API 设计，哎呀！这就是你在你的语言中没有正则表达式文字所得到的……</p>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-12T21:26:35.123

*正确的*方法是使用[javax.lang.model.SourceVersion.isName](https://docs.oracle.com/javase/8/docs/api/javax/lang/model/SourceVersion.html#isName-java.lang.CharSequence-)方法（Java 标准库的一部分）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T00:48:51.587

```
public static boolean isValidJavaIdentifier(String s)
{
 // an empty or null string cannot be a valid identifier
 if (s == null || s.length() == 0)
 {
    return false;
 }

 char[] c = s.toCharArray();
 if (!Character.isJavaIdentifierStart(c[0]))
 {
    return false;
 }

 for (int i = 1; i < c.length; i++)
 {
    if (!Character.isJavaIdentifierPart(c[i]))
    {
       return false;
    }
 }

 return true;
} 
```

参考： [http ://www.java2s.com/Code/Java/Reflection/CheckwhetherthegivenStringisavalididentifieraccordingtotheJavaLanguagespecifications.htm](http://www.java2s.com/Code/Java/Reflection/CheckwhetherthegivenStringisavalididentifieraccordingtotheJavaLanguagespecifications.htm)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-13T22:01:35.567

不同版本的 Java 平台支持不同的 Unicode 版本。

所以不同的版本会支持不同的*有效*标识符。

以下说明了 BMP 之外的标识符和 Java 保留字。

```
import java.util.Arrays;

public enum PackageName {

  SIMPLE, QUALIFIED, INVALID;

    public static final PackageName check(String name) {
    PackageName ret = PackageName.INVALID;
    int[] codePoint;
    int index = 0, dotex = -1;
    boolean needStart = true;
    escape: {
      if(name == null || name.isEmpty()) break escape;
      if(name.codePointAt(0) == '.') break escape;
      codePoint = name.codePoints().toArray();
      while (index <= codePoint.length) {
        if(index == codePoint.length) {
          if(codePoint[index - 1] == '.'){
            ret = PackageName.INVALID; break escape;}
          int start = dotex + 1;
          int end = index;
          start = name.offsetByCodePoints(0, start);
          end = name.offsetByCodePoints(0, end);
          String test = name.substring(start, end);
          if(!(Arrays.binarySearch(reserved, test) < 0)){
            ret = PackageName.INVALID; break escape;}
          if(!(ret == PackageName.QUALIFIED)) ret = PackageName.SIMPLE;
          break escape;
        }
        if(codePoint[index] == '.') {
          if(codePoint[index - 1] == '.'){
            ret = PackageName.INVALID;  break escape;}
          else {
            needStart = true;
            int start = dotex + 1;
            int end = index;
            start = name.offsetByCodePoints(0, start);
            end = name.offsetByCodePoints(0, end);
            String test = name.substring(start, end);
            if(!(Arrays.binarySearch(reserved, test) < 0)) break escape;
            dotex = index;
            ret = PackageName.QUALIFIED;
          }
        } else if(Character.isJavaIdentifierStart(codePoint[index])) {
          if(needStart) needStart = false;
        } else if((!Character.isJavaIdentifierPart(codePoint[index]))){
          ret = PackageName.INVALID; break escape;
        } 
        index++;
      }
    }
    return ret;
  }

  private static final String[] reserved;

  static {
    reserved = new String[] { "abstract", "assert", "boolean", "break", "byte",
        "case", "catch", "char", "class", "const", "continue", "default", "do",
        "double", "else", "enum", "extends", "false", "final", "finally",
        "float", "for", "if", "goto", "implements", "import", "instanceof",
        "int", "interface", "long", "native", "new", "null", "package",
        "private", "protected", "public", "return", "short", "static",
        "strictfp", "super", "switch", "synchronized", "this", "throw",
        "throws", "transient", "true", "try", "void", "volatile", "while" };
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-11T12:02:48.920

您的问题有一个很好的解决方案：

```
public static boolean isFullyQualifiedClassname( String classname ) {
      if (classname == null) return false;
      String[] parts = classname.split("[\\.]");
      if (parts.length == 0) return false;
      for (String part : parts) {
          CharacterIterator iter = new StringCharacterIterator(part);
          // Check first character (there should at least be one character for each part) ...
          char c = iter.first();
          if (c == CharacterIterator.DONE) return false;
          if (!Character.isJavaIdentifierStart(c) && !Character.isIdentifierIgnorable(c)) return false;
          c = iter.next();
          // Check the remaining characters, if there are any ...
          while (c != CharacterIterator.DONE) {
              if (!Character.isJavaIdentifierPart(c) && !Character.isIdentifierIgnorable(c)) return false;
              c = iter.next();
          }
      }
      return true;
  } 
```

资料来源：[http ://www.java2s.com/Code/Java/Reflection/DeterminewhetherthesuppliedstringrepresentsawellformedfullyqualifiedJavaclassname.htm](http://www.java2s.com/Code/Java/Reflection/DeterminewhetherthesuppliedstringrepresentsawellformedfullyqualifiedJavaclassname.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T06:49:19.237

你见过这个吗 ？

[http://commons.apache.org/sandbox/classscan/apidocs/org/apache/commons/classscan/builtin/ClassNameHelper.html](http://commons.apache.org/sandbox/classscan/apidocs/org/apache/commons/classscan/builtin/ClassNameHelper.html)

这里方法`isValidIdentifier`**检查提供的名称是否是有效的 java 包名称部分或类标识符。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-12T17:03:43.323

使用正则表达式可以轻松实现防弹解决方案：

```
String NAME = "\\p{javaJavaIdentifierStart}\\p{javaJavaIdentifierPart}*";
String DOT = "\\.";
String DOTTED_NAME = NAME + "(?:" + DOT + NAME + ")*";
Pattern DOTTED_NAME_PATTERN = Pattern.compile(DOTTED_NAME);

boolean isJavaName(String name) {
    Matcher matcher = DOTTED_NAME_PATTERN.matcher(name);
    return matcher.matches();
} 
```

# css - 在页面加载时闪烁的渐变背景上的 CSS 覆盖图像掩码

> ID：13557196
> 
> 赞同：2
> 
> 时间：2012-11-26T00:41:00.133
> 
> 标签：css, background, gradient, alpha, mask

我有一个问题想在没有 JavaScript 预加载的情况下解决。页面顶部的“jumbotron”或横幅由覆盖有 alpha 蒙版图像的背景渐变组成。

当下面的页面加载时，渐变背景在图片加载前的几分之一秒内可见（OS/X 上的 Chrome 23 - 浏览器缓存为空）：

[http://criticue-staging.herokuapp.com](http://criticue-staging.herokuapp.com)

图像很小；我试过使用 :before 来预加载图像，但它似乎不起作用。

这是 jumbotron 的 CSS：

```
.jumbotron {
  background: #550074; /* Old browsers */
  background-image: url(/images/jumbotronbg.png),     -moz-linear-gradient(45deg,  #550074 14%, #CC26A7 82%); /* FF3.6+ */
  background-image: url(/images/jumbotronbg.png),     -webkit-gradient(linear, left bottom, right top, color-stop(14%,#550074), color-stop(82%,#CC26A7)); /* Chrome,Safari4+ */
  background-image: url(/images/jumbotronbg.png),  -webkit-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* Chrome10+,Safari5.1+ */
  background-image: url(/images/jumbotronbg.png),     -o-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* Opera 11.10+ */
  background-image: url(/images/jumbotronbg.png),     -ms-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* IE10+ */
  background-image: url(/images/jumbotronbg.png),     linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#550074', endColorstr='#CC26A7',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
} 
```

有什么可以做的，最好是没有 JavaScript 预加载？

非常感谢你。

更新：我也尝试嵌入图像，但它没有成功：

这是完整的 CSS：

```
.jumbotron {
  background-color: #310046;

  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),     
    -moz-linear-gradient(45deg,  #550074 14%, #CC26A7 82%); /* FF3.6+ */
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),     
    -webkit-gradient(linear, left bottom, right top, color-stop(14%,#550074), color-stop(82%,#CC26A7)); /* Chrome,Safari4+ */
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),  
    -webkit-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* Chrome10+,Safari5.1+ */
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),     
    -o-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* Opera 11.10+ */
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),    
    -ms-linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* IE10+ */
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAUCAYAAABF5ffbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpcj8EJACEMBMOSAgQR/Nt/DVeR4Et8HhtYCBFkk6jD6Gutr/duWntvQ2vNzjkxYLLHvdfmnDFksscYw957MWSyBwtyuHUAcTIb4mS2i6OnMcyNuKiO4Vkdub06BlMc/l8XUB2ZToaYvMn06sj06ki2Z0fVqI7BrI6sfwEGADdYfUa4U86zAAAAAElFTkSuQmCC),     
    linear-gradient(45deg,  #550074 14%,#CC26A7 82%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#550074', endColorstr='#CC26A7',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */

  text-align: center;
  position: relative;
  margin: 0;
  padding: 30px 0 40px 0;
  height: 300px;

  -webkit-box-shadow: inset 0px -3px 3px #211;
     -moz-box-shadow: inset 0px -3px 3px #211;
          box-shadow: inset 0px -3px 3px #211;

  margin-bottom: 30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:41:52.317

You can set a `navbar-inner` to a height of 48px. The height of the image won't change, and you set the `padding-top` and `padding-bottom` as `10px`. Will prevent resizing.

# php - 如何抓取 jquery 驱动的网站？

> ID：13557197
> 
> 赞同：0
> 
> 时间：2012-11-26T00:41:33.417
> 
> 标签：php, javascript, singlepage, google-crawlers

我正在构建一个单页 javascript 驱动的网站。我**在主页上使用 php 作为 json 对象回显**了所有页面的所有必要数据。然后我使用为每个页面制作的自定义插件初始化页面，它使用相关的 json 数据动态构建 dom，我将这些数据传递给插件，所以**我没有任何 ajax 请求**。我网站上的链接采用以下格式！#about、!#home 等...目前插件的 init 方法在**hashchange**上调用。我应该怎么做才能使这些页面可以被谷歌机器人抓取，以及如何为每个页面制作不同的标题和描述元标记？

我尝试了在谷歌文档和许多其他网站上找到的各种东西。我已将链接从 #mylink 更改为 #!mylink ，因此谷歌**应该**将其解释为 get _escape_fragment_ 变量，然后我尝试添加这段 php 代码：

```
if ($fragment = $_GET['_escaped_fragment_']) {
    header("Location: Project.php?id=$fragment", 1, 301);
    exit;
} 
```

其中 project.php 是一个包含相关信息的 html 快照，我希望对其进行抓取。基本上只是核心信息。但据我所知，没有任何反应...... :( 毕竟有没有办法在没有 AJAX 请求的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:54:14.170

Google 实际上已经发布了如何使 ajax 可抓取 - 谁能更好地告诉你如何！？

[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

**该页面的直接链接**

*   [学到更多](https://developers.google.com/webmasters/ajax-crawling/docs/learn-more)
*   [入门指南](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)
*   [创建 HTML 快照](https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot)
*   [常问问题](https://developers.google.com/webmasters/ajax-crawling/docs/faq)
*   [规格](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

**替代指南**

如果您觉得这很难理解，请在 SitePoint 上试试这个，它会引导您了解它是如何完成的：[http ://www.sitepoint.com/google-crawl-index-ajax-applications/](http://www.sitepoint.com/google-crawl-index-ajax-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:44:51.890

好吧，唯一的方法是构建站点地图并将指向 xml 站点地图文件的链接添加到每个页面；通过谷歌网站管理员工具提交您的站点地图。

# iphone - 在运行时添加标志（Xcode Instruments）

> ID：13557204
> 
> 赞同：6
> 
> 时间：2012-11-26T00:42:30.283
> 
> 标签：iphone, objective-c, ios, xcode, instruments

我正在使用 Instruments 在我的 iOS 应用程序中调试我的分配，并且想知道是否有办法在代码运行时向跟踪添加标志。例如，我希望在用户点击该按钮后自动添加一个标有“用户点击按钮 X”的标志。

从 Apple 文档看来，您只能在“事后”添加这些标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T13:54:26.753

您可以尝试这里推荐的方法：

[http://ioscodesnippet.com/post/43288248813/method-swizzling-in-objective-c](http://ioscodesnippet.com/post/43288248813/method-swizzling-in-objective-c)

基本上，您可以将跟踪添加到您知道要提前跟踪的特定方法上，方法是为您的自定义实现调出实际实现，该实现在调用实际实现之前记录一个跟踪语句（在这种情况下，您可以覆盖 -[ UIButton endTrackingWithTouch: withEvent:])。

# mysql - MySql - 保持最小行数的触发器

> ID：13557205
> 
> 赞同：0
> 
> 时间：2012-11-26T00:42:45.733
> 
> 标签：mysql, triggers

如果删除语句使行数低于 2000，我想撤消它：

```
CREATE TRIGGER Trig1
AFTER DELETE ON Tab1

FOR EACH ROW
IF (SELECT COUNT(*) FROM Table1) < 2000
   BEGIN
      INSERT INTO Table1 (select * from old);
   END;
END IF; 
```

但它不起作用。有人可以告诉我我做错了什么，这应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:23:53.643

尝试，

```
INSERT INTO Table1
SELECT * 
FROM   old 
```

要记住的点

*   表的数量和数据类型必须在两个表上匹配，因为您正在使用`*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:14:26.443

`BEFORE DELETE`如果操作会导致记录太少，则通过创建引发错误（从而导致语句中止）的触发器会更好：

```
DELIMITER ;;

CREATE TRIGGER foo BEFORE DELETE ON Table1 FOR EACH ROW
IF (SELECT COUNT(*) FROM Table1) <= 2000 THEN SIGNAL SQLSTATE '45000' SET
  MESSAGE_TEXT = 'Cannot delete when table would result in too few records';
END IF;;

DELIMITER ; 
```

请注意，[`SIGNAL`](https://dev.mysql.com/doc/en/signal.html)仅在 MySQL 5.5 中引入。如果使用较早的版本，则必须改为强制 MySQL 通过执行错误操作引发异常；我经常`CALL`使用例如不存在的程序`CALL raise_error;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:17:26.700

你可以试试这段代码：

```
DELIMITER $$
DROP TRIGGER IF EXISTS `Trig1`$$
CREATE TRIGGER `Trig1`
AFTER DELETE ON Table1

FOR EACH ROW
BEGIN
IF (SELECT COUNT(*) FROM Table1) < 2000 THEN
    INSERT INTO Table2(field1, field2, field3) VALUES(old.field1, old.field2, old.field3);
END IF;
END$$

DELIMITER ; 
```

我实际上已经对其进行了测试，并且它适用于我。

# css - 移动设备上的引导全宽背景

> ID：13557212
> 
> 赞同：2
> 
> 时间：2012-11-26T00:43:24.103
> 
> 标签：css, mobile, twitter-bootstrap, cross-browser, background-image

我正在尝试在我的引导站点上获得全宽背景。我有这个适用于桌面浏览器，但移动设备没有玩球。这是我的代码（简化）；

```
html {
   background:url(../img/bg.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  height: 100%;
  background-color: #131516 !important;
}
body {
  background-color: transparent !important;  (to override bootstraps default color)
} 
```

我遇到的问题是我正在测试的许多移动设备（android/iphone）不支持固定位置，因此当您滚动页面时背景图像会向上移动。我的网站都建在一个页面中，因此将上面的代码仅移动到 body 标签意味着背景图像被真正拉伸，因为内容（现在 100% 高度）在垂直方向上很长。

如果有更好的 css 方式来做到这一点，那将是理想的，但我可以想象 jquery 是需要的。我从[这里](http://css-tricks.com/perfect-full-page-background-image/)尝试了一些 jquery 示例，但没有一个可以正常工作。有没有人有一个简单的跨平台方式来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T17:38:08.887

制作一个 div 并使用 position: fixed。

```
.background {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:url(../img/bg.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  height: 100%; /* or change accordingly - not quite clear in question */
  width: 100%;
  background-color: #131516 !important;
} 
```

希望这可以帮助。

# unicode - 带有 unicode 字符的 Solr 4.0 过滤器查询 (fq)

> ID：13557215
> 
> 赞同：1
> 
> 时间：2012-11-26T00:43:47.750
> 
> 标签：unicode, solr

我试图找出解决此问题的最佳方法是什么，其中我过滤的某些术语（使用 fq）具有 unicode 字符，例如：

```
CompanyName™
Something® 
```

使用我当前的索引，Solr 无法返回任何结果。[ASCII](http://lucidworks.lucidimagination.com/display/solr/Filter+Descriptions#FilterDescriptions-ASCIIFoldingFilter)在索引时折叠是正确的方式还是使用字段[qparser](https://stackoverflow.com/questions/5265056/special-characters-in-solr-filter-fq)；或者可能还有其他我应该做的事情？我在 Solr 4.0 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:22:27.837

我建议在索引时使用[ASCIIFoldingFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)。事实证明，这可以在我们使用它的场景中提供最佳结果。

# objective-c - iOS Blocks - 定义 UIView 类动画块

> ID：13557218
> 
> 赞同：4
> 
> 时间：2012-11-26T00:44:04.507
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, objective-c-blocks

我正在尝试创建一个自定义块，如`UIView`动画块。基本上我希望能够传递一个方法或任意数量的指令，并提供一个完成处理程序。我的问题是如何指定块定义的参数部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:37:01.530

您可以有一个方法声明，例如：

```
- (void) performAnimationWithCompletion:(void (^)(BOOL finished))completion {

[UIView animateWithDuration:0.5 animations:^{
            // your own animation code 
            // ...
            } completion:^(BOOL finished) {
                // your own completion code

                // if completion block defined, call it
                if(completion){
                    completion(YES);
                }
            }];

} 
```

然后，您可以使用以下命令调用它：

```
[instance performAnimationWithCompletion:^(BOOL complete){
      // define block code to be executed on completion
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T00:46:55.457

```
[UIView animateWithDuration:0.3
                          delay:0
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         // other animations here

                     }
                     completion:^(BOOL finished){
                         // ... completion stuff
                     }
     ]; 
```

# php - PHP simplexml_load_string cURL

> ID：13557219
> 
> 赞同：0
> 
> 时间：2012-11-26T00:44:05.600
> 
> 标签：php, xml, curl, simplexml

> **可能重复：**
> [PHP 命名空间 simplexml 问题](https://stackoverflow.com/questions/2098170/php-namespace-simplexml-problems)

我正在通过 PHP/cURL 获取 XML 字符串，并希望将其用作 simplexml 对象，但它是空的。代码：

```
$result = curl_exec($ch);

echo 'RESULT VAR:<br>';
echo htmlentities($result).'<br><br>';

$xml = simplexml_load_string($result);

echo 'OUTPUT of xml->InsertObservationResponse->AssignedObservationId: <br>';
echo "ID: ".($xml->InsertObservationResponse->AssignedObservationId).'<br>'; 
```

产生这个输出：

```
RESULT VAR:
<?xml version="1.0" encoding="UTF-8"?> <sos:InsertObservationResponse xmlns:sos="http://www.opengis.net/sos/1.0"> <sos:AssignedObservationId>o_1626</sos:AssignedObservationId> </sos:InsertObservationResponse>

OUTPUT of xml->InsertObservationResponse->AssignedObservationId:
ID: 
```

我要输出的内容：

```
RESULT VAR:
    <?xml version="1.0" encoding="UTF-8"?> <sos:InsertObservationResponse xmlns:sos="http://www.opengis.net/sos/1.0"> <sos:AssignedObservationId>o_1626</sos:AssignedObservationId> </sos:InsertObservationResponse>

    OUTPUT of xml->InsertObservationResponse->AssignedObservationId:
    ID: o_1626 
```

[我还使用来自https://github.com/IMSoP/simplexml_debug](https://github.com/IMSoP/simplexml_debug)的 simplexml 调试库 和

```
simplexml_dump($xml); 
```

印刷：

```
SimpleXML object (1 item) [ Element { Namespace: 'http://www.opengis.net/sos/1.0' Namespace Alias: 'sos' Name: 'InsertObservationResponse' String Content: ' ' Content in Namespace sos Namespace URI: 'http://www.opengis.net/sos/1.0' Children: 1 - 1 'AssignedObservationId' Attributes: 0 } ] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:11:28.970

你可以像这样使用[孩子](http://www.php.net/manual/en/simplexmlelement.children.php)：

```
$xml->children('sos', true)->AssignedObservationId; 
```

# python - 在 Python Django 中计算每个“匹配”的平均分

> ID：13557221
> 
> 赞同：2
> 
> 时间：2012-11-26T00:44:18.437
> 
> 标签：python, sql, database, django

假设我有这两个模型：

```
class Match(models.Model):
    ...

class Player(models.Model):
    match=models.ForeignKey(Match)
    points=models.IntegerField() 
```

我想计算每场比赛的平均分数，这意味着我需要将所有球员的分数相加，然后除以比赛数。我很难弄清楚如何在 Django 中有效地做到这一点。

我试过谷歌搜索，并搜索 StackOverflow，但我很难弄清楚我应该首先寻找哪些术语。

```
match = Match.objects.annotate(total_points=Sum('player__points')) 
```

match[0].total_points 现在返回一场比赛的总分，我需要将每场比赛的总分相加，然后除以总比赛。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:58:12.937

使用[`aggregate`](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-over-a-queryset)对总点数求和，[`count()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#count)找到匹配的数量，然后在 python 中除以得到每个匹配的平均点数。

```
from django.db.models import Sum
total_points = Player.objects.aggregate(Sum('points'))['points__sum']
num_matches = Match.objects.count()
average_points_per_match = total_points / num_matches 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T16:49:21.477

我认为这可以使用一个查询更有效地解决，如下所示

```
from django.db.models import Avg
result = Match.objects.all().aggregate(Avg('score'))

result
{'score__avg': 4.012987012987013} 
```

我在尝试实现类似目标时发现了这个问题，但也想知道平均得分基于多少匹配。我最终解决如下。

```
result = Match.objects.all().annotate(num_matches=Count('id')).aggregate(Avg('score'), Sum('num_matches'))

result
{'num_matches__sum': 77, 'score__avg': 4.012987012987013} 
```

# javascript - 优化正则表达式以过滤数千个 HTML 选择选项

> ID：13557225
> 
> 赞同：2
> 
> 时间：2012-11-26T00:45:16.807
> 
> 标签：javascript, jquery, regex, optimization, diacritics

# 背景

我为 HTML元素开发了一个基于 jQuery 的[穿梭小部件](https://stackoverflow.com/a/13557000/59087)`select`，因为我找不到一个经过最少编码并提供了一个正则表达式过滤器来补偿[变音符号](http://en.wikipedia.org/wiki/Diacritic)的小部件。

# 问题

当向 中添加几千个条目时`select`，正则表达式过滤器会变慢。你可以看到如下问题：

1.  浏览到：http: [//jsfiddle.net/U8Xre/2/](http://jsfiddle.net/U8Xre/2/)
2.  单击结果面板中的输入字段。
3.  键入任何正则表达式（例如，`^a.*ai`）。

# 代码

我相信罪魁祸首潜伏在这里：

```
var options = $src.empty().scrollTop( 0 ).data( "options" );
var search = $.trim( $input.val() );
var regex = new RegExp( search, 'gi' );
var len = options.length;
var $html = $(document.createElement( 'option' ));
for( var i = 0; i < len; i++ ) {
  var o = options[ i ];
  if( o.text.dediacritics().match( regex ) !== null ) {
    $src.append( $html.clone().text( o.text ).val( o.value ) );
  }
}
$src.css( 'width', $input.width() + 4 ); 
```

`$src`来源在哪里，`$('#select')`并`String.prototype.dediacritics`在小提琴中定义。上面的代码针对每个按键运行。还有一个相关的片段：

```
// Create a copy of the source options to use when matching the regex.
var $options = [];
$src.find( "option" ).each( function() {
  $options.push( { value: $(this).val(), text: $(this).text() } );
});
$src.data( "options", $options ); 
```

这会复制源列表中的选项，但只运行一次。（这会导致在穿梭选项时出现重复错误，但是将上述代码添加到`input`事件处理程序中会更加减慢过滤器。）

# 问题

如何使代码几乎实时地对多达 5,000 个单词的列表执行正则表达式过滤？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:51:19.540

一个小评论，如果您没有使用正则表达式匹配的结果，那么您应该使用正则表达式测试：

```
 if( o.text.dediacritics().match( regex ) !== null ) { 
```

使用测试：

```
 if( regex.test(o.text.dediacritics()) ) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:03:36.187

我建议你

*   创建一个包含所有选项名称列表的多行字符串，每个选项名称位于单独的行中
*   将正则表达式应用于此多行字符串以通过删除不匹配的行来过滤其内容
*   使用匹配行更新 html 作为选择元素的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T01:34:06.797

我猜想更难的工作是重复调用`dediacritics()`（带有许多正则表达式替换）而不是进行搜索（尽管我没有进行任何分析）。因此，您应该缓存这些去变音符号的字符串并仅通过它们进行搜索。顺便说一句，[`test`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)通常比`match`.

此外，您应该尽可能避免 DOM 操作 - 在清空和重新附加整个选项列表 onkeypress 时，您有很多操作。

```
// once:
var options = [],
    src = $src[0]; // or whatever to get the DOM element
$.each( src.options, function() {
    options.push( { el: this, text: $(this).text().dediacritics(), hidden:false } );
});
// you might put it on the element via .data(), but need not

// onkeypress:
var regex = new RegExp( $.trim($input.val()), 'i' );
var curEl = src.firstChild;
for (var i=0; i<options.length; i++) {
    var option = options[i];
    if (regex.test( option.text )) {
        if (option.hidden)
            src.insertBefore(option.el, curEl);
        curEl = option.el.nextSibling;
        option.hidden = false;
    } else {
        if (!option.hidden) {
            curEl = option.el.nextSibling;
            src.removeChild(option.el);
        }
        option.hidden = true;
    }
} 
```

[Demo](http://jsfiddle.net/U8Xre/5/)：这是非常快的（“实时”），但是当调用5000 次时，您可以感受到构造`options`数组所需的时间。`dediacritics()`

# wxpython - wxPythons Super 方法和子类化按钮等小部件有什么区别？

> ID：13557235
> 
> 赞同：0
> 
> 时间：2012-11-26T00:48:50.230
> 
> 标签：wxpython, toggle, subclass

有人可以解释一下使用 wxPython 小部件子类与 super() 的区别/优势吗？我正在尝试创建一个没有封闭边框矩形的切换按钮，并且我想使用 wx.lib.statbmp 模块中的 GenStaticBitmap 作为基类。

我正在尝试将三个位图传递给子类，但都没有成功地让这两种方法起作用。我不确定如何构造子类并传递参数或使用 super 创建类。

（我有 30 多个按钮要创建，这就是为什么我要对控件进行子类化）

该代码作为 GenStaticBitmap 放置在面板中时可以工作 感谢您的任何帮助或建议。

这是我尝试过的：

```
class MyBitmapButton(gen_statbmp.GenStaticBitmap):
    """ This is the subclassed version of the GenStaticBitmap to allow embedding bitmaps in the button"""
    def __init__(self, parent, off_bmp,on_bmp,hover_bmp):
        gen_statbmp.GenStaticBitmap.__init__(parent,id,off_bmp)
        self.bmapoff = off_bmp
        self.bmapon = on_bmp
        self.bmaphover= over_bmp
        self.state='off'
    def On_Hover(self,event):
        self.SetBitmap(self.bmphover)
        print 'on hover button state is',self.state
    def On_Leave(self,event):       
        #print 'on enter button state is',self.state
        if self.state=='on':
            print self.state
            self.SetBitmap(self.bmapon)
            self.state='on'
        if self.state=='off':
            self.SetBitmap(self.bmapoff)
            self.state='off'
        print 'on leave button state is',self.state
    def On_Click(self,event):
        #print 'on enter button state is',self.state
        if self.state=='on':
            print self.bmapbtn.state
            self.SetBitmap(self.bmapoff)
            self.state='off'
        elif self.state=='off':
            self.SetBitmap(self.bmapon)
            self.state='on'
        print 'on leave button state is',self.state 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:27:36.283

wxPython 档案解释了整个“超级”意识形态：

[http://wxpython-users.1045709.n5.nabble.com/Super-object-usage-explanation-td3408498.html](http://wxpython-users.1045709.n5.nabble.com/Super-object-usage-explanation-td3408498.html)

如果您尝试创建自定义小部件，您应该查看 wx.lib 小部件。我认为它们都是自定义小部件。

也可以看看：

*   [http://wiki.wxpython.org/CreatingCustomControls](http://wiki.wxpython.org/CreatingCustomControls)
*   [http://zetcode.com/wxpython/customwidgets/](http://zetcode.com/wxpython/customwidgets/)

# ruby-on-rails - RakeTask 在 Rails 项目中返回“不知道如何构建任务”

> ID：13557236
> 
> 赞同：0
> 
> 时间：2012-11-26T00:48:50.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake-task, rakefile

我是新手，在运行以下 rake 任务时不断收到错误消息“不知道如何构建任务'create_postgis_template'”。

我的 rake 文件如下所示：

```
require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rdoc/task'
require 'tasks/rails'

namespace :postgres do
  desc "create postgis db template on osx boxes"
  task :create_postgis_template do
    print "Enter your postgres username: "
    user = STDIN.gets
    user.chomp!
    root = File.dirname(__FILE__)
    cmd  = "psql -U #{user} -f assets/sql/postgis_template_osx.sql template1"
    system(cmd)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:04:27.550

`create_postgis_template`任务在命名空间中定义`postgres`；所以它会被`rake postgres:create_postgis_template`命令调用，而不是`rake create_postgis_template`命令。

最好运行`rake -T`以查看所有作为任务可用的`rake`任务。

# xml - 使用 Sed 天真地将文本文件转换为 xml

> ID：13557238
> 
> 赞同：1
> 
> 时间：2012-11-26T00:48:51.933
> 
> 标签：xml, sed

我的记录中有这样的文本文件

```
BOOK|100004
TRAN|A
ANAM|Alberta 
TNAM|The School Act; the School Assessment Act. The Tax Recovery Act. The School Grants         Act. The School Attendance Act and General Regulations of the Department of Education 
PBLS|King's Printer
SUB1|Alberta, Canada, Canadian Prairies, NOISBN 
```

我需要创建一个具有这种格式的 xml 文件，

```
<BOOK>100004</BOOK>
<TRAN>A</TRAN>
<first 4 chars> text data </ first 4 chars again> 
```

我想我几乎可以使用这样的 sed 命令，

```
$sed 's#([:alpha:]\{4\})\|(*)#\<\1\>\2<\/\1\>#g' 
```

除了我得到这个错误：`sed: -e expression #1, char 41: invalid reference \1 on`-s'命令的RHS`

任何 sed 专家都想把我推上一条开明的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:52:01.723

sed 使用旧式正则表达式，而不是“扩展”正则表达式，因此特殊字符的默认含义基本上是相反的：“普通”sed 中的捕获组是`\(...\)`，而不是`(...)`。转义`|`字符也是如此：转义它会变成交替。一个有效的 sed 脚本如下所示：

```
sed 's#\([^|]\+\)|\(.*\)#<\1>\2</\1>#' 
```

如果要使用扩展的正则表达式，可以使用`-r`标志：

```
sed -r 's#([^|]+)\|(.*)#<\1>\2</\1>#' 
```

# iphone - 我正在尝试将字符串从我的第一个 ViewController 传递到我的第二个 ViewController 但它返回 NULL

> ID：13557239
> 
> 赞同：0
> 
> 时间：2012-11-26T00:49:02.093
> 
> 标签：iphone, ios, xcode, string

在我的第一个视图控制器中，我有 3 个输入字段，每个字段都将用户输入输入并将其保存到一个字符串中，例如：地址、用户名和密码为`NSUserDefaults`. 这部分工作正常。在我的第二个视图控制器中，我试图从第一个控制器（地址、用户名和密码）中获取 3 个字符串，基于 3 个字符串创建一个 html 链接。我尝试了很多方法来访问 3 个字符串，但没有成功，我得到的结果是`NULL`. 这是我的代码：

//.h 文件 - 具有 3 个输入字段的第一个视图控制器`CamSetup.h`

```
 #import <UIKit/UIKit.h>
 @interface CamSetup : UIViewController <UITextFieldDelegate> 
 {
    NSString * address;
    NSString * username;
    NSString * password;

    IBOutlet UITextField * addressField;
    IBOutlet UITextField * usernameField;
    IBOutlet UITextField * passwordField; 
 }

 -(IBAction) saveAddress: (id) sender;
 -(IBAction) saveUsername: (id) sender;
 -(IBAction) savePassword: (id) sender;

 @property(nonatomic, retain) UITextField *addressField;
 @property(nonatomic, retain) UITextField *usernameField;
 @property(nonatomic, retain) UITextField *passwordField; 
 @property(nonatomic, retain) NSString *address; 
 @property(nonatomic, retain) NSString *username; 
 @property(nonatomic, retain) NSString *password;

 @end 
```

//.m 文件 - 第一个视图控制器 CamSetup.m

```
#import "CamSetup.h"

@interface CamSetup ()
@end

@implementation CamSetup
@synthesize addressField, usernameField, passwordField, address, username, password;

-(IBAction) saveAddress: (id) sender
{
address = [[NSString alloc] initWithFormat:addressField.text];
[addressField setText:address];
NSUserDefaults *stringDefaultAddress = [NSUserDefaults standardUserDefaults];
[stringDefaultAddress setObject:address forKey:@"stringKey1"];
NSLog(@"String [%@]", address);
}

-(IBAction) saveUsername: (id) sender
{
  username = [[NSString alloc] initWithFormat:usernameField.text];
  [usernameField setText:username];
  NSUserDefaults *stringDefaultUsername = [NSUserDefaults standardUserDefaults];
  [stringDefaultUsername setObject:username forKey:@"stringKey2"];
  NSLog(@"String [%@]", username);
}

-(IBAction) savePassword: (id) sender
{
  password = [[NSString alloc] initWithFormat:passwordField.text];
  [passwordField setText:password];
  NSUserDefaults *stringDefaultPassword = [NSUserDefaults standardUserDefaults];
  [stringDefaultPassword setObject:password forKey:@"stringKey3"];
  NSLog(@"String [%@]", password);
}

- (void)viewDidLoad
{   
[addressField setText:[[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey1"]];
[usernameField setText:[[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey2"]];
[passwordField setText:[[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey3"]];

[super viewDidLoad];
}

@end 
```

//.h 第二个视图控制器 LiveView.h

```
 #import <UIKit/UIKit.h>
 #import "CamSetup.h"
 @interface LiveView : UIViewController
 {
  NSString *theAddress;
  NSString *theUsername;
  NSString *thePassword;
  CamSetup *camsetup; //here is an instance of the first class
}
@property (nonatomic, retain) NSString *theAddress;
@property (nonatomic, retain) NSString *theUsername;
@property (nonatomic, retain) NSString *thePassword;

@end 
```

//.m秒查看LiveView.m文件

```
#import "LiveView.h"
@interface LiveView ()
@end

@implementation LiveView
@synthesize theAddress, theUsername, thePassword;

- (void)viewDidLoad
{
  [super viewDidLoad]; 
  theUsername = camsetup.username; //this is probably not right?
  NSLog(@"String [%@]", theUsername); //resut here is NULL
  NSLog(@"String [%@]", camsetup.username); //and here NULL as well
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:06:55.580

这段代码有5个问题：

1.  如果您使用 ARC，您的 @properties 中的所有“保留”都应更改为“强”
2.  您将 iVar 和属性命名为相同的名称。（常见的不良做法）
3.  您总是直接访问 iVar，而不是代码中的属性。
4.  您不会在第二个对象中保留您的 CamSetup 实例。
5.  问题的直接原因：在第二个对象中，您只为 CamSetup 实例创建了一个占位符，您没有创建一个也没有将一个传递给它！你的第二个对象中的 self.camSetup 现在是空的。

让我们一步一步来：

首先，为您的 iVar 赋予与您的属性不同的名称。这是最佳实践，尤其是对于初学者！:)

> ```
> @interface CamSetup : UIViewController <UITextFieldDelegate> 
> {
>     NSString *_address;
> }
> @property(nonatomic, strong) NSString *address;
> @end
> 
> @implementation CamSetup
> @synthesize address=_address;
> ...
> @end 
> ```

这很重要，因为您已经设置了属性，但在您的代码中，您并没有使用它们，而是直接访问您的 iVar。由于您已将它们命名为相同的东西，因此您可能看不到这一点。

让我们看看你的第一个对象。您代码中的每个“地址”都将转到您的 iVar 而不是财产。通常，您希望通过您的属性访问 iVar，除非您另有确定。@synthesize 为您的 iVar 创建一个 getter 和 setter 方法，该方法将保留 var，因为您在 @property 语句中告诉它。但是，当您直接访问您的 iVar 时，您不会通过这些访问器，因此您在 @properties 中编写的内容并不重要。如果你不清楚这一点，你最终可能会误解很多错误和错误。在您的第一个对象中，这仍然有效，因为 alloc/init 在对象上设置了保留，但我注意到您*总是*这样做，这会给您带来麻烦。

下面是使用属性时 saveAddress: 方法的样子：

```
-(IBAction) saveAddress: (id) sender
{
   self.address = [[NSString alloc] initWithFormat:self.addressField.text];
   [self.addressField setText:self.address];
   NSUserDefaults *stringDefaultAddress = [NSUserDefaults standardUserDefaults];
   [stringDefaultAddress setObject:self.address forKey:@"stringKey1"];
   NSLog(@"String [%@]", self.address);
} 
```

接下来，在您的第二个对象中，您需要为 CamSetup 实例设置属性！现在，您只有一个 iVar。

```
 #import <UIKit/UIKit.h>
 #import "CamSetup.h"
 @interface LiveView : UIViewController
 {
  NSString *_theAddress;
  NSString *_theUsername;
  NSString *_thePassword;
  CamSetup *_camSetup; //here is an instance of the first class
}
@property (nonatomic, retain) CamSetup *camSetup; // in synthesize we'll specify that this property uses the _camSetup iVar
@property (nonatomic, strong) NSString *theAddress;
@property (nonatomic, strong) NSString *theUsername;
@property (nonatomic, strong) NSString *thePassword;

@end 
```

实施：

```
#import "LiveView.h"
@interface LiveView ()
@end

@implementation LiveView
@synthesize camSetup = _camSetup;
@synthesize theAddress = _theAddress;
@synthesize theUsername = _theUsername;
@synthesize thePassword = _thePassword;

- (void)viewDidLoad
{
  [super viewDidLoad]; 
  self.theUsername = self.camSetup.username; //this is probably not right?
  // well, it's better now, but where is camSetup coming from??? it's undefined now
  NSLog(@"String [%@]", self.theUsername); //resut here is NULL
  NSLog(@"String [%@]", self.camSetup.username); //and here NULL as well
}
@end 
```

我们创建了一个 iVar 和属性对，它将保存指向 CamSetup 实例的指针并将保留该指针（如果我们使用属性设置它）。但是，CamSetup 实例是在哪里创建的？你在哪里分配/初始化它？

这个问题有很多可能的答案。如果 CamSetup 有地址、用户名、密码的 getter，可以从您的用户默认值中读回它们，那么您所要做的就是分配/初始化一个 CamSetup 并将其设置为 camSetup。但是，现在您的第一个对象没有检索保存数据的功能，所以我们不能这样做。（不过，这是我希望您实施的解决方案）。

您可能会在您的应用程序委托中初始化这两个？但是，如果您使用情节提要，那么它可能会在初始化界面时为您初始化这些对象。在这种情况下，在您的 appDelegate 应用程序已完成启动... 方法中，您必须检索指向这些实例的指针，然后检索第二个对象上的 camSetup 属性，以指向第一个。要告诉您如何执行此操作，我们必须了解您的应用程序的详细信息。不过，这并不是最好的方法。

最佳实践是创建一个对象，为您从用户默认值中保存和检索这些数据。如果您以后想要更改存储这些数据的方式，这将证明您的实施。您只需更改它们在班级中的存储/检索方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:28:24.807

你的问题在这里：

```
CamSetup *camsetup; //here is an instance of the first class 
```

您没有做任何事情来`camsetup`引用从用户那里获取输入的类的*同一*实例。`CamSetup`该`camsetup`变量从未初始化，因此它为 NULL，因此您尝试从中检索的任何属性也将为 NULL。

你将如何解决这个问题取决于你的程序的结构。一种可能性是让创建`LiveView`控制器的任何代码设置`camsetup`值。例如：

```
LiveView *liveViewController  = [LiveView alloc] initWithNibName:@"LiveView" bundle:nil]];
liveViewController.camsetup = camSetupController; 
```

（您需要创建`camsetup`一个属性来执行此操作）。

但是，从设计的角度来看，让一个视图控制器引用另一个视图控制器可能是解决这个问题的错误方法——它在两个控制器之间引入了不必要的依赖关系。`LiveView`例如，假设您稍后决定在程序启动时使用保存的名称/密码直接进入控制器；`LiveView`如果依赖于从`CamSetup`对象获取输入，您将无法做到这一点。

因此，更好的方法可能是从和/或通过让调用的代码设置用户名/密码属性来`LiveView`获取其输入。`NSUserDefaults``LiveView`

- 编辑 -

例如，从用户默认值中检索数据，例如：

```
self.address = [[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey1"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T00:54:41.223

camsetup 是否已初始化？如果不是——首先初始化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T01:43:43.397

有很多方法可以做到这一点，其中大部分取决于两个控制器如何相互关联（比如你如何从第一个到第二个）。

但是，在您的情况下，您根本不需要传递字符串，因为您将它们保存在用户默认值中。只需在第二个控制器中读取这些默认值即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T11:16:06.263

嗨，我有你的问题，只做一件事。当您在其中设置值时， 就`NSUserDefaults`需要它。`synchronization``synchronize`

```
[stringDefaultUsername synchronize]; 
```

并使用检索数据

```
NSString *username =  [[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey2"]; 
```

关注苹果[NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)以获取更多信息

# javascript - 使用 JavaScript 一次只显示一个 div

> ID：13557240
> 
> 赞同：0
> 
> 时间：2012-11-26T00:49:05.773
> 
> 标签：javascript, html, css

我只是在玩弄一些 JavaScript，我是新手，所以这可能是一个简单的解决方案。基本上我想要的是一次只有 1 个`div`可见，因此如果用户单击一个链接以公开一个`div`当前公开的链接`div`将崩溃，并且单击的新链接将出现。

我已包含以下代码：

```
<html> 
    <head>

        <title> test</title>
        <LINK href="blah.css" rel="stylesheet" type="text/css">
        <script language="javascript" type="text/javascript">
        function toggle2(showHideDiv, switchTextDiv) {
    var ele = document.getElementById(showHideDiv);
    var text = document.getElementById(switchTextDiv);
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "restore";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "collapse";
    }
}
    function toggle22(showHideDiv2, switchTextDiv2) {
    var ele = document.getElementById(showHideDiv2);
    var text = document.getElementById(switchTextDiv2);
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "restore";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "collapse";
    }
}

        </script>
    </head>
    <body>
        <div id="mainContent">    
<div id="headerDiv">
     <div id="titleText">Change Password - Click here ==></div><a id="myHeader" href="javascript:toggle2('myContent','myHeader');" >restore</a>
</div>

<div style="clear:both;"></div>

<div id="contentDiv">
     <div id="myContent" style="display: none;">This is the content that is dynamically being collapsed.</div>

<!--DIV2 -->

<div id="headerDiv2">
     <div id="titleText2">Change Username - Click here ==></div><a id="myHeader2" href="javascript:toggle22('myContent2','myHeader2');" >restore</a>
</div>

<div style="clear:both;"></div>

<div id="contentDiv2">
     <div id="myContent2" style="display: none;">This is the content that is dynamically being collapsed.</div>

</div>
        </div>
    </body>
</html> 
```

CSS：

```
#headerDiv, #contentDiv {
float: left;
width: 510px;
}
#titleText {
float: left;
font-size: 1.1em;
font-weight: bold;
margin: 5px;
}
#myHeader {
font-size: 1.1em;
font-weight: bold;
margin: 5px;
}
#headerDiv {
background-color: #0037DB;
color: #9EB6FF;
}
#contentDiv {
background-color: #FFE694;
}
#myContent {
margin: 5px 10px;
}
#headerDiv a {
color: gold;
float: right;
margin: 10px 10px 5px 5px;
}
#headerDiv a:hover {
color: #FFFFFF;
}

#headerDiv2, #contentDiv2 {
float: left;
width: 510px;
}
#titleText2 {
float: left;
font-size: 1.1em;
font-weight: bold;
margin: 5px;
}
#myHeader2 {
font-size: 1.1em;
font-weight: bold;
margin: 5px;
}
#headerDiv2 {
background-color: #0037DB;
color: #9EB6FF;
}
#contentDiv2 {
background-color: #FFE694;
}
#myContent2 {
margin: 5px 10px;
}
#headerDiv2 a {
color: gold;
float: right;
margin: 10px 10px 5px 5px;
}
#headerDiv2 a:hover {
color: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:56:16.033

`style.display`仅反映在元素上明确设置的样式。除非您`style="display:block"`在 HTML 中指定它，否则 的初始值`style.display`将为空，即使 CSS 级联应用的该属性的默认值确实是`block`.

# jquery - 单击按钮启用后文本字段不聚焦

> ID：13557243
> 
> 赞同：0
> 
> 时间：2012-11-26T00:49:31.427
> 
> 标签：jquery, focus, disabled-input

在单击按钮后启用文本字段后，我想将注意力集中在文本字段上，但是使用此代码将无法正常工作！如果我在启用文本字段时再次单击该按钮，则此代码就像一个魅力。

```
$('body').on('click', '#button', function() {
    if($('input[name="textfield-contact-name"]').val() == '') {
        $('input[name="textfield-contact-name"]').focus();
    }

    $('input').attr('disabled', false);
}); 
```

我已经测试过`id="field"`用于文本字段，然后`#field`在 jQuery 中使用，但同样的问题仍然存在！演示：http: [//jsfiddle.net/edgren/Wj5Cq/](http://jsfiddle.net/edgren/Wj5Cq/)

为什么启用文本字段后它不聚焦文本区域？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:56:03.707

您无法聚焦已禁用的元素。首先删除 disabled 属性。

```
$('body').on('click', '#button', function() {

  $('input').removeAttr("disabled");

  if($('input[name=textfield-contact-name]').val() == '') {
    $('input[name=textfield-contact-name]').focus();
  }
}); 
```

另外，我认为 disabled 的标记应该是：

```
<input type="text" name="textfield-contact-name" disabled="disabled"> 
```

我还更改了您的 jQuery 选择器（删除了 " ）（这就是它为我工作的方式）

# c# - 为什么我可以在 C# 中锁定任何对象类型？

> ID：13557244
> 
> 赞同：5
> 
> 时间：2012-11-26T00:49:33.380
> 
> 标签：c#, .net, multithreading, language-design, framework-design

有人可以详细解释一下***为什么***可以`lock`在 C# 中使用任何类型的对象吗？

我了解`lock`它的用途和使用方法。我知道它如何扩展到`Monitor.Enter`/ `Exit`。我正在寻找对实现细节和设计注意事项的解释。

首先：引擎盖下发生了什么？例如：对象实例中是否有额外的位（如 RTTI/vtable 中的）使其工作？还是某种以对象引用为键的查找表？（如果是这样，这如何与 GC 交互？）或者其他什么？为什么我不必创建特定类型的实例来保存锁定数据？

（顺便说一下，在本机代码中做什么`Enter`和`Exit`映射到什么？）

其次，*为什么*.NET 设计为没有特定类型的用于取出锁定？（考虑到您通常只是`new object()`为了这个目的而做一个 - 并且大多数情况下您锁定“任何旧对象”都是有问题的。）这种设计选择是由实现细节所强迫的吗？还是故意的？而且，如果经过深思熟虑，这是一个不错的选择吗？（我意识到第二部分可能需要推测。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:01:29.463

可以`lock`在所有非`struct`类型上。在堆上每个引用类型的布局中，都有用于管理锁的特殊字段（同步块）。该布局在[CLR 如何创建运行时对象](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)中有详细介绍。文章摘录如下：

> OBJECTREF 不指向对象实例的开头，而是指向一个 DWORD 偏移量（4 个字节）。DWORD 称为对象标头，将索引（从 1 开始的 syncblk 编号）保存到 SyncTableEntry 表中。

堆上的对象布局：

```
sync block index 
pointer to type
fields... 
```

推测部分：我相信最初的指导是锁定任何方便的东西，但是由于易于获取外部代码来使您的方法死锁，因此相对较快地更改为具有特殊的“用于锁定的私有对象”。我认为框架中甚至有一些类通过锁定公开可见的对象来实现......

# c# - c# Autocad Map 3D 2012 获取用户绘制的对象

> ID：13557246
> 
> 赞同：1
> 
> 时间：2012-11-26T00:50:03.643
> 
> 标签：c#, .net, autocad, objectarx

是否可以发送一个字符串来执行 Map 并找出用户以更简单的方式绘制了哪些对象？我觉得我做的事情太多了……

这是命令：

```
 acad.DocumentManager.MdiActiveDocument.SendStringToExecute
("_MPOLYGON ", false, false, true); 
```

到目前为止，我所做的是订阅对象附加事件和命令结束事件，然后调用 sendStringToExecute 并从那里检查数据库中的所有新对象并保留对我找到的对象的引用用户已绘制。

所以首先：

```
 HostApplicationServices.WorkingDatabase.ObjectAppended += 
new ObjectEventHandler(activeDB_ObjectAppended); 
```

和

```
 acad.DocumentManager.MdiActiveDocument.CommandEnded += 
new CommandEventHandler(MdiActiveDocument_CommandEnded); 
```

命令执行时：

```
void activeDB_ObjectAppended(object sender, ObjectEventArgs e)
        {
            polyDessinIds.Add(e.DBObject.Id);
        } 
```

Autocad 在执行 _MPOLYGON 命令时将对象添加到数据库中，因此我保留了对所有对象的引用。AutoCAD 在用户绘图时将点和线添加到数据库中。例如，对于一行的第一次和第二次单击似乎已放入数据库中。此外，当将多边形添加到工作数据库时，并不意味着它是最后一个。最后添加的对象也不保证是真实对象。

然后当命令结束时，我会寻找正确的 objectId，即使绘制了很多多边形，也只有 1 个有效的 objectId 引用了一个或多个绘制的多边形。

```
 foreach (ObjectId obj in polyDessinIds)
 {
            if (obj.IsErased == false && obj.ObjectClass.Name == "AcDbMPolygon")
            {
             mPolygons = obj;
             //there should be only one valid at this point
             break;
            }
 } 
```

我想知道是否有更好，更可靠的方法来做到这一点？可能类似于当您提示选择对象时，这会返回一个包含所有对象的选择集。有没有一种方法可以“promptForPolygon”或类似的方法，一旦用户绘制它们就会返回我新的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:06:28.937

我认为您不需要所有这些代码，请尝试使用：

```
ApplicationServices.Application.DocumentManager.MdiActiveDocument.Editor.SelectLast() 
```

哪个应该给你最后一个绘制或使用的实体。

这里有更多解释：

```
http://72.77.202.9/index.php?topic=20267.0 
```

希望能帮助到你。

# jquery - jQuery 无限轮播：在第一次迭代时将幻灯片 #2 替换为幻灯片 #3

> ID：13557253
> 
> 赞同：0
> 
> 时间：2012-11-26T00:50:22.390
> 
> 标签：jquery, html, css, carousel, infinite-carousel

我正在构建一个无限的 jQuery 轮播。无限是它在向用户显示最后一张幻灯片之后立即显示第一张幻灯片。为了实现这一点，我在后完成回调函数中进行了这个小调整

`$('#slide li:last').after('#slide li:first')`.

这基本上是使无限幻灯片发生的原因。但是，它尤其弄乱了**第二张幻灯片**。在从幻灯片 1 到幻灯片 2 的第一次迭代中，幻灯片 2 被幻灯片 3 取代（而且发生得非常快）。每次后续迭代都可以正常工作，幻灯片 2 将自身呈现为幻灯片 2 而不是幻灯片 3。

为了进一步理解这个例子，请看下面的 js fiddle，它捕获了所有必要的 HTML、CSS、jQuery。

[用于 jQuery 无限轮播/幻灯片的 jsfiddle](http://jsfiddle.net/parijatkalia/386Ak/10/)

有人知道怎么了:)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:11:48.770

之所以发生这种情况，是因为在动画完成后，您`li`要从开头删除 an`ul`并将其放在末尾，从而将`left_indent`1 元素的倍数重置。

一个简单的解决方法是做`$('#slides ul').css({'left': 0});`而不是`$('#slides ul').css({'left': -item_width});`

[jsfiddle](http://jsfiddle.net/Bm8Tv/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:14:29.863

更简单的方法：

**[jsBin 演示](http://jsbin.com/ivibof/1/edit)**

```
function slideshow(){

 var item_width = $('#slides li').outerWidth(true);

 $('#slides ul').stop().animate({left:-item_width},1200, function(){
     $('#slides li:last').after( $('#slides li:first') );
     $('#slides ul').css({left:0});
 });

} 
```

# java - 如何以编程方式比较eclipse中的目录

> ID：13557254
> 
> 赞同：2
> 
> 时间：2012-11-26T00:50:23.223
> 
> 标签：java, eclipse

我想通过在比较编辑器中打开结构层次结构来将 IFolder 与文件系统目录进行比较，我可以看到描述文件比较的示例，但除了 eclipse 平台资源比较类之外我没有看到任何其他内容`ResourceCompareInput`

然而，这是一个内部类，需要一些严肃的手术才能将这些功能放入我的插件中。

我想知道我是否在这里遗漏了一些简单的东西？

（如果不是，我将使用我正在处理的示例更新问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T09:06:59.180

我遇到了完全相同的问题并通过将文件夹包装在 ResourceNode 中来解决它。

具体来说，我创建了一个扩展 CompareEditorInput 的类，并将祖先、左右以及强制的 CompareConfiguration 作为构造函数的参数。我用新的 org.eclipse.compare.ResourceNode(folder) 包装了这三个文件夹，并在 prepareInput 方法中将它们传递给了 Differencer：

new Differencer().findDifferences(ancestor != null, 监视器, null, 祖先, 左, 右);

ResourceNode 也递归地包装所有子文件夹。为我工作。

# windows-8 - 从右到左 (RTL) 平铺

> ID：13557255
> 
> 赞同：1
> 
> 时间：2012-11-26T00:50:25.203
> 
> 标签：windows-8, microsoft-metro, right-to-left

是否可以为 Windows 8 应用程序创建从右到左 (RTL) 磁贴？

当更改 Windows 设置时，瓷砖会切换到 RTL 方向，但即使在非 RTL 机器上我也需要强制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:11:39.213

请参阅此 MSDN 文章。[http://msdn.microsoft.com/en-us/library/windows/apps/jj712702.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj712702.aspx) 您应该能够使用 UnicodeDirectionMarkers.LeftToRightDirectionMarker 来标记文本并将其反转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:31:30.010

对于 tile 或 toast 通知，在通知 XML 中的or元素上将[`lang`](http://msdn.microsoft.com/en-us/library/windows/apps/br212857.aspx)属性设置为 RTL 语言（例如，“ar-SA”）将执行适合指定语言的布局。`<binding />``<visual/>`

# javascript - Passport JS“发送后无法设置标题”

> ID：13557256
> 
> 赞同：11
> 
> 时间：2012-11-26T00:50:38.980
> 
> 标签：javascript, node.js, express, passport.js

当我使用护照 JS 成功登录时出现此错误。登录后尝试重定向到主页。

执行此操作的代码：

```
app.post('/login', 
  passport.authenticate('local', {failureRedirect: '/login' }),
  function(req, res) {
    res.redirect('/');
  }); 
```

完全错误：

```
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:644:11) 
```

我错过了什么吗？不知道为什么会发生此错误。我仍然可以使用该应用程序，我只是不想出现错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T21:52:43.033

您正在重定向用户，因此 serializeUser 函数被调用了两次。而在

```
 passport.use(new FacebookStrategy({
 ... 
```

一定要添加这个*else*否则它会被调用两次，从而发送两次标头并导致错误。尝试这个：

```
passport.use(new FacebookStrategy({
...
},
function(accessToken, refreshToken, profile, done) {
// asynchronous verification, for effect...
process.nextTick(function () {

  // To keep the example simple, the user's Facebook profile is returned to
  // represent the logged-in user.  In a typical application, you would want
  // to associate the Facebook account with a user record in your database,
  // and return that user instead.
    User.findByFacebookId({facebookId: profile.id}, function(err, user) {
        if (err) { return done(err); }
        if (!user) {
            //create user User.create...
            return done(null, createdUser);
        } else { //add this else
            return done(null, user);
        }
    });
  });
 }
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T06:10:51.630

根据[PassportJS 指南](http://passportjs.org/guide/)，您应该让他们的中间件完成所有重定向。

```
app.post('/login', passport.authenticate('local', { successRedirect: '/',
                                                failureRedirect: '/login' })); 
```

我的猜测是，中间件正在调用 Express 的`res.redirect`方法，就像您在上面的示例中一样，但是在其实现中有错误（`next`在不应该调用时调用），然后您的方法试图`res.redirect`再次调用，这会导致错误被抛出，因为您只能在 HTTP 协议中向客户端发送一次响应。

# jquery - 斑马剥离在 IE8 中不起作用

> ID：13557258
> 
> 赞同：1
> 
> 时间：2012-11-26T00:50:50.010
> 
> 标签：jquery, css, internet-explorer-8, zebra-striping

我编写了以下 jquery 以将斑马剥离应用于表中的某一行。这在 Chrome 和 Firefox 中运行良好，但在 IE8 中不起作用。W

```
<script>
$(document).ready(function()
{
$("tr.alt:even").css("background-color", "#f0f8ff");
$("tr.alt:odd").css("background-color", "#fcfceb");
});
</script> 
```

这是HTML

```
<tr class="alt">
    <td class="status"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status></td>
    <td class>Received</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T00:54:42.290

（在 IE 7,8 中测试...）修复您的标记，它将完美运行：`class="status`<-missing `"`
`<td class>` = invalid attr

```
<table>
<tr class="alt">
    <td class="status"></td>
    <td>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td>Received</td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td>Received</td>
</tr>
</table> 
```

或者应该是：

```
<table>
<tr class="alt">
    <td class="status"></td>
    <td class="Received"></td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class="Received"></td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class="Received"></td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class="Received"></td>
</tr>
<tr class="alt">
    <td class="status"></td>
    <td class="Received"></td>
</tr>
</table> 
```

我不知道，两者都有效，选择你的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:49:04.963

```
<style type="text/css">
  tr.odd 
{
    background:fcfceb;
}   
  tr.even 
{
    background:f0f8ff;
}
tr.zero 
{
    background-color:#FFE4E1;
}
</style>

<script>
  jQuery(function($) {
    $("tr.alternateColor:odd").addClass("odd");
    $("tr.alternateColor:even").addClass("even");
</script> 
```

终于让它跑起来了。我在 IE 中的 CSS 有问题

# python - plt.show() 使终端挂起

> ID：13557260
> 
> 赞同：32
> 
> 时间：2012-11-26T00:50:56.083
> 
> 标签：python, matplotlib

在我在一个程序中调用的最后一个函数结束时，我有以下代码来绘制一个简单的彩色图。

```
plt.figure()
plt.pcolormesh(X,Y,Z)
plt.colorbar()
plt.show() 
```

之后我回到主程序，我的程序就完成了。该图按预期显示，但是当我使用角落中的 x 按钮（在 ubuntu 上）关闭它时，我的程序并没有结束。它只是挂在那里，有一个进程正在运行。我该如何纠正？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-01-15T12:52:18.143

由于某种原因，您的 matplotlib 可能在[非交互模式下运行。](http://matplotlib.org/faq/usage_faq.html#what-is-interactive-mode)我不确定如何在您的本地配置中防止这种情况，但如果您添加以下任何一项：

```
plt.ion() 
```

或这个：

```
matplotlib.interactive(True) 
```

在脚本开头的某个地方，它应该会改变绘图的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-14T15:09:46.007

对于交互模式，您需要在文件头部使用：

```
import matplotlib
matplotlib.use("TkAgg") 
```

# java - 为什么图形没有出现在 JFrame 中？

> ID：13557261
> 
> 赞同：1
> 
> 时间：2012-11-26T00:50:57.533
> 
> 标签：java, graphics, jframe

下面我在我的 Java 程序中包含了两个类（Launcher 和 Controls）。在这两个类中，他们创建了一个 JFrame，绘制了一个背景图像，并添加了文本行。我一遍又一遍地查看代码，但由于某种原因，背景图像和文本行没有出现在第二类（控件）中。谁能向我解释为什么会这样？

发射器类：

```
import hungerGames.Display;
import hungerGames.RunGame;
import hungerGames.input.InputHandler;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.image.BufferStrategy;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class Launcher extends JFrame implements Runnable {
public static final long serialVersionUID = 1L;

protected JPanel window = new JPanel();

private int width = 800;
private int height = 450;
boolean running = false;
Thread thread;

public Launcher(int id) {
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
        e.printStackTrace();
    }
    setUndecorated(true);
    setSize(new Dimension(width, height));
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setResizable(false);
    setVisible(true);
    window.setLayout(null);
    InputHandler input = new InputHandler();
    addKeyListener(input);
    addFocusListener(input);
    addMouseListener(input);
    addMouseMotionListener(input);
    startMenu();
}

public void updateFrame() {
    if (InputHandler.dragged) {
        Point p = getLocation();
        if (InputHandler.MouseDX != InputHandler.MousePX || InputHandler.MouseDX != InputHandler.MousePX) {
            setLocation(p.x + InputHandler.MouseDX - InputHandler.MousePX, p.y + InputHandler.MouseDY - InputHandler.MousePY);
        }
    }
}

public void startMenu() {
    running = true;
    thread = new Thread(this, "menu");
    thread.start();
}

public void stopMenu() {
    try {
        thread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

public void run() {
    while (running) {
        try {
            renderMenu();
        } catch (IllegalStateException e) {
            System.out.println("Handled");
        }
        updateFrame();
    }
}

private void renderMenu() throws IllegalStateException {
    BufferStrategy bs = this.getBufferStrategy();
    if (bs == null) {
        createBufferStrategy(3);
        return;
    }
    Graphics g = bs.getDrawGraphics();
    g.setColor(Color.BLACK);
    g.fillRect(0, 0, 800, 450);
    try {
        g.drawImage(ImageIO.read(Display.class.getResource("/main_menu.jpg")), 0, 0, 800, 450, null);
        if (InputHandler.mouseX >= 50 && InputHandler.mouseX <= 100 && InputHandler.mouseY >= 290 && InputHandler.mouseY <= 325) {
            g.drawImage(ImageIO.read(Launcher.class.getResource("/pin.png")), 10, 295, 30, 33, null);
            if (InputHandler.MouseButton == 1) {
                dispose();
                new RunGame();
            }
        }
        if (InputHandler.mouseX >= 50 && InputHandler.mouseX <= 320 && InputHandler.mouseY >= 390 && InputHandler.mouseY <= 425) {
            g.drawImage(ImageIO.read(Launcher.class.getResource("/pin.png")), 10, 395, 30, 33, null);
            if (InputHandler.MouseButton == 1) {
                dispose();
                new Controls();
            }
        }
        if (InputHandler.mouseX >= 400 && InputHandler.mouseX <= 490 && InputHandler.mouseY >= 290 && InputHandler.mouseY <= 325) {
            g.drawImage(ImageIO.read(Launcher.class.getResource("/pin.png")), 360, 295, 30, 33, null);
            if (InputHandler.MouseButton == 1) {
                dispose();
                new Credits();
            }
        }
        if (InputHandler.mouseX >= 400 && InputHandler.mouseX <= 440 && InputHandler.mouseY >= 390 && InputHandler.mouseY <= 425) {
            g.drawImage(ImageIO.read(Launcher.class.getResource("/pin.png")), 360, 395, 30, 33, null);
            if (InputHandler.MouseButton == 1) {
                System.exit(0);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    g.setColor(Color.WHITE);
    g.setFont(new Font("Agency FB", 0, 30));
    g.drawString("By Lawrence Zhao", 210, 275);
    g.setFont(new Font("Agency FB", 0, 40));
    g.drawString("Play", 50, 325);
    g.drawString("Controls and Options", 50, 425);
    g.drawString("Credits", 400, 325);
    g.drawString("Exit", 400, 425);
    g.dispose();
    bs.show();
}
} 
```

控制类：

```
import hungerGames.Display;
import hungerGames.input.InputHandler;

import java.awt.Choice;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.image.BufferStrategy;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class Controls extends JFrame{
public static final long serialVersionUID = 1L;

protected JPanel window = new JPanel();

private int width = 720;
private int height = 450;
private Rectangle rResolution;
private Choice resolution = new Choice();

public Controls() {
    try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
        e.printStackTrace();
    }
    setUndecorated(true);
    setSize(new Dimension(width, height));
    setLocationRelativeTo(null);
    setResizable(false);
    setVisible(true);
    window.setLayout(null);
    InputHandler input = new InputHandler();
    addKeyListener(input);
    addFocusListener(input);
    addMouseListener(input);
    addMouseMotionListener(input);

    renderControls();
    drawButtons();
    stopMenuThread();
}

private void stopMenuThread() {
    Display.getLauncherInstance().stopMenu();
}

private void drawButtons() {

    rResolution = new Rectangle(50,100, 100, 25);
    resolution.setBounds(rResolution);
    resolution.add("640, 400");
    resolution.add("800, 600");
    resolution.add("1024, 768");
    resolution.select(1);
    add(resolution);
}

private void renderControls() throws IllegalStateException {
    BufferStrategy bs = this.getBufferStrategy();
    if (bs == null) {
        createBufferStrategy(3);
        return;
    }
    Graphics g = bs.getDrawGraphics();
    g.setColor(Color.BLACK);
    g.fillRect(0, 0, 720, 450);
    try {
        g.drawImage(ImageIO.read(Display.class.getResource("/controls.jpg")),0, 0, 720, 450, null);
        if (InputHandler.mouseX >= 360 && InputHandler.mouseX <= 400 && InputHandler.mouseY >=270 && InputHandler.mouseY <=305) {
            g.drawImage(ImageIO.read(Controls.class.getResource("/pin.png")),360,270, 30, 33, null);
            if (InputHandler.MouseButton == 1) {
                Display.selection = resolution.getSelectedIndex();
                dispose();
                new Launcher(0);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    g.setColor(Color.WHITE);
    g.setFont(new Font("Agency FB", 0, 40));
    g.drawString("Exit", 400, 300);
    g.dispose();
    bs.show();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:27:01.953

很明显，您不了解缓冲策略是如何工作的。

我建议您阅读[双缓冲](http://content.gpwiki.org/index.php/Java:Tutorials:Double_Buffering)以获取一些线索。

（ps，我对 API 的这方面也没有太多经验，但我只需阅读上面链接的 tut 就可以让你的代码工作）

**更新**

似乎对我来说工作得很好......

![在此处输入图像描述](../Images/d48490b7a16347019a6586d85115563c.png)

一些笔记。

*   预先加载您的图像，否则您会浪费时间进行双重缓冲，因为 IO 会减慢您的速度。
*   确保您的图像存在并开始正确加载

.

```
public class BadPaint03 {

    public static void main(String[] args) {
        new BadPaint03();
    }

    public BadPaint03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                Controls frame = new Controls();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }

    public class Controls extends JFrame {

        private int width = 720;
        private int height = 450;
        private Rectangle rResolution;
        protected JPanel window = new JPanel();
        private BufferedImage background;

        public Controls() {

            try {
                background = ImageIO.read(new File("/path/to/your/image"));
            } catch (Exception e) {
                e.printStackTrace();
            }

            setUndecorated(true);
            setSize(new Dimension(width, height));
            setLocationRelativeTo(null);
            setResizable(false);
            setVisible(true);
            window.setLayout(null);

            new Thread(new Runnable() {
                @Override
                public void run() {

                    while (true) {

                        renderControls();
                        try {
                            Thread.sleep(1000 / 24);
                        } catch (InterruptedException ex) {
                            Logger.getLogger(BadPaint03.class.getName()).log(Level.SEVERE, null, ex);
                        }

                    }

                }
            }).start();

        }

        private void renderControls() throws IllegalStateException {
            BufferStrategy bs = this.getBufferStrategy();
            if (bs == null) {
                createBufferStrategy(3);
                return;
            }
            Graphics g = bs.getDrawGraphics();
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, 720, 450);

            if (background != null) {

                int x = (720 - background.getWidth()) / 2;
                int y = (450 - background.getHeight()) / 2;
                g.drawImage(background, x, y, null);

            }

            g.setColor(Color.WHITE);
            g.setFont(new Font("Agency FB", 0, 40));
            g.drawString("Exit", 400, 300);
            g.dispose();
            bs.show();
        }
    }
} 
```

# ios - 有没有一种简单的方法可以在 iOS 上使用标记创建 NSAttributedString？

> ID：13557264
> 
> 赞同：1
> 
> 时间：2012-11-26T00:51:38.377
> 
> 标签：ios, ios6, nsattributedstring

我只想在我的部分文本中添加粗体或斜体。是否有一些内置的解析使这变得简单，因为我见过的大多数示例都显示了一个页面价值的代码，这需要对字符串进行子字符串范围计算。理想情况下，我可以这样做：

```
label.attributedText = [NSAttributedString initWithXXX:@"Some **bold** and *italic text*"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T08:13:52.117

[MGPushParser](http://www.bigpaua.com/MGBoxKit/docs/Classes/MGMushParser.html) in [MGBoxKit](https://github.com/sobri909/MGBox2) supports this for bold, italics, underlining, and monospacing, and coloured text.

```
"**bold**, //italics//, __underlined__, `monospaced`, and {#0000FF|blue}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T08:24:17.803

[https://github.com/Cocoanetics/DTCoreText](https://github.com/Cocoanetics/DTCoreText)支持所有你能想到的标记^^

甚至 css 到 NSAttributedString 也是可能的。

请参阅随附的示例。它适用于 UIKit

# php - Javascript 和 MYSQL 之间的通信

> ID：13557265
> 
> 赞同：0
> 
> 时间：2012-11-26T00:51:38.887
> 
> 标签：php, javascript, mysql, xml

我正在使用 Google Maps API 编写一些代码。简而言之，我有一个 MySQL 数据库，其中包含一个用于在地图上生成标记的信息表。我连接到数据库并使用 PHP 提取必要的属性并使用 XML 与我的 Javascript 代码进行通信。

我目前正在尝试做的是朝另一个方向前进，我正在尝试从我的 Javascript 代码向 MySQL 发送一串信息（例如“1,2,3,45,18”）以设置为一个会话参数（称之为@sparam）。将此值传递给 MySQL 的过程是什么？

我是否能够以与访问表相同的方式通过 PHP 访问 MySQL 变量（为了将值返回到 Javascript 中）？

我会很感激任何见解。

谢谢。

**编辑**

也许我在原始帖子中不清楚。我要问的是如何将字符串传递给 MySQL 会话变量，特别是一组与 MySQL 数据库表中的 ID 直接相关的 ID，然后能够通过调用来使用这些 ID MySQL 中的必要程序。反过来，在 MySQL 中调用的过程会生成一些输出，然后必须将其传递回 Javascript 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:59:23.150

我创建了一个特殊的 JSON（**JavaScript Object Notation**）php 页面，我将从 javascript 中调用它。然后我会解析那些 JSON 响应。

简单的例子：

**JAVASCRIPT：**

```
function getCheckedUnits() {
    jQuery(function($) {    
        $.ajax( {           
            url : "page_json.php?action=getsession",
            type : "GET",
            success : function(data) {
                //Get Json and loop over it's data
                if (data.length>10){
                    var jsonData = JSON.parse(data);

                    $.each(jsonData, function(Idx, Value) { 
                        if  (Idx>0){
                            //get values for each vehicle and then remove it's marker from the map and then add new marker on the map (thereofore update the marker)
                            c_latitude = Value["lat"];
                            c_longitude = Value["lon"];
                            c_name = Value["name"];
                            c_notes= Value["notes"];
                            removeMarker(c_name); //remove old marker function
                            addMarker(c_latitude, c_longitude, c_name); //add current marker function
                        }
                    });
                }
            }
        });
    });
} 
```

**PHP：**在这里我遍历我的arrayList，然后创建一个带有值的简单数组。然后我只是将其输出为 json 字符串

```
 foreach ($listOfCars->arrayList as $key => $value) {

        $unit = new fleetUnit();
        $unit = $value;
        //create array for json output
        $data[] = array('lat' => $unit->lat,
            'lon' => $unit->lon, 'name' => $unit->name, 'notes' => $unit->notes);
    }

    echo json_encode($data); 
```

# ruby-on-rails - ActiveRecord to_json 排除空值

> ID：13557266
> 
> 赞同：0
> 
> 时间：2012-11-26T00:51:43.833
> 
> 标签：ruby-on-rails, ruby, json, activerecord

是否有一个 ActiveRecord 设置允许我在将 ActiveRecord 对象序列化为 json 之前删除空值？

如果没有，最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:42:26.057

您可以覆盖`serializable_hash`模型中的方法

```
def serializable_hash(options)
  super(options).select { |_, v| v }
end 
```

顺便说一句，如果您要使用包含（例如`Project.all.as_json(include: :tasks)`），那么您需要`serializable_hash`在两个模型中都覆盖。

### 更新：版本 0.10+

```
def serializable_hash(adapter_options = nil, options = {}, adapter_instance = self.class.serialization_adapter_instance)
  super(adapter_options, options, adapter_instance).select { |_, v| v }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T00:54:57.010

也许

```
@instance.attributes.delete_if { |k, v| v.nil? }.to_json 
```

# c++ - 尝试构建 C++ .DLL 的类型/转换错误

> ID：13557269
> 
> 赞同：2
> 
> 时间：2012-11-26T00:52:01.667
> 
> 标签：c++, visual-c++

我找到了以下代码片段，并尝试使用它创建一个 ISAPI .DLL。

```
#include <windows.h>
#include <httpfilt.h>
#include "tchar.h"
#include "strsafe.h"

// Portion of HttpOnly
DWORD WINAPI HttpFilterProc(
   PHTTP_FILTER_CONTEXT pfc,
   DWORD dwNotificationType,
   LPVOID pvNotification) {

   // Hard coded cookie length (2k bytes)
   CHAR szCookie[2048];
   DWORD cbCookieOriginal = sizeof(szCookie) / sizeof(szCookie[0]);
   DWORD cbCookie = cbCookieOriginal;

      HTTP_FILTER_SEND_RESPONSE *pResponse = 
         (HTTP_FILTER_SEND_RESPONSE*)pvNotification;

      CHAR *szHeader = "Set-Cookie:";
      CHAR *szHttpOnly = "; HttpOnly";
      if (pResponse->GetHeader(pfc,szHeader,szCookie,&cbCookie)) {
         if (SUCCEEDED(StringCchCat(szCookie,
                                    cbCookieOriginal,
                                    szHttpOnly))) {
            if (!pResponse->SetHeader(pfc,
                                      szHeader,
                                      szCookie)) {
                        // Fail securely - send no cookie!
                        pResponse->SetHeader(pfc,szHeader,"");
               }
            } else {
               pResponse->SetHeader(pfc,szHeader,"");
          }
   }

   return SF_STATUS_REQ_NEXT_NOTIFICATION;
} 
```

我使用 VS 2010 Express 创建了一个新的 C++ 项目。构建项目时出现以下错误：

```
------ Build started: Project: ISAPIHttpOnly, Configuration: Debug Win32 ------
  HttpOnly.cpp
c:\documents and settings\bob\my documents\visual studio 2010\projects\isapihttponly\isapihttponly\httponly.cpp(25): error C2664: 'StringCchCatW' : cannot convert parameter 1 from 'CHAR [2048]' to 'STRSAFE_LPWSTR'
          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我不确定如何解决这个问题。:S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:12:45.730

您的程序正在被编译为 Unicode，然后`STRSAFE_LPWSTR`（来自 中的第一个参数的类型）对不是 Unicode 的数组类型`StringCchCat`失败。`char`

为了解决这个问题，你有两种选择，一种是将错误的字符串声明为`TCHAR`数组，这样就可以将其预处理为`wchar_t`数组。但是你必须在你的代码中改变很多东西，比如文字字符串需要`TEXT("")`宏等等。

但看起来，您的程序并没有使用 Unicode 字符串，因此另一种选择是将您的程序编译为多字节，然后您不需要更改代码中的任何内容，因为`StringCchCat`会有一个`STRSAFE_LPSTR`参数，这将是预处理为`char *`.

要编译为多字节，只需转到`Project Settings`-> `General`-> `Character Set`。

# python - 如何跟踪有多少外键连接到一个对象？

> ID：13557270
> 
> 赞同：2
> 
> 时间：2012-11-26T00:52:29.700
> 
> 标签：python, django

我在数据库中有两个表（我已经创建）：`Entry`和`Nation`​​. 每次创建新条目时，用户都必须填写与之相关的国家。所以一个条目有两个字段：`Content`[a charfield] 和`Nation`[a foreign key to a Nation]。问题是，在网站的主页上，最受欢迎的国家是按照他们有多少条目的顺序显示的。不断查找`Entry`表中与每个相关的外键数量似乎效率低下`Nation`，所以我想知道如何保留一个计数器。我的意思是，如果我为国家创建一个额外的整数字段，我怎么能做到这样每次创建一个条目时，它会将正确的国家加 1，而每次销毁一个条目时，它会减少正确的国家国家1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:03:07.230

您可以使用[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)。这样，您的模式将保持规范化，并且您的数据不会出现不一致的情况。您的问题似乎等同于那里引用的示例之一。尝试这个：

```
from django.db.models import Count
Nation.objects.annotate(num_entries=Count('entry')).order_by('-num_entries') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:09:05.207

您可以使用在方法[`post_save`](https://docs.djangoproject.com/en/1.3/ref/signals/)结束时发送的信号`save()`。

首先，将（如您所说） a 添加`counter = IntegerField(default=0)`到您的`Nation`模型中。

然后，每次`Entry`创建一个新的，增加该计数器。

```
from django.db.models.signals import post_save

# Your models ...

def increase_nation_counter(instance, created, **kwargs):
    if created: # Just increase counter if it's a new Entry
        instance.nation.counter += 1
        instance.nation.save()

post_save.connect(increase_nation_counter, sender=Entry) 
```

然后，您可以`Nation`使用简单的查询对您的 s 进行排序：

```
Nation.objects.order_by('-counter') 
```

# c# - 这是为在 C# 中创建的 exe 应用程序获取拖放文件的正确方法吗？

> ID：13557271
> 
> 赞同：0
> 
> 时间：2012-11-26T00:52:36.673
> 
> 标签：c#, windows

和标题所说的差不多。我在 C# 中创建了一个 exe windows 窗体程序，我发现了如何获取拖放到 exe 上的文件名和路径。那么这是获取文件的正确方法吗？

```
 public partial class Form1 : Form
    {
        public static String file;
        public Form1()
        {
            foreach (String arg in Environment.GetCommandLineArgs())
            {
                file = arg;
            }

            InitializeComponent();
            label1.Text = file;
        }
    }
} 
```

它确实有效，如果我运行程序本身，它会为我提供 exe 本身的文件路径和名称。但是当拖放到 exe 时，它​​会给我我删除的文件。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:06:47.490

通常，`GetCommandLineArgs`可能包含也可能不包含可执行文件的路径作为第一个参数。但在大多数情况下 - 第一个参数将是你的 exe。

因此，第二个、第三个等参数将包含删除的文件。

嗯，以为命令行传递给`main`C# 中主类的方法，不是吗？

# objective-c - NSTextField 没有响应

> ID：13557279
> 
> 赞同：2
> 
> 时间：2012-11-26T00:53:34.867
> 
> 标签：objective-c, nstextfield

我在我的代码中创建了一个 NSTextField：

。H ：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
 IBOutlet NSTextField *numberOfConnectionsTextField;
}

@property (nonatomic, retain) NSTextField *numberOfConnectionsTextField; 
```

.m：

```
@synthesize numberOfConnectionsTextField; 
```

我在这里更改字段的值：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    [numberOfConnectionsTextField setStringValue:@"0"];

} 
```

并且值成功更改。但是，当我尝试在此处更改值时：

```
- (void)connectionNumber:(NSString *)number {

    [numberOfConnectionsTextField setStringValue:number];
    NSRunAlertPanel(@"", number, @"", @"", @"");

} 
```

NSTextField 没有改变。但是，NSRunAlertPanel 确实使用“数字”字符串正确触发。

有任何想法吗？我似乎找不到我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:30:15.417

使用 self.numberOfConnectionsTextField 然后单独使用变量名 numberOfConnectionsTextField 可能更安全。当我第一次学习目标 c 时，这种错误发生在我身上。一段时间后，一些 IBOutLet 变为零。

尝试将 self.variablename 用于强大的综合变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:30:29.783

您的代码看起来相当不错。没有错误，第一个原因始终是没有将插座连接到对象，但是您可以更改 applicationDidFinishLaunching:，所以这不是这里的问题。

但是你没有提到“-(void)connectionNumber:(NSString *)”这是在同一个班级吗？或者您在另一个班级创建了相同的 iboutlet 并错过了什么？

还是您手动释放了插座 numberOfConnectionsTextField ？请检查它是否不为空？喜欢

```
if(numberOfConnectionsTextField){ 
    NSLog(@"Still exist") 
} 
```

另一个原因可能是，您从哪个方法调用“-(void)connectionNumber:(NSString *)”，很多时候可以看到人们从 init 调用 set/get of outlet。

如果您做的每件事都正确，请发表评论...

# c - 构建一个复杂的字符串？

> ID：13557280
> 
> 赞同：3
> 
> 时间：2012-11-26T00:53:50.000
> 
> 标签：c, string, printf

我有一堆`printf()`s 可以正确打印我必须构建的非常复杂的字符串。

问题是我需要将该字符串存储在一个变量中（所有这些`printf()`s 一起通过套接字发送它们的结果。我很确定我需要立即发送它们 - 但我会让一个小窗口如果你想说服我那不是真的，请打开。

实现这一目标的最佳方法是什么？

字符串长度确实是可变的。我听说过`sprintf()`and `realloc()`，甚至`asprintf()`，但我不知道如何将所有这些混合在一起。

这是我当前的代码：

```
void mostrarVariable(char *variable, void *valor) {
    printf("%s=%d\n", variable, *(int *)valor);
}

void mostrarEntradaStack(t_registro_stack *entradaStack) {
    printf("%d,%s\n", entradaStack->retorno, entradaStack->nombre_funcion);
}

void suspender(t_pcb *pcb) {
    char *mensaje = NULL;
    mensaje = strdup("1Proceso suspendido...");
    // FIXME: guardar los printf en una variable y enviarlo por la red

    printf("----------------\n\n");
    printf("ID=%d\n", pcb->id_proceso);
    printf("PC=%d\n", pcb->program_counter);
    printf("\n-- Estructura de codigo --\n");

    int indice = 0;

    // believe me: this iterates a char** printf-ing each line
    while(pcb->codigo[indice] != NULL) {
        printf("%s\n", pcb->codigo[indice++]);
    }

    printf("----------------\n");
    printf("\n-- Estructuras de datos --\n");

    // believe me: this calls mostrarVariable() for each entry in the pcb->datos dictionary
    dictionary_iterator(pcb->datos, mostrarVariable);

    printf("----------------\n\n");
    printf("-- Estructura de Stack --\n");

    // believe me: this calls mostrarEntradaStack() for each element in the stack without modifying it
    pila_hacer(pcb->stack, mostrarEntradaStack);

    printf("\n----------------\n");

    // believe me: this sends "mensaje" via a socket ("pcb->id_proceso"), and it handles the partial send()s and all of that
   // it has to be on one socket_send() to correctly send the message length to the other endpoint - the protocol pretty works
    socket_send(pcb->id_proceso, mensaje, strlen(mensaje) + 1);
} 
```

相信我，代码目前可以工作，但`mensaje`只有值“1Proceso suspendido ...”，数据在本地打印，而不是发送到远程。

样本输出：

```
----------------

ID=4
PC=6

-- Estructura de codigo --
#!/home/desert69/workspaces/operativos/no-quiero/procer/pi/build/pi
# Comentario
variables a,b,c,d,e
comienzo_programa
a=1
b=2;3
c=a+b
d=c-3
f1()
f2()
e=a+c;2
imprimir a
imprimir b
imprimir c
imprimir d
imprimir e
fin_programa
comienzo_funcion f1
a=3
f3()
b=4
fin_funcion f1
comienzo_funcion f2
a=a+1
fin_funcion f2
comienzo_funcion f3
c=d
fin_funcion f3
----------------

-- Estructuras de datos --
c=159769736
d=159769776
a=159769600
b=159769696
e=159769816
----------------

-- Estructura de Stack --

---------------- 
```

对不起，西班牙语的代码，但我想确保它与我正在运行的完全相同。也许稍后（如果可以的话）我会尝试翻译它，但我不确定。即使很难，重要的是将every 替换`printf()`为**某些东西**以将这些输出附加到`mensaje`.

如果您需要任何进一步的信息，请随时发表评论。

谢谢。真的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:06:12.893

最简单的方法是连接一堆`sprintf`语句。忽略错误条件，该语句返回写入的字符数。所以你基本上可以这样做：

```
char *bufptr = buffer;
bufptr += sprintf( bufptr, "ID=%d\n", pcb->id_proceso );
bufptr += sprintf( bufptr, "PC=%d\n", pcb->program_counter ); 
```

*ETC*

然后`buffer`包含从对 的连续调用构建的字符串`sprintf`。显然，您需要确保缓冲区足够大。如果您预计会出现错误，您还*应该处理错误。*

此外，您可以使用 获得字符串的最终长度`bufptr - buffer`，这对于了解您是否通过套接字发送它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:05:36.007

您可以在该缓冲区中创建一个大的`buffer`所有数据。`sprintf()`

```
char buffer[20000];    // large enough
char str[500];         // temporary string holder

buffer[0] = '\0';      // clean up the buffer
sprintf( str, "----------------\n\n");            strcat( buffer, str);
sprintf( str, "ID=%d\n", pcb->id_proceso);        strcat( buffer, str);
sprintf( str, "PC=%d\n", pcb->program_counter);   strcat( buffer, str);
sprintf( str, "\n-- Estructura de codigo --\n");  strcat( buffer, str); 
```

... 等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:29:06.020

我终于创建了一个`string_concat()`函数，它接收一个`original`字符串、一个格式和一个变量参数列表，并将 a`vsnprintf`与格式和参数一起应用，并将其附加到原始字符串：

**编辑**：好的，所以我以前的方法是错误的。`va_list`我认为有问题。这是新版本：

```
/**
 * @NAME: string_append
 * @DESC: Agrega al primer string el segundo
 *
 * Ejemplo:
 * char *unaPalabra = "HOLA ";
 * char *otraPalabra = "PEPE";
 *
 * string_append(&unaPalabra, otraPalabra);
 *
 * => unaPalabra = "HOLA PEPE"
 */
void string_append(char** original, char* string_to_add) {
        *original = realloc(*original, strlen(*original) + strlen(string_to_add) + 1);
        strcat(*original, string_to_add);
}

/**
 * @NAME: string_concat
 * @DESC: Concatena al primer string el resultado de aplicar los parametros al
 * formato especificado
 *
 * Ejemplo:
 * char *saludo = "HOLA ";
 * char *nombre = "PEPE";
 *
 * string_concat(&saludo, "%s!", nombre);
 *
 * => saludo = "HOLA PEPE!"
 */
void string_concat(char **original, const char *format, ...) {
    size_t buffer_size = strlen(format) + 1;
    char *temporal = malloc(buffer_size);
    size_t message_length = 0;
    va_list arguments;
    va_start(arguments, format);
    while((message_length = vsnprintf(temporal, buffer_size, format, arguments)) > buffer_size - 1) {
        buffer_size *= 2;
        temporal = (char *) realloc(temporal, buffer_size);
    }
    va_end(arguments);
    temporal = (char *) realloc(temporal, message_length + 1);

    string_append(original, temporal);
} 
```

`string_append()`仍在泄漏内存（由于`realloc()`），我希望能管理后者。

* * *

**错误代码从这里开始**

```
/**
 * @NAME: string_append
 * @DESC: Appends the second string to the first
 *
 * Example:
 * char *aWord = "Hello, ";
 * char *anotherWord = "world!";
 *
 * string_append(&aWord, anotherWord);
 *
 * => aWord = "Hello, world!"
 */
void string_append(char** original, char* string_to_add) {
    *original = realloc(*original, strlen(*original) + strlen(string_to_add) + 1);
    strcat(*original, string_to_add);
}

/**
 * @NAME: string_concat
 * @DESC: Concatenates to the first string the result of applying the arguments to 
 * the specified format
 *
 * Example:
 * char *salute = "Hello";
 * char *name = "world";
 *
 * string_concat(&salute, ", %s!", name);
 *
 * => salute = "Hello, world!"
 */
void string_concat(char **original, const char *format, ...) {
    size_t buffer_size = strlen(format) + 1;
    char *temporal = malloc(buffer_size);
    size_t message_length = 0;
    va_list arguments;
    va_start(arguments, format);
    while((message_length = vsnprintf(temporal, buffer_size, format, arguments)) > buffer_size - 1) {
        buffer_size *= 2;
        temporal = (char *) realloc(temporal, buffer_size);
    }
    va_end(arguments);
    temporal = (char *) realloc(temporal, message_length + 1);

    string_append(original, temporal);
} 
```

**错误代码结束**

我以前是`string_append()`从[我的分配存储库](https://github.com/sisoputnfrba/commons-library)中获得的。

我认为它没有内存泄漏/问题，但还没有真正测试过那么多。但是对我有用，至少在我在原始问题中展示的示例中。

所以这是我之前展示的代码的最终版本：

```
void suspender(t_pcb *pcb) {
    char *mensaje = NULL;
    mensaje = strdup("1Proceso suspendido...\n\n");

    string_concat(&mensaje, "----------------\n\n");
    string_concat(&mensaje, "ID=%d\n", pcb->id_proceso);
    string_concat(&mensaje, "PC=%d\n", pcb->program_counter);
    string_concat(&mensaje, "\n-- Estructura de codigo --\n");

    int indice = 0;

    while(pcb->codigo[indice] != NULL) {
        string_concat(&mensaje, "%s\n", pcb->codigo[indice++]);
    }

    string_concat(&mensaje, "----------------\n");
    string_concat(&mensaje, "\n-- Estructuras de datos --\n");

    // TODA la magia negra junta: inner functions!! (?!!?!?!)
    void mostrarVariableEnMensaje(char *variable, void *valor) {
        string_concat(&mensaje, "%s=%d\n", variable, *(int *)valor);
    }

    dictionary_iterator(pcb->datos, mostrarVariableEnMensaje);

    string_concat(&mensaje, "----------------\n\n");
    string_concat(&mensaje, "-- Estructura de Stack --\n");

    void mostrarEntradaStackEnMensaje(t_registro_stack *entradaStack) {
        string_concat(&mensaje, "%d,%s\n", entradaStack->retorno, entradaStack->nombre_funcion);
    }

    pila_hacer(pcb->stack, mostrarEntradaStackEnMensaje);

    string_concat(&mensaje, "\n----------------\n");

    socket_send(pcb->id_proceso, mensaje, strlen(mensaje) + 1);
    free(mensaje);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T01:08:34.207

乍一看似乎很微不足道。在每个步骤中，您都附加了一个字符串或一个 int。前者可以简化为后者

```
char tmp[100];
snprintf(tmp, sizeof tmp - 1, "%d", n);
append_string(tmp);  // pseudo-code 
```

因此，您所需要的只是一种将字符串附加到另一个字符串的方法。这可以通过 、 、 或 的`strlen`组合`realloc`来`strcpy`完成`memcpy`。

更大的问题是您的`dictionary_iterator`和`pila_hacer`函数似乎不允许您将任何其他信息传递给回调。`printf`不在乎，因为它可以只使用 global `stdout`，但是如果你想让它附加到一个字符串，你可能需要在这里使用一个全局变量，所以你的回调知道在哪里附加。

# php - 灵活类别/子类别系统中条目的最佳数据库结构？

> ID：13557281
> 
> 赞同：0
> 
> 时间：2012-11-26T00:53:58.447
> 
> 标签：php, mysql, database-design

我想将评论存储在一个灵活的类别和子类别系统中，目前正在为此设计数据库结构。我有一个想法如何做到这一点，但我不完全确定它是否不能做得更优雅和/或更高效。这些是我的想法 - 如果有人可以评论是否/如何改进，我将非常感激。

（为了保持这篇文章的简洁，我只列出了表格的重要字段）

1.) 评论存储在“评论”表中。它具有以下字段：

```
id: uniquite ID, auto-incrementing.
title: the title that will show up in <head><title>, etc.
stub: a version of the title without spaces, special chars, etc. so it can be part of the URL/URI
text: the actual content 
```

2.) 所有类别都在同一个表“类别”中

```
id: unique ID, auto-incrementing.
title: the full title/name of the categorie how it will be output on the website
stub: version of the title that will be shown in the URL/URI.
parent_id: if this is a subcategory, here is the categories.id of the parent category. Else this is 0.
order_number: simple number to order the categories by (for display in the navigation menu) 
```

3.) 现在我需要一个指标，哪些评论属于哪些类别。可以是多个。我的第一个想法是在类别中添加一个“review_list”字段，并让它包含所有应该在这个类别中的reviews.id。但是，我认为在类别中添加和删除评论会很麻烦且“不雅”。所以我目前的想法是有一个表“review_in_category”并为每个评论类别关系都有一个条目。结构是：

```
id: Unique ID, auto-increment. 
review_id: the reviews.id 
category_id: the categories.id 
```

因此，如果评论属于 3 个不同的类别，则会在“review_in_category”表中产生 3 个条目。

这个想法是，当用户打开 www.mydomain.de/animation/sci-fi/ 时，包装脚本会将 URL 分解成各个部分。如果它找到多个具有 category.stub = "sci-fi" 的类别，它将检查其中哪一个具有具有存根 "animation" 的父类别。一旦确定了正确的类别（大多数情况下存根都是唯一的，因此可以跳过此检查）我想从“review_in_category”中选择所有 review_id，其中 category_id 与包装脚本确定的匹配。所有的 review_id 都被放入一个数组中。一个循环将遍历该数组并组成 SELECT 语句，以通过“SELECT title, stub FROM reviews WHERE id=review_list[$counter]”列出所有评论标题（并使用存根值创建指向它们的链接），然后添加“

所以我的问题是： - 我创建一个可能包含大量“OR id =”部分的单个 SELECT 语句的方法是“优雅”和/或处理这种情况的有效方法，还是有更好的变体？- 使用“分类”样式表 (review_in_category) 是否有意义，或者将“成员”/“关系”直接存储在评论或类别表中会更好吗？- 任何其他想法......我刚开始学习这些东西并感谢任何反馈。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:06:29.303

你的设计看起来不错。

要检索一个类别中的所有评论，您应该使用连接：

```
SELECT reviews.title, reviews.stub FROM reviews, review_in_category WHERE reviews.id = review_in_category.review_id AND category_id = $category 
```

# r - R中的N路方差分析

> ID：13557286
> 
> 赞同：0
> 
> 时间：2012-11-26T00:54:48.523
> 
> 标签：r, statistics, anova

我需要一些帮助来在 R 中执行 N-way ANOVA 以捕获不同因素之间的相互依赖关系。在我的数据中，大约有 100 个不同的因素，我正在使用以下代码执行 ANOVA。

```
model.lm<-lm(y~., data=data)
anova(model.lm) 
```

据我所知（可能我错了），这仅在每个因素上执行单向方差分析。由于某些原因，我需要在所有 100 个组之间执行 N 路 ANOVA，即从 x1 到 x100。我是否需要像下面这样指定每个因素，或者有一个速记符号？

```
model.lm<-lm(y~x1*x2*x3....,x100, data=data)
anova(model.lm) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:07:24.050

您可以使用`update.formula`和`~(.)^n`符号。

例如，对于一个模型，包括来自 4 个变量`a`、`b`和`c`的3 向交互`d`

```
update(~a+b+c+d, ~(.)^3)

## ~a + b + c + d + a:b + a:c + a:d + b:c + b:d + c:d + a:b:c + a:b:d + a:c:d + b:c:d 
```

因此，对于您想要适合 100 向交互的示例，我建议您考虑一个更合适的模型（特别是如果您需要在这里考虑）。

如果您决定继续使用基本的 ANOVA 方法，您可以执行类似的操作（并等待 R 由于您的大数据/不适当的模型而出现内存问题而崩溃。）

```
xvars <- paste0('x',1:100)
oneway <- reformulate(termlabels=  xvars, response = 'y')

horribleformula <- update(oneway, . ~ (.)^100)

horriblemodel <- lm(horribleformula, data=data) 
```

或者（感谢@Dason 接受这个）

```
 stillhorrible <- lm(y ~ .^100, data = data) 
```

# objective-c - 块：在完成处理程序中释放对象？

> ID：13557287
> 
> 赞同：7
> 
> 时间：2012-11-26T00:54:56.523
> 
> 标签：objective-c, macos, block

在我的`applicationDidFinishLaunching:`方法中，我创建一个对象并在其上调用一个异步方法，如下所示：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    Foo *foo = [[Foo alloc] init];

    [foo asynchronousMethodWithCompletion:^{
        // Location A
    }];

    // Location B
} 
```

如果我不使用 ARC，我必须放在`[foo release]`哪里？在完成块内部（位置 A）还是在异步方法调用之后（位置 B）？还是根本不重要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T02:27:43.183

你把它放在`[foo release]`位置 B，就像你通常会做的那样，如果有一个常规的方法调用而不是块。该块将保留对象并在完成后释放它。

# c# - 在 form2 中从 form1 访问文本框值

> ID：13557290
> 
> 赞同：0
> 
> 时间：2012-11-26T00:55:13.770
> 
> 标签：c#, winforms

我在 form1 上有一个文本框。
我想要做的是将文本框的值从 form1 获取到 form2 中。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:58:30.933

What I did was create a new project and add a second form then added a textbox to both forms, with a button on Form1 to push the value of its text box to Form2\.

To achieve this, create a Property on Form2 and set it from Form1\. Like this:

**Form1**

```
public partial class Form1 : Form
{
    Form2 frm2;
    public Form1()
    {
        InitializeComponent();
        frm2 = new Form2();
        frm2.Show(this);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        frm2.ModifyTextBoxValue = textBox1.Text;
    }
} 
```

**Form2**

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public string ModifyTextBoxValue
    {
        get { return textBox1.Text; }
        set { textBox1.Text = value; }
    }
} 
```

Done this way, the same property can also be used to pull data *from* Form2 if desired.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:38:48.727

您可以使用 .Tag 属性（在[这里](https://stackoverflow.com/questions/13468241/how-to-apply-more-than-one-tag-property-in-c)查看我的问题 ，简单的方法是这样的：在 form2 中添加另一个文本框

在表格 1 中执行此操作。此代码将 texBox.text 存储在 form1

```
try
{
    private void change_Click(object sender, EventArgs e)
    {
         form1 frm1 = new form();
         frm1.Tag = this.textBox1.text;
         frm1.ShowDialog();
    }
}
catch (Exception ex)
{
   MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

然后在加载 form2 时写下这个。此代码将 texBox2 的值替换为 texBox1 的值

```
string myText = (string)this.Tag;
   this.textBox2.text = myText; 
```

# facebook-android-sdk - 自今天下午以来，Facebook 不再使用 Facebook SDK 3.0.2 将会话返回到 Android 应用程序

> ID：13557291
> 
> 赞同：1
> 
> 时间：2012-11-26T00:55:34.153
> 
> 标签：facebook-android-sdk

今天 Facebook API 有什么变化吗？

# c - free() 上的段错误

> ID：13557292
> 
> 赞同：0
> 
> 时间：2012-11-26T00:55:39.630
> 
> 标签：c, segmentation-fault, heap-memory, free, corruption

我有一个简单的问题：我的程序在释放一些使用 calloc() 分配的内存时出现段错误。回溯中的最后一个函数是 _IO_str_pbackfail。目前我使用的是 icc 版本 12.1.6。根据堆栈溢出的其他问题，这通常是由堆损坏引起的。通过查看 calloc 源，该函数似乎在分配空间的前 16 个字节中写入了一些数据。我试图在这些字节上添加一个观察点，但调试器没有检测到任何恶意写入。关于如何追踪这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:58:12.270

您可以尝试使用[`MALLOC_CHECK_=2`](http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html)或[valgrind](http://valgrind.org/)运行。

# php - 使用 getElementById 错误的相同 id 数组

> ID：13557293
> 
> 赞同：0
> 
> 时间：2012-11-26T00:55:39.050
> 
> 标签：php, arrays

我想使用 getElementById 创建具有相同 ID 或名称的数组。

我有一个“添加按钮”，当用户按下此按钮时，它会生成一个下拉列表（动态），其值是从 mysql 获取的。

当用户按3次时它看起来像这样..

![在此处输入图像描述](../Images/0ed9d0c8a7c9fc5a03adef4906ae38f0.png) 我想创建一个这个id的数组，并将它存储到mysql ..

**这是我的 JS 代码：**

```
 var menu_paket_array = document.getElementById('menu_paket').value;   

  alert(menu_paket_array); 
```

问题是，当我尝试创建这个数组（menu_paket_array）时，这个数组中的值只是第一个id（测试1）而已..

我怎样才能解决这个问题？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:00:46.780

对多个元素使用相同的 id 是错误的。id是**唯一**标识某个元素。将其用于更多元素会破坏其目的。如果您需要它用于 ie CSS 样式，那么请改用`class`它，它专为此类场景而设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:11:27.590

[ID 在页面上必须是唯一的](http://www.w3schools.com/tags/att_global_id.asp)。您只能在一个元素上使用它。

相反，使用 CSS 类或元素类型进行迭代（[这里是演示此代码的小提琴](http://jsfiddle.net/katowulf/ZGLyn/)）：

```
function alertValues() {
    var select, selects = document.getElementsByTagName('select');
    var out = "";
    for (var i = 0; i < selects.length; i++) {
        select = selects[i];
        if (select.className && select.className.match(/CLASSNAME_TO_INCLUDE/)) {
            out += select.options[select.selectedIndex].value;
        }
    }
    alert(out);
} 
```

当然，更好的解决方案是使用[jQuery](http://jquery.org)或[mootools](http://mootools.net)之类的 dom 库，您可以使用它们执行以下操作：

```
jQuery(function($) {
    vals = [];
    $('select.CLASSNAME').each(function() { vals.push($(this).val()); });
    alert(vals.join(','));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:00:34.410

document.getElementsByClassName(names);

其中 names 是你为每个生成的类名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T01:08:11.703

而不是分配每个元素`id='menu_paket'`（[出于@WebnetMobile.com 解释](https://stackoverflow.com/a/13557327/1755252)的原因）分配`class='menu_paket'`。

而不是`var menu_paket_array=document.getElementById('menu_paket').value;`，做

```
var temp_array = document.getElementsByClassName('menu_paket');
var menu_paket_array = [];
for(i in temp_array){
    menu_paket_array[] = temp_array[i].value;
} 
```

# qt - QWebKit 在特定平台上不显示某些图像

> ID：13557299
> 
> 赞同：0
> 
> 时间：2012-11-26T00:56:35.023
> 
> 标签：qt, webkit, qt4, qwebview

我正在编写一个非常简单的基于 Qt 的应用程序，它将连接一些网站。该网站要求用户使用用户名/密码登录并解决验证码。因为那个验证码，我决定使用 QWebKit 并只为用户显示网站（并在我的应用程序中拦截 cookie）。它几乎工作得很好。几乎，因为我遇到了一个非常奇怪的问题。

在 Linux 上，我的应用程序就像一个魅力。在 64 位 Windows 7（使用 VS 2010 构建的 32 位）上 - 它也可以正常工作。但同样的二进制文件在 32 位 Windows 7 下有一个非常奇怪的问题。它可以工作，但不显示验证码图像，导致无法登录。当然，我使用了 Dependency Walker 并确保所有 DLL 都可以访问。

Captcha 不是流行的 reCaptcha 之类的，而是[Minteye 滑块 Captcha](http://blog.minteye.com/2011/01/17/adscaptcha-presents-the-slider-captcha/)（顺便说一句，在我看来，这很容易通过计算机解决）。正如您在我链接到的页面底部所看到的那样，此验证码会下载一系列图像，用户必须使用滑块选择“正确”（无乱码）的图像。

问题是，没有明显的原因，我的应用程序只是没有在 32 位 Windows 7 上显示这些图像，而在 64 位版本上一切正常。我使用的代码非常简单，但无论如何我都会发布它：

```
loginView       = new QWebView();
QWebPage *page  = new QWebPage();
manager         = new QNetworkAccessManager();

loginView->setPage(page);
page->setNetworkAccessManager(manager);
jar = new QNetworkCookieJar();
manager->setCookieJar(jar);

page->mainFrame()->load(QUrl("http://site.to.open"));
loginView->show(); 
```

我通过 Wireshark 验证这些图像确实是从服务器下载的。我什至将用户代理字符串更改为硬编码，以确保服务器不会只为 32 位 Windows 7 搞砸一些东西。除非我遗漏了什么，与服务器的对话是相同的，问题出在客户端。

唯一不同的事情（我很确定这与我的问题有关）是 WebKit 在尝试通过开发人员工具导航到特定 URL 时的行为（可以在 QWebKit 中启用它们，我也是如此）。当我打开登录页面的 Javascript 控制台并输入：

```
window.location = "http://www.google.com" 
```

它适用于我所有的平台。但是，当我输入其中一张验证码图像的地址时：

```
window.location = "http://img2.minteye.com/slider/image.ashx... 
```

结果各不相同。在 Linux 和 64 位 Windows 7 上它可以工作，我可以看到图像。在有问题的 32 位 Windows 7 上，WebKit 显示错误`Frame load interrupted by policy change`，仅此而已。我不知道该错误意味着什么以及“政策”发生了什么变化。谷歌搜索对我没有帮助 - 我发现人们抱怨他们看到这个错误的帖子，但没有人解释导致它的原因（WebKit 源代码也不是很有帮助）。如果有人知道，我可能会为我的问题找到解决方法。

我也很好奇，为什么这个问题只出现在 32 位版本的 Windows 7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T14:07:45.930

这不是错误。

发生的情况是该图像是动态生成的，可能标头配置错误。

发生这种`Frame load interrupted by policy change`情况是因为 WebView 尝试打开不是**“文本/图像”**的内容（不支持）。

你应该使用这个（[https://stackoverflow.com/a/16782607/1518921](https://stackoverflow.com/a/16782607/1518921)）：

```
//replace [QWebView] by your WebView
connect([QWebView]->page(), SIGNAL(unsupportedContent(QNetworkReply*)), this, SLOT(downloadContent(QNetworkReply*)));

...

void [main class]::downloadContent(QNetworkReply *reply){
    //Replace "[main class]" by "Class" having the signs used in WebView.

    [QWebView]->stop();
    //solution: stop loading --replace [QWebView] by your WebView, 

    /*function to donwload*/
} 
```

此时如果您有下载管理器，它会要求保存图像而不是打开它，因为不支持该内容。

**解决方案：**

*   您可以做的是尝试修复图像标题。

*   如果您的服务器不存在，那么您将不得不解析标头`Content-type`并查看它尝试发送的类型，具有您必须重新实现的内容类型`QWebPage`：

    ```
    virtual bool extension(Extension extension, const ExtensionOption *option = 0,
                           ExtensionReturn *output = 0);

    virtual bool supportsExtension(Extension extension) const; 
    ```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:05:41.710

似乎这是/曾经是 QtWebkit 实现中的错误，您可以在此处阅读更多信息： [https ://bugs.webkit.org/show_bug.cgi?id=37597](https://bugs.webkit.org/show_bug.cgi?id=37597)

您使用的是哪个版本的 Qt 和 QtWebkit？尝试更新版本的 Qt 和 QtWekbit 可能是个好主意。

如果它在任何情况下都有帮助，这里是显示此错误的 Webkit 中的代码：http: [//src.chromium.org/svn/branches/WebKit/472/WebKit2/WebProcess/WebCoreSupport/qt/WebErrorsQt.cpp](http://src.chromium.org/svn/branches/WebKit/472/WebKit2/WebProcess/WebCoreSupport/qt/WebErrorsQt.cpp)

# iphone - 我保存时核心数据返回 Null

> ID：13557301
> 
> 赞同：0
> 
> 时间：2012-11-26T00:57:10.547
> 
> 标签：iphone, core-data

这是我的代码，

`hand`是实体，`addRounds`是一个文本字段

```
-(IBAction)save{

[self dismissViewControllerAnimated:YES completion:nil];
[self.hand setValue:self.addRounds.text forKey:@"rounds"];
    NSError *error;
    if (![self.managedObjectContext save:&error]) {
            //Handle Error
    }
NSLog(@"%@", self.addRounds.text);
NSLog(@"%@", self.hand.rounds); 
```

}

控制台输出

```
2012-11-25 16:51:18.847 App[3187:c07] 1
2012-11-25 16:51:18.848 App[3187:c07] (null) 
```

所以，由于某种原因，它没有正确保存。谁能帮帮我！谢谢你！

```
-(IBAction)save{

if (self.managedObjectContext == nil)
{
    self.managedObjectContext = [(RootAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
}

    Hand *hand = [NSEntityDescription insertNewObjectForEntityForName:@"Hand" inManagedObjectContext:self.managedObjectContext];
    [self dismissViewControllerAnimated:YES completion:nil];
    hand.rounds = nil;
    self.managedObjectContext = self.app.managedObjectContext;

    NSError *error;

    if (![self.managedObjectContext save:&error]) {
         //Handle Error
    } 
```

}

***编辑***

所以基本上总共有4个视图。1) 使用表格视图查看，用户可以按“+”按钮 2) 此视图允许用户向表格视图添加单元格 3) 允许用户`edit`查看表格视图单元格 4) 这是一个完全不同的视图，它还允许用户编辑表格视图单元格。

我使用问题顶部的代码保存在两个视图`3 & 4`中。它在视图 3 但不是 4 中完美运行！

***更新！！！***

因此，我重新编码了应用程序，以便视图 1 和 4 是应用程序中仅有的两个视图。当我`push`在视图 1 和 4 之间查看 2 和视图 3 时，它会将我的 managedObjectContext 的`rounds`属性设置为`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:26:46.930

您的手实体的 rounds 属性是模型中的字符串吗？

首先，您应该将手实体的 rounds 属性的类型设置为数字类型。16 位整数可能就足够了（我们说的是纸牌游戏，对吗？），但如果你愿意，你可以把它变大。

接下来将您的代码更改为：

```
-(IBAction)save{
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
NSNumber *rounds = [numberFormatter numberFromString:numberself.addRounds.text];

[self dismissViewControllerAnimated:YES completion:nil];
[self.hand setValue:rounds forKey:@"rounds"];
    NSError *error;
    if (![self.managedObjectContext save:&error]) {
            //Handle Error
    }
NSLog(@"%@", self.addRounds.text);
NSLog(@"%@", self.hand.rounds); 
```

另外，我假设您已经在此之前插入了要在某处设置属性的手的实例。也许我不应该假设。您是否已经初始化了这个托管对象实例 self.hand 以指向存储中的数据？

例如，我喜欢使用惰性实例化：

```
- (Hand*)hand
{
    if (_hand = nil) {
        _hand = [NSEntityDescription insertNewObjectForEntityForName:@"Hand" inManagedObjectContext:self.managedObjectContext];
    }
    return _hand;
} 
```

这假设了一个纯粹的面向创造的设计。在大多数情况下，您希望编辑现有对象并更新其轮数。为此，您应该首先尝试检索您正在编辑的手。你可以使用 NSFetchRequest 来实现，并且有无数这样的例子，所以我不会在这里重复它们。如果没有匹配项，此 getter 将创建一个作为后备。此外，最佳实践是为 Hand 创建一个类别（可能是 Hand+Edit.m），其中包含检索不同 Hands、创建它们和更新公共属性的方法。

我会在 Hand 对象类别中创建工作方法，如下所示：

```
+ (void)incrementRoundsOnHand:(Hand *)hand withManagedObjectContext:(NSManagedObjectContext *)context
+ (void)incrementRoundsBy:(NSUInteger)count onHand:(Hand *)hand withManagedObjectContext:(NSManagedObjectContext *)context
// or some sort of unique identifier, date, number, etc
+ (Hand *)handWithName:(NSString *)name withManagedObjectContext:(NSManagedObjectContext *)context 
```

然后我会让handWithName:（或其他）做一个NSFetchRequest，如果没有匹配，创建一个新的手并返回它。无论哪种方式，你都会得到回报。重要的是，您无需在 Hand 托管对象类之外处理 Hand 实体的细节。请注意，由于这些是类方法，因此可以直接调用它们。

# asp.net - 如何使用淘汰赛使用 asp.net webapi

> ID：13557302
> 
> 赞同：3
> 
> 时间：2012-11-26T00:57:38.633
> 
> 标签：asp.net, knockout.js, asp.net-web-api

我是淘汰赛和 asp.net webapi 的新手，但我正在努力学习。我遗漏了一些东西，因为我无法执行 get（或 post，put...） 这是我的 webapi 方法

```
public  string GetAllData()
{
    List<Task> llistTask = new  List<Task>();
    Task lobjTask = new Task();
    lobjTask.title = "some title";
    lobjTask.isDone = false;

    llistTask.Add(lobjTask);

    return Newtonsoft.Json.JsonConvert.SerializeObject(llistTask);

} 
```

我的淘汰码

```
 <html xmlns="http://www.w3.org/1999/xhtml">
        <head runat="server">
            <title></title>
            <script src="Scripts/knockout-2.2.0.js"></script>
            <script src="Scripts/jquery-1.8.2.min.js"></script>
        </head>
        <body>
           <h3>Tasks</h3>

        <form data-bind="submit: addTask">
            Add task: <input data-bind="value: newTaskText" placeholder="What needs to be done?" />
            <button type="submit">Add</button>
        </form>

            <ul data-bind="foreach: tasks, visible: tasks().length > 0">
                <li>
                <input type="checkbox" data-bind="checked: isDone" />
                <input data-bind="value: title" />
              <%--  <a href="#" data-bind="click: $parent.removeTask">Delete</a>--%>
            </li> 
        </ul>

        You have <b data-bind="text: incompleteTasks().length">&nbsp;</b> incomplete task(s)
        <span data-bind="visible: incompleteTasks().length == 0"> - it's beer time!</span>

            <script type="text/javascript">

                function Task(data) {
                    this.title = ko.observable(data.title);
                    this.isDone = ko.observable(data.isDone);
                }

                function TaskListViewModel() {
                    // Data
                    var self = this;
                    self.tasks = ko.observableArray([]);
                    self.newTaskText = ko.observable();
                    self.incompleteTasks = ko.computed(function () {
                        return ko.utils.arrayFilter(self.tasks(), function (task) { return !task.isDone() });
                    });

                    // Operations
                    self.addTask = function () {
                        self.tasks.push(new Task({ title: this.newTaskText() }));
                        self.newTaskText("");
                    };
                    self.removeTask = function (task) { self.tasks.remove(task) };

                    // Load initial state from server, convert it to Task instances, then populate self.tasks
                    $.getJSON("http://localhost:51958/api/tasks/GetAllData", function (allData) {
                        var mappedTasks =  $.map(allData, function (item) { return new Task(item) });
                        self.tasks(mappedTasks);

                    });
                }

                ko.applyBindings(new TaskListViewModel());

            </script>
        </body>
        </html> 
```

输出是 39 行空数据，这对我来说没有意义。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T03:07:35.023

问题在于`$.getJSON()`函数的处理结果。它返回一个字符串，而不是 JSON 对象，当您`$.map()`稍后执行时，您将迭代字符串的 39 个字符，而不是您需要的对象。

要修复它，您需要将字符串解析为 JSON：

```
$.getJSON("http://localhost:51958/api/tasks/GetAllData", function (allData) {
    allData = $.parseJSON(allData);
    var mappedTasks =  $.map(allData, function (item) { return new Task(item) });
    self.tasks(mappedTasks);
}); 
```

# 更新：

我真的很感兴趣，为什么你会得到一个字符串而不是一个真实的对象，因为你应该得到一个`$.getJSON()`函数。原因是您的 WebApi 方法。至于它返回一个字符串，WebAPI 引擎将其另外转换为 JSON 字符串（它不在乎你是否已经完成了它）。结果，您有两次 JSONified 对象，而 jQuery 无法解析它。

您需要做的就是在您的 WebAPI 方法中返回 a`string`而不是 a `List<Task>`，而不是 JSON 它：

```
public List<Task> GetAllData()
{
    List<Task> llistTask = new  List<Task>();
    ...
    return llistTask;
} 
```

并且您可以保留您的 JS 代码（不需要额外`parseJSON`的），因为现在您将获得一个真实的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:55:55.497

尝试使用[ko.mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)。它将单个对象置于淘汰赛中。

代码看起来像

```
 // initial state from server, convert it to Task instances, then populate self.tasks
    $.getJSON("http://localhost:51958/api/tasks/GetAllData", function (allData) {

                self.tasks = ko.mapping.fromJSON(allData);
    }); 
```

# jquery - 视频事件 HTML5 jQuery

> ID：13557306
> 
> 赞同：19
> 
> 时间：2012-11-26T00:58:12.803
> 
> 标签：jquery, html, jquery-mobile

是否可以使用 HTML5 和 jQuery 获取视频事件？

像这样的事件：

1.  当用户开始播放视频时，获取该事件。
2.  当用户暂停/停止视频时，获取播放视频的时间和剩余播放时间。
3.  视频播放或不播放或因错误而未播放时。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T01:47:27.010

您可以在这里找到活动：http: [//www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

例子：

```
$("video").on("pause", function (e) {
  console.debug("Video paused. Current time of videoplay: " + e.target.currentTime );
}); 
```

# c++ - std::bad_alloc 不进入交换空间

> ID：13557312
> 
> 赞同：4
> 
> 时间：2012-11-26T00:59:15.500
> 
> 标签：c++, heap-memory

当我似乎有足够的（虚拟？）可用内存时，我试图理解为什么会出现 std::bad_alloc 异常。本质上，我有一个素数生成器（Eratosthenes 筛子（尚未分段）），我在其中为指标数组更新布尔值，然后为我在命令行上指定的界限下找到的素数更新整数。

我有 1GB RAM（其中一些将被我的操作系统占用（ubuntu 10.04），并且可能其中一些不能用作堆内存（我错了吗？））和 2.8 GB 的交换空间（我相信这是自动的在安装 Ubuntu 时为我设置）

如果我将上限设置为 600000000，那么我要求为我的指标数组提供 0.6 GB 内存和大约 30000000*4 字节（略微高估，因为有 26355867 个小于 500000000 的素数）用于我的素数数组和一些变量这里和那里; 这意味着我要求大约 0.72（+ 可忽略不计）GB 的内存，我认为它应该被我可用的交换空间覆盖（我知道触摸这些东西会荒谬地减慢我的程序速度）。但是我得到了 std::bad_allocs。

谁能指出我在这里缺少什么？（在粘贴我的最后一个错误之前将 long long ints 更改为 ints 的最后一件事是段错误（我的数字远低于 2^31，所以我看不到我溢出的地方） - 仍然试图弄清楚那个)

我的代码如下（并且不会剥夺我自己对更快算法等进行调查的好处。我会很感激这里的任何代码改进！（即，如果我犯了主要的禁忌））

主文件

```
#include <iostream>
#include <cmath>
#include "Prime.hpp"
#include <ctime>
#include <stdio.h>
#include <cstring>

//USAGE: execute program with the nth prime you want and an upper bound for finding primes --too high may cause bad alloc
int main(int argc, const char *argv[])
{
    int a = strlen(argv[1]);
    clock_t start = clock();
    if(argc != 2)
    {
        std::cout << "USAGE: Enter a positive inputNumber <= 500000000.\n"
          << "This inputNumber is an upper bound for the primes that can be found\n";
        return -1;
    }
    const char* primeBound = argv[1];
    int inputNum = 0;
    for(int i = 0; i < strlen(argv[1]); i++)
    {
    if(primeBound[i] < 48 || primeBound[i] > 57 || primeBound[0] == 48)
    {
        std::cout << "USAGE: Enter a positive inputNumber <= 500000000.\n"
              << "This inputNumber is an upper bound for the primes that can be found\n";
        return -1;
    }
    inputNum = (int)(primeBound[i]-48) + (10 * inputNum);
    }
    if(inputNum > 600000000)//getting close to the memory limit for this machine (1GB - memory used by the OS):
                   //(each bool takes 1 byte and I'd be asking for more than 500 million of these 
                   //and I'd also asking for over 100000000 bytes to store the primes > 0.6 GB)
    {
    std::cout << "USAGE: Enter a positive inputNumber <= 500000000.\n"
          << "This inputNumber is an upper bound for the primes that can be found\n";
        return -1;
    }

    Prime p(inputNum);
    std::cout << "the largest prime less than " << inputNum << " is: " << p.getPrime(p.getNoOfPrimes()) << "\n";
    std::cout << "Number of primes: " << p.getNoOfPrimes() << "\n";
    std::cout << ((double)clock() - start) / CLOCKS_PER_SEC << "\n";
  return 0;
} 
```

Prime.hpp

```
#ifndef PRIME_HPP
#define PRIME_HPP
#include <iostream>
#include <cmath>

class Prime
{
    int lastStorageSize;
    bool* primeIndicators;
    int* primes;
    int noOfPrimes;

    void allocateIndicatorArray(int num);
    void allocatePrimesArray();
    void generateIndicators();
    void generatePrimeList();
    Prime(){}; //forcing constructor with param = size

    public:
        Prime(int num);
    int getNoOfPrimes();
    int getPrime(int nthPrime);
    ~Prime(){delete [] primeIndicators; delete [] primes;}
};

#endif 
```

Prime.cpp

```
#include "Prime.hpp"
#include <iostream>

//don't know how much memory I will need so allocate on the heap
void Prime::allocateIndicatorArray(int num)
{
    try
    {
        primeIndicators = new bool[num];
    }
    catch(std::bad_alloc ba)
    {
    std::cout << "not enough memory :[";
    //if I'm looking for a particular prime I might have over-allocated here anyway...might be worth
    //decreasing num and trying again - if this is possible!
    }
    lastStorageSize = num;
}

void Prime::allocatePrimesArray()
{
    //could probably speed up generateIndicators() if, using some prime number theory, I slightly over allocate here
    //since that would cut down the operations dramatically (a small procedure done many times made smaller)
    try
    {
        primes = new int[lastStorageSize];
    }
    catch(std::bad_alloc ba)
    {
    std::cout << "not enough memory :[";
    //if I'm looking for a particular prime I might have over-allocated here anyway...might be worth
    //decreasing num and trying again - if this is possible!
    }
}
void Prime::generateIndicators()
{
    //first identify the primes -- if we see a 0 then start flipping all elements that are multiples of i starting from i*i (these will not be prime)
    int numPrimes = lastStorageSize - 2; //we'll be starting at i = 2 (so numPrimes is at least 2 less than lastStorageSize)
    for(int i=4; i < lastStorageSize; i+=2)
    {
        primeIndicators[i]++; //dispense with all the even numbers (barring 2 - that one's prime)
    numPrimes--;
    }
    //TODO here I'm multiple counting the same things...not cool >;[
    //may cost too much to avoid this wastage unfortunately
    for(int i=3; i < sqrt(double(lastStorageSize)); i+=2) //we start j at i*i hence the square root
    {
        if(primeIndicators[i] == 0)
    {
            for(int j = i*i; j < lastStorageSize; j = j+(2*i)) //note: i is prime, and we'll have already sieved any j < i*i
        {
        if(primeIndicators[j] == 0)
        {
            numPrimes--;//we are not checking each element uniquely yet :/
                    primeIndicators[j]=1;
        }
        }
    }
    }
    noOfPrimes = numPrimes;
}
void Prime::generatePrimeList()
{
    //now we go and get the primes, i.e. wherever we see zero in primeIndicators[] then populate primes with the value of i
    int primesCount = 0;
    for(int i=2;i<lastStorageSize; i++)
    {
        if(primeIndicators[i] == 0)
        {
        if(i%1000000 = 0)
        std::cout << i << " ";
            primes[primesCount]=i;
            primesCount++;
        }
    }
}
Prime::Prime(int num)
{
    noOfPrimes = 0;
    allocateIndicatorArray(num);
    generateIndicators();
    allocatePrimesArray();
    generatePrimeList();
}

int Prime::getPrime(int nthPrime)
{
    if(nthPrime < lastStorageSize)
    {
        return primes[nthPrime-1];
    }
    else
    {
    std::cout << "insufficient primes found\n";
    return -1;
    }
}

int Prime::getNoOfPrimes()
{
    return noOfPrimes;
} 
```

在我阅读的同时，有人对此有任何见解吗？

**编辑**由于某种原因，我决定开始使用 lastStorageSize ints 而不是 noOfPrime 来更新我的素数列表！感谢 David Fischer 发现了那个！

我现在可以超过 600000000 作为上限

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:06:31.867

您可以在程序中使用的内存量受以下两者中较小者的限制：1) 可用的虚拟内存，2) 可用的*地址空间*。

如果您在具有平面内存模型的平台上将程序编译为 32 位可执行文件，则单个进程的可寻址空间的绝对限制为 4GB。在这种情况下，您有多少可用交换空间完全无关紧要。即使您仍有大量空闲交换空间，您也不能在平面内存 32 位程序中分配超过 4GB 的空间。此外，这 4GB 可用地址中的很大一部分将保留用于系统需求。

在这样的 32 位平台上分配大量交换空间确实有意义，因为它可以让您一次运行多个进程。但它并没有克服每个特定进程的 4GB 地址空间障碍。

基本上，将其视为电话号码可用性问题：如果某个地区使用 7 位电话号码，那么一旦您用完该地区可用的 7 位电话号码，为该地区制造更多电话不再有意义- 它们将无法使用。通过添加交换空间，您实际上是“制造手机”。但是您已经用完了可用的“电话号码”。

当然，对于平面内存模型 64 位平台，同样的问题也正式存在。但是，64位平台的地址空间太大了，已经不是瓶颈了（你知道，“64位应该对每个人都足够了”:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:21:34.507

既然程序的内存使用情况很容易分析，那就让内存布局完全固定好了。不要动态分配*任何东西*。用于`std::bitset`获取固定大小的位向量，并将其设为全局变量。

```
std::bitset< 600000000 > indicators; // 75 MB 
```

这不会占用磁盘空间。当您沿着阵列前进时，操作系统只会分配零页。它可以更好地利用每一位。

当然，一半的位代表偶数，尽管只有一个偶素数。[这里](https://stackoverflow.com/a/3927720/153285)有几个主要的生成器可以优化这些东西。

顺便说一句，`new`如果可能，最好避免显式编写，避免从构造函数中调用函数，并重新抛出`std::bad_alloc`以避免让对象被构造成无效状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T01:28:43.793

当你分配筛子时，

```
void Prime::allocateIndicatorArray(int num)
{
    try
    {
        primeIndicators = new bool[num];
    }
    catch(std::bad_alloc ba)
    {
    std::cout << "not enough memory :[";
    }
    lastStorageSize = num;
} 
```

您设置`lastStorageSize`为`num`，素数的给定界限。然后你永远不会改变它，并且

```
void Prime::allocatePrimesArray()
{
    try
    {
        primes = new int[lastStorageSize];
    }
    catch(std::bad_alloc ba)
    {
    std::cout << "not enough memory :[";
    }
} 
```

尝试分配一个元素`int`数组。`lastStorageSize`

如果`num`大约是 5 亿，那么您请求的大约是 2 GB。根据操作系统/过度使用策略，`bad_alloc`即使您实际上只需要一小部分空间，这也很容易导致。

**筛分完成后，您设置`noOfPrimes`找到的素数的计数 - 使用该数字来分配素数数组。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T01:31:05.257

第一个问题是“还有哪些其他进程正在运行？” *所有*正在运行的进程共享 2.87 GB 的交换空间；它不是每个进程。坦率地说，在现代系统上，2.8 GB 对我来说听起来相当低。我不会尝试运行内存小于 2GB 和交换空间小于 4GB 的最新版本的 Windows 或 Linux。（最近的 Linux 版本，尤其是在 Ubuntu 发行版中，似乎启动了很多占用内存的守护进程。）您可能想尝试`top`按虚拟内存大小排序，看看其他进程占用了多少内存.

`cat /proc/meminfo`还将为您提供有关实际使用的内容的许多有价值的信息。（在我的系统上，只运行了几个`xterm`with `bash`，加上`Firefox`，我只有 3623776 kB 可用，在一个 8GB 的​​系统上。一些被计为使用的内存可能是磁盘缓存之类的东西，如果应用程序系统可以缩减请求内存。）

其次，关于您的段错误：默认情况下，Linux 并不总是报告 allways 正确报告分配失败；它经常会撒谎，告诉你你有记忆，而你没有。试试`cat /proc/sys/vm/overcommit_memory`。如果它显示为零，那么您需要更改它。如果是这种情况，请尝试`echo 2 > /proc/sys/vm/overcommit_memory`（并在其中一个 rc 文件中执行此操作）。您可能还必须更改 `/proc/sys/vm/overcommit_ratio`以获得可靠的行为`sbrk`（两者都`malloc`依赖`operator new`）。

# javascript - 将数据保存在 javascript 数组中

> ID：13557315
> 
> 赞同：0
> 
> 时间：2012-11-26T00:59:28.647
> 
> 标签：javascript, jquery

每次点击按钮时，我都需要使用 javascript 填充数组。

例如：如果数组是`{[10,2,5]}`并且我再次按下按钮它应该是`{[10,2,5],[6,3,4]}`

问：这个可以吗？你能给我一个起点吗？

```
$('#button').click(function()     {
//populating array keeping old data everytime user push button.
}

<form id="myForm">
    //data that ill go to array
    <input type="button" id="button" value="ok">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:01:04.143

```
var myArray = [];

$('#button').click(function(){
  var newArray = [];
  myArray.push(newArray);
}); 
```

# visual-studio - 尝试使用 XMLSerializer 反序列化时调试不介入？视觉工作室 11

> ID：13557320
> 
> 赞同：1
> 
> 时间：2012-11-26T01:00:20.367
> 
> 标签：visual-studio, serialization, xml-serialization, deserialization, xmlserializer

我正在尝试反序列化一个对象，当我在第一行代码上单击“进入”时，我会返回到表单，就好像我单击了继续一样。If Else 语句从不执行。

```
c = CType(x.Deserialize(mobjClient.GetStream), Cereal)
If c.text.Length > 0 Then
    RaiseEvent LineReceived(Me, c.text)
Else
    RaiseEvent CardReceived(Me, c)
End If 
```

这是排除的代码

```
Dim x As New XmlSerializer(GetType(Cereal))
Dim c As New Cereal 
```

从客户端单步执行序列化代码似乎工作正常。这是我的谷物课，以防你们都需要。mobjClient.getStream 是一个 TcpClient 流。

```
<Serializable> Public Class Cereal
    Public id As Integer
    Public cardType As Type
    Public attacker As String
    Public defender As String
    Public placedOn As String
    Public attack As Boolean
    Public placed As Boolean
    Public played As Boolean
    Public text As String

    Public Sub New()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:37:03.417

这就是我修复它的方法.....终于弄清楚了如何正确序列化和反序列化数据。

```
 Dim c as New Cereal
    c.text = "Testing...."
    Dim bf As New BinaryFormatter
    Dim ms As New MemoryStream
    Dim b() As Byte

    'serializes the Cereal to the created memory stream
    bf.Serialize(ms, c)
    'converts and moves into the byte array
    b = ms.ToArray()
    ms.Close()

    'send the byte array
    SyncLock mobjClient.GetStream
        mobjClient.GetStream.Write(b, 0, b.Length)
    End SyncLock 
```

这是反序列化...

```
 Dim intCount As Integer

    Try
        SyncLock mobjClient.GetStream
            'returns the number of bytes to know how many to read
            intCount = mobjClient.GetStream.EndRead(ar)
        End SyncLock
        'if no bytes then we are disconnected
        If intCount < 1 Then
            MarkAsDisconnected()
            Exit Sub
        End If

        Dim bf As New BinaryFormatter
        Dim c As New Cereal
        'when data first comes on the stream it is sent to arData, then this puts into memory stream
        Dim ms As New MemoryStream(arData)

        'cut off the memory stream at the end of the data
        ms.SetLength(intCount)
        'deserialize to the created Cereal, giving us a replica of what was sent
        c = bf.Deserialize(ms)
        ms.Close()

        'starts the listener again
        mobjClient.GetStream.BeginRead(arData, 0, 3145728, AddressOf DoRead, Nothing)

        If c.text IsNot Nothing Then
            DisplayText(c.text)
        ElseIf c.OppUserID IsNot Nothing Then
            OnConnected(c.OppUserID, c.OppGender)
        ElseIf c.command IsNot Nothing Then
            OnCommandReceived(c)
        ElseIf c.hasDeck = True Or c.hasBsDeck = True Or c.hasHand = True Then
            OnDeckReceived(c)
        ElseIf c.discard = True Then
            OnDiscard(c)
        Else
            OnCardReceived(c)
        End If

    Catch e As Exception
        MarkAsDisconnected()
    End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:18:14.690

序列化程序标有`DebuggerStepTrough`。如果您想在那里中断，请手动在自定义代码上放置一个断点。

# vb.net - VB.NET 布尔值在循环中没有得到它的默认值？

> ID：13557323
> 
> 赞同：10
> 
> 时间：2012-11-26T01:00:30.463
> 
> 标签：vb.net, variables, loops, block

我有这样的事情：

```
For i = 1 To 4
        Dim x As Boolean
        If i < 3 Then x = True
        Console.WriteLine(x)
Next 
```

给我：真真真真

和这个

```
For i = 1 To 4
        Dim x As Boolean = False
        If i < 3 Then x = True
        Console.WriteLine(x)
Next 
```

给我：真真假假

他们不是都应该给我第二个结果吗？[MSDN 文章](http://msdn.microsoft.com/en-us/library/wts33hb3%28v=vs.100%29.aspx "MSDN 文章")说 Boolean 的默认值为 False。

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T01:29:12.553

感谢您提出非常有趣的问题。我拿了示例代码：

```
Module Module1

    Sub Main()
        Test1()
        Test2()
        Console.ReadKey()
    End Sub

    Public Sub Test1()
        For i = 1 To 4
            Dim x As Boolean
            If i < 3 Then x = True
            Console.WriteLine(x)
        Next
    End Sub

    Public Sub Test2()
        For i = 1 To 4
            Dim x As Boolean = False
            If i < 3 Then x = True
            Console.WriteLine(x)
        Next
    End Sub
End Module 
```

并通过 ILSpy 查看了生成的 IL：

**测试1()**

```
 .method public static 
        void Test1 () cil managed 
    {
        // Method begins at RVA 0x2120
        // Code size 33 (0x21)
        .maxstack 2
        .locals init (
            [0] int32 i,
            [1] bool x,
            [2] bool VB$CG$t_bool$S0,
            [3] int32 VB$CG$t_i4$S0
        )

        IL_0000: nop
        IL_0001: ldc.i4.1                   
        IL_0002: stloc.0                        // put 1 on top of stack
        // loop start (head: IL_0003)
            IL_0003: ldloc.0                    // load i on top of stack 
            IL_0004: ldc.i4.3                   // load 3 on top of stack
            IL_0005: clt                        // compare if 0 is less than 3
            IL_0007: stloc.2                 
            IL_0008: ldloc.2
            IL_0009: brfalse.s IL_000d          // if i >= 3, jump to IL_000d

            IL_000b: ldc.i4.1                   // load true onto stack
            IL_000c: stloc.1                    // set x = true

            IL_000d: ldloc.1                    // load x onto stack
            IL_000e: call void [mscorlib]System.Console::WriteLine(bool) // print x
            IL_0013: nop
            IL_0014: nop
            IL_0015: ldloc.0                    // load i onto stack
            IL_0016: ldc.i4.1                   // load 1 onto stack
            IL_0017: add.ovf                    // add i + 1
            IL_0018: stloc.0                    // set i = i + 1
            IL_0019: ldloc.0                    // load i
            IL_001a: ldc.i4.4                   // load 4
            IL_001b: stloc.3                    // store 4 in iterator variable
            IL_001c: ldloc.3                    // load 4 from iterator variable
            IL_001d: ble.s IL_0003              // if i <= 4, go to beginning of loop
        // end loop
        IL_001f: nop
        IL_0020: ret
    } // end of method Module1::Test1 
```

**测试2()**

```
 .method public static 
        void Test2 () cil managed 
    {
        // Method begins at RVA 0x2150
        // Code size 35 (0x23)
        .maxstack 2
        .locals init (
            [0] int32 i,
            [1] bool x,
            [2] bool VB$CG$t_bool$S0,
            [3] int32 VB$CG$t_i4$S0
        )

        IL_0000: nop
        IL_0001: ldc.i4.1                   // load 1 onto stack
        IL_0002: stloc.0                    // set i = 1
        // loop start (head: IL_0003)       
            IL_0003: ldc.i4.0               // load 0 onto stack
            IL_0004: stloc.1                // set x = false
            IL_0005: ldloc.0                // load i onto stack
            IL_0006: ldc.i4.3               // load 3 onto stack
            IL_0007: clt                    // compare i to 3
            IL_0009: stloc.2                // store result in iterator variable
            IL_000a: ldloc.2                // load iterator variable
            IL_000b: brfalse.s IL_000f      // if i >= 3, jump to IL_00f

            IL_000d: ldc.i4.1               // load 1 onto stack
            IL_000e: stloc.1                // set x = true

            IL_000f: ldloc.1                // load x onto stack
            IL_0010: call void [mscorlib]System.Console::WriteLine(bool)    // print x
            IL_0015: nop            
            IL_0016: nop
            IL_0017: ldloc.0                // load i onto stack
            IL_0018: ldc.i4.1               // load 1 onto stack
            IL_0019: add.ovf                // add i + 1
            IL_001a: stloc.0                // set i = i + 1
            IL_001b: ldloc.0                // load i onto stack
            IL_001c: ldc.i4.4               // load 4 onto stack
            IL_001d: stloc.3                // store 4 into iterator variable
            IL_001e: ldloc.3                // load 4 from iterator variable
            IL_001f: ble.s IL_0003          // if i <= 4, go to beginning of loop
        // end loop
        IL_0021: nop
        IL_0022: ret
    } // end of method Module1::Test2 
```

这告诉我们的是，即使您在循环 ( `Dim x as Boolean`) 和 ( `Dim x as boolean = False`) 中声明 x，变量的实际声明仍发生在循环**之外。**

因为您在 in 的循环中为变量提供了默认值`Test2`，所以它实际上是`False`在每次迭代开始时将值设置为。因为您没有在循环中为 x 赋值，`Test1`并且它只在循环外声明**一次**，所以它保留了它在前一次迭代中的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T01:27:41.937

变量 x 不会在循环的每次迭代中初始化 - 只有第一次。示例 1 与

```
Dim x As Boolean
For i = 1 To 4
        If i < 3 Then x = True
        Console.WriteLine(x)
Next 
```

当您以这种方式看到它时，为什么最终得到 True True True True 是有道理的，因为您在第一次通过循环时将其设置为 True，并且没有任何东西将其设置为 False。

示例 2 与

```
Dim x As Boolean
For i = 1 To 4
        x = False
        If i < 3 Then x = True
        Console.WriteLine(x)
Next 
```

当然不直观，但这就是编译器正在做的事情

# javascript - 截断一些数据的javascript模板

> ID：13557324
> 
> 赞同：0
> 
> 时间：2012-11-26T01:00:30.917
> 
> 标签：javascript, html, jquery-templates

MovieName = "这是一个示例电影名称文本；"

```
 <tr>
       <td> ${MovieName} </td>
       <td> <input type="text" id="mytext" size="15" value=${MovieName} /> </td>
  </tr> 
```

当我运行它时，第一个打印：

```
This is a sample movie name text; 
```

第二个打印：

```
This 
```

我想知道我是否缺少一些基本的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:02:24.470

尝试：

```
<input type="text" id="mytext" size="15" value="${MovieName}"> 
```

注意`"`${MovieName} 之前和之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:02:51.753

您没有将值括在引号中，未引用的属性值中不能有空格。

```
 <td> <input type="text" id="mytext" size="15" value="${MovieName}" /> </td> 
```

# sql - Oracle Lag - 确定前一行列是否与当前行相同

> ID：13557328
> 
> 赞同：0
> 
> 时间：2012-11-26T01:00:56.843
> 
> 标签：sql, oracle, lag, analytical

是否可以使用 oracle 中的分析函数（例如滞后）来检查前一行，并根据 2 列确定这些值是否与当前行完全相同。如果是，则输出字母'Y'，否则输出'N'。

就像是：

```
IF prev.col1 = curr.col1 and prev.col2 = curr.col2 THEN 'Y' ELSE 'N' 
```

我想使用这个 Y 或 N 来过滤掉我正在编写的 Crystal Report 中的这些记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:24:21.943

是的，但由于分析处理得相当晚，因此您需要将分析作为子查询编写查询：

```
SELECT CASE WHEN col1 = prev_col1 AND col2 = prev_col2 THEN 'Y' ELSE 'N' END as yesno
  FROM (
SELECT col1, col2, 
       LAG( col1, 1 ) OVER ( ORDER BY col1, col2 ) AS prev_col1
       LAG( col2, 1 ) OVER ( ORDER BY col1, col2 ) AS prev_col2
  FROM mytable
) 
```

您需要`ORDER BY`根据定义“上一个”行的方式来调整子句。`PARTITION BY`如果您不想将整个表视为一组行，您可能还需要添加一个子句。

# image - 为什么上传图片时收不到响应数据？

> ID：13557339
> 
> 赞同：3
> 
> 时间：2012-11-26T01:02:12.167
> 
> 标签：image, qt, upload, qnetworkaccessmanager

我正在编写一个图像上传小部件，它将数据发送到 PHP 脚本并从 PHP 脚本获取新上传的文件名作为 http 响应。

@jdi，这是一个问题，现在我得到“？”作为 qDebug() << rep->readAll() 的响应，所以第一个 readAll 会清除缓冲区。

```
QByteArray bytes;
QBuffer buffer(&bytes);
buffer.open(QIODevice::WriteOnly);
image->save(&buffer, "JPG");

QNetworkAccessManager *http=new QNetworkAccessManager(this);
QNetworkRequest r(QUrl("http://domain/test.php"));

QString bound="---------------------------723690991551375881941828858";
QByteArray data(QString("--"+bound+"\r\n").toAscii());
data += "Content-Disposition: form-data; name=\"action\"\r\n\r\n";
data += "\r\n";
data += QString("--" + bound + "\r\n").toAscii();
data += "Content-Disposition: form-data; name=\"file\"; filename=\"test.jpg\"\r\n";
data += "Content-Type: image/JPG\r\n\r\n";
data += bytes;
data += "\r\n";
data += QString("--" + bound + "\r\n").toAscii();
data += QString("--" + bound + "\r\n").toAscii();
data += "Content-Disposition: form-data; name=\"desc\"\r\n\r\n";
data += "Description for my image here :)\r\n";
data += "\r\n";
r.setRawHeader(QString("Accept-Encoding").toAscii(), QString("gzip,deflate").toAscii());
r.setRawHeader(QString("Content-Type").toAscii(),QString("multipart/form-data; boundary=" + bound).toAscii());
r.setRawHeader(QString("Content-Length").toAscii(), QString::number(data.length()).toAscii());

rep = http->post(r,data);
connect(http,SIGNAL(finished(QNetworkReply*)),this,SLOT(uploadFinished(QNetworkReply*))); 
```

以及回调函数：

```
void UploadWidget::uploadFinished(QNetworkReply* r)
{
    r->deleteLater();
    if(r->error() == QNetworkReply::NoError) {
        QByteArray data = r->readAll();
        //QString s = r->readAll(); solved - readAll clears the buffer :)
    }
} 
```

我用 QByteArray b = rep->readAll() 迭代；for (int i = 0 ; i< b.size(); i++) { qDebug() << (char)b.at(i); 有什么方法可以将整个字节数组转换为 Qstring，因为我只得到一些符号

? 3、ÉE、VcD？? Ô â C ö f § 应该是“1这是一个测试1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:47:21.690

显然，从您的评论来看，您的问题是您不止一次地阅读了所有响应对象。响应对象是一个顺序 IO 对象，因此一旦您读取它，它就消失了。

> QNetworkReply 是一个顺序访问的 QIODevice，这意味着一旦从对象中读取数据，它就不再由设备保存。

阅读一次以获取 QByteArray。您可以将其转换为 QString。

```
QByteArray data = r->readAll();
QString dataStr(data);
qDebug() << dataStr; 
```

另一件需要注意的是，您不应该在每次上传调用中创建一个全新的 QNetworkAccessManager。您每次都在泄漏它，并且几乎错过了这样一个事实，即为整个应用程序保留一个会自动为您排队多个请求。为您的整个应用程序创建一个并共享它。

此外，您可能想考虑使用[方法的](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#post-3)[`QHttpMultipart`版本`post`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#post-3)，因为它似乎是一种更简洁的方式来设置所有标题。您几乎可以复制给定的方法，该方法用于发布 jpeg：

[QHttpMultipart JPEG 帖子示例](http://qt-project.org/doc/qt-4.8/qhttpmultipart.html)

* * *

## 更新

读取数据问题的实际原因是此标头：

```
r.setRawHeader(QString("Accept-Encoding").toAscii(), 
               QString("gzip,deflate").toAscii()); 
```

它告诉服务器以 gzip 压缩的形式发回结果。您最终阅读的内容必须首先解压缩。只需删除该标题，您应该会收到纯文本测试响应。

### 测试

*接收器.h*

```
#include <QObject>

class QNetworkReply;

class Receiver : public QObject
{
    Q_OBJECT
public:
    explicit Receiver(QObject* parent = 0);
public slots:
    void finished(QNetworkReply*);
}; 
```

*主文件*

```
#include <QCoreApplication>
#include <QNetworkAccessManager>
#include <QNetworkReply>
#include <QDebug>

#include "receiver.h"

Receiver::Receiver(QObject *parent)
    : QObject(parent)
{}

void Receiver::finished(QNetworkReply *reply) {
    reply->deleteLater();
    QByteArray data = reply->readAll();
    qDebug() << data;
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QNetworkAccessManager net;
    Receiver rec;

    net.connect(&net, SIGNAL(finished(QNetworkReply*)),
                &rec, SLOT(finished(QNetworkReply*)));

    QNetworkRequest r(QUrl("http://poki.ba/test.html"));
    r.setHeader(r.ContentTypeHeader, QVariant("multipart/form-data;"));
    r.setHeader(r.ContentLengthHeader, QVariant("100"));
//    r.setRawHeader(QString("Accept-Encoding").toAscii(),
//                   QString("gzip,deflate").toAscii());

    net.post(r, QByteArray());

    return a.exec();
} 
```

# hadoop - Map 任务写入 Hive 临时文件夹时权限被拒绝

> ID：13557345
> 
> 赞同：1
> 
> 时间：2012-11-26T01:03:09.190
> 
> 标签：hadoop, hive, cloudera

我在 Ubuntu Precise 12.04 x64 机器上使用 Cloudera CDH 4.1。我使用 Cloudera Manager 免费版进行了顺利安装（在我自己安装时遇到了一些困难）。但是，我仍然无法让 Hive 工作。现在我可以向它发出 Hive QL 命令来创建表，并加载本地数据（示例中的原始表）。但是，当我尝试将数据插入另一个表（具有适当的 serde 和存储的表）时，由于本地文件夹权限而失败。

```
org.apache.hadoop.hive.ql.metadata.HiveException: java.io.IOException: Mkdirs failed to create file:/home/yaboulnaga/tmp/hive-scratch/hive_2012-11-25_19-22-21_486_4469575874587213091/_task_tmp.-ext-10002
at org.apache.hadoop.hive.ql.io.HiveFileFormatUtils.getHiveRecordWriter(HiveFileFormatUtils.java:237)
at org.apache.hadoop.hive.ql.exec.FileSinkOperator.createBucketFiles(FileSinkOperator.java:477)
at org.apache.hadoop.hive.ql.exec.FileSinkOperator.closeOp(FileSinkOperator.java:709)
at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:557)
at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:193)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
at org.apache.hadoop.mapred.Child$4.run(Child.java:268)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
at org.apache.hadoop.mapred.Child.main(Child.java:262) 
```

我已将暂存文件夹移动到我的主目录中的一个文件夹（如异常所示），以便我可以将其 chmod 为 777。但是，子目录仍归 hive:hive 所有，并且 mapred:hadoop 无法写入它们。我没有找到任何解决方法，我希望有人能告诉我如何正确地做。在过去的几天里，我一直在寻找解决方法来让 Hive 工作，而且那是在我的本地机器上......我什至无法想象当我按计划在 EC2 上开始运行它时我的生活会是怎样。

谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T14:57:32.907

我遇到了同样的问题，正在使用 cloudera udacity VM。我可以创建一个表，从外部文件将数据加载到该表中，然后从表名中选择 *，就是这样。其他一切都失败了，甚至从表名中选择计数（1），从表名中选择 col1 等等。 . 使用了get同样的异常，mkdirs在-------------------创建文件失败

我注销，然后以 sudo hive 身份重新登录，突然之间，一切都像魅力一样。

希望这可以帮助 ！

# php - 自定义 php Web 应用程序中的作业说明未显示

> ID：13557348
> 
> 赞同：2
> 
> 时间：2012-11-26T01:03:37.950
> 
> 标签：php

希望你们中的一些人对 php 有很好的了解！

基本上制作这个的人是 MIA，所以我不能问他我需要做什么来解决我们遇到的问题。

**背景：** 我们是一家锁匠公司，当他们有新工作时，我们使用自定义 Web 应用程序来通知我们的锁匠。这个网络应用程序还做了一些额外的事情，比如提供 gps 位置、工作时间以及在工作完成后从客户端保存签名的能力。

**问题：** 该应用程序通过接收从我们的名为 E3 的帐户管理应用程序发送的电子邮件来工作，该电子邮件（例如：[http](http://cl.ly/image/2E433O330T0N) ://cl.ly/image/2E433O330T0N ）被此 Web 应用程序读取，并被解析为电子邮件和网页并发送给锁匠以查看他的新工作。当锁匠到达他的手机上的网页时（例如：[http ://cl.ly/image/0P1I0R0h0O3K](http://cl.ly/image/0P1I0R0h0O3K))，他可以看到工作详细信息，包括客户的姓名、地址和联系方式。但问题是，由于原始电子邮件中没有为工作说​​明分配标题，因此代码必须确定工作说明所在的位置，这是有问题的部分，因为 Web 应用程序不再显示工作中的数据笔记。工作笔记很重要，因为它告诉锁匠他需要修理什么。这以前有效，但现在刚刚停止工作，我们不确定为什么。

数据如何传输到 Web 应用程序是非常有趣的，而不是有一个数据库来存储数据，它被放在地址栏中，然后网页解释代码并将其格式化到页面中。

例如，这是当前链接的样子（取出数据，替换为 xxxxxxx）：

> [http://www.xxxxxxx.com/apps/xxxxxx/on-my-way](http://www.xxxxxxx.com/apps/xxxxxx/on-my-way)？**客户**=xxxxxx&**公司**=xxxxxx&**手机**=xxxxxxx&**电话**=xxxxxxx&**联系人**=xxxxxxxx&**地址**数据=数组&**地址索引**=3&**街​​道地址**=xxxxxxxxx&**地址位置**=xxxxxxxx&**邮政编码**=xxxxxxx&**城市**=xxxxxxx&**客户电子邮件**=&**工作日期**=11/22/2012&**工作时间**=1:30:00 %20PM& **jobID** =xxxxxx& **jobAMPM** =PM& **adminEmail** =xxxxxxx&****公司电话**=xxxxxxxx&**员工电子邮件**=xxxxxxxx&**员工姓名**=xxxxxxx&**员工电话**=xxxxxxxx**

 **以前，在工作时，此链接添加了一个 jobNotes 字段：

> [http://www.xxxxxxxx.com/apps/xxxxxxxx/on-my-way](http://www.xxxxxxxx.com/apps/xxxxxxxx/on-my-way)？**客户**=xxxxxxxx&**公司**=xxxxxxxx&**手机**=xxxxxxxx&**电话**=&**联系人**=xxxxxxxx&**地址**数据=数组&**地址索引**=4&**街道地址**=xxxxxxxx&**地址位置**=xxxxxxxx&**邮编**=xxxxxxxx&**城市**=xxxxxxxx&**客户电子邮件**=xxxxxxxx&***工作注释*=Quote%20on%20installing%20new%20keying%20system% 0A%0AAlso%20would%20like%20a%20Quote%20on%20Install%20CCTV%0A%0ASub%20Total%3A%202%2C236.36%0AGST%3A%20223.64%0ATotal%3A%202%2C460.00%0A% 0AMISC&**工作日期****=11/19/2012* *& **jobTime** =2:00:00%20PM& **jobID** =xxxxxxxx& **jobAMPM** =PM& **adminEmail** =xxxxxxxx& **noreplyEmail** =xxxxxxxx& **companyPhone** =xxxxxxxx& **staffEmail** =xxxxxxxx& **staffName** =xxxxxxxx& **staffPhone** =xxxxxxxx

**编码：**

这是 e3-parser.php 的摘录，该文件是用于将数据从 e3 电子邮件转换到 Web 应用程序的主文件。

```
 // Job notes
  if ($this->clientEmail) {

// REMOVED NOW THAT EMAIL IS BEING PUT ON THIRD LINE OF ADDRESS
//   // If customer email present grab everything after it save it as job notes
//   preg_match("/$this->clientEmail[^-]+/",$e3Output,$matches);
//   $result = implode("",$matches);
//   $notes  = trim(str_replace($this->clientEmail,'',$result));
//   $this->jobNotes = rawurlencode($notes);
// } else {

    // Fall back to grabbing everything after the time
    preg_match("/AM[^-]+/",$e3Output,$matchesAM);
    preg_match("/PM[^-]+/",$e3Output,$matchesPM);
    $resultAM = implode("",$matchesAM);
    $resultPM = implode("",$matchesPM);    
    $notes  = trim(str_replace('AM','',$resultAM) . str_replace('PM','',$resultPM));
    $this->jobNotes = rawurlencode($notes);
  } 
```

这里的问题是，它是否成功抓取了**Required Time**字段之后列出的数据？（它正在读取的示例电子邮件`http://cl.ly/image/2E433O330T0N`：）

以下是将解析后的数据放入网页的代码：

```
// Create job link
$url      = $e3->create_job_url('http://www.prvgroup.com.au/apps/jobbook/on-my-way?');  
$linkName = "View job details";
$href     = '<a class="btn btn-small" href="' . $url . '&staffEmail=' . $staff-    >staffEmail . '&staffName=' . $staff->staffName . '&staffPhone=' . $staff->staffPhone . '">' . $linkName . '</a>'; 
```

这将通过电子邮件发送给锁匠，在可点击的链接“查看工作详细信息”上通知他他的新工作。该链接充满了所需的数据。但是从外观上看，jobNotes 的数据不存在。当代码显示 jobNotes 时，我对这段代码的备份在此处显示完全相同的内容，因此我不确定它是如何放入该字段的。

如果你能做到这一点，那就太好了！我希望我对问题是什么已经足够清楚了，但是如果您需要更多说明，请问！

干杯，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:58:13.003

在查看您的代码后，如果有 clientEmail，您只会运行 preg_match。从上面的示例电子邮件来看，您似乎从未执行过此代码，因为没有客户端电子邮件或使用 preg_match 找不到它。要查看的具体位置在 e3-parser.php 文件的第 113 行。你会看到这个：

```
if($this->clientEmail) 
{
    //matching code here.
} 
```

在第 109 行和第 110 行，您正在寻找一个电子邮件地址，但要么没有找到要么它在错误的位置。无论如何，无论是否有电子邮件地址，您都应该执行此代码。必须设置注释以供以后使用，现在没有设置任何内容。删除此 if 语句应该可以解决您的问题。**

# ruby-on-rails - 从 json POST 返回的重复嵌套关联

> ID：13557351
> 
> 赞同：0
> 
> 时间：2012-11-26T01:03:42.947
> 
> 标签：ruby-on-rails, activerecord, associations, ruby-on-rails-3.2, has-many-through

我正在尝试在我的 rails（版本 3.2.9）应用程序中使用 REST API。

我正在将一个 json 数据包发布到一个标准的 rails 脚手架控制器，其中包括模型本身的详细信息和嵌套的子节点。

父模型及其子模型已成功插入数据库。但是，来自 POST 的响应会使嵌套的子级加倍。

为什么嵌套关联在 POST 响应中加倍？在过去的几天里，我一直在努力解决这个问题……这让我发疯了。

## 具体例子

### JSON 请求

```
POST http://localhost:3000/audio_events HTTP/1.1
Host: localhost:3000
Connection: keep-alive
Content-Length: 432
Accept: application/json, text/plain, */*

{
    "audio_event": {
        "start_time_seconds": 0.05,
        "end_time_seconds": 15.23,
        "low_frequency_hertz": 1000,
        "high_frequency_hertz": 8753,
        "audio_event_tags_attributes": [
            {
                "tag_id": "-1"
            },
            {
                "tag_id": "-2"
            }
        ],
        "audio_recording_id": "1bd0d668-1471-4396-adc3-09ccd8fe949a"
    }
} 
```

### JSON 响应

```
HTTP/1.1 201 Created
Location: http://localhost:3000/audio_events/27
Content-Type: application/json; charset=utf-8
X-Ua-Compatible: IE=Edge
Etag: "c79ccdf981a9fadad3a8b08c3a878e8e"
Cache-Control: max-age=0, private, must-revalidate
Content-Length: 924
Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
Date: Mon, 26 Nov 2012 00:27:47 GMT
Connection: Keep-Alive

{
    "created_at": "2012-11-26T00:27:32Z",
    "creator_id": 1,
    "deleted_at": null,
    "deleter_id": null,
    "end_time_seconds": "15.23",
    "high_frequency_hertz": "8753.0",
    "id": 27,
    "is_reference": false,
    "low_frequency_hertz": "1000.0",
    "start_time_seconds": "0.05",
    "updated_at": "2012-11-26T00:27:32Z",
    "updater_id": 1,
    "audio_event_tags": [
        {
            "audio_event_id": 27,
            "created_at": "2012-11-26T00:27:32Z",
            "creator_id": 1,
            "tag_id": -1,
            "updated_at": "2012-11-26T00:27:32Z",
            "updater_id": 1
        },
        {
            "audio_event_id": 27,
            "created_at": "2012-11-26T00:27:32Z",
            "creator_id": 1,
            "tag_id": -2,
            "updated_at": "2012-11-26T00:27:32Z",
            "updater_id": 1
        },
        // DUPLICATES ARE HERE
        {
            "audio_event_id": 27,
            "created_at": "2012-11-26T00:27:32Z",
            "creator_id": 1,
            "tag_id": -1,
            "updated_at": "2012-11-26T00:27:32Z",
            "updater_id": 1
        },
        {
            "audio_event_id": 27,
            "created_at": "2012-11-26T00:27:32Z",
            "creator_id": 1,
            "tag_id": -2,
            "updated_at": "2012-11-26T00:27:32Z",
            "updater_id": 1
        }
    ],
    "audio_recording": {
        "id": 1,
        "uuid": "1bd0d668-1471-4396-adc3-09ccd8fe949a"
    }
} 
```

### 楷模

多对多模型

```
class AudioEventTag < ActiveRecord::Base
  belongs_to :audio_event
  belongs_to :tag
  accepts_nested_attributes_for :audio_event

  attr_accessible :audio_event, :tag, :tag_id

  stampable
  belongs_to :user, :class_name => 'User', :foreign_key => :creator_id

  validates_uniqueness_of :audio_event_id, :scope => :tag_id
end 
```

标记模型

```
class Tag < ActiveRecord::Base
  has_many :audio_event_tags
  has_many :audio_events, :through => :audio_event_tags
  accepts_nested_attributes_for :audio_events, :audio_event_tags

  attr_accessible :is_taxanomic, :text, :type_of_tag

  stampable
  belongs_to :user, :class_name => 'User', :foreign_key => :creator_id
  acts_as_paranoid
  validates_as_paranoid
end 
```

音频事件模型

```
class AudioEvent < ActiveRecord::Base
  belongs_to :audio_recording

  has_many :tags, :through => :audio_event_tags, :uniq => true

  has_many :audio_event_tags
  accepts_nested_attributes_for :audio_event_tags

  attr_accessible :audio_recording_id, :end_time_seconds, :high_frequency_hertz, :is_reference,
                  :low_frequency_hertz, :start_time_seconds,
                  :tags_attributes, :audio_event_tags_attributes

  stampable
  belongs_to :user, :class_name => 'User', :foreign_key => :creator_id
  acts_as_paranoid
  validates_as_paranoid

  # validation
  validates :audio_recording, :presence => true

  validates :start_time_seconds, :presence => true, :numericality => { :greater_than_or_equal_to  => 0 }
  validates :end_time_seconds, :numericality => { :greater_than_or_equal_to  => 0 }

  validates :low_frequency_hertz, :presence => true, :numericality => { :greater_than_or_equal_to  => 0 }
  validates :high_frequency_hertz,  :numericality => { :greater_than_or_equal_to  => 0 }

  # json formatting
  def as_json(options={})
    super(
        :include =>
            [
                :audio_event_tags,
                :audio_recording  => {:only => [:id, :uuid]}
            ],
        :except => :audio_recording_id
    )
  end
end 
```

## 更新

根据评论中的要求，我在控制器中的操作代码

```
# POST /audio_events
# POST /audio_events.json
def create
  @audio_event = AudioEvent.new(params[:audio_event])
  #@audio_event.audio_event_tags.each{ |aet|  aet.build() }

  #@audio_event.audio_event_tags.count.times { @audio_event.audio_event_tags.build }

  respond_to do |format|
    if @audio_event.save

      format.json { render json: @audio_event, status: :created, location: @audio_event }
    else
      format.json { render json: @audio_event.errors, status: :unprocessable_entity }
    end
  end
end 
```

而且，我尝试删除stampable 和acts_as_paranoid 宏无效。

## 更新 2

如果我尝试添加 3 个嵌套属性，我会得到 6 个。4 返还 8，5 返还 10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:50:08.720

从评论转发。

看起来像 json 序列化问题。如果单独的 get 工作正常，您可以`@audio_event.audio_event_tags.reload`在控制器中的 format.json 之前尝试。

——当然很奇怪。audio_event_tags 的内存详细信息在 @audio_event.save 行中被弄乱了。AudioEvent 是否有 after_save 回调？如果没有回调，那么我不知道这是怎么发生的。需要重现它。如果所有嵌套属性都发生这种情况，这是一个严重的问题。

# php - PHP 表单处理 - 使用多个用户输入连接表

> ID：13557352
> 
> 赞同：1
> 
> 时间：2012-11-26T01:04:05.670
> 
> 标签：php, mysql, sql

我有一个表单，它接受用户输入的多个参数。然后它们用于搜索和检索记录。查询需要连接多个表，但由于参数值来自用户，我的代码目前正在创建具有交叉产品的多条记录，即具有多个地址的同一个人。

这是我的代码：

```
if( $_POST["submit"] ) {

if (!($stmt =$mysqli->prepare(" SELECT DISTINCT Fname, Minit, Lname, EMPLOYEE.Phone, Address, Sname, Saddress, Dno, Hourly
    FROM EMPLOYEE, DEPARTMENT, LOCATION
    WHERE EMPLOYEE.Fname=? OR EMPLOYEE.Lname=? OR EMPLOYEE.Dno=? OR LOCATION.Store_num=?"))) {      
print "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
}
if (!$stmt->bind_param("ssii",$_POST['Fname'], $_POST['Lname'], $_POST['Dno'], $_POST['Store_num'])) {
print "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}
if (!$stmt->execute()) {
    print "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }       
$stmt->store_result();
if (!$stmt->bind_result($Fname,$Minit,$Lname,$Phone,$Address,$Slocation,$Saddress,$Dno,$Hourly)) {
         print "Binding output parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}
if ($stmt->num_rows == 0){
    print "No results were found for the following search <p>"
    .$_POST['Fname'].$_POST['Lname'].$_POST['Store_num'].$_POST['Dno']."</p>";
}

else {
    print "<table border=2 cellpadding=4>

        <tr bgcolor=white>

        <th>First Name</th>

        <th>Middle Initial</th>

        <th>Last Name</th>

        <th>Phone</th>

        <th>Address</th>

        <th>Store</th>

        <th>Store Location</th>

        <th>Dept #</th>

        <th>Hourly Rate</th>

        </tr>";

while ($stmt->fetch()){

    print "<tr><td>".$Fname."</td><td>".$Minit."</td><td>".$Lname.

    "</td><td>".$Phone."</td><td>".$Address."</td><td>".$Slocation."</td>
    <td>".$Saddress."</td><td>".$Dno."</td><td>".$Hourly."</td></tr>";
    }

print "</table>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:19:23.010

解决此问题的一种方法是根据传入的参数动态形成 SQL 查询。如果用户试图过滤该值，您似乎只想加入 LOCATION 表。如果你加入它并且他们没有传递一个值，它可能会强制返回额外的行。

另请注意，我假设这`Dno`是加入 DEPARTMENT 和 EMPLOYEE 的关键，这`Store_num`是加入 LOCATION 和 DEPARTMENT 的关键 - 如果不是，只需将它们更改为您的密钥。我没有从您的问题中获得的一些信息，但是以下概念应该是您需要做的。

```
$fromClause = '';
$whereClause = '';

// If they have filtered on Store_num, add the relevant bits to the query
$if(isset($_POST['Store_num'])) {
    $fromClause = " INNER JOIN LOCATION ON LOCATION.Store_num = DEPARTMENT.Store_num ";
    $whereClause = " OR LOCATION.Store_num = ?";
}

$query = '
SELECT 
    DISTINCT Fname, Minit, Lname, EMPLOYEE.Phone, Address, Sname, Saddress, Dno, Hourly 
FROM 
    EMPLOYEE 
INNER JOIN 
    DEPARTMENT ON DEPARTMENT.Dno = EMPLOYEE.Dno
' . $fromClause . '
WHERE 
    EMPLOYEE.Fname=? OR EMPLOYEE.Lname=? OR EMPLOYEE.Dno=?
' . $whereClause; 
```

# php - 如何使用 $_SESSION 变量来检索数据并将其显示在另一个页面中

> ID：13557357
> 
> 赞同：1
> 
> 时间：2012-11-26T01:05:15.023
> 
> 标签：php, session

下面我有一个 php 脚本，它显示一个“课程”下拉菜单和一个“模块”下拉菜单。假设发生的是用户首先从“课程”下拉菜单中选择一门课程，然后属于所选课程的模块列表将出现在“模块”下拉菜单中。下面是这个的代码：

**create_session.php**

```
$sql = "SELECT CourseId, CourseNo, CourseName FROM Course"; 
$sqlstmt=$mysqli->prepare($sql);
$sqlstmt->execute(); 
$sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);
$courses = array(); // easier if you don't use generic names for data 

$courseHTML = "";  
$courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

while($sqlstmt->fetch()) 
{ 
    $courseno = $dbCourseNo;
    $course = $dbCourseId;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  
} 

$courseHTML .= '</select>'; 

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
        <tr>
            <th>Course: <?php echo $courseHTML; ?>
                <input id="courseSubmit" type="submit" value="Submit" name="submit" />
            </th>
        </tr>
    </table>
</form>

<?php

if (isset($_POST['submit'])) {

    $submittedCourseId = $_POST['courses'];

    $query = "SELECT cm.CourseId, cm.ModuleId, c.CourseNo, m.ModuleNo,
            c.CourseName,
            m.ModuleName
            FROM Course c
            INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
            JOIN Module m ON cm.ModuleId = m.ModuleId
            WHERE
            (c.CourseId = ?)
            ORDER BY c.CourseName, m.ModuleId";

    $qrystmt=$mysqli->prepare($query);

    // You only need to call bind_param once
    $qrystmt->bind_param("s",$submittedCourseId);
    // get result and assign variables (prefix with db)

    $qrystmt->execute(); 
    $qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseNo,$dbModuleNo,$dbCourseName,$dbModuleName);

    $qrystmt->store_result();

    $num = $qrystmt->num_rows();

    if($num ==0){
        echo "<p style='color: red'>Please Select a Course</p>";
    } else { 

        $dataArray = array();

        while ( $qrystmt->fetch() ) { 
            // data array
            $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
            $dataArray[$dbCourseId]['CourseNo'] = $dbCourseNo; 
            $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
            $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleNo'] = $dbModuleNo; 

            }

        foreach ($dataArray as $foundCourse => $courseData) {

            $output = ""; 

            $output .= "<p><strong>Course:</strong> " . $courseData['CourseNo'] .  " - "  . $courseData['CourseName'] . "</p>";

            $moduleHTML = ""; 
            $moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
            $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
            foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

                $moduleHTML .= "<option value='$moduleId'>" . $moduleData['ModuleNo'] . " - " . $moduleData['ModuleName'] ."</option>".PHP_EOL;        
            } 
        }
    $moduleHTML .= '</select>';

    echo $output;

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
        <tr>
            <th>Course: <?php echo $moduleHTML; ?>
                <input id="courseSubmit" type="submit" value="Submit" name="submit" />
            </th>
        </tr>
    </table>
</form> 
```

因此，假设我`INFO101 - Information Communication Technology`在“课程”下拉菜单中选择了课程，它会在下面的模块下拉菜单中显示与该课程对应的以下模块：

```
CHI2520 - Advanced Web Programming
CHI2220 - Systems Strategy
CHI2350 - Interactive Systems 
```

现在我想要做的是我希望用户从下拉菜单中选择一个模块，然后提交下面的表单以导航到 QandATable.php 页面。但我想知道如何从下拉菜单中检索模块编号和名称并将其显示在 QandATable.php 页面中？我知道我应该使用 $_SESSION 变量 如何以及在哪里写两个页面中的 $_SESSION 变量？我还需要使用`isset`所以我没有得到未定义的变量吗？

下面是导航到 QandATable.php 的表单：

```
<form action="QandATable.php" method="post" id="sessionForm">
            <table><tr><th>6: Module:</th>
            <td><?php echo $moduleHTML; ?></td>
            </tr>
            </table>
            <p><strong>11: </strong><input class="questionBtn" type="submit" value="Prepare Questions" name="prequestion" /></p>   

        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:14:18.247

在回答你的问题。是的，最好在最初发布的变量上使用 isset 或 is_null 以确保您具有有效值。在将其写入会话变量的情况下，尽管这无关紧要。您可以将空值分配给会话变量，但如果您尝试使用期望有效值的会话变量，它可能会在以后导致意外结果。

要设置会话变量，您可以执行以下操作。您可以随时设置它以更新变量。我通常在从用户那里收集数据后将它们分配到某个帖子页面上。

```
$_SESSION['variableName'] = $_POST['postedVariable']; 
```

请记住，您还需要在将使用会话或可能被建立的会话变量命中的每个页面的最顶部添加以下代码。如果您没有在页面上设置此代码并且用户访问它，您将丢失会话跟踪。

```
session_start(); 
```

要稍后引用存储的会话变量，您可以这样做：

```
echo $_SESSION['variableName']; 
```

希望我正确理解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:37:10.123

> 但我想知道如何从下拉菜单中检索模块编号和名称并将其显示在 QandATable.php 页面中？我知道我应该使用 $_SESSION 变量 如何以及在哪里写两个页面中的 $_SESSION 变量？

在此 php 代码的末尾，您可以保存 $dataArray 的全部或任何部分，例如

```
if (!isset($_SESSION)) {
  session_start();
}
  $_SESSION['dataArray'] = $dataArray; 
```

当您加载 QandATable.php 页面时，您调用：

```
if (!isset($_SESSION)) {
  session_start();
}
if (isset($_SESSION['dataArray'])){
  $dataArray = $_SESSION['dataArray'];
} 
```

然后，您可以使用您选择的选项（来自 $_POST）作为数组的索引来获取您想要的信息。

# c# - 在 appharbor 上启用基本身份验证

> ID：13557358
> 
> 赞同：3
> 
> 时间：2012-11-26T01:05:17.397
> 
> 标签：c#, wcf, basic-authentication, appharbor

如何在 appharbor.com 上部署的应用中启用基本身份验证？我已经在本地 IIS 上启用了它，一切正常，但是在 apphb 上向 WCF 发出请求时，所有响应的状态都为 400。

# api - OpenEphyra QA API

> ID：13557359
> 
> 赞同：1
> 
> 时间：2012-11-26T01:05:24.483
> 
> 标签：api, nlp

我目前正在研究一个关于 NLIDB（数据库的自然语言接口）的项目。为了处理自然语言问题，我需要某种问题分析器模块，它由 OpenEphyra 提供。我一直在努力使用 OpenEphyra API 几个星期，但没有运气。源代码中存在错误，我不知道如何修复错误并构建源代码。

有人知道如何使用 OpenEphyra API 吗？或者除了 OpenEphyra 还有其他自然语言问题分析工具吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T22:35:23.357

OpenEphyra 在自然语言上运行得最好，这意味着它需要大量的文本才能找到任何答案。您在本地插入到机器的数据的默认知识挖掘器 Indri 是用 C 和 C++ 编写的，具有 OpenEphyra 的接口，我发现它有时不稳定且容易出错。当我编写一个使用 Apache Lucene 为 OpenEphyra 索引和检索文档的 KnowledgeMiner 类时，这大大改善了。因此，如果您决定坚持使用 OpenEphyra，最好编写一个类似的 KnowledgeMiner，通过数据库访问数据。

话虽如此，您可能应该考虑 IBM Watson 用于 Jeopardy 的一些技术；开源 UIMA 是一个好的开始，但 Tony Pearson 的博客 (ibm.co/Pearson) 提供了一个非常好的教程，教您如何构建您自己的由数据库支持的问答系统。

# javascript - 当两个元素都没有悬停时调用函数？

> ID：13557361
> 
> 赞同：1
> 
> 时间：2012-11-26T01:05:37.070
> 
> 标签：javascript, jquery

我的想法是有两个变量， insideLink 标记我当前是否将鼠标悬停在我的菜单上， insideBox 检查我是否将鼠标悬停在 Div 容器上。

如果我离开，我会检查我是否也离开了另一个元素，如果我都离开了，我会调用 closeboth 函数来关闭它们。

我试过这样做，但它不起作用。离开菜单链接后，框立即关闭。

我想 setTimeout 会有所帮助，但是我的尝试效果不佳。有任何想法吗？

```
$(linkID).hover(function() {
    insideLink=1;
    console.log("Its over Link");
},function() {
    insideLink=0;
    if (insideBox==0) {
      console.log("Its outside both elements, closebox"); 
      closebox();
    }
});

$(open).hover(function() {
    insideBox=1;
    console.log("Its inside box");
},function() {
    insideBox=0;
    if (insideLink==0) {
      console.log("Its outside both elements, closebox");
      closebox();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:54:58.700

由于`mouseout`链接在框之前触发`mouseover`，一种方法是使用`setTimeout()`：

```
insideLink=0;
setTimeout(function() {
    if (insideBox==0) {
        console.log("Its outside both elements, closebox"); 
        closebox();
    }
}, 100); 
```

它将盒子关闭动作暂停 100 毫秒，这应该足以`mouseover`让设置为 1 的事件被触发`insideBox`。同样可以应用于`.hover()`盒子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:44:20.307

我猜你的意思是这样的：

```
 <div  id="outerDiv" onmouseover="checkMouse()">
        Outer DIV <br />
        <div id="innerDiv">Inner DIV 
            <br /> Inner DIV <br />
        </div>
        Outer DIV <br />
    </div>

    <script type="text/javascript">
        function checkMouse(){

            if(window.event.target.id == 'outerDiv'){
                console.log( 'indise outer div');
            }
            else{
                console.log( 'indise inner div');
            }
        }
    </script> 
```

# ios - Xcode 故事板视图控制器中的多个视图，其中一个不会出现在故事 板编辑器中

> ID：13557362
> 
> 赞同：14
> 
> 时间：2012-11-26T01:05:41.583
> 
> 标签：ios, xcode, uiview, xcode4.2, uistoryboard

我无法更新其他人在 Xcode 中创建的项目。这是一个内置在故事板中的应用程序，在一种情况下，在故事板编辑器的文档大纲调色板中，有一个带有视图控制器的场景，其下方有多个视图（显示在包含的图像中）。第一个视图是在情节提要编辑器中单击时突出显示的视图，并且当您更改视图中的设计或对象时，该视图会更新。还有第二个视图（出口和第一响应者下方的那个）以某种方式附加到该场景，但我不知道如何编辑该视图的*设计*。如果我单击该视图或其任何子视图，我可以在右侧的各种检查器中清楚地看到它们的属性（连接、属性等）。

（编辑 1 - 这个问题的原始版本建议这些附加视图用于切换到横向时所需的特殊布局。它们实际上比这更普遍，例如，在活动视图上显示弹出窗口时。）

无论如何，我的主要兴趣在于能够修改第二个视图。似乎必须有一种方法可以在编辑器中看到它，而我只是想念它。我搜索了有关在情节提要中实现纵向和横向视图的教程（似乎没有人使用这种方法），寻找“情节提要场景中的多个视图”之类的短语，并查看了菜单选项（包括一个有希望的选项“未嵌入”时选择了第二个视图，但是单击它会从场景中删除该视图，然后我找不到它）。我不知道在哪里可以了解更多信息。如何编辑此视图？任何帮助表示赞赏。

![文档大纲中的 ViewController 场景](../Images/2ce87c3c91d20cf0843805372f14041b.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T05:15:37.977

我知道这没有任何意义，但您可以将其拖入第一个视图（暂时）以通过情节提要进行编辑。我认为这很荒谬，但它确实有效。

![在此处输入图像描述](../Images/c2c295bb0b5296d29d53638163098a9d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T22:50:19.010

我前段时间遇到过这个问题，我发现在隐藏视图上以图形方式工作的唯一方法是：

*   将另一个临时 ViewController 添加到 Storyboard
*   为其分配正确的类（在您的情况下为 MainViewController）
*   删除它的主视图（左菜单，命令+退格）
*   从原始 ViewController 中选择隐藏视图并将其拖动到新视图中，正好在“主视图控制器”图标下方（始终使用左侧菜单，即您在图像中附加的那个）
*   在视图上工作，添加控件和图形，甚至连接插座/动作
*   完成视图处理后，将视图拖回其原始位置
*   删除临时视图控制器

插座应保持连接。如果您使用 command-x / command-v（剪切/粘贴），您将失去出口。

让我知道

# c# - 需要 SQLite 的 SQL 或 Lambda 指导

> ID：13557366
> 
> 赞同：0
> 
> 时间：2012-11-26T01:06:09.830
> 
> 标签：c#, linq, sqlite, lambda, windows-store-apps

我一直在寻找 SQLite 查询示例。我能够在 SQL 中找到的那些无法编译，因为无法识别各种方法和类名（即 Open()、SQLiteDataReader 和 SQLiteDatabase）。

Lambda中的那些我不太明白。例如，这个：

```
public Task<List<Platypi>> GetAllLocationsAsync()
{
    return new SQLiteAsyncConnection(SQLitePath).Table<Platypi>().ToListAsync();
} 
```

...大概通过返回的列表返回 Platypi 表中的每条记录。但我不想要全部，我想限制/过滤记录；这是一个开始，我猜：

```
private async Task<List<Platypi>> GetLocationsForPeopleAndTimeRange(List<string> DuckbillIds, DateTime EarliestToShow, DateTime LatestToShow)
{
    SQLiteAsyncConnection conn = new SQLiteAsyncConnection(SQLitePath);
    var query = conn.Table<Locations>().Where(x => x.DuckbillId // ? what now ?
    return await query.ToListAsync();
} 
```

...但我不知道如何构造 Where() 子句。我需要查询所有记录，其中 DuckbillId 是 DuckbillIDs 中的值之一，并且 DateTime 字段介于 EarliestToShow 和 LatestToShow 之间。IOW，伪 SQL 将类似于：

从 Platypi 中选择 *，其中 DuckbillIds 中的 DuckbillId 和 DateVal 介于 EarliestToShow 和 LatestToShow 之间

我更喜欢基本 SQL 选择、插入、更新和删除（CRUD 操作）的一些工作示例；第二好的是 Lambda，它的语法对我来说似乎很复杂。

LINQ 也可以。

## 更新

我在 SQLite-Net 的页面 (http://code.google.com/p/sqlite-net/) 上找到了一些示例，这些示例导致我这样做，至少可以编译：

```
public List<Locations> GetLocationsForPlatypiAndTimeRange(List<string> PlatypiIds, DateTime EarliestToShow,
                                                         DateTime LatestToShow)
{
    var db = new SQLite.SQLiteConnection(SQLitePath);

    StringBuilder sb = new StringBuilder();
    foreach (String s in PlatypiIds)
    {
        sb.Append(string.Format("{0},", s));
    }
    sb.Remove(sb.Length - 1, 1); // remove the superfluous trailing comma
    return
        db.Query<Locations>(
            "Select * from Locations Where PlatypusId in (?) and SentTimeLocal >= ? and SentTimeLocal <= ? Order by SentTimeLocal",
            sb.ToString(), EarliestToShow, LatestToShow);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:04:22.907

根据您的代码示例，我假设您正在使用[sqlite-net](http://nuget.org/packages/sqlite-net)。尝试查看它的[自述](https://github.com/praeclarum/sqlite-net)文件和[文档](https://github.com/praeclarum/sqlite-net/wiki)。有几个使用 SQL 语法的工作示例应该可以帮助您。

I'm not sure which samples you were trying out but the class names you are mentioning are definitely not part of sqlite-net, they sound as if they were from the [SQLite ADO.NET provider](http://nuget.org/packages/System.Data.SQLite).

# assembly - 汇编指令陷阱有什么作用？

> ID：13557371
> 
> 赞同：1
> 
> 时间：2012-11-26T01:07:01.380
> 
> 标签：assembly, basic, nios

“[实时调频](http://www.ict.kth.se/courses/IS1500/2012/kurslitt/n2cpu_nii5v1.pdf)”

> 当程序需要操作系统提供服务时，程序通常会发出软件陷阱。操作系统的通用异常处理程序确定陷阱的原因并做出适当的响应。

汇编指令陷阱是否与 BASIC 中的指令陷阱相似？答案似乎是肯定的。你能接受或拒绝我的结论吗？

“不中断”的代码是根据我的指示：

```
noint:
    PUSH r8
    movia r8,0x003b683a # machine code for TRAP
    ldw et,-4(ea) # read instr closest to return
    cmpeq et,et,r8 # compare
    POP r8
    bne et,r0,TrapHandler # if equal, jump to traphandler 
```

更新

BASIC 中的 AFAIK，您可以编写例如

```
10 TRAP 20 
```

使第 20 行成为处理错误的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:18:56.833

不确定 TRAP 在 BASIC 中的作用，但`TRAP`您链接的汇编器手册中的指令会生成可由操作系统处理的硬件异常。

程序员很少需要在他们的代码中使用这条指令。它的典型用途是由调试器在需要停止的点（断点）处插入正在调试的代码中，然后运行/继续程序，并在`TRAP`到达指令后重新获得控制权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T20:52:36.473

用户进程可以自愿过渡到操作系统内核，请求内核代表用户做一些操作。系统调用是内核提供的任何可以从用户级调用的过程。大多数处理器使用特殊的陷阱指令实现系统调用。

# apache - 在 VmWare 上连接到不同的 tcp 端口

> ID：13557372
> 
> 赞同：0
> 
> 时间：2012-11-26T01:07:20.113
> 
> 标签：apache, virtualization, virtualhost

我是网络程序员。我在 WINdows 7 上工作，但我在 Debian 6 Squeeze 上托管我的项目，安装在 VmWare Workstation 上并配置了 NAT，这样我就可以通过 IP '192.168.195.222' 从 Windows 访问 Web 服务器。但我想要从 Windows 到虚拟机（debian）上每个项目的绝对 URL。为此，我将每个项目设置在不同的端口上。所以我将此代码输入到我的VM上的/etc/apache2/httpd.conf： DocumentRoot /home/poject1 Listen 127.0.0.1:8080

所以现在我想从 Windows 访问我的项目，比如“http://192.168.195.222:8080”，但是浏览器没有通过这个 url 找到任何东西。但是从 debian 我可以通过 url 127.0.0.1:8080 访问这个项目我如何从 Windows 访问这个项目？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:09:54.623

`Listen 127.00.1:8080`意味着您的虚拟服务器将只接受来自自身的连接。

用于`Listen 8080`侦听所有网络接口。

# mips - mips pc相对地址

> ID：13557375
> 
> 赞同：1
> 
> 时间：2012-11-26T01:07:42.507
> 
> 标签：mips, memory-address

尝试从 David A Patterson 的 Computer organization and design 一书中学习 Mips。第 4 版。
但是，对于有关 PC 相对地址的问题之一，我感到困惑，问题是：
当前 PC 是`0x00000600`，您可以使用单个批处理指令来获取 PC 地址吗？

> a) 1010 1101 0001 0000 0000 0000 0000 0010
> b) 1111 1111 1111 1111 1111 1111 1111 1111

答案是对于当前 PC，范围是：

`0X0604 + 0x1FFFC = 0x0002 0600`至`0x0604 - 0x20000 = 0xFFFE`

他们如何获得 0x1FFFC 和 0X20000 ？

请帮助，非常感谢提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:54:49.257

MIPS 架构中的分支指令允许您指定 16 位 2s 补码偏移量，该偏移量向左移动两位以形成 18 位 PC 偏移量（因为指令必须字节对齐，最低 2 位始终必须是零），然后从 PC 中添加或减去。

现在，如果您采用最大 PC 偏移值，您可以添加到 PC（以便最终使用 2s 补码添加到 PC），考虑到的移位将是 00000000000000011111111111111100 或 0x1FFFC。

如果您采用最大 PC 偏移值，您可以减去 PC（这样您最终会使用 2s 补码减去 PC），考虑到的移位将是 00000000000000100000000000000000 或 0x20000。

因此，如果你有一个 PC 值并且你想知道它可以跳转到的地址范围，你只需要找到最大值和最小值分别是 PC + 0x1FFFC 和 PC - 0x20000。

如果您对任何事情感到困惑，请随时提出任何问题。

# c# - 使用 Jint/Trap console.log 调用从 C# 运行 javascript

> ID：13557376
> 
> 赞同：1
> 
> 时间：2012-11-26T01:07:51.293
> 
> 标签：c#, javascript, debugging, jint

我正在使用 JINT 将 javascript 文件加载到一个小型 C# 应用程序中，并使用 C# 中的一些参数调用许多方法。我想获取这些方法的返回值。这就是我正在做的事情：

```
 JintEngine engine = new JintEngine();
        string file = File.ReadAllText(@"C:\thejavascript.js");
        engine.Run(file);            
        Console.WriteLine(engine.CallFunction("themethod")); 
```

javascript方法如下：

```
 function themethod() {   
            console.log("Hello!");
                return "Finished";
        } 
```

当我运行上面的代码时，我可以在 VisualStudio 控制台中看到“完成”，但是调用发送“你好！” 到 AS3 控制台无处可寻。它甚至不在 flashlog.txt 文件中。事实上，我认为 JINT 会引发错误，因为它可能不是存在的“控制台”对象，因为没有浏览器。

如何捕获从在 JINT 中运行的 javascript 发送到控制台的内容？JINT 下载站点上有一个示例，其中包含 SystemConsole' 或其他内容（不是 System.Console），但我没有成功地让它工作。我希望能够将调试代码添加到 javascript 并在 VisualStudio 的控制台中看到它。

有任何想法吗？这使得调试我正在做的事情变得非常困难。. .

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:54:41.733

在 C# 中：

```
 JintEngine engine = new JintEngine();
        engine.SetFunction("__log", new Action<object>(Console.WriteLine));
        var billy = engine.CallFunction("testMethod"); 
```

在 Javascript 中：

```
var customConsole= {};

customConsole.__log = function(args){ var toCall = '';
for(var i = 0, l = arguments.length; i <l; i++){ toCall += arguments[i] + ' '; }
__log(toCall);};

function testMethod() {         
    customConsole.__log("Log this. . .");
} 
```

# c# - .aspx 网页中对 HttpClient 请求的简单字符串响应示例

> ID：13557382
> 
> 赞同：0
> 
> 时间：2012-11-26T01:08:48.907
> 
> 标签：c#, asp.net, string, httpclient, response

我只是想用一个字符串来响应 HttpClient POST 请求，但我的网页总是用整个 HTML 文本和其他东西来响应。

我是一个菜鸟，我会很感激一个关于如何对请求进行简单字符串响应的简单示例。

我已经尝试过 Response.Clear()、Response.ClearContent()、将字符串写入响应等，但我不知道我在做什么，而且似乎不起作用。

任何帮助或链接到一个示例？^（我整天都在使用谷歌，但从来没有发现简单的东西，也从来没有关于响应，总是关于请求）我正在使用 c#。

提前谢谢^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:21:10.620

您应该为此使用 http 处理程序。将通用处理程序添加到您的项目并使用 Response.Write

默认情况下，默认处理程序已经返回简单的字符串响应“Hello world”。

![在此处输入图像描述](../Images/faa99cb4d2cd6978fbb903cdd609f9bd.png)

# java - 如何访问在“if”语句中创建的 ArrayList？

> ID：13557383
> 
> 赞同：-4
> 
> 时间：2012-11-26T01:08:58.967
> 
> 标签：java, if-statement, arraylist, scope

有人可以帮助我吗，我试图在声明它的 if 语句之外使用名为 prop 的数组列表，并在其中添加了一个对象。

这是 if 语句。代码要求用户输入信息，然后声明一个 Property 对象和一个 ArrayList 属性，它将我创建的属性对象添加到 ArrayList 中。

```
if(option.equals("one")){

    int x = 1;
    do{
        try{
            System.out.println("Enter owner name");
            String ownerName = scan.nextLine();
            System.out.println("Enter address");
            String address = scan.nextLine();
            System.out.println("Are you the principle private residant?");
            String principlePrivateResidance = scan.nextLine();
            System.out.println("Enter property location(city, large town, small town, vilage, countryside) ");
            String location = scan.nextLine();
            System.out.println("would you like to pay the propery tax now?(yes//no)");
            String paid = scan.nextLine();
            System.out.println("Enter your filename");
            String fn = scan.nextLine();
            System.out.println("Enter the estimated property value");

            int propertyEstimatedVal = scan.nextInt();
            // i make the object here 
            Property property = new Property(ownerName, address, paid, principlePrivateResidance,location, propertyEstimatedVal);

            // Then make the arraylist and add the object to it take this arraylist and put it....

            ArrayList<Property> prop = new ArrayList<Property>;
            prop.add(property);
            CalculateTax tax = new CalculateTax(property.getLocation(),property.getPrinciplePrivateResidance(),property.getPropertyEstimatedVal(), property.getPaid());

            System.out.println("owner:" + property.getOwnerName());
            System.out.println("address:" +property.getAddress());
            System.out.println("propertyEstimatedVal:" +property.getPropertyEstimatedVal());
            System.out.println("principlePrivateResidance:" +property.getPrinciplePrivateResidance());
            System.out.println("location:" +property.getLocation());
            System.out.println("paid:" +property.getPaid());
            System.out.println("Your property tax is" + CalculateTax.getSumoftax() );
            System.out.println("your details have been taken");

            FileWriter fstream = new FileWriter(fn,true);
            BufferedWriter out = new BufferedWriter(fstream);
            out.write(property.getOwnerName() + " | " + property.getAddress() + " | " + property.getPropertyEstimatedVal() + " | " + property.getPrinciplePrivateResidance() + " | " + property.getLocation() + " | " + property.getPaid() + " | " + CalculateTax.getSumoftax());
            out.newLine();
            out.close();
            x= 2;
        }
        catch(Exception e){
            System.out.println("error has occured");
        }
    }
    while(x == 1);

}
else if(option.equals("two")){
    // this just opens a file
    System.out.println("Please enter you file name");
    String filename = scan.nextLine();

    try{
        // Open the file that is the first
        // command line parameter
        FileInputStream fstream = new FileInputStream(filename);
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        //Read File Line By Line
        while ((strLine = br.readLine()) != null)   {
            // Print the content on the console
            System.out.println (strLine);
        }
        //Close the input stream
        in.close();
    }
    catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }
}
else if(option.equals("three")){
    //i need to get that arraylist with the objects i added to it here but
    //i just dont know how
    System.out.print("Service is currently available ");

}
else{
    System.exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:29:00.330

您需要将数组列表 decalration/insntantiation 移到`if`语句之外，如下所示：

```
 List<Property> prop = new ArrayList<Property>;

        if(option.equals("one")){
             //your if block code
            do{
               //rest of your code except list declaration/initialization
              }while(x==1);
              ....
        }else if(option.equals("two")){
           .....
        } else if(option.equals("three")){
           //your list `prop` is available here
           ....
        } 
```

这是必需的，原因有两个：

1.  目前，您正在`do-while`循环的每次迭代中重新实例化道具列表并丢失先前添加的数据。
2.  `if`只有当您需要`if`在 else 块之外访问它时，您的列表才在块的范围内。

通过将列表初始化移到`if`块之外，您将解决这两个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:28:29.123

如果您需要访问语句的`ArrayList`外部，则`if`需要将变量声明移动到`if`语句之前。例如，删除此处的行...

```
Property property = new Property(ownerName, address, paid, principlePrivateResidance,location, propertyEstimatedVal);

// Then make the arraylist and add the object to it take this arraylist and put it....

ArrayList<Property> prop = new ArrayList<Property>; // REMOVE THIS LINE
prop.add(property); 
```

并在此处添加它...

```
ArrayList<Property> prop = new ArrayList<Property>; // ADD THIS LINE

if(option.equals("one")){

    int x = 1;
    do{ 
```

现在，`ArrayList`在您的语句之前定义了`if`，因此您可以在语句内部和外部的任何位置使用它`if`。

无论如何，您可能都希望将您`ArrayList`的`do-while`循环移出，否则`ArrayList`每次通过循环时都会创建一个新的`do-while`。我确定您真正想要的是创建一个`ArrayList`并添加一些项目 - 因此您需要移动循环`ArrayList`外部的声明`do-while`，这也可以通过我上面的代码更改来实现。

您需要做的下一件事是检测项目是否已添加到您的账户中`ArrayList`。如果您不执行`if(option.equals("one")){`语句中的代码，则不会将任何内容添加到 中`ArrayList`，因此它将为空。因此，如果您想`ArrayList`稍后使用您的，您应该首先检查其中是否有任何项目，如果它们存在则使用它们 - 可能是这样的......

```
if (prop.size() > 0){
    // there are items
    doSomething();
}
else {
    // no items
    doSomethingElse();
} 
```

# java - 为什么对不可变的最终实例变量使用私有修饰符？

> ID：13557384
> 
> 赞同：2
> 
> 时间：2012-11-26T01:09:01.167
> 
> 标签：java, abstract, final

我正在编写一个代表一些简单几何图形的 Java 类。

在最顶层的`abstract`类（它本身是**package-private**）我已经声明了我需要从同一个包中的子类访问的属性。

`final`如果我在 中声明一个属性`AbstractClass`，

```
final int foo; 
```

我将能够直接在包中访问它，而无需对 getter 方法大惊小怪。然而。根据“实践”（或我认为是常见的风格）做的将是：

```
private final int foo; 
```

这当然需要一个非`private`吸气剂。子类必须引用`foo`（这是一个非常相关且典型的属性），就好像它是某个外部对象一样：

```
this.getFoo(); 
```

它添加代码并删除访问这些成员的直接方式（即`foo`）。

**跳过修饰符是否有任何缺点`private`，因为它们无论如何都是最终的，我不担心在包内部暴露这些属性？**

我知道 OO 拥护者声称 getter/setter 是对象访问它们自己的属性的一种非常自然的方式——但这什么时候会使任何非装饰性的、非 [插入任何 JavaBeans 样式的东西] 有所不同？

考虑一个内部类 ，`Coordinate`它非常简单，因为它有两个`int`属性 - 将所有用法留给 class `OuterClass`：

```
class OuterClass{
    final static class Coordinate{
        final int x, y;
        Coordinate(int x, int y){
            this.x = x;
            this.y = y;
        }
    }
    Coordinate coordinate;
} 
```

对于这个内部类 - 我为什么要为创建吸气剂的实践而烦恼？getter 会引入更多代码并强制同一包中的任何类调用`coordinate.getX();`而不是简单地调用`coordinate.x;`. 这里有开销吗？注意`final`class 上的修饰符`Coordinate`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T01:12:47.663

getter 的优点是将接口与实现解耦。今天你`getFoo`可能除了 return 什么都不做`foo`，但将来你可能想要，例如，远程`foo`成员并返回一个计算结果。getter 将允许您这样做，而无需在每个调用站点进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:49:22.967

如果您要从 JSF Page 访问该值，它将期望 getFoo 而不仅仅是 foo（即使您编写了`object.foo`）。

除此之外 - 今天这个领域是最终的，从现在起很长一段时间它可以改变（我猜）。即使机会非常接近于 0，我相信遵循良好做法也不会过大。在大多数情况下，您进行更改而不是从头开始编写代码，因此尽可能保护自己要好得多（如果只需要编写`private`并且在 Eclipse 的情况下大约 4 次单击以自动生成 getter 和 setter）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T11:37:52.853

扩展 Feldgendler 的答案（提供的信息可能对需要回答这个问题的人有用——我相信这是相关的，因为它确实是一个关于封装的问题）：

在使用`private`修饰符的作用下，您将不得不创建“​​getter”（例如`int getX(){ ... }`）来维持访问。可以在已实现的`interface`. Java`interface`不允许声明实例变量，例如--- 或**任何**`final int x;`其他缺少`static`修饰符的变量的示例。该接口将充当任何实现类将具有的行为的声明。

如果实施如下：

```
Coordinate implements ICoordinate { ... } 
```

它在许多情况下可能很有用：

***接口的使用***

*   API 的自文档。
    *   易于阅读、记录和管理。
    *   因此，允许多个实现易于使用和交换。
    *   在基于组件的设计等方面：提供明确的方法来*提供*或 *要求*所描述的行为，而无需实际准备好任何实现代码。
        *   示例：然后可以创建一个提供接口的数据库组件。*John Doe 想要编写一个将来使用数据库的程序。然而，现在使用其他一些更简单的存储形式就足够了。为了在这一天到来时不重新编码已经工作的代码，John 可以使用方法实现一个接口（可能给出名称`interface IDatabase`），`void insert( ... ); Object get( ... );`也许还有更多方法——然后实现他的临时解决方案。这一天到来了，他现在拥有一个实现相同功能的数据库`interface IDatabase`。要切换到新数据库，他可能只需要更改*一行代码*（例如构造函数调用）！*
*   一个例子：http: [//pastebin.com/vvV2Nck8](http://pastebin.com/vvV2Nck8)

***使用私有修饰符***

*   它*阐明*了课程的*意图*！就像界面一样，它具有自我记录的性质。（它在安全方面没有价值）
    *   `private`修饰符意味着它不会被超出范围访问。或者等价地——只能在一定范围内访问。当然同样适用于`public`, "package-private" (没有修饰符暗示 package-private) 和`protected`.
    *   访问属性不会明确告诉调用者它是什么类型的变量。有一个 getter 但没有 setter 说别的东西......
    *   注意：对于常量（例如`static final double LIGHT_SPEED`），有合理的理由省略 getter 并使用它`public`。这只是约定，因为很清楚什么是常数，什么是具有自己成员的对象。
    *   注意2：如果有兴趣，请阅读`final`关键字及其对优化的影响。它们可以用在方法和属性中。（[在 Java 中使用 final 关键字会提高性能吗？](https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance)是一个例子）

# google-drive-api - JavaScript 共享对话框不适用于文件夹和某些文件

> ID：13557385
> 
> 赞同：1
> 
> 时间：2012-11-26T01:09:02.400
> 
> 标签：google-drive-api

我正在使用共享对话框（[https://developers.google.com/drive/manage-sharing](https://developers.google.com/drive/manage-sharing)），但它似乎不适用于未在应用程序中打开的文件夹或文件。我可以理解后者，但是有什么方法可以使用文件夹上的共享对话框吗？

# java - 以编程方式将单选按钮与右侧的文本和左侧的按钮对齐

> ID：13557387
> 
> 赞同：1
> 
> 时间：2012-11-26T01:09:06.167
> 
> 标签：java, android, android-layout, android-relativelayout

我正在尝试以编程方式对齐左侧单选按钮的文本和右侧的按钮，而不是下一个屏幕截图中显示的内容

![正常放射性核素](../Images/479e21be3aff3d0c1fdbad90f5b86696.png)

我试图创建一个相对布局并放置 textview 和 radiobtn（没有文本），但每次尝试都不成功:(

我在这里发布了我尝试运行但无法对齐的代码。

```
 RelativeLayout relLay = new RelativeLayout(this);
        relLay.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView textView=new TextView(this);
        textView.setText(device.getName());
        textView.setGravity(Gravity.LEFT);  

        RadioButton radioBtn= new RadioButton(this);
        radioBtn.setText(" ");
        radioBtn.setTag(device);
        radioBtn.setChecked(false);
        radioBtn.setGravity(Gravity.RIGHT); 

        RelativeLayout.LayoutParams lp1 = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

        lp1.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
        RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

        lp2.addRule(RelativeLayout.ALIGN_PARENT_RIGHT,RelativeLayout.TRUE);

        relLay.addView(textView,lp1);
        relLay.addView(radioBtn,lp2);
        radioGr.addView(relLay); 
```

我还必须指出，我正在将相对布局添加到由 ScrollView 包含的无线电组中。

预先感谢您的帮助和耐心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:43:56.400

您可以使用以下代码：

```
RelativeLayout relLay = new RelativeLayout(this);
            relLay.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            relLay.setGravity(Gravity.RIGHT);
            TextView textView=new TextView(this);
            textView.setText("good");
            textView.setGravity(Gravity.RIGHT);  
            RadioButton radioBtn= new RadioButton(this);
            radioBtn.setChecked(false);
            radioBtn.setId(125); //you must setid for radioBtn

            RelativeLayout.LayoutParams lp1 = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

          lp1.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
            RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(
                 RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            lp1.addRule(RelativeLayout.ALIGN_BASELINE,radioBtn.getId());
          lp1.addRule(RelativeLayout.LEFT_OF,radioBtn.getId());
            lp2.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
            relLay.addView(radioBtn,lp2);
            relLay.addView(textView,lp1);
            this.setContentView(relLay); 
```

# .net-2.0 - .NET 2.0 客户端将使用的服务的技术选择

> ID：13557388
> 
> 赞同：0
> 
> 时间：2012-11-26T01:09:23.087
> 
> 标签：.net-2.0

我正在尝试决定使用哪种技术来实现将由 .NET 2.0 客户端使用的服务。

客户端需要能够请求一组文件。请求将包含文件名和版本。客户可能请求的文件数量可能会有所不同。

不能期望客户端支持高于 2.0 版的 .NET。

该服务会将请求的文件集作为单个压缩存档流式传输。

我对实现服务的选择以及（更重要的是）如何从 .NET 2.0 使用服务感到有些困惑。自从我编写 .NET 2.0 代码以来已经有很长时间了，我不知道如何使用我从 .NET 2.0 代码中读到的任何技术。

我相信我在技术方面的选择是：

1.  ASMX 网络服务
2.  带有 basicHttpBinding 的 WCF
3.  WCF Web HTTP（使用带有 POST 的 WebInvoke，我相信我可以在 HttpWebRequest 对象中流式传输数据）？
4.  某种 REST 服务？
5.  其他？

以上哪一项适用于 .NET 2.0 客户端？

如何将我的一组文件名/版本映射传递给 .NET 2.0 代码？

我不需要确切的代码；只是对服务技术的一般建议以及如何传递我的数据的一般想法。我可以自己研究其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:15:25.857

.Net 2.0 中只有 ASMX Web 服务可用

# java - 故障安全迭代器

> ID：13557390
> 
> 赞同：0
> 
> 时间：2012-11-26T01:09:35.810
> 
> 标签：java

CopyOnWriteArrayList 产生故障安全迭代器，因为每次“修改结构”时，修改意味着产生一个新数组。迭代器迭代数组的旧副本？那么，故障安全意味着它不会发生故障吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:18:30.433

[请参阅http://www.certpal.com/blogs/2009/09/iterators-fail-fast-vs-fail-safe/](http://www.certpal.com/blogs/2009/09/iterators-fail-fast-vs-fail-safe/)上的比较和解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:54:55.680

阅读这篇文章以获得更好的解释[http://www.journaldev.com/378/how-to-avoid-concurrentmodificationexception-when-using-an-iterator](http://www.journaldev.com/378/how-to-avoid-concurrentmodificationexception-when-using-an-iterator)

# python - Python：如何忽略非字母字符并将所有字母字符视为小写？

> ID：13557397
> 
> 赞同：2
> 
> 时间：2012-11-26T01:11:02.837
> 
> 标签：python

我正在尝试用 Python 编写一个程序来检查输入的字符串是否按字母顺序（abcdearian）。程序需要忽略非字母字符，将大写字母视为小写字母。例如... abCde 是 abcdearian 而 eff!ort 是 abcdearian。现在该程序不会忽略非字母字符，但它确实将大写字母视为小写字母。但是，我希望程序打印原始输入，而不是转换后的输入。所以 abCde 在打印时应该显示为 abCde（而不是 abcde）。谢谢您的帮助！

```
def isabcde(s):
    for i in range(len(s) - 1):
        if s[i] > s[i+1]:
            return print(s, "is not abcdearian")
    return print(s,  "is abcdearian")

while True:
    try:
        s = input("The string? ").lower()
    except EOFError:
        break
    except TypeError:
        break
    isabcde(s) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:16:27.670

我会试试这个：

```
def isabcde(s):
    filtered = [i for i in s.lower() if i in 'abcdefghijklmnopqrstuvxyz']
    for i in range(len(filtered) - 1):
        if filtered[i] > filtered[i+1]:
            return print(s, "is not abcdearian")
    return print(s,  "is abcdearian")

while True:
    try:
        s = input("The string? ")
    except EOFError:
        break
    except TypeError:
        break
    isabcde(s) 
```

如果你有野心，你可以尝试替换：

```
 for i in range(len(filtered) - 1):
        if filtered[i] > filtered[i+1]: 
```

和：

```
 if all([i[0] < i[1] for i in zip(filtered,filtered[1:]) : 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:16:19.360

`string.lower()`您可以在内部执行，而不是在函数外部调用，如下所示：

```
def isabcde(s):
    original = s
    s = s.lower()
    for i in range(len(s) - 1):
        if s[i] > s[i+1]:
            print(original, "is not abcdearian")
            return
    print(original,  "is abcdearian")

while True:
    try:
        s = input("The string? ")
    except EOFError:
        break
    except TypeError:
        break
    isabcde(s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:28:53.350

这是另一种方式：

```
def is_abcdearian(s):
    import re
    s = s.lower()
    s = re.sub('[^a-z]', '', s)
    return s == ''.join(sorted(s)) 
```

# c - 从文件中删除字符串

> ID：13557402
> 
> 赞同：0
> 
> 时间：2012-11-26T01:11:44.790
> 
> 标签：c, string, file

我正在用 C 编码。我有以下文件 ui.txt

```
user1 | 127.0.1.1
user2 | 127.0.1.1
user3 | 127.0.1.1 
```

如果我有一个字符串 str 是“user2”，我需要在 ui.txt 中找到具有 str 的行，并删除该行以便我得到

```
user1 | 127.0.1.1
user3 | 127.0.1.1 
```

我打开了这样的文件：

```
FILE *fp;
fp = fopen("ui.txt","a+"); 
```

我用 a+ 打开它，因为任何时候我必须输入新信息，比如另一个用户和他们的 IP 地址，我都会将它附加到文件的末尾。

我该怎么做？它是否需要使用 fgetc 或 fgets？到目前为止，我一直在使用 fgets。请给我完整的代码。

PS str 也可以是“user2 | 127.0.1.1”，如果这有助于简化逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:17:11.703

您本质上是在问与此处相同的问题：[Delete a Line from a file in C Language](https://stackoverflow.com/questions/1151713/delete-a-line-from-a-file-in-c-language)，以及此处：[从文件中的特定位置删除字符串](https://stackoverflow.com/questions/5496192/deleting-a-string-from-a-particular-position-in-a-file)

您必须将文件加载到内存中，在那里对其进行编辑，然后将其写回磁盘。

# c - 随机数和多个 srand 调用

> ID：13557404
> 
> 赞同：6
> 
> 时间：2012-11-26T01:11:49.667
> 
> 标签：c, random, srand

我正在编写一个程序，它将在循环中生成大量随机数。我试图让这些数字不太可预测（不仅是为了安全，也是为了避免多个线程上的冲突）。

我注意到许多文档建议`srand`在程序中只调用一次。例如：[C 中的随机数](https://stackoverflow.com/questions/2449456/random-numbers-in-c)，选择的答案是“作为一般规则，只在程序中调用 srand() 一次”。

但为什么？为什么做这样的事情会这么糟糕：

```
int THIS_THREAD_SEED;
int randomness() {
    ++THIS_THREAD_SEED;
    int i;
    for(i=0 i<1000; i++) {
        unsigned n = rand_r(&THIS_THREAD_SEED) / RAND_MAX;
        /* do something with n */
    }
    return 0;
}

int do_something() {
    int i;
    for(i=0; i<1000; i++) {
        randomness();
    }
} 
```

因此，种子在每个函数调用中更改一次，而不是在每个程序中更改一次。这样，无论有多少线程正在运行，都不会有两个线程都有相同的随机数列表……对吧？

**更新** 假设我为每个线程都有一个唯一的种子，或者全局 SEED 上的互斥锁以防止竞争条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:36:28.543

让我们把这个问题分成两个独立的问题。

1.  **如果您在访问**随机数生成器时担心竞争条件，请创建互斥锁或其他同步原语来避免这种情况。

2.  如果你想打`srand()`几次电话，请不要。这背后的原因是基于种子设置变量的随机生成器初始化例程具有更差的随机特性，提供比随机生成器本身更差的性能，不应用作替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:36:56.197

`srand()` will *reset* the stream of numbers `rand()` will generate for you.

From the manual for srand:

> ```
>  The srand() function sets its argument as the seed for a  new  sequence
>    of  pseudo-random  integers  to be returned by rand().  These sequences
>    are repeatable by calling srand() with the same seed value. 
> ```

If you need "better" random numbers then rand() provides you should look into other sources of randomness.

Also `srand()` is not used for `rand_r()`, the argument you provide (to `rand_r()`) is used instead.

And if you want to use `rand_r()` from multiple threads all threads should have a local seed, you shouldn't use a single global variable for that.

Alternatives to `rand()` can be [Mersenne Twister](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html)

But if you need "real" randomness you have to look hardware support.

And to answer:

> As such, the seed changes once per function call, not once per program. This way, no matter how many threads are running, no two threads will every have the same random number list... Right?

No, doesn't work that way, you should have a thread-local SEED variable initialized to something unique for every thread. You could use `time()` for the first seed, and then use that random sequence to generate seeds for the other threads, or you read 4-8 bytes from `/dev/random` or `/dev/urandom` if you'r using *nix.

Hope that gives some insight as this is midnight rumble, good night <3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:28:39.263

为避免竞争条件，您需要为每个线程使用单独的种子变量。这意味着每个线程都有自己独立的随机数序列。

# mysql - 运行 EXPLAIN 时，如果 key 的字段值不为 null 而 Extra 为空，是否使用了 key？

> ID：13557405
> 
> 赞同：3
> 
> 时间：2012-11-26T01:11:53.477
> 
> 标签：mysql

`EXPLAIN`在没有索引的情况下运行此查询

```
EXPLAIN SELECT exec_date,
    100 * SUM(CASE WHEN cached = 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_no,
    100 * SUM(CASE WHEN cached != 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_yes
FROM requests
GROUP BY exec_date 
```

这是输出

```
id  select_type table       type    possible_keys   key     key_len ref     rows    Extra
1   SIMPLE      requests    ALL     NULL            NULL    NULL    NULL    478619  Using temporary; Using filesort 
```

如果我创建一个索引

```
ALTER TABLE requests ADD INDEX exec_date(exec_date); 
```

输出是

```
id  select_type table       type    possible_keys   key         key_len ref     rows    Extra
1   SIMPLE      requests    index   NULL            exec_date   4       NULL    497847 
```

由于 的值为`Extra`空白，这是否意味着`exec_date`未使用密钥？

在测试服务器上，有和没有索引的实际（不是`EXPLAIN`语句）查询的执行时间是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:47:45.990

`Using index`并不意味着你认为它意味着什么。如果它存在于`Extra`列中，则表明优化器实际上并未读取整行，它正在使用索引（专门）来查找列信息。

该键仍可能用于其他用途，例如，如果您有`WHERE`子句等，则执行查找。例如，在您的特定场景中，实际上的消失`Using temporary;`确实意味着您的索引正在被使用，因为 MySQL 不再需要将表的内容重新排列到一个新的临时表中以执行`GROUP BY`.

# c# - SynchronizationAttribute.IsReEntrant 的用途是什么

> ID：13557406
> 
> 赞同：0
> 
> 时间：2012-11-26T01:11:54.480
> 
> 标签：c#, multithreading

那里，

有谁知道 SynchronizationAttribute.IsReEntrant 的用途是什么？MSDN 文档不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:27:33.560

如果一个服务实例处理多个请求，则此属性决定是否使用队列来确保此实例的线程安全。如果设置为 true，则不使用队列，您必须处理多个并发请求并相应地同步对共享资源的访问。

# c++ - 按值返回时强制 RVO/移动构造

> ID：13557410
> 
> 赞同：4
> 
> 时间：2012-11-26T01:12:28.497
> 
> 标签：c++, c++11, rvalue-reference, move-constructor, return-value-optimization

假设我有一个带有复制构造函数和移动构造函数的对象“foo”，以及一个函数

```
foo f() {
    foo bar;
    /* do some work */
    return bar;
} 
```

该标准似乎声明编译器将尝试执行以下操作：NRVO，按右值返回 ref，按值返回，失败；以该顺序。

有什么方法可以强制编译器永远不会按值返回，因为我的复制构造函数非常昂贵？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T02:34:52.093

> 编译器会尝试做：NRVO，按右值返回 ref，按值返回，失败；以该顺序。

上面的措辞不准确，可能表明您有误解。编译器*可以*使用 NRVO（大多数会），如果不可用，它将*始终*按值返回，不同之处在于返回值的构造方式。如果您的类型具有移动构造函数，编译器**必须**使用该构造函数，并且只有在您的类型没有移动构造函数时才会使用复制构造函数。

也就是说，如果您的类型具有移动构造函数，则使用复制构造函数的编译器将不符合 C++11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:34:56.783

`foo`如果有一个有效的移动构造函数，您的代码将永远不会通过副本返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:14:30.977

您还可以使用输出参数而不是返回：

```
void f(foo& bar) { ... } 
```

但实际上所有编译器都会做*NVRO*。

# c# - 如何在 VIsual Studio 中将 TimeSpan 设置的默认值设置为 >=24 小时？

> ID：13557411
> 
> 赞同：0
> 
> 时间：2012-11-26T01:12:36.700
> 
> 标签：c#, visual-studio-2010, timespan

在 Visual Studio 设置框中，可以创建 TimeSpan 类型的设置。我正在尝试将其默认设置为 >=24 小时。令人讨厌的行为是：

`23:00:00`等于 23 小时（与 TimeSpan.Parse 相同）

`24:00:00`等于 768 小时（= 24 天）（与 TimeSpan.Parse 相同）

如果我进入`1:0:0:0`Visual Studio 将此值更改为 1.0:0:0 等于 1 小时（TimeSpan.Parse 等于 24 小时，这是我想要的）

TimeSpan 类型很好，因为它允许强制执行类型安全，并且用户能够编辑更好看的表示（尽管由于`23:00:00`/`24:00:00`行为可能更令人困惑，这对我来说有点违反直觉），但我看不出如何这样做并允许 >= 24 小时时间跨度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:27:43.880

我认为您正在查看错误的属性 -`Hours`是一天中的几个小时，而您似乎对`TotalHours`. 即您按预期提供 24 小时（1 天）的样品：

```
TimeSpan.Parse("1.00:00:00").TotalHours == 24
TimeSpan.Parse("2.01:00:00").TotalHours == 49 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:23:56.840

为什么不自己解析然后调用`TimeSpan`构造函数。日、小时、分钟、秒和毫秒存在过载。

# javascript - 高库存 | 缩放 xAxis 会导致浏览器崩溃

> ID：13557414
> 
> 赞同：0
> 
> 时间：2012-11-26T01:13:19.147
> 
> 标签：javascript, highcharts, highstock

我真的不知道该怎么办了。我正在我的网络应用程序中开发一个 highstock 图表。数据已正确加载，但一旦我在图表选项中启用 zoomType : 'x'，我开始在缩放时出现错误。

我无法正确重现错误。但是，当我尝试沿 xAxis 缩放并选择图表中显示的几乎每个点时，它运行和缩放都很好。但是当我选择一小组点时，浏览器会停止，直到 chrome 关闭。在任务管理器中，我看到内存使用量高达 1GB。我在其他浏览器中测试了它，并得到了同样的错误。我不处理 xAxis 上的事件——它只是放大和缩小。highstockData.jsp 只是一个带有许多时间戳的文件。

tldr：当我选择很多点时，一切正常。当我只选择几个点时，浏览器崩溃并且内存开始泄漏

**更新：**当我启用 rangeSelector 并单击 1m 时，它也开始建立内存。但是当我再等几分钟（最多 5 分钟）时，它会加载并且内存再次开始下降。

**Update2：** 我尝试对其进行更多调试。等了将近 5 分钟后，我在 chrome 中截取了 cpu 使用配置文件。[http://i.imgur.com/xmqhI.png](http://i.imgur.com/xmqhI.png)它说 getnonlineartimeticks 使用了近 80% 的 cpu 使用率。

**解决方案：**仅供参考。解决了。问题是

```
xAxis : {
     tickInterval : 4
  }, 
```

强制 xAxis 在一个小的 tickInterval 上导致了所有的麻烦......

这是一些代码：

```
function initHighstock() {
options = {
    chart : {
        zoomType : 'x',
        renderTo : 'highstockContainer'
    },
    plotOptions : {
        series : {
            lineWidth : 0,
            marker : {
                enabled : true,
                radius : 3
            },
        }
    },
    navigator : {
        enabled : false
    },
    yAxis : {
        min : 0,
        max : 24,
        tickInterval : 4
    },
    xAxis : {
        tickInterval : 4
    },
    tooltip : {
    shared : false,
        formatter : function() {
            return '<b>' + Highcharts.dateFormat('%A, %b %e, %Y', this.x) + '</b>' + '<br/>' + 'Time of day: '
                    + this.y;
        }
    },
    rangeSelector : {
        enabled : true
    },
    title : {
        text : 'Diary'
    },
    series : []
};

$.get('highstockData.jsp', function(data) {
    // Split the lines
    var lines = data.split(';');
    var series = {
        data : []
    };

    for ( var k = 0; k < lines.length; k++) {
        if (lines[k].length > 0) {
            var line = lines[k];
            var items = line.split(',');

            var myDate = new Date(Math.round(items[0] * 1000));
            series.data.push([ parseInt(Math.round(myDate.getTime())),     parseInt(Math.round(myDate.getHours())) ]);
            myDate = null;
        }
    }
    series.data.sort(function(x, y) {
        return x[0] - y[0];
    });

    options.series.push(series);
    // Create the chart
    var chart1 = new Highcharts.StockChart(options);
    chart1.redraw();

});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:41:06.530

解决方案：仅供参考。解决了。问题是：

```
xAxis : {
 tickInterval : 4
 }, 
```

将 xAxis 强制设置在一个小的 tickInterval 上会导致所有麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T14:36:27.173

请使用最新版本的 Highchart。通常这种问题是由于紧凑（缩小）的 js 文件而出现的。使用 highstock.src.js 文件而不是 highstock.js

# javascript - HTML5 JS fillRect() 奇怪的行为

> ID：13557429
> 
> 赞同：2
> 
> 时间：2012-11-26T01:15:14.430
> 
> 标签：javascript, html, html5-canvas

我在使用 fillrect(x, y, width, height) 时遇到了两个奇怪的问题。

1.  将“高度”的值乘以 2

2.  X 和 y 应该设置为鼠标位置，但矩形远离左下角，并且随着鼠标移动到左下角而变得更远。

这段代码来自一个视频教程，代码似乎适用于这个人和视频，以及其他所有人，因为没有人评论有同样的问题。无论如何，这里是代码：

```
function doFirst(){
    canv = document.getElementById('canvas');
    canvas = canv.getContext('2d');

    document.addEventListener("mousemove", onMouseMove, false);
}

function onMouseMove(e){
    canvas.clearRect(0, 0, canv.width, canv.height);
    var x = e.clientX;
    var y = e.clientY;
    canvas.fillRect(x, y, 50, 50);
}

window.addEventListener("load", doFirst, false); 
```

我想也许我错过了教程中的一步，在一遍又一遍地检查之后，我决定将它简化为只绘制一个没有鼠标侦听器的矩形，但画布仍然以 2 倍的高度和大约 2 倍的 y 位置绘制它。

```
function doFirst(){
    canv = document.getElementById('canvas');
    canvas = canv.getContext('2d');

    canvas.fillRect(10, 10, 50, 50);
}

window.addEventListener("load", doFirst, false); 
```

就在前几天我第一次开始使用 HTML5 画布时，fillRect 函数运行良好，那么发生了什么？我是怎么打破它的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T01:33:44.370

我相信这是因为您尝试使用 CSS 设置画布的宽度和高度：

```
<!--Sets size of the canvas on the page-->
<canvas id="canvas" style="width:500px; height:500px;"></canvas> 
```

相反，使用这个：

```
<!--Sets drawing surface size-->
<canvas id="canvas" width="500" height="500"></canvas> 
```

“width”和“height”属性表示绘图表面的大小，默认为300x150。设置画布的 CSS 宽度和高度会扩大或缩小绘图表面，但不会改变表面的像素数。`fillRect`在“绘图表面”像素中获取坐标，而不是“HTML 页面像素”。

# python - 在pygame中闪烁文本和精灵

> ID：13557433
> 
> 赞同：0
> 
> 时间：2012-11-26T01:15:48.237
> 
> 标签：python, pygame

我回来了……在我花了很多时间研究我的游戏之后，我遇到了 2 个问题。它们都与显示精灵和文本有关。第一个是闪烁的文本。我敢打赌，你们中的许多人都发生过这种情况，但是通过谷歌搜索，我找不到导致它的直接答案。如果有人可以向我解释为什么我的文字在我将它粘贴到屏幕上时会闪烁，我将不胜感激。

我的下一个问题与我的第一个问题几乎相同，只是它涉及一个精灵。我在游戏中添加了一些代码，告诉 python 在按下空格键时从我的玩家精灵中发射子弹。当我运行它时，我没有收到任何错误，我的项目符号显示在我的屏幕上，然后立即消失。我猜这两个错误是直接相关的，但我不确定是什么原因造成的。

任何比我更了解 pygame 的人，请您向我解释造成这种情况的原因，以便我确定解决问题的方法。

这是我的掩体（玩家）和子弹类：

```
class Bunker(pygame.sprite.Sprite):
def __init__(self):
     pygame.sprite.Sprite.__init__(self)
     bunker = pygame.image.load(bunk).convert_alpha()
     self.image = bunker
     self.rect = self.image.get_rect()
     bunker_x = 160
     bunker_y = 0
     self.firecountdown = 0
def update(self, milli):
     self.pos = self.rect
     if (self.firecountdown > 0):
          self.firecountdown -= milli      
def collide(self, EnemyTank):
     return pygame.sprite.collide_rect(self.rect, EnemyTank.rect)
def fire(self, bullet):
     if (self.firecountdown <=0):
          bullet.x = 165
          bullet.y = 0
          bullet.fired = True
          bullet.speed = 100
          self.firecountdown = 500

class Bullet(pygame.sprite.Sprite):
     def __init__(self):
          pygame.sprite.Sprite.__init__(self)
          bullet = pygame.image.load(bull).convert_alpha()
          self.image = bullet
          self.rect = self.image.get_rect()
          self.x = 0
          self.y = 0
          self.speed = 0
          self.forwardx = 1
          self.forwardy = 0
          self.fired = False
     def update(self):
          self.pos = self.rect
          self.x += self.forwardx * self.speed
          self.y += self.forwardy * self.speed
          if self.x > 640:
               self.fired = False 
```

和我的主循环的一部分：

```
font = pygame.font.SysFont('Courier', 76)
     text = font.render('Game Over', True, (0,0,0))

     if e_tank_x>640:
         screen.blit(text, (100,100))

     if bullet.fired == True:
          screen.blit(bullet.image, (bullet.x, bullet.y)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:20:50.957

为避免闪烁，请确保每帧只调用一次 pygame.display.update 或 pygram.display.flip。该调用通常在主循环结束时就在 clock.tick(fps) 调用之前进行。

例子：

```
# main loop
while true:
    for event in pygame.event.get():
        # process events and update game state

    # Draw current game state

    # Update display
    pygame.display.flip()

    # Keep running at FPS frames/second
    clock.tick(FPS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:29:26.803

我看到了 Bullet 的问题，当你发射它时，你将它设置为 true。然后，在制作子弹后将其设置为 false。问题是，看起来你只在火是真实的时候才画子弹。这意味着您将子弹绘制一帧，然后设置 fire false 并停止绘制它

# logging - 用于事件关联的矢量时钟比较

> ID：13557435
> 
> 赞同：4
> 
> 时间：2012-11-26T01:16:11.643
> 
> 标签：logging, event-log, distributed-system, vector-clock

我有一堆日志文件，其中包含事件日志及其中记录的矢量时钟。现在在比较任意两个事件的矢量时钟时，对矢量时钟的每个分量的平方和求根并用结果与另一个比较，然后得出结论是否正确较小的值先于另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:46:33.707

不，如果有办法将它减少到一个值，我们将使用它而不是向量！

要比较矢量时钟，您需要逐段比较整个矢量。

```
class VectorClock {
    private long[] clocks;
    ...
    /**
     * This is before other iff both conditions are met:
     * - each process's clock is less-than-or-equal-to its own clock in other; and
     * - there is at least one process's clock which is strictly less-than its
     *   own clock in other
     */
    public boolean isBefore(VectorClock other) {
        boolean isBefore = false;
        for (int i = 0; i < clocks.length; i++) {
            int cmp = Long.compare(clocks[i], other.clocks[i]);
            if (cmp > 0)
              return false; // note, could return false even if isBefore is true
            else if (cmp < 0)
              isBefore = true;
        }
        return isBefore;
    }
} 
```

您可以只使用最小值和最大值进行不太准确的传递：

```
class VectorClockSummary {
    private long min, max;
    ...
    public tribool isBefore(VectorClockSummary other) {
        if (max < other.min)
            return true;
        else if (min > other.max)
            return false;
        else
            return maybe;
    }
} 
```

# jquery - 多次调用 $.fn.customTabs 中的变量

> ID：13557437
> 
> 赞同：-1
> 
> 时间：2012-11-26T01:16:26.000
> 
> 标签：jquery, html

好的，所以我在 jQuery 中创建了一个名为的函数，`$.fn.customTabs`并将其中的变量设置为 DOM 中的某些元素。当我第二次调用它时，变量被设置为不同的 DOM 元素并影响我对函数的第一次调用。

**知道如何在每个函数调用中使用某些实例变量吗？**

编辑

```
$.fn.customTabs = function(data,user_options) {
    $this = $(this);
    alert($this.attr('id'));
    var options = 
        {
            speed : 750,
            startIndex : 0,
            duration : 10000,
            height : "300px"
        },
        final_options = {
            "width" : "100% - 5px",
            "position" : "relative",
            "margin" : "0",
            "padding" : "5px"
        };
    $.extend(options,user_options);
    var tabPadding = parseInt(final_options.padding,10);
    var cssTabHeight = parseInt(options.height,10) - tabPadding + "px";
    $this.css(final_options);
    var num = data.length - 1;
    if(data) {
        $container = $('<ul class=\"tabsContainer\">').css({
            height : options.height,
            position : "relative",
            "list-style" : "none",
            padding : "0",
            margin : "0"
        });
        for(var count = 0; count <= num; count++) {
            $object = data[count];

            $tab = $('<li id=\"tab_' + count + '\" class=\"tab\">').css({
                height : cssTabHeight
            });

            if($object.element) {
                $object.element.css({
                    margin : "0",
                    padding : $object.element.css('padding') || "0"
                });
                if($object.element.is('a')) {
                    $tab.css({
                        "text-align" : "center" 
                    });
                    $object.element.find('img').css({
                        "max-height" : "100%",
                        "max-width" : "100%"
                    });
                } else if($object.element.is('img')) {
                    $tab.css({
                        "text-align" : "center" 
                    });
                    $object.element.css({
                        "max-height" : "100%",
                        "max-width" : "100%"
                    });
                } else {
                    $object.element.css({
                        width : "100% - " + tabPadding,
                        height : "100%"
                    });
                }
                $object.element.appendTo($tab);
            } else {

            }

            $container.append($tab);
        }
        $tabWrapper = $('<div>').html($container).css({
            overflow: "hidden"
        });
        $this.html($tabWrapper);
    } else {

    }

    var tabIndex = options.startIndex,
        x,
        tabHeight = parseInt(cssTabHeight,10) + tabPadding;

    var interval = setInterval(function() {
        makeInterval();
    },options.duration);

    $('.tabMenuButton').click(function() {
        clearInterval(interval);
        var element = this;
        var index;
        $('.tabMenuButton').each(function(i, ele) {
            if(ele == element) {
                index = i;
            }
        });
        var diffrence = index - tabIndex;
        if(diffrence < 0) {
            x = "-=" + (tabHeight*parseInt(diffrence,10));
            changeTab(x);
        } else if(diffrence > 0) {
            x = "-=" + (tabHeight*diffrence);
            changeTab(x);
        }

        tabIndex = index;
        interval = setInterval(function() {
            makeInterval();
        },options.duration);
    });

    var makeInterval = function() {
        if(tabIndex != num) {
            tabIndex++;
            x = "-=" + tabHeight;
        } else {
            tabIndex = 0;
            x = "+=" + (tabHeight*num);
        }

        changeTab(x);
    }

    var changeTab = function(distance) {
        $container.animate({
            "top" : distance + "px"
        }, options.speed);
    }

    return $this;
} 
```

在第二次调用此函数后，将`$container`设置为在第二次调用中为两个间隔创建的元素。

顺便说一句，当同一页面上有两个代码时，这段代码的工作就会变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:00:44.073

> (...) 当我第二次调用它时，变量被设置为不同的 DOM 元素并影响我对函数的第一次调用。知道如何在每个函数调用中使用某些实例变量吗？

您面临的问题是**在应该使用本地变量的地方使用全局变量**。因此，执行 jQuery 函数的所有元素**共享相同的变量**。

这些变量是：

*   `$this`,
*   `$container`,
*   `$object`,
*   `$tab`,
*   `$tabWrapper`,
*   可能还有其他。

所以看起来你正在处理名称以开头的普通变量，就`$`好像它们是特殊的，自动本地的。**它们不是本地的**：您只是在其名称的开头创建带有 dolar 符号的全局变量。

有两种解决方案适合您：

*   在您第一次定义它的地方添加`var`关键字，甚至将所有变量放在适当函数的开头，`var`在它们前面加上关键字，或者
*   遵循 JSLint 等代码质量工具的指南：http: [//www.jslint.com/](http://www.jslint.com/)，

记住：你的 jQuery 函数必须在元素之间独立工作，所以**你不能使用全局变量**。相反，如果您需要在调用之间或出于某种原因在代码中以某种方式存储数据，请使用以下两个选项之一：

*   使用闭包（在外部范围内存储变量，但在 jQuery 函数的范围内），
*   使用 jQuery[`.data()`](http://api.jquery.com/data/)将数据附加到特定元素（使用您自己的函数特定命名，以免干扰脚本用户使用的其他函数和/或插件），

# java - 使用 Java 和 RXTX 检测 USB CDC 设备连接/断开连接

> ID：13557439
> 
> 赞同：0
> 
> 时间：2012-11-26T01:16:32.200
> 
> 标签：java, serial-port, usb, rxtx, cdc

我有一个应用程序可以在有或没有连接到机器的 USB CDC 设备的情况下运行。该设备被编程为以特定答案回答问题，因此我可以检测连接到哪个串行端口。问题是，我需要知道何时执行此检查。我不想创建一个线程来一遍又一遍地运行这个检查，所以我需要知道如何监听“设备连接”事件。我以前搜索过它，但也许我只是没有使用正确的关键词，所以任何帮助都会非常好。

Obs：我正在使用 Java 1.7 和 RXTX 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:41:32.640

I have the same problem and AFAIK there is no way to do this in a platform independent way. On linux one might do it as described [here](https://stackoverflow.com/questions/7115731/linux-usb-connect-disconnect-event).

Anyway, in case your device is a USB/Serial converter, you will only get an event when the converter is (un)plugged, not when a device is attached to the converter itself.

# java - JAX-RS 中的 Provider 是什么意思？

> ID：13557442
> 
> 赞同：127
> 
> 时间：2012-11-26T01:17:55.910
> 
> 标签：java, jersey, jax-rs

谁能向我解释一下 JAX-RS Provider 是什么以及“@Provider”注释的作用是什么？我一直在阅读文档，但我无法得到它。
如果有资源类为传入的请求提供服务，那么 Providers 会做什么？当我创建一个持久资源类（不是每个请求的资源类）时，它们与单例资源类有何不同？或者这些课程也是提供者？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-11-26T01:41:47.100

提供者是一种扩展和定制 JAX-RS 运行时的简单方法。您可以将它们视为（可能）改变运行时行为的插件，以实现一组（程序定义的）目标。

提供者***与***资源类不同，它们在概念上存在于资源类和 JAX-RS 实现之间的级别。如果有帮助，您可以将它们视为设备驱动程序（存在于用户和内核空间之间）。这是一个广泛的概括。

当前的 JAX-RS 规范定义了三类提供程序。它们之间的共同点是所有提供者都必须由@Provider 注解标识，并遵循一定的构造函数声明规则。除此之外，不同的提供者类型可能有额外的注解，并且会实现不同的接口。

* * *

**实体提供者**

这些提供程序控制数据表示（如 XML、JSON、CSV）与其 Java 对象等价物的映射。

**上下文提供者**

这些提供者控制资源可以通过 @Context 注释访问的上下文。

**异常提供者**

这些提供程序控制 Java 异常到 JAX-RS 响应实例的映射。

* * *

您的运行时将附带许多预定义的提供程序，它们将负责实现基本级别的功能（例如，用于与 XML 之间的映射、转换最常见的异常等）。您还可以根据需要创建自己的提供程序。

[JAX-RS 规范](http://download.oracle.com/otn-pub/jcp/jaxrs-1.0-fr-eval-oth-JSpec/jaxrs-1.0-final-spec.pdf)是阅读这些不同的提供者类型及其作用的一个很好的参考（参见第 4 章）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-13T12:53:43.420

@Provider注释用于**JAX-RS 运行时感兴趣的任何****内容**，例如**MessageBodyReader**和**MessageBodyWriter**。对于 HTTP 请求，MessageBodyReader 用于将 HTTP 请求实体主体映射到方法参数。在响应端，使用 MessageBodyWriter 将返回值映射到 HTTP 响应实体主体。如果应用程序需要提供额外的元数据，例如 HTTP 标头或不同的状态代码，则方法可以返回包装实体的 Response，并且可以使用 Response 构建。**响应生成器**。

 ********@Provider**注解使您能够在原始 XML 级别检查传入和传出消息，这样 Provider 就相当于客户端上的 Dispatch。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-03-25T16:01:33.630

为了执行某些活动，例如过滤请求/响应、异常处理，JAX-RS 有自己的默认实现逻辑。但是，它也允许用户提供他们自己的实现。

为了提供我们自己的实现，我们需要通过使用@Provider 注解指定适当的类来实现它们。

JAX-RS 将进行一轮扫描，通过搜索@Provider 注释来查找任何此类用户定义实现的存在。

例如：

```
...
@Provider
public class AppExceptionMapper implements ExceptionMapper<Throwable> {
...

...
@Provider
@PreMatching
public class RESTRequestResponseFilter implements ContainerRequestFilter, ContainerResponseFilter {
... 
```******

# regex - 用于匹配 perl BLOCK 的 Perl 正则表达式

> ID：13557444
> 
> 赞同：0
> 
> 时间：2012-11-26T01:18:14.613
> 
> 标签：regex, perl, parsing, pattern-matching

鉴于块不相互嵌套或自身嵌套，我如何在以下语句中匹配多行块：

```
 if (EXPR) BLOCK
       if (EXPR) BLOCK else BLOCK
       if (EXPR) BLOCK elsif (EXPR) BLOCK ... else BLOCK
       unless (EXPR) BLOCK
       unless (EXPR) BLOCK else BLOCK
       unless (EXPR) BLOCK elsif (EXPR) BLOCK ... else BLOCK
       LABEL while (EXPR) BLOCK
       LABEL while (EXPR) BLOCK continue BLOCK
       LABEL until (EXPR) BLOCK
       LABEL until (EXPR) BLOCK continue BLOCK
       LABEL for (EXPR; EXPR; EXPR) BLOCK
       LABEL foreach VAR (LIST) BLOCK
       LABEL foreach VAR (LIST) BLOCK continue BLOCK
       LABEL BLOCK continue BLOCK 
```

如果这不能用正则表达式完成，是否有状态机能够这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T01:22:14.420

不要尝试自己解析 perl。如果您确实需要，请使用[PPI](http://p3rl.org/PPI)，它做得不错。

```
use PPI;
my $source = 'LABEL: { print "block" } continue { print "cont block" }';
my $doc = PPI::Document->new(\$source);
my $blocks = $doc->find("PPI::Structure::Block");
print ":$_:\n" for @$blocks; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:24:08.760

这根本做不到。一般来说，如果你想解析任意 Perl 代码，你也需要能够执行 Perl，因为`use`它`BEGIN`在解析时运行并且会影响其余代码的解析方式。

例子：

```
use Some::Module;
foo / 1;
is_this_code();
#/; 
```

如何解析这取决于如何`foo`声明。如果它是一个普通函数，则使用 regex 的结果调用它`/ 1;\nis_this_code();\n#/`。如果用 的原型声明`()`，代码会将 的返回值`foo`除以 1，然后调用`is_this_code()`。

# jsp - 导航栏中的 twitter 引导程序和个人资料/头像图像

> ID：13557446
> 
> 赞同：3
> 
> 时间：2012-11-26T01:18:50.080
> 
> 标签：jsp, twitter-bootstrap, jstl

我正在使用 Twitter Bootstrap，我试图让用户的个人资料图片出现在导航栏中的用户名旁边。

这是我的代码。但是发生的事情是图片最终与屏幕顶部齐平。我不知道twitter bootstrap css是否有办法让它居中。任何建议将不胜感激。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#">Codename: Success</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Nav header</li>
                            <li><a href="#">Separated link</a></li>
                            <li><a href="#">One more separated link</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <c:choose>
                <c:when test="${not empty pageContext.request.userPrincipal.name}">
                    <div id="userHeaderProfile" class="navbar-text pull-right">
                        <p>${pageContext.request.userPrincipal.name}</p>
                    </div>
                    <div class="pull-right"><img src="http://placehold.it/30x30" alt="30x30" /></div>
                </c:when>
                <c:otherwise>
                    <form method="post" class="navbar-form pull-right" action="<c:url value='/j_spring_security_check'/>">
                        <input id="username" name="j_username" class="span2" type="text" placeholder="Email">
                        <input id="password" name="j_password" class="span2" type="password" placeholder="Password">
                        <button type="submit" class="btn">Sign in</button>
                    </form>
                </c:otherwise>
            </c:choose>
            <!--/.nav-collapse -->
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T03:39:25.893

这是我可以为导航栏中的用户名位置做的事情

HTML

```
<div class="pull-right navbar-text">
  <img src="http://placehold.it/30x30">
  Chuck Norris
</div> 
```

CSS

```
.navbar-文本 img {
  最大高度：30px；
  宽度：自动；
  垂直对齐：中间；
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T08:27:42.000

如果您使用较少，只需执行此操作

```
@navbar-img: @navbar-height - 2* @navbar-padding-vertical;  

.navbar img {   max-height: @navbar-img; } 
```

而且，您甚至可以将图像作为带有文本和图像的链接放在菜单项中

```
li
   a.navbar-text(href='action') 
     | 
     img(src='<avatar url>') 
```

# php - PHP多实例单日志文件

> ID：13557450
> 
> 赞同：4
> 
> 时间：2012-11-26T01:19:13.430
> 
> 标签：php, concurrency, instance

我对 PHP 有点陌生，所以我想知道您是否可以向我解释一下。

我正在尝试编写一个将附加到日志文件的类。我编写了这个类，以便资源本身在 Logger 类中是静态的。这在我测试时对我很有用，因为我可以让多个类实例化一个 Logger 对象，但所有类都将共享相同的静态资源来写入文件。

也就是说，我现在面临多个 PHP 实例（多个用户加载我的页面）的问题，更具体地说：并发性。

问题：

1.  当我的站点遇到使用记录器的并发 php 实例时，他们会为访问该文件而战吗？

2.  我在 UBUNTU，但这会对 Windows 产生影响吗？

3.  在我的记录器文件中，我检查每添加 X 行以查看文件的大小，如果大小大于 Y，我关闭此文件并“旋转”文件（mylog.log2 变为 mylog.log3， mylog.log1 变为 mylog.log2 ， mylog.log 变为 mylog.log1) 并创建一个全新的 mylog.log 文件。如果多个实例正在写入它，这会引起关注吗？如果是这样，如何正确处理？

对不起，新手的问题......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T01:23:28.507

只要您的记录器以*附加*模式（例如`fopen("my.log", "a")`或类似模式）打开文件，每个人都应该能够在不丢失数据的情况下写入文件（操作系统将负责确保添加所有内容而不会覆盖）。但是，不能保证跨实例写入文件的*顺序- 例如，您可能会得到散布的日志条目。*

例如，如果实例 A以该顺序写入 lines , , 而实例 B 写入 lines `a`, `b`, and ，您可能会得到以下结果：`c``1``2``3`

```
1
a
b
2
c
3 
```

或任何其他交错。

# audio - 关于如何解码数据包的线索，建议

> ID：13557455
> 
> 赞同：0
> 
> 时间：2012-11-26T01:19:42.777
> 
> 标签：audio, udp, protocols, reverse-engineering, network-protocols

去年我收到了一个礼物，它是一个索尼 CMT700Ni 音频站，支持 wifi。它还具有类似于广播的功能，称为“PartyStreaming”。我目前正在挖掘内部，探索它，所以也许我可以结束拥有自己的“PartyStreaming”设备并免费拥有类似 AirPlay 的功能（挑战也很有趣）

PartyStreaming 是一个非常容易理解的基于 SOAP 的服务。有 4 个主要功能分为 2 组：服务器端和客户端。每组中的 2 个函数代表开始与另一方的连接或结束它（服务器的开始/停止，客户端的加入/离开）

实际上我已经走了很远，因为我现在能够访问服务器 - 音频站 - 在网络上传播的音频数据。似乎，在使用soap方法加入服务器后，客户端必须在端口3975上向服务器发送一个UDP数据包。收到后，服务器通过在同一端口上向客户端发送数据包来回复，持续30秒。

在看了大约一百个之后，我发现一个典型的数据包是 1024 字节长，其中有一个 64 字节的标头，一个 64 字节的 0 填充，然后是一个 896 字节的声音数据。

我现在有了数据，但它看起来像是一堆随机写入的字节。没有编解码器信息，没有结构，没有“块格式”（就像在波形文件中一样）。我找不到任何关于协议或任何“PartyStreaming”相关技术资料的好文档。

我的问题是：**“嘿 StackOverflow，有什么建议吗？有什么线索吗？我应该放弃还是你有一个我可以测试的想法？”**

* * *

可能有用的东西：

*   关于主题的注释：http: [//pastebin.com/pp8aRQrR](http://pastebin.com/pp8aRQrR)

*   没有标头的数据包转储：http: [//cl.ly/430H2i001K3R](http://cl.ly/430H2i001K3R)

*   转储带有标头和一些格式的数据包以读取它们：[http ://cl.ly/2i2F2c3E3W3C](http://cl.ly/2i2F2c3E3W3C)

* * *

我现在要测试的东西：

*   作为客户端捕获 UDP 数据包，然后启动服务器并将该数据发送到我的音频站，看看它是否可以读取它；也许有服务器端加密，如果是这样，我就卡住了

*   建立一个 1kHz 的文件，并在音频站上播放；捕获数据包并观察其字节，也许与用许多编解码器编码的相同文件进行比较以找到模式......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:11:00.383

由于您的比特率很高，因此数据可能未压缩。如果是这种情况，您的数据字节并不是真正随机的 - 至少它们不是均匀分布的。

尝试以不同的分辨率（8 位、16 位，也许介于两者之间）重建样本（即读取有符号整数）。在许多数据包上执行此操作，计算并显示直方图（对于 8 位：计算有多少 -128，有多少 -126 ... 有多少 127）。

您应该为每个可能的值收集至少 100 个样本（例如 8 位：12,800 个样本）以获得良好的统计数据。然后查看您的直方图。如果它是平坦的并且所有值的出现次数大致相同，则它被压缩/加密，或者您为每个样本选择了错误的位。如果某些值的出现次数明显多于或少于其他值：宾果游戏是未压缩的声音样本！

如果每个样本的所有位都得到平坦的直方图，那就更难了。您可以尝试将 100kb 的数据转储到文件中并通过 linux/unix`file`命令运行它，看看它是否识别格式。它可能会识别压缩。然后您必须解压缩并使用未压缩的流重复整个过程：分析直方图并运行`file`.

还可以尝试通过 vlc、mplayer、ffplay 运行它，它们利用丰富的库（如 ffmpeg）并可能识别流或在调试输出中为您提供有用的消息。

无论如何，如果它被加密了，你就完蛋了……或者至少我怀疑付出的努力是否值得；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:36:02.710

你可能不得不猜测一种格式。首先，看看比特率。你每秒得到多少字节？这将帮助您计算它可能是 PCM 还是压缩格式。

您应该能够很容易地排除 PCM。将一堆音频包放入具有不同标题（例如 44.1kHz/32kHz、16kHz、16 位/8 位、单声道/立体声）的 WAV 文件中，看看您是否听到任何与您的音乐相似的声音。

如果这不起作用，您将需要猜测压缩格式。MP3 可能值得一试（您可以通过查看每个数据包中的前四个字节是否是[帧头](http://www.mp3-tech.org/programmer/frame_header.html)来识别它）。

您可能会发现它支持多种格式，因为文档似乎建议您可以从 Windows Media player 播放它。因此，您可以查看 64 字节的标头，看看当您向其发送以不同格式编码的文件时会发生什么变化。

# ruby-on-rails - ++值或值++在rails（红宝石）

> ID：13557456
> 
> 赞同：2
> 
> 时间：2012-11-26T01:19:56.943
> 
> 标签：ruby-on-rails, operators

ruby on rails 是否与 ++value 等效。

在 c 中有一个 ++x 和一个 x++

它们不是同一个操作（严格来说）.. rails 有什么相似的吗

```
c++ code
int x = 0;
if(x++) cout << "value is not zero when compared"
else    cout << "value still zero when compared"
//prints   "value still zero when compared"

x = 0;
if(++x) cout << "value is not zero when compared"
else   cout << "value is still zero when compared"
//prints "value is not zero when compared" 
```

++x 是一个更快的操作（小但更快），但这不是我想要它的原因。我想在同一行打印并添加一个值。但我想在添加之前打印出值。

红宝石代码

```
#print out the count of products processed, the current id, and the current name
p "#{recCount++}:#{product.id} #{product.name}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:21:52.790

不，它没有，但它有`+= 1`。

# sitecore - 如何查看 sitecore 6 中的所有归档项目

> ID：13557458
> 
> 赞同：2
> 
> 时间：2012-11-26T01:21:05.307
> 
> 标签：sitecore, sitecore6

我正在使用 Sitecore 6.5。我有 2 个用户具有完全相同的角色，比如用户 A 和用户 B。

当我使用用户 A 归档项目时，我可以在用户 A 归档管理器中看到已归档项目，但在用户 B 中看不到。

如何授予用户访问权限，以便他们可以查看所有用户的所有存档项目，而无需将其设置为管理员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:49:25.637

归档应用程序正在使用该`Sitecore.Data.Archiving.SqlArchive.GetEntries`方法从数据库中检索归档项目，并按当前用户（使用该`ArchivedBy`字段）过滤项目，除非当前用户是管理员。

因此，为了让每个人都能看到每个归档项目，您必须创建自己的`GetEntries(User user, int pageIndex, int pageSize, ID archivalId)`方法实现。最简单的方法可能是创建一个新的 Advanced System Reporter 报告，然后覆盖该`SqlArchive.GetEntries`方法并以用户身份传入，`null`因为这与管理员具有相同的效果。

# c - 调用信号处理程序但仍然忽略信号（Posix，C）

> ID：13557461
> 
> 赞同：0
> 
> 时间：2012-11-26T01:21:20.003
> 
> 标签：c, asynchronous, posix, interrupt

我想捕获一个信号，设置一个全局说明信号被捕获，然后返回我的主循环后记。这是我的代码。

```
int main(int mainargc, char **mainargv)
{
.
.
.
    sig_handler.sa_handler = sigint_handler;
    sigemptyset(&sig_handler.sa_mask);
    sig_handler.sa_flags = 0;
    sigaction(SIGINT, &sig_handler, NULL);
.
.
. 
    while(1)
    {
    //main loop
    }
}

void sigint_handler(int signal)
{
    int saved_error = errno;

    g_sigint_happened = 1;

    //TODO -- send sigint to children

    errno = saved_error;

} 
```

我的问题是我的信号处理程序被调用但我的程序仍在终止。我不确定如何告诉信号处理程序返回 main。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:35:20.553

在调用信号处理程序后，您无需执行任何特殊操作即可恢复执行。

您的问题可能是信号中断了一些阻塞系统调用`main`，这将导致它返回`errno`设置为的错误`EINTR`。如果您没有专门检查并重新启动系统调用，那么它可能只是经历了一个导致您的进程退出的一般错误情况。

# php - 调用查询数据库的 php 函数不能使用 $con 资源。

> ID：13557467
> 
> 赞同：0
> 
> 时间：2012-11-26T01:22:21.580
> 
> 标签：php

当我在我的 php 页面中调用它而不用函数和名称包围它时，这个查询工作正常

```
//MAKE DATABASE CALL TO GET PRODUCT 
$product_id = $line_value['productId'];
$product_query = "SELECT * 
                  FROM products
                  WHERE id = '$product_id'
                  LIMIT 1";
$product_result = pg_query($con, $product_query);
while ($product_row = pg_fetch_assoc($product_result)){
    $product = $product_row['product'];
}
//works
echo $product; 
```

但是当我尝试将它放在函数中时出现错误

`$product = _get_product($product_row['product']);`
`echo $product'`

```
function _get_product($product_id){

//prints 1
echo $product_id
    //MAKE DATABASE CALL TO GET PRODUCT 
    $product_id = $line_value['productId'];
    $product_query = "SELECT * 
                      FROM products
                      WHERE id = '$product_id'
                      LIMIT 1";
    $product_result = pg_query($con, $product_query);
    while ($product_row = pg_fetch_assoc($product_result)){
        $product = $product_row['product'];
    }

return $product;

} 
```

> 警告：pg_query() 期望参数 1 是资源，在第 263 行的 /home/www.site.com/file.php 中给出 null

我认为该函数可能无法访问页面顶部包含的 db 连接文件，但是当我将其放入函数中时，出现此错误

> 警告：pg_query() [function.pg-query]：查询失败：错误：整数输入语法无效：“”第 3 行：/home/www.site.com/file.php 中的 WHERE id = '' ^ 在线265

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:25:13.953

您需要`$con`在函数内注册为全局变量（因此它是导入的，而不是在本地声明的新变量）。

把它变成这样：

```
function _get_product($product_id) {
    global $con; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:27:05.377

问题是[可变范围](http://php.net/manual/en/language.variables.scope.php)。该函数的范围不包括在它之外声明的变量。不要使用全局变量，而是通过将 $con 作为参数传递来允许函数访问：

```
function _get_product($product_id, $con){ 
```

并使用它来调用它：

```
 _get_product($line_value['productId'], $con); 
```

# c++ - 基于向量的二叉树遍历

> ID：13557469
> 
> 赞同：2
> 
> 时间：2012-11-26T01:23:14.263
> 
> 标签：c++, vector, binary-tree, traversal, preorder

我有一个基于向量的二叉树，需要使用各种遍历方法对树中的每个值应用一个函数。使用递归函数很容易实现前序遍历，但我在使用中序遍历和后序遍历时遇到了麻烦。如果有人可以帮忙，那就太好了！

我应该包括一些额外的信息：我正在使用一个节点向量，每个节点都包含一个布尔变量，说明该节点是否被填充和一个模板化的数据变量。每个节点存储在索引“i”中，而其左子节点存储在索引“2i+1”，右子节点存储在“2i+2”。

为了对列表应用前序遍历，我首先处理了存储在索引 0 处的数据，然后调用了这个递归函数

```
template <typename Item, typename Key>
template <typename Function>
void BST<Item,Key>::preTraverse(int n, Function f) {
    if(tree[n].occupied == false) return;
    else {
        f(tree[n].data);
        preTraverse(2*i+1,f);
        preTraverse(2*i+2,f);
    }
} 
```

两次以索引 1 和 2 开头作为我的“n”参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:32:12.960

预购：

```
do something with the value
f(go to the left)
f(go to the right) 
```

为了：

```
f(go to the left)
do something with the value
f(go to the right) 
```

后购：

```
f(go to the left)
f(go to the right)
do something with the value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:49:26.940

假设你的树是一个最大填充的左显性表示，那么你的数组中的任何给定点在位置`i`都会有子位置`2*i+1`和`2*i+2`。琐碎的行走：

```
Node   Children
=====  ===========
ar[0]: ar[1], ar[2]
ar[1]: ar[3], ar[4]
ar[2]: ar[5], ar[6]
ar[3]: ar[7], ar[8]
ar[4]: ar[9], ar[10] etc... 
```

给定这个定义，preorder、postorder 和 in-order 都可以通过简单的索引转发和一些检查你的 'occupied' 标志来完成。以下模板假定 type`T`是具有“占用”成员的结构类型。

```
template<typename T>
void preorder(const T ar[], size_t i, size_t count, void (&visit)(const T&))
{
    if (i>=count || !ar[i].occupied)
        return;

    visit(ar[i]);
    preorder(ar, 2*i+1, count, visit);
    preorder(ar, 2*(i+1), count, visit);
}

template<typename T>
void inorder(const T ar[], size_t i, size_t count, void (&visit)(const T&))
{
    if (i>=count || !ar[i].occupied)
        return;

    inorder(ar, 2*i+1, count, visit);
    visit(ar[i]);
    inorder(ar, 2*(i+1), count, visit);
}

template<typename T>
void postorder(const T ar[], size_t i, size_t count, void (&visit)(const T&))
{
    if (i>=count || !ar[i].occupied)
        return;

    postorder(ar, 2*i+1, count, visit);
    postorder(ar, 2*(i+1), count, visit);
    visit(ar[i]);
} 
```

# javascript - 在 yeoman 脚手架主干项目中创建新的主干视图

> ID：13557478
> 
> 赞同：1
> 
> 时间：2012-11-26T01:24:16.487
> 
> 标签：javascript, backbone.js, yeoman

`yeoman init backbone:view input`

这会生成两个文件：app/scripts/templates/input.ejs 和 app/scripts/views/input-view.js

如何从应用程序中实例化这个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:12:15.337

请尝试使用yeoman 1.0beta的最新[骨干生成器。](https://github.com/yeoman/generator-backbone)我们对其进行了很多改进，包括[预编译 ejs 模板](https://github.com/yeoman/generator-backbone/pull/20)。您不想担心模板，yeoman 会为您预编译它。

您可以根据需要实例化 InputView，只需使用模板方法即可使用 ejs。下面提供了一个示例代码。

```
Todo.Views.InputView = Backbone.View.extend({

    template: JST['app/scripts/templates/input.ejs'],

    render: function(){
       $(this.el).html(this.template());
    }

}); 
```

# html - 居中的 DIV（正好 900 像素），每边的 div（不透明度）填满页面的其余部分

> ID：13557482
> 
> 赞同：2
> 
> 时间：2012-11-26T01:24:39.510
> 
> 标签：html, css

我有一个居中的 DIV，它正好（从不多或少）900 像素。我希望它始终居中，并让两个填充 div 填充每一侧页面的其余部分......

为（使用z-index）下的内容提供突出显示的类型效果...（即使用填充div ...显示“SPOTLIGHT”内容的每一侧都有其他内容，但它不在“SPOTLIGHT”下”。

## 下面的这段代码不起作用......但它让你感觉到我正在尝试做的事情

## CSS：

```
/* DIV I WANT TO BE CENTERED, SURROUNDED BY 50% OPACITY DIVS FILLING REST OF PAGE */
.shadercentered {
width:950px;
margin-left:auto;
margin-right:auto;
position:relative;
background-color:green;
height:73px;
float:left;
top:-28px
}

/* DIVS THAT FILL THE REST OF THE PAGE ON EACH SIDE OF 900px CENTERED DIV */
.shaderblindsleft {
background-color:black;
opacity:0.5;
width:fill;;
height:73px;
float:left;
position:relative;
top:-28px;
}
.shaderblindsright {
background-color:black;
opacity:0.5;
width:fill;;
height:73px;
float:right;
position:relative;
top:-44px;
} 
```

## HTML：

```
<div class="shaderdiv">
    <div class="shaderblindsleft">&nbsp;</div>
    <div class="shadercenter">&nbsp;</div>
    <div class="shaderblindsleft">&nbsp;</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:01:09.640

你可以通过控制shaderdiv中发生的事情来获得它，让它的孩子脱离流程，绝对位置。

你把shadercenter放在中间，把它钩在左边：50%，然后用一个负边距向左偏移它的一半大小。

对于周围，您使用约束的功能来定义宽度。对于左边的，你把它钩到left：0（因为它是左边），然后你定义它的右边是shadercenter被钩住的地方......所以它是正确的：50％。然后，添加一个为 shadercenter 一半大小的 margin-right，因此它将被限制为更小。对正确的使用相同的技术“反转”

```
<div class="shaderdiv">
    <div class="shaderblinds left">&nbsp;</div>
    <div class="shadercenter">&nbsp;</div>
    <div class="shaderblinds right">&nbsp;</div>
</div>​

.shaderdiv
{
  position: relative;
  width: 90%;
  height: 73px;
  border: 1px solid yellow; /* debug stuff */
  box-sizing: border-box; /* debug stuff */
}

.shaderdiv > div { opacity:0.5 }

.shadercenter
{
  position: absolute;
  left: 50%;
  margin-left: -125px; /* minus half size of width */
  width:250px; /* fixed width */
  height:100%;
  background:green;
}

.shaderblinds
{
  position: absolute;
  height: 100%;
}

.left
{
  left: 0;
  right:50%;
  margin-right: 125px; /* half size of width */
  background:red;
}

.right
{
  right: 0;
  left: 50%;
  margin-left: 125px; /* half size of width */
  background:blue;   
}​ 
```

这里的例子：http: [//jsfiddle.net/5kDjw/2/](http://jsfiddle.net/5kDjw/2/)

您可以使用 shaderdiv 的大小来查看它是完全流动的，shadercenter 始终是固定宽度，始终居中，没有重叠

# c# - MVC 3：显示/隐藏通过 ajax 加载表单元素的逻辑

> ID：13557483
> 
> 赞同：0
> 
> 时间：2012-11-26T01:24:42.497
> 
> 标签：c#, .net, asp.net-mvc-3, jquery, asp.net-ajax

我目前正在使用 mvc 3 和 c# 设计一个 Web 应用程序。我必须做以下场景，并试图确定平台的正确实现。在这里，我必须根据下拉列表的选择来显示/隐藏几个表单元素（文本框），这也应该是表单的一部分。在 mvc 3 平台下实现这一点的最佳方法是什么。我遇到的一个主要问题是，所有应该出现的元素也应该是必需的，而其他元素不应该是必需的。我更喜欢使用 DataAnnotation 验证。我是否应该首先渲染所有表单元素并使用 javascript 根据下拉选择来确定要显示/隐藏哪些元素？这里的问题似乎是如何在保持验证逻辑的同时改变所需的逻辑，以确保如果在任何字段中输入任何内容，它就会被验证？另一方面，为每个需要的表单创建一个局部视图并根据下拉选择显示/隐藏局部视图似乎有点矫枉过正，更不用说由于圆形滴漏而效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:20:11.817

也许你可以在前端使用 jQuery 做到这一点。例如

```
<select name="source" id="source">
  <option value="null" selected="selected">&mdash;Select&mdash;</option>
  <option value="o1">Option 1</option>
  <option value="o2">Option 2</option>
  <option value="o3">Option 3</option>
</select>

<div id="content"> some content to show/hide </div> 
```

以及相应的jquery：

```
$('#source').change(function() {
    ($(this).val() == "o3") ? $('#content').show() : $('#content').hide();
}); 
```

所以基本上当有些人选择选项 3 时，会显示 div 内容。我不确定您为什么需要使用 ajax，但是一旦提交数据，您就可以在服务器端验证值。

使用 Mvc.ValidationToolkit 查看条件验证也可能有益：

*   [http://andrewtwest.com/2011/01/10/conditional-validation-with-data-annotations-in-asp-net-mvc/](http://andrewtwest.com/2011/01/10/conditional-validation-with-data-annotations-in-asp-net-mvc/)
*   [http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtokit-alpha-release-conditional-validation-with-mvc-3.aspx](http://blogs.msdn.com/b/simonince/archive/2011/09/29/mvc-validationtookit-alpha-release-conditional-validation-with-mvc-3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T06:34:26.553

看到这个：

[基于 MVC 和 Jquery 中的下拉选择隐藏或显示特定表单](https://stackoverflow.com/questions/13256587/hiding-or-showing-a-paticular-form-based-on-the-dropdown-selection-in-mvc-and-jq)

或者你也可以看到

[http://atikpassion.blogspot.com/2014/01/mvc-razor-show-hide-any-id-based-on.html](http://atikpassion.blogspot.com/2014/01/mvc-razor-show-hide-any-id-based-on.html)

# c++ - C++ FLTK 休息组件

> ID：13557487
> 
> 赞同：1
> 
> 时间：2012-11-26T01:25:17.370
> 
> 标签：c++, fltk

例如，我有 5 个选择组件

```
Fl_Choice* mySideChoice;
mySideChoice = new Fl_Choice(aX, aY, aWidth, aHeight, "Side"); 
```

这是一个多步骤过程的一部分。在流程结束时，我想重置所有组件，以便用户可以再次执行此操作。我有困难。创建widgit时，文本为空白，用户需要为其选择一些东西来调用回调。很明显，用户需要在其中单击并选择一个值。

我希望用这段代码“重置它”：

```
mySideChoice->hide();
mySideChoice->value(0); 
```

不起作用，当我再次显示widgit时只选择第一个值。

我尝试了这个凌乱的代码只是想到达某个地方：

```
Fl::delete_widget(mySideChoice);
Fl::do_widget_deletion();
Fl::check();
Fl::flush();
Sleep(1000); 
mySideChoice = new Fl_Choice(aX, aY, aWidth, aHeight, "Side");
Fl::check();
Fl::flush(); 
```

即使完全重新创建widgit也不起作用。该widgit根本不会重新出现在窗口上......

帮助！有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:50:13.083

哈！如此愚蠢

```
mySideChoice->value(-1); 
```

# objective-c - 从索引处的 NSMutableDictionary 中删除对象

> ID：13557489
> 
> 赞同：3
> 
> 时间：2012-11-26T01:25:36.150
> 
> 标签：objective-c, ios, xcode

我有一个`UITableView`为字幕单元格配置的。当我向其中添加一个单元格时，`TableView`我有两个数组。一个用于副标题，另一个用于主标签。我也有一个`NSMutableDictionary`这样，当我将单元格添加到表中时，它会记录一个对象和一个键。我的问题是当我想从`UITableView`我使用此方法中删除单元格时：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
    [myArray removeObjectAtIndex:indexPath.row];
    [numberArray removeObjectAtIndex:indexPath.row];

    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
} else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
}
} 
```

这对于从关联数组中删除对象非常有用，但我也想从`MutableDictionary`我创建的对象中删除对象。我认为你会使用类似于我在数组中使用的东西。

```
[myArray removeObjectAtIndex:indexPath.row]; 
```

但我不能使用

```
 [myDictionary removeObjectForKey:indexPath.row]; 
```

有谁知道我会怎么写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:30:59.960

由于`indexPath.row`是原始类型，因此它不能用作 中的键`NSDictionary`：您需要将其包装起来`NSNumber`才能这样做。

```
[myDictionary removeObjectForKey:[NSNumber numberWithInt:indexPath.row]]; 
```

仅当您使用`NSNumber`-wrapped 整数作为`NSMutableDictionary`. 通常，由于`NSDictionary`是关联容器，因此您需要在 的调用中使用与在 的调用中使用的键相同的`removeObjectForKey`键`setObject:forKey:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:47:59.483

使用此代码从 NSMutableDictionary 中删除数据

```
//First get all the keys of dictionary into one array
 NSArray *sectionsArray = [mutaleDictionary allKeys];
//Get all the data of tapped section into one array by using indexpath.section
 NSMutableArray *objectsAtSection = [mutaleDictionary valueForKey:[sectionsArray objectAtIndex:indexPath.section]];
//remove the particular object by using indexPath.row from the array
 [objectsAtSection removeObjectAtIndex:indexPath.row]; 
```

# jquery - 我可以使用 ajax 和 jquery 访问我的私有 bitbucket 存储库吗？

> ID：13557490
> 
> 赞同：2
> 
> 时间：2012-11-26T01:25:40.517
> 
> 标签：jquery, ajax, bitbucket

在我的网站上，我目前正在使用 jquery 从托管在 bitbucket.org 上的我的一个存储库生成标签列表。但为了做到这一点，我必须公开存储库。我宁愿保密。

我是否可以通过这种方式允许站点访问我的存储库，同时仍然保持存储库的私有性。

代码看起来像这样（在这种形式下，它将在控制台中生成一个所有标签的列表）。

```
$.ajax({
        url:"https://api.bitbucket.org/1.0/repositories/jeffreycwitt/publicrepository/tags",
        dataType: "jsonp",
        crossDomain: true,
        success: function (returndata){
           $.each(returndata, function(key, value){
               console.log(key)
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:13:52.503

基本上我已经了解到“需要授权标头”。并且共识似乎是这不能用 jquery 中的 JSONP 请求来完成。我真的不知道为什么。

但是我已经能够通过编写一个通过 php`file_get_contents`调用传递授权标头的 php 脚本来达到预期的结果。然后如上面的评论所建议的，我可以使用 ajax 脚本来加载所需的数据。php 脚本如下所示：

```
context = stream_context_create(array(
'http' => array(
    'header' => "Authorization: Basic " . base64_encode("$username:$password")
)
));

// Make the request 
$json = file_get_contents($url, false, $context);

//parse data
//turn json data into an array
$obj_a = json_decode($json, true);

//get all keys of array
$tags = array_keys($obj_a); 
```

因此，如果有人想从私有 bitbucket 存储库中检索所有标签，这就是您的操作方式。Bitbucket api 文档没有说明如何验证私有存储库，除非通过 CURL。但是，如果您不使用 CURL，则需要添加标题。

希望对某人有所帮助。（如果您认为您能更好地解释这一点，请随时编辑此答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-26T13:20:51.220

您还可以使用[应用密码](https://confluence.atlassian.com/bitbucket/app-passwords-828781300.html)进行身份验证，以避免暴露您的帐户密码：

```
const username = 'your-username'; // USERNAME, not email
const appPassword = 'app-pass';
const repoOwner = 'you-or-your-team';
const repository = 'repository-name';

$.ajax({
    url: `https://api.bitbucket.org/1.0/repositories/${repoOwner}/${repository}/tags`,
    headers: {
        Authorization: 'Basic ' + btoa(`${username}:${appPassword}`)
    },
    success: console.log,
    error: d => console.log(d.responseText),
}); 
```

# c++ - Qt QObject 动态数组

> ID：13557494
> 
> 赞同：1
> 
> 时间：2012-11-26T01:26:24.420
> 
> 标签：c++, qt

有没有不同的方法来创建 QObject 的动态数组？以下代码无法编译：

```
QStringList labels = defaultScene->getLabels();
QAction* traceActions = new QAction[labels.size()]; 
```

错误是：

C2512：“QAction”：没有合适的默认构造函数可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:34:46.010

您看到这一点是因为 QAction 没有默认构造函数。

您可以创建一个指向 QAction 的指针数组，然后单独实例化每个 QAction。

大致是这样的：

```
QAction** actions = new (QAction*)[labels.size()];
for(size_t i = 0; i<labels.size(); ++i)
{
  actions[i] = new QAction(constructor params ...);
} 
```

# php - php exec 另一个 PHP 页面

> ID：13557501
> 
> 赞同：0
> 
> 时间：2012-11-26T01:27:52.540
> 
> 标签：php

我被告知（来自我之前的问题）要运行外部 PHP 脚本，我可以使用`exec`or `curl`。

我已经开始研究`exec`，看起来很简单，但是我相信我做错了。

这不是只运行一个页面（并且不需要返回任何数据）的正确、简单的方法吗？

`exec("/folder/some_page.php?var=" . defined_variable);`

我尝试了相对链接和直接链接的不同组合，有/没有以斜杠开头。

感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T22:13:36.920

执行php：

```
exec("/folder/some_page.php $var1 $var2 $var3 $varn"); 
```

获取 some_page.php 中的变量：

```
$var1=$argv[1];
$var2=$argv[2];
$var3=$argv[3];
$var4=$argv[n]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:35:34.997

`exec()`运行程序，而不是脚本。在您的情况下，您需要调用`php`可执行文件并将其传递到服务器上文件夹的路径。您还必须使用命令行语法来传递查询参数，而不是 URL 语法。

有关命令行 PHP 使用的更多详细信息，请参见此处（这实际上`exec()`是在做的，减去交互式组件）： http: [//php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

# php - php scandir() 不显示文件 - 只显示目录

> ID：13557502
> 
> 赞同：3
> 
> 时间：2012-11-26T01:28:00.207
> 
> 标签：php, scandir

我的目录结构如下：

> /files
> /files/001
> /files/001/addfile.php
> /files/002
> /files/002/deletefile.php
> /files/003
> /files/003/viewfile.php

我的脚本：

```
error_reporting(E_ALL);
$directory      = 'files';
$files      = scandir($directory);

$xml = new DOMDocument('1.0', 'UTF-8');
$xmlFiles = $xml->appendChild($xml->createElement('FILES'));
if(is_dir($directory)) {
    print_r($files);
}
/*foreach($files as $file => $key) {
    if($file == '.' || $file == '..') { continue; }
    echo '$file: '.$file;
    if(is_dir("$directory/$file")) {
        $xmlDir->appendChild($xml->createElement($file));
    }
    else {
        $xmlFiles->appendChild($xml->createElement('FILE', $file));
    }
}*/
echo $xml->saveXML(); 
```

我的问题：`print_r($files)`输出：

> 数组（ [0] => . [1] => .. [2] => 001 [3] => 002 [4] => 003 ）

为什么 scandir 只输出目录而不输出文件？

TIA，内特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T01:35:49.243

您的文件位于这些目录中，并且 scandir 仅显示指定路径的内容，但没有任何重复，所以一切都是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T01:46:16.903

Scandir 不能递归工作。它只扫描输入到其中的路径。

[Scandir 递归函数，可更深入地扫描文件系统](http://www.php.net/manual/en/function.scandir.php#109140 "递归函数")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T08:33:03.657

您可以`RecursiveIteratorIterator`用于获取带有子目录列表的目录

以下是使用迭代器清空目录的方法：

```
<?php
function empty_dir($dir) {
    $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir),
                                             RecursiveIteratorIterator::CHILD_FIRST);
   foreach ($iterator as $path) {
     if ($path->isDir()) {
        // do something with directory
        //    rmdir($dir);
     } else {
       //doo something with files 
       // unlink($path->__toString());
     }
   }
  //    rmdir($dir);
}
?> 
```

# mysql - MySQL SELECT MAX of SUM() 值

> ID：13557514
> 
> 赞同：3
> 
> 时间：2012-11-26T01:29:45.320
> 
> 标签：mysql, sql, sum, max

我有这个 MySQL 查询：

```
SELECT 
    SUM(scpe.scpe_estemated_days) AS total_days,
    scp.cpl_startdate
FROM
    studentcourseplanelements scpe
        INNER JOIN
    studentcourseplan scp ON scp.cpl_id = scpe.scpe_cpl_id
        INNER JOIN
    (SELECT 
        sd1.student_id, sd1.student_startdate
    FROM
        studentdates sd1
    WHERE
        sd1.student_id = '360'
    LIMIT 1) sd ON sd.student_id = scp.student_id
GROUP BY scp.cpl_id 
```

这输出：

```
+------------+---------------+
| total_days | cpl_startdate |
+------------+---------------+
|          5 | 2012-11-01    |
|        129 | 2012-11-02    |
+------------+---------------+ 
```

我只想选择最高的行`total_days`，在我的示例中为 129。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T01:32:53.380

这将显示重复记录最高`total_days`，例如

```
+------------+---------------+
| total_days | cpl_startdate |
+------------+---------------+
|          5 | 2012-11-01    |
|        129 | 2012-11-02    |  <= shown
|        129 | 2012-11-03    |  <= shown
+------------+---------------+ 
```

询问

```
SELECT  SUM(scpe.scpe_estemated_days) AS total_days,
        scp.cpl_startdate
FROM    studentcourseplanelements scpe INNER JOIN studentcourseplan scp
            ON scp.cpl_id = scpe.scpe_cpl_id
        INNER JOIN
        (SELECT  sd1.student_id, sd1.student_startdate
         FROM    studentdates sd1
         WHERE   sd1.student_id = '360'
         LIMIT 1) sd ON sd.student_id = scp.student_id
GROUP BY scp.cpl_id
HAVING SUM(scpe.scpe_estemated_days) = 
    (
        SELECT MAX(total_days)
        FROM
        (
            SELECT  SUM(scpe.scpe_estemated_days) AS total_days,
            FROM    studentcourseplanelements scpe INNER JOIN studentcourseplan scp 
                         ON scp.cpl_id = scpe.scpe_cpl_id
                    INNER JOIN
                    (SELECT  sd1.student_id, sd1.student_startdate
                     FROM    studentdates sd1
                     WHERE   sd1.student_id = '360'
                     LIMIT 1) sd ON sd.student_id = scp.student_id
            GROUP BY scp.cpl_id
        ) s
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:32:32.273

尝试添加`ORDER BY total_days DESC LIMIT 0,1`

这将按大多数排序，并且只返回最佳答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T01:32:46.613

基本上，您希望按 SUM 列降序对其进行排序，然后获取列出的第一条记录。试试这个：

```
SELECT 
    SUM(scpe.scpe_estemated_days) AS total_days,
    scp.cpl_startdate
FROM
    studentcourseplanelements scpe
        INNER JOIN
    studentcourseplan scp ON scp.cpl_id = scpe.scpe_cpl_id
        INNER JOIN
    (SELECT 
        sd1.student_id, sd1.student_startdate
    FROM
        studentdates sd1
    WHERE
        sd1.student_id = '360'
    LIMIT 1) sd ON sd.student_id = scp.student_id
ORDER BY SUM(scpe.scpe_estemated_days) DESC
GROUP BY scp.cpl_id
LIMIT 1 
```

# objective-c - UINavigationController 的内存分析

> ID：13557516
> 
> 赞同：1
> 
> 时间：2012-11-26T01:30:13.613
> 
> 标签：objective-c, ios, xcode, memory, uinavigationcontroller

我正在对我的应用程序进行一些分析以检查可能的内存泄漏。我的应用程序`TabMenu`基于每个选项卡的后续`UINavigationController`。当我深入一个`UINavigationController`，记忆曲线在上升，这是正常的。问题是当我返回导航（弹出`ViewControllers`）时，消耗量会下降一点，但不像我预期的那样。因为我期望的是内存与进入层次结构的某个级别时大致相同`UINavigationController`，但事实并非如此。

这是正常的吗？这是否意味着我有一些内存泄漏？

下面是具体的一段代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
    NTM_Accommodation *accommodation = [self.resources objectAtIndex:indexPath.row];  
    UIViewController *controller = [[NT_DetailsAccommodationViewController alloc] initWithResource:accommodation];  
    [self.navigationController pushViewController:controller animated:YES];  
} 
```

我正在使用ARC。

# c# - 如何让编译器从用户创建的类中推断类型？

> ID：13557518
> 
> 赞同：3
> 
> 时间：2012-11-26T01:30:59.600
> 
> 标签：c#, generics

假设我有这样的课程：

```
static class TestClass<T>
{
    public static void TestMethod(T t)
    {

    }
} 
```

有什么方法可以推断出这些论点，所以我可以替换它：

```
TestClass<int>.TestMethod(5); 
```

有了这个？

```
TestClass.TestMethod(5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:36:24.330

不是类是通用的。但是，仅使方法静态有效：

```
static class TestClass
{
    public static void TestMethod<T>(T t)
    {

    }
} 
```

调用：

```
TestClass.TestMethod(5);    // TestClass.TestMethod<int>(int t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:54:23.910

如果您仍然需要通用静态类（不仅是通用静态方法），您可以为它编写一个“工厂”类（我称之为`MyInvoker`）：

```
static class MyClass<T>
{
    static T myT;

    public static void DoWork<T>(T t)
    {
    }
}

static class MyInvoker
{
    public static void DoWork<T>(T t)
    {
        MyClass<T>.DoWork(t);
    }
} 
```

稍后在您的代码中，您可以使用`MyInvoker`在类名中省略泛型，例如：

```
MyInvoker.DoWork(4); 
```

这将使您在此调用程序中重复原始类中的所有方法，因此我认为这不是一个很好的解决方案。明显违反了 DRY 原则。当然，可以尝试通过反思来做到这一点，但这是另一个具有众所周知的缺点的故事。

* * *

如果你的类是非静态的，你可以使用这样的工厂方法：

```
static class TestClass
{
    public static TestClass<T> GetInstance<T>(T _t)
    {
        return new TestClass<T>(_t);
    }
}

class TestClass<T>
{
    T t;

    public TestClass(T _t)
    {
        this.t = _t;
    }

    public T Value
    {
        get
        {
            return t;
        }
    }

    //...        
} 
```

和

```
var tc = TestClass.GetInstance(5);
int val = tc.Value; //int TestClass<int>.Value 
```

# linux - 对多个调试终端使用 linux 伪终端 API

> ID：13557522
> 
> 赞同：0
> 
> 时间：2012-11-26T01:32:03.630
> 
> 标签：linux, pty

Ubuntu Linux：如何获取指向
伪终端对的主端的路径？......从端很容易......但主端似乎只作为一个打开的文件描述符存在，但似乎没有有效的 Linux 路径。

关于工作 Linux 伪终端示例[http://www.man7.org/tlpi/code/online/all_files_by_chapter.html#ch64](http://www.man7.org/tlpi/code/online/all_files_by_chapter.html#ch64) 在这本非常好的 Liunx API 书的最后一章中介绍：[http://www.nostarch .com/tlpi](http://www.nostarch.com/tlpi)

关于 Linux linux 伪终端 API 当前状态的问题。上面提到的示例，根据 PTY 从站的要求将分叉/执行程序的 stdin/stdout/stderr 流重定向到 PTY 从站……在 PTY 的那一侧很高兴。

但是我需要作为参数传递给多选项卡式终端仿真器进程的伪终端主机路径似乎还不存在。

我的问题是关于为伪终端对的主端创建命名路径......尽我所能，在上面提到的示例代码中，只有 PTY 从端实际上有一个名称，作为 PTY 主端仅通过打开的文件描述符引用...当我通过“readlink（”/dev/fd/3“...）查询主端路径时，它返回 PTY 主克隆路径”/ dev/ptmx”，因此我推测 PTY Master 端可能还没有路径名？..我想我可能需要通过调用链接（）来创建一个有效的路径....但是链接（）只接受一个现有的路径，而不是一个打开的文件描述符作为它的参数？...所以我尝试调用 link("/dev/ptmx", NewPTM_name) refurning 到 PTY cloan 设备，希望它可以创建一个链接到生成的 PTY 主机边，但该调用失败，返回-1。

然后我想将这个 PTY Master 侧路径字符串参数传递给终端仿真器，可能是通过它的命令行，或者在 RoxTerm 的情况下可能是 DBus ...

我意识到许多终端仿真器程序都有一个 -e 或 -x 参数，允许一个人在终端窗口内运行程序......不幸的是，采用这种方法并不倾向于让一个人对父/子进程树有太多控制权...这是必需的，因为这项工作支持共享内存多处理系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:26:43.263

Liunx 伪终端 API 的当前状态无法将主端 Linux PTY 路径可靠地传递给终端仿真程序，因为伪终端接口的主端仅可用作打开文件描述符......。 . 但是 PTY 接口的从属端确实拥有一个路径名，可以作为程序之间的参数传递.. 正如 nm 所建议的那样。人们可以通过 DBus 请求终端仿真程序创建一个新的（命名的）终端选项卡，然后返回来解决如何将程序的 stdio 互连到终端仿真窗口中的新选项卡的接口限制作为该 DBus 调用的结果，关联的从属侧路径..
..这导致了以下问题“如何：C ++，DBus调用创建新终端的终端仿真程序，返回从PTY”

# html - 在 HTML 复选框中是否选中=无效？

> ID：13557523
> 
> 赞同：5
> 
> 时间：2012-11-26T01:32:04.837
> 
> 标签：html, checkbox, html-validation

所以，我一直在修复我的网站。我的网站当然会从“视图”生成 HTML。

现在，我的部分观点如下所示：

```
<input type="checkbox" name="Publish" checked="{=Entry.Publish ? "yes" : "no" =}" value="true" /> 
```

这是解决此问题的最简单方法。但是，当它生成时`checked="no"`，每当我加载页面时，默认情况下仍会选中该复选框。我真的必须将`checked`属性全部排除在外才能不被检查吗？

另外，我使用 HTML5 作为我的文档类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T02:01:50.813

短版：是的，需要排除。

该属性的值无关紧要，只要存在，就会选中该框。

```
<input type="checkbox" name="Publish" value="true" checked /> 
```

这在 HTML5 中有效。

在 XHTML 中，属性需要一个值，并且约定是`checked="checked"`因为像“yes”或“true”这样的值意味着相反的值会取消选中该框，这是不正确的，并且会使初学者感到困惑。`readonly="readonly"`和采用了类似的约定`disabled="disabled"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:33:45.890

是的。`checked`是一个布尔属性，当它不存在时为“off”，当它存在时为“on”。

[布尔](http://dev.w3.org/html5/spec/common-microsyntaxes.html#boolean-attribute)属性和[检查](http://dev.w3.org/html5/spec/the-input-element.html#attr-input-checked)属性的W3C 参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T01:36:36.140

[从规范](http://www.w3.org/TR/html-markup/input.checkbox.html#input.checkbox.attrs.type)

> `checked = "checked"`或`""`（空字符串）或空
> 
> 指定该元素表示选定的控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T01:35:58.650

如果要`checked`检查，则要包含该属性，否则请省略该属性。

# node.js - derbyjs 从 x-bind 在服务器上运行代码

> ID：13557526
> 
> 赞同：2
> 
> 时间：2012-11-26T01:32:17.373
> 
> 标签：node.js, derbyjs

我正在尝试从 derby.js 中客户端上的事件运行一些仅服务器代码我正在使用 x-bind 将事件绑定到视图上，如下所示：

```
<a href="#" x-bind="click: func">click me</a> 
```

在应用程序上：

```
exports.func=function(e,el,next){
    // i want to run some server code here, but it runs on the client only
} 
```

所以：

1.  这可以以任何方式完成吗？
2.  如果没有，有没有办法在 derby.js 上以“本机”方式使用套接字

当其余的都是实时的时，我根本不想回退到使用服务器路由的 ajax。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:59:04.900

您可以通过模型（ model.fetch() 和 model.subscribe() ）将请求路由到服务器。如果它只是从服务器检索一些数据，那么您基本上已经准备就绪。在需要时保留对模型的引用（在 switz 指出的 app.ready 回调中）。

要直接使用套接字或扩展模型（在后台使用套接字），请参阅 [https://groups.google.com/forum/?pli=1#!topic/derbyjs/60gouek7334](https://groups.google.com/forum/?pli=1#!topic/derbyjs/60gouek7334)

# jquery - 如何从ajax呈现下拉菜单

> ID：13557527
> 
> 赞同：0
> 
> 时间：2012-11-26T01:32:24.920
> 
> 标签：jquery, spring, jsp, drop-down-menu

我的 json 响应是这样的（根据萤火虫）

```
[
{
    "value": 1,
    "text": "Bill_Process_1",
    "selected": false,
    "imageSrc": "image.jpg",
    "description": "Bill_Process_1"
},
{
    "value": 2,
    "text": "Bill_Process_2",
    "selected": false,
    "imageSrc": "image.jpg",
    "description": "Bill_Process_2"
},
{
    "value": 3,
    "text": "Bill_Process_3",
    "selected": false,
    "imageSrc": "image.jpg",
    "description": "Bill_Process_3"
},
{
    "value": 4,
    "text": "Bill_Process_4",
    "selected": false,
    "imageSrc": "image.jpg",
    "description": "Bill_Process_4"
},
{
    "value": 5,
    "text": "Bill_Process_5",
    "selected": false,
    "imageSrc": "image.jpg",
    "description": "Bill_Process_5"
} 
```

]

请帮我完成这段代码。它只显示空的下拉菜单。我对如何将它渲染到这里感到困惑..

```
 <div id="myDropdown"></div>
<script type="text/javascript">
    var jsonurl = 'dropDown.html';
    $.ajax({
          type: 'GET',
          url: jsonurl,
          data: {},
          success:function(data){
                 var options = $("#myDropdown");
                 $.each(data, function () {
                     alert(data);
                     options.append($("<option />").val(this.value).text(this.text));                        
                 });
             },
          error:function(){             
          }
        });     

    $('#myDropdown').ddslick({
        data : jsonurl,
        width : 300,
        selectText : "Select the bill process",
        imagePosition : "right",
        onSelected : function(selectedData) {
            //callback function: do something with selectedData;
        }
    });
</script> 
```

我使用 spring @ResponseBody 返回这个 json 数组。

我使用 ddslick 作为我的下拉菜单。这里显示它是

[ddslick 通过 jquery 代码下拉](https://i.stack.imgur.com/XO3im.jpg)

现在我的输出是这样的。它不是以下拉列表的形式加载到 div 的数据，在网页上它一一显示为列表

![我的输出](../Images/8fa9accbe0db5bc273288eb4c4fa20c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:53:35.320

你应该使用这样的东西：

```
 success:function(data){
     var options = $("#myDropdown");
     $.each(data, function () {
         options.append($("<option />").val(this.value).text(this.text));
     });
 }, 
```

在您的 AJAX 成功处理程序中解决下拉为空的问题。我不太确定你想在选择上实现什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:41:23.167

试试这个

```
<script type="text/javascript">
var jsonurl = 'dropDown.html';
$.ajax({
      type: 'GET',
      url: jsonurl,
      data: {},
      success:function(myData){
          $('#myDropdown').ddslick({
               data : myData,
               width : 300,
               selectText : "Select the bill process",
               imagePosition : "right",
               onSelected : function(selectedData) {
                //callback function: do something with selectedData;
               }
          });
      },
      error:function(){             
      }
    });
</script> 
```

# c# - 从多个后台线程更新标签

> ID：13557530
> 
> 赞同：1
> 
> 时间：2012-11-26T01:32:45.303
> 
> 标签：c#, label, invokerequired, background-thread

我正在开发一个足球模拟器，我在不同的线程上有 9 场比赛的背景。在每个线程核心的方法中，都有一个事件。当这种情况发生时（当一个目标被“踢”时），我想用部分结果更新表单上的一个标签（名为goalLabel）。我写了一个代码...：

```
for (int i = 0; i < 6; i++)
{
    if (i % 2 == 0) homeGoals++;
    else awawyGoals++;
    if (goal != null) goal(this); //(goal is an event)
    Thread.Sleep(1000);
} //this is the full method 
```

...在每场比赛中，目标的确切数量将是 6（结果将是 3 - 3），因此对于 9（9 也是固定的）背景匹配，goalLabel 应该更改文本（6 * 9 =） 54 次。然而，它只改变了几次。这是事件的事件处理程序方法：

```
public void GoalEventHandler(Match match)
{
    string akt = string.Format("{0} {1} - {2} {3}", match.Opps[0].Name, match.Hgoals, match.Agoals, match.Opps[1].Name);
    UpdateGoalLabel(akt);
} 
```

和 UpdateGoalLabel 方法：

```
public void UpdateGoalLabel(string update)
{
    if (InvokeRequired)
    {
        MyDel del = new MyDel(UpdateGoalLabel); // yeah, I have a delegate for it: delegate void MyDel(string update);
        Invoke(del, update);
    }
    else
    {
        lock (this) // if this lock isn't here, it works the same way
        {
            this.goalLabel.Text = update;
        }
    }
} 
```

所以我可以到达并更改标签的文本，但我不知道为什么它不更改 54 次。这就是目标，在每个目标之后得到通知。

任何的想法？

先感谢您。

更新 #1：我正在使用 VS2010。

这是我启动线程的代码：

```
List<Thread> allMatches = new List<Thread>();
foreach (Match match in matches)
{
    Thread newtmatch = new Thread(match.PlayMatch); //this is the first code block I wrote
    allMatches.Add(newtmatch);
    newtmatch.Start();
} 
```

更新#2：这是我附加事件处理程序的地方（这是在相同的方法中，在前一个代码块上方几行）：

```
matches = new List<Match>();
foreach (Team[] opponents in Program.cm.nextMatches)
{
    Match vmi = new Match(opponents);
    matches.Add(vmi);
    vmi.goal += new Match.goalevent(GoalEventHandler);
}
//Program.cm.nextMatches is a List<Team[]> object that contains the pairs of teams for the next matches; 
```

我将这些 Team 数组转换为 Match 对象，因为这个类有两个 Team 字段，并且有事件和 PlayMatch 方法，该方法仍然是包含（仅）第一个代码块的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:29:23.823

我也遇到了 UI 刷新问题，并且直接使用了“BackgroundWorker”线程，而不仅仅是“Thread”类。BackgroundWorker 线程允许您显式报告进度更改并调用线程外的某些方法（即：调用辅助线程的调用 UI 线程）。因此，我创建了一个从后台工作程序派生的自定义类，并且还创建了我自己版本的您所描述的“匹配”类

```
public class Match
{
    public Match( string Home, string Away )
    {
        HomeTeam = Home;
        HomeGoals = 0;

        AwayTeam = Away;
        AwayGoals = 0;
    }

    // simple properties with PROTECTED setters, yet readable by anyone
    public string HomeTeam
    { get; protected set; }

    public int HomeGoals
    { get; protected set; }

    public string AwayTeam
    { get; protected set; }

    public int AwayGoals
    { get; protected set; }

    // just place-holder since I don't know rest of your declarations
    public EventHandler goal;

    public void PlayMatch()
    {
        for (int i = 0; i < 6; i++)
        {
            if (i % 2 == 0) 
                HomeGoals++;
            else 
                AwayGoals++;

            // Report to anyone listening that a score was made...
            if (goal != null) 
                goal(this, null);

            Thread.Sleep(1000);
        } 
    }
}

// Now, the background worker
public class MatchBGW : BackgroundWorker
{
    // each background worker preserves the "Match" instance it is responsible for.
    // this so "ReportProgress" can make IT available for getting values.
    public Match callingMatch
    { get; protected set; }

    // require parameter of the match responsible for handling activity
    public MatchBGW(Match m)
    {
        // preserve the match started by the background worker activity
        callingMatch = m;

        // tell background worker what method to call
        // using lambda expression to cover required delegate parameters 
        // and just call your function ignoring them.
        DoWork += (sender, e) => m.PlayMatch();

        // identify we can report progress  
        WorkerReportsProgress = true;

        // Attach to the match.  When a goal is scored, notify ME (background worker)
        m.goal += GoalScored;
    }

    // this is called from the Match.
    public void GoalScored(object sender, EventArgs e)
    {
        // Now, tell this background worker to notify whoever called IT
        // that something changed.  Can be any percent, just something to
        // trigger whoever called this background worker, so reported percent is 1
        ReportProgress(1);
    }
} 
```

现在，从具有标签的调用窗口中，例如从按钮单击开始...

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        // create your "Matches" between teams
        matches = new List<Match>();
        matches.Add(new Match("A", "B"));
        matches.Add(new Match("C", "D"));
        matches.Add(new Match("E", "F"));

        foreach (Match m in matches)
        {
            // create an instance of background worker and pass in your "match"
            MatchBGW bgw = new MatchBGW(m);
            // tell the background worker that if it is notified to "
            // report progress" to, to pass itself (background worker object)
            // to this class's SomeoneScored method (same UI thread as textbox)
            bgw.ProgressChanged += SomeoneScored;
            // Now, start the background worker and start the next match
            bgw.RunWorkerAsync();
        }
    }

    // This is called from the background worker via "ReportProgress"
    public void SomeoneScored(object sender, ProgressChangedEventArgs e)
    {
        // Just ensuring that the background worker IS that of what was customized
        if (sender is MatchBGW)
        {
            // get whatever "match" associated with the background worker
            Match m = ((MatchBGW)sender).callingMatch;
            // add it's latest score with appropriate home/away team names
            this.txtAllGoals.Text +=
                string.Format("{0} {1} - {2} {3}\r\n", 
                m.HomeTeam, m.HomeGoals, m.AwayGoals, m.AwayTeam );
        }
    } 
```

是的，它可能是更多代码，但我正在明确处理谁被回调并在他们的适当线程上报告什么......没有 BeginInvoke 所需的测试/操作。只是您问题的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:25:34.407

让我确保我理解你在做什么。您已经启动了 9 个线程，循环 6 次，每次更新一个文本框并休眠 1 秒。从它的声音来看，它们都在更新同一个标签。您评论说，如果您将更新推送到列表中，您将获得所有更新，我的猜测是所有 9 个线程的更新速度都非常快，您看不到它，最后一个线程获胜。

我不确定你是如何构建你的 UI 的，但我认为这对于 WPF 和 MVVM(Model-View-ViewModel) 来说是完美的。除非您有充分的理由，否则我不会使用 WinForms，WPF 更容易使用。

我会创建一些视图模型：

```
public class MainWindowViewModel : DispatcherObject, INotifyPropertyChanged
{
    public MainWindowViewModel()
    {
        Matches = new ObservableCollection<MatchViewModel>();
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private ObservableCollection<MatchViewModel> _matches;
    public ObservableCollection<MatchViewModel> Matches
    {
        get { return _matches; }
        set
        {
            _matches = value;
            OnPropertyChanged("Matches");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public class MatchViewModel : DispatcherObject, INotifyPropertyChanged
{
    public MatchViewModel()
    {
        HomeTeam = new TeamViewModel();
        AwayTeam = new TeamViewModel();
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private TeamViewModel _homeTeam;
    public TeamViewModel HomeTeam
    {
        get { return _homeTeam; }
        set
        {
            _homeTeam = value;
            OnPropertyChanged("HomeTeam");
        }
    }

    private TeamViewModel _awayTeam;
    public TeamViewModel AwayTeam
    {
        get { return _awayTeam; }
        set
        {
            _awayTeam = value;
            OnPropertyChanged("AwayTeam");
        }
    }

    public void PlayMatch()
    {
        for (int i = 0; i < 6; i++)
        {
            if (i % 2 == 0)
                OnGoalScored(HomeTeam);
            else
                OnGoalScored(AwayTeam);
            Thread.Sleep(1000);
        }
    }

    private void OnGoalScored(TeamViewModel team)
    {
        if (!team.Dispatcher.CheckAccess())
        {
            team.Dispatcher.Invoke((Action<TeamViewModel>)OnGoalScored, team);
        }
        else
        {
            team.Score++; // do other stuff here
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public class TeamViewModel : DispatcherObject, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _name;
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            OnPropertyChanged("Name");
        }
    }

    private int _score;
    public int Score
    {
        get { return _score; }
        set
        {
            _score = value;
            OnPropertyChanged("Score");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后在 UI 线程的程序类中，执行如下操作：

```
 protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        MainWindowViewModel mainWindow = new MainWindowViewModel();
        List<Thread> matchThreads = new List<Thread>();
        foreach (Team[] opponents in Program.cm.nextMatches)
        {
            MatchViewModel match = new MatchViewModel();
            match.HomeTeam.Name = opponents[0].Name;
            match.AwayTeam.Name = opponents[1].Name;
            mainWindow.Matches.Add(match);

            Thread matchThread = new Thread(match.PlayMatch);
            matchThreads.Add(matchThread);
            matchThread.Start();
        }

        MainWindow = new MainWindow();
        MainWindow.DataContext = mainWindow;
        MainWindow.Show();
    } 
```

我在 OnStartup 的覆盖中做了我的，因为在 VS2010 中，当您创建一个项目时，您的启动项将从 System.Windows.Application 继承。

我有这个简单的 UI 用于测试：

```
<Window x:Class="TestMatch.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <ItemsControl ItemsSource="{Binding Matches}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0} {1} - {2} {3}">
                            <Binding Path="HomeTeam.Name"/>
                            <Binding Path="HomeTeam.Score"/>
                            <Binding Path="AwayTeam.Name"/>
                            <Binding Path="AwayTeam.Score"/>
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

这段代码非常粗略，并被拼凑在一起，以快速演示 MVVM 的执行方式。我能够让所有 9 个团队每秒更新一次。我有一些填充代码来模拟您拥有的对象：

```
public partial class Program
{
    protected override void OnStartup(StartupEventArgs e)
    {
        ...
    }

    private class Team
    {
        public string Name { get; set; }
    }

     private static class cm
     {
         static cm()
         {
             nextMatches =
                 new Team[][]
                     {
                         new[] { new Team { Name = "TeamA" }, new Team { Name = "TeamB" }},
                         new[] { new Team { Name = "TeamC" }, new Team { Name = "TeamD" }},
                         new[] { new Team { Name = "TeamE" }, new Team { Name = "TeamF" }},
                         new[] { new Team { Name = "TeamG" }, new Team { Name = "TeamH" }},
                         new[] { new Team { Name = "TeamI" }, new Team { Name = "TeamJ" }},
                         new[] { new Team { Name = "TeamK" }, new Team { Name = "TeamL" }},
                         new[] { new Team { Name = "TeamM" }, new Team { Name = "TeamN" }},
                         new[] { new Team { Name = "TeamO" }, new Team { Name = "TeamP" }},
                         new[] { new Team { Name = "TeamQ" }, new Team { Name = "TeamR" }},
                     };
         }

         public static Team[][] nextMatches { get; set; }
     }
} 
```

# perl - 倒计时在 perl 中不起作用

> ID：13557532
> 
> 赞同：1
> 
> 时间：2012-11-26T01:32:52.197
> 
> 标签：perl

在我们的实时服务器中遇到了一个问题。

拥有每天运行近 15 到 18 小时的脚本 (perl)。它每天创建 100 多个子流程。它有一个地方有命令（我们在命令行 solaris 框中运行的产品命令），该命令在 perl 代码中用反引号触发。

看起来 back ticks 命令被随机跳过或失败。

例如。如果我需要为 50 个客户运行 2 或 3 个随机失败。

我没有看到该命令已在任何地方触发的证据。

由于它的实时服务器，在我们确定问题之前，我们甚至无法尝试对代码进行太多更改。

这是代码..

```
my $comm = "inventory -noX customer1"; #sample command i have given here
my $newLogFile = "To capture command output here we have path whre the file gets created");
my $piddy = `$comm 2>&1 > $newLogFile`; 
```

是不是因为后面的勾号，我真的不确定:(。

还尝试了各种分析，如内存/CPU/磁盘空间/在 LD_LIBRARY_PATH 中添加 librtld_db.so 等......但没有运气......而且 perl 是 64 位......我还能做什么？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T01:45:47.720

我怀疑你没有检查错误（而且 perl 并没有让正确地做反引号变得容易）。

考虑使用[IPC::System::Simple](http://p3rl.org/IPC::System::Simple#SYNOPSIS)的捕获代替反引号/qx。正如它的文档所说，“如果出现错误，它将死去，并详细描述出了什么问题。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:52:42.900

调用外部命令时，我使用**的**是[IPC::System::Simple](http://search.cpan.org/~pjf/IPC-System-Simple-1.21/lib/IPC/System/Simple.pm)的系统或[IPC::Open3](http://perldoc.perl.org/IPC/Open3.html)**的**open3 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T02:59:03.443

它不应该仅仅因为反引号而失败，但是因为它正在生成一个新进程，该进程可能会由于系统条件（例如 sysLoad）而定期失败。反引号实际上是一种“一劳永逸”的方法，永远不应该用于生产环境中的任何关键内容。如前所述，有更详细的方法来管理生成的外部进程。

如果命令的输出由于缓冲而丢失，您可以尝试关闭缓冲，但请注意性能下降（通常不重要）。

通过在顶部附近添加以下内容，可以关闭整个脚本的缓冲：

```
$|=1; 
```

# tabwidget - 使用默认系统键盘并仅重新创建所需的键盘

> ID：13557536
> 
> 赞同：1
> 
> 时间：2012-11-26T01:33:15.373
> 
> 标签：tabwidget, keypad

我需要按如下方式创建一个键盘 1) 最初只有编辑文本可见
2) 单击编辑文本时会启动一个 tabwidget/Buttons/ImageView 并且 Widget 的第一个选项卡包含默认系统键盘和其余选项卡包含自定义键盘。3) EditText 出现在键盘顶部和 tabWi 我尝试使用 SCrollView 如下所述我有以下 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true">

      <EditText
      android:id="@+id/editview"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_marginTop="15dp"
      android:ems="10"
      android:inputType="text"/>

    </ScrollView>

    <RelativeLayout
        android:id="@+id/relView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="-8dip ">
        <ImageView
            android:id="@+id/button1"
            android:src="@drawable/ic_launcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginRight="-8dip" 
            android:layout_marginLeft="-8dip" />

        <ImageView
            android:id="@+id/button2"
            android:src="@drawable/ic_launcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/button1"
            android:adjustViewBounds="true"
            android:layout_marginRight="-8dip" />
        <ImageView
            android:id="@+id/button3"
            android:src="@drawable/ic_launcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/button2"
            android:adjustViewBounds="true"
            android:layout_marginRight="-8dip" />
        <ImageView
            android:id="@+id/button4"
            android:src="@drawable/ic_launcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/button3"
            android:adjustViewBounds="true"
            android:layout_marginRight="-8dip" />

    </RelativeLayout>

</RelativeLayout> 
```

这样它会启动键盘，并且通过设置 android:windowSoftInputMode="stateAlwaysHidden|adjustResize|adjustPan" 在屏幕底部可以看到图像视图

但我只想获得 ImageView 和点击 EditText 和 Edit Text 的小键盘应该在小键盘的顶部。

# ruby-on-rails - ActiveRecord 发现 NOT(has_many)

> ID：13557537
> 
> 赞同：0
> 
> 时间：2012-11-26T01:33:39.097
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个非常简单的模型，如下所示：

```
class User < ActiveRecord::Base
    has_many :cookies
    has_many :fortunes, :through => :cookies
end

class Cookie < ActiveRecord::Base
    belongs_to :user
    belongs_to :fortune
end

class Fortune < ActiveRecord::Base
    has_many :cookies
    has_many :users, :through => :cookies
end 
```

对于给定的用户`u`，我可以

```
u.fortunes 
```

这将通过 Cookies 表为我提供与该用户相关的所有财富。我想要做的是得到所有没有归还的财富`u.fortunes`。

我试过

```
Fortune.all(:limit => 5, :conditions => {:user => {:id._ne => u.id} }) 
```

但这不起作用:(。我是 ActiveRecord 的新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:54:39.423

试试这个：

```
Fortune.limit(5).where("id not in (?)", u.fortunes.map(&:id)) 
```

（我在自己的桌子上试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:38:32.827

你可以做

```
ids_to_reject = u.fortunes.map(&:id)
Fortune.all(:limit => 5, :conditions => ["id not in (?)", ids_to_reject]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:54:32.717

或者试试这个

```
Fortune.includes(:cookies).limit(5).where([ 'cookies.user_id != ? OR cookies.user_id IS NULL', u.id ]) 
```

或者使用您使用的语法

```
Fortune.all(:include => :cookies, :limit => 5, :conditions => [ 'cookies.user_id != ? OR cookies.user_id IS NULL', u.id ]) 
```

不使用 include :users 的原因是为了避免额外的加入。

**编辑：** 其他建议更短，我认为在查找（无连接）时也更快一些，我只想展示如何使用关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:00:14.320

试试这个

```
 @fortune=Fortune.find(:all).delete_if{|fortune| !fortune.user.nil? } 
```

它将删除属于用户的财富，并将剩余的给我们。

# php - $POST_ 从多个复选框返回数组

> ID：13557538
> 
> 赞同：2
> 
> 时间：2012-11-26T01:33:41.367
> 
> 标签：php, html

嗨，我查看了其他答案，他们说要添加 name=checkbox[] 以使数组返回，但它似乎不起作用。

HTML 是：

```
<select class="select" multiple="multiple" name="suburb[]" id="suburb">
<option selected="selected" name="suburb[]" value="Southbank">Southbank</option>
<option selected="selected" name="suburb[]" value="Melbourne">Melbourne</option>
<option selected="selected" name="suburb[]" value="Docklands">Docklands</option>
<option selected="selected" name="suburb[]" value="South Melbourne">South Melbourne</option>
<option selected="selected" name="suburb[]" value="West Melbourne">West Melbourne</option>
<option selected="selected" name="suburb[]" value="Point Cook">Point Cook</option>
<option selected="selected" name="suburb[]" value="Sanctuary Lakes">Sanctuary Lakes</option>
<option selected="selected" name="suburb[]" value="Truganina">Truganina</option>
<option selected="selected" name="suburb[]" value="Williams Landing">Williams Landing</option> 
```

PHP代码是：

```
 $message .= "<tr><td><strong>Interested Suburbs:</strong> </td><td>" . strip_tags($POST_['suburb']) . "</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:38:25.747

```
$_POST['suburb'] 
```

数组不是字符串吗，您也将其拼错为 $_POST，因此您需要循环遍历它以像这样发布：

```
$message .= "<tr><td><strong>Interested Suburbs:</strong> </td><td>";

foreach ($_POST['suburb'] as $suburb)
{
    $message .= strip_tags($suburb) . "<br />\n";
}

$message .= "</td></tr>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:38:22.033

工作正常：你只需要使用`$_POST`和`print_r`数组来查看它的内容。试试这个，你会发现它工作正常。

顺便说一句，你不需要你的`name`属性`options`

```
<form method="post" action="<?=$PHP_SELF?>">
    <select name="suburb[]" class="select" multiple="multiple" id="suburb">
        <option selected="selected" value="Southbank">Southbank</option>
        <option selected="selected" value="Melbourne">Melbourne</option>
        <option selected="selected" value="Docklands">Docklands</option>
        <option selected="selected" value="South Melbourne">South Melbourne</option>
        <option selected="selected" value="West Melbourne">West Melbourne</option>
        <option selected="selected" value="Point Cook">Point Cook</option>
        <option selected="selected" value="Sanctuary Lakes">Sanctuary Lakes</option>
        <option selected="selected" value="Truganina">Truganina</option>
        <option selected="selected" value="Williams Landing">Williams Landing</option>
    </select>
    <button type="submit">test</button>
</form>
<?php
print_r($_POST['suburb']);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T01:39:02.727

您要查找的变量是`$_POST`，而不是`$POST_`; 有关更多详细信息，请参阅[$_POST 上的 PHP 参考。](http://php.net/manual/en/reserved.variables.post.php)

否则，从您所显示的内容来看，它可能没问题。如果仍然无法正常工作，请为您的表单标签添加 HTML。

# ssl - 如何在meteor.js中使用force-ssl而不部署到meteor.com子域？

> ID：13557541
> 
> 赞同：6
> 
> 时间：2012-11-26T01:33:53.503
> 
> 标签：ssl, meteor

文件不清楚。如何在 localhost 中安装证书等？

```
force-ssl

This package causes Meteor to redirect insecure connections (HTTP) to a secure URL (HTTPS). Use this package to ensure that communication to the server is always encrypted to protect users from active spoofing attacks.

To simplify development, unencrypted connections from localhost are always accepted over HTTP.

Application bundles (meteor bundle) do not include an HTTPS server or certificate. A proxy server that terminates SSL in front of a Meteor bundle must set the standard x-forwarded-proto header for the force-ssl package to work.

Applications deployed to meteor.com subdomains with meteor deploy are automatically served via HTTPS using Meteor's certificate. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T20:58:46.463

我已经设置了一个 Apache 反向代理，它在 Meteor 前面终止 SSL，我也想在这里记录一下。

我在 SSL 虚拟主机的配置文件中添加了以下内容：

```
<VirtualHost _default_:443>
        ServerName server.domain.com

        ## SSL Engine Switch:
        # Enable/Disable SSL for this virtual host.
        SSLEngine on

        ## Proxy to port 3000 for Meteor apps
        SSLProxyEngine On
        ProxyRequests Off # Disable forward proxying
        ProxyPass / http://localhost:3000
        ProxyPassReverse / http://localhost:3000

        ## Your other SSL config directives such as certificates, etc.

</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:00:12.793

您不需要在 localhost 上安装证书。正如它所说的“为了简化开发，始终通过 HTTP 接受来自 localhost 的未加密连接。”这意味着您可以在不使用 SSL 和安装证书的情况下开发和测试应用程序。只需运行您的应用程序并`http://localhost:3000`像往常一样访问它。

如果您正在谈论为面向公众的应用程序安装证书，最好使用反向代理服务器，例如`nginx`并为该服务器安装证书。[http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)

# http - 网站如何知道您的 IP 地址？

> ID：13557542
> 
> 赞同：3
> 
> 时间：2012-11-26T01:34:03.720
> 
> 标签：http

当我访问网站[http://myipaddress.com/what-is-my-ip-address/](http://myipaddress.com/what-is-my-ip-address/)

我检查了请求头信息。没有它在哪里包括我的IP地址。那么网络服务器如何确定我的 IP 地址呢？我知道任何网络服务器都可以访问这些信息。但是如果 HTTP 请求中没有它，他们是如何得到它的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:39:50.147

您正在连接到服务器并向其发送 HTTP 请求。服务器回复一个页面。为此，它必须知道将回复发送到哪里。该信息可从套接字连接自动获得（即从低于 HTTP 的级别），因此不必在请求标头中重复。

*编辑：* 如果您想了解更多有关 Web 服务器如何执行此操作的信息，请参阅[`accept`功能](http://www.kernel.org/doc/man-pages/online/pages/man2/accept.2.html)。当连接进来时，Web 服务器会调用`accept`，它会自动向它提供另一端的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T01:41:12.660

它位于 Web 服务器的传入 TCP/IP 数据包中。HTTP 数据包在通过 Internet 发送时被封装在 TCP/IP 数据包中（尽管看起来很奇怪，但它本身也被各种传输中的协议封装）。

传入的 TCP/IP 数据包将包含一些关于源的信息，包括[源 IP 地址](http://en.wikipedia.org/wiki/IPv4_packet#Packet_structure)和[源端口号](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure)。

# ruby-on-rails - 无法在 heroku 生产应用程序中渲染 font-awesome

> ID：13557546
> 
> 赞同：1
> 
> 时间：2012-11-26T01:34:29.280
> 
> 标签：ruby-on-rails, heroku, fonts, twitter-bootstrap

我已经看到几个问题提出了类似的问题，但是我无法使用未安装该字体的计算机在我的生产应用程序中渲染该字体。

[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

安装了这个：[https ://github.com/bokmann/font-awesome-rails](https://github.com/bokmann/font-awesome-rails)

添加了这个：

```
*= require 'font-awesome' 
```

到 application.css

图标正在工作，例如：

```
<i class="icon-envelope"></i> 
```

正确呈现实际上是字体真棒字体之一的信封图标。但是，我无法在生产中显示字母字体（我只看到 Times New Roman）。我试过这些说明无济于事：

[http://blog.fieldforceapp.com/moving-to-heroku-bootstrap-font-awesome](http://blog.fieldforceapp.com/moving-to-heroku-bootstrap-font-awesome)

我担心我的样式表目录（在 app/assets/stylesheets 中）可能与其他 css 冲突：

```
/*
* This is a manifest file that'll be compiled into application.css, which will include all the files
* listed below.
*
* Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
* or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
*
* You're free to add application-wide styles to this file and they'll appear at the top of the
* compiled file, but it's generally better to create a new file per style scope.
*

*= require select2
*= require bootstrap-timepicker
*= require 'font-awesome'
*= require_tree .
*= require zpp.css
*/ 
```

我需要一个单独的字体目录吗？我正在运行 rake assets:precompile 并看到字体 .css 文件移动到我的公共目录中，但仍然不行。

希望得到一些关于这个 b/c 的帮助，我已经挠头太久了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:45:41.830

我会确保css文件正确指向字体文件..
至于“字母字体”，字体真棒没有单独的字母数字字符字体，所以如果你的默认字体是新罗马时代，那就是你会的看..

# pandas - 在 Pandas 时间序列对象上居中移动平均线

> ID：13557547
> 
> 赞同：2
> 
> 时间：2012-11-26T01:34:40.230
> 
> 标签：pandas

如果我使用[`cmov_mean`](http://pytseries.sourceforge.net/generated/scikits.timeseries.lib.moving_funcs.cmov_mean.html#scikits.timeseries.lib.moving_funcs.cmov_mean)in `scikits.timeseries`，当我在 pandas 中“重新采样”时应该使用什么？

当我将我的每日平均值“重新采样”为每月然后绘制两者时，我注意到一个很大的时间偏移。*“开始”或“结束”有一个“约定”设置，但我没有看到“中间”设置。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:13:43.027

请参阅似乎回答了问题的“Wouter Overmeire”评论。

“您可以使用“loffset”参数来调整重新采样的时间标签。http: [//pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.resample.html](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.resample.html) “

（我在这里发帖是为了帮助清理未回答的问题。）

# ruby-on-rails - 如何在 Rails 控制台中包含 Draper 装饰器？

> ID：13557550
> 
> 赞同：0
> 
> 时间：2012-11-26T01:34:58.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, decorator, draper

我想在 Rails 控制台（https://github.com/drapergem/draper 和[http://railscasts.com/episodes/286-draper](http://railscasts.com/episodes/286-draper)）中查看我的一些 Draper 装饰器的输出。为此，我正在寻找一种包含装饰器及其方法的方法，类似于我们使用应用程序助手的方法：

```
 include ActionView::ApplicationHelper 
```

draper 装饰器继承自 ApplicationDecorator，ApplicationDecorator 继承自 Draper::Base

```
 class ApplicationDecorator < Draper::Base
 end

 class MaterialDecorator < ApplicationDecorator
    decorates :material
    #methods to decorate your material..
 end 
```

我已经尝试过`include Draper::Base::MaterialDecorator`,`include ApplicationDecorator::MaterialDecorator`和其他一些类似的变体，但没有运气。

如何在 rails 控制台中包含装饰器，例如上面的 Material Decorator？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:55:45.940

所以，事实证明（除非有人可以证明）这不是您在 rails 控制台中测试 draper 装饰器输出的方式。

相反，您只需执行以下操作：

```
 material = Material.first
 material = MaterialDecorator.decorate(material)
 material.some_decorator_method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T07:53:46.403

添加`app/decorators`到 Rails 自动加载路径：

在`config/application.rb`：

```
config.autoload_paths << Rails.root.join('app/decorators') 
```

然后，应该自动加载该路径下的装饰器类，即使在`rails console`. 例子：

```
Material.first.decorate.some_decorator_method # => "good stuff" 
```

# javascript - if 语句中的多个条件：需要在检查其他条件之前验证 undefined

> ID：13557551
> 
> 赞同：1
> 
> 时间：2012-11-26T01:35:15.893
> 
> 标签：javascript, validation, if-statement, multiple-conditions

> **可能重复：**
> [Javascript 条件顺序评估](https://stackoverflow.com/questions/5891754/javascript-conditional-order-evaluation)

if 语句中的多个条件如何产生？

```
if( bacon && bacon == "crispy") {
   self.eat(bacon);
} 
```

如果`bacon`不存在，它还会尝试检查是否`bacon`“脆”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T01:37:03.267

不，它使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，所以如果评估 LHS 意味着它不需要评估 RHS，它就不会。

这在 JavaScript 中经常被利用...

```
foo = foo || "bar"; 
```

如果`foo`为*真*（LHS），则该条件已知`true`并且`foo`将被赋予其值（这些条件返回最后评估的表达式）。

但是，如果`foo`是*falsy*，它将评估 RHS 表达式，然后将该结果分配给`foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:37:29.893

&& 运算符是 JavaScript 中的短路运算符，如果第一个条件为假，它将阻止对语句的其余部分进行评估。

# python - 如何在 csv 中写入/读取熊猫系列？

> ID：13557559
> 
> 赞同：19
> 
> 时间：2012-11-26T01:36:13.847
> 
> 标签：python, pandas

我无法弄清楚如何正确写入/读取系列...以下（以及它的许多变体）导致读取系列与书面系列不同...请注意，该系列被读入 DataFrame 而不是比一个系列。

```
In [55]: s = pd.Series({'a': 1, 'b': 2})

In [56]: s
Out[56]: 
a    1
b    2

In [57]: s.to_csv('/tmp/s.csv')

In [58]: !cat /tmp/s.csv
a,1
b,2

In [59]: pd.read_csv('/tmp/s.csv')
Out[59]: 
   a  1
0  b  2 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-26T15:24:59.773

```
In [3]: s.to_csv('/home/wesm/tmp/sfoo.csv')

In [4]: Series.from_csv('/home/wesm/tmp/sfoo.csv')
Out[4]: 
a    1
b    2 
```

您也可以传递`header=None, index_col=0, squeeze=True`给`read_csv`类似于 Rutger Kassies 建议的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T08:02:47.407

CSV 不包含有关您的熊猫系列结构的任何信息。指定一些额外的参数可能会有所帮助。通过以下方式可以正常恢复数据：

```
pd.read_csv('s.csv', index_col=0, header=None) 
```

但这会为其添加默认列和索引名称。如果您只想保存您的 Series/DF 以供以后使用，最好使用 .save() 和 pd.load() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-12T15:13:39.450

将 pandas 对象保存到文件中，然后从文件中重新创建该对象，您可以使用：

`s.to_pickle('filename')`

和

`s = pd.read_pickle('filename')`

方法。

以下是详细信息：[https ://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html)

# java - 1.2 的 Java 方程解析

> ID：13557560
> 
> 赞同：0
> 
> 时间：2012-11-26T01:36:14.860
> 
> 标签：java, parsing, equation-solving

出于实现特定的原因，我必须使用 Java 1.2。我试图解析一个`String`只有数字的对象（我预先替换变量以抽象该步骤）和运算符（PEDMAS）。我发现很多库都可以很好地做到这一点，但不幸的是，没有与 Java 1.2 兼容的库（即使摆弄，它们都依赖于泛型之类的东西）。显然我有能力自己制作这个，但我当然更愿意不重新制作轮子。是否有任何我还没有找到的库可以为我做到这一点？谢谢。

（要求：二元运算符和括号）

编辑：根据要求，输入和输出的一些示例：

*   “(10 / 5) + 4.5 - (8)”会给你 -1.5
*   "(1/3) * 4" 会给你 1.3333333...
*   “5^3 + 4 * 2”会给你 133
*   “-10 + 5”会给你-5

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:17:41.890

您可以编写自己的[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)。这个 Java[实现](https://sites.google.com/site/drjohnbmatthews/enumerated-functions)使用`StreamTokenizer`，从 1.0 开始可用，但是您必须用`int`常量替换`enum`标记并忽略`tokenIs(Symbol.WORD)`函数标识符。

# java - 关于 ImageIcons 的方法不起作用

> ID：13557561
> 
> 赞同：5
> 
> 时间：2012-11-26T01:36:16.793
> 
> 标签：java, swing, actionlistener, imageicon

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class Cards extends JFrame {

private GridLayout grid1;

    JButton []bt=new JButton[52];

    ImageIcon tail=new ImageIcon(getClass().getResource("b1fv.png"));

    ImageIcon ori;

    public Cards(){
        grid1=new GridLayout(7,9,2,2);
        setLayout(grid1);
        for(int i=0;i<bt.length;i++){
            ImageIcon c=new ImageIcon(getClass().getResource(i+1+".png"));
            bt[i]=new JButton(c);
            bt[i].addActionListener(new RatingMouseListener(i));
            add( bt[i]);
        }
    }

    public static void main(String[] args){
        Cards frame=new Cards();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(1400,700);
        frame.setVisible(true);
    }

    private class RatingMouseListener implements ActionListener {
        private  int index=0;

        public RatingMouseListener(int index) {
            this.index = index;

        }

        public void actionPerformed(ActionEvent e) {
              System.out.println("Mouse entered for rating " + index);
            ori=new ImageIcon(getClass().getResource(index+1+".png"));

            if (bt[index].getIcon()==ori)
                bt[index].setIcon(tail);
             else
                bt[index].setIcon(ori);

        }

    }

} 
```

当我运行它时，我希望 ori 和 tail 应该交换。但他们没有。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:39:22.980

这最好通过[描述](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/ImageIcon.html#getDescription%28%29)标签来完成。

基本上，将描述设置为如下图像，如果它们具有相同的描述，则交换它们。

```
ori.setDescription("ori");
tail.setDescription("tail");

if ("ori".equals((ImageIcon)bt[index].getIcon()).getDescription())
// The rest is how you had it. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T03:27:06.580

我猜你想要点击时翻转的扑克牌（但我不确定）。同样，我建议您在程序开始时创建一次 ImageIcons。然后，您可以使用 equal(...) 方法或什至在这种情况下使用运算符轻松比较一个图标是否与另一个图标相同`==`。例如，请查看并运行此代码以获取我的意思的示例：

```
import java.awt.GridLayout;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.*;

public class CardsDeck {
   public static final String RANKS = "a23456789tjqk";
   public static final String SUITS = "cdhs";
   public static final String CARDS_IMG_PATH = "http://math.hws.edu/javanotes/source/cards.png";
   private static final int BACK_RANK = 2;
   private static final int BACK_SUIT = SUITS.length();
   private static final String ICON = "icon";

   private JPanel panel = new JPanel();
   private List<ImageIcon> iconList = new ArrayList<ImageIcon>();
   private ImageIcon cardBack;

   public CardsDeck() {
      try {
         URL imgUrl = new URL(CARDS_IMG_PATH);
         BufferedImage img = ImageIO.read(imgUrl);

         double cardWidth = (double) img.getWidth() / RANKS.length();
         double cardHeight = (double) img.getHeight() / (SUITS.length() + 1);
         int w = (int) cardWidth;
         int h = (int) cardHeight;
         for (int rank = 0; rank < RANKS.length(); rank++) {
            for (int suit = 0; suit < SUITS.length(); suit++) {
               int x = (int) (rank * cardWidth);
               int y = (int) (suit * cardHeight);
               BufferedImage subImg = img.getSubimage(x, y, w, h);
               ImageIcon icon = new ImageIcon(subImg);
               iconList.add(icon);
            }
         }

         int x = (int) (BACK_RANK * cardWidth);
         int y = (int) (BACK_SUIT * cardHeight);
         BufferedImage subImg = img.getSubimage(x, y, w, h);
         cardBack = new ImageIcon(subImg);

         int hgap = 5;
         int vgap = hgap;
         panel.setLayout(new GridLayout(SUITS.length(), RANKS.length(), hgap, vgap));
         panel.setBorder(BorderFactory.createEmptyBorder(vgap, hgap, vgap, hgap));
         MouseListener mouseListener = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
               JLabel label = (JLabel) e.getSource();
               Icon currentIcon = label.getIcon();
               if (currentIcon.equals(cardBack)) {
                  Icon icon = (Icon) label.getClientProperty(ICON);
                  label.setIcon(icon);
               } else {
                  label.setIcon(cardBack);
               }
            }
         };
         Collections.shuffle(iconList);
         for (int i = 0; i < iconList.size(); i++) {
            JLabel label = new JLabel(cardBack);
            label.putClientProperty(ICON, iconList.get(i));
            label.addMouseListener(mouseListener);
            panel.add(label);
         }
      } catch (MalformedURLException e) {
         e.printStackTrace();
         System.exit(-1);
      } catch (IOException e) {
         e.printStackTrace();
         System.exit(-1);
      }
   }

   private JComponent getPanel() {
      return panel;
   }

   private static void createAndShowGui() {
      CardsDeck cardsDeck = new CardsDeck();

      JFrame frame = new JFrame("CardsDeck");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(cardsDeck.getPanel());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

如果运行，它将显示一个 13 x 4 的卡片阵列，可以通过单击它们来翻转它们：

![在此处输入图像描述](../Images/cf327c0ecd2351b6b218f7508f7e73b1.png)

# google-apps-script - 用于拆分一个单元格而不覆盖 Google Docs 电子表格中的下一个单元格的功能

> ID：13557566
> 
> 赞同：0
> 
> 时间：2012-11-26T01:36:33.830
> 
> 标签：google-apps-script

我有一个谷歌文档电子表格，其中包含如下行：

```
 |                | things; separated;by;semicolons;with;line;breaks |
something | something else | A;B;C;D;E;F;G                                    | one more thing
          |                | K;L;M;N;O;P;Q                                    |
----------------------------------------------------------------------------------------------- 
```

我想用换行符分割第三列，将每一列放在整行的一个副本中，覆盖第三个单元格，然后用分号分割那个单元格。最后，前一行应转换为如下内容：

```
something|something else|things|separated|by|semicolons|with|line|breaks| one more thing
-----------------------------------------------------------------------------------------
something|something else|   A  |     B   | C|     D    |  E |  F |  G   | one more thing
-----------------------------------------------------------------------------------------
something|something else|   K  |     L   | M|     N    |  O |  P |  Q   | one more thing
----------------------------------------------------------------------------------------- 
```

我尝试了这个功能，但有些单元格重叠并覆盖了其他单元格：

```
function splitColumnAndRepeatRows(anArray, splitColumnIndex) {
  var output = [];
  for (i in anArray){ // for each row
    var splitArray = anArray[i][splitColumnIndex].split(/\n/g); // split values by line breaks
    for (j in splitArray){ // for each split array
      var row = anArray[i].slice(0); // copies the entire line
      row.splice(2,1,splitArray[j].split(";")); // inserts the splited values overwriting the third cell
      output.push(row);
    }
  }
  return output;
} 
```

所以 splice 函数不会在单元格 2 和 4 之间插入拆分值。拆分值从第三个单元格开始放置，覆盖第四个单元格（在示例中为“另一件事”），如下所示：

```
something|something else|things|separated|by|semicolons|with|line|breaks
------------------------------------------------------------------------ 
```

有人能指出我的错误在哪里吗？我希望我解释得足够好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:29:29.630

您的代码有两个问题。一种是每次运行 splice 函数时都替换一个单元格。由于您多次执行此操作，因此您也覆盖了最后一个“另一件事”单元格。相反，仅在开始时更换一次。

另一个问题，虽然我不确定你的意图是什么，但我认为你不想为 splice 函数提供一个数组，因为这会在你的行数组中创建一个内部数组。相反，循环遍历数组值并为每个值调用 splice。

这个内部循环代码应该可以解决您的问题：

```
for (j in splitArray){ // for each split array
  var row = anArray[i].slice(0); // copies the entire line
  var split = splitArray[j].split(";");
  var pos = 0;
  row.splice(2,1); // deletes the third cell
  for (var k in split) {
    row.splice(2+pos,0,split[k]); // inserts the splited values starting at cell 2
    pos++;
  }
  output.push(row);
} 
```

# javascript - 在 wordpress 中为 paypal 按钮验证复选框

> ID：13557580
> 
> 赞同：1
> 
> 时间：2012-11-26T01:39:02.330
> 
> 标签：javascript, html, paypal

我正在尝试获取一个简单的条款和条件复选框以在允许用户单击贝宝按钮之前进行验证。我目前有这个代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"> 

    <!-- Identify your business so that you can collect the payments. --> 
    <input type="hidden" name="business" value="my email"> 

    <!-- Specify a Buy Now button. --> 
    <input type="hidden" name="cmd" value="_xclick"> 

    <!-- Specify details about the item that buyers will purchase. --> 
    <input type="hidden" name="item_name" value="15-minutes"> 
    <input type="hidden" name="amount" value="15.00">  
    <input type="hidden" name="currency_code" value="USD"> 

    <!-- Display the payment button. --> 
    <input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif"alt="stuff"> 
    <img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" > 
</form> 
```

任何帮助或指导都会非常有帮助。

我们其他人的节日，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:07:25.207

像这样的小 jQuery 应该可以解决问题：http: [//jsfiddle.net/mVK4r/](http://jsfiddle.net/mVK4r/)

我添加了一个条款和条件复选框，然后测试它是否被选中。如果是，则该按钮的行为正常。如果不是，则会出现提示用户接受条款的警报，并且该按钮将不起作用。

希望这有帮助，祝你好运！

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"> 

<!-- Terms and Conditions check box -->
<p><input type="checkbox" id="terms"> Yes, I accept the terms and conditions</p>
<p>&nbsp;</p>

<!-- Identify your business so that you can collect the payments. --> 
<input type="hidden" name="business" value="my email"> 

<!-- Specify a Buy Now button. --> 
<input type="hidden" name="cmd" value="_xclick"> 

<!-- Specify details about the item that buyers will purchase. --> 
<input type="hidden" name="item_name" value="15-minutes"> 
<input type="hidden" name="amount" value="15.00">  
<input type="hidden" name="currency_code" value="USD"> 

<!-- Display the payment button. --> 
<input type="image" id="button" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif" alt="stuff"> 
<img alt="" border="0" width="1" height="1" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" > 
</form>  ​

<script type="text/javascript">
$(function(){
    $('#button').click(function(e){
        if ($('#terms').prop('checked') == false) {
            alert('Please accept the terms and conditions');
            e.preventDefault();  
    }
    else {
       // Allow the button the do its thing
        }
    });
});​
</script> 
```

# matlab - 设置 Matlab 相机视图（主要是缩放）

> ID：13557583
> 
> 赞同：4
> 
> 时间：2012-11-26T01:39:31.247
> 
> 标签：matlab, camera, movie

所以我在matlab中有一个制作电影的程序。影片由如下所示的帧组成：

现在通过执行以下操作设置相机角度：

```
campos(1.0e+002 *[1.317650052908556 -1.507231720261665 0.834498724031213]); 
```

这些数字通过使用相机工具栏旋转到正确的视图然后使用命令来使用：

```
 get(gca, 'CameraPosition') 
```

现在我想设置相机的变焦。我怎样才能做到这一点？

**注意：**缩放到正确的位置并执行上述`get`命令不会返回任何差异。所有缩放位置都相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:44:09.533

您可以使用该属性`CameraViewAngle`来控制相机的缩放，例如

```
set(gca, 'CameraViewAngle', 0.5) 
```

设置角度或

```
get(gca, 'CameraViewAngle') 
```

查询当前视角。

# c# - 我需要帮助在 .txt 文件中存储和查找数据

> ID：13557584
> 
> 赞同：0
> 
> 时间：2012-11-26T01:39:35.323
> 
> 标签：c#, c#-4.0

我正在做一个我在网站上找到的项目，该网站给出了任务，但没有提供太多关于如何做的信息。

无论如何，我基本上需要让程序创建一个 .txt 文件并在文件中存储学生的 ULN（唯一学习者编号）和密码。

完成后，我需要程序搜索某些 ULN 和密码，以便用户可以“登录”（稍后会在 Main 类中提示他们输入 ULN 和密码）。如果它不在 .txt 文件中，我需要输出一条消息，基本上说错误。

我遇到的问题是：

1.  我应该存储新 ULN 和密码以便它们链接的方式（因此密码仅适用于该 ULN）。
2.  如何让程序通过 .txt 文件搜索 ULN 及其 LINKED 密码。
3.  如果找不到 ULN 和密码，如何告诉用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:12:06.837

如果只有几条记录要存储，您可以创建具有适当列的 DataTable 并将其序列化为 xml 文件：

[http://msdn.microsoft.com/en-us/library/58a18dwa.aspx](http://msdn.microsoft.com/en-us/library/58a18dwa.aspx)

该示例显示了一个 DataSet，但您可以只使用一个 DataTable 来完成。

# c - 用串口编程读取多个传感器 C

> ID：13557587
> 
> 赞同：0
> 
> 时间：2012-11-26T01:40:00.147
> 
> 标签：c, input, serial-port

我想使用 C 编程语言和 GCC 编译器通过串行端口将数据从 Arduino 微控制器读取到运行 Mac OS X 的 PC。

我的数据格式是`A xxxx xxxx xxxx xxxx xxxx xxxx B`，A是数据的开头，B是数据的结尾，传感器之间有4个空格（“”）。xxxx 数据在 0-1023 之间变化。

我正在尝试这段代码：

```
#include<stdio.h>   /* Standard input/output definitions */
#include<stdlib.h>
#include<string.h>  /* String function definitions */
#include<unistd.h>  /* UNIX standard function definitions */
#include<fcntl.h>   /* File control definitions */
#include<errno.h>   /* Error number definitions */
#include<termios.h> /* POSIX terminal control definitions */
#include<string.h> 
#include<unistd.h>

char *buf;
int fd; /* File descriptor for the port */
int i,n;
char *sensor1, *sensor2, *sensor3, *sensor4, *sensor5, *sensor6,*header, *footer;

int open_port(void)
{
    fd = open("/dev/tty.usbmodem1d11", O_RDWR | O_NOCTTY | O_NDELAY);      

if (fd == -1)     {
    perror("cannot open");
}
else 
    fcntl(fd, F_SETFL, 0);
struct termios options;
tcgetattr(fd, &options);
cfsetispeed(&options, B9600);
cfsetospeed(&options, B9600);
options.c_cflag |= (CLOCAL | CREAD);
tcsetattr(fd, TCSANOW, &options);
options.c_cflag &= ~CSIZE; 
options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;
//    options.c_cflag |= (IXON | IXOFF | IXANY); // xon & xoff on
return (fd);
}

int main(int argc, char**argv) {
    buf=malloc(4095);
    open_port();
    free(buf);
    while(1){ 
        read(fd,buf,90);          
         printf("%s\n",buf);  
    }
    close(fd);
} 
```

但是结果并不一致，我的意思是数据的长度不一样：

1023 1023 1023 1023 1023 乙

一种

10233 023 1023 1023 乙

1023 1023 1023 1023 1023 乙

3 023 1023 1023 乙

1023 1023 1023 1023 1023 乙

一种

10233 023 1023 1023 乙

1023 1023 1023 1023 1023 万能

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:25:48.503

检查您从每个读取调用中得到的结果：

```
int nbytes;

while(1) { 
    nbytes = read(fd,buf,90);
    if( nbytes > 0 ) {
        buf[nbytes] = 0;
        printf( "Read %2d bytes: '%s'\n", nbytes, buf );
    }
} 
```

您需要将结果收集到缓冲区中，并根据设备的格式规范对其进行解析。你不能只是假设每次`read`通话都会给你一个完整的记录。

要收集结果，您需要跟踪您已经阅读的内容 - 像这样......

```
int nbytes, nparsed;
int npos = 0;

while(1) { 
    nbytes = read(fd, &buf[npos], 90-npos);
    if( nbytes > 0 )
    {
        npos += nbytes;

        // Parse a line.  If successful, move remainder of line to
        // start of buffer and continue...
        nparsed = parse_line(buf, npos);
        if( nparsed > 0 ) {
            memmove( buf, &buf[npos], npos-nparsed );
            npos -= nparsed;
        }
    }
} 
```

取决于您的应用程序。它可能比这更简单。

# c# - 如何在 ListView 元素中显示图像？

> ID：13557590
> 
> 赞同：2
> 
> 时间：2012-11-26T01:40:44.327
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我想在每个 ListView 元素之后显示图像。但当然其他图像任何元素。所以，image_1.png 用于第一个 ListView 项，image_2.png 用于第二个 ListView 项等。我想我应该做绑定。我该如何实现？

```
<ListView x:Name="listView">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <!-- IMAGE IS HERE -->
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
</ListView> 
```

编辑（1）：

我尝试了一切，但它不起作用。我的代码现在：

型号类：

```
public ImageSource image { get; set; } 
```

页面类：

```
BitmapImage bi = new 
bi.UriSource = new Uri("ms-appx:///Logos/x.png");
c.image = bi; 
```

XAML 文件：

```
<Image Source="{Binding Source=image}"></Image> 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:14:18.017

您可以像这样绑定到集合中的项目：

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <ListView ItemsSource="{Binding ElementName=UI,Path=YourCollection}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Width="200" Height="200">
                        <Image Source="{Binding Image}"/>
                        <TextBlock Text="{Binding Title}"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
 </Window> 
```

假设类/列表

```
 /// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private ObservableCollection<MyListItem> _yourCollection = new ObservableCollection<MyListItem>();

    public MainWindow()
    {
        InitializeComponent();
        YourCollection.Add(new MyListItem { Title = "Item 1", Image = new BitmapImage(new Uri("C:\\Users\\Dev\\Pictures\\Picture1.PNG", UriKind.RelativeOrAbsolute)) });
        YourCollection.Add(new MyListItem { Title = "Item 2", Image = new BitmapImage(new Uri("C:\\Users\\Dev\\Pictures\\Picture2.PNG", UriKind.RelativeOrAbsolute)) });
    }

    public ObservableCollection<MyListItem> YourCollection
    {
        get { return _yourCollection; }
        set { _yourCollection = value; }
    }
}

public class MyListItem
{
    public string Title { get; set; }
    public BitmapImage Image { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:59:34.177

我想我可以回答我自己的问题。我找到了解决方案

```
Image image = new Image();
image.Source = new BitmapImage(new Uri(@"ms-appx:/Assets/Logos/x.png"));

<Image Source="{Binding Path=image.Source.UriSource.AbsolutePath}" Width="55" Height="40"/> 
```

# c# - xna 模型未出现，需要建议

> ID：13557592
> 
> 赞同：1
> 
> 时间：2012-11-26T01:41:03.343
> 
> 标签：c#, xna

我有什么：我的船相机类的游戏类模型类

当我按 F5 时，我的游戏打开了，它显示为蓝色，但我的模型没有出现，有人对为什么会发生这种情况有任何建议吗？

如果有人能够提供帮助，我将不胜感激。

* * *

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using Microsoft.Xna.Framework;
    using Microsoft.Xna.Framework.Audio;
    using Microsoft.Xna.Framework.Content;
    using Microsoft.Xna.Framework.GamerServices;
    using Microsoft.Xna.Framework.Graphics;
    using Microsoft.Xna.Framework.Input;
    using Microsoft.Xna.Framework.Media;

    namespace test1
    {
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;

    //Visual components
    Ship ship = new Ship();
    Camera _camera;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

    }

   protected override void Initialize()
    {
        this.graphics.ToggleFullScreen(); 
        this._camera = new Camera(graphics.GraphicsDevice.Viewport);
        this._camera.LookAt = new Vector3(0.0f, 0.0f, -1.0f);

        base.Initialize();
    }

    protected override void LoadContent()
    {
        ship.Model = Content.Load<Model>("Models/p1_wedge");
        ship.Transforms = _camera.SetupEffectDefaults(ship.Model);

    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {

        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed ||
            Keyboard.GetState().IsKeyDown(Keys.Escape))
            this.Exit();

        // Get some input.
        UpdateInput();

        base.Update(gameTime);
    }

    protected void UpdateInput()
    {
        // Get the game pad state.
        GamePadState currentState = GamePad.GetState(PlayerIndex.One);
        KeyboardState currentKeyState = Keyboard.GetState();

            ship.Update(currentState);

        }

    protected override void Draw(GameTime gameTime)
    {
        graphics.GraphicsDevice.Clear(Color.CornflowerBlue);

        //camera
        this._camera.Update();

        _camera.LookAt = ship.Position;

        Matrix shipTransformMatrix = ship.RotationMatrix
                * Matrix.CreateTranslation(ship.Position);
        DrawModel(ship.Model, shipTransformMatrix, ship.Transforms);
        base.Draw(gameTime);

    }

    public static void DrawModel(Model model, Matrix modelTransform,
Matrix[] absoluteBoneTransforms)
    {
        //Draw the model, a model can have multiple meshes, so loop

        foreach (ModelMesh mesh in model.Meshes)
        {
            //This is where the mesh orientation is set
            foreach (BasicEffect effect in mesh.Effects)
            {

                effect.World =
                    absoluteBoneTransforms[mesh.ParentBone.Index] *
                    modelTransform;
            }

            mesh.Draw();

        }
    }

}
    } 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace test1
{
class Ship
{
    public Model Model;
    public Matrix[] Transforms;

    //Position of the model in world space
    public Vector3 Position = Vector3.Zero;

    //Velocity of the model, applied each frame to the model's position
    public Vector3 Velocity = Vector3.Zero;
    private const float VelocityScale = 5.0f;

    public Matrix RotationMatrix =
 Matrix.CreateRotationX(MathHelper.PiOver2);

    private float rotation;

    public float Rotation
    {
        get { return rotation; }
        set
        {
            float newVal = value;
            while (newVal >= MathHelper.TwoPi)
            {
                newVal -= MathHelper.TwoPi;
            }
            while (newVal < 0)
            {
                newVal += MathHelper.TwoPi;
            }

            if (rotation != value)
            {
                rotation = value;
                RotationMatrix =
                    Matrix.CreateRotationX(MathHelper.PiOver2) *
                    Matrix.CreateRotationZ(rotation);
            }

        }
    }

    public void Update(GamePadState controllerState)
    {

        KeyboardState currentKeyState = Keyboard.GetState();
        if (currentKeyState.IsKeyDown(Keys.A))
            Rotation += 0.10f;
        else
        // Rotate the model using the left thumbstick, and scale it down.
        Rotation -= controllerState.ThumbSticks.Left.X * 0.10f;

        if (currentKeyState.IsKeyDown(Keys.D))
            Rotation -= 0.10f;

        if (currentKeyState.IsKeyDown(Keys.W))
            Velocity += RotationMatrix.Forward * VelocityScale;
        else
        // Finally, add this vector to our velocity.
        Velocity += RotationMatrix.Forward * VelocityScale *
         controllerState.Triggers.Right;

        // In case you get lost, press A to warp back to the center.
        if  (currentKeyState.IsKeyDown(Keys.Enter))
        {
            Position = Vector3.Zero;
            Velocity = Vector3.Zero;
            Rotation = 0.0f;

        }

        Position += Velocity;
        Velocity *= 0.95f;
    }

}
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Media;
using Microsoft.Xna.Framework.Graphics;

namespace test1
{
public class Camera
{

    private Vector3 _position;
    private Vector3 _lookAt;
    private Matrix _viewMatrix;
    private Matrix _projectionMatrix;
    private float _aspectRatio;

public Camera(Viewport viewport)
{
    this._aspectRatio = ((float)viewport.Width) / ((float)viewport.Height);
    this._projectionMatrix = Matrix.CreatePerspectiveFieldOfView(
                                MathHelper.ToRadians(40.0f),
                                this._aspectRatio,
                                20000.0f,
                                30000.0f);
}
public Vector3 Position
{
    get { return this._position; }
    set { this._position = value; }
}
public Vector3 LookAt
{
    get { return this._lookAt; }
    set { this._lookAt = value; }
}
public Matrix ViewMatrix
{
    get { return this._viewMatrix; }
}
public Matrix ProjectionMatrix
{
    get { return this._projectionMatrix; }
}
public void Update()
{
    this._viewMatrix = 
        Matrix.CreateLookAt(this._position, this._lookAt, Vector3.Up);

}

public Matrix[] SetupEffectDefaults(Model myModel)
{
    Matrix[] absoluteTransforms = new Matrix[myModel.Bones.Count];
    myModel.CopyAbsoluteBoneTransformsTo(absoluteTransforms);

    foreach (ModelMesh mesh in myModel.Meshes)
    {
        foreach (BasicEffect effect in mesh.Effects)
        {
            effect.EnableDefaultLighting();
            effect.Projection = ProjectionMatrix;
            effect.View = ViewMatrix;
        }
    }
    return absoluteTransforms;
}

}
} 
```

* * *

**编辑**

```
public static void DrawModel(Model model, Matrix modelTransform, 
Matrix[] absoluteBoneTransforms)
{
//Draw the model, a model can have multiple meshes, so loop
foreach (ModelMesh mesh in model.Meshes)
{
    //This is where the mesh orientation is set
    foreach (BasicEffect effect in mesh.Effects)
    {
        effect.World = 
            absoluteBoneTransforms[mesh.ParentBone.Index] * 
            modelTransform;
        effect.Projection = _camera.ProjectionMatrix;
        effect.View = _camera.ViewMatrix; 
    }

    //Draw the mesh, will use the effects set above.
    mesh.Draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:32:10.773

我认为您的代码有两个问题：

**Look At**您似乎没有更新相机的 Look At 以指向您的宇宙飞船，要么通过给它一个引用来让您的相机“跟踪”宇宙飞船，并在`Update`更新时查看位置或手动更新外观从你的位置`Game1`。

**视图/投影矩阵**即使您的相机具有视图矩阵和投影矩阵，您也不会在`DrawModel`. 分配世界时，请考虑添加以下两行

```
effect.Projection = _camera.ProjectionMatrix;
effect.View = _camera.ViewMatrix; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:02:10.603

您的代码中可能存在几个问题，使其无法按预期工作。两个突然出现在我面前的是 1.) 你从来没有设置相机位置，所以它默认为 0,0,0，它与船模型并置。因此，您的相机实际上位于模型内部，并且如果 2 出现在其视图中的任何三角形都将被剔除为背面三角形。）由于您的近平面设置为 20000，它还没有被截断截体。

# python - 可以指定用于写入的 csv 分隔符吗？

> ID：13557594
> 
> 赞同：0
> 
> 时间：2012-11-26T01:41:43.767
> 
> 标签：python

是否可以指定 csv 模块在写入文件时将使用的分隔符？

例如，使用 ';' 代替 ',' 或者其他的东西？

我知道您可以通过设置更改为制表符分隔`dialect='excel-tab`，但不确定是否可以自由选择分隔符。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T01:43:39.607

我相信你可以设置[`delimiter`](http://docs.python.org/2/library/csv.html#dialects-and-formatting-parameters)：

```
writer = csv.writer(csvfile,delimiter=';') 
```

在文档中也有一个例子[`csv.writer`](http://docs.python.org/2/library/csv.html#csv.writer)

# android - 如何为我的 android 应用使用 Impact 等外部字体？

> ID：13557595
> 
> 赞同：0
> 
> 时间：2012-11-26T01:41:44.310
> 
> 标签：android, fonts, assets, typeface

我想在我的 android 应用程序上使用外部字体 Impact。目前，让我使用我的字体的代码如下所示：

```
 Paint textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setTextSize(FONT_SIZE);
    textPaint.setColor(0xFFFFFFFF);
    Log.i(TAG, "- Paint: " + textPaint);

    Typeface face = textPaint.getTypeface();
    Log.i(TAG, "- default typeface: " + face);

    face = Typeface.DEFAULT_BOLD;
    Log.i(TAG, "- new face: " + face);
    textPaint.setTypeface(face); 
```

但这会导致我要使用的字体的通用版本不好。对于那些不熟悉 Impact 字体的人来说，它是一种可以让你制作 meme 的字体。有谁知道我应该怎么做才能使用 Impact 字体而不是 DEFAULT_BOLD？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:47:50.383

用于`canvas`绘制文字，

```
Typeface  mFace = Typeface.createFromAsset(getContext().getAssets(),"fonts/samplefont.ttf");
Paint mPaint = new Paint ();
mPaint.setTypeface(mFace);
canvas.drawText("Default", 10, 100, mPaint); 
```

`TextView`可以使用`setTypeface`方法来做到这一点；

# javascript - 如何将http响应解析为字符串？

> ID：13557597
> 
> 赞同：-6
> 
> 时间：2012-11-26T01:41:51.210
> 
> 标签：javascript

我是 Java 和 JavaScript 的新手，我正在寻找一种方法来获取 HTTPResponse，解析`.responseText`使用该`.indexOf`方法以获取我需要的属性，然后在我创建的表格行的单元格中显示这个值html页面。有没有办法每次我得到这个单元格时更换这个单元格`httpresponse`？

非常感谢。

```
var xHRObject = new XMLHttpRequest();
var url = "http://meteovarkiza.gr/";
xHRObject.open("GET", url, true);
xHRObject.send();
xHRObject.onreadystatechange = function () {
if (xHRObject.readyState==4 && xHRObject.status==200) {
    var response = xHRObject.responseText;
    var startIndex = response.indexOf("Temperature");
    startIndex += 70;
    var subResponse = response.slice(startIndex, startIndex + 4);                
            alert(subResponse);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:52:41.230

> *“我尝试创建一个采用该值的对象，但之后，我无法在 html 表中显示它。”*

您的问题不是很清楚，但您似乎是在说您已成功从响应文本中获取所需的特定值并放入`subResponse`变量中，但您不知道如何将该值放入特定元素你的页面。

如果是这样，最简单的方法是给该元素一个`id`：

```
<td id="resultCell"></td> 
```

然后在您的 JS 中执行此操作：

```
document.getElementById("resultCell").innerHTML = subResponse; 
```

在您的问题标题中，您说：

> *“如何将 http 响应解析为字符串？”*

......但你似乎已经想通了。如果您无法控制响应格式，那么我猜想结合正则表达式技巧和/或`.indexOf()`和`.slice()`（或者[`.substr()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)可能更好，因为在您的情况下您总是指定 4 个字符）是这样做的方法。

如果您可以设置响应的格式，则返回 JSON 字符串可能会更好，因为这样您就可以使用`JSON.parse()`来获取具有可直接访问属性的对象 - 不再搞乱字符串操作。

# c# - 实体框架将集合添加到模型未正确保存

> ID：13557601
> 
> 赞同：1
> 
> 时间：2012-11-26T01:42:40.337
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

也许是一个简单的问题，但我似乎无法弄清楚。将模型添加到数据库时将集合保存到模型不起作用。我有一个使用 asp.net MVC 和实体框架的站点。

型号：

```
public class Event
{
    public int Id { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public ICollection<EventRange> Ranges { get; set; }
}

public class EventRange
{
    public int Id { get; set; }

    public string RangeName { get; set; }
    public string RangeDescription { get; set; }

    public int Capacitiy { get; set; }
} 
```

控制器动作：

```
[HttpPost]
public ActionResult Create(Event model)
{
    ICollection<EventRange> eventRanges = new Collection<EventRange>();
    var range = new EventRange {RangeName = "testrange", RangeDescription = "test", Capacitiy = 5}

    eventRanges.Add(range);
    model.Ranges = eventRanges;

    db.Events.Add(model);
    db.SaveChanges();

    return View();
}

public ActionResult Events()
{
    return View(db.Events);
} 
```

在事件操作中设置断点并评估查询时，范围不会保存到事件中：

[代码截图](http://i.stack.imgur.com/pbdNG.png "代码截图")

请注意，EF 为 eventrange 模型创建的数据库确实保存了范围：

[英孚数据库截图](http://i.stack.imgur.com/wMfMc.png "英孚数据库截图")

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:30:41.957

如果将`Ranges`属性标记为`virtual`怎么办？

```
public virtual ICollection<EventRange> Ranges { get; set; } 
```

# css - 如何让一个文件兼容不同的浏览器？

> ID：13557602
> 
> 赞同：0
> 
> 时间：2012-11-26T01:42:44.760
> 
> 标签：css

我正在制作一个网站，当我在 Safari 中预览它时。结果正是我想要的。但是当我用firefox测试它时。

在我的页面中，我有一个在页面上对齐的元素，使用

左边距和顶部边距。当我在 Safari 中预览它时，效果很好。但是当我在Firefox中打开文件时。元素的 Margin-top 增加了几个像素。

我如何编码我的 css 文件，以便我可以为不同的浏览器拥有相同的页面。我曾尝试在网上寻找解决方案，但到目前为止，他们都没有帮助解决这个问题。

回复将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:44:12.830

正如 jsteinmann 所说，检查使用[http://validator.w3.org/](http://validator.w3.org/)以确保您的页面验证。这将需要一些时间来确定您是否是新手，但这是必不可少的步骤。

如果您在使用 FireFox 时遇到问题，那么当您在 IE 中查看时，您可能会死掉。收藏链接！[http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

你有很多东西要学，谷歌会提供帮助：[https ://www.google.com.au/search?q=introduction+to+cross+browser+testing&oq=introduction+to+cross+browser+testing&aqs=chrome.0.57 .5763&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8](https://www.google.com.au/search?q=introduction+to+cross+browser+testing&oq=introduction+to+cross+browser+testing&aqs=chrome.0.57.5763&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8)

将来，使用 stackoverflow 解决带有代码示例的特定问题。你会发现你很快就得到了具体的答案。

另外，不要忘记勾选您认为最有用的答案，并投票提高一些水平。这就是为什么人们花时间回答你的问题。

享受前方的漫长道路:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:45:04.840

明确指定所有四个边距和所有四个填充值。这将消除浏览器内置默认样式表的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:49:48.250

您发现布局不跨浏览器兼容的原因可能有多种，因此需要大量的标记和 css 信息才能确定如何帮助您编写 100% W3C 有效的 Web 代码页。

我建议您在布局中使用诸如 blueprint 或 960 之类的 css 框架，这样您就不会遇到这样的问题。如果您选择不使用框架，这是启动和维护项目以及学习如何创建布局的好方法。

另外，我建议首先在 chrome 和 firefox 中测试您的所有项目，然后是 safari，因为与 safari 相比，使用这两种浏览器的用户数量较多。我还要说，如果它在 chrome 中看起来不错，它在 safari 和 firefox 中可能看起来不错，但它总是值得测试。

# android - 如何从android中另一个类的SQLite数据库中删除数据？

> ID：13557604
> 
> 赞同：0
> 
> 时间：2012-11-26T01:43:25.753
> 
> 标签：android, android-sqlite

[这是我第一次接触 SQLite 数据库，我从http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)试用了这些代码

我的数据库处理程序中有这个

```
// Deleting single contact
public void deleteContact(Contact contact) {
SQLiteDatabase db = this.getWritableDatabase();
db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
        new String[] { String.valueOf(contact.getID()) });
db.close();} 
```

我希望**从另一个类中删除数据**（例如：当我单击另一个 java 类中的按钮时，它将从数据库中删除数据。）我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:00:14.460

我设法通过将它放在数据库处理程序中来解决它

```
public void delete()
{   SQLiteDatabase db = this.getWritableDatabase();
    db.delete(DATABASE_NAME, null, null);
} 
```

然后在我的 ResetActivity 类（不同的类）中调用它

```
public void reset()
{
DBHandler database = new DBHandler(this);

try {
    database.delete();

} catch (NullPointerException e) {
    // TODO Auto-generated catch block
    Log.d("DATABASE", "ERROR!");
    e.printStackTrace();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T08:10:38.970

不错...但`in delete()`应该添加，就像这样

```
public void delete()
    {   SQLiteDatabase db = this.getWritableDatabase();
    try {
        db.isOpen();           //should be added
    } catch (SQLException sqle) {
         Log.e("TAG", "Never ignore exception!!! " + sqle);
    } 
        db.delete(TABLE_Time, null, null);
        String Message = "Record is deleted: ";
    } 
```

# git - git branch -a 产生不一致的结果？

> ID：13557606
> 
> 赞同：2
> 
> 时间：2012-11-26T01:43:39.873
> 
> 标签：git

我的机器上有一个存储库 ins /opt/git/myrepo.git

然后我有两个工作目录：

/var/www/mysite.com /var/www/test.mysite.com

两者都是从 /opt/git/myrepo.git 克隆的

在 test.mysite.com 中，我创建了一个名为 myfirstbranch 的新分支，并将其推送到 repo：

```
git push origin myfirstbranch 
```

然后，如果我执行 git branch -a 我会看到：

```
* master
  myfirstbranch
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/myfirstbranch 
```

现在，如果我转到 mysite.com 并执行 git fetch 然后 git branch -a，这就是我所看到的：

```
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/myfirstbranch 
```

所以没关系。但是，如果我这样做：

```
git push origin :myfirstbranch 
```

从 mysite.com 然后转到 test.mysite.com 并执行 git fetch，然后 git branch -a 我仍然看到：

```
* master
  myfirstbranch
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/myfirstbranch 
```

为什么它仍然认为 remotes/origin/myfirstbranch 仍然存在？当我在 mysite.com 中执行 git branch -a 时，它*不*显示 remotes/origin/myfirstbranch

为什么有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:50:04.067

远程删除的分支不会在本地存储库中自动删除。你需要使用：

`git remote prune origin`

此外，`git remote show origin`将显示一个不错的远程分支列表，如果需要，带有“需要修剪”的注释。

# java - 通过 ScheduledExecutorService 定期运行 Callable

> ID：13557612
> 
> 赞同：9
> 
> 时间：2012-11-26T01:45:13.917
> 
> 标签：java, java.util.concurrent

我有一个`Callable<String>`. 我想通过定期运行它`ScheduledExecutorService.scheduleAtFixedRate()`，并获取`.call()`我的可调用对象调用返回的所有字符串的列表。由于`scheduleAtFixedRate`不需要 `Callable`（仅`Runnable`s），因此我需要推出一个`Runnable`包装 my的自定义`Callable`，类似于以下内容：

```
final Callable<String> myCallable = ....;
final ConcurrentLinkedQueue<String> results 
  = new ConcurrentLinkedQueue<String>();

Runnable r = new Runnable() {
  @Override public void run() {
    try {
      results.add(myCallable.call());
    } catch (Exception e) { 
      results.add(null);  // Assuming I want to know that an invocation failed
    }
  }
};

ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
executor.scheduleAtFixedRate(r, 0, 1, TimeUnit.SECONDS); 
```

自然，我想避免推出我自己的自定义东西（尤其是在多线程代码中），所以我想知道有一个 JDK 类可以进行这种聚合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:06:12.773

您在上面所做的是将您的 Callable 实现视为另一个普通类。您没有将可调用对象提交给 ThreadPool 执行程序。调用 Callable.call() 不使用 ThreadPoolExecutor。

您需要将您的任务（Runnable/Callable/ForkJoinTask 等）提交到 ThreadPool 以利用线程池。您可以使用 Futures 来收集执行后的结果。

ForkJoinPool 是一个选项，您可以尝试这是 JDK 7 的一部分。使用 ForkJoinTask 分叉任务并加入它们 为什么不使用 Futures？它们正是用于了解 Task 的状态及其结果。

你看过这个吗：[Using Callable to Return Results From Runnables](https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6)

# python - 如何从元组列表中创建列表？

> ID：13557613
> 
> 赞同：2
> 
> 时间：2012-11-26T01:45:14.363
> 
> 标签：python, list, tuples

如果我有一个元组列表，例如：

```
L=[(('a','b','c','d'),2),(('f','e','d','a'),3)] 
```

我想列出一个类似的列表：

```
L1=[['a','b','c','d'],['f','e','d','a']] 
```

这就是我所做的：

```
L1=[]

for item in L:
    for(letter,integer) in item:
        L1.append(list(letter))
        print(L1) 
```

但它出现错误说有太多的值需要解压

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T01:50:09.190

这里有用的是列表推导：

```
L1 = [list(letters) for (letters, number) in L] 
```

这会遍历列表中的每一对，获取每对的字母元组并将其转换为列表。然后它将每个结果存储为新列表的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:49:15.223

你做了：

```
 for item in L:
      for(letter,integer) in item:
          L1.append(list(letter))
          print(L1) 
```

但是，`item`已经是一个元组，无需遍历它。你想要的是

```
for letter, integer in L:
    L1.append(list(letter)) 
```

或者...

```
for item in L:
    letter, integer = item
    L1.append(list(letter)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T01:51:42.070

你可以试试：

```
L1 = [list(i[0]) for i in L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T01:49:36.187

您的问题出在这一行：

```
for(letter,integer) in item: 
```

这将（尝试）迭代`item`2 元素元组。将其替换为：

```
(letter,integer) = item 
```

它会起作用。当然，还有更简洁的方法可以做到这一点，但这应该让你开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T01:52:41.247

有几个选项可以做到这一点，其中一个是通过获取第一个元素来映射您的列表，例如。像这样：

```
>>> from operator import itemgetter
>>> map(list, map(itemgetter(0), L))
[['a', 'b', 'c', 'd'], ['f', 'e', 'd', 'a']] 
```

另一种是使用列表推导：

```
>>> [list(item[0]) for item in L]
[['a', 'b', 'c', 'd'], ['f', 'e', 'd', 'a']] 
```

或拉姆达：

```
>>> map(lambda x: list(x[0]), L)
[['a', 'b', 'c', 'd'], ['f', 'e', 'd', 'a']] 
```

但也许你不需要一个列表，而元组就可以了。在这种情况下，示例更简单：

```
>>> from operator import itemgetter
>>> map(itemgetter(0), L)
[('a', 'b', 'c', 'd'), ('f', 'e', 'd', 'a')]
>>> [item[0] for item in L]
[('a', 'b', 'c', 'd'), ('f', 'e', 'd', 'a')]
>>> map(lambda x: x[0], L)
[('a', 'b', 'c', 'd'), ('f', 'e', 'd', 'a')] 
```

# git - 为什么 Heroku 认为这个遥控器存在？

> ID：13557616
> 
> 赞同：1
> 
> 时间：2012-11-26T01:45:31.567
> 
> 标签：git, heroku

我在 Heroku 上的生产应用程序运行良好，但我在尝试添加临时应用程序时遇到了麻烦：

```
$ heroku list
=== My Apps
testivate
testivate-staging

$ git remote -v
heroku  git@heroku.com:testivate.git (fetch)
heroku  git@heroku.com:testivate.git (push)

$ heroku git:remote -a testivate-staging
 !    Git remote heroku already exists 
```

发生了什么事，我该如何解决？

谢谢，

史蒂文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T02:46:51.363

`heroku git:remote`默认情况下添加一个名为“heroku”的遥控器。错误消息告诉你，“一个名为 heroku 的 git 远程已经存在”。通过附加 为您的遥控器指定一个名称`-r your_name`。

# java - 无法在列表视图上显示图像

> ID：13557617
> 
> 赞同：0
> 
> 时间：2012-11-26T01:45:32.910
> 
> 标签：java, android, android-layout, android-intent

我正在尝试显示从 url 下载的图像并将其显示在列表视图中。这是我的源代码。输出有一个空白点..就是这样......

这是我正在调用的 java。

```
ABC s = ABC.getSingletonObject();
String[][] full_data = s.getString();

private ListView listView1; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity2);

    //second one is always the type of data...
    Weather weather_data[] = new Weather[]
    {      // full_data[1][0] contains the URL String..
        new Weather(full_data[1][0],full_data[1][2],full_data[1][3]),
        new Weather(full_data[2][0],full_data[2][2],full_data[2][3]),
    };

    WeatherAdapter adapter = new WeatherAdapter(this,R.layout.listview_header_row,                                       weather_data);
    listView1 = (ListView)findViewById(R.id.listView1);
    View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
    listView1.addHeaderView(header);
    listView1.setAdapter(adapter);
} 
```

这是我的适配器..

```
public class WeatherAdapter extends ArrayAdapter<Weather> {
       Context context;
       int layoutResourceId;
       Weather data[] = null;

    public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    WeatherHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new WeatherHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imageView1);
        holder.txtTitle = (TextView)row.findViewById(R.id.txt1);
        holder.txtRating=(TextView)row.findViewById(R.id.rtxt1);

        row.setTag(holder);
    }
    else
    {
        holder = (WeatherHolder)row.getTag();
    }

    Weather weather = data[position];
    holder.txtTitle.setText(weather.wtitle);
    holder.imgIcon.setImageDrawable(weather.wicon);
    holder.txtRating.setText(weather.wrating); 
    //holder.imgIcon.setImageResource(R.drawable.ic_launcher);
    //holder.imgIcon.setImageBitmap(weather.wicon);
    return row;
    } 

    static class WeatherHolder
    {
    //Bitmap imgIcon;
    ImageView imgIcon;
    TextView txtTitle;
    TextView txtRating;
    }
} 
```

这是另一个java文件

```
public class Weather {

    public Drawable publicdraw;
    public Drawable wicon;
    public String wtitle;
    public String wrating;
    public Weather(){
    super();
    }

    public Weather(String icon, String title,String rating) {
        super();
        LoadImageFromWebOperations(icon);
        this.wtitle = title;
        this.wrating=rating;
        this.wicon=publicdraw;
    }

    public void LoadImageFromWebOperations(String url_string) {
        try {
            grabImage(url_string);

        } catch (Exception e) {

        }
    }

    public void grabImage(String url) {
        new GrabURL1().execute(url);
    }

     private class GrabURL1 extends AsyncTask<String, Void, Void> {

    public Drawable d;
    InputStream is;

     protected Void doInBackground(String... urls) {

            try {
                is = (InputStream) new URL(urls[0]).getContent();
                d = Drawable.createFromStream(is, "src name");
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;

    }

        protected void onPostExecute(Void unused) {
            publicdraw=d;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:11:39.400

在将图像分配到列表之前尝试添加以下条件。

```
if (holder.imgIcon != null && position < weather_data.size()) {
      Weather weather = data[position];
      holder.imgIcon.setImageDrawable(weather.wicon);
} 
```

我有同样的问题，这个技巧对我来说就像一个魅力。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:53:59.913

我建议您阅读本[教程](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)。直截了当，不难，效率很高。我将它用于我在列表视图上加载图像的项目。
如果您卡在某个地方，请询问。

# java - XML 布局文件不适用于 Textview

> ID：13557621
> 
> 赞同：0
> 
> 时间：2012-11-26T01:46:30.263
> 
> 标签：java, android, xml, eclipse

我是 Android 开发的初学者，我正在尝试编写一个搜索应用程序，它接收一个字符串并输出包含该字符串的文本消息。我的问题是尝试在第二个屏幕上格式化文本输出。我使用代码正确显示了文本：

```
 TextView textView = new TextView(this);
     textView.setTextSize(20);

    // Set the text view as the activity layout
      setContentView(textView);

..... (find string matches)

      textView.append(msg); 
```

但是，当我去编辑该文件的 .xml 文件时，没有任何变化（我尝试添加粗体，添加起始文本等）。我将我的 TextView xml 块复制到我的 activity_main.xml 中，它在第一个屏幕上显示了一个粗体的“hello world”，而不是在第二个屏幕上，即使 TextView 部分是一个精确的副本。我在第一个做的第二个中缺少什么？我的 TextView 声明中有问题吗？我的最终目标是显示许多文本消息匹配项并强制它们水平适应屏幕并允许用户垂直滚动，更改第二个 xml 文件是错误的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:36:33.867

看来您正在混合“创建”视图的两种不同方式：

1.  在 xml 中声明它们并膨胀它们
2.  以编程方式实例化它们

第一种方法是使用 xml 文件（静态）声明布局。即，您的布局文件可能被命名`activity_layout.xml`并包含以下定义`TextView`带有 id的条目`textview1`。

```
<TextView android:id="@+id/textview1" ... /> 
```

为了在这样的布局定义中使用视图，您需要“膨胀”它。一个常见的地方是在一个`Activity`. 但是，您首先需要告诉 Android 要从哪个布局膨胀：

```
// inflate from 'activity_layout.xml'
setContentView(R.layout.activity_layout);
// inflate the TextView with id 'textview1'
TextView textview = (TextView) findViewById(R.id.textview1); 
```

现在，第二种方法是（动态地）在代码中实例化视图。这不需要布局文件。通常，您可以将其与膨胀区分开来，因为存在“新”关键字。IE

```
// not xml definition required; all code
TextView textview = new TextView(getActivity()); 
```

我希望你看到这是怎么回事？您的代码片段建议您使用第二种方法，而您的解释提到您正在修改布局文件以希望看到更改。基本上，您正在更改当前未使用的布局文件，因此您看不到任何事情发生。

要么更改代码以使用布局中的视图，要么摆脱布局并在代码中执行所有操作。通常第一种方法更灵活，更易于使用；例如，您将能够从 Eclipse 中的预览中受益，并且如果布局变得更复杂，管理起来会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:37:21.883

你的问题是这样的：

```
 // Set the text view as the activity layout
      setContentView(textView); 
```

如果你像这样设置 setContentView ，无论你如何更改你的 xml 文件，你仍然会得到同样的东西。大小为 20 的文本。
尝试创建一个新布局并在其上添加 Textview。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

        <TextView
            android:id="@+id/TextView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

    </LinearLayout> 
```

更改您的代码如下：

```
setContentView(R.layout.new_layout);
TextView textView = (TextView)findViewById(R.id.TextView1);
..... (find string matches)

      textView.append(msg); 
```

# ios - 为 UITextField 设置文本后无法调用 shouldChangeCharactersInRange

> ID：13557622
> 
> 赞同：0
> 
> 时间：2012-11-26T01:46:38.180
> 
> 标签：ios, uitextfield, uitextfielddelegate

我正在使用 UITextField 输入值，将其委托设置为父视图控制器，在使用 textField.text = @"some text" 为文本字段设置文本值后，委托函数 textField:shouldChangeCharactersInRange:replacementString: 不能再调用了。如何防止这种情况或允许在 setText 之后调用此函数？提前谢谢，对不起我的英语不好。更新： textField:shouldChangeCharactersInRange:replacementString: 当我第二次点击“退格”时无法调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:07:07.280

如果您的意思是委托中的方法完全停止调用，则设置文本字段不是原因。你需要做其他事情才能导致这种情况。正如@rdelmar 所说，它不会被调用来进行分配，但会被调用以进行未来的编辑。例如，如果我写...

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.textField.text = @"View will appear";
}
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSLog(@"Replacement: %@", string);
    return YES;
} 
```

...我懂了...

```
2012-11-25 21:02:34.456 Hello World[6669:c07] Replacement: H
2012-11-25 21:02:34.954 Hello World[6669:c07] Replacement: e
2012-11-25 21:02:35.838 Hello World[6669:c07] Replacement: l
2012-11-25 21:02:35.974 Hello World[6669:c07] Replacement: l
2012-11-25 21:02:36.162 Hello World[6669:c07] Replacement: o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:59:10.817

That method isn't supposed to be called when you set the text in code. Why would you want it to -- you are passing in the exact text you want, so there should be no need to change or validate it.

# javascript - 删除复选框的“选中”属性

> ID：13557623
> 
> 赞同：53
> 
> 时间：2012-11-26T01:46:47.470
> 
> 标签：javascript, jquery, ios, cordova, jquery-mobile

发生错误时，我需要删除一个复选框的“已选中”属性。

.removeAttr 函数不起作用。任何想法？：/

HTML

```
<div data-role="controlgroup" data-type="horizontal" data-mini="true" style="margin-left: auto; margin-right: auto; width: 100%; text-align: center;">
    <input type="checkbox" id="captureImage" name="add_image" class="custom" />
    <label for="captureImage" data-icon="checkbox">Image</label>
    <input type="checkbox" id="captureAudio" name="add_audio" class="custom" />
    <label for="captureAudio" data-icon="checkbox">Audio</label>
    <input type="checkbox" id="captureVideo" name="add_video" class="custom" />
    <label for="captureVideo" data-icon="checkbox">Video</label>
</div> 
```

Javascript

```
$("#captureImage").live("change", function() {
    // $("#captureImage").prop('checked', false); // Here Work

    if($("#captureImage:checked").val() !== undefined) {
            navigator.device.capture.captureImage(function(mediaFiles) {
            console.log("works");
        }, function(exception) {
            $("#captureImage").prop('checked', false); // Not Works Here
            _callback.error(exception);
        }, {limit: 1});
    }
});

/*
$("#captureAudio").live("change", function() {
    if($("#captureAudio:checked").val() !== undefined) {
            navigator.device.capture.captureAudio(function(mediaFiles) {
            console.log("audio");
        }, function() {
            $("#captureAudio").removeAttr('checked');
            _callback.error;
        }, {limit: 1});
    }
});

$("#captureVideo").live("change", function() {
    if($("#captureVideo:checked").val() !== undefined) {
            navigator.device.capture.captureVideo(function(mediaFiles) {
            console.log("video");
        }, function(exception) {
            $("#captureVideo").prop('checked', false);
            _callback.error(exception);
        }, {limit: 1});
    }
});
*/ 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-26T01:48:08.697

尝试...

```
$("#captureAudio").prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-12-17T09:09:33.990

这两个都应该工作：

```
$("#captureImage").prop('checked', false); 
```

和/或

```
$("#captureImage").removeAttr('checked'); 
```

...您可以同时尝试两者。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-27T18:55:14.653

试试这个来检查

```
$('#captureImage').attr("checked",true).checkboxradio("refresh"); 
```

并取消选中

```
$('#captureImage').attr("checked",false).checkboxradio("refresh"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-19T05:44:09.347

`unchecked`我在`checkbox`发生错误时使用 prop 属性。您不需要使用删除属性来取消选中您的复选框。

```
$('input#IDName').prop('checked', false); 
```

它对我来说很好。希望它也对你有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T02:08:17.667

尝试：

```
$("#captureAudio")[0].checked = false; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-01T13:19:53.797

`.removeAttr()`在布尔属性上使用`checked`, `selected`, or`readonly`也会将相应的命名属性设置为`false`.

因此删除了这个选中的属性

```
$("#IdName option:checked").removeAttr("checked"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-09T00:53:50.563

你可以试试`$(this)`：

```
$("#captureAudio").live("change", function() {
    if($(this).val() !== undefined) { /* IF THIS VALUE IS NOT UNDEFINED */
            navigator.device.capture.captureAudio(function(mediaFiles) {
            console.log("audio");
        }, function() {
            $(this).removeAttr('checked'); /* REMOVE checked ATTRIBUTE; */
            /* YOU CAN USE `$(this).prop("checked", false);` ALSO */
            _callback.error;
        }, {limit: 1});
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T06:52:45.200

尝试像这样[的 FIDDLE](http://jsfiddle.net/HMb2p/)

```
 try
      {
        navigator.device.capture.captureImage(function(mediaFiles) {
        console.log("works");
         });
      }

    catch(err)
      {
        alert('hi');
        $("#captureImage").prop('checked', false);

      } 
```

* * *

## 回答 #9

> 赞同：-7
> 
> 时间：2012-11-27T00:36:15.907

抱歉，我用上面的代码解决了我的问题：

```
$("#captureImage").live("change", function() {
    if($("#captureImage:checked").val() !== undefined) {
        navigator.device.capture.captureImage(function(mediaFiles) {
            console.log("works");
        }, function(exception) {
            $("#captureImage").removeAttr('checked').checkboxradio('refresh');
            _callback.error(exception);
        }, {});
    }
}); 
```

# copy - 命令提示符中的命令副本

> ID：13557624
> 
> 赞同：-2
> 
> 时间：2012-11-26T01:46:49.927
> 
> 标签：copy, cmd

好的，我知道这是一个非常普遍的问题，但我需要从命令提示符中复制一个文件夹（我正在创建一个 .bat 存档），但我无法让它工作，至少有人可以帮助我解决语法问题。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:59:03.263

In your .bat file first make the folder you want to copy to (if it doesn't exist)

```
mkdir destinationFolder 
```

then copy files

```
copy soureFolder destinationFolder 
```

# android - ProgressBar 在后台任务中的数据源操作期间不旋转

> ID：13557625
> 
> 赞同：3
> 
> 时间：2012-11-26T01:46:58.553
> 
> 标签：android, android-asynctask, android-progressbar

我正在尝试将一些数据加载到布局中。我正在通过 加载数据`AsyncTask`，它将从 SQLite 数据源加载数据，然后在完成时将该数据插入到布局中。我想在此期间显示一个进度条，在任务开始时将其添加到布局中，并在任务完成时将其从布局中删除。

这是一个粗略的大纲：

```
private class ItemLoader extends AsyncTask<Void, Void, List<Item>> {

    private Context context;
    private LayoutInflater inflater;
    private View loading;

    public DataLoader(Context context) {
        this.context = context;
        this.inflater = LayoutInflater.from(context);
        this.loading = createLoading();
    }

    private View createLoading() {
        return inflater.inflate(R.layout.loading, null);
    }

    @Override
    public void onPreExecute() {
        // Insert 'loading' view into the 'items' layout.
        LinearLayout layout = (LinearLayout) findViewById(R.id.items);
        layout.addView(loading);
    }

    @Override
    protected List<Item> doInBackground(Void... params) {
        return loadItemsFromDataSource();
    }

    private List<Item> loadItemsFromDataSource() {
        ItemsSource d = new ItemsDataSource(context);
        d.open();
        try {
            return d.lookupItems();
        } finally {
            d.close();
        }       
    }

    @Override
    public void onPostExecute(List<Item> items) {
        LinearLayout layout = (LinearLayout) findViewById(R.id.items);
        // Remove 'loading' view from the 'items' layout.
        layout.removeView(loading);
        // Add items to the 'items' layout.
        for (Item item: items) {
            addItemToLayout(item, layout);
        }
    } 
```

[我的加载布局是从ProgressBar 的 Android API 文档中](http://developer.android.com/reference/android/widget/ProgressBar.html)复制的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@android:style/Widget.ProgressBar.Small"
        android:layout_marginRight="5dp" />
   <TextView
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/loading" />

</LinearLayout> 
```

`AsyncTask`在活动的方法期间调用`onCreate()`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.itemsLayout);
    ...
    new ItemLoader(this).execute();
} 
```

我可以看到当数据在后台加载时，“加载”微调器和文本被添加到我的布局中，并且当数据被添加到布局时，这个微调器/文本被删除。

但是当`doInBackground()`方法运行时，微调器没有旋转。我在 UI 线程中添加和删除进度条（在`onPreExecute()`and`onPostExecute()`方法中）。

有趣的是，如果在从数据源加载数据之前添加一个`sleep()`调用，那么我可以看到微调器正在旋转。`doInBackground()`但是一旦调用了数据源，微调器就会停止旋转：

```
@Override
protected void doInBackground(Void... params) {
    sleepForFiveSeconds(); // spinner is spinning
    List<Item> items = loadItemsFromDataSource(); // spinner stops spinning
    sleepForFiveSeconds(); // spinner still not spinning
    return items;
} 
```

它不仅仅是一个在`AsyncTask`. 当 ProgressBar 添加到活动时，我注意到相同的行为，要么在活动的布局中定义它，要么在活动的`onCreate()`方法中动态添加它。在这些情况下，微调器一直在旋转，直到执行数据源查找。一旦数据源查找返回，它将再次开始旋转。

因此，似乎在 UI 线程中访问了微调器，但后台线程中的数据源操作导致这些微调器停止。

有什么建议么？

编辑添加：这是我的 Nexus 7 (Android 4.2) 和 HTC 手机 (Android 2.3.4)，android manifest 将最低 SDK 版本设置为 10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:56:10.383

不要在布局中添加和删除微调器，而是尝试将其包含在基本`itemsLayout`文件中并切换可见性。所以，像`findViewById(R.id.loading).setVisibility(View.VISIBLE);`. 这应该比膨胀一个全新的布局花费更少的时间，这就是你现在正在做的事情。

# c++ - 我正在尝试开发一个复数计算器。

> ID：13557626
> 
> 赞同：-6
> 
> 时间：2012-11-26T01:47:01.407
> 
> 标签：c++, constructor, calculator

构造函数必须定义以下对象并打印它们：

```
CComplex c1;
CComplex c2(1,3);
CComplex c3(4);
CComplex c4(c3); 
```

为 +、-、* 和 / 操作实现重载运算符，支持 2 个复数之间的运算以及浮点数和复数之间的运算。

但是，如果仅使用一个参数声明对象，则会出错。查看社区上的 FOO.h 示例并尝试实施但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:04:13.777

如果目标真的是拥有一个复数计算器，而不是完成学校作业或其他具有一些任意限制的练习，那么您应该使用[`std::complex`](http://en.cppreference.com/w/cpp/numeric/complex)而不是重新发明轮子。

对于它的价值，构造函数`std::complex`接受两个参数，都具有默认值。不提模板，`std::complex< double >`有效地明确定义了一个构造函数：

```
complex( double real = 0, double imaginary = 0 ); 
```

实现这一点应该获得问题中提到的功能。

# java - 从java中的Dropbox下载文件

> ID：13557630
> 
> 赞同：5
> 
> 时间：2012-11-26T01:47:42.243
> 
> 标签：java, download, dropbox

我正在编写一个摇摆应用程序，但我相信我以后会想更多的东西来添加它，所以我想要一种从 Dropbox 下载文件的方法，如果它是新的。我尝试了很多不同的东西，但它们给我的只是页面的 HTML。有人知道怎么做吗？我当然不会。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T21:22:39.280

在我看来，Dropbox API 对你需要的东西来说太复杂了。从 Dropbox 下载文件实际上非常简单。

第一步是将要下载的文件放在 Dropbox 的公共文件夹中的某个位置。

接下来，您要右键单击该文件并选择“复制公共链接”。您可以从 Web 界面执行此操作，甚至可以在您的计算机同步文件夹中执行此操作。这将为您提供该文件的唯一下载 url。

接下来，使用此代码：

```
String url="https://dl.dropboxusercontent.com/u/73386806/Prune%20Juice/Prune%20Juice.exe";
String filename="PruneJuice.exe";

try{
    URL download=new URL(url);
    ReadableByteChannel rbc=Channels.newChannel(download.openStream());
    FileOutputStream fileOut = new FileOutputStream(filename);
    fileOut.getChannel().transferFrom(rbc, 0, 1 << 24);
    fileOut.flush();
    fileOut.close();
    rbc.close();
}catch(Exception e){ e.printStackTrace(); } 
```

当然，将 url 字符串的值更改为您自己的下载 url，并将文件名的值更改为您希望将文件另存为的任何值。

现在，如果这失败了，您可能需要将 url 从 https:// 更改为 http://，但无论哪种方式它都应该仍然有效。Dropbox 就是这么酷。

# jquery - 脸书覆盖冲突？

> ID：13557643
> 
> 赞同：0
> 
> 时间：2012-11-26T01:50:55.803
> 
> 标签：jquery, facebox

我在我的网站上使用了 Facebook，当我点击“发表评论”时，它会显示这些内容，但我认为它与导航冲突？这是图像：

![在此处输入图像描述](../Images/678d4f5667186144e866e17b76ed7da2.png)

它在页面上结束了：[http ://www.krissales.com/#/media/17.Testing-Article-1](http://www.krissales.com/#/media/17.Testing-Article-1)

点击发表评论，看看它的作用。我不确定这是我的导航，还是脸书。

我也觉得这和我的core.js文件有关，因为太可怕了，哈哈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:02:49.580

我认为唯一的问题是你缺少 z-index..

尝试将 z-index:10000 放入您的#facebox。

像这样：

```
#facebox{
z-index:10000
} 
```

它会解决你的问题..干杯。

# xslt - XSLT：根据参数替换路径的一部分

> ID：13557648
> 
> 赞同：0
> 
> 时间：2012-11-26T01:52:24.977
> 
> 标签：xslt, xpath, xslt-2.0

这个问题来自查询[XSLT：Sorting based on sum of values from other nodes](https://stackoverflow.com/questions/13502321/xslt-sorting-based-on-sum-of-values-from-other-nodes)

我有这块 xslt（感谢 Demitre），我已经对其进行了修改以接收参数“Gait”，该参数可以具有值“P”（步伐）、“T”（小跑）或“A”（全部）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kOffspring" match="Horse" use="SireID"/>
 <xsl:param name="Gait"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="Sires/Sire">
   <xsl:sort select="sum(key('kOffspring', ID)/*/Stakes)"
             data-type="number" order="descending"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Sire">
     Sire <xsl:value-of select="concat(ID,' (', Name, ') Stakes: ')"/>
   <xsl:value-of select="sum(key('kOffspring', ID)/*/Stakes)"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

在上面的代码中就是这块

```
sum(key('kOffspring', ID)/*/Stakes 
```

有没有办法用 xml 树中的节点名称替换星号部分，具体取决于为步态传入的值？

超级简化的xml是：

```
<t>
    <Horses>
        <Horse>
            <ID>5</ID>
            <Name>hrsE</Name>
            <SireID>101</SireID>
            <Pace>
                <Stakes>100</Stakes>
            </Pace>
            <Trot>
                <Stakes>300</Stakes>
            </Trot>
        </Horse>
    </Horses>
    <Sires>
        <Sire>
            <ID>101</ID>
            <Name>srA</Name>
            <LiveFoalsALL>117</LiveFoalsALL>
        </Sire>
    </Sires>
</t> 
```

当 $Gait 是 'A' 我想要 **sum(key('kOffspring', ID)/*/Stakes** （查看 Horse 的所有子节点）

当 $Gait 是 'P' 我想要 **sum(key('kOffspring', ID)/Pace/Stakes**（只在 Pace 节点中查找 Stakes）

当 $Gait 是 'T' 我想要 **sum(key('kOffspring', ID)/Trot/Stakes**（只在 Trot 节点中查找 Stakes）

所以这是一个超级简化的例子。我试图停止复制数百行代码来满足 $Gait 的不同值。我尝试使用变量，但看不到在使用路径中的键时如何更改节点路径的值。我看到我可以在 'match="/*"' 模板中使用选择语句，但这仅用于排序，当我进入 'Sire' 模板时我仍然被卡住 - 不想放'围绕我拥有的众多“选择价值”语句进行选择。

感谢您的任何建议。问候，布莱斯斯坦伯格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:33:46.550

只需使用

```
sum(key('kOffspring', ID)/*[name()=$Gait]/Stakes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:00:22.760

> ```
> <xsl:value-of select="sum(key('kOffspring', ID)/*/Stakes)" /> 
> ```
> 
> 有没有办法用 xml 树中的节点名称替换星号部分，具体取决于为步态传入的值？

是的...一种方法是在 XPath 表达式中添加一个“switch 语句”：

```
sum(key('kOffspring', ID)/*[
    $Gait = 'A' or
    (local-name() = (if ($Gait = 'P') then 'Pace' else
                        if ($Gait = 'T') then 'Trot'))
  ]/Stakes) 
```

或者，您可以编写三个不同版本的`<xsl:value-of>`，为 $Gait 的每个可能值一个，并使用`<xsl:choose>`来选择使用哪一个：

```
<xsl:choose>
   <xsl:when test="$Gait = 'A'">
      <xsl:value-of select="sum(key('kOffspring', ID)/*/Stakes)" />
   </xsl:when>
   <xsl:when test="$Gait = 'P'">
      <xsl:value-of select="sum(key('kOffspring', ID)/Pace/Stakes)" />
   </xsl:when>
   etc. 
```

这`<xsl:choose>`对我来说似乎更具可读性，并且可能更有效，具体取决于处理器；但这在很大程度上是一个偏好问题。

# perl - perl 模块如何找到自己的路径？

> ID：13557651
> 
> 赞同：7
> 
> 时间：2012-11-26T01:53:32.527
> 
> 标签：perl, perl-module

我正在创建自己的模块，让我们称之为`X::Y`。当然，模块会在文件中`X/Y.pm`。

假设`Y`需要调用外部程序，`prog`. 理想情况下，我只想投入`prog`进去`X`，这样我就可以跑步了`X/prog`。我希望没有硬编码`X/prog`的完整路径，并且无论当前工作目录集如何，模块都能正常工作。

如何从模块内部找到模块的完整路径？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T03:10:17.867

当前正在执行的源文件的完整路径由 Perl 的[`__FILE__`](http://perldoc.perl.org/perldata.html#Scalar-values)特殊文字提供。

但是，我希望看到外部程序安装在通常的位置，并且那里的路径要么在 Perl 代码中编码为常量，要么包含在`PATH`环境变量中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:54:32.010

Borodin 回答了这个问题，但提供了一些相关信息：

[FindBin](https://metacpan.org/module/FindBin) - 查找运行脚本的目录（在脚本本身或由它加载的包中使用）

[Neil Bower 的用于获取模块路径的 CPAN 模块](http://neilb.org/reviews/module-path.html)- 详细查看模块以查找另一个模块的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:32:44.857

一旦加载了一个模块，它的路径就在全局`%INC`变量中。要查找它，您需要进行简单的转换：

1.  `::`将包名称更改为`/`
2.  附加`.pm`

因此，要查找模块的位置`X::Y`，您需要查看`$INC{"X/Y.pm"}`.

# mysql - 如何创建临时表

> ID：13557653
> 
> 赞同：0
> 
> 时间：2012-11-26T01:53:40.377
> 
> 标签：mysql

我有以下查询，它没有利用主键`request_id`

```
SELECT request_id, exec_datetime FROM requests
WHERE request_id mod 1000 = 1; 
```

我希望通过创建一个以值 1 开头并以 1000 一直递增到 1,000,000 的临时表来实现一些优化，以便我可以执行类似这样的操作

```
SELECT request_id, exec_datetime FROM requests
WHERE request_id IN (SELECT id FROM table); 
```

有没有我可以用来动态生成这个表的语法，还是我真的必须创建这个表？

**编辑**

我注意到使用此解决方法查询的执行速度提高了大约 8 倍

```
CREATE TABLE dummy (
thousand INT(10) UNSIGNED,
UNIQUE(thousand)
);

INSERT INTO dummy (SELECT request_id FROM requests WHERE request_id mod 1000=1 );

SELECT r.request_id, r.exec_datetime FROM requests r
JOIN dummy d
ON d.thousand = r.request_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:03:42.507

不，没有像 mysql 那样生成值的语法（其他数据库，例如 postgres*确实*有这样的语法）。如果存在，则*join*的性能将优于`IN`.

但是，我每次都会使用您的第一个查询，除非有证据表明它的性能非常差。

# android - 如何在没有硬编码 Activity 类的情况下从服务库中的 Notification 启动主 Activity

> ID：13557654
> 
> 赞同：3
> 
> 时间：2012-11-26T01:53:41.263
> 
> 标签：android

我在服务中使用以下代码来打开 main/launcher Activity ，代码运行良好，直到我将该项目声明为库并创建了另外两个使用该库的项目。

所以在服务的onStartCommand中写了这段代码。

```
 final Notification notification = new Notification(R.drawable.ic_launcher, null, 0);   

    String notifTitle = "Service";
    String notifMessage = "Running";

    final Intent notificationIntent = new Intent(this,   MainActivity.class);
    notificationIntent.putExtra("extra", "value");
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                            | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    notificationIntent.setAction("android.intent.action.MAIN");
    notificationIntent.addCategory("android.intent.category.LAUNCHER");

    final PendingIntent contentIntent = PendingIntent
                            .getActivity(this, 0, notificationIntent,0);

    notification.setLatestEventInfo(this, notifTitle, notifMessage, contentIntent);     
    startForeground(17, notification); 
```

MainActivity.class 是库的一部分，使用该库的两个项目有它们的主要活动 MainActivityA ， MainActivityB 扩展库的 MainActivity。

现在的问题是，当我单击服务通知时，应该启动 MainActivityA 或 MainActivityB 但现在什么也没有发生，但以前当库本身是一个项目时它可以工作

任何想法都会被广泛接受，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:52:01.097

有几种方法可以解决这个问题。

您可以在清单中的 Activity 上声明 Intent 过滤器并广播 Intent，但如果用户在其设备上安装了这两个版本，这可能会出现问题。（支持库中有一个本地广播，您可以使用[docs](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)代替）

我个人会使用 Android 的资源系统来动态加载类名。Intents 使您能够设置 ComponentName，这与为它提供 Activity 类的硬编码引用相同。

```
Intent i = new Intent();
String mPackage = ctx.getPackageName();
String mClass = ctx.getResources().getString(R.string.notification_class_name);
i.setComponent(new ComponentName(mPackage,mPackage+mClass)); 
```

库项目的值可以被使用它们的项目覆盖，因此在这两个项目中，您在 strings.xml 中都有一个与该应用程序的通知活动相对应的值。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="notification_class_name">.MainActivityA</string>
</resources> 
```

然后，您可以将此 Intent 与您的 pendingIntent 一起使用，它将打开当前应用程序内部的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T02:14:51.660

这是一个老问题，但我在尝试自己解决问题时遇到了这个问题。我想出了一种更简单的方法来做到这一点，而无需配置任何字符串或传递任何参数。

```
String packageName = getPackageName();
Intent notificationIntent = getPackageManager().getLaunchIntentForPackage(packageName); 
```

现在你有了可以添加额外内容等的意图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T04:25:18.357

您正在硬编码您的意图

```
final Intent notificationIntent = new Intent(this,   MainActivity.class); 
```

启动您的 MainActivity.class 而不是 MainActivityA.class 或 MainActivityB.class。您必须将正确的类传递给您的服务或将意图更改为更通用，并让 Intent 框架发现您的活动（这可能是您的应用程序独有的）。

我正在写一些关于意图过滤器的东西，但@smith324 打败了我。

我会考虑使用元数据而不是类似于以下的字符串资源：

```
<meta-data android:name="com.foo.service.LaunchName" android:value="com.foo.MainActivityA"></meta-data> 
```

如果您添加其他库，这可以避免第三方字符串名称冲突，并且我认为可以为开发人员保持字符串文件更清洁，因为这更多地用于连接您的类，而不是可能需要为用户进行国际化/翻译的东西。

请参阅：[如何将用户定义的属性/值添加到 Android 清单文件中？](https://stackoverflow.com/questions/7928105/how-do-you-add-user-defined-properties-values-in-android-manifest-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-01T08:15:14.910

要获取启动器活动，这是一种方法。

```
public static Class<?> GetLauncherActivity(Context context)
    {
        String packageName = context.getPackageName();
        Intent launchIntent = context.getPackageManager().getLaunchIntentForPackage(packageName);
        String className = launchIntent.getComponent().getClassName();
        try
        {
            return Class.forName(className);
        }
        catch (ClassNotFoundException e)
        {
            e.printStackTrace();
            return null;
        }
    } 
```

# javascript - 如何设置 ToggleSwitch 的访问密钥？

> ID：13557655
> 
> 赞同：0
> 
> 时间：2012-11-26T01:54:02.217
> 
> 标签：javascript, windows-8

我正在使用 HTML/JS 开发 Windows 8 应用程序。我们有一个 WinJS.UI.ToggleSwitch 元素，并希望在其上设置 accesskey 属性以进行键盘导航。

```
<div data-win-control="WinJS.UI.ToggleSwitch"></div> 
```

看起来它最终以具有多个元素的嵌套 div 结构结束。使用 DOM 资源管理器，实际的控件如下所示：

```
<input class="win-switch" role="checkbox" aria-checked="false" aria-disabled="false" aria-labelledby="ms__id77" type="range" max="1" step="1"></input> 
```

我可以在 DOM 资源管理器中向这个 div 添加一个 accesskey 属性，它可以工作。我的问题是如何将它添加到原始标记中的控件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:15:09.847

Looking at the implementation of this control, it's going to be hard. I see you have two options:

1.  In the code that constructs this control, do the "unpleasant" thing, and querySelector for the element, and set it yourself.
2.  Derive from WinJS.UI.ToggleSwitch, and monkey patch _setElement, to allow you to do it yourself after the fact.

Both of these are highly subject to changes in future versions, with 2 being the most likely to break since you are monkey patching in an internal method.

# jquery - 如果未列出用户名。删除该元素

> ID：13557656
> 
> 赞同：1
> 
> 时间：2012-11-26T01:54:03.573
> 
> 标签：jquery, contains

我正在尝试制作一个简单的代码。我不太擅长 jQuery，对此我很抱歉。需要有关此代码的帮助，哈哈。好的，所以我要做的是制作一个包含变量的代码，这些变量又是用户名，这就是我到目前为止所拥有的

```
$(document).ready(function() { 
    var $NLG = $('ul li a.mainmenu'); 
 $NLG.filter(':contains("USERNAME")function(){
     .find('.nlgchat');
         //do nothing');
    else
   .remove('.nlgchat');
    }); 
```

是的，我知道这可能是完全错误的，我完全迷失了。但基本上我在这里要做的是，如果 :contains 变量中列出的用户名不做任何事情，否则如果不完全删除元素。有人可以帮助我更多地理解这一点，以及如何执行此代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:59:44.427

我相信这就是您正在寻找的：

```
$(document).ready(function() { 
    if ( ! $('ul li a.mainmenu:contains("USERNAME")').length ) {
        $('.nlgchat').remove();
    }
}); 
```

尽管我确信您可以优化该选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:10:37.433

如果我理解正确：

*   默认隐藏聊天
*   如果找到匹配 = 显示聊天

`**[jsBin demo](http://jsbin.com/egusun/25/edit)**`

```
$(document).ready(function() {

  $('.nlgchat').hide(); // or do it rather with CSS...

  var usernames = ['roko','roky','roxon']; // remove 'roko' and no match will be found
  var nameslist = []; // to match against server usernames

  $('ul li a.mainmenu').each(function(){ 
    var name = $(this).text().toLowerCase();
    nameslist.push(name); // dana,roko,john
  });

  $.each(usernames, function(i,v){
     if( nameslist.indexOf( v ) > -1 ){
        $('.nlgchat').show(); 
        return false;
     }else{
        $('.nlgchat').hide();
     }
  });

 }); 
```

# ios - NSMutableArray 值不变

> ID：13557662
> 
> 赞同：0
> 
> 时间：2012-11-26T01:54:59.433
> 
> 标签：ios, delegates, nsmutablearray, nsnumber

在我的项目中，我主要`GameClass`尝试将数据保存到`NSMutableArray`控件类`ViewController`（这是 GameClass 的委托）中的成就，但数组的值似乎没有改变。这是我的代码：

在 GameClass.m 中

```
NSLog(@"test %i",[delegate getAchievement:3]);
[delegate setAchievement:3];
NSLog(@"test %i",[delegate getAchievement:3]); 
```

在 ViewController.m 中

```
-(void)setAchievement: (int)number{

     [achievements replaceObjectAtIndex: number withObject: [[NSNumber alloc] initWithInt:1]];
     NSLog(@"setachievement was called");

     [self saveData];
}

-(int)getAchievement: (int)number{

    return [[achievements objectAtIndex: number] intValue];
} 
```

我得到的是：

```
 2012-11-25 20:47:14.754 Stickman Parkour 2[25109:c07] test 0
 2012-11-25 20:47:14.755 Stickman Parkour 2[25109:c07] setachievement was called
 2012-11-25 20:47:14.755 Stickman Parkour 2[25109:c07] test 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:28:42.190

代表为零或成就为零。对 nil 的调用返回零/零。（但由于出现“设置成就被调用”，这表明委托是好的，成就是零。）

# objective-c - 如何确定我在 Obj-C 方法中执行？

> ID：13557663
> 
> 赞同：1
> 
> 时间：2012-11-26T01:55:01.763
> 
> 标签：objective-c

我想使用一个断言宏，它既`NSAssert`包含 ObjC 方法，又`assert`包含 C 函数内部的普通（或其他东西）。

有没有一种干净的方法可以在运行时（或者更好的是，编译时！）检测我当前在 ObjC 方法中执行的操作？

我知道这一点，`self`并且`_cmd`将在一个方法中定义和有效，但我不确定是否有一种明显的方法可以安全地检查局部变量的存在。我忘记了一些明显的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:01:11.803

也许您可以使用标准的预定义宏来测试文件是否由 Objective-C 编译器编译。

```
//in the header file
#define MyAssert(A) NSAssert(A) assert(A)

//in the C file
#if !defined(__OBJC__)
#define NSAssert(A) 

//in the Obj-C file
#if defined(__OBJC__)
#define assert(A) 

/**/
f()
{
//...
MyAssert(TestCase && "Error Message");
//...
} 
```

# android - 开始新活动时Android空指针异常

> ID：13557664
> 
> 赞同：-1
> 
> 时间：2012-11-26T01:55:02.993
> 
> 标签：android

我正在为我的 android 类开发一个项目。I have three options listed on my MainActivity, and when one is selected, the user goes to one of three activities: a) an activity to enter new student info, b) an activity which views all students on record, or c) an activity它允许跟踪目标学生的行为。当我选择用于输入学生信息的单选按钮并单击“选择”按钮时，一切正常，即您被发送到正确的活动。However, when either of the other two options are selected, I get a null pointer exception. 我的清单中声明了所有三项活动。

这是我的课程代码：

```
 public void onButtonClicked (View v){
    RadioButton rdTrackBehaviour = (RadioButton)findViewById(R.id.radioOption2);
    RadioButton rdEnterStudent = (RadioButton)findViewById(R.id.radioOption1);
    RadioButton rdCurrentStudents = (RadioButton)findViewById(R.id.radioOption3);

            if(rdEnterStudent.isChecked()){
                Intent enterIntent = new Intent(MainActivity.this, EnterStudentActivity.class);
                startActivity(enterIntent);
            }
            if(rdTrackBehaviour.isChecked()){
                Intent onTaskIntent = new Intent(MainActivity.this, ActivityOnTaskBehaviour.class);
                MainActivity.this.startActivity(onTaskIntent);
            }
            else{
                if(rdCurrentStudents.isChecked()){
                    Intent currentStudentIntent = new Intent(MainActivity.this, StudentList.class);
                    startActivity(currentStudtenIntent);
                }
            }
} 
```

还有我清单中的一个片段：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".EnterStudentActivity"
        android:label="@string/title_activity_enter_student" >
    </activity>
    <activity
        android:name=".ActivityOnTaskBehaviour"
        android:label="@string/title_activity_activity_on_task_behaviour" >
    </activity>
    <activity
        android:name=".StudentList"
        android:label="@string/title_activity_student_list" >
    </activity>
    <activity
        android:name=".Results"
        android:label="@string/title_activity_results" >
    </activity>
</application> 
```

还有我的堆栈跟踪：

```
11-25 19:47:39.735: E/AndroidRuntime(332): FATAL EXCEPTION: main
11-25 19:47:39.735: E/AndroidRuntime(332): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.behaviourtracker/com.example.behaviourtracker.ActivityOnTaskBehaviour}: java.lang.NullPointerException
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-25 19:47:39.735: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 19:47:39.735: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
11-25 19:47:39.735: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-25 19:47:39.735: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-25 19:47:39.735: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method)
11-25 19:47:39.735: E/AndroidRuntime(332): Caused by: java.lang.NullPointerException
11-25 19:47:39.735: E/AndroidRuntime(332):  at com.example.behaviourtracker.ActivityOnTaskBehaviour.onCreate(ActivityOnTaskBehaviour.java:19)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-25 19:47:39.735: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-25 19:47:39.735: E/AndroidRuntime(332):  ... 11 more 
```

我是个菜鸟，完全被难住了。已经在谷歌上四处寻找一两个小时，每个人似乎一直在说这与未在清单中注册的活动有关。我是不是做错了，还是有其他问题？另外，我扔了一个try catch块

```
 if(rdTrackBehaviour.isChecked()){
                Intent onTaskIntent = new Intent(MainActivity.this, ActivityOnTaskBehaviour.class);
                MainActivity.this.startActivity(onTaskIntent);
            } 
```

使用 log.d，但 logcat 中没有任何内容....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:43:03.710

检查第 19 行`ActivityOnTaskBehaviour.java`。您很可能试图在该行的空对象上调用实例方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:42:16.263

```
11-25 19:47:39.735: E/AndroidRuntime(332):  at com.example.behaviourtracker.ActivityOnTaskBehaviour.onCreate(ActivityOnTaskBehaviour.java:19) 
```

您的问题在 ActivityOnTaskBehaviour.java 的第 19 行。

# objective-c - UIButton 在它之上响应 UIPanGestureRecognizer

> ID：13557666
> 
> 赞同：0
> 
> 时间：2012-11-26T01:55:29.390
> 
> 标签：objective-c, ios, xcode

我刚刚在我的视图顶部添加了一个带有 UIPanGestureRecognizer 的 UIView。
该视图有几个 UIButtons 响应 touchUpInside 事件。
奇怪的是，自从我带来了 UIPanGestureRecognizer，当平移时，如果 UIButton 位于“平移视图”的正下方，按钮就会触发，这不是我想要的。当然，我可以为“平移”制作一个 BOOL 标志，这样按钮就不会触发，但在我看来，这似乎是糟糕的工程，而且肯定是我缺少的东西。我猜在第一次触摸之后，两个视图都会拦截事件。
有可能克服这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:17:45.560

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
       shouldReceiveTouch:(UITouch *)touch {

    if ([touch.view isKindOfClass:[UIButton class]]) {
        return NO;
    }
    return YES;
} 
```

用这种方法来区分`GestureRecognizer`和`Button`Acton。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:11:00.057

不确定这是否有帮助

```
[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanned:)];
- (void)handlePanned:(UIPanGestureRecognizer*)thePanner{

    if (thePanner.state == UIGestureRecognizerStateChanged ){
       //disable button 
    }else if (thePanner.state == UIGestureRecognizerStateEnded) {
        //enable button
    }else if ( thePanner.state == UIGestureRecognizerStateFailed ){
     //enable button
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:00:40.390

您可以通过以下两种策略来解决您的问题：-

1）在您需要的视图中添加手势时，请确保它不会添加不需要的视图，在这种情况下是您的UIButton，&;

2）在您处理检测手势情况的方法/委托处，即在实施之前您确保这不是UIButton。

如果您坚持，我会尝试示例代码。

祝你有美好的一天。:)

# jquery - 调用 Opera Mini 进行站点重定向

> ID：13557669
> 
> 赞同：0
> 
> 时间：2012-11-26T01:55:46.597
> 
> 标签：jquery, redirect, opera-mini

我正在一个使用 jQuery 的网站上工作，该网站似乎在除 Opera Mini 之外的所有东西上都能完美运行，它几乎扼杀了我使用过的任何基于 Javascript 的交互性。有没有办法专门针对网站重定向调用此移动浏览器，而无需调用所有 Opera/Opera Mobile 浏览器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:58:51.527

You can detect it by the presence of `Opera Mini` in the User-Agent header.

# c# - LuaInterface - RegisterFunction 对象参考

> ID：13557672
> 
> 赞同：2
> 
> 时间：2012-11-26T01:56:28.267
> 
> 标签：c#, exception, luainterface

我正在尝试将 LuaInterface 集成到 C# 中，`System.NullReferenceException`当我尝试将 C# 函数绑定到 Lua 时，我得到了一个。我试图编译和运行的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using LuaInterface;

namespace Hobot
{
    class Program
    {
        static void Main(string[] args)
        {
            Program program = new Program();
            Lua lua = new Lua();
            lua.RegisterFunction("puts", null, typeof(Program).GetMethod("Test"));
            lua.DoFile("test.lua");
        }

        private void Test(String text)
        {
            Console.WriteLine(text);
        }
    }
} 
```

当我运行这段代码时，我会`System.NullReferenceException`说它`Additional information: Object reference not set to an instance of an object.`在`RegisterFunction`方法上崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:54:36.923

RegisterFunction 的目标参数中有*null*。

尝试这个：

```
lua.RegisterFunction("puts", this, typeof(Program).GetMethod("Test")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T19:43:18.727

我知道这个问题很老，但是看到这里没有答案，我希望这没问题：

它失败了，因为“测试”是私有的。将其更改为

```
public void Test(String text)
{
    Console.WriteLine(text);
} 
```

并使用

```
lua.RegisterFunction("puts", this, GetType().GetMethod("Test")); 
```

那应该解决它（：

# php - 三元语句未按预期测试值

> ID：13557674
> 
> 赞同：0
> 
> 时间：2012-11-26T01:57:18.910
> 
> 标签：php

我怎么能把这个 if 语句变成三元语句？

```
if ( !empty($vendor_address_row['address2'])){
    $address_obj['address2'] = $vendor_address_row['address2'];
    }else{
    $address_obj['address2'] = '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>';    
    } 
```

我试过了

`$vendor_address_row['address2'] ? $address_obj['address2'] = '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>' : $address_obj['address2'] = '';`

和

`!empty($vendor_address_row['address2']) ? $address_obj['address2'] = '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>' : $address_obj['address2'] = '';`

都不工作。除此之外，可能还有更短的方法可以做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:02:04.367

这取决于是否`$vendor_address_row['address2']`总是定义。

如果是（并且版本 >= 5.3）：

```
$address_obj['address2'] = $vendor_address_row['address2'] ?: '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>'; 
```

或（版本 < 5.3）：

```
$address_obj['address2'] = $vendor_address_row['address2'] ? $vendor_address_row['address2'] : '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>'; 
```

它不是：

```
$address_obj['address2'] = !empty($vendor_address_row['address2']) ? $vendor_address_row['address2'] : '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>'; 
```

如果需要，您可以反转操作数以摆脱`!empty()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:58:45.990

this should be:

```
echo $address_obj['address2'] = !empty($vendor_address_row['address2']) ? $vendor_address_row['address2'] : ('<tr><td colspan="1">'.$address_row['address2'].'</td></tr>'); 
```

or to save it to a variable:

```
$address_obj['address2'] = !empty($vendor_address_row['address2']) ? $vendor_address_row['address2'] : ('<tr><td colspan="1">'.$address_row['address2'].'</td></tr>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:00:27.380

It should be

```
$address_obj['address2'] = empty($vendor_address_row['address2']) ? '<tr><td colspan="1">'.$address_row['address2'].'</td></tr>' : $vendor_address_row['address2'] ; 
```

# gwt - oauth 2.0 gwt 访问令牌和谷歌日历 API

> ID：13557677
> 
> 赞同：0
> 
> 时间：2012-11-26T01:58:11.650
> 
> 标签：gwt, oauth, google-calendar-api

我又踏入了陌生的领域。

我使用此客户端库[https://code.google.com/p/gwt-oauth2/](https://code.google.com/p/gwt-oauth2/)来获取可用于访问 google 日历 API 的访问令牌。

在做了一些研究之后，我注意到另一个客户端库[http://code.google.com/p/gwt-google-apis/source/browse/trunk/apis/samples/calendar/com/google/api/gwt/samples/ calendar/client/CalendarEntryPoint.java](http://code.google.com/p/gwt-google-apis/source/browse/trunk/apis/samples/calendar/com/google/api/gwt/samples/calendar/client/CalendarEntryPoint.java)，我可以使用它来进行谷歌日历 api 调用。

现在我不明白的是如何将两者结合起来。所以我现在有一个访问令牌，但是第二个客户端库中的示例代码在任何地方都没有使用该访问令牌（它只使用来自 google api 控制台的 client_id 和 api_key）。

这两个库是互斥的还是要一起工作的？

编辑：

我想要实现的是使用第一个库授权我的应用程序访问 Google 日历，并使用第二个库进行 API 调用。问题是，当我使用第二个库进行 API 调用时，它无法识别我的应用程序已经被授权使用 Google 日历，我认为问题在于示例代码中的这一行：

```
calendar.initialize(new SimpleEventBus(),
    new GoogleApiRequestTransport(APPLICATION_NAME, API_KEY)); 
```

进行此调用时，它会注册第二个应用程序（我可以从我的谷歌帐户中的第三方应用程序中看到这一点）。即使第一个应用程序已被授权使用 Google 日历，新注册的应用程序仍希望再次获得授权。

所以我环顾四周，看看是否有可以使用现有应用程序的 GoogleApiRequestTransport，我设法找到了这个：[http ://gwt-google-apis.googlecode.com/svn-history/r1914/trunk/apis/javadoc /latest/javadoc/com/google/api/gwt/shared/GoogleApiRequestTransport.html](http://gwt-google-apis.googlecode.com/svn-history/r1914/trunk/apis/javadoc/latest/javadoc/com/google/api/gwt/shared/GoogleApiRequestTransport.html)

这个 GoogleApiRequestTransport 让我设置访问令牌（这是我首先想要的）。但它已被弃用。所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:09:20.310

我会先说我的 Java 知识不存在。您指出的第二个库实际上也进行了 Oauth2 身份验证。在此代码块中（从第 75 行开始）：

```
private void login() {
  OAuth2Login.get().authorize(CLIENT_ID, CalendarAuthScope.CALENDAR,
      new Callback<Void, Exception>() {
        @Override
        public void onSuccess(Void v) {
          getCalendarId();
        }
        @Override
        public void onFailure(Exception e) {
          GWT.log("Auth failed:", e);
        }
      });
} 
```

您可以看到对 的调用`OAuth2Login.get().authorize()`，该过程将生成类似于您在第一个库中看到的访问令牌（同样，我对 Java 的熟悉限制了我在这里的实用程序）。长话短说，似乎仍在实施相同的 Oauth2 过程，所以回答你原来的问题，这两个库基本上是完成同一件事的两种方式 - 第一种只是处理 Oauth2 交互，但第二种提供了完整的包以与 API 本身交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:25:03.017

我刚刚记录了我成功集成 Google 日历的方法。如果不使用 Google 库，我找不到任何文档来访问日历。所以我自己写了：

[http://www.tqis.com/eloquency/googlecalendar.htm](http://www.tqis.com/eloquency/googlecalendar.htm)

# c++ - C++ can't establish communication between variables in separate functions

> ID：13557680
> 
> 赞同：3
> 
> 时间：2012-11-26T01:58:45.730
> 
> 标签：c++, function, pointers

I am making a text-based RPG with C++ and I'm having the same error pop up time and again, and I'm sure I'm doing something fundamentally wrong, but I don't know what. Searches turned up the solution to the specific compiler error, but not anything I can use to fix the code I'm writing.

**Question I want answered:** How do I use pointers to enable communication of variables between separate functions? In other words, how can I use pointers to point to a variable's value so that I can use and manipulate that value in a function in which it was not declared?

**TL;DR version:** I'm trying to make my "exp" int variable communicate with outside functions using pointers. I get the error "ISO C++ forbids comparison between pointer and integer [-fpermissive]"

**Long version:** Here's a bit of the code where I'm having problems:

In file charlvl.cpp:

```
...
int lvl = 1;
int *exp = 0;//value I want communicated to main()
int str = 0;
int vit = 0;
... 
```

in file fight.cpp (main.cpp):

```
...
//you've just killed a monster

cout << "\nThe monster drops to the ground." << endl;
cout << "You gained " << expValue << " experience!" << endl;
&exp += expValue;//&exp is the character's experience.

//expValue is the exp gained upon monster death
//*exp (from charlvl.cpp) is the value I want to communicate to here. 
```

It was not declared here, but in charlvl.cpp. How do I establish communication between the declared variable in charlvl.cpp and main() without having to resort to using global variables?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:11:24.807

如果将exp定义为全局指针，就不用考虑通信的事情了，直接在不同的函数中使用就可以了，但是使用方式是错误的。

`&exp += expValue;`

应该改为

`*exp += expValue;`

因为`*`意味着将指针的内容提供给我。

顺便说一句，尝试不将 exp 定义为指针也可能有效。

`int exp = 0;` `exp += expValue;`

这一切都基于`exp`一个全局变量或全局指针。

如果您在这样的函数中定义了它：

```
void func()
{
   int *expPtr = 0;
   int exp = 0
} 
```

你想在另一个功能中使用它

```
void use()
{
   // trying to use expPtr or exp.

} 
```

我知道的方法是：

1、使用本地var并在中返回`func()`，但要注意返回的var只是一个副本。

```
int func()
{
   int exp = 0;
   exp++;
   return exp;
} 
```

2、使用本地指针并为其分配内存，然后返回指针或将新内存分配给全局指针。但是要小心内存泄漏，不使用就需要删除。

```
int * func()
{
   int *expPtr = 0;
   expPtr = new int(2);
   return expPtr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:01:49.487

你已经把`&`and`*`操作符弄糊涂了。`*`把一个`int*`变成一个`int`，而`&`把一个`int*`变成一个`int**`。

这就是你想要的：

```
(*exp) += expValue; 
```

您可能需要考虑使用引用。

# php - 嵌套的while循环 - 我做错了什么？

> ID：13557681
> 
> 赞同：-1
> 
> 时间：2012-11-26T01:58:49.037
> 
> 标签：php, arrays, while-loop, nested

我想这个问题真的很简单，但我无法弄清楚我做错了什么。我有一个嵌套的 while 循环和两行。结果应该是：

```
ManU - Arsenal
Chelsea - Liverpool
ManCity - Everton
Tottenham - Fulham 
```

但我得到的是：

```
LiverpoolEvertonFulham
ManU - Arsenal
Chelsea - 
ManCity -
Tottenham - 
```

这是代码：

```
$row1 = array('ManU','Chelsea','ManCity', 'Tottenham');
$row2 = array('Arsenal','Liverpool','Everton', 'Fulham');

    $i = 0;
    $j = 0;

    echo "<table>";
    while($i < count($row1)){
        $a = $row1[$i];
        echo "<tr><td>".$a." - ";
        $i++;

        while($j < count($row2)){
            $b = $row2[$j];
            echo $b."</td></tr>";   
            $j++;
        }
    }
    echo "</table>"; 
```

问题是它必须是一个嵌套的while循环，因为实际上我正在使用SQL，这只是问题的简化版本（行而不是db表行），在另一个版本上问题是一样的，所以它是我认为不是 SQL 问题。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:05:12.570

你不需要 2 个循环

```
while($i < count($row1)){
        echo "<tr><td>".$row1[$i]." - ".$row2[$i]."</td></tr>";
        $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:48:12.807

`reset($row2)`秒后插入。您需要将循环重置为第一个并再次循环。在`mysqli` `fetch_assoc()`使用中`data_seek(0)`。

# c# - 引用其他包含 app.config 文件的 exe 的可执行文件的 app.config 文件中应包含什么

> ID：13557687
> 
> 赞同：1
> 
> 时间：2012-11-26T01:59:42.373
> 
> 标签：c#, app-config

我对如何使用应用程序配置文件感到困惑。我有一个连接到 SQL 服务器数据库的程序，从特定表中检索数据。我正在使用 LinqToSql 类来执行此操作。当我最后按照向导操作时，**连接字符串被放置在 app.config 文件**中。

然后我计划将该程序用作类库，因此我从另一个可执行文件（即 wpf 应用程序）添加对该 exe 的引用。在该 wpf 应用程序上，我必须放置一个包含连接字符串的 app.config 文件才能使程序正常工作。

到目前为止，我明白了一切。**现在我感到困惑的部分是为什么我不必也复制位于 app.config 文件中的设置以使程序正常工作？**哪些设置可以在引用的可执行文件上，哪些不可以。例如，我知道连接字符串应该在 wpf 应用程序的 app.config 文件中。但是用户设置：

![在此处输入图像描述](../Images/bde49772d4a7d326e148bbe74c63b90d.png)

**应用程序配置：** ![在此处输入图像描述](../Images/cf2e1122abb1b455ee07345235a2aabd.png)

可以在引用的可执行文件的 app.config 上。

**总之，为什么我必须将内容从引用的可执行文件的 app.config 文件移动到 wpf 应用程序的 app.config 文件，而我不必从引用的可执行文件 app.config 文件中移动其他内容？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:05:52.083

默认情况下，使用的配置文件是正在执行的进程/程序的配置文件。由于您的 WPF 应用程序作为其自己的可执行文件运行，因此配置设置需要存在于其配置文件中。

至于其他设置，您的 WPF 应用程序可能不需要它们。

附带说明一下，让 WPF/客户端应用程序访问服务而不是直接访问数据库本身通常是一种更好的做法。这意味着此时连接字符串将进入服务的配置文件。WPF 应用程序只会向服务询问信息。

# c - autocomplete directory name with C

> ID：13557690
> 
> 赞同：0
> 
> 时间：2012-11-26T01:59:56.753
> 
> 标签：c, linux, autocomplete

I have a C code, which prompts users for list of directory name, it just uses plain scanf() to receive the input and proceeds. Now I would like to provide autocomplete for directory names (like bash does). Say user enter /home/a and press TAB - it displays list of available user directories that begins with 'a'.how to achieve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:06:46.437

`scanf`不适用于内核熟模式终端驱动程序提供的基本级别（基本上只是退格）之外的任何类型的自动完成甚至交互式编辑。如果您想进行更高级的交互输入，则需要更改终端模式，以便获取每个关键事件并自己处理它们，或者您可以使用类似的库`readline`为您完成此操作。

# iphone - load and unload a message

> ID：13557693
> 
> 赞同：0
> 
> 时间：2012-11-26T02:00:15.690
> 
> 标签：iphone, ios, xcode

I create a message when a process starts (BOOL YES) and I am trying to make it go away when it ends (BOOL NO), debugging shows me stepping through the whole function both in the beginning and end, however the message is still there.

Where am I going wrong? Thank you in advance

```
-(void) loadStillLoadingMessage:(BOOL)yesNo{
CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;
CGFloat screenWidth = screenSize.width;
CGFloat screenHeight = screenSize.height;
UILabel *loading = [[[UILabel alloc]initWithFrame:CGRectMake((screenWidth/2)-75,(screenHeight)-140,300,40)]autorelease];

loading.text = @"still loading";
loading.backgroundColor = [UIColor clearColor];
loading.textColor = [UIColor blueColor];
loadingLabel = loading;
[self.view addSubview:loadingLabel];
[loadingLabel setHidden:YES];
if (yesNo == YES) {
    [loadingLabel setHidden:NO];
}else if (yesNo ==NO){
    [loadingLabel setHidden:YES];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:05:40.447

每当调用此方法`UIView`时，它都会创建一个。因此，`UIView`您第一次创建并显示与`UIView`您第二次创建、显示然后隐藏是不同的。您需要查看实例变量（在头文件中声明变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:08:33.317

您遇到的问题是您没有从 self.view 中删除旧的加载。

```
-(void) loadStillLoadingMessage:(BOOL)yesNo{
    CGRect screenBound = [[UIScreen mainScreen] bounds];
    CGSize screenSize = screenBound.size;
    CGFloat screenWidth = screenSize.width;
    CGFloat screenHeight = screenSize.height;
    UILabel *loading = [[[UILabel alloc]initWithFrame:CGRectMake((screenWidth/2)-75,    (screenHeight)-140,300,40)]autorelease];

    loading.text = @"still loading";
    loading.backgroundColor = [UIColor clearColor];
    loading.textColor = [UIColor blueColor];
    loadingLabel = loading;

    //removing the previous label from the self.view if exist
    loadingLabel.tag = 999;
    [[self.view viewWithTag:999] removeFromSuperview];

    [self.view addSubview:loadingLabel];
    [loadingLabel setHidden:YES];
    if (yesNo == YES) {
         [loadingLabel setHidden:NO];
    }else if (yesNo ==NO){
      [loadingLabel setHidden:YES];
    } 
```

}

# php - Apache URL Re-writing not functioning properly

> ID：13557696
> 
> 赞同：8
> 
> 时间：2012-11-26T02:00:54.860
> 
> 标签：php, apache, .htaccess, url-rewriting

I am trying to use apache-rewrite rule to convert the below URL:

> `http://localhost/foo/bar/news.php?id=24`

Into this format:

> `http://localhost/foo/bar/news/foo-bar`

The number `24` is an `id` of a random row from a MySQL table, which also contains `title` and `content` fields.

```
MariaDB [blog]> select * from articles;
+----+---------+----------+ 
| id | title   | content  |
+----+---------+----------+ 
|  1 | foo-bar | bla bla  | 
+----+---------+----------+ 
1 row in set (0.00 sec) 
```

I have the following rule inside my `.htaccess`:

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
^news/([A_Za_z0_9_]+)$ DIRECTORY/AID/news.php?id=$1 [QSA,L] 
```

I also have a php code that generates a link like this:

```
$link = "<a href='news.php?id={$row['id']}'></a>";
echo $link; 
```

However, I can't get the rewrite rule to change the path as the desired end result.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:30:34.163

替换（真实）URL 有一个数字 -Code- 来标识链接（根据您的描述）：***http://localhost/DIRECTORY/AID/news.php?news=42***

在这种情况下，该代码是**42**，但您要显示的 URL 没有它。如果没有这个数字，我们总是会收到错误 404。就像只输入：***http://localhost/DIRECTORY/AID/news.php?news=***

例如，必须通过在“/”后面添加代码来修改要显示的 URL。可能是连字符等，但必须相应地修改正则表达式。

这是一个示例，输入：***http://localhost/news/42/***以转到***http://localhost/DIRECTORY/AID/news.php?news=42***：

```
RewriteEngine On
RewriteRule ^news/([0-9]+)/?$ DIRECTORY/AID/news.php?news=$1 [NC,L] 
```

这就是你所需要的。要测试此示例，请在***http://localhost/DIRECTORY/AID/*****的news.php**中插入仅此代码

 *```
<?php
if ( $_GET[ 'news' ] == '42' ) {
  echo  "HERE I AM<br /><br />";
}
?> 
```

根据 OP 描述更新。可以使用任何名称代替**This_is_news**：

```
RewriteEngine On
RewriteRule ^news/([0-9a-zA-Z-_]+)/?$ DIRECTORY/AID/news.php?news=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T20:51:38.213

首先，您需要更改 html 中的 href，以提供新的 url 格式

```
function news_preview() {
$query = "SELECT * FROM news ORDER BY id DESC LIMIT 5  ";
$result = mysql_query($query) or die(mysql_error());
while($row=mysql_fetch_array($result)) 
{   
  echo "<a href=\"/news/$row[id]\">  ". substr($row['title'], 0,26)."...</a><br/>".; }
} 
```

将生成像这样的网址`http://localhost/news/24`

请注意，我`/DIRECTORY/AID`从 url 中删除了 ，因为 htaccess 建议您希望它是 url，而不是您在文本中所说的。

但是现在获取到`http://localhost/news/this_is_article_title`url 的类型。`this_is_article_title`因为和 id之间没有相关性`24`，所以实现这一点的唯一方法是将 id 也添加到 url 中，或者让 php 在数据库中查找具有此标题的新闻文章。

然而，最后一个解决方案存在一些问题，因为您不能只使用 url 中的标题。你必须转义字符。此外，您还必须为数据库中的标题行添加索引以获得更好的性能。

所以我会选择第一个解决方案。我们将生成这样的 url

`http://localhost/news/24/this_is_article_title`

首先是php部分

```
function news_preview() {
$query = "SELECT * FROM news ORDER BY id DESC LIMIT 5  ";
$result = mysql_query($query) or die(mysql_error());
while($row=mysql_fetch_array($result)) 
{ 
  $url = "/news/$row[id]/".preg_replace('/[^a-zA-Z0-9-_]/', '_', $row['title']);  
  echo "<a href=\"$url\">  ". substr($row['title'], 0,26)."...</a><br/>".; }
} 
```

接下来是 htaccess 部分。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^news/([0-9]+)/([A-Za-z0-9_-]+)$ DIRECTORY/AID/news.php?id=$1 [QSA,L] 
```

我认为应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T12:02:12.063

不幸的是，我无法用 PHP 或 Apache 回答您的问题（尽管我正在使用手动 REST 转换器在我当前的项目中创建 URL 地址），但据我了解，您希望您的用户输入**http:/ /localhost/DIRECTORY/AID/article.php?a_id=24**并且地址栏应该像**http://localhost/DIRECTORY/AID/news/this_is_article_title 一样结束**。

我不完全确定这会给您带来什么好处，请记住，我的解决方案不允许您的最终用户键入 RESTful URL 并最终进入带有 QueryString 地址的页面。你需要一些额外的工作来做到这一点，甚至需要更多的工作来保持它与数据库同步（我建议使用一个脚本来定义 RESTFUL URL，在数据库中查询主题然后返回 ID 或页面内容。 ..但这是另一天的另一个堆栈溢出问题。

**解决方案** 我提出的解决方案需要 HTML5 文档类型和*少量*的 Javascript。

```
history.replaceState(null, "history title here", "news/this_is_article_title"); 
```

这样做的目的是更改地址栏中的 URL，而不会触发页面重定向、重新加载或其他任何操作。这个 javascript 可以用您的 PHP 动态编写，以便在提供页面时更新地址。文档中的位置越高，更改越快。

这是一个 jsFiddle 链接：http: [//jsfiddle.net/uT3RP/1/](http://jsfiddle.net/uT3RP/1/)

不幸的是，他们在 iframe 中运行代码，因此它不能控制主地址栏，因此我添加了一个警报，显示地址栏位置会说什么，以供证明。这不是最优雅的解决方案。如果没有确保显示的 URL 可用于访问同一页面的故障保险，我什至不建议您做您正在做的事情。免责声明...您的问题通过 1 行 js 和 doctype 更改解决（如果您不使用 HTML5）。

您可以停止鞭打可怜的 ol' htaccess 并继续您的项目:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T18:44:57.237

更改链接：

```
echo "<a href=\"news.php?news=$row[id]\"> ". substr($row['title'], 0,26)."</a> 
```

至

```
echo "<a href=\"news/$row['title']\">".$row['title']."</a>" 
```

这样，链接将转到`news/$row['title']`而不是`news.php?id=...`. 现在在 page`DIRECOTORY/AID/news.php`中，您应该获取`id`并检查它是否是数字**或**文本，如果是文本，则将其与 匹配`$row['title']`，然后相应地加载页面。

笔记：

1.  这假设 $row['title'] 在所有其他行中是唯一的。
2.  标题不包含非 HTML 内容，在这种情况下，您必须对这些字符进行 URL 转义。

如果标题不是唯一的，那么您可能应该这样做`news/{id}/{title}`，然后将其重写为`DIRECTORY/AID/news.php?id={id}&title={title}`，然后您可以将其基于 ID 而不是标题。

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T15:02:11.123

这似乎是一个复杂的问题，因为你不知道它到底在哪里做错了。

我建议您将您想做的事情分成小部分，并在将它们组合在一起之前使它们各自正常工作。例如：

```
 1\. Make sure .htaccess file is readable and can do some simple thing, preventing directory indexing for instance.
 2\. Make sure you can redirect something with simple html code.
 3\. Make sure you can run Felipe's example code successfully. From here you can get good picture of what is going on. 
```

作为旁注：

像这样重写更常见：

```
http://localhost/DIRECTORY/AID/news.php?a_id=24 TO -->
http://localhost/DIRECTORY/AID/news/24_this_is_article_title 
```

请注意，id 24 仍然保留在重写后的 url 中。这将使模式匹配更简单，并避免不必要的标题重复处理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T06:39:18.927

**这是关于 URL-Rewrite 和 String-to-Id 算法的问题。**

最重要的是，请记住，无论您的 url 通过 rewrite 模块发生什么变化，浏览器栏中的 url 始终包含诸如 id 或 string 之类的帖子参数（关于您的新闻）。

现在的问题。我们的目的只是重写 Url：

```
http://localhost/DIRECTORY/AID/news/this_is_article_title 
```

至：

```
http://localhost/DIRECTORY/AID/news.php?a_id=24 
```

使用 rewrite 模块，我们只能将其重写为：

```
http://localhost/DIRECTORY/AID/news.php?title=this_is_article_title 
```

这是 htaccess 部分，已经在[htaccess-online-tester上进行了测试](http://htaccess.madewithlove.be/)

```
RewriteRule ^DIRECTORY/AID/news/([A-Za-z0-9_]+)$ DIRECTORY/AID/news.php?title=$1 [QSA,L] 
```

剩下的工作是构建一个算法，将标题映射到重写模块无法帮助我们的新闻（尤其是你手动一个一个地重写 url）。我们可以使用下面的php代码：

```
<?php

//write url reflect to news title.
function build_news_url_by_title(){
    $query = "SELECT * FROM news ORDER BY id DESC LIMIT 5";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        echo "<a href=\"news/".strtr(substr($row['title'], 0,26), " ", "_")."\">".substr($row['title'], 0,26)."</a>";
    }   
}

function get_news_by_title($title){
    $real_title = strtr($title, "_", " ");
    $query = "SELECT * FROM news WHERE title LIKE %".$real_title."% LIMIT 1";
    return mysql_query($query) or die(mysql_error());
}

$title = $_POST['title'];

$news = get_news_by_title($title);

//some code return the news
... 
```

所以网址：

```
http://localhost/DIRECTORY/AID/news/this_is_article_title 
```

也可以给我们消息。

**最后，从上面的步骤中，如果我们输入 url**

```
http://localhost/DIRECTORY/AID/news/this_is_article_title 
```

**在浏览器栏中，它也可以给我们新闻。它与愚蠢的ID无关。虽然，上面的代码可能有一些错误，但不要把它放在你的产品服务器上。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-06T05:35:09.610

如果您觉得您的`.htaccess`文件没有按预期工作，那么这是一个服务器配置问题，很可能与`AllowOverride`Apache 配置下的指令有关。

在您的`http.conf`文件中找到如下所示的部分：

```
<Directory>
    Options FollowSymLinks
    AllowOverride None
</Directory> 
```

将指令更改`AllowOverride`为允许`All`。

```
<Directory>
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

接下来是确保`mod_rewrite`为您的 XAMPP 安装启用了该模块。搜索以下行：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

删除`#`它看起来像这样：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

**保存所有更改后**重新启动 Apache 服务。****

 **还要确保您`RewriteBase`在配置中使用该指令，`.htaccess`如下所示：

```
RewriteEngine On
RewriteBase /DIRECTORY/AID/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
^news/([A-Za-z0-9_]+)(/)?$ news.php?title=$1 [QSA,L] 
```

接下来是确保您的链接指向重写 URL。您的回声线应类似于以下内容：

```
echo "<a href=\"news/" . $row['title'] . "\">  " . substr($row['title'], 0, 26) . "...</a><br />"; 
```

现在，由于您只能使用此 URL 重写方法检索标题，我们需要相应地配置您的 PHP 脚本以根据标题检索内容。如果您仍然只想使用“id”来检索记录，那么您的 Rewrite URL 应该以某种形式包含“id”。这种形式的典型例子是：

*   `news/the_news_title_123`
*   `news/123_the_news_title`
*   `news/123/the_news_title`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-05T08:18:02.353

你能看看这是否有效吗？

```
RewriteEngine On
RewriteBase /DIRECTORY/AID/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
^news/([A-Za-z0-9_]+)$ news.php?id=$1 [QSA,L] 
```

**编辑：**修复了正则表达式字符类定义。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-05T08:24:40.373

您缺少 URL 的标题。如果您希望在 URL 中显示它，那么您也必须在链接中包含它，如下所示：

```
<a href="news.php?news_id=$id&title=$url_tile"> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-26T12:30:37.860

在 RewriteEngine On 之后放置 RewriteBase 它会在您开始重定向之前正确设置重写引擎

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-28T23:58:54.017

**我无法发表评论，所以我必须回答。**

阅读所有答案和您的问题，尚不清楚您想要什么。至少对我来说。你说，例如：

`http://localhost/DIRECTORY/AID/article.php?a_id=24`至

`http://localhost/DIRECTORY/AID/article/this_is_article_title`

但我想这不太对，除非你想

`http://localhost/DIRECTORY/AID/article.php?a_id=24`

成为在浏览器地址栏中输入的 URL，如果是，重定向的目的是什么？最后，任何访问者都必须准确地输入您不希望他们输入的内容。

我的猜测是您希望输入友好的 URL：

`http://localhost/DIRECTORY/AID/article/this_is_article_title`，所以问题应该是相反的：

`http://localhost/DIRECTORY/AID/article/this_is_article_title`至

`http://localhost/DIRECTORY/AID/article.php?a_id=24`

接下来似乎不太清楚的事情是浏览器栏中显示的内容是什么？唯一的答案是：输入的 URL。它不可能显示任何不同的东西。

简而言之：如果您希望**http://localhost/DIRECTORY/AID/article/this_is_article_title**显示在地址栏中，那就是您必须输入的内容。真正的 URL，即 SUBSTITUTION ( **http://localhost/DIRECTORY/AID/article.php?a_id=24** ) 永远不会显示，也永远不会输入。这就是重定向的用途。

另一方面，也不清楚 news.php 提供的 ID 号如何转换为**article/this_is_article_title 之**类的字符串。¿ 这些字符串在哪里，有多少个 ID 号，应该使用哪种算法或公式来实现该转换，这些 ID 中的哪些是您在评论中提到的“根”以及如何识别它们等？您应该详细说明这一点，因为它似乎是即兴的，与您之前的评论不一致。

当然，我可能是错的。我只是想尝试帮助您解决问题。

天才们，请不要对这个答案投反对票，请阅读。我不是要回答这个问题，而且我离天才还差得很远。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-11-26T02:03:07.937

看起来你忘记了“news.php”前面的斜线。***

# javascript - JQuery Mobile 出错

> ID：13557701
> 
> 赞同：26
> 
> 时间：2012-11-26T02:02:06.270
> 
> 标签：javascript, jquery, asp.net, jquery-mobile, scriptmanager

下面，我收到此错误：

![在此处输入图像描述](../Images/678c435c48054a158b5374042d0c2b4a.png)

我已将问题代码缩小到 JQuery Mobile 1.0 或更高版本和 Asp.NET ScriptManager。

我向 Visual Studio 2012 添加了一个新的 Web 窗体项目，并包含以下代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" ScriptMode="Release" runat="server"></asp:ScriptManager>
    <div>

    </div>
</form>
</body>
</html> 
```

代码隐藏页面中没有代码。

*   就是这样，但是当我运行项目时， 当同时包含 ScriptManager 和 JQuery Mobile 脚本时，**我会收到上述错误。**
*   **删除 JQuery Mobile 或 ScirptManager 时**不会发生错误。****

 **想了半天并试图找到解释，我遇到的一个特定网站建议将 ScriptMode="Release" 添加到 ScriptManager。

将 ScriptMode="Release" 添加到 ScriptManager 后，我没有收到上述错误。

搜索定义了 ScriptMode 的 MSDN：获取或设置一个值，该值指定是否呈现客户端脚本库的调试或发布版本。

将ScriptMode添加到ScriptManager后没有抛出错误，但是为什么呢？有人可以解释为什么添加 ScriptMode 会阻止错误出现，并且仅添加 ScriptMode 就意味着真正的求解器或创可贴？

错误在这里抛出： ![在此处输入图像描述](../Images/4e0363e96ed4cb2d0147f200b3fd1007.png)

谢谢

**下面我包含了呈现的 HTML 页面：**

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title><link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <form method="post" action="WebForm1.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE3MTc1MDc5MjBkZKegov+UVDfF6HxSUeRymFH24991gFZlPU0b/IsFSVOC" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebResource.axd?d=YNeW-uV30W9QUFseu7cpdlXTvjGS-17TUbJFOrYgly8h7oJPnNmO65B9MsXEKqakJOaVgg29CB6vB4ZdmlLF7g8EEKPfdXLBpPT96ABclOM1&amp;t=634773918900000000" type="text/javascript"></script>

<script src="/ScriptResource.axd?d=1zt3Mkq4WcBu9zbsV4m9-M7KCvrT-jr1XXgEzhW9nlIjwSm5LqLoLvy1RRMu-5CPbCTtFRsnupAShqvEwf1EA89LxKLiAOgKvWaOicLhKJXKcoRKfxG9wfeNLN-ZylWfgK9ozBiE9bfZ-FsMcBHxpWRRemoiIMSGZzuYvNAs6Evl_1N7xJCIcbyAp01izsBK0&amp;t=6119e399" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script>

<script src="/ScriptResource.axd?d=QXV43dBeyoevgM325nU9rlBmVyB375pfaFEuLQ1v1BisiTdf-HdmxtF90_hgFfCcn3l6abc0C_OIvNebx_7cosgD1E8ZEeTK680r4HRGT7Pngzk9Ei-BKOI48hrwHGv9cUfKN2zloA0qh8YHXKfefO8eUGQhV8M-XarSzMOPpgJwr8FS8Yb8rvlVPvcSzSTE0&amp;t=6119e399" type="text/javascript"></script>
        <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ScriptManager1', 'form1', [], [], [], 90, '');
//]]>
</script>

        <div>
        </div>
    </form>
</body>
</html> 
```

**下面我展示了我是如何尝试打开 noConflict 的：**

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

<script type="text/javascript">
    $.noConflict();
</script>

<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T17:16:45.367

我测试了您的代码，并且能够复制错误。

首先，我认为 ScriptManager 必须在使用它的任何东西之前存在。这样做不会导致错误：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title></title>
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    </form>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</body>
</html> 
```

其次，您包含的脚本是缩小版或发布版。这是一个未经证实的猜测，但它可能需要非缩小或调试版本进行渲染，并且它们不存在并且放置 ScriptMode="Release" 可能让它知道它应该使用缩小版本。这可以通过在项目中包含缩小和调试脚本而不是远程获取它们来进行测试......这就是 MVC 的工作方式，这就是为什么我建议 Web 应用程序可能工作相同的原因。

旁白：按照此[链接](http://msdn.microsoft.com/en-us/library/bb344940.aspx)上的信息，这是另一种不会产生任何错误的方法：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title></title>
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
                <Scripts>
                <asp:ScriptReference Path="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"/>
                <asp:ScriptReference Path="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js" />
            </Scripts>
        </asp:ScriptManager>
    </form>
</body>
</html> 
```

编辑：

出于某种原因，我还尝试在 Web.config 中进行设置：

```
<compilation debug="true" targetFramework="4.0"/> 
```

对此：

```
<compilation debug="false" targetFramework="4.0"/> 
```

这也适用于您的原始代码，但由于某种原因，我觉得它是一个创可贴，因为它很可能只是隐藏错误而不是修复它。**

# r - 我可以使用R属性来保存物理单位吗？

> ID：13557703
> 
> 赞同：5
> 
> 时间：2012-11-26T02:02:14.393
> 
> 标签：r, constants, units-of-measurement, code-readability

我可以（应该）使用 R 属性来保存物理单位和类似信息作为用户提示吗？

```
epsilon0 <- 8.854188e-12
# name <- "electric constant"
# source <- "CODATA"
# unit <- "F m-1" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:05:27.977

您可以使用以下代码：

```
attributes(epsilon0) <- list(name = "electric constant", source = "CODATA", unit="F m-1") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T02:08:53.400

除了@MatthewLundberg 的回答，您还可以设置和获取单个属性，例如：

```
> attr(epsilon0,"name") <- "electric constant"
> epsilon0
[1] 8.854188e-12
attr(,"name")
[1] "electric constant"

> attr(epsilon0,"name")
[1] "electric constant" 
```

# c - 套接字编程 connect() 在我第二次运行循环时失败

> ID：13557705
> 
> 赞同：1
> 
> 时间：2012-11-26T02:02:34.433
> 
> 标签：c, sockets, connect

好吧，我正在尝试在 for 循环中运行服务器端和客户端。我第一次运行它时，它运行良好，但第二次连接失败或卡在接受（）。这是我的代码：

客户端代码：

```
for(i=0;i<2;i++)
{
        if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
    {
        printf("\nError : Connect Failed\n");
        return 1;
    }   

    //***************Writing_I***************
    memset(recvBuff, '0',sizeof(recvBuff));
    ticks = time(NULL);
    snprintf(recvBuff, sizeof(recvBuff), "%.24s\r\n", ctime(&ticks));
    if((n = send(sockfd, recvBuff, strlen(recvBuff), 0))<0)
    {
        printf("Error : send operation failed\n");
    }

    //***************Reading_I***************
    memset(recvBuff, '0', sizeof(recvBuff)); 
    n= recv(sockfd, recvBuff, sizeof(recvBuff)-1, 0);
    {
        printf("bytes read: %d\n", n);
        recvBuff[n] = '\0';
        printf("Data: %s\n",recvBuff);
    } 
    if(n < 0)
    {
        printf("\n Read error \n");
    } 
}
close(sockfd); 
```

服务器代码：

```
if((connfd = accept(listenfd, (struct sockaddr*)NULL, NULL))>=0)
{ 
    for(i=0;i<2;i++)    
    {   
        fd= open("/home/t/Desktop/CS II/A4/test.txt", O_RDONLY);
        //***************Reading***************
        memset(sendBuff, '0', sizeof(sendBuff)); 
        count = recv(connfd, sendBuff, sizeof(sendBuff)-1, 0);
        {
            printf("bytes read: %d\n", count);
            sendBuff[count] = '\0';
            printf("Data: %s\n",sendBuff);
        }
        if(count < 0)
        {
            printf("Read error \n");
        }

        //***************Writing***************
        ticks = time(NULL);
        memset(sendBuff, '0', sizeof(sendBuff)); 
        printf("Reading from file\n");
        if((noOfBytesRd= read(fd, sendBuff, sizeof(sendBuff)-1))<0)
            printf("\n Error : read operation failed\n");
        sendBuff[noOfBytesRd]='\0';
        if((count = send(connfd, sendBuff, strlen(sendBuff), 0))<0)
            printf("\n Error : wtite operation failed\n");
    }
    close(connfd);  
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:05:53.940

一个套接字`connect`在其生命周期中只能被 'ed 一次。您应该为要建立的每个连接创建一个单独的套接字，并在完成连接后关闭它。

# c++ - OpenGL 属性偏移未按预期工作

> ID：13557708
> 
> 赞同：1
> 
> 时间：2012-11-26T02:03:08.313
> 
> 标签：c++, opengl, opengl-3

我试图弄清楚为什么使用的偏移值`glVertexAttribPointer`没有像我预期的那样工作。

该代码可在[http://glbase.codeplex.com/获得](http://glbase.codeplex.com/)

我的顶点数据是这样的：

```
glBase::Vector3 data1[]={
    glBase::Vector3(-0.4f,0.8f,-0.0f),  //Position
    glBase::Vector3(1.0f,0.0f,0.0f),    //Color
    glBase::Vector3(-.8f,-0.8f,-0.0f),  //Position etc
    glBase::Vector3(0.0f,1.0f,0.0f),
    glBase::Vector3(0.0f,-0.8f,-0.0f),
    glBase::Vector3(0.0f,0.0f,1.0f)
}; 
```

属性绑定是这样发生的：

```
program.bindVertexAttribs<float>(vbo1,0, "in_Position", 3, 6, 0);
program.bindVertexAttribs<float>(vbo1,1, "in_Color", 3, 6, 12); 
```

bindVertexAttribs 函数定义如下：

```
template<typename T>
void bindVertexAttribs(const VertexBufferObject& object, GLint location,const std::string& name, unsigned int width, unsigned int stride, unsigned int offset)
{
    object.bind();

    glBindAttribLocation(m_ID, location, name.c_str());

    glVertexAttribPointer(location, width, GL_FLOAT, GL_FALSE, stride*sizeof(T),(GLvoid *)offset);
    glEnableVertexAttribArray(location);
} 
```

此代码无法在我的机器上正确呈现（ATI 5850,12.10 驱动程序）并呈现以下内容：

![在此处输入图像描述](../Images/45ae460e0600e1d01972a2350c12d936.png)

如果我将属性绑定更改为：

```
program.bindVertexAttribs<float>(vbo1,0, "in_Position", 3, 6, 12);
program.bindVertexAttribs<float>(vbo1,1, "in_Color", 3, 6, 0); 
```

我得到这样的正确渲染：

![在此处输入图像描述](../Images/93bfc2241add2e6be1184bb5decc3c0c.png)

这对我来说没有意义，因为位置是数据数组中的前 3 个浮点数，颜色是接下来的 3 个浮点数，然后再次定位，依此类推。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:21:38.777

```
glBindAttribLocation(m_ID, location, name.c_str()); 
```

这无济于事；随意删除这条线，看看它做了多少。

如果`m_ID`是一个链接的程序对象（如果不是，那么你的代码就更没有意义了。除非你使用 VAO 来捕获你的属性数组状态），那么这个函数将没有真正的效果。`glBindAttribLocation`仅*在链接之前*有效。链接后无法更改属性绑定。所以每个使用程序的对象都需要使用*相同*的属性。

您应该[为您的顶点属性名称建立适当的约定。](https://stackoverflow.com/questions/11705924/glsl-uniform-locations-in-glsl-1-2-and-depth-testing-in-shaders/11712816#11712816)当您创建任何程序时，您应该在链接之前将您的约定应用于该程序。这样，您就知道它`in_position`总是属性 0，例如。你不必用毫无意义的`glGetAttribLocation`电话来查找它。而且你不会被诱惑去做你在这里做的事情，这是行不通的。

# types - ocaml 类型内的类型

> ID：13557709
> 
> 赞同：5
> 
> 时间：2012-11-26T02:03:29.543
> 
> 标签：types, ocaml, records

如果我在模块状态中有一个类型

```
type state = {x: int; y: int} 
```

我在模块游戏中有另一种类型

```
type game = State.state 
```

如何访问具有游戏类型的对象中的记录值？

例如，如果我有一个游戏“g”，gx 会给我一个“未绑定记录字段标签 x”错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T02:46:39.287

字段的名称位于`State`模块命名空间中。你可以说`g.State.x`，或者你可以打开`State`模块。

```
let f g = g.State.x 
```

或者：

```
open State

let f g = g.x 
```

如果您希望字段出现在`Game`模块命名空间中，您可以重复它们：

```
type game = State.state = {x: int; y: int} 
```

您还可以使用该`include`工具来包含该`State`模块。

例如，您的`Game`模块可以说：

```
include State
type game = state 
```

在这两种情况下，您都可以参考`Game.x`：

```
let f g = g.Game.x 
```

或者：

```
open Game
let f g = g.x 
```

也有两种表示法可以为一个表达式打开一个模块：

```
let f g = Game.(g.x) 
```

或者：

```
let f g = let open Game in g.x 
```

**编辑：** 这是一个显示第一个（最简单）解决方案的 Unix 命令行会话：

```
$ cat state.ml
type state = { x: int; y : int }
$ cat game.ml
type game = State.state
$ cat test.ml
let f (g: Game.game) = g.State.x

let () = Printf.printf "%d\n" (f { State.x = 3; y = 4})
$ ocamlc -o test state.ml game.ml test.ml
$ ./test
3 
```

# windows - 是否可以使用 VirtualFreeEx 释放本地分配的内存？

> ID：13557713
> 
> 赞同：0
> 
> 时间：2012-11-26T02:04:03.303
> 
> 标签：windows, winapi

假设进程 1 在函数中使用 VirtualAlloc 分配了一些空间，并且该函数当时已经返回。如果第二个进程知道正确的地址，是否有可能使用 VirtualFreeEx 释放空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:59:43.967

这个问题的答案是肯定的。

内存归它所在的进程所有。它不属于分配它的进程。

在许多方面，这类似于`malloc`从一个线程调用然后`free`从另一个线程调用。这完全没问题。`VirtualAllocEx`用and做同样的事情是完全没问题的`VirtualFreeEx`。

# php - 更多地点的“记住我”

> ID：13557716
> 
> 赞同：4
> 
> 时间：2012-11-26T02:04:14.310
> 
> 标签：php, mysql, login

我正在尝试使用 PHP 和 MySQL 创建一个登录系统。我使用 cookie 是为了让用户长时间保持登录状态。cookie 有一个随机生成的字符串，该字符串也在数据库中。将它们相互比较并采取适当的措施。基本上，它是标准的身份验证系统。

我的问题是我不太确定如何解决来自多个位置的身份验证问题。由于每个用户只有一个随机字符串，如果他从另一个位置登录，他将从一个位置注销。

我能想出的唯一解决方案是一个表，其中存储了用户的多个登录，每个登录都有一个单独的随机字符串。

这是正确的方法吗？未使用的会话会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:08:57.417

如果要支持多个位置，则不能将 cookie 值保留在用户表中。相反，您应该创建一个新的自动登录表，分别使用 cookie 值和用户 ID 作为主键和外键。我相信这也是你的想法。

然后，出于管理目的，您可以记录最后一次使用任何值登录的时间。超过 XX 天的所有内容都会被删除，并且用户需要重新登录。您可以为此设置一个 cron 作业，也可以在每次有人使用 cookie 登录时运行它。

cron 删除作业可以处理更多记录（因为没有人在等待它完成），但为了优化，您需要在日期字段上建立索引（以防止表扫描）。

每次登录时的内务管理的优点是您只需查询该用户的 cookie 值，并且由于外键约束，查找速度很快。但您只能清理当前用户的 cookie，因此您可能会收集不再使用的 cookie。

# java - Eclipse 中没有包层次结构导入项目

> ID：13557717
> 
> 赞同：0
> 
> 时间：2012-11-26T02:04:49.697
> 
> 标签：java, eclipse, import, packages

我一直在尝试导入一个可以在朋友的计算机上运行的项目，但是无论我尝试什么，包层次结构都完全丢失了，结果就是这样![没有层次结构的包](../Images/12d6159bd97cd1e441ae391d8f81247b.png)

有没有人见过这个问题？我已经为此苦苦挣扎了一段时间。偶尔创建一个新项目并在 src 文件夹中复制工作，但我最近的尝试一直不成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:15:28.990

包裹的展示是用户的选择。单击包面板顶部的小向下箭头，然后从平面到分层选择“包演示”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T20:25:24.260

原来我们没有在源代码管理中包含 .classpath 文件。*掌心*。不过，很好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:43:05.863

也可能是文件夹未在项目中列为源文件夹。转到项目属性并检查根文件夹（此处看起来像“data”和“src”）是否在构建路径中列为源文件夹。

# objective-c - 指向指针还是不指向指针？或者这根本就是一个指针？

> ID：13557720
> 
> 赞同：0
> 
> 时间：2012-11-26T02:05:28.560
> 
> 标签：objective-c, pointers, memory-management, garbage-collection

好吧，自从我使用指针以来已经有很长时间了。现在我已经编写 .NET 代码十多年了，所以我不必处理它们。事实上，在 .NET 中它非常好，因为如果它不是值类型，那么它显然是引用类型，或者定义为指针。

因此，在 .NET 中，当我声明 a 时`string`，它肯定是一个底层指针，因为它是一个引用类型：

```
string s = "Hello Mike!"; 
```

但是，在 Objective-C 中，我似乎可以用两种不同的方式声明一个字符串：

```
NSString* s = "Hello Mike!";
NSString s = "Hello Mike!"; 
```

现在，如果我正确理解这一点，第一个声明非常类似于 .NET 中字符串的底层声明，即指针。但第二个究竟是什么？

现在请记住，我可能离这里很远，因为我刚刚开始深入研究 Objective-C，所以请原谅我的无知！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:12:21.410

您的任何`NSString`声明都不应该实际编译。第一个应该告诉您这是一个不兼容的分配，因为您分配了一个 C 字符串指针，就好像它是一个对象地址一样。第二个应该告诉您，您实际上不能声明一个对象，只能声明一个指向对象的指针。正确的语法是：

```
NSString* s = @"Hello Mike!"; 
```

在这种情况下，`s`是一个指针变量，它包含一个字符串对象的地址，具有“Hello Mike！” 价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:20:40.423

从 REALbasic 到 Objective-C 对我来说是相似的：它们都使用指针作为对象实例的引用，但在 REALbasic 中，这一事实是隐含的，而 Objective-C 是 C，因此必须使其显式。然而，这一事实实际上只是符号的意外。对于赋值和比较之类的事情，其含义是相似的。

阅读我关于此主题的书中的相关条目可能会对您有所帮助：

[http://www.aeth.com/iOSBook/ch03.html#_an_instance_reference_is_a_pointer](http://www.apeth.com/iOSBook/ch03.html#_an_instance_reference_is_a_pointer)

（事实上​​，您似乎还不了解如何形成 NSString 文字（它以 at 符号开头，例如`@"hello"`，是次要的。）

# ruby-on-rails-3 - Rails：模型或控制器中的代码

> ID：13557721
> 
> 赞同：0
> 
> 时间：2012-11-26T02:05:33.580
> 
> 标签：ruby-on-rails-3, model-view-controller

这里最好的方法是什么？我正在尝试清理一些代码，我想知道控制器是否是这种逻辑的最佳位置：

```
if user_signed_in?
  if current_user.try(:admin?)
    @docs = Doc.chronologic.page(params[:page]).per(5)
    @orders = Order.chronologic.page(params[:page]).per(5)
  else
    @docs = Doc.chronologic.where(:user_id => current_user.ftp, :retired => "active").page(params[:page]).per(5)
    @orders = Order.chronologic.where(:user => current_user.ftp).page(params[:page]).per(5)
  end
  respond_to do |format|
    format.html
    format.json { render json: @docs }
  end
else 
  redirect_to new_user_session_path
end 
```

如果有更好的位置，它会在哪里？

谢谢！

**编辑：**对于像对虾有一行又一行指令的方法来说，情况要糟糕得多`pdf`，但我似乎无法`send_data`从模型中开始工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:20:42.967

这基本上是穆所说的，但这是我的看法。

在您的应用控制器中：

```
def require_logged_in
  redirect_to new_user_session_path unless user_signed_in?
end 
```

在您的控制器中

```
before_filter :require_logged_in

def some_action
  @docs = Doc.chronologic.for_user(current_user).page(params[:page]).per(5)
  @orders = Order.chronologic.for_user(current_user).page(params[:page]).per(5)
  respond_to do |format|
    format.html
    format.json { render json: @docs }
  end
end 
```

在您的 Doc 模型中

```
scope :for_user, lambda do |user|
  where(:user_id => user.ftp, :retired => "active") unless user.admin?
end 
```

在您的 Order 模型中也有类似的东西。

根据您的编辑，绝对不要`send_data`从您的模型中进行操作。

# c - 编程二叉树 preOrder 函数

> ID：13557727
> 
> 赞同：2
> 
> 时间：2012-11-26T02:06:07.250
> 
> 标签：c, tree, binary-tree, preorder

我正在尝试编写一个递归函数来预先打印出这些值。但是，由于某种原因，它一直打印出与我的 inOrder 函数相同的内容。postOrder 函数可以正常工作，但我必须为那个函数稍微不同地执行递归函数。你们能看看我下面的代码，让我知道有什么问题吗？我真的很感激，因为这整天给我带来麻烦。提前致谢

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>

#define TRUE 1
#define FALSE 0

typedef struct bnodestruct
{
    int value;
    struct bnodestruct *left;
    struct bnodestruct *right;
}bnode;

typedef bnode *bnodePtr;

void displayMenu();
void insert (bnodePtr *hd, int val);
void inOrder(bnodePtr hd);
void preOrder(bnodePtr hd);
void postOrder(bnodePtr hd);
void empty (bnodePtr *hd);

int main (int argc, char **argv)
{
    int val;
    bnodePtr head;
    head = NULL;    

    char option;
    int result = 0;
    while(1)
    {
    displayMenu();

    printf("Choose an option : ");
    scanf("\n%c", &option);

    /*printf("The option chosen is %c\n", option);*/

    switch (option)
    {

        case 'q':
            printf("The program is exiting...\n");
            exit(-1);
        case 'i': 
            printf("Enter an integer value to be inserted into the linked list : ");    
            scanf("%d", &val);  
            insert(&head, val);
            break;
        case 'o':
            inOrder(head);
            break;
        case 'n':
            preOrder(head);
            break;
        case 'p':
            postOrder(head);
            break;
        case 'e':
            empty(&head);
            /*inOrder (head);*/
            break;

    }

    }

}

void displayMenu()
{

    printf("\n          Menu          \n");
    printf("(q): quit the program\n");
    printf("(i): insert integer value into the binary tree\n");
    printf("(e): empty all values from the binary tree\n");
    printf("(o): list the items contained in the binary tree in order\n");
    printf("(n): list the items contained in the binary tree in pre order\n");
    printf("(p): list the items contained in the binary tree in post order\n");
}

void insert (bnodePtr *hd, int val)
{

    if (*hd == NULL)
    {
        *hd = (bnodePtr)malloc(sizeof(bnode));
        (*hd)->left = NULL;
        (*hd)->value = val;
        (*hd)->right = NULL;
    }
    else 
    {
        if (val < ((*hd)->value))
            insert (&((*hd)->left), val);
        else if (val > ((*hd)->value))
            insert (&((*hd)->right), val);
    }

}

void empty (bnodePtr *hd)
{

    bnodePtr temp1 = *hd;
    bnodePtr temp2;

    while (temp1 != NULL)
    {

        temp2 = temp1;
        temp1 = temp1->left;

        free (temp2);

    }

    *hd = NULL;

}

void inOrder (bnodePtr hd)
{

    if (hd != NULL)
    {

        inOrder(hd->left);
        printf("%d\n", hd->value);
        inOrder(hd->right);
    }

}

void preOrder (bnodePtr hd)
{

    if (hd != NULL)
    {

        printf("%d\n", hd->value);
        preOrder(hd->left);
        preOrder(hd->right);
    }

}

void postOrder (bnodePtr hd)
{

    if (hd != NULL)
    {

        inOrder(hd->left);
        inOrder(hd->right);
        printf("%d\n", hd->value);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:12:19.130

```
void postOrder (bnodePtr hd)
{
    if (hd != NULL)
    {
        inOrder(hd->left);  // XXX
        inOrder(hd->right); // XXX
        printf("%d\n", hd->value);
    }
} 
```

那就是你的问题。你打电话`inOrder`到你应该打电话的地方`postOrder`。

# c# - 绘制一个对象并在面板上更新它的位置而不闪烁

> ID：13557731
> 
> 赞同：0
> 
> 时间：2012-11-26T02:06:54.210
> 
> 标签：c#

我想避免闪烁，我也不想使用计时器。是否有一种方法可以用于更新表单或刷新图形时，我可以使用它来代替计时器？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
namespace test
{
    public partial class Form1 : Form
    {
        SolidBrush sb = new SolidBrush(Color.White);
        Pen p = new Pen(Color.LightGray, 3);
        Graphics g;  
        int xpos;
        int ypos;

        public Form1()
        {
            InitializeComponent();
        }
        private void Form1_Load(object sender, EventArgs e)
        {
            g = panel1.CreateGraphics();
            this.DoubleBuffered = true;  
        }    
        void Draw(string Shape, int x, int y)
        {
            panel1.Invalidate();
            switch (Shape)
            {
                case "Circle":
                    g.FillEllipse(sb, x, y, 20, 20);
                    g.DrawEllipse(p, x, y, 20, 20);
                    break;
            }  
        }
        private void tmrAnimaion_Tick(object sender, EventArgs e)
        {

            xpos += 2;
            Draw("Circle", xpos, ypos);
            if (xpos >= 700)
            {
                xpos = 0;
                ypos += 20;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:49:28.137

你能在 Paint 或 OnPaint() 中绘图吗？

[C# WinForms - 绘制方法问题](https://stackoverflow.com/questions/3195459/c-sharp-winforms-paint-method-questions)

[Winforms中自定义控件绘制的最佳实践？](https://stackoverflow.com/questions/1718202/best-practice-for-custom-control-painting-in-winforms)

[WinForms 绘制周期文档？](https://stackoverflow.com/questions/5764508/winforms-paint-cycle-documentation)

# asp.net - Azure 内存中会话状态？

> ID：13557732
> 
> 赞同：0
> 
> 时间：2012-11-26T02:07:05.370
> 
> 标签：asp.net, session, azure

我会将我的 ASP.NET MVC4 应用程序作为冗余 Azure 应用程序托管。在会话期间，应用程序执行计算量大的操作，这些操作会产生不可序列化的对象。对象的创建是可重复的；每次需要对象时，我都可以执行昂贵的操作，但我更愿意第一次执行，然后保存对象以供以后重用。

我想使用 Azure 中的标准分布式会话状态机制来存储通常的会话状态信息，但该机制要求会话数据是可序列化的。我可以使用另一种机制来缓存创建成本高、不可序列化的对象吗？

鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:28:32.267

目前，Windows Azure 提供的所有分布式缓存服务都需要序列化，不仅是共享缓存，专用/同位缓存也是如此。

但是如果要在内存缓存中使用，则不需要序列化。但这不利于横向扩展，如果您只有 1 个实例，您可能无法拥有 azure SLA。

所以我的建议是优化你的序列化并尝试使用 azure 缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:51:14.340

这些对象是否必须存储在集中存储中，或者您可以将它们存储在“InProc”会话状态中吗？

如果没有，恐怕您需要将它们序列化为某些东西（SQL Azure、文件、应用程序结构缓存等）。

因此，要么找到一种方法将它们序列化为可持久化的东西，要么将它们存储在 RAM 中，在每个 Web 服务器上都有一个额外的副本

# c# - 如何使用发送键将 Ctrl+Shift+F1 发送到应用程序

> ID：13557733
> 
> 赞同：15
> 
> 时间：2012-11-26T02:07:05.297
> 
> 标签：c#, winforms, sendkeys

我想将`Ctrl`++`Shift`组合`F1`键发送到应用程序。

但是当我尝试发送密钥时出现错误，错误是，`^+F1`不是有效的密钥。

我正在使用的代码是：

```
System.Windows.Forms.SendKeys.Send("{^+F1}"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-26T02:14:34.827

查看[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)，您需要在 F1 周围戴上大括号。试试这个看看它是否有效

```
System.Windows.Forms.SendKeys.Send("^+{F1}"); 
```

从上面的链接中，通过将 ^ 和 + 括在大括号中，您将发送文字字符。

> 加号 (+)、插入符号 (^)、百分号 (%)、波浪号 (~) 和括号 () 对于 SendKeys 具有特殊含义。要指定这些字符之一，请将其括在大括号 ({}) 中

**由 barlop 添加-解释性说明-**

（来自上面的文档链接）

```
SHIFT +
CTRL ^
ALT % 
```

和

```
F1 {F1}
F2 {F2} 
```

# c++ - 在 C/C++ 中，对于数组 a，我刚刚了解到 (void*)&a == (void*)a。这是如何运作的？

> ID：13557736
> 
> 赞同：17
> 
> 时间：2012-11-26T02:07:14.460
> 
> 标签：c++, c, arrays, pointers

所以，我一直都知道在 C/C++ 中传递的数组“对象”只包含数组中第一个对象的地址。

指向数组“对象”的指针和它包含的值如何相同？

有人可以向我指出更多信息，也许是关于装配中的所有工作方式。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T02:18:12.717

简短回答：指向数组的指针被定义为与指向数组第一个元素的指针具有相同的值。这就是 C 和 C++ 中的数组的工作方式。

学究式的回答：

C 和 C++ 具有*右值*和*左值*表达式。左值是`&`可以应用运算符的东西。它们也有*隐式转换*。一个对象在被使用之前可能会被转换成另一种类型。（例如，如果您调用`sqrt( 9 )`then`9`将转换为`double`因为`sqrt( int )`未定义。）

数组类型的左值隐式转换为指针。隐式转换更改`array`为`&array[0]`. 这也可以`static_cast< int * >( array )`在 C++ 中显式写为 , 。

这样做是可以的。铸造到`void*`是另一回事。`void*`有点难看。并且用括号铸造 as`(void*)array`也很丑陋。所以请避免`(void*) a`在实际代码中使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T02:56:31.753

您正在混合两种不相关（实际上是相互排斥）的东西，这会造成更多混乱。

首先，您正确地说明“在 C/C++中*传递的数组对象只包含数组中第一个对象的地址”。*这里的关键词是“传递”。实际上，数组不能作为数组对象传递。数组不可复制。每当您在函数参数列表中使用数组样式声明时，它实际上被解释为指针声明，即它是您“传递”的指针，而不是数组。但是，在这种情况下，您的平等*不成立*

```
void foo(int a[]) {
  assert((void *) &a == (void *) a); // FAIL!!!
} 
```

上面的断言肯定会失败——等式不成立。因此，在这个问题的上下文中，您必须忘记您“传递”的数组（至少对于上面示例中使用的语法）。您的相等性不适用于已被指针对象替换的数组。

其次，实际的数组对象不是指针。并且没有必要将术语*对象*放入引号中。数组是成熟的对象，尽管具有一些特殊的属性。所讨论的相等性确实适用于尚未失去其“数组性”的实际数组，即尚未被指针对象替换的数组对象。例如

```
int a[10];
assert((void *) &a == (void *) a); // Never fails 
```

这意味着整个数组的地址在数字上与其第一个元素的地址相同。这里没有什么不寻常的。事实上，在 C/C++ 中，结构类型可以观察到相同的（本质上）相等性

```
struct S { int x; } a;
assert((void *) &a == (void *) &a.x); // Never fails 
```

即整个结构对象的地址与其第一个字段的地址相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T02:24:36.077

> 指向数组“对象”的指针和它包含的值如何相同？

数组是存储多个元素的连续内存块。
显然，数组中的第一个元素位于某个地址。
第一个元素和实际数组的开头之间没有数据。
因此，第一个元素与数组具有相同的地址。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T02:16:33.763

请阅读以下主题

[http://www.cplusplus.com/forum/beginner/29595/](http://www.cplusplus.com/forum/beginner/29595/)

它基本上解释了`(&a != a)`由于类型差异（因为`&a`返回指向数组和`a`第一个元素的指针），即使它们都指向相同的地址。

由于您将它们都转换为`(void*)`仅比较地址值并发现它们相等，这意味着`((void*) a == (void*)&a)`正如您所说。这是有道理的，因为数组的地址必须与第一个元素相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T02:16:29.210

让我们看看这两个声明：

```
int a[4];
int * b; 
```

两者`a`和`b`都具有与 and 兼容的类型`int *`，例如，可以作为参数传递给期望的函数`int *`：

```
void f(int * p);
f(a); // OK
f(b); // OK 
```

在 的情况下`a`，编译器为 4 个 int 值分配空间。当您使用 name`a`时，例如在调用 时`f(a)`，编译器只是替换它分配第一个 int 值的地址，因为它知道。

在 的情况下`b`，编译器为一个指针分配空间。当您使用 name`b`时，例如在调用 时`f(b)`，编译器会生成用于从分配的存储中检索指针值的代码。

说到，那是和`&`之间的区别变得明显的时候。始终表示编译器为您的变量分配的存储地址：是这四个 int 值的地址（因此与 just 一致），而是指针值的地址。它们也有不同的类型。`a``b``&``&a``a``&b`

`&a`与 不完全相同`a`，尽管它们比较相等。它们有不同的类型：`&a`指针和`a`数组。您可以注意到不同之处，例如，如果您将`sizeof`运算符应用于这些表达式：`sizeof(a)`将评估为四个 int 值`sizeof(&a)`的大小，而是指针的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T03:12:57.523

好的，所以我认为发生的事情是，当您创建一个数组时，您在某处为该数组分配了空间，并在其他地方创建了指向其第一个对象的指针，而您在代码中传递的是指针。

这实际上是当您在 C++ 中使用 new 或在 C/C++ 中使用 malloc 创建数组时发生的行为。像这样，

```
int * a = new a[SIZE];
assert((void*)&a==(void*)a); // Always fails 
```

我了解到，对于以 的样式声明的数组`int a[SIZE];`，当您尝试将数组传递给函数时，会创建一个指向第一个元素的指针（这称为数组指针衰减）。有趣的是，事实上，正如 AndreyT 所写，

```
void foo(int a[]) {
     assert((void *) &a == (void *) a); // Always fails
} 
```

这表明只有当您尝试传递数组时，才会为`int a[SIZE];`.

# joomla - 过滤 Joomla/K2 和 mod_k2_content 模块中显示的项目

> ID：13557737
> 
> 赞同：0
> 
> 时间：2012-11-26T02:07:16.263
> 
> 标签：joomla, joomla-k2

当额外字段为特定值时，如何排除项目出现在 K2 mod_k2_content 模块中？

例如，我目前正在显示所有属性。有一个额外的字段叫做 Sold? 这是一个布尔值。如果为真，我不希望它出现在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:12:46.697

这是一个示例，只是为了给您一个想法，希望对您有所帮助

```
<?php 
  foreach ($item->extra_fields as $extraField):
      if($extraField->sold != true){
           echo $item->title . '<br />'; 
           echo $item->introtext;
      } 
  endforeach; 
?> 
```

# php - PHP/SQL - 不正确的语法

> ID：13557738
> 
> 赞同：-1
> 
> 时间：2012-11-26T02:07:23.223
> 
> 标签：php, mysql

我是 MySQL 查询的新手。这就是我到目前为止我做错了什么？

```
"INSERT INTO users (ip) WHERE id = '".$_SESSION["user"]["id"]."' 
VALUES ('$ip')" 
```

**编辑**

我只是在问我的语法是怎么错的。我了解这些漏洞，并没有将它们粘贴到我的问题中。我正在使用 PDO 库和 mysql_real_string_escape，只要我能...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:11:45.687

INSERT 查询错误。我认为你正在更新一些东西，你需要使用 UPDATE 查询

```
UPDATE users SET ip = '$ip' WHERE id = '".$_SESSION["user"]["id"]."' 
```

还致力于修复 sql 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:13:18.093

```
INSERT INTO users (ip) 
VALUES ('value to insert') 
```

或者

```
UPDATE users
SET ip = 'value to update'
WHERE ip = 'value to check' 
```

`value to update`此外，将您的and包装`value to insert`在 PHP 中`mysqli_real_escape_string($DB,$val)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:12:47.837

```
 INSERT INTO table_name (column1, column2, column3,...)
  VALUES (value1, value2, value3,...)
  WHERE column_name operator value 
```

[sql注入信息](http://php.net/manual/en/security.database.sql-injection.php)

# uml - UML：包括不同用户的用例？

> ID：13557739
> 
> 赞同：0
> 
> 时间：2012-11-26T02:07:43.223
> 
> 标签：uml

在两个与不同参与者相关联的用例之间建立包含关系是否合法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-26T19:13:03.473

是的，这是合法的，但我认为不应将其解释为 @vainolo 建议的那样。
假设这种情况
[![在此处输入图像描述](../Images/8bd835c79a5f46e6981e7039ced82440.png)](https://i.stack.imgur.com/BWF5J.png)

在这种情况下`Actor X`可以直接访问`Use Case A`并且因为`Use Case B`被包含在`Use case A`Actor X 中也执行了`Use CAse B`
但只有`Actor Y`直接访问中描述的行为`Use Case B`。
`Actor A`只能通过间接访问`Use Case A`

至少我是这么解释的。[UML 规范](http://www.omg.org/spec/UML/2.5/)只会告诉您这是一种有效的 UML 语法，但不会过多说明这种情况的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:44:11.743

这是完全合法的。这意味着如果包含用例调用包含用例，则需要连接到该用例的参与者。

# android - 设置listview只有一行差异

> ID：13557740
> 
> 赞同：0
> 
> 时间：2012-11-26T02:07:43.847
> 
> 标签：android, android-layout, android-listview, baseadapter

我试图让我的列表视图只有一行，只有 imageview。这是我的适配器：

```
public class ListAdapter extends BaseAdapter {

private Context activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;

public ListAdapter(Context a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return data.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.listview, null);
    TextView subject = (TextView)vi.findViewById(R.id.subject);
    TextView added = (TextView)vi.findViewById(R.id.added); 
    TextView permalink = (TextView)vi.findViewById(R.id.permalink);

    HashMap<String, String> map = new HashMap<String, String>();
    map = data.get(position);

     //Setting all values in listview
    subject.setText(map.get(ViewPagerAdapter.KEY_NEWS_SUBJECT));
    added.setText(map.get(ViewPagerAdapter.KEY_NEWS_LAPSE));
    permalink.setText(map.get(ViewPagerAdapter.KEY_NEWS_PERMA));
    return vi;
} 
```

}

当前的布局很少有 textview，但唯一的一行可以说我在 4 号修复它以仅显示 imageview。我该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:03:52.383

首先在自定义布局中添加一个 ImageView。
在您的`public View getView(int position, View convertView, ViewGroup parent)`方法中添加以下内容：

```
 ImageView image = (ImageView)vi.findViewById(R.id.imageview);
    if( position == 0){ // here I suppose you want it display on the first row
         image.setVisibility(View.Visible);
    }
    else{
        image.setVisibility(View.GONE);
    } 
```

旁注：我建议您在使用 getView(); 时使用 ViewHolder；

# r - 在R中搜索具有最小值的aov效果表

> ID：13557745
> 
> 赞同：-1
> 
> 时间：2012-11-26T02:08:44.843
> 
> 标签：r, anova

在进行方差分析和构建效果表之后，我只需要用最小值捕获这些术语表中的 5 个。由于一长串因素；由于从 x1 到 x100 大约有 100 个因子，我无法可视化所有表格。

```
model<-aov(y~., data=data)
effects<-model.tables(model, "effects") 
```

任何术语表的标签名称是

```
names(effects$tables$x1)
"1"      "2" 
```

我只需要捕获标签“2”的最小值的这些术语表中的 2 个。

问题已编辑：

```
effects$tables[1:4]   
$x1
x1
      1           2 
-0.01099232  0.01053045 

$x2
x2
      1           2 
-0.03292931  0.03321318 

$x3
x3
     1          2 
0.2881996 -0.3008399 

$x4
x4
       1            2 
-0.010151743  0.009236422 
```

如果我们从上述给定表格的 4 个中仅选择 2 个最小值，则结果可能为 -0.3008399 和 0.009236422。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:42:33.637

也许：（在没有可重复的例子的情况下未经测试）

```
eff2 <- effects$tables$x1[['2']]
eff2[ order(eff2) ][1:5] 
```

或者也许（在没有例子的情况下仍然未经测试）

```
efftabls <- sapply(eff2, '[', 2)
head( efftabls[order(efftabls)], 5)  # 5 used to be the number requested 
```

# asp.net - 从带有 1 个参数的存储过程中调用带有 2 个参数的存储过程

> ID：13557753
> 
> 赞同：0
> 
> 时间：2012-11-26T02:09:30.537
> 
> 标签：asp.net, sql, sql-server-2008, oracle11g

我有一个存储过程`usp_gethomedata(<current year>)`，它只将当前年份（2012 年）作为参数，并显示`01-01-2012`2012 年当前日期的数据，即 26-11-2012。

我有另一个显示类似数据的存储过程，`usp_gethomedata(<start date>, <end date>)`其中包含 2 个参数开始和结束日期范围从`01-01-1900`到`26-11-2012`。

现在，我不确定如何从第一个存储过程中调用第二个存储过程，以便它向我显示数据， `01-01-2012`前提 `26-11-2012`是我必须记住.. 在调用第一个过程时，我只能提供 2012 即当前年作为我的 asp .net 应用程序的参数。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:09:01.290

不，您不能创建重载的存储过程。一个会覆盖另一个。虽然重载功能是可能的。因此，将内部存储过程更改为其他名称，反之亦然（即外部存储过程）。这是一个模拟您的情况的示例。

--**外部存储过程**

```
USE [Test]
GO

-- exec [dbo].[USP_GetHomeData] 2012
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[USP_GetHomeData]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[USP_GetHomeData]
GO

CREATE PROCEDURE [dbo].[USP_GetHomeData] 
-- Add the parameters for the stored procedure here
(
    @Year INT
)
AS
BEGIN
        DECLARE @startDate DATETIME='1/1/' + CAST(@Year AS VARCHAR(4))  -- mm/dd/yyyy
        DECLARE @endDate DATETIME=GETDATE() -- mm/dd/yyyy

        SELECT [Date] = DATEADD(Day,Number,@startDate) 
        FROM  master..spt_values  WITH(NOLOCK)
        WHERE Type='P'
        AND DATEADD(day,Number,@startDate) <= @endDate

        exec [dbo].[USP_GetHomeData_Inner] '1/1/1900', @endDate
END 
```

--**内部存储过程**

```
USE [Test]
GO

-- exec [dbo].[USP_GetHomeData_Inner] '1/1/1900', '11/25/2012'
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[USP_GetHomeData_Inner]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[USP_GetHomeData_Inner]
GO

CREATE PROCEDURE [dbo].[USP_GetHomeData_Inner] 
-- Add the parameters for the stored procedure here
(
    @startDate DATETIME
    ,@endDate DATETIME
)
AS
BEGIN

        ;WITH Calender AS 
        (
            SELECT @startDate AS CalanderDate
            UNION ALL
            SELECT CalanderDate + 1 FROM Calender
            WHERE CalanderDate + 1 <= @endDate
        )
        SELECT [Date] = CONVERT(VARCHAR(10),CalanderDate,25) 
        FROM Calender WITH(NOLOCK)
        OPTION (MAXRECURSION 0)
END 
```

结果（部分）如下

![在此处输入图像描述](../Images/3bfaeff2c470ed7f2483098f7c7c80e8.png)

希望这可以帮助。

# performance - 优化素数函数速度

> ID：13557754
> 
> 赞同：1
> 
> 时间：2012-11-26T02:09:47.050
> 
> 标签：performance, optimization, primes

我正在编写一个函数来列出某个起始值“N”以上的“M”个素数。在这一点上，我只想使函数尽可能高效（即：FAST！）。我真的没有想法，所以任何帮助都将不胜感激。代码（matlab）如下：

```
function PrimeNumbersList = primes_after(N,M)
tic;
x = N;
s = 1;
PrimeNumbersList = 0;
if mod(N,2) == 0
while numel(PrimeNumbersList) < M

if isprime(x) == 1
    PrimeNumbersList(s) = x;
    x=x+2;
    s=s+1;
else
    x=x+2;
end
end
else
while numel(PrimeNumbersList) < M

if isprime(x) == 1
    PrimeNumbersList(s) = x;
    x=x+1;
    s=s+1;
else
    x=x+1;
end 
end
end
tElapsed=toc
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:20:03.653

您可以做的一件事是只考虑奇数（增加 2 而不是 1）。这会将循环迭代的次数减少一半。

可能会有所收获`isprime`，具体取决于它的实施方式。这完全取决于您需要它有多准确（即是否允许 Carmichael 数字？）。

**编辑：**

您的编辑并没有真正解决任何问题。试试这个：

```
function PrimeNumbersList = primes_after(N,M)
    tic;
    x = N;
    s = 1;
    PrimeNumbersList = 0;

    if mod(x,2) == 0
        if x == 2
            PrimeNumbersList(s) = x;
            s=s+1;
        end
        x=x+1;
    end

    while numel(PrimeNumbersList) < M
        if isprime(x) == 1
            PrimeNumbersList(s) = x;
            s=s+1;
        end
        x=x+2;
    end

    tElapsed=toc
end 
```

此外，您可能会更改`numel(PrimeNumberList) < M`为`s < m`并避免函数调用。小的优化，但是，嘿，我们已经在分裂头发了。

**编辑：**

如果您不能接受错误（例如 Carmichael 数字），那么您将陷入执行缓慢的问题`isprime`（假设它是正确的）。这是因为检查一个数是否是素数是很困难的。无论如何， Fermat `s Little Theorem is a clever shortcut, but`isprime 可能会使用它和额外的验证来消除错误。

你真的没有什么可以做的。如果你愿意用不同的语言重写它，那么我推荐 Haskell；它对生成数字有很好的支持，并将您的代码变成大约 3 行函数（左右）。

我不太了解matlab，无法消除一些额外的循环，但这里有更多建议：

*   如果 matlab 可以附加到 PrimeNumbersList，请这样做而不是设置索引。这可能会更快（它在 Javascript 中）
    *   这将摆脱`s`变量，从而消除添加
*   使用`s`代替`numel`（试试这个而不是上面的尝试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:43:29.083

这里有一些潜在的速度增加。

```
function PrimeNumbersList = primes_after(N,M)
tic;

x = 0;
if (N mod 2) == 0 && N != 2
    x = N + 1;
else
    x = N;
end

s = 1;
PrimeNumbersList = 0;
tempInt = x - 1;
isPrime = 1;

while numel(PrimeNumbersList) < M

    while tempInt > 1 && isPrime
        if (x mod tempInt) == 0
            isPrime = 0;
        end
        tempInt=tempInt-1;
    end

    if isPrime
        PrimeNumbersList(s) = x;
        x=x+1;
        s=s+1;
    else
        x=x+1;
    end

end
tElapsed=toc
end 
```

好的，现在解释一下：

首先，我检查是否`N`是偶数。如果是这样，我增加 1 只是为了确保它是奇数（虽然不一定是素数）。我确实考虑了整数 2，因为它是素数，但可以被 2 整除。

由于我不知道 isPrime() 的速度，我只是编写了自己的（基于素数的简单证明）。请随时使用您的 tic/toc 进行检查。

除此之外，我看不到更多的速度增加。我的 2 美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:46:30.157

不要遍历一组数字来测试每个数字的素数*。*那将是不可能的慢。您正在寻找的算法称为 Eratosthenes 的分段筛。

尽管埃拉托色尼筛法非常快，但它需要 O(n) 空间。通过在连续的段中执行筛选，这可以减少到筛选素数的 O(sqrt(n)) 加上位数组的 O(1)。在第一段，计算段内每个筛素的最小倍数，然后以正常方式将筛素的倍数标记为合数；当所有的筛选素数都用完后，该段中剩余的未标记数是素数。然后，对于下一段，每个筛分素数的最小倍数是在前一段中结束筛分的倍数，因此筛分一直持续到完成。

考虑以 20 为一组从 100 到 200 筛分的例子；5个筛选素数是3、5、7、11和13。在从100到120的第一段中，位数组有10个槽，槽0对应101，槽k对应100 + 2k - 1，槽9对应119。段中3的最小倍数是105，对应slot 2；槽 2+3=5 和 5+3=8 也是 3 的倍数。槽 2 处 5 的最小倍数是 105，槽 2+5=7 也是 5 的倍数。7 的最小倍数是 105在插槽 2 处，插槽 2+7=9 也是 7 的倍数。以此类推。

函数 primes 接受参数 lo、hi 和 delta；lo 和 hi 必须是偶数，其中 lo < hi，并且 lo 必须大于上限 (sqrt(hi))。段大小是 delta 的两倍。长度为 m 的数组 ps 包含小于 sqrt(hi) 的筛分素数，去掉 2，因为偶数被忽略，数组 qs 包含对应筛分素数当前段中最小倍数的筛位数组的偏移量。在每个段之后，lo 前进两倍 delta，因此筛位数组的索引 j 对应的数字是 lo + 2j + 1。

```
function primes(lo, hi, delta)
  sieve := makeArray(0..delta-1) # bitarray
  # calculate m and ps as described in text
  qs := makeArray(0..m-1) # least multiples
  for i from 0 to m-1
    qs[i] := (-1/2 * (lo + ps[i] + 1)) % ps[i]
  while lo < hi
    for i from 0 to delta-1
      sieve[i] := True
    for i from 0 to m-1
      for j from qs[i] to delta step ps[i]
        sieve[j] := False
      qs[i] := (qs[i] - delta) % ps[i]
    for i from 0 to delta-1
      t := lo + 2*j + 1
      if sieve[i] and t < hi
        output t
    lo := lo + 2*delta 
```

对于上面给出的示例，这称为素数（100、200、10）。在上面给出的示例中，qs 初始为 [2,2,2,10,8]，对应于最小倍数 105、105、105、121 和 117，并且对于第二段重置为 [1,2,6, 0,11]，对应最小的倍数123、125、133、121和143。这个算法非常快；您应该能够在不到一秒的时间内生成数百万个素数。

如果你想了解更多关于素数编程的知识，我在我的博客上谦虚地推荐[这篇文章。](http://programmingpraxis.com/essays)

# vhdl - 在自动生成的 xilinx 包装器 VHDL 文件中找到 ODDR2 使用情况

> ID：13557755
> 
> 赞同：2
> 
> 时间：2012-11-26T02:09:51.830
> 
> 标签：vhdl, xilinx

我正在使用 TEMAC IP 内核生成一个 1gb 以太网 MAC，并遇到了一段有趣的代码：

```
-- DDr logic is used for this purpose to ensure that clock routing/timing to the pin is
-- balanced as part of the clock tree
   not_rx_clk_int <= not (rx_clk_int);

  rx_clk_ddr : ODDR2
    port map (
      Q  => rx_clk,
      C0 => rx_clk_int
      C1 => not_rx_clk_int,
      CE => '1',
      D0 => '1',
      D1 => '0',
      R  => reset,
      S  => '0'
      ); 
```

因此，根据我的理解，这里发生的情况是，通过将每个时钟用作多路复用器的选择线输入，两个相位相差 180 度的时钟正在生成一个“新”时钟。（请参阅以下非常有用的图表，取自[本文档](http://www.xilinx.com/support/documentation/user_guides/ug381.pdf)的第 64 页！）

![图 2.11 来自第 64 页](../Images/b7a1042f2993308b36aa55339de2eb24.png)

什么时候`C0 is '1'`给`Q <= D0`，`rx_clk <= '1'`如果`C1 is '1'`那么`Q <= D1`给`rx_clk <= '0'`。在复位两个触发器都复位给`rx_clk <= '0' while reset = '1'`

* * *

所以我有几个问题：

1.  以这种方式生成时，两个时钟 (`not_rx_clk_int`和`rx_clk_int`) 是否会精确地异相 180 度？（通过这种方式，我的意思是`not_rx_clk_int <= not (rx_clk_int)`）。我假设不是由于增量时间？这意味着什么？
2.  首先使用 ODDR2 有什么好处（为什么`rx_clk <= rx_clk_int`不够用）？（这导致...）
3.  作为时钟树的一部分，时钟“平衡”是什么意思？[（此处](http://www.xilinx.com/support/documentation/user_guides/ug382.pdf)第 59 页简要提到了时钟树。 ）
4.  `rx_clk`重置期间不是被门控吗？这不是很糟糕吗？
5.  这是使用 ODDR2 和/或执行此操作的“标准”方式吗？有更好的选择吗？（因此，我应该将它添加到我有用的 VHDL 零碎的库中吗？）

随意建议推荐阅读和/或其他资源。我不想在不知道这里发生了什么的情况下盲目地将这段代码复制/粘贴到我的项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:08:44.390

> 1) 当以这种方式生成时，两个时钟 (`not_rx_clk_int`和`rx_clk_int`) 是否会精确地异相 180 度？（通过这种方式，我的意思是`not_rx_clk_int <= not (rx_clk_int)`）。我假设不是由于增量时间？这意味着什么？

是的，它们将非常精确地分阶段。

Delta 延迟在这里不是问题。它们仅适用于 HDL 模拟，代替未知的“真实”延迟。我希望 Xilinx 的模型正确，以便两个边缘在同一个增量周期中发生变化！IE。他们会做类似的事情：

```
not_rx_clk <= not (rx_clk_int);
rx_clk <= rx_clk_int; 
```

以匹配增量。

> 2) 首先使用 ODDR2 有什么好处（为什么`rx_clk <= rx_clk_int`不够用）？（这导致...）

它确保延迟相对于您无疑已与此时钟同步的其他 IO 是可预测的。如果您只是将时钟信号从引脚驱动，它必须从时钟分配网络通过一些路由，然后到引脚（因为时钟网络没有直接路由到 IO 引脚。那是延迟是不可预测的，并且可能因编译而异。

> 3) 作为时钟树的一部分，时钟“平衡”是什么意思？（时钟树在第 59 页 [here.][3] 中简要提及）

据我了解，这意味着时钟树确保时钟到每个目的地的距离（大约）相同。

> 4）`rx_clk`在复位期间没有被门控吗？这不是很糟糕吗？

是的，它正在被打开和关闭（我会犹豫使用“门控”这个词，因为这意味着一个特定的东西——通过与门输入——这不是）。只有你可以说这是否重要——这取决于它的去向。

> 5) 这是使用 ODDR2 和/或执行此操作的“标准”方式吗？有更好的选择吗？（因此，我应该将它添加到我有用的 VHDL 零碎的库中吗？）

三个问题合二为一，偷偷摸摸:)

*   是的，它是 (a) 使用 ODDR2 的标准方式（另一种标准用途当然是用于实际 DDR 数据）。
*   不，我不知道有什么更好的方法来打卡。
*   是的，将其添加到您的武器库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:34:56.163

部分答案：

1) 我对`not (rx_clk_int);`很多 Xilinx 内核中不必要的括号很感兴趣，这让我想知道它是否是从 Verilog 自动翻译的；其中一些有很多非常糟糕的VHDL。（所以我很容易被逗乐。）无论如何......

综合工具可能会优化单独的“not”并使用 rx_clk_int 的下降沿，因此您当然可以通过这种方式获得 180 度相移。（是否有保证，或者更复杂的表达式可能会欺骗综合，我不能说）。

2) 直接分配会将 rx_clk_int 从时钟树上移到普通路由上，通过输出缓冲区，总延迟将是任何人的猜测。这样，您就可以直接在 IOB 中精确定时时钟，以获得更可预测的定时。

3) 紧挨着时钟发生器的 FF 和 IOB 看不到在远角的时钟之前的时钟；平衡时钟树正在减慢所有短路径以匹配最长路径。（您可以在 DIMM 内存 PCB 上看到这一点，走线上有很多锯齿线以延长它们！）

4）我希望它是封闭的。这是否不好取决于它的时钟。也许以太网专家可以在这里插手。或者将逻辑驱动“复位”到这个块；它可能不是主系统重置，以解决此问题。

5) 这在较新的 FPGA（带有 DDR regs 的 FPGA）上肯定是一个众所周知的技巧，除了它们的主要用途（DDR 接口到内存等）之外，它对时钟非常有用。随身携带！

# c# - ListView 人口（使用 C#）？

> ID：13557757
> 
> 赞同：2
> 
> 时间：2012-11-26T02:10:00.867
> 
> 标签：c#, wpf, xaml, visual-studio-2012

我想以编程方式填充 WPF 列表视图。我认为我接近答案但尚未解决，我使用一种方法来填充列表视图，列表视图在 XAML 中看起来像这样

```
<ListView Name="listview" HorizontalAlignment="Left" Height="252" Margin="39,110,0,0" VerticalAlignment="Top" Width="340">
        <ListView.View>
            <GridView x:Name="gridcontrol">
                <GridViewColumn/>
            </GridView>
        </ListView.View>
</ListView> 
```

到目前为止我所做的是：

```
private void FillListView( String[] texto ) {

        GridViewColumn gvc = new GridViewColumn();
        gvc.Header = cmbx2.SelectedItem.ToString();
        gridcontrol.Columns.Add(gvc);

        foreach (String s in texto) {

            ListViewItem item = new ListViewItem();
            item.Content = s;
            listview.Items.Add(item);

        }

        listview.View = gridcontrol;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:10:36.607

一个更简单的解决方案而不是搞乱 ListViewItems 是填充一个集合并将数据绑定到它。诀窍是翻转侧面的项目控件，以便您的字符串集合显示为列而不是行。

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <ItemsControl ItemsSource="{Binding Path=Results}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Path=Item1}" FontWeight="Bold" />
                    <ItemsControl ItemsSource="{Binding Path=Item2}" />
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>

</Window> 
```

后面的代码：

```
using System;
using System.Collections.ObjectModel;
using System.Windows;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Results = new ObservableCollection<Tuple<string, string[]>>();

            FillListView("AAA", new string[] { "A1", "A2", "A3" });
            FillListView("BBB", new string[] { "B1", "B2", "B3" });

            DataContext = this;
        }

        public ObservableCollection<Tuple<string, string[]>> Results { get; private set; }

        private void FillListView(string header, string[] text)
        {
            Results.Add(Tuple.Create(header, text));
        }
    }
} 
```

# attributes - 绘制 UML 时何时使用属性（property）而不是关联/聚合/组合

> ID：13557758
> 
> 赞同：6
> 
> 时间：2012-11-26T02:10:04.140
> 
> 标签：attributes, associations, relationship, uml

好的，所以当我尝试在 UML 图中显示关系时，何时应该向类添加属性与绘制与类的关联，我有点困惑。

例如，假设我有一个包含 10 个状态对象的 DFA 类，每个状态对象都有一组不同的路径到 DFA 中的各种状态。我应该从 DFA 到 State 类绘制合成线，还是只在 DFA 类的属性部分中键入所有 10 个状态。

基本上，我试图弄清楚当一个 A 类包含（或由）一个或多个 B 类时，我应该在它们之间画一条线（聚合、组合、关联依赖等）还是只将一个作为属性其他。

[这篇文章](http://geertbellekens.wordpress.com/2011/08/10/uml-best-practice-attribute-or-association/)试图回答这个问题，但当他开始谈论他绘制的图表时，我就感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T08:51:59.850

您指出的文章给出了一个指导方针：

> 这些年来，我一直在与不同的建模团队合作，我发现最有效的规则是对类使用关联，对数据类型使用属性。数据类型是一种特殊的分类器，类似于类。它与类的不同之处在于数据类型的实例仅由它们的值标识。

我有点同意作者的观点，补充一点：你的类图应该是可以**理解**的。如果您的图表中有许多相互交叉的线，则该图表是无用的。发生这种情况时，您必须尝试找到可以使用属性建模而不会丢失太多视觉信息的关系，并用属性替换它们。

你可以用关系而不是属性做的另一件事是显示双向关系（你可以用关系的每个类中的一个属性来做到这一点，但你会失去关系的语义）。

# javascript - jQuery 错误 - 无法在初始化之前调用选项卡上的方法

> ID：13557764
> 
> 赞同：5
> 
> 时间：2012-11-26T02:11:07.867
> 
> 标签：javascript, jquery

我更新到最新版本的 jQuery，我看到了这个错误。

**错误：**

> 未捕获的错误：无法在初始化之前调用选项卡上的方法；试图调用方法“ `div.panes > div`”

**完整片段：**

**html:**

```
<div id="nav"> <!-- Start Page Navigation -->
    <ul class="tabs page">
        <li><a href="#tab1">Tab1</a></li>
        <li><a href="#tab2">Tab2</a></li>
        <li><a href="#tab3">Tab3</a></li>
        <li><a href="#tab4">Tab4</a></li>
    </ul>
    <div class="clear"></div>
</div> <!-- End Page Navigation --> 
```

**JS：**

```
$(document).ready(function() {
    $("div.header div.version").css({ '-moz-border-radius': '6px', '-webkit-border-radius': '6px' });
    $("div#contact_form .text_input").css({ '-moz-border-radius': '4px', '-webkit-border-radius': '4px' });
    $("div#about div.right").css({ '-moz-border-radius' : '8px', '-webkit-border-radius': '8px' });
    $("div#contact_form p label").css({ 
            '-moz-border-radius-topleft': '4px', 
            '-moz-border-radius-bottomleft': '4px', 
            '-webkit-border-bottom-left-radius' : '4px',
            '-webkit-border-top-left-radius' : '4px'  
    });
    $("select").css({ '-khtml-appearance' : 'none' });
    $('#reviews').serialScroll({
      items: 'div',
      axis: 'y',
      duration: 800,
      interval: 5000,
      cycle: true
    });
    $('#reviews').trigger('next');
    $("a.screenshots").fancybox({
            'transitionIn'  :   'elastic',
            'transitionOut' :   'elastic',
            'speedIn'       :   400, 
            'speedOut'      :   400, 
            'overlayShow'   :   false
        });
        $('input#send').click(function() {
        var name = $('input#name').val();
        var email = $('input#email').val();
                var topic = $('select#topic option:selected').val();
        var message = $('textarea#message').val();
        $.ajax({
            type: 'post',
            url: 'scripts/send_email.php',
            data: 'name=' + name + '&email=' + email + '&topic=' + topic + '&message=' + message,

            success: function(results) {
                $('p.validation').html(results);
            }
        }); // end ajax
    });
 $("#ul.tabs").tabs("div.panes > div", { history: true });
}); 
```

如果我使用，我看不到错误：

```
 $("#content ul.tabs").tabs("div.panes > div", { history: true }); 
```

![在此处输入图像描述](../Images/0858a56a68f6c21911e8090029a6b36d.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T04:37:30.013

试试这个

```
 $("ul.tabs").tabs("div.panes > div", { history: true }); 
```

而不是这个

```
 $("#ul.tabs").tabs("div.panes > div", { history: true }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T04:40:34.950

以下解决了我的问题：

```
$("ul.tabs").tabs($("div.panes > div"), { history: true }); 
```

# ios - 检测 UIScrollView 内的 UIImageView 上的点击

> ID：13557767
> 
> 赞同：5
> 
> 时间：2012-11-26T02:11:43.263
> 
> 标签：ios, uiscrollview, uiimageview, uitapgesturerecognizer

我有一个水平滚动视图，里面填充了`UIImageViews`.

我想检测点击`UIImageView`并更改其背景颜色。

不知何故，点击手势不起作用。

但是，当我向滚动视图添加点击手势时，它可以工作。`scrollview.background color`可以更改。

但我想检测`UIImageViews`它包含的点击！

```
UIScrollView* scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 50, 768, 127)];
[scrollView setScrollEnabled:YES];
scrollView.backgroundColor = [UIColor orangeColor];
[scrollView setShowsHorizontalScrollIndicator:NO];
UIImageView *contentOfScrollView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 1, 1130, 125)];
scrollView.contentSize = CGSizeMake(contentOfScrollView.frame.size.width, contentOfScrollView.frame.size.height);

for (int aantal=0; aantal < 6; aantal++) {
    UIImageView *item = [[UIImageView alloc] initWithFrame:CGRectMake(3+(aantal*188), 0, 185, 125)];
    item.backgroundColor = [UIColor yellowColor];
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:item action:@selector(imageTapped:)];
    tap.numberOfTapsRequired = 1;
    tap.cancelsTouchesInView=YES;
    item.userInteractionEnabled = YES;
    [item addGestureRecognizer:tap];
    [contentOfScrollView addSubview:item];
}

//UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
//[scrollView addGestureRecognizer:tap];
scrollView.userInteractionEnabled=YES;
scrollView.delaysContentTouches=NO;
[scrollView addSubview:contentOfScrollView];
[self.view addSubview:scrollView]; 
```

这就是 imageTapped 函数。

```
-(void)imageTapped:(UITapGestureRecognizer *)gesture
{
    NSLog(@"tapped!");
    gesture.view.backgroundColor = [UIColor whiteColor];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T03:21:37.377

用户交互`NO`默认设置为`UIImageView`，因此您需要将其设置为`YES`。您将“项目”设置为是，但不设置为`contentOfScrollView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:07:29.803

你的错误在这里：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:item action:@selector(imageTapped:)]; 
```

您需要将目标更改为“self”而不是“item”，这样它就不会崩溃。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)]; 
```

# dojo - dojo/form/select onchange 事件在 dojo 1.8 中对我不起作用

> ID：13557770
> 
> 赞同：5
> 
> 时间：2012-11-26T02:11:55.227
> 
> 标签：dojo

我正在尝试 dojotoolkit 1.8，但不知道如何为 dojo/form/select 连接 onchange 事件

这没有任何反应

```
require(["dojo/dom","dojo/on"], function(dom,on){
   on(dom.byId("myselect"),"change",function (evt){
         alert("myselect_event");

}); 
```

相反，以下挂钩到 click 工作：

```
on(dom.byId("myselect"),"click",function (evt){ 
```

*   但我想在用户点击和更改后捕获值

我相信它比回到普通的 javascript onChange 更简单......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:44:32.627

你可以尝试这样的事情：

```
 var select = dijit.byId('myselect');

    select.on('change', function(evt) {
        alert('myselect_event');
    }); 
```

我在参考指南中多次看到这一点，例如[在 dijit/form/select 的参考指南](http://dojotoolkit.org/reference-guide/1.8/dijit/form/Select.html)中的*'A Select Fed By A Store'*中。

也许它甚至会返回`handle`，到目前为止我还没有看过这个。但我想它应该工作。

**编辑：**

考虑到@phusick 的评论，我想补充一点，您也可以简单地将`"change"`to`"onChange"`或 the `dom`to更改为`dijit`调用`on(...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:48:45.710

跟随@nozzleman 的回答尝试

```
var select = registry.byId('myselect');

select.on('change', function(evt) {
    alert('myselect_event');
}); 
```

如果你使用`on`而不是`connect`then 你不必写`onChange`，你可以简单地写`change`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:00:56.130

与上述答案类似，执行 dijit.ById 以找到正确的元素，然后注册 'onItemClick' 事件。

以编程方式创建选择下拉菜单会将 _menu 附加到您创建选择项的任何节点，因此“搜索”在页面初始化时变为“搜索菜单”，您可以执行以下操作：

```
 dojo.connect(dijit.byId('search_menu'),'onItemClick',function(){
        //console.log("search menu");
        doSearch('recreation');
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T18:46:00.180

正如其他人所指出的，您正在尝试使用 DOM 访问 Dijit。此外，“更改”事件的匿名函数的参数是用户选择的**值**，而不是事件本身。

这是您修改后的代码以访问 Dijit 并处理“更改”事件：

```
require(["dijit/registry", "dojo/on"], function(registry, on) {
   on(registry.byId("myselect"), "change", function (value) {
         alert("change_event.value = " + value);
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T14:16:32.360

聚会迟到了，但我最近遇到了这个问题。希望我的回答能帮助一些可怜的人维护一些遗留代码。答案适用于组合框，但也适用于选择 -

onChange 不足以触发来自 Dojo Combobox 的查询。需要将侦听器附加到下拉项目。

```
select.dropDown.on("itemClick", function(dijit, event) {
var node = dijit.domNode;
console.log(domAttr.get(node, "data-info-attribute"));
// or
console.log(node.dataset.infoAttribute);
}); 
```

参考：[https ://stackoverflow.com/a/12422155/4564016](https://stackoverflow.com/a/12422155/4564016)

# flexicious - 在 Flexicious Datagrid 上隐藏一些动态级别

> ID：13557776
> 
> 赞同：0
> 
> 时间：2012-11-26T02:12:35.550
> 
> 标签：flexicious

使用具有 enableDynamicLevels="true" 的终极灵活数据网格，我搜索了一种方法来隐藏在灵活数据网格上创建的最后两个动态级别（使用分组集合）。例如：在 groupLabel 列中，我有以下树

```
>2010
 >Jan
  >weeks
   >regions 
```

我只想显示

```
>2010
 >Jan 
```

有可能吗？

感谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:40:57.410

动态关卡旨在支持来自数据提供者的构建关卡。在这种情况下，您似乎只想构建 2 个关卡，那么为什么要使用动态关卡开始呢？只需在网格标记中指定固定数量的级别，它只会嵌套 2 个级别。

# gridview - 使用 UpdatePanelAinimationExtender 后无法将文件推送到客户端

> ID：13557777
> 
> 赞同：0
> 
> 时间：2012-11-26T02:12:38.420
> 
> 标签：gridview, updatepanel, linkbutton, updatepanelanimationexte

我有一个 gridView 来显示文档 (.PDF) 列表和一个 LinkBut​​ton 来下载/阅读文档。

链接按钮：

```
<ItemTemplate>
     <asp:LinkButton ID="lbDocTitle" runat="server" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "ID") %>' Text='<%# DataBinder.Eval(Container.DataItem, "Content") %>' OnClick="lbDocTitle_Click"></asp:LinkButton>
</ItemTemplate> 
```

lbDocTitle_click

```
protected void lbDocTitle_Click(object sender, EventArgs e)
        {
            LinkButton btn = (sender as LinkButton);

            int docID = Convert.ToInt32(btn.CommandArgument);
            //get fileName from docID here...

            ReadPdfFile(fileName);

        }

private void ReadPdfFile(string fName)
        {

            WebClient client = new WebClient();
            Byte[] buffer = client.DownloadData(fName);

            if (buffer != null)
            {
                Response.ContentType = "application/pdf";
                Response.AddHeader("content-length", buffer.Length.ToString());
                Response.BinaryWrite(buffer);
            }
        } 
```

**上面的所有代码都完美无缺。**

接下来我做了一些改进：在服务器上执行代码时添加一个加载屏幕

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

<asp:UpdatePanel ID="updatePanel" runat="server">
<ContentTemplate>
    <asp:GridView ...> <!-- move gridview here -->
</ContentTemplate>
</UpdatePanel>

<asp:UpdatePanelAnimationExtender ID="upae" BehaviorID="animation" runat="server" TargetControlID="updatePanel">
                <Animations>
                    <OnUpdating>
                        <Parallel duration="0">
                            <ScriptAction Script="onUpdating();" />  
                         </Parallel>
                    </OnUpdating>
                    <OnUpdated>
                        <Parallel duration="0">
                            <ScriptAction Script="onUpdated();" /> 
                        </Parallel> 
                    </OnUpdated>
                </Animations>
            </asp:UpdatePanelAnimationExtender> 
```

脚本：

```
function onUpdating() {
    $('#loadingBox-holder').show();
    $('#loadingBox').show();
}

function onUpdated(x) {
    $('#loadingBox-holder').hide();
    $('#loadingBox').hide();
} 
```

改进后，当点击`lblDocTitle`LinkBut​​ton 时，加载屏幕会显示并且仍在加载 loading loading... 并且永远加载。

我不知道为什么以及如何修复该错误希望有所帮助？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:15:34.810

好的，我修复了那个错误。只需使用其他 ASPX 页面来处理下载文件。UpdatePanel 无法响应除 HTML 之外的其他输出：D

# asp.net - Asp.net 控件会根据客户端呈现 HTML 吗？

> ID：13557783
> 
> 赞同：0
> 
> 时间：2012-11-26T02:13:34.060
> 
> 标签：asp.net, html, aspmenu-control

我的页面上有 asp:menu 控件。在我的 Firefox 更新到 v17 之前，它从来没有任何问题。
asp:menu 控件在 asp.net 3.5 中生成表。但是我有 CssAdapter 来生成无序列表。但是在 FF v17 上它不再工作了。IE 和 Chrome 都不错。我怀疑 Firefox 的 refID 属性有关系！
我在 Asp.Net 3.5 上运行，因此没有可用的 RenderMode 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:59:28.640

哇！这很简单，我所要做的就是将浏览器 refID 从 更改`MozillaFirefox`为`Mozilla`.

```
 <browser refID="Mozilla">
      <controlAdapters>
          <adapter controlType="System.Web.UI.WebControls.Menu"
                   adapterType="Test.Controls.MenuAdapter" />
      </controlAdapters>
  </browser> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:52:37.930

许多 asp.net webforms 控件基于浏览器功能呈现，并且浏览器功能的检测建立在可更新的引擎上。

因此，您可以尝试更新您的浏览器功能文件（也称为 browsercaps）。通过从这里下载最新的 browsercaps 文件来做到这一点：http: [//aspnet.codeplex.com/releases/view/41420](http://aspnet.codeplex.com/releases/view/41420)

您可以通过将它们放在 c:\windows\microsoft.net\framework\\CONFIG\ 目录中并覆盖那里的内容来更新它们，或者通过在 Web 应用程序的顶层创建一个 app_browsers 目录来更新它们，并将文件放在那里。请注意，如果更新未涵盖您的方案并且您无法在其他地方找到版本，您也可以编辑这些文件。

# design-patterns - 使用 Actor 的设计模式

> ID：13557784
> 
> 赞同：7
> 
> 时间：2012-11-26T02:13:46.323
> 
> 标签：design-patterns, akka, messaging, actor, event-driven-design

基于演员的范式非常酷。它的有效扩展能力使其成为必须评估任何并发系统的范例。我已经阅读了一些关于它的内容，并且对核心意图有一个不错的想法：使用消息和多个“参与者”驱动昂贵的操作，以最大限度地减少由于请求/响应交互引起的等待，从而提高系统的吞吐量。然而，我还没有充分了解人们与演员一起使用的设计模式。我正在寻找基于演员的系统的设计模式。

演员设计模式的一个常见例子是一个系统，其中有一个主协调演员和一群童工演员。他们掌握将昂贵的操作映射到较小的块，将较小的块作为消息发送给一群工人，等待他们的响应，然后将它们全部归结为结果。在这种模式的一些复杂示例中，worker actor 通知 master 他们已准备好进行更多工作，并且 master 会按需路由给他们更多工作。这确保了工作的适当平衡，并且在工作规模变化很大时很有用。

我四处搜索有关更多基于演员的模式的文献，但除了上述示例外，还找不到任何示例。我还没有浏览 Akka Actors 项目示例，但任何指针都会非常有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T02:59:20.480

我强烈推荐 Derek Wyatt 的“ [Akka Concurrency](http://www.artima.com/shop/akka_concurrency) ”一书——它专注于最新的 Akka 发行版 (2.1)，并介绍了使用 Akka 的几个最佳实践和许多设计模式（强调事件驱动设计）。然而，它确实假设了相当多的 Scala 知识。

Akka [Summer of Blog](http://letitcrash.com/post/30867120846/summer-of-blog-and-the-winner-is)系列的帖子也很有帮助（其中几篇也是由 Derek [和我写的一篇]）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T03:05:00.463

首先，熟悉[http://en.wikipedia.org/wiki/Flow-based_programming](http://en.wikipedia.org/wiki/Flow-based_programming)和[http://en.wikipedia.org/wiki/Dataflow_programming](http://en.wikipedia.org/wiki/Dataflow_programming)。Actor 模型是数据流编程的一个子集，Actor 模型的实现更加受限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-23T09:52:26.940

我只是对类似问题给出了[更详细的答案，但我将在这里总结我发现的关于 Actor 模型的最有趣的资源。](https://stackoverflow.com/a/68097224/8295283)

设计模式：

*   [认识顶级 Akka.NET 设计模式](https://petabridge.com/blog/top-akkadotnet-design-patterns/)（与语言无关的描述）
*   [Akka 交互模式](https://doc.akka.io/docs/akka/current/typed/interaction-patterns.html)（很好的概念，非常特定于 Akka）
*   [Applied Akka Patterns](https://www.oreilly.com/library/view/applied-akka-patterns/9781491934876/) (O'Reilly book, good concept overview, Akka-specific codez)

反应性演员和 DDD：

*   [在反应式系统中使用具有领域驱动设计 (DDD) 的 Actor 模型](https://www.youtube.com/watch?v=rMv4sul0RwU)（Vaughn Vernon 方式）
*   [DDD、事件溯源和演员](https://www.youtube.com/watch?v=58_Ehl3oETY)（Alexey Zimarev 对架构的扭曲）

Proto Actor（由 Akka 的一位创作者在 Alexey Zimarev 的帮助下进行的项目）。我发现这个项目比 Akka 更容易理解，Akka 非常复杂（我与他们没有从属关系，但考虑使用）：

*   [proto.actor](https://proto.actor)项目网站
*   [Proto Actor Golang 示例](https://github.com/AsynkronIT/protoactor-go/tree/dev/_examples)
*   [Proto Actor DotNet 示例](https://github.com/AsynkronIT/protoactor-dotnet/tree/dev/examples)
*   [原型演员训练营课程](https://proto.actor/docs/bootcamp/)

然后在 Github [actor-model](https://github.com/topics/actor-model)主题上搜索可能会产生有趣的东西。

我在 QCon Video [Actors or Not: Async Event Architectures](https://www.youtube.com/watch?v=FM_wuZj83-8)中找到了更多书籍推荐：

*   [Gregor Hohpe 和 Bobby Woolf 的企业集成模式](https://en.wikipedia.org/wiki/Enterprise_Integration_Patterns)：没错，这本书从 2003 年开始仍然适用。
*   [Vaughn Vernon的带有 Actor 模型](https://www.informit.com/store/reactive-messaging-patterns-with-the-actor-model-applications-9780133846836?ranMID=24808)的反应式消息传递模式，它将 EAI 模式专门应用于 Actor 设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T02:44:25.467

值得一提的是这里有关企业集成模式 ( [http://www.eaipatterns.com/](http://www.eaipatterns.com/) ) 的工作。完全有可能在他们的作品中从未提及“演员”这个词，但是从队列处理器到演员的翻译是微不足道的，就像将坡从英语翻译成法语一样。像您描述的负载平衡模式是您在那里学到的最少的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T06:44:11.013

我发现了更多关于基于事件的编程的文献。

[http://www.amazon.com/Event-Based-Programming-Taking-Events-Limit/dp/1590596439/ref=pd_rhf_ee_s_cp_8](https://rads.stackoverflow.com/amzn/click/com/1590596439)

关于基于事件的交互模式的章节似乎很有希望

# r - 将图形保存为 pdf 或 png 缩放问题

> ID：13557787
> 
> 赞同：1
> 
> 时间：2012-11-26T02:14:21.323
> 
> 标签：r, pdf, plot, png

我正在尝试将我的两个 q 图（A 和 B）保存为 pdf 或 png。对于这两个图，X 轴和 Y 轴具有相同的单位（距离以米为单位）。两个图的 Xlim 和 Ylim 是不同的。当我显示 pdf 文件时，我希望图 A 中 1m 的表示等于图 B 中的 1m。

就我而言：

```
xlim.A=c(3,6)
ylim.A=c(-.2,1.5)
xlim.B=c(10,11)
ylim.B=c(0,4)
x <- seq(from=xlim.A[1],to=xlim.A[2],length.out=100)
y <- seq(from=ylim.A[1],to=ylim.A[2],length.out=100)
A <- data.frame(x=x,y=y)

x <- seq(from=xlim.B[1],to=xlim.B[2],length.out=100)
y <- seq(from=ylim.B[1],to=ylim.B[2],length.out=100)
B <- data.frame(x=x,y=y)    

require(ggplot2)

my.plot.A <- qplot(A$x,A$y,asp=(ylim.A[2]-ylim.A[1])/(xlim.A[2]-xlim.A[1]),xlab="Distance (m)",
ylab="Elevation (m)")
my.plot.B <- qplot(B$x,B$y,asp=(ylim.B[2]-ylim.B[1])/(xlim.B[2]-xlim.B[1]),xlab="Distance (m)",
ylab="Elevation (m)")
ggsave("plot_A.pdf",plot=my.plot.A,scale=1)
ggsave("plot_B.pdf",plot=my.plot.B,scale=1) 
```

通过这样做，第一个文件中 1m 的等效距离不等于第二个文件中的 1m。我怎样才能让他们平等？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:21:12.283

通过使用 asp，您将强制这两个图具有不同的比例。以印刷形式匹配它们将非常困难。

相反，您可以使用更大的图表，然后根据需要进行裁剪，从而确保正确的比例。

```
xscale <- c(min(xlim.A[[1]], xlim.B[[1]]), max(xlim.A[[2]], xlim.B[[2]]))
yscale <- c(min(ylim.A[[1]], ylim.B[[1]]), max(ylim.A[[2]], ylim.B[[2]]))

sameScale <- coord_cartesian(xlim=xscale, ylim=yscale)

plotA <- qplot(A$x,A$y) + sameScale
plotB <- qplot(B$x,B$y) + sameScale 
```

# java - java迭代器错误通过hashset排序

> ID：13557792
> 
> 赞同：-1
> 
> 时间：2012-11-26T02:15:40.903
> 
> 标签：java, iteration, hashset

我需要使用 HashSet 返回包含负值和正值的值，同时保持顺序。这就是我所拥有的，但我不断收到错误消息。任何帮助都是极好的。

```
public static double[] negated(double[] a)
{
    Set<Double> x = new HashSet<Double>();
    for (int i = 0; i < a.length; i++)
    {
        x.add((Double)a[i]);
    }

    for(double e : x)
    {
       if (x.contains(-e) == false)
       {
          x.remove(e);
       }
    }

    List<Double> list = new ArrayList<Double>(x);
    double[] b = new double[list.size()];
    for (int i = 0; i < a.length; i++)
    {
        if (list.contains(a[i]))
        {
          b[i] = list.get(i);
        }
    }

    return b;
}

public static void main(String[] args)
{
    double[] c = {3, 4, 5, 6, -7, -5, -3, 9};
    System.out.println(negated(c));
        } 
```

这是错误：

```
xception in thread "main" java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:894)
at java.util.HashMap$KeyIterator.next(HashMap.java:928)
at Ass10.negated(Ass10.java:144)
at Ass10.main(Ass10.java:182) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:36:41.873

您无法在迭代列表时对其进行修改。这是非法的：

```
for(double e : x) {
    if (x.contains(-e) == false) {
        x.remove(e);
    }
} 
```

`Set<double>`更好的方法是用你想保留的东西做一个新的：

```
Set<Double> list = new HashSet<Double>();
for (double e : x) {
    if (x.contains(-e)) {
        list.add(e);
    }
} 
```

# google-maps - 填满地图的 infoWindow

> ID：13557793
> 
> 赞同：0
> 
> 时间：2012-11-26T02:15:57.697
> 
> 标签：google-maps, google-maps-api-3

有谁知道如何创建一个自定义的谷歌地图信息窗口，它只会打开并完全填充地图，而不是平移地图并将气泡设置在标记上？基本上，我想做的是在地图上放置我的标记，然后当用户单击标记时，它只会在适合整个地图本身的面板中打开内容。我查看了这里提到的选项：[链接](https://stackoverflow.com/questions/1121252/alternatives-to-infowindow)，但这些似乎都没有做我想要的，它们仍然打开一个“气泡”类型的窗口。有没有人这样做或者有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:33:22.780

创建自定义信息窗口并不难，但有点复杂。如果你想找到最简单的方法，我推荐 InfoBubble 库。

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)

如果您只想在 infoWindow 打开时阻止地图平移，您可以指定一个选项：

```
var infoWnd = new google.maps.InfoWindow({
   disableAutoPan : true
}); 
```

# perl - Perl 是否支持函数调用中的命名参数？

> ID：13557794
> 
> 赞同：13
> 
> 时间：2012-11-26T02:16:04.623
> 
> 标签：perl, named-parameters

根据我对支持该功能的语言的经验，使用命名参数而不是位置参数调用函数的程序更易于阅读和维护。

我认为 Perl 有这个功能，但它不适合我。

这是我正在使用的软件包的怪癖，还是我做错了？

### 设置函数调用

我的第一个 Perl 项目是使用 HTML::TableExtract 包从 HTML 标记中提取表格数据并将其显示为文本。

以下代码设置解析器：

```
use strict;
use warnings;
use HTML::TableExtract;

my $markup = <<MARKUP;
<table>
  <tr> <th>a</th> <th>b</th> <th>c</th> </tr>
  <tr> <td>1</td> <td>2</td> <td>3</td> </tr>
  <tr> <td>4</td> <td>5</td> <td>6</td> </tr>
</table>
MARKUP

my $parser = HTML::TableExtract->new() ;

$parser->parse($markup) ; 
```

[文档](http://search.cpan.org/~msisk/HTML-TableExtract-2.11/lib/HTML/TableExtract.pm)说我可以使用`tables_dump`方法和使用参数将输出转储到命令提示符`$show_content`并`$col_sep`控制输出格式：

> `tables_report([$show_content, $col_sep])`
> 
> 返回一个总结提取表的字符串，以及它们的深度和计数。可选地采用 $show_content 标志，它将转储每个表的提取内容以及由 $col_sep 分隔的列。默认 $col_sep 是 ':'。
> 
> `tables_dump([$show_content, $col_sep])`
> 
> 除了将信息转储到 STDOUT 之外，与 tables_report() 相同。

### 使用位置参数和命名参数调用

如果我按文档顺序传递位置参数，我会得到我期望的输出：

```
$parser->tables_dump(1, '_') ; 
```

列由下划线而不是默认冒号分隔：

```
TABLE(0, 0):
a_b_c
1_2_3
4_5_6 
```

在 Perl.com 的[Advance Subroutines 文章](http://www.perl.com/pub/2006/02/23/advanced_subroutines.html)之后，我尝试传递包含参数名称和值的散列以阐明参数的含义：

```
$parser->tables_dump({show_content => 1, col_sep => '_'}) ; 
```

Perl 不明白这一点。它忽略 的值`col_sep`并使用默认值输出：

```
TABLE(0, 0):
a:b:c
1:2:3
4:5:6 
```

如果我不尝试更改分隔符，我会得到相同的输出：

```
$parser->tables_dump({show_content => 1}) ; 
```

即使我指定了无意义的参数名称，我也会得到相同的输出：

```
$parser->tables_dump({tweedledum => 1, tweedledee => '_'}) ; 
```

我可以使用命名参数样式调用此函数，还是应该只满足于位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T02:30:24.037

Perl 本身并不支持命名参数，但是可以设计函数来接受命名参数（作为散列或 hashref）。函数的作者如何实现它取决于函数的作者。您需要提供函数所期望的参数，否则您会得到意想不到的结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-09T23:46:43.197

[Perl 中的命名参数传递（即使使用默认值）在面向对象的 Perl](http://perltraining.com.au/notes/perloo.pdf "Perl 培训澳大利亚")的第 6 章中有很好的解释。这种风格非常重要，并且广泛用于对象构造函数中。这就是为什么在他们的 OO Perl 书中对其进行了解释。

我将引用他们的两个例子：

```
# This is how you call a subroutine using named argument passing
interests(name => "Paul", language => "Perl", favourite_show => "Buffy");

# This is how you define the subroutine to accept named arguments
sub interests {
   my (%args) = @_;

   # This is how you capture named arguments and define
   # defaults for the ones missing from a particular call.
   my $name           = $args{name}           || "Bob the Builder";
   my $language       = $args{language}       || "none that we know";
   my $favourite_show = $args{favourite_show} || "the ABC News";

   print "${name}’s primary language is $language. " .
   "$name spends their free time watching $favourite_show\n";
} 
```

另一个给出定义默认值（在哈希中）的不同方式的例子是：

```
my %defaults = ( pager => "/usr/bin/less", editor => "/usr/bin/vim" );

sub set_editing_tools {
    my (%args) = @_;

    # Here we join our arguments with our defaults. Since when
    # building a hash it’s only the last occurrence of a key that
    # matters, our arguments will override our defaults.
    %args = (%defaults, %args);

    # print out the pager:
    print "The new text pager is: $args{pager}\n";

    # print out the editor:
    print "The new text editor is: $args{editor}\n";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T02:21:30.113

Perl 没有对命名参数的内置支持。如果要使用它们，则必须专门编写函数以接受该样式的参数。因此，您必须满足于位置参数（或编写包装函数（可能在子类中））。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-26T15:11:15.147

> 在 Perl.com 的 Advance Subroutines 文章之后，我尝试传递包含参数名称和值的散列以阐明参数的含义：

那篇文章介绍了一种编写子例程的方法，以便它们接受命名参数的 hashref。如果您调用的 sub 没有被写入接受它，那么它将不知道如何正确处理它。

> ```
> $parser->tables_dump({show_content => 1, col_sep => '_'}) ; 
> ```
> 
> Perl 不明白这一点。它忽略 col_sep 的值并使用默认值输出：

不要过于迂腐，但 Perl 明白这一点。但是，`tables_dump`仅写入接受标量参数列表。当您以这种方式调用它时，它会接收一个标量参数。这个参数恰好是对哈希的引用，但`tables_dump`不知道也不关心它，所以它使用引用作为`$show_content`. 这可能等同于传递`1`for `show_content`，因为两者`1`和任何可能的引用都将在布尔上下文中评估为“真”，我假设`$show_content`它只用作布尔值。

由于没有第二个参数，因此没有分配任何内容`$col_sep`，因此它使用默认分隔符，如您所见。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-26T04:41:54.287

这不是太复杂。您可以像散列或散列引用一样传递键值对，并在子例程中将参数加载到散列或散列引用中。

```
# called like $parser->tables_dump({show_content => 1, col_sep => '_'}) ;
sub TheParser::tables_dump {
    my ($self, $args) = @_;
    if ($args->{show_content} == 1) {
        print join $args->{col_sep}, $self->the_column_data();
        ...
    }
} 
```

使用另一行，您可以将您知道的命名参数加载到适当命名的变量中：

```
 my ($self, $args) = @_;
    my ($show_content, $col_sep) = @$args{qw(show_content col_sep)};
    if ($show_content == 1) {
       ... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-17T21:19:27.823

离开标题的问题，您可以执行以下操作：

```
use strict;
use Carp::Assert;

sub func {
   my (%hash) = @_;
   assert($hash{'baz'} == 1);
   assert($hash{'mu'} == 2);
}

func('baz' => 1, 'mu' => 2); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-26T04:47:38.217

这是我编写的一个简单程序，它可以使用一种命名参数。它允许默认值。

```
#!/usr/bin/perl
use strict;
use warnings;
use 5.014;
use POSIX qw/ strftime /;

# Script to get prior Monday (if today is Mon, then Mon a week ago).

for my $day (qw/ Sun Mon Tue Wed Thu Fri Sat /) {
    say "Last $day: ", last_monday( day => $day );  
}

sub last_monday {
    my %arg =  ( time => [localtime],
                 day  => 'mon',
                 span => 1,
                 @_
               );
    my $dow; # day of week

    if    ('sunday'    =~ /$arg{day}/i) { $dow = 0}
    elsif ('monday'    =~ /$arg{day}/i) { $dow = 1}
    elsif ('tuesday'   =~ /$arg{day}/i) { $dow = 2}
    elsif ('wednesday' =~ /$arg{day}/i) { $dow = 3}
    elsif ('thursday'  =~ /$arg{day}/i) { $dow = 4}
    elsif ('friday'    =~ /$arg{day}/i) { $dow = 5}
    elsif ('saturday'  =~ /$arg{day}/i) { $dow = 6}
    else {
        warn "$arg{day} is not a valid day of week. $!";
        return;
    }

    my ($wday, @dmy) = @{ $arg{time} }[6, 3..5];

    # (will work across month, year boundries)
    $dmy[0] -= ($wday - $dow) % 7 || ($arg{span} ? 7 : 0); # $dmy[0] == mday
    return strftime "%Y%m%d", 0,0,0,@dmy;
} 
```

# ruby-on-rails - 如何使用 twitter REST api 和 railscast 241

> ID：13557796
> 
> 赞同：0
> 
> 时间：2012-11-26T02:16:32.163
> 
> 标签：ruby-on-rails, rest, twitter

在这里休息菜鸟：

我正在使用来自 ryan bates rails cast #241 的代码

```
http://railscasts.com/episodes/241-simple-omniauth 
```

我可以很好地与我的用户进行身份验证....

现在我想显示我在views/articles/index.html.erb 页面上发布的最后一条推文......

我只想显示来自这个 REST api 的数据......“https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline”

如何以最简单的方式更改此代码？

```
<% title "Articles" %>

<div id="articles">

    <!-- TODO grab my tweets with GET Statuses/home_timeline -->

<% for article in @articles %>
  <h2>
    <%= link_to article.name, article %>
    <span class="comments">(<%= pluralize(article.comments.size, 'comment') %>)</span>
  </h2>
  <div class="created_at">on <%= article.created_at.strftime('%b %d, %Y') %></div>
  <div class="content"><%= simple_format(article.content) %></div>
<% end %>
</div>

<p><%= link_to "New Article", new_article_path %></p> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:33:06.200

你应该在*twitter gem*上抢购一下：http : [//sferik.github.com/twitter/](http://sferik.github.com/twitter/)

您可以获取用户的时间线，例如：`timeline = Twitter.user_timeline( twitter_username )`

# asp.net - 与 WebAPI 异步时保留 HttpContext（中等信任）

> ID：13557798
> 
> 赞同：6
> 
> 时间：2012-11-26T02:17:03.923
> 
> 标签：asp.net, .net, asynchronous, asp.net-web-api, async-await

我正在构建一组 ASP.Net 托管的 WebAPI 服务，这些服务必须使用严重依赖于 HttpContext.Current 的旧库。我无法确保在参与异步调用的所有方法中都保留上下文。我在下面的代码中尝试了 await/Task.Wait 和 TaskScheduler.FromCurrentSynchronizationContext() 的几种变体。

```
 [HttpGet]
    public Task<IEnumerable<string>> ContinueWith()
    {
        Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR");  //or another culture that is not the default on your machine
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

        var output = new List<string> { TestOutput("Action start") };

        var task = Task.Factory.StartNew(() =>
            {
                Thread.Sleep(1000);
                return TestOutput("In Task");
            }).ContinueWith(slowString =>
            {
                output.Add(slowString.Result);

                output.Add(TestOutput("Action end"));
                return output as IEnumerable<string>;
            });

        output.Add(TestOutput("Action Mid"));

        return task;
    }

    private string TestOutput(string label)
    {
        var s = label + " ThreadID: " + Thread.CurrentThread.ManagedThreadId.ToString(CultureInfo.InvariantCulture);
        s += " " + Thread.CurrentThread.CurrentCulture.EnglishName;
        s += HttpContext.Current == null ? " No Context" : " Has Context";
        Debug.WriteLine(s);
        return s;
    } 
```

我希望能够确保 CurrentCulture 是 fr-FR，并且 HttpContext.Current 在调用 TestOutput 的每个点都不为空。对于我尝试过的任何东西，我都没有成功地为“任务中”调用做到这一点。同样在我的一些测试线程中，id 永远不会改变，这表明我已经有效地删除了该方法的异步性。如何确保在每次调用 TestOutput 时都保留区域性和 HttpContext.Current，并且代码可以在不同的线程上自由运行？

在闭包中捕获 HttpContext.Current 然后简单地再次设置它对我来说不起作用，因为我需要支持中等信任，这将在调用 HttpContext.Current 设置器时引发安全异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T07:10:34.277

有一点值得注意的事实是，[HttpContext.Current](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)是可写的。

```
var context = HttpContext.Current;
var task = Task.Factory.StartNew(() => {
    HttpContext.Current = context;
    // You may want to set CultureInformation here too.

    return TestOutput("In Task");
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T02:55:44.343

每当您执行任务时都会保留上下文`await`。

您所看到的是没有线程池任务的上下文（`Task.Run`, ,或`TaskFactory.StartNew`就此而言`BackgroundWorker`或）。这是正常的，也是意料之中的。`Thread``Delegate.BeginInvoke`

所以，不要使用线程池任务。您的示例代码似乎想要使用具有 的多个线程进行并行处理`HttpContext`，这根本是不可能的。

您可以根据需要执行并发`async`方法，但这要求您`Thread.Sleep`实际上可以是一种`async`方法，而不是基于 CPU 的方法：

```
[HttpGet]
public async Task<IEnumerable<string>> Test()
{
  Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR");
  Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

  var output = new List<string> { TestOutput("Action start") };

  var task = SlowStringAsync();
  output.Add(TestOutput("Action Mid"));
  output.Add(await task);
  output.Add(TestOutput("Action end"));
  return output;
}

public async Task<string> SlowStringAsync()
{
  await Task.Delay(1000);
  return TestOutput("In Task");
} 
```

如果您的旧库不在您的控制范围内并且您无法制作它`async`，那么您将不得不同步调用它。`async`在以下情况下从方法调用同步方法是可以接受的：

```
[HttpGet]
public async Task<IEnumerable<string>> Test()
{
  Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR");
  Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

  var output = new List<string> { TestOutput("Action start") };

  output.Add(TestOutput("Action Mid"));
  Thread.Sleep(1000);
  output.Add(TestOutput("Not Really In Task"));
  output.Add(TestOutput("Action end"));
  return output;
} 
```

# ruby-on-rails - 在忽略 Rails 中的空格时按名称查找？

> ID：13557799
> 
> 赞同：0
> 
> 时间：2012-11-26T02:17:11.917
> 
> 标签：ruby-on-rails

我的标签控制器中有以下操作：（`params[:q]`来自这个插件[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)）

```
 def index
    @tags = Tag.where("name like ?", "%#{params[:q]}%")
    results = @tags.map(&:attributes)
    @tag = Tag.find_by_name(params[:q])
    if @tag.blank?
      results << {:name => "Add: #{params[:q]}", :id => "CREATE_#{params[:q]}_END"}
    end

    respond_to do |format|
      format.html
      format.json { render :json => results }
    end
  end 
```

这部分：

```
 @tag = Tag.find_by_name(params[:q])
  if @tag.blank?
    results << {:name => "Add: #{params[:q]}", :id => "CREATE_#{params[:q]}_END"}
  end 
```

使上面的代码行仅在当前标签名称不存在时触发。

问题是，如果用户在输入中键入这样的内容：

```
"programming " <- a trailing white space
" programming" <- a trailing white space 
```

无论如何都会执行代码，因为尾随空格使 Rails 认为它​​是一个新名称。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:24:11.180

你可以这样做：

```
params[:q].delete!(' ')
@tag = Tag.find_by_name(params[:q])
if @tag.blank?
  results << {:name => "Add: #{params[:q]}", :id => "CREATE_#{params[:q]}_END"}
end 
```

请注意，第一行将删除 params[:q] 中的所有空格。如果这不是你想要的，你可以先用*dup*方法复制变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:22:50.493

通过调用去除空格`String#strip`- 去除所有前导和尾随空格：

```
" programming ".strip 
=> "programming" 
```

# processing - 处理 java.lang.ClassCastException

> ID：13557800
> 
> 赞同：0
> 
> 时间：2012-11-26T02:17:13.193
> 
> 标签：processing

不知道我做了什么，但是当我尝试使用任何渲染大小（800、500、**P2D**）时，我突然开始收到以下错误；或 P3D。我正在使用处理 2.0b4

线程“AWT-EventQueue-0”java.lang.ClassCastException 中的异常：jogamp.opengl.macosx.cgl.MacOSXOnscreenCGLDrawable 无法在 processing.opengl.PGL$PGLListener.display(PGL.java 中转换为 javax.media.opengl.GLFBODrawable :2454) 在 jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:373) 在 jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:358) 在 javax.media.opengl.awt.GLCanvas$7.run(GLCanvas.java :983) jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:655) jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:594) javax.media.opengl.awt.GLCanvas$8.run(GLCanvas.java :996) 在 javax.media.opengl.Threading.invoke(Threading.java:193) 在 javax.media.opengl.awt.GLCanvas.display(GLCanvas.java:449) 在 javax.media.opengl.awt.GLCanvas。油漆（GLCanvas.java:499) 在 sun.awt.RepaintArea.paintComponent(RepaintArea.java:276) 在 sun.awt.RepaintArea.paint(RepaintArea.java:241) 在 apple.awt.ComponentModel.handleEvent(ComponentModel.java:263) 在java.awt.Component.dispatchEventImpl(Component.java:4790) 在 java.awt.Component.dispatchEvent(Component.java:4544) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:635) 在 java.awt.EventDispatchThread .pumpOneEventForFilters(EventDispatchThread.java:296) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread。 java:196) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188) 在 java.awt.EventDispatchThread。run(EventDispatchThread.java:122) 线程“动画线程”中的异常 java.lang.RuntimeException: java.lang.ClassCastException: jogamp.opengl.macosx.cgl.MacOSXOnscreenCGLDrawable 在 jogamp 中无法转换为 javax.media.opengl.GLFBODrawable。 common.awt.AWTEDTExecutor.invoke(AWTEDTExecutor.java:58) at jogamp.opengl.awt.AWTThreadingPlugin.invokeOnOpenGLThread(AWTThreadingPlugin.java:103) at jogamp.opengl.ThreadingImpl.invokeOnOpenGLThread(ThreadingImpl.java:205) at javax.media .opengl.Threading.invokeOnOpenGLThread(Threading.java:172) 在 javax.media.opengl.Threading.invoke(Threading.java:191) 在 javax.media.opengl.awt.GLCanvas.display(GLCanvas.java:449) 在processing.opengl.PGL.requestDraw(PGL.java:870) 在 processing.opengl.PGraphicsOpenGL.requestDraw(PGraphicsOpenGL.java:1523) 在 processing.core.PApplet。在 java.lang.Thread.run(Thread.java:637) 处运行（PApplet.java:2006） 原因：java.lang.ClassCastException：jogamp.opengl.macosx.cgl.MacOSXOnscreenCGLDrawable 无法转换为 javax.media.opengl .GLFBODrawable at processing.opengl.PGL$PGLListener.display(PGL.java:2454) at jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:373) at jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:358) at javax.media.opengl.awt.GLCanvas$7.run(GLCanvas.java:983) 在 jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:655) 在 jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:594) 在javax.media.opengl.awt.GLCanvas$8.run(GLCanvas.java:996) 在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:199) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:633) ) 在 java.awt。EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread .java:196) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)java:188) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)java:188) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:32:41.647

P2D 和 P3D 在 Processing 2.0 中更改为使用 OPENGL。有很多关于那个的错误。因此，您应该尝试最新的 beta 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-15T05:55:03.387

您应该尝试最新的处理版本 3.3.3。

# ruby-on-rails-3 - 无法批量分配受保护的属性：资产

> ID：13557804
> 
> 赞同：1
> 
> 时间：2012-11-26T02:17:40.493
> 
> 标签：ruby-on-rails-3, mass-assignment

我在这里按照教程截屏：[http](http://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads) ://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads 。我希望我的模型显示多张图片上传。

我仔细检查了每个步骤，最常见的问题是忘记将 assets_attributes 添加到 attr_accessible，我已经做到了。另一个问题可能是忘记将 ID 添加到资产模型，我也这样做了。但是，我仍然无法理解为什么会发生这种情况。

```
Can't mass-assign protected attributes: asset in app/controllers/posts_controller.rb:24:in `update' 
```

我已经为 Post to post 模型添加了所有属性的列表。像：

```
class Post < ActiveRecord::Base
  attr_accessible :name, :content, :assets_attributes 
  validates :user_id, presence: true
  belongs_to :user
  has_many :assets
  accepts_nested_attributes_for :assets, :allow_destroy => true
  default_scope order: 'posts.created_at DESC'
 end 
```

这是 post_controller.rb 文件：

```
 def edit
    @post = Post.find(params[:id])
    5.times { @post.assets.build }
 end
 def update
    @post = Post.find(params[:id])
    if @post.update_attributes(params[:post])      
          redirect_to @post, :notice => "Post has been updated."
 end
def create
    post = current_user.posts.build(params[:post])
    if post.save
        flash[:success] = "post created success!"
        redirect_to @post
    else
        @feed_items = []
        flash[:failure] = "post created fail!"
        redirect_to root_path
    end
 end
 def new
    @post = current_user.posts.new #if signed_in?
    5.times { @post.assets.build }
 end 
```

这是模板文件：

```
 <%= simple_form_for(@post, :html => {:multipart => true})  do |f| %>
           <%= f.label :name %>
           <%= f.text_field :name %>
           <%= f.label :content %>
           <%= f.text_field :content %>
           <%= f.simple_fields_for :assets, :html => { :multipart => true } do |asset_fields| %>
               <% if asset_fields.object.new_record? %>
                   <P><%= asset_fields.file_field :asset %> </P>
               <% end %>
           <% end %>
            <%= f.simple_fields_for :assets, :html => { :multipart => true } do |asset_fields| %>
               <% unless asset_fields.object.new_record? %>
                  <P><%= link_to image_tag(asset_fields.object.asset.url(:thumb)), asset_fields.objects.asset.url(:original) %>
                     <%= asset_fields.check_box :_destroy %></P>
               <% end %>
           <% end %> 
```

下面是asset.rb：

```
 class Asset < ActiveRecord::Base
      belongs_to :post
      has_attached_file :asset,
                :style => { :large => "640x480", :medium => "300x300", :thumb => "100x100"} ,
                :path => ":rails_root/public/system/posts/images/:id/:style/:filename",
                :url => "/system/posts/images/:id/:style/:filename"
    end 
```

有人可以给我一些提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:01:26.093

您的`Asset`模型也需要具有 attr_accessible - 特别是针对该`asset`字段。

# python - 在 Python 中使用 scatter of MPI (mpi4py) 来拆分向量处理

> ID：13557806
> 
> 赞同：2
> 
> 时间：2012-11-26T02:17:44.627
> 
> 标签：python, mpi

所以这是一个简单的代码片段，它对我来说不起作用，说明期望 4 个项目，得到 55 个。实际上，我想要一个字符串列表并将这个列表拆分到 n_processes 之间以对它们进行计算。分散怎么可能？

```
from mpi4py import MPI

comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()

if rank == 0:
   data = [(i+1)**2 for i in range(55)]
comm.Scatter(data, root=0)
print rank, data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:40:58.340

看一下底层的 Scatter API 调用：

[http://www.open-mpi.org/doc/v1.5/man3/MPI_Scatter.3.php](http://www.open-mpi.org/doc/v1.5/man3/MPI_Scatter.3.php)

Scatter 调用使用 list 参数将列表的一个元素发送到每个进程。您在列表中硬编码了 55 个元素，但听起来您只运行了 4 个进程。要么更改`range(55)`为`range(size)`（更合适的解决方案），要么运行 55 个进程，以使现有代码正确。

# php - 检查哪个函数是真假

> ID：13557809
> 
> 赞同：1
> 
> 时间：2012-11-26T02:18:42.500
> 
> 标签：php, validation, csv

**对不起，糟糕的标题，让我试着在下面解释一下。**

我写了一堆返回真或假的小函数。

```
validateName()
validateEmail()
validateAddr()
validateBirtd()
validateUsername() 
```

现在我正在循环使用 CSV 文件导入的大量数据，并检查哪些数据有效或无效（返回真或假）。

我这样做：

```
if (validateName($data[0]) == true AND validateEmail($data[1]) == true AND validateAddr($data[3]) == true AND validateBirtd($data[5]) == true AND validateUsername($data[6])==true) {
 // create array to import etc etc
}else{
 // create other array with data who failed validation, to show user later..etc etc
} 
```

我的问题是 - 有没有更聪明的方法来做到这一点？是否可以为每个失败的验证创建一个列表？假设 3 个条目未通过 validateEmail() 函数，10 个条目均未通过 validateEmail 和 validateName()。

我是否有办法对此进行排序，以便我可以告诉用户“这些条目未通过电子邮件验证”和“这些条目未通过名称和电子邮件验证”。

我考虑过一次验证一个字段，但是如果一个条目有多个验证错误，这样我就会有重复项。

如果有某种我不知道在哪里可以做到这一点的逻辑会很酷

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:30:27.330

你可以创建一个函数。

```
function validate($data) {
  $errors = array();
  $fields = array('Name', 'Email', 'Addr', 'Birtd', 'UserName');
  foreach ($fields as $i => $field) {
    $func = 'validate'.$field;
    if (!$func($data[$i])) {
      $errors[] = $field;
    }
  }
  return $errors;
}

$errors = validate($data);
if (empty($errors)) {
  // create array to import etc etc
} else {
  // errors
  echo 'There are errors with ' . implode(',', $errors);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:53:50.583

您可以使用`Iterators`同时获取 CSV 内容和过滤。您还可以为每个 CSV 索引添加不同的回调

**例子**

```
$csv = new CSVFilter(new CSVIterator("log.txt"));
$csv->addFilter(0, "validateName"); //<------------ Means validate Index at 0
$csv->addFilter(1, "validateEmail");
$csv->addFilter(2, "validateAddr");
$csv->addFilter(3, "validateBirtd");
$csv->addFilter(4, "validateName");
$csv->addFilter(5, "validateUsername");

foreach ( $csv as $data ) {
    var_dump($data);
}

//To get Errors 
var_dump($csv->getErrors()); 
```

**CSV 过滤器**

```
class CSVFilter extends FilterIterator {
    protected $filter = array();
    protected $errors = array();

    public function __construct(Iterator $iterator) {
        parent::__construct($iterator);
    }

    public function addFilter($index, Callable $callable) {
        $this->filter[$index] = $callable;
        $this->errors[$callable] = 0;
    }

    public function getErrors() {
        return $this->errors;
    }

    public function accept() {
        $line = $this->getInnerIterator()->current();
        $x = true;
        foreach ($this->filter  as $key => $var ) {
            if (isset($line[$key])) {
                $func = $this->filter[$key];
                $func($var) or $this->errors[$func] ++ and $x = false;
            }
        }
        return $x;
    }
} 
```

**CSVIterator**

```
class CSVIterator implements \Iterator {
    protected $fileHandle;
    protected $line;
    protected $i;

    public function __construct($fileName) {
        if (! $this->fileHandle = fopen($fileName, 'r')) {
            throw new \RuntimeException('Couldn\'t open file "' . $fileName . '"');
        }
    }

    public function rewind() {
        fseek($this->fileHandle, 0);
        $this->line = fgetcsv($this->fileHandle);
        $this->i = 0;
    }

    public function valid() {
        return false !== $this->line;
    }

    public function current() {
        return array_map("trim", $this->line);
    }

    public function key() {
        return $this->i;
    }

    public function next() {
        if (false !== $this->line) {
            $this->line = fgetcsv($this->fileHandle);
            $this->i ++;
        }
    }

    public function __destruct() {
        fclose($this->fileHandle);
    }
} 
```

**简单随机函数**

```
function validateName($var) {
    return mt_rand(0, 5);
}

function validateEmail($var) {
    return mt_rand(0, 5);
}

function validateAddr($var) {
    return mt_rand(0, 5);
}

function validateBirtd($var) {
    return mt_rand(0, 5);
}

function validateUsername($var) {
    return mt_rand(0, 5);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T02:46:34.607

如果你的东西更封装一些，你可以试试这个。它允许您为可能要验证的每个 CSV 文件编写不同的验证器。此外，您可以在任一类中编写允许您在每一行上执行附加任务的方法。我只是发现它比拥有一堆全局命名的函数更干净、更容易维护。

注意：我显然使用了一些非常基本的验证器示例和异常。这里的想法是我提供了一个布局供您遵循；您可以根据需要自定义任何特定行为。

### 用法

```
$c = new UserCsvValidator('user_data.csv');

try {
    $c->validate();
}
catch (Exception $e) {
    echo $e->getMessage();
} 
```

### 执行; 父类

```
<?php

class CsvValidator {

    private $filename;
    private $fh;
    protected $fields = array();

    public function validate__construct($filename, ) {

        $this->filename = $filename;

        // open file
        if ( ($this->fh = fopen($this->filename, 'r')) === false) {
            throw new Exception("could not open file: {$this->filename}");
        }
    }

    public function validate() {
        while( ($row=fgetcsv($this->fh)) !== false) {

            // create hash
            if ( ($hash = array_combine($this->fields, $row)) === false) {
                throw new Exception("invalid row" . print_r($row, true));
            }

            // validate
            foreach ($hash as $field => $value) {

                // determine method call
                $method = "validate_{$field}";
                if (!method_exists($this, $method)) {
                    throw new Exception("validation method not defined: {$method}");
                }

                // validate the field
                if (call_user_func(array($this, $method), $value) === false) {
                    throw new Exception("invalid value for {$field}: {$value}");
                }
            }
        }
    }
} 
```

### 执行; 子类

```
<?php

class UserCsvValidator extends CsvValidator {

    protected $fields = array('name', 'email', 'address', 'birth_date', 'username');

    // example functions for each field
    protected function validate_name($value) {
        return !empty($value);
    }

    protected function validate_email($value) {
        return strpos($value, '@') !== false;
    }

    protected function validate_address($value) {
        return !empty($value);
    }

    protected function validate_birth_date($value) {
        return date('Y-m-d', strtotime($value)) == $value;
    }

    protected function validate_username($value) {
        return !empty($value);
    }
} 
```

# php - 在 PHP 中从文件系统获取图像

> ID：13557812
> 
> 赞同：0
> 
> 时间：2012-11-26T02:18:50.117
> 
> 标签：php, image, file-io

我正在编写一个 PHP 程序，它将从文件系统获取图像并将其显示在返回的页面上。问题是该文件未存储在 /var/www 目录中。它存储在 /var/site/images 中。我怎样才能做到这一点？我是否必须用 fopen 将其读入内存，然后回显内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:21:14.163

用于`fpassthru`将内容从文件系统转储到输出流。事实上，文档`fpassthru`包含您正在尝试做的演示：http: [//us3.php.net/fpassthru](http://us3.php.net/fpassthru)

```
<?php

// open the file in a binary mode
$name = './img/ok.png';
$fp = fopen($name, 'rb');

// send the right headers
// - adjust Content-Type as needed (read last 4 chars of file name)
// -- image/jpeg - jpg
// -- image/png - png
// -- etc.
header("Content-Type: image/png");
header("Content-Length: " . filesize($name));

// dump the picture and stop the script
fpassthru($fp);
fclose($fp);
exit;

?> 
```

# c++ - 吃豆人游戏的东西没有声明？

> ID：13557813
> 
> 赞同：0
> 
> 时间：2012-11-26T02:19:05.947
> 
> 标签：c++, scope, declaration

我在编译时遇到这两个错误，但我不明白我做错了什么。

> main.cpp|107|错误：未在此范围内声明“sqrt”|
> 
> main.cpp|107|错误：未在此范围内声明“pow”|

```
#include <iostream>
#include <Windows.h>
using namespace std;

struct Player
{
    int x, y;
    Player()
    {
        x = -1;
        y = -1;
    }
};

struct Ghost
{
    int x, y, direction;
    Ghost()
    {
        x = -1;
        y = -1;
        direction = 1;
    }
};

const char SYMBOL_EMPTY = ' ';
const char SYMBOL_PLAYER = '@';
const char SYMBOL_GHOST = 'G';
const char SYMBOL_WALL = '#';
const int MapDx = 10;
const int MapDy = 20;
const int GameSpeed = 100;
const int LEFT = 1;
const int RIGHT = 2;
const int UP = 3;
const int DOWN = 4;
int direction = RIGHT;

char map[10][20] =
{
    "###################",
    "#                 #",
    "#                 #",
    "#                 #",
    "#                 #",
    "#                 #",
    "#                 #",
    "#                 #",
    "###################"
};

bool isValidPos(int x, int y)
{
    return (x >= 0 && x < MapDx && y >= 0 && y < MapDy);
}

bool movePlayer(Player &player, int x, int y)
{
    if (!isValidPos(x, y))
    {
        return false;
    }

    char ch = map[x][y];

    if(ch != SYMBOL_EMPTY)
    {
        return false;
    }

    if (isValidPos(player.x, player.y))
    {
        map[player.x][player.y] = SYMBOL_EMPTY;
    }
    player.x = x;
    player.y = y;
    map[player.x][player.y] = SYMBOL_PLAYER;
    return true;
}

bool moveGhost(Ghost &ghost, int x, int y)
{
    if (!isValidPos(x, y))
    {
        return false;
    }

    char ch = map[x][y];

    if (ch != SYMBOL_EMPTY)
    {
        return false;
    }

    if (isValidPos(ghost.x, ghost.y))
    {
        map[ghost.x][ghost.y] = SYMBOL_EMPTY;
    }
    ghost.x = x;
    ghost.y = y;
    map[ghost.x][ghost.y] = SYMBOL_GHOST;
    return true;
}

void GhostAI(Ghost &ghost, Player &player)
{
    double a = sqrt((pow((double) (ghost.x - 1) - player.x, 2)) + pow((double) ghost.y - player.y, 2)); //UP
    double b = sqrt((pow((double) (ghost.x + 1) - player.x, 2)) + pow((double) ghost.y - player.y, 2)); //DOWN
    double c = sqrt((pow((double) (ghost.y - 1) - player.x, 2)) + pow((double) ghost.x - player.y, 2)); //RIGHT
    double d = sqrt((pow((double) (ghost.y + 1) - player.x, 2)) + pow((double) ghost.x - player.y, 2)); //LEFT
    if(a < b && a <= c && a <= d && ghost.direction != DOWN) ghost.direction = UP;
    else if(b <= c && b <= d && ghost.direction != UP) ghost.direction = DOWN;
    else if(c < d && ghost.direction != LEFT) ghost.direction = RIGHT;
    else if(ghost.direction != RIGHT) ghost.direction = LEFT;
}

void showMap()
{
    for (int x = 0; x < MapDx; x++)
    {
        cout << map[x] << endl;
    }
}

void showPlayer(Player &player)
{
    cout << "\nPlayerX: " << player.x << endl;
    cout << "PlayerY: " << player.y << endl;
}

void gameLoop()
{
    Player player;
    Ghost ghosts[3];
    movePlayer(player, 1, 2);
    moveGhost(ghosts[0], 5, 2);
    moveGhost(ghosts[1], 5, 5);
    moveGhost(ghosts[2], 5, 8);
    while (true)
    {
        system("cls");
        showMap();
        showPlayer(player);
        if (GetAsyncKeyState(VK_UP))
        {
            direction = UP;
        }
        else if (GetAsyncKeyState(VK_DOWN))
        {
            direction = DOWN;
        }
        else if (GetAsyncKeyState(VK_LEFT))
        {
            direction = LEFT;
        }
        else if (GetAsyncKeyState(VK_RIGHT))
        {
            direction = RIGHT;
        }
        switch (direction)
        {
        case UP:
            movePlayer(player, player.x-1, player.y);
            break;
        case DOWN:
            movePlayer(player, player.x+1, player.y);
            break;
        case LEFT:
            movePlayer(player, player.x, player.y-1);
            break;
        case RIGHT:
            movePlayer(player, player.x, player.y+1);
            break;
        }
        for (int ghost = 0; ghost < 3; ghost++)
        {
            GhostAI(ghosts[ghost], player);
            switch (ghosts[ghost].direction)
            {
            case UP:
                moveGhost(ghosts[ghost], ghosts[ghost].x-1, ghosts[ghost].y);
                break;
            case DOWN:
                moveGhost(ghosts[ghost], ghosts[ghost].x+1, ghosts[ghost].y);
                break;
            case LEFT:
                moveGhost(ghosts[ghost], ghosts[ghost].x, ghosts[ghost].y-1);
                break;
            case RIGHT:
                moveGhost(ghosts[ghost], ghosts[ghost].x, ghosts[ghost].y+1);
                break;
            }
        }
        Sleep(GameSpeed);
    }
}

int main()
{
    gameLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T02:19:32.310

你需要

```
#include <cmath> 
```

它是声明这些函数的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:20:36.397

`sqrt`和`pow`函数在数学库中声明。确保像这样在全球范围内将它们包括在您的程序中。

```
#include <cmath> 
```

# unix - 用另一个值替换 unix 文件中的最后一列

> ID：13557814
> 
> 赞同：2
> 
> 时间：2012-11-26T02:19:25.343
> 
> 标签：unix, vim, replace, sed

我想使用 vim 编辑器或 sed 命令将最后一列的值替换为另一个值。我尝试了以下命令，但它有时会替换我第二列中已经存在的数据。

```
:%s/,3/,2/ 
```

我的样本数据：

```
410339,166,1430,3
410340,112,1840,3
410341,109,1315,3
410342,123,1435,3
410343,230,3200,3
410344,857,36975,3
410345,125,4440,3
410346,105,1460,3
410348,122,1150,3
410349,314,2380,3
410350,132,4650,3
410351,136,7465,3
410352,103,1775,3
410353,101,1095,3
410354,101,1360,3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:24:24.737

您需要表明您想要换行符：

```
:%s/,3$/2/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T02:24:19.947

要完成您在 Vim 中的尝试，只需将匹配的表达式用 . 锚定到行尾`$`。

```
:%s/,3$/,2/ 
```

产生：

```
410339,166,1430,2
410340,112,1840,2
410341,109,1315,2
410342,123,1435,2
410343,230,3200,2
410344,857,36975,2
410345,125,4440,2
410346,105,1460,2
410348,122,1150,2
410349,314,2380,2
410350,132,4650,2
410351,136,7465,2
410352,103,1775,2
410353,101,1095,2
410354,101,1360,2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T14:03:07.720

我会使用`awk`：

```
awk '{$NF=2}1' FS=, OFS=, 
```

这无条件地使最后一列的值为 2。如果所需的替换是字符串，则需要使用引号或更灵活的：

```
awk '{$NF=r}1' FS=, OFS=, r="the string to put in the last column" 
```

您可以将替换限制为具有值 3 的那些列：

```
awk '$NF==3{$NF=r}1' FS=, OFS=, r="the string to put in the last column" 
```

而且，要在 vim 中执行此操作，只需执行以下操作：

```
:%! awk ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T02:39:26.710

与`GNU sed`：

如果最后一列只是“3”：

```
sed -i 's/3$/2/' file 
```

如果最后一列可能类似于“13”：

```
sed -i 's/,3$/,2/' file 
```

旗帜`-i`：

```
-i[SUFFIX], --in-place[=SUFFIX]
    edit files in place (makes backup if extension supplied) 
```

# android - 单选按钮文本“回收”？

> ID：13557816
> 
> 赞同：1
> 
> 时间：2012-11-26T02:19:56.040
> 
> 标签：android, xml, radio-button, android-viewpager

我在 xml 中使用以下代码生成两个 RadioButtons，它们之间有一个分隔符：

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:paddingLeft="60dp"
            android:text="Male" />

        <View
            android:id="@+id/firstDivider"
            android:layout_width="2dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="40dp"
            android:background="#939393" />

          <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:paddingLeft="60dp"
            android:text="Female" />

    </LinearLayout> 
```

这工作正常，并且正在 ViewPager 中使用（在其中一个选项卡中）。

有趣的是，如果我在 ViewPager 中来回滚动足够多，其中一个按钮上的文本将变为女性。所以，最后，我得到了 2 个女单选按钮。

这看起来与视图回收有关，但由于它们是 2 个明显硬编码的按钮（而不是 ListView 项目，例如），我不确定它为什么会发生。

当然，我可以添加`button.setText(...)`java （*希望能修复它*），但我刚刚注意到这一点，我对此没有任何解释。

**编辑**：正如预期的那样，当我强制关闭并重新启动应用程序时，它会切换回正常状态-我必须重复该过程才能获得两个`Female`按钮。如果我切换到另一个活动/etc/etc，它仍然停留在两个“女性”按钮上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:12:46.853

两者的资源 id`RadioButtons`都是`android:id="@+id/radioButton1"`.

如果在布局文件中创建并且它们具有 id，Android 会自动保存 UI 元素（小部件）的“状态”。

第二个`RadioButton`具有文本“女性”的事实意味着它将覆盖第一个文本“男性”的保存，但由于相同的 id，两者在重新创建时都会收到相同的文本。

# c# - 使用未知对象类型？

> ID：13557818
> 
> 赞同：0
> 
> 时间：2012-11-26T02:20:06.167
> 
> 标签：c#, .net

我想得到一列的平均值。我可以让它像这样工作：

```
 IEnumerable results = defaultView.Select(args);
           Decimal amount = results.Cast<Fees>().Average(x => x.Fee); 
```

其中 results 是 System.Collections.Generic.List`1 对象的集合。但是结果并不总是相同的对象，因为可能会返回其他内容。

它总是在 x 个对象的结构中，每个对象有 5-10 个值。

我希望有一种通用的方法来迭代数据，例如 results[0][2]，但是如果不使用上面的强类型示例，我找不到访问这些数据的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:25:32.747

最好的办法是为不同类之间共享的属性创建接口：

```
public interface IHasFee
{
  decimal Fee {get;}
} 
```

然后，您可以将此接口应用于所有具有 Fee 属性的类：

```
public class Fees : IHasFee
{
  public decimal Fee {get;set;}
}

public class Charge : IHasFee
{
  public decimal Fee {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:23:20.930

如果您需要遍历`Fees`可能包含不同类型对象的集合中的某种类型的对象（例如 ），请尝试使用：[Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)。

```
IEnumerable results = defaultView.Select(args);
Decimal amount = results.OfType<Fees>().Average(x => x.Fee); 
```

来自 MSDN：

> **Enumerable.OfType 方法**
> 
> 根据指定类型过滤 IEnumerable 的元素。
> 
> OfType(IEnumerable) 方法仅返回源中可以转换为类型 TResult 的那些元素。如果元素无法转换为 TResult 类型，则要改为接收异常，请使用 Cast(IEnumerable)。

# perl - 包中的类型“-”无效？

> ID：13557820
> 
> 赞同：0
> 
> 时间：2012-11-26T02:20:34.900
> 
> 标签：perl, user-interface, arguments, tk

**注意：**顺便说一句，我正在 Perl 5 上使用 Perl/Tk 编写一个 GUI。

我试图执行我的代码，但发现此错误消息：

```
COUNT 0
Invalid type '-' in pack at pack2.pl line 62. 
```

这是我的应用程序中的第 62 行：

```
my $be = $f1->BrowseEntry(-label => "Widget $count:",
        -choices => ["right", "left", "top", "bottom"],
        -variable => \$packdirs[$count], -browsecmd => \&repack)
        -pack(-ipady => 5, -side => 'left'); 
```

我在我的代码中没有看到任何问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T02:47:50.443

```
 -pack(-ipady => 5, -side => 'left'); 
```

我想这应该是`->pack`，不是`-pack`。您不是调用该`->pack()`方法，而是调用内置函数并从的返回值中`pack`减去结果。`->BrowseEntry`这就是你收到错误的原因。

# javascript - Javascript结果到div

> ID：13557829
> 
> 赞同：0
> 
> 时间：2012-11-26T02:22:04.597
> 
> 标签：javascript, jquery

Q1：我的观点是创建与数组行一样多的按钮。像这样，只出现一个按钮。

```
<script type="text/javascript">
var myArray = [];

$('#button').click(function(){

var value1 = $('#value1').val();
var value2 = $('#value1').val();
var value3 = $('#value1').val();
var newArray = []; 
var newArray[0] = value1;
var newArray[1] = value2;
var newArray[2] = value3;
myArray.push(newArray);

$("#save").append(
    $("<button>").click(function() {
        myFunction.apply(null, myArray);
    }).text("Click me!")
   );
   });

});

function myFunction(value1,value2,value3)
{
var jsonData = $.ajax({
url: "file.php?value1=" + value1 + "&value2=" + value2 + "&value3=" + value3
dataType: "json",
async: false
}).responseText;
(...)
}
//edited: problem maybe found. I said buttons dont do anything because of this.
OUTPUT: file.php?value1=paul,23,USA&value2=undefined&value3=undefined
//it seems that value1 gets all values :s
</script>

<div id ="save"></div> 
```

我正在寻找一个返回类似这样的解决方案：

例如：

```
<!--<button onclick="myFunction(name,age,country)">Click me</button>-->
<button onclick="myFunction(paul,23,USA)">Click me</button>
<button onclick="myFunction(john,23,USA)">Click me</button> 
```

用更多细节编辑了我的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:55:06.230

`.html`替换，并且您的报价不匹配。但没关系 - jQuery 在操作 DOM 方面比在操作字符串方面做得更好。尝试：

```
$("#save").append(
    $.map(myArray, function(item) {
        return $("<button>").click(function() {
                   myFunction.apply(null, item);
               }).text("Click me");
    })
); 
```

[这是一个演示。](http://jsfiddle.net/minitech/uddsr/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:31:20.173

你是不是这个意思：

```
 <div  id="save">
    </div>      
    <script type="text/javascript">
        function addButtons(){
            for(i=0;i<myArray.length;i++)
            {
                var button = $('<button id="btn_'+i+'" onclick="myFunction(this);">Click me</button>')
                $(button).data('details',myArray[i]).appendTo("#save");
            }
        }
        function myFunction(element){
            alert($(element).data('details'));
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T02:32:43.130

您只看到一个按钮，因为该`.html()`方法*替换*了元素的 html。它不附加。

幸运的是，jQuery 有一个你想要的行为的方法，恰当地称为`append`. 将其更改为如下所示：

```
for(i=0;i<myArray.length;i++)
{
  var button = $("<button>Click me</button>");
  $("#save").append(button) ;
} 
```

我故意将 onclick 行为排除在该片段之外。您可以像以前一样在您创建的按钮的 html 中编写它，或者您可以使用 jQuery 来编写它 - 第二种方法更可取，看起来像这样：

```
for(i=0;i<myArray.length;i++)
{
  var button = $("<button>Click me</button>")
               .click(function(){
                    // call the actual function you want called here
               });
  $("#save").append(button);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T02:29:28.590

这是因为您要替换`$("#save")`循环中的 html。尝试
`$("#save").append("<button onclick="myFunction('"+myArray[i]+"')">Click me</button>") ;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T03:10:15.673

为什么要为所有的 JQuery 和复杂的代码而烦恼，只需使用简单的方法来实现它

```
<script type="text/javascript" >
    var myArray = ["New York", "Boston", "San Jose", "Los Angeles"];

    var strHTML = "";
    for(i=0;i<myArray.length;i++)
    {
        strHTML += "<button onclick='myFunction("+i+")'>Click me</button>";
    }       

    $("#save").innerHTML = strHTML;

    function myFunction(index)
    {
        alert(index);
        // do your logic here with index
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T02:30:13.507

```
for(i=0;i<myArray.length;i++){
    //Create a new DOM button element ( as jQuery object )
    // Set the current button index, and add the click action
    var button = $('<button />').data('myindex', i).click(function(){
        var myArrayItem = myArray[$(this).data('myindex')];
        alert(myArrayItem);
    }).html('My label n. '+i);
    $('#save').append(button)
} 
```

# objective-c - iOS - 从作为参数传递的块中获取变量

> ID：13557831
> 
> 赞同：1
> 
> 时间：2012-11-26T02:22:14.217
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, objective-c-blocks

我已经为此苦苦挣扎了一段时间，但似乎找不到我想要的东西。基本上我在 A 类中有以下方法声明。

```
- (void)doSomethingCoolWithThisBlock:(void (^)(void))block 
```

在 B 类中，当我在块部分调用此方法时，如下所示：

```
UILabel *myLabel = [[UILabel alloc] init];
UITextField *myField = [[UITextField alloc] init]; 
```

等等

我的问题是，在我的实现中，我`doSomethingCoolWithThisBlock`如何剖析块内的内容并例如说 UILabel ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:28:06.020

简短的回答是你不能；如果你想将 an 传递`UILabel`给方法，它应该接受一个类型的参数`UILabel *`（以及你想作为单独参数传递的任何其他东西，或者某种容器类型的一个参数 - 可能是你自己的自定义协议 - 包含所有事物）。

但是如果你只想从块中传递一个东西，你当然可以让块*返回*一些东西（例如，将类型更改为`(UILabel *)(^)(void)`然后在块的末尾 do `return myLabel;`）。一个更复杂的方法是让块作为参数指针指向指针（例如，`UILabel **`），然后从块内分配给那些，但看起来这没有多大意义。

# php - 多个 Strpos 检查

> ID：13557837
> 
> 赞同：2
> 
> 时间：2012-11-26T02:23:29.757
> 
> 标签：php

无论如何都会将以下查询合并到一个函数中吗？就目前而言，只有第二个 Strpos 函数有效。如果我删除第二个，那么第一个将起作用。我需要同时运行两者，因为我必须检查 2 个单独的字符串。

```
$check1 = QueryWhoisServer($whoisserver, $domain);
if(strpos($check1,"No match for") !== FALSE){

return "Result Example";
}
$check2 = QueryWhoisServer($whoisserver, $domain);
if(strpos($check2,"No Data Found") !== FALSE){

return "Result 2 example";
}
else { 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:32:47.153

首先，您应该保留 whois 查询的输出。

```
$response = QueryWhoisServer($whoisserver, $domain); 
```

然后，您可以运行多个搜索：

```
if (false !== strpos($response, 'No match for')) {
  // ...
} elseif (false !== strpos($response, 'No Data Found')) {
  // ...
} else {
  // ...
} 
```

# php - 将mysql日期值转换为html5日期

> ID：13557838
> 
> 赞同：0
> 
> 时间：2012-11-26T02:23:39.917
> 
> 标签：php, jquery, html, date

下面是我如何使用普通 php 日期回显日期：

```
<input type="date" name="ref_date" value="<?php echo date('d-m-Y',strtotime($stock['ref_date']))?>"> 
```

并且值（日期）是：`23-11-2012`

但是当我尝试使用以下方法实现 HTML5 日期时：

```
<script type="text/javascript" src="js/jquery.tools.js"></script>
<script>
var $date = jQuery.noConflict();
$date(":date").dateinput({format: 'dd-mm-yyyy'});
</script> 
```

为什么值不同：`04-05-1929`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:35:18.490

只需更改日期格式

```
<?php echo date('d-m-Y',strtotime($stock['ref_date']))?> 
```

至

```
<?php echo date('Y-m-d',strtotime($stock['ref_date']))?> 
```

# confluence - Confluence 编辑器中“代码块”宏的快捷方式

> ID：13557851
> 
> 赞同：28
> 
> 时间：2012-11-26T02:26:19.610
> 
> 标签：confluence

我们使用 confluence for documentaion，但我发现选择代码宏非常耗时；这是一个 5 个步骤的过程。即使手动键入宏也效率不高。

在 Stack Overflow 编辑器中，我们所要做的就是选择文本并按下按钮或点击`ctrl``K`，文本被格式化为代码。

有没有办法在 Confluence 中做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-26T08:57:45.083

> 即使是手动打字也效率不高

我广泛使用[代码宏](https://confluence.atlassian.com/display/DOC/Code+Block+Macro)，并且总是通过键入 **{并从列表中选择“代码宏”来使用**[自动完成功能（为代码宏键入](https://confluence.atlassian.com/display/DOC/Using+Autocomplete)**co**就足够了）。这是一个非常有效率的。

 ****当然，键盘快捷键会更快，但代码宏没有快捷键。（AFAIK 根本没有特定宏的键盘快捷键）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-03T02:44:55.807

我使用`Ctrl`- `Shift`-`D`然后将文本包装在`{code}`.

这也解决了从粘贴文本中删除格式的问题。在 Confluence 5.x 中，如果你编辑一个页面，你可以输入`{cod<enter}`，它会在页面上放置一个代码块框，但是当代码粘贴到这个框时，它可以去掉行尾字符。

1.  `Ctrl`使用- `Shift`-打开插入标记窗口`D`
2.  将您的代码粘贴为纯文本
    这样格式就不会被删除。
3.  添加`{code}`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-12T05:58:59.500

您也可以像在原版 Markdown 中一样键入三个反引号 ``` 来创建代码块。这会很快创建一个空代码块。以这种方式粘贴代码时，我从来没有遇到过格式化问题。

这种方法的一个恼人的特点是你不能像在 Markdown 中那样指定语言，你必须从列表中选择语言。****

# regex - 定位非 alpha 或空格的有效方法

> ID：13557852
> 
> 赞同：2
> 
> 时间：2012-11-26T02:26:30.503
> 
> 标签：regex, r

我想测试一个字符串向量并确定每个字符串是否包含数字或符号元素（即我想知道一个字符串是否不仅仅是字母字符和空格）。我已经在这里解决了，但想知道是否有更有效的方法（在 R 正则表达式中）。

```
x <- c("ff d fdf4f", "fve dvgf", "vfev!", "rcvce rc&")
nchar(gsub("[a-zA-Z]|\\s+", "", x)) > 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:35:10.700

`grepl`以及寻找不符合您想要的角色似乎有效

```
grepl("[^a-zA-Z[:space:]]", x) 
```

这给出了与原始代码相同的输出

```
> x <- c("ff d fdf4f", "fve dvgf", "vfev!", "rcvce rc&")
> nchar(gsub("[a-zA-Z]|\\s+", "", x)) > 0
[1]  TRUE FALSE  TRUE  TRUE
> grepl("[^a-zA-Z[:space:]]", x)
[1]  TRUE FALSE  TRUE  TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:35:04.393

改用[`grep`](http://www.regular-expressions.info/rlanguage.html)：

```
grep("[^a-zA-Z\\s]+", x, value=FALSE) 
```

# c++ - 如何在 C++ 程序中启动可执行文件并获取其进程 ID（在 linux 中）？

> ID：13557853
> 
> 赞同：8
> 
> 时间：2012-11-26T02:26:30.477
> 
> 标签：c++, linux

我尝试了system（），但是当辅助程序运行时，我的主程序（执行辅助程序的主程序）以某种方式挂起

第二个问题是如何在主程序中获取辅助程序的进程 ID？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T02:52:28.147

在你想要的父进程中[`fork`](http://linux.die.net/man/2/fork)。

Fork 创建了一个全新的进程并将子进程返回`pid`给调用进程和`0`新的子进程。

在子进程中，您可以使用类似的东西[`execl`](http://linux.about.com/library/cmd/blcmdl3_execl.htm)来执行您想要的辅助程序。在父进程中，您可以使用[`waitpid`](http://linux.die.net/man/2/waitpid)等待子进程完成。

这是一个简单的说明性示例：

```
#include <iostream>
#include <sys/wait.h>
#include <unistd.h>
#include <cstdio>
#include <cstdlib>

int main()
{
    std::string cmd = "/bin/ls"; // secondary program you want to run

    pid_t pid = fork(); // create child process
    int status;

    switch (pid)
    {
    case -1: // error
        perror("fork");
        exit(1);

    case 0: // child process
        execl(cmd.c_str(), 0, 0); // run the command
        perror("execl"); // execl doesn't return unless there is a problem
        exit(1);

    default: // parent process, pid now contains the child pid
        while (-1 == waitpid(pid, &status, 0)); // wait for child to complete
        if (!WIFEXITED(status) || WEXITSTATUS(status) != 0)
        {
            // handle error
            std::cerr << "process " << cmd << " (pid=" << pid << ") failed" << std::endl;
        }
        break;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T02:28:46.393

使用 fork 创建一个新进程，然后 exec 在新进程中运行一个程序。有很多这样的例子。

# c++ - DLL 中的全局构造函数和 MSVCRT

> ID：13557855
> 
> 赞同：3
> 
> 时间：2012-11-26T02:26:57.093
> 
> 标签：c++, dll, constructor, msvcrt

DLL 中的以下代码会发生什么情况？

```
#include <vector>
std::vector<int> global_vector;

BOOL WINAPI DllMain(HANDLE hModule, DWORD fdwReason, LPVOID lpReserved)
{
    if (fdwReason == DLL_PROCESS_ATTACH)
    {
        global_vector.push_back(1);
    }

    return TRUE;
} 
```

...如果用 /MD 编译？向量的构造函数和 push_back 调用的代码（即内存管理、异常处理......）位于 MSVCRT.DLL 中......据我所知，在这个阶段不能保证被映射。是否得到特殊处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:30:10.310

从[这里](http://blogs.msdn.com/b/oleglv/archive/2003/10/24/56141.aspx)：

> 简而言之，当`DllMain`被调用时，OS loader 处于相当脆弱的状态。首先，它在其结构上应用了锁，以防止在该调用内部发生内部损坏，其次，您的某些依赖项可能未处于完全加载状态。*在加载二进制文件之前，OS Loader 会查看其静态依赖项。如果这些需要额外的依赖项，它也会查看它们。*作为该分析的结果，它提出了一个序列，其中`DllMain`需要调用这些二进制文件中的 s 个。它非常聪明，在大多数情况下，您甚至可以不遵守 MSDN 中描述的大多数规则而侥幸逃脱 - 但并非总是如此。

# c - 应用程序的 C Linux 带宽限制

> ID：13557858
> 
> 赞同：3
> 
> 时间：2012-11-26T02:27:14.773
> 
> 标签：c, linux, throttling

有哪些方法可以尝试在循环内限制`send`/函数。`sendto()`我正在为我的网络创建一个端口扫描仪，我尝试了两种方法，但它们似乎只在本地工作（当我在我的家用机器上测试它们时它们工作，但是当我尝试在另一台机器上测试它们时它不想创建适当的油门）。

## 方法一

我最初是`/proc/net/dev`在“发送的字节数”属性中解析和读取的，并以此为基础。这在本地有效（睡眠延迟正在调整以调整带宽流），但是当我在另一台服务器上尝试它时，`/proc/net/dev`它似乎也没有正确调整数据。我`dstat`在一台本地扫描的机器上运行，它正在快速输出大量数据。

## 方法二

然后，我尝试跟踪我发送的总字节数，并将其添加到`total_sent`我的带宽线程将读取并计算睡眠计时器的变量中。这也适用于我的本地机器，但是当我在服务器上尝试它时，它说每次我的带宽线程检查`total_sent`使我的带宽线程将睡眠减少到 0 时它只发送 1-2 个数据包，但即使在 0 时`total_sent`变量确实由于睡眠时间减少而不会增加，而是保持不变。

总的来说，我想要一种方法来监视 Linux 计算机的带宽并计算我可以在每个/套接字调用`usleep()`之前或之后传递的睡眠时间，以限制带宽。`send``sendto()`

**编辑：**我忘了提到的其他一些事情是我确实有一个速度测试功能来计算机器的上传速度，并且我有 2 个线程。1个线程根据带宽使用情况调整全局睡眠计时器，线程2将数据包发送到远程机器上的端口以测试它们是否打开并对其进行指纹识别（现在我只是使用带有a的udp数据包`sendto()`来测试这一切） .

如何使用. `send`_`sendto()``usleep()`

**编辑：**这是我的带宽监控线程的代码。不要担心结构的东西，这只是我将数据传递给线程的方式。

```
void *bandwidthmonitor_cmd(void *param)
{
  int i = 0;
  double prevbytes = 0, elapsedbytes = 0, byteusage = 0, maxthrottle = 0;

  //recreating my param struct i passed to the thread
  command_struct bandwidth = *((command_struct *)param);
  free(param);

  //set SLEEP (global variable) to a base time in case it was edited and not reset
  SLEEP = 5000;

  //find the maximum throttle speed in kb/s (takes the global var UPLOAD_SPEED
  //which is in kb/s and times it by how much bandwidth % you want to use
  //and devides by 100 to find the maximum in kb/s
  //ex: UPLOAD_SPEED = 60, throttle = 90, maxthrottle = 54
  maxthrottle = (UPLOAD_SPEED * bandwidth.throttle) / 100;
  printf("max throttle: %.1f\n", maxthrottle);

  while(1)
  {
      //find out how many bytes elapsed since last polling of the thread
      elapsedbytes = TOTAL_BYTES_SEND - prevbytes;
      printf("elapsedbytes: %.1f\n", elapsedbytes);

      //set prevbytes to our current bytes so we can have results next loop
      prevbytes = TOTAL_BYTES_SEND;

      //convert our bytes to kb/s
      byteusage = 8 * (elapsedbytes / 1024);

      //throttle control to make it adjust sleep 20 times every 30~ 
      //iterations of the loop
      if(i & 0x40)
      {
           //adjust SLEEP by 1.1 gain
           SLEEP += (maxthrottle - byteusage) * -1.1;//;

           if(SLEEP < 0){
               SLEEP = 0;
           }
           printf("sleep:%.1f\n\n", SLEEP);
      }

      //sleep the thread for a short bit then start the process over
      usleep(25000);
      //increment variable i for our iteration throttling
      i++;
  }

} 
```

我的发送线程只是一个循环发送 udp 数据包进行测试的简单`sendto()`例程。is my ,是一个 64 字节的字符数组，用“A”填充，并且is 。`while(1)``sock``sockfd``buff``sin``my sockaddr_in`

```
 while(1)
  {
    TOTAL_BYTES_SEND += 64;

    sendto(sock, buff, strlen(buff), 0, (struct sockaddr *) &sin, sizeof(sin))

    usleep(SLEEP);
  } 
```

我知道我的套接字功能可以工作，因为我可以在`dstat`本地机器和远程机器上看到使用情况。此带宽代码适用于我的本地系统（所有变量都应更改）但在服务器上我尝试对经过的字节进行测试并没有更改（每次线程迭代始终为 64/128）并导致`SLEEP`限制为 0理论上应该使机器更快地发送数据包，但即使`SLEEP`等于 0 elapsedbytes 仍然是 64/128。我还在`sendto()`if 语句中对函数进行了编码，检查返回 -1 的函数并通过`printf`-ing 错误代码来提醒我，但在我所做的测试中没有一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:38:40.630

似乎这可以通过计算发送线程中的节流睡眠时间来最直接地解决。我不确定我是否看到另一个线程来完成这项工作的好处。

这是执行此操作的一种方法：

选择一个时间窗口，您将在其中测量您的发送速率。根据您的目标带宽，这将为您提供该时间段的最大字节数。然后，您可以检查是否在每次 sendto() 之后发送了那么多字节。如果您确实超过了字节阈值，则睡眠直到窗口结束以执行限制。

这是一些未经测试的代码，展示了这个想法。抱歉，clock_gettime 和 struct timespec 增加了一些复杂性。谷歌有一些很好的代码片段，用于使用 struct timespec 进行更完整的比较、加法和减法。

```
#define MAX_BYTES_PER_SECOND (128L * 1024L)
#define TIME_WINDOW_MS 50L
#define MAX_BYTES_PER_WINDOW ((MAX_BYTES_PER_SECOND * TIME_WINDOW_MS) / 1000L)

#include <time.h>
#include <stdlib.h>

int foo(void) {
  struct timespec window_start_time;

  size_t bytes_sent_in_window = 0;
  clock_gettime(CLOCK_REALTIME, &window_start_time);

  while (1) {
    size_t bytes_sent = sendto(sock, buff, strlen(buff), 0, (struct sockaddr *) &sin, sizeof(sin));
    if (bytes_sent < 0) {
      // error handling
    } else {
      bytes_sent_in_window += bytes_sent;

      if (bytes_sent_in_window >= MAX_BYTES_PER_WINDOW) {
        struct timespec now;
        struct timespec thresh;

        // Calculate the end of the window
        thresh.tv_sec = window_start_time.tv_sec;
        thresh.tv_nsec = window_start_time.tv_nsec;
        thresh.tv_nsec += TIME_WINDOW_MS * 1000000;
        if (thresh.tv_nsec > 1000000000L) {
          thresh.tv_sec += 1;
          thresh.tv_nsec -= 1000000000L;
        }

        // get the current time
        clock_gettime(CLOCK_REALTIME, &now);

        // if we have not gotten to the end of the window yet
        if (now.tv_sec < thresh.tv_sec ||
            (now.tv_sec == thresh.tv_sec && now.tv_nsec < thresh.tv_nsec)) {

          struct timespec remaining;

          // calculate the time remaining in the window
          //  - See google for more complete timespec subtract algorithm
          remaining.tv_sec = thresh.tv_sec - now.tv_sec;
          if (thresh.tv_nsec >= now.tv_nsec) {
            remaining.tv_nsec = thresh.tv_nsec - now.tv_nsec;
          } else {
            remaining.tv_nsec = 1000000000L + thresh.tv_nsec - now.tv_nsec;
            remaining.tv_sec -= 1;
          }

          // Sleep to end of window
          nanosleep(&remaining, NULL);
        }

        // Reset counters and timestamp for next window
        bytes_sent_in_window = 0;
        clock_gettime(CLOCK_REALTIME, &window_start_time);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:52:01.750

如果您想在应用程序级别执行此操作，您可以使用诸如[涓流](http://www.tuxradar.com/content/control-your-bandwidth-trickle)之类的实用程序来限制或调整应用程序可用的套接字传输速率。

例如，

```
trickle -s -d 50 -w 100 firefox 
```

将从`firefox`50KB/s 的最大下载速率和 100KB 的峰值检测窗口开始。更改这些值可能会产生适合您的应用程序测试的东西。

# nginx - 如何使用 ZeroMQ 和 PHP-FPM 进行连接池

> ID：13557860
> 
> 赞同：1
> 
> 时间：2012-11-26T02:27:24.850
> 
> 标签：nginx, connection-pooling, zeromq, php

对不起，也许是蹩脚的问题，我是 C++ 人。

您能否向我解释一下如何有效地支持大量 ZeroMQ php 客户端？

我在 RedHat 服务器上使用 nginx 和 php-fpm。

考虑一下我有以下代码，`client.php`这些代码服务于成千上万的网络客户端

```
$client = new ZMQSocket($context,ZMQ::SOCKET_REQ);
$client->connect("tcp://localhost:5555");
$client->send($sequence); 
```

这是否意味着给定的代码将在每个 http 请求上重新连接到 zeromq 服务器？在我看来，它的效率非常低。ZeroMQ 和 PHP-FPM 是否存在连接池？

我应该怎么做？

PS。阅读文档[ZMQContext::getSocket](http://php.zero.mq/zmqcontext.getsocket.html)看起来像是池的候选者，但我不确定。

# java - 突然我的 spring.xml 不会实例化我的类并且发生错误异常

> ID：13557861
> 
> 赞同：0
> 
> 时间：2012-11-26T02:27:34.633
> 
> 标签：java, spring, struts2, netbeans-7

我遇到了一个我无法理解的奇怪错误......当我运行我的 web 项目时......我的 jsp 显示出来了。但是点击提交底部后，它挂起然后错误结果。我无法理解我做错了什么......这就像 3 小时试图检查我的问题。但现在我需要一些帮助.. 谢谢大家。

```
Unable to instantiate Action, lotmovement.action.RegisterAction,  defined for 'register' in namespace '/'Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'registeraction' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [lotmovement.action.RegisterAction]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [spring.xml]; nested exception is java.lang.StackOverflowError
    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:115)
    org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:61)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:877)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:839)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:440)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    java.security.AccessController.doPrivileged(Native Method)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    lotmovement.action.RegisterAction.<init>(RegisterAction.java:27)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    java.lang.Class.newInstance0(Class.java:372)
    java.lang.Class.newInstance(Class.java:325)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:131)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:162)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:151)
    com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:121)
    com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:300)
    com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:400)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:194)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432) 
```

在tomcat服务器上，这不断重复..

```
Nov 26, 2012 3:10:51 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2d43b35f: defining beans [userprofile,registeraction,insertuserprofile,entitystart,recordexistuserprofile]; root of factory hierarchy
Nov 26, 2012 3:10:51 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@50016db: defining beans [userprofile,registeraction,insertuserprofile,entitystart,recordexistuserprofile]; root of factory hierarchy
Nov 26, 2012 3:10:51 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7ef1277f: defining beans [userprofile,registeraction,insertuserprofile,entitystart,recordexistuserprofile]; root of factory hierarchy
Nov 26, 2012 3:10:51 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3d510eb6: defining beans [userprofile,registeraction,insertuserprofile,entitystart,recordexistuserprofile]; root of factory hierarchy
Nov 26, 2012 3:10:51 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@66893099: defining beans [userprofile,registeraction,insertuserprofile,entitystart,recordexistuserprofile]; root of factory hierarchy
Nov 26, 2012 3:17:59 PM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context [/LotMovement_5spingtest] 
```

这是我的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean id="userprofile"  class="lotmovement.business.entity.UserProfile">

    </bean>

    <bean id="registeraction"  class="lotmovement.action.RegisterAction">

    </bean>  

    <bean id="insertuserprofile"  
          class="lotmovement.business.crud.InsertUserProfile">

    </bean>

    <bean id="entitystart"  
          class="lotmovement.business.crud.EntityStart">

    </bean>

    <bean id="recordexistuserprofile"  
           class="lotmovement.business.crud.RecordExistUserProfile">

    </bean>

</beans> 
```

这是我的一些代码..

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lotmovement.action;

import com.opensymphony.xwork2.ActionSupport;
import lotmovement.business.crud.EntityStart;
import lotmovement.business.crud.InsertUserProfile;
import lotmovement.business.crud.RecordExistUserProfile;
import lotmovement.business.entity.UserProfile;
import org.apache.commons.lang3.StringUtils;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

/**
 *
 * @author god-gavedmework
 */
public class RegisterAction extends ActionSupport {

    private static String userId;
    private static String password;
    private static String firstName;
    private static String lastName;
    private static int securityLevel;
    ApplicationContext context =
            new ClassPathXmlApplicationContext("spring.xml");
    EntityStart es = (EntityStart) context.getBean("entitystart");

    @Override
    public void validate() {
        es.StartDbaseConnection();
        RecordExistUserProfile reup =
                (RecordExistUserProfile) context.getBean("recordexistuserprofile");
        if (reup.checkrecordexist()) {
            addActionError("record already exist.");
        }
    }

    @Override
    public String execute() {

        InsertUserProfile iup =
                (InsertUserProfile) context.getBean("insertuserprofile");

        iup.Insert();

        return SUCCESS;
    } 
```

这是我的 WEB.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>register.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T02:49:43.660

您正在 RegisterAction 中使用此行创建无限循环

```
ApplicationContext context =
        new ClassPathXmlApplicationContext("spring.xml"); 
```

循环是你调用 Spring Container，它创建一个 RegisterAction，它（如上所示）创建一个 Spring Container，它创建一个 RegisterAction....

您不应该直接在 Spring Bean 中引用 ApplicationContext。您应该使用配置（setter 或构造函数注入）来设置 bean 的依赖关系。你需要这样做

春天.xml

```
<bean id="insertUserProfile" class="lotmovement.business.crud.InsertUserProfile"/>

<bean id="registeraction"  class="lotmovement.action.RegisterAction">
  <property name="insertUserProfile" ref="insertUserProfile"/>
</bean> 
```

然后将方法 setInsertUserProfile 添加到 RegisterAction。Spring 将从您的上下文中使用指定的 bean 调用 setter（在这种情况下，是一个新的 insertUserProfile）。您需要对从上下文中引用的所有 bean 执行此操作。

您可能想对 Spring 构造函数注入进行一些研究，因为它是注入永远不需要更改的依赖项的“更好”方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:15:02.920

杰夫的回答很到位。这是对什么是错的和你不应该做什么的一个很好的解释。

您缺少的部分是在 web.xml 中注册应用程序上下文：

[使用 web.xml 在 Spring 中加载上下文](https://stackoverflow.com/questions/6451377/loading-context-in-spring-using-web-xml)

这是一个更正，加上杰夫的建议，应该让你上路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:13:53.170

为什么在使用 Struts 2 时要自己处理 Spring 容器？您需要 Struts 2 Spring 插件。

[http://struts.apache.org/2.3.4.1/docs/spring-plugin.html](http://struts.apache.org/2.3.4.1/docs/spring-plugin.html)

虽然其他答案很好并且完美地描述了此代码的问题，但我不确定它们是否是最佳答案。. . Struts 2 提供了 Spring 集成，该集成完全设计为允许您将依赖项无缝地注入到您自己的对象和核心框架对象中，例如操作。

使用 Spring 插件，您可以使用 XML 或注释简单地配置您的 spring bean，仅此而已。Spring 容器集成到框架的核心对象工厂中，这意味着您不必处理它；正是这个问题的代码中对容器的处理为 toksis 带来了问题。

# xml - 解析 XML 并输出到 Excel

> ID：13557864
> 
> 赞同：2
> 
> 时间：2012-11-26T02:27:58.917
> 
> 标签：xml, excel, powershell

我正在制作一个脚本，它将解析 2,000 个 XML 文件以获取数据，然后将其输出到 Excel 文件。这是我到目前为止所拥有的：

```
#Get XML File
$path = Get-ChildItem C:\Users\bcamareno\Desktop\xml\xml

#Start Excel
$xl=New-Object -ComObject "Excel.Application"
$wb=$xl.Workbooks.Add()
$ws=$wb.ActiveSheet

$cells=$ws.Cells
$cells.item(1,1)="HDD Report"
$cells.item(1,1).font.bold=$True
$cells.item(1,1).font.size=18

#Rows & Cols
$row=3
$col=1
$A=4
$B=4
$C=4
$D=1
$E=2
$F=3

#column headings
"Server","Disk0","Disk1","Disk2","Disk3","Disk4","Disk5","Disk6","Disk7" | foreach {
    $cells.item($row,$col)=$_
    $cells.item($row,$col).font.bold=$True
    $col++
}

#Site Code
foreach ($item in $Path) {
$cells.item($A,$D)= $item -replace "_pdisk.xml",""
      $A++
}

#Grab ProductID
foreach ($item in $Path) {
    [xml]$content = Get-Content "c:\Users\bcamareno\Desktop\xml\xml\$item"
    $try= $Content.SelectNodes('//ProductID') | select "#Text"
    $cells.item($B,$E)= $try -replace "@{#text=","" -replace "}",""
    $B,$E++
}

$xl.Visible=$True 
```

但是当我运行它时，数据出现错误，似乎它只是解析最后一个文件然后将结果添加到单元格中。

如果需要，我可以添加 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:44:36.560

`$B`永远不会增加，因此您永远不会在电子表格中添加行 - 只是将同一行覆盖 2000 次。

我还建议您使用比单个字母更具描述性的变量名称。

另外，更改此行：

```
[xml]$content = Get-Content "c:\Users\bcamareno\Desktop\xml\xml\$item" 
```

对此：

```
[xml]$content = Get-Content $item.FullName 
```

这样，当您更改 XML 文件的位置时，您只需执行一次（当您调用 时`Get-ChildItem`）并且不会因为忘记更新该路径的所有实例而在 2 小时内追逐“错误”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T14:35:27.270

我相信我读这篇文章有点晚了，但我确实做了一些测试，它对我有用。

```
#Grab ProductID
foreach ($item in $path) {
    [xml]$content = Get-Content "c:\Users\bcamareno\Desktop\xml\xml\$item"
    foreach ($try in  $($Content.SelectNodes('//ProductID') | select "#Text")) {
    $cells.item($B,$E)= $try -replace "@{Size=","" -replace "}",""
    $B,$E++
    }
    $B++ 
    $E=2
} 
```

感谢并为我的伪英语感到抱歉：P

# java - 使用 Google CustomSearch 进入 ClassNotFoundException

> ID：13557867
> 
> 赞同：0
> 
> 时间：2012-11-26T02:28:08.283
> 
> 标签：java, classnotfoundexception

我正在尝试使用[Google CustomSeach API java 客户端](https://developers.google.com/custom-search/v1/libraries)。但是在运行它时我遇到了一个异常

```
Caused by: java.lang.ClassNotFoundException: com.google.api.client.http.HttpTransport 
```

我读过有人说这是由于 Guava 库。然而，番石榴包含在这个项目中。以下是该项目中使用的引用库的打印屏幕：

![在此处输入图像描述](../Images/6b5d5a7636ff3ff55944cddb0cfd0aee.png)

这是代码片段：

```
 Customsearch cs = new Customsearch(new NetHttpTransport(), new JacksonFactory(), null);
        Customsearch.Cse.List list = cs.cse().list("rashidi zin");
        list.setKey(API_KEY);
        list.setCx(ID);

        Search results = list.execute(); 
```

我一直在尝试添加诸如 apache http-client 之类的库，但它仍然无法正常工作。我是否错误地使用了图书馆？

# database - 社交网络活动提要 + 群组

> ID：13557870
> 
> 赞同：4
> 
> 时间：2012-11-26T02:28:33.260
> 
> 标签：database, android-activity, social-networking, feed

我正在开发一个社交网络应用程序，并希望创建一个活动提要，以便人们可以及时了解他们的所有联系（经典的 facebook 流）。我有一个名为`activity`setup 的数据库表，如下所示：

```
activity_id (int)
user_id (int)       //who posted it
group_id (int)      //the group of connections that have permission to view
type (enum)         //the type of activity performed
time (datetime)     //the time the activity was performed 
```

然后我会做一个`select * from activity where user_id in (connections)`以获取最新消息。

这就是问题所在。用户的活动并不总是对完整的连接集具有可见性。用户可以创建用户 ID 组，以在他们的超级连接集中形成较小的集合。就像 facebook 允许您指定谁看到特定帖子而不是允许所有朋友看到它一样。

我有一个`groups`具有以下架构的单独表设置：

```
group_id (int)
connection_id (user_id, int)
user_id (group creator) 
```

我的活动表中有一个 group_id。group_id 是指向有权查看帖子的连接子集的链接。

我的问题是，执行这种类型的提要的最佳方法是什么，是否有一个最佳的单一选择语句可以让我获得所需的输出（我已获准查看的连接活动列表）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T02:32:51.780

如果您愿意通过 API 将活动流功能卸载到服务，Collabinate ( [http://www.collabinate.com](http://www.collabinate.com) ) 可能对您有用。

# hadoop - 带有 Kerberos 的 hdfs 无法从远程服务器访问

> ID：13557872
> 
> 赞同：3
> 
> 时间：2012-11-26T02:28:44.477
> 
> 标签：hadoop, kerberos, hdfs

我为 HDFS 配置了 kerberos 身份验证，我可以使用我自己的 keytab 文件来访问 HDFS 集群中任何机器上的 HDFS。但是当我使用相同的 keytab 访问 HDFS 集群外的远程服务器上的 HDFS 时，我无法访问。我收到以下错误消息，顺便说一下，我已经将服务器的配置文件 krb5.conf 复制到了 hadoop 集群外的远程机器上。

> java.io.IOException：本地异常失败：java.io.IOException：javax.security.sasl.SaslException：GSS启动失败[由GSSException引起：未提供有效凭据（机制级别：找不到任何Kerberos tgt）]；主机详情：本地主机为：“ubuntu/10.235.6.156”；目标主机是：“node0”：21200；在 org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:759) 在 org.apache.hadoop.ipc.Client.call(Client.java:1164) 在 org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker .invoke(ProtobufRpcEngine.java:202) at $Proxy9.getFileInfo(Unknown Source) at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.getFileInfo(ClientNamenodeProtocolTranslatorPB.java:628) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method ) 在 sun.reflect.NativeMethodAccessorImpl。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:31:17.813

终于找到原因了：kerberos使用AES-256加密时，应该安装JCE。我已经在 HDFS 集群内的机器上安装了 JCE，但是我没有意识到集群外的客户端机器也需要 JCE。这就是为什么我可以在 HDFS 集群内的机器上访问 HDFS，但不能在 HDFS 集群外的机器上访问的原因。

# sql - 帮助查找数据库候选键、主键

> ID：13557874
> 
> 赞同：2
> 
> 时间：2012-11-26T02:28:54.533
> 
> 标签：sql, database

我正在尝试研究这个模型并找出以下关于它的问题：

1.  PATIENT_VISIT 的候选键是什么？

2.  如果有多个候选键，则从候选键中选择一个主键。

3.  根据选择的主键，PATIENT_VISIT 中存在哪些正常格式违规？

4.  开发一个解决方案，消除范式违规。
    您的解决方案是无损连接分解吗？

5.  您的解决方案是否保留了依赖性？如果没有，如何实现依赖保存？这是 BCNF 中的修订解决方案吗？

6.  提供满足以下所有三个条件的解决方案：（1）在 BCNF 中，（2）保持依赖关系，（3）是无损连接分解

    ```
    +---------+------------+------------+
    | Patient |  Hospital  |   Doctor   |
    +---------+------------+------------+
    | Smith   | Methodist  | D. Cooley  |
    | Lee     | St. Luke's | Z. Zhang   |
    | Marks   | Methodist  | D. Cooley  |
    | Marks   | St. Luke's | W. Lowe    |
    | Lou     | Hermann R. | Duke       |
    +---------+------------+------------+ 
    ```

此外，假设存在以下语义规则。

*   每个患者可能是几家医院的患者。
*   对于每家医院，一名患者可能只有一名医生。
*   每家医院都有数名医生。
*   每位医生只使用一家医院。
*   每位医生在一家医院治疗数名患者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:13:10.203

1.  {Patient, Doctor} 是候选键。唯一可能的其他键是 {Patient, Hospital, Doctor}，但这并不是最小的，因为 FD Doctor ⟶ Hospital；它是超级键，但不是候选键。

2.  没有实际意义；只有一个候选键。

3.  由于传递依赖（FD）医生⟶医院，该模式不在 BCNF 中。（表的每个属性在功能上由键、整个键和键确定。）

4.  PD {患者，医生}，DH {医生，医院}。这是无损分解。

5.  这个解决方案是依赖保留。

6.  见 4。

# macos - 将文本从 NSTask 输出到 NSTextField OS X - XCode Objective -C

> ID：13557883
> 
> 赞同：0
> 
> 时间：2012-11-26T02:29:46.457
> 
> 标签：macos, text, nstextfield, nstask, output

我想知道如何从 NSTask 输出文本并将其发送到 OSX 上的 NSTextField。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:58:11.480

我用谷歌搜索了 NSTask 并得到了[这个](http://borkware.com/quickies/one?topic=nstask)......

但这里是做你想做的事情的代码。

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/bin/ls"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"-l", @"-a", @"-t", nil];
[task setArguments: arguments];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data
                           encoding: NSUTF8StringEncoding];

 [myTextField setStringValue: string]; 
```

# java - Java LinkedList 会分配多少空间？

> ID：13557884
> 
> 赞同：2
> 
> 时间：2012-11-26T02:29:46.407
> 
> 标签：java, linked-list

我正在阅读Java LinkedList的源代码，注意它的构造函数`LinkedList`是这样的：

```
public LinkedList() {
    header.next = header.previous = header;
} 
```

多少空间将分配给这个初始化，头似乎通过指向自身来创建无限递归。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:32:43.117

`header`它在实例变量的初始化中分配一个节点：

```
private transient Entry<E> header = new Entry<E>(null, null, null); 
```

您引用的构造函数中的代码不分配内存；它只是将指针设置为初始状态。没有“无限递归”，因为内部遍历迎合了这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:36:27.490

我不是 100% 确定您所说的“多少空间”是什么意思，但如果您的意思是在内存中分配多少空间 - 它最初只是一个字段。即使头指针指向自身，所有指针仍然只指向内存中的单个地址空间。请注意，我什至不确定它最初会指向任何地方，我认为它们最初只会被分配空值。

一个简单的例子。

```
String a = "Hello"
String b = a;
String c = b; 
```

字符串“Hello”只会在内存中出现一次，即使它有多个指向它的指针。

# c++ - Qt QAction 动态数组连接

> ID：13557886
> 
> 赞同：4
> 
> 时间：2012-11-26T02:30:06.783
> 
> 标签：c++, qt, user-interface

我想创建一个包含可检查的 QAction 对象的 QMenu。选中某个动作后，它将触发并启用某些 3D 对象的绘制。但是，3D 对象的数量取决于要加载的文件。因此，此 QMenu 具有动态数量的 QAction 对象。假设我们有 10 个名称为“1”、“2”、...“10”的 3D 对象，因此 QMenu 中的 QAction 对象将显示为“1”、“2”、...“10”。选中其中一项时，将启用显示该名称的 3D 对象。

生成动态 QAction 对象的代码：

```
QStringList labels = defaultScene->getLabels();
for(int i=0; i<labels.size(); i++){
     QAction* labelAction = new QAction(labels[i], this);
     labelAction->setToolTip("Trace Marker " + labels[i]);
     labelAction->setStatusTip("Trace Marker " + labels[i]);
     labelAction->setCheckable(true);
     traceMenu->addAction(labelAction);
} 
```

我的问题是，如何连接这些 QAction 对象？具体来说，我在 defaultScene 中有一个 bool 数组，将在切换 QAction 时切换。我怎么知道哪个 QAction 正在触发？切换时 QAction 的信号仅通过布尔值。理想情况下，我会在 defaultScene 中有一个函数：

```
void toggleObject3D(int index){
     if(index >= 0 && index < visibleSize){
          visible[index] = !visible[index];
     }
} 
```

因此，要完成这项工作，我需要来自 traceMenu 的某种信号，它会触发一个 int 变量。我不知道这样的信号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T06:05:32.687

您可以使用`QSignalMapper`（[文档中的链接](http://doc.qt.digia.com/qt/qsignalmapper.html)）

这个想法是将每个 QAction 与一个索引相关联，然后使用来自 QSignalMapper 的 mapped(int) 信号。当然，我们需要映射切换的信号。

因此，首先，将您的方法 toggleObject3D 定义为插槽。

然后，在生成 QAction 的实例时，创建 QSignalMapper 并将每个操作与其关联：

```
QStringList labels = defaultScene->getLabels();
QSignalMapper *mapper = new QSignalMapper(this);
for(int i=0; i<labels.size(); i++){
   QAction* labelAction = new QAction(labels[i], this);
   labelAction->setToolTip("Trace Marker " + labels[i]);
   labelAction->setStatusTip("Trace Marker " + labels[i]);
   labelAction->setCheckable(true);
   traceMenu->addAction(labelAction);

   // Map this action to index i
   mapper->setMapping(labelAction, i);
   // Associate the toggled signal to map slot from the mapper
   // (it does not matter if we don't use the bool parameter from the signal)
   connect(action, SIGNAL(toggled(bool)), mapper, SLOT(map()));
}

// Connect the QSignalMapper map() signal to your method
connect(mapper, SIGNAL(mapped(int)), this, SLOT(toggleObject3D(int))); 
```

它应该工作:)

# mysql - Sql语法插入每千个正整数，从1开始直到100万？

> ID：13557893
> 
> 赞同：5
> 
> 时间：2012-11-26T02:31:05.710
> 
> 标签：mysql, sql

我有下表：

```
CREATE TABLE dummy (
  thousand INT(10) UNSIGNED,
  UNIQUE(thousand)
); 
```

是否有我可以用来插入每千个正整数的 sql 语法，从 1 到 100 万？我可以在 php 中实现这一点，但我想知道这是否可能在不使用存储过程的情况下实现。

```
thousand
1
1001
2001
3001
4001
...
998001
999001 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:49:12.017

不幸的是，mysql 不支持任何特殊的 SQL 函数。

您必须填充一个表，这没什么大不了的——它只有 1000 行。
您也可以将临时表与联合体拼凑在一起，但这并不优雅——不妨使用一张表。

其他数据库*确实*支持它，例如使用 postgres 的`generate_series()`功能，但这并不令人安慰。

附带说明一下，我经常发现在表格中填充从`1`最多到一个大数字的连续数字很方便，就像这样的场合，我只会`select 1000 * num from numbers where num <= 1000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:49:50.190

对于*单语句查询*，即不引入任何额外的表和支持语句，我会在“伪”SQL 中使用这种方法：

```
SELECT (D1.Digit + D2.Digit + D3.Digit)* 1000 + 1
FROM  
(
    SELECT 0 AS Digit UNION ALL
    SELECT 1 UNION ALL
    SELECT 2 UNION ALL
    SELECT 3 UNION ALL
    SELECT 4 UNION ALL
    SELECT 5 UNION ALL
    SELECT 6 UNION ALL
    SELECT 7 UNION ALL
    SELECT 8 UNION ALL
    SELECT 9
) AS D1
CROSS JOIN 
(
    SELECT 0 AS Digit UNION ALL
    SELECT 10 UNION ALL
    SELECT 20 UNION ALL
    SELECT 30 UNION ALL
    SELECT 40 UNION ALL
    SELECT 50 UNION ALL
    SELECT 60 UNION ALL
    SELECT 70 UNION ALL
    SELECT 80 UNION ALL
    SELECT 90
) AS D2
CROSS JOIN 
(
    SELECT 0 AS Digit UNION ALL
    SELECT 100 UNION ALL
    SELECT 200 UNION ALL
    SELECT 300 UNION ALL
    SELECT 400 UNION ALL
    SELECT 500 UNION ALL
    SELECT 600 UNION ALL
    SELECT 700 UNION ALL
    SELECT 800 UNION ALL
    SELECT 900
) AS D3
WHERE ((D1.Digit + D2.Digit + D3.Digit)* 1000 + 1) < 1000000 
```

我不是 100% 确定，但它应该在 mysql 中运行良好，或者可能需要一些小的改动。

如果您能够重用查询的部分内容，它会变得更漂亮，例如在 SQL Server 中，我将其编写如下：

```
WITH Digits AS
(
    SELECT 0 AS Digit UNION ALL
    SELECT 1 UNION ALL
    SELECT 2 UNION ALL
    SELECT 3 UNION ALL
    SELECT 4 UNION ALL
    SELECT 5 UNION ALL
    SELECT 6 UNION ALL
    SELECT 7 UNION ALL
    SELECT 8 UNION ALL
    SELECT 9
)
SELECT (D1.Digit + D2.Digit + D3.Digit)* 1000 + 1
FROM (SELECT Digit FROM Digits) AS D1
CROSS JOIN (SELECT Digit * 10 AS Digit FROM Digits) AS D2
CROSS JOIN (SELECT Digit * 100 AS Digit FROM Digits) AS D3
WHERE ((D1.Digit + D2.Digit + D3.Digit)* 1000 + 1) < 1000000 
```

注意乘法发生的位置，在子查询中相乘可能比在结果表达式中更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T02:55:21.360

这是一个技巧，我通常用于这类问题，类似于@sergeBelov 解决方案：

创建一个锚表，一个临时表，并用 0 到 9 的值填充它，如下所示：

```
CREATE TABLE TEMP (Digit int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

然后你可以这样做：

```
INSERT INTO dummy(thousand)
SELECT 1 + (id - 1) * 1000 AS n
FROM
(
  SELECT t3.digit * 100 + t2.digit * 10 + t1.digit + 1  AS id
  FROM         TEMP AS t1
  CROSS JOIN TEMP AS t2
  CROSS JOIN TEMP AS t3
) t; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f91e2/1)

## 这是如何运作的？

您正在寻找的序列 numbers( `1, 1001, 2001, ... , 998001, 999001`) 1000 项是他们所谓的[**Arithmetic progress**](http://en.wikipedia.org/wiki/Arithmetic_progression)，在您的情况下`nth`，序列 ( `an`) 的项由下式给出：

```
A + (n - 1) * d
In you sequence: a = 1, d = 1000 
```

其中`A`是序列的第一项，n 是项，d 是每两项之间的差（每两个连续项相同）。

子查询：

```
 SELECT t3.digit * 100 + t2.digit * 10 + t1.digit + 1  AS id
  FROM         TEMP AS t1
  CROSS JOIN TEMP AS t2
  CROSS JOIN TEMP AS t3; 
```

将生成一个从 1 到 1000 的数字列表（您的序列中的术语总数），然后我们`1 + (id - 1) * 1000`在外部选择中从这些数字中获取序列中的每个术语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T03:02:19.277

```
insert into dummy
   ( thousand )
select
     PreQuery.thousand 
  from
    (  select
             @sqlvar thousand,
             @sqlvar := @sqlvar + 1000
          from
             AnyTableWithAtLeast1000Records,
             ( select @sqlvar := 1 ) sqlvars
          limit 1000 ) PreQuery 
```

您可以从 select 语句中插入。使用 MySQL 变量，从 1 开始。然后，加入系统中可能有 1000 条（或更多）记录的任何表，以生成一行。即使没有从此类表中获取任何实际列，我们也只需要它作为记录位置。然后@sqlvar 从 1 开始并在名为千的列中返回。然后，立即将 1000 添加到“AnyTable...”中的下一条记录

# php - PHP preg_match 在字符串之间

> ID：13557894
> 
> 赞同：18
> 
> 时间：2012-11-26T02:31:10.943
> 
> 标签：php, regex, preg-match

我正在尝试获取字符串`hello world`。

这是我到目前为止所得到的：

```
$file = "1232#hello world#";

preg_match("#1232\#(.*)\##", $file, $match) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T02:34:23.093

建议使用分隔符，而不是`#`因为您的字符串包含`#`，并且使用非贪婪`(.*?)`来捕获之前的字符`#`。顺便说一句，`#`如果它不是分隔符，则不需要在表达式中进行转义。

```
$file = "1232#hello world#";
preg_match('/1232#(.*?)#/', $file, $match);

var_dump($match);
// Prints:
array(2) {
  [0]=>
  string(17) "1232#hello world#"
  [1]=>
  string(11) "hello world"
} 
```

更好的是使用`[^#]+`（或`*`代替`+`if 字符可能不存在）将所有字符匹配到下一个`#`.

```
preg_match('/1232#([^#]+)#/', $file, $match); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-26T02:49:17.197

使用环视：

```
preg_match("/(?<=#).*?(?=#)/", $file, $match) 
```

* * *

### 演示：

```
preg_match("/(?<=#).*?(?=#)/", "1232#hello world#", $match);
print_r($match) 
```

### 输出：

```
Array
(
    [0] => hello world
) 
```

**[在这里](http://ideone.com/H4vPy9)**测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:38:20.367

在我看来，你只需要得到`$match[1]`：

```
php > $file = "1232#hello world#";
php > preg_match("/1232\\#(.*)\\#/", $file, $match);
php > print_r($match);
Array
(
    [0] => 1232#hello world#
    [1] => hello world
)
php > print_r($match[1]);
hello world 
```

你得到不同的结果吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T02:39:55.590

```
preg_match('/1232#(.*)#$/', $file, $match); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-28T18:12:57.587

What if you want the delimiter to also be included in the array, this would be more usefull for preg_split where you might not want each array element to begin and end with the delimiters, the example im about to show would would include the delimeters inside the array values. this would be what you would need `preg_match('/\#(.*?)#/', $file, $match); print_r($match);` this would output `array( [0]=> #hello world# )`

# http - 分块传输编码 - 浏览器行为

> ID：13557900
> 
> 赞同：29
> 
> 时间：2012-11-26T02:31:37.307
> 
> 标签：http, google-chrome, firefox, browser

我正在尝试以分块模式发送数据。所有标头均已正确设置，数据也已相应编码。浏览器将我的响应识别为分块响应，接受标头并开始接收数据。

我期待浏览器会在每个收到的块上更新页面，而不是等到所有块都收到然后显示它们。这是预期的行为吗？

我期待看到每个块在收到后立即显示。使用时`curl`，每个块在收到后立即显示。为什么 GUI 浏览器不会发生同样的情况？他们是否使用某种缓冲/缓存？

我将`Cache-Control`标头设置为`no-cache`，所以不确定它与缓存有关。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-26T09:00:27.050

afaik 浏览器需要一些有效负载来在收到时开始渲染块。
Curl当然是个例外。

尝试在您的第一个块之前发送大约 1KB 的任意数据。

如果你做的一切都是正确的，浏览器应该在收到块时渲染它们。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-05-11T09:40:18.987

**修复你的标题。**

* * *

1.  截至 2019 年，如果您使用`Content-type: text/html`，Chrome 中不会发生缓冲。

* * *

2.  如果您只想流式传输文本，类似于`text/plain`，那么仅使用`Content-type: text/event-stream`也将禁用缓冲。

* * *

3.  如果您使用`Content-type: text/plain`，那么 Chrome 仍将缓冲 1 KiB，除非您另外指定`X-Content-Type-Options: nosniff`.

[RFC 2045 规定](https://www.rfc-editor.org/rfc/rfc2045#section-5.2)，如果没有`Content-Type`指定，`Content-type: text/plain; charset=us-ascii`则应假定

> 5.2\. 内容类型默认值
> 
> 此协议将没有 MIME Con​​tent-Type 标头的默认 RFC 822 消息视为 US-ASCII 字符集中的纯文本，可以明确指定为：
> 
> ```
> Content-type: text/plain; charset=us-ascii 
> ```
> 
> 如果未指定 Content-Type 标头字段，则假定此默认值。还建议在遇到语法上无效的 Content-Type 标头字段时采用此默认值。在存在 MIME-Version 头字段且没有任何 Content-Type 头字段的情况下，接收用户代理也可以假定纯 US-ASCII 文本是发送者的意图。在没有 MIME-Version 或存在语法上无效的 Content-Type 标头字段的情况下，仍可以假定纯 US-ASCII 文本，但发件人的意图可能不是这样。

浏览器将开始缓冲`text/plain`一定量，以检查它们是否可以检测发送的内容是否真的是纯文本或某种媒体类型（如图像），以防`Content-Type`被省略，这将等于`text/plain`内容类型。这称为 MIME 类型嗅探。

MIME 类型嗅探[由 Mozilla 定义](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#MIME_sniffing)为：

> 在没有 MIME 类型的情况下，或者在某些浏览器认为它们不正确的情况下，浏览器可能会执行 MIME 嗅探——通过查看资源的字节来猜测正确的 MIME 类型。
> 
> 每个浏览器在不同情况下执行 MIME 嗅探的方式不同。（例如，如果发送的 MIME 类型不合适，Safari 将查看 URL 中的文件扩展名。）由于某些 MIME 类型代表可执行内容，因此存在安全问题。服务器可以通过发送 X-Content-Type-Options 标头来防止 MIME 嗅探。

根据[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options)：

> `X-Content-Type-Options`响应 HTTP 标头是服务器用来指示 `Content-Type`标头中通告的 MIME 类型不应更改和遵循的标记。这 **允许选择退出 MIME 类型嗅探**，或者换句话说，这是一种表示网站管理员知道他们在做什么的方式。

因此，添加`X-Content-Type-Options: nosniff`使其工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-12T20:46:39.023

无论数据是否分块发送，浏览器都可以处理和呈现数据。浏览器是否呈现响应数据将取决于数据结构以及它采用何种缓冲。例如，在浏览器可以渲染图像之前，它需要有文档（或足够的文档）、样式表等。

当资源响应生成时资源的长度未知（响应标头中不能包含“Content-Length”）并且服务器不想在资源被转移。

# javascript - 在 id 不确定的 div 中查找和替换内容

> ID：13557901
> 
> 赞同：0
> 
> 时间：2012-11-26T02:31:43.320
> 
> 标签：javascript, replace

> **可能重复：**
> [如何在不影响标记的情况下替换 html 文档中的文本？](https://stackoverflow.com/questions/1512876/how-to-replace-text-in-html-document-without-affecting-the-markup)

这应该很简单，我似乎无法让它工作。
我要拿：

```
<div>Other text here XYZ more text</div> 
```

并替换为：

```
<div>Other text here ABC more text</div> 
```

在我不知道 id、类或任何关于 div 的地方，我不能意外替换属性。只是中间的文字。没有Jquery。

# listener - 轮询和事件驱动编程对于同一种技术是不同的词吗？

> ID：13557904
> 
> 赞同：6
> 
> 时间：2012-11-26T02:32:26.067
> 
> 标签：listener, interrupt, interrupt-handling, event-driven-design

我研究了中断与循环轮询，并了解了不必等待轮询的中断的优点。在我看来，轮询就像事件驱动编程，或者至少类似于监听器，而轮询的作用实际上很像监听输入或输出。您同意还是我误解了轮询（循环侦听）和事件驱动编程（也与所谓的侦听器一起侦听）之间的任何关键区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T02:50:05.157

不，恰恰相反，中断驱动编程几乎就是硬件级别的事件驱动编程。中断驱动代码和事件驱动代码都在运行代码之前等待事件，而轮询将尝试查询事件是否实际存在。

但是需要注意的是，中断驱动和事件驱动的程序一般都是在底层使用轮询的形式实现的；没有真正的中断或事件驱动系统不涉及某种轮询，尽管通常在硬件中。在中断的情况下，CPU 实际上每个时钟周期都会轮询中断线，事件驱动编程也是如此，因为重新启动暂停的线程涉及由事件源（通常是驱动程序）引发的中断。

可以说，中断和事件驱动编程是一种严格的轮询方式，与实际进行轮询相比，它具有很多优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:37:08.543

轮询和中断处理是了解事件的两种方法。两者都不与事件驱动编程相矛盾，事件驱动编程是围绕处理传入事件构建程序。

# php - 如何从继承的类中设置父属性

> ID：13557905
> 
> 赞同：1
> 
> 时间：2012-11-26T02:32:31.667
> 
> 标签：php, inheritance

我有这两个类：

```
<?php

class Test 
{
    protected $x = 0;

    public function setX($x)
    {
        $this->x = $x;
    }

    public function getX()
    {
        echo $this->x;
    }
}

class TestEx extends Test
{
    //parent::$this->x = 7; it gives this error: Parse error: syntax error, unexpected '$x' (T_VARIABLE), expecting function (T_FUNCTION) in test.php

    public function getX()
    {
        echo parent::$this->x;
    }

}

$call_textex = new TestEx();
$call_textex->getX();

?> 
```

现在，我要从继承的类中设置基类的 $x 属性。如何在 PHP5 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:35:56.303

将您的分配放在构造函数中，然后使用`$this`：

```
class TestEx extends Test
{
    public function __construct()
    {
        $this->x = 7;
    }

    public function getX()
    {
        echo $this->x;
    }
} 
```

在此处查看实际操作：[http ://codepad.org/bbrGXFWP](http://codepad.org/bbrGXFWP)

# user-interface - MouseDown 或 MouseUp 事件？

> ID：13557914
> 
> 赞同：2
> 
> 时间：2012-11-26T02:33:06.170
> 
> 标签：user-interface, event-handling, controls, mousedown, mouseup

如果您试图在控件上捕获鼠标右键单击事件以选择网格中的单元格或显示弹出菜单：

如果只有这两个可供选择，则使用`MouseDown`或事件中的哪一个？`MouseUp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:10:28.310

这对你有用吗？

```
Private Sub Form_MouseUp(Button As Integer, Shift As Integer, X As Single, Y As Single)
    If Button = 2 Then
        PopupMenu test
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T21:05:28.573

我心里也有同样的问题。我只是通过右键单击 Firefox 屏幕、我的桌面屏幕和我的 Visual Studio IDE 屏幕来实现这一点。如果您按住鼠标右键而不松开它，菜单*将不会*出现在这些程序中。这意味着他们将代码放入`MouseUp`事件中。所以作为一个经验法则，我们最好把它放进去，`MouseUp`但我的理由不是很确定。

# jquery-mobile - 在 jQuery Mobile 中为不同页面附加按钮单击事件的适当方法是什么？

> ID：13557917
> 
> 赞同：0
> 
> 时间：2012-11-26T02:33:22.283
> 
> 标签：jquery-mobile

我尝试[了这个解决方案](https://stackoverflow.com/a/12826004/1023230)，但显然，我仍然会得到鬼点击。

例如，我在 page1.html 中使用以下代码：

```
<script type="text/javascript">
    $(document).on('pageinit', '.ui-page',function(){
        $("#someButtonForPage1").click(function(){
            $.mobile.changePage("page2.html");
        });
    });
</script> 
```

然后在第 2 页，我有以下内容：

```
<script type="text/javascript">
    $(document).on('pageinit', '.ui-page',function(){
        $("#someButtonForPage2").click(function(){
            $.mobile.changePage("page1.html");
        });
    });
</script> 
```

至于页面，它们仅包含页眉、内容主体（内部包含按钮元素）和页脚。发生的情况是单击按钮将使页面相互转换至少几次。这意味着我仍然会得到鬼点击。

什么能彻底解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:31:53.353

这是一个常见的 jQuery 移动问题。在将事件绑定到任何内容之前，您需要检查该事件是否已绑定到该元素。例如，带有 2 次点击/点击事件的按钮将执行 2 次想要的操作。

[在这里](https://stackoverflow.com/questions/13541888/jquery-mobile-div-as-link-and-back-button-issue/13542166#13542166)，您将找到我对同一问题的回答。

我的第一个示例使用事件过滤器，您可以在[此处](http://www.codenothing.com/archives/jquery/event-filter/)找到它，示例在[此处](http://www.codenothing.com/archives/jquery/event-filter/)。

# java - 将目录和文件从一个 Windows 服务器复制到另一个

> ID：13557920
> 
> 赞同：0
> 
> 时间：2012-11-26T02:34:14.380
> 
> 标签：java, windows, file

从 WindowsServer，我正在使用：

```
File src = new File("\\\\servername\\D:\\LogFiles"); 
```

当我检查时`src.isDirectory()`，它说假。尝试了不同的目录，但它再次返回 false。检查并且目录存在于其他 Windows Server 中。

最有可能的是，问题似乎出在斜杠上。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:39:59.760

很确定问题的一部分是Windows共享中没有冒号“D：”如果您尝试访问D驱动器的管理员共享，则需要使用“D$”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:44:29.767

试试这个：

```
File src = new File("\\\\servername\\D$\\LogFiles"); 
```

1.  将 $ 用于驱动程序。
2.  为所有“\”字符添加添加\。

# android - 主详细信息流中的回调“魔术”

> ID：13557930
> 
> 赞同：2
> 
> 时间：2012-11-26T02:35:32.820
> 
> 标签：android, android-listview, android-listfragment

Eclipse 生成的主细节流在扩展的类中有一些回调魔法`ListFragment`——我说魔法是因为当你是 Android 和 Java 菜鸟时，这就是它的样子：）

鉴于下面的代码，有人可以为我回答几个问题：

1.  的`onAttach`方法是`ListFragment`做什么用的`mCallbacks = (Callbacks) activity`？
2.  哪个方法在方法中`onItemSelected`被调用，需要实现的方法还是在方法中？`onListItemClick``ListFragment``onItemSelected``FragmentActivity`
3.  所有这些`onItemSelected`方法都采用 an `id`of 类型`String`（因为`DummyContent` `id`is a `String`）。如果我更改`DummyContent` `id`为 a ，我需要更改`long`哪些方法？`onItemSelected`我试着换了一个，`FragmentActivity`但这有`@Override`，所以我不被允许:(

谢谢

```
public class RecordingListFragment extends ListFragment {

    private static final String STATE_ACTIVATED_POSITION = "activated_position";

    private Callbacks mCallbacks = sDummyCallbacks;
    private int mActivatedPosition = ListView.INVALID_POSITION;

    public interface Callbacks {

        public void onItemSelected(String id);
    }

    private static Callbacks sDummyCallbacks = new Callbacks() {
        @Override
        // NEEDS IMPLEMENTATION - i guess????
        public void onItemSelected(String id) {
        }
    };

...

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        if (!(activity instanceof Callbacks)) {
            throw new IllegalStateException("Activity must implement fragment's callbacks.");
        }

        mCallbacks = (Callbacks) activity;
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mCallbacks = sDummyCallbacks;
    }

    @Override
    public void onListItemClick(ListView listView, View view, int position, long id) {
        super.onListItemClick(listView, view, position, id);
        mCallbacks.onItemSelected(DummyContent.ITEMS.get(position).id);
    }

...

} 
```

还有一个文件...

```
public class RecordingListActivity extends FragmentActivity
        implements RecordingListFragment.Callbacks {

    private boolean mTwoPane;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recording_list);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        if (findViewById(R.id.recording_detail_container) != null) {
            mTwoPane = true;
            ((RecordingListFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.recording_list))
                    .setActivateOnItemClick(true);
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    public void onItemSelected(String id) {
        if (mTwoPane) {
            Bundle arguments = new Bundle();
            arguments.putString(RecordingDetailFragment.ARG_ITEM_ID, id);
            RecordingDetailFragment fragment = new RecordingDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.recording_detail_container, fragment)
                    .commit();

        } else {
            Intent detailIntent = new Intent(this, RecordingDetailActivity.class);
            detailIntent.putExtra(RecordingDetailFragment.ARG_ITEM_ID, id);
            startActivity(detailIntent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:54:48.297

> ListFragment 的 onAttach 方法对 mCallbacks = (Callbacks) 活动有什么作用？

在`onAttach`回调中，`Activity`/ `FragmentActivity`（`Fragment`将被绑定/使用）被传递给该`Fragment`实例（通过*活动*参数）。该行只是将其转换为稍后在（见下文）中使用`Activity`的接口。您**必须**实现该接口，否则代码将由于先前的条件而失败。基本上，方法中的代码说：*“将使用此片段的 Activity 必须实现 Callbacks 接口，否则代码将因 IllegalStateException 而失败”*。`Callbacks``Fragment``Activity` **`if``onAttach`**

 ***> ListFragment 的onListItemClick 方法中调用了哪个onItemSelected 方法，需要实现的方法还是FragmentActivity 中的onItemSelected？

在一个非常原始的解释中：保留对类型对象（表示实现接口的类）`RecordingListFragment`的引用（*mCallbacks*字段）。最初，对于这个引用，代码将分配一个默认/空引用（*sDummyCallbacks*），它不做任何事情（所以不，你不必为它提供一些实现），因为它的*onItemSelected*是空的，这是为了避免在某些情况下可能（例如，如果您没有为该字段分配某些内容并且您调用它）。当方法运行时，对this存在的地方的引用将被转换为 a并放入`Callbacks``Callbacks``Callabacks``Callbacks`*`sDummyCallbacks`*`NullPointerException``mCallbacks``onItemSelected``onAttach``Activity``Fragment``Callbaks``mCallbacks`场地。发生这种情况后，当您调用'方法时，将调用`mCallbacks.onItemSelected()`该方法中的代码。如果稍后调用 ，将再次指向，在这种情况下，调用将什么也不做。`FragmentActivity``onItemSelected``onDetach``mCallbacks``sDummyCallbacks``mCallbacks.onItemSelected()`**

 **上面的接口系统很重要，因为它将使您`RecordingListFragment`的代码中的组件更可重用，因为它不会绑定到特定的`Activity`实现。当用户单击片段列表中的项目时，您将调用引用以运行该`onItemSelected`对象（在您的情况下为 Activity）的方法。您的片段不知道如何实现接口，甚至不在乎。例如，假设您有三个活动，每个活动都使用一个片段。您需要如何更改类以使其与将要使用的三个活动一起使用？`mCallbacks``onItemSelected``RecordingListFragment``RecordingListFragment`

> 所有这些 onItemSelected 方法都采用 String 类型的 id（因为 DummyContent id 是一个字符串）。如果我将 DummyContent id 更改为 long，我需要更改哪些 onItemSelected 方法？我尝试更改 FragmentActivity 中的那个，但这有 @Override 所以我不允许:(

修改界面：

```
public interface Callbacks {

        public void onItemSelected(long id);
} 
```

如果你保存 java 文件，Eclipse 会抱怨（你必须重写一个超类方法）这个接口是在哪里实现的。对于`sDummyCallbacks`：

```
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    // NEEDS IMPLEMENTATION - i guess???? <- it doesn't need no implementation
    // it's purpose is to do nothing
    public void onItemSelected(long id) {
    }
}; 
```

还`FragmentActivity`实现了`Callbacks`接口，因此您也需要更改它：

```
public class RecordingListActivity extends FragmentActivity
        implements RecordingListFragment.Callbacks {

    @Override
    public void onItemSelected(long id) {
        if (mTwoPane) {
    // ... 
```

最后你会`mCallbacks`在你的片段中使用：

```
@Override
public void onListItemClick(ListView listView, View view, int position, long id) {     
    mCallbacks.onItemSelected(id);
} 
```

我建议您花一些时间来学习一下 java 语言，这样您将努力理解 Android 代码，而不是 Android 代码 + java 方式。*****

# python - 如何在python中将十进制转换为二进制列表

> ID：13557937
> 
> 赞同：28
> 
> 时间：2012-11-26T02:36:44.570
> 
> 标签：python, list, binary

> **可能重复：**
> [在不使用内置 bin 函数的情况下将整数转换为二进制](https://stackoverflow.com/questions/13522773/convert-an-integer-to-binary-without-using-the-built-in-bin-function)

如何将十进制数转换为二进制列表。

例如，如何将 8 更改为 [1,0,0,0]

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-26T02:39:32.243

您可能可以使用内置`bin`函数：

```
bin(8) #'0b1000' 
```

获取列表：

```
[int(x) for x in bin(8)[2:]] 
```

虽然看起来可能有更好的方法......

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-26T02:46:39.987

尝试这个：

```
>>> list('{0:0b}'.format(8))
['1', '0', '0', '0'] 
```

编辑——哎呀，你想要整数：

```
>>> [int(x) for x in list('{0:0b}'.format(8))]
[1, 0, 0, 0] 
```

另一个编辑——

mgilson 的版本要快一点：

```
$ python -m timeit "[int(x) for x in list('{0:0b}'.format(8))]"
100000 loops, best of 3: 5.37 usec per loop
$ python -m timeit "[int(x) for x in bin(8)[2:]]"
100000 loops, best of 3: 4.26 usec per loop 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-26T02:46:07.760

本着您最初尝试的精神：

```
binary = []
while num != 0:
    bit = num % 2
    binary.insert(0, bit)
    num = num / 2 
```

# javascript - 我如何使用javascript进行字母数字顺序

> ID：13557938
> 
> 赞同：-1
> 
> 时间：2012-11-26T02:36:53.330
> 
> 标签：javascript

我正在使用以下 JavaScript。最终结果是显示序列字符。但我想显示字母数字顺序。我怎么做？

```
var disp = '';
var string = '';
var i;
var chars = "0123456789abcdefghiklmnopqrstuvwxyz";

var ran_unrounded;
var ran_number;
var rnum;
for (i = 0; i < 5; i++) {
    rnum = Math.floor(Math.random() * chars.length);
    string += chars.substring(rnum, rnum + 1);

    ran_unrounded = Math.random() * 3;
    ran_number = Math.floor(ran_unrounded);
    //document.write(chars.substring(rnum, rnum + 1));
    // alert('rnum', rnum, '--', rnum + 1);

    disp = chars.substring(rnum, rnum + 8);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:52:42.020

好的，所以根据上面评论中的说明，要求是生成一个包含两个随机“单词”的字符串，其中每个“单词”具有从预定义的一组可用字符中随机选择的四个字符。

以下是一种方法：

```
var chars = "0123456789abcdefghiklmnopqrstuvwxyz";
function getWord(numChars) {
    var word = "",
        i;
    for (i = 0; i < numChars; i++)
        word += chars.charAt(Math.floor(Math.random() * chars.length));
    return word;
}
function getWords(numWords, numCharsPerWord) {
    var words = [],
        i;
    for (i = 0; i < numWords; i++)
        words.push(getWord(numCharsPerWord));
    return words.join(" ");
}

console.log( getWords(2, 4) );        // "a8ak 1wp9"
console.log( getWords(3, 4) );        // "7ua1 zh80 yy3r"
console.log( getWords(2, 5) );        // "j5ms2 e4xn8" 
```

演示：http: [//jsfiddle.net/dgnwh/](http://jsfiddle.net/dgnwh/)

# c# - 如何设置组合框项目的可见性？

> ID：13557942
> 
> 赞同：4
> 
> 时间：2012-11-26T02:37:18.457
> 
> 标签：c#, wpf, combobox

我有 2 个 WPF 组合框（comboboxA、comboboxB）和相同的组合框项目（Apple 和 Orange）。假设我在comboboxA中选择“Apple”，那么“Apple”需要隐藏在comboxB中。如果我回到comboxA并选择“Orange”，“Apple”将可​​见，“Orange”需要隐藏。我如何使用 C# 实现这一点？

xaml 的代码片段：

```
 <ComboBox Name="comboboxA" >
        <ComboBoxItem Content="Apple" Name="AppleA"></ComboBoxItem>
        <ComboBoxItem Content="Orange" Name="OrangeA"></ComboBoxItem>
    </ComboBox>

    <ComboBox Name="comboboxB" >
        <ComboBoxItem Content="Apple" Name="AppleB"></ComboBoxItem>
        <ComboBoxItem Content="Orange" Name="OrangeB"></ComboBoxItem>
    </ComboBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T03:06:58.450

您可以使用 sa_ddam213 提到的方法，或者您可以像这样在 SelectionChanged 事件中强行使用它。

```
private void comboboxA_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    for (int i = 0; i <= comboboxB.Items.Count -1; i++)
    {
        if (((ComboBoxItem)(comboboxB.Items[i])).Content.ToString() == ((ComboBoxItem)comboboxA.SelectedItem).Content.ToString())
        {
            ((ComboBoxItem)(comboboxB.Items[i])).Visibility = System.Windows.Visibility.Collapsed;
        }
        else
            ((ComboBoxItem)(comboboxB.Items[i])).Visibility = System.Windows.Visibility.Visible;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T02:54:52.343

也许只是从列表中过滤选定的项目

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <ComboBox ItemsSource="{Binding ElementName=UI,Path=YourCollection}" SelectedItem="{Binding ElementName=UI,Path=SelectedItem}" Height="23" HorizontalAlignment="Left" Margin="65,61,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" />
        <ComboBox ItemsSource="{Binding ElementName=UI, Path=FilteredCollection}" Height="23" HorizontalAlignment="Left" Margin="223,61,0,0" Name="comboBox2" VerticalAlignment="Top" Width="120" />
    </Grid>
</Window>

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private string _selectedItem;
    private ObservableCollection<string> _yourCollection = new ObservableCollection<string>();

    public MainWindow()
    {
        InitializeComponent();
        YourCollection.Add("Apple");
        YourCollection.Add("Banana");
        YourCollection.Add("Pear");
        YourCollection.Add("Orange");
        NotifyPropertyChanged("FilteredCollection"); 
    }

    // Collection Fro ComboBox A
    public ObservableCollection<string> YourCollection
    {
        get { return _yourCollection; }
        set { _yourCollection = value; }
    }

    // ComboBox A selected Item
    public string SelectedItem
    {
        get { return _selectedItem; }
        set
        {
            _selectedItem = value;

            // Notify the the filter collection has changed
            NotifyPropertyChanged("FilteredCollection"); 
        }
    }

    // Collection to show in ComboBox B
    public List<string> FilteredCollection
    {
        // Remove the selected Item
        get { return _yourCollection.Where(s => !s.Equals(_selectedItem)).ToList(); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

或者你需要这个双向工作吗

# wamp - SCREAM：file_get_contents 忽略错误抑制

> ID：13557948
> 
> 赞同：3
> 
> 时间：2012-11-26T02:38:32.233
> 
> 标签：wamp, file-get-contents

我使用该函数`file_get_contents()`检索数据并将其存储到 MySQL 数据库中。起初一切都很顺利。几个小时后出现这样的[东西](http://s13.postimage.org/6hb3q7j8n/error3.png)。

我使用 WAMP。请帮我解决这个问题，因为我不知道该怎么做。像这样的事情总是在几个小时后发生。

谢谢你。

问候，达宁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T12:21:54.433

如果您不想看到警告，只需添加该行

```
error_reporting(0); 
```

作为在 php 文件中打开 php 标记后的第一行。

# javascript - Ajax post不发送数据

> ID：13557960
> 
> 赞同：0
> 
> 时间：2012-11-26T02:40:31.133
> 
> 标签：javascript, php, ajax, http-post, send

```
var dataString = 'edulevel='+ edulevel
                        + '&course=' + course
                        + '&financerelated=' + financerelated     
                        + '&occupation=' + occupation
                        + '&joblevel=' + joblevel
                        + '&income=' + income
                        + '&bankname=' + bankname
                        + '&acctype=' + acctype
                        + '&accno=' + accno;

        //ajax
        $.ajax({
            type:"POST",
            url: "process/veriamateur.php",
            data: dataString,
            success: success(),
            error:function(jqXHR, textStatus, errorThrown){
                                   alert("Error type" + textStatus + "occured, with value " + errorThrown);
                               }

            }); 
```

我已经检查并确保 dataString 发送了正确的东西，但是，ajax 只是没有发送任何数据，没有任何错误。即使我将 url 更改为无效的，它仍然会进入我的成功功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:48:12.993

通过 POST 发送时，您应该将数据作为对象而不是字符串传递

例子：

```
data = {
  'edulevel': edulevel,
  'course': course
  (.....)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:55:20.330

**我已经做了一些改变，现在这正在工作** 你的回调函数是success（）并且jQuery试图找到这个函数，你可以在同一个地方编写你的函数，或者你可以编写一个独立的函数并将其分配给成功：，如果您仍然遇到问题，请尝试更改您的网址，如果您当前的文件位置是，`/files/file.php` 那么您的 veriamateur.php 必须是`/files/process/veriamateur.php`

```
var dataString = 'edulevel='+ edulevel
                        + '&course=' + course
                        + '&financerelated=' + financerelated     
                        + '&occupation=' + occupation
                        + '&joblevel=' + joblevel
                        + '&income=' + income
                        + '&bankname=' + bankname
                        + '&acctype=' + acctype
                        + '&accno=' + accno;

        //ajax
        $.ajax({
            type:"POST",
            url: "process/veriamateur.php",
            data: dataString,
            success: function(){ alert('success');},
            error:function(jqXHR, textStatus, errorThrown){
                                   alert("Error type" + textStatus + "occured, with value " + errorThrown);
                               }

            }); 
```

# java - java - 如何在java中调度任务相互依赖的线程？

> ID：13557961
> 
> 赞同：3
> 
> 时间：2012-11-26T02:40:41.803
> 
> 标签：java, multithreading

这是我在学校的操作系统课上学习线程（理论上，呵呵）后第一次尝试多线程，我认为我做我想做的事情的方式是不好的做法/草率。

我通过为设置运行该算法的游戏的每个分支生成一个单独的线程来并行化一个极小极大算法。这其中的调度部分有点棘手。随着算法迭代地加深，我希望所有线程的深度保持一致。

所以，首先我有一个主线程，它为游戏中的每个可用动作生成一个子线程：

```
 public void run(){
        // initializes all the threads
        for (AlphaBetaMultiThread t : threadList) {
            t.start();
        }
        try { //This won't ever happen; the subthreads run forever
            evals = 0;
            for (AlphaBetaMultiThread t : threadList) {
                t.join();
                evals += t.evals;
            }
        } catch (Exception e) {
            System.out.println("Error joining threads: " + e);
        }
    } 
```

线程将自己传递给构造函数，以便每个子线程都可以访问主线程的 maxDepth 属性和 signalDepth 方法：

```
 public synchronized void signalDepth(){
        signals++;
        if (signals % threadList.length() == 0){
            if (verbose)
                System.out.println(toString());
            depth++;
        }
    } 
```

最后，这是子线程评估过程。每当它领先于其他线程时，它就会降低自己的优先级，然后让步，直到所有子线程都发出信号。

```
public void run() {
    startTime = System.currentTimeMillis();
    while(true){
        if (depth >= master.maxDepth) {
            this.setPriority(4);
            this.yield();
            break;
        } else {
            this.setPriority(5);
        }
        eval = -1*alphabeta(0, infHolder.MIN, infHolder.MAX);
        manager.signalDepth();
        depth += 1;
    }
} 
```

除了我的实现现在似乎根本不起作用（仍在试图找出原因）这一事实之外，我真的觉得我正在做的事情不是标准的做事方式。我的直觉是，可能有各种各样的内置多线程库可以让我的生活更轻松，但我真的不知道我在寻找什么。

哦，我还收到警告说 Thread.destroy() 已被弃用（这就是我打算在计算机播放器最终播放它之后销毁所有东西的方式）。

我想我的问题是：我应该用什么来管理我的子线程？

编辑：哦，如果我遗漏了与我的问题相关的内容，请随时查看我在 github 上的完整代码：[https](https://github.com/cowpig/MagneticCave) ://github.com/cowpig/MagneticCave 相关文件是 GameThread 和 AlphaBetaMultiThread。我为我的无知道歉！

另一个编辑：我希望线程永远迭代加深，直到 gamePlayer 对象（创建主线程的那个）决定是时候选择一个动作了——在这个时候它将访问动作列表并找到最高的一个评估。这意味着 .join() 将不起作用，除非我为每个深度迭代创建一组新的线程，但是那将需要更多的开销（我认为）所以我真的不想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:02:24.457

你的直觉是正确的。Java 5 引入了许多有用的并发构造。您可能要特别研究的一个是[CyclicBarrier](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CyclicBarrier.html)。它是一种同步辅助工具，允许多个线程相互等待以达到共同的障碍点（在您的情况下，这将是主深度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:54:23.217

您应该使用 Thread.join() 等待子线程，完成后应该退出。根本不需要 Thread.destroy() ，也不需要摆弄优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:03:03.600

而不是为此使用原始实例的集合`Thread`，您应该将`Runnable`实例提交到[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html). 如果您的所有线程都在计算某种结果，您可能希望使用`Callable<?>`and [`ExecutorCompletionService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)。

如果您有`Runnable`s 的依赖关系图，我建议您使用`ListenableFuture`优秀的 Guava 库。有关详细信息，请参阅[`ListenableFuture`解释](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)的wiki 文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:59:39.290

如果[数据流图](http://en.wikipedia.org/wiki/Flow-based_programming)表示适合您的任务，您可以使用我的数据流库[df4j](https://github.com/rfqu/df4j)。

# sql - 随身携带 SQL 数据库进行演示

> ID：13557966
> 
> 赞同：1
> 
> 时间：2012-11-26T02:41:01.647
> 
> 标签：sql, sql-server, database, portability

我是 sql 的初学者，明天我必须提交我的第一个作业，这是一个简单的小型数据库。问题是我真的不知道我是否可以在我的计算机中找到数据库，将其复制到 USB 驱动器中，然后将其插入另一台计算机，以便它可以在那里运行。你能告诉我这是它的工作方式还是我应该做其他事情？非常感谢。

顺便说一句，我用的是sql server express 2012。如果你还需要知道什么，尽管问。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:44:15.803

我不喜欢*附加*和*分离*数据库，因为这不会在本地磁盘上留下备份，而只是使用`BackUp`和`Restore`功能。

备份：

*   右键单击要备份到的数据库
*   点击`Task`
*   并选择`BackUp`
*   填写姓名并添加`Destination`

恢复：

*   右键点击`Databases`
*   将出现一个弹出窗口，然后单击`Restore Database...`

其他链接

*   [备份和恢复操作方法主题 ( *SQL Server Management Studio* )](http://technet.microsoft.com/en-us/library/ms189621%28v=sql.105%29.aspx)

# javascript - 尝试将字段添加到 javascript 对象

> ID：13557967
> 
> 赞同：0
> 
> 时间：2012-11-26T02:41:03.887
> 
> 标签：javascript, asp.net-mvc-3, object, razor

我有一个 foreach 循环（使用 MVC3 的 Razor 引擎编写），每次迭代都需要在 Popups 数组中创建一个新对象。这是我要运行的内容：

```
var popups = [];
var count = 0;

@foreach (var marker in Model) {
    <text>
    popups[count]["content"] = document.createElement("div");
    popups[count]["content"].class = "infobox-custom";
    popups[count]["content"].style.cssText = "padding: 5px; width: 600px;";
    popups[count]["content"].innerHTML = '<div class="professional"><h1>test</h1></div>';

    popups[count]["infobox"] = new InfoBox();

    popups[count]["marker"] = new MarkerInfo();
    count++;
    </text>
}
console.log(popups); 
```

我收到错误：

> 未捕获的类型错误：无法设置未定义的属性“内容”

如您所见，我试图将每个标记的相关信息封装在一个 javascript 对象中。我的目标是使用类似`popups[index].marker`or的东西来访问我需要的一切`popups[index].content`。

我正在阅读 Javascript: The Good Parts 这本书，其中有一部分提到：

> 如果对象还没有该属性名称，则对该对象进行扩充：

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:45:38.190

`popups[count]`在开始向其添加属性之前设置为对象。

```
var popups = [];
var count = 0;

@foreach (var marker in Model) {
    <text>
    popups[count] = {};
    popups[count]["content"] = document.createElement("div");
    popups[count]["content"].class = "infobox-custom";
    popups[count]["content"].style.cssText = "padding: 5px; width: 600px;";
    popups[count]["content"].innerHTML = '<div class="professional"><h1>test</h1></div>';

    popups[count]["infobox"] = new InfoBox();

    popups[count]["marker"] = new MarkerInfo();
    count++;
    </text>
}
console.log(popups); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:43:35.303

您需要创建`popups`一个对象数组。

```
popups[count] = {}; // <<<<<<<<<<<<<<<<-----------------------------------
popups[count]["content"] = document.createElement("div");
popups[count]["content"].class = "infobox-custom";
popups[count]["content"].style.cssText = "padding: 5px; width: 600px;";
popups[count]["content"].innerHTML = '<div class="professional"><h1>test</h1></div>'; 
```

# jquery - Nodejs + jsdom 模块，错误对象# has no method '$' I am attempting to make a simple nodejs client that will eventually crawl a given reddit users profile history. Right now i am trying to use the jsdom module to extract the URL for the ne 问问题 问问题 2012-11-26T02:41:10.190 637 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am attempting to make a simple nodejs client that will eventually crawl a given reddit users profile history. Right now i am trying to use the jsdom module to extract the URL for the next page of results on a given users profile. I am currently working in ubuntu 12.10 and my versions of npm and nodejs are current. Here is the code that i have so far. I will include the error message below. var http = require('http'), jsdom = require('jsdom'); //object containing http.request options //path accepts a username via process.argv[2] var options = { host: 'www.reddit.com', path: '/user/' + process.argv[2] }; //getPage requests the page for a given user function getPage() { var req = http.request(options, function(response){ response.setEncoding('utf8'); response.on('data', function(rawHTML){ // console.log(data); setNextPage(rawHTML); }); response.on('error', function(error){ console.log(error); }); response.on('end', function(){ console.log('Response complete'); }); }); req.end(); } //the setNextPage function combs the rawHTML sent to it, //extracting the URL for the next page of a users history function setNextPage(rawHTML) { jsdom.env( rawHTML, ["http://code.jquery.com/jquery.js"], function(errors, window) { var nextPageURL = window.$(".nextprev > a").attr("href"); console.log('URL for the next page is: ' + nextPageURL); } ); } getPage(); Now for the error message that i am getting after running the client. /home/stephen/Desktop/getKarma/app.js:38 var nextPageURL = window.$('.nextprev > a').attr("href"); ^ TypeError: Object # has no method '$' at /home/stephen/Desktop/getKarma/app.js:38:29 at exports.env.exports.jsdom.env.scriptComplete (/home/stephen/Desktop/getKarma/node_modules/jsdom/lib/jsdom.js:205:39) at process.startup.processNextTick.process._tickCallback (node.js:244:9) There's an interesting pattern worth mentioning here: a JavaScript constructor may return any object (not necesserily this). One could create a constructor function, that returns a proxy object, that contains proxy methods to the "real" methods of the "real" instance object. This may sound complicated, but it is not; here is a code snippet: var MyClass = function() { var instanceObj = this; var proxyObj = { myPublicMethod: function() { return instanceObj.myPublicMethod.apply(instanceObj, arguments); } } return proxyObj; }; MyClass.prototype = { _myPrivateMethod: function() { ... }, myPublicMethod: function() { ... } }; The nice thing is that the proxy creation can be automated, if we define a convention for naming the protected methods. I created a little library that does exactly this: http://idya.github.com/oolib/ jquerynode.jsnpmjsdom 4 0 回答 0 Related 1 php - Authorize.net CIM - 为什么 API 用户名无效或不存在 1 web-services - API 限制最佳实践 1 php - 使用 codeigniter 进行表单编辑 1 symfony - Fosuser symfony2 的凭据错误 0 java - 通过 javax.sound.midi.Sequencer 播放 MIDI 间歇性暂停 1 python - 需要在 Amazon S3 上调整和替换数百万张图像 1 php - 在关联的数组中查找和替换 1 xml - 在安装了 xampp 的 Wordpress 上导入 XML 1 asp.net-mvc-4 - Ninject InRequestScope 绑定对象不保持在 AuthenticationManager 执行期间定义的状态 4 c - 指针表达式：**ptr++、**++*ptr 和 ++**ptr 使用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13557969
> 
> 赞同：3
> 
> 时间：
> 
> 标签：jquery, node.js, npm, jsdom

I am attempting to make a simple nodejs client that will eventually crawl a given reddit users profile history. Right now i am trying to use the jsdom module to extract the URL for the next page of results on a given users profile.

I am currently working in ubuntu 12.10 and my versions of npm and nodejs are current.

Here is the code that i have so far. I will include the error message below.

```
var http = require('http'),
    jsdom = require('jsdom');

//object containing http.request options
//path accepts a username via process.argv[2]
var options = {
    host: 'www.reddit.com',
    path: '/user/' + process.argv[2]
};

//getPage requests the page for a given user
function getPage() {

    var req = http.request(options, function(response){
        response.setEncoding('utf8');

        response.on('data', function(rawHTML){
            // console.log(data);
            setNextPage(rawHTML);
        });
        response.on('error', function(error){
            console.log(error);
        });
        response.on('end', function(){
            console.log('Response complete');
        });
    });

    req.end();
}

//the setNextPage function combs the rawHTML sent to it,
//extracting the URL for the next page of a users history

function setNextPage(rawHTML) {
    jsdom.env(
        rawHTML,
        ["http://code.jquery.com/jquery.js"],
        function(errors, window) {
            var nextPageURL = window.$(".nextprev > a").attr("href");
            console.log('URL for the next page is: ' + nextPageURL);
        }
    );
}

getPage(); 
```

Now for the error message that i am getting after running the client.

```
/home/stephen/Desktop/getKarma/app.js:38
            var nextPageURL = window.$('.nextprev > a').attr("href");
                                     ^
TypeError: Object #<Object> has no method '$'
    at /home/stephen/Desktop/getKarma/app.js:38:29
    at exports.env.exports.jsdom.env.scriptComplete (/home/stephen/Desktop/getKarma/node_modules/jsdom/lib/jsdom.js:205:39)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

# android - How to position splash screen logo on android app

> ID：13557971
> 
> 赞同：0
> 
> 时间：2012-11-26T02:41:21.880
> 
> 标签：android, xml, webview

I am creating a webview app that has a splash screen load everytime the website is loading. I would like to make it that the logo is centered and above the progress bar always, regardless if the user rotates the screen or not. My problem is that everytime i get the position perfect on the veritical view, the progress bar will be ontop of the logo when u go to horizontal view. I would like the progress bar in the middle, and the logo about 20dp above the progress bar. Any help!! :) this is my code below:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
a:layout_width="wrap_content"
a:layout_height="wrap_content"
a:background="#ffffff"
a:gravity="top"
a:orientation="vertical" >

<WebView
a:id="@+id/webView1"
a:layout_width="fill_parent"
a:layout_height="fill_parent" />

<ImageView
a:id="@+id/imageView1"
a:layout_width="wrap_content"
a:layout_height="wrap_content"
a:layout_centerHorizontal="true"
a:layout_marginTop="50dp"
a:scaleType="centerInside"
a:src="@drawable/logo" />

<ProgressBar
a:id="@+id/progressBar1"
a:layout_width="wrap_content"
a:layout_height="wrap_content"
a:layout_alignTop="@drawable/logo"
a:layout_below="@drawable/logo"
a:layout_centerHorizontal="true"
a:layout_centerVertical="true" />

<Button
a:id="@+id/buttonBack"
a:layout_width="wrap_content"
a:layout_height="wrap_content"
a:layout_alignParentBottom="true"
a:layout_alignParentRight="true"
a:fadingEdge="horizontal|none"
a:onClick="backActivity"
a:text="Back" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:54:27.823

当您尝试更改方向时，android 操作系统会重新启动活动。所以如果你想处理方向，你必须先检查方向。

这是一个示例代码..可能对您有帮助..

[Android中屏幕方向改变时切换布局][1]

[http://www.southparksystems.com/devzilla/2010/3/3/switching-layouts-when-screen-orientation-changes-in-android.html](http://www.southparksystems.com/devzilla/2010/3/3/switching-layouts-when-screen-orientation-changes-in-android.html)

# xcode - Opencv相机姿态估计

> ID：13557972
> 
> 赞同：1
> 
> 时间：2012-11-26T02:41:34.673
> 
> 标签：xcode, opencv, camera

我目前正在做一个项目，该项目需要我使用 opencv 库找到相机的姿势。我正在开发 iPod，目前正在获取视频输入，并使用 ORB 查找关键点和描述符，并使用 BruteForceMatcher 从准实时的两帧中查找匹配点（到目前为止，它的高度未优化）。我不确定这是否有必要，但我也过滤了匹配项，因此只匹配映射两种方式的匹配项，即 k->k1 和 k1->k

我有我正在使用的相机的内在参数以及 2D 关键点。从这里我希望找到相机的位置（我假设这些是旋转和平移的外部参数）。

尽管我浏览了许多教程，但其中很多内容让我有些不知所措，我需要一些指导来了解哪种方法可以奏效以及解释。大多数教程都使用了一个正方形的设置参考点，但是除了从框架中拉出的关键点之外，我没有其他标记可以使用。

据我了解，步骤是：

a) 找到对应的关键点

b) 识别基本矩阵

c) 估计基本矩阵

d) 将基本矩阵分解为旋转和平移向量

但是，超出步骤a）我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:12:14.593

从您的陈述中，我了解到您已经获得了一组 2D 对应关系，您可以将其输入 cvFindFundamentalMat。这找到了与这两个观点相关的基本矩阵。也就是说，对于camera-1中的每个点p和camera-2中的对应点p'，p'Fp = 0。计算的基本矩阵可以进一步传递给opencv中的ComputeCorrespondEpilines函数，该函数找到与指定点对应的核线。它也可以传递给 StereoRectifyUncalibrated 函数来计算校正变换。在那里，您可以获得两个相机坐标系之间的旋转和平移（最多缩放）。

基本矩阵是与校准相机有关的度量对象，而基本矩阵描述了射影几何更一般和基本术语中的对应关系，因此我认为您不需要基本矩阵。基本矩阵中包含的所有信息. 此外，在不知道相机的内在参数及其在空间中的相对位置的情况下计算校正变换。

如果您没有使用棋盘校准模式，而是使用通用对象或图像，那么您是正确的，您需要手动或使用强大的特征提取器和匹配器 ORB、MSER、SURF、SIFT、FAST 找到对应关系

[此外，我建议在这里](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#stereorectifyuncalibrated)参考 opencv 文档，希望对您有所帮助。

# controller - 控制器的单个实例不能用于处理多个请求 - Autofac

> ID：13557973
> 
> 赞同：1
> 
> 时间：2012-11-26T02:41:39.180
> 
> 标签：controller, asp.net-mvc-4, autofac, requestfactory

我`Autofac.ContainerBuilder`在我的 ASP.Net MVC 4 应用程序中使用，这给默认控制器生成多个实例带来了问题。

我试着这样处理

```
 builder.RegisterType<AccountController>().As<IController>().PreserveExistingDefaults(); 
```

但没有用。

代码

```
protected void Application_Start()
    {

      var dataPath = "~/App_Data/" + ConfigurationManager.AppSettings["Blog_Site"];

        var builder = new ContainerBuilder();

        builder.RegisterType<ExtensibleActionInvoker>().As<IActionInvoker>().InstancePerHttpRequest();
        builder.RegisterControllers(Assembly.GetExecutingAssembly()).InjectActionInvoker().InstancePerHttpRequest();

        builder.RegisterModelBinders(Assembly.GetExecutingAssembly());
        builder.RegisterType<JsonRepository>().As<IRepository>().InstancePerLifetimeScope().WithParameter("dataPath", HttpContext.Current.Server.MapPath(dataPath));
        builder.RegisterType<ConfigService>().As<IConfigService>().InstancePerLifetimeScope();
        builder.RegisterType<EntryService>().As<IEntryService>().InstancePerLifetimeScope();
        builder.RegisterType<UserService>().As<IUserService>().InstancePerLifetimeScope();
        builder.RegisterType<MessageService>().As<IMessageService>().InstancePerLifetimeScope();
        builder.RegisterType<CloudService>().As<ICloudService>().InstancePerLifetimeScope();
        builder.RegisterType<Services>().As<IServices>().InstancePerLifetimeScope();

        _containerProvider = new ContainerProvider(builder.Build());

        ControllerBuilder.Current.SetControllerFactory(new AutofacControllerFactory(ContainerProvider));

        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(System.Web.Optimization.BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        HtmlHelper.ClientValidationEnabled = true;
        HtmlHelper.UnobtrusiveJavaScriptEnabled = true;

        // Quartz.NET scheduler
        ISchedulerFactory factory = new StdSchedulerFactory();
        var scheduler = factory.GetScheduler();
        scheduler.JobFactory = new AutofacJobFactory(ContainerProvider);
        scheduler.Start();
    } 
```

当我尝试访问默认控制器**帐户/管理**时，出现以下错误。

这就是视图的调用方式

```
 @Html.Action("RemoveExternalLogins")

    <h3>Add an external login</h3>
    @Html.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl }) 
```

控制器

```
 public ActionResult Manage(ManageMessageId? message)
        {
            ViewBag.StatusMessage =
                message == ManageMessageId.ChangePasswordSuccess ? "Your password has been changed."
                : message == ManageMessageId.SetPasswordSuccess ? "Your password has been set."
                : message == ManageMessageId.RemoveLoginSuccess ? "The external login was removed."
                : "";
            ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));
            ViewBag.ReturnUrl = Url.Action("Manage");
            return View();
        } 
```

错误信息

```
 A single instance of controller 'MVC.Controllers.AccountController' cannot be used to handle multiple requests. If a custom controller factory is in use, make sure that it creates a new instance of the controller for each request. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T16:08:31.633

这成功了

```
builder.RegisterType<AccountController>().InstancePerDependency(); 
```

# c++ - 分数结构数组

> ID：13557974
> 
> 赞同：2
> 
> 时间：2012-11-26T02:41:42.397
> 
> 标签：c++, struct

我正在做一项学校作业，其中一部分让我有点卡住了。我需要让用户根据需要输入尽可能多的分数，直到为分子输入 0，并将这些分数保存在我创建的结构中。

我试图让我们 strtok 将用于存储用户输入的 c 字符串按空格，然后按“/”，但我非常卡住，无法获得任何正确的输出（下面的代码是 main( ) 它有一个运行时错误，并且第二个 for 循环显然无法将任何适当的东西分配给 den)。

实现这一目标的最简单方法是什么。

```
#include <iostream>
#include <stdio.h>
#include <string>
using namespace std;
struct Fraction 
{
    int num, den;
};
int main()
{
    Fraction* fractions[100];
    char s[100] ;
    cout << "Enter fractions (end by entering a 0): ";
    cin >> s;
    const char* p;
    int count = 0;

    for (p = strtok( s, " " );  p;  p = strtok( NULL, "," ))
    {
        const char* frac = p;
        for (frac = strtok( s, " " );  frac;  frac = strtok( NULL, "/" ))
        {
            fractions[count]->num = (int)frac;
        count++;    
        }
    }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:46:23.703

第**一个（运行时）错误**是因为
`Fraction* fractions[100];`

这是一个指向 Fraction 对象的指针数组。但是 Fraction 对象本身永远不会被创建/初始化。

这会导致您的分段错误`fractions[count]->num = (int)frac;`

您可以通过多种方式解决此问题。
**1.**
`Fraction fractions[100];`正如另一个答案所建议的那样。
最简单的。`->`只有其他的改变`.`是改变`fractions[count]->num = (int)frac;`

如果您想提高效率并仅根据需要创建尽可能多的对象，那么有两种方法可以实现。
**2个。**
`Fraction* fractions[100] = null;`
`fractions[count] = new Fraction(atoi(frac));`
您在堆上分配，因此需要在`delete`完成后使用的每个对象

**2 乙。**
`std::vector<Fraction> fractions;` `fractions.push_back(Fraction(atoi(frac)));` 更多的 C++ -ish 选择。[Vector](http://www.cplusplus.com/reference/vector/vector/)是（简单地说）一个数组，它会根据需要自动变大，因此不需要预先设置最大大小。由于您正在制作对象的矢量，因此您也不需要`delete`它们。

* * *

你的**第二个**错误是`(int)frac;`. 相信你想要`atoi(frac)`。前者会给你你不想要的字符的指针地址，而后者会正确地将字符串解析成一个数字

* * *

我认为您不需要内部循环（对于基本分数）。只是下面应该做的。假设用户输入的格式是`,<space><num>/<den><space>,`. 否则请谨慎使用 strtok，因为它会修改输入字符串。**这**甚至可能是您的代码的问题..（编辑）为了安全起见，删除了嵌套的 strtok 调用。

```
fractions.push_back(Fraction(atoi(strtok(NULL,"/"),atoi(strtok(NULL," ")))) 
```

**编辑**
@Xymotech 的输入代码更加简洁，也修正了对`cin`. 你可以按照他的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T02:46:35.540

你不想

```
Fraction* fractions[100]; 
```

你只想

```
Fraction fractions[100]; 
```

第一个是指向 s 的指针数组，*第二*`Fractions`个只是`Fractions`. 您可能遇到的问题是您没有初始化指针。

更好的方法可能是使用 a`std::vector<Fraction>`来存储您`Fraction`的 s。然后，您可以动态添加到它，它可以存储`Fraction`您需要的任意数量的 s。

* * *

您遇到的另一个错误是您读取值的方式。你打电话时

```
cin >> s; 
```

它不会读取整行，只有一个标记。此外，您只需要设置分数的分子。因此，您有两个选择：

1.  使用`getline`, 读取整行，然后从那里解析。

2.  只需`cin >>`更有效地使用，并执行以下操作：

-

```
while (cin >> s)
{
    char* frac = s;

    if (!strcmp(s, "0")) break;

    char* num = strtok( frac, "/" );
    char* denom = strtok( NULL, "/");

    fractions[count].num = atoi(num);
    fractions[count].den = atoi(denom);
} 
```

# php - 下拉 PHP YII 框架

> ID：13557976
> 
> 赞同：0
> 
> 时间：2012-11-26T02:42:05.763
> 
> 标签：php, yii, html-select

我想在下拉菜单中显示数据。但我的脚本有一些问题。我的脚本可能运行不好。无法显示数据。当这个脚本在执行时，我的下拉列表是空白的

这是我的代码示例：

```
 <div class="row">
    <?php echo $form->labelEx($model,'freightforwardercountry'); ?>
    <?php echo $form->dropDownList($model,'freightforwardercountry',
    CHtml::listData(TbCountry::model()->findAll(),'countryid','country'),
    array(
    'onchange'=>'$("#TbFreightForwarder_freightforwardercity").html("<option></option>");
    $("#TbFreightForwarder_freightforwarderstate").html("<option></option>");',
    'prompt'=>'',
    'value'=>'',
    'ajax'=>array(
    'type'=>'POST',
    'url'=>CController::createUrl('freightforwarder/liststate'),
    'update'=>'#TbFreightForwarder_freightforwarderstate',
    'data'=>array('countryid'=>'js:this.value'),
    )
    )
    ); ?>

    <?php echo $form->error($model,'freightforwardercountry'); ?>
    </div>

    <div class="row">
    <?php echo $form->labelEx($model,'freightforwarderstate'); ?>
    <?php echo $form->dropDownList($model,'freightforwarderstate',
    $model->listState($model->freightforwardercountry),
    array(
    'prompt'=>'',
    'value'=>'',
    'ajax'=>array(
    'type'=>'POST',
    'url'=>CController::createUrl('freightForwarder/listcity'),
    'update'=>'#TbFreightForwarder_freightforwardercity',
    'data'=>array('stateid'=>'js:this.value'),
    )
    )
    ); ?>
    <?php echo $form->error($model,'freightforwarderstate'); ?>
    </div>

    <div class="row">
    <?php echo $form->labelEx($model,'freightforwardercity'); ?>
    <?php echo $form->dropDownList($model,'freightforwardercity',$model->listCity($model->freightforwarderstate),array('prompt'=>'','value'=>'')); ?>
    <?php echo $form->error($model,'freightforwardercity'); ?>
    </div> 
```

# java - 为什么 Eclipse 显示“找不到源”错误？

> ID：13557977
> 
> 赞同：0
> 
> 时间：2012-11-26T02:42:05.687
> 
> 标签：java, eclipse

这是它的样子：

![在此处输入图像描述](../Images/baaf8dc2114aed7d260f7043fbabfc2f.png)

这是我的代码：

```
import java.util.*;
import java.io.*;

public class ProcessSchedulingDemo {
    public static void main(String[] args) throws IOException {
        File file = new File("process-schedule.txt");
        Scanner inputFile = new Scanner(file);

        ArrayList<Process> processes = new ArrayList<Process>();

        // Skip past the first line, which is the column headers
        inputFile.nextLine();

        while (inputFile.hasNext()) {
            int processID = Integer.parseInt(inputFile.next());
            int timeUnitsRequired = Integer.parseInt(inputFile.next());
            int priority = Integer.parseInt(inputFile.next());
            int timeOfArrival = Integer.parseInt(inputFile.next());

            // Create and add to process a new process based on the information given
            Process process = new Process(processID, timeUnitsRequired, priority, timeOfArrival);
            processes.add(process);
        }

        Scanner keyboard = new Scanner(System.in);

        System.out.print("How much time does the CPU hold onto each process? ");
        int holdTime = keyboard.nextInt();

        if (holdTime <= 0) {
            while (holdTime <= 0) {
                System.out.print("Value must be greater than 0\. Please input new value: ");
                holdTime = keyboard.nextInt();
            }
        }

        Heap<Process> processHeap = new Heap<Process>();

        // Holds a particular process being processed
        Process[] CPU = new Process[1];
        CPU[0] = null;

        int turn = 1;

        int timeSlices = 0;

        do {
            // Check if the list of processes has processes that should be added at the current turn
            for (int i = processes.size() - 1; i >= 0; i--) {
                if (processes.get(i).getTimeOfArrival() == turn) {
                    processHeap.add(processes.remove(i));
                }
            }

            // Print current standing of the processHeap at the beginning of the turn
            processHeap.enumerate();

            // If there currently isn't an item being processed by the CPU
            if (CPU[0] == null) {
                CPU[0] = processHeap.deleteMax();
                timeSlices = holdTime;
                System.out.println("got to cpu setting");
            }

            if (CPU[0].getTimeUnitsRequired() == 0 || timeSlices == 0) {
                if (CPU[0].getTimeUnitsRequired() > 0) {
                    processHeap.add(CPU[0]);
                }

                CPU[0] = null; 
            }
            else {
                CPU[0].setTimeUnitsRequired(CPU[0].getTimeUnitsRequired() - 1);
                timeSlices--;

                if (CPU[0].getTimeUnitsRequired() == 0 || timeSlices == 0) {
                    if (CPU[0].getTimeUnitsRequired() > 0) {
                        processHeap.add(CPU[0]);
                    }

                    CPU[0] = null;
                }
            }

            if (CPU[0] != null) {
                System.out.println("-- STATE OF CPU --");
                System.out.println("[" + CPU[0].getProcessID() + ", " + CPU[0].getTimeUnitsRequired() + ", " + CPU[0].getPriority() + "]\n");
            }

            turn++;
        } while (processes.size() != 0 && processHeap.size() != 0);
    }
} 
```

到底是什么原因造成的？每次我保存它都会弹出。啊。（使用 Eclipse）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T02:49:54.870

Scanner 是 Oracle 提供的 Java 运行时库的一部分（如果您使用的是 Oracle JDK）。我认为它应该作为一个名为 src.zip 的文件包含在 JDK 中。您可以单击编辑查找路径按钮并添加此文件。它应该在您的 Java JDK 安装目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:55:50.153

Eclipse 调试与程序实际加载的类一起工作。

您的项目中缺少某些文件安装错误的内容，这导致出现此错误的原因可能有多种，但请查看显示此行为的类所在的位置（查看导航窗格以识别它）。您很可能需要更改项目的构建路径以避免使用此 jar 并让 JVM 使用该项目

您可以使用此链接解决您的问题 - [http://www.vogella.com/articles/Eclipse/article.html#classpath](http://www.vogella.com/articles/Eclipse/article.html#classpath)

请更新您的 java 和 Eclipse。

# algorithm - 为什么贪心硬币找零算法对某些硬币组不起作用？

> ID：13557979
> 
> 赞同：90
> 
> 时间：2012-11-26T02:42:29.090
> 
> 标签：algorithm, greedy, coin-change

我了解硬币找零问题的贪心算法（用尽可能少的硬币支付特定金额）是如何工作的——它总是选择面额最大的硬币，但不超过剩余的总和——并且它总能找到正确的解决方案特定的硬币套装。

但是对于某些硬币组，贪心算法会失败。例如，对于集合`{1, 15, 25}`和总和 30，贪心算法首先选择 25，余数为 5，然后是 5 个 1，总共有 6 个硬币。但是硬币数量最少的解决方案是两次选择 15。

一组硬币必须满足什么条件才能使贪心算法找到所有和的最小解？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-16T10:22:06.010

形成拟阵（[https://en.wikipedia.org/wiki/Matroid](https://en.wikipedia.org/wiki/Matroid)）的集合可用于通过使用贪婪方法来解决硬币更换问题。简而言之，拟阵是满足以下条件的有序对 M = (S,l)：

1.  S 是有限非空集
2.  l 是 S 的一个非空子集族，称为独立子集，使得如果 B->l 且 A 是 B 的子集，则 A -> l
3.  如果 A-> l, B-> l 和 |A| < |B|，则存在某个元素 x-> BA 使得 AU {x} ->l

在我们的硬币兑换问题中，S 是一组所有硬币的降序价值 我们需要通过 S 中的最小硬币数量来达到 V 的值

在我们的例子中，l 是一个包含所有子集的独立集合，使得以下对于每个子集都成立：它们中的值的总和是 <=V

如果我们的集合是拟阵，那么我们的答案是 l 中的最大集合 A，其中没有 x 可以进一步添加

为了检查，我们看看拟阵的性质是否在集合 S = {25,15,1} 其中 V = 30 现在，在 l 中有两个子集：A = {25} 和 B= {15,15} 因为|一个| < |B|，则存在某个元素 x-> BA 使得 AU {x} ->l (根据 3) 所以，{25,15} 应该属于 l，但它是矛盾的，因为 25+15>30

所以，S 不是拟阵，因此贪婪的方法对它不起作用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-11-03T16:40:56.907

在任何情况下，如果没有硬币的价值，当添加到最低面额时，低于立即小于它的面额的两倍，贪心算法就会起作用。

即 {1,2,3} 有效，因为 [1,3] 和 [2,2] 添加到相同的值，但是 {1, 15, 25} 无效，因为（对于更改 30）15+15>25 +1

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-14T05:22:29.500

如果贪心算法给出的硬币数量对于所有数量都是最优的，那么硬币系统就是规范的。

[本文提供了一种 O(n^3) 算法来确定硬币系统是否规范，其中 n 是不同种类硬币的数量。](http://graal.ens-lyon.fr/~abenoit/algo09/coins2.pdf)

对于非规范硬币系统，`c`贪心算法产生的硬币数量是次优的；`c`称为反例。如果最小的反例大于最大的单个硬币，则硬币系统是紧密的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-15T16:11:55.937

这是一个反复出现的问题。给定一组硬币`{Cn, Cn-1, . . ., 1}`，对于`1 <= k <= n, Ck > Ck-1`，如果 Ck > Ck-1 + Ck-2 ，贪婪算法将产生最小数量的硬币，对于价值`V=(Ck + Ck-1) - 1`，将贪婪算法应用于硬币子集`{Ck, Ck-1, . . ., 1}`，其中`Ck <= V`，导致更少硬币比将贪心算法应用于硬币子集所产生的数字`{Ck-1, Ck-2, . . ., 1}`。

测试很简单：对于 `1 <= k <= n 测试贪心算法在 Ck + Ck-1 - 1 的值下产生的硬币数量。对硬币集 {Ck, Ck-1, . . ., 1} 和 {Ck-1, Ck-2, . . ., 1}. 如果对于任何 k，后者产生的硬币比前者少，则贪心算法将不适用于该硬币组。

例如，当 n=4 时，考虑硬币集合 {C4, C3, C2, 1} = {50,25,10,1}。从 k=n=4 开始，然后 V = Cn + Cn-1 - 1 = 50+25-1 = 74 作为测试值。对于 V=74，G{50,25,10,1} = 7 个硬币。G{25, 10, 1} = 8 个硬币。到目前为止，一切都很好。现在让 k=3。那么V=25+10-1=34。G{25, 10, 1} = 10 个硬币，但 G{10, 1} = 7 个硬币。所以，我们知道贪心算法不会最小化硬币集合 {50,25,10,1} 的硬币数量。另一方面，如果我们在这个硬币组中添加镍，G{25, 10, 5, 1} = 6 和 G{10, 5, 1} = 7。同样，对于 V=10+5-1= 14，我们得到 G{10, 5, 1} = 5，但 G{5,1} = 6。所以，我们知道，Greedy 适用于 {50,25,10,5,1}。

这就引出了一个问题：硬币的面额应该是什么，满足贪婪算法，这会导致从 1 到 100 的任何值的硬币的最小最坏情况数？答案很简单：100 个硬币，每个硬币的值从 1 到 100 不同。可以说这不是很有用，因为它在每笔交易中线性搜索硬币。更不用说铸造这么多不同面额并跟踪它们的费用了。

现在，如果我们想首先最小化面额的数量，而其次最小化由 Greedy 产生的从 1 到 100 的任何值的硬币的最终数量，那么面额为 2 的硬币：{64,32,16,8,4 , 2, 1} 对于任何值 1:100（值小于十进制 100 的 7 位数字中的最大 1 数），最多产生 6 个硬币。但这需要 7 个面额的硬币。五个面额 {50, 25, 10, 5, 1} 的最坏情况是 8，这发生在 V=94 和 V=99。3 {1, 3, 9, 27, 81} 次方的硬币也只需要 5 个面额即可被 Greedy 使用，但在最坏的情况下也会产生 8 个硬币的值分别为 62 和 80。最后，使用任何 5 个面额{64, 32, 16, 8, 4, 2, 1} 的子集，不能排除“1”，并且满足贪婪，也将导致最多 8 个硬币。所以存在线性权衡。将面额的数量从 5 增加到 7 会分别将表示 1 到 100 之间的任何值所需的最大硬币数量从 8 减少到 6。

另一方面，如果你想尽量减少买卖双方**交换**硬币的数量，假设每个人的口袋里至少有一个每种面额的硬币，那么这个问题相当于平衡任何硬币所需的最小重量。重量从 1 磅到 N 磅。事实证明，如果硬币面额以 3 的幂为单位给出，则购买时兑换的硬币数量最少：`{1, 3, 9, 27, . . .}`。

请参阅[https://puzzling.stackexchange.com/questions/186/whats-the-fewest-weights-you-need-to-balance-any-weight-from-1-to-40-pounds](https://puzzling.stackexchange.com/questions/186/whats-the-fewest-weights-you-need-to-balance-any-weight-from-1-to-40-pounds)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-02T20:55:14.003

那么我们真的需要重新表述这个问题......贪婪算法本质上是它试图使用提供的硬币面额获得目标值。您对贪心算法所做的任何更改都只会更改达到目标值的方式。它不考虑使用的最少硬币......为了更好地解决这个问题，不存在安全的移动。较高面额的硬币可能会迅速产生目标价值，但这不是一个安全的举动。示例 {50,47,51,2,9} 获得 100 贪婪的选择是拿最高面额的硬币更快地达到 100.. 51+47+2 很好，但是 50+50 应该可以..

让我们取 {50,47,51,9} 来获得 100 如果它贪婪地选择最高的硬币 51，它需要从集合中得到 49。它不知道这是否可能。它试图达到 100 但它做不到 改变贪婪选择只会改变达到 100 的方式这些类型的问题会创建一组解决方案和决策树分支的形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-16T23:35:00.390

**理论：**

如果贪心算法总是为给定的一组硬币产生一个最佳答案，那么你说这组是*canonical*。

尽可能简洁地陈述[最知名的算法测试 [O(n^3)] 以确定任意一组 n 个硬币是否是规范的：](https://www.sciencedirect.com/science/article/abs/pii/S0167637704000823)

```
[c1,c2,..cn] is canonical iff for all w_ij |G(w_ij)| = |M(w_ij)|, 1 < i <= j <= n 
```

哪里`[c1,c2,...cn]`是按降序排列的硬币面额列表`cn = 1`

`G(x)`表示在输入 上运行贪心算法的硬币向量结果`x`，（返回为的计数`[a1, a2,..., an]`在哪里）`ai``ci`

`M(x)`表示`x`使用最少硬币的硬币向量表示

`|V|`表示硬币向量的大小`V`：向量中硬币的总数

并且是在将其第 'th 个硬币增加 1 并将其所有硬币计数从到归零之后`w_ij`产生的硬币向量的评估值。`G(c_(i-1) - 1)``j``j+1``n`

**实现（JavaScript）：**

```
/**
 * Check if coins can be used greedily to optimally solve change-making problem
 * coins: [c1, c2, c3...] : sorted descending with cn = 1
 * return: [optimal?, minimalCounterExample | null, greedySubOptimal | null] */
function greedyIsOptimal(coins) {
  for (let i = 1; i < coins.length; i++) {
    greedyVector = makeChangeGreedy(coins, coins[i - 1] - 1)
    for (let j = i; j < coins.length; j++) {
      let [minimalCoins, w_ij] = getMinimalCoins(coins, j, greedyVector)
      let greedyCoins = makeChangeGreedy(coins, w_ij)
      if (coinCount(minimalCoins) < coinCount(greedyCoins))
        return [false, minimalCoins, greedyCoins]
    }
  }
  return [true, null, null]
}

// coins [c1, c2, c3...] sorted descending with cn = 1 => greedy coinVector for amount
function makeChangeGreedy(coins, amount) {
  return coins.map(c => {
    let numCoins = Math.floor(amount / c);
    amount %= c
    return numCoins;
  })
}
// generate a potential counter-example in terms of its coinVector and total amount of change
function getMinimalCoins(coins, j, greedyVector) {
  minimalCoins = greedyVector.slice();
  minimalCoins[j - 1] += 1
  for (let k = j; k < coins.length; k++) minimalCoins[k] = 0
  return [minimalCoins, evaluateCoinVector(coins, minimalCoins)]
}
// return the total amount of change for coinVector
const evaluateCoinVector = (coins, coinVector) =>
  coins.reduce((change, c, i) => change + c * coinVector[i], 0)

// return number of coins in coinVector
const coinCount = (coinVector) =>
  coinVector.reduce((count, a) => count + a, 0)

/* Testing */
let someFailed = false;
function test(coins, expect) {
  console.log(`testing ${coins}`)
  let [optimal, minimal, greedy] = greedyIsOptimal(coins)
  if (optimal != expect) (someFailed = true) && console.error(`expected optimal=${expect}
  optimal: ${optimal}, amt:${evaluateCoinVector(coins, minimal)}, min: ${minimal}, greedy: ${greedy}`)
}
// canonical examples
test([25, 10, 5, 1], true) // USA
test([240, 60, 24, 12, 6, 3, 1], true) // Pound Sterling - 30
test([240, 60, 30, 12, 6, 3, 1], true) // Pound Sterling - 24
test([16, 8, 4, 2, 1], true) // Powers of 2
test([5, 3, 1], true) // Simple case

// non-canonical examples
test([240, 60, 30, 24, 12, 6, 3, 1], false) // Pound Sterling
test([25, 12, 10, 5, 1], false) // USA + 12c
test([25, 10, 1], false) // USA - nickel
test([4, 3, 1], false) // Simple cases
test([6, 5, 1], false)

console.log(someFailed ? "test(s) failed" : "All tests passed.")
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-09T15:15:24.730

今天，我在 Codeforces 上解决了类似的问题（链接将在最后提供）。我的结论是，要通过贪心算法解决硬币找零问题，它应该满足以下条件：-

1.按升序排序硬币值时，所有大于当前元素的值都应能被当前元素整除。

例如硬币 = {1, 5, 10, 20, 100}，这将给出正确答案，因为 {5,10,20,100} 都可以被 1 整除，{10,20, 100} 都可以被 5 整除，{ 20,100} 都可以被 10 整除，{100} 都可以被 20 整除。

希望这能提供一些想法。

996 A - 中彩票 [https://codeforces.com/blog/entry/60217](https://codeforces.com/blog/entry/60217)

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2012-11-26T08:47:35.323

一个容易记住的例子是任何一组硬币，如果它们按升序排序并且你有：

```
coin[0] = 1
coin[i+1] >= 2 * coin[i], for all i = 0 .. N-1 in coin[N] 
```

然后使用这种硬币的贪心算法将起作用。

根据您查询的范围，可能会有更优化的（就所需硬币数量而言）分配。例如，如果您正在考虑范围 (6..8) 并且您有硬币 <6, 7, 8> 而不是 <1, 2, 4, 8>。

在 N+ 上完成的最有效的硬币分配是在上述规则集相等的情况下，给你硬币 1、2、4、8 ...；这仅仅是任何数字的二进制表示。从某种意义上说，碱基之间的对话本身就是一种贪心算法。

Max Rabkin 在本次讨论中提供了关于 >= 2N 不等式的证明：http: [//olympiad.cs.uct.ac.za/old/camp0_2008/day1_camp0_2008_discussions.pdf](http://olympiad.cs.uct.ac.za/old/camp0_2008/day1_camp0_2008_discussions.pdf)

# python - 使用 biopython 从 entrez 获取基因序列

> ID：13557981
> 
> 赞同：3
> 
> 时间：2012-11-26T02:42:32.290
> 
> 标签：python, biopython, ncbi

这就是我想做的。我有一个基因名称列表，例如：[ITGB1, RELA, NFKBIA]

在 biopython 和 entrez API 教程中查找帮助我想出了这个：

```
x = ['ITGB1', 'RELA', 'NFKBIA']
for item in x:
    handle = Entrez.efetch(db="nucleotide", id=item ,rettype="gb")
    record = handle.read()
    out_handle = open('genes/'+item+'.xml', 'w') #to create a file with gene name
    out_handle.write(record)
    out_handle.close 
```

但这不断出错。我发现如果 id 是一个数字 id（尽管你必须将它变成一个字符串才能使用，'186972394' 所以：

```
handle = Entrez.efetch(db="nucleotide", id='186972394' ,rettype="gb") 
```

这让我得到了我想要的信息，其中包括序列。

**所以现在问题：** 我如何搜索基因名称（因为我没有 id 编号）或轻松地将我的基因名称转换为 id 以获得我拥有的基因列表的序列。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T04:33:36.600

首先是基因名称，例如：ATK1

```
item = 'ATK1'
animal = 'Homo sapien' 
search_string = item+"[Gene] AND "+animal+"[Organism] AND mRNA[Filter] AND RefSeq[Filter]" 
```

现在我们有一个搜索字符串来搜索 id

```
handle = Entrez.esearch(db="nucleotide", term=search_string)
record = Entrez.read(handleA)
ids = record['IdList'] 
```

如果没有发现它是 []，这将返回 ids 作为列表。现在让我们假设它返回列表中的 1 项。

```
seq_id = ids[0] #you must implement an if to deal with <0 or >1 cases
handle = Entrez.efetch(db="nucleotide", id=seq_id, rettype="fasta", retmode="text")
record = handleA.read() 
```

这将为您提供一个 fasta 字符串，您可以将其保存到文件中

```
out_handle = open('myfasta.fasta', 'w')
out_handle.write(record.rstrip('\n')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:58:16.530

查看本教程的第 8.3 节，似乎有一个函数可以让您搜索术语并获取相应的 ID（我对这个库一无所知，对生物学更是一无所知，所以这可能是完全错误的 :)） .

```
>>> handle = Entrez.esearch(db="nucleotide",term="Cypripedioideae[Orgn] AND matK[Gene]")
>>> record = Entrez.read(handle)
>>> record["Count"]
'25'
>>> record["IdList"]
['126789333', '37222967', '37222966', '37222965', ..., '61585492'] 
```

据我所知，指的是函数`id`返回的实际 ID 号（在响应的属性中）。但是，如果您使用关键字，则可以改为运行搜索并获取匹配项的 ID。完全未经测试，但假设搜索支持布尔运算符（看起来很有效），您可以尝试使用如下查询：`esearch``IdList``term``AND`

```
>>> handle = Entrez.esearch(db="nucleotide",term="ITGB1[Gene] OR RELA[Gene] OR NFKBIA[Gene]")
>>> record = Entrez.read(handle)
>>> record["IdList"]
# Hopefully your ids here... 
```

要生成要插入的术语，您可以执行以下操作：

```
In [1]: l = ['ITGB1', 'RELA', 'NFKBIA']

In [2]: ' OR '.join('%s[Gene]' % i for i in l)
Out[2]: 'ITGB1[Gene] OR RELA[Gene] OR NFKBIA[Gene]' 
```

然后`record["IdList"]`可以使用以下内容将其转换为逗号分隔的字符串并传递给`id`原始查询中的参数：

```
In [3]: r = ['1234', '5678', '91011']

In [4]: ids = ','.join(r)

In [5]: ids
Out[5]: '1234,5678,91011' 
```

# css - LESS 编译错误：无法调用 null 的方法 'charAt'

> ID：13557984
> 
> 赞同：2
> 
> 时间：2012-11-26T02:42:43.923
> 
> 标签：css, compilation, less

我收到一个奇怪的 LESS 编译错误，消息如下：

> non_object_property_callError：无法在 /Volumes/Windows/Program Files (x86)/Ampps/www/custom-site/templates/custom-template/less/style.less:null:-1 1 @import 中调用 null 方法“charAt” icomoon/icomoon.less";

导致错误的代码如下：

```
@import "imports/variables.less";
@import "icomoon/icomoon.less";

@import "mixins.less"; 
```

我尝试只编译这两个文件，一切顺利。所以这告诉我，错误在于 LESS 准确报告错误来源的能力。在 nodejs 编译器上测试，返回相同的错误。对所有其他编译器进行测试仍然会出现此错误...

为了尝试找到错误的根源，我很自然地在 import 调用后将 style.less 文件中的剩余代码注释掉了，但错误仍然存​​在。这里的问题是我不知道错误在哪里，尽管我怀疑它在调用导入之后的某个地方。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:11:26.357

说“少是不能报告确切的问题”实际上只是有道理。

确切的情况是，less 编译器无法编译您的 less 代码，因为其中存在问题，因此编译器触发其错误处理以显示错误所在。但是，这样做会发生异常。因此，您只会看到相同的异常，这基本上是由 less 编译器中的错误引起的。

有关详细说明，请参阅修复问题的拉取请求 (https://github.com/cloudhead/less.js/pull/703)。

那么，这里有哪些选项：

*   如果您无法切换到较新的 less 版本，请继续尝试通过注释掉部分 less 代码来查找问题。我知道，这根本不好玩。我也不得不和这个一起去一段时间......
*   如果你可以升级到更新版本的lessc，试试这个，你会得到很好的错误处理，如下面的例子所示。

less 编译器的错误示例：

```
$ lessc style.less > style.css
NameError: variable @bla is undefined in assets/less/included.less:3:20
2   background: url(../img/wall-texture.png);
3   background-color: @bla;
4 } 
```

# android - 在 Android 中保存游戏状态的最有效方法是什么？

> ID：13557989
> 
> 赞同：0
> 
> 时间：2012-11-26T02:43:51.147
> 
> 标签：android

我有一个游戏应用程序，可以在游戏板活动的 onPause() 函数中保存游戏状态。

这似乎非常浪费，因为用户可能会短暂切换到另一个应用程序并稍后返回播放。但是如果他们永远不会回来，我的应用程序可能会被垃圾收集并且状态会丢失，所以我保存它以防万一。

我认为每次读取状态都会保存很多次。当我知道他们要离开应用程序时，有没有更好的方法来懒惰地保存状态？

有人知道我可以使用的有保证的回调吗？例如，如果我将保存状态代码移动到 onDestroy()，它可能永远不会被调用。

有没有办法利用 onSaveInstanceState() 来提供帮助？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:47:19.053

当用户切换方向和用户离开时调用 onPause()。这两种操作都有可能导致数据丢失，因此保存 onPause() 是一个好主意，无论您在做什么（无论是游戏还是应用程序）。

所以不，onPause() 是确保数据持久性的最安全方法。

**编辑** 要回答您的第二个问题， onSavedInstanceState() 并不明确

> 如果调用，此方法将在 onStop() 之前发生。无法保证它会在 onPause() 之前还是之后发生。 [http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle) )

所以对于一个游戏，我会积极地保存玩家的数据，并且会在 onPause() 中这样做。其他一切要么有可能失败，要么与 Activity 生命周期没有直接关系。

# c# - 检查在 OnActionExecuting 中应用了哪些 ActionFilter？

> ID：13557997
> 
> 赞同：0
> 
> 时间：2012-11-26T02:45:32.387
> 
> 标签：c#, asp.net-mvc

如何检查从控制器的 OnActionExecuting 中应用了哪些 ActionFilterAttributes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:57:59.113

也许它可以帮助你：

```
 [HttpGet]
 public ActionResult Index()
 {
      var attributes = Attribute.GetCustomAttributes(typeof(HomeController).GetMember("Index").First());
      return View();
 } 
```

结果应该是这样的：

![在此处输入图像描述](../Images/cf4daf0d300f195c2aa566d55d0d0b45.png)

**更新**

```
var onlyActionFilterAttributesForClass =
                    typeof(HomeController).GetCustomAttributes(true).Where(
                        x => x as ActionFilterAttribute != null);

var onlyActionFilterAttributesForMember = Attribute.GetCustomAttributes(typeof (HomeController).GetMember("Index").First()).
                    Where(
                        x => x as ActionFilterAttribute != null); 
```