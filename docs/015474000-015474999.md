# StackOverflow 问答 15474000-15474999

# haskell - 如何用 Parsec 读取精确的 N 个字符？

> ID：15474016
> 
> 赞同：7
> 
> 时间：2013-03-18T10:01:27.863
> 
> 标签：haskell, parsec

我是 Haskell 和 Parsec 的新手。我希望解析字符串 's:numb:"string";' 的 php-serialize 格式 像

s:12:"123";6789012";

其中 number 是字符数。所以，函数看起来像：

```
newtype PhpString = PhpString String

pString :: GenParser Char st PhpString
pString = do { string "s:"
        ; value1 <- many1 digit
        ; string ":\""
        ; value2 <- takeExactNChars (read value1) 
        ; string "\";"      
        ; return $ PhpString value2
    }
    where 
        takeExactNChars n = ??????? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T11:39:56.880

正如莎拉所提到的，惯用的`parsec`解决方案是使用`count`组合器：

```
newtype PhpString = PhpString String

pString :: Parser PhpString
pString = do
  string "s:"
  value1 <- many1 digit
  string ":\""
  value2 <- count (read value1) 
  string "\";"      
  return $ PhpString value2 
```

如果您对此感兴趣，我们可以更进一步并清理这个解析器以使其更简洁：

```
import Control.Applicative (empty)
import Text.Read

pString :: Parser PhpString
pString = do
  len <- readMaybe <$> (string "s:" *> many1 digit)
  case len of
    Just n -> PhpString <$> string ":\"" *> count n anyChar <* string "\";"
    Nothing -> empty 
```

或者甚至：

```
pString :: Parser PhpString
pString =
  readMaybe <$> (string "s:" *> many1 digit) >>=
    maybe empty $ \n ->
      PhpString <$> string ":\"" *> count n anyChar <* string "\";" 
```

`empty`from`Control.Alternative`使解析器失败，以防`read`失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T10:44:51.060

我会使用`replicateM`Control.Monad 编写它：

```
import Text.ParserCombinators.Parsec
import Control.Monad (replicateM)

pString :: Parser String
pString = do string "s:"
             n <- fmap read (many1 digit)
             string ":\""         -- Bug fix; you weren't picking up the colon
             s <- replicateM n anyChar
             string "\";"
             return s 
```

在 ghci 中测试它：

```
*Main> parse pString "" "s:12:\"123\";6789012\";"
Right "123\";6789012" 
```

# c# - 为值和引用类型定义通用接口类型约束

> ID：15474023
> 
> 赞同：6
> 
> 时间：2013-03-18T10:01:54.817
> 
> 标签：c#, generics, generic-constraints

我在让这个通用约束起作用时遇到了一些麻烦。

我下面有两个接口。

我希望能够将 ICommandHandlers TResult 类型约束为仅使用实现 ICommandResult 的类型，但 ICommandResult 有自己的约束需要提供。ICommandResult 可能会从其 Result 属性返回值或引用类型。我错过了一些明显的东西吗？谢谢。

```
public interface ICommandResult<out TResult>
{
    TResult Result { get; }
}

public interface ICommandHandler<in TCommand, TResult>  where TCommand : ICommand
                                                        where TResult : ICommandResult<????>
{
    TResult Execute( TCommand command );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:10:45.417

您可以将界面更改为此（对我来说看起来更干净）：

```
public interface ICommandHandler<in TCommand, TResult> where TCommand : ICommand
{
    ICommandResult<TResult> Execute( TCommand command );
} 
```

或者您可以将类型参数添加`ICommandResult<TResult>`到您的泛型参数列表中：

```
public interface ICommandHandler<in TCommand, TCommandResult, TResult> 
    where TCommand : ICommand
    where TCommandResult: ICommandResult<TResult>
{
    TCommandResult Execute( TCommand command );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:08:27.810

您可以向 ICommandHandler 添加第三个泛型类型参数：

```
public interface ICommandResult<out TResult>
{
    TResult Result { get; }
}

public interface ICommandHandler<in TCommand, TResult, TResultType>  
                                                        where TCommand : ICommand
                                                        where TResult : ICommandResult<TResultType>
{
    TResult Execute( TCommand command );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:08:46.307

嗯，你的第二个界面不应该更像这样吗？

```
public interface ICommandHandler<in TCommand, ICommandResult<TResult>>
    where TCommand : ICommand
{
    TResult Execute(TCommand command);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:10:43.717

这应该这样做：

```
public interface ICommandHandler<in TCommand, out TResult>  
    where TCommand : ICommand
    where TResult : ICommandResult<TResult>
{
    TResult Execute( TCommand command );
} 
```

# ruby - 模块的子模块列表

> ID：15474024
> 
> 赞同：0
> 
> 时间：2013-03-18T10:01:58.660
> 
> 标签：ruby

我正在使用以下模块创建用于版本控制 Rails 应用程序的 API：

```
Module Api
  Module V1
   Controller goes here
  end
end

Module Api
  Module V2
    Controller goes here
  end
end 
```

我想知道最新的可用版本。我以为我可以通过查看来得到它`Api.constants`，但情况似乎并非如此，因为我得到一个空数组，如下所示：

```
Loading development environment (Rails 3.2.12)
irb(main):001:0> Api
=> Api
irb(main):002:0> Api.constants
=> [] 
```

但是，如果我第一次`Api::V1`直接打电话，它似乎工作：

```
Loading development environment (Rails 3.2.12)
irb(main):001:0> Api
=> Api
irb(main):002:0> Api.constants
=> []
irb(main):003:0> Api::V1
=> Api::V1
irb(main):004:0> Api.constants
=> [:V1] 
```

有没有办法在不提前访问它们的情况下获取所有子模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:03:45.463

这是在工作时自动加载。`Api::V1`在被引用之前不会加载。这就是为什么你在第一种情况下得到空数组的原因。

您可以调整您的应用程序以急切地加载类。在此处查看更多信息：[配置 Rails](http://edgeguides.rubyonrails.org/configuring.html)。

# delphi - Tidhttp 用于多媒体网页的时间太长

> ID：15474025
> 
> 赞同：0
> 
> 时间：2013-03-18T10:01:59.477
> 
> 标签：delphi, http, winsock, indy

Tidhttp.Get() 似乎需要很长时间才能在包含视频等的 url 处返回 html 源。有没有办法可以将其设置为忽略所有图像和视频？我只需要html源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:23:00.443

该组件已经只下载 HTML 源代码。您可以在下载完成后通过查看字符串或流内容来确认。页面上链接的其他资源是通过额外的资源请求下载的，所以如果你只调用`Get`一次，你只会得到一个资源（即主要的 HTML 内容）。

您认为放缓的原因在于其他地方。

# java - 可以使用 Jooq 插入查询吗？

> ID：15474028
> 
> 赞同：1
> 
> 时间：2013-03-18T10:02:16.070
> 
> 标签：java, sql, jooq

我在字符串值中有插入语句，现在我想将其更改为 Jooq 并在 DB 上执行 jooq 是否可能？还是我期待过高？

**我的插入查询：**

```
INSERT INTO ANTIQUES (ID,TYPE,NAME,PRICE) VALUES (21, 01, 'Ottoman', 200.00); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-24T05:38:48.550

以下是上述答案以及 JOOQ 网站上缺少的一些细节。 `create.insertInto(Antiques.ANTIQUES, Antiques.ANTIQUES.ID, Antiques.ANTIQUES.TYPE, Antiques.ANTIQUES.NAME,Antiques.ANTIQUES.PRICE) .values(21, 01, 'Ottoman', 200.00).execute();`

1.  在这里`Antiques.ANTIQUES`，“Antiques”是表包中类的名称，而 ANTIQUES 是在同一类中创建的静态最终对象以供参考。
2.  以同样的方式，您将调用在同一 Antiques 类中创建的列名称以供参考`Antiques.ANTIQUES.TYPE`。
3.  如果不应用执行方法，查询将无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:15:08.710

是的，你可以这样做。它应该与以下代码类似。

```
create.insertInto(ANTIQUES,
    ANTIQUES.ID, ANTIQUES.TYPE, ANTIQUES.NAME, ANTIQUES.PRICE)
    .values(21, 01, 'Ottoman', 200.00); 
```

请查看教程和文档。

1.  [插入语句](http://www.jooq.org/doc/3.0/manual/sql-building/sql-statements/insert-statement/)
2.  [教程：jOOQ 入门](http://www.jooq.org/tutorial.php)

# ruby-on-rails - 设计和开发 A/b 拆分电子邮件活动工具

> ID：15474030
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:02:17.647
> 
> 标签：ruby-on-rails, design-patterns, database-design

我正在开发一种与市场上可用的 A/B 拆分电子邮件活动工具非常相似的工具。我需要一些关于设计方面的指示/建议。主要方面是数据库设计。我不期待这里的解决方案，而只是一种方法。

任何有关数据库设计、设计模式、最佳方法、第三方插件的帮助将不胜感激。

PS 我正在使用 ROR 和 PostgreSql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:10:32.447

我想将一些概念表示为数据库结构：

1.  一封电邮。很简单，但如果必须在那里。我会将两个 A/B 版本存储在同一个表中。
2.  应该是用户。我假设您将实现某种功能，即发送 1x1 像素图像，然后记录加载图像的 IP/电子邮件地址。您想将其存储在表中。
3.  这种情况经常发生 - 用户发送电子邮件，发现错误并再次发送。您需要考虑存储电子邮件及其活动的历史版本。“电子邮件 ID 123 周一发送一次，周二发送一次。” 不要合并这些统计数据，确保它们是分开的。
4.  你会做很多比较。针对成功的活动运行查询可能会很昂贵。对表格中的统计信息进行一些预处理可能是个好主意。
5.  您需要一个活动来跟踪电子邮件及其 A/B 行为。制作一个活动表来对电子邮件活动/结果进行分组。

在设计数据库时，我喜欢找到最核心的对象并围绕它进行设计。在这种情况下，我会提名竞选活动或电子邮件。让一个太阳成为你宇宙中其他一切都围绕着它旋转的太阳，这将帮助你设计其余的部分。

# html - WebSocket 意外响应代码：400，RFC 6455 协议表示响应类似于 HTML？

> ID：15474033
> 
> 赞同：5
> 
> 时间：2013-03-18T10:02:36.643
> 
> 标签：html, google-chrome, safari, websocket

当我通过 WebSocket、Google Chrome、Safari 响应意外响应发送标头时。

这是握手失败时我发回的标头：

HTTP/1.1 404 未找到 Sec-WebSocket-版本：13

这是我回来的错误

WebSocket 连接到“ws://127.0.0.1:8080/”失败：意外响应代码：404

在 RFC 6455 协议中，我阅读浏览器必须像处理普通 HTML 错误一样处理它。但是浏览器给我发回了一个“意外的响应代码：4040”。

我是否需要发回更多标头，还是让我发送 WebSocket 关闭帧（未确认 RFC 6455 协议）。

我以 UTF-8 发送标头。

# javascript - Highcharts - 用图形渲染数据表

> ID：15474035
> 
> 赞同：0
> 
> 时间：2013-03-18T10:02:38.377
> 
> 标签：javascript, jquery, highcharts

我一直在研究一种方法，可以在下表中呈现图表中显示的数据 - 相关图表上方或旁边。

我一直很难，所以我一直在寻找示例，大多数相关示例将我链接到不再支持的 highcharts 论坛，并且某些主题不再存在。

我想知道是否有办法（hack？）显示用图表呈现的表格，包含该图表的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:20:02.893

您可以使用以下方法获取图表中使用的数据：

```
chart.series[0].data 
```

（这将获取第一个系列的数据数组）。

然后，您可以遍历此数据，将每个项目作为“td”添加到表行中。

# parameters - 批处理：比较命令行参数

> ID：15474039
> 
> 赞同：0
> 
> 时间：2013-03-18T10:02:59.137
> 
> 标签：parameters, batch-file

我有一个运行如下的批处理文件：

```
c:\test.bt -abcd 
```

现在在批处理文件中，我有以下代码：

```
if "%1" == "-abcd"
(
   do something
)
else
(
   do something else
) 
```

但它在执行过程中不断给我以下错误：

```
The syntax of the command is incorrect.
if "-abcd" == "-abcd" 
```

有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:18:44.967

我确实相信括号需要在同一行...

从`IF`文档中：

```
 IF EXIST filename. (
     del filename.
 ) ELSE (
     echo filename. missing.
 ) 
```

因此，将其更改为：

```
if "%1" == "-abcd" (
    :: Do something
) else (
    :: Do something
) 
```

此外，您可能应该更改`%1`为`%~1`预先删除任何引号。

# java - Netty 消息处理程序

> ID：15474041
> 
> 赞同：0
> 
> 时间：2013-03-18T10:03:05.290
> 
> 标签：java, netty

我正在使用 netty 构建一个应用程序。在应用程序中，我需要处理传入和传出消息。要求是应用程序将发送的任何消息都应由特定的处理程序处理，并且进入应用程序的任何消息都应由另一个特定的处理程序处理。但是我想在两个处理程序之间交换消息以便能够跟踪发送的消息响应，因为请求消息也将被发送到应用程序。

请任何想法实现这样的要求。这个问题听起来可能不相关，但这就是我得到的，我还不是一个网络极客。我读到的关于它的一点点让我选择了它。

感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T20:16:34.637

如果可以的话，我会将此功能外包给其他层。也许您可以提供更多详细信息，您只需要跟踪消息吗？当您发送消息时，您期望得到响应吗？您能否唯一标识正在发送和接收的消息？

基本上我会有另一个层，当您发送和接收消息时总是会收到通知。

```
 +--------------------------------------------------------------+
 |                                                              |
 |                      MessageLoggerHandler                    |
 |                                                              |
 +--------------------------------------------------------------+
              ^                                    +
              +                                    |
 +---------------------------+      +--------------v------------+
 |                           |      |                           |
 |MessageReaderInboundHandler|      |MesageWriterOutboundHandler|
 |                           |      |                           |
 +---------------------------+      +---------------------------+
              ^                                    +
              +                                    |
 +-------------------------------------------------v------------+
 |                                                              |
 |                          NETTY I/O                           |
 |                                                              |
 +--------------------------------------------------------------+ 
```

# c# - ReactiveCommand 与 CanExecute 的组合标准

> ID：15474043
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:07.807
> 
> 标签：c#, system.reactive, reactiveui

我刚刚开始使用 ReactiveUI。我有以下课程：

```
public class MainViewModel : ReactiveObject, IRoutableViewModel 
{
   private string shareText;

   public ReactiveCollection<SharingAccountViewModel> SelectedAccounts { get; private set; }

   public string ShareText 
   { 
      get { return shareText; }
      set
      {
          this.RaiseAndSetIfChanged(ref shareText, value);
      }
   }

   public IReactiveCommand ShareCommand { get; private set; }
} 
```

我想做的是在以下条件为真时允许命令执行：

1.  ShareText 属性不为 null 或为空
2.  SelectedAccounts 集合至少包含一个值

我尝试了以下方法，但它不起作用，因为连接到命令的按钮永远不会启用：

```
ShareCommand = new ReactiveCommand(this.WhenAny(viewModel => viewModel.ShareText,
  viewModel => viewModel.SelectedAccounts,
  (x, y) => !String.IsNullOrEmpty(x.Value) && y.Value.Count > 0)); 
```

但是，如果我只是检查 ShareText 属性，它可以正常工作：

```
 ShareCommand = new ReactiveCommand(this.WhenAny(viewModel => viewModel.ShareText,
            (x) => !String.IsNullOrEmpty(x.Value))); 
```

我查看了问题[ReactiveUI: Using CanExecute with a ReactiveCommand的答案](https://stackoverflow.com/questions/6754928/reactiveui-using-canexecute-with-a-reactivecommand)

基于此，我尝试了以下方法：

```
var accountsSelected = SelectedAccounts.CollectionCountChanged.Select(count => count > 0);
ShareCommand = new ReactiveCommand(accountsSelected); 
```

这适用于我的执行标准的第二部分，因为一旦从集合中添加或删除项目，连接到命令的按钮就会正确启用或禁用。

我的问题是我现在如何将其与检查 ShareText 属性是否为空或为空相结合？

我不能再使用 this.WhenAny(..) 方法，因为 accountsSelected 变量不是属性。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T01:42:05.990

将 WhenAny 与 an 一起使用`IObservable`有点棘手。这是我的做法：

```
var canShare = Observable.CombineLatest(
    this.WhenAnyObservable(x => x.SelectedAccounts.CollectionCountChanged),
    this.WhenAny(x => x.ShareText, x => x.Value),
    (count, text) => count > 0 && !String.IsNullOrWhitespace(text)); 
```

这样做的好处`WhenAnyObservable`是，如果您决定*重新分配*SelectedAccounts（即`SelectedAccounts = new ReactiveCollection(...);`，上面的语句仍然有效，而上面的语句仍然会监听旧集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:27:46.700

我相信有不同的方法可以获得预期的结果，这只是一种方法。

```
var canExecute = this.ObservableForProperty(v => v.ShareText)
                         .Select(_ => Unit.Default)
                  .Merge(SelectedAccounts.CollectionCountChanged
                                     .Select(_ => Unit.Default))
                  .Select(_ => !String.IsNullOrEmpty(ShareText)
                                    && SelectedAccounts.Any())
                  .StartWith(false);

ShareCommand = new ReactiveCommand(canExecute); 
```

# oracle - 为什么当外键设置为空时执行删除时的oracle触发器

> ID：15474046
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:12.903
> 
> 标签：oracle, triggers, foreign-keys, constraints

我有主表 AAAA 和表 BBBB，它有 FK 到表 AAAA。FK 约束为 ON DELETE SET NULL。还有触发器 ON DELETE ON table BBBB。在此触发器中，从 AAAA 中删除... 为什么在执行从 AAAA 中删除时执行此触发器？（嗯，有递归异常，所以它没有被执行）。

```
CREATE TABLE AAAA
  (
    "AAAA_PK"    NUMBER NOT NULL ENABLE,
    "AAAA_VALUE" NUMBER,
    CONSTRAINT "AAAA_PK" PRIMARY KEY ("AAAA_PK")
  )

CREATE TABLE "BBBB"
 (
  "BBBB_PK" NUMBER NOT NULL ENABLE,
  "BBBB_FK" NUMBER DEFAULT NULL,
  CONSTRAINT "BBBB_PK" PRIMARY KEY ("BBBB_PK"),
  CONSTRAINT "BBBB_AAAA_FK1" FOREIGN KEY ("BBBB_FK") REFERENCES AAAA ("AAAA_PK") ON
  DELETE    SET NULL ENABLE
)

CREATE OR REPLACE TRIGGER TRIG_ON_AFTER_BBBB_DELETE_ALL AFTER
  DELETE ON bbbb 
 BEGIN 
 -- delete from aaaa where ....
 dbms_output.put_line('TRIGGER EXECUTED');
END; 
```

添加一些数据，如 AAAA(1,1) 和 BBBB(1,1)

如果我从 AAAA 中删除行，我希望 BBBB 中的 FK 设置为空，但它失败了

```
ORA-00036: maximum number of recursive SQL levels (50) exceeded
ORA-06512: at TRIG_ON_AFTER_BBBB_DELETE_ALL, line 2
ORA-04088: error during execution of trigger TRIG_ON_AFTER_BBBB_DELETE_ALL 
```

如果我仅使用输出打印触发，它将被执行 - 但我不会从表 BBBB 中删除！

那么为什么要执行触发器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:08:22.797

在我的测试中，删除父表时，AFTER DELETE*和*AFTER UPDATE 触发器都会在子表上触发，这是不直观的。我不确定这是否是预期的行为 - 可能是一个错误，但我不确定。

但是，子表上的行级触发器只会按预期触发 - 即*不会触发 AFTER DELETE FOR EACH ROW 触发器，但**会*触发 AFTER UPDATE FOR EACH ROW 触发器。

无论如何，解决这个问题的方法是使用 AFTER DELETE FOR EACH ROW 触发器而不是语句级触发器。如果需要，在 after 语句触发器中记录要处理的包中的行 ID。

# excel - Excel VBA 循环逻辑

> ID：15474047
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:16.863
> 
> 标签：excel, excel-2007, vba

我的脑袋疼。

第 1 部分，共 2 部分。为丑陋道歉 - 我通常只在需要时学习和使用 VBA，所以我在语言方面的口才有点欠缺。

我一直在尝试想出一种方法来循环遍历我的行并在找到特定值时插入一行 - 不要笑，我还没有完成 - 但我正在寻找的值不一定会*在*那里。

我正在测试的数据是 A 列中的 'Days Old' - 我需要插入一行（上图）并`lCol`使用公式填充 B 列，以便在第 15 天将天数总和返回到前一个目标日， 30、60、90、120、150和`lRow -1`（即 180+）

这里是我使用代码的地方（第 2 部分最后乱七八糟地扔了，不考虑手头的问题）：

```
With Sheets("Output")
lRow = Range("A" & Rows.Count).End(xlUp).Row
lColi = Cells.Find("*", SearchOrder:=xlByColumns, _
    LookIn:=xlValues, SearchDirection:=xlPrevious).Column
lCol = Split(Cells(2, lColi).Address, "$")(1)
For i = lRow To 3 Step -1
If Cells(i, 1).Value = "15" OR _
   Cells(i, 1).Value = "30" OR _
   Cells(i, 1).Value = "60" OR _
   Cells(i, 1).Value = "90" OR _
   Cells(i, 1).Value = "120" OR _
   Cells(i, 1).Address = Range("A" & lRow -1) Then ' Not quite sure on that one yet either..
Rows(i).Select
    Selection.Insert Shift:=xlDown

' Part 2 (Included just in case I delete it from the Module in a rage later tonight)
' Cells(i,1).Offset(-1,0).Select
' Selection.Value = [Date Range. Worrying about this later]
'Cells(i,1).Offset(-1,1).Select
'ActiveCell.FormulaR1C1 = "=SUM(R[-" & n & "]C:R[-1]C)" 
' Where n is somehow the offset to +1 from the previous target.... but again, later.
'ActiveCell.NumberFormat = "0"
'Selection.AutoFill Destination:=ActiveCell.Range("C" & i & ":" & lCol & i), Type:= _
        xlFillDefault 
```

这是我身边*的*刺（编辑：想象一下我有声望点，这是我准备好的excel表的方便图片）：

```
[A] 
.. 
88 
89 
91 
92 
.. 
```

如您所见，我并不*总是*得到需要查找的实际天数（在上面的示例中为 90）的输出。

所以; 有没有一种方法可以遍历我的行并在我的目标日期或最近的前一天插入一个新行（如果它没有出现）？

我确实想知道这是否可能是某种巧妙使用 Case 的候选者（根据[Adam Ralph](https://stackoverflow.com/users/49241/adam-ralph)[在此处](https://stackoverflow.com/questions/601830/for-loop-with-non-contiguous-range)的回答），但放弃了尝试思考到第五个小时试图在家中解决这个问题。

如果您能帮我找到一个优雅的解决方案，我将不胜感激！

[编辑]：

@mehow，完成的结果通常是这样的，91 天以上的行展示了插入行的新数据：

A = "(前一个目标) - (下一个目标-1)" B - lCol = sum(previoustarget:target-1)

```
[A]        [B]        [C]        [D]
...
87                               18
88        1                      2
89                               3
"60 - 89" 5            3        59
91                               1
92                     1         2
... 
```

显然，在这种情况下，我可以朝另一个方向寻找 89 - 但同样，不能保证这将包含在我正在使用的工作表中。

@Glh - 日子总是在上升。

# html - 奇怪的 CSS 语法

> ID：15474052
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:26.097
> 
> 标签：html, css, internet-explorer

我继承了一些大约 7-8 年前编写的代码。
该代码包含一些带有内联 css 的 HTML。

我发现了这样的东西-

```
<span style="color='red'">Hello World</span> 
```

请注意样式属性中的`=`符号而不是`:`符号。

有没有人见过这个？是否被认为是正确的？
为什么会有人做这种事……？

它适用于 IE 6 和 7

我不想要它，但如果我改变它，我会害怕序列

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:12:35.503

> 有人见过这个吗？

是的

> 是否被认为是正确的？

不

> 为什么会有人做这种事……？

由于错误

> 它适用于 IE 6 和 7

不同的浏览器将从不同的错误中恢复。依赖它通常不是一个好主意。

> 我不想要它，但如果我改变它，我会害怕序列

我不知道上下文，但改变它应该没问题。

偶尔会利用这种类型的错误恢复来为特定浏览器提供 CSS（通常是为了弥补*其他*错误），但设计的任何部分都不太可能*依赖*于仅在 IE 6/7 中应用的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:25:29.807

这当然是不正确的；它违反了基本的 CSS[声明语法](http://www.w3.org/TR/CSS21/syndata.html#declaration)。

旧版本的 IE 支持许多非标准语法功能，仅在[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中考虑。这种支持在 CSS 规范中是被禁止的：它们有[错误处理规则](http://www.w3.org/TR/CSS21/syndata.html#parsing-errors)，要求`color='red'`忽略类似的结构。

一般来说，7 到 8 年前编写的代码应该保持不变，或者，如果需要更改，则进行最低限度的更改。在这种情况下，代码对一些非常旧的浏览器有一些影响，对其他浏览器没有影响。如果有强有力的证据表明使代码按预期方式工作很重要，您可以更改它，但是您需要将页面或站点作为一个整体来考虑，并检查哪些其他事情受到影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:10:53.987

我认为这是一个语法错误。

它应该是：

```
<span style="color:red;">Hello World</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:11:28.727

这是错误的语法，样式不起作用，请参见此处[小提琴](http://jsfiddle.net/9EWrn/)

正确的语法是

```
<span style="color:red;">Hello World</span> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:12:21.567

我不知道它在 IE6 和 IE7 上是如何工作的，但在 chrome、firefox 等现代浏览器上它不会工作......我建议坚持使用新版本。IE `<span style="color:red;">hello</span>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T10:14:57.973

这绝对是不正确的，但是很多事情在 IE6 和 7 中是不应该的，而且不应该是应该的。

我想发生的事情是有人出现并决定“修复”旧学校的做事方式：

```
<span color='red'>Hello World</span> 
```

`color`并将属性包围在中`style=""`。

不用说，只要文本应该是红色的，您就不必担心后果。`style="color:red;"`今天可以在任何浏览器中使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T10:23:11.907

这是以前的开发人员犯的一个明显错误。将其更改为：

```
<span style="color:red;">Hello World</span> 
```

将其更改为此将没有问题，因此您的担忧应该解决。

它可能起作用的原因是浏览器以自己的方式处理不正确的标记。您是否注意到，与会出错并因此“中断”的编程语言不同，无论开发人员做了什么，HTML 都会尽可能地呈现浏览器的效果？

希望这可以帮助。

谢谢，米奇。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T10:29:01.573

这在语法上不正确

它的意思是

```
<span style="color:red;">Hello World</span> 
```

# c# - CodeDOM 用于从现有实体类创建类

> ID：15474055
> 
> 赞同：0
> 
> 时间：2013-03-18T10:03:42.290
> 
> 标签：c#, code-generation, codedom

我曾经`CodeDOM`从给定的数据库表中生成一个类（实体类）。我使用[了本](http://msdn.microsoft.com/en-us/library/ms404245%28v=vs.100%29.aspx)教程并制作了我的应用程序。没关系，工作正常。通过使用 codeDOM，我可以编辑现有的实体类并根据它所基于的表重新生成它吗？我搜索了它，但没有运气。如果是这样，你能指出我的方向吗？或者如果没有，我如何重新生成修改后的现有类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:08:36.490

使用**CodeDom**，您可以在运行时为类生成代码，但不能修改现有类。唯一的方法是根据您的表格从头开始重新生成它，我认为这是您可以在您的情况下使用的方法。

# jquery - Jquery自动完成菜单项文本对齐/填充/两端对齐

> ID：15474057
> 
> 赞同：0
> 
> 时间：2013-03-18T10:03:49.670
> 
> 标签：jquery, html, jquery-ui, css

我必须`JQuery UI AutoComplete`在一个普通的文本框中显示几个**项目名称**及其**项目代码。**
我用 - 分隔**项目名称和项目代码**，`Pipe-Character " | "`如下图所示。

现在，每个项目/字符串的对齐/列对齐根据其长度而变化。假设一个字符串大而另一个短，所以菜单看起来像**之字形**
我正在尝试将`MenuItem`字符串显示为`JUSTIFIED`长度`EQUAL`/对齐方式。

`CSS`为了实现这一目标，我必须做出哪些改变？

谢谢 ：-）

![在此处输入图像描述](../Images/9c4332e819f058d1c710fa7bb64832c6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:16:47.430

例如，您可以稍微扩展自动完成功能，以便它为每个项目呈现 HTML。然后，您可以根据自己的喜好设置这些 HTML 元素的样式。您可以参考这个示例，了解如何在每个项目中呈现 HTML：[在 jQuery UI 自动完成中使用 HTML](https://stackoverflow.com/questions/3488016/using-html-in-jquery-ui-autocomplete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:12:24.027

这是我的代码---

```
 $.ajax({
            url: 'SomeController/someAction',
            type: 'POST',
            dataType: 'json',
            data: {},
            success: function (data, textStatus, jqXHR) {
                var x;
                $('#txtDeptCode').autocomplete({
                    source: data.Response,
                    minLength: 0,
                    select: function (event, ui) {
                        x = ui.item.value;
                        event.preventDefault();
                        x = x.split('|');
                        $(this).val(x[1].split(' ')[1]);
                    }
                }).data("ui-autocomplete")._renderItem = function rdrItem(ul, item) {
                    return $("<li></li>").data("item.ui-autocomplete", item).append("<a><div style='width:100%;'><div style='width:70%; float:left;'>" + item.value.split('|')[0] + " </div><div style='width:30%; float:right;'> </div><div>(" + item.value.split('|')[1] + ")</div></div></a>").appendTo(ul);
                }; 
```

这是输出：
![在此处输入图像描述](../Images/0304e4f40d4fc7391ab8b5f65a82ac72.png)

# android - 即使 listView 中有元素，也始终显示 listView.SeptEmptyView

> ID：15474058
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:50.293
> 
> 标签：android, android-listview, android-fragments

即使 ListView 中有记录，ListView 中的 emptyView 也会始终显示。我正在使用 SherlockFragment 并显示 ListView 代码如下：

```
ViewGroup vg = (ViewGroup) getActivity().getLayoutInflater().inflate(
                R.layout.header_file, hotelListView, false);
        hotelListView.addHeaderView(vg, null, false);
        hotelListView.setOnItemClickListener(this);
        hotelListView.setEmptyView(view.findViewById(R.id.empty)); 
```

和xml：

```
 <ListView
        android:id="@+id/hotel_list_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:paddingLeft="8dp"
        android:persistentDrawingCache="scrolling"
        android:scrollingCache="false" >
    </ListView>

    <TextView
        android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="No Results" /> 
```

因此，在我从服务器检索结果后，TextView 仍显示在屏幕上，我可以在屏幕上看到 No Results 文本，同时列表中有项目。我需要更改什么以便 @android:id/empty 仅在列表中没有元素时才显示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:13:24.793

不看源头，我能想到 3 个可能的错误，

1.  ListView 没有设置适配器。

2.  如果重新实现了适配器，是否正确地重新实现了 getCount() 方法？

3.  你必须调用 notifyDatasetChanged() 吗？从服务器获取内容后。

# c++ - 有趣且非常烦人的整数问题

> ID：15474062
> 
> 赞同：1
> 
> 时间：2013-03-18T10:03:59.903
> 
> 标签：c++, linux, integer, overflow, diskspace

所以，我有以下代码，我知道它在某个地方坏了，我根本无法确定在哪里......

```
static uint64_t get_disk_total(const char* path)
{
    struct statvfs stfs;
    if ( statvfs(path, &stfs) == -1 )
    {
        return 0;
    }
    uint64_t t = stfs.f_blocks * stfs.f_bsize;
    std::cout  << "total for [" << path << "] is:" << t 
               << " block size (stfs.f_bsize):" <<   stfs.f_bsize
               << " block count (stfs.f_blocks):" << stfs.f_blocks 
               << " mul:" << stfs.f_blocks * stfs.f_bsize
               << " hardcoded: " << (uint64_t)(4096 * 4902319)     // line 50
               <<  std::endl ;
    return t;
} 
```

当我编译它时，告诉我：

```
part_list.cpp: In function ‘uint64_t get_disk_total(const char*)’:
part_list.cpp:50:59: warning: integer overflow in expression [-Woverflow] 
```

好的。当我运行它时，结果是（手动添加换行符）：

```
total for [/] is:2900029440 
block size (stfs.f_bsize):4096 
block count (stfs.f_blocks):4902319 
mul:2900029440 
hardcoded: 18446744072314613760 
```

我知道，那个`4902319 * 4096 = 20079898624`......[谷歌](https://www.google.com/search?client=ubuntu&channel=fs&q=4902319%20%2a%204096&ie=utf-8&oe=utf-8)告诉我它是。那么我到底如何得到第一个`2900029440`然后`18446744072314613760`进行相同的计算呢？有人可以解释一下这里发生了什么吗？这超出了我现在的综合能力，我觉得，这是一个隐藏在某个地方的小问题......`4902319 * 4096`不应该是一个如此庞大的数字，让应用程序像这样疯狂......

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:08:34.000

首先，您计算`(4096 * 4902319)`哪个被计算为`int`并且它溢出。然后将该数字转换为`uint64_t`。

尝试：

```
(4096 *  (uint64_t) 4902319) 
```

使其计算为 uint64_t。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:12:09.510

使用*Unsigned long long*文字：

```
 4096 * 4902319ULL
                 ~~~ 
```

在计算溢出之前。

# jquery - ubuntu 12.04 上的 jquery ajax - 不起作用

> ID：15474065
> 
> 赞同：0
> 
> 时间：2013-03-18T10:04:03.587
> 
> 标签：jquery, ajax, firefox, ubuntu, ubuntu-12.04

我正在使用 ubuntu 12.04 和 firefox。

我有这个 ajax 查询。

```
$.ajax({
              type: 'POST',
              url: 'ajax_test',
              dataType: 'json',
              success: function(responseData) { 
                    alert('test');
                    alert(responseData.x + " " + responseData.y);
                    seriesJsonData[0]['data'].push({y: responseData.y, x: responseData.x});
                    graph.update();
              }
            }); 
```

我还从萤火虫中看到，我得到了 200 的状态代码和预期的 json 返回。问题是我什至无法弹出警报。不适用于：

```
alert('test'); 
```

ajax 和 firefox un ubuntu 是否存在已知问题？

# php - 如何创建依赖下拉列表搜索？

> ID：15474070
> 
> 赞同：0
> 
> 时间：2013-03-18T10:04:12.690
> 
> 标签：php, api, drupal, drupal-7, drupal-modules

**大家好！**拜托，请帮助在 Drupal 7 上实现下一步。现在我尝试解释我需要什么。已经花了 4 天时间尝试制作这个东西，但没有成功。任何帮助将不胜感激。

我想每个人都遇到过“国家和城市”搜索之类的东西。它通常是依赖列表。两个下拉列表。它认为它是什么很清楚。你可以在任何有酒店、旅馆、普通票预订等的网站上遇到这样的事情。所以，我也想做同样的事情。

我正在使用 Search API 模块及其扩展来实现它。我需要以某种方式实现，而不是通常的搜索文本区域输入分类层次下拉列表。我有双重层次的分类法。也许我不需要使用分类法。也许还有另一种方法可以做到这一点。请告诉我！实际上，我可以借助视图或搜索页面模块（搜索 API 扩展）将其实现为一个下拉列表。

在这种情况下，它看起来像：

```
USA
-   New-York
-   AL
-   …
Canada
-   Ontario
-   … 
```

这是一个包含所有术语翻译的下拉列表。（我只需要一种当前的用户语言）。

但我需要两个。没有小部件可以使其成为两个下拉窗口。
Simple Hierarchical Select 和 Hierarchical Select 小部件对我有好处，但它不会仅出现在（内容）视图中的（索引）视图中。我需要使用 Search API、Sort 和 Facets。这就是为什么我不能使用（内容）视图。也许，我仍然可以使用一个小部件。或者我可以通过其他方式实现这一点。也许，分类不是必需的。

我对php编程不熟悉，但如果容易的话我可以试试。所以，谢谢你的帮助和回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:07:47.583

看看[Hierarchical Select 模块](http://drupal.org/project/hierarchical_select)。

这是一个[演示链接](http://wimleers.com/demo/hierarchical-select)。

希望这可以帮助。

# php - 带有 FILE_APPEND 的 php file_put_contents 无法打开流：权限被拒绝

> ID：15474071
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:14.800
> 
> 标签：php, command-line-interface

首先，我在 Windows XP 上运行 php 5.4.12 cli。

我正在运行以下代码：-

```
file_put_contents(date('Ymd') . '-Success.csv', $successrecord, FILE_APPEND); 
```

此代码位于一个在 while 循环中调用的函数中。

我遇到的问题是我收到消息“PHP 警告：file_put_contents(20130318-Success.csv)：无法打开流：权限被拒绝”，即使该文件似乎包含我期望的所有数据！该文件与 php 脚本位于同一目录中，并作为带有 php -f 的命令行脚本运行。

我能做些什么呢？我应该使用睡眠（2）吗？打电话后？可能是什么导致了这个问题，因为它可以清楚地写入有问题的文件。

谢谢克雷格

# python - 如何在 Python 中捕获 EINTR？

> ID：15474072
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:15.520
> 
> 标签：python, linux, exception-handling, signals

我的问题是由 EINTR 信号引起的（如果我没记错的话），该信号会在执行 select 之类的系统调用时引发错误。这个问题在互联网上无处不在，并且有很好的解决方案，但它们都不适合我。在多线程应用程序中，我使用许多选择调用（我有 TCP 服务器和单独的 TCP 客户端），当我调用系统锁（我的应用程序这样做，通过 gnome-screensaver-commands -lock）时随机选择抛出：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
self.run()
  File "/home/aziemek/Desktop/Zablokowanie uśpienia/server.py", line 45, in run
inputready,outputready,exceptready = select.select([self.server],[],[],TIME_TO_CHECK/2)
error: (4, 'Interrupted system call') 
```

这就是我尝试缓存 EINTR 的方式：

```
try:
    inputready,outputready,exceptready = select.select([self.client],[],[],TIME_TO_CHECK*2) 
except EnvironmentError as why:
    print("Blad ta :" + str(why.args[0]))
    if why.args and why.args[0] != EINTR:
        print("Error during server loop" + why)
    else:
        continue
except socket.error as why:
    print("Blad ta :" + str(why.args[0]))
    if why.args and why.args[0] != EINTR:
        raise
    else:
        continue
except Exception as why:
    print("Blad to :" + str(why.args[0]))
except:
    print("Blad niewiadomy") 
```

没有一个“except”子句可以捕捉到这个异常——即使是最后两个。系统：Linux Ubuntu，Python 2.6.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:08:35.247

你想抓住`OSError, select.error`：

```
import select
# ...

except (OSError, select.error) as why:
    # ... 
```

`OSError`所以你是向前兼容的；您的回溯正在处理`select.error`.

# c - 是否可以确定是否由于 Linux 上的进程终止而调用了动态库终结？

> ID：15474074
> 
> 赞同：0
> 
> 时间：2013-03-18T10:04:21.060
> 
> 标签：c, linux, dll

在 Windows 上，当进程加载或卸载动态库时使用 DLLMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved) 函数。因此，当应该卸载 DLL 时，我可以使用 lpvReserved 参数来确定是否调用了 FreeLibrary 或者它只是进程终止是 DLL 卸载的原因。

但在 Linux 上，我有没有任何上下文的析构函数（例如“fini”函数）。问题是，我如何在 Linux 上确定是否由于进程终止而不是手动卸载库或其他原因触发了库终结？

# c# - CKEditor在模板中使用时转为textarea

> ID：15474076
> 
> 赞同：0
> 
> 时间：2013-03-18T10:04:21.560
> 
> 标签：c#, asp.net, ckeditor

我正在使用[这里的模板](http://themeforest.net/item/mango-slick-responsive-admin-template/2728748?sso?WT.ac=category_item&WT.seg_1=category_item&WT.z_author=Stammi)

现在我想在这个模板中使用 CKeditor ......我已经从[这里](http://ckeditor.com/download) 为 asp.net 下载了它。现在，当将此 CKeditor 放入我的表单中时，它会转换为 textarea，即没有工具栏...

![在此处输入图像描述](../Images/5d11ce0f285820d55f384e2da26f242d.png)

它应该像这样 ![在此处输入图像描述](../Images/d92b3de67e2053f3ff014514eb3a85ca.png)

我用过母版页

**子页面代码**

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <fieldset>
        <legend>Input Fields</legend>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" RenderMode="Inline">
            <Triggers>
                <asp:PostBackTrigger ControlID="drplstQuesType" />
            </Triggers>
            <ContentTemplate>
                <div class="row">
                    <label>
                        <strong>Standard</strong>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstStd" runat="server" AppendDataBoundItems="true" Width="500"
                            OnSelectedIndexChanged="drplstStd_SelectedIndexChanged" AutoPostBack="true" CssClass="chzn-done">
                            <asp:ListItem Text="--Select Std--" Selected="True" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstStd" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select Standard'
                            InitialValue="0" SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
                <div class="row">
                    <label>
                        <strong>Semester</strong>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstSem" runat="server" Width="200" OnSelectedIndexChanged="drplstSem_SelectedIndexChanged"
                            AutoPostBack="true">
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstSem" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select Semester'
                            InitialValue=" --Select Semester-- " SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
                <div class="row">
                    <label>
                        <strong>Subject</strong>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstSub" runat="server" AppendDataBoundItems="true" Width="200"
                            OnSelectedIndexChanged="drplstSub_SelectedIndexChanged" AutoPostBack="true">
                            <asp:ListItem Text="--Select Subject--" Selected="True" Value="0"></asp:ListItem>
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstSub" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select Subject'
                            InitialValue="0" SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
                <div class="row">
                    <label for="f1_disabled">
                        <strong>Chapter</strong>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstChap" runat="server" Width="200" OnSelectedIndexChanged="drplstChap_SelectedIndexChanged"
                            AutoPostBack="true">
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstChap" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select Chapter'
                            InitialValue=" --Select Chapter-- " SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
                <div class="row">
                    <label for="f1_textarea">
                        <strong>Topic</strong>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstTopic" runat="server" AutoPostBack="true" Width="200">
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstTopic" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select Topic'
                            InitialValue=" --Select Topic-- " SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
                <div class="row">
                    <label for="f1_textarea_grow">
                        <strong>Question Type</strong>
                        <%--    <small>with autogrow</small>--%>
                    </label>
                    <div>
                        <asp:DropDownList ID="drplstQuesType" runat="server" Width="200" AutoPostBack="true"
                            OnSelectedIndexChanged="drplstQuesType_SelectedIndexChanged">
                        </asp:DropDownList>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" ForeColor="#A7474B"
                            Font-Bold="True" ControlToValidate="drplstQuesType" ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Select QuestionType'
                            InitialValue=" --Select QuestionType-- " SetFocusOnError="true" Display="Dynamic"></asp:RequiredFieldValidator>
                    </div>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
        <div class="row">
            <label for="f3_date">
                <strong>Question</strong>
            </label>
            <div>
                <CKEditor:CKEditorControl ID="CKEditorControl1" runat="server" Height="100px" Width="650px"></CKEditor:CKEditorControl>
                <br />
                <asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server" ControlToValidate="CKEditorControl1"
                    ErrorMessage='<img src="img/elements/forms/icon-error.png"/>Enter Question' SetFocusOnError="true"
                    Display="Dynamic" ForeColor="#A7474B" Font-Bold="True"></asp:RequiredFieldValidator>
            </div>
        </div>
        <div class="row">
            <label for="f3_date">
                <strong>Option-1</strong>
            </label>
            <div>
                <asp:TextBox ID="txtOption1" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f3_date">
                <strong>Option-2</strong>
            </label>
            <div>
                <%--<input type="date" name="f3_date" id="f3_date" />--%>
                <asp:TextBox ID="txtOption2" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f1_textarea">
                <strong>Option-3</strong>
            </label>
            <div>
                <asp:TextBox ID="txtOption3" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f3_date">
                <strong>Option-4</strong>
            </label>
            <div>
                <asp:TextBox ID="txtOption4" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f3_date">
                <strong>Option-5</strong>
            </label>
            <div>
                <%--<input type="date" name="f3_date" id="f3_date" />--%>
                <asp:TextBox ID="txtOption5" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f1_textarea">
                <strong>Option-6</strong>
            </label>
            <div>
                <asp:TextBox ID="txtOption6" runat="server" Width="500px"></asp:TextBox>
            </div>
        </div>
        <div class="row">
            <label for="f1_textarea">
                <strong>UploadFile</strong>
            </label>
            <div>
                <asp:FileUpload ID="FileUpload1" runat="server" Width="283px" />&nbsp;&nbsp;&nbsp;&nbsp;<asp:Label
                    ID="Label1" runat="server" Text=""></asp:Label>
            </div>
        </div>
        <div class="row">
            <label for="f1_textarea">
                <strong>Correct Answer</strong>
            </label>
            <div>
                <asp:Panel ID="Panel2" runat="server">
                    <asp:CheckBoxList ID="CheckBoxList1" runat="server">
                        <asp:ListItem Value="1" Text="option-1"></asp:ListItem>
                        <asp:ListItem Value="2" Text="option-2"></asp:ListItem>
                        <asp:ListItem Value="3" Text="option-3"></asp:ListItem>
                        <asp:ListItem Value="4" Text="option-4"></asp:ListItem>
                        <asp:ListItem Value="5" Text="option-5"></asp:ListItem>
                        <asp:ListItem Value="6" Text="option-6"></asp:ListItem>
                    </asp:CheckBoxList>
                    <br />
                    <asp:DropDownList ID="DropDownList1" runat="server">
                        <asp:ListItem Value="0" Text="--Select--"></asp:ListItem>
                        <asp:ListItem Value="1" Text="option-1"></asp:ListItem>
                        <asp:ListItem Value="2" Text="option-2"></asp:ListItem>
                        <asp:ListItem Value="3" Text="option-3"></asp:ListItem>
                        <asp:ListItem Value="4" Text="option-4"></asp:ListItem>
                        <asp:ListItem Value="5" Text="option-5"></asp:ListItem>
                        <asp:ListItem Value="6" Text="option-6"></asp:ListItem>
                    </asp:DropDownList>
                    <br />
                    <br />
                    <asp:TextBox ID="txtCorrectAns" runat="server" Width="200"></asp:TextBox>
                </asp:Panel>
            </div>
        </div>
        <div class="row">
            <label for="f1_textarea">
                <strong>Remarks</strong>
            </label>
            <div>
                <asp:TextBox ID="txtRemarks" runat="server" Rows="5" TextMode="MultiLine"></asp:TextBox>
            </div>
        </div>
        <div class="actions">
            <div class="left">
                <asp:Button ID="btnView" runat="server" Text="View details" CausesValidation="false"
                    OnClick="btnView_Click"></asp:Button>
                <input type="reset" value="Cancel" runat="server" id="Cancel" onclick="btnCancel_Click" />
            </div>
            <div class="right">
                <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" />
                <asp:Button ID="btnUpdate" runat="server" Text="Update" OnClick="btnUpdate_Click" />
            </div>
        </div>
    </fieldset>
</asp:Content> 
```

请提供建议，以便我可以使用带有工具栏的编辑器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:15:22.627

这个问题是由于 CKeditor 没有正确加载。

原因可能是2：

*   您没有包含正确的 CKEditor 3.x javascript 文件，或者它们不在正确的位置 (~\Ckeditor)

*   某个地方出现了一个 javascript 错误，它破坏了 javascripts 的加载

无论如何，当您遇到与 javascript 相关的问题时，您必须查看浏览器开发人员控制台是否有任何 javascript 错误。

[CKEditor for ASP.NET 控件集成指南](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/ASP.NET/Integration_Advanced)

# mysql - 如何更改 MySQL 数据库中的时区

> ID：15474077
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:27.630
> 
> 标签：mysql, codeigniter, phpmyadmin, timezone

在我的数据库表字段中，我将日期时间值作为 CURRENT_TIMESTAMP。然后我没有得到我国家的当前时间。那么如何将 MySQL 数据库的时区更改为 ('Asia/Kolkata')。

我有权使用 phpMyAdmin 管理数据库。

我认为我的数据库位于美国，我正在使用 codeigniter 来开发我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:06:36.173

```
mysql_query("SET SESSION time_zone = '+8:00'"); 
```

[http://www.worldtimezone.com/time-usa12.php](http://www.worldtimezone.com/time-usa12.php)

插入正确的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:46:44.380

而不是使用`CURRENT_TIMESTAMP()`，尝试使用`sysdate();`

# java - 区分 .csv 和假 .csv

> ID：15474080
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:31.247
> 
> 标签：java, csv, mime-types

我有一种上传 CSV 文件的方法。当我使用任何普通的 CSV 文件时，它工作正常。

当它还读取`.csv`以文件扩展名重命名的任何文件（例如，PDF）并且它不会引发任何异常时，就会出现问题。

任何人都可以帮助我区分*真正的*CSV 文件和带有`.csv`文件扩展名的“假”CSV 文件吗？

* * *

### 更新以下评论：

**这是我的代码：**

```
CsvReader csvReader = new CsvReader();
ArrayList <ArrayList<String>> arrData=null;
String path="C:/Users/Avinash/Desktop/asset.csv";
arrData=CsvReader.readCsv(path,printinconsole); 
```

如果`asset.csv`是真正的 CSV 文件，上面的代码可以正常工作。但是任何其他格式文件（比如`asset.pdf`）都被重命名为`asset.csv`，它不会抛出任何异常但会读取垃圾值。

任何人都可以帮助区分这两种不同的文件类型吗？

我尝试[了 jMimeMagic](http://sourceforge.net/projects/jmimemagic/)，但它无法为 Open Office 中的所有电子表格提供正确的 MIME 类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:12:50.693

> 如何区分真正的 CSV 文件和具有 .csv 文件扩展名的“假”CSV 文件？

您不能以直接的方式执行此操作，因为每个文件都可以解释为 CSV 文件（由换行符分隔的记录，由逗号分隔的字段，因此即使使用某些字符集的二进制文件也可以读取为“有效”CSV文件）。例如，如果文件不包含任何换行符或逗号字符，您最终会得到包含整个文件的单个记录/单个字段结果。

为了检查它是否是有效的 CVS 文件（对于您的用例），您需要使用一些您知道您的特定数据需要完成的约束来验证从 CSV 文件中读取的结果。例如，您可以

*   验证标题/标题值
*   验证您期望在每条记录中的字段数
*   验证最大/最小字段长度和记录长度
*   验证字符集 - 您的数据是否包含无效字符？
*   验证字段数据是否在特定范围内？

顺便说一句：无论如何，您都应该进行这些验证，以避免将恶意数据导入您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:12:06.020

许多文件格式都有一个特殊的标头，即用作类型签名的短字节序列。这就是 Linux 可以从图像中分辨出文本文件的方式，而无需特定的文件扩展名。

在 Java 中，您可以使用`javax.activation`. [这里](http://www.rgagnon.com/javadetails/java-0487.html)给出了一个完整的例子。

如果您的文本文件被标识为 text/csv （或 text/plain 可能），那么您可以尝试对其进行解析。

# extjs - 使用 extjs4 在 div 中显示验证错误

> ID：15474085
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:43.857
> 
> 标签：extjs

我正在尝试为表单添加验证（它的强制性字段很少，只有很少的 alpha 和最大长度验证）。我需要在表单的左上角显示错误消息（可能有多少），其中我有一个带有 ID 的 div。我不确定要开始，因为这将是我第一次尝试验证。任何人都可以在网上发布一个简单的例子或任何例子（我搜索了很多，但找不到任何符合我需要的东西），这样我就可以开始......请帮助......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:38:44.353

您可能会阅读的链接：

*   [Ext.form.Basic](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic)
*   [Ext.form.field.Field getErrors 方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Field-method-getErrors)
*   [使用 VType 的高级验证示例](http://docs.sencha.com/ext-js/4-1/#!/example/form/adv-vtypes.html)

你可以用这个做的一个例子（[现场例子在这里](http://jsfiddle.net/SYsXx/1/)）：

```
var errors = [];
var fields = form.getFields(); // form : Ext.form.Basic
var errorsTpl = new Ext.XTemplate(
    '<ul><tpl for="."><li>{field} : {error}</li></tpl></ul>'
);
fields.each(function (field) {
    errors = errors.concat(Ext.Array.map(field.getErrors(), function (error) {
        return { field: field.getName(), error: error }
    }));
});
errorsTpl.overwrite('myOutputDiv', errors); 
```

# sql - Oracle 中的长文本被 SSIS 源缩短？

> ID：15474086
> 
> 赞同：1
> 
> 时间：2013-03-18T10:04:46.567
> 
> 标签：sql, sql-server-2008, join, ssis

我正在使用 SSIS 将数据库从 Oracle 数据库迁移到 SQL Server 2008 R2 架构。在其中一个 oracle 表中有一个列，其中包含`long`文本。为了适应所需的模式，我在 OLEDB 源中使用 SQL 命令，该命令使用多个连接来获取所需的数据。

在迁移而不是整个`long`字符串时，仅从源传输前 100 个字符，其余的被修剪。在我尝试了一个没有任何连接的查询之后，我能够完整地提取整个文本。

在 Oracle 客户端上运行查询时，会出现正确的结果。请提出任何直接的方法来纠正问题？目前，我在使用无连接查询从 Oracle 数据库中提取数据之前临时使用 SQL 表传输数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T16:13:03.377

所以我找到了一个解决方案，基本上是对上面所写内容的点缀。

我需要连接的数据，并且我不想拉回所有连接表的“原始”副本，所以我提取了两个来源：一个是`LONG`使用 table direct 方法的带有列的表的原始副本，不是 SQL 命令（过滤为仅获取主键和相关`LONG`列） - 如上所述，这保留了长文本的完整内容。然后是另一个包含所有连接和`LONG`排除列的源（下面称为“元数据”）。

然后简单地将两个源分别通过 a `Sort`，然后将它们输入 a `Merge Join`，加入主键列并仅选择所需的列。

![图表](../Images/48c037253214eec644b93bf62f4bc2f5.png)

# python - 反向代理后Windows/IIS上的WSGI，如何设置多进程和进程回收？

> ID：15474087
> 
> 赞同：0
> 
> 时间：2013-03-18T10:04:52.530
> 
> 标签：python, windows, iis, wsgi

我之前使用[isapi-wsgi](https://code.google.com/p/isapi-wsgi/)在 IIS 上部署了 CPython 应用程序，这在少数情况下效果很好。

然而，在我目前的项目中，我遇到了 isapi-wsgi 的困难：如果不重新编译 pyodbc 模块，Windows Server 2008 R2、64 位 Python 和 pyodbc 模块的组合将无法工作（至少这是半小时谷歌搜索让我相信）。

不管怎样：我已经决定我会尝试另一种选择来为这个项目在 Windows 上部署 WSGI。

计划是：

*   为反向代理配置的 IIS Web 服务器（使用 IIS[应用程序请求路由](http://www.iis.net/learn/extensions/planning-for-arr/application-request-routing-version-2-overview)）
*   作为 Windows 服务托管的 Python 进程，处理从 IIS 传递的请求，例如Pylons 项目中的[这个示例](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/windows.html#step-2-create-a-windows-service)

我的问题：

*   如果我的 Python 进程能够启动 N 个长时间运行的请求处理进程并在它们之间自动分发请求，那就太好了。
*   如果 Python 请求处理过程能够在给定数量的请求后自动回收，那就太好了。
*   有没有人有关于如何完成上述操作的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:07:46.510

我已经成功地使用了 Paste 和 CherryPy。Paste 目前与 Python 3 不兼容，并且不太可能增加该支持。如果 Python 3 是您关心的东西，那么您可能会想看看 Paste 以外的东西。

我还尝试在服务中使用 Twisted 作为 WSGI 服务器。这行得通，但我从未将它投入生产，因为我没有发现它提供了我一直在使用的东西所寻找的好处。

我对 Werkzeug 的服务器不熟悉，所以对于在生产部署中不使用它的真实性，或者这是否意味着不使用反向代理，我犹豫不决。

从根本上说，根据您的标准，在 Windows 上运行的任何知名 WSGI 服务器都可能是某些“最佳”值的“最佳”服务器。

# android - 在 EditText android 中突出显示特定单词

> ID：15474088
> 
> 赞同：2
> 
> 时间：2013-03-18T10:04:56.347
> 
> 标签：android, android-edittext

如何突出显示用户在 EditText 中选择的特定单词。例如，我有一个 EditText，用户在其中输入句子“你好，你好吗？”，现在用户可以选择[像这张图片这样](https://stackoverflow.com/questions/15064820/how-to-select-text-with-a-single-click-in-the-edittext.)的词。而且我必须在 TextView 的整个句子中突出显示选定的单词。

我已经提到[了这个](https://stackoverflow.com/questions/9128297/how-to-dyamically-select-text-from-edittext-onclicklistener)，[这个](https://stackoverflow.com/questions/8518469/higlight-particular-word-in-text-view)但不明白。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:11:37.757

您可以通过使用 replace() 方法然后 Html.fromHtml() 来做到这一点，如下所示

```
yourEditText.setOnFocusChangedListener(new OnFocusChangedListener(){
    @Override
    public void onFocusChange(View v, boolean hasFocus){
        if (hasFocus){
             if (str.contains("Hello how are you ?") == true) 
                {                     
                    str =  ((EditText)v)getText.ToString().replaceAll("Hello how are you ?", "<font color='red'>Hello how are you ?</font>");

                     ((EditText)v).setText(Html.fromHtml(str), TextView.BufferType.SPANNABLE);
                }
        }
    }
}); 
```

[编辑 1]

```
 yourEditText.setOnFocusChangedListener(new OnFocusChangedListener(){
        @Override
        public void onFocusChange(View v, boolean hasFocus){
            if (hasFocus){
            // But the words in an ArrayList then use them  
            for(String s : arrLst){
            if (str.contains(s) == true)                     {                     
             str =  ((EditText)v)getText.ToString().replaceAll(s, "<font     color='red'>Hello how are you ?</font>");
              ((EditText)v).setText(Html.fromHtml(str), TextView.BufferType.SPANNABLE);                                     }

            }
          }
        }
    }); 
```

[编辑 2]

```
 yourEditText.setOnFocusChangedListener(new OnFocusChangedListener(){
        @Override
        public void onFocusChange(View v, boolean hasFocus){
            if (hasFocus){

                 int sSelection = ((EditText)v)getText.ToString().getSelectionStart(); 
                 int eSelection = ((EditText)v)getText.ToString().getSelectionEnd(); 
                 String sString = string.substring(sSelection, eSelection);

                 str =  ((EditText)v)getText.ToString().replaceAll(sString , "<font color='red'>"+sString +"</font>");
                 ((EditText)v).setText(Html.fromHtml(str), TextView.BufferType.SPANNABLE);

            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:21:55.253

试试这个可能对你有帮助。

```
"android:textColorHighlight="#00f000" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:34:25.753

您可以使用 spannable 来实现

看看`EditText`有一个 api 来获取选择：[EditText 中的选择](http://developer.android.com/reference/android/widget/TextView.html#getSelectionStart%28%29)

`TextView`您可以在using中设置多色文本`SpannableString`

所以将两者结合在这样的代码中：

```
edit.setOnEditorActionListener(
     new EditText.OnEditorActionListener() {
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
if (actionId == EditorInfo.IME_ACTION_SEARCH ||
        actionId == EditorInfo.IME_ACTION_DONE ||
        event.getAction() == KeyEvent.ACTION_DOWN &&
        event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
    if (!event.isShiftPressed()) {
       // the user is done typing. 
//edit is the EditText
         Spannable spann = new SpannableString(edit.getText());        
      spann.setSpan(new ForegroundColorSpan(Color.BLUE), edit.getSelectionStart(),       edit.getSelectionEnd(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
     textView.setText(spann); // TextView 
       return true; // consume.
    }                
}
return false; // pass on to other listeners. 
}
 }); 
```

应该给你想要的效果

结束编辑检测代码来自这里：所以[回答](https://stackoverflow.com/a/8063533/951448)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:09:49.883

像这样使用html：

```
 Spanned s = Html.fromHtml(string.replace(selectedString, "<font color=\"red\">" + selectedString + "</font>"));

edittext.text(s); 
```

# c - ARM-内核测试模块

> ID：15474089
> 
> 赞同：10
> 
> 时间：2013-03-18T10:05:00.547
> 
> 标签：c, debugging, testing, kernel, arm

我有一个运行我编写的 RTOS/内核的双核 ARM 嵌入式系统设备。我希望编写一个内部诊断工具/模块来模拟内核的 I/O 以进行测试。显然，这不会完全取代现实世界的测试，包括物理硬件接口等等。我猜这将接近管理程序。这样做的方法/概念是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:49:22.670

我使用了[L4 的微内核](http://en.wikipedia.org/wiki/L4_microkernel_family)，硬件权限映射为 MMU 页面；ARM 选项有 1k、4k、64k 页和 1M 段。此外，您可以查看[Linux 的 FB deferred I/O](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/fb/deferred_io.txt)。这个想法是提供一个*内存映射* **的伪寄存器**集。然后，您可以使用带有*错误地址的**页面错误*处理程序来确定正在命中哪个**伪寄存器。**您可能需要查看说明。例如，代码可以使用*回写*和其他更新。Linux[对齐处理程序](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/mm/alignment.c)代码可能很有指导意义。

 ****请参阅：**ARM ARM** -*第 B3 章内存管理单元。*
        **ARM ARM** - *2.6.5 数据中止（数据访问存储器中止）。*

您还需要模拟中断。使用计时器（使用您喜欢的任何分布）可以调用驱动程序/操作系统 ISR。为了最大限度地减少定时器的使用，可以使用[计时轮来创建不同的中断到达](http://www.cs.columbia.edu/%7Enahum/w6998/papers/sosp87-timing-wheels.pdf)*概率分布函数*。如果可能，您可能还希望将此计时器设置为`FIQ`。这可以让您的测试设备的 ISR 接收数据更新，即使常规`IRQ`s 被屏蔽。`FIQ`您还可以在恒定定时器中断上使用处理程序来模拟 DMA 。当然，这假设您的测试驱动程序不使用 a`FIQ`并且您有一个`FIQ`可用的计时器。

许多操作系统驱动程序都有*寄存器缓存*，特别是如果设备是*只写*芯片。查看[此代码](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/sound/soc/soc-cache.c)也可能会有所帮助。

使用**L4**，特定*单元格*被授予实际物理设备范围的权限。这是在*虚拟空间*中重新定位的。*虚拟机管理程序*的另一个问题是您正在运行多个操作系统，并且您必须将权限切换到不同的硬件外围设备上。我不相信你必须这样做。

**注意事项：** [多 CPU 锁定](http://infocenter.arm.com/help/topic/com.arm.doc.dht0008a/ch01s02s01.html)可能存在`data fault`处理问题；您的驱动程序不应通过多 CPU 访问硬件。处理程序可以在中断锁定的情况下在单个 CPU 上运行，此解决方案将起作用。我相信如果发生异常，`strex`将返回一个条件代码集。可能您可以在故障处理程序中处理此问题。

[由于您提出问题和手臂](/questions/tagged/arm "显示标记为“手臂”的问题")标签的方式，我提出了上述解决方案。

* * *

正如[Pekka](https://stackoverflow.com/users/111598/pekka)所指出的，如果您选择使用 C++，这可能有助于[*test 的设计*](http://c2.com/cgi/wiki?SoftwareDesignForTesting)。一个有用的模式是驱动程序中访问硬件的纯虚拟接口。当你在测试时，你将这个虚拟接口替换为一个模拟类；使用函数指针包也可以在**“C”**中执行此操作。这些类型的活动有[据可查](https://www.google.ca/search?hl=en&q=testability%20design%20patterns)，所以我排除了它们。但是，如果这是您正在寻找的解决方案，您可能会考虑澄清问题并重新标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T09:19:30.463

您可以应用以下方法以提高保真度（和努力）：

*   如果您对计划中的硬件有软件 API，那么响应模拟结果的存根将提供一阶解决方案。
*   如果硬件是内存映射的，请创建一个模拟进程/线程来更新内存，就好像它是外部硬件一样。
*   然后，如果需要更高的保真度，可以引入使用内存映射设备的页面错误的无[艺术噪声方法，以使模拟器对实际 API 透明，并引入同步事件更新。](https://stackoverflow.com/users/1880339/artless-noise)
*   最后，构建硬件（可能带有更多软件）为应用程序提供相同的接口以从系统外部进行硬件在环仿真可能会花费更少的精力。这将为您提供确切的硬件接口，但只是将复杂性转移到测试脚手架上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T21:34:15.053

如果您的 RTOS 在内核和硬件之间有一个硬件抽象层 (HAL)。这可能是模拟 I/O 的好点。

如果您没有任何类型的 HAL 层，那么这可能是实现它的一个原因。HAL 还有很多其他好的理由（请参见[此处](http://www.brokenthorn.com/Resources/OSDev13.html)）。谷歌用“*硬件抽象*”来获取更多信息。

还有一些 ARM 模拟器（ARMware 和类似的）用于模拟 ARM 设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:40:04.860

您希望进行的测试类似于向内核发送虚拟 IO 请求。我认为这个概念类似于基于软件的半虚拟化。

基于软件的 Hypervisor 是您的测试程序；将虚拟 IO 发送到您的内核，并且您的内核包含一个虚拟 IO 驱动程序来接受这些 IO 请求。

处理后，虚拟 IO 驱动程序还必须能够对您的管理程序进行超级调用以提醒虚拟 IO 信号的状态。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-26T06:24:00.363

没有关于您的 RTOS/内核的信息....但我想您的 RTOS/内核应该有类似**`ioctl`**. 你为什么不使用它？****

# java - 将 Ligthbox 重定向到另一个 url

> ID：15474090
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:05:13.473
> 
> 标签：java, css, jquery-ui, lightbox2

当用户单击 Lightbox 弹出窗口的表面时，如何使 CSS Lightbox 重定向到另一个 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:12:08.870

使用 onclick 事件处理程序`onclick="location.href='http://example.com';"`

# linux - Perl + Linux在多个文本位置重新排列列

> ID：15474091
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:05:15.877
> 
> 标签：linux, perl

```
#!/usr/bin/perl

use strict;
use warnings;

my $file;
my @files;
my $parse;
my @files = <*>;
foreach $file(@files)
 chomp ($file);
{
 $parse = system qq(paste <(cut -f1,2,13 $file) <(cut -f12 $file));
} 
```

* * *

```
"my" variable @files masks earlier declaration in same scope at Rast_seq.pl line 11.
sh: 1: Syntax error: "(" unexpected
sh: 1: Syntax error: "(" unexpected
sh: 1: Syntax error: "(" unexpected
sh: 1: Syntax error: "(" unexpected
sh: 1: Syntax error: "(" unexpected
sh: 1: Syntax error: "(" unexpected 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:13:51.303

这里有几个问题：

*   您要声明 @files 数组两次；
*   `chomp ($file);`在`for`街区外；
*   `chomp ($file);`在这种情况下没用：`<*>`返回文件名列表 - 您没有阅读行（我建议您使用`glob '*';`它，因为它更具可读性）；
*   `system`函数运行你的命令使用`/bin/sh`which - 看起来 - 不支持`<(...)`构造

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:55:11.907

将左大括号移到`{`the 之前`chomp;`
并删除第一个`my @files;`
并更改分隔符`qq`

```
my $file;
my $parse;
my @files = <*>;

foreach $file(@files) {
    chomp ($file);
    $parse = system qq#paste <(cut -f1,2,13 $file) <(cut -f12 $file)#;
} 
```

# python - 从 python 程序写入日志文件

> ID：15474095
> 
> 赞同：10
> 
> 时间：2013-03-18T10:05:27.210
> 
> 标签：python, logging

我想将一些字符串输出到日志文件中，并且希望日志文件不断更新。

我查看了[日志记录模块](http://docs.python.org/2/library/logging.html#handler-objects)pf python 并发现它主要是关于格式化和并发访问。

如果我遗漏了什么或其他方式，请告诉我

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T10:15:31.283

通常我会做以下事情：

```
 # logging  
  LOG = "/tmp/ccd.log"                                                     
  logging.basicConfig(filename=LOG, filemode="w", level=logging.DEBUG)  

  # console handler  
  console = logging.StreamHandler()  
  console.setLevel(logging.ERROR)  
  logging.getLogger("").addHandler(console) 
```

日志部分初始化日志的[基本配置](http://docs.python.org/2/howto/logging.html#logging-basic-tutorial)。在下文中，我设置了一个控制台处理程序，它分别打印出一些日志信息。通常我的控制台输出设置为只输出错误（logging.ERROR）和LOG文件中的详细输出。

您的日志现在将打印到文件中。例如使用：

```
logger = logging.getLogger(__name__)
logger.debug("hiho debug message") 
```

甚至

```
logging.debug("next line") 
```

应该管用。

Doug Hellmann 有一个[很好的指南](http://doughellmann.com/2007/05/pymotw-logging.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-22T12:46:48.557

在使用日志记录方面加我 10 美分。我最近才发现 Logging 模块，起初被推迟了。也许只是因为它最初看起来像很多工作，但它真的很简单而且非常方便。

这是我使用的设置。类似于 Mkinds 答案，但包含时间戳。

```
# Set up logging
log = "bot.log"
logging.basicConfig(filename=log,level=logging.DEBUG,format='%(asctime)s %(message)s', datefmt='%d/%m/%Y %H:%M:%S')
logging.info('Log Entry Here.') 
```

这将产生类似的东西：

```
22/09/2015 14:39:34 Log Entry Here. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T10:07:15.783

您可以使用 Logging API 记录到文件。

示例：[http ://docs.python.org/2/howto/logging.html#logging-to-a-file](http://docs.python.org/2/howto/logging.html#logging-to-a-file)

# java - 如何使用 Maven 将 WAR 文件部署到 Tomcat？

> ID：15474098
> 
> 赞同：3
> 
> 时间：2013-03-18T10:05:36.597
> 
> 标签：java, maven, deployment

我在我的 Java 项目中使用 Maven，我想将 WAR 部署到我的本地主机 Tomcat。

我的`pom.xml`文件中有以下几行：

```
<properties>
    <tomcat.target>C:\Directory</tomcat.target>
</properties>

<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-war-plugin</artifactId>
      <version>2.3</version>
      <configuration>
        <webappDirectory>${tomcat.target}</webappDirectory>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

输出日志为：

```
[INFO] --- maven-install-plugin:2.3.1:install (default-install) ---
[INFO] Installing C:\Directory\name.war to C:\Directory\name.war
[INFO] Installing C:\Directory\pom.xml to C:\Directory\name.pom 
```

如您所见，我想配置这一行：

> **到**C:\Directory\name.war

如何将其指向 Tomcat 的 /webapps 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:10:48.870

```
<configuration>
                    <url>http://127.0.0.1:8080/manager</url>
                    <server>TomcatServer</server>
                    <path>/mkyongWebApp</path>
                </configuration> 
```

检查链接[http://www.mkyong.com/maven/how-to-deploy-maven-based-war-file-to-tomcat/](http://www.mkyong.com/maven/how-to-deploy-maven-based-war-file-to-tomcat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:27:35.800

### 使用不同的 Tomcat 管理器 URL

```
<project>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <version>1.2-SNAPSHOT</version>
        <configuration>
          <url>http://www.example.com:1234/mymanager</url>
        </configuration>
      </plugin>
      ...
    </plugins>
    ...
  </build>
  ...
</project> 
```

请参阅[使用页面](http://mojohaus.org/tomcat-maven-plugin/usage.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:28:01.503

如果您使用的是 netbeans，请将其添加到您的 pom

```
 <properties>
        <netbeans.hint.deploy.server>Tomcat70</netbeans.hint.deploy.server>
    </properties> 
```

否则您可以使用这些链接[http://winfig.com/?p=76](http://winfig.com/?p=76)和[http://www.avajava.com/tutorials/lessons/how-do-i-deploy-a-maven-web-application- to-tomcat.html](http://www.avajava.com/tutorials/lessons/how-do-i-deploy-a-maven-web-application-to-tomcat.html)

# mysql - 如何使用其中的一些子查询优化此查询

> ID：15474101
> 
> 赞同：0
> 
> 时间：2013-03-18T10:05:46.167
> 
> 标签：mysql, query-optimization, subquery

我的查询是这样的：

```
SELECT date_format( created_at, '%Y-%m-%d' ) AS the_date, 
COUNT(s.id) AS total, 
(SELECT COUNT(ks.id) FROM kc_shares ks WHERE site = 'facebook' AND date_format( created_at, '%Y-%m-%d' ) = the_date ) AS total_facebook, 
(SELECT COUNT(ks.id) FROM kc_shares ks WHERE site = 'twitter' AND date_format( created_at, '%Y-%m-%d' ) = the_date ) AS total_twitter 
FROM `kc_shares` s
GROUP BY `the_date` 
```

我想要得到的是每日分享的数量，其中包含总份额、facebook 的总份额（因此 site = 'facebook'）和 twitter 的总份额。这就是为什么我需要`GROUP BY`.

当它有几千行时，没有问题。但是该表目前几乎有 200,000 行，并且查询非常慢，大约需要 20-30 秒，我猜还要更多。

我尝试向站点和 created_at 字段添加索引，但无济于事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:10:55.067

移动子选择以便加入它们，而不是为每个返回的行进行子选择。

像这样的东西（未经测试）： -

```
SELECT date_format( created_at, '%Y-%m-%d' ) AS the_date, 
COUNT(s.id) AS total, 
Sub1.total_facebook, Sub2.total_twitter
FROM `kc_shares` s
LEFT OUTER JOIN (SELECT date_format( created_at, '%Y-%m-%d' ) AS sub_date, COUNT(ks.id) AS total_facebook FROM kc_shares ks WHERE site = 'facebook' GROUP BY sub_date ) Sub1 ON date_format( created_at, '%Y-%m-%d' ) = Sub1.sub_date
LEFT OUTER JOIN (SELECT date_format( created_at, '%Y-%m-%d' ) AS sub_date, COUNT(ks.id) AS total_twitter  FROM kc_shares ks WHERE site = 'twitter' GROUP BY sub_date ) Sub2 ON date_format( created_at, '%Y-%m-%d' ) = Sub2.sub_date
GROUP BY `the_date` 
```

虽然找到一种方法来对非派生列（即日期/时间的日期部分）进行连接也会有所帮助。在这里可能是一个很好的例子，用于一点或非规范化，在当前存储的日期/时间之外添加一个仅用于日期的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:12:48.163

我认为子查询正在消耗性能。所以也许你可以做这样的事情：

```
SELECT 
    date_format( created_at, '%Y-%m-%d' ) AS the_date, 
    COUNT(s.id) AS total, 
    SUM(CASE WHEN s.site='facebook' THEN 1 ELSE 0 END) AS total_facebook, 
    SUM(CASE WHEN s.site='twitter' THEN 1 ELSE 0 END) AS total_twitter
FROM 
    `kc_shares` s
GROUP BY 
    `the_date 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:20:02.520

另一种方法是更改​​查询的工作方式。以下将为每一天/站点提供行，而不是将两个站点放在同一行上。

```
SELECT 
   date_format( created_at, '%Y-%m-%d' ) AS the_date,site, 
   count(id) 
FROM 
   kc_shares s 
where 
   (site="facebook" or site="twitter") ) 
group by  
   created_at, site 
```

我假设 created_at 是一个日期字段。

这应该提供相同的数据（我想，我没有尝试过），但格式不同。

在 (created_at,site) 上尝试索引。

# asp.net - 成功回调在 $.getJSON 中不起作用

> ID：15474103
> 
> 赞同：0
> 
> 时间：2013-03-18T10:05:48.573
> 
> 标签：asp.net, json, web-services, cross-domain

我有一个我想调用的跨域 web 服务，但是当我尝试调用它时，我在 json 中得到了正确的响应（在 firebug 中检查）但成功回调永远不会触发，而是执行错误回调。

这是我的 JavaScript 代码。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
            $.getJSON("http://[external domain]/Service.asmx/SendMail?callback=?", { 'body': txtEmail.value }, function (data) {
                alert("SUCCESS");
            })
            .error(function (data) { alert("ERROR: " + data.responseText); })
        });
    });
</script> 
```

这是我的网络服务代码。

```
<%@ WebService Language="C#" Class="Service" %>
using System;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;
using System.Net.Mail;
using System.Web.Script.Serialization;
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[ScriptService]

public class Service : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public void SendMail(string body)
    {
        Context.Response.Clear();
        Context.Response.AddHeader("Access-Control-Allow-Origin", "*");
        Context.Response.ContentType = "application/json";
        JavaScriptSerializer js = new JavaScriptSerializer();
        try
        {
            MailMessage message = new MailMessage();
            message.From = new MailAddress("[senders mail]");
            message.To.Add("[recepient mail]");
            message.IsBodyHtml = true;
            message.Priority = MailPriority.High;
            message.Subject = "[subject]";
            message.Body = body;

            SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
            client.EnableSsl = true;
            client.Credentials = new System.Net.NetworkCredential("[username]", "[password]");
            client.Send(message);

            string str = "{\"value\" : \"sent\"}";
            // also tried with JavascriptSerializer like in catch block, that too not working.
            Context.Response.Flush(); 
            Context.Response.Write(str);

        }
        catch(Exception ex) 
        {
            string str = js.Serialize(ex.Message);
            Context.Response.Flush();
            Context.Response.Write(str);
        }

    }    
} 
```

以下是萤火虫中追踪的响应。 ![在此处输入图像描述](../Images/5446bcf9f5a5799797bfb9558cf07ac7.png)

谁能告诉我可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:13:08.033

很可能因为您的 Web 服务位于外部域中，所以这是一个跨域问题。您必须为此使用**jsonp**。

您可以在这里查看 -[跨域 jsonp 的基本操作方法](https://stackoverflow.com/questions/5463256/basic-how-to-for-cross-domain-jsonp)

# jquery - 如何使用 jquery 获取部分 url？

> ID：15474112
> 
> 赞同：0
> 
> 时间：2013-03-18T10:06:15.087
> 
> 标签：jquery

我创建了一个动态 div，我使用这个变量并附加到一个 div 中：

```
vAlbum=vAlbum+"<a href='Preview.aspx' onclick=
'location.href=this.href?albumname="+result.Items[i].AlbumName+"'>" 
```

如何`albumname`使用 jQuery 在 Preview.aspx 页面中获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:12:25.780

使用 jQuery URL 解析器 - [https://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

然后变成：

```
var albumname = $.url().param("albumname"); 
```

# performance - OrmLiteSqliteOpenHelper onDowngrade

> ID：15474116
> 
> 赞同：1
> 
> 时间：2013-03-18T10:06:47.127
> 
> 标签：performance, ormlite

我正在[为 android 使用 ormlite，](http://ormlite.com/javadoc/ormlite-android/)并且我有一个扩展 OrmLiteSqliteOpenHelper 的数据库表类。我在 google play 中有一些报告称该应用程序因以下原因而强制关闭：

```
android.database.sqlite.SQLiteException: Can't downgrade database from version 3 to 2 
```

用户可能会通过备份或其他方式降级。问题是我无法实现 SQLiteOpenHelper 上存在的 onDowngrade[方法](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onDowngrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)：

ormlite是否支持降级？有什么解决方法吗？至少可以避免逼近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:15:04.430

有趣的。所以这个`onDowngrade(...)`方法是在 API 11 中添加的。我不能只在 ORMLite 中添加对它的支持。不幸的是，这意味着您将不得不制作自己的`onDowngrade`方法，该方法与`onUpgrade(...)`in相同`OrmLiteSqliteOpenHelper`。类似于以下内容：

```
public abstract void onUpgrade(SQLiteDatabase database, ConnectionSource connectionSource, int oldVersion,
        int newVersion) {
    // your code goes here
}

public final void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    ConnectionSource cs = getConnectionSource();
    /*
     * The method is called by Android database helper's get-database calls when Android detects that we need to
     * create or update the database. So we have to use the database argument and save a connection to it on the
     * AndroidConnectionSource, otherwise it will go recursive if the subclass calls getConnectionSource().
     */
    DatabaseConnection conn = cs.getSpecialConnection();
    boolean clearSpecial = false;
    if (conn == null) {
        conn = new AndroidDatabaseConnection(db, true);
        try {
            cs.saveSpecialConnection(conn);
            clearSpecial = true;
        } catch (SQLException e) {
            throw new IllegalStateException("Could not save special connection", e);
        }
    }
    try {
        onDowngrade(db, cs, oldVersion, newVersion);
    } finally {
        if (clearSpecial) {
            cs.clearSpecialConnection(conn);
        }
    }
} 
```

* * *

有关该[`onDowngrade(...)`方法](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onDowngrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)的更多信息，请参见下文：

```
public void onDowngrade (SQLiteDatabase db, int oldVersion, int newVersion); 
```

引用[javadocs](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onDowngrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)：

> 当数据库需要降级时调用。这与 onUpgrade(SQLiteDatabase, int, int) 方法非常相似，但只要当前版本比请求的版本新，就会调用它。但是，此方法不是抽象的，因此客户不一定要实现它。如果没有被覆盖，默认实现将拒绝降级并抛出 SQLiteException

另见：

> [无法将数据库从版本 2 降级到 1](https://stackoverflow.com/questions/15018025/cant-downgrade-database-from-version-2-to-1)

# ios - 关于 iOS 内部配置文件过期

> ID：15474117
> 
> 赞同：0
> 
> 时间：2013-03-18T10:06:47.313
> 
> 标签：ios, profile, provisioning

一年前，我分发了一个内部 iOS 应用程序。现在，配置文件已过期，但相关证书未过期。我可以在开发人员门户中更新配置文件并让用户使用 iPhone 配置实用程序安装新配置文件，或者我有使用 Xcode 重新签署整个应用程序？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:37:05.377

只需更新您的配置文件。如果您想在配置文件过期后在您的 iOS 设备中重新安装该应用程序，则无法安装。您需要使用更新的新下载配置文件进行单独构建。

如果应用程序已安装在设备中，则无需担心。它会起作用的。

# xml - 如何从magento左面板中删除块？

> ID：15474119
> 
> 赞同：3
> 
> 时间：2013-03-18T10:06:51.647
> 
> 标签：xml, magento, layout, magento-1.5

我已将 magento 注册页面布局从更改`1column.phtml`为`2columns-left.phtml`in `customer.xml`。我只需要在我的 magento 注册页面左侧面板上显示一个块。应从页面中删除所有其他块。目前，我在左侧面板上使用自定义块获得了三个 magento 的默认块。如何使用 xml 删除其他块？任何人请帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:13:00.220

`<remove name="block.name" />`

在你的 layout.xml

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T16:04:06.407

在 local.xml 中

```
<customer_account_login>
   <remove name="left.permanent.callout" />  

   <remove name="catalog.compare.sidebar" />  <!--product compare-->

   <remove name="left.reports.product.viewed" /> <!--recently viewed prod-->

</customer_account_login>" 
```

这样你就可以删除你想要的任何块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:07:37.300

为此，您必须在**customer_account_login**部分的**customer.xml中使用带有块名称的删除标签**

# firefox-addon - Firefox Addon 中的 Widget Attach 事件中的显示面板

> ID：15474120
> 
> 赞同：0
> 
> 时间：2013-03-18T10:06:52.993
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在开发一个小型 Firefox 插件，它有一个`Widget`和一个`Panel`. 我在构造函数中传递了`panel`对象`widget`。

`Panel`当我单击`Widget`对象时显示。但是，当我打电话`panel.show([Widget Object])`时`onAttach`，它给了我错误`anchor.ownerDocument not defined`。

如果我调用 just `panel.show()`，它会在浏览器窗口的中心显示面板。

如何在`onAttach`事件中将小部件设置为面板的锚点？

如果这是不可能的，我可以`click`在小部件上触发一个事件，以便执行`onClick`操作并且我的面板出现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T06:45:40.707

而不是使用`mainPanel.show()`，使用`view.panel = mainPanel;`：

```
myWidget = require('widget').Widget({
      id: "text-entry",
      label: "StrikeBase",
      contentURL: data.url("icon.png"),
//    panel: mainPanel,
      // Instead using this
      onClick: function(view) { 
//        mainPanel.show();
         // Instead using this              
          view.panel = mainPanel;
      }
}); 
```

# php - Symfony2 Doctrine2 - 通过教义：映射：导入从现有数据库生成一对多注释

> ID：15474121
> 
> 赞同：2
> 
> 时间：2013-03-18T10:07:03.737
> 
> 标签：php, database, symfony, orm, doctrine-orm

我想通过使用 Doctrine 工具进行逆向工程从现有数据库生成实体

```
/*
 * SET FOREIGN_KEY_CHECKS=0;
  -- ----------------------------
  -- Table structure for `country`
  -- ----------------------------
  DROP TABLE IF EXISTS `country`;
  CREATE TABLE `country` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
  ) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=utf8;

  -- ----------------------------
  -- Table structure for `provider`
  -- ----------------------------
  DROP TABLE IF EXISTS `provider`;
  CREATE TABLE `provider` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
  ) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;

  -- ----------------------------
  -- Table structure for `provider_country`
  -- ----------------------------
  DROP TABLE IF EXISTS `provider_country`;
  CREATE TABLE `provider_country` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `providerId` int(11) unsigned NOT NULL,
  `countryId` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_provider_has_id0_idx` (`providerId`),
  KEY `fk_user_country_idx` (`countryId`),
  CONSTRAINT `fk_rss_has_id` FOREIGN KEY (`providerId`) REFERENCES `provider` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_country` FOREIGN KEY (`countryId`) REFERENCES `country` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
  ) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;

  SET FOREIGN_KEY_CHECKS=1;
 */ 
```

您可以通过执行以下两个命令来要求 Doctrine 导入架构并构建相关的实体类。

1 美元`php app/console doctrine:mapping:import AcmeBlogBundle annotation`
2 美元`php app/console doctrine:generate:entities AcmeBlogBundle`

但现在该学说仅在多方“ProviderCountry”表中检测到 ManyToOne 关系

如果我需要添加 OneToMany 关系，我必须通过添加以下注释手动添加注释

在 Provider.php 添加

```
/**
 * @ORM\OneToMany(targetEntity="ProviderCountry", mappedBy="providerId", cascade={"persist"})
 */
private $datas; 
```

在 ProviderCountry.php 添加

```
 /**
     * @var Provider
     *
     * @ORM\ManyToOne(targetEntity="Provider", inversedBy = "datas")
     * @ORM\JoinColumn(name="providerId", referencedColumnName="id")
     */

private $userid; 
```

那么如何通过学说命令生成一对多注释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:17:03.020

简而言之，这是教义 orm lib 内部的变化，

你可以通过改变来解决这个问题

供应商/学说/orm/lib/Doctrine/ORM/Mapping/Driver/DatabaseDriver.php

替换以下语句

```
foreach ($foreignKeys as $foreignKey) {
          $foreignTable = $foreignKey->getForeignTableName();
          $cols = $foreignKey->getColumns();
          $fkCols = $foreignKey->getForeignColumns();

          $localColumn = current($cols);
          $associationMapping = array();
          $associationMapping['fieldName'] = $this->getFieldNameForColumn($tableName, $localColumn, true);
          $associationMapping['targetEntity'] = $this->getClassNameForTable($foreignTable);

          if ($primaryKeyColumns && in_array($localColumn, $primaryKeyColumns)) {
          $associationMapping['id'] = true;
          }

          for ($i = 0; $i < count($cols); $i++) {
          $associationMapping['joinColumns'][] = array(
          'name' => $cols[$i],
          'referencedColumnName' => $fkCols[$i],
          );
          }

          //Here we need to check if $cols are the same as $primaryKeyColums
          if (!array_diff($cols, $primaryKeyColumns)) {
          $metadata->mapOneToOne($associationMapping);
          } else {
          $metadata->mapManyToOne($associationMapping);
          }
          } 
```

改成

```
foreach ($foreignKeys as $foreignKey) {
            $foreignTable = $foreignKey->getForeignTableName();
            $cols = $foreignKey->getColumns();
            $fkCols = $foreignKey->getForeignColumns();

            $localColumn = current($cols);
            $associationMapping = array();
            $associationMapping['fieldName'] = $this->getFieldNameForColumn($tableName, $localColumn, true);
            $associationMapping['targetEntity'] = $this->getClassNameForTable($foreignTable);

            for ($i = 0; $i < count($cols); $i++) {
                $associationMapping['joinColumns'][] = array(
                    'name' => $cols[$i],
                    'referencedColumnName' => $fkCols[$i],
                );
            }
            $metadata->mapManyToOne($associationMapping);
        }

        foreach ($this->tables as $tableCandidate) {
            if ($this->_sm->getDatabasePlatform()->supportsForeignKeyConstraints()) {
                $foreignKeysCandidate = $tableCandidate->getForeignKeys();
            } else {
                $foreignKeysCandidate = array();
            }

            foreach ($foreignKeysCandidate as $foreignKey) {
                $foreignTable = $foreignKey->getForeignTableName();

                if ($foreignTable == $tableName && !isset($this->manyToManyTables[$tableCandidate->getName()])) {

                    $fkCols = $foreignKey->getForeignColumns();
                    $cols = $foreignKey->getColumns();

                    $localColumn = current($cols);

                    $associationMapping = array();
                    $associationMapping['fieldName'] = $this->getFieldNameForColumn($tableCandidate->getName(), $tableCandidate->getName(), true);
                    $associationMapping['targetEntity'] = $this->getClassNameForTable($tableCandidate->getName());
                    $associationMapping['mappedBy'] = $this->getFieldNameForColumn($tableCandidate->getName(), $localColumn, true);

                    try {
                        $primaryKeyColumns = $tableCandidate->getPrimaryKey()->getColumns();
                        if (count($primaryKeyColumns) == 1) {
                            $indexColumn = current($primaryKeyColumns);
                            $associationMapping['indexBy'] = $indexColumn;
                        }
                    } catch (SchemaException $e) {

                    }

                    $metadata->mapOneToMany($associationMapping);
                }
            }
        } 
```

现在如果你运行学说：映射：导入

你会发现 OneToMany 注释。

然后运行学说：生成：实体

你会发现双方都是单向的关系。

# javascript - 有没有中点椭圆算法？

> ID：15474122
> 
> 赞同：6
> 
> 时间：2013-03-18T10:07:06.773
> 
> 标签：javascript, algorithm, graphics

是否有类似于中点圆算法的中点椭圆绘图算法？

我已经在谷歌上搜索了示例，但我发现的任何示例要么不起作用，要么用于填充椭圆，而不是绘制。此外，关于中点圆算法的维基百科页面指的是椭圆版本的存在，但有一个死链接，谷歌似乎无法帮助解决。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T16:37:47.843

终于在这里找到了答案：

[http://geofhagopian.net/sablog/Slog-october/slog-10-25-05.htm](http://geofhagopian.net/sablog/Slog-october/slog-10-25-05.htm)

复制和调整以更普遍适用于以下......

```
function ellipsePlotPoints (xc,yc,  x,  y)
{
    setPixel (xc + x, yc + y);
    setPixel (xc - x, yc + y);
    setPixel (xc + x, yc - y);
    setPixel (xc - x, yc - y);
}

function ellipse(xc,yc,  a,  b)
{
    var a2 = a * a;
    var b2 = b * b;
    var twoa2 = 2 * a2;
    var twob2 = 2 * b2;
    var p;
    var x = 0;
    var y = b;
    var px = 0;
    var py = twoa2 * y;

    /* Plot the initial point in each quadrant. */
    ellipsePlotPoints (xc,yc, x, y);

    /* Region 1 */
    p = Math.round (b2 - (a2 * b) + (0.25 * a2));
    while (px < py) {
        x++;
        px += twob2;
        if (p < 0)
        p += b2 + px;
        else {
        y--;
        py -= twoa2;
        p += b2 + px - py;
        }
        ellipsePlotPoints (xc,yc, x, y);
    }

    /* Region 2 */
    p = Math.round (b2 * (x+0.5) * (x+0.5) + a2 * (y-1) * (y-1) - a2 * b2);
    while (y > 0) {
        y--;
        py -= twoa2;
        if (p > 0)
        p += a2 - py;
        else {
        x++;
        px += twob2;
        p += a2 - py + px;
        }
        ellipsePlotPoints (xc,yc, x, y);
    }
} 
```

# jquery - 在 Blueimp jQuery File Upload 中完成所有上传后用于完成和重定向的自定义按钮

> ID：15474123
> 
> 赞同：1
> 
> 时间：2013-03-18T10:07:06.773
> 
> 标签：jquery, twitter-bootstrap, upload, blueimp, jquery-file-upload

我想在 jquery-file-upload API plugin 上添加一个自定义按钮。当所有文件上传时，此按钮处于启用状态，如果没有文件或没有上传文件，则按钮保持禁用状态。我想要一个按钮，所以当上传完成后，只有用户可以点击完成按钮，否则它保持禁用状态。

请帮忙 ！！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:55:41.927

试试这个，在文件上传 html 中添加自定义按钮并使其禁用：

```
<div class="span7">
                    <span class="fileinput-button ufloat">
                        <span class="icon icon-plus"></span>
                        <span class="upload_txt">choose file to upload</span>
                        <input type="file" multiple="multiple" size="1"/>
                    </span>
                    <button type="submit" id="uploadBtn" class="btn-primary start">
                        <i class="icon icon-upload"></i>
                        <span>Upload</span>
                    </button>
                    <button type="reset" id="cancelBtn" class="btn-primary cancel">
                        <i class="icon icon-ban-circle"></i>
                        <span>cancel</span>
                    </button>

                    <!-- Adding your custom button -->
                    <button id="customBtn" disabled="true"></button>
                </div> 
```

并在您的 main.js 中将其添加到您的完成功能中：

```
$('#fileuploadbasic').fileupload({
         done: function{
                  var filess= data.files[0];
            var filenam = filess.name;
            data.context.text('');
            $(data.context).append('<td class="name" colspan="6">'+filenam+' uploaded Success</td>');

// after finish upload and there are no other files to upload make
// make custom button enabled
if( $('tbody tr.template-upload td.start').length == 0) {
    $('#customBtn').removeAttr('disabled');
}
         }
}); 
```

# java - 为什么我不能比较这两个字符串？

> ID：15474126
> 
> 赞同：1
> 
> 时间：2013-03-18T10:07:09.873
> 
> 标签：java, android

出于某种原因，无论我在两个文本框中输入什么内容，都会得到匹配响应。一开始我在使用`==`，但没有用，所以我尝试切换到`if( a.equals( b ))`

我还是被困住了。

请帮忙！

```
package net.2TextboxesStringCompare;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import android.widget.EditText;

/*
 * 2TextboxesStringCompare
 */

public class Code8 extends Activity implements OnClickListener {

    Button accept;
    EditText numberStudents, numberStudents2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        numberStudents = new EditText(this);
        numberStudents2 = new EditText(this);

        // find our button in the UI by its ID
        accept = (Button)findViewById(R.id.accept);

        // set listeners for the button. Since our current class
        // implements the OnClickListener interface
        // we can simply pass the current object ("this") into
        // the listener. The appropriate method will therefore
        // be called when the event fires.
        accept.setOnClickListener(this);

    }

    /* implement an event handler that responds to click events */
    public void onClick(View v){
        String a = numberStudents.getText().toString();
        String b = numberStudents2.getText().toString();
        if( a.equals( b ) )
            Toast.makeText(getApplicationContext(), "Matches", 
            Toast.LENGTH_SHORT).show();
        else
            Toast.makeText(getApplicationContext(), numberStudents.getText()+" !=      
            "+numberStudents2.getText(), Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:21:17.300

您的编辑文本没有出现。

使用此代码：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.linLayout); 
```

`linLayout`是您的`LinearLayout`in的 id `main.xml`，无论您拥有什么，都可以替换它。

```
ll.setOrientation(LinearLayout.VERTICAL);

 numberStudents = new EditText(this);
 numberStudents2 = new EditText(this);

ll.addView(numberStudents);
ll.addView(numberStudents2); 
```

*或者*，如果您在 XML 布局中创建 edittext，则使用：

```
numberStudents = (EditText)findViewById(R.id.et1);
numberStudents2  = (EditText)findViewById(R.id.et2); 
```

比较部分：

```
if(a.trim().equals(b))
{
     // show toast
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:40:43.460

您还没有声明要使用哪个editText，基本上您正在比较两个具有相同数据但名称不同的字符串对象，这就是它总是显示匹配的原因。纠正这个

1.转到main.xml

2.create to editText，比如editText1和editText2

3.现在在你的代码中使用它们如下

```
numberStudents = (EditText)findViewById(R.id.editTex1);
numberStudents2  = (EditText)findViewById(R.id.editTex2); 
```

现在应该没事了。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:32:26.297

看看这段代码。这是您必须检查在提交或单击按钮时从编辑文本中获得的字符串的方式

```
package com.example.testr;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    Button button1;
    EditText editText1, editText2;
    Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        context=this;
        button1=(Button)findViewById(R.id.button1);

        editText1=(EditText)findViewById(R.id.editText1);
        editText2=(EditText)findViewById(R.id.editText2);

        button1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                if ((editText1.getText().toString().trim()).equals(editText2.getText().toString().trim())) {

                    Toast.makeText(context, "both are equal", 1000).show();
                }
                else
                {
                    Toast.makeText(context, "both are not  equal", 1000).show();
                }
            }
        });

    }

} 
```

# expressionengine - ExpressionEngine：富文本区域中的图像标记导致错误/404 页面

> ID：15474128
> 
> 赞同：0
> 
> 时间：2013-03-18T10:07:18.070
> 
> 标签：expressionengine, richtext

最近推出了一个使用ExpressionEngine作为CMS的网站，但是遇到了一个问题，每当使用该标签并单击“保存”发布文章时，它会导致404页面，不知道为什么会发生这种情况，有什么想法吗？

我得到以下调试信息：

```
(0.000014 / 4.04MB) - Begin Template Processing -
(0.000985 / 4.08MB) URI: admin.php
(0.001007 / 4.08MB) Path.php Template: /
(0.001027 / 4.08MB) Retrieving Template
(0.001042 / 4.08MB) Parsing Template URI
(0.005163 / 4.26MB) Template group and template not found, showing 404 page
(0.005190 / 4.26MB) Retrieving Template from Database: /
(0.006250 / 4.27MB) Template Found
(0.006988 / 4.27MB) Retrieving Template from File
(0.007293 / 4.26MB) Template Type: 404
(0.007322 / 4.27MB) Parsing Site Variables 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:25:46.337

似乎是主机问题，需要关闭 mod_security……</p>

# javascript - IE9 和 IE8 浏览器不支持 $(".k-grid-header").html()

> ID：15474129
> 
> 赞同：0
> 
> 时间：2013-03-18T10:07:18.800
> 
> 标签：javascript, html, kendo-ui, kendo-grid

```
 $(".k-grid-header").html('<table style="table-layout:fixed;"><tr style="color:#ee9f05"><th></th><th></th><td colspan="2" style="text-align:center;border-right:2px solid #ee9f05;color:#ee9f05;font-weight:bold"><a style="text-align:center;color:#ee9f05;font-weight:bold" href="DetailsPage.html">Xbox</a></td><td colspan="2" style="text-align:center;border-right:2px solid #ee9f05;font-weight:bold"><u>Surface</u></td><td colspan="2" style="text-align:center;border-right:2px solid #ee9f05;font-weight:bold"><u>Keyboard</u></td><td colspan="2" style="text-align:center;font-weight:bold"><u>Mouse</u></td></tr><tr style="color:#ee9f05;text-align:center;"><td></td><td></td><td style="color:#ee9f05;text-align:center;font-weight:bold">Actual</td><td style="color:#ee9f05;text-align:center;font-weight:bold;border-right:2px solid #ee9f05;">Var</td><td style="color:#ee9f05;text-align:center;font-weight:bold">Actual</td><td style="color:#ee9f05;text-align:center;font-weight:bold;border-right:2px solid #ee9f05;">Var</td><td style="color:#ee9f05;text-align:center;font-weight:bold">Actual</td><td style="color:#ee9f05;text-align:center;font-weight:bold;border-right:2px solid #ee9f05;">Var</td><td style="color:#ee9f05;text-align:center;font-weight:bold">Actual</td><td style="color:#ee9f05;text-align:center;font-weight:bold;">Var</td></tr></table>'); 
```

这是我的 kendo-grid 标头模板，此模板在 IE 10 浏览器中运行良好，但适用于其他浏览器，如 IE 9 IE 8 等。它在那些浏览器中不支持我做错了什么？

![在浏览器 IE9 和 IE8 中](../Images/890f98467187f094edbdf13c5f02dedd.png)![在 Windows 8 系统的浏览器 IE10 中](../Images/f019d21d76bbcc967f4611cab3bd59dc.png)

# firefox - Firefox、Chrome、Internet Explorer 中的窗口媒体播放器问题

> ID：15474131
> 
> 赞同：1
> 
> 时间：2013-03-18T10:07:31.370
> 
> 标签：firefox, media, windows-media-player

我在使用 Windows 媒体播放器时遇到了一个安静有趣的问题，我正在使用安装在客户端本地计算机上的默认窗口媒体播放器在浏览器中查看媒体。我打开它是我开发的灯箱，它似乎没有问题。

当我在浏览器中打开任何媒体时，它会显示白屏，如果我切换选项卡、调整窗口大小或检查它等。它会开始播放媒体（即视频/音频），否则它会继续显示白屏...

签入`jsfiddle`

```
http://jsfiddle.net/aash1010/cHMEy/ 
```

（特别是在 Firefox 中）

# ios - 为 UIImageView 中的图像提供特殊效果

> ID：15474137
> 
> 赞同：0
> 
> 时间：2013-03-18T10:08:02.493
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview, uikit

在我的应用程序中，我想在`UIImageView`.

例如，当一个按钮被点击时，它应该重定向到另一个视图控制器。当加载该视图控制器时，应该会出现具有某种特殊效果的图像。我已经搜索了如何做到这一点，但只能通过使用一组图像来完成。我想知道是否可以在不使用图像数组的情况下为单个图像设置动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:17:49.497

是的 - 可以为单个图像设置动画。许多视图属性（frame、bounds、center、transform、alpha、backgroundColor 和 contentStretch）可以使用`UIView`动画方法进行动画处理。

例如，要“溶解” a `UIImageView`：

```
[UIView animateWithDuration:2.0 animations:^{
    imageView.alpha = 0.f;
}]; 
```

在上面的示例中，图像视图将在 2 秒内逐渐消失。

对于“从左翻转”为变换设置动画。

此外，[核心动画](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)提供了额外的动画功能。

# jquery - jQuery onclick 删除表格行

> ID：15474139
> 
> 赞同：1
> 
> 时间：2013-03-18T10:08:17.873
> 
> 标签：jquery

如何在点击时删除表格行？

这是一个[jsfiddle](http://jsfiddle.net/lolipop/DjhuY/1/)。

我只想删除嵌套 del 链接的行，而不是脚本现在正在执行的最后一行。

Onclick 调用**`delTableRow()`**函数，需要更改该函数以删除嵌套的 del 链接行。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
function addTableRow(jQtable){
    jQtable.each(function(){
        var tds = '<tr>';
        jQuery.each($('tr:last td', this), function() {tds += '<td>'+$(this).html()+'</td>';});
        tds += '</tr>';
        if($('tbody', this).length > 0){$('tbody', this).append(tds);
        }else {$(this).append(tds);}
    });
}
function delTableRow(jQtable){
    jQtable.each(function(){
        $('tr:last', this).remove();
    });
}
</script>
<table width="100%" border="1" cellspacing="0" cellpadding="0" id="mans">
  <tr>
    <td>11</td>
    <td>12</td>
    <td>13</td>
    <td><a onclick="delTableRow($('#mans'));" href="#">del</a></td>
  </tr>
  <tr>
    <td>21</td>
    <td>22</td>
    <td>23</td>
    <td><a onclick="delTableRow($('#mans'));" href="#">del</a></td>
  </tr>
  <tr>
    <td>31</td>
    <td>32</td>
    <td>33</td>
    <td><a onclick="delTableRow($('#mans'));" href="#">del</a></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T10:16:56.550

删除 onclick 并替换为一个类（即 class="remove"）。将事件绑定到表 - 这将使您获得比拥有大量事件处理程序的性能增益，并确保添加的新行也将遵循此行为。

```
$('table').on('click','tr a.remove',function(e){
  e.preventDefault();
  $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:14:49.857

删除所有内联javascript并使用click事件..无需在attr中调用onclick事件...这应该是他的伎俩..`$(this).parents('tr').remove();`

尝试这个

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">  </script>
<script type="text/javascript">
  $(function(){
      $('table').on('click','tr a',function(e){
         e.preventDefault();
        $(this).parents('tr').remove();
      });
 });

</script>
<table width="100%" border="1" cellspacing="0" cellpadding="0" id="mans">
  <tr>
    <td>11</td>
    <td>12</td>
    <td>13</td>
    <td><a href="#">del</a></td>
     //---^---here remove the onclick inline function for all.. 
  </tr>
 ....
</table> 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/DjhuY/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T10:12:20.443

```
$('td a').on('click',function(e){
   //delete code.
   e.preventDefault();
   $(this).parent().parent().remove(); // OR $(this).parents('tr').remove();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:15:52.210

利用

```
$(this).parent().parent().remove(); 
```

在锚标签上。因此，如果您的链接是 td 的子项，它是 tr 的子项，则 tr 将被删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:14:16.753

```
$('td a').on('click',function(){
   e.preventDefault();
   $(this).parent().parent().remove();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-29T12:06:04.687

正如@Ian Wood 提到的，我们可以使用 .closest() 来返回第一个祖先，或者最接近我们的删除按钮，并使用 .remove() 来删除元素。

这就是我们如何使用 jQuery click 事件而不是使用 JavaScript onclick 来实现它。

```
$(document).ready(function(){
     $("#myTable").on('click','.btnDelete',function(){
         $(this).closest('tr').remove();
      });
  });
```

```
table{
  width: 100%;
  border-collapse: collapse;
}

table td{
  border: 1px solid black;
}
button:hover{
  cursor: pointer;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table id="myTable">
<tr>
  <th>ID</th>
  <th >Name</th>
  <th>Age</th>
  <th width="1%"></th>
</tr>

<tr>
  <td >SSS-001</td>
  <td >Ben</td>
  <td >25</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-002</td>
  <td >Anderson</td>
  <td >47</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-003</td>
  <td >Rocky</td>
  <td >32</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-004</td>
  <td >Lee</td>
  <td >15</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>
```

# java - 在实现泛型接口的抽象类上丢失列表类型

> ID：15474147
> 
> 赞同：0
> 
> 时间：2013-03-18T10:08:41.690
> 
> 标签：java, generics, type-erasure

我在理解以下场景时遇到了一些麻烦。我有一个由抽象类和扩展抽象类的具体类实现的“通用”接口。

问题是返回参数化列表的抽象类中的所有方法都丢失了它们的类型，所以我收到一个编译错误，告诉我它无法从对象转换为原始 List 类型。

谁能提供一些见解？

最后，我想要的是在抽象类上有一个 getId 和 setId 方法，其返回类型为`java.lang.object` or `<T extends Object>`，具体类将其返回类型实现为任何他们想要的。

这是我的不同对象的代码：

通用接口

```
public interface MyInterface<T>{

   public T getId();
   public void setId(T id);

} 
```

实现接口的抽象类

```
public abstract class MyAbstractClass<T> implements MyInterface<T>{

  private List<String> texts;
  private List<Integer> notes;

   public List<String> getTexts(){
     return texts;
   }

   public List<Integer> getNotes(){
     return notes;
   }
} 
```

实现抽象类的具体类

```
public class MyConcreteClass implements MyAbstractClass<Integer>{

    private Integer id;

    public Integer getId(){
       return this.id;
    }

    public void setId(Integer id){
          this.id = id;
    } 
```

}

其他一些类：

```
 public class SomeOtherClass{

   public void process(List<T extends MyAbstractClass> myClassList){

  // Compilation error -> 
  // Type mismatch: cannot convert from element type Object to String  
       for(MyAbstractClass myObj : myClassList){

            System.out.println("object Id : " + myObj.getId());

              // Compilation error -> 
              // Type mismatch: cannot convert from element type Object to String  
             for(String txt : myObj.getTexts()){

             }
       }
   } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:19:25.077

当您将泛型类型`MyAbstractClass<T>`用作原始类型 ( `MyAbstractClass`) 时，其成员声明中与泛型相关的所有内容都被禁用（即`List<String>`变为`List`）。

因此，您需要将方法的参数声明为参数化类型。如果您不关心实际类型参数，请使用通配符：

```
public void process(MyAbstractClass<?> myClass) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:24:54.847

我认为您需要另一个界面。请参阅此处`MyAbstractClass`实现两个接口`MyInterface<T>, MyOtherInterface`。

```
 public static interface MyInterface<T> {
    public T getId();

    public void setId(T id);
  }

  public static interface MyOtherInterface {
    public List<String> getTexts();

    public List<Integer> getNotes();
  }

  public abstract class MyAbstractClass<T> implements MyInterface<T>, MyOtherInterface {
    private List<String> texts;
    private List<Integer> notes;

    public List<String> getTexts() {
      return texts;
    }

    public List<Integer> getNotes() {
      return notes;
    }
  }

  public static class MyConcreteClass extends MyAbstractClass<Integer> {
    private Integer id;

    public Integer getId() {
      return this.id;
    }

    public void setId(Integer id) {
      this.id = id;
    }
  }

  public class SomeOtherClass {
    public void process(MyOtherInterface myClass) {

      // NO Compilation error
      for (String str : myClass.getTexts()) {
        // some processing
      }
    }
  } 
```

# eclipse - 如何更新 Tomcat wtpwebapps\ROOT 文件夹？

> ID：15474148
> 
> 赞同：1
> 
> 时间：2013-03-18T10:08:42.153
> 
> 标签：eclipse, tomcat, tomcat7

我有一个关于`ROOT`每次从 Eclipse 启动或重新启动 Tomcat 时如何更新文件夹的问题。

我与：

*   Eclipse Juno 服务版本 2
*   服务器：Tomcat 7

我如何启动 Tomcat 7：

1.  服务器视图，打开添加和删除对话框，并添加项目：**MyNewProject**。
2.  结果：`wtpwebapps`正如预期的那样，是一个`MyNewProject`使用其资源创建的文件夹。
3.  将文件夹 MyResources 复制到`wtpwebapps\ROOT`.
4.  启动 Tomcat 并打开主页。
5.  结果：页面打开，资源可用。

我想要做的是自动执行第 3 步，因为这些资源必须在`ROOT`文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:19:43.907

这是在“根”上下文下公开“MyResources”的另一种方法。

1.  双击您的服务器以打开服务器属性
2.  单击“模块”选项卡。
3.  选择“添加外部 Web 模块”。
4.  在“文档库”中导航到“MyResources”目录。
5.  在路径中指定'/'

现在，假设您有文件“MyResources/index.html”，您可以通过以下 URL 访问它 -

“本地主机：8080/index.html”

# asp.net - 你调用的对象是空的。动态添加复选框列表控件时会发生这种情况

> ID：15474155
> 
> 赞同：0
> 
> 时间：2013-03-18T10:09:07.347
> 
> 标签：asp.net

**你调用的对象是空的。**

```
protected void cmdSave_Click(object sender, EventArgs e)
{
    string strNames = string.Empty;
    CheckBoxList Chkboxx = (CheckBoxList)PlaceHolder1.FindControl("Chkbox");
    foreach (ListItem em in Chkboxx.Items)  //-------- (Showing error)
    {
        if (em.Selected)
        {
            strNames += em.Value + ", ";
        }
    }

    string final_name = strNames.Substring(0, strNames.Length - 2);
    lblNames.Text = final_name;

} 
```

**实际上我正在动态添加复选框控件：**

```
protected void ddl_varient_SelectedIndexChanged1(object sender, EventArgs e)
{
    string query = "select prd_vrtyvalue_id,varient_value from tbl_ProductVariety_Value  where varient='" + ddl_varient.SelectedItem.Text + "' " +
                      " order by varient_value asc ";
    DataTable abc = new DataTable();
    SqlDataAdapter ada = new SqlDataAdapter(query, new CommonClass().connection());
    ada.Fill(abc);

    ChkboxList.ID = "Chkbox";
    for (int i = 0; i < abc.Rows.Count; i++)
    {
        ChkboxList.Items.Add(new ListItem(abc.Rows[i]["varient_value"].ToString(), abc.Rows[i]["prd_vrtyvalue_id"].ToString()));
    }
    ChkboxList.RepeatColumns = 2; 
    PlaceHolder1.Controls.Add(ChkboxList);
} 
```

***谁能告诉我，我到底做错了什么！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:24:10.807

ASP.NET WebForms 的工作方式是在每次回发期间重新构建整个页面。所以，我想这就是正在发生的事情：

*   页面得到“构建”，并且仅包含在您的 ASCX/ASPX 文件中定义的控件。
*   用户单击 DDL_VARIENT 复选框并将 ChkboxList 添加到 PlaceHolder1
*   表单被呈现给用户，以便他们可以看到 ChkboxList
*   单击保存按钮，导致另一个回发。
*   重新构建页面，将所有控件设置回您的 ASPX/ASCX 代码中定义的内容。这不**包括**ChkboxList。
*   您的代码被命中，ChkboxList 不再存在，您遇到了问题。

要解决此问题，您可以根据 DDL_VARIENT 复选框的值在 Page_Load 上重新添加 ChkboxList。如果我是你，我会很想在你的 ASPX/ASCX 代码中定义 ChkboxList，然后根据 Page_Load 中 DDL_VARIENT 复选框的值设置列表的可见性。

我应该补充一点，以上所有内容都取决于您使用 ASP.NET WebForms。如果您使用的是 MVC，那么它可能是错误的。

# highcharts - HighCharts：更新点值时如何更新条形颜色

> ID：15474157
> 
> 赞同：0
> 
> 时间：2013-03-18T10:09:08.487
> 
> 标签：highcharts

我使用“更新”命令来刷新我的系列中一个点的值：

```
mychart.series[0].data[i].update(sigvalue); 
```

现在我也想更新这个列/点的颜色。我试过

```
mychart.series[0].data[i].color = "#FF0000"; 
```

但这没有用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:48:06.157

颜色应由 attr() 函数更改。

[http://jsbin.com/ubapaz/10/edit](http://jsbin.com/ubapaz/10/edit)

```
 $('#test').click(function() {
chart.series[0].data[4].graphic.attr("fill","#ff0000");
    }); 
```

API[**`here`**](http://api.highcharts.com/highcharts#Element.attr%28%29)供您参考。

# python - shuffle vs permute numpy

> ID：15474159
> 
> 赞同：93
> 
> 时间：2013-03-18T10:09:25.970
> 
> 标签：python, numpy, scipy, permutation, shuffle

`numpy.random.shuffle(x)`和 和有什么不一样`numpy.random.permutation(x)`？

我已经阅读了文档页面，但是当我只想随机打乱数组的元素时，我无法理解两者之间是否有任何区别。

更准确地说，假设我有一个数组`x=[1,4,2,8]`。

`shuffle(x)`如果我想生成 x 的随机排列，那么和之间有什么区别`permutation(x)`？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-18T10:18:21.457

`np.random.permutation`与 有两个不同`np.random.shuffle`：

*   如果传递一个数组，它将返回该数组的洗牌*副本*；`np.random.shuffle`就地打乱数组
*   如果传递一个整数，它将返回一个打乱的范围，即`np.random.shuffle(np.arange(n))`

> 如果 x 是整数，则随机置换 np.arange(x)。如果 x 是一个数组，则制作一个副本并随机打乱元素。

源代码可能有助于理解这一点：

```
3280        def permutation(self, object x):
...
3307            if isinstance(x, (int, np.integer)):
3308                arr = np.arange(x)
3309            else:
3310                arr = np.array(x)
3311            self.shuffle(arr)
3312            return arr 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-12-06T21:26:20.077

补充@ecatmur 所说的内容，`np.random.permutation`当您需要打乱有序对时很有用，尤其是对于分类：

```
from np.random import permutation
from sklearn.datasets import load_iris
iris = load_iris()
X = iris.data
y = iris.target

# Data is currently unshuffled; we should shuffle 
# each X[i] with its corresponding y[i]
perm = permutation(len(X))
X = X[perm]
y = y[perm] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-10T13:51:48.133

permutation() 方法返回一个重新排列的数组（并且保持原始数组不变），该方法将保持原始数组不变并返回一个打乱的数组，例如 x = [1,4,2,8]是原始数组，置换方法将返回重新排列的数组（比如说 [8,4,1,2]）。现在，您有两个数组，原始数组和重新排列的数组。

另一方面，

shuffle() 方法对原始数组进行更改，例如 x = [1,4,2,8] 是原始数组，并且 shuffle 方法将返回 shuffle 数组（假设 shuffled 数组是 [8,4,1 ,2])。现在，原始数组本身已更改为 Shuffled 数组，您只剩下 shuffled 数组。

参考：- [https://www.w3schools.com/python/numpy_random_permutation.asp](https://www.w3schools.com/python/numpy_random_permutation.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-16T11:13:26.113

添加@ecatmur，这是一个简短的解释。首先，我创建了一个形状为 3,3 且数字从 0 到 8 的数组

```
import numpy as np
x1 = np.array(np.arange(0,9)).reshape(3,3) #array with shape 3,3 and have numbers from 0 to 8

#step1: using np.random.permutation
x_per = np.random.permutation(x1)
print('x_per:', x_per)
print('x_1:', x_1)
#Inference: x1 is not changed and x_per has its rows randomly changed

#The outcome will be 
x1: [[0 1 2]
     [3 4 5]
     [6 7 8]]
x_per:[[3 4 5]
       [0 1 2]
       [6 7 8]]
#Lets apply shuffling
x2 = np.array(range(9)).reshape(3,3)
x2_shuffle = np.random.shuffle(x2)
print('x2_shuffle:', x2_shuffle)
print('x2', x2)

#Outcome: 
x2_shuffle: None
x2 [[3 4 5]
    [0 1 2]
    [6 7 8]] 
```

关键推断是：当 x 是一个数组时，numpy.random.permutation(x) 和 numpy.random.shuffle(x) 都可以沿第一个轴随机排列 x 中的元素。numpy.random.permutation(x) 实际上返回一个新变量并且原始数据没有改变。其中 numpy.random.shuffle(x) 已更改原始数据并且不返回新变量。我只是试图用一个例子来展示，这样它就可以帮助别人。谢谢！！

# python - 如何在加载库时加快 python 启动和/或减少文件搜索？

> ID：15474160
> 
> 赞同：7
> 
> 时间：2013-03-18T10:09:25.993
> 
> 标签：python, startup

我有一个由多用户环境中用 python 编写的不同工具组成的框架。

我第一次登录系统并启动一个命令需要 6 秒才能显示几行帮助。如果我立即再次发出相同的命令，则需要 0.1 秒。几分钟后，它又回到了 6 秒。（短期缓存的证明）

该系统位于 GPFS 上，因此磁盘吞吐量应该没问题，但由于系统中的文件数量可能会导致访问量较低。

```
strace -e open python tool | wc -l 
```

显示启动该工具时正在访问的 2154 个文件。

```
strace -e open python tool | grep ENOENT | wc -l 
```

显示正在寻找 1945 个丢失的文件。（你问我一个非常糟糕的命中/未命中率:-)

我有一种预感，加载工具所涉及的过多时间被查询 GPFS 关于所有这些文件所消耗，并且这些文件被缓存以供下一次调用（在系统或 GPFS 级别），尽管我不知道如何测试/证明给我看。我没有系统的 root 访问权限，只能写入 GPFS 和 /tmp。

有可能改善这一点`python quest for missing files`吗？

关于如何以简单的方式进行测试的任何想法？（在 /tmp 上重新安装所有内容并不简单，因为涉及到许多软件包，virtualenv 也无济于事（我认为），因为它只是链接 gpfs​​ 系统上的文件）。

一个选项当然是拥有一个分叉的守护进程，但这远非“简单”，而是最后的解决方案。

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:28:11.987

使用 imp 模块怎么样？特别是这里有一个函数：imp.find_module(module, path) [http://docs.python.org/2.7/library/imp.html](http://docs.python.org/2.7/library/imp.html)

至少这个例子（见下文）减少了 open() 系统调用的数量与简单的 'import numpy,scipy' 相比：（更新：但看起来不可能以这种方式显着减少系统调用......）

```
import imp
import sys

def loadm(name, path):
    fp, pathname, description = imp.find_module(name,[path])
    try:
        _module = imp.load_module(name, fp, pathname, description)
        return _module
    finally:
        # Since we may exit via an exception, close fp explicitly.
        if fp:
            fp.close()

numpy = loadm("numpy", "/home/username/py-virtual27/lib/python2.7/site-packages/")
scipy = loadm("scipy", "/home/username/py-virtual27/lib/python2.7/site-packages/") 
```

我想你也最好检查一下你的 PYTHONPATH 是空的还是小的，因为这也会增加加载时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:23:44.463

Python 2 首先查找相对于当前包的模块。如果您的库代码对许多顶级模块有很多导入，那么这些模块都会首先被查找为相对。所以，如果包`foo.bar`import `os`，那么 Python*首先*寻找`foo/bar/os.py`. Python 本身也缓存了这个未命中。

在 Python 3 中，默认值改为绝对导入；*您可以切换 Python 2.5 及更高版本以使用每个模块*的绝对导入：

```
from __future__ import absolute_import 
```

文件查找未命中的另一个来源是加载`.pyc`字节码缓存文件。如果由于某种原因缺少这些（文件系统对于当前的 Python 进程不可写），那么 Python 将在每次运行时继续寻找那些。[`compileall`您可以使用模块](http://docs.python.org/2/library/compileall.html)创建这些缓存：

```
python -m compileall /path/to/directory/with/pythoncode 
```

前提是您以正确的写入权限运行它。

# compiler-construction - Sass——按特定顺序观看

> ID：15474168
> 
> 赞同：0
> 
> 时间：2013-03-18T10:10:06.593
> 
> 标签：compiler-construction, sass, watch

在 textmate 中，我的 .scss 文件按字母顺序排列。我将它们编译成 .css 文件。

```
sass --watch css/sass:css/compiled 
```

但是我遇到了错误，因为我需要先编译我的变量、mixins 和 resets，然后再编译其余的文件。

如何设置文件编译的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:25:06.747

你可能有这样的文件结构：

```
css/sass/main.scss
css/sass/mixins.scss
css/sass/print.scss
css/sass/reset.scss
css/sass/variables.scss 
```

这些文件称为**partials**。您需要做的另一件事是**`_`**在每个文件名之前添加（下划线），如下所示：

```
css/sass/_main.scss
css/sass/_mixins.scss
css/sass/_print.scss
css/sass/_reset.scss
css/sass/_variables.scss 
```

这将告诉 Sass 不要将这些文件编译为单独的 .css 文件。

现在您想将它们编译成单个文件。在此处创建新文件`style.scss`（不带下划线）：

```
css/sass/style.scss 
```

打开它并将您的部分文件按所需的顺序放在那里：

```
@import "variables";
@import "mixins";
@import "reset";
@import "main";
@import "print"; 
```

请注意，文件开头的下划线不必在定义中，Sass 会为您处理。

现在你可以运行

```
sass --watch css/sass:css/compiled 
```

Sass 会将所有部分文件的内容编译成一个位于

```
css/compiled/style.css 
```

# java - new File() 构造函数可以在 Android 上返回 null 吗？

> ID：15474169
> 
> 赞同：9
> 
> 时间：2013-03-18T10:10:07.833
> 
> 标签：java, android

我在android培训中心网站上看到了这段代码：

```
boolean hasExternalStoragePrivateFile() {
    // Get path for the file on external storage.  If external
    // storage is not currently mounted this will fail.
    File file = new File(getExternalFilesDir(null), "DemoFile.jpg");
    if (file != null) {
        return file.exists();
    }
    return false;
} 
```

这是否意味着在 Android 上`new File()`可以返回 null？

[http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String))

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T10:16:36.090

不，构造函数可能永远不会返回 null。构造函数要么返回完全初始化的对象，要么抛出异常或错误。

# node.js - RequireJS 优化器是否有 ExpressJS 中间件？

> ID：15474171
> 
> 赞同：1
> 
> 时间：2013-03-18T10:10:22.353
> 
> 标签：node.js, express, requirejs, amd

我不想使用任何构建过程来运行 RequireJS 优化器。RequireJS 优化器是否有 ExpressJS 中间件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:22:57.787

你能试试这个[例子](https://gist.github.com/mdellanoce/1453578)进行优化吗？它配置app来优化js文件，然后使用它。这应该和中间件一样好。

# java - 手动更改 GroupLayout 中的垂直组

> ID：15474179
> 
> 赞同：1
> 
> 时间：2013-03-18T10:10:46.280
> 
> 标签：java, swing

我使用 NetBeans 设计器设计了一个 Swing GUI，这意味着它是一个`GroupLayout`. 我想进入并手动更改它创建的垂直组之一中的元素，但是该代码是不可编辑的，我在属性对话框中看不到任何允许我执行此操作的内容。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:42:14.520

`GroupLayout`GUI 设计器中的代码生成属性支持*非常有限；*生成的代码几乎完全取决于设计师的定位。您可能需要检查可用于其他布局的属性以进行比较，例如`GridBagLayout`.

虽然将设计器用于*整个*GUI 很诱人，但您可能需要考虑[此处](https://stackoverflow.com/a/2561540/230513)显示的方法，其中设计器的使用仅限于单个[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)中的一个（或几个）面板。

# github - 在多 nsf xpages 项目中，我应该将每个 nsf 数据库设置为单独的存储库吗？

> ID：15474180
> 
> 赞同：1
> 
> 时间：2013-03-18T10:10:48.297
> 
> 标签：github, xpages

我正在为我的 xpages 项目设置 github，其中一个有多个 nsf 数据库链接到它。最佳做法是什么？我是为每个数据库设置一个存储库，还是创建一个大项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:08:49.233

Personally I would make one repository with each db of the application being a project within that repository. This would reduce the hassle of branching and merging because when you create a new branch you would have all of the applications within that branch.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:39:39.383

您也可以考虑使用子模块。请参阅[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)或[https://skyl.org/log/post/skyl/2009/11/nested-git-repositories-with-github-using -submodule-in-three-minutes/](https://skyl.org/log/post/skyl/2009/11/nested-git-repositories-with-github-using-submodule-in-three-minutes/)供参考。

# android - 将数据集从台式电脑同步到多个 Android 平板电脑

> ID：15474183
> 
> 赞同：0
> 
> 时间：2013-03-18T10:10:53.373
> 
> 标签：android, synchronization

我希望能够将“主”数据集从台式机同步到几台平板电脑。我不能保证所有设备在数据更改时都可用，因此我需要在数据集更新时更新平板电脑。

数据集位于桌面的一个文件夹中，只是一堆 PDF 文件和几个 txt 文件，没什么特别的。

在规模的一端，我想我可以运行一个脚本，将文件夹复制到平板电脑，通过 USB 安装更新或不更新数据。不是我想走的路，我想要一些更光滑的东西。

我想我可以从桌面 JAVA 应用程序中调用 ADB 来推送文件，尽管如果多个设备想要一次更新它们的本地数据集，这似乎很困难。

最后，我想知道类似 OpenMobster （[https://code.google.com/p/openmobster/](https://code.google.com/p/openmobster/)）的东西，但我是新手，它看起来相当复杂，值得复杂吗？

我还有其他选择吗？如果这有什么不同，我打算使用基于 Linux 的 Sync PC？我要说明的最后一个限制是，这些都不能连接到 Internet，因此 Dropbox 等都不是初学者。他们是我的第一个想法，但遗憾的是没有。

感谢您的帮助，我知道这是相当笼统的，但我需要朝着正确的方向努力才能开始更多的研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:44:58.557

像这样的东西应该可以完成这项工作： [https ://play.google.com/store/apps/details?id=org.pcfilesync&hl=en](https://play.google.com/store/apps/details?id=org.pcfilesync&hl=en)

也许这个问题更好地位于 superuser.com？

# machine-learning - 如何处理变长的特征向量？

> ID：15474186
> 
> 赞同：10
> 
> 时间：2013-03-18T10:10:55.223
> 
> 标签：machine-learning

假设您正在尝试根据某些特征对房屋进行分类：

*   总面积
*   房间的数量
*   车库区

但并不是所有的房子都有车库。但是当它们这样做时，它们的总面积会成为一个非常有区别的特征。利用此功能中包含的信息的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:14:15.060

您可以合并一个零/一虚拟变量，指示是否有车库，以及车库面积与虚拟变量的叉积（对于没有车库的房屋，将面积设置为零）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:52:50.663

最好的方法是使用所有功能构建数据集，并且在大多数情况下，将那些不可用的列填充为零就可以了。

使用您的示例，它将类似于：

```
Total area  Number of rooms Garage area
100         2               0
300         2               5
125         1               1.5 
```

通常，您选择的学习算法足够强大，可以使用这些零来正确分类该条目。毕竟，没有价值，它仍然是算法的信息。如果您的数据有偏斜，这可能会成为一个问题，但在这种情况下，您无论如何都需要解决偏斜问题。

编辑：

我只是意识到还有另一个答案是你害怕使用零，因为它可能与小车库混淆。虽然我仍然认为这没有问题（小车库和零之间应该有足够的差异），但您仍然可以使用相同的结构将不存在区域车库标记为负数（假设为 -1）。

另一个答案中指出的解决方案也完全合理，具有指示房屋是否有车库的额外功能可以正常工作（特别是在基于决策树的算法中）。我只是更喜欢将数据的维度保持在尽可能低的水平，但归根结底，这更像是一种偏好，而不是技术决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T10:55:17.253

你会想要加入一个零指标功能。也就是说，当车库大小为 0 时为 1，任何其他值为 0 的特征。

您的特征向量将是：面积 | 房间数 | 车库大小 | 车库存在

然后，您的机器学习算法将能够看到车库大小的这个（非线性）特征。

# sorting - 在分页网格extjs 4中对整个商店进行排序

> ID：15474189
> 
> 赞同：4
> 
> 时间：2013-03-18T10:11:02.990
> 
> 标签：sorting, extjs, grid, extjs4, paging

在我的应用程序中，我有一个分页网格，当我单击一列对其进行排序时，它仅对当前页面进行排序。如何对整个商店进行排序，然后将其拆分为页面？我可以覆盖排序函数以将额外的参数发送到将我的数据库转换为 json 存储的 php 脚本并编辑添加的查询`ORDER BY extraparam`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T10:47:05.667

您需要`remoteSort`通过设置`remoteSort: true`商店实例来启用。见**[远程排序](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-remoteSort)**

您现在将收到排序，因为您将分页作为自己的参数列表接收并可以将其包含到您的查询中。

# r - data.tables：合并

> ID：15474194
> 
> 赞同：0
> 
> 时间：2013-03-18T01:17:51.220
> 
> 标签：r, dataframe, data.table

我对 data.tables 有第二个问题。据我了解，合并在数据表中称为联接。如何控制我拥有哪种类型的合并（一对一、多对一、一对多），以及“使用”数据集中的变量是否会替换主数据集中的变量？

此外，如果为了执行合并需要密钥，并且我必须对我的数据进行多次合并，我是否必须不断更改密钥？这对我来说似乎不是很干净....

提前谢谢你，马特奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:49:34.160

您可以尝试使用该`merge()`功能。在那里你可以定义你想如何合并你的data.frames。

```
x, y    
data frames, or objects to be coerced to one.

by, by.x, by.y  
specifications of the columns used for merging. See ‘Details’.

all 
logical; all = L is shorthand for all.x = L and all.y = L, where L is either TRUE or FALSE.

all.x   
logical; if TRUE, then extra rows will be added to the output, one for each row in x that has no matching row in y. These rows will have NAs in those columns that are usually filled with values from y. The default is FALSE, so that only rows with data from both x and y are included in the output.

all.y   
logical; analogous to all.x. 
```

尝试`?merge`了解更多信息。

您也可以在这里查看[QuickR Merge](http://www.statmethods.net/management/merging.html)。

# c# - 是否可以接受/希望如果我从被调用者而不是从调用者抛出错误

> ID：15474197
> 
> 赞同：0
> 
> 时间：2013-03-18T10:11:14.033
> 
> 标签：c#, .net, coding-style

如果我从被调用者而不是调用者抛出错误，是否可以接受/希望？或者我应该从被调用者那里获取错误信息，然后从调用者那里抛出异常？哪一种是首选/渴望的方式？

```
public static List<ProductBuilder> GetProductBuilders(GetProductsRequest productsRequest)
{
    List<ProductBuilder> productBuilders = new List<ProductBuilder>();
    ...
    ... // Some logics to populate productBuilders

   if (productBuilders.Count == 0)
    {
        Logger.LogMessage(productsRequest.SessionId, "No ProductBuilders were created.");
        throw new ProductException(ProductException.ExceptionCode.SaveFailed, "No Service has qualified.");
    }

    return productBuilders;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:33:29.037

您的答案是*坚持[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)*。

在您提供的示例中，该方法`GetProductBuilders`具有（至少）两个职责：

1.  填充对象集合
2.  验证结果计数

如果您将代码重构为：

```
public static List<ProductBuilder> PopulateProductBuilders(...)
{
    // Logic to populate the collection
}

public static List<ProductBuilder> GetProductBuilders(GetProductsRequest productsRequest)
{
    var productBuilders = PopulateProductBuilders();
    if(!productBuilders.Any())
    {
        Logger.LogMessage(productsRequest.SessionId, "No ProductBuilders were created.");
        throw new ProductException(ProductException.ExceptionCode.SaveFailed, "No Service has qualified.");
    }
} 
```

然后很清楚哪个方法应该对空列表执行验证并抛出异常。

换句话说，如果您将方法的职责分开，您将更好地了解在何处引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:14:32.323

恕我直言，

如果您的任何类期望来自客户端的某些参数，您的框架类代码应该抛出异常，否则客户端应该处理返回的输出。

# r - data.tables：比较两个数据集

> ID：15474199
> 
> 赞同：0
> 
> 时间：2013-03-18T01:11:44.537
> 
> 标签：r, dataframe

当我发现使用数据表而不是数据框要快得多时，我刚写完我的 R Montecarlo 模拟。我正在尝试切换到数据帧，但无法翻译以下代码：

```
for (i in 1:nrow(b.dt)) {
  for (j in nrow(a.dt):1) {
    if (b.dt[i,]$condition1==FALSE 
            && b.dt[i,]$b.x1 < a.dt[j,]$a.x1) {
          a.dt[j,]$a.x1 = b.dt[i,]$b.x1
      break
    }
  }
} 
```

其中`a.dt`和`b.dt`是两个数据框， 和 是两个数据框中`a.x1`同名`b.x1`的两个变量。有没有人可以帮助我？到目前为止，我还没有设置任何密钥...

# mongodb - MongoDB中的命令和方法有什么区别？

> ID：15474201
> 
> 赞同：5
> 
> 时间：2013-03-18T10:11:26.797
> 
> 标签：mongodb, mongodb-java

在这个问题中，我指的是[数据库命令](http://docs.mongodb.org/manual/reference/commands/)和[JavaScript 方法](http://docs.mongodb.org/manual/reference/method/)。

我想知道为什么 MongoDB 有 2 组不同的命令和方法操作。首先，我认为命令是 JavaScript 中可用操作的子集，但后来我意识到有些命令（如[filemd5](http://docs.mongodb.org/manual/reference/command/filemd5/#filemd5)）不能 [直接] 用作方法。

我的问题是为什么命令和方法之间存在区别，为什么它们不能简单地是具有不同表示的同一组操作。第一个命令更适合声明式操作（例如通过 REST 可用），第二个命令更适合 DB 脚本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:05:29.623

## JavaScript 方法

[JavaScript 方法](http://docs.mongodb.org/manual/reference/method/)可以看作是抽象层。许多方法只是数据库命令的包装器。您可以通过仅编写不带`()`.

例子：

```
> db.stats
function (scale) {
    return this.runCommand({dbstats:1, scale:scale});
} 
```

一些方法执行多个命令并聚合输出。例子：

```
> db.printCollectionStats
function () {
    var mydb = this;
    this.getCollectionNames().forEach(function (z)      
        {print(z);printjson(mydb.getCollection(z).stats());print("---");});
} 
```

## JavaScript 方法与数据库命令

像`find`,`update`等`delete`一些方法**不调用命令**：

```
> db.coll.find
function (query, fields, limit, skip) {
    return new DBQuery(this._mongo, this._db, this, this._fullName, this._massageObject(query), fields, limit, skip);
} 
```

[MongoDB 有线协议](http://docs.mongodb.org/meta-driver/latest/legacy/mongodb-wire-protocol/)为, , , , 等指定不同的[请求操作码](http://docs.mongodb.org/meta-driver/latest/legacy/mongodb-wire-protocol/#request-opcodes)。`query``insert``update``delete``getmore``killcursors`

命令可以使用不同的请求操作码来实现。**然而， MongoDB**作者决定将命令实现为对一个名为`$cmd`.

的内省`runCommand`揭示了它：

```
> db.runCommand
function (obj) {
    if (typeof obj == "string") {
        var n = {};
        n[obj] = 1;
        obj = n;
    }
    return this.getCollection("$cmd").findOne(obj);
} 
```

## 内部命令

某些命令是**内部**命令，不打算由用户调用。因此，MongoDB shell 中没有提供方便地访问这些命令的方法。

几个例子：

*   [`_recvChunkAbort`](http://docs.mongodb.org/manual/reference/command/recvChunkAbort/)
*   [`_recvChunkCommit`](http://docs.mongodb.org/manual/reference/command/recvChunkCommit/)
*   [`_recvChunkStart`](http://docs.mongodb.org/manual/reference/command/recvChunkStart/)
*   [`replSetHeartbeat`](http://docs.mongodb.org/manual/reference/command/replSetHeartbeat)

# windbg - 给定来自 UISpy 和进程内存转储的 RuntimeId，我如何找到隐藏 UI 元素的原因？

> ID：15474206
> 
> 赞同：1
> 
> 时间：2013-03-18T10:11:41.120
> 
> 标签：windbg, microsoft-ui-automation

有时，应用程序错误会生成带有 Z-Index 的隐藏 UI 控件，这意味着它位于其他 UI 元素之上。这个隐藏的窗格出现在屏幕的左上角，并阻止用户从任何最大化的窗口加载“文件”菜单。如果应用程序关闭，UI 元素就会消失。

使用 UISpy，我能够捕获有关元素的以下信息：

```
AutomationElement
  General Accessibility
    AccessKey:     ""
    AcceleratorKey:            ""
    IsKeyboardFocusable:               "True"
    LabeledBy:      "(null)"
    HelpText:        ""

  State
    IsEnabled:       "True"
    HasKeyboardFocus:    "False"

  Identification
    ClassName:    "WindowsForms10.Window.8.app.0.365bd83"
    ControlType:  "ControlType.Pane"
    Culture:            "(null)"
    AutomationId:              ""
    LocalizedControlType:               "pane"
    Name:              ""
    ProcessId:       "10968 (MyApplication)"
    RuntimeId:     "42 21628486"
    IsPassword:    "False"
    IsControlElement:       "True"
    IsContentElement:      "True"

  Visibility
    BoundingRectangle:   "(0, 0, 132, 38)"
    ClickablePoint:              "(null)"
    IsOffscreen:   "False"

ControlPatterns 
```

我还有一个在 WinDbg 中打开的应用程序的内存转储。如何找到使用 RuntimeID 引用 UI 元素的托管对象`"42 21628486"`？或者也许我可以搜索具有特定宽度的对象？

我希望通过找到托管对象，它会提供一些关于隐藏窗口原因的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:28:31.940

还没有弄清楚是否可以使用 WinDbg，但能够附加 Visual Studio 的一个实例并且......

使用`Inspect.exe`能够找到一个 hwnd（可能与 RuntimeId 相同但不确定）：

```
How found:  Focus [o:0xFFFFFFFC,c:0x0]
    hwnd=0x0006219E 32bit class="WindowsForms10.Window.8.app.0.27e1210" style=0x96010000 ex=0x90088 
```

触发了一个断点，并能够在即时窗口中使用以下命令找到控件：

```
System.Windows.Forms.Control.FromHandle(new IntPtr(401822)) 
```

# android - ArrayAdapter + Spinner

> ID：15474210
> 
> 赞同：0
> 
> 时间：2013-03-18T10:11:44.277
> 
> 标签：android, spinner, android-arrayadapter

我正在使用微调器以及它们随附的数组适配器，但我无法理解**setDropDownViewResource()**的作用。它与构建 arrayadapter 时可以传递的布局有什么关系（即 Context 上下文、**int** textViewResourceId 、List 对象））？

* * *

```
ArrayAdapter<String> adp1;
ArrayList<String> arrayList1 = new ArrayList<String>(Arrays.asList(getResources().getStringArray(R.array.sp1_array)));

Spinner sp1 = (Spinner) view.findViewById(R.id.spinner1);

adp1 = new ArrayAdapter<String> (mcntxt, R.layout.my_simple_list_item, arrayList1);
adp1.setDropDownViewResource(R.layout.my_simple_dropdown_item_1line);
sp1.setAdapter(adp1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:03:21.837

您在构造函数上使用的 ID 将用于 Spinner 主窗口，或者`prompt`，如文档所述。当您调用 时`setDropDownViewResource()`，您正在建立用于微调器下拉列表中的项的布局。请注意，这适用于用作下拉菜单的微调器。

# ios - 是否可以在没有对话的情况下发布故事并将照片上传到 Facebook 提要

> ID：15474215
> 
> 赞同：0
> 
> 时间：2013-03-18T10:11:49.340
> 
> 标签：ios, facebook, facebook-graph-api

是否可以在不向用户显示 Facebook 对话窗口的情况下将故事发布到某人的 Facebook 提要并上传图片（如果我有权这样做 - 显然）？也许使用 Graph API？

一旦用户在我的应用程序中按下“共享”按钮，我希望这发生在幕后。

请注意，这是一个仅限客户端的应用程序 - 另一端没有服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:17:28.470

是的，有可能。您可以为此使用 Graph API。

您可以使用以下代码：

```
[facebook requestWithGraphPath:@"me/photos"
                                  andParams:params
                            andHttpMethod:@"POST"
                              andDelegate:self]; 
```

希望这会帮助你。

祝一切顺利 ！！！

# mysql - SQL中的第N个最大工资查询

> ID：15474216
> 
> 赞同：2
> 
> 时间：2013-03-18T10:11:51.787
> 
> 标签：mysql, sql

我有一张桌子；包含 2 个字段，姓名和薪水。我使用下面的脚本来找到第三个最高薪水。

```
SELECT DISTINCT sal 
FROM downtodate1.emp e1  
WHERE 3 = (SELECT COUNT(DISTINCT sal) FROM downtodate1.emp e2 WHERE e1.sal<= e2.sal); 
```

我想知道它是如何工作的以及为什么在这里使用 3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:43:57.210

```
select distinct sal 
from downtodate1.emp AS e1  
where 3 = (
    select count(distinct sal) 
    from downtodate1.emp e2 
    where e1.sal <= e2.sal
); 
```

考虑你有一个这样的表：

```
sal
---
3
3
2
1
1
0 
```

有了这部分

```
select distinct sal 
from downtodate1.emp AS e1 
```

你会得到结果

```
sal
---
3
2
1
0 
```

这产生了4种不同的薪水。

现在子查询

```
 select count(distinct sal) 
    from downtodate1.emp e2 
    where e1.sal <= e2.sal 
```

对主查询中的每一行执行。它计算小于或等于主查询中行的不同值的数量。所以这个结果实际上是（但没有显示）：

```
sal | count(distinct sal) where e1.sal <= e2.sal
------------------------------------------------
3     1
3     1
2     2
1     3
1     3
0     4 
```

与主查询不同，您将获得以下结果：

```
sal | count(distinct sal) where e1.sal <= e2.sal
------------------------------------------------
3     1
2     2
1     3
0     4 
```

并且使用该`WHERE`子句`3 = (/*subquery*/)`，您只会得到

```
sal | count(distinct sal) where e1.sal <= e2.sal
------------------------------------------------
1     3 
```

这一排。所以结果是`1`。

希望现在很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:31:34.083

这里有一个更快的方法...

```
 SELECT salary
   FROM
      (
        SELECT salary
             , @prev := @curr
             , @curr := salary
             , @rank := IF(@prev = @curr, @rank, @rank+1) rank
          FROM employee
         CROSS
          JOIN 
             ( SELECT @curr := null, @prev := null, @rank := 0) sel1
         ORDER 
            BY salary DESC
      ) x
  WHERE rank = 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-02T08:05:03.223

用这个....

SELECT DISTINCT sal FROM downtodate1.emp e1
WHERE 2 = (SELECT COUNT(DISTINCT sal) FROM downtodate1.emp e2 WHERE e1.sal> e2.sal);

WHERE 0 =第 1 高 Sal

WHERE 1 =第二高的萨尔

WHERE 2 =第三高的萨尔

WHERE 3 = 第四高 Sal

索引从零开始（0）

而不是这个...

SELECT DISTINCT sal FROM downtodate1.emp e1
WHERE 3 = (SELECT COUNT(DISTINCT sal) FROM downtodate1.emp e2 WHERE e1.sal<= e2.sal);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:17:54.683

相反，您可以使用它来查找第 N 个最高薪水

```
SELECT sal FROM emp
ORDER BY sal DESC
LIMIT N,1 
```

N 是第 N 个数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:19:10.303

也许重新格式化查询会澄清：

```
select distinct sal 
from downtodate1.emp AS e1  
where 3 = (
    select count(distinct sal) 
    from downtodate1.emp e2 
    where e1.sal <= e2.sal
); 
```

将子查询的结果与 3 进行比较，作为所需行的前面行数。这（可能）是 O(N^2) 计算，但在这种情况下可能就足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T10:45:11.653

这 3 和你写的一样

```
 where  
(select count(distinct sal) from downtodate1.emp e2 where e1.sal <= e2.sal) = 3 ; 
```

其中 a = 3

或其中 3 = 不同 sal 的计数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-14T14:56:22.580

使用子查询检索员工最高工资记录的简单方法

`select * from Employee where salary in (select max(salary) from Employee)`

# c# - 无法使用 System.Net.WebResponse 加载网页

> ID：15474217
> 
> 赞同：0
> 
> 时间：2013-03-18T10:11:53.860
> 
> 标签：c#, http

我使用下面的代码来加载网页内容：

```
 private string HttpGet(string uri)
    {
        WebRequest webRequest = WebRequest.Create(uri);
        try
        { 
            WebResponse webResponse = webRequest.GetResponse();
            StreamReader sr = new StreamReader(webResponse.GetResponseStream(), Encoding.GetEncoding("utf-8"), false);
            return sr.ReadToEnd().Trim();
        }
        catch (WebException ex)
        {
            MessageBox.Show(ex.Message, "HttpGet: Response error",
               MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        return null;
    } 
```

在大多数情况下，我实际上得到了 html 内容。它适用于 http;//stackoverflow.com，但如果您尝试加载 http;//www.icetrade.by（我知道分号，只是不希望它们成为链接），这在网络中正常工作即使没有启用 javascript 的浏览器，您也会得到如下信息：

```
<br />
<b>Fatal error</b>:  Class name must be a valid object or a string in <b>K:\hosting\icetrade.by\html\includes\module.class.php</b> on line <b>141</b><br /> 
```

这种行为的原因是什么，我怎样才能获得真正的 html 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:23:58.217

这绝对是服务器端错误。当某些标头（例如 UserAgent 或 Cookie）不存在时，此站点可能无法处理这种情况。

如果这是您控制的站点，请检查 module.class.php 中第 141 行发生的情况

# javascript - sessionStorage 在重新加载时到期

> ID：15474219
> 
> 赞同：1
> 
> 时间：2013-03-18T10:11:55.113
> 
> 标签：javascript, html

据我了解，HTML5`sessionStorage`旨在持续假设给定网站的单个用户会话的持续时间。这意味着它应该能够在给定站点内的重新加载或页面到页面导航中存活下来。我认为如果您离开一个站​​点然后返回到同一个浏览器选项卡中，它甚至应该存在。

无论如何，我将信息保存到 sessionStorage 没有问题，`sessionStorage.setItem('foo','bar')`但是一旦我重新加载或转到同一站点上的另一个页面，我就会丢失我的会话存储。

我在 OSX 上使用最新的 Chrome（如果重要的话）。这是我的会话存储在 Chrome 的调试器中的样子（设置时）：

![在此处输入图像描述](../Images/ebc1a3d418b99c8a97a79bf80dcf90ce.png)

![在此处输入图像描述](../Images/2366692c1c458aa7d67d88329219836d.png)

然后在重新加载同一页面后：

![在此处输入图像描述](../Images/76d0f6b41b14e96e1145db6e16858e20.png)

# java - 将 sqlrowset 中的结果导出到外部文件

> ID：15474220
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:12:02.397
> 
> 标签：java, jdbc

我在java程序中动态生成一个sql select查询并执行如下：

```
SqlRowSet result = this.mySimpleJdbcTemplate.
                      getJdbcOperations().queryForRowSet(dynamicQuery); 
```

由于查询是动态的，我不知道结果行中返回的各种列的类型。

我正在解析以下循环中的结果以写入外部文件：

```
if (result != null) {
  while (result.next()) {
    // code to write to external file

  }
} 
```

我应该放什么来将结果行写入外部文件。另外，有没有一种方法可以在写入文件之前分隔数据。例如用'|'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:15:27.003

我认为你应该使用元数据

结果.getMetaData();

这将允许您获取列名，不。列的类型等，然后您可以迭代这些列并使用 java.io.* 在文件中写入数据

```
 SqlRowSetMetaData sqlRowSetMetaData = result.getMetaData();

   String[] columnNames = sqlRowSetMetaData.getColumnNames();

   foreach(String columnName : columnNames){
        result.getXXX(columnName);
   } 
```

以及将数据写入文件的剩余代码

# iphone - 如何在iphone中制作插件之类的应用程序

> ID：15474232
> 
> 赞同：1
> 
> 时间：2013-03-18T10:12:35.647
> 
> 标签：iphone

我想在 iphone 中为移动网络浏览器制作一个类似应用程序的插件，我想在其中使用 safari（或任何浏览器）当前链接以及网页上存在的链接，当我点击它时，我的应用程序应该调用使用目标链接。

我知道移动浏览器不支持插件，

没有越狱的人可以有任何解决方案吗？

提前致谢。

# wso2 - WSO2 - 关于“xslt 工具”、“适配器”和“代理服务”的问题

> ID：15474235
> 
> 赞同：1
> 
> 时间：2013-03-18T10:12:38.587
> 
> 标签：wso2, wso2esb

有人可以帮我回答关于 WSO2 的以下三个问题：

1.  WSO2 Studio 是否支持**基于工具的图形 xslt 转换**，现在我必须将其映射到使用文本编辑器创建的 xslt 文件？

2.  WSO2 ESB 上的所有调用是否**都必须公开为“代理服务**”，无论是使用 jms 消息还是从文件系统读取？

3.  我们是否**在 WSO2 ESB 中有开箱即用的适配器**来以拖放方式与外部系统（如 SAP、Oracle 应用程序、Siebel、Peoplesoft 等）通信，而无需编写任何胶水代码？

谢谢，瓦吉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:50:13.370

Q1。WSO2 Studio 是否支持基于工具的图形 xslt 转换，现在我必须将其映射到使用文本编辑器创建的 xslt 文件？

回答：

正在努力为 Developer Studio 实现图形化 XSLT 转换工具。但正如我所提到的，这是一项正在进行的工作。因此将在未来的版本中提供。

或者，如果您有兴趣，可以使用现有的 Smooks 编辑器执行 XML 到 XML 的映射，WSO2 Developer Studio 中的 Graphical Smooks 编辑器将帮助您轻松创建 smooks 配置。

Q2。WSO2 ESB 上的所有调用是否都必须公开为“代理服务”，无论是使用 jms 消息还是从文件系统读取？

回答：

如果您想使用队列中的 JMS 消息或使用 VFS 传输读取文件，通常会配置代理服务来执行这些任务。当然，您可以使用序列来执行这些任务，但是，您需要在代理服务或 REST API 中使用这些序列。

Q3。我们是否在 WSO2 ESB 中有开箱即用的适配器来以拖放方式与外部系统（如 SAP、Oracle 应用程序、Siebel、Peoplesoft 等）通信，而无需编写任何胶水代码？

回答：

不。

目前，Developer Studio ESB 图形编辑器没有开箱即用的 IPaaS 连接器支持。但它在 Developer Studio 路线图中，这意味着它将在 Developer Studio 的未来版本中可用。

Hope this helps!

/Harshana

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:02:49.940

您可以使用作为 XSLT 映射工具提供的默认 XSLT 编辑器或 smooks（推荐用于大型消息处理）编辑器。一些适配器可以从[这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/business-messaging/)找到。

谢谢

# jquery - 如何确保在 Zurb Foundation 4 中关闭显示模式

> ID：15474236
> 
> 赞同：1
> 
> 时间：2013-03-18T10:12:44.103
> 
> 标签：jquery, zurb-foundation

在 Foundation 3 中，可以通过使用轻松确保显示模式已关闭

```
$('#myModal').trigger('reveal:close'); 
```

如果模式是打开的，它将关闭。如果它已经关闭，它将保持关闭状态。

在 Foundation 4 中，等价于

```
$('#myModal').foundation('reveal', 'close'); 
```

不幸的是，如果模式已经关闭，这实际上会打开它！

那么，如何确保模态在 Foundation 4（在 JavaScript 中）中关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:02:18.380

我实际上有同样的问题，我向 Zurb 报告了这个错误。该修复将在 4.0.9 版之前可用。目前 Foundation 的下载页面允许您下载 4.0.8 版本。因此，如果您现在需要修复，可以[从这里获取](https://github.com/zurb/foundation/blob/414e1d78ffaa7e0f542fecc39218f921445aad0c/js/foundation/foundation.reveal.js)。

问题是当调用 close 方法时，他们会在打开的模式上进行切换，而不是仅仅隐藏它。

**更新：您现在可以在**[Foundation 的主下载页面](http://foundation.zurb.com/download.php)上下载带有此问题修复程序的最新代码。

# javascript - Flexslider 导航

> ID：15474238
> 
> 赞同：0
> 
> 时间：2013-03-18T10:12:50.967
> 
> 标签：javascript, navigation, flexslider

我正在使用[flexslider](http://www.woothemes.com/flexslider/) 创建自定义滑块。当一个人单击项目符号导航部分时，我只想获取滑动编号。

我在 controlNavigation 部分尝试了各种方式

```
 controlNav: {
    setup: function() {
      if (!slider.manualControls) {
        methods.controlNav.setupPaging();
      } else { // MANUALCONTROLS:
        methods.controlNav.setupManual();
      }
    },
    setupPaging: function() {
      var type = (vars.controlNav === "thumbnails") ? 'control-thumbs' : 'control-paging',
          j = 1,
          item;

      slider.controlNavScaffold = $('<ol class="'+ namespace + 'control-nav ' + namespace + type + '"></ol>');

      if (slider.pagingCount > 1) {
        for (var i = 0; i < slider.pagingCount; i++) {
          item = (vars.controlNav === "thumbnails") ? '<img src="' + slider.slides.eq(i).attr("data-thumb") + '"/>' : '<a>' + j + '</a>';
          slider.controlNavScaffold.append('<li>' + item + '</li>');
          j++;
        }
      }

      // CONTROLSCONTAINER:
      (slider.controlsContainer) ? $(slider.controlsContainer).append(slider.controlNavScaffold) : slider.append(slider.controlNavScaffold);
      methods.controlNav.set();

      methods.controlNav.active();

      slider.controlNavScaffold.delegate('a, img', eventType, function(event) {
        event.preventDefault();
        var $this = $(this),
            target = slider.controlNav.index($this);

        if (!$this.hasClass(namespace + 'active')) {
          slider.direction = (target > slider.currentSlide) ? "next" : "prev";
          slider.flexAnimate(target, vars.pauseOnAction);
        }
      });
      // Prevent iOS click event bug
      if (touch) {
        slider.controlNavScaffold.delegate('a', "click touchstart", function(event) {
          event.preventDefault();
        });
      }
    },
    setupManual: function() {
      slider.controlNav = slider.manualControls;
      methods.controlNav.active();

      slider.controlNav.live(eventType, function(event) {
        event.preventDefault();
        var $this = $(this),
            target = slider.controlNav.index($this);

        if (!$this.hasClass(namespace + 'active')) {
          (target > slider.currentSlide) ? slider.direction = "next" : slider.direction = "prev";
          slider.flexAnimate(target, vars.pauseOnAction);
        }
      });
      // Prevent iOS click event bug
      if (touch) {
        slider.controlNav.live("click touchstart", function(event) {
          event.preventDefault();
        });
      }
    },
    set: function() {
      var selector = (vars.controlNav === "thumbnails") ? 'img' : 'a';
      slider.controlNav = $('.' + namespace + 'control-nav li ' + selector, (slider.controlsContainer) ? slider.controlsContainer : slider);
    },
    active: function() {
      slider.controlNav.removeClass(namespace + "active").eq(slider.animatingTo).addClass(namespace + "active");
    },
    update: function(action, pos) {

      if (slider.pagingCount > 1 && action === "add") {
        slider.controlNavScaffold.append($('<li><a>' + slider.count + '</a></li>'));
      } else if (slider.pagingCount === 1) {
        slider.controlNavScaffold.find('li').remove();
      } else {
        slider.controlNav.eq(pos).closest('li').remove();
      }
      methods.controlNav.set();
      (slider.pagingCount > 1 && slider.pagingCount !== slider.controlNav.length) ? slider.update(pos, action) : methods.controlNav.active();
    }
  }, 
```

但没有找到运气。如果有人知道如何实现这一点，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:41:49.640

我找到了解决方案。这对我来说真的很耗时......在活动功能中，我们可以获得下一个动画幻灯片编号，如下所示。（希望有一天这会对像我这样的人有所帮助）

> `active: function() { slider.controlNav.removeClass(namespace + "active").eq(slider.animatingTo).addClass(namespace + "active"); alert(slider.animatingTo) },`

# android - 无法使谷歌地图 v2 工作

> ID：15474241
> 
> 赞同：0
> 
> 时间：2013-03-18T10:13:10.157
> 
> 标签：android, android-maps-v2

我尝试了很多示例，但仍然无法正常工作！我有一个没有地图的网格并且“无法获取连接工厂客户端”。

[我在这里](http://android-er.blogspot.gr/2012/12/a-simple-example-using-google-maps.html)、[这里](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)、[这里](https://blog-emildesign.rhcloud.com/?p=435)和许多其他地方试过。我试图在设备上运行它，但还是一样。

这里有什么想法吗？还有其他好的教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:19:31.363

我看到你已经尝试了我的教程。您描述的问题通常发生在您的密钥出现问题时。

请阅读下一个教程以获取您的密钥：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

这对您没有帮助，请尝试删除该`debug.keystore`文件夹并运行任何 android 项目以重新创建一个新密钥，然后再次使用控制台执行将您的密钥关联到您的项目的所有过程。

并再次检查您是否在清单文件中添加了第一个教程中的所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:14:59.850

当您在清单中为应用程序使用与实际谷歌项目密钥不同的密钥时，就会发生这种情况。尝试重新检查密钥。我遇到了同样的问题，并以同样的方式解决了这个问题。它与代码无关。祝你好运！

# jquery - jqPlot 饼图工具提示

> ID：15474242
> 
> 赞同：1
> 
> 时间：2013-03-18T10:13:15.250
> 
> 标签：jquery, tooltip, pie-chart, jqplot, jqplot-highlighter

我认为 jqPlot 中的 Hightlighter 类不处理 PieRenderer 的工具提示是否正确？我花了很长时间试图让它们工作，但我似乎无法让它显示工具提示。

如果我是对的，有没有办法处理段的翻转并将数据传递给第三方 jQuery 工具提示？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T08:42:15.513

如果您使用的是 Highlighter 插件，请记住设置 useAxesFormatters: false 否则它不起作用。

```
highlighter: {
    show: true,
    useAxesFormatters: false, // must be false for piechart   
    tooltipLocation: 'w',
    formatString:'%s, %P',
} 
```

它不跟随鼠标，但它设置在左上角。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:10:01.377

查看 jqplot的[问题](https://bitbucket.org/cleonello/jqplot/issues?q=tooltip)，似乎有一些对该功能的请求，但尚未实现。

基于这个问题[How to display tooltips on jqplot pie chart](https://stackoverflow.com/questions/8209474/how-to-display-tooltips-on-jqplot-pie-chart)，您可以连接`jqplotDataHighlight`和`jqplotDataUnhighlight`事件：

```
$("#chartId").bind('jqplotDataHighlight', function(ev, seriesIndex, pointIndex, data) {

}); 

$("#chartId").bind('jqplotDataUnhighlight', function(ev, seriesIndex, pointIndex, data) {

}); 
```

这里有一个使用这种技术创建自定义工具提示的好[例子](http://www.jqplot.com/tests/bubble-plots.php)。尽管它正在处理气泡图，但它应该为您指明正确的方向。

你也可以试试[jqplot-highlighter](https://github.com/tryolabs/jqplot-highlighter)插件，它允许饼图的工具提示。

# powershell - 在 PowerShell 中调用无管道的 Sort-Object

> ID：15474243
> 
> 赞同：2
> 
> 时间：2013-03-18T10:13:18.597
> 
> 标签：powershell, pipe

我是 PowerShell 的新手，我只是想弄清楚它是如何工作的。

那么，我该如何编写这段代码：

```
Get-ChildItem C:\ | Sort-Object Length 
```

作为多行代码？我试过这个：

```
$child_items = Get-ChildItem C:\
Sort-Object $child_items Length 
```

但它没有用。我越来越：

```
Sort-Object : A positional parameter cannot be found that accepts argument 'Length'. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:31:13.347

尽管其他答案是使用命名参数传递值的正确方法，但请记住说了`get-help Sort-Object`什么：

```
When you use the InputObject parameter to submit a collection of items, 
Sort-Object receives one object that represents the collection. 
Because one object cannot be sorted, Sort-Object returns the entire collection unchanged. 
```

您会发现将 $child_items 传递给`-inputobject`.

您总是需要使用管道将值传递给`-inputobject`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:24:15.543

您需要指定 -InputObject 参数。没有它，$child_items 将绑定到第一个位置参数，即 'Property'

```
Sort-Object -InputObject $child_items Length 
```

更新

我不会删除我的答案，因为它附有评论。我错了，Get-ChildItem 的结果是默认排序的，我得出的结论是，将数组传递给 InputObject 就可以了。显然我错了，请检查@CB 答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:20:12.427

这会起作用：

```
Get-ChildItem C:\ | 
Sort-Object Length 
```

或者对你来说，这也可以；

```
$child_items = Get-ChildItem C:\
$child_items | Sort-Object Length 
```

您还可以使用反引号作为续行字符。

# android - 如何在 Android 中使用 iframe 在 webview 中播放 SD 卡中的视频？

> ID：15474246
> 
> 赞同：1
> 
> 时间：2013-03-18T10:13:31.153
> 
> 标签：android, iframe, video

我正在使用 webview 播放 youtube 视频。这工作正常。但我想试试这个。如何在 android 中使用 iframe 在 Webview 中播放 SD 卡中的视频。

还有其他可能性吗？我可以尝试任何 HTML5 视频标签吗？任何人都可以建议我吗？

如果我在我的设备上安装了 Flash Player 并启用了此类浏览器插件，那么我可以在 webview 中播放 SD 卡中的本地视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:53:48.987

您可以尝试添加自定义 HTML 代码以显示在 webview 中，并使用 HTML5 视频标签来完成此任务。试一试。

# jquery - 如何使用javascript删除类

> ID：15474247
> 
> 赞同：-6
> 
> 时间：2013-03-18T10:13:39.310
> 
> 标签：jquery

我有`class="ui-btn ui-shadow ui-btn-corner-all ui-btn-active ui-btn-up-c"`锚标记，我必须从这个类中删除`ui-btn-active`on 按钮`click`功能。我怎样才能删除 this.using jquery。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:14:53.517

你可以使用这个：

```
 element.className = element.className.split(' ').filter(function(v) {
     return v!='theclassiwanttoremove'
 }).join(' '); 
```

要与 IE8 兼容，您可能需要[添加 shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。

* * *

编辑：我现在看到了 jQuery 标签……在这种情况下，这个答案现在没用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:15:54.873

```
$('button').on('click',function(){
   $('a').removeClass('ui-btn-active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:16:01.020

```
document.getElementByID("IDNAME").className=""; 
```

其中 IDNAME = 元素的 ID 属性

# python - AttributeError：“XPathExpr”对象没有属性“add_post_condition”

> ID：15474248
> 
> 赞同：3
> 
> 时间：2013-03-18T10:13:49.740
> 
> 标签：python, windows, lxml, pyquery

我正在尝试在 Windows 上安装[pyquery](https://pypi.python.org/pypi/pyquery)，当我尝试执行这样的选择时出现以下错误`d('p:first')`。其他一切似乎都在工作。知道我错过了什么吗？这个问题只发生在我的 Windows 机器上，在我的 MAC 上工作正常。

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from pyquery import PyQuery as pq
>>> d = pq("<p></p>")
>>> d('p:first')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\pyquery-1.2.4-py2.7.egg\pyquery\pyquery.py
", line 237, in __call__
    result = self.__class__(*args, parent=self, **kwargs)
  File "C:\Python27\lib\site-packages\pyquery-1.2.4-py2.7.egg\pyquery\pyquery.py
", line 213, in __init__
    xpath = self._css_to_xpath(selector)
  File "C:\Python27\lib\site-packages\pyquery-1.2.4-py2.7.egg\pyquery\pyquery.py
", line 223, in _css_to_xpath
    return self._translator.css_to_xpath(selector, prefix)
  File "build\bdist.win32\egg\cssselect\xpath.py", line 188, in css_to_xpath
  File "build\bdist.win32\egg\cssselect\xpath.py", line 188, in <genexpr>
  File "build\bdist.win32\egg\cssselect\xpath.py", line 208, in selector_to_xpat
h
  File "build\bdist.win32\egg\cssselect\xpath.py", line 230, in xpath
  File "build\bdist.win32\egg\cssselect\xpath.py", line 272, in xpath_pseudo
  File "C:\Python27\lib\site-packages\pyquery-1.2.4-py2.7.egg\pyquery\cssselectp
atch.py", line 19, in xpath_first_pseudo
    xpath.add_post_condition('position() = 1')
AttributeError: 'XPathExpr' object has no attribute 'add_post_condition'
>>> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:06:54.587

我已经使用“easy_install pyquery”安装了 pyquery，这导致了这个错误。我删除了它，然后从[https://github.com/gawel/pyquery](https://github.com/gawel/pyquery)安装它`python setup.py install`，现在它可以工作了。

# objective-c - 通过 root-daemon 按需启动用户上下文应用程序

> ID：15474249
> 
> 赞同：3
> 
> 时间：2013-03-18T10:13:58.447
> 
> 标签：objective-c, macos, daemon, user-agent, launchd

我是目标 c 的菜鸟，我有一个守护程序代码，它以 root（系统范围的应用程序）运行并与服务器通信。每隔一段时间，服务器将命令该根应用程序启动一个在登录用户上下文中运行的附加应用程序（不会中断用户 - 静默）。我也编写了用户上下文应用程序。我缺乏的是对我的根守护进程如何启动用户上下文应用程序的理解。

1.  我的守护进程如何按需启动它？
2.  我应该使用代理吗？
3.  这是否意味着代理将在启动时运行？

我已阅读[https://developer.apple.com/library/mac/#technotes/tn2005/tn2083.html](https://developer.apple.com/library/mac/#technotes/tn2005/tn2083.html)以及[http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/ BPSystemStartup/Chapters/CreatingLaunchdJobs.html](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html)但觉得我错过了一些东西。

顺便说一句 - 该解决方案应该适用于 10.6、10.7、10.8 ...

提前谢谢大家:o)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T12:12:49.560

如果您知道当前登录的用户，这将起作用。

```
sudo chown -R current_loggedin_user myApp
sudo chmod u+s /Contents/MacOS/myApp
system([@"open myApp" UTF8String]);  //inside root process 
```

如果 s 权限组设置了用户位（对应于 u+s），那么无论何时任何人执行该程序，该进程都会获得拥有它的人的权限。所以 current_loggedin_user 是 myApp 的所有者，open 将以 current_loggedin_user 模式运行 myApp。

> s set-user-ID-on-execution 和 set-group-ID-on-execution 位。
> 
> u 文件原始模式中的用户权限位。

但是如果用户没有登录，它会抛出以下错误。

```
com.apple.launchd[1]: System: Bug: launchd_core_logic.c:8760 (24498):0
com.apple.launchd[1]: System: job_mig_spawn() can't find its session!
open[24459]: spawn_via_launchd() failed, errno=5 label=[0x0-0x274274].
rootProcess[23127]: LSOpenURLsWithRole() failed with error -10810 for the file /Applications/myApp.app/. 
```

# jquery - jquery对话框按钮直到悬停在它上才显示ie7

> ID：15474254
> 
> 赞同：1
> 
> 时间：2013-03-18T10:14:22.993
> 
> 标签：jquery, html, css

正如标题所示，我遇到了一些 IE7 问题。我现在遇到的问题是我的对话框无法正常工作。好吧，对话框本身可以工作，但它上面的按钮没有显示出来。也就是说，直到我将鼠标悬停在它实际放置的位置。

这是jquery代码

```
$('#sessionTimeout-dialog').dialog({
            autoOpen: false,
            width: 400,
            modal: true,
            closeOnEscape: false,
            open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); },
            buttons: [{

                // Button one - closes dialog and makes call to keep-alive URL
                text: o.stayConnected,
                "class": "confirmSession",
                click: function () {
                    $(this).dialog('close');
                    $('#sessionTimeout-dialog div div button').addClass('confirm');

                    $.ajax({
                        type: 'POST',
                        url: o.keepAliveUrl
                    });
                    $('.formOverlay').find('*').attr('disabled', false);

                    // Stop redirect timer and restart warning timer
                    controlRedirTimer('stop');
                    controlDialogTimer('start');
                }
            }]
        }); 
```

由于这确实适用于 IE8 及更高版本、FF 和 Chrome，我开始认为这是 IE7 与对话框生成的控件有关的问题。

所以再次总结一下：

IE8+工作

IE7 具有以下行为：

类=“确认会话”

1.  页面加载
2.  没有 javascript 错误
3.  对话框显示没有按钮
4.  我将鼠标悬停在按钮应该在的位置
5.  该按钮神奇地以正确的 CSS 样式显示。

没有类=“确认会话”

1.  页面加载
2.  没有 javascript 错误
3.  对话框显示按钮（没有 css，因为它没有 css 类）

由于我对这种行为感到困惑，我希望我们可以一起解决。

编辑：

根据要求：confirmSession 类的我的 CSS 样式；它取自 .less 文件。

```
.confirmSession {
            width:45%; font-size: 1em; background: #4c8cb4 !IMPORTANT; border: #427594 1px solid; padding: 0px;  color: #fff; text-decoration: none; .box-sizing(border-box); white-space: normal; cursor: pointer; float: none; font-weight: 400; margin: 10px 2%; display: block; float: left;
            -webkit-box-shadow: inset 0 1px 0 0 rgba(255,255,255,0.4), 2px 2px 3px -2px rgba(0, 0, 0, 0.4);
            -moz-box-shadow: inset 0 1px 0 0 rgba(255,255,255,0.4),2px 2px 3px -2px rgba(0, 0, 0, 0.4);
            box-shadow: inset 0 1px 0 0 rgba(255,255,255,0.4), 2px 2px 3px -2px rgba(0, 0, 0, 0.4);
            text-align: center; position: absolute; bottom: 1em; left: 10px; right: 10px; 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:34:24.107

无论您在 confirmSession 类中使用什么样式，都会被 jQuery 样式覆盖。

所以`!important`在你的风格之前使用。

把所有的css属性去掉，然后一个一个尝试添加。然后我们就可以找出问题所在了

# javascript - 单选按钮上的 Onchange 事件不起作用

> ID：15474256
> 
> 赞同：0
> 
> 时间：2013-03-18T10:14:28.253
> 
> 标签：javascript, html, radio-button, onchange

我有这组单选按钮：

```
{% for user in users %}

        <form name="form_user_{{ user.id }}" method="post" action="/networks/{{ net.id }}/sensors/{{ sens.id }}/rights">
          <tr>
            <td>
              <div>
                {{ escape(user.name) }}
                <input type='hidden' name="id" value='{{ user.id }}'>
              </div>
            </td>
            <td>

              <label class="radio inline" onchange="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_0" value="0">
                None
              </label>
              <label class="radio inline" onchange="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_1" value="1">
                Read
              </label>
              <label class="radio inline" onchange="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_4" value="4">
                Read + Commands
              </label>

              {{ xsrf_form_html() }}
            </td>

          </tr>
        </form>
        {% end %} 
```

我有一个 js 函数可以更改单选按钮的检查，当单选按钮检查更改时，我会提交表单工作。如果我单击单选按钮，一切正常。但是如果我使用改变检查的js函数，这不起作用。为什么？

谢谢你。

**编辑**

这是我的 js 函数：

```
<script>
function checkall(perm){

var permall = parseInt(perm);

switch (permall){
case 0:
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_0").checked=true
    {% end %}
    break;
case 1:
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_1").checked=true
    {% end %}
    break;
case 4:
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_4").checked=true
    {% end %}
    break;
  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:17:32.297

可能是因为 JS 没有触发`onchange`事件。你必须自己触发它。

在此处手动触发事件的说明：[StackOverflow 主题](https://stackoverflow.com/questions/2856513/trigger-onchange-event-manually)

[最好的主意]

经过思考，我认为最好的方法是在 Ajax 方法中调用表单操作 url。

使用 jQuery，它可能类似于：

```
var changeRadio = function(callback, checkedData) {
    $.ajax({
       type : 'POST',
       url : callback,
       data : checkedData,
       success : function() {
          //if you wan't, you can do something
        }
    });

}; 
```

在您的`switch`: **EDIT 中（在第二个参数中用冒号替换逗号）**

```
 {% for user in users %}
        document.getElementById("perms_{{user.id}}_0").checked=true;
        changeRadio(document.forms['form_user_{{ user.id }}'].action, {document.getElementById("perms_{{user.id}}_0").name:document.getElementById("perms_{{user.id}}_0").value});
    {% end %}
    break; 
```

**感谢 jQuery**

所有 jQuery 方法：

```
var changeRadio = function(callback, inputElement) {
    var element = inputElement; //By creating a global var, you're able to access it into success function
    $.ajax({
       type : 'POST',
       url : callback,
       data : {$(element).attr('name'):$(element).val()},
       success : function() {
          $(element).attr('checked', true);
        }
    });

};

function checkall(perm){

    var permall = parseInt(perm);
    $('input:checkbox[value="'+permall+'"]').each(function() {
       changeRadio($(this).parent('form').attr('action'), $(this));
    });
} 
```

**上次编辑**

JS

```
 var changeRadio = function(callback, inputElement, form) {
    var element = inputElement; //By creating a global var, you're able to access it into success function
    console.log(form);
    $.ajax({
        type : 'POST',
        url : callback,
        data : $(form).serialize(),
        success : function() {
             $(element).attr('checked', true);
        }
});
};

var checkall = function (perm){
    var permall = parseInt(perm);
    $('input:radio[value="'+permall+'"]').each(function() {
        changeRadio($('#form_user_'+$(this).attr('user_id')).attr('action'), $(this),$('#form_user_'+$(this).attr('user_id')));
    });
}

$(document).ready(function() {
    $('.checkallCaller').on('click', function() {
        checkall($(this).attr('rel'));
    });
}); 
```

并且在 HTML 中，将 'checkallCaller' 类添加到检查所有收音机的每个标签中，并`user_id`为用户收音机添加属性。（这不是 w3c，但它有效）

# ruby-on-rails - 将数据从 excel 文件导入到模型中，并在 rails 中进行验证和关联

> ID：15474261
> 
> 赞同：1
> 
> 时间：2013-03-18T10:14:51.753
> 
> 标签：ruby-on-rails

如何使用模型关联导入数据

这是我的情况：

```
class SampleRequest < ActiveRecord::Base
  has_one :sample_request_text_excerpt
  accepts_nested_attributes_for :sample_request_text_excerpt
end

class SampleRequestTextExcerpt < ActiveRecord::Base
  belongs_to :sample_request
end 
```

在 sample_request 模型中，资产类型字段为 text 和 image ，对于 text 类型不同的 excel sheet 和对于 image 类型不同的 excel sheet ， sample_request_text_excerpt 模型中只有某些字段是额外的。

对于单个模型没有问题，而尝试用于关联

此行显示错误：

```
 sample_request.attributes = row.to_hash 
```

上传文本电子表格时显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:00:16.720

当您为`sample_request`对象设置属性时，您使用的是哈希。在那个散列中有一个键，`stock_id`当 Rails 尝试为您的`sample_request`对象设置该属性时，它找不到它。这很可能是因为`stock_id`您的 sample_request 模型上没有列。

为了解决这个问题，您需要：

1）`stock_id`从哈希中删除密钥。您可以使用[.delete](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-delete)来完成此操作。

2）或者，您可以添加`stock_id`到您的`sample_request`模型中。

# asp.net - 在 SQL Server 中实现与在 ASP.Net 中实现的相同的加密和解密技术

> ID：15474266
> 
> 赞同：0
> 
> 时间：2013-03-18T10:15:03.507
> 
> 标签：asp.net, sql-server, encryption

我在我的 Web 应用程序中创建了两个方法 Encrypt() 和 Decrypt() 用于加密和解密数据。

现在，我想在我的 SQL Server 数据库中使用相同的技术来解密数据。

谁能告诉我这怎么可能。

请帮忙！！

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:19:54.093

即使理论上可以将您的函数加载为 SQLCLR，但您会得到错误的密钥管理。使用 SQL Server[加密函数](http://msdn.microsoft.com/en-us/library/ms179331.aspx)并丢弃您自己编写的所有内容。使用适当的[密钥层次结构](http://msdn.microsoft.com/en-us/library/ms189586.aspx)。

# git - 本地分支上的 git svn dcommit 重新创建本地主机

> ID：15474267
> 
> 赞同：1
> 
> 时间：2013-03-18T10:15:07.557
> 
> 标签：git, svn, dcommit

**背景**：

我们的团队需要连接到一个 svn 服务器并在一个特定的分支（不是 svn 主干）上工作。最重要的是，我们还需要获取主干并在它们之间合并。

我已经建立了一个连接到我们分支的本地 git 存储库（“svn+ssh...project/branches/X”）。

然后，我手动将主干添加为新的 svn 连接（“svn+ssh...project/trunk”）（我为 svn 主干添加了一个新的远程目标，到 .git/config）并将我的分支重命名如下：

master（连接到 project/branches/X）被重命名为 master-X

连接到 project/trunk 的分支被重命名为 master-trunk。

**问题**：

当我`git svn dcommit`在 master-X 本地分支上时，会创建一个新的“master”分支，效果与我所做的一样：

```
git svn dcommit
git co master-X -b master 
```

我可以阻止重新创建主分支吗？

（每次创建后我都会手动删除它）。

**编辑**：

我的 .git/config 现在看起来像这样：

```
# original/default configuration settings skipped for brevity

[svn-remote "svn"]
    url = svn+ssh://...project/branches/X
    fetch = :refs/remotes/git-svn

[svn-remote "svn-trunk"]
    url = svn+ssh://...project/trunk
    fetch = :refs/remotes/git-svn-trunk 
```

最后三行是我添加的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:39:08.150

这是旧的 Git 行为，已在最近的 Git 版本中修复。任何比 Git 1.7.12 更新的版本将不再自动重新创建主分支。您可以运行`git --version`以获取当前正在运行的 Git 版本。

如果您的操作系统附带的版本早于 1.7.12（在我的 Debian、RHEL 和 Cygwin 系统之间，我可以轻松访问的最新版本是 1.7.9），那么这并没有多大用处。

但是，如果您愿意，您应该能够自己进行更改。`git-svn`在您的系统上找到or的副本`git-svn.perl`（在我的系统上，它是`/usr/lib/git-core/git-svn`），然后进行以下更改：

*   下面`Git::SVN::init_vars()`，将`post_fetch_checkout();`行移到右大括号之前，这样一段代码如下所示：

    ```
    Git::SVN::init_vars();
    eval {
            Git::SVN::verify_remotes_sanity();
            $cmd{$cmd}->[0]->(@ARGV);
            post_fetch_checkout();
    };
    fatal $@ if $@;
    exit 0; 
    ```

*   在`post_fetch_checkout`子程序中……</p>

    *   在开头的行上方添加以下行`my $gs =`：

        ```
        return if verify_ref('HEAD^0'); 
        ```

    *   删除如下所示的行：

        ```
        return if verify_ref('refs/heads/master^0') 
        ```

    *   替换以下行：

        ```
        my $valid_head = verify_ref('HEAD^0');
        command_noisy(qw(update-ref refs/heads/master), $gs->refname);
        return if ($valid_head || !verify_ref('HEAD^0')); 
        ```

        具有以下内容：

        ```
        command_noisy(qw(update-ref HEAD), $gs->refname);
        return unless verify_ref('HEAD^0); 
        ```

上述更改将应用​​在 Git 源代码中更改此行为的补丁。您可以自己查看：相关提交是Marcin Owsiany 的[v1.7.11.2-250-](https://git.kernel.org/cgit/git/git.git/commit/?id=e3bd4ddaa9a60fa4e70efdb143b434b440d6cec4) ge3bd4dd。

# arrays - Arduino EEPROM 读写阵列？

> ID：15474272
> 
> 赞同：1
> 
> 时间：2013-03-18T10:15:20.190
> 
> 标签：arrays, arduino, eeprom

当 Arduino 上电时，它会在闪存中存储一​​个 int 数组，例如：

```
int secretCode[maximumKnocks] = {50, 25, 25, 50, 100, 50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}; 
```

当程序按钮被按下时，它会等待压电体接收到敲击声，然后这个数组就会变为，例如：

```
int secretCode[maximumKnocks] = {25, 50, 25, 50, 100, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}; 
```

（基于[http://grathio.com/assets/secret_knock_detector.pde](http://grathio.com/assets/secret_knock_detector.pde)）

我将如何在 EEPROM 中写入和读取阵列？这对我来说是全新的，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:29:36.380

您将使用[EEPROM.Write](http://arduino.cc/en/Tutorial/EEPROMWrite)函数写入值 - 遍历数组，依次写入每个值。

假设您不需要存储大于 254 的整数值（在这种情况下，您必须为 secretCode 中的每个元素写入两个字节），这将是：

```
for ( int i = 0; i < maximumKnocks; ++i )
   EEPROM.write ( i, secretCode [ i ] ); 
```

编写完它们后，您将在启动时使用设置中的读取功能将它们读回[。](http://arduino.cc/en/Reference/EEPROMRead)如果 EEPROM 中的值为 0xff，即您第一次刷新芯片时的值，请不要将它们复制到密码中。

```
if ( EEPROM.read ( 0 ) != 0xff )
    for (int i = 0; i < maximumKnocks; ++i )
        secretCode [ i ] = EEPROM.read ( i ); 
```

# javascript - _.extend(Something.prototype, someObj) 和 Something.prototype.someFunc = someFunc 有什么区别？

> ID：15474275
> 
> 赞同：9
> 
> 时间：2013-03-18T10:15:21.660
> 
> 标签：javascript, oop, prototype, underscore.js

我正在使用 JavaScript 进行实际的面向对象编程，并且遇到了两种不同的扩展现有对象原型的方法。

方法一：

```
Something.prototype.someFunc = function() {
    // To something usefull
} 
```

方法二（使用 underscore.js）：

```
_.extend(Something.prototype, {
    someFunc: function() {
        // Do the same but differently
    }
} 
```

这两种方法有什么区别？哪个被认为“更好”？对我来说，第一种方法看起来更好，因为它使用普通的旧 javascript，第二种方法是别人的实现。但另一方面，underscore.js 的开发者肯定不会白白添加 _.extend() 方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:34:30.463

它们在功能上是等效的。在单一方法的情况下，我认为方法一更具可读性，但在同一个原型中添加多个方法的情况下，方法二可能更具可读性（这当然是主观的）。

回复：underscore.js 开发人员肯定不会无缘无故添加 _.extend() 方法：

_.extend 还有其他用途，例如默认选项：

```
function (options) {
  options = _.extend({ height: 80, width: 20 }, options);
  ...
} 
```

# c# - 如何在 Windows RT 上创建自定义虚拟触摸键盘

> ID：15474278
> 
> 赞同：1
> 
> 时间：2013-03-18T10:15:26.690
> 
> 标签：c#, windows-runtime, windows-store-apps, virtual-keyboard

我想在 Windows RT 上创建一个自定义虚拟触摸键盘，就像 Windows RT 上现有的手写识别键盘一样，但使用我自己的 HWR 算法。有没有人知道这个的任何样本？

先感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:47:42.310

无法更换 Metro UX 上的触摸键盘。您可以为 Windows 8 创建自定义键盘，但不能为 RT 创建。

# nsis - 为什么我的卸载程序在 nsis 中无法正常工作？

> ID：15474284
> 
> 赞同：0
> 
> 时间：2013-03-18T10:15:53.037
> 
> 标签：nsis

我编写了一个 nsis 脚本，如果用户选择与以前版本相同的文件夹，我需要提示用户以前安装的位置并卸载以前的版本。它工作正常。但是假设用户选择的目录与 uninstall.exe 不同给出问题。

```
Ex-suppose user install version 1.2 in folder a and then agian version 1.2 in folder B .
Than in every case the uninstall .exe is pointing to folderb not folder a.How can i solve this issue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:18:28.717

在卸载程序中，`$instdir`只是卸载程序所在的目录，因此卸载程序本身不应该关心。

你说你在提示用户，所以你已经知道旧安装的位置，所以你所要做的就是[使用特殊参数调用卸载](https://stackoverflow.com/a/4677432/3501)程序，这样它就知道从哪里卸载......

# cakephp - 如何在 cakephp 的一个函数中调用两个不同的 .ctp 文件？

> ID：15474291
> 
> 赞同：1
> 
> 时间：2013-03-18T10:16:02.680
> 
> 标签：cakephp

我有 2 个视图文件`index.ctp`和`indexMobile.ctp`. 我必须为两个 ctp 文件使用一个控制器`logincontroller.php`和一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:20:14.620

如果要渲染特定视图，请在控制器中使用 $this->render

```
$this->render('your_view_file'); 
```

[请参阅渲染特定视图](http://book.cakephp.org/2.0/en/controllers.html#rendering-a-specific-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:00:09.067

这是我的例子：

```
// Changing the "layout" (app/View/Layouts") if you want.
// Change this if you want a different layout for this view.
$this->layout='pdf';

// Folder where is the .ctp View file. 
// This is also optional, if your view is in some other folder.
$this->viewPath = 'Pdf';

// Call the "{$view}.ctp" in "Pdf" folder (app/View/Pdf/{$view}.ctp).
// Use this for choosing the right View.
$this->render($view); 
```

# javascript - 访问 jquery.ready() 之外的变量

> ID：15474293
> 
> 赞同：0
> 
> 时间：2013-03-18T10:16:06.157
> 
> 标签：javascript, jquery, scope

这变得非常令人沮丧，所以我希望有人能够提供帮助。我不是一个优秀的 JavaScript 或 JQuery 开发人员（更多的是后端人员），但我已经到处寻找解决方案，但似乎没有任何帮助。这是我的问题的简化版本...

```
<script language="JavaScript" type="text/javascript">
fooey = 'baaa';

jQuery(document).ready(function($) {

fooey = 'New value';     

});

alert("value: " + fooey);  // I need this to be 'New value'

</script> 
```

如何更改 JQuery 块内的 fooey 变量，然后从 JQuery 块外部访问这个新值。所以我希望警报弹出窗口显示“新值”而不是“baaa”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:21:48.947

您的代码有效，但它按以下顺序运行：

1.  fooey = '咩';

2.  设置 jQuery(document).ready

3.  alert("值：" + fooey);

4.  运行 jQuery(document).ready

发生这种情况是因为 JavaScript 在`document`准备好之前运行（并且 jQuery 事件触发）。所以只要你使用`fooey`之前`document`准备好它应该设置为`'New value'`. 如果您需要*在 DOM 就绪*`$(document).ready`时使用它，请在函数结束时使用它。

**解释**

加载网页后，页面内的 JavaScript 将运行。这将遍历代码（设置和提醒 的值`fooey`），设置任何事件`.onclick`，例如`window.onresize`或`$(document).ready()`，这些事件将在特定事件发生时稍后调用。因为`$(document).ready()`它发生在准备好处理 DOM（文档对象模型）时。

从[jQuery API - ready()](http://api.jquery.com/ready/)：

> 在完全接收到图像等所有资产之前，不会触发此事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:22:16.413

在 ready 函数中定义你的警报，原因是在`document.ready`函数之前执行警报。

```
<script language="JavaScript" type="text/javascript">
    fooey = 'baaa';
    jQuery(document).ready(function($) {
        fooey = 'New value';     
        alert("value: " + fooey);  // I need this to be 'New value'     
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:29:50.860

**javascript**：

```
var foo;
        $(function() {   
           // this is your jquery.ready() function. I have write it in another way
           foo = 'val1'
           alert(foo);
        });

      function fun(){
        foo = 'val2';
        alert(foo);
      }
      function fun2(){
        alert(foo);
      } 
```

**HTML 代码**：

```
 <input type="button" id="b1" value="b1" onclick="fun()" >
   <input type="button" id="b2" value="b2" onclick="fun2()"> 
```

现在这里 foo 变成`a global variable` 并且`foo`on的值`page loading`是`val1`。

如果单击按钮，`b1`则它的值变为`val2`. 您可以通过单击按钮检查此值`b2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:25:49.923

ready 子句的重点是等到文档完全准备好后再做任何事情。通过在该事件之外添加代码，它将（可能）在就绪事件之前加载。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T10:25:42.210

```
<script language="JavaScript" type="text/javascript">

// executed when browser interprets this line
fooey = 'baaa';  // (1st to be executed)

jQuery(document).ready(function($) {

// executed after few seconds , when DOM is ready.   (3rd one to be executed)
 fooey = 'New value';     

});

// executed when browser interprets this line (2nd one to be executed)
alert("value: " + fooey);  

</script> 
```

最后 fooey 值是`New value` **但不是当你提醒它时**

你可以等到 DOM 像这样准备好。

```
<script language="JavaScript" type="text/javascript">

fooey = 'baaa';   

jQuery(document).ready(function($) {

 fooey = 'New value';     

});

var interval = setInterval(function () {
   if ( jQuery.isReady ) {
      clearInterval(interval);
      alert("value: " + fooey);

   }   
},10)
</script> 
```

# c++ - 切换 QPushButton

> ID：15474297
> 
> 赞同：3
> 
> 时间：2013-03-18T10:16:08.340
> 
> 标签：c++, qt, user-interface

我有一个简单的 GUI：

一个 QPushButton，当点击时，将显示一个数字（比如 11）（我为此使用 QLCDnumber）。再次单击时，应显示另一个数字（例如 10）。

我的目标是为此使用 QAbstractButton::toggled ( bool checked ) 功能。

据我所知，正确的信号槽连接可能如下所示：

```
connect(ui.startstopButton, SIGNAL(toggled(bool)), thread, SLOT(start())); 
```

（我还使用线程，但它们不是问题）

**我的问题：** 如何在我的信号槽语句中区分“按钮已切换”（选中 = true）和“按钮未切换”（ckecked = false）？

我使用了类似的变体`SIGNAL(toggled(bool = true))`，`SIGNAL(toggled(bool checked = true))`或者`SIGNAL(toggled(true))`两者都不起作用。我总是收到调试器消息：

```
Object::connect: No such signal QPushButton::toggled(bool = true) in testthread.cpp:15
Object::connect:  (sender name:   'startstopButton') 
```

我肯定启用`setCheckable`了我的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:19:14.070

信号就是`toggled(bool)`，接收端也会有一个 bool 参数：

```
connect(ui.startstopButton, SIGNAL(toggled(bool)), thread, SLOT(start(bool))); 
```

这样，切换信号发送的布尔值将被插槽接收。在 slot 函数中，您可以检查接收到的布尔值是否为真。

这里假设 thread:start() 是您实际编写的某个函数，如果不是，则创建一个新插槽来检查布尔值，然后启动线程。

```
connect(ui.startstopButton, SIGNAL(toggled(bool)), threadStarter, SLOT(start(bool))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:21:45.040

你不能。相反，您可以将其传递给您的自定义插槽：

```
void checkIt(bool checked) // This is a slot
{
}

// ...

connect(ui.startstopButton, SIGNAL(toggled(bool)), thread, SLOT(checkIt(bool))); 
```

# java - 销毁主类对象

> ID：15474298
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:16:16.720
> 
> 标签：java, multithreading

```
public void executeRepeat(String s) {
    this.move = s;
    storeValue = move;
    i = Integer.parseInt(move);
    timer = new Timer(1000, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            i--;
            if(i <= 0) {
                move = "" + i;
                if (move.trim().equals("0")) {
                    Thread th = new Thread(new DetectImage());
                    th.start();
                }
                timer.stop();
            }
            jTextField1.setText("" + i);
        }
    });
    timer.start();          
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    move = jTextField1.getText();      
    executeRepeat(move);
}

public static int stay = 0;

class DetectImage implements Runnable {
    @Override
    public void run() {
        while (stay < 3) {
            try {
                stay++;
                // few steps for comparison  
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(TrafficMainGUI.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        if (stay >= 3) {
            stay = 0;
            String store = storeValue;
            TrafficMainGUI traffic = new TrafficMainGUI(store);
            traffic.setVisible(true);
        }
    }
} 
```

我正在`TrafficMainGUI`从这个线程调用类。整个过程进展顺利。但是我打开了多个框架。我想要处理以前的帧。我应该如何在这里实现这一点，因为我无法访问线程类中的主要方法来处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:19:12.123

```
Frame[] frames = Frame.getFrames(); 
```

它将为您提供应用程序中的总帧数

# visual-studio-2010 - 出现错误.. 从 .net 4.0 转换为 .net 3.5 时出现错误。

> ID：15474301
> 
> 赞同：2
> 
> 时间：2013-03-18T10:16:34.520
> 
> 标签：visual-studio-2010, .net-4.0, .net-3.5, vb.net-2010

我是 Windows 桌面应用程序开发的新手。

我使用 Visual Studio 2010 创建了一个应用程序，其中我使用了一个表单进行数据输入。一种带有报表查看器控件和绘制报表的报表（.rdlc）文件的表单。

我的问题是我想让我的应用程序与 dot net framework 3.5 兼容。为此，我已将项目属性中的“高级编译选项...”中的目标框架更改为 3.5。但是在将目标框架更改为 3.5 后运行应用程序时出现错误：

`Could not load file or assembly 'System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. Line 123, position 5\. C:\Users\Amir\Desktop\Bill_System\Bill_System\Bill_System\My Project\Resources.resx Billing_System`

如何解决这个错误？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:48:39.520

这是一个资源问题，从异常消息中可以看出，它们还依赖于框架版本。仅通过更改项目的目标版本**不会**改变这一点。

在文本编辑器中打开 Resources.resx 文件，记事本就可以了。搜索“4.0.0.0”并将其更改为“2.0.0.0”。这可能无法解决问题，一些资源被二进制序列化并嵌入为 .resx 文件中的 base64 编码字符串。您很容易将它们识别为长字符串。您需要使用 Visual Studio 资源编辑器修复这些问题，删除它们并重新添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:38:11.317

您正在引用`System.Drawing`框架 4.0 的程序集（您可以从错误中读取）而不是 3.5

您必须找到您的 System.Drawing 参考并将其更改为 3.5。

最简单的方法是：

1.  打开你的项目
2.  转到解决方案资源管理器
3.  展开参考组
4.  删除`System.Drawing`参考
5.  右键单击参考组
6.  添加参考
7.  在“.NET”选项卡上，搜索`System.Drawing`以添加正确的引用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-25T05:04:46.427

您收到以下错误：

> “无法加载文件或程序集‘System.Drawing，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a’或其依赖项之一。系统找不到指定的文件。第 123 行，位置 5。”

此错误是由于 system.drawing 程序集的 .dll 路径不正确而发生的，以下第 2 行肯定对您有用。OW请在您的系统中找到路径。

1.  与您的系统相关的“C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Drawing.dll”

2.  [无效][System.Reflection.Assembly]::LoadFile("C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Drawing.dll")

# html - 在 div 中嵌套 svg

> ID：15474306
> 
> 赞同：11
> 
> 时间：2013-03-18T10:16:47.890
> 
> 标签：html, css, svg

我正在尝试创建一个填充的 svg 三角形，它将放置在页面上的*某个*位置。

为此，我将 svg 包装在 div 中并适当放置 div。但是，svg 总是在 div 之外呈现。如何获取在 div 内呈现的 svg 元素？

由于脚本和模板限制，我无法使用`<object>`或标记`<embed>`

示例 HTML

```
<div id="container">
    <div id="inner_container">
        <svg height="6" width="6">
            <path d="M 0 6 L 3 0 L 6 6 L 0 6"/>
        </svg>
    </div>
</div> 
```

和 CSS

```
#container {width:100px; height:25px; border:1px solid green;}
#container #inner_container {width:6px; height:6px; border:1px solid red;}
#inner_container  svg path {fill:black;} 
```

实心三角形应在红色矩形内，但在外部呈现

在[JsFiddle上查看](http://jsfiddle.net/648hF/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T10:19:44.077

更改css选择器，只写`svg{...}`并添加`float:left`

这里的路径只是一个绘图而不是一个元素。

```
svg {fill:black; float:left} 
```

**[演示](http://jsfiddle.net/648hF/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:29:30.963

试试这个：

```
#container { float: left; width: 100px; height: 25px; border: 1px solid green; }
#container #inner_container { float: left; width: 6px; height: 6px; border: 1px solid red; }
#inner_container svg { display: block; float: left; } 
```

我在其中添加了一些浮点数，以便它们“包含”元素。有更好，更优雅的方法可以做到这一点，但它应该有效。

希望这可以帮助。米奇。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-26T10:29:36.133

问题是您没有为`svg`元素指定命名空间。这是它的工作原理：

```
<div id="container">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100">
    <path d="M 0 6 L 3 0 L 6 6 L 0 6"/>
  </svg>
</div> 
```

# oop - OOP Web 应用类设计

> ID：15474311
> 
> 赞同：1
> 
> 时间：2013-03-18T10:17:03.587
> 
> 标签：oop, class, design-patterns

我正在尝试使用 OOP 构建 Web 应用程序。

在我的应用程序中，我有课程和订阅者。每个课程可以有多个订阅者（1-N 关系）。现在我需要对课程执行一些操作（检查一些过期日期并对其订阅者执行操作，向管理员发送一些电子邮件），并且在执行完这些操作后，对每个订阅者执行其他操作（发送电子邮件）。

我创建了一个 Course 类和一个 Subscriber 类。课程类包含课程数据，如标题、日期、当前状态和一组订阅者对象（参与它的人）。订阅者类包含姓名、姓氏、订阅状态等。

我有个问题。我的课程类需要知道它的订阅者。

我的订阅者类需要了解它所属的课程（以提取标题、日期等数据）并了解订阅者的数量及其状态。

我如何重新设计我的班级结构来解决这个问题？我正在考虑使用某种观察者模式......

PS。我正在使用 PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:27:20.887

不需要特殊的设计模式，这是正常的双向关联。我从你的描述中得知，任何订阅者只订阅一门课程，否则应该有两个课程`Student`，`CourseSubscription`而不是。

如何在 PHP 中简单地构造关联：

```
class Course
{
    /**
     * @var Subscriber[]
     */
    protected $subscribers = array();

    public function addSubscriber(Subscriber $subscriber)
    {
        $this->subscribers[] = $subscriber;
    }
}

class Subscriber
{
    /**
     * @var Course
     */
    protected $course;

    public function __construct(Course $course, $name, ...)
    {
        $this->course = $course;
        $course->addSubscriber($this);
        $this->name = $name;
        ...
    }
} 
```

订阅者对象只能与课程一起存在，因此您将课程作为参数传递给构造函数。新创建的订阅者在那里注册课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:34:25.073

这听起来像一个[观察者模式](http://www.dofactory.com/Patterns/PatternObserver.aspx#_self1)，直到你说的那一点

> 并了解订阅者的数量及其状态。

你需要一个观察者模式的版本，它暴露了观察者的有限信息。

这一点类似于课程的每个订阅者，您需要从课程对象中获取所有订阅者，以便您可以在课程对象中创建一个方法，该方法将为您提供课程每个订阅者的有限信息。

# r - 如何总结一个 CSV 列中属于另一列中一个因素的数字？

> ID：15474314
> 
> 赞同：0
> 
> 时间：2013-03-18T10:17:14.313
> 
> 标签：r

我对 R 很陌生，并且有一个代表预算的数据文件。我想在目的栏中总结所有价格标签用于一个目的。在读取 csv 时，该目的会自动考虑在内。但是，如何将正确的价格分配给文件中包含多个计数的目的并将它们汇总？

我从这个链接得到了文件： [http ://www.berlin.de/imperia/md/content/senatsverwaltungen/finanzen/haushalt/ansatzn2013.xls?download.html](http://www.berlin.de/imperia/md/content/senatsverwaltungen/finanzen/haushalt/ansatzn2013.xls?download.html)

我在 Open Office 中打开它，导出 .csv 文件并将其命名为 ausgaben.csv。

```
> ausgaben <- read.csv("ausgaben.csv")
> str(ausgaben)
'data.frame':   15895 obs. of  8 variables:
 $ Bereich         : Factor w/ 13 levels "(30) Senatsverwaltungen",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Einzelplan      : Factor w/ 28 levels "(01) Abgeordnetenhaus",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Kapitel         : Factor w/ 270 levels "(0100) Abgeordnetenhaus",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Titelart        : Factor w/ 1 level "Ausgaben": 1 1 1 1 1 1 1 1 1 1 ...
 $ Titel           : int  41101 41103 42201 42701 42801 42811 42821 44100 44304 44379 ...
 $ Titelbezeichnung: Factor w/ 1286 levels "Abdeckung von Geldverlusten",..: 57 973 182 67 262 257 95 127 136 797 ...
 $ Funktion        : Factor w/ 135 levels "(011) Politische Führung",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Euro            : Factor w/ 2909 levels "-1.083,0","-1.295,0",..: 539 2226 1052 1167 1983 1111 1575 2749 1188 1167 ... 
```

在“Funktionen”中有 135 个级别，对应于“欧元”中的总和。我想在“Funktionen”中获取所有相应级别的“Euro”中的所有数字并将它们相加，因此我得到 135 欧元值，并且可以显示在此预算中用于什么目的的花费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:59:37.323

这可以通过 plyr:::ddply 或许多其他函数（ave、tapply 等）来完成。我认为“欧元”不应该是一个因素，而是数字 - 所以请在尝试汇总之前解决这个问题。

由于我们没有您的数据，这里是一个玩具示例：

```
set.seed(1234)
df <- data.frame(fac = sample(LETTERS[1:3], 50, replace = TRUE),
                 x = runif(50))

require(plyr)
ddply(df, .(fac), summarise, 
      sum_x = sum(x))
#   fac    sum_x
1   A 7.938613
2   B 6.692007
3   C 5.645078 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:19:58.077

您可以使用包读取`xls`文件`gdata`：

```
library(gdata)
ausgaben <- read.xls("ansatzn2013.xls") 
```

首先，您需要将列中的值`Ansatz.2013.inkl..Nachtrag.in.Tsd..EUR`从因子转换为数字：

```
Euro <- as.character(ausgaben$Ansatz.2013.inkl..Nachtrag.in.Tsd..EUR)
Euro <- as.numeric(sub(",", "", Euro)) 
```

然后，您可以使用以下函数计算总和`aggregate`：

```
aggregate(Euro ~ ausgaben$Funktion, FUN = sum) 
```

# jquery - 打开网站时 - 如何加载图像弹出窗口

> ID：15474315
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:17:15.683
> 
> 标签：jquery, html, popup

打开网站时 - 如何加载图像弹出窗口

一旦网站打开一个弹出图像需要打开。自动身高和体重。

需要关闭按钮来关闭图像。

如果单击图像是在另一个窗口中转到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:20:23.183

使用`window.onload()`然后添加您的弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:20:34.537

你不能。弹出窗口可能非常烦人，以至于浏览器只允许触发它们以响应用户与页面的交互。到达页面是不够的。

而是将图像添加到页面本身。

# c# - 如何加快odbc插入

> ID：15474322
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:17:34.860
> 
> 标签：c#, .net, oracle, odbc

所以我正在做的是从远程 Nettezza 数据库中读取大量数据并将它们插入到另一个远程 Oracle 数据库中。为此，我正在使用 ODBC 驱动程序。问题是有很多数据，而且需要太多时间。我怎样才能加快速度？这是我所做的：

首先，我创建用于插入的连接和命令：

```
String connect = "Driver={Microsoft ODBC for Oracle};CONNECTSTRING=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myhost)(PORT=myprt))(CONNECT_DATA=(SERVICE_NAME=myname)));Uid=uid;Pwd=pass";
        connection = new OdbcConnection(connect);
        connection.Open();
        String q = @"INSERT INTO TEST (id)
        VALUES (?)";
        myCommand = new OdbcCommand(q,connection); 
```

然后我从 netteza 读取数据：

```
 String connect = "Driver={NetezzaSQL};servername=server;port=5480;database=db; username=user;password=pass;
        string query = @"SELECT T2.LETO_MESEC, T1.* 
                        FROM data T1 
                        JOIN datga2 T2 ON T2.ID = T1.EFT_ID 
                        WHERE T2.LETO_MESEC = '" + mesec + @"'";
            using (OdbcConnection connection = new OdbcConnection(connect))
            {
                try
                {
                    OdbcCommand command = new OdbcCommand(query, connection);
                    connection.Open();
                    OdbcDataReader reader = command.ExecuteReader();
                    int counter=0;
                    while (reader.Read())
                    {
                        int id_first = reader.GetInt32(5);

                        insertOracle(id_first);
                    }
                }
                catch (Exception e)
                {
                    Console.WriteLine("ne dela" + e.ToString());
                }
            } 
```

最后是我的插入：

```
 public void insertOracle(int id_first)
    {

            try
            {
                myCommand.Parameters.Clear();
                myCommand.Parameters.Add(new OdbcParameter("id", id_first));
                myCommand.ExecuteNonQuery();
            }
            catch (Exception e)
            {
                Console.WriteLine("ne dela" + e.ToString());
            }

    } 
```

我注意到这些提交在每一行，所以如何删除它并加快它。现在，20000 行大约需要 10 分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:57:54.343

单次插入总是很慢——开始处理数组中的数据，从源系统中选择一批 ID 并将数组加载到目标。

这是一篇可能会有所帮助的文章。[http://www.oracle.com/technetwork/issue-archive/2009/09-sep/o59odpnet-085168.html](http://www.oracle.com/technetwork/issue-archive/2009/09-sep/o59odpnet-085168.html)

# iphone - 勾选单选

> ID：15474324
> 
> 赞同：0
> 
> 时间：2013-03-18T10:17:37.300
> 
> 标签：iphone, ios, objective-c, uitableview

我目前正在开发一个`UITableView`带有复选标记的项目。问题是我需要限制一次选择多少个项目。

例如：

没有洋葱，没有盐，没有牛奶，没有橙子。

如本例所示，我需要一个限制，以便用户只能选择一项。

当前代码：

```
-(void)checkButtonPressed:(id)sender event:(id)event {
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.myTableView];
    indexP = [self.myTableView indexPathForRowAtPoint: currentTouchPosition];

    NSMutableDictionary *item = [[NSMutableDictionary alloc] init];
    //MasterCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"MasterCell"];
    item = [arrayData objectAtIndex:indexP.row];

    if (indexP != nil) {
        [self tableView: self.myTableView accessoryButtonTappedForRowWithIndexPath:indexP];
    }

    [self.myTableView reloadData]; 
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    NSMutableDictionary *item = [arrayData objectAtIndex:indexPath.row];

    BOOL checked = [[item objectForKey:@"checked"] boolValue];

    [item setObject:[NSNumber numberWithBool:!checked] forKey:@"checked"];

    UITableViewCell *cell = [item objectForKey:@"cell"];
    UIButton *button = (UIButton *)cell.accessoryView;

    UIImage *newImage = (checked) ? [UIImage imageNamed:@"unchecked.png"] : [UIImage imageNamed:@"checked.png"];
    [button setBackgroundImage:newImage forState:UIControlStateNormal];

    NSLog(@"accessoryButtonTappedForRowWithIndexPath____");
} 
```

我的 cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSMutableDictionary *item = [arrayData objectAtIndex:indexPath.row];
    UILabel *nomeLabel = (UILabel *)[cell viewWithTag:2];

    UIButton *btnCheck = (UIButton *)[cell viewWithTag:3];
    BOOL checked = [[item objectForKey:@"checked"] boolValue];
    UIImage *image = (checked) ? [UIImage imageNamed:@"checked.png"] : [UIImage imageNamed:@"unchecked.png"];
    [btnCheck setBackgroundImage:image forState:UIControlStateNormal];

    nomeLabel.text = [item valueForKey:@"nome"];
    nomeLabel.textColor = [UIColor blackColor];
    [btnCheck addTarget:self action:@selector(checkButtonPressed:event:) forControlEvents:UIControlEventTouchUpInside];

    return cell;
} 
```

提前感谢并为我糟糕的英语感到抱歉，请不要投反对票，只要问您是否有任何疑问，我都会随时回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:43:29.457

试试这个 ：：

.h 文件，

```
@property(nonatomic, retain) NSIndexPath *lastIndexPath; 
```

.m 文件，

```
int oldRow, newRow; 
```

表方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CustomCellIdentifier = @"customCell";
    customCell *cell = (customCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];
    if (cell == nil)
    {
        NSArray *nib;
        nib= [[NSBundle mainBundle] loadNibNamed:@"customCell" owner:self options:nil];
        for (id oneObject in nib)
            if ([oneObject isKindOfClass:[customCell class]])
                cell = (customCell *)oneObject;

        newRow = [indexPath row];
        oldRow = [[self lastIndexPath] row];

        cell.accessibilityViewIsModal = (newRow == oldRow && lastIndexPath != nil) ? NO : YES;

        if(cell.accessibilityViewIsModal == NO)
            cell.imgCheck.image = [UIImage imageNamed:@"Checkbox_Checked_New.png"];
        else
            cell.imgCheck.image = [UIImage imageNamed:@"Checkbox_Unchecked_New.png"];

        return cell;
    }
} 
```

选择::

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    newRow = [indexPath row];
    oldRow = [[self lastIndexPath] row];

    //Check Mark Feature
    if (newRow != oldRow)
    {
        customCell *newCell = (customCell *)[tableView cellForRowAtIndexPath:indexPath];
        newCell.imgCheck.image = [UIImage imageNamed:@"Checkbox_Checked_New.png"];

        customCell *oldCell = (customCell *)[tableView cellForRowAtIndexPath:lastIndexPath];
        oldCell.imgCheck.image = [UIImage imageNamed:@"Checkbox_Unchecked_New.png"];

        [self setLastIndexPath:indexPath];
    }
    else
    {
        customCell *newCell = (customCell *)[tableView cellForRowAtIndexPath:indexPath];
        newCell.imgCheck.image = [UIImage imageNamed:@"Checkbox_Checked_New.png"];

        [self setLastIndexPath:indexPath];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:27:29.417

基本上，对于这种业务逻辑，您将不得不自己编写代码。当使用表视图作为基本上单选按钮时，强制单选要求的唯一方法是编写代码来处理用户尝试以系统需要的方式选择第二项的情况：

*   允许多项选择（这里不是这种情况，但在某些情况下您可能会这样做）
*   移除与此不兼容的所有其他检查，检查所选项目，并告诉表格视图刷新您刚刚更改的所有行
*   以某种方式（眨眼、警告、声音）向用户显示错误——当您可以允许直接操作时，这几乎不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:38:37.657

尝试这样可能对您有帮助，这里 lastIndexPath 是`NSIndexPath`在 .h 文件中声明的变量。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        UITableViewCell* Cell = [tableView cellForRowAtIndexPath:indexPath]; 
        int new = [indexPath row]; 
        int old = (lastIndexPath != nil) ? [lastIndexPath row] : -1; 

        if(new != old) 
        { 
            Cell.accessoryType = UITableViewCellAccessoryCheckmark; 
            UITableViewCell* oldCell = [tableView cellForRowAtIndexPath:lastIndexPath]; 
            oldCell.accessoryType = UITableViewCellAccessoryNone;
           lastIndexPath = indexPath; 

        } 

    } 
```

# windows-phone-7 - WP7：获取图片的名称，哪些图片存储在库图片中？

> ID：15474325
> 
> 赞同：0
> 
> 时间：2013-03-18T10:17:41.723
> 
> 标签：windows-phone-7

我有一些存储在媒体库中的图像，请在此处查看。现在我需要在使用照片选择器任务选择图像后获取图像的名称。我使用照片选择器任务来选择图像，然后获取图像的路径。我的目的是从路径中获取名称：

```
private void button1_Click(object sender, RoutedEventArgs e)
{            
     PhotoChooserTask objPhotoChooser = new PhotoChooserTask();
     objPhotoChooser.Completed += new EventHandler<PhotoResult>(PhotoChooseCall);
      objPhotoChooser.Show();            
}

void PhotoChooseCall(object sender, PhotoResult e)
        {
            switch (e.TaskResult)
            {
                case TaskResult.OK:
                    BinaryReader objReader = new BinaryReader(e.ChosenPhoto);
                    image1.Source = new BitmapImage(new Uri(e.OriginalFileName));
                    MessageBox.Show("Photo's name: " + e.OriginalFileName.ToString());                    
                    break;
                case TaskResult.Cancel:
                    MessageBox.Show("Cancelled");
                    break;
                case TaskResult.None:
                    MessageBox.Show("Nothing Entered");
                    break;
            }
        } 
```

输出：

*照片名称：\Applications\Data\C80566AB-E17E-495C-81A1-3FCAE34D3DEDE\Data\PlatformData\PhotoChooser-a8208960-3597-40fc-9b4f-869afcf822b6.jpg*

在我选择相同的图像之后。它的名称会改变（**PhotoChooser-a8208960-3597-40fc-9b4f-869afcf822b6.jpg**会改变）。我认为这不是照片的名称。

所以：

1.  我们可以得到图像的名称吗？

2.  我们该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:52:52.100

**您**可以获得实际的文件名。为此使用[MediaLibrary](http://msdn.microsoft.com/en-us/library/dd254846.aspx)：

```
MediaLibrary lib = new MediaLibrary();
var collection = lib.RootPictureAlbum;

foreach (var p in collection.Albums[0].Pictures)
    Debug.WriteLine(p.Name); 
```

请注意，我在根相册中指定相册索引。0 将用于示例图片，依此类推。如果需要抓取图片的内容，只需使用`p.GetImage();`获取可读流即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:30:45.987

不可以。您无法获取图片中心中的文件名称。你会得到一份流的副本，它有一个不同的临时名称。

# go - openpgp 和 golang

> ID：15474334
> 
> 赞同：2
> 
> 时间：2013-03-18T10:18:16.907
> 
> 标签：go, pgp, openpgp

我对文档有一些问题。

这是我的程序：

```
package main

import (
    "bytes"
    "code.google.com/p/go.crypto/openpgp"
    "encoding/base64"
    "fmt"
)

func main() {

    var entity *openpgp.Entity
    entity, err := openpgp.NewEntity("bussiere", "test", "bussiere@gmail.com", nil)
    if err != nil {

    }

    var (
        buffer bytes.Buffer
    )

    entity.SerializePrivate(&buffer, nil)
    data := base64.StdEncoding.EncodeToString([]byte(buffer.String()))

    fmt.Printf("%q\n", data)

    entity.Serialize(&buffer)
    data2 := base64.StdEncoding.EncodeToString([]byte(buffer.String()))

    fmt.Printf("%q\n", data2)

    entity.PrivateKey.Serialize(&buffer)
    data3 := base64.StdEncoding.EncodeToString([]byte(buffer.String()))

    fmt.Printf("%q\n", data3)

    entity.PrimaryKey.Serialize(&buffer)
    data4 := base64.StdEncoding.EncodeToString([]byte(buffer.String()))

    fmt.Printf("%q\n", data4)

    //fmt.Printf(buffer.String())

} 
```

以下是数据：

```
https://gist.github.com/bussiere/5159890 
```

这是要点上的代码：

```
https://gist.github.com/bussiere/5159897 
```

什么是公钥？

以及如何使用它？

以及如何制作更大的钥匙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T08:23:55.517

更新：此问题已修复：[请参阅此处](https://github.com/golang/crypto/commit/56474dfd625f18739b46f075b138fd0133717491)

儿子下面的解决方案/描述不再合适。

----------------遗留答案从下面开始--------------------

关于如何构建其他大小的密钥的问题：这是不可能的。

我遇到了完全相同的问题，请看：NewEntityFunction 的源代码：

```
383 const defaultRSAKeyBits = 2048
384 
385 // NewEntity returns an Entity that contains a fresh RSA/RSA keypair with a
386 // single identity composed of the given full name, comment and email, any of
387 // which may be empty but must not contain any of "()<>\x00".
388 // If config is nil, sensible defaults will be used.
389 func NewEntity(name, comment, email string, config *packet.Config) (*Entity, error) {
390     currentTime := config.Now()
391 
392     uid := packet.NewUserId(name, comment, email)
393     if uid == nil {
394         return nil, errors.InvalidArgumentError("user id field contained invalid characters")
395     }
396     signingPriv, err := rsa.GenerateKey(config.Random(), defaultRSAKeyBits)
397     if err != nil {
398         return nil, err
399     }
400     encryptingPriv, err := rsa.GenerateKey(config.Random(), defaultRSAKeyBits)
401     if err != nil {
402         return nil, err
403     } 
```

defaultRSAKeyBits 是一个 pkg 级别的未导出常量。所以没有机会修改这种行为。

我最终复制了整个函数，为密钥位添加了一个参数并将其保存在我的代码库中，如果有人有更好的解决方案，我会很高兴听到它。

# node.js - 理解使用 expressJS 和 spookyJS 时的困难

> ID：15474336
> 
> 赞同：0
> 
> 时间：2013-03-18T10:18:23.833
> 
> 标签：node.js, express, spookyjs

我目前正在使用 expressJS 为 nodeJS 服务器和 spookyJS 进行导航以进行测试，我想知道以下代码是否可以工作。

当用户访问时`http://localhost:3131/tests`，他会看到一个 html 站点。这是完美的工作。

示例代码：

```
app.get('/tests', function (req, res)
{
    res.render('tests.html');
}); 
```

当用户访问`http://localhost:1337/tests/start`spookyJS 测试应该开始，但事实并非如此。

示例代码：

```
app.get('/tests/start', function (req, res)
{
   try {
    var Spooky = require('spooky');
} catch (e) {
    var Spooky = require('../../lib/spooky');
}

var spooky = new Spooky({
        casper: {
            logLevel: 'debug',
            verbose: true
        }
    }, function (err) {
        if (err) {
            e = new Error('Failed to initialize SpookyJS');
            e.details = err;
            throw e;
        }

        spooky.on('error', function (e) {
            console.error(e);
        }); ...... 
```

上面的代码不是完整的代码，它只是为了让您了解我想要如何做。用expressJS可以这样做吗？

我做了另一个有效的小例子。当我在浏览器中导航到 nodeJS 服务器时，测试开始，如下例所示`http://localhost:4141`

```
var httpServer = require('http').createServer(function(req, response){
try {
        var Spooky = require('spooky');
    } catch (e) {
        var Spooky = require('../../lib/spooky');
    }

    var spooky = new Spooky({
            casper: {
                logLevel: 'debug',
                verbose: true
            }
.
.
.
.
});
httpServer.listen(1337); 
```

为什么当我使用没有导航的普通 nodeJS 服务器但使用 expressJS 导航时它不起作用？谢谢你的帮助，亚历克斯

# android - 使用 GoogleMap V2 并打开虚拟键盘时，Android 的 EditText 上出现黑色矩形

> ID：15474337
> 
> 赞同：2
> 
> 时间：2013-03-18T10:18:26.023
> 
> 标签：android, google-maps, surfaceview, google-maps-android-api-2

这只发生在 Android 2.x 上。如果您将 a`GoogleMapFragment`放在显示软件键盘时滚动的屏幕上，您的其他小部件的一部分将被黑色矩形覆盖。

![黑色矩形](../Images/a3b1bd029499303727aa0bd769e7f238.png)

这似乎与[https://code.google.com/p/android/issues/detail?id=11676](https://code.google.com/p/android/issues/detail?id=11676)有关。据我所知，新的V2 GoogleMap`SurfaceView`是用来绘制的，但是我们没有`SurfaceView`直接使用。

PS 实际上，这是[Android 的 EditText 的一种变体，当显示虚拟键盘并涉及 SurfaceView 时，它会被隐藏](https://stackoverflow.com/questions/2978290/androids-edittext-is-hidden-when-the-virtual-keyboard-is-shown-and-a-surfacevie)。我在此处发布此内容以增加可见性，因为这是常见的 Google Map V2 问题。如果您认为这应该是一个社区问题，请告诉我或更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:22:36.753

您可以遍历视图层次结构并查找属于`SurfaceView`. 这对我有用。

如果您要使用以下代码，请在Google 地图片段添加到您的活动`traverse()`结束时或任何时候调用。`onCreate`

```
void traverse() {
    View root = findViewById(android.R.id.content);
    traverse(root, 0);
}

void traverse(View v, int depth) {
    if (v instanceof SurfaceView) {
        SurfaceView sv = (SurfaceView) v;
        sv.setBackgroundColor(Color.TRANSPARENT);
    }

    if (v instanceof ViewGroup) {
        ViewGroup vg = (ViewGroup) v;
        for (int i = 0, len = vg.getChildCount(); i < len; i++) {
            traverse(vg.getChildAt(i), depth+1);
        }
    }
} 
```

# java - 统计SQL中的列并获取条件

> ID：15474340
> 
> 赞同：0
> 
> 时间：2013-03-18T10:18:44.623
> 
> 标签：java, sql, oracle10g

`test`我在 Oracle 中有一个带有名称的表，并且`(sal(integer),gender)`是其中的两列。我想获得性别为男性的柜台号码，sal 介于 1000,3000 之间。

例如：如果我在表格测试中有三个人（两个男性，一个女性）并且 person1 sal =1000, person2 sal = 2020, person3 sal = 1040

sql 语句的返回值将等于 (2)。

该变量将存储来自java的返回值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:30:48.713

试试这个查询，

```
select count(*) from <table_name> where gender='male' and salary between 1000 to 3000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:25:15.813

根据我从您的问题中了解到的，您实际上想计算行而不是列。然后您可以使用`count(column_name)`SQL 的功能以及条件（where 子句）。

询问：`SELECT COUNT(*) "Count" FROM test WHERE gender='male' AND salary BETWEEN 1000 AND 3000`

# jsf-2 - 在 JSF 错误处理程序中使用 ExternalContext.dispatch 会导致页面呈现损坏

> ID：15474345
> 
> 赞同：2
> 
> 时间：2013-03-18T10:19:03.283
> 
> 标签：jsf-2

简化后，我的错误处理程序如下所示：

```
@Override
public void handle() throws FacesException {
    Iterator<ExceptionQueuedEvent> unhandledExceptionQueuedEvents = getUnhandledExceptionQueuedEvents().iterator();
    FacesContext context = FacesContext.getCurrentInstance();

    if (unhandledExceptionQueuedEvents.hasNext()) {
        Throwable exception = unhandledExceptionQueuedEvents.next().getContext().getException();
        unhandledExceptionQueuedEvents.remove();
        context.getExternalContext().dispatch("/error.jsf");
    }

    while (unhandledExceptionQueuedEvents.hasNext()) {
        unhandledExceptionQueuedEvents.next();
        unhandledExceptionQueuedEvents.remove();
    }
} 
```

简化模板.xhtml

```
<html>
    <f:view>
    <h:head>
    <!-- some stuff here -->
    </h:head>
    <h:body>
        <div id="menu"><!-- menu content --></div>
        <div id="content">
            <ui:insert name="body"></ui:insert>
        </div>
    </h:body>
    </f:view>
</html> 
```

错误.xhtml

```
<html>
<ui:composition template="/template.xhtml">
    <ui:define name="body">
        ERROR
    </ui:define>
</ui:composition>
</html> 
```

但是在渲染 error.jsf 时，使用 ui:composition 进行模板会出错。JSF 渲染 template.xhtml 直到 ，它开始重新渲染模板。结果是一个页面，其中菜单被渲染了两次，并且所有资源都再次包含在页面中间。它的开头看起来像这样：

```
<div id="menu></div>
<div<?xml version="1.0" encoding="UTF-8" ?="">
    <!-- Page included once more --> 
```

这之后是服务器上的无限循环，导致数以百万计的日志行一遍又一遍地包含以下位

```
at com.xdin.competence.web.error.ErrorHandler.handleException(ErrorHandler.java:123) [:]
at com.xdin.competence.web.error.ErrorHandler.handle(ErrorHandler.java:108) [:]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:115) [:2.0.3-]
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107) [:2.0.3-]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114) [:2.0.3-]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308) [:2.0.3-]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:734) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:541) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:479) [:6.0.0.Final]
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:407) [:6.0.0.Final]
at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:542) [:2.0.3-]
at javax.faces.context.ExternalContextWrapper.dispatch(ExternalContextWrapper.java:89) [:2.0.3-]
at org.jboss.seam.faces.environment.org$jboss$weld$bean-jboss$classloader:id="vfs:$$$C:$JBoss$jboss-6$0$0$Final$server$career$deploy$career-portal$war"-ManagedBean-class_org$jboss$seam$faces$environment$SeamExternalContext_$$_WeldClientProxy.dispatch(org$jboss$weld$bean-jboss$classloader:id="vfs:$$$C:$JBoss$jboss-6$0$0$Final$server$career$deploy$career-portal$war"-ManagedBean-class_org$jboss$seam$faces$environment$SeamExternalContext_$$_WeldClientProxy.java) [:3.0.1.Final] 
```

知道原因可能是什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T11:54:56.930

您不应该使用`ExternalContext#dispatch()`来呈现 JSF 视图。它应该只用于转发到非 JSF 资源。您应该改为设置所需的 JSF 视图[`FacesContext#setViewRoot()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#setViewRoot%28javax.faces.component.UIViewRoot%29)并让 JSF 呈现它。

```
ViewHandler viewHandler = context.getApplication().getViewHandler();
UIViewRoot viewRoot = viewHandler.createView(context, viewId);
context.setViewRoot(viewRoot);
context.renderResponse(); 
```

或者，如果您当前已经处于渲染响应中，那么让 JSF 重新渲染它已经太晚了。您需要手动构建和渲染新视图。在这种情况下，将最后一行替换为：

```
ViewDeclarationLanguage vdl = viewHandler.getViewDeclarationLanguage(context, viewId);
vdl.buildView(context, viewRoot);
context.getApplication().publishEvent(context, PreRenderViewEvent.class, viewRoot);
vdl.renderView(context, viewRoot);
context.responseComplete(); 
```

请注意，如果响应已经提交，那么这又为时已晚。您可能还想事先检查一下。

您可能会发现[OmniFaces](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)的[源代码](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.java)有助于获得一些见解。[`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)

# c++ - 使用 MFC 创建 WM_USER 处理程序

> ID：15474346
> 
> 赞同：2
> 
> 时间：2013-03-18T10:19:04.380
> 
> 标签：c++, windows, mfc

虽然我有丰富的软件经验，但我没有做过大量的 Windows 编程。我正在尝试从线程发布 WM_USER 消息，以便在主 UI 线程中获取它，但我遇到了一些麻烦。这是在 C++ 中使用 VS2010 和 MFC。

因此，我创建了一个消息映射，

```
#define WM_MYMSG (WM_USER + 77)
BEGIN_MESSAGE_MAP(CMyApp, CWinApp)
    ON_MESSAGE(WM_MYMSG, DoSomething)
END_MESSAGE_MAP() 
```

声明处理函数如下，

```
afx_msg LRESULT DoSomething(WPARAM wParam, LPARAM lParam); 
```

并将函数体写为，

```
LRESULT CMyApp::DoSomething( WPARAM wParam, LPARAM lParam ) 
{
    UNREFERENCED_PARAMETER(wParam);
    UNREFERENCED_PARAMETER(lParam);

    CallSomeFunction();
    return 0L;
} 
```

据我所知，这完全符合 MSDN 所说的here。

[http://msdn.microsoft.com/en-gb/library/k35k2bfs(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/k35k2bfs(v=vs.100).aspx)

但是我得到了一个

```
error C2440: 'static_cast' : cannot convert from 'LRESULT (__cdecl CMyApp::*)(WPARAM,LPARAM)' to 'LRESULT (__cdecl CWnd::* )(WPARAM,LPARAM)' 
```

与线有关

```
ON_MESSAGE(WM_AVATAR_SCALE_MSG, DoSomething) 
```

谁能让我知道问题是什么？

谢谢阅读。

保罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:30:31.627

CMyApp 继承自 CWinApp，后者继承自 CWinThread。CWinThread 用户定义的消息在其消息映射中采用一个特殊的宏来执行您想要执行的操作：

改变这个：

```
ON_MESSAGE(WM_AVATAR_SCALE_MSG, DoSomething) 
```

对此：

```
ON_THREAD_MESSAGE(WM_AVATAR_SCALE_MSG, DoSomething) 
```

假设`DoSomething()`是您`CMyApp`班级的成员。

[`ON_THREAD_MESSAGE()`](http://msdn.microsoft.com/en-us/library/1cy89e70%28v=vs.80%29.aspx)有关更多信息，请参阅文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:20:48.800

问题是消息映射需要 CWnd 上的函数，而您的类显然不是 CWnd，无论是由于实际上是这样还是从 CWnd 继承。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T10:23:52.277

该函数希望您传递一个采用 WPARAM 和 LPARAM 的 CWnd 方法，但您传递的是 CMyApp 的函数。

使 CMyApp 类扩展 CWnd 类：

```
class CMyApp : public CWnd {
    // members here
}; 
```

**编辑**

如果这是不可能的，那么您将不得不找到一种方法来传递 CWnd 的函数或任何其他从 CWnd 扩展的具有正确参数和返回类型的类的函数。

# sql - 对 2 列使用 Oracle CONTAINS 子句

> ID：15474350
> 
> 赞同：1
> 
> 时间：2013-03-18T10:19:13.320
> 
> 标签：sql, oracle, oracle10g, oracle11g

如何使用 CONTAINS 子句从表的 2 列中进行搜索。例如：-假设我有一个名为 CONTACT 的表。它包含 FIRST_NAME、LAST_NAME、USERNAME、EMAIL 等列。

现在，如果我想搜索一个字符串，例如使用 CONTAINS 子句在 USERNAME 列中说“ABCD”，我会写：

```
SELECT * 
FROM CONTACT 
WHERE (CONTAINS(USERNAME, 'ABCD', 1)> 0); 
```

它给了我想要的结果。但是如果我必须在 2 列上搜索字符串怎么办？我尝试使用：-

```
SELECT * 
FROM CONTACT 
WHERE (CONTAINS(USERNAME, 'ABCD', 1)> 0)
AND (CONTAINS(FIRST_NAME, 'ABCD', 1)> 0); 
```

但这给了我一个错误。请帮我解决一下这个。

PS：已根据使用 CONTAINS 子句的要求创建了列索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:34:00.753

您的标签不是唯一的，请尝试：

```
SELECT * 
FROM CONTACT 
WHERE (CONTAINS(USERNAME, 'ABCD', 1)> 0)
AND (CONTAINS(FIRST_NAME, 'ABCD', 2)> 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-11T18:42:54.590

实际上，如果您多次使用 contains 子句，则可以跳过标签：

`SELECT * FROM CONTACT WHERE (CONTAINS(USERNAME, 'ABCD')> 0) AND (CONTAINS(FIRST_NAME, 'ABCD')> 0);`

它会自动添加标签。

# jquery - 如何创建此选择器

> ID：15474351
> 
> 赞同：-6
> 
> 时间：2013-03-18T10:19:13.773
> 
> 标签：jquery

我想在单击 div 时创建这样的选择器，它必须显示其他选项，如图像中，选择另一个选项后，它必须在 div 中显示所选值。

![在此处输入图像描述](../Images/08e01583852139099e827106253fc736.png)

这张图片来自 [谷歌翻译](http://translate.google.com/#sk/en/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:26:31.027

你可以这样做：

```
<div id="drop-button">
    From: LANGUAGE
    <ul id="drop-content">
        <li>OPTION</li>
        <li>OPTION</li>
        <li>OPTION</li>
        <li>OPTION</li>
        <li>OPTION</li>
        <li>OPTION</li>
    </ul>
</div>

<style>
    #drop-content { display: none; }
</style>

<script>
    $(document).ready(function() {
        $("#drop-button").toggle(function() {
            $("#drop-content").fadeIn(350);
        }, function() {
            $("#drop-content").fadeOut(350);
        });
    });
</script> 
```

JsFiddle：http: [//jsfiddle.net/9bzkM/8/](http://jsfiddle.net/9bzkM/8/)

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:37:42.537

看到这个：**[样本](http://jsfiddle.net/VuMkW/)**

```
$(document).ready(function () {
  $("#lang-from").click(function () {
    $("#lang-content").slideToggle(350);
  });

  $("#lang-content li").click(function (e) {
    e.stopPropagation();
    $("#lang-content").slideUp(350);
    $("#lang-from span").text($(this).text());
  });

}); 
```

# ios - 通过 GPS 跟踪用户，ios

> ID：15474354
> 
> 赞同：0
> 
> 时间：2013-03-18T10:19:28.353
> 
> 标签：ios, mkmapview, mapkit, core-location, cllocationmanager

我需要通过gps跟踪用户位置。我需要沿着路径显示一条折线，用户旅行。还需要计算距离，速度和经过时间。请指导我一些教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:12:05.213

通过以下委托方法保留用户的导航位置。

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation {
} 
```

通过使用以下委托方法传递覆盖视图。

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
if([overlay class] == MKPolyline.class)
{
    MKOverlayView* overlayView = nil;
    MKPolyline* polyline = (MKPolyline *)overlay;
    MKPolylineView  * routeLineView = [[MKPolylineView alloc] initWithPolyline:polyline];

    routeLineView.fillColor = [UIColor blueColor];
    routeLineView.strokeColor = [UIColor blueColor];

    routeLineView.lineWidth = 3;
    routeLineView.lineCap = kCGLineCapSquare;
    overlayView = routeLineView;
    return overlayView;
} else {
    return nil;
}
} 
```

有关创建折线，请参阅以下内容

[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html#//apple_ref/doc/c_ref/MKPolyline](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html#//apple_ref/doc/c_ref/MKPolyline)

问候，阿伦。

# python - 让 iOS 应用程序与我的家庭服务器通信

> ID：15474356
> 
> 赞同：1
> 
> 时间：2013-03-18T10:19:35.000
> 
> 标签：python, ios, sockets, networking

目前，我的衣柜里有一台家庭服务器，基本上什么都不做。它安装了 Ubuntu Server 8.0.4，稍后将使用用于 Web 开发的 apache，ssh 和 python/twisted。

这是问题：

我创建了一个应用程序来与“localhost”端口 40 对话，使用套接字实现，这是我所做的但我想要开发的链接：[http ://www.raywenderlich.com/3932/how-to -create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

现在连接到本地主机没问题，但我想扩展它以与我的服务器一起使用。

我在我的服务器上实现了 python 协议并更改了我在 iOS 应用程序中访问的 IP 地址。这是我的实现，除了我正在访问的端口外，它与教程完全相同。

```
from twisted.internet.protocol import Factory, Protocol

from twisted.internet import reactor

class IphoneChat(Protocol):

    def connectionMade(self):
        self.factory.clients.append(self)
        print "clients are ", self.factory.clients

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

    def dataReceived(self, data):
        a = data.split(':')
        print a
        #b = password.split(':')
        #print b
        if len(a) > 1:
            command = a[0]
            content = a[1]
            #username = a[2]
            #password = a[2]

            msg = ""
            #msg2 = ""
            if command == "username":
                self.name = data
                msg = self.name + " has joined"
                #self.name = password
                #msg2 = self.name + " this is his password"
                #print msg

            elif command == "password":
                self.name = data
                msg = self.name + " this is their password"

            elif command == "msg":
                msg = self.name + ": " + data
                print msg
                #msg2 = self.name + ": " + password
                #print msg2

            for c in self.factory.clients:
                c.message(msg)#1, msg2)

    def message(self, message):
        self.transport.write(message + '\n')

factory = Factory()

factory.protocol = IphoneChat #here1#

factory.clients = []

reactor.listenTCP(40, factory)

print "Iphone Chat server started"

reactor.run() 
```

所以真正的问题是，我无法将客户端连接到我的服务器或其他东西......我很抱歉，但我对网络很陌生。

任何意见都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:19:59.000

如果您还没有建立从 Internet 到您的服务器的网络通信，然后您想要确定您可以先使用简单的测试用例来做到这一点，那么有很多东西可以阻止来自 Internet 的流量到达您服务器上的程序。

您的服务器是否通过路由器连接到互联网？如果是这样，您可以从本地网络内部与服务器通信（即使用 192.168.xxx.xxx ip 地址），使用类似`netcat`或`telnet`？

如果可行，您应该从网络外部尝试（即使用其他 IP 地址，来自[whatismyip.net](http://whatismyip.net)或类似地址）。如果您之前确实没有网络经验，您可能忽略了设置端口转发，这是您路由器上的设置。

有很多关于教你如何设置 Ubuntu 家庭服务器的教程，我建议学习如何托管一个（非常）简单的网页作为学习如何联网的一种方式，这对调试联网程序有很大帮助，比如你正在做的那个。

# android - android 应用程序在多次点击 EditText 时崩溃

> ID：15474362
> 
> 赞同：0
> 
> 时间：2013-03-18T10:19:50.923
> 
> 标签：android, android-edittext

我用 EditTexts 和 textview 制作了一个具有相同布局的应用程序，我在底部发布了来自 xml 的代码，如果我尝试在其中写一些东西，它工作正常，但是如果多次单击一个编辑文本，应用程序崩溃，这就是 logcat

```
03-18 12:09:43.007: E/AndroidRuntime(13064): FATAL EXCEPTION: main
            03-18 12:09:43.007: E/AndroidRuntime(13064): java.lang.IllegalStateException: ActionBarContextView can only be used with android:layout_height="wrap_content"
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at com.android.internal.widget.ActionBarContextView.onMeasure(ActionBarContextView.java:426)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2261)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1399)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.ScrollView.onMeasure(ScrollView.java:367)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at 
android.view.View.measure(View.java:12922)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4706)
            03-18 12:09:43.007: E/AndroidRuntime(13064):    at 
```

这是xml文件

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_center"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingLeft="10dp"
android:paddingRight="5dp" >

    <LinearLayout
android:focusable="true" 
android:focusableInTouchMode="true"
android:layout_width="0dip" 
android:layout_height="0dip"/>

    <TextView
        android:id="@+id/textNume"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="NUME SI PRENUME"
        android:textColor="@color/MenuDarkGrey"
        android:textSize="13sp" />

    <EditText
        android:id="@+id/edtNume"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:gravity="left"
        android:inputType="textCapWords"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textCNP"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CNP"
            android:textColor="@color/MenuDarkGrey"
            android:textSize="13sp" />

        <ImageView
            android:id="@+id/wrong_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:visibility="gone"
            android:layout_alignParentTop="true"
            android:src="@drawable/exclamare_atentionare" />

    </RelativeLayout>

    <EditText
        android:id="@+id/edtCNP"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:ems="10"
        android:gravity="left"
        android:inputType="number|textCapWords"
        android:maxLength="25"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textJudLoc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="JUDET,LOCALITATE"
        android:textColor="@color/MenuDarkGrey"
        android:textSize="13sp" />

    <EditText
        android:id="@+id/edtJudLoc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:focusableInTouchMode="false"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textAdresa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="ADRESA"
        android:textColor="@color/MenuDarkGrey"
        android:textSize="13sp" />

    <EditText
        android:id="@+id/edtAdresa"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:gravity="left"
        android:inputType="textCapWords"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/textTelefon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="TELEFON"
        android:textColor="@color/MenuDarkGrey"
        android:textSize="13sp" />

    <EditText
        android:id="@+id/edtTelefon"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:gravity="left"
        android:inputType="number|textCapWords"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:layout_height="wrap_content" >

<TextView
        android:id="@+id/textEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:gravity="left"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:text="EMAIL"
        android:textColor="@color/MenuDarkGrey"
        android:textSize="13sp" />

        <ImageView
            android:id="@+id/wrong_textmail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:visibility="gone"
            android:layout_alignParentTop="true"
            android:src="@drawable/exclamare_atentionare" />

    </RelativeLayout>

    <EditText
        android:id="@+id/edtEmail"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="1dp"
        android:background="@drawable/edit_text"
        android:gravity="left"
        android:lines="1"
        android:inputType="textEmailAddress"
        android:maxLines="1"
        android:singleLine="true"
        android:paddingLeft="5dp"
        android:paddingTop="5dp"
        android:textColor="@color/ColorTitlu"
        android:textSize="18sp"
        android:textStyle="bold" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="5dp" >

        <Button
            android:id="@+id/renunta"
            android:layout_width="140dp"
            android:layout_height="50dp"
            android:background="@drawable/button_renunta"
            android:paddingLeft="40dp"
            android:text="Renunta"
            android:textColor="@color/MenuLightGrey"
            android:textSize="16sp"
            android:textStyle="bold" >
        </Button>

        <Button
            android:id="@+id/salveaza"
            android:layout_width="140dp"
            android:layout_height="50dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="@drawable/button_salveaza"
            android:paddingLeft="40dp"
            android:text="Salveaza"
            android:textColor="@color/MenuLightGrey"
            android:textSize="16sp"
            android:textStyle="bold" />
    </RelativeLayout>

    </LinearLayout> 
```

和课堂上的代码

```
 edtNume = (EditText)findViewById (R.id.edtNume);
        edtNume.setOnFocusChangeListener(new OnFocusChangeListener()
        {
            @Override
            public void onFocusChange(View v, boolean hasFocus) 
            {
                if (hasFocus == true)
                {
                  ContulMeu.tooltip.setVisibility (View.VISIBLE); 
                  ContulMeu.tvTooltip.setText ("Completeaza numele si prenumele");
                }else{
                    ContulMeu.tvTooltip.setText ("");
                     ContulMeu.tooltip.setVisibility (View.GONE); 
                }
            }
        });

        edtCnp = (EditText)findViewById (R.id.edtCNP);
        edtCnp.setOnFocusChangeListener(new OnFocusChangeListener()
        {
            @Override
            public void onFocusChange(View v, boolean hasFocus) 
            {
                if (hasFocus == true)
                {
                  ContulMeu.tooltip.setVisibility (View.VISIBLE); 
                  ContulMeu.tvTooltip.setText ("Codul numeric personal");
                }else{
                    ContulMeu.tvTooltip.setText ("");
                     ContulMeu.tooltip.setVisibility (View.GONE);
                }
            }
        });

        edtCnp.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                if (edtCnp.getText().toString().length()!=13 || !YTOUtils.verificaCNP(edtCnp.getText().toString()))
                     ((ImageView) findViewById(R.id.wrong_text)).setVisibility(View.VISIBLE);
                 else ((ImageView) findViewById(R.id.wrong_text)).setVisibility(View.GONE);
            }
        });

        edtJudLoc = (EditText)findViewById (R.id.edtJudLoc);    
        edtJudLoc.setOnClickListener (new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                if (edtCnp.getText().toString().length()!=13 || !YTOUtils.verificaCNP(edtCnp.getText().toString()))
                     ((ImageView) findViewById(R.id.wrong_text)).setVisibility(View.VISIBLE);
                 else ((ImageView) findViewById(R.id.wrong_text)).setVisibility(View.GONE);
                    salveaza=false;//nu salvez cand trebuie setat judetul
                    Lista.tipDate = "judete";
                    Intent i = new Intent (DespreMine.this,Lista.class);
                    i.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                    startActivity (i);

            }
        });
        edtJudLoc.setFocusable(false);
        edtAdresa = (EditText)findViewById (R.id.edtAdresa);
        edtAdresa.setOnFocusChangeListener(new OnFocusChangeListener()
        {
            @Override
            public void onFocusChange(View v, boolean hasFocus) 
            {
                if (hasFocus == true)
                {
                  ContulMeu.tooltip.setVisibility (View.VISIBLE); 
                  ContulMeu.tvTooltip.setText ("Adresa completa din buletin");
                }else{
                    ContulMeu.tvTooltip.setText ("");
                     ContulMeu.tooltip.setVisibility (View.GONE); 
                }
            }
        });
        edtTelefon = (EditText)findViewById (R.id.edtTelefon);
        edtTelefon.setOnFocusChangeListener(new OnFocusChangeListener()
        {
            @Override
            public void onFocusChange(View v, boolean hasFocus) 
            {
                if (hasFocus == true)
                {
                  ContulMeu.tooltip.setVisibility (View.VISIBLE); 
                  ContulMeu.tvTooltip.setText ("Numarul tau de telefon la care poti fi contactat");
                }else{
                    ContulMeu.tvTooltip.setText ("");
                     ContulMeu.tooltip.setVisibility (View.GONE); 
                }
            }
        });
        edtEmail = (EditText)findViewById (R.id.edtEmail);
        edtEmail.setOnFocusChangeListener(new OnFocusChangeListener()
        {
            @Override
            public void onFocusChange(View v, boolean hasFocus) 
            {
                if (hasFocus == true)
                {
                  ContulMeu.tooltip.setVisibility (View.VISIBLE);
                  ContulMeu.tvTooltip.setText ("Adresa de e-mail la care poti fi contactat");
                }else{
                        ContulMeu.tvTooltip.setText ("");
                     ContulMeu.tooltip.setVisibility (View.GONE); 
                     edtEmail.setText(YTOUtils.replaceInEmail(edtEmail.getText().toString()));
                }
            }
        });

        edtEmail.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                if (!YTOUtils.eMailValidation(edtEmail.getText().toString()))
                     ((ImageView) findViewById(R.id.wrong_textmail)).setVisibility(View.VISIBLE);
                 else ((ImageView) findViewById(R.id.wrong_textmail)).setVisibility(View.GONE);
            }
        });

        load();

        btn_renunta = (Button) findViewById (R.id.renunta);
        btn_renunta.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                salveaza=false;
                finish ();

            }
        });

        btn_salveaza = (Button) findViewById (R.id.salveaza);
        btn_salveaza.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                salveaza=false;//daca salveaza=true salvez si la onPause()
                AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {

                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                    InputMethodManager imm = (InputMethodManager) 
                            getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(edtTelefon.getWindowToken(), 0);
                }
        });

        Typeface tf = Typeface.createFromAsset(getAssets(), "ArialRoundedMT.ttf");

        edtNume.setTypeface(Typeface.create(tf,Typeface.BOLD));
        edtCnp.setTypeface(Typeface.create(tf,Typeface.BOLD));
        edtJudLoc.setTypeface(Typeface.create(tf,Typeface.BOLD));
        edtAdresa.setTypeface(Typeface.create(tf,Typeface.BOLD));
        edtTelefon.setTypeface(Typeface.create(tf,Typeface.BOLD));
        edtEmail.setTypeface(Typeface.create(tf,Typeface.BOLD));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:13:08.587

我认为这个错误：

```
<LinearLayout
android:focusable="true" 
android:focusableInTouchMode="true"
android:layout_width="0dip" 
android:layout_height="0dip"/> 
```

将其更改为

```
 <LinearLayout
android:focusable="true" 
android:focusableInTouchMode="true"
android:layout_width="wrap_content" 
android:layout_height="wrap_content"/> 
```

希望这对您有所帮助。

# sql - 存储过程中的两个 select 语句

> ID：15474364
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:19:52.823
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有两个表：

*   `Customer`:（`customerid, customername`仅包含一行）

*   `Product`:（`productid, productname, category, price`包含多行）

我想在单个存储过程中使用 2 个选择语句`customername`从`customer`表和表中`productname,category,price`获取。`product`

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:26:20.283

使用临时表 (#temp) 概念，您可以做到这一点。更好的方法是在这两个表之间创建关系并编写连接查询。

# c# - 在 Visual Studio 中将图像添加到项目中

> ID：15474366
> 
> 赞同：28
> 
> 时间：2013-03-18T10:19:56.683
> 
> 标签：c#, visual-studio

我通过右键单击项目并添加一个新文件夹来向我的项目添加一个文件夹。现在我将图像添加到文件夹中（使用 Windows 文件资源管理器中的复制粘贴），但解决方案资源管理器没有显示我添加的图像。我也刷新了解决方案。

此外，在该文件夹中，没有添加图像的选项，只有 Visual Studio 文件（新项目等）。

为什么解决方案资源管理器不显示我的图像？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-18T10:56:14.773

*   您只需要拥有一个现有文件，打开文件夹上的上下文菜单，然后选择`Add`=>`Existing item...`

    [![在此处输入图像描述](../Images/f311bb021c2bffb25ce0597e2ae4b16b.png)](https://i.stack.imgur.com/Tw6EJ.png)

*   如果您已将**文件放置在项目结构**中，但尚未包括在内，您可以通过使它们在解决方案资源管理器中可见来实现

    [![在此处输入图像描述](../Images/e8f7882e2ea9e706ff157213ad974c74.png)](https://i.stack.imgur.com/ofe7w.png)

然后通过文件上下文菜单包含它们 [![在此处输入图像描述](../Images/5020616c93800c65d1f4b97b9191f670.png)](https://i.stack.imgur.com/O7SgM.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T10:22:27.023

您需要打开`Show All Files`解决方案窗格工具栏上的选项并手动包含此文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T10:22:20.380

单击 Visual Studio 中的项目，然后单击解决方案资源管理器工具栏上标题为“显示所有文件”的按钮。这将显示不在项目中的文件。现在您将看到该图像，右键单击它，然后选择“包含在项目中”，这会将图像添加到项目中！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-19T16:23:05.017

如果您遇到的问题是添加的资​​源是图像并且在编译时没有被复制到您的构建文件夹中。您需要将“Build Action”从 Resource 更改为 None（这是默认设置）并将 Copy 更改为“If Newer”或“Always”，如下所示：

[![在此处输入图像描述](../Images/82eb2e2d9b85ecf21b42ff57d562ffd4.png)](https://i.stack.imgur.com/fb0Cm.png)

# php - 按子子数组值对子数组进行排序

> ID：15474367
> 
> 赞同：0
> 
> 时间：2013-03-18T10:19:58.493
> 
> 标签：php, sorting, sub-array

我在按子子数组值对数组进行排序时遇到了一些麻烦。我已经尝试过一些类似 usort 的东西，但它似乎不起作用。我有一个名为 $array_1 的多维数组，它是根据搜索条件（例如截止日期、优先级编号、组号等）动态创建的，它为每个相同的值创建一个子数组。即它将为所有具有group-> 1的子数组创建一个子数组，为group-> 2创建另一个子数组。现在我想按例如日期对子数组进行排序，这应该保持子数组按组（1 和 2）聚集。

编辑：我现在正在使用数组排序函数，我认为问题如下：我可以在以下函数中使用值但不能使用变量：

```
 foreach($array_1 as &$arr){
usort($arr,"cmp");
}

function cmp($a, $b) {
    if ($a[2] == $b[2]) {
            return 0;
    }
    return ($a[2] < $b[2]) ? -1 : 1;
}
echo $type;
print_r($array_1); 
```

如果我用一个也是 2 的变量替换数字 2 并用 is_numeric 检查该函数不起作用。为什么是这样？

# mysql - MySQL使用子查询中的表字段作为条件

> ID：15474371
> 
> 赞同：1
> 
> 时间：2013-03-18T10:20:10.003
> 
> 标签：mysql, subquery, conditional-statements, having

经过大量搜索后，我得出以下 sql 语句：

```
SELECT a.*, b.name as producer ,
    (SELECT ROUND(AVG(average)) 
    FROM `abc123_pb_carexperience` d 
    LEFT JOIN `abc123_pb_cars` e on d.car_id=e.id HAVING name LIKE '%a.name%') as avgrating
FROM abc123_pb_brands a
LEFT JOIN abc123_pb_producer as b on a.producer_id = b.id
ORDER BY a.name ASC 
```

兴趣点是子查询中的条件 HAVING name LIKE。如果我将名称写为字符串（HAVING name LIKE '%bmw%'），它可以工作，但我必须使用表 a 的名称字段来获取特定品牌的所有平均评级。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:29:28.980

我认为您的内部子查询应如下所示：

```
 (SELECT ROUND(AVG(average)) 
    FROM `abc123_pb_carexperience` d 
    LEFT JOIN `abc123_pb_cars` e on d.car_id=e.id 
    WHERE name LIKE CONCAT('%',a.name,'%')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:31:15.417

您可以像这样更改您的查询

```
SELECT
  a.*,
  b.name as producer,
  ROUND(AVG(d.average)) as avgrating
FROM abc123_pb_brands a
  LEFT JOIN abc123_pb_producer as b
    on a.producer_id = b.id
  LEFT JOIN `abc123_pb_carexperience` d
    ON d.name LIKE '%a.name%'
  LEFT JOIN `abc123_pb_cars` e
    on d.car_id = e.id
ORDER BY a.name ASC 
```

# visual-c++ - 通过 MSMQ 5.0 间歇性接收消息的延迟

> ID：15474373
> 
> 赞同：2
> 
> 时间：2013-03-18T10:20:13.977
> 
> 标签：visual-c++, windows-7, msmq, windows-server-2008-r2

我有一个使用 MSMQ 进行通信的客户端服务器应用程序。服务器在 Windows Server 2008 R2 上运行，客户端工作站在 Windows 7 操作系统上运行。MSMQ 版本为 5.0。

间歇性地有大约 20-40 秒的巨大延迟。在发送消息的时间和接收消息的时间之间。

我在 Google 中发现了 MSMQ 3.0 的类似问题 [http://support.microsoft.com/kb/909401](http://support.microsoft.com/kb/909401)

[http://blogs.msdn.com/b/asiatech/archive/2010/01/23/troubleshooting-message-queue-messages-get-delayed-intermittently.aspx](http://blogs.msdn.com/b/asiatech/archive/2010/01/23/troubleshooting-message-queue-messages-get-delayed-intermittently.aspx)

但找不到类似 MSMQ 5.0 的东西

谁可以帮我这个事 ？

提前致谢...！！！

# javascript - 从 JSON 对象读取值

> ID：15474382
> 
> 赞同：0
> 
> 时间：2013-03-18T10:20:39.393
> 
> 标签：javascript, json, object, loops

我目前正在尝试从 JSON 对象获取内容。我一直在寻找谷歌，我认为应该工作，出于某种原因，没有。

JSON 看起来像这样：

```
{"locatie0":{"naam0":["Domplein"],"value0":["value1"]},"locatie1":{"naam1":["Neude"],"value1":["value1"]},"locatie2":{"naam2":["Vredenburg"],"value2":["value1"]},"locatie3":{"naam3":["Stadhuisbrug"],"value3":["value1"]},"locatie4":{"naam4":["Korte Minrebroederstraat"],"value4":["value1"]}} 
```

我使用下面的代码来读取文件，但由于某种原因，它总是会返回 undefined 或 NaN。

```
$.ajax({
    url: "_data/pleinen.json",
    type: 'get', 
    dataType: "json", 
    success: function(data) {
        for(var k = 0; k < _loc.length; k += 1) {
            var _locaties = data.locatie[k].naam[k];
            // Should alert "Domplein", "Neude", "Vredenburg", "Stadhuisbrug", "Korte Minrebroekstraat", 
            alert(_locaties);
        }
    }
}); 
```

任何人都可以查看我的代码中是否有任何错误，或者是否有更好的方法来读取这些值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T10:23:57.490

`locatie[k]`尝试访问`k`中对象的属性`locatie`，但在您的情况下，数字是名称本身的一部分。您必须动态构建属性名称。此外，嵌套对象的每个属性都是一个包含一个元素的数组，因此您必须访问第一个元素：

```
var _locaties = data['locatie' + k]['naam' + k][0]; 
```

你的数据结构有点奇怪。属性名称中的数字使访问数据更加困难。如果可以更改，请将其更改为对象数组，如果不需要它们，请不要将数组用于属性：

```
[{"naam": "Domplein", "value": "value1"}, {"naam": "Neude", "value":"value1"}] 
```

然后访问数据很简单：

```
for (var i = 0, l = data.length; i < l; i++) {
    var _locaties = data[i].naam;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:23:57.743

The`locatie`和 the`naam`不是数组，因此您无法像以前那样访问它们。

您必须将数字与名称组合为字符串。类似的东西

```
data['locatie'+k] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T10:24:56.100

试试这个：

```
$.ajax({
    url: "_data/pleinen.json",
    type: 'get', 
    dataType: "json", 
    success: function(data) {
        for(var k = 0; k < _loc.length; k += 1) {
            var _locaties = data['locatie'+k]['naam'+k][0]; 
            alert(_locaties);
        }
    }
}); 
```

由于`naam`属性的值是数组，因此您需要从中获取第一项以获取字符串值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T10:28:29.557

JSON 不像数组那样保证任何顺序。

但是在您的情况下，JSON 的键具有索引提示，因此请尝试使用以下命令访问“naam”：

```
 data["locatie" + k]["naam" + k] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T10:27:24.007

试试这个 ;

```
k = 0;
console.log( 
    data[ 'locatie'+ k]['naam'+ k][0], 
    data[ 'locatie'+ k]['value'+ k ][0]
);

k = 1;
console.log( 
    data[ 'locatie'+ k]['naam'+ k][0], 
    data[ 'locatie'+ k]['value'+ k ][0]
); 
```

# c# - C# 上的组合框值和文本框值的问题

> ID：15474383
> 
> 赞同：-3
> 
> 时间：2013-03-18T10:20:43.870
> 
> 标签：c#

我是 C# 的初学者，我真的需要一些线索来解决这个问题。

我在 c# 中创建了一个项目，在一种形式中，我有组合框，其值为 9-20 之间的数字和一个文本框。

all i want is whenever ComboBox is selected, then TextBox will be set to ComboBox value plus 1\. for example: If ComboBox1 is selected and the value is 11, then TextBox1.Text will be set to 12.

这是我一直在处理的代码。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e
{
    textBox1.Text = comboBox1.SelectedIndex.ToString() +1;
} 
```

代码没有问题，但我没有得到我想要的值，因为结果就像选择了值 = 11 的组合框，并且 textBox1.Text 是 21，而不是 12。

谢谢之前:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T10:25:02.247

您必须先转换`ComboBox.SelectedValue`为 int
然后加 1
然后将其转换为 String

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
   textBox1.Text = Convert.ToString(Convert.ToInt16(comboBox1.SelectedValue) + 1);
} 
```

**编辑 ：**

如果您正在开发**Windows 窗体应用程序**，请尝试以下操作：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    textBox1.Text = Convert.ToString(Convert.ToInt16(comboBox1.SelectedItem) + 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:22:03.917

`.ToString()`将选定的索引转换为`string`类型。加法运算符 ( `+`) 将整数转换`1`为字符串`"1"`，只需将数字 1 附加到您的文本中。相反，您应该将 保留`SelectedIndex`为整数，执行加法，然后转换为字符串。

尝试以下操作：

`textBox1.Text = (comboBox1.SelectedIndex + 1).ToString();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:22:29.967

您可能需要使用`SelectedValue`而不是`SelectedIndex`因为前者获取 Combo Box 项目的实际值，而后者获取 Combo Box 中项目的索引。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e
{
    textBox1.Text = ((int)comboBox1.SelectedValue + 1).ToString();
} 
```

# ssh - 无头 Raspbian 服务器诊断（在 RaspberryPi 上）

> ID：15474386
> 
> 赞同：1
> 
> 时间：2013-03-18T10:20:50.397
> 
> 标签：ssh, raspberry-pi, headless, raspbian

我拥有一个只能通过 ssh 连接的 RaspberryPi。几天前，它被不安全地关闭了电源。现在，当我打开它时，我无法访问它。它看起来像它打开但无法获得IP左右。

它是由路由器的固定 IP 提供的，当我尝试 ping 这个 IP 时，它告诉我目标主机无法访问。

有没有办法找出发生了什么，或者唯一的方法是完成重新安装操作系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:16:20.117

一种可能性是系统 rootfs 已损坏，这发生在我身上一次，因为在 raspi 上不安全断电。

如果您有另一个 sd 卡，最简单的方法是在其上安装新映像并检查它是否正确启动。如果没有，请制作当前 sd 卡的映像，格式化并重新安装。

希望您有备份，因为如果数据已损坏，无法保证恢复您的文件。

# eclipse - Perforce：使用“工作区中的版本不是最新版本”提交文件？

> ID：15474391
> 
> 赞同：2
> 
> 时间：2013-03-18T10:20:59.080
> 
> 标签：eclipse, commit, perforce

（我通过 perforce 插件从 eclipse 中使用 perforce）。

将我的工作区与 perforce 库关联后，所有文件的状态为“工作区中的版本不是最新版本”（黄色三角形）....

当文件具有此状态时，该文件的提交被禁用。

当我对项目执行“与仓库同步”时，所有这些文件都会显示冲突图标（即使没有冲突......）。

冲突？这是否意味着我需要解决？

以下是如何解决： [http ://www.perforce.com/perforce/doc.current/manuals/p4guide/05_resolve.html](http://www.perforce.com/perforce/doc.current/manuals/p4guide/05_resolve.html)

问题是......通过“解决” perforce 用仓库中的文件覆盖我工作区中的所有文件。因此，在将工作区与 perforce 关联之前，我对工作区所做的所有更改都消失了。

我真正想要实现的是相反的方式：将我工作区中的所有文件提交到仓库。即覆盖仓库。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:03:09.320

As other answers say, most of the time your best bet is to work with Perforce's workflow and check out the workspace in advance and make your changes there, rather than make changes first and create the workspace later. Sometimes, though, you really do need to break Perforce's workflow and override the changes in the depot. If you're going to do that, you need to be extra careful that you're not reverting something important. (Even on a one-person project you might have forgotten you checked something in, so look carefully at the diffs before submitting.)

The easiest thing to do is, when Perforce tells you that you have a conflict, resolve but keep your changes. In the Perforce documentation link, that's 'resolve, accept yours' rather than accepting what Perforce thinks is the sensible merge. From the command line, that's `p4 resolve -ay`. It's worded a little differently in the p4v GUI, and may be worded differently still in the Eclipse plugin (which I haven't actually worked with).

The other option, which you might use if you have files checked out from an earlier revision, and you want to update to the tip revision without making any changes, is to tell Perforce to update the metadata, so that it thinks you have a newer version of the file, without actually altering any of your files. From the command line, that's `p4 sync -k (whatever you want to sync)`. This, too, can be dangerous if used inappropriately.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:57:35.403

如果 perforce 说您无法提交，因为“工作区中的版本不是最新版本”，那么这意味着您打开了一个文件以进行编辑，该文件已被其他人更改并提交，即您正在处理旧版本的文件。您绝对不应该尝试将您的（旧）版本强加在仓库中的新版本之上。你真的需要解决。Perforce 不会“覆盖”您工作区的所有文件并放弃您的更改。

对于合并（解析），您可以使用 eclipse 内置的合并工具或 p4merge（来自 Perforce）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:05:07.583

我不认为你可以在 Perforce 中实现你想要的。您需要将已更改的文件复制到安全的地方，然后解决/还原所有文件以删除冲突/过期标志。完成后，将您的更改复制回来并提交。这很痛苦，但您应该在进行更改之前与 Perforce 建立联系。

# python - 在 python 中使用 cv.ComputeCorrespondEpilines()

> ID：15474392
> 
> 赞同：1
> 
> 时间：2013-03-18T10:20:59.133
> 
> 标签：python, opencv, computer-vision, multiple-matches

我有两张在不同视图下拍摄的同一物体的图像。我的目标是从两张图像中找到匹配的关键点。然后我想从一张图像中选择关键点并在另一张图像中绘制相应的极线。我正在使用**Python**和**OpenCV**进行实验。我已经能够从这两个图像中找到*关键点*和*数学点。*我已经能够绘制点对应关系。

但我无法`ComputeCorrespondEpilines()`在**python cv2 模块**中找到函数'' 。因为我使用的是**numpy**数组，所以我不能使用 cv 模块来使用这个函数。cv2中好像没有这个`ComputeCorrespondEpilines()`功能。

使用 numpy`cv.ComputeCorrespondEpilines()`会出现此错误：

```
 cv.ComputeCorrespondEpilines(mp_array,1, cv.fromarray(F1),cv.fromarray(liness))
TypeError: object does not have array interface 
```

（`mp_array`是一个 numpy 元组数组。）

我将`mp_array`tuple s 转换为列表。但是发生了同样的错误。

这是我的代码：

```
 import cv
import cv2
import sys
import scipy as sp
import numpy as np

img1_path = sys.argv[1]
img2_path = sys.argv[2]
img1_ = cv2.imread(img1_path, cv2.CV_LOAD_IMAGE_GRAYSCALE)
img2_ = cv2.imread(img2_path, cv2.CV_LOAD_IMAGE_GRAYSCALE)
detector = cv2.FeatureDetector_create("SIFT")
descriptor = cv2.DescriptorExtractor_create("BRIEF")
matcher = cv2.DescriptorMatcher_create("BruteForce-Hamming")

detect keypoints
kp1 = detector.detect(img1)
kp2 = detector.detect(img2)

print '#keypoints in image1: %d, image2: %d' % (len(kp1), len(kp2))

# descriptors
k1, d1 = descriptor.compute(img1, kp1)
k2, d2 = descriptor.compute(img2, kp2)

print '#descriptors in image1: %d, image2: %d' % (len(d1), len(d2))

# match the keypoints
matches = matcher.match(d1, d2)
dist = [m.distance for m in matches]

print 'distance: min: %.3f' % min(dist)
print 'distance: mean: %.3f' % (sum(dist) / len(dist))
print 'distance: max: %.3f' % max(dist)

# threshold: half the mean
thres_dist = (sum(dist) / len(dist)) * 0.5

# keep only the reasonable matches
sel_matches = [m for m in matches if m.distance < thres_dist]

print '#selected matches:', len(sel_matches)
points1=[];#1
points2=[];#1

# #####################################
# visualization
h1, w1 = img1_.shape[:2]
h2, w2 = img2_.shape[:2]
view = sp.zeros((max(h1, h2), w1 + w2, 3), sp.uint8)
view[:h1, :w1, 0] = img1_
view[:h2, w1:, 0] = img2_
view[:, :, 1] = view[:, :, 0]
view[:, :, 2] = view[:, :, 0]

for m in sel_matches:
   # draw the keypoints
   # print m.queryIdx, m.trainIdx, m.distance
   match_point.append(k1[m.queryIdx].pt)
   pt1=list(k1[m.queryIdx].pt)
   pt1=[int(ii) for ii in pt1]
   pt2=list((k2[m.trainIdx].pt[0] + w1, k2[m.trainIdx].pt[1]))
   pt2=[int(ii) for ii in pt2]
   points1.append(pt1);#1
   points2.append(pt2);#1
   color = tuple([sp.random.randint(0, 255) for _ in xrange(3)])
   cv2.line(view, tuple(pt1), tuple(pt2), color)
points1=np.asarray(points1,dtype=float);
points2=np.asarray(points2,dtype=float);
liness=[]
F1,mask=cv2.findFundamentalMat(points1,
        points2,method=cv.CV_FM_RANSAC,param1=1,param2=0.99);
print F1
#points1 = cv.fromarray(points1)
#cv.ComputeCorrespondEpilines(points1,2, F1,liness)
#cv.ComputeCorrespondEpilines(cv.fromarray(points1),
         1,cv.fromarray(F1),cv.fromarray(liness))
mp_array=np.asarray(match_point,dtype=np.int)
print type(match_point)
print type(match_point[0])
print type(mp_array)
print mp_array
cv.ComputeCorrespondEpilines(match_point,1, cv.fromarray(F1),cv.fromarray(liness)) 
```

# localization - CFBundleDisplayName 的本地化在设备上不起作用

> ID：15474394
> 
> 赞同：6
> 
> 时间：2013-03-18T10:21:01.177
> 
> 标签：localization, cocos2d-iphone, nslocalizedstring

我尝试使用 CFBundleDisplayName 对应用程序名称进行本地化。

我根据两种不同的语言制作了本地化的 InfoPlist.strings。
在一个字符串文件中写道：
CFBundleDisplayName="x11111"，在另一个文件中：
CFBundleDisplayName="y22222"

在文件 info.plist 中，我添加了“应用程序需要 iPhone 环境”属性，并将布尔值设置为 YES。在 info.plist 中，“捆绑显示名称”我使用了“x11111”。

本地化在模拟器上运行良好，但在设备上测试时，它不起作用。在设备上，我在 info.plist 中用于“捆绑显示名称”的名称只能显示。

顺便说一句，我在项目中使用 cocos2d。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T08:26:36.413

如果您的本地化文件已提供给您，并且您需要添加它们，请确保在每个文件的基础上正确添加它们。在 Xcode 中，当您添加文件时，请注意添加它们的方式。这就是它们在 Xcode Project Navigator 中的外观。

我通过选择所有未将它们正确添加到项目的文件夹来添加它们。

![在此处输入图像描述](../Images/a3cae5e589f39485ebeacf2bd3a02088.png)

# php - 如何使用 mysql_query 检查数据库中最后 30 行的最后 1 个活动

> ID：15474396
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:21:16.897
> 
> 标签：php, mysql

我正在处理用户活动，所以在这种情况下，我需要检查最后 30 行中用户的最后一个活动。

我尝试使用它，但这将查看所有表格行，但由于我只需要检查最后 30 行，因此我需要帮助。

```
$CheckQuery = mysql_query("SELECT * FROM activities WHERE got_id='$user->id' ORDER BY `id` DESC LIMIT 0 , 1");

while($row = mysql_fetch_assoc($CheckQuery))
{
    // some function
} 
```

这就是我想知道的:)

```
select *
from (select *
      from activities
      order by `id` desc
      limit 30) t
where got_id = '$user->id'
limit 1 
```

**正如我所说**：我需要检查最后 30 行中用户的最后一个活动（不是活动）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:22:51.223

```
SELECT * FROM activities WHERE got_id='$user->id' ORDER BY `id` DESC LIMIT  30" 
```

请参阅此处以限制您的查询：[http ://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T10:23:26.647

这是正确的方法，您只能`limit 30`使用

```
SELECT * FROM activities WHERE got_id='$user->id' ORDER BY `id` DESC LIMIT 30 
```

**更新**：

如果您希望用户的最后一个活动在最后 30 个活动中，则必须首先选择最后 30 个活动并从中选择用户的最后一个活动

```
select *
from (select *
      from activities
      order by `id` desc
      limit 30) t
where got_id = '$user->id'
limit 1 
```

但如果用户最近不活跃，这可能会给出一个空的结果集。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T10:23:56.377

只需按降序计数选择最后 30 行。查看此查询：-

```
"Select * from activities WHERE got_id='$user->id' ORDER BY `id` DESC limit  30" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T10:22:38.253

试试这个，

```
$CheckQuery = mysql_query("SELECT * FROM activities WHERE got_id='$user->id' ORDER BY `id` DESC LIMIT 30"); 
```

# php - Jquery Ajax PHP Json在centos服务器上不起作用

> ID：15474402
> 
> 赞同：0
> 
> 时间：2013-03-18T10:21:27.800
> 
> 标签：php, ajax, json, jquery, centos

我一直在本地 mamp 服务器上开发我的网站，今天将其转移到运行 centos 6 的 linux 服务器上。除了 ajax 请求外，一切正常。ajax 请求正常工作，我得到 200 结果，但是 on success 事件不会触发。

我正在返回一个 json 编码的数组，因此我可以在 js 中使用返回的结果，但是当我将 dataType 声明为 Json 时，事情似乎停止工作。

这是我的代码：Jquery Ajax：

```
$.ajax({
    url:'/GetTarget.php?vId='+jsArray["vuforiaID"],
    type:"GET",
    dataType:"json",
    success: function (response1) {
                //alert(response1["status"]);
                      var msg = '<img src="/img/ajax-loader-small-blue.gif" /> Processing';
                      for (var i=0; i<parseInt(response1["rating"]); i++) {
                        msg = msg+'<span class="ui-icon ui-icon-star white"></span>';
                      }
    }
}); 
```

PHP：

```
$json = curl_exec($ch2);

$jsonResponse2= json_decode($json) ;

$returnData['status'] = $jsonResponse2->status;
$returnData['rating'] = $jsonResponse2->target_record->tracking_rating;
echo json_encode($returnData); 
```

我在 PHP 上安装并运行了 Json。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-26T06:54:38.180

你可以试试这个：

```
yum install js-jquery 
```

# c# - 设置超时异步 Web 服务调用？

> ID：15474403
> 
> 赞同：2
> 
> 时间：2013-03-18T10:21:27.897
> 
> 标签：c#, web-services, asynchronous

我的 Web 服务继承自`System.Web.Services.Protocols.SoapHttpClientProtocol`.

我试图设置超时：

```
service.Timeout = 5000; // 5 secs 
```

但什么也没有发生——既不是 TimeoutException 也不是其他任何事情。一旦我在没有任何声明的情况下尝试它，它需要 190 秒才能获得`"Connection Timed Out"`. 我想 190 很奇怪，默认值为 100 秒。

无论如何，超时属性似乎只适用于“仅”同步调用，所以在我的情况下，我不知道为什么它不起作用。

我像这样调用异步方法：

```
service.GetInfoCompleted += service_GetInfoCompleted;
service.GetInfoAsync(); 
```

我该如何解决我的问题？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:07:54.970

由于没有“本机”这样做 - 我必须实现自己的[Timer](https://msdn.microsoft.com/en-us/library/system.timers.timer.aspx "定时器")。

经过时间为 10 秒后，我可以调用异步方法调用的 Abort()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:36:48.747

您的 service.GetInfoAsync() 应该返回[IAsyncResult](http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx)。您可以等待 5 秒以等待操作完成，如果没有，则处理超时：

```
var result = service.GetInfoAsync();

if(!result.AsyncWaitHandle.WaitOne(5000)){
     // handle timeout
} 
```

# node.js - 如何从降价字符串中转义特殊字符？

> ID：15474404
> 
> 赞同：0
> 
> 时间：2013-03-18T10:21:30.127
> 
> 标签：node.js, encoding, entities

我有一个降价文件（utf8），我正在将其转换为 html 文件。我当前的设置非常简单（伪代码）：

```
var file = read(site.postLocation + '/in.md', 'utf8');
var escaped = marked( file );
write('out.html', escaped); 
```

这很好用，但是我现在遇到了一个问题，即 Markdown 文件中的特殊字符（例如`é`）在浏览器中查看时会变得混乱（`Ã©`）。

我发现了几个可以转换 html 实体的 npm 模块，但是它们都转换了几乎所有可转换的字符。包括 markdown 语法所需的那些（例如 '#' 变成 '#' 和 '.' 变成 '.' 并且 markdown 解析器将失败。

我已经尝试了 libs[实体](https://npmjs.org/package/entities)和[node-iconv](https://github.com/bnoordhuis/node-iconv)。

我想这是一个非常标准的问题。我怎样才能只替换所有奇怪的字母字符而不需要所有降价符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T18:17:59.917

正如 hilarudeens 所指出的，我忘记包含元字符集 html 标记。

```
<meta charset="UTF-8" /> 
```

如果您遇到类似的问题，我建议您先检查一下。

# iphone - 仅使用 Table Views 使用 Xcode 为 iPhone 开发一个简单的课程管理系统

> ID：15474405
> 
> 赞同：0
> 
> 时间：2013-03-18T10:21:30.677
> 
> 标签：iphone, ios, xcode

我必须构建一个**课程管理**应用程序。我只为这个应用程序使用表视图。使用表视图控制器。

第一个视图包含学期 - 1,2,3,4....12。

第二个视图包含与前一个表视图控制器相关的详细信息。

第二个表视图控制器中的详细信息是：Lectures、Papers、To-do list、Record Lecture。

根据用户的选择，他可以访问特定学期的讲座、论文、列表、记录讲座。我无法弄清楚如何将数据从第三个视图传递到第四个和后续视图。例如。讲座->讲座1：简介->下载PDF。

当用户点击特定单元格时，如何分配特定的表格视图控制器？使用`seques`或`cellForRowAtIndexPath`方法？

我很困惑。请在这方面帮助我。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:23:53.217

做选择部分

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:32:03.817

您将在`didSelectRowAtIndexPath`. 在这里，您准备要呈现的视图并将其推送到您的`navigationController`. 例如：

```
// On user tap, present the details you want. 
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

        DetailViewController *detail = [[DetailViewController alloc] initWithDictionary:dict];
        [self.navigationController pushViewController:detail animated:YES];

} 
```

此外，这些是您尝试完成的一些相关链接：

-[导航控制器](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html)

-[表视图](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

# python - 在 Python 中通过 kwargs 设置全局函数的局部变量

> ID：15474406
> 
> 赞同：2
> 
> 时间：2013-03-18T10:21:34.797
> 
> 标签：python

无法在 Python 中重载函数让我开始研究`*args`并将`**kwargs`未定义数量的参数和变量定义传递给被调用函数。我试图将这个概念应用到一个简单的函数中，该函数使用分隔符将参数打印到屏幕上（并且暂时没有围绕所有内容的讨厌的“”）。您可以在该帖子的末尾找到代码片段。

我的问题是我不知道将 kwargs 的值实际分配给它们各自的参数 OUTSIDE CLASSES 的正确方法。如果我想使用`setattr`它接受 3 个参数 ( `setatt(self, key, value)`)，当然，当我尝试只传递一个键和一个值时，它总是会给我一个错误。是否有适当的方法为类外的全局函数的参数赋值？

我希望你能为我扫清天空。

这是我想通过寻找替代方法来工作的不工作代码示例`setattr(self, key, value)`：

```
import sys

def printAll(*args, **kwargs):
    sep = ""
    for key, value in kwargs.items():
        setattr(key, value)
    for arg in args:
        sys.stdout.write(str(arg))
        sys.stdout.write(sep)

nr = 9876543210
printAll("How many", "arguments", " I want", nr, sep='-') 
```

编辑：好的，这是在阅读@Martijn Pieters 和@Fabian 的答案后更新和工作的示例函数：

```
def printAll(*args, **kwargs):
    # use sep = 'value' to define a seperator or use the default one
    sep = kwargs.get('sep')
    if sep is None:
        sep = ""
    for arg in args:
        sys.stdout.write(str(arg))
        sys.stdout.write(sep) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:33:11.470

蟒蛇2：

```
def foo(*args, **kwargs):
    for key, value in kwargs.iteritems():
        locals()[key] = value
    return foobar
    exec ''

print foo(foobar=12) 
```

不过，这不是一个好主意。`kwargs`正如Martijn所说，您应该专门访问。通常，您不能`locals()`在函数中进行修改，除非您`exec`在其中放入语句。这迫使解释器`locals()`再次访问，因为命名空间可能已经改变（在这种情况下确实发生了）。`exec`将语句放在后面就足够了，`return`所以它永远不会被执行，只要它在那里。

请不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:25:13.953

您通常*不会*将`kwargs`值设置为局部变量。它是一个字典，只需引用包含的值：

```
sys.stdout.write(kwargs.get('sep', '')) 
```

# ios - iOS5 脸书整合

> ID：15474407
> 
> 赞同：0
> 
> 时间：2013-03-18T10:21:37.397
> 
> 标签：ios, xcode, facebook, facebook-ios-sdk

我正在尝试将“社交选项”集成到我的应用程序中。

我有 iOS6，但我的想法是有一个适用于 iOS5 的应用程序。使用 Twitter 框架非常简单，它可以在 r.0 版本和 6.0 版本的设备上运行。

关于 Facebook，我不明白如何整合它。我只需要“贴到墙上”功能。

我知道它存在于`social.framework`但在 iOS5 中存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:47:01.587

iOS 5 中不存在社交框架。但是 facebook 有一个非常丰富的开发者教程： [这里](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:57:20.000

If your app is targeting the iOS5+. then you need to implement Facebook Graph or Facebook SDK.

**Tutorial:**

[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

**Sample:**

[https://github.com/facebook/facebook-ios-sdk/tree/master/samples/Hackbook](https://github.com/facebook/facebook-ios-sdk/tree/master/samples/Hackbook)

I hope, Above tutorial & Sample app will help you for Facebook Integration in iOS5 devices.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-09T19:40:41.883

对于最新版本，您至少需要 Xcode 4.5。

[https://developers.facebook.com/docs/ios/ios-sdk-tutorial/](https://developers.facebook.com/docs/ios/ios-sdk-tutorial/)

# matlab - matlab gui 变得无响应或部分关闭

> ID：15474412
> 
> 赞同：0
> 
> 时间：2013-03-18T10:21:52.427
> 
> 标签：matlab, user-interface

我目前正在研究 matlab gui，在遇到一些初学者在数据处理方面的问题后，我对结果非常满意。

只有一个小问题：每当程序运行完毕，gui 变得无响应，按钮和文本元素消失，我只能看到背景。

我已经彻底扫描了所有功能；声明等，但那里什么都没有。

如何将“干净”返回到 gui，以便输入更多数据？我需要将 gui 放在一个恒定的 while 循环中吗？

最好的祝愿克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:40:01.977

您可以执行以下操作：

将控件的属性修改为可中断：

```
set(handles.figure, 'Interruptible','on'); 
```

根据按下确定的组合键创建回调函数。

```
set(KeyPressFcn, @resume_fcn); 
```

创建一个解决问题的回调函数。

```
function resume_fcn()
  if eventdata.Key = ...
    exit; 
  end
end 
```

但是，数据的一致性可能会丢失。如果您不想将“干净”返回到 gui，您可以键入：

```
delete(get(0,'Children')) 
```

# php - Symfony2 Doctrine2 - 通过教义：映射：导入从现有数据库生成多对多注释

> ID：15474421
> 
> 赞同：3
> 
> 时间：2013-03-18T10:22:19.860
> 
> 标签：php, database, symfony, orm, doctrine-orm

我想通过使用 Doctrine 工具进行逆向工程从现有数据库生成实体

您可以通过执行以下两个命令来要求 Doctrine 导入架构并构建相关的实体类。

1 美元`php app/console doctrine:mapping:import AcmeBlogBundle annotation`
2 美元`php app/console doctrine:generate:entities AcmeBlogBundle`

但现在该学说仅在多方“ProviderCountry”表中检测到 ManyToOne 关系

如果我需要添加 ManyToMany 关系，我必须通过添加以下注释手动添加注释

在 Country.php 添加

```
/**
 * 
 * @var Provider $provider
 * 
 * @ORM\ManyToMany(targetEntity="Provider")
 * @ORM\JoinTable(name="provider_country",
 *      joinColumns={@ORM\JoinColumn(name="countryId", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="providerId", referencedColumnName="id")}
 *      )
 * */
private $providers; 
```

在 Provider.php 添加

```
 /**
     * @var Country $country
     * 
     * @ORM\ManyToMany(targetEntity="Country")
     * @ORM\JoinTable(name="provider_country",
     *      joinColumns={@ORM\JoinColumn(name="providerId", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="countryId", referencedColumnName="id")}
     *      )
     * */
    private $countrys; 
```

那么如何通过学说命令 [doctrine:mapping:import] 生成多对多注释

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:30:45.087

您可以通过添加以下行来做到这一点

供应商/学说/orm/lib/Doctrine/ORM/Mapping/Driver/DatabaseDriver.php

```
 $tables = array();
    $tables[] = $schemaManager->listTableDetails("country");
    $tables[] = $schemaManager->listTableDetails("provider_country");
    $tables[] = $schemaManager->listTableDetails("provider");
    $this->setTables($schemaManager->listTables(), $tables); 
```

在 __construct 里面

```
public function __construct(AbstractSchemaManager $schemaManager) 
```

**注意：** 这将覆盖 OneToMany 注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-30T09:34:38.243

我不建议您修改供应商。您应该修改您的架构并在之后生成实体和数据库。

在你的情况下，我会在你从数据库生成模式后修改它

[Symfony2 Jobeet - 数据模型](http://www.ens.ro/2012/03/27/symfony2-jobeet-day-3-the-data-model/)

```
manyToMany:
    affiliates:
        targetEntity: Affiliate
        mappedBy: categories

manyToMany:
        categories:
            targetEntity: Category
            joinTable:
                name: category_affiliate
                joinColumns:
                    affiliate_id:
                        referencedColumnName: id
                inverseJoinColumns:
                    category_id:
                        referencedColumnName: id 
```

# c# - 替换字符串数组值

> ID：15474423
> 
> 赞同：-3
> 
> 时间：2013-03-18T10:22:21.243
> 
> 标签：c#, asp.net, c#-4.0

我的字符串结构如下。我想在第四个位置插入新值而不是旧值。如何插入它。

```
Array structure :

arr_val[0]="100";
arr_val[1]="300";
arr_val[2]="150";
arr_val[3]="360"; //I want to replace this value and insert 200 in this array
arr_val[4]="100";
arr_val[5]="300"; 
```

我不确定第四个值是否会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:25:05.010

就像您在初始化 Arrayvariable 时所做的那样，您可以设置一个新值：

```
arr_val[3] = "200"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:25:35.097

试试这个：

```
//arr_val[3]="360"; //I want to replace this value and insert 200 in this array
arr_val[3]="200"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:25:36.547

我不确定这是否是一个技巧问题，但您已经掌握了正确的语法：

```
arr_val[3]="200"; 
```

# c# - RouteData.Values["xxx"] 在 asp.net 用户控件中生成错误

> ID：15474426
> 
> 赞同：1
> 
> 时间：2013-03-18T10:22:26.973
> 
> 标签：c#, asp.net, url-routing, webforms

我正在尝试更新我的基于 asp.net webform 的网站以使用路由功能，但我无法修复 userControl.ascx 中的一个错误。

我可以使用在主页中访问查询字符串值，`RouteData.Values["language"].ToString()`但当我需要在用户控件中使用查询字符串值时同样失败。

我什至尝试使用`HttpContext.Current.Request.RequestContext.RouteData.Values["language"].ToString();`

但没有运气。

下面是我试图捕获查询字符串的代码示例

```
int LangID = 1;
int ArticleID = 0;
int PageID = 0;
int IssueID = 0;
int CategoryID = 0;
string language = string.Empty;

   if (string.IsNullOrEmpty(Request["PageID"]))
    {

        language = HttpContext.Current.Request.RequestContext.RouteData.Values["language"].ToString();
        LangID = Helper.GetLanguageID(language);
        ArticleID = int.Parse(HttpContext.Current.Request.RequestContext.RouteData.Values["aid"].ToString());
        PageID = int.Parse(HttpContext.Current.Request.RequestContext.RouteData.Values["PageID"].ToString());
        IssueID = int.Parse(HttpContext.Current.Request.RequestContext.RouteData.Values["issue"].ToString());
    }
    else
    {
        language = Request["language"];
        LangID = Helper.GetLanguageID(language);
        ArticleID = int.Parse(Request["aid"]);
        PageID = int.Parse(Request["PageID"]);
        IssueID = int.Parse(Request["issue"]);
    } 
```

我收到此声明的以下错误 `language = HttpContext.Current.Request.RequestContext.RouteData.Values["language"].ToString();`

错误信息：

```
System.NullReferenceException was caught
  Message=Object reference not set to an instance of an object.
  Source=App_Web_odw0cnkk 
```

我将不胜感激有关或如何解决此问题的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-03T09:01:03.200

使用如下：

```
HttpContext.Current.Request.RequestContext.RouteData.Values["XXXXXX"] 
```

谢谢：[https ://social.msdn.microsoft.com/Forums/tr-TR/c53d8d15-19d0-455b-b5a9-3d64d0793f99/usercontrol-iinde-routedatavaluesid?forum=aspnettr&prof=required](https://social.msdn.microsoft.com/Forums/tr-TR/c53d8d15-19d0-455b-b5a9-3d64d0793f99/usercontrol-iinde-routedatavaluesid?forum=aspnettr&prof=required)

# python - 如何在 Python 3 中将 asyncore 与多处理 IPC 模块一起使用？

> ID：15474432
> 
> 赞同：2
> 
> 时间：2013-03-18T10:22:42.777
> 
> 标签：python, sockets, event-handling, multiprocessing, asyncore

我正在尝试利用`multiprocessing`模块的客户端/服务器架构来促进我的 Python 脚本之间的通信。我希望能够在主事件循环之外实现一个单独的连接侦听器，使用`asyncore`. 我怎样才能做到这一点？

虽然没有关于如何执行此操作的外部文档，但我尝试`asyncore.dispatcher`使用以下侦听器套接字构建一个基本的`multiprocessing.Listener`：

```
import asyncore
import socket
from multiprocessing.connection import Listener, Client

class ConnectionListener(asyncore.dispatcher):
    def __init__(self, ln):
        asyncore.dispatcher.__init__(self)
        self.set_socket(ln._listener._socket)
    def handle_accepted(self, sock, addr):
        print("Accepted a client!")

if __name__ == "__main__":
    address = ('localhost', 19378)
    try:
        ln = Listener(address)
        x = ConnectionListener(ln)
        while True:
            asyncore.loop()
    except socket.error:
        c = Client(address)
        print("Client is trying to connect") 
```

虽然服务器确实循环，但它永远不会触发`handle_accepted`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T22:34:51.203

我认为您正在寻找的方法是handle_accept，而不是handle_accepted。

# ios - 在后台完成约 10 分钟后无法加载我的视图控制器

> ID：15474433
> 
> 赞同：1
> 
> 时间：2013-03-18T10:22:45.180
> 
> 标签：ios, uiviewcontroller, background, backgroundworker, background-process

`beginBackgroundTaskWithExpirationHandler`按下主页按钮后，我将我的应用程序置于后台约 10 分钟（使用）。在 10 分钟结束时，我正在设置一个本地通知以再次将我的应用程序启动到同一个视图控制器。

但是当我与本地通知交互时，我无法进入同一个视图控制器。它被称为`applicationWillEnterForeground`然后`didReceiveLocalNotification`。在`didReceiveLocalNotification`我设置我的视图控制器但没有成功。

**编辑**

代码在`didReceiveLocalNotification`

```
NF1AbcController *aBC = [[NF1AbcController alloc]init]; 
[self.navigationManager.defaultNavigationController pushViewController:aBC animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:49:49.063

you have to make sure that your aBC view controller is not nill, also check that defaultNavigationController is not nil.

the appropriate way to do such thing is send a notification of type [NSNotifcation](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/20000218-920) inside the applicationDidRevieveLocalNotification method

also you will have to register the last view controller that was visible before the app entered the background ,when your view controller receives the notification is pushes your desired view controller

more on this in [apple Notification Programming guide](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043-SW1)

# sitecore - Sitecore - 富文本编辑器 - 使用类属性创建新段落

> ID：15474434
> 
> 赞同：2
> 
> 时间：2013-03-18T10:22:46.940
> 
> 标签：sitecore, sitecore6, rich-text-editor

通过在以下位置创建一个新项目，我设法为 sitecore 富编辑器创建了一个带有样式的新段落：/sitecore/system/Settings/Html Editor Profiles/Rich Text Default/Paragraphs/

段落值为

![在此处输入图像描述](../Images/e1bc1da4ac0b88a885b1476886eac1f3.png)

问题：当我第一次选择 RTE 上的一个部分并单击此新选择时，它成功地用下面的标签包装：

```
<p class="something> paragrah...... </p> 
```

但是，当我再次选择同一段落并选择“普通”样式时，上述**内容不会**被替换为：

```
<p>paragraph..... </p> 
```

如果我们颠倒上面的也行不通。RTE似乎认为的某些原因

```
<p class="something> is same as <p>` 
```

有人可以帮助我这是否是 RTE/Sitecore 中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:00:40.810

我最近尝试了这个并得到了类似的结果，但能够解决我认为可能是您正在寻找的缺失的部分。

我在我的核心数据库中创建了一个名为 Test 的新段落测试类。然后我打开了一个 RTE 并应用了我的测试课程。之后，我看到它已经像上面一样应用了我的课程：

```
<p class="test">this is a test</p> 
```

我立即尝试对此应用“普通”类，但并没有改变结果。但是，在段落类下拉列表旁边，您会看到它旁边的下拉列表显示了该段落的应用类。如果您使用该下拉菜单，它可以让您在元素上“清除类”，从而有效地让您回到正常的 p 标签。

为了好玩，我回到核心并添加了一个名为 test2 的新类。我给了它一个名为 Test2 的新类名。现在回到我的编辑器，我首先应用了“测试”，它再次给了我：

```
 <p class="test">this is a test</p> 
```

但是当我在它上面应用'test2'时，我得到了这个：

```
<p class="test2">this is a test</p> 
```

所以我认为混淆是没有应用“新”类，它不是剥离函数，只是一个应用函数。因此，要清除课程，您必须使用左侧下拉菜单中的“清除课程”选项。

# android - Android解析json的问题

> ID：15474440
> 
> 赞同：1
> 
> 时间：2013-03-18T10:23:04.527
> 
> 标签：android, json, string, parsing, object

您好我正在尝试从我的网站解析 json。我从 te httpresponse 获得的 jsonString 工作正常，但是当我尝试在 JSONObject 中解析它时，它会给出 NPE。这是现在正在测试的 json：

```
{ "galgjejson" :
        { "Nederlands" :  
                            { "length7" : [ 
                                                { "word" : "android" }, 
                                                { "word" : "camping" },
                                                { "word" : "koekjes" }
                                            ]
                            }, 
                            { "length8" : [
                                                { "word" : "androids" },    
                                                { "word" : "campings" },
                                                { "word" : "campings" },
                                                { "word" : "campings" },
                                                { "word" : "campings" },
                                                { "word" : "campings" },
                                                { "word" : "scheppen" }
                                            ]
                            },
                            { "length9" : [
                                                { "word" : "verslapen" },
                                                { "word" : "versleten" },
                                                { "word" : "verbrande" }
                                            ]
                            },
                            { "length10" : [    
                                                { "word" : "verslapend" },
                                                { "word" : "versletend" },
                                                { "word" : "verbranden" },
                                                { "word" : "verbranden" },
                                                { "word" : "verbranden" }
                                            ]
                            },
                            { "length11" : [
                                                { "word" : "verslapende" },
                                                { "word" : "versletende" }
                                            ]
                            },
                            { "length12" : [
                                                { "word" : "verslapenden" }
                                            ]
                            }
        },
        { "English" : 
                            { "length7" : [ 
                                                { "word" : "leavers" }, 
                                                { "word" : "shoping" },
                                                { "word" : "cooking" }
                                            ]
                            },
                            { "length8" : [
                                                { "word" : "stopping" },    
                                                { "word" : "sleeping" },
                                                { "word" : "starting" },
                                                { "word" : "starting" },
                                                { "word" : "starting" },
                                                { "word" : "starting" },
                                                { "word" : "starting" }
                                        ]
                            },
                            { "length9" : [
                                                { "word" : "somewordd" },
                                                { "word" : "somewordd" },
                                                { "word" : "somewordd" }
                                            ]
                            },
                            { "length10" : [
                                                { "word" : "someworddd" },
                                                { "word" : "someworddd" }
                                            ]
                            },
                            { "length11" : [
                                                { "word" : "somewordddd" },
                                                { "word" : "somewordddd" },
                                                { "word" : "somewordddd" },
                                                { "word" : "somewordddd" },
                                                { "word" : "somewordddd" }
                                            ]
                            },
                            { "length12" : [
                                                { "word" : "someworddddd" },
                                                { "word" : "someworddddd" },
                                                { "word" : "someworddddd" }
                                            ]
                            }

        }

} 
```

我做的方法：

```
 public MikeyJSON(String jsonString) {
    Log.i("JSON", "jsonString: " + jsonString);
    try {
        JSONObject myObject = new JSONObject(jsonString);
        Log.i("JSON", "myObject_Object: " + myObject.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public String getResult(String lang, String length, int wordPos) {
    String word = "0";  

    try {
        langObject = myObject.getJSONObject(lang);
        Log.i("JSON", "Language_Object " + langObject.toString());
        lengthObject = langObject.getJSONObject(length);
        Log.i("JSON", "wordlength_Object " + lengthObject.toString());
        wordArray = lengthObject.getJSONArray(length);
        Log.i("JSON", "wordlength_Object " + wordArray.toString());
        if(wordPos>wordArray.length()) {
            wordPos = 0;
        }
        for(i=0;i<wordArray.length();i++){
            word = wordArray.getJSONObject(wordPos).toString();
        }
        Log.i("JSON", "word_Object " + word);

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return word;        
}
} 
```

我要检索的只是给定语言和长度的一个单词。这是我经过大量研究后所做的，但我只是不明白为什么它不起作用。如果我的 json 无效，请告诉我我做错了什么，因为我在 NPE 之前收到此错误：

```
03-18 09:17:40.052: W/System.err(1464): org.json.JSONException: Names must be strings,     
but {"length8":[{"word":"androids"},{"word":"campings"},{"word":"campings"},  
{"word":"campings"},{"word":"campings"},{"word":"campings"},{"word":"scheppen"}]} is of   
type org.json.JSONObject at character 514 of { "galgjejson" :
03-18 09:17:40.052: W/System.err(1464):             { "Nederlands" :  
03-18 09:17:40.052: W/System.err(1464):                                   { "length7" : [ 
03-18 09:17:40.052: W/System.err(1464):                                                     { "word" : "android" }, 
03-18 09:17:40.052: W/System.err(1464):                                                     { "word" : "camping" },
03-18 09:17:40.052: W/System.err(1464):                                                     { "word" : "koekjes" }
03-18 09:17:40.062: W/System.err(1464):                                                 ]
03-18 09:17:40.062: W/System.err(1464):                                 }, 
03-18 09:17:40.072: W/System.err(1464):                                 { "length8" : [
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "androids" },    
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "campings" },
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "campings" },
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "campings" },
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "campings" },
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "campings" },
03-18 09:17:40.072: W/System.err(1464):                                                     { "word" : "scheppen" }
03-18 09:17:40.072: W/System.err(1464):                                                 ]
03-18 09:17:40.082: W/System.err(1464):                                 },
03-18 09:17:40.092: W/System.err(1464):                                 { "length9" : [
03-18 09:17:40.092: W/System.err(1464):                                                     { "word" : "verslapen" },
03-18 09:17:40.092: W/System.err(1464):                                                     { "word" : "versleten" },
03-18 09:17:40.102: W/System.err(1464):                                                     { "word" : "verbrande" }
03-18 09:17:40.102: W/System.err(1464):                                                 ]
03-18 09:17:40.102: W/System.err(1464):                                 },
03-18 09:17:40.102: W/System.err(1464):                                  { "length10" : [   
03-18 09:17:40.102: W/System.err(1464):                                                     { "word" : "verslapend" },
03-18 09:17:40.102: W/System.err(1464):                                                     { "word" : "versletend" },
03-18 09:17:40.102: W/System.err(1464):                                                     { "word" : "verbranden" },
03-18 09:17:40.102: W/System.err(1464):                                                     { "word" : "verbranden" },
03-18 09:17:40.112: W/System.err(1464):                                                     { "word" : "verbranden" }
03-18 09:17:40.112: W/System.err(1464):                                                 ]
03-18 09:17:40.112: W/System.err(1464):                                 },
03-18 09:17:40.122: W/System.err(1464):                                 { "length11" : [
03-18 09:17:40.122: W/System.err(1464):                                                     { "word" : "verslapende" },
03-18 09:17:40.122: W/System.err(1464):                                                     { "word" : "versletende" }
03-18 09:17:40.122: W/System.err(1464):                                                 ]
03-18 09:17:40.132: W/System.err(1464):                                 },
03-18 09:17:40.132: W/System.err(1464):                                 { "length12" : [
03-18 09:17:40.132: W/System.err(1464):                                                     { "word" : "verslapenden" },
03-18 09:17:40.132: W/System.err(1464):                                                 ]
03-18 09:17:40.132: W/System.err(1464):                                 }
03-18 09:17:40.142: W/System.err(1464):             },
03-18 09:17:40.142: W/System.err(1464):             { "English" : 
03-18 09:17:40.142: W/System.err(1464):                                 { "length7" : [ 
03-18 09:17:40.152: W/System.err(1464):                                                     { "word" : "leavers" }, 
03-18 09:17:40.152: W/System.err(1464):                                                     { "word" : "shoping" },
03-18 09:17:40.152: W/System.err(1464):                                                     { "word" : "cooking" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:38:23.037

您的 JSON 无效 - 这是正确的格式：

```
{ "Nederlands" :  [
                        { "length7" : [ 
                                            { "word" : "android" }, 
                                            { "word" : "camping" },
                                            { "word" : "koekjes" }
                                        ]
                        }, 
                        { "length8" : [
                                            { "word" : "androids" },    
                                            { "word" : "campings" },
                                            { "word" : "campings" },
                                            { "word" : "campings" },
                                            { "word" : "campings" },
                                            { "word" : "campings" },
                                            { "word" : "scheppen" }
                                        ]
                        }]
} 
```

目前，“Nederlands”采用 JSONArray 格式（它包含多个 JSONObject），但您的响应缺少方括号。如果您将“Nederlands”解析为 JSONArray 并一一删除“length” JSONObjects，那么您应该能够使其工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:30:45.987

尝试如下将实体转换为字符串，然后使用 jason 对象

```
 response = httpclient.execute(httpget);

HttpEntity entity = response.getEntity();

String responseBody = EntityUtils.toString(entity);

  JSONObject obj = new JSONObject(responseBody); 
```

# http - 如何在 Zend Framework 2 http 请求中进行基本身份验证？

> ID：15474447
> 
> 赞同：2
> 
> 时间：2013-03-18T10:23:19.257
> 
> 标签：http, zend-framework2

大家早上好，

我正在尝试调用需要基本身份验证的 api。我正在尝试使用 Zend Framework 2 Zend\Http\Request，但我不确定进行基本身份验证的最佳方式是哪种，或者我是否应该手动设置标头？我试图强迫自己使用 ZF2 并停止使用 ZF1，所以请多多包涵，旧习惯很难改掉。 **ZF2**

```
$http= new Zend\Http\Request();
$http->setUri('https://api.my.tv/analytics/views/daily/');
$http->.... 
```

在**ZF1**中，我曾经做过以下非常好的和方便的操作。

```
$http = new \Zend_Http_Client();
$http->setUri('https://api.my.tv/analytics/views/daily/');
$http->setAuth($my_api_key, 'x', \Zend_Http_Client::AUTH_BASIC);
$request = $http->request(\Zend_Http_Client::POST); 
```

ZF2 中是否有类似的方法可用，或者我应该自己编写。老实说，我不知道我是否最好只使用[guzzle](http://guzzlephp.org/)。

朱哈尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:09:56.453

该方法也完全相同`Zend\Http\Client`：

```
$client  = new \Zend\Http\Client();

$client->setAuth($user, $password, \Zend\Http\Client::AUTH_BASIC);
$client->setUri('http://api.buto.tv/analytics/views/daily/');
$client->setMethod(\Zend\Http\Request::METHOD_POST);

$response = $client->send(); 
```

# gwt - GWT RequestBuilder：如何处理 pdf？

> ID：15474449
> 
> 赞同：0
> 
> 时间：2013-03-18T10:23:23.273
> 
> 标签：gwt

我在服务器上发送请求，服务器返回 StreamingOutput（写入 pdf 文件的字节） 在 onResponseRecieved 我需要处理这个文件并开始下载。如何开始下载这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:25:46.860

我想您不需要在 javascript 中处理该数据，是吗？

如果您只想下载文件或在浏览器中显示它，请在您的页面中创建一个按钮，以便当用户单击它时，它将显示在新窗口中，或者用户会要求保存文件：

```
final String url = "http://gwtquery.googlecode.com/git/README.txt";
String name = "README.txt";

Anchor link1 = new Anchor(name);
RootPanel.get().add(link1);
link1.addClickHandler(new ClickHandler() {
  public void onClick(ClickEvent event) {
    Window.open(url, "_blank", "");
  }
}); 
```

# .net - 通过nuget命令行执行powershell脚本

> ID：15474452
> 
> 赞同：4
> 
> 时间：2013-03-18T10:23:28.100
> 
> 标签：.net, nuget

我制作了一个包含原生 DLL 的原生包。该包就像[SqlServerCompact.4.0.8852.1.nupkg](https://goodfood.svn.codeplex.com/svn/packages/SqlServerCompact.4.0.8852.1/)一样。

当我通过“管理 Nuget 包 ...”通过 GUI 安装包时，一切都很好，本机 DLL 被复制到 Debug/Release 文件夹。复制本机 Dll 由类似于 SqlSerCompact 中的脚本完成。

我有以下`.bat`文件来自动化打包过程`MyProject`：

```
..\..\tools\nuget\bin\NuGet.exe install MyProject\packages.config -o packages\
..\..\tools\nuget\bin\NuGet.exe install MyProjectTest\packages.config -o packages\
..\..\tools\nuget\bin\nuget update MyProject.sln
msbuild /m /p:Configuration=Release /p:Platform="x64" MyProject.sln
..\..\tools\nuget\bin\nuget pack MyProject.nuspec 
```

上面的脚本运行完美得到`MyProject.nupkg`（编译只需要.Net dlls）。但是`nuget install`不执行依赖包中的复制脚本——所以编译`MyProjectTest`很好，但是在执行它的 EXE 时，它的 Debug/Release 文件夹中没有本机 DLL。

我的问题是为什么从命令行安装软件包时不执行 powershell 脚本？以及如何处理？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T20:57:14.423

NuGet.exe 不支持它。[在 codeplex 上](http://nuget.codeplex.com/discussions/246942)对此进行了讨论，并且在他们的问题跟踪系统中提出了一些已关闭的问题。[David Ebbo](http://blog.davidebbo.com/2011/05/thoughts-on-installing-and-updating.html)还发表了一篇关于支持此功能的问题的博客文章。

一般的问题是，在 PowerShell 脚本中，您可以使用 Visual Studio 对象模型，以便能够从 Visual Studio 外部公开它并支持所有方案，这并非易事。

我[通过使用 SharpDevelop](http://community.sharpdevelop.net/blogs/mattward/archive/2011/06/12/InstallingNuGetPackagesOutsideVisualStudio.aspx)作为实验来支持从 Visual Studio 外部运行 PowerShell 脚本，以了解可能的情况。这是一个相当重量级的解决方案，因为它需要 SharpDevelop 才能工作，而不仅仅是 NuGet.exe。

# c# - 使用 C# 列出文件夹表

> ID：15474453
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:23:29.650
> 
> 标签：c#, winforms, visual-studio-2010, listbox, directory

我想使用 Visual C# 模仿以下图像的功能：

![上传的图片](../Images/79ebcb13fbf6e8a677acb28d39196ff9.png)

我知道这不是一个`textbox`或一个`combobox`或一个`richtext`（也许）。我设法获得了添加功能，我可以在其中获得目录并且可以选择它们：

```
private void button8_Click(object sender, EventArgs e)
{
    this.folderBrowserDialog1.ShowNewFolderButton = false;
    this.folderBrowserDialog1.RootFolder = System.Environment.SpecialFolder.MyComputer;
    DialogResult result = this.folderBrowserDialog1.ShowDialog();
    if (result == DialogResult.OK)
    {
        // the code here will be executed if the user selects a folder
        string path = this.folderBrowserDialog1.SelectedPath;
    }
} 
```

我如何像在图像中一样列出它们，我应该将它写入`ini`文件还是 XML 文件，然后如果是，我如何在如图所示的框中列出它。

我还需要检测操作系统并且列表中的默认文件夹很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:55:43.527

不太确定你想要什么，但图像显示了一个带有字符串和布尔值的列表。所以你可以使用这样的东西：

```
public class DirOptions
{
    string Path = string.Empty;
    bool IncludeSubDirs = false;
} 
```

然后您可以将数据存储在 List<> 中：

```
var list = new List<DirOptions>(); 
```

检测操作系统：

请看这个问题[Get OS Version / Friendly Name in C#](https://stackoverflow.com/questions/6331826/get-os-version-friendly-name-in-c-sharp)

# mysql - Hibernate、c3p0 和 Mysql、spring

> ID：15474455
> 
> 赞同：2
> 
> 时间：2013-03-18T10:23:39.920
> 
> 标签：mysql, hibernate, spring-mvc, c3p0

堆栈溢出时存在许多相关问题，但我仍然提出这个问题，因为我仍然没有明确的解决方案和我的问题的确切原因。我希望在这里我能完全解决我的问题并为所有人提供帮助

我在我的应用程序中使用 c3p0、MySQL、hibernate(J PA) 和 spring。我在我的应用程序中使用的主要 jar 文件列表是：

```
c3p0-0.9.2.jar
mchange-commons-java-0.2.3.3.jar
hibernate-commons-annotations-3.0.0.ga.jar
hibernate-entity manager.jar
hibernate-tools.jar
hibernate-validator-4.0.2.GA.jar
hibernate3.jar
mysql-connector-java-5.1.13-bin.jar 
```

我的 persistent.XML 中的 c3p0 设置是这样的：

```
<property name="hibernate.c3p0.timeout" value="300"/>
<property name="hibernate.c3p0.max_statements" value="50"/>
<property name="hibernate.c3p0.idle_test_period" value="300"/> 
```

在这里，我读到 hibernate.c3p0.idle_test_period 不能高于 hibernate.c3p0.timeout。就我而言，两者都是平等的。

**我需要改变什么吗？我怎么解决这个问题 ？**

服务器可以正常工作几个小时（可能不完全是 8 小时）并给出以下错误。错误日志是：

```
 Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: 
    Communications link failure
    The last packet successfully received from the server was 35,019,246 milliseconds
     ago.  The last packet sent successfully to the server was 0 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at             sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at      sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
        at         com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1118)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3055)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2941)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3489)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
        at         com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
        at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2275)
        at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery
    (NewProxyPreparedStatement.java:116)
        at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
        at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
        at org.hibernate.loader.Loader.doQuery(Loader.java:674)
        at  org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
        at org.hibernate.loader.Loader.doList(Loader.java:2220)
        ... 39 more
    Caused by: java.io.EOFException: Can not read response from server.
    Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
        at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2502)
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2952)
        ... 52 more
    ... 39 more
    Caused by: java.net.SocketException: Broken pipe
        at java.net.SocketOutputStream.socketWrite0(Native Method)
        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
        at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3302)
        ... 50 more 
```

**在这里，我展示了我的 persistent.xml 的快照：-**

```
<properties>
      <property name="hibernate.connection.username" value="****"/>
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value="***************"/>
      <property name="hibernate.connection.url" value="jdbc:mysql://xxx.xxx.x.xx:3306/projectname?autoReconnect=true"/>
      <!--Connection Pooling c3p0 configuration-->
      <!--Minimum number of JDBC connections in the pool. Hibernate default: 1-->
      <property name="hibernate.c3p0.min_size" value="5"/>
      <!--Maximum number of JDBC connections in the pool. Hibernate default: 100-->
      <property name="hibernate.c3p0.max_size" value="20"/>
      <!--When an idle connection is removed from the pool (in second). Hibernate default: 0, never expire.-->
      <property name="hibernate.c3p0.timeout" value="300"/>
      <!--Number of prepared statements will be cached. Increase performance. Hibernate default: 0 , caching is disable.-->
      <property name="hibernate.c3p0.max_statements" value="50"/>
      <!--idle time in seconds before a connection is automatically validated. Hibernate default: 0-->
      <property name="hibernate.c3p0.idle_test_period" value="300"/>
    </properties> 
```

**我在我的应用程序中使用连接类的单例对象。**

```
public static void createConnection() 
{
    if (em != null) 
       {
            Connection.em.clear();
        }
        if (em == null) {
            new Connection();
        } 
```

**提前致谢。希望我能得到我的解决方案。**

**--嗡--**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:13:03.090

单例 Connection 对象是一个坏主意（至少它在任何并发的多客户端应用程序中）。它肯定与连接池不一致，其理念是在需要连接时应从池中获取连接，并在完成一个工作单元后立即返回到池中[通过调用 close()]。

现在，您的单例连接将超时，c3p0 对此无能为力。连接池在将连接签入池时对其进行管理和测试。当他们被签出时，游泳池会尽量不碍事，不干扰客户。

==> 说了这么多，目前还不清楚您的“连接”类在这里是什么。看起来它毕竟不是 java.sql.Connection，因为在 Connection 中有一个名为“em”的静态字段。所以很难解释发生了什么。

从广义上讲，您需要一个 c3p0 数据源，并根据需要获取连接并尽快关闭（）它们。

为了防止像您看到的连接超时，最好的方法是连接测试制度。最简单的方法是设置...

```
hibernate.c3p0.validate=true
hibernate.c3p0.preferredTestQuery=SELECT 1 
```

一旦你有这个工作，你可以通过使用 testConnectionOnCheckin 和 idleConnectionTestPeriod（或 hibernate.c3p0.idle_test_period）来稍微提高性能。见[http://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

让您的 idleConnectionTestPeriod (hibernate.c3p0.idle_test_period) 和 maxIdleTime (hibernate.c3p0.timeout) 相同是没有意义的。永远不会测试空闲连接；他们将在获得机会之前到期。idleConnectionTestPeriod (hibernate.c3p0.idle_test_period)，如果你设置它，应该比 maxIdleTime (hibernate.c3p0.timeout) 短得多。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:05:21.660

由于这是 Google 的第一个热门，我将分享是什么让我解决了在我们的生产服务器上出现的这个问题：http: [//drglennn.blogspot.nl/2009/05/javasqlsqlexception-communication-link.html](http://drglennn.blogspot.nl/2009/05/javasqlsqlexception-communication-link.html)

使这是一个令人讨厌的错误的原因是应用程序将通过省略以下内容来工作：

```
 <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property> 
```

在您的持久性单元配置中，但它不会使用 C3P0 连接池，因此会产生连接失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:33:38.920

```
Caused by: CommunicationsException: Communications link failure 
```

该异常意味着无法访问数据库。

由于您能够连接到数据库，我猜问题可能是

1）当时数据库服务器已关闭

2) 数据库服务器已用完连接。

在遇到此异常时，尝试使用其他工具、MySQL Workbench 或从控制台连接到数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T16:16:32.730

您应该为您配置一个数据源。不然spring an c3o0的交互有很多麻烦。

```
<bean id="dataSource_core" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${hibernate.connection.driver_class}" />
    <property name="jdbcUrl" value="${hibernate.connection.url}" />
    <property name="user" value="${hibernate.connection.username}" />
    <property name="password" value="${hibernate.connection.password}" />
    <property name="minPoolSize" value="${hibernate.connection.minPoolSize}" />
    <property name="maxPoolSize" value="${hibernate.connection.maxPoolSize}" />
    <property name="maxIdleTime" value="${hibernate.connection.maxIdleTime}" />
    <property name="maxStatements" value="${hibernate.connection.maxStmts}" />
    <property name="testConnectionOnCheckout" value="${hibernate.connection.testCo}" />
    <property name="testConnectionOnCheckin" value="${hibernate.connection.testCo}" />
    <property name="preferredTestQuery" value="${hibernate.connection.testSQL}" />
    <property name="idleConnectionTestPeriod" value="${hibernate.connection.testPeriod}" />
</bean> 
```

# c# - 分配给 X 的表达式必须是常量

> ID：15474457
> 
> 赞同：3
> 
> 时间：2013-03-18T10:23:50.477
> 
> 标签：c#, compiler-errors, constants

我遇到了这个问题并正在寻找解决方案，但没有找到类似于我的情况。这就是我所拥有的：

在类文件 X.cs 中：

```
namespace BlaBla{

  public class X{
    public const string foo = "foo";
    // other code
  }

  public class Y{
    public const int bar = 0;
  }
} 
```

在其他课程中，我正在写：

```
private const string someString = X.foo + Y.bar + ""; 
```

它不断给我一个编译错误：

`The Expression assigned to someString must be constant`

虽然它们都是不变的！当我删除 Y.bar 时，错误被删除，我不知道为什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:25:56.363

您使用的`const`关键字错误。您可能想定义`someString`为：

```
private readonly someString = X.foo + Y.bar; 
```

当一个变量被标记为`const`它们被编译到程序集中然后被优化时。虽然`Y.bar`定义为`const`，但您隐式调用了它的`ToString()`方法，这使得它不是常量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T10:25:22.430

您包括从`int`到的转换`string`。即使`int`是常量，转换也不被视为常量表达式。

您可以更简单地证明这一点：

```
class Test
{
    const int X = 10;
    const string Y = "X: " + X;
} 
```

有关什么是常量表达式的更多详细信息，请参阅 C# 规范的第 7.19 节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:25:55.063

该表达式看起来是恒定的，但它需要求值以便计算出值。

# ios - 使用 Restkit v0.20 进行 Json 映射

> ID：15474461
> 
> 赞同：0
> 
> 时间：2013-03-18T10:23:56.177
> 
> 标签：ios, xcode4.5, restkit

我能够正确发送请求，但收到回复后我得到

```
response.body ={"status":"success","loginToken":"xxxxyyyzzz"} 
```

但有一个错误说

```
 It Failed: Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "No response descriptors     
match the response loaded." UserInfo=0x2b55b0 {NSErrorFailingURLStringKey=http://192.168.1.71    
/firstyii/index.php?r=site/login, NSLocalizedFailureReason=A 200 response was loaded from the 
URL 'http://192.168.1.71/firstyii/index.php?r=site/login', which failed to match all (1) 
response descriptors:

<RKResponseDescriptor: 0x2a5860 baseURL=http://192.168.1.71 pathPattern=/firstyii
/index.php?r=site/login statusCodes=200-299> failed to match: response path '/firstyii
/index.php?r=site/login' did not match the path pattern '/firstyii/index.php?r=site/login'., 
NSLocalizedDescription=No response descriptors match the response loaded., keyPath=null, 
NSErrorFailingURLKey=http://192.168.1.71/firstyii/index.php?r=site/login, 
NSUnderlyingError=0x2b6070 "No mappable object representations were found at the key paths 
searched."} 
```

登录响应.h

```
@interface LoginResponse : NSObject

@property (nonatomic, strong) NSString *status;

@property (nonatomic, strong) NSString *loginToken;

+(RKObjectMapping*)defineLoginResponseMapping;

@end 
```

登录响应.m

```
#import "LoginResponse.h"

@implementation LoginResponse

@synthesize loginToken;

@synthesize status;

+(RKObjectMapping*)defineLoginResponseMapping   {

RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[LoginResponse class]];

[mapping addAttributeMappingsFromDictionary:@{
 @"status":   @"status",
 @"loginToken":   @"loginToken",
  }];

return mapping;

}

@end 
```

LoginManager.m 中的代码

```
-(void)LoginWithUserName:(NSString *)username password:(NSString*)password {

LoginRequest *dataObject = [[LoginRequest alloc] init];
[dataObject setUsername:username];
[dataObject setPassword:password];

   NSURL *baseURL = [NSURL URLWithString:@"http://192.168.1.71"];

AFHTTPClient * client = [AFHTTPClient clientWithBaseURL:baseURL];
  [client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

[RKMIMETypeSerialization registerClass:[RKNSJSONSerialization class] 
forMIMEType:@"application/json"];

RKObjectMapping *requestMapping =  [[LoginRequest defineLoginRequestMapping] inverseMapping];

[objectManager addRequestDescriptor: [RKRequestDescriptor   
  requestDescriptorWithMapping:requestMapping objectClass:[LoginRequest class] rootKeyPath:nil 
 ]];
// what to print
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);
RKLogConfigureByName("Restkit/Network", RKLogLevelDebug);

RKObjectMapping *responseMapping = [LoginResponse defineLoginResponseMapping];

[objectManager addResponseDescriptor:[RKResponseDescriptor 
responseDescriptorWithMapping:responseMapping pathPattern:@"/firstyii/index.php?r=site/login" 
keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]];

 [objectManager setRequestSerializationMIMEType: RKMIMETypeJSON];

  [objectManager postObject:dataObject path:@"/firstyii/index.php?r=site/login" 
parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSLog(@"It Worked: %@", [mappingResult array]);

} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"It Failed: %@", error);

}];
} 
```

我认为上面使用的代码是用数组映射响应，所以我需要代码来映射简单的json，比如这个 response.body={"status":"success","loginToken":"logingngngnnggngngae"}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:12:11.200

[此类响应将使用https://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)中提到的 pathpattern 非键值映射进行映射 。

我正在使用带有“？”的 pathPattern 在其中，因此它没有正确匹配。，路径模式也不应该在开头有“/”。如果我将 pathPattern 更改为 pathPattern:@"site/login" 并将 postObject 更改为 postObject:@"site/login" 并且当然更改了 baseurl = @" [http://json.xxxxxxx.xxxxx:8179 ，上面的代码工作正常/jsonresponse/index.php](http://json.xxxxxxx.xxxxx:8179/jsonresponse/index.php) " 以便其中没有特殊字符。

# c - 是否可以在 TCP 3 次握手中获取 SYN/ACK 数据包的 TCP 序列号？

> ID：15474466
> 
> 赞同：1
> 
> 时间：2013-03-18T10:24:03.630
> 
> 标签：c, tcp, network-programming

我有一个 tcp 客户端程序，当它通过发送 SYN 启动与远程 tcp 服务器的 3 次握手时，它将接收来自服务器的 SYN/ACK，

可以读取SYN/ACK包的序号和确认序号吗？如果是这样，怎么办？顺便说一句，我正在研究 linux c 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:34:38.180

是的，这是可能的，但它不像传统的套接字编程那样容易。这对你隐藏了握手阶段。

你应该使用[pcap 之](http://www.tcpdump.org/pcap.htm)类的东西来捕获你需要的东西。或者，[原始套接字](http://frankjennings.sys-con.com/node/34589/mobile)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:37:50.633

使用原始 TCP 套接字。在创建原始套接字时有一个 IPPROTO_TCP 协议选项。这样，数据就是嵌入在链路层标头中的所有内容，因此您将看到 IP 标头，然后是 TCP 标头，然后是接收到的每个数据包的有效负载数据。您需要从中解析序列。

参考[TCP 标头格式化程序](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T12:53:33.243

您可以使用linux 或**wireshark中的****tcpdump**找出 TCP 序列或 ACK 号。之后，只需分析数据包，您就可以弄清楚。

 **但是，要构建自己的程序来查找 TCP 序列或 ACK 号，则需要使用 C 中的**pcap**库来捕获所有数据包，然后编写代码以仅嗅探数据包中的 TCP 序列和 ACK 号。

您可以设置自己的 TCP 序列和 ACK 号，前提是您构建自己的数据包。您可以使用**Libnet**来完成，构建自己的数据包或使用**RAW 套接字**。

如果您不熟悉**pcap**库，那么您可以编写一个简单的 bash 脚本，将所有数据包捕获的数据重定向到一个文件中，然后使用 AWK / SED 过滤技术找出 TCP 序列和 ACK 号。**

# c++ - 如何将 C++ 中的十六进制值转换为正确的字符串？

> ID：15474467
> 
> 赞同：1
> 
> 时间：2013-03-18T10:24:05.057
> 
> 标签：c++, database, hex

我仍在研究电影数据库，我想向用户展示他对文件的输入。

但是，当我使用`cout << lisafilm <<`它时，它会为我提供十六进制值。因此，我需要将十六进制转换为字符串。

麻烦的片段。

```
void sisend() 
{ 
     string nimi; 
     int aasta; 
     long int hinne; 
     string vaadatud; 
     ofstream lisafilm("andmebaas.txt", ios::app); 
     cout <<"Sisestage filmi nimi." << endl; 
     cin >> nimi;

     cout << "Sisestage filmi aasta." << endl; 
     cin >> aasta;     

     cout << "Sisestage filmi hinne." << endl; 
     cin >> hinne; 

     cout << "Kas olete filmi juba vaadanud?" << endl;  
     cout << "Vastake 'Jah' voi 'Ei'" << endl; 
     cin >> vaadatud; 

lisafilm<< nimi << "  " << aasta << "  " << hinne<< "  " << vaadatud << endl; 
lisafilm.close();    

{  
 system("CLS"); 
 int hex_str = lisafilm ;

 cout << "Aitah kasutamast andmebaasi." << endl; 
 system("pause"); 
 cin.get (); 
} 
 main(); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:30:43.517

> 当我使用`cout << lisafilm`它时，它为我提供了十六进制值

这是因为您正在尝试输出`ofstream`. 当这种情况发生时，[`operator void*`](http://www.cplusplus.com/reference/ios/ios/operator_bool/)被调用，产生一个与你的流相关的任意十六进制序列，但最终是非常无用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:31:40.507

试试这个：

```
std::stringstream ss;
ss << std::hex << lisafilm;
const std::string s = ss.str(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:33:48.633

lisafilm 是一个*流*，而不是一个*字符串*

如果你想复制 lisafilm 来 cout 类似`cout << lisafilm.rdbuf();`的东西（假设 lisafilm 是 ostream 或 istream 并且 lisafilm 的位置是文件的开头。

您的代码格式很差，我认为您发布的内容不会编译。如果您清理它，stackoverflow 可能会为您提供更多帮助。

# iphone - 开发者可以在邮件应用中访问未读邮件吗？

> ID：15474470
> 
> 赞同：0
> 
> 时间：2013-03-18T10:24:14.927
> 
> 标签：iphone, ios, objective-c, email

我想在我的应用程序中显示最近未读消息的列表，并且想知道是否可以在不花费所有时间使我的应用程序与电子邮件服务一起使用的情况下做到这一点？或者是否有一个开源库可以解决这个问题并使其变得容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:27:37.750

可以想象，访问用户的电子邮件是一个重大的安全漏洞，当然是不允许的。

您必须使用自己的电子邮件客户端实现并要求用户提供他的帐户凭据。

一个开源的 iOS 电子邮件客户端项目[位于此处](http://code.google.com/p/remail-iphone/)

# c# - Linq 用于不同地址的总和

> ID：15474475
> 
> 赞同：0
> 
> 时间：2013-03-18T10:24:23.277
> 
> 标签：c#, linq, linq-to-dataset

我有一个`DataTable`产品。每个产品都有重量和退货地址。返回地址由 7 个字段组成。

我需要遍历不同的地址并总结产品的总重量。

示例表如下所示...

```
Product weight  address1    address2    address3            city            state               postcode    country
A123    6       House       1st Street  some place          a city          a state             AB1 2CD     GB
A456    3       House       1st Street  some place          a city          a state             AB1 2CD     GB
A789    4       House       1st Street  some place          a city          a state             AB1 2CD     GB
A123    6       House2      2st Street  another place       another city    another state       EF2 3GH     GB
A456    3       House2      2st Street  another place       another city    another state       EF2 3GH     GB
A789    4       House2      2st Street  another place       another city    another state       EF2 3GH     GB 
```

我将有 2 个地址返回 13 的权重。

我只需要按地址字段（而不是产品）分组并按地址求和权重。我还需要返回国家以及总重量。

这可能使用linq吗？或者我会更好地使用 a`SqlDataAdaptor`吗`DataTable`？我知道如何处理，`SqlDataAdaptor`但我不知道如何处理 Linq，我猜 linq 会更好地处理开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:30:16.747

这`GroupBy()`会将所有产品分组到每个不同地址的子集合中。然后`Select()`将每个子集合的权重相加以提供总权重。

```
var totals = products
        .GroupBy(p => new 
        { 
            address1 = p.Field<string>("address1"),
            address2 = p.Field<string>("address2"),
            address3 = p.Field<string>("address3"),
            city = p.Field<string>("city"),
            state = p.Field<string>("state"),
            postcode = p.Field<string>("postcode"),
            country = p.Field<string>("country")
        })
        .Select(g => new 
        {
             Total = g.Sum(p => p.Field<int>("weight"),
             Country = g.Key.country
        }); 
```

示例使用：

```
foreach (var address in totals)
{
    Console.WriteLine(string.Format("Country: {0}, Weight: {1}", address.Country, address.Total));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:29:34.067

按所有地址字段对表行进行分组，并计算每个组的总和：

```
var query = 
    from p in table.AsEnumerable()
    group p by new {
         Address1 = p.Field<string>("address1"),
         Address2 = p.Field<string>("address2"),
         Address3 = p.Field<string>("address3"),
         City = p.Field<string>("city"),
         State = p.Field<string>("state"),
         Postcode = p.Field<string>("postcode"),
         Country = p.Field<string>("country")
    } into g
    select new { 
        Address = g.Key, 
        TotalWeight = g.Sum(x => x.Field<int>("weight"))
    }; 
```

这将为您提供一系列匿名对象，这些对象将在 Address 属性中具有所有地址字段，在 TotalWeight 属性中具有权重总和。

# logging - 如何配置码头将日志放入外部文件

> ID：15474476
> 
> 赞同：8
> 
> 时间：2013-03-18T10:24:25.207
> 
> 标签：logging, jetty

如何配置码头将其日志放入外部文件？

[手册说](http://www.eclipse.org/jetty/documentation/current/configuring-logging.html#configuring-jetty-logging)我必须将 slf4j 放入 lib 目录。

我所做的是：

*   下载 slf4j 并将 slf4j-log4j12-1.7.3.jar 放入 $JETTY_HOME$/lib 。
*   下载 log4j 并将 log4j-1.2.17.jar 放入 $JETTY_HOME$/lib
*   创建一个 log4j 配置文件。它可以从下面获得：

* * *

```
<appender name="fileAppender" class="org.apache.log4j.RollingFileAppender">
  <param name="Threshold" value="DEBUG" />    
  <param name="File" value="c:/app/jetty/logs/server.log" />
  <layout class="org.apache.log4j.PatternLayout">   <param name="ConversionPattern" value="%d  %-5p  [%c{1}] %m %n" />
  </layout>
</appender>
<root>
  <priority value="debug" />
  <appender-ref ref="fileAppender" />
</root> 
```

*   注释行

    `"#org.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.StdErrLog"`在`$JETTY_HOME$/resources/jetty-logging.properties`

尽管我完成了上述所有操作，但我无法在目标目的地中看到任何日志。所有日志条目仍可从控制台获得

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T12:50:56.170

# 更新说明（2016 年 6 月）

对于 Jetty 9+，您将使用拆分`${jetty.home}`和`${jetty.base}`目录。

> 注意：请勿编辑/修改/删除/添加/删除`${jetty.home}`. 从现在开始，您的所有配置都将驻留在其中`${jetty.base}`。

作为命令行的说明：

```
$ mkdir /path/to/mybase
$ cd /path/to/mybase

# Prepare a basic jetty.base directory
$ java -jar /path/to/jetty-dist/start.jar --add-to-start=http,deploy,resources,ext
INFO: ext             initialised in ${jetty.base}/start.ini
INFO: resources       initialised in ${jetty.base}/start.ini
INFO: server          initialised (transitively) in ${jetty.base}/start.ini
INFO: http            initialised in ${jetty.base}/start.ini
INFO: deploy          initialised in ${jetty.base}/start.ini
MKDIR: ${jetty.base}/lib
MKDIR: ${jetty.base}/lib/ext
MKDIR: ${jetty.base}/resources
MKDIR: ${jetty.base}/webapps
INFO: Base directory was modified

# Download the required jar files
$ cd /path/to/mybase/lib/ext
$ curl -O http://central.maven.org/maven2/org/slf4j/slf4j-api/1.7.21/slf4j-api-1.7.21.jar
$ curl -O http://central.maven.org/maven2/org/slf4j/slf4j-log4j12/1.7.21/slf4j-log4j12-1.7.21.jar
$ curl -O http://central.maven.org/maven2/log4j/log4j/1.2.17/log4j-1.2.17.jar

# Prepare the Jetty side logging to use slf4j
$ cd /path/to/mybase/resources
$ echo "org.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.Slf4jLog" > jetty-logging.properties

# Grab a copy of a log4j.xml to initialize things
$ cd /path/to/mybase/resources
$ curl -o log4j.xml https://gist.githubusercontent.com/joakime/13e31db59b83079be3fdc1a877de7060/raw/5c275a2a2f29445d6cdde7fcae3820da99e7234b/log4j.xml

# Start Jetty
$ cd /path/to/mybase
$ java -jar /path/to/jetty-dist/start.jar 
```

> 注意：不要启用该`logging`模块，因为这严格用于 Jetty 的`StdErrLog`实现。该`logging`模块将捕获任何内容`System.err`并将`System.out`其重定向到滚动日志文件。此捕获和重定向将与您的 log4j 直接冲突`ConsoleAppender`！

# 原始说明 - 仅适用于 Jetty 8（现在 EOL）及更早版本

跟着这些步骤：

1.  在中创建一个日志目录`$JETTY_HOME/lib`：（`$JETTY_HOME/lib/logging`这只是最佳实践）
2.  放`log4j`,`slf4j-log4j`并`slf4j-api`在该目录中：例如：`log4j-1.2.16.jar` `slf4j-api-1.6.1.jar` `slf4j-log4j12-1.6.1.jar`
3.  `logging`通过在您的行中添加“”，确保在码头的类路径中拥有该新目录`$JETTY_HOME/start.ini` `OPTIONS`：例如：`OPTIONS=Server,websocket,resources,ext,jsp,jdbc,logging`
4.  把你`log4j.properties`的`$JETTY_HOME/resources`目录
5.  启动码头

如果您的 log4j.properties 设置正确，这应该适合您。我会注意在文档中提供这样的分步指南。

# css - 与文件不在同一文件夹中的文件的 css 路径

> ID：15474478
> 
> 赞同：0
> 
> 时间：2013-03-18T10:24:34.300
> 
> 标签：css

我有以下文件夹**projectCss**，其中有文件夹**languageReference**，* *css* * 和**js** 。在**css**文件夹中，我有文件**style.css**。

在**languageReference 中**，我有三个文件夹，即**iframes**、* *docs* * 和**cssFiles 。**在 iframes 文件夹中，我有文件夹**codeSamples**和**htmlFiles 。**在 htmlFiles 文件夹中，我有一个名为**index.html**的 html 文件。

我的项目设置在视觉上看起来像这样。

```
projectCss

  *css  - style.css
  *langugeReference
           *docs
           *cssFiles
           *iframes
               *codeSamples
               *htmlFiles
                     *index.html 
```

我试图弄清楚我的路径会是什么样子，但没有任何效果。我可以在不导致在 Web 服务器上提供页面的情况下获取路径吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:29:55.897

正如[查理](https://stackoverflow.com/questions/15474478/css-path-for-a-file-not-in-the-same-folder-as-the-file#comment-21900633)在评论中所说，您需要“向上”三个文件夹（`../../../`）然后选择文件夹和文件，如下所示：

```
<link href="../../../css/style.css" ... /> 
```

或者，您可以从“根”开始，假设您的布局是根，以下也可以：

```
<link href="/css/style.css" ... /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:30:30.033

使用相对路径：

```
<link rel="stylesheet" type="text/css" href="../../../css/style.css"> 
```

# java - 无法完成 Java 字符串到 JSON 的转换

> ID：15474485
> 
> 赞同：3
> 
> 时间：2013-03-18T10:25:00.747
> 
> 标签：java, android, json

我有从服务器获取的 JSON：

```
 "[{\"id\":\"1\",\"name\":\"Milos\",\"city\":\"Smederevo\",\"email\":\"milos\",\"password\":\"\"},
 {\"id\":\"3\",\"name\":\"Boban\",\"city\":\"Beograd\",\"email\":\"bole\",\"password\":\"\"},
 {\"id\":\"4\",\"name\":\"Pele\",\"city\":\"Brazil\",\"email\":\"pele@pele.com\",\"password\":\"\"},
 {\"id\":\"5\",\"name\":\"admin\",\"city\":\"Smederevo\",\"email\":\"admin\",\"password\":\"\"}]" 
```

我正在使用该 json 并发送到我的线程（android 线程）：

```
 try {
            // Method from which I am getting Json described above
            String s = dm.getAllUsers();

            /*JSONParser jp = new JSONParser();             
            JsonElement jelement = new JsonParser().parse(s);   
                JsonArray array1 = jelement.getAsJsonArray();*/

            JSONArray array = new JSONArray(s);
            for (int i = 0; i < array.length(); i++) {

                 JSONObject menuObject = array.getJSONObject(i);

                 // doing something with the object
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

我根本无法处理那个 Json。我收到错误“java.lang.String 无法转换为 JSONArray”。A知道问题是由“\”引起的，我只是不知道如何摆脱“\”。

我试过：

```
1) s.replace("\\", "");
2) s.replace("\"", "'");
3) s.replaceAll("\\", "");
4) s.replaceAll("\"", "'"); 
```

为了擦除“\”但替换根本不反应。我还尝试使用“google-gson-2.2.2”库解决问题（上面评论下的代码，方法下）。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:26:37.330

试试这个解决方案。

```
s.replaceAll("\\\\", ""); 
```

这肯定会奏效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T12:17:23.917

问题已通过以下方式解决：

```
 1) s = s.trim();
 2) s = s.substring(1, s.length()-1);
 3) s = s.replace("\\", ""); 
```

我的 json 在开头和结尾都用“双引号”检索。我不知道字符串变量如何无法弄清楚“双引号”是用于字符串的“开始”和“结束”。

谢谢大家的帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-15T12:19:48.630

它对我有用...

在您的 json 中，“Your Json”的值包含在“”中，因此它被视为字符串而不是数组。

所以解决方案是两件事之一：

如果您可以修改服务器响应，请从 json 数组中删除“”。或首先将其解析为字符串，然后从该字符串创建一个 json 数组，例如..

```
String notes = jobj.getString("GetNotesResult");
jarray = new JSONArray(notes); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T11:07:17.120

我不知道为什么它不适合你。点网 Web 服务确实响应，`\`但 Java 能够解析它。我做了如下，它的工作。

我是这样编码的。

```
JSONArray users = null;
String jsStr =  "[{\"id\":\"1\",\"name\":\"Milos\",\"city\":\"Smederevo\",\"email\":\"milos\",\"password\":\"\"},{\"id\":\"3\",\"name\":\"Boban\",\"city\":\"Beograd\",\"email\":\"bole\",\"password\":\"\"},{\"id\":\"4\",\"name\":\"Pele\",\"city\":\"Brazil\",\"email\":\"pele@pele.com\",\"password\":\"\"}, {\"id\":\"5\",\"name\":\"admin\",\"city\":\"Smederevo\",\"email\":\"admin\",\"password\":\"\"}]";
try {
    users = new JSONArray(jsStr);
} catch (JSONException e) {
    e.printStackTrace();
}

Log.v("JSONStr", String.valueOf(users.length()));
for(int i = 0; i<users.length(); i++){
    try {
        Log.v("Name", users.getJSONObject(i).getString("name"));
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

见`LogCat`

```
03-18 16:34:46.459: V/JSONStr(307): 4
03-18 16:34:46.479: V/Name(307): Milos
03-18 16:34:46.479: V/Name(307): Boban
03-18 16:34:46.479: V/Name(307): Pele
03-18 16:34:46.479: V/Name(307): admin 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T11:44:27.087

仅当您删除中间的反斜杠 () 时，您的 json 才有效。您可以使用类似： `strJson = strJson.replaceAll("\\\\", "");`或`strJson = strJson.replace("\\", "");`删除 json 字符串之间的斜杠 ()。请注意，replaceAll() 方法将第一个参数视为正则表达式，因此您必须对反斜杠进行双重转义，但 replace() 方法将其视为文字字符串，因此您只需将其转义一次。请查看以下示例以更好地理解： 我已将您的 json 文本保存在我的硬盘驱动器中名为 json.txt 的文件中以进行演示。文件中的内容如下所示：

```
[{\"id\":\"1\",\"name\":\"Milos\",\"city\":\"Smederevo\",\"email\":\"milos\",\"password\":\"\"},
 {\"id\":\"3\",\"name\":\"Boban\",\"city\":\"Beograd\",\"email\":\"bole\",\"password\":\"\"},
 {\"id\":\"4\",\"name\":\"Pele\",\"city\":\"Brazil\",\"email\":\"pele@pele.com\",\"password\":\"\"},
 {\"id\":\"5\",\"name\":\"admin\",\"city\":\"Smederevo\",\"email\":\"admin\",\"password\":\"\"}] 
```

现在获取json数组的代码：

```
package com.stackoverflow.com;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class JsonTest {

    public static void main(String[] args) {    

        try {
            FileReader fileReader = new FileReader("C:/Users/sarath_sivan/Desktop/json.txt");
            BufferedReader br = new BufferedReader(fileReader); 
            StringBuilder strJsonBuilder = new StringBuilder();
            String strLine; 

            while((strLine = br.readLine()) != null) { 
                strJsonBuilder.append(strLine);
            }

            String strJson = strJsonBuilder.toString();
            strJson = strJson.replaceAll("\\\\", ""); /*OR you can use strJson = strJson.replace("\\", "");*/
            JSONArray jsonArray = new JSONArray(strJson);

            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject menuObject = jsonArray.getJSONObject(i);
                System.out.println("id: " + menuObject.getInt("id"));
                System.out.println("name: " + menuObject.getString("name"));
                System.out.println("city: " + menuObject.getString("city"));
                System.out.println("email: " + menuObject.getString("email"));
                System.out.println("password: " + menuObject.getString("password"));
                System.out.println();
                // do something with your JSON
            }

            fileReader.close();

        } catch (JSONException e) {
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T10:27:41.633

```
s = s.replace("\\", "");
System.out.println(s); 
```

您需要将修改后的`String`回分配给`s`. 这给出了一个正确的可解析 JSON。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T10:41:28.997

我不太喜欢各种 String.replaceAll(rexex, "") 解决方案。如果 JSON 中的某些字符串包含 \ 作为信息的一部分而不是格式，该怎么办？我在您的 JSON 中看到一个“密码”字段。我不知道这是明文还是散列，但在前者的情况下，如果用户在密码中使用反斜杠，您的程序可能会中断。

你想要在这里做的是对字符串进行转义。据我所知，这是一个简单的正则表达式无法解决的问题，但这是一个已经解决了数千次的问题。无需重新发明轮子。

[如何在java中对字符串文字进行转义](https://stackoverflow.com/questions/3537706/howto-unescape-a-java-string-literal-in-java)

# php - php删除论坛中除最后引用的回复之外的所有回复

> ID：15474489
> 
> 赞同：6
> 
> 时间：2013-03-18T10:25:07.860
> 
> 标签：php, forum, reply

我正在创建自己的论坛并坚持从回复中删除多个引用的文本。我将尝试通过示例来解释这一点。

假设我们收到了第一条带有文本*Hello A 的*消息。

然后有人引用这个，我们得到：`[q]Hello A[/q] Hello you too`在数据库中。

如果第三人引用第二个回复，它会变得更丑陋，并且会像：`[q] [q]Hello A[/q] Hello you too[/q] Hello both`.

我想要做的是从引用的文本中删除除最后引用的回复之外的所有回复。所以在这种情况下，我想在第三个回复中去掉`[q]Hello A[/q]`第三个引号。

**如何让它在无限的 [q] 上工作？**

编辑：如何在第一个主 [q] 中替换多个 [q]something[/q]？->`[q] [q]A[/q] B[/q] -> becomes -> [q]B[/q]`或`[q][q][q]A[/q]B[/q]C[/q] -> becomes -> [q]C[/q]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:13:58.817

如果我理解正确，那么您可能想要这样的东西：

```
$firstTag = strpos($content, "[q]");
$lastTag = strrpos($content, "[/q]", 0);

$secondTag = strpos($content, "[q]", $firstTag + strlen("[q]"));
$secondLastTag = strrpos(substr($content, 0, $lastTag), "[/q]");

$content = substr_replace($content, "", $secondTag, $secondLastTag - $secondTag + strlen("[q]") + 1); 
```

对任何错误表示歉意，我没有方便测试的 PHP 解释器，而且我使用它已经有大约 9 个月了，所以我有点生疏了。

实际上，我们尝试做的是首先找到第一个开始标签的位置，然后找到最后一个结束标签的位置。一旦我们有了这些位置，我们就可以将它们用作偏移量来开始我们的搜索，以找到第二个开始标签和倒数第二个结束标签。一旦我们知道了它们的位置，我们就使用 substr_replace 将内容字符串中的所有文本替换为从第二个开始标记到倒数第二个结束标记的空白字符串。

为了说明，如果我们有：

[q][q]内3[q]内2[/q]内1[/q]外[/q]

我们找到第二个 [q] 标记，倒数第二个 [/q] 标记，并将它们以及它们之间的所有内容替换为空白字符串并得到：

[q]外[/q]

这是你要找的吗？

# android - Android：如何检查网络上图像的修改状态

> ID：15474491
> 
> 赞同：0
> 
> 时间：2013-03-18T10:25:14.677
> 
> 标签：android, image, performance

我正在 Android 中开发图像管理器。它总是会检查服务器中的图像以绘制...

我使用磁盘缓存来缓存 SDCARD 中的图像，我必须循环刷新它们几分钟..

但是，如果总是更新未更改的文件，则性能不佳。

如何检查图像的更改状态？我只想获取更改的文件...可以获取图像的哈希码吗？或校验和代码？

我想了一个解决方案：在服务器上创建一个 XML 文件，它存储所有哈希和列表......但是，这是不可能的......所以，图像存储在许多站点中......

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:45:23.623

一个简单的解决方案：

*   每次更新/修改时为每个图像附加时间戳。

*   在每个刷新周期，只获取图像的时间戳，并与设备上的图像时间戳进行比较。

*   仅下载时间戳大于相应缓存图像的时间戳的图像。

这样，您将仅在每个周期中下载文本数据（非常小），并且仅在必要时才进行图像下载。

您还可以连接后端服务器以响应 REST API 并仅返回更新的图像。决定是在客户端还是服务器端处理计算和逻辑需要考虑所涉及的权衡，并且很大程度上取决于您的应用程序的特定要求。

# c# - 在 asp.net 中比较日期和今天

> ID：15474497
> 
> 赞同：1
> 
> 时间：2013-03-18T10:25:40.293
> 
> 标签：c#, asp.net, validation, datetime

我有一个`textbox`从用户那里获取输入日期的。现在我想做一个`validator`检查日期是否大于今天。

我试过这个链接，但它有一些问题[http://forums.asp.net/t/1116715.aspx/1](http://forums.asp.net/t/1116715.aspx/1)

如果我给出这个日期**`25/03/2013`**是正确的，但如果给出**`01/04/2013`**，它说它比今天少。

**

**更新**

```
<asp:CompareValidator ID="CompareValidator2" runat="server" ControlToValidate="txtReturnDate"
                                Display="Dynamic" ErrorMessage="Date should be greater then  today" ForeColor="Red"
                                Operator="GreaterThan" ValidationGroup="VI">Date should be greater then  today</asp:CompareValidator> 
```

**

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:40:13.973

使用下面的代码将指定日期与今天的日期进行比较

```
string date = "01/04/2013";
                DateTime myDate = DateTime.ParseExact(date, "dd/MM/yyyy",
                                           System.Globalization.CultureInfo.InvariantCulture);
                if (myDate > DateTime.Today)
                {
                    Console.WriteLine("greater than");
                }
               else
                {
                 Console.WriteLine("Less Than");
                } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:51:35.300

好的，我已经做到了

```
CompareValidator1.ValueToCompare = DateTime.Today.ToString("MM/dd/yyyy"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:29:24.080

问题是`25/3/2013`明确`25th March 2013`的，但是如果文化设置错误，`01/04/13`可能`4th january 2013`确实在今天之前。我假设您认为您正在进入`1st April 2013`之后。

解决方案是其中之一

*   在文本框中输入时使用明确的日期格式（`2013-01-04`4 月 1 日）
*   使用显示实际日期的日期选择器组件
*   以您期望的方式解析日期 ( `dd/MM/yyyy`)

问题`asp:CompareValidator`在于它似乎不理解日期可以采用不同的格式，并且只使用 a 的`ToShortDateString`变体`DateTime`进行比较（无论谁实现了这个都应该被枪杀！）。根据[这个问题](https://stackoverflow.com/questions/9372901/asp-net-compare-validator-to-validate-date)的解决方案似乎是使用`CustomValidator`

```
protected void DateTimeComparision_ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = DateTime.ParseExact(txtDate.Text,"dd/MM/yyyy") > DateTime.Today 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:28:34.400

它认为 2013 年 1 月 4 日是 1 月 4 日。您应该使用新的 DateTime(Year, Month, Day) 构造函数创建一个 DateTime 对象，并且比较将正常工作，即

```
var compareDate = new DateTime(2013,4,1)
bool afterToday = DateTime.Today < compareDate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:32:58.743

这种日期验证应该在客户端进行。在我的应用程序中，我们使用了以下代码

```
convert: function (d) {
        /* Converts the date in d to a date-object. The input can be:
        a date object: returned without modification
        an array      : Interpreted as [year,month,day]. NOTE: month is 0-11.
        a number     : Interpreted as number of milliseconds
        since 1 Jan 1970 (a timestamp) 
        a string     : Any format supported by the javascript engine, like
        "YYYY/MM/DD", "MM/DD/YYYY", "Jan 31 2009" etc.
        an object     : Interpreted as an object with year, month and date
        attributes.  **NOTE** month is 0-11\. */
        return (
        d.constructor === Date ? d :
        d.constructor === Array ? new Date(d[0], d[1], d[2]) :
        d.constructor === Number ? new Date(d) :
        d.constructor === String ? new Date(d) :
        typeof d === "object" ? new Date(d.year, d.month, d.date) :
        NaN
    );

 isFutureDate: function (a) {
        var now = new Date();
        return (a > now) ? true : false;
    }, 
```

现在像这样调用上述函数 (isFutureDate(convert("your form date value")))。

# erlang - erlang中的日期转换

> ID：15474499
> 
> 赞同：1
> 
> 时间：2013-03-18T10:25:42.903
> 
> 标签：erlang

我开发了这个功能：

```
get_data_by_transaction(TransactionCode)->

 Q = qlc:q([{X#transaction.datetime} || X <- mnesia:table(transaction),
                X#transaction.transaction_code =:= TransactionCode]),
    case do(Q) of
        [{K}] ->  
        {ok, K};

        [] ->
            {error, notfound}
    end. 
```

当我测试这个函数时，我得到了这个结果：

```
{ok,{{2013,3,6},{7,12,49}}} 
```

我的目标是得到这样的结果：

```
06/03/2013 7:12 
```

所以我应该将我的数据转换为新格式

同一个人可以帮我解决我的问题吗

我尝试使用此代码：

```
format_date({{Year, Month, Day}, {Hour, Minute, _}}) ->
    lists:flatten(
        io_lib:format("~2..0B/~2..0B/~4..0B ~B:~2..0B", [Day, Month, Year, Hour,Minute])). 
```

当我运行这段代码时，我有：

```
3> format_date({{2013,3,6},{7,12,3}}).           
"06/03/2013 7:12" 
```

**但我的目标不是显示此结果，而是将此结果与变量相关联**

我将尝试按照上一个回复中的链接进行操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:38:26.043

如果所需的输出格式与您的示例中看起来一样简单，那么`io_lib:format/2`带有适当填充的 an 就可以了：

```
format_date({{Year, Month, Day}, {Hour, Minute, _}}) ->
    lists:flatten(
        io_lib:format("~2..0B/~2..0B/~4..0B ~B:~2..0B", [Day, Month, Year, Hour, Minute])). 
```

为长线道歉——不幸的是，这是你使用 Erlang 的格式说明符得到的。如果您想了解更多关于它们的信息，请参阅[这篇文章](https://stackoverflow.com/questions/1251869/how-to-format-a-number-with-padding-in-erlang)和[文档](http://erlang.org/doc/man/io.html#format-2)。每次你需要对格式化函数做一些花哨的事情时，都希望返回到这个文档。它根本不粘。

调用 to`lists:flatten/1`是必需的，因为`io_lib:format/2`返回一个嵌套列表，可能是出于性能原因，因为输出将经常发送到接受[iolists](http://dev.af83.com/2012/01/16/erlang-iolist.html)的函数。

另请注意，在将示例中的元组发送到上述函数之前，您需要去掉前导的`ok`. 简单地匹配它就`{ok, DateTime} = get_data_by_transaction(...)`可以完成它。

# ios - iOS：运行时的 DDL 命令

> ID：15474509
> 
> 赞同：0
> 
> 时间：2013-03-18T10:26:00.890
> 
> 标签：ios, core-data, runtime

我想在运行时将表/列添加到数据库中。目前我正在使用核心数据。我知道在 XCode 中可以这样做（添加新的数据模型版本），但我绝对不能使用这种方式，因为我从 Web 服务接收数据库模式。

使用 Core Data 时是否有可能在运行时运行 ddl 命令，或者是否可以直接使用 sqlite（或包装器/或映射器）？如果最好使用包装器/映射器，请给我一些关于在这种情况下应该使用哪个的建议。

工作流程应该是：

1.  启动应用
2.  检查数据库是否是最新的
3.  如果 Web 服务提供了新版本的架构，则执行 DDL 命令
4.  继续应用工作流程

PS：请不要提供描述使用 XCode 修改架构的替代方案的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:08:20.910

您可以在运行时修改 Core Data 模型吗？是的...但是，它可能无法按照您希望的方式工作。

Core Data 的 API 使得在运行时构建或修改数据模型的每个细节成为可能。Xcode 的模型编辑器很方便，但如果您愿意，您可以跳过它并在代码中执行所有操作。例如，`NSEntityDescription`的`properties`属性（包括属性和关系）是可写的。您可以创建一个新`NSAttributeDescription`实体并更新实体的属性以包含它。Bang，您刚刚为实体添加了一个新属性。同样，`NSManagedObjectModel`的`entities`属性是可写的，因此您可以创建一个新属性`NSEntityDescription`并将其添加到模型中。这为您提供了一个在运行时创建的新实体。

**但是**，这是一个大问题：*您只能在加载数据存储**之前***执行此操作。加载持久存储后，更改模型将引发异常。当 Core Data 加载持久存储时，它会将模型文件与存储文件中使用的模型进行比较。它们**必须**匹配，加载商店后您无法更改此事实。加载商店后，模型就固定了。

更重要的是，即使您在加载持久存储之前修改了模型，也只能加载与模型当前版本匹配的持久存储——除非您还编写代码将持久存储迁移到新模型。这有多难取决于变化的性质。至少，您需要在加载之前保存的数据之前进行任何更改，然后还安排进行模型迁移以更新持久存储以使用新模型。

使用 Core Data，模型（模式）和数据是分开存储的，并在加载存储时匹配。这不是 SQLite 在内部工作的方式，而是 Core Data 强制执行的方法。

# php - 使用elastica按术语搜索给出空结果

> ID：15474510
> 
> 赞同：1
> 
> 时间：2013-03-18T10:26:02.610
> 
> 标签：php, search, elasticsearch, elastica

使用**Elastica - Elasticsearch PHP 客户端。**有很多字段，但我想在“Screen_name”字段中搜索。我必须为此做些什么。我使用了术语但没有成功。结果是空数组
这是代码。

```
// Load index (database)
$elasticaIndex = $elasticaClient->getIndex('twitter_json');

//Load type (table)
$elasticaType = $elasticaIndex->getType('tweet_json');

$elasticaFilterScreenName   = new \Elastica\Filter\Term();    
$elasticaFilterScreenName->setTerm('screen_name', 'sohail'); 

//Search on the index.
$elasticaResultSet  = $elasticaIndex->search($elasticaFilterScreenName);

var_dump($elasticaResultSet); exit;
$elasticaResults    = $elasticaResultSet->getResults();
$totalResults       = $elasticaResultSet->getTotalHits(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:34:45.770

不知道您的映射很难说，但是文档属性“screen_name”很可能不包含术语“sohail”。

尝试使用匹配查询或 Query_String。

“术语”在 ElasticSearch 中具有特殊含义。术语是索引的基本原子单位。在您的文本通过分析器运行后生成术语。如果“screen_name”有一个与索引关联的分析器，则“sohail”在保存到索引之前会以某种容量进行修改。

# ios - 如何在 ios 应用程序中存储崩溃日志文件？

> ID：15474511
> 
> 赞同：3
> 
> 时间：2013-03-18T10:26:06.363
> 
> 标签：ios, objective-c, ios6, crash-reports

假设我的应用程序崩溃意味着当时`applicationWillTerminate`调用了函数。在该函数中，我想将崩溃日志文件保存在临时目录中。当应用程序当时启动时，我想通过编码将崩溃报告文件从 iOS 设备上传到我的服务器位置。

我正在使用此代码来保存崩溃日志文件。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *logPath = [documentsDirectory stringByAppendingPathComponent:@"console.log"];
freopen([logPath cStringUsingEncoding:NSASCIIStringEncoding],"a+",stderr); 
```

但此代码将在模拟器中运行。我可以看到这个文件

```
/Users/UserNAme/Library/Application Support/iPhone Simulator/6.0/Applications/xxx-yyy-sss--eee/Documents/console.log 
```

但我在 ios 设备中找不到此文件。

注意：在我正在使用的 ios 设备中查找文件`iExplorer`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T10:36:34.027

不幸的是，您无法以编程方式查看设备上的崩溃日志。为了克服这个问题，有许多商业、准商业和开源解决方案。

特别是[HockeyApp](http://hockeyapp.net)（现在归微软所有）和[crittercism](http://www.crittercism.com/)提供了商业解决方案。此外，[TestFlightApp](http://testflightapp.com)（虽然被苹果公司收购）仍然通过其接口提供这种功能。

HockeyApp 源代码也可以在[github](https://github.com/bitstadium)上找到。

最后，这些系统中的大多数都使用名为[plcrashreporter](https://plcrashreporter.org)的底层崩溃捕获器，它是一个开源框架，可将 iOS 崩溃报告的近乎精确的副本放置在您的目录中。

如果您想自己管理事情，我强烈建议`plcrashreporter`您使用托管和商业解决方案，您应该查看它们并自己决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:05:54.557

另一个有用的选项（我们使用它）是 Crashlytics.com，它是免费的，并且对报告有很大的控制权（现在归 twitter 所有，请谨慎使用！）。

# c++ - 没有返回语句的重载赋值运算符

> ID：15474512
> 
> 赞同：5
> 
> 时间：2013-03-18T10:26:06.597
> 
> 标签：c++, assignment-operator

为什么赋值运算符允许返回void？为什么分配链在这种情况下有效？看一下代码，就会很清楚我在说什么。

**代码：**

```
struct Foo
{
   std::string str;

   Foo(const std::string& _str)
   : str(_str)
   {
   }

   Foo& operator=(const Foo& _foo)
   {    
      str = _foo.str;
      //return *this; /* NO RETURN! */
   }
};

int main()
{
   Foo f1("1");
   Foo f2("2");
   Foo f3("3");
   f1 = f2 = f3 = Foo("4");

   std::cout << "f1: " << f1.str << std::endl;
   std::cout << "f2: " << f2.str << std::endl;
   std::cout << "f3: " << f3.str << std::endl;

   return 0;
} 
```

**问题：**

1.  为什么这是合法的？（为什么它完全编译）
2.  为什么它有效？

我在很多地方都读过“赋值运算符应该返回 * *this*以便你可以进行赋值链接”，这完全是有道理的，但是为什么上述工作有效呢？

**试试看：**
[使用上面代码的在线 c++ 工作区](http://liveworkspace.org/code/1ghzjD%246)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T10:27:58.577

> 为什么这是合法的？（为什么它完全编译）

这是**不**合法的，并且会在您的程序中注入**未定义的行为。**您的编译器至少应该警告您（如果您设置了足够高的警告级别，我相信它会警告您）。

根据 C++11 标准的第 6.6.3/2 段：

> 从函数的末尾流出相当于没有值的返回；**这会导致值返回函数中的未定义行为**。

唯一的例外是`main()`允许缺少`return`语句的函数。根据第 3.6.1/5 段：

> 中的 return 语句`main`具有离开`main`函数（销毁具有自动存储持续时间的任何对象）并`std::exit`使用返回值作为参数进行调用的效果。**如果控制到达末尾`main`没有遇到return语句，效果就是执行**
> 
> ```
> return 0; 
> ```

最后：

> 为什么它有效？

未定义的行为意味着您的程序可能在某些机器上运行，但在其他机器上不运行；或者它今天可以在所有机器上运行，但明天不行；或者它会导致你的程序产生一些奇怪的、不可预测的结果；包括（这是*最坏*的情况）似乎运行得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:28:24.847

你所拥有的是*未定义的行为*，因为你正在离开一个承诺返回某些东西的函数的末尾。

在 C++ 中，唯一合法的函数是`int main()`（以及带参数的版本），因为它`0`在没有 return 语句的情况下隐式返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:37:22.917

检查编译后生成的 asm 代码。我的猜测是该函数返回寄存器 AX 中发生的内容（如果我没记错的话，这是 c-call 标准函数实现）。在你的情况下，它恰好是你想要的......如果你添加一些功能来运行你可能会破坏它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:40:37.980

这是非法的，如果它编译，那么它以某种方式为运行时存储了一些奇怪的东西。你必须`*this`从函数中返回。正确的函数定义如下所示：

```
Foo& operator=(const Foo& _foo)
{    
  if(this == &_foo) /* check for self-assignment */
     return *this;

  str = _foo.str;

  return *this;
} 
```

对于链式分配，返回`*this`是必须的，例如：

```
Foo  x, y, z;
x = y = z;     /* *this is necessary for this statement */ 
```

# svn - SVN：修复或删除损坏的修订

> ID：15474513
> 
> 赞同：1
> 
> 时间：2013-03-18T10:26:07.640
> 
> 标签：svn

如何修复或删除 SVN 中损坏的修订？

例如，我们有 1000 个修订版的存储库，而从 100 到 200 的修订版已损坏。我并不真正关心这些修订，因此如果需要可以将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:26:07.640

如果您没有备份并且您不关心损坏的修订版，这里的解决方案。

首先，您需要一一备份所有修订，然后创建新的代表并将所有备份导入其中

这里有两个脚本

先备份

```
#!/bin/bash

svn="/var/lib/svn/repository_name"
dir="/some/dir/for/backup"

svnadmin dump $svn -r1 > $dir/r1.dump

for rev in `seq 2 1000`; do # 1000 - it's number of last revision
  echo $rev
  svnadmin dump $svn -r$rev --incremental > $dir/r${rev}.dump
done 
```

和导入脚本

```
#!/bin/bash

svn="/var/lib/svn/new_repository_name" 
dir="/some/dir/for/backup"

svnadmin create $svn
svnadmin load $svn --ignore-uuid < $dir/r1.dump
for rev in `seq 2 1000`; do 
  echo $rev
  svnadmin load $svn < $dir/r${rev}.dump
done 
```

# iphone - 用逗号分隔字符串，数据来自 JSON

> ID：15474515
> 
> 赞同：0
> 
> 时间：2013-03-18T10:26:07.717
> 
> 标签：iphone, ios, objective-c

我面临以下问题，

我已经解析了来自服务器的数据，我需要将所有密钥放入数组中。

```
(
"shopping|TD|Shopping|TD|customer/shopping_icon.png",
    "salon_spa|TD|Salon & Spa|TD|customer/salon_icon.png",
) 
```

这些是我从服务器获取的密钥，现在我想将它们放入一个数组中。

我曾尝试使用由字符串分隔的组件，但这总是会使应用程序崩溃。

```
NSMutableArray *allKeysArray =[[NSMutableArray alloc]init];
[allKeysArray addObject: [deals allKeys]];
NSLog(@" all keys --%@",allKeysArray);
NSMutableString *string=[[NSMutableString alloc]init];
string =[allKeysArray objectAtIndex:0];
NSLog(@"string--%@",string);
arr =[string componentsSeparatedByString:@","]; 
```

应用程序崩溃说由字符串分隔的组件由于未捕获的异常而正在终止应用程序

> 'NSInvalidArgumentException'，原因：'-[_]：无法识别的选择器发送到实例 0x75b8dd0'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:38:40.510

将您的代码替换为 ....

```
[allKeysArray addObject: [deals allKeys]]; 
```

像这样……

```
[allKeysArray addObjectsFromArray: [deals allKeys]]; 
```

这将解决您的问题...

# excel - 如何添加几列数据并将其复制到一列中的另一个excel文件中

> ID：15474519
> 
> 赞同：1
> 
> 时间：2013-03-18T10:26:18.270
> 
> 标签：excel, copy

我希望将 Financials – Flat Workbook 中的数据复制到目标工作簿中，根据与电子表格名称或 B2 列匹配的 SPRF 编号，根据目标工作簿上的月份，因此对于当前月份，它将是实际的并且剩下的几个月将被预测。它将根据资源角色、资源名称、活动和应用程序的项目。
将数据从一个工作簿复制到另一个工作簿

例如 – 我想从平面文件更新 46441A，SA、Dev…等小时，所以如果我必须手动执行，我将继续平面文件电子表格，检查 153220 质量保证、资源名称、46441A 和 ISET，获取当前月份的总实际值和剩余月份的预测值，并将其复制到仪表板工作簿中。

SA、DEV、QA 的所有正确 Res Role 都将以 153220 开头。

# hadoop - 将 HDFS 文件中的二进制数据写入 SequenceFile

> ID：15474520
> 
> 赞同：0
> 
> 时间：2013-03-18T10:26:19.697
> 
> 标签：hadoop, mapreduce, hdfs, sequencefile

我在 HDFS 中有很多文件，想通过 MR 作业将它们复制到序列文件中。seq文件的key类型是TEXT（我用的是SHA1），value类型是BytesWritable（文件内容）。我发现一些示例代码将所有文件内容读取到一个字节数组中，比如缓冲区，然后将缓冲区设置为 ByteWritable 对象。前任：

```
byte[] buffer = new byte[(int)file.length()];
FileInputStream fis = new FileInputStream(fileEntry);
int length = fis.read(buffer);
fis.close();
key.set(sha1);
value.set(buffer, 0, buffer.length);
writer.append(key, value); 
```

我的问题是：如果我的输入文件很大，缓冲区大小会超出内存限制。我可以在每次迭代中写入少量数据的循环附加到 ByteWritable 对象吗？或者我可以将输入流分配给 BytesWritable 对象并让它处理问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T11:18:22.113

您可以只使用 Linux`cat`命令的 HDFS 等效项：

`hadoop fs -cat '/path/to/files/*.' > oneBigSequenceFile.csv`

它将连接一个序列文件中的所有文件。

# ios - 从元数据中提取图像图片样式

> ID：15474524
> 
> 赞同：2
> 
> 时间：2013-03-18T10:26:24.660
> 
> 标签：ios, objective-c, image, cgimagesource

我正在使用 ios CGImageSourceCopyPropertiesAtIndex 为 ios 上的图像提取大量元数据。但我无法提取所有元数据，如 Mac Preview 应用程序或 exiftool 命令中显示的元数据。

我主要缺少“图片样式”和“佳能”信息。

我如何阅读元数据：

```
NSURL *imageFileURL = [NSURL fileURLWithPath:filePath];
CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)CFBridgingRetain(imageFileURL), NULL);
CFDictionaryRef props = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, NULL);
NSLog(@"%@", props); 
```

有人有提示吗？

这是使用预览的信息

![在此处输入图像描述](../Images/2a56ff945044c943279a24aecd892375.png)

这是来自 NSLog 的信息：

```
2013-04-02 09:50:06.885 i2[67169:1f0f] {
ColorModel = RGB;
DPIHeight = 72;
DPIWidth = 72;
Depth = 8;
Orientation = 1;
PixelHeight = 1728;
PixelWidth = 2592;
"{Exif}" =     {
    ApertureValue = "5.375";
    BodySerialNumber = 1280809746;
    ColorSpace = 1;
    ComponentsConfiguration =         (
        1,
        2,
        3,
        0
    );
    CustomRendered = 0;
    DateTimeDigitized = "2012:12:24 12:58:46";
    DateTimeOriginal = "2012:12:24 12:58:46";
    ExifVersion =         (
        2,
        3
    );
    ExposureBiasValue = 0;
    ExposureMode = 1;
    ExposureProgram = 1;
    ExposureTime = "0.003125";
    FNumber = "6.3";
    Flash = 16;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLength = 22;
    FocalPlaneResolutionUnit = 2;
    FocalPlaneXResolution = "2857.773";
    FocalPlaneYResolution = "2904.202";
    ISOSpeedRatings =         (
        3200
    );
    LensModel = "EF-S10-22mm f/3.5-4.5 USM";
    LensSpecification =         (
        10,
        22,
        0,
        0
    );
    MeteringMode = 5;
    PixelXDimension = 2592;
    PixelYDimension = 1728;
    SceneCaptureType = 0;
    ShutterSpeedValue = "8.375";
    SubsecTime = 35;
    SubsecTimeDigitized = 35;
    SubsecTimeOriginal = 35;
    WhiteBalance = 1;
};
"{IPTC}" =     {
    StarRating = 0;
};
"{TIFF}" =     {
    DateTime = "2012:12:24 12:58:46";
    Make = Canon;
    Model = "Canon EOS 7D";
    Orientation = 1;
    ResolutionUnit = 2;
    XResolution = 72;
    YResolution = 72;
    "_YCbCrPositioning" = 2;
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:04:07.350

请注意`kCGImagePropertyMakerCanonDictionary`，`kCGImagePropertyExifAuxDictionary`和`kCGImagePropertyTIFFDictionary`不是可以`CGImageSourceCopyPropertiesAtIndex`理解的选项。它们是它返回的字典中的键。它似乎不会导致任何问题通过它们，但它也没有实现任何目标。

`CGImageSourceCopyPropertiesAtIndex`没有声明的属性键可以访问我可以看到的图片样式数据，但无论如何它似乎都返回了。如果您转储`props`字典，您应该会看到一个`{PictureStyle}`包含感兴趣信息的字典的键。您还会看到一把`{MakerCanon}`钥匙。这对应于常量`kCGImagePropertyMakerCanonDictionary`，并且该字典中的属性是[文档相关部分中](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGImageProperties_Reference/Reference/reference.html#//apple_ref/doc/constant_group/Canon_Camera_Dictionary_Keys)描述的属性。

# spring - Mule 3.3 spring 3.1 hibernate 3.6 事务管理

> ID：15474527
> 
> 赞同：0
> 
> 时间：2013-03-18T10:26:36.880
> 
> 标签：spring, hibernate, mule, transactionmanager

我正在开发一个涉及 mule、spring、hibernate 和注释的应用程序。我正在使用 org.springframework.orm.hibernate3.HibernateTransactionManager。现在的问题是：

我在 mule 中有某些组件，它们根据使用休眠的条件将数据记录到数据库中。我使用 @Transactional 插入少量数据，然后在方法范围完成时提交事务。但我想要的行为是：第一个组件根据某些条件插入数据，但事务不应该立即提交，我的第二个组件是一个 java 类应该再次插入一些数据，然后是第三个等等。如果任何一个组件都失败了在所有组件中执行的查询都应该回滚。所有这些组件都是独立的 java 类

我怎样才能实现这种行为。

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:20:33.480

让您的整个组件执行链处于一个事务中。那么它将满足您的期望。如果您的所有组件都在同一个 spring 应用程序上下文中，则很容易做到这一点。在这种情况下，您需要做两件事：

1.  `@Transactional`在您的组件类或需要在事务中的特定方法上添加注释。默认情况下，事务方法使用`REQUIRED`传播设置，这将使执行链中的所有方法合并到一个事务中。
2.  确保 Spring 可以扫描所有组件。

    @Transactional @Component("lbsProviderApiCallJob") 公共类 LbsProviderApiCallJoImpl 实现 LbsProviderApiCallJob, ApplicationContextAware {

如果您的所有组件都不在弹簧上下文中。制作起来很复杂。

# javascript - XMLHttp 请求到 302 页面

> ID：15474531
> 
> 赞同：1
> 
> 时间：2013-03-18T10:26:44.300
> 
> 标签：javascript, browser, xmlhttprequest

我需要将 xmlhttprequest 发送到返回 302 并重定向的页面，而不是重定向的页面，我看到了： [Problems with xmlhttprequest status 302](https://stackoverflow.com/questions/7524039/problems-with-xmlhttprequest-status-302)

但这个解决方案只适用于 Firefox，我需要一些适用于 IE 和 Chrome 的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:42:48.480

用 JS 做客户端是不可能的。 `XMLHttpRequest`s 默默地跟随重定向。

将服务器用作代理是否可行？因此，您将向 发出请求`"/utils/inspectRedirect?url=..."`，它会返回类似以下内容：

```
{
    "originalUri": ...,
    "redirectUri": ...,
    "httpCode": 302
} 
```

如果您不需要完整的数据，只需要重定向 URI，那么这不应该对服务器造成任何压力（它可以只发出 HEAD 请求）。

# sencha-touch - 一次多个ajax请求 Sencha Touch

> ID：15474532
> 
> 赞同：0
> 
> 时间：2013-03-18T10:26:45.257
> 
> 标签：sencha-touch

任何人都可以帮我解决这个问题。我想从一个商店加载多个 xml url。如果我为每个请求使用不同的商店，我可以做到这一点，但它会使我的代码变重。任何人都可以帮助我/谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:47:00.713

您可以发送多个 Ext.Ajax.request() 并将结果数据附加到您的目标存储（通常配置有内存代理）。

# javascript - 任何 Metro 风格的日期选择器？

> ID：15474535
> 
> 赞同：2
> 
> 时间：2013-03-18T10:26:50.897
> 
> 标签：javascript, jquery, jquery-ui, datepicker

有没有我可以嵌入到网站的好的 Metro 风格的日期选择器控件？例如，jQuery UI 不适用于 Metro 风格的网页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T14:38:56.720

如果您只是在寻找 jquery ui 主题，请查看[此处找到的](http://www.jquery4u.com/bootstraps/metro-bootstraps/)[jquit 主题](http://jquit.com/builder/#gcc=ffffff&gcb=d4d4d4&gct=525252&gci=d4d4d4&pcc=d4d4d4&acb=525252&o=ffffff&ghc=3399ff&ght=ffffff&ghi=ffffff&gdc=d4d4d4&gdb=d4d4d4&gdt=525252&tdc=3399ff&tdb=3399ff&tdt=ffffff&tdi=ffffff&ddc=d4d4d4&ddb=d4d4d4&ddt=525252&pxd=000000&asc=3399ff&ast=ffffff&goc=66B3FF&gob=66B3FF&got=ffffff&toc=66B3FF&tob=66B3FF&tot=ffffff&toi=ffffff&doc=66B3FF&dob=66B3FF&dot=ffffff&pxa=525252&gac=3399ff&gab=3399ff&gat=ffffff&tac=ffffff&tab=d4d4d4&tat=525252&tai=d4d4d4&dac=3399ff&dab=3399ff&dat=ffffff&dic=d4d4d4&dib=3399ff&dit=ffffff&gic=efdca9&gib=efdca9&git=525252&gii=525252&ec=c31d1d&eb=c31d1d&et=ffffff&ei=ffffff) 。 ![地铁日期选择器](../Images/f549a190a21073cc309fd729b57aec47.png)

其他替代方案是：

*   MetroUI CSS 提供了一个日期选择器（以及一个看起来像 Metro 的完整用户界面） [http://metroui.org.ua/calendar.php](http://metroui.org.ua/calendar.php)

*   Bootstrap 还有一个名为 BootMetro 的主题，它还提供了一个日期选择器。 [http://aozora.github.io/bootmetro/javascript.html#datepicker](http://aozora.github.io/bootmetro/javascript.html#datepicker)

如果您想获得一个完全地铁风格的页面，我建议您将主题与引导程序结合使用，因为它可以为您节省大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T14:25:52.850

您可以使用JQuery UI 的 [ThemeRoller自定义日期选择器。](http://jqueryui.com/themeroller/)

另请查看此[**博客**](http://www.hongkiat.com/blog/jquery-ui-datepicker/)以进行自定义。这个[**DEMO**](http://media02.hongkiat.com/jquery-ui-datepicker/demo/datepicker/index.html)看起来是一个很好的地铁风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T14:22:45.540

对于 Metro 风格，请访问 Jquit（对于 jquery UI）

[http://jquit.com/build-jquery-ui-themes-with-jquit-builder/](http://jquit.com/build-jquery-ui-themes-with-jquit-builder/)

# c# - WCF服务错误没有配置文件或端点.Net 3.5

> ID：15474536
> 
> 赞同：1
> 
> 时间：2013-03-18T10:26:51.823
> 
> 标签：c#, wcf

我正在编写 WCF 服务 - 客户端。该服务将端点 url 获取为 arg，这是 Windows 窗体应用程序。
服务实现是：

```
BaseAddress = new Uri(args[0]);
using (ServiceHost host = new ServiceHost(typeof(DriverService), BaseAddress))
{
   ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
   smb.HttpGetEnabled = true;
   smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
   host.Description.Behaviors.Add(smb);
 //host.AddServiceEndpoint(typeof(DriverService), new BasicHttpBinding(), BaseAddress);
   host.Open(); 
```

在 host.Open() 之后出现错误，当我在另一个解决方案上编写相同的 wcf 代码时它工作得很好，我有客户端和服务。现在我只需要等到客户端连接时才打开服务。

据我了解，这是服务，我给它地址，然后它侦听给定的地址并将接口上的方法公开给不同的客户端。

错误：

```
Service 'DriverHost.DriverService' has zero application (non-infrastructure) endpoints. This might be because no configuration file was found for your application, or because no service element matching the service name could be found in the configuration file, or because no endpoints were defined in the service element. 
```

接口和类的代码：

```
[ServiceContract]
public interface IDriverService
{
    [OperationContract]
    string WhoAmI();
}

public class DriverService : IDriverService
{
    public string WhoAmI()
    {
        return string.Format("Im on port !");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:02:27.857

由于 .net 4.5 和 3.5 之间存在差异，我知道没有默认端点。
所以需要声明：

```
BaseAddress = new Uri(args[0]);
using (ServiceHost host = new ServiceHost(typeof(Namespace.Classname), BaseAddress))
{
  ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
  smb.HttpGetEnabled = true;
  smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
  host.Description.Behaviors.Add(smb);
  host.AddServiceEndpoint(typeof(Namespace.IInterface), new BasicHttpBinding(), args[0]);
  host.Open(); 
```

含义 - 添加 .AddServiceEndpoint(..) 并确保在 ServiceHost() 上编写类，并在 AddServiceEndpoint 上输入接口。

# javascript - 如何在 Ext.net 中动态更改工具栏内的文本字段的文本

> ID：15474538
> 
> 赞同：0
> 
> 时间：2013-03-18T10:27:03.977
> 
> 标签：javascript, asp.net, pagination, ext.net, html-editor

我正在使用 ext.net 开发一个项目，该项目在**HtmlEditor**的工具栏中有一个分页**器**

标记是：

```
<ext:Hidden ID='HF_type' runat="server"/>
    <ext:HtmlEditor ID="HtmlEditor1" runat="server" Height="800" Width="1050"
        EnableAlignments="false"
        EnableColors="false"
        EnableFont="false"
        EnableFontSize="true"
        EnableLinks="false"
        EnableLists="false"
        EnableSourceEdit="false"
        Maximizable="false"
    >
        <Listeners>
            <Initialize Handler="ButtonInit(#{HtmlEditor1})" />
            <Render     Handler="ButtonRender(#{HtmlEditor1})" />

        </Listeners>
    </ext:HtmlEditor> 
```

工具栏渲染功能：

```
function ButtonRender(he){
he.getToolbar().add([{xtype:'tbseparator'}]);

he.getToolbar().addButton([{
    id:'previousBtn',
    iconCls:'arrow-left',
    handler: function(){previousPageClick();},
    scope: this,
    tooltip: 'Pagina precedente',
    overflowText: 'Pagina precedente'
}]);

he.getToolbar().addField( [{
   id:'pageCounter',
    xtype : 'tbtext',
    text : '1 di 3',
    width: '40'
}]);

he.getToolbar().addButton([{
    id:'nextBtn',
    iconCls:'arrow-right',
    handler: function(){nextPageClick();},
    scope: this,
    tooltip: 'Pagina successiva',
    overflowText: 'Pagina successiva'
}]);

he.getToolbar().add([{xtype:'tbseparator'}]);

he.getToolbar().addButton([{
    iconCls:'icon-printer-color',
    handler: function(){pdfClick();},
    scope: this,
    tooltip: 'Stampa',
    overflowText: 'Stampa'
}]); 
```

一切正常：添加了按钮，页面更改工作等。我唯一的问题是，在工具栏的“pageCounter”文本字段中，文本是“1 di 3”，但也可能是“1 di 2”。**如何根据某些条件更改此值？**

为了更好地解释：我需要在页面加载时文本字段根据页数显示不同的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:54:49.253

哈哈。显然在 stackoverflow 中发布问题会带来好运。弄清楚了。我添加了 2 个隐藏字段，其中包含当前页数和总页数，并在页面加载时填写。使用此代码，我在加载时更改它：

```
Ext.onReady(function() {
var theCounter = #{HtmlEditor1}.getToolbar().get("pageCounter");
theCounter.setText(HF_currentPage.value + ' di ' + HF_totalPages.value);
}); 
```

# visual-studio-2010 - 数据库项目 - 在没有其他人签出文件的情况下部署所有内容

> ID：15474542
> 
> 赞同：1
> 
> 时间：2013-03-18T10:27:10.217
> 
> 标签：visual-studio-2010, database-project

我将数据库项目存储在 TFS 中，问题是当两个人在同一个数据库上工作时，他们在部署未签入的版本时会覆盖彼此的更改。例如：

```
初始代码：
代码1：xxxxx
代码2：xxxx

code1: xxxxx \_ 开发者 1
代码2：yyyyy /

code1: zzzzz \_ 开发者 2
代码2：xxxxx /

```

当开发人员 1 部署代码 1 时，他会覆盖开发人员 2 部署的更改。

对此的解决方案是创建部署脚本的配置，而无需其他人签出的文件。

# spring - 缓存管理器

> ID：15474545
> 
> 赞同：0
> 
> 时间：2013-03-18T10:27:22.370
> 
> 标签：spring, ehcache

我有一个使用 JDBCTemplate 和 Hibernate 的应用程序。

这两个都配置为使用 ehcache 但抛出异常：

```
org.hibernate.cache.CacheException: net.sf.ehcache.CacheException: Another unnamed CacheManager already exists in the same VM. Please provide unique names for each CacheManager in the config or do one of following: 
```

使用 spring xml 配置的 JDBCTemplate 使用 hibernate.cfg.xml 配置的 Hibernate

请帮忙。

我试图禁用 ehcache.xml 中的默认缓存但失败了，并且我将共享属性设置为 true，这也导致了失败。

```
<?xml version="1.0" encoding="UTF-8"?>

<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd" updateCheck="false">

    <diskStore path="java.io.tmpdir" />

    <!--<defaultCache eternal="true" maxElementsInMemory="50000"
        overflowToDisk="false" diskPersistent="false" timeToIdleSeconds="0"
        timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" 
        />
    -->

    <cache name="genericDao" eternal="false" maxElementsInMemory="50000"
        overflowToDisk="false" memoryStoreEvictionPolicy="LFU" />

    <cache name="reportDao" eternal="false" maxElementsInMemory="50000"
        timeToIdleSeconds="28800" timeToLiveSeconds="28800"
        overflowToDisk="false" memoryStoreEvictionPolicy="LFU" />

 </ehcache>

<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"> 
        <property name="configLocation" value="WEB-INF/ehcache/ehcache.xml"></property>
        <property name="shared" value="true"></property>
    </bean>

    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">
        <property name="cacheManager" ref="ehcache"></property>
    </bean> 
```

在这种情况下如何提供唯一名称？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:54:45.113

创建两个不同名称的 ehcache.xml 配置。

# matlab - 在matlab中使用audioplayer时double和int16有什么区别

> ID：15474547
> 
> 赞同：1
> 
> 时间：2013-03-18T10:27:24.267
> 
> 标签：matlab, audio-player

我有一个向量保存音频数据，频率为 48k。数据由整数组成，最大值约为 4k。矢量类型是**<1x768000 double>**。当我使用这种矢量类型构建播放器时，如下所示：

```
a1 = audioplayer(A,48000);
a1.play(); 
```

产生的音频噪音很大，比如 SNR 值小于 1（这意味着我的噪音量比我想听到的要高）。

但是，当我将数据转换为 int16 并播放声音时，如下所示：

```
a2 = audioplayer(int16(A),48000);
a2.play(); 
```

生成的音频非常流畅，SNR 像 7-8 或其他东西（未测量或计算，几乎无法检测到噪音，但可以肯定。）

所以这里又是我的问题：在 matlab 中使用 audioplayer 时，double 和 int16 有什么区别？

PS：*如果你愿意，**我可以提供**A。***

PS2：***A****像往常一样包含语音和一点噪音（不是特殊类型，可能是因为麦克风坏等）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:35:15.060

在 API 上找到了答案。根据音频播放器的[API，](http://www.mathworks.com/help/matlab/ref/audioplayer.html)当输入为双精度类型时，它接受 -1 和 1 之间的值。当我第一次以双精度类型使用它时，它没有在 -1 和 1 之间正确缩放值，只是尝试播放它们。不仅使用 A 的原始值，在播放之前进行缩放可以解决问题。

```
a3 = audioplayer(A/max(abs(A)),48000);
a3.play(); 
```

正确缩放矢量。它和

```
a2 = audioplayer(int16(A),48000);
a2.play(); 
```

# php - 如何取消设置会话 ID 以注销用户？

> ID：15474548
> 
> 赞同：2
> 
> 时间：2013-03-18T10:27:28.483
> 
> 标签：php, session

如何`session id`在尝试销毁会话时删除？

```
session_start();
$_SESSION['foo'] = 'bar';

# clear the session variable
session_unset();
# delete the session
session_destroy();

# NOW WHAT ? HOW DO I UNSET THE SESSION-ID OR DELETE IT ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:46:22.667

不确定是否理解问题，但是否要删除 cookie？（默认名称：PHPSESSID）

```
session_start();

session_destroy();

$args = array_merge(array(session_name(), ''), array_values(session_get_cookie_params()));
$args[2] = time() - 3600;
call_user_func_array('setcookie', $args); 
```

session_destroy 只是删除存储数据的文件（默认处理程序），但如果不删除 cookie，会话 id 将被保留（并在下次调用 session_start 时重用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:57:28.080

```
session_start(); // initialize the session variables

session_unset(); // clear the $_SESSION variable

if(isset($_COOKIE[session_name()])) {
    setcookie(session_name(),'',time()-3600); # Unset the session id
}

session_destroy(); // finally destroy the session 
```

# git - 签出文件的最新版本

> ID：15474554
> 
> 赞同：1
> 
> 时间：2013-03-18T10:27:36.900
> 
> 标签：git

如何从远程分支签出特定文件的最新版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:30:29.870

首先确保获得最新版本，输入`git fetch`.

然后你可以使用`git checkout origin/master <file_name>`. （假设您想要`master`分支中的文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-26T08:44:12.420

在本地签出文件的最新提交版本：

```
git checkout file.txt 
```

或者，如果您需要文件的最新远程版本。我相信这会获取所有远程分支，但您将在本地掌握。

```
git checkout master
git fetch 
```

查看所有版本的 file.txt：

```
git log --oneline --branches file.txt 
```

最新版本的 file.txt 可能位于除 master 之外的分支上。由于`git log file.txt`只搜索当前分支，我添加了`--branches`. 如果最新版本在另一个分支上，则检出该分支。或者签出您想要的单个提交的 id，例如`git checkout f823772`.

`git log`您还可以指定`--remotes=somewhere`哪些可能也有帮助。

# iphone - 如何将类文件的对象存储在iphone的数组中

> ID：15474565
> 
> 赞同：0
> 
> 时间：2013-03-18T10:28:23.417
> 
> 标签：iphone, nsarray

我是 iphone 应用程序开发的新手。所以请帮帮我。我正在尝试开发一个应用程序，在该应用程序中我需要在表格视图中显示联系人姓名号码和图像。我有一个名为 Records.h 和 Records.m 的类文件，其中包含 NSString 类型名称、号码和图像的三个对象。我从数据库中选择数据并将每个数据存储在此类文件的对象中，如下所示：

```
Records *data = [[Records alloc] init];

data.contactname = [NSString stringWithUTF8String: (char *) sqlite3_column_text(stmt, 1)];

            data.contactnumber = [NSString stringWithUTF8String: (char *) sqlite3_column_text(stmt, 2)];

            data.contactimage = [NSString stringWithUTF8String: (char *) sqlite3_column_text(stmt, 3)]; 
```

然后我将这个类文件存储在`NSMutableArray`：

```
[array addObject:data]; 
```

这样在每个索引处，我都有每个对象都包含三个字符串名称、数字和图像。现在我只想从每个索引中选择名称部分。知道该怎么做..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:34:45.137

在您的 tableview cellForRowAtIndexPath 方法中编写以下代码：

```
Records *shareObj = [array objectAtIndex:indexPath.row];
label.text=shareobj.name;
label2.text=shareobj.contactnumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:36:50.397

试试这个 ：：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   Records *objRecord = [array objectAtIndex:indexPath.row];
   NSLog(@"Name :: %@", objRecord.name);

   lbl.title.text = objRecord.name;
} 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:46:19.517

```
 //in . h file
@property (strong, nonatomic) UILabel *labelContactName;
@property (strong, nonatomic) UILabel *labelContactNumber;

//in . m file
 _labelContactName = [[UILabel alloc] initWithFrame:CGRectMake(50, 0, 230, 32)];

    _lableContactName.backgroundColor = [UIColor clearColor];
     [cell.contentView addSubview:_labelContactName];

      _labelContactNumber= [[UILabel alloc] initWithFrame:CGRectMake(50, 27, 110, 20)];

    _lableContactNumber.backgroundColor = [UIColor clearColor];

    [cell.contentView addSubview:_labelContactNumber];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
Records *objRecord = [array objectAtIndex:indexPath.row];
   NSLog(@"Name :: %@", objRecord.name);
_lableContactName.text=objRecord.name;
} 
```

# android - API 生成错误

> ID：15474568
> 
> 赞同：0
> 
> 时间：2013-03-18T10:28:25.903
> 
> 标签：android, api, google-api

我正在尝试为 API 访问生成一个 android 密钥。问题是我做不到。当遵循从命令提示符生成指纹的标准模式时，`SHA-1`此错误同时弹出......关于这可能是什么的任何想法？我确实阅读了其他帖子，但没有太大帮助。

```
keytool error: java.io.IOException: Invalid keystore format
java.io.IOException: Invalid keystore format 
```

我做了必须做的事情，指出了关键工具和 jarsigner 所在的 JDK bin 文件的路径....并且还遵循了标准命令行

```
keytool -exportcert -alias androiddebugkey -keystore {path-to-debug-or-production-keystore} -list -v 
```

还

```
keytool -list -v -alias androiddebugkey -keystore <path_to_debug_keystore>debug.keystore -storepass android -keypass android 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:33:39.857

我想你的问题就在这里

```
keytool -v -list -keystore C:\Users\username\.android\debug.keystore 
```

你必须给你的`keystore.exe`位置不要直接使用 `{path-to-debug-or-production-keystore}`

# java - 如何通过 url 将 .csv 读取数据从 JSP 发送到 HTML 页面？

> ID：15474570
> 
> 赞同：0
> 
> 时间：2013-03-18T10:28:29.670
> 
> 标签：java, html, jsp, csv

我正在从某个 .csv 文件中读取数据，并且只需要通过 url 将该数据发送到某个 HTML 页面。我的 JSP 文件仅从 .csv 读取数据，并且不包含任何 HTML 标记或表单。我将如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:17:28.040

这就是我们用来显示简单报告的方法。它目前缺乏对引用字段的处理。

```
 <table >
    <tbody>
      <c:set var="newLine" value="<%= \"\n\" %>" />
      <c:forEach var="row" items="${fn:split(owdata:get('csv_file'), newLine)}" varStatus="rowStatus">
        <tr>
          <c:set var="rowSpaced" value="${fn:replace(fn:replace(row, ',,', ', ,'), ',,', ', ,')}" />
          <c:choose>
            <c:when test="${fn:contains(rowSpaced, ',')}">
              <c:forEach var="cell" items="${fn:split(rowSpaced, ',')}">
                <td>${cell}</td>
              </c:forEach>
            </c:when>
            <c:otherwise>
              <td colspan="10">${rowSpaced}</td>
            </c:otherwise>
          </c:choose>
          <td colspan="100"></td>
        </tr>
      </c:forEach>
    </tbody>
  </table> 
```

# java - 什么是最好的方法。执行器框架还是普通线程？线程必须设计为每小时运行一次并执行批处理操作？

> ID：15474574
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:28:47.790
> 
> 标签：java, multithreading, concurrency

我想在每次操作后让线程休眠 1 小时。一种while循环运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:31:07.343

当您想以特定的时间间隔运行任务时，您应该使用[java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)类来[定期安排](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29)[java.util.TimerTask](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)的scheduleAtFixedRate 。

当你在完成任务后让线程休眠一小时，那么间隔实际上是一小时加上执行时间，而不是一小时。即使您的批处理任务只需要几秒钟，时间差也会随着时间的推移而累积。

这意味着随着时间的推移，您的任务运行的实际时间将变得越来越难以预测。我不知道批处理在可预测的时刻发生或每周精确执行 168 次对您的用例有多重要，但是当它很重要时，使用睡眠的解决方案会非常糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:34:49.077

简单的方法应该是使用[ScheduledExecutorService.scheduleAtFixedRate](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)

# jquery - 在验证表单中使用 has()

> ID：15474577
> 
> 赞同：0
> 
> 时间：2013-03-18T10:28:51.920
> 
> 标签：jquery, forms, validation

大家好，我正在尝试验证我的表单，其中一个字段是 URL，到目前为止我的规则是：

```
 rules: {
                url: { required: true, url: true},
                name: { required: true },
                provider: { required: true }
            } 
```

我还想在规则中使用类似 url:has(http) 的东西来检查协议是否存在。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:34:52.163

尝试

```
$.validator.addMethod("checkURL", function(value, element)
{
    var return_val = null;
    var message = null;
    var reg = /http(s?):\/\/www/;

    if (!reg.test($(element).val()))
    {
        return_val = false;
        message = "false message";
    }
    else
    {
        return_val = true;
        message = "";
    }
    jQuery.validator.messages.checkURL = message;
    return return_val;
}, jQuery.validator.messages.checkURL); 
```

用它作为

```
rules:
{
    url: { required: true, checkURL: true},
    name: { required: true },
    provider: { required: true }
} 
```

# css - 默认边距 a4 打印

> ID：15474581
> 
> 赞同：0
> 
> 时间：2013-03-18T10:29:05.690
> 
> 标签：css

我正在创建一个可以打印的 div。

它将打印在 1 张铺设的 a4 纸上。

我在我的 CSS 中使用

```
width: 297mm; 

height: 210mm; 
```

但如果我想打印，侧面总是有边距（默认情况下）。

现在，如果用户要打印 div，由于页边距，它会分布在 2 页上。

边距是否有任何默认尺寸，因此默认情况下它可以在每台打印机上打印。

有谁知道这些边距是多少，以便用户可以在一页上打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:09:45.280

你有你的块定义`display`风格，我认为这会掩盖你的问题。只有定义宽度和高度才能将您的元素浮动到其容器之外。所以尝试这样做：`display: inline-block;`到你的街区。我认为这会奏效。

# php - 让 swiftmailer 工作

> ID：15474585
> 
> 赞同：0
> 
> 时间：2013-03-18T10:29:08.453
> 
> 标签：php, html, forms, swiftmailer

我是 PHP 新手，拼命想在我的网站上获取一个简单的联系表格，以便使用 swiftmailer 工作。所以我将库安装到正确的位置，表单打开如下：

```
 <form action="mailhandler_girls.php" method="post" enctype="multipart/form-data"> 
```

然后在我的“mailhandler_girls.php”文件中，我有以下内容：

```
 <?php

$_SESSION["post"] = $_POST; 

$name = $_POST["Name"]; $email = $_POST["Email"]; $phone = $_POST["Phone"]; $dob = $_POST['DOBDay'] ."\t" .$_POST['DOBMonth'] ."\t" .$_POST['DOBYear'];$address = $_POST['AddressLine1'] ."\n" .$_POST['AddressLine2'] ."\n" .$_POST['PostCode'];$experience = $_POST["Experience"];$height = $_POST["Height"]; $size = $_POST["DressSize"];$bra = $_POST["Bra"];$waist = $_POST["Waist"];$hipwidest = $_POST["HipWidest"];$bicep = $_POST["Bicep"];$thigh = $_POST["Thigh"];$shoe = $_POST["Shoe"];    

require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('auth.smtp.1and1.co.uk', 25)
->setUsername('user@example.com')
->setPassword('test')
;

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Be A Model application: Girls') 

// Set the From address with an associative array
->setFrom(array('$email' => '$name'))

// Set the To addresses with an associative array
->setTo(array('holla@emilekelly.com', 'contact@emilekelly.com' => 'contact test'))

// Give it a body
->setBody('Name: ' .$name ."\n"
.'Email: ' .$email ."\n"
.'Phone: ' .$phone ."\n"
.'Address: ' .$address ."\n"
.'DOB: ' .$dob ."\n"
.'Experience: ' .$experience ."\n"
.'Height: ' .$height ."\n"
.'Dress Size: ' .$size ."\n"
.'Bra: ' .$bra ."\n"
.'Waist: ' .$waist ."\n"
.'Hip at Widest: ' .$hipwidest ."\n"
.'Bicep: ' .$bicep ."\n"
.'Thigh: ' .$thigh ."\n"
.'Shoe Size: ' .$shoe ."\n" )

// And optionally an alternative body
->addPart('<q>Here is the message itself</q>', 'text/html');
// Send the message
$result = $mailer->send($message);

?> 
```

什么都没发生。我确定我做错了什么是显而易见的，但我迷失在其中。我一直在使用文档，它让我走到了这一步，但仍然卡住了。

我只想让这个基本版本正常工作，然后担心使用图像附件进行详细说明。我也对 SMTP 传输感到困惑。像这样将用户名和密码放在网络上的文件中肯定不是一个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T19:02:31.797

好的，由于您是新手，请先尝试使用预定义的值而不是命令行中的 $_POST 执行 php 文件。

如果您在 Windows 上，则必须遍历目录并执行以下操作：

```
php.exe mailhandler_girls.php 
```

如果您使用的是 linux，请执行以下操作：

```
php5 mailhandler_girls.php 
```

如果有任何错误，这将优雅地输出。

错误消息将指示您的凭据是否存在问题、加密问题或其他任何问题。

# fogbugz - 如何使用 C# 通过 ASP.net 应用程序将文件附加到 FogBugz

> ID：15474587
> 
> 赞同：2
> 
> 时间：2013-03-18T10:29:16.800
> 
> 标签：fogbugz, fogbugz-api

我有一个允许用户报告错误和附加文件的 ASP.net 应用程序。该错误及其详细信息和附件应保存在 FogBugz 中。我设法创建了除文件附件部分之外的所有内容。

这是我的代码：

```
private void NewCaseWithFile()

    {
        string fbUrl = "https://test.fogbugz.com/api.asp";
        string fbToken = logInFogBugz();
        string param = "";

        param += "cmd=new";
        param += "&token=" + fbToken;

        param += "&sTags=" + "OnlineService,";
        param += "&sTitle=" + "Testing";

        param += "&sEvent=" + "This case is being created from Visual Studio";
        param += "&nFileCount=" + "1";
        param += "&File1=" + "Picture.png";

        HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(fbUrl + "?" + param);
        httpWebRequest.Method = WebRequestMethods.Http.Post;
        httpWebRequest.ContentType = "multipart/form-data";

        httpWebRequest.Accept = "application/xml";
        httpWebRequest.ContentLength = 0;

        HttpWebResponse response = (HttpWebResponse)httpWebRequest.GetResponse();
        StreamReader streamReader = new StreamReader(response.GetResponseStream());
        XDocument doc = XDocument.Load(streamReader);
    } 
```

我已经尝试了“[编辑案例](http://www.fogcreek.com/fogbugz/docs/70/topics/advanced/API.html)”下的所有说明，但没有帮助。事实上，我不知道什么是文件 1、文件 2 以及如何将它们发送到 FogBugz。

谁能帮我这个？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:55:22.147

File1 应该在您的 multipart/form-data 帖子的正文中指定（而不是作为查询字符串参数）。

您实际上必须指定文件中的所有字节。

[fogbugz.stackexchange.com](http://fogbugz.stackexchange.com/questions/10026/how-do-i-upload-file-attachments-using-the-xml-api-in-net-c-or-vb-net)上有一个答案，还有一个[C# FogBugz API 包装器](http://asp.net2.aspfaq.com/fogbugz-csharp-api-wrapper.html)可以为您处理所有部分。

您帖子正文中的表单部分看起来像

```
--sdfjdsjsdflk SOME BOUNDARY--
Content-Disposition: form-data; name="File1"; filename="foo.jpg"
Content-Transfer-Encoding: base64
Content-Type: image/png

slfkajdflksjflajfdj
sldfjsd;aljfds
these are actual data bytes from the foo.jpg file
slfkjdsfljds
sdflajsdfs 
```

或者您可以通过示例查看[指向 RFC 的这个问题。](https://stackoverflow.com/questions/4238809/any-example-of-multipart-form-data)

# javascript - 调查 Javascript 内存泄漏

> ID：15474591
> 
> 赞同：0
> 
> 时间：2013-03-18T10:29:24.317
> 
> 标签：javascript, memory-leaks, html5-canvas, game-engine

我最近遇到了我的 html5 画布游戏引擎的内存泄漏，该过程最终可能使用 5+ GB 内存。

我查看了 chrome 中的开发人员工具，并试图将其确定下来，但无济于事。

如何调查 HTML5 javascript 中的内存泄漏，尤其是在画布方面？

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:50:08.803

您几乎成功了：使用 Google Chrome 的分析工具。确保选择内存配置文件作为起点。

内存泄漏的最大原因是在闭包内——所以这是另一个值得关注的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T03:53:17.450

这是由 ubuntu、linux 下的 Chromium 中的一个错误引起的。

# java - 如何使用 TestNG 框架和 Apache POI 通过 WebDriver 使用 Java 在 Excel 中写入数据

> ID：15474598
> 
> 赞同：0
> 
> 时间：2013-03-18T10:29:36.843
> 
> 标签：java, excel, apache-poi, selenium-webdriver, testng

我想将用户名和密码存储在 Excel 中，无论我将使用 WebDriver 在任何应用程序中键入什么内容。我正在使用 TestNG 框架和 Apache POI 将数据写入 Excel。但我越来越`Null pointer exception`。请告诉我如何使用 Excel 使用 WebDriver。

```
public class Test {

    private static WebDriver driver;
    static String username="abc";
    static String password="abf123";

    public static void main(String args[]) {
        try {
            driver.get("any url");

            driver.findElement(By.xpath("//*[@id='txtUserName']")).sendKeys(username);

            driver.findElement(By.xpath("//*[@id='txtPwd']")).sendKeys(password);

            FileOutputStream fos = new FileOutputStream("Userpass.xls");

            HSSFWorkbook workbook = new HSSFWorkbook();

            HSSFSheet worksheet = workbook.createSheet("POI WorkSheet");

            HSSFRow row1 = worksheet.createRow((short) 0);

            HSSFCell cell1 = row1.createCell((short) 0);

            cell1.setCellValue(username);

            HSSFCell cell2 = row1.createCell((short) 1);

            cell2.setCellValue(password);

            workbook.write(fos);

            fos.close();

        } catch (FileNotFoundException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();
        }
    }
    @Test
    public void f() {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:54:07.403

替换代码中的以下行

```
HSSFRow row1 = worksheet.createRow((short) 0);
HSSFCell cell1 = row1.createCell((short) 0);
cell1.setCellValue(username);
HSSFCell cell2 = row1.createCell((short) 1);
cell2.setCellValue(password); 
```

和

```
HSSFRow row1 = worksheet.createRow(0);
row1.createCell(0).setCellValue(new HSSFRichTextString("username"));
row1.createCell(1).setCellValue(new HSSFRichTextString("password")); 
```

您将获得所需的输出。

# node.js - 如何在 node.js 中接收 socket.io 客户端事件？

> ID：15474602
> 
> 赞同：3
> 
> 时间：2013-03-18T10:29:52.977
> 
> 标签：node.js, mongodb, socket.io

在我的应用程序中，我使用带有 node.js 的 socket.io。在主应用程序文件中接收客户端事件工作正常。但是在其他 node.js 模块中接收事件对我不起作用。任何人都可以帮我解决这个问题。

客户端js文件

```
 var fullName=$("#fullName").val();
  var emailId=$("#emailId").val(); 
  var contactNo=$("#ContactNo").val();
  var msg=$("#message").val();
  var userInfo={fName:fullName,email:emailId,contactNumber:contactNo,message:msg};
  var socket = io.connect('http://localhost:8000');
  socket.emit('uploadResume',userInfo); 
```

app.js - 服务器端主文件

```
 var express = require('express')
               , http = require('http');

  var app = express();
  app.configure(function(){
     app.use(express.static(__dirname + '/public'));
  });
 var server = http.createServer(app);
 var io = require('socket.io').listen(server);
 server.listen(8000);

 exports.io=io;
 console.log('io object is set.');
 var mongodb = require('mongodb');
 var server = new mongodb.Server("localhost", 27017, {});

 new mongodb.Db('test', server, {w: 1}).open(function (error, client) {

    exports.client = client;
    console.log('client object is set.');

 }); 
```

通知.js

```
 console.log('Notification module is called');

var app=require('../server');
console.log('app module is ready to use.');
var ioObj=app.io;
var clientObj=app.client;

ioObj.sockets.on('connection', function (socket) {
socket.on('uploadResume', function (userInfo) {
 console.log('data is '+userInfo); 
 var collection = new mongodb.Collection(clientObj, 'test_collection');
  collection.insert(userInfo,{safe:true},function(err, objects) {
    if(!err){

     console.log('Data inserted successfully.');
    }
    if (err && err.message.indexOf('E11000 ') !== -1) {
      // this _id was already inserted in the database
    }
  });

   });
 }); 
```

控制台消息

```
 info  - socket.io started
   io object is set.
   client object is set.
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized g2Sx9h5FL9Gxzs3KiAcj
   debug - setting request GET /socket.io/1/websocket/g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - client authorized for 
   debug - websocket writing 1::
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj
   debug - emitting heartbeat for client g2Sx9h5FL9Gxzs3KiAcj
   debug - websocket writing 2::
   debug - set heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client g2Sx9h5FL9Gxzs3KiAcj
   debug - set heartbeat interval for client g2Sx9h5FL9Gxzs3KiAcj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:51:40.030

在您的主应用程序文件中，您必须包含该模块

应用程序.js

```
 var notification=require('./Notifications.js');  // module included
  var express = require('express'),
  http = require('http');

  var app = express();
  app.configure(function(){
     app.use(express.static(__dirname + '/public'));
  });
 var server = http.createServer(app);
 var io = require('socket.io').listen(server);
 server.listen(8000);

 exports.io=io;
 console.log('io object is set.');
 var mongodb = require('mongodb');
 var server = new mongodb.Server("localhost", 27017, {});

 new mongodb.Db('test', server, {w: 1}).open(function (error, client) {

    exports.client = client;
    console.log('client object is set.');

 }); 
```

因此，如果您不将模块文件包含到主 app.js 文件中，它将无法工作

# node.js - 我已经通过“npm install express”命令安装了 express。但仍然出现错误

> ID：15474608
> 
> 赞同：1
> 
> 时间：2013-03-18T10:30:01.930
> 
> 标签：node.js

我可以正常安装 npm 包，并且我已经通过“npm install express”命令安装了 express。这是正在尝试运行的 app.js 文件：

```
/* app.js */
var app = require('express').createServer();

app.get('/', function(req, res){
    res.send('hello world');
});

app.listen(3000); 
```

`c:\> node app.js`

这是错误：

```
node.js:63
    throw e;
    ^
Error: Cannot find module 'express'
    at loadModule (node.js:275:15)
    at require (node.js:411:14)
    at Object.<anonymous> (/home/node/app/app.js:1:73)
    at Module._compile (node.js:462:23)
    at Module._loadScriptSync (node.js:469:10)
    at Module.loadSync (node.js:338:12)
    at Object.runMain (node.js:522:24)
    at Array.<anonymous> (node.js:756:12)
    at EventEmitter._tickCallback (node.js:55:22)
    at node.js:773:9 
```

问题，我遵循的错误步骤是什么？

这是安装 express 后的输出：

```
C:\MYSite>npm install express
npm http GET https://registry.npmjs.org/express
npm http 200 https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/connect/2.7.2
npm http GET https://registry.npmjs.org/commander/0.6.1
npm http GET https://registry.npmjs.org/fresh/0.1.0
npm http GET https://registry.npmjs.org/range-parser/0.0.4
npm http GET https://registry.npmjs.org/methods/0.0.1
npm http GET https://registry.npmjs.org/cookie/0.0.5
npm http GET https://registry.npmjs.org/buffer-crc32/0.1.1
npm http GET https://registry.npmjs.org/debug
npm http GET https://registry.npmjs.org/cookie-signature/0.0.1
npm http GET https://registry.npmjs.org/mkdirp/0.3.3
npm http GET https://registry.npmjs.org/send/0.1.0
npm http 304 https://registry.npmjs.org/range-parser/0.0.4
npm http 304 https://registry.npmjs.org/methods/0.0.1
npm WARN package.json methods@0.0.1 No README.md file found!
npm http 304 https://registry.npmjs.org/fresh/0.1.0
npm http 200 https://registry.npmjs.org/commander/0.6.1
npm http GET https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
npm http 304 https://registry.npmjs.org/cookie/0.0.5
npm http 200 https://registry.npmjs.org/connect/2.7.2
npm http 304 https://registry.npmjs.org/buffer-crc32/0.1.1
npm http GET https://registry.npmjs.org/connect/-/connect-2.7.2.tgz
npm http 304 https://registry.npmjs.org/debug
npm http 200 https://registry.npmjs.org/cookie-signature/0.0.1
npm http GET https://registry.npmjs.org/cookie-signature/-/cookie-signature-0.0.1.tgz
npm http 200 https://registry.npmjs.org/mkdirp/0.3.3
npm http GET https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.3.tgz
npm http 304 https://registry.npmjs.org/send/0.1.0
npm http 200 https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
npm http 200 https://registry.npmjs.org/connect/-/connect-2.7.2.tgz
npm http 200 https://registry.npmjs.org/cookie-signature/-/cookie-signature-0.0.1.tgz
npm http 200 https://registry.npmjs.org/mkdirp/-/mkdirp-0.3.3.tgz
npm http GET https://registry.npmjs.org/mime/1.2.6
npm http GET https://registry.npmjs.org/pause/0.0.1
npm http GET https://registry.npmjs.org/formidable/1.0.11
npm http GET https://registry.npmjs.org/bytes/0.1.0
npm http GET https://registry.npmjs.org/qs/0.5.1
npm http 304 https://registry.npmjs.org/mime/1.2.6
npm http 304 https://registry.npmjs.org/bytes/0.1.0
npm http 304 https://registry.npmjs.org/pause/0.0.1
npm http 200 https://registry.npmjs.org/qs/0.5.1
npm http GET https://registry.npmjs.org/qs/-/qs-0.5.1.tgz
npm http 200 https://registry.npmjs.org/formidable/1.0.11
npm http GET https://registry.npmjs.org/formidable/-/formidable-1.0.11.tgz
npm http 200 https://registry.npmjs.org/qs/-/qs-0.5.1.tgz
npm http 200 https://registry.npmjs.org/formidable/-/formidable-1.0.11.tgz
express@3.1.0 node_modules\express
├── methods@0.0.1
├── fresh@0.1.0
├── buffer-crc32@0.1.1
├── cookie-signature@0.0.1
├── cookie@0.0.5
├── range-parser@0.0.4
├── commander@0.6.1
├── debug@0.7.2
├── mkdirp@0.3.3
├── send@0.1.0 (mime@1.2.6)
└── connect@2.7.2 (pause@0.0.1, bytes@0.1.0, formidable@1.0.11, qs@0.5.1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:37:27.440

您在本地安装了 express，而不是全局安装

> C:\MYSite>npm install express

所以你必须只从这个`MYSite`文件夹运行。但是您正在从不同的位置运行它。

> C:> 节点 app.js

因此它不断给出错误`Error: Cannot find module 'express'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T16:56:49.880

如果您使用 Homebrew 安装节点，即使使用全局安装，您仍然会遇到问题。

您可以通过执行以下操作来修复它：

```
brew uninstall node 
```

然后使用 nodejs.org 站点上的安装程序安装节点。

然后运行：

```
npm install -g express 
```

希望这可以帮助某人。

# php - 无法在循环中从 MySQL 表中删除多行

> ID：15474609
> 
> 赞同：0
> 
> 时间：2013-03-18T10:30:01.823
> 
> 标签：php, mysql, pdo, delete-row, corresponding-records

我正在尝试使用 php 的 PDO 对象从 mySQL 表中删除与一对条件匹配的所有行。我不知道为什么它不起作用：

```
//This deletes all comments for a given post;
//Querying database for existent comments on that post;
$this->query = $this->db->query(
"SELECT cid 
FROM comments
WHERE id = '$html_data->id' AND pid = '$html_data->pid'"
);
//Fetching results into an array;
$this->rows = $this->query->fetchAll(PDO::FETCH_ASSOC);
//Deleting each comment on that post;
foreach ($this->rows as $this->row) {
    $this->db->exec(
    "DELETE from comments 
    WHERE cid = '$this->row['cid']'"
    );
};
//Deleting the post itself;
$this->db->exec(
"DELETE from posts 
WHERE id = '$html_data->id' AND pid = '$html_data->pid'"
); 
```

`//Deleting the post itself`有效，但`foreach`循环内的部分由于某种原因不起作用。为了调试，我在循环中添加了以下内容：

```
echo "WHERE cid = '{$this->row['cid']}'"; 
```

它按预期返回：

```
WHERE cid = '1'
WHERE cid = '2' 
```

因此，正在获取的数据不是问题。我也试过

```
WHERE id = '$html_data->id' AND pid = '$html_data->pid' AND cid = '$this->row['cid']'" 
```

而不是只使用`cid`and 它也没有工作。回声它返回，如预期的那样：

```
WHERE id = '1' AND pid = '1' AND cid = '1'
WHERE id = '1' AND pid = '1' AND cid = '2' 
```

是的，我检查了`comments`表格，`id`并且`pid`我`cid`要删除的表格与正在回显的表格相匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:14:31.060

所以解决这个问题的更好的方法是使用准备好的语句并让变量远离查询。这样，您既可以解决此问题，也可以修复您现在遇到的安全问题（SQL 注入）......

这是您的代码转换为有效的准备语句：

```
$stmt= $this->db->prepare(
    "SELECT cid 
    FROM comments
    WHERE id = ? AND pid = ?"
);
$this->query = $stmt->execute(array($html_data->id, $html_data->pid));

$this->rows = $this->query->fetchAll(PDO::FETCH_ASSOC);

$deleteStmt = $this->db->prepare(
    "DELETE from comments 
    WHERE cid = ?"
);
foreach ($this->rows as $row) {
    $deleteStmt->execute(array($row['cid']));
};

//Deleting the post itself;
$stmt = $this->db->prepare(
    "DELETE FROM posts
    WHERE id = ? AND pid = ?"
);
$stmt->execute(array($html_data->id, $html_data->pid)); 
```

但是，您可以进一步清理它。处理这个问题的最好方法是使用外键。例如，让我们创建一个从评论表`pid`到帖子`id`字段的外键。

```
CREATE TABLE posts (
    id   INT,
    name VARCHAR(35),
    PRIMARY KEY (`id`)
) ENGINE = InnoDB;

CREATE TABLE comments (
    id   INT,
    pid  INT,
    name VARCHAR(35),
    PRIMARY KEY (`id`),
    CONSTRAINT `posts_id`
    FOREIGN KEY `posts_id` (`pid`)
    REFERENCES `posts` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE = InnoDB 
```

这里的美妙之处在于你的大代码块减少到这样：

```
$stmt = $this->db->prepare(
    "DELETE FROM posts
    WHERE id = ? AND pid = ?"
);
$stmt->execute(array($html_data->id, $html_data->pid)); 
```

当您删除评论时，约束（外键）将自动级联删除以删除评论（因为如果没有，则会有无效的约束）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:32:34.070

它应该是

```
$this->db->exec(
"DELETE from comments 
WHERE cid = '$this->row[cid]'"
); 
```

或者你也可以使用

```
$this->db->exec(
"DELETE from comments 
WHERE cid = '{$this->row['cid']}'"
); 
```

# php - Magento Adminhtml Grid 使用按客户过滤的 sales/order_item 集合

> ID：15474610
> 
> 赞同：0
> 
> 时间：2013-03-18T10:30:02.423
> 
> 标签：php, magento, magento-1.7, adminhtml

我的目标很简单。我有一个名为 Quotes 的模块，我设法让 Magento 在每次创建购物车时创建一个新的报价记录，方法是在“签出”报价时更改 is_active 列。所以我有一堆报价，每个报价都与客户相关，并且我有 sales/order_item 行，每个行都与报价相关。我在后端有一个页面，显示所有引号的网格。单击报价时，编辑页面有两个选项卡，一个带有显示报价详细信息的 Form.php。（客户姓名、日期等），然后我有另一个选项卡，其中应包含该报价中所有项目的网格。看起来很简单：

```
$this->addTab("items_section", array(
  "label" => Mage::helper("quote")->__("Quote Items"),
  "title" => Mage::helper("quote")->__("Quote Items"),
  "content" => $this->getLayout()->createBlock("quote/adminhtml_quotes_edit_tab_cart")->toHtml(),
)); 
```

然后在我的购物车块中，我有这个：

```
protected function _prepareCollection()
{
    $collection = Mage::getModel('sales/order_item')->getCollection();
    print_r($collection);
    $this->setCollection($collection);

    return parent::_prepareCollection();
} 
```

我什至对加载正确的集合（通过 order_id）不感兴趣，因为这里首先要解决一个问题：该`print_r`语句显示了我指定的集合，但将它传递给 $this->setCollection($collection) 给了我“不”找到的记录'呈现在网格中。在典型的 Magento 时尚中，没有错误等。我知道该模型应该根据需要查询数据库，但这似乎没有发生。我想是时候阅读 Mage::core 文件了，但你可以想象我对如此简单的任务如此复杂的挫败感，所以如果有人知道这里发生了什么可以帮助我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:27:03.373

我可能是错的，但您不能在销售订单项目的报价上设置集合（）。它必须填充销售/报价模型项目。

我不知道 $this 在 _prepareCollection() 中的范围是什么，但我假设因为它在购物车块上，所以它处理报价。

只是一个提示，您*可以*尝试这样做而不是 print_r($collection)...

```
echo "<pre>";
foreach ($collection as $item) {
    var_dump($item->debug());
} 
```

它几乎只提供重要信息而不是数据库结构。您还可以检查您的项目类型，并确保您为 setCollection 方法使用正确的模型。你也可以休息一下；如果您只想获得第一个项目等。调试 magento 对象可能很乏味，我发现这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:30:19.753

我们的首席开发人员设法帮助我让它工作。我们仍然不确定为什么，但这似乎有效

```
 protected function _prepareCollection()
{
    $quoteId = $this->getRequest()->getParam('id');

    $quote = Mage::getModel('sales/quote')->getCollection()->addFieldToFilter('entity_id', $quoteId);
    if ($quote->getFirstItem()->getId()) {
        $collection = $quote->getFirstItem()->getItemsCollection(false);
    }
$this->setCollection($collection);

    return parent::_prepareCollection();
} 
```

# awk - 很长的线路导致问题

> ID：15474613
> 
> 赞同：1
> 
> 时间：2013-03-18T10:30:17.393
> 
> 标签：awk

我对包含约 80,000 行的文件有疑问。这是一个23Gb的大文件。我已经设法使用以下命令将类似大小的文件分块：

```
awk '{fn = NR % 24;  print > ("file1_" fn)}' file1 
```

但是，此命令在这个问题文件上停止。问题文件确实有一个非常大的 30 亿字符行（其他文件中最长的行少于 10 亿），我猜这就是问题所在。

我想从文件中删除这条长线并继续，但事实证明这很困难。我虽然简单地使用以下内容就可以了

```
awk 'length < 1000000000' file1 > file2 
```

但是，这也在 3.5 小时后仍在运行。是否有一种快速浏览文件的方法，并且当一行中的字符数超过例如 10 亿时，它会停止计数并移至下一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:41:32.283

也许您可以尝试将两条 awk 行组合成一个命令，它可能会更快。因为，它只处理你的怪物文件一次。但是你必须测试。

```
awk '{fn = NR % 24;  if(length< 1000000000) print > ("file1_" fn)}' file1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:33:30.593

尝试使用 sed 删除超过一定字符数的行

```
# delete lines longer than 65 characters
sed  '/^.\{65\}/d' file 
```

您还可以使用两步法：

```
# use sed to output the line numbers containing lines
# longer than a certain number of characters
sed -n '/^.\{65\}/=' file 
```

然后使用该列表在 awk 中构建一个跳过列表，即如果`NR`等于这些数字中的任何一个，则跳过该行。

# css - 广告上的边框图像未在 Chrome 中显示

> ID：15474614
> 
> 赞同：0
> 
> 时间：2013-03-18T10:30:19.050
> 
> 标签：css, html, google-chrome

我想在我的头上设置一个渐变作为边框图像，以获得一个漂亮、平滑的边框，但它没有显示出来。设置经典边框有效，如果我将其设置为经典 div，则会显示我的渐变。

这是我的 HTML：

```
<table id="foo">
    <thead>
        <tr>
            <td>Header</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>link</td>
        </tr>
    </tbody>
</table> 
```

以及相关的 CSS：

```
#foo {
    border-collapse: collapse;
}

#foo thead {
    border-image: -webkit-linear-gradient(left, transparent,black, transparent) 0 0 1 0 stretch;
    border-bottom-width: 1px;
} 
```

我也尝试将边框设置为，`#foo thead tr`但它也不起作用。

# django - Django 模型和对象

> ID：15474615
> 
> 赞同：-2
> 
> 时间：2013-03-18T10:30:19.277
> 
> 标签：django, django-models, django-orm

是否可以定义您自己的查询，该查询将在调用 save 方法时执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:33:20.827

您可以简单地覆盖`save`对象的方法。请参阅此处的文档：[https](https://docs.djangoproject.com/en/1.5/ref/models/instances/#saving-objects) ://docs.djangoproject.com/en/1.5/ref/models/instances/#saving-objects 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:47:12.800

一旦您覆盖了模型的*保存*方法，您就可以执行原始 SQL 查询： [https ://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/)

# css - 错误类被 [type="text"] 选择器覆盖

> ID：15474617
> 
> 赞同：2
> 
> 时间：2013-03-18T10:30:29.870
> 
> 标签：css

我为我的**文本**输入使用自定义 css：

```
input[type="text"]{
    background-color: #f9f9f9;
} 
```

`error`如果使用 jQuery添加类验证失败，我想更改背景颜色 - 等等：

```
.error{
    background-color: #f9abab;
} 
```

问题是`input[type="text"]`选择器具有优先权，并且背景颜色保持不变。我可以在 Firebug / Inspect 元素中看到它。

是添加`!important`到`.error`唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:33:35.490

否：您可以在 CSS 声明中更加具体。

尝试

```
input[type="text"].error{
   //stuff
} 
```

有关更多信息，请参阅有关 CSS 优先级的[这篇文章](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

# android - Android和使用sqlite的两点之间的距离

> ID：15474621
> 
> 赞同：1
> 
> 时间：2013-03-18T10:30:39.157
> 
> 标签：android, sqlite, distance

我正在寻找计算两点之间距离的好解决方案。

我想按距离排序我的地理点。

我有：

```
Cursor c = database.rawQuery("SELECT name,latitude,longitude,((longitude-21.15)*(longitude-21.15) +(latitude-54.05)*(latitude-54.05)) AS len FROM Object ORDER BY len;", null); 
```

但这是错误的解决方案......距离是错误的......

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T08:16:07.273

您在这里遇到的问题是您正在组合：

*   GPS 坐标 (WGS84)，用于表示球体上的点。
*   毕达哥拉斯定理，需要一个二维直角坐标系来确定距离。

如果您追求准确性，这根本行不通！

以下是我使用过的一些选项。

**选项 1 - 使用大圆距**

此公式用于计算两个 GPS 坐标之间的距离（以米为单位）

Android 提供了一个函数[distanceBetween](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)作为 android.location.Location 类的一部分来帮助解决这个问题。

缺点是您必须从 SQLite 中提取所有点才能计算距离。

我还看到了一些混合动力车，例如：

*   将 WGS84 (GPS) 视为矩形
*   在您的数据库中指定一个区域以限制您在计算距离时提取的数据大小。

然后使用 distanceBetween 函数进一步过滤结果。

**选项 2 - 使用直角坐标系**

如果您的距离很小，那么您可以通过将数据库点存储在矩形 UTM 中来解决这个问题。

使用几乎相同的公式，但使用东距和北距，SQLite db 可用于提供最接近 UTM 点的 x 个点。一旦确定了这些点，就可以对 x 结果执行平方根函数以获得以米为单位的距离。

**嗯？**

使用 UTM 也有一些注意事项。它可能会帮助您查看[计算两组坐标之间的距离](http://support.groundspeak.com/index.php?pg=kb.page&id=211)

因此，您的解决方案最终取决于您的应用程序，并且是速度和准确性之间的折衷方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:36:08.627

您正在计算距离的*平方*。由于 SQLite 没有平方根函数，因此您需要在 Java 代码中进行计算。

如果您只需要按距离*排序*，那么您当前的代码就可以了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T11:32:08.733

您可以使用**android.location.Location**类的静态方法*distanceBetween 。*然后根据计算出的距离，您可以生成一些排序的对象集合，例如 SortedMap。

# python - 使用 PIL 裁剪图像的边框

> ID：15474628
> 
> 赞同：0
> 
> 时间：2013-03-18T10:30:52.577
> 
> 标签：python, python-imaging-library

如何使用 PIL 裁剪图像的边框？

从这样的图像
![开始](../Images/3cdae0fe797c2e861df780577c033a36.png)

我想做这个
![结果](../Images/8197b85662d9fd10ccc84d94d3279ec2.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:01:06.843

```
img = Image.open('your_wonderful_image.png')
nonwhite_positions = [(x,y) for x in range(img.size[0]) for y in range(img.size[1]) if img.getdata()[x+y*img.size[0]] != (255,255,255)]
rect = (min([x for x,y in nonwhite_positions]), min([y for x,y in nonwhite_positions]), max([x for x,y in nonwhite_positions]), max([y for x,y in nonwhite_positions]))
img.crop(rect).save('out.png') 
```

# zend-form - Zend - 输入过滤器获取随机名称

> ID：15474629
> 
> 赞同：0
> 
> 时间：2013-03-18T10:30:54.100
> 
> 标签：zend-form, zend-framework2

您好，我正在尝试带有输入文件的 ZF2 表单。

我有一个带有文件输入的表单，我想将随机化名称插入到我的数据库中。

如何返回随机名称？谢谢。

这是简单的表单类：

```
 class OrdineForm extends Formhttp://stackoverflow.com/questions/ask

public function __construct($name = null)
{

    parent::__construct('ordine');
    $this->setAttribute('method', 'post');
    $this->addElements();
    $this->addInputFilter();

}
public function addElements(){

    $this->add(array(
            'name' => 'pdf',
            'attributes' => array(
                    'type'  => 'text',
                    'disabled' =>'true',
            ),
            'options' => array(
                    'label' => 'PDF',
            ),
    ));

    // FILE INPUT 
    $file = new File('file');
    $file
    ->setLabel('PDF attach')
    ->setAttributes(array(
            'id' => 'file',

    ));
    $this->add($file);

    $this->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Add',
            'id' => 'submitbutton',
            'class' => 'btn btn-success'
        ),
    ));
}
public function addInputFilter()
{
    $inputFilter = new InputFilter\InputFilter();
    $fileInput= new FileInput('file');
    $fileInput->setRequired(false);
    $fileInput->getFilterChain()->attachByName(
            'filerenameupload',
            array(
                    'target'    => './public/tmpuploads/',
                    'randomize' => true,
                    "UseUploadname" => true,
            )
    );
    $inputFilter->add($fileInput);

    $this->setInputFilter($inputFilter);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:06:38.040

在您的控制器中验证表单后，您可以使用`$form->getData();`

应该有一个关键的“文件”，因为这就是您命名文件元素的名称。其中有一个键'tmp_name'。

这将是随机名称。

例如：

```
public function uploadfileAction()
{
    //get form and filter
    $form   = $this->getServiceLocator()->get('SomeModule\Form\UploadFileForm');
    $filter = $this->getServiceLocator()->get('SomeModule\Form\UploadFileFilter');
    $form->setInputFilter($filter->getInputFilter());

    if ($this->getRequest()->isPost()) {
        //merge files with post
        $post = array_merge_recursive(
            $this->getRequest()->getPost()->toArray(),
            $this->getRequest()->getFiles()->toArray()
        );

        //set data in form
        $form->setData($post);

        //check is valid- form data will now contain new name
        if ($form->isValid()) {
            var_dump($form->getData());
        }
    }
} 
```

生成的数组转储可能如下所示：

```
array(13) {
  ["file"]=>
  array(5) {
    ["name"]=>
    string(14) "some-pdf.pdf"
    ["type"]=>
    string(24) "application/pdf"
    ["tmp_name"]=>
    string(46) "/public/tmpuploads/new-randomized-name.pdf"
    ["error"]=>
    int(0)
    ["size"]=>
    int(651264)
  }
  ["submit"]=>
  string(6) "Submit"
  ["csrf"]=>
  string(32) "4df771bb2fb14e28992a408583745946"
} 
```

然后你可以这样做：

```
$formData = $form->getData();
$fileNewLocation = $formData['file']['tmp_name'];
//do what you want with $fileNewLocation 
```

# javascript - 如何在html中从列表中设置选定的值

> ID：15474637
> 
> 赞同：0
> 
> 时间：2013-03-18T10:31:18.890
> 
> 标签：javascript, jquery, html, ajax

```
<ul>
    <li class="first"><a href="#">Modify search</a>

    </li>
    <li><a href="#">For <span>Select</span><span style="float:right; padding-right:10px;">▼&lt;/span></a>

        <ul> <span><a href="#">Girlfriend</a></span>  <span><a href="#">Boyfriend</a></span>  <span><a href="#">Husband</a></span>  <span><a href="#">Wife</a></span> 
            <span class="cl"></span> <span><a href="#">Mother</a></span>  <span><a href="#">Father</a></span>  <span><a href="#">Daughter</a></span>  <span><a href="#">Son</a></span> 
                <span class="cl"></span> <span><a href="#">Friend (M)</a></span>  <span><a href="#">Friend (F)</a></span>  <span><a href="#">Colleague (M)</a></span>  <span><a href="#">Colleague (F)</a></span> 
                    <span class="cl"></span> <span><a href="#">Nephew</a></span>  <span><a href="#">Niece</a></span>  <span><a href="#">Aunt</a></span>  <span><a href="#">Uncle</a></span> 
                        <span class="cl"></span>
        </ul>
    </li>
</ul> 
```

我想要做的是每当我选择任何值时，它必须突出显示，并且应该显示在过滤器中。![](../Images/ec2b02ed1403b964123ab10980f9646d.png)

例如，如果我选择女朋友 For : select 应该看起来像 For : girl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:35:25.973

```
$('a').click(function(){

  var clicked_link = $(this).text() // will get the text 
  $(this).attr('some_attr') // will get the value of an attribute in the clicked a tag

alert(clicked_link);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:35:55.197

为 span 添加 id`<span id="this">Select</span>`

然后`getElementByI("this").innerHTML =`设置为你想要的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:37:01.483

让我猜猜“Select”文本有`id`“select_id”；

```
$('ul span').click(function(){

$("#select_id").html($(this).html);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:37:54.707

将`id`属性添加`getval`到要显示所选项目的范围。

```
<span id="getval" style="float:right; padding-right:10px;">&#x25BC;</span> 
```

**jQuery**

获取文本，`anchor`然后将其设置为您要显示的位置。

```
$(document).ready(function(){
   $("ul span a").click(function(){
      $("#getval").text($(this).text());
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:37:58.747

如果您可以为元素分配**ID会更容易...**

例如：

```
<a href="#">For <span id="select">Select</span>... 
```

还有第二个`ul`：

```
<ul id="list">... 
```

那么你需要这样的东西：

```
$('#list a').on('click', function() {
   var text = $(this).text(); //this take the text of the clicked text.
   $('#select').empty().text(text); //this assign the value.
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T10:38:02.470

像这样做

```
$(function(){
 $("a").click(function() {
    alert("look like for : "+$(this).text());// OR show this value in any particular DIV
    $(".displayDiv").text("look like for : "+$(this).text());
  });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T10:38:46.663

你应该只有`li`在 a`ul`而不是跨度。其他人是[不允许的。](http://www.w3.org/TR/html-markup/ul.html)

但是，您可能正在寻找的答案是：

```
$('ul li ul span').click(function(){

     $('ul li span').eq(2).text($(this).text());

} 
```

所有这一切肯定都需要使用一个类或 id。

# c# - NAudio 记录的字节数组的波头损坏

> ID：15474639
> 
> 赞同：0
> 
> 时间：2013-03-18T10:31:22.593
> 
> 标签：c#, naudio

我通过在类中使用 Wave 使用 NAudio API 录制声音，但是当我播放录制的字节数组时，它会给出错误“波头已损坏”。你能指出我的解决方案吗？

```
 waveInStream = new WaveIn();

            writer = new WaveFileWriter(@"C:\Users\Ali\Desktop\abc.wav", waveInStream.WaveFormat);

            waveInStream.DataAvailable += new EventHandler<WaveInEventArgs(waveInStream_DataAvailable);
            waveInStream.StartRecording();

 void waveInStream_DataAvailable(object sender, WaveInEventArgs e)
        {

            writer.WriteData(e.Buffer, 0, e.BytesRecorded);  
//I want to play e.buffer but it gives me error
        }

 public void play_it( MemoryStream s)
        {
//here i convert recorded byte into stream for playing

            using (var wfr = new WaveFileReader(s))
            using (WaveChannel32 wc = new WaveChannel32(wfr) { PadWithZeroes = false })
            using (var audioOutput = new DirectSoundOut())
            {
                audioOutput.Init(wc);

                audioOutput.Play();

                while (audioOutput.PlaybackState != PlaybackState.Stopped)
                {
                    Thread.Sleep(20);
                }

                audioOutput.Stop();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:03:46.563

这种方法根本行不通 - 录制的音频不是 WAV 文件，您不想每秒多次打开和关闭输出设备。您需要做的是创建一个`BufferedWaveProvider`并将您收到的音频`WaveIn`放入其中。`DirectSoundOut`然后创建or的单个实例`WaveOut`并使用`BufferedWaveProvider`.

# android - 自动完成文本视图在滚动项目时更改高度

> ID：15474642
> 
> 赞同：1
> 
> 时间：2013-03-18T10:31:40.197
> 
> 标签：android, autocompletetextview

我在使用自动完成 textview 时遇到问题。当我滚动自动完成文本视图的选项时，它看起来正在将其高度更改为全屏。我不希望这种情况发生。

这个数字会给你实际的想法。

**滚动前**

![在此处输入图像描述](../Images/b2a8e8634058dccfb512b979f467c31f.png)

**滚动后**

![在此处输入图像描述](../Images/a0eb9695f19efc9dbeb9ede9e6cd06d8.png)

# android - 替换片段：以前的视图在后台保持活动状态？

> ID：15474644
> 
> 赞同：3
> 
> 时间：2013-03-18T10:31:42.367
> 
> 标签：android, android-fragments, android-fragmentactivity, fragment-tab-host

我正在处理一个应用程序时，我必须在更改选项卡时更改一个选项卡的视图。我正在按照使用`OnTabChangedListener`. 我能够替换视图。但是当我将标签更改为其他标签时，以前的视图在后台仍然可以点击？为什么会这样？在前面，填充了新视图，但是如果我点击屏幕上先前视图控件所在的任何位置，则会执行该功能。我不知道问题出在哪里。请帮帮我。谢谢！

```
public class FragmentTabs extends FragmentActivity implements OnTabChangeListener {

private FragmentTabHost mTabHost;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.fragment_tabs);

    mTabHost = (FragmentTabHost) findViewById(android.R.id.tabhost);

    mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

    mTabHost.setOnTabChangedListener(this);

    if (Database.getSharedObject(getApplicationContext()).getAppSettings().getListView() == 1) {
        mTabHost.addTab(mTabHost.newTabSpec("home").setIndicator("", getResources().getDrawable(R.drawable.home_tab)), HomeFragment.class, null);

    } else {
        mTabHost.addTab(mTabHost.newTabSpec("home").setIndicator("", getResources().getDrawable(R.drawable.home_tab)), CalendarViewFragment.class, null);
    }
    mTabHost.addTab(mTabHost.newTabSpec("groups").setIndicator("", getResources().getDrawable(R.drawable.groups_tab)), GroupFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("templates").setIndicator("", getResources().getDrawable(R.drawable.templates_tab)), TemplateFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("settings").setIndicator("", getResource
    mTabHost.getTabWidget().getChildAt(0).getLayoutParams().height = height;
    mTabHost.getTabWidget().getChildAt(1).getLayoutParams().height = height;
    mTabHost.getTabWidget().getChildAt(2).getLayoutParams().height = height;
    mTabHost.getTabWidget().getChildAt(3).getLayoutParams().height = height;
    // Database.getSharedObject(getApplicationContext());

    mTabHost.setCurrentTab(0);
}

@Override
protected void onResume() {
    super.onResume();

}

@Override
public void onTabChanged(String arg0) {

    mTabHost.getCurrentTabView().invalidate();

    if (mTabHost.getCurrentTab() == 0) {
        if (Database.getSharedObject(getApplicationContext()).getAppSettings().getListView() == 1) {

            HomeFragment homeFragment = new HomeFragment();
            mTabHost.getCurrentTabView().invalidate();
            getSupportFragmentManager().beginTransaction().replace(R.id.realtabcontent, homeFragment).addToBackStack(null).commit();
        } else {

            CalendarViewFragment calendarViewFragment = new CalendarViewFragment();
            mTabHost.getCurrentTabView().invalidate();
            getSupportFragmentManager().beginTransaction().replace(R.id.realtabcontent, calendarViewFragment).addToBackStack(null).commit();

        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:53:42.643

添加`android:clickable="true"`到新选项卡的根布局。它将防止点击事件通过后面的布局传递。

# crystal-reports - Crystal Reports：表连接中的表达式

> ID：15474646
> 
> 赞同：0
> 
> 时间：2013-03-18T10:31:55.930
> 
> 标签：crystal-reports

是否可以通过使用不简单且通常的字段 A = 字段 B 而是使用更复杂的方法来连接 Crystal Records 中的表：

```
select * from table1 inner join table2
on table1.A=2*table2.B 
```

或者

```
select * from table1 inner join table2
on ASCII(table1.A)=ASCII(table2.B) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:03:52.137

在 Database Expert 中使用单个命令而不是表。您将能够使用更复杂的 SQL。

# c# - C# 中的增量拼图

> ID：15474648
> 
> 赞同：-3
> 
> 时间：2013-03-18T10:32:02.323
> 
> 标签：c#

在比赛中，您使用以下策略下注。每当您输掉一个赌注时，下一轮赌注的价值就会翻倍。每当您获胜时，下一轮的赌注将是一美元。您通过下注一美元开始这一轮。

例如，如果您以 20 美元开始，并且您在第一轮中赢得赌注，在接下来的两轮中输掉赌注，然后在第四轮中赢得赌注，您最终会得到 20+1-1-2 +4 = 22 美元。

您应该完成函数 , `getFinalAmount`，它有两个参数：

1.  第一个参数是一个整数`initialAmount`，它是我们开始投注时的初始金额。
2.  第二个参数是一个字符串`betResults`。结果的第 i 个字符将是“W”（赢）或“L”（输），表示第 i 轮的结果。您的函数应该返回您在所有回合结束后将拥有的金额。

如果在某个时候您的账户中没有足够的钱来支付赌注的价值，您必须停止并返还您当时的金额。

我试过这段代码但失败了：

```
var amountInHand = 15;
var possiblities = "LLLWLLLL";

static int Calculate(int amountInHand, string possibles)
{
    var lastBet = 1;

    foreach (char c in possiblities)
    {
        if (c == 'W')
        {
            amountInHand = amountInHand + 1;
        }
        else if (c == 'L')
        {

            var loss = 0;
            if (lastBet == 1)
            {
                loss = lastBet;
            }
            else if (lastBet > 1)
            {
                loss = lastBet * 2;
            }
            amountInHand = amountInHand - loss;
            lastBet++;
        }
    }
    return amountInHand;
} 
```

**预期产出**

```
1st round - Loss: 15-1 = 14
2nd round - Loss: 14-2 = 12 (Bet doubles)
3rd round - Loss: 12-4 = 8
4th round - Win: 8 + 8 = 16
5th round - Loss:16-1 = 15 (Since the previous bet was a win, this bet has a value of 1 dollar)
6th round - Loss: 15-2 = 13
7th round - Loss: 13-4 = 9
8th round - Loss: 9-8 = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:48:14.717

这是RB给出的正确答案，但不知道他为什么删除。

```
 var amountInHand = 15;

        var possiblities = "LLLWLLLL";
        var lastBet = 1;

        foreach (char c in possiblities)
        {
            if (c == 'W')
            {
                amountInHand = amountInHand + lastBet;
                lastBet = 1;
            }
            else if (c == 'L')
            {
                amountInHand = amountInHand - lastBet;
                lastBet = lastBet * 2;
            }
            //handle running out of money
            if (lastBet > amountInHand) return amountInHand;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T13:59:44.327

我写了一篇关于这个问题的[博客文章](http://www.smokingcode.com/2014/04/solving-programming-puzzle-with-lambda.html)和一个[代码高尔夫。](https://codegolf.stackexchange.com/questions/26236/incremental-puzzle-in-c)我的回答是这样的，而且确实有效……：

```
return possibilities.Aggregate(new{b=1,c=amountInHand,x=1},(l,o)=>l.x<0?l:o=='W'?new{b=1,c=l.c+l.b,x=1}:new{b=l.b*2,c=l.c-l.b,x=(l.c-l.b)-(l.b*2)}).c; 
```

未打高尔夫球：

```
private static int getFinalAmount(string q, int w)
{
    return possibilities.Aggregate(new { b = 1, c = amountInHand, x = false }, //initial seed gets the flag for cancel set to false
                    (l, o) =>
        l.x     //if our cancel flag is set, 
            ? l      //just return the same result
            : o == 'W'   //if the outcome was a win
                        //do the math and now also set a cancel flag to false (if we won, we can make our next bet for sure)
                ? new { b = 1, c = l.c + l.b, x = false }
                        //do our math again, but this time the cancel flag is tricky.  
                : new { b = l.b * 2, c = l.c - l.b,
                                //we cancel if our new amount will be less than our new bet.  
                                //Note, we can't use the new values that we just set in the same section - 
                                //they're not available yet so we have duplicate math here.
                            x = (l.c - l.b) < (l.b * 2) })
                    .c;   //all the function returns is the current amount
} 
```

# linux - Unix：源和导出有什么区别？

> ID：15474650
> 
> 赞同：38
> 
> 时间：2013-03-18T10:32:08.933
> 
> 标签：linux, unix

我正在编写一个 shell 脚本，以读取具有 key=value 对的文件并将这些变量设置为环境变量。但我有一个疑问，如果我`source file.txt`将在该文件中定义的变量设置为环境变量，或者我应该逐行读取文件并使用导出命令设置它？

在这种情况下，源命令与导出不同吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-18T11:13:58.113

当您`source`创建文件时，将设置分配，但除非`allexport`设置了选项，否则不会导出变量。如果要导出所有变量，则使用文件`allexport`和`source`文件比读取文件和`export`显式使用要简单得多。换句话说，你应该这样做：

```
set -a
. file.txt 
```

（我更喜欢`.`它，因为它比 更便携`source`，但`source`在 中工作得很好`bash`。）

请注意，导出变量不会使其成为环境变量。它只是使它成为任何子shell中的环境变量。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2020-06-28T18:17:31.533

# `source`( `.`) vs `export`（最后还有一些文件锁 [ `flock`] 的东西）：

## 简而言之：

1.  `source some_script.sh`, 或 POSIX 兼容的等价物 ,`. some_script.sh`从其他脚本*中引入变量，而*
2.  `export my_var="something"` *将变量推送到*从当前脚本/进程调用/启动的其他脚本/进程。

在 Linux shell 脚本中使用`source some_script.sh`or`. some_script.sh`有点像`import some_module`在 Python、`#include <some_header_file.h>`C 或 C++ 中使用。**它从源代码中引入变量。**

使用`export some_var="something"`有点像在本地设置该变量，因此它可用于当前脚本或进程的其余部分，然后**还将**其传递给您从此时起可能调用的任何和所有子脚本或进程。

## 更多细节：

所以这：

```
# export `some_var` so that it is set and available in the current script/process,
# as well as in all sub-scripts or processes which are called from the
# current script/process
export some_var="something"
# call other scripts/processes, passing in `some_var` to them automatically
# since it was just exported above! 
script1.sh  # this script now gets direct access to `some_var`
script2.sh  # as does this one
script3.sh  # and this one 
```

就*好像*你已经这样做了：

```
# set this variable for the current script/process only
some_var="something" 
# call other scripts/processes, passing in `some_var` to them **manually**
# so they can use it too 
some_var="something" script1.sh  # manually pass in `some_var` to this script
some_var="something" script2.sh  # manually pass in `some_var` to this script
some_var="something" script3.sh  # manually pass in `some_var` to this script 
```

除了上面的第一个版本，我们调用的地方`export some_var="something"`实际上是递归地将变量传递或导出到子进程，所以如果我们`script1.sh`从当前脚本/进程内部调用，那么`script1.sh`将从当前脚本中获取导出的变量，如果`script1.sh`调用`script5.sh`, 和`script5.sh`调用`script10.sh`, 那么这两个脚本也将自动获取导出的变量。这*与上面的手动情况相反*，只有那些在调用脚本时使用手动设置的变量显式调用的脚本才能获取它们，因此子脚本不会自动从它们的调用脚本中获取任何变量！

## 如何“取消导出”变量：

请注意，一旦您导出了一个变量，调用`unset`它将“取消导出它”，如下所示：

```
# set and export `some_var` so that sub-processes will receive it
export some_var="something"
script1.sh  # this script automatically receives `some_var`

# unset and un-export `some_var` so that sub-processes will no longer receive it
unset some_var
script1.sh  # this script does NOT automatically receive `some_var` 
```

# 总之：

1.  `source`或`.` *进口*。
2.  `export` *出口*。
3.  `unset` *不出口*。

# 例子：

创建此脚本：

**source_and_export.sh**：

```
#!/bin/bash

echo "var1 = $var1"
var2="world" 
```

然后将其标记为可执行：

```
chmod +x source_and_export.sh 
```

现在，我在终端上运行一些命令来测试`source`( `.`) 和`export`使用此脚本的命令。在以开头的行之后输入您看到的命令`$`（不包括注释）。其他行是输出。按顺序运行命令，一次一个命令：

```
$ echo "$var1"              # var1 contains nothing locally

$ var1="hello"              # set var1 to something in the current process only
$ ./source_and_export.sh    # call a sub-process
var1 =                      # the sub-process can't see what I just set var1 to
$ export var1               # **export** var1 so sub-processes will receive it
$ ./source_and_export.sh    # call a sub-process
var1 = hello                # now the sub-process sees what I previously set var1 to
$ echo "$var1 $var2"        # but I can't see var2 from the subprocess/subscript
hello 
$ . ./source_and_export.sh  # **source** the sub-script to _import_ its var2 into the current process
var1 = hello
$ echo "$var1 $var2"        # now I CAN see what the subprocess set var2 to because I **sourced it!**
hello world                 # BOTH var1 from the current process and var2 from the sub-process print in the current process!
$ unset var1                # unexport (`unset`) var1
$ echo "$var1"              # var1 is now NOT set in the current process
$ ./source_and_export.sh    # and the sub-process doesn't receive it either
var1 = 
$ var1="hey"                # set var1 again in the current process
$ . ./source_and_export.sh  # if I **source** the script, it runs in the current process, so it CAN see var1 from the current process!
var1 = hey                  # notice it prints
$ ./source_and_export.sh    # but if I run the script as a sub-process, it can NOT see var1 now because it was `unset` (unexported)
var1 =                      #   above and has NOT been `export`ed again since then!
$ 
```

# 使用文件作为进程之间的全局变量

有时，特别是在编写脚本来启动程序和事物时，我遇到了一些`export`似乎无法正常工作的情况。在这些情况下，有时必须求助于*使用文件本身作为全局变量来将信息从一个程序传递到另一个程序*。这是如何做到的。在此示例中，文件“~/temp/.do_something”的存在用作进程间布尔变量：

```
# In program A, if the file "~/temp/.do_something" does NOT exist, 
# then create it
mkdir -p ~/temp
if [ ! -f ~/temp/.do_something ]; then
    touch ~/temp/.do_something  # create the file
fi

# In program B, check to see if the file exists, and act accordingly

mkdir -p ~/temp
DO_SOMETHING="false"
if [ -f ~/temp/.do_something ]; then
    DO_SOMETHING="true"
fi

if [ "$DO_SOMETHING" == "true" ] && [ "$SOME_OTHER_VAR" == "whatever" ]; then 
    # remove this global file "variable" so we don't act on it again
    # until "program A" is called again and re-creates the file
    rm ~/temp/.do_something 
    do_something
else
    do_something_else
fi 
```

如上所示，简单地检查文件*是否存在对于在程序和进程之间全局传递布尔条件非常有用。*但是，如果您需要传递更复杂的变量，例如字符串或数字，您可能需要通过*将这些值写入文件*来执行此操作。在这种情况下，您应该使用*文件锁定*功能`flock`，以正确确保进程间同步。它是一种进程安全（即：“进程间”）互斥体原语。你可以在这里读到它：

1.  shell 脚本`flock`命令：[https](https://man7.org/linux/man-pages/man1/flock.1.html) ://man7.org/linux/man-pages/man1/flock.1.html 。另见`man flock`或`man 1 flock`。
2.  Linux 库 C 命令：[https](https://man7.org/linux/man-pages/man2/flock.2.html) ://man7.org/linux/man-pages/man2/flock.2.html 。另请参阅`man 2 flock`。你必须`#include <sys/file.h>`在你的 C 文件中使用这个函数。

# 参考：

1.  [https://askubuntu.com/questions/862236/source-vs-export-vs-export-ld-library-path/862256#862256](https://askubuntu.com/questions/862236/source-vs-export-vs-export-ld-library-path/862256#862256)
2.  我自己的实验和测试
3.  我将把上面的例子添加到我在 GitHub 上的项目中，在`bash`文件夹下：[https ://github.com/ElectricRCAAircraftGuy/eRCaGuy_hello_world](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world)

# jquery - 是否可以在 jqgrid 的底部添加超链接？

> ID：15474652
> 
> 赞同：0
> 
> 时间：2013-03-18T10:32:18.893
> 
> 标签：jquery, asp.net, jqgrid, hyperlink

![这就是我的网格的样子](../Images/feb66e171d62927a74c0772a9f392115.png)我有一个 JQgrid，它只包含一个包含一些 4 个值的列...我需要在这 4 个值之后添加一个常量超链接，它与单元格中的值无关。它不应该与列组合...相反，它应该在列下方的 JQgrid 内显示为单独的超链接。如何实现这一点？

这是我的代码：

ASP:

```
<table id="UsersGrid" width = "750px">

     </table> 
```

JS：

```
$(function () {
            $("#UsersGrid").jqGrid({

                datatype: function (pdata) { getData(pdata); },
                colNames: ['CampaignName'],
                colModel: [
                        { name: 'campaign_name', index: 'CampaignName', width: 750},
                    ],
                    hidegrid: false,
                caption: 'Recent Campaigns'

            });
});

 function getData(pData) {
            var userid = $("#userId").val();
            var postData = {};
            postData.userId = userid;

            $.ajax({
                type: "GET",
                url: "/iSpaceWeb/CampaignService.svc/GetRecentCampaigns",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: postData,
                success: function (data) {
                    ReceivedClientData(JSON.parse(data));
                },
                error: function (data, textStatus) {
                    alert('An error has occured retrieving data!');
                }
            });
        }

        function ReceivedClientData(data) {
            var thegrid = $("#UsersGrid");
            for (var i = 0; i < data.length; i++) {
                thegrid.jqGrid('addRowData', i, data[i]);
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:37:35.920

您可以添加`footerrow: true`一个包含页脚行的 jqGrid 选项。要填充该行，您可以使用`footerData`：

```
$("#UsersGrid").jqGrid("footerData", "set", {
    campaign_name: "<a href='http://www.google.com'>Google</a>"
}, false); 
```

此外，我不建议您使用`datatype`as 函数和用于`addRowData`填充数据。这是非常糟糕的风格。取而代之的是，您可以使用和 来使用和`datatype: "json"`设置 Ajax 请求的其他选项。`ajaxGridOptions: { contentType: "application/json; charset=utf-8" }``serializeGridData`

`JSON.parse(data)`里面`success`的呼唤看起来很**可疑**`$.ajax`。我想您*手动*将返回的对象转换为 JSON 字符串。这是错的。您应该返回*对象*，WCF 运行时会将返回的数据 * 自动 * 转换为 JSON 字符串。您当前的代码对 JSON 进行**了两次**序列化，因此您还必须解析服务器响应两次：一次将通过 have 解析，另一次通过显式调用解析它。您应该修复服务器代码中的问题，并在客户端调用不需要的调用后将其删除。`dataType: "json"`**`CampaignService.svc/GetRecentCampaigns` ****`$.ajax``dataType: "json"``JSON.parse(data)``JSON.parse(data)`******

# c# - 如何防止 datagridview 为每个选定的行触发 UserDeletingRow-event？

> ID：15474658
> 
> 赞同：1
> 
> 时间：2013-03-18T10:32:27.447
> 
> 标签：c#, winforms, data-binding, datagridview, event-handling

在我已经消耗了第一行之后，如何阻止`DataGridView`控件触发每个选定行的事件？`UserDeletingRow`

这个网格绑定到我的 wcf-webservice 中的对象，我只想对所有应该删除的对象执行一次 delete 方法。

此事件处理程序为每个选定的行触发，它也总是触发“你真的要删除吗”-messageboxes：

```
private void Grid_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
{
    switch (this.Type)
    {
        case AdminType.Channel:
            List<Channel> channels = GrdChannel.SelectedRows.Cast<DataGridViewRow>()
              .Select(row => (Channel)row.DataBoundItem).ToList();
            e.Cancel = !Delete_Channels(channels);
            break;
        // other types ...
        default:
            break;
    }
} 
```

该方法在确认后调用webservice：

```
private bool Delete_Channels(List<Channel> channels)
{
    var msg = string.Format("Do you really want to delete {0}?", channels.Count == 1 ? "this channel" : "these channels");
    var title = channels.Count == 1 ? "Delete channel" : "Delete channels";
    bool yes = MessageBox.Show(msg, title, MessageBoxButtons.YesNo) == System.Windows.Forms.DialogResult.Yes;
    if (yes)
    {
        using (var db = new ERP_ServiceClient())
            db.DeleteChannels(channels, this.IdUser);
        string message = string.Format("{0} deleted successfully: {1}"
                                      , channels.Count == 1 ? "Channel" : "Channels"
                                      , string.Join(",", channels.Select(p => p.Name)));
        channelBindingSource.Remove(channels);
        Main.ShowStatusMessage(message);
    }
    return yes;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:25:53.607

好的，显然没有更好的方法（就可读性而言），所以我实施了 Tigrans 建议，在事件处理程序中使用计数变量，并且仅在最后一个选定行触发此事件后才开始删除。

这是解决方法：

```
private int _deleteCount = 0;
private bool _deleting = false;
private bool _reallyDelete = false;
private IEnumerable<object> _deleteEntities = null;

private void Grid_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
{
    DataGridView grid = (DataGridView)sender;

    if (!_deleting)
    {
        _deleting = true;
        _deleteCount = grid.SelectedRows.Count;
        _deleteEntities = grid.SelectedRows.Cast<DataGridViewRow>().Select(r => r.DataBoundItem).ToList();
        string msg = "";
        string title = "";

        switch (this.Type)
        {
            case AdminType.Channel:
                msg = string.Format("Do you really want to delete {0}?", _deleteCount == 1 ? "this channel" : "these channels");
                title = _deleteCount == 1 ? "Delete channel" : "Delete channels";
                break;
            // other types ...
            default:
                break;
        }
        _reallyDelete = MessageBox.Show(msg, title, MessageBoxButtons.YesNo) == System.Windows.Forms.DialogResult.Yes;
    }

    e.Cancel = !_reallyDelete;

    // wait until all events are triggered before starting to delete
    if (--_deleteCount == 0)
    {
        switch (this.Type)
        {
            case AdminType.Channel:
                List<Channel> channels = _deleteEntities.Cast<Channel>().ToList();
                Delete_Channels(channels);
                break;
            // other types ...
            default:
                break;
        }
        _deleting = false;
        _reallyDelete = false;
        _deleteEntities = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T23:54:59.740

使用此事件 key_Down 替换 UserDeletingRow 的事件

if ( e.KeyValue == 46 ) // 删除键

{ e.Handled = MessageBox.Show("你真的要删除选中的行吗", "Confirm", MessageBoxButtons.OKCancel, MessageBoxIcon.Question ) != DialogResult.OK; }

# php - 由于权限，PHP Qmail管道到脚本不起作用？

> ID：15474660
> 
> 赞同：1
> 
> 时间：2013-03-18T10:32:29.383
> 
> 标签：php, email, piping, qmail

我已将 Qmail 设置为通过管道传输到特定电子邮件地址的脚本，该脚本正在运行；但是，部分脚本会创建一个不起作用的文件。

它尝试写入的文件夹上的组`apache`具有写入权限 (775)。我已添加`popuser`到 apache 组，由`id popuser`. 根据以下信息，这可能是不必要的。（我曾尝试让 apache 成为主要/有效组和次要组）

我在 PHP 脚本中使用了`get_current_uid()`, `getmyuid()`, :`getmygid()``exec("whoami")`

`get_current_uid() = [file/folder OWNER] (we'll call him Bob, he is a user not a group)`

`getmyuid() = Bob`

`getmygid() = Bob`

`exec("whoami") = [blank]`

如果我将要写入的目录设置为 777，则一切正常 - 暗示权限是原因。在这种情况下，这些文件是拥有的，并且具有一组`popuser`（不是上面的 uid/gid 位的结果）。至少对我来说，这意味着当前用户实际上是`popuser`而不是`Bob`.

结果，我可以 chmod 到 0644，但不能 chown/chgrp（我需要 apache 作为组，因为其他地方的另一个 UI 允许管理文件）。

为了不必使目录世界可写，我`chmod('/path/to/dir', 0777);`在创建文件之前和`chmod('/path/to/dir', 0775);`之后都插入了一个，但这显然`popuser`也在运行，因为它失败了。

简而言之，我需要做的是在`Bob`/ `apache`（所有者/组）具有使用 qmail 的写权限的目录中创建一个文件，该文件说它运行为`Bob`，但实际上运行为`popuser`.

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T17:59:29.073

我不确定我是否完全遵循你所说的。但是，可以将传入的邮件通过管道传送到 qmail 到在任何用户目录中运行的脚本，并让该脚本创建一个文件。

如果您还没有这样做，请在 /var/qmail/control/rcphosts 中添加一行，告诉 qmail 它应该充当您域的 MX。

在 /var/qmail/control/virtualdomains 中，添加这样的一行来告诉 qmail 为该域将邮件路由到哪个用户帐户： domain.tld:username

在用户目录中创建一个 .qmail-default 文件，其中包含指向要将邮件路由到的脚本的管道： | /路径/到/脚本

重启qmail。

您需要为脚本上的所有人授予执行权限。然后，当收到一封电子邮件时，该脚本应该能够创建新文件。

# c# - 根据修订号获取内容文件

> ID：15474669
> 
> 赞同：0
> 
> 时间：2013-03-18T10:32:53.613
> 
> 标签：c#, perforce

我必须在所有内容更改之后寻找文件之间的差异，所以当它们具有相同的路径和目录时我如何读取和获取内容我必须使用它来实现一个实用程序来从代码生成统计信息

```
 IList<FileSpec> filesToFind = new List<FileSpec>();
filesToFind.Add( new FileSpec(FileSpec.DepotSpec(dpath).DepotPath, Revision.None));
string[] files = new string[1];
files[0] = dpath;
P4Command command = new P4Command(ps, "where", true, files);
Options opts = new Options();
string v1="", v2="", v3="";  
P4CommandResult results = command.Run(opts);
TaggedObjectList list = (results.TaggedOutput);
foreach (TaggedObject obj in list)
{
    Console.Out.WriteLine("v1=" + v1 + "hhhhhhhhh1");
    int i = 0; string v="";
    foreach (String s in obj.Keys)
    {
        String value = "n/a";
        obj.TryGetValue(s, out value);
        if (obj.Keys.ElementAt(i).Equals("depotFile"))
            v1 = value;
        if (obj.Keys.ElementAt(i).Equals("clientFile"))
            v2 = value;
        if (obj.Keys.ElementAt(i).Equals("path"))
            v3 = value;
        Console.Out.WriteLine(s + " = " + value);

        i++;
    }

    String path = v3;

    if (path==null)
    {
        Console.WriteLine("Can't' find file, {0}", path);
    }
    else
    {
        string extension = Path.GetExtension(path);
        if (extension!=null && !("".Equals(extension)))
        {
            Console.WriteLine("Processing solution file, {0}", path);

            FileInfo fi = new FileInfo(path);
            using (StreamReader sr = new StreamReader(path, true))
            {
                Encoding encode = sr.CurrentEncoding;

                string line = null;
                while ((line = sr.ReadLine()) != null)
                {
                    while (((line = sr.ReadLine()) != null) && (line.Contains("EndGlobalSection") == false))
                    {
                        Console.WriteLine(line);
                    }
                }
            }
        }
    }
} 
```

例如，当文件被更改六次时，文件之间的差异有多大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:20:03.933

你可以使用 p4 注释

```
 GetFileAnnotationsCmdOptions gfacmo = new GetFileAnnotationsCmdOptions(GetFileAnnotationsCmdFlags.AllResults, k); 
```

# android - KSOAP 和 Web 服务器通信 (PropertyInfo)

> ID：15474674
> 
> 赞同：2
> 
> 时间：2013-03-18T10:33:12.133
> 
> 标签：android, weblogic, ksoap, propertyinfo

所以我正在开发一个应该连接到网络服务的 Android 应用程序。此连接工作正常。我已经使用返回“Hello Christian”的简单方法对其进行了测试。这在应用程序中显示正确。如果我尝试使用参数（名称）执行此操作，它会返回“Hello null”。

从技术上讲，我正在使用 Android 4.2.2 和 KSOAP 2.6.5。Web 服务在 Oracle WebLogic v12 上运行。按照我的源代码：

```
private final String NAMESPACE_Local = "http://test.com/";
private final String URL_Local = "http://168.185.226.69:7001/neuesProjekt/neuerWebServiceService";
private final String SOAP_ACTION_Local = "Hello_Action_Name";
    private final String METHOD_NAME_Local = "helloname";

    private final String URL_Local = "http://168.185.226.21:7001/myTest/myTestWebServiceService";
  private final String SOAP_ACTION_Local = "Hello_Action_Extend";
   private final String METHOD_NAME_Local = "hello_extend";

        public void LocalServer(View view)
        {
            TextView text = (TextView) findViewById(R.id.update_text);

            SoapObject request = new SoapObject(NAMESPACE_Local, METHOD_NAME_Local);
    //      request.addProperty("name", "Christian");

    //      String name = "Christian";
    //      
    //      PropertyInfo nameProp =new PropertyInfo();
    //        nameProp.name = "name";
    //        nameProp.type = String.class;
    //        nameProp.namespace = NAMESPACE_Local;
    //        nameProp.setValue(name);
    //        request.addProperty(nameProp);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_Local);

            try {
                androidHttpTransport.call(SOAP_ACTION_Local, envelope);
                SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                Log.i("myApp", response.toString());

            text.setText(response.toString());

        } catch (Exception e) {
            Toast.makeText(this,"Device or service offline",Toast.LENGTH_LONG).show();
        }
    } 
```

我尝试以两种方式添加 propertyInfo。首先使用简单的 request.addProperty 和创建 PropertyInfo 并在之后添加它的漫长过程。两种方式都行不通。但是，当我使用某些教程中的服务器（例如摄氏度到华氏度）尝试它时，它可以工作并返回正确的答案。

这里是来自网络服务器的“代码”：

```
package com.test;

import javax.jws.*;

@WebService
public class myTestWebService {

    @WebMethod(action="Hello_Action")
    public String hello() {
        return "hello";
    }

    @WebMethod(action="Hello_Action_Extend")
    public String hello_extend(String name)
    {
        return "hello "+name;
    }
} 
```

遵循 WSDL 文件以防它有助于解决我的问题：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2.6hudson-86  svn-revision#12773\. -->
<definitions targetNamespace="http://test.com/" name="myTestWebServiceService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:tns="http://test.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://test.com/" schemaLocation="myTestWebServiceService_schema1.xsd"/>
    </xsd:schema>
  </types>
  <message name="hello">
    <part name="parameters" element="tns:hello"/>
  </message>
  <message name="helloResponse">
    <part name="parameters" element="tns:helloResponse"/>
  </message>
  <portType name="myTestWebService">
    <operation name="hello">
      <input wsam:Action="Hello_Action" message="tns:hello"/>
      <output wsam:Action="http://test.com/myTestWebService/helloResponse" message="tns:helloResponse"/>
    </operation>
  </portType>
  <binding name="myTestWebServicePortBinding" type="tns:myTestWebService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="hello">
      <soap:operation soapAction="Hello_Action"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="myTestWebServiceService">
    <port name="myTestWebServicePort" binding="tns:myTestWebServicePortBinding">
      <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
    </port>
  </service>
</definitions> 
```

所以我希望你们中的一个可以帮助我，因为我完全不知道该怎么做。亲切的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T15:55:10.077

我对此并不擅长，事实上，我的 Web 服务仅在本周才能正常工作。

尝试

```
envelope.dotNet = true;
String name = "Christian";
request.addProperty("name", name); 
```

或者

```
envelope.dotNet = true;
PropertyInfo nameProp =new PropertyInfo();
nameProp.setName("name");
nameProp.setType(String.class);
nameProp.setValue(name);
request.addProperty(nameProp); 
```

我希望这可以为您解决

# php - 将海量数据插入Mysql数据库的最快方法

> ID：15474675
> 
> 赞同：5
> 
> 时间：2013-03-18T10:33:17.493
> 
> 标签：php, mysql

我实际上有一个包含 100,000 条记录的列表，我想将它们插入 MySQL 数据库。

我试图用`foreach`简单的方式插入它们，`INSERT INTO`但是插入甚至 100 行都需要很多时间。像 1 秒 / 行。

有什么方法可以更快地插入这些行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T10:49:01.847

对多行使用一个 INSERT 语句比每行一个 INSERT 语句要快。这将减少对数据库的调用。

例子：

```
 INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T10:39:23.263

制作包：

```
INSERT INTO `table_name`(`column`) VALUES('value'),VALUES('value1'),VALUES('value2'), ..., VALUES('valuen'); 
```

[插入文档](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

或将数据导出为csv或其他文本格式并使用`LOAD DATA`，看这里：[通过mysql客户端加载数据](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:40:27.400

加载大型数据集的最快方法是使用批量加载接口。参考 Mysql 文档：[Bulk loader](http://dev.mysql.com/doc/refman/5.1/en/connector-net-programming-bulk-loader.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:51:21.443

使用命令行界面的最快方式。您可以使用 mysqldump 实用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:00:46.843

将多个相似的 INSERT 分组到一个长 INSERT 中，并带有多个 VALUES 列表，以一次插入多行：查询会更快，因为连接 + 发送 + 解析查询需要实际数据插入的 5-7 倍（取决于行大小） . 如果这不可能，则使用 START TRANSACTION 和 COMMIT，如果您的数据库是 InnoDB，否则使用 LOCK TABLES — 这会提高性能，因为索引缓冲区仅在所有 INSERT 语句完成后刷新到磁盘一次；在这种情况下，每 1000 行左右解锁您的表，以允许其他线程访问该表。

来自这篇文章：[http ://www.ajaxline.com/node/2099](http://www.ajaxline.com/node/2099)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-09-14T13:45:04.300

（仅适用于 mysql）

更新：您可以使用 mysql_random_data_load
插件来制作它

[github链接点击这里](https://www.google.com/url?sa=t&source=web&rct=j&url=https://github.com/Percona-Lab/mysql_random_data_load&ved=2ahUKEwjeoL-9levwAhWQad4KHV70BroQFjAAegQIAxAC&usg=AOvVaw2ZmF4DzxpNZK2McNms4MV1)

* * *

**这使得函数返回随机名称。你可以改变它以适合自己**

```
CREATE FUNCTION `get_name`() RETURNS varchar(5) CHARSET utf8
BEGIN
    DECLARE chars varchar(255) default '里对非肺乔额及爱我动物地位三次幂动物';
    DECLARE str varchar(255) default '';
    DECLARE i int default 0;
    while i<3 do
        set str=concat(str,substring(chars, FLOOR(1 + RAND()*62), 1));
        set i=i+1;
    END while;
RETURN str;
END 
```

**制作一个程序来实现制作大量数据**

```
CREATE PROCEDURE `make_data`(size int)
BEGIN
    declare i int default 0;
    while i<size do
        insert table_name(name)value(get_name());
    end while;
END 
```

**调用 make_data(1000)[完成]**

> 如果使用 MySQL Workbench，则需要手动添加函数和过程。如果你使用 MySQL 控制台，那么你应该像下面这样添加 DELIMITER

```
DELIMITER $$
$$
CREATE PROCEDURE `make_data`(size int)
BEGIN
    declare i int default 0;
    while i<size+1 do
        insert table_name(name)value(get_name());
    end while;
END$$

DELIMITER ; 
```

# c++ - 与智能指针 (intrusive_ptr) 一起使用的抽象基类 - 处理继承、多态性、可克隆性和从工厂方法返回

> ID：15474684
> 
> 赞同：20
> 
> 时间：2013-03-18T10:33:37.353
> 
> 标签：c++, inheritance, boost, polymorphism, reference-counting

## 要求

1.  我正在编写一个名为 的类`RCObject`，它代表“引用计数对象”；
2.  该类`RCObject`应该是抽象的，作为框架的基类（[EC++3](http://amzn.com/0321334876) Item 7）；
3.  `RCObject`应禁止在堆栈上创建子类的实例（ [MEC++1](http://amzn.com/020163371X)第 27 条）；

    [**添加：** ]

    [假设`Bear`是一个具体的子类`RCObject`]

    [`C.E.`这里的意思是编译错误]

    ```
    Bear b1;                        // Triggers C.E. (by using MEC++1 Item 27)
    Bear* b2;                       // Not allowed but no way to trigger C.E.
    intrusive_ptr<Bear> b3;         // Recommended

    Bear* bs1 = new Bear[8];                   // Triggers C.E.
    container< intrusive_ptr<RCObject> > bs2;  // Recommended
    intrusive_ptr_container<RCObject> bs3;     // Recommended

    class SomeClass {
    private:
        Bear m_b1;                 // Triggers C.E.
        Bear* m_b2;                // Not allowed but no way to trigger C.E.
        intrusive_ptr<Bear> m_b3;  // Recommended
    }; 
    ```

4.  **澄清：**应禁止声明/返回指向`RCObject`（和子类）的原始指针（不幸的是，我认为不存在一种实用的方法来执行它，即当用户不遵循时触发编译错误）。请参阅上面第 3 项中的示例源代码；

5.  子类的实例`RCObject`应该是可克隆的，就像[`Cloneable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)在 Java 中一样。（[MEC++1](http://amzn.com/020163371X)第 25 条）；
6.  子类化的用户`RCObject`应该能够为他们的子类编写[“工厂方法”](http://en.wikipedia.org/wiki/Factory_method_pattern)。即使返回值被忽略（未分配给变量），也不应该有内存泄漏。与此接近的机制是`autorelease`在 Objective-C 中。

    [**添加：** [cschwan](https://stackoverflow.com/users/812178/)和[Kos](https://stackoverflow.com/users/399317/)指出返回“智能指针`RCObject`”足以满足要求。]

7.  **澄清：**子类的实例`RCObject`应该能够包含在适当的`std::`容器`boost::`中。我主要需要一个“ `std::vector`-like”容器，一个“ `std::set`-like”容器和一个“ `std::map`-like”容器。基线是

    ```
    intrusive_ptr<RCObject> my_bear = v[10]; 
    ```

    和

    ```
    m["John"] = my_bear; 
    ```

    按预期工作；

8.  源代码应该可以使用具有有限 C++11 支持的 C++98 编译器进行编译（确切地说是 Visual Studio 2008 和 gcc 4.6）。

## 更多信息

*   我是 Boost 的初学者[（](http://www.boost.org/) Boost 太大了，我需要一些时间来熟悉它。可能有现成的解决方案，但很有可能我不知道这样的解决方案);
*   出于性能考虑，我想使用[`intrusive_ptr`](http://www.boost.org/libs/smart_ptr/intrusive_ptr.html)而不是[`shared_ptr`](http://www.boost.org/libs/smart_ptr/shared_ptr.htm)，但我对它们甚至任何其他建议都持开放态度；
*   我不知道[`make_shared()`](http://www.boost.org/libs/smart_ptr/make_shared.html), [`allocate_shared()`](http://www.boost.org/libs/smart_ptr/make_shared.html), [`enable_shared_from_this`()](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)是否有帮助（顺便说一下，[`enable_shared_from_this`()](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)在 Boost 中似乎没有得到高度推广 - 它甚至在[智能指针](http://www.boost.org/libs/smart_ptr/smart_ptr.htm)主页中都找不到）；
*   听说过“写自定义分配器”，但怕是太复杂了；
*   不知是否`RCObject`应该从[`boost::noncopyable`](http://www.boost.org/libs/utility/utility.htm#Class_noncopyable)私人继承；
*   我找不到任何满足我所有要求的现有实现；
*   该框架是一个游戏引擎；
*   主要目标平台为Android和iOS；
*   我知道`intrusive_ptr_add_ref()`以及`intrusive_ptr_release()`如何使用[Argument-Dependent Lookup (aka. Koenig Lookup)](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)来实现它们；
*   我知道如何使用[`boost::atomic_size_t`](http://www.boost.org/doc/html/atomic/usage_examples.html) with `boost:intrusive_ptr`。

## 类定义

```
namespace zoo {
    class RCObject { ... };                  // Abstract
    class Animal : public RCObject { ... };  // Abstract
    class Bear : public Animal { ... };      // Concrete
    class Panda : public Bear { ... };       // Concrete
} 
```

## “非智能”版本 - createAnimal() [工厂方法]

```
zoo::Animal* createAnimal(bool isFacingExtinction, bool isBlackAndWhite) {
    // I wish I could call result->autorelease() at the end...
    zoo::Animal* result;

    if (isFacingExtinction) {
        if (isBlackAndWhite) {
            result = new Panda;
        } else {
            result = new Bear;
        }
    } else {
        result = 0;
    }

    return result;
} 
```

## “非智能”版本 - main()

```
int main() {
    // Part 1 - Construction
    zoo::RCObject* object1 = new zoo::Bear;
    zoo::RCObject* object2 = new zoo::Panda;
    zoo::Animal* animal1 = new zoo::Bear;
    zoo::Animal* animal2 = new zoo::Panda;
    zoo::Bear* bear1 = new zoo::Bear;
    zoo::Bear* bear2 = new zoo::Panda;
    //zoo::Panda* panda1 = new zoo::Bear;  // Should fail
    zoo::Panda* panda2 = new zoo::Panda;

    // Creating instances of RCObject on the stack should fail by following
    // the method described in the book MEC++1 Item 27.
    //
    //zoo::Bear b;                         // Should fail
    //zoo::Panda p;                        // Should fail

    // Part 2 - Object Assignment
    *object1 = *animal1;
    *object1 = *bear1;
    *object1 = *bear2;
    //*bear1 = *animal1;                   // Should fail

    // Part 3 - Cloning
    object1 = object2->clone();
    object1 = animal1->clone();
    object1 = animal2->clone();
    //bear1 = animal1->clone();            // Should fail

    return 0;
} 
```

## “智能”版【未完成！】

```
/* TODO: How to write the Factory Method? What should be returned? */

#include <boost/intrusive_ptr.hpp>

int main() {
    // Part 1 - Construction
    boost::intrusive_ptr<zoo::RCObject> object1(new zoo::Bear);
    boost::intrusive_ptr<zoo::RCObject> object2(new zoo::Panda);
    /* ... Skip (similar statements) ... */
    //boost::intrusive_ptr<zoo::Panda> panda1(new zoo::Bear); // Should fail
    boost::intrusive_ptr<zoo::Panda> panda2(new zoo::Panda);

    // Creating instances of RCObject on the stack should fail by following
    // the method described in the book MEC++1 Item 27\. Unfortunately, there
    // doesn't exist a way to ban the user from declaring a raw pointer to
    // RCObject (and subclasses), all it relies is self discipline...
    //
    //zoo::Bear b;                         // Should fail
    //zoo::Panda p;                        // Should fail
    //zoo::Bear* pb;                       // No way to ban this
    //zoo::Panda* pp;                      // No way to ban this

    // Part 2 - Object Assignment
    /* ... Skip (exactly the same as "non-smart") ... */

    // Part 3 - Cloning
    /* TODO: How to write this? */

    return 0;
} 
```

上面的代码（“智能版本”）显示了预期的使用模式。我不确定这种使用模式是否遵循使用智能指针的最佳实践。如果没有，请纠正我。

## 类似问题

*   [使 shared_ptr 不使用删除](https://stackoverflow.com/q/441306/142239)（[接受的答案](https://stackoverflow.com/a/441810/142239)看起来很优雅！！！它是某种“自定义释放器”吗？我不确定它[`intrusive_ptr`](http://www.boost.org/libs/smart_ptr/intrusive_ptr.html)在时间和空间效率方面如何比较）

*   [c++11 中的 intrusive_ptr](https://stackoverflow.com/q/13912286/142239)（提到的[公认答案](https://stackoverflow.com/a/13913161/142239)[`make_shared()`](http://www.boost.org/libs/smart_ptr/make_shared.html)和[`enable_shared_from_this`()](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)，但我不明白“但这不允许您使用不同的智能指针类型管理类型”部分）

*   [有没有办法通过将引用计数存储在受控对象中来提高 shared_ptr 的效率？](https://stackoverflow.com/q/2569046/142239)（还在消化）

*   [intrusive_ptr：为什么不提供通用基类？](https://stackoverflow.com/q/2903179/142239)（答案不够详细）

*   [这是对 intrusive_ptr 的有效使用吗？](https://stackoverflow.com/q/5709825/142239)（我从中学到了一些东西，但这个问题的重点是“将原始指针传递给接受智能指针的函数”）

*   [使用通用侵入式指针客户端进行引用计数](https://stackoverflow.com/q/9575647/142239)（这个使用了[“CRTP”](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，但我担心进一步的子类化会让我头疼——我应该单独`zoo::Panda`扩展`zoo::Bear`，还是应该让它同时扩展`zoo::Bear`和`intrusive_base<zoo::Panda>`？）

*   [Boost shared_ptr 的嵌入式引用计数](https://stackoverflow.com/q/13334840/142239)（[接受的答案](https://stackoverflow.com/a/13334980/142239)提到虽然`std::enable_shared_from_this()`应该没问题，但[`boost::enable_shared_from_this()`](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)似乎有一些问题）

## 参考

*   [ [EC++3](http://amzn.com/0321334876) ]：有效的 C++：改进程序和设计的 55 种特定方法（第 3 版），Scott Meyers
    *   第 7 条：在多态基类中声明虚拟析构函数

*   [ [MEC++1](http://amzn.com/020163371X) ]：更有效的 C++：改进程序和设计的 35 种新方法（第 1 版），Scott Meyers
    *   第 25 条：虚拟化构造函数和非成员函数
    *   第 27 项：要求或禁止基于堆的对象。

## 文章

*   [ [atomic](http://www.boost.org/doc/html/atomic/usage_examples.html) ]: `boost::atomic`Boost.org 的使用示例
    *   [[部分](http://www.boost.org/doc/html/atomic/usage_examples.html#boost_atomic.usage_examples.example_reference_counters)]：引用计数

*   [ [CP8394](http://www.codeproject.com/Articles/8394/Smart-Pointers-to-boost-your-code) ]：提升代码的智能指针 - CodeProject
    *   [ [section](http://www.codeproject.com/Articles/8394/Smart-Pointers-to-boost-your-code#intrusive_ptr%20-%20lightweight%20shared%20pointer) ]: intrusive_ptr - 轻量级共享指针

*   [ [DrDobbs](http://www.drdobbs.com/cpp/a-base-class-for-intrusively-reference-c/229218807) ]：C++ 中侵入式引用计数对象的基类 - Dobb 博士的
    *   [第1[页](http://www.drdobbs.com/cpp/a-base-class-for-intrusively-reference-c/229218807?pgno=1)]：第1页
    *   [第2[页](http://www.drdobbs.com/cpp/a-base-class-for-intrusively-reference-c/229218807?pgno=2)]：第2页
    *   [第3[页](http://www.drdobbs.com/cpp/a-base-class-for-intrusively-reference-c/229218807?pgno=3)]：第3页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:13:12.170

`make_shared`在与引用计数器相同的分配块中创建您的类的实例。我不确定您为什么认为`intrusive_ptr`会有更好的性能：当已经有您无法删除的引用计数机制时，这很好，但这里不是这种情况。

对于克隆，我会将它实现为一个自由函数，它接受一个智能指针并返回相同的值。它是一个朋友，并在 base 中调用一个私有的纯虚拟克隆方法，该方法返回一个指向 base 的共享指针，然后执行一个快速智能指针转换为指向派生的共享指针。如果您更喜欢 clone 作为一种方法，请使用 crtp 复制它（给私有克隆命名，如`secret_clone`）。这为您提供了几乎没有开销的协变智能指针返回类型。

具有一系列基类的 Crtp 通常让您同时传入基类和派生类。crtp 类从基类派生，并且通常`self()`返回派生类。

工厂函数应该返回智能指针。您可以使用自定义删除器技巧来获取最后一次清理的预销毁方法调用。

如果您完全偏执，您可以阻止大多数方法来获取原始指针或对您的类的引用：在智能指针上阻止 operator*。那么到原始类的唯一途径是显式调用`operator->`.

另一种要考虑的方法是`unique_ptr`引用相同的方法。您需要共享所有权和生命周期管理吗？它确实使一些问题更简单（共享所有权）。

请注意，悬挂的弱指针会阻止内存使共享内存被回收。

始终使用智能指针的一个严重缺点是您不能在容器中直接拥有堆栈实例或实例。这两者都可以是严重的性能提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:16:24.570

> 1.  `RCObject`应禁止在堆栈上创建子类的实例（[MEC++1][mec++1] Item 27）；

你的理由是什么？MEC++ 给出了“能够自杀的对象”的例子，这在游戏框架的上下文中可能是有意义的。是这样吗？

如果您坚持避免使用更简单的解决方法，那么应该可以使用足够智能的智能指针。

请注意，如果是这种情况，您可能还希望禁止使用在堆栈上创建此类对象的数组`new[]`- 这也可以防止删除单个对象。您可能还希望禁止使用 RCObjects 作为子对象（其他类中的成员）。这意味着您完全禁止使用 RCObject 值，而让客户端代码仅通过智能指针处理它们。

> 1.  `RCObject`应避免声明/返回指向（和子类）的原始指针（不幸的是，我认为不存在通过发出编译错误来强制执行它的方法）；

那么你肯定会有弱指针来表达“我对这个对象感兴趣，但我不会让它活着”。

> 1.  子类化的用户`RCObject`应该能够为他们的子类编写 ["Factory Methods"][factory_method]。即使返回值被忽略（未分配给变量），也不应该有内存泄漏。

这样的函数将返回一个引用计数等于 1 的临时智能指针对象。如果这个临时对象不用于初始化另一个对象（从而进一步增加引用计数），它将清理对象。你安全了。

> 1.  子类的实例`RCObject`应该能够包含在一个`std::`或`boost::`容器中（或任何合适的）。我主要需要类似于`std::vector`,`std::set`和`std::map`;

这种不同意（3）。如果您坚持必须在堆上单独创建对象并通过智能指针（而不是作为值）传递，那么您还应该使用智能指针容器。

> *   出于性能方面的考虑，我想使用 [ `intrusive_ptr`][intrusive_ptr] 而不是 [ `shared_ptr`][shared_ptr]，但我对它们甚至任何其他建议都持开放态度；

你不是过早优化吗？

此外，我相信使用侵入式指针消除了使用弱引用的可能性——正如我之前提到的，你很可能需要这种引用。

> *   我想知道是否`RCObject`应该从 [ `boost::noncopyable`][noncopyable] 私下继承；

如果您不允许值类型的变量并提供虚拟克隆，那么可能不需要公共复制构造函数。您可以制作一个私有副本 ctor 并在定义 Clone 时使用它。

# qml - 如何在循环中创建多个 qml 组件

> ID：15474687
> 
> 赞同：5
> 
> 时间：2013-03-18T10:33:48.177
> 
> 标签：qml

例如，我希望创建一个包含 100 个文本编辑的 qml 窗口，如何在循环中创建它？那可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T12:19:26.610

循环是命令式代码，因此它不是 QML，而是 Javascript 或 C++。所以当然，你可以做到这一点（例如通过在 JS 循环中嵌入 Qt.createComponent() 调用），但在 QML 中，认为声明性更好，这意味着你不“做”事情，你“定义” ' 事物 ：

```
import QtQuick 2.0

Rectangle {
    id: base;
    width: 400;
    height: 800;

    Column {
        spacing: 5; // a simple layout do avoid overlapping

        Repeater {
            model: 10; // just define the number you want, can be a variable too
            delegate: Rectangle {
                width: 200;
                height: 20;
                color: "white";
                border { width: 1; color: "black" }
                radius: 3;

                TextInput {
                    anchors.fill: parent;
                }
            }
        }
    }
} 
```

从 QML 的角度来看，这种方式真的更强大、更干净！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T13:58:58.237

查看 QML 中继器元素[http://doc.qt.io/qt-4.8/qml-positioners.html](http://doc.qt.io/qt-4.8/qml-positioners.html)

# python - 如何指示脚本的当前目录不是我？

> ID：15474693
> 
> 赞同：1
> 
> 时间：2013-03-18T10:34:01.033
> 
> 标签：python, directory

我有一个 python 脚本，它从应该位于脚本同一目录中的文件中读取一些输入：

```
with open('./input1.txt') as file:
    F = file.readlines()
Do_Stuff(F) 
```

我通常从其他目录（不是脚本和输入文件所在的目录）运行脚本，因此它会引发一个 IOError，它无法找到输入文件（因为它不在我当前的工作目录中）。我不喜欢为输入文件放置完整路径，因为我希望它是可移植的——只有脚本和输入文件必须位于同一目录中。

有没有办法指示脚本查看其位置目录而不是我从中启动它的目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:36:00.447

`__file__`是脚本的路径，尽管通常是相对路径。采用：

```
import os.path

scriptdir = os.path.dirname(os.path.abspath(__file__)) 
```

创建目录的绝对路径，然后用于`os.path.join()`打开文件：

```
with open(os.path.join(scriptdir, './input1.txt')) as openfile: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:47:15.300

如果安装了 setuptools/distribute；您可以使用[pkg_resources 函数](http://packages.python.org/distribute/pkg_resources.html#basic-resource-access)来访问文件：

```
import pkg_resources

data = pkg_resources.resource_string(__name__, 'input1.txt') 
```

# php - json_encode / decode char 麻烦

> ID：15474695
> 
> 赞同：0
> 
> 时间：2013-03-18T10:34:10.103
> 
> 标签：php, mysql, encoding, json

当我将字符串存储到 MySQL DB 表时，我在使用 json_encode/decode 函数时遇到了一些问题。问题在于瑞典字符，例如 ÅÄÖ。如果有类似的东西

```
$my_arr = array('Räksmörgås');
$json = json_encode($my_arr):
print_r(json_decode($json)); 
```

它工作得很好，问题是，正如我所说，当我将 jsonstring 存储到数据库然后收集它们时。该表（整个数据库）具有编码“utf8_general_ci”。我也尝试过 uft8_unicode_ci'，结果相同，输出将是' `Ru00e4ksmu00f6rgu00e5s`'。我存储此值的列是“文本”。

我究竟做错了什么？

编辑，我忘了提到这是一个 wordpress 插件，我正在使用 $wpdb->prepare() 和 $wpdb->query()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:42:12.360

在您的代码中的某处，您正在剥离斜杠。

```
// text: Räksmörgås
// json_encode(): R\u00e4ksm\u00f6rg\u00e5s
// your output: Ru00e4ksmu00f6rgu00e5s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:43:23.723

尝试将结果存储在`BLOB`而不是`TEXT`字段中。你用什么来存储数据？PDO ? mysqli ? mysql ?

# android - Android如何以编程方式将滚动视图子移动到顶部

> ID：15474703
> 
> 赞同：2
> 
> 时间：2013-03-18T10:34:27.920
> 
> 标签：android

我有一个`ScrollView`包含许多关于`LinearLayout`.I 的视图的视图。我已经实现`expand`和`collapse`布局。`OnClick`视图，它要么展开要么折叠。所以当视图展开时，我想以编程方式移动`ScrollView`，使视图出现在屏幕顶部。见下图

![在此处输入图像描述](../Images/83dd86a661f06f27c99d2fc56fc46993.png)

我想将 移动`ScrollView`到红线所示的长度。`child`of`ScrollView`包含一个`TextView`（4：状态栏通知）和一个`ImageView`.Further`ScrollView`可能包含也可能不包含组合上方或下方的视图`TextView ImageView`。我使用了一个 CustomScrollView 我`scroll Y`发现

```
public int newY=0;
@Override
protected void onScrollChanged(int X, int Y, int oldX, int oldY) {
    super.onScrollChanged(X, Y, oldX, oldY);
    this.newY=Y;
} 
```

为此，我使用了以下逻辑

```
 public void translateView(View view){
    int[] xy =new int[2];
   //view = ImageView
    view.getLocationOnScreen(xy);
    int scrollY = xy[1]+view.getBottom();
    //screenHeight =ScreenHeight of the phone
    if(scrollY>screenHeight){
      //heading textView
        textView.getLocationOnScreen(xy);
        int diff = screenHeight-xy[1];
        diff =Math.abs(diff);
        int moveHeight = (int) (scrollView.newY+diff);
        scrollView.smoothScrollTo(0, moveHeight);

    }
} 
```

所以基本上我要做的是找到`y`位置之间的差异`TextView`并用屏幕高度减去它并滚动`ScrollView`到这些差异，以便视图显示在顶部。但它不起作用。关于如何实现这一点的任何想法.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:39:44.710

我刚刚发现我做错了什么。每个屏幕都包含`StatusBar`和在我的情况下`ActionBar`。所以当我计算`View Y`位置时，我是从屏幕顶部计算的，每当我使用增量值时`ScrollView Scroll`，我都会将视图移动到屏幕顶部。所以实际的解决方案是是

```
public void translateView(final View view){
    int[] xy =new int[2];
    view.getLocationOnScreen(xy);
    int scrollY = xy[1]+view.getBottom();

    if(scrollY>DataHolder.screenHeight){
        handle.getLocationOnScreen(xy);
        int actualY=xy[1]-DataHolder.actionbarHeight-DataHolder.statusBarHeight;
        int moveHeight = (int) (scrollView.newY+actualY);
        scrollView.smoothScrollTo(0, moveHeight);   
    }
} 
```

因此，通过这样做，我的视图会自动到达屏幕顶部

# c# - 用于存储具有自定义相等比较器的唯一对象的非基于哈希的集合集合 - C#

> ID：15474710
> 
> 赞同：2
> 
> 时间：2013-03-18T10:34:51.220
> 
> 标签：c#, collections, set, unique, iequalitycomparer

我正在尝试将 (name: string, value: long) 对存储在一个集合中。

```
public class NameValuePair
{
  public string name;
  public long value;
}

public NameValuePairComparer comparer = new NameValuePairComparer();
public HashSet<NameValuePair> nameValueSet = new HashSet<NameValuePair>(comparer); 
```

如果两个对具有相同的名称或相同的值，则它们是相等的 - 这在 NameValuePairComparer 中实现，覆盖 EqualityComparer 的 Equals 方法：

```
public class NameValuePairComparer : EqualityComparer<NameValuePair>
{
   public override bool Equals(NameValuePair x, NameValuePair y)
   {
      return (x.value == y.value) || (x.name == y.name);
   } 
```

问题是：GetHashCode(NameValuePair obj) 应该为 Equals 返回 true 的两个对象返回相同的值，因此对于给定的 NameValuePair，GetHashCode() 应该返回 value.GetHashCode() 或 name.GetHashCode()，但要这样做我们必须知道两对中的哪个字段相等：

```
 public override int GetHashCode(NameValuePair obj)
   {
      /* ??? */
      /* // Using unknown reference to x
        if (obj.value == x.value) return obj.value.GetHashCode();
        else if (obj.name == x.name) return obj.name.GetHashCode();
        else return base.GetHashCode(obj);
      */
   }
} 
```

但是我们不知道这一点，这意味着我不能使用 HashSet 来存储这些对，也不能使用 EqualityComparer。

问：C# (.net 3.5) 中是否有基于非散列的 set 实现？

问：使用自定义相等比较器存储唯一 NameValuePairs 的更好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:37:45.310

> 如果两个对具有相同的名称或相同的值，则它们是相等的

您根本无法[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)使用这些标准正确实施。从以下文档`Equals`：

> Equals 方法是自反的、对称的和传递的。也就是说，如果用于将对象与自身进行比较，则返回true；如果对 y 和 x 为真，则对两个对象 x 和 y 为真；如果对 x 和 y 为真并且对 y 和 z 也为真，则对两个对象 x 和 z 为真。

现在考虑对：

```
x = { "A", 10 },
y = { "A", 20 },
z = { "B", 20 } 
```

您是说`x`and`y`必须相等，因为它们具有相同的名称，并且`y`and`z`必须相等，因为它们具有相同的值。这意味着（通过传递性）`x`并且`z`应该是相等的。

由于您无法`IEqualityComparer<T>`正确实施，因此您不应期望任何依赖于该正确性的东西都能正常工作。

我怀疑您会发现，如果您更详细地查看您的需求，它们*要么*真的需要两个集合（一个按名称，一个按值）*，要么*就传递性而言它们没有意义。

例如，假设您有一个具有您建议的特征的集合，并且您添加了上面的三个元素。如果您按 { x, y, z } 的顺序添加它们，您最终会得到一个条目。如果您按 { z, x, y } 的顺序添加它们，您最终会得到两个。那是一种有用的集合吗？

# objective-c - 如何修复长时间的 NSString 崩溃？

> ID：15474714
> 
> 赞同：4
> 
> 时间：2013-03-18T10:35:06.347
> 
> 标签：objective-c, crash, nsstring

在我正在开发的应用程序中，我正在 for 循环中从文本文件中读取数值，然后进行一些计算并将结果附加到结果字符串中。

该文件中有 22050 个值。我注意到，超过一定数量的循环/附加值（~5300）它往往会崩溃。

我想也许我有内存泄漏，所以我摆脱了附加的字符串，一切正常。我试图摆脱所有东西，但附加的字符串和应用程序崩溃了。我对所有异常都有一个断点，我没有得到任何异常。

我想确定一下，所以我开始了一个新项目。我只放了一个 UIButton ，当它被推送时会调用这段代码：

```
- (IBAction)TestPressed:(id)sender
{
    NSString *testString = @"";

    for (int i = 0; i < 22050; i++)
    {
        testString = [testString stringByAppendingString:@"12.34567890\n"];
    }

    NSLog(@"%@", testString);
} 
```

我在 NSLog 行上有一个断点。该应用程序之前崩溃。

NSString 长度有限制吗？会不会占用太多内存？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T10:38:00.983

问题是您在每次迭代中都创建了一个新字符串。有两个选项可以解决这个问题： 使用可变字符串来创建结果：

```
NSMutableString *testString = [NSMutableString string];

for (int i = 0; i < 22050; i++)
{
    [testString appendString:@"12.34567890\n"];
}

NSLog(@"%@", testString); 
```

...或使用自动释放池删除循环中的实例：

```
NSString *testString = @"";

for (int i = 0; i < 22050; i++)
{
    @autoreleasepool {
        testString = [testString stringByAppendingString:@"12.34567890\n"];
    }
}

NSLog(@"%@", testString); 
```

请注意，我包含第二个版本只是为了说明问题发生的原因以及如何解决它。它仍然是低效的，因为它创建了 22049 个平均长度为 120,000 个字符的临时字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:37:21.977

用于`NSMutableString`附加字符串，否则会分配太多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:59:21.703

`+[NSString stringByAppendingString:]`每次调用它时都会创建一个新的、自动释放的对象。在自动释放池弹出之前，自动释放的对象不会被释放，这通常意味着在事件循环结束时。在这种情况下，最好使用 an`NSMutableString`作为其他答案的建议。但是，如果您确实遇到了需要创建许多自动释放对象而不是使用可变对象的问题，您可能需要在`@autoreleasepool {}`创建对象的代码周围包裹一个块，这样您就不会出现大量内存膨胀，但是您必须小心保留要在`@autoreleasepool`块范围之外停留的对象。

一般来说，我尽量避免使用自动释放的对象，原因如下：

1) 对象实际被释放的时间可能是不确定的，除非您的方法本身中确实有一个自动释放池。否则，无法知道自动释放池的范围以及调用代码何时决定弹出池。

2) 自动发布本质上比手动发布更占用资源。对象需要添加到池中，然后迭代并稍后释放。

3) 自动释放在多线程环境中变得特别棘手，因为您经常会在释放对象的线程之间发生竞争。在这些情况下，很容易创建一个具有难以重现或找到根本原因的间歇性崩溃的场景。

4) 在处理自动释放时，崩溃通常更难分析。您经常会看到堆栈跟踪只是一个自动释放池弹出一个对象，如果没有重现案例，几乎不可能确定它是什么对象，释放它的代码路径等。

5) 有时，像重构这样简单的事情会以您通常意想不到的方式影响自动释放的对象。从简单迭代更改为基于块的迭代引入了一个自动释放池，它可能会在您有机会保留对象之前释放它。

通常，自动释放对象最合适的用途是动态创建并由非构造方法返回的对象。这样调用代码就有机会保留对象，但被调用的方法不必担心自己指定所有者。

这有点啰嗦，也许超出了原始问题的范围，但我认为了解内存管理中良好决策背后的*“原因”很重要。*

# html - IE 有时会与其他页面同时请求主页（站点根目录）

> ID：15474715
> 
> 赞同：1
> 
> 时间：2013-03-18T10:35:06.767
> 
> 标签：html, internet-explorer, web-applications, browser

我的网站由一系列表单提交组成。极少数的浏览器，不到 1%，也许只有一些 IE 浏览器，会在每个内容页面同时请求主页。对于有问题的浏览器之一，IIS 日志的典型部分如下所示：

```
15-Mar-13   11:07:39 PM POST    /content.asp
15-Mar-13   11:07:39 PM GET /mainstyle.css
15-Mar-13   11:07:39 PM GET /images/logo.gif
15-Mar-13   11:07:39 PM GET /images/bar.gif
15-Mar-13   11:07:39 PM GET /images/fill.gif
15-Mar-13   11:07:39 PM GET /images/pbtop.gif
15-Mar-13   11:07:39 PM GET /images/hr.gif
15-Mar-13   11:07:39 PM GET /index.htm
15-Mar-13   11:07:39 PM GET /images/pbbottom.gif 
```

对 /index.htm 的请求是虚假的（并造成很多麻烦）。（即使请求只是针对“/”，IIS 也会记录“/index.htm”。）因为 IIS 日志只解析到整秒，并且项目没有按确切的顺序出现，所以很难确定是否对 index.htm 的奇怪额外请求是由前一页或正在加载的页面中的某些内容触发的。

我的第一个想法是页面某处可能有一个空白的 src="" ，但没有，至少在我用来测试的任何浏览器中都没有。它让我发疯，因为我无法复制它，而且它只发生在一小部分用户身上。

有没有人见过这样的事情，或者猜猜是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T02:38:49.747

我最近遇到了类似的问题。就我而言，事实证明 src="" 导致了这个问题。

事情就是这样。

我向服务器请求一些图像来制作瀑布效果。我使用 JavaScript 模板来呈现项目。这是我的模板中的问题：

```
<img src="" data-src="{{imgSrc}}"> 
```

我先把图片源放在 data-src 中，稍后用 JavaScript 设置 src 属性，把 src="" 留在那里。当我将图像标签附加到 DOM 时，看起来 IE6-8 会请求我的站点根目录。

有趣的是，如果我滚动速度非常快，在短时间内添加大量图像，则对我的站点根目录的请求只会发送一次。

但是，如果我慢慢滚动，每次`<img>`附加 s 时，IE 都会向站点根目录发送一个请求。

我的解决方案是简单地删除 src="" 就是这样。

正如[user1207313](https://stackoverflow.com/users/1207313/user1207313)提到的，你不写 src="" 但也许一些插件会发生这种情况。这也是一种可能。因为您说只有少量用户发送请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:14:47.443

禁用 IE 中的“内容顾问”，通过“工具-> Internet 选项-> 内容选项卡”...

如果您因为“内容顾问”受密码保护而无法访问该按钮，您可以试试这个： http: [//www.wikihow.com/Remove-Content-Advisor-Password-in-Internet-Explorer](http://www.wikihow.com/Remove-Content-Advisor-Password-in-Internet-Explorer) .

我遇到了同样的问题，这解决了我在[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/86c5130a-d4fa-471b-87b1-7bf51c36eb9e上报告的问题](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/86c5130a-d4fa-471b-87b1-7bf51c36eb9e)

# c++ - 立体图像中斑点检测的库或算法

> ID：15474716
> 
> 赞同：0
> 
> 时间：2013-03-18T10:35:09.437
> 
> 标签：c++, opencv, image-processing, computer-vision

我正在寻找一种方法来检测立体图像中的斑点，但还没有找到任何东西。我想检测物体，例如站在相机前的人，然后将该物体剪掉以继续在没有背景的情况下处理 blob。有谁知道立体图像中用于斑点检测/跟踪的任何库或算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:48:56.617

如果您可以期望您的背景相对于前景是静态的，您可以尝试使用[OpenCV 背景减法](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractor)器。有两个版本基于使用高斯混合对每个像素进行建模，从持续时间最长的分布（即它们是静态的）构建背景模型。当像素值从学习的背景分布中移动超过阈值时，可以将像素标记为前景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:44:04.193

您是否尝试根据深度数据分割图像（这是您所说的 blob 的意思吗？）这是一个愚蠢的想法 - 如果您平滑左右图像然后计算平滑图像的差异 - 如果您这样做这样您就可以使前景中的对象脱颖而出（至少，您可以得到它的轮廓）。这可能取决于您的前景/背景距离和光学元件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:15:55.387

如果你有静态对象，你可以试试这个 BGS 方法。

[https://www.science.uva.nl/research/isla/pub/Zivkovic04icpr.pdf](https://www.science.uva.nl/research/isla/pub/Zivkovic04icpr.pdf)

这个 BGS 是在这个库中实现的，看看并选择你最好的 BGS。

[https://code.google.com/p/bgslibrary/](https://code.google.com/p/bgslibrary/)

# jquery - 基于其他单选按钮的单选按钮切换

> ID：15474718
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:35:23.560
> 
> 标签：jquery

我需要为比赛设置 4 个带有单选按钮的表单，我想将其设置为禁用其他选项，因此如果您为问题 1 选择了 A，则选项 A 在 2,3 和 4 中被禁用。

我已经设法将一些东西放在一起，但我的知识有限，所以它很可能是最长的方法，我希望在我开始将两个额外的表单构建到其中之前，有人知道一个更简单的方法。

我设置了一个小提琴，[http://jsfiddle.net/2Kc6m/2/](http://jsfiddle.net/2Kc6m/2/)

HTML：

```
 <form id="answer1" class="radioOptions">
    <div class="formInput"><input type="radio" value="A1" name="question1" /> A</div>
    <div class="formInput"><input type="radio" value="B1" name="question1" /> B</div>
    <div class="formInput"><input type="radio" value="C1" name="question1" /> C</div>
    <div class="formInput"><input type="radio" value="D1" name="question1" /> D</div>
</form>
<form id="answer2" class="radioOptions">
    <div class="formInput"><input type="radio" value="A2" name="question2" /> A</div>
    <div class="formInput"><input type="radio" value="B2" name="question3" /> B</div>
    <div class="formInput"><input type="radio" value="C2" name="question3" /> C</div>
    <div class="formInput"><input type="radio" value="D2" name="question2" /> D</div>
</form> 
```

脚本：

```
 $('.answerOptions').click(function(){
   if(this.value == 'A1' && this.checked){
       $('input[value=A2]').prop('disabled', true);
       $('input[value=B2], input[value=C2], input[value=D2]').prop('disabled', false);
   }
   else if(this.value == 'B1' && this.checked){
       $('input[value=A2], input[value=C2], input[value=D2]').prop('disabled', false);
       $('input[value=B2]').prop('disabled', true);
   }
   else if(this.value == 'C1' && this.checked){
       $('input[value=C2]').prop('disabled', true);
       $('input[value=A2], input[value=B2], input[value=D2]').prop('disabled', false);  
   }
   else if(this.value == 'D1' && this.checked){
       $('input[value=A2], input[value=B2], input[value=C2]').prop('disabled', false);
       $('input[value=D2]').prop('disabled', true);  
   }   
   else{
      $('.answerOptions').not(this).prop('checked', false).prop('disabled', false);
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:46:26.590

关于什么

```
var radios = $('input[type="radio"]').addClass('answerOptions');

var forms = $('.radioOptions');
$('.answerOptions').click(function(){
    var $this = $(this);
    if(this.checked){
        var checked = $('.answerOptions:checked', forms);

        radios.prop('disabled', false);
        checked.each(function(i, v){
            var $item = $(v);
            var $form = $item.closest('form');
            var prefix = this.value.substring(0, 1)

            forms.not($form).each(function(i,v){
                var $form = $(v);
                var x = $form.find('input:radio[value^=' + prefix + ']').prop('disabled', true);
            });

        })
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/2Kc6m/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:41:02.160

您可以使用**switch**指令：

```
$('.answerOptions').click(function () {
    if (this.checked)
        switch (this.value) {
            case 'A1':
                $('input[value=A2]').prop('disabled', true);
                $('input[value=B2], input[value=C2], input[value=D2]').prop('disabled', false);
                break;

            case 'B1':
                $('input[value=A2], input[value=C2], input[value=D2]').prop('disabled', false);
                $('input[value=B2]').prop('disabled', true);
                break;
            case 'C1':
                $('input[value=C2]').prop('disabled', true);
                $('input[value=A2], input[value=B2], input[value=D2]').prop('disabled', false);
                break;
            case 'D1':
                $('input[value=A2], input[value=B2], input[value=C2]').prop('disabled', false);
                $('input[value=D2]').prop('disabled', true);
                break;
            default:
                $('.answerOptions').not(this).prop('checked', false).prop('disabled', false);
                break;
        }
}); 
```

请参阅[更新的小提琴](http://jsfiddle.net/bigood/2Kc6m/3/)。

# c# - c# ClickOnce 测试更新我的应用程序是否在本地工作

> ID：15474724
> 
> 赞同：2
> 
> 时间：2013-03-18T10:35:52.463
> 
> 标签：c#, visual-studio, clickonce, updates

我完成了一个`c# application`并且我能够`Publish`做到，问题是我想在`update`本地测试功能，一个问题：我不能只给出 a `folder path`，所以我不能`update`从我本​​地电脑上的文件夹中。我需要将应用程序上传到服务器（网站），有没有办法测试更新功能是否在我的电脑上本地工作？或者任何人都可以给我一个链接到一个很好的教程来测试这个本地？

谢谢！

# ruby-on-rails - 全文搜索中的匹配子字符串不起作用

> ID：15474725
> 
> 赞同：0
> 
> 时间：2013-03-18T10:35:53.740
> 
> 标签：ruby-on-rails, ruby, solr, indexing, sunspot-rails

在我的 Rails 应用程序中，我使用的是 solr 搜索。子字符串匹配在本地服务器上工作正常，但它匹配我的部署服务器上的完整单词。

**可搜索块**

```
searchable do
  text :firstname, :lastname, :login, :mail
  boolean :member
  integer :status
end 
```

**schema.xml**是。

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.PorterStemFilterFactory"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="10" side="front" />
  </analyzer>
</fieldType> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:55:02.763

（在此处添加答案以通知您可能的不良行为）

仅供参考，当您对 in 进行更改时`"text" fieldType`，`schema.xml`您正在更改应用程序中**每个**索引文本字段的配置。有时这是不需要的，因为某些字段需要自定义配置。

例如，假设（无论出于何种原因）您希望以不同于其他文本字段的方式处理名字。假设您想添加名字的同义词。您将首先在您的被叫中创建一个**新的`fieldType`**`schema.xml``first_name`

```
<fieldtype name="first_name" class="solr.TextField" positionIncrementGap="100">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
  </analyzer>
</fieldtype> 
```

然后在文件`fields`部分中`schema.xml`，您将添加两个新的动态字段

```
<dynamicField name="*_first_name"  stored="false" type="first_name" multiValued="false" indexed="true"/>
<dynamicField name="*_first_names" stored="true"  type="first_name" multiValued="false" indexed="true"/> 
```

**注意：`dynamicField`名称上的“s”表示它是存储类型，为动态字段提供 * 有助于太阳黑子配置**

因此，在您的`searchable`块中，您现在可以执行以下操作：

```
searchable do
  text :firstname, :as => :user_first_name
  text :lastname, :login, :mail
  boolean :member
  integer :status
end 
```

这现在将使用您的自定义配置`"first_name"`字段。

如果您希望 first_name 是一个存储值（并且您仍然想使用您的自定义配置），您将实现您的可搜索块，例如：

```
searchable do
  text :firstname, :stored => true, :as => :user_first_names
  text :lastname, :login, :mail
  boolean :member
  integer :status
end 
```

# javascript - jquery：列出准备好的处理程序

> ID：15474727
> 
> 赞同：1
> 
> 时间：2013-03-18T10:35:55.567
> 
> 标签：javascript, jquery

我正在尝试跟踪我们的应用程序中网页加载的速度减慢，并且有大量的 JavaScript 需要处理，所以我不想单独处理它们。

我正在尝试查看是否有办法列出添加到的所有事件处理程序，`$(document).ready()`以便我只需查看这些处理程序以查看可能导致问题的原因。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:42:14.900

我可以通过覆盖 jquery 的 ready 函数本身来做到这一点，这样我就可以存储对处理程序的引用，即

```
var readyList = [];
var origReady = jQuery.fn.ready;
jQuery.fn.ready = function() {
  if ((arguments.length) && (arguments.length > 0) 
    && (typeof arguments[0] === 'function')) {
      readyList.push(arguments[0]);
  }
  origReady.apply(this, arguments);
} 
```

# latex - LaTex - BibTex：引文末尾的逗号

> ID：15474737
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:36:31.790
> 
> 标签：latex, bibtex

当我在我的 Latex 文件中引用某些内容时，呈现的引用总是在最后一个后面有一个逗号（见图）......我怎样才能让这个逗号消失？ ![错误的引文末尾有逗号](../Images/840f3d6a24ac7334fc1a3de726447950.png)

BibTex-File 中的引用都是这样的：

```
@inproceedings{chun10,
  title={Vizcept: Supporting synchronous collaboration for constructing visualizations in intelligence analysis},
  author={Chung, H. and Yang, S. and Ma{\ss}jouni, N. and Andrews, C. and Kanna, R. and North, C.},
  booktitle={Visual Analytics Science and Technology (VAST), 2010 IEEE Symposium on},
  pages={107--114},
  year={2010},
  organization={IEEE}
} 
```

我像往常一样称呼它...

```
\cite{chun10} 
```

在我的主文档中，重要的几行如下所示：

```
\bibliographystyle{alpha}
\bibliography{./Bib/frie13} 
```

我包括了细菌包...

我对解决方案没有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:38:15.440

我无法重现您在 MWE 下方看到的内容：

测试.tex：

```
\documentclass[a4paper]{article}

\usepackage{ngerman}
\usepackage{bibgerm}

\begin{document}

\section{First}

This sentence cites \cite{chun10}.

\bibliographystyle{alpha}
\bibliography{references}

\end{document} 
```

参考书目：

```
@inproceedings{chun10,
  title={Vizcept: Supporting synchronous collaboration for constructing visualizations in intelligence analysis},
  author={Chung, H. and Yang, S. and Ma{\ss}jouni, N. and Andrews, C. and Kanna, R. and North, C.},
  booktitle={Visual Analytics Science and Technology (VAST), 2010 IEEE Symposium on},
  pages={107--114},
  year={2010},
  organization={IEEE}
} 
```

输出如下：

![MWE的结果](../Images/a53a4968455049b4b77aa189f09e41d2.png)

# python - python regex 可选捕获组

> ID：15474741
> 
> 赞同：27
> 
> 时间：2013-03-18T10:36:42.017
> 
> 标签：python, regex

我有以下问题匹配来自文件名的所需数据，如下所示：

```
miniseries.season 1.part 5.720p.avi
miniseries.part 5.720p.avi
miniseries.part VII.720p.avi     # episode or season expressed in Roman numerals 
```

“season XX”块可能存在也可能不存在，或者可以写成简短的形式，如“s 1”或“seas 1”

在任何情况下，我都希望有 4 个捕获组作为输出：

```
group1 : miniseries
group2 : 1 (or None)
group3 : 5
group4 : 720p.avi 
```

所以我写了一个这样的正则表达式：

```
(^.*)\Ws[eason ]*(\d{1,2}|[ivxlcdm]{1,5})\Wp[art ]*(\d{1,2}|[ivxlcdm]{1,5})\W(.*$) 
```

这只适用于我有一个完全指定的文件名，包括可选的“season XX”字符串。如果找不到“season”，是否可以编写一个返回“None”作为 group2 的正则表达式？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-18T10:39:20.583

将季节组设为可选很容易：

```
(^.*?)(?:\Ws(?:eason )?(\d{1,2}|[ivxlcdm]{1,5}))?\Wp(?:art )?(\d{1,2}|[ivxlcdm]{1,5})\W(.*$) 
```

使用非捕获组 ( `(?:...)`) 加上 0 或 1 量词 ( `?`)。我确实必须使第一组不贪婪，以防止它与`season`名称的部分匹配。

我还将`eason`和`art`可选字符串制成非捕获可选组而不是字符类。

结果：

```
>>> import re
>>> p=re.compile(r'(^.*?)(?:\Ws(?:eason )?(\d{1,2}|[ivxlcdm]{1,5}))?\Wp(?:art )?(\d{1,2}|[ivxlcdm]{1,5})\W(.*$)', re.I)
>>> p.search('miniseries.season 1.part 5.720p.avi').groups()
('miniseries', '1', '5', '720p.avi')
>>> p.search('miniseries.part 5.720p.avi').groups()
('miniseries', None, '5', '720p.avi')
>>> p.search('miniseries.part VII.720p.avi').groups()
('miniseries', None, 'VII', '720p.avi') 
```

# image - Laravel - 保护图像文件夹免受网络访问

> ID：15474742
> 
> 赞同：1
> 
> 时间：2013-03-18T10:36:43.443
> 
> 标签：image, upload, laravel, protection

我正在我的项目中上传图片功能。在这里，我将我的文件保存在公共文件夹 (public/img/myfiles/) 中。如果管理员用户未登录，我想限制文件访问。（即）

如果我把网址放在

```
https://domain/img/myfiles/filename.jpg 
```

它应该重定向到登录页面

```
https://domain/login 
```

怎么做？而且我不想将特定图像限制为关联用户。由于用户是管理员，我想授予他们对图像文件夹的完全访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:15:27.510

您可以尝试在`.htaccess`文件中放置一行，通过 PHP 脚本路由所有对图像的请求，如果不是管理员，该脚本只会重定向到登录页面，否则返回请求的图像。这是一个关于它的外观的*想法*。

`.htaccess`文件：

```
RewriteRule ^img/myfiles/(\w+)\.([a-z]{3,4})$ image.php?name=$1&type=$2 [L] 
```

`image.php`文件：

```
if(Auth::user()->role == 'admin') {
    header("Content-type: image/" + $_SESSION['type']);
    readfile("/path/to/image/" + $_SESSION['name'] + '.' + $_SESSION['type']);
else {
    header("Location: http://mysite.com/login");
} 
```

# c# - SQL Server 使用 C# 备份到文件

> ID：15474750
> 
> 赞同：0
> 
> 时间：2013-03-18T10:37:13.450
> 
> 标签：c#, sql-server

是否可以使用 C# 以编程方式从 SQL Server 数据库创建备份文件（不使用 SMO 或更改权限）？SQL Server 无权`*.bak`在用户文件夹中创建（写入）文件，但程序可以执行此操作。所以我想创建一些对数据库的查询，它会给出数据库的转储，我可以写在文件中。

像这样的东西：

```
SqlCommand sc = new SqlCommand(@"backup database test1 to stream", cnnct);
SqlDataReader r = sc.ExecuteReader();
while(r.read())file.WriteLine(reader.GetString(0)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:47:46.760

这既不可能，也不是一个好主意。MSSQL 数据库过于复杂，无法可靠地转储为 SQL。我知道没有任何工具可以一直做到这一点。

**处理此问题的正确方法**是授予 SQL Server 用户访问该文件夹的权限。找出正在使用的用户（可能是 procexp.exe？）并添加必要的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:11:23.770

是的，但比你想象的要复杂得多**。**您需要实现一个[VDI 规范](http://www.microsoft.com/en-us/download/details.aspx?id=17282)组件（根据定义，它是本机代码，不是托管的）。然后，您可以将此 VDI 加载到 SQL Server 并备份到其中。请参阅[SQL Server 中的 VSS 和 VDI 备份的亮点](http://blogs.msdn.com/b/sqlserverfaq/archive/2009/04/28/informational-shedding-light-on-vss-vdi-backups-in-sql-server.aspx)。看看[SQL Server 压缩备份](http://mssqlcompressed.sourceforge.net/)。

当然，这不太可能是您想要的，实施 VDI 的人不需要问这样的问题。那么你*真正*想做的是什么？似乎您想要的更多是为数据库*编写脚本*，其中有[SMO Scripter](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scripter.aspx)。

# java - Android App 上合并的 wav 文件无法播放

> ID：15474758
> 
> 赞同：0
> 
> 时间：2013-03-18T10:37:32.060
> 
> 标签：java, android, eclipse, wav, android-audiorecord

在我的应用程序中，我将音频录制为 Wav 文件，由于没有真正的暂停功能，我必须将 wav 文件合并为一个。

录制部​​分文件可以正常工作，但是当我合并它们时，新文件无法播放。

我用过这段代码： [https ://stackoverflow.com/a/11452687/2043332](https://stackoverflow.com/a/11452687/2043332)

合并的文件具有正确的文件大小，但无法播放。当我禁用创建标头的方法时，合并的文件仅包含两个音频文件中第一个的音频。

我想标题中一定有问题。任何想法可能是什么问题？

# jquery - 使用 jQuery 动态检查和取消选中复选框：错误？

> ID：15474759
> 
> 赞同：17
> 
> 时间：2013-03-18T10:37:34.283
> 
> 标签：jquery, checkbox

我制作了一个脚本来控制主从复选框（自动检查和取消选中）。

这是我的 JS：

```
$(document).ready(function() {

    $('#myCheck').click(function() {
        $('.myCheck').attr('checked', false);
    });
    $('.myCheck').click(function() {
        if ($('.myCheck').is(':checked')) {
            $('#myCheck').attr('checked', false);
        } else {
            $('#myCheck').attr('checked', true); // IT DOESN'T WORK, WHY ?
            alert("Checkbox Master must be checked, but it's not!");
        }
    });

}); 
```

这是我的 HTML：

```
<input type="checkbox" id="myCheck" checked="checked" />&nbsp;&nbsp;Checkbox Master<br />
<input type="checkbox" class="myCheck" value="1" />&nbsp;&nbsp;Checkbox Slave 1<br />
<input type="checkbox" class="myCheck" value="1" />&nbsp;&nbsp;Checkbox Slave 2 
```

查看我的简单[JsFiddle](http://jsfiddle.net/uQfMs/)以了解问题所在。

**编辑 1：**就像 Inser 说的那样，问题发生在 jQuery 1.9.2 及更高版本上。jQuery 1.8.3 不再有问题。奇怪的...

**编辑 2：** Inser 找到了解决方案，使用**.prop('checked', true)**代替**.attr('checked', true)**。看看下面的评论...

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-18T11:04:08.290

对新版本的 jQuery 使用 prop 方法：

```
$('#myCheck').prop('checked', true);
$('#myCheck').prop('checked', false); 
```

[http://jsfiddle.net/uQfMs/37/](http://jsfiddle.net/uQfMs/37/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T11:08:56.887

你可以试试这个。

```
$('#myCheck').click(function() {
    var checkBoxes = $(this).siblings('input[type=checkbox]');
    checkBoxes.prop('checked', $(this).is(':checked') ? true : false);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:39:55.007

也许您只想检查主复选框：

```
$('#myCheck').click(function() {
       $('.myCheck').attr('checked', false);
       $(this).attr('checked', true);
}); 
```

看到这个[小提琴](http://jsfiddle.net/uQfMs/7/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T11:33:54.620

我做了一些经验，实际上 `$(':checkbox').attr('checked',false);`虽然这可以设置“检查”属性，但它不会继续显示在视觉中。这个`$(':checkbox').prop('checked', true);`完美！希望这能有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-23T00:03:07.137

我为此给你写了一个插件：

```
$.fn.dependantCheckbox = function() {
  var $targ = $(this);
  function syncSelection(group, action) {
    $targ.each(function() {
      if ($(this).data('checkbox-group') === group) {
        $(this).prop('checked', action);
      }
    });
  };
  $('input[type="checkbox"][data-checkbox-group]').on('change', function() {
    var groupSelection = $(this).data('checkbox-group');
    var isChecked = $(this).prop('checked');
    syncSelection(groupSelection, isChecked);
  });
}
$('input[type="checkbox"][data-checkbox-group]').dependantCheckbox();

<input data-checkbox-group="1" type="checkbox" id="test" />
<label for="test">test</label>
<input data-checkbox-group="1" type="checkbox" id="test2" />
<label for="test2">test2</label>
<input data-checkbox-group="2" type="checkbox" id="test3" />
<label for="test3">test3</label>
<input data-checkbox-group="2" type="checkbox" id="test4" />
<label for="test4">test4</label> 
```

[http://codepen.io/nicholasabrams/pen/mJqyqG](http://codepen.io/nicholasabrams/pen/mJqyqG)

# javascript - 从 HAML 中的 Backbone 访问 JSON-Object 的逻辑

> ID：15474760
> 
> 赞同：0
> 
> 时间：2013-03-18T10:37:36.663
> 
> 标签：javascript, json, backbone.js, haml

我想在 HAML 中循环一个主干生成的 JSON 对象

我的视图呈现如下：

```
render: function() {
  this.$el.html(this.template( this.model.toJSON() ))
  return this;
} 
```

this.model.toJSON() 具有以下价值：

```
Object {name: "E", data_set: "[{"value":"g"},{"value":"b"}]"} 
```

我的 HAML 模板如下所示：

```
%script#template{"type" => "text/template"}
  %div.chord
    %span <%= data_set %> 
```

我怎样才能实现对数据集的迭代，以便访问两个值“g”和“b”并将它们显示在模板中。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:28:53.040

在您的视图中，您的模板属性将引用一个 JavaScript 函数，该函数将编译您的 HAML 模板。[有关 HAML 到 JavaScript 函数编译器的信息，请参阅此站点](https://github.com/creationix/haml-js)

```
var x = Backbone.View.extend({
   template: Haml($("#TemplateName").html()), // <-- 
   render: function() {
     // now render your template out
   }
}); 
```

希望这对你有用。我还没有测试过代码，但是当你想改变模板引擎时，这个概念在 Backbone 中是通用的。似乎还有一些其他的 HAML to JavaScript 项目可供您研究。

# ruby-on-rails - 不断收到以下错误“请安装 sqlite3 适配器：`gem install activerecord-sqlite3-adapter`”

> ID：15474761
> 
> 赞同：0
> 
> 时间：2013-03-18T10:37:37.187
> 
> 标签：ruby-on-rails, sqlite, gemfile

尝试运行 rails 时出现错误：“请安装 sqlite3 适配器：`gem install activerecord-sqlite3-adapter`”

已经尝试过捆绑更新和捆绑安装，似乎在我将应用程序推送到heroku之后发生（对另一个应用程序做了同样的事情并得到了同样的错误，所以重新开始）

尝试创建控制器，但错误不断出现。照它说的做了并尝试了命令“gem install activerecord-sqlite3-adapter”并得到以下信息：“在任何存储库中都找不到有效的 gem 'activerecord-sqlite3-adapter' (>= 0)”

并将 gem 添加到 gemfile 中，然后运行 ​​'bundle install' 但没有任何区别

已尝试通过运行以下两个命令再次创建 sqlite db：

bundle exec rake db:create rake db:mirgrate

两者都没有任何区别。使用以下 ruby​​ 版本：ruby 1.9.3p125

使用以下 database.yml：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

Gemfile如下：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

#sqlite for dev
group :development do
 gem 'sqlite3'
end

#PG for Heroku

group :production do
  gem 'pg'
end

gem 'bootstrap-sass'
gem 'devise'
gem "rails_best_practices"

#administration:
gem 'activeadmin'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

整个错误如下所示：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem'
te3-adapter` (sqlite3 is not part of the bundle. Add it to Gemfile.) (LoadError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/sqlite3_
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `re
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `bl
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `lo
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `re
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:82:in `block (2 l
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:36:in `
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:26:in `
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:25:in `
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/lazy_load_hooks.rb:25:in `
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:74:in `block in <
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_ini
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_mi
        from C:/Users/Scotty_W7/Dropbox/Rails Apps/imagemoose/config/environment.rb:5:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `re
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `bl
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `lo
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `re
        from C:/Users/Scotty_W7/Dropbox/Rails Apps/imagemoose/config.ru:3:in `block in <main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
        from C:/Users/Scotty_W7/Dropbox/Rails Apps/imagemoose/config.ru:in `new'
        from C:/Users/Scotty_W7/Dropbox/Rails Apps/imagemoose/config.ru:in `<main>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (requir
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:54:09.797

您必须需要`sqlite adapter`运行您的应用程序。
要安装适配器，只需打开命令提示符并键入

```
gem install activerecord-sqlite3-adapter 
```

稍等片刻即可安装适配器。安装后尝试运行您的应用程序..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T19:36:46.213

您是否将 config/database.yml 更改为使用 postgres 而不是 sqlite？

# html - 在电子邮件激活链接中正确处理 & 符号

> ID：15474767
> 
> 赞同：1
> 
> 时间：2013-03-18T10:37:51.513
> 
> 标签：html, url-parameters

在电子邮件激活链接中我返回

```
<a href="http://www.foo.com/register.php?action=activation&key=123">Activation</a> 
```

在某些客户端（例如 SquirrelMail）`&`中更改为`&amp;`断开链接。

```
<a href="http://www.foo.com/register.php?action=activation&amp;key=123">Activation</a> 
```

如何确保链接在所有电子邮件客户端中正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:17:01.227

您是否尝试过 URL 转义 & 符号？

```
<a href="http://www.foo.com/register.php?action=activation%26key=123">Activation</a> 
```

FWIW，

```
<a href="http://www.foo.com/register.php?action=activation&key=123">Activation</a> 
```

是一个非常好的 HTML 数据，我相信你的问题实际上是在 SquirrelMail 中展示一个错误。

# php - 为什么从 CRON 运行 php 脚本会导致字符编码问题？

> ID：15474770
> 
> 赞同：4
> 
> 时间：2013-03-18T10:37:57.407
> 
> 标签：php, oracle, bash, utf-8, crontab

我有一个从终端运行的 php 脚本，它的作用是：

*   从数据库中抓取一行数据（表存储要由该脚本专门处理的 JSON 字符串）；
*   将 JSON 字符串转换为数组并准备要插入数据库的数据。
*   将所需数据插入数据库

这是脚本：

```
#!/usr/bin/php
<?PHP
    //script used to parse tweets we have gathered from the twitter streaming API
    mb_internal_encoding("UTF-8");
    date_default_timezone_set('UTC');

    require './config/config.php';
    require './libs/db.class.php';

    require './libs/tweetReadWrite.class.php';
    require './libs/tweetHandle.class.php';
    require './libs/tweetPrepare.class.php';
    require './libs/pushOver.class.php';
    require './libs/getLocationDetails.class.php';

    //instatiate our classes
    $twitdb = new db(Config::getConfig("twitterDbConnStr"),Config::getConfig("twitterDbUser"),Config::getConfig("twitterDbPass"));

    $pushOvr = new PushOver();                                          // push error messages to my phone
    $tweetPR = new TweetPrepare();                                      // prepares tweet data
    $geoData = new getLocationDetails($pushOvr);                        // reverse geolocation using google maps API
    $tweetIO = new TweetReadWrite($twitdb,$tweetPR,$pushOvr,$geoData);  // read and write tweet data to the database

    /* grab cached json row from the ORCALE Database
    *
    * the reason the JSON string is brought back in multiple parts is because
    * PDO doesnt handle CLOB's very well and most of the time the JSON string
    * is larger than 4000 chars - its a hack but it works
    *
    * the following sql specifies a test row to work with which has characters like €$£ etc..
    */
    $sql = "
            SELECT a.tjc_id
                 , dbms_lob.substr(tweet_json, 4000,1) part1
                 , dbms_lob.substr(tweet_json, 8000,4001) part2
                 , dbms_lob.substr(tweet_json, 12000,8001) part3
            FROM twtr_json_cache a
            WHERE a.tjc_id = 8368
            ";

    $sth = $twitdb->prepare($sql);
    $sth->execute();
    $data = $sth->fetchAll();

    //join JSON string back together
    $jsonRaw = $data[0]['PART1'].$data[0]['PART2'].$data[0]['PART3'];

    //shouldnt needs to do this, doesnt affect the outcome anyway
    $jsonRaw = mb_convert_encoding($jsonRaw, "UTF-8"); 

    //convert JSON object to an array
    $data = json_decode($jsonRaw,true);

    //prepares the data (grabs the data I need from the JSON object and does some
    //validation etc then finally submits to the database
    $result = $tweetIO->saveTweet($data); // returns BOOL
    echo $result;
?> 
```

现在，如果我从终端运行它`./proc_json_cache.php`或者`php proc_json_chache.php`它工作正常，数据到达数据库 UTF-8 编码并且一切都很好，数据库中的数据看起来像这样`£$@€ < test`。

如果我通过 CRON 调用这个脚本，它仍然会保存数据，但像 €£ 等特殊字符只是正方形，数据库中的数据看起来像这样`��$@��� < test`。

到目前为止，我尝试将以下几行添加到我的 crontab 中：

```
TERM=xterm
SHELL=/bin/bash 
```

这样它就匹配了我当前的 shell ENV 会话设置，并将以下内容添加到调用我的 php 脚本的 bash 脚本中：

```
export NLS_LANG="ENGLISH_UNITED KINGDOM.AL32UTF8"
export LANG="en_GB.UTF-8" 
```

再次匹配我当前的 shell ENV 设置，但是当脚本从终端中的 cron vs direct 运行时，我仍然遇到字符编码问题。

有没有其他人遇到过类似的问题，可以说明如何解决这个问题？提前致谢。

**编辑：**

以下是有关服务器的更多信息：

操作系统：`SUSE Linux Enterprise Server 11` PHP：`5.2.14`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:35:17.840

尝试添加到调用您的 php 脚本的 bash 脚本中：

```
unset LANG LANGUAGE LC_CTYPE
export LANG=en_GB.UTF-8 LANGUAGE=en LC_CTYPE=en_GB.UTF-8 
```

请参阅：[回复：Crontab 的字符集不在 utf-8 中](http://linux.derkeiler.com/Mailing-Lists/Ubuntu/2007-10/msg01117.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:40:26.607

好的，所以在调查了这个问题几个小时之后，它似乎与未传递给 PHP 脚本的 shell 会话变量有关。

我忘记提到的一件事是脚本不是由 cron 作业直接调用，而是由另一个守护进程类型的 PHP 脚本调用，该脚本检查脚本是否已经运行，如果没有，它将用于`pcntl_exec()`调用脚本。

现在因为我没有将环境设置作为第三个参数传递，这意味着我在 crontab 中设置的任何 shell 环境设置都不会传递给我的脚本（共享当前进程空间）。

所以我实际上在做的是：

```
pcntl_exec($script, $args); //script take over the process space
                            //but no continued shell env settings 
```

当我应该做的是：

```
$a = get_defined_vars();
pcntl_exec($script, $args, $a['_SERVER']); //script take over the process space
                                           //but with shell env settings continued 
```

有关更多信息，请参阅[pcntl_exec()的 php.net 手册。](http://www.php.net/manual/en/function.pcntl-exec.php)

# excel - Delphi XE2的Excel列自动调整

> ID：15474776
> 
> 赞同：4
> 
> 时间：2013-03-18T10:38:17.410
> 
> 标签：excel, delphi, delphi-xe2, excel-2010

我正在将一些较旧的代码从 Office 2000 移动到 Office 2010，并且遇到了让 Excel 自动调整列的问题

正在运行的代码如下：

```
for x := 1 to LV.Columns.Count do
  XLApp.Columns[x].EntireColumn.AutoFit; 
```

其中 XLApp 是 TExcelApplication 组件

当我查看 VBA 时，等效代码应该是

```
 Columns("A:A").EntireColumn.AutoFit 
```

更改代码以使范围与 VBA 匹配对我来说很容易，但这似乎不是问题。编译器返回的错误是

```
Class does not have a default property 
```

并且`[x]`突出显示。代码完成不提供任何我可以看到的选择单个列的方式，无论是整数还是范围。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T10:53:22.113

您拥有的代码将适用于后期绑定的 COM。但是您声明您正在使用早期绑定的 COM。

对于早期绑定的 COM，您需要使用以下内容：

```
ExcelApp.Range['A1','A1'].EntireColumn.AutoFit; 
```

我无法解释代码过去是如何工作的。也许从 Excel 类型库创建的导入单元有一些微妙的不同。

# objective-c - Xcode：NSUserDefaults 动态键

> ID：15474777
> 
> 赞同：0
> 
> 时间：2013-03-18T10:38:18.847
> 
> 标签：objective-c, nsstring, nsuserdefaults

我正在尝试做一件事但没有成功。我不知道这是一个概念错误还是其他什么。

我在 NSUserDefaults 中保存了一些数据，但我想动态创建密钥，因为我事先不知道我将拥有多少个密钥，因此它们将根据其他字符串动态创建。

这是为了保存数据：

```
[defaults setObject:anObject forKey:@"aKey"];
[defaults synchronize]; 
```

这就是我正在做的

```
NSString *myString = @"aString";
[defaults setObject:anObject forKey:@"%@",myString];
[defaults synchronize]; 
```

不幸的是，它返回“方法调用的参数太多，预期 2，有 3”

你认为我想做的事有可能吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:41:18.243

如果方法需要 NSString，则不能指定格式。

代替

```
[defaults setObject:anObject forKey:@"%@",myString]; 
```

和

```
[defaults setObject:anObject forKey:[NSString stringWithFormat:@"%@", myString]]; 
```

或者简单地说：

```
[defaults setObject:anObject forKey:myString]; 
```

# java - 从 java 执行 Jython 脚本并获取结果

> ID：15474780
> 
> 赞同：1
> 
> 时间：2013-03-18T10:38:23.710
> 
> 标签：java, python, websphere, jython

我正在为我的应用程序使用 IBM WebSphere 服务器。我通过命令行使用`Java and Jython`. 我已经编写了 Jython 脚本来获取服务器配置，但是我怎样才能从`Java swing application`即发送参数执行此脚本并获取 Jython 脚本结果作为回报。

经过[这样](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)的搜索后，我想我需要安装 Python。我可以在不安装 Python 的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:44:52.873

两种选择；

1-)[使用 WebSphere Application Server 管理 Java API 创建自定义 Java 管理客户端程序](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tjmx_customjava.html)。Java API 和 wsadmin 脚本操作相同的管理服务 MBean，因此除了语法之外它们是相同的。您可以将 Jython 脚本转换为 Java 例程并直接使用它们。

2-) 由于您已经开发了脚本，这可能更诱人；您可以用来`Runtime.exec`从 Swing 应用程序中生成和执行 wsadmin 脚本作为外部进程。

# c# - 如何总结列表框列中的所有值并将其显示在文本块中？

> ID：15474797
> 
> 赞同：3
> 
> 时间：2013-03-18T10:39:13.913
> 
> 标签：c#, windows-phone-7, listbox

**我如何总结红色框中的金额并将其显示在文本块（黄色框）中？**

![在此处输入图像描述](../Images/b655c6c6e59204fe34517433bdb49a8d.png)

**如下图所示，我已将我的 observable 集合绑定到列表框，以便在列表框中显示数据**

![列表框](../Images/040cd30d9cca432834f93ab993e24ef3.png)

**此外，我还为列表框定义了数据模板。**

![在此处输入图像描述](../Images/ef870cb9e013308bde002357a4da037a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:48:56.850

您必须将另一个属性（例如`Sum`）添加到您的 ViewModel 中，将其绑定到您的`TextBlock`并在每次`ToDoBills`集合更改时计算它的值。

您可以使用 LINQ 来计算总和：

```
Sum = ToDoBills.Sum(i => i.Amount); 
```

*更新*

您可能已经`INotifyPropertyChanged`在您的类上实现了接口，因此在更改集合时`ViewModel`使用它来更新属性值：`Sum`

```
private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    if(propertyName == "ToDoBills")
        UpdateSumValue();
}

private void UpdateSumValue()
{
     Sum = ToDoBills.Sum(i => i.Amount);
} 
```

# wordpress - 将 wordpress 网站移动到 plesk 时出现问题 - 错误 404

> ID：15474799
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:39:20.317
> 
> 标签：wordpress, http-status-code-404

将我的网站导入 wordpress 3.5.1，页面最终显示，但没有 CSS。

任何人都可以帮忙：

[http://tinyurl.com/cd3l3or](http://tinyurl.com/cd3l3or)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:31:52.357

重新安装了网站，它们工作正常！谢谢！

# postgresql - 如何在 Windows 7 中增加 postgres 8.4 shared_buffer

> ID：15474804
> 
> 赞同：2
> 
> 时间：2013-03-18T10:39:27.637
> 
> 标签：postgresql

我正在尝试将 Windows 7 机器中 postgresql.conf 文件中的 shared_buffer 从 1GB 增加到 2 GB，因为我有 8 GB 的 RAM，但是当我进行更改并尝试启动 postgres 服务时，它没有启动，当我查看时即使是查看器，它也会给我以下错误。

```
 2013-03-18 16:07:41 ISTFATAL:  could not create shared memory segment: 8
 2013-03-18 16:07:41 ISTDETAIL:  Failed system call was MapViewOfFileEx. 
```

请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:49:10.457

You're almost certainly running a 32-bit PostgreSQL if you're using 8.4, so the shared memory size is limited by the process's 2GB of total available address space. 32-bit Windows (including 32-bit processes running on 64-bit Windows via Wow64) uses a 2GB/2GB user/kernel split.

The error message means that Pg is trying to allocate more shared memory than the system can map so the system call is failing. You can't really fix this, but you don't need to.

Even 1GB shared_buffers is probably too much for 32-bit Pg on Windows and benchmarks have tended to back that up. You're almost certainly better off keeping `shared_buffers` fairly low and increasing `effective_cache_size` to tell the planner how much disk cache the OS has available to it. You should probably plan an upgrade to PostgreSQL 9.2 for general performance improvements and a longer maintenance lifetime [per the version policy](http://www.postgresql.org/support/versioning/).

Consider posting another question to dba.stackexchange.com with details on WHY you want to increase it. What problem are you trying to solve? If it's a slow query read the [postgresql tag info](https://stackoverflow.com/tags/postgresql/info) and [postgresql-performance tag info](https://stackoverflow.com/tags/postgresql-performance/info). If you do post a new question, please add a link to it here so people can follow.

# php - 如果字符串变长，fputcsv 失败

> ID：15474811
> 
> 赞同：0
> 
> 时间：2013-03-18T10:39:42.983
> 
> 标签：php, csv, fputcsv

我正在尝试使用 fputcsv 写入 csv 文件，并且当字符串太长时它似乎失败了。

fputcsv 写的时候有限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T18:29:42.273

`trim()`保存之前！我尝试了一些方法来解决它（比如 stripslashes() 等等）。当我手动添加 fputcsv($fp, 'too looooooooooooo...ong string') 时，它起作用了。然后我查看了对于这个函数来说太长的 db 字段，并在值中发现了一些空格。所以这里是代码：

```
function get_items($db_handler) {
$array = array();
$query = "SELECT * FROM `db` WHERE <some condition>";
    $result = mysqli_query($db_handler, $query);
$i = 0;
while ($row = mysqli_fetch_assoc($result)) {    
     foreach ($row as  $key => $value) $array[$i][$key] = trim($value);
         $i++;  
}
mysqli_free_result($result);
return $array;
}
// now we put records into csv from the assoc array returned by get_items():

$items = get_items($db_handler);
$fp = fopen($file, 'a+');
foreach ($items as $fields) //
{
     fputcsv($fp, $fields);
} 
fclose($fp); 
```

不要忘记在函数中的 foreach 内部进行 trim($value) ！

# sql - 为什么 PostgreSQL 不在小表上使用我的索引？

> ID：15474812
> 
> 赞同：3
> 
> 时间：2013-03-18T10:39:43.597
> 
> 标签：sql, postgresql, postgresql-performance

我在 PostgreSQL 中有下表：

```
CREATE TABLE index_test
(
    id int PRIMARY KEY NOT NULL,
    text varchar(2048) NOT NULL,
    last_modified timestamp NOT NULL,
    value int,
    item_type varchar(2046)
);
CREATE INDEX idx_index_type ON index_test ( item_type );
CREATE INDEX idx_index_value ON index_test ( value ) 
```

我做了以下选择：

```
explain select * from index_test r where r.item_type='B';
explain select r.value from index_test r where r.value=56; 
```

执行计划的解释如下：

```
index_test r 上的 Seq 扫描（成本=0.00..1.04 行=1 宽度=1576）
    过滤器：((item_type)::text = 'B'::text)'

```

据我了解，这是全表扫描。问题是：为什么不使用我的索引？

可能是，原因是我的表中的行太少？我只有20个。您能否为我提供一条 SQL 语句，以便用随机数据轻松填充我的表以检查索引问题？

我找到了这篇文章：http: [//it.toolbox.com/blogs/db2luw/how-to-easily-populate-a-table-with-random-data-7888](http://it.toolbox.com/blogs/db2luw/how-to-easily-populate-a-table-with-random-data-7888)，但它对我不起作用。语句的效率并不重要，重要的是简单性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T11:09:36.217

> *也许，原因是我的表中的行太少了？*

是的。对于表中总共 20 行，seq 扫描总是比索引扫描快。很可能这些行无论如何都位于单个数据库块中，因此 seq 扫描只需要单个 I/O 操作。

如果你使用

```
explain (analyze true, verbose true, buffers true) select .... 
```

您可以看到有关实际情况的更多详细信息。

顺便说一句：您不应该将`text`其用作列名，因为这也是 Postgres 中的数据类型（因此是保留字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:01:38.110

您找到的示例适用于 DB2，您可以在 pg 中使用`generate_series`它。例如像这样：

```
INSERT INTO index_test(data,last_modified,value,item_type) 
SELECT
    md5(random()::text),now(),floor(random()*100),md5(random()::text) 
    FROM generate_series(1,1000);
SELECT max(value) from index_test; 
```

[http://sqlfiddle.com/#!12/52641/3](http://sqlfiddle.com/#!12/52641/3)

上面小提琴中的第二个查询应该使用仅索引扫描。

# jenkins - Jenkins 在构建失败的情况下不执行 shell 脚本

> ID：15474813
> 
> 赞同：4
> 
> 时间：2013-03-18T10:39:53.273
> 
> 标签：jenkins, hudson

我在 Jenkins 作业中有一个构建步骤，它执行一个 shell 脚本。当构建失败时，它被省略。我能做些什么来避免这种情况并以任何构建状态执行我的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:37:51.760

您应该可以使用[Any Build Step Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin)来实现这一点。使用它来运行您的脚本作为构建后操作。

如任何构建步骤插件页面中所述，它似乎还需要[灵活的发布插件](https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin)才能允许将任何构建步骤作为构建后操作运行。

# arrays - 更好的 int 数组之间的总和

> ID：15474816
> 
> 赞同：2
> 
> 时间：2013-03-18T10:39:56.380
> 
> 标签：arrays, algorithm, sum, max

我有这个数组

```
int arr = new int[] { 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 
978, 978, 978, 978, 978, 978, 696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 
696, 696, 696, 696, 696, 696, 696, 696, 678, 678, 678, 678, 678, 678, 678, 678, 678, 678, 
446, 446, 446, 446, 446, 446, 446, 446, 446, 446 };

20 elements 978
20 elements 696
10 elements 678
10 elements 446 
```

我需要找到 sum 的最佳组合，直到 6000。

狐狸示例：

```
978 + 978 + 978 + 978 + 696 + 696 + 696 = 6000 
```

这是一个最佳组合。

找到最佳组合后，我需要删除求和的元素以再次找到最佳和。

在这种情况下，我的数组将是：

```
16 elements 978
17 elements 696
10 elements 678
10 elements 446 
```

那么，下一个更好的总和将是：

```
 978 + 978 + 978 + 978 + 696 + 696 + 696 = 6000 
```

然后：

```
978 + 978 + 978 + 978 + 696 + 696 + 696 = 6000 
```

然后 ：

```
978 + 978 + 978 + 978 + 696 + 696 + 696 = 6000 
```

在这一刻，我的数组是：

```
4 elements 978
8 elements 696
10 elements 678
10 elements 446 
```

现在，我最好的总结是：

```
696 + 696 + 696 + 696 + 696 + 696 + 696 + 678 + 446 = 5996 
```

还有我的数组：

```
4 elements 978
1 elements 696
9 elements 678
9 elements 446 
```

嗯......我需要做总和，直到我的数组为空。

有什么建议吗？

可以在 js、c# 或 vb 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:07:18.753

这是我对您的任务的单次迭代的解决方案。我会及时找到“最佳匹配”组合，`O(m * n)`其中`m`目标数（在您的情况下为 6000），n 是数组中剩余的元素总数（初始迭代中为 53）。我的解决方案的内存复杂度将是`O(m)`

我将一个辅助符号：

*   `parent[m + 1]`- 存储用于形成特定总和的最后一个数字。如果总和尚未达到，则值为 -1
*   `maxm`- 之间的最大数量`arr`
*   `list<int> chosen`- 为特定迭代选择的数字
*   `best`根据您的定义，最好的金额

这是我的解决方案的伪代码

```
parents[i] = { -1 if i != 0; -2 otherwise} // distinguish the empty sum
for (i = 0; i < n; i++)
  for (j = m + maxm; j > 0; j--)
    if parents[j] == -1 && j - arr[i] >= 0 && arr[i] != -1
       parents[j] = i

// choose the best; choose only numbers with parents[i] != -1
for i = 0; i < m + maxm; i++
   if parents[m + i] != -1
      best = m + i
      break
   else if parents[m - i] != -1
      best = m - i
      break
while best != 0 
   chosen.add(best - parents[best])
   best = parents[best] 
```

**编辑**`best`根据您的定义添加计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:28:21.347

.. 这是我在 C# 中的代码：

```
Dictionary ex = new Dictionary<Integer,Short>();

ex.Add(978, 20); // 20 elements 978
ex.Add(696, 20); // 20 elements 696
ex.Add(678, 10); // 10 elements 678
ex.Add(446, 10); // 10 elements 446 
```

使用它更省时，而不是所有元素的数组，然后不是每次都计算总和，而是预先计算总和：

```
class Ex
{
    Dictionary<Integer,Short> ex;
    long sum;

    public Ex ()
    {
        ex = new Dictionary<Integer,Short>();
        sum = 0;
    }

    public void add (int number, short frequency)
    {
        ex.Add(number, frequency);
        sum += (number * frequency);
    }

    public void remove (int number)
    {
        sum -= (number * ex.Get(number));
        ex.Remove(number);
    }

    public void increment (int number, short frequency)
    {
        ex.Set(number, ex.Get(number)+frequency);
        sum += (number * frequency);
    }

    public void subtract (int number, short frequency)
    {
        ex.Set(number, ex.Get(number)-frequency);
        sum -= (number * frequency);
    }

    public long getSum ()
    {
        return sum;
    }
} 
```

希望这可以帮助 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-15T19:26:31.640

好的，我不记得我是如何偶然发现这个话题的，但我想我已经设法找到了一种快速算法来解决这个问题。至少对于给定的数据。我的解决方案是在 JS 中，我感觉更舒服。它可以在不到 7 毫秒的时间内解决，但我相信如果需要更快，它可以简单地转码为 Haskell 或 C。

好的，首先以免看到解决方案...

```
function getSum(arr,sum){
  function getCombinations(arr){
    var len = arr.length,
       subs = Array(Math.pow(2,len)).fill();
    return subs.map((_,i) => { var j = -1,
    	                           k = i,
                                 res = [];
                               while (++j < len ) {
                                 k & 1 && res.push(arr[j]);
                                 k = k >> 1;
                               }
                               return res;
                             }).slice(1);
  }
  function getPossibles(a,t){
    var fo = a[0],
    maxTry = Math.min(Math.floor(t/fo.n),fo.c);

    return a.length > 1 ? Array(maxTry).fill()
                                       .map((_,i) => ({n:fo.n, c:maxTry-i}))
                                       .reduce((p,c) => (p.push(...getPossibles(a.slice(1),t-c.n*c.c).map(e => a.length > 2 ? [c,...e]
                                                                                                                            : [c,e])),p),[])
                        : [{n:fo.n, c: maxTry}];
  }
  var  hash = arr.reduce((p,c) => (p[c] ? p[c]++ : p[c] = 1,p),{}),
   condense = Object.keys(hash)
                    .reverse()
                    .map(k => ({n: k, c:hash[k]}));
     combos = getCombinations(condense);
  possibles = combos.reduce((p,c) => (c.length > 1 ? p.push(...getPossibles(c,sum))
                                                   : p.push(getPossibles(c,sum)),p),[]);
  return possibles.filter(p => p.reduce((s,o) => s += o.n*o.c,0) === sum)
                  .map(e => e.reduce((p,c) => p.concat(Array(c.c).fill(c.n)),[]));
}

var arr = [978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 978, 696, 696, 696, 696, 696, 696, 696, 696 ,696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 696, 678, 678, 678, 678, 678, 678, 678, 678, 678, 678, 446, 446, 446, 446, 446, 446, 446, 446, 446, 446],
 result = [],
     ps = 0,
     pe = 0;
ps = performance.now();
result = getSum(arr,6000);
pe = performance.now();
console.log(result);
console.log("Done in:", pe-ps);
```

我试图使代码尽可能明确。我将尝试在这里逐步解释。

我们有一个函数来解决这个问题`getSum()`，其中我们有两个实用函数，分别是`getCombinations()`和`getPossibles()`。

一旦我们收到我们的值数组（`arr`）和目标（`sum`），我们首先在下面建立一个哈希表`hash`，结果是这样的；

```
{ '446': 10, '678': 10, '696': 20, '978': 20 } 
```

显然，通过告诉我们哪个数字存在多少次，我们可以得到数组的映射。

然后我将数组重新映射为更简单的对象形式并将其存储`condense`为

```
[ { n: '978', c: 20 },
  { n: '696', c: 20 },
  { n: '678', c: 10 },
  { n: '446', c: 10 } ] 
```

此时我们需要得到这些对象的组合，以便以后解决所有的可能性。对于这个任务，我们使用了`getCombinations()`效用函数。结果如下；

```
[ [ { n: '978', c: 20 } ],
  [ { n: '696', c: 20 } ],
  [ { n: '978', c: 20 }, { n: '696', c: 20 } ],
  [ { n: '678', c: 10 } ],
  [ { n: '978', c: 20 }, { n: '678', c: 10 } ],
  [ { n: '696', c: 20 }, { n: '678', c: 10 } ],
  [ { n: '978', c: 20 }, { n: '696', c: 20 }, { n: '678', c: 10 } ],
  [ { n: '446', c: 10 } ],
  [ { n: '978', c: 20 }, { n: '446', c: 10 } ],
  [ { n: '696', c: 20 }, { n: '446', c: 10 } ],
  [ { n: '978', c: 20 }, { n: '696', c: 20 }, { n: '446', c: 10 } ],
  [ { n: '678', c: 10 }, { n: '446', c: 10 } ],
  [ { n: '978', c: 20 }, { n: '678', c: 10 }, { n: '446', c: 10 } ],
  [ { n: '696', c: 20 }, { n: '678', c: 10 }, { n: '446', c: 10 } ],
  [ { n: '978', c: 20 },
    { n: '696', c: 20 },
    { n: '678', c: 10 },
    { n: '446', c: 10 } ] ] 
```

所以现在我们知道我们将尝试什么。但我们必须巧妙地尝试。我们知道目标总和是 6000，我们不应该允许过多的计算。棘手的部分来了。我们有`getPossibles()`实用函数，它将只返回计数（`c`属性）值总和小于 6000 的对象。好吧，我受到了我的[Array.prototype.cartesian()](https://stackoverflow.com/a/39820324/4543207)工具的影响，它工作得很好。

Ok`getPossibles()`将获取一个对象数组（压缩数据），并为我们提供总和小于 6000 的集合的可能组合。例如，对于`[ { n: '978', c: 20 }, { n: '696', c: 20 }, { n: '678', c: 10 } ]`我们将收到的组合；

```
[ [ { n: '978', c: 5 }, { n: '696', c: 1 }, { n: '678', c: 0 } ],
  [ { n: '978', c: 4 }, { n: '696', c: 3 }, { n: '678', c: 0 } ],
  [ { n: '978', c: 4 }, { n: '696', c: 2 }, { n: '678', c: 1 } ],
  [ { n: '978', c: 4 }, { n: '696', c: 1 }, { n: '678', c: 2 } ],
  [ { n: '978', c: 3 }, { n: '696', c: 4 }, { n: '678', c: 0 } ],
  [ { n: '978', c: 3 }, { n: '696', c: 3 }, { n: '678', c: 1 } ],
  [ { n: '978', c: 3 }, { n: '696', c: 2 }, { n: '678', c: 2 } ],
  [ { n: '978', c: 3 }, { n: '696', c: 1 }, { n: '678', c: 3 } ],
  [ { n: '978', c: 2 }, { n: '696', c: 5 }, { n: '678', c: 0 } ],
  [ { n: '978', c: 2 }, { n: '696', c: 4 }, { n: '678', c: 1 } ],
  [ { n: '978', c: 2 }, { n: '696', c: 3 }, { n: '678', c: 2 } ],
  [ { n: '978', c: 2 }, { n: '696', c: 2 }, { n: '678', c: 3 } ],
  [ { n: '978', c: 2 }, { n: '696', c: 1 }, { n: '678', c: 4 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 7 }, { n: '678', c: 0 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 6 }, { n: '678', c: 1 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 5 }, { n: '678', c: 2 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 4 }, { n: '678', c: 3 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 3 }, { n: '678', c: 4 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 2 }, { n: '678', c: 5 } ],
  [ { n: '978', c: 1 }, { n: '696', c: 1 }, { n: '678', c: 6 } ] ] 
```

嗯……一旦你手头有这些数据，那么减少你所拥有的就是一件简单的事情。所以只有最后一行；

```
possibles = combos.reduce((p,c) => (c.length > 1 ? p.push(...getPossibles(c,sum))
                                                 : p.push(getPossibles(c,sum)),p),[]);
                  .filter(p => p.reduce((s,o) => s += o.n*o.c,0) === sum)
                  .map(e => e.reduce((p,c) => p.concat(Array(c.c).fill(c.n)),[])); 
```

是我们如何在 JS 中在不到 7 毫秒的时间内获得解决方案。

# macos - 使控制适应其内容

> ID：15474819
> 
> 赞同：0
> 
> 时间：2013-03-18T10:40:03.927
> 
> 标签：macos, cocoa, autolayout

我的用户界面有问题。我想让一些控件（即只读`NSTextField`（又名多行标签）和a `NSTokenField`）显示它们包含的所有文本，这些文本可能会有很大差异（从几个字到很多行）。

我想将它们嵌入到 中`NSScrollView`，但也许这还不够，因为我无法实现我的目标......

有人可以帮我解决这个问题吗？

谢谢

编辑：我添加了一张图片。

![用户界面](../Images/7818a87334814f4bb30125aec47cdabf.png)

也许滚动条不是正确的解决方案。正如您在图片中看到的，我有一个“简单”attribute1 字段，然后是包含大量文本的第二个字段（我需要在其中显示更多文本），以及一个包含大量文本。

我看到了两种选择（即使我还不知道如何实现它们..）：

*   使田地高度增长（但我只是推迟了问题：如果它们变得如此之大以至于窗口也需要增长怎么办？
*   将它们嵌入到滚动视图中（并在这种情况下使滚动条可见，以便用户知道还有更多内容要阅读）。我认为第二种选择更好..但简单地将字段嵌入滚动视图并不能解决问题，所以我问我是否也需要以编程方式实现某些东西（和子类化`NSView`）......

EDIT2：仍然有问题：如果我设置为约束“大小> =我的最小值”，那么文本字段会正确增长..当然没有滚动视图..如果，那么，我尝试将它嵌入`NSScrollView`到文本中再次剪辑（并且滚动视图不滚动）...

EDIT3：我附上了一个示例项目，我在其中尝试显示问题（没有我的主要项目的所有其他内容） [http://www.filedropper.com/testtextfield](http://www.filedropper.com/testtextfield)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:56:45.980

您的要求是制作具有 NSTextField 和 NSTokenField 的自定义控件。

您可以做的是，创建一个 NSView 并将它们都嵌入其中，然后在 NSScrollView 中显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:29:04.990

根据您想要做什么，Anoop 的建议可能很好，将它们嵌入`NSView`到`NSScrollView`. 但是，如果您希望滚动视图中的每个字段具有与滚动视图相同的宽度但动态更改它们的高度，您将需要`NSViewFrameDidChangeNotification`在滚动视图上监听并更改`preferredMaxLayoutWidth`每个`NSTextField`s 和以`NSTokenField`匹配滚动视图的宽度。我可能会建议将包含子类化`NSView`并让它监听通知。

编辑：

我不确定您遇到了什么具体问题，但我将如何分解问题：

1）创建一个子类`NSView`作为您的容器视图。

2) 将文本视图嵌入到容器视图的实例中，然后将该容器视图嵌入`NSScrollView`

3) 文本视图应该对其父视图具有前导和尾随空间约束（可能为 0，但无论对您有用）以及彼此的顶部和底部约束以及对父视图的顶部和底部约束，以将它们放入堆叠配置中。

4) 在容器视图子类中，`NSViewFrameDidChangeNotification`在其包含的滚动视图上注册，当它收到通知时，`-setPreferredMaxLayoutWidth:`在每个文本字段上注册以匹配 NSScrollView 的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T10:42:36.937

我解决了我的问题（嗯..它更像是一种解决方法而不是真正的解决方案）：

*   对于标签，我使用了 NSTextView，只读，不可选择且具有透明背景（因此它看起来像只读的 NSTextField，但带有滚动条）。
*   对于我使用 SSYTokenField 的令牌字段（我在这里找到：[https://github.com/jerrykrinock/ClassesObjC](https://github.com/jerrykrinock/ClassesObjC)）..对于我当前的要求（只读和在创建窗口时决定的字段大小）它可以工作..我不知道这是否可以在更复杂的情况下工作。顺便说一句：我读到可可自动布局在 NSScrollView 方面仍然存在一些问题（嗯.. 恰恰相反：D）。我必须用旧的支柱和弹簧（自动调整大小的面罩）进行测试，看看我是否还有问题..

# sql - SQL：从要显示的表中删除重复的外键

> ID：15474823
> 
> 赞同：0
> 
> 时间：2013-03-18T10:40:25.923
> 
> 标签：sql, sql-server, select

```
Orders
OrderNo          ProductName
1                Product A
2                Product B
1                Product C
3                Product C
2                Product D 
```

WHERE 信息属于两 (2) 个表：

```
Orders
OrderNo          ProductID
1                1
2                2
1                3
3                3
2                4 
```

和

```
Products
ProductID        ProductName
1                Product A
2                Product B
3                Product C
4                Product D 
```

订单号值是来自自动生成的另一个表（“OrderNumbers”）的外键。我尝试使用 GROUP BY 关键字，但是，这是不允许的，因为我使用了 INNER JOIN 语句；

> Products.ProductName 列无效，因为它既不包含在agregate 函数也不包含在 GROUP BY 子句中

输出应显示：

```
Output
OrdersNo         
1                
2
3 
```

**更新：**尝试使用 DISTINCT 关键字，但仍显示具有重复 OrderNo (FK) 的记录

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:46:24.647

`DISTINCT`将在这里达到您的目的：

```
SELECT DISTINCT OrderNo FROM Orders 
```

# ios - 无法调用 UIWebView 上的所有函数

> ID：15474825
> 
> 赞同：0
> 
> 时间：2013-03-18T10:40:27.750
> 
> 标签：ios, objective-c, oop

我正在尝试`UIWebView`在 iOS 上转换 a`setTransform`并且我也尝试使用`setHidden`.

这些功能在当前设置`loadRequest`中都不起作用，但可以；为什么会这样，我怎样才能得到`setTransform`和`setHidden`工作？

```
// ViewController.h
@class EAGLView, ARUtils;
@interface ViewController : ARViewController {
    UIWebView* webview;
}
@property (assign) UIWebView* webview;

// ViewController.mm
@synthesize webview;

-(void)viewDidLoad{
    [super viewDidLoad];
    webview = [[[UIWebView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
    [self.view addSubview:webview];
}

// EAGLView.mm
ViewController* uic;
for( UIView* next = [self superview];  next; next = next.superview){
    UIResponder* nextResponder = [next nextResponder];
    if([nextResponder isKindOfClass:[ViewController class]]){
        uic = (ViewController*)nextResponder;
    }
}

// These functions don't work:
[[[uic webview] layer] setTransform:matrix];
[[uic webview] setHidden:YES];

// And this one does:
[[uic webview] loadRequest:requestObj]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:30:45.503

大多数 UIKit 类（如`UIWebView`）只能在主线程中安全使用。当您在后台线程上时，您可以使用 GCD 在主队列（与主线程相关联）上执行块：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:54:05.493

您是否正确导入了 QuartzCore 标头？我有时想知道为什么我的代码不起作用，然后我意识到我忘了导入这个头文件..

```
#import <QuartzCore/QuartzCore.h> 
```

编辑 ：

你可以试试这个代码，它适用于 Layer-Backed view ：

```
CATransform3D matrix = CATransform3DRotate(web.layer.transform, 1.14, 0.0, 1.0, 0.0);

CABasicAnimation *animTransform = [CABasicAnimation animationWithKeyPath:@"transform"];
animTransform.fromValue = [NSValue valueWithCATransform3D:web.layer.transform];
animTransform.toValue = [NSValue valueWithCATransform3D: matrix];

animTransform.duration = 1;  // arbitrary chosen time
animTransform.autoreverses = NO; // we don't want animation to go back from beginning when ended
animTransform.repeatCount = 0;
animTransform.delegate=self;  // optional, you can use a delegate to start methods when the animation ends

// real change of the values, because the CABasicAnimation is only visual
web.layer.transform = aTransform;

// and start the animation
[web.layer  addAnimation:animTransform forKey:nil]; 
```

您可以在此处找到有关动画（和支持图层的 // 图层托管视图）的非常有用的信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html #//apple_ref/doc/uid/TP40004514-CH3-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW1)

# php - 我的代码出了什么问题，它给出了解析错误

> ID：15474828
> 
> 赞同：0
> 
> 时间：2013-03-18T10:40:38.690
> 
> 标签：php, google-oauth, parse-error, php-parse-error

`Parse error: syntax error, unexpected T_STRING`这段代码在行给出解析错误`$gender=$user['gender'];`......这段代码有什么问题......需要帮助......谢谢

```
<?php
 require_once 'config/functions.php';
 session_start();
 $user=$_SESSION['google_data'];
 if(!empty($user)){
  $email = $user['email'];
  $fname = $user['given_name'];
  $lname = $user['family_name'];
  $gender=$user['gender'];
  $dob = $user['birthday'];
  $location = '';
  $picture = $user['picture'];
  $uid = $user['id'];
  $ousername = '';
  $link = $user['link'];
       $provider = 'google';
       $verified = $user['verified_email'];

      $gen=0;
      if($gender == 'male'){$gen=1;} else{$gen=0;}
      $new_dob = date( "Y-m-d H:i:s", strtotime($dob) );

      $userObj = new User();
      $userdata = $userObj->checkUser($email,$fname,$lname,$gen,$new_dob,$location,$picture,$uid,$ousername,$link,$provider,$new_verified); 
      if(!empty($userdata)){         
        $_SESSION['id'] = $userdata['user_id'];
        $_SESSION['oauth_id'] = $userdata['user_oauth_id'];
        $_SESSION['username'] = $userdata['user_oauth_username'];
        $_SESSION['picture'] = $userdata['picture'];            
        $_SESSION['link'] = $userdata['link'];
        $_SESSION['fname'] = $userdata['user_fname'];
        $_SESSION['lname'] = $userdata['user_lname'];
        $_SESSION['gender'] = $userdata['user_gender'];
        $_SESSION['email'] = $userdata['user_email'];
        $_SESSION['oauth_provider'] = $userdata['user_oauth_provider'];             
        $_SESSION['oauth_id'] = $uid;

     } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");

    }
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:41:43.837

这条线可能是问题所在：

```
     }
     } 别的 {

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:55:32.000

您需要`}`从最后一个中删除，因为那是多余的。

所以最后一行将是。

```
} else {
      # For testing purposes, if there was an error, let's kill the script
      die("There was an error.");
 } 
```

**完整代码**

```
<?php
    require_once 'config/functions.php';
    session_start();
    $user=$_SESSION['google_data'];

    if(!empty($user))
    {
        $email = $user['email'];
        $fname = $user['given_name'];
        $lname = $user['family_name'];
        $gender=$user['gender'];
        $dob = $user['birthday'];
        $location = '';
        $picture = $user['picture'];
        $uid = $user['id'];
        $ousername = '';
        $link = $user['link'];
        $provider = 'google';
        $verified = $user['verified_email'];

        $gen=0;
        if($gender == 'male'){$gen=1;} else{$gen=0;}

        $new_dob = date( "Y-m-d H:i:s", strtotime($dob) );

        $userObj = new User();
        $userdata = $userObj->checkUser($email,$fname,$lname,$gen,$new_dob,$location,$picture,$uid,$ousername,$link,$provider,$new_verified); 

        if(!empty($userdata))
        {
            $_SESSION['id'] = $userdata['user_id'];
            $_SESSION['oauth_id'] = $userdata['user_oauth_id'];
            $_SESSION['username'] = $userdata['user_oauth_username'];
            $_SESSION['picture'] = $userdata['picture'];            
            $_SESSION['link'] = $userdata['link'];
            $_SESSION['fname'] = $userdata['user_fname'];
            $_SESSION['lname'] = $userdata['user_lname'];
            $_SESSION['gender'] = $userdata['user_gender'];
            $_SESSION['email'] = $userdata['user_email'];
            $_SESSION['oauth_provider'] = $userdata['user_oauth_provider'];             
            $_SESSION['oauth_id'] = $uid;

        }
    }
    else
    {
        die("There was an error.");
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:52:50.117

请像这样使用

```
$gender = isset( $user['gender'] ) ? $user['gender'] : '' ; 
```

# android - 在android中加载jquery-mobile页面

> ID：15474830
> 
> 赞同：2
> 
> 时间：2013-03-18T10:40:44.710
> 
> 标签：android, jquery-mobile

如何在我的 android 应用程序中加载 jquery-mobile 网页，以及我需要将我的 jquery-mobile html 文件放在我的 android 应用程序文件夹中的位置，以便我可以访问它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:48:54.853

是的，您可以将 HTML 页面包装在 Android 应用程序中。

您可以将文件添加到您的`assets`文件夹中，并可以在 Android 中显示它们`WebView`。阅读更多关于[Android WebView](http://developer.android.com/reference/android/webkit/WebView.html)和这里的[例子](http://www.mkyong.com/android/android-webview-example/)。使用 WebView，您必须执行以下操作。

我假设`wv`是我们的布局 xml 中使用的 WebView ID

```
WebView wv= (WebView) findViewById(R.id.wv);
wv.getSettings().setPluginsEnabled(true);
WebSettings webSettings = wv.getSettings();
webSettings.setJavaScriptEnabled(true);
wv.loadUrl("file:///android_asset/myfile.html"); 
```

如果您想操作 HTML 字符串，那么您可以执行以下操作

```
InputStream is = getAssets().open("myfile.html");
int size = is.available();

byte[] buffer = new byte[size];
is.read(buffer);
is.close();

String str = new String(buffer);
str = str.replace("old string", "new string"); 
```

更进一步，有一个很棒的 Java 库可以在 HTML 字符串上做很多事情（解析、查询等）。[查看 jSoup](http://jsoup.org/)。

如果您对混合应用程序（Web 和本机）感兴趣，请查看[PhoneGap](http://phonegap.com/)、[Appcelerator](http://www.appcelerator.com/)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:46:33.660

将 html 文件放在应用程序的 assets 文件夹中，然后使用 webview 加载相同的文件。

```
 WebView wv= (WebView) findViewById(R.id.wv);
 wv.getSettings().setPluginsEnabled(true);
 WebSettings webSettings = wv.getSettings();
 webSettings.setJavaScriptEnabled(true);
 wv.loadUrl("file:///android_asset/myfile.html"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:48:20.600

尝试[phonegap](http://phonegap.com/)将您的 html5 应用程序部署到移动设备中。

该`/www`文件夹包含一个示例网站。

您可以尝试摆弄它并查看他们如何将移动 api 公开到 javascript 中。在他们的网站上有很多关于这方面的帮助。

您可以将 jquery 移动文件与网站一起添加，也可以从他们的 cdn 动态加载。但是，我更愿意将它与应用程序一起发布，但这也意味着将来会定期更新应用程序。

# ios - 错误：缺少框架

> ID：15474836
> 
> 赞同：0
> 
> 时间：2013-03-18T10:41:04.177
> 
> 标签：ios, objective-c, xcode, linker-errors

我创建了自己的框架，它有 Tabbars。在另一个程序上实现时，它给出`Error`如下：

```
ld: framework not found OwnTabFramework
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我挣扎了 2 天。anyBody 可以帮我找出我做错了什么。或者如何解决这种错误。？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:26:51.520

您必须将框架包含在编译过程中。从 Xcode Build-Setting->SearchPAth->Framework-Search-Path。

或命令行的一个简单示例：

```
clang main.c -F /frameworkPath../ -framework MyFramework 
```

因为链接器不会神奇地找到它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:27:35.480

将其添加到项目中，并像苹果一样放入链接框架中

![在此处输入图像描述](../Images/00f993f8bfb1bb976a298974980f80a1.png) ![在此处输入图像描述](../Images/70aa2c92d95280b5278b9c80b51cb3a3.png)

# wpf - xml 命名空间 http://schemas.infragistics.com/xaml 中不存在标记 LineSeries.ToolTip

> ID：15474837
> 
> 赞同：0
> 
> 时间：2013-03-18T10:41:10.823
> 
> 标签：wpf, xaml, infragistics

这是我用于图表的代码，一切正常，但是当我添加 LineSeries.ToolTip 标记时出现此错误： xml 命名空间[http://schemas.infragistics.com中不存在标记 LineSeries.ToolTip /xaml](http://schemas.infragistics.com/xaml)

```
<ig:XamDataChart Name="Datachar" VerticalZoomable="True" HorizontalZoomable="True" Width="550" Height="220">
                                <ig:XamDataChart.Axes>
                                    <ig:CategoryXAxis x:Name="xAxis" ItemsSource="{Binding Data}" Label="{}{Date:MM/yyyy}">
                                        <ig:CategoryXAxis.LabelSettings>
                                            <ig:AxisLabelSettings Location="OutsideTop" Extent="45" VerticalAlignment="Center" Visibility="Visible" />
                                        </ig:CategoryXAxis.LabelSettings>
                                    </ig:CategoryXAxis>
                                    <ig:NumericYAxis x:Name="yAxis">
                                        <ig:NumericYAxis.LabelSettings>
                                            <ig:AxisLabelSettings Location="OutsideLeft" Extent="50" VerticalAlignment="Center" Visibility="Visible"/>
                                        </ig:NumericYAxis.LabelSettings>
                                    </ig:NumericYAxis>
                                </ig:XamDataChart.Axes>

                                <ig:XamDataChart.Series>
                                    <ig:LineSeries ItemsSource="{Binding Data}" XAxis="{Binding ElementName=xAxis}" YAxis="{Binding ElementName=yAxis}" ValueMemberPath="Value" Thickness="1" MarkerType="None"/>
                                    <ig:LineSeries ItemsSource="{Binding Index}" XAxis="{Binding ElementName=xAxis}" YAxis="{Binding ElementName=yAxis}" ValueMemberPath="Value" Thickness="1" MarkerType="None"/>
                                    <ig:LineSeries.ToolTip>
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Margin="2" Text="Value" VerticalAlignment="Center"></TextBlock>
                                                <TextBlock Margin="2" Text="{Binding Item.Value, StringFormat='0,0'}" VerticalAlignment="Center" />
                                            </StackPanel>
                                        </StackPanel>
                                    </ig:LineSeries.ToolTip>
                                </ig:XamDataChart.Series>
                            </ig:XamDataChart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:19:35.113

在您定义工具提示的 XAML 中存在错误。具体应该是元素的子元素，目前不是。更新的标记：

```
<ig:XamDataChart Name="Datachar" VerticalZoomable="True" HorizontalZoomable="True" Width="550" Height="220">
    <ig:XamDataChart.Axes>
        <ig:CategoryXAxis x:Name="xAxis" ItemsSource="{Binding Data}" Label="{}{Date:MM/yyyy}">
            <ig:CategoryXAxis.LabelSettings>
                <ig:AxisLabelSettings Location="OutsideTop" Extent="45" VerticalAlignment="Center" Visibility="Visible" />
            </ig:CategoryXAxis.LabelSettings>
        </ig:CategoryXAxis>
        <ig:NumericYAxis x:Name="yAxis">
            <ig:NumericYAxis.LabelSettings>
                <ig:AxisLabelSettings Location="OutsideLeft" Extent="50" VerticalAlignment="Center" Visibility="Visible"/>
            </ig:NumericYAxis.LabelSettings>
        </ig:NumericYAxis>
    </ig:XamDataChart.Axes>

    <ig:XamDataChart.Series>
        <ig:LineSeries ItemsSource="{Binding Data}" XAxis="{Binding ElementName=xAxis}" YAxis="{Binding ElementName=yAxis}" ValueMemberPath="Value" Thickness="1" MarkerType="None"/>
        <ig:LineSeries ItemsSource="{Binding Index}" XAxis="{Binding ElementName=xAxis}" YAxis="{Binding ElementName=yAxis}" ValueMemberPath="Value" Thickness="1" MarkerType="None">
        <ig:LineSeries.ToolTip>
            <StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="2" Text="Value" VerticalAlignment="Center"></TextBlock>
                    <TextBlock Margin="2" Text="{Binding Item.Value, StringFormat='0,0'}" VerticalAlignment="Center" />
                </StackPanel>
            </StackPanel>
        </ig:LineSeries.ToolTip>
            </ig:LineSeries>
    </ig:XamDataChart.Series>
</ig:XamDataChart> 
```

我所做的更改是将第二个系列元素的结尾更改为以“>”而不是“/>”结尾，并在工具提示之后添加了结束标记。

# android - 当我有网络时如何排队作业？

> ID：15474842
> 
> 赞同：-3
> 
> 时间：2013-03-18T10:41:21.387
> 
> 标签：android

我正在开发一个应用程序，我在离线时在数据库中创建条目。当我获得数据或 WiFi 连接时，我需要能够让应用程序将这些条目推送到 Web 服务器，然后将它们从队列中删除，而不是从应用程序的数据库中删除。**我想知道是否有任何图书馆已经这样做了？**如果需要，我愿意编写自己的代码，但我想我会在这里问一下，看看是否有人听说过。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:45:13.507

我不确定是否有现有的图书馆可以做到这一点。但我也通过简单地使用几个或 java 文件为我的应用程序做同样的事情。我使用**广播接收器**来通知是否有网络连接。如果没有网络连接，我会在每次网络调用之前更新和检查变量。如果变量是正的，我发送 HTTP 请求，否则我将它放入数据库中。

每次网络连接恢复时（使用相同的广播接收器），我都会检查数据库中的未决请求并将它们发送过来并相应地更新数据库。

# wordpress - 如何在不停用插件的情况下重置 wordpress 插件

> ID：15474852
> 
> 赞同：1
> 
> 时间：2013-03-18T10:41:49.423
> 
> 标签：wordpress, function, plugins

```
function set_copyright_options() {
    delete_option('ptechsolcopy_notice');
    delete_option('ptechsolcopy_reserved');

    add_option('ptechsolcopy_notice','Copyright &copy;');
    add_option('ptechsolcopy_reserved','All Rights Reserved');

}
register_activation_hook(__FILE__, 'set_copyright_options'); 
```

嗨，我在停用和激活插件时使用代码使其成为默认插件。但是我需要使用管理端的重置按钮使其成为默认值而不停用插件的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:55:59.253

用于[`add_menu_page`](http://codex.wordpress.org/Function_Reference/add_menu_page)创建页面。在回调函数中，添加一个带有重置按钮的表单：

```
function reset_my_options() {
  add_menu_page( 'Reset Options', 'Reset Options', 'manage_options', 'reset-options', 'reset_option_page' );
}

function reset_option_page() {
if ( isset( $_POST['reset_options'] ) && $_POST['reset_options'] === 'true' ) {

delete_option('ptechsolcopy_notice');
delete_option('ptechsolcopy_reserved');

}
  ?>

  <div class="wrap">
    <h2>Reset options</h2>

    <form action="<?php echo admin_url( 'admin.php?page=reset-options' ); ?>" method="post">
      <input type="submit" value="Click to reset plugin options" style="float:left;" />
      <input type="hidden" name="reset_options" value="true" />
    </form>
  </div>
  <?php
} 
```

您还可以向其中添加[随机数](http://codex.wordpress.org/WordPress_Nonces)以提高安全性。

顺便说一句，您可以[`update_option`](http://codex.wordpress.org/Function_Reference/update_option)在插件激活中使用而不是`delete_option`and `add_option`。

# javascript - 我网站中的搜索框在页面内搜索

> ID：15474854
> 
> 赞同：-3
> 
> 时间：2013-03-18T10:41:54.143
> 
> 标签：javascript, html

我想添加一个在我的网站内搜索的搜索框。我不想添加任何外部搜索引擎。一个javascript代码会很有帮助。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:45:13.243

在 HTML 中试试这个：

```
<form method="get" action="http://www.google.com/search">
    <input type="text" name="q" size="31"
     maxlength="255" value="" />
    <input type="submit" value="Google Search" />
    <input type="radio" name="sitesearch" value="" />
    The Web
    <input type="radio" name="sitesearch"
     value="yoursite.com" checked />My site name here
</form> 
```

# c++ - 如何让谷歌标志忽略未知的命令行标志？

> ID：15474857
> 
> 赞同：0
> 
> 时间：2013-03-18T10:42:00.793
> 
> 标签：c++, gflags

我正在使用谷歌标志进行命令行解析。这是一个很棒的工具，但不知何故我需要它来忽略未知标志而不是打印一行

```
ERROR: unknown command line flag ... 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-16T19:51:40.457

**如果 someflag1 或 someflag2未定义，“--someflag1=1 --someflags2=4 --undefok=someflag1,someflag2”**将不会导致错误。但是，如果它们被定义，那么它们将获得在命令行中定义的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:05:14.210

如果您使用 a [`flagfile`](http://gflags.googlecode.com/svn/trunk/doc/gflags.html#special) ，则将忽略无法识别的标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:35:31.607

正如您在 Google Flags 的[CommandLineFlagParser](http://code.google.com/p/gflags/source/browse/trunk/src/gflags.cc?r=81#898)源代码中看到的那样，它分两个阶段进行解析：阶段 1 解析任何看起来像标志的东西，如果它不知道如何处理它，则存储它以防出错之后报告。没有选项可以改变这种行为。

# javascript - Twitter 引导模式输入字段焦点

> ID：15474862
> 
> 赞同：54
> 
> 时间：2013-03-18T10:42:40.050
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap

我有来自示例的以下模态形式：

```
<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    Enter something: <input type="text" id="myInput">
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

我希望我的输入字段在显示模态后聚焦。
我已经尝试过自动对焦和在`$('modal').shown()`事件上设置字段焦点。它有点聚焦字段（我有另一个事件，当字段聚焦时显示标签）但实际上字段没有聚焦，我必须`TAB`再次按下聚焦它。我也尝试过这样的事情：

```
$(".modal").on('shown', function() {
    $(this).find("[autofocus]:first").focus();
}); 
```

并为我的领域设置`autofocus:"autofocus"`属性。它产生了相同的效果。
当 modal 只是一个普通的 div 时，我尝试的一切都适用，它专注于页面加载。但是当模态由按钮触发时 - 没有任何作用（当然我也改变了逻辑，当模态只是一个普通的 div 时，我可以将其集中在加载上，当我通过按钮触发时，我会考虑它并尝试相应地解决它）。

我想要的只是在加载模式后关注的字段，以便它具有闪烁的光标并且用户可以开始输入。

唯一有效的是更改 bootstrap.js 本身，我已经`$("#myInput").focus()`在 bootstrap.js 模态部分中放置了某个地方，但是我忘记了它在哪里，第二 - 我认为更改 bootstrap.js API 不好，必须更容易和更优雅的解决方案。请给我建议，谢谢xD

**更新：**
首先，感谢您的帮助！多亏了你，我发现我遇到的问题是 Rails 问题。

这是我所做的：
1）。`rails generate controller home index`
2）。*app/views/home/index.html*和*app/assets/javascript/something.js*就像 robertklep 提供的这个**jsFiddle** ：http : [//jsfiddle.net/JCaFp/](http://jsfiddle.net/JCaFp/)
4)。*jquery-1.9.1.js*和*bootstrap.js*位于*app/assets/javascript/*中（两者都是从网站上更新的，没有任何变化）
5）。*app/views/layouts/application.html.erb* - 我猜这个文件是我们解决方案的关键：

```
<!DOCTYPE html>
<html>
<head>
  <title>Udc</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

还是不行。所有 js 文件都包含在内，但是当我在浏览器中打开我的模式时 - 输入会暂时获得焦点，然后再次失去焦点。

我也试过这个：

```
 <%= javascript_include_tag "jquery" %>
  <%= javascript_include_tag "bootstrap" %>
  <%= javascript_include_tag "somehow" %> 
```

还是一样的东西。
建议？:)

**更新：**

**解决了！**

将我的更改`somehow.js`为

```
$(document).ready(function() {
    $(".modal").on('shown', function() {
        $(this).find("[autofocus]:first").focus();
    });
}); 
```

和`application.html.erb`样式表：

```
 <%= javascript_include_tag "jquery" %>
  <%= javascript_include_tag "bootstrap" %>
  <%= javascript_include_tag "somehow" %> 
```

它按预期工作。再次感谢！

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-12-17T08:44:44.673

我认为在 Bootstrap 3 中[显示](http://getbootstrap.com/javascript/#modals-usage)的事件名称已更改，如[本文](https://stackoverflow.com/a/11634933/41621)所述。

> 正如[@MrDBA 所](https://stackoverflow.com/users/488293/mrdba)指出的，在 Bootstrap 3 中，事件名称 [更改](http://getbootstrap.com/javascript/#modals-usage)为 `shown.bs.modal`.

因此，对于 Bootstrap 3 使用：

```
$('#myModal').on('shown.bs.modal', function () {
    $('#myInput').focus();
}) 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-05-09T18:26:30.273

对于不需要每个对话框的特定代码的通用解决方案，您可以使用：

```
$('.modal').on('shown.bs.modal', function () {
  $(this).find('input:text:visible:first').focus();
}) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-12T06:49:08.403

尝试删除`tabindex="-1"`，它工作得很好。

所以改变这个：

```
<div class="modal fade" id="modalID" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

对此：

```
<div class="modal fade" id="modalID" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-18T10:57:19.347

Just changing `$(this).find("[autofocus]:first").focus();` to `$(this).find("#myInput").focus();` made it work for me. If you have changed the Bootstrap API and want to undo that change, you can always just re-download and replace the file.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-04-28T01:30:24.060

如果您对“shown.bs.modal”有疑问，只需设置一个超时。

```
setTimeout(function() {
$('#myInput').focus();
}, 500); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-03-10T14:20:16.470

我删除了 tabindex="-1" ，效果很好。

更改前的我的 HTML 代码：

```
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

更改后我的 HTML 代码：

```
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

我的输入代码：

```
<input id="tblModalNombreConductor" type="text" maxlength="50" placeholder="Ej: Armando Casas" autofocus/> 
```

而且我的 Javascript 代码中没有配置。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-06T23:33:52.667

我认为更新的答案非常聪明。这是解决它的另一种方法。

Bootstrap 3.2 的 js 文件包含一个脚本，用于在模态的淡入淡出过渡期间和之后管理焦点。这会干扰任何专注于模式中表单字段的 jQuery、javascript 或 rails+HTML5 - bootstrap 会在模式加载后移除您的焦点。

要删除引导程序覆盖您的焦点的能力，请在 Modal 脚本区域中注释掉这一行：

```
transition ?
    that.$element.find('.modal-dialog') // wait for modal to slide in
      .one($.support.transition.end, function () {
        // that.$element.focus().trigger(e)
        // the line above is stealing your focus after modal loads!
      })
      .emulateTransitionEnd(300) :
    that.$element.focus().trigger(e) 
```

现在您的领域应该能够以任何模式形式获得焦点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-02T17:58:32.063

你可以这样做：例如

```
<%= f.text_field :first_name, class: "form-control", placeholder: "Enter first name", autofocus: true%> 
```

只需添加以下内容：自动对焦：true

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-17T09:03:20.573

你也可以试试

```
$('#the-modal').on('shown.bs.modal', function(e) {
    $('#the-input').focus();
}); 
```

# sonarqube - Java 中的 Sonar-SQL 查询

> ID：15474870
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:43:16.743
> 
> 标签：sonarqube

我们可以在**.html.erb**文件和**.rb**文件中使用 SQL 查询从 Sonar 数据库中检索数据。如何在 Java 文件中使用 SQL 查询从声纳中检索数据。有没有办法做到这一点。任何例子。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:04:32.997

您不应该直接查询数据库，因为它不是 API。请改用声纳 API。

我知道目前，一些 Ruby 模板直接通过 Active Record 查询数据库，但这是邪恶的，因为数据库可能会在没有通知的情况下发生变化。因此，我们迟早会删除这个特性，并提供一个真正的 API 来访问 Rails 端的资源。

**数据库不是 API。**

# c# - 使用存储过程的报表查看器

> ID：15474872
> 
> 赞同：0
> 
> 时间：2013-03-18T10:43:24.773
> 
> 标签：c#, asp.net, sql-server

我在 sql server 2008 中编写了 2 个存储过程。一个过程从一个表返回一个字段值，另一个过程从一些表返回许多字段值。我需要在报告 viwer .rdlc(asp.net,c#) 中显示所有值。如何一次使用两个存储过程。

# c# - 从后面的代码调用 Javascript 方法

> ID：15474874
> 
> 赞同：2
> 
> 时间：2013-03-18T10:43:27.170
> 
> 标签：c#, javascript, asp.net, code-behind

我在 Javascript 中有一个函数可以使标签不可见。我想从后面的代码中调用这个函数。我无法让它隐形。这是两行代码。

后面的 C# 代码：

```
 Page.ClientScript.RegisterStartupScript(GetType(), "MyFunction", "MyFunction();", true); 
```

javascript:

```
 <script type ="text/javascript" language="javascript">
          function MyFunction()
          {
                 document.getElementById("Label8").style.display = 'none';

          }
          </script> 
```

请让我知道是否有任何错误。看起来控制不仅仅是方法定义。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:45:51.837

在标签中使用`ClientID`服务器控件（标签）`getElementById`或将[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)设置为静态，并确保 html 元素对脚本的可用性，因为您可以将脚本标签放在*关闭*标签之前`body`

```
<script type ="text/javascript" language="javascript">
      function MyFunction()
      {
          document.getElementById("<%= Label8.ClientID %>").style.display = 'none';    
      }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:07:37.623

我假设您的页面上有这样的标签；

```
<asp:Label ID="lblExample" runat="server" ClientIDMode="Static" Text="Hello"></asp:Label> 
```

那我建议你用jQuery，你的js函数应该是这样的；

```
<script type ="text/javascript" language="javascript">
   function hideLabel() 
   {
     $("#lblExample").hide();
   }
</script> 
```

最后在后面的代码中像这样调用你的 js 函数；

```
 ClientScript.RegisterStartupScript(this.GetType(), DateTime.Now.ToString(), "hideLabel();", true); 
```

如果你使用`ScriptManager`然后`MasterPage`这样调用；

```
 ScriptManager.RegisterStartupScript(this,this.GetType(), DateTime.Now.ToString(), "hideLabel();", true); 
```

# xml - 从 Oracle 数据库读取的 XML 文件中的额外空格 - 为什么？

> ID：15474875
> 
> 赞同：1
> 
> 时间：2013-03-18T10:43:27.593
> 
> 标签：xml, oracle, xmltype

我正在试验 Python 和 Oracle XML DB。我在 Oracle 11g 数据库中有一个包含 XMLType 列和 ID 列的表。XML 列的存储模型是对象关系的。有时我需要获取整个 XML 文件，而且通常超过 4000 个字符，因此我使用此查询来获取 CLOB：

```
select t.representation.getclobval()
from myxmldocs t 
where id=:documentId 
```

当我运行这个查询时，输出包括额外的空格，XML 元素之间的换行符和制表符在我插入的 XML 文档中绝对不存在。效果是某种格式，因此输出如下所示：

```
<A>\n
\t<B></B>\n
\t\t<C>Some text</C>\n
\t\t<C>Some more text</C>\n
\t<B></B>\n
... 
```

等等。相当漂亮和可读，但为什么我得到它？它还会弄乱我在额外空格上使用的其他库。

如果我删除 getclobval() 我的 Python 客户端不会得到一个 CLOB 而是一个对象，我不知道如何处理它。

这似乎是一致的；我使用 sqlplus 命令行客户端遇到了这个问题，并且还使用不同的 XML 模式创建了其他表，然后查询它们。在我的原型的早期版本中，我的 XMLType 列使用了 CLOB 存储模型并且没有这个问题。

我应该如何重写查询以获取带有 XML 文件的 CLOB 而无需额外的格式？

* * *

更新：根据评论中的要求，这是我`select dump(t.representation) from myxmldocs t where id=:documentId`从命令行客户端运行查询得到的输出（当然，用数据库中的实际现有 ID 替换 :documentId）：

```
DUMP(T.REPRESENTATION)
--------------------------------------------------------------------------------
Typ=58 Len=218: 32,156,148,1,0,0,0,0,80,193,223,20,0,0,0,0,216,15,47,21,0,0,0,0,
80,44,55,21,0,0,0,0,0,202,154,59,160,15,0,0,160,15,0,0,1,0,4,0,220,190,195,71,1,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,174,33,65,0,15,0,72,0,1,0,0,0,0,0,0,0,49,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T12:08:38.133

在 11g 中你可以使用`xmlserialize`（事实上你不应该再使用`getclobval`了。出于性能原因不推荐使用）

```
 SQL> select t.test.getclobval() from testxml t where id = 1;

T.TEST.GETCLOBVAL()
--------------------------------------------------------------------------------
<A>
  <B>
    <C>foo</C>
    <C>foo2</C>
  </B>
</A>

SQL> select xmlserialize(document t.test as clob no indent) from testxml t where id = 1;

XMLSERIALIZE(DOCUMENTT.TESTASCLOBNOINDENT)
--------------------------------------------------------------------------------
<A><B><C>foo</C><C>foo2</C></B></A> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:07:08.047

该`getClobVal()`方法不应修改数据的缩进。您的 XML 可能在插入期间或之前已格式化。

您可以[转换](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/t_xml.htm#i1009783)XMLType 以删除空格：

```
SQL> SELECT XMLTYPE.createxml(
  2  '<a>
  3     <b><c></c></b>
  4  </a>'
  5  ).transform(XMLTYPE(
  6  '<?xml version="1.0"?>
  7  <xsl:stylesheet version="1.0"
  8     xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  9     <xsl:output method="xml" indent="no"/>
 10     <xsl:strip-space elements="*"/>
 11     <xsl:template match="@*|node()">
 12     <xsl:copy>
 13        <xsl:apply-templates select="@*|node()"/>
 14     </xsl:copy>
 15  </xsl:template>
 16  </xsl:stylesheet>
 17  ')).getClobVal() FROM dual;

<?xml version="1.0" encoding="utf-8"?> 
<a><b><c></c></b></a> 
```

# php - 将 MySQL 数据库与 web 服务连接

> ID：15474879
> 
> 赞同：1
> 
> 时间：2013-03-18T10:43:34.713
> 
> 标签：php, html, mysql, web-services

我想将 MySQL 数据库连接到 Web 服务。我遵循了一个教程，但它不起作用。我不知道，为什么它不起作用。该表已构建，但应使用数据库中的值填充。我只是想显示它。有人有想法吗？这是我的源代码：

```
enter code here
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    </head>
    <body>
     <?php
       $mysqlhost="localhost"; // MySQL-Host angeben

       $mysqluser="root"; // MySQL-User angeben

       $mysqlpwd="webservice"; // Passwort angeben

       $mysqldb="**********"; // Gewuenschte Datenbank angeben

       $connection=mysql_connect($mysqlhost, $mysqluser, $mysqlpwd) or die ("Verbindungsversuch                    fehlgeschlagen");

        mysql_select_db($mysqldb, $connection) or die("Konnte die Datenbank nicht waehlen."); 
        mysql_select_db( MYSQL_DATENBANK ) or die("Auswahl der Datenbank fehlgeschlagen");

      $sql="SELECT * FROM car";

     $adressen_query = mysql_query($sql) or die("Anfrage nicht erfolgreich");
    ?>
    <table cellpadding="1" cellspacing="3" border="1">

    <tr>

    <td>ID</td>

    <td>Producer</td>

    <td>Type</td>

    <td>BJ</td>

    <td>HP</td>

    <td>Mileage</td>

    </tr>

    <?php

    while ($adr = mysql_fetch_array($adressen_query)){

    ?>

    <tr>

    <td><?=$adr['ID']?></td>

    <td><?=$adr['Producer']?></td>

    <td><?=$adr['Type']?></td>

    <td><?=$adr['BJ']?></td>

    <td><?=$adr['HP']?></td>

    <td><?=$adr['mileage']?></td>

    </tr>

    <?php

    }

    ?>
    </table>
    </body>
    </html> 
```

# listview - 从适配器更改活动按钮状态

> ID：15474881
> 
> 赞同：0
> 
> 时间：2013-03-18T10:43:42.850
> 
> 标签：listview, button, android-activity, adapter

我的 Activity 中有一个 ListView，当用户选中/取消选中任何 ListView 项目上的复选框时，我必须更改我的 DeleteButton 状态（VISIBLE - GONE）。

我试着做这样的事情：

```
holder.cb_row_adminNotesCheck
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        int getPosition = (Integer) buttonView.getTag();
                        mNotesList.get(getPosition).setSelected(isChecked);
                        if (isChecked) {
                            map.put(getPosition, true);
                        } else {
                            map.remove(getPosition);
                        }
                        setDeleteButtonVisibility();

                    }
                });
..
private void setDeleteButtonVisibility() {
    LayoutInflater inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    Button deleteButton = (Button) inflater.inflate(R.layout.adminnotes,
            null).findViewById(R.id.ib_adminnotesDeleteMore);

    deleteButton.setVisibility(statesMap.size() > 0 ? View.VISIBLE : View.GONE);
} 
```

但我的 DeleteButton 没有任何反应。我调试了应用程序，一切似乎都很好，但是 DeleteButton 的“识别”：

```
activity.getLayoutInflater().inflate(R.layout.adminnotes,
            null).findViewById(R.id.ib_adminnotesDeleteMore); 
```

并将其设置为可见/消失。

PS。请注意，deleteButton 不是行按钮，它来自整个列表视图的主要活动。

任何有价值的答案将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:25:47.413

也许我错过了 smth，但我设法做到这一点的唯一方法是使 DeleteButton 变量 - 公共和静态（在 Activity 内部），并在 onCheckedChange 方法中的 Adapter 中访问它。

# java - java 是否有等效于 python __call__ 的功能？

> ID：15474882
> 
> 赞同：1
> 
> 时间：2013-03-18T10:43:44.163
> 
> 标签：java, python

刚开始学习python，我遇到了`__call__`方法。我通过运行一个简单的示例了解何时`__init__`被调用以及何时被调用：`__call__`

```
class Constructor:
    def __init__(self, a):
        print "__init__ called"

    def __call__(self):
        print "__call__ called"

    def dummy(self):
        print "a dummy method called"

print "creating x obj"
x = Constructor(1)
print "calling x object"
x() 
```

控制台输出：

```
creating x obj
__init__ called
calling x object
__call__ called 
```

我的问题是：

1.  我来自java背景，我知道`__init__`映射到java构造函数，java是否有一个等价物`__call__`来帮助我更好地理解这一点？
2.  有人可以给我一个简单的例子，说明什么时候`__call__`有用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:49:08.723

`__call__`相当于`()`在类上重载运算符。这在 C++ 中是可能的，但在 Java 中是不可能的。它允许拥有*函数对象*（有时称为*函子*）。

在 Python 中，这些被称为*可调用对象*。

简单来说，这允许您将对象视为函数。

这些概念的实际用途超出了这个答案的范围，但互联网上有很多信息。例如[维基百科](http://en.wikipedia.org/wiki/Function_object)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T10:47:00.190

`__call__`不，在 Java中没有任何东西。您不能将对象用作方法调用。您必须创建一个方法并调用它：

```
class Constructor{
    Constructor(){
        System.out.println("Constructor called");
    }

    void doStuff(){
        System.out.println("do called");
    }

    public static void main(String[] args){
        System.out.println("Creatng x obj");
        x = new Constuctor();
        System.out.println("Calling x obj");
        x.doStuff();
    }
} 
```

# ruby-on-rails - Rails：如何过滤结果？

> ID：15474883
> 
> 赞同：3
> 
> 时间：2013-03-18T10:43:46.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在我的用户控制器的索引操作中，我能够捕获与`current_user`ActiveRecord::Relation 对象属于同一城市的所有用户`@users`。在我看来，我能够迭代`@users`并显示结果。我想做的是提供`current_user`更多选项来过滤结果。我想在视图中添加一个表单和过滤器按钮，这将允许 current_user 选择过滤器，例如：

1.  最小年龄和最大年龄（下拉）
2.  宗教（下拉复选框）
3.  饮食（下拉复选框）
4.  等等。

current_user 进行选择并单击过滤器后，将根据所选条件过滤结果。我想知道如何建立一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T13:22:19.400

通过在您的用户模型中创建范围方法，在没有库的情况下自己执行此操作也相对简单。例如：

```
 class User

   def self.filtered_by_age(opts = {})
     min = opts[:min]
     max = opts[:max]
     user = User.arel_table

     if min && max
       self.where(:age => min..max)
     elsif min && !max
       self.where(user[:age].gt(min))
     elsif max && !min
       self.where(user[:age].lt(max))
     else
       self.all
     end
   end

 end 
```

然后你可以打电话给

```
@users.filtered_by_age(min: 25, max: 52) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T10:51:20.693

最好的选择是 Ranksack：[https](https://github.com/ernie/ransack) ://github.com/ernie/ransack 这提供了以搜索为中心的功能。

或者

Squeel 为 ActiveRecord 的高级查询提供了一个易于使用的界面：[https ://github.com/ernie/squeel](https://github.com/ernie/squeel)

# java - 使用数组（或其他方式）获取数据

> ID：15474885
> 
> 赞同：0
> 
> 时间：2013-03-18T10:43:49.673
> 
> 标签：java, android, arrays

我有一种方法可以从数据库答案表中获取答案 ID（特定于每个答案）-getAnswerId()

但我想改变它。我在问题数据库中创建了 answer0,answer1, answer2 列，并希望将 0,1,2 作为 answerId 。如何为 getAnswerId() 识别它？

*不久;*

**列名：answer0,answer1,answer2**

**取“0,1,2”作为“ *answerId* ”并放入“ *getAnswerId()* ”**

然后我想像这样使用它：

> 公共 int getAnswerId() {
> 
> ```
>  return this.answerId;
> } 
> ```

编辑：

sqlhelper：

```
final String query = "SELECT " +
            "answer._id, answerlang.AnswerText, answer.Correct, " +
            "answersquestions.QuestionID" +
            " FROM answersquestions" +
            " INNER JOIN answerlang" +
            " ON answersquestions.AnswerID = answerlang.AnswerID" +
            " INNER JOIN answer" +
            " ON answerlang.AnswerID = answer._id" +
            " WHERE answersquestions.QuestionID IN ( " +
            allQuestionIds +
            " )  ORDER BY answersquestions.QuestionID ";
    this.cursor = this.db.rawQuery(query, null);

    if (this.cursor.moveToFirst()) {
        do {
            for (final Question q : questions) {
                if (q.getQuestionId() == this.cursor.getInt(3)) {
                    q.addAnswer(new Answer(this.cursor.getInt(0),
                            this.cursor.getString(1),
                            (this.cursor.getInt(2) == 1 ? true : false)));
                }
            }
        } while (this.cursor.moveToNext());
    }
    this.cursor.close(); 
```

this.cursor.getInt(0) 接受 answer._id (_ids from answer table)

我更改了数据库结构并将 answer0、answer 1、answer 2 添加到 answerlang 表中。所以我需要一张表中每个答案的 id 。我想取**QuestionID**和 **0**（或 1,2）（来自 answer0,1,2）所以**answerID = QuestionID+0**对每个答案都是特别的

问题是如何间隔**QuestionID+0**去放置，而不是**this.cursor.getString(0)**

// // // // \ \ \ \

**我的问题总结：**

```
 use **this.sample.getInt()** instead of this.cursor.getInt(0)
for example:

    this.sample.getInt() : will have interval 10,11,12 for question 1 (QuestionID=1, answer0=0 so answer0 id = 10, answer1 id = 11, answer2 id = 12  as spesific id )

     will have interval 20,21,22 for question 2 (QuestionID=2, answer0=0 so answer0 id = 20 ...... as spesific id ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:51:46.427

假设当**questionId=1 和 answerFromDB="answer1"**你可以做的是首先将问题 id 传递给方法，然后将 questionId 和 answerID 中的整数联系到一个新字符串中并将其解析为一个整数，因此结果将是**11**在这种情况下。如果**questionId=1 和 answerFromDB="answer2"**那么 answerid 将为**12**等等。

```
public int getAnswerId( String questionId) {
//here questionId=0 or 1 or 2 etc in string format 
String newAnswerId=questionId+answerFromDB.substring(8) 
 return Integer.parseInt(newAnswerId);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:01:02.530

您可能必须使用

```
Integer.parseInt(answerFromDB.substring(8));
"answerid0".substring(8) = 0
"answerid1".substring(8) = 1 
```

ETC

# excel - 在不使用 On Error Resume Next 的情况下测试 Worksheet 是否存在

> ID：15474894
> 
> 赞同：0
> 
> 时间：2013-03-18T10:44:17.553
> 
> 标签：excel, vba

我`On Error Resume Next`在我的`VBA`. 这是一个懒惰的习惯。

`autofit`如果工作表尚未从工作簿中删除，则以下将是某些列 - 如果已删除，则会引发错误，编译器将移至下一行代码。

我可以使用什么其他方法来达到相同的结果？

```
On Error Resume Next
    bkExampleWorkbook.Sheets("Foo").Columns("E:G").AutoFit
    bkExampleWorkbook.Sheets("Bar").Columns("K:M").AutoFit
On Error GoTo 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:10:11.643

假设您正在使用相同的工作表名称并且只想在它们存在时调整它们的大小，您可以从一个函数开始，以便轻松查看它们是否存在并在它们存在时调整它们的大小：

## 基础知识

```
Function AutoFitSheetRange(objWorkBook As Workbook, _
                           strSheetName As String, _
                           strSheetRange As String) As Boolean

    Dim sheet As Worksheet, boolSheetFound As Boolean
    For Each sheet In objWorkBook.Worksheets
        If sheet.Name Like strSheetName Then
            boolSheetFound = True
            Exit For
        End If
    Next
    If boolSheetFound Then
        objWorkBook.Sheets(strSheetName).Range(strSheetRange).AutoFit
        AutoFitSheetRange= True
    Else
        AutoFitSheetRange= False
    End If
End Function 
```

## 使用它

然后，您可以以适合您调整特定范围大小的任何方式遍历您的工作表（并将其简写为列）：

```
AutoFitSheetRange bkExampleWorkbook, "Foo", "E:G"
AutoFitSheetRange bkExampleWorkbook, "Bar", "K:M" 
```

## 不要忘记添加错误处理

您不想摆脱错误处理，但您希望该函数确保您仍然处理错误，但比 On Error Resume Next 更优雅，这可能会导致不良结果：

```
'Error Handled version
Function AutoFitSheetRange(objWorkBook As Workbook, _
                           strSheetName As String, _
                           strSheetRange As String) As Boolean
On Error Goto AutoFitSheetRangeError

    Dim sheet As Worksheet, boolSheetFound As Boolean
    For Each sheet In objWorkBook.Worksheets
        If sheet.Name Like strSheetName Then
            boolSheetFound = True
            Exit For
        End If
    Next

    If boolSheetFound Then 'Resize the range!
        objWorkBook.Sheets(strSheetName).Range(strSheetRange).AutoFit
        AutoFitSheetRange = True
    Else
        AutoFitSheetRange = False
    End If

Exit Function ' No error hit so exit

AutoFitSheetRangeError:
    AutoFitSheetRange = False
    Debug.Print Err.Message 'Print out the debug error
End Function 
```

## 灵活的错误响应！

这使您可以灵活地查看列是否已调整大小，而不管是否发生错误，从而使未来的决策更容易：

```
If AutoFitSheetRange(bkExampleWorkbook, "Foo", "E:G") Then
    MsgBox "I couldn't resize Foo! Doing nothing."
End If
If AutoFitSheetRange(bkExampleWorkbook, "Bar", "K:M") Then
    'Do something here
End If 
```

我没有机会亲自测试这个，但让我知道它是怎么回事。

### 编辑：

根据@brettdj 的评论，我认为最好将检查工作表存在的功能分开以使其更加简洁。如果您只想检查工作表是否存在，那么这个功能就足够了：

```
'Error Handled version
Function SheetExists(objWorkBook As Workbook, strSheetName As String) As Boolean
On Error Goto SheetExistsError

    Dim sheet As Worksheet 
    For Each sheet In objWorkBook.Worksheets
        If sheet.Name Like strSheetName Then
            SheetExists = True
            Exit Function
        End If
    Next

SheetExistsError:
    SheetExists = False
    Debug.Print "Couldn't find sheet " & Err.Description 'Print out the debug error
End Function 
```

# asp.net - HtmlEditor 导致不需要的断线

> ID：15474896
> 
> 赞同：0
> 
> 时间：2013-03-18T10:44:30.963
> 
> 标签：asp.net, css, listview, html-editor

我没有使用 AjaxControlToolkit 的 HtmlEditor，因为它没有插入图像的直接按钮，这就是我搜索另一个编辑器并最终找到[Winthusiasm](http://www.winthusiasm.com/Articles/HtmlEditor/HtmlEditor.aspx)编辑器的原因。

一切似乎都运行良好，但实际上并非如此。让我们一步一步来看看。在示例中，我演示了下标的使用，但对于文本的任何改进（粗体、斜体、...），行为都是相同的：

**1** - 我使用 HtmlEditor 将增强的文本插入数据库。我开发了一个用作 ControlPanel 的页面，该页面将存储在数据库中的现有项目显示为`ListView`：

![列表视图预览](../Images/ead701a6a48c86486d3a87c03f5f3414.png)

**2** - 如果我点击“编辑”按钮，我可以通过 HtmlEditor 编辑内容：

![HtmlEditor 预览](../Images/6c15cfb0696d9d0a933acf66045b4acd.png)

**3** - 到目前为止一切顺利。问题出现在最终用户页面上，该页面将为该页面的所有常规用户显示内容：

![最终用户页面预览](../Images/01f266d9158c40c3e1f2fd3d0682b607.png)

我研究了最后一页中生成的源代码，但找不到任何`br`声明的。代码中的一切似乎都很好，所以我完全迷路了。我尝试在 an`ASP:Literal`和 an中输入文本`ASP:Label`，但结果是一样的。

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:54:00.820

解决了。我发现这只是一个 CSS 问题，因为尽管 Chrome 以错误的方式显示文本，但 Internet Explorer 可以很好地呈现它，所以它不可能是代码问题。

# c# - 跟踪数据库状态更改 sql server

> ID：15474897
> 
> 赞同：0
> 
> 时间：2013-03-18T10:44:33.353
> 
> 标签：c#, sql-server, database

我想跟踪 sql server 中更改的数据库状态。在我的解决方案中，我有一个由于从主服务器恢复而脱机的数据库。当数据库离线和在线时，我想在我的应用程序（C#）中得到提示。（如 sql 通知事件）。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T14:59:08.927

一种方法是使用应用程序中的计时器检查数据库的状态

```
 private void timer1_tick(object sender,EventArgs e)
    {
    if(CheckDatabaseState() == "ONLINE")
       MessageBox.Show("db is online");
    else
    MessageBox.Show("db is NOT online");
    }

    Public string CheckDatabaseState()
    {
        string Constr = @"Data Source=.\SQLEXPRESS;Integrated Security=True;Initial Catalog=master;";

         string sql = string.Format("SELECT Name, state_desc FROM sys.databases where name = '{0}'", dbName);     

                SqlConnection conn;
                SqlCommand comm;
                SqlDataAdapter adapter;
                DataSet ds = new DataSet();

                conn = new SqlConnection(Constr);
                comm = new SqlCommand(sql, conn);
                adapter = new SqlDataAdapter(comm);
                adapter.Fill(ds);

                return ds.Tables[0]["state_desc"].ToString();
    } 
```

让我知道这是否有帮助，

# ruby - 在 Xcode Run Script 构建阶段使用 rvm 强制特定的 Ruby

> ID：15474902
> 
> 赞同：10
> 
> 时间：2013-03-18T10:44:51.170
> 
> 标签：ruby, xcode, rvm

在 Xcode 之外，我使用特定版本的 Ruby，使用 RVM 来管理多个 Ruby 安装。

Apple 的命令行开发工具安装 Ruby，`/usr/bin/ruby`版本为 1.8.7。

我通过 RVM 使用 1.9.3。

有没有办法强制 Xcode 在运行其运行脚本构建阶段时使用我的 1.9.3 安装？

我已经尝试将 Shell 路径设置为我的特定 Ruby 的完整路径，但这似乎没有什么不同，我的意思是我在 1.9.3 中安装的特定 Gems 对我不可用/不可见在 Xcode 中运行时的脚本。

如果我在命令行上运行我的项目`xcodebuild`，则运行脚本阶段使用我的特定 Ruby，因为它是在我的 shell 环境中运行的（即使项目文件中的 shell 路径设置为`/usr/bin/ruby`，它仍然使用我的 1.9.3） .

如何让 IDE 使用我的 1.9.3 Ruby 安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-07T14:51:22.493

我遇到了同样的（好吧，更糟糕的）问题，下面的代码对我有用。要意识到的关键是，在命令行上，您正在使用`<something>/bin/rvm`，但在 shell 脚本中，为了让 rvm 改变*该*环境，您必须使用一个*函数*，并且您必须首先将该函数*加载*到您的 shell 脚本中打电话`source <something>/scripts/rvm`。更多关于这一切[的信息](http://rvm.io/workflow/scripting)。

这段代码也有[要点](https://gist.github.com/claybridges/c289d5fa6e3e386e8921)。

```
#!/usr/bin/env bash

# Xcode scripting does not invoke rvm. To get the correct ruby,
# we must invoke rvm manually. This requires loading the rvm 
# *shell function*, which can manipulate the active shell-script
# environment.
# cf. http://rvm.io/workflow/scripting

# Load RVM into a shell session *as a function*
if [[ -s "$HOME/.rvm/scripts/rvm" ]] ; then

  # First try to load from a user install
  source "$HOME/.rvm/scripts/rvm"

elif [[ -s "/usr/local/rvm/scripts/rvm" ]] ; then

  # Then try to load from a root install
  source "/usr/local/rvm/scripts/rvm"
else

  printf "ERROR: An RVM installation was not found.\n"
  exit 128
fi

# rvm will use the controlling versioning (e.g. .ruby-version) for the
# pwd using this function call.
rvm use . 
```

作为一个提示，我发现在文件中嵌入 shell 代码很糟糕`project.pbxproj`。除了最琐碎的事情之外，我的实际运行脚本步骤通常只是对外部脚本的单行调用：

![在此处输入图像描述](../Images/5ea7270ebfa7fd596d116fe7b7ef076f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T07:10:41.877

在 Xcode 中的脚本开头试试这个：

```
source "$HOME/.rvm/scripts/rvm" 
```

# mysql - 在 Fluent NHibernate 中启用 hbm2ddl.keywords=auto-quote

> ID：15474910
> 
> 赞同：0
> 
> 时间：2013-03-18T10:45:17.177
> 
> 标签：mysql, sql, nhibernate, fluent-nhibernate, quotes

我制作了一个小型软件工具，允许我显示或运行从 NHibernate 生成的 SQL。我这样做[是因为不建议将 hbm2ddl.auto 用于生产](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)。

我有一个问题：当我生成 SQL 时，我总是把臭名昭著的`Index`列不加引号，因为我需要`.AsList()`映射。这会阻止我运行 SQL。

理论上，如果我有一个 NHibernate 的 XML 配置，我可以使用`hbm2ddl.keywords`标记，但不幸的是，由于我的工具被设计为用于多种环境的 DBA 支持工具，我必须使用编程方法。

我的方法（冗余）如下：

```
private static Configuration BuildNHConfig(string connectionString, DbType dbType, out Dialect requiredDialect)
    {
        IPersistenceConfigurer persistenceConfigurer;

        switch (dbType)
        {
            case DbType.MySQL:
                {
                    persistenceConfigurer =
                        MySQLConfiguration
                        .Standard
                        .Dialect<MySQL5Dialect>()
                        .Driver<MySqlDataDriver>()
                        .FormatSql()
                        .ShowSql()
                        .ConnectionString(connectionString);

                    requiredDialect = new MySQL5Dialect();
                    break;
                }
            case DbType.MsSqlAzure:
                {
                    persistenceConfigurer = MsSqlConfiguration.MsSql2008
                        .Dialect<MsSqlAzure2008Dialect>()
                        .Driver<SqlClientDriver>()
                        .FormatSql()
                        .ShowSql()
                        .ConnectionString(connectionString);

                    requiredDialect = new MsSqlAzure2008Dialect();
                    break;
                }
            default:
                {
                    throw new NotImplementedException();
                }
        }

        FluentConfiguration fc = Fluently.Configure()
            .Database(persistenceConfigurer)
            .ExposeConfiguration(
                cfg => cfg.SetProperty("hbm2ddl.keywords", "keywords")
                            .SetProperty("hbm2ddl.auto", "none"))
            .Mappings(
            m => m.FluentMappings.AddFromAssemblyOf<NHibernateFactory>());
        Configuration ret = fc.BuildConfiguration();
        SchemaMetadataUpdater.QuoteTableAndColumns(ret);
        return ret;

    }

...

public static void GenerateSql(MainWindowViewModel viewModel)
    {
        Dialect requiredDialect;
        Configuration cfg = BuildNHConfig(viewModel.ConnectionString, viewModel.DbType.Value, out requiredDialect);

        StringBuilder sqlBuilder = new StringBuilder();

        foreach (string sqlLine in cfg.GenerateSchemaCreationScript(requiredDialect))
            sqlBuilder.AppendLine(sqlLine);

        viewModel.Sql = sqlBuilder.ToString();
    } 
```

说明：当我想将`ViewModel`'s SQL 设置为在 TextBox 上显示时（是的，这是 WPF），我使用给定的连接字符串以编程方式初始化配置，`ViewModel`并相应地选择方言/提供程序。当我`Fluently` `Configure`NHibernate 时，我都设置了`hbm2ddl.keywords`（尝试了`auto-quote`和`keywords`，这是默认设置），并且在[这篇博文之后](http://fabiomaulo.blogspot.it/2009/06/auto-quote-tablecolumn-names.html)，我还使用了`SchemaMetadataUpdater`.

结果是我总是看到类似 SQL

```
create table `OrderHistoryEvent` (Id BIGINT NOT NULL AUTO_INCREMENT, EventType VARCHAR(255) not null, EventTime DATETIME not null, EntityType VARCHAR(255), Comments VARCHAR(255), Order_id VARCHAR(255), Index INTEGER, primary key (Id)) 
```

`Index`没有引用有罪栏的地方。

**问题是**：给定 NHibernate 的程序化和流畅的配置，我如何告诉 NHibernate 在导出的 SQL 中引用任何保留字`GenerateSchemaCreationScript`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:01:59.737

我找到了一种解决方法：当我生成更新脚本（与 一起运行`hbm2ddl.auto=update`的脚本）时，该脚本被正确引用。

臭名昭著的[Index 列](https://groups.google.com/forum/?fromgroups=#!topic/fluent-nhibernate/HOmPEjpucIk)已经被讨论过了，根据我的发现，它被硬编码在 FNH ( `ToManyBase.cs`, method `public T AsList()`) 中。

由于更新脚本是在空数据库上完美运行的创建脚本，因此更改代码以在空数据库上生成更新脚本应该等同于生成创建脚本。

发生这种情况只是因为我想自己生成脚本。NHibernate 中可能存在一个错误，该错误仅在您调用时激活，`GenerateSchemaCreationScript`而不是在您让您`SessionFactory`为您构建数据库时激活

# android - 执行 setImageResource() 时出现 OutOfMemoryError

> ID：15474916
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:45:39.813
> 
> 标签：android, imageview, out-of-memory

`ImageView.setImageResource(int id);`正在显示`OutOfMemoryError`。我有一个`TableLayout`我正在`TableRow`务实地添加，在每一行中我正在设置一个图像，该图像已经在我的项目资源文件夹中，我正在使用`resource_id`.

```
private void addItems() {
    table.removeAllViews();
    Random rand = new Random();

    for (int i = 0; i < 20; i++) {
        TableRow row = new TableRow(getActivity());
        table.addView(row);

        RelativeLayout profile = (RelativeLayout) getLayoutInflater(null).inflate(R.layout.buddyname, null);
        TextView name = (TextView) profile.findViewById(R.id.name);
        name.setText(randomNames[i]);

        ImageView photo = (ImageView) profile.findViewById(R.id.photo);
        photo.setImageResource(randomPhoto[new Random().nextInt(randomPhoto.length - 1)]);
        row.addView(profile);
    }
} 
```

每次我这样做时`table.removeAllViews();`它都不工作，我猜是不是因为图像资源在堆上一次又一次地加载并且没有清除堆，我们可以参考以前加载的图像，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:48:33.647

好友名？它似乎是一个联系人列表。如果是，请改用 ListView。它动态加载可见的元素。20个表行确实很多。

# mysql - 从表中删除数据时出现错误 #1242

> ID：15474917
> 
> 赞同：1
> 
> 时间：2013-03-18T10:45:49.003
> 
> 标签：mysql, sql, database

我正在尝试从表中删除数据，我的查询如下：

```
delete from mybadge where uid=5 and badge_name=(select concat(tag_name,'-Beginner') from tag,post_tags where post_tags.tag_id=tag.tag_id); 
```

我通过 select 语句获得 5 条记录，我想删除所有 5 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:48:36.697

使用 - **'in'**关键字而不是**'='**符号

```
delete from mybadge where uid=5 and badge_name in (select concat(tag_name,'-Beginner') from tag,post_tags where post_tags.tag_id=tag.tag_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:49:32.290

正如您所说，您的子查询返回 5 行。但是，badge_name 在同一行中不能有 5 个不同的值。这有点像说：

```
 delete from mybadge where uid=5 and badge_name=(5 different values) 
```

尝试

```
delete from mybadge where uid=5 and badge_name in (select concat(tag_name,'-Beginner') from tag,post_tags where post_tags.tag_id=tag.tag_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:53:32.193

如果 select 语句对您来说工作正常，那么只需删除 select 返回的所有 uid：

```
DELETE FROM mybadge WHERE uid IN(
SELECT uid
FROM mybadge 
WHERE uid=5 
AND badge_name=(SELECT concat(tag_name,'-Beginner') 
                FROM tag,post_tags 
                WHERE post_tags.tag_id=tag.tag_id)
); 
```

# javascript - 如何将内联 Razor 表达式插入 Javascript

> ID：15474918
> 
> 赞同：1
> 
> 时间：2013-03-18T10:45:50.047
> 
> 标签：javascript, asp.net-mvc, razor

我有以下脚本：

```
<script type="text/javascript">
function addRow() {

    var count = $("#tblUploadDocs").prop('rows').length;
    count += 1;

    alert(count);
    var html = '<tr>';
    html += '<td><input type="file" name="files" id="file' + count + '" /></td>';
    html += '<td>Bu dilden</td>';

    html += '<tr>';
    alert(html);

}
</script> 
```

我正在尝试将以下行插入脚本，但无法达到预期的结果：

```
<td>@Html.DropDownList("ddlFromLanguage1", ViewBag.Languages as SelectList)</td> 
```

我尝试了两者和@：但无法使其工作。我期待听到解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:58:09.927

使用`<text>`伪元素，如此[处](https://stackoverflow.com/questions/4045308/razor-syntax-and-javascript/4047382#4047382)所述，强制剃刀编译器回到内容模式：

```
<script type="text/javascript">
function addRow() {
  <text>
    var count = $("#tblUploadDocs").prop('rows').length;
    count += 1;

    alert(count);
    var html = '<tr>';
    html += '<td><input type="file" name="files" id="file' + count + '" /></td>';
    html += '<td>Bu dilden</td>';

    html += '<tr>';
    alert(html);

  </text>
}
</script> 
```

# c# - c# 编译查询

> ID：15474924
> 
> 赞同：0
> 
> 时间：2013-03-18T10:46:18.217
> 
> 标签：c#, compiled-query

我正在尝试按照[http://msdn.microsoft.com/en-us/library/bb896297.aspx上的 MSDN 示例进行编译查询](http://msdn.microsoft.com/en-us/library/bb896297.aspx)

这是我的代码

```
static readonly Func<newTestDBContext, string, long, IQueryable<RouteQueryModel>> s_compiledQuery2 =
CompiledQuery.Compile<newTestDBContext, string, long, IQueryable<RouteQueryModel>>(
(db, currentLocation, x) => 
    from b in db.routes
    let avg_rating = b.ratings.Any() ? 
        b.ratings.Select(r => r.rating1).Average() : 
        0
    let coorCount = b.coordinates.Count()
    let is_favorite = b.favorites.Any(c => c.users_id == x) ? 
        true : 
        false
    let distance_to_first_from_me = b.coordinates.
        Select(c => c.position).
        FirstOrDefault().
        Distance(DbGeography.FromText(currentLocation, 4326))
    let distance_to_last_from_me = b.coordinates.
        OrderByDescending(c => c.sequence).
        Select(d => d.position).
        FirstOrDefault().
        Distance(DbGeography.FromText(currentLocation, 4326))
    let distance_to_from_me = distance_to_first_from_me < distance_to_last_from_me ? 
            distance_to_first_from_me : 
            distance_to_last_from_me
    select new RouteQueryModel 
    { 
        b = b,                 
        distance_to_from_me = distance_to_from_me.Value, 
        avg_rating = avg_rating, 
        coorCount = coorCount, 
        is_favorite = is_favorite 
    }
); 
```

我收到以下错误

错误 1 ​​类型“W.Models.newTestDBContext”不能用作泛型类型或方法“System.Data.Objects.CompiledQuery.Compile(System.Linq.Expressions.Expression>)”中的类型参数“TArg0”。没有从“W.Models.newTestDBContext”到“System.Data.Objects.ObjectContext”的隐式引用转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:50:05.500

I'm going to guess here and suggest that your newTestDBContext doesn't inherit ObjectContext, or you're passing the wrong object?

Are you using Entity framework ?

Have you tried using the reference code at the bottom of this page, replacing adventureworks with your own schema ?

[http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)

Hope this helps!

# requirejs - 有没有办法让所有模块名称和路径注册到requirejs？

> ID：15474925
> 
> 赞同：1
> 
> 时间：2013-03-18T10:46:19.267
> 
> 标签：requirejs

我正在尝试根据注册为 require 的模块在我的应用程序中驱动一些自定义逻辑，所以我正在寻找一种方法来获取所有模块名称及其路径，这可能吗？我尝试使用特殊模块“模块”，但它不会返回路径信息。任何帮助深表感谢。

# java - 如何将布尔表达式字符串转换为对象？

> ID：15474926
> 
> 赞同：1
> 
> 时间：2013-03-18T10:46:22.287
> 
> 标签：java, parsing, boolean, boolean-expression

我怎样才能最好地评估用户给定的布尔表达式字符串，例如：

```
A & B | (C & !D) 
```

我需要这个做什么？示例：假设我们有一组人，并且用户有一个输入字段，他可以在其中使用布尔表达式连接其中两个（以及更多）人，如下`String`所示：

```
Peter & Klaus | (Peter & Clair | !Klaus) 
```

（我知道这个表达没有任何意义，只是作为一个例子）。

然后我想使用布尔语法以某种方式拆分这个布尔字符串。稍后，如果一个人被重命名（例如 Peter -> John），我希望用户给出的表达式也自动重命名为新名称。这样用户就可以看到他保存的带有新名称的表达式的更新。

因此，我可能必须使用代表名称背后对象的 id 来存储布尔表达式。因此必须从数据库中的表达式中查找每个名称，因此必须通过布尔语法拆分字符串。

问题：

*   我怎样才能最好地分割这个字符串？

*   如何使用对象值存储此表达式，以便在名称更改时可以重新评估此字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:49:26.913

一种解决方案是将信息解析为节点树，其中节点可以存储名称、运算符或表达式。您可以在每个节点上使用 id 来允许您替换名称或以后的任何内容。

要自己进行解析，基础非常简单。这一切都取决于这些表达式有多复杂/可以变得多么复杂。要对布尔表达式进行正确和完整的语法，我会推荐像 antlr 这样的解析器工具。

# virtualbox - VirtualBox 不会为快照保存网络设置

> ID：15474927
> 
> 赞同：2
> 
> 时间：2013-03-18T10:46:22.240
> 
> 标签：virtualbox

我正在尝试从 VirtualBox 访问我的 MAMP 主机，问题似乎是 VirtualBox 不会保存我的网络设置。

这就是我所做的：

打开快照的设置并将网络设置更改为“仅主机适配器”，然后按“确定”。

[像这样（截图）](http://i.imgur.com/6iiDiml.png)

但是当我在按下“确定”后立即打开设置时，它仍然显示“NAT”作为网络设置。

[截屏](http://i.imgur.com/mcjxCzh)

这是一个错误，还是我在这里错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T01:21:06.713

我曾经遇到过这个问题，幸运的是我解决了它！诀窍是转到“机器”菜单并单击“放弃保存的状态”。发生此错误是因为 Virtualbox 无法在 VM 运行时更改任何内容。:)

# python - 使用 if 语句列出理解

> ID：15474933
> 
> 赞同：128
> 
> 时间：2013-03-18T10:46:35.530
> 
> 标签：python, if-statement, list-comprehension

我想比较 2 个迭代并打印出现在两个迭代中的项目。

```
>>> a = ('q', 'r')
>>> b = ('q')

# Iterate over a. If y not in b, print y.
# I want to see ['r'] printed.
>>> print([ y if y not in b for y in a])
                              ^ 
```

但它给了我一个无效的语法错误`^`。这个lamba函数有什么问题？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-03-18T10:48:08.633

你把顺序弄错了。`if`应该在之后（`for`除非它在`if-else`三元运算符中）

```
[y for y in a if y not in b] 
```

但是，这将起作用：

```
[y if y not in b else other_value for y in a] 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-18T10:47:26.553

你把它`if`放在最后：

```
[y for y in a if y not in b] 
```

列表推导的编写顺序与其嵌套的完整指定对应项的顺序相同，基本上上述语句转换为：

```
outputlist = []
for y in a:
    if y not in b:
        outputlist.append(y) 
```

您的版本尝试这样做：

```
outputlist = []
if y not in b:
    for y in a:
        outputlist.append(y) 
```

但是列表推导*必须*至少从*一个*外循环开始。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-09T09:49:51.680

列表理解公式：

```
[<value_when_condition_true> if <condition> else <value_when_condition_false> for value in list_name] 
```

因此你可以这样做：

```
[y for y in a if y not in b] 
```

仅用于演示目的：[y if y not in b else False for y in a]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-18T10:47:13.357

这不是 lambda 函数。这是一个列表理解。

只需更改顺序：

```
[ y for y in a if y not in b] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T01:10:56.130

如果您使用足够大`not in b`的列表子句，将对`a`. 为什么不使用集合？Set 以 iterable 作为参数来创建一个新的 set 对象。

```
>>> a = ["a", "b", "c", "d", "e"]
>>> b = ["c", "d", "f", "g"]
>>> set(a).intersection(set(b))
{'c', 'd'} 
```

# ssh - 尝试密码后 ssh 服务器关闭连接

> ID：15474935
> 
> 赞同：1
> 
> 时间：2013-03-18T10:46:46.393
> 
> 标签：ssh, ubuntu-12.04, putty, sshd

我正在尝试通过 ssh 访问远程服务器。我无法通过 CLI 中的 ssh 命令执行此操作，但使用相同的凭据我可以通过 putty ssh 访问。

我正在使用 ubuntu 12.04。我无权访问 ssh 服务器，因此无法更改 sshd 配置文件。

可以通过 ssh CLI 命令从其他机器访问 ssh 服务器，但从我的 mashine 来看，这是行不通的。凭据是正确的，因为我可以通过 putty 连接，并且当我输入密码时我没有从服务器收到任何消息。它只是关闭连接。

我在 CLI 中通过 ssh 连接的命令是：

```
ssh -vv someuser@somehost.com 
```

这是输出：

```
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to somehost.com [53.52.81.241] port 22.
debug1: Connection established.
debug1: identity file /home/djuki/.ssh/id_rsa type -1
debug1: identity file /home/djuki/.ssh/id_rsa-cert type -1
debug1: identity file /home/djuki/.ssh/id_dsa type -1
debug1: identity file /home/djuki/.ssh/id_dsa-cert type -1
debug1: identity file /home/djuki/.ssh/id_ecdsa type -1
debug1: identity file /home/djuki/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3
debug1: match: OpenSSH_4.3 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug2: fd 3 setting O_NONBLOCK
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-                  nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-    hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa-cert-v01@openssh.com,ssh-rsa-cert-     v00@openssh.com,ssh-rsa,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-dss-cert-v00@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-    sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug2: dh_gen_key: priv key bits set: 125/256
debug2: bits set: 514/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA e5:55:0d:1a:0e:2e:c5:03:db:05:c3:85:af:cf:bd:cd
debug1: Host 'somehost.com' is known and matches the RSA host key.
debug1: Found key in /home/djuki/.ssh/known_hosts:1
debug2: bits set: 499/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/djuki/.ssh/id_rsa ((nil))
debug2: key: /home/djuki/.ssh/id_dsa ((nil))
debug2: key: /home/djuki/.ssh/id_ecdsa ((nil))
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Next authentication method: gssapi-with-mic
debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug1: Unspecified GSS failure.  Minor code may provide more information

debug1: Unspecified GSS failure.  Minor code may provide more information
Credentials cache file '/tmp/krb5cc_1000' not found

debug2: we did not send a packet, disable method
debug1: Next authentication method: publickey
debug1: Trying private key: /home/djuki/.ssh/id_rsa
debug1: Trying private key: /home/djuki/.ssh/id_dsa
debug1: Trying private key: /home/djuki/.ssh/id_ecdsa
debug2: we did not send a packet, disable method
debug1: Next authentication method: password
someuser@somehost.com's password: 
debug2: we sent a password packet, wait for reply
Connection closed by 30.52.83.243 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T00:51:21.613

检查 /etc/ssh/sshd_config 是否有以下一项，

1.  LoginGraceTime 并确保将其设置为您可以输入密码的时间限制。否则，如果您的请求在时间范围内未通过身份验证，它将关闭连接。（例如：这会给你一个 1 分钟的窗口，LoginGraceTime 60）
2.  “UseDNS no”将确保 sshd 不会尝试解析主机名。如果 ssh 客户端计算机和服务器使用两个不同的名称服务器，并且它们指向相同主机名的不同 IP，则最终可能会将您锁定。所以“UseDNS no”可以解决这些问题。
3.  “PasswordAuthentication yes”将确保 SSHd 接受用户输入的密码。

这就是我在这个问题上遇到的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T11:14:44.690

首先，您可以尝试使用`ssh -o GSSAPIAuthentication=no someuser@somehost.com`; 它应该使`Unspecified GSS failure`消息消失。

然后，如果您能够使用 putty 连接，您可以连接，然后`sshd`在更高端口上以调试模式运行（您不需要是 root 来执行此操作，但您不需要防火墙阻止所有端口）：

```
/usr/sbin/sshd -d -e -p1234 
```

然后你可以尝试在 CLI 中连接

```
ssh -p 1234 someuser@somehost.com 
```

你会在你的腻子会话中看到服务器关闭连接的原因。

# node.js - 不正确的标头检查错误

> ID：15474949
> 
> 赞同：4
> 
> 时间：2013-03-18T10:47:19.983
> 
> 标签：node.js, http, request, gzip, zlib

当我尝试从下面运行代码时：

```
var express = require('express');
var app = express();
var port = process.env.PORT || 5000;

var request = require('request');
var zlib = require('zlib');

app.listen(port, function() {
    console.log("Listening on " + port);
    makeRequest();
});

function makeRequest(){

    var url = 'https://api.stackexchange.com/2.1/search?pagesize=5&order=desc&sort=activity&intitle=ios development&site=stackoverflow';
    var headers = {'Accept-Encoding': 'gzip'};

    var response = request(url, headers);

    gunzipJSON(response);
}

function gunzipJSON(response){

    var gunzip = zlib.createGunzip();
    var json = "";

    gunzip.on('data', function(data){
        json += data.toString();
    });

    gunzip.on('end', function(){
        parseJSON(json);
    });

    response.pipe(gunzip);
}

function parseJSON(json){

    var json = JSON.parse(json);

    if(json.items.length){

        for(var i in json.items){

            console.log(json.items[i].title + '\n' + json.items[i].link);

        }

    }
} 
```

我收到错误消息

> 错误：Zlib._binding.onerror (zlib.js:286:17) 中的标头检查不正确

我在代码中传递了我自己的压缩 url。

任何帮助都会非常有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-20T12:58:12.333

老问题（[现在不推荐使用](https://www.npmjs.com/package/request)`request`库），但迟到总比没有好：

有趣的是，有问题的代码在 Node.js 版本 15.13.0 上对我有用，但在 14.16.0 上却不行（保持版本`request`相同，即最新的 2.88.2）。

但是，仅使用以下简单代码可在 14.16.0（[现场演示](https://stackblitz.com/edit/node-dondws?file=index.js)）上使用，但不适用于 15.13.0！：

```
request(url, function (error, response, body) {
  console.log(JSON.parse(body)); 
}); 
```

这意味着由于某种原因，在 14.16.0 上，响应正文会自动解压缩（因此上面的代码片段有效），而在 15.13.0 上，响应正文保持压缩状态，因此需要主动解压缩。

# ibm-mobilefirst - worklight 5.0.6 - 将应用程序部署到本地服务器时出错

> ID：15474955
> 
> 赞同：0
> 
> 时间：2013-03-18T10:47:31.113
> 
> 标签：ibm-mobilefirst

我刚刚将运行 Juno 的 Eclipse 客户端升级到 Worklight 5.0.6 开发人员版 (5.0.6.20130311-0918)

项目升级正常，但是在构建它们并部署到本地 Worklight 服务器时，我遇到了一个持续的“持久性数据访问问题”，这发生在我的所有项目中，并且仅在更新后才出现。

关于导致此问题的原因以及如何解决的任何想法？

我会添加问题的屏幕截图，但我不允许

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:24:42.057

根据您的评论 - 在 5.0.6 中，数据库架构已更改，因此您现在缺少表。在 Worklight 的 Developer Edition 中，不支持升级（这是在购买许可证并使用 IBM Installation Mananger 安装 Worklight 时处理的）。

你的意思是“HSQL”吗？什么是“Web SQL”？在任何情况下，您都需要清理数据库以便重新创建它，这一次是缺少表。

如果您使用 Worklight (HSQL) 提供的默认数据库，请转到您的 Eclipse Workspace 并删除 WorklightServerHome 文件夹。然后，重新构建您的应用程序。

# php - 更新组合框失败

> ID：15474956
> 
> 赞同：1
> 
> 时间：2013-03-18T10:47:32.883
> 
> 标签：php, combobox

我正在尝试在 Virtuemart 中使用组合框来表示数量，而不是数量文本和更新按钮。

当我在购物车中只有一篇文章时，它可以完美运行，但是当我有不止一篇时，它就无法正常工作。

这是表单代码

```
 <form action="<?php echo JRoute::_ ('index.php'); ?>" method="post" class="inline" name="frm">
        <input type="hidden" name="option" value="com_virtuemart"/>

        <input type="text" title="<?php echo  JText::_ ('COM_VIRTUEMART_CART_UPDATE') ?>.2" class="inputbox" size="3" maxlength="4" name="quantity" value="<?php echo $prow->quantity ?>" style="display:none;"/>
                <select name="cantidad" id="cantidad" onchange="getval(this);"  value="<?php echo $prow->quantity ?>" title="<?php echo  JText::_ ('COM_VIRTUEMART_CART_UPDATE') ?>">   <script type="text/javascript">
                function getval(sel) {
                   document.frm.quantity.value = (sel.value);
                   document.getElementById('actualizar').click();
                }
            </script>
                <option  value="<?php echo $prow->quantity ?>"><?php echo $prow->quantity ?></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
        </select>           
        <input type="hidden" name="view" value="cart"/>
        <input type="hidden" name="task" value="update"/>
        <input type="hidden" name="cart_virtuemart_product_id" value="<?php echo $prow->cart_item_id  ?>"/>
        <input type="submit" class="vmicon vm2-add_quantity_cart" id="actualizar" name="update" title="<?php echo  JText::_ ('COM_VIRTUEMART_CART_UPDATE') ?>" align="middle" value=" " style="display:none;"/>

    </form> 
```

谢谢

# android - cocos2dx 相当于 Android 画布的 BitmapShader

> ID：15474960
> 
> 赞同：0
> 
> 时间：2013-03-18T10:47:46.523
> 
> 标签：android, bitmap, shader, cocos2d-x

我是 cocos2dx 的新手，一直在尝试将游戏从 Android（使用画布）移植到 cocos2dx。我使用以下代码在 android 中使用 png 来创建图块。

```
//create bitmap shader
Bitmap mBitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.rock_texture);
BitmapShader mBitmapShader = new BitmapShader(mBitmap, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);

//add to paint
Paint mPaint = new Paint();
mPaint.setShader(mBitmapShader);

//draw on canvas
canvas.save();
canvas.clipPath(mPath);
canvas.drawRect(0, 0, w, h, mPaint);
canvas.restore(); 
```

位图着色器文档[http://developer.android.com/reference/android/graphics/BitmapShader.html](http://developer.android.com/reference/android/graphics/BitmapShader.html) 如何在 cocos2dx 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:45:25.040

为 cocos2dx 使用 PRkit，它使用 OpenGL 着色器做同样的事情。 [http://www.cocos2d-x.org/boards/6/topics/8101?r=12344#message-12344](http://www.cocos2d-x.org/boards/6/topics/8101?r=12344#message-12344)

# java - 主 Ui 线程在方法过程中不更新

> ID：15474964
> 
> 赞同：0
> 
> 时间：2013-03-18T10:47:52.593
> 
> 标签：java, android, eclipse, user-interface, android-imageview

我是 android sdk 的新手，所以请不要对我苛刻。atm 我正在使用我的第一个 android 应用程序 .. 它几乎完成了，但我现在面临一个小问题。

该应用程序是一个小型单人纸牌游戏，有 4 名玩家 - 3 个电脑敌人。

问题是，在我移动之后.. 计算机敌人正在根据 ki 逻辑进行移动.. 这工作得很好.. 但在方法结束后只显示玩家 4 的最后一步。即使我在每次 ki move 之后延迟方法过程 .. 它也不会更新 ImageViews 以显示当前的 ki move ...

我真的很迷茫..因为我找不到任何逻辑错误..我感谢任何形式的帮助..感谢阅读-不是以英语为母语的人对此表示遗憾:-)

好的，这里有一些代码.. cardDeck 持有当前的举动

```
List<Card> cardDeck = new ArrayList<Card>();
List<Card> move = new ArrayList<Card>();
KI player2 = new KI();

but.setText("GO");
but.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View vw) {

 if (!move.isEmpty()) {

    if (Rules.checkIsPlayableHand(move)) {
    sort();
    setClickAble();
        ki4Moves(vw);   
    } 
```

sort() 看起来像这样：

```
public void sort(){

   cardDeck.clear();
   cardDeck.addAll(move);

    if (cardDeck.size() == 1) {
        dkView1 = (ImageView) findViewById(R.id.dkView1);
        Card card = cardDeck.get(0);
        dkView1.setImageBitmap(card.getBitmap());
    } else {
        dkView1 = (ImageView) findViewById(R.id.dkView1);
        dkView1.setImageBitmap(blank);
    }
} 
```

和 ki4Moves() 看起来像这样：

```
public void ki4Moves(View vw){

   player2.think();
   List<Card> kiMove = new ArrayList<Card>();
   kiMove = player2.getPossibleMove(cardDeck);

    if (!kiMove.isEmpty()) {

        trash.addAll(kiMove);
        move.clear();
        move.addAll(kiMove);
        sort();
   }
   // same for the other both ki s
} 
```

编辑：

经过一些研究......阅读android文档我还没有找到解决我问题的真正解决方案。

我想做的是：在 SORT() 之后强制主 UI 线程更新 .. 像这样：

```
 @Override
 public void onClick(View vw) {

 if (!move.isEmpty()) {

    if (Rules.checkIsPlayableHand(move)) {
    sort();
            // FORCE MAIN UI THREAD TO UPDATE .. just one line 
            // let SystemClock.sleep(2000);
    setClickAble();
        ki4Moves(vw);   
    } 
```

现在..我不能强制主线程在主线程之外更新或访问它..ANDROID 为我提供线程、无痛线程、异步任务..哇谢谢你！

1.  该过程不重载......没有数据库操作等。
2.  如果我使用 thread.join ...主 ui 线程仍被锁定

所以首先..我没有看到使用线程的任何合乎逻辑的理由..但我有点不得不这样做？好吧，我走了..可以说我像这样更改我的代码：

```
Handler h = new Handler();
@Override
public void onClick(View vw) {

 if (!move.isEmpty()) {

    if (Rules.checkIsPlayableHand(move)) {

            Thread t = new Thread(new Runnable){

                void run(){
                h.post(new Runnable(){
                    // do some logic here
                });
                h.post(new Runnable(){
                   if (cardDeck.size() == 1) {
               dkView1 = (ImageView) findViewById(R.id.dkView1);
           Card card = cardDeck.get(0);
           dkView1.setImageBitmap(card.getBitmap());
               } else {
           dkView1 = (ImageView) findViewById(R.id.dkView1);
           dkView1.setImageBitmap(blank);
               }
                });
                Thread.sleep(2000);
                }
            });
            t.start();

    setClickAble();
        ki4Moves(vw);   
    } 
```

所以你这工作正常..但是哦..有这个方法“ki4Moves（vw）”......我不能让它t.join（）..因为正如我所说的主ui线程将被锁定。所以我需要将 ki4Moves 中的 200 行也打包到线程中。

是的，这是有效的..每次移动之后..主用户界面都会更新。

BUUUT ki4Moves 是最简单的方法之一.. 如果我通过移动.. 并且 cpu 玩家进入一个循环来完成它.. 我无法在这个循环中分层访问主 ui.. 所以我又来了。

我不明白.. 我花了大约 2 周的时间来实现逻辑.. 因为这个游戏的规则非常特别.. 现在它按预期运行，ki 很聪明.. 它失败的原因是 UI LOCKS UP ..对此感到羞耻..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:48:03.250

代码对我来说看起来有点复杂，但如果我理解得很好，在 setImageBitmap() 之后在 dkView1 上调用 invalidate() 可以解决问题。

但这里有一个提示，如果可能的话，尽量使用 drawable 而不是 Bitmap。

# c# - 如何将搜索到的项目滚动到 Wpf 中的 GridView 视图中

> ID：15474971
> 
> 赞同：4
> 
> 时间：2013-03-18T10:48:17.473
> 
> 标签：c#, .net, wpf

作为对[这个](https://stackoverflow.com/questions/15467553/proper-datagrid-serach-from-textbox-in-wpf-using-mvvm)问题的参考，我想知道如何将搜索到的项目滚动到网格视图的视图中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:01:25.220

您可以创建一个`AttachedProperty`来跟踪`SelectedTtem`并在需要时将其滚动到视图中。

```
 // Using a DependencyProperty as the backing store for AutoScrollToSelectedRow.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty AutoScrollToSelectedRowProperty =
        DependencyProperty.RegisterAttached("AutoScrollToSelectedRow", typeof(bool), typeof(DataGridTextSearch)
        , new UIPropertyMetadata(false, OnAutoScrollToSelectedRowChanged));

    public static bool GetAutoScrollToSelectedRow(DependencyObject obj)
    {
        return (bool)obj.GetValue(AutoScrollToSelectedRowProperty);
    }

    public static void SetAutoScrollToSelectedRow(DependencyObject obj, bool value)
    {
        obj.SetValue(AutoScrollToSelectedRowProperty, value);
    }

    public static void OnAutoScrollToSelectedRowChanged(DependencyObject s, DependencyPropertyChangedEventArgs e)
    {
        var datagrid = s as DataGrid;
        if (datagrid != null)
        {
            datagrid.IsSynchronizedWithCurrentItem = true;
            datagrid.EnableRowVirtualization = !((bool)e.NewValue);
            datagrid.SelectionChanged += (g, a) =>
            {
                if (datagrid.SelectedItem != null)
                {
                    datagrid.ScrollIntoView(datagrid.SelectedItem);
                }
            };
        }
    } 
```

用法：

```
 <DataGrid local:DataGridTextSearch.AutoScrollToSelectedRow="True" 
```

# apache - 通过 .htaccess 单独加密 url

> ID：15474973
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:48:25.557
> 
> 标签：apache, .htaccess, mod-rewrite, joomla2.5

在我们的网站中，如果我们将鼠标放在按钮上，它将在状态栏上显示 url。

像网址：`https://XXX.singly.com/one/XXXXXX`

但我想用另一个名字在状态栏中隐藏这个 url。

对于 ex.URL ：`https://YYY.ZZZZ.com/AAAAAAAA` 如果可能的话。请帮助我

或者，有什么办法可以完全隐藏网址。

谢谢， 斯里尼瓦斯

我怎样才能写在下面的网址

[https://www.facebook.com/login.php?api_key=274278176032919&skip_api_login=1&display=page&cancel_url=https%3A%2F%2Fapi.singly.com%2Fauth%2Ffacebook%2Fauth%2Fc8f1b1b37732c352634362adf8d945ea%](https://www.facebook.com/login.php?api_key=274278176032919&skip_api_login=1&display=page&cancel_url=https%3A%2F%2Fapi.singly.com%2Fauth%2Ffacebook%2Fauth%2Fc8f1b1b37732c352634362adf8d945ea%) ***** ** *****

至

[https://www.facebook.com/login.php/api_key/display](https://www.facebook.com/login.php/api_key/display)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:49:02.310

有许多很棒的 SEF 组件 - [SEF 类型扩展](http://extensions.joomla.org/extensions/site-management/sef)

其中一些可能会给你一些你正在寻找的灵活性。我确信可以通过其他方式做到这一点 - 但你可能想先检查其中一些，而不是尝试重新发明轮子，如果他们会做你想做的事。

# sqlite - 避免重复子查询

> ID：15474978
> 
> 赞同：0
> 
> 时间：2013-03-18T10:48:37.327
> 
> 标签：sqlite

我有一个表**messages**，其中包含一个列**message_internaldate**。现在我想计算几个月内特定时间段（一天中的每个小时）内的消息。通过拥有大量子查询（24），我可以设法获得每小时消息的总和，但我希望有一种更聪明的方法来做到这一点。除了时间段发生变化外，子查询类似。有什么建议么？

例如前两个小时

```
SELECT T1, T2 FROM 
(
SELECT sum(T1c) as T1 FROM
    (
    SELECT strftime('%H:%M',message_internaldate) AS T1s ,count(*) as T1c FROM messages WHERE
    message_internaldate BETWEEN '2005-01-01 00:00:00' AND '2012-12-31 00:00:00'
    AND strftime('%H:%M',message_internaldate) BETWEEN '01:00'AND '01:59'
    GROUP BY strftime('%H:%M',message_internaldate)
    )
)
,
(
SELECT sum(T2c) as T2 FROM
    (
    SELECT strftime('%H:%M',message_internaldate) AS T2s ,count(*) as T2c FROM messages WHERE
    message_internaldate BETWEEN '2005-01-01 00:00:00' AND '2012-12-31 00:00:00'
    AND strftime('%H:%M',message_internaldate) BETWEEN '02:00'AND '02:59'
    GROUP BY strftime('%H:%M',message_internaldate)
    )
)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:59:35.630

您的问题是您希望将各个小时作为列。

要将它们作为行获取，请尝试如下查询：

```
SELECT strftime('%H', message_internaldate) AS hour,
       strftime('%H:%M', message_internaldate) AS Ts,
       COUNT(*) AS Tc
FROM messages
WHERE message_internaldate BETWEEN '2005-01-01 00:00:00' AND '2012-12-31 23:59:59'
GROUP BY 1, 2 
```

# dynamics-ax-2009 - 从某些表格中删除法人实体检查

> ID：15474980
> 
> 赞同：0
> 
> 时间：2013-03-18T10:48:39.637
> 
> 标签：dynamics-ax-2009, dynamics-ax-2012, axapta, ax

有些表格只存在于某些法律实体中，我想以某种方式删除此检查，并使这些表格也可以在其他法律实体中使用，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:15:22.587

您可以使用国家和地区特定的功能来帮助满足各个地区的法律、法规和业务需求。地理是由 ISO 国家或地区代码标识的任何国家或地区。在 Microsoft Dynamics AX 中，您使用**国家/地区上下文**进行此过程。

## 设置 CountryRegionCodes 属性

1.  在 AOT 中，展开 Forms 节点。
2.  查找并展开包含您希望特定于国家/地区的控件的表单。展开 Designs，展开 Design，然后添加或查找控件。
3.  右键单击该控件，然后单击“属性”。使用“属性”窗口设置 CountryRegionCodes 属性。您可以通过逗号分隔的列表添加任意数量的 ISO 代码。

    如果 CountryRegionCodes 属性的 ISO 代码值与控制方的 ISO 代码值不匹配，则不会显示控件。如果值匹配，则显示控件。

4.  右键单击表单，然后单击保存。

更多可以在[这里](http://msdn.microsoft.com/EN-US/library/hh404126.aspx)找到。

# python - Python 检查所有空列表中的条件

> ID：15474982
> 
> 赞同：1
> 
> 时间：2013-03-18T10:48:42.970
> 
> 标签：python

这是正常行为吗？

```
answer=all(c=='false True answer?' for c in [])
# answer = True 
```

如果我希望空列表中的“全部”检查值 False 以使用这样的行，可以吗？：

```
answer=all(set([c=='a' for c in []]) or [False,]) 
```

如果：

```
answer=all(set([c=='a' for c in ['a','a']]) or [False,])
answer=all(set([c=='a' for c in ['a','b']]) or [False,]) 
```

我决定使用反向逻辑，例如：

```
bad_answer=bool([c for c in ['a','b'] if c!='a']) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:51:14.703

```
In [2]: all([])
Out[2]: True 
```

是的。

`c == '...'`永远不会被评估，因为不`for c in []`承认任何项目。当in为空时，列表推导`[]`立即计算为。`iterable``for c in iterable`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T10:51:23.630

您正在检查空列表的所有元素是否都等于某个值。因为列表中没有值，所以从技术上讲，所有值*都*等于另一个值。

```
>>> all([])
True 
```

`all``False`如果任何表达式的计算结果为 ，则返回`False`，`True`否则返回。因为没有一个条件不成立（因为首先没有条件），所以`all`返回`True`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T10:52:40.990

[`all()`记录](http://docs.python.org/2/library/functions.html#all)为

> 如果可迭代对象的所有元素都为真（或可迭代对象为空），则返回 True。

您的生成器表达式`c=='false True answer?' for c in []`为空，因为它遍历一个空列表。比较永远不会发生，因为什么都没有`in []`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T10:52:12.127

`all``True`在对空序列进行操作时，总是评估为。所以是的，这很正常。

# java - Docx4J 中用于将 Docx 转换为 HTML 的自定义解决方案

> ID：15474983
> 
> 赞同：0
> 
> 时间：2013-03-18T10:48:44.487
> 
> 标签：java, docx4j

我有将多个`DOCX`文件转换为`HTML`格式的要求，如果可能的话`RTF`
`Docx4j`，它似乎是一个很好的 java 库。
使用 HtmlExporterNG2.html 方法并不一定会为我提供所需的结果。所以我正在考虑修改从 docx 文件中提取的样式表，然后将其用于此转换，因为所有这些 docx 文件都有不同的格式，因此不能使用标准样式表。
我认为对样式表进行运行时修补会起作用吗？我应该注意哪些重要事项？
我将它用作具有 Java 版本 6 的独立 Java 应用程序。
我的查询可能有点模糊，但我正在寻找正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:38:08.870

@Jason 我想忽略输入文档中的某些格式。由于转换后的 html 添加了一些额外的间距或垃圾字符等。

作为解决方案，我创建了一个新的 xslt。对于大多数人来说，它与示例中的非常相似，但几乎没有细微的调整。新的 xslt 现在可以将输入的 docx 文件转换为适用于 IE8、Mozilla 或 Chrome 的正确格式（根据我的需要）的 html。

# css - 分页codeigniter无法显示图像和css

> ID：15474985
> 
> 赞同：1
> 
> 时间：2013-03-18T10:48:49.353
> 
> 标签：css, pagination

我尝试了很多但似乎无法弄清楚这一点，任何帮助表示赞赏。我在 codeigniter 中的分页在第一页上完美工作，但是当我转到其他页面时，图像既不显示 css。似乎 codeigniter 无法识别指向我的资产文件夹的链接。这是我的代码：

```
public function index()
{
    $config['base_url']='http://localhost/CodeIgniter/index.php/program/index';
    $config['total_rows']=$this->listeprogram->count();
    $config['per_page']=12;
    $config['first_link'] = 'Première page';
    $config['last_link'] = 'Dernière page';
    $config['next_link']='Suivante';
    $config['prev_link']='Précédente';  
    $this->pagination->initialize($config);
    $data = array();
    $data['rows'] = $this->db->get('programs',$config['per_page'],$this->uri->segment(10));
} 
```

# c++ - atan(-M_PI_2) 不返回 -90 º

> ID：15474988
> 
> 赞同：0
> 
> 时间：2013-03-18T10:48:55.377
> 
> 标签：c++, math

我在 cpp 中计算 atan 时遇到问题。M_PI 已经声明为 3.14159....

我的代码是：

```
double distanceNormalized = 1;// set constant con check value
double angle = atan(distanceNormalized * (-M_PI_2)); // atan(-PI/2) must be -1 in rad

stringstream ss;
ss  << " Angle: " << angle*180/M_PI;
cout << ss << endl; 
```

但在日志中我得到：

```
Angle: -57.5184 
```

参考说[承认](http://www.cplusplus.com/reference/cmath/atan/)[-pi/2,+pi/2] 弧度。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:51:55.677

你得到了正确的输出。

`-57.5184`度数等价于`-1 rad`假设`π = 3.14`。`angle`实际上是在`-1 rad`这里。您通过将其乘以`180`并除以将其转换为度数`π`。

# php - 如何比较 date() 返回的月份

> ID：15474990
> 
> 赞同：-1
> 
> 时间：2013-03-18T10:48:58.057
> 
> 标签：php, date

我有一个代码片段：

```
<?php
    echo $tm = date("M", strtotime("31-Mar-2013"))."\n";
    echo $tm;
    if($tm == "Mar"){
        echo "March";
    }
?> 
```

我想输出将是：

```
Mar
Mar
March 
```

但我得到的只是

```
Mar
Mar 
```

谁能告诉我为什么`March`不打印？[程序](http://ideone.com/xVGSoc)也在[这里](http://ideone.com/xVGSoc)
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:55:18.520

您没有粘贴有问题的代码，您在上面发布的内容有效。但是查看您发布的链接上的来源，您的问题是与换行符连接

`echo $tm = date("M", strtotime("31-Mar-2013"))."\n";`

如果你删除`"\n"`它会工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:56:16.357

从您的[ideone 代码](http://ideone.com/xVGSoc)中删除`"\n"`in line `24`。

# android - 某些设备上的 android 中的“没有这样的表”问题

> ID：15474991
> 
> 赞同：2
> 
> 时间：2013-03-18T10:48:57.897
> 
> 标签：android, sqlite, android-intent, android-emulator, android-debug

我在 android 应用程序中使用外部数据库，它在所有模拟器和三星真实设备上运行良好。但是当我在 Acer 智能手机上查看时，我的应用程序会崩溃，并出现以下异常：

```
android.database.sqlite.SQLiteException: no such table: 
```

这对我来说很奇怪。我在文件资源管理器中的数据文件夹下检查了我的数据库和所有表所在的位置。

我不明白为什么会这样。

请指导我。提前致谢

sql helper类的代码如下：

```
public class MyDatabaseHelper extends SQLiteOpenHelper {

    // System path of application database.
    private static String DB_PATH = MyApplication.getAppContext()
            .getFilesDir().getParentFile().getPath()
            + "/databases/";
    private static String DB_NAME = "myDB";
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public MyDatabaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with own database.
     * 
     */
    public void createDataBase() throws IOException {

        checkDataBase();
        // Creates empty database default system path
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }

    /**
     * Checks if the database already exist to avoid re-copying the file each
     * time whenever the application opened.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {
            e.printStackTrace();
        }

        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    /**
     * Copies database from local assets-folder to the just created empty
     * database in the system folder and from where it can be accessed and
     * handled using byte stream transferring.
     * 
     */
    private void copyDataBase() throws IOException {

        // Open local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME + ".db");

        // Path of the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the input file to the output file
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public SQLiteDatabase openDataBase() throws SQLException {

        // Opens the database
        String myPath = DB_PATH + DB_NAME;
        return SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:35:24.683

最后我解决了我的问题。

我只是将可读数据库放入数据库并在再次打开后将其关闭。我的完整代码如下：

```
 public class MyDatabaseHelper extends SQLiteOpenHelper {

    // System path of application database.
    private static String DB_PATH = MyApplication.getAppContext()
            .getFilesDir().getParentFile().getPath()
            + "/databases/";
    private static String DB_NAME = "myDB";
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public MyDatabaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with own database.
     * 
     */
    public void createDataBase() throws IOException {

        checkDataBase();
        SQLiteDatabase db_Read = null;

        // Creates empty database default system path
        db_Read = this.getReadableDatabase();
        db_Read.close();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }

    /**
     * Checks if the database already exist to avoid re-copying the file each
     * time whenever the application opened.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {
            e.printStackTrace();
        }

        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    /**
     * Copies database from local assets-folder to the just created empty
     * database in the system folder and from where it can be accessed and
     * handled using byte stream transferring.
     * 
     */
    private void copyDataBase() throws IOException {

        // Open local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME + ".db");

        // Path of the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the input file to the output file
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public SQLiteDatabase openDataBase() throws SQLException {

        // Opens the database
        String myPath = DB_PATH + DB_NAME;
        return SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        // TODO Auto-generated method stub
    }
} 
```

我在[这里](http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html)找到了答案：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:52:51.000

可能您已经硬编码了数据库的路径。对于不同的设备，可能会有所不同。用于`Envirenment.getExternalStorageDirectory()`创建数据库的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:38:57.193

尝试使用这个私有静态字符串 DB_PATH = "/data/data/your package name/databases/";

# html - MediaSource API appendBuffer() appendArrayBuffer() append() 在 Chrome 中使用哪一个？

> ID：15474992
> 
> 赞同：0
> 
> 时间：2013-03-18T10:48:59.690
> 
> 标签：html, video

我阅读了 MediaSource API 的规范：http: [//www.w3.org/TR/media-source/](http://www.w3.org/TR/media-source/)（工作草案）和 [https://dvcs.w3.org/hg/html-media/raw-file/tip /media-source/media-source.html](https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)（编辑草稿）

第一个参考 SourceBuffer 方法：appendArrayBuffer() 第二个：appendBuffer()

在 chrome 中，SourceBuffer 上唯一可用的方法似乎是 append() 但我没有找到关于该方法的任何文档。

有人可以告诉我他是否有关于 chrome 中 append() 方法的更多信息，以及是否有任何浏览器实现 appendBuffer() 或 appendArrayBuffer() ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:20:51.823

当前版本的 Chrome（即 25-stable、26-beta 和 27-dev）基本上支持[10 月 8 日版本](https://dvcs.w3.org/hg/html-media/raw-file/6d127e69c9f8/media-source/media-source.html)的媒体源扩展规范。我们正在更新实施以反映当前的编辑草案。规范中发生了很多变化，需要一些时间才能使其全部正常工作。

现在你应该只使用旧版本的规范来实现你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:48:37.477

在搜索了规范修订历史之后，似乎 chrome 没有实现在以下位置更改的当前规范：

```
Version Comment
04 January 2013 
Renamed append() to appendArrayBuffer() and made appending asynchronous.
Added SourceBuffer.appendStream().
Added SourceBuffer.setTrackInfo() methods.
Added issue boxes to relevant sections for outstanding bugs. 
```

所以 append() 是旧的方法名

# html - 如何使用clojure解析html文件？

> ID：15474994
> 
> 赞同：6
> 
> 时间：2013-03-18T10:49:02.540
> 
> 标签：html, clojure

我是clojure的新手，我需要一些例子。请告诉我如何使用 clojure 解析 html 文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T10:50:59.480

[Enlive](https://github.com/cgrand/enlive) is a great tool for this. In short:

```
(ns foo.bar
  (:require [net.cgrand.enlive-html :as html]))

(defn fetch-page [url]
  (html/html-resource (java.net.URL. url))) 
```

[Here](https://github.com/swannodette/enlive-tutorial/) is a nice tutorial on using it both as a scraper/parser and as a template engine:

[Here](https://github.com/miles-no/MilesCampHackatonScraper/blob/master/src/miles_hackaton_scraper/core.clj) is a short example of scraping a page.

Another option is [clj-tagsoup](https://github.com/nathell/clj-tagsoup). Enlive also uses tagsoup, but in addition has a pluggable parser so you can add support for other parsers.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T10:58:43.183

Clojure's [xml](http://clojuredocs.org/clojure_core/clojure.xml) [parsing](http://clojuredocs.org/clojure_core/clojure.xml/parse) library is there for you.

> Parses and loads the source s, which can be a File, InputStream or String naming a URI. Returns a tree of the xml/element struct-map, which has the keys :tag, :attrs, and :content. and accessor fns tag, attrs, and content. Other parsers can be supplied by passing startparse, a fn taking a source and a ContentHandler and returning a parser

Or use [enlive](https://github.com/cgrand/enlive), it's framework fully on clojure or use Java based [HtmlCleaner](http://htmlcleaner.sourceforge.net/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T19:09:06.790

HTML 解析器

*   [clj-tagsoup](https://github.com/nathell/clj-tagsoup) clj
*   [面包](https://github.com/weavejester/crouton)丁
*   [山核桃](https://github.com/davidsantiago/hickory)clj cljs
*   [图珀洛](https://github.com/cloojure/tupelo)clj cljs
*   [Webmine](https://github.com/tol/webmine) clj

来源 - [https://www.clojure-toolbox.com](https://www.clojure-toolbox.com)

# php - 将 javascript 变量传递给 php

> ID：15474995
> 
> 赞同：0
> 
> 时间：2013-03-18T10:49:05.360
> 
> 标签：php, javascript, codeigniter

我在将 javascript 变量传递给 php 代码时遇到问题。

我用于 php 的代码是：

```
$image= $this->user_gallerymodel->viewAlbumImage(); 
```

我只需要将 javascript 变量作为模型函数中的参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:51:23.520

使用`location.href`您可以调用控制器..这会重新加载页面

```
var jvVar="test";
window.location="controller/path/" +  jvVar; 
```

无需重新加载，您可以使用 ajax 发送 var..

```
 var jvVar="test";
 $.post("controller/path/test",{value:jvVar},function(data){
           alert(data);
 }); 
```

在你的控制者中说 test().. 通过邮寄获得它..

```
 <?php
 function test(){
    $value=$this->input->post('value');
    echo $value;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:58:38.460

You could use an Ajax call where values contains the value you wish to send back.

```
$.ajax({
  url: "test.php",
  type: "post",
  data: values,
  success: function(){
      alert("success");
       $("#result").html('Value Saved');
  },
  error:function(){
      alert("failure");
      $("#result").html('there was an error while saving value');
  }   
}); 
```